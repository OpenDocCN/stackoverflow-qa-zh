# StackOverflow 问答 11826000-11826999

# android - 无法从带有意图内容的 Android 小部件启动 Main Activity？

> ID：11826005
> 
> 赞同：1
> 
> 时间：2012-08-06T09:54:13.807
> 
> 标签：android, android-intent, android-widget

我正在尝试从小部件启动我的主要活动，但也发送意图内容。我尝试这样做的原因是为了从 Main Activity 中启动特定方法（即语音登录）。在这里，我刚刚创建了一个 Toast 用于测试目的。因此，在小部件代码中，我只需执行以下操作：

```
Intent intent = new Intent(context, LogInActivity.class);

intent.putExtra("button_clicked","hello");
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
// Get the layout for the App Widget and attach an on-click listener
// to the button
RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);
views.setOnClickPendingIntent(R.id.imageButton1, pendingIntent); 
```

在我的 Main (LogInActivity) 中，我执行以下操作：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);
    Intent myIntent = getIntent();

    Toast.makeText(getApplicationContext(),
            myIntent.getStringExtra("button_clicked"),
            Toast.LENGTH_SHORT)
            .show(); 
```

但什么也没有出现。当我调用辅助活动并分别从它接收意图内容时，完全相同的代码段起作用。关于如何从我的主要活动中读取意图内容的任何想法，或者至少有人告诉我这是不可能的，所以我应该找到另一个实现，非常感谢。

编辑：添加 Android 清单条目和辅助活动详细信息

```
<activity
    android:name="SplashActivity"
    android:label="@string/app_name"
    android:screenOrientation="portrait">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity android:name=".LogInActivity"
          android:label="@string/title_activity_login"
          android:screenOrientation="portrait">
</activity>
<activity android:name=".TransactionActivity"
          android:label="@string/title_activity_transaction"
          android:screenOrientation="portrait">
</activity> 
```

在我的次要活动中，我只是在开始时调用了相同的脚本，我相信其余的代码应该不会影响这一点。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_transaction);

    Intent myIntent = getIntent();
    Toast.makeText(getApplicationContext(),
            myIntent.getStringExtra("button_clicked"),
            Toast.LENGTH_SHORT)
            .show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:09:52.117

嘿，在小部件中试试这个

```
Intent i = new Intent(context, top.class);
i.putExtra("widget", "1");
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, i, 0);
views.setOnClickPendingIntent(R.id.imagebutton, pendingIntent); 
```

这在主要活动中

```
if(getIntent().getStringExtra("widget")!=null)
{
Log.i("INDEX", getIntent().getStringExtra("widget"));
widget = Integer.parseInt(getIntent().getStringExtra("widget"));
}
else
{
 Log.i("INDEX", "NULL");
} 
```

所以你可以检查它是否为空，并且在我的小部件中它工作正常顺便说一句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:41:58.507

我刚刚找到了解决方案。似乎问题在于我的主要活动收到的多个意图。我显然读到了那些错误的意图，因此是 NULL 值。我开始着手如何使每个意图都独一无二，但似乎只是一小行

```
intent.setAction("my action"); 
```

在意图创建中取得了成功，我猜它在被 LogInActivity 接收时给予了优先权？我不太确定，但至少我毕竟要阅读内容。

# ruby-on-rails - Rails 3重定向文件上传错误

> ID：11826008
> 
> 赞同：0
> 
> 时间：2012-08-06T09:54:18.503
> 
> 标签：ruby-on-rails, ruby, redirect, file-upload, controller

整个下午，

我有一个控制器来处理新文件上传的创建（它是一项任务，所以我不能使用回形针并将其保存到数据库中，所以我知道所有这些的缺点，并且可以听到你抱怨大声笑）但是当验证对于文件保存失败（即尝试不上传任何内容）重定向到新的上传表单似乎没有做任何事情并尝试呈现索引页面。我已经尝试了使用渲染、redirect_to(:back) 等的大量重定向变体，但似乎没有一个真正做任何事情。

如果有人有任何想法，将不胜感激。

继承人的代码。

控制器

```
def create
    beginning = Time.now
    return if params[:attachment].blank?

    @attachment = Attachment.new
    @attachment.uploaded_file = params[:attachment]
    @time = (Time.now - beginning)
    if @attachment.save
      flash[:success] = "File uploaded in #{@time} seconds"
      redirect_to @attachment
    else
      flash[:notice] = "something went wrong"
      redirect_to 'new
    end
 end 
```

模型

```
class Attachment < ActiveRecord::Base
  has_many :anagrams, dependent: :destroy
  attr_accessible :filename, :content_type, :data
  validates_presence_of :filename, :data, :content_type

  def uploaded_file=(incoming_file)
    self.filename = incoming_file.original_filename
    self.content_type = incoming_file.content_type
    self.data = incoming_file.read
  end

  def filename=(new_filename)
    write_attribute("filename", sanitize_filename(new_filename))
  end

  private

  def sanitize_filename(filename)
    just_filename = File.basename(filename)
    just_filename.gsub(/[^\w\.\-]/, '_')
  end
end 
```

路线.rb

```
 resources :attachments, only: [:create, :new]
  resources :anagrams, only: [:create, :new]

 root to: "attachments#new" 
```

如果有人需要查看更多代码，请大喊，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:53:13.533

而不是redirect_to 'new'，您应该再次呈现表单，以便它可以显示错误。例如：

```
if @attachment.save
  flash[:success] = "File uploaded in #{@time} seconds"
  redirect_to @attachment
else
  flash.now[:notice] = "something went wrong"
  render :action => 'new
end 
```

如果你真的需要重定向，你应该调试错误。您可以通过以下方式转储错误：

```
puts @attachment.errors.inspect 
```

它看起来很脏，但我们可以很快找到问题：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T21:11:51.977

我设法让它工作，[：附件] .blank？正在做我想让 else 语句做的事情，但我没有想到将 flash 通知放在那里并呈现“新”。切换它并工作。

```
 def create
   beginning = Time.now
   if params[:attachment].blank?
     flash[:error] = "Please upload a file"
     render 'new'
   else
    @attachment = Attachment.new
    @attachment.uploaded_file = params[:attachment]
    @time = (Time.now - beginning)
    if @attachment.save
      flash[:success] = "File uploaded in #{@time} seconds"
      redirect_to @attachment
   end
  end
end 
```

# sql-server-2008-r2 - 连接失败：SQLState：'HY100' SQL Server 错误：0

> ID：11826015
> 
> 赞同：0
> 
> 时间：2012-08-06T09:54:49.663
> 
> 标签：sql-server-2008-r2, windows-applications

我开发了一个使用 SQLSERVER R2 Express 作为数据库的 windows 应用程序。我在 8 台计算机上安装了应用程序，并在他们的服务器（windows 2008 Os）上安装了 sqlserver managements studio 并附加了数据库“DB_data”。我在 5 台计算机上的应用程序正在连接到我的数据库“DB_data”并正常工作（windows7，XP service pack2 OS在5个系统中）。但是在三个系统中（其操作系统XPservice pack2），它没有与数据库连接，它显示“超时错误”。我刚刚创建一个 .UDL 文件并尝试检查连接。我可以看到 SQLServer 的实例（即 .SERVER\PNRSQLSERVER），但是当我尝试选择数据库“DB_data”时，它显示以下消息“连接失败：SQLState：'HY100 ' SQL Server 错误：0"

我不明白是什么问题，请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:03:52.773

看看[文档](http://msdn.microsoft.com/en-us/library/ms711022.aspx)

> 发生错误，没有特定的 SQLSTATE 并且没有定义特定于实现的 SQLSTATE。SQLGetDiagRec 在 *MessageText 缓冲区中返回的错误消息描述了错误及其原因。

我不确定如果它在win7上运行会有所帮助。

# regex - 如何使用正则表达式剥离预处理器指令

> ID：11826016
> 
> 赞同：1
> 
> 时间：2012-08-06T09:54:51.913
> 
> 标签：regex

FI 有许多代码，其中包含如下代码片段：

```
#if wxCHECK_VERSION(2, 9, 0)
Codef( _T("%AAppend(%t)"), ArrayChoices[i].wx_str());
#else
Codef( _T("%AAppend(%t)"), ArrayChoices[i].c_str());
#endif 
```

但我想清理代码

```
Codef( _T("%AAppend(%t)"), ArrayChoices[i].wx_str()); 
```

我的意思是，我需要剥离预处理器指令，只留下第一个分支。

匹配条件应该是：

```
#if wxCHECK_VERSION(2, 9, 0)
blablabla1
#else
blablabla2
#endif 
```

`blablabla1`和的内容`blablabla2`应该相同，只有`wx_str`和除外`c_str`。

看到这里，有人说可以用正则表达式处理，但我不知道，你能帮帮我吗？谢谢。

编辑：我只想剥离#else 分支，只保留第一个分支内容。

这是参考页面：

[回复：删除所有 wx_str 和 c_str 预处理器的最佳和快速方法是什么](http://forums.codeblocks.org/index.php/topic,16680.msg113264/topicseen.html#msg113264)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:39:58.977

# 搜索

[此正则表达式](http://regexr.com?31omq)适用于您的示例：

> `\s+#if wxCHECK_VERSION\(2\, 9\, 0\)\s*(.*?)wx_str([^\r\n]*?)\s*#else\s*(\1)c_str(\2)\s*#endif`

# 替换

**Regexr.com**：替换为：`$1wx_str$2`。不要忘记选择**`dotall`**选项。

**记事本++**：替换为：`\1wx_str\2`。不要忘记选择**`. matches newline`**选项。

# 批处理模式

Notepad++ 允许在批处理模式下查找/替换。

1.  按++打开“在文件**中查找**”对话框。`Ctrl``Shift``H`
2.  将上面的正则表达式复制粘贴到“**查找内容**”框中。
3.  将上面的替换 ( ) 复制粘贴`\1wx_str\2`到“**替换为**”框中。
4.  指定要在其中查找/替换的**目录。**
5.  在搜索模式组框中选择**正则表达式。**
6.  选中该`. matches newline`框。
7.  单击“**查找全部**”按钮查看匹配项。
8.  当您确定要替换所有内容时，单击“**在文件中替换”按钮。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:34:04.100

许多简单的正则表达式工具不支持多行匹配。您可以创建一个简单的`awk`或`sed`脚本，或使用 Perl 将整个文件粉碎成一个长字符串；

```
perl -0777pe 's/^#if wxCHECK_VERSION\(2, 9, 0\)\n(.*?\n)(?:#else\n.*?\n)?#endif\n/\1/gsm' input.c >fixed.c 
```

这不会尝试考虑空格的变化，也不会处理嵌套的预处理器指令。如果您的匹配项始终是单行，则可以简化。

# html - 图像在 Internet Explorer 9 中显示两次，而在 Firefox 或 chrome 中完美显示

> ID：11826022
> 
> 赞同：0
> 
> 时间：2012-08-06T09:55:05.463
> 
> 标签：html, css

就像标题说的那样，在 IE 中，一个图像显示了两次，但在其他浏览器中却完美显示。现在奇怪的是它在我的 5 个页面中的 2 个上显示错误。虽然代码对所有人都是一样的。

问题是两个导航部分的 html 代码完全相同，它们从同一个 css 文件中获取图像。

任何人都可以检查可能有什么问题吗？

CSS：

```
a img
{
border:none;
}

body {
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
color: #7f7e7e;
margin: 0px;
padding: 0px;
background-color: #ffffff
background-image: url(images/#####.pg);
background-repeat: repeat-x

}

#container {
width: 1200px;
margin: auto;
overflow: hidden;
}

#header {
width: 1200px;
height: 130px;
}

#logo {
background-image: url(../images/logo.png);
background-repeat: no-repeat;
width: 425px;
height: 87px;
margin-top: 28px;
margin-left: 128px;
float: left;
}

#logo_des {
background-image: url(../images/logo2.png);
background-repeat: no-repeat;
width: 311px;
height: 57px;
float: right;
margin-top: 57px;
margin-right: 37px;
}

.nav_menu li { 
list-style: none;
display: inline;
margin-left: 159px;
line-height: 40px;

} 
```

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head> <title> x</title>

    <link href = "styles.css" rel="stylesheet" type="text/css" />

</head>

<body>
<a name="top">
<div id="container"> <!-- BEGIN CONTAINER -->
<div id="header"> <!--BEGIN HEADER -->
<div id="logo"><!-- BEGIN LOGO -->
</div><!-- END LOGO -->     

<div id="logo_des"> <!-- BEGIN LOGO DESCRIPTION -->
</div> <!--END LOGO DESCRIPTION -->

</div> <!--END HEADER-->

<div id="navigation_line"> <!-- BEGIN NAVIGATION_LINE -->
<div id="menu"> <!--BEGIN MENU-->

<ul class="nav_menu">
<li><a href="index.html">Home</a></li>
<li><a href="about_x.html">About x</a></li>
<li><a href="our_services.html">Our Services</a></li>
<li><a href="contact_us.html">Contact Us</a></li>
<li><a href="partners.html">Partners</a></li>
</ul>   
</div> <!-- END NAVIGATION_LINE -->
</div> <!--END MENU--> ` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:49:14.783

我太傻了，我忘了把它通过验证器。修正了一些错误，现在完成了。

很抱歉浪费您的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:51:32.823

You need to close some of your open tags :)

# android - Android 中的 Log4j 实现

> ID：11826025
> 
> 赞同：2
> 
> 时间：2012-08-06T09:55:27.987
> 
> 标签：android, logging, log4j, android-logcat

我是 android 开发的新手。我想将日志写入 SD 卡中的一个文件。我如何使用 Log4j 来做到这一点。实现 Log4j 的所有步骤都是什么。我读了很多 atricles。但没有一个描述如何配置和实现它。谁能用简单的话解释一下如何在android中做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T23:15:07.740

你应该看看[`logback`](http://tony19.github.com/logback-android/)（下一代log4j）。使用[`FileAppender`](http://logback.qos.ch/manual/appenders.html#FileAppender)或[`RollingFileAppender`](http://logback.qos.ch/manual/appenders.html#RollingFileAppender)。

## 指示：

1.  `slf4j-api-1.6.6.jar`将和添加`logback-android-1.0.6-2.jar`到您的类路径。

2.  在您的项目中创建文件`assets/logback.xml`（或使用`AndroidManifest.xml`...see [example](http://tony19.github.com/logback-android/)），其中包含以下配置：

```
<configuration>
  <appender name="FILE" class="ch.qos.logback.core.FileAppender">
    <file>/sdcard/testFile.log</file>
    <append>true</append>
    <encoder>
      <pattern>%-4relative [%thread] %-5level %logger{35} - %msg%n</pattern>
    </encoder>
  </appender>

  <root level="DEBUG">
    <appender-ref ref="FILE" />
  </root>
</configuration> 
```

*注意：由于指定路径在SD上，请务必使用[`WRITE_EXTERNAL_STORAGE`](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE)权限。您可以改为指定您已经具有写入权限的其他路径。*

您的 Java 代码（包含 SLF4J 日志记录调用）现在将级别或以上`DEBUG`级别的所有事件记录到`/sdcard/testFile.log`.

## 示例 Java：

```
package com.example;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import com.example.R;
import android.app.Activity;
import android.os.Bundle;

public class HelloAndroidActivity extends Activity {
    static private final Logger LOG =
                       LoggerFactory.getLogger(HelloAndroidActivity.class);

    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       //
       // Based on the configuration above, these log statements
       // are written to /sdcard/testFile.log
       //
       LOG.info("Hello Android!");
       LOG.debug("reply: {}", Example.hello());
    }
}

class Example {
    static private final Logger LOG =
                     LoggerFactory.getLogger(Example.class);

    static public String hello() {
        LOG.trace("entered hello()");
        return "Hi there!";
    }
} 
```

# iphone - UIViews 在水平滚动视图中并排

> ID：11826027
> 
> 赞同：0
> 
> 时间：2012-08-06T09:55:37.293
> 
> 标签：iphone, ios, uiview, uiscrollview

我目前正在努力学习`UIScrollView`. 作为一个练习，我只想要`UIView`带有显示文本的标签的 s，并且我希望这些视图包含在 s 中`UIScrollView`。为此，我有两个`mutableArray`s；一个将包含文本，另一个将包含`UIView`s。下面是初始化这些数组的方法。

```
- (NSMutableArray *)postViewsArray
{
    if (_postViewsArray == nil) _postViewsArray = [[NSMutableArray alloc] init];
    return _postViewsArray;
}

- (NSMutableArray *)postsArray
{
    if (_postsArray == nil) _postsArray = [[NSMutableArray alloc] init];
    return _postsArray;
} 
```

接下来，我用值填充这两个数组。对于`postsArray`我只放置静态文本。但是对于`postViewsArray`我用作`NSNull`占位符。这是为了优化目的，尤其是内存管理，当我将来需要加载带有图像的视图时。下面是设置这些数组的方法。

```
- (void) setupPostsArray {
    [self.postsArray addObject:@"Hello"];
    [self.postsArray addObject:@"You are doing good"];
    [self.postsArray addObject:@"By this exercise"];
    [self.postsArray addObject:@"In scroll views, paging enabled :)"]; 
}

- (void) setupPostViewsArray {
    for (int i = 0; i < [self.postsArray count]; i++) {
        [self.postViewsArray addObject:[NSNull null]];
    } 
} 
```

在那里，很简单。现在让我们进入更具挑战性的部分。因此，在`loadMyPages`方法中，首先我初始化 my `scrollView`，设置它`contentSize`，并将其添加为我的顶级视图的子视图，即`self.view`. 在这里，我还在创建可以滑动浏览的“页面”时进行迭代，它是内容、背景颜色。它在那里。

但是，当我运行该应用程序时，我只能看到一个`view`可以刷卡的。似乎还有 3 个`views`可以容纳在这个滚动视图中。我做了`NSLog`s 来检查`page`正在创建的 s`subviews`并且它似乎工作正常，因为我在调试区域中看到了日志。请注意，`view`我可以看到的 具有 my 的最后一个值`postArray`。有朋友怀疑其他`view`s 是重叠的，而不是并排查看。

在这里给我一些启发：）下面是我的`loadMyPages`方法，如果你们准备好迎接挑战，也许可以看看这个。

```
- (void) loadMyPages
    {
        NSLog(@"loads view");
        CGRect pagingScrollViewFrame = [[UIScreen mainScreen] bounds];

        self.pagingScrollView = [[UIScrollView alloc] initWithFrame:pagingScrollViewFrame];

        self.pagingScrollView.contentSize = CGSizeMake(pagingScrollViewFrame.size.width * [self.postsArray count], pagingScrollViewFrame.size.height);

        [self.view addSubview:self.pagingScrollView];

        // iteration to enumerate creating of UIViews
        for (int i = 0; i < [self.postsArray count]; i++) {

            NSLog(@"Creating views?");

            UIView *pageView = [self.postViewsArray objectAtIndex:i];

                if ((NSNull *) pageView == [NSNull null]) {

                    // create a new UIView
                    UIView *page = [[UIView alloc] initWithFrame:self.view.bounds];

                    page.backgroundColor = [UIColor lightGrayColor];

                    // set text label
                    self.postLabel.text = [self.postsArray objectAtIndex:i];

                    // add the label to the created UIView
                    [page addSubview:self.postLabel];

                    // then lastly, add each element of the postViewsArray as a subview of the pagingScrollView
                    [self.postViewsArray replaceObjectAtIndex:i withObject:page];

                    [self.pagingScrollView addSubview:[self.postViewsArray objectAtIndex:i]];

                    NSLog(@"this view %@ has this post value: %@", page, [page subviews]);
                    NSLog(@"subviews of scrollview: %@", [self.pagingScrollView subviews]);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:06:33.027

您为每个视图提供的框架不正确，因此您的视图重叠： UIView *page = [[UIView alloc] initWithFrame:self.view.bounds];

因为每个视图都获得相同的帧。

取而代之的是，您应该提供如下框架：

```
UIView *page1 = [[UIView alloc] initWithFrame:self.view.bounds];

UIView *page2 = [[UIView alloc] initWithFrame:CGRectMake(page1.frame.origin.x+page1.frame.size.width, 0, page1.frame.size.width, page1.frame.size.height)]; 
```

等等。

希望你能得到我想要传达的东西。

在 For 循环之前创建一些 CGRect 变量。

```
CGRect theViewFrame = CGRectZero; 
```

内部 for 循环提供页面框架并初始化 theViewFrame 如下：

```
page.frame = CGRectMake(theViewFrame.origin.x+self.view.bounds.size.width, 0, self.view.bounds.size.width, self.view.bounds.size.height);
    theViewFrame = pageView.frame; 
```

因此，当每次循环迭代时， theViewFrame 将包含最新的视图帧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:21:15.387

根据我的理解，您希望水平布局视图，就像一副并排放置的卡片，然后从一个滚动到另一个，就像 iOS 默认的照片应用程序一样。

为此，每个视图的 x 原点差值必须等于视图框架或 scrollView 框架的宽度。但是您当前的代码

```
[[UIView alloc] initWithFrame:self.view.bounds] 
```

为每个视图设置相同的原点，从而导致重叠。将您的代码更改为以下

```
[[UIView alloc] initWithFrame:(i*320), 0, yourWidth, yourHeight]; 
```

该`i`因子将增加 x 值，将每个后续视图放置在前一个视图旁边。

注意：将 320 和 0 调整为 x、y 值以满足您的需要

# testing - 本例中的故障/错误/失败

> ID：11826028
> 
> 赞同：7
> 
> 时间：2012-08-06T09:55:36.973
> 
> 标签：testing, computer-science, terminology

具有以下一般定义：
**fault** - 错误的原因（编码错误）
**error** - 可能导致失败的错误状态
**failure** - 服务与正确服务的偏差

以下代码的正确应用程序是什么：

当余额为 100 或更少时，代码不应允许提款

```
 if (Balance<100) 
    {
    return false; 
    }
    else WithDraw(); 
```

据我了解，错误在于缺少 = 运算符。但是错误和失败会是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T13:02:29.520

如您所说，代码中存在错误（编码或逻辑错误），比较中缺少运算符。如果余额永远不会正好为 100，则可能没有人注意到这个错误。

如果在某个时候余额为 100 并且检查已完成，则会暴露错误。系统将处于错误状态。它不应该允许撤回，而是允许撤回。如果允许提款，则系统无法正常工作，用户会看到失败。

在这个小例子中，很难区分错误和失败，因为用户可能会看到错误状态的后果。如果我们假设在代码中的其他地方还有另一次检查，并且因为提款没有完成，那么系统将处于错误状态（错误已实现），但另一种情况会掩盖这一情况，而用户不会看到了失败。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-06T13:00:01.610

这个问题需要一些上下文。这似乎也是一个“家庭作业”风格的问题。根据提供的定义，“缺少 = 运算符”可能不是“错误”。

正在测试的变量“余额”可能明确需要小于 100。

至于错误，您指的是“状态”。在这方面，您可能需要查看以前的控制流语句（if/for/while）来评估状态。

失败...好吧，也许您正在处理简单的转换错误（int/float），这在处理面向货币的程序时很常见。

当提到代码没有做它应该做的事情时，我们通常指的是：

*   编译/运行时错误
*   逻辑错误

# xquery - xquery初学者-当xml中没有该变量的内容时如何为变量提供特定的默认值

> ID：11826031
> 
> 赞同：0
> 
> 时间：2012-08-06T09:55:48.403
> 
> 标签：xquery

我正在努力从网页中提取一些内容。

下面给出的是我正在使用的 XQuery 代码。我正在使用 XQuery 库来解析通过将 HTML 网页转换为 XML 获得的 XML。之后，我将从该 XML 页面中提取一些特定内容：

```
declare variable $doc as node() external;

let $select_block := $doc//div[@class="randomclass" and contains(.,'MatchingText')]
for $select_link in $select_block/a 
for $select_link_url in $select_link/@href
where contains($assignee_link_url, 'inassignee')  
return data($select_link) 
```

从上面，您可以看到该变量`$select_block`尝试提取具有 的网页 div 的内容，`class="randomclass"`其中包含文本“MatchingText”。

现在，如果有问题的网页不包含这样的块，那么我如何返回默认值`$select_link`？基本上，我想解决没有为 XQuery 表达式中的选择返回值的情况，以便我可以标记一个标志，告诉用户未找到该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:10:34.270

if/then/else 结构可能会做你想做的事。一个例子：

```
declare variable $doc as node() external;

let $select_block := $doc//div[@class="randomclass" and contains(.,'MatchingText')]
return if($select_block) then (
  for $select_link in $select_block/a 
  for $select_link_url in $select_link/@href
    where  contains($assignee_link_url,'inassignee')  
  return data($select_link)
) else (
  'default value'
) 
```

# sql - 使用 groupby 的 SQL 连接查询

> ID：11826032
> 
> 赞同：0
> 
> 时间：2012-08-06T09:55:54.947
> 
> 标签：sql

我有两个表说 T1 和 T2，一个（T1）存储要支付的金额（AP）、主键 ID 和人员 ID（pid）。

其他表（T2）存储已支付的金额（Pay），这可以是多个，因为可以为 AP 进行多次支付，还存储 T1 ID 的外键和类型。

现在我想要的是来自 t1 的 SUM(AP) 和 SUM(Pay) groupby 类型。

我为它做的查询，（不是确切的查询，但很好地解释了我正在尝试的内容）

```
select SUM(AP) from T1 
where pid='someid' join left T2 on t1.id = t2.id, 
select Pay and type from T2, groupby type 
```

解释

```
T1                T2

ID   AP            ID Pay Type

19   X             19 W  A
20   Y             19 Q  B
21   Z             21 R  B
                   21 S  B 
```

现在发生了什么，当它按类型分组时，它需要 19,21,21 作为 B，一起，它给我 T1 的总和是 Z + X 的两倍，同样对于 A，它取 A 并返回总和为X

我收到格式的数据

```
1\. AP:X, Pay:W, Type: A
2\. AP: X+Z+Z, Pay:Q+R+S,Type B 
```

我需要的是 T1 的总和和 T2 的总和（基于 T1 的 ID）按类型分组

我使用两个不同的查询解决了这个问题，每个查询一个，但不能在单个查询中完成，我知道这可能很复杂，但如果可能的话想要。

希望我试图让问题足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:54:18.303

这就是你所追求的吗？

```
select 
    vt1.id,
    vt1.ap,
    sum(t2.pay),
    t2.type

from (select id, sum(ap) as ap from t1 group by id) vt1
    left join t2 on vt1.id=t2.id
group by vt1.id, vt1.ap, t2.type 
```

# asp.net - 正则表达式接受十进制数字但不接受单个 0

> ID：11826034
> 
> 赞同：1
> 
> 时间：2012-08-06T09:56:12.123
> 
> 标签：asp.net, validation

我`ASP.NET Regular Expression Validator`用来验证一个`textbox`.

**有效样本：**

```
1

1.1

11.1

11.12

0.1

0.12 
```

**无效样本：**

```
0

1.123 
```

如您所见，我不希望输入仅包含`0`.

目前我有这个表达式允许`0`.

```
^[0-9]{1,2}([/.][0-9]{1,2})?$ 
```

我该怎么做才能防止出现单个 0？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:15:01.707

这对你有什么作用？

```
((?=.*[1-9])\d+(\.\d+)?) 
```

解释：

`(?=.*[1-9])`- 匹配但排除任何大于 1 的值

`\d+`- 匹配任何数字

`(\.\d+)?`- 匹配小数点加上余数。

忽略第二组，这只是为了打破正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-22T06:52:40.813

(((?=.*[1-9])\d+)((.\d{1,2})?))$

也工作即

-> 1.5

-> 20.80

-> 5.45

-> 0.5

# python - pyside 显示/隐藏布局

> ID：11826036
> 
> 赞同：9
> 
> 时间：2012-08-06T09:56:14.610
> 
> 标签：python, layout, hide, show, pyside

我正在尝试根据是否选中复选框来显示两种布局之一。

只有使用小部件，我才能执行以下工作正常：（此示例中的每个小部件都是 QLineEdit）

```
myCheckbox.stateChanged.connect(switchControls)

def switchControls (self, state):
    if state == 2:
        self.widget1.show()
        self.widget2.hide()
    else:
        self.widget1.hide()
        self.widget2.show() 
```

但是，由于我想为每个 QLineEdit 添加一个描述性标签，我需要在某种布局或容器中组合一个 QLineEdit+QLabel。我一直在尝试 addlayout / removeLayout / removeItem 在布局而不是小部件上执行上述操作，但无法使其正常工作。该程序在我最后一次尝试时崩溃了。

在两种布局之间切换的最简单方法是什么？它不必使用复选框，但我更喜欢那个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T10:34:45.183

将布局放入单独的小部件中。现在你“只使用小部件”。

这是一个例子：

```
from PySide.QtCore import *
from PySide.QtGui import *

class MainWindow(QWidget):
    def __init__(self):
        QWidget.__init__(self)

        self.layout=QVBoxLayout()
        self.setLayout(self.layout)

        self.checkbox=QCheckBox("Layouts")
        self.layout.addWidget(self.checkbox)

        self.widget1=QWidget()
        self.layout.addWidget(self.widget1)

        self.layout1=QVBoxLayout()
        self.widget1.setLayout(self.layout1)

        self.layout1.addWidget(QLabel("First layout"))

        self.layout1.addWidget(QTextEdit())

        self.widget2=QWidget()
        self.layout.addWidget(self.widget2)

        self.layout2=QHBoxLayout()
        self.widget2.setLayout(self.layout2)

        self.layout2.addWidget(QTextEdit("Second layout"))

        self.layout2.addWidget(QTextEdit())

        self.checkbox.toggled.connect(self.checkbox_toggled)
        self.checkbox.toggle()

        self.show()

    def checkbox_toggled(self, state):
        self.widget1.setVisible(state)
        self.widget2.setVisible(not state)

app=QApplication([])
mw=MainWindow()
app.exec_() 
```

运行它来看看它是如何工作的。

# mysql - MySQL注入预防

> ID：11826039
> 
> 赞同：0
> 
> 时间：2012-08-06T09:56:21.467
> 
> 标签：mysql, database, security, sql-injection

黑客通过 sql 注入攻击我的网站并运行虚假查询如何防止他们需要帮助。

是否有任何防火墙可以防止黑客攻击等，或者我应该使用`mysql_real_escape_string($_REQUEST);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:01:00.077

> 是否有任何防火墙可以防止黑客攻击等

不，防火墙没有用。攻击者将他们的输入（查询）插入到通常的位置（HTML 文本框、URL 等）。如果可能的话，防火墙将无法区分真实用户和恶意用户。

您必须使用 `mysql_real_escape_string(..)。甚至更好地使用[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:29:04.263

如果您的网站包含有价值的数据，例如用户数据，请在解决问题之前关闭您的网站。

复制日志并复制黑客执行的虚假查询。这将帮助您确定应用程序的安全漏洞。

如果您自己编写应用程序，您应该阅读良好的安全实践并相应地更新您的应用程序。

如果您使用的是 Wordpress 或 Drupal 等第三方应用程序，请更新到您正在使用的代码的最新版本。如果失败，请尝试重现该 hack：好！如果您成功破解：修复泄漏或停止使用代码。

如果您使用的是 Symfony 或 Zend Framework 等框架，请更新到最新版本并尝试重现该 hack。

# r - 使用 R 的线性回归

> ID：11826043
> 
> 赞同：-1
> 
> 时间：2012-08-06T09:56:33.213
> 
> 标签：r

我有以下公式，我试图在其中找到 coef1、coef2...coef5 并且所有其他变量都是已知的。

```
d ~ a + 2 * (coef1 * b1 + coef2 * b2 + coef3 * b3 + coef4 * b4 + coef5 * b5) 
```

我一直在使用非线性最小二乘法（nls）解决这个问题，没有问题。

```
nlsfit <- nls(d ~ a + 2 * (coef1 * b1 + coef2 * b2 + coef3 * b3 + coef4 * b4 + coef5 * b5), data=df, start=list(coef1=0, coef2=0, coef3=0, coef4=0, coef5=0)) 
```

但是有人告诉我，这应该使用线性最小二乘法来解决。所以我尝试使用 lm 函数和 glm

```
lmfit <- lm(d ~ a + 2 * (coef1 * b1 + coef2 * b2 + coef3 * b3 + coef4 * b4 + coef5 * b5), data=df)

glmfit <- glm(d ~ a + 2 * (coef1 * b1 + coef2 * b2 + coef3 * b3 + coef4 * b4 + coef5 * b5), data=df, family=binomial()) 
```

我相信这两个都返回一个错误，因为数据框没有任何 coef* 变量

```
Error in terms.formula(formula, data = data) : invalid model formula in ExtractVars 
```

谁能指出我如何使用线性最小二乘法解决这个问题的正确方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T10:24:42.233

你要

```
lm(d / 2 ~ offset(a / 2) + b1 + b2 + b3 + b4 + b5, data=df) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T10:04:33.927

您不需要将系数添加到 R 中的公式中。键入`?formula`R。

相反，您可以使用以下公式：

```
x=d-a
form <- x ~  b1 +  b2 +  b3 + b4 + b5 
```

因为您不想将变量乘以`a`系数。

# mdns - 在苹果的 mDNSResponder 代码中启用单播响应（PTR 和 SRV）

> ID：11826044
> 
> 赞同：0
> 
> 时间：2012-08-06T09:56:35.643
> 
> 标签：mdns

我正在将苹果的 mDNSResponder(mDNSResponder-320.10.80) 代码用于我的服务发现内容，这对我来说在多播方面工作得很好，但现在我的要求发生了变化，我需要让它适用于单播。我阅读了互联网草案，因为他们指定了启用单播响应位，我们可以获得单播响应。我也尝试过这样做，但它不起作用。谁能帮我。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:39:28.057

此选项可能会有所帮助，我没有尝试过..您可以尝试将该选项作为嵌入式客户端并设置标志 kDNSQClass_UnicastResponse = 0x8000

并尝试，

# actionscript-3 - 在 htmlloader 中嵌入 swf 并使用强制运行时

> ID：11826047
> 
> 赞同：1
> 
> 时间：2012-08-06T09:56:38.073
> 
> 标签：actionscript-3, apache-flex, air

我有一个文件“test.swf”与 air 应用程序位于同一目录中，并且我有以下操作脚本...

```
var htmlLoader:HTMLLoader = HTMLLoader.createRootWindow(true, options,false, new Rectangle(0,0,1024, 768));
htmlLoader.loadString(***STRING****); 
```

其中***STRING***是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
  <object type="application/x-shockwave-flash" width="1024" height="768"> 
        <param name="movie" value="app:/test.swf" />
        <param name="wmode" value="opaque" />
    </object>
</body>
</html> 
```

知道为什么 test.swf 不显示吗？

我也试过`<param name="movie" value="test.swf" />`了`<param name="movie" value="/test.swf" />`

**注意：** `<param name="movie" value="http://location.on.web/test.swf" />`确实有效，但我需要这个专门用于本地播放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:42:50.493

默认情况下，使用[loadString()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/html/HTMLLoader.html#loadString%28%29)方法加载的 HTML 不会放置在沙箱中以进行本地存储访问。要启用它，您需要先设置[placeLoadStringContentInApplicationSandbox 属性](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/html/HTMLLoader.html#placeLoadStringContentInApplicationSandbox)：

```
htmlLoader.placeLoadStringContentInApplicationSandbox = true; 
```

[是的，我确实认为这是整个 AS3 库中最长的属性名称。]

# macos - Mac 模拟器屏幕错误。屏幕和触控不同步

> ID：11826049
> 
> 赞同：3
> 
> 时间：2012-08-06T09:56:44.747
> 
> 标签：macos, osx-lion, emulation

我有配备 Retina Display 的 Macbook pro 升级山狮版。

当我从 Eclipse 启动 Android 模拟器时，模拟器不正常。看一下图片。屏幕不会占据整个屏幕。最奇怪的是，触摸占据了整个屏幕。因此，为了按下后退按钮，我必须按下窗口中最左下角的空间，而不是显示后退按钮的位置。您如何扩展屏幕以使其占据整个窗口以及如何同步屏幕和触摸？

我也有 HP Desktop，这不是问题。所以我想知道这可能是Mac问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-25T19:34:16.203

这个问题很久以前就修复了，现在已经失效了。

# android - Android 应用内计费恢复

> ID：11826051
> 
> 赞同：0
> 
> 时间：2012-08-06T09:56:46.300
> 
> 标签：android, in-app-billing

我想澄清一下关于**应用内计费的android**。我在谷歌播放中上传了一个处于草稿状态的apk ..我创建了一个**应用内产品ID ，并****使用我的开发者帐户注册的测试帐户**进行了购买..购买工作正常打算..我从开发者网站上删除了上传的apk，还删除了应用内产品ID。但是当我构建一个具有恢复功能的新签名 apk 并且我使用**新的应用内产品 ID**上传并且当我使用相同的测试帐户但不同的应用内产品 ID 安装新 apk 时出现了**问题，**它说**购买已经完成，它恢复了应用程序**..我能知道恢复功能应该如何工作吗？它也应该用不同的产品ID恢复吗？或者它看到注册的谷歌帐户与应用内产品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:50:47.927

当您发送恢复请求时，Google 将发送 PURCHASE_STATE_CHANGED 通知，其中包含用户帐户购买的原始产品 ID。

您可能没有正确处理此通知。

# google-docs-api - 更改提要：有时不会通知修改的对象

> ID：11826052
> 
> 赞同：1
> 
> 时间：2012-08-06T09:56:54.530
> 
> 标签：google-docs-api, google-drive-api

它曾经与更改提要一起使用，并且在 99% 的情况下都能完美运行，但有时它会错误地包含一些我或我的合作者都没有更改的文件。

带有“更新”条目报告的响应

*   updatedEntry 是正确的旧日期
*   发布是正确的旧日期
*   modifiedByMe 是正确的旧日期

但

*   lastViewed 与请求日期相似
*   ACLFeed/updated 与请求日期相似
*   ACLFeed/updated 中的每个条目都与请求日期相似

我怎么可能收到此条目的通知？

提要更改是否仅因为“lastViewed”日期已更改而包含条目？

如果是这样，为什么 feedACL 和 feedACL 条目有不同的“更新”日期？

# python - ValueError：int() 的无效文字，基数为 16：'\x0e\xa3' Python

> ID：11826054
> 
> 赞同：10
> 
> 时间：2012-08-06T09:57:04.450
> 
> 标签：python, string, tkinter, decimal, pyserial

我从串行端口获取代表 PIC 板上电压的字节。但是我无法将这些字节（字符串）转换为十进制，因为我收到了上面的错误消息。这是函数（实际上，它与 tkinter 按钮相关联）

```
def channel8():
    ser.write(chr(0xFF))
    print "you have select channel8"
    x=ser.read(2)
    w=int(x, 16)
    print w
    print "Voltage on channel8 is:" , x 
```

> ValueError: int() 以 16 为基数的无效文字：'\x0e\xa3'

```
def channel8():
    ser.write(chr(0xFF))
    print "you have select channel8"
    x=ser.read(2)
    z=struct.unpack("h", x)
    #w=int(z, 16)
    print z 
```

我明白了：

> 通道 8 上的电压为：(28942,)

你能解释一下我是如何得到这个值的吗？它不匹配任何东西：D

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T09:59:03.447

我认为您应该使用[struct](http://docs.python.org/library/struct)模块并像这样解压缩二进制数据：

```
struct.unpack("h", x) 
```

因为`int`不是真正用于处理二进制数据，而是处理十六进制字符串，例如：`EF1D`.

当您`x=ser.read(2)`收到两个字节的二进制数据时，库支持两种类型的数字表示`struct`：`short`（h）和`unsigned short`（H）。函数`struct.unpack`接收两个参数：

*   结构规范（一串[格式字符](http://docs.python.org/library/struct#format-characters)）
*   二进制数据

并返回一个具有未打包值的元组（在您的情况下只有一个 int）。

因此，您需要将 string 更改`w=int(x, 16)`为`w = struct.unpack("h", x)[0]`或`w = struct.unpack("H", x)[0]`，这取决于数据类型。

# ruby-on-rails - 结合使用 wkhtmltopdf 和 travis-ci

> ID：11826056
> 
> 赞同：1
> 
> 时间：2012-08-06T09:57:07.370
> 
> 标签：ruby-on-rails, ruby, continuous-integration, wkhtmltopdf, travis-ci

我试图让我的测试套件在 Travis-ci 上运行，但我遇到了与 wkhtmltopdf 相关的问题。

我们在 Rails 应用程序中使用 PDFKit 生成 PDF 文件，该应用程序又使用 wkhtmltopdf 工具，所有调用 PDF 生成的测试都会抛出以下错误：

```
Failure/Error: pdf = voucher.to_pdf
Errno::ENOMEM:
Cannot allocate memory - bundle exec which wkhtmltopdf 
```

奇怪的是，生成 PDF 的前 10-15 个测试通过就好了，这让我假设 wkhtmltopdf 在每次调用时都会以某种方式泄漏内存，导致达到 Travis-ci 工作程序实例上允许的内存使用的硬限制.

我在用着：

```
ruby               1.9.2 / 1.9.3
rails              3.1.6
pdfkit             0.5.2
wkhtmltopdf-binary 0.9.9.1 
```

有没有人有让 wkhtmltopdf 和 Travis-ci 一起玩的经验？

# jquery - 响应式联系表

> ID：11826059
> 
> 赞同：-1
> 
> 时间：2012-08-06T09:57:14.103
> 
> 标签：jquery, responsive-design, contact-form

我希望在此[站点](http://forefathersgroup.com/)上重现类似响应式联系表单之类的内容，其中触发器打开和关闭表单是下面的功能区，并希望有人能给我一些关于如何使用 jquery 完成的提示。在定位打开/关闭按钮和让表单工作方面，我不确定从哪里开始。

我会说这是一个内部带有表单元素的手风琴吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:19:19.340

这是一篇与您正在寻找的功能相似的文章和演示。 [http://www.zurb.com/playground/off-canvas-layouts](http://www.zurb.com/playground/off-canvas-layouts)

# iphone - ARC 转换的应用程序问题：将非本地对象的地址传递给 _autoreleaseing 参数以进行回写

> ID：11826060
> 
> 赞同：2
> 
> 时间：2012-08-06T09:57:15.097
> 
> 标签：iphone, objective-c, automatic-ref-counting

我正在尝试使用 ios5 制作应用程序，我真的很困惑为什么会发生这种情况。有人可以帮我解释一下为什么出现&error时会出现错误

**将非本地对象的地址传递给 __autoreleasing 参数以进行回写**

以下调用导致错误

```
// note the following method returns _inStream and _outStream with a retain count that the caller must eventually release

if (![netService getInputStream:&_inStream outputStream:&_outStream]) {

 NSLog(@"error in get input and output streams");
 return;
} 
```

**我的课.h**

```
NSInputStream      *_inStream;
NSOutputStream     *_outStream;

@property (nonatomic, strong) NSInputStream *_inStream;    
@property (nonatomic, strong) NSOutputStream *_outStream; 
```

**我的课.m**

```
@synthesize _inStream;
@synthesize _outStream; 
```

**getInputStream**是一个**NSNetService**类方法

请在下面的 NSNetService 类 getInputStream 实现

```
/* Retrieves streams from the NSNetService instance. The instance's delegate methods are not called. Returns YES if the streams requested are created successfully. Returns NO if or any reason the stream could not be created. If only one stream is desired, pass NULL for the address of the other stream. The streams that are created are not open, and are not scheduled in any run loop for any mode.
*/
- (BOOL)getInputStream:(NSInputStream **)inputStream outputStream:(NSOutputStream **)outputStream; 
```

我找到了相关的帖子

[非本地对象到自动释放参数](https://stackoverflow.com/questions/6963538/error-passing-address-of-non-local-object-to-autoreleasing-parameter-for-writ)

[-指针所有权问题](https://stackoverflow.com/questions/8814718/handling-pointer-to-pointer-ownership-issues-in-arc/8829294#8829294)

[非本地对象到自动释放](https://stackoverflow.com/questions/6963538/error-passing-address-of-non-local-object-to-autoreleasing-parameter-for-writ)

[从 ios-4 到 ios-5arc-passing-address](https://stackoverflow.com/questions/8056089/variable-issue-during-transition-from-ios-4-to-ios-5arc-passing-address-of-no)

但是我无法找到问题

对此问题的任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T10:26:53.000

我找到了解决方案

开始了。将变量创建为本地变量并将它们分配回原始变量。感谢@borreden 提供的有见地的信息。

这是我最新的代码。

```
NSInputStream  *tempInput  = nil;
NSOutputStream *tempOutput = nil;

// note the following method returns _inStream and _outStream with a retain count that the caller must eventually release
if (![netService getInputStream:&tempInput outputStream:&tempOutput]) {

    NSLog(@"error in get input and output streams");
    return;
}
_inStream  = tempInput;
_outStream = tempOutput; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:06:05.130

原因是你在使用ARC时不能通过你的`_inStream`和喜欢的。`_outStream`（因为您在转换后的版本中使用 ARC）

因为如果这些变量在方法中被覆盖，它们就会泄漏。

您需要更改您处理的返回值（如果它完全更改）或只是作为普通参数传递。

不再有带有保留/释放的显式内存管理，因此 ARC 无法自动处理这种情况。

# javascript - 将 AngularJS 与 BackboneJS 一起使用

> ID：11826061
> 
> 赞同：3
> 
> 时间：2012-08-06T09:57:17.673
> 
> 标签：javascript, model-view-controller, backbone.js, angularjs

我一直在寻找可以帮助我编写结构更好的 JS 代码的框架，并且遇到了 Backbone。它似乎有很多功能可以创建具有公共和私有属性和成员、继承等的类。

Angular JS 似乎做了很多完全不同的事情，比如自动将标记绑定到模型，以及许多用于模板、过滤、排序等的巧妙技巧。

我的问题不是我应该选择哪个，而是两者都使用是否明智？AngularJS 看起来真的很酷，但除非我遗漏了什么，否则它似乎没有提供任何面向对象的东西供您使用。这有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:03:47.637

我不确定将 Angular 与另一个框架配对是否真的很有意义，因为它已经很完整了。

另一方面，Backbone 更具可组合性，例如，您可以看看[Knockback](http://kmalakoff.github.com/knockback/)项目，它使 Backbone 和 KnockoutJS 可以很好地协同工作。Knockout 采用 MVVM 方法，它与您在 Angular 中发现的方法相对接近。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T07:27:32.137

如果您需要为您的数据（也称为模型）编写面向对象，只需使用[Base.js 之](http://dean.edwards.name/weblog/2006/03/base/)类的库。它为您提供了很好的 OO 语法、继承，以及`extend`. 好的部分是它保留了 getter 语法，`myObject.var`因此它可以很好地与 Angular 配合使用，这与需要使用 getter 的 Backbone 相反`myObject.get('var')`，因此数据绑定工作得很好。

要了解这些语法和哲学之间的区别和原因，请阅读[Angular 作者在 SO 中的答案之一](https://stackoverflow.com/questions/9682092/databinding-in-angularjs)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T22:11:09.620

AngularJS 故意不强加任何特定的继承风格，所以你可以自由地做任何你想做的事情。如果你喜欢 Backbone.js 的继承模型，你可以使用[下划线](http://documentcloud.github.com/underscore/)（包含在 Backbone.js 中）来提供`.extend`帮助。

# google-analytics - 如何从谷歌分析报告中排除谷歌代码中的自我流量？

> ID：11826062
> 
> 赞同：3
> 
> 时间：2012-08-06T09:57:17.887
> 
> 标签：google-analytics, google-code

我目前正在使用 Google Analytics 来获取我在 code.google.com 上托管的项目的报告。

我想排除我自己产生的流量。我知道谷歌分析基本上提供了两种过滤我的流量的方法：通过 IP 地址和 cookie。ISP 给了我一个动态 IP 地址，所以我不能按 IP 地址过滤。然后我应该使用 cookies 方法。

我读到我应该在我的网站上添加一些 javascript 代码来设置 cookie。我的问题是：如何将我需要的 javascript 添加到谷歌代码的 wiki 页面中？还有其他方法可以实现我的目标吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T10:00:24.700

[http://ode2code.blogspot.se/2009/02/how-to-exclude-self-traffic-from-google.html](http://ode2code.blogspot.se/2009/02/how-to-exclude-self-traffic-from-google.html)包含一个似乎有效的解决方案：

> **设置cookie：**
> 
> 在您的域上创建一个新页面，其中包含以下代码：
> 
> 正文 onLoad="javascript:__utmSetVar('no_report')"
> 
> 从您希望从报告中排除的所有计算机访问此页面，以在每台计算机上设置 cookie。
> 
> **创建过滤器：**
> 
> 您需要创建一个排除过滤器以使用此 cookie 从访问者中删除数据。
> 
> *   过滤器类型：自定义过滤器 > 排除
> *   过滤字段：用户定义
> *   过滤器模式：no_report
> *   区分大小写：否
> 
> **如何创建过滤器？**
> 
> [http://www.google.com/support/analytics/bin/answer.py?hl=en&answer=55494](http://www.google.com/support/analytics/bin/answer.py?hl=en&answer=55494)

将此与此 Wiki 文章[http://code.google.com/p/support/wiki/WorkingWithGoogleGadgets](http://code.google.com/p/support/wiki/WorkingWithGoogleGadgets)一起使用，以创建一个包含您可能包含在页面上的脚本的小工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T23:31:20.757

有几个 chrome 和 firefox 扩展可用，允许您在每个站点的基础上阻止谷歌分析跟踪。我发现这是实现此功能的最简单方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-27T23:35:42.763

您可以尝试使用[Google Analytics Opt-out Browser Add-on](https://tools.google.com/dlpage/gaoptout)，尽管它会完全禁用所有网站的跟踪。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-11-17T15:51:23.803

如何使用活动跟踪功能创建一个特定的 urm URL，然后发送给您希望从报告中排除的任何人？然后添加一个广告系列过滤器，怎么样？

不确定广告活动 cookie 将存储多长时间，可能需要每个人每隔几周点击一次广告活动 URL？

# php - 在另一个特征和类中引用相同的特征

> ID：11826064
> 
> 赞同：0
> 
> 时间：2012-08-06T09:57:22.717
> 
> 标签：php, traits

PHP 似乎试图两次编译相同的特征。

```
use Behat\MinkExtension\Context\MinkDictionary;
class FeatureContext
{
    use MinkDictionary, OrderDictionary;
}

use Behat\MinkExtension\Context\MinkDictionary;
trait OrderDictionary
{
    //if you comment out this line, everything works, but methodFromMinkTrait is
    //unresolved
    use MinkDictionary;

    public function myMethod($element, $text)
    {  
       //some method that uses methods from MinkDictionary
       return $this->methodFromMinkTrait();
    }
} 
```

编译失败并出现*致命错误*：

> 致命错误：Trait 方法 setMink 尚未应用，因为在 LunchTime\DeliveryBundle\Features\Context\FeatureContext 上与其他 trait 方法有冲突
> 
> `setMink`方法仅在`MinkDictionary`trait 中定义。

问题是两者`OrderDictionary`都`FeatureContext`使用`MinkDictionary`. 这就是我添加的`use MinkDictionary`原因`OrderDictionary`。这是不允许的吗？如果您将其注释掉，那么一切正常，但编辑器显示了许多未解决的方法 - 它不知道它们来自哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:37:48.933

当然它编译了两次相同的特征，因为你在类 FeatureContext 中“使用”了 MinkDictionary 两次——第一次在类本身中，第二次通过 OrderDictionary。

只需从 FeatureContext 类中删除“use MinkDictionary”语句

# android - AsyncTask 队列及其整个进度

> ID：11826067
> 
> 赞同：0
> 
> 时间：2012-08-06T09:57:36.083
> 
> 标签：android, android-asynctask, task-queue

我还没有开始编码。我试图弄清楚哪些库在那里以及 API 可以首先提供什么。

在启动我的应用程序之前，我需要下载很多资源。基本上，我将有一个“SplashSreen”和一个进度条，显示正在下载的文件以及下载 x 个资源的*整个进度的进度条。*

在浏览了有关该主题的一些讨论和教程后，在我看来 AsyncTask 将完成这项工作。但是只能显示正在下载的当前“对象”的当前进度，而不是整个队列。

任何人都可以在这里帮助我，给我一些教程或深入研究的东西吗？

待定；我什至不确定 AsyncTask 是否是我在这种情况下要寻找的。基本上我需要一些可以下载资源，放入队列，并让我知道整个队列的进度，以及在特定时间下载的资源（它的名称）的东西。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:09:27.363

当然`AsyncTask`可以完成这项工作。只需将所有文件放在显示进度的 asyncTask 中即可。

```
class InitTask extends AsyncTask<Void, Integer, Boolean> {
    private List<String> mNbFiles;

    public InitTask(List<String> filesURL)
    {
        super();
        mFilesURL = filesURL;
    }

    @Override
    protected void onPreExecute() {
        //show and init your progress bar here...
        super.onPreExecute();
    }

    @Override
    protected Boolean doInBackground(Void... params) {

        for(int i = 0 ; i < mNbFiles.size() ; ++i){
            //download one file ...
            publishProgress(i);
        }
    }
} 
```

我希望这能帮到您。如果您有任何问题，请发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:09:41.100

AsyncTask 不应该用于长时间运行的下载。AsyncTasks 真正与 UI 有关，重要的是要知道用户导航甚至旋转屏幕都会终止下载。

您应该使用服务来执行下载，因此将所有下载代码放入 IntentService 并更新某种持久存储以指示进度（共享首选项中的几个变量会很好（指示当前状态，另一个指示进度））。

然后，您可以使用您的活动来启动服务，然后通过持久存储或通过意图传递的一些回调监视下载进度（持久存储可能是最简单的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:03:47.820

AsyncTask 正是您正在寻找的，您可以根据 API 对任务数量进行排队，如果有队列大小的 getter，我将检查 Asynctask 实现，但如果没有，您可以列出 asyncTask 并更新当它完成时。

如果您排队 15 个任务，您可以将进度条设置为最大 15 个，并且在每个 onPostExecute 增加 progressBar :)

我稍后会检查队列并编辑我的答案。

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T10:08:57.980

AsyncTask 非常符合您的要求。您只能针对当前对象进行更新，这并不是真的。这意味着您可以更新当前的 AsyncTask。

下面是`onProgressUpdate`方法。

```
protected void onProgressUpdate(Integer... values) {
    super.onProgressUpdate(values);
    Log.i(logTag, "onProgressUpdate: " + String.valueOf(values[0]));

    View view = getView();
    if(view != null)
        ((ProgressBar)view.findViewById(R.id.progressBar)).setProgress(values[0]);
} 
```

您会看到它采用任意数量的整数作为参数。在您的`publishProgress`方法中，您可以调用`onProgressUpdate(itemProgress, totalProgress)`并相应地更新 2 个不同的进度条`onProgressUpdate`。

您完成所有下载，`doInBackground`并且每次您想要更新进度条/条时，调用`publishProgress`将您的进度整数传递给`onProgressUpdate`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-06T10:14:52.317

在您的 AsyncTask doInBackground() 方法中放置您的代码，该代码下载所有对象并使用处理程序发布进度条的更新。看看这个例子：

[http://developer.android.com/reference/android/widget/ProgressBar.html](http://developer.android.com/reference/android/widget/ProgressBar.html)

以下代码进入 doInBackground()：

```
while (mProgressStatus < 100) {
                 mProgressStatus = doWork();

                 // Update the progress bar
                 mHandler.post(new Runnable() {
                     public void run() {
                         mProgress.setProgress(mProgressStatus);
                     }
                 });
} 
```

# c - 使用c从单板计算机写入mysql数据库

> ID：11826073
> 
> 赞同：0
> 
> 时间：2012-08-06T09:57:58.777
> 
> 标签：c, database

我想将单板机的网络数据包读入数据库（准确地说是mysql），单板机和mysql之间通信的代码是用c编写的。我需要您的帮助以获取一些在线材料的有用链接，因为我一直在尝试寻找有用的信息，但还没有产生任何结果。感谢您的理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:32:34.133

您需要在系统上安装第一个 libmysqlclient-dev 包（我假设您在 linux 下），然后您可以修改此代码以满足您的需要：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <mysql/mysql.h>

#define BUFFER_SIZE 1024    // Increase this buffer if yoy want

/* This function is used for the database connection */
MYSQL * my_mysql_connection(const char *server, const char *db, const char *user, const char *pwd)
{
    MYSQL *myh;

    /* Some initialisation */ 
    if (NULL == (myh = mysql_init(NULL)))
    {
        fprintf(stdeee, "Fails to allocate memory for MYSQL!\n");

        exit (EXIT_FAILURE);
    }

    /* Connect to the database. */
    if (NULL == mysql_real_connect (myh, server, user, pwd, db, 0, NULL, 0))
    {
        fprintf(stderr, "%s", mysql_error(myh));
        free (myh);

        return NULL;
    }

    return myh;
 }

/* This function is used to perform a query */ 
int my_mysql_query(MYSQL *myh, const char *query)
{
    /* Do the query request */
    if (0 != mysql_query(myh, query))
    {
        fprintf(stderr, "FAIL to perform the query : '%s' %s\n", query, mysql_error(myh));

        exit (EXIT_FAILURE);
    }

    return 0;
}

/*
 * Suppose that your table students_table has this fields : student_number, student_name, 
 * student_address, student_phone
 */
/* This function is used to get and process the result of the query */
void my_mysql_process_query_result(MYSQL * myh)
{
    int num_fields;
    int i;
    MYSQL_RES *query_result;
    MYSQL_FIELD *field;
    MYSQL_ROW row;
    char  *buffer;

    buffer = (char *) calloc(BUFFER_SIZE, sizeof(char));

    /* Select all students present in the students_table */
    if (my_mysql_query(myh, "SELECT student_number, student_name, student_address, student_phone FROM students_table"))
    {
        exit (EXIT_FAILURE);
    }
    query_result = mysql_store_result (myh);

    /* Retreive the number of rows and fields */
    field = mysql_fetch_fields(query_result);
    num_fields = mysql_num_fields(query_result);

    /* construct the buffer containing each row */
    while ((row = mysql_fetch_row (query_result))) 
    {
        /* Init our buffer with fields sperated by ";", modify if you need, it's just an example */
        memset(buffer, '\0', sizeof*buffer);

        for (i = 0; i < num_fields - 1; i++)
        {
            strncat(buffer, row[i], strlen(row[i]) + 1);
            strncat(buffer, ";", 2);            
        }   
        strncat(buffer, row[i], strlen(row[i]) + 1);
        strncat(buffer, "\n", 2);
        // You can process your buffer (row) here
        process_student_row(buffer);
    }
    free(buffer);

    mysql_free_result (query_result);
} 
```

不要忘记链接到 mysqlclient 库：`-lmysqlclient`。

**编辑：**

您可以像这样在 debian 上安装 libmysqlclient-dev (http://packages.debian.org/squeeze/libmysqlclient-dev)：

```
sudo apt-get update
sudo apt-get install libmysqlclient-dev 
```

你可以像这样编译你的程序：

```
gcc -Wall my_msql_program.c -o my_mysql_program -lmysqlclient 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:07:25.097

如果 mySQL 运行在普通 PC 上，那么你需要在单板机和普通 PC 之间进行通信，以便将你想要的数据从单板传输到 PC。您需要在 PC 上安装某种服务器。完成后，PC 获取数据并使用 mySQL C API 将其提交到 mySQL 数据库。

我可能是错的，但你可能在你的头上。总体设计很简单，如果对您来说不是很明显，则可能是您尝试做的事情太难了。

# cross-platform - 在 Unity 中更改场景时 Photon Cloud 丢失 RPC 和更新

> ID：11826078
> 
> 赞同：0
> 
> 时间：2012-08-06T09:58:11.683
> 
> 标签：cross-platform, cloud, unity3d, multiplayer

当我在 Unity 中更改场景时，可能会发生 RPC/更新丢失，因为新场景仍在加载/目标丢失。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:54:45.603

好吧，这是一个可能的解决方案：

加载新场景时，所有游戏对象都会被新对象替换。新场景的 PhotonView 可能在客户端加载所有内容之前到达的 RPC。如果目标（尚）未知，则丢弃 RPC。当一个客户端加载速度快而另一个客户端加载速度慢，或者如果他们加入正在运行的游戏时，就会发生这种情况。在这种情况下，缓冲的 RPC 在一个块中被接收。

PhotonNetwork.isMessageQueueRunning 可以在需要时暂停执行传入消息。将其设置为 false，您可以加载和设置场景。RPC 会静默排队，直到您再次运行消息队列 (PhotonNetwork.isMessageQueueRunning = true)；

# c++ - C ++如何检查此文本文件中的分隔符

> ID：11826079
> 
> 赞同：0
> 
> 时间：2012-08-06T09:58:12.643
> 
> 标签：c++

我是 C++ 新手。我想知道如何创建一个函数来检查分隔符。

比如下面的案例

```
AD,Andorra,AN,AD,AND,20.00,Andorra la Vella,Europe,Euro,EUR,67627.00
AE,United Arab Emirates,AE,AE,ARE,784.00,Abu Dhabi,Middle East,UAE Dirham,AED,2407460.00
AF,Afghanistan,AF,AF,AFG,4.00,Kabul,Asia,Afghani,AFA,26813057.00 
```

如果分隔符变为 $ 或 # 而不是逗号，我如何创建一个函数来检查它并说文本文件的格式错误。

谢谢！

下面是我的 readData 代码

```
void readData ()
{
    FILE * pFile;
    NoOfRecordsRead = 0;
    char buffer [Line_Char_Buffer_Size];

    pFile = fopen (INPUT_FILE_NAME , "r");

    if (pFile == NULL) 
        perror ("Error opening file 'Countries.txt' !");
    else
    {
        while ( !feof (pFile) )
        {
            char* aLine = get_line (buffer, Line_Char_Buffer_Size, pFile);

            if (aLine != NULL)
            {
//              printf ("%d] aLine => %s\n", NoOfRecordsRead, aLine);
                globalCountryDataArray [NoOfRecordsRead++] = createCountryRecord (aLine);
            }
        }

     fclose (pFile);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:06:42.840

您需要一种可靠的方法来找到您始终期望分隔符所在的位置。如果第一个字段总是 2 个字符宽，您可以检查^(第三)个字符是否为`,`. 否则，您可以向后扫描第一行文本以查看第一个非货币相关字符是否为`,`.

**编辑：**`readData`正如评论中所指出的，您的例程非常以 C 为中心。您可以通过使用 C++ 功能大大简化它。

```
std::string aLine;
std::ifstream pfile(INPUT_FILE_NAME);
while (pfile) {
    std::getline(pfile, aLine);
    if (aLine.size()) {
        globalCountryDataArray.push_back(createCountryRecord(aLine));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:17:48.290

```
#include <string>
#include <fstream>
#include <algorithm>

bool detect_comma(std::string file_name)
{
    // open C++ stream to file
    std::ifstream file(file_name.c_str());
    // file not opened, return false
    if(!file.is_open()) return false;
    // read a line from the file       
    std::string wtf;
    std::istream &in= std::getline(file, wtf);
    // unable to read the line, return false
    if(!in) return false;
    // try to find a comma, return true if comma is found within the string
    return std::find(wtf.begin(), wtf.end(), ',')!= wtf.end();
}

#include <iostream>
#include <cstdlib>

int main()
{
     if(!detect_comma("yourfile.dat"))
     {
         std::cerr<< "File is not comma delimited!\n";
         return EXIT_FAILURE;
     }
     // file is OK, open it and start reading
} 
```

编辑：添加注释和示例代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:49:00.723

执行检查的一个好方法是使用 Boost.Regex 库。您只需定义正则表达式并检查您的输入是否与表达式匹配。

示例代码：

```
#include <string>
#include <boost/regex.hpp>

using namespace std;

int main()
{
  const string input("AD,Andorra,AN,AD,AND,20.00,Andorra la Vella,Europe,Euro,EUR,67627.00");
  const boost::regex ex("(?:(?!,)(\\d+\\.\\d*)|(\\w|\\s)*)(,(?:(?!,)(\\d+\\.\\d*)|(\\w|\\s)*))*");
  cout << boost::regex_match(input.c_str(), ex) << endl;
  return 0;
} 
```

顺便说一句：我不是正则表达式专家，所以请验证表达式:-)

# javascript - 悬停工具提示显示详细信息 jquery

> ID：11826082
> 
> 赞同：1
> 
> 时间：2012-08-06T09:58:28.647
> 
> 标签：javascript, jquery, asp.net-mvc-2

我有一个显示产品简要细节的视图，然后我想使用鼠标悬停，然后显示从我的 ajax 和 asp.net mvc 的 url 操作返回的详细信息。我找到[了这个网站](http://rndnext.blogspot.com/2009/02/jquery-ajax-tooltip.html)，但我不知道如何实现它。有人有那个样本吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:29:23.557

您可以尝试以下链接[https://github.com/rrrene/tipsy.hovercard](https://github.com/rrrene/tipsy.hovercard)

例如，悬停在链接上将从 html5 数据属性 data-url 读取 ajax url，并在悬停卡中显示 url 的内容。

```
<a href="some.html" rel="hovercard" title="loading..." data-url="someInfo.aspx?productId=1">Hovercard w/ AJAX Flavour</a> 
```

# php - 将数组集作为参数传递给 MySQL 查询

> ID：11826083
> 
> 赞同：0
> 
> 时间：2012-08-06T09:58:42.840
> 
> 标签：php, mysql, checkbox, implode

我在这里尝试做的是从 mysql 生成的复选框中获取数据。复选框数据在数组中。因此，对于选中的所有复选框，我想将每个复选框用作查询中的参数，以从另一个数据库中获取更多信息。

**下面的示例代码**

```
if (isset($_POST['submitCourseCode'])) { 
     //GET ARRAY FROM DATABASE GENERATED CHECKBOXES                                         
     $aElective =  $_POST['electiveModules'];

    foreach($aElective  as $snode) {                                                    
        echo "$snode <br />";
    }
    //PASSING EACH DATA FROM ARRAY INTO QUERY   
    $Query = "SELECT ID,title,credits 
             FROM module 
             WHERE ID IN('" . implode("', '", $aElective) ."')";

    $Result = mysql_query($Query) 
    or die ("Query failed: " . mysql_error() . " Actual query: " . $Query);

    while ($Row = mysql_fetch_array($Result)) {

           $id = htmlentities($Row['ID']);
           $title = htmlentities($Row['title']);
           $credits = $Row['credits'];

    echo "<ul>" . $id . " " . $title .  " " . $credits . "</ul>";

    }  
}
var_dump($Query);   
var_dump($Result);  
var_dump($Row); 
```

我的结果截图 ![在此处输入图像描述](../Images/0c5bc5c06d1ddda21cbc0f3c2c9415f7.png)

我猜测我的查询可能是因为 implode 函数而发生了一些事情，但在我的查询中一切似乎都很好。关于做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:02:35.693

您需要使用以下方式修剪数组元素`array_map('trim', $aElective)`：

```
$Query = "SELECT ID,title,credits 
         FROM module 
         WHERE ID IN('" . implode("','", array_map('trim', $aElective)) ."')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:14:36.857

IN 子句中您的 ID 之前的空格存在问题。

尝试添加`str_replace()`通话

```
$Query = "SELECT ID,title,credits 
         FROM module 
         WHERE ID IN('" . str_replace(" ", "", implode("', '", $aElective)) ."')"; 
```

# c - 实现 RPC 的 C 库

> ID：11826085
> 
> 赞同：2
> 
> 时间：2012-08-06T09:58:46.473
> 
> 标签：c, rpc

我找不到 C 提供的用于使用 RPC 的任何库。我需要在 C 中使用 RPC。如果没有库支持，有没有办法？我正在寻找一个非阻塞的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:11:38.060

我在 XML-RPC 方面取得了不错的进展（http://xmlrpc-c.sourceforge.net/）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-09T20:07:26.447

使用 rpcgen 的一个非常好的 RPC 实现；据推测，用于 RPC 实现的最佳 C 库由[tuitorialpoint](http://www.tutorialspoint.com/unix_commands/rpcgen.htm)提供。

一探究竟。

# symfony - 正确获取表单中的多对多实体

> ID：11826088
> 
> 赞同：2
> 
> 时间：2012-08-06T09:58:58.510
> 
> 标签：symfony, doctrine-orm, many-to-many

我是 symfony 的新手，我环顾四周，但没有找到问题的正确答案。

我有两个与多对多关系链接的实体。实体`User`-> 实体`FollowedUser`。一个`User`应该可以跟随几个`FollowedUser`，一个`FollowedUser`应该有几个`Users`跟随他。

我的问题是，当我尝试`FollowedUser`为一个列出所有内容时`User`，比如说 my `CurrentUser`，我得到`FollowedUser`的不仅仅是那些与 my 相关联的所有内容`CurrentUser`。

这是我的代码。

**用户实体**( `src/MyBundle/Entity/User.php`) :

```
namespace MyBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="My_user")
 */
class User extends BaseUser

    // ...

    /**
     * @var FollowedUser[] $followedUsers 
     * 
     * @ORM\ManyToMany(targetEntity="MyBundle\Entity\FollowedUser")
     */
     private $followedUsers;

     // ...

     public function getFollowedUsers()
     {
         return $this->followedUsers;
     }
} 
```

**用户类型**：

```
namespace MyBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
use MyBundle\Entity\FollowedUserRepository;

class UserType extends AbstractType
{

    public function buildForm(FormBuilder $builder, array $options)
    {        
        $builder->add('followedUsers'); // This shows me the whole table
        //,'entity' , array('class' => 'MyBundle\Entity\FollowedUser',
        //                'multiple' => true,
        //                  'query_builder' => function(FollowedUserRepository $followedUserRepo) use ($options) {
        //                                         $followedUsers = $options['data']->getFollowedUsers();
        //                                         $choices = array();
        //                                         foreach ( $followedUsers as $followedUser){
        //                                             $choices[] = $followedUser->getId();
        //                                         }
        //                                         $qb = $followedUserRepo->createQueryBuilder('u');
        //                                         $qb->select('u')
        //                                            ->where( $qb->expr()->in('u.id',$choices));
        //                                         return $qb;
        //                                        }          
        //         ));
     }

    public function getName()
    {        
        return 'followedUser';
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'MyBundle\Entity\User',
        );
    }
} 
```

**注意：**我评论的行是我发现做我想做的唯一方法。但感觉不是正确的方法。

在我的控制器中：

```
$currentUser = $this->container->get('security.context')->getToken()->getUser();

$followedUsers = $currentUser->getFollowedUsers(); // That works properly

$form = $this->createForm(new UserType(),$currentUser); 
```

**编辑 ：**

Actually my problem was that I forgot some annotation in my ManyToMany declaration. Here is the default annotation which should be used for an unidirectionnal ManyToMany relation:

```
/**
 * @ManyToMany(targetEntity="Group")
 * @JoinTable(name="users_groups",
 *      joinColumns={@JoinColumn(name="user_id", referencedColumnName="id")},
 *      inverseJoinColumns={@JoinColumn(name="group_id", referencedColumnName="id")}
 *      )
 */ 
```

Solution was found in the doctrine documentation here : [doctrine2 unidirectionnal ManyToMany](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/association-mapping.html#many-to-many-unidirectional).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:07:44.080

> If specified, this is used to query the subset of options (and their order) that should be used for the field. The value of this option can either be a QueryBuilder object or a Closure. If using a Closure, it should take a single argument, which is the EntityRepository of the entity.

Without specifying `query_builder` Symfony 2 option you'll get all `FollowedUser`, as you said. The meaning of:

```
 $builder->add('followedUsers'); 
```

Is something like:

1.  Add a field whose property is `followedUsers` of the `User` class.
2.  Guess it's type (`entity` type).
3.  `query_builder` option not specified? Then fetch **all users**.
4.  Select (depending of `expanded` and `multiple` options) those (options) **users actually following the user from the model**, leaving all other (options) users unselected.

So, question for you is: why you want to display only the users following the user in the form model? It's a no sense... the actual user of the application will never be able to add new following users.

# python - 无法从 Python 使用 HTMLUnit Webdriver

> ID：11826090
> 
> 赞同：2
> 
> 时间：2012-08-06T09:59:07.813
> 
> 标签：python, selenium, webdriver, htmlunit

我正在尝试通过以下代码使用 Python 中的 HTMLUnit WebDriver：

```
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
from selenium.webdriver.remote.webdriver import WebDriver

if __name__ == '__main__':
    webdriver = WebDriver('http://127.0.0.1:4444/wd/hub', DesiredCapabilities.HTMLUNIT)
    webdriver.get('http://www.google.com') 
```

...并得到以下错误：

```
Traceback (most recent call last):
  File "bcc_mon_webdriver.py", line 8, in <module>
    webdriver = WebDriver('http://127.0.0.1:4444/wd/hub', DesiredCapabilities.HTMLUNIT)
  File "c:\Python27\lib\site-packages\selenium\webdriver\remote\webdriver.py", line 63, in __init__
    self.start_session(desired_capabilities, browser_profile)
  File "c:\Python27\lib\site-packages\selenium\webdriver\remote\webdriver.py", line 105, in start_session
    'desiredCapabilities': desired_capabilities,
  File "c:\Python27\lib\site-packages\selenium\webdriver\remote\webdriver.py", line 156, in execute
    self.error_handler.check_response(response)
  File "c:\Python27\lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 147, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.WebDriverException: Message: u'Error forwarding the new session cannot find : {platform=ANY, browserName=htmlunit, version=}' ; Stacktrace: Method process threw an error in RequestHandler.java 
```

我也在 2.25 版中使用`selenium-server-standalone-2.25.0.jar`Python模块。`selenium`Selenium 服务器在 localhost 上运行，并且可以与例如`DesiredCapabilities.FIREFOX`.

我必须手动安装 htmlunit 吗？selenium 网站说standalone-jar 包含所有依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T07:29:24.813

问题是您没有与`{platform=ANY, browserName=htmlunit, version=}`模式匹配的节点。要修复它，您需要使用这些浏览器设置启动一个 selenium 节点，如下所示：

```
java -jar selenium-server-standalone-2.25.0.jar -role node -hub http://localhost:4444/grid/register -browser browserName=htmlunit 
```

在 Selenium wiki ( [http://code.google.com/p/selenium/wiki/Grid2](http://code.google.com/p/selenium/wiki/Grid2) ) 上它说：

> “默认情况下，这会启动 11 个浏览器：5 个 Firefox、5 个 Chrome、1 个 Internet Explorer。”

因此，为了能够使用不同的浏览器 - 例如`htmlunit`- 您必须使用 -browser 参数启动节点，检查`desired_capabilities.py`文件（位于 selenium/webdriver/common/ 下的 selenium egg 中）以了解每个浏览器需要哪些参数.

# windows - 如何在 C# 中访问 DataTemplate

> ID：11826093
> 
> 赞同：0
> 
> 时间：2012-08-06T09:59:34.217
> 
> 标签：windows, windows-8

我对 Windows 8 感到困惑，因为我习惯于访问我在页面中定义的模板，如下所示：

```
 FrameworkElement element = container as FrameworkElement;
  DataTemplate myTemplate = element.FindResource("myTemplate") as DataTemplate; 
```

问题是在 Windows 8 中 FindResource 方法似乎不再存在。我尝试访问资源字典但没有任何成功。

你有什么想法，或者前面的例子应该工作吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T23:35:21.033

FrameworkElement 有一个[Resources 属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworkelement.resources.aspx)，您可以通过它的索引器访问它，如下所示：

```
var template = element.Resources["myTemplate"] as DataTemplate; 
```

此属性仅填充在该元素上定义的资源，而不是应用程序中资源的完整集合。因此，是否会找到该模板取决于您在哪里定义。

您可以找到 App.xaml 中定义的资源（以及它的合并资源字典），如下所示：

```
var template = Application.Current.Resources["myTemplate"] as DataTemplate; 
```

# jquery - jQuery获取具有不透明度1的孩子的属性

> ID：11826097
> 
> 赞同：2
> 
> 时间：2012-08-06T09:59:56.110
> 
> 标签：jquery, css

我不擅长jquery。我想获取**不透明度**为**1**的 div 的子元素的类属性。示例代码如下

```
<div class='parent'>
   <img class='child1' style='opacity:0;' />
   <img class='child2' style='opacity:0;' />
   <img class='child3' style='opacity:1;' />
   <img class='child4' style='opacity:0;' />
   <img class='child5' style='opacity:0;' />
   <img class='child6' style='opacity:0;' />
   <img class='child7' style='opacity:0;' />
</div> 
```

我尝试了什么：

```
1\. $('.parent').find('img').css('opacity','1').attr('class'); 
```

但它没有奏效。

```
2\. $('.parent>img{opacity:1}').attr('class'); 
```

这也没有奏效。

你能指导我如何完成它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T10:05:12.133

```
$('.parent img').filter(function() {
    return $(this).css('opacity') == 1;
}).attr('class'); 
```

正如您所说，这假设只有一个不透明度为 1 的元素。如果有更多，这将只返回第一个匹配元素的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:03:15.973

您可以执行以下操作：

```
var child = null;

$('.parent img').each(function() {
   if(parseInt($(this).css('opacity')) == 1) {
      child = $(this);
      return false;
   }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T10:08:48.080

您应该使用以下语法：

```
$('.parent').find("img^[style='opacity:1;']").attr('class') 
```

# [看演示](http://jsfiddle.net/akhurshid/YjzSB/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T10:09:35.647

这是您正在寻找的[**小提琴**](http://jsfiddle.net/toroncino/ESaM2/)`.filter()`...您需要在 jQuery中使用

* * *

编辑：

**在我之前，乌特卡诺斯**和我一样。

```
$('.parent img').filter(function() {
    return $(this).css('opacity') == 1;
}).attr('class'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T11:31:52.467

代替将数据存储在类属性中并使用内联样式，使用类设置样式并将数据存储在自定义属性中：

CSS - 父级的子级通常是不可见的，但如果他们有`visible`类则变得不透明

```
div.parent > img {
    opacity:0;
}

div.parent > img.visible {
    opacity:1;
} 
```

HTML

```
<div class='parent'>
    <img data-field='child1' />
    <img data-field='child2' />
    <img data-field='child3' class="visible" />
    <!-- and so on -->
</div> 
```

JavaScript：

```
$('.parent > img.visible').attr('data-field');
//or
$('.parent > img.visible').data('field'); 
```

# c - C语言中的GNU科学图书馆概率分布函数

> ID：11826103
> 
> 赞同：0
> 
> 时间：2012-08-06T10:00:25.140
> 
> 标签：c, histogram, structure, gsl

我有一组 GSL 直方图，用于制作一组概率分布函数，根据文档存储在一个结构中，如下所示：

```
Data Type: gsl_histogram_pdf

    size_t n
        This is the number of bins used to approximate the probability distribution function.
    double * range
        The ranges of the bins are stored in an array of n+1 elements pointed to by range.
    double * sum
        The cumulative probability for the bins is stored in an array of n elements pointed to by sum. 
```

我打算使用 KS 测试来确定数据是否相似。因此，我试图访问此结构中给定 bin 的总和，以计算“距离”，并且我认为，我应该能够通过使用以下方法访问该值：

```
((my_type)->pdf->sum+x) 
```

X 是 bin 编号。

然而，无论我做什么，这总是返回 0，有没有人知道，出了什么问题？

提前致谢

- - 编辑 - -

这是我处理pdf /直方图的代码片段：

```
 /* GSL Histogram creation */
   for (i = 0; i < chrom->hits; i++) {
       if ( (chrom+i)->spectra->peaks != 0 ) {
           (chrom+i)->hist = gsl_histogram_alloc(bins);
           gsl_histogram_set_ranges_uniform((chrom+i)->hist, low_mz, high_mz);
           for (j = 0; j < (chrom+i)->spectra->peaks; j++) {
               gsl_histogram_increment( (chrom+i)->hist, ((chrom+i)->spectra+j)->mz_value);
           }
       } else {
           printf("0 value encountered!\n");
       }
   }
   /* Histogram probability distribution function creation */
   for (i = 0; i < chrom->hits; i++) {
       if ( (chrom+i)->spectra->peaks != 0 ) {
           (chrom+i)->pdf = gsl_histogram_pdf_alloc(bins);
           gsl_histogram_pdf_init( (chrom+i)->pdf, (chrom+i)->hist);
       } else {
           continue;
       }
   } 
   /* Kolmogorov-Smirnov */
   float D;
   for (i = 0; i < chrom->hits-1; i++) {
       printf("%f\n",((chrom+i)->pdf->sum+25));
       for (j = i+1; j < chrom->hits; j++) {
           D = 0;
           diff = 0;
           /* Determine max distance */
       }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:52:39.323

您计算一个*指向*您打算访问的值的指针。

更改您当前的指针计算

```
printf("%f\n",((chrom+i)->pdf->sum+25)); 
```

要么是一个普通的数组下标

```
printf("%f\n",(chrom+i)->pdf->sum[25]); 
```

或指向一个指针计算，然后是一个解引用

```
printf("%f\n",*((chrom+i)->pdf->sum+25)); 
```

看看这是否能解决您的问题。该值也不应该为 0，但它可能会*显示*为 0，因为它可能代表一个非常小的浮点数，具体取决于内存虚拟布局。

# wso2 - WSO2 ESB 代理服务版本控制

> ID：11826104
> 
> 赞同：0
> 
> 时间：2012-08-06T10:00:29.430
> 
> 标签：wso2, wso2esb

有没有办法在 WSO2 ESB 中创建和维护同一代理服务的多个版本？？。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:19:25.030

请跟踪[此](https://wso2.org/jira/browse/ESBJAVA-890)JIRA 的进度。

谢谢

蒂利尼

# cakephp - 在两个域之间共享图像文件夹 cakephp

> ID：11826105
> 
> 赞同：1
> 
> 时间：2012-08-06T10:00:31.307
> 
> 标签：cakephp, dns, sharing, subdomain

我有一个网站和一个子域，允许用户将图像上传到他们的帐户，这两个域是 cakephp 应用程序，它们共享相同的 CakeLib 但不同的应用程序目录。我希望能够从另一个域访问从任一域上传的图像（例如，如果用户进入子域并上传图像，我应该能够从父域访问相同的图像并且反之亦然） .

请注意，访问此图像是严格在视图中完成的。我会很感激任何建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:13:51.673

Simply [symlink](http://en.wikipedia.org/wiki/Symbolic_link) the folder. I would make my upload path configurable and point it to /home/www-data/images for example and symlink it to both apps like /var/www/app1/webroot/img and /var/www/app2/webroot/img. No code needed at all. Symlinking works also on windows.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:07:00.017

```
$this->Html->image('http://subdomain.example.com/image.png'); 
```

像上面这样的吗？:o，你也可以扩展你的助手：

```
class MyAppHelper extends AppHelper {
    public $helpers = array('Html');

    public function subdImage($path) {
        return $this->Html->image('http://subdomain.example.com/' . $path);
    }
} 
```

并从您的角度调用它，例如：

```
$this->MyApp->subdImage('image.png'); 
```

# php - Sql 查询无法获得第三个 elseif 值 - 为什么？

> ID：11826107
> 
> 赞同：0
> 
> 时间：2012-08-06T10:00:37.870
> 
> 标签：php, mysql

如果两者都有 $_POST 值，我下面的 SQL 查询将不会输出 $srchRegion && $srchCategory 字符串。为什么？

```
if (($srchRegion!='00') || ($srchRegion!='') && ($srchCategory=='00') || ($srchCategory=='')) {
    return $query .= "AND region='$srchRegion'";
} elseif (($srchRegion=='00') || ($srchRegion=='') && ($srchCategory!='00') || ($srchCategory!='')) {
    return $query .= "AND category='$srchCategory'";
} elseif (($srchRegion!='00') || ($srchRegion!='') && ($srchCategory!='00') || ($srchCategory!='')) {
    return $query .= "AND region='$srchRegion' AND category='$srchCategory'";
} 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:06:08.843

试试这个：

```
if(($srchRegion!='00' || $srchRegion!='') && ($srchCategory=='00' || $srchCategory=='')){
return $query .= "AND region='$srchRegion'";
} elseif(($srchRegion=='00' || $srchRegion=='') && ($srchCategory!='00' || $srchCategory!='')){
return $query .= "AND category='$srchCategory'";
} elseif($srchRegion!='00' || $srchRegion!='') && ($srchCategory!='00' || $srchCategory!='')){
return $query .= "AND region='$srchRegion' AND category='$srchCategory'";
} 
```

您没有正确构建 if 条件。您使用一个 AND 条件检查两个 OR 条件，因此您需要将 OR 条件放在括号中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:12:38.733

与其寻找所有可能的布尔值和混乱的 if-else，不如继续根据填充的相应值附加 where 子句。

```
if($srchRegion != '00' && $srchRegion != '') 
  $query .= " AND region='$srchRegion'";
if($srchCategory != '00' && $srchCategory != '')
  $query .= " AND category='$srchCategory'";
return $query; 
```

因此`$query`充当查询构建器，并根据设置的 $_POST 值继续添加 where 子句。

# codeigniter - 一个下拉菜单出现在使用 codeigniter 选择其他下拉菜单上

> ID：11826110
> 
> 赞同：0
> 
> 时间：2012-08-06T10:00:45.320
> 
> 标签：codeigniter

我正在尝试创建类别的动态下拉列表，并且在选择此类别时应出现子类别下拉列表。我已经使用 OOP PHP 完成了这项工作，但在使用 codeigniter 时真的很艰难。

首先，我创建了这个类别下拉列表

```
<?php 
$js =' onChange="callAjaxFunction(this.value)"';
echo form_dropdown('category', $categories, null, $js); ?> 
```

显示子类别的 Javascript

```
<script>
// JavaScript Document
var enableCache = false;
var jsCache = new Array();
var AjaxObjects = new Array(new sack(),new sack());

function ShowContent(divId,ajaxIndex,url)
{       
    document.getElementById(divId).innerHTML = AjaxObjects[ajaxIndex].response;
    if(enableCache){
        jsCache[url] =  AjaxObjects[ajaxIndex].response;
    }
    AjaxObjects[ajaxIndex] = false;
 document.getElementById("ajax_container").innerHTML = '';

}

function ShiftChanger(divId,url,id) {
    //to show the div
    document.getElementById(divId).innerHTML="";
    if(enableCache && jsCache[url]){
        document.getElementById(divId).innerHTML = jsCache[url];
        return;
    }   
    var ajaxIndex = AjaxObjects.length;

    AjaxObjects[ajaxIndex] = new sack();
    AjaxObjects[ajaxIndex].requestFile = url+"?id="+id;
    document.getElementById("ajax_container").innerHTML = '<img    src=ajax_loader.gif hspace=10 vspace=10 />';     AjaxObjects[ajaxIndex].onCompletion = function(){ ShowContent(divId,ajaxIndex,url+"?id="+id);};
    AjaxObjects[ajaxIndex].runAJAX();
 }

function callAjaxFunction(value)
{   

    ShiftChanger('shiftcontainer','ajax_category.php',value);
 }

  </script> 
```

但这不起作用。如您所见，ajax_category.php 无法通过。我认为应该用控制器来完成，我也尝试过，但似乎没有任何效果。我真的坚持这一点。请任何帮助不大的人。真的对此感到沮丧:(。

# jquery - 如何让 jQuery 将类应用于连续的第一个 td

> ID：11826113
> 
> 赞同：0
> 
> 时间：2012-08-06T10:00:55.150
> 
> 标签：jquery

我目前有一个表，它是我数据库中结果的 while 循环。在我的表格行中，它包含一个值为 + 或 - 天数的值。我正在尝试创建一个 jQuery 脚本，它将找出 td 是否包含（“-”）或（“+”），并且我希望它将 css 样式应用于该行的第一个 td。目前它将它应用于**所有**行中的每个第一个 td。

```
 $("tr td:nth-child(7):contains('+')").each(function() {
    $('tr td:first-child').css('background-color', 'blue');
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:02:15.723

您需要使用`$(this)`以便在循环中引用“this”元素。

然后作为“this”是`td`元素，找到 parent `tr`，然后找到该`first-child`元素内的嵌套。

```
$("tr td:nth-child(7):contains('+')").each(function() {
    $(this).parent("tr").find('td:first-child').css('background-color', 'blue');
}); 
```

见演示：http: [//jsfiddle.net/g7ZTf/](http://jsfiddle.net/g7ZTf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:07:47.903

我会这样做...

```
$(function(){
    $("tr td:nth-child(7):contains('+')").each(function() {
        // get a jQuery object of the selected element using `$(this)`
        // then select `.siblings()`, and limit to first element in array (`.eq(0)`)
        $(this).siblings().eq(0).css('background-color', 'blue');
    });
});​ 
```

小提琴：http: [//jsfiddle.net/FqUB3/](http://jsfiddle.net/FqUB3/)

# html - 如果文本溢出，则扩展 ul 的宽度

> ID：11826118
> 
> 赞同：2
> 
> 时间：2012-08-06T10:01:05.180
> 
> 标签：html, css

如果 ul li ul li 的文本超出框的宽度，是否可以扩展 ul li ul（下拉）？

jsfiddle：http: [//jsfiddle.net/KAVzf/1/](http://jsfiddle.net/KAVzf/1/)

谢谢 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T10:06:55.773

`width: 100%`从您的菜单中删除所有对( `#midwrap #nav li ul`, `#midwrap #nav li ul li`, `#midwrap #nav li ul li a`)的引用

**工作示例：http: [//jsfiddle.net/KAVzf/13/](http://jsfiddle.net/KAVzf/13/)**

### 更新

要解决悬停时子菜单中仅突出显示文本的问题，您需要将以下 CSS 添加到`#midwrap #nav li ul li`：

```
#midwrap #nav li ul li {
    ...
    float: none;
    display: block;
    ...
} 
```

**工作示例：http: [//jsfiddle.net/KAVzf/22/](http://jsfiddle.net/KAVzf/22/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:19:12.887

检查这个

[http://jsfiddle.net/KAVzf/14/](http://jsfiddle.net/KAVzf/14/)

`#midwrap #nav li ul li {}` 从和中删除宽度 100%`#midwrap #nav li ul {}`

只有锚的宽度为 100%。

# java - 将 XML 解析为 Hashmap Java

> ID：11826120
> 
> 赞同：0
> 
> 时间：2012-08-06T10:01:19.373
> 
> 标签：java, xml, parsing, hashmap, key

我有一些存储在 XML 中的信息，我需要解析 XML 并将一些值存储在 Hashmap 中。这是 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sections xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<section ID="1">
    <Room>Room1</Room>
    <Capactiy>25</Capactiy>
    <Approval_Mode>personally</Approval_Mode>
    <Building>Building1</Building>
    <Address>Streer, 1\. Stock, links</Address>
    <Room_Number>ZA0115</Room_Number>
    <CoordLt>16.412094</CoordLt>
    <CoordLn>48.19719</CoordLn>
</section>
<section ID="2">
    <Room>Room2</Room>
    <Capactiy>120</Capactiy>
    <Institute>E401</Institute>
    <Approval_Mode>personally</Approval_Mode>
    <Building>Building2</Building>
    <Address>Street 2, Building2, Stiege 7, 1.Stock</Address>
    <Room_Number>AH0105</Room_Number>
    <CoordLt>16.369865</CoordLt>
    <CoordLn>48.199006</CoordLn>
</section>
---- 
```

我希望该键为：Room1 和值：16.412094,48.19719（Section ID=1 的示例）

这是第一部分的示例。我有 100 多个部分，所以我想为每个部分存储键和值，就像我在第一个示例中解释的那样。

输出将是：

房间1：16.412094,48.19719；房间2：16.369865,48.199006；

房间3：16,48；. . . 100 室：16,49；

谁能帮我？

这是我的代码：

```
import java.io.File; 
import java.sql.ResultSet;
import java.util.HashMap; 
import org.xml.sax.*; 
import org.xml.sax.helpers.DefaultHandler; 
import javax.xml.parsers.SAXParserFactory; 
import javax.xml.parsers.ParserConfigurationException; 
import javax.xml.parsers.SAXParser; 

public class XML extends DefaultHandler  
{ 
static HashMap<StringBuffer, String> hashMap; 
String elementName; 
StringBuffer elementValue;
private HashMap<String, String> newMap; 
public static void main(String[] args) 
{ 
DefaultHandler handler = new XML(); 
SAXParserFactory factory = SAXParserFactory.newInstance(); 
try 
{ 
hashMap = new HashMap<StringBuffer, String>(); 
//out = new OutputStreamWriter(System.out, "UTF8"); 
SAXParser saxParser = factory.newSAXParser(); 
saxParser.parse(new File("xml1.xml"), handler); 
System.out.println(hashMap); 
} 
catch(Throwable t) 
{ 
t.printStackTrace(); 
} 
System.exit(0); 
} 

public void startElement(String namespaceURI, String sName, String qName, Attributes    attrs) 
throws SAXException 
{ 
String eName = sName; 
if("".equals(eName)) eName = qName;

elementName = eName; 
if(attrs != null) 
{ 
for(int i = 0; i < attrs.getLength(); i++) 
{ 
String aName = attrs.getLocalName(i); 
if("".equals(aName)) aName = attrs.getQName(i); 

} 
} 
} 

public void endElement(String namespaceURI, String sName, String qName) 
throws SAXException 

{ 
String eName = sName; 
if("".equals(eName)) eName = qName; 

if(eName.equals(elementName)) 

hashMap.put(elementValue,""+ elementName );
elementValue = null;  
} 

public void characters(char[] ch, int start, int length) 
throws SAXException 
{ 
String str = new String(ch, start, length); 
if(elementValue == null) 
elementValue = new StringBuffer(str); 
else 
elementValue.append(str); 
} 
} 
```

使用此代码，我无法获得所需的输出。输出为：Room=Room1，容量=25……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:16:10.007

假设您的 xml 文件是“c:/test.xml”

然后使用以下代码读取并按照您所说的格式放入哈希映射中
key=Roomnumber value=CoordLt,CoordLn

```
import java.io.File;
import java.io.IOException;
import java.util.HashMap;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.naming.spi.DirStateFactory.Result;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Source;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

public class xml {
    public static void main(String[] args) 
    {
        HashMap<String,String>hMap=new HashMap<String, String>();
        File file=new File("c:/test.xml");

        if(file.exists())
        {
           DocumentBuilderFactory factory=DocumentBuilderFactory.newInstance();
            try
            {
                DocumentBuilder builder = factory.newDocumentBuilder();
                Document document=builder.parse(file);
                Element documentElement=document.getDocumentElement();
                NodeList sList=documentElement.getElementsByTagName("section");
                if (sList != null && sList.getLength() > 0)
                {
                    for (int i = 0; i < sList.getLength(); i++)
                    {
                        Node node = sList.item(i);
                        if(node.getNodeType()==Node.ELEMENT_NODE)
                        {
                            Element e = (Element) node;

                            NodeList nodeList = e.getElementsByTagName("Room");

                            String roomName= nodeList.item(0).getChildNodes().item(0)
                                            .getNodeValue();

                             nodeList = e.getElementsByTagName("CoordLt");
                            String coordValues= nodeList.item(0).getChildNodes().item(0)
                                            .getNodeValue();

                            nodeList = e.getElementsByTagName("CoordLn");
                            coordValues=coordValues+","+ nodeList.item(0).getChildNodes().item(0)
                                            .getNodeValue();
                            hMap.put(roomName, coordValues);
                        }
                    }
                }
            } catch(Exception e){
                System.out.println("exception occured");
            }
        }else
        {
            System.out.println("File not exists");
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:19:53.670

如果您使用此 xslt（可以在 Java 中完成）转换 XML，您将获得所需的输出，如果有人知道如何在 hashmap 中加载，您会没事的。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="text" indent="no" omit-xml-declaration ="yes" />

    <xsl:template match="/sections">
            <xsl:apply-templates select="section"/>
    </xsl:template>

  <xsl:template match="section" xml:space="default">
    <xsl:apply-templates select="Room"/>
    <xsl:text>:</xsl:text>
    <xsl:apply-templates select="CoordLt" />
    <xsl:text>,</xsl:text>
    <xsl:apply-templates select="CoordLn"/>
    <xsl:text>;</xsl:text>
  </xsl:template>

</xsl:stylesheet> 
```

# c# - 如何在 Silverlight 的工具包 TimeUpDown 控件中隐藏或禁用 TimeHint？

> ID：11826123
> 
> 赞同：0
> 
> 时间：2012-08-06T10:01:38.487
> 
> 标签：c#, silverlight, toolkit

我在互联网上查看，但无处可寻：我想禁用显示当前时间的**TimeHint**`TimeUpDown`弹出窗口，该窗口显示当前时间。就像是 ：`<12:42AM>`

没有*`TimeHintEnabled`*财产，也没有任何成员似乎可以控制这一点。有一个属性，但它**是**`TimeHintContent`只读的，起初似乎是空的。

我的代码非常简单：

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <toolkit:TimeUpDown Name="timeUpDown1"
                        Background="White"
                        Height="22"
                        MinWidth="55"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top" />
</Grid> 
```

也许玩`Template`罐头可以解决问题，但我不知道该怎么做......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:46:23.097

好的，多亏了 Blend，我找到了我想要的东西。
模板可以通过 Blend 轻松修改，这部分模板需要在 xaml 中隐藏 TimeHintPopup ：

```
<Grid>
  <VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="TimeHintStates">
      <VisualState x:Name="TimeHintOpenedUp">
        <Storyboard>
          <ObjectAnimationUsingKeyFrames BeginTime="00:00:00"
                                         Storyboard.TargetProperty="Visibility"
                                         Storyboard.TargetName="TimeHintVisualElement">
            <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="Collapsed"/>
          </ObjectAnimationUsingKeyFrames>
        </Storyboard>
      </VisualState>
    </VisualStateGroup>
  </VisualStateManager.VisualStateGroups>
</Grid> 
```

你的 TimeUpDown 应该参考这个模板：

```
 <toolkit:TimeUpDown Name="timeUpDown1" Background="White" Height="22" MinWidth="55" HorizontalAlignment="Left" VerticalAlignment="Top" Style="{StaticResource TimeUpDownStyle1}" /> 
```

# java - 骆驼泉的多条内部路线

> ID：11826124
> 
> 赞同：1
> 
> 时间：2012-08-06T10:01:45.257
> 
> 标签：java, spring, jackson, apache-camel, pojo

我坚持使用骆驼文档，因为它不是很清楚......

我想在 Spring 中定义这条路线：

```
in: direct access from a url
out: get an object instance from a factory
--> format this object in Json 
```

我已经尝试过这样的编组器：

```
<camel:route id="viewObject">
  <camel:from uri="restlet:/json/" />

  <camel:to uri="bean:myFactory" />
  <camel:unmarshal ref="jack" />
</camel:route> 
```

但它不起作用，因为解组在输入之后和输出之前工作，这是意料之中的，所以我尝试将输出重新路由到另一个端点。

```
<camel:route id="formatObject">
  <camel:from uri="bean:myFactory" />
  <camel:unmarshal ref="jack" />
  <camel:to uri="mock:reverse" />
</camel:route> 
```

基本上我想要我的对象：

```
public class MyObject{
  private String name;
  [ getter & setter here]
 } 
```

以这种方式解组：

```
 {name : 'a value'} 
```

这仅适用于编组器和骆驼配置。请帮助，也欢迎清晰的解释和howtos

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:42:52.040

本质上，只需在骆驼上下文中创建这样的 xml。

```
<dataFormats>
  <json id="jack" library="Jackson" unmarshalTypeName="com.example.MyObject"/>
</dataFormats>

<route>
        <from uri="restlet:/json/"/>
        <to uri="bean:myFactory"/>
        <marshal ref="jack"/>
</route> 
```

您似乎混淆了 marshall/unmarshall 词

Unmarshall = 从 json -> bean 马歇尔 = 从 bean -> json。

# android - 如何动态更新 Dialog 内的 ToggleButton 状态？

> ID：11826125
> 
> 赞同：0
> 
> 时间：2012-08-06T10:01:47.843
> 
> 标签：android, android-layout, android-widget

我有一个对话框，它有一个 ToggleButton 来触发 Wifi 开/关并且工作正常。如果 Wifi 状态在我的应用程序之外触发，例如用户在系统设置中切换，我有 1 个问题，我该如何动态更新它？

有没有一些例子可以做这样的事情？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:06:05.363

如果您有对话框的句柄，那么您可以调用

```
ToggleButton tb = (ToggleButton) dialog.findViewByID([id of togglebutton]);
tb.setchecked(toggle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:45:47.413

您应该为[android.net.wifi.supplicant.CONNECTION_CHANGE](http://developer.android.com/reference/android/net/wifi/WifiManager.html) （可能是其他人）注册[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)，并在此接收器中切换您的按钮。

[请参见此处](http://silverballsoftware.com/android-monitor-wifi-state-with-broadcastreceiver)的示例。

# php - Codeigniter 删除索引并添加 css

> ID：11826129
> 
> 赞同：0
> 
> 时间：2012-08-06T10:01:57.173
> 
> 标签：php, codeigniter

嗨，这是我的网站链接 [http://webscarlets.com/ci/welcome](http://webscarlets.com/ci/welcome)

我是codeigniter的新手。我从网址中删除了 index.php。要从 url 中删除 index.php，我使用了以下代码。我从 codeigniter 用户指南中获得此代码

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt|css)
RewriteRule ^(.*)$ /ci/index.php/$1 [L] 
```

但是css没有加载。这是我的配置设置

```
//autoload.php
$autoload['helper'] = array('url','form','html');

//config.php   
$config['base_url'] = 'http://webscarlets.com/ci/';
$config['index_page'] = '';
$config['uri_protocol'] = 'REQUEST_URI';

//constants.php
define("LAYOUT_URL","http://webscarlets.com/ci/");

//view.sphp 
<link rel="stylesheet" type="text/css" href="<?php echo LAYOUT_URL; ?>css/all.css"> 
```

请查看我的代码和指南以完成此任务。

提前感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:10:29.463

目前 css 链接是**http://webscarlets.com/ci/application/css/all.css**所以确保有 css 文件放置在此路径上或将 css 文件放在根文件夹中并使用`<link rel="stylesheet" type="text/css" href="<?php echo base_url; ?>css/all.css">`而不是 Layout url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T19:08:24.977

正如您在问题中所问的那样，您想删除 url 中的 index.php 字符串，因此在 .htaccess 文件中您将拥有类似于以下内容的内容：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

你也说你有你的css

```
css/all.css 
```

要允许 CI 加载 css，您必须在 .htaccess 文件中允许它，添加您不想被重写的文件夹。在您的情况下，假设您的*all.css*文件位于**css 文件夹**中，您必须编写下一个 .htaccess 文件

```
RewriteEngine on
RewriteCond $1 !^(index\.php|css|images|robots\.txt|css)
RewriteRule ^(.*)$ /ci/index.php/$1 [L] 
```

另一方面，如果您要将 css 文件存储在其他目录中，例如资产，则必须确保将其添加到 .htaccess 文件中。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|assets|images|robots\.txt|css)
RewriteRule ^(.*)$ /ci/index.php/$1 [L] 
```

请记住，这就是我对您说的所有内容都可以应用于图像、js 或 css。**只记得将存储的文件夹添加到 .htaccess 文件**中。

完成此操作后，您可以使用 base_url() 助手或直接编写在视图中添加 css

```
<link rel="stylesheet" type="text/css" href="/ci/css/all.css"> 
```

请注意您的 CI 应用程序的位置。

我希望它会帮助你。祝你好运！

# actionscript-3 - 获取错误类型 1061：通过具有静态类型的引用调用可能未定义的方法 addEventListener

> ID：11826131
> 
> 赞同：1
> 
> 时间：2012-08-06T10:02:05.693
> 
> 标签：actionscript-3, apache-flex

我将我的代码从我的应用程序移动到一个单独的 AS 类文件，现在我收到以下错误：

```
1061: Call to a possibly undefined method addEventListener through a reference with static type Class.

1180: Call to a possibly undefined method addEventListener. 
```

.

```
package managers {

    import flash.events.Event;
    import flash.events.EventDispatcher;

    public class RemoteManager extends EventDispatcher {

        public function RemoteManager() {

        }

        public static function init(clearCache:Boolean = false):void {

            addEventListener(SETTINGS_CHANGE, settingChangeHandler);
            addEventListener(ITEMS_UPDATED, itemsUpdatedHandler);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:25:33.780

你的代码

```
addEventListener(SETTINGS_CHANGE, settingChangeHandler); 
```

评估为

```
this.addEventListener(SETTINGS_CHANGE, settingChangeHandler); 
```

静态方法中没有`this`，因为它被设计为在没有实例的情况下运行。此外，您不能附加事件侦听器并从静态类调度事件。

将您的函数声明更改为

```
public function init(clearCache:Boolean = false):void 
```

或者实现一个单例模式来获得一个*“调度事件的静态类”*。

[带有事件管理的单例。](http://www.actionscript.org/forums/showpost.php3?p=846641&postcount=2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:30:51.113

您已将方法 init 声明为 static ，因此您可以在此方法中使用的只是静态字段、静态方法、不属于该实例的对象。

从函数中删除静态或尝试实现一个单例，如果它是你所追求的。

这是一个非常简单的快速操作：

```
 public class RemoteManager extends EventDispatcher {
    private static var _instance:RemoteManager;
    public function static getInstance():RemoteManager{
     if (_instance == null) _instance=new RemoteManager();
     return _instance;
    }

    public function RemoteManager() {
      if (_instance != null) throw new Error("use getInstance");
    }

    public static function init(clearCache:Boolean = false):void {
        getInstance().addEventListener(SETTINGS_CHANGE, settingChangeHandler);
        getInstance().addEventListener(ITEMS_UPDATED, itemsUpdatedHandler);
    }
}

// use it
RemoteManager.init(); 
```

# model-view-controller - 如何在 SecurityTokenResolver 中禁用主题密钥标识符

> ID：11826134
> 
> 赞同：0
> 
> 时间：2012-08-06T10:02:31.283
> 
> 标签：model-view-controller, wif, saml-2.0

我正在 WIF 中处理包含 EncryptedAssertion 的 SAML2 令牌。标记不包含“主题标识符密钥”扩展属性，因此 WIF SecurityTokenHandler 在尝试从 LocalMachineStore/Personal 获取正确的 X509 证书时失败。

问题显然是用于加密令牌的证书不包含 SKI 扩展，当然令牌生成代码 (Java) 似乎并不需要它。为了避免修改生成代码，有没有一种方法可以让 WIF SecuityTokenResolver 不检查收到的 SKI 令牌，而只需直接使用本地存储证书来解密令牌？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:47:34.163

最后我只是实现了一个自定义的 SecurityTokenResolver 并实现了 TryResolveSecurityKeyCore 方法。

这是代码：

```
public class mySaml2SSOSecurityTokenResolver : SecurityTokenResolver
{
    List<SecurityToken> _tokens;

    public PortalSSOSecurityTokenResolver(List<SecurityToken> tokens)
    {
        _tokens = tokens;
    }
    protected override bool TryResolveSecurityKeyCore(System.IdentityModel.Tokens.SecurityKeyIdentifierClause keyIdentifierClause, out System.IdentityModel.Tokens.SecurityKey key)
    {
        var token = _tokens[0] as X509SecurityToken;

        var myCert = token.Certificate;

        key = null;

        try
        {

            var ekec = keyIdentifierClause as EncryptedKeyIdentifierClause;

            if (ekec != null)
            {

                switch (ekec.EncryptionMethod)
                {

                    case "http://www.w3.org/2001/04/xmlenc#rsa-1_5":
                        {
                            var encKey = ekec.GetEncryptedKey();

                            var rsa = myCert.PrivateKey as RSACryptoServiceProvider;

                            var decKey = rsa.Decrypt(encKey, false);

                            key = new InMemorySymmetricSecurityKey(decKey);

                            return true;

                        }

                }

                var data = ekec.GetEncryptedKey();

                var id = ekec.EncryptingKeyIdentifier;

            }

        }

        catch (Exception ex)
        {
           // Do something here            }

            return true;

    }

    protected override bool TryResolveTokenCore(System.IdentityModel.Tokens.SecurityKeyIdentifierClause keyIdentifierClause, out System.IdentityModel.Tokens.SecurityToken token)
    {
        throw new NotImplementedException();
    }

    protected override bool TryResolveTokenCore(System.IdentityModel.Tokens.SecurityKeyIdentifier keyIdentifier, out System.IdentityModel.Tokens.SecurityToken token)
    {
        throw new NotImplementedException();
    }
} 
```

}

# java - Hector - 使用复合键插入行

> ID：11826143
> 
> 赞同：3
> 
> 时间：2012-08-06T10:02:51.560
> 
> 标签：java, cassandra, hector

嗨，我想用复合键插入这种列族行：

```
CREATE TABLE my_items (
user_id uuid,
item_id uuid,
description varchar,
 PRIMARY KEY (user_id, item_id)); 
```

所以我试试这个：

```
StringSerializer stringSerializer = StringSerializer.get();
    UUIDSerializer uuidSerializer = UUIDSerializer.get();
    CompositeSerializer compositeSerializer = CompositeSerializer.get();

    HColumn<String, UUID> hColumnObj_userID = HFactory.createColumn("user_id", userID, stringSerializer, uuidSerializer);
    HColumn<String, UUID> hColumnObj_itemID= HFactory.createColumn("item_id", itemID, stringSerializer, uuidSerializer);

    Mutator<Composite> mutator = HFactory.createMutator(
            repository.getKeyspace(),
            compositeSerializer);
    Composite colKey = new Composite();
    colKey.addComponent(userID, uuidSerializer);
    colKey.addComponent(itemID, uuidSerializer);

    mutator.addInsertion(colKey,
            "my_items", hColumnObj_userID);
    mutator.addInsertion(colKey,
            "my_items", hColumnObj_itemID);

    mutator.execute(); 
```

上面的代码有什么问题？我不断收到此错误：“InvalidRequestException（为什么：UUIDs 必须正好是 16 个字节）”。以及如何将数据插入到我上面描述的列族中。

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T17:04:38.460

看起来 Hector 期待一个包含 UUID 和字符串的 Composite，但只找到了一个字符串。

在编写 Hector 代码之前，您必须将 create DDL 转换为 CQL 使用的实际存储模式。在这种情况下，即使您有两个主键，也只有第一个 user_id 用作行键。情况总是如此。任何其他主键（在本例中为 item_id）用于为除第一个主键之外的每一列形成复合列名称。这意味着当您的 my_items 列族使用 Hector 时，您必须编写两列，一列用于 item_ID，一列用于描述。

item_id 值的列名是由主键 2...n 的值（在本例中为 item_id）和值的常量字符串名称（“item_id”）组成的组合。

描述值的列名也是 item_id 值和值的名称（“描述”）的组合。

如果您编写了 3 个 CQL 表行，每个行具有相同的 user_id 但具有不同的 item_id 值，那么您最终会得到一个列族行，其行键是公共 user_id 值并且有 6 列、一个 item_id 列和一个描述3 个 CQL 表行中的每一行的列。

代码应如下所示：

```
import java.util.UUID;

import me.prettyprint.cassandra.serializers.CompositeSerializer;
import me.prettyprint.cassandra.serializers.IntegerSerializer;
import me.prettyprint.cassandra.serializers.StringSerializer;
import me.prettyprint.cassandra.serializers.UUIDSerializer;
import me.prettyprint.hector.api.Keyspace;
import me.prettyprint.hector.api.beans.Composite;
import me.prettyprint.hector.api.beans.HColumn;
import me.prettyprint.hector.api.beans.AbstractComposite.ComponentEquality;
import me.prettyprint.hector.api.factory.HFactory;
import me.prettyprint.hector.api.mutation.Mutator;

    // put this here to make it compile cleanly

    Keyspace keyspace = null;
    UUID userID = null;
    UUID itemID = null;
    String description = null;

            // Row key is user_id of type UUID

    Mutator<UUID> mutator = HFactory.createMutator(
            keyspace,
            UUIDSerializer.get());

        // write column for itemID.  
        // Column name is composite of itemID value and constant "item_id"
        // Row key is value of userID

    Composite itemIdColumnName = new Composite();
    itemIdColumnName.addComponent(itemID    , UUIDSerializer.get());
    itemIdColumnName.addComponent("item_id" , StringSerializer.get());
        // HFactory.createColumn takes args: column name, column value, serializer for column name, serializer for column value
    HColumn<Composite, UUID> hColumnObj_itemID = HFactory.createColumn(itemIdColumnName, userID, new CompositeSerializer(), UUIDSerializer.get());
    mutator.addInsertion(userID, "my_items", hColumnObj_itemID);

    // write column for description.  
    // Column name is composite of itemID value and constant "description"
    // Row key is value of userID

    Composite descriptionColumnName = new Composite();
    itemIdColumnName.addComponent(itemID    , UUIDSerializer.get());
    itemIdColumnName.addComponent("description" , StringSerializer.get());
    HColumn<Composite, String> hColumnObj_description = HFactory.createColumn(descriptionColumnName, description , new CompositeSerializer(), StringSerializer.get());
    mutator.addInsertion(userID, "my_items", hColumnObj_description);

    mutator.execute(); 
```

# javascript - 是否可以通过 JavaScript 中的浏览器确定操作系统中设置的用户区域设置的**国家**？

> ID：11826149
> 
> 赞同：4
> 
> 时间：2012-08-06T10:03:17.380
> 
> 标签：javascript, browser, locale, country

Web 浏览器是否具有访问用户在操作系统中设置的任何区域设置的界面？

我可以通过他们的 IP 地址或使用新的地理定位 API 来检测用户**当前**所在的国家/地区，但我正在为旅行者编写一个浏览器应用程序，因此我希望他们当前的位置通常不是他们的**祖国**。

有没有办法确定浏览器/操作系统设置为哪个**国家/地区？**

如果没有，是否有任何建议为 JavaScript 添加适当的语言环境支持？

还有什么聪明的解决方法吗？（例如，我知道我可以获得用户的首选浏览**语言**，但有很多**国家**使用相同的**语言**，并且很多用户将此设置保持为默认值，而不是将其更改为他们常用的语言。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-10T08:27:17.640

我不得不捍卫或重新陈述 SReject 和 CodeJack 的答案，因为浏览器语言*通常*包含**操作系统的国家/地区语言环境，**如`"en-US"`or `"de-CH"`。

多年来，我们一直使用它来预先选择表格中的国家，并且它在足够多的情况下很有用。

因此，对于旅行的瑞士用户，您将使用`navigator.language.slice(-2)`并获得`"CH"`哪个是您问题的有效答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T10:14:55.593

你会得到最好的语言是：

*   navigator.language (Netscape - 浏览器本地化)
*   navigator.browserLanguage（IE 特定 - 浏览器本地化语言）
*   navigator.systemLanguage（特定于 IE - Windows 操作系统 - 本地化语言）
*   navigator.userLanguage

由于安全问题或未实施，您所请求的内容在本机上是不可能的。但是，您可以为 Windows 用户使用 ActiveX 对象

您可以让用户选择他们喜欢的语言、国家/地区等，然后使用 javascript 设置 cookie，该 cookie 将在请求页面时发送到您的服务器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T10:15:05.137

```
var userLocale = navigator.language or

navigator.userLanguage; 
```

**编辑** 唯一的其他方式是 HTML5 的 geoLocation API

[http://html5demos.com/geo](http://html5demos.com/geo) [http://dev.w3.org/geo/api/spec-source.html](http://dev.w3.org/geo/api/spec-source.html)

# iphone - 长 NSString 到唯一的较短字符串

> ID：11826156
> 
> 赞同：0
> 
> 时间：2012-08-06T10:03:41.770
> 
> 标签：iphone, objective-c

我有一个长的 NSString 这样的；

```
[NSString stringWithFormat:@"st=WVhCd1ZYSnNQV2gwZEhBbE0wRWxNa1lsTWtZMU5UWTBOVGcxTlM1dVpYUnRaWEpoTG1OdmJTVXpRVGd3SlRKR2JXOWlhVzFsY21FbE1rWm5ZV1JuWlhRbE1rWm9iMjFsTG5odGJDWnViVk5wZEdWVmNtdzlhSFIwY0NVelFTVXlSaVV5UmpVMU5qUTFPRFUxTG01bGRHMWxjbUV1WTI5dEpUTkJPREFtYlc5a2RXeGxTV1E5TXpnNU1TWmhjSEJKWkQwMU5UWTBOVGcxTlNadWJWUmxiWEJzWVhSbFBXMXZZbWwwWlcxd2JHRjBaU1p2ZDI1bGNrbGtQWE5sY21oaGRDMXpZWEpwSm1SdmJXRnBiajF1WlhSdFpYSmhMbU52YlNadWJWTnBkR1U5TlRVMk5EVTROVFVtYjNkdVpYSlNiMnhsVkhsd1pUMHhKblpwWlhkbGNsSnZiR1ZVZVhCbFBURW1kbWxsZDJWeVNXUTljMlZ5YUdGMExYTmhjbWtt&max=10"]; 
```

它太长了，我应该让它更短。它的原始字符串必须是独一无二的。任何的想法？

谢谢;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:45:37.440

这个博客很好地解决了我的问题。

[http://mobiledevelopertips.com/core-services/create-md5-hash-from-nsstring-nsdata-or-file.html](http://mobiledevelopertips.com/core-services/create-md5-hash-from-nsstring-nsdata-or-file.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:58:13.387

如果您不想稍后检索该字符串，可以使用例如 SHA1 对其进行哈希处理（查看 Apple 的 CommonCrypto 库）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:52:27.417

我不使用iphone或objective c，但这似乎你可以使用哈希图或字典之类的东西——*值*是缩短的字符串（缓存文件名），或者其他什么，*键*是你的长url。我想在客观 c/iOS 中有一些可用的数据结构用于此目的......
另外，看看这个[问题](https://stackoverflow.com/questions/1192732/really-simple-short-string-compression)。
对字典键使用非常长的字符串可能不是一个好主意，通常情况相反：键很短，值保存任意数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T11:33:51.843

有一些用于缩短 URL 的包装类，如 MKBitlyHelper。使用这个类，你可以缩短你的 url，然后进一步使用它。你可以从这里得到它 [http://blog.mugunthkumar.com/coding/bit-ly-wrapper-客观-c-iphone/](http://blog.mugunthkumar.com/coding/bit-ly-wrapper-objective-c-iphone/)

# android - 如何在android中将屏幕坐标转换为地理点

> ID：11826157
> 
> 赞同：4
> 
> 时间：2012-08-06T10:03:44.210
> 
> 标签：android, android-mapview, geopoints

我正在尝试将屏幕坐标转换为 android mapview 中的 Geopoint。我需要在屏幕中心显示一个标记（窗口中填充了地图视图）。所以我尝试使用显示度量 getWidth() 和 getHeight() 方法获取中心坐标，并使用 mapView.getProjection().fromPixels(height/2, width/2) 转换为 geoppoint。但它似乎给出了错误的结果。我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T10:10:03.037

您将高度和宽度参数作为错误更改传递

**`mapView.getProjection().fromPixels(width/2,height/2);`**

试试这个代码

```
Projection proj = mapview.getProjection();
GeoPoint proj.fromPixels(int x, int y) ; 
```

在这里您必须传递 x,y 坐标，它将转换为 GeoPoint 您也可以将其从 GeoPoint 保留到该对象的像素

```
Point p = new Point();
proj.toPixels(GeoPoint in, android.graphics.Point out) 
```

检查此链接以获取更多信息

[https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Projection](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Projection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:13:12.633

你考虑到`notificationBar`尺寸了吗？也许也是`appBar`？

你想知道的是 的宽度和高度`MapView`，然后得到投影:)

# php - PHP：会话变量

> ID：11826161
> 
> 赞同：11
> 
> 时间：2012-08-06T10:03:47.647
> 
> 标签：php, session, variables

我开始学习php。我有一个关于会话的问题。

现在，我知道这`session_start()`会创建一个会话变量。

我不知道的是，当我访问我创建的会话时，我需要`session_start()`再次使用吗？

**如果是...**

为什么是这样？因为我已经创建了一个会话，我想知道为什么它不会持续整个浏览会话。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T10:06:55.050

> 因为我从中了解到的是，它将创建一个新会话。

不：

> `session_start()`根据通过 GET 或 POST 请求或通过 cookie 传递的会话标识符创建会话***或恢复当前会话。***
> 
> [http://php.net/session_start](http://php.net/session_start)

您访问的每个新页面都是 PHP 的全新上下文。`session_start`允许您*重新建立*以前的上下文/会话/数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T10:06:26.753

session_start 函数告诉 PHP 启用会话跟踪。它不会清除前一页创建的会话。您必须先调用 session_start()，然后才能访问 $_SESSION 中的任何变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T10:07:35.300

由于手动[session_start()](http://php.net/manual/en/function.session-start.php)

`session_start`— 开始新的或**恢复**现有的会话

就像每次你想使用它时连接到数据库一样。它将连接到您存储会话的任何位置。会话变量没有消失。

[还可以在此处](http://www.w3schools.com/php/php_sessions.asp)阅读更多信息，但这应该有助于了解会话的工作方式：

> 当您使用应用程序时，您打开它，进行一些更改，然后关闭它。这很像一个会话。电脑知道你是谁。它知道您何时启动应用程序以及何时结束。但是在互联网上存在一个问题：Web 服务器不知道您是谁以及您在做什么，因为 HTTP 地址不保持状态。
> 
> PHP 会话通过允许您将用户信息存储在服务器上供以后使用（即用户名、购物项目等）来解决这个问题。但是，会话信息是临时的，将在用户离开网站后被删除。如果您需要永久存储，您可能希望将数据存储在数据库中。
> 
> 会话通过为每个访问者创建唯一 ID (UID) 并基于此 UID 存储变量来工作。UID 要么存储在 cookie 中，要么在 URL 中传播。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T10:11:44.110

会话数据存储在服务器端，但会话的引用或 id 存储在客户端的浏览器 cookie 中。为了让服务器知道您的会话 id，我们在每个页面上都需要调用`session_start()`它（在顶部），因此首先要做的是从用户那里获取 id 并检索会话数据。每当您要访问会话数据时，每个页面都需要它。

这里还有一个视频教程。[http://blip.tv/step4wd/php-sessions_en-5983086](http://blip.tv/step4wd/php-sessions_en-5983086)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T10:08:02.473

不：它并不总是会创建一个新会话。它只告诉脚本此页面想要启动或维护现有会话。

会话只不过是您在页面之间携带的服务器上的状态。它不能从客户端（浏览器）访问。浏览器保持会话唯一必须做的就是传递一个 ID（在 PHP 中称为默认 PHPSESSID）。

此 ID 可以存储在 cookie、GET 或 POST 中，只要您在每次发出请求时将其传输到服务器即可。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T10:09:38.513

答案是肯定的。你必须在每一页上都这样做。如果你不这样做，你会得到一个未定义的索引错误。

这将起作用，因为我们包含了文件

索引.php

```
<?php
 session_start();

//file doesn't have session_start 
include "file.php";
?> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-06T10:05:30.170

你必须使用 session_start()，在任何你需要使用会话的地方，比如创建、访问、销毁。

与 cookie 不同，除非您启动会话，否则您无法访问或使用会话。

# javascript - jQuery .css 主体不透明度

> ID：11826162
> 
> 赞同：3
> 
> 时间：2012-08-06T10:03:47.610
> 
> 标签：javascript, jquery, css, popup

我有一个新闻标签，每当用户单击它时，弹出框都会显示详细信息，但是我希望背景或正文标签本身变暗，所以我写道：

```
$("#read").click(function(){
    $("#pbox").fadeIn('slow');
    $("body").css({"opacity": "0.5"});
}); 
```

然而，盒子本身也变暗了。有没有办法让盒子忽略这个命令？或者也许还有另一种方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T10:08:03.830

由于 body 包含 #pbox，因此框本身将受到您应用的 50% 不透明度的影响。更好的方法是在整个窗口上覆盖一个半不透明的 div，然后将 #pbox 放在它上面，有点像这样：

```
#overlay {
    position: fixed;
    top: 0;
    left: 0;
    background-color: #fff;
    width: 100%;
    height: 100%;
    display: none;
}

#pbox {
    z-index: 1;
} 
```

所以在这里你有一个白色的#overlay div 以 50% 的不透明度出现在你的所有内容上。上面是#pbox，指定了一个z-index，以确保它出现在顶部。

jQuery 代码有点像这样：

```
$("#read").click(function(){
    $("#pbox").fadeIn('slow');
    $("#overlay").show().css({"opacity": "0.5"});
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T10:06:47.223

不幸的是，没有。由于弹出窗口位于 body 标记内，因此它包含在不透明度更改中。

做到这一点的唯一方法是制作一个覆盖整个身体并且是半透明的覆盖层，然后将弹出窗口放在上面。

# c - 从源代码构建时，libming 0.4.2 安装在 OSX 10.7.4 x64 上出现错误

> ID：11826167
> 
> 赞同：0
> 
> 时间：2012-08-06T10:04:08.627
> 
> 标签：c, makefile, osx-lion, libming

我正在尝试从 Intel Mac OSX 10.7.4 x64 上的源代码安装 libming 0.4.2（我已经在 Intel Mac OSX 10.6 i386 上成功安装了它）但是当我尝试运行 ./configure 时它给了我以下错误（两者都有并且没有 sudo）

```
config.status: creating util/Makefile
config.status: creating util/ming-config
config.status: creating ming.spec
config.status: creating src/ming_config.h
config.status: src/ming_config.h is unchanged
config.status: executing depfiles commands
config.status: executing libtool commands
sed: config/ltmain.sh: No such file or directory
sed: config/ltmain.sh: No such file or directory
mv: rename libtoolT to libtool: No such file or directory
cp: libtoolT: No such file or directory
chmod: libtool: No such file or directory 
```

当然在那之后 make install 失败了。:(（已经安装了xcode和xcode命令行工具）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:12:49.740

这些命令可以工作（一步一步）：

```
aclocal
glibtoolize --force
autoheader
autoconf
automake
./configure
make
make install 
```

libming 0.4.2 可能会出现这样的问题，因为它在 RC1 处停止。（尤其是 Intel Mac 参考：http://www.libming.org/Mac_OS_X_Installation）

尝试安装更高版本的 0.4.3 和 0.4.4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T05:04:06.507

以下说明/命令适用于 Mac OSX 10.7.4 x64。

```
 1\. Install mac ports from http://www.macports.org/
 2\. sudo port install automake
 3\. sudo port install autoconf
 4\. sudo port install libtool
 5\. sudo port install intltoo 
 6\. sudo port install pkgconfig
 7\. sudo port install cmake
 8\. glibtoolize --ltdl --force --copy
 9\. autoreconf

 and then build your code using

 ./configure
 make
 make install 
```

# ruby-on-rails-3 - 当设计用户模型密码的种子数据为空时

> ID：11826168
> 
> 赞同：0
> 
> 时间：2012-08-06T10:04:09.780
> 
> 标签：ruby-on-rails-3, devise

在我的种子文件中，我有以下内容：

```
puts  "Creating Deans User"
user = User.create!(:email => "test@test.com", :password => "test1234", :password_confirmation => "test1234", :name => "Dean Chester", :admin => true)
puts "User created" 
```

但是当我在控制台中检查时，我看到以下内容：

```
[#<User id: 1, email: "test@test.com", encrypted_password: "", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, created_at: "2012-08-06 10:02:22", updated_at: "2012-08-06 10:02:22", admin: true, name: "Dean Chester">] 
```

并且加密的密码字段是空白的，所以出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:39:10.360

你有：

```
attr_accessor :password, :password_confirmation, :current_password 
```

在你的模型中？如果是这样，请将其删除，它将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:05:06.133

`attr_accessible :password, :password_confirmation`您的 `User.rb 中可能缺少您的内容。

# python - 带有 If 语句的布尔赋值

> ID：11826169
> 
> 赞同：-2
> 
> 时间：2012-08-06T10:04:15.967
> 
> 标签：python, if-statement

我正在尝试解决从字符串中删除 HTML 标记的问题。我意识到正则表达式是一个更好的解决方案，但我想弄清楚这里出了什么问题。

这个想法是假设我们使用'tag'监控标签中的情况，通过比较每个字符的值来修改它的值。

问题是，标签的值永远不会改变：

```
def remove_tag(s):
    tag = True

    for c in s:
        print "c = %s" % c
        if (c == '<'):
            print 'start_tag'
            tag == True
            print tag
        elif (c == '>'):
            print 'end tag'
            tag == False
            print tag 
```

跑步：

```
remove_tag("<h1>Title</h1>") 
```

产生：

```
c = <
start_tag
True
c = h
c = 1
c = >
end tag
True
c = T
c = i
c = t
c = l
c = e
c = <
start_tag
True
c = /
c = h
c = 1
c = >
end tag
True
None 
```

我对为什么打印“结束标签”但没有将“假”值分配给标签感到困惑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T10:05:37.800

这些行是比较，而不是分配：

```
tag == True
tag == False 
```

你要

```
tag = True 
```

# php - 更新到较新版本后单击“从单词粘贴”选项时出现 TinyMCE javascript 问题？

> ID：11826176
> 
> 赞同：1
> 
> 时间：2012-08-06T10:04:55.660
> 
> 标签：php, javascript, symfony1, tinymce, text-editor

以前我使用的是 tinyMCE 3.2，升级到 3.5 后我遇到了一个新问题。

单击“从单词粘贴”选项时显示“找不到页面”的错误。

如果我在本地主机上使用 TinyMCE，它工作正常。将其放入 symfony 时会出现问题。我只是复制了整个 localhost 并粘贴到 /web 文件夹中。所有复制粘贴编辑工作正常。唯一的问题是javascript onclick之类的功能-“从单词粘贴”和“插入图像”。

为什么这个问题出在 symfony 上，或者是否有任何配置问题。

# javascript - jQuery中的关闭菜单事件

> ID：11826180
> 
> 赞同：0
> 
> 时间：2012-08-06T10:05:12.233
> 
> 标签：javascript, jquery

我在 jQuery 中有一个菜单插件。只有当我单击它的内圈时，菜单才会关闭......

> www.tranceil.fm -> 点击耳机

我想通过单击任何地方来关闭菜单，而不仅仅是内圈

标题代码是这样的

```
<script type="text/javascript">
            jQuery(document).ready(function(){

                var pieMenu = jQuery('#promo').pieMenu({icon : [
                        { 
                            path : "/wp-content/themes/Tersus/images/piemenu/winamp.png",
                            alt  : "Winamp",
                            fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.pls';return false}
                        },  { 
                            path : "/wp-content/themes/Tersus/images/piemenu/vlc.png",
                            alt  : "VLC Media Player",
                            fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.pls';return false}  
                        },{ 
                            path : "/wp-content/themes/Tersus/images/piemenu/QuickTime.png",
                            alt  : "Quick Time Player",
                            fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.qtl';return false}
                        },{ 
                            path : "/wp-content/themes/Tersus/images/piemenu/WMP.png",
                            alt  : "Windows Media Player",
                            fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.asx';return false}
                        },{ 
                            path : "/wp-content/themes/Tersus/images/piemenu/popup.png",
                            alt  : "נגן Popup",
                            fn   : function(){jQuery("#popupplay").click();return false}
                        },{ 
                            path : "/wp-content/themes/Tersus/images/piemenu/iTunes.png",
                            alt  : "iTunes",
                            fn   : function(){alert('...בקרוב');return false}
                        }],
                    beforeMenuOpen: function(){
                        jQuery('<div id="shadow"></div>').css(
                        {
                            'position':'fixed',
                            'background-color':'#000000',
                            'opacity': 0.6,
                            'width':'100%',
                            'height':'100%',
                            'z-index' :999,
                            'top':0,
                            'left':0
                        }).appendTo('body');
                    },
                    beforeMenuClose: function(){
                        jQuery('#shadow').remove();
                    }
                });

                jQuery('#promo').click(function(){
                if(jQuery('#'+pieMenu.id).css('display') != 'block') //if jpie is not visible
                pieMenu.initMenu(760,150);

                })
            });

        </script> 
```

JS文件中的点击事件->

```
//click event
            jQuery('#'+idCore).live({
                click: function() {
                    if(closable)
                        removeMenu();
                },
                contextmenu:function(e){
                    e.preventDefault(); 
                }
            }) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:47:38.637

看起来您需要在单击阴影时删除`pie0`div 和`shadow`div ，因为每当它们被打开/返回到屏幕时，它们就会完全生成/重新生成。

所以只需添加这个：

 ~~~~```
$('#shadow').on('click', function(event){
    $('#pie0').remove();
    $(this).remove();
}); 
```~~  ~~**更新**：我刚刚意识到：因为阴影是在用户事件之后动态添加的，并且不会出现在 documentready 上，所以您需要通过将其附加到 body 元素来定义它，并委托单击 shadow 元素，如下所示：

```
$('body').on('click', 'shadow', function(event){
    $('#pie0').remove();
    $(this).remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:50:21.783

如果您想通过单击任意位置来关闭它：

```
$(document).live({
    ....
}); 
```

您将在这里面临的问题是，此点击会导致其他点击也发生。例如，如果用户点击某个链接或其他东西，他将被重定向并且菜单也将被关闭。此外，由于`document`是顶级元素，事件永远不会**从**它传播，它们总是会传播**到**它。即使不是这种情况，`live`它的工作方式是一旦事件传播到顶部，它就会处理事件

您可以做的是，将其设置为捕获模式：

```
document.addEventListener('click', function(event) {
    if(closeable) {
        removeMenu();
        event.stopPropogation();
    }
}, true); 
```

最后的`true`参数将这个事件侦听器设置为`capturing`模式，这将导致它调用存在的最高级别祖先的事件处理程序，该处理程序将用于文档。调用该事件后，该事件会冒泡到目标。并且在文档的事件处理程序中，如果我们使用一个事件（我们只会在设置了可关闭的情况下才这样做），那么我们根本不会传播它。~~~~

# php - 使用两个日期查找 PHP 中的总小时数

> ID：11826182
> 
> 赞同：0
> 
> 时间：2012-08-06T10:05:25.363
> 
> 标签：php

> **可能重复：**
> [PHP：查找两个日期之间的天差（“YmdHis”）reture](https://stackoverflow.com/questions/4421076/phpfind-day-difference-between-two-dateymdhis-reture)

我有两个约会

```
$departure_Dtae=2012-07-25T07:30:00
     $arrival_date =2012-07-25T10:25:00 
```

T 表示时间，即`2012-07-25T10:25:00`日期为`2012-07-25`，时间为`10:25:00`(hr: mts: s)

我需要找出这两次之间的总小时数，即在这种情况下，总小时数是 2 小时 55 分钟 但我不知道我如何在 PHP 中计算这个 有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:29:26.393

如果使用 PHP 版本 5.3+，那么您可以使用 DateTime::diff()：

```
<?php
    function getDiff($strStart, $strEnd) {
        $start  = DateTime::createFromFormat("Y-m-d G:i:s", $strStart);
        $end    = DateTime::createFromFormat("Y-m-d G:i:s", $strEnd);

        return $start->diff($end)->format('%hhrs %imins and %sseconds ');
    }

    var_dump(getDiff('2012-07-25 07:30:00', '2012-07-25 10:25:00')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:44:52.970

```
its simple
$departure_Dtae="2012-07-25T07:30:00";
$arrival_date ="2012-07-25T10:25:00";
$departure_Dtae=  str_replace("T", " ", $departure_Dtae);
$arrival_date=  str_replace("T", " ", $arrival_date);
$diff=  (strtotime($arrival_date)-strtotime($departure_Dtae));
echo date("h",$diff); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:31:36.677

您可以在 php 中使用 DateTime 对象，该对象具有大量用于操作日期的方法。

DateTime::createFromFormat [http://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)和 DateTime::diff [http://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)将是执行此任务所需的功能。

```
$date1 =  DateTime::createFromFormat('j-M-Y H:i', '15-Feb-2009 12:45');
$date2 =  DateTime::createFromFormat('j-M-Y H:i', '15-Feb-2009 13:45');
$interval = $date1->diff($date2);
echo $interval->format('H:i'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T10:34:01.590

```
strtotime(date($arrival_date)) - strtotime(date($departure_date)); 
```

将以秒为单位为您提供时间差异，然后您可以根据需要进行操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T10:12:01.427

尝试这个 ：

```
$end_time = "2008-09-05 20:59:13";
$start_time = "2008-09-05 19:00:16";
$end = date("h:i:s",strtotime($end_time));
$start = date("h:i:s",strtotime($start_time));
$diff = strtotime($end) - strtotime($start);
//convert to min and sec
$convert_min = $diff/60;
$convert_sec = $diff % 60;//seconds
//convert to hours and min
$convert_hr = floor($convert_min/60);//hours
$remainder = floor($convert_min % 60);//minutes
$total_visit = $convert_hr.":".$remainder; 
```

# ios - GCDAsyncSocket 在传输数据时更改数据

> ID：11826195
> 
> 赞同：1
> 
> 时间：2012-08-06T10:06:04.990
> 
> 标签：ios, tcp, nsdata, gcdasyncsocket

我正在制作多人 iOS 游戏并遇到以下问题：我发送了一个字典，其中包含一组自定义对象。这些自定义对象符合`NSCoding`. 我将字典转换成`NSData`这样：

```
 NSData *data = [NSKeyedArchiver archivedDataWithRootObject:packet]; 
```

然后发送

```
[asyncSocket writeData:data withTimeout:-1 tag:tag]; 
```

收到

```
[sock readDataWithTimeout:-1 tag:tag]; 
```

并尝试取消归档

```
NSDictionary *dict = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

一切看起来都非常简单，但应用程序在取消归档数据时崩溃，我收到以下错误

> [NSKeyedUnarchiver initForReadingWithData:]：无法理解的存档（0x62、0x70、0x6c、0x69、0x73、0x74、0x30、0x30）'

我查看了发送和接收数据的描述，发现数据到达接收设备 1) 更改和 2) 截断。

当我通过 GameKit 协议、Game Center 和蓝牙发送完全相同的数据时，就没有这样的问题——我收到的数据没有改变，所以很明显问题出在 GCDAsyncSocket 深处的某个地方。

有没有人遇到过这样的麻烦？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:44:52.490

正因为如此：[TCP 协议以无限长度的单个连续流的概念为模型。](https://github.com/robbiehanson/CocoaAsyncSocket/wiki/CommonPitfalls) 您需要附加到`data`某种类型的终结符指示符并使用 readDataToData 方法。或者，您需要在您`data`的前缀前面加上`data`. 因此，当您使用 readDataWithTimeout 时，您可以从传入的 TCP 流中提取确切的字节数。

[GCDAsynsSocket](https://github.com/robbiehanson/CocoaAsyncSocket/blob/master/GCD/Xcode/EchoServer/EchoServerAppDelegate.m)的作者提供的如何使用终止符的示例：

```
NSString *welcomeMsg = @"Welcome to the AsyncSocket Echo Server\r\n";
    NSData *welcomeData = [welcomeMsg dataUsingEncoding:NSUTF8StringEncoding];

    [newSocket writeData:welcomeData withTimeout:-1 tag:WELCOME_MSG];

    [newSocket readDataToData:[GCDAsyncSocket CRLFData] withTimeout:READ_TIMEOUT tag:0]; 
```

The reason why you do not have to do all the mentioned above with GameKit because GameKit protocols take care all of that for you.

# c++ - 子类中的 C++ 覆盖函数成员

> ID：11826198
> 
> 赞同：2
> 
> 时间：2012-08-06T10:06:13.847
> 
> 标签：c++, g++, overriding

```
class Foo
{
    public:
        void    action();
};

class Bar : public Foo
{
    public:
        void    action();
};

void Foo::action ()
{
    cout << "parent\n";
};

void Bar::action ()
{
    cout << "child\n";
};

int main()
{
    Foo* foo = new Bar ();
    foo->action();          // returns "parent" - "child" expected

    return 1;
 } 
```

对于一个可能微不足道的问题，我很抱歉，但我是 C++ 新手...'foo' 指针必须指向 Foo 类的一个实例，因为它可以是 Foo 的任何子类，例如 Bar、Bar1、Bar2、Bar3等等

同时 'foo->action()' 应该运行一个被覆盖的子函数。请告诉我，我如何更正代码以达到我的目标......谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:08:13.143

`virtual`对父类函数使用关键字。而且，你的父类应该有`virtual destructor`.

```
class Foo
{
    public:
        virtual void    action();
};

class Bar : public Foo
{
    public:
        void    action();
};

void Foo::action ()
{
    cout << "parent\n";
};

void Bar::action ()
{
    cout << "child\n";
};

int main()
{
    Foo* foo = new Bar ();
    foo->action();          // returns "parent" - "child" expected

    return 1;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T10:08:57.630

需要声明成员函数`virtual`（例如，与 Java 不同，其中所有方法都是隐式的`virtual`）：

```
class Foo
{
public:
    virtual void action(); 
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T10:09:35.080

与其他语言（如 Java）不同，在 C++ 基类中必须专门标记它允许通过使用关键字覆盖的方法`virtual`

# asp.net - 在 loginview asp.net 中获取 gridview 控件

> ID：11826203
> 
> 赞同：-1
> 
> 时间：2012-08-06T10:06:29.453
> 
> 标签：asp.net, gridview, loginview

我正在使用登录视图。loginview 中有一个gridview，我想将它与数据库表绑定，但是我无法在.cs 代码中访问这个gridview。

我试过这个：

```
GridView GridView1 = (GridView)LoginView1.FindControl("GridView1"); 
```

但gridview再次没有初始化。请注意，在我设置的 web.config 文件中

```
<authentication mode="Forms"/> 
```

有人知道这个问题的解决方案吗？

这部分代码：

```
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">

    <asp:LoginView ID="LoginView1" runat="server">  
     <LoggedInTemplate>  

      <div class="tab-content" id="mytabcontent">
        <div class="tab-pane active" id="new1">
            <asp:GridView ID="GridView1" runat="server">
            </asp:GridView>   
        </div>
        </div>
      </LoggedInTemplate>  

      <AnonymousTemplate>  
               <asp:HyperLink runat="server" navigationURL =         "default.aspx">Login</asp:HyperLink>
       </AnonymousTemplate>  
     </asp:LoginView> 

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:28:36.750

您可能会收到此错误，因为用户可能未通过身份验证。

尝试

```
 if(User.Identity.IsAuthenticated)
 {
     GridView GridView1 = (GridView)LoginView1.FindControl("GridView1");

 } 
```

使用断点并检查是否调用了访问 Gridview 的行。

更新：

要进行身份验证，请创建 Auth Cookie

```
FormsAuthenticationTicket authTicket = new
                              FormsAuthenticationTicket(1, //version
                              username.ToString(),                    //user name
                              DateTime.Now,                //creation
                              DateTime.Now.AddDays(365), //Expiration
                              false, ""
                    //Persistent
                              );

                System.Web.Security.FormsAuthentication.RedirectFromLoginPage(username.ToString(), true); 
```

// 在登录页面创建 cookie 后重定向到 Secured 页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:32:45.140

您可以只处理 GridView 的 init 事件：

```
<asp:GridView ID="GridView1" runat="server" OnInit="GridView1_Init">
</asp:GridView> 
```

# asp.net - 重写 ASP .NET Web 窗体中的 URL

> ID：11826206
> 
> 赞同：0
> 
> 时间：2012-08-06T10:06:41.093
> 
> 标签：asp.net, asp.net-mvc

我刚刚从 ASP .NET MVC 应用程序退后一步，并移至 ASP .NET Web 窗体，我想知道是否也可以在 Web 窗体中重写 url。我有以下一组要 reqrite 的 URL：

*   编辑.aspx?type=grbat
*   编辑.aspx?type=lrbat
*   编辑.aspx?type=glsi
*   编辑.aspx?type=llsi

如您所见，一切都在一页上进行。

但是，我想让 URL 对用户更友好，并将其替换为：

*   编辑GlobalTopic.aspx
*   编辑LocalTopic.aspx
*   编辑GlobalInitiative.aspx
*   编辑LocalInitiative.aspx

在 ASP .NET Web 窗体中是否可行？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:34:14.357

您可以使用开源组件：[URL Rewriter](http://urlrewriter.net/)。

我过去使用过它，并且能够快速创建友好的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:14:16.793

我认为您需要在此处重写 url（isapi 或其他类似工具）来实现您想要的。

在这里，您正在访问 4 个不同的页面，需要创建它们，否则服务器将响应 404

您可以创建这 4 个页面，然后使用适当的参数重定向到 edit.aspx，但我仍然认为使用 url 重写是一种更好的方法（因为这是它的目的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-18T07:17:29.013

**您好，您可以使用 Bellow 方法轻松地从 Web.config 重写 URL，**

```
 <system.webServer> 
     <rewrite> 
       <rules> 
         <rule name="default">
           <match url="^EditGlobalTopic.aspx" />
             <conditions logicalGrouping="MatchAll">
                <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                <add input="{REQUEST_FILENAME}" pattern="\.axd" negate="true" />
               </conditions>
          <action type="Rewrite" url="Edit.aspx?type=grbat" />
            </rule>
       </rules>
   </rewrite>
 </system.webServer> 
```

采用

```
 <a href="EditGlobalTopic.aspx">Go</a> 
```

它会将您重定向到该页面。

# google-chrome-extension - 来自 Chrome 网上应用店的用户特定版本的扩展程序

> ID：11826207
> 
> 赞同：4
> 
> 时间：2012-08-06T10:06:41.730
> 
> 标签：google-chrome-extension, chrome-web-store

我一直在为我的公司开发和维护一个 Chrome 扩展程序，每个客户都将在代码中被分配一个唯一的 ID。我们一直在使用 ID 来确定许可证状态并登录我们的服务（按月付费的付费延期）。

到目前为止，我们自己托管了扩展文件，并为每个客户扩展提供了唯一的更新 URL。这很好很简单；转到我们的网站，单击安装，您就完成了。然而，在最新的 Chrome 版本中，该安装过程已被 Google 阻止，因为他们现在要求用户通过将 CRX 文件拖放到 chrome://chrome/extensions/ 选项卡中来安装扩展程序。当然，除非您的扩展程序可以通过 Chrome 网上应用店获得 - 这导致了我的问题：

*   我们不希望拖放式 CRX 安装 - 需要 Web Store。
*   我们不希望 Web Store 上有多个版本的扩展（每个客户一个），因为每次我们更新扩展时，这都是一个维护地狱。
*   我们不想使用网上应用店许可，因为：
    *   它需要 OpenID 登录。
    *   我们将延期出售给有许多学生的学校，由学校支付账单 - 而不是学生。
    *   我们不想将我们的支付方式锁定在一个浏览器上，即我们希望能够通过我们的或服务器来维持许可和支付。
*   我们不希望用户输入许可证密钥，因为这对于数千名学生必须输入密钥的风险太大 - 而且它需要某种存储（cookies/localStorage），最终会被清除，需要许可证密钥重新输入。

我不能 100% 确定我的陈述是完全正确的，所以如果我遗漏了什么，请随时启发我。

如果是，那么问题是我们是否可以通过 Web Store（使用唯一 ID）为每个客户定制扩展，而不需要为每个 ID 发布一个扩展？

作为一个附带问题，任何可能用另一种方法解决问题的答案也将被接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:08:39.877

对于下面的答案，我假设您的应用是打包应用，而不是托管应用。

我有一个与您当前的实现非常相似的解决方案，但为用户增加了一个额外的步骤。对于学生用户，该过程将如下所示：

1.  从网上应用店下载应用程序。该应用程序尚未运行，启动它只会显示“请单击您的学校/机构提供的激活链接”消息。
2.  单击托管在*您的服务器*（即您用来托管更新 URL 的服务器）上的链接，该链接看起来像`https://myserver.com/activateapp.php?custid=123456789`. 您为您支持的每个机构托管一个此类链接，并且该机构的工作是向其学生提供链接。此链接激活应用程序。

从实现的角度来看，它是这样工作的：

1.  `https://myserver.com/activateapp.php`在您的服务器上托管一个页面。服务器端，检查`custid`参数是否有效。如果不是，则发送 404 错误。
2.  您的应用程序有一个内容脚本被注入`https://myserver.com/activateapp.php`，它会扫描 URL 并挑选出客户 ID。应用程序找到 ID 后，会将其存储在 localStorage 中。由于无效的客户 ID 会产生 404 错误，因此您知道当内容脚本运行时，页面不是 404 错误；因此，它正在读取有效的客户 ID。
3.  每当应用程序想要查询您的服务时，它都会检查它在 localStorage 中是否有客户 ID。如果是，则使用该 ID；如果没有，它会显示一条消息，表明应用程序尚未激活。打包的应用程序永远不会`localStorage`被删除，除非您的应用程序被编程为擦除自己的存储空间，或者用户从控制台执行此操作。存储擦除永远不会“意外”发生。即使是最强大的浏览器范围的数据/缓存清除也只会`localStorage`从网页中清除，而不是从应用程序和扩展程序中清除。

为了额外的安全性——如果你不希望人们随机猜测客户 ID——你可以添加一个额外的签名参数，比如`https://myserver.com/activateapp.php?custid=123456789&sig=2464509243`. 这个额外的参数是客户 ID 的一些服务器验证转换（理想情况下是加密签名或与数据库中的 ID 关联的纯随机值），任何人都无法猜测。当请求`activateapp.php`到达服务器时，它会检查有效的客户 ID*和*有效的相应签名。当然，这并不能阻止对有效链接具有合法访问权限的人将链接共享给未经授权的人，但我希望这是您的旧系统中存在的漏洞。

# sql-server - SQL Server：语法错误

> ID：11826221
> 
> 赞同：-3
> 
> 时间：2012-08-06T10:07:34.160
> 
> 标签：sql-server

我一直有错误

> 关键字 'SELECT'
> 附近的语法不正确 ')' 附近的语法不正确

```
(SELECT TOP 5 t2.ItemID, SUM(t2.Quantity) 
 FROM Orders as t1
 as Quantity FROM t2.ItemID in 

 (SELECT ItemID FROM Orders as t1 INNER JOIN BasketItems as t2 on t2.BasketID = t1.BasketID

 WHERE t1.OrderStatusID = 3 AND t1.OrderDate BETWEEN '" + LastWeekDate + "' AND '" + TomorrowsdaysDate + "')

 GROUP BY t2.ItemID ORDER BY Quantity desc"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:25:07.710

您缺少外部 SELECT 语句中的 FROM 部分（第 2 行）

你在那里有一个 WHERE 条件

另外我认为您不需要为此进行子查询

试试这个

```
('  SELECT TOP 5 t2.ItemID, SUM(t2.Quantity)  as Quantity 
    FROM Orders as t1 
        INNER JOIN BasketItems as t2 on t2.BasketID = t1.BasketID
    WHERE t1.OrderStatusID = 3 
    AND t1.OrderDate BETWEEN '" + LastWeekDate + "' AND '" + TomorrowsdaysDate + "'
    GROUP BY t2.ItemID ORDER BY 2 desc
 '); 
```

# c# - GroupBox 对象引用错误

> ID：11826223
> 
> 赞同：0
> 
> 时间：2012-08-06T10:07:46.580
> 
> 标签：c#, wpf, xaml, nullreferenceexception, groupbox

我有几个`GroupBox`控件，除了一个之外都可以正常工作。代码是一样的，我不明白可能是什么问题。我明白了`NullReferenceException`。有没有人有任何线索？这是 XAML：

```
<GroupBox Header="Load neural network" Height="90" HorizontalAlignment="Left" Margin="416,34,0,0" Name="groupBox3" VerticalAlignment="Top" Width="207" IsEnabled="False">
    <Grid>
        <Button Content="Load" Height="23" HorizontalAlignment="Left" Margin="114,32,0,0" Name="loadBTN" VerticalAlignment="Top" Width="75" />
            <TextBox Height="23" HorizontalAlignment="Left" Margin="6,32,0,0" Name="textBox1" VerticalAlignment="Top" Width="93" />
    </Grid>
</GroupBox> 
```

这是弹出错误的代码：

```
private void loadRBcheck_Checked(object sender, RoutedEventArgs e)
{
    newRBcheck.IsChecked = false;
    groupBox1.IsEnabled = false;
    groupBox2.IsEnabled = false;
    inputTB.IsEnabled = false;
    hiddenTB.IsEnabled = false;
    outputTB.IsEnabled = false;
    groupBox3.IsEnabled = true; //this line causes error
    label1.IsEnabled = false;
    label2.IsEnabled = false;
    label3.IsEnabled = false;
} 
```

# javascript - asp page + javascript：如何隐藏一个元素并获得它的真实位置？

> ID：11826225
> 
> 赞同：0
> 
> 时间：2012-08-06T10:07:56.397
> 
> 标签：javascript, position, element, visible

我有一个 javascript，它找到一个元素（面板），获取它的位置，并将页面滚动到该位置。javascript函数在按钮点击时被调用。当面板为 Visible=true 时，一切正常；但是在页面加载时，面板必须对用户不可见。当面板为 Visible = false 时，javascript 函数不起作用，因为该面板在页面上不存在。当面板为 style="display:none" 时，它存在，对用户不可见，但它的位置不是它的真实位置。当面板为 style="visibility:hidden" 时，面板存在，在真实位置，但是页面上有很大的空白区域，面板被隐藏。

如何在页面上没有空白区域的情况下使面板对用户不可见，并获得其在页面上的真实位置？

编辑：我的解决方案 + 代码 -

好吧，我让它工作了，但必须有更好的解决方案。这是代码

```
<script type="text/javascript">
        function elementPosition(obj) {            
            var curleft = 0, curtop = 0;
            if (obj.offsetParent) {
                curleft = obj.offsetLeft;
                curtop = obj.offsetTop;

                while (obj = obj.offsetParent) {
                    curleft += obj.offsetLeft;
                    curtop += obj.offsetTop;
                }
            }
            return { x: curleft, y: curtop };
        }

        function ScrollToControl(id) {
            jid = id;
            var elem = document.getElementById(jid);
//here I set the display = 'block', and I also set this in button_click event
//when I didn't set it also in button_click event, I get the right panel position
//but the panel remains invisible
            elem.style.display= 'block'; 
            var scrollPos = elementPosition(elem).y;
            window.scroll(0, scrollPos);
            }
           </script> 
```

页面上的按钮：

```
<asp:Button ID="btnClientDossiers_EMAIL" runat="server" CssClass="button" Enabled="False"
                            Text="EMAIL" OnClick="btnClientDossiers_EMAIL_Click" /> 
```

代码隐藏

```
 Page_Load
    {
 //how can I dynamically get the ctl00_ContentPlaceHolder?
// Or will the client name of plEMAIL always start with ctl00_ContentPlaceHolder?
    btnClientDossiers_EMAIL.Attributes.Add("onclick", " return 
    ScrollToControl('ctl00_ContentPlaceHolder_plEMAIL');");
    }

    protected void btnClientDossiers_EMAIL_Click(object sender, EventArgs e)
            {
                plEMAIL.Attributes.Add("style", "display:block");
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:25:39.660

请发布您的代码，以便我们为您提供更有帮助的答案，但我将建议一种您可能能够实现您所追求的方法。尝试在 div(s) 设置为 的情况下加载页面`style="visibility:hidden;"`，然后将它们的垂直位置放入全局变量或元素的数据属性中，然后立即将 div 的样式设置为`style="display:none;"`。

然后，您应该能够在滚动功能中使用这些位置值。

# c++ - 字符串输入复制文本

> ID：11826228
> 
> 赞同：0
> 
> 时间：2012-08-06T10:08:03.587
> 
> 标签：c++, string

例如，我有以下一段代码：

```
string str;
int i;
cout<<"input:";
cin>>str;
cout<<"integer:";
cin>>i; 
```

这段代码实际上并没有什么问题，但是如果我将一些文本粘贴到“输入”中的命令提示符中，它会自动将一些复制的文本填充为“整数”。我该如何解决这个问题？

编辑：我可以随意输入文本，但是当我复制文本时会出错。我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:10:21.303

我猜，您的文本包含空格。所以，`std::cin`不会在这里工作。改为使用`std::getline`。

```
std::string str;
std::getline( std::cin, str ); 
```

还有第三个参数`std::getline`-delimiter。默认情况下，它是新行字符。

* * *

如果您的文本确实包含换行符，那么这将不起作用。您有 2 个选项：

*   找到唯一的字符，可以用作分隔符并将其作为第三个参数传递`std::getline`
*   `std::getline`从用户输入（ ）中逐行（使用 ）读取`std::cin`并查找一些特殊的字符串，这将告诉您的程序文本在哪里结束。没有其他方法可以知道`int`eger 从哪里开始（除非文本是固定大小的，但我对此表示怀疑）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:10:19.150

```
string str;
int i;
cout<<"input:";
getline(cin, str); 
// you want to read the whole line, operator>> will read until whitespace
cout<<"integer:";
cin>>i; 
```

# javascript - slideToggle()，向上切换 div 并推动上面的 div

> ID：11826229
> 
> 赞同：0
> 
> 时间：2012-08-06T10:08:08.997
> 
> 标签：javascript, jquery, css

[这是 JSFiddle](http://jsfiddle.net/JftGd/)

一切都在小提琴中得到了解释。

在这里，div 在下面切换，但我想要的是 div 应该向上切换并将上面的 div 向上推。即带有文本的 div 将作为标题上升。

*谢谢*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:12:33.647

这应该为你做：http: [//jsfiddle.net/JftGd/2/](http://jsfiddle.net/JftGd/2/)

我所做的是将段落包装在一个 div 中，并`.slideToggle()`在`click`事件函数中向该 div 添加一个。

希望这就是你要找的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:11:58.650

将文本放在另一个 div 中并滑动切换它。

# eclipse - Eclipse : 在 Eclipse IDE 下只搜索一个特定的词

> ID：11826231
> 
> 赞同：5
> 
> 时间：2012-08-06T10:08:13.957
> 
> 标签：eclipse

是否可以在 Eclipse IDE 下仅搜索特定单词。例如，我需要搜索一个单词“sub”。

但问题是，当我执行 ctr l + H 并输入单词“sub”时，它会产生所有匹配的结果，例如 submit ----etc，但我想要在我的搜索中使用确切的单词“sub”。

请让我知道它是否可能？

提前致谢 。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-06T10:48:40.153

尝试在文件搜索对话框 (Ctrl + H) 中使用正则表达式。您可以像这样使用`word boundaries`修饰符`\b`：

![Eclipse 正则表达式搜索](../Images/d08d8c2b09848c469094d4e7ae5c3024.png)

`\bsub\b`要求 eclipse 搜索 sub 后面和前面都有单词边界的所有匹配项。**[在此处](http://www.regular-expressions.info/wordboundaries.html)**阅读有关单词边界的更多信息。

以下是使用上述搜索结果的示例快照：

![词边界搜索](../Images/38c4222814d99a80fc4e5ba8343ec455.png)

如果您想将搜索限制在当前项目，请尝试选择“封闭项目”单选选项。如果您尚未打开项目中的文件，则此选项将被禁用。为了克服这个烦恼，我建议创建一个只包含感兴趣的项目的工作集，然后限制对该工作集的搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:14:32.267

您可以从查找/替换菜单 ( `CTRL`**+**`F` ) 并标记**整个单词**选项：

![查找替换](../Images/79642cd7c2931fe236fb5fa50db9d61d.png)

否则，从标准搜索菜单（`CTRL`**+**`H`），您可以使用适当的**正则表达式**获得相同的结果，在您的情况下，您只需要在子文本之后（或/和之前）附加一个空格，您将只获得整个单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-06T12:13:49.823

选择单词，然后按**Ctrl+Alt+letter(G)**它将搜索使用它的单词。

# ios - NSString 到 NSDate 与 GMT 值的转换

> ID：11826232
> 
> 赞同：0
> 
> 时间：2012-08-06T10:08:30.400
> 
> 标签：ios, nsdate, nsdateformatter

如何为这样的日期字符串设置日期格式化程序 setformat 选项以获取 NSDate 对象？

```
31-07-2012 11:00:00 GMT 05:30 
```

我只需要格式化程序字符串来处理这个函数，或者还有其他事情要做来从这个字符串中获取日期吗？

-(void)setDateFormat:(NSString *)string;

注意：我知道并在 NSDateformatter 上工作过，但无法解决这个问题....！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:25:41.173

如果格式是

```
31-07-2012 11:00:00 GMT+05:30 
```

您可以使用

```
[dateFormatter setDateFormat:@"dd-MM-yyyy HH:mm:ssZZZZ"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:34:42.587

我发现这篇博客对 NSDate 和 NSString 的描述非常清楚。[http://oleb.net/blog/2011/11/working-with-date-and-time-in-cocoa-part-1/](http://oleb.net/blog/2011/11/working-with-date-and-time-in-cocoa-part-1/)。你可以参考一下。

# java - 如何在 Selenium WebDriver 中为多个浏览器配置文件

> ID：11826240
> 
> 赞同：0
> 
> 时间：2012-08-06T10:09:24.287
> 
> 标签：java, internet-explorer, google-chrome, webdriver

> **可能重复：**
> [如何在 WebDriver 中初始化多个浏览器？](https://stackoverflow.com/questions/11823150/how-to-initialize-multiple-browsers-in-webdriver)

我如何为 IE 和 Chrome 配置文件。司机=新的firefoxDriver（）；工作正常，但驱动程序=新的 InterExploraDriver 或驱动程序=新的 ChromeDriver 无法正常工作。需要对 IE 和 Chrome 进行一些配置。我必须如何以及在哪里进行配置？Java中必要的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:59:02.670

You would need standalone servers for IE and Chrome in order to run your tests on those browsers. They can be found at

[http://www.seleniumhq.org/download/](http://www.seleniumhq.org/download/)

[https://sites.google.com/a/chromium.org/chromedriver/downloads](https://sites.google.com/a/chromium.org/chromedriver/downloads)

Download those servers and place the path to the exe files and initialize the drivers as shown below:

IE

```
System.setProperty("webdriver.ie.driver", pathOftheexe);
WebDriver driver = new InternetExplorerDriver();
driver.get("http://www.google.com"); 
```

You would also need to set the Protected Mode settings for each security zone to be the same value. on IE, choose Tools menu, and click on the Security tab. For each zone, there will be a check box at the bottom of the tab labeled "Enable Protected Mode". Keep this setting same for all zones i.e. either ON or OFF .

Chrome:

```
System.setProperty("webdriver.chrome.driver", pathOfexe);
WebDriver driver = new ChromeDriver();
driver.get("http://www.google.com"); 
```

Please refer the following links for details:

[https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver](https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver)

[https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver](https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:24:31.750

您可以只使用 selenium-server-standalone.jar。将它添加到您的类路径中，您不必添加每个浏览器服务器。

# iphone - 保存捕获的图像将在 strdup 帧中泄漏 malloc 48 字节

> ID：11826249
> 
> 赞同：2
> 
> 时间：2012-08-06T10:09:59.387
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller

大家好，我正在开发一个应用程序，在该应用程序中，我正在捕获图像并录制视频，并且我的应用程序运行良好，但是当我使用此代码时

```
UIImageWriteToSavedPhotosAlbum(image, self,@selector(image:finishedSavingWithError:contextInfo:),nil); 
```

我的应用程序在 strdup 帧中的 malloc 48 字节中收到内存警告。

我正在使用 Xcode 4.3.3 和 iOS 5.1。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [picker dismissModalViewControllerAnimated:YES];

    if (isPhoto == YES) {   
        viewForAll.hidden = YES;
        viewForDisplay.hidden = NO;
        isPost1 = YES;
        UIImage* image = [info valueForKey:@"UIImagePickerControllerOriginalImage"];
        NSData* imageData = UIImageJPEGRepresentation(image,1.0);

        UIImage *img1 = [[UIImage alloc] initWithData:imageData];
        UIGraphicsBeginImageContext(CGSizeMake(800,1000));
        [img1 drawInRect: CGRectMake(0, 0, 800, 1000)];

        UIImage *smallImage = UIGraphicsGetImageFromCurrentImageContext();        
        UIGraphicsEndImageContext();

        iView.hidden = NO;
        iView.contentMode = UIViewContentModeScaleAspectFit;
        iView.image = smallImage;
        [img1 release];

    }
    else if (isVideo == YES) {
        viewForAll.hidden = YES;
        viewForDisplay.hidden = NO;
        isPost1 = YES;
        NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
        videoPath = [[info objectForKey:UIImagePickerControllerMediaURL] retain];
        if ([mediaType isEqualToString:@"public.movie"]){
            NSLog(@"got a movie");
            NSURL *videoForURL = [info objectForKey:UIImagePickerControllerMediaURL];
            videoData = [[NSMutableData dataWithContentsOfURL:videoForURL] retain];
            videoName = [[videoPath lastPathComponent] retain];
        }

        UITextField *txtFld;
        NSString *eventName;
        if ([appDelegate.eventArray count] != 0) {
            NSDictionary *dict = [appDelegate.eventArray objectAtIndex:0];
    }
    else if (isZBar == YES){
        id<NSFastEnumeration> results =
        [info objectForKey: ZBarReaderControllerResults];
        ZBarSymbol *symbol = nil;
        for(symbol in results)
            break;
        resultText = [symbol.data retain];      

    }
} 
```

# wpf - 示例数据和隐式数据类型数据模板

> ID：11826255
> 
> 赞同：1
> 
> 时间：2012-08-06T10:10:31.693
> 
> 标签：wpf, visual-studio-2010, xaml

几个 Wpf 控件没有可视化表示，除非它们有一些数据（例如 ItemsControl）。因此，要在 Visual Studio 设计器中查看它们的布局，您需要使用 DesignData XAML 扩展来使用可以呈现的内容填充它们。这些控件的一个常见用法是定义几个隐式类型的数据模板，以便控件可以显示各种类型。

然而，在我看来，设计师对这种最简单的布局几乎没有任何支持，这对我们来说几乎毫无用处，但我希望我错了，我只是忽略了一些东西。这在我看来是这样的（为简洁起见，省略了 xmlns 命名空间）。

```
<UserControl
    d:DataContext="{d:DesignData Source=/CustomersDesignData.xaml}">

    <Grid>
        <ItemsControl>

            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <ListBoxItem>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding FirstName}"/>
                            <TextBlock></TextBlock>
                            <TextBlock Text="{Binding LastName}"/>
                        </StackPanel>
                    </ListBoxItem>
                </DataTemplate>
            </ItemsControl.ItemTemplate>

        </ItemsControl>
    </Grid>

</UserControl> 
```

上述工作是设计人员正确显示样本数据，从而能够验证布局。但是没有隐式的数据类型使得这种方法对于显示多种类型毫无用处。

```
<UserControl
    d:DataContext="{d:DesignData Source=/CustomersDesignData.xaml}">

    <Grid>
        <ItemsControl>

            <ItemsControl.Resources>
                <DataTemplate DataType="{x:Type local:Customer}">
                    <ListBoxItem>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding FirstName}"/>
                            <TextBlock></TextBlock>
                            <TextBlock Text="{Binding LastName}"/>
                        </StackPanel>
                    </ListBoxItem>
                </DataTemplate>
            </ItemsControl.Resources>

        </ItemsControl>
    </Grid>

</UserControl> 
```

以上在运行时工作正常，并且可以添加额外的隐式数据类型模板，使控件能够显示多种类型。美中不足的是，设计者笨拙地显示原始 ToString() 输出，使得这种方法对于开发 UI 毫无用处。

此外，无论您在哪里定义模板，将其放在 UserControl 或 App 资源中，结果似乎都没有区别，nada。据我所知，没有办法在 XAML 中支持任何形式的条件编译，并且类型的构造函数不是由设计器运行的，因此即使是解决方案背后的代码似乎也不太可能。

我们正处于移植一个相当大的数据应用程序的项目的开始，这将需要我们设计大约 200 个 UI，其中许多 UI 都深埋在应用程序中。缺乏任何能够开发这些显示设计数据的 UI 的方法已经损害了我们的生产力，并且可能会变得更糟。

有没有其他人遇到过类似的问题以及存在哪些解决方案或解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T21:30:57.413

根据我的经验和我的观点，这个问题的解决方案是将 IDE 设置为“在 XAML 视图中打开 XAML 文件”。

换句话说，不要使用设计器。

如果您“需要”使用设计器，请打开 Blend，绘制设计，然后将它们集成到您的应用程序中。您可以单独查看每个视图。您只需要在正在运行的应用程序的上下文中查看合并的布局。我合作过的最高效的 WPF 和 Silverlight 开发人员都使用这种方法。

# qt - QTableView / QStandardItemModel 更新不丢失选择/排序顺序

> ID：11826257
> 
> 赞同：2
> 
> 时间：2012-08-06T10:10:37.910
> 
> 标签：qt, qt4, qtableview

目前我想在`QStandardItemModel` **不**丢失排序顺序和行选择的情况下更新 a 中的行项目`QTableView`。

我测试了两种方法：

1.  通过清除模型`clear()`并重新添加行会“破坏”包括标题在内的所有内容。
2.  [删除](https://stackoverflow.com/questions/11768266/qstandarditemmodelremoverows-does-not-work-in-my-use-case)和重新添加所有行会保留标题，但仍会“破坏”选择和排序顺序。

我可以尝试手动 a) 删除所有不再需要的行，然后 b) 更新已更改行的项目。但是没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T10:28:16.963

我不知道，您在更新之前如何对数据进行排序，但请看一下 QTableView 的[sortByColumn()](http://qt-project.org/doc/qt-4.8/qtableview.html#sortByColumn)函数。

至于选择，如果它仍然消失，您可以手动放回您的选择，它应该在哪里：

```
// You access the selected index when the editing starts
QModelIndex index = table->selectionModel()->currentIndex();

//Later when you finished editing, you can select it again
table->selectionModel()->select(index, QItemSelectionModel::Select); 
```

更多关于这个：

*   [QItemSelectionModel](http://qt-project.org/doc/qt-4.8/qitemselectionmodel.html)
*   [QTableView](http://qt-project.org/doc/qt-4.8/qtableview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:57:53.963

您可以删除不再需要的行并添加新行，也可以手动记住排序顺序以及在清除之前选择了哪些项目。即分配一个唯一的ID（可以使用具有自定义角色的setData（）），在从所选项目中清除之前检索它，并在重新创建项目后重新应用选择。

# php - PHP：博士的 Vim 帮助文件渲染器（基于 [PH]P 的 [D]ocbook 渲染器）？

> ID：11826259
> 
> 赞同：2
> 
> 时间：2012-08-06T10:10:43.743
> 
> 标签：php, vim, docbook

我正在尝试将最新的 PHP 参考添加到 vim doc 中，但我找不到任何解决这个问题的脚本（很多过时的，但似乎没有人真正有兴趣这样做）。

我的想法是：获取最新的文档主干并像往常一样使用 vim 渲染器构建它，但我找不到任何关于如何为博士编写渲染器的手册。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:41:00.697

不幸的是，没有关于为 PhD 编写渲染的文档，但是有一个包 (IDE) 具有不同格式（json、xml、sqlite）的简单渲染，并且您可以轻松[扩展](http://git.php.net/?p=phd.git;a=tree;f=phpdotnet/phd/Package/IDE).

此外，这篇[博客文章](http://bjori.blogspot.com.br/2010/01/unix-manual-pages-for-php-functions.html)解释了如何将 Vim 与 PHP 手册手册页集成，这不是您想要的，但可能会有所帮助。

# php - 如何将 jquery 响应与 $.post 分开？

> ID：11826260
> 
> 赞同：0
> 
> 时间：2012-08-06T10:10:44.533
> 
> 标签：php, jquery, html, ajax, post

jQuery $.post：

```
$.post(
    'includes/studiesAjax/addTryb.php',
    {inputVL: inputVL},
    function(res){
        $("#container").html(res);
    }
); 
```

响应是长 html 代码

我想从响应 beetween`<p>`标签的第一行中提取数据，将其与响应分开并分配给新变量。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:13:11.607

```
function(res){
    var newVar = $(res).find('p:first').html();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:15:00.297

您应该将响应转换为 jquery 对象，然后您可以照常操作：

```
$.post(
            'includes/studiesAjax/addTryb.php',
            {inputVL: inputVL},
            function(res){
                var result = $(res).find('p:first').html();
                $("#container").html(result );
            }
        ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:16:25.763

如果你返回 json 而不是 html 你可以这样做。

```
 $.post(
            'includes/studiesAjax/addTryb.php',
            {inputVL: inputVL},
            function(res){
                var data = JSON.parse(res);
                if(data && data.response1){
                    result = (data.response1);
                    console.log(result);
                }
                if(data && data.response2)
                    $("#container").html(data.response2);
            }
        ); 
```

# python - Python：为什么以下 xpath 返回空列表？

> ID：11826263
> 
> 赞同：0
> 
> 时间：2012-08-06T10:11:02.833
> 
> 标签：python, xpath, lxml

我正在尝试从中提取一些文本和链接`instapaper.com`。所以我使用以下代码来完成工作：

```
>>> import lxml.html as lh
>>> doc = lh.parse("http://www.instapaper.com/u/folder/1227370/programming")
>>> text = doc.xpath(".//*[@id='bookmark_list']/*/div[3]/a/text()")
>>> len(text)
0
>>> text
[] 
```

如您所见，它返回一个空列表，这意味着它无法找到与上述 xpath 匹配的任何文本。

`xpath expr`现在，当我在 firebug/firepath 中使用上述内容时，它可以正常工作。

![在此处输入图像描述](../Images/528535c056e522c479d7c8d026dfe391.png)

您可以在上面显示的图像中看到`40 matching nodes`。

所以，我的问题是为什么上面的 xpath 表达式不适用于 python/lxml。

根据要求[的 Instapaper 页面源](http://pastebin.com/1WpFAfCt)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T10:15:18.277

没有 ID 的元素`bookmark_list`。也许您必须登录。

**编辑**

解析它工作的*真实*HTML：

```
doc = lh.parse("http://pastebin.com/raw.php?i=1WpFAfCt")
text = doc.xpath("//*[@id='bookmark_list']/*/div[3]/a/text()")
len(text) # => 40 
```

# c# - 如何使用asp.net显示sql进程

> ID：11826266
> 
> 赞同：0
> 
> 时间：2012-08-06T10:11:08.627
> 
> 标签：c#, asp.net, .net, sql

我使用 asp.net 开发了一个计算。根据某些过程，它得到了一些时间。（读取 sql 数据的 Bcoz）。

我想在 sql 进程运行时将 sql 数据（例如：用户 id）加载到 asp.net 页面。我尝试使用 label 执行此操作。但它不起作用。

换句话说，我正在尝试进行实时数据加载。这可能吗？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:32:02.480

是的，它可能只是您需要在 web.config 文件中添加代码并运行应用程序，它会在页面渲染后提示您加载时间（基于每页）。向下滚动鼠标并获取详细信息。

```
 <system.web>

        <trace pageOutput="true" requestLimit="10" enabled="true" localOnly="true"        traceMode="SortByTime" mostRecent="true"/>

</system.web> 
```

注意：您需要在您的 web.config 文件中已经存在的 system.web 中编写代码的跟踪部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:19:23.960

通过此查询，我想您可以选择所需的数据：

```
SELECT   st.text, r.session_id, r.status, r.command, r.cpu_time, r.total_elapsed_time
FROM sys.dm_exec_requests r
CROSS APPLY sys.dm_exec_sql_text(sql_handle) AS st 
```

如果您知道所需的会话 ID，您可以添加到查询中：

`WHERE r.session_id = <spid number>`

这`<spid number>`是您的会话 ID。

# java - Java 单词生成算法

> ID：11826267
> 
> 赞同：1
> 
> 时间：2012-08-06T10:11:14.633
> 
> 标签：java, algorithm, word, generator

我想创建一个单词生成器，但在某种程度上它几乎看起来像一个数字系统。十六进制从`0`to `f`，这个算法应该从`a`to `z`。所以创建的词是这样的（每个都`-`意味着一个新词）：

```
a - b - c - d - ... - z - aa - ab - ac - ad - ... - ba - bb - bc - ... 
```

例如，每个单词都存储在一个文件中，因此该文件将显示为：

```
a  
b  
c  
d  
...  
z  
aa  
ab  
ac  
... 
```

我认为这可以通过很多嵌套`for`循环和`if`s 来实现，但是有没有更简单的方法来做到这一点？您不必告诉我整个算法，但非常感谢您朝正确方向轻推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:20:08.493

如果您正在寻找创建单个随机单词，请按照以下步骤操作：

1.  填充字符数组：`char[] arr = { 'a', 'b', ... , 'z'}`
2.  获取表示字符串大小的随机整数。
3.  初始化一个空字符串`s`
4.  从 0 迭代到绘制的长度，在`[0,arr.length)`let it be范围内绘制一个数字`x`，然后附加`arr[x]`到 string `s`。

如果您正在寻找所有可能性，那么您正在寻找所有[组合](http://en.wikipedia.org/wiki/Combination)，我认为最简单的方法是使用递归。这个想法是“猜测”第一个字符，并在字符串的后缀上运行递归 - 对第一个字符的所有第一个可能性重复此操作，你会得到所有组合。

伪代码：

```
getCombinations(set,idx,length,current):
  if (idx == length):
    set.add(copy(current))
    return
  for each char c:
    current[idx] = c //setting the next char
    getCombinations(set,idx+1,length,current) //invoking recursively on smaller range 
```

调用`getCombinations([],0,length,arr)`where`[]`是一个空集，它将保存结果，`length`是生成的组合的长度，并且`arr`是一个空数组。
要获得更小的组合，`length`您可以在过程中添加子字符串或使用更小的调用`length`。

注意组合的数量在词的长度上是指数级的，所以会消耗很多时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:30:21.190

我不知道您是否可以使用任何随机整数函数库。但是，我给你一个基于此的简单伪代码：

```
1) Generate a Random Number I from 1 to 10.
2) For J = 0 to I
byte array[j] =  (byte) Generate a Random Number from 0 to 128.
3) For J = 0 to I
String st = st + (char) byte array[j] 
```

字符串将是一个随机单词。简单的。但是，不知道能不能接受。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T10:21:31.563

创建一个将整数映射到字符序列的函数。IE：

```
 0  -> a
 1  -> b
 ...
 26 -> aa 
```

等等。您可以使用它来迭代地创建特定单词或单词列表。

在您的算法中，您将`%26`大量使用模数……</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T11:15:15.207

```
 final char[] tabC = "abcdefghijklmnopqrstuvwxyz".toCharArray();
    for (final char c1 : tabC) {
        System.out.println(c1 + "\t" + c1);
        for (final char c2 : tabC) {
            System.out.println(Character.toString(c1)
                + Character.toString(c2) + "\t" + (c1 + (c2 << 6)));
        }
    } 
```

只需验证 <<6 是否足以避免冲突（必须为一个字符串使用字符串）

输出

```
a   97
aa  6305
ab  6369
ac  6433
. . .
ar  7393
as  7457
az  7905
b   98
ba  6306
bb  6370
bc  6434
bd  6498
. . . 

rz  7922
s   115
sa  6323
sb  6387
sc  6451
sd  6515
se  6579 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-20T05:10:20.460

这是一个输出前 1000 个单词的实现：

```
for (int n = 0; n < 1000; n++) {
   String s = Long.toString(n, 26);
   StringBuilder word = new StringBuilder();
   for (int i = 0; i < s.length(); i++) {
       int value = Character.digit(s.charAt(i), 26);
       // if it is not the right most caracter, then '1' is map to 'a', if not,
       // '0' is map to 'a'
       value = value + (i < s.length() - 1 ? -1 : 0);
       word.append(Character.toChars('a' + value)[0]);
   }
   System.out.println(n + " -> " + word.toString());
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T10:28:05.413

假设您知道列表的长度，并且“单词”再次具有随机长度且完全随机。然后，您可以执行以下操作（它打印单词，您可以将它们写在文件上）：

```
import java.util.Random;
...
String alphabet = "qwertyuioplkjhgfdsazxcvbnm";
Random r = new Random();

for(int i = 0; i < list_length; i++) {
  int word_size = r.nextInt(word_max_length);
  String word = "";
  for(int j = 0; j < word_size; j++) {
    word += alphabet.charAt(r.nextInt(alphabet.length()));
  }
  System.out.println(word);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T10:19:08.007

**轻推服务：**

对的，这是可能的。您运行单个 for 循环，然后将每个计数器值转换为以 26 为基数。然后新数字中的每个数字都将编码一个字母。请参阅[此处](http://rachel5nj.tripod.com/NOTC/convertingbases.html)了解如何将数字转换为任意基数。（对不起广告溢出页面）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-06T10:19:53.890

你需要定义你的话有多长，否则这将是无限的。

这在数学中称为组合数学，看看[这里](http://www.martinbroadhurst.com/combinatorial-algorithms.html)你可以选择适合你需要的算法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-06T11:24:30.210

我会这样做：

输入 n - 要生成的单词数，[I,J] - 单词长度的范围。

算法：

*   做n次：

    *   i <- I 和 J 之间的随机数。
    *   做 i 次：(0 <= j <= i-1)
        *   Word[j] = 'a' 和 'z' 之间的随机字符
    *   将 Word 添加到结果中
*   返回结果

# c# - 在代码隐藏中的 DataTemplate 中查找 WPF 元素

> ID：11826272
> 
> 赞同：20
> 
> 时间：2012-08-06T10:11:52.513
> 
> 标签：c#, wpf, xaml, datatemplate, bar-chart

我有一个数据模板

```
<Window.Resources>
         <DataTemplate x:Key="BarChartItemsTemplate">
         <Border Width="385" Height="50">
            <Grid>
               <Rectangle Name="rectangleBarChart" Fill="MediumOrchid" StrokeThickness="2" Height="40" Width="{Binding}" HorizontalAlignment="Right" VerticalAlignment="Bottom">
                  <Rectangle.LayoutTransform>
                     <ScaleTransform ScaleX="4"/>
                  </Rectangle.LayoutTransform>
               </Rectangle>
               <TextBlock Margin="14" FontWeight="Bold" HorizontalAlignment="Right" VerticalAlignment="Center" Text="{Binding}">
                  <TextBlock.LayoutTransform>
                     <TransformGroup>
                        <RotateTransform Angle="90"/>
                        <ScaleTransform ScaleX="-1" ScaleY="1"/>
                     </TransformGroup>
                  </TextBlock.LayoutTransform>
               </TextBlock>
            </Grid>
         </Border>
      </DataTemplate>
  </Window.Resources> 
```

我在表格上有一个按钮。我需要从 dataTemplate 更改矩形的比例（scaleTransform）。我应该如何访问上述按钮的 Button_Click 事件中的 'rectangleBarChart' 元素？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-06T10:30:48.060

我在我的 WPF 程序中经常使用这个函数来查找子元素：

```
public IEnumerable<T> FindVisualChildren<T>(DependencyObject depObj) where T : DependencyObject
{
   if (depObj != null)
   {
       for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
       {
           DependencyObject child = VisualTreeHelper.GetChild(depObj, i);

           if (child != null && child is T)
               yield return (T)child;

           foreach (T childOfChild in FindVisualChildren<T>(child))
               yield return childOfChild;
       }
   }
} 
```

用法：

```
foreach (var rectangle in FindVisualChildren<Rectangle>(this))
{
  if (rectangle.Name == "rectangleBarChart")
  {
    /*   Your code here  */
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T17:14:07.943

不*要这样做*。如果您需要更改 a 中的某些内容，`DataTemplate`则绑定相应的属性并修改基础数据。另外，我建议将其绑定`Button.Command`到`ICommand`您的数据/视图模型（请参阅 MVVM）上，而不是使用事件，这样您就已经处于正确的上下文中并且视图不需要做任何事情。

# ruby-on-rails - Travis CI "rake db:migrate" 或 "rake db:test:prepare" 导致 rake 中止！PG::Error: 错误: 关系“设置”不存在

> ID：11826273
> 
> 赞同：0
> 
> 时间：2012-08-06T10:11:57.217
> 
> 标签：ruby-on-rails, postgresql, testing, rake, travis-ci

相关的 travis-ci 构建位于： [http ://travis-ci.org/#!/NZOI/nztrain/builds/2046207](http://travis-ci.org/#!/NZOI/nztrain/builds/2046207)

此时 db:migrate 或 db:test:prepare 命令都不起作用。我已经检查了 db/schema.rb 文件是否存在，所以它应该能够将模式加载到数据库中。

Github 代码也可从[https://github.com/NZOI/nztrain/tree/a710ef72089ae589a53a7ca0187f73e7f9bf4cc0获得](https://github.com/NZOI/nztrain/tree/a710ef72089ae589a53a7ca0187f73e7f9bf4cc0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T23:25:21.060

由以下原因引起的错误：

*   耙分贝：？？？运行初始化程序
*   初始化程序访问一个表，提取存储在名为“设置”的数据库表中的设置
*   travis-ci 开始时在 db 中没有任何表

因为初始化程序在 db:?? 创建表有更改，发生错误

# web-applications - 必须先查看免责声明页面

> ID：11826282
> 
> 赞同：0
> 
> 时间：2012-08-06T10:12:43.860
> 
> 标签：web-applications

我正在创建一个名为 www.test.com 的网站来解释我的问题。当人们访问 www.test.com 时，他们会被提示一个免责声明页面，他们必须接受该页面才能进入该网站。

如果有人访问了 www.test.com/page5，那么在他们查看第 5 页之前，他们将在查看第 5 页之前转到免责声明页面。然后他们可以自由查看他们喜欢的任何页面，除非他们关闭浏览器。

我的问题是如何让他们在看到其他页面之前先被转移到免责声明页面？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:33:21.567

使用会话。

在免责声明之后按“确定”在会话中填充一个键。在每个请求上检查该密钥。如果找不到密钥，则重定向到免责声明页面。

检查密钥的一种简单方法是使用过滤器。

我建议一些基本的阅读。尝试有关 Sessions（计算机科学）的维基百科或一些详细的教程，例如 -

[Servlet 和会话教程](http://en.wikipedia.org/wiki/Session_%28computer_science%29)
[Php Sessions 教程](http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Session-Tracking.html)

# php - 如何使用下拉列表将两个表连接到表上？

> ID：11826284
> 
> 赞同：0
> 
> 时间：2012-08-06T10:12:50.290
> 
> 标签：php, mysql

我想将这两个表连接到一个表中。年和月，在下拉列表中。是不是像

```
year-month
0-1
1-2
1-3 
```

是否可以在 mysql 查询中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:18:52.217

```
SELECT
  CONCAT( a.year, '-', b.month ) AS year_month
FROM
  year_table a,
  month_table b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:15:37.787

你的意思是这样吗？

```
select concat(a.yearNo,'-',b.monthNo) as yearMonth from table1 a, table2 b where a.someID=b.someID 
```

# sqlite - SQL SELECT 两个表的多个 SUM

> ID：11826290
> 
> 赞同：0
> 
> 时间：2012-08-06T10:13:26.047
> 
> 标签：sqlite, sum, multiple-tables

我有两个 SQLite 表：

锻炼：

```
WorkoutID   WorkoutDate
1           25.01.2012
2           19.04.2012 
```

锻炼练习：

```
ExerciseID   WorkoutID   Muscles    Exercise            Set1_Rep    Set1_W      Set2_Rep    Set2_W
1            1           Abdominals Crunches            20          72,00       22          72,00
2            1           Abdominals Decline Crunch      25          72,00       25          72,00
3            1           Chest      Decline Push-Up     12          50,00       10          55,00
4            1           Chest      Chain Press         10          55,00       10          60,00
5            1           Chest      Machine Bench Press 14          45,00       12          50,00
6            2           Biceps     Drag Curl           18          35,00       16          40,00
7            2           Biceps     Hammer Curls        10          60,00       10          65,00
8            2           Biceps     Preacher Curl       12          35,00       12          40,00
9            2           Biceps     Spider Curl         11          50,00       10          50,00
10           2           Neck       Chin To Chest Stretch   20      72,00       20          72,00 
```

我想为每个`WorkoutDate`and显示`Muscles`练习总数、代表总数和总重量，如下所示：

```
25.01.2012
Abdominals: 2 exercises
92 reps, 288 lbs
Chest: 3 exercises
68 reps, 315 lbs

19.04.2012
Biceps: 4 exercises
99 reps, 375 lbs
Neck: 1 exercise
40 reps, 144 lbs 
```

我得到了每个肌肉群的次数和重量的总和：

```
SELECT Muscles, 
SUM(Set1_Rep)+SUM(Set2_Rep)+SUM(Set3_Rep)+SUM(Set4_Rep)+SUM(Set5_Rep) AS [Reps], SUM(Set1_W)+SUM(Set2_W)+SUM(Set3_W)+SUM(Set4_W)+SUM(Set5_W) AS [Weight] 
FROM WorkoutExercises
GROUP BY Muscles 
```

如何计算每天 (WorkoutDate) 每个肌肉群 (Muscles) 的锻炼次数 (Exercise)？

# javascript - javascript更改多个输入onclick的类

> ID：11826292
> 
> 赞同：0
> 
> 时间：2012-08-06T10:13:42.927
> 
> 标签：javascript, css, class, onclick

我想在 onclick 时更改我的表单的某些输入的类，该类具有 class='mypost_title'。

我试过了，但它不起作用

```
<a href='' onclick='popup_mypost(e)'>change me</a>
<a href='' id=edit-href onclick='popup_mypost(e)'>back me</a>

<script>
    function popup_mypost(e) 
    {
        var inputs = document.getElementsByClassName("mypost_title");
        for(var i = 0; i < inputs.length; i++) 
            {
            inputs[i].className = "change";
            }

        var edit_href = document.getElementById("edit-href");
        edit_href.onclick = function()
        {
            var inputs = document.getElementsByClassName("change");
            for(var i = 0; i < inputs.length; i++) 
                {
                inputs[i].className = "mypost_title";
                }
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:15:34.813

该方法是`getElementsByClassName`-即，您错过了一个`s`！

文档：[https ://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:18:09.740

对于 jQuery 方法，请参阅下面的代码。我个人觉得这更容易阅读和理解。这也将完全跨浏览器工作！

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>

$(document).ready(function() {
    $(".mypost_title").each(function() {
        $(this).addClass("change");
    });
});

</script> 
```

我已经快速检查了跨浏览器的兼容性，`getElementsByClassName`结果非常令人惊讶。IE8及以下不支持！请在此处查看此表进行[测试](http://caniuse.com/getelementsbyclassname)。

* * *

**编辑**

我猜测你在这里寻找什么。这是我的解释：

当单击这些 div 之一时，您想将类添加到单击的类并从所有其他类中`change`删除该类吗？`change`

在这种情况下，你会这样做：

```
//This focus event will fire when the user "focuses" on an input
$(".mypost_title").focus(function() {
    $(this).removeClass("mypost_title");
    $(this).addClass("change");
});

//This blur event will fire when the user clicks outside the input, or tabs out etc
$(".mypost_title").blur(function() {
    $(this).removeClass("change");
    $(this).addClass("mypost_title");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:15:54.733

更改此行并尝试：

`var inputs = document.getElementsByClassName("mypost_title");`

# .net - 使用 UCMA 的 Lync 客户端实施

> ID：11826293
> 
> 赞同：1
> 
> 时间：2012-08-06T10:13:48.387
> 
> 标签：.net, lync-2010

我是 Lync 开发的新手。是否可以为 Lync 2010 实现简单的 .NET 控制台客户端，允许我使用 UCMA 3.0 开始音频对话？问题是我无法直接访问 Lync 服务器机器。我只能以客户端身份登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:46:55.083

您可以轻松地开始为 Lync 进行开发，您所需要的只是深入了解 .NET 语言，例如 C# - Microsoft Visual Studio 2010 - Microsoft Lync SDK 2010 - UCMA 3.0 API

您可以使用以下链接，它是使用 UCMA [http://msdn.microsoft.com/en-us/library/hh364906.aspx的快速入门示例](http://msdn.microsoft.com/en-us/library/hh364906.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:41:11.050

绝对有可能。示例应用程序非常宝贵（尤其是 InstantMessagingBot）。您将创建一个 UserEndpoint 而不是 ApplicationEndpoint，并使用 ClientPlatformSettings 而不是 ServerPlatformSettings。

以下两本书也是很好的参考 [http://www.amazon.com/Professional-Communications-Development-Microsoft-Programmer/dp/0470939036](https://rads.stackoverflow.com/amzn/click/com/0470939036) [http://www.amazon.com/Programming-Uni​​fied -Communications-Microsoft% C2%AE-Office/dp/B008SM2EHE/ref=sr_1_2?s=books&ie=UTF8&qid=1363286031&sr=1-2&keywords=programming+for+unified+communications](https://rads.stackoverflow.com/amzn/click/com/B008SM2EHE)

如果您在 Google 上搜索标题 + pdf，则可以免费获得第二个 PDF。它适用于 UCMA 2.0，但它仍然是有用的信息。

# php - 如何在php中进行服务器端身份验证

> ID：11826296
> 
> 赞同：1
> 
> 时间：2012-08-06T10:14:15.187
> 
> 标签：php, authentication

![服务器认证](../Images/8013b9e09413878eb0db0a0869aeab18.png)

如何在 PHP 中进行上述身份验证。我已经在 php 中进行了自己的身份验证，但是如何在上述类型的登录屏幕中进行身份验证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:24:25.920

您可以在 PHP 中执行此操作，而不是使用 Apache：http: [//php.net/manual/en/features.http-auth.php](http://php.net/manual/en/features.http-auth.php)

`$_SERVER['PHP_AUTH_USER']`基本上，您在 and 中有可用的用户名和密码`$_SERVER['PHP_AUTH_PW']`，您可以使用它们在数据库或其他任何地方查找用户。

一个基本的例子，来自 php.net：

```
if (!isset($_SERVER['PHP_AUTH_USER'])) {
    header('WWW-Authenticate: Basic realm="My Realm"');
    header('HTTP/1.0 401 Unauthorized');
    echo 'Text to send if user hits Cancel button';
    exit;
} else {
    echo "<p>Hello {$_SERVER['PHP_AUTH_USER']}.</p>";
    echo "<p>You entered {$_SERVER['PHP_AUTH_PW']} as your password.</p>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:23:37.753

试试下面的教程。

[http://www.howtoforge.com/htaccess_authentication](http://www.howtoforge.com/htaccess_authentication)

[http://www.askapache.com/htaccess/apache-authentication-in-htaccess.html](http://www.askapache.com/htaccess/apache-authentication-in-htaccess.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T11:23:42.907

该身份验证由 Apache 控制，而不是 PHP。

看看这个教程：[http ://www.seochat.com/c/a/Search-Engine-Optimization-Help/Apache-Basic-User-Authentication-htpasswd-Tutorial-for-SEO/](http://www.seochat.com/c/a/Search-Engine-Optimization-Help/Apache-Basic-User-Authentication-htpasswd-Tutorial-for-SEO/)

# qt - qt - qml 性能

> ID：11826301
> 
> 赞同：1
> 
> 时间：2012-08-06T10:14:25.623
> 
> 标签：qt, qml, qt5

我在我的设备上使用 Qt 4.7.1 lighthouse。当我创建一个包含大量常规[Text](http://qt-project.org/doc/qt-4.8/qml-text.html)元素的 qml 应用程序时，加载应用程序需要很长时间（几分钟）。文本是常规文本，没有特殊格式或字体。

我想知道他们是否有任何方法可以减少上传时间，因为我想创建一个更复杂的 qml 应用程序，带有复杂的小部件。

我知道 Qt 5 应该改进 qml 的使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:49:13.383

您可以做的一件事是至少显示窗口等，而加载是使用[加载器元素](http://doc-snapshot.qt-project.org/4.8/qml-loader.html)并将较慢对象的加载延迟到稍后（在显示窗口等之后）。

此外，您可能会考虑使用 ListView 之类的东西而不是直接文本元素，因为它旨在以更快的方式处理大量项目的显示。

# javascript - 如何使 JSON 数组唯一

> ID：11826302
> 
> 赞同：4
> 
> 时间：2012-08-06T10:14:29.807
> 
> 标签：javascript, jquery, arrays, json, dojo

> **可能重复：**
> [数组唯一值](https://stackoverflow.com/questions/3308257/array-unique-values)
> [使用 jQuery 从 JSON 数组中获取唯一结果](https://stackoverflow.com/questions/6680430/get-unique-results-from-json-array-using-jquery)

我有一个这样的 JSON 字符串

```
[
 Object { id="38",product="foo"},
 Object { id="38",product="foo"},
 Object { id="38",product="foo"},
 Object { id="39",product="bar"},
 Object { id="40",product="hello"},
 Object { id="40",product="hello"}

] 
```

这个 JSON 数组中有重复的值。我怎样才能让这个 JSON 数组像这样独一无二

```
[
 Object { id="38",product="foo"},
 Object { id="39",product="bar"},
 Object { id="40",product="hello"}
] 
```

.我正在寻找使用较少迭代的建议， `Jquery $.inArray`在这种情况下不起作用。

欢迎提出使用任何第三方库的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T10:20:29.133

您可以使用[下划线的 uniq](http://underscorejs.org/#uniq)。

在您的情况下，您需要提供一个迭代器来提取“id”：

```
array = _.uniq(array, true /* array already sorted */, function(item) {
  return item.id;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T10:44:18.040

```
// Assuming first that you had **_valid json_**
myList= [
    { "id":"38","product":"foo"},
    { "id":"38","product":"foo"},
    { "id":"38","product":"foo"},
    { "id":"39","product":"bar"},
    { "id":"40","product":"hello"},
    { "id":"40","product":"hello"}
];

// What you're essentially attempting to do is turn this **list of objects** into a **dictionary**.
var newDict = {}

for(var i=0; i<myList.length; i++) {
    newDict[myList[i]['id']] = myList[i]['product'];
}

// `newDict` is now:
console.log(newDict);
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T10:17:47.993

检查以下 SO 问题中的解决方案：

[使用 jQuery 从 JSON 数组中获取唯一结果](https://stackoverflow.com/questions/6680430/get-unique-results-from-json-array-using-jquery)

您必须遍历数组并创建一个包含唯一值的新数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T10:19:06.073

您可以轻松地自己编写代码。从我的脑海中浮现在脑海中。

```
var filtered = $.map(originalArray, function(item) {
    if (filtered.indexOf(item) <= 0) {
        return item;
    }
}); 
```

或者如建议的更有效的算法，专门针对手头的情况：

```
var helper = {};
var filtered = $.map(originalArray, function(val) {
    var id = val.id;

    if (!filtered[id]) {
        helper[id] = val;
        return val;
    }
});
helper = null; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T10:21:08.210

您可能必须循环删除重复项。如果存储的项目如您所建议的那样有序，则只需一个循环即可：

```
function removeDuplicates(arrayIn) {
    var arrayOut = [];
    for (var a=0; a < arrayIn.length; a++) {
        if (arrayOut[arrayOut.length-1] != arrayIn[a]) {
            arrayOut.push(arrayIn[a]);
        }
    }
    return arrayOut;
} 
```

# safari - Umbraco - Safari - TinyMCE removes style

> ID：11826310
> 
> 赞同：1
> 
> 时间：2012-08-06T10:15:00.697
> 
> 标签：safari, tinymce, umbraco, html

I have a problem with the tinyMCE editor in the Umbraco backoffice with Safari 5.1.7. When I create a new node, put some text in bold or italic and I click Save & Publish, it's fine. But when I go back to my node and publish it again, these elements are remove and I only have simple text.

So the saved text isn't well loaded in the editor. Here is what I have before publishing the first time :

```
<p><strong><em>Hello !</em></strong></p> 
```

here what is loaded :

```
<p><span class="Apple-style-span"><span class="Apple-style-span">Hello !</span>    </span></p> 
```

(the text in the textarea is in bold and italic).

Is there a solution to avoid this problem ? I don't have this issue with Chrome, Firefox, Opera or IE.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T23:29:28.380

It appears this is a known issue in version 4.5.2 and perhaps 4.6.1\. This CodePlex issue that looks like your problem (http://umbraco.codeplex.com/workitem/28860) doesn't have a fix version. I would go and vote it up.

There was a Safari TinyMCE issue fixed in version 4.8 so it may be worth trying that version and see if it still exists. (http://umbraco.codeplex.com/workitem/30194)

# c++ - 何时使用 C 浮点比较函数？

> ID：11826314
> 
> 赞同：36
> 
> 时间：2012-08-06T10:15:16.420
> 
> 标签：c++, c, c++11

在最新的 C++ 标准中，我注意到以下宏：

```
bool isgreater(float x, float y);
bool isgreaterequal(float x, float y);
bool isless(float x, float y);
bool islessequal(float x, float y);
bool islessgreater(float x, float y);
bool isunordered(float x, float y); 
```

这些宏来自 C（7.12.14 和 7.12.14）。

那么，为什么有人会使用这些宏而不是运算符呢？这些宏有什么特别之处吗（比如检查`inf`），或者它们与对应的运算符相同吗？

C++ 示例：

```
#include <iostream>
#include <cmath>

int main()
{
  float x=0.2;
  float y=0.5;
  std::cout << x << " < " << y << " : " << std::boolalpha << std::islessequal( x, y ) << std::endl;
  std::cout << x << " < " << y << " : " << std::boolalpha << ( x <= y ) << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-06T10:18:27.107

与关系运算符不同，这些宏实际上只返回一个布尔值，并且从不引发任何浮点异常。

简而言之：您只需要处理`true`/`false`就不需要别的了。

* * *

*参考资料*：

**Open Group**描述（*不是 C 或 C++ 标准，但与 Unix/Linux 世界高度相关，几乎总是与标准相似*）：

*   [http://pubs.opengroup.org/onlinepubs/009695399/functions/islessgreater.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/islessgreater.html)
*   [http://pubs.opengroup.org/onlinepubs/009695399/functions/isgreater.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/isgreater.html)
*   [http://pubs.opengroup.org/onlinepubs/009695399/functions/isgreaterequal.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/isgreaterequal.html)
*   [http://pubs.opengroup.org/onlinepubs/009695399/functions/isless.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/isless.html)
*   [http://pubs.opengroup.org/onlinepubs/009695399/functions/islessequal.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/islessequal.html)
*   [http://pubs.opengroup.org/onlinepubs/009695399/functions/islessgreater.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/islessgreater.html)
*   [http://pubs.opengroup.org/onlinepubs/009695399/functions/isunordered.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/isunordered.html)

**C++**标准：

> ### C 库 [c.math]：
> 
> 分类/比较函数与 C 标准中 7.12.3，分类宏和 7.12.14，比较宏中定义的相应名称的 C 宏相同。每个函数都为三种浮点类型重载，如下 [...]

**C**标准：

> ### 7.12.14 比较宏
> 
> [...] 对于任何有序的数值对，其中一个关系——小于、大于和等于——是正确的。当参数值为 NaN 时，关系**运算符**可能会引发“无效”浮点异常。**对于一个 NaN 和一个数值，或者对于两个 NaN，只有无序关系是 true**。以下子条款提供了关系运算符的安静（非浮点异常引发）版本的宏，以及其他比较宏，这些宏有助于**编写有效的代码来解释 NaN 而不会遭受“无效”浮点异常**。在本小节的概要中，real-floating 表示参数应为实浮点类型的表达式。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-06T10:22:01.037

`isgreater`等。从 C99 并入 C++11。`x`它们被定义为在和/或`y`信号`NaN`值时不引发无效浮点异常。

给出的理由是：

> 此宏是关系运算符的安静（非浮点异常引发）版本。它有助于编写有效的代码来解释 NaN，而不会遭受无效的浮点异常。

宏 on 的数值`NaN`和往常一样；`NaN`values 将 false 与所有其他值进行比较，包括`NaN`所有关系运算符和新宏下的值。

# android - 一旦用户在模拟器/设备上的 Twitter 中输入了他的凭据，如何绕过在 Twitter 应用程序中输入用户凭据？

> ID：11826316
> 
> 赞同：1
> 
> 时间：2012-08-06T10:15:17.630
> 
> 标签：android, android-twitter

我已经在我的设备上安装了 Twitter 并输入了我的用户凭据（即，我已经登录了 Twitter）。我想创建一个应用程序，仅当我没有在我的设备/模拟器上登录 Twitter 时才询问我的凭据。如果我已经登录，它应该通过询问我的用户凭据。我想知道是否有任何方法可以做到这一点。你能在这方面帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:36:25.900

我之前没有任何使用 Twitter 的经验，我不知道 Twitter 是否允许这样做，但这里有一个值得研究的想法：

我假设成功登录后，Twitter 应该返回一个身份验证令牌。您应该找到 Twitter 在您的手机上保存此令牌的位置。然后，当您想从您的个人应用程序登录时，请使用该令牌。如果令牌有效（未过期），您无需输入用户名/密码即可进行身份验证，否则您需要输入用户名和密码，并因此更新令牌。

这只是一个想法，也许有更简单的方法来实现这一点......

# asp.net-mvc-3 - mvc3中的会话ID更改

> ID：11826319
> 
> 赞同：1
> 
> 时间：2012-08-06T10:15:23.920
> 
> 标签：asp.net-mvc-3

我创建了一个 mvc3 razor 测试应用程序并有管理区域为什么会话 id 从默认区域的控制器更改时我重定向到索引到管理区域，在哪里更改会话 id？

我通过这种语法在默认控制器和管理区域控制器中的操作结果方法中获取会话 ID

我在两个控制器中都使用了这种方法

```
 public ActionResult Index()
        {

            string se = System.Web.HttpContext.Current.Session.SessionID;

        return view()
      } 
```

如何防止更改会话 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-28T14:45:43.017

这是旧的，但简单的答案是：

你必须在Session中存储一些东西，只需在其中添加一些东西以保留SessionID

对于其他人谷歌搜索这个:)

# android - Zxing 条码库支持android 吗？

> ID：11826323
> 
> 赞同：0
> 
> 时间：2012-08-06T10:15:35.343
> 
> 标签：android, zxing

我对 android 中的 zxing 库对条形码类型的支持有点困惑，所以请在这里给我建议。

这是条形码的类型

Aztec 2D、QR 2D 代码、1D 代码 128b、2D 矩阵 (ECC 200)

我想在应用程序中提供支持，那么 zxing 是否支持上述所有这些？或任何其他免费的第三方库可用于

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:20:27.543

> ZXing（读作“斑马线”）是一个开源的、多格式的一维/二维条码图像处理库，用 Java 实现，可移植到其他语言。我们的重点是使用手机上的内置摄像头扫描和解码设备上的条形码，而无需与服务器通信。但是，该项目也可用于对台式机和服务器上的条形码进行编码和解码。我们目前支持以下格式：

```
UPC-A and UPC-E
EAN-8 and EAN-13
Code 39 

Code 93
Code 128
ITF 

Codabar
RSS-14 (all variants)
QR Code 

Data Matrix
Aztec ('beta' quality)
PDF 417 ('alpha' quality) 
```

[http://code.google.com/p/zxing/](http://code.google.com/p/zxing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:20:48.820

使用 Zxing`IntentIngegrator`将 Zxing 集成到您的项目中。此链接可能会有所帮助 - [http://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

您将在页面底部找到测试项目。

此代码`IntentIntegrator`将扫描任何支持的内容。

```
 /* Code copied from ZxingTestActivity */
 private final Button.OnClickListener scanAnything = new Button.OnClickListener() {
    @Override
    public void onClick(View v) {
      IntentIntegrator integrator = new IntentIntegrator(ZXingTestActivity.this);
      integrator.initiateScan();
    }
  }; 
```

# python - Heroku 中的 Django 错误：“请提供 ENGINE 值”

> ID：11826326
> 
> 赞同：10
> 
> 时间：2012-08-06T10:15:46.200
> 
> 标签：python, django, heroku

我阅读并应用了“Heroku 上的 Django 入门”教程，但在同步 db 时遇到了问题：

```
raise ImproperlyConfigured("settings.DATABASES is improperly configured." 
django.core.exceptions.ImproperlyConfigured: 
settings.DATABASES is improperly configured. Please supply the ENGINE value. 
```

我阅读[了请提供 ENGINE 值 Django 数据库配置](https://stackoverflow.com/questions/11457441/please-supply-the-engine-value-django-database-configuration)和[“settings.DATABASES 配置不正确”错误，使用 django 1.4 执行 syncdb](https://stackoverflow.com/questions/10228618/settings-databases-is-improperly-configured-error-performing-syncdb-with-djang)但仍然收到相同的错误。执行时

```
heroku run python manage.py --settings=moz455.settings syncdb 
```

我收到错误“未知命令：'--settings=moz455.settings'”。如何解决这个问题呢？

Django 的版本是 1.4。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T23:55:36.953

我遇到了同样的问题，但显然是出于不同的原因。在[https://devcenter.heroku.com/articles/django#prerequisites](https://devcenter.heroku.com/articles/django#prerequisites)的 Heroku 文档中，它说要添加以下内容`settings.py`：

```
DATABASES['default'] =  dj_database_url.config() 
```

你可以传入一个参数：

```
DATABASES['default'] =  dj_database_url.config(default='postgres://user:pass@localhost/dbname') 
```

这将使您能够在本地和 Heroku 上进行开发。实际上解决我遇到的问题的部分是 DATABASE_URL 的 Heroku 配置环境变量实际上没有设置。为了设置这个，我跑了

```
$ heroku config 
```

我看到分配给单独配置变量的数据库 URL。所以我创建了一个新变量：

```
$ heroko config:add DATABASE_URL={#the database url} 
```

这解决了我的问题。我希望它可以帮助其他有类似问题的人。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-26T08:38:59.717

在此处尝试所有答案并验证 DATABASE_URL 存在后，没有任何效果。

我添加了第二行并且它有效

```
DATABASES['default'] = dj_database_url.config() <--- heroko docs says this is enough
DATABASES['default']['ENGINE'] = 'django.db.backends.postgresql_psycopg2' <---- add this 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-10T17:25:04.150

确保您已正确安装和设置数据库插件。请参阅[https://devcenter.heroku.com/articles/database#no-dev-database-or-no-database-url](https://devcenter.heroku.com/articles/database#no-dev-database-or-no-database-url)

我运行以下命令来解决这个问题：

```
heroku addons:add heroku-postgresql
heroku pg:promote HEROKU_POSTGRESQL_CYAN 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T12:37:12.277

自己解决了：在 manage.py 添加类似这样的代码：

```
CurDir = os.path.dirname(os.path.abspath(__file__))
ProjectDir = os.path.join(CurDir, "moz455")
sys.path += [ProjectDir] 
```

并使用以下命令提交更改：

```
git add -A
git commit -m "commit"
git push -f heroku 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T10:40:51.283

尝试不同的顺序：

```
heroku run python manage.py syncdb --settings=moz455.settings 
```

manage.py 命令如下所示：

```
manage.py <command> <options> 
```

但你像这样使用它：

```
manage.py <options> <command> 
```

您的其他问题（缺少 ENGINE 设置）可能是由于在 syncdb 命令执行期间使用了不正确的设置文件。以上也应该解决它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T20:44:48.910

有点晚了；但是您只需删除所有默认的 django 数据库设置行；并添加heroku的。

它会正常工作

** 编辑 ** 或者你可以简单地使用`socket.gethostname()。

例子 ：

```
if socket.gethostname() == 'xx':
    DATABASE_SETTINGS ={ }

elif socket.gethostname() == 'xxx':
    another database settings... 
```

因此您可以在多个主机下运行您的项目。

# java - 解析 Google Fusion Table JSON

> ID：11826329
> 
> 赞同：0
> 
> 时间：2012-08-06T10:15:55.687
> 
> 标签：java, json, google-fusion-tables

我有测试表，当通过 SQL 查询 URL 检索时给出：

```
{
 "kind": "fusiontables#sqlresponse",
 "columns": [
  "index",
  "name",
  "latitude",
  "longitude",
  "address"
 ],
 "rows": [
  [
   "1",
   "Shop1",
   "28.575326",
   "77.32237",
   "Sector 19"
  ],
  [
   "2",
   "Shop2",
   "43.34343",
   "44.34343",
   "Setor 18"
  ]
 ]
} 
```

我无法解析这个 Json。它期望在数组开头有一个 JSOn 对象：

```
"rows": [ 
```

如何解析这种 JSON？在我看到的所有示例中，它需要一个 key_value 对和数组中的对象（以“{”开头）而不是“[”。

我使用以下代码进行解析：

```
// Creating JSON Parser instance
JSONParser jParser = new JSONParser();

// getting JSON string from URL
JSONObject json = jParser.getJSONFromUrl(url);

try {
    // Getting Array of Contacts
    contacts = json.getJSONArray(TAG_ROWS);

    // looping through All Contacts
    for(int i = 0; i < contacts.length(); i++){
        JSONObject c = contacts.getJSONObject(i);

        // Storing each json item in variable
        String id = c.getString(TAG_INDEX);
    }
} catch (JSONException e) {
    e.printStackTrace();
} 
```

它在行抛出 JSONEXception

```
 JSONObject c = contacts.getJSONObject(i); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:41:59.157

或者这是解决这个问题的最佳方法：

[http://code.google.com/p/google-api-java-client/wiki/APIs#Fusion_Tables_API](http://code.google.com/p/google-api-java-client/wiki/APIs#Fusion_Tables_API)

来自 Google 的客户端 Java 库应该工作得最好。

# php - 在 PHP 中访问对象、静态变量

> ID：11826332
> 
> 赞同：0
> 
> 时间：2012-08-06T10:16:07.817
> 
> 标签：php

这是我的代码：

```
class Photograph extends DatabaseObject {

    protected static $table_name="photographs";
    protected static $db_fields=array('id', 'filename', 'type', 'size', 'caption','album_id');
    public $id;
    public $filename;
    public $type;
    public $size;
    public $caption;
    //public $album_id;
    protected static $album_id;

    private $temp_path;
    protected $upload_dir="images"; 
```

现在，当我在另一个页面上使用下面的这个功能时，比如'$photos = Photos::find_by_album();'

我收到一条 sql 错误，上面写着：“数据库查询失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在第 1 行的“=”附近使用的正确语法

```
public static function find_by_album($album_id='') 
{
return self::find_by_sql("SELECT * FROM ".self::$table_name."WHERE album_id = ".self::$album_id."");
} 
```

基本上，我要做的是从 $table_name 中获取保存在数据库中的所有值，其中用户输入的 $album_id 等同于在数据库中找到的 album_id。您可能会发现这个问题很简单，但不幸的是，我无法找到解决方案。请问有什么想法吗？提前致谢。:)

编辑：

跟随 Elias Ootegem 先生，

我已经修改了代码，现在看起来像

```
public static function find_by_album($album_id='') 
{ return self::find_by_sql("SELECT * FROM ".self::$table_name." WHERE album_id = ".$album_id.""); 
} 
```

但是，我仍然遇到同样的错误。我尝试使用此代码：

```
public static function find_by_album() 
{ return self::find_by_sql("SELECT * FROM ".self::$table_name." WHERE album_id = ".$album_id.""); 
} 
```

现在出现另一个错误，上面写着：未定义的变量：album_id

还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:26:09.590

首先，将数据库函数设为静态是非常糟糕的做法，因为您将为每个查询连接和断开连接，并且您有效地使所有安全功能完全无用。例如，您不能回滚插入，因为一旦抛出错误，连接就会丢失，终止会话并提交可能损坏的数据。
发布此答案后，我阅读了 hakre 的评论。虽然他说话有点直率，但他确实有一点。您可能想阅读继承和设计模式，这可能会让您放松静态

现在，对于您的实际问题：您是否尝试过转储您要执行的查询？如果你这样做，你可能会看到你的查询看起来像

```
SELECT * FROM photographsWHERE album_id = NULL 
```

修复：在 WHERE 之前添加一个空格，并删除`self::`from `self::$album_id`。据我所知，您想使用传递给该方法的参数。此参数可能与静态属性具有相同的名称，但默认情况下不会分配给它。

* * *

回应您的更新：

```
public static function find_by_album($album_id='') 
{
    return self::find_by_sql("SELECT * FROM ".self::$table_name." WHERE album_id = ".$album_id.""); 
} 
```

这个方法*可以*工作，只要你这样称呼它：

```
Photograph::find_by_album(123);//or some variable that holds a valid id 
```

如果您未能将参数传递给此方法，它将回退到默认值，即空字符串。结果是如下查询：

```
SELECT * FROM photographs WHERE album_id = 
```

由于显而易见的原因，这不会被视为有效的 SQL。因此，请确保正确调用该方法。可能导致您头疼的另一件事是缺少数据库名称。如果您的连接没有选择默认数据库，请按如下方式编辑您的查询：

```
SELECT * FROM yourDb.theTable WHERE album_id = 123 
```

在变体中，未定义的变量错误是 100% 预期的，您已经`$album_id`从方法的定义中删除了参数，但您仍然引用了变量。那么填的是什么值呢？未定义的变量将触发错误或以静默方式将自身声明（或被声明）为`null`. 如果您希望 PHP 回退到您声明的静态变量（但没有在您的代码片段中初始化），您确实需要将范围指定为`self::$album_id`，并且 - 当然 - 将其初始化为一个有意义的值。

```
public static function find_by_album() 
{
    self::$album_id = (self::$album_id ? self::$album_id : 1);//if is set use the value, else use 1
    return self::find_by_sql("SELECT * FROM ".self::$table_name." WHERE album_id = ".self::$album_id.""); 
} 
```

如果上述方法都不能解决您的问题，请尝试在方法中转储任何持有 db 连接的对象`find_by_sql`。有可能你还没有建立联系。
请记住：静态不需要实例，不会调用您的构造函数，因此您在那里所做的一切（在 db 对象中通常是连接到数据库）都**不会**被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:20:42.780

缺少一个空间？

```
return self::find_by_sql("SELECT * FROM ".self::$table_name." WHERE album_id = ".self::$album_id.""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:21:25.323

使用 intval() 或 mysql_real_escape_string() 添加一个空格并为专辑 ID 引入一些安全性

```
return self::find_by_sql("SELECT * FROM `".self::$table_name."` WHERE `album_id` = ".self::$album_id); 
```

# django - 如何在没有 mercurial 文件的情况下将 Django 部署到生产服务器？

> ID：11826334
> 
> 赞同：4
> 
> 时间：2012-08-06T10:16:09.260
> 
> 标签：django, mercurial

我最初是一名 .NET 开发人员，当时当我们不得不从 Visual Studio 发布软件时，我们必须将其切换到发布模式，以确保删除调试挂钩并留下存储库文件。最终结果是一组干净的文件准备好投入生产。

在切换到 Django 并使用它近三个月后，我现在准备部署第一个应用程序。我已经阅读了相当多的内容。我知道如何将调试设置为 False 并拥有 production_setting.py 以及如何在 Apache 上使用 WSGI 进行部署。

但是我还没有想出一个很好的发布版本的过程。

根据我现在所知道的，我会为发布执行以下操作：

*   手动将所有文件复制到上传目录（不包括隐藏的 mercurial 目录）
*   全部压缩
*   通过 SCP 将它们发送到 Ubuntu 服务器
*   登录到服务器
*   提取 zip 文件并将所有内容放置到位
*   修改 setting_production.py 并输入凭据

这是 Django 部署的健康过程吗？:)
仅供参考，我正在使用 Aptana Studio 3.2.1

感谢您的任何提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:33:16.277

你可以看看[Fabric](http://docs.fabfile.org/en/1.4.3/index.html)；文档将其描述为

> ... 一个 Python（2.5 或更高版本）库和命令行工具，用于简化 SSH 在应用程序部署或系统管理任务中的使用。

它能够做你想做的所有事情。

您的“部署”任务可能有几个子任务（`_upload_tar_from_hg()`等），但`_migrate()` *总体*情况如下：

```
from fabric.api import * 

env.release_name = 'foo_bar-1.0'
env.deployment_path = '/var/www/django/%s' % env.release_name    

def deploy():
    local('hg archive -t tgz $s.tar.gz' % env.release)
    put('%s.tar.gz' % env.release, env.deployment_dir)
    run('cd %s && tar -xzvf %s.tar.gz' % (env.deployment_path, env.release))
    local('rm %s.tar.gz' % env.release)
    run('cd %s/%s && ln -s settings_production.py settings.py' % (env.deployment_path, env.release)) 
```

这依赖于有一个单独`settings_production.py`的源代码控制，这可能不合适。Fabric 可以在文本文件中查找和替换，或者您[可以](https://stackoverflow.com/questions/4909958/django-local-settings)[使用`local_settings.py`](https://stackoverflow.com/questions/4909958/django-local-settings).

查看[Fabric 教程](http://docs.fabfile.org/en/1.4.3/tutorial.html)以填补空白（例如为您的服务器指定连接详细信息。设置完成后，只需运行

```
fab deploy 
```

该过程应自动进行。

*NB*从 Mercurial 创建一个没有元数据的存档是使用命令`hg`一步完成的）`hg archive`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T00:27:18.283

在目标服务器上设置[远程 Mercurial存储库。](http://mercurial.selenic.com/wiki/PublishingRepositories/)使用带有“hg”用户的 SSH 密钥通常是最安全的方式，因为您可以只限制对该用户的 shell 访问，并且只允许它访问 repo。

推送到该存储库并使用 post-receive 挂钩将您的推送签入您的 Web 服务器将从中提供服务的文件夹（并在需要时重新加载您的 Web 服务器）。

您还可以在设置文件中添加一个条件，检查应用程序是否在生产服务器上（例如检查文件或环境变量）并加载相关设置（settings_prod.py 或 settings_dev.py）

# asp.net-mvc - 在更改 DropDownListFor 值时更改标签

> ID：11826336
> 
> 赞同：0
> 
> 时间：2012-08-06T10:16:17.293
> 
> 标签：asp.net-mvc, asp.net-mvc-2, html.dropdownlistfor

我在我的页面上使用一个`DropDownListFor`和一个标签文本。

```
<%=Html.DropDownListFor(x => x.MotiveClientType,
                        new SelectList(
                            Model.ClientMotives, "Id", "Label", Model.MotiveClientType),
                        new { id = "ddlMotiveClientType" }
)%> 
```

在我的 上选择值时如何更改我的标签`DropDownListFor`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:49:06.900

我不知道 ASP.NET MVC 的任何原生功能允许您执行此操作，但使用 jQuery 执行此操作是一件相当微不足道的事情。这是一个将事件处理程序连接到下拉列表的更改事件然后设置标签文本的示例：

```
$("#DropDownID").change(function () {
    $("#LabelID").text("Your text here");
}); 
```

只需将 ID 替换为相关值即可。

# c# - 优化 GridView

> ID：11826338
> 
> 赞同：2
> 
> 时间：2012-08-06T10:16:20.163
> 
> 标签：c#, asp.net, gridview

基本上，我需要帮助提高充满网格视图的页面的性能，以减少 C# 的数量并将尽可能多的 GridView 设置移动到 ASP 代码中（而不是数据本身，它在运行时绑定并且需要保留在 C# 中）。

我对 GridView 控件比较陌生，需要帮助将设置移动到 GridView 中，因为此代码所在的页面将有大约 8 或 9 个表。

这是我的 ASP 代码：

```
<asp:GridView runat="server" ID="tblBasicProcessingTime"
    Caption="Basic Processing Stats" ShowHeader="False">
</asp:GridView> 
```

还有我的 C# 代码：

```
var longestTime = ReportData.OrderByDescending(x => x.TimeSpentProcessing).FirstOrDefault();
var averageTime = ReportData.Average(x => x.TimeSpentProcessing);
var shortestTime = ReportData.OrderBy(x => x.TimeSpentProcessing).FirstOrDefault();

var table = new DataTable();

const string col1Name = "Header";
const string col2Name = "Data";

table.Columns.Add(col1Name);
table.Columns.Add(col2Name);

var row1 = table.NewRow();
row1[col1Name] = "Longest Processing Time";
row1[col2Name] = longestTime.TimeSpentProcessing;
table.Rows.Add(row1);

var row2 = table.NewRow();
row2[col1Name] = "Average Processing Time";
row2[col2Name] = averageTime;
table.Rows.Add(row2);

var row3 = table.NewRow();
row3[col1Name] = "Shortest Processing Time";
row3[col2Name] = shortestTime.TimeSpentProcessing;
table.Rows.Add(row3);

tblBasicProcessingTime.DataSource = table;
tblBasicProcessingTime.DataBind(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:18:43.833

```
<asp:GridView
            ID="gvList"
            runat="server"
            AutoGenerateColumns="False"
            EnableModelValidation="True"
            HeaderStyle-HorizontalAlign="Center"
            Width="100%"
            RowStyle-Height="25px"
            HeaderStyle-CssClass="ui-th-div-ie"
            RowStyle-CssClass="TR_ROW1"
            AlternatingRowStyle-CssClass="TR_ROW2"
            HeaderStyle-ForeColor="#0073ea"
            BorderWidth="1px"
            CellPadding="2"
            HorizontalAlign="Center"
            OnPageIndexChanging="gvList_PageIndexChanging"
            AllowPaging="true"
            AllowSorting="true"
            PagerStyle-HorizontalAlign="Right"
            PageSize="1"
            OnSorting="gvList_Sorting">

            <Columns>
                <asp:TemplateField HeaderStyle-Width="20%" HeaderText="<%$ Resources: CommonResources, lbl_InstoreHistLotNo.Text %>" SortExpression="LotNo">
                    <ItemTemplate>
                        <asp:Label ID="lbl_InstoreHistLotNo" runat="server" Text='<%#Eval("LotNo")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderStyle-Width="10%" HeaderText="<%$ Resources: CommonResources, lbl_InstoreHistPartNo.Text %>" SortExpression="PartCode">
                    <ItemTemplate>
                        <asp:Label ID="lbl_InstoreHistPartNo" runat="server" Text='<%#Eval("PartCode")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderStyle-Width="10%" HeaderText="<%$ Resources: CommonResources, lbl_InstoreHistPartName.Text %>" SortExpression="PartName">
                    <ItemTemplate>
                            <asp:Label ID="lbl_InstoreHistPartName" runat="server" Text='<%#Eval("PartName")%>'/>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderStyle-Width="10%" HeaderText="<%$ Resources: CommonResources, lbl_InstoreHistInQuality.Text %>" SortExpression="Quality">
                    <ItemStyle HorizontalAlign="Right" />
                    <ItemTemplate>
                            <asp:Label ID="lbl_InstoreHistInQuality" runat="server" Text='<%#Eval("Quality")%>'/>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderStyle-Width="10%" HeaderText="<%$ Resources: CommonResources, lbl_InstoreHistInUsercode.Text %>" SortExpression="UserCode">
                    <ItemTemplate>
                        <asp:Label ID="lbl_InstoreHistInUsercode" runat="server" Text='<%#Eval("UserCode")%>'/>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderStyle-Width="15%" HeaderText="<%$ Resources: CommonResources, lbl_InstoreHistInTime.Text %>" SortExpression="InStoreDate">
                </asp:TemplateField>
            </Columns>
            <PagerStyle HorizontalAlign="Left"   />
            <PagerSettings Position="TopAndBottom" Mode="Numeric" />
        </asp:GridView> 
```

这只是一个简单的 gridview 数据绑定演示。但是，我的标题文本是从资源文件加载的，您可以自己设置，如字符串“aaa”、“bbb”、“ccc”

在后端，您的代码可能如下所示：

```
DataTable dt = SqlHelper.ExcuteDataSet("select * from InStoreHistory");
gvList.DataSource = dt;
gvList.DataBind(); 
```

# jquery - 在 Ext Js 元素上使用 JQuery

> ID：11826339
> 
> 赞同：0
> 
> 时间：2012-08-06T10:16:21.783
> 
> 标签：jquery, extjs

我试图在一些 Sencha 元素中从 JQuery 捕获 .keypress 事件，但似乎 Sencha 以某种方式将它们隐藏到 JQuery 中。

我将展示一段代码，它更简单，但有同样的问题：

```
 Ext.onReady(function(){

            $("#jquery").click(function() {
                alert('Handler for click called.');
            });

            var contextMenu = new Ext.menu.Menu({
                renderTo: document.body,
                width: 150,
                floating: false,
                plain: true,
                items: [{
                    text: 'button1',
                    id: 'jquery'
                },{
                    text: 'button2'
                }]
            });
        });
    </script>
</head>
<body>
<div id="test"> I am a div </div>
</body> 
```

我的目标是，当我单击 button1 时，会显示警报弹出窗口，但不会发生。但是，如果我将 JQuery 代码更改为：

```
$("#test").click(function() {
alert('Handler for click called.');
}); 
```

然后我点击弹出的 div 内容，因此该库已正确加载。

我认为这一定与 Sencha 如何创建我检查过的 html 有关，我可以看到 button1 如下所示：

```
<a id="jquery" class="x-menu-item" hidefocus="true" unselectable="on" href="#"><img alt="" src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" class="x-menu-item-icon " id="ext-gen7"><span class="x-menu-item-text" id="ext-gen8">button1</span></a> 
```

但是我仍然无法在我想要的地方使用 JQuery。使用 JQuery 选择器访问 sencha 元素的任何想法或解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:36:39.817

我不知道你为什么要在 jquery 中使用 ExtJS
尽量避免同时使用，因为这只会增加页面时间并且不会添加任何新功能
Extjs 本身是一个相当大的库，并且肯定支持 DOM 操作

你的代码问题是 Ext。 onReady() 事件在所有依赖项都已加载时触发。ExtJS 动态生成 HTML 元素，因此在引发此事件时，所有脚本都存在，但没有创建任何内容，因此没有 id 为 jquery 的元素，因此您无法通过 jquery 访问它，

我建议这样做是为了
*将这段 jquery 代码放在一些 afterrender 事件中，这样你就可以确定 HTML 元素存在
*如果你不能这样做，那么使用 jquery`live`OR jquery `on`，因为它们是可用于将事件处理程序分配给动态创建的元素的函数。
* 最推荐的方法是将[ExtJS 样式的侦听](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.view.View-cfg-listeners)器放入元素，Extjs 将为您处理事件的引发。像这样的东西

```
listeners: {
        click: {
            element: 'el', //bind to the underlying el property on the panel
            fn: function(){ console.log('click el'); }
        },
        dblclick: {
            element: 'body', //bind to the underlying body property on the panel
            fn: function(){ console.log('dblclick body'); }
        }
    } 
```

# opengl-es - 绘制并打开 GL ES

> ID：11826344
> 
> 赞同：0
> 
> 时间：2012-08-06T10:16:46.823
> 
> 标签：opengl-es, .obj, sketchup

嗨，我在 Sketch Up 中创建了一个模型，如果要在我打开的 GL ES 应用程序中使用，我想导出它。我的问题是。我是否需要指定我希望输出都是三角形而不是多边形。显然 ES 不支持其他形状。如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:02:40.420

由于 OpenGLES 仅支持三角形，是的，您必须将多边形拆分为三角形。将面拆分为三角形的过程称为“三角剖分”。一个快速的谷歌搜索告诉我，sketchup 没有本机功能，所以你可能必须安装一个像这样的插件：http: [//osbo.com/sketchup/triangulate/](http://osbo.com/sketchup/triangulate/)

# javascript - javascript-如何使用纯js/jquery/rangy/other lib获取网页中的最高层节点，其全文已被用户选中

> ID：11826348
> 
> 赞同：0
> 
> 时间：2012-08-06T10:16:57.513
> 
> 标签：javascript, jquery, rangy

下面给出了一个示例 HTML 页面片段---

```
<div id="maindiv">
    <div id="div1">
      Text 1 
      <div id="div1_1"> Text 1_1 </div>
      <div id="div1_1"> <a href="http://google.com/">Text 1_2</a> </div> 
    </div>
    <div id="div2"> Text 2  </div>
</div> 
```

现在这里有几个场景，包含上面文本的网页显示在浏览器中，用户选择浏览器中显示的一些文本--

情景一——

用户选择文本

```
Text 1_1 
```

在网页中

情景2——

用户选择文本

```
Text 1  Text 1_1  Text 1_2 
```

在网页中。

场景 3-- 用户选择以下文本 Text 1 Text 1_1 Text 1_2 Text 2

场景 4——用户选择以下文本

```
Text 1_2 Text 2 
```

现在我想使用 Javascript 获取最顶层的节点，其全部内容已被用户选择。这是场景 1 中的单个 div，即。“div1_1”，场景 2 即。“div1”和场景 3 即。“maindiv”，但在场景 4 中，选择了 div1_2 的全部内容以及 div2 的全部内容——即内容已被选择的这 2 个 div 不是兄弟姐妹。所以我想为场景 4 提取的结果是“div1_2”和“div2”。

如上所述，如何提取 div？我在这里提到了 rangy 的使用，因为它非常有用，并且具有超出标准 JS DOM 的一些功能，但我愿意使用任何其他 JS 库，如 JQuery，甚至纯 Javascript。

我想在这里添加/询问的另一件事......即使有更多图像，任何 div 中有更多链接，并且用户的选择包括这些图像/链接，那么我将如何提取最上面的 div，这样这个 div 的文本内容等于用户选择的文本（图像可以被忽略，链接的文本只有用户选择了常规文本）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:19:19.273

Sounds to me as though you want the `commonAncestorContainer` property of the selection range. Note that it could be a text node or an element. I'm using Rangy below for IE < 9 compatibility but if you don't need that then you could just use `window.getSelection()` instead of `rangy.getSelection()`.

```
var sel = rangy.getSelection();
var selContainerNode = null;
if (sel.rangeCount > 0) {
    selContainerNode = sel.getRangeAt(0).commonAncestorContainer;
} 
```

If you want the innermost element (rather than potentially a text node) that contains the selection, do a simple check of `commonAncestorContainer`'s node type:

```
if (selContainerNode.nodeType == 3) {
    selContainerNode = selContainerNode.parentNode;
} 
```

# jquery - jquery：更改css和删除html不起作用

> ID：11826352
> 
> 赞同：0
> 
> 时间：2012-08-06T10:17:27.493
> 
> 标签：jquery, css

这个 HTML：

```
<div class="editable" contentEditable="true">
    <span class="empty">change me</span>
</div> 
```

这个jQuery：

```
$(".empty").click(function() {
            $(this).css("color","#000");
            $(this).html(" ");
        }); 
```

没有像我希望的那样工作（或根本没有）。我想这样做，当用户单击跨度中的“更改我”文本时，字体颜色变为黑色并且跨度中的现有文本消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:31:53.437

这是行不通的，因为跨度没有 height 属性，并且在清空它的内容后，它将具有 a`width of 0px`和 a `height of 0px`。用 a 替换跨度`<div>`并在你的 CSS 中给它一个高度。这里的例子：http: [//jsfiddle.net/JftGd/12/](http://jsfiddle.net/JftGd/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:20:22.997

我假设您的`<head>`html 中有您的代码。您需要将代码包装在 onLoad 中，以便代码在适当的时间执行。

```
$(function() {
    $(".empty").click(function() {
        $(this).css("color","#000");
        $(this).html(" ");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:22:06.677

加载页面后执行代码：

```
$(document).ready(function(ev){
   $(".empty").click(function() {
        $(this).css("color","#000");
        $(this).html(" ");
    });
}); 
```

[http://jsfiddle.net/sF6G9/](http://jsfiddle.net/sF6G9/)

# asp.net - 获取列表视图中的标签文本

> ID：11826355
> 
> 赞同：0
> 
> 时间：2012-08-06T10:18:00.410
> 
> 标签：asp.net, listview

我有一个列表视图，里面有 2 个标签，列表视图外面有 1 个标签 (lbl1)。我想让 lbl1 text = listview 中的标签。

请详细回答，我是菜鸟。每当我运行以下代码时，我都会收到此错误：“对象引用未设置为对象的实例”

这是我的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    Label mylabel = (Label)ListView1.FindControl("prog_idLabel");
    lbl1.Text = mylabel.Text;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:07:46.080

这是修复：

```
foreach (ListViewItem item in ListView1.Items)
{
    Label mylabel = (Label)item.FindControl("prog_idLabel");
    lblID.Text = mylabel.Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:25:22.017

首先，一些防御性编程不会出错以阻止您的应用程序崩溃。

```
protected void Page_Load(object sender, EventArgs e)
{
    Label mylabel = (Label)ListView1.FindControl("prog_idLabel");
    if(mylabel != null)
         lbl1.Text = mylabel.Text;
} 
```

这样，如果 FindControl 返回 null，或者您的转换不起作用，您将不会访问 null 对象。

我认为 page_load 在您实例化列表视图中的标签之前被调用。所以考虑把你的代码放在其他地方，在那里你可以确定一切都已经初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:01:00.030

您必须首先确保您的控件都设置为对象的实例。看起来情况并非如此。您正在处理一个 ASP.NET 项目，对吗？如果是这样，看起来[您的事件处理程序就是这个](http://www.dotnetperls.com/page-load)。你必须确保这是正确的使用，也许你正在寻找另一个事件。

要验证是否正确设置了所有实例，请在实例化返回空引用的控件时设置断点。如果您在到达断点之前遇到异常，您应该了解正在发生的事情。一步一步慢慢运行你的代码。

# jquery - 如何获取 jQuery 滑块更改事件的实际值？

> ID：11826360
> 
> 赞同：0
> 
> 时间：2012-08-06T10:18:13.830
> 
> 标签：jquery, jquery-mobile

这是我的 jQuery 移动滑块代码，我想使用滑块将一个页面导航到另一个页面。请看我的代码。

```
<label for="slider-1">Chapter:</label>
<input type="range" name="slider-1" id="slider-1" value="1" min="1" max="2"   />
<script>
$(document).ready(function(){

        $("#slider-1").change(function() {
        var SliderValue = $("#slider-1").val();
        console.log(slider_value)
                if(SliderValue>0){
                    //window.location = document.location+"#page"+SliderValue;
                }
        });

});
</script> 
```

我刚刚在这里记录了变量 SliderValue，我可以看到该值增加到 295。

谁能告诉我如何获得活动的实际价值？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:23:01.923

提供一个回调函数来处理更改事件作​​为初始化选项。

```
$( "#slider-1" ).slider({
   change: function(event, ui) { 
       alert(ui.value);
   }
}); 
```

按类型绑定到更改事件：slidechange。

```
$( "#slider-1" ).bind( "slidechange", function(event, ui) {
    alert(ui.value);
}); 
```

来源：[jQuery UI 滑块演示](http://jqueryui.com/demos/slider/#event-change)

# objective-c - super allocWithZone 对单例类概念有一些疑问

> ID：11826363
> 
> 赞同：7
> 
> 时间：2012-08-06T10:18:33.033
> 
> 标签：objective-c

我是 Objective-C 的新手，我正在尝试根据[Apple 的文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW32)创建一个单例类。

```
+ (MyGizmoClass*)sharedManager
{
    if (sharedGizmoManager == nil) {
        sharedGizmoManager = [[super allocWithZone:NULL] init];
    }
    return sharedGizmoManager;
}

+ (id)allocWithZone:(NSZone *)zone
{
    return [[self sharedManager] retain];
} 
```

在这段代码`sharedManager`中是一个静态方法，它将检查这个类的对象是否存在。如果是这样，它将返回先前创建的对象，否则将创建一个新对象。

我有一些疑问：

1.  如果`sharedManager`是静态的，它如何访问`super`？

2.  当我打印时`[super class]`，为什么它会给出当前的类名？

3.  为什么`[[super allocWithZone:NULL] init]`返回当前的类对象？

4.  如果`super`等于`self`这里而不是为什么它不调用当前类的`allocWithZone:(NSZone *)zone`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:28:54.330

这里有几件事需要考虑。首先，Cocoa Fundamentals 指南有些过时了。它没有考虑 Apple 开发的一些当前技术，例如 Grand Central Dispatch 和自动引用计数。allocWithZone 方法中的 [retain] 无法在启用 ARC 的项目中正确编译（因为您是 Obj-C 的新手，我在这里假设您也是 iOS/iPhone 的新手，所以您应该阅读这两种技术）。

在这个线程中对不同的单例设计模式进行了很好的讨论： [我的 Objective-C 单例应该是什么样子？](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like)

然而，这是一个较旧的线程，因此没有考虑自动引用计数（我多年来一直使用 Louis Gerbang 的答案，它不再适用于启用 ARC 的项目）。

对于启用 ARC 的项目/文件（是的，ARC 可以只为单个文件启用）——我们已经转移到一个使用 GCD 并且运行良好的单例：

```
static YourClassName * volatile sharedInstance = nil;

+ (YourClassName *)sharedInstance
{
    static dispatch_once_t sharedInstanceToken;
    dispatch_once(&sharedInstanceToken, ^{
        sharedInstance = [[YourClassName alloc] init];
    });
    return sharedInstance;
} 
```

这里发生了什么？好吧，如果您查看[GCD 文档](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)，您会发现 dispatch_once 在特定对象的应用程序的整个生命周期中只执行一次。正如文档继续说的那样，这对于以线程安全的方式创建单例非常有用。

最重要的是，我们将 sharedInstance 方法声明为 volatile，这意味着编译器/运行时不应尝试缓存对该方法的调用，而应始终执行其中的代码。这确保我们总是调用 GCD 并且总是取回我们应该得到的对象。

因为你是 Obj-C 的新手，所以我在掩饰一堆，但肯定要看看 GCD、ARC，然后一旦你在 Obj-C 中有扎实的基础，就会研究 IMP 缓存，这就是volatile 正在防止发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T12:29:25.673

其他答案虽然指出了有关单身人士的良好信息，但实际上并没有回答您的问题。您的问题实际上主要基于面向对象，您专门引用单例的事实是偶然的。

1.  我参考回答[了这个问题](https://stackoverflow.com/a/7552069/916299)`self`，这是答案的转述的重要部分

    > `super`在类级别的上下文中确实有意义，但它指的是超类本身，而不是实例

2.  这个也让我失望了。我问[了这个问题](https://stackoverflow.com/q/11827720/916299)，得出的结论是：

    > `[super class]`调用`super`当前实例（即`self`）上的方法。如果 self 有一个覆盖的版本，那么它会被调用并且看起来会有所不同。由于您不覆盖它，因此调用`[self class]`与调用相同`[super class]`。

3.  你确定它实际上是返回这个类的一个实例吗？还是您将其分配给`sharedGizmoManager`此类的实例？

4.  Super 不等于 self，而是您调用的某些方法：例如`[super class]`，正在调用将要调用的方法的相同实现`[self class]`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-05T21:17:25.947

(1.) `super`“静态函数”中有什么？在 Objective-C 中，+方法被恰当地称为*类方法*，-方法被称为*实例方法*。这些 +methods 不是真正的静态方法，因为[Objective-C 类本身就是一个名为*Class*](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/DefiningClasses/DefiningClasses.html#//apple_ref/doc/uid/TP40011210-CH3-SW18)的不透明类型的对象。所以`super`和`self`都在 + 方法中定义。`super`向*MyGizmoClass*的超类发送消息，但是当从 +method 调用时`super`查找等效的 +method，而从 -method 调用时`super`查找相应的 -method。*在MyGizmoClass*
`self`的 +methods 中返回*MyGizmoClass*这是一个*类****，而 in -methods`self`是指向*MyGizmoClass*实例的指针。***

 **(2.) 方法`+class`返回`self.isa`。Yes`[super class]`调用*超类的:*`+class`方法，但是，当`self`被传递给 +methods 时，它的值和类型都不会被修改（而`self`当它通过 -methods 传递时，它的类型被强制转换为超类）。因此，当`+class`链上请求的方法的实现时`self.isa`，它会获得相同的值*MyGizmoClass*。可以肯定的是，您可以通过从*MyGizmoSuperClass派生**MyGizmoClass*
来验证`super`是否调用`+class`了超类，您可以在其中放置覆盖：

 **```
 @interface MyGizmoSuperClass : NSObject
    @end
    @implementation MyGizmoSuperClass
    +(Class) class {
        NSLog(@"yes it calls MyGizmoSuperClass:class");
        return [super class];
    }
    @end
    @interface MyGizmoClass : MyGizmoSuperClass 
    +(Class) classviasuper;
    @end
    @implementation MyGizmoClass
    +(Class) classviasuper {
        return [super class]; //which version of class will super call?
    }
    @end
    int main(int argc, char *argv[])
    {
       NSLog(@"returned %@",[MyGizmoClass classviasuper]); 
    } 
```

印刷

> > 是的，它调用 MyGizmoSuperClass:class
> > 返回了 MyGizmoClass

(3.) 再次`super`调用 的超类版本，`allocWithZone`但`self`传递给方法的值仍指向*MyGizmoClass*，并且由于`allocWithZone`返回接收者类的对象，因此您将返回*MyGizmoClass*。

(4.) 您可以轻松验证`super`与`self`. 如果您实现`[self allocWithZone:NULL]`您的代码将无限期地调用*MyGizmoClass*的实现`allocWithZone`和循环。使用`[super allocWithZone:NULL]`，调用超类的版本。****

# oracle - Oracle：在可序列化事务中插入后立即选择

> ID：11826368
> 
> 赞同：7
> 
> 时间：2012-08-06T10:19:05.387
> 
> 标签：oracle, select, insert, serializable

我最近遇到了一个奇怪的问题，在 Oracle 数据库中编程：在可序列化事务中，我执行批量插入（INSERT ... SELECT），然后立即在更改后的表上打开一个带有 SELECT 的游标。我假设这个游标将包括新插入的行，但令我惊讶的是，它的内容是不稳定的，有时包括所有新插入的行，有时只包括一个子集。

我已经通过在打开光标之前提交解决了这个问题，但是这种行为让我感到困惑。在没有中间提交的情况下，在同一事务中插入之后的选择是否真的可以信任？或者这种行为是否与可序列化的事务有某种关系？

**跟进**：当尝试创建可重现的测试用例时，我只有在添加索引后才能获得这种行为（在这种情况下是主键索引，在实际代码上它是常规索引）。也许问题在于构建索引所花费的时间，以至于 SELECT 实际上使用不完整的索引来检索结果？无论如何，这里有一个可重现的测试用例：

```
-- Create empty source table
CREATE TABLE TEST_CASE_1 AS 
  (SELECT 'CONTENT' AS CONTENT
   FROM DUAL
   WHERE 1 = 2)

-- Add primary key
ALTER TABLE TEST_CASE_1
ADD CONSTRAINT TEST_CASE_1_PK PRIMARY KEY (CONTENT);

-- Create empty destination table
CREATE TABLE TEST_CASE_2 AS 
  (SELECT 'CONTENT' AS CONTENT
   FROM DUAL
   WHERE 1 = 2)

-- Example of faulty code
BEGIN

  SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

  -- Populate with 100.000 rows (I used ALL_OBJECTS but any source of 100.000 rows is good)
  INSERT INTO TEST_CASE_1
    (SELECT ROWNUM 
     FROM ALL_OBJECTS
     WHERE ROWNUM <= 100000);

  INSERT INTO TEST_CASE_2
    (SELECT *
     FROM TEST_CASE_1
     WHERE CONTENT > 0);

  COMMIT;

END; 
```

在这个例子中，我希望 TEST_CASE_2 也有 100.000 行。重现这个测试用例（在一个无负载的数据库中），我获得了大约 400-500 行插入。删除将事务设置为可序列化的语句，我获得了正确的 100.000 行计数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T12:40:09.160

这似乎是一个错误；如果您可以访问 Oracle 的支持网站，请查看注释 1455175.1，它可以追溯到 8i。列出了几个错误编号（7592038 - 'SILENTLY INVISIBLE DATA FROM SELECT/UPDATE OF NEWLY INSERTED ROW IN SERIALIZABLE', 6363019）但它们作为 440317 的副本关闭（'隔离级别可序列化导致在所选行上找不到数据AFTER INSERT')，它显示为仍处于打开状态并正在通过开发进行调查 - 即使它最初是针对版本 7（！）提出的。

您似乎是对的，这与PK有关。列出的解决方法是：

*   提交执行到该点的工作。
*   执行其他（但不同的）语句（可能在回滚到事务中较早建立的保存点之后）。
*   回滚整个事务并从头开始重新启动事务。
*   执行全表扫描并避免使用索引。

您知道第一个解决方法已经有效，我认为第二个或第三个对您没有帮助吗？您可以尝试第四个，`/*+ FULL(TEST_CASE_1) */`为第二个插入的选择添加提示。

我在 11.2.0.2 (Linux) 中没有收到错误，但我找不到任何表明该错误已得到修复的信息；而且我没有 11.1 环境来试用它 - 所以我无法检查最后一个解决方法是否适用于这个测试用例。

有一个说明，您可以在 11G 中获得 ORA-08177。如果我在创建表后过早地运行匿名块，或者如果我插入了太多行，我就会遇到这个问题，这似乎也与 PK 有关。[这个先前的问题](https://stackoverflow.com/q/2326750/266304)可能是相关的。

似乎这将继续成为一个问题，因此如果变通办法没有帮助，您可能需要重新考虑是否确实需要更改隔离级别；如果您这样做了，您可能需要向 Oracle 提出服务请求以获得更好的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-10T14:10:21.343

这是一个已确认的错误，Oracle 表示他们不打算修复它。以下是他们对我的服务请求的回复（2015 年 1 月）的摘录：

> 这些症状是由于在已知问题中发现了 Serializable 事务，并且您对 Bug 440317 的结论是正确的。
> 
> 错误 440317 - 隔离级别可序列化导致在插入后选择的行上找不到数据
> 错误 16803610 - 使用 INSERT INTO 插入的行在可序列化隔离级别事务中丢失
> 
> 这两个 Bug 都已发布，因此您可以在 MOS Bug 搜索中查看详细信息。
> 
> 根据开发，对于历史很长的同一个问题存在多个错误。设计不容易更改，因此直到分叉出这个不是很有用的功能之前都没有解决办法。
> 
> 开发已经关闭了错误说代码修复是不可行的。
> 
> 建议的解决方法是
> 应用程序代码修改：
> 更改逻辑以在选择之前进行提交
> 或不使用可序列化
> 没有应用程序代码修改：
> 不要使用主键或表上的索引

# excel - Excel中多列过滤器的平均值

> ID：11826376
> 
> 赞同：2
> 
> 时间：2012-08-06T10:19:31.563
> 
> 标签：excel, filter, average

我想要一个公式来显示 Excel 中多个过滤值的平均值。例如，在 AI 列中有年份，在 BI 列中有月份，在 CI 列中有值。

因此，我想选择 2011 年的 5 月，并获得 C 列中满足这些要求的值的平均值。我在想一个函数，比如......

```
=AVERAGE(IF(AND($A$1:$A:$100=2011,$B$1:$B:$100=May),$C$1:$C:$100)) 
```

但我认为这不会奏效，我已经尝试过了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:37:43.623

使用 AverageIfs 函数。例如

AVERAGEIFS(C1:C100,A1:A100,"=2011",B1:B100,"=5 月")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:38:12.883

您可以使用 SUMIF 或 SUMPRODUCT：

```
=AVERAGE(SUMIF($C$1:$C:$100,$A$1:$A:$100,2011,$B$1:$B:$100,"May")) 
```

编辑：我认为 atov 的解决方案更好。嗯。仍然有效:)

# linux - SCTP RCVBUF 在 Linux 中未正确设置

> ID：11826377
> 
> 赞同：1
> 
> 时间：2012-08-06T10:19:38.520
> 
> 标签：linux, sctp

我正在尝试将 RCVBUF 设置为 1MB//1048576 ，但是在我尝试通过 getsockopt 读取它时设置该值后，它总是将值设为 2MB//2097152 谁能告诉我下面的代码有什么问题？

```
 unsigned int rcvBuf = getRcvBufValue();
    if (setsockopt (channelfd, SOL_SOCKET, SO_RCVBUF, &rcvBuf,sizeof (rcvBuf)) == -1) 
  {
         cout<<"RCV BUF IS NOT SET";
  }
      int rcvbuf = -1;
      socklen_t Rsize = sizeof(rcvbuf);
      getsockopt (channelfd, SOL_SOCKET, SO_RCVBUF,&rcvbuf,&Rsize);
      cout<<rcvbuf; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:01:25.910

以下是`man 7 socket`关于 SO_RCVBUF 选项的内容：

> **SO_RCVBUF**
> 
> 设置或获取最大套接字接收缓冲区（以字节为单位）。 **当使用 setsockopt(2) 设置该值时，内核将该值加倍（以便为簿记开销留出空间），并且该加倍值由 getsockopt(2) 返回。**默认值由 /proc/sys/net/core/rmem_default 文件设置，最大允许值由 /proc/sys/net/core/rmem_max 文件设置。此选项的最小（加倍）值为 256。

# forms - 使用“preUpdate”生命周期时更新表单值

> ID：11826381
> 
> 赞同：0
> 
> 时间：2012-08-06T10:19:56.603
> 
> 标签：forms, orm, symfony

我有一个表格，保存后会再次显示。在这个表单中有一个坐标字段，它（如果不是由用户手动编辑）使用`preUpdate`生命周期回调自动更新：

```
/**
 * @ORM\preUpdate
 */
public function setUpdatedValue() {
    if (!$this->getSomeTrueFalseValue()) {
        $this->setCoordinates();
    }
} 
```

这工作得很好。除了一个例外。正确保存实体并再次显示表单后，此特定字段的值不会更新，因为在调用**preUpdate**方法之前绑定了表单。如何强制更新此值？

这是`action`现在的样子：

```
$em         = $this->getDoctrine()->getEntityManager();
$request    = Request::createFromGlobals();
$object     = $this->getDoctrine()->getRepository($this->repository)->find($id);
if (!$object) return $this->forward('MyBundle:Controller:nonExistent');

$form       = $this->createForm( Factory::create_instance($this->type), $object);

if ('POST' == $request->getMethod()) {
    $form->bindRequest($request);           
    if ($form->isValid()) {
        $em->persist($object);
        $em->flush();
        $this->get('session')->setFlash( 'message', 'Saved');
        $this->get('session')->setFlash( 'type', 'ok' );
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:48:17.903

一旦对象被持久化，您可以尝试重新创建表单，即调用

```
$form       = $this->createForm( Factory::create_instance($this->type), $object); 
```

后

```
$em->flush(); 
```

# javascript - 使用 Node.js 调用 JSON API

> ID：11826384
> 
> 赞同：87
> 
> 时间：2012-08-06T10:20:08.520
> 
> 标签：javascript, json, node.js, http

我正在尝试获取登录到我的应用程序的用户的 facebook 个人资料图片。Facebook 的 API 声明`http://graph.facebook.com/517267866/?fields=picture`将正确的 URL 作为 JSON 对象返回。

我想从我的代码中获取图片的 URL。我尝试了以下方法，但我在这里遗漏了一些东西。

```
 var url = 'http://graph.facebook.com/517267866/?fields=picture';

 http.get(url, function(res) {
      var fbResponse = JSON.parse(res)
      console.log("Got response: " + fbResponse.picture);
    }).on('error', function(e) {
      console.log("Got error: " + e.message);
 }); 
```

运行此代码会产生以下结果：

```
undefined:1

^
SyntaxError: Unexpected token o
    at Object.parse (native) 
```

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-08-06T10:27:42.700

回调中的`res`参数`http.get()`不是正文，而是[http.ClientResponse](http://nodejs.org/api/http.html#http_http_clientresponse)对象。你需要组装身体：

```
var url = 'http://graph.facebook.com/517267866/?fields=picture';

http.get(url, function(res){
    var body = '';

    res.on('data', function(chunk){
        body += chunk;
    });

    res.on('end', function(){
        var fbResponse = JSON.parse(body);
        console.log("Got a response: ", fbResponse.picture);
    });
}).on('error', function(e){
      console.log("Got an error: ", e);
}); 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-09-21T09:15:46.423

## 其他答案的问题：

*   不安全`JSON.parse`
*   无响应码检查

这里的所有答案都`JSON.parse()`以**不安全的方式**使用。您应该始终将所有调用`JSON.parse()`放在一个`try/catch`块中，**尤其是**当您解析来自外部源的 JSON 时，就像您在此处所做的那样。

您可以使用它`request`来自动解析其他答案中未提及的 JSON。已经有一个使用`request`模块的答案，但它用于`JSON.parse()`手动解析 JSON - 它应该**始终**在块内运行`try {} catch {}`以处理不正确 JSON 的错误，否则整个应用程序将崩溃。并且发生了不正确的 JSON，相信我。

其他使用的答案`http`也使用`JSON.parse()`而不检查可能发生的异常并使您的应用程序崩溃。

下面我将展示几种安全处理它的方法。

所有示例都使用公共 GitHub API，因此每个人都可以安全地尝试该代码。

## 示例`request`

这是一个自动解析 JSON 的工作示例`request`：

```
'use strict';
var request = require('request');

var url = 'https://api.github.com/users/rsp';

request.get({
    url: url,
    json: true,
    headers: {'User-Agent': 'request'}
  }, (err, res, data) => {
    if (err) {
      console.log('Error:', err);
    } else if (res.statusCode !== 200) {
      console.log('Status:', res.statusCode);
    } else {
      // data is already parsed as JSON:
      console.log(data.html_url);
    }
}); 
```

## `http`带有和的示例`try/catch`

这使用-如果您想要 HTTP 连接`https`，只需更改`https`为：`http`

```
'use strict';
var https = require('https');

var options = {
    host: 'api.github.com',
    path: '/users/rsp',
    headers: {'User-Agent': 'request'}
};

https.get(options, function (res) {
    var json = '';
    res.on('data', function (chunk) {
        json += chunk;
    });
    res.on('end', function () {
        if (res.statusCode === 200) {
            try {
                var data = JSON.parse(json);
                // data is available here:
                console.log(data.html_url);
            } catch (e) {
                console.log('Error parsing JSON!');
            }
        } else {
            console.log('Status:', res.statusCode);
        }
    });
}).on('error', function (err) {
      console.log('Error:', err);
}); 
```

## `http`带有和的示例`tryjson`

此示例与上面的示例类似，但使用了[`tryjson`](https://www.npmjs.com/package/tryjson)模块。（免责声明：我是该模块的作者。）

```
'use strict';
var https = require('https');
var tryjson = require('tryjson');

var options = {
    host: 'api.github.com',
    path: '/users/rsp',
    headers: {'User-Agent': 'request'}
};

https.get(options, function (res) {
    var json = '';

    res.on('data', function (chunk) {
        json += chunk;
    });

    res.on('end', function () {
        if (res.statusCode === 200) {
            var data = tryjson.parse(json);
            console.log(data ? data.html_url : 'Error parsing JSON!');
        } else {
            console.log('Status:', res.statusCode);
        }
    });
}).on('error', function (err) {
      console.log('Error:', err);
}); 
```

## 概括

使用的例子`request`是最简单的。但是，如果由于某种原因您不想使用它，请记住始终检查响应代码并安全地解析 JSON。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-08-31T00:47:30.130

我认为对于像这样的简单 HTTP 请求，最好使用[`request`module](https://github.com/request/request)。您需要使用 npm ( `npm install request`) 安装它，然后您的代码可能如下所示：

```
const request = require('request')
     ,url = 'http://graph.facebook.com/517267866/?fields=picture'

request(url, (error, response, body)=> {
  if (!error && response.statusCode === 200) {
    const fbResponse = JSON.parse(body)
    console.log("Got a response: ", fbResponse.picture)
  } else {
    console.log("Got an error: ", error, ", status code: ", response.statusCode)
  }
}) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-12-31T16:44:00.523

我正在使用[get-json](https://www.npmjs.com/package/get-json)非常简单易用：

```
$ npm install get-json --save 
```

进口`get-json`

```
var getJSON = require('get-json') 
```

要执行`GET`请求，您将执行以下操作：

```
getJSON('http://api.listenparadise.org', function(error, response){
    console.log(response);
}) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-04T23:43:12.543

另一个解决方案是用户[axios](https://github.com/axios/axios)：

```
npm install axios 
```

代码将如下所示：

```
const url = `${this.env.someMicroservice.address}/v1/my-end-point`;

const { data } = await axios.get<MyInterface>(url, {
  auth: {
    username: this.env.auth.user,
    password: this.env.auth.pass
  }
});

return data; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-15T13:26:09.837

[Unirest 库](https://github.com/Mashape/unirest-nodejs)大大简化了这一点。如果你想使用它，你必须安装`unirest`npm 包。然后您的代码可能如下所示：

```
unirest.get("http://graph.facebook.com/517267866/?fields=picture")
  .send()
  .end(response=> {
    if (response.ok) {
      console.log("Got a response: ", response.body.picture)
    } else {
      console.log("Got an error: ", response.error)
    }
  }) 
```

# javascript - 根据位置显示或隐藏图像（图像滑块）

> ID：11826386
> 
> 赞同：0
> 
> 时间：2012-08-06T10:20:18.430
> 
> 标签：javascript, jquery, image, slider

我有一个图像滑块设置和工作，我现在需要的是根据滑块内元素的位置显示或隐藏图像。

查看萤火虫，我可以看到以下内容（请注意有几个 li 项目，我在这里只显示一个）：

```
<li class="roundabout-moveable-item" style="position: absolute; left: 128px; top: 104px; width: 185.9px; height: 188.1px; opacity: 1; z-index: 145; font-size: 8.3px;"> 
```

现在根据“左”位置，我希望能够执行以下操作：

```
if left > 400px then add a class which will show image one,
if left < 300px then add a class which will show image two,
if left >= 300px and <= 400px then add a class which will show no image 
```

非常感谢所有帮助。我对 JQuery 很陌生，但到目前为止我在想：

```
var left = $("li.roundabout-moveable-item").position.left;
$("li.roundabout-moveable-item").addClass("no-image");
if(left < 300px) {
    $('li.roundabout-moveable-item").addClass("image-one");
}
elseif(left > 400px) {
    $('li.roundabout-moveable-item").addClass("image-one"); 
}
else {
    $('li.roundabout-moveable-item").addClass("no-image");
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:30:07.583

只需从您的代码中删除“px”并正确语法即可。我认为你需要这样的东西：

```
var left = $(".roundabout-moveable-item").position.left;
if(left < 300) {
$(".roundabout-moveable-item").addClass("image-one");
}
else if(left > 400) {
$(".roundabout-moveable-item").addClass("image-two"); 
}
else {
$(".roundabout-moveable-item").addClass("no-image");
} 
```

# javascript - 按钮单击的 Javascript 函数分配问题

> ID：11826388
> 
> 赞同：0
> 
> 时间：2012-08-06T10:20:23.403
> 
> 标签：javascript, html

> **可能重复：**
> [在 for 循环中分配点击处理程序](https://stackoverflow.com/questions/4091765/assign-click-handlers-in-for-loop)

我对javascript有点天真。我有这个应该在按钮单击时运行的 javascript 代码。按钮是在循环中动态生成的。我所期望的是在每次单击按钮时都会收到不同的变量。但我收到的总是数组中的最后一个变量。请参阅下面的代码。有人在这里看到明显错误的地方吗？

```
<!doctype html>
<html> 
<head>      
<script  type="text/javascript"> 

var myCars=["Saab","Volvo","BMW"]; 

    function loadCars() {
var carList = document.getElementById('mydiv');

for(var i=0;i < myCars.length ; i++ ){

//Append button
        var el = document.createElement("button");
        var car = myCars[i];
        el.name = "view_car";
        el.id = "view_car";
        el.value = "View car";
        el.type = "button";
        el.title = "View car "+i;
        el.innerHTML = "View car "+car;
        el.onclick = function() { 
            showMe(car,i);
        };

    carList.appendChild(el);
}

}

function showMe(carName,index){

    alert("Selected car="+carName +" , index="+index);
}

    </script>

</head>

<body  onload="loadCars()">

Cars will be loaded here 
<div  id="mydiv" class="carlist"></div>

</body>
</html> 
```

![按钮点击输出](../Images/4b90991397b4d2883c86a32bde11a4e0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:27:15.847

没有什么明显的错误。但是，您在函数内部使用`car`和。两者都依赖于外部并且被操纵。您必须使用闭包来打破此引用：`i``onclick``car``i`

```
 el.onclick = (function(carname,index){
        return function() { 
            showMe(carname,index);
        };
    })(car,i); 
```

# python - 每次执行方法后暂停

> ID：11826389
> 
> 赞同：2
> 
> 时间：2012-08-06T10:20:24.030
> 
> 标签：python, time

我尝试在每次执行方法后添加一个暂停，有一种方法可以自动执行吗？其实我有这样的事情：

```
import time
def test (arg):
    print arg
    time.sleep(0.1)
class Foo (Object):
   def __init__ (self, a, b):
       self.a = a
       self.b = b
       time.sleep(0.1)
   def printer (self, arg):
       print arg
       time.sleep(0.1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:39:22.710

这与@Fedor Gogolev 的解决方案基本相同，只是它使用类装饰器而不是元类。

```
import time
import inspect
import functools

def sleep(f):
    @functools.wraps(f)    
    def wrapper(*args, **kwargs):
        result = f(*args, **kwargs)
        time.sleep(0.1)
        return result
    return wrapper

def sleeper(cls):
    for name, method in inspect.getmembers(cls, inspect.ismethod):
        setattr(cls, name, sleep(method))
    return cls

@sleeper
class Foo(object):
   def __init__(self, a, b):
       self.a = a
       self.b = b
   def printer(self, arg):
       print arg

f = Foo(1,2)
f.printer('hi') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T10:32:51.013

是的，您可以使用[元类](http://docs.python.org/reference/datamodel.html#customizing-class-creation)在创建时修改您的类方法，并使用特殊的装饰器装饰每个函数。在你的情况下，它可能是这样的：

```
#! /usr/bin/env python
#-*- coding:utf-8 -*-

import time

from inspect import isfunction
from functools import wraps

def sleep_decorator(func):
    @wraps(func)
    def inner(*args, **kwargs):
        result = func(*args, **kwargs)
        time.sleep(0.1)
        return result
    return inner

class BaseFoo(type):

    def __new__(cls, name, bases, dct):
        for name in dct:
            if isfunction(dct[name]):
                dct[name] = sleep_decorator(dct[name])
        return type.__new__(cls, name, bases, dct)

class Foo (object):
    __metaclass__ = BaseFoo

    def __init__ (self, a, b):
        self.a = a
        self.b = b

    def printer (self, arg):
        print arg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:33:32.893

您可以查看装饰器（例如，可以使用类装饰器对每个类方法应用睡眠），但除此之外，不 - 不是真的。一种或另一种方式，如果你想让它睡觉，你应该明确地说明它。这样，如果有人想重用您的代码或进行计时等...等...等...

# selenium - 访问 selenium 中的 css 类属性

> ID：11826392
> 
> 赞同：3
> 
> 时间：2012-08-06T10:20:27.570
> 
> 标签：selenium, automated-tests

我有一个 HTML`<div>`元素并希望使用 Selenium 检查它是否左对齐。然而，`float:left`CSS 属性是在 CSS 类中定义的。

有什么方法可以通过 Selenium 访问 CSS 类属性？或者还有其他方法可以获得这个值吗？

```
<div class="myclass">
...
</div> 
```

在 sample.css

```
.myclass{
   float:left;
} 
```

我试图使用`getEval()`-`this.page().findElement("foo")`来找到一种获取 CSS 类属性的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:30:25.683

使用 webdriver，您可以使用 css 选择器：

```
WebElement element = driver.findElement(By.cssSelector(".myclass"));
String float = element.getCssValue("float"); 
```

参见WebElement 的[Javadoc](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html)

**更新答案！**

# oauth-2.0 - 使用 oauth 2.0 检索谷歌联系人

> ID：11826402
> 
> 赞同：1
> 
> 时间：2012-08-06T10:20:48.770
> 
> 标签：oauth-2.0, google-contacts-api, google-api-client

我在这里一直在努力获取google联系人，我得到了用户的个人信息，但无法获取用户的联系人。出现以下错误：401（需要授权）

> https://www.google.com/m8/feeds/contacts/xyz@gmail.com/full?oauthtoken=[object%20Object]&callback=jQuery162xxxxxxxxxx_13xxxxxxxxxx2&_=13xxxxxx。

```
$.ajax({
                    url: "https://www.google.com/m8/feeds/contacts/default/full",
                    dataType: "jsonp",
                    headers: "GData-Version: 3.0",
                    data:{accessToken: authResult },
                    success: function (data) {
                        console.log("json"+JSON.stringify(data));
                    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:08:51.660

在您的第一个代码块（带有 URL）中，您指定查询参数 name `oauthtoken`。在第二个代码块中，您指定参数值`accessToken`.

这个参数值实际上应该是`access_token`. 见这里： [https ://developers.google.com/accounts/docs/OAuth2UserAgent#callinganapi](https://developers.google.com/accounts/docs/OAuth2UserAgent#callinganapi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T09:27:41.013

我回答了这个：

```
// OAuth configurations   
    var config = {
      'client_id': 'xxxxxx.apps.googleusercontent.com',
      'scope': 'https://www.google.com/m8/feeds/contacts/default/full'          
    };

gapi.auth.authorize(config, function(data) {
      // login complete - now get token
      var token = gapi.auth.getToken();
      token.alt = 'json';
      // retrieve contacts
      jQuery.ajax({
        url: 'https://www.google.com/m8/feeds/contacts/default/full/?max-results=999999',
        dataType: 'jsonp',
        data: token,
        success: function(data) { successGmail(data); }
      });
    }); 
```

那里：[修改 JSONP 请求的 HTTP 标头](https://stackoverflow.com/questions/3350778/modify-http-headers-for-a-jsonp-request/23885498#23885498)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:27:39.567

您可以尝试在标头中将您的令牌写为“授权：承载”+ authResult，所以我认为您的代码在此示例中应如下所示：

```
$.ajax({
       url: "https://www.google.com/m8/feeds/contacts/default/full",
       type: "GET",
       dataType: "jsonp",
       headers: {
                   "Authorization": "Bearer " + authResult,
                   "GData-Version": "3.0"
                },
       success: function (data) {
            console.log("json"+JSON.stringify(data));
       }
}); 
```

JQuery Docs 对 ajax headers 参数进行了以下说明：

与请求一起发送的附加标头键/值对的映射[...]

这就是为什么我将您的原始字符串更改为地图的原因。类型默认是 GET，所以它是可选的。

希望这可以帮助

# php - 在 Javascript/PHP 中解析具有时间延迟的 XML 文件

> ID：11826404
> 
> 赞同：0
> 
> 时间：2012-08-06T10:20:50.500
> 
> 标签：php, javascript, xml

我正在制作一个具有重播功能的在线记分牌。记分牌游戏的每一秒都以 XML 格式存储在数据库中的记录中，以便对其进行解析。用户应该能够选择要重玩的游戏，JS 会以秒为单位重玩游戏。

由于每场比赛持续约 15 分钟，其中包含大量事件，因此一场比赛将附有约 3mb 左右的数据。我认为最好的方法是根据游戏数据创建一个临时 XML 文件，以便将 JS 文件预加载到浏览器中进行解析和显示。

那么，这会是最好的方法吗？如果不是，那会是什么？

注意：它是用 PHP 制作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:33:59.183

发送 3 MB 数据并在客户端解析它可能需要相当长的时间。为了确保数据占用更少的空间并更快地解析，您可以使用 JSON 而不是 XML。

另外，你需要一次整个文件吗？如果没有，我会建议执行以下操作的 AJAX“加载程序”例程：

1.  读取 x 分钟的游戏数据
2.  解析它并将其添加到数据池中
3.  请求 x 分钟，数据加载后跳转到 2。

x 的理想值是网络速度与重放速度的问题。每个请求都会添加一些 HTTP 标头和 TCP 开销，因此请使用不同的网络条件对其进行测试。

# iphone - 如何使用 localscope App 之类的指南针创建 TableViewCell

> ID：11826405
> 
> 赞同：0
> 
> 时间：2012-08-06T10:20:50.973
> 
> 标签：iphone, objective-c, ios

这里的例子：

![](../Images/e654e6e27ec41cc670c661dc21885122.png)

查看 UITableViewCell 右侧的指南针

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:26:40.177

用于`CLLocationManager`获取您的位置和航向，然后计算每个坐标的相对方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:10:00.667

**@kyr** is right, you can calculate direction BY `CLLocationManager`, and about the rotated arows images, These could be static images with round background and arrow on it, everytime you calculate direction, you can rotate the Image by `CGAffinetransform` and `CGAffineTransformMakeRotation`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:12:57.780

Use CLLocationManager to get the heading.

```
-(void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading {
    CLLocationDirection true = [newHeading trueHeading];
    CLLocationDirection magnetic = [newHeading magneticHeading];
} 
```

# android - 由于依赖项冲突，无法完成安装

> ID：11826417
> 
> 赞同：0
> 
> 时间：2012-08-06T10:21:43.577
> 
> 标签：android, eclipse, adt

我想在我的 Eclipse 中更新 ADT 插件。我在[ADT Plugin](http://developer.android.com/tools/sdk/eclipse-adt.html#troubleshooting)中所做的一切。但得到如下错误，

![在此处输入图像描述](../Images/da1549dcc17089a72af2ff6077c822c7.png)

**错误信息：**

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: Eclipse IDE for Java Developers 1.4.2.20120213-0813 (epp.package.java 1.4.2.20120213-0813)
  Software currently installed: Shared profile 1.0.0.1329999971888 (SharedProfile_epp.package.java 1.0.0.1329999971888)
  Only one of the following can be installed at once: 
    Eclipse IDE for Java Developers 1.4.2.20120213-0813 (epp.package.java 1.4.2.20120213-0813)
    Eclipse IDE for Java Developers 1.3.2.20110218-0812 (epp.package.java 1.3.2.20110218-0812)
  Cannot satisfy dependency:
    From: Shared profile 1.0.0.1329999971888 (SharedProfile_epp.package.java 1.0.0.1329999971888)
    To: epp.package.java [1.3.2.20110218-0812] 
```

如果有人遇到这种情况，请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:03:07.640

我已经从安装的软件位置删除了[http://download.eclipse.org/tools/ve/updates/1.5.0/ 。](http://download.eclipse.org/tools/ve/updates/1.5.0/)现在错误已清除。但**我不知道这是正确的解决方法**。但我是`frequently facing this issue with eclipse when updating the software`。至于现在，我已经删除了那个。如果有人知道正确的解决方案，请更新。

# tsql - 在 T-SQL 中，OUTPUT INTO 是否仅适用于表变量？

> ID：11826422
> 
> 赞同：2
> 
> 时间：2012-08-06T10:22:19.733
> 
> 标签：tsql

我正在尝试从 INSERT 语句中检索最新的标识值。忽略 OUTPUT、@@IDENTITY 或 SCOPE_IDENTITY() 中哪个是更好的方法的问题，我可以使用 OUTPUT 直接插入 INT 变量，还是必须 OUTPUT 到表变量中然后从中选择？

即我可以做类似的事情（我知道这不起作用）：

```
DECLARE @NewId INT

INSERT INTO MyTable (foo)
OUTPUT INSERTED.id INTO @NewID
VALUES ('bar'); 
```

还是我总是必须这样做：

```
DECLARE @NewId TABLE (NewId INT)
DECLARE @NewIdAsInt INT

INSERT INTO MyTable (foo)
OUTPUT INSERTED.id INTO @NewID
VALUES ('bar');

SET @NewIdAsInt = (SELECT TOP(1) NewId FROM @NewId) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:27:04.887

OUTPUT INTO 必须引用某种表——表变量、临时表或其他表。

[http://msdn.microsoft.com/en-us/library/ms177564.aspx](http://msdn.microsoft.com/en-us/library/ms177564.aspx)

Scope_Identity() 到底有什么问题？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-26T13:25:36.380

根据 Microsoft Books on-line，如果更新语句影响了一个且只有一个记录，您可以将更新的信息捕获到变量名中。我试过了，效果很好。这是我的测试代码。自己试试，然后告诉我。

```
DECLARE @PreValue   VARCHAR(100),
        @PostValue  VARCHAR(100)

UPDATE t
SET @PreValue = t.Ter_Desc, @PostValue = t.Ter_Desc += ' Example Update'
FROM [dbo].[Dim_Territory] AS t
WHERE t.Ter_ID = 5

SELECT COALESCE(@PreValue, 'NV') AS 'Pre', COALESCE(@PostValue, 'NV') AS 'Post' 
```

# ruby-on-rails - 使用 mongoid 在范围内查找不同的行

> ID：11826424
> 
> 赞同：0
> 
> 时间：2012-08-06T10:22:36.103
> 
> 标签：ruby-on-rails, mongodb, mongoid

我的 Rails 项目中有两个模型：人物和嵌入式集合，城市。还有一个关于城市的空间指数。我想找到一个城市附近的所有人。

```
class Person
 include Mongoid::Document
 include Mongoid::Timestamps
 embeds_many :cities
 scope :nearby, ->(location, distance) { where('cities.location' => 
                    {'$near' => location , '$maxDistance' => distance})}

class City
  include Mongoid::Document
  include Mongoid::Timestamps
  embedded_in :person
  field :city
  field :location, type: Array  #0: latitude, 1: longitude

location_in_new_york = [40.71892, -74.00131] 
```

我的查询是

```
Person.nearby(location_in_new_york, 1) 
```

但是这样做，一个拥有两个非常接近的城市的人会被发现两次。我怎样才能避免这种行为？我不想在 ruby​​ 中减少这个，因为我想保持我的范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:40:50.280

虽然不如仅仅能够调用`.distinct`一个标准那么干净，但这种解决方法给出了预期的结果：

```
Person.find(Person.nearby(location_in_new_york, 1).distinct(:_id)) 
```

但是，这不能（如所写）作为范围起作用，因此您必须将其设为类方法。就个人而言，我会考虑向 mongoid 添加一个补丁来添加一个`.unique`方法来做你想要的（因为当你使用它的不同运算符时，MongoDB 负责返回字段值而不是文档：[http ://www.mongodb.org/display /DOCS/聚合](http://www.mongodb.org/display/DOCS/Aggregation)）

# android - 如何在自己的对象空间上进行旋转？

> ID：11826425
> 
> 赞同：1
> 
> 时间：2012-08-06T10:22:38.910
> 
> 标签：android, rotation, opengl-es-2.0

我正在绘制一个立方体。我希望它在对象空间中旋转。下面的代码使立方体围绕其自身以外的某个轴移动。所以任何建议提前感谢。

```
 public void onSurfaceCreated(GL10 unused, EGLConfig config){
    // Set the background frame color
    GLES20.glClearColor(0.5f, 0.2f, 0.1f, 1.0f);

    Matrix.setLookAtM(viewMatrix, 0, 0.0f, 0.0f, -5.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f);

    cube = new Cube();     
}           

//  @Override
public void onSurfaceChanged(GL10 unused, int width, int height){
    GLES20.glViewport(0, 0, width, height);        
    float ratio = (float) width / height;
    float angle, near, far, bottom, top,left, right;
    angle = 45.0f;
    near = 1.0f;
    far = 10.0f;

    top = near * (float)Math.tan(angle*(Math.PI/360.0));
    bottom = -top;
    left = bottom * ratio;
    right = top * ratio;

    Matrix.frustumM(projectionMatrix, 0, left, right, bottom, top, near, far);
}

//@Override 
public void onDrawFrame(GL10 unused) {        
    // Draw background color
    GLES20.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    Matrix.setRotateM(rotationXMatrix, 0, mAngleX, 1.0f, 0.0f, 0.0f);
    Matrix.setRotateM(rotationYMatrix, 0, mAngleY, 0.0f, 1.0f, 0.0f);
    Matrix.multiplyMM(rotationMatrix, 0, rotationXMatrix, 0, rotationYMatrix, 0);
    Matrix.multiplyMM(modelViewMatrix, 0, rotationMatrix, 0, viewMatrix, 0);
    Matrix.multiplyMM(ModelViewProjectionMatrix, 0, projectionMatrix, 0, modelViewMatrix, 0);

    cube.draw(ModelViewProjectionMatrix, modelViewMatrix);      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:51:29.473

算法：

1.  从 ModelMatrix * playerCentre 获取当前模型位置 (x,y,z)
2.  将 ModelMatrix 设置为 IdentityMatrix
3.  将对象转换为 0,0,0
4.  将 z 轴旋转到 0
5.  沿 y 轴平移 ds
6.  旋转到 zAngle 的总旋转
7.  使用步骤 3、4、5、6 设置 ModelMatrix
8.  重复步骤 1
9.  重复步骤 2
10.  将对象转换为 0,0,0
11.  将 z 轴旋转到 zAngle
12.  将对象平移到步骤 1 中的模型位置 + 步骤 8 中的模型位置

代码：

```
private static void updateModel(int upDown, float xAngle, float yAngle, float zAngle) {
    Matrix.setIdentityM(GLES20Renderer._RMatrix, 0);

    //Matrix.rotateM(GLES20Renderer.RMatrix, 0, xAngle, 0, 1, 0);
    //Matrix.rotateM(GLES20Renderer.RMatrix, 0, yAngle, 1, 0, 0);
    Matrix.rotateM(GLES20Renderer._RMatrix, 0, zAngle, 0, 0, 1);
    _ds = upDown - GLES20Renderer._upDown;

    float[] RMatrix         = new float[16];
    float[] TMatrix         = new float[16];
    float objX              = 0.0f;
    float objY              = 0.0f;
    float objZ              = 0.0f;
    float objTempTranslateX = 0.0f;
    float objTempTranslateY = 0.0f;
    float objTempTranslateZ = 0.0f;

    //////////////////////////////////////
    // transformations for nozzle start //
    //////////////////////////////////////
    Matrix.multiplyMV(GLES20Renderer._uNozzleCentreMatrix, 0, GLES20Renderer._ModelMatrixNozzle, 0, GLES20Renderer._uNozzleCentre, 0);
    //collision parameter
    objX    = GLES20Renderer._uNozzleCentreMatrix[0];
    objY    = GLES20Renderer._uNozzleCentreMatrix[1];
    objZ    = GLES20Renderer._uNozzleCentreMatrix[2];

    Log.d("ZAXIS", "OBJY: " + GLES20Renderer._uNozzleCentreMatrix[1]);

    Matrix.setIdentityM(GLES20Renderer._ModelMatrixNozzle, 0);
    Matrix.setIdentityM(TMatrix, 0);
    Matrix.translateM(TMatrix, 0, 0, (float)GLES20Renderer._ds/10, 0);
    Matrix.multiplyMM(GLES20Renderer._ModelMatrixNozzle, 0, TMatrix, 0, GLES20Renderer._ModelMatrixNozzle, 0);
    Matrix.multiplyMM(GLES20Renderer._ModelMatrixNozzle, 0, GLES20Renderer._RMatrix, 0, GLES20Renderer._ModelMatrixNozzle, 0);
    Matrix.multiplyMV(GLES20Renderer._uNozzleCentreMatrix, 0, GLES20Renderer._ModelMatrixNozzle, 0, GLES20Renderer._uNozzleCentre, 0);

    objTempTranslateX   = GLES20Renderer._uNozzleCentreMatrix[0];
    objTempTranslateY   = GLES20Renderer._uNozzleCentreMatrix[1];
    objTempTranslateZ   = GLES20Renderer._uNozzleCentreMatrix[2];

    Matrix.setIdentityM(GLES20Renderer._ModelMatrixNozzle, 0);
    Matrix.setIdentityM(TMatrix, 0);
    Matrix.setIdentityM(RMatrix, 0);
    Matrix.translateM(TMatrix, 0, 0, 0, 0);
    Matrix.rotateM(RMatrix, 0, 0, 0, 0, 1);
    Matrix.multiplyMM(GLES20Renderer._ModelMatrixNozzle, 0, RMatrix, 0, TMatrix, 0);
    Matrix.multiplyMM(GLES20Renderer._ModelMatrixNozzle, 0, GLES20Renderer._RMatrix, 0, GLES20Renderer._ModelMatrixNozzle, 0);
    Matrix.setIdentityM(TMatrix, 0);
    if( Math.abs(GLES20Renderer._ds) > 0 ) {
        Matrix.translateM(TMatrix, 0, (objX + objTempTranslateX), (objY + objTempTranslateY), (objZ + objTempTranslateZ));          
    }
    Matrix.multiplyMM(GLES20Renderer._ModelMatrixNozzle, 0, TMatrix, 0, GLES20Renderer._ModelMatrixNozzle, 0);

    Matrix.multiplyMM(GLES20Renderer._MVPMatrixNozzle, 0, GLES20Renderer._ViewMatrix, 0, GLES20Renderer._ModelMatrixNozzle, 0);
    Matrix.multiplyMM(GLES20Renderer._MVPMatrixNozzle, 0, GLES20Renderer._ProjectionMatrix, 0, GLES20Renderer._MVPMatrixNozzle, 0);
    /////////////////////////////////////
    // transformations for nozzle end  //
    /////////////////////////////////////

    ////////////////////////////////////
    // transformations for body start //
    ////////////////////////////////////
    Matrix.multiplyMV(GLES20Renderer._uBodyCentreMatrix, 0, GLES20Renderer._ModelMatrixBody, 0, GLES20Renderer._uBodyCentre, 0);
    //collision parameter
    objX    = GLES20Renderer._uBodyCentreMatrix[0];
    objY    = GLES20Renderer._uBodyCentreMatrix[1];
    objZ    = GLES20Renderer._uBodyCentreMatrix[2];

    Matrix.setIdentityM(GLES20Renderer._ModelMatrixBody, 0);
    Matrix.setIdentityM(TMatrix, 0);
    Matrix.setIdentityM(RMatrix, 0);
    Matrix.translateM(TMatrix, 0, 0, 0, 0);
    Matrix.rotateM(RMatrix, 0, 0, 0, 0, 1);
    Matrix.multiplyMM(GLES20Renderer._ModelMatrixBody, 0, RMatrix, 0, TMatrix, 0);
    Matrix.setIdentityM(TMatrix, 0);
    Matrix.translateM(TMatrix, 0, 0, (float)GLES20Renderer._ds/10, 0);
    Matrix.multiplyMM(GLES20Renderer._ModelMatrixBody, 0, TMatrix, 0, GLES20Renderer._ModelMatrixBody, 0);
    Matrix.multiplyMM(GLES20Renderer._ModelMatrixBody, 0, GLES20Renderer._RMatrix, 0, GLES20Renderer._ModelMatrixBody, 0);
    Matrix.multiplyMV(GLES20Renderer._uBodyCentreMatrix, 0, GLES20Renderer._ModelMatrixBody, 0, GLES20Renderer._uBodyCentre, 0);

    objTempTranslateX   = GLES20Renderer._uBodyCentreMatrix[0];
    objTempTranslateY   = GLES20Renderer._uBodyCentreMatrix[1];
    objTempTranslateZ   = GLES20Renderer._uBodyCentreMatrix[2];

    Matrix.setIdentityM(GLES20Renderer._ModelMatrixBody, 0);
    Matrix.setIdentityM(TMatrix, 0);
    Matrix.setIdentityM(RMatrix, 0);
    Matrix.translateM(TMatrix, 0, 0, 0, 0);
    Matrix.rotateM(RMatrix, 0, 0, 0, 0, 1);
    Matrix.multiplyMM(GLES20Renderer._ModelMatrixBody, 0, RMatrix, 0, TMatrix, 0);
    Matrix.multiplyMM(GLES20Renderer._ModelMatrixBody, 0, GLES20Renderer._RMatrix, 0, GLES20Renderer._ModelMatrixBody, 0);
    Matrix.setIdentityM(TMatrix, 0);
    if( Math.abs(GLES20Renderer._ds) > 0 ) {
        Matrix.translateM(TMatrix, 0, (objX + objTempTranslateX), (objY + objTempTranslateY), (objZ + objTempTranslateZ));          
    }
    Matrix.multiplyMM(GLES20Renderer._ModelMatrixBody, 0, TMatrix, 0, GLES20Renderer._ModelMatrixBody, 0);

    Matrix.multiplyMM(GLES20Renderer._MVPMatrixBody, 0, GLES20Renderer._ViewMatrix, 0, GLES20Renderer._ModelMatrixBody, 0);
    Matrix.multiplyMM(GLES20Renderer._MVPMatrixBody, 0, GLES20Renderer._ProjectionMatrix, 0, GLES20Renderer._MVPMatrixBody, 0);
    ///////////////////////////////////
    // transformations for body end  //
    ///////////////////////////////////

    GLES20Renderer._upDown  = upDown;
    //collision parameter
    Matrix.multiplyMV(GLES20Renderer._uPlayerCentreMatrix, 0, GLES20Renderer._ModelMatrixNozzle, 0, GLES20Renderer._uPlayerCentre, 0);
} 
```

这里 upDown 是按下可点击 ui 视图（例如 ui 按钮）沿头部指向的位置移动立方体的次数的当前值，实际上有两个按钮，一个用于向上，另一个用于向下，在上面的代码中我有两个立方体喷嘴和主体

**请尝试自己实现该算法，因为给出的代码有一个错误导致 objY 自动递增**

我有更少的时间，所以不会编辑代码以供您随时使用，即来自我的应用程序。

我已经发布了同样的问题，但我正在等待回复，算法是绝对正确的，只有代码有错误。

这是我的问题： **[https ://stackoverflow.com/questions/11817450/rotation-about-local-z-axis](https://stackoverflow.com/questions/11817450/rotation-about-local-z-axis)**

# credit-card - 澳洲信用卡地址验证系统

> ID：11826433
> 
> 赞同：2
> 
> 时间：2012-08-06T10:23:17.270
> 
> 标签：credit-card

是否有澳大利亚信用卡地址验证系统？

我们正在尝试找到一种方法来验证我们拥有的帐单地址与实际卡上的帐单地址是否匹配以进行反欺诈。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T12:07:21.720

您可以通过执行 CV2/AVS 检查来做到这一点。支票的 CV2 部分使用卡验证值（CVV 或 CVV2，也称为卡安全码或 CSC）。这是卡背面的三位数代码（或 Amex 上的四位数）。

这是在交易时捕获的，但不会存储到磁盘中。**它应该与来自帐单地址的数字一起**在授权请求中传递。这些最终传递给发卡机构，发卡机构验证卡和地址匹配，然后返回一个值，例如“所有详细信息匹配”或“仅地址匹配”等。

与您的付款处理商联系。他们很可能会支持此功能。

# php - 匹配数据库表中的任何一组字段

> ID：11826434
> 
> 赞同：2
> 
> 时间：2012-08-06T10:23:24.727
> 
> 标签：php, mysql, database, cakephp

我正在为我的应用程序使用 CakePHP 2.1.3。我有以下条件要匹配：

**“从 4 个给定字段中查找与任意 3 个字段匹配的记录。”**

4 个字段是`first_name`, `last_name`, `dob`, `father_name`。我想找到与以上给定 4 个字段中的任何 3 个匹配的那些记录。

执行此操作的 sql 查询是什么？如果可能的话，我如何使用模型在 CakePHP 中做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:39:23.517

我认为条件集可能是：

```
 array('OR'=>array(
        array( "AND" => array (
            "Model.first_name" =>$val1 ,
            "Model.last_name" =>$val2 ,
            "Model.DOB" =>$val3 ,
        ),
        array( "AND" => array (
            "Model.last_name" =>$val2 ,
            "Model.DOB" =>$val3 ,
            "Model.father_name" =>$val4 ,
        ),
        array( "AND" => array (
            "Model.DOB" =>$val3 ,
            "Model.father_name" =>$val4 ,
            "Model.first_name" =>$val1 ,
        ),
        array( "AND" => array (
            "Model.father_name" =>$val4 ,
            "Model.first_name" =>$val1 ,
            "Model.last_name" =>$val2 ,
        ),

) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T12:10:23.110

如果我理解你的问题，你的主要问题似乎是性能。为了提高性能，您必须减少`if(value1==value2)`

```
 array('OR'=>array(
    array( "AND" => array (
        "Model.first_name" =>$val1 ,
        "Model.last_name" =>$val2 ,
        "Model.DOB" =>$val3 ,
    ),
    array( "AND" => array (
        "Model.last_name" =>$val2 ,
        "Model.DOB" =>$val3 ,
        "Model.father_name" =>$val4 ,
    ),
    array( "AND" => array (
        "Model.DOB" =>$val3 ,
        "Model.father_name" =>$val4 ,
        "Model.first_name" =>$val1 ,
    ),
    array( "AND" => array (
        "Model.father_name" =>$val4 ,
        "Model.first_name" =>$val1 ,
        "Model.last_name" =>$val2 ,
    ),

   ) 
```

该解决方案进行 12n 次测试。

我建议你做一个子查询：

- 第一个获取与四个字段中的任何一个匹配的记录

- 然后对返回的结果运行上述查询

如果名称有很大的可变性，这似乎是可信的，那么第一个查询将删除大部分数据，使您的查询进行 4n 次多一点的测试。

如果数据是高度同质的（每个人都有相同的名字），您可以查找 1 个字段，然后是 2，然后是 3。

使用另一种解决方案进行编辑：

我想“dob”代表出生日期。在 150000 人中，Dot 将均匀分布，这似乎是合乎逻辑的。

所以我做一个测试看看是否`Model.dot==value`。那么我们有两种可能：

它返回 true：我们必须检查其他三个字段，看看是否至少有 2 个适合

它返回 false：我们必须检查其余三个是否完全匹配。

第一个子集会很小，因此在性能方面并不重要。第二个将只需要每条记录进行 4 次测试，而不是之前的 12 次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T10:37:50.070

```
$conditions = array('OR'=>array($your_input=>array('first_name', 'last_name', 'dob'),
                                    $your_input=>array('first_name', 'last_name', 'father_name'),
                                    $your_input=>array( 'last_name', 'dob', 'father_name'),
                                    ));
    $result = $this->Model->find('All',array('fields'=>'required_field','conditions'=>$conditions)); 
```

# android - 消息通知问题

> ID：11826435
> 
> 赞同：1
> 
> 时间：2012-08-06T10:23:26.947
> 
> 标签：android, android-intent

我有一种方法可以创建由参数接收的通知消息，其中用户单击 Habre 带有该消息的新窗口。

我在创建第二个通知时遇到的问题，是否打开了第一个通知，是在这个打开的新屏幕中始终显示第一个通知，尽管如果我把消息正确的话，通知的描述。

我留下代码，我希望 podais 帮助，因为我不坏

建筑规范通知

```
@SuppressWarnings("deprecation")
private void mostrarNotificacion(Context context, String msg)
{

    //Obtenemos una referencia al servicio de notificaciones
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager notManager =
        (NotificationManager) context.getSystemService(ns);

    //Configuramos la notificación
    int icono = android.R.drawable.stat_sys_warning;
    CharSequence textoEstado = "Alerta!";
    long hora = System.currentTimeMillis();

    Notification notif =
        new Notification(icono, textoEstado, hora);

    //Configuramos el Intent
    Context contexto = context.getApplicationContext();
    CharSequence titulo = "Nuevo Mensaje";
    CharSequence descripcion = msg;    //Here if you display the right message

    Intent notIntent = new Intent(contexto,
        MensajeActivity.class);     

        notIntent.putExtra("mensaje", msg);

    PendingIntent contIntent = PendingIntent.getActivity(
        contexto, 0, notIntent, 0);

    notif.setLatestEventInfo(
        contexto, titulo, descripcion, contIntent);

    //AutoCancel: cuando se pulsa la notificaión ésta desaparece
    notif.flags |= Notification.FLAG_AUTO_CANCEL;
    notif.defaults |= Notification.DEFAULT_VIBRATE;

    //Enviar notificación
    notManager.notify(1, notif);
} 
```

新代码屏幕

```
public class MensajeActivity extends Activity{

    private TextView mensaje;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_mensaje);

        mensaje = (TextView)findViewById(R.id.lblMensaje);

        Bundle extras = getIntent().getExtras();
        if(extras !=null)
        {
            mensaje.setText(extras.getString("mensaje"));   //Here always displays the first message received

        }else{
            mensaje.setText("vacio");
        }       
    }
} 
```

另一个疑问是。当我收到通知时，如何在应用程序的图标上添加数字？例如sms的图标，sms当一个新的地方一个数字表示有多少已经收到sms

谢谢

# java - 仅在需要时显示双精度数的小数

> ID：11826439
> 
> 赞同：32
> 
> 时间：2012-08-06T10:23:44.497
> 
> 标签：java, android, double, decimal, string-formatting

我遇到了双（小数）这个问题。
当a double = 1.234567 然后我使用`String.format("%.3f", myString);`
所以结果是1.234

但是当我的双倍是 10
结果将是 10,000
我希望这是 10

他们是否可以说他只需要在“有用”时显示小数？

我看到了一些关于这个的帖子，但那是 php 或 c#，找不到关于这个的 android/java 的东西（也许我看起来不太好）。

希望你们能帮助我解决这个问题。

编辑，现在我使用这样的东西：`myString.replace(",000", "");`
但我认为他们是一个更“友好”的代码。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-08-06T10:30:40.853

带有 # 参数的[DecimalFormat](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html#DecimalFormat%28java.lang.String%29)是要走的路：

```
public static void main(String[] args) {

        double d1 = 1.234567;
        double d2 = 2;
        NumberFormat nf = new DecimalFormat("##.###");
        System.out.println(nf.format(d1));
        System.out.println(nf.format(d2));
    } 
```

会导致

```
1.235
2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T10:27:40.507

不要使用双打。你可能会失去一些精度。这是一个通用功能。

```
public static double round(double unrounded, int precision, int roundingMode)
{
    BigDecimal bd = new BigDecimal(unrounded);
    BigDecimal rounded = bd.setScale(precision, roundingMode);
    return rounded.doubleValue();
} 
```

你可以调用它

```
round(yourNumber, 3, BigDecimal.ROUND_HALF_UP); 
```

“精度”是您想要的小数位数。

[从这里复制。](https://stackoverflow.com/a/3596122/614807)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:29:08.317

**尝试一下**

```
double amount = 1.234567 ;
  NumberFormat formatter = new DecimalFormat("##.###");
  System.out.println("The Decimal Value is:"+formatter.format(amount)); 
```

# python - Django模型中多对多关系查询集的错误输出

> ID：11826440
> 
> 赞同：0
> 
> 时间：2012-08-06T10:23:49.077
> 
> 标签：python, sql, django, django-models, django-queryset

我有以下 Django 模型：

```
class User(models.Model):
    username = models.CharField(max_length=50, unique=True)
    name = models.CharField(max_length=100)

class Url(models.Model):
    user = models.ManyToManyField(User)
    url = models.URLField()

class Keywords(models.Model):
    url = models.ManyToManyField(Url)
    keyword = models.CharField(max_length=100) 
```

现在，我想要数据库中任意两个用户的所有常用关键字：

```
username1 = 'user1'
username2 = 'user2' 
```

**尝试1：**

`Keyword.objects.filter(url__user__username=username1).filter(url__user__username=username2).values('keyword', 'url__url').distinct()`

```
// Returns empty list []   [ Wrong ] 
```

**尝试2：**

```
k1 = [ k.keyword for k in Keyword.objects.filter(url__user__username=username1) ]
k2 = [ k.keyword for k in Keyword.objects.filter(url__user__username=username2) ]

common_k = list(set(k1).intersection(set(k2)))
print common_k

// Return list of common keys (As Expected) [ Correct ] 
```

我在尝试 1 中做错了什么？

请注意：乍一看`.filter(url__user__username=username1).filter(url__user__username=username2)`似乎是错误的，但它有一个多对多的关系，它应该可以工作。

**尝试 1 的测试输入**

```
newuser1 = User.objects.get(username='newuser1')
newuser2 = User.objects.get(username='newuser2')

url = Url(url='http://common.com/')
url.save()
url.user.add(newuser1)
url.user.add(newuser2)

key = Keyword(keyword='common')
key.save()
key.url.add(url) 
```

现在，我对此进行了尝试 1 和尝试 2，并得到了预期的正确结果。我得到and`common`的关键字。`newuser1``newuser2`

现在，尝试 2 肯定是正确的，那么我在尝试 1 中做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:39:37.800

**Attempt1**将 url 过滤到用户名为 username1 的用户，然后将该查询的结果过滤到用户名为 username2 的用户。但是第一个列表只能包含 username1 的列表，因此第二个过滤器的结果将始终为空。

**但是，您会在Attempt2**中找到这两个查询之间的交集，而不是按顺序应用它们。这是完全不同的，并且会给出正确的答案。

您可以将此方法添加到您的用户类中，以便您可以这样做`user1.commonKeywordsWithUser(user2)`，即

```
class User(models.Model):
    username = models.CharField(max_length=50, unique=True)
    name = models.CharField(max_length=100)

    def commonKeywordsWithUser(user):
        k1 = [ k.keyword for k in Keyword.objects.filter(url__user__username=self.name) ]
        k2 = [ k.keyword for k in Keyword.objects.filter(url__user__username=user.name) ]

        return list(set(k1).intersection(set(k2))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:07:36.627

```
set_1 = set(Keyword.objects.filter(url__user__username=username1).values_list('keyword'))
set_2 = set(Keyword.objects.filter(url__user__username=username2).values_list('keyword'))
common_keywords = list(set_1 & set_2) 
```

**单一查询的解决方案：**

```
from django.db.models import Q
Keyword.objects.filter(url__user__username=username1).exclude(~Q(url__user__username=username2)).values('keyword', 'url__url').distinct() 
```

**使用单个查询的解决方案（来自 2 个用户的不同 url 产生相同的关键字未删除）：**

```
from django.db.models import Q
Keyword.objects.filter(url__user__username=username1).exclude(~Q(url__user__username=username2)).values('keyword', 'url__url').distinct('keyword', 'url__url') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T05:25:31.150

您可以尝试以下方法（对于尝试 1）：

```
Keyword.objects.filter(url__user__username=username1, keyword__in=Keyword.objects.filter(url__user__username=username2).values_list('keyword', flat=True)).values_list('keyword', flat=True).distinct() 
```

# sql-server - 如何使用 SQL 查询降低聚集索引扫描成本

> ID：11826441
> 
> 赞同：27
> 
> 时间：2012-08-06T10:23:49.303
> 
> 标签：sql-server, indexing

如何降低下面提到的查询的聚集索引扫描成本

```
DECLARE @PARAMVAL varchar(3)

set @PARAMVAL = 'CTD'
select * from MASTER_RECORD_TYPE where RECORD_TYPE_CODE=@PARAMVAL 
```

如果我运行上面的查询，它显示索引扫描 99 %

请在下面找到我的表格细节：

![在此处输入图像描述](../Images/04e6e1c96a09de216ac3cd2da5682ec4.png)

下面我粘贴了我的表格索引：

```
CREATE TABLE [dbo].[MASTER_RECORD_TYPE] ADD  CONSTRAINT [PK_MASTER_REPORD_TYPE] PRIMARY KEY CLUSTERED 
(
    [Record_Type_Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON, FILLFACTOR = 80) ON [PRIMARY]
GO 
```

请告知我如何降低索引扫描成本？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-06T10:26:46.907

首先 - 如果你搜索`RECORD_TYPE_CODE`你应该确保在该列上有一个索引。

除此之外主要有两点：

*   **不要**使用`SELECT *`——它总是必须返回聚集索引来获取完整的数据页；使用`SELECT`明确指定要使用的列的a

*   如果可能的话，尝试找到一种方法来拥有一个**覆盖**的非聚集索引，例如一个包含满足查询所需的所有列的索引

如果您有这样一个覆盖非聚集索引，那么查询优化器很可能会使用该覆盖索引（而不是作为全表数据的实际聚集索引）来获取结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:27:47.083

您需要尝试使用覆盖索引。但是您将遇到的问题是您正在使用`SELECT *`. 你真的需要整张唱片吗？

无论哪种方式，添加`RECORD_TYPE_CODE`到另一个索引都会对查询有所帮助，因为至少可以从索引页面中读取该字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:32:34.083

在您的查询中，您使用`RECORD_TYPE_CODE`了不属于`clustered index`且也不包含在其中的列`non-clustered index`。因此 SQL Optimizer 将决定扫描聚集索引以比较 where 子句谓词。

[为什么对我的聚集索引进行扫描？](https://stackoverflow.com/questions/1161303/why-is-there-a-scan-on-my-clustered-index)

# ruby-on-rails - 按日期搜索时出现奇怪的错误

> ID：11826442
> 
> 赞同：0
> 
> 时间：2012-08-06T10:23:54.297
> 
> 标签：ruby-on-rails, search, jquery-ui-datepicker

我正在尝试制作报告页面，用户将在该页面上选择开始和结束日期并按下按钮报告。然后隐藏的 div 变得可见。

****我的搜索不是部分的。****

**我正在使用 jquery_datepicker 所以这是我的代码：**

 **```
<%= form_tag(:controller => "financial_reports", :action => "index", :method => "post")%>
  <%= datepicker_input "financial_report","start_date", :dateFormat => "dd/mm/yy" %>
  <%= datepicker_input "financial_report","end_date", :dateFormat => "dd/mm/yy" %>
 <%=  submit_tag "Run Report"%>
<% end %> 
```

这是我来自控制器的代码：

```
 def search
   @financial_reports = current_user.financial_reports.search(params[:start_date], params[:end_date]
  render :index
  end 
```

在我的模型中：

```
def self.search(from,to)
  find(:all, :conditions => [ "BETWEEN ? AND ?", from, to])
 end 
```

它给了我错误：

```
 ActiveRecord::StatementInvalid in FinancialReportsController#search 
    SELECT `financial_reports`.* FROM `financial_reports`  WHERE `financial_reports`.`user_id` = 67 AND (BETWEEN NULL AND NULL) 
```

在此之下：

```
 Parameters:

  {"utf8"=>"✓",
 "authenticity_token"=>"AMobLLRV3aAlNn6b4Au+1nRP2AN1TLQcBCytBXhDA/g=",
  "type"=>"",
   "financial_report"=>{"start_date"=>"05/08/2012",
      "end_date"=>"11/08/2012"},
    "commit"=>"Run Report",
   "method"=>"post"} 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:39:50.530

如果始终设置这两个参数，则可以使用：

`@financial_reports = current_user.financial_reports.where(:created_at => ((params[:start_date].to_date)..(params[:end_date].to_date))`

如果不是这种情况，您可以（例如）这样做：

```
@financial_reports = current_user.financial_reports

if params[:start_date].present?
  @financial_reports = current_user.financial_reports.where("created_at >= ?", params[:start_date])
end

if params[:end_date].present?
  @financial_reports = current_user.financial_reports.where("created_at <= ?", params[:end_date])
end 
```

您可能希望将其封装在作用域中。**

# iphone - 如何在 iPhone 中安装 MDM 配置文件？

> ID：11826443
> 
> 赞同：0
> 
> 时间：2012-08-06T10:24:10.237
> 
> 标签：iphone, mdm, profiles

我想开发一个解决方案管理器 iPhone。据我所知，MDM 可以接受它。但是我如何制作 MDM 服务器。如何生成/安装 iPhone MDM 配置文件。

我应该怎么办？

请帮我。

此致！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:36:36.717

要构建 MDM 服务器，您可以执行以下提到的步骤

1) 遵循 MDM_Protocol [pdf](https://media.blackhat.com/bh-us-11/Schuetz/BH_US_11_Schuetz_InsideAppleMDM_WP.pdf)。

2）关注此页面： http: [//www.softhinker.com/in-the-news/iosmdmvendorcsrsigning](http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning)

然后验证几件事。

使用此命令从 customerPrivateKey.pem 中删除密码

openssl rsa -in customerPrivateKey.pem -out PlainKey.pem 然后使用此命令合并从门户[https://identity.apple.com/pushcert/](https://identity.apple.com/pushcert/)下载的您的 APNS 证书（例如 CustomerCompanyName.pem）

cat CustomerCompanyName.pem PlainKey.pem > PlainCert.pem 现在这个 PlainCert.pem 文件可以在您的服务器中用作 APNS/MDM 证书。

3) 关注这些链接[link0](https://stackoverflow.com/questions/7441607/how-to-configure-install-mdm-server-for-iphone-and-ipad)、[link1](https://stackoverflow.com/questions/9900997/ios-enterprise-developer-account-get-device-token)、[link2](https://stackoverflow.com/questions/9743690/generate-mdm-certificate)、[link3](https://stackoverflow.com/questions/10425093/how-to-generate-development-mdm-apns-certificate)以及其他与堆栈溢出中的 MDM 相关的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:46:17.657

为了与 iOS 设备通信，移动设备管理 (MDM) 服务器使用 Apple 推送通知服务。请查看此[链接](http://www.apple.com/ipad/business/integration/mdm/)。

# php - Symfony：清除学说缓存

> ID：11826444
> 
> 赞同：46
> 
> 时间：2012-08-06T10:24:14.683
> 
> 标签：php, caching, symfony, doctrine

我需要在[Symfony中清除我](http://symfony.com/)[的学说](http://www.doctrine-project.org/)缓存。

命令行中必须有某种方法可以*清除缓存*。

或者我应该在哪里找到并删除属于缓存的文件？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-08-06T10:27:44.727

对于 Symfony 3+：

```
 php bin/console 
```

将列出所有命令，以下与缓存相关：

```
 php bin/console doctrine:cache:clear-metadata 
 php bin/console doctrine:cache:clear-query  
 php bin/console doctrine:cache:clear-result 
```

* * *

在 Symfony 3 之前：

```
app/console 
```

将列出你如何做到这一点

```
 app/console doctrine:cache:clear-metadata 
 app/console doctrine:cache:clear-query  
 app/console doctrine:cache:clear-result 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-05T09:16:17.347

如果您想在代码中执行此操作（来自[Doctrine 的文档](http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/reference/caching.html#all)）：

> 如果您只是想删除所有缓存条目，您可以使用 deleteAll() 方法执行此操作。
> 
> ```
> $cacheDriver = new \Doctrine\Common\Cache\ArrayCache();
> $deleted = $cacheDriver->deleteAll(); 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-29T19:08:28.277

如果您使用 APC，您也可以只调用代码

```
<?php
$deleted = apc_clear_cache() && apc_clear_cache('user'); 
```

在同一服务器上的 php 页面中。这就是 Antho 答案中的 deleteAll() 方法所做的，但您不依赖于 Doctrine Classes。顺便说一句：完整的缓存将被刷新——以防万一你将它用于非 Doctrine 的东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-02T11:39:03.157

我以为我对学说结果缓存发疯了——最后我不得不重新启动 memcached。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-07T13:59:47.090

我知道这篇文章的标题是 Symfony 2，但对于那些来自谷歌的人来说，如果你有 Symfony 3+，它会是：

```
bin/console 
```

相对于：

```
app/console 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-02T19:09:57.313

也许这有点晚了，但就我而言，学说并没有在生产中生成代理类，因为我将其更改`auto_generate_proxy_classes`为 true：

```
#symfony2&3 app/config/config.yml
#symfony4 config/packages/doctrine.yaml (by default true since 4.2)

doctrine:
    orm:
        auto_generate_proxy_classes: true #"%kernel.debug%" 
```

# asp.net - 如何检查 XML 节点是否存在

> ID：11826445
> 
> 赞同：1
> 
> 时间：2012-08-06T10:24:26.897
> 
> 标签：asp.net, .net, xml, vb.net

我正在尝试检查 XML 中是否存在节点“密钥”，如果没有，我必须指定“无节点”。下面是我正在使用的代码，但它抛出了错误

“你调用的对象是空的。” 在我对照Nothing检查nodevalue的那一行。如何检查 XML 节点是否存在？

```
 Dim doc As New XmlDocument()
            doc.Load(strPath)
            'Create an XmlNamespaceManager for resolving namespaces.
            Dim nsmgr As New XmlNamespaceManager(doc.NameTable)
            nsmgr.AddNamespace("vvp", "http://schemas.abc.efg.IJ/zyx/")

            'Fetch nodes
            Dim MyRootNode As XmlNode = doc.SelectSingleNode("//vvp:provider", nsmgr)
            If (MyRootNode("Key").InnerXml <> Nothing) Then
               OrgCode = "No Node"
            End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:54:27.360

你可以这样做

```
Dim MyRootNode As XmlNode = doc.SelectSingleNode("//vvp:provider", nsmgr)
Dim keyNodelst As XmlNodeList=MyRootNode.SelectNodes(".//Key")
            If (!keyNodelst.Count>0) Then
               OrgCode = "No Node"
            End If 
```

或者

```
Dim MyRootNode As XmlNode = doc.SelectSingleNode("//vvp:provider", nsmgr)
    Dim keyNode As XmlNode=MyRootNode.SelectSingleNode(".//Key")
                If (keyNode==null) Then
                   OrgCode = "No Node"
                End If 
```

对于 xpath，请参阅[http://msdn.microsoft.com/en-us/library/ms256086.aspx](http://msdn.microsoft.com/en-us/library/ms256086.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:07:27.817

大概如果没有键，那么`MyRootNode("Key")`什么都不是，这就是为什么你得到空引用异常？

我原以为这个简单的修改应该可以工作：

```
If (MyRootNode("Key") is Nothing) Then
    OrgCode = "No Node"
End If 
```

（即我们删除了获取内部 XML 的尝试）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:44:40.117

您可以再次使用 SelectSingleNode 方法来尝试找到您的“关键”节点。如果您的变量为 Nothing，则它不存在。

有关详细信息，请参阅以下链接 [http://social.msdn.microsoft.com/Forums/en/xmlandnetfx/thread/d7cbb3d3-6c1a-48fd-a2ab-40b9910fe453](http://social.msdn.microsoft.com/Forums/en/xmlandnetfx/thread/d7cbb3d3-6c1a-48fd-a2ab-40b9910fe453)

# android - 字节分配内存不足

> ID：11826446
> 
> 赞同：1
> 
> 时间：2012-08-06T10:24:28.537
> 
> 标签：android

这是我在 Android 日志中收到的错误，确切地说是：

```
08-06 12:16:28.763: E/dalvikvm-heap(27065): Out of memory on a 184-byte allocation. 
```

“184”取决于，有时是184，有时是24，其他42......等等......

我到处找，这个错误对于加载图片的活动很常见，我的问题是我没有加载图片，而只是加载文本。我的活动是一个 ListActivity，我从数据库加载数据（只有文本），过了一会儿，总是同样的错误。

谁知道怎么解决？？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T06:41:47.593

由于您使用的是 listActivity，请检查您是否实施了[此处](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)显示的优化。

我通过实施优化解决了与列表视图类似的问题

以下是有关[优化](http://dl.google.com/googleio/2010/android-world-of-listview-android.pdf)`listAdapter`

> 缓慢的方式

```
public View getView(int position, View convertView, ViewGroup parent) { 
     View item = mInflater.inflate(R.layout.list_item_icon_text, null);
     ((TextView) item.findViewById(R.id.text)).setText(DATA[position]); 
     ((ImageView) item.findViewById(R.id.icon)).setImageBitmap( 
             (position & 1) == 1 ? mIcon1 : mIcon2);
     return item; 
} 
```

> 正确的方式

```
 public View getView(int position, View convertView, ViewGroup parent) { 
     if (convertView == null) { 
         convertView = mInflater.inflate(R.layout.item, parent, false); 
     } 
     ((TextView) convertView.findViewById(R.id.text)).setText(DATA[position]); 
     ((ImageView) convertView.findViewById(R.id.icon)).setImageBitmap( 
             (position & 1) == 1 ? mIcon1 : mIcon2); 
     return convertView; 
 } 
```

> 最好的办法

```
static class ViewHolder { 
        TextView text; 
        ImageView icon; 
}

 public View getView(int position, View convertView, ViewGroup parent) { 
         ViewHolder holder; 

         if (convertView == null) { 
             convertView = mInflater.inflate(R.layout.list_item_icon_text, 
                     parent, false);
             holder = new ViewHolder(); 
             holder.text = (TextView) convertView.findViewById(R.id.text); 
             holder.icon = (ImageView) convertView.findViewById(R.id.icon); 

            convertView.setTag(holder); 
        } else { 
            holder = (ViewHolder) convertView.getTag(); 
        } 

        holder.text.setText(DATA[position]); 
        holder.icon.setImageBitmap((position & 1) == 1 ? mIcon1 : mIcon2); 

        return convertView; 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:30:43.873

有时，当您尝试执行太长的 SQL 语句时（例如，您没有`String[]`在查询中使用变量的参数，而是在语句中硬编码它们）时，您可能会收到 OutOfMemory 错误。

尝试编辑您的 where 语句以`field=?`格式化，并在指定的查询参数中指定变量。

看到这个线程：[Sqlite Out of Memory when prepare update statement](https://stackoverflow.com/questions/5619750/sqlite-out-of-memory-when-preparing-update-statement)

如果这不是你的问题，那么我想不出任何其他信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-27T20:43:04.587

**就我而言，大尺寸图像**引起的问题。我删除了其中一些（暂时进行测试）并且问题解决了。请注意，在我的情况下，问题只是在我尝试应用程序的最低 API 级别（**API 16**）。

最后，优化它们以永久解决问题。

# c - 我们是否需要明确关闭其写端已经关闭的管道的读端？

> ID：11826451
> 
> 赞同：10
> 
> 时间：2012-08-06T10:24:52.330
> 
> 标签：c, pipe, fgets, inter-process-communicat

我有以下情况。

1.  我创建了一个管道。

2.  分叉了一个子进程。

3.  *子进程显式*关闭管道的读取端并写入管道的写入端并退出而不关闭任何东西（我认为 exit 应该代表子进程关闭所有打开的文件/管道描述符）。

4.  *Parent显式*关闭管道的写入端，并使用`fgets`until`fgets`返回 NULL从管道的读取端读取。即它完全读取。

现在我的问题是，为什么父级在完成读取后需要明确关闭管道的读取端？从读取端读取完整数据后，系统完全删除管道不是明智的吗？

我在父项中明确关闭了读取端，并且`Too many file descriptors`在打开更多管道时迟早会出错。我的假设是，一旦管道的写入端关闭并且数据已从读取端完全读取，系统会自动删除管道。因为你不能从管道中两次！

那么，一旦数据完全读写结束，系统不删除管道的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T10:32:10.457

您是正确的，一旦孩子退出，系统将关闭管道的写入端。但是，如果子`fork`s 或将写入端的副本传递给另一个进程，则该管道的另一个写入端可能打开。

系统仍然可以判断管道一端的所有描述符何时已关闭（显式关闭或因为拥有进程退出）。关闭管道另一端的描述符仍然没有意义，因为当父进程试图关闭管道另一端的描述符时会导致混乱；任何一个：

*   fd 已被系统关闭，在这种情况下，当它试图关闭已关闭的 fd 时会出现错误；或者
*   fd 已被重用，更糟糕的是，它现在正在关闭一个完全不相关的 fd。

从系统的角度来看，一旦关闭了一端的所有描述符，它很可能已经丢弃了管道，因此您不必担心那里的效率低下。更重要的是用户空间进程应该有一致的体验，这意味着除非特别要求，否则不要关闭描述符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T10:38:12.547

文件描述符不会被系统关闭，直到进程退出。对于管道以及任何其他文件描述符都是如此。

没有数据的管道（或任何其他文件）与关闭的文件描述符之间存在很大差异。
当文件描述符关闭时，系统可以将其编号重新用于新的文件描述符。然后，当您阅读时，您会得到其他东西。所以在你关闭了一个文件描述符之后，你就不能再使用它了。

Now imagine that once there's no more data, the system would automatically close the file descriptor. This would make the number available for reuse, and a subsequent unrelated open may get it. Now the reader, who doesn't know yet that there's no more data, will read from what it thinks is the pipe, but will actually read from another file.

# vb.net - 将固定长度语句从 VB6 转换为 VB.Net

> ID：11826460
> 
> 赞同：0
> 
> 时间：2012-08-06T10:25:29.247
> 
> 标签：vb.net, string, vb6, vb6-migration

我们执行基于协议的数据发送到设备需要格式化数据包的设备。

样本数据包数据是`XXFSXXXFSXXXXXXXFSXXXXXX`. 提到的`X`是每个字符串的最大长度大小。如果数据小于字符串最大长度，它应该用 NULL 字符填充`..11FS123FS1234XXXX`（剩余的 X 将用 NULL 填充）。

我只是想将 VB6 函数之一转换为 VB.Net，下面是我面临问题的转换语句

```
Option Strict Off
Option Explicit On
Imports Microsoft.VisualBasic.Compatibility.VB6
Imports System
Imports System.Runtime.InteropServices
Module FunctionCmd_Msg

    Public FunCommand_Msg As Fun_CommandMessage = Fun_CommandMessage.CreateInstance()
    'Function Command Message
    <StructLayout(LayoutKind.Sequential, CharSet:=CharSet.Auto)> _ _
    Public Structure Fun_CommandMessage
        <VBFixedString(1)> Public one As String
        <VBFixedString(1)> Public two As String
        <VBFixedString(3)> Public three As String
        Dim five As String
        <VBFixedString(8)> Public four As String
        Public Shared Function CreateInstance() As Fun_CommandMessage
            Dim result As New Fun_CommandMessage
            result.one = String.Empty
            result.two = String.Empty
            result.three = String.Empty
            result.four = String.Empty
            result.five = String.Empty
        End Function
    End Structure
End Module 
```

假设：

```
one = "1"
two = "1"
three = "123"
four = "5678"           
five = "testing"
FS = character (field separator) 
```

在连接字符串时，我需要一个固定长度的字符串，如下所示：

```
one & two & FS & three & FS & five & FS & four 
```

输出：因为四是一个8长度的固定长度字符串，剩下的4个字符应该用null填充，如下所示

```
11 FS 123 FS testing FS 5678XXXX 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T10:30:17.380

固定长度的字符串在 .NET 中不再有意义。Microsoft 试图提供一个类似的类以便于升级，但事实是您应该根据使用情况更改代码：

固定长度字符串在您的 VB6 代码中做了什么？是不是没有充分的理由？`String`然后在 .NET 中使用普通的。

是为了与 C API 互操作吗？然后使用编组在 C API 调用中设置数组的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-21T00:35:49.167

忘记固定长度，使用常规的 vb.net 字符串。他们会很好地返回任何调用该代码的代码，包括互操作。

所以，只要垫好你的弦，你就可以参加比赛了。

事实上，构建一个 Msg 类来为你做这些脏活。

这对我来说看起来很不错：

注意我是如何设置的，你只在一个地方定义字符串的长度。（所以我使用 len(m_string) 来确定代码中从 THEN 开始的长度。

此外，对于调试和此示例，我使用 X 代替 vbcharNull（您应该使用它）进行测试。

现在，在你的代码中？

只需使用这个：

```
 Dim Msg As New MyMsg

    With Msg
        .one = "A"
        .two = "B"
        .three = "C"
        .four = "D"
        .Five = "E"
    End With

    Debug.WriteLine(Msg.Msg("*") & vbCrLf)

    Debug.WriteLine("total lenght = " & Len(Msg.Msg("X").ToString)) 
```

输出：

```
A*B*CXX*EXXXXXXX*DXXXXXXX

total lenght = 25 
```

我在您的代码中注意到您在四个之前有五个 - 但如果这是您想要的，那么没问题

请注意，该类始终为您维护长度。

因此，只需将此代码粘贴到您的模块甚至是新的单独类中。

```
Public Class MyMsg
    'Dim cPad As Char = vbNullChar
    Dim cPad As Char = "X"

    Private m_one As String = New String(cPad, 1)
    Private m_two As String = New String(cPad, 1)
    Private m_three As String = New String(cPad, 3)
    Private m_four As String = New String(cPad, 8)
    Private m_five As String = New String(cPad, 8)

    Public Property one As String
        Get
            Return m_one
        End Get
        Set(value As String)
            m_one = MyPad(value, m_one)
        End Set
    End Property
    Public Property two As String
        Get
            Return m_two
        End Get
        Set(value As String)
            m_two = MyPad(value, m_two)
        End Set
    End Property

    Public Property three As String
        Get
            Return m_three
        End Get
        Set(value As String)
            m_three = MyPad(value, m_three)
        End Set
    End Property

    Public Property four As String
        Get
            Return m_four
        End Get
        Set(value As String)
            m_four = MyPad(value, m_four)
        End Set
    End Property

    Public Property Five As String
        Get
            Return m_five
        End Get
        Set(value As String)
            m_five = MyPad(value, m_five)
        End Set
    End Property

    Public Function Msg(FS As String) As String
        Return m_one & FS & m_two & FS & m_three & FS & m_five & FS & m_four
    End Function

    Private Function MyPad(str As String, strV As String) As String
        Return Strings.Left(str & New String(Me.cPad, Len(strV)), Len(strV))
    End Function

End Class 
```

如前所述，将 char 的注释掉的“X”行更改回 vbCharNull。

当然，您仍然可以选择分隔符。我用了

```
Msg.Msg("*") 
```

所以我使用了“*”，但你可以使用空格或任何你想要的东西。

# c# - 列表在更新时覆盖每个条目

> ID：11826465
> 
> 赞同：0
> 
> 时间：2012-08-06T10:25:40.763
> 
> 标签：c#, list

我有一个 BoxPair 类型的静态公共列表，我正在尝试向其中写入内容，但每次我向其中添加新条目时，它都会更改每条记录。我希望有人能看到这里出了什么问题，因为它让我有点发疯。完整的添加代码如下：

```
public static List<BoxPair> CreateBoxPair (int iBoxCount)
{
    SetTopBox primary;
    SetTopBox backup;

    for (int i = 0; i < iBoxCount; i++)
    {
        primary = new SetTopBox();
        backup = new SetTopBox();

        primary.IBoxNumber = i;             
        primary.SDeviceName = "Box" + (i + 1).ToString("00");
        primary.Role = Box.ROLE_PRIMARY;

        backup.IBoxNumber = i;
        backup.SDeviceName = "Box" + (i + 1).ToString("00");
        backup.Role = Role.ROLE_BACKUP;

        lstBoxes.Add(new BoxPair(primary, Role));
        lstBoxes.Add(new BoxPair(backup, Role));

        foreach (BoxPair p in lstBoxes)
        {
            Declarations.BOXES.Add(p);
        }             
    }                        

    return lstBoxes;
} 
```

我知道这将是一些基本的东西，但据我所知，我一直在使用新的主/备份盒，所以没有什么冲突。任何想法将不胜感激。

干杯。

PS我发的每一篇文章，都会删除第一个单词，所以我必须输入两次。关于为什么会发生这种情况的任何想法？

编辑：由于下面列出的所有方法都给出了相同的结果，我猜这是一个无法解决的问题。因此，我将回到绘图板上尝试以不同的方式处理这个问题。感谢所有的帮助，无论如何，伙计们:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:35:53.813

从评论中，我对有效代码的最佳选择如下：

```
public static List<BoxPair> CreateBoxPair (int iBoxCount)
{
    for (int i = 0; i < iBoxCount; i++)
    {
        var primary = new SetTopBox();
        var backup = new SetTopBox();

        primary.IBoxNumber = i;             
        primary.SDeviceName = "Box" + (i + 1).ToString("00");
        primary.Role = Box.ROLE_PRIMARY;

        backup.IBoxNumber = i;
        backup.SDeviceName = "Box" + (i + 1).ToString("00");
        backup.Role = Role.ROLE_BACKUP;

        var primaryPair = new BoxPair(primary, Role);
        var backupPair = new BoxPair(backup, Role);

        lstBoxes.Add(primaryPair);
        lstBoxes.Add(backupPair);

        Declarations.BOXES.Add(primaryPair);
        Declarations.BOXES.Add(backupPair);
    }                        

    return lstBoxes;
} 
```

我认为原始代码中有两个问题：

*   `primary`并`backup`在循环外声明。
*   循环内的`foreach`循环多次将条目添加到另一个集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:44:26.993

代替

```
lstBoxes.Add(new BoxPair(primary, Role));
lstBoxes.Add(new BoxPair(backup, Role));

foreach (BoxPair p in lstBoxes)
{
    Declarations.BOXES.Add(p);
} 
```

这样：

```
var p1 = new BoxPair(primary, Role);
var p2 = new BoxPair(backup, Role);
lstBoxes.Add(p1);
lstBoxes.Add(p2);
Declarations.BOXES.Add(p1);
Declarations.BOXES.Add(p2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:33:37.783

我认为您只是缺少 lstBoxes var 声明，`List<BoxPair> lstBoxes = new List<BoxPair>;.`

```
public static List<BoxPair> CreateBoxPair (int iBoxCount)
{
    SetTopBox primary;
    SetTopBox backup;

    List<BoxPair> lstBoxes = new List<BoxPair>();

    for (int i = 0; i < iBoxCount; i++)
    {
        primary = new SetTopBox();
        backup = new SetTopBox();

        primary.IBoxNumber = i;             
        primary.SDeviceName = "Box" + (i + 1).ToString("00");
        primary.Role = Box.ROLE_PRIMARY;

        backup.IBoxNumber = i;
        backup.SDeviceName = "Box" + (i + 1).ToString("00");
        backup.Role = Role.ROLE_BACKUP;

        lstBoxes.Add(new BoxPair(primary, Role));
        lstBoxes.Add(new BoxPair(backup, Role));

        foreach (BoxPair p in lstBoxes)
        {
            Declarations.BOXES.Add(p);
        }             
    }                        

    return lstBoxes;
} 
```

如果 lstBoxes 是一个不需要在函数中的公共变量，则不要返回它：

```
public static Void CreateBoxPair (int iBoxCount)
    {
        SetTopBox primary;
        SetTopBox backup;

        for (int i = 0; i < iBoxCount; i++)
        {
            primary = new SetTopBox();
            backup = new SetTopBox();

            primary.IBoxNumber = i;             
            primary.SDeviceName = "Box" + (i + 1).ToString("00");
            primary.Role = Box.ROLE_PRIMARY;

            backup.IBoxNumber = i;
            backup.SDeviceName = "Box" + (i + 1).ToString("00");
            backup.Role = Role.ROLE_BACKUP;

            lstBoxes.Add(new BoxPair(primary, Role));
            lstBoxes.Add(new BoxPair(backup, Role));

            foreach (BoxPair p in lstBoxes)
            {
                Declarations.BOXES.Add(p);
            }             
        }                        
    } 
```

# c - 哈希表中某些消息的百分比

> ID：11826466
> 
> 赞同：-2
> 
> 时间：2012-08-06T10:25:47.893
> 
> 标签：c, algorithm, hash, find, percentage

我正在寻找一种可以帮助我完成此任务的算法：我需要用 C 语言编写一个程序，该程序将从发送者到接收者的消息数量未知。就像 23 到 12、44 到 19 等一样，我需要返回所有负责超过 10% 消息的发送者\接收者。我被允许使用哈希表。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:56:26.493

[本文](http://www.cs.yale.edu/homes/el327/datamining2011aFiles/ASimpleAlgorithmForFindingFrequentElementsInStreamsAndBags.pdf)描述了一个算法。
它不使用哈希表，只是一个包含 10 个条目的简单数组（因为 10% = 1/10）。
它不是 100% 准确的——它肯定会找到使用 10% 的那些，但也可能会找到一些使用少于这个的。

算法的简要说明：

1.  维护一个包含 10 个项目和计数器的列表。最初列表是空的。
2.  对于输入中的每个项目，如果它在列表中，则增加计数。
3.  如果没有，请将其添加到列表中，计数为 1。
4.  如果此添加使列表长度超过 10，则减少列表中所有元素的计数，并删除那些下降到 0 的元素。确保列表将返回到 10 或更小的大小。

# java - 我相信 Java 是高度安全的，但实际上证明不是。哪个是对的？

> ID：11826467
> 
> 赞同：-5
> 
> 时间：2012-08-06T10:25:55.320
> 
> 标签：java, security, memory-leaks

我有一个大问题.. 在 Java 和 SUN Microsystems 的许多书籍中都告诉 JAVA 是高度安全的。但是我的一位同事说它不安全。
通过构造函数我们可以访问对象内存并且也可以修改..
他实际上做到了..但我相信JAVA是高度安全的..我爱JAVA..
请告诉我他说的是否正确？
Java不安全？
我如何证明 java 是高度安全的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T10:28:18.737

> 在 Java 和 SUN Microsystems 的许多书籍中都告诉我们 JAVA 是高度安全的。

与没有虚拟机相比，它更安全地免受来自远程机器的黑客攻击。

> 但是我的一位同事说它不安全。

任何形式的安全都可能被打破。

> 通过构造函数我们可以访问对象内存并且也可以修改..他实际上做到了..

这就是构造函数所做的。我看不出这会如何影响安全性。

> 但我相信 JAVA 是高度安全的..我爱 JAVA..

现在让他证明你可以这样做来修改另一台机器上的对象。

> 请告诉我他说的对吗？Java不安全？

我看不到该示例如何演示有关应用程序安全性的任何内容。

> 我如何证明 java 是高度安全的？

你不能，因为它不是。它只是比许多替代品更安全（即它是相对的东西）

# css - CSS 重置 JavaFX 中的自定义字体

> ID：11826469
> 
> 赞同：0
> 
> 时间：2012-08-06T10:26:06.460
> 
> 标签：css, fonts, label, javafx-2

当我在 JavaFX 2 中为标签设置自定义字体时，它可以工作。但是当我更改`-fx-font-size`CSS 样式表中的其他字体属性时，将使用默认字体而不是我的自定义字体。有没有办法在保持我的自定义字体的同时设置字体大小和颜色？或者是否可以在 CSS 样式表中为我的标签设置自定义字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:31:40.907

首先，确保检查您的自定义字体是否在可用/可加载列表中`Font.getFontNames()`。
然后通过以下任一方式检查其使用情况：

```
label.setStyle(
      "-fx-font-family: MyFont;"
    + "-fx-font-size: 32;"
    + "-fx-font-style: italic;"
    + "-fx-text-fill: blue"); 
```

或者

```
label.setFont(Font.font("MyFont", FontPosture.ITALIC, 32));
label.setTextFill(Color.BLUE); 
```

这2个是等价的。此外，您可以对 CSS 文件执行样式属性。更改字体属性`-fx-font-family`不应影响字体系列属性。

# c# - 每次我需要时如何保存 XML 文件并从他那里获取最新信息

> ID：11826474
> 
> 赞同：0
> 
> 时间：2012-08-06T10:26:32.937
> 
> 标签：c#

我想要指向 xml 文件的指针，当我需要从他那里读取一些信息时，我会直接转到这个 xml 文件中的位置并带来新的信息。

我怎样才能持有这个 xml ？我还需要提供更改此文件中信息的能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:35:37.153

您可以使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)类来检测 XML 文件何时被修改（并通过重新加载来做出反应）。MSDN 上的例子很有启发性。

你不能真的有一个“指向 xml 文件的指针”。如果文件预计相当大，我建议使用[XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)和[XmlWriter](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter%28v=vs.71%29.aspx)类来读取/写入 XML，或者如果文件大小可能适中，则建议使用 LINQ to XML 和[XElement类。](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)

如果您遇到任何特定的实施问题，请指定它们。

# google-api - 使用 REST API 创建时间驱动的触发器

> ID：11826479
> 
> 赞同：0
> 
> 时间：2012-08-06T10:26:58.083
> 
> 标签：google-api, google-apps-script, google-api-java-client

我正在考虑编写一些 Java 代码来为用户安装时间驱动的触发器（定期运行谷歌应用程序脚本）。但找不到用于操作触发器的 REST API。想知道是否有可能。谢谢你。

桑杰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T10:43:32.017

没有用于操作触发器的 REST API。但是，您可以在脚本中编写 doPost 函数，将其发布为 Web 应用程序并从 Java 代码执行 POST。当然，在 doPost() 函数中，您必须使用 ScriptApp API 设置触发器。

# javascript - html() 函数后的 jquery 事件

> ID：11826484
> 
> 赞同：10
> 
> 时间：2012-08-06T10:27:20.860
> 
> 标签：javascript, jquery, html, events

有没有办法在 html() 被触发后启动事件？如：

```
$.post("ajax.php", {data :data}, function(data){
   $("#countries").html(data, function(){
      alert("test");
   });
}); 
```

这是行不通的。

编辑：我问这个是因为我想用来自电话的信息做一些事情（另一个电话）......我想简化这个例子......我猜程序员总是想知道为什么......

所以这里是更新的例子

```
 $.post("ajax.php", {data :data}, function(data){
   $("#countries").html(data, function(){
        var id = $("#countries option:selected").attr("id");
        getRegions(id);
   });
}); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-06T10:43:20.613

是的你可以...

```
// create a reference to the old `.html()` function
var htmlOriginal = $.fn.html;

// redefine the `.html()` function to accept a callback
$.fn.html = function(html,callback){
  // run the old `.html()` function with the first parameter
  var ret = htmlOriginal.apply(this, arguments);
  // run the callback (if it is defined)
  if(typeof callback == "function"){
    callback();
  }
  // make sure chaining is not broken
  return ret;
}

// test it all works as expected (including chaining)
$("#mything").html("<div>My Thing</div>",function(){
  console.log("Just did my thing");
}).css({color: 'red'}) 
```

但是，就像其他人所说的那样，`.html()`同步是不必要的，因此您可以将代码放在它后面而不是回调中。

### 演示：http: [//jsfiddle.net/billymoon/a49P4/](http://jsfiddle.net/billymoon/a49P4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T10:28:59.220

`html()`是同步操作，而不是事件，因此它在逻辑上不会接受回调。

只需将您的代码放在它后面：

```
$('container').html(data);
alert('test'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T10:29:29.227

您可能也对这种语法感兴趣：

```
$(selector).html(function(index,oldHTML){
    alert("test");
    return data;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T10:32:01.493

您可以在 html 响应中包含 javascript 代码。内联示例：

```
 $("#content").html("hello\<script>\alert('hello');\</script\>");​ 
```

将更新 div 并执行代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T10:28:42.030

不，但没有理由你不能这样做：

```
$.post("ajax.php", {data :data}, function(data){
   $("#countries").html(data);
   var id = $("#countries option:selected").attr("id");
   getRegions(id);
}); 
```

# android - Android 中的语音转文本

> ID：11826489
> 
> 赞同：0
> 
> 时间：2012-08-06T10:27:57.257
> 
> 标签：android, speech-to-text

我想学习Android中的语音到文本转换。如果您知道任何教程链接，请告诉我。或者告诉我如何实现这一目标？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:34:09.610

试用适用于 Android 的 App Inventor。它具有将文本转换为语音的功能，反之亦然。App Inventor 的链接是[http://www.appinventor.mit.edu](http://www.appinventor.mit.edu)。App Inventor 易于学习和使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:41:48.797

查看 ApiDemos：`com.example.android.apis.app/TextToSpeechActivity.java`

# iphone - iPhone中的Foursquare api，从twitter和Facebook添加朋友，谁能解释这个功能？

> ID：11826493
> 
> 赞同：0
> 
> 时间：2012-08-06T10:28:04.463
> 
> 标签：iphone, ios, foursquare

我正在使用 Foursquare API。

为此，我想在 Foursquare 中添加我在 twitter/Facebook 中的朋友。

我在其 API 的 iPhone 示例中得到了一个函数。

```
 +(void)searchUserPhone:(NSArray*)phones
             email:(NSArray*)emails
           twitter:(NSArray*)twitters
     twitterSource:(NSString*)twitterSource
       facebookIDs:(NSArray*)bdids
              name:(NSString*)name
          callback:(Foursquare2Callback)callback; 
```

谁能告诉我如何使用这个功能？如果可能的话，任何人都可以向我索取样品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:55:09.427

请参阅 /users/search 端点的foursquare API 端点文档：[https ://developer.foursquare.com/docs/users/search](https://developer.foursquare.com/docs/users/search)

# database - SimpleCV 图像数据库导入

> ID：11826494
> 
> 赞同：0
> 
> 时间：2012-08-06T10:28:08.497
> 
> 标签：database, image, import, simplecv

我对 SimpleCV 比较陌生。我在 Windows Vista 上运行最新版本的 SimpleCV。问题：如何将包含图像的 zip 文件导入 SimpleCV？

该系统可以正常导入 (1) 本地驱动器上的单个图像和 (2) url 链接，但我无法将单个文件夹 (.zip) 从本地数据库导入系统。这就是我所做的：

machine_learning_data_set = "/Users/Arenzky/Desktop/testdataset.zip"

有人可以告诉我我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:51:29.943

目前我们不支持加载 zip 文件，尽管这可以作为一项功能添加。但是，我们可以加载图像目录。因此，如果您下载并解压缩文件，您可以使用以下命令加载目录：

```
from SimpleCV import ImageSet
imgs = ImageSet('/path/to/dir/images/') 
```

# ruby - 奖项中的 NoMethodError#index

> ID：11826495
> 
> 赞同：0
> 
> 时间：2012-08-06T10:28:09.737
> 
> 标签：ruby, ruby-on-rails-3

我刚刚开始，发现了一个我无法解决的问题。我正在创建一个带有两个模型（奖项和学生）的简单应用程序。`:award has_one :student`和`:student belongs_to :award`

我被告知在 app/views/awards/ show.html.erb 中，替换：

```
<%= @award.student_id %> 
```

和：

```
<%= @award.student.given_name %> <%= @award.student.family_name %> 
```

在 index.html.erb 中，替换：

```
<%= award.student_id %> 
```

和：

```
<%= award.student.given_name %> <%= award.student.family_name %> 
```

在此之后 localhost:3000/students 工作正常，但 localhost:3000/awards 不工作并给出以下错误：-

```
**NoMethodError in Awards#index**

Showing /home/redblink/rbtest/students/app/views/awards/index.html.erb where line #17 raised:

undefined method `given_name' for nil:NilClass

Extracted source (around line #17):

14:   <tr>
15:     <td><%= award.name %></td>
16:     <td><%= award.year %></td>
17:     <td><%= award.student.given_name %> <%= award.student.family_name %></td>
18:     <td><%= link_to 'Show', award %></td>
19:     <td><%= link_to 'Edit', edit_award_path(award) %></td>
20:     <td><%= link_to 'Destroy', award, method: :delete, data: { confirm: 'Are you sure?' } %></td> 
```

请尽快回复解决方案.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:38:51.510

问题是有一条`awards`记录的相应`students`记录不存在，因此它返回`nil`并且您可以调用`given_name`nil。

因此，您可以将其处理为：

写下：

`<%= award.student ? award.student.given_name : '' %> <%= award.student ? award.student.family_name : '' %>`

代替

`<%= award.student.given_name %> <%= award.student.family_name %>`

# android - 表格行在我的布局中包含包装内容

> ID：11826496
> 
> 赞同：0
> 
> 时间：2012-08-06T10:28:11.500
> 
> 标签：android, android-layout, android-emulator, android-xml

这是我的布局，我想通过编码将表格行添加到表格布局中。

**布局.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bgblack"
    android:orientation="vertical" >
    <ScrollView
        android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/linearLayout1" >

    <RelativeLayout
            android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/bgblack"
        android:orientation="vertical" >
    <TextView
            android:id="@+id/section_phone"
                android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/linearLayout1"
                android:background="@color/Grey"
            android:padding="2dp"
            android:text="@string/section_phone"
                android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@android:color/white"
            android:textStyle="bold" />
        <RelativeLayout
            android:id="@+id/detail_phone"
                android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/section_phone" >
                <TableLayout
                android:id="@+id/list_phone"
                    android:layout_width="fill_parent"
                android:layout_height="wrap_content" >
            </TableLayout>
        </RelativeLayout>
        </RelativeLayout>
</ScrollView>
</RelativeLayout> 
```

**表格行.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
    <LinearLayout
        android:id="@+id/details"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >
        <TextView
            android:id="@+id/detail_phone_title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:padding="5dp"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@color/Blue" />
        <TextView
            android:id="@+id/detail_phone_subtitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:drawableRight="@drawable/ic_contact_call"
            android:padding="5dp"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@android:color/white" />
    </LinearLayout>
</TableRow> 
```

但是当我看到输出表行没有全宽时。它只带有包装内容。

**输出**

![一半的布局输出](../Images/e0f6c4e956e809fff8e664b7559fdf7f.png)

那么你能帮我全屏输出吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:37:38.547

拉伸选定的列将解决您的问题。请参阅此链接。[TableLayout.html#attr_android:stretchColumns](http://developer.android.com/reference/android/widget/TableLayout.html#attr_android%3astretchColumns)

```
<!-- The zero-based index of the columns to stretch. -->
<TableLayout
        android:id="@+id/list_phone"
        android:stretchColumns="0"  
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </TableLayout> 
```

# javascript - 在javascript中获取根json元素

> ID：11826504
> 
> 赞同：1
> 
> 时间：2012-08-06T10:28:35.977
> 
> 标签：javascript, json

这是我的 json ... 使用 javascript .. 在这种情况下，我只想输出根的名称服务然后遍历数组中的各个元素

```
{
    services: {
        46: {
            servicetypeid: "27",
            serviceid: "51",
            servicename: "Parking",
            description: "Parking Related Payments",
            optioncode: [],
            inputid: [],
            price: [],
            categoryidentifier: []
        },
        47: {
            servicetypeid: "27",
            serviceid: "52",
            servicename: "Markets",
            description: "Markets Related Payments",
            optioncode: [],
            inputid: [],
            price: [],
            categoryidentifier: []
        },
        48: {
            servicetypeid: "27",
            serviceid: "53",
            servicename: "PSV",
            description: "Public Service Vehicles",
            optioncode: [],
            inputid: [],
            price: [],
            categoryidentifier: []
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:49:59.763

这不是 JSON 格式的数据，您可以遍历对象：要获取根键，您可以执行以下操作：

```
var rootKey;
for(var prop in tst) {
 console.log( prop ); //will give "services"
 rootKey = prop;
} 
```

并遍历所有项目：

```
for( var key in tst[rootKey] ) {
  for( var key1 in tst[rootKey][key] ) {
    console.log( "key:" + key1 + " --- Value:"+ tst[rootKey][key][key1] );
 }
} 
```

# php - 在 PHP 中提交表单丢失 @ 字符

> ID：11826506
> 
> 赞同：0
> 
> 时间：2012-08-06T10:28:36.737
> 
> 标签：php, javascript, forms

我的表格中有一个非常奇怪的问题，不知道如何解决。尝试搜索但一无所获。我有一个表单，我在 php 页面中使用 $get 接收数据来处理数据。奇怪的是，例如，当我在电子邮件等字段中插入 @ 时，@ 在发送数据的过程中会丢失。我在重定向到 php 页面之前的行中验证了 @ 是否存在并且它存在，所以我不知道这个字符在流程的下一步中丢失了。

有什么提示吗？

重定向来自我单击提交表单时调用的 javascript 函数：

```
window.location.href = 'index.php?pagina=candidaturasB&'+ qstringA; 
```

“qstringA”包含我表单的所有数据，如果在某些输入中我放了一个@，如果我在重定向行之前执行警报（qstringA），那么@就在那里，在那之后，在 php 页面的 url 中我收到数据的地方没有@。

例如：index.php?...&email="ren@something.com" 出现在 url "index.php?...&email="rensomething.com" 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:01:37.143

用于`urlencode()`每个表单数据：

例如：

```
$url = "index.php?pagina=candidaturasB";
$url .= "&email=".urlencode($_GET['email']);
$url .= "&data="urlencode($_GET['data']); 
```

并将结果字符串传递给`window.location.href`

# android - 在 WebView 控件中检测网页

> ID：11826508
> 
> 赞同：0
> 
> 时间：2012-08-06T10:28:43.590
> 
> 标签：android

如何使用android中的javacode检查网页是否在外部浏览器或Web视图控件中打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:46:53.037

一个想法：
在您拥有 WebView 控件的布局文件中再添加一个视图。这个视图将作为一个标志。将其可见性设置为 GONE。

然后在您的活动中尝试获取对它的引用。如果它返回 null - 这意味着无法找到视图，因此您在外部浏览器中，否则您在自定义布局中。

# asp.net-mvc - 使用改写功能 mvc4 创建一个下拉列表

> ID：11826522
> 
> 赞同：0
> 
> 时间：2012-08-06T10:29:32.430
> 
> 标签：asp.net-mvc, html.dropdownlistfor

我想创建一个下拉列表，让用户输入一个新值或从下拉列表中选择一个预定义的值。

可以在 mvc 中创建一个可编辑的下拉列表吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:48:18.350

是的，您可以使用 jQuery 通过[jQuery Select Autocomplete](https://github.com/gabehollombe/jquery-select-autocomplete)将您的选择转换为自动完成输入。执行此操作的代码非常简单：

```
<script type="text/javascript">
$(document).ready(function() {
  $('select.autocomplete').select_autocomplete();
});
</script> 
```

看看这里的现场演示：http: [//gabeholombe.github.com/jquery-select-autocomplete/](http://gabehollombe.github.com/jquery-select-autocomplete/)

# php - 如何调用php静态函数并将值传递给它

> ID：11826524
> 
> 赞同：0
> 
> 时间：2012-08-06T10:30:00.430
> 
> 标签：php

我知道这可能是一个基本问题，但是当我用谷歌搜索它时，为不同的 php 版本找到了不同的解决方案。简而言之，我有一个没有浪费你的时间。类`

```
class UploadHandler
{
    protected $options; 
    public static $path;

public $prop1='';  
function __construct($options=null,$x){
$this->prop1  = $x;
    $this->options = array(
        'script_url' => $this->getFullUrl().'/',
        'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).$this->getPath(),
        'upload_url' => $this->getFullUrl().$this->getPath(),` ....and so on 
```

AND里面的方法：

```
public function getPath() 
    {

return self::$path;
}

static public function setPath($autoSave) 
```

{

```
self::$path = $autoSave; 
```

}

在另一个地方我这样做： `require('upload.class.php');`.......//上面的类包含在这个里面

```
UploadHandler::setPath('/files/'); 
```

为什么它不起作用...??..请帮助我或指导我获得更好的教程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:01:53.883

这有效：

```
<?php

class UploadHandler {

    public static $path;

    public function __construct() {
    }

    public function getPath() {
        return self::$path;
    }

    static public function setPath( $autoSave ) {
        self::$path = $autoSave;
    }
}

echo '1: ', UploadHandler::getPath(), '<br />';

UploadHandler::setPath('/files/');

echo '2: ', UploadHandler::getPath(), '<br />';

?> 
```

# jquery - 在 ajax 更新后重新分配模型中的变量 $(document).ready

> ID：11826527
> 
> 赞同：0
> 
> 时间：2012-08-06T10:30:16.960
> 
> 标签：jquery, asp.net-mvc

这可能是一个简单的问题，我一直在思考，但我想不出需要做什么。

```
<div class="commentsMain">
      ... Contents loaded with ajax ...
</div>

<script type="text/javascript">
$(document).ready(function() {
    var maxPage = @Model.NumberOfPages;
    var nextPage = @Model.CurrentPage + 1;

    // Loads new comments and adds them to the comments main div
    $("#loadNextComments").live("click",function() {
        if (nextPage <= maxPage) {
            $("#loadNextCommentsDiv").remove();
            loadNewComments('@Url.Action("Comments", "Comments")', nextPage, @Model.CommentItemId, @Model.CommentItemType );
            nextPage++;
        }
    });
     // This function submits the comment and then the nextPage variable
     // is supposed to be set back to @Model.CurrentPage + 1
     $('#commentSubmitButton').on("click",submitComment(@Model.CommentItemId, @Model.CommentItemType, addAction, nextPage));
});
</script> 
```

在commentSubmitButton 单击后，我需要使用模型中的正确值重新分配nextPage 变量。我怎样才能做到这一点？我可以在 ajax“成功”函数中执行此操作，但该函数位于外部文件中，我不知道是否可以以某种方式从那里重新分配变量。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:40:47.793

删除`var`-keyword 之前`nextPage`并使`maxPage`变量全局化

# php - 致命错误：调用成员函数 append()

> ID：11826530
> 
> 赞同：0
> 
> 时间：2012-08-06T10:30:27.110
> 
> 标签：php, magento

我正在尝试创建一个自定义模块（研究目的）来显示特定用户的付款详细信息。

我被困在块和布局之间，并收到如下错误：

> 致命错误：调用成员函数 append()

```
<?php
class PITS_Pitsnews_PaymentController extends Mage_Core_Controller_Front_Action {

    protected function _getSession() {
        return Mage::getSingleton('customer/session');
    }

    public function indexAction() {
        $this->loadLayout();
        $this->_initLayoutMessages('customer/session');
        $session = $this->_getSession();
        if (!$this->_getSession()->isLoggedIn()) {
            $this->_redirect('customer/account/login/');
            return;
        }
        $this->getLayout()->getBlock('pitsnews')->append(
            $this->getLayout()->createBlock('pitsnews/pitsnews')
        );
        $this->getLayout()->getBlock('pitsnews/pitsnews')->assign('data', $data);
        $this->renderLayout();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:59:42.920

看起来像

```
$this->getLayout()->getBlock('pitsnews') 
```

此处不是布局对象，因此请验证：

*   如果您的布局标记将块注入此调度程序
*   如果您的扩展中没有布局文件，那么您需要在调用任何方法之前动态创建此块

# android - 列表在 AsyncTask 完成之前被清除

> ID：11826536
> 
> 赞同：0
> 
> 时间：2012-08-06T10:30:42.347
> 
> 标签：android, twitter, android-listview

我有一个从 Twitter 加载推文的 AsyncTask。我也有一个 PullToRefresh ListView...每当我拉刷新它时，listview 会立即清除，并且一旦加载数据，它就会被填充到 listview 中。

我的应用程序中有其他 ListViews 都具有相同的东西（PullToRefresh 和异步数据加载......）。在其他 ListViews 上不会发生这种情况。仅在 Twitter ListView 上。我究竟做错了什么？

这是我的代码：

```
 public class TwitterDownloader extends AsyncTask<Void, Void, String> {

    final Handler mHandler = new Handler();

    public TwitterDownloader() {
    }

    @Override
    public void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected String doInBackground(Void... params) {
        twitter4j.Twitter twitter = new TwitterFactory().getInstance();

        listTweets.clear();

            List<twitter4j.Status> statuses = null;

            try {
                statuses = twitter.getUserTimeline(
                        MainActivity.TWITTER_USERNAME, new Paging(1, 50));
            } catch (TwitterException e) {
                e.printStackTrace();
                Log.e(MainActivity.LOG_TAG, "TwitterException");
            }

            try {
                for (twitter4j.Status status : statuses) {
                    listTweets.add(status.getText());
                }
            } catch (NullPointerException npe) {
            }
        return null;
    }

    @Override
    public void onPostExecute(String unused) {
        MyCustomAdapter myAdapter = new MyCustomAdapter(myContext,
                R.layout.row_twitter, listTweets);
        setListAdapter(myAdapter);
        getListView().setTextFilterEnabled(true);

        String lastUpdate = (new SimpleDateFormat(
                "HH:mm")).format(new Date());

        pullToRefreshView.onRefreshComplete();
        pullToRefreshView.setLastUpdatedLabel(getString(R.string.last_updated) + ": "
                + lastUpdate);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:46:26.370

我不确定这一点，但在`doInBackground`AsyncTask 的方法中，你正在做`listTweets.clear();`. 获得结果后，您正在向其中添加数据。可能是这引起了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:24:13.547

我终于通过在我再次填写我的列表之前添加我所有的 clear() 语句来修复它（这是在一个 try catch 中）。

所以我的 doInBackground 方法中的新代码是：

```
try {
            listTweets.clear();
            listUsernames.clear();
            listDates.clear();
            listImageURLs.clear();
            listURLsOfTweets.clear();
            for (twitter4j.Status status : statuses) {
                listTweets.add(status.getText());
                listUsernames.add(status.getUser().getName());
                listDates.add(android.text.format.DateFormat
                        .getDateFormat(getApplicationContext()).format(
                                status.getCreatedAt())
                        + " "
                        + android.text.format.DateFormat.getTimeFormat(
                                getApplicationContext()).format(
                                status.getCreatedAt()));
                listImageURLs.add(status.getUser().getProfileImageURL()
                        .toString());

                StringBuffer address = new StringBuffer();
                address.append("http://twitter.com/#!/");
                address.append(status.getUser().getScreenName());
                address.append("/status/");
                address.append(status.getId());

                listURLsOfTweets.add(address.toString());
} 
```

# java - 单击按钮时如何在jtable中添加新行

> ID：11826538
> 
> 赞同：0
> 
> 时间：2012-08-06T10:30:43.697
> 
> 标签：java, swing, jtable, tablemodel

> **可能重复：**
> [向 JTable 添加行](https://stackoverflow.com/questions/295649/adding-rows-to-a-jtable)

我正在创建一个 jTable。最初它没有行。如果我们单击“添加”按钮，将插入一个新行。是否可以在 jTable 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:34:52.660

更新您的底层证券`TableModel`并触发适当的事件。或者，如果您使用 的扩展名`DefaultTableModel`，请使用该[`addRow`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.lang.Object%5B%5D%29)方法。

有关更多信息，请参阅[表格教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。

# c++ - c++-设置一个接受值列表的数组

> ID：11826539
> 
> 赞同：1
> 
> 时间：2012-08-06T10:30:45.863
> 
> 标签：c++, wxwidgets

我如何设置以下内容：

```
wxArrayString numberArray;
numberArray.Add(wxT("1"));
numberArray.Add(wxT("2"));
numberArray.Add(wxT("3"));
numberArray.Add(wxT("4"));
numberArray.Add(wxT("5"));
numberArray.Add(wxT("6"));
numberArray.Add(wxT("7"));
numberArray.Add(wxT("8"));
numberArray.Add(wxT("9")); 
```

不是专门写所有东西，而是像 1-9 这样的东西，所以这个数字数组包含 1-9 的所有内容，不包括 0 。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:02:19.760

```
// Add numbers 1-9 to numberArray
wxArrayString numberArray;

for (size_t i = 1; i <= 9; ++i)
    numberArray.Add(wxString::Format(wxT("%d"), i));

// Display content of numberArray
for (size_t i = 0; i < numberArray.size(); ++i)
    wxLogDebug(numberArray[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:43:57.243

如果我理解正确，你希望数组只接受一组数据吗？如果你，你可以创建一个这样的类：

```
class MyArray
{
    //your accepted data will be stored in this vector.
    std::vector<int> data;

    //the acceptable values will be stored in this set. 
    std::set<int> acceptable;

    public:
        MyArray()
        {
            // in the constructor we fill the set.
            for(int i=0; i<=10; i++)
                acceptable.insert(i);
        }
        void add(int item)
        {
            // if the set contains the item you want to insert, then insert it
            if(acceptable.find(item) != acceptable.end())
            {
                data.push_back(item);
                std::cout<<"Added";
            }
            // else throw error or simply don't add it.
            else
            {
                std::cout<<"Not acceptable";
            }
        }
}; 
```

如果我完全误解了你，那么对不起！只要告诉我，如果它无关紧要，我会删除答案！

# php - 数据库和表单的一类？

> ID：11826543
> 
> 赞同：0
> 
> 时间：2012-08-06T10:30:49.430
> 
> 标签：php, symfony, doctrine

我有一个名为 Domains 的类，它具有属性 - 域、用户、开始日期、截止日期……我用它一次来创建带有注释的数据库，一次用于创建一个表单，其中只发生了一些属性类域 - 例如开始和截止日期（表格用于更新信息）。我以这种方式创建表单：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('start_date', 'date', array('widget' => 'single_text', 'format' => 'yyyy-MM-dd')); ... 
```

我的问题是：是否可以同时放置两种注释 - 用于验证和数据库，如下所示：

```
/**
 * @ORM\Column(type="date", nullable=true)
 */
/**
 * @Assert\NotBlank()
 * @Assert\Type("\DateTime")
 */
protected $start_date; 
```

如果不是，如果一个带有注释，另一个带有 .yml 文件，是否有可能？如果是的话，这是一个好习惯吗？我这样做是因为很多属性是相同的——只有应该与数据库一起使用的类有更多属性，编写两个相同的类部分似乎毫无意义。我也考虑过继承，但问题仍然存在。请告诉我什么最适合！：） 提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:50:53.813

是的，您可以同时添加两种注释。像这样做：

```
/**
 * @ORM\Column(type="date", nullable=true)
 * @Assert\NotBlank()
 * @Assert\Type("\DateTime")
 */
protected $start_date; 
```

# php - 图像存储 - 更好的方法

> ID：11826545
> 
> 赞同：1
> 
> 时间：2012-08-06T10:31:05.570
> 
> 标签：php, file-upload, seo

在我的项目中，我将图像（由用户上传）存储在一个文件夹中，用于每个相应的产品。

例如，要添加产品，则会向用户显示表单。用户填写有关产品的详细信息并从他的计算机中选择一些图像（5 张或更多图片）。提交后，我会将产品详细信息存储在名为`Products`. 对于上传的图片，我创建了一个这样的文件夹：`http://mysite.com/uploads/123/`这`123`是新添加的产品的产品 ID。所有图像都保存在其中。

问题：

*   如何跟踪上传的图像（或其文件名）以供以后显示？也就是说，当添加新产品时，我的脚本将创建一个花哨的 uri 文本。例如：`http://mysite.com/this-is-my-new-product`。因此，如果用户访问此链接，它应该显示属于该产品的所有图像。为此，我必须保留一个包含产品 ID 和文件名的单独表格？并从中查询该表并回显文件名？或者扫描文件夹（例如`http://mysite.com/uploads/123/*.jpg`：）并一张一张地回显图像是否很好，即。不使用单独的表格？

*   如果使用花哨的uri作为图像的文件名可以吗？示例：`/uploads/123/this-is-my-new-product1.jpg`, `/uploads/123/this-is-my-new-product2.jpg`,`/uploads/123/this-is-my-new-product3.jpg`等 ? 因此，用户将看到第一张图片的路径为`http://mysite.com/uploads/123/this-is-my-new-product1.jpg`. 这是物理地址。它对 SEO 有帮助吗？或者这是不好的做法？如果这很好，那么列出我应该使用[scanddir()](http://php.net/manual/en/function.scandir.php)的所有图像？

请引导我走正确的道路。感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:38:05.703

1.我建议您创建另一个表来存储带有产品 ID 的图像文件名。

2.对于图像文件名，使用一些唯一的随机名称以及原始文件名，可以使用PHP的uniqid生成文件名，也可以使用时间戳来命名文件。假设图像名称是myimage.jpg，最好将其保存为23208349984_myimage.jpg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:36:13.273

正如您所说，您要么需要数据和图像之间的一些链接，要么准备扫描文件夹并输出您找到的内容。后者的计算成本更高，并且作为一种方法并不完全优雅。

妥协可能是在上传图像时重命名图像，1.jpg、2.jpg 等，然后只需在数据库中登录上传的图像*数量*。例子：

```
if ($res = $db->query("query to get product row here")) {
    $row = $res->fetch_assoc();
    if (isset($row['num_imgs'])) {
        for($i=0; $i<$row['num_imgs']; $i++) {
            $img_path = $product_folder_uri."/".($i+1).".jpg";
            if (file_exists($img_path))
                echo "<img src='".$img_path."' />";
        }
    }
} 
```

如果您不愿意从它们上传的名称中重命名图像，则需要将它们的名称记录在数据库中，大概是在它们自己的表中，并通过产品表的外键。

最后一个选择是将图像作为 blob 存储在数据库中，但我不是数据库专家，所以我不知道这有多普遍或可取。

# java - Web Service 请求在 android 浏览器和代码中不起作用；但它在电脑浏览器中工作

> ID：11826546
> 
> 赞同：3
> 
> 时间：2012-08-06T10:31:09.257
> 
> 标签：java, android, web-services

我的 PC 通过隧道连接到客户端的网络，我正在调用客户端网络中的 Web 服务。这在 PC 浏览器中运行良好，当我尝试通过 android 应用程序访问它时，我得到**ClientProtocolException**。我试图通过 android 浏览器访问 web 服务 ip 我能够在浏览器中看到 IIS 服务器响应，但无法访问 web 服务。不是https url，只是普通的http url。它不适用于任何版本的android模拟器。

代码 ：

```
HttpClient httpclient = new DefaultHttpClient();

HttpGet httpget = new HttpGet(url); 

HttpResponse response;

try {
    response = httpclient.execute(httpget);

    Log.i("Debug",response.getStatusLine().toString());

    HttpEntity entity = response.getEntity();

    if (entity != null) {

        ....
    }

} catch (Exception e) {
   e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:07:31.853

它可能是您的 Android 设备上的防火墙应用程序（据我所知没有内置），它可能会阻止对 Web 服务的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:22:13.377

实际上，Web 服务中没有响应标头。这就是为什么我得到了例外。现在我打开了一个套接字来获取响应，但是没有正确响应头的请求仍然不好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T06:49:59.910

您是否尝试过设置 Web 代理？

```
httpclient.getHostConfiguration().setProxy("ip-address","port") 
```

或者

```
System.setProperty("http.proxyHost", "ip-address");
System.setPropery("http.proxyPort", "port"); 
```

# c# - 仅在从网络驱动器编译时出现编译问题 ["Root activity type is invalid"]

> ID：11826547
> 
> 赞同：1
> 
> 时间：2012-08-06T10:31:12.107
> 
> 标签：c#, .net, compiler-errors, workflow-foundation

当我从网络驱动器编译 .net 3.5 项目时，会出现编译问题。

> C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Workflow.Targets(121,5): 错误：根活动类型无效。工作流标记验证完成，出现 1 个错误和 0 个警告。

但是，如果我将解决方案复制到本地驱动器并构建，它工作正常。

可能是什么问题？如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:36:41.637

第一个测试是使用完整路径而不是网络映射驱动器重新进行编译：

```
M:\yourDynamicView\YourVob\...
# instead of
V:\YourVob\... 
```

这将引用相同的观点。

# php - 如何通过 html 和 php 安全地发送消息（帖子）

> ID：11826548
> 
> 赞同：0
> 
> 时间：2012-08-06T10:31:14.173
> 
> 标签：php, post, message

我在我的服务器上使用 php 代码向我的客户发送消息。我使用的编程工具（Game Maker）允许我通过执行 shell 来通过 php 发送消息，以便链接出现在浏览器中。

例子在[这里](http://www.mysite.com/send.php)...

添加了所有其他的东西。所以实际上，我发送的消息和我发送的所有内容都可以在浏览器中看到。我使用 php get 方法。现在一切正常，除了它可能不安全。有人建议使用 php post 方法，但是当我在我的服务器上替换 get in my php cod 进行发布，并在浏览器中粘贴相同的内容时，我的代码不起作用。很难解释，但这是我服务器上的 php 代码：

```
<?php
// Some checks on $_SERVER['HTTP_X_REFERRER'] and similar headers
// might be in order

// The input form has an hidden field called email. Most spambot will
// fall for the trap and try filling it. And if ever their lord and master checks the bot logs,
// why not make him think we're morons that misspelled 'smtp'?
if (!isset($_GET['email']))
    die("Missing recipient address");
if ('' != $_GET['email'])
{
    // A bot, are you?
    sleep(2);
    die('DNS error: cannot resolve smpt.gmail.com');
    // Yes, this IS security through obscurity, but it's only an added layer which   comes almost for free.
}

$newline = $_GET['message'];

$newline = str_replace("[N]","\n","$newline");
$newline = str_replace("[n]","\n","$newline");

// Add some last-ditch info
$newline .= <<<DIAGNOSTIC_INFO

---
Mail sent from $_SERVER[REMOTE_ADDR]:$_SERVER[REMOTE_PORT]

DIAGNOSTIC_INFO;

mail('info@site.com','missing Password Report',$newline,"From: ".$_GET['from']);

header( 'Location: http://site.com/report.html' ) ;
?> 
```

然后我在我的网站上调用这个 php 代码。所以最后，整个事情都在浏览器地址栏中结束。我希望这是有道理的。如何通过使用 post 使事情更加安全，以便至少在用户历史记录中无法看到发送的信息等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:35:08.010

如果您在表单中替换为 POST，您也需要将请求替换为 POST：

```
<?php
// Some checks on $_SERVER['HTTP_X_REFERRER'] and similar headers
// might be in order

// The input form has an hidden field called email. Most spambot will
// fall for the trap and try filling it. And if ever their lord and master checks the          bot logs,
   // why not make him think we're morons that misspelled 'smtp'?
   if (!isset($_POST['email']))
    die("Missing recipient address");
 if ('' != $_POST['email'])
 {  // A bot, are you?
       sleep(2);
     die('DNS error: cannot resolve smpt.gmail.com');
      // Yes, this IS security through obscurity, but it's only an added layer which   comes almost for free.
   }

 $newline = $_POST['message'];

$newline = str_replace("[N]","\n","$newline");
$newline = str_replace("[n]","\n","$newline");

// Add some last-ditch info
  $newline .= <<<DIAGNOSTIC_INFO

---
Mail sent from $_SERVER[REMOTE_ADDR]:$_SERVER[REMOTE_PORT]

DIAGNOSTIC_INFO;

mail('info@site.com','missing Password Report',$newline,"From: ".$_POST['from']);

header( 'Location: http://site.com/report.html' ) ;
?> 
```

除非您使用真正的 GET 参数发送它，例如`http://www.mysite.com/send.php?email=etc`; 在这种情况下，您确实需要将其设置为 GET 以检索变量。

# android - Android：带有冰淇淋的奇怪按钮布局

> ID：11826550
> 
> 赞同：3
> 
> 时间：2012-08-06T10:31:22.807
> 
> 标签：android, image, button, background

我用这个自定义栏在顶部构建了一个布局：

![在此处输入图像描述](../Images/188836e5431a368050e6aeb05f6a821b.png)

图示的栏包含三个示例按钮（一个在左侧，两个在右侧），图像背景 (ic_delete) 包含在默认的 android drawable 中。

这是 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center_vertical"
    android:orientation="vertical" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="44dp"
        android:background="@drawable/bg_gradient_top_bar" >

        <Button
            android:id="@+id/button_swype_left"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginTop="3dp"
            android:layout_marginBottom="3dp"
            android:background="@android:drawable/ic_delete"
            android:text="" />

        <ImageView
            android:id="@+id/bar1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="1dp"
            android:layout_marginRight="1dp"
            android:layout_marginTop="1dp"
            android:layout_toRightOf="@+id/button_swype_left"
            android:maxWidth="1dp"
            android:src="@android:drawable/status_bar_item_app_background" />

        <TextView
            android:id="@+id/municipality"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/bar1"
            android:layout_toLeftOf="@+id/bar2"
            android:layout_marginLeft="3dp"
            android:layout_marginRight="3dp"
            android:gravity="center"
            android:text="Some Text"
            android:textColor="#FFF"
            android:textSize="16dp"
            android:typeface="sans" />

        <ImageView
            android:id="@+id/bar2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="1dp"
            android:layout_marginLeft="1dp"
            android:layout_marginTop="1dp"
            android:maxWidth="1dp"
            android:layout_toLeftOf="@+id/button_menu"
            android:src="@android:drawable/status_bar_item_app_background" />

        <Button
            android:id="@+id/button_menu"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/bar3"
            android:layout_margin="3dp"
            android:background="@android:drawable/ic_delete" />

        <ImageView
            android:id="@+id/bar3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="1dp"
            android:layout_marginTop="1dp"
            android:maxWidth="1dp"
            android:layout_toLeftOf="@+id/button_swype_right"
            android:src="@android:drawable/status_bar_item_app_background" />

        <Button
            android:id="@+id/button_swype_right"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginTop="3dp"
            android:layout_marginBottom="3dp"
            android:background="@android:drawable/ic_delete"
            android:text="" />

    </RelativeLayout>

    <LinearLayout ... >

        <ListView .... />
    </LinearLayout>

</LinearLayout> 
```

当我在 Android 版本 < 4.0 (API 14) 的设备上尝试我的应用时一切正常，如下所示：

![Android 版本 < 4.0 (API 14) 中的栏](../Images/69101dbe6b4c10441dec805b8c5b1217.png)

但在 Android 版本 >= 4.0（API 14、15、16）的设备中，按钮的宽度尺寸很奇怪：

![Android 版本 >= 4.0（API 14、15、16）中的栏](../Images/cc723375b338fee4763f730397ed6a1a.png)

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:45:03.593

看起来 android 系统图像的大小在这些版本之间发生了变化，特别是我的意思是宽度**@android:drawable/ic_delete**，尝试使用您制作的自定义图像

# ruby-on-rails - 将 twitter 与 Ruby on Rails 集成以显示动态提要

> ID：11826553
> 
> 赞同：0
> 
> 时间：2012-08-06T10:31:36.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我创建了一个 Ruby on Rails 应用程序并**集成了 twitter**。但是我在运行它时遇到了一些问题。我有一个带有**搜索框**和**提交按钮**的索引页。应用程序尝试搜索在 twitter 上输入的关键字，然后将其动态显示在应用程序页面（用于动态显示推文的 create.html.page）上。所以有一个“推文控制器”和两个 html.erb 文件。“Index.html.erb”、“create.html.erb”。和一个模型。控制器中的 index 方法用于使用**特定关键字**显示提要（您可以说是**静态**方式）。create 方法用于**动态显示推文**基于在 index.html.erb 中输入的关键字。我想避免使用 form_for 或 form_tag 所以使用 html 表单标签创建了一个表单。

当我尝试执行 url "http:localhost:3000/tweets/create" 时，它显示一个错误，该**符号作为数组索引** 当我尝试执行 url "http:localhost:3000/tweets/index" 时，页面不是呈现。请帮忙。我正在发布控制器，以下视图。

谢谢，巴尔加夫

**“索引.html.erb”**

```
<h1>Tweets about New Year Resolution</h1>

<form action="/create" method="post">
<label for="keyword">keyword</label>
  <input id="keyword" name="Enter keyword" size="30" type="text" />

<input type="submit" value="search" />

</form>

 <% if (@tweets != nil) then %>
   print "The tweets are " @tweets
  <% else %>
   print "No tweets for the keyword"
 <% end % >

<div id="container">
<ul>
<% @tweets.each do |tweet| %>
    <li class="<%=cycle('odd', '')%>">
        <%= link_to tweet.from_user, "http://twitter.com/#{tweet.from_user}", :class => "username", :target => "_blank" %>  
        <div class="tweet_text_area">
            <div class="tweet_text">
                <%=raw display_content_with_links(tweet.text) %>
            </div>
            <div class="tweet_created_at">
                <%= time_ago_in_words tweet.twitter_created_at %> ago
            </div>
        </div>
    </li>`enter code here`
<% end %>
</ul>
</div> 
```

**“创建.html.erb”**

```
<h1>Keywords displayed</h1>
<p> A page to display tweets
</p> 
```

**“tweets_controller.rb”**

```
class TweetsController < ApplicationController
  def index
    #Get the tweets (records) from the model Ordered by 'twitter_created_at' descending

    if Tweet.count > 0                         
      Tweet.delete_all        
    end    
    Tweet.get_latest_new_year_resolution_tweets("India")

    @tweets = Tweet.order("twitter_created_at desc")   
  end

  def create
    @tweets = (params [:tweet][:search])
    Tweet.get_latest_new_year_resolution_tweets(@tweets)
  end
end 
```

**模型*** tweet.rb * 包含方法 get_latest_new_year_resolution_tweets *。*如下。

```
class Tweet < ActiveRecord::Base

  #A method to grab latest tweets from Twitter
  def self.get_latest_new_year_resolution_tweets(keyword)

    #create a Twitter Search object
    search = Twitter::Search.new

    #grab recent 100 tweets which contain 'new year resolution' words, and loop each of them
    search.containing(keyword).result_type("recent").per_page(100).fetch.each do |tweet_results|

      #parsing the string 'created_at' to DateTime object
      twitter_created_at = DateTime.parse(tweet_results.created_at)

      #making sure we are not saving exact same tweet from a person again 
      unless Tweet.exists?(['twitter_created_at = ? AND from_user_id_str = ?', DateTime.parse(tweet_results.created_at), tweet_results.from_user_id_str])

        #finally creating the tweet record
        Tweet.create!({
            :from_user => tweet_results.from_user,
            :from_user_id_str => tweet_results.from_user_id_str,
            :profile_image_url => tweet_results.profile_image_url,
            :text => tweet_results.text,
            :twitter_created_at => twitter_created_at
        })
      end
    end
  end
end 
```

# c++ - 标准无操作输出流

> ID：11826554
> 
> 赞同：50
> 
> 时间：2012-08-06T10:31:52.597
> 
> 标签：c++, iostream

有没有办法创建一个基本上不做任何事情的 ostream 实例？

例如 ：

```
std::ostream dummyStream(...);
dummyStream << "Nothing will be printed"; 
```

我可以只创建一个 ostringstream，但数据将被缓冲（我真的不想用它们做任何事情，所以它增加了无用的开销）。

任何想法 ？

**[编辑]**找到适合我需要的[相关问题。](https://stackoverflow.com/questions/8243743/is-there-a-null-stdostream-implementation-in-c-or-libraries)但是，我认为有一个答案来说明如何使用标准 c++ 创建一个*有效*的（无坏位）输出流可能会很有用。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-08-06T10:38:49.990

您需要一个自定义的流缓冲区。

```
class NullBuffer : public std::streambuf
{
public:
  int overflow(int c) { return c; }
}; 
```

然后，您可以在任何 ostream 类中使用此缓冲区

```
NullBuffer null_buffer;
std::ostream null_stream(&null_buffer);
null_stream << "Nothing will be printed"; 
```

`streambuf::overflow`是当缓冲区必须将数据输出到流的实际目的地时调用的函数。上面的`NullBuffer`类在调用溢出时什么都不做，所以任何使用它的流都不会产生任何输出。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-08-06T10:46:56.050

如果这是为了禁用日志输出，您`dummyStream`仍然会导致评估参数。如果您想在禁用日志记录时最小化影响，您可以依赖条件，例如：

```
#define debugStream \
    if (debug_disabled) {} \
    else std::cerr 
```

因此，如果您有如下代码：

```
debugStream << "debugging output: " << foo() << std::endl; 
```

`debug_disabled`如果为真，则不会评估任何参数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-06T10:48:01.193

新流类的基本方法是：

1.  `std::streambuf`从;派生一个类
2.  覆盖该类中的虚函数。这是真正的工作完成的地方。在您的情况下，空实现应该足够好。
3.  从一个成员派生一个类`std::ostream`，即您的 streambuf 类。
4.  您的流类的构造函数应该将指向该成员的指针转发给 std::ostream 的基本构造函数。

不过，恐怕您不会摆脱格式化步骤。

希望这能给您一些指示；抱歉，我没有时间将其扩展为完整的答案。

**更新**：有关详细信息，请参阅[约翰的答案](https://stackoverflow.com/a/11826666/396551)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-03T22:50:57.473

对于日志消息的运行时可控重定向，结合了 john 和 Sjoerd 思想的自包含解决方案：

```
class DebugStream {
private:
    class NullStream : public std::ostream {
    private:
        class NullBuffer : public std::streambuf {
        public:
            int overflow(int c) override { return c; }
        } buffer_;
    public:
        NullStream() : std::ostream(&buffer_) {}
    } null_;

    std::ostream &output_;
    bool enabled_;

public:
    DebugStream(std::ostream &output = std::cout) : output_(output), enabled_(false) {}
    void enable(const bool enable) { enabled_ = enable; }

    template <typename T> std::ostream& operator<<(const T &arg) {
        if (enabled_) return output_ << arg;
        else return null_ << arg;
    }
};

extern DebugStream debug_stream;
#define TRACE_ENABLE(x) debug_stream.enable(x)
#define TRACELN(x) debug_stream << x << std::endl
#define TRACE(x) debug_stream << x 
```

然后你可以做类似的事情：

```
TRACELN("The value of x is " << x " and the value of y is " << y); 
```

`#define`使用跟踪宏将跟踪语句完全从发布版本中删除到空语句也很容易。

不过，您仍然需要在`debug_stream`某个全局位置定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-09T02:21:53.943

如果您担心调试器的开销，那么您可以编写一个非常简单的代码来取消编译时的调试消息。这就是我用于我的 c++ 程序的内容。

```
#include <iostream>
#define DEBUGGING // Define this in your config.h or not.
#ifdef DEBUGGING
/*
 * replace std::cout with your stream , you don't need to
 * worry about the context since macros are simply search
 * and replace on compilation.
 */
#define LOG_START std::cout <<
#define LOG_REDIR <<
#define LOG_END   << std::endl;
#else
#define LOG_START if(0){(void)
#define LOG_REDIR ;(void)
#define LOG_END   ;}
#endif // DEBUGGING

int main(){
LOG_START "This is a log message " LOG_REDIR "Still a log message." LOG_END;
return 0;
} 
```

现在在制作项目时，检查用户是否要禁用日志记录，如果是，只需取消定义 DEBUGGING 宏或您选择检查的任何宏。

现在您的代码将由编译器优化，因为当任何内容无效时，它不会包含在生成的二进制文件中（大部分时间），从而使二进制文件准备就绪。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-02-02T15:58:17.877

我需要一个 ostream 类型的空流，所以我做了这样的事情：

```
struct NullStream: public stringstream {
   NullStream(): stringstream() {}
};

template<typename T>
void operator<<(const NullStream&, const T&) {} 
```

申请代码：

```
NullStream ns;
ostream &os = ns;
os << "foo"; 
```

真正的问题是我继承但不关心的所有公共方法，所以我只是懒得重写它们。

# javascript - 缩短纯 div 文本

> ID：11826556
> 
> 赞同：1
> 
> 时间：2012-08-06T10:31:57.063
> 
> 标签：javascript, jquery, split, trim

我正在使用一项名为“嵌入”的服务来显示我的提要。我正在尝试缩短此提要的文本，所以我尝试了：

```
$('.description').html(
     function(){
         return $.trim($(this).html())
                .substring(0, 100)
                .split(" ").slice(0, -1)
                .join(" ") + "...";}
); 
```

我把它放在准备好的文档中，也放在“window.load”中，但似乎没有任何效果。这是一个例子：http: [//jsfiddle.net](http://jsfiddle.net/2VBSX/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:33:28.057

Jquery 的 HTML 不接受函数作为参数，而只接受纯 HTML（字符串）。做你想做的事，使用`.each()`:)

**更正：**正如下面的评论者所指出的，我的代码是正确的，但 .html()**确实**接受了一个函数作为参数，形式为`$(...).html(function(index, oldhtml));`，从而可以直接访问 html 部分。（感谢@Raminson 指出）

在@Raminson 观察之前，我的代码是：

```
$('.description').each(
     function(i,e){
         $(e).html(reduce($(e).html()));}
);

function reduce(s)
{
         return s.substring(0, 100)
                .split(" ").slice(0, -1)
                .join(" ") + "...";
} 
```

修正后，第一部分变为（仍在使用`reduce()`函数）：

```
$(".description").html(function(i,s) { return reduce(s); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:54:30.050

这个花了我很长时间才弄清楚，但我认为你能做的最好的事情就是让元素一秒钟加载到 DOM 中，然后运行你的函数：http: [//jsfiddle.net/2VBSX/5/](http://jsfiddle.net/2VBSX/5/)

```
$('div.newscontainer').embedly({
    key:':e0a98aba95ef11e09dcd4040d3dc5c07'
}).hide();

setTimeout(function() {
    $('div.newscontainer').show().find('.description').html(
        function(){
            return $.trim($(this).html())
            .substring(0, 100)
            .split(" ").slice(0, -1)
            .join(" ") + "...";
        }
    );
}, 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:27:48.540

所以，我的另一个答案是无效的，因为 OP 没有提到所有元素都是动态创建的，所以它们不能以经典方式匹配。

如果修改附加到一个合适的事件（例如单击），那么使用代理将很容易`.on()`，因为它们对于插入 DOM 中的新元素也有效。但可惜情况并非如此，我们必须对元素的创建进行操作。

一种解决方案是@ChrisClower 的解决方案（一个定期轮询页面以获取新元素的计时器）。

另一种解决方案是使用 LiveQuery 插件：[http ://docs.jquery.com/Plugins/livequery](http://docs.jquery.com/Plugins/livequery)

那么一切都会很简单：

```
$(".description").livequery(function() {  $(e).html(reduce($(e).html())); });

 function reduce(s)
{
     return s.substring(0, 100)
            .split(" ").slice(0, -1)
            .join(" ") + "..."; 
} 
```

# apache - 将 index.cfm 添加到 url 似乎会忽略 .htaccess

> ID：11826557
> 
> 赞同：1
> 
> 时间：2012-08-06T10:31:58.447
> 
> 标签：apache, .htaccess, mod-rewrite, coldfusion, railo

我试图禁止访问我的 webApp 中的某些文件夹，但在某处使用 index.cfm 似乎有一些例外......

对于此示例，我仅使用以下 mod_rewrite 规则：

```
RewriteRule ^(.*)$ index.cfm [QSA,L] 
```

使用结果访问以下 url：

```
/index.cfm //->/index.cfm naturally
/test/test.html //->/index.cfm 
/test/ //->/index.cfm 
/test/test.cfm //->/index.cfm 
/test/index.cfm //->/test/index.cfm 
```

请注意，最后一个请求似乎忽略了重写规则，这怎么可能发生？

（除根目录下的 index.cfm 外，文件系统中不存在上述所有文件）

**编辑**也，.htaccess 文件放在根目录中

**编辑 2**我添加了一个`RewriteLog`看看发生了什么，肯定有区别，但我不明白为什么......

**/test/index.html**

```
[rid#15d1048/initial] (2) init rewrite engine with requested uri /test/index.html
[rid#15d1048/initial] (1) pass through /test/index.html
[rid#15d1048/initial] (3) [perdir C:/my/local/dir/] add path info postfix: C:/my/local/dir/test -> C:/my/local/dir/test/index.html
[rid#15d1048/initial] (3) [perdir C:/my/local/dir/] strip per-dir prefix: C:/my/local/dir/test/index.html -> test/index.html
[rid#15d1048/initial] (3) [perdir C:/my/local/dir/] applying pattern '^(.*)$' to uri 'test/index.html'
[rid#15d1048/initial] (2) [perdir C:/my/local/dir/] rewrite 'test/index.html' -> 'index.cfm'
[rid#15d1048/initial] (3) [perdir C:/my/local/dir/] add per-dir prefix: index.cfm -> C:/my/local/dir/index.cfm
[rid#15d1048/initial] (2) [perdir C:/my/local/dir/] strip document_root prefix: C:/my/local/dir/index.cfm -> /index.cfm
[rid#15d1048/initial] (1) [perdir C:/my/local/dir/] internal redirect with /index.cfm [INTERNAL REDIRECT]
[rid#15cb4c0/initial/redir#1] (2) init rewrite engine with requested uri /index.cfm
[rid#15cb4c0/initial/redir#1] (1) pass through /index.cfm
[rid#15cb4c0/initial/redir#1] (3) [perdir C:/my/local/dir/] strip per-dir prefix: C:/my/local/dir/index.cfm -> index.cfm
[rid#15cb4c0/initial/redir#1] (3) [perdir C:/my/local/dir/] applying pattern '^(.*)$' to uri 'index.cfm'
[rid#15cb4c0/initial/redir#1] (2) [perdir C:/my/local/dir/] rewrite 'index.cfm' -> 'index.cfm'
[rid#15cb4c0/initial/redir#1] (3) [perdir C:/my/local/dir/] add per-dir prefix: index.cfm -> C:/my/local/dir/index.cfm
[rid#15cb4c0/initial/redir#1] (1) [perdir C:/my/local/dir/] initial URL equal rewritten URL: C:/my/local/dir/index.cfm [IGNORING REWRITE] 
```

**/test/index.cfm**

```
[rid#15ca1a0/initial] (2) init rewrite engine with requested uri /test/index.cfm
[rid#15ca1a0/initial] (1) pass through /test/index.cfm
[rid#15ca1a0/initial] (3) [perdir C:/my/local/dir/] add path info postfix: C:/my/local/dir/test -> C:/my/local/dir/test/index.cfm
[rid#15ca1a0/initial] (3) [perdir C:/my/local/dir/] strip per-dir prefix: C:/my/local/dir/test/index.cfm -> test/index.cfm
[rid#15ca1a0/initial] (3) [perdir C:/my/local/dir/] applying pattern '^(.*)$' to uri 'test/index.cfm'
[rid#15ca1a0/initial] (2) [perdir C:/my/local/dir/] rewrite 'test/index.cfm' -> 'index.cfm'
[rid#15ca1a0/initial] (3) [perdir C:/my/local/dir/] add per-dir prefix: index.cfm -> C:/my/local/dir/index.cfm
[rid#15ca1a0/initial] (2) [perdir C:/my/local/dir/] strip document_root prefix: C:/my/local/dir/index.cfm -> /index.cfm
[rid#15ca1a0/initial] (1) [perdir C:/my/local/dir/] internal redirect with /index.cfm [INTERNAL REDIRECT] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:14:48.430

不是我正在寻找的完美答案，但这就是我为获得相同结果所做的事情：

在`.htaccess`我添加以下行以转发任何未由 railo 处理的文件：

```
RewriteCond %{REQUEST_URI} ^/(my|forbidden|folders)
RewriteRule ^(.*)$ /index.cfm/some/page [L] 
```

在`application.cfc`我添加以下行以转发 railo 处理的文件：

```
<cfif Find(listFirst(arguments.targetPage, "/"), "my,forbidden,folders")>
    <cfset GetPageContext().Forward("/index.cfm/some/page")>
</cfif> 
```

这样我可以在不更改请求的 url 的情况下显示另一个页面。

我一直希望有一个解决方案，`.htaccess`但似乎由于树脂/apache连接中的错误，这还不能工作。

# matlab - 位置矩阵和到每个位置的距离

> ID：11826561
> 
> 赞同：1
> 
> 时间：2012-08-06T10:32:02.377
> 
> 标签：matlab

我创建了一个我很满意的位置矩阵，对于这个矩阵的每个位置（或元素），我想计算矩阵中所有其他位置之间的位置距离。这样我可以获得每个其他元素来自另一个元素的方向。我试图通过以下方式做到这一点：

```
pos = [X(:),Y(:),Z(:)];

for j = 1:length(pos)
for i = 1:length(pos)
    vecdir(i,:,:) = pos(i,:,:) - pos(j,:,:);
end
    v(i) = {vecdir};
    i = i+1;
end 
```

其中每个单元格保存位置矩阵中每个位置的位置距离。v(i) 似乎只存储最后一次计算（即除了最后一个单元格之外所有单元格都是空的，该单元格保存了位置矩阵上最后一个位置的正确信息。）。我在哪里错了？另外，如果有更有效的方法来做到这一点，那么我想知道，因为我知道存储和访问单元阵列会大大降低程序的速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:49:44.750

他们总是[pdist2](http://www.mathworks.nl/help/toolbox/stats/pdist2.html)：

```
dist = pdist2(pos,pos); 
```

它给出了距离向量的范数。

如果您还需要距离向量，我会使用这样的东西：

```
N = size(pos,1);
v = arrayfun(@(ii) bsxfun(@minus,pos,pos(ii,:)),1:N,'uni',false) 
```

它返回一个`Nx1`单元格数组，每个单元格包含`pos(ii,:)`到其他位置的距离向量。

您的代码似乎也是如此，尽管有一些错误；我认为您打算执行以下操作：

```
N = size(pos,1);
v = cell(N,1);
for j = 1:N
    for i = 1:N
        vecdir(i,:) = pos(i,:) - pos(j,:);
    end
    v{j} = vecdir;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:00:07.473

这些语句在循环结束时在做什么`j`？

```
v(i) = {vecdir};
i = i+1; 
```

当我阅读您的代码时，这些总是设置`v(length(pos))`为`{vecdir}`然后添加`1`到`i`. 这个更新的值在下一次循环内部循环`i`被重置（到）之前从未使用过。`1`

我不能说您的其余代码都可以，我不确定我是否完全遵循您的问题，但是这些位闻起来有点可疑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:12:15.320

```
x = repmat(X(:), 1, numel(X));
y = repmat(Y(:), 1, numel(Y));
z = repmat(Z(:), 1, numel(Z));

dst = sqrt((x - x') .^ 2 + (y - y') .^ 2 + (z - z') .^ 2); 
```

# android - 检测是否在 Android 上启用了“大文本”辅助功能选项

> ID：11826563
> 
> 赞同：16
> 
> 时间：2012-08-06T10:32:06.833
> 
> 标签：android, accessibility, android-a11y

如何以编程方式检测 Android 上是否启用了“大文本”可访问性选项？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-06T10:50:34.733

如果设置了大文本，android 会更改字体比例，因此您可以检测使用

```
Configuration c = getResources().getConfiguration();
float scale = c.fontScale; 
```

如果 scale 大于 1 则为大文本。

# javascript - 关于向 JavaScript 添加适当的语言环境支持，我可以遵循任何当前的建议吗？

> ID：11826566
> 
> 赞同：3
> 
> 时间：2012-08-06T10:32:25.200
> 
> 标签：javascript, standards, locale, language-features, ecmascript-harmony

尽管所有主要的操作系统和编程语言/API 至少几十年来都支持语言环境，但似乎 JavaScript 仍然没有！

随着 JavaScript 在浏览器和服务器上越来越成为一种完整的应用程序编程语言，缺乏真正的语言环境支持正成为一个真正的问题。

是否有任何建议将语言环境支持添加到 EcmaScript 标准中，因为它存在于其他语言中？作为“和谐”项目的一部分还是其他任何地方？我愿意支持和宣传任何这样的提议。

（这是我上一个问题的后续：是否可以通过**[JavaScript 中的浏览器确定操作系统中设置](https://stackoverflow.com/questions/11826149/is-it-possible-to-determine-the-user-locales-country-as-set-in-the-os-from/11826308#comment15722316_11826308)****[的用户区域设置的*国家*](https://stackoverflow.com/questions/11826149/is-it-possible-to-determine-the-user-locales-country-as-set-in-the-os-from/11826308#comment15722316_11826308)**/地区？ ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:10:23.360

到目前为止，我发现的最好的是[**“ES Wiki”**](http://wiki.ecmascript.org/doku.php) [：“ Ecma TC39](http://www.ecma-international.org/memento/TC39.htm)正在进行的规范工作的 wiki ”。

这个 wiki 有一个[“全球化目录”](http://wiki.ecmascript.org/doku.php?id=globalization%3aglobalization)。该目录的“目标”部分指出，除其他外：

> 提供一个 API 来补充 ECMAScript 语言规范：
> 
> *   一致的、丰富的国际化 API，类似于现代操作系统和国际化库现在为 C++ 和 Java 提供的 API。
> *   一致的结果（不是 100% 相同，但可与 CLDR 中收集的数据或主要平台上的语言环境支持相比较）。
> *   支持每个应用程序的多个语言环境。
> *   使用现有标准识别地区、时区、货币等。重用创建成本更高的对象，例如整理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:16:35.760

我刚刚注意到官方的 ECMAScript 国际化 API 规范于 2012 年 12 月发布，可能并没有在网络上引起太大的骚动：

> **标准 ECMA-402**
> **第 1 版 / 2012 年 12 月**

[HTML](http://www.ecma-international.org/ecma-402/1.0/index.html) • [PDF](http://www.ecma-international.org/ecma-402/1.0/ECMA-402.pdf) • [ePub](http://www.ecma-international.org/ecma-402/1.0/ECMA-402.epub)

# wpf - 在 WPF 中创建侧边栏 - 类似于 Windows 桌面应用程序的弹出窗口

> ID：11826568
> 
> 赞同：7
> 
> 时间：2012-08-06T10:32:27.723
> 
> 标签：wpf, sidebar

我想要做的是在 WPF 中创建一个桌面应用程序，其 UI 是这样一个小图标将保持固定在屏幕左边缘的中心，并且在单击（或悬停）时将滑动打开一个侧边栏（如谷歌桌面栏）沿屏幕左边缘运行（固定位置，不能移动）。

请注意，我所要求的可能类似于应用程序栏，但我不希望像应用程序栏那样移动左边缘的桌面图标，即我不希望它占用桌面空间... .谁能给我一个出路？？

我已经使用[它](https://stackoverflow.com/questions/9617764/windows-vista-sidebar-equivalent)实现了部分解决方案，但我无法获得幻灯片动画和固定位置来锻炼

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T10:46:04.497

像这样的东西可以工作：

那么当然你可以为侧边栏创建一个动画幻灯片。这显示了（部分）透明度和切换原理。

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None" Topmost="True" WindowState="Maximized" 
        AllowsTransparency="True" Background="Transparent">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Rectangle Name="rect" Width="100" VerticalAlignment="Stretch" Fill="#99000000" Visibility="Collapsed" />
        <Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Width="32" Height="32" FontSize="16" VerticalAlignment="Center" HorizontalAlignment="Right" Background="White" Click="Button_Click">&gt;</Button>
    </Grid>
</Window> 
```

C＃：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    if (rect.Visibility == System.Windows.Visibility.Collapsed)
    {
        rect.Visibility = System.Windows.Visibility.Visible;
        (sender as Button).Content = "<";
    }
    else 
    {
        rect.Visibility = System.Windows.Visibility.Collapsed;
        (sender as Button).Content = ">";
    }        
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-10T21:41:09.633

基于这个答案和这个网站上的更多答案，我做了一个侧栏，我喜欢这个结果，所以我做了一个回购。

[https://github.com/beto-rodriguez/MaterialMenu](https://github.com/beto-rodriguez/MaterialMenu)

你也可以从 nuget 安装它。

这是一个例子

```
<materialMenu:SideMenu HorizontalAlignment="Left" x:Name="Menu"
                           MenuWidth="300"
                           Theme="Default"
                           State="Hidden">
        <materialMenu:SideMenu.Menu>
            <ScrollViewer VerticalScrollBarVisibility="Hidden">
                <StackPanel Orientation="Vertical">
                    <Border Background="#337AB5">
                        <Grid Margin="10">
                            <TextBox Height="150" BorderThickness="0" Background="Transparent"
                                VerticalContentAlignment="Bottom" FontFamily="Calibri" FontSize="18"
                                Foreground="WhiteSmoke" FontWeight="Bold">Welcome</TextBox>
                        </Grid>
                    </Border>
                    <materialMenu:MenuButton Text="Administration"></materialMenu:MenuButton>
                    <materialMenu:MenuButton Text="Packing"></materialMenu:MenuButton>
                    <materialMenu:MenuButton Text="Logistics"></materialMenu:MenuButton>
                </StackPanel>
          </ScrollViewer>
     </materialMenu:SideMenu.Menu>
</materialMenu:SideMenu> 
```

# java - JSF默认tomcat错误页面

> ID：11826573
> 
> 赞同：3
> 
> 时间：2012-08-06T10:32:37.660
> 
> 标签：java, jsf, servlets, myfaces

我想在抛出异常时在 JSF 2.0 (MyFaces) 应用程序中显示默认的 Tomcat 错误页面。

我在 web.xml 中添加了以下几行：

```
<error-page>
    <exception-type>java.lang.Throwable</exception-type>
    <location>/ErrorHandler</location>
</error-page>
<context-param>
    <param-name>org.apache.myfaces.ERROR_HANDLING</param-name>
    <param-value>false</param-value>
</context-param> 
```

这是ErrorHandler servlet：

```
public class ErrorHandler extends HttpServlet {

protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
        doPost(request, response);
    }

protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
        response.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR,
                "Error");
    }
} 
```

但不是默认的 Tomcat 错误页面，而是显示一个空白页面，错误代码为 500。

当我尝试通过 URL 直接访问 ErrorHandler servlet 时，它工作正常：显示 Tomcat 错误页面。

所以我猜原因是JSF错误处理机制？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:24:32.457

如果要显示应用服务器的默认错误页面，只需从 web.xml 中删除错误页面条目并将上下文 init-parameter javax.faces.PROJECT_STAGE 设置为 Production。

# iphone - 获取通过 iPhone 相机 xcode 选择或录制的视频长度

> ID：11826575
> 
> 赞同：1
> 
> 时间：2012-08-06T10:32:45.653
> 
> 标签：iphone, video, xcode4, uiimagepickercontroller, duration

我正在从视频库中获取视频或录制新视频。一旦在 imagepicker 方法中选择了 didfinishpickingmediawithinfo：我需要找到从我的视频专辑中选择的视频的持续时间，以及我从相机录制的视频。我已经使用 AVAsset 来获取 CMTime 中的持续时间，我还提到了 MPMoviePlayer 来获取视频的持续时间，但他们没有为我提供这样的属性。

任何帮助，将不胜感激

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:51:07.417

```
NSURL *recordedTmpFile = [info objectForKey:UIImagePickerControllerMediaURL];

AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL:recordedTmpFile];

CMTime duration = playerItem.duration;
float seconds = CMTimeGetSeconds(duration); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:52:59.730

1）只需在您的应用程序中添加 AVFoundation 框架

2）然后将头文件导入您的控制器

```
#import <AVFoundation/AVFoundation.h> 
```

3）然后添加上面由victor编写的代码。

```
NSURL *recordedTmpFile = [info objectForKey:UIImagePickerControllerMediaURL];

AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL:recordedTmpFile];

CMTime duration = playerItem.duration;
float seconds = CMTimeGetSeconds(duration); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:50:34.730

MPMoviePlayerController 有一个属性 duration。

```
@property (nonatomic, readonly) NSTimeInterval duration 
```

请注意，该属性是**只读的**。

根据文档

如果电影的持续时间未知，则此属性中的值为 0.0。如果随后确定了持续时间，则更新此属性并发布 MPMovieDurationAvailableNotification 通知。

但是为什么你更喜欢 MPMoviewPlayerController？AVFoundation 对于这种类型的操作要快得多。而且您不需要像在 MPMoviewPlayerController 中那样等待任何通知。

如果你想通过 AVAsset。这是一个确切的答案：[MPMoviePlayerController - 持续时间始终为 0](https://stackoverflow.com/questions/5982893/mpmovieplayercontroller-duration-always-0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-09T20:03:08.860

使用 AVPlayerItem 对这个问题的其他答案对我不起作用，但这确实使用 AVURLAsset：

```
#import <AVFoundation/AVFoundation.h>

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSURL *videoURL=[info objectForKey:@"UIImagePickerControllerMediaURL"];
    AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:videoURL options:nil];

    NSTimeInterval durationInSeconds = 0.0;
    if (asset)
        durationInSeconds = CMTimeGetSeconds(asset.duration);
} 
```

# python - 在 Gevent 循环回调中从阻塞源获取数据

> ID：11826577
> 
> 赞同：0
> 
> 时间：2012-08-06T10:32:53.753
> 
> 标签：python, gevent, pycurl

我正在尝试将 Pycurl 与 Gevent 一起使用以执行 HTTP 上传。为此，我依赖[geventcurl.py](https://bitbucket.org/xitrium/gevent-curl/src/82eb2d360998/geventcurl.py)模块，它改变了 libcurl 的*Multi* API 以使用 Gevent 的事件循环。

问题在于*READFUNCTION*回调。此回调在*HUB*上下文中执行，因此我们不能*wait()*，但此回调必须返回要上传的数据，在我的情况下，此数据来自阻塞源。

这是演示该问题的代码片段：

```
#!/usr/bin/env python
from gevent import monkey; monkey.patch_all()
import gevent
from gevent.queue import Queue
import pycurl
from geventcurl import Curl

URL = 'http://localhost:8000/'

class QueueReader:
    def __init__(self, q):
        self.q = q
    def read_callback(self, size):
        return self.q.get(timeout=10)

dataq = Queue(10)
c = Curl()
c.setopt(pycurl.URL, URL)
c.setopt(pycurl.UPLOAD, 1)
c.setopt(pycurl.READFUNCTION, QueueReader(dataq).read_callback)

# Start transfer
g = gevent.spawn(c.perform)
for i in xrange(10):
    dataq.put(str(i))
    gevent.sleep(1)
g.join()
c.close() 
```

要运行代码片段，您只需要在 localhost:8000 上进行监听即可`nc -l 8000`。发生的情况是，由于`read_callback()`在 HUB 上下文中执行，它不会等待，如果队列为空，它将立即引发 Empy 异常。使用 AsyncResult 也无济于事，因为我们必须等待（）才能得到结果。

有没有办法在事件循环回调中从可能阻塞的源中获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:27:18.743

如果您摆脱`timeout=10`，它将等待来自阻塞源的数据。（参见：[http](http://www.gevent.org/gevent.queue.html) ://www.gevent.org/gevent.queue.html ，默认行为。）

如果 read_callback() 的阻塞会干扰循环的操作`for i in xrange(10)`，则将该循环通过例如`gevent.spawn()`.

另请注意，`put()`如果队列已满，默认情况下将阻塞。考虑`put_nowait()`, `put(timeout=...)`, 或`put(block=False)`更改默认行为。

# amazon-ec2 - 亚马逊 ec2 上的 Websockets 连接失败

> ID：11826580
> 
> 赞同：13
> 
> 时间：2012-08-06T10:33:18.153
> 
> 标签：amazon-ec2, websocket, netty, atmosphere

我有一个 netty 服务器运行大气框架，用于通过 websockets 进行实时通知系统。

该系统在我的本地机器上运行良好，但是当我将它部署在 EC2 上时，它似乎无法正常工作。不过，我可以远程登录到远程 Netty 服务器。服务器可访问且端口在 EC2 上打开

Firefox 抛出以下错误

```
Using URL: ws://beta.myapp.com:2880/myhandle?id=1&name=Chinese_food_rule_2&    X-Atmosphere-tracking-id=35490c47-59d6-abf6-36fa-431aa340d90a&X-Atmosphere-Framework=0.9&X-Atmosphere-Transport=websocket&X-Cache-Date=0&Content-Type=application/json

Websocket error, reason: undefined

Firefox can't establish a connection to the server at ws://beta.myapp.com:2880/myhandle?id=1&name=Chinese_food_rule_2&X-Atmosphere-tracking-id=35490c47-59d6-abf6-36fa-431aa340d90a&X-Atmosphere-Framework=0.9&X-Atmosphere-Transport=websocket&X-Cache-Date=0&Content-Type=application/json.

Websocket closed, reason: Connection was closed abnormally (that is, with no close frame being sent). 
```

服务器甚至没有收到请求，这让我认为这是一些我不知道的 EC2 Web 套接字陷阱。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-18T07:33:23.507

我在 php.ini 中遇到了同样的问题。`private ip`解决方案是：使用您的 EC2 地址创建 websocket 。并使用您的 EC2 公共 IP 地址或带有 Web 套接字端口的 URL 连接该 WebSocket

您将收到来自 EC2 Web 套接字的响应

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-15T07:38:34.797

你用的是ELB吗？如果是，您需要切换到 TPC 而不是 HTTP，因为 HTTP 层不支持 websockets。在运行 TCP 时，您将失去粘性和检索客户端 IP 的可能性，但 Websockets 将一直工作。=)

有关 EC2/ELB/Websockets 的更多信息：http: ~~[//johan.firebase.co/post/31047804966/the-state-of-websockets-ssl-and-sticky-sessions-in](http://johan.heapsource.com/post/31047804966/the-state-of-websockets-ssl-and-sticky-sessions-in)~~
~~[http://johan.heapsource.com/](http://johan.firebase.co/post/31047804966/the-state-of-websockets-ssl-and-sticky-sessions-in)~~
~~[post/31047804966/the-state-of-websockets-ssl-and-sticky-sessions-in](http://johan.heapsource.com/post/31047804966/the-state-of-websockets-ssl-and-sticky-sessions-in)~~ [https://web.archive.org/web/20160328183724/http://johan.heapsource.com/post/31047804966/the -state-of-websockets-ssl-and-sticky-sessions](https://web.archive.org/web/20160328183724/http://johan.heapsource.com/post/31047804966/the-state-of-websockets-ssl-and-sticky-sessions)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-21T06:43:22.443

@ABIRAMAN 让我最接近。

我一直在使用 localhost 连接到 websocket (HapiJS/NES)，如下所示：

`const client = new Nes.Client('ws://localhost:3000')`

更改为公共 AWS IP 如下，它可以工作：

`const client = new Nes.Client('ws://5.5.5.5:3000')`

请注意，我还在 Amazon 的 EC2 控制面板中允许 127.0.0.1 和 0.0.0.0/0 上的 3000。另外，5.5.5.5 不是亚马逊给我的 IP ;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-22T04:54:43.257

WebSocket 使用与 http 相同的端口。

但是，低于 4.0 的 Netty Server 版本不支持较新版本的 WebSocket。

[http://netty.io/news/2011/11/17/websockets.html](http://netty.io/news/2011/11/17/websockets.html)

你用的是什么版本？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T08:15:31.667

使用 nc（命令行 linux / OSX），您可以轻松检查您的端口是否已启动并正在运行。

```
nc -z www.google.com 80 
```

如果没有，请检查您的安全组。在 EC2 上登录：

左侧网络和安全：选择安全组 -> 打开默认值 -> 入站。在那里您可以创建新规则。

# ios - for-in 在循环 15K 次时消耗太多内存：OS-X 应用程序

> ID：11826586
> 
> 赞同：1
> 
> 时间：2012-08-06T10:33:49.203
> 
> 标签：ios, macos, core-data, memory-management, memory-leaks

当我的循环运行大约 15k 次时，会消耗太多内存。它甚至超过了 1 GB。我在循环中所做的是一系列核心数据实体更新/创建。有什么办法可以控制内存使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:43:58.460

是的，您应该在循环中使用自动释放池。这是[Apple 官方](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174-SW1)对此的说明，如果您在项目中使用 ARC，[此答案会](https://stackoverflow.com/questions/9675355/reduce-peak-memory-usage-with-autoreleasepool)有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:40:13.910

使用自动释放池包装循环的内容并不时将其排出。

# objective-c - 我的应用程序中的所有 UIScrollView 后代都停止响应滚动

> ID：11826587
> 
> 赞同：0
> 
> 时间：2012-08-06T10:33:51.043
> 
> 标签：objective-c, ios, xcode, uitableview, uikit

我不知道我做了什么，但我正在实现 UIViewController Containment，突然间 UIKit UIScrollView 子类停止响应滚动，即使我绕过了所有自定义应用程序代码。例如，此标准设置代码...

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

UIViewController *vc = [[UIViewController alloc] init];
vc.view = [[UIView alloc] initWithFrame:self.window.frame];

UIScrollView *sv = [[UIScrollView alloc] initWithFrame:vc.view.frame];
sv.contentSize = CGSizeMake(400, 3000);
[vc.view addSubview:sv]; 
```

在一个全新的 Xcode 项目中，scrollView 滚动，但在我现有的项目中，滚动没有效果并且滚动条不会出现。两个项目中的 AppDelegate 代码是相同的，我唯一的#import 是 UIKit。

**换句话说，我的应用程序中从 UIScrollView 继承的所有类突然表现得好像它们的 scrollEnabled 属性设置为 NO，我无法更改它。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:42:30.357

它可能是界面构建器中滚动视图上的“启用滚动”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:03:28.177

```
 // define the area that is initially visible
  scrollViewCustom.frame = CGRectMake(0, 5, 354, 500);

  // then define how much a user can scroll it
  [scrollViewCustom setContentSize:CGSizeMake(354, 960)]; 
```

另外，清除滚动视图的背景颜色以显示文本。

```
 scrollViewCustom.backgroundColor = [UIColor clearColor]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:22:07.137

您可以像这样简单地创建。

```
scrollView=[[UIScrollView alloc]init]WithFrame:CGRectMake(0,0 ,320,480)];
[scrollView setScrollEnabled:YES];
[scrollView setContentSize:CGSizeMake(320, 600)];
scrollView.backgroundColor = [UIColor clearColor]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:33:25.707

AFAIK 这是由糟糕的第三方代码造成的，这些代码在`UIPanGestureRecognizers`没有实现的情况下使用`gestureRecognizerShouldBegin:`，从而覆盖了正常的滚动行为。

# winforms - 从datagridview左上角单元格中删除所有行选择选项在c#中单击

> ID：11826591
> 
> 赞同：0
> 
> 时间：2012-08-06T10:34:03.160
> 
> 标签：winforms, datagridview

我在我的项目中使用数据网格视图控件，要求如下。行标题可见 = true，列标题可见 = true，多选 = true，选择模式 = 全行选择。允许多行选择 true 但当用户单击左上角单元格时不允许选择所有行。

请帮我！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:50:58.983

左上角单元格的唯一目的是选择所有单元格，我认为这不能被禁用。

在任何情况下，您都可以使用 if 条件来检查是否选择了所有行并相应地继续。

ps：我是C#新手，不太懂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:09:04.237

感谢来自其他[SO 线程](https://stackoverflow.com/questions/1504620/datagridview-override-top-left-header-cell-click-select-all)的@anchandra 响应，您可以通过覆盖行为来完成该`OnCellMouseDown`行为：

```
protected override void OnCellMouseDown(DataGridViewCellMouseEventArgs e)
{
    if (e.RowIndex == -1 && e.ColumnIndex == -1) return;
    base.OnCellMouseDown(e);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-05T06:22:01.467

将 RowHeadersVisible 设置为 false。

# datagridview - 在 Datagridview 中禁用排序

> ID：11826604
> 
> 赞同：0
> 
> 时间：2012-08-06T10:34:53.067
> 
> 标签：datagridview, jquery-ui-sortable

嗨，我有一个 Datagridview，当用户单击列名时，我想让该网格不可排序。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:52:36.387

您有 2 个选项：

1.  通过`DataGridView`. 转到编辑列并将 SortMode 选项更改为 NotSortable。

2.  通过代码。为要禁用排序的每一列编写此内容。

    ```
    dataGridView1.Columns[ColumnNumber].SortMode = DataGridViewColumnSortMode.NotSortable; 
    ```

# css - 如何设置较小DIV的垂直滚动条与较大DIV的右侧对齐？

> ID：11826608
> 
> 赞同：0
> 
> 时间：2012-08-06T10:35:14.890
> 
> 标签：css, html, scrollbar

我有 2 个 DIV，第一个是屏幕宽度的 80%。第二个DIV在第一个DIV下面，我用AJAX onload函数嵌入了另一个页面xxx.html，它的宽度是500px，如何设置垂直滚动条与第一个DIV的右侧对齐？（第二个 DIV 的宽度小于第一个。）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:45:30.273

我会将两个 div 放到一个容器中，然后将它们浮动到右侧。

```
<div id="container">
    <div id="div1" style="width:80%; float:right"></div>
    <div id="div2" style="width:500px; float:right; clear:right"></div>
    <div style="clear:both"></div>
</div> 
```

[小提琴](http://jsfiddle.net/P4EGq/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:47:47.337

如果我说对了，您需要将第二个 div 的内容（iframe？）放入另一个 div，该 div 的宽度固定为 80%。如果您也设置高度，则内容将垂直滚动。

# xcode - 如何限制iphone文本字段中的字符长度

> ID：11826611
> 
> 赞同：1
> 
> 时间：2012-08-06T10:35:39.570
> 
> 标签：xcode

我想限制输入文本字段的字符。例如，只应输入 10 个数字。输入第 10 个数字后，文本字段应重新签名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:44:57.463

哟可以使用 UITextField 功能：

```
-(BOOL) textField: (UITextField*)textField shouldChangeCharactersInRange:(NSRange) range replacementString:(NSString*) string 
{
NSInteger len = [textField.text length];
if ( len > maxChars )
{
   [textField resignFirstResponder];
   return NO;
}
return YES;
} 
```

其中 maxChars 的值为 9

UPD：感谢[H2CO3](https://stackoverflow.com/users/529758/h2co3)

# c# - 如何使用 SDK 连接到 CRM（基于声明的身份验证和自定义 STS）

> ID：11826612
> 
> 赞同：3
> 
> 时间：2012-08-06T10:35:39.280
> 
> 标签：c#, dynamics-crm-2011, dynamics-crm, claims-based-identity, sts-securitytokenservice

我在我的 CRM 实例上配置了基于声明的身份验证。我正在使用自定义 STS（[此处](http://cloudythoughts.siadis.com/windows-azure/windows-azure-appfabric/creating-a-custom-sts-with-windows-identity-foundation)提供示例） 现在我想从一些测试应用程序访问 Web 服务。有没有人有这方面的例子？在 Windows 身份验证的情况下，我尝试使用相同的代码进行连接。但是，当然，不成功。我收到一个错误：

> {“在配置的安全令牌服务上找不到身份验证端点 Kerberos！”}

这是连接代码（用于 AD 身份验证类型）：

```
OrganizationServiceProxy orgserv;
      ClientCredentials clientCreds = new ClientCredentials();
      ClientCredentials devCreds = new ClientCredentials();

        clientCreds.Windows.ClientCredential.UserName = "user";
        clientCreds.Windows.ClientCredential.Password = "P@$$w0rd";
        clientCreds.Windows.ClientCredential.Domain = "myDomain";
        IServiceConfiguration<IOrganizationService> orgConfigInfo =
                    ServiceConfigurationFactory.CreateConfiguration<IOrganizationService>(new Uri("https://myCRMServer/myOrg/XRMServices/2011/Organization.svc"));

        using (orgserv = new OrganizationServiceProxy(orgConfigInfo, clientCreds))
        {
          orgserv.ServiceConfiguration.CurrentServiceEndpoint.Behaviors.Add(new ProxyTypesBehavior());
          orgserv.EnableProxyTypes();
          connection = orgserv;
        } 
```

我在某处发现基于声明的身份验证足以仅发送 UPN（用户主体名称）。但同样的错误也会发生。我也尝试过使用用户名/密码组合，但没有成功。

```
AuthenticationCredentials authCredentials = new AuthenticationCredentials(); 
```

...

```
authCredentials.UserPrincipalName = "user"; 
```

...

```
authCredentials.ClientCredentials.UserName.UserName = _userName;
authCredentials.ClientCredentials.UserName.Password = _password; 
```

之后的错误是：`The authentication endpoint Username was not found on the configured Secure Token Service!`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:08:26.233

如果您只是使用 CRM 2011 Web 服务界面，我认为声明甚至不重要。以下代码允许进行身份验证并连接到 CRM 2011 并使用 REST API

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.IO;

namespace CRM_REST_FromConsoleApplication
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var url = new Uri(@"https://MyServer/MyOrganiation/xrmservices/2011/organizationdata.svc/AccountSet?$select=Name&$top=10");

            HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;

            //TODO: Set Credentials Here            
            request.Credentials = new NetworkCredential("USERNAME GOES HERE", "PASSWORD GOES HERE", "myDomain");

            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            {
                StreamReader reader = new StreamReader(response.GetResponseStream());

                Console.WriteLine(reader.ReadToEnd());
            }

            Console.WriteLine("Press any key to continue...");
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:39:25.727

我终于解决了这个问题。最后，我配置了 ADFS 并为我的自定义 STS 添加了中继方信任。现在这完美无缺。API 调用通过 ADFS 进行，Web 访问身份验证通过自定义 STS 进行。

# php - 在管道分隔的字符串中获取订单项目

> ID：11826617
> 
> 赞同：0
> 
> 时间：2012-08-06T10:36:02.250
> 
> 标签：php, magento, magento-1.4

我需要在 Magento 商店（1.4.1）上设置一些跟踪，并希望有人以前可能已经实现了这一点！

基本上，我需要从包含已订购商品的订单确认页面创建一个字符串变量，并要求字符串中的每个项目用管道符号 (|) 分隔，并且每个项目的每个属性必须用两个冒号 ( ::)。

此外，如果在同一订单中多次购买同一商品，则需要将它们视为多个单独的商品，因为字符串的接收者不支持 qty 变量。

所需字符串格式的一个示例是：

```
$purchased_items="1234::9.99::CD Album::CD002345|1255::12.99::James Bond DVD::DVD001234::ABCD123|1255::12.99::James Bond DVD::DVD001234::ABCD123"; 
```

我希望有人以前实施过类似的解决方案 - 非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:55:40.553

这是一些元代码（未经测试）传递正确的订单对象

```
//we need a buffer
$stringArray = array();

//and we need to iterate over all objects (note that they are objects)
foreach ($_order->getAllItems() as $item){
    //add your formatted strings to buffer array by imploding the product information array
    $stringArray[]= implode('::',$item->getProduct()->getData());
}

//$string will contain the stuff you need to echo
$string = implode('|', $stringArray); 

$stringArray = null; 
```

# c# - EXECUTE 后的预期查询名称

> ID：11826618
> 
> 赞同：0
> 
> 时间：2012-08-06T10:36:05.047
> 
> 标签：c#, asp.net, ms-access

我在使用 .mdb 数据库的 asp.net 项目中执行存储过程时遇到问题。我想使用存储过程，但在执行代码之后......

```
using (OleDbConnection conn = new OleDbConnection(System.Configuration.ConfigurationManager.ConnectionStrings["Database"].ConnectionString.ToString()))
                {
                    conn.Open();
                    using (OleDbCommand com = new OleDbCommand("Insert", conn))
                    {
                        com.CommandType = CommandType.StoredProcedure;
                        com.Parameters.AddWithValue("@Login", UserName0.Text);
                        com.Parameters.AddWithValue("@Password", Hashing.Hash(ConfirmPassword0.Text));
                        com.Parameters.AddWithValue("@Role", RoleList1.SelectedValue);
                        com.ExecuteNonQuery();
                    }
                    conn.Close(); 
```

我有例外：

> System.Data.OleDb.OleDbException：EXECUTE 后的预期查询名称。

但是当我在代码下方使用时，一切正常。我也改变了：CommandType.StoredProcedure 到 CommandType.Text 但它仍然不起作用。有人可以帮我吗？

```
using (OleDbConnection conn = new OleDbConnection(System.Configuration.ConfigurationManager.ConnectionStrings["Database"].ConnectionString.ToString()))
                {
                    conn.Open();
                    using (OleDbCommand com = new OleDbCommand("INSERT INTO Workers ( st_login, st_password, st_role ) VALUES (login, password, role);", conn))
                    {
                        com.Parameters.AddWithValue("@Login", UserName0.Text);
                        com.Parameters.AddWithValue("@Password", Hashing.Hash(ConfirmPassword0.Text));
                        com.Parameters.AddWithValue("@Role", RoleList1.SelectedValue);
                        com.ExecuteNonQuery();
                    }
                    conn.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:40:44.357

如果您的代码清单是准确的，那么您似乎有一个名为的存储过程`Insert`，这是不可取的。尝试使用不是保留关键字的名称创建过程，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:41:08.247

```
using (OleDbConnection conn = new OleDbConnection(System.Configuration.ConfigurationManager.ConnectionStrings["Database"].ConnectionString.ToString()))
                {
                    conn.Open();
                    using (OleDbCommand com = new OleDbCommand("INSERT INTO Workers ( st_login, st_password, st_role ) VALUES (?, ?, ?);", conn))
                    {
                        com.Parameters.AddWithValue("@Login", UserName0.Text);
                        com.Parameters.AddWithValue("@Password", Hashing.Hash(ConfirmPassword0.Text));
                        com.Parameters.AddWithValue("@Role", RoleList1.SelectedValue);
                        com.ExecuteNonQuery();
                    }
                    conn.Close(); 
```

请注意 Ms-Access 不支持存储过程。如果您需要这样或复杂的查询，请使用 Sql Server。由于您的应用程序正在使用 asp.net。我会推荐使用 Sql Server 作为后端的 ASP.Net。无论如何，对于您的答案，将参数替换为？使用 MS-Access 时。看上面。

# javascript - tickInterval 在 Highchart 和 Highstock 中不能正常工作。

> ID：11826625
> 
> 赞同：1
> 
> 时间：2012-08-06T10:36:19.367
> 
> 标签：javascript, highcharts, highstock

我正在尝试使用 Highstock/Highchart 来显示一些数据。在我的数据中，每条记录之间的间隔为 1 毫秒，我想将每个滴答之间的长度设置为 40 毫秒，我通过将滴答间隔设置为 40 进行了尝试，但在图表上显示每个滴答之间的长度为 50。如果我将它设置为30，则图表显示为25。很奇怪，我现在不知道该怎么办，请帮忙。

链接：http: [//jsfiddle.net/xEcNS/1/](http://jsfiddle.net/xEcNS/1/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:16:22.460

我浏览了highstock源代码，找到了这段代码

```
function normalizeTimeTickInterval(tickInterval, unitsOption) {
 var units = unitsOption || [[
 MILLISECOND, // unit name
 [1, 2, 5, 10, 20, 25, 50, 100, 200, 500] // allowed multiples 
 ...
} 
```

这段代码是什么？它说如果您的时间单位是毫秒，则将tickInterval（在您的情况下为40）标准化为其中之一的倍数，因此它将40标准化为50和30标准化为25。我不知道这是否可以被选项覆盖。但是，如果您可以接受并且不违反任何版权法，您确实可以选择更改代码。

**编辑**：找到一个 hack 可以在不更改源代码检查小提琴@ [http://jsfiddle.net/jugal/H83bs/的情况下使其正常工作](http://jsfiddle.net/jugal/H83bs/)

这就是我所做的。对源代码的一点调试/分析提示 highchart 首先尝试在轴的选项的单位属性中找到单位的东西，如果找不到，它会使用默认的。所以我继续调整units属性来设置它如下。您需要在调用 highcharts 构造函数之前执行此操作。

```
Highcharts.Axis.prototype.defaultOptions.units=[[
            'millisecond',
            [1, 2, 5, 10, 20, 25,30,40, 50, 100, 200, 500]
        ], [
            'second',
            [1, 2, 5, 10, 15, 30]
        ], [
            'minute',
            [1, 2, 5, 10, 15, 30]
        ], [
            'hour',
            [1, 2, 3, 4, 6, 8, 12]
        ], [
            'day',
            [1]
        ], [
            'week',
            [1]
        ], [
            'month',
            [1, 3, 6]
        ], [
            'year',
            null
        ]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:56:37.813

Highstock 不会将您提供的确切值设置为`tickInterval`。

默认情况下，它的作用是遍历单元以找到最适合`tickInterval`.

[1, 2, 5, 10, 20, 25, 50, 100, 200, 500] // 毫秒允许的倍数

[1, 2, 5, 10, 15, 30] // 秒

[1, 2, 5, 10, 15, 30] // 分钟

[1, 2, 3, 4, 6, 8, 12] // 小时

[1, 2] // 天

[1, 2] // 周

[1, 2, 3, 4, 6] //月份

因此，将通过搜索最近的最佳匹配来设置输入。

# r - 如何仅在 R 中的绘图上显示每个第 N 个元素？

> ID：11826635
> 
> 赞同：2
> 
> 时间：2012-08-06T10:36:36.700
> 
> 标签：r, plot

假设我想显示一个序列的结果：

```
plot(runif(10,0,1), type="o") 
```

以一种用连接线显示所有元素的方式，**但**`pch`绘制仅为每第二个、第三个或第 N 个元素分配的相应图标（圆圈/菱形/等） ？

我应该创建两个序列，一个带有过滤元素并将其显示为不同的`line()`吗？有没有一种优雅的方法可以做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T11:09:40.800

在你的情况下可能是

```
plot(runif(10, 0, 1), type = "o", pch = c(20, rep(NA, 3))) 
```

让我们说每个第 4 个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:57:14.357

如果我正确理解您的问题，您可以将`pch`参数添加到`plot`您要查找的任何序列中：例如：

```
set.seed(1)
# I've used 'type="b"' just for clarity
plot(runif(10, 0, 1), 
     type="b", 
     pch=rep(c(1, 2, 3), length.out=10)) 
```

会给你这个：

![在此处输入图像描述](../Images/08ec2b648ce650f3bdd1369004a6096c.png)

# entity-framework - 如何在 VS2008 中获取“添加代码生成项...”菜单项？

> ID：11826639
> 
> 赞同：1
> 
> 时间：2012-08-06T10:36:43.297
> 
> 标签：entity-framework, visual-studio-2008, t4

我安装了 VS2008 SP1 (.NET 3.5 SP1) 的实体框架模板。

但是当右键单击 EDMX 文件的表面时，我不知道如何获取“添加代码生成项...”菜单项。

实际上，我需要 VS2008 中的 T4 支持，例如 VS2010。

任何帮助表示赞赏。

戈兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:00:33.700

我不认为你可以（或者至少，很容易。我想你可以编写一个自定义加载项来做同样的事情，但是......）

这是关于 VS2008 中的 T4 支持的文档 [http://msdn.microsoft.com/en-us/library/bb126484(v=VS.90).aspx](http://msdn.microsoft.com/en-us/library/bb126484(v=VS.90).aspx)

# ios - 在 XCode 4.3.2 中将 iPhone 应用程序转换为 iPad

> ID：11826640
> 
> 赞同：0
> 
> 时间：2012-08-06T10:36:45.660
> 
> 标签：ios, ipad, ios-simulator, xcode4.3

我有一个应用程序已经在 App Store 中并使用 XCode 3.2 版本开发。现在我正在使用最新的 X-Code 版本 4.3.3。在以前的版本中，我们得到了“创建 iPad 转换”的选项，但在 XCode 4 中我们没有这样的选项，所以我搜索了一些文章并执行了以下步骤： 1\. 项目导航器 -> 选择目标 -> 右键单击并为 ipad 选择副本。2\. 在摘要选项卡上选择设备为“通用”。

当我使用 iPad 模拟器运行该应用程序时，我发现在 Ipad 模拟器上仍然显示 iphone 窗口及其所有控件。我没有得到带有调整大小控件的确切 iPad 窗口。

我总共有 14 个带有 mainwindow.xib 的 .xib 文件。将整个项目转换为 iPad 还需要执行哪些步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:50:16.097

我希望这对您有所帮助，仅将其转换为通用可能不会将您的视图调整为 iPad 大小。就我而言，我不得不在我的应用程序的几个地方更改 iPad 的 UI。此外，我必须将我的 iPhone 应用程序转换为 Universal。所以，我找到了这个[链接](https://stackoverflow.com/questions/5347198/xcode-4-xib-create-ipad-version)。现在，每个视图都有两个 xib（iPad 和 iPhone），因为两者的 UI 都不同。命名也如下：

```
MyViewController.xib         //For iPhone
MyViewController~ipad.xib    //For iPad 
```

如果您只需要为 iPad 转换应用程序，只需将 xibs 转换为 iPad 大小。

# php - 每 3 分钟运行一次 cron 作业还是仅在 3 分钟过去后才根据请求执行 php 脚本更好？

> ID：11826642
> 
> 赞同：0
> 
> 时间：2012-08-06T10:36:57.110
> 
> 标签：php, mysql, cron

我的问题在这里很简单：我有一个 php 脚本，它从不同的 api 检索大量 csv 文件，将它们存储在数据库（MySQL）中并将它们显示给我的用户。我必须每 3 分钟查询一次这些 api 以获取重要数据。**只使用最后一个数据，不需要获取历史数据。**

**如果没有人在这里查看页面，我担心的是避免查询这些 api 并在我的数据库中插入大量数据。**

这不是速率限制的问题，只是考虑减少无用的请求和插入数据库。

我的问题如下：

*   每 3 分钟使用一次 cron 作业来检索数据并存储它们会更好吗？
*   如果页面已加载并且自上次更新以来已过去 3 分钟，则运行 php 脚本？

在第一种情况下，每个用户都将拥有最后的值，并且将始终检索数据，即使没有人在这里看到它们。
在第二种情况下，每 3 分钟一个用户将检索所有数据（因此他的页面加载速度会比其他人慢一点），但如果没有人访问该站点，则不会存储无用数据。

注意：
检索和插入数据大约需要 10 秒。

感谢您的见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:59:43.963

您应该将两者结合起来。

如果您的网站上没有流量，则无需保持数据最新。

如果您的网站上有流量，您需要保持数据最新，但三分钟的时间范围对您来说就足够了。

因此，如果在最后 X 分钟内有活动，您需要获取全部三分钟的数据。

如果没有，第一个用户将看到一条消息，表明数据正在准备中，这只需要 10 秒。然后，您可以自动刷新网站。

当前不存在能够在您的计算机上开箱即用地执行此处理的系统。Cron 可以帮助你完成工作，但不是一个人。

联系您的系统管理员，让您建议您操作平台上可用的内容以满足您的需求。

* * *

实际上，这看起来很像缓存。CSV 数据的生命周期为 3 分钟，因此您只需缓存 api 响应。如果您使用能够提供某些逻辑的缓存服务器（如 varnish），则可以相对轻松地配置预取。尝试找到一些您只需要配置和重用的现有组件，而不是自己滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:48:20.620

从这一行来看：

```
Note:
Retrieving and inserting data take about 10 seconds. 
```

Cronjob 将是最好的。我认为访问者不会乐于每 3 分钟等待 10 秒加载页面。如果我是唯一一个访问您的网站并且必须每 3 分钟一次又一次地重新编写您的脚本的人怎么办...

如果时间是 1 或 2 秒，那么你可以用另一种方式来做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T10:51:01.317

如果我正确理解了您的 Q，您可以考虑进行这 2 个不同的任务：

a) 获取数据并存储它

b) 处理数据

a) 每 3 分钟做一次，b) 应要求做

现在单独检查 b) 的延迟，然后考虑是否值得缓存结果集。

将其设置为 2 个不同的任务将在某种程度上使您免受获取多个文件的延迟问题的变幻莫测的影响。当您处理上一次成功提取的数据时，它还可以在“此数据超过 3 分钟”的数据提取失败的情况下为您提供回退。

# oracle - Oracle 密码包含斜杠

> ID：11826645
> 
> 赞同：0
> 
> 时间：2012-08-06T10:37:06.497
> 
> 标签：oracle, zend-framework

我正在使用带有 oracle 连接的 zend:auth 适配器。我正在尝试在登录时对用户进行身份验证。如果用户输入常规字母数字，则身份验证会顺利进行，但是当密码是这样的（例如）`IUCJAC\_`时，身份验证验证返回 false。

我努力了：

*   Zend_View::escape();
*   Zend_DB_Adapter::quote();
*   php的addslashed();

无济于事。

有任何想法吗？

```
public function authAction()
{
    //Returns encrypted password
    $newpass = new Application_Model_Discoverpw();
    $this->getHelper('viewRenderer')->setNoRender();
    if(!empty($_POST))
    {
        $password =$newpass->encode_password(trim($_POST['password']));
        $slashedPW =  $db->quote($password);
        $formValues = array(
        'email' => $_POST['email'], 'password' => $slashedPW);

        if ($this->_process($formValues)) {

            // We're authenticated! Redirect to the home page
            //echo '{"success":true}';
            $this->_helper->redirector('index', 'sam');

            //$this->_helper->redirector('index', 'index');

        } else {
           throw new Zend_Auth_Exception('Login failed! '. $sql);
            //echo 'oh no!';
        }
    } else {
        //Redirect to login page if no $_POST values found
        $this->_helper->redirector('login', 'userauth');
    }
} 
```

# javascript - 在javascript中检测山狮（OS X 10.8）？

> ID：11826647
> 
> 赞同：2
> 
> 时间：2012-08-06T10:37:18.810
> 
> 标签：javascript, user-agent, browser-detection, osx-mountain-lion

像[Detect Lion (OS X 10.7) in javascript？](https://stackoverflow.com/questions/7706019/detect-lion-os-x-10-7-in-javascript)但我需要检测最后一个操作系统（Mountain Lion）。

有人可以告诉我这个操作系统上 Safari / Firefox / chrome 的用户代理吗？

可惜我没有mac...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T10:48:42.553

这是 Safari 的 Mountain Lion 用户代理字符串：

```
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8) AppleWebKit/536.25 (KHTML, like Gecko) Version/6.0 Safari/536.25 
```

所以字符串的 10_8 部分是确定山狮的相关因素。只是不要忘记，随着 Mountain Lion 的更新出现，它将更改为 10_8_1 等。

编辑：

FireFox UA 是：

```
Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:12.0) Gecko/20100101 Firefox/12.0 
```

您可以看到操作系统部分略有不同，使用 10.8 而不是 10_8。

# jquery-ui - 如何在wijmo中对齐标题文本..？

> ID：11826648
> 
> 赞同：0
> 
> 时间：2012-08-06T10:37:24.157
> 
> 标签：jquery-ui

我想在左侧对齐我的 html 表格列，但表格是使用 wijmo ui 的 wijgrid（jquery 库）从 json 动态进入 ui .....我知道如何对齐表格的行，但我不知道如何对齐可以在 wijgrid 中修复的标题列（我不确定）。

我试过下面的代码，它可以很好地处理行对齐，但不能使用标题对齐。

我的代码：

```
$("#userlist").wijgrid({ 

ensureColumnsPxWidth:true,

columns: [ 

{headerText: "UserId", dataType:"string",width:"8%",
                                                             cellFormatter: function (args) {

if (args.row.type & $.wijmo.wijgrid.rowType.data) {

args.$container
.css("text-align", "center")

return false;

} }
                                                                                                                                      },
]                                                     }); 
```

请告诉我解决方案.....谢谢蒂娜！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:14:51.050

更改您的 if 语句以检查标题 rowType 而不是数据。（或者如果您希望标题和数据行都居中，则完全取消检查。

```
if (args.row.type & $.wijmo.wijgrid.rowType.header) { ... } 
```

不过，我建议改用 CSS。这样您就不会在每个单元格上呈现样式。最好的纯 CSS 解决方案。你可以这样做：

```
<style type="text/css">
    .wijmo-wijgrid .wijmo-wijgrid-headerrow .wijmo-c1basefield
    {
        text-align: left;
    }
    .wijmo-wijgrid .wijmo-wijgrid-headerrow .wijmo-wijgrid-headertext
    {
        padding: 0.5em 0.25em;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-28T04:40:22.743

在 Wijmo FlexGrid v5 中，您应该尝试 itemFormatter 事件来设置行/列，包括标题样式。

```
// $scope is such your flexgrid object
$scope.itemFormatter = function(panel, r, c, cell) {
    var cellBinding = panel.columns[c].binding;
    if (panel.cellType == wijmo.grid.CellType.ColumnHeader) {
        cell.style.textAlign = 'center';
    }
} 
```

上面使用 CSS 的建议也不错。我按照下面的例子，请试一试。[http://jsfiddle.net/Wijmo5/j41xLz21/](http://jsfiddle.net/Wijmo5/j41xLz21/)

# asp.net - 根据内容调整 iFrame 高度

> ID：11826649
> 
> 赞同：3
> 
> 时间：2012-08-06T10:37:36.247
> 
> 标签：asp.net, html, iframe

我有一个弹出页面，它有一个 iframe，它反过来加载另一个页面。

我想根据加载的页面大小调整 iframe 高度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:02:31.197

一种简单的方法是使用 javascript：

```
<script language="JavaScript">
  function autoResize(id){
  var newheight;
  var newwidth;

  if(document.getElementById){
    newheight=document.getElementById(id).contentWindow.document .body.scrollHeight;
    newwidth=document.getElementById(id).contentWindow.document .body.scrollWidth;
  }

  document.getElementById(id).height= (newheight) + "px";
  document.getElementById(id).width= (newwidth) + "px";
}
</script>

<IFRAME SRC="Iframef/iframep.aspx" width="100%" height="200px" id="iframe1" marginheight="0" frameborder="0" onLoad="autoResize('iframe1');"></iframe> 
```

# php - 捕获mysql连接错误

> ID：11826659
> 
> 赞同：1
> 
> 时间：2012-08-06T10:38:07.713
> 
> 标签：php, oop, exception-handling

所以我有简单的代码：

```
try{
    $mysqli = new mysqli($sql_login['host'], $sql_login['user'], $sql_login['password'] , $sql_login['database'], $sql_login['port'] );

    if($mysqli->connect_errno){
        throw new Exception("Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error);
    }

}
catch (Exception $e) {
    echo 'Exception: ',  $e->getMessage(), "\n";
} 
```

问题是 php 返回错误和异常。在 java 中是否有类似 throw 和 throws 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:41:39.123

您可以从安装自己的错误处理开始。一种将 PHP 错误转换为异常的方法。在脚本的开头执行此操作。像这样的东西：

```
/*
|--------------------------------------------------------------------------
| Alternative error handler
|--------------------------------------------------------------------------
|
| See: http://php.net/manual/en/function.set-error-handler.php
|
*/
function my_error_handler($errno, $errstr, $errfile, $errline)
{
    if (!(error_reporting() & $errno))
    {
        // This error code is not included in error_reporting
        return;
    }
    throw new ErrorException( $errstr, $errno, 0, $errfile, $errline );
}
ini_set('display_errors', FALSE);
set_error_handler("my_error_handler"); 
```

现在您可以使用异常作为主要的错误处理机制。您现在需要做的就是在脚本中的正确位置捕获异常并自己显示错误。

您还可以扩展此机制以包括断言处理：

```
/*
|--------------------------------------------------------------------------
| Assert handling
|--------------------------------------------------------------------------
|
|   See: http://php.net/manual/en/function.assert.php 
|
*/
function my_assert_handler($file, $line, $code)
{
    throw new Exception( "assertion failed @$file::$line($code)" );
}
assert_options(ASSERT_ACTIVE,     1);
assert_options(ASSERT_WARNING,    0);
assert_options(ASSERT_BAIL,       0);
assert_options(ASSERT_QUIET_EVAL, 0);
assert_options(ASSERT_CALLBACK, 'my_assert_handler'); 
```

并且只接受 PHP 不是 Java 或 C++。这是一个不一致的混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:24:52.803

您可以使用 PHP 的`set_error_handler()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:29:02.843

在连接的呼叫前面放一个@符号。这将抑制错误消息。

# orm - 与属性的多对多关系

> ID：11826668
> 
> 赞同：1
> 
> 时间：2012-08-06T10:38:59.743
> 
> 标签：orm, symfony, doctrine-orm

我在 symfony 2 和关系上遇到了麻烦。

我有两张桌子：**电影**和**电影**。我想使用中间对象添加它们之间的关系，该对象包含有关链接的更多信息（例如电影院 URL）。

不幸的是，当我尝试保存表单时，出现以下错误：

> `'MyNameSapce\CoreBundle\Entity\Movie#cinemas'` 通过未配置为对实体进行级联持久操作 的关系找到了一个新 实体： `MyNameSapce\CoreBundle\Entity\MovieCinema@0000000059c00fdd00000000cd3391df`。
> 
> 显式持久化新实体或在关系上配置级联持久化操作。
> 
> 如果您无法找出导致问题的实体，请执行
> `'MyNameSapce\CoreBundle\Entity\MovieCinema#__toString()'`获取线索。

这是我的代码：
**实体：**

```
class MovieCinema {

/**
 * @ORM\Id
 * @ORM\ManyToOne(targetEntity="MyNameSpace\CoreBundle\Entity\Cinema", inversedBy="movies")
 */
private $cinema;

 /**
 * @ORM\Id
 * @ORM\ManyToOne(targetEntity="MyNameSpace\CoreBundle\Entity\Movie", inversedBy="cinemas")
 */
private $movie;

   /**
 * @var string $url
 *
 * @Assert\NotBlank()
 * @ORM\Column(name="url", type="integer")
 */
private $url; 
```

**形式：**

```
class MovieCinemaType extends AbstractType {

public function buildForm(FormBuilder $builder, array $options) {
    $builder
            ->add('cinema', 'entity', array(
                'label' => 'movie.field.cinema',
                'class' => 'MyNameSpaceCoreBundle\Entity\Cinema',
                'required' => false
            ))
            ->add('url', 'text', array(
                'label' => 'movie.field.url'
            ))
    ;
}

public function getName() {
    return 'corebundle_moviecinematype';
}

public function getDefaultOptions(array $options) {
    return array(
            'data_class' => 'MyNameSpace\CoreBundle\Entity\MovieCinema'
            );
}

} 
```

和

```
class MovieType extends AbstractType {

public function buildForm(FormBuilder $builder, array $options) {
    $builder
            ->add('name', 'text', array(
                'label' => 'movie.field.name'
            ))
            ->add('cinemas', 'collection', array(
                'type' => new MovieCinemaType,
                'prototype' => true,
                'allow_add' => true)
            )
    ;
}

public function getName() {
    return 'corebundle_movietype';
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:51:16.613

通过执行以下操作检查您的映射：`php app/console doctrine:schema:validate`

It will help you to find errors in your relations between your 3 classes.

# javascript - 使用 qunit.js 查询事件回调测试

> ID：11826669
> 
> 赞同：0
> 
> 时间：2012-08-06T10:39:02.303
> 
> 标签：javascript, qunit

我有一个 html 视图，其中包含一个带有“overlay”类的 div 和一个带有“close-overlay”类的关闭按钮。我在 JS 中为他们注册了这样的事件：

```
$(".overlay").click(function(e){
    var target = $(this); // overlay div

    target.removeClass("hide");

    return target;
});
$(".close-overlay").click(function(e){
    var target = $(e.target) // close-overlay btn
                            .closest(".overlay"); // overlay div

    target.addClass("hide");

    return target;
}); 
```

我在 qunit 中进行了如下测试：

```
test("Basic Test", function(){
    equal($(".overlay").click().hasClass("hide"), false, "Overlay Click" );
    equal($(".close-overlay").click().hasClass("hide"), true, "Overlay Hide" ); 
}); 
```

第一个测试通过了，但第二个测试失败了。不知道为什么！有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:07:40.710

在您的第二个断言中，您正在测试`.close-overlay`元素是否具有隐藏类而不是`.overlay`元素。

所以你的测试应该是：

```
test("Basic Test", function(){
    equal($(".overlay").click().hasClass("hide"), false, "Overlay Click" );
    var closeOverlayElement = $(".close-overlay");
    closeOverlayElement.click();    
    equal(closeOverlayElement.closest(".overlay").hasClass("hide"), true, "Overlay Hide");
}); 
```

# asp.net - 将数据插入 SWF 文件

> ID：11826670
> 
> 赞同：0
> 
> 时间：2012-08-06T10:39:02.960
> 
> 标签：asp.net, flash

我是 swf 文件和 asp.net 的新手。我想知道sql数据库值的数据可以显示在swf文件中吗？如果数据可以显示在swf文件中，我该怎么做？请教我一个方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:19:10.270

这是一个包含一些代码片段的教程，演示了该原理：

[http://keylimetie.com/blog/2007/12/18/how-to-communicate-between-aspnet-and-flash/](http://keylimetie.com/blog/2007/12/18/how-to-communicate-between-aspnet-and-flash/)

# r - 使用 R 在美国地图中突出显示邮政编码

> ID：11826672
> 
> 赞同：2
> 
> 时间：2012-08-06T10:39:06.683
> 
> 标签：r

在我的数据中，美国邮政编码分为 4 组：我需要为每组突出显示不同颜色的邮政编码，并显示这些邮政编码的州名。

我正在尝试使用包的`zip.plot`功能`muRL`。

使用此功能，我可以突出显示我正在为我的项目考虑的所有邮政编码，但无法为这 4 个组使用不同的配色方案并显示州名称。

如何找到解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:14:58.027

这可能不是最优雅的解决方案，但我希望这应该让你朝着正确的方向前进。

首先是一些随机数据：

```
library(muRL)
data(zips) #This is the file muRL's zip.plot function is calling: I'm gonna use it to extract random zip codes.
zip.data <- data.frame(zip = sample(zips$zip, 10), group = sample(1:4, 10, replace=TRUE)) 
```

然后你的情节，每组有不同的颜色：

```
zip.plot(zip.data, col = zip.data$group) 
```

对于州名，我在这里`zips`再次使用该表：

```
zips[zips$zip %in% zip.data$zip, ] -> zip_subset
text(zip_subset$lon, zip_subset$lat, labels = zip_subset$state, pos = 4, cex = 0.7, font = 2) 
```

![在此处输入图像描述](../Images/7c12fe7a6fb8db8ebcf5618466774e15.png)

有关绘制邮政编码相关数据的更优雅的方式，您应该查看[此 SO question](https://stackoverflow.com/questions/1441717/plotting-color-map-with-zip-codes-in-r-or-python?rq=1)的答案。

# django - 由 Django 的相关名称阻止的查询

> ID：11826673
> 
> 赞同：-1
> 
> 时间：2012-08-06T10:39:10.240
> 
> 标签：django, django-queryset, django-orm

这是一个多对多请求，但我的 'related_name' 使查询错误..

模型 ：

```
class Course(models.Model):
    subscribed = models.ManyToManyField(User, related_name='course_list', blank=True, null=True, limit_choices_to={'userprofile__status': 'student'}) 
```

我想做的是：

```
for user in User.objects.filter(editedcourse__in=course_list):
    user.course_list.remove(editedcourse) 
```

错误 ：

```
global name 'course_list' is not defined 
```

其他尝试：

```
editedcourse.subscribed.clear() 
```

`related_name`阻止访问`subscribed`字段..不再`acourse.subscribed`定义..

我想同时使用两个方向，但使用`__set`.

我怎样才能实际完成我的请求，是否有可能一直反转 M2m 关系`__set`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:59:21.497

第一个问题与相关名称无关。`course_list`您只是在尝试在查询中使用它之前没有定义变量。它应该是您想要匹配的课程列表。

在第二次尝试中，您仍然没有解释“`related_name`阻止访问`subscribed`”的含义。是什么`editedcourse`？你从哪里得到它？

**评论后编辑**

> 我想使用包含“editedcourse”的 course_list 搜索用户

那么你做事的方式完全错误。您的查询是“我想搜索`editedcourse`在名为“course_list”的列表中的用户。我猜你的意思是：

```
User.objects.filter(course_list=editedcourse) 
```

# javascript - 清除 dom 缓存

> ID：11826674
> 
> 赞同：0
> 
> 时间：2012-08-06T10:39:11.130
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile, cordova

嗨，在我的移动应用程序中，我在不同的文件中有多个页面。我想在某个级别清除 Dom 缓存并调用我正在这样做的登录页面：

```
$.mobile.pageContainer.empty();
$.mobile.loadPage('login.html'); 
```

但它不起作用，它只显示白屏，我还在上面的 try 块中添加了同样的问题。我怎样才能清除缓存？任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:54:21.423

`$.mobile.loadPage`命令预取页面但不显示它。[文件](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)说

> 此功能不影响当前活动页面，因此可用于在后台加载页面。

你可能想打电话给`$.mobile.changePage('login.html')`. 如果页面不在 DOM 中，您也可以删除 loadPage，因为 changePage 会调用它。

# php - 正则表达式 PHP

> ID：11826677
> 
> 赞同：2
> 
> 时间：2012-08-06T10:39:19.553
> 
> 标签：php, regex, replace, preg-replace

如何从中找到页面标题的名称`$_SERVER['php_self']`？假设`$_SERVER`显示我的页面是这样的：`/application/mysite/signup.php`。如何选择页面标题`signup`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T10:42:06.420

您可以使用[`basename`](http://php.net/manual/en/function.basename.php)：

```
echo basename($_SERVER['php_self'], '.php'); 
```

或[`pathinfo`](http://www.php.net/manual/en/function.pathinfo.php)：

```
$pathInfo = pathinfo($_SERVER['php_self']);
echo $pathInfo['filename']; 
```

# java - 使用 VisualVM 在 Eclipse Indigo 中分析 JUnit

> ID：11826680
> 
> 赞同：22
> 
> 时间：2012-08-06T10:39:35.470
> 
> 标签：java, junit, profiling, profiler, visualvm

如何配置 JUnit 测试，优先使用 Eclipse 集成支持？我正在尝试使用 VisualVM 来完成，但显然无法完成。

我正在使用 Windows 7 x64、Eclipse Indigo、jdk 1.6、jre-j9 和 JUnit 3（我可以使用 v.4）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-06T14:05:18.050

您可以使用 JVisualVM ( `%JAVA_HOME%/bin/jvisualvm.exe`)，但要与 JUnit 一起使用，您需要稍微更改运行配置。

1.  运行一次 JUnit 测试，以创建运行配置
2.  编辑运行配置 ( `Run->Run Configurations...`)
3.  在`Test`选项卡中选中“调试时保持 JUnit 在测试后运行”框
4.  重新运行测试（使用调试）。这将运行测试，但重要的是，保留 JVM，以便您可以使用 JVisualVM 附加到它。

如果您希望分析测试的特定部分，那么在前后设置断点将使您能够开始/停止分析。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T14:05:38.120

[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)有一个支持 JUnit 运行配置的 eclipse 插件。有关eclipse IDE 集成的屏幕截图，请参见[此处。](http://blog.ej-technologies.com/2009/06/jprofilers-ide-integrations.html)

要在测试完成后保持 JVM 处于活动状态（以便您可以分析结果），请编辑分析设置并在“其他”选项卡上选择“保持 VM 活动”。

免责声明：我公司开发 JProfiler。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-25T12:36:50.467

使用 VisualVM 分析应用程序启动或短期运行进程（如测试）的一个简洁选项是[Startup Profiler Plugin](https://visualvm.github.io/startupprofiler.html)。

插件提供的命令行参数必须复制到 VM 参数下的启动配置中。

# sql - 避免重复引用多个连接表的子查询

> ID：11826686
> 
> 赞同：4
> 
> 时间：2012-08-06T10:39:50.623
> 
> 标签：sql, sql-server, tsql

我有一个子查询（**LastActivityOn**），我想在三个地方使用它，我的投影（SELECTed 输出）、ORDER BY 和 WHERE 子句。

```
SELECT TOP 175
  (SELECT MAX(ActivityDate) FROM (VALUES
    (UserRegistration.CreatedOn),
    (UserRegistration.ActivatedOn),
    (UserRegistration.LastLoginOn),
    (UserRegistration.UpdatedOn),
    (UserProfile.LastPostedOn)) AS AllDates(ActivityDate)) LastActivityOn,
  UserRegistration.FirstName,
  UserRegistration.LastName,
  [15 more columns of various calculated distances, coalesces, etc...]
FROM
  UserRegistration
  INNER JOIN UserProfile ON UserRegistration.Id = UserProfile.RegistrationId
  INNER JOIN (
    SELECT PostalCode, GeoCenter, PrimaryCity, StateOrProvince
    FROM PostalCodes 
    WHERE @OriginPostalCode IS NULL OR PostalCodes.GeoCenter.STDistance(@OriginPoint) < @WithinMeters
  ) AS ProximalPostalCodes ON ProximalPostalCodes.PostalCode = UserRegistration.PostalCode
  [7 more joins including full-text queries]
WHERE
  LastActivityOn > @OldestUserToSearch AND
  [20 more lines of filtering logic]
ORDER BY
  LOG(DATEDIFF(WEEK, LastActivityOn, @Today))/LOG(2),
  FullTextRelevance 
```

请注意 LastActivityOn 的三个事件。另请注意，LastActivityOn 子查询引用了两个表。我想因为它依赖于父查询中的连接子句，它本质上是一个相关的子查询？

当我只通过用户定义函数获取最多两个日期时，我能够在 WHERE 和 ORDER BY 中使用结果值。我现在不可以。

似乎我有几个选择......我可以将整个事情包装在另一个查询中，仅使用添加的活动重复投影。看来我可以以同样的方式使用“WITH”（CTE）。

但是因为我不清楚何时可以和不能以我想要的方式使用子查询的规则，所以我很容易遗漏一些东西。有任何想法吗？

或者也许 SQL SERVER 足够聪明，只为每个输出行执行一次计算，我不应该担心吗？

编辑：目前正在运行 SQL Server 2008 Standard，但升级将在某个时候按顺序进行。此外，RE：日志功能 - 我正在努力将其与相关性结合为加权总数，因此这是一项正在进行的工作。我将使用 INT 对其进行修剪以用作一种排名，或者通过线性调整将其添加到相关性中。

更正：我能够在我的 ORDER BY 中使用子查询别名，但不能使用任何额外的计算或 where 子句。感谢 ypercube 指出这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T10:44:51.100

我不会尝试修改您的查询，但可能是您需要的[公用表表达式。](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:09:58.187

您不能`LastActivityOn`在子句中使用别名，`WHERE`但可以在`ORDER BY`.

如果您不想在 2 个地方（SELECT 和 WHERE）重复代码，您可以使用 CTE 或`LastActivityOn`在派生表中选择此结果 - 以及整个子查询，然后在外部级别使用它：

```
SELECT TOP 175
  LastActivityOn,
  FirstName,
  LastName,
  ...
FROM
    ( SELECT
        ( SELECT MAX(ActivityDate) 
          FROM 
            ( VALUES
                (UserRegistration.CreatedOn),
                (UserRegistration.ActivatedOn),
                (UserRegistration.LastLoginOn),
                (UserRegistration.UpdatedOn),
                (UserProfile.LastPostedOn)
            ) AS AllDates(ActivityDate)
        ) LastActivityOn,
        UserRegistration.FirstName,
        UserRegistration.LastName,
        [15 more columns of various calculated distances, coalesces, etc...]
      FROM
        UserRegistration
        INNER JOIN UserProfile ON UserRegistration.Id = UserProfile.RegistrationId
        INNER JOIN (
          SELECT PostalCode, GeoCenter, PrimaryCity, StateOrProvince
          FROM PostalCodes 
          WHERE @OriginPostalCode IS NULL 
             OR PostalCodes.GeoCenter.STDistance(@OriginPoint) < @WithinMeters
        ) AS ProximalPostalCodes 
            ON ProximalPostalCodes.PostalCode = UserRegistration.PostalCode
        [7 more joins including full-text queries]
      WHERE
        [20 or more lines of filtering logic]
    ) AS tmp
WHERE
  LastActivityOn > @OldestUserToSearch AND
  [any of the 20 lines that has "LastActivityO"]
ORDER BY
  LOG(DATEDIFF(WEEK, LastActivityOn, @Today))/LOG(2),
  FullTextRelevance ; 
```

SQL-Server 可能足够聪明，不会两次执行相同的代码，但这可能取决于您正在运行的版本。优化器从 2000 版到 2012 版进步了很多（Express 或其他版本可能与 Standard 或 Enterprise 版的功能不同）

* * *

与问题无关，但我认为因为`LOG()`函数是单调的，所以：

```
ORDER BY
  LOG(DATEDIFF(WEEK, LastActivityOn, @Today))/LOG(2) 
```

相当于更简单的：

```
ORDER BY
  DATEDIFF(WEEK, LastActivityOn, @Today)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T12:35:15.210

我认为包括这个加入可能会做我需要的：

```
OUTER APPLY (SELECT MAX(ActivityDate) LastActivityOn FROM (VALUES
    (UserRegistration.CreatedOn),
    (UserRegistration.ActivatedOn),
    (UserRegistration.LastLoginOn),
    (UserRegistration.UpdatedOn),
    (UserProfile.PostedOn)) AS AllDates(ActivityDate)) LastActivity 
```

还将它添加为条件 WHERE 条件，使用 NULL 参数禁用它：

```
WHERE
  (@OldestUserToSearch IS NULL OR
  LastActivityOn > @OldestUserToSearch) AND 
```

**结果**

使用它并在 SELECT 中引用它的性能与 SQL Server 2008 上的子选择相同。

当我添加 WHERE 谓词时，事情就开始变得棘手了。您可以在原始问题中看到的邮政编码半径搜索是计算中最重的部分，它在搜索的顶部效果最好，最接近“TOP 175”。不幸的是，当我在多个地方重用“OUTER APPLY”输出时，优化器将其移动到执行计划中更深的 5 个级别，其中距离计算最终针对更多行执行。结果是查询运行了大约 6 倍的时间。

因为相同形状查询的性能相同，并且代码更少（不需要重新声明我的投影或将整个查询包装在 CTE 或子查询中），所以我将调用 OUTER APPLY 我正在寻找的答案。另外，如果我需要在所有情况下强制 GIS 搜索到最外层的嵌套循环，我将不得不重新编写它的查询。

提供的选项摘要：[如何避免在同一个选择中多次重复计算表达式？](https://stackoverflow.com/questions/8181941/how-can-i-avoid-repeating-a-calculated-expression-multiple-times-in-the-same-sel)

APPLY 的一些有用的类似用途：

*   [外用函数的性能](https://stackoverflow.com/questions/10603095/performance-of-outer-apply-with-function)
*   [如何减少许多相似的相关子查询？](https://stackoverflow.com/questions/7592692/how-to-reduce-many-similar-correlated-subqueries?rq=1)
*   [在 WHERE-Clause for INSERT 中重用子查询结果](https://stackoverflow.com/questions/11818096/reuse-subquery-result-in-where-clause-for-insert)
*   [从子查询中选择多个列](https://stackoverflow.com/questions/10578608/selecting-multiple-columns-from-a-subquery)

关于子查询和 CTE 的本地示例（我拒绝作为答案）：

*   [CTE 和子查询的区别？](https://stackoverflow.com/questions/706972/difference-between-cte-and-subquery?rq=1)
*   [CTE、子查询、临时表或表变量之间是否存在性能差异？](https://stackoverflow.com/questions/11169550/is-there-a-speed-difference-between-cte-subquery-and-temp-tables?lq=1)
*   [何时使用公用表表达式 (CTE)](https://stackoverflow.com/questions/4740748/when-to-use-common-table-expression-cte?rq=1)
*   [如何引用一个 CTE 两次？](https://stackoverflow.com/questions/2136659/how-to-reference-one-cte-twice)
*   [是否可以重用子查询？](https://stackoverflow.com/questions/2686919/is-possible-to-reuse-subqueries)

具有相关标题的无关/无用文章：

*   [加入而不是相关子查询](https://stackoverflow.com/questions/1601289/join-instead-of-correlated-subquery?rq=1)
*   [使用“相关”子查询进行高效连接](https://stackoverflow.com/questions/478410/efficient-join-with-a-correlated-subquery?rq=1)
*   [从 WHERE 子句中的选择表达式中重用子查询](https://stackoverflow.com/questions/5720983/reuse-subquery-from-select-expression-in-where-clause)

# c# - 在 C# 中距离另一个 50 米的新坐标，如何？

> ID：11826689
> 
> 赞同：1
> 
> 时间：2012-08-06T10:40:00.993
> 
> 标签：c#, gps, maps, coordinates, calculus

我有一个坐标和一个标题，如何在 C# 函数中获得第二个坐标，比如距离第一个坐标 50 米？

示例信息：

```
Lat: 56.33908260  
Lon: 17.01194088

Radians:             -1.7453292519943295  
RadiansToDegrees:     57.295779513082323  
GeographicalDegrees: -170.0  
MathematicalDegrees: -100.00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:56:17.990

这取决于您正在使用/想要使用的大地测量系统。

> 使用大地测量系统或大地测量数据 [...] 将其产品上指示的位置转换为它们在地球上的实际位置。

最常用的系统之一是 WGS 84。

一些背景： [https ://math.stackexchange.com/questions/720/how-to-calculate-a-heading-on-the-earths-surface](https://math.stackexchange.com/questions/720/how-to-calculate-a-heading-on-the-earths-surface)

您正在寻找的东西对我来说看起来像是“直接问题”。 [http://en.wikipedia.org/wiki/Vincenty](http://en.wikipedia.org/wiki/Vincenty) 's_formulae#Direct_Problem

在这里你可以找到一个 C++ 实现，它应该很容易移植（尊重许可证）：

[https://github.com/pkohut/GeoFormulas/blob/master/GeoFormulas/VincentyDestination.cpp](https://github.com/pkohut/GeoFormulas/blob/master/GeoFormulas/VincentyDestination.cpp)

这个实现来源于这个公式： [http ://www.movable-type.co.uk/scripts/latlong-vincenty-direct.html](http://www.movable-type.co.uk/scripts/latlong-vincenty-direct.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:52:25.557

不是我真正熟悉的领域，但我会看看如何使用纬度和经度计算英里并将其转换为函数。

发布一些您尝试过的代码，然后我们可以从那里获取它？

**编辑**：可能的答案

[如何找到给定纬度/经度以北 x 公里的纬度/经度](https://stackoverflow.com/questions/1125144/how-do-i-find-the-lat-long-that-is-x-km-north-of-a-given-lat-long)

# jquery-ui - 如何禁用对话框中的关闭按钮

> ID：11826693
> 
> 赞同：1
> 
> 时间：2012-08-06T10:40:18.153
> 
> 标签：jquery-ui, jquery

```
 jQ('#dvShiftDialog').dialog({
                        title : 'Confirm',
                        modal : true,
                        draggable : false,
                        resizable : false,
                        disabled : false,
                        closeOnEscape : false,
                        width : 400,
                        height : 325,
                        close : function() {
                            jQ('#dvShiftDialog').dialog("destroy");
                            jQ('#dvShiftDialog').remove();
                            jQ('div.ui-dialog').remove();
                        }
                    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T21:21:57.167

如果您指的是右上角的“X”（因为根据您的代码，您在技术上没有任何“按钮”），您可以使用以下内容：

```
open: function(e, ui) {
    jQ(this).siblings(".ui-dialog-titlebar").children(".ui-dialog-titlebar-close").hide();
} 
```

将它放在您的函数中，如下所示：

```
jQ('#dvShiftDialog').dialog({
    title: 'Confirm',
    modal: true,
    draggable: false,
    resizable: false,
    disabled: false,
    closeOnEscape: false,
    width: 400,
    height: 325,
    close: function() {
        jQ('#dvShiftDialog').dialog("destroy");
        jQ('#dvShiftDialog').remove();
        jQ('div.ui-dialog').remove();
    },
   open: function(e, ui) {
       jQ(this).siblings(".ui-dialog-titlebar").children(".ui-dialog-titlebar-close").hide();
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T22:03:05.047

你也可以这样做......

```
$('#dvShiftDialog').dialog({
    title : 'Confirm',
    modal : true,
    width : 400,
    height : 325,
    open: function(event, ui) {
        $(this).parent().find(".ui-dialog-titlebar-close").hide();
    }
}); 
```

​</p>

# javascript - 检测 TAB 按键并使脚本执行有条件

> ID：11826694
> 
> 赞同：1
> 
> 时间：2012-08-06T10:40:25.943
> 
> 标签：javascript, jquery, dom

我有以下脚本

```
 $('.formfield:not(.NoHighlight, #P_PH_PHONE, #P120_PH_EMAIL) :input').focus(function(e){

            var currentElementonForm = $(this); 
            if(currentElementonForm.is("input[type=submit]")){
                currentElementonForm.parents('form').submit();
            }

    }); 
```

目前，页面在用户按选项卡（键盘 TAB 按钮）到提交按钮时提交。我想停止此操作，但仅在用户单击未选项卡式按钮时才执行此操作。希望这个问题很清楚，很乐意提供更多细节。我确实尝试检测 e.keyCode == 9 但它记录为“未定义”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:51:12.500

`enter code here`编辑：由于 keyCode 不起作用，我们可以以不同的方式解决这个问题吗？

```
$('.formfield input[type=submit]').click( function() {
      $(this).parents('form').submit();
  }); 
```

* * *

```
 $('.formfield:not(.NoHighlight, #P_PH_PHONE, #P120_PH_EMAIL) :input').focus(function(e){
            var currentElementonForm = $(this); 
            if(currentElementonForm.is("input[type=submit]")){
                var code = e.keyCode || e.which;
                if (code !== 9) {
                    currentElementonForm.parents('form').submit();
                }

            }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:20:09.893

我必须找到另一种方法来处理这个问题。问题出在“ ”事件上，即使使用 TAB 键`focus`也不返回 a 。`keyCode`所以不得不使用不同的解决方案。这对我来说是新事物，希望这可能会使遇到同样问题的人受益。

# scala - 这种用于创建两个相互依赖的对象的 scala 模式可以更干净地实现吗？

> ID：11826697
> 
> 赞同：1
> 
> 时间：2012-08-06T10:40:43.577
> 
> 标签：scala, refactoring

假设我有两个数据结构都想要引用另一个。我不能简单地让每个人都成为懒惰的 val，然后将它们相互传递；发生堆栈溢出。

我想出的解决方案是这样的：

```
class Alpha((deferredBeta: Alpha) => Beta) {
   lazy val beta = deferredBeta(this)
}

class Beta(val alpha: Alpha) {}

def main {
   val alpha = Alpha(beta)
   val beta = (alpha: Alpha) => Beta(alpha)
} 
```

虽然它有效，但它似乎有点脆弱，特别是在子类化方面。此外，如果没有良好的文档，所做的事情并不明显。

这个问题有更清洁的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:11:57.930

I think this solution is the simplest:

```
class Alpha(_beta: => Beta) {
  lazy val beta = _beta
}

class Beta(_alpha: => Alpha) {
  lazy val alpha = _alpha
}

// Exiting paste mode, now interpreting.

defined class Alpha
defined class Beta

scala> lazy val (alpha: Alpha, beta: Beta) = (new Alpha(beta), new Beta(alpha))
alpha: Alpha = <lazy>
beta: Beta = <lazy>

scala> alpha.beta
res2: Beta = Beta@4a40050

scala> beta.alpha
res3: Alpha = Alpha@38f18cc3 
```

You could also add a factory for an alpha beta pair:

```
object AlphaBeta {
  def apply() = {
    lazy val tuple @ (alpha: Alpha, beta: Beta) = (new Alpha(beta), new Beta(alpha))
    tuple
  }
}

scala> AlphaBeta()
res13: (Alpha, Beta) = (Alpha@2a3fa87a,Beta@394df741) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:57:00.177

不完全符合您的要求，但它有效：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

trait Alpha {
  self: Beta =>
  val beta: Beta = self
}

trait Beta {
  self: Alpha =>
  val alpha: Alpha = self
}

// Exiting paste mode, now interpreting.

defined trait Alpha
defined trait Beta

scala> val (alpha, beta) = {
     |   val ab = new Alpha with Beta
     |   (ab: Alpha, ab: Beta)
     | }
alpha: Alpha = $anon$1@13668e0b
beta: Beta = $anon$1@13668e0b

scala> alpha.beta
res0: Beta = $anon$1@13668e0b 
```

# c# - 如何仅使用字符串从路径中提取所有内容

> ID：11826704
> 
> 赞同：-3
> 
> 时间：2012-08-06T10:41:03.883
> 
> 标签：c#, string, path, extract

我得到了这样的路径：

*string pathFolder = " **D:\\新文件夹\anotherFolder\folder\something.txt\** ";*

而且我必须仅使用字符串方法提取此路径的每个细节。没有任何其他图书馆帮助。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:46:36.530

只需使用`string.Split`：

```
var parts = pathFolder.Split(new [] {'\\'}, StringSplitOptions.RemoveEmptyEntries); 
```

更好的选择是使用[`Path`](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)类。

# ios - 以编程方式在 ios 中打开现有的 Safari 选项卡

> ID：11826707
> 
> 赞同：0
> 
> 时间：2012-08-06T10:41:15.137
> 
> 标签：ios

我想重新打开/重定向到从我的 ios 本机目标 c 代码在 safari 中打开的现有选项卡。任何人都可以帮助解决这个问题。

谢谢 djrecker

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:44:28.077

在 UIWebview 上，使用 javascript`window.close();`之后您可以使用`window.open()`.

# ios - 使用视图控制器的更好方法是什么？

> ID：11826708
> 
> 赞同：0
> 
> 时间：2012-08-06T10:41:16.530
> 
> 标签：ios, memory-management, uiviewcontroller

在导航堆栈中考虑一个具有四个屏幕（A、B、C 和 D）的简单应用程序。导航按字母顺序 A -> B -> C -> D。

在那种情况下，我习惯于在视图控制器中创建一个成员变量来显示另一个。在我的示例中，A 保留对 B 的引用，B 对 C 和 C 对 D 的引用。

这些引用将保留在内存中，直到所有者控制器被释放。我使用这种方法来最小化控制器的创建，并在显示之前显示的屏幕时获得一些优化。

但我不知道每次需要时创建和自动释放每个控制器是否更好，而不保留它。会有更多的创作，但在一段时间内使用的内存会更少。

更好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:06:24.560

最好的方法是使用`UINavigationController`. 此类提供了一组使用视图控制器的方法。有几种最简单的方法可以使用堆栈，例如 push 和 pop 以及一些更复杂的方法。例如，您可以检索堆栈中所有控制器的数组，然后根据需要对它们重新排序/删除控制器/添加控制器/...，然后推送此数组。这种机制应该允许做你想做的每一件事。

在我看来，保存对另一个控制器的引用是不正确的。创建新的控制器它是廉价的操作，不应该花费太多时间。如果您在控制器初始化期间创建/检索数据数据，只需重新设计模型级别（如果要保存数据，您可以简单地不释放它）。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:58:05.463

更好的方法是不要让视图控制器保留下一个。`UINavigationController`自动保留添加到堆栈中的每个视图控制器，因此您不必这样做。但是，如果您尝试将已在同一堆栈中的已初始化视图控制器推送到堆栈，那么您将遇到一些令人惊讶的崩溃/异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:24:54.893

`UINavigationController``C`当您弹回. 时保留视图的信息`B`。就在您`C`再次推动时，检查它是否是`nil`. 如果它不是零，推旧的。这是一个很好的方法，不会影响您应用程序的任何方面。如果您需要更改 上的值，那将是一种痛苦，`C`因为`B`.

# php - Zend 翻译尝试包含 '.php' 并导致致命错误

> ID：11826711
> 
> 赞同：2
> 
> 时间：2012-08-06T10:41:31.390
> 
> 标签：php, zend-framework, zend-translate

我在尝试使用 Translate 类时收到 Zend 框架的一个奇怪的致命错误，它似乎试图加载一个以致命错误结尾的空文件名 (.php)。

下面是堆栈跟踪

```
[error] [client 79.160.197.135] PHP Warning:  include_once() [<a href='function.include'>function.include</a>]: Failed opening '.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear') in /usr/share/php/Zend/Loader.php on line 146, referer: index.php
[error] [client 79.160.197.135] PHP Stack trace:, referer: index.php
[error] [client 79.160.197.135] PHP   1\. {main}() /doc/index.php:0, referer: index.php
[error] [client 79.160.197.135] PHP   2\. Zend_Translate->__construct() /doc/index.php:19, referer: index.php
[error] [client 79.160.197.135] PHP   3\. Zend_Translate->setAdapter() /usr/share/php/Zend/Translate.php:89, referer: index.php
[error] [client 79.160.197.135] PHP   4\. Zend_Loader::loadClass() /usr/share/php/Zend/Translate.php:127, referer: index.php
[error] [client 79.160.197.135] PHP   5\. Zend_Loader::loadFile() /usr/share/php/Zend/Loader.php:94, referer: index.php
[error] [client 79.160.197.135] PHP Fatal error:  Uncaught exception 'Zend_Exception' with message 'File ".php" does not exist or class "" was not found in the file' in /usr/share/php/Zend/Loader.php:99 
```

作为参考，我调用zend翻译类的方式如下

```
<?php

    require_once( 'Zend/Loader.php' );

    Zend_Loader::loadClass( 'Zend_Translate' );

    $translate = new Zend_Translate(
        array(
            'gettext',
            'locale',
            null,
            array('scan' => Zend_Translate::LOCALE_DIRECTORY)
        )
    );
?> 
```

$translate 部分是调用导致崩溃的类的部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:31:55.850

事实证明 Zend 站点上的文档对于 debian 上 Aptitude 中包含的 Zend 框架来说要么太新，要么太旧。

Zend_Translate 不应使用单个数组调用，而应使用单个元素，如下所示：

```
$translate = new Zend_Translate( 'gettext', 'path/to/locale.mo', 'locale' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:55:37.573

根据您使用的 ZF 版本，您使用的是旧的（已弃用）自动加载器。

你也可以试试：

```
require_once( 'Zend/Loader/Autoloader.php' );

Zend_Loader_Autoloader::getInstance(); 
```

第一次通过调用加载自动加载器时`getInstance()`，ZF 将自动注册自动加载器。它并不能解决您的问题，而只是一个建议。

如果要创建一个新`Zend_Translate`对象，可以传递一个数组进行配置，但在指定选项时必须使用 key => value 对。

```
$translate = new Zend_Translate(
        array(
                'adapter' => 'gettext',
                'content' => 'path/to/locale.mo',
                'locale'  => 'en_US',
                'scan'    => Zend_Translate::LOCALE_DIRECTORY
        )
); 
```

# matlab - 如何通过考虑一些约束来计算该矩阵中的值 1

> ID：11826717
> 
> 赞同：0
> 
> 时间：2012-08-06T10:41:51.203
> 
> 标签：matlab

```
A = [0 0 1 2 3 4 5 0 0;
     1 2 3 4 5 0 0 0 0;
     0 0 0 1 2 3 4 5 0;
     0 0 0 0 1 2 3 4 5] 
```

然后从上面的矩阵中，我想计算值 1，它与值 >3 的列不同。但如果只有一个值与值为“1”的列相同，则没有问题。

所以我希望结果是

资源 = 2。

它们是值“1”，位于第一行和第二行。

那么解决它的代码是什么？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:29:45.013

如果我按照您在此处询问的内容进行操作。您希望能够知道给定列是否包含一个值，`1`没有值`3`或更大。

这应该让你开始：

```
 for n = 1:size(A,2)
     if(~numel(find(A(:,n)>2)) && numel(find(A(:,n)==1)))
         disp('found')
     end
 end 
```

* * *

分解这里发生的事情。

该循环旨在遍历矩阵中的每一列`A`。

`numel`返回括号 () 内矩阵中的元素数。

`find`将返回与比较条件匹配的元素的索引。在第一种情况下，我们正在寻找大于 2 的元素。在第二种情况下，等于 1 的元素。由于我们只发送一列值（一个向量），我们只会得到一个向量来返回`numel`调用。

`numel`只需计算该向量中的项目数并返回该数字。`if`如果向量为空，则数字为 0。我还使用了将 0 从解释为 false的事实，因此即使列中没有大于 2 的值，`numel`您也不会执行其中的内容。`if`

因此，如果您想知道`1`列中 s 的数量，只需使用 if 语句的 numel(find(A(:,n)==1)) 部分。

# java - 如何突出显示 ExpandableListView 的组行

> ID：11826723
> 
> 赞同：1
> 
> 时间：2012-08-06T10:42:14.470
> 
> 标签：java, android, listview, android-layout, expandablelistview

使用基于以下代码的代码，当用户在显示屏上按下它时，[`State List Selector`](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)我设法突出显示了一个子行：`ExpandableListView`

**XML 状态选择器代码：**

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android" >

  <item 
      android:state_pressed="true"
      android:drawable="@color/highlighted_entry" /> 

  <item 
      android:state_selected="true"
      android:drawable="@color/highlighted_entry" />

  <item android:drawable="@color/transparent" />

</selector> 
```

**XML ExpandableListView 布局代码：**

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout

    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:background="@drawable/exp_list_entry_selector" 
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp" >

    <TextView android:id="@+id/exp_list_entry_title"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:gravity="center_vertical"
       android:layout_alignParentTop="true"
       android:layout_alignParentBottom="true"
       android:textStyle="bold"
       android:textSize="12dp"
       android:textColor="#000000" 
    />

</LinearLayout> 
```

**Java 代码：**

```
@Override
public boolean onChildClick(    ExpandableListView parent, View v,
                                int groupPosition, int childPosition, long id ) 
{
    v.setSelected(true);    
    return false;
} 
```

如果我尝试突出显示组行（可扩展的条目），同样的方法将不起作用`ListView`：当用户按下它时它会突出显示（并展开或折叠它的子项），但在释放它之后背景颜色会恢复正常。

无论是否扩展，如何突出显示组行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-16T17:07:02.103

通过将`android:background="@drawable/row_highlighter"`属性添加到`child.xml`of `expandableListView`。和创建一个`row_highlighter.xml`文件。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@android:color/holo_orange_dark" android:state_activated="true"/>
<item android:drawable="@android:color/transparent"/>

</selector> 
```

和源代码：

```
int index = parent.getFlatListPosition(ExpandableListView
                   .getPackedPositionForChild(groupPosition, childPosition));
parent.setItemChecked(index, true); 
```

[突出显示 ExpandableListView 中的选定项](http://vardhan-justlikethat.blogspot.in/2013/10/android-highlighting-selected-item-in.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T10:50:25.450

设置适配器时，像这样传递您自己的自定义布局

```
SimpleCursorTreeAdapter mAdapter = new ListinoProdottiAdapter(null, ListinoProdottiActivity.this,

                                R.layout.my_simple_expandable_list_item_1,
                                R.layout.listino_prodotti_row,
                                ....
                        ); 
```

在 **R.layout.my_simple_expandable_list_item_1**内部（我将背景设置为红色）

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:paddingLeft="?android:attr/expandableListPreferredItemPaddingLeft"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
    android:background="@color/red"
/> 
```

# ios - 一家公司可以加入两个具有不同 Apple ID 的 iOS 开发者计划吗？

> ID：11826724
> 
> 赞同：0
> 
> 时间：2012-08-06T10:42:25.053
> 
> 标签：ios, iphone

情况是这样的：一个现有的 Apple ID 被用来发布娱乐应用程序。现在我们（来自同一公司的不同部门）将发布一些严肃的商业应用程序。我们希望我们的严肃应用程序以更严肃的开发者名称发布（因此与现有的名称不同）。我们应该做什么？是否可以/允许以相同的公司身份注册新的 Apple ID 并加入 iOS 开发者计划？

感谢您的任何投入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:07:43.053

最初创建帐户时，在 iTunes Connect 中建立了“开发者名称”。您以后无法更改它，因此您可能会遇到两个不同的帐户。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-06T11:06:20.967

在 Apple Developer Website 的 IOS 门户中，您可以创建任意数量的应用 ID，并且显然每个应用 ID 都是唯一的，例如 com.companyname.app1、com.companyname.app2。所以你所谓的认真的开发者应该使用不同的APP id来发布应用程序。

# jquery - jquery的动画功能使浏览器崩溃

> ID：11826728
> 
> 赞同：0
> 
> 时间：2012-08-06T10:42:45.750
> 
> 标签：jquery, browser, crash, jquery-animate

问题在于从最后第 5 行开始的 jquery 的动画功能，如果我删除该行它可以正常工作，否则它会使浏览器崩溃{尤其是 firefox}，但我需要该动画功能来让用户知道新的更新......可以任何人请告诉我为什么动画功能会导致浏览器崩溃？？？

```
function doAnimation() {

    var newUpdate = newUpdates.updates[updateIterator] != null ? newUpdates.updates[updateIterator] : null;
    var update = "";

    while (newUpdate != null) {

        if (updateIterator == 0) {
            $(".nodata").hide();
        }

        lastupdateTime = newUpdate.lastUpdate;

        update += "<div class='live-updates-data'><img width='48px' height='48px'  class='" + newUpdate.clientId + "' src='company_logo/thumb/" + newUpdate.img + "' align='logo' onerror='showDefaultimage(this);' /><h2><span>" + newUpdate.title + "</span></h2>&nbsp;&nbsp;&nbsp; <a style='font-family:Arial, Helvetica, sans-serif' class='" + newUpdate.clientId + " mp'> &nbsp;&nbsp;|&nbsp; Join Chat &nbsp;</a><p>" + newUpdate.updateMessage + "</p></div>";

        updateIterator++;
        newUpdate = newUpdates.updates[updateIterator] != null ? newUpdates.updates[updateIterator] : null;

    } // end of while
    // after finishing the while loop
    if (update != "") {
        $("#shoutBox").prepend(update);
        $("#shoutBox div:first-child").animate({
            "height": "toggle"
        }, "slow", "linear");
    }
    oTimeout = setTimeout(getShouts, timoutSpeed); //Again start the timout function to ge  
    updateIterator = 0;
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T02:19:48.010

这将连续触发`$(".nodata").hide();`，并将附加到 jquery 动画队列中。把它写成……

```
if (updateIterator === 0 && !$(".nodata").is(":hidden")) {
            $(".nodata").hide();
} 
```

# c# - .Net 中用于创建钢笔/画笔等的图形的特殊/奇怪行为

> ID：11826729
> 
> 赞同：2
> 
> 时间：2012-08-06T10:42:47.420
> 
> 标签：c#, .net, compact-framework

我有一个用户控件，我在控件构造函数中创建了一些钢笔和画笔，并使用它们在位图​​上绘图，我正在使用.Net Compact Framework，`Graphics`如果我有三个，我发现它的行为非常奇怪，`Pens`假设`Green, Red and Blue`我更新我的位图每秒钟都会`100 ms`创建`20`笔，这意味着如果我有三个相同颜色的笔，那么它只会创建.`2` `Pens``100 ms``Pens``1` `Pen`

示例代码：

```
 public MyTestControl()
        {
            InitializeComponent();
            _barBrush = new SolidBrush(Color.Red);
            _func1Pen = new Pen(Color.Red);
            _func2Pen = new Pen(Color.Blue);
            _func3Pen = new Pen(Color.Green);
        } 

      protected override void OnPaint(PaintEventArgs e)
        {
            if (_bmpScreen == null)
            {
                _bmpScreen = new Bitmap(ClientRectangle.Width, ClientRectangle.Height);
                _gBmp = Graphics.FromImage(_bmpScreen);    
            }

            _gBmp.Clear(Color.White);    
            DoDrawings();    
            //
            e.Graphics.DrawImage(_bmpScreen, 0, 0);
        }

     private void DoDrawings()
        {
            if (Data == null) return;

            switch (Data.Length)
            {
                case 1:
                    DrawGraph(Data[0].Where(val => val != Config.NO_DATA_VALUE).ToArray(), _func1Pen);
                    break;
                case 2:
                    DrawGraph(Data[0].Where(val => val != Config.NO_DATA_VALUE).ToArray(), _func1Pen);
                    DrawGraph(Data[1].Where(val => val != Config.NO_DATA_VALUE).ToArray(), _func2Pen);
                    break;
                case 3:

                    DrawGraph(Data[2].Where(val => val != Config.NO_DATA_VALUE).ToArray(), _func1Pen);
                    DrawGraph(Data[0].Where(val => val != Config.NO_DATA_VALUE).ToArray(), _func2Pen);
                    DrawGraph(Data[1].Where(val => val != Config.NO_DATA_VALUE).ToArray(), _func3Pen);
                    break;
                default:
                    break;
            }

        }

private void DrawGraph(int[] data, Pen pen)
        {
            if (data == null) return;           

            Point[] newPoints = GetDataPoints(data);
            DrawLines(newPoints, pen, _gBmp);           
        }

private void DrawLines(Point[] newPoints, Pen functionPen, Graphics g)
        {
            g.DrawLines(functionPen, newPoints);
            } 
```

注意：我正在使用`.Net Compact Framework 3.5`并且我的刷新率是`100 ms` 我正在使用`.Net Compact Framework Remote Performance Monitor`的，它告诉我`20 Pens`每个`second`, `Number of Pens Created increases by 20 every second`.

知道`2 Pens`每次更新位图时会导致创建什么吗？

# c# - 在 C# 中打开泛型类型继承动态识别

> ID：11826731
> 
> 赞同：8
> 
> 时间：2012-08-06T10:42:54.627
> 
> 标签：c#, generics

当我有两个非泛型`Type`对象`a`和时，我可以使用该函数`b`轻松验证 a 是否可以从 b 分配。`a.IsAssignableFrom(b)`

```
class ClassBase { }
class ClassDerived : ClassBase { }
...
typeof(ClassBase).IsAssignableFrom(typeof(ClassDerived)) //returns true 
```

现在说我有两个通用接口：

```
interface IBase<T> { }
interface IDerived<T> : IBase<T> { } 
```

如果我关闭它们，我可以做和以前一样的事情，具有完全相同的行为，例如

```
typeof(IBase<object>).IsAssignableFrom(typeof(IDerived<object>)) //returns true 
```

事实上，任何`T`可以用来关闭的东西`IDerived`也可以用来关闭`IBase`并且可以从（对于那个特定的T）`IBase<T>`分配。`IDerived<T>`

然而，

```
typeof(IBase<>).IsAssignableFrom(typeof(IDerived<>)) //returns false 
```

我有点知道为什么会这样（它们可以在不同的类型上关闭，从而变得不可转换？）。我知道在这种情况下确实返回 true 的函数因此有些不同。问题是：“对于每个有效的 都可以`IBase<T>`分配吗？” （感谢[hvd](https://stackoverflow.com/users/743382/hvd)）`IDerived<T>``T`

**我想做的**是关闭泛型，然后询问它们是否可分配。但总的来说，我需要关闭`b`可以采用的最通用类型，这可能a）丑陋，b）很难做到。

另一种方法是在实现/继承树上向上`b`并尝试将其与`a`.

我的**问题**是，即使在一般情况下，是否有更简单的方法可以做到这一点。

**动机：**普遍的兴趣，因为我实际上并不需要这个。然而，当我将 Ninject 与开放和封闭的泛型一起使用时，最初需要这样做，我需要解决是否可以将开放的泛型类转换为开放的泛型接口（类）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:31:24.530

您提供的泛型接口直接从另一个泛型继承的示例掩盖了解决开放泛型之间兼容性的复杂性。有关这方面的更多信息，请阅读 Eric Lippert 最近的博客文章：[为什么不自动推断约束？](http://blogs.msdn.com/b/ericlippert/archive/2012/03/09/why-not-automatically-infer-constraints.aspx).

根据链接文章中 Eric 的注释，我不会尝试解决确定泛型接口是否在所有情况下都可以相互分配的一般情况。该解决方案的很大一部分将需要确定这两种类型的约束（如果有的话）是否完全相交。当一个开放的通用接口在某些情况下可分配给另一个但不能分配给另一个时，您还必须决定您*希望*假设方法返回什么，如果存在重叠但不重合的约束，就会发生这种情况。

**更新**

如果您将其打包在扩展方法中，那么按照您的建议比较直接继承“走上树”非常容易。但是，为了实际确定两个开放的泛型类型是否相等，您必须定义自己的比较，因为内置的相等比较不适用于由泛型类型检索`GetInterfaces`或调用的类型定义：`BaseType`

```
typeof(Base<>) == typeof(Derived<>).BaseType; // Returns false
typeof(IBase<>) == typeof(Base<>).GetInterfaces()[0]; // Returns false 
```

这可能源于开放的泛型类型检索自`BaseType`或`GetInterfaces()`具有空`FullName`属性的事实，即使填充了`Namespace`and`Name`属性。因此我也通过自己的`GetFullName()`扩展方法定义了一个可选`strongName`参数来确定是否包含完整的程序集名称。

因此，这里有一个相当紧凑的实现，用于比较开放泛型类型之间的直接继承或实现：

```
public static class TypeExtensions {
    public static bool OpenIsAssignableFrom(this Type baseType, Type c, bool strongName = true) {
        if (!baseType.IsGenericTypeDefinition || !c.IsGenericTypeDefinition) return false;
        if (baseType.IsInterface)
            return c.ImplementsOpenInterface(baseType);
        Type testBaseType = c;
        while (testBaseType != null) {
            if (baseType.GetFullName(strongName) == testBaseType.GetFullName(strongName)) return true;
            testBaseType = testBaseType.BaseType;
        }
        return false;
    }

    public static bool ImplementsOpenInterface(this Type sourceType, Type ifaceType, bool strongName = true) {
        if (!ifaceType.IsInterface) return false;
        return sourceType.GetInterfaces().Any(I => I.GetFullName(strongName) == ifaceType.GetFullName(strongName));
    }

    public static string GetFullName(this Type type, bool strongName = false) {
        string name = type.FullName ?? "";
        if (name.Length == 0)
            name = type.Namespace + "." + type.Name;
        if (strongName)
            name += ", " + type.Assembly.FullName;
        return name;
    }
} 
```

给定以下开放的通用接口：

```
namespace TypeExample {
    public interface IBase<T> { }
    public interface IDerived<T> : IBase<T> { }
    public interface IDerived2<T> : IDerived<T> { }

    public class Base<T> : IBase<T> { }
    public class Derived<T> : Base<T>, IDerived<T> { }
    public class Derived2<T> : Derived<T>, IDerived2<T> { }
} 
```

以下所有内容都将返回`true`：

```
typeof(IBase<>).OpenIsAssignableFrom(typeof(Base<>));
typeof(IBase<>).OpenIsAssignableFrom(typeof(Derived2<>));
typeof(Base<>).OpenIsAssignableFrom(typeof(Derived2<>));
typeof(IBase<>).OpenIsAssignableFrom(typeof(IDerived2<>)); 
```

这是使用构造的泛型类型和内置的 IsAssignableFrom 的直观相同结果：

```
typeof(IBase<string>).IsAssignableFrom(typeof(Base<string>));
typeof(IBase<string>).IsAssignableFrom(typeof(Derived2<string>));
typeof(Base<string>).IsAssignableFrom(typeof(Derived2<string>));
typeof(IBase<string>).IsAssignableFrom(typeof(IDerived2<string>)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:42:21.840

正如您已经发现的那样，`typeof(IBase<>).IsAssignableFrom(typeof(IDerived<>))`永远不会返回 true，因为这两个开放的泛型类型不在彼此的继承层次结构中。

> 我的问题是，即使在一般情况下，是否有更简单的方法可以做到这一点。

不，不是*更容易*，但是...

如果对于您正在检查可分配性的两种泛型类型中的任何一种`T`都没有任何约束 ( `where T: ...`)，我认为您可以通过使用`object`as 类型参数来构造封闭的泛型类型，然后`IsAssignableFrom`在构造类型上使用。

如果`T`受任何泛型类型的约束，则必须使用反射来查找这些约束（[Type.GetGenericArguments](http://msdn.microsoft.com/en-us/library/system.type.getgenericarguments.aspx)、[Type.GetGenericParameterConstraints](http://msdn.microsoft.com/en-us/library/system.type.getgenericparameterconstraints.aspx)），然后使用该信息构造泛型类型。`A<T> : B<T>`在这种情况下，由于继承（相同） ，约束类型必须仍然相同`T`，以便在两个泛型类型之间具有可分配性的可能性。请注意，如果一种约束类型继承了另一种约束类型，则如果您使用两种约束类型中派生最多的类型来构造它们，您将发现泛型类型的可分配性。

这里有些例子：

```
 public class A<T> {}
    public class B<T> : A<T> {}

    public class C<T> where T: E {}
    public class D<T> : C<T> where T: F {}

    public class E {}
    public class F : E {}
    public class G : F {}

    typeof(A<>).IsAssignableFrom(typeof(B<>))              // false
    typeof(A<object>).IsAssignableFrom(typeof(B<object>))  // true
    typeof(A<string>).IsAssignableFrom(typeof(B<string>))  // true
    typeof(C<E>).IsAssignableFrom(typeof(D<F>))            // false
    typeof(C<F>).IsAssignableFrom(typeof(D<F>))            // true
    typeof(C<G>).IsAssignableFrom(typeof(D<G>))            // true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-18T20:37:22.233

一个老问题，但由于我在搜索中遇到它并想出了（恕我直言）一个更好的答案，所以我将把它留在这里......

`BaseType`由于 Joshua 指出的原因，从返回的开放泛型类型上的属性`GetGenericTypeDefinition`将不可比较。

但是，封闭泛型类型的`BaseType`属性将返回基的封闭泛型类型。所以你可以沿着封闭的泛型树向上走，直到有一个匹配的 open `GetGenericTypeDefinition`。

```
bool InheritsOpenGeneric(Type type, Type openGenericType)
{
   if (!type.IsGenericType) return false;
   if (type.GetGenericTypeDefinition() == openGenericType) return true;
   return InheritsOpenGeneric(type.BaseType, openGenericType);
} 
```

# java - 在java中获取今天的日期

> ID：11826739
> 
> 赞同：1
> 
> 时间：2012-08-06T10:43:37.073
> 
> 标签：java, date, timestamp

这是我的数据库：

```
date          status
1343469690     Q
1343470540     C
1343470556     P 
```

我写了这段代码：

```
public class TodayQ {

    public int data() {
        int count = 0;
        //count++;

        try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/pro", "root", "");

            PreparedStatement statement = con.
                    prepareStatement("select * from orders where status='Q' AND date=CURDATE()");
            ResultSet result = statement.executeQuery();
            while (result.next()) {
                // Do something with the row returned.
                count++; //if the first col is a count.
            }
        } catch (Exception exc) {
            System.out.println(exc.getMessage());
        }
        return count;
    }
} 
```

当日期为`yyyy-mm-dd`格式时，它可以成功运行。但现在我的日期是`1343469690`格式的时间戳。如何获取计数值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:52:12.190

如果它实际上是时间戳，那么您有日期：请参阅[http://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html](http://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html)。将时间戳转换为日历 (http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html) 很简单：请参阅 Calendar.setTimeInMillis() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:29:38.387

将**CURDATE()**替换为**FROM_UNIXTIME()**。根据您的代码，您应该像这样更改；

```
 PreparedStatement statement = con.prepareStatement("select * from orders where status='Q' AND date=FROM_UNIXTIME(date,'%Y %M %D')"); 
```

请参阅[此处](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)的参考。

# html - 使用 dart 访问网络摄像头

> ID：11826740
> 
> 赞同：3
> 
> 时间：2012-08-06T10:43:43.457
> 
> 标签：html, webcam, dart

有没有办法可以使用飞镖访问计算机上的网络摄像头。我已经尝试过文档并阅读了博客，但似乎以前没有人问过这个问题。

谢谢，肯尼斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:25:39.710

访问 cam 不一定是 Dart 特定的问题，而是是否存在**可通过 Dart 访问的相应 HTML5 API**。

[MediaStream](http://api.dartlang.org/docs/continuous/dart_html/MediaStream.html)和[LocalMediaStream](http://api.dartlang.org/docs/continuous/dart_html/LocalMediaStream.html)可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:29:06.483

我尝试了以下但没有成功：

```
VideoElement webcamVideo = query('#webcamVideo');
window.navigator.webkitGetUserMedia({'video': true}, (e) { 
    print(e);
    webcamVideo.src = new DOMURL().createObjectURL(e);
}); 
```

问题是在 Dart SDK 版本 10311 中，DOMURL 接口中明显缺少 createObjectURL()，尽管它在 _DOMURLImpl 中可用（编辑：作为静态方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-02T11:23:21.277

我认为这可能有助于使用 Flutter/Dart 访问网络摄像头

```
import 'package:flutter/material.dart';
import 'dart:html';
import 'dart:ui' as ui;

class WebCam extends StatefulWidget {
  const WebCam({Key? key}) : super(key: key);

  @override
  _WebCamState createState() => _WebCamState();
}

class _WebCamState extends State<WebCam> {
  // Webcam widget to insert into the tree
  late Widget _webcamWidget;
  // VideoElement
  late VideoElement _webcamVideoElement;
  @override
  void initState() {
    super.initState();
    // Create a video element which will be provided with stream source
    _webcamVideoElement = VideoElement();
    // Register an webcam
    // ignore: undefined_prefixed_name
    ui.platformViewRegistry.registerViewFactory(
        'webcamVideoElement', (int viewId) => _webcamVideoElement);
    // Create video widget
    _webcamWidget =
        HtmlElementView(key: UniqueKey(), viewType: 'webcamVideoElement');
    // Access the webcam stream
    window.navigator.getUserMedia(video: true).then((MediaStream stream) {
      _webcamVideoElement.srcObject = stream;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: SingleChildScrollView(
        child: Center(
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: <Widget>[
              Text(
                'Webcam MediaStream:',
                style: TextStyle(fontSize: 30, fontStyle: FontStyle.italic),
              ),
              Container(width: 750, height: 750, child: _webcamWidget),
            ],
          ),
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: () {
          print(_webcamVideoElement.srcObject!.active!);
          if (_webcamVideoElement.srcObject!.active!) {
            _webcamVideoElement.play();
          } else {
            _webcamVideoElement.pause();
          }
        },
        tooltip: 'Start stream, stop stream',
        child: Icon(Icons.play_circle),
      ),
    );
  }
} 
```

# java - 在同步方法/函数中比较两个 HashMap 时面临的问题

> ID：11826745
> 
> 赞同：0
> 
> 时间：2012-08-06T10:44:11.460
> 
> 标签：java, multithreading, hashmap

```
static protected HashMap<String, String> secMapMulti = new HashMap<String, String>();
static protected HashMap<String, String> baMapMulti = new HashMap<String, String>();
static protected HashMap<String,PrintWriter> writeAndClientId = new HashMap<String,PrintWriter>();
static String client_id = "";
static PrintWriter pw_eq=null;
static String[] split_str_data;
static int data_length;

public static synchronized void serveAllWriters(String data) {
    split_str_data = data.split(",");
    data_length = data.indexOf('|');

    for (Map.Entry<String, PrintWriter> entry : writeAndClientId.entrySet()) {
        pw_eq = entry.getValue();
        client_id = entry.getKey();

        if (baMapMulti.containsKey(nse_eq_client_id + ":" + split_str_data[0])) {
            pw_eq.println(data);
        } else {
            if (secMapMulti.containsKey(client_id + "-" + split_str_data[0])) {
                data = data.substring(0, data_length + 1);
                pw_eq.println(data);
            }
        }
    }
} 
```

有时两个 HashMap 都被比较，有时只比较 hashmap 的第一个值，奇怪的是发生了两个 Hashmap 包含需要根据特定条件比较的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:55:21.890

问题描述不是很清楚？如果一个条件为真，则您有`if else`分支语句，它不会查看 else 块中的代码。那是你的问题吗？

没有办法在您使用的同时比较两张地图`if-else`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:59:52.823

嘿，您的建议仅此而已。如果键是 baMapMulti 或者键在 secMapMulti 中，您要么打印数据。如果在两个映射中都找不到该键，则“数据”将打印在查找的任一键中，或者根本不会打印。但是数据永远不会从哈希图查找中打印出来。但我不确定我是否回答了问题，因为问题不是很清楚。请编辑问题以获得正确答案。一个拙见是，以更清晰的方式命名您的地图（ba 和 sec 对我来说没有任何意义）。干杯。

# jquery - 根据所选选项的数量添加一个类

> ID：11826747
> 
> 赞同：0
> 
> 时间：2012-08-06T10:44:25.330
> 
> 标签：jquery

我有一个选择框在页面上使用了很多次。

```
<div class="some-div">
    <a class="maybe">Maybe</a>
    <select class="selectclass">
        <option>Maybe</option>
        <option>Yes</option>
        <option>No</option>
    </select>
</div> 
```

我如何使用 jQuery 根据所选选项的数量向“a”元素添加一个类？因为该站点是多语言的，所以不能从值中获取类别，而是从选项的数量中获取类别：'maybe' 代表第 1 个，'yes' 代表第 2 个，'no' 代表第 3 个。该选择在页面上被多次使用，因此它应该只适用于正在运行的那个。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:55:06.770

## 更新 - 根据 OP 的要求

您是否尝试像在此[**演示中所做的那样**](http://jsfiddle.net/akhurshid/AuY6S/)

**jQuery：**

```
$('.selectclass').change(function(){

    var number = $(this).val();
    var value = $("option^[value=" + number + "]").text();

    $(this).parent().find('a').html(value);    
    $(this).parent().find('a').attr('class', 'opt' + number);

});​ 
```

**HTML：**

```
<div class="some-div">
    <a class="opt1">Maybe</a>
    <select class="selectclass">
        <option value="1">Maybe</option>
        <option value="2">Yes</option>
        <option value="3">No</option>
    </select>
</div>​ 
```

**CSS：**

```
.opt1{ color:blue; }
.opt2{ color:green; }
.opt3{ color:red; }​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:58:11.623

首先将您的 HTML 更改为使用选项“值”属性，这样您就不会关心多语言架构。

```
<div class="some-div">
<a class="maybe">Maybe</a>
<select class="selectclass">
    <option value="1">Maybe</option>
    <option value="2">Yes</option>
    <option value="3">No</option>
</select> 
```

绑定到您的 ddl 更改方法并使用 jquery 查找您的 ddl 的值。

```
$('.selectclass').bind("change", function() {  
var option = $(this).val();
if (option == 1)
{
//your code
}
else if...
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T10:59:22.157

## HTML

为您的选项添加一些值...

```
<div class="some-div">
    <a class="maybe">Maybe</a>
    <select class="selectclass">
        <option value="maybe">Maybe</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
    </select>
</div>​​​​​​ 
```

## Javascript (jQuery)

选择器必须在实际代码中更加具体，以避免冲突......

```
// add a `change` event to the select element
​$("select").on("change",function(){
    // get the value of the select element
    var val = $(this).val()
    // remove all classes from the `a` tag  and add the
    // recently got value as a class of the `a` tag
    $("a").removeClass().addClass(val)
})​​​​​​​​​ 
```

## CSS

只是为了测试...

​</p>

```
.no{
    color: red;
}
.yes{
    color: green;
}

.maybe{
    color: orange;
}
​ 
```

## 演示

预烘焙演示可以在这里看到：http: [//jsfiddle.net/uBCJd/](http://jsfiddle.net/uBCJd/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T11:01:38.830

这将为您提供所选选项的索引并更改链接的类和文本​</p>

```
$(".selectclass").live("change",function(){
    var index = $(this).children("option:selected").index() + 1;
    $(this).parent().find('a').text(index+':'+$(this).val());
    $(this).parent().find('a').attr('class',index);
});​ 
```

# css - 没有文字的CSS背景图像？

> ID：11826751
> 
> 赞同：3
> 
> 时间：2012-08-06T10:44:37.860
> 
> 标签：css, background-image

我有一个简单的信息图标，我想将它显示为 css 背景图像。这是我尝试过的：

```
span.info {
    background-image: url(info.png);
    float: right;
    width: 17px;
    display: block;
} 
```

这就是我使用它的方式：

```
<span class="info"></span> 
```

这不显示图像。我必须有一些文字，像这样：

```
<span class="info">test</span> 
```

这将显示带有文本的图像，但我希望它没有任何文本，只是图像。怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T10:46:27.390

你必须在你的风格中设置一个高度。

```
span.info {
    background-image: url(info.png);
    float: right;
    width: 17px;
    height: 17px;
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T10:46:29.947

即使使用`display:block`（这是强制性的），您也需要指定跨度的高度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T10:47:07.763

如果您只想要图像，为什么不`<img>`直接使用。它可以让您更好地控制图像。

但是您可以拥有 span 的背景图像，如下所示。

`<span>`不是像`<div>`. 所以你必须设置它的`"display: block"`. 然后为跨度指定一些高度和宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T10:47:16.480

如果没有内容，跨度将不会显示任何内容，除非您在 CSS 中指定高度（和宽度）...

```
span.info {
    height: 17px;
    ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T10:48:03.487

这应该工作：
`<span class="info">&nbsp;</span>`

# xmpp - 设置了自定义密码的 XMPP/Jabber 服务器？

> ID：11826752
> 
> 赞同：0
> 
> 时间：2012-08-06T10:44:39.510
> 
> 标签：xmpp

我有一个已经设置了用户名和密码的服务，我想向其中添加 Jabber 服务。

是否有任何开源 XMPP 服务器可以自定义以在 Postgres 数据库中使用我现有的用户名和密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:39:44.857

你可以用[Openfire](http://www.igniterealtime.org/projects/openfire/index.jsp)做到这一点。您可以编写自己的扩展来支持自定义身份验证机制，或者您可以通过一些[简单的配置](http://www.igniterealtime.org/builds/openfire/docs/latest/documentation/db-integration-guide.html)来管理它（查看身份验证集成部分）。

# javascript - 与 openzoom 一起使用时，iframe 允许在包含页面中滚动

> ID：11826754
> 
> 赞同：0
> 
> 时间：2012-08-06T10:44:42.710
> 
> 标签：javascript, html, flash, iframe

我已附加该网站，因为我无法在 jsfiddle 中重新创建它。将鼠标悬停在 iframe 中的 openzoom 组件上并使用鼠标向内或向外滚动时，页面也会移动。“在” iframe 中时如何防止页面滚动？

[这是一个示例网站](http://wikisend.com/download/736744/iframescrollingproblem.zipx%5Diframescrollingproblem.zipx)

打开 main.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:20:23.560

使用 Brandon Aaron 的 Mousewheel 插件可以实现。

这是代码..

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
</head>
<body>
<p>...</p>
<iframe src="viewer.htm" id="viewer" width="565px" height="200px" marginwidth="0px" marginheight="0" frameborder="0"></iframe>
<p>...</p>
<script src="https://github.com/brandonaaron/jquery-mousewheel/raw/master/jquery.mousewheel.js"></script>
<script>
$(function() {

  var viewer = $('#viewer'),
      height = viewer.height(),
      scrollHeight = viewer.get(0).scrollHeight;

  viewer.bind('mousewheel', function(e, d) {
    if((this.scrollTop === (scrollHeight - height) && d < 0) || (this.scrollTop === 0 && d > 0)) {
      e.preventDefault();
    }
  });

});
</script>
</body>
</html> 
```

**编辑：**

链接到我的副本：[http ://testing.dpwebdev.co.uk/stackoverflow/main.html](http://testing.dpwebdev.co.uk/stackoverflow/main.html)

# c# - 使用属性验证架构

> ID：11826756
> 
> 赞同：1
> 
> 时间：2012-08-06T10:44:45.180
> 
> 标签：c#, xml, validation, xsd, schema

我有以下xml：

```
<Root>
    <SomethingA/>
    <SomethingB/>
    <SomethingC/>
    <SomeOtherThing action="Foo">
        <Bar/>
        <Bar/>
    </SomeOtherThing>
    <SomeOtherThing action="Poo">
        <BarFoo/>
        <BarNoo/>
    </SomeOtherThing>
</Root> 
```

我想创建一个模式，它将验证如果元素是 SomeOtherThing，那么如果动作是 Foo，则子元素只能是 Bar；如果动作是便便，那么子元素可以是 BarFoo（和/或）BarNoo。

关于如何完成它的任何想法（仅使用 xsd）？

此外，该解决方案需要在 C# 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:32:17.190

这种条件验证不能在 XSD 1.0 中完成。它可以在 XSD 1.1 中使用称为“条件类型分配”的特性来完成。

# jsf - JSF。在每次页面加载时调用支持 bean 方法

> ID：11826757
> 
> 赞同：6
> 
> 时间：2012-08-06T10:44:45.850
> 
> 标签：jsf, jakarta-ee, jsf-2

简而言之，这是我的情况。

我有一个带有数据表的页面和几个由 bean 支持的按钮。Bean 应该使用一些默认属性进行初始化。该属性可以根据操作进行更改。我从 RequestScoped bean 和 @PostConstruct 注释方法开始。但似乎数据表仅适用于视图（会话）范围。现在我的设置如下所示：

```
@ManagedBean
@ViewScoped
public class ProductsTableBean implements Serializable {

    private LazyDataModel<Products> productsData;
    @Inject
    private ProductsFacade model;

    public void onPageLoad() {
       // here some defaults are set
       // ...
       System.err.println("onPageLoad called");
    }

    public void addRow() {
       // andhere some defaults redefined
       // ...
       System.err.println("addRow called");
    }

    ... 
```

和来自 jsf 页面的片段：

```
 <p:commandButton action="#{productsTableBean.addRow()}"
                     title="save"
                     update="@form" process="@form" >
    </p:commandButton>
    ...
    <f:metadata>
        <f:event type="preRenderView" listener="#{productsTableBean.onPageLoad}"/>
    </f:metadata> 
```

这是调用顺序中出现的主要问题，我有以下输出：

```
onPageLoad called
addRow called
onPageLoad called <-- :( 
```

但我希望 addRow 成为最后一个被调用的操作，如下所示：

```
onPageLoad called
addRow called 
```

这里有什么简单的解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T12:05:47.633

检查此链接： [http ://www.mkyong.com/jsf2/jsf-2-prerenderviewevent-example/](http://www.mkyong.com/jsf2/jsf-2-prerenderviewevent-example/)

您知道每个请求都会调用该事件：ajax，验证失败....您可以检查它是否是这样的新请求：

```
public boolean isNewRequest() {
        final FacesContext fc = FacesContext.getCurrentInstance();
        final boolean getMethod = ((HttpServletRequest) fc.getExternalContext().getRequest()).getMethod().equals("GET");
        final boolean ajaxRequest = fc.getPartialViewContext().isAjaxRequest();
        final boolean validationFailed = fc.isValidationFailed();
        return getMethod && !ajaxRequest && !validationFailed;
    }

public void onPageLoad() {
       // here some defaults are set
       // ...
if (isNewRequest()) {...}
       System.err.println("onPageLoad called");
    } 
```

# animation - 搅拌机中的汽车装备并导入 Unity

> ID：11826758
> 
> 赞同：2
> 
> 时间：2012-08-06T10:44:47.920
> 
> 标签：animation, unity3d, blender, blender-2.61

我是统一的新手，我的问题是：我正在尝试将装配好的汽车模型从搅拌机 2.6 导入统一 3.5。但是当我将汽车物理导入统一时，它的装备无法以与在搅拌机中创建的方式相同的方式运行。请让我知道我是否需要再次统一设置所有物理和装备？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:50:01.110

你在使用网格对撞机吗？Mesh collider 只有在你有一个静态对象时才能正常工作。

我的建议是在 car 上使用 box collider，在 whells 上使用 whell collider，您可以导入动画，并使用 Animation.Play("animation") 调用它们，并将其放在 if (Input.GetKeyDown (Keyboard.A ）） 例如。或者你可以在统一上做动画，按 CTRL+6

您可以查看 [此](http://unity3d.com/support/resources/tutorials/car-tutorial)Unity 汽车游戏教程。

# c# - 将 Null 值传递到数据库

> ID：11826766
> 
> 赞同：0
> 
> 时间：2012-08-06T10:45:06.443
> 
> 标签：c#, asp.net, sql, xml

我编写了一个从目录读取 XML 文件的服务，它从数据中创建对象并将数据传递到数据库中。我以前有这个工作，但由于某种原因，该服务现在正在创建一个表行，但是它会自动将 0 插入数据库而不是 XML 文件中的数据。我的代码如下：

此 Web 服务方法触发`XMLloader`该类：

```
[WebMethod]
public void RunService()
{
    //Call XML loader to get collection of XML documents 
    foreach (GamePlay value in XMLLoader.Start())
    {
        value.addNewGamePlay();
    }
    //call inject data method for each collection
} 
```

此类`XMLLoader`返回对象数组`GamePlay`：

```
public static Array Start()
{
   string[] filePaths = Directory.GetFiles(@"C:\Users\bradleya\Desktop\XML\");
   List<GamePlay> gameObj = new List<GamePlay>(); 

   foreach (string value in filePaths)
   {
      XmlDocument xd = new XmlDocument();
      xd.Load(value);
      XmlNode documentNode = xd.SelectSingleNode("/GamePlayData/GamePlay");

      GamePlay newGame = new GamePlay();
      newGame.setType(Convert.ToString(documentNode.SelectSingleNode("type").InnerText));
      newGame.setGamePlayID(Convert.ToInt32(documentNode.SelectSingleNode("GamePlayID").InnerText));
      newGame.setParticipantID(Convert.ToInt32(documentNode.SelectSingleNode("ParticipantID").InnerText));
      newGame.setGameVersionID(Convert.ToInt32(documentNode.SelectSingleNode("GameVersionID").InnerText));
      newGame.setGameID(Convert.ToInt32(documentNode.SelectSingleNode("GameID").InnerText));
      newGame.setGameScenarioID(Convert.ToInt32(documentNode.SelectSingleNode("GameScenarioID").InnerText));
      newGame.setStartDateTime(Convert.ToDateTime(documentNode.SelectSingleNode("Start").InnerText));
      newGame.setEndDateTime(Convert.ToDateTime(documentNode.SelectSingleNode("End").InnerText));
      newGame.setSuccess(Convert.ToBoolean(documentNode.SelectSingleNode("Success").InnerText));

      gameObj.Add(new GamePlay(gameObj));
   }

   return gameObj.ToArray();
} 
```

此方法在将对象变量传递给数据访问层的对象类中触发：

```
public void addNewGamePlay()
{
    // dataaccess method call to add GamePlay
    // (from the DB) is then set for the object
    DataAccessConn.createNewGamePlay(this.ParticipantID, this.GameVersionID, this.GameID, this.GameScenarioID, this.StartDateTime, this.EndDateTime, this.success);
} 
```

最后通过这里的数据访问层方法将数据传入数据库：

```
public static void createNewGamePlay(int ParticipantID, int GameVersionID,int GameID,int GameSenarioID,DateTime Start,DateTime End,Boolean success)
{
   SqlConnection oConn = new SqlConnection();
   oConn.ConnectionString = @"Data Source=SNICKERS\SQLEXPRESS;Initial Catalog=VervePhaseOne;Integrated Security=True";

   oConn.Open();

   SqlCommand cmd = new SqlCommand();
   cmd.Connection = oConn;
   cmd.CommandType = CommandType.StoredProcedure;
   cmd.CommandText = "addGamePlay";

   cmd.Parameters.Add(new SqlParameter("@ParticipantID", SqlDbType.Int));
   cmd.Parameters["@ParticipantID"].Value = ParticipantID;
   cmd.Parameters.Add(new SqlParameter("@GameVersionID", SqlDbType.Int));
   cmd.Parameters["@GameVersionID"].Value = GameVersionID;
   cmd.Parameters.Add(new SqlParameter("@GameID", SqlDbType.Int));
   cmd.Parameters["@GameID"].Value = GameID;
   cmd.Parameters.Add(new SqlParameter("@GameScenarioID", SqlDbType.Int));
   cmd.Parameters["@GameScenarioID"].Value = GameSenarioID;
   cmd.Parameters.Add(new SqlParameter("@Start", SqlDbType.DateTime));
   cmd.Parameters["@Start"].Value = DateTime.Now;
   cmd.Parameters.Add(new SqlParameter("@End", SqlDbType.DateTime));
   cmd.Parameters["@End"].Value = DateTime.Now;
   cmd.Parameters.Add(new SqlParameter("@success", SqlDbType.Bit));
   cmd.Parameters["@success"].Value = success;

   cmd.ExecuteNonQuery();
} 
```

我试图传递的 XML 文件是：

```
<?xml version="1.0" encoding="utf-8" ?>
<GamePlayData>
  <GamePlay>
    <type>add</type>
    <GamePlayID>1</GamePlayID>
    <ParticipantID>1</ParticipantID>
    <GameVersionID>1</GameVersionID>
    <GameID>1</GameID>
    <GameScenarioID>1</GameScenarioID>
    <Start>22/01/2012 23:59:59</Start> 
    <End>22/01/2012 23:59:59</End> 
    <Success>False</Success> 
  </GamePlay>
</GamePlayData> 
```

澄清一下 - 我的问题是我的服务正在创建一个表格行，但是变量自动设置为 0。有人知道为什么这会来自代码吗？

提前致谢。

编辑——按照要求添加的存储过程，谢谢

```
CREATE PROCEDURE [dbo].[addGamePlay]
@ParticipantID int,
@GameVersionID int,
@GameID int,
@GameScenarioID int,
@Start dateTime,
@End dateTime,
@Success varchar(10)
AS
INSERT INTO GamePlay(ParticipantID,GameVersionID,GameID,GameScenarioID,StartDateTime,EndDateTime,Success)
VALUES (@ParticipantID,@GameVersionID,@GameID,@GameScenarioID,@Start,@End,@Success)
return @@identity 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:59:12.483

`newGame`从 XML 文件中对其进行水合后，您似乎没有将其添加到列表中：

```
gameObj.Add(new GamePlay(gameObj)); 
```

我认为应该是：

```
gameObj.Add(newGame); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:00:12.577

在你的 array.Start 方法中应该有这一行：

```
gameObj.Add(new GamePlay(gameObj)); 
```

是 ：

```
gameObj.Add(newGame); 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:59:22.327

我认为您遇到 0 而不是 null 的所有地方都是简单的 int 类型
，这是因为 .Net 中的值类型不能有 null 值，实际上 0 是 int 的 null 值，
因此您可能应该更改`GamePlay`从使用`int`到`int?`OR的类定义`Nullable<int>`

# javascript - 如何触发所有模块都加载了requireJs

> ID：11826769
> 
> 赞同：2
> 
> 时间：2012-08-06T10:45:23.317
> 
> 标签：javascript, require

我正在使用 requirejs 加载 javascript 模块。
有没有办法在加载所有模块时触发事件？
如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:58:06.710

从[API](http://requirejs.org/docs/api.html#jsfiles)中获取，您可以向主`requirejs`函数添加回调：

```
requirejs(['jquery', 'canvas', 'app/sub'], callMe); // the second parameter is the callback

function callMe($, canvas, sub) {
  console.log('everything is loaded');
   // the libraries are now available as parameters in the same sequence as in the array
  console.log('loaded', $, canvas, sub);
} 
```

# javascript - 使用 JavaScript/jquery 刷新文本字段中的值

> ID：11826770
> 
> 赞同：1
> 
> 时间：2012-08-06T10:45:25.173
> 
> 标签：javascript, jquery

我有一个计算产品价格的函数。我不是 JavaScript 开发人员，所以我的知识非常有限。

通过更改文本字段脚本中的值来计算产品的价格。

```
 <input type="text" value="" name="options[22]" class="input-text"
 onfocus="opConfig.reloadPrice()"> 
```

问题是脚本仅在完成以下操作时才会触发：

1.  将值插入文本字段
2.  单击文本字段外的某处
3.  单击返回文本字段

我所需要的只是一个按钮，说刷新，单击它将具有第 2 步和第 2 步的功能。

我不确定我是否正确解释了它，因此如果需要更多信息来解决此问题，请告诉我。

这是该网站的链接。

[http://www.floorstodoors.mldemo.co.uk/spotlight/oak-value-lacquered-3-strip.html](http://www.floorstodoors.mldemo.co.uk/spotlight/oak-value-lacquered-3-strip.html)

我试图修改/添加刷新按钮的字段是输入平方米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:50:58.323

您可以将事件添加到按钮，并通过分配 ID 来检索对输入的引用：

```
<input type="text" value="" name="options[22]" id="price" class="input-text" />
<input type="button" value="Refresh" onclick="reloadPrice();" />

function reloadPrice() {
    var price = "0.00"; // set your price here

    // get a ref to your element and assign value
    var elem = document.getElementById("price");
    elem.value = price;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:49:29.823

我不确定我是否完全理解你，但这是你需要的吗？

```
<input type="text" value="" name="options[22]" class="input-text">
<input type="button" onclick="opConfig.reloadPrice()" value="Refresh" /> 
```

带有单击事件侦听器的按钮，以便在单击刷新按钮`opConfig.reloadPrice()`时执行该方法。

**根据评论编辑：**

我不确定您使用的是什么 JavaScript 库，但是您的代码中有这两行似乎将事件侦听器添加到带有 id 的输入中`qty`。

```
$('qty').observe('focus',function(){
    $('qty').setValue($('qty').getValue().replace(/[^0-9]/g,''));
});     
$('qty').observe('focus',this.getFromQties.bind(this)) 
```

他们正在监听`focus`事件，因此仅在您的输入字段获得焦点时触发。

如果您修改它们以侦听 keyup 事件，我相信它会更好地工作。在不熟悉框架的情况下，我想唯一需要改变的是：

```
$('qty').observe('keyup',function(){
    $('qty').setValue($('qty').getValue().replace(/[^0-9]/g,''));
});     
$('qty').observe('keyup',this.getFromQties.bind(this)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:50:05.533

使用 onchange 或 onblur 代替 onfocus！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T11:15:50.673

```
All I need is a button saying refresh that by clicking it will have functionality 
```

为此，您需要一个带有 onclick 侦听器的按钮，请执行以下操作。

```
<input type="button" value="Refresh" onclick="opConfig.reloadPrice();" />

<input type="text" value="" name="options[22]" class="input-text"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T10:51:15.170

使用onchange。这将在值更改时激活：

```
<input type="text" value="" name="options[22]" class="input-text" onchange="opConfig.reloadPrice()"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T10:51:39.023

首先：这是 JavaScript 而不是 Java - 所以你必须是 javascript 而不是 Java 开发人员。

为了解决您的问题，您可以创建一个带有 onclick 属性的新按钮，并在那里执行您在文本字段中的 onfocus 属性中拥有的函数。或者您可以参加另一个活动 - 例如 onchange 或 onblur ..

```
<input type="text" onchange="..yourfunctionhere..."> 
```

[http://www.w3schools.com/js/js_events.asp](http://www.w3schools.com/js/js_events.asp)

# c# - 调度程序计时器冻结 WPF

> ID：11826772
> 
> 赞同：1
> 
> 时间：2012-08-06T10:45:30.527
> 
> 标签：c#, wpf, user-interface, freeze, dispatchertimer

我正在为 AR Drone（四旋翼无人机）设计一个 3 DOF 控制应用程序。我正在使用多个 PID 控制器来控制无人机 ..这些控制器是通过使用调度程序计时器类实现的 .. 例如在程序开始时我像这样初始化调度程序计时器：

```
 timer_yaw = new DispatcherTimer();
        timer_yaw.Interval = new TimeSpan(0, 0, 0, 0, 45);
        timer_yaw.Tick += new EventHandler(timer_yaw_tick); 
```

只要用户按下 GUI 上的按钮，就会触发该计时器。

```
 timer_yaw.Start(); 
```

在 timer_yaw_tick 我做了一点处理：

```
 private void timer_yaw_tick(object sender, EventArgs e)
      {
            // drone commands and stuff ... basically a PD controller
            DroneData data = droneControl.NavigationData;
            PV_yaw = data.Psi;

            SP_yaw = angle;

            Error_yaw = SP_yaw - PV_yaw;

            if (Error_yaw >= 0)
                yaw_pd = 0.5f;
            else if (Error_yaw < 0)
                yaw_pd = -0.5f;

            Derivative_yaw = (Error_yaw - PreError_yaw) / Dt_yaw;

            Output_yaw = (Kp_yaw * Error_yaw) + (Kd_yaw * Derivative_yaw);

            PreError_yaw = Error_yaw;

            Output_yaw = Math.Round(Output_yaw, 1, MidpointRounding.AwayFromZero);

            Output_yaw = Output_yaw * 1000;

            t_PD_yaw = Convert.ToInt32(Output_yaw);

            // this t_PD_yaw is then sent to the drone via WiFi to make required adjustment

        } 
```

现在在我的应用程序中，大约有 7 个计时器正在运行，它们以不同的时间间隔触发......（计时器持续时间主要以所有计时器的毫秒数为单位）

我面临的问题是我的代码有时运行良好，但有时应用程序完全冻结，即没有任何响应......这真的让我发疯了，我似乎无法弄清楚问题......我使用的是正确的吗工作计时器？？？

非常感谢您的帮助.. Thnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:55:08.553

很可能您正在使用`Dispatcher`与主 UI 线程相关的默认值，并且由于`DispatcherTimer`连接到 Default Dispatcher - 您只是通过大量作业重载了 UI Thread Dispatcher 队列。

`timer_yaw_tick()`一个有用的测试 - 只需通过在开头和 edn 中放置以下内容来测量方法平均执行的时间：

```
// start
var watch = Stopwatch.StartNew();

// end
watch.Stop();

// see value of the watch.ElapsedMilliseconds property 
```

我建议使用`System.Threading.Timer`类进行定期作业调度并将 UI 控件更新分派到 UI 线程使用`Dispatcher.Invoke()`/`Dispatcher.BeginInvoke()`

# ios - Objective C ePub 框架

> ID：11826773
> 
> 赞同：2
> 
> 时间：2012-08-06T10:45:31.707
> 
> 标签：ios, epub

我正在寻找实现一个电子书阅读器应用程序。我找到了一个适合我需要的开源 PDF 查看器。我现在想知道是否有任何开源 ePub 查看器可以利用到应用程序中。

有人知道开源 ePub 查看器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:25:47.083

试试这个[https://github.com/fedefrappi/AePubReader](https://github.com/fedefrappi/AePubReader)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-31T18:21:54.687

为了给六年后发现这个问题的人提供更新的答案，两个允许在 iOS 上解析和显示 epub 的库是：

*   [对开阅读器](https://github.com/FolioReader/FolioReaderKit)和
*   [Readium](https://github.com/readium/r2-testapp-swift)（特别是[`Streamer`](https://github.com/readium/r2-streamer-swift)子项目）

# java - Android 在 onClick AlertDialog 中丢失了引用

> ID：11826776
> 
> 赞同：1
> 
> 时间：2012-08-06T10:46:22.757
> 
> 标签：java, android, reference, onclick, android-alertdialog

我之前已经在对话框中发送数据/发送数据，但这让我对问题所在感到困惑。

当调用 onClick 方法时，mylocalDataRef 的值会丢失。想法是只显示关卡的名称，因为 AlertDialog 的输入仅为 String[]。当用户单击一个级别时，我使用 mylocalDataRef.get(item) 来检索完整对象并将其发送到活动。

调试时mylocalDataRef不为null，即调用get()方法时没有crash，但是看不到它的值（好像是null一样），get()的返回结果始终为null。

任何人都可以阐明正在发生的事情。

ps showLevels() 在 onOptionsItemSelected() 中调用，即当用户单击操作栏上的菜单按钮时。

```
 private void showLevels()
   {
        final ArrayList<Level> mylocalDataRef = levels;
        String[] simpleLevels = new String[mylocalDataRef.size()];
        for(int i = 0; i < mylocalDataRef.size(); i++)
        {
            simpleLevels[i] = mylocalDataRef.get(i).getName();
        }

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Pick a level");
        builder.setItems(mylocalDataRef, new DialogInterface.OnClickListener()
        {
            public void onClick(DialogInterface dialog, int item)
            {
                Intent i = new Intent(getBaseContext(), LevelActivity.class);
                i.setAction(Intent.ACTION_VIEW);
                i.putExtra("result", mylocalDataRef .get(item).getId());
                i.putExtra("levelname", mylocalDataRef .get(item).getName());
                i.putExtra("type", "level");
                startActivity(i);
            }
        });
        AlertDialog alert = builder.create();
        alert.show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:53:11.513

半解决它。

onClick 中 mylocalDataRef 的值不为空，并且包含正确的数据。我怀疑有问题的原因是活动中的 getExtras 没有得到正确的答案。这归结为使用 getStringExtra 而不是 getIntExtra。

为什么调试器看不到 mylocalDataRef 的值超出了我的范围，它使它看起来像 null。所以我将它打印到日志控制台以证明数据在那里。

# java - 在 Eclipse 中扩展 Web 浏览器上下文菜单

> ID：11826777
> 
> 赞同：0
> 
> 时间：2012-08-06T10:46:22.533
> 
> 标签：java, eclipse-plugin

我正在为 Eclipse 编写一个插件，作为我的场景的一部分，我正在生成一个 html 文件。生成文件后，将在 Eclipse 中打开由编辑器托管的 Web 浏览器。我想做的是扩展这个网络浏览器上下文菜单（当我右键单击它时，我想添加另一个称为“复制 URL”的功能，它将复制网页的 URL .

您能否协助实现这一目标？必须指出，这不是eclipse编辑器，可以通过添加扩展来扩展。打开的这个网页是网页而不是eclipse编辑器。它只是由以下内容托管：

IWebBrowser browser = support.createBrowser(IWorkbenchBrowserSupport.AS_EDITOR, null, "RDLEditor", "tooltip");

请协助。

谢谢你，伊多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T00:47:16.940

我过去曾尝试过这样做，但问题是嵌入式浏览器不是 eclipse 框架的一部分，并且 SWT 浏览器对象上没有可用的扩展或 API 来扩展上下文菜单。我能想到的下一个最好的事情是创建自己的嵌入 SWT 浏览器对象的 Eclipse 视图，然后在视图工具栏中创建一个操作，该操作将获取对 Action 类中浏览器对象的引用并将当前 URL 复制到像你正在尝试做的剪贴板。- 邓肯·克雷布斯

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-09-07T17:58:18.207

如果您想要这样做，我可以向 WebBrowserView 工具栏添加一个按钮。我声明了 WebBrowserView 的扩展，然后执行了以下操作。

```
public void createPartControl(Composite parent) {
    super.createPartControl(parent);
    browserViewer = this.viewer;
    Composite toolbarComp = (Composite) browserViewer.getChildren()[0];
    browserToolBar = (ToolBar) toolbarComp.getChildren()[0];
    // add new ToolItems to that 
```

# c# - Visual Studio：Win App 项目中的设计器页面丢失

> ID：11826782
> 
> 赞同：0
> 
> 时间：2012-08-06T10:46:31.830
> 
> 标签：c#, visual-studio-2010

我刚刚将我的表单从 Form1 重命名为更合适的名称，但是这样做时我忘记添加 .cs 作为文件扩展名。我将表单的名称改回 form1.cs，当我编译我的项目时它运行良好。但是，我不再能够使用表单设计器，当我右键单击 Form1.cs 并选择“查看设计器”时，它会打开设计器代码，在此之前它将打开表单编辑页面，我可以在其中移动控制周围等。

实在想不出办法挽回？我真的需要把这个拿回来。

以下是 csproj 代码：-

```
<Compile Include="Form1.cs">
      <SubType>Form</SubType>
    </Compile>
    <Compile Include="Form1.Designer.cs">
      <DependentUpon>Form1.cs</DependentUpon>
    </Compile>
    <Compile Include="Program.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
    <EmbeddedResource Include="Form1.resx">
      <DependentUpon>Form1.cs</DependentUpon>
    </EmbeddedResource>
    <EmbeddedResource Include="Properties\Resources.resx">
      <Generator>ResXFileCodeGenerator</Generator>
      <LastGenOutput>Resources.Designer.cs</LastGenOutput>
      <SubType>Designer</SubType>
    </EmbeddedResource>
    <Compile Include="Properties\Resources.Designer.cs">
      <AutoGen>True</AutoGen>
      <DependentUpon>Resources.resx</DependentUpon>
      <DesignTime>True</DesignTime>
    </Compile>
    <None Include="app.config">
      <SubType>Designer</SubType>
    </None>
    <None Include="packages.config" />
    <None Include="Properties\Settings.settings">
      <Generator>SettingsSingleFileGenerator</Generator>
      <LastGenOutput>Settings.Designer.cs</LastGenOutput>
    </None>
    <Compile Include="Properties\Settings.Designer.cs">
      <AutoGen>True</AutoGen>
      <DependentUpon>Settings.settings</DependentUpon>
      <DesignTimeSharedInput>True</DesignTimeSharedInput>
    </Compile> 
```

# c# - 在c#中将文件从一个路径复制到另一个路径

> ID：11826785
> 
> 赞同：-3
> 
> 时间：2012-08-06T10:46:39.217
> 
> 标签：c#, .net, compact-framework, create-directory

如果 `frompath = "c:\\progfiles\\mobileapp\\es-gl\\a.dll"` 和 `topath = "c:\\progfiles\\mobileapp\\es-gl\\a.dll"`

我想将文件从复制`frompath`到`topath`.
如果`topath`不存在，则必须创建目录和子目录，并且必须将文件 a.dll 从复制`frompath`到`topath`. 我正在使用 c# .net Compact Framework。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:52:59.943

我认为您在 System.IO 命名空间之后。使用 File.Copy 可以提供解决方案。而Directory.Exists/create 可以使目录不存在。

```
var fileName = "tmp.txt";
var from = @"c:\temp\" + fileName;
var to = @"c:\temp\1\";
if (!Directory.Exists(to))
    Directory.CreateDirectory(to);

File.Copy(from, to + fileName); 
```

您也可以使用 FileInfo。（也在 System.IO 命名空间中）

```
var file = new FileInfo(@"c:\temp\tmp.txt");
var to = @"c:\temp\1\";
if (!Directory.Exists(to))
        Directory.CreateDirectory(to);

file.CopyTo(to + file.Name); 
```

# javascript - Node + Express 会话过期？

> ID：11826792
> 
> 赞同：19
> 
> 时间：2012-08-06T10:47:14.750
> 
> 标签：javascript, node.js, session, express

我有一个快递应用程序，我有一个登录表单。我需要会话持续 1 个月我是否将 maxAge 设置为以毫秒为单位的一个月。

我让两台电脑开机并登录了 24 小时，当我回来时，两台电脑都被注销了。

我该如何解决这个问题/实现我想要做的事情？谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2018-01-14T20:42:39.543

@Vadim Baryshev 接受的答案至少在最近的快速会话实现中存在缺陷。当您的应用程序启动时，您创建会话实现并设置最大年龄。至于用expires的答案，不推荐，坚持maxAge。

这意味着所写的 maxAge 示例将在服务器启动一个月后的每个会话中过期，并且将来创建的每个会话都将立即过期。在重新启动服务器之前，不会有任何有效的会话。

无需传递日期对象，只需将毫秒数传递给 maxAge 属性，如下所示：

```
app.use(
  session({
    ...,
    cookie: {
      maxAge: 30 * 24 * 60 * 60 * 1000
    }
  })
); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-06T11:28:24.933

您可以使用 expires 属性而不是 maxAge。它将 Date 对象作为值。此外，设置后检查客户端上的会话 cookie 过期。也许会话由服务器结束（即 memcached 重启）。

**代码示例：**

```
app.use(express.session(
  { secret: "secret", store: new MemoryStore(), expires: new Date(Date.now() + (30 * 86400 * 1000)) 
  })); 
```

但

```
 app.use(express.session(
    { secret: "secret", store: new MemoryStore(), maxAge: Date.now() + (30 * 86400 * 1000) 
    })); 
```

对我也很好。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-05-31T21:09:15.730

`maxAge`表示会话持续多长时间，以毫秒为单位； `expires`表示会话何时到期，即：日期对象

```
var hour = 3600000
req.session.cookie.expires = new Date(Date.now() + hour) 
```

或者

```
var hour = 3600000
req.session.cookie.maxAge = hour 
```

[文档](https://www.npmjs.com/package/express-session/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-09-26T21:04:20.197

文档不建议直接设置 cookie.expires。相反，直接设置 cookie.maxAge。

[快速会话 - cookie.expires](https://github.com/expressjs/session#cookieexpires)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-10-15T21:01:15.917

```
app.use(express.session({
    secret  : 'sdfsdSDFD5sf4rt4egrt4drgsdFSD4e5',
    store   : new storage({ client : conn, cleanup: false }),
    cookie  : { maxAge  : new Date(Date.now() + (60 * 1000 * 30)) }
})); 
```

# java - 将 Java 方法转换为 c 或目标 c

> ID：11826796
> 
> 赞同：0
> 
> 时间：2012-08-06T10:47:26.423
> 
> 标签：java, objective-c, char, int

我的问题是我有java方法我需要转换这个目标我正在尝试这个但它返回零

```
-(char *)intToByteArray:(char *)data{
int iii13=((int)((data[0]>>24),(data[1] >>16) ,(data[2] >>8),(data[3]>>0)));
char* where = (char*)malloc(10);
where[0] = *((char*)(&iii13) + 0);
where[1] = *((char*)(&iii13) + 1);
where[2] = *((char*)(&iii13) + 2);
where[3] = *((char*)(&iii13) + 3);
// 0
// char *www11 = (char *)www13; 
return where;  
}
<=====================Java Code================> is below

public static final byte[] intToByteArray(int value) {
    return new byte[] {
            (byte)(value >>> 24),
            (byte)(value >>> 16),
            (byte)(value >>> 8),
            (byte)value};
} 
```

我想**返回 char**本身，所以任何人都可以建议我正确的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:52:29.770

你的意思是？

```
 // assuming you have a little endian processor.
 long* where = (long*) malloc(4);
 *where = value;
 return (char *) where; 
```

# jquery - 如何使用 AJAX 在网站上显示用户鼠标指针，让浏览网站的每个人都能看到？

> ID：11826797
> 
> 赞同：0
> 
> 时间：2012-08-06T10:47:34.013
> 
> 标签：jquery

好的，我知道这听起来有点令人困惑，所以为了更好地说明这一点：

想象一下，我们现在都在 stackoverflow 上（我们在其中）。有多少人现在也在问一个问题并在我所在的同一个文本区域框中输入？我知道它可以一次显示一个页面上有多少用户，但是是否可以使用 AJAX 来显示用户在页面上移动时鼠标指针的协调性？甚至他们的鼠标指针和用户名都可能浮动到他们可能点击的地方（看看我要去哪里）？

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T16:52:06.193

找到这篇文章是因为我想做同样的事情。答案是肯定的，您可以发送相对于 div 的位置并经常更新它，然后在另一边使用转换更新位置。这并不准确，但目标是让用户感觉更多人同时在页面上。您可以使用这些 div 来显示“用户正在输入”等。对于我的情况，我希望用户知道是否有回复，或者他们应该离开并稍后回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:57:44.587

我不建议做这样的事情。

您需要做的是将鼠标的每一次移动都发送到服务器，服务器会将其与用户的用户名（以及您需要的任何其他详细信息）一起存储在内存中。您需要为每个用户的浏览器打开一个持久连接（请参阅[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)），以便

1.  您不必为每次更新鼠标位置处理建立新连接的开销
2.  您可以将其他用户的鼠标位置的详细信息推送到所有用户的浏览器。

这是一个坏主意的原因是

1.  鼠标指针更新会非常频繁地触发，并且会产生大量流量。
2.  然后，您必须将每个鼠标位置更新发送给当前登录的所有用户
3.  这种持续的活动也会减慢用户的浏览器速度。

Google 的人在 Google Wave 上实现这一点已经遇到了很多麻烦，而且主要是文本更新。除非您有一个非常重要的用例，并且此行为很重要，否则我建议您使用网络密集度较低的用户界面。

# three.js - 如何在 Three.js 中构造一个空心圆柱体

> ID：11826798
> 
> 赞同：6
> 
> 时间：2012-08-06T10:47:36.203
> 
> 标签：three.js, csg

我在 Three.js 中构建空心圆柱体时遇到了困难。

我应该使用 CSG 还是通过将顶点缝合在一起来构建它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-06-29T02:54:38.663

```
var extrudeSettings = {
    amount : 2,
    steps : 1,
    bevelEnabled: false,
    curveSegments: 8
};

var arcShape = new THREE.Shape();
arcShape.absarc(0, 0, 1, 0, Math.PI * 2, 0, false);

var holePath = new THREE.Path();
holePath.absarc(0, 0, 0.8, 0, Math.PI * 2, true);
arcShape.holes.push(holePath);

var geometry = new THREE.ExtrudeGeometry(arcShape, extrudeSettings); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T19:05:31.690

该解决方案使用 ChandlerPrall 的 ThreeCSG.js 项目：http: [//github.com/chandlerprall/ThreeCSG](http://github.com/chandlerprall/ThreeCSG)

（目前，我推荐使用支持材质的实验版本 - uv 分支 - [http://github.com/chandlerprall/ThreeCSG/tree/uvs](http://github.com/chandlerprall/ThreeCSG/tree/uvs)）

这是您需要的代码：

```
// Cylinder constructor parameters:  
// radiusAtTop, radiusAtBottom, height, segmentsAroundRadius, segmentsAlongHeight

var smallCylinderGeom = new THREE.CylinderGeometry( 30, 30, 80, 20, 4 );
var largeCylinderGeom = new THREE.CylinderGeometry( 40, 40, 80, 20, 4 );

var smallCylinderBSP = new ThreeBSP(smallCylinderGeom);
var largeCylinderBSP = new ThreeBSP(largeCylinderGeom);
var intersectionBSP = largeCylinderBSP.subtract(smallCylinderBSP);      

var redMaterial = new THREE.MeshLambertMaterial( { color: 0xff0000 } );
var hollowCylinder = intersectionBSP.toMesh( redMaterial );
scene.add( hollowCylinder ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T12:23:07.810

您不太可能必须将顶点缝合在一起。如果您的圆柱体没有厚度，您可以使用`THREE.CylinderGeometry()`. 如果它*确实*有厚度，您可以使用 CSG。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-10-03T11:01:42.357

使用[SVGloader](https://threejs.org/docs/#examples/loaders/SVGLoader)加载所需半径的圆（作为 SVG）。将几何体设置为[`ExtrudeBufferGeometry`](https://threejs.org/docs/#api/en/geometries/ExtrudeBufferGeometry)并在拉伸设置对象中为其指定所需的高度作为深度。

# wpf - 空数据网格 WPF

> ID：11826799
> 
> 赞同：0
> 
> 时间：2012-08-06T10:47:38.780
> 
> 标签：wpf, datagrid

我有基于类（id、名称、代码、价格）的列表，我试图将该值添加到数据网格中。问题是，数据网格仍然是空的，我的意思是看起来像这样： ![在此处输入图像描述](../Images/306a093dd944368a346312c95ae09d70.png)

**XAML**

```
<DataGrid AutoGenerateColumns="False" Height="275" HorizontalAlignment="Left" Margin="337,51,0,0" Name="dataGridProducts" VerticalAlignment="Top" Width="403" Foreground="#FF803E3E">
    <DataGrid.Columns>
        <DataGridTextColumn Header="ID" Width="30" />
        <DataGridTextColumn Header="Nazwa" Width="200" />
        <DataGridTextColumn Header="Kod" Width="120" />
        <DataGridTextColumn Header="Cena" Width="100" />
    </DataGrid.Columns>
</DataGrid> 
```

**代码背后：**

```
private void categoryListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    SqlConnection SqlConn = new SqlConnect().ConnectToSql();
    using (SqlConn)
    {
        SqlConn.Open();
        SqlCommand fillCategories = new SqlCommand("...", SqlConn);
        SqlDataReader rdr1;
        rdr1 = fillCategories.ExecuteReader();
        while (rdr1.Read())
        {
            Products p = new Products(rdr1.GetInt32(rdr1.GetOrdinal("ID")), rdr1.GetString(rdr1.GetOrdinal("ProductName")), rdr1.GetString(rdr1.GetOrdinal("Barcode")), rdr1.GetString(rdr1.GetOrdinal("Price")));
            completeProductList.Add(p);
        }
    }
    dataGridProducts.ItemsSource = completeProductList;
} 
```

有什么解决方法可以解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:02:24.090

您必须将列绑定到数据网格项目源类中的值

示例：如果您的 datagrid.ItemsSource 是一个包含 3 列的表：

```
 - ID
    - Name
    - Address 
```

您必须将数据网格的每一列绑定到表的一列：

```
 ...
<DataGridTextColumn Header="ID" Binding="{Binding Path=ID}" Width="Auto" />
<DataGridTextColumn Header="Name" Binding="{Binding Path=Name}" Width="Auto" />
<DataGridTextColumn Header="Address" Binding="{Binding Path=Address}" Width="Auto" />
... 
```

然后你会看到表格的边界值。

# magento - Magento 1.7 CSV 更新产品类别

> ID：11826802
> 
> 赞同：1
> 
> 时间：2012-08-06T10:48:00.730
> 
> 标签：magento, csv

我有很多产品需要分配到新的类别。产品存在，类别存在，但由于某种原因，进口没有做某事。

我正在使用使用以下设置的数据流配置文件：

[![](../Images/47d4d2f7df78f41fa62a1c08ea609188.png)](https://i.stack.imgur.com/zqyTz.png)
[（来源：[i.imm.io](http://i.imm.io/zsE2.png)）]

我的 CSV 的前两行是：

```
sku,store,category_ids
TT010,default,Face/Acne 
```

为了将产品分配到另一个类别，第一行应该具有什么值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:34:35.083

最后我不得不覆盖 core/mage/catalog/model/convert/adapter/product.php 文件。

我在之后添加了以下代码

```
if (isset($importData['category_ids'])) {
    $product->setCategoryIds($importData['category_ids']);
} 
```

* * *

```
//search for a category by name.
if(isset($importData['category']))
{
  $cat_ids = array();
  $cats = Mage::getModel('catalog/category')
      ->getCollection()
      ->addAttributeToSelect('name')
      ->load();
  foreach($cats as $cat)
  {
    if($cat->getName() == end(explode('/',$importData['category'])))
    {
      $cat_ids[] = $cat->getId();
    }
  }
  $product->setCategoryIds($cat_ids);
} 
```

这是magento 1.7

# blueprint-osgi - 如何导入osgi蓝图xml

> ID：11826806
> 
> 赞同：7
> 
> 时间：2012-08-06T10:48:11.040
> 
> 标签：blueprint-osgi

我正在尝试将 OSGI 蓝图 XML 文件导入另一个 OSGi 蓝图 XML 文件。

例如：blueprint1.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<blueprint ....>
    <bean id="myBean1" class="com.company.Class1"/>
    <bean id="myBean2" class="com.company.Class2"/>
</blueprint>
</xml> 
```

蓝图2.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<blueprint ....>
    <!-- DOES NOT WORK -->
    <import resource="blueprint1.xml" />
</blueprint> 
```

春天的`<import>`作品，而不是蓝图。

有人知道在 OSGi 蓝图 XML 文件中执行此操作的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T07:05:50.390

显然，蓝图中目前无法使用类似 Spring 的导入。

但是，如果这些文件在同一个 OSGi 包中，那么它们就在同一个上下文中，并且可以从其他蓝图文件中使用。

另外，请参见此处： http: [//fusesource.com/forums/message.jspa?messageID=15091#15091](http://fusesource.com/forums/message.jspa?messageID=15091#15091)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T12:06:38.810

如果您使用的是 Gemini Blueprint（以前称为 Spring DM），您可以简单地告诉它加载这两个文件，并且基本上将它们视为一个大文件：

> 在没有 Spring-Context 标头的情况下，扩展程序期望 META-INF/spring 文件夹中的每个“.xml”文件都是有效的 Spring 配置文件 [...]。

它还`/OSGI-INF`以相同的方式处理任何 xml 文件。

# android - 应用程序停止

> ID：11826807
> 
> 赞同：0
> 
> 时间：2012-08-06T10:48:17.230
> 
> 标签：android

我收到一个错误，例如您的应用程序已意外停止。我在这里附上了我的logcat。请帮我。

```
08-06 10:18:00.226: E/AndroidRuntime(868): FATAL EXCEPTION: main
08-06 10:18:00.226: E/AndroidRuntime(868): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.myoverlays1/com.example.myoverlays1.MyOverlays}: java.lang.ClassNotFoundException: com.example.myoverlays1.MyOverlays
08-06 10:18:00.226: E/AndroidRuntime(868):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
08-06 10:18:00.226: E/AndroidRuntime(868):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-06 10:18:00.226: E/AndroidRuntime(868):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-06 10:18:00.226: E/AndroidRuntime(868):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-06 10:18:00.226: E/AndroidRuntime(868):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-06 10:18:00.226: E/AndroidRuntime(868):  at android.os.Looper.loop(Looper.java:137)
08-06 10:18:00.226: E/AndroidRuntime(868):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-06 10:18:00.226: E/AndroidRuntime(868):  at java.lang.reflect.Method.invokeNative(Native Method)
08-06 10:18:00.226: E/AndroidRuntime(868):  at java.lang.reflect.Method.invoke(Method.java:511)
08-06 10:18:00.226: E/AndroidRuntime(868):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-06 10:18:00.226: E/AndroidRuntime(868):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-06 10:18:00.226: E/AndroidRuntime(868):  at dalvik.system.NativeStart.main(Native Method)
08-06 10:18:00.226: E/AndroidRuntime(868): Caused by: java.lang.ClassNotFoundException: com.example.myoverlays1.MyOverlays
08-06 10:18:00.226: E/AndroidRuntime(868):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
08-06 10:18:00.226: E/AndroidRuntime(868):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
08-06 10:18:00.226: E/AndroidRuntime(868):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
08-06 10:18:00.226: E/AndroidRuntime(868):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
08-06 10:18:00.226: E/AndroidRuntime(868):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
08-06 10:18:00.226: E/AndroidRuntime(868):  ... 11 more
08-06 10:18:01.996: I/Process(868): Sending signal. PID: 868 SIG: 9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:56:10.233

如果是您自己的类文件意味着，您是否在文件中`MyOverlays`正确声明了。如下图——`MyOverlays``AndroidManifest.xml`

```
<activity android:name=".MyOverlays"></activity> 
```

否则，如果它是来自任何外部`.jar`文件的类文件，意味着你是否正确导入它，

*   `libs`在您的项目中创建一个文件夹。并且，在那里复制所需的`.jar`文件。

*   使用（项目->属性-> java构建路径->添加jar/添加外部jar->选择jar文件）正确导入它

希望这对您有所帮助。

**编辑**

我希望您`MyOverlays`是`MapView`为此工作的类文件，您必须在清单文件中将此类声明为-

```
<activity android:name="com.example.myoverlays1.MyOverlays"></activity> 
```

并且，检查您的地图库是否声明

```
<uses-library android:name="com.google.android.maps" /> 
```

在你的`<application>`标签里面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:50:30.997

您使用提供参考的外部库，但您在该项目的属性中设置了刻度以解决该错误

或者你在 xml 中使用 myoverlay 没有得到参考

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:59:35.947

你有加`com.example.myoverlays1.MyOverlays`在你的`AndroidManifest.xml`吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T10:59:49.237

请检查 Android Manfiest.xml 中声明的所有活动。看起来 MyOverlays 类未在 AndroidManfiest.xml 中声明

# php - 为什么“print”和“echo”函数不需要括号

> ID：11826813
> 
> 赞同：4
> 
> 时间：2012-08-06T10:48:48.647
> 
> 标签：php, function, printing, echo, brackets

就是想。

谢谢。

我只是把它放在这里，这样我就可以达到 30 个字符，忽略这一点 :)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T10:50:17.760

因为它们是 PHP 结构（也称为构造）而不是函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T18:34:04.717

*echo*实际上不是一个函数，它是一种语言结构，因此您不需要使用括号。*echo*与其他一些语言结构不同，它的行为不像函数，因此它不能总是在函数的上下文中使用。

因为*echo*的行为不像函数，所以下面的代码是无效的。

```
($some_var) ? echo 'true' : echo 'false'; 
```

但是，以下示例将起作用：

```
($some_var) ? print 'true' : print 'false'; 
```

*print*也是一个构造，但它的行为类似于函数，因此可以在这种情况下使用它。

# php - 从 php 中的嵌套标签替换文本

> ID：11826815
> 
> 赞同：0
> 
> 时间：2012-08-06T10:48:56.747
> 
> 标签：php, regex, preg-replace

我需要替换一些文本。为此，我需要一个正则表达式模式。这里的文字是：

```
<div CLASS="CHAP_BM_CON">Outer <div CLASS="CHAP_BM_FIRST">DIV inner</div> 
Outer ends here</div><div CLASS="CHAP_BM_FIRST">Separate DIV Even inner</div> 
```

在上面的段落中，我们可以看到一个嵌套的 DIV。我需要 reg exp 模式来满足以下输出，如下所示：

```
<div CLASS="CHAP_BM_CON">Outer <div CLASS="CHAP_BM_FIRST">DIV inner <!--CHAP_BM_FIRST--></div> 
Outer ends here<!--CHAP_BM_CON--></div><div CLASS="CHAP_BM_FIRST">Separate DIV Even     inner<!--CHAP_BM_FIRST--></div> 
```

我们如何为这种情况编写正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:59:18.270

我试过下面的代码..

```
<?php
function parseTagsRecursive($input)
{

 $regex = '/<div tagname="(.*?)" (.*?)>(.*?)<\/div>/si';    
if (is_array($input)) {

    $input = '<div tagname='.$input[1].' '.$input[2].'>'.$input[3].'<!--'.$input[1].'--></div>';

}   

return preg_replace_callback($regex, 'parseTagsRecursive', $input);

}

$content = '<div CLASS="CHAP_BM_CON">Outer <div CLASS="CHAP_BM_FIRST">DIV inner</div> 
Outer ends here</div><div CLASS="CHAP_BM_FIRST">Separate DIV Even inner</div';

echo $ver = parseTagsRecursive($content); 
```

# objective-c - 添加到子类 ttphotoviewcontroller 工具栏的按钮上的无法识别的选择器发送到实例错误

> ID：11826817
> 
> 赞同：0
> 
> 时间：2012-08-06T10:49:05.533
> 
> 标签：objective-c, ios, xcode, three20, xcode4.3

我有子类`TTphotoviewcontroller`并添加了一个用于将图像保存到相机胶卷的按钮。工具栏上的所有其他按钮都可以正常工作（上一个、下一个和播放），除了我通过在子类文件中覆盖创建的那个。**`unrecognized selector sent to instance`**当我单击按钮时，我收到了可怕的“ ”错误。

我的子类`TTphotoviewcontroller`位于导航控制器内，而导航控制器又位于`tabbarcontroller`.

顶部导航控制器有一个带有应用内购买按钮的视图控制器。购买后，用户进入`TTphotoviewcontroller`导航控制器内包含子类的壁纸部分（希望这是有道理的）。

我检查了所有的链接器设置。我使用了一些可以在[这里找到的代码](http://sol3.typepad.com/tagalong_developer_journa/2009/12/adding-savetoalbum-to-the-ttphotoviewcontroller.html)

标签栏 - 导航控制器 - 应用内购买视图控制器 - 导航控制器 - 子类 photoviewcontroller -`clickActionItem`按钮的选择器方法

我像这样创建按钮：

```
 _clickActionItem = [[UIBarButtonItem alloc] 
                          initWithBarButtonSystemItem:UIBarButtonSystemItemAction 
                          target:self action:@selector(clickActionItem)]; 
```

并以此开火：

```
 - (void) clickActionItem: (id)sender
 {
    NSURL *aUrl  = [NSURL URLWithString:[_centerPhoto URLForVersion:TTPhotoVersionLarge]];
                NSData   *data = [NSData dataWithContentsOfURL:aUrl];
                UIImage  *img  = [[UIImage alloc] initWithData:data];

                NSLog(@"photo:class %@", [img class]);

                UIImageWriteToSavedPhotosAlbum(img, nil, nil, nil);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:32:51.797

我认为您犯了一个简单的错误，即您忘记在@selector 方法之后给出'：'。

```
_clickActionItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:
                    UIBarButtonSystemItemAction
 target:self action:@selector(clickActionItem:)]; 
```

我的建议是，如果你在调用它之前没有创建选择器方法，那么总是复制和粘贴方法的完整名称，这样可以减少这种类型的错误。

# c# - 如何在 DataGridView 中显示独立按钮？

> ID：11826818
> 
> 赞同：0
> 
> 时间：2012-08-06T10:49:14.937
> 
> 标签：c#, button, datagrid

我有一个`DataGridView`从数据库加载的元素。
问题是我想在某些行中显示一个按钮（一些元素需要这个按钮，而另一些不需要），我不知道怎么做。
我现在唯一拥有的是这段代码，用于显示“删除”按钮，但对于每一行。

```
DataGridViewButtonColumn btnDelete = new DataGridViewButtonColumn();
dataGridView.Columns.Add(btnDelete);
btnDelete.Text = "Delete";
btnDelete.UseColumnTextForButtonValue = true; 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:58:18.423

您可以通过将 DataGridViewButtonCells 插入到需要按钮的单元格中来做到这一点。

例如：

```
var cell = new DataGridViewButtonCell();
cell.Value = "Button text"
cell.Style.Alignment = DataGridViewContentAlignment.MiddleCenter;
dataGrid.Rows[rowIndex].Cells[columnIndex] = cell; 
```

该列不必是按钮列，例如，它可以是文本框列。

或者你可以换一种方式，制作一个按钮列，然后：

```
for (int i = 0; i < dataGrid.Rows.Count; i++)
    if (i % 2 == 1) // whatever the condition is
        dataGrid.Rows[i].Cells[COLUMN_WITH_BUTTONS] = new DataGridViewTextBoxCell(); 
```

您还可以创建一个自定义数据网格列和单元格类型（从最接近您需要的那些继承），它有一个标志（您添加）来控制单元格中显示的内容。

您不需要立即对整个网格执行此操作 - 您可以随时更改网格。例如，您可以创建一个将单元格设置为适当类型的函数，然后在发生某些事情时调用它（在事件处理程序等中）。

# javascript - javascript 正在关闭我的 HTML 标签

> ID：11826821
> 
> 赞同：0
> 
> 时间：2012-08-06T10:49:26.107
> 
> 标签：javascript, html, dom

我正在使用 javascript 将表格添加到页面中。

```
$("#tablediv").append("<table border = '1'><tbody><tr><td width='100px'><b>Result</b></td><td width='100px'><b>Binding</b></td><td width='744px'><b>Value</b></td></tr>"); 
```

问题是它正在运行`</tbody>`并`</table>`在最后添加。

我怎样才能阻止这种情况发生？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:52:46.603

您是否尝试在创建表后向表中**添加新元素？**

*标识*您的表，然后附加到该表。

```
$("#tablediv")
  .append("<table id='mytable' border = '1'><tbody><tr><td width='100px'><b>Result</b></td><td width='100px'><b>Binding</b></td><td width='744px'><b>Value</b></td></tr></table>");​​​

$("#mytable")
  .append("<tr><td>Bla</td><td>Foo</td><td>Bar</td></tr>"); 
```

**每次**要向表中**添加新行时**调用*第二个*jQuery 函数。

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:56:26.790

我的印象是你想要这个，所以你可以循环输出你的结果？

```
var table = "<table border = '1'><tbody><tr><td width='100px'><b>Result</b></td><td width='100px'><b>Binding</b></td><td width='744px'><b>Value</b></td></tr>";
// loop through your data here
table += "</tbody></table>";

 document.getElementById("tablediv").innerHTML += table; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T10:57:28.283

创建 var，将你的东西附加到它，然后当你准备好调用 .append(html)

```
var html = "";
html += "<table border = '1'><tbody><tr><td width='100px'><b>Result</b></td><td width='100px'><b>Binding</b></td><td width='744px'><b>Value</b></td></tr>"
$("#tablediv").append(html); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T10:57:45.243

你不能。您正在操作 DOM，而不是 HTML 流。

jQuery 允许您使用 HTML 语法来描述要创建的 DOM 片段（然后您可以插入或以其他方式操作），但这只是为了方便。如果 HTML 不是有效的片段，它将被纠正错误。

如果你想处理 HTML 片段，你必须以字符串的形式进行，而不是 jQuery 对象****

# vertica - 在 asp.net 中使用 odbc 连接到 vertica 数据库并返回一个数据集

> ID：11826824
> 
> 赞同：0
> 
> 时间：2012-08-06T10:49:42.330
> 
> 标签：vertica

我已经在终端上使用 insert 命令在 vertica 数据库中插入了一些行。它显示当我使用 select 命令读取记录时。但是当我使用 ODBC 连接连接到数据库时我无法看到记录，我也能够在重新启动时找到该行vertica。请帮我解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T18:41:33.990

你是`COMMIT;`在插入行之后吗？这是一件简单的事情，但我过去曾多次忽视自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T00:25:04.560

在 Bobby W 的回应之外进行详细说明。
当您执行插入时，它将向您的当前会话显示数据。这允许用户执行操作并使用“临时”数据，而不会影响/破坏其他人正在做的事情。它是基于会话的数据。这就是为什么您可以插入并查看数据，但是从第二个来源连接时，无法看到它。

要将数据“提交”到数据库，您需要发出`COMMIT;`Bobby W 提到的语句。

未能发出`COMMIT;`是我也多次忽略的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T13:03:56.033

默认情况下，Vertica ISOLATION 级别为 READ COMMITTED 模式，这意味着其他会话只读已提交的数据。如果你已经插入但没有提交，在这个级别，其他会话无法读取你插入的数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:44:04.987

为了澄清，您可以在重新启动后看到这些行吗？您是否以来自 ODBC 和 vsql 的同一用户身份连接到数据库？

# c# - 图片框列表的事件处理程序

> ID：11826828
> 
> 赞同：0
> 
> 时间：2012-08-06T10:50:02.643
> 
> 标签：c#, .net, event-handling

我有一个在运行时创建的图片框列表。如何为列表中的每个图片框定义相同的事件处理程序（例如，相同的 mousemove 事件）？

我在 Visual Studio .net 4 中使用 C#

感谢您的每一个帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:53:05.677

简单又怎样

```
PictureBox pb = new PictureBox();
pb.MouseMove += new EventHandler(MyHandler_Click); 
```

还有你的处理程序：

```
private void MyHandler_Click(object sender, System.Windows.Forms.MouseEventArgs e)
{
   //your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:08:24.257

[http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox_events.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox_events.aspx) PictureBox 支持的所有事件都可以在这里找到

**例如**

```
pictureBox[0].MouseMove += new System.Windows.Forms.MouseEventHandler(pictureBox_MouseMove);

protected void pictureBox_MouseMove(object sender, System.Windows.Forms.MouseEventArgs e)
{
//...
} 
```

# php - sql select - 从 id xxx 获取 10 条记录

> ID：11826838
> 
> 赞同：1
> 
> 时间：2012-08-06T10:50:31.770
> 
> 标签：php, mysql, sql

我有`database`行`ordered``id`

我想`10`从 id 开始选择它们`n`

使用 LIMIT 可以轻松实现 10 条下一条记录

我对那`id`件事有意见。我是否必须选择行 WHERE `id`is `n`，获取其位置然后使用 OFFSET？或者有什么更有效的吗？

查询会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:52:41.690

你试过`WHERE id >= n`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:55:44.577

试试这个：

```
SELECT * 
FROM table_name 
LIMIT 10 OFFSET n; 
```

或者如果你有`id`：

```
SELECT * 
FROM table_name 
WHERE id >= n
LIMIT 10; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T10:56:03.107

用于`rownum`选择 10 条记录`id >= n`：

```
select * from table where id >= n and rownum <=10; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T11:05:40.040

尝试：

```
select *
from table
where id >= n
order by id asc
limit 10 
```

id >= n => 从 n 中选择

按 id asc 排序 => 确保正确排序

限制 10 => 前 10

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T11:17:28.050

采用`LIMIT`

```
SELECT * 
FROM table_name 
WHERE id >= n
LIMIT 10 
```

# jquery - jQuery val() 未设置

> ID：11826839
> 
> 赞同：0
> 
> 时间：2012-08-06T10:50:32.250
> 
> 标签：jquery

```
 <div ... ondblclick="setEmail()">
    <script>
    function setEmail(){
      $('#email').val('tux');
    }
    </script>
    <input type="text" id="email"/> 
```

这不会设置元素“email”的值。问题可能是什么？

编辑

我编辑了问题，我不是在尝试更改 div 的文本，而是在尝试更改输入的值。

有一个json，如果我打开循环，这条线就可以了，

```
function setEmail(){
    $.each(obj,function(){
    if(){
    $('#email').val('tux');
    }
    });
} 
```

上面的代码有效，但我不应该循环，这是不必要的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:11:02.650

Give your div an ID and do the following:

```
<script type="text/javascript">

    function setEmail() {
        $('#email').val('tux');
    }

    $(document).ready(function () {
        $('#MyDivId').click(function () {
            setEmail();
        });
    });
</script> 
```

this set the value of the input for me

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:54:02.780

div 元素没有 val，只有 html。val 仅可用于 INPUT 元素

```
$('#email').html('tux'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:59:10.967

您的事件绑定是错误的：

你应该使用 onDblClick 而不是 ondblclick

# c# - 如何跳过流中的字节

> ID：11826842
> 
> 赞同：11
> 
> 时间：2012-08-06T10:50:41.130
> 
> 标签：c#, io, stream

如何最有效地跳过任何字节数[`Stream`](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)？

如果可能的话，我想[`EndOfStreamException`](http://msdn.microsoft.com/en-us/library/system.io.endofstreamexception.aspx)在试图跳过流的末尾时得到或抛出一个。

* * *

我正在`Reader`为 ISO 9660 原始数据类型编写自定义流，这可能涉及大量跳过可搜索和不可搜索的流，包括少量 (4) 和大量 (2048) 字节。因此，我想实现一种`Skip(int count)`比读取和丢弃跳过的字节更有效的方法。

例如，在一个[可](http://msdn.microsoft.com/en-us/library/system.io.stream.canseek.aspx)搜索的流中，我可能会这样做`stream.Position += 4`，但这不会`EndOfStreamException`在搜索流的末尾时抛出一个，而且我不知道如何在不阅读内容的情况下进行测试。对于不可搜索的流，设置`Position`甚至不是一个选项，但是读取并随后丢弃大量字节并分配未使用的字节数组似乎非常浪费。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T10:59:37.680

而不是`stream.Position += 4`您可以使用`stream.Seek(4, SeekOrigin.Current);`它来节省您对 Win32 API 的一次调用。

如果支持，您可以随时检查`Length`流的属性。如果不支持它，除了尝试从流中读取之外别无他法。实际上在长度未知的流上，搜索本质上是阅读。

如果`CanSeek`为假，则无法阅读`Length`，反之亦然。

关于读取过程中浪费的内存，您不必读取要跳过的字节数。您可以分配固定大小的内存（大或小）并将其用于您想要的任何长度。如果您需要跳过超过该大小，您只需读取`x / size`块并读取剩余`x % size`字节。

# javascript - html形式的下拉列表

> ID：11826843
> 
> 赞同：0
> 
> 时间：2012-08-06T10:50:46.610
> 
> 标签：javascript, jquery, ajax

考虑一个 html 表单中有两个下拉列表。

第一个名为“国家”的列表包含国家/地区列表。

第二个列表是选择国家时应动态填充的“城市”。

我应该如何动态地实现它？

在 javascript 或 jquery 或 ajax 中实现这一点的最简单和最简单的方法是什么？

请帮助提供示例代码和想法，以便我能够实现它或一些外部链接或教程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:59:19.753

1.  在您的国家/地区下拉列表中应用 onchange 事件 (http://api.jquery.com/change/)
2.  向服务器发送ajax请求并获取城市列表（http://api.jquery.com/jQuery.ajax/）
3.  ajax 请求成功后，填充第二个列表“城市”。请记住从城市列表中删除任何已居住的城市。
4.  将您从服务器获得的所有城市列表存储到一个数组中。下次用户选择同一个国家时，使用数组中存储的数据显示城市列表。这样您就不必为同一个国家/地区发出多个 ajax 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:55:29.287

使用jQuery，使用第一个下拉的change事件，然后更新第二个，有点像这样

```
$("#country").change(function(){
    //do an ajax request, and update #cities
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:55:42.563

你可以用纯 JavaScript 做到这一点。在第一个选择中实现 onchange 属性：

```
<select id="countires" onchange="makeCitiySelect( );"> .. </select 
```

在 makeCitiySelect( ) 函数中，您可以使用 document.getElementsById( "countries" ).value 读取此选择的值，然后发送使用该国家/地区的城市创建新的选择框。

如果您所在国家/地区的城市在服务器上的数据库中，您必须发送 ajax 请求并获取城市作为响应。

但可以肯定的是，使用 jQuery 你可以更好地解决这个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T10:55:54.513

1.- 创建 2 个选择框 2.- 在第一个选择上创建一个**onchange** js 或 jquery 函数，因此每次选择其他选择时都会更改 3.- 在**onchange**函数内部对具有所选选项的相应内容。4.- 检索数据并用相应的数据重建第二个选择框。

# jquery - Ajax 调用子域到域

> ID：11826848
> 
> 赞同：0
> 
> 时间：2012-08-06T10:50:58.780
> 
> 标签：jquery, ajax, json, cakephp-1.3, jsonp

我在使用 jquery 的 ajax 跨脚本请求时遇到了一些麻烦。我在一个名为 test.example.com 的子域中，我正在对 www.example.com/action 进行 ajax 调用，如下所示：

```
$.ajax({ 
url:"http://www.example.com/action",
type:"post", 
crossDomain:true,
dataType:"jsonp",
jsonp:"cross_domain_action",
xhrFields:{withCredentials:true},
success:function(data){}
}); 
```

问题是我不知道如何在 www.example.com/action 中测试请求是否是 ajax 请求。

我正在使用 CakePHP 1.3，并且有一个带有该功能的组件调用“request_handler.php”

```
function isAjax() {
    return env('HTTP_X_REQUESTED_WITH') === "XMLHttpRequest";
} 
```

我发现请求中没有那个 HTTP 标头。

```
X-Requested-With    XMLHttpRequest 
```

如果您有任何想法:) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:12:35.267

您无需手动检查标题。Cake 1.3 在控制器的`$this->params`属性中提供了这些信息：

```
$this->params['isAjax'] 
```

如果当前请求是 ajax 调用，则存储 1，否则存储 0。[在这里](http://book.cakephp.org/1.3/en/view/967/isAjax)检查。.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:05:02.797

好吧，这正是您用来测试它是否是和 ajax 请求的方法。我通常使用：

```
if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) 
&& strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') 
{//this is an ajax request} 
```

# jquery - 带有 jquery 的 div 弹出窗口

> ID：11826852
> 
> 赞同：2
> 
> 时间：2012-08-06T10:51:09.023
> 
> 标签：jquery, html, popup

我总共有 4 个 div 标签。对于每个我都添加了一个类属性作为项目，因为我为每个 div 大约有 2 个 span 标签。我需要在点击时弹出一个弹出窗口。在那个弹出窗口中，我需要获取我点击的 div 的消息

网址：http: [//jsfiddle.net/varunms/a9tZx/](http://jsfiddle.net/varunms/a9tZx/)

例如：

```
<div class="item">
    <span class="postname"> This is 1 post </span>
    <span class="decs" >1</span>
</div>

<div class="item">
    <span class="postname"> This is 2 post </span>
    <span class="decs" >2</span>
</div> 
```

如果我单击具有***This is post 2***的 div，我需要使用该消息获取弹出消息

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T10:56:53.280

在 jQuery UI 库中使用[jQuery.dialog() ：](http://jqueryui.com/demos/dialog/#modal)

```
$(".item").each(function() {
    $(this).bind("click", function() {
        $(this).dialog({
            modal: true
        });
    });
});​​​​​​​​​​​​​​​​​​​ 
```

快速演示：[jsfiddle 演示](http://jsfiddle.net/u9cP3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:46:28.217

在这里，我已经为上述查询完成了完整的 bins。您可以查看演示链接，如下所示：

**演示：** [http ://codebins.com/bin/4ldqp8s](http://codebins.com/bin/4ldqp8s)

**HTML**

```
<div id="panel">
  <div class="item">
    <div id="popupnow" style="display:none;background-color:white;width:auto">
      <span class="postname">
        This is 1 post 
      </span>
      <span class="decs" >
        1
      </span>
    </div>
    <span class="postname">
      This is 1 post 
    </span>
    <span class="decs" >
      1
    </span>
  </div>

  <div class="item">
    <div id="popupnow" style="display:none;background-color:white;width:auto">
      <span class="postname">
        This is 2 post 
      </span>
      <span class="decs" >
        2
      </span>
    </div>
    <span class="postname">
      This is 2 post 
    </span>
    <span class="decs" >
      2
    </span>
  </div>

  <div class="item">
    <div id="popupnow" style="display:none;background-color:white;width:auto">
      <span class="postname">
        This is 3 post 
      </span>
      <span class="decs" >
        3
      </span>
    </div>
    <span class="postname">
      This is 3 post 
    </span>
    <span class="decs" >
      3
    </span>
  </div>

  <div class="item">
    <div id="popupnow" style="display:none;background-color:white;width:auto">
      <span class="postname">
        This is 4 post 
      </span>
      <span class="decs" >
        4
      </span>
    </div>
    <span class="postname">
      This is 4 post 
    </span>
    <span class="decs" >
      4
    </span>
  </div>

  <div class="item">
    <span class="postname">
      This is 5 post 
    </span>
    <span class="decs" >
      5
    </span>
  </div>

  <!-- Dialog Box -->
  <div id="boxes">

    <div id="dialog" class="window">
      <div id="title">
        My Dialogue
      </div>
      <div id="msg">
      </div>
      <a href="#"class="close"/>
      Close it
    </a>
  </div>
</div>

<!-- Mask to cover the whole screen -->
<div id="mask">
</div> 
```

**CSS：**

```
#mask{
  position:absolute;
  left:0;
  top:0;
  z-index:9000;
  background-color:#000;
  opacity:0.5;
  display:none;
}
a{
  color:#333;
  text-decoration:none
}
a:hover{
  color:#ccc;
  text-decoration:none
}
#boxes #dialog{
  padding:0px;
  width:375px;
  height:100px;
  padding:10px;
  bordercolor:1px solid #445cd88;
  background-color:#44bb55;
  display:none;
  position:absolute;
  z-index:99999;
  border-radius: 1.2em;
  -moz-box-shadow:    5px 5px 2px 2px #44fc65;
  -webkit-box-shadow: 5px 5px 2px 2px #44fc65;
  box-shadow:         5px 5px 2px 2px #44fc65;
}
#dialog #title{
  background:#f8a233;
  bordercolor:1px solid #445cd88;
  border-radius: 1.5em;
  margin:0px;
  padding:5px;
}
#dialog #msg{
  margin-left:20px;
  padding:5px;
  font-size:14px;
}
#dialog .close{
  display:block;
  float:right;
  background:#afa1f5;
  bordercolor:1px solid #445cd88;
  border-radius: 1.2em;
  width:100px;
  text-align:center;
  font-size:13px;

}
#dialog .close:hover{
  background:#af55d9;
  bordercolor:1px solid #445cd88;

}
.item {
  background:#0088CC;
  color:#fff;
  margin: 10px;
  border:1px solid #3355a9;
  border-radius: 1.2em;
  padding:10px;
  -moz-box-shadow:    5px 5px 2px 2px #999;
  -webkit-box-shadow: 5px 5px 2px 2px #999;
  box-shadow:         5px 5px 2px 2px #999;
  text-shadow:0 1px 1px #194B7E;
}
div.item:hover {
  cursor:pointer;
  -moz-box-shadow:    inset 3px 9px 32px #afdaf0;
  -webkit-box-shadow:inset 3px 9px 32px #afdaf0;
  box-shadow:         inset 3px 9px 32px #afdaf0;
}
div.item:hover .postname,div.item:hover .decs{
  text-decoration:underline;
} 
```

**查询：**

```
$(function() {
    $(".item").click(function(e) {
        //Cancel the link behavior
        e.preventDefault();
        //Get Dialog Object
        var $dialog = $("#dialog");
        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();
        //Set heigth and width to mask to fill up the whole screen
        $('#mask').css({
            'width': maskWidth,
            'height': maskHeight
        });
        //transition effect     
        $('#mask').fadeIn(1000);
        $('#mask').fadeTo("slow", 0.8);
        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();
        //Set the popup window to center
        $dialog.css('top', winH / 2 - $dialog.height() / 2);
        $dialog.css('left', winW / 2 - $dialog.width() / 2);
        //Set Message
        var MSG = $(this).find(".postname").text().trim() + " " + $(this).find(".decs").text().trim()
        $dialog.find("#msg").html(MSG);
        //transition effect
        $dialog.fadeIn(2000);

    });
    //if close button is clicked
    $('.window .close').click(function(e) {
        //Cancel the link behavior
        e.preventDefault();
        $('#mask').hide();
        $('.window').hide();
    });
    //if mask is clicked
    $('#mask').click(function() {
        $(this).hide();
        $('.window').hide();
    });

}); 
```

**演示：** [http ://codebins.com/bin/4ldqp8s](http://codebins.com/bin/4ldqp8s)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:56:01.760

你会想要这样的东西：

```
$('.item').click(function() {
    var message = $('.postname', $(this)).html();
    alert(message);
}); 
```

查看[fork fiddle](http://jsfiddle.net/9XKep/3/)的演示。

更新：我已更新小提琴以使用 jQuery UI 对话框。您需要将正确的 jQuery-UI 样式表添加到您的代码中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T11:06:27.330

您需要将单击事件侦听器添加到项目类：

```
$('.item').on('click', function() {
}); 
```

当这个点击发生时，你需要在被点击元素的上下文中找到类 postname 的元素：

```
$('.postname', this).text(); 
```

然后创建一个弹出对话框，创建一个新的 div（或者如果需要，使用 postname ）并设置必要的文本并调用对话框创建函数。

```
$('<div>').text($('.postname', this).text()).dialog(); 
```

这是完整的样本（所有这些一起）：http: [//jsfiddle.net/a9tZx/7/](http://jsfiddle.net/a9tZx/7/)

jQuery UI css 文件现在似乎无法在 fiddle 上运行，因此您需要将必要的文件添加到您的项目中以使其看起来更漂亮。

# caching - 为 OSGi 环境中提供的静态资源设置自定义响应标头

> ID：11826853
> 
> 赞同：3
> 
> 时间：2012-08-06T10:51:10.150
> 
> 标签：caching, osgi, httpservice, pax-web

我们试图解决的任务是使用[HttpService.registerResources()](http://www.osgi.org/javadoc/r4v41/org/osgi/service/http/HttpService.html)方法`Cache-Control`为在 OSGi 环境中公开的静态资源（例如）设置自定义响应标头。

考虑到以下细节，实现这一目标的最佳方式是什么：

*   基于“资源”服务集可能有大量资源注册。这些 OSGi 服务提供有关它们所在的静态资源路径和捆绑包的信息。我们预计的资源路径注册量在 50 到 200 之间。
*   实现应该是 OSGi 友好的。[Pax Web 扩展](http://team.ops4j.org/wiki/display/paxweb/Http+Service+Extensions)的使用是可以接受的。
*   实现应该与 Web 服务器无关（例如，没有关于 Jetty 的直接知识）。

我们想到的解决方案是：

1.  [在HttpContext.handleSecurity](http://www.osgi.org/javadoc/r4v41/org/osgi/service/http/HttpContext.html)中设置响应头

    *   这种方法的缺点是处理安全的方法还将负责与安全无关的逻辑。
2.  `registerResource()`使用与资源 URI 相同的 URI为每个调用注册过滤器。过滤器将是设置响应标头的响应。

    *   这种方法的缺点是可能有太多的过滤器用于相同的目的。但到目前为止，这似乎是最简单的解决方案。
3.  如果请求 URI 对应于已知资源 URI 路径，则在根路径上注册一个过滤器并将其配置为设置响应标头。

    *   这种方法的缺点是必须对过滤器进行教育以了解资源路径，这意味着实现更复杂一些。

我们渴望听到有关建议解决方案的意见并了解其他替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:30:37.880

基于 Equinox Jetty 的 HttpService 实现已经支持`If-None-Match`和`If-Modified-Since`请求所有开箱即用的资源注册的标头。

但是，如果它确实需要与框架无关并且符合 HttpService 标准，并且无论如何您都在以编程方式注册资源，那么我建议您编写自己的 servlet（例如[来自 Equinox 的](http://git.eclipse.org/c/equinox/rt.equinox.bundles.git/tree/bundles/org.eclipse.equinox.http.servlet/src/org/eclipse/equinox/http/servlet/internal/ResourceServlet.java)那个）来处理资源请求。而不是`registerResources`直接使用这个 servlet 和`registerServlet`. 您可以在那里实施任何缓存策略。

# python - Python/GTK 中的块像素移位

> ID：11826858
> 
> 赞同：1
> 
> 时间：2012-08-06T10:51:52.237
> 
> 标签：python, gtk, bitblt

我想使用 Python 2.6 和 gtk+（根据 Centos 6.3）制作一个横向滚动的文本框（“自动收报机”显示）。

我制作了一个计时器驱动的例程，它接受一个文本字符串并重复打印它，同时增加打印窗口中的偏移量。这行得通，但似乎比我想要的处理器密集程度略高。

而不是以递增的偏移量完全重复地打印字符串 - 有没有办法以某种方式使用块移动加速并从大多数 GPU 上使用“blitting”硬件中受益？我想知道字符串是否可以打印到某种类型的像素缓冲区，然后相关部分可以“blitted”到屏幕内存？任何意见或经验将不胜感激。

我的目标硬件是基于 Intel 945GME 的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:59:23.463

> 我在某些代码上的最佳尝试（到目前为止）如下。不，我在这些事情上不是很有经验，这几乎不是“示例代码” - 但我认为我应该分享“我不知道”

```
import gtk
import pango
import glib
import cairo

class Scroller(gtk.DrawingArea):
    def __init__(self, TextString):
        super(Scroller, self).__init__()
        self.offset_x = 0
        self.offset_y = 0
        self.screen_x = 1000
        self.screen_y = 0
# process the y=text string to make an image of it
        self.p = self.create_pango_layout(TextString)
        self.p.set_font_description(pango.FontDescription('Sans 36'))
        attr = pango.AttrList()
        attr.insert(pango.AttrForeground(60535, 60535, 0, 0, -1))
        self.p.set_attributes(attr)
        self.p.set_width(-1)
        self.text_width, self.text_height = self.p.get_size()
        self.text_width = self.text_width / pango.SCALE
        self.text_height = self.text_height / pango.SCALE

#create a pixmap with the data of the pixbuf
        self.pixelbuffer = gtk.gdk.Pixbuf(gtk.gdk.COLORSPACE_RGB, False, 8,  self.text_width, self.text_height)
        self.pixelbuffer.fill(0) 
        pixmap,_ = self.pixelbuffer.render_pixmap_and_mask()
        self.pgc = pixmap.new_gc()

        pixmap.draw_layout(self.pgc, 0, 0, self.p)
# now copy image back to pixelbuiffer
        self.pixelbuffer.get_from_drawable(pixmap, pixmap.get_colormap(), 0, 0, 0, 0, -1, -1)

    def initscreen(self):
        print "screen initialised"
        self.window.clear()
        self.update_display()

    def update_display(self):
        offset = -1
# this scrolls the text sideways
        self.screen_x = self.screen_x + offset
        self.window.draw_pixbuf(self.pgc, self.pixelbuffer, self.offset_x, self.offset_y, self.screen_x, self.screen_y)
# and repeat until bored.
        if self.screen_x == -self.text_width: 
            self.screen_x =1000
        return True

# Main program 
class PyApp(gtk.Window): 
    def __init__(self):
        super(PyApp, self).__init__()

        self.modify_bg(gtk.STATE_NORMAL, gtk.gdk.Color(0, 0, 0))
        self.connect("destroy", gtk.main_quit)
        self.set_title("side scroller")

        scroller_screen=Scroller('Breaking News - scrolling text works! More soon....Olympic Games in London are highly entertaining. No more please!')
        self.add(scroller_screen)       
        self.set_size_request(1000, 100)
        self.show_all()
        scroller_screen.initscreen
# set a 20 millisec scroll refreash timer
        glib.timeout_add(20, scroller_screen.update_display)

PyApp()

gtk.main() 
```

# eclipse-jdt - Eclipse 插件，如何在 JDT 中创建 BlockComment？

> ID：11826859
> 
> 赞同：0
> 
> 时间：2012-08-06T10:51:54.623
> 
> 标签：eclipse-jdt

我们可以创建如下所示的 Javadoc：

```
Javadoc javadoc = ast.newJavadoc();
javadoc.tags().add(tagElement); 
```

和块评论？

```
BlockComment blockComment = ast.newBlockComment();
blockComment.set ???(set what)??? 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:53:06.800

**直接来自 JavaDocs：**

请注意，此节点类型是 a `comment placeholder`，并且仅用于记录在源字符串中找到注释的源范围。它是`not useful for creating comments`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:55:24.863

请参阅 API 文档。对于块注释，您可以设置一堆注释或 javadoc 注释。

# c++ - 关于 头文件

> ID：11826870
> 
> 赞同：-3
> 
> 时间：2012-08-06T10:52:37.307
> 
> 标签：c++, c

我有我机器的主机名。我使用头文件中的`gethostname()`函数。我从[这里](http://www.koders.com/)`<unistd.h>`下载，但是当我尝试编译它时，编译器报告以下错误：`<unistd.h>`

```
"Cannot open include file: 'sys/cdefs.h': No such file or directory". 
```

有什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T11:05:04.527

据推测，您使用的是 Windows 或其他一些非 POSIX 平台；否则，`<unistd.h>`应该已经可用。

在这种情况下，您不能简单地下载并包含随机的 Unix 头文件并期望它们正常工作；您需要使用 Windows 版本（在这种情况下，我认为[`<Winsock2.h>`提供了该功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738527%28v=vs.85%29.aspx)），或者使用类似 Unix 的环境，例如[MinGW](http://www.mingw.org/)。

# sqlite - 如何使用删除和更新级联设计这些 sqlite 表

> ID：11826873
> 
> 赞同：0
> 
> 时间：2012-08-06T10:52:46.230
> 
> 标签：sqlite

我试图这样做：

`Recipe`带有RecipeID（主键和外键）和RecipeName（唯一）的表。
`Ingredient`具有成分 ID（主键和外键）和成分名称（唯一）的表。 `RecipeDetail`带有 RecipeID、IngredientID 和 IngredientNme 的表。

*   如果用户从成分表中删除成分，则必须删除 RecipeDetail 中具有此成分 ID 的所有记录。
*   如果用户从Recipe Table 中删除Recipe，RecipeDetail 中具有此RecipeId 的所有记录都必须删除。

有什么线索吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:25:45.810

[文档](http://www.sqlite.org/foreignkeys.html)解释了如何在表之间创建约束。要强制删除孤立记录，请使用[`ON DELETE CASCADE`](http://www.sqlite.org/foreignkeys.html#fk_actions).

还要确保[启用了外键支持。](http://www.sqlite.org/foreignkeys.html#fk_enable)

* * *

您的创建脚本可能如下所示

```
CREATE TABLE RecipeDetail(
  RecipeID      INTEGER REFERENCES Recipe(RecipeID) ON DELETE CASCADE,
  IngredientID  INTEGER REFERENCES Ingredient(IngredientID) ON DELETE CASCADE,
  PRIMARY KEY (RecipeID, IngredientID)
); 
```

主键确保没有成分被两次分配给配方。`IngredientName`不应该存储在交集表中，这会导致冗余数据。

# javascript - 我如何限制通过java脚本在文本框（Aspx.page）中粘贴整数或字符值

> ID：11826876
> 
> 赞同：0
> 
> 时间：2012-08-06T10:52:57.790
> 
> 标签：javascript, asp.net

对文本框（Aspx.page）进行限制以仅输入整数或字符值很容易，但是在粘贴时如何限制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:58:57.100

您可以将 JavaScript 处理程序放入其中`onkeydown`（这使您能够取消按键是必要的）但这很复杂......尤其是在复制/粘贴时。

对于整数值，使用起来会容易得多 `<asp:CompareValidator Operate="DataTypeCheck" Type="Integer" ...`。 [有关详细信息，请参阅 MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.comparevalidator.aspx)

您还可以`<asp:RegularExpressionValidator...`使用它来检查特定的字符串。[有关详细信息，请参阅 MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.regularexpressionvalidator.aspx)

但是，验证器**并非**旨在阻止人们直接将值输入文本框，而是旨在在内容不正确时停止将表单提交给服务器，并且在代码中使用之前在服务器上进行检查（您需要使用`Page.IsValid`）。

（作为旁注，如果你通过 JavaScript 限制特定的东西，你真的需要仔细检查服务器上的受限制的东西 - 因为 JavaScript 很容易被绕过）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:00:08.880

有关现有解决方案，请参阅[FilteredTextBox 。](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/FilteredTextBox/FilteredTextBox.aspx)应该很容易集成到 aspx 页面上。

编辑：还要注意 freefaller 所说的关于服务器端验证的内容。

# android - 将android联系人数据库的光标设置在特定ID上

> ID：11826880
> 
> 赞同：1
> 
> 时间：2012-08-06T10:53:10.113
> 
> 标签：android, android-contacts, android-cursoradapter

我将一些联系人 ID 保存在数据库中，然后在整数列表中检索它们。

然后我尝试将android联系人数据库的光标设置在特定的ID上。当我这样做时，LogCat 会通知我代码在

id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));

我只是尝试将光标设置为指向数据库的特定元素，并检索姓名和默认电话号码，而无需解析整个联系人数据库。

代码有什么问题？谢谢

```
 ArrayList<Contact> contactItemsTemp = new ArrayList<Contact>();

            DatabaseHandler db = new DatabaseHandler(BlacklistActivity.this);
            String name = "";
            String id = "";
            String phoneNumber = "";
            // Cursor cursor = null;

            List<Integer> mycontactID;
            mycontactID = db.getAllIDs();

            Iterator value = mycontactID.iterator();

            while (value.hasNext()) {
                int mg = (Integer) value.next();

                ContentResolver cr = getContentResolver();
//              String[] PROJECTION=new String[] {  ContactsContract.Contacts._ID,
//                      ContactsContract.Contacts.DISPLAY_NAME,
//                      ContactsContract.CommonDataKinds.Phone.NUMBER
//                        };
                String[] PROJECTION = new String[] {ContactsContract.Contacts._ID,
                        ContactsContract.Contacts.DISPLAY_NAME,
                        ContactsContract.CommonDataKinds.Phone.NUMBER
                       // ContactsContract.CommonDataKinds.Event.CONTACT_ID,
                };
            //   String where = Data.RAW_CONTACT_ID+" = "+mg+";

                //(
                Cursor cur = cr.query(ContactsContract.Data.CONTENT_URI,
                        PROJECTION ,  ContactsContract.Contacts._ID + " = "+ Integer.toString(mg), null, null);

                //cur.moveToNext();
                if(cur.moveToNext())
                {
                    Log.d("edw", cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)));
                }

//              int indexName = cur.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME);
    //            int indexPhoneType = cur.getColumnIndexOrThrow(Phone.TYPE);

              //  int contactIdIndex = cur.getColumnIndex(ContactsContract.PhoneLookup._ID)  ;  
               // int contactId = cur.getInt(contactIdIndex);    

                int indexID =  cur.getColumnIndexOrThrow(ContactsContract.Contacts._ID);
                int indexName = cur.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME);
                int indexPhoneType = cur.getColumnIndexOrThrow(ContactsContract.CommonDataKinds.Phone.NUMBER);

                int contactId = cur.getInt(indexID); 
                int contactName = cur.getInt(indexName);
                int contactPhone = cur.getInt(indexPhoneType);

//                  if (cur.getCount() > 0) {
//                      while (cur.moveToNext()) {
//                          id = PROJECTION[0];
//                          name = PROJECTION[1];
//                          phoneNumber = PROJECTION[2];
//                                  
//                      }
//                  }

                id = cur.getString(contactId);
                name=cur.getString(contactName);
                phoneNumber=cur.getString(contactPhone);

//              id=PROJECTION[0];
//              name=PROJECTION[2];
//              phoneNumber=PROJECTION[3];

//              id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
//              name = cur
//                      .getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
//              phoneNumber = cur
//                      .getString(cur
//                              .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                contactItemsTemp.add(new Contact(Integer.parseInt(id), name, phoneNumber));
                cur.close();
} 
```

# c++ - C ++如何在2个单词之间获取字符串/字符

> ID：11826885
> 
> 赞同：1
> 
> 时间：2012-08-06T10:53:57.120
> 
> 标签：c++

我有一个词是

AD#安道尔

有几个问题：

我如何检查 AD？安道尔存在

? 是通配符，它​​可以是逗号或十六进制或美元符号或其他值

那么在确认 AD?Andorra 存在后，我如何获得 的值？

谢谢，陈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T10:59:33.353

该问题通常可以通过正则表达式匹配来解决。但是，对于您提出的具体问题，这将起作用：

```
std::string input = getinput();
char at2 = input[2];
input[2] = '#';
if (input == "AD#Andorra") {
    // match, and char of interest is in at2;
} else {
    // doesn't match
} 
```

如果`?`应该也代表一个字符串，那么你可以这样做：

```
bool find_inbetween (std::string input,
                     std::string &output,
                     const std::string front = "AD",
                     const std::string back = "Andorra") {
    if ((input.size() < front.size() + back.size())
        || (input.compare(0, front.size(), front) != 0)
        || (input.compare(input.size()-back.size(), back.size(), back) != 0)) {
        return false;
    }
    output = input.substr(front.size(), input.size()-front.size()-back.size());
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:14:47.583

如果您使用 C++11/使用 Boost（我强烈推荐！），请使用正则表达式。一旦你获得了一定程度的理解，所有的文本处理都变得轻而易举！

```
#include <regex> // or #include <boost/regex>

//! \return A separating character or 0, if str does not match the pattern
char getSeparator(const char* str)
{
    using namespace std; // change to "boost" if not on C++11
    static const regex re("^AD(.)Andorra$");
    cmatch match;
    if (regex_match(str, match, re))
    {
        return *(match[1].first);
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:57:11.470

假设你的角色总是从位置 3 开始！使用字符串函数`substr`：

```
your_string.substr(your_string,2,1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T11:00:21.610

如果您使用的是 C++11，我建议您使用正则表达式而不是直接在字符串中搜索。

# jpgraph - JPGraph 饼图大小

> ID：11826888
> 
> 赞同：2
> 
> 时间：2012-08-06T10:54:16.353
> 
> 标签：jpgraph

我在这里已经有了一个有效的饼图（就显示的数据而言）。它是一个多饼图，在一个图中显示 3 个饼图。我的问题是我想让我的图表尺寸更大，以便所有东西都可以适合该区域，同时能够看到图表的完整视图。目前，我正在使用下面的代码（后跟生成的屏幕截图）：

```
$graph = new PieGraph(800,800); 
```

![图为 800,800](../Images/eb4a6b48893d318f98e16c577882d818.png)

但是，当我将其更改为：

```
$graph = new PieGraph(1000,1000); 
```

![图表在 1000,1000](../Images/12ba68b7dd82345aa6e754022997620f.png)

希望让我的“图表区域”更大，饼图刚刚变成“缩小”，“图表区域”仍然是一样的。我想要的只是我的图表将适合而不是拥挤。正如您在屏幕截图中看到的那样，没有太大区别。我也尝试了更高的值，但还是一样。

有人知道怎么做这个吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T09:54:32.763

请看这个链接。我认为这会对您有所帮助： [Jpgraph pie plot set size](http://jpgraph.net/download/manuals/classref/PiePlot3D.html#_PIEPLOT3D_SETHEIGHT)

```
$pieplot->SetSize(0.5);
$pieplot->SetCenter(0.5, 0.4); 
```

# php - $date = 旧 PHP 版本的新日期时间

> ID：11826893
> 
> 赞同：2
> 
> 时间：2012-08-06T10:54:51.250
> 
> 标签：php, time

使用下面的代码我收到一个错误，我发现它与我的服务器没有运行最新的 PHP 有关：

```
$date = new DateTime('2000-01-01');
$date->add(new DateInterval('PT'.$a->metrics->duration.'S')); 
```

**错误：** 致命错误：调用未定义的方法 DateTime::add()

**问题：** 对于运行 PHP 5.2.17 的服务器，我将如何实现上述目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:58:23.530

您可以使用 strtotime()：

```
$date = strtotime ("2000-01-01");
$date = strtotime ("+900 seconds", $date); // adds 900 seconds to date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:12:03.443

```
$start = new DateTime() ;
$start->modify( '+900 seconds' ) ; 
var_dump( $start->format('h:i:s' )); 
```

使用 modify 应该仍然适用于您的版本，使您能够坚持使用 DateTime，在 5.2.6 上适用于我

# scala - 过滤掉地图的键，但将所有值保留在scala中

> ID：11826898
> 
> 赞同：1
> 
> 时间：2012-08-06T10:55:08.177
> 
> 标签：scala, map, filter, sum

我正在尝试编写具有以下签名的方法：

```
def buildSumMap(minInterval:Int, mappes:SortedMap[Int, Long]):SortedMap[Int, Long] = {...} 
```

在方法中，我想通过将以下伪代码应用于每 `(key:Int,value:Long)`对“映射”来返回一个新映射：

```
If(key + minInterval > nextKey) {
    value += nextValue
}
else {
    //Forget previous key(s) and return current key with sum of all previous values
    return (key, value)
} 
```

示例：如果我有源地图`((10 -> 5000), (20 -> 5000), (25 -> 7000), (40 -> 13000))`并将 minInterval 定义为 10，我希望得到的地图：
`((10 -> 5000), (25 -> 12000), (40 -> 13000))`

我发现了很多单独转换过滤键和值的键和值的示例，**但**到目前为止还没有一个用于*删除*键同时保留值的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:48:37.773

该解决方案`List`用作中间结构。它从左到右遍历 map，如果间隔足够大，则将键值对附加到列表中，否则将列表的头部替换为新的键值对。`TreeMap`工厂方法在最后反转列表。

```
import collection.immutable._

def buildSumMap(minInterval:Int, mappes:SortedMap[Int, Long]):SortedMap[Int, Long] = 
  TreeMap(
    mappes.foldLeft[List[(Int, Long)]] (Nil) { 
      case (Nil, nextKV) => nextKV :: Nil
      case (acc @ (key, value) :: accTail, nextKV @ (nextKey, nextValue)) =>
        if (nextKey - key < minInterval)
          (nextKey -> (value + nextValue)) :: accTail
        else
          nextKV :: acc
    } : _*
  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:47:55.110

```
import scala.collection.SortedMap

def buildSumMap(minInterval:Int, mappes:SortedMap[Int, Long]):SortedMap[Int, Long] = {
  def _buildSumMap(map: List[(Int, Long)], buffer: List[(Int, Long)], result:SortedMap[Int, Long]): SortedMap[Int, Long] = {
    def mergeBufferWithResult = {
        val res = buffer.headOption.map { case (k, v) =>
            (k, buffer.map(_._2).sum)
          }
        res.map(result + _).getOrElse(result)
    }

    map match {
        case entry :: other =>
          if(buffer.headOption.exists(entry._1 - _._1 < minInterval)) {
            _buildSumMap(other, entry :: buffer, result)
          } else {
            _buildSumMap(other, entry :: Nil, mergeBufferWithResult)
          }
        case Nil =>
          mergeBufferWithResult
    }
  }
  _buildSumMap(mappes.toList, List.empty, SortedMap.empty)
}

val result = buildSumMap(10 , SortedMap(10 -> 5000L, 20 -> 5000L, 25 -> 7000L,  40 -> 13000L))

println(result) 
```

//地图(10 -> 5000, 25 -> 12000, 40 -> 13000)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T12:43:39.900

我试图拆分算法的各个部分：

```
import scala.collection._

val myMap = SortedMap((10 -> 5000), (20 -> 5000), (25 -> 7000), (40 -> 13000)).mapValues(_.toLong)

def filterInterval(minInterval: Int, it: Iterable[Int]):List[Int] = {
    val list = it.toList
    val jumpMap = list.map(x => (x, list.filter( _ > x + minInterval))).toMap.
        filter(_._2.nonEmpty).mapValues(_.min)

    def jump(n:Int): Stream[Int] = jumpMap.get(n).map(j => Stream.cons(j, jump(j))).getOrElse(Stream.empty)

    list.min :: jump(list.min).toList
}

def buildSumMap(minInterval:Int, mappes:Map[Int, Long]):Map[Int,Long] = {
    val filteredKeys: List[Int] =  filterInterval(minInterval, mappes.keys)

    val agg:List[(Int, Long)] = filteredKeys.map(finalkey => 
        (finalkey,mappes.filterKeys(_ <= finalkey).values.sum)
    ).sort(_._1 < _._1)

    agg.zip((filteredKeys.min, 0L) :: agg ).map(st => (st._1._1, st._1._2 - st._2._2)).toMap
}

     buildSumMap(10, myMap) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T13:00:33.767

要回答这个问题，基本上没有完全简单的方法可以做到这一点，因为要求并不简单。您需要在比较相邻元素并构建新地图时以某种方式遍历 SortedMap。有几种方法可以做到：

1.  使用 fold / reduce / scan / groupBy 高阶函数：通常是首选方式，也是最简洁的方式
2.  递归（有关大量示例，请参见[http://aperiodic.net/phil/scala/s-99/](http://aperiodic.net/phil/scala/s-99/)）：如果使用高阶函数变得过于复杂，或者您需要的确切函数不存在，您会采取什么措施。可能比使用函数更快。
3.  Builders - 一个不错的术语，用于短暂涉足可变领域。最棒的表演; 通常相当于没有仪式的递归版本

这是我使用的尝试`scanLeft`：

```
def buildSumMap(minInterval: Int, mappes: SortedMap[Int, Long]) = 
  SortedMap.empty[Int, Long] ++ mappes.toSeq.tail.scanLeft(mappes.head){
    case ((k1, v1), (k2, v2)) => if (k2 - k1 > minInterval) (k2,v2) else (k1,v2)
  }.groupBy(_._1).mapValues(_.map(_._2).sum) 
```

它看起来很复杂，但实际上并非如此，一旦您了解了做什么`scanLeft`和`groupBy`做什么，您就可以在其他地方查找。它基本上从左侧扫描序列并比较键，如果间隙太小则使用左侧的键，然后根据键将元组分组在一起。

TLDR：关键是学习收藏库中的内置函数，这需要一些练习，但很好玩。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T13:58:57.850

这是另一种看法：

```
def buildSumMap(map: SortedMap[Int, Int], diff: Int) = 
  map.drop(1).foldLeft(map.take(1)) { case (m, (k, v)) =>
    val (_k, _v) = m.last
    if (k - _k < diff) (m - _k) + (k -> (v + _v))
    else m + (k -> v)
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T14:12:01.103

一个使用 Scalaz 7 的更清洁（比我的第一次尝试）的解决方案`State`，以及一个`List`存储计算状态的解决方案。使用 a可以有效地检查每个步骤中的列表`List`，并在必要时对其进行修改。`head`

```
def f2(minInterval: Int): ((Int, Int)) => State[List[(Int, Int)], Unit] = {
  case (k, v) => State {
    case (floor, acc) :: tail if (floor + minInterval) > k =>
      ((k, acc + v) :: tail) -> ()
    case state => ((k, v) :: state) -> ()
  }
}

scala> mappes.toList traverseS f2(10) execZero
res1: scalaz.Id.Id[List[(Int, Int)]] = List((40,13000), (25,12000), (10,5000)) 
```

# python - 3行类似java的代码的替代品？

> ID：11826903
> 
> 赞同：1
> 
> 时间：2012-08-06T10:55:34.683
> 
> 标签：python, python-2.7

假设你有一个函数，它有时返回一个值，有时不返回，因为在这种情况下你真的没有什么可以返回的，甚至没有默认值之类的。现在你想对结果做点什么，但当然**只有**在有结果的时候。

例子：

```
result = function_call(params)
if result:
    print result 
```

有没有办法以更 Pythonic 的方式编写它，甚至可能在一行中？

像那样：

```
print function_call(params) or #nothing 
```

（请注意，我的意思是它不应该打印“nothing”或“None”。如果结果是，它实际上应该根本**不**`None`打印）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T11:02:04.340

不; 在 Python 中，名称绑定是一个语句，因此不能用作语句中的表达式。因为`print`也是一个声明，你将需要 3 行；在 Python 3 中，您可以编写：

```
result = function_call(params)
print(result) if result else None 
```

这对于理解或生成器中的名称绑定来说并不完全正确，其中名称绑定是一个具有语句式语义的语法项：

```
[print(result) for result in generator_call(params) if result] 
```

正如 Kos 所说，您可以滥用它来创建单元素理解：

```
[print(result) for result in (function_call(params), ) if result] 
```

另一个执行名称绑定并且同样可以被滥用的语法项是`lambda`表达式：

```
(lambda result: print(result) if result else None)(function_call(params)) 
```

请注意，在这两种情况下，对返回值的操作都必须是表达式而不是语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T11:35:42.637

我认为更 Pythonic 的版本实际上更接近您的原始版本：

```
result = function_call(params)
if result is not None:
    do_something(result) 
```

检查对`is (not) None`我来说似乎很惯用 - 我自己用过几次，我也看到它在其他地方使用过[需要引用]。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T12:06:34.677

从答案到现在，我会这样做：

```
>>> from __future__ import print_function #if Python2.7
>>> def filtered_print(txt):
...    txt and print(txt)
...
>>> filtered_print('hello world')
hello world
>>> filtered_print('None')
None
>>> filtered_print(None)
>>> 
```

如果其他人有更好的解决方案，我仍然愿意接受替代方案！

# html - 显示 Json Ajax 响应并用 HTML 填充

> ID：11826914
> 
> 赞同：0
> 
> 时间：2012-08-06T10:56:01.237
> 
> 标签：html, json, jquery

我正在开发诸如 **facebook 通知**或**stackoverflow**通知之类的功能

![脸书通知](../Images/d9b4a98057aa4d6732f616d3721ba8fd.png)

当我按下**世界图标**发送的 Ajax 请求时，响应是 JSON，但通知中的 html 和单词会根据操作（评论等）而改变问题是

如何处理 HTML？在 php 代码中？或使用[PURE](http://beebole.com/pure/)之类的库 有没有更好的库？
这是使用 JSON 作为响应的正确方法吗？

# php - 单个字段上的 SQL 多个条件

> ID：11826917
> 
> 赞同：9
> 
> 时间：2012-08-06T10:56:02.483
> 
> 标签：php, mysql, sql

嗨，有人可以帮我了解一下 sql

我的表中有这些数据：

```
添加日期 | 位置 | 地位
2012-08-01 马尼拉 1
2012-08-01 日本 1
2012-08-01 宿雾 1

2012-08-04 马尼拉 1
2012-08-04 宿雾 1
2012-08-04 非洲 1

2012-08-06 马尼拉 1
2012-08-06 日本 1
2012-08-06 宿雾 1

```

我怎样才能在“马尼拉”、“日本”、“宿务”的位置获得 date_added 结果并且状态 = 1

这三个数据必须存在才能获得日期。

结果应该是：基于此表

```
添加日期
 2012-08-01
 2012-08-06

```

因为在 2012-08-04 '日本'不存在。

我当前的示例 SQL：

```
SELECT date_added FROM TABLE WHERE location ='Manila' AND location ='Japan'
       AND location ='宿务' AND STATUS =1;

```

请帮助.....任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T10:59:01.310

尝试这个：

```
SELECT DATE_ADDED 
FROM TABLE 
WHERE LOCATION IN ('MANILA' , 'JAPAN' , 'CEBU')
AND STATUS =1
GROUP BY DATE_ADDED
HAVING (COUNT(DISTINCT LOCATION)=3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:00:27.507

您需要 SQL`IN`运算符：

```
SELECT date_added FROM TABLE WHERE location IN ('Manila', 'Japan', 'Cebu') AND STATUS =1; 
```

或者，您需要使用`OR`运算符并将位置语句括起来：

```
SELECT date_added FROM TABLE WHERE ( location ='Manila' OR location ='Japan' OR location ='Cebu' ) AND STATUS =1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:13:04.667

when you use `AND` condition on the same field,it will always result to false because a field can only have `1 possible value`. So you needto use `IN` for that

```
SELECT Date_added 
FROM   myTable
WHERE  `Location` IN ('MANILA' , 'JAPAN' , 'CEBU')
          AND `Status` =1
GROUP BY Date_added 
HAVING   COUNT(DISTINCT Location) = 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T10:59:28.237

尝试这个

```
SELECT date_added FROM TABLE WHERE location ='Manila' or location ='Japan'  or location ='Cebu' AND STATUS =1; 
```

或者

```
select date_added FROM TABLE WHERE location in ('Manila','Japan','Cebu') AND status='1' GROUPED BY date_added 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T11:00:44.697

```
WHERE location IN ('Manila' , 'Japan', 'Cebu') AND status = 1 
```

# google-analytics - 确定访客用户的搜索查询

> ID：11826918
> 
> 赞同：0
> 
> 时间：2012-08-06T10:56:03.983
> 
> 标签：google-analytics, google-analytics-api

在我的应用程序中，需要跟踪搜索查询，即应用程序的个人。这里的重点是专门跟踪个人/搜索查询，即我想说：

```
User 10.20.30.40 (IP is derived from client, ok) came to my website
from Google's search results page of 'hello world' query 
```

**这甚至可能吗？**

我稍微调查了一下这个问题。事实证明，当 Google 搜索结果页面上的用户单击链接并到达底层页面时，引用者不包含搜索查询。比如说，我输入了一个“Hello world”查询......

1.  我打开谷歌并输入“Hello world”查询；
2.  我看到一个搜索结果页面，顶部有一个维基百科的链接；我跟着它
3.  我在控制台输入“document.referrer”查看：

    ```
    http://www.google.com.ua/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGkQFjAA&url=http%3A%2F%2Fru.wikipedia.org%2Fwiki%2FHello%2C_world!&ei=HZ0fUIXTIordtAau54GwAQ&usg=AFQjCNHSAHv8NwVNdaxMvh0OhIxs6Zb1rQ&sig2=a8tEGTBNcFWOPykloXj_Xg 
    ```

有一个`&q=`带有空白值的参数，使我无法弄清楚用户输入的查询。

我相信 Google 在内部使用上面 URL中的一些查询参数（即`ved`、或）来跟踪用于访问该站点的查询，从而掌握有关哪些查询主要用于访问该网站的统计信息。我找不到有关如何使用它们的任何信息。`ei``usg``sig2`

与此同时，谷歌分析只会收集一般统计数据，而不是针对个人。但是我注意到可以使用[自定义变量](https://developers.google.com/analytics/devguides/reporting/core/dimsmets/customvars)。是否可以以某种方式使用它们来跟踪用户提出的查询？如果是这样，那会不会违反 Google Analytics[服务条款](http://www.google.com.ua/analytics/tos.html)？

再说一遍：**有没有办法知道一个搜索查询是用什么来访问网站的？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:12:25.000

这是不可能的。谷歌删除了`q`参数的值，所以而不是

```
`?q=search+query` 
```

一个总是观察。

```
`?q=` 
```

不过，谷歌提供了另一种方式（所谓的`convinient one`）来了解哪些查询被用于访问您的网站：谷歌分析。

`user_ip/search_query`此外，由于 Google Analytics的原因，无法跟踪配对[`ToS`](https://stackoverflow.com/questions/10095225/tracking-individual-users-with-google-analytics-custom-variables)。

# java - android 应用程序和 Web 小程序是否有通用接口？

> ID：11826925
> 
> 赞同：1
> 
> 时间：2012-08-06T10:56:16.150
> 
> 标签：java, android, applet

我正在寻找（作为计算机科学项目的一部分）创建一套应用程序来演示和解释一组特定的主题。我希望它们在 Android 上运行并可以通过浏览器访问。

他们将有输入（按钮、滑块、文本框等），并且需要绘制图表。

我可以在什么级别重用我的代码？（例如，有没有办法将我的小程序包含在 android 视图中？我可以使用小程序中的输入法吗？由于不使用本机控件，会不会影响性能？）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:02:00.890

我不认为两者之间有任何共同点。最好的办法是为两个平台之间的所有不同部分创建接口，使用这些接口编写应用程序套件，然后为每个平台的接口创建实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T11:11:34.333

你说的网络小程序是什么意思？如果您指的是网页，您可以查看 trigger.io，它允许您在同一代码库中为 android、iphone 和网络浏览器编写 html 应用程序。

# apache - apache html请求参数

> ID：11826929
> 
> 赞同：0
> 
> 时间：2012-08-06T10:56:29.703
> 
> 标签：apache, ddos

有什么方法可以禁用/删除对 html 内容的查询。

```
GET /alaswaq_property.html?d691f
GET /alaswaq_property.html?48fae 
GET /alaswaq_property.html?8c106 
```

GET /alaswaq_finance.html?fe082 如果请求包含 filename.html?xxx 然后阻止它只允许 filename.html < 这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:58:16.867

在您的 htaccess 文件或 vhost 配置中，添加：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^[A-Za-z0-9]{5}$
RewriteRule \.html$ - [F,L] 
```

如果您只想包含*任何*查询字符串，请将`RewriteCond`行更改为：

```
RewriteCond %{QUERY_STRING} !^$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:00:48.297

是的，您可以使用 mod_rewrite 来执行此操作。

```
RewriteRule ^/alaswaq_property.html /alaswaq_property.html? 
```

请参阅[http://wiki.apache.org/httpd/RewriteQueryString](http://wiki.apache.org/httpd/RewriteQueryString)了解您可以为查询字符串操作执行的操作。

# c# - 将列表项从 c# 传递到 javascript 数组

> ID：11826936
> 
> 赞同：5
> 
> 时间：2012-08-06T10:57:10.300
> 
> 标签：c#, javascript, arrays, list

我有以下代码在 gmap 上显示多个标记

```
<script type="text/javascript">

        function init() {
            var locations = [
              ['Bondi Beach', -33.890542, 151.274856, 4],
              ['Coogee Beach', -33.923036, 151.259052, 5],
              ['Cronulla Beach', -34.028249, 151.157507, 3],
              ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
              ['Maroubra Beach', -33.950198, 151.259302, 1]
            ];

            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                center: new google.maps.LatLng(-33.92, 151.25),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            var infowindow = new google.maps.InfoWindow();

            var marker, i;

            for (i = 0; i < locations.length; i++) {
                marker = new google.maps.Marker({
                    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                    map: map
                });

                google.maps.event.addListener(marker, 'click', (function (marker, i) {
                    return function () {
                        infowindow.setContent(locations[i][0]);
                        infowindow.open(map, marker);
                    }
                })(marker, i));
            }
            return false;
        }
    </script> 
```

我想让这个动态，所以我必须通过这个

```
 var locations = [
              ['Bondi Beach', -33.890542, 151.274856, 4],
              ['Coogee Beach', -33.923036, 151.259052, 5],
              ['Cronulla Beach', -34.028249, 151.157507, 3],
              ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
              ['Maroubra Beach', -33.950198, 151.259302, 1]
            ]; 
```

从 c# 代码到这个 js 。

我试过隐藏字段和这段代码

```
 List<String> oGeocodeList = new List<String>
                                         {
                                            "'Bondi Beach', -33.890542, 151.274856, 4",
                                            "'Coogee Beach', -33.923036, 151.259052, 5",
                                            "'Cronulla Beach', -34.028249, 151.157507, 3",
                                            "'Manly Beach', -33.80010128657071, 151.28747820854187, 2",
                                            "'Maroubra Beach', -33.950198, 151.259302, 1"
                                        };

        var geocodevalues = string.Join(",", oGeocodeList.ToArray());
        ClientScript.RegisterArrayDeclaration("locations", geocodevalues); 
```

但是运气不好，任何参考资料都会对我有所帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T11:06:29.390

基本上我相信你想要做的是创建一个[`JSON`](http://www.json.org/)字符串。`JSON`允许您在多种语言（包括 JavaScript 和 C#）之间传递序列化字符串格式的对象。我建议看一下[JSON .NET library](http://james.newtonking.com/projects/json-net.aspx)。这是一个很棒的库，可让您在 C# 中安全有效地序列化项目与字符串。

我还建议您创建一个更多的 OOP 结构，而不是传递一个多维数组。为此，您需要为您的位置创建一个类，我将假设以下内容：

```
public class Location
{
    public string Name { get; set; }
    public double Lat { get; set; }
    public double Lng { get; set; }
} 
```

然后，您需要构建一个`List<Location>`.NET 库，然后使用 JSON .NET 库对其进行序列化，就像这样简单：

```
List<Location> oGeocodeList = new List<Location>() {
    //...
};

string json = JsonConvert.SerializeObject(oGeocodeList); 
```

使用此 JSON，您可能希望将其写入隐藏字段或 JavaScript 中的变量。然后，这将允许您通过 JavaScript 在您的页面上引用它。还有[相当全面的文档](http://james.newtonking.com/projects/json/help/)，证明非常有用！

然后可以在您的 JavaScript 中像任何其他 js 对象一样访问它，如下所示：

```
for (i = 0; i < locations.length; i++) {
    marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i].Lat, locations[i].Lng),
        map: map
    });

    // ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T11:08:20.520

我认为您可以做的是创建一个列表。

例子：

```
List<T> data = new List<T>();

System.Web.Script.Serialization.JavaScriptSerializer serializer = new System.Web.Script.Serialization.JavaScriptSerializer();

return serializer.Serialize(data); 
```

就是这样。

我希望它有效

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T11:08:36.200

使用[Json.Net](http://json.codeplex.com/)

```
var obj = new[] { 
    new object[] { "Bondi Beach", -33.890542, 151.274856, 4 },
    new object[] { "Coogee Beach", -33.923036, 151.259052, 5 },
    new object[] { "Cronulla Beach", -34.028249, 151.157507, 3 },
    new object[] { "Manly Beach", -33.80010128657071, 151.28747820854187, 2 },
    new object[] { "Maroubra Beach", -33.950198, 151.259302, 1 },
};
var json = JsonConvert.SerializeObject(obj); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T11:01:14.900

我会使用[Json.Net](http://james.newtonking.com/projects/json-net.aspx)或 C# Json 编码器将 C# 编码为 Json。然后将其写入隐藏字段。然后在 JavaScript 端使用[Json2对其进行解码](http://www.json.org/js.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-17T14:45:30.343

你必须像这样使用它：在你的控制器中：

```
 var locations = [
          ['Bondi Beach', -33.890542, 151.274856, 4],
          ['Coogee Beach', -33.923036, 151.259052, 5],
          ['Cronulla Beach', -34.028249, 151.157507, 3],
          ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
          ['Maroubra Beach', -33.950198, 151.259302, 1]
        ];
var locationsString = JsonConvert.SerializeObject(locations);
ViewBag.locationsString = locationsString;
return View(); 
```

并在您的 java 脚本中像这样使用它：

```
var data = JSON.parse(@ViewBag.locationsString); 
```

你可以把你的数据放在数组中，并在每个函数中使用它：

```
$.each(data, function (i, item) {
//enter your code
} 
```

对于 javascript 不是 jquery 使用：

```
for (var i = 0; i < data.length; i++) {
       addMarker(data[i], map);
    } 
```

# python - 替换整个数组中的值

> ID：11826939
> 
> 赞同：2
> 
> 时间：2012-08-06T10:57:19.737
> 
> 标签：python, numpy

我想问一下如何更改整个 NumPy 数组中的值。

例如，我想更改每个`< 1e-15`等于 的值`1e-15`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:58:48.537

如果`L`是一个列表：

```
L[:] = [max(x, 10e-15) for x in L] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T10:58:57.877

假设您的意思是 lsit 而不是数组，我建议使用列表理解：

```
new_list = [max(x, 1e-15) for x in my_list] 
```

（我也假设你的意思是`1e-15 == 10\. ** (-15)`而不是`10e-15 == 1e-14`。）

Python 中也存在“数组”：`array.array`标准库中的类和 NumPy 数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T11:04:54.323

假设您的意思是一个 numpy 数组，并且它由一个变量指向`a`：

```
np.fmax(a, 1e-15, a) 
```

`a`这会在每个元素的基础上找到作为前两个参数 (和)给出的两个值的最大值`1e-15`，并将结果写回作为第三个参数给出的数组，`a`。

我很难找到这个函数的官方文档，但我找到[了这个](http://nullege.com/codes/search/numpy.fmax)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T12:16:28.420

我喜欢`numpy.fmax`（这对我来说是新的），但对于一个可能更通用的情况，我经常使用：

```
a[a < 1e-15] = 1e-15 
```

（在您可以改变条件或替换值不等于比较值的意义上更通用。）

# sql - 根据列比较的 APEX 突出显示行

> ID：11826940
> 
> 赞同：2
> 
> 时间：2012-08-06T10:57:22.953
> 
> 标签：sql, oracle, oracle-apex

我在 APEX 中有一份报告，其中显示了两个表的 JOIN。两个表都有一个值，例如电话号码。如果两个电话号码不匹配，我希望该行被突出显示。

我查看了 Actions>Format>Highlight 中的突出显示选项，但似乎我只能将列值与特定值进行比较，而不能与另一列进行比较。

我对 APEX 很陌生，所以我可能会遗漏一些明显的东西！我已经阅读了其他问题和答案，但他们似乎正在处理更复杂的事情。他们谈到制作一个不可见的列并改变它的价值，但我不确定我会怎么做。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:13:41.250

您无法在 ir 突出显示中比较每行的另一列。因此，要么通过查询要格式化的列输出 html，要么使用 javascript/动态操作。

数据：

```
SELECT CASE WHEN a.phone = b.phone THEN htf.escape_sc(a.phone) 
            ELSE '<div class="highlight">'||htf.escape_sc(a.phone)||'</div>'
       END AS phone_highlight
FROM a, b
WHERE a.id = b.id 
```

（输出 html 时转义特殊字符！）另外，将列设置为“标准报告列”，这样它将呈现 html 而不会转义它。

就个人而言，我会选择 javascript：
动态操作，刷新后，执行 javascript，检查“页面加载时触发”：

```
$("td[headers='TELEPHONE1']").each(function(){
   var lTest = $(this).siblings("[headers='TELEPHONE2']").text();
   if($(this).text()!= lTest){
      $(this).addClass("highlight");
   };
}); 
```

这会将高亮类添加到同一行中与电话 2 不同的电话 1 的单元格。

在这两种情况下，我都在上课，所以你也必须提供。（当然，您可以在 js 中使用 .css()，但我喜欢将样式与功能分开）例如头部中的样式标签：

```
<style type="text/css">
.highlight{
   background-color: yellow;
   color: purple;
}
</style> 
```

这允许无污染的 sql、没有样式的 javascript 和 css 中的样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:55:30.280

在您的查询中创建一个伪列来标记感兴趣的记录。然后比较标志：

```
SELECT a.phone, b.phone
      ,CASE WHEN a.phone = b.phone THEN 1 ELSE 0 END AS match
  FROM a, b
  WHERE a.id = b.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:22:02.390

我在搜索中偶然发现了这个解决方案，首先感谢您花时间在这个答案中。我一直跟着你到：

“在这两种情况下，我都使用了一个类，所以你也必须提供它。（当然，你可以在 js 中使用 .css()，但我喜欢将样式与功能分开）例如头部的样式标签：

```
<style type="text/css">
.highlight{
 background-color: yellow;
 color: purple;
 }
 </style>" 
```

你会在 Apex 的哪里“提供”这个？再次感谢，

# ios - 无法接收通知

> ID：11826942
> 
> 赞同：0
> 
> 时间：2012-08-06T10:57:30.780
> 
> 标签：ios, notifications

我尝试发送本地通知。这里有一些类发送通知的代码：

```
@interface Sender : UIView
{
    NSInteger itemID;
} 

@implementation Sender

-(void) changedProperty
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"NotificationName" object:NULL];
} 
```

这里是接收此通知的代码：

```
@interface Listener : UIViewController
{

}

@implementation Listener
- (void)viewDidLoad
{
    [super viewDidLoad];        

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(selectedItem:) name:@"NotificationName" object:NULL];
}

- (void)viewDidUnload
{
    [super viewDidUnload];

    [[NSNotificationCenter defaultCenter] removeObserver:self name:@"NotificationName" object:NULL];
}

-(void) selectedItem:(NSNotification *) notification
{
    // some actions
} 
```

但是这段代码不起作用。调试我看到**postNotificationName: object**是如何工作的，但是方法**selectedItem:**没有调用

**更新。** 这是更多代码。也许这会有所帮助。

```
extern const NSString* selectItemNotificationName;    
@interface vRoomSelectorItem : UIView
{
    RoomSelectorItemBackground backgroundType; 
    NSInteger itemID;
}
@property NSInteger itemID;
-(void) setBackgroundType:(RoomSelectorItemBackground) backgroundType;

@interface vRoomSelectorItem ()
@property RoomSelectorItemBackground backgroundType;
@end

@implementation vRoomSelectorItem

const NSString* selectItemNotificationName = @"Reservation.SelectRoom";

-(RoomSelectorItemBackground) backgroundType
{
    return backgroundType;
}
-(void) setBackgroundType:(RoomSelectorItemBackground)value
{
    if(backgroundType != value)
    {
        backgroundType = value;
        [self changedBackgroundType];
    }
}
-(void) changedBackgroundType
{
    if(backgroundType == RoomSelectorItemFilled)
    {
        // animation
        dispatch_async(dispatch_get_main_queue(), ^{
            [[NSNotificationCenter defaultCenter] postNotificationName:(NSString*)selectItemNotificationName object:NULL userInfo:[[NSDictionary alloc] initWithObjectsAndKeys:[NSNumber numberWithInteger:itemID], @"ID", NULL]];
        });
    }
    else
        // reverse animation  
}

#import "vRoomSelectorItem.h"
    @interface vcReservationSelectRoom : UIViewController
{
    NSMutableArray* arraySelectorItems;
}        

@implementation vcReservationSelectRoom

- (void)viewDidLoad
{
    [super viewDidLoad];    

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(selectedItem:) name:(NSString*)selectItemNotificationName object:NULL];        

    for(NSInteger i = 1; i <= SELECTOR_ITEM_COUNT; ++i)
    {
        vRoomSelectorItem* newItem = [[vRoomSelectorItem alloc] initWithFrame:CGRectMake(/*coordinates*/)];
        [self.view addSubview:newItem];            
        [newItem setBackgroundType:RoomSelectorItemTransparent];
        [newItem setItemID:i];
        [arraySelectorItems addObject:newItem];
        newItem = NULL;
    }
}

-(void) selectedItem:(NSNotification *) notification
{
    // some actions
}

-(void) dealloc
{    
    arraySelectorItems = NULL;
    [[NSNotificationCenter defaultCenter] removeObserver:self name:(NSString*)selectItemNotificationName object:NULL];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:16:19.707

看来您的代码应该可以工作。确保通知在主线程上，工作流程如下：

1.  向通知中心添加监听器
2.  发起发件人
3.  发送通知

您可以确定它在主线程上：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [[NSNotificationCenter defaultCenter] post...];
}); 
```

我会改变几件事：

*   将自己从`NSNotificationCenter`in`-(void)dealloc`而不是`-(void)viewDidUnload`. viewDidUnload 将被弃用，并且可以在没有 viewDidUnload 的情况下调用 dealloc。

*   对于通知，我喜欢将名称存储在外部常量中，以确保我不会拼写字符串：

    ```
    //header.h
    extern NSString *const notificationName;

    //implementation.m
    NSString *const notificationName = @"notification"; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:27:37.930

从您在问题中的代码中，我认为您可以尝试以下操作：

```
- (void)viewDidLoad 
```

{

```
[super viewDidLoad];        

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(selectedItem:) name:@"NotificationName" object:NULL];

[self.view changedProperty]; // method of your Sender class

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:26:36.987

好的，我已经解决了这个问题。上面那段代码还不够理解，为什么一直没用。**vcReservationSelectRoom**类的对象是临时的，在从任何**vRoomSelectorItem**发送通知之前已被销毁。很抱歉我没有显示足够的代码来解决这个问题。并感谢大家的帮助。

# iphone - 如何在 didSelectRowAtIndexPath: 方法中查找部分

> ID：11826945
> 
> 赞同：2
> 
> 时间：2012-08-06T10:57:48.537
> 
> 标签：iphone, objective-c, ios, xcode

是否可以在 tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 方法中找到我单击的行部分。

TIA

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T10:59:26.473

indexPath 参数具有可访问的部分属性，如下所示

```
[indexPath section]; 
```

或者

```
indexPath.section 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:06:33.977

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

 if(indexPath.section==0)
 {

    // 1st Section of the tableView.

   if(indexPath.row==0)
   {

      // 1st cell of the 1st section.

   }
 }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T11:08:15.973

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

   int section = [indexPath section];

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T11:27:47.710

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:
(NSIndexPath*)indexPath{
    int section = [indexPath section];
    NSLog(@"section %d",section);
} 
```

# sorting - Dojo DataGrid (EnhancedGrid) 排序问题

> ID：11826946
> 
> 赞同：1
> 
> 时间：2012-08-06T10:57:55.883
> 
> 标签：sorting, dojo, dojox.grid.datagrid

我有一个 DataGrid，以编程方式创建并从 ItemFileReadStore 加载。我希望 DataGrid 的第一列始终按降序排序，并禁止用户进行排序。任何其他列都应可用于作为辅助可排序的排序。

我不想为用户提供如此强大（复杂且令人困惑）的功能，例如按多列排序，因为我的网格中有太多列。

因此，它应该是用户的一个可排序列，实际上是另一个“已经排序的不可排序”列。

有谁知道如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:43:25.273

要对第一列进行排序，请在创建对象时添加“sortInfo:-1”。

要允许从任何其他列而不是第一列对网格进行排序，您需要覆盖函数 canSort。创建你的网格现在应该是这样的。

```
dijit.grid.DataGrid({
  canSort: function (sortInfo) {
                if (Math.abs(sortInfo) == 1){
                    return false;
                } else {
                    return this.inherited("canSort", arguments);
                }
            },
  sortInfo: -1,    ..... 
```

如果您需要将更多列排序为一列，则需要 dojox.grid.enhanced.plugins.NestedSorting。 [http://dojotoolkit.org/reference-guide/1.7/dojox/grid/EnhancedGrid/plugins/NestedSorting.html](http://dojotoolkit.org/reference-guide/1.7/dojox/grid/EnhancedGrid/plugins/NestedSorting.html)

# php - hash_hmac - sha1 - 有符号值出错？

> ID：11826948
> 
> 赞同：1
> 
> 时间：2012-08-06T10:57:57.443
> 
> 标签：php, sha1, hmac, hmacsha1

```
$signData = hash_hmac("sha1", 'GET\n1344250030\n/contacts.json', 
              base64_decode($this->api_secret));

$signData = base64_encode($signData); 
```

api_secret 的值为

```
LPq6ZD2JdyPnBvxf6p6h 
```

结果 $signData 的值为

> ZTYxM2NkYmNhZDJiZDUxZWUwMWIyNGRlZTlmYTc3MDliM2FiY2NhYQ==

但 $signData 的预期结果是

> QbOd8%2BOIzHMKrmEpf4G%2FZFWLAx8%3D

我应该将此预期结果用于 url 连接。

我在哪里做错了？帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:53:17.483

做了一个完整的java程序

```
package javaapplication1;

import java.net.URLEncoder;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;
import org.apache.commons.codec.binary.Base64;

public class JavaApplication1 {

    public static void main(String[] args) {
        try {
            System.out.println(signData("GET\n1344250030\n/contacts.json"));
        } catch (Exception ex) {
            Logger.getLogger(JavaApplication1.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    private static String signData(String data) throws Exception {
        Mac mac = Mac.getInstance("HmacSHA1");
        mac.init(new SecretKeySpec(Base64.decodeBase64("LPq6ZD2JdyPnBvxf6p6h"), "HmacSHA1"));
        String sig = new String(Base64.encodeBase64(mac.doFinal(data.getBytes())));
        return URLEncoder.encode(sig, "UTF-8");
    }
} 
```

注意到 URLEncoder，所以我将它添加到 PHP 中。还怀疑您的 URL 应该使用双引号，否则 \n 不起作用。这给出了这个代码：

```
<?php

$signData = hash_hmac("sha1", "GET\n1344250030\n/contacts.json", 
              base64_decode('LPq6ZD2JdyPnBvxf6p6h'), true);
$signData = base64_encode($signData);
echo urlencode($signData); 
```

两者都给出相同的结果，但不是您所期望的。

```
fH%2F0XJpooui3U2nyd%2FCD9YjRVGM%3D 
```

那么你确定你的输入是正确的吗？URL 和秘密？

# textmate - 在弹出窗口中运行测试

> ID：11826958
> 
> 赞同：0
> 
> 时间：2012-08-06T10:58:48.767
> 
> 标签：textmate, textmate2

在 TextMate 1 中，当我在测试中执行 cmd+R 时 - 它会打开一个弹出窗口。在 TextMate 2 中，它在页脚面板中显示正在运行的测试。

我怎样才能恢复弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:02:18.513

您可以在下面查看这些发行说明：

[http://tm2tips.tumblr.com/post/14373351819/8949-released](http://tm2tips.tumblr.com/post/14373351819/8949-released)（第一点）

来自 textmate 博客：

[http://wiki.macromates.com/FAQ/TextMate2ExpertPreferences](http://wiki.macromates.com/FAQ/TextMate2ExpertPreferences)

所以命令应该是

```
defaults write com.macromates.TextMate.preview htmlOutputPlacement bottom 
```

或者

```
defaults write com.macromates.TextMate.preview htmlOutputPlacement right 
```

取决于你想要的窗口。（默认值为“窗口”）。

# javascript - 是否可以使用 javascript 清除浏览器缓存？

> ID：11826963
> 
> 赞同：1
> 
> 时间：2012-08-06T10:59:04.040
> 
> 标签：javascript, caching

很多时候，当用户打开我们的网站或我们需要用户许可时，我们会清除用户浏览器缓存。但是我花了一些时间在互联网上找到任何关于通过 javaScript 清除缓存的文章或一些东西，但我没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:00:19.783

否 - JavaScript 无权执行这种操作系统级别的操作。这显然是只有用户才能调用的东西，而不是在他们不知情的情况下的第三方脚本。

如果您在缓存方面遇到问题，有一些方法可以强制重新加载，例如通过向 HREF/SRC 添加随机查询字符串。

# ios5 - 如何使用设备 iPad 版本 5.1.1 在 iOS 中内置应用内购买

> ID：11826971
> 
> 赞同：1
> 
> 时间：2012-08-06T10:59:20.967
> 
> 标签：ios5

我已经成功地使用 iOS 设备 5.1 版构建了项目应用内购买。

但在 iOS 设备版本 5.1.1 上它不起作用。它显示一条警告消息，指出该产品在应用商店中不可用。

我怎么解决这个问题？请给我解释一下。

谢谢。

# java-ee-6 - 带有 JdbcRealm 和 JndiObjectFactory 的 Apache Shiro 抛出 IllegalArgumentException

> ID：11826975
> 
> 赞同：3
> 
> 时间：2012-08-06T10:59:27.173
> 
> 标签：java-ee-6, shiro

我正在尝试在 GlassFish v3.1.2 应用程序服务器上的 JavaEE6 Web 应用程序中使用 Apache Shiro (v1.2)。

在 GlassFish 中，我设置了一个数据源 ( `jdbc/myds`)，我已经测试过它可以通过 JPA2 工作。

我想使用相同的数据源来验证使用 Shiro JDBC 领域的用户。

我在 shiro.ini 中有以下内容：

```
# DataSource config
ds                = org.apache.shiro.jndi.JndiObjectFactory 
ds.requiredType   = javax.sql.DataSource
ds.resourceName   = jdbc/myds

# JDBC realm config
jdbcRealm = org.apache.shiro.realm.jdbc.JdbcRealm
jdbcRealm.permissionsLookupEnabled = false
jdbcRealm.authenticationQuery = SELECT password FROM user_account WHERE email = ?
jdbcRealm.userRolesQuery = SELECT role_name FROM user_group_membership WHERE email = ?
jdbcRealm.dataSource = $ds 
```

当我部署应用程序时，我得到以下异常（总结）：

```
FINE: Encountered object reference '$ds'.  Looking up object with id 'ds'
FINEST: Applying property [dataSource] value [org.apache.shiro.jndi.JndiObjectFactory@2ca061] on object of type [org.apache.shiro.realm.jdbc.JdbcRealm]
SEVERE: Unable to start Filter: [Unable to set property 'dataSource' with value [$ds] on object of type org.apache.shiro.realm.jdbc.JdbcRealm.  If '$ds' is a reference to another (previously defined) object, prefix it with '$' to indicate that the referenced object should be used as the actual value.  For example, $$ds].
org.apache.shiro.config.ConfigurationException: Unable to set property 'dataSource' with value [$ds] on object of type org.apache.shiro.realm.jdbc.JdbcRealm.  If '$ds' is a reference to another (previously defined) object, prefix it with '$' to indicate that the referenced object should be used as the actual value.  For example, $$ds
at org.apache.shiro.config.ReflectionBuilder.applyProperty(ReflectionBuilder.java:373)
at org.apache.shiro.config.ReflectionBuilder.applySingleProperty(ReflectionBuilder.java:198)
at org.apache.shiro.config.ReflectionBuilder.applyProperty(ReflectionBuilder.java:159)
at org.apache.shiro.config.ReflectionBuilder.buildObjects(ReflectionBuilder.java:119)
...
...
Caused by: java.lang.IllegalArgumentException: Cannot invokeorg.apache.shiro.realm.jdbc.JdbcRealm.setDataSource on bean class 'class org.apache.shiro.realm.jdbc.JdbcRealm' - argument type mismatch - had objects of type "org.apache.shiro.jndi.JndiObjectFactory" but expected signature "javax.sql.DataSource"
at org.apache.commons.beanutils.PropertyUtilsBean.invokeMethod(PropertyUtilsBean.java:2235)
at org.apache.commons.beanutils.PropertyUtilsBean.setSimpleProperty(PropertyUtilsBean.java:2151)
at org.apache.commons.beanutils.PropertyUtilsBean.setNestedProperty(PropertyUtilsBean.java:1957)
... 
```

相反，如果我定义一个实际的 MySQL 数据源，它可以正常工作，例如

```
ds = com.mysql.jdbc.jdbc2.optional.MysqlDataSource 
ds.serverName = localhost
ds.user = root
ds.password = root
ds.databaseName = mydb 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:23:39.107

这看起来很可能是一个类路径问题。堆栈跟踪引用了在 shiro 1.1.0 中有意义的 ReflectionBuilder 的行号。但是，它们在 shiro 1.2.0 中没有意义。但是，由于 JndiObjectFactory 是 shiro 1.2.0 中的新功能，并且两个类都在 shiro-core 中，因此您的类路径中似乎有两个 jar。

您应该首先查看您的战争文件，确保两个 jar 都不在其中。如果是，您可以通过删除 1.1.0 版本来修复您的 war 文件。如果不是，我将开始查看您是否通过 glassfish 基础设施继承旧版本的 shiro。

# php - 使用 'rm -rf * .' 后 PHP 文件未执行 在 /www/ 上并解压新包

> ID：11826985
> 
> 赞同：0
> 
> 时间：2012-08-06T10:59:48.503
> 
> 标签：php, command-line, ssh, tar

首先想说我以前没有使用 SSH 命令的经验。出于安全原因，我们的新服务器不提供 FTP 或 cPanel。

我在服务器上成功安装了 magento，但遇到了一个问题，需要我删除数据库并删除 magento 文件。我`rm -rf * .`在 /var/www/ 目录上使用它来清除它。

然后我在我想要的目录中再次使用 magento.tar.gz 文件（？正确的术语？），`'tar -zxvf magento.tar.gz'`并且 php 文件没有执行。他们只是返回一个 500 内部服务器错误。

我上传了一个 phpinfo(); 文件来测试 php 是否仍在工作并且它执行得很好并告诉我它应该做什么。

我不确定为什么这些文件没有执行，但是在终端中，我上传的 phpinfo 文件显示为绿色，但 tar.gz 中的所有 php 文件都是黑色的？我不确定这是否在告诉我什么。

我是否删除了我应该`rm -rf *.`在 /var/www/ 文件夹中使用的东西，或者是 magento 提取的文件在终端中显示为黑色，而我手动上传的 php 文件显示为绿色告诉我一些事情？这次我没有正确解压它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:12:22.547

黑色与绿色文件名与文件权限有关。许多 httpd 实例设置为不提供文件，除非由 root 拥有，并具有对“apache”的组访问权限。

要准确找出服务器上的错误，您应该查看 Apache 错误日志（通常在 /var/logs/apache/ 中找到）以了解服务器给出错误的确切原因。

# javascript - 如何使用 Handlebars.js 创建条件行类？

> ID：11826997
> 
> 赞同：2
> 
> 时间：2012-08-06T11:00:29.330
> 
> 标签：javascript, html, handlebars.js

我有一个有效结构如下的布局

```
<ul class="row">
    <li>content</li>
    <li>content</li>
    <li>content</li>
    <li>content</li>
    <li>content</li>
    <li>content</li>
    <li>content</li>
</ul> 
```

我想要的是，对于每 5 个项目，将创建一个带有“行”类的新行，以便我的代码如下所示

```
<ul class="row">
    <li>content</li>
    <li>content</li>
    <li>content</li>
    <li>content</li>
<li>content</li>
</ul>
<ul class="row">
    <li>content</li>
    <li>content</li>
</ul> 
```

谁能建议如何使用车把助手来完成这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T09:16:41.170

您可以创建一个包装助手，将行数组拆分为所需数量的元素：

```
// attr : name of the attribute in the current context to be split, 
//        will be forwarded to the descendants
// count : number of elements in a group
// opts : parameter given by Handlebar, opts.fn is the block template
Handlebars.registerHelper('splitter', function (attr, count, opts) {
    var context, result, arr, i, zones, inject;

    context = this;
    arr = context[attr];
    zones = Math.ceil(arr.length / count);

    result="";
    for (i = 0; i < zones; i++) {
        inject = {};
        inject[attr] = arr.slice(i * count, (i + 1) * count);

        result += opts.fn(inject);
    }

    return result;
}); 
```

假设您的数据传递为`{ rows: [ {text: "Row 1"}, ... ] }`，模板可能如下所示

```
{{#splitter "rows" 5}}
    <ul class='row'>
        {{#each rows}}
        <li>{{text}}</li>
        {{/each}}
    </ul>
{{/splitter}} 
```

还有一个可以玩的小提琴[http://jsfiddle.net/HwJ6s/](http://jsfiddle.net/HwJ6s/)