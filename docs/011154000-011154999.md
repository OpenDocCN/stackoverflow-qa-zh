# StackOverflow 问答 11154000-11154999

# javascript - 将函数动态分配给 div JQuery

> ID：11154004
> 
> 赞同：0
> 
> 时间：2012-06-22T09:56:13.633
> 
> 标签：javascript, jquery, ruby-on-rails-3

我有这段代码，

```
<div id="event" style="display:none;"> <!-- initially hidden -->
    <div class="user_event my_background">
        <%= image_tag("events_pics/boom.png", :class=> 'event_pic_small') %>
        <h6 class="event_info">Event_1: Frame: 974</h6>
        <a class="btn btn-mini btn-danger pull-right " href="#"><i class="icon-remove" onclick="remove(this)"></i></a>
    </div>
</div> 
```

和jQuery中的这段代码：

```
function add_event(event){
    //ASSIGN DATA VALUES BEFORE
    $("#event_list_main").append($("#event").html());
} 
```

这似乎工作正常。问题是每次我“创建”一个 div 时，我都希望为该 div 分配一个删除功能。所以我可以删除 div 本身。这就是为什么我`onclick="remove(this)"`将“div”本身传递给函数的原因。问题是我的删除函数中的代码不起作用：

```
function remove(arg0){
    arg0.remove();
} 
```

这应该删除给定的 div，但它没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:05:09.427

您的 onclick 处理程序附加到 <i> 元素，但您想删除父 div。尝试这样的事情。

```
<div class="user_event">
    <i onclick="$(this).closest('.user_event').remove()">remove</i>
</div> 
```

使用最接近意味着无论 <i> 嵌套多深，它都会找到父 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:57:30.257

我认为你应该像`$(arg0).remove();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:57:53.243

试试这个：

```
$("#event_list_main").append($("#event").html()).click(function () {
    this.remove()
}); 
```

# jqgrid - jqgrid addrow 编辑行=假

> ID：11154005
> 
> 赞同：2
> 
> 时间：2012-06-22T09:56:16.390
> 
> 标签：jqgrid

这是我的代码，它通过按回车键在网格中添加一条线。所有行都处于添加模式editrow=true。

```
 jQuery("#energy").jqGrid('addRow', { position: "first" });
            jQuery("#energy").jqGrid('bindKeys', {
            "onEnter": function (rowid) {
                jQuery("#energy").jqGrid('addRow');
                    }
           }); 
```

添加行时需要指定 prametr editrow=false 什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:46:42.410

不幸的是，似乎总是将新行设置为编辑模式的[代码：`addRow`](https://github.com/tonytomov/jqGrid/blob/master/js/grid.inlinedit.js)

```
addRow : function ( p ) {
        ...
        if(p.useFormatter) {
            $("#"+$.jgrid.jqID(p.rowID)+
                              " .ui-inline-edit", 
                              "#"+$.jgrid.jqID($t.p.id)).click();
        } else {
            var opers = $t.p.prmNames,
            oper = opers.oper;
            p.addRowParams.extraparam[oper] = opers.addoper;
            $($t).jqGrid('editRow', p.rowID, p.addRowParams);
            $($t).jqGrid('setSelection', p.rowID);
        } 
```

但好消息是，您应该能够使用`saveRow`该行退出编辑模式。只需确保为新行传递一个唯一的行 ID，以便您能够在下一次调用中引用它：

```
 jQuery("#energy").jqGrid('addRow', {rowID: myNewRowID});
 jQuery("#energy").jqGrid('saveRow', myNewRowID); 
```

如果你有问题`saveRow`，你也可以试试`restoreRow`。

这有帮助吗？

# php - 推进保存：命名约定

> ID：11154006
> 
> 赞同：0
> 
> 时间：2012-06-22T09:56:17.033
> 
> 标签：php, propel

我在 Propel 中的变量大小写有问题

当前有效的代码：

```
$this->_variables = array('Alias' => 'aliasOne', 'LocationId' => 1);
$model = new Client();
$model->fromArray($this->_variables);
$model->save(); 
```

但是由于我的 API 输出的格式，我希望代码是

```
$array = array('alias' => 'aliasOne', 'location_id' => 1);
$model = new Client();
$model->fromArray($array);
$model->save(); 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:10:57.433

由于方法的第二个参数，它已经由 Propel 处理`fromArray()`：

```
$array = array('alias' => 'aliasOne', 'location_id' => 1);
$model = new Client();
$model->fromArray($array, BasePeer::TYPE_FIELDNAME);
$model->save(); 
```

在此处查看此常量的定义和其他常量：[https ://github.com/propelorm/Propel/blob/master/runtime/lib/util/BasePeer.php#L63](https://github.com/propelorm/Propel/blob/master/runtime/lib/util/BasePeer.php#L63)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:11:10.887

您可以`fromArray`在 Client 模型中使用映射数组创建代理来转换您的密钥，在您的`lib/model/om/BaseClient.php`：

```
public function myFromArray($arr, $keyType = BasePeer::TYPE_PHPNAME)
{
  $map = array(
    'alias'       => 'Alias',
    'location_id' => 'LocationId',
    // you can add more
  );

  $newArr = array();
  foreach ($arr as $key => $value)
  {
    // replace the key with the good one
    if (array_key_exists($key, $map))
    {
      $newArr[$map[$key]] = $value;
    }
    else
    {
      $newArr[$key] = $value;
    }
  }

  $this->fromArray($newArr, $keyType);
} 
```

# html - 服务器复制文件并将文本保存在单行上

> ID：11154009
> 
> 赞同：0
> 
> 时间：2012-06-22T09:56:23.987
> 
> 标签：html, windows, linux, ftp

我有一个 .html 文件，其中包含一些脚本。在 localhost 上工作正常，但是当我在服务器上复制它（使用 ftp）时，它会将所有文本复制到一行中，所以脚本当然不起作用。我怎样才能解决这个问题？

是windows->linux的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:50:05.907

在 Linux 上，`cat -A <file>`会将 UNIX 结束线显示为`$`，将 DOS 结束线显示为`^M`，将制表符显示为`^I`。它可以准确地向您显示缺少哪些字符。

```
$ cat -A file.html

<body>^M
Hello, world!^M
</body>^M 
```

您可以使用以下命令将 DOS 端线转换为 UNIX：

```
$ dos2unix file.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:59:40.757

这可能是 CRLF / LF 问题（由操作系统处理换行符的不同方式引起）。

看：

*   [\r 和 \n 有什么区别？](https://stackoverflow.com/questions/1279779/what-is-the-difference-between-r-and-n)
*   [http://en.wikipedia.org/wiki/Newline#Representations](http://en.wikipedia.org/wiki/Newline#Representations)

# c# - 向 Outlook Exchange 联系人电子邮件地址发送电子邮件

> ID：11154011
> 
> 赞同：4
> 
> 时间：2012-06-22T09:56:29.167
> 
> 标签：c#, email, outlook, addressbook

我从 Outlook 联系人中读取我的联系人，然后将联系人添加到，`MailMessage mail.To.Add("John Doe <John Doe>")`但我收到此错误：

> *指定的字符串不是电子邮件地址所需的格式。*

我该如何解决这个问题？当我从 Outlook 联系人中读取电子邮件地址的结果是这样的长字符串（*仅适用于 Exchange 帐户类型*）并且我获取最后一个 cn= 值： `/o=First Organization/ou=Exchange Administrative Group (FYDIBOHF23SPDLT)/cn=Recipients/cn=John Doe`

`jDoe@example.com`如何从 Exchange 帐户 ( ) 或其他发送电子邮件的方法中读取正确的电子邮件地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:34:08.280

如果您有[`ExchangeUser`](http://msdn.microsoft.com/en-us/library/ff866281.aspx)，则可以访问[`PrimarySmtpAddress`](http://msdn.microsoft.com/en-us/library/ff862991.aspx)Exchange 电子邮件的属性。那么以下内容应该适合您...

```
MailMessage mail = new MailMessage();
mail.To.Add(exchangeUser.PrimarySmtpAddress); 
```

# backbone.js - 在 MAMP 上运行的骨干样板，无法让路由器工作

> ID：11154014
> 
> 赞同：2
> 
> 时间：2012-06-22T09:56:41.570
> 
> 标签：backbone.js, backbone-routing

我目前正在使用主干样板并在我的 MAMP 服务器 localhost 上运行它。我似乎无法让路由器工作

```
require([
  // Global
  "app",

  // Libs
  "jquery",
  "backbone"
],

function(app, $, Backbone) {

  // Defining the application router, you can attach sub routers here.
  var Router = Backbone.Router.extend({
    routes: {
      "photo" : "getPhoto",
      "*other" : "index"
    },

    index: function() 
    {
        console.info('Index Function Working');
    },

    getPhoto: function()
    {
        console.log("You are trying to reach photo ");
    }

  });

  // Treat the jQuery ready function as the entry point to the application.
  // Inside this function, kick-off all initialization, everything up to this
  // point should be definitions.
  $(function() {
    // Define your master router on the application namespace and trigger all
    // navigation from this instance.
    app.router = new Router();
    console.info('Here');

    // Trigger the initial route and enable HTML5 History API support
    Backbone.history.start({ pushState: true });
  });

  // All navigation that is relative should be passed through the navigate
  // method, to be processed by the router. If the link has a `data-bypass`
  // attribute, bypass the delegation completely.
  $(document).on("click", "a:not([data-bypass])", function(evt) {
    // Get the anchor href and protocol
    var href = $(this).attr("href");
    var protocol = this.protocol + "//";
    // Ensure the protocol is not part of URL, meaning it's relative.
    if (href && href.slice(0, protocol.length) !== protocol &&
        href.indexOf("javascript:") !== 0) {
      // Stop the default event to ensure the link will not cause a page
      // refresh.
      evt.preventDefault();

      // `Backbone.history.navigate` is sufficient for all Routers and will
      // trigger the correct events. The Router's internal `navigate` method
      // calls this anyways.
      Backbone.history.navigate(href, true);
    }
  });

}); 
```

它只是不断地达到索引功能。

我已将其放入我的网址“ [http://localhost:8888/OutfitApp/#photo](http://localhost:8888/OutfitApp/#photo) *”和“ [http://localhost:8888/OutfitApp/photo](http://localhost:8888/OutfitApp/photo) ”

两者都不起作用。

我删除了

```
"*other" : "index" 
```

没有任何东西进入我的控制台。

我很困惑我错过了什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:57:33.653

从[文档](http://backbonejs.org/#History)：

> 如果您的应用程序不是从您的域的根 url / 提供的，请务必告诉 History 根的真正位置，作为一个选项：Backbone.history.start({pushState: true, root: "/public/search/ "})

这可能是问题吗？

在您的情况下，请尝试：

```
Backbone.history.start({pushState: true, root: "/OutfitApp/"}) 
```

# java - Windows下JNI和C入门

> ID：11154020
> 
> 赞同：4
> 
> 时间：2012-06-22T09:56:53.627
> 
> 标签：java, java-native-interface, jni4net, jnienv

我是 Java 学习新手，第一次想开始 JNI。我正在使用 Cygwin，我创建了一个扩展名为 .java (Helloworld.java) 的文件，如下所示：

```
class HelloWorld {
     private native void print();
     public static void main(String[] args) {
         new HelloWorld().print();
     }
     static {
         System.loadLibrary("HelloWorld");
     }
 } 
```

然后我通过命令行（）编译文件，然后通过命令`javac Helloworld.java`创建一个本机头文件`javah –jni Helloworld` 然后还通过创建一个C文件来实现：

```
#include <jni.h>
 #include <stdio.h>
 #include "HelloWorld.h"

 JNIEXPORT void JNICALL 
 Java_HelloWorld_print(JNIEnv *env, jobject obj)
 {
     printf("Hello World!\n");
     return;
 } 
```

在那之后我运行命令

```
 Gcc –wall –g Helloworld.c –o hello 
```

在 Cygwin 的命令提示行中给出消息

```
 helloworld.c:1:17: fatal error: jni.h: No such file or directory
 compilation terminated. 
```

如何运行以及设置执行文件的路径的程序是什么？请帮助我任何一个。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T21:41:46.513

我在 Windows 上使用了 MinGW。将“;C:\MinGW\bin\”添加到路径环境变量后，我可以使用以下命令从 Windows 命令提示符运行 gcc.exe。

jni.h 文件位于 java home 包含文件夹中。您可以使用 JAVA_HOME 环境变量或明确指定。

```
 gcc -c -I"C:\Program Files\Java\jdk1.6.0_26\include" -I"C:\Program Files\Java\jdk1.6.0_26\include\win32" "S:\Accessibility\tools\src\test\java\com\accessibility\HelloWorld.c" 
```

这创建了一个 HelloWorld.o 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:44:51.670

我猜你还没有将 jni 目录添加到包含目录列表中，详情请查看[http://social.msdn.microsoft.com/forums/is/vclanguage/thread/cd7f2d1d-f750-494c-a3b2-7d4186cfe51c](http://social.msdn.microsoft.com/forums/is/vclanguage/thread/cd7f2d1d-f750-494c-a3b2-7d4186cfe51c)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:44:58.633

假设你安装了一个 JDK，你需要通知 gcc JNI 的包含目录：

```
-I$JAVA_HOME/../include 
```

where`$JAVA_HOME`应该设置为 Java`bin`目录的父目录（`/usr/lib/jvm/java-6-openjdk-amd64/jre`例如在我的机器上）。如果没有设置，那么，如果你只是找到你的`jni.h`标题所在的文件夹，它会更简单。

我同意从 JNI 开始学习 Java 是一项艰巨的任务，但我尊重你的决定。如果你喜欢时尚书籍，我会推荐[Core Java Volume I](https://rads.stackoverflow.com/amzn/click/com/0132354764)和[Core Java Volume II](https://rads.stackoverflow.com/amzn/click/com/0132354799)。特别是在后者的末尾，您可以找到对本机方法的相当详尽的介绍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-08T05:32:15.800

如果 Visual Studio 成功安装在您的机器上，您可以使用**Visual Studio 开发人员命令提示符进行****编译**。

 **要生成**X86（32 位）**版本 dll，请使用“VS20XX x86 Native Tools Command Prompt”

要生成**X64（64 位）**版本的 dll，请使用“VS20XX x64 Native Tools Command Prompt”

**VS20XX中的**XX*是Visual Studio 2008 及以上版本。*

 *```
cl.exe /LD /EHsc /I "%JAVA_HOME%\include" /I "%JAVA_HOME%\include\win32" TestJNIString.c 
```

注意：确保在环境变量中设置了 JAVA_HOME 变量。***

# asp.net-mvc-3 - 将 MVC 3 应用程序发布到本地主机 IIS 7

> ID：11154021
> 
> 赞同：0
> 
> 时间：2012-06-22T09:56:57.170
> 
> 标签：asp.net-mvc-3, visual-studio-2010, sql-server-2008, iis-7

我进行了很多搜索，并且尝试过但无法在本地主机上发布 asp.net mvc 3 应用程序。我以前从未尝试过。我目前在 Visual Studio 的开发服务器上运行管理面板应用程序。在我的机器中，安装了以下内容：

*   IIS 7
*   Windows 7的
*   SQL 服务器 2008
*   MVC 3
*   ASP.NET 4

在 Visual Studio 中，我使用文件系统发布方法和 C:\inetpub\wwwroot\adminpanel 的目标路径发布应用程序。并复制了以下目录和文件。

**目录**

*   应用程序数据
*   垃圾桶
*   内容
*   脚本
*   意见
*   视觉工作室 2010

**文件**

*   环球网
*   包.xml
*   Web.xml

我不知道，但我认为缺少某些目录，例如我在 Visual Studio 解决方案资源管理器中看到的控制器、助手、模型、源。当我浏览到时`http://localhost/adminpanel`，它会在浏览器中显示所有目录和文件列表。

如何将应用程序发布到 IIS 并使用本地计算机的 SQL 服务器，以便我可以浏览到特定的控制器`http://localhost/User/UserManager`，就像我可以在 Visual Studio 的专用服务器中做的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:00:18.083

> 我不知道，但我认为某些目录丢失了，例如我在 Visual Studio 解决方案资源管理器中看到的控制器、助手、模型、源代码。

这是完全正常的。ASP.NET MVC 3 使用 ASP.NET 应用程序类型（与 ASP.NET WebSite 不同），这意味着它是预编译的，并且在部署时会删除所有源代码。仅部署视图、静态资源（例如 CSS、图像和脚本）以及包含已编译程序集的 bin 文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T21:05:49.143

基本上，我认为您的站点尚未被定义为 IIS 中的应用程序。您可以从 IIS 管理器中执行此操作。

但是，当您发布应用程序时，选择文件系统而不是浏览到提到的文件夹，在目标位置字段中单击文本框旁边的按钮并选择左侧的本地 IIS。现在您可以创建一个应用程序文件夹并直接发布到其中。

# android - Android VideoView 更新字幕

> ID：11154023
> 
> 赞同：2
> 
> 时间：2012-06-22T09:57:10.043
> 
> 标签：android, android-videoview, subtitle

我正在尝试使用 VideoView 制作一个视频播放器，该播放器支持在其上使用 TextView 的字幕。

我已经解析了字幕，但现在我需要一个在每次帧更改时运行的事件，以使用当前播放位置更新字幕。

我尝试创建一个线程，但我无法在那个单独的线程中更改我的 TextView。VideoView/MediaPlayer 上是否有一个事件运行我可以覆盖的每个帧更改以调用我的 updateSubtitle 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-14T22:39:16.607

从 Android 4.4 开始，您可以在 VideoView 本身中放置字幕： [https ://www.youtube.com/watch?v=hCRGc2PcmB8#t=130](https://www.youtube.com/watch?v=hCRGc2PcmB8#t=130)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:13:32.290

谈到您的第一个问题，每个视频帧都不会发生任何事件。话虽如此，有一些方法可以获取当前时间并将字幕同步到当前时间。下面的链接可能会有所帮助

*   [关于如何在 Android 中支持字幕的白皮书](http://www.ittiam.com/IttiamAdmin/Downloads/RenderingSubtitlesinAndroid201192914525892.pdf)

# python - 实现动态多时间线队列

> ID：11154025
> 
> 赞同：17
> 
> 时间：2012-06-22T09:57:21.117
> 
> 标签：python, performance, algorithm, data-structures, intervals

## 介绍

我想实现一个*动态多时间线队列*。这里的上下文是一般的**调度**。

## 什么是*时间线队列*？

这仍然很简单：它是一个任务时间线，其中每个事件都有其开始和结束时间。任务被分组为作业。这组任务需要保持其顺序，但可以作为一个整体及时移动。例如它可以表示为：

```
 --t1--   ---t2.1-----------t2.2-------
 '    '   '        '                  '
20    30  40       70                120 
```

我会将其实现为带有一些额外约束的[堆队列。](http://docs.python.org/library/heapq.html)Python[`sched`](http://docs.python.org/library/sched.html)模块在这个方向上有一些基本的方法。

## 定义*多时间线队列*

一个队列代表一个资源，一个任务需要一个资源。图形示例：

```
R1  --t1.1----- --t2.2-----      -----t1.3--    
            /  \                /
R2  --t2.1--     ------t1.2----- 
```

## 解释“*动态*”

当一项任务可以使用多种资源中的一种时，它变得很有趣。另一个限制是，可以在同一资源上运行的连续任务必须使用同一资源。

示例：如果（从上面）任务`t1.3`可以在`R1`or上运行`R2`，则队列应如下所示：

```
R1  --t1.1----- --t2.2-----      
            /  \                
R2  --t2.1--     ------t1.2----------t1.3-- 
```

## 功能（按优先顺序）

*   **FirstFreeSlot(duration, start)**`start` ：从有空闲时间的地方开始查找第一个空闲时隙`duration`（详细说明见文末）。
*   **通过考虑约束**（主要是：任务的正确顺序、同一资源上的连续任务）和使用`FirstFreeSlot`.
*   **在特定时间**放置工作并向后移动尾巴****
***   **删除**作业*   **重新计算**：删除后，测试是否可以更早地执行某些任务。**

 **## 关键问题

关键是：我如何**表示**这些信息以**有效**地提供功能？实施取决于我;-)

**更新**：要考虑的另一点：典型的区间结构关注“X点是什么？” 但在这种情况下`enqueue`，因此问题是“持续时间 D 的第一个空槽在哪里？” 重要得多。所以这个方向的段/区间树或其他东西可能不是正确的选择。

进一步用空闲时隙详细说明这一点：由于我们有多个资源和分组任务的限制，某些资源上可以有空闲时隙。简单示例：`t1.1`在 R1 上运行 40，然后`t1.2`在 R2 上运行。所以`[0, 40]`R2 上有一个空白区间，可以由下一个作业填充。

* * *

**更新 2 ：**[在另一个 SO question 中](https://stackoverflow.com/a/1983402/851737)有一个有趣的建议。如果有人可以将它移植到我的问题并表明它适用于这种情况（特别是针对多种资源进行详细说明），那么这可能是一个有效的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:36:56.843

```
class Task:
    name=''
    duration=0
    resources=list()

class Job:
    name=''
    tasks=list()

class Assignment:
    task=None
    resource=None
    time=None

class MultipleTimeline:
    assignments=list()
    def enqueue(self,job):
        pass
    def put(self,job):
        pass
    def delete(self,job):
        pass
    def recalculate(self):
        pass 
```

这是朝着您正在寻找的方向迈出的第一步，即用 Python 编写的数据模型吗？

更新：

特此我更有效的模型：

它基本上将所有任务放在一个按结束时间排序的链表中。

```
class Task:
    name=''
    duration=0    # the amount of work to be done
    resources=0   # bitmap that tells what resources this task uses
# the following variables are only used when the task is scheduled
    next=None     # the next scheduled task by endtime
    resource=None # the resource this task is scheduled
    gap=None      # the amount of time before the next scheduled task starts on this resource

class Job:
    id=0
    tasks=list() # the Task instances of this job in order 

class Resource:
    bitflag=0       # a bit flag which operates bitwisely with Task.resources
    firsttask=None  # the first Task instance that is scheduled on this resource
    gap=None        # the amount of time before the first Task starts

class MultipleTimeline:
    resources=list()
    def FirstFreeSlot():
            pass
    def enqueue(self,job):
        pass
    def put(self,job):
        pass
    def delete(self,job):
        pass
    def recalculate(self):
        pass 
```

由于更新`enqueue`，`put`我决定不使用树。由于`put`这会及时移动任务，我决定不使用绝对时间。

`FirstFreeSlot`不仅返回具有空闲槽的任务，还返回其他正在运行的任务及其结束时间。

`enqueue`工作原理如下：我们`FirstFreeSlot`在这里寻找空闲槽并安排任务。如果下一个任务有足够的空间，我们也可以安排它。如果没有：查看正在运行的其他任务是否有可用空间。如果不是：`FirstFreeSlot`使用本次参数运行并运行任务。

改进：如果`put`不经常使用并且`enqueue`从零开始完成，我们可以通过在每个包含其他正在运行的任务的任务中包含一个 dict() 来跟踪重叠的任务。然后，也很容易为每个资源保留一个 list()，其中包含按 endtime 排序的该资源的绝对时间的计划任务。仅包括那些比以前具有更大时间间隔的任务。现在我们可以更容易地找到一个空闲的插槽。

问题：调度的任务`put`需要在那个时候执行吗？如果是：如果 put 安排的另一个任务重叠怎么办？是否所有资源都以同样快的速度执行任务？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T01:17:18.580

让我们首先将自己限制在最简单的情况下：找到一个允许快速实现**FirstFreeSlot()**的合适数据结构。

空闲时隙存在于二维空间中：一维是开始时间 s，另一个是长度 d。**FirstFreeSlot(D)**有效地回答了以下查询：

最小秒：d >= D

如果我们将 s 和 d 视为笛卡尔空间 (d=x, s=y)，这意味着找到以垂直线为界的子平面中的最低点。[四叉树](http://en.wikipedia.org/wiki/Quadtree)，可能在每个节点中都有一些辅助信息（即所有叶子上的 min s），将有助于有效地回答这个查询。

对于**Enqueue()**面对资源限制，考虑为每个资源维护一个单独的四叉树。四叉树还可以回答如下查询

最小 s: s >= S & d >= D

（限制起始数据所必需的）以类似的方式：现在一个矩形（在左上角打开）被切断，我们在那个矩形中寻找 min s。

**Put()**和**Delete()**是四叉树的简单更新操作。

**Recalculate()**可以通过**Delete()** + **Put()**来实现。为了节省不必要的操作时间，定义充分（或者，理想情况下，充分+必要）条件来触发重新计算。[观察者](http://en.wikipedia.org/wiki/Observer_pattern)模式在这里可能会有所帮助，但请记住将重新调度的任务放入 FIFO 队列或按开始时间排序的优先级队列。（您希望在接管下一个任务之前完成重新安排当前任务。）

更笼统地说，我相信您知道大多数类型的调度问题，尤其是那些有资源限制的调度问题，至少是 NP 完全的。因此，在一般情况下，不要指望具有良好运行时间的算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T04:38:49.203

在花一些时间思考这个问题之后。我认为**分段树**可能更适合于对这个时间线队列进行建模。作业概念就像一个 LIST 数据结构。

我假设任务可以像这样建模（伪代码）。作业中任务的顺序可以通过 start_time 来保证。

```
class Task:
    name=''

    _seg_starttime=-1; 
    #this is the earliest time the Task can start in the segment tree, 
    #a lot cases this can be set to -1, which indicates its start after its predecessor,
    #this is determined by its predecessor in the segment tree.
    #if this is not equal -1, then means this task is specified to start at that time
    #whenever the predecessor changed this info need to be taken care of

    _job_starttime=0; 
    #this is the earliest time the Task can start in the job sequence, constrained by job definition

    _duration=0;      
    #this is the time the Task cost to run

    def get_segstarttime():
       if _seg_starttime == -1 :
           return PREDESSOR_NODE.get_segstarttime() + _duration
       return __seg_startime + _duration

    def get_jobstarttime():
       return PREVIOUS_JOB.get_endtime()

    def get_starttime():
       return max( get_segstarttime(), get_jobstarttime() ) 
```

*   **入队它只是将一个任务节点附加到段树中，注意 _seg_startime 设置为 -1 表示它在它的前任之后立即**启动****
***   **向树中插入一个段，该段由 start_time 和 duration 指示**。*******   **删除** 删除树中的段，必要时更新其后继节点（例如，如果删除的节点确实存在 _seg_start_time ）*   **重新计算**再次调用 get_starttime() 将直接得到它的最早开始时间。****

 ****示例（不考虑工作限制）

```
 t1.1( _segst = 10, du = 10 )
                      \
                      t2.2( _segst = -1, du = 10 ) meaning the st=10+10=20
                        \
                        t1.3 (_segst = -1, du = 10 ) meaning the st = 20+10 = 30 
```

如果我们做一个看跌期权：

```
 t1.1( _segst = 10, du = 10 )
                        \
                        t2.2( _segst = -1, du = 10 ) meaning the st=20+10=30
                        /  \
t2.3(_segst = 20, du = 10)  t1.3 (_segst = -1, du = 10 ) meaning the st = 30+10 = 30 
```

如果我们对原始场景执行删除 t1.1

```
 t2.2( _segst = 20, du = 10 ) 
                        \
                        t1.3 (_segst = -1, du = 10 ) meaning the st = 20+10 = 30 
```

每个资源都可以使用这个间隔树蛋的 1 个实例来表示。

从段树（时间线）的角度来看：

```
t1.1                      t3.1
  \                        / \
  t2.2                  t2.1  t1.2 
```

从工作角度：

```
t1.1 <- t1.2
t2.1 <- t2.2
t3.1 
```

t2.1 和 t2.2 使用链表连接，如下所述： t2.2 从段树中获取它的_sg_start_time，从链表中获取它的_job_start_time，比较这两个时间，那么它可以运行的实际最早时间可以是衍生的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T07:03:09.287

最后，我只为队列项使用了一个简单的列表，并使用内存中的 SQLite 数据库来存储空槽，因为使用 SQL 进行多维查询和更新非常有效。我只需要将字段*start*、*duration*和*index*存储在表中。******

# macos - mac osx占用内存迅速增加

> ID：11154026
> 
> 赞同：2
> 
> 时间：2012-06-22T09:57:29.857
> 
> 标签：macos

我注意到当我运行 Xcode 时，特别是开始运行 Interface builder。Mac osx 占用内存迅速增加。不仅是xcode，还有一些其他的应用程序运行一段时间后也会导致内存占用过多。甚至我的mac内存是4GB，有时我不得不使用工具来释放内存。在我开发的 mac 应用程序中发生这种情况的原因是什么以及如何避免这种情况？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:05:57.593

我刚刚在我的 Qt 应用程序中经历了类似（但可能不一样）的事情。

我正在读取和校验大量文件并且可用内存不断下降，尽管我的应用程序“真实内存”保持在稳定的 50 ish MB。然而，“非活动记忆”的数量不断攀升。

发生的事情是我读取的每个文件都被添加到磁盘缓存中。[磁盘缓存消耗的内存明显标记为“非活动”，根据苹果（ http://support.apple.com/kb/HT1342](http://support.apple.com/kb/HT1342) ） ，它应该与“空闲”内存一样可用，但这并没有停止当“免费”达到 50ish MB 以下时，OSX 开始交换。

在 C 中：

```
 #include "fnctl.h"
  fcntl(f.handle(),F_GLOBAL_NOCACHE,1); 
```

似乎通过绕过该文件描述符的磁盘缓存来解决这个问题。

释放非活动内存（如果这确实是您的问题）也可以使用“purge”命令从命令行完成。

# javascript - Swipeview - 显示下一个项目的预览/片段？

> ID：11154031
> 
> 赞同：11
> 
> 时间：2012-06-22T09:57:43.103
> 
> 标签：javascript, jquery, swipeview

我正在使用`Swipeview`( [http://cubiq.org/swipeview](http://cubiq.org/swipeview) ) 创建一个`carousel`在 iPhone 和 Android 上工作的触控功能。基础工作很好。

当我试图让它显示下一张幻灯片 pr 默认值的 25% 时，我的问题就开始了。这个想法是用户可以看到下一张幻灯片/图像的 1/4，然后应该让他们滑动图像以显示下一张幻灯片/图像。然后第一张图像消失，第二张图像变为 100% 可见，向左对齐，然后第三张图像可见 1/4。等等。

我尝试将`div.style.cssText`(in `swipeview.js`) 更改为宽度 of`75%`而不是 default `100%`。这适用于初始加载，但是当我滚动时，幻灯片 1 上可见的第二张图像的部分现在隐藏在幻灯片 2 上。

我做了一个小提琴来演示： http: [//jsfiddle.net/zeqjN/1/](http://jsfiddle.net/zeqjN/1/)（在Chrome中测试并尝试将图像拖到左侧）

关于如何修改`swipeview.js`以满足我的需求的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T21:14:02.633

您只能使用 css 来实现这一点。只需在项目上添加比例效果。

```
.scroller .scroll-item { float: left; -webkit-transform: scale3d(1.1,1.1,1.1) } 
```

查看：http: [//jsfiddle.net/frapporti/Xt9dM/](http://jsfiddle.net/frapporti/Xt9dM/)

# android - Android ScrollView 内部布局

> ID：11154034
> 
> 赞同：3
> 
> 时间：2012-06-22T09:57:58.510
> 
> 标签：android, layout, scrollview

我仍在学习 Android 编程，我有一个关于 ScrollView 的问题：以下是我想要实现的目标。我事先不知道我将在 ScrollView 中放置多少个缩略图，但我希望它们能够通过适当的填充和间距来适应高度。

例如：在手机上

```
+-scrollview-(horizontal)------------------------+
|                                                |
|  +=======+    +=======+    +=======+    +======|
|  |PIC1   |    |PIC4   |    |PIC7   |    |PIC10 |
|  +=======+    +=======+    +=======+    +======|
|                                                |
|  +=======+    +=======+    +=======+    +======|
|  |PIC2   |    |PIC5   |    |PIC8   |    |PIC11 |
|  +=======+    +=======+    +=======+    +======|
|                                                |
|  +=======+    +=======+    +=======+    +======|
|  |PIC3   |    |PIC6   |    |PIC9   |    |PIC12 |
|  +=======+    +=======+    +=======+    +======|
|                                                |
+------------------------------------------------+ 
```

在更宽的屏幕（平板电脑）上，将有足够的空间添加第四行。

```
+-scrollview-(horizontal)------------------------+
|                                                |
|  +=======+    +=======+    +=======+    +======|
|  |PIC1   |    |PIC5   |    |PIC9   |    |PIC13 |
|  +=======+    +=======+    +=======+    +======|
|                                                |
|  +=======+    +=======+    +=======+    +======|
|  |PIC2   |    |PIC6   |    |PIC10  |    |PIC14 |
|  +=======+    +=======+    +=======+    +======|
|                                                |
|  +=======+    +=======+    +=======+    +======|
|  |PIC3   |    |PIC7   |    |PIC11  |    |PIC15 |
|  +=======+    +=======+    +=======+    +======|
|                                                |
|  +=======+    +=======+    +=======+    +======|
|  |PIC4   |    |PIC8   |    |PIC12  |    |PIC16 |
|  +=======+    +=======+    +=======+    +======|
|                                                |
+------------------------------------------------+ 
```

关于如何做到这一点的任何建议？在某种程度上，它类似于 Android 应用程序列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:17:31.413

我建议你去网格视图链接在[这里..](http://www.mkyong.com/android/android-gridview-example/)

或者，如果您想像现在一样使用 Scrollview，只需在 ScrollView 中为父布局提供填充。使用特定缩略图的 android:margin 属性来根据需要保持空间。

希望这个解释对你有用..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:21:30.460

Android 提供了为不同类型的屏幕定义不同用户布局的工具。可用于显示此类活动。详细信息可以在这里找到 - [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:01:51.987

您可以为不同的屏幕尺寸定义不同的布局。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# activemq - 是否可以使用 ActiveMQ 进行发布/订阅消息传递

> ID：11154035
> 
> 赞同：3
> 
> 时间：2012-06-22T09:58:00.637
> 
> 标签：activemq, broker

我对activemq非常陌生。我试图使用 activemq 代理来订阅/发布消息。但至于缺乏经验，我不知道该怎么做，或者是否真的有可能做到。我用谷歌搜索了很多，但不幸的是没有适合这种功能的例子。所以我希望这里有人可以对此有所了解。这里的任何人都可以给我一些如何做到这一点的例子吗？或者可能是一些在线文档的链接。我已经尝试过 apache activemq 代理文档。但这没有帮助，或者可能是我没有那么多经验可以从中获得帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:04:15.527

您感兴趣的是使用主题完成的。您不一定在 ActiveMQ 站点上看到它的描述的原因是它是假定读者知道的基础事物。

如果您正在查看使用 Java 进行消息传递的介绍，最好的地方是[Oracle 的 JMS 教程](http://docs.oracle.com/javaee/1.4/tutorial/doc/JMS.html)。然后看一下`examples`ActiveMQ 安装目录中的代码。或者，[ActiveMQ in Action](http://www.manning.com/snyder/)是一本很棒的书，可以让您朝着正确的方向前进。

如果您使用的是 Java 以外的语言，ActiveMQ[支持](http://activemq.apache.org/stomp.html)[STOMP 协议](http://stomp.github.com/)，该协议有大量不同语言的[实现](http://stomp.github.com/implementations.html)。

希望有帮助。

# visual-c++ - 简单的单例模式 - Visual C++ 断言失败

> ID：11154038
> 
> 赞同：-1
> 
> 时间：2012-06-22T09:58:09.010
> 
> 标签：visual-c++, singleton, c++-cli, assert

我最近在 Visual C++ 2010 中编写了一个非常简单的记录器类，但是我遇到了一个问题。每次我运行程序时，都会出现调试断言失败。

```
Expression: _CrtIsValidHeapPointer(pUserData) 
```

这就是我的课程的样子（基本上它只是从[C++ Singleton design pattern](https://stackoverflow.com/questions/1008019/c-singleton-design-pattern)的答案中稍微修改了一下）：

```
class Logger
{
public:
    // Returns static instance of Logger.
    static Logger& getInstance()
    {
        static Logger logger; // This is where the assertion raises.
        return logger;
    }

    void logError(std::string errorText);

    // Destructor.
    ~Logger();

private:
    std::ofstream logFileStream;

    // The constructor is private to prevent class instantiating.
    Logger();
    // The copy constructor and '=' operator need to be disabled.
    Logger(Logger const&) { };
    Logger& operator=(Logger other) { };
}; 
```

构造函数是：

```
Logger::Logger()
    : logFileStream(Globals::logFileName, std::ios_base::trunc)
{
    // (Tries to open the file specified in Globals for (re)writing.)
} 
```

我发现我可以通过某种方式使用静态变量或方法来解决它，但我不明白这段代码有什么问题。有谁知道，问题出在哪里？

**编辑：**仅供参考，调用此代码时会引发故障（第一次）：

```
Logger::getInstance().logError("hello"); 
```

**编辑 2：**这是`logFileName`in的定义`Globals`：

```
static const std::string logFileName = "errorLog.log"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:07:42.203

我的猜测是，您是`getInstance()`从另一个全局变量的构造函数中调用的，并且遇到了臭名昭著的初始化顺序惨败-未指定是否`Globals::logFileName`在其他翻译单元中的任何全局变量之前已初始化。

一种解决方法是使用老式的 C 字符串，在调用任何全局构造函数之前将对其进行静态初始化：

```
static const char * logFileName = "errorLog.log"; 
```

另一种可能性是通过函数访问它：

```
static std::string logFileName() {return "errorLog.log";} 
```

我最喜欢的解决方案是完全删除全局实例，并传递对任何需要它的引用；但有些人可能会觉得这相当乏味，特别是如果您已经有大量使用全局的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T21:28:51.570

C++/CLI 不是标准的 C++，其规则略有不同。您是否在使用 C++/CLI 托管代码？（/clr 编译器选项？）当将 C++（非托管）代码与 C++/CLI（托管）代码混合时，这看起来是一个常见问题。它与程序初始化和程序退出时托管和非托管构造和销毁的方式有关。删除析构函数对我有用 - 你能在你的 Logger 类中这样做吗？

有关更多详细信息和可能的解决方法：

[http://www.codeproject.com/Articles/442784/Best-gotchas-of-Cplusplus-CLI](http://www.codeproject.com/Articles/442784/Best-gotchas-of-Cplusplus-CLI)

[http://social.msdn.microsoft.com/Forums/vstudio/en-US/fa0e9340-619a-4b07-a86b-894358d415f6/crtisvalidheappointer-fails-on-globally-created-object-within-a-static-llibrary?论坛=vcgeneral](http://social.msdn.microsoft.com/Forums/vstudio/en-US/fa0e9340-619a-4b07-a86b-894358d415f6/crtisvalidheappointer-fails-on-globally-created-object-within-a-static-llibrary?forum=vcgeneral)

[http://forums.codeguru.com/showthread.php?534537-Memory-leaks-when-mixing-managed-amp-native-code&p=2105565](http://forums.codeguru.com/showthread.php?534537-Memory-leaks-when-mixing-managed-amp-native-code&p=2105565)

# linux - 将 lsof 退出代码重定向到变量中

> ID：11154039
> 
> 赞同：5
> 
> 时间：2012-06-22T09:58:09.327
> 
> 标签：linux, bash, lsof

我正在尝试测试文件是否打开，然后使用退出代码执行某些操作。目前这样做是这样的：

```
 FILE=/usr/local/test.sh
   lsof "$FILE" | grep -q COMMAND &>/dev/null
   completed=$? 
```

有什么方法可以将退出代码直接推送到局部变量中，而不是将输出重定向到 /dev/null 并捕获“$？” 多变的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:06:54.733

好吧，你可以这样做：

```
lsof "$FILE" | grep -q COMMAND; completed=$? 
```

不需要重定向任何东西，因为 grep -q 无论如何都是安静的。如果您想在 grep 成功后执行某些操作，只需使用 && 运算符。在这种情况下存储退出状态可能是不必要的。

```
lsof "$FILE" | grep -q COMMAND && echo 'Command was found!' 
```

# c# - 在控制台应用程序上假退出而不关闭它

> ID：11154040
> 
> 赞同：0
> 
> 时间：2012-06-22T09:58:09.050
> 
> 标签：c#, console-application, application-shutdown

早上好。
这是一个奇怪的问题，我知道，但请耐心等待！:-)

**场景**
几年前，我制作了一个简单的 C# 控制台应用程序（称为 MyApp，myapp.exe），它为大型 COBOL 应用程序（称为 CblApp）做了一些工作。
这个应用程序通常读取一些文件，执行请求的工作（如调用 Web 服务等）并写入一些输出文件。
与 CblApp 的交互以这种方式工作：

*   CblApp 调用 myapp.exe，例如 myapp.exe -i:readinputfilefile.xml -w:writeresults.xml
*   CblApp 自己阻塞，直到 myapp.exe 关闭（同步方式）
*   当 myapp.exe 完成并自行关闭时，CblApp 读取结果文件

MyApp 是基于插件的，现在它是一个拥有 40 个插件、日志记录、互联网连接检查等的怪物……；每次从头开始加载它需要一段时间，所以我创建了一个新版本，它可以作为一个带有托盘图标的单一应用程序。
很好，但是 CblApp 不能使用它：CblApp 不能改变他与 myapp.exe 交互的方式。
**问题**
现在的问题是：我可以向 CblApp 模拟 myapp.exe 在没有真正执行的情况下关闭吗？
现在我写了一个假的 myapp.exe 来调用单一的 istance 应用程序，等到工作完成，然后关闭自己，但我不喜欢这个解决方案。
希望有人能理解这个纠结的问题。:-)
谢谢！
南多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:03:00.017

您可以考虑使用 Windows 服务而不是控制台应用程序。

该服务可以启动一次并始终在后台运行，因此您无需在每次调用时初始化所有内容。要与 Windows 服务通信，您可以使用文件、套接字或数据库，只要满足您的需要。

# c# - 包含单个类的程序集是否矫枉过正？

> ID：11154041
> 
> 赞同：4
> 
> 时间：2012-06-22T09:58:17.577
> 
> 标签：c#, .net-assembly, organization

我正在编写一个应用程序来承载一系列插件。这些插件通常使用两个库`.Common`，`.UI`其中包含插件需要实现的接口等。

我现在正在添加插件受许可的功能。我已经修改了我的主机应用程序，使其只加载定义接口实例 () 的插件`ILicenseInfoProvider`并通过 MEF 导出它。那一点没问题。

我们有一个选定的许可代码提供商，他们的许可系统涉及到库的使用。现在，我不想*强*​​制每个插件都通过该系统获得许可，并且通过扩展，需要引用该系统的程序集。所以，我打算将引用第三方库的代码放在它自己的程序集中（类似于`.Licensing.Vendor`）。这样，插件可以简单地添加对该程序集的引用，并包含一个看起来有点像这样的类：

```
[Export(typeof(ILicenseInfoProvider))]
class MyAssemblyLicenseInfoProvider : BaseVendorLicenseInfoProvider
{ 
    public MyAssemblyLicenseInfoProvider() : base("My Assembly's Product Name")
} 
```

我对这种设置相当满意，除了一件琐碎的事情 -`.Licensing.Vendor`程序集将只包含一个类，它`BaseVendorLicenseInfoProvider`与正在使用的特定许可系统有关。

所以，毕竟，我的问题很简单：

将该类放在它自己的程序集中似乎有点矫枉过正，还是不强制所有插件保存对第三方库的引用的好处是值得的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:04:39.033

目前，该程序集有一个合适的目的 - 一个公开可见的程序集，供第三方提供通过许可进行交互的手段。对我来说似乎完全合理：

*   即使目前只有一个类，未来可能还会有更多
*   它是公开可见的，因此您只想提供必要的内容
*   它封装了合理级别的责任，即许可，而不强制执行特定的实现

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:00:23.553

我投反对票，这不是矫枉过正，有些插件可能不需要许可证，有些可能需要..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:06:09.083

It depends on what you are trying to achieve. Assemblies are a way of *physically* separating code whereas namespaces are a way of *logically* separating code.

Given that there can be a slight performance hit of loading too many assemblies (by which I mean a significant number, not just a few) then I suppose you could consider if it is possible to group as much as you can into one assembly but separate them by namespaces. But if you feel that it really does make sense to keep `BaseVendorLicenseInfoProvider` completely separate from everything else then I also do not see that as an issue.

At the end of the day it is all about what *you* feel is right, everyone has their own opinion of course but as long as what you have works for you then I don't see a problem.

# c++ - unique_ptr 的取消引用运算符在 Eclipse 中不起作用

> ID：11154048
> 
> 赞同：7
> 
> 时间：2012-06-22T09:58:47.653
> 
> 标签：c++, eclipse, c++11, eclipse-cdt, unique-ptr

按照本文中的步骤进行操作[后](https://stackoverflow.com/questions/9131763/eclipse-cdt-c11-c0x-support)，我设法让 Eclipse (Indigo) 识别`unique_ptr`（以及其他 C++11 新内容）。问题是Eclipse 似乎不支持`operator->`for 。`unique_ptr`这里有一个例子：

```
class Foo { void bar() { /* ... */ } };

std::unique_ptr<Foo> foo;
(*foo).bar(); // 1
foo->bar();   // 2 
```

案例`1`按预期工作：没有错误并且自动完成工作。但是，对于 case `2`，Eclipse 会将该语句标记为错误（“方法 'bar' 无法解析”），并且自动完成 from`foo->`不起作用。

最有趣的是，我对`std::shared_ptr`. 它只发生在`std::unique_ptr`.

有没有人遇到过同样的问题？有谁知道修复它的方法？

**编辑：**只是为了澄清目的，编译过程对于上面显示的代码片段来说很好。所以，问题不在于编译器本身，而在于 Eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:59:24.117

我终于在 CDT 中找到了一个[错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=374993)，描述了我遇到的同样的问题。到目前为止，还没有真正解决该问题，但该错误报告中解释了一种解决方法：

> 是的，GCC 4.5 是最新的 GCC 版本，其库头文件可以被 CDT 准确索引。未能索引 4.6 标头的主要原因是 CDT 缺乏对 4.6 标头中广泛使用的“constexpr”和“nullptr”的支持（顺便说一句，有没有可能为 Juno 实现？）。
> 
> 我通过在我的系统上安装 GCC 4.5 和 4.6 并在实际使用 4.6 进行编译时将 CDT 指向 4.5 的标头（通过在 Discovery Options 中将编译器调用命令设置为“g++-4.5”）来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:41:36.747

此问题最近已在 cdt 8.1.1 中修复。只需去**帮助->检查更新**，它将被下载并安装。我已经测试了 unique_ptr 并且它被正确索引。

# java - 套接字数据似乎没有通过客户端

> ID：11154055
> 
> 赞同：4
> 
> 时间：2012-06-22T09:59:19.993
> 
> 标签：java, sockets

我已经编写了一些服务器端套接字处理代码，我担心我的数据包可能并不总是返回到客户端。我正在记录我的所有事件，并且在我的日志文件中它说我正在发送信息。但是客户端也在记录事件，并且在他们的日志中他们说他们没有收到任何东西。

我发送数据的代码如下：

```
public void write(Packet packet) {
    String data = packet.serialize();
    log("Send=[" + data + "]", "Write"); // log to file

    try {
        _writer.write(data);
        _writer.flush();
    } catch (Exception ex) {
        log(ex, "write");
    }
} 
```

每个套接字都是在一个新线程上创建的，我立即像这样创建我的作者和读者（在公共运行方法中）：

```
// _sockt is a Java Socket object
_writer = new BufferedWriter(new OutputStreamWriter(_socket
                    .getOutputStream()));
            _reader = new SocketReader(_socket); 
```

SocketReader 只是我为侦听响应而创建的一个包装类，它有一个公共读取方法，如下所示：

```
public String read() throws IOException, SocketTimeoutException {

    _socket.setSoTimeout(_timeOut);

    if(_reader == null)
        _reader = new BufferedReader(new InputStreamReader(_socket.getInputStream()));

            // read from the stream
    return new PacketDataInputStream(_reader).read();
} 
```

PacketDataInputStream 包装类：

```
BufferedReader _reader = null;

public PacketDataInputStream(BufferedReader reader)
{
    _reader = reader;
}

public String read() throws IOException, SocketException {

    StringBuilder builder = new StringBuilder();
    int c = 0;

    while((c = _reader.read()) != -1)
    {
        char ch = (char)c;

        builder.append(ch);

        if(ch == PacketConstants.ETX)
            break;
    }

    if(builder.length() > 0)
        return builder.toString();
    else
        return null;

} 
```

我认为创建实际套接字侦听器对象的方式非常标准：

```
InetAddress address = InetAddress.getByName(IP);
        server = new ServerSocket( port, 0, address);

                    // My own manager class to handle all the sockets connected 
        WebSocketManager manager = new WebSocketManager(this);

        Socket connection = null;

        while(bContinue)
        {
            connection = server.accept();

            if(bContinue) {
                                    // assign the socket to a new thread and start
                                    // that thread
                manager.newSocket(connection);  
            } else {
                connection.close();
            }
        } 
```

*   有可能我使用了错误的对象来发回数据。
*   我什至应该使用缓冲写入器和读取器吗？我曾认为这些是最好的方法，但现在我不太确定。

需要注意的是，这种情况并非一直发生，只是偶尔发生。可能是客户端代码有错误，但我需要确保在返回它们之前我做得正确。

此代码在*Linux Ubuntu*服务器上运行。记录发生在一个文本文件中，没有什么特别的。我的日志文件显示**Send=""**数据返回客户端并且没有异常，因此看起来好像 .write 和 .flush() 有效？套接字连接是持久的，仅由客户端和/或网络问题关闭。

**更新-----客户端代码------：**

我确实设法获得了一些客户端代码，以了解他们如何处理数据的发送和接收（以防万一他们更明显）。客户端实际上是通过**Android 设备**连接到该服务器（如果有帮助的话）。

套接字的创建

```
static final int BUFFER_SIZE = 20000;       // Maximum packet size

java.net.InetAddress server = java.net.InetAddress.getByName(url);
socket = new Socket(server, port);
// Set socket options:
socket.setReceiveBufferSize(BUFFER_SIZE);
socket.setSendBufferSize(BUFFER_SIZE);
socket.setKeepAlive(true);
socket.setTcpNoDelay(true); 
```

发送：

```
try {
            // Send the packet:
        OutputStream stream = socket.getOutputStream();
        stream.write(p.getByteArray ());
        stream.flush();

            // Update the time:
        lastPacketSendTime = new Date ();
    } catch (IOException e) {
        setError("Error sending packet (" + e.getMessage() + ")", ERROR_IO);
        return false;
    } 
```

接收：

```
socket.setSoTimeout(timeout);
            // Get the reader:
        inputStream = socket.getInputStream();

     while (true) {
                    // Get the next character:
                int value = inputStream.read();
                    // Check for -1, indicating that the socket is closed:
                if (value == -1) {
                        // The socket is closed remotely, so close it locally as well:
                    disconnect();
                    inputStream = null;
                    return null;
                }
                                // ... and a bunch of other stuff to handle the actual data

                        } 
```

**编辑 11 月 14 日：** 这实际上被证明是一个更大的问题。客户端日志和服务器日志似乎都在发送。但有时数据似乎没有通过，或者如果确实如此，它有时会延迟 10 - 30 - 60 秒。

如果需要，我可以提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:08:21.127

我不确定这是否对您有用..但我给你我用于客户端服务器通信的代码..

**客户端：**

```
public class ClientWala {

    public static void main(String[] args) throws Exception{

        Boolean b = true;
    Socket s = new Socket("127.0.0.1", 4444);

    System.out.println("connected: "+s.isConnected());

    OutputStream output = s.getOutputStream();
    PrintWriter pw = new PrintWriter(output,true);

    // to write data to server
    while(b){

        if (!b){

             System.exit(0);
        }

        else {
            pw.write(new Scanner(System.in).nextLine());
        }
    }

    // to read data from server
    InputStream input   = s.getInputStream();
    InputStreamReader isr = new InputStreamReader(input);
    BufferedReader br = new BufferedReader(isr);
    String data = null;

    while ((data = br.readLine())!=null){

        // Print it using sysout, or do whatever you want with the incoming data from server

    }

    }
} 
```

**服务器代码：**

```
import java.io.*
import java.net.*;

public class ServerTest {

    ServerSocket s;

    public void go() {

        try {
            s = new ServerSocket(44457);

            while (true) {

                Socket incoming = s.accept();
                Thread t = new Thread(new MyCon(incoming));
                t.start();
            }
        } catch (IOException e) {

            e.printStackTrace();
        }

    }

    class MyCon implements Runnable {

        Socket incoming;

        public MyCon(Socket incoming) {

            this.incoming = incoming;
        }

        @Override
        public void run() {

            try {
                PrintWriter pw = new PrintWriter(incoming.getOutputStream(),
                        true);
                InputStreamReader isr = new InputStreamReader(
                        incoming.getInputStream());
                BufferedReader br = new BufferedReader(isr);
                String inp = null;

                boolean isDone = true;

                System.out.println("TYPE : BYE");
                System.out.println();
                while (isDone && ((inp = br.readLine()) != null)) {

                    System.out.println(inp);
                    if (inp.trim().equals("BYE")) {
                        System.out
                                .println("THANKS FOR CONNECTING...Bye for now");
                        isDone = false;
                        s.close();
                    }

                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                try {
                    s.close();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                e.printStackTrace();
            }

        }

    }

    public static void main(String[] args) {

        new ServerTest().go();

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:49:07.737

当您使用 BufferedReaders 和 BufferedWriters 时，事情会被缓冲。直接使用输入和输出流怎么样。另外，编写器是基于字符的，我不知道您是否需要发送二进制数据，但如果是这样，编写器就会出现问题。

# javascript - Visual Studio IIS 工作正常，但托管在 IIS 7 脚本中时得到错误的 URL？

> ID：11154056
> 
> 赞同：4
> 
> 时间：2012-06-22T09:59:22.503
> 
> 标签：javascript, asp.net-mvc, reference, include

**你好，**

我有一个 ASP.NET MVC 站点，我在 MasterPage 中使用以下链接

```
<script type="text/javascript" src="../../../Scripts/jquery-1.4.4.min.js"></script>
    <script type="text/javascript" src="../../../Scripts/jquery-ui-1.8.11.custom.min.js"></script>
    <script type="text/javascript" src="../../../Scripts/jquery.cascadingDropDown.js"></script>
    <script type="text/javascript" src="../../../Scripts/jquery.maskedinput-1.2.2.js"></script> 
```

从 Visual Studio 2010 中的内置 IIS 和主机 (IIS7) 运行时，这可以正常工作。但是当在我自己的 IIS7 下的 Default Web Site \ MySite 部署它时，脚本将获得如下路径：

```
http://localhost/Scripts/jquery.cascadingDropDown.js 
```

代替 ：

```
http://localhost/myPage/Scripts/jquery.cascadingDropDown.js 
```

为什么这在 VS IIS 和我的主机 IIS 中有效，但在我的本地计算机 IIS 上无效？

除此之外，网页运行良好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T10:03:18.410

我在 ASP.NET MVC 中重复 2 条绝对基本的规则：

1.  **永远不要像以前那样对 url 进行硬编码**。

2.  **在 ASP.NET MVC 应用程序中处理 url 时始终使用 Url 助手。**

我已经在无数类似的问题中重复了无数次，但我仍然看到人们进行硬编码。

因此，如果您使用的是 Razor：

```
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-ui-1.8.11.custom.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.cascadingDropDown.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.maskedinput-1.2.2.js")"></script> 
```

如果您使用的是 WebForms 视图引擎：

```
<script type="text/javascript" src="<%= Url.Content("~/Scripts/jquery-1.4.4.min.js") %>"></script>
<script type="text/javascript" src="<%= Url.Content("~/Scripts/jquery-ui-1.8.11.custom.min.js") %>"></script>
<script type="text/javascript" src="<%= Url.Content("~/Scripts/jquery.cascadingDropDown.js") %>"></script>
<script type="text/javascript" src="<%= Url.Content("~/Scripts/jquery.maskedinput-1.2.2.js") %>"></script> 
```

嘿，如果您使用的是 ASP.NET MVC 4 (Razor 2.0)，有一个巧妙的技巧：

```
<script type="text/javascript" src="~/Scripts/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="~/Scripts/jquery-ui-1.8.11.custom.min.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.cascadingDropDown.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.maskedinput-1.2.2.js"></script> 
```

注意`~/`? WebPages 2.0 会在运行时自动`Url.Content`在其上应用以生成正确的 url。

# java - 使用eclipse连接mysql和java

> ID：11154065
> 
> 赞同：1
> 
> 时间：2012-06-22T10:00:08.293
> 
> 标签：java, mysql, eclipse, database-connection

我可以通过这些语句在 java 应用程序中使用 eclipse 将 mysql 与 java 连接

```
String unicode = "?useUnicode=yes&characterEncoding=UTF-8";
Class.forName("com.mysql.jdbc.Driver");
            con = (Connection) DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/ams-competation" + unicode,
                    username, password); 
```

而且效果很好

但我的问题是当我尝试使用服务器应用程序连接到 mysql 时出现此异常

`java.lang.ClassNotFoundException: com.mysql.jdbc.Driver` 我在做什么错？谢谢大家

# 编辑

我已经添加`mysql-connector`了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:02:36.903

我认为您的 Web 项目中没有包含 mysql 驱动器 jar。

将 mysql-connector-java .. jar 文件放在您的 Web 项目 lib 文件夹中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:02:28.200

为此，您需要在类路径中添加 mysql-connector jar。

这是因为eclipse找不到你指定的jar文件。

因此将jar文件放在服务器的lib目录中

另一种方法是将 jar 文件放在**/WEB-INF/lib**中，eclipse 本身会注意到它并获取它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:04:25.543

您是否将 MySQL 驱动程序添加到服务器？

这取决于需要添加jar文件的应用服务器：

*   阿帕奇雄猫： `$CATALINA_HOME/common/lib`
*   GlassFish 服务器：`GLASS_FISH_INSTALL_DIR\lib`

或者将其添加到`WEB-INF/lib`您的 Web 应用程序的文件夹中

尝试添加`mysql-connector-java-5.1.20-bin.jar`文件（可从：[http](http://dev.mysql.com/downloads/connector/j/) ://dev.mysql.com/downloads/connector/j/ 下载），然后重新启动服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:02:29.543

将 Connector/J jar 文件添加到服务器的类路径（或 lib 文件夹）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T10:04:25.657

将我的 sql 连接 jar 文件添加到您的项目中。它的名称类似于“mysql-connector-java-5.1.13-bin.jar”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-04T11:07:29.353

通过以下代码行将连接器/J 8.0.11 与 Eclipse 氧气连接。

```
 Class.forName("com.mysql.cj.jdbc.Driver");
           conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/testing?autoReconnect=true&useSSL=false", "AF", "birru123");

        Statement st = conn.createStatement(); 
```

# oracle - SSIS 和 Oracle 错误代码：0x80040E4D

> ID：11154070
> 
> 赞同：1
> 
> 时间：2012-06-22T10:00:25.437
> 
> 标签：oracle, ssis

我总是收到这个错误：0x80040E4D。无效的用户名/密码; 登录被拒绝。我已经在包中设置了具有 EncryptSensitiveWithPassword 保护级别的用户名和密码。我试图将包放入 SSIS 包商店并创建了一个配置文件，但一切都没用。

我应该有一点帮助，拜托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:18:14.530

EncryptSensitiveWithPassword 是保存包的加密数据（如 oracle 的用户名和密码）的选项，因此如果有人尝试在不提供密码的情况下执行包，包执行将失败。

我认为您的配置文件有问题，可能没有从中加载信息敏感信息。

# python - Firefox WebDriver 的实例不是使用 selenium python 绑定创建的

> ID：11154077
> 
> 赞同：4
> 
> 时间：2012-06-22T10:01:27.410
> 
> 标签：python, firefox, selenium, webdriver

我安装了 selenium-python 绑定并尝试创建一个 Firefox Web 驱动程序实例，如下所示

```
>>> from selenium import webdriver
>>> driver = webdriver.Firefox() 
```

我不知道这里出了什么问题并显示以下错误

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/firefox/webdriver.py", line 51, in __init__
    self.binary, timeout),
  File "/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/firefox/extension_connection.py", line 47, in __init__
    self.binary.launch_browser(self.profile)
  File "/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/firefox/firefox_binary.py", line 44, in launch_browser
    self._wait_until_connectable()
  File "/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/firefox/firefox_binary.py", line 81, in _wait_until_connectable
    self._get_firefox_output())
selenium.common.exceptions.WebDriverException: Message: 'The browser appears to have exited before we could connect. The output was: Error: cannot open display: :1100\n' 
```

任何人都可以让我知道如何解决这个问题............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:17:28.700

错误说“无法打开显示：：1100”。你是在远程终端上运行它吗？确保您可以在提示符下键入“firefox”并打开浏览器（这就是 Webdriver 所做的 - 在您的系统上打开 Firefox，然后尝试连接到它）。如果您在远程系统上运行它，请在远程连接到 X 显示器时进行网络搜索。

# android - 绘制图形的水平滚动视图

> ID：11154079
> 
> 赞同：0
> 
> 时间：2012-06-22T10:01:33.550
> 
> 标签：android

我正在通过从数据库中获取的值创建一个图表。所以我的值每次都可以改变。它没有安装在屏幕上，它正在屏幕外。你能告诉我如何为此创建水平滚动视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:50:48.003

All these TextView and Buttons are under Single Horizontal Scroll View..try this way..

```
<HorizontalScrollView
      android:layout_width="wrap_content"
      android:layout_height="wrap_content">
         <LinearLayout
           android:orientation="vertical"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content">
             <TextView
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:text="Inside 1st HorizontalScrollView" />
             <Button
               android:text="Button A1"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"/>
             <Button
               android:text="Button A2"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"/>
         </LinearLayout>
    </HorizontalScrollView> 
```

# php - mod_rewrite 如果为空则忽略变量

> ID：11154081
> 
> 赞同：0
> 
> 时间：2012-06-22T10:01:36.513
> 
> 标签：php, .htaccess, mod-rewrite

好的，所以我有一个按类别列出产品的项目，但也列出了所有产品。我为它创建了一个分页，效果很好。我设置了 mod_rewrite 来处理类别分页，但我无法为所有产品设置它。工作的是www.domain.com/catalogue/catid/catname/pagenumber，我也想制作www.domain.com/catalogue/pagenumber，但是mod rewrite在这里遇到了问题。

```
 RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)/?([^/]*)/?([^/]*)/?([^/]*)$ index.php?p=$1&cid=$2&cname=$3&page=$4 [L] 
```

当我尝试调用第二个链接时，他将该页码视为 cid。所以我想设置 mod rewrite 来读取需要的内容，在这种情况下忽略 cid 和 cname。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:05:05.933

我想给你一个替代这个..

而不是使用正则表达式，你似乎仍然有一点问题......有一个更简单的方法。

如果您将*所有内容*重定向到 index.php，则没有例外。然后在索引 PHP 中，您可以使用 $_SERVER['REQUEST_URI'] 读取当前 url，并且使用 ' 完成所有这些处理变得非常容易`explode('/', $url);`..

这是一种更自然的路由方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:09:19.150

在 mod_rewrite 中没有超可靠的方法可以做到这一点。

最可靠的方法是在 PHP 中进行检查。

主要有两种方法：

*   正如 Evert 提到的那样，将所有内容重定向到相关页面并从那里破译 url，这是大多数人所做的

*   第二，检测您收到的 $_GET 变量的数量并判断页面应该如何响应它在 PHP 中获得的内容。

你问的不是很直接，在正则表达式中也不是很快，所以我建议把这个子句放在 PHP 上，而不是试图让正则表达式为你做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T16:05:19.317

为什么不使用两个规则，如果你确定你永远不会得到这样的链接`catalogue/catid/pagenumber`？

```
RewriteRule ^([^/]*)/([^/]*)$ index.php?p=$1&page=$2 [L]
RewriteRule ^([^/]*)/([^/]*)/([^/]*)/([^/]*)$ index.php?p=$1&cid=$2&cname=$3&page=$4 [L] 
```

# android - 在 Android 中重复播放音频

> ID：11154083
> 
> 赞同：7
> 
> 时间：2012-06-22T10:01:43.207
> 
> 标签：android, android-mediaplayer

我想重复播放一首音乐，直到用户按下切换按钮关闭..

我无法弄清楚如何做到这一点，请帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T10:45:18.360

采用

```
MediaPlayer.setLooping(true); 
```

用于使用 MediaPlayer 重复声音。您可以在[setLooping中找到有关它的更多信息](http://developer.android.com/reference/android/media/MediaPlayer.html)

# functional-programming - Scheme中的树数据结构算法？

> ID：11154089
> 
> 赞同：4
> 
> 时间：2012-06-22T10:01:59.073
> 
> 标签：functional-programming, scheme

到目前为止，我的知识水平足以让我顺利完成 The Little Schemer，而我目前通过 The Seasoned Schemer 完成了 70%。在我的脑海中，我有一些想法，我想从事一些项目，以获得一些使用 Scheme 的实际经验，但是（也许是因为我在整个职业生涯中主要使用 OO 语言）我仍然发现自己想知道如何可以使用像 Scheme 这样的函数式语言来解决面向 OO 语言的一些相当基本的问题。

我不会把我所有的问题都放在一个 stackoverflow 问题中，而是随着时间的推移将它们逐出并假设这些部分会落到适当的位置，所以我实际上不需要其他问题的答案。

很明显，Scheme 的东西是列表。列表和列表列表。我习惯于存储包含“属性”的列表，这些“属性”可以快速检索（即散列）并且可以嵌套在另一个中。

以递归方式传递文件系统中的文件和目录列表为例，在Scheme中如何处理这样的事情？我想您可以传递以下形式的数据结构：

```
'(("foo" (("bar.txt")
          ("zip.txt")
          ("button.txt")))
  ("other.txt")
  ("one-more" (("time.txt")))) 
```

其中每个节点表示为列表的汽车，其子节点表示为包含在其 cdr 的汽车中的另一个列表，因此上面是一个树结构：

```
foo/
  bar.txt
  zip.txt
  button.txt
other.txt
one-more/
  time.txt 
```

或者也许有人会传递一个接受访问者的迭代器函数，而不是进行某种深度树遍历？（就知道何时切换目录而言，不完全确定它的外观）。

这类问题是否存在一般模式，不仅仅是目录树，还有一般的树结构（带有附加的元数据）？

与面向对象的等价物相比，这是否不可避免地会变得相当繁琐？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T10:15:58.030

> 很明显，Scheme 的东西是列表。

传统上，是的。但是从 R6RS 开始，也有带有命名字段的[记录](http://www.r6rs.org/final/html/r6rs-lib/r6rs-lib-Z-H-7.html#node_chap_6)，这使得使用其他类型的数据结构变得*更加*容易。实用的 Scheme 实现已经使用了几十年，但它们从未标准化，因此语法各不相同。

> 这类问题是否存在一般模式，不仅仅是目录树，还有一般的树结构（带有附加的元数据）？

是的，并且根据您对“迭代器函数”的想法，您已经一针见血了。（除了定义一个宏会更优雅，所以你可以说：

```
(for-each-label (x tree 'in-order)
  (display x)) 
```

宏是用 .) 创建的`define-syntax`。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-22T13:54:23.373

我在你的问题中看到了两个部分。

## 第一部分：如何在 Scheme 中实现树。

在标准 R5RS 中，大多数树实现使用向量来表示树中的节点。对于带有一个的二叉树，可能会定义一些辅助函数：

```
(define (tree-left t) (vector-ref t 0))
(define (tree-right t) (vector-ref t 1))
(define (tree-value t) (vector-ref t 2))
(define (make-node l r v) (vector l r v))
(define (leaf? t) (eq? t #f)) 
```

在具有结构/记录的方案中，以上内容替换为>

```
(define-struct tree (left right value))
(define (leaf? t) (eq? t #f)) 
```

如果支持结构的层次结构，则可以编写

```
(define-struct tree ())
(define-struct (leaf tree) ())
(define-struct (node tree) (left right value)) 
```

对于支持模式匹配的方案，操作树的代码看起来很像 ML 和 Haskell 中的树处理代码。

我可以推荐 HtDP 中关于二叉搜索树的部分：http: [//htdp.org/2003-09-26/Book/curriculum-ZH-19.html#node_sec_14.2](http://htdp.org/2003-09-26/Book/curriculum-Z-H-19.html#node_sec_14.2)

## 第二部分：如何处理目录遍历

有几种方法。一种常见的方法是提供一个函数，给定一个目录生成一个函数或序列，该函数或序列一次可以生成一个元素（文件或子目录）。这避免了在内存中存储潜在的巨大文件树的需要。

在球拍中，可以使用序列：

```
#lang racket
(for ([file (in-directory "/users/me")])
   (displayln file)) 
```

R5RS 中没有可用的目录遍历机制，但是所有主要的实现当然都提供了一些这样做的方法。

顺便说一句：Scheme 确实为单链表提供了*非常好的支持，但是在实现函数式数据结构时，由于更快的随机元素访问，通常最好使用向量甚至更好的结构。*

# puppet - puppet 继承 VS puppet 组合

> ID：11154090
> 
> 赞同：18
> 
> 时间：2012-06-22T10:02:04.187
> 
> 标签：puppet

我最近才来跨傀儡继承。围绕它的几个问题：

1.  使用 puppet 继承是一个好习惯吗？一些有经验的puppet同事告诉我puppet的继承不是很好，我不太相信。

2.  来自 OO 世界，我真的很想深入了解 puppet 继承是如何工作的，以及覆盖是如何工作的。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-22T17:43:50.110

1.  这取决于，因为有两种类型的继承，你没有提到你的意思。

    1.  节点继承：从一个`node fqdn { }`定义继承到另一个。强烈建议不要这样做，因为它往往不[符合最小意外原则](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)。抓住人们的经典例子是这样的：

        ```
        node base {
          $mta_config = "main.cf.normal"
          include mta::postfix  # uses $mta_config internally
        }
        node mailserver inherits base {
          $mta_config = "main.cf.mailserver"
        } 
        ```

        该`$mta_config`变量在基本范围内进行评估，因此在邮件服务器中尝试的“覆盖”不起作用。

        没有办法直接影响父节点中的内容，因此对组合没有什么好处。这个例子可以通过从两者中删除继承和包括`mta::postfix`（或另一个“通用”/“基”类）来修复。然后，您也可以使用[参数化类](http://docs.puppetlabs.com/guides/language_guide.html#parameterised-classes)。

    2.  类继承：类继承的用途是您可以覆盖父类中定义的资源的参数。以这种方式重新实现上面的示例，我们得到：

        ```
        class mta::postfix {
          file { "/etc/postfix/main.cf":
            source => "puppet:///modules/mta/main.cf.normal",
          }
          service { ... }
        }

        class mta::postfix::server inherits mta::postfix {
          File["/etc/postfix/main.cf"]:
            source => "puppet:///modules/mta/main.cf.server",
          }
          # other config...
        } 
        ```

        这确实有效，但我会避免深入一层以上的继承，因为维护起来很头疼。

    3.  不过，在这两个示例中，可以通过提前指定数据（通过 ENC）或通过 extlookup 或 hiera 查询内联数据来轻松改进它们。

2.  希望以上示例有所帮助。类继承只允许覆盖参数 - 您不能删除以前定义的资源（一个常见问题）。始终使用大写类型名称引用资源（`file { ..: }`将成为`File[..]`）。

    同样有用的是，您还可以将参数定义为`undef`，有效地取消设置它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-04T04:08:23.803

首先，我只是说明两者之间的区别，继承是一种“is-a”关系，Composition 是一种“has-a”关系。

1) 在 puppet 继承中是**单继承**，这意味着我们不能从多个类派生。继承在傀儡中很好，但我们应该知道它适用于何处。例如，**Puppet 文档部分**["Aside:When to Inherit" 在此链接[https://docs.puppetlabs.com/puppet/latest/reference/lang_classes.html#aside-when-to-inherit]](https://docs.puppetlabs.com/puppet/latest/reference/lang_classes.html#aside-when-to-inherit])，它们实际上准确地命名应该发生继承的两种情况：

*   当您想要覆盖在父类中定义的资源的参数时
*   当您想从参数类继承标准参数值时

但请注意这里的一些重要事项：

*   在 puppet 中，它们是节点和类继承之间的区别。

*   **puppet 最近的新版本不允许节点继承，**请检查此[https://docs.puppetlabs.com/puppet/latest/reference/lang_node_definitions.html#inheritance-is-not-allowed](https://docs.puppetlabs.com/puppet/latest/reference/lang_node_definitions.html#inheritance-is-not-allowed)。

2）另一方面，组合是实现has-a关系的设计技术。我们可以使用**include puppet 关键字**和**class { 'baseclass': }**来完成，如果你想使用参数的话。

（**请注意**：在 puppet 中，我们可以多次使用“include”，**但不能使用“class”**语法，因为 puppet 会抱怨重复的类定义）

**所以在 Puppet 中使用哪个（继承或组合）更好**：这取决于我的意思是什么上下文，你现在正在编写什么 puppet 代码，以及理解 puppet 继承的局限性以及何时使用组合。

所以，我会尽量把这一切保持在几点：

1）首先，puppet 使用单继承模型。

2) 在 puppet 中，关于继承的普遍共识是仅在需要从 Base/Parent 继承默认值时使用它

3）但是看看这个问题，你想从父级继承默认值：

```
class apache {
}

class tomcat inherits apache {
}

class mysql inherits tomcat {
}

class commerceServer inherits mysql {
} 
```

乍一看这看起来合乎逻辑，但请注意 MySQL 模块现在从 tomcat 类继承默认值和资源。这不仅没有任何意义，因为这些服务是不相关的，而且它还为错误最终出现在您的 puppet 清单中提供了机会。

4）因此，更好的方法是简单地对您希望使用的每个类（我的意思是组合）执行包含，因为这消除了所有这种性质的范围问题。

**结论：**我们可以尝试通过使用继承来简化我们的 puppet manifest，这可能就足够了，但它只能在一定程度上可行。如果您的环境增长到数百甚至数千台服务器，由 20 或 30 多种不同类型组成服务器，一些具有共享属性和细微差异，分布在多个环境中，您可能最终会得到一个无法管理的继承模块的错综复杂的网络。在这一点上，显而易见的选择是组合。

通过这些链接，它有助于以良好的方式理解 puppet 的组成和继承（他们个人帮助了我）：

1.  设计木偶——真的很好，[http://www.craigdunn.org/2012/05/239/](http://www.craigdunn.org/2012/05/239/)
2.  维基链接：[http ://en.wikipedia.org/wiki/Composition_over_inheritance](http://en.wikipedia.org/wiki/Composition_over_inheritance)
3.  使用参数化类对类组合建模： [https ://puppetlabs.com/blog/modeling-class-composition-with-parameterized-classes](https://puppetlabs.com/blog/modeling-class-composition-with-parameterized-classes)

我基本上是一名程序员，个人是控制反转/依赖注入的坚定支持者，这是可以通过组合实现的概念/模式。

# math - smarty 将 {math} 等式中的值传递给变量

> ID：11154091
> 
> 赞同：7
> 
> 时间：2012-06-22T10:02:06.063
> 
> 标签：math, variables, smarty, equation

祝大家有个愉快的一天，我有件事要问你，为了更好地理解这里是我的代码：

```
{math equation=((($order_total-$commission)+$discount+$delivery_charge)*$rate)} 
```

我希望将其传递给另一个变量，在 php 中我想成为这样

```
<?php 
  $var=0
  foreach($result as $resultA){
   $var = $var+((($order_total-$commission)+$discount+$delivery_charge)*$rate);
}
?> 
```

希望你们能帮助我伙计们！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-22T14:26:18.030

如果您使用 Smarty 3，我强烈建议您放弃 {math}：

```
{$order_total = 123}
{$commission = 13}
{$discount = 10}
{$delivery_charge = 20}
{$rate = 1.1}

{$result = 0}
{$result = $result + ($order_total - $commission + $discount + $delivery_charge) * $rate}
{$result} 
```

它可读性更好，速度更快（因为表达式实际上是编译的，而不是`eval()ed`一遍又一遍地编译）。

* * *

Smarty 2 等价物：

```
{assign var="order_total" value=123}
{assign var="commission" value=13}
{assign var="discount" value=10}
{assign var="delivery_charge" value=20}
{assign var="rate" value=1.1}

{assign var="result" value=0}
{math 
  assign="result"
  equation="result + (order_total - commission + discount + delivery_charge) * rate"
  result=$result
  order_total=$order_total
  commission=$commission
  discount=$discount
  delivery_charge=$delivery_charge
  rate=$rate
}
{$result} 
```

* * *

如果有任何机会升级到 Smarty 3 - 去做吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:11:00.460

尝试使用`assign`参数：

从文档[http://www.smarty.net/docsv2/en/language.function.math.tpl](http://www.smarty.net/docsv2/en/language.function.math.tpl)：

> 如果您提供了 assign 属性，{math} 函数的输出将被分配给这个模板变量，而不是被输出到模板。

但是如果你使用 PHP 进行过类似的计算会更好（在业务逻辑层，而不是在视图）

请参阅[http://www.smarty.net/best_practices](http://www.smarty.net/best_practices)（**“保持业务逻辑分离！”**部分）

# windows-phone-7 - 如何使用 Bing 服务解析来自地理编码地址的 XML 响应

> ID：11154095
> 
> 赞同：0
> 
> 时间：2012-06-22T10:02:19.337
> 
> 标签：windows-phone-7

假设我在对地址进行地理编码后收到了必应服务的回复。我需要这个 Xml 响应的纬度和经度：

示例：来自 Bing 服务的 XML 响应：

[http://msdn.microsoft.com/en-us/library/ff701711.aspx](http://msdn.microsoft.com/en-us/library/ff701711.aspx)

```
WebResponse 响应 = request.GetResponse();

 XDocument xdoc = XDocument.Load(response.GetResponseStream());

 //--1--??

  string status = xdoc.Element......Element("status").Value;

   ValidateGeocodeResponseStatus（状态，地址）；

    //--2- ???

  XElement locationElement = xdoc.Element()............Element("location");  

```

如何通过引用 Node 进行解析？并得到

1) 状态码 2) Lat/Lon

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:47:38.397

试试这个来获取状态码

```
var status = (from resp in xdoc.Descendants("Response")
                         select resp.Element("StatusCode").Value).First(); 
```

# python - 0/1 带有少量变量的背包：哪种算法？

> ID：11154101
> 
> 赞同：4
> 
> 时间：2012-06-22T10:02:54.403
> 
> 标签：python, algorithm, knapsack-problem

我必须实现一个有约束的 0/1 背包问题的解决方案。在大多数情况下，我的问题几乎没有变量（〜 10-20，最多 50）。

我记得在大学里有许多算法在许多情况下比蛮力执行得更好（例如，我在想分支定界算法）。

由于我的问题相对较小，我想知道在使用复杂的解决方案而不是蛮力时在效率方面是否有明显的优势。

如果有帮助，我正在用 Python 编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:47:07.387

如果权重之和足够小，您可以使用伪多项式算法，该算法使用动态编程。您只需计算，是否可以通过每个 X 和 Y 的前 Y 个项目获得权重 X。这在 O(NS) 时间内运行，其中 N 是项目数，S 是权重总和。

另一种可能性是使用中间相遇的方法。将项目分成两半，并且：对于前半部分，取所有可能的项目组合（每半部分有 2^(N/2) 个可能的组合）并将其权重存储在某个集合中。后半部分取所有可能的项目组合，检查前半部分是否有合适重量的组合。这应该在 O(2^(N/2)) 时间内运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:11:36.573

蛮力的东西对于 10 个变量可以正常工作，但是对于 40 个变量，你会得到大约 1000'000'000'000 个可能的解决方案，这可能需要很长时间才能枚举。我会考虑近似算法，例如多项式时间算法（参见例如[http://math.mit.edu/~goemans/18434S06/knapsack-katherine.pdf](http://math.mit.edu/~goemans/18434S06/knapsack-katherine.pdf)）或使用诸如分支定界的搜索算法，也许有一个额外的启发式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:45:33.670

蛮力算法将始终返回最佳解决方案。它们的问题在于，在指数级问题中，它们很快变得不可行。

如果保证最多有 20 个变量，那么您将测试不超过 100 万个解决方案 (2^20= 1M)。因此，蛮力是可行的，没有其他算法会返回更好的解决方案。

启发式方法很棒，但只有在我们无法准确解决问题时才应该使用它们。有一本好书可以帮助你：[如何解决它，作者 Michalewicz](https://rads.stackoverflow.com/amzn/click/com/B000SEKUUS)。

# excel - Location conversion

> ID：11154105
> 
> 赞同：1
> 
> 时间：2012-06-22T10:03:07.020
> 
> 标签：excel, location, format, latitude-longitude

If I have a location in the following format:

```
N51 46.981 W1 36.145 
```

Is there an easy way to convert this to latitude / longitude? It doesn't really matter what it's written in as I need to run a script to convert a fair few of these. Ideally I would do it in a Excel / Numbers spreadsheet. My attempts recently came from using the `MID` command in Excel to grab the data into the following:

```
51:46:981
01:36:145 
```

And then multiply them by 24 to get a latitude or longitude value. I'm fairly confident that this is incorrect as it seemed to lose accuracy. Is there an easier way of doing this?

Using google maps and searching for the first value above I get the result:

```
51.783017, -1.602417 
```

This is essentially what I am looking for.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:17:33.753

The formula for the first one for example is `51.783017 = 51 + 46.981/60`.

Including the numbers extraction from the original string, the corresponding formulae in Excel could look like this (I am not using `mid` as the number of digits are not known: the degrees could be 1 to 3 figures for example):

![enter image description here](../Images/291d657092b1e945590ef81929d99861.png)

And the results are:

![enter image description here](../Images/9968b6c65c50a3e8a24d642a8823b8e4.png)

# asp.net - 在 windows phone 7 中停止 wcf 服务时通知用户

> ID：11154111
> 
> 赞同：0
> 
> 时间：2012-06-22T10:03:26.310
> 
> 标签：asp.net, wcf, windows-phone-7

我有一个 windows phone 7 应用程序，它在某些事件中使用 wcf 服务。当服务暂时不可用时，我需要通知应用程序用户。IE。应该提示用户使用适当的 msg 一段时间后尝试，并且应用程序应该使用兑现的数据。我尝试使用以下代码：

```
public static Boolean isSiteOnline(String url)
{
    Boolean result = true;
    HttpWebRequest httpReq = (HttpWebRequest)WebRequest.Create(url);
    httpReq.AllowAutoRedirect = false;
    HttpWebResponse httpRes = (HttpWebResponse)httpReq.GetResponse();
    if (httpRes.StatusCode != HttpStatusCode.OK)
        result = false;

    httpRes.Close();
    return result;
} 
```

但在 Windows phone 7 中，我无法获得函数 GetResponse()[Ln 6]。是否缺少任何命名空间？还是有其他出路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:22:22.337

Windows Phone 不支持许多同步功能。`GetResponse`是其中之一。

你应该使用异步版本 -`BeginGetResponse`

示例可以在这里找到 - [http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest(VS.95).aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest(VS.95).aspx)

# macos - 从mac上的本地vim复制到系统剪贴板

> ID：11154112
> 
> 赞同：0
> 
> 时间：2012-06-22T10:03:30.560
> 
> 标签：macos, vim, ssh, terminal, clipboard

似乎这个问题的版本以前在这里被问过，但我无法从他们那里收集到对我正在寻找的内容的确切回应。

假设我在我的 mac 机器上打开了一个`.txt`文件，`vim`然后我想从该文件中复制一行以用于另一个`.txt`文件或会话期间的a`google search`或 in中。最***简单***的方法是什么？`terminal``ssh`

 *谢谢，

* * *

编辑

找到一个潜在的重复项：[Vim: copy selection to OS X clipboard](https://stackoverflow.com/questions/677986/vim-copy-selection-to-os-x-clipboard)。但我愿意改进！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:14:06.917

我不确定它是否也适用于 osx，但在我使用的 linux 上`"+<yank>`，也有`"*<yank>`

另见[http://vim.wikia.com/wiki/Copy_an_Entire_Buffer_to_the_Clipboard](http://vim.wikia.com/wiki/Copy_an_Entire_Buffer_to_the_Clipboard)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:33:58.243

如另一个答案中所述，使用 + 寄存器或 * 寄存器。在某些环境中，* 和 + 可能不会按预期运行。要启用预期的行为，请使用[fakeclip 之](https://github.com/kana/vim-fakeclip)类的插件。Fakeclip 在开箱即用时启用剪贴板支持。*

# android - 播放一系列声音会导致强制关闭

> ID：11154113
> 
> 赞同：0
> 
> 时间：2012-06-22T10:03:34.553
> 
> 标签：android, multithreading, audiotrack

我正在创建一个应用程序，当您按下屏幕上的一系列按钮时播放音符。还有一个按钮可以在按下时播放一系列音符（最多 10 个音符）。该应用程序起初运行良好。但是，如果您要播放一系列音符并且连续按下播放按钮几次，则应用程序最终将强制关闭。任何帮助将不胜感激。

```
private final int duration = 1; // seconds 
private final int sampleRate = 10000; 
private final int numSamples = duration * sampleRate; 
private final double sample[] = new double[numSamples]; 
private double freqOfTone; // hz 

private final byte generatedSnd[] = new byte[2 * numSamples];

 public void onPlayButtonClick(View v){
    playMultiNoteSound();
}
synchronized void playMultiNoteSound(){

    CharSequence chrs1;
    TextView lblNoteList;
    lblNoteList=(TextView)findViewById(R.id.lblNoteList);
    chrs1=lblNoteList.getText();

    for(int i=0;i<chrs1.length();i++){
        final int int1=i;

        Thread thrdPlay=new Thread(new Runnable(){

            public void run(){
                int minSize =AudioTrack.getMinBufferSize( sampleRate, AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT );
                audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, 
                        sampleRate, AudioFormat.CHANNEL_CONFIGURATION_MONO, 
                        AudioFormat.ENCODING_PCM_16BIT, minSize, 
                        AudioTrack.MODE_STREAM);
                char chrCurrent;
                CharSequence chrs;

                TextView lblNoteList;
                lblNoteList=(TextView)findViewById(R.id.lblNoteList);
                chrs=lblNoteList.getText();
                chrCurrent=chrs.charAt(int1);
                Double[]allTones;
                allTones= new Double[chrs.length()];
                allTones[int1]=getToneForText(chrCurrent);
                byte[] results;
                results=genSelectTone(allTones[int1]);
                audioTrack.write(results, 0, results.length);
                audioTrack.setStereoVolume(1.0f, 1.0f);
                audioTrack.play();
                if(audioTrack.getPlayState()==AudioTrack.PLAYSTATE_STOPPED){
                    audioTrack.stop();
                    audioTrack.release();
                }
            }
        });
        thrdPlay.setDaemon(true);   
         thrdPlay.start();
         try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if(thrdPlay!=null){
            thrdPlay.stop();
            thrdPlay=null;
        }
        }

}
public double getToneForText(char val){
    Float dblResult;
    dblResult=0f;
    switch (val){
    case '1':
        dblResult=261.63f;
        break;
    case '2':
        dblResult=293.66f;
        break;
    case '3':
        dblResult=329.63f;
        break;
    case '4':
        dblResult=349.23f;
        break;
    case '5':
        dblResult=392.0f;
        break;
    case '6':
        dblResult=440.0f;
        break;
    case '7':
        dblResult=493.88f;
        break;
    case '8':
        dblResult=523.25f;
        break;
    case '9':
        dblResult=587.33f;
        break;
    case '0':
        dblResult=659.26f;
        break;
    }       
    return dblResult;
} 
```

我相信这就是所有相关的代码。如果您需要其他信息/代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:12:51.957

您不应该为每次迭代重新初始化`audioTrack`。而是在循环之前对其进行初始化并在循环中使用`audioTrack.write`。您只是在不填充缓冲区的情况下重新初始化它。

其次，作为一个提议，你不应该更新 gui 并在同一个线程中播放声音。尝试`AsyncTask`改用。

# qt - How to access resource image with fopen?

> ID：11154118
> 
> 赞同：1
> 
> 时间：2012-06-22T10:03:46.773
> 
> 标签：qt, fopen

I use `fopen(filename.c_str(), "rb");` in Qt with images resources.

But `fopen` wants a full path. It doesn't work if my filename is `:/images/img.png`!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T11:27:32.817

`fopen` is not part of Qt. Qt's resource system only works with Qt classes. See the Qt documentation of [Using Resources in the Application](http://qt-project.org/doc/resources.html#using-resources-in-the-application) for details.

The Qt classes which work for resources first check if the given filename starts with the resource marker (`:`) and if so, they look up the resource internally (no physical file is opened!), otherwise, they open the physical file. Note that resources are included in the source code of your application (as a simple array of bytes) during compile time (using the Qt resource compiler) and read using a special resource reader in Qt internally, which can treat the resource file as it *would* be a physical file, but it still *isn't*.

What happens if you pass a resource file path (starting with `:`) to `fopen`? `fopen` tries to read a *physical* directory called `:` and searches in this directory for the subpath you provided. Of course, no such directory exists on your harddrive, since the file is part of your executable file. (And please don't try to read the resource file manually from within the executable by opening the executable using `fopen` and seeking to the resource!)

In your concrete situation: Are you trying to read the image using an external image reader? Qt has its own PNG reader. Just call the [`QImage(QString filename)`](http://qt-project.org/doc/qimage.html#QImage-9) constructor.

# perl - 如何匹配字符集为big5（Perl）的网页中的汉字？

> ID：11154120
> 
> 赞同：0
> 
> 时间：2012-06-22T10:03:54.143
> 
> 标签：perl

我正在做中文单词之间的匹配，例如“语言中心”和大量网络文件（php、html、htm 等）。

但是，不知何故我收到以下错误：

```
Malformed UTF-8 character (1 byte, need 2, after start byte 0xdf) in regexp compilation at ../Final_FindOnlyNoReplace_CLE_Chinese.pl line 89, <INFILE> line 12. 
```

任何人都可以帮忙吗？

这是我的代码。

```
#!/usr/bin/env perl
use Encode qw/encode decode/;

use utf8;
use strict;
use Cwd;
use LWP::UserAgent;

my($path) = @_;

## append a trailing / if it's not there
$path .= '/' if($path !~ /\/$/);

use File::Glob ':glob';

my @all_files = bsd_glob($path."*");

for my $eachFile (@all_files) {
    open(INFILE, "<$eachFile") || die ("Could not open '$eachFile'\n");

    my(@inlines) = <INFILE>;
    my($line, $find);
    my $outkey = 1;

    foreach $line (@inlines) {
        $find = &find($line);
        if ($find ne 'false') {
            chomp($line);
            print "\tline$outkey : $line\n"; 
        }
        $outkey ++;
    }
}

#subroutine
sub find {
    my $m = encode("utf8", decode("big5", @_));

    my $html = LWP::UserAgent->new
        ->get($m)
        ->decoded_content;
    my $str_chinese = '語言中心';

    if ($m =~ /$str_chinese/) {  
        $m; ##if match, return the whole line.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:51:12.853

```
#!/usr/bin/env perl
use utf8;
use strictures;
use LWP::UserAgent qw();
use Path::Class::Rule qw();
use URI::file qw();

my $start_directory = q(.);
my $search_text = qr'語言中心';

my $next = Path::Class::Rule->new->name(qw(*.php *.htm*))->iter($start_directory);

my @matching_lines;
while (my $file = $next->()) {
    for my $line (split /\R/, LWP::UserAgent
        ->new
        ->get(URI::file->new_abs($file))
        ->decoded_content
    ) {
        push @matching_lines, $line if $line =~ $search_text;
    }
}
# @matching_lines is (
#     '<title>Untitled 語言中心 Document</title>',
#     'abc 語言中心 cde',
#     '天天向上語言中心他'
# ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:09:52.973

你不是在`$html`你已经检索和解码的地方搜索，而是在 URL:`$m =~ /$str_chinese/`中搜索，我猜这不是你想要的。

此外，您正在将`find`函数的结果与确切的字符串“false”进行比较，这永远不会起作用。为了清楚起见，更改`if ($find ne 'false')`为`if (defined($find))`并添加成功和失败的显式返回`find`。

最后，您的脚本似乎失败了，因为您将它指向在其他文件中包含一些其他 Perl 脚本的目录。它们最有可能采用 UTF-8 格式，因此当您的脚本尝试将它们作为 big5 数据读取时，解码失败。只需更改您的 glob 以仅覆盖数据文件。

# php - 如何为动态生成的输入字段添加记录

> ID：11154121
> 
> 赞同：0
> 
> 时间：2012-06-22T10:03:57.620
> 
> 标签：php, javascript, mysqli

我有一个表单，点击添加更多按钮时会出现新字段。如何将它们存储到 php 变量中，然后放入 mysql 数据库。我有php和mysql的工作知识。我的 HTML 和 javascript 代码如下：

```
 <script type="text/javascript">
   function($) {

$.fn.relCopy = function(options) {
    var settings = jQuery.extend({
        excludeSelector: ".exclude",
        emptySelector: ".empty",
        copyClass: "copy",
        append: '',
        clearInputs: true,
        limit: 0 // 0 = unlimited
    }, options);

    settings.limit = parseInt(settings.limit);

    // loop each element
    this.each(function() {

        // set click action
        $(this).click(function(){
            var rel = $(this).attr('rel'); // rel in jquery selector format             
            var counter = $(rel).length;

            // stop limit
            if (settings.limit != 0 && counter >= settings.limit){
                return false;
            };

            var master = $(rel+":first");
            var parent = $(master).parent();                        
            var clone = $(master).clone(true).addClass(settings.copyClass+counter).append(settings.append);

            //Remove Elements with excludeSelector
            if (settings.excludeSelector){
                $(clone).find(settings.excludeSelector).remove();
            };

            //Empty Elements with emptySelector
            if (settings.emptySelector){
                $(clone).find(settings.emptySelector).empty();
            };                              

            // Increment Clone IDs
            if ( $(clone).attr('id') ){
                var newid = $(clone).attr('id') + (counter +1);
                $(clone).attr('id', newid);
            };

            // Increment Clone Children IDs
            $(clone).find('[id]').each(function(){
                var newid = $(this).attr('id') + (counter +1);
                $(this).attr('id', newid);
            });

            //Clear Inputs/Textarea
            if (settings.clearInputs){
                $(clone).find(':input').each(function(){
                    var type = $(this).attr('type');
                    switch(type)
                    {
                        case "button":
                            break;
                        case "reset":
                            break;
                        case "submit":
                            break;
                        case "checkbox":
                            $(this).attr('checked', '');
                            break;
                        default:
                          $(this).val("");
                    }                       
                });                 
            };

            $(parent).find(rel+':last').after(clone);

            return false;

        }); // end click action

    }); //end each loop

    return this; // return to jQuery
};

   })(jQuery);

    </script>

   <script type="text/javascript">
   $(function(){
   var removeLink = ' <a class="remove" href="#" onclick="$(this).parent().slideUp(function(){ $(this).remove() }); 
 return false">remove</a>';
 $('a.add').relCopy({ append: removeLink}); 
 });
  </script>
  <style type="text/css">
   body{ font-family:Arial, Helvetica, sans-serif; font-size:13px; }
   .remove {color:#cc0000}
   .input{ border: solid 1px #006699; padding:3px}

    </style>
    </head>

   <body>
  <form method="post" action="">
  <table width="580" border="1" class="clone" rules="groups" align="center">
  <tr>
  <td width="129" height="29" align="right"><strong>Child Name :</strong></td>
  <td width="435"><input name="petname[]" type="text" class="txt_box" id="petname" />
  </td>
  </tr>
  <tr>
  <td align="right" height="29"><strong>Pet Image :</strong></td>
  <td><input name="petimage[]" type="file" class="txt_box" id="petimage" /></td>
  </tr>

  </table>
  <p style=" margin-left:60px;"><a href="#" class="add" rel=".clone">Add More</a></p>
  </form>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:12:54.277

表单发布后，您可以使用以下方式获取发布数据的值：

[$_POST](http://php.net/manual/en/reserved.variables.post.php)在一个数组中。

然后，您将需要遍历要插入数据库的数组。

一个例子：

```
 <?php
    $con = mysql_connect("localhost","username","password");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db("my_db", $con);

    mysql_query("INSERT INTO tablename(FirstName, LastName, Age)
    VALUES ('test', 'name',25)");
    mysql_close($con);
?> 
```

# r - 在 Powerpoint 中使用 R 中的图表

> ID：11154122
> 
> 赞同：1
> 
> 时间：2012-06-22T10:04:00.067
> 
> 标签：r, graph, plot, powerpoint

对于某个时间 t-max 的动物位置，我有一定的 x 和 y 坐标。我正在使用 R 中的代码：

```
for (t in 1:tmax) {
plot(x[1:t],y[1:t]);
Sys.sleep(0.1);
} 
```

看看动物是如何随着时间移动的。所以这向我展示了从 x 的每个值到后续值的路径，直到 tmax。所以现在我必须在 Powerpoint 演示文稿中展示我的发现。所以我想知道是否有一种方法可以在幻灯片中插入这个图表，这样当我点击一个按钮时，图表就会被绘制出来，每个人都可以理解动物是如何移动的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:25:54.987

看看 Cran 上的动画包：

[http://cran.r-project.org/web/packages/animation/index.html](http://cran.r-project.org/web/packages/animation/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:17:35.930

动画包很酷，但我发现很难学习。您可以保存图表，然后使用视频编辑器将图表合并到影片剪辑中，而不是在绘制每个点后休眠。Windows 电影制作器将为您执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:32:08.477

我不是动画的忠实粉丝，在这种情况下它似乎没有用。为什么不直接绘制图形，或者如果路径严重缠结，则使用应用于线条的彩虹颜色图进行绘制，这样您就可以轻松地从头到尾跟随？看`plotrix::color.scale.lines`

# objective-c - 修复 UITableView 的标题

> ID：11154123
> 
> 赞同：0
> 
> 时间：2012-06-22T10:04:07.533
> 
> 标签：objective-c, ios

我想修复 UITableView 的标题，以便在滚动表格视图时标题粘在顶部。

我做了一些谷歌搜索，似乎最干净的方法是使用 UINavigationController 的子类并使其遵循 UITableDataSource 和 UITableViewDelegate 协议，并在 UINavigationController 的视图中添加标题视图和 tableView 并实现所有协议方法。

基本上我正在做这个stackoverflow[问题的选择答案](https://stackoverflow.com/questions/6951190/fixed-header-to-uitableview)

我在 didSelectRowAtIndexPath 方法中有以下内容：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIViewController *viewController2 = [[[SecondViewController alloc] initWithNibName:nil bundle:nil] autorelease];
    viewController2.title = @"test";
    [self pushViewController:viewController2 animated:YES];
} 
```

如果我在最后一行有“self.navigationController”（如果这是 UITableViewController，通常会这样）而不是“self”，那么什么也不会发生（当然，因为 self 是 UINavigationController）但是当我有“self”作为它目前，viewController@ 的视图没有被推送，但是发生了一些事情，因为导航栏发生了变化，出现了“测试”，但固定的标题和 UITableView 仍然存在。更有趣的是，当我第一次点击表格视图时，只有“测试”出现在导航栏中，但没有出现“返回”按钮。我必须再次点击行（因为在我第一次点击后 UITableView 仍然存在），以便“返回”按钮显示在导航栏中......

所以简而言之

1）当我点击表格视图行时，我应该怎么做才能使 viewController2 的视图显示？

2）如何让“返回”按钮在第一次点击时显示？

我的 UINavigationController 的 init 方法如下：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        [self.navigationController setNavigationBarHidden:NO];

        UIView *mainView = [[[UIView alloc] initWithFrame:CGRectMake(0, statusBarHeight+navBarHeight, 320, 480-statusBarHeight-navBarHeight-tabBarHeight)] autorelease];

        UIImage *stripedBackground = [UIImage imageNamed:@"bg.png"];
        UIImageView *background = [[[UIImageView alloc] initWithImage:stripedBackground] autorelease];
        background.frame = CGRectMake(0, 0, 320, mainView.frame.size.height);
        [mainView addSubview:background];

        UIImage *header = [UIImage imageNamed:@"header.png"];
        UIImageView *headerView = [[[UIImageView alloc] initWithImage:header] autorelease];
        headerView.frame = CGRectMake(0, 0, header.size.width, header.size.height);
        [mainView addSubview:headerView];

        UITableView *streamTableView = [[[UITableView alloc] initWithFrame:CGRectMake(0, header.size.height, 320, mainView.frame.size.height-header.size.height) style:UITableViewStylePlain] autorelease];
        [streamTableView setDelegate:self];
        [streamTableView setDataSource:self];
        [mainView addSubview:streamTableView];
        [header release];

        [self.view addSubview:mainView];
    }
    return self;
} 
```

# c# - 您如何在 UML Java 或 C# 甚至 DB 中建模客户可以是自然人或公司，并且公司有员工和承包商

> ID：11154124
> 
> 赞同：0
> 
> 时间：2012-06-22T10:04:09.463
> 
> 标签：c#, java, database-design, model, uml

我能找到的所有教程总是用玩具 uml 用例来解决，比如这里[http://www.ibm.com/developerworks/java/library/j-jmod0508/](http://www.ibm.com/developerworks/java/library/j-jmod0508/)

我看不到如何在 UML 用例中对此进行建模：

客户可以是自然人或公司，并且公司的员工本身就是自然人。公司还有一些人作为承包商为他们工作，他们是自然人但不是客户。

有人可以有什么好主意并在 yuml 用例[http://yuml.me/](http://yuml.me/)中编写这个模型吗？

似乎没有人知道 UML 用例，所以甚至可以说是类图，甚至是 Java 或 C# 类图，甚至是数据库设计 :)

我在下面的模型中看到的问题是 Person 是客户，因此所有员工也都是客户，这是错误的：

![在此处输入图像描述](../Images/48c724bc1f0260cbab766f7659222839.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:04:11.593

以下类图满足您的需求：

![类图](../Images/ee16db3ea162cc666007bb0db7a3c962.png)

您实际上正在使用两个域：第一个域是公司的层次结构：公司有员工和承包商，他们是人；第二个域是客户域，可以是公司，也可以是客户。因此，在此图中，您有一个`Person`which 可以是 a `Contractor`、 an`Employee`或 a `CustomerPerson`，也可以是 a `Customer`，并且您有 a `CustomerCompany`which 既是 a`Customer`又是 a `Company`。

请注意，我创建`CustomerCompany`了继承自`Company`而不是`Company`继承自，`Customer`因为我假设并非所有公司都是客户。

我对所有关系都使用了继承，但是如果不需要多重继承，可以使用接口来完成。

此图的[yu​​ml](http://yuml.me)代码是：

```
[Company]++-0..*>[Employee]
[Company]++-0..*>[Contractor]
[Person]^-[Employee]
[Person]^-[Contractor]
[Customer]^-[CustomerCompany]
[Company]^-[CustomerCompany]
[Customer]^-[CustomerPerson]
[Person]^-[CustomerPerson] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:21:57.173

> 客户可以是自然人或公司，并且公司的员工本身就是自然人。

您不能使用 UML 用例图对此进行建模，因为这不是用例。用例听起来像是 Compary 可以雇用员工，Person 可以从 Company 订购产品，等等。

但是，您可以使用以下 UML 类图对此进行建模： ![对问题建模的类图](../Images/b5e82fe1006a3208cf2ff37d67fa3619.png)

**更新：**

上面的类图并不意味着公司的员工也必须是同一公司的客户。它只是说明一个人可能是某个公司的客户或该公司的员工，并同时允许两者。

考虑以下显示上述类的一些实例的对象图，并且就上述类图而言是完全合法的：

![具有不同客户和员工的类图](../Images/3673dd061704653f08854192be52b422.png)

# javascript - 将自动生成的 html 转换为字符串

> ID：11154125
> 
> 赞同：0
> 
> 时间：2012-06-22T10:04:17.920
> 
> 标签：javascript, jquery, asp.net-mvc

我在 asp.net mvc 视图中使用了一些 javascript/jquery，并且正在使用 html 帮助程序附加一些 html 代码。

```
$("#update").append('@Html.CustomHelper(m => m.Values)'); 
```

自定义 html 帮助器生成几行长的 html 块。问题是第一行以 a 开头，`'`然后最后一行以 a 结尾`'`，但其余行不是字符串。

**JavaScript 或 jQuery**中有没有办法处理**HTML**`stringify`块？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:06:44.393

更好的方法是在 ASP.NET 端为 Javascript 编码字符串。使用可能：

```
HttpUtility.JavaScriptStringEncode(string) 
```

这样，您就可以保证具有一致且有效的编码，而不必担心引号等。只需在方法中替换您的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:07:45.907

你可以让你的`CustomHelper`方法返回一个正确的 JS 编码的编码字符串。在您从方法调用返回之前，您可以使用`HttpUtility.JavaScriptStringEncode(yourStringHere)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:11:51.523

你可以使用`Html.Raw`

```
$("#update").append("@Html.Raw(Html.CustomHelper(m => m.Values))"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:05:41.353

为什么不使用双引号？

```
$("#update").append("@Html.CustomHelper(m => m.Values)"); 
```**

# iphone - 如何在 iPhone 中的 MMM dd、yyyy HH:mm 中设置日期格式

> ID：11154126
> 
> 赞同：3
> 
> 时间：2012-06-22T10:04:23.197
> 
> 标签：iphone, objective-c, ios5, nsdate, nsdateformatter

我想以这种格式设置日期 MMM dd, yyyy HH:mm，我已经为此完成了代码，但有一些我不知道的错误。

```
NSDate *date = [NSDate date];
[format setDateFormat:@"MMM dd, yyyy HH:mm"];
NSLog(@"My date with out format = %@",date);
date = [format dateFromString:[format stringFromDate:date]];
NSLog(@"My date is = %@",date); 
```

**输出**

我的日期没有格式 = 2012-06-22 09:53:46 +0000
我的日期是 = 2012-06-22 09:53:00 +0000

请帮助我在哪里做错了。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T10:12:32.813

首先，`NSDate`对日期的格式一无所知。这就是`NSDateFormatter`进来的地方。

```
date = [format dateFromString:[format stringFromDate:date]]; 
```

您在这里所做的是为给定格式创建一个字符串，这也将导致删除时区。而不是从该字符串创建一个新日期。由于它不再具有时区，它将导致日期与`GMT`时区相同。

但这仍然会导致 a `NSDate`which hold, seconds 并且默认时区设置为`GMT`。

无需创建新的日期对象，如果要显示日期，只需获取`stringFromDate:`方法返回的字符串即可。如果您这样做，它将起作用：

```
NSDate *date = [NSDate date];
[format setDateFormat:@"MMM dd, yyyy HH:mm"];
NSLog(@"My date with out format = %@",date);
NSString *dateString = [format stringFromDate:date];
NSLog(@"My date is = %@",dateString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:08:38.907

您还没有告诉格式化程序显示秒数，为此添加“HH：mm：**ss** ”

```
NSDate *date = [NSDate date];
[format setDateFormat:@"MMM dd, yyyy HH:mm:ss"];
NSLog(@"My date with out format = %@",date);
date = [format dateFromString:[format stringFromDate:date]];
NSLog(@"My date is = %@",date); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:14:38.043

试试这个：

```
NSDateFormatter *format = [[NSDateFormatter alloc] init];
    NSDate *date = [NSDate date];
    [format setDateFormat:@"MMM dd, yyyy HH:mm:ss"];
    NSLog(@"My date with out format = %@",date);
    NSString *dateStr = [format stringFromDate:date];

    //date = [format dateFromString:[format stringFromDate:date]];
    NSLog(@"My date is = %@",dateStr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:09:01.877

```
 [format setDateFormat:@"YYYY-dd-MM HH:mm:ss z"]; 
```

# error-handling - 如何利用简单错误子类提供的格式控制

> ID：11154132
> 
> 赞同：1
> 
> 时间：2012-06-22T10:04:35.033
> 
> 标签：error-handling, common-lisp

我目前正在使用[cxml-stp](http://www.lichteblau.com/cxml-stp/)框架进行开发，但是在解析时我确实得到了一个[cxml-stp:stp-error](http://www.lichteblau.com/cxml-stp/doc/pages/cxml-stp__class__stp-error.html)，它是[simple-error](http://www.lispworks.com/documentation/lw50/CLHS/Body/e_smp_er.htm)的子类，它被记录为格式控制的一种错误提供。

如何打印错误消息？由于这两个 API 都没有提供任何特定的功能，而且简单的`FORMAT`只是导致对象被打印但不使用提供的 FORMAT 字符串。

例如

```
(SB-KERNEL:CASE-FAILURE
 ETYPECASE
 #<CXML-STP:STP-ERROR "text includes characters that cannot be ~
                represented in XML at all: ~S"
   {1007814951}>
 (STRING SIMPLE-STRING)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:00:59.770

只需编写条件对象而不转义：

```
(write condition :escape nil) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:07:32.713

```
(defun try-handle-error (err)
  (handler-case
      (error err)
    (serious-condition (condition)
      (apply #'format
         (nconc (list t)
            (cons (simple-condition-format-control condition)
              (simple-condition-format-arguments condition)))))))

(try-handle-error (make-condition
        'simple-error
        :format-control "say something ~s~&"
        :format-arguments '(42))) 
```

这将是一个例子。基本上，格式控制和格式参数是在简单错误类上声明的槽读取器。当您处理错误时，您可以在该错误上调用它们以获取它在创建期间收到的值。

# html - 通过使用 CSS 在 Copperplate Gothic 中呈现单词的首字母大写

> ID：11154135
> 
> 赞同：1
> 
> 时间：2012-06-22T10:04:47.793
> 
> 标签：html, css

我在我网站的主菜单中使用“Copperplate Gothic”字体。由于 Copperplate Gothic 的全大写性质，我在某些地方使用它来大写每个单词的首字母。如何使用 CSS 将字体“Copperplate Gothic”分配给单词的第一个字母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:02:46.080

Copperplate Gothic font is bydefault in upparcase and not getting the lower case version of the font. "Although a true lowercase has never been designed, Copperplate Gothic is ideal for all-capital text typically set in small print" Reference: [http://www.microsoft.com/typography/fonts/family.aspx?FID=40](http://www.microsoft.com/typography/fonts/family.aspx?FID=40)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:06:50.500

```
text-transform:capitalize; 
```

你可以添加css

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:08:20.507

您可以通过**text-transform**属性轻松获得所需的结果。

**CSS**

```
 p.capitalize {text-transform:capitalize;} 
```

**HTML**

```
<p class="capitalize">This is some text.This is some textThis is some textThis is some textThis is some textThis is some textThis is some textThis is some textThis is some textThis is some textThis is some textThis is some textThis is some textThis is some textThis is some textThis is some textThis is some textThis is some textThis is some textThis is</p> 
```

请看演示：- [http://jsfiddle.net/dkxUX/18/](http://jsfiddle.net/dkxUX/18/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:08:50.600

嘿现在用这个

```
{
text-transform: capitalize !important;
} 
```

# asp.net - MVC3 OutputCache VaryByHeader=Cookie 未设置

> ID：11154136
> 
> 赞同：5
> 
> 时间：2012-06-22T10:04:48.147
> 
> 标签：asp.net, asp.net-mvc-3

我有以下操作方法：

```
[HttpGet, Authorize, OutputCache(Duration = 60, VaryByHeader = "Cookie", Location = OutputCacheLocation.Any)]
public ActionResult Index() 
```

但是当我提出请求时，这些是发出的标头：

```
Cache-Control: private, max-age=60, s-maxage=0
Content-Type: text/html; charset=utf-8
Content-Encoding: gzip
Expires: Fri, 22 Jun 2012 09:56:32 GMT
Last-Modified: Fri, 22 Jun 2012 09:55:32 GMT
Vary: Accept-Encoding 
```

为什么它不包括 Vary 中的 Cookie 标头？

我尝试了许多`OutputCache`设置的变体，但无济于事:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:50:20.220

我讨厌 IIS 几乎和讨厌 ASP.NET 一样多。

[http://blogs.msdn.com/b/chaun/archive/2009/10/01/iis-compression-overwrites-the-vary-header-average-rating-0-ratings.aspx](http://blogs.msdn.com/b/chaun/archive/2009/10/01/iis-compression-overwrites-the-vary-header-average-rating-0-ratings.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T15:47:45.140

因此响应包含在 Andrew Bullock 链接的 URL“页面文件名”中，也就是“iis 压缩覆盖了可变标头”。

但自 2013 年 12 月以来，提供了一个修补程序（可在 Andrew Bullock 链接上找到）。像往常一样，此修补程序可能包含在常规补丁中，因此请确保在应用之前仍然需要它。

由于从链接中明确提供信息而不是仅提供链接（以防页面关闭）是“最佳实践”，因此这里有一个摘要：

IIS 动态压缩会覆盖`Vary`标头。这似乎适用于从版本 5 到版本 8 的 IIS（当从 msdn 博客和 msdn kb 累积信息时）。如果需要，请禁用 IIS 动态压缩，或尝试应用[http://support.microsoft.com/kb/2877816/en-us](http://support.microsoft.com/kb/2877816/en-us)上提供的修补程序。（这个问题可以通过windows 8.1/2012 R2系列的常规补丁修复。从IIS 7开始就有这个hotfix，在win7 sp1上亲自测试过，还没有在我的服务器上。）

在我的具体情况下，我还有另一个问题：asp.net 没有发出任何`Vary`设置`outputCache` `location`为`Client`. 将其设置为`Downstream`“解决”了这个附加问题。`Cache-Control`但是，当然，这具有从更改`private`为 的副作用`public`。（现在可以在代理上缓存，而不仅仅是在客户端浏览器上。）

# python - 使用什么格式存储图表

> ID：11154137
> 
> 赞同：3
> 
> 时间：2012-06-22T10:04:54.403
> 
> 标签：python, graph, bulbs, tinkerpop

我正在从事一个项目，该项目涉及使用从其他来源提取的图形。目前我们正在使用 python 的[networkx](http://networkx.lanl.gov/)模块来分析图形。

我现在面临的任务是选择存储图形的格式。对于纯基于 python 的解决方案，Pickle 似乎是一个不错的选择。然而，我们现在处于原型设计阶段，很有可能我们将不得不切换到 C++ 来解决性能和可伸缩性问题。

因此，我希望以大多数图形库广泛支持的格式存储我的图形，以最大程度地减少项目中未来贡献者面临的麻烦。

你能给我一些关于我应该使用哪种格式的建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T10:09:43.067

[TGF](http://en.wikipedia.org/wiki/Trivial_Graph_Format)是您的解决方案。

蟒蛇示例：

```
 #!/usr/bin/python

import fileinput, re

depends = {}
for line in fileinput.input():
    m = re.match('(.+):\s*(.*)',line) # find every depenency line of the form "<item>: <dependencies>"
    if m:
        item = m.group(1)
        dependency_list = m.group(2)
        print item,item # node definition

        if dependency_list: # there are dependencies
            depends[item] = dependency_list.split() # store the list into a dictionary for later

print "#" # end of node list, start of edge list

for item in depends:
    for dependency in depends[item]:
        print item,dependency # edge definition 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:34:08.073

我在这里不是很相关，但是[基于图形的数据库](http://www.graph-database.org/implementations/)不能完成这项工作吗？

例如，您有几个选项，例如[Neo4j](http://neo4j.org/)或[AllegroGraph](http://allegrograph.org/)，您会很容易地找到一些针对 python 或任何其他语言的绑定，并且大多数解决方案也提供了 REST API。

**请注意**，我提供的[第一个链接](http://www.graph-database.org/implementations/)不是最新的，现在有更多的解决方案，并且 Python 的 API 可用，即使它没有写在上面。你也可以看看[这里](http://nosql-database.org/)（图数据库部分）。

**编辑**我发现看看这个也可能很有趣，它似乎是一种适合以 JSON 样式或分隔文本处理和存储图形的格式：

*   [Geoff，简单的图形格式](http://geoff.nigelsmall.net/)

此外，您可能想看看这里：

*   [Bulbflow](http://bulbflow.com)，一个用于图形数据库的 Python 框架，它使用查询语言 Gremlin 并与多个数据库系统兼容
*   [Gremlin，一种图形遍历语言](https://github.com/tinkerpop/gremlin/wiki)（另请参阅[有关 Gremlin 的演示文稿](http://www.slideshare.net/slidarko/gremlin-a-graphbased-programming-language-3876581)、[Bulb Gremlin API 文档](http://bulbflow.com/docs/api/bulbs/gremlin/)和[neo4j 的 gremlin 插件](http://docs.neo4j.org/chunked/stable/gremlin-plugin.html)）

# ios - 从 iOS phonegap 应用程序打开 MobileSafari 中的特定链接

> ID：11154142
> 
> 赞同：2
> 
> 时间：2012-06-22T10:05:16.747
> 
> 标签：ios, cordova

我正在为 iPad 开发一个应用程序，它是使用 Phonegap 1.7 编码的。需要使用 iframe，因此我在白名单中启用了我想要访问的域，并在 Cordova.plist 上将 OpenAllWhitelistURLsInWebView 设置为 YES。问题是我想在 MobileSafari 浏览器中打开一些特定链接，而不是在 web 视图中。根据[Phonegap 维基](http://wiki.phonegap.com/w/page/51586852/iFrames%20and%20PhoneGap)：

> 在 PhoneGap-iOS 上启用 iFrame 需要您将 iframe 域列入白名单并启用“OpenAllWhitelistURLsInWebView”。虽然这听起来不是问题，但许多应用程序希望在 MobileSafari（不是 ChildBrowser）中打开特定站点，当启用“OpenAllWhitelistURLsInWebView”时，这将无法轻松完成。

那么，虽然“不容易做到”，但有没有办法做到呢？

# ios - 如何为 iOS 构建 ohNet？

> ID：11154143
> 
> 赞同：2
> 
> 时间：2012-06-22T10:05:17.767
> 
> 标签：ios, makefile, cross-compiling, upnp

我正在尝试从 openhome.org 构建 ohNet UPnP 堆栈，以便在 iPhone 和 iPhoneSimulator 上执行。我在网络上的各个地方都看到有一个 iOS 端口，并且确实在 Makefile 中有一些关于 iOS 构建的参考。在对 $DEVROOT 和 $SDKROOT 路径进行了一些编辑之后，我可以编译许多源代码，但是构建在以下位置停止并出现错误：

```
g++ -pthread  -L/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/usr/lib/ -arch armv6  -L/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/usr/lib/system -shared -shared-libgcc  -o Build/Obj/Mac/arm/Release/libohNet.dylib Build/Obj/Mac/arm/Release/Ascii.o Build/Obj/Mac/arm/Release/AsyncC.o Build/Obj/Mac/arm/Release/AsyncPrivate.o Build/Obj/Mac/arm/Release/Bonjour.o Build/Obj/Mac/arm/Release/Buffer.o Build/Obj/Mac/arm/Release/Discovery.o Build/Obj/Mac/arm/Release/Debug.o Build/Obj/Mac/arm/Release/Converter.o Build/Obj/Mac/arm/Release/CpDeviceCore.o Build/Obj/Mac/arm/Release/CpDeviceC.o Build/Obj/Mac/arm/Release/CpDeviceStd.o Build/Obj/Mac/arm/Release/CpDeviceDvCore.o Build/Obj/Mac/arm/Release/CpDeviceDvStd.o Build/Obj/Mac/arm/Release/CpDeviceDvC.o Build/Obj/Mac/arm/Release/CpDeviceUpnpCore.o Build/Obj/Mac/arm/Release/CpDeviceUpnpC.o Build/Obj/Mac/arm/Release/CpDeviceUpnpStd.o Build/Obj/Mac/arm/Release/CpiDevice.o Build/Obj/Mac/arm/Release/CpiDeviceDv.o Build/Obj/Mac/arm/Release/CpiDeviceUpnp.o Build/Obj/Mac/arm/Release/CpiService.o Build/Obj/Mac/arm/Release/CpiStack.o Build/Obj/Mac/arm/Release/CpiSubscription.o Build/Obj/Mac/arm/Release/CpProxy.o Build/Obj/Mac/arm/Release/CpProxyC.o Build/Obj/Mac/arm/Release/CpServiceC.o Build/Obj/Mac/arm/Release/DvDevice.o Build/Obj/Mac/arm/Release/DvDeviceStd.o Build/Obj/Mac/arm/Release/DvDeviceC.o Build/Obj/Mac/arm/Release/DviDevice.o Build/Obj/Mac/arm/Release/DvInvocationC.o Build/Obj/Mac/arm/Release/DvInvocationStd.o Build/Obj/Mac/arm/Release/DviProtocolUpnp.o Build/Obj/Mac/arm/Release/DviProviderSubscriptionLongPoll.o Build/Obj/Mac/arm/Release/DvOpenhomeOrgSubscriptionLongPoll1.o Build/Obj/Mac/arm/Release/DviServer.o Build/Obj/Mac/arm/Release/DviServerUpnp.o Build/Obj/Mac/arm/Release/DviServerWebSocket.o Build/Obj/Mac/arm/Release/DviService.o Build/Obj/Mac/arm/Release/DviStack.o Build/Obj/Mac/arm/Release/DviSubscription.o Build/Obj/Mac/arm/Release/DviPropertyUpdateCollection.o Build/Obj/Mac/arm/Release/DvProvider.o Build/Obj/Mac/arm/Release/DvProviderC.o Build/Obj/Mac/arm/Release/DvServerUpnp.o Build/Obj/Mac/arm/Release/DvServerUpnpC.o Build/Obj/Mac/arm/Release/DeviceXml.o Build/Obj/Mac/arm/Release/Error.o Build/Obj/Mac/arm/Release/EventUpnp.o Build/Obj/Mac/arm/Release/Exception.o Build/Obj/Mac/arm/Release/Fifo.o Build/Obj/Mac/arm/Release/Http.o Build/Obj/Mac/arm/Release/DNSCommon.o Build/Obj/Mac/arm/Release/DNSDigest.o Build/Obj/Mac/arm/Release/mDNS.o Build/Obj/Mac/arm/Release/uDNS.o Build/Obj/Mac/arm/Release/MdnsPlatform.o Build/Obj/Mac/arm/Release/MdnsProvider.o Build/Obj/Mac/arm/Release/Maths.o Build/Obj/Mac/arm/Release/Md5.o Build/Obj/Mac/arm/Release/NetworkAdapterList.o Build/Obj/Mac/arm/Release/Network.o Build/Obj/Mac/arm/Release/Parser.o Build/Obj/Mac/arm/Release/Printer.o Build/Obj/Mac/arm/Release/ProtocolUpnp.o Build/Obj/Mac/arm/Release/Queue.o Build/Obj/Mac/arm/Release/RefCounter.o Build/Obj/Mac/arm/Release/Service.o Build/Obj/Mac/arm/Release/ServiceC.o Build/Obj/Mac/arm/Release/sha1.o Build/Obj/Mac/arm/Release/Ssdp.o Build/Obj/Mac/arm/Release/SsdpDv.o Build/Obj/Mac/arm/Release/Stack.o Build/Obj/Mac/arm/Release/Stream.o Build/Obj/Mac/arm/Release/Subscription.o Build/Obj/Mac/arm/Release/Thread.o Build/Obj/Mac/arm/Release/Timer.o Build/Obj/Mac/arm/Release/Uri.o Build/Obj/Mac/arm/Release/XmlParser.o Build/Obj/Mac/arm/Release/XmlFetcher.o Build/Obj/Mac/arm/Release/OhNet.o Build/Obj/Mac/arm/Release/OhNetCp.o Build/Obj/Mac/arm/Release/OhNetDv.o Build/Obj/Mac/arm/Release/OhNetCombined.o Build/Obj/Mac/arm/Release/OhNetC.o Build/Obj/Mac/arm/Release/OhNetCCp.o Build/Obj/Mac/arm/Release/OhNetCDv.o Build/Obj/Mac/arm/Release/OhNetCCombined.o Build/Obj/Mac/arm/Release/OsWrapper.o Build/Obj/Mac/arm/Release/Os.o 
llvm-g++-4.2: error trying to exec '/usr/bin/../llvm-gcc-4.2/bin/arm-apple-darwin11-llvm-g++-4.2': execvp: No such file or directory
make: *** [ohNetDll] Error 255 
```

我不明白为什么构建过程要为这个平台构建 ohNetDll，也不明白如何选择退出该部分/目标。iOS 应用程序不支持动态库，当然也不支持 Windows 原生的 dll。

如果你已经在 iOS 上构建/移植/使用了 ohNet，你能告诉我怎么做吗？我想在 ohNet 论坛上发布这个问题，但我无法注册（因为我还没有提交安全问题，即使表单上无处可做！）。

ohNet 的源代码、文档和 API 指南看起来都非常有前途，所以我希望你能提供建议......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:53:14.610

> “在对 $DEVROOT 和 $SDKROOT 路径进行一些编辑后，我可以编译许多源代码......”

对于 iPhoneOS 平台，设置以下环境变量。

```
export ROOTDIR="/Applications/Xcode.app/Contents/Developer"
export PLATFORM="iPhoneOS"
export MAX_VERSION="5.1"
export DEVROOT=${ROOTDIR}/Platforms/${PLATFORM}.platform/Developer
export SDKROOT=${DEVROOT}/SDKs/${PLATFORM}${MAX_VERSION}.sdk 
```

然后，在源的根目录中，在文件“Makefile”中，找到以下部分并确保它与此部分相同：

```
ifeq ($(MACHINE), Darwin)
ifeq ($(mac-arm),1)
    # Darwin, ARM -> iOS
    platform ?= iOS
    linkopts_ohNet =    
    devroot=$(DEVROOT)
    sdkroot=$(SDKROOT)
    platform_cflags = -I$(sdkroot)/usr/lib/gcc/arm-apple-darwin10/4.2.1/include/ -I$(sdkroot)/usr/include/ -I/usr/bin/arm-apple-darwin10-gcc -miphoneos-version-min=2.2 -pipe -no-cpp-precomp -isysroot $(sdkroot) -DPLATFORM_MACOSX_GNU -DPLATFORM_IOS -I$(sdkroot)/usr/include/c++/4.2.1/armv6-apple-darwin10/ 
    # It seems a bit weird that iOS uses a sub-dir of Build/Obj/Mac, is that deliberate? --AW
    osbuilddir = Mac/arm
    objdir = Build/Obj/Mac/arm/$(build_dir)/
    platform_linkflags = -L$(sdkroot)/usr/lib/ -arch armv7  -L$(sdkroot)/usr/lib/system
    compiler = $(devroot)/usr/bin/llvm-gcc-4.2  -arch armv7 -isysroot $(SDKROOT) -o $(objdir)
    # No support for linking Shared Objects for ARM MAC
    # link = $(devroot)/usr/bin/llvm-gcc-4.2  -pthread -Wl $(platform_linkflags)
    ar = $(devroot)/usr/bin/ar rc $(objdir)
    native_only = yes 
```

这里的关键点是：

1.  $DEVROOT 和 $SDKROOT 对于您的 iOS SDK 版本是正确的。
2.  变量 $native_only 设置为 yes。当 make 尝试（并且不可避免地失败）在 Mac 主机上构建 ohNetDll 时，这可以避免错误和提前退出。

然后，在终端中，在源根目录（即包含 Makefile 的目录）中键入：

```
make mac-arm=1 
```

希望这可以帮助...

道格

# jsoup - jsoup如何提取此文本

> ID：11154145
> 
> 赞同：0
> 
> 时间：2012-06-22T10:05:30.993
> 
> 标签：jsoup

*更新*

我试图从[这里提取“](http://www.twazzup.com/?q=mls&l=en)**每小时推**文”信息。但是，当我从 jsoup 打印出 html 时，我在任何地方都找不到该信息。

有小费吗？

~~我正在尝试使用 jsoup 从下面的代码中提取文本“ **105 TPH ”。**~~

 ~~```
<div id="speed_realtime" class="speed">
<a title="Tweets Per Hour">105 TPH</a>
</div 
```~~ 

这会是正确的吗？

```
Element t = doc.select("a[title=Tweets Per Hour]").first();
tph = t.text(); 
```

 ~~* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:41:08.453

是的，为什么？它不工作吗？

你也可以这样做：

```
Element tph = doc.select("#speed_realtime").select("a").first().text(); 
```

或者

```
Element tph = doc.select("a[title]").first().text(); 
```

查看文档以获取更多选项...

[使用选择器语法查找元素](http://jsoup.org/cookbook/extracting-data/selector-syntax)

[使用 DOM 方法导航文档](http://jsoup.org/cookbook/extracting-data/dom-navigation)

* * *

**编辑**

尝试这样的事情

```
Document doc = Jsoup.connect("http://www.twazzup.com/?q=mls&l=en").userAgent("Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0)").get(); 
```~~

# ember.js - 使用 EmberJS，如何使用 findProperty/find 方法获取模型？

> ID：11154152
> 
> 赞同：2
> 
> 时间：2012-06-22T10:05:46.653
> 
> 标签：ember.js

我如何找到其名称等于某物的相关模型？我试过: `this.get('content').findProperty('name', name)`，但它似乎不起作用。我想如果我的枚举中没有塞满模型，它会起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:23:01.477

在您的实例上使用`findProperty`/ ，请参阅[http://jsfiddle.net/pangratz666/kPmHr/](http://jsfiddle.net/pangratz666/kPmHr/)：`find``Ember.ArrayController`

```
App.peopleController = Ember.ArrayController.create({
    content: [
        App.Person.create({ name: 'Adam' }),
        App.Person.create({ name: 'John' }),
        App.Person.create({ name: 'Adam' })
    ],

    findByName: function(name) {
        var found = this.findProperty('name', name);
        console.log('found model %@'.fmt(found));
    }
});

App.peopleController.findByName('Adam');​ 
```

# iis-7 - 网址路由不起作用？

> ID：11154155
> 
> 赞同：3
> 
> 时间：2012-06-22T10:06:05.113
> 
> 标签：iis-7, url-rewriting, web-config

用于 url 重写的 web.config 是

```
 <rewrite>
        <rules>
            <rule name="Mobile Portal">
                <match url="^(code)(/)?([^']*)" />
                <action type="Redirect" url="Code.aspx?id={R:3}" />
            </rule>
        </rules>
    </rewrite>

input: www.abc.com/Code.aspx?id=123abcdef
Required output: www.abc.com/code/123abcdef
current output: http://www.abc.com/Code.aspx?id=.aspx 
```

有效的页面网址是**www.abc.com/code/123abc**。我需要 "123abc" 。当我通过**www.abc.com/code/123abc**访问页面时，URL 被转换为“ **http://www.abc.com/Code.aspx?id=.aspx** ”。我使用的是 IIS 7。所以我该如何解决这个问题？

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:30:46.097

您可以使用 url 路由而不是 url 重写。为此，请转到 Global.asax 文件并编写 RegisterRoutes 方法，如下所示：

```
void RegisterRoutes(RouteCollection routes)
{
    routes.MapPageRoute("my_abc_page",
        "code/{id}",
        "~/Code.aspx");
} 
```

使用上述命令，任何请求（如`www.abc.com/code/123abcdef`解释）`www.abc.com/Code.aspx?id=123abcdef`，您都可以在页面代码中访问此 id：

```
theId = Page.RouteData.Values["id"] as string; 
```

# cocoa - 如何计算 NSTextView 中选定文本的正确坐标？

> ID：11154157
> 
> 赞同：3
> 
> 时间：2012-06-22T10:06:10.793
> 
> 标签：cocoa, calayer, nstextview

我需要在`NSTextView`使用`CALayer`叠加层时用插入符号突出显示行，并在我的子类中使用此代码抓取矩形`NSTextView`...：

```
- (NSRect)overlayRectForRange:(NSRange)aRange
{
    NSScreen *currentScreen = [NSScreen currentScreenForMouseLocation];
    NSRect rect = [self firstRectForCharacterRange:aRange];

    rect = [self convertRectToLayer:rect];
    rect.origin = [currentScreen flipPoint:rect.origin];
    rect = [self.window convertRectToScreen:rect];

    return rect;
} 
```

...并放置叠加层：

```
- (void)focusOnLine
{
    NSInteger caretLocation = [aTextView selectedRange].location;
    NSRange neededRange;

    (void)[layoutMgr lineFragmentRectForGlyphAtIndex:caretLocation effectiveRange:&neededRange];
    CALayer *aLayer = [CALayer layer];
    [aLayer setFrame:NSRectToCGRect([aTextView overlayRectForRange:neededRange])];
    [aLayer setBackgroundColor:[[NSColor redColor] coreGraphicsColorWithAlfa:0.5]];
    [[aTextView layer] addSublayer:aLayer];
} 
```

结果，选择覆盖与所需线的宽度一致，但绝对不匹配 Y 轴（X 轴可以）。

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T11:33:11.610

好的，我完全重写了方法`overlayRectForRange:`，现在一切正常。有固定代码：

```
- (NSRect)overlayRectForRange:(NSRange)aRange
{
    NSRange activeRange = [[self layoutManager] glyphRangeForCharacterRange:aRange actualCharacterRange:NULL];
    NSRect neededRect = [[self layoutManager] boundingRectForGlyphRange:activeRange inTextContainer:[self textContainer]];
    NSPoint containerOrigin = [self textContainerOrigin];
    neededRect.origin.x += containerOrigin.x;
    neededRect.origin.y += containerOrigin.y;

    neededRect = [self convertRectToLayer:neededRect];

    return neededRect;
} 
```

# python - Python - 调用多个进程并向它们发送输入

> ID：11154160
> 
> 赞同：0
> 
> 时间：2012-06-22T10:06:33.817
> 
> 标签：python, python-2.7, subprocess

我写了一个类似twitter的服务，我想用python对其做一些压力测试。我有一个客户端程序，称为“客户端”。我想编写一个脚本来启动“客户端”程序的几个进程，发送一些消息，等待几秒钟然后退出。

我写的是

```
p = subprocess.Popen(['client','c1','localhost','4981'],stdin=subprocess.PIPE) 
```

现在我不能调用通信方法，因为它在等待 EOF，但过程还没有结束。调用 stdin.flush 似乎也不起作用。

关于如何执行此操作的任何提示？（我不必在 python 中执行此操作，如果有办法使用 bash 脚本执行此操作也可以）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:15:19.430

您可以使用 bash 循环运行一些客户端并将它们置于后台。如果你需要与一个通信，只需使用*fg*将其置于前台，然后使用*bg再次将其置于后台*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:15:43.643

调用`p.stdin.close()`以表示没有更多消息：

```
#!/usr/bin/python
import time
from subprocess import Popen, PIPE

# start several processes of the the "client" program
processes = [Popen(['client','c1','localhost','4981'], stdin=PIPE)
             for _ in range(5)]

# send a few messages
for p in processes:
    print >>p.stdin, message
    p.stdin.close()

# wait a few seconds (remove finished processes while we wait)
for _ in range(3):
    for p in processes[:]:
        if p.poll() is not None:
           processes.remove(p)
    time.sleep(1)

# and will exit (kill unfinished subprocesses)
for p in processes:
    if p.poll() is None:
       p.kill()
       p.wait() 
```

# oop - 方法的模式或推荐重构

> ID：11154164
> 
> 赞同：2
> 
> 时间：2012-06-22T10:06:42.693
> 
> 标签：oop, design-patterns

我写了一个看起来像这样的方法：

```
public TimeSlotList processTimeSlots (DateTime startDT, DateTime endDT, string bookingType, IList<Booking> normalBookings, GCalBookings GCalBookings, List<DateTime> otherApiBookings) {
{

..... common process code ......

    while (utcTimeSlotStart < endDT)
    {

        if (bookingType == "x")
        {
            //process normal bookings using IList<Booking> normalBookings

        }
        else if (bookingType == "y") {

            //process google call bookings using GCalBookings GCalBookings
        }
        else if (bookingType == "z" {

            //process other apibookings using List<DateTime> otherApiBookings

        }

    }

} 
```

所以我从 3 个不同的地方调用它，每次传递一个不同的预订类型，每个案例传递我有兴趣处理的预订，以及 2 个不用于此预订类型的空对象。

我无法将所有预订都纳入相同的数据类型，这会使这更容易，并且每种预订类型都需要以不同的方式处理，所以我不确定如何改进这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:30:32.607

如果您可以更改调用代码，我建议为每个不同的*预订处理器*创建单独的类，并使用一个公共基类：

```
public abstract class BookingProcessor<TBookings> {
  public TimeSlotList ProcessTimeSlots(DateTime startDT, DateTime endDT, TBookings bookings) {
    // ..... common process code ......
    while (utcTimeSlotStart < endDT) {
      ProcessTimeSlots(utcTimeSlotStart, bookings);
      // ...
    }
  }
  protected abstract ProcessTimeSlots(DateTime utcTimeSlotStart, TBookings bookings);
} 
```

特定的*预订处理器*遵循以下模式：

```
public class NormalBookingsProcessor : BookingProcessor<IList<Booking>> {
  protected override ProcessTimeSlots(DateTime utcTimeSlotStart, IList<Booking> bookings) {
    // process normal bookings using IList<Booking> normalBookings 
  }
} 
```

这样，处理一种类型的预订的代码与其他类型的代码是分开的，这更有利于可测试性和可维护性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:13:33.750

```
// Just do extract method for each booking type processign logic
// also use typed booking type (enum) to leverage switch() conditional flow
// rather than multiple nested if/else

public enum BookingType
{
    X,
    Y,
    Z
}

private void EntryPoint(DateTime startDT, 
    DateTime endDT, 
    string bookingType, 
    IList<Booking> normalBookings, 
    GCalBookings GCalBookings, 
    List<DateTime> otherApiBookings)
{

    // common logic

    BookingType type = (BookingType)Enum.Parse(bookingType.ToUpperInvariant(), typeof(BookingType));

    switch (type)
    {
        case BookingType.X:
            ProcessNormalBookings(startDt, endDt, normalBookings);
            break;
        case BookingType.Y:
            ProcessGcCalBookings(startDt, endDt, GCalBookings);
            break;
        case BookingType.Z:
            ProcessOtherApiBookings(startDt, endDt, otherApiBookings);
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:23:30.080

将这 3 个数据结构变成预订类，都继承自具有接口的公共父级：

```
public TimeSlotList processTimeSlots (DateTime startDT, DateTime endDT) 
```

或者

看到类似但更好解释的答案[https://stackoverflow.com/a/11154505/537980](https://stackoverflow.com/a/11154505/537980)

或者

写3个例程

```
public TimeSlotList processTimeSlots_Normal (DateTime startDT, DateTime endDT, string bookingType, IList<Booking> normalBookings) {
{
    common_process_code(local_vars);

    //process normal bookings using IList<Booking> normalBookings
} 
```

等等

或者

将原始文件设为私有，并编写 3 个公共包装器（扩展性较差）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T13:32:54.877

你说

> “我无法将预订全部归入相同的数据类型”

我说“为什么不”？

如果在最低级别，这些预订对象从其他类型继承，则使用组合并将这些对象作为 AbstractBooking 类的三个子类（NormalBooking、GoogleBooking、OtherBooking）的成员。

在这一点上，我认为您根据您的帖子知道，您可以在每个子类中拥有自定义预订代码。

# javascript - 具有多层的 Javascript 继承：A->B->C，在 C 中使用来自 A 的函数

> ID：11154168
> 
> 赞同：1
> 
> 时间：2012-06-22T10:06:56.873
> 
> 标签：javascript, inheritance, virtual-inheritance

在javascript中，我想实现以下目标：

A 类（数组）-> B 类（EntityContainer）-> C 类（EntityList）

在代码中：

```
function EntityContainer() {
    ...
}

EntityContainer.prototype = new Array;
EntityContainer.prototype.constructor = EntityContainer;
EntityContainer.prototype.parent = Array.prototype

function EntityList() {
    ...
}

EntityList.prototype = new EntityContainer;
EntityList.prototype.constructor = EntityList;
EntityList.prototype.parent = EntityContainer.prototype 
```

当然，继承的东西可以封装在“inheritsFrom”函数中。

在迭代所有元素（使用 this.length）时，这是实现我可以在 EntityList 中调用“this[i]”的正确方法吗？

你有什么可以在这里做得更好的吗？

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:49:05.947

您想做您所描述的事情的唯一原因是使用`instanceof`运算符进行类型检查。如果不需要，最好使用组合，并将数组对象作为实例变量。访问器`[]`可以忽略不计，可以用`get()`.

# java - Spring：解组 XML 字符串时出现 OXM 错误（castor）

> ID：11154172
> 
> 赞同：4
> 
> 时间：2012-06-22T10:07:20.167
> 
> 标签：java, xml, spring, spring-integration, oxm

我正在做 Spring Integration 项目。我想通过解组转换器将 XML 字符串发布到一个通道并在另一个通道中接收 Java 对象。

在我的 Spring 配置中，我使用了这些通道和 bean：

```
<!-- channel to for publishing XML string -->
<int:publish-subscribe-channel id="channels.pubsub.inXml" />

<!-- channel for receiving transformed reply -->
<int:channel id="channels.fromXmlChannel">
    <int:queue capacity="10" />
</int:channel>

<!-- transformer unmarshalling XML to Java object -->
<int-xml:unmarshalling-transformer
    unmarshaller="marshaller"
    input-channel="channels.pubsub.inXml"
    output-channel="channels.fromXmlChannel" />

<!-- marshaller bean -->
<bean id="marshaller" class="org.springframework.oxm.castor.CastorMarshaller" /> 
```

我正在单元测试中尝试这个，所以我有自动连接的通道可以使用：

```
@Autowired @Qualifier("channels.pubsub.inXml")
MessageChannel inXmlChannel;

@Autowired @Qualifier("channels.fromXmlChannel")
MessageChannel fromXmlChannel; 
```

我想要解组的贸易类是非常微不足道的 POJO：

```
class Trade {
    String id;
    String direction;
    // getters, setters, constructors
} 
```

这是我的 JUnit 测试方法，但在第 3 行出现异常：

```
 @Test
public void testUnmarshallingTransformer() {
    String xml = "<trade id='ID-01' direction='DIR-PRG' />";

    Message<String> message = MessageBuilder.withPayload(xml).build();
    inXmlChannel.send(message, TIMEOUT);
    Message<?> received = ((PollableChannel) fromXmlChannel).receive(TIMEOUT);

    System.out.println("\n\n" + received.getPayload());
} 
```

最后是堆栈跟踪：

```
org.springframework.integration.transformer.MessageTransformationException: failed to transform message
    at org.springframework.integration.transformer.AbstractTransformer.transform(AbstractTransformer.java:44)
    at org.springframework.integration.transformer.MessageTransformingHandler.handleRequestMessage(MessageTransformingHandler.java:67)
    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:97)
    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:73)
    at org.springframework.integration.dispatcher.BroadcastingDispatcher.invokeHandler(BroadcastingDispatcher.java:105)
    at org.springframework.integration.dispatcher.BroadcastingDispatcher.dispatch(BroadcastingDispatcher.java:96)
    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:61)
    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:157)
    at sk.xorty.transformers.BuiltinTransformersTest.testUnmarshallingTransformer(BuiltinTransformersTest.java:190)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: org.springframework.oxm.UnmarshallingFailureException: Castor unmarshalling exception; nested exception is org.exolab.castor.xml.MarshalException: The class for the root element 'trade' could not be found.{File: [not available]; line: 1; column: 41}
    at org.springframework.oxm.castor.CastorMarshaller.convertCastorException(CastorMarshaller.java:487)
    at org.springframework.oxm.castor.CastorMarshaller.unmarshalReader(CastorMarshaller.java:399)
    at org.springframework.oxm.support.AbstractMarshaller.unmarshalStreamSource(AbstractMarshaller.java:371)
    at org.springframework.oxm.support.AbstractMarshaller.unmarshal(AbstractMarshaller.java:134)
    at org.springframework.integration.xml.transformer.UnmarshallingTransformer.transformPayload(UnmarshallingTransformer.java:107)
    at org.springframework.integration.transformer.AbstractPayloadTransformer.doTransform(AbstractPayloadTransformer.java:33)
    at org.springframework.integration.transformer.AbstractTransformer.transform(AbstractTransformer.java:33)
    ... 39 more
Caused by: org.exolab.castor.xml.MarshalException: The class for the root element 'trade' could not be found.{File: [not available]; line: 1; column: 41}
    at org.exolab.castor.xml.Unmarshaller.convertSAXExceptionToMarshalException(Unmarshaller.java:866)
    at org.exolab.castor.xml.Unmarshaller.unmarshal(Unmarshaller.java:763)
    at org.springframework.oxm.castor.CastorMarshaller.unmarshalReader(CastorMarshaller.java:396)
    ... 44 more
Caused by: org.xml.sax.SAXException: The class for the root element 'trade' could not be found.
    at org.exolab.castor.xml.UnmarshalHandler.processFirstElement(UnmarshalHandler.java:890)
    at org.exolab.castor.xml.StartElementProcessor.compute(StartElementProcessor.java:103)
    at org.exolab.castor.xml.UnmarshalHandler.startElementProcessing(UnmarshalHandler.java:811)
    at org.exolab.castor.xml.UnmarshalHandler.startElement(UnmarshalHandler.java:733)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:506)
    at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:182)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.emptyElement(XMLDTDValidator.java:766)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1302)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$ContentDriver.scanRootElementHook(XMLDocumentScannerImpl.java:1275)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3063)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:881)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at org.exolab.castor.xml.Unmarshaller.unmarshal(Unmarshaller.java:751)
    ... 45 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-03T09:21:53.907

要解决此问题，您需要指定要解析的类。CastorMarshaller 有两个属性 targetClasses ，它是一个对象数组，而 targetPackages 是一个字符串数组，您可以验证此类的来源。

下面的代码将在没有映射文件的情况下解决您的问题。

```
<bean id="marshaller" class="org.springframework.oxm.castor.CastorMarshaller">
  <property name="targetClasses">
    <array>
      <value>Your class location (ex : com.domain.YourClass)</value>
    </array>
  </property>
</bean> 
```

如果要解析的类仍然未知，则必须验证您的 xml 文件格式。

例子 ：

Java 类

```
public class MyUser {
  // class attributs

  private String firstNameField;
  private String lastNameField;

  // class methods
  //...... 
} 
```

xml文件

```
<?xml version="1.0" encoding="UTF-8"?>
<my-user>
  <first-name-field>firstName</first-name-field>
  <last-name-field>lastName</last-name-field>
</my-user> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:28:08.200

请参阅 CastorMarshaller 的 java 文档。将 <property name="targerClass" value="foo.Trade"/> 添加到编组器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:15:17.823

您必须在 castor 配置文件中或作为 unmarshaller 配置的一部分指定您的`trade`标签应映射到您的`Trade`类，这似乎是这里的问题。

您应该能够直接使用 CastorMarshaller 本身来做到这一点：

```
<bean id="marshaller" class="org.springframework.oxm.castor.CastorMarshaller">
<property name="targetClasses>
 <list>
  <value>Trade.class</value>
 </list>
</property>
</bean> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T17:47:38.957

使用下面的代码可以解决这个问题。

```
<bean id="marshaller" class="org.springframework.oxm.castor.CastorMarshaller">
 <property name="targetClasses" value="Trade">

</property> 
```

贸易应该是你的名字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-05T10:58:30.867

使用此属性：

```
marshaller.setUseXSITypeAtRoot(true); 
```

然后在 xml 中，您将在具有确切类的根元素中看到属性 xsi:type=。Unmarshaller 将在那之后工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-09T07:24:39.667

试试这个示例格式，主要需要注意的是 - unMarshaller.setClass(com.hello.test.order.cw.bind.Message.class); 它将在非默认包中找到类，默认情况下 unmarshaller 期望该类在默认包中。

```
/**
 * 
 * @param inType
 * @param elements
 * @param orderInXml
 * @return
 */
private boolean 
    validateXMLForTargetElements(String inType,
            List<String> elements,String orderInXml) {
    try {
        Unmarshaller unMarshaller = new Unmarshaller();
        StringReader stringReader = new StringReader(orderInXml);
        unMarshaller.setClass(com.hello.test.order.cw.bind.Message.class);

        System.out.println("The XML After Modification "+orderInXml);
        com.hello.test.order.cw.bind.Message message = 
                (Message) unMarshaller.unmarshal(stringReader);
        System.out.println("The Object Message After"
                + " Converting from XML is "+message);
    } catch(Exception ex) {
        ex.printStackTrace();
    }
    return false;
} 
```

# ios - entry.remove(success, fail) 调用成功，但不删除图像

> ID：11154174
> 
> 赞同：2
> 
> 时间：2012-06-22T10:07:39.247
> 
> 标签：ios, xcode, cordova

我正在尝试删除 phonegap (iOS) 中的图像，所以我打电话：

```
window.resolveLocalFileSystemURI(imageURI, ok, no); 
```

这调用了 ok 函数

```
function ok(entry) {
            alert("Deleting: " + entry.name);
            entry.remove();
        } 
```

所以一切都按计划进行，但我的图像仍然出现在我的库中。我究竟做错了什么？

完整来源：

```
window.resolveLocalFileSystemURI(imageURI, ok, no);
        function ok(entry) {
            alert("Delete file entry: " + entry.name);
            entry.remove(pictureRemoved, notRemoved);
        }
        function pictureRemoved(){
            alert('removed');
        }
        function notRemoved(){
            alert('not Removed');
        }
        function no(error) { alert
        ("resolveFileSystemURI failed: " + error.code); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:58:03.730

试试下面的代码：

```
//Delete file 
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, 
    function(fileSys) { 

        fileSys.root.getFile(imageURI, {create: false}, 
            function(file) {
                file.remove(pictureRemoved, notRemoved);                                                  
            }, no);
    }, no); 
```

它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-14T07:08:09.727

添加文件插件。它会起作用的。

# entity-framework - Entity Framework 4.3 对象图更新

> ID：11154177
> 
> 赞同：1
> 
> 时间：2012-06-22T10:08:07.343
> 
> 标签：entity-framework

我有一个对象 OrderDetail。这有一个 ID、产品对象列表和一个运输详细信息对象。

订单详细信息和运输详细信息是新的，产品不是，即它们已经存在于数据库中。

我的问题是，当我执行 context.savechanges() 时，产品被添加到数据库中，即重复。

无论如何我可以将产品标记为“不要插入只使用 ID”吗？

我真的不想改变我的模型，说每个产品都有一个订单细节，因为（1）这在逻辑上是错误的，（2）可能会导致性能问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:58:13.390

> 无论如何我可以将产品标记为“不要插入只使用 ID”吗？

是的，但您必须自己处理：

```
dbContext.OrderDetails.Add(orderDetail);
foreach(var product in orderDetail.Products) {
    dbContext.Entry(product).State = EntityState.Unchanged;
}    
dbContext.SaveChanges(); 
```

# objective-c - 正在通过“自我”访问属性。比直接访问 ivar 慢吗？

> ID：11154178
> 
> 赞同：2
> 
> 时间：2012-06-22T10:08:14.887
> 
> 标签：objective-c, properties, instance-variables

例如，如果我有一个属性`index`和一个 ivar `_index`，使用起来会不会慢一些`self.index`,`[self index]`和`[self setIndex:]`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:41:36.027

使用访问器会产生开销，至少是方法调用。

也就是说，猜测和证明是不同的东西。开销可能很大，也可能不大。在任何情况下，分析应用程序将显示 CPU 时间花费在哪里以及应该优化什么。我严重怀疑在直接 ivars 上使用访问器会影响任何应用程序，应该避免使用访问器。

原子和复制属性会慢得多，这些选择会产生更大的影响，应该更仔细地考虑。在适当的时候使用它们。

但答案在于分析您的应用程序。

编辑：

访问器有很多好处：封装、客户端、派生类和类本身之间的代码一致性、覆盖、在需要时调试属性访问、只读访问检查……有很多很好的理由来支付少量的性能价格。所有好的理由并不总是足够好。;)

如果访问器成为问题，我会说 Objective-C 类可能不是该工作的合适选择。C++ 类有更多的机会变得更快：非虚拟方法、内联方法、基于堆栈的实例......

# asp.net - 使用 asp.net 应用程序将数据传递到具有宏的 excel 文件

> ID：11154184
> 
> 赞同：1
> 
> 时间：2012-06-22T10:08:49.597
> 
> 标签：asp.net

我想导出 IIS 上包含图形和其他数据的 excel 文件。我需要的是，当用户单击导出时，数据需要传递到该 excel 文件，然后使用 asp.net 应用程序将其导出到客户端机器上的客户端。我只想知道如何将数据传递给具有宏的 excels 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:20:09.567

您可以尝试使用此代码（您可以使用互操作）

```
 var oExcel = new ApplicationClass();

            var oBook = oBooks.Open("c:\\test.xls", oMissing, oMissing,
                oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, 
                oMissing, oMissing, oMissing, oMissing, oMissing, oMissing);

            // Launch the macros (his name is Run).
            RunMacro(oExcel, new Object[]{"arg1", "arg2"});

            // Quit Excel and clean up.
            oBook.Close(false, oMissing, oMissing);
            System.Runtime.InteropServices.Marshal.ReleaseComObject (oBook);
            oExcel.Quit();

And function in order to launch macro

 private void RunMacro(object oApp, object[] oRunArgs)
            {

                oApp.GetType().InvokeMember("Run", System.Reflection.BindingFlags.Default | System.Reflection.BindingFlags.InvokeMethod, null, oApp, oRunArgs);
            } 
```

# integration - shopify 导航

> ID：11154188
> 
> 赞同：4
> 
> 时间：2012-06-22T10:09:06.127
> 
> 标签：integration, shopify, navision, dynamics-nav

我正在寻找有关 Shopify 和 Navision 的答案。我们正在考虑将我们当前的网店主机切换到 Shopify。

然而——一件重要的事情是，我们可以让 Shopify 直接与我们的会计系统——Navison（现在的 Microsoft Dynamics NAV）一起工作。这一定是可能的，但是这种集成有多全面（和昂贵），你们中有没有人在这个领域有任何经验？

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T23:42:56.743

Since I don't have enough points to post a comment I'm posting this as an answer.

I'm really sorry to have to post such a negative comment like this, especially since I may need help from Shopify dev suport at some point and I really don't want to piss them off, so hopefully they won't take this personally.

I can appreciate some of the design decisions Shopify has made with its APIs, but David Lazar and crew seem to be missing Jarko's point or just don't care.

I personally could care less about SOAP, I use JSON and REST for everything whenever possible and am pretty agnostic when it comes to technology stacks, but I too am disgusted by the limitations of the Shopify product API (and other parts of the API), which, at first glance looks half way decent until you start trying to use it for any heavy lifting.

Virtually every other similar API I've worked with allows devs to create multiple products with a single API call, in fact this is the first API I've ever had to use that didn't offer that ability.

Considering how slow the Shopify API is at creating a single product with variants and images, it's a wonder there's anyone at all using it to manage more than a handful of products. For example, I spent the better part of 2 days waiting for my script to finish creating all our products via the API due to the 1 products per call limitation.

My API library is designed to respect the API request limits, but we never even get close to the limits because it takes between 11 and 20 seconds to create a single product with variants and images. I have roughly 8000 products to upload. Do the math. For people used to working with true enterprise level APIs that can handle thousands of products per API call (AmazonMWS is a perfect example), waiting 2 days for products to finish being created is just crazy, and god forbid you need to do something as simple as reorder the products once they are uploaded.

In that case you get to make another 8000+ api calls to delete all the products (which takes a little over an hour) and then start the upload process all over again and wait 2 days. That's about as inefficient a system as I can imagine. I've tried doing bulk CSV uploads to work around these problems, but guess what? The bulk upload can't handle a CSV file bigger than a couple of megabytes and to reference bulk-uploaded products via the API in future API calls you have to specify a shopify product ID which means that after bulk uploading them, you then have to pull down a list of all the product ids and variant ids and feed that info into your database so you can then reference them by shopify's internal ids instead of some kind of parentid or sku set by the merchant.

All in all, it's a total nightmare to deal with. By contrast it takes about an hour for me to upload and process a full product feed via Amazon's API, including 6000+ parent products with 60,000+ child variants and 60,000+ images. Amazon's API is annoying for different reasons (it takes 5 separate feed formats to upload all the product info and their documentation could make a grown man cry), but at least it's generally fast and capable of processing thousands of products in under an hour.

Amazon’s API also provides mechanisms for bulk updating prices and inventory quantities and updating product data by a merchant-defined identifier such as an SKU which means that it takes about 5 minutes for Amazon to update quantities and prices for my entire inventory without any of the hassles of mapping ids back to products in our internal systems just to be able to reference them 1 at a time.

Also, the fact that there's no way to tell the Shopify product API to replace a product with a duplicate handle instead of creating a new one means that if my script times out or the API chokes due to a communication error (or like today when the API mysteriously began return 404 errors for several hours) and I have to restart multiple times, I end up getting duplicate products which are then very annoyingly difficult to track down and eliminate.

All of this together makes for a miserable experience for anyone who has to manage more than a few hundred products via the Shopify api. Telling developers that it's their own fault for not wanting to jump through all these hoops indicates that Shopify devs are either lazy or just totally out of touch with how developers need to use the API.

Were I not already 3 weeks into my 2-week integration and theoretically just hours away from launching a new site I would be ditching Shopify at this point. This project is now more than a week overdue entirely because of how cumbersome the product API makes managing large numbers of products. And forcing users to come to Stackoverflow to post API questions where they can't even comment without having a certain reputation score....I could go on and on. Don't even get me started about the lack of a discount/promotion api, or the inability to create users via the API that can log in without an admin manually going to the shopify backend and clicking a link for every user they want to activate.

Every time I think I'm going to be able to get something done with this API it turns out the be a clusterf$%*!. But hey, it MUST be an awesome API because it's all done in Ruby using REST principles...oh goody! Sigh. I'll take an ancient SOAP based api over this any day, but it's too late for me to ditch this project and start over now. Double sigh.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T20:26:07.553

要记住的一件事是[NAV 2013](http://msdn.microsoft.com/en-us/library/hh173988%28v=nav.70%29.aspx)指日可待。此版本包括对 Odata 的支持，[这](http://www.odata.org/ "数据")可能会使 Shopify 集成变得更加容易，因为 JSON 将成为通用数据格式。然而，全流程销售交易中涉及的所有各种细节都确保了这种与 ERP 系统（不仅仅是资产净值）的集成将是一项重大的工作。除非您的需求非常狭窄，否则请准备好从您的资产净值合作伙伴那里看到一些昂贵的报价。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:18:50.067

查看 Shopify的[API 文档](http://api.shopify.com/)，在 NAV 和 Shopify 之间同步数据似乎非常简单。在 NAV 中，没有内置的方式来使用 Shopify API，相反，NAV 仅提供与其他系统进行通用集成的构建块。因此，您需要从 NAV 合作伙伴处获得报价，以确定他们编写集成的成本。

成本取决于您需要在两个系统之间同步多少实体，以及您使用的是哪个版本的 NAV。如果您使用的是 NAV 2009 R2（最新版本），合作伙伴可以编写运行在 NAV 服务器中的[.NET](http://msdn.microsoft.com/en-us/library/gg502499.aspx)代码来直接调用 Shopify。如果您使用的是较早版本，则合作伙伴将需要使用[COM](http://msdn.microsoft.com/en-us/library/aa973247.aspx)或[CFront](http://blogs.msdn.com/b/nav_developer/archive/2008/04/19/beginners-guide-how-connect-to-nav-from-a-net-project-using-c-front.aspx)，这需要更多的工作。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-22T16:30:54.657

My 2 cents is that when I tried to integrate Shopify to Navision I ran into the fact that it requires SOAP. If you have no experience with SOAP, consider yourself lucky. It is an expression in how not to do Internet Computing in an elegant fashion. It is confined to proprietary Enterprise systems, no surprise there, like Microsoft sells. No one else would bother supporting that software poo.

As long as you toil with .Net C# or Java and have experience with SOAP, bridging Shopify to Navision is likely a simple task. For anyone else that works with the modern Internet using HTTP to transfer data as XML or JSON, the transition to SOAP should be reason enough to run away screaming. Again, just my 2 cents.

# android - 如何使用robotium点击软键盘的完成按钮？

> ID：11154192
> 
> 赞同：2
> 
> 时间：2012-06-22T10:09:22.873
> 
> 标签：android, robotium, soft-keyboard

我需要在编辑文本文本中输入一些文本，然后必须单击**软键盘的****完成**按钮。为此，我使用了以下代码

 **```
solo.sendKey(Solo.ENTER); 
```

和

```
solo.clickOnText("Done"); 
```

但它不工作。如何使用**robotium**点击软键盘中的**完成**按钮？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-28T21:07:47.953

Robotium 5.0.1 有一个方法 pressSoftKeyboardNextButton，定义为：

```
public void pressSoftKeyboardNextButton(){
  final EditText freshestEditText = viewFetcher.getFreshestView(viewFetcher.getCurrentViews(EditText.class));
  if(freshestEditText != null){
    inst.runOnMainSync(new Runnable()
    {
      public void run()
      {
        freshestEditText.onEditorAction(EditorInfo.IME_ACTION_NEXT); 
      }
    });
  }
} 
```

可以应用相同的方法来使用 EditorInfo.IME_ACTION_DONE 调用完成按钮

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T01:03:23.550

如您所知，软键是位图，它不能使用按键控制。你可以做的是知道位置并按下位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:07:22.110

实际上，您必须执行 solo.goBack() 才能关闭键盘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:22:15.387

你有没有尝试过？

```
solo.sendKey(16); 
```

实际上，

**KeyEvent.FLAG_EDITOR_ACTION**

```
public static final int FLAG_EDITOR_ACTION

This mask is used for compatibility, to identify enter keys that are coming from an IME whose enter key has been auto-labelled "next" or "done". This allows TextView to dispatch these as normal enter keys for old applications, but still do the appropriate action when receiving them.
Constant Value: 16 (0x00000010) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-07T06:44:18.410

无需按下**完成**按钮即可继续操作。在编辑文本中输入文本后，您可以给出下一条指令`solo.clickOnText("submit")`或其他需要的指令。****

# jquery - JQuery: TypeError: Object [object Object] 没有方法'datePicker'

> ID：11154195
> 
> 赞同：1
> 
> 时间：2012-06-22T10:09:36.487
> 
> 标签：jquery

加载.js：

```
jQuery(document).ready(function($) {
    $('.dialog ul li').click(function(e) {
        switch($(this).attr('id')) {
        case 'addProject':
            $('.addDialog').load('/add/addprojectform');
            break;
        case 'addTask':
            $('.addDialog').load('/add/addtaskform');
            $('#dueDate').datePicker();
            break;
        }
    });
}); 
```

这是在标题中：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<script type="text/javascript">
$.noConflict();
</script>
<script src="js/utils.js"></script>
<script src="js/load.js"></script> 
```

我得到的错误是：

```
Uncaught TypeError: Object [object Object] has no method 'datePicker' load.js:10
(anonymous function) load.js:10
f.event.dispatch jquery.min.js:3
f.event.add.h.handle.i jquery.min.js:3 
```

我尝试了几种方法来修复它，但错误仍然存​​在。是什么导致了错误？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:11:25.837

由于`load`执行异步 ajax 调用并且元素`#duedate`位于资源内，因此您必须等待调用结束，然后才能使用应用于该元素的方法

`done()`由于 jQuery 上的任何 ajax 方法都返回一个延迟对象，因此您可以在回调中继续执行代码

```
$('.addDialog').load('/add/addtaskform').done(function() {
    $('#dueDate').datePicker();
}); 
```

或使用简单的成功回调

```
$('.addDialog').load('/add/addtaskform', function() {
    $('#dueDate').datePicker();
}); 
```

# php - mysql获取包含值的字段名称

> ID：11154201
> 
> 赞同：-2
> 
> 时间：2012-06-22T10:10:01.120
> 
> 标签：php, mysql

桌子

```
---------------------------------------------
| id | first_name | middle_name | last_name |
---------------------------------------------
| 1  | abc        |             | def       |
---------------------------------------------
| 2  |            |             | xyz       |
---------------------------------------------
| 3  |  xyz       |             |           |
--------------------------------------------- 
```

我想要 sql 查询，它将输出作为包含值的字段名称并排除具有空值或空值的字段。

像

id, first_name, last_name

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T10:32:07.937

第一次尝试，结果见 fiddle：

[http://sqlfiddle.com/#!2/b6d7b/7](http://sqlfiddle.com/#!2/b6d7b/7)

```
SELECT
  CONCAT_WS(',',
      IF(id          IS NULL, NULL, 'id'),
      IF(first_name  IS NULL, NULL, 'first_name'),
      IF(middle_name IS NULL, NULL, 'middle_name'),
      IF(last_name   IS NULL, NULL, 'last_name')
  )
FROM person 
```

据我所知，您无法创建使用动态创建的表/字段名称的 MySQL 查询。查询优化器必须在实际执行之前准确知道查询中将使用哪些表和字段，这就是上述查询包含手动编写的字段名称的原因。

虽然您可以使用 来创建关于数据库列的查询`INFORMATION_SCHEMA`，但您不能使用接收到的列名进行查询，除非您使用 php 代码、存储过程等生成所需的 sql 代码。

见[http://dev.mysql.com/doc/refman/5.0/en/columns-table.html](http://dev.mysql.com/doc/refman/5.0/en/columns-table.html)

如果您想查找姓名中包含“joh”的人，并且字段名称实际上包含“joh”，则可以使用类似的查询：

[http://sqlfiddle.com/#!2/f2597/3](http://sqlfiddle.com/#!2/f2597/3)

```
SELECT
  id AS person_id,
  CONCAT_WS(',',
      IF(first_name  LIKE '%joh%', 'first_name'  , NULL),
      IF(middle_name LIKE '%joh%', 'middle_name' , NULL),
      IF(last_name   LIKE '%joh%', 'last_name'   , NULL)
  ) AS name_parts
FROM person
WHERE first_name  LIKE '%joh%'
   OR middle_name LIKE '%joh%'
   OR last_name   LIKE '%joh%'; 
```

如果您想要每个列名，并且该列中至少有一个 NOT NULL 值，请尝试以下查询：

[http://sqlfiddle.com/#!2/8dec7/5](http://sqlfiddle.com/#!2/8dec7/5)

```
SELECT
  CONCAT_WS(',',
      IF(COUNT(id          )>0, 'id'         ,NULL),
      IF(COUNT(first_name  )>0, 'first_name' ,NULL),
      IF(COUNT(middle_name )>0, 'middle_name',NULL),
      IF(COUNT(last_name   )>0, 'last_name'  ,NULL)
  )
FROM person; 
```

它使用 COUNT(expr)，其中 ( [http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_count](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_count) ) `Returns a count of the number of non-NULL values of expr`。

# sql - SQL：为重复条目创建计数器

> ID：11154202
> 
> 赞同：2
> 
> 时间：2012-06-22T10:10:07.147
> 
> 标签：sql, sql-server, sql-server-2008-r2, duplicates

我想在导入步骤中为中间表上的重复条目创建一个整数计数器。假设我有一个名为 的表`FinalTable`，如下所示：

`FinalTable`

```
ID       Date          SameDateCounter
1003     2012/01/01    NULL
1004     2012/02/01    NULL
1005     2012/03/01    1
1006     2012/03/01    2
1007     2012/03/01    3
1008     2012/04/01    1
1009     2012/04/01    2 
```

并且对 有唯一的约束`(Date, SameDateCounter)`。在中间步骤中，数据位于 中，除了没有任何约束外，它`IntermediateTable`看起来一模一样。`FinalTable`所以这个问题的出发点在这里：。

`IntermediateTable`：

```
ID       Date          SameDateCounter
1003     2012/01/01    NULL
1004     2012/02/01    NULL
1005     2012/03/01    NULL
1006     2012/03/01    NULL
1007     2012/03/01    NULL
1008     2012/04/01    NULL
1009     2012/04/01    NULL 
```

我需要生成 SameDateCounter 的值，从一个开始，其中日期出现多次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:19:49.143

您可以将`ROW_NUMBER()`函数与`PARTITION BY`子句结合使用：

```
;WITH Data AS
(  
   SELECT
       ID, Date,
       SameDateCounter = ROW_NUMBER() OVER (PARTITION BY Date ORDER BY ID DESC)
   FROM dbo.YourTableNameHere
)
SELECT *
FROM Data 
```

该`PARTITION BY Date`子句将每个单独的值分组`Date`到它自己的“分区”中，并`ROW_NUMBER()`为每个分区分配从 1 开始的数字。

因此，您`SameDayCounter`将在每个新的一天从 1 开始，并将显示该特定日期的行。

# iphone - 如何使用三个 UIScrollview 重复图像 [Both Sides]

> ID：11154203
> 
> 赞同：1
> 
> 时间：2012-06-22T10:10:18.603
> 
> 标签：iphone, ios, image, uiscrollview, repeat

```
-(void)viewDidLoad 
{
    [super viewDidLoad];

    // add the last image (image4) into the first position
    [self addImageWithName:@"image4.jpg" atPosition:0];

    // add all of the images to the scroll view
    for (int i = 1; i < 5; i++)
    {
        [self addImageWithName:[NSString stringWithFormat:@"image%i.jpg",i] atPosition:i];
    }

    // add the first image (image1) into the last position
    [self addImageWithName:@"image1.jpg" atPosition:5];

    scrollView.contentSize = CGSizeMake(320, 2496);    
    [scrollView scrollRectToVisible:CGRectMake(0,416,320,416) animated:NO]; 
}

- (void)addImageWithName:(NSString*)imageString atPosition:(int)position {
    // add image to scroll view
    UIImage *image = [UIImage imageNamed:imageString];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = CGRectMake(0,position*416,320, 416);
    [scrollView addSubview:imageView];
    [imageView release];
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)sender {    
    NSLog(@"%f",scrollView.contentOffset.y);
    // The key is repositioning without animation      
    if (scrollView.contentOffset.y == 0) {         
        // user is scrolling to the left from image 1 to image 4         
        // reposition offset to show image 4 that is on the right in the scroll view         
        [scrollView scrollRectToVisible:CGRectMake(0,1664,320,416) animated:NO];     
    }    
    else if (scrollView.contentOffset.y == 2080) {         
        // user is scrolling to the right from image 4 to image 1        
        // reposition offset to show image 1 that is on the left in the scroll view         
        [scrollView scrollRectToVisible:CGRectMake(0,416,320,416) animated:NO];         
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:56:24.710

我不想重复我的答案，在下面的页面中，我已经写了如何创建一个带有 3 个图像的滚动视图，可以在两个水平方向上无限滚动：

[https://stackoverflow.com/a/12856174/936957](https://stackoverflow.com/a/12856174/936957)

如果您更准确地描述您的问题以及您想要实现的目标，人们可以更轻松地提供帮助。

# javascript - jQuery多个回调到一个回调计数调用

> ID：11154205
> 
> 赞同：2
> 
> 时间：2012-06-22T10:10:22.680
> 
> 标签：javascript, jquery

**我只需要一个回调和多个回调。使用一个简单的“类” MultiCallback 来计算调用，它似乎已经解决了。但是jQuery的fadeIn函数只调用了一次mCallback。**

它必须调用 mCallback 3 次。这是通过直接在顶级范围内使用回调函数来实现的。

在我自己的函数上也测试了我的 MultiCallback 类，没有任何问题。我知道还有其他方法，例如[使用 jQuery 隐藏多个元素并获取一个回调](https://stackoverflow.com/questions/7378349/hide-multiple-elements-with-jquery-and-get-one-callback)......只是想知道我的逻辑有什么问题。

```
<div id="1" style="display: none; background-color: green;"></div>
<div id="2" style="display: none; background-color: red;"></div>
<div id="3" style="display: none; background-color: blue;"></div>

<script>

    var allElements = "#1, #2, #3";
    var multiCallback = new MultiCallback( $(allElements).length, function()
            {
                console.log("NEVER ENTER CALLBACK");
            });
    $(allElements).fadeIn(400, multiCallback.mCallback());

    function MultiCallback(limit, fn)
    {
        var finishedCalls = 0;

        function mCallback()
        {
            // Just enter one time !
            if (++finishedCalls == limit)
            {
                fn();
            }
        }

        return {
            mCallback : mCallback
        }
    }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:21:19.160

改变

```
// executes function, returns undefined, passing undefined
$(allElements).fadeIn(400, multiCallback.mCallback()); 
```

到

```
// pass a reference to the function
$(allElements).fadeIn(400, multiCallback.mCallback); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:33:35.633

1.  将 multiCallback.mCallback() 替换为 multiCallback.mCallback

2.  将您的代码放入其中，`$(function(){ ... });`因为此时 DOM 元素可能不可用。

[jsFiddle上的固定代码](http://jsfiddle.net/KjWwm/1/)

# php - 如何在 symfony 中为具有多个参数的 url 设置路由？

> ID：11154207
> 
> 赞同：0
> 
> 时间：2012-06-22T10:10:29.630
> 
> 标签：php, symfony1, routing, url-routing

我正在使用 symfony 1.0 并为几个 URL 设置了路由，如下所示。

```
static_pages:
url: docs/:page.htm
param: { module: docs, action: index } 
```

现在，我为另一种 URL 设置了路由。

```
URL is http://news4u.com/search/description/id/3/css/a/act/a 
```

我已将路由设置如下

```
description:
url: /search/description/id/:id/css/:manu/act/:mgh
param: { module: search, action: description} 
```

这是获取“css”和“act”值的正确格式吗？在 URL 缺少 css 参数时，我的意思是如果 url 如下所示：

```
http://news4u.com/search/description/id/3/css//act/a 
```

- getRequestParameter('css') 的值显示为 'act' 而 - getRequestParameter('act') 的值为空

所以，我尝试应用路由，如果错了请纠正我。使用上面的路由配置，我没有得到想要的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:36:45.273

您不一定需要在 routing.yml 文件中指定“id”、“css”和“act”作为参数，除非您使用它们在 URL 中的存在来将用户发送到搜索模块和描述操作。

在您的 routing.yml 中使用以下规则仍然有效：

```
default:
  url:   /:module/:action/* 
```

然后你应该可以使用

```
url_for('search/description', array(
   'id' => 4, 
   'css' => 'something', 
   'act' => 'blah'
); 
```

生成这样的链接：/search/description/id/4/css/something/act/blah

# git - Git 备份：我可以在推送到 git 裸存储库时复制它吗？

> ID：11154211
> 
> 赞同：7
> 
> 时间：2012-06-22T10:10:50.217
> 
> 标签：git

在我们公司，我们正在尝试从 svn 迁移到 git。我们想让这对团队来说变得简单，同时不会给系统管理员带来太多负担。

我们已经找到了一种方法来做到这一点，方法是在每个团队拥有的（Windows）网络驱动器上创建一个裸存储库，然后向/从那里推/拉。身份验证是通过文件访问权限安排的，因此无需设置 https 和整个身份验证内容。伟大的！（我们可以通过 VPN 远程访问驱动器，所以它几乎和 https 或 git+ssh 解决方案一样好）

更好的是，我们甚至可以免费获得备份，因为网络共享已经被备份。但是，此备份的运行相当不可预测（备份持续几个小时，因此可能会持续到下一个工作日）。

*因此，当*开发人员推送到存储库时，可能正在备份驱动器。使用 SVN，这可能会导致问题，这就是`svn hotcopy`存在的原因。

git是否存在同样的风险？当有人推送到某个地方时，我可以在某个地方复制一个裸存储库吗？当然，推入完成后无法恢复也没关系。如果必须做一些工作来恢复在被推送到时创建的备份（即通过删除半完成的推送残留数据），这也很好。但是，如果整个裸存储库损坏且无法使用，那就是个问题。

我做了一些实验，看不到问题，但这并不意味着不可能有任何问题。

**编辑：**我接受了“以正确的方式做”的答案，因为从长远来看，这是我打算做的。然而，就目前而言，对我们而言，一个简单的解决方案是在自动备份开始*前*`git clone`大约一小时对整个裸存储库（在同一个驱动器上）进行备份。如果“真实”存储库已在使用中，自动备份可能会错误地复制它到那时，但最近克隆的副本不会有问题。我们知道备份何时开始，而不是何时结束，所以这对我们来说已经足够了。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:42:50.253

可能值得更改您的备份策略以忽略备份整个 Git 存储库，而是备份一个[`Git bundle`](http://git-scm.com/docs/git-bundle). 来自[Git 的 Little Bundle of Joy](http://git-scm.com/2010/03/10/bundles.html)：

> bundle 命令会将通常使用 git push 命令通过网络推送的所有内容打包成一个二进制文件，您可以通过电子邮件或sneakernet 到处发送该文件，然后将其解包到另一个存储库中。

这种方法也在[github](https://stackoverflow.com/questions/1251713/backup-of-github-repo)存储库的备份和[备份本地 Git 存储库](https://stackoverflow.com/questions/2129214/backup-a-local-git-repository)中进行了讨论。

对本地 repo 的快速测试显示以下创建了一个文件，其中包含在完整 repo 备份中通常需要的所有内容：

```
$ git bundle create ../my.bundle --all 
```

从捆绑文件创建克隆很简单：

```
$ git clone my.bundle my-repo 
```

使用`git ls-remote my.bundle`表明所有标签和分支都在包中。

但是，要备份可能不在捆绑文件中的内容（如配置、挂钩、嫁接、替代等），我会进一步备份几个步骤并备份[Git 存储库](http://git-scm.com/docs/gitrepository-layout)（简称`objects`,`refs`和`logs`目录）和bundle 文件（`objects`和`refs`repository 目录的内容在 bundle 中，不需要）。除非捆绑包确实包含这些文件；那么您只需要备份捆绑包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:30:54.803

您如何处理在备份过程中可能修改的其他文件？

如果您已经处理过这种情况，则可以在此处使用相同的方法。否则，您可能会在任何地方得到损坏的文件，无论是在 git、svn 中，还是在裸 TXT 中。*

# android - android getLaskKnownLocation null

> ID：11154213
> 
> 赞同：0
> 
> 时间：2012-06-22T10:10:53.810
> 
> 标签：android

我已经尝试过 GPS 和网络提供商，但它们为 getLastKnownLocation 提供了空位置。我也没有得到任何 onLocationChanged 。我正在我的公寓里尝试，那里的手机信号很强。我什至可以很好地浏览互联网并从市场上下载和安装应用程序。

我已经阅读了一些关于同一主题的主题，但他们的建议似乎我已经尝试过了。

这是我的代码片段。

```
 public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
    locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    if(null == locationManager) {
        Log.d(TAG, "location manager NULL");
    }
    geocoder = new Geocoder(this); 

    // Initialize with the last known location
    Location lastLocation = locationManager
            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
    if (lastLocation != null)
        onLocationChanged(lastLocation);
    else
        Log.i(TAG, "null LastKnownLocation");
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    // TODO Auto-generated method stub
    super.onStartCommand(intent, flags, startId);
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
            0,0, this);
    Log.d(TAG, "requested location updates");

    return START_STICKY;
} 
```

根据日志：

```
mitenm@pinkydebian:/media/sf_E_DRIVE/tmp$ adb logcat LocationNotifierService:* *:S
--------- beginning of /dev/log/system
--------- beginning of /dev/log/main
I/LocationNotifierService(30866): null LastKnownLocation
D/LocationNotifierService(30866): gps provider enabled:true
D/LocationNotifierService(30866): network provider enabled:true
D/LocationNotifierService(30866): onCreate
D/LocationNotifierService(30866): requested location updates
D/LocationNotifierService(30866): requested location updates
D/LocationNotifierService(30866): requested location updates 
```

我有“解锁接收器”，所以当我解锁我的屏幕时，我请求位置更新，这在日志中按预期工作。但是 onLocationChanged 方法没有被调用。

我已经添加了显示精细和粗糙的权限。

问候，

米腾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:25:13.527

> android getLaskKnownLocation null

根据谷歌文档

`getLaskKnownLocation` 返回一个 Location 指示从给定提供程序获得的最后一个已知位置修复的数据，否则返回 null。

这意味着它显示了缓存的数据。如果您在以前从未查询过位置数据的设备上运行应用程序，那么缓存将是空的，这就是您获得 null 的原因。

> 也不要得到任何 onLocationChanged 。

确保您已启用网络提供商的位置。

使用下面的片段。

```
if (connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnected() || connectivityManager.getNetworkInfo(
ConnectivityManager.TYPE_WIFI).isConnected()) {

    if (locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
        Constants.CONNECTED = true;

        locationManager.requestLocationUpdates(
        LocationManager.NETWORK_PROVIDER, 5000, 1, this);
    } else {
        Constants.CONNECTED = false;

        Toast.makeText(
        context, "Please enable Wireless networks in Location Setting!!", 10000).show();
    }

} 
```

# magento - Magento：品牌类别产品描述

> ID：11154214
> 
> 赞同：0
> 
> 时间：2012-06-22T10:11:00.300
> 
> 标签：magento

我想知道这个网站是如何做到这一点的：你可以达到一个产品类别，比如

```
http://www.example.de/Uhren/ 
```

如果你点击阿迪达斯的侧边栏，你就来到了网址

```
http://www.example.de/brand/Uhren/ 
```

带有关于阿迪达斯手表的特定文字。如何用 magento 做到这一点？有两大类？

我有另一个网站，同样的功能：

```
http://schuhe.example.de/brand-lederschuhe/ 
```

如果你点击一个品牌，它就会变成

```
http://schuhe.example.de/damenschuhe-brand-lederschuhe/ 
```

也许它比我想象的更简单，不知道..

# ios - 移动键盘的视图，然后按主页，返回视图会导致非移动视图？

> ID：11154218
> 
> 赞同：1
> 
> 时间：2012-06-22T10:11:07.330
> 
> 标签：ios, xcode, uikeyboard

我使用 atm 下面的代码。只要您在键盘启动时不退出应用程序（按主页），它就可以正常工作。所以我想，简单，只是在 viewWillDissappear:(BOOL)animated 中 resignFirstResponder ，但这显然不会被称为按 home ......

快速回顾一下问题场景：点击 textView -> 键盘出现，视图被转移 按 home 再次打开应用程序 -> 键盘仍然打开，视图回到原来的位置，所以内容不可见

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];
    }

- (void) keyboardWillShow: (NSNotification*) aNotification;
    {       
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.3];
        CGRect rect = [[self view] frame];
        rect.origin.y -= 60; 
        [[self view] setFrame: rect];
        [UIView commitAnimations];
    }

    - (void) keyboardWillHide: (NSNotification*) aNotification;
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.3];
        CGRect rect = [[self view] frame];
        rect.origin.y += 60;
        [[self view] setFrame: rect];
        [UIView commitAnimations];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:18:54.080

您可以为进入后台事件添加通知，如以下代码

```
 - (void)viewDidLoad
{
    //Add this 
    [[NSNotificationCenter defaultCenter] addObserver: self
                                             selector: @selector(handleEnteredBackground:) 
                                                 name: UIApplicationDidEnterBackgroundNotification
                                               object: nil];
} 
```

并且在函数中

```
- (void) handleEnteredBackground:(NSObject*)obj
{
    //Adjust your views   
} 
```

# html - HTML5 清单缓存和 url 键值

> ID：11154220
> 
> 赞同：0
> 
> 时间：2012-06-22T10:11:15.447
> 
> 标签：html, manifest, cache-manifest, urlvariables

我想知道如何处理 url 中带有变量的文件，例如

```
www.mysite.com?id=myvariable 
```

我不可能必须存储所有可能性？我使用这些变量是因为当用户在线时，他们应该能够分享他们的社交媒体。

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:35:58.403

如果您希望这些页面按原样离线工作，那么是的，您必须存储所有可能性。你肯定不能指望浏览器猜出所有的可能性是什么？

如果您想在离线应用程序中使用动态数据，请使用 AJAX 请求它并将其保存在[本地存储](http://www.w3.org/TR/webstorage/)中。不要将数据存储在页面中，保持页面静态。

如果您需要为在同一页面上使用不同数据的应用程序的不同部分提供可收藏的 URL，请使用[History API](http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html)。

# android - Android 4.0 模拟器上的 Google Play

> ID：11154222
> 
> 赞同：184
> 
> 时间：2012-06-22T10:11:21.813
> 
> 标签：android, google-play

如何将 Google Play .apk 安装到我的 Android 4.0 模拟器上？

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2012-06-26T18:20:23.800

从[此处](https://web.archive.org/web/20120629212513/http://wiki.rootzwiki.com/Google_Apps#Universal_Packages_2)下载 Google 应用程序（GoogleLoginService.apk、GoogleServicesFramework.apk、Phonesky.apk）。

启动你的模拟器：

```
emulator -avd VM_NAME_HERE -partition-size 500 -no-audio -no-boot-anim 
```

然后使用以下命令：

```
# Remount in rw mode.
# NOTE: more recent system.img files are ext4, not yaffs2
adb shell mount -o remount,rw -t yaffs2 /dev/block/mtdblock0 /system

# Allow writing to app directory on system partition
adb shell chmod 777 /system/app

# Install following apk
adb push GoogleLoginService.apk /system/app/.
adb push GoogleServicesFramework.apk /system/app/.
adb push Phonesky.apk /system/app/. # Vending.apk in older versions
adb shell rm /system/app/SdkSetup* 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2013-06-06T22:59:20.207

对于未来的访客。

截至目前，Android 4.2.2 平台包括 Google Play 服务。只需使用运行 Jelly Bean 的模拟器即可。详细信息可以在这里找到：

[设置 Google Play 服务 SDK](http://developer.android.com/google/play-services/setup.html)

**编辑：**

另一种选择是使用[Genymotion](http://www.genymotion.com/)（运行速度更快）

**编辑2：**

正如@gdw2 评论*的那样：“设置 Google Play 服务 SDK 并不会安装一个正常工作的 Google Play 应用程序——它只是启用了 SDK 提供的某些服务”*

Genymotion 2.0 之后默认不附带 Play Services，但可以**轻松**手动安装。只需从[此处](http://www.android.gs/download-install-and-flash-google-apps-for-android)下载正确的版本，然后拖放到虚拟设备 (emulador) 中即可。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-03-22T22:10:54.783

我以更永久的方式执行此操作 - 不是每次都使用 APK 安装，而是`adb`将它们永久添加到模拟器使用的系统映像中。您将需要Windows 上的[Yaffey](http://code.google.com/p/yaffey/)或其他系统上的类似实用程序来修改 YAFFS2 映像。将`GoogleLoginService.apk`、`GoogleServicesFramework.apk`、 和`Phonesky.apk`（或`Vending.apk`在旧版本的 Android 中）复制到模拟器文件的文件`/system/app`夹中。`system.img`之后我就可以正常启动模拟器了，不用弄乱adb，而且Play Store一直都在。

# 从您的设备获取 Google Play 应用程序

从某些 Internet 站点下载 Google Apps 可能不太合法，但如果您的手机或平板电脑具有相应的 Android 版本，只需将它们从您的设备中取出即可：

```
adb -d root
adb -d pull /system/app/GoogleLoginService.apk
adb -d pull /system/app/GoogleServicesFramework.apk
adb -d pull /system/app/Phonesky.apk 
```

您必须具有设备的***根级别访问权限***（运行 adb root）才能从中提取这些文件。

# 将其添加到图像中

现在`yaffey`在 Windows 或 Linux 或 Mac 上的类似实用程序上启动，然后打开`system.img`要修改的仿真器映像。我最常修改`[...]\android-sdk\system-images\android-17\x86`.

将原件重命名`system.img`为`system-original.img`. 在 yaffey 下，将您从设备中提取的 APK 文件复制到 /app 文件夹。将修改后的图像保存`system.img`在原始文件夹中。然后启动您的模拟器（在我的情况下，它将是带有运行在 Intel HAX 下的 Intel Atom 处理器的 Android 4.2 模拟器，在 Windows 机器上速度超快），您将在那里拥有 Play Store。我发现没有必要删除`SdkSetup.apk`，并且`SdkSetup.odex`存在这些文件时，Play 商店和其他服务对我来说仍然可以正常工作。

完成测试后，为了减轻您暂时从您的设备盗版 Google Apps 的良心，您可以删除修改后的内容`system.img`并从`system-original.img`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-08T04:55:34.253

1.  [从http://goo.im/gapps](http://goo.im/gapps)下载 gapps 包
2.  提取 GoogleLoginService.apk、GoogleServicesFramework.apk 和 Vending.apk 转到 cmd 窗口类型 `adb shell`
    3.  关于外壳类型`mount -o rw,remount -t yaffs2 /dev/block/mtdblock3 /system`
    4.  然后按 Ctrl+c 退出。cd 到已提取 apks 的目录，
    5.  类型`adb push <appname>.apk /system/app`
    6.  然后输入`adb reboot`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T10:18:38.980

您可以从 Android 4.0 手机下载它，然后安装系统映像`rw`并复制它。

之前没有尝试过，但它应该可以工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-21T17:11:35.220

对我来说很简单我在我的电脑中下载了apk文件并将该文件拖到模拟器它为我安装**谷歌播放**希望它对某人有所帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-14T17:03:16.613

* * *

Linux 中的 Playstore + Google Play 服务（Ubuntu 14.04）

* * *

下载 Google 应用程序（GoogleLoginService.apk、GoogleServicesFramework.apk）

从这里[http://www.securitylearn.net/2013/08/31/google-play-store-on-android-emulator/](http://www.securitylearn.net/2013/08/31/google-play-store-on-android-emulator/)

并从这里下载（Phonesky.apk）[https://basketbuild.com/filedl/devs?dev=dankoman&dl=dankoman/Phonesky.apk](https://basketbuild.com/filedl/devs?dev=dankoman&dl=dankoman/Phonesky.apk)

前往安卓 SDK 位置>>

cd -Android SDK 的工具 Location-

运行模拟器>>

Android/Sdk/tools$ ./emulator64-x86 -avd Kitkat -partition-size 566 -no-audio -no-boot-anim

设置权限>>

cd Android/Sdk/platform-tools platform-tools$ adb shell mount -o remount,rw -t yaffs2 /dev/block/mtdblock0 /system

平台工具$ adb shell chmod 777 /system/app

平台工具$ adb push /home/nazmul/Downloads/GoogleLoginService.apk /system/app/。

推送播放APK >>

平台工具$ adb push /home/nazmul/Downloads/GoogleServicesFramework.apk /system/app/。平台工具$ adb push /home/nazmul/Downloads/Phonesky.apk /system/app/。平台工具$ adb shell rm /system/app/SdkSetup*

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-09-02T13:12:15.830

你试过 Genymotion 吗？我上周读过它，它很棒。他们有几个您运行的 Android 映像（使用他们自己的软件）。这些图像速度非常快，并且上面安装了 Google Play。看看它是否是你需要的东西。

[http://www.genymotion.com/](http://www.genymotion.com/)

# javascript - 错误：GM_setValue 的类型不受支持。支持的类型有：字符串、布尔值和 32 位整数

> ID：11154223
> 
> 赞同：1
> 
> 时间：2012-06-22T10:11:22.993
> 
> 标签：javascript, firefox, greasemonkey

所以，我有 GreaseMonkey 脚本，它对整数进行一些操作，然后通过`GM_setValue`.

**代码**：

```
 var A = parseInt(StringA);
  var B = parseInt(StringB);
  var C = parseInt(StringC);
  var answer = parseInt(Math.floor(Math.max((A/B),1)*C));
  GM_setValue("answer",answer); 
```

现在这在 Chrome 中运行良好，但在 Firefox 中以某种方式失败，给出

`Error: Unsupported type for GM_setValue. Supported types are: string, bool, and 32 bit integers.`

值 A、B 和 C 正在正确导出，甚至 answer 的值也按预期计算。`alert`用对话框检查它。唯一的问题是，它不是通过设置值`GM_setValue`。早些时候我并没有这样做`parseInt`，`var answer`因为类型`Math.floor`已经应该返回整数，但无论如何都要做。（在这两种情况下，答案都是正确的，但给出了错误。）

我不明白这里出了什么问题。非常感谢任何帮助。

编辑：不确定它的重要性，但这是示例输出`alert("A: "+A+"\nB: "+B+"\nC: "+C+"\n\nAnswer: "+answer);`

```
A: 41751
B: 20513
C: 190164861567

Answer: 387050803650 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:13:48.093

尝试为[`radix`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)您的 parseInt 函数添加价值：

```
parseInt(Math.floor(Math.max((A/B),1)*C), 10); 
```

**更新：**

您的值太大，GM 脚本无法存储。Mozilla 中支持的最大 32 位数字`2147483647`请参见[此处](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators#Signed_32-bit_integers)。

要存储您的值，请尝试将其转换为字符串，例如：

```
GM_setValue("answer", "" + answer + ""); 
```

或使用`toString()`方法：

```
GM_setValue("answer", answer.toString()); 
```

# sql - SQL 聚合函数

> ID：11154225
> 
> 赞同：0
> 
> 时间：2012-06-22T10:11:27.517
> 
> 标签：sql, sql-server-2008

给定下表

```
月产品销售
--------- -------- -----    
1 月 1 日 10
1 月 2 日 15
2 月 3 日 23 日
15 年 3 月 1 日
```

我使用的查询是：

```
SELECT DISTINCT a.* FROM( -- possibly needed for where clause
    SELECT dateadd(month, x.MonthOffset,0) AS mes, x.produto, Sum(x.quantidade) AS vendas
    FROM
    (
        SELECT DATEDIFF(month, 0, a.data) AS MonthOffset, a.produto, a.quantidade
        FROM (
          SELECT l.*, fc.data FROM LINHAS AS l JOIN FacturaCli AS fc
              ON fc.codigo = l.codigo 
              UNION ALL
          SELECT l.*, ff.dataEmissão FROM LINHAS AS l JOIN FacturaForn AS ff
              ON ff.codigo = l.codigo
        ) AS a
    ) AS x
    GROUP BY MonthOffset, produto
) AS a 
```

我想获得每月销售额更高的产品。

我在查询需要一个不能在“聚合组”中的字段时遇到问题。请注意，我提供的表格是查询的结果。

我使用的是 SQL Server 2008。我不能使用临时变量或`over`子句。 **我不想重复引导我到该表的查询！**但如果这是唯一的方法，那也没关系。

预期结果：

```
月产品销售
--------- -------- -----    
1 月 2 日 15
2 月 3 日 23 日
15 年 3 月 1 日
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:15:19.370

一个非常棘手的解决方案来解决您的问题。

```
SELECT a.* 
FROM   mytable a 
       LEFT JOIN mytable b 
              ON a.Month = b.Month
                 AND a.Sales < b.Sales
WHERE  b.Month IS NULL 
```

# python - PyQt - 为循环中的多个对象定义信号

> ID：11154227
> 
> 赞同：0
> 
> 时间：2012-06-22T10:11:34.283
> 
> 标签：python, for-loop, pyqt, signals-slots

这是我的问题。我想创建*n*个*QLineEdit*小部件（*n*可以是任何数字，取决于输入值）。我可以创建那些*QLineEdit*小部件，给它们对象名称和文本，但我不能在所有这些小部件上定义信号（我希望每个*QLineEdit*小部件在与它交互时都会发出信号）。这是代码的示例：

```
self.fieldList = {}

for (i, value) in attrMap.iteritems():
    self.fieldList["valueField" + str(i)] = QtGui.QLineEdit()
    self.fieldList["valueField" + str(i)].setObjectName(_fromUtf8("attributeValueField_{0}".format(i)))
    self.fieldList["valueField" + str(i)].setText(_fromUtf8("{0}".format(value.toString())))
    self.fieldList["valueField" + str(i)].cursorPositionChanged.connect(lambda: (self.checkState(self.fieldList["valueField" + str(i)]))) 
```

问题仍然存在于最后一行：

```
self.fieldList["valueField" + str(i)].cursorPositionChanged.connect(lambda: (self.checkState(self.fieldList["valueField" + str(i)]))) 
```

我认为该信号会粘在每个小部件上，但是由于循环，信号从小部件“跳转”到小部件，直到它到达最后一个小部件，因此只有最后一个小部件能够发出信号。那么如何安排每个小部件在更改时发出信号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:43:00.513

这里的解释和常用解决方案（还有很多，只需搜索例如“python lambda循环参数”：[https ://stackoverflow.com/a/938493](https://stackoverflow.com/a/938493)

另一个常见的解决方案是使用偏函数：

```
import functools
slot = functools.partial( self.checkState, self.fieldList["valueField" + str(i)] )
self.fieldList["valueField" + str(i)].cursorPositionChanged.connect( slot ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:45:18.367

这里的问题是闭包，`i`在你的 lambda 中是指`i`调用 lambda 函数时的值，而不是定义它时的值。所以循环结束后，所有`i`的 s 都会看到相同的值。

要解决这个问题：

```
self.fieldList = {}

for (i, value) in attrMap.iteritems():
    self.fieldList["valueField" + str(i)] = QtGui.QLineEdit()
    self.fieldList["valueField" + str(i)].setObjectName(_fromUtf8("attributeValueField_{0}".format(i)))
    self.fieldList["valueField" + str(i)].setText(_fromUtf8("{0}".format(value.toString())))
    self.fieldList["valueField" + str(i)].cursorPositionChanged.connect(lambda old, new, i=i: (self.checkState(self.fieldList["valueField" + str(i)]))) 
```

[您可以在此处](https://stackoverflow.com/questions/233673/lexical-closures-in-python)找到有关此问题的更多信息

# c# - C# linq to xml，带有属性的嵌套查询

> ID：11154229
> 
> 赞同：4
> 
> 时间：2012-06-22T10:11:48.493
> 
> 标签：c#, xml, linq

我真的很难理解这一点。

我正在使用 c#。

我想从 xml 文件中取回 IEnumerable 产品。

下面是 xml 结构的示例。

我需要获取将 productEnriched 自定义属性设置为 true 的产品列表。

有些产品根本没有任何自定义属性部分

想想就头疼！

```
<?xml version="1.0" encoding="UTF-8"?>
<catalog xmlns="http://www.mynamespace.com" catalog-id="MvgCatalog">
    <product>
        <custom-attributes>
            <custom-attribute attribute-id="productEnriched">true</custom-attribute>
        </custom-attributes>
    </product>
</category> 
```

谢谢你的帮助

为了澄清问题，我在示例 xml 中添加了更多项目

我需要获取产品列表，只有产品具有自定义属性元素，属性为 productEnriched，值为 true假的我只需要它存在并且值为真的产品列表

```
<?xml version="1.0" encoding="UTF-8"?>
<catalog xmlns="http://www.mynamespace.com" catalog-id="MvgCatalog">
    <product>
        <upc>000000000000</upc> 
        <productTitle>My product name</productTitle>
        <custom-attributes>
           <custom-attribute attribute-id="productEnriched">true</custom-attribute>
           <custom-attribute attribute-id="somethingElse">4</custom-attribute>
           <custom-attribute attribute-id="anotherThing">otherdata</custom-attribute>
        </custom-attributes>
    </product>
</category> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:21:46.030

> 我需要获取产品列表，只有产品具有自定义属性元素，属性为 productEnriched，值为 true假的我只需要它存在并且值为真的产品列表

```
var xml = XElement.Load(@"your file.xml");
XNamespace ns = "http://www.mynamespace.com";
var products = xml.Elements(ns + "product");
var filtered = products.Where(
    product =>
        product.Element(ns + "custom-attributes") != null &&
        product.Element(ns + "custom-attributes").Elements(ns + "custom-attribute")
        .Any(
            ca => 
                ca.Value == "true" && 
                ca.Attribute("attribute-id") != null && 
                ca.Attribute("attribute-id").Value == "productEnriched")); 
```

顺便说一句，您的 XML 无效 - 您的开始标签 ( `catalog`) 与结束标签 ( ) 不匹配`category`。

格式本身很奇怪——这是你的主意吗？

```
 <custom-attributes>
       <custom-attribute attribute-id="productEnriched">true</custom-attribute>
       <custom-attribute attribute-id="somethingElse">4</custom-attribute>
       <custom-attribute attribute-id="anotherThing">otherdata</custom-attribute>
    </custom-attributes> 
```

为什么将属性名称作为属性值，将属性值作为元素值？它看起来很臃肿，有点“重新发明”XML，没有明确的目的。

为什么不：

```
 <custom-attributes>
       <custom-attribute productEnriched="true"/>
       <custom-attribute somethingElse="4"/>
       <custom-attribute anotherThing="otherdata"/>
    </custom-attributes> 
```

或者：

```
 <custom-attributes productEnriched="true" somethingElse="4" anotherThing="otherdata"/> 
```

或者也许只是使用元素：

```
 <product-parameters>
       <productEnriched>true</productEnriched>
       <somethingElse>4</somethingElse>
       <anotherThing>otherdata</anotherThing>
    </product-parameters> 
```

# java - JAVA将包含词性（POS）标签的句子分为无POS标签句子和仅POS标签句子？

> ID：11154232
> 
> 赞同：0
> 
> 时间：2012-06-22T10:11:57.993
> 
> 标签：java, string, nlp, stanford-nlp, pos-tagger

假设句子是：

> 它/pps催/vbd那/cs/at下/ap立/nn-tl`/`提供/vb使/vbg资金/nn​​s和/cc重新设置/vb/at生效/jj日期/nn所以/cs那/cs an/at 有序/jj 执行/nn of/in the/at law/nn may/md be/beeffected/vbn ''/'' ./.

上面的句子取自棕色语料库。我怎样才能让句子没有所有这些 POS 标签并打印，而另一个句子只是 POS 标签。

没有 POS 标签的句子结果如下：

> 它敦促下届立法机构“提供授权资金并重新设定生效日期，以便法律的有序实施”。

这句话只是 POS 标记结果如下：

> pps vbd cs at ap nn-tl ``vb vbg nns cc vb at jj nn cs cs at jj nn in at nn md be vbn''。

# java - 如何限制 JPA Batch 查询的内存使用？

> ID：11154237
> 
> 赞同：2
> 
> 时间：2012-06-22T10:12:37.157
> 
> 标签：java, jpa, batch-file, eclipselink

我目前正在使用 JPA（Eclipse 链接）批处理查询从数据库中读取对象。每个对象都有几个子集合，也通过 JPA 反映出来。

我使用批处理查询来提供它们提供的性能，但是有一个缺点（也许可以避免，因此我的问题）。

给定以下对象定义（名称已更改以保护无辜，但结构保持不变）。

```
@Entity
@Table(name = "TBL_ITEMX")
class ItemX
{
    @OneToMany(fetch = FetchType.EAGER)
    @JoinColumn(name = "ID_NO", referencedColumnName = "ID_NO")
    @BatchFetch(value = BatchFetchType.JOIN)
    private Collection<SubItem1> subItem1;

    @OneToMany(fetch = FetchType.EAGER)
    @JoinColumn(name = "ID_NO", referencedColumnName = "ID_NO")
    @BatchFetch(value = BatchFetchType.JOIN)
    private Collection<SubItem2> subItem2;

    @OneToMany(fetch = FetchType.EAGER)
    @JoinColumn(name = "ID_NO", referencedColumnName = "ID_NO")
    @BatchFetch(value = BatchFetchType.JOIN)
    private Collection<SubItem3> subItem3;

    ... getters/setters 
} 
```

例如，如果我用 setFirstResult 和 setMaxResult 限制查询范围

```
String qs = "select p from ItemX p"; 
Query qb = em.createQuery(qs);
qb.setFirstResult(0);
qb.setMaxResults(100); 
```

这表明我只想要数据库中的前 100 个 ItemX 条目，记住每个 ItemX 都有几个集合。该查询确实将 ItemX 限制在 0 到 100 之间。但是，当 EntityManager 处理集合时，它会将*每个*数据库行、每个集合加载到内存中（在客户端上）。

有没有办法限制这种行为，以便批处理查询只为所需的每个集合提取项目。或者要求数据库将结果查询留在服务器上并提供可滚动的结果窗口？（我尝试过可滚动的结果，但没有帮助）。

目前我可以处理查询，但是随着我们添加更多的集合和数据，查询将会破坏 JVM（我真的不认为 64 位 JVM 是解决这个问题的答案）。

任何关于如何限制子集合查询大小的建议都会很高兴收到。

谢谢丰富

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:09:26.873

如果要与分页一起使用，则需要使用 IN 批量提取类型。

# parsing - 日志解析器 COM -iCheckpoint

> ID：11154240
> 
> 赞同：0
> 
> 时间：2012-06-22T10:12:49.370
> 
> 标签：parsing, logging, plugins, com, checkpoint

我有这些 Apache Tomcat 日志，我希望将其加载到数据库中。当前过程是在第二天加载日志。

目的是在中午 12 点、下午 3 点和下午 6 点逐步加载当天的日志。我查看了日志解析器帮助和在线并找到了输入参数：iCheckPoint。但是此参数不适用于 COM 插件。

我正在寻找是否有自定义插件的 iCheckpoint 参数的实现可用。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T20:52:20.753

不幸的是没有。检查点本身的实现很大程度上取决于数据的实际来源；例如，如果您的 COM 插件正在从文本文件中读取，那么检查点信息将是每个文本文件中的行号；另一方面，如果您的 COM 插件正在从 SQL 表中读取，那么检查点信息将是最后读取的 ID。它过于特定于源，无法“外包”给插件的主机（即 LogParser 本身）。

# javascript - 追加任何元素时，div 高度不会增加

> ID：11154242
> 
> 赞同：0
> 
> 时间：2012-06-22T10:12:50.387
> 
> 标签：javascript, jquery, css

我有一个带有以下 CSS 的 div：

```
 div
           {
              width:600px;
              height:auto;
           } 
```

现在我的问题是当我`(like $('div').append(any element))`在这个 div 中添加任何元素时，它的高度不会相应增加。有什么问题？

**编辑**

我要附加的元素有`height:auto`. 我要附加的 div 是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:16:28.080

该代码没有问题。该`auto`值是 div 的默认值，因此（假设没有其他样式应用于该元素）它与以下内容相同：

```
div { width: 600px; } 
```

因此，没有什么限制该代码中 div 的高度。您必须在代码中的其他地方查找影响元素的内容。

一些浏览器允许你检查一个元素，它会准确地向你展示 CSS 应用于它的内容。为此，我使用 Firefox 中的 Firebug 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:46:11.167

我对代码没有任何问题。这是我的示例两种方式。

1.  onload 附加元素[http://jsfiddle.net/VnLtv/](http://jsfiddle.net/VnLtv/)
2.  单击 div 添加 elem [http://jsfiddle.net/VnLtv/1/](http://jsfiddle.net/VnLtv/1/)

确保您的代码在 a`$(document).ready`或等效代码中`$(function(){`

# java - 如何在 java 中发送大的 iso 图像（大小超过 2gb）？

> ID：11154244
> 
> 赞同：0
> 
> 时间：2012-06-22T10:13:03.020
> 
> 标签：java

问题是这里的客户端正在请求服务器在 Range 标头下传输特定范围的字节。仅基于该请求的范围，我必须发回该数量的字节。如何在 JAVA 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:15:11.660

1.  打开文件
2.  跳到`start`位置
3.  读取`X`字节
4.  送他们
5.  关闭文件

*Java 不是首字母缩略词。*

# bugzilla - 禁用帐户锁定选项 - Bugzilla 4.2.1

> ID：11154249
> 
> 赞同：0
> 
> 时间：2012-06-22T10:13:46.680
> 
> 标签：bugzilla

我当前的 bugzilla 4.2.1 安装会暂时阻止任何用户多次登录失败。如果他们尝试使用错误的密码，比如说 5 次，他们将无法再次登录，并且正在向安装的维护者发送一封邮件。无论如何我可以禁用帐户锁定功能吗？我不希望任何用户因登录失败而被阻止。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:57:10.000

在 Bugzilla 所在的目录中有一个名为 Constants.pm 的文件，编辑该文件并将 MAX_LOGIN_ATTEMPTS 值设置为 1000000。

-注意：在我的安装中，文件位于 /var/www/bugzilla/Bugzilla/

# android - Drupal 和 Android 之间的会话和文件上传

> ID：11154251
> 
> 赞同：3
> 
> 时间：2012-06-22T10:13:50.283
> 
> 标签：android, drupal, file-upload, service

我正在尝试使用服务模块将图像文件从 android 设备上传到我的 drupal 网站

我可以成功登录：

```
HttpParams connectionParameters =  new BasicHttpParams(); 
int timeoutConnection = 3000;
HttpConnectionParams.setConnectionTimeout(connectionParameters, timeoutConnection);                 
int timeoutSocket = 5000;
HttpConnectionParams.setSoTimeout(connectionParameters, timeoutSocket);

httpClient   =   new DefaultHttpClient(connectionParameters);
HttpPost httpPost       =   new HttpPost(serverUrl+"user/login");
JSONObject json = new JSONObject();    

try{
     json.put("password", editText_Password.getText().toString());
     json.put("username", editText_UserName.getText().toString());                          
     StringEntity se = new StringEntity(json.toString());
     se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));

     httpPost.setEntity(se);                       

     //Execute HTTP post request
     HttpResponse response    =   httpClient.execute(httpPost);   
     int status_code = response.getStatusLine().getStatusCode();                            

     ... 
     ...

}
catch(Exception ex)
{

} 
```

通过响应对象，我可以获得会话名称 session id 、用户 id 和许多其他信息。

登录后，我通过 HttpGet 对象自己没有设置会话信息，但使用相同的 DefaultHttpClient，我可以使用以下代码神奇地检索节点：

`HttpGet httpPost2 = new HttpGet(serverUrl+"node/537.json"); HttpResponse response2 = httpClient.execute(httpPost2);`

这让我想到，httpClient 对象自动为我存储了会话信息。因为如果我不先登录或使用新的 HttpClient 对象并尝试检索节点，我会收到 401 错误。

但是，当我在登录后尝试按如下方式上传图像文件时：

```
 httpPost = new HttpPost(serverUrl+"file/");
   json = new JSONObject();
   JSONObject fileObject = new JSONObject();    

   fileObject.put("file", photodata); //photodata is a byte[] that is set before this point
   fileObject.put("filename", "myfirstfile");
   fileObject.put("filepath", "sites/default/files/myfirstimage.jpg");
   json.put("file", fileObject);            

   se = new StringEntity(json.toString());
   se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
   httpPost.setEntity(se);      

   //Execute HTTP post request
   response    =   httpClient.execute(httpPost);   
   status_code = response.getStatusLine().getStatusCode(); 
```

尽管我已登录并使用相同的 HttpClient 对象，但出现 401 错误。

我也尝试添加：

```
httpPost.setHeader("Cookie", SessionName+"="+sessionID); 
```

这又给了我 401 错误。

我也不确定我是否使用了正确的 url，因为我正在尝试使用 file.create 方法，但是将 url 写为“myip:myport/rest/file/create”会给出错误的地址。我的目标是将图像上传到用户节点，所以我想在成功添加文件后，我会使用 node.create 对吗？

我希望有人能帮助我度过这个难关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T21:15:09.090

当我第一次开始这样做时，我发现我的大部分错误都是由于没有正确验证..我*不确定*你的方法是否正确..我知道这行得通。

使用 Drupal Services 3，我以这种方式登录，然后将我的会话 cookie 存储到共享首选项中。dataOut 是一个 JSON 对象，其中包含所需的用户登录名和密码信息。

```
String uri = URL + ENDPOINT + "user/login";
HttpPost httppost = new HttpPost(uri);
httppost.setHeader("Content-type", "application/json");
StringEntity se;
try {
     se = new StringEntity(dataOut.toString());
     se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
                    "application/json"));
     httppost.setEntity(se);
     HttpResponse response = mHttpClient.execute(httppost);
     mResponse = EntityUtils.toString(response.getEntity());
     // save the sessid and session_name
     JSONObject obj = new JSONObject(mResponse);
     SharedPreferences settings = PreferenceManager
    .getDefaultSharedPreferences(mCtx);
     SharedPreferences.Editor editor = settings.edit();
     editor.putString("cookie", obj.getString("session_name") + "="
                    + obj.getString("sessid"));
     editor.putLong("sessionid_timestamp", new Date().getTime() / 100);
     editor.commit();
} catch { //all of my catches here } 
```

一旦我存储了我的会话 ID.. 我开始像这样在 drupal 上执行任务.. 下面的代码发布了一个节点。如果会话 cookie 存在，我使用函数 getCookie() 来获取它。如果不存在，那么我登录，或者如果它已过期，我登录。（注意，您需要在 drupal 设置中设置 cookie 过期时间。 php 文件（如果我没记错的话，我想这就是它的位置）

```
String uri = URL + ENDPOINT + "node";
HttpPost httppost = new HttpPost(uri);
httppost.setHeader("Content-type", "application/json");
String cookie = this.getCookie(mCtx);
httppost.setHeader("Cookie", cookie);
StringEntity se;
try {
    se = new StringEntity(dataOut.toString());
httppost.setEntity(se);
HttpResponse response = mHttpClient.execute(httppost);
    // response is here if you need it.
// mResponse = EntityUtils.toString(response.getEntity());
} catch { //catches } 
```

getCookie() 函数可让您的 cookie 保持最新并正常工作。

```
/**
 * Takes the current time, the sessid and determines if we are still part of
 * an active session on the drupal server.
 * 
 * @return boolean
 * @throws InternetNotAvailableException
 * @throws ServiceNotAvailableException
 */
protected String getCookie(Context ctx)
        throws InternetNotAvailableException {
    SharedPreferences settings = PreferenceManager
            .getDefaultSharedPreferences(mCtx);
    Long timestamp = settings.getLong("sessionid_timestamp", 0);
    Long currenttime = new Date().getTime() / 100;
    String cookie = settings.getString("cookie", null);
            //mSESSION_LIFETIME is the session lifetime set on my drupal server
    if (cookie == null || (currenttime - timestamp) >= mSESSION_LIFETIME) {

                    // the following are the classes I use to login.
                    // the important code is listed above.
                    // mUserAccount is the JSON object holding login, 
                    // password etc.
        JSONObject mUserAccount = UserAccount.getJSONUserAccount(ctx);
        call(mUserAccount, JSONServerClient.USER_LOGIN);

        return getCookie(ctx);
    } else {
        return cookie;
    }
} 
```

这确实应该使您能够利用服务所提供的所有优势。确保您的端点正确，并确保您的权限已设置。我诅咒了好几个小时，才意识到我没有授予用户创建节点的权限。

因此，一旦您登录.. 要将文件上传到 Drupal 服务，我使用以下代码首先将图像转换为 byteArray.. 然后再转换为 Base64。

```
tring filePath = Environment.getExternalStorageDirectory()+ "/test.jpg";
imageView.setImageDrawable(Drawable.createFromPath(filePath));
Bitmap bm = BitmapFactory.decodeFile(filePath);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bm.compress(Bitmap.CompressFormat.JPEG, 100, baos);
byte[] byteArrayImage = baos.toByteArray(); 
String encodedImage = Base64.encodeToString(byteArrayImage, Base64.DEFAULT); 
```

一旦你有了编码的图像。使用键、文件（必需）、文件名（可选，但推荐）、文件大小（可选）和 uid（可选，我猜是海报）构造一个 JSON 对象，因此 JSON 在其最简单的必需形式 {"file" ：编码图像}。然后，确保您已在服务器上启用文件资源后，将数据发布到 my-server/rest-endpoint/file。响应将包含 JSON 格式的 fid。然后，您可以将此 fid 分配给您随后使用节点资源创建的节点的图像字段。

# servlets - 如何解决这个 java.lang.NoClassDefFoundError: org/apache/commons/io/output/DeferredFileOutputStream？

> ID：11154252
> 
> 赞同：33
> 
> 时间：2012-06-22T10:13:51.030
> 
> 标签：servlets, upload, tomcat5.5

我正在使用下面的代码将文件上传到 tomcat5.5，它给了我以下异常

`java.lang.NoClassDefFoundError: org/apache/commons/io/output/DeferredFileOutputStream`

你能帮我找出来吗？

```
import java.io.File;
import java.io.IOException;
import java.util.Iterator;
import java.util.List;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.FileItemFactory;
import org.apache.commons.fileupload.FileUploadException;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;

/**
 * Servlet implementation class FileUploadServlet
 */
public class FileUploadServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public FileUploadServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    @SuppressWarnings("rawtypes")
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        boolean isMultipart = ServletFileUpload.isMultipartContent(request);
        System.out.println("Status : "+isMultipart);
        if (isMultipart) {
            FileItemFactory factory = new DiskFileItemFactory();
            ServletFileUpload upload = new ServletFileUpload(factory);

            try {
                List items = upload.parseRequest(request);
                Iterator iterator = items.iterator();
                while (iterator.hasNext()) {
                    FileItem item = (FileItem) iterator.next();

                    if (!item.isFormField()) {
                        String fileName = item.getName();

                        String root = getServletContext().getRealPath("/");
                        File path = new File(root + "/uploads");
                        if (!path.exists()) {
                            boolean status = path.mkdirs();
                        }

                        File uploadedFile = new File(path + "/" + fileName);
                        System.out.println(uploadedFile.getAbsolutePath());
                        item.write(uploadedFile);
                    }
                }
            } catch (FileUploadException e) {
                e.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        response.sendRedirect("upload.jsp");
    }

} 
```

这是我用的罐子`commons-fileupload-1.2.2.jar`

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-22T12:19:53.047

特定的异常消息告诉您类路径中缺少提到的类。正如`org.apache.commons.io`包名所暗示的，所提到的类是[`http://commons.apache.org/io`](http://commons.apache.org/io)项目的一部分。

事实上，Commons FileUpload 具有 Commons IO 作为[依赖项](http://commons.apache.org/fileupload/dependencies.html)。您还需要[下载](http://commons.apache.org/io/download_io.cgi)并`commons-io.jar`放入其中`/WEB-INF/lib`。

### 也可以看看：

*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-in-jsp-servlet/)
*   [如何在不遇到 java.lang.ClassNotFoundException 的情况下将 JAR 库添加到 WAR 项目？类路径 vs 构建路径 vs /WEB-INF/lib](https://stackoverflow.com/questions/6792197/how-to-add-jar-libraries-to-war-project-without-facing-java-lang-classnotfoundex)
*   [如何在我的 Eclipse 项目中导入 javax.servlet API？](https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-api-in-my-eclipse-project)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-18T04:57:39.823

使用maven依赖

```
<dependency> 
  <groupId>org.apache.commons</groupId>
  <artifactId>commons-io</artifactId> 
  <version>1.3.2</version> 
</dependency> 
```

或将 commons-io.1.3.2.jar 下载到您的 lib 文件夹

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-12-26T10:25:30.117

解决方案

默认情况下，Struts 使用 Apache “commons-io.jar” 进行文件上传过程。要修复它，您必须将此库包含到您的项目依赖库文件夹中。

1.  **直接获取**

从官方网站获取“commons-io.jar” - [http://commons.apache.org/io/](http://commons.apache.org/io/)

2.  **从 Maven 获取**

首选方法是从 Maven 存储库获取“commons-io.jar”

文件：pom.xml

```
 <dependency>
    <groupId>commons-io</groupId>
      <artifactId>commons-io</artifactId>
    <version>1.4</version>
  </dependency> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-11T11:15:17.500

只需将所有 apache comons jar 和文件上传 jar 放在 tomcat 的 lib 文件夹中

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-20T15:12:08.383

如果您在 WebSphere 容器中收到此错误，请确保正确设置您的 Apps 类加载策略。对于 WAR 策略，我不得不将我的默认值更改为“最后一个父级”和“应用程序的单个类加载器”。这是因为在我的情况下，commons-io*.jar 被打包在应用程序中，所以必须先加载它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-18T11:54:06.633

您必须从这里下载文件[https://commons.apache.org/proper/commons-io/download_io.cgi](https://commons.apache.org/proper/commons-io/download_io.cgi)并选择[https://prnt.sc/tk5ewt](https://prnt.sc/tk5ewt)

现在，接下来将下载的文件添加到您的项目中：

右键单击您的项目 -> 构建路径 -> 配置 BuidPath -> [https://prnt.sc/tk5d93](https://prnt.sc/tk5d93)

# ios - 如何在 iOS 模拟器中伪造网络连接类型更改？

> ID：11154253
> 
> 赞同：10
> 
> 时间：2012-06-22T10:14:03.583
> 
> 标签：ios, xcode, ios-simulator, connectivity, system-configuration

我想在所有可能的网络条件下测试我的 iOS 应用程序，包括连接质量（离线、差、好）和运营商（WiFi、3G）。对于前者，其他人已经建议使用网络链接调节器，例如这里：

[iPhone 模拟器 - 模拟 3G 连接](https://stackoverflow.com/questions/7596930/iphone-simulator-simulate-3g-connection)

这对于带宽和数据包丢失来说很好，但不幸的是它无法更改报告给模拟器的运营商类型。所以我正在寻找一种不那么老套的方法来模拟运营商类型的变化。我说不是那么 hacky 是因为我已经提出了一个 hacky 解决方案，而且它是不完整的，因为它只能欺骗明确依赖于 Apple 著名`Reachability`模块的代码。（不过如果有人感兴趣，我可以在这里发布。）

有没有办法劫持/篡改`SystemConfiguration`API 报告的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T13:19:55.487

我使用优秀的[`OHHTTPStubs`](https://github.com/AliSoftware/OHHTTPStubs)库来测试这些东西。

您甚至可以指定要模拟的连接类型及其速度。并且很容易在测试中创建模拟网络返回。这意味着您没有在实际网络上进行测试，因此您的测试更具确定性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-10T15:47:26.303

使用 Xcode 工具提供的网络链接调节器

使用这个安装它：[安装 Apple 的网络链接调节器工具](https://stackoverflow.com/questions/9659382/installing-apples-network-link-conditioner-tool)

# locale - 检测语言环境并更改 url（重定向）以包含语言环境

> ID：11154254
> 
> 赞同：3
> 
> 时间：2012-06-22T10:14:03.817
> 
> 标签：locale, symfony-2.1

我想要做的是，检测用户浏览器的语言并将他重定向到包含 url 中的语言环境的页面。

我想，最简单的方法是注册一个内核监听器。这就是我所做的：

```
services:
    kernel__request_listener:
        class: Me\MainBundle\Listener\KernelRequestListener
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
        calls:
            - [ setContainer, [ @service_container ] ] 
```

内核请求监听器.php

```
...
/**
 * @Service
 */
class KernelRequestListener
{
    /**
     * @Observe("kernel.request")
     */
    public function onKernelRequest( GetResponseEvent $response )
    {

    if( $newLocale = $this->newLocale() )
    {
        $parmArray = $request->get('_route_params');
        $parmArray['_locale'] = $newLocale;

        $redirectResponse = new RedirectResponse( $this->getContainer()->get('router')->generate($request->get('_route'), $parmArray) );
        $redirectResponse->headers->setCookie( new Cookie('b_locale', $newLocale, time() + 2592000) );

        $response->setResponse( $redirectResponse );
    }
    }
...
} 
```

$this->newLocale() 方法只是检测用户是否应该被重定向到另一种语言并返回新的语言代码（即 DE 或 FR）。

问题来了：我正在使用资产来压缩 js 文件和 jms/i18n-routing-bundle 来执行基于语言环境的路由。当内核侦听器切换语言环境时，页面开始一遍又一遍地加载 js 文件。此外，有几个页面（即分析器、登录/注销等）不应该发生重定向，因为它没有任何意义或破坏 smthing。

内核侦听器是进行此类重定向的正确位置还是有更好的位置。如何解决以上问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:26:09.893

在您的代码之前添加：

```
public function onKernelRequest(GetResponseEvent $event)
{
    if (HttpKernelInterface::MASTER_REQUEST !== $event->getRequestType()) {
        return;
    }

    $request = $event->getRequest();
    if ($request->getRequestFormat() !== 'html') {
        return;
    }

    [CODE] 
```

# jqgrid - jqGrid - 缩小滚动条

> ID：11154257
> 
> 赞同：2
> 
> 时间：2012-06-22T10:14:07.073
> 
> 标签：jqgrid, horizontal-scrolling

最近遇到了一个问题，那就是 jqGrid 在 chrome 中有一个水平滚动条，我在@Oleg 评论的帮助下解决了这个问题[我](https://stackoverflow.com/questions/10588587/jqgrid-does-not-render-correctly-in-chrome-chrome-frame/10621951#comment14519782_10621951)
的应用程序现在工作正常......好吧
但是现在如果我在笔记本电脑中打开我的应用程序，网格具有水平滚动条。我可以通过在浏览器上缩小（**Ctrl** +**减号**）来重现此问题。但我不知道如何解决这个问题。

最后我想说的是，每当我在浏览器中缩小应用程序时，网格都会显示水平滚动条。我试过`autowidth: true`但没有工作。任何人都可以帮我解决这个问题。

# c++ - C++ 随机数生成器根本无法正确生成数字

> ID：11154258
> 
> 赞同：-3
> 
> 时间：2012-06-22T10:14:10.290
> 
> 标签：c++, random

这是我的功能：

```
Random(int min, int max)
{
    srand(time(NULL));
    return (rand() % (max-min)) + 1;
    // or
    return (rand() % (max+min)) + 1;
    // or
    return (rand() % (max-min))
    // or
    return (rand() % (max+min))
}; 
```

而且它不起作用，如果我说 add Random(5, 10) 它有时会显示 15, 5, 4。我无法弄清楚，因为所有指南都说“这就是它应该是的方式”但是它不起作用。我错过了什么？

这个方法是类的一部分。

我试过 srand(time(NULL)) 放在：

1.  一点也不
2.  在构造函数中
3.  在方法

没有结果。

rand() 不应该返回 0 到 1 之间的值吗？我的没有。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T10:20:11.017

1.  只调用`srand`一次
2.  使用`return (rand() % (max-min+1)) + min`；（+1 用于包含`max`在范围内）
3.  `rand()`返回一个介于 0 和 之间的值，`RAND_MAX`并且是一个正整数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T10:20:59.700

> 曼兰德(3)

函数签名是`int rand(void);`所以它已经不能返回 0 和 1 之间的值，因为它是一个整数。

**返回值：** rand() 和 rand_r() 函数返回一个介于 0 和 RAND_MAX（含）之间的值。srand() 函数不返回任何值。

来自[曼兰德（3）](http://linux.die.net/man/3/rand)

# java - Java抽象类“实例变量”

> ID：11154260
> 
> 赞同：1
> 
> 时间：2012-06-22T10:14:23.677
> 
> 标签：java, abstract-class

我不知道是我的想法愚弄了我还是这真的行不通。

我需要不同类型的 Logging 类，所以我创建了一个抽象类，所有类都具有相同的唯一定义是 writeToLog 的处理方式：

```
public abstract class LoggerTemplate {

    protected String filename ="log/";
    protected File logfile;

    protected FileWriter fw;

    public void writeToLog(String message) {
        if(fw != null) {
            try {
                message = new SimpleDateFormat("dd-MM-hh:mm").format(new Date()) + " " + message;
                fw.write(message);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

具体的子类将在其构造函数中实现其余逻辑，即其中之一：

```
public class JitterBufferLogger extends LoggerTemplate {

    public JitterBufferLogger() {
        super();
        filename += new SimpleDateFormat("yyyyddMMhhmm'.log'").format(new Date());

        if(!new File("log/").exists())
            new File("log").mkdir();

        logfile = new File(filename);
        try {
            logfile.createNewFile();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            fw = new FileWriter(logfile);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

但是当我调试时，我可以看到在为特定记录器调用 writeToLog 时，它会跳转到 LoggerTemplate 方法，因此 fw 和 logfile 为空。所以它不起作用。

它不应该工作还是我只是把事情搞砸了，应该进入周末;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:39:35.463

`LoggerTemplate`调试器在进入`writeToLog()`方法时进入类应该可以正常工作。奇怪的是基类中的属性有`null`值。

我已经使用以下简短的测试程序测试了您的代码：

```
public class Test {
    public static void main(String[] args) {
        LoggerTemplate lt = new JitterBufferLogger();
        lt.writeToLog("Hello");
    }
} 
```

在调用后添加`fw.flush()`到该`LoggerTemplate.writeToLog()`方法后`fw.write()`，它对我有用，日志文件已创建并包含日志消息。

也许 the`new File("log").mkdir()`或其他一些调用会引发您看不到的异常，因为*stderr*已被重定向到某个地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:44:27.360

那么可能缺少什么？- 文件写入器刷新可能会有所帮助。- 我无法用原始代码重现空值，不知道发生了什么。- 但正如每个人，包括我在内，都说：它应该有效，而且确实有效。

为什么日志文件中什么都没有？- 也许fw的冲洗丢失了..

无论如何，我用打印机包装它：

```
public abstract class LoggerTemplate {

    protected String filename ="log/";
    protected File logfile;

    protected PrintWriter pw;

    public void writeToLog(String message) {
            try {
                pw = new PrintWriter(new FileWriter(logfile,true));
                message = new SimpleDateFormat("dd-MM-hh:mm").format(new Date()) + " " + message + "\n";
                pw.write(message);
                pw.flush();
                pw.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
    }
} 
```

现在它的工作方式应该和预期的那样。请注意，不再需要具体子类中的 fw 实例化。

# javascript - 替换（或模拟） 我有一个 .ascx 页面，上面有一个 <asp:imagebutton在单击时调用事件的页面。 1="" 432="" 我想将其更改为="" a<asp:linkbutton并调用相同的事件。="" 问问题="" 2012-06-22t10:14:28.647="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我有一个="" .ascx="" 页面，上面有一个<asp:imagebutton在单击时调用事件的页面。="" 我只能访问="" 文件而不是后面的代码。="" 我已经考虑将="" imagebutton="" 留在页面上，只是样式为“="" display:none;”，并添加="" linkbut="" ton="" 控件来调用="" 的事件="" -="" 但我无法获得正确的="" javascript="" 语法来完成这项工作。="" 我欢迎建议。="" 在这里使用您的建议，我取得了一些不错的进展，谢谢（我对="" jquery="" 最不熟悉，所以参加了这个="" w="" e="" 的速成课程）。="" 我可以使用以下代码成功触发事件：="" jquery("#jlink").click(function(event){="" jquery('#dnn_ctr594_viewajaxmodulewrapper_ctr604_productpage_btnadditem').click();="" });="" （我并没有说我使用="" dotnetnuke="" 来保持我的问题简单——因此为什么要用="" jquery()="" 替换="" $()。="" 然而，虽然这可以引用控件的后渲染="" id，但我似乎可以让="" <%="btnAddItem%">工作。我认为（但无法证明）我可以使用 jQuery("select[id$='btnAddItem']") 获得一个选择器，但是用 dnn_ctr594_ViewAjaxModuleWrapper_ctr604_ProductPage_btnAddItem 替换它不起作用。 那么如何动态引用控件对象呢？ 最后的想法，谢谢？ 错误：从 long int 转换为非标量类型 __gnu_cxx::__normal_iterator 我正在尝试在 Linux (Redhat) 中运行旧的 C++ 代码。我正在使用 gcc 版本 4.1.2。这是我收到错误的代码示例： template <class tp="">TP *GCVVector<tp>::Find(const TP &Obj) { #ifdef WIN32 using namespace std; typedef typename vector<tp>::iterator Viterator; #else #ifdef __HP_aCC using namespace std; typedef typename vector<tp>::iterator Viterator; #else using namespace std; typedef typename std::vector<tp>::iterator Viterator; #endif #endif Viterator pCurrent =NULL ; 我得到的错误是这样的： /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVVector.h: In member function âTP* GCVVector<tp>::Find(const TP&) [with TP = GCVAsso<gcvstring, gcvstring="">::KeyNode]â: /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVAsso.h:165: instantiated from âbool GCVAsso<ktp, vtp="">::Add(KTP, VTP) [with KTP = GCVString, VTP = GCVString]â /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVTransformationServices.h:69: instantiated from here /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVVector.h:398: error: conversion from âlong intâ to non-scalar type â__gnu_cxx::__normal_iterator<gcvasso<gcvstring, gcvstring="">::KeyNode*, std::vector<gcvasso<gcvstring, gcvstring="">::KeyNode, std::allocator<gcvasso<gcvstring, gcvstring="">::KeyNode> > >â requested /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVAsso.h:165: instantiated from âbool GCVAsso<ktp, vtp="">::Add(KTP, VTP) [with KTP = GCVString, VTP = GCVString]â /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVTransformationServices.h:69: instantiated from here /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVVector.h:403: error: no match for âoperator=â in âpCurrent = GCVVector<tp>::BinarySearch [with TP = GCVAsso<gcvstring, gcvstring="">::KeyNode](0l, (GCVVector<tp>::GetSize [with TP = GCVAsso<gcvstring, gcvstring="">::KeyNode]() - 1l), ((const GCVAsso<gcvstring, gcvstring="">::KeyNode&)((const GCVAsso<gcvstring, gcvstring="">::KeyNode*)Obj)))â /usr/lib/gcc/x86_64-redhat- linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_iterator.h:634: note: candidates are: __gnu_cxx::__normal_iterator<gcvasso<gcvstring, gcvstring="">::KeyNode*, std::vector<gcvasso<gcvstring, gcvstring="">::KeyNode, std::allocator<gcvasso<gcvstring, gcvstring="">::KeyNode> > >& __gnu_cxx::__normal_iterator<gcvasso<gcvstring, gcvstring="">::KeyNode*, std::vector<gcvasso<gcvstring, gcvstring="">::KeyNode, std::allocator<gcvasso<gcvstring, gcvstring="">::KeyNode> > >::operator=(const __gnu_cxx::__normal_iterator<gcvasso<gcvstring, gcvstring="">::KeyNode*, std::vector<gcvasso<gcvstring, gcvstring="">::KeyNode, std::allocator<gcvasso<gcvstring, gcvstring="">::KeyNode> > >&) make[2]: *** [CMakeFiles/GCVCore.dir/trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVTransformationServices.o] Error 1 make[1]: *** [CMakeFiles/GCVCore.dir/all] Error 2 javascriptasp.net 4 2 回答 2 This answer is useful 1 当按下图像按钮时使用JQuery模拟点击链接怎么样？ $('#linkButtonID').click(function(){ $('#imageButtonID').click(); }); 这可能有效 编辑 另外一点 - 如果你不能访问后面的代码，那么将 asp.net webcontrols 放在你的标记上就没有什么意义了。无论如何，您都无法访问服务器端事件和属性，这才是重点。我只想放一个普通的锚标记 - 在 JavaScript 和 JQuery 中使用它会更容易，即 [Click this](#) 然后JQuery变成 $('#linkButtonID').click(function(){ $('#<%=imageButtonID.ClientID%>').click(); }); 第一个代码只是为了给你一个想法，但我已经包含了为已经存在的 asp.net Web 控件写出客户端 ID 的想法（如之前的答案），以对比为普通链接编写它 另外 - 不要忘记为此包含 JQuery 库 于 2012-06-22T10:22:03.543 回答 This answer is useful 0 解决！ 我只是用 ImageButton 的 ID 对选择器进行了通配，而不是尝试以编程方式获取完整的对象引用。 使用的代码如下： [Click Here](#) <asp:imagebutton id="btnAddItem" runat="server" imageurl="jbtn.gif" style="display:none;"></asp:imagebutton> 没有你的帮助是不可能做到的。谢谢！ 于 2012-06-25T12:27:46.317 回答 Related 1 jquery - jquery - 如何使动态内容识别加载功能？ 1 ruby - Ruby：如何一次安全地要求目录中的所有类？ 2 silverlight - 当索引名称包含“[]”特殊字符时如何在 Xaml 中绑定索引 6 python - 为什么 datetime.strptime 在这个简单的例子中不起作用？ 1 perl - Perl ole 选择属性迭代 0 eclipse - 如何在 PyDev 中禁止创建运行配置 1 java - 通过 Socket 发送的图像流 - 服务器死锁问题 2 java - 在 Java 中设置默认模式名称 0 iphone - 如何从 xml Webservices 中获取值并显示到 UITableView 中，包括 null 值？ 1 c# - Autofac：检查实例是否已经解析 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</gcvasso<gcvstring,></gcvasso<gcvstring,></gcvasso<gcvstring,></gcvasso<gcvstring,></gcvasso<gcvstring,></gcvasso<gcvstring,></gcvasso<gcvstring,></gcvasso<gcvstring,></gcvasso<gcvstring,></gcvstring,></gcvstring,></gcvstring,></tp></gcvstring,></tp></ktp,></gcvasso<gcvstring,></gcvasso<gcvstring,></gcvasso<gcvstring,></ktp,></gcvstring,></tp></tp></tp></tp></tp></class></asp:imagebutton在单击时调用事件的页面。>

> ID：11154261
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, asp.net

我有一个 .ascx 页面，上面有一个`<asp:ImageButton`在单击时调用事件的页面。

我想将其更改为 a`<asp:LinkButton`并调用相同的事件。

我只能访问 .ascx 文件而不是后面的代码。

我已经考虑将 ImageButton 留在页面上，只是样式为“ `display:none;`”，并添加 LinkBut​​ton 控件来调用 ImageButton 的事件 - 但我无法获得正确的 JavaScript 语法来完成这项工作。

# 我欢迎建议。

在这里使用您的建议，我取得了一些不错的进展，谢谢（我对 jQuery 最不熟悉，所以参加了这个 w/e 的速成课程）。

我可以使用以下代码成功触发事件：

jQuery("#jlink").click(function(event){ jQuery('#dnn_ctr594_ViewAjaxModuleWrapper_ctr604_ProductPage_btnAddItem').click(); });

（我并没有说我使用 DotNetNuke 来保持我的问题简单——因此为什么要用 jQuery() 替换 $()。

然而，虽然这可以引用控件的后渲染 ID，但我似乎可以让 <%=btnAddItem%> 工作。我认为（但无法证明）我可以使用 jQuery("select[id$='btnAddItem']") 获得一个选择器，但是用 dnn_ctr594_ViewAjaxModuleWrapper_ctr604_ProductPage_btnAddItem 替换它不起作用。

那么如何动态引用控件对象呢？

最后的想法，谢谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:22:03.543

当按下图像按钮时使用JQuery模拟点击链接怎么样？

```
$('#linkButtonID').click(function(){
    $('#imageButtonID').click();
}); 
```

这可能有效

**编辑**

另外一点 - 如果你不能访问后面的代码，那么将 asp.net webcontrols 放在你的标记上就没有什么意义了。无论如何，您都无法访问服务器端事件和属性，这才是重点。我只想放一个普通的锚标记 - 在 JavaScript 和 JQuery 中使用它会更容易，即

```
<a href="#" id="linkID">Click this</a> 
```

然后JQuery变成

```
$('#linkButtonID').click(function(){
    $('#<%=imageButtonID.ClientID%>').click();
}); 
```

第一个代码只是为了给你一个想法，但我已经包含了为已经存在的 asp.net Web 控件写出客户端 ID 的想法（如之前的答案），以对比为普通链接编写它

另外 - 不要忘记为此包含 JQuery 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:27:46.317

解决！

我只是用 ImageButton 的 ID 对选择器进行了通配，而不是尝试以编程方式获取完整的对象引用。

使用的代码如下：

```
<a href="#" id="jlink" class="txtbutton">Click Here</a>
<asp:ImageButton ID="btnAddItem" runat="server" ImageUrl="jbtn.gif" style="display:none;"></asp:ImageButton>

<script type="text/javascript">

jQuery("#jlink").click(function(event){
jQuery("[id$=btnAddItem]").click();
});

</script> 
```

没有你的帮助是不可能做到的。谢谢！

# c++ - 错误：从 long int 转换为非标量类型 __gnu_cxx::__normal_iterator

> ID：11154262
> 
> 赞同：2
> 
> 时间：2012-06-22T10:14:31.647
> 
> 标签：c++, gcc, cmake

我正在尝试在 Linux (Redhat) 中运行旧的 C++ 代码。我正在使用 gcc 版本 4.1.2。这是我收到错误的代码示例：

```
 template <class TP> TP *GCVVector<TP>::Find(const TP &Obj)
        {
        #ifdef WIN32
                using namespace std;
                typedef typename vector<TP>::iterator Viterator;
        #else
        #ifdef __HP_aCC 
                using namespace std;
                typedef typename vector<TP>::iterator Viterator;
        #else
                using namespace std;
                typedef typename std::vector<TP>::iterator Viterator;
        #endif
        #endif

                Viterator pCurrent =NULL ; 
```

我得到的错误是这样的：

```
 /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVVector.h: In member          function âTP* GCVVector<TP>::Find(const TP&) [with TP = GCVAsso<GCVString, GCVString>::KeyNode]â:
        /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVAsso.h:165:   instantiated from âbool GCVAsso<KTP, VTP>::Add(KTP, VTP) [with KTP = GCVString, VTP = GCVString]â
        /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVTransformationServices.h:69:   instantiated from here
         /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVVector.h:398: error: conversion from âlong intâ to non-scalar type â__gnu_cxx::__normal_iterator<GCVAsso<GCVString, GCVString>::KeyNode*, std::vector<GCVAsso<GCVString, GCVString>::KeyNode, std::allocator<GCVAsso<GCVString, GCVString>::KeyNode> > >â requested
           /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVAsso.h:165:   instantiated from âbool GCVAsso<KTP, VTP>::Add(KTP, VTP) [with KTP = GCVString, VTP = GCVString]â
        /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVTransformationServices.h:69:   instantiated from here
        /trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVVector.h:403: error: no match for âoperator=â in âpCurrent = GCVVector<TP>::BinarySearch [with TP = GCVAsso<GCVString, GCVString>::KeyNode](0l, (GCVVector<TP>::GetSize [with TP = GCVAsso<GCVString, GCVString>::KeyNode]() - 1l), ((const GCVAsso<GCVString, GCVString>::KeyNode&)((const GCVAsso<GCVString, GCVString>::KeyNode*)Obj)))â
        /usr/lib/gcc/x86_64-redhat-   linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_iterator.h:634: note: candidates are: __gnu_cxx::__normal_iterator<GCVAsso<GCVString, GCVString>::KeyNode*, std::vector<GCVAsso<GCVString, GCVString>::KeyNode, std::allocator<GCVAsso<GCVString, GCVString>::KeyNode> > >& __gnu_cxx::__normal_iterator<GCVAsso<GCVString,         GCVString>::KeyNode*, std::vector<GCVAsso<GCVString, GCVString>::KeyNode, std::allocator<GCVAsso<GCVString, GCVString>::KeyNode> > >::operator=(const __gnu_cxx::__normal_iterator<GCVAsso<GCVString, GCVString>::KeyNode*, std::vector<GCVAsso<GCVString, GCVString>::KeyNode, std::allocator<GCVAsso<GCVString, GCVString>::KeyNode> > >&)
        make[2]: ***    [CMakeFiles/GCVCore.dir/trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVTransformationServices.o] Error 1
        make[1]: *** [CMakeFiles/GCVCore.dir/all] Error 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:33:49.017

原始代码是针对`std::vector<T>::iterator`原始指针的 STL 编写的，因此可以（并且需要）初始化为 NULL。

为了完全兼容，将行更改为

```
Viterator pCurrent = Viterator(); 
```

在 C++11 中，您可以使用

```
Viterator pCurrent{}; 
```

完全兼容在这里意味着它`Viterator`可能只是一个裸指针。在这种情况下，将其显式设置为默认构造值会将其设置为 NULL。下面是一个简单的例子来演示它。

```
#include <iostream>

typedef void * Iterator;

int main(int, char**)
{
  Iterator v1, v2=Iterator();
  std::cout << "uninitialized pointer: " << v1 << "\ninitialized pointer: " << v2 << std::endl;
} 
```

输出是：

```
uninitialized pointer: 0x7fff5fc01052
initialized pointer: 0 
```

请注意，如果程序对 进行任何操作`pCurrent`，除了给它分配一个新值之外，它可能仍然是不正确的（将它与自身或通过复制它初始化的另一个迭代器进行比较是有效的，但与非奇异迭代器进行比较，或者一个单独的默认值构造的迭代器将是未定义的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:17:53.947

迭代器不是数字，它是大多数时候不将数字作为构造函数参数的对象。

只需将行替换为

```
Viterator pCurrent = Viterator(); 
```

它将以与当前代码相同的方式出现错误。

# java - 使用 Bouncycastle 与 PSK 的 TLS 连接

> ID：11154263
> 
> 赞同：3
> 
> 时间：2012-06-22T10:14:34.733
> 
> 标签：java, sockets, cryptography, bouncycastle, ssl

我必须使用预共享密钥与远程服务器建立 TLS 连接。我目前正在使用 Bouncycastle 的 PSKTlsClient。我的初始化代码如下所示：

```
 socket_ = new Socket(address,port);            
 tlsHandler_ = new TlsProtocolHandler(socket_.getInputStream(),socket_.getOutputStream());           
 pskTlsClient_ = new PSKTlsClient(tlsPskInfo_);            
 tlsHandler_.connect(pskTlsClient_); 
```

但是我得到了这个堆栈跟踪：

```
java.io.IOException: Internal TLS error, this could be an attack
at org.bouncycastle.crypto.tls.TlsProtocolHandler.failWithError(Unknown Source)
at org.bouncycastle.crypto.tls.TlsProtocolHandler.safeReadData(Unknown Source)
at org.bouncycastle.crypto.tls.TlsProtocolHandler.connect(Unknown Source)
at common.network.Transport.PskTlsClientSocket.connect(PskTlsClientSocket.java:61) 
```

我还在消息中得到了一个 TLS 证书，PSK 是在其中传输的，但是我不知如何建立这个连接。你有什么建议如何进行吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T21:30:55.023

解决了。问题是，在 java bouncycastle 库中，进程服务器证书方法没有实现并且总是抛出一个内部错误。所以我不得不实施这个并且在那之后一切都很好。

编辑：在 TlsPSKKeyExchange.java 中将以下方法更改为：

```
public void processServerCertificate(Certificate serverCertificate) throws IOException
{
    SubjectPublicKeyInfo subPubKeyInfo = serverCertificate.certs[0].getTBSCertificate().getSubjectPublicKeyInfo();
    RSAPublicKey pubKey = RSAPublicKey.getInstance(subPubKeyInfo.getPublicKey());
    rsaServerPublicKey = new RSAKeyParameters(false,pubKey.getModulus(),pubKey.getPublicExponent());
} 
```

第一个证书中的第一个公钥用于 RSA 加密。

# mysql - SQL 3 表连接

> ID：11154265
> 
> 赞同：2
> 
> 时间：2012-06-22T10:14:47.123
> 
> 标签：mysql, sql, join

我有 3 个需要在 SQL 语句中链接的表（如果有帮助，我正在使用 PHP - MySQL）。我需要从第三个表中提取 vendor 字段等于“3”的所有订单，如下所示：

```
orders   -  orders_items - items

order_id -> order_id
            item_id     -> id
                           vendor = '3' 
```

我相信有很多方法可以通过各种 WHERE 和 JOINS 来做到这一点，但与我的方法相比，我要求最有效的方法：

```
SELECT
    orders.order_id
FROM
    items, orders
INNER JOIN
    orders_items
ON
    orders.order_id = orders_items.order_id
WHERE
    orders_items.item_id = items.id
AND
    items.vendor = '3'
GROUP BY
    orders.order_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:19:10.117

```
select o.order_id from orders o inner join orders_items oi on o.order_id = oi.item_id inner join items i on oi.item_id = i.id where i.vendor='3'; 
```

许多方法可以做到这一点，例如连接、子查询、in 子句。取决于时间或内存方面的需要，最好使用也主要依赖于表的`INDEX`列和连接表的数据量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:20:27.180

使用`,`符号并不被普遍认为是不好的做法，但我认为现在同意它的人已经很少了。甚至甲骨文（其用户似乎是该语法最直言不讳的支持者）也建议不要使用它。

但我不知道*有谁会*支持混合`,`和 ANSI-92 的`JOIN`语法。这只是自找麻烦。

```
SELECT
  orders.order_id
FROM 
  orders
INNER JOIN
  orders_items
    ON orders.order_id = orders_items.order_id
INNER JOIN
  items
    ON orders_items.item_id = items.id
WHERE
  items.vendor = '3'
GROUP BY
  orders.order_id 
```

SQL 优化器不会完全按照您指定的那样执行。SQL 只是一个表达式，SQL 优化器从该表达式得出一个计划以给出合适的结果。通过如上所述编写，优化器将找到它认为过滤、连接、排序等的最佳顺序，以及用于执行这些操作的最佳索引等。

**编辑**

我注意到人们支持`DISTINCT`over `GROUP BY`。

虽然`DISTINCT`稍微短一些，但它并没有更快，并且确实对您施加了限制。`COUNT(*)`例如，您以后不能添加，但`GROUP BY`可以。

简而言之，`GROUP BY`可以做任何事情都`DISTINCT`可以，但反过来就不是这样了。我只`DISTINCT`在非常琐碎的代码中使用，所以我可以在一行上得到一个 shole 查询。即便如此，随着代码的发展，我经常会有点后悔，我需要恢复到`GROUP BY`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:29:01.010

```
SELECT O.order_id AS Id
FROM orders O
INNER JOIN orders_items OI
    ON O.order_id = OI.order_id
INNER JOIN items I
    ON OI.item_id = I.id
WHERE I.vendor = '3'
GROUP BY O.order_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:19:23.827

您不需要，如果您需要删除重复项`GROUP BY`，只需制作 a ：`DISTINCT`

```
SELECT DISTINCT o.order_id
FROM orders o
INNER JOIN orders_items oi ON oi.order_id = o.order_id
INNER JOIN items i ON i.id = oi.items_id
where i.vendor = '3' 
```

而且，`INNER JOIN`在所有桌子上使用:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T10:19:33.127

这是有效的，也将工作::

```
SELECT
   DISTINCT(orders.order_id)
FROM
    items

INNER JOIN orders_items on (items.id=orders_items.item_id )
inner join orders on (orders.order_id=order_items.order_id)
WHERE
items.vendor = '3' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T10:21:11.783

```
SELECT
   orders.order_id
FROM
   orders o
      INNER JOIN orders_items oi ON o.order_id = oi.order_id
      INNER JOIN items i ON oi.item_id = i.item_id
WHERE
   i.vendor = 3 
```

table1, table2 语法不是我用过的，但我想将表列为联接更有效，因为这似乎是最被接受的方式。

此外，如果该字段为整数，则无需在供应商标准上添加语音标记。

# perl - Perl 打包、解包和标准输入

> ID：11154273
> 
> 赞同：2
> 
> 时间：2012-06-22T10:15:24.047
> 
> 标签：perl, stdin, pack, unpack

有人可以解释一下为什么这不能按我的预期工作吗？

```
zen:~ emx$ echo ABC | perl -nle "print unpack 'H*'"
414243
zen:~ emx$ echo 414243 | perl -nle "print pack 'H*'"

zen:~ emx$ 
```

不知何故，我期待第二个命令打印 ABC

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T10:18:48.557

`unpack()``$_`如果您不提供第二个参数，则默认使用；[`pack()`另一方面，没有](http://perldoc.perl.org/functions/pack.html)。

# wcf - 在 httpTransport 中找不到 authenticationScheme

> ID：11154274
> 
> 赞同：0
> 
> 时间：2012-06-22T10:15:30.110
> 
> 标签：wcf, silverlight, authentication, service

我正在尝试将 Windows 身份验证用于一项服务，并且已经阅读了几篇文章，只是说我需要添加

```
httpTransport = authenticationScheme="Negotiate" 
```

但是我只收到消息“未声明 authenicationScheme 属性”

任何人都可以解释我是如何找到这个的，或者是否有另一种方法可以将 Windows 身份验证提供给自定义服务。

```
<customBinding>
            <binding name="CustomBinding_AFDiscoveryService">
                <binaryMessageEncoding />
                <httpTransport  authenticationScheme="Negotiate" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" />
              </binding>
        </customBinding> 
```

非常感谢

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:17:31.843

那应该工作得很好。你从哪里得到这个消息？

```
<system.serviceModel>
    <bindings>
        <customBinding>
            <binding name="CustomBinding_AFDiscoveryService">
                <binaryMessageEncoding />
                <httpTransport  authenticationScheme="Negotiate" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" />
            </binding>
        </customBinding>
    </bindings>
    <services>
        <service name="Host.Service1">
            <endpoint address="" binding="customBinding" bindingConfiguration="CustomBinding_AFDiscoveryService" contract="Host.IService1">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
            <host>
                <baseAddresses>
                    <add baseAddress="http://localhost:8732/Design_Time_Addresses/Host/Service1/" />
                </baseAddresses>
            </host>
        </service>
    </services>
</system.serviceModel> 
```

# android - 如何在 Android 设备上单击 H/W OK 按钮时处理事件

> ID：11154275
> 
> 赞同：0
> 
> 时间：2012-06-22T10:15:33.023
> 
> 标签：android, android-layout

我正在使用在电话设备上连接了键盘（硬件）的设备。现在我想在单击键盘上的确定按钮后获取事件。我发现我们使用 DPAD_CENTER 来指定 OK 按钮。任何人都可以帮助我解决这个问题。如何为此确定按钮设置侦听器。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:34:42.400

覆盖 onkeydown 函数，您可以对按下的任何硬件键执行操作

```
public boolean onKeyDown(int keyCode, KeyEvent event){
            if(keyCode==KeyEvent.KEYCODE_DPAD_CENTER){
                // Do what you have to do here
            }
            return false;
        } 
```

# user-interface - ATL GUI 教程

> ID：11154276
> 
> 赞同：1
> 
> 时间：2012-06-22T10:15:46.350
> 
> 标签：user-interface, atl

我正在从事 ATL GUI 设计。我需要一些关于这个主题的教程和书籍。你能推荐我一个网页或书吗？

我必须使用 ATL，因为我的应用程序不仅可以在 (n) [x] 机器上运行。而且机器资源有限，只好用ATL。我不能包含很多很多的头文件/类/框架和东西。我知道关于 GUI 设计有很多可能性。我知道有很多选择。我需要 ATL。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:38:05.027

对于 GUI，您通常使用[`WTL`](http://msdn.microsoft.com/en-us/magazine/cc163305.aspx). ATL 对 GUI 的支持是有限的，只为您提供窗口、对话框、ActiveX 控件和宿主。WTL 通过提供控制包装器、实用程序类型、框架/视图模型等扩展了这一点。

您可以在以下位置找到适用于 ATL 和 WTL 的出色示例

*   [http://wtl.sourceforge.net/](http://wtl.sourceforge.net/)
*   [http://www.viksoe.dk/code/](http://www.viksoe.dk/code/)

# c# - 在调试和发布设置 Visual Studio 中运行不同的代码

> ID：11154278
> 
> 赞同：6
> 
> 时间：2012-06-22T10:15:51.943
> 
> 标签：c#, visual-studio-2010, silverlight

是否可以在 C# 中在调试设置中运行特定行代码，在发布设置中运行其他代码。

```
if #debug

//run some lines of code

else 

// run different lines of code 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T10:35:12.360

您可以执行以下操作：

```
#if DEBUG
// Debug Code

#else
// Release Code

#endif 
```

我在 WCF 服务中使用它在调试中将其作为控制台应用程序运行，但在发布时作为 Windows 服务运行

HTH，鲁珀特。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-15T14:16:16.240

阅读这篇博文[如果你使用“#if DEBUG”，你做错](https://blogs.msmvps.com/peterritchie/2011/11/24/if-you-re-using-if-debug-you-re-doing-it-wrong/)了，作者建议使用`System.Diagnostics.ConditionalAttribute`：

```
[Conditional("DEBUG")]
private static void DebugMethod()
{
    // Debugging code
} 
```

# javascript - 使用ajax从服务器获取响应时出错

> ID：11154280
> 
> 赞同：1
> 
> 时间：2012-06-22T10:15:53.690
> 
> 标签：javascript, ajax, xmlhttprequest

```
var x = document.getElementById("demo");

function geoapp() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    }
    else {
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}

function showPosition(position) {
    var lat = position.coords.latitude;
    var longi = position.coords.longitude;
    var appid = * * * * ;
    var geoapp = 'http://where.yahooapis.com/geocode?       l                        location=' + lat + ',' + longi + '&flags=J&gflags=R&appid=' + appid;
    document.getElementById("demo").innerHTML = geoapp;
    var my_JSON_object = {};
    var http_request = new XMLHttpRequest();
    http_request.open("GET", geoapp, true);
    http_request.onreadystatechange = function() {
        var done = 4,
            ok = 200;
        if (http_request.readyState == done && http_request.status == ok) {
            my_JSON_object = JSON.parse(http_request.responseText);
            document.getElementById("demo").innerHTML = my_JSON_object;
        }
    };
    http_request.send(null);
}​ 
```

这段代码从 html5 geoapi 获取坐标，然后将它们发送到 yahoo placefinder api，但是

查询正常时我无法接收 json 对象。任何帮助将不胜感激

# windows - 何时使用 .exe，何时不使用？

> ID：11154282
> 
> 赞同：0
> 
> 时间：2012-06-22T10:16:03.177
> 
> 标签：windows, shell, cygwin

我真的不明白发生了什么，也看不出有什么区别：

我下载了`base64.exe`用于在 windows 下创建 base64 文本。我将它复制到，`C:\Windows\`因为它在`%PATH%`变量中。

现在我想尝试一下：`echo Hello | base64`效果很好。好的，我不需要附加`.exe`，据我所知，我也不需要对`.bat`文件进行附加`.com`。

但是现在我安装了一些 cygwin 工具，例如尝试过`which base64`，但它不起作用，因为它说`base64 is not in path`。然后我输入`which base64.exe`并得到`C:\Windows`。

所以我现在的问题是：什么时候需要使用 .exe，什么时候不需要？只有当我使用 cygwin 工具时才需要附加 .exe 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:19:33.707

Cygwin 是一个模拟 UNIX 行为的 shell。UNIX 什么都不知道`.exe`，这就是 Cygwin 找不到的原因`base64.exe`。在 UNIX 下，存储二进制文件时不会在其文件名中添加扩展名，例如仅`base64`.

Windows CMD 会自动将`.bat`、`.com`等附加`.exe`到您的文件名。Cygwin 没有。因此，如果您使用的是 linux shell，则必须手动附加它。

由于 Cygwin 知道它总是在 Windows 下运行，`.exe`如果您想在 shell 本身中执行某些操作（例如打开文件），它可能会附加，以便对期望这种行为的 Windows 用户表现得更加友好。然而，在 Cygwin 下运行的程序可能不会集成这些功能，因为它们主要是为在 UNIX 下使用而开发的。`which base64`这可能是失败的一个原因。

# php - 如何读出已安装 PHP 扩展的修订版或 phpinfo() 公开的其他值

> ID：11154286
> 
> 赞同：1
> 
> 时间：2012-06-22T10:16:11.747
> 
> 标签：php, php-extension

我的问题相对简单，但是无论是广泛的还是狭窄的搜索，我都没有太多运气。在 phpinfo 上，我可以找到 posix 扩展的以下文本：

```
posix

Revision    $Revision: 300764 $ 
```

“$Revision：300764 $”部分是我所追求的。类似于 SimpleXML、sysvmsg 和其他我想阅读更多详细信息的扩展。例如在 openssl 部分，我想要“OpenSSL Library Version”的值。

有没有办法在 PHP 中获取这些值，而不用输出缓冲区做探戈，然后解析 phpinfo 输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:22:54.717

尝试`phpversion`使用提供的扩展名：

```
<?php
$e=get_loaded_extensions();

foreach ($e as $ext)
{
        echo $ext.' : '.phpversion($ext)."\n";
}

$> php -f t.php
Core : 5.3.14
date : 5.3.14
ereg : 
libxml : 
openssl : 
pcre : 
sqlite3 : 0.7-dev
ctype : 
curl : 
dom : 20031129
fileinfo : 1.0.5-dev
filter : 0.11.0
ftp : 
gd : 
gettext : 
hash : 1.0
iconv : 
json : 1.2.1
ldap : 
mbstring : 
mcrypt : 
SPL : 0.2
session : 
standard : 5.3.14
mysqlnd : mysqlnd 5.0.8-dev - 20102224 - $Id: 65fe78e70ce53d27a6cd578597722950e490b0d0 $
PDO : 1.0.4dev
pdo_mysql : 1.0.2
pdo_sqlite : 1.0.1
Phar : 2.0.1
posix : 
Reflection : $Id: 522fef1e5100f848a5e2059d98b3a880a3143e9a $
mysqli : 0.1
SimpleXML : 0.1
SQLite : 2.0-dev
mysql : 1.0
tidy : 2.0
tokenizer : 0.1
xml : 
xmlreader : 0.1
xmlwriter : 0.1
xdebug : 2.2.0 
```

# iphone - 收到推送通知后更改选定的选项卡

> ID：11154289
> 
> 赞同：2
> 
> 时间：2012-06-22T10:16:37.560
> 
> 标签：iphone, ios, delegates, push-notification, uitabbar

我想更改从推送通知打开应用程序时打开的选项卡。

目前，我让应用程序在应用程序委托中注册通知并在第一个视图控制器中运行一个方法：

**AppDelegate.m**

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

NSLog(@"didReceiveRemoteNotification");self.apstype = [[NSMutableString alloc] init];self.apstype = [NSMutableString stringWithFormat:@"%@", [[userInfo objectForKey:@"aps"] objectForKey:@"apstype"]];

    // Add the tab bar controller's current view as a subview of the window
    [[UIApplication sharedApplication] setIdleTimerDisabled:YES];

    HomeTab_Main *controller = [HomeTab_Main alloc];
    [controller receivedNotification];

    if (application.applicationState == UIApplicationStateActive){
        NSLog(@"UIApplicationStateActive");
    } else if (application.applicationState == UIApplicationStateBackground){
        NSLog(@"UIApplicationStateBackground");
    } else if (application.applicationState == UIApplicationStateInactive){
        NSLog(@"UIApplicationStateInactive");
    } else {
        NSLog(@"else");
    }
}
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UINavigationBar *navigationBarProxy = [UINavigationBar appearance];
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){
        UIImage *backgroundImage = [UIImage imageNamed:@"ge_navigationBar.png"];
        [navigationBarProxy setBackgroundImage:backgroundImage forBarMetrics:UIBarMetricsDefault];

    } else if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){
        UIImage *backgroundImage = [UIImage imageNamed:@"ge_navigationBar~ipad.png"];
        [navigationBarProxy setBackgroundImage:backgroundImage forBarMetrics:UIBarMetricsDefault];
    }

    [[UIApplication sharedApplication] registerForRemoteNotificationTypes: (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];

    UIColor *tintColour = [UIColor colorWithRed:0.000 green:0.600 blue:0.765 alpha:1];
    [[UIBarButtonItem appearance] setTintColor:tintColour];

    [[UINavigationBar appearance] setTitleTextAttributes:
     [NSDictionary dictionaryWithObjectsAndKeys:[UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1.0],
      UITextAttributeTextColor, [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.8], UITextAttributeTextShadowColor, [NSValue valueWithUIOffset:UIOffsetMake(0, -1)], UITextAttributeTextShadowOffset, [UIFont fontWithName:@"Arial-Bold" size:0.0], UITextAttributeFont, nil]];

    return YES;
} 
```

**HomeTab_Main.m**

```
- (void)receivedNotification
{
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSLog(@"%@", appDelegate.apstype);
    if([appDelegate.apstype isEqualToString:@"inbox"]){
        NSLog(@"goToTab");
        [self performSelector:@selector(goToTab) withObject:nil afterDelay:0.1];
    }
}

- (void)goToTab
{    
    NSLog(@"Go to tab");
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"1 new message" message:@"click to read" delegate:self cancelButtonTitle:@"cancel" otherButtonTitles:nil, nil];
    [alert show];

    self.tabBarController.selectedIndex = 2;
} 
```

我遇到的主要问题是警报视图正在显示，但选项卡没有改变。从通知访问应用程序时，我想自动切换到相应的选项卡。有谁知道这怎么可能有任何例子？

**添加了 didFinishLaunchingWithOptions**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:09:00.667

Luc 是对的，尽管它`self.view.window.rootViewController`不是`self.rootviewcontroller`. 但是我认为这不是完美的解决方案，因为`TabBarController`并不总是必须是 rootViewController ...

你`TabBarController`在应用程序委托/主窗口或另一个视图控制器中有你的吗？

尝试`selectedIndex`在应用程序委托或包含 TabBarController 的 viewController 中设置。

我使用它在我的一个应用程序中使用它：

**AppDelegate.m**

```
-(void)showReportTab{
    [self.tabBarController setSelectedIndex:1];
} 
```

**AppDelegate.h**

```
@property (nonatomic, strong) IBOutlet UITabBarController *tabBarController; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:50:51.283

Can we also get the code from the method `application:didFinishLaunchingWithOptions:`? I would like to see how you are creating the tabBarController.

Also try to call `self.tabBarController.selectedIndex = 2;` in the method `application:didFinishLaunchingWithOptions:` and check if the correct view controller becomes active.

# iphone - 如何在 iPhone 中列出 .EPUB 文件？

> ID：11154290
> 
> 赞同：2
> 
> 时间：2012-06-22T10:16:42.597
> 
> 标签：iphone, objective-c, ios, ipad, epub

我正在创建一个 epub 阅读器。在那我想列出来自 iphone 的 .epub 文件。所以我想知道是否有任何可能的方法来列出来自 iphone 的 .epub 文件（不仅来自项目目录路径，还包括手机中的其他任何地方）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T10:22:20.547

不，这是不可能的。

由于没有文件系统访问权限，除了应用程序沙箱中的目录。

所有应用程序都必须存储它们与沙箱一起使用的文件，你告诉 iOS 你的应用程序可以操作`.epub`文件。这将允许用户打开文件，例如您应用中的电子邮件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T09:41:49.810

正如@rckoenes 所回答的那样，除了您的应用程序包之外，无法访问文件系统。

您可以像这样访问应用程序包中的文件：

```
NSString *bundlePathName = [[NSBundle mainBundle] bundlePath];
NSError *error;
NSArray *bundleContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:bundlePathName error:&error];

for (NSString *currentItem in bundleContents) {
    if ([currentItem rangeOfString:@"." options:NSBackwardsSearch].location != NSNotFound) {
        int tempIndex = (int)([fileName rangeOfString:@"." options:NSBackwardsSearch].location);
        tempIndex++;
        NSString *aStrExtension = [[fileName substringWithRange:NSMakeRange(tempIndex, [fileName length]-tempIndex)] lowercaseString];

        if ([aStrExtension isEqualToString:@"epub"]) {

           //Add this file to an array, to make it available for choosing and view its details
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:22:21.723

如果您的意思是要打开未保存在应用程序包中的 ePub 文件，那么您不能，您将只能访问应用程序沙箱中的文件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T10:06:25.143

根据@rckoenes：App 包中的任何文件都无法访问，

所以我以这种方式检索了 .epub 文件。

```
 NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
    NSFileManager *manager = [NSFileManager defaultManager];
    NSDirectoryEnumerator *direnum = [manager enumeratorAtPath:bundleRoot];

    NSString *filename;

    while ((filename = [direnum nextObject] )) {

        if ([filename hasSuffix:@".epub"]) {   //change the suffix to what you are looking for

            [arrayListofEpub addObject:[filename stringByDeletingPathExtension]];

        }

    } 
```

# php - 在 WAMP 上安装 FFMPEG

> ID：11154291
> 
> 赞同：0
> 
> 时间：2012-06-22T10:16:43.043
> 
> 标签：php, ffmpeg, wamp, wampserver, ffmpeg-php

我可能已经花了超过 12 个小时试图在 WAMP 上安装 FFMPEG。我知道其他人已经在这个网站上回答了这个问题，但是它不适用于我的设置。

我尝试了以下方法：

```
Download ffmpeg_new
Copy php_ffmpeg.dll from the php5 folder to the C:\wamp\bin\php\php5.2.9-2\ext
Copy files from common to the windows/system32 folder
Add extension=php_ffmpeg.dll to php.ini file
Restarted all services (Apache, PHP...) 
```

我当前的设置是 PHP 5.2.1，Apache 2.0.63。我有一台 Windows 7 64 位计算机。

我的 PHP 错误日志中出现以下错误：

[22-Jun-2012 01:39:31] PHP 警告：PHP 启动：无法加载动态库 'c:/wamp/bin/php/php5.2.1/ext/php_ffmpeg.dll' - 指定的模块不能成立。在第 0 行的未知中

显然我已经将模块放在了 ext 文件夹中。

Phpinfo.php 验证 FFMPEG 模块没有被加载。我尝试安装 PHP 5.3（带有更高的 FFMPEG 版本）、5.2.6 和 5.2.9-2，但模块仍然无法加载。还有什么我应该尝试的吗？拥有 64 位 Windows 7 计算机有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:20:42.400

是的，拥有 64 位计算机可能会有所作为。尝试将“通用”文件放入`C:\Windows\SysWow64`而不是`system32`.

如果这不起作用，请尝试使用[DependencyWalker](http://www.dependencywalker.com/)检查丢失的 DLL（用它打开 php_ffmpeg.dll）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T11:32:28.787

安装ffmpeg的步骤：

1.  激活 GD2 Php 扩展

2.  下载 ffmpeg.exe (www.ffmpeg.org)

3.  解压缩下载的 zip 文件。里面会有三个文件：ffmpeg.exe、ffplay.exe和pthreadGC2.dll

4.  从下载 FFMPEG windows dll 文件

5.  解压缩下载的 zip 文件。您将需要三个文件：php_ffmpeg.dll、avcodec.dll 和 avformat.dll。

6.  将 php_ffmpeg.dll 复制到您的 wamp php 扩展文件夹中：bin\php\php5.2.16\ext

7.  将行“extension=php_ffmpeg.dll”（不带引号）添加到 php.ini 中 extension= 部分的末尾

8.  将 avcodec.dll 和 avformat.dll 和 pthreadGC2.dll 复制到 C:\windows\system32

9.  单击 WAMP 图标，然后单击重新启动所有服务。等待 WAMP 重新启动。

10.  将 ffmpeg.exe 复制到 C:\wamp\bin （注意：如果您已将 WAMP 安装到其他目​​录，请将文件复制到 WAMP 目录中的 /bin 文件夹）。

11.  FFMPEG 的路径现在是：C:\wamp\bin\ffmpeg.exe

    比xxx... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-23T04:02:36.753

我做了与 Manjeet Barnala 相同的操作，但将`ffmpeg.exe`,`ffprobe.exe`和复制`ffplay.exe`到了`Windows/System32`, 然后我的应用程序就可以工作了。

我认为这与您的应用程序可能指向 @ 使用`exec`命令的位置有关。

运行：**PHP 7.4.0**

`gd2`通过转到 WAMP 图标并**左键**单击确认PHP 扩展已初始化。

`WAMP > PHP > Extensions`.

..我试图在 PHP 中执行的命令是：

```
$cmd = "$ffmpeg -ss $Second -i $Filename -frames:v 1 -f mjpeg -map 0:v:0 $Thumbnail";
$return = `$cmd`; 
```

# c# - 通过 process.start() 打开特定版本的 Flash

> ID：11154293
> 
> 赞同：1
> 
> 时间：2012-06-22T10:16:50.227
> 
> 标签：c#

我正在使用以下代码打开 Flash：

```
private Process flash = new Process();
flash.StartInfo.FileName = ("Flash.exe");
flash.Start(); 
```

目标机器有很多版本的flash，比如flash cs5、4、3。我想打开最新版本或让用户选择，我怎么可能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:57:17.620

通常来说，所有其他 Flash 安装将位于不同的程序文件夹中，因此您只需要确保从正确的文件夹中运行 Flash.exe。例如，我当前的安装位于：`C:\Program Files (x86)\Adobe\Adobe Flash CS5\Flash.exe`，但替代安装很可能位于 C:\Program Files (x86)\Adobe\Adobe Flash CS4\Flash.exe`。

需要注意的重要一点是，**您不能假设用户在其默认目录中安装了 flash CS***！您应该始终查询 Windows 注册表以查找已安装产品的列表。

此外，另一个注意事项是您不需要围绕字符串文字的括号。所以你可以写：

```
string foo = "Hello!"; 
```

代替

```
string foo = ("Hello!"); 
```

## 编辑1：

嘿，我在[这里的论坛帖子](http://www.vbforums.com/showthread.php?t=598355)中发现了类似的问题！我下载了代码示例并通过 vb.net -> C# 转换器（[就像这个](http://www.developerfusion.com/tools/convert/vb-to-csharp/)）运行它，并在一些小的语法调整后让它工作。现在它能够输出已安装程序的列表及其适当的版本号。

会有很多方法可以从某些用户那里获取程序。然后将所有这些都放在一个通用列表中，返回给用户。现在，这看起来很完美，但只有一个缺陷 - 没有可用的路径......到目前为止！

您可以只查询 UninstallString，并获取卸载程序的路径（与 Flash.exe 位于同一文件夹中的 IIRC）。例如，在 GetUninstallKeyPrograms 中，在

```
try
{
    IsSystemComponent = Convert.ToInt32(CurrentSubKey.GetValue("SystemComponent", 0));
} 
```

片段，您可以尝试获取 UninstallString 值以获取路径。希望能帮助到你！

# php - PHP升级后无法加载Sphinx.so动态库

> ID：11154297
> 
> 赞同：1
> 
> 时间：2012-06-22T10:17:30.923
> 
> 标签：php, sphinx, pecl

我在我的 debian 服务器上将 PHP 升级到 5.4.4.1。我有一些来自 PECL 的模块，现在其中一个显示：

```
#php --ini
PHP Startup: Unable to load dynamic library '/usr/lib/php5/20100525/sphinx.so' - /usr/lib/php5/20100525/sphinx.so: undefined symbol: sphinx_open in Unknown on line 0 
```

重新安装表格 PECL 不能解决问题，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:11:08.240

坦率地说，只需卸载扩展程序。它不值得打扰。

只需在您的脚本中包含 sphinxapi.php 即可。

纯 PHP 版本实际上比扩展执行得更好，并且与服务器同步 - 因此可以执行所有最新功能，并正确联系最新版本的 sphinx。

# javascript - 使用 jQuery 获取最后一个可见元素

> ID：11154300
> 
> 赞同：11
> 
> 时间：2012-06-22T10:17:35.650
> 
> 标签：javascript, jquery, html

```
<table>
    <tr class="here" id="t1" number="1" ><td>1</td></tr>
    <tr class="here" id="t2" number="2" ><td>2</td></tr>
    <tr class="here" id="t3" number="3" style="display:none"><td>3</td></tr>
    <tr class="here" id="t4" number="4" style="display:none"><td>4</td></tr>
</table>

<span id="check">check</span>

$('#check').click(function(){        
    check = ???;
   alert(check);
}) 
```

**演示：http:** [//jsfiddle.net/vUukc/1/](http://jsfiddle.net/vUukc/1/)

在此示例中，如何`number`从上次可见的属性中获取属性？`tr`这是一个例子——所有的`<tr>`都是可见的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-22T10:19:24.477

有不同的 [jQuery 选择器](http://api.jquery.com/category/selectors/)用于这些目的。

**例如：**

```
$('table tr:visible:last').attr('number'); 
```

或者

```
$('table tr:visible').last().attr('number'); 
```

等等。

**完整代码**

```
$('#check').click(function() {
    check = $('table tr:visible:last').attr('number');
    alert(check);
}); 
```

**[演示](http://jsfiddle.net/vUukc/4/)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T10:21:01.280

```
$("table tr:visible:last").attr("number"); 
```

有关和选择器的更多信息，请参阅[有关选择器的 jQuery 文档](http://api.jquery.com/category/selectors/)。`:visible``:last`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T10:21:15.687

试试这个

**[现场演示](http://jsfiddle.net/rajaadil/vUukc/11/)**

```
 $('#check').click(function(){

    alert($('table').find('tr:visible:last').attr("number"));

   })​; 
```

​</p>

# java - 春季社交如何获得联系

> ID：11154302
> 
> 赞同：-1
> 
> 时间：2012-06-22T10:17:48.793
> 
> 标签：java, facebook, spring-social

几天前，我使用 spring 的教程编写了 facebook 集成。这是我的代码

```
FacebookConnectionFactory connectionFactory = new FacebookConnectionFactory("appId", "appSecret");
    OAuth2Operations oauthOperations = connectionFactory.getOAuthOperations();
    OAuth2Parameters params = new OAuth2Parameters("http://localhost:8080/shop/facebook");
    String authorizeUrl = oauthOperations.buildAuthorizeUrl(GrantType.IMPLICIT_GRANT, params);

    try {
        response.sendRedirect(authorizeUrl);
        LOG.error("ALL WORKING FINE>>>");
    } catch (IOException e) {
        LOG.error("Errorrrrr" + e);
    }
    return null; 
```

然后我应该获取access_token，但它在URL的哈希部分出现（所以我应该使用JS获取access_token） - 错误的方式。之后我安装了另一个教程 Spring-Social-quickstart，我无法理解它是如何检索 access_token 的？我应该写什么来获取服务器端的 access_token 。它应该是请求的一些拦截器，还是存在其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:36:06.243

问题是我期望 access_token - 但这是客户端授权。所以我应该期望授权代码进行服务器端身份验证。

但现在我在 accessGrant 行上发现异常的问题。它是另一个控制器。我得到 authCode 但它显示异常 400：Badrequest。

```
@RequestMapping(method = RequestMethod.GET) 
public String getAuthorisation(NativeWebRequest webRequest, HttpServletResponse response, HttpServletRequest request) {
    FacebookConnectionFactory connectionFactory = 
            new FacebookConnectionFactory("clientId", "clientSecret");
    OAuth2Operations oauthOperations = connectionFactory.getOAuthOperations();

String authCode = request.getParameter("code");     
    LOG.error("Facebook  controller works... 1");
    LOG.error(authCode);

    AccessGrant accessGrant = oauthOperations.exchangeForAccess(authCode, "http://localhost:8080/shop/pages/social.jsp", null);
    LOG.error("Facebook  controller works... 2");
    Connection<Facebook> connection = connectionFactory.createConnection(accessGrant);
    LOG.error("Facebook  controller works... 3");
    return null;

} 
```

# html - XSLT 适用于 Opera、Safari 和 Chrome，但不适用于 Firefox 13 和 Internet Explorer 9

> ID：11154306
> 
> 赞同：0
> 
> 时间：2012-06-22T10:17:54.597
> 
> 标签：html, firefox, xslt, google-chrome, internet-explorer-9

我在使用 Internet Explorer 9 和 Firefox 13 时遇到了一些问题。我正在使用 HTML、XSL 和 XML 构建 Web 界面，它可以在 Chrome、Opera 和 Safari 上正常运行，无需任何更改，但它不适用于 Firefox 13 和Internet Explorer 9。在 Firefox 中，有些页面（不是全部）无法加载 XML 值，在 Internet Explorer 中，我无法为使用 XSLT 的 html 页面加载 css，但我可以正确加载所有参数。

上面你可以找到一个不起作用的页面示例（HTML、XML、XSL）

HTML

```
<html>
<head>
<script>
function loadXMLDoc(dname)
{
if (window.XMLHttpRequest)
  {
  xhttp=new XMLHttpRequest();
  }
else
  {
  xhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xhttp.open("GET",dname+"?id="+Math.random(),false);
xhttp.send("");
return xhttp.responseXML;
}

function displayResult()
{
xml=loadXMLDoc("sensorParameters.xml");
xsl=loadXMLDoc("sensorParameters.xsl");
// code for IE
if (window.ActiveXObject)
  {
  ex=xml.transformNode(xsl);
  document.getElementById("example").innerHTML=ex;
  }
// code for Mozilla, Firefox, Opera, etc.
else if (document.implementation && document.implementation.createDocument)
  {
  xsltProcessor=new XSLTProcessor();
  xsltProcessor.importStylesheet(xsl);
  resultDocument = xsltProcessor.transformToFragment(xml,document);
  document.getElementById("example").appendChild(resultDocument);
  }
}
</script>
</head>
<body onload="displayResult()">
<div id="example" />
</body>
<head>
<meta http-equiv="cache-control" content="no-cache">
</head>
</html> 
```

XSL

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:template match="/">
<html>
    <head>
          <title>Interface</title>
          <link rel="stylesheet" type="text/css" href="style.css" />
    </head>
    <body>
    ...
    (It continues, but it is not important...)
    </body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

XML

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="sensorParameters.xsl"?>
<section1>
<section2>
          ......... some data
</section2>
<section3>
          ......... some data
</section3>
          .........
</section1> 
```

任何帮助将不胜感激。

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:49:29.480

至于 IE 问题，我认为问题的一个可能原因是您使用 XSLT 创建带有`html`根元素的完整 HTML 文档的方法，`head`部分包含`link`样式表，然后尝试将 XSLT 结果包含到`div`元素中（其中然后 IE 可能会忽略`link`)。要解决这个问题，您需要更改方法并确保将`link`XSLT 创建的元素添加到`head`您插入 XSLT 转换结果的 HTML 文档中。

# c# - 在 C# 中拆分字符串？

> ID：11154308
> 
> 赞同：0
> 
> 时间：2012-06-22T10:17:56.710
> 
> 标签：c#, .net, string, visual-studio-2010, visual-studio

我正在尝试像这样在 C# 中拆分字符串

```
COMMSTR1-NAC-NAM-P-C FCPANAM1-NAC-NAM-P-C CHAZEL1-NAT-CBM-P-C 
```

应该

```
word1     word2       word3      word4     word5   word5
COMMSTR1 NAC-NAM-P-C FCPANAM1 NAC-NAM-P-C  CHAZEL1 NAT-CBM-P-C 
```

在上面它包含三个单词，有时它可能包含两个单词或一个单词。我怎样才能得到高于输出。我在下面尝试但卡住了。

```
class Program
        {
            static void Main(string[] args)
            {
                string str = "COMMSTR1-NAC-NAM-P-C FCPANAM1-NAC-NAM-P-C CHAZEL1-NAT-CBM-P-C";

                string[] words = str.Split(' ');

                 foreach(string word in words)
                    {
                        Console.WriteLine("{0}",word);
                    }

                    Console.ReadLine();

            } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T10:22:17.433

您可以尝试以下方法，首先将其拆分在空间上，然后用于`IndexOf`从单词中获取休息。：

```
 string str = "COMMSTR1-NAC-NAM-P-C FCPANAM1-NAC-NAM-P-C CHAZEL1-NAT-CBM-P-C";
 string[] words = str.Split(' ');
 List<string> list = new List<string>();
 foreach (string word in words)
   {
            int index = word.IndexOf('-'); // as per Daniel's suggestion
            list.Add(word.Substring(0,index));
            list.Add(word.Substring(index+1));
    } 
```

//用于打印

```
 foreach (string tempStr in list)
    {
        Console.WriteLine(tempStr);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:27:57.737

```
 static void Main(string[] args)
    {
        string str = "COMMSTR1-NAC-NAM-P-C FCPANAM1-NAC-NAM-P-C CHAZEL1-NAT-CBM-P-C";

        string[] flag = str.Split(' ');
        List<string> words = new List<string>();
        foreach (string f in flag)
        {
            words.Add(f.Split('-')[0]);
            words.Add(f.Remove(0, f.IndexOf('-') + 1));
        }

        foreach (string word in words)
        {
            Console.WriteLine("{0}", word);
        }

        Console.ReadLine(); 
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:31:18.220

带有命名组的正则表达式在这里似乎很合适：

```
var pattern=
    @"^(?<word1>[^-]*)-(?<word2>[^ ]*) "
    +@"(?<word3>[^-]*)-(?<word4>[^ ]*) "
    +@"(?<word5>[^-]*)-(?<word6>.*)$";
var input="COMMSTR1-NAC-NAM-P-C FCPANAM1-NAC-NAM-P-C CHAZEL1-NAT-CBM-P-C";
var m=Regex.Match(input,pattern);
if(m.Success)
{
    var word1=m.Groups["word1"].Value;
    var word2=m.Groups["word2"].Value;
    //etc...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:32:03.433

你也可以使用

```
Split(new char[] { '-' }, 2); 
```

仅在第一次出现 - 时拆分。所以首先是你`Split(' ')`，然后是`Split(new char[] { '-' }, 2);`

@Habib.OSU 答案的修改版本将如下所示：

```
string str = "COMMSTR1-NAC-NAM-P-C FCPANAM1-NAC-NAM-P-C CHAZEL1-NAT-CBM-P-C";
string[] words = str.Split(' ');
List<string> list = new List<string>();
foreach (string word in words)
{
        list.AddRange(word.Split(new char[] { '-' }, 2));
}
foreach(var s in list) Console.WriteLine(s); 
```

# android - 在 Java 代码中动态地将样式应用于视图

> ID：11154310
> 
> 赞同：6
> 
> 时间：2012-06-22T10:18:02.913
> 
> 标签：android, styles, custom-component

我有以下自定义按钮视图。

```
public class PrayerTimeLabel extends Button {

int hours;
int minutes;
String dayHalf; //am or pm
Context parentActivity;
PrayerControl parentControl;

public PrayerTimeLabel(Context context,PrayerControl parent) {
    super(context);                 
    init(context,parent,0);
}

public PrayerTimeLabel(Context context, int defStyle, PrayerControl parent) {
    //super(context, null, R.style.Button_PrayerTimeButton);
    super(context, null, defStyle);             
    init(context,parent,defStyle);
}

private void init(final Context context, PrayerControl parent, int defStyle)
{        
    parentActivity = context;
    parentControl = parent;
    Typeface tf = Typeface.createFromAsset(context.getAssets(),"fonts/digital.ttf");
    this.setTypeface(tf);       
    this.setText(false);

    this.setOnClickListener(new OnClickListener() {         
        public void onClick(View v) {
            TimeDialog dialogBox = parentControl.getDialogBox();
            dialogBox.setTime(hours, minutes, dayHalf);
            dialogBox.show();
        }
    });
}

public void setTime(int hrs, int min, String half,boolean signalParent)
{
    hours = hrs;
    minutes = min;
    dayHalf = half;
    this.setText(signalParent);
}

public void setText(boolean signalParent)
{
    super.setText(String.format("%02d", hours)+":"+String.format("%02d", minutes)+" "+dayHalf);
    if(signalParent){
        parentControl.setPrayerTime(hours, minutes, dayHalf);
    }
}

} 
```

我在 style.xml 中定义了以下样式

```
 <style name="Button.PrayerTimeButton" parent="@android:style/TextAppearance.Widget.Button">
    <item name="android:background">#000</item>
    <item name="android:textSize">18dp</item>
    <item name="android:textColor">#FFFF00</item>
</style> 
```

扩展按钮没有获得这种风格。有人可以指出我们做错了什么吗？我搜索了解决方案并找到[了这个](http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=12683)。有人可以提出一些建议吗

注意：我不能使用 XML 来应用样式。它必须是构造函数。

编辑：

以下是创建和使用此自定义按钮的类。我删除了许多不相关的代码行

```
public class PrayerControl extends LinearLayout {

protected PrayerTimeLabel prayerTimeButton;

protected String prayerName;
protected static int counter=0;

public PrayerControl(Context context) {
    super(context);
    init(context);
}

public PrayerControl(Context context, AttributeSet attrs) {
    super(context, attrs);
    getXMLAttributes(context, attrs);
    init(context);
}

    protected void getXMLAttributes(Context context, AttributeSet attrs)
{
    TypedArray a = context.obtainStyledAttributes(attrs,R.styleable.PrayerControl);

    prayerName = a.getString(R.styleable.PrayerControl_name);
    dayHalf = a.getString(R.styleable.PrayerControl_dayHalf);
    hours = a.getInteger(R.styleable.PrayerControl_hours, 4);
    minutes = a.getInteger(R.styleable.PrayerControl_minutes, 30);

    ltrProgress = a.getInteger(R.styleable.PrayerControl_postNamazInterval, 0);
    rtlProgress = a.getInteger(R.styleable.PrayerControl_preNamazInterval, 0);
    intervalMax = a.getInteger(R.styleable.PrayerControl_intervalMax, 30);

    a.recycle();

}

protected void init(Context context)
{
    counter++;
    parentActivity = context;
    this.setOrientation(LinearLayout.HORIZONTAL);
    this.setId(counter);    

    prayerTimeButtonStyle = R.style.Button_PrayerTimeButton;
    initializePrayerTimeButton();

}

protected void initializePrayerTimeButton()
{
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            40);        
    params.gravity = Gravity.CENTER;
    //params.weight  = 1.0f;

    prayerTimeButton = new PrayerTimeLabel(parentActivity,prayerTimeButtonStyle,this);
    prayerTimeButton.setTime(hours, minutes, dayHalf,false);

    prayerTimeButton.setLayoutParams(params);
    this.addView(prayerTimeButton);
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:51:50.880

这是一个旧答案：几分钟前我得到了-1，这是

***新解决方案***：

基本思想是将属性传递给构造函数。检查此链接以获得完整的解决方案：[Applying style to views dynamic in java code](http://www.sherif.mobi/2012/12/applying-style-to-views-dynamically-in.html)

***旧解决方案（不工作）***：

将这些构造函数添加到您的类中：

```
public StyledButton(Context context) {
    super(context, null, R.style.Button_PrayerTimeButton);
//... whatever
}

public StyledButton(Context context, AttributeSet attrs) {
    super(context, attrs, R.style.Button_PrayerTimeButton);
//... whatever
}

public StyledButton(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, R.style.Button_PrayerTimeButton);
//... whatever
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:43:28.927

为什么不使用`setTextAppearance(Context context, int resid);`. 它允许您设置文本颜色、大小、样式、提示颜色和突出显示颜色。

在`PrayerTimeLabel`课堂上，

```
private void init(final Context context, PrayerControl parent, int defStyle)
{        
    setTextAppearance(context, R.style.Button_PrayerTimeButton);
    ...
} 
```

有关更多信息，请参阅这篇文章：[通过代码引用自定义属性设置文本外观](https://stackoverflow.com/questions/8757764/settextappearance-through-code-referencing-custom-attribute)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-13T17:46:54.657

这是该主题的旧答案（并且更简单）： [https ://stackoverflow.com/a/21455192/4360308](https://stackoverflow.com/a/21455192/4360308)

总结：

ContextThemeWrapper newContext = new ContextThemeWrapper(baseContext, R.style.MyStyle); 按钮 = 新按钮（newContext）；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:25:05.243

您应该在构造函数中调用`super(context,attrs,defStyle)`构造函数，这将应用于`defStyle`您的`View`.

但是你不能改变`style`动态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T18:06:46.743

您链接到的错误报告指出：

> 此外，在运行时动态创建元素时，这意味着您不能简单地在代码中应用样式。您需要为正在构建的视图创建一个单独的 XML 布局，然后将其膨胀 [...]

考虑到这一点，解决方案可能如下所示：

为您的按钮创建一个 xml 布局 - 我们将其命名为 praytimebutton.xml：

```
<Button android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#FFFF00"
        //...etc
/> 
```

然后，在`initializePrayerTimeButton`您的类中的方法中`PrayerControl`，膨胀并将`PrayerTimeLabel`按钮添加到`PrayerControl`布局中：

```
//Retrieve a LayoutInflater instance that is hooked up to the current context
LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
//The LayoutInflater instantiates the layout file into a PrayerTimeLabel object
PrayerTimeLabel button = (PrayerTimeLabel)inflater.inflate(R.layout.prayertimebutton, this, false);
//add the PrayerTimeLabel to the PrayerControl
this.addView(button); 
```

请注意，第二个参数`LayoutInflater.inflate()`是对父 View(Group) 的引用。

Google 的 Android 框架工程师 adamp 的以下回答更详细地讨论了这种方法。

[为什么在 Android 中从代码中设置样式如此复杂](https://stackoverflow.com/questions/8369504/why-so-complex-to-set-style-from-code-in-android)

# c# - 我有关于 jquery 调用 ascx 用户控制方法的问题

> ID：11154311
> 
> 赞同：0
> 
> 时间：2012-06-22T10:18:04.173
> 
> 标签：c#, jquery, asp.net, ascx

我有用户控件，它包含在我的大部分 aspx 页面中。此用户控件显示来自数据库的大量数据。现在我决定通过 jquery 来获取它。我非常熟悉 jquery 以及如何通过 jquery 调用服务器端方法。我的问题是我无法在 jquery ajax post 方法中指定 ascx 文件。喜欢

```
function loadMore() {
    $.ajax({
        type: "POST",
        url: "Left.ascx/LoadData",
        data: "{PageIndex:1}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
        },

        error: function (request, status, error) {
            alert(request.responseText);
        }
    });
} 
```

我不能通过 jquery 调用 ascx 代码后面的方法，因为 ASCX 不是直接通过 URL 提供的。我什至无法编写用于从 aspx 服务器端方法动态加载和填充 ascx 的 C# 代码，因为它已在许多 aspx 中使用。所以现在我遇到了问题。没有简单的好主意出现在我的脑海中......所以我被困住了。请告诉我实现它的方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:11:11.370

在我看来，您想从您的回复中获取 HTML？可能这样您就可以只设置 div 的内容，而不必在客户端上构建 html。如果是这种情况，则创建一个包含您的 ascx 的新 aspx 页面，并在 aspx 的页面加载中具有 ascx 数据绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:29:34.107

您不能直接调用 ascx 方法。您需要做的是调用一个 aspx 页面方法并从中调用用户控制方法。这听起来很熟悉，所以我检查了。我在这里有一个类似问题的答案：

[C# UserControl 上的 Jquery .ajax 异步回发](https://stackoverflow.com/questions/2539620/jquery-ajax-async-postback-on-c-sharp-usercontrol/2539913#2539913)

这显示了可以做到这一点的方式。

# javascript - 用jquery滑动div

> ID：11154313
> 
> 赞同：0
> 
> 时间：2012-06-22T10:18:10.150
> 
> 标签：javascript, jquery

嘿伙计们！我必须使用 jquery 制作一个滑动 div（左右）。这是我此刻所拥有的链接：[http](http://www.k-prim.biz/test/test.html) ://www.k-prim.biz/test/test.html 这工作正常，但我不知道如何在单击箭头图像时使 div 向左滑动在它已经向右移动之后。有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:35:20.727

只需尝试此代码而不是您的脚本端。

```
 $(function(){
       var i = 0;
       $("#clicky").click(function(){
       if(i==0){
           i =1;
           $("#slide").animate({marginLeft:'500px'},'slow', function(){
                 $("img#clicky").attr("src", "right.jpg");
            });
       }else{
          i=0;
          $("#slide").animate({marginLeft:'0px'},'slow', function(){
             $("img#clicky").attr("src", "left.jpg");
          });
        }
   }); 
```

});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:39:41.517

替代方案可能是使用 css 转换的 css 方法。[见 jsfiddle](http://jsfiddle.net/KooiInc/5Ld7d/)。

在这种情况下，点击句柄很简单（**编辑**点击处理程序 on `div#slide`，因为箭头图像现在是它的背景，jsfiddle 会相应地调整）：

```
$("#slide").click(function(){
    var el= $(this)
       ,isRight = /right/i.test(el.attr('class'))
       ,addremove = isRight ? 'removeClass' : 'addClass';
    el[addremove]('right');
 });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:23:23.790

```
<script>
var pos=0;
$(function(){
    $("#clicky").click(function(){
                if(pos==0)
                {
                    $("#slide").animate({marginLeft:'500px'},'slow', function(){
                              $("img#clicky").attr("src", "right.jpg");
                    }); 
                    pos = 1;
                }
                else
                {
                    $("#slide").animate({marginLeft:'0px'},'slow', function(){
                              $("img#clicky").attr("src", "left.jpg");
                    });  
                    pos = 0;
                }
    });            
});
</script> 
```

这可以帮助您思考算法。

**注意：**未经测试的代码，已编辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T08:28:05.947

jquery 的使用非常简单，如下所示

```
 <script src="jquery.min.js"></script>
 <script src="jquery-ui.min.js"></script>
<script>
$(document).ready(function(){
  $("#flip").click(function () {
          $("#left_panel").toggle("slide", { direction: "left" }, 1000);
    });
});
</script> 
```

# c - 使用 popen 时出现意外的 sh 语法错误

> ID：11154314
> 
> 赞同：1
> 
> 时间：2012-06-22T10:18:19.803
> 
> 标签：c, linux, openssl, popen, printf

我已经编写了如下所示的 C 代码，用于解密加密字符串，`popen`用于此目的。

```
snprintf(cmdcheck,1000,"echo %s %c openssl aes-256-cbc -d -a -salt -pass pass:excel2012", idcheck,'|');
FILE *cmdid = popen(cmdcheck,"r"); 
```

该代码符合良好，但在运行时会出现以下错误：

```
sh: Syntax error: "|" unexpected 
```

可以做些什么来解决这个问题？提前致谢。我的操作平台是Linux。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:34:25.453

线索是错误来自 sh - "|" 是 sh 中的保留字符，因此您需要对其进行转义：'\|' 应该这样做。

# java - 如何从 GWT 访问 SQL 数据库？

> ID：11154319
> 
> 赞同：2
> 
> 时间：2012-06-22T10:18:40.710
> 
> 标签：java, sql, gwt, client-server, jetty

我在互联网上阅读了一些文章，这是不可能的。从 GWT 应用程序与位于其他服务器上的自己的 SQL 数据库通信。码头不允许。

我找到了一种方法来执行它，但它不是很舒服。我在 GWT 中有客户端和服务器部分。服务器必须与本地主机上的 MySQL 数据库通信。所以我编写了一个 ant 脚本来构建一个可以在 Apache Tomcat 服务器上启动的战争。它在那里完美运行，但我无法有效地调试代码。

您对如何执行此任务有一些建议吗？我正在考虑仅在 GWT 中编写客户端，并找到一些关于如何与 GWT 之外编写的我自己的服务器进行通信的方法。我为 GWT 找到了 Apache Thrift，但这个编辑过的 thrift 库似乎无法正常工作。

非常感谢您的回答：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:28:04.720

可以从 GWT 应用程序与数据库进行通信。客户端必须通过 GWT-RPC 调用服务器的方法，它可以与任何数据库进行通信。

也许 Jetty 不支持它（没有亲自测试过），但您也可以使用 Apache 开发您的 Web 应用程序。在那里，您可以像从任何 Web 应用程序一样访问数据库：

您将需要该`mysql-connector-java-5.1.20-bin.jar`文件（可从：[http](http://dev.mysql.com/downloads/connector/j/) ://dev.mysql.com/downloads/connector/j/ 下载），然后重新启动添加到`$CATALINA_HOME/common/lib`目录的服务器。

或添加到`WEB-INF/lib`您的 Web 应用程序的文件夹中。

您可以在线找到有关如何使用 Tomcat 而不是 Jetty 开发应用程序的教程。例如：[https ://wiki.auckland.ac.nz/display/BeSTGRID/Deploying+GWT+to+Tomcat+in+Eclipse](https://wiki.auckland.ac.nz/display/BeSTGRID/Deploying+GWT+to+Tomcat+in+Eclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:32:59.623

Reshi，停下来想想应用程序是如何工作的。没有人提供带有 javascript 的网页来读/写数据库，那将是疯狂和不安全的。在这种情况下，服务器始终处于所有通信的中间。您需要创建在服务器内部运行的服务，其中一项服务将是数据库层。

Javascript 无法创建网络连接和读/写二进制数据，因此尝试让 gwt 编译器编译任何 jdbc drvier 等等都是疯狂的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T03:46:36.493

Jetty 不会阻止我们连接到数据库。您所要做的就是遵循 MVP 模型的方式。尽管 MVP 更好地应对所有障碍，但至少，您必须尝试在客户端包中不包含 SQL 代码。

# java - 如何使用 Gson 库在 Java 中解析（反序列化）Json 字符串

> ID：11154323
> 
> 赞同：-1
> 
> 时间：2012-06-22T10:18:48.440
> 
> 标签：java, json, gson

我需要使用 Gson 库在 Java 中解析以下 JSON。任何人都可以帮助我，因为我是 JSON 新手？

```
alarmEvent = {
  "version" : "1.0" 
  "type" : "ALARM", 
  "nodeId" : "",
  "timeStamp" : "", 
  "params" : {
    "paramId" : "",
    "alarmType" :  "", 
    "category" : "", 
    "source" : "", 
    "parameter": "", 
    "alarm" : "", 
    "alias" : "", 
    "duration" : "" 
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:30:03.477

您可以创建一个`AlarmEvent`类，其中包含您希望在 JSON 对象中看到的每个字段的成员。例如：

```
class AlarmEvent {
    private String version;
    private String type;
    ....
} 
```

然后，您可以按如下方式实例化此类型的对象：

```
AlarmEvent a = new Gson().fromJson(json, AlarmEvent.class); 
```

您现在可以直接以`a.version`、`a.type`等方式访问这些字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:20:39.867

```
JsonObject jobj = new Gson().fromJson(json, JsonObject.class); 
```

# android - ACR122U-A2NR（nfc 读卡器）与三星 S2（Android 2.3.4）之间的通信问题？

> ID：11154334
> 
> 赞同：1
> 
> 时间：2012-06-22T10:19:25.957
> 
> 标签：android, nfc, nfc-p2p

我正在尝试通过 ACR122U-A2NR 从 Windows 应用程序向 Android 手机发送以下 NDEF 消息。

**43200001000000010100000027D101235402656E53746172742C4775696C6C61756D6520424552544541552C313233342C456E64**

在 Windows 端，我使用以下命令序列发送 NDEF 消息。（为此，我使用 winscard.dll）。

1.  “FF0000002DD48C0100000000004001FE0FBBBAA6C9890000000000000000FFFF01FE0FBBBAA 6C98900000646666D01011000”
2.  “FF00000002D486”
3.  “FF00000015D48E0520060F636F6D2E616E64726F69642E6E7070”
4.  “FF00000036D48E43200001000000010100000027D101235402656E53746172742C4775696C6C6 1756D6520424552544541552C313233342C456E64”

Nexus S android 2.3.4 上的应用程序运行良好。虽然同样不适用于三星 SII android 2.3.4。

如果 Nexus S 命令 #4 返回“D58F00”（成功）如果 SII 上述命令返回“D58F25”。其中“0x25”是以下错误代码：DEP 协议：设备状态无效，系统处于不允许此操作的状态

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:20:07.820

您是使用 ACS SDK 还是替代方案来尝试此操作？你检查过 nfctools 库吗？[http://www.grundid.de/nfc](http://www.grundid.de/nfc)。我认为他们对 P2P 通信有更好的支持，因为它完全实现了 android 协议规范（尽管仍然存在一些错误）。

# matlab - 生成具有季节性和昼夜分量的信号

> ID：11154337
> 
> 赞同：1
> 
> 时间：2012-06-22T10:19:38.027
> 
> 标签：matlab, signal-processing, time-series

这是一个相当模糊的问题，但我们开始吧 - 我想为一年的每小时测量生成一个时间序列，因此对于 2011 年，该系列中的 ti 将有 8760 个值。为了更容易理解我想要做什么，我将使用一个真实世界的例子：

如果我们有一个每小时气温测量的时间序列，然后绘制整个序列，它看起来类似于钟形曲线，即

```
 a = 0; b = 30;
    x = a + (b-a) * rand(1, 8760);
    m = (a + b)/2;
    s = 12; 
    p1 = -.5 * ((x - m)/s) .^ 2;
    p2 = (s * sqrt(2*pi));
    f = exp(p1) ./ p2;
    plot(x,f,'.') 
```

最大值出现在仲夏，最低值出现在冬季。但是，通过放大特定日期，我们会看到温度也在白天和晚上之间波动，最高温度出现在大约 15:00，最低温度出现在大约 06:00。

所以，我的问题是我将如何生成这个系列，即一个时间序列，它在夏季中期的最大值为 30 度，即值 (8760/2)，并且还将上述每日模式纳入整体模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:27:32.440

显而易见的方法是将 2 个正弦波相加，一个用于日变化，一个用于年变化。

我不知道正弦波是否足够接近钟形曲线以满足您的喜好，但我可以提出一个模糊的论点，因为年和昼夜温度的变化（部分）是（大约) 圆周运动无论如何你都应该使用正弦波。

如果您需要帮助生成正弦波，请更新您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:36:25.623

如果我正确理解了这个问题，您希望将两个已知形状的系列叠加，对吗？如果是这样，您只需将它们相加即可。重要的部分是移动每日温度波动信号，使其平均值为 0，前提是“年”曲线表示平均温度。

# .htaccess - htaccess 重定向 domain.com/index.php?page=home 到 domain.com/home

> ID：11154348
> 
> 赞同：0
> 
> 时间：2012-06-22T10:20:51.460
> 
> 标签：.htaccess, mod-rewrite, redirect

htaccess 中进行此更改的简单重定向规则的代码是什么：

`domain.com/index.php?page=home`=>`domain.com/home`

From `page=home`,`home`是一个动态生成的页面 slug。

同样，当 on 时`domain.com/somepage`，输出`echo $_GET['page']`应该是“somepage”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:10:04.380

我希望这能帮到您：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/?$ index.php?page=$1 
```

RewriteConds 确保您没有尝试访问真实页面（如果您这样做，则 url 不会被重写）
RewriteRule 满足每个 url，例如`http://domain.com/somepage`带有或不带有结尾斜杠（但不是`domain.com/somefolder/somepage`）
在此示例中显示的 url到用户不会改变，如果你愿意，你必须`[R=301]`在 RewriteRule 后面添加。

# google-maps - 在国家/地区放置标记

> ID：11154353
> 
> 赞同：0
> 
> 时间：2012-06-22T10:21:09.493
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我有一堆国名。像数百个。我想在我拥有的每个国家/地区添加一个标记。如果我使用`geocoding`它说我达到了允许对我的名字进行地理编码的请求的限制。那么，在不联系服务器获取国家坐标的情况下，是否存在完整的“客户端方式”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:23:10.243

您可以使用所需的国家及其坐标创建一个 kml 文件，然后在地图代码中使用它。

[KML 方法](https://developers.google.com/kml/documentation/kml_tut)

```
var map = new google.maps.Map(document.getElementById("map_canvas"), 0ptions);
var kmzLayer = new google.maps.KmlLayer('http://yoursite/countries.kmz');
kmzLayer.setMap(map); 
```

您可以将标记添加到 kml 文件中，如[本例所示](http://www.kksou.com/php-gtk2/Joomla-Google-Maps-Samples/Use-KML-file-to-place-multiple-markers-on-Google-Maps.php)

另一种选择是将您的国家和地理编码存储在 json 中，然后遍历 json 以添加标记。

[Stackoverflow 问题](https://stackoverflow.com/questions/3475052/jquery-json-php-and-gmap) 看一下[这个例子](http://code.google.com/p/gmaps-samples-v3/source/browse/trunk/country_explorer/country_explorer.html)，它允许你点击一个国家，然后显示国家名称和国旗。

# javascript - 循环内的href javascript jquery

> ID：11154355
> 
> 赞同：2
> 
> 时间：2012-06-22T10:21:13.660
> 
> 标签：javascript, jquery

我想循环浏览我所有的delicious.com书签并在它们周围加上一个链接......

[这是我的测试站点： http](http://dev.thomasveit.com/json.html) ://dev.thomasveit.com/json.html

```
$(document).ready(function(){               
        $.ajax({
            url: "http://feeds.delicious.com/v2/json/tommyholiday",
            dataType: "jsonp",
            success: function(data){
                var bookmarks = $.map(data, function(bookmark){
                    return {
                        title: bookmark.d,
                        link: bookmark.u
                    }
                });                 

                var html = "<ul>",
                    m;

                for (i=0; i<bookmarks.length; i++){
                    m = bookmarks[i];

                    html += "<li><a href="+m.link+">"+m.title+"</a></li>";
                }
                html += "</ul>";

                $("#delicious").html(html);

            }                       
        });
}); 
```

有趣的是，只有第三个链接被链接包裹……其他链接没有。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:27:07.533

`a href`属性需要引号。

```
html += "<li><a href="+m.link+">"+m.title+"</a></li>"; 
```

应该

```
html += "<li><a href='"+m.link+"'>"+m.title+"</a></li>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:32:49.847

您没有在`href`属性中添加引号 "。

例如：

```
<li><a href=http://www.designtnt.com/500-free-photoshop-patterns-your-web-designs/>500+ Must-Have Free Photoshop Patterns for Your Web Designs</a></li> 
```

如果您查看该链接，它`/`的 url 以标签结尾并关闭`<a>`标签。然后文本出现在`a`标签之后，最后一个`</a>`被忽略。

在我看来，创建 html 标签的最佳方式是使用 DOM 来提高性能和 bug。

```
var ul = document.createElement("ul");

// inside the for
var li = document.createElement("li");
var a_tag = document.createElement("a");
a_tag.setAttribute("href", m.link);
a_tag.appendChild(document.createTextNode(m.title));
li.appendChild(a_tag);

// add the li
ul.appendChild(li);

// end for
$("#delicious").html(ul); 
```

# vim - VIM 在按 Enter 时将字符添加到换行符

> ID：11154362
> 
> 赞同：7
> 
> 时间：2012-06-22T10:21:30.080
> 
> 标签：vim

我环顾四周，但没有找到答案。我有一个 CentOS 6.2 服务器运行与我的 CentOS 5.8 服务器相同的 .vimrc，但是当我在我的 6.2 服务器上按回车键时，如果它是某个字符，它会添加上一行的第一个字符（% 或 # 是我见过的）。这就是在 VIM 中发生的事情（第二行是在按下回车之后，但没有输入任何其他内容）：

```
# <enter>
#

% <enter>
% 
```

这是我的.vimrc：

```
set autoindent
set smartindent
set tabstop=4
set shiftwidth=4
set showmatch
set number

imap jj <Esc> " Professor VIM says '87% of users prefer jj over esc', jj abrams disagrees

" Indenting *******************************************************************
set ai " Automatically set the indent of a new line (local to buffer)
set si " smartindent (local to buffer)

" Cursor highlights ***********************************************************
"set cursorline
"set cursorcolumn

" Set an orange cursor in insert mode, and a red cursor otherwise.
" Works at least for xterm and rxvt terminals.
" Does not work for gnome terminal, konsole, xfce4-terminal.
"if &term =~ "xterm\\|rxvt"
"   :silent !echo -ne "\033]12;red\007"
"   let &t_SI = "\033]12;orange\007"
"   let &t_EI = "\033]12;red\007"
"   autocmd VimLeave * :!echo -ne "\033]12;red\007"
"endif

" Searching *******************************************************************
set hlsearch  " highlight search
set incsearch  " Incremental search, search as you type
set ignorecase " Ignore case when searching
set smartcase " Ignore case when searching lowercase

" Colors **********************************************************************
"set t_Co=256 " 256 colors
set background=dark
syntax on " syntax highlighting
"colorscheme darkzen 
```

对它和我的 5.8 服务器上的那个（我没有这个问题）进行了比较，根本没有区别。知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:30:49.193

它看起来像[自动评论插入](http://vim.wikia.com/wiki/Disable_automatic_comment_insertion)。

查看 :help formatoptions 和 :set formatoptions。这些可能是由文件类型设置的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:52:04.330

运行`verbose set formatoptions`。您应该返回一个包含 'r' 的字符串，其中`Automatically inserts the current comment leader after hitting <Enter> in Insert mode`. 该`verbose`位应该将您指向罪魁祸首的文件（可能是文件类型插件）。

我防止 vim 通过`au FileType * set formatoptions=lq`我的 vimrc 中的自动命令劫持我的格式选项。大多数选项让我非常疯狂，尽管`r`而且`o`是迄今为止最糟糕的。

# javascript - 按键时jquery / javascript上的蛇游戏，蛇移动得更快

> ID：11154365
> 
> 赞同：3
> 
> 时间：2012-06-22T10:21:32.067
> 
> 标签：javascript, jquery

我的 JavaScript 代码如下：

```
$(document).keydown(function(event){
    var move, inter;
    clearInterval(inter);
    inter = setInterval(move = function() {
        var dir = $(".snake").data('dir');
        var snake = $('.snake');
        var food = $('.food');
        if(dir == 'top') {
            snake.css({"top": $(".snake").position().top + 5 + "px"});
        }
        if(dir == 'bottom') {
            snake.css({"top": $(".snake").position().top - 5 + "px"});
        }
        if(dir == 'left') {
            snake.css({"left": $(".snake").position().left + 5 + "px"});
        }
        if(dir == 'right') {
            snake.css({"left": $(".snake").position().left - 5 + "px"});
        }
    }, 1500);
    if(event.which == 40) {
        $(".snake").data('dir','top');
    } else if(event.which == 39) {
        $(".snake").data('dir','left');           
    } else if(event.which == 37) {
        $(".snake").data('dir','right');        
    } else if(event.which == 38) {
        $(".snake").data('dir','bottom');    
    }; 

});​ 
```

[http://jsfiddle.net/6bKHc/94/](http://jsfiddle.net/6bKHc/94/)

当我按住其中一个箭头键时，蛇开始移动得更快，我该如何关闭它？你可以自己测试一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:25:48.140

你`setInterval`在你的事件处理程序中被调用。`setinterval`与共享的 dir 变量一起移到外面。那么你将不需要`clearinterval`.

```
var dir = 'bottom';
 setInterval(move = function() {
    var snake = $('.snake');
    var food = $('.food');
    if(dir == 'top') {
        snake.css({"top": $(".snake").position().top + 5 + "px"});
    }
    if(dir == 'bottom') {
        snake.css({"top": $(".snake").position().top - 5 + "px"});
    }
    if(dir == 'left') {
        snake.css({"left": $(".snake").position().left + 5 + "px"});
    }
    if(dir == 'right') {
        snake.css({"left": $(".snake").position().left - 5 + "px"});
    }
}, 150); 
$(document).keydown(function(event){
    if(event.which == 40) {
        dir = 'top';
    } else if(event.which == 39) {
        dir = 'left';           
    } else if(event.which == 37) {
        dir = 'right';        
    } else if(event.which == 38) {
        dir = 'bottom';    
    }; 
}); 
```

[​http://jsfiddle.net/zatsq/](http://jsfiddle.net/zatsq/)

# c# - 套接字 - Java 客户端、C# 服务器

> ID：11154367
> 
> 赞同：6
> 
> 时间：2012-06-22T10:21:43.143
> 
> 标签：c#, java, android, sockets, client

我正在制作一个分为两部分的程序。

第 1 部分：在 PC 上运行的 C# server-socket 应用程序，侦听命令并采取相应措施。

第 2 部分：在手机上运行的 Java 客户端套接字应用程序，当按下按钮时，它会向 pc 发送命令。

目前，我可以将命令从客户端发送到服务器，一切都很好。但我的问题是：当我向服务器发送特定命令时，我希望服务器回复客户端，客户端读取该回复。

问题是，当客户端尝试读取时，它会超时。

Java客户端程序：

```
class ClientThread implements Runnable 
{   
    public void run() 
    {
        try 
        {
            Socket socket = new Socket(serverIpAddress, serverPort);
            socket.setSoTimeout(5000);

            while (true) 
            {
                try 
                {
                    PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);
                    Log.d("Nicklas", "Out it goes");
                    out.println(Command);

                    if (Command == "CMD:GetOptions<EOF>")
                    {
                        Log.d("Nicklas", "Getting options");
                        try
                        {
                            Log.d("Nicklas", "Line 1");
                            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                            Log.d("Nicklas", "Line 2");
                            String answer = in.readLine();
                            Log.d("Nicklas", "answer = " + answer );
                        }
                        catch (Exception ee)
                        {
                            Log.d("Nicklasasasas", ee.toString());
                        }
                    }
                    break;

                } 

                catch (Exception e) 
                {
                    Log.d("Nicklas", "CAE = " + e.toString());
                    break;

                } 
            }
            socket.close();
        } 
        catch (ConnectException ee)
        {
            Log.d("Nicklas", "Kunne ikke forbinde");

        }
        catch (Exception e) 
        {
            Log.d("Nicklasssssss", e.toString());
        }
    }
} 
```

这被称为：

```
Thread cThread = new Thread(new ClientThread());
        cThread.start(); 
```

并使用全局变量“Command”，它将包含不同的信息，具体取决于按下的按钮。

程序在“String answer = in.readline();”行失败 除了“java.net.SocketTimeoutException”。

这是程序的 C# 服务器部分：

```
private void ListenForClients()
    {
        this.tcpListener.Start();

        while (true)
        {
            //blocks until a client has connected to the server
            TcpClient client = this.tcpListener.AcceptTcpClient();

            //create a thread to handle communication
            //with connected client
            Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClientComm));
            clientThread.Start(client);
        }
    }

    private void HandleClientComm(object client)
    {
        TcpClient tcpClient = (TcpClient)client;
        NetworkStream clientStream = tcpClient.GetStream();

        byte[] message = new byte[4096];
        int bytesRead;

        while (true)
        {
            bytesRead = 0;

            try
            {
                //blocks until a client sends a message
                bytesRead = clientStream.Read(message, 0, 4096);
            }
            catch
            {
                //a socket error has occured
                break;
            }

            if (bytesRead == 0)
            {
                //the client has disconnected from the server
                break;
            }

            //message has successfully been received
            ASCIIEncoding encoder = new ASCIIEncoding();
            //System.Diagnostics.Debug.WriteLine(encoder.GetString(message, 0, bytesRead));
            string Input = (encoder.GetString(message, 0, bytesRead));
            Input = Input.Trim();
            object[] obj = new object[1];
            obj[0] = Input;
            if (Input == "CMD:GetOptions<EOF>")
            {
                try
                {
                    byte[] buffer = encoder.GetBytes("CMD:Accepted");
                    clientStream.Write(buffer, 0, buffer.Length);
                    clientStream.Flush();
                    MessageBox.Show("Client program asked for reply");
                }
                catch (Exception e)
                {
                    MessageBox.Show("Oh it no work!: " + e.ToString());
                }
            }
            else
            {
                Udfor(Input);
            }

        }

        tcpClient.Close();
    } 
```

在 Form1() 中使用以下方法调用

```
this.tcpListener = new TcpListener(IPAddress.Any, 4532);
this.listenThread = new Thread(new ThreadStart(ListenForClients));
this.listenThread.Start(); 
```

C# 服务器似乎工作正常，并显示消息框“客户端程序要求回复”

谁能发现错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:01:47.180

我想到了！问题是 C#。当服务器发回命令“CMD:Accepted”时，它从未关闭过套接字，所以 android 应用程序不知道它是否已完成读取！冲洗后立即关闭插座+当然如果我已经关闭它，请不要再次关闭它，成功了！

# java - 线程监听器通知

> ID：11154370
> 
> 赞同：2
> 
> 时间：2012-06-22T10:21:51.367
> 
> 标签：java, multithreading, handle

我遇到了处理线程完成的类的问题。它应该通知其他线程，以便第二个线程可以启动。这是我的项目结构：

**主类.java**

```
public class MainClass implements ThreadCompleteListener {

public void main(String[] args) throws InterruptedException {

    NotifyingThread test = new Thread1();
    test.addListener((ThreadCompleteListener) this); 
    test.start();         

}

@Override
public void notifyOfThreadComplete(Thread thread) {
    // TODO Auto-generated method stub

}   

} 
```

**类 - Thread1.java**

```
public class Thread1 extends NotifyingThread {

@Override
public void doRun() {
    try {
        metoda();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public static synchronized void metoda() throws InterruptedException {
    for(int i = 0; i <= 3; i++) {
        Thread.sleep(500);
        System.out.println("method in Thread1");
    }
}

public void notifyOfThreadComplete(Thread thread) {
    // TODO Auto-generated method stub

}
} 
```

**NotifyingThread.java**

```
import java.util.Set;
import java.util.concurrent.CopyOnWriteArraySet;

public abstract class NotifyingThread extends Thread {
  private final Set<ThreadCompleteListener> listeners = new  CopyOnWriteArraySet<ThreadCompleteListener>();
  public final void addListener(final ThreadCompleteListener listener) {
    listeners.add(listener);
  }

  public final void removeListener(final ThreadCompleteListener listener) {
    listeners.remove(listener);
  }

  private final void notifyListeners() {
    for (ThreadCompleteListener listener : listeners) {
      listener.notifyOfThreadComplete(this);
    }
  }

  @Override
  public final void run() {
    try {
      doRun();
    } finally {
      notifyListeners();
    }
  }

  public abstract void doRun();
} 
```

**ThreadCompleteListener.java**

```
public interface ThreadCompleteListener {
void notifyOfThreadComplete(final Thread thread);
} 
```

我面临的问题是，当我执行 MainClass 时，出现如下错误：发生致命异常。程序将退出并在控制台中出现：

java.lang.NoSuchMethodError：线程“main”中的主要异常

任何人都可以帮助解决这个问题，或者告诉我在代码中做错了什么吗？

非常感谢您的任何建议！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T10:24:22.173

替换**公共无效主要**

与**公共`static`无效主要**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:27:01.060

我认为你应该更换：

```
public void main(String[] args) 
```

为了

```
public static void main(String[] args) 
```

# git - 开发分支与生产分支的 Javascript/CSS 文件位置

> ID：11154371
> 
> 赞同：4
> 
> 时间：2012-06-22T10:21:52.297
> 
> 标签：git, deployment, minify, production-environment, dev-to-production

我已经设置了我的网络服务器，以在大多数情况下遵循[常见的 git / web 工作流](http://joemaller.com/990/a-web-focused-git-workflow/)。

所以我在一个文件夹中有一个开发分支作为子域，在我的根文件夹/域中有一个主分支。

问题在于，在生产环境中，我们合并并缩小主分支 js/css 文件并将它们放在我们的 cdn 上，每次我们更改和缩小文件时，文件名都会更改，因此我们的主分支最终会引用诸如 cdn.example 之类的内容。 com/e23ab9.js，这当然会随着我们代码更新的频率而变化。

但是在我们的开发版本和分支上，我们当然希望只引用未合并和未缩小的文件，以便我们可以不断测试新的修改。

我确信有一种智能/简化的方法可以解决这种情况，因此我们不会在每次使用最新的开发版本更新生产版本时不断地在原始 js/css 文件和新生成的缩小文件名之间来回提交.

我认为解决方案可能涉及符号链接或类似的东西，但我对它们不太熟悉，更愿意学习它并从一开始就做。

任何建议、提示或方向将不胜感激

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-11T20:05:26.323

jstats，我们管理类似的设置，根据您的评论，这是有道理的。

**重申我认为你在这种情况下决定做的事情 -**

1.  您可能会压缩和合并您的文件，创建一个动态和随机的文件名，然后发送到 CDN。
2.  [这里的猜测很长。
3.  渲染时，您检查服务器端代码是否处于生产或开发状态。3a。如果是生产，请获取类似“PID”的文件并指向缩小的 CDN 文件 3b。如果是开发，加载所有常规资源

这需要一个假设的飞跃，但我之前已经看到过这个实现，所以我选择了它:-p

**回答您关于更精简版本的问题：**

是的，简化这一点的一种好方法是通过[Google Pagespeed Module](https://developers.google.com/speed/pagespeed/)

然后，只需在您的虚拟主机配置中为您的生产设置进行设置，以允许 Pagespeed 完成它的工作，并在您的开发设置中关闭 Pagespeed！

最终以这种方式相对简单。

我确定您已经继续前进，但万一其他人发现此问题并正在寻找答案..

# xsd - 如何将 XSD 简单类型转换为 rdfs：使用 Jena 的数据类型

> ID：11154374
> 
> 赞同：3
> 
> 时间：2012-06-22T10:22:01.470
> 
> 标签：xsd, jena, owl, rdfs

假设我有一个具有以下代码行的 XSD 文件；

```
<xsd:simpleType name="test">
    <xsd:restriction base="xsd:string">
        <xsd:maxLength value="50" />
    </xsd:restriction>
</xsd:simpleType> 
```

我要做的是将此xsd简单类型转换为本体中的rdfs：Datatype的实例。下面是我想要的。

```
<rdfs:Datatype rdf:about="http://www.example.org/example1/#testDatatype">
  <rdfs:subClassOf rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
  <owl:equivalentClass>
    <rdfs:Datatype>
      <owl:onDatatype rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
      <owl:withRestrictions rdf:parseType="Collection">
        <rdf:Description>
          <xsd:maxLength rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
          >50</xsd:maxLength>
        </rdf:Description>
      </owl:withRestrictions>
    </rdfs:Datatype>
  </owl:equivalentClass>
</rdfs:Datatype> 
```

我如何使用 Jena 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:53:01.883

原来我可以用下面的代码做到这一点。我用 XSOM 解析 XSD。假设我将“test”simpletype 存储在名为“simple”（XSSimpleType）的变量中。

```
String URI = simple.getTargetNamespace() + "#" + simple.getName() + "Datatype";
OntModel ontology = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM);
OntClass datatype = ontology.createOntResource(OntClass.class, RDFS.Datatype, URI);                 

Resource onDatatype = XSD.xstring;

OntClass equivClass = ontology.createOntResource(OntClass.class, RDFS.Datatype, null);
equivClass.addProperty(OWL2.onDatatype, onDatatype);
datatype.addEquivalentClass(equivClass); 
```

它不是一个完整的代码，它不包括与解析 XSD 相关的代码段，但我希望它能给出想法。

# java - 我可以将 JRadioButton 添加到 JTable 中吗

> ID：11154378
> 
> 赞同：5
> 
> 时间：2012-06-22T10:22:07.850
> 
> 标签：java, swing, jtable, jradiobutton

我尝试使用and添加`JRadioButton`到，但我无法添加到. 我正在使用 NetBeans 和后端 MySQL。请帮我。`JTable``CellEditor``CellRenderer``JRadioButton``JTable`

编辑：谢谢，但我不知道如何分组`JRadioButton`。你能帮助我吗？我有 4 列。第一列单元格包含项目名称，第二列单元格包含数量，第三列和第四列单元格包含 JRadio 按钮。然后我想对每行中包含 JRadio 按钮的第三列和第四列单元格进行分组

编辑：如果我尝试使用这个在 jTable 的自定义代码中添加单选按钮，

`new JRadioButton("a")`，然后它会出现`javax.swing.JRadioButton[,0,0,0x0,invalid,alignmentX=0.0,.....text=a],`在列中而不是按钮中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T22:47:03.260

目前尚不清楚您想如何`JRadioButton`在 a中使用`JTable`；考虑以下替代方案：

*   使用`SINGLE_SELECTION`模式选择单个行。

    ```
    table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION); 
    ```

*   使用类型为 的列`Boolean.class`，该列将使用`JCheckBox`. 此[示例](https://stackoverflow.com/a/4528604/230513)将选择限制为单行。

*   使用 a`JComboBox`作为[编辑器，](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox)*在*一行中进行互斥选择。

*   附录：如果`JRadioButton`需要，可以将它们添加到 a`JPanel`中，如本[例](https://stackoverflow.com/a/11179669/230513)所示，由于 @mKorbel。

*   附录：如果每个`JRadioButton`都有自己的列，则不能使用 a`ButtonGroup`因为单个按钮用于具有相同[renderer](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)的所有单元格。您*可以*从 更新同一行中的其他按钮，这些按钮`TableModel`应该覆盖`setValueAt()`以强制执行通常由 管理的单选规则`ButtonGroup`。[这里](https://stackoverflow.com/a/14022246/230513)有一个例子。

*   附录：@Guillaume Polet 提供的这个[示例说明了一种管理每行一个单选按钮的方法。](https://stackoverflow.com/a/11259671/230513)

# android - java.lang.UnsupportedOperationException：适配器视图不支持 addView(View, LayoutParams)

> ID：11154379
> 
> 赞同：9
> 
> 时间：2012-06-22T10:22:12.627
> 
> 标签：android, exception, expandablelistview, android-adapterview

我正在使用在网上找到的 Expandable ListView 示例

活动：

```
public class ExpandableListViewActivity extends ExpandableListActivity {
    /**
     * strings for group elements
     */
    static final String arrGroupelements[] = { "India", "Australia", "England",
            "South Africa" };

    /**
     * strings for child elements
     */
    static final String arrChildelements[][] = {
            { "Sachin Tendulkar", "Raina", "Dhoni", "Yuvi" },
            { "Ponting", "Adam Gilchrist", "Michael Clarke" },
            { "Andrew Strauss", "kevin Peterson", "Nasser Hussain" },
            { "Graeme Smith", "AB de villiers", "Jacques Kallis" } };

    DisplayMetrics metrics;
    int width;
    ExpandableListView expList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        expList = getExpandableListView();
        metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        width = metrics.widthPixels;
        // this code for adjusting the group indicator into right side of the
        // view
        expList.setIndicatorBounds(width - GetDipsFromPixel(50), width
                - GetDipsFromPixel(10));
        expList.setAdapter(new ExpAdapter(this));

        expList.setOnGroupExpandListener(new OnGroupExpandListener() {
            public void onGroupExpand(int groupPosition) {
                Log.e("onGroupExpand", "OK");
            }
        });

        expList.setOnGroupCollapseListener(new OnGroupCollapseListener() {
            public void onGroupCollapse(int groupPosition) {
                Log.e("onGroupCollapse", "OK");
            }
        });

        expList.setOnChildClickListener(new OnChildClickListener() {
            public boolean onChildClick(ExpandableListView parent, View v,
                    int groupPosition, int childPosition, long id) {
                Log.e("OnChildClickListener", "OK");
                return false;
            }

        });
    }

    public int GetDipsFromPixel(float pixels) {
        // Get the screen's density scale
        final float scale = getResources().getDisplayMetrics().density;
        // Convert the dps to pixels, based on density scale
        return (int) (pixels * scale + 0.5f);
    }
} 
```

适配器：

```
public class ExpAdapter extends BaseExpandableListAdapter {

    private Context myContext;

    public ExpAdapter(Context context) {
        myContext = context;
    }

    public Object getChild(int groupPosition, int childPosition) {
        return null;
    }

    public long getChildId(int groupPosition, int childPosition) {
        return 0;
    }

    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) myContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.child_row, null);
        }

        TextView tvPlayerName = (TextView) convertView
                .findViewById(R.id.tvPlayerName);
        tvPlayerName
                .setText(ExpandableListViewActivity.arrChildelements[groupPosition][childPosition]);

        return convertView;
    }

    public int getChildrenCount(int groupPosition) {
        return ExpandableListViewActivity.arrChildelements[groupPosition].length;
    }

    public Object getGroup(int groupPosition) {
        return null;
    }

    public int getGroupCount() {
        return ExpandableListViewActivity.arrGroupelements.length;
    }

    public long getGroupId(int groupPosition) {
        return 0;
    }

    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) myContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.group_row, null);
        }

        TextView tvGroupName = (TextView) convertView
                .findViewById(R.id.tvGroupName);
        tvGroupName
                .setText(ExpandableListViewActivity.arrGroupelements[groupPosition]);

        return convertView;
    }

    public boolean hasStableIds() {
        return false;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }
} 
```

主.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ExpandableListView
        android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:groupIndicator="@drawable/group_indicator" >

        <TextView
            android:id="@+id/android:empty"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="No Items" >
        </TextView>
    </ExpandableListView>

</LinearLayout> 
```

我尝试了这个解决方案，但没有奏效:(

[Android：扩展 BaseAdapter 的自定义 ListAdapter 在应用程序启动时崩溃](https://stackoverflow.com/questions/2496698/android-custom-listadapter-extending-baseadapter-crashes-on-application-launch)

那里告诉它向 inflater.inflate(R.layout.group_row, null, false) 添加第三个参数“false”；

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-22T10:41:46.057

移动`TextView`外部`ExpandableListView`元素：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ExpandableListView
        android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:groupIndicator="@drawable/group_indicator" >
    </ExpandableListView>
    <TextView
            android:id="@+id/android:empty"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="No Items" >
    </TextView>
</LinearLayout> 
```

`AdapterView`(like )的子类`ExpandableListView`在 xml 布局中不能有子类（就像您在布局中所做的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T17:48:21.977

如果您像我一样发现这个问题而没有使用`ExpandableListView`，请尝试使用将第三个参数添加到`inflate`方法中，正如@Luksprog 提到的那样，这里也提到[了](https://stackoverflow.com/questions/24832497/avoid-passing-null-as-the-view-root-need-to-resolve-layout-parameters-on-the-in)：

```
inflater.inflate(R.layout.group_row, parent, false); 
```

不要使用`true`代替，`false`否则您将得到与将您带到这里的相同错误，因为它试图将其附加/添加到父级，因此出现`addView is not supported in AdapterView`错误。

# c# - 绑定到数据表的 DataGrid 不刷新值

> ID：11154381
> 
> 赞同：1
> 
> 时间：2012-06-22T10:22:16.753
> 
> 标签：c#, wpf, binding, datagrid, datatable

我有一个绑定到 DataTable（“LastDatasets”）的 DataGrid

当我通过此代码在 Timer 中刷新 DataTable 时：

```
if (LastDatasets != null)
{
    var maxRow = LastDatasets.Select("id = MAX(id)").FirstOrDefault();

    var newds = dataInterface.ReadFromDatabase("SELECT * FROM daten WHERE id > " + dataInterface.SqlSep + "id LIMIT 30", new Dictionary<string, object>() {{"id", maxRow["id"]}});

    if (newds != null && newds.Rows.Count > 0)
    {
        LastDatasets.Merge(newds);
    }               
} 
```

我的 DataTable 包含我的新数据，但 WPF 中的 DataGrid 没有刷新！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:56:40.783

我使用简单的绑定，我可以看到 .Merge() 之后的所有更改。所以你应该发布更多代码来看看出了什么问题。

```
 <DataGrid ItemsSource="{Binding MyDataTable}" /> 
```

虚拟机.cs

```
 MyDataTable.Merge(newdata); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:40:17.820

读取新数据后调用

```
DataGrid.Refresh(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T05:56:39.167

如果您正在使用绑定，那么像这样使用

```
ItemsSource="{Binding yourdatasource,IsAsync=True, Mode=TwoWay}" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-22T11:18:54.557

DataTable 没有实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged%28v=vs.100%29.aspx)，因此无法在属性更改时通知您的 DataGrid。如果您要将 DataGrid 绑定到在属性更改时引发 PropertyChanged 事件的对象集合，您会看到您的值更新。我相信您的解决方案是按照 Ask 所说的和`Refresh`DataGrid 的内容进行操作，或者将 DataGrid 绑定到实现 INotifyPropety Changed 而不是 DataTable 的对象集合。

要尝试的另一件事是在 DataGrid 上[启用虚拟化。](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.enablerowvirtualization.aspx)默认情况下，应该启用行虚拟化，但您可以通过设置进行仔细检查`EnableRowVirtualization = True`。此外，设置`EnableColumnVirtualization = true`为好。

# entity-framework - 使用 Ninject 的 ASP MVC 实体框架绑定

> ID：11154386
> 
> 赞同：1
> 
> 时间：2012-06-22T10:22:43.443
> 
> 标签：entity-framework, ninject

我在我的 ASP MVC 3 项目中使用 Ninject，我修改了 global.asax 文件（像往常一样），然后像这样创建了一个类 NinjectControllerFactory：

```
public class NinjectControllerFactory : DefaultControllerFactory  
    {
        private IKernel ninjectKernel;  
        public NinjectControllerFactory()  
        {
            ninjectKernel = new StandardKernel();  
            AddBindings();  
        }    
        protected override IController GetControllerInstance(RequestContext requestContext,
        Type controllerType)  
        {
            return controllerType == null  
            ? null  
            : (IController)ninjectKernel.Get(controllerType);  
        }  
        private void AddBindings()  
        {
            // put additional bindings here
            ninjectKernel.Bind<IServiceName>().To<ConcreteClass>();
        }  
    } 
```

这一切都很好。

现在我想将我的 Entity 框架上下文对象添加到绑定中，这样我就不必为每个服务创建它的新实例。

谁能告诉怎么做？

我应该创建一个只定义实体框架上下文的新接口吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:51:00.077

你可以使用自绑定

```
kernel.Bind<MyDbContext>().ToSelf(); 
```

PS你还应该在nuget上签出[Ninject.MVC3包](http://nuget.org/packages/Ninject.MVC3)

# jsp - 您如何覆盖 Struts 2 消息？

> ID：11154393
> 
> 赞同：4
> 
> 时间：2012-06-22T10:23:12.807
> 
> 标签：jsp, error-handling, struts2, messages

这是我的 struts.xml 的一部分：

```
<constant name="struts.custom.i18n.resources" value="global" /> 
```

和

```
<action name="picture_save" method="pictureSave" class="PictureActionBean">
    <interceptor-ref name="fileUpload">
        <param name="maximumSize">
            2097152
        </param>
        <param name="allowedTypes">
            image/bmp,image/gif,image/jpeg,image/jpg,image/png
        </param>
    </interceptor-ref>
    <interceptor-ref name="defaultStack"></interceptor-ref>
    <result name="success" type="redirect">picture</result>
    <result name="error">error</result>
</action> 
```

我的 global.properties 文件直接存储在 src/ 中，它包含以下内容：

```
struts.messages.error.uploading=Upload failed
struts.messages.error.file.too.large=Upload file is too large
struts.messages.error.content.type.not.allowed=Wrong file type uploaded 
```

这是我在jsp中显示错误的方式：

```
<s:fielderror /> 
```

目前，当我上传一个太大的文件时，例如，我收到错误：

> 请求被拒绝，因为其大小 (6561343) 超过了配置的最大值 (2097152)

我想要做的是让它说“上传的文件太大”而不是上面的消息。有什么简单的方法可以做到这一点？

**编辑1：**

我正在使用 struts 版本 2.1.8.1

**编辑2：**

另一件事是，当我添加：

```
<result name="input" type="redirect">error</result> 
```

到我的 struts.xml 然后根本没有错误显示。这是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T21:29:25.097

呵呵，这个问题你坚持了。看起来很简单。

在此处查看示例：http: [//struts2-by-ash.blogspot.com/2012/06/override-struts-2-messages.html](http://struts2-by-ash.blogspot.com/2012/06/override-struts-2-messages.html)

最好的，j

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T03:53:55.690

源代码[覆盖 Struts 默认属性](http://struts.apache.org/2.1.8.1/docs/strutsproperties.html)

> 该框架使用了许多属性，这些属性可以根据您的需要进行更改。要更改任何这些属性，请在 struts.properties 文件中指定属性键和值。属性文件可以位于类路径上的任何位置，但通常位于 /WEB-INF/classes 下
> 
> 当您重定向错误消息将消失。因为您正在调用新的操作来处理这种情况，struts2 提供了 messageStoreInterceptor。

源[MessageStoreInterceptor](http://struts.apache.org/2.1.8.1/docs/message-store-interceptor.html)

注意：我在这里指的是旧版本的 struts，所以如果您使用的是最新版本，请更改 url 中的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:27:27.750

在 JSP 中使用`<s:actionerror />`标记来打印错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:37:36.313

首先，如果您尝试上传的文件大于您为 struts.multipart.maxSize 指定的文件大小，则会出现此错误

有一个非常简单的解决方案：在您的 struts.xml 中，增加 struts.multipart.maxSize 的文件大小值，

```
 <constant name="struts.multipart.maxSize" value="50777216000" />
  <param name="maximumSize">15728640</param> 
```

保持 param name="maximumSize" 值小于 struts.multipart.maxSize 值，如上述情况，除非超过 struts.multipart.maxSize 限制，否则您将在 global.properties 中定义自定义错误。所以尽量保持 struts。 multipart.maxSize 值到某个较高的范围。

# awk - 如何使用awk在文本文件中的每三行之间给出双倍空格？

> ID：11154395
> 
> 赞同：0
> 
> 时间：2012-06-22T10:23:18.217
> 
> 标签：awk

如何使用 awk 在文本文件中的每三行之间给出双倍空格？

## 样本输入：

```
line1
line2
line3     
line4
line5
line6
line7
----
---- 
```

## 样本输出：

```
line1
line2
line3

line4
line5
line6

line7
----
---- 
```

任何建议，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:41:23.357

尝试这个：

```
awk 'NR % 3 == 0 { print $0 ; print "" } NR % 3' INPUTFILE 
```

还有其他方法...

# html - 如何创建具有 100% 宽度但具有动态列布局的表格？

> ID：11154399
> 
> 赞同：0
> 
> 时间：2012-06-22T10:23:31.067
> 
> 标签：html, css, html-table

我想创建一个完全包含在其父元素中的表，但具有根据其内容解析的列宽。如果表格所需的长度比父元素的内容框长，那么表格下方会出现一个水平滚动条。我尝试摆弄`table-layout`and`overflow`属性，但没有成功。

HTML 代码：

```
<div>
<table>
    <tr>
        <td>fixed_length_text</td>
        <td>variable_length_text</td>
        <td>image</td>
        <td>double_float_double_float</td>
    </tr>
    <tr>
        <td>fixed_length_text</td>
        <td>variable_length_text_variable_length_text</td>
        <td>image</td>
        <td>double_float_double_float</td>
    </tr>
</table>
</div> 
```

CSS 代码：

```
div {
    padding: 10px;
    background: grey;
    width: 400px;
}

table {
    border-collapse: separate;
    border-spacing: 2px;
    background: white;
}

tr {
    background: green;
} 
```

[这](http://jsfiddle.net/nfg34/)是我在 jsFiddle 上尝试过的。有没有办法结合两全其美？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:28:01.523

试试`overflow-x:auto;`。这仅适用于元素的水平轴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:28:51.557

如果我理解你的话：

[http://jsfiddle.net/nfg34/1/](http://jsfiddle.net/nfg34/1/)

# java - XML 迭代问题 (Android/Java)

> ID：11154400
> 
> 赞同：0
> 
> 时间：2012-06-22T10:23:31.503
> 
> 标签：java, android, xml-parsing

为了设置场景，我目前正在开发一个适用于 Android 的 XML 适配器，它将读取我收到的 XML 文件并将它们解析到数据库中。我以为我已经解决了这个问题，直到他们突然发现 XML 文件中的节点可能会因文件而异，所以我需要建立一种机制来处理丢失的变量。

最明显的解决方案是一个`switch()`语句，但这不适用于字符串，所以我开始构建一个`if-then-else`结构。这个想法是它会检查节点的名称，并据此确定如何处理它。很简单，不是吗？

问题是，无论我做什么，我似乎都无法从 XML 文件中提取我需要的节点的名称。XML文件的结构如下：

```
<Vehicle>
    <Detail>
        <VIN>BBB2791276393</VIN>
        <RegNo>KN05EAP</RegNo>
        <Doors>5</Doors>
    </Detail>
</Vehicle> 
```

我需要比较的是像“VIN”或“RegNo”这样的标签名称，但我想不出办法将它们拉出来。ETA：因为我没有说清楚，细节的子节点在 XML 文件之间发生变化，我必须在它们到来时处理它们......

我正在使用 DOM 解析器，并提取了一个`NodeList`基于`<Detail>`. `NodeList.item(0)`给了我`<Detail>`节点，但是如果我然后尝试将其分解（`getChildNodes()`例如），我将无法获得`<VIN>`or的标签名称`<RegNo>`。事实上，我似乎无法为它们获得任何类型的参考，我可以使用它们来根据原始名称确定它是哪个节点。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:53:06.327

Names of child nodes:

```
Element elem = (Element)nodeList.item(0);

        Node child;
        if( elem != null){
                if (elem.hasChildNodes()){
                   for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                       if( child.getNodeType() == Node.ELEMENT_NODE  ){
                           Log.i("fff", child.getNodeName());
                       }
                }
            }
        } 
```

To get value of a node I use this getValue() method (I forgot where I found this solution so sadly I can't give credit to the person who made it):

```
public String getValue(Element item, String str) {
        NodeList n = item.getElementsByTagName(str);
        return this.getElementValue(n.item(0));
    }

public final String getElementValue( Node elem ) {
        Node child;
        if( elem != null){
            if (elem.hasChildNodes()){
                for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                    if( child.getNodeType() == Node.TEXT_NODE  ){
                        //child.getNodeName();
                        return child.getNodeValue();
                    }
                }
            }
        }
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:01:23.810

好的..正如您解释的那样，您可以达到详细标签..尝试这样做...

```
// Getting VIN of Detail
 if (element.getElementsByTagName("VIN").getLength() > 0) {
        childNode = element.getElementsByTagName("VIN").item(0); //Get all the elements one by one
        String VIN = childNode.getFirstChild().getNodeValue();

    } 
```

您可以为 Detail 的所有子标签执行此操作...希望这会对您有所帮助..!!!

# c# - Monitor.TryEnter 总是在 Monitor.Enter 之后返回 true

> ID：11154401
> 
> 赞同：3
> 
> 时间：2012-06-22T10:23:38.087
> 
> 标签：c#, .net, multithreading, synchronization

我想我错过了一些关于 and 的正确行为的`Monitor.Enter`东西`Monitor.TryEnter`。这是我编写的一段代码，用于将问题与其余代码分开：

```
object lockObj = new object();
bool result = Monitor.TryEnter(lockObj);
Console.Write(result); 
```

结果总是`true`。这里没有惊喜。

```
object lockObj = new object();
Monitor.Enter(lockObj);
bool result = Monitor.TryEnter(lockObj);
Console.Write(result); 
```

但这一次也是`true`。那么是`lockObj`锁定后`Monitor.Enter`还是不锁定？请给我一些新的看法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T10:26:32.023

这是因为您在同一个线程中执行此操作。

还要记住（[MSDN](http://msdn.microsoft.com/en-us/library/de0542zz.aspx)）：

> 同一个线程在没有阻塞的情况下多次调用 Enter 是合法的；但是，在等待对象的其他线程解除阻塞之前，必须调用相同数量的 Exit 调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:27:15.720

已经获得监视器的同一线程始终允许重新获取它（以允许重新输入代码）。

# php - Magento 主题安装出错了？

> ID：11154407
> 
> 赞同：0
> 
> 时间：2012-06-22T10:24:16.620
> 
> 标签：php, e-commerce, magento

我正在尝试将以下 Magento 模板安装到我的在线商店中：

[http://www.magthemes.com/magento-themes/free-themes/fitness-magento-theme.html](http://www.magthemes.com/magento-themes/free-themes/fitness-magento-theme.html)

我正在使用这个主题，因为它与我所追求的设计/布局非常相似（安装后我将不得不调整 CSS）。

这是我到目前为止所做的：解压缩的
下载文件
将以下文件夹传输到我的服务器：
      app\design\frontend\default\Fitness_1.1**到** /public_html/app/design/frontend/default/Fitness_1.1
      skin\frontend\默认\**到**/public_html/skin/frontend/default/Fitness_1.1

转到我的站点 Admin > System > Configuration > Design
输入以下内容：

*   模板：Fitness_1.1
*   皮肤（图片/CSS）：Fitness_1.1
*   布局：Fitness_1.1
*   默认：默认

主题改变了，图像改变了等等，但是布局不正确，有些样式不正确，你可以在这里看到我的意思：

```
http://89.200.141.67/~skin/index.php/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:20:00.623

您的 CSS 文件未加载。尝试在以下位置显式设置皮肤目录：

Admin>System>Configuration>Design - Skin (Images/CSS) 表单域

取消选中使用网站复选框并确保您的当前配置范围（左上角的下拉菜单）正确。

# ios - 如何通过向其传递参数来使用 ASIHTTPRequest 在 iOS 中使用 SOAP Web 服务？

> ID：11154410
> 
> 赞同：0
> 
> 时间：2012-06-22T10:24:24.303
> 
> 标签：ios, xcode, web-services, soap

我目前在尝试从我的`webservice`（通过自己传递两个参数）获取数据并显示一些返回值时遇到困难。

# c# - C++ 到 C# 的移植

> ID：11154411
> 
> 赞同：2
> 
> 时间：2012-06-22T10:24:24.913
> 
> 标签：c#, c++

如何将此代码（C++）移植到 C#？

```
template <class entity_type>
class State {
public:
    virtual void Enter(entity_type*) = 0;
    virtual void Execute(entity_type*) = 0;
    virtual void Exit(entity_type*) = 0;
    virtual ~State() { }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T10:28:58.200

假设这真的是一个纯粹的抽象基类，它看起来像这样：

```
interface State<T>
{
    void Enter(T arg);
    void Execute(T arg);
    void Exit(T arg);
}; 
```

但是，确切的参数传递约定很尴尬。如果不确切知道您想做什么，就很难准确地说出您应该在 C# 中做什么。可能，`void FunctionName(ref T arg)`可能更合适。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T10:30:29.073

某种东西：

```
interface State<T> : IDisposable
{
    void Enter(T t);
    void Execute(T t);
    void Exit(T t);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:51:32.360

```
public abstract class State<entity_type>
    {
        public abstract void Enter(entity_type obj);
        public abstract void Execute(entity_type obj);
        public abstract void Exit(entity_type obj);
    } 
```

This seems to work :D

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-22T10:31:26.227

你可以这样写

```
abstract class State<T> : IDisposable where T : EntityType
{
    public abstract void Enter(T t);
    public abstract void Execute(T t);
    public abstract void Exit(T t);

    public abstract void Dispose();
} 
```

将您的 T 修复为 EntityType 类。

# android - 帧动画不起作用

> ID：11154412
> 
> 赞同：1
> 
> 时间：2012-06-22T10:24:24.913
> 
> 标签：android, frame, android-animation

我正在开发我想同时运行两帧动画但它不工作的应用程序......我的代码如下......

```
ImageView Background, planet, info;
AnimationDrawable infoview, backgroundview;
@Override
public void onCreate(Bundle savedInstanceState){
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  Background = (ImageView) findViewById(R.id.imageView1);
  planet = (ImageView) findViewById(R.id.planet);
  //Background.setImageResource(R.drawable.friend_night_sky_31000);
  Log.w("debug", "planetanimation started");
  planetStart(R.drawable.earth, R.drawable.background);
  Log.w("debug", "planetanimation stoped");
  info = (ImageView) findViewById(R.id.info);
  info.setImageResource(R.drawable.earthinfo);
  Log.w("DEBUG", "which is null:image " + infoview + "or" + backgroundview);
}

public void planetStart(final int pid, final int bid){
  Thread timer = new Thread(){
    @Override
    public void run(){
      try{
        //Thread.sleep(time);
      } catch (Exception e){

      } finally{
        Infoview.this.runOnUiThread(new Runnable(){
          public void run(){
            planet.setBackgroundResource(pid);
            infoview = (AnimationDrawable) planet.getBackground();
            infoview.start();
            Background.setBackgroundResource(bid);
            backgroundview = (AnimationDrawable) Background.getBackground();
            backgroundview.start();
            Log.w("DEBUG", "which is null:image " + infoview + "or" + backgroundview);
          }
        });
      }
    }
  };
  timer.start();
} 
```

任何人都可以帮助我为什么它不起作用？

**Edit1**我的地球文件如下

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" 
    >
   <item android:drawable="@drawable/earthframe1" android:duration="150" />
   <item android:drawable="@drawable/earthframe2" android:duration="150" />
   <item android:drawable="@drawable/earthframe3" android:duration="150" />
   <item android:drawable="@drawable/earthframe4" android:duration="150" />
   <item android:drawable="@drawable/earthframe5" android:duration="150" />
   <item android:drawable="@drawable/earthframe6" android:duration="150" />
   <item android:drawable="@drawable/earthframe7" android:duration="150" />
   <item android:drawable="@drawable/earthframe8" android:duration="150" />
   <item android:drawable="@drawable/earthframe9" android:duration="150" />
    </animation-list> 
```

bg文件如下

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" 
    android:oneshot="false">
    <item android:drawable="@drawable/bg_1" android:duration="150" />
   <item android:drawable="@drawable/bgimage2" android:duration="150" />
   <item android:drawable="@drawable/bgimage03" android:duration="150" />
   <item android:drawable="@drawable/bgimage4" android:duration="150" />
   <item android:drawable="@drawable/bgimage5" android:duration="150" />

</animation-list> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:19:42.763

您有两个解决方案，您可以从**planetStart**方法中删除线程，或者如果您想使用现有代码而不是提供一些值，例如**Thread.sleep(1000);** 在线程睡眠中我已经检查了这个值，它对我有用还有一件事避免在第一个动画结束之前开始第二个动画

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:05:42.353

试试下面的代码

```
package org.sample;

import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.os.Bundle;
import android.util.Log;
import android.widget.ImageView;

public class SampleActivity extends Activity
{

  ImageView Background, planet, info;

  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Background = (ImageView) findViewById(R.id.imageView1);
    Background.setBackgroundResource(R.drawable.background);

    planet = (ImageView) findViewById(R.id.planet);
    planet.setBackgroundResource(R.drawable.earth);

    info = (ImageView) findViewById(R.id.info);
    info.setImageResource(R.drawable.earthinfo);

    AnimationDrawable BackgroundAnimation = (AnimationDrawable) Background.getBackground();

    BackgroundAnimation.start();

    AnimationDrawable PlanetAnimation = (AnimationDrawable) planet.getBackground();

    PlanetAnimation.start();

  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:17:11.597

您不能在 onCreate 中启动动画（是的，您可以这样做）。您应该仔细阅读[此内容（尤其是最后一个带有段落的示例）。](http://developer.android.com/guide/topics/graphics/drawable-animation.html)

# css - 虚线输入的边框和密码在 IE 和 Chrome 中看起来很奇怪

> ID：11154414
> 
> 赞同：0
> 
> 时间：2012-06-22T10:24:34.327
> 
> 标签：css, internet-explorer, google-chrome

在 IE8 中，当字段聚焦时，它看起来是点状的。此外，在输入密码字段时，它会显示奇怪的符号（这个错误也在 Chrome 中，但在其他看起来不错）。

IE截图：[https ://www.dropbox.com/s/s2b5mpjbyrfn8fh/ie_focused.png](https://www.dropbox.com/s/s2b5mpjbyrfn8fh/ie_focused.png)

Chrome 截图：[https ://www.dropbox.com/s/1zi8eq7zposn6c9/chrome.png](https://www.dropbox.com/s/1zi8eq7zposn6c9/chrome.png)

CSS：

```
.field input {
font-size: 14px;
border: 1px solid rgba(98,141, 40, 0.5);
-webkit-background-clip: padding-box; /* for Safari */
background-clip: padding-box; /* for IE9+, Firefox 4+, Opera, Chrome */
border-radius:5px;
-moz-box-shadow: inset 0 0 1px 1px rgba(98,141, 40, 0.2);
-webkit-box-shadow: inset 0 0 1px 1px rgba(98,141, 40, 0.2);
box-shadow: inset 0 0 1px 1px rgba(98,141, 40, 0.2);

}

.field input:focus{
font-size: 14px;
-moz-box-shadow: 0 0 3px 3px rgba(98,141, 40, 0.2);
-webkit-box-shadow: 0 0 3px 3px rgba(98,141, 40, 0.2);
box-shadow: 0 0 3px 3px rgba(98,141, 40, 0.2);
border: 1px solid rgb(98,141, 40);
border-radius:5px;
} 
```

**添加 HTML 表单**

```
 <form accept-charset="UTF-8" action="/users/sign_in" class="login" id="new_user" method="post" novalidate="novalidate"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"><input name="authenticity_token" type="hidden" value="U+7u2UTO/3LS4dHOL21PgMpln5qZfrEWfwvnN/fxN6A="></div>
<div class="field2">

  <label for="user_email">E-mail Adress</label>
  <input id="user_email" name="user[email]" size="30" type="email" value="">
</div>

  <div class="field2">
    <label for="user_password">Password</label>
     <input id="user_password" name="user[password]" size="30" type="password"> 
</div> 
```

问题可能出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:26:07.830

嘿现在清除默认轮廓

像这样

```
.field input:focus{
outline:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:12:07.360

对于字体，更改密码框上的字体：

```
#user_password {
    font-family: sans-serif;
} 
```

# eclipse - 如何在 eclipse 中进行干净的构建并在启动时运行 junit 测试用例？

> ID：11154415
> 
> 赞同：0
> 
> 时间：2012-06-22T10:24:41.320
> 
> 标签：eclipse, ant, junit, rebuild, window-tester

有什么方法可以在 eclipse 中清理所有/重建项目并在每次打开 eclipse 时运行 jUnit 测试用例？

我正在开发一个 Eclipse 应用程序。场景是我想安排 UI 测试每天自动发生两次。但是我没有这样的可执行版本。但是我有完整的代码库，我想在上面运行一些预定的 JUnit 测试用例（基于 WindowTester）。

也欢迎您提出任何其他想法。：） 提前致谢。

Ant 需要一个可执行的构建来执行我读过的测试。:(

问候，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:14:55.923

Tough Jenkins 是开源的，如果你有更多的项目需要管理，那么选择 jenkins 将是一个不错的选择。Jenkins 的剂量远远超过自动化测试用例和构建。

但是，如果你有一个小的代码库并且需要执行一些特定的任务，比如计划构建和测试用例，那么 ant build 将是更可取的。

在您运行测试用例的情况下，

1.  创建一个ant构建脚本来构建整个项目（[如何编写Sample Build scprit](http://ant.apache.org/manual/using.html)）
2.  创建另一个 ant 脚本来读取 jars 并使用标签执行它们（[如何编写示例测试构建](http://ant.apache.org/manual/Tasks/junit.html)）
3.  编写一个 bat 文件以在控制面板中提供的 Windows 调度程序中调用 ant 脚本和调度构建，每天两次。

因此，这将编译、构建您的项目并在预定时间内对其进行测试。如果测试失败，只需从 ant 脚本触发邮件。

# emacs - 弹丸不再工作。我怎样才能重新启用它？

> ID：11154419
> 
> 赞同：1
> 
> 时间：2012-06-22T10:25:01.093
> 
> 标签：emacs, projectile, emacs-prelude

当我现在启动 emacs 时，prelude 不再被激活。这是我的`personal.el`文件：

```
(setq-default tab-width 4)
(setq tab-width 4)
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(tab-stop-list (quote (4 8 12 16 20 24 28 32 36 40 44 48 52 56 60 64 68 72 76 80 84 88 92 96 100 104 108 112 116 120))))
(setq exec-path (append exec-path '("/usr/bin/")))
(setq auto-fill-mode -1)
(setq-default fill-column 99999)
(setq fill-column 99999)
(setq global-hl-line-mode -1)
(require 'projectile)

(defun myprojectilehook ()
  (projectile-mode)
)

(add-hook 'find-file-hook 'myprojectilehook)
(add-to-list 'package-archives '("marmalade" . "http://marmalade-repo.org/packages/")) 
```

我尝试向 find-file-hook 添加一个钩子，这将为当前缓冲区启用弹丸，但没有太大成功。当我打开 emacs 弹丸被禁用。当我访问一个新文件时，弹丸仍然被禁用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T09:22:55.093

有一个`projectile-global-mode`也可以在有项目上下文的任何地方激活 Projectile。`projectile-global-mode`在 Prelude 中默认激活，所以我猜真正的问题与您的 Prelude 设置有关。好歹：

`(projectile-global-mode +1)`

应该无条件地为您的所有项目启用射弹。请记住，`projectile`对于 projectile 不认为是项目的目录中的缓冲区，这将始终被禁用（除非您`.projectile`在其中添加文件以标记项目的根文件夹）。

PS 我是 Prelude 和 Projectile 的作者，所以请随意在此处或在 GitHub 上的各自问题跟踪器上发布有关 Prelude 和 Projectile 问题的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:55:20.693

请注意，在 Emacs 24 之前，`(projectile-mode)`将*切换*模式（就像用 调用它一样`M-x projectile-mode`）。如果它打开，那将关闭它。

假设它使用标准模式定义宏，`(projectile-mode 1)`将启用和`(projectile-mode -1)`禁用。

`C-h f projectile-mode`应该表明这一点。

# apache - Apache WebDav 配置

> ID：11154422
> 
> 赞同：0
> 
> 时间：2012-06-22T10:25:09.150
> 
> 标签：apache, webdav, apache2.2

我正在尝试在 FreeBSD 上的 Apache 2.2 上配置 WebDav。Apache 运行良好，提供了很多东西。

所有 dav 模块似乎都包含在 LoadModules 命令中。这个虚拟主机工作正常。

当我访问 www.mysite.com/admin/ 时，我得到目录列表。没有其他的。我希望能够读/写等。

```
<VirtualHost 10.11.11.103:8180>
    ...
    config to server my site
    ...
    #enable webdav
    DavLockDB "/var/log/www/DavLock"
    Alias /admin/ /home/testing/pdf/
    <Directory "/home/testing/pdf/">
        Dav On
        Order Allow,Deny
        Allow from all
        <LimitExcept GET OPTIONS>
            Allow from All
        </LimitExcept>
    </Directory>

    # fixes a problem with several clients - redirects for folders with DAV methods.
    BrowserMatch "Microsoft Data Access Internet Publishing Provider" redirect-careful
    BrowserMatch "MS FrontPage" redirect-carefully
    BrowserMatch "^WebDrive" redirect-carefully
    BrowserMatch "^WebDAVFS/1.[0123]" redirect-carefully
    BrowserMatch "^gnome-vfs/1.0" redirect-carefully
    BrowserMatch "^XML Spy" redirect-carefully
    BrowserMatch "^Dreamweaver-WebDAV-SCM1" redirect-carefully
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:14:51.043

是的，您需要某种 webdav 客户端，以便您可以实际查看它是否有效。你可以试试bitkinex客户端。

# ios - 从 url 获取数据并保存在 ipad 中

> ID：11154426
> 
> 赞同：2
> 
> 时间：2012-06-22T10:25:16.070
> 
> 标签：ios, objective-c, ipad, pdf, fetch

当您单击该链接时，我需要在 iPad 中保存 pdf/doc 文档。我试图从[http://meme.hcl.com/sites/default/files/243347_TroubleShootingSqlserver20052008.pdf](http://meme.hcl.com/sites/default/files/243347_TroubleShootingSqlserver20052008.pdf)获取数据，并试图将这个 pdf 保存在 iPad 中。但我无法做到这一点。请帮帮我。

```
myGroupsBeanData = [self.groupLinksDocumentsArray objectAtIndex:indexPath.row];
 NSString *seperator=@"meme.hcl.com/";;
 documentName=[NSString stringWithFormat:@"%@%@",seperator,myGroupsBeanData.linkVal];    
 responseData = [[NSMutableData alloc] init];
 webserviceType = GET_PDF_DATA;
 NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:documentName]];
 [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

# c# - nhibernate给mysql错误 - 但仍然工作正常

> ID：11154429
> 
> 赞同：0
> 
> 时间：2012-06-22T10:25:26.937
> 
> 标签：c#, mysql, nhibernate, fluent-nhibernate

知道为什么我在启动日志中得到这个吗？

> Blockquote 错误 NHibernate.Util.ReflectHelper - 无法加载类型 MySql.Data.MySqlClient.MySqlConnection、MySql.Data。System.IO.FileNotFoundException：无法加载文件或程序集“MySql.Data”或其依赖项之一。该系统找不到指定的文件。文件名：System.Reflection.RuntimeAssembly._nLoad 中的“MySql.Data”（AssemblyName 文件名，字符串 codeBase，证据 assemblySecurity，RuntimeAssembly locationHint，StackCrawlMark 和 stackMark，布尔 throwOnFileNotFound，布尔 forIntrospection，布尔suppressSecurityChecks）在 System.Reflection.RuntimeAssembly.nLoad（ AssemblyName 文件名、字符串 codeBase、证据 assemblySecurity、RuntimeAssembly locationHint、StackCrawlMark 和 stackMark、布尔 throwOnFileNotFound、Boolean forIntrospection、Boolean suppressSecurityChecks）在系统。

但它工作得很好。我正在使用 FluentNhibernate 配置我的应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:06:56.713

如果使用反射的 loaing 不起作用，NHibernate 使用 DBProviderFactories 作为后备。即使它能够加载它，它也可能会记录失败的尝试。

# css - 在 IE8（XP 模式）中导航中的字体太大。页面的其余部分还可以。仅在导航中

> ID：11154432
> 
> 赞同：1
> 
> 时间：2012-06-22T10:25:47.487
> 
> 标签：css, internet-explorer-8

* * *

## 编辑

这个问题解决了！

* * *

有什么奇怪的。

我正在使用`html { font-size: 100% }`，`body {font-size: 62.5%}`所以我有`1em == 10px`CSS。我以前做过几次。

现在在我的页面上，字体大小一切正常，除了 IE8 和 IE7（XP 模式）中导航中的字体

我在这里摆弄了相关的 HTML/CSS 代码[http://jsfiddle.net/gk4j9/3/](http://jsfiddle.net/gk4j9/3/)

使用modernizr进行渐变和阴影的浏览器功能切换

缩放为 100%
文本缩放为中等

![IE7、IE8、IE9截图](../Images/d8e5e89a16487b1c450bf07fffdf7aee.png)

* * *

编辑
为了测试去这里
[http://netrenderer.com/index.php](http://netrenderer.com/index.php)
并测试这个地址
[http://fiddle.jshell.net/gk4j9/3/show/light/](http://fiddle.jshell.net/gk4j9/3/show/light/)

* * *

编辑
字体大小是2em，所以应该是20px。如果我在 IE8 中使用 Developer Tools (18px) 更改为 1.8em，它看起来与 IE9 和其他浏览器中的 2em 完全相同

* * *

## HTML

```
<div class="l-fullwrap clearfix">
    <header class="page-header">
        <div class="l-header-nav-primary">
            <nav class="primary">
                <ul>
                    <li class="first has-children">
                        <a href="javascript:;">
                            <span>Item 1</span>
                        </a>
                    </li><li class="has-children">
                        <a href="javascript:;">
                            <span>Item 2</span>
                        </a>
                    </li><li class="has-children">
                        <a href="javascript:;">
                            <span>Item 3</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>
</div> 
```

* * *

## CSS

```
html {
  font-size: 100%;
}

html, button, input, select, textarea {
  font-family: sans-serif;
  color: #222;
}

body {
  font-size: 62.5%;
  line-height: 1.4em;
}

body {
  font-family: Arial, Helvetica, sans-serif;
}

nav ul, nav ol {
  list-style: none;
  list-style-image: none;
}

a, a:link, a:visited {
  color: #EFAA03;
}
a, a:link, a:visited {
  color: #EFAA03;
}
a:visited {
  color: #551A8B;
}
a, a:link, a:visited {
  color: #EFAA03;
}
a {
  color: #00E;
}

/* Primary Nav */
.l-header-nav-primary {
  position: absolute;
  right: 0px;
  top: 45px;
}
nav.primary {
  border-top: 1px solid #CDCDCD;
  border-bottom: 1px solid #AAAAAA;
}
nav.primary,
nav.primary li{
  display: inline-block;
  *zoom: 1;
  *display: inline;
  vertical-align: baseline;
}
.no-cssgradients nav.primary li,
nav.primary li{
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#d2d2d2', endColorstr='#979696',GradientType=0 ); /* IE6-9 */
}
.cssgradients nav.primary li,
nav.primary li{
  line-height: 3.2em;
  padding-right: 1px;
  background: #979696; /* Old browsers */
  background: -moz-linear-gradient(top, #d2d2d2 0%, #979696 100%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#d2d2d2), color-stop(100%,#979696)); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top, #d2d2d2 0%,#979696 100%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top, #d2d2d2 0%,#979696 100%); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #d2d2d2 0%,#979696 100%); /* IE10+ */
  background: linear-gradient(top, #d2d2d2 0%,#979696 100%); /* W3C */
  filter: none;
}
nav.primary li.last{
  padding-right: 0;
}
.no-cssgradients nav.primary a,
nav.primary a {
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#b6b6b6',GradientType='0' ); /* IE6-9 */
}
.cssgradients nav.primary a,
nav.primary a{
  display: block;
  background: #b6b6b6; /* Old browsers */
  background: -moz-linear-gradient(top, #ffffff 0%, #b6b6b6 100%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#b6b6b6)); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top, #ffffff 0%,#b6b6b6 100%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top, #ffffff 0%,#b6b6b6 100%); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #ffffff 0%,#b6b6b6 100%); /* IE10+ */
  background: linear-gradient(top, #ffffff 0%,#b6b6b6 100%); /* W3C */
  filter: none;
}
nav.primary a {
  display: block;
  padding: 0 10px;
  font-size: 2em;
  font-family: Calibri;
  font-weight: bold;
  color: #333333;
  text-decoration: none;
  text-transform: uppercase;
  text-shadow: 1px 1px rgba(255,255,255, 0.65);
  height: 100%;
}
.no-textshadow nav.primary a span{
    display: inline-block;
    *zoom: 1;
    *display: inline;
    background-color: #E0E0E0;
    -ms-filter: "Chroma(Color=#E0E0E0) DropShadow(OffX=1, OffY=1, Color=#FFFFFF)";
    filter: Chroma(Color=#E0E0E0) DropShadow(OffX=1, OffY=1, Color=#FFFFFF);
}
.no-textshadow nav.primary li.active a span,
.no-textshadow nav.primary a:focus span,
.no-textshadow nav.primary a:hover span,
.no-textshadow nav.primary a:active span {
    display: inline-block;
    *zoom: 1;
    *display: inline;
    background-color: transparent;
    -ms-filter: "none";
    filter: none;
}

nav.primary li.active a,
nav.primary a:focus,
nav.primary a:hover,
nav.primary a:active,
.no-cssgradients nav.primary li.active a,
.no-cssgradients nav.primary a:focus,
.no-cssgradients nav.primary a:hover,
.no-cssgradients nav.primary a:active {
  filter: none;
}
.cssgradients nav.primary li.active a,
.cssgradients nav.primary a:focus,
.cssgradients nav.primary a:hover,
.cssgradients nav.primary a:active,
nav.primary li.active a,
nav.primary a:focus,
nav.primary a:hover,
nav.primary a:active {
  color: #FFFFFF;
  background:#231F20;
  text-shadow: none;
  outline: none;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:15:13.997

我想到了。

在我的 XP Mode 中，我没有安装 Calibri 字体。所以它使用不同的字体。

操我！

# javascript - 稍后阅读 使用 CSS3 和 HTML5 或 JS 幻灯片

> ID：11154439
> 
> 赞同：1
> 
> 时间：2012-06-22T10:26:11.447
> 
> 标签：javascript, mobile, css

有谁知道如何使用 CSS3 或 JS 在“稍后阅读”应用程序中制作向左滑动的效果？

onclick --> 将整个 div 向左滑动，并在滑开的那个 div 下显示 div。

这是一个带有示例的视频：[稍后阅读](http://cl.ly/122a361f3y0c3b3s1C1o)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T11:04:07.470

可能这就是你想要的css3。 **CSS**

```
.parent{
    width:300px;
    border:1px solid red;
    height:100px;
    position:relative;
}
.box{
    width:40px;
    height:40px;
    background:green;
    display:block;
    z-index:0;
}
.slider{
    width:300px;
    background:#454545;
    color:#fff;
    font-weight:bold;
    font-size:24px;
    height:100px;
    position:absolute;
    top:0;
    right:300px;
    transition: right 1s ease;
    -moz-transition: right 1s ease; /* Firefox 4 */
    -webkit-transition:right 1s ease; /* Safari and Chrome */
    -o-transition:right 1s ease; /* Opera */
    z-index:1;
}
.box:focus + .slider,.box:active + .slider{
    right:0;
} 
```

**HTML**

```
<div class="parent">
    <a href="#" class="box"></a>
    <div class="slider">hello</div>
</div> 
```

检查这个[http://jsfiddle.net/MhHx2/](http://jsfiddle.net/MhHx2/)

**更新**

[http://jsfiddle.net/MhHx2/4/](http://jsfiddle.net/MhHx2/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:41:09.783

您可以通过使用几种标准技术来实现该效果。

1.  创建两个`div`元素，一个用于将要滑出的元素，一个用于将要显示的元素。
2.  [使用z-index](http://www.w3schools.com/cssref/pr_pos_z-index.asp)定位它们。请注意，`div`s 必须使用 , 或 定位`absolute`才能`relative`正常`fixed`工作。
3.  您可以使用 jQuery 来制作效果。[我在这里](http://css3.bradshawenterprises.com/sliding/)找到了一个不错的帖子。

那应该让你完成。

# ruby-on-rails - PDFKIT 自定义字体

> ID：11154443
> 
> 赞同：4
> 
> 时间：2012-06-22T10:26:18.903
> 
> 标签：ruby-on-rails, pdfkit

有没有办法用 PDFKit 和自定义字体打印 pdf？

在CSS中我有：

```
 @font-face {
font-family: 'ChaparralProRegular';
src: url("path_to_font/chaparralpro-regular-webfont.eot");
src: url("path_to_font/chaparralpro-regular-webfont.eot?#iefix") format("embedded-opentype"),
url("path_to_font/chaparralpro-regular-webfont.woff") format("woff"),
url("path_to_font/chaparralpro-regular-webfont.ttf")  format("truetype"),
url("path_to_font/chaparralpro-regular-webfont.svg#ChaparralProRegular") format("svg"); 
```

上面的代码在呈现为 html 但使用 PDFKit 使用标准字体打印到 pdf 时工作正常。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:31:56.257

我猜你的 pdfkit 只是找不到你的字体文件在哪里。我对pdf中的图像有同样的问题。尝试用本地文件路径替换字体文件的所有 url：

```
url("#{Rails.root}/path_to_font/chaparralpro-regular-webfont.eot"); 
```

# java - Desktop.browse() 打开多个窗口

> ID：11154452
> 
> 赞同：0
> 
> 时间：2012-06-22T10:27:07.543
> 
> 标签：java, internet-explorer-8, applet, awt, windows-7-x64

我们在 JRE 1.6.0_26 中运行的小程序中运行以下代码。

```
Desktop.getDesktop().browse(new URI("www.google.com") 
```

在某些 Windows 7 64 位、IE8 机器上，此命令会打开两个窗口，但在其他应该是相同设置的窗口上不会。有谁知道会导致这种情况的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:57:25.300

我强烈怀疑这只是一些编码粗心（我和其他人一样内疚）。

考虑以下代码：

```
JButton myButton1 = new JButton("Click 1");
myButton1.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
      Desktop.getDesktop().browse(new URI("www.google.com"));
    }
});

JButton myButton2 = new JButton("Click 2");
myButton1.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
      Desktop.getDesktop().browse(new URI("www.google.com"));
    }
}); 
```

注意到这里的错误了吗？

目的是为每个按钮分配一个动作，但由于在定义 myButton2 后不小心复制/粘贴，我们错误地为 myButton1 分配了第二个动作。

现在将发生的情况是，当用户单击 myButton1 时，将调用第一个操作，从而显示带有 www.google.com 的浏览器，然后调用第二个操作，导致该窗口中出现另一个选项卡或另一个窗口（取决于您的浏览器设置）。

# jquery - 第二个 .click() 函数不起作用

> ID：11154458
> 
> 赞同：9
> 
> 时间：2012-06-22T10:27:21.807
> 
> 标签：jquery

第一个 .click 函数用于在容器中添加元素（div），第二个函数用于将其从容器中删除。容器最初没有元素。通过单击删除该功能不起作用

```
$(document).ready(function(){
    $(".class1").click(function(){
       //Code for adding element to the container and 
       // removing class1 from it and adding class2

    });

    $(".class2").click(function(){
       alert("hi");   //Even the alert is not displayed
       $(this).fadeOut(100);    
    });
}); 
```

但是，如果在页面加载到容器中之前元素已经存在，则它可以工作。有什么理由吗？是因为 document.ready 功能吗？解决方案？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-22T10:29:30.020

这是因为当您为元素添加点击处理程序时，您只是将事件添加到**在该特定时刻**`.class2`具有该类的元素；例如没有。

 **相反，您需要像这样使用事件委托；

```
$(document).on('click', '.class2', function () {
    alert('hi');
    $(this).fadeOut(100);
}); 
```

这将起作用，因为它将事件绑定到（始终存在），该事件使用事件委托`document`侦听任何元素的点击。`.class2`有关更多信息，请阅读[`on()`](http://api.jquery.com/on)文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T10:29:34.207

对两个类都使用委托事件处理程序（如果您在它们之间切换，或者如果您不回到`class1`第二个就足够了），因为更改后`class`的元素被视为动态的。

```
$("#container").on("click", ".class1", function(){

});

$("#container").on("click", ".class2", function(){

}); 
```

这里`#container`指的是那些类的父类，你可能有别的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:29:28.723

当您尝试添加要单击的代码时，`.class2`据我所知，它尚未创建。`.class2`在创建这样的元素后，尝试添加点击事件：

```
$(document).ready(function(){
    $(".class1").click(function(){
            //Code for adding element to the container and removing class1 from it and adding class2

        $(".class2").click(function(){
            alert("hi");         //Even the alert is not displayed
            $(this).fadeOut(100);

        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:33:27.900

无法将事件投射到详细说明函数时不存在的元素上。但是，您可以围绕“class1”和“class2”创建一个包装元素 (div)，如下所示：

```
<div id="class1_wrapper">
  <span class="class1">
</div> 
```

我对 class1 使用了“span”，因为我不知道它是哪个元素。然后，您可以使用“on()”来代替点击事件：

```
 $("#class1_wrapper").on("click", ".class1", function ()
 {
   //Code for adding element to the container and removing class1 from it and adding class2
 }); 
```

这样，即使class1不存在（class2也可以这样做），click事件也会运行**

# android - 如何在android中下载最新版本的文件？

> ID：11154463
> 
> 赞同：2
> 
> 时间：2012-06-22T10:27:56.107
> 
> 标签：android

我准备了一个示例应用程序。当应用程序安装在设备中时，从服务器下载文件并存储在本地存储中。启动应用程序时，首先检查服务器中的文件版本（文件名，如 filename_version(g_0.1)）。当更改那个时候的版本只下载文件并存储在本地，旧版本从本地删除。

如何做到这一点。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:32:38.590

也许您只想进行 md5 总和检查。所以这是最简单的方法：假设您从不降级服务器上的版本，然后保存本地文件的 md5 总和并从服务器请求一个。如果它不同，你下载文件。

否则，如果您真的想通过文件名执行此操作，您可以从服务器获取文件名，然后像这样拆分：`yourfile_1.0.9-dev`->`{yourfile, 1, 0, 9, dev}`您可以轻松比较主要、次要和发布版本。

# c# - 找到正在调试我的进程的 Visual Studio 的 pid

> ID：11154467
> 
> 赞同：6
> 
> 时间：2012-06-22T10:28:03.110
> 
> 标签：c#, .net, visual-studio, debugging

我知道我可以通过调用 .NET 中的 Debugger.IsAttached 来查找是否正在调试进程，但我希望能够获得用于调试进程的 Visual Studio 的 PID。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:07:07.090

您可以使用[此答案](https://stackoverflow.com/a/3268736/292555)`TryGetVSInstance`中概述的方法来获取 Visual Studio 的 EnvDTE COM 自动化对象的每个实例。一旦你有了它，只需迭代[DTE.Debugger.DebuggedProcesses](http://msdn.microsoft.com/en-US/library/envdte.debugger.debuggedprocesses%28v=vs.80%29)集合并检查它们中的任何一个是否指向与你感兴趣的进程相同的 processID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T22:00:28.747

[这](https://stackoverflow.com/questions/394816/how-to-get-parent-process-in-net-in-managed-way)对我有用。

```
public static Process GetParent(Process process)
{
    var processName = process.ProcessName;
    var nbrOfProcessWithThisName = Process.GetProcessesByName(processName).Length;
    for (var index = 0; index < nbrOfProcessWithThisName; index++)
    {
        var processIndexdName = index == 0 ? processName : processName + "#" + index;
        var processId = new PerformanceCounter("Process", "ID Process", processIndexdName);
        if ((int)processId.NextValue() == process.Id)
        {
            var parentId = new PerformanceCounter("Process", "Creating Process ID", processIndexdName);
            return Process.GetProcessById((int)parentId.NextValue());
        }
    }
    return null;
} 
```

# drupal - CDN 在性能和 RAM 方面对服务器有帮助吗？

> ID：11154469
> 
> 赞同：1
> 
> 时间：2012-06-22T10:28:12.693
> 
> 标签：drupal, cdn, amazon-cloudfront

我打算将我的网站文件移动到 CDN 系统中，我正在运行 4 个 drupal 网站和 1 个 wordpress。我正在考虑使用 Amazon Cloud Front。我有几个问题：

CDN 系统是否在性能和 RAM 方面帮助我的服务器？我正在使用[http://www.webpagetest.org](http://www.webpagetest.org)查看网站的性能，83% 的请求来自图像。其余的介于 html、css、js 和其他之间。这是另一个结果

```
F = First Byte Time
A = Keep-alive Enabled
F = Compress Text
C = Compress Images
A = Cache static content
X = CDN detected 
```

是否可以使用亚马逊 CloudFront 将网站放在云上的子文件夹中？基本上我想在非生产站点中对其进行测试。

我的服务器是 r310 四核至强 2.66，内存为 4gb。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:46:00.897

我认为这个答案应该很长，但简单来说，一个管理良好的 CDN 可以帮助您使您的网站更快。4GB 的 RAM 对于一个普通的网站来说还不错。

我可以考虑使用 CDN 的 3 个主要原因。1\. 使用附近的服务器更快地交付静态内容。2\. 避免浏览器向每个 GET 请求发送 cookie。3\. 卸下部分Apache 负载。

1 - 我没有使用过云端，但有一些 akamai 服务器，它们确实有所作为。它们简单地在不同的和附近的服务器中提供内容，因此文件加载相对较快。但不要忘记，如果用户在 dns 缓存清理后第一次加载站点，这会增加额外的 ip 查找。

2 - 我想你知道没有 cookie 的域问题。如果您在 example.com 中托管您的网站，并且图像在 example.com/image.png 中，则浏览器应在每个页面请求中发送 cookie 信息。它们通常是约 100 字节的数据，但当涉及到许多资产时，这是值得考虑的。如果您将它们移至 example-data.com 域，浏览器将不会将 cookie 发送到该位置的资产。更快的页面。

3 - 您的网络服务器负载是另一个好处。您的服务器将收到更少的请求（主要是 html 请求），并且图像和其他资产将从另一台服务器提供。

# ruby-on-rails-3 - 从 FactoryGirl 创建的模型中查询另一个模型

> ID：11154470
> 
> 赞同：0
> 
> 时间：2012-06-22T10:28:27.127
> 
> 标签：ruby-on-rails-3, rspec, bdd, factory-bot

刚从 FactoryGirl 开始。我有一个名为`Subscription`. 它有一个方法“set_price”，它显然做了一些计算。为此，它必须向另一个模型询问一些值：

```
def set_price
  base_price = Option.find_by_key(:base_price).value.to_f
  # […] some calculations
end 
```

运行我的规格时，我得到：

```
 NoMethodError:
            undefined method `value' for nil:NilClass 
```

这是非常合乎逻辑的，因为我（还没有？）创建任何`Options`.

`FactoryGirl`适合这个吗？`Option`在这种情况下我必须创建固定装置吗？还是只是嘲笑它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:02:56.457

这将失败，因为数据库中没有选项。您可以在测试中调用 set_price 之前创建选项工厂（在这种情况下，您需要确保 find_by_key(:base_price) 将返回您的工厂创建的选项），或者您可以使用模拟：

```
option = mock_model('Option', :value => 1)
Option.stub(:find_by_key).and_return(option) 
```

模拟的优点是它不会接触数据库，但它可能更脆弱。

# compiler-construction - 如何实现符号类型？

> ID：11154471
> 
> 赞同：1
> 
> 时间：2012-06-22T10:28:37.450
> 
> 标签：compiler-construction, yacc, lex

我正在做编译器构造类，但我有很多困惑。我知道 .l 和 .y 文件是做什么的，但我不清楚它们是如何合并的？符号表在哪里声明？在 .l、.y 或其他 .c 文件中制作简单的编译器是否需要 .l 和 .y 文件？

请给我一些例子，因为看例子对我来说更容易理解。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:49:32.897

The symbol table would be declared in other .c and .h files, separate from `lex` and `yacc` files.

Lex (.l files) and Yacc (.y files) help in compiler construction, but not strictly necessary. You can write the lexer and parser by hand, for example.

# android - 如何在一个布局中同时播放 2 个或多个视频视图？

> ID：11154472
> 
> 赞同：1
> 
> 时间：2012-06-22T10:28:40.613
> 
> 标签：android, android-videoview

我想同时播放 2 个或多个 videoview 但只播放一个，为什么？我可以用媒体播放器做到这一点吗？我必须使用线程吗？

视频视图 vv1、vv2、vv3、vv4；

```
 vv1=(VideoView)findViewById(R.id.vv1);
        vv2=(VideoView)findViewById(R.id.vv2);
        vv3=(VideoView)findViewById(R.id.vv3);
        vv4=(VideoView)findViewById(R.id.vv4);

        try {
        vv1.setVideoURI(Uri.parse(dizi[0].toString())); 
        vv1.requestFocus();
        vv1.start();
        } catch (Exception e) {
            // TODO: handle exception
        }
        try {
        vv2.setVideoURI(Uri.parse(dizi[1].toString())); 
        vv2.requestFocus();
        vv2.start();
        } catch (Exception e) {
            // TODO: handle exception
        }
        try {
        vv3.setVideoURI(Uri.parse(dizi[2].toString())); 
        vv3.requestFocus();
        vv3.start();
        } catch (Exception e) {
            // TODO: handle exception
        }
        try {
        vv4.setVideoURI(Uri.parse(dizi[3].toString())); 
        vv4.requestFocus();
        vv4.start();
        } catch (Exception e) {
            // TODO: handle exception
        } 
```

# java - 在 Java EE 中，辅助域对象的名称

> ID：11154476
> 
> 赞同：0
> 
> 时间：2012-06-22T10:28:58.817
> 
> 标签：java, jakarta-ee

在 Java EE 的 3 堆栈层世界中（域、DAO、服务）

一个旨在帮助用户界面世界的域助手对象可以做什么。例如：

> 域.用户

代表向论坛发布消息的用户，这些用户可以匿名提交消息。当服务通过一段逻辑发现用户需要“匿名”时

> **xyz** .匿名

创建类并通过构造函数将用户引用传递给它：

> 匿名匿名 = 新匿名（用户）；

匿名类用于用户界面。

但是，Anonymous 不是域对象，因为它没有与之关联的 DAO。那么**xyz**应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:19:57.763

域对象与持久性无关。域对象是对域建模的对象。如果域包含匿名帖子的想法，那么将有满足此需求的域对象。

一些域对象可能是持久的，但不要挂断它。

无论如何，不​​要将您的类简单地沿层线拆分为包，而是按功能区域进行。因此，一个用于用户和身份的包，另一个用于消息，另一个用于聊天室等。如果您有跨整个层的通用代码，那么当然，将其放在特定于层的包中，但这不需要成为默认值。

# .htaccess - SSL 与 Codeigniter htaccess

> ID：11154478
> 
> 赞同：1
> 
> 时间：2012-06-22T10:29:06.997
> 
> 标签：.htaccess, codeigniter, ssl

好的，所以我在使用 .htaccess 时遇到了一些麻烦。

我正在使用 Codeigniter 并且刚刚安装了 SSL 证书。它工作得很好，除了我在 Firefox 中没有看到蓝条，它说“您与此站点的连接仅部分加密”

这是我的 .htaccess 文件：

```
RewriteEngine on
Options +FollowSymLinks
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} (signin)
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !(signin)
RewriteRule ^(.*)$ http://%{SERVER_NAME}%{REQUEST_URI} [R=301,L] 
```

我只想在某些页面上强制 SSL，从登录页面 (mydomain.com/signin) 开始。它似乎可以很好地删除 URL 中的 index.php/ 并且它似乎确实在强制该页面使用 SSL，但没有蓝条 :(

我还在配置文件中将我的 base_url 更改为以下内容以允许 http 和 https：

```
$config['base_url'] = $config['base_url'] = "http".((isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == "on") ? "s" : "")."://".$_SERVER['HTTP_HOST'].str_replace(basename($_SERVER['SCRIPT_NAME']),"",$_SERVER['SCRIPT_NAME']); 
```

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:38:25.583

我认为该错误是由于您的页面中有使用 HTTP 而不是 HTTPS 下载的元素引起的。

您需要确保使用相对 URL 或使用正确协议（HTTPS 而不是 HTTP）的绝对 URL 引用页面中的所有元素。

# ruby - 有没有一种简单的方法可以在不使用表达式的情况下将值评估为真/假？

> ID：11154479
> 
> 赞同：0
> 
> 时间：2012-06-22T10:29:11.753
> 
> 标签：ruby

Ruby 中是否有一种简单的方法可以从某事物中获取真/假值，而无需明确地将其评估为真或假

例如，如何更简洁地表达

```
class User
  def completed_initialization?
    initialization_completed == 1 ? true : false
  end
end 
```

有什么方法可以做一些事情

```
initialization_completed.true? 
```

显然没什么，但既然我在 Ruby 的禅宗花园里，我不妨拥抱它

**编辑（我已经更新了示例）**

正如@Sergio Tulentsev 非常温和地指出的那样，这个问题的措辞非常糟糕。原始示例（如下）当然会直接计算为布尔值。我仍在努力寻找一个例子来说明我的意思，但塞尔吉奥的双重否定实际上正是我所寻找的。

**原始示例**

```
class User
  def top_responder
    responses.count > 10 ? true : false
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T10:30:16.807

`>`运算符已经返回布尔值。所以它可以只是

```
 def top_responder
    responses.count > 10
  end 
```

要将任意值转换为布尔值，我提供了这个双重否定的小技巧。

```
t = 'foo'
!!t # => true

t = 1
!!t # => true

t = 0
!!t # => true

t = nil
!!t # => false 
```

第一个否定将值“转换”为布尔值并将其反转。也就是说，它将为`nil`/`false`和其他所有内容返回 true。我们需要另一个否定来使其产生“正常”值。

# sencha-touch-2 - 如何在另一个旋转木马顶部添加旋转木马（小尺寸）

> ID：11154480
> 
> 赞同：0
> 
> 时间：2012-06-22T10:29:12.703
> 
> 标签：sencha-touch-2

//这是我的轮播视图，它在轮播代码上显示一些图像如下

```
Ext.define("App.view.GView", 
{
    extend:'Ext.Carousel',
    xtype:'GView',
    requires:[
        'Ext.carousel.Carousel',
        'Ext.Img',
        'Ext.Loader'
    ],

    config:{
        title:'XYZ',
        iconCls:'home',
        layout:{
            type:'vbox',
            pack:'center',
            align:'center'
        },
        directionLock:true,
        fullscreen:true,
        items:[
            {
                docked:'top',
                xtype:'titlebar',
                cls:'titleBar',
                title:'Gallery'
            }
        ],

        xtype:'carousel',
        id:'gallerycarousel'
    }
}); 
```

//这是我的控制器代码，它将数据绑定到

```
 var items = []; Temp array
    var xyz= [{ urlL}] My image array

    Ext.each(images, function (picture) {
    items.push({
            xtype: 'image',
             cls: 'centerImage',
             src: picture.url
           });
     });
    floorCarousel.setItems(items);
    floorCarousel.setActiveItem(0); 
```

//我的问题是如何在这个旋转木马的顶部添加另一个旋转木马，当我移动第一个旋转木马项目时，第二个旋转木马项目也应该移动，反之亦然。所以第一个旋转木马位于顶部的底部，我需要小尺寸旋转木马请帮我解决一些棘手的问题.,,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:06:10.657

我很困惑。您需要知道如何创建轮播，还是只需要知道如何使第二个轮播与主轮播一起移动？

# c++ - 将 MSVS 2010 项目转换为 MSVS 2012 RC 但出现错误“C++ 标准不提供此类型的哈希”

> ID：11154481
> 
> 赞同：6
> 
> 时间：2012-06-22T10:29:19.323
> 
> 标签：c++, string, map, c++11, visual-studio-2012

我有一个项目在 MSVS 2010 SP1 下运行良好。我正在尝试将其转换为 MSVS 2012 RC。我不得不更改一些东西，主要与 C++ 头文件/lib 路径和 MFC 自定义内容有关。但我还有最后一个障碍要清除。

在 MSVC 2010 中，我使用了很多`unordered_map<basic_string<TCHAR>, int>`or `map<basic_string<TCHAR>, int>`. 它编译得很好。但在 MSVS 2012 中，我只收到此错误：“C++ 标准不提供这种类型的哈希”

在网上搜索了一下，发现MSVS 2012应该更接近C++11标准，而且标准只定义了基本类型的哈希函数和4种定义的字符串类型（其中`string`和`wstring`，但`basic_string`不包括）。所以我改变了一切`basic_string<TCHAR>`，`wstring`但无济于事......我仍然得到同样的错误。

我应该怎么做才能再次编译我的应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T13:21:38.533

显然 OOEngineer 使用`basic_string`不包括`<string>`标题。无论如何，通过其他标头的间接包含，部分功能可能是可见的。

当 VS2010 发布时，当时提出的标准将所有`std::hash<>`专业化放在`<functional>`标题中。在最终的 C++11 标准中，决定最好将它们与各自的容器放在一起，因此将一些`hash<>`特化移至`<string>`、`<vector>`等。

因此，要使用 的所有（或*任何*真正的）功能`std::string`，您必须自己包含`<string>`标头，而不是依赖另一个系统标头这样做。

# sql - 根据多个记录条件返回结果

> ID：11154484
> 
> 赞同：0
> 
> 时间：2012-06-22T10:29:28.850
> 
> 标签：sql

我需要从包含产品 A 和产品 B 的交易清单中退回发票

表格示例

```
prod_code | invoice
 apple    |  100
 banana   |  100
 orange   |  100
 apple    |  101
 kiwi     |  101
 grape    |  101
 apple    |  102
 banana   |  102
 grape    |  102 
```

我需要输入 2 个产品，它必须列出同时包含这两种产品的发票编号。如果我输入苹果和香蕉它必须返回 100 和 102 如果我输入苹果和葡萄它返回 101 和 102

看起来它应该很简单，但对于我的生活，我想不出如何做到这一点。

解决了

好的，我解决了我自己的问题。不知道为什么我没有早点想到它。正如我认为这很简单。

```
select invoice from transaction where prod_code="apple" and invoice in (select invoice from transaction where prod_code="banana") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:32:14.223

```
SELECT
  invoice
FROM
  transactions
WHERE
  prod_code IN ('apple', 'banana')
GROUP BY
  invoice
HAVING
  COUNT(DISTINCT prod_code) = 2 
```

但是请注意，这不是一个快速查询，并且使用您拥有的结构来获得显着的性能提升并不容易。

就其性质而言，第一步必须`find all invoices with 'apple' <OR> 'banana'`且仅在此之后才能过滤到具有两者的发票。

另一种选择是...

```
SELECT
  t_apple.invoice
FROM
  transactions     AS t_apple
INNER JOIN
  transactions     AS t_banana
    ON t_apple.invoice = t_banana.invoice
WHERE
      t_apple.prod_code  = 'apple'
  AND t_banana.prod_code = 'banana' 
```

但这不太容易推广到`n`prod_codes。

# c# - 带有if语句的javascript在asp.net c#后面的代码中触发按钮

> ID：11154487
> 
> 赞同：0
> 
> 时间：2012-06-22T10:29:29.247
> 
> 标签：c#, javascript, asp.net

我在 gridview 中添加产品并检查列表中是否存在 las 记录我有消息要更新现有记录或删除最后插入的记录！下面是我的代码，但它不起作用！谁能帮我？

```
public void SaveToList()
        {
            try
            {
                OrdersDataContext contex = DataContextSingleton.Instance;

                _order = new Order();
                _order.quant = Int32.Parse(quant.Text);
                _order.price = price.Text;
                _order.totalprice = Decimal.Parse(totprice.Text);
                _order.discoun_id = Int32.Parse(TextBox3.Text);
                _order.prod_id = Int32.Parse(TextBox2.Text);
                _order.regist_id = Int32.Parse(TextBox4.Text);

                _readyToSave.Add(_order);
                //contex.Orders.InsertOnSubmit(ord);
                //contex.SubmitChanges();
                if (_readyToSave.Count() != 0)
                {
                    var selectO = (from o in _readyToSave
                                   orderby o.prod_id
                                   select new
                                   {
                                       val1 = o.prod_id
                                   }).Last();

                    TextBox15.Text = selectO.val1.ToString();

                    var selectpr = from p in _readyToSave
                                   where (p.prod_id == Int32.Parse(TextBox15.Text))
                                   select p;
                    if (selectpr.Count() > 0)
                    {
                        btnAdd.Attributes.Add("onclick", "var agree=confirm('This product exist on you order! Do you want to update it???'); if (agree){document.getElementById('<%= btnUpdate%>').click();} else{document.getElementById('<%= btnDelNew %>' ).click();}");
                        //Response.Write("<script language='javascript'>alert('This product already have been added in list!!!')</script>");
                    }
                }

                ClearTheFields();
                Sum();
            }
            catch
            {
            }

        } 
```

* * *

不知道为什么，但它停止工作，不调用按钮.. btnAdd.Attributes.Add("onclick", "var agree=confirm('该产品存在于您的订单中！您要更新它吗？？？ '); 如果（同意）{document.getElementById('" + btnUpdate.ClientID + "').click();} else{document.getElementById('" + btnDelNew.ClientID + "').click();} "); 谁能帮我？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:35:50.630

尝试使用 ClientId 属性

```
btnAdd.Attributes.Add("onclick", "var agree=confirm('This product exist on you order! Do you want to update it???'); if (agree){document.getElementById('<%= btnUpdate.ClientId%>').click();} else{document.getElementById('<%= btnDelNew.ClientId %>' ).click();}"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:51:58.847

I'm answering this without a real knowledge of GridViews, but my gut feeling is that you're literally sending the text `<%=btnUpdate%>` (or `<%=btnUpdate.ClientID%>`) to the browser.

What I think you need to do is change the line starting with...

```
btnAdd.Attributes.Add("onclick"... 
```

To...

```
btnAdd.Attributes.Add("onclick", "var agree=confirm('This product exist on you order! Do you want to update it???'); if (agree){document.getElementById('" + btnUpdate.ClientID + "').click();} else{document.getElementById('" + btnDelNew.ClientID + "' ).click();}"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:35:57.967

您将按钮名称定义为`<%= btnUpdate%>`和`<%= btnDelNew %>`。它们应该被定义为`<%= btnUpdate.ClientID %>`和`<%= btnDelNew.ClientID %>`。

更新：如果freefaller的直觉是正确的（我没有测试过上面的），那么添加`onclick`属性如下：

```
btnAdd.Attributes.Add("onclick", "var agree=confirm('This product exist on you order! Do you want to update it???'); if (agree){document.getElementById('" + btnUpdate.ClientID + "').click();} else{document.getElementById('" + btnDelNew.ClientID + "' ).click();}"); 
```

# dynamics-crm-2011 - FlyoutAnchor 子菜单项中的图像 – CRM 2011 功能区

> ID：11154490
> 
> 赞同：1
> 
> 时间：2012-06-22T10:29:37.280
> 
> 标签：dynamics-crm-2011, ribbon

是否可以在 FlyoutAnchor 子菜单中的项目旁边显示图像？

我尝试对子菜单中的 Button 元素使用与常规元素相同的属性，但它对我不起作用。

有任何想法吗？谢谢

```
 <FlyoutAnchor Id="myFlyoutOtherAct"
                        ToolTipTitle="$Resources:Ribbon.HomepageGrid.Add.Related.OtherActivities" ToolTipDescription=""
                        LabelText="$Resources:Ribbon.HomepageGrid.Add.Related.OtherActivities" Alt="$Resources:Ribbon.HomepageGrid.Add.Related.OtherActivities" 
                        Sequence="80" 
                        Command="Mscrm.Enabled" 
                        Image16by16="/_imgs/ribbon/customactivity_16.png" Image32by32="/_imgs/ribbon/customactivity_32.png"                            
                        TemplateAlias="c9">
            <Menu Id="myMenuOtherAct">
              <MenuSection Id="myMenuSectOtherAct" 
                           Title="OtherActivities" 
                           Sequence="15">
                <Controls Id="myControlsOtherAct">
                  <Button Id="myButtonLetter" Command="Mscrm.CreateLetter" 
                          ToolTipTitle="{!EntityDisplayName:letter}" ToolTipDescription="" LabelText="{!EntityDisplayName:letter}" Alt="{!EntityDisplayName:letter}" 
                          **Image16by16="/_imgs/ribbon/entity16_4207.png" Image32by32="/_imgs/ribbon/entity32_4207.png"**
                          TemplateAlias="isv" Sequence="10"/> 
```

...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:54:58.617

是的，有可能。您需要将 的 设置为`DisplayMode`您`MenuSection`想要的值。

[菜单部分（RibbonDiffXml）](http://msdn.microsoft.com/en-us/library/gg334378.aspx)

```
<MenuSection Id="myMenuSectOtherAct"
             Title="OtherActivities"
             Sequence="15"
             DisplayMode="Menu16"> 
```

# .net - SOAP 无效字符

> ID：11154491
> 
> 赞同：1
> 
> 时间：2012-06-22T10:29:45.143
> 
> 标签：.net, xml, web-services, jaxb, xml-serialization

我正在从 Java (JaxB) 客户端连接到 .NET WebService。我试图在其中一个对象的字段中传递一个类似 SQL 的字符串。对象的其他字段似乎可以序列化。由于某种原因，此 SQL 查询导致服务器抛出异常。

这是通过网络发送的有效负载的内容...

> uniquedata.name='2012' OR extract(epoch from (uniquedata.createdDate - to_timestamp('2012', 'YYYY/MM/DD HH/MI/SS')) < 24 * 60 * 60 OR extract(epoch from (uniquedata .modifiedDate - to_timestamp('2012', 'YYYY/MM/DD HH/MI/SS')) < 24 * 60 * 60

有趣的是 < 转义序列的存在。

> javax.xml.ws.soap.SOAPFaultException：服务器无法读取请求。---> XML 文档中存在错误 (1, 1073)。---> 过滤字符串包含无效字符：uniquedata.name='2012' OR extract(epoch from (uniquedata.createdDate - to_timestamp('2012', 'YYYY/MM/DD HH/MI/SS')) < 24 * 60 * 60 或提取（从 (uniquedata.modifiedDate - to_timestamp('2012', 'YYYY/MM/DD HH/MI/SS')) < 24 * 60 * 60

异常表明这些已正确转义。不过，我希望这些是罪魁祸首。所以我尝试将 (1,1073) 索引与原始请求相关联，但它与原始数据包没有任何相似之处。我什至尝试取消转义 < 符号，删除 xml 标头，soap 信封等，但没有运气。

任何想法接下来要尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:52:20.000

Turns out that the query was being sent correctly, and that it was code within the service that was throwing the error.

# java - Web 应用程序项目中的 Eclipse 包资源管理器错误

> ID：11154496
> 
> 赞同：0
> 
> 时间：2012-06-22T10:30:08.763
> 
> 标签：java, eclipse, google-app-engine, jsp, servlets

我正在关注谷歌关于“使用 java 的谷歌应用引擎”的教程，并尝试制作一个简单的网络应用程序。但是我在war目录中创建JSP文件时遇到问题。这是教程页面：[https ://developers.google.com/appengine/docs/java/gettingstarted/usingjsps](https://developers.google.com/appengine/docs/java/gettingstarted/usingjsps)

我正在使用日食。当我在 war 目录中创建一个新的 JSP 文件时，它会导致包资源管理器中的错误。错误是：“您的项目必须配置为使用 JDK 才能使用 JSP”我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T07:32:53.383

首先，进入 Window>Preferences>Installed JREs 并选择 JDK 的 JRE。

他们将这一行添加到 eclipse.ini 中：

```
-vm C:\Program Files\Java\jdk1.7.0_45\bin\javaw.exe 
```

该行**必须**位于文件的开头，在任何 -vmargs 参数之前，否则 Eclipse 将在启动时崩溃。

最后进入系统的环境变量并将“C:\Program Files\Java\jdk1.7.0_45\bin”添加到 PATH 变量中，在“%SystemRoot%\system32”条目之前。

这三个条目必须都指向同一个 JDK，当然，必须将其更改为 JDK 的实际路径。

重新启动您的 Eclipse，您应该一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:45:32.750

在*Window - Preferences - Java - Installed JREs*中，确保您已安装 JDK，并选择它作为默认值。

# android - 我的 android 微调器看起来不太好

> ID：11154498
> 
> 赞同：1
> 
> 时间：2012-06-22T10:30:18.280
> 
> 标签：android, android-layout, spinner

我需要自定义我的 android 微调器。为此，我创建了这个 spinner_selector.xml ：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:state_window_focused="false" android:state_enabled="true"
        android:drawable="@drawable/spinner_default" />
    <item
        android:state_window_focused="false" android:state_enabled="false"
        android:drawable="@drawable/spinner_default" />
    <item
        android:state_pressed="true"
        android:drawable="@drawable/spinner_pressed" />
    <item
        android:state_focused="true" android:state_enabled="true"
        android:drawable="@drawable/spinner_focused" />
    <item
        android:state_enabled="true"
        android:drawable="@drawable/spinner_default" />
    <item
        android:state_focused="true"
        android:drawable="@drawable/spinner_focused" />
    <item
        android:drawable="@drawable/spinner_default" />
</selector> 
```

然后设置 spinner 的背景：`android:background="@drawable/spinner_selector"`

问题是微调器看起来真的很可怕。前 ：![http://i45.tinypic.com/2yjyavk.png](../Images/bf189714932d02d7c14338a235b24528.png)

后 ：

![在此处输入图像描述](../Images/3546fb0eb72fff4c92f15c4421e82d42.png)

当它被按下时，它看起来像这样：

我使用的图像是这样的：

![在此处输入图像描述](../Images/89cf28e0a8afff3f58ddb410834eb1e9.png)

如何解决这个问题？我也有这个问题`Spinner`。我真的需要定制这些组件。请帮忙。欢迎任何想法。`Button``EditText`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:22:18.980

要将文本稍微对齐，您可以`padding`在您的 XML 中使用，请给 Spinner 提供 Padding，例如：`android:padding=5dp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:36:02.847

问题似乎是 Spinner 的高度和宽度，您需要更改它，您可以提供任何静态值或使用设置图像尺寸更大的包装内容。

# asp.net - 经典 ASP 或 ASP.NET 中的 SHA1 文件哈希

> ID：11154502
> 
> 赞同：2
> 
> 时间：2012-06-22T10:30:28.653
> 
> 标签：asp.net, file, asp-classic, sha1

我有一个网站，允许用户上传文件，这些文件又存储在 Microsoft SQL 数据库中。

该数据库包含数十万张图像，并且变得难以管理。因此，我编写了一个 powershell 脚本，将这些图像从数据库中提取到文件系统，然后生成文件的 SHA1 哈希，如下所示：

$SHA1 = Get-Checksum -算法 sha1 -File ($Dest + "$i.jpg")

展望未来，我不再想将图像存储在数据库中，而是使用文件系统，但是我仍然需要生成每个文件的 SHA1 哈希值。

我一直找不到任何有关在经典 asp 或 asp.net（c# 或 vb.net）中生成 SHA1 文件哈希的文档。

**注意我特别需要知道如何生成*文件*哈希 - 而不是字符串的哈希。**

有没有其他人这样做过或知道是否或如何做到这一点？您可以提供的任何示例代码将不胜感激。

谢谢布拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:33:46.490

```
using (FileStream fs = new FileStream(@"C:\file\location", FileMode.Open))
using (BufferedStream bs = new BufferedStream(fs))
{
    using (SHA1Managed sha1 = new SHA1Managed())
    {
        byte[] hash = sha1.ComputeHash(bs);
        StringBuilder formatted = new StringBuilder(2 * hash.Length);
        foreach (byte b in hash)
        {
            formatted.AppendFormat("{0:X2}", b);
        }
    }
} 
```

`formatted`包含 SHA-1 哈希的字符串表示形式。此外，通过使用 a`FileStream`而不是字节缓冲区，`ComputeHash`计算块中的哈希，因此您不必一次性加载整个文件，这对大文件很有帮助。

[从如何在 C# 中执行 SHA1 文件校验和中](https://stackoverflow.com/questions/1993903/how-do-i-do-a-sha1-file-checksum-in-c/1993919#1993919)借用的答案`mgbowen`？

# php - 在 Wordpress 模板中的 php 表单上使用 recaptcha

> ID：11154516
> 
> 赞同：3
> 
> 时间：2012-06-22T10:31:36.420
> 
> 标签：php, wordpress, recaptcha

我正在使用以下内容将表格发送到电子邮件地址。我想合并recaptcha，但想稍微调整一下。

1）如果没有填写验证码，我希望错误弹出一个警告框。

2）如果验证码填写正确，那么它应该重新加载显示感谢消息的页面（位于下面脚本的底部）。

3）而不是检查 verify.php 文件，我希望它在这个页面上检查它。（我将操作中的永久链接替换为 verify.php 文件的链接 - 我不想这样做！）

```
 <form class="form" method="POST" action="<?php the_permalink(); ?>">
            <table border="0" style="float:left;" width="490">
                <tbody>
                    <tr>
                        <td>
                        <p>Company Name:</p>
                        </td>
                        <td>&nbsp;</td>
                        <td><input type="text" name="companyname" id="companyname" /></td>
                    </tr>
                    <tr>
                        <td>
                        <p>Your Name:</p>
                        </td>
                        <td>&nbsp;</td>
                        <td><input type="text" name="fullname" id="fullname" /></td>
                    </tr>
                    <tr>
                        <td>
                        <p>E-mail:</p>
                        </td>
                        <td>&nbsp;</td>
                        <td><input type="text" name="email" id="email" /></td>
                        <td colspan="2">&nbsp;</td>
                    </tr>
                    <tr>
                        <td>
                        <p>Telephone:</p>
                        </td>
                        <td>&nbsp;</td>
                        <td><input type="text" name="tel" id="tel" /></td>
                        <td colspan="2">&nbsp;</td>
                    </tr>
                </tbody>
            </table>

            <table border="0" style="float:left;" width="490">
                <tbody>
                    <tr>
                        <td valign="top"><p style="margin-right:47px;margin-top:7px;">Enquiry:</p></td>
                        <td><textarea name="enquiry"></textarea></td>
                    </tr>
                <tr>
                    <td>&nbsp;</td>
                    <td>
<script type="text/javascript">
function validateCaptcha()
{
    if ($('input[name="valid"]')) return true;
    if ($('input[name="recaptcha_response_field"]').val() == "")
    {
        alert("Please complete the CAPTCHA field.");
        return false
    }
    $.ajax({
        url: "http://www.medilogicuk.com/wp-content/themes/default/verify.php",
        type: "POST",
        async:"false",
        data: {
            recaptcha_response_field: $('input[name="recaptcha_response_field"]').val(),
            recaptcha_challenge_field: $('input[name="recaptcha_challenge_field"]').val()
        },
        success: function(data){
            if (data == "OK")
            {
                $('input[name="valid"]').val(1);
                $('.form').submit();
            }
            else
            {
                alert(data);
            }
        },
        error: function(){
            alert("An error occured, please try again later");
        }
    });
    return false;
};
</script>

                <?php require_once('recaptchalib.php');
  $publickey = "(my key)"; // you got this from the signup page
  echo recaptcha_get_html($publickey);
?>
                    </td>
                </tr>    
                    <tr>
                        <td colspan="2"><button type="submit" name="submit" value="Send message">Send message</button></td>
                    </tr>
                </tbody>
            </table>        

        <? if(isset($_POST['submit'])) { 

        $to = "(my email)";
        $header = 'From: (company email)';
        $subject = "Website enquiry";
        $companyname_field = $_POST['companyname'];
        $fullname_field = $_POST['fullname'];
        $email_field = $_POST['email'];
        $tel_field = $_POST['tel'];
        $enquiry_field = $_POST['enquiry'];

        $body = "Hello,\n\n You have an enquiry from the website, please see the details below:\n\n Name: $fullname_field\n Company Name: $companyname_field\n E-Mail: $email_field\n Tel: $tel_field\n Message:\n $enquiry_field\n\n Please reply to the enquiry asap.\n\n Kind Regards \n";

        mail($to, $subject, $body, $header);

        echo "</br><p style=\"color:#e41770!IMPORTANT;\">Thank you for getting in touch, we will contact you shortly.</p>";

        } ?>
        </form> 
```

这是在我的 verify.php 文件中：

```
<?php
  require_once('recaptchalib.php');
  $privatekey = "(my key)";
  $resp = recaptcha_check_answer ($privatekey,
                                $_SERVER["REMOTE_ADDR"],
                                $_POST["recaptcha_challenge_field"],
                                $_POST["recaptcha_response_field"]);

if (!$resp->is_valid) 
{
    die ("The reCAPTCHA wasn't entered correctly. Go back and try it again. (reCAPTCHA said: " . $resp->error . ")");
} 
else 
{
    echo "OK";
}
  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:35:12.397

表格更改

```
<form class="form" method="POST" action="index.php" onsubmit="return validateCaptcha()">
<input type="hidden" name="valid" value="0" /> 
```

表格下方

```
<script type="text/javascript">
function validateCaptcha()
{
    if ($('input[name="valid"]')) return true;
    if ($('input[name="recaptcha_response_field"]').val() == "")
    {
        alert("Fill in the captcha field");
        return false
    }
    $.ajax({
        url: "verify.php",
        type: "POST",
        async:"false",
        data: {
            recaptcha_response_field: $('input[name="recaptcha_response_field"]').val(),
            recaptcha_challenge_field: $('input[name="recaptcha_challenge_field"]').val()
        },
        success: function(data){
            if (data == "OK")
            {
                $('input[name="valid"]').val(1);
                $('.form').submit();
            }
            else
            {
                alert(data);
            }
        },
        error: function(){
            alert("An error occured, please try again later");
        }
    });
    return false;
};
</script> 
```

验证.php

```
if (!$resp->is_valid) 
{
    die ("The reCAPTCHA wasn't entered correctly. Go back and try it again. (reCAPTCHA said: " . $resp->error . ")");
} 
else 
{
    echo "OK";
} 
```

# clojure - 调用（.write 套接字数据）时出现 NullPointer 异常

> ID：11154518
> 
> 赞同：1
> 
> 时间：2012-06-22T10:31:53.430
> 
> 标签：clojure, nullpointerexception, irc

我正在编写一个简单的 IRC 机器人来尝试了解有关 Clojure 的更多信息，使用标准 Java 套接字和循环来读取/解析数据，但是当我尝试在 MOTD 结束消息之后发送 JOIN 消息时得到一个空指针原因。

这是我的代码..

```
(use 'clojure.java.io
'[clojure.string :as s :only (split)])

(def sock (java.net.Socket. "iris.archivesmc.com" 6667))

(def write-stream (writer sock))
(def read-stream  (reader sock))

(defn write [message]
    (.write write-stream (str message "\r\n"))
    (println (str "-> " message))
    (.flush write-stream)
)

(defn parseMessage [buffer]
    (if
        (= (apply str (take-last 2 buffer)) "\r\n" )
        (do
            (let [parts (split buffer #"\s")]
                (println (s/replace buffer "\r\n" ""))
                (when
                    (= (first parts) "PING")
                    ;; We need to PONG to this or we'll ping out
                    (write (str "PONG " (second parts)))
                )
                (when
                    (= (apply str(take 1 (first parts))) ":" )
                    ;; Message with a numerical prefix
                    ;; :server numeric our-nick message
                    (
                        (if
                            (= (second parts) "376")
                            ;; MOTD end
                            ;; Join #clojure
                            (write "JOIN #clojure") ;; This errors for some reason
                        )
                    )
                )
            )
            ""
        )
        buffer
    )
)

(defn readLoop []
    (loop [buffer ""]
        ;;(println (str "Looping.. -> " buffer))
        (let [nbuf (parseMessage buffer)
              nchr (.read read-stream)  ]
            (if-not (= nchr -1)
                (recur (str nbuf (char nchr)))
            )
        )
    )
)

(write "NICK gClojureTestBot")
(write "USER Clojure Imma Bot :Clojure Testing Bot")
(readLoop) 
```

这是我的输出（带有回溯等）

```
/usr/lib/jvm/jdk1.7.0_04/bin/java -Didea.launcher.port=7542 -Didea.launcher.bin.path=/home/gcoles/Downloads/idea-IC-117.418/bin -Dfile.encoding=UTF-8 -classpath /usr/lib/jvm/jdk1.7.0_04/jre/lib/resources.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/javaws.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/jfr.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/jsse.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/deploy.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/management-agent.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/jce.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/charsets.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/plugin.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/rt.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/ext/sunec.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/ext/sunjce_provider.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/ext/zipfs.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/ext/dnsns.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/ext/localedata.jar:/usr/lib/jvm/jdk1.7.0_04/jre/lib/ext/sunpkcs11.jar:/home/gcoles/IdeaProjects/ClojureBot/classes:/home/gcoles/clojure/clojure-1.4.0/clojure-1.4.0.jar:/home/gcoles/IdeaProjects/ClojureBot/src:/home/gcoles/IdeaProjects/ClojureBot/test:/home/gcoles/Downloads/idea-IC-117.418/lib/idea_rt.jar com.intellij.rt.execution.application.AppMain clojure.main /home/gcoles/IdeaProjects/ClojureBot/src/main.clj
-> NICK gClojureTestBot
-> USER Clojure Imma Bot :Clojure Testing Bot
PING :5D2E1C22
-> PONG :5D2E1C22
:iris.archivesmc.com 001 gClojureTestBot :Welcome to the archivesmc.com IRC Network gClojureTestBot!~Clojure@213.190.134.190
Exception in thread "main" java.lang.NullPointerException
    at user$parseMessage.invoke(main.clj:35)
    at user$readLoop.invoke(main.clj:49)
    at user$eval10.invoke(main.clj:60)
    at clojure.lang.Compiler.eval(Compiler.java:6511)
    at clojure.lang.Compiler.load(Compiler.java:6952)
    at clojure.lang.Compiler.loadFile(Compiler.java:6912)
    at clojure.main$load_script.invoke(main.clj:283)
    at clojure.main$script_opt.invoke(main.clj:343)
    at clojure.main$main.doInvoke(main.clj:427)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.lang.Var.invoke(Var.java:415)
    at clojure.lang.AFn.applyToHelper(AFn.java:161)
    at clojure.lang.Var.applyTo(Var.java:532)
    at clojure.main.main(main.java:37)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

Process finished with exit code 1 
```

我觉得这很奇怪，因为以前的调用`write`都有效。再说一次，作为一个 Clojure（和 Java）菜鸟，我可能做了一些愚蠢的事情。

有人有什么想法吗？

编辑：以防万一，我使用的是 Java 7 和 Clojure 1.4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:05:55.020

问题出在以下代码块上。

```
 (when
                (= (apply str(take 1 (first parts))) ":" )
                ;; Message with a numerical prefix
                ;; :server numeric our-nick message
                (
                    (if
                        (= (second parts) "376")
                        ;; MOTD end
                        ;; Join #clojure
                        (write "JOIN #clojure") ;; This errors for some reason
                    )
                )
            ) 
```

具体来说，`()`围绕`(if)`声明翻了一番。括号太多。删除多余的解决了这个问题。

# php - 几秒钟后如何在没有元 http-equiv=REFRESH CONTENT=time 的情况下在 PHP 中重定向页面

> ID：11154523
> 
> 赞同：18
> 
> 时间：2012-06-22T10:32:14.307
> 
> 标签：php, redirect, header, refresh, meta-tags

似乎不建议使用

```
<meta http-equiv=REFRESH CONTENT=3;url=url> 
```

用于重定向，而是使用

```
header('Location: url') 
```

但是，我想向用户显示一些消息，并让他们在重定向之前有时间阅读它。有没有办法在没有元的情况下做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-22T10:36:09.407

尝试使用“刷新”标题：

```
header('Refresh: 3;url=page.php'); 
```

此外，您可以查看此 Question [Refresh HTTP Header](https://stackoverflow.com/questions/283752/refresh-http-header)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-22T10:42:59.660

使用元刷新标签没有任何问题。

```
<meta http-equiv="refresh" content="5;URL='http://example.com/'" /> 
```

该标签显示等待 5 秒并重定向到 example.com。这个标签不是问题，除非用户使用 IE6 并且它仍然有效，只是破坏了历史按钮。

使用 JavaScript 是一个选项，但**请确保包含一个链接，上面写着**“如果您没有被自动重定向，请单击此处”。无论哪种方式，您实际上都应该包含该链接。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-22T10:39:06.250

php 设置标题的方式，将在 5 秒内将您重定向到 test.php：

```
header( "refresh:5;url=test.php" ); 
```

在发送任何实际输出之前调用。

在javascript中：

```
setTimeout(function () {
   window.location.href= url; // the redirect goes here
},5000); // 5 seconds 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-22T10:38:19.897

标题标签在页面加载时发送到浏览器，以便它可以快速将用户重定向到所需的页面，而无需费心呈现它甚至将其加载到历史记录中。因此，一旦页面已经加载，您就不能调用重定向，因为标题已经被处理。

您可以改为执行此操作：

```
header( "refresh:5;url=wherever.php" ); 
```

这基本上将`<meta>`标签设置在页面本身的标题中，这意味着您不需要写出标签。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-23T05:40:13.117

按照你们的说法，理论上这应该可行：

网址：[http ://www.example.com/ticketgen/index.php?success=1&redir=1](http://www.example.com/ticketgen/index.php?success=1&redir=1)

```
 <?php
 $myredir = ($_GET['redir']);
    if ($myredir == 1)
    {
        header( "refresh:5;url=http://www.example.com/ticketgen/" );
    }
?> 
```

但它什么也没做。我也有它在页面的顶部，所以它可以发送标题。

我刚刚发现它在 Firefox 中不起作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-22T10:34:50.557

你可以用一小段javascript来做到这一点：

```
<script type="text/javascript" language="JavaScript">location.href = 'otherpage.php';</script> 
```

当然，这取决于启用 JavaScript 的人。

显然，要设置延迟，您可以使用 setTimeout 之类的方法：

```
<script type="text/javascript" language="JavaScript">
    setTimeout(function () {
                      location.href = 'stackoverflowhelp.php'; 
               }, 5000);
</script> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-06T11:47:26.740

我认为最好的方法就是`header("Refresh: 10;url=../index.php");` 像我所做的那样。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-06-26T16:16:25.667

[https://codingislove.com/redirect-pages-php/](https://codingislove.com/redirect-pages-php/)

查看上面的文章，他们清楚地解释了如何通过设置时间在 PHP 中重定向页面。

**未设置时间的重定向代码：** header('location:URL ADDRESS');

**设置三秒时间的重定向代码：** header('refresh:3; url=URL ADDRESS');

# sql - 人类可读数字输出大于 3.1223E+10

> ID：11154525
> 
> 赞同：1
> 
> 时间：2012-06-22T10:32:23.787
> 
> 标签：sql

我怎样才能得到一个人类可读的数字而不是`3.1223E+10`下面的输出？

```
SQL> select file_name, bytes, autoextensible, maxbytes from
dba_data_files where tablespace_name='ATL_DB';
2
FILE_NAME
--------------------------------------------------------------------------------
BYTES AUT MAXBYTES
---------- --- ----------
/d/db/oradata/atl/atl_db02.dbf
3.1223E+10 YES 3.2212E+10 
```

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:39:20.363

试试这个设置：

```
 set numwidth 20 ;
 select .... 
```

# http - 当tomcat停止时请求会发生什么

> ID：11154533
> 
> 赞同：15
> 
> 时间：2012-06-22T10:33:04.673
> 
> 标签：http, tomcat, servlets, request

当您以“正常”方式停止或重新启动 tomcat 时，正在处理的 http 请求会发生什么？它们会被处理直到响应完成还是http线程被中断？有没有办法配置优雅停止？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-22T10:51:09.147

Tomcat 支持`unloadDelay`等待配置的时间来卸载 servlet。

这应该配置`context.xml`如下：

```
<context unloadDelay="10000"> 
```

参考：

*   [上下文配置指南](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)
*   [Tomcat 的 unloadDelay 属性](http://autodidatastech.blogspot.in/2011/04/tomcat-unloaddelay-attribute.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:38:15.153

IT 只是终止请求并断开请求-响应链接。你得到..

无法连接

```
 Browser can't establish a connection to the server at Host:port.

  The site could be temporarily unavailable or too busy. Try again in a few moments.
  If you are unable to load any pages, check your computer's network connection.
  If your computer or network is protected by a firewall or proxy, make sure that Browser is permitted to access the Web. 
```

那是不能处理的。

# lua - 在适用于 ipad 和 iphone 的 corona sdk 中调整图像大小

> ID：11154536
> 
> 赞同：0
> 
> 时间：2012-06-22T10:33:11.070
> 
> 标签：lua, coronasdk

在 corona sdk 中是否有可能我们为特定应用程序编写一个代码，它可以在 ipad 和 iphone 上运行，而无需分别更改两个设备的对象坐标和图像大小？可以通过display.contentHeight和display.contentWidth实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T08:38:36.417

泥基本是对的。通过设置内容的宽度/高度，Corona SDK 将自动在 iPhone / iPad (+retina) 屏幕上绘制和缩放您的应用程序。考虑它的最佳方法是在 320x480 屏幕上设计您的应用程序 - 然后提供该屏幕尺寸的图像。然后为更大的屏幕创建第二组图像。通过使用 Corona 的 display.newImageRect()，它将为 iPhone 加载小图像，然后在 iPad/视网膜显示器上加载较大的分辨率图像。

看看这篇文章：http: [//developer.anscamobile.com/forum/2012/03/12/understanding-letterbox-scalling](http://developer.anscamobile.com/forum/2012/03/12/understanding-letterbox-scalling)

你的 config.lua 应该是这样的：

```
application = {
    content = {
        width = 320,
        height = 480,
        scale = "letterbox",
        xAlign = "center",
        yAlign = "center",

        imageSuffix = {
            ["@2x"] = 2
            ["@4x"] = 4
        },
    },
} 
```

当您调用 display.contentHeight 和 display.contentWidth 时，您只是从 config.lua 文件中读取这些值。如果我需要进行任何特定的定位计算，我倾向于使用一些全局变量。在你的 main.lua 中定义这些：

```
screenWidth = display.contentWidth - (display.screenOriginX*2)
screenHeight = display.contentHeight - (display.screenOriginY*2)
screenTop = display.screenOriginY
screenRight = display.contentWidth - display.screenOriginX
screenBottom = display.contentHeight - display.screenOriginY
screenLeft = display.screenOriginX
screenCenterX = display.contentWidth/2
screenCenterY = display.contentHeight/2 
```

例如：

```
companyLogo = display.newImageRect("companyLogo.png",64,64) 
```

您将需要 1 张名为 companyLogo.png 的 64x64px 图像。这将适用于 < iPhone 4。然后您需要一个名为 companyLogo@2x.png 的 128x128px 图像。Corona 将在 iPhone 4 和 iPad 上自动使用它。同样，另一个名为 companyLogo@4x.png 的 256x56 图像将用于 iPad 3 视网膜显示屏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:38:50.317

是的，这是可能的。例如，如果您的应用程序是为 640x480 编写的，您可以通过告诉它您希望它在文件中*如何缩放来让它自动缩放到其他分辨率：*`config.lua`

```
application =
{
        content =
        {
                width = 640,
                height = 480,
                scale = "letterbox"
        },
} 
```

[更多信息。](http://developer.anscamobile.com/content/configuring-projects#Dynamic_Content_Scaling)

# jquery - “CSS3”上的动画旋转

> ID：11154540
> 
> 赞同：3
> 
> 时间：2012-06-22T10:33:32.720
> 
> 标签：jquery, html, css

如果我在 CSS3 中有这个[框](http://jsfiddle.net/fud4n/2/)（据我所知，这不是 CSS3，只是特定于浏览器）：

# HTML

```
<div id="container">
    <div id="box">&nbsp;</div>
</div>    ​ 
```

# CSS

```
#container
{
    padding:100px;
}

#box
{
    width:200px;
    height:200px;
    background-color:red;
}

#box.selected
{
    transform: rotate(30deg);
    -ms-transform: rotate(30deg); /* IE 9 */
    -webkit-transform: rotate(30deg); /* Safari and Chrome */
    -o-transform: rotate(30deg); /* Opera */
    -moz-transform: rotate(30deg); /* Firefox */        
}
​ 
```

# jQuery（仅用于管理框上的悬停）

```
$('#box').hover(
    function () {
        $(this).addClass('selected');
    },
    function () {
        $(this).removeClass('selected');
    }
); 
```

如何为该 CSS 旋转设置动画？我的意思是，不是一步，而是流畅。所以运动应该是“有生命的”。希望你明白我的意思:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T10:36:27.297

假设您只想将动画应用于转换，您可以使用 CSS3 转换，特别是`transition-property`（定义哪些属性将具有转换）和`transition-duration`（指定从开始到完成的转换持续时间）。还有`transition-timing-function`，它允许您使用以下任何一种转换模式：`linear|ease|ease-in|ease-out|ease-in-out|cubic-bezier(n,n,n,n)`

```
#box
{
    width:200px;
    height:200px;
    background-color:red;
    transition-property: all;
    transition-duration: 0.3s;
    /* Explicit above, can also use shorthand */
    -o-transition: all 0.3s;
    -moz-transition: all 0.3s;
    -webkit-transition: all 0.3s;
    -ms-transition: all 0.3s;
    /* Also shorthand with the easing-function */
    -ms-transition: all 0.3s linear;
} 
```

请参阅我对您的 jsfiddle 的修订 -> [http://jsfiddle.net/fud4n/9/](http://jsfiddle.net/fud4n/9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:37:24.970

您可以像这样使用[CSS 过渡](http://css3.bradshawenterprises.com/transitions/)：

```
-webkit-transition: all 1s ease-in-out;
-moz-transition: all 1s ease-in-out;
-o-transition: all 1s ease-in-out;
-ms-transition: all 1s ease-in-out;
transition: all 1s ease-in-out; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:50:10.737

这是您要执行的操作：

[http://jsfiddle.net/fud4n/18/](http://jsfiddle.net/fud4n/18/)

重要的是要记住，要设置动画的元素的类/id 中的 origin 和 transition 属性，而不是表示动画状态的类。

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:50:01.123

像这样使用 CSS3 动画：http: [//jsfiddle.net/fud4n/15/](http://jsfiddle.net/fud4n/15/)（仅针对 firefox 给出的示例）。这将执行连续旋转，只需根据您的喜好更改持续时间。

```
#box.selected {    
    -moz-animation-name: rotation;  
    -moz-animation-duration: 2s;  
}

@-moz-keyframes rotation {
    from {  -moz-transform: rotate(0deg);  }      
    to   {  -moz-transform: rotate(30deg);  }
} 
```

# java - 获取安卓IP进行P2P连接

> ID：11154542
> 
> 赞同：2
> 
> 时间：2012-06-22T10:33:34.987
> 
> 标签：java, android, networking, network-programming, p2p

是否有可能获得Android手机的IP进行P2P连接，实际上我想通过Sockets连接两部Android手机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:05:12.107

我相信您需要一个中央服务器来帮助发现对等点。这还不是全部，甚至获得 IP 可能还不够，您必须解决诸如网络遍历之类的问题 ..这可能有助于[Android：NAT 遍历？](https://stackoverflow.com/questions/10367727/android-nat-traversal)

# sql - Cassandra CQL - NoSQL 或 SQL

> ID：11154547
> 
> 赞同：13
> 
> 时间：2012-06-22T10:34:09.573
> 
> 标签：sql, nosql, cassandra

我对 Cassandra 很陌生，一周前才开始学习 Cassandra。我第一次读到它是 NoSQL，但是当我开始使用 CQL 时，我开始怀疑 Cassandra 是 NoSQL 还是 SQL DB？

***有人可以解释为什么 CQL 或多或少像 SQL 吗？***

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-10-02T15:21:43.293

CQL 像 SQL 一样是声明性的，语言的查询组件的非常基本的结构（选择条件的东西）是相同的。但是有足够的差异，人们不应该以与传统 SQL 相同的方式使用它。

显而易见的项目： 1\. 没有连接或子查询。2\. 没有交易

不太明显但同样重要的是要注意：

1.  除主键外，如果您已在该列上创建了索引，则只能对该列应用 WHERE 条件。在 SQL 中，您不必索引列以对其进行过滤，但在 CQL 中，select 语句将彻底失败。
2.  没有 OR 或 NOT 逻辑运算符，只有 AND。对数据进行建模非常重要，因此您不需要这两个；很容易不小心忘记。
3.  日期处理完全不同。CQL 只允许对时间戳使用相等运算符，因此像这样极其常见和有用的表达式不起作用：`where dateField > TO_TIMESTAMP('2013-01-01','YYYY-MM-DD')` 此外，CQL 不允许将日期的字符串插入精确到毫秒（仅秒）——但它确实允许从纪元开始输入毫秒作为long int - 大多数其他数据库引擎不允许这样做。最后，对于没有时区的长毫秒和字符串格式，时区（作为 GMT 偏移量）是不可见的。对于那些故意不将本地时间 + GMT 偏移量混为一谈的系统，这可能会导致混淆。
4.  您只能根据主键（或主键的 IN 列表）更新表。您不能根据其他列数据进行更新，也不能像这样进行大规模更新：`update table set field = value;` CQL 需要带有主键的 where 子句。
5.  AND 的语法不允许使用括号。公平地说，由于缺少 OR 运算符，这不是必需的，但这意味着在表达式周围添加“保护性”括号的传统 SQL 重写器不适用于 CQL，例如：`select * from www where (str1 = 'foo2') and (dat1 = 12312442);`

一般来说，最好将 Cassandra 用作一个大的、有弹性的数据永久存储，可以应用少量非常高级、非常高性能的查询来拖出数据子集以在应用程序层使用。该子集可能是 100 万行，是的。CQL 和 Cassandra 模型不适用于 2 页长的带有嵌入案例、聚合等的 SELECT 语句。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T11:10:15.543

[CQLV3.0 的文档](http://www.datastax.com/docs/1.1/references/cql/index)

[CQL DESCRIBE](http://www.datastax.com/docs/1.1/references/cql/DESCRIBE)获取`keyspace`, `column family`,的模式`cluster`

CQL 不支持我在 SQL 中知道的一些东西，比如`joins` `group by` `triggers` `cursors` `procedure` `transactions` `stored procedures`

CQL3.0 支持[`ORDER BY`](http://www.datastax.com/docs/1.1/references/cql/SELECT)

CQL 支持所有 DML 和 DDL 功能

CQL 支持`BATCH`

> ```
> BATCH is not an analogue for SQL ACID transactions. 
> ```

只是上面提到的 DOC 是最好的参考 :)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-22T15:05:40.857

出于所有意图和目的，CQL*是*SQL，因此从最严格的意义上讲，Cassandra*是*一个 SQL 数据库。但是，大多数人将 SQL 与其通常应用的[关系数据库紧密联系在一起。](http://en.wikipedia.org/wiki/Relational_database)在这种（错误）解释下，Cassandra 不应被视为“SQL 数据库”，因为它不是关系型的，并且不支持[ACID](http://en.wikipedia.org/wiki/ACID)属性。

# ios - iOS SDK AVFoundation ...我如何用绘图资产组合视频资产

> ID：11154554
> 
> 赞同：6
> 
> 时间：2012-06-22T10:35:05.763
> 
> 标签：ios, video, sdk, avfoundation, composition

到目前为止我所取得的成就：

使用 AVFoundation 服务，我在 UIView 中放置了一个视频，用户可以播放、暂停等（使用 AVPlayer、AVPlayerItem、AVPlayerLayer 等）

我在应该显示正在播放的视频的视图顶部放置了一个 UIView（具有透明/清晰的背景颜色）。我还处理了 UIKit 触摸事件以根据用户交互绘制线条。

现在，当我播放视频并触摸覆盖在该视图上的 UIView 时，我可以看到在播放视频上绘制的线条。

我想做的事：

在用户完成绘图（他认为它覆盖在视频上）之后，我希望我的应用程序可以合成原始视频以及用户交互（绘制、删除线条等）并将结果导出为另一个视频文件.

任何帮助或示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-20T19:22:30.767

要将内容组合在一起，请查看[`AVVideoCompositionCoreAnimationTool`](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVVideoCompositionCoreAnimationTool_Class/Reference/Reference.html). `CALayer`它允许您使用对象将动画添加到电影中。

对于导出，一旦您构建了合成并`CALayer`一起渲染，您可以将其直接传递给将`AVAssetExportSession`其写入视频文件的一个。

# android - 在android中更改方向时音频播放错误

> ID：11154556
> 
> 赞同：0
> 
> 时间：2012-06-22T10:35:18.113
> 
> 标签：android, audio, orientation

我开发了一个根据页面播放音频的图书阅读器应用程序，但是当我启动应用程序时，我的第一页音频在该音频播放期间正在运行，我改变了当时音频重新启动和先前音频也在运行的方向，并且屏幕具有两种方向布局。一个是布局，另一个是 layout-land layout.xml 文件，当我在清单文件中应用 configChanges 时，我的 layout-land 无法应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:48:50.870

这是因为您必须在活动中实现该`onOrientationChange`方法。同样必须应用于活动的清单文件

```
android:configChanges="orientation|keyboardHidden" 
```

在`onOrientationChange`方法。获取当前播放位置并将其提供给媒体播放器对象并再次播放。

通过这样做，它不会创建媒体播放器的新对象并使用与当前位置相同的对象。

# redis - 使用 Redis 计算过去 24 小时的事件数

> ID：11154563
> 
> 赞同：6
> 
> 时间：2012-06-22T10:35:38.357
> 
> 标签：redis

似乎，这是常见的任务，但我还没有找到解决方案。

我需要计算过去 24 小时内用户的事件数（例如，他留下了多少评论）。旧数据对我来说不感兴趣，因此应该从 Redis 中删除有关一个月前添加的评论的信息。

现在我只看到一种解决方案。我们可以制作包含用户 ID 和时间的键，增加它的值。然后我们将得到 24 个值并计算它们的总和。每个密钥都有 24 小时的有效期。

例如，

1.  6 月 22 日 13:27 的事件 -> 创建密钥 _22_13 = 1
2.  6 月 22 日 13:40 的事件 -> 递增键 _22_13 = 2
3.  事件发生在 6 月 22 日 18:45 -> 创建密钥 _22_18 = 1
4.  6 月 23 日 16:00 的事件 -> 创建密钥 _23_16 = 1
5.  在 6 月 23 日 16:02 获取事件总和 -> 密钥总和 _22_17 - _22_23、_23_00 - _23_16：在我们的密钥中，只有 _22_18 和 _23_16，结果为 2。密钥 _22_13 和 _22_13 已过期。

这种方法不准确（它计算每 24+0..1 小时的事件数）并且不是那么普遍（如果我需要每过去 768 分钟或 2.5 个月的事件数，我将选择什么键？）。

您对 Redis 数据类型有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T11:06:50.643

你的模型看起来不错。当然，它不是通用的，但它是你必须牺牲的东西才能表现出色。

我建议你继续这样做。如果您需要另一个报告时间跨度（768 分钟），您始终可以从存储您的评论的 mysql 中获取此信息（您这样做，对吗？）。这会更慢，但至少会提供查询。

如果您需要更快的响应或更高的精度，您可以将计数器以分钟分辨率（每分钟一个计数器）存储在 redis 中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T10:54:49.847

您可以在每次创建密钥后使用 redis EXPIRE 查询。

```
SET comment "Hello, world"
EXPIRE comment 1000 // in seconds
PEXPIRE comment 1000 // in milliseconds 
```

详情[在这里](http://redis.io/commands/expire)。

# ibm-mq - 如何测试发布到 Websphere MQ 的程序

> ID：11154564
> 
> 赞同：4
> 
> 时间：2012-06-22T10:35:38.930
> 
> 标签：ibm-mq

我有一个通过 MQAX200 接口将数据发布到 IBM Websphere MQ 的程序。我正在努力弄清楚如何测试它。

设置应用程序以使用队列中的消息并确认它们正确的最简单方法是什么？我目前在这里没有任何 MQ 基础架构（在客户端的站点上）。

我需要消息代理吗？有没有开源实现？或者我是否需要购买 Websphere MQ，在这种情况下，我需要的最低许可证是多少？

谢谢

本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T10:51:33.080

As your application is written using a MQ interface, you need MQ to test. If it's just for testing, you can use the [trial](http://www.ibm.com/developerworks/downloads/ws/wmq/) version of MQ.

As far as I know MQAX200 interface supports only P2P messaging and not Publish/Subscribe messaging. So using your application put message to a queue and then use the application like `amqsget`to receive message.

You don't need message broker.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T01:25:37.080

首先，您需要澄清您正在尝试做什么。如果您要发布消息，那么您的测试程序将需要订阅。如果您将消息放入队列，那么您的测试程序将需要从同一个队列中获取消息。

[WMQ 试用版下载](http://www.ibm.com/developerworks/downloads/ws/wmq/)将为您免费提供 90 天的 WMQ 许可证。试用代码包括服务器和客户端库，因此您可以设置 QMgr，然后根据需要在客户端或绑定模式下测试您的程序。如果您选择安装示例代码，您还将获得可以测试的编译二进制文件。例如，`amqsget`获取消息和`amqssub`订阅主题，两者都使用绑定模式（共享内存）。这些 (`amqsgetc`和`amqssubc`) 的客户端版本通过网络连接。如果您使用主题，请确保在发布*之前*订阅。如果使用队列，请确保`GET` *在*您之后`PUT`。

其他有用的程序包括`amqsgbr`浏览队列上`amqsbcg`的消息，并将十六进制转储消息并解析消息头。此外，WMQ Explorer 附带了 Windows 和 Linux 版本的试用版，您可以使用它来浏览、订阅或获取消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T14:41:45.337

只需编写一个订阅主题的简单 Java JMS 程序。那么您只需要安装免费的 WebSphere MQ 客户端。

[这篇文章](http://hursleyonwmq.wordpress.com/2007/05/29/simplest-sample-applications-using-websphere-mq-jms/)有点旧，但应该做。

# google-chrome-extension - 对于 chrome.idle.queryState，thresholdSeconds 参数是什么意思？

> ID：11154566
> 
> 赞同：0
> 
> 时间：2012-06-22T10:35:43.037
> 
> 标签：google-chrome-extension, chromium

关于：[http ://code.google.com/chrome/extensions/idle.html](http://code.google.com/chrome/extensions/idle.html)

是`thresholdSeconds`：

1) 坚持只有在系统处于非活动状态一段时间（比如 15 秒）时才调用回调。如果是这样，这对“活动”和“锁定”状态来说不可能意味着任何明智的事情吗？它可以？这些会被调用吗？

2) 作为阈值间隔加倍的轮询间隔？所以这会每 15 秒发生一次，并说在最后 15 秒内状态是某某。

3）一些我不熟悉的行为？

无论如何，我认为这里的文档很差，应该修复。测试这类事情很费力，有时会根据期望给你误导性的结果，所以我更喜欢权威的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:01:00.357

好的，我认为我的困惑在于该方法的异步性质。它会立即返回，并且本身不是轮询器。

# java - 如果在根上下文中声明，为什么 spring-ws 不会检测到 spring 配置文件。

> ID：11154569
> 
> 赞同：0
> 
> 时间：2012-06-22T10:35:46.637
> 
> 标签：java, spring, servlets, spring-mvc, spring-ws

我有一个奇怪的问题。我有一个我想添加到应用程序的 my-spring.xml 文件，但由于某种原因，我只能在它位于根上下文中时才能检测到它。

以下未检测到根上下文中声明的 my-spring.xml。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" 
         version="2.4">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
        /WEB-INF/my-datasources.xml
        /WEB-INF/my-spring.xml
        </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>myservice</servlet-name>
        <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/webservice-config.xml</param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>myservice</servlet-name>
        <url-pattern>/webservice/*</url-pattern>
    </servlet-mapping>

    <mime-mapping>
        <extension>wsdl</extension>
        <mime-type>text/xml</mime-type>
    </mime-mapping>

    <mime-mapping>
        <extension>xsd</extension>
        <mime-type>text/xml</mime-type>
    </mime-mapping>

</web-app> 
```

如果我把它改成这个，那么它就可以工作（注意 my-spring.xml 的位置不同）。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" 
         version="2.4">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
        /WEB-INF/my-datasources.xml
        </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>myservice</servlet-name>
        <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/webservice-config.xml</param-value>
                <param-value>/WEB-INF/my-spring.xml</param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>myservice</servlet-name>
        <url-pattern>/webservice/*</url-pattern>
    </servlet-mapping>

    <mime-mapping>
        <extension>wsdl</extension>
        <mime-type>text/xml</mime-type>
    </mime-mapping>

    <mime-mapping>
        <extension>xsd</extension>
        <mime-type>text/xml</mime-type>
    </mime-mapping>

</web-app> 
```

我真的看不出我做错了什么。如果我理解它的工作方式，当在根上下文中声明时（如第一个示例），它应该由应用程序的任何资源访问。在此示例中似乎并非如此，因为我无法从 Controller/Endpoint 类访问 my-spring.xml 文件中定义的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:07:07.587

我认为您需要逗号来分隔多个`contextConfigLocation`文件。基于这个答案：[https ://stackoverflow.com/a/2725413/116509](https://stackoverflow.com/a/2725413/116509)

编辑：尝试删除前面的`/`eg`WEB-INF/my-datasources.xml`而不是`/WEB-INF/my-datasources.xml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:49:32.043

尝试这样的事情

```
<context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            classpath:/my-datasources.xml
            classpath:/my-spring.xml
        </param-value>
</context-param> 
```

但是你必须在类路径中有这两个文件

# facebook - zend facebook auth 覆盖本地登录存储

> ID：11154575
> 
> 赞同：0
> 
> 时间：2012-06-22T10:35:58.623
> 
> 标签：facebook, zend-framework

我有一个带有本地登录系统的应用程序。我想做的是允许用户将他们的 facebook 帐户连接到他们的帐户。我将 Zend Auth 用于我的主要本地登录和 Michael Krotscheck 的 facebook auth。

我可以很好地与 facebook 连接，但是因为我使用的是 Zend_Auth，所以 facebook 数据覆盖了主要的本地登录存储。我所需要的只是用户电子邮件和 facebook id 并将它们插入到我的用户表中。

下面的代码显示了它是如何工作的，我不知道除了使用 Zend Auth 进行 facebook 登录之外的另一种选择。有人有同样的问题吗？建议会很有帮助。

```
$auth = Zend_Auth::getInstance();

    $adapter = $this->_getFacebookAdapter();

    $result = $auth->authenticate($adapter);

        if ($result->isValid()) {
            $toStore = array('identity' => $auth->getIdentity());

            // for facebook
            $msgs = $result->getMessages();
            $toStore['properties'] = (array) $msgs['user'];
            $toStore['provider'] = "facebook";

            $auth->getStorage()->write($toStore);

            $this->_helper->FlashMessenger('Successful authentication');
            //return $this->_redirect('/index/index');

            // Check if the User is in our dB
            //$users = new My_Model_Users();
            //$userTrue = $users->checkUserExists($userId,$providerName);
            Zend_Debug::dump($toStore);
            Zend_Debug::dump($this->_helper->user());

        } else {                                                

            $this->_helper->FlashMessenger('Failed authentication');
            $this->_helper->FlashMessenger($result->getMessages());
            //return $this->_redirect('/index/index');
        } 
```

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:38:09.380

经过更多的stackoverflow拖网后，我找到了解决方案。

[Zend_Auth 的多个实例（2）](https://stackoverflow.com/questions/4318599/multiple-instances-2-of-zend-auth)

基本上创建了我自己的 Auth 类并删除了 Zend_Auth 中的单例模式，这允许我创建另一个实例。

Ĵ

# javascript - document.createElement: el.size = "2%" 不工作

> ID：11154577
> 
> 赞同：2
> 
> 时间：2012-06-22T10:36:06.557
> 
> 标签：javascript, dom, createelement

我正在使用以下内容：

```
el = doc.createElement("input");
el.size = "2%"; 
```

我收到错误消息（在 Firebug 中）`Index or size is negative or greater than the allowed amount`：。

当我只是注入 HTML 而不是正确构建 DOM 时，它工作正常，如下所示：

```
$rsc.html("<input name = 'myName' type = 'text' value = '" + myVariable + "' size = '2%' />"); 
```

为什么它不接受`2%`with createElement？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:41:28.907

该`size`属性只接受整数，不接受百分比。它表示输入中允许输入的最大字符数。如果你把它放在你的 HTML 中，可能 % 被忽略并且值被解析为 2。

如果你需要调整输入的宽度，那么你可以使用`style='width:2%'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:41:26.413

`size`属性的单位是字符（纯整数），不允许使用任何其他单位`size`。如果您想获得`input`2% 的宽度，则需要通过以下方式进行`style`：

```
el.style.width='2%'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:54:09.030

用铬观察

```
 > var a = document.createElement('input');
   > undefined
   > a.size
   > 20
   > typeof a.size
   > "number"
   > a.size = "10"
   > "10"
   > a.size
   > 10
   > a.size = "1x"
   > "1x"
   > a.size
   > 20
   > a.size = "1%"
   > "1%"
   > a.size
   > 20 
```

在火狐中

```
>>> var a = document.createElement('input');
undefined
>>> a.size
20
>>> typeof a.size
"number"
>>> a.size = 20
20
>>> a.size = "20"
"20"
>>> a.size = "2%"
Error: Index or size is negative or greater than the allowed amount
[Break On This Error]   
a.size = "2%" 
```

我认为 chrome 可以安全地忽略无效的整数值，而 Firefox 会引发错误。

# ruby-on-rails - rails 模型的别名

> ID：11154584
> 
> 赞同：4
> 
> 时间：2012-06-22T10:36:41.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 Rails 应用程序之一中的模型名称是`OrganizationUser` 并且有没有办法为此模型创建别名为 OU 或 OrgUser，以便我可以在 Rails 控制台中使用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T13:45:03.527

如果 kishie 的回答不适合您，您可以创建另一个继承自 OrganizationUser 的模型：

```
class OU < OrganizationUser
end 
```

或者

```
class OrgUser < OrganizationUser
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T03:33:02.627

在更清洁的一面工作。假设你有一个模型

```
 class Home < ActiveRecord::Base
      class << self
        def agent
            p "This is a Dummy String"
       end
    end
    end 
```

第1步

在你的库中创建一个 alias.rb。其中将包含您的别名映射和持有这些映射的常量

```
module Alias
C = Home #to make a alias of class
H = Home.new  #a class object alias
end 
```

第2步

转到导轨 c

```
rails c
"inside it for loading"
Loading development environment (Rails 3.2.1)
ruby-1.9.3-preview1 :001 > require 'alias'
 => true

ruby-1.9.3-preview1 :002 > include Alias
 => Object 

ruby-1.9.3-preview1 :003 > C
 => Home(id: integer, created_at: datetime, updated_at: datetime)

ruby-1.9.3-preview1 :004 > H
 => #<Home id: nil, created_at: nil, updated_at: nil> 
```

# iphone - 使用 CIDetector 的人脸检测问题

> ID：11154585
> 
> 赞同：6
> 
> 时间：2012-06-22T10:36:48.087
> 
> 标签：iphone, objective-c, ios, face-detection

我正在开发一个应用程序，我必须在其中检测左眼、右眼和嘴巴的位置。我有一个并`imageView`包含一个面部图像，现在我想获得眼睛和嘴巴的坐标。我已经看到了 2-3 个示例代码，但是在所有代码中都大致相同，我们必须反转我的视图以匹配我不想要的坐标，因为我的视图有一些其他控件。他们都在使用的另一件事`self.view``imageView`

```
UIImageView *imageView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"image.png"]]; 
```

但我`imageView`有框架，我不能用图像初始化它。当我这样做时，我发现 faceFeature 的眼睛和嘴巴坐标错误。

我已经从[这个示例代码](http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/)开始了我的代码，但是在这个视图中也正在反转它的`Y`坐标。

任何人都可以帮助我如何在`UIImageView`不反转图像的情况下检测面部眼睛和嘴巴的位置`self.view`。

如果我的问题不够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T15:30:23.517

这里的技巧是将返回的点和边界从 CIDetector 转换为您的坐标，而不是翻转您自己的视图。CIImage 的原点位于左下角，您需要将其转换到左上角

```
int height = CVPixelBufferGetHeight(pixelBuffer);
CGAffineTransform transform = CGAffineTransformMakeScale(1, -1);
transform = CGAffineTransformTranslate(transform, 0, -1 * height);

/* Do your face detection */

CGRect faceRect = CGRectApplyAffineTransform(feature.bounds, transform);
CGPoint mouthPoint = CGPointApplyAffineTransform(feature.mouthPosition, transform);
// Same for eyes, etc 
```

对于你关于 UIImageView 的第二个问题，你只需要做

```
imageview.image = yourImage 
```

初始化图像视图后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:25:18.410

解决了！- 将类编辑为包含所有面部对象（嘴和眼睛）的 faceContainer，然后旋转该容器，仅此而已。显然这是非常粗略的，但它确实有效。这是一个链接，[http://www.jonathanlking.com/download/AppDelegate.m](http://www.jonathanlking.com/download/AppDelegate.m)。然后用它替换示例代码中的应用程序委托。

-- 旧帖 --

看看这个[Apple 文档，然后从](https://developer.apple.com/library/ios/#documentation/CoreImage/Reference/CIFaceFeature/Reference/Reference.html#//apple_ref/doc/uid/TP40010976)[这个苹果演讲](http://adcdownload.apple.com//wwdc_2011/adc_on_itunes__wwdc11_sessions__pdf/422_using_core_image_on_ios_and_mac_os_x.pdf)开始幻灯片 42 。此外，您可能应该观看该演讲，因为它有一个您正在尝试实现的演示，它被称为“在 iOS 和 Mac OS X 上使用 Core Image”，并且[在这里](https://developer.apple.com/videos/wwdc/2011/)。

# python - 如何在 ListCtrl 中设置所选项目？

> ID：11154589
> 
> 赞同：2
> 
> 时间：2012-06-22T10:37:11.270
> 
> 标签：python, wxpython

给定索引，如何以编程方式将项目设置为选定项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:10:29.867

使用 ListCtrl 方法[选择](http://wxpython.org/docs/api/wx.ListCtrl-class.html#Select)

```
Select(self, idx, on=1)

[de]select an item 
```

# android - 获取有关哪个 uid 正在播放音频的信息 [Android]

> ID：11154591
> 
> 赞同：2
> 
> 时间：2012-06-22T10:37:23.267
> 
> 标签：android, android-mediaplayer

我想添加一个功能，该功能需要有关所有 uid（或应用程序）当前正在播放音频的信息。

我知道 AudioManager 但它没有提供有关哪些应用程序正在播放音频的信息，它唯一告诉的是音频是否正在播放。

# sparql - AllegroGraph 查询计划

> ID：11154593
> 
> 赞同：3
> 
> 时间：2012-06-22T10:37:26.793
> 
> 标签：sparql, query-performance, allegrograph

是否可以在 AllegroGraph 中查看用于评估 SPARQL 查询的查询执行计划（类似于`EXPLAIN`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-22T16:44:58.957

AllegroGraph 通过 Lisp API 和 REST API 提供查询分析器，它会告诉您正在使用哪些索引。有关更多信息，请查看以下链接（适用于 AllegroGraph v4.14.1）：

[http://franz.com/agraph/support/documentation/v4/query-analysis.html](http://franz.com/agraph/support/documentation/v4/query-analysis.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-31T14:17:03.590

SPARQL中没有`explain`查询命令，但这里有两种执行 SPARQL 查询的方法，其中包含查询计划的详细输出：

*   [在AllegroGraph Webview](https://franz.com/agraph/support/documentation/6.7.0/agwebview.html)中单击“显示计划” ；
*   或将[AllegroGraph 查询选项](https://franz.com/agraph/support/documentation/6.7.0/sparql-reference.html#query-option.logQuery) `PREFIX franzOption_logQuery: <franz:yes>`添加到查询中，这会将执行日志写入`agraph.log`

# ember.js - emberjs 自动模型绑定/创建

> ID：11154595
> 
> 赞同：2
> 
> 时间：2012-06-22T10:37:30.027
> 
> 标签：ember.js

当我在 Ember.Router 中使用动态段时，ember 会自动识别模型，在其上调用 find(index)，并将结果设置为控制器的内容。它是否正确？

如果是，如何识别模型？按我在“connectOutlet”函数中给出的名称？

对于没有动态部分的路线，是否有类似的情况？如果不是，为什么视图和控制器是自动生成和绑定的，而模型不是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:28:02.887

`Ember.Route`通过`modelType`属性提供模型类型：

```
Ember.Route.extend({
    route: '/:stuff_id',
    modelType: 'App.Stuff',

    connectOutlets: function(router, stuff) {
        ... // work with Stuff instance 'stuff' here
    }
} 
```

# linq-to-sql - LINQ-to-SQL 在 Windows 8 上的 Metro 风格应用程序中是否可用？

> ID：11154598
> 
> 赞同：3
> 
> 时间：2012-06-22T10:37:36.683
> 
> 标签：linq-to-sql, windows-8, microsoft-metro

我正在移植一个 Windows Phone 7 应用程序以适用于 Windows 8（并利用可用的新外形尺寸）。

许多命名空间似乎都有[一个方便的命名空间映射](http://msdn.microsoft.com/en-us/library/windows/apps/hh465136%28v=VS.85%29.aspx)，并且有一些被明确称为不可用，但似乎没有提到 LINQ-to-SQL - 这是文档中的遗漏吗？还是在 Metro 风格应用程序中不可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:48:33.293

LINQ-to-SQL 和 LINQ-to-Entities 在 Metro 风格的应用程序中不可用。Metro 风格的应用程序是轻量级应用程序，可以从 Web 服务（通常在云中运行）中检索数据。

`System.Data`因此，不支持ADO.NET 和整个命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:10:01.383

周三在 Windows Phone 峰会上提到 SQLLite 将在 WP8 和 Win8 上可用，但尚未分享有关编程 API 的详细信息。目前，用于 WinRT 应用程序的 Metro 子集不包括数据库 API 集。有一些独立的努力来移植一些基于 no-sql 的实现，包括 RhynoDB 和 Sterling，因此您可能希望对进一步的公告保持警惕。

# git - git 客户端是否可以托管具有不同属性的存储库？

> ID：11154599
> 
> 赞同：2
> 
> 时间：2012-06-22T10:37:46.203
> 
> 标签：git, attributes, config, repository

我在这里谈论的是工作区中的一个项目。我想在我自己的 PC 上设置一个具有特定属性设置的存储库，并使用具有其他属性的托管存储库，特别是包括过滤。那么是否可以为同一个项目拥有具有不同属性/配置的存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:41:12.457

是：如果您在`.git/info/attributes`文件中指定属性，它们不会被提交，因此特定于您自己的存储库版本。

# c# - 如何只显示 4 个最近添加的数据库记录？

> ID：11154600
> 
> 赞同：2
> 
> 时间：2012-06-22T10:38:02.563
> 
> 标签：c#, .net, tsql, sql-server-ce

我已经浏览了 ASP.Net 上的 MVC3 Razor 教程，并开始尝试对其进行一些调整以用于我自己的小型 Web 项目。

到目前为止，我所做的是创建一个部分，将两个字段添加到新的数据库记录中。一个“News_Item”和一个“News_Date”字段。

然后在单独的页面上显示这些数据时，我只想显示最近添加的 4 条记录。

我的视图代码（如下）显示数据库中的所有条目没问题，但我想按照上面的说明进行修改，使其只显示最近的 4 条记录。请问我该怎么做？我是初学者，没有真正的开发经验。

在我的控制器中，我有以下“获取”代码：

```
public ViewResult Index()
{
    return View(db.News_Entries.ToList());
} 
```

以防万一，这是模型代码：

```
namespace dale_harrison.Models
{
    public class News
    {
        public int ID { get; set; }
        public string News_Entry { get; set; }
        public DateTime News_Date { get; set; }
    }

    public class NewsDBContext : DbContext
    {
        public DbSet<News> News_Entries { get; set; }
    }
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:42:35.197

更改您的操作代码

```
public ViewResult Index()
{
    return View(db.News_Entries.OrderByDescending(n => n.News_Date).Take(4).ToList());
} 
```

你应该阅读[linq to entity 教程](https://www.google.co.in/search?aq=1&oq=linq%20to%20entities%20&sourceid=chrome&ie=UTF-8&q=linq%20to%20entities%20tutorial)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:40:03.607

以下 LINQ 查询：

```
var latest4 = db.News_Entries.OrderByDescending(n => n.News_Date).Take(4); 
```

应转换为以下 SQL 查询：

```
select top 4 *
from news
order by date desc 
```

# sql - SQL 子查询编码风格

> ID：11154602
> 
> 赞同：0
> 
> 时间：2012-06-22T10:38:12.193
> 
> 标签：sql, sql-server

如何使这个子查询成为好看的代码？我正在寻找有关 SQL 优化和代码风格的指南。

```
 SELECT foo FROM table WHERE foo_id IN 
    (
    SELECT idchild FROM table2 WHERE idparent IN 
    (SELECT idchild FROM table2 WHERE idparent IN 
    (SELECT idchild FROM table2 WHERE idparent = @id)
    ))
 AND txt_type ='some_cat' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:42:51.000

尝试 ：

```
 Select a.foo,b.idchild from Table as a inner join table2 as b
   on a.foo_id=b.idchild and b.idparent=@id  AND a.txt_type ='some_cat' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:44:25.923

为了获得更好的性能和可读性，请执行以下操作：

```
select t4.foo
from table2 t1
join table2 t2 on t2.idparent = t1.idchild
join table2 t3 on t3.idparent = t2.idchild
join table t4 on t4.foo_id = t3.idchild and t4.txt_type ='some_cat'
where t1.idparent = @id 
```

请注意，从中选择的第一个表如何在 where 子句中具有索引谓词。该查询将在整个查询过程中一直使用索引访问，并且非常高效。

还要注意我是如何将 txt_type 的谓词移动到`on`子句中的，它可以在读取行时应用，而不是在组装连接之后应用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:48:29.150

要么使用**Praveen 的**解决方案，要么使用以下解决方案。两者都经过适当优化。

```
SELECT foo 
FROM   table1 
WHERE  EXISTS (SELECT 1 
               FROM   table2 
               WHERE  idparent = @id 
                      AND table2.idchild = table1.foo_id) 
       AND txt_type = 'some_cat' 
```

# java - 使用 vlcj 流式传输视频文件

> ID：11154604
> 
> 赞同：0
> 
> 时间：2012-06-22T10:38:14.733
> 
> 标签：java, video-streaming, http-streaming, vlcj

我正在尝试播放视频文件..但出现一些错误，不知道如何解决这些错误，有人可以帮助我吗，在此先感谢

```
 `Streaming 'C:\Desktop\movie.mp4' to ':sout=#duplicate{dst=std{access=http,mux=ts,dst=127.0.0.1:5555}}'
       _       _
__   _| | ___ (_)
\ \ / / |/ __|| |
 \ V /| | (__ | |
  \_/ |_|\___|/ | 2.2.0
            |__/  www.capricasoftware.co.uk

VLCJ is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

VLCJ is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with VLCJ.  If not, see <http://www.gnu.org/licenses/>.

Copyright 2009, 2010, 2011, 2012 Caprica Software Limited.

vlcj: (Info.java:103)                                | INFO  | vlcj: <version not available>
vlcj: (Info.java:104)                                | INFO  | java: 1.6.0_23 Sun Microsystems Inc.
vlcj: (Info.java:105)                                | INFO  | java home: C:\Program Files\Java\jre6
vlcj: (Info.java:106)                                | INFO  | os: Windows 7 6.1 x86
vlcj: (LibVlcFactory.java:164)                       | INFO  | vlc: 2.0.1 Twoflower, changeset 2.0.1-0-gf432547
vlcj: (LibVlcFactory.java:165)                       | INFO  | libvlc: libvlc.dll
[04451750] access_output_http access out: Consider passing --http-host=IP on the command line instead.
[002c9648] main input error: ES_OUT_RESET_PCR called
[04430e28] main mux error: cannot add this stream
[04424528] main decoder error: cannot create packetizer output (theo)
[04430e28] main mux error: cannot add this stream
[056d0c80] main decoder error: cannot create packetizer output (vorb)
` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:07:52.317

我已将字符串更改为此，它工作正常............

```
String[] options = {" :dshow-vdev=ip Camera :dshow-adev=  :dshow-caching=200", ":sout = #transcode{vcodec=theo,vb=800,scale=0.25,acodec=vorb,ab=128,channels=2,samplerate=44100}:display :no-sout-rtp-sap :no-sout-standard-sap :ttl=1 :sout-keep"}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:29:07.950

有一个更快的选择：

```
String[] options = {
      ":dshow-adev=none",
      ":dshow-vdev=",
      ":dshow-aspect-ratio=4\\:3",
      ":live-caching=200",
      ":sout-mp4-faststart",
      ":dshow-size=640x480",
      ":sout=#duplicate{dst=display,dst='transcode{vcodec=x264,venc=x264,vb=1000,fps=1,scale=1,width=640,height=480}:standard{access=file,mux=mp4,dst=C:\\xy.mp4}'}"
    }; 
```

# c++ - 使用未排序的时间范围减少表中的查询时间

> ID：11154607
> 
> 赞同：1
> 
> 时间：2012-06-22T10:38:25.200
> 
> 标签：c++, sql, sqlite

几天前我有一个关于这个问题的问题，但我仍然想知道如何调整我在这个查询上的表现。

我有一个看起来像这样的表（SQLite）

```
CREATE TABLE ZONEDATA (
TIME INTEGER  NOT NULL,
CITY INTEGER  NOT NULL,
ZONE INTEGER  NOT NULL,
TEMPERATURE DOUBLE,
SERIAL INTEGER ,
FOREIGN KEY (SERIAL) REFERENCES ZONES,
PRIMARY KEY ( TIME, CITY, ZONE)); 
```

我正在运行这样的查询：

```
SELECT temperature, time, city, zone from zonedata
WHERE (city = 1) and (zone = 1) and (time BETWEEN x AND y); 
```

x 和 y 是变量，它们之间可能有几十万个变量。

温度范围从 -10.0 到 10.0，城市和区域从 0-20（在本例中为 1 和 2，但可以是其他值）。来自不同区域和城市的记录以大约 5-6 秒的间隔连续记录。这会产生大量数据，并不一定意味着每条记录都按正确的时间顺序记录。

问题是我如何在大时间范围内优化记录的检索（其中记录没有按时间 100% 正确排序）。这可能需要很长时间，尤其是当我从多个城市和区域检索时。这意味着多次使用不同的参数运行上述查询。我正在寻找的是对查询、表结构（最好不是）或其他可更改设置的特定更改。

我使用它的应用程序是在 c++ 中实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:47:10.020

您的数据已经按 排序`Time`。

`(Time, City, Zone)`通过在具有相同值的所有记录上设置主键，它们`Time`将彼此相邻。 *（除非您在其他地方指定了 CLUSTER INDEX，但我对 SQLite 不够熟悉，不知道这是否可能。）*

但是，在您的特定情况下，这意味着您想要的记录彼此不相邻。相反，它们是成束的。每组记录都将具有`(city=1, zone=1)`相同的时间值。一组用于 Time1，另一组用于 Time2，以此类推。

这就像把所有东西都放在 Excel 中，然后按时间排序，然后按城市排序，然后按区域排序。

要将您想要的所有记录（对于同一城市和区域）捆绑在一起，请将其更改为`(City, Zone, Time)`.

但是请注意，如果您还对`all cities and zones but a time = ???`我建议的密钥进行查询，那么您的原始密钥会更好。

出于这个原因，您可能希望/需要为不同的查询以不同的顺序添加不同的索引。

这意味着要为您提供特定的推荐解决方案，我们需要知道您将运行的特定查询。我建议的键/索引顺序对于您的简化示例可能是理想的，但实际情况可能不同，足以保证完全不同的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:40:18.887

您可以索引这些列，它会在内部对其进行排序以加快查询速度，但您不会看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:50:52.297

因为数据库`between`很难优化。解决这个问题的一种方法是添加额外的字段，以便您可以替换`between`为`=`. 例如，如果您添加一个`day`字段，您可以查询：

```
where  city = 1 and zone = 1 and day = '2012-06-22' and 
       time between '2012-06-22 08:00' and '2012-06-22 12:00' 
```

此查询相对较快，索引位于`city, zone, day`.

这需要考虑选择适当的额外字段。它需要额外的代码来维护该字段。如果此查询位于应用程序的重要性能路径中，那么它可能是值得的。

# dns - SPF 记录很难失败

> ID：11154610
> 
> 赞同：1
> 
> 时间：2012-06-22T10:38:39.110
> 
> 标签：dns, spf

我正在尝试在我们的域上设置[SPF](https://en.wikipedia.org/wiki/Sender_Policy_Framework)记录，但它似乎很困惑。

域是`letterpart.com`，邮件服务器是`mail.letterpart.com`。我们从[Exchange 服务器](https://en.wikipedia.org/wiki/Microsoft_Exchange_Server)发送我们所有的电子邮件`mail.letterpart.com`，直接或通过转发到 Exchange 服务器的[Perl脚本。](http://en.wikipedia.org/wiki/Perl)这是我们唯一的服务器，处理传入和传出的邮件。

我们原本有

```
v=spf1 mx a:mail.letterpart.com a:cmail1.com ~all 
```

其中包括我们的邮件服务器和我们有时用来发送营销电子邮件的[Campaign Monitor 。](http://www.campaignmonitor.com/)

然而，这给了我们一个软失败：

```
Recipient address rejected: SPF Tests: Mail-From Result="softfail": Mail From="*****@letterpart.com" HELO name="mail.letterpart.com" HELO Result="none" Remote IP="94.72.251.210"> 
```

[我与我们的ISP](http://en.wikipedia.org/wiki/Internet_service_provider)和[KCOM](https://en.wikipedia.org/wiki/KCOM_Group)进行了交谈，他们回复了这个回复：

> 我检查了现有的 SPF 记录，发现了您的“软失败”的可能原因。“all”机制以“~”为前缀，表示软失败。我已将记录“所有”部分更改为“-all”，这应该会导致失败。

现在，当我从[Outlook](http://en.wikipedia.org/wiki/Microsoft_Outlook)发送邮件时，我遇到了严重的失败：

```
spf-test@openspf.net on 22/06/2012 09:47
  You do not have permission to send to this recipient.  For assistance, contact your system administrator.
  <mail.letterpart.com #5.7.1 smtp;550 5.7.1 <spf-test@openspf.net>: Recipient address rejected: SPF Tests: Mail-From Result="fail": Mail From="*****@letterpart.com" HELO name="mail.letterpart.com" HELO Result="none" Remote IP="94.72.251.210"> 
```

我回到我们的 ISP 并说他们所做的改变确实把我们的软故障变成了硬故障，所以他们现在可以改变它，这样我们就不会失败。

他的回答是这条记录是正确的，它表明不是来自我们域的电子邮件将失败。我指出我发送的测试来自我们的域，他只是向我发送了对*[SPF 记录语法](http://www.openspf.org/SPF_Record_Syntax)*的引用，这是我正在测试 spf-test@openspf.net 电子邮件的同一站点。

当谈到这些记录时，我是不是完全搞错了？我认为这个想法是从我们的域发送时根本不会失败。

现在。我们的 MX 记录显示如下：

```
mail.letterpart.com   94.72.251.212 
```

但是 SPF 测试电子邮件将 IP 地址显示为 94.72.251.210，当我查看从 letterpart.com 发送的电子邮件的标题时，它确实显示它来自 .210：

```
for *****@digitalessence.net; Fri, 22 Jun 2012 11:03:06 +0100
Received: from [94.72.251.210] (helo=mail.letterpart.com) 
```

`94.72.251.210`是我们防火墙上的 Wan1 接口。我应该将 IP 地址添加到 SPF 还是范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:59:38.000

是的，听起来您回答了自己的问题 -`94.72.251.210`如果您的电子邮件是从那里发送的（就外界而言），您应该添加到您的 SPF 记录中。

这是最简单的方法。更难的解决方案是弄清楚为什么您的邮件服务器最终会从该 IP 地址发送并更正防火墙规则，以便邮件从您的网络出现在与邮件服务器名称相关联的 IP 地址上。这似乎更正确，并且可能有其他好处 - 如果您的邮件标头使用的名称与其来自的实际 IP 地址不同，则它们看起来像是“伪造的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:10:35.627

我正在查看你的[SPF 记录](https://www.unlocktheinbox.com/resources/spfrecords/)。它被列为

```
v=spf1 ip4:94.72.251.210 a:cmail1.com ~all 
```

它应该看起来像：

```
v=spf1 mx a ip4:94.72.251.210 a:cmail1.com ~all 
```

这意味着当前域的所有 MX 和 A 记录都是有效的。我真的不明白为什么`94.72.251.210`当 mail.letterpart.com 指向`94.72.251.212`.

# xml - XSLT - 合并 2 个没有公共 ID 的 XML 文件

> ID：11154612
> 
> 赞同：2
> 
> 时间：2012-06-22T10:39:02.080
> 
> 标签：xml, xslt

我想加入两个 xml 文件，如下图所示。但是我的问题是，如果您有一个 ID 可以加入，您将如何做到这一点。我想加入关于 POSITION 而不是 id 的加入。您将如何对以下文件执行此操作？

文件 1：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<catalog>
  <data>
    <title>Title1</title>
    <description>Description1</description>
  </data>

  <data>
    <title>Title2</title>
    <description>Description2</description>
  </data>
</catalog> 
```

文件 2：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<catalog>
  <data>
    <author>Author1</author>
    <date>12/34/5678</date>
  </data>

  <data>
    <author>Author2</author>
    <date>87/65/4321</date>
  </data>
</catalog> 
```

输出：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<catalog>
  <data>
    <title>Title1</title>
    <description>Description1</description>
    <author>Author1</author>
    <date>12/34/5678</date>
  </data>

  <data>
    <title>Title2</title>
    <description>Description2</description>
    <author>Author2</author>
    <date>87/65/4321</date>
  </data>
</catalog> 
```

如果您有一个`ID`使用下面 XSLT 的公共字段，我知道该怎么做，但是您如何加入 POSITION？

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="ISO-8859-1" indent="yes" />
  <xsl:variable name="with" select="'File2.xml'" />

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="scene">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
      <xsl:variable name="info" select="document($with)/catalog/data[id=current()/id]/." />
      <xsl:for-each select="$info/*">
        <xsl:if test="name()!='myid'">
          <xsl:copy-of select="." />
        </xsl:if>
      </xsl:for-each>
    </xsl:copy>
  </xsl:template>
</xsl:transform> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:22:50.697

尝试

```
<xsl:strip-space elements="*"/>
<xsl:output indent="yes"/>

<xsl:param name="url2" select="'input2.xml'"/>
<xsl:variable name="data2" select="document($url2)/catalog/data"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="data">
  <xsl:variable name="pos" select="position()"/>
  <xsl:copy>
    <xsl:apply-templates select="@* | * | $data2[$pos]/*"/>
  </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:47:38.790

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="ISO-8859-1" indent="yes" />
    <xsl:variable name="with" select="'File2.xml'" />

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="data">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" />
            <!--Determine the index of the current data element in this document.
                   Note: using position() may not always yield the desired number 
                         because other siblings (text(), comment(), 
                         processing-instruction(), 
                         or other elements) would affect position().
                         Also, counting preceeding-siblings that are data 
                         elements, not just any element. -->
            <xsl:apply-templates 
                select="document($with)
                /catalog
                /data[position() 
                       = count(current()/preceding-sibling::data)+1]
                /*[name()!='myid']" />
                <!--kept filter for `myid` elements from example stylesheet, 
                    remove if not needed --> 
        </xsl:copy>
    </xsl:template>
</xsl:transform> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:56:32.063

```
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="ISO-8859-1" indent="yes" />
  <xsl:variable name="with" select="'File2.xml'" />

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="data">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
      <!-- using count to get the current position of the elements is safer --> 
      <xsl:copy-of select="document($with)/catalog/
         data[position()=count(current()/preceding-sibling::*) + 1]/*"/>
    </xsl:copy>
  </xsl:template>
</xsl:transform> 
```

# c++ - GCC 3.4 中奇怪的递归模板模式（确切地说是 MoSync）

> ID：11154617
> 
> 赞同：2
> 
> 时间：2012-06-22T10:39:23.947
> 
> 标签：c++, templates, linker, gcc3, mosync

我目前正在尝试用 C++ 编写类似[Artemis](http://gamadu.com/artemis/)的游戏组件/实体系统。我计划让这个系统与一个跨平台工具一起工作，用于在 Android 和 iOS 上编写应用程序，称为[MoSync](http://www.mosync.com/)。

不幸的是，MoSync 目前使用的是旧版本的 GCC，并且在移植我在 Visual Studio 中测试过的库时，我遇到了一大堆错误。其中大部分我可以解决，但有一个模板错误，我无法理解。

我写了一个小例子

```
template <typename T>
struct Base
{
 static int type;
};

struct Derived : public Base<Derived>
{
};

template <typename T>
int Base<T>::type(-1);

extern "C" int MAMain()
{
 Derived d;
 d.type = 0;
} 
```

我的库使用 Curiously Recursive Template Pattern 来定义组件。此示例在 GCC 4.4 和 Visual Studio 2010 中编译良好。但是，当我尝试在 MoSync（使用 GCC 3.4.6）中编译它时，我收到此链接器错误

```
C:\MoSync\workspace\pede\main.cpp: Error: Unresolved symbol '__ZN4BaseI7DerivedE4typeE', 
```

有没有一种解决方法可以让它在这个编译器中工作，还是我必须找到另一种方法来定义我的组件？

编辑* 事实上，我可以用一个更简单的例子来使这个错误发生：

```
template <typename T>
struct Component {
    static int t;
};

template <typename T>
int Component<T>::t(-1);

extern "C" int MAMain()
{
    Component<int>::t = 0;
} 
```

给出这个错误

```
C:\MoSync\workspace\Components\main.cpp:9: Error: Unresolved symbol '__ZN9ComponentIiE1tE', 
```

我想这可能与好奇递归模板模式根本没有任何关系。我该怎么做才能让它在 GCC 3.4.6 下编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:54:02.780

根据gcc bugtracker 上的[这个错误报告](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=14761)，该问题是由在静态变量定义中指定默认值引起的。如果您像这样删除初始化，代码应该链接：

```
int Base<T>::type; 
```

错误报告似乎已被解决为不是错误。尽管如此，您的示例在 GCC 4.4 中编译得很好。

要解决此问题，您可以使用带有构造函数的类类型，该构造函数将自动初始化自身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:51:33.097

是否添加

```
int Base<Derived>::type(-1); 
```

有帮助吗？

gcc 3.4 真的开始变老了，不能很好地适应模板巫术。

# java - 获取附加到 vaadin 表单的字段列表

> ID：11154625
> 
> 赞同：1
> 
> 时间：2012-06-22T10:39:57.400
> 
> 标签：java, vaadin

我有一个 vaadin 表单，其中包含大量字段（文本框、选择框等）。我需要在某些事件上将所有字段值重置为 null。

**我们如何从**. 所以我遍历它们并在它们每个上调用 setValue 来实现我的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:16:37.227

```
public List<Field> getAllFields(Form form) {
  Collection<?> propertyIds = form.getItemPropertyIds();
  List<Field> fields = new ArrayList<Field>(propertyIds.size());
  for (Object itemPropertyId : propertyIds) {
    fields.add(form.getField(itemPropertyId));
  }
  return fields;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:11:38.477

我找到了一种方法

```
for(Object propertyId : form.getItemPropertyIds()) {
      form.getField(propertyId).setValue(null);
} 
```

# php - 如何从mysql db显示多行逗号分隔值

> ID：11154628
> 
> 赞同：0
> 
> 时间：2012-06-22T10:40:11.923
> 
> 标签：php, mysql

我需要您帮助我从我的数据库中显示一些逗号分隔的条目。

我的主表架构看起来像这样

```
 |---|----------|-----------|----------------------------|
              |id | tab1     |  tab2     |          tab3              | 
              |---|----------|-----------|----------------------------|
              |1  |  state1  |  A-North  |   constA1,constA2,constA3  |
              |2  |  state2  |  B-South  |   constB1,constB2,constB3  |
              --------------------------------------------------------- 
```

查询我正在努力工作

```
$query = mysql_query("SELECT * FROM `main` WHERE `tab1` = '$tab1'") 
         or die(mysql_error());

while($row=mysql_fetch_array($query)){                  
  $tab3 = explode(",", $row['tab3']);
  echo $tab3."<br>";
} 
```

我想从数据库中显示什么

```
 A-North      B-South
               ---------------------                   
               constA1      constB1
               constA2      constB2
               constA3      constB3 
```

运行该查询时遇到的错误是 "Array" 。当我从 phpMyAdmin 运行相同的代码时，我得到了所需的行（结果）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T10:42:51.763

Explode 在数组中为您提供结果，因此您需要另一个循环通过 $tab3 数组打印结果。请参阅 PHP 手册中的定义：

> 返回一个字符串数组，每个字符串都是通过在由字符串分隔符形成的边界上拆分它而形成的字符串的子字符串。

例如：

```
for ($i = 0; $i < sizeof($tab3); $i++) {
    echo $tab3[$i].'<br />';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:43:01.717

explode 将返回数组，`print_r($tab3)`您可以查看项目并通过以下方式访问它

```
echo $tab[0];
echo $tab[1];
echo $tab[2]; 
```

ETC.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:44:44.933

`explode ($separator,$string)` returns an array. You need to step through the array to create the table columns.

Also, as you want the data in two columns, create these separately as two separate tables and then include those into a single table as two separate cells

Finally, redesign your database table. You'll thank us in the end

# android - 在联系人 URI 中添加电话标签和电子邮件标签？

> ID：11154632
> 
> 赞同：0
> 
> 时间：2012-06-22T10:40:41.253
> 
> 标签：android

我可以检索只有姓名、电话号码和电子邮件的联系方式

```
**ContactsContract.CommonDataKinds.Phone ,
ContactsContract.CommonDataKinds.Phone.CONTENT_URI** and 
**Email.CONTENT_URI.** 
```

我必须在显示屏上添加电话标签 [这意味着它是个人号码或家庭号码等] 和电子邮件标签 [意味着是公司电子邮件或个人电子邮件等]。我必须使用哪个功能来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:05:09.773

除了电话和电子邮件，您还可以`Type`使用以下代码检查退回的电话和电子邮件：

```
String type;

int contactPhoneType = cursorObject.getInt(cursorObject.getColumnIndex(ContactsContract.CommonDataKind‌​s‌​.Phone.TYPE))

if(contactPhoneType == ContactsContract.CommonDataKinds.Phone.TYPE_HOME){
 //Logic to set the type tag
}

switch(contactPhoneType){
case ContactsContract.CommonDataKinds.Phone.TYPE_HOME: 
type = "Home";
break;

case ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE:
type = "Mobile";
break;

case ContactsContract.CommonDataKinds.Phone.TYPE_WORK:
type = "Work"
break;
} 
```

对于电子邮件，请使用以下内容：

```
int contactEmailType = cursorObject.getInt(cursorObject.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE))

if(contactEmailType == ContactsContract.CommonDataKinds.Email.TYPE_WORK){
   //logic to set the email type tag
} 
```

可以使用 和 的成员变量检查所有其他`TYPE`类型。 `ContactsContract.CommonDataKinds.Phone``ContactsContract.CommonDataKinds.Email`

# c# - 从数组中的特定元素打印

> ID：11154633
> 
> 赞同：0
> 
> 时间：2012-06-22T10:40:53.297
> 
> 标签：c#, arrays

我有一个长度为 n 的字符串数组。

我只想打印出某个元素之后的值，而不管之前或之后的元素数量。

有没有办法做到这一点？

**编辑代码**

```
string separator = "\\";
string[] splitPath = path.Split('\\');
string joinedPath = String.Join(separator, splitPath[3], splitPath[4], splitPath[5]);
Console.WriteLine("Extracted: " + path); 
```

我让它在 3 点重新加入，因为我知道数组，但我想要它，这样无论位置如何它都会这样做

不，这不是家庭作业；）我有一个控制台应用程序，它打印出一条很长的路径，我只希望它显示该路径的一部分，而不仅仅是文件。我正在考虑删除/删除直到 x 的元素，然后将它们重新加入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:45:44.343

如果我理解正确...您可以使用 LINQ：

```
var result = yourArray.Skip(x); 
```

或者如果您只想使用一些字符串：

```
var result = yourArray.Skip(x).Take(y); 
```

不要忘记：

```
using Sytem.Linq; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T10:45:54.217

```
foreach(var element in myStringList.Skip(myStringList.IndexOf("certainElement"))
    Console.WriteLine(element); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:45:50.723

你的意思是这样的吗？

```
public void PrintArray(int fromIndex, string[] strings)
{
     if(strings == null) throw new ArgumentNullException("strings");
     if(fromIndex > strings.Length) throw new ArgumentException("Bad fromIndex", "fromIndex");

     for(int i = fromIndex; i < strings.Length; i++)
     {
          Console.WriteLine(strings[i]);
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:46:38.273

你可以这样做：

```
// 'array' is the string array and 'startFrom' is where in the array you want to start from
string[] array = ...;
int startFrom = 5;
for(int count = startFrom; count < array.Length; count ++)
{
    Console.WriteLine(array[count]);
    // Or use array[count] for something else.
} 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T10:46:39.223

非常简单的小例子：

```
int myIndex = 5;
string[] test = { "1", "2", "3", "4", "5", "6", "7", "8", "9", "0" };
for (int i = myIndex; i < test.Length; i++)
{
     Console.WriteLine("Element: " + i.ToString());
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T10:46:58.070

```
Console.WriteLine(string.Join(", ", myArr.Skip(someAmount))); 
```

# python - 在 Python 中调用嵌套函数

> ID：11154634
> 
> 赞同：19
> 
> 时间：2012-06-22T10:41:00.877
> 
> 标签：python, nested

我有一个方法，我已经分解成更小的嵌套函数来分解代码库：

```
def foo(x,y):
    def do_this(x,y):
        pass
    def do_that(x,y):
        pass
    do_this(x,y)
    do_that(x,y)
    return 
```

有没有办法自己运行其中一个嵌套函数。例如：

```
foo.do_this(x,y) 
```

**编辑：**

我正在尝试在使用 pyramid_breaker 构建的 Web 服务器上设置缓存

```
def getThis(request):
    def invalidate_data(getData,'long_term',search_term):
         region_invalidate(getData,'long_term',search_term)
    @cached_region('long_term')
    def getData(search_term):
         return response
    search_term = request.matchdict['searchterm']
    return getData(search_term) 
```

这是我的理解可能不准确：

现在我有这个的原因是装饰器用来创建缓存键的命名空间是从函数和争论中生成的。因此，您不能只将装饰器放在 getThis 上，因为请求变量是唯一的并且缓存是无用的。所以我创建了具有可重复参数（search_term）的内部函数。

然而，为了使缓存失效（即刷新），失效函数需要知道“getData”函数的范围，因此也需要嵌套。因此我需要调用嵌套函数。你们这些了不起的人已经明确表示这是不可能的，所以有人能够解释我如何用不同的结构来做到这一点吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-22T10:44:23.983

我假设`do_this`并且`do_that`实际上依赖于 的某些参数`foo`，否则您可以将它们移出`foo`并直接调用它们。

我建议将整个事情作为一个班级进行重新设计。像这样的东西：

```
class Foo(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def do_this(self):
        pass

    def do_that(self):
        pass

    def __call__(self):
        self.do_this()
        self.do_that()

foo = Foo(x, y)
foo()
foo.do_this() 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-10-15T15:09:36.197

这些之前的答案，告诉你不能这样做，当然是错误的。这是 python，你几乎可以使用一些神奇的代码魔法来做任何你想做的事情。

我们可以从 foo 的函数代码中取出第一个常量，这就是`do_this`函数。然后我们可以使用这个代码来创建一个新的函数。

有关新的更多信息，请参见[https://docs.python.org/2/library/new.html](https://docs.python.org/2/library/new.html) ，有关如何进入内部的更多信息，[请](https://docs.python.org/2/library/inspect.html)参见 https://docs.python.org/2/library/inspect.html代码。

**警告：不是因为你可以这样做，所以你应该这样做**，重新考虑你的函数结构方式是要走的路，但如果你想要一个快速而肮脏的黑客，可能会在未来打破，你去：

```
import new
myfoo = new.function(foo.func_code.co_consts[1],{}) 
myfoo(x,y) # hooray we have a new function that does what I want 
```

更新：在 python3 中，您可以使用 types 模块`foo.__code__`：

```
import types
myfoo = types.FunctionType(foo.__code__.co_consts[1], {})
myfoo()  # behaves like it is do_this()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: do_this() missing 2 required positional arguments: 'x' and 'y' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T10:52:45.993

有，您必须将它们作为函数对象的属性。但这只有在第一次调用`foo`.

```
def foo(x,y):
    def do_this(x,y):
        pass
    def do_that(x,y):
        pass
    do_this(x,y)
    do_that(x,y)
    foo.do_this = do_this
    foo.do_that = do_that
    return

>>> foo.do_this(1, 2)
AttributeError: 'function' object has no attribute 'do_this'
>>> foo(1, 2)
>>> foo.do_this(1, 2)
>>> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-22T10:44:34.890

不（除了在闭包对象中四处寻找，这在这里完全是矫枉过正）。如果需要，请使用类。

```
class foo(object):
    def do_this(self, x, y):
       ...
    def do_that(self, x, y):
       ...
    def do_other_stuff(self, x, y):
       # or __call__, possibly 
```

或者只是将这些函数放在外部范围内，因为无论如何您都将所有内容作为参数传递：

```
def foo(x, y):
    do_this(x, y)
    do_that(x, y)

def do_this(x, y):
    ...

def do_that(x, y):
    ... 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T10:44:01.593

不，那里没有。由于您可以从嵌套函数中访问外部范围内的变量：

```
def foo(x,y):
    def do_this(z):
        print(x,y,z)
    # ... 
```

在为and`do_this`提供绑定时无法调用。`x``y`

如果您必须`do_this`从其他地方调用，只需将其设置为与`foo`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-10T08:14:09.263

你可以这样试试：

```
def a(x, y):
    name = 'Michael'
    a.name = name

    a.z = z = x * y
    #a.z = z

def b():
    def give_me_price(f,g):
        price = f * g
        return price

    def two(j,k):
        surname = 'Jordan' # without return surname give None

    # two = two('arg1', 'arg2')
    # b.blabla = two

    one = give_me_price(5, 10)
    b.halabala = one

    print(a.name) # ;)

x = 20
y = 30

a(x,y) # IMPORTANT! first you must run function
print(a.z)
print(a.name * 5)

print('-'*12)
b() # IMPORTANT! first you must run function
print('price is: ' + str(b.give_me_price(5, 25)))
# print(b.blabla) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-28T16:44:02.573

我就是这样做的。

**代码**

```
def getMessage(a="", b="", c=""):
    def getErrorMessage(aa, bb):
        return "Error Message with/without params: {}{}".format(aa, bb)

    def getSuccessMessage(bb, cc):
        return "Success Message with/without params:  {}{}".format(bb, cc)

    def getWarningMessage(aa, cc):
        return "Warning Message with/without params:  {}{}".format(aa, cc)

    return {
        "getErrorMessage": getErrorMessage(a, b),
        "getSuccessMessage": getSuccessMessage(b, c),
        "getWarningMessage": getWarningMessage(a, c),
    }

a = "hello"
b = " World"
c = "!"
print(getMessage(a, b)["getErrorMessage"])
print(getMessage(b=b, c=c)["getSuccessMessage"])
print(getMessage(a=a, c=c)["getWarningMessage"])
print(getMessage(c=c)["getWarningMessage"]) 
```

**输出**

```
Error Message with/without params: hello World
Success Message with/without params:   World!
Warning Message with/without params:  hello!
Warning Message with/without params:  ! 
```

# wcf - 无法调试 WCF 服务

> ID：11154651
> 
> 赞同：1
> 
> 时间：2012-06-22T10:42:08.943
> 
> 标签：wcf, debugging, wcf-data-services

我在一个解决方案中有两个 WCF 服务（我们称之为服务解决方案）。我已经在远程机器上部署了这些服务。我有另一个解决方案，我通过在远程机器上创建对服务的引用来使用这些服务（我们称之为客户端解决方案）。这两个服务的代码在远程机器（AFAIK）上都是最新的，因为我已经为它部署了最新的代码。

问题是在服务解决方案中，我可以调试其中一项服务，但不能调试另一项服务。当我在其上放置断点时，失败的那个会给出此错误。

**当前不会命中断点。源代码与原始版本不同。**

问题是，两个 WCF 服务之间可能有什么不同，以允许一个可调试而另一个不可调试。

# zend-framework - 如何在 Zend Framework 的 URL 中隐藏一个特定的控制器名称

> ID：11154652
> 
> 赞同：0
> 
> 时间：2012-06-22T10:42:15.560
> 
> 标签：zend-framework, .htaccess, url-rewriting

我在 Zend Framework 中有一个站点。我想在 URL 中隐藏一个特定的控制器名称。解释下面的要求。

**当前网址**：[http](http://abcd.com/user/john) ://abcd.com/user/john （这是用户的个人资料页面）

**首选网址**：[http ://abcd.com/john](http://abcd.com/john)

首选 URL 将显示在浏览器中。此外，如果访问者在 url 中键入用户名（例如[http://abcd.com/smith ），浏览器将显示用户配置文件。](http://abcd.com/smith)

我的站点中还有一些其他控制器（例如[http://abcd.com/registration](http://abcd.com/registration)）并且不想修改或隐藏这些控制器名称。

我知道这很难区分哪个是用户名，哪个是 url 中的控制器，但我真的很想做到这一点。请建议我需要的。

请注意，我使用下面的 html 代码来显示用户个人资料链接。

```
<a href="<?php echo $site?>user/john">John</a> 
```

还在 bootstrap.php 文件中添加了下面提到的路由器。

$routeUser = new Zend_Controller_Router_Route ('user/:username/',array('controller' => 'User','action'=> 'index'));

$router->addRoute('user', $routeUser);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:07:01.473

路由以相反的顺序检查，因此您可以将用户路由更改为 just`:username`但是路由器无法知道这`example.com/registration`不是用户配置文件，这就是为什么这会破坏您的其他路由。解决此问题的最简单方法是在处理注册请求的用户路由之后添加另一个路由：

```
$router->addRoute('registration',
    new Zend_Controller_Router_Route('registration/:action', array(
        'module' => 'default',
        'controller' => 'registration',
        'action' => 'index'
    ))
); 
```

或者，如果您对 ZF 相当满意，并且希望在不破坏标准路由的情况下正确处理用户请求，您可以专门为您的用户配置文件请求创建一个自定义路由类。我不久前写了一篇关于如何做到这一点的博客文章，请参阅：[http ://tfountain.co.uk/blog/2010/9/9/vanity-urls-zend-framework](http://tfountain.co.uk/blog/2010/9/9/vanity-urls-zend-framework)

# solr - 如何将 2 个字段数据复制到 Solr 上的一个字段

> ID：11154656
> 
> 赞同：8
> 
> 时间：2012-06-22T10:42:35.157
> 
> 标签：solr

我在 solr 中有一个带有`Lat`和`Lng`字段的文档。我需要添加一个名为的新字段，`store`其中包含从`Lat`和获取的数据`Lng`。我尝试使用`copyField`字段，但出现错误：

> 字段存储不是多值的，并且是多个 copyFields 的目标 (2)

这是我的配置：

```
<fields>
  <field name="lat" type="sdouble" indexed="true" stored="true" required="true" multiValued="false" />
  <field name="lng" type="sdouble" indexed="true" stored="true" required="true" multiValued="false" /> 
  <field name="store" type="text" indexed="true" stored="true"/>
</fields> 

<copyField source="lat" dest="store"/> 
<copyField source="lng" dest="store"/> 
```

是否可以在同一目标字段中复制两个字段的内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-10-16T13:32:01.937

也许它已经过时了，但你可以使用“updateRequestProcessorChain”

```
<updateRequestProcessorChain name="composite-position">
  <processor class="solr.CloneFieldUpdateProcessorFactory">
    <str name="source">lat</str>
    <str name="source">lng</str>
    <str name="dest">store</str>
  </processor>
  <processor class="solr.ConcatFieldUpdateProcessorFactory">
    <str name="fieldName">store</str>
    <str name="delimiter">;</str>
  </processor>
  <processor class="solr.LogUpdateProcessorFactory" />
  <processor class="solr.RunUpdateProcessorFactory" />
</updateRequestProcessorChain> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-22T20:39:35.447

在没有上下文的情况下提出您的问题：

> 是否可以在同一个目标字段中复制两个字段的内容？”

答案是肯定的。示例模式通过将多个字段复制到一个公共的“文本”字段（多值）来实现这一点，从而使按一个字段进行搜索更简单。

但是查看更多上下文，您实际上要做的是确定 Solr 的带有 copyField 的 schema.xml 是否可以获取一对输入字段（在您的情况下为 lat 和 lon）并将它们与中间逗号连接到特定字段。答案是不。在将数据提供给 Solr 时，您必须以这种方式准备数据，或者如果您使用 DIH（DataImportHandler），则使用 DIH 转换器。我不愿提出替代方案，但作为一种技巧，您可以尝试将 lat 和 lon 放入 store_0_coordinate 和 store_1_coordinate （或者反过来）。但实际上，这不是推荐的方法，即使它可能有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T10:49:28.230

You could try to set `store` as `multivalued`

```
<field name="store" type="location" indexed="true" stored="true" multiValued="true" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T07:05:45.827

你可以尝试这样的事情：

[两个双在一个位置](https://stackoverflow.com/questions/8134958/in-solr-dih-import-two-double-in-one-location/8151210#8151210)

如果您可以使用 DIH（数据导入处理程序）。希望他们会有所帮助！

# xcode - 从核心数据生成报告

> ID：11154665
> 
> 赞同：3
> 
> 时间：2012-06-22T10:43:18.533
> 
> 标签：xcode, macos, cocoa, core-data, reporting-services

我正在开发一个类似于库存管理系统的 Mac OS X 应用程序。现在，我基本上需要包含一个为客户端生成报告的函数（可导出为 PDF）。

用户应选择他希望查看的报告，并且应显示适当的多页报告并可用于导出/打印。

现在在 Windows (VB) 中......有一个名为 CRYSTAL REPORTS 的第三方软件......这使得这样做非常容易。那么，Cocoa 有这样的替代品吗？

如果没有，我该如何从多页的核心数据生成报告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:02:58.213

您可以在 Cocoa 中轻松地从 HTML 生成 PDF 文件 - 阅读有关 stackoverflow 的其他[问题。](https://stackoverflow.com/questions/6316192/convert-html-file-to-pdf-document-in-ios-using-cocoa-touch)我还建议对 HTML 模板使用[GRMustache](https://github.com/groue/GRMustache)。

# php - 访问者模式对动态类型语言有用吗？

> ID：11154668
> 
> 赞同：10
> 
> 时间：2012-06-22T10:43:27.557
> 
> 标签：php, python, ruby, design-patterns, visitor-pattern

访问者模式允许在不扩展对象类的情况下编写对对象的操作。当然。但是为什么不直接编写一个全局函数或静态类来从外部操作我的对象集合呢？基本上，在像 java 这样的语言中，`accept()`出于技术原因需要一个方法；但是在我可以在没有`accept()`方法的情况下实现相同设计的语言中，访问者模式会变得微不足道吗？

解释：在访问者模式中，可访问的类（实体）有一个方法`.accept()`，它的工作是调用访问者的`.visit()`方法。我可以看到 java 示例的逻辑：访问者为它支持`.visit(n)`的每个可访问类型定义了不同的方法，并且必须使用技巧在运行时在它们之间进行选择。但是像 python 或 php 这样的语言具有动态类型，并且没有方法重载。如果我是访问者，我可以在不知道实体类型甚至方法的完整签名的情况下调用实体方法（例如 ）。（这就是“双重调度”问题，对吧？）`n``.accept()``.serialize()`

我知道一个接受方法可以将受保护的数据传递给访问者，但有什么意义呢？如果数据暴露给访问者类，它实际上是类接口的一部分，因为它的细节在类之外很重要。无论如何，暴露私人数据从来都不是访问者模式的重点。

所以似乎在 python、ruby 或 php 中，我可以在访问对象中实现一个类似访问者的类，而不需要接受方法（并且没有反射），对吧？如果我可以使用一系列异构对象并调用它们的公共方法而无需“访问”类的任何合作，这还值得称为“访问者模式”吗？我缺少模式的本质，还是归结为“编写一个从外部操纵对象以执行操作的新类”？

PS。我看过很多关于 SO 和其他地方的讨论，但找不到任何可以解决*这个*问题的东西。欢迎指点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-17T10:48:54.237

访问者特别有用的地方是访问者需要打开访问者类型的地方，无论出于何种原因，您都不想将这些知识编码到访问者中（想想插件架构）。考虑以下 Python 代码：

## 访客风采

```
class Banana(object):
      def visit(self, visitor):
          visitor.process_banana(self) 

class Apple(object):
      def visit(self, visitor):
          visitor.process_apple(self) 

class VisitorExample(object):
      def process_banana(self, banana):
          print "Mashing banana: ", banana

      def process_banana(self, apple):
          print "Crunching apple: ", apple 
```

（请注意，我们可以使用基类/mixin 压缩访问者逻辑）。

与之比较：

## 非访客风格

```
class NonVisitorVisitor(object):
      def process(self, fruit):
          verb = {Banana: "Mashing banana: ", 
                  Apple: "Crunching apple: "}[type(fruit)]
          print verb, fruit 
```

在第二个示例中，水果不需要对“访问者”的任何特殊支持，“访问者”处理给定类型的逻辑缺失。

相比之下，在 Java 或 C++ 中，第二个例子是不可能的，访问方法（在被访问者中）可以使用一个名称来指代所有版本的进程方法；编译器将选择适用于所传递类型的版本；并且访问者可以轻松地为访问者类型的根类提供默认实现。在被访问者中也有必要有一个访问方法，因为方法变体（例如`process(Banana b)`vs `process(Apple a)`）是在编译时为被访问者的`visit`方法生成的代码中选择的。

因此，在 Python 或 Ruby 等没有参数类型分派的语言中（或者更确切地说，程序员必须自己实现它），就不需要访问者模式。或者，有人可能会说访问者模式在没有通过访问者方法调度的情况下会更好地实现。

一般来说，在 Python、Ruby 或 Smalltalk 等动态语言中，最好让“visitee”类携带所需的所有信息（此处为动词适用），并在必要时提供支持“visitor”的钩子，例如作为命令或策略模式，或使用此处显示的非访客模式。

# 结论

非访问者是实现类型切换逻辑的一种简洁方式，尽管显式类型切换通常是代码异味。请记住，Java 和 C++ 的执行方式也是在访问者中显式切换；这些语言中模式的优雅之处在于它避免了在访问者中具有显式切换逻辑，这在具有无类型变量的动态语言中是不可能的。因此，顶部的访问者模式对动态语言不利，因为它再现了静态语言中的访问者模式试图避免的罪恶。

使用模式的问题在于，与其盲目地复制 UML 图，您必须了解它们试图实现的目标，以及它们如何通过具体考虑的语言机制来实现这些目标。在这种情况下，实现相同优点的模式看起来不同，并且具有不同的调用模式。这样做将使您能够使它们适应不同的语言，但也可以适应同一语言中的不同具体情况。

更新：这里有一篇关于实现这种模式的红宝石文章：http: [//blog.rubybestpractices.com/posts/aaronp/001_double_dispatch_dance.html](http://blog.rubybestpractices.com/posts/aaronp/001_double_dispatch_dance.html)

双重派遣对我来说似乎是被迫的；据我所知，你可以取消它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:24:41.880

这个答案是在对 PHP 等一无所知的情况下做出的，但是访问者通常需要在实体上调用的不仅仅是一个方法（你提到了“序列化”）。当在具体的访问者上调用 Visit() 方法时，访问者能够为每个实体子类型运行不同的代码。我看不出这与动态类型语言有何不同（尽管我希望得到一些反馈）。

Visitor 的另一个好处是，它提供了在每个实体上运行的代码与枚举实体的代码的清晰分离。这至少在一个大型项目中为我节省了一些严重的代码重复。

顺便说一句，我在没有方法重载的语言中使用了访问者。您只需将 Visit(TypeN n) 替换为 VisitN(TypeN n)。

* * *

从评论跟进。

这是一个访问者伪代码，如果没有访问对象的合作（至少没有 switch 块），我不知道该怎么做：

```
abstract class ScriptCommand
{
   void Accept(Visitor v);
}

abstract class MoveFileCommand
{
   string TargetFile;
   string DestinationLocation;

   void Accept(Visitor v)
   {
      v.VisitMoveFileCmd(this);  // this line is important because it eliminates the switch on object type
   }
}

abstract class DeleteFileCommand
{
   string TargetFile;

   void Accept(Visitor v)
   {
      v.VisitDeleteFileCmd(this); // this line is important because it eliminates the switch on object type

   }
}

// etc, many more commands

abstract class CommandVisitor
{
   void VisitMoveFileCmd(MoveFileCommand cmd);
   void VisitDeleteFileCmd(DeleteFileCommand cmd);
   // etc
}

// concrete implementation

class PersistCommandVisitor() inherits CommandVisitor
{
   void VisitMoveFileCmd(MoveFileCommand cmd)
   {
      // save the MoveFileCommand instance to a file stream or xml doc
      // this code is type-specific because each cmd subtype has vastly
      // different properties
   }

   void VisitDeleteFileCmd(DeleteFileCommand cmd)
   { 
      // save the DeleteFileCommand instance to a file stream or xml doc
      // this code is type-specific because each cmd subtype has vastly
      // different properties
   }

} 
```

访问者基础结构允许处理各种命令子类型，而无需选择 case、swithc、if else。

关于处理枚举的访问者，我认为您是在限制自己。这并不是说不能涉及协作类（抽象的 VisitorEnumerator）。

例如，请注意此访问者不知道枚举顺序：

```
class FindTextCommandVisitor() inherits CommandVisitor
{
   string TextToFind;
   boolean TextFound = false;

   void VisitMoveFileCmd(MoveFileCommand cmd)
   {
      if (cmd.TargetFile.Contains(TextToFind) Or cmd.DestinationLocation.Contains(TextToFind))
         TextFound = true;
   }

   void VisitDeleteFileCmd(DeleteFileCommand cmd)
   { 
      // search DeleteFileCommand's properties
   }

} 
```

这允许它像这样被重用：

```
ScriptCommand FindTextFromTop(string txt)
{
   FindTextCommandVisitor v = new FindTextCommandVisitor();
   v.TextToFind = txt;
   for (int cmdNdx = 0; cmdNdx < CommandList.Length; cmdNdx++)
   {
      CommandList[cmdNdx].Accept(v);
      if (v.TextFound)
         return CommandList[cmdNdx];  // return the first item matching
   }
} 
```

并以相同的访问者以相反的方式枚举：

```
ScriptCommand FindTextFromBottom(string txt)
{
   FindTextCommandVisitor v = new FindTextCommandVisitor();
   v.TextToFind = txt;
   for (int cmdNdx = CommandList.Length-1; cmdNdx >= 0; cmdNdx--)
   {
      CommandList[cmdNdx].Accept(v);
      if (v.TextFound)
         return CommandList[cmdNdx];  // return the first item matching
   }
} 
```

在实际代码中，我将为枚举器创建一个基类，然后将其子类化以处理不同的枚举场景，同时传入具体的访问者子类以完全解耦它们。希望您能看到保持枚举分开的力量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:19:12.313

也许，这取决于语言。

访问者模式解决了不具有[multiple-dispatch](http://en.wikipedia.org/wiki/Multiple_dispatch)的语言中的双重和多重层次问题。以 Ruby、Lisp 和 Python 为例。它们都是动态类型语言，但标准中只有 CLOS-Lisp 实现了多分派。这也称为多方法，Python 和 Ruby 显然可以通过使用扩展来实现它。

[我喜欢维基百科](http://en.wikipedia.org/wiki/Visitor_pattern#Details)上这个奇怪的评论：

> Lisp 的对象系统 [CLOS] 及其多重分派并没有取代访问者模式，而只是提供了一个更简洁的实现，其中模式几乎消失了。

在其他语言中，即使是静态类型的语言，您也必须解决缺少多方法的问题。访问者模式就是这样一种方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T12:06:40.717

我认为您正在交替使用访问者模式和双重调度。当你说，

*如果我可以使用一系列异构对象并调用它们的公共方法而无需“访问”类的任何合作，这还值得称为“访问者模式”吗？*

和

*编写一个新类，从外部操作您的对象以执行操作”？*

您正在定义 Double dispatch 是什么。当然，访问者模式是通过双重调度实现的。但是模式本身还有更多的东西。

*   每个访问者都是一组元素（实体）的算法，可以插入新访问者而无需更改现有代码。开/关原则。
*   频繁添加新元素时，最好避免访问者模式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-01T02:01:56.807

对我来说，访问者模式意味着根据对象的类型向对象添加新功能。显然有 if/else 梯子来执行类型特定的操作是*不好的*（我想对此进行解释:(）。在 python 中，我能够做到这一点，没有整个双重调度戏剧，通过*猴子补丁*（另一个坏主意）确定函数作为类方法。

[我在这里](https://stackoverflow.com/questions/39799973/dynamic-method-binding-with-inheritance-in-python)问过这个。

在下面的示例中，假设有一个基类`ASTNode`和一个大类层次结构（`ASTVar`、`ASTModule`、`ASTIf`、`ASTConst`等）。这些类只有其特定的数据属性和琐碎的方法。

然后，假设类代码被锁定（或者功能可能与数据分离）。现在，我有动态分配给类的方法。请注意，在下面的示例中，迭代/递归方法调用名称（stringify）与函数名称（*nodeType* _stringify）不同。

```
def ASTNode__stringify(self):
    text = str(self)
    for child in self.children:
            text += ", { " + child.stringify() + " }"
    return text

def ASTConst__stringify(self):
    text = str(self)
    for child in self.children:
            text += ", [ " + child.stringify() + " ]"
    return text

def ASTIf__stringify(self):
    text = str(self)
    text += "__cond( " + self.op1.stringify() + ")"
    text += "__then { " + self.op2.stringify() + "}"
    text += "__else {" + self.op3.stringify() + "}"
    return text 
```

我可以随时使用功能扩展类（可能在模块初始化期间一次性）（坏主意？）。

```
# mainModule1.py
def extend_types():
    # ASTNode and all derived class get this method
    ASTNode.stringify = ASTNode__stringify
    ASTConst.stringify = ASTConst__stringify
    ASTIf.stringify = ASTIf__stringify 
```

现在，调用`my_root_node.stringify()`将适当地调用正确的子方法（递归），而无需显式检查类型。

这种技术是不是类似于向 Javascript 原型添加方法（[JS 中的访问者模式](http://www.dofactory.com/javascript/visitor-design-pattern)）。

这不就是访客模式的目标吗？代码锁定类型的扩展？当然，在动态类型的 python 中不需要使用双重调度（`VisitorObject.visit(ConcreteObject)`被调用）。`ConcreteObject.Accept(VisitorObject)`可能有人会为动态类型语言形式化它，我们手头会有一个新模式，或者没有。*毕竟，模式是被发现的，而不是发明的*（我不记得我在哪里读到的）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-23T06:38:57.893

访问者模式做两件事：

*   允许临时多态性（相同的功能，但对不同的“类型”做不同的事情）。
*   无需更改数据提供者即可添加新的消费算法。

您可以在没有访问者或运行时类型信息的情况下使用动态语言进行第二次操作。但是第一个需要一些明确的机制，或者像访问者这样的设计模式。

# php - Zend 的 Http 身份验证

> ID：11154669
> 
> 赞同：3
> 
> 时间：2012-06-22T10:43:28.830
> 
> 标签：php, http, zend-framework

我想用 zend 做一个 http auth，我读了那篇文章[http://framework.zend.com/manual/en/zend.auth.adapter.http.html](http://framework.zend.com/manual/en/zend.auth.adapter.http.html)但我不认为它有价值（为什么密码是取自外部文件...？）。我知道它可以简单地用标题来完成：

```
header('WWW-Authenticate: Basic realm=sdfsdf');
header('HTTP/1.0 401 Unauthorized');
die; 
```

但由于我们使用的是 Zend，我想转换它：

```
$response->setHeader('WWW-Authenticate', 'Basic realm="asda"', true);
$response->setHeader('Status', '401 Unauthorized', true); 
```

它不会接受它，没有任何反应。即使它有效，我也不能`die();`在此之后立即使用。有人能指出出路吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T22:01:45.730

您不必使用文件解析器。您可以编写自己的解析器类，只需扩展 Zend_Auth_Adapter_Http_Resolver_Interface：

```
class MyOwnResolver implements Zend_Auth_Adapter_Http_Resolver_Interface
{
    /**
     * Resolve username/realm to password/hash/etc.
     *
     * @param  string $username Username
     * @param  string $realm    Authentication Realm
     * @return string|false User's shared secret, if the user is found in the
     *         realm, false otherwise.
     */
    public function resolve($username, $realm)
    {
        if ($username == 'testUser' && $realm == 'testPassword') {
            return $realm;
        } else {
            return false;
        }
    }
}

/* In your controller */

$config = array(
    'accept_schemes' => 'basic',
    'realm'          => 'My Realm',
    'nonce_timeout'  => 3600,
);
$adapter = new Zend_Auth_Adapter_Http($config);
$result = $adapter->setBasicResolver(new MyOwnResolver())
        ->setRequest($this->getRequest())
        ->setResponse($this->getResponse())
        ->authenticate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T19:41:00.550

带有示例动作控制器的示例：

```
 public function preDispatch() {

        if (
            !isset($_SERVER['PHP_AUTH_USER']) 
            || !isset($_SERVER['PHP_AUTH_PW']) 
            || 'admin' != $_SERVER['PHP_AUTH_USER'] 
            || 'admin' != $_SERVER['PHP_AUTH_PW']
        ) {
            $this->getResponse()->setHeader('WWW-Authenticate', 'Basic realm="Authentication required"');
            $this->getResponse()->setHttpResponseCode(401);
            if ('not-auth' !== $this->getRequest()->getActionName()) {
                $this->_forward('not-auth');
            }
        }
    }

    public function indexAction() { }

    public function notAuthAction() { }

} 
```

在这里找到了这个聪明的解决方案。 [https://gist.github.com/umpirsky/1148691](https://gist.github.com/umpirsky/1148691)

# c# - 获取给定日期的正确周数

> ID：11154673
> 
> 赞同：267
> 
> 时间：2012-06-22T10:43:40.563
> 
> 标签：c#, asp.net, .net, date

我用谷歌搜索了很多，找到了很多解决方案，但没有一个能给我正确的 2012-12-31 周数。甚至 MSDN ([链接](http://msdn.microsoft.com/en-us/library/system.globalization.calendar.getweekofyear.aspx)) 上的示例也失败了。

2012-12-31 是星期一，因此应该是第 1 周，但我尝试的每种方法都给了我 53。以下是我尝试过的一些方法：

来自 MDSN 库：

```
DateTimeFormatInfo dfi = DateTimeFormatInfo.CurrentInfo;
Calendar cal = dfi.Calendar;

return cal.GetWeekOfYear(date, dfi.CalendarWeekRule, dfi.FirstDayOfWeek); 
```

解决方案2：

```
return new GregorianCalendar(GregorianCalendarTypes.Localized).GetWeekOfYear(date, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday); 
```

解决方案3：

```
CultureInfo ciCurr = CultureInfo.CurrentCulture;
int weekNum = ciCurr.Calendar.GetWeekOfYear(dtPassed, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday);
return weekNum; 
```

**更新**

当日期为 2012-12-31 时，以下方法实际上返回 1。换句话说，我的问题是我的方法没有遵循 ISO-8601 标准。

```
// This presumes that weeks start with Monday.
// Week 1 is the 1st week of the year with a Thursday in it.
public static int GetIso8601WeekOfYear(DateTime time)
{
    // Seriously cheat.  If its Monday, Tuesday or Wednesday, then it'll 
    // be the same week# as whatever Thursday, Friday or Saturday are,
    // and we always get those right
    DayOfWeek day = CultureInfo.InvariantCulture.Calendar.GetDayOfWeek(time);
    if (day >= DayOfWeek.Monday && day <= DayOfWeek.Wednesday)
    {
        time = time.AddDays(3);
    }

    // Return the week of our adjusted day
    return CultureInfo.InvariantCulture.Calendar.GetWeekOfYear(time, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday);
} 
```

* * *

## 回答 #1

> 赞同：365
> 
> 时间：2012-06-22T11:13:01.643

正如此[MSDN 页面](https://docs.microsoft.com/dotnet/api/system.globalization.calendarweekrule)中所述，ISO8601 周数和 .Net 周数之间存在细微差别。

您可以参考 MSDN 博客中的这篇文章以获得更好的解释：“ [Microsoft .Net 中的 ISO 8601 Week of Year format](https://docs.microsoft.com/archive/blogs/shawnste/iso-8601-week-of-year-format-in-microsoft-net) ”

简而言之，.Net 允许将数周划分为数年，而 ISO 标准则不允许。在文章中还有一个简单的函数可以获取一年中最后一周的正确 ISO 8601 周数。

**更新**下面的方法实际上返回 1`2012-12-31`在 ISO 8601（例如德国）中是正确的。

```
// This presumes that weeks start with Monday.
// Week 1 is the 1st week of the year with a Thursday in it.
public static int GetIso8601WeekOfYear(DateTime time)
{
    // Seriously cheat.  If its Monday, Tuesday or Wednesday, then it'll 
    // be the same week# as whatever Thursday, Friday or Saturday are,
    // and we always get those right
    DayOfWeek day = CultureInfo.InvariantCulture.Calendar.GetDayOfWeek(time);
    if (day >= DayOfWeek.Monday && day <= DayOfWeek.Wednesday)
    {
        time = time.AddDays(3);
    }

    // Return the week of our adjusted day
    return CultureInfo.InvariantCulture.Calendar.GetWeekOfYear(time, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday);
} 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2018-06-19T10:24:33.237

好消息！添加到 .NET Core的[拉取请求](https://github.com/dotnet/coreclr/pull/18456)`System.Globalization.ISOWeek`刚刚合并，目前计划在 3.0 版本中发布。希望它会在不久的将来传播到其他 .NET 平台。

该类型具有以下签名，应涵盖大多数[ISO 周](https://en.wikipedia.org/wiki/ISO_week_date)需求：

```
namespace System.Globalization
{
    public static class ISOWeek
    {
        public static int GetWeekOfYear(DateTime date);
        public static int GetWeeksInYear(int year);
        public static int GetYear(DateTime date);
        public static DateTime GetYearEnd(int year);
        public static DateTime GetYearStart(int year);
        public static DateTime ToDateTime(int year, int week, DayOfWeek dayOfWeek);
    }
} 
```

[您可以在此处](https://github.com/dotnet/runtime/blob/b41f1c5f2fde25d752d857a54c3af24145060cdd/src/libraries/System.Private.CoreLib/src/System/Globalization/ISOWeek.cs)找到源代码。

**更新**：这些 API 也[包含在 .NET Standard 的 2.1 版本中](https://github.com/dotnet/standard/pull/963)。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-06-22T11:00:33.293

一年可以有超过 52 周。每年有 52 个整周 + 1 或 +2 天（闰年）。他们弥补了第 53 周。

*   52 周 * 7 天 = 364 天。

所以每一年你至少有一个额外的一天。两个闰年。这些额外的日子是否算作各自的独立周？

实际上有多少周取决于您一周的开始日期。让我们考虑一下 2012 年的情况。

*   美国（周日 -> 周六）：52 周 + 2012-12-30 和 2012-12-31 的短短 2 天一周。这总共需要 53 周。今年的最后两天（周日+周一）组成了他们自己的短周。

检查您当前的文化设置，看看它使用什么作为一周的第一天。

如您所见，结果是 53 是正常的。

*   欧洲（星期一 -> 星期日）：1 月 2 日（2012-1-2）是第一个星期一，所以这是第一周的第一天。询问 1 月 1 日的周数，您将得到 52，因为它被认为是 2011 年最后一周的一部分。

甚至可能有第 54 周。每 28 年发生一次，将 1 月 1 日和 12 月 31 日视为不同的周。也应该是闰年。

例如，2000 年有 54 周。1 月 1 日（星期六）是第一个工作日，12 月 31 日（星期日）是第二个工作日。

```
var d = new DateTime(2012, 12, 31);
CultureInfo cul = CultureInfo.CurrentCulture;

var firstDayWeek = cul.Calendar.GetWeekOfYear(
    d,
    CalendarWeekRule.FirstDay,
    DayOfWeek.Monday);

int weekNum = cul.Calendar.GetWeekOfYear(
    d,
    CalendarWeekRule.FirstDay,
    DayOfWeek.Monday);

int year = weekNum == 52 && d.Month == 1 ? d.Year - 1 : d.Year;
Console.WriteLine("Year: {0} Week: {1}", year, weekNum); 
```

打印出来：年份：2012 周：54

将上面示例中的 CalendarWeekRule 更改为 FirstFullWeek 或 FirstFourDayWeek，您将返回 53。让我们将开始日期保留在星期一，因为我们正在处理德国。

所以第 53 周从 2012 年 12 月 31 日星期一开始，持续一天然后停止。

53 是正确答案。如果想尝试，请将文化更改为德国。

```
CultureInfo cul = CultureInfo.GetCultureInfo("de-DE"); 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2016-08-19T08:59:53.883

这是这样的：

```
public int GetWeekNumber()
{
    CultureInfo ciCurr = CultureInfo.CurrentCulture;
    int weekNum = ciCurr.Calendar.GetWeekOfYear(DateTime.Now, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday);
    return weekNum;
} 
```

最重要的是`CalendarWeekRule`参数。

见这里： [https ://msdn.microsoft.com/query/dev14.query?appId=Dev14IDEF1&l=IT-IT&k=k(System.Globalization.CalendarWeekRule);k(TargetFrameworkMoniker-.NETFramework](https://msdn.microsoft.com/query/dev14.query?appId=Dev14IDEF1&l=IT-IT&k=k(System.Globalization.CalendarWeekRule);k(TargetFrameworkMoniker-.NETFramework)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-09-18T13:19:19.393

由于似乎没有产生正确 ISO-8601 周数的 .Net 文化，我宁愿完全绕过内置的周确定，并手动进行计算，而不是尝试纠正部分正确的结果。

我最终得到的是以下扩展方法：

```
/// <summary>
/// Converts a date to a week number.
/// ISO 8601 week 1 is the week that contains the first Thursday that year.
/// </summary>
public static int ToIso8601Weeknumber(this DateTime date)
{
    var thursday = date.AddDays(3 - date.DayOfWeek.DayOffset());
    return (thursday.DayOfYear - 1) / 7 + 1;
}

/// <summary>
/// Converts a week number to a date.
/// Note: Week 1 of a year may start in the previous year.
/// ISO 8601 week 1 is the week that contains the first Thursday that year, so
/// if December 28 is a Monday, December 31 is a Thursday,
/// and week 1 starts January 4.
/// If December 28 is a later day in the week, week 1 starts earlier.
/// If December 28 is a Sunday, it is in the same week as Thursday January 1.
/// </summary>
public static DateTime FromIso8601Weeknumber(int weekNumber, int? year = null, DayOfWeek day = DayOfWeek.Monday)
{
    var dec28 = new DateTime((year ?? DateTime.Today.Year) - 1, 12, 28);
    var monday = dec28.AddDays(7 * weekNumber - dec28.DayOfWeek.DayOffset());
    return monday.AddDays(day.DayOffset());
}

/// <summary>
/// Iso8601 weeks start on Monday. This returns 0 for Monday.
/// </summary>
private static int DayOffset(this DayOfWeek weekDay)
{
    return ((int)weekDay + 6) % 7;
} 
```

首先，`((int)date.DayOfWeek + 6) % 7)`确定星期几，0=星期一，6=星期日。

`date.AddDays(-((int)date.DayOfWeek + 6) % 7)`确定请求的周数之前的星期一的日期。

三天后是目标星期四，它决定了一周的年份。

如果将一年中的（从零开始的）天数除以七（向下舍入），则得到一年中的（从零开始的）周数。

在 c# 中，整数计算结果隐式向下舍入。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-01-26T16:27:00.507

在 .NET 3.0 及更高版本中，您可以使用[`ISOWeek.GetWeekOfDate`-Method](https://docs.microsoft.com/en-us/dotnet/api/system.globalization.isoweek.getweekofyear)。

请注意，年份 + 周数格式中的年份可能与年份不同，`DateTime`因为周数跨越年份边界。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-09-30T16:31:10.250

从*il_guru*上面的代码 C# 到 Powershell 端口：

```
function GetWeekOfYear([datetime] $inputDate)
{
   $day = [System.Globalization.CultureInfo]::InvariantCulture.Calendar.GetDayOfWeek($inputDate)
   if (($day -ge [System.DayOfWeek]::Monday) -and ($day -le [System.DayOfWeek]::Wednesday))
   {
      $inputDate = $inputDate.AddDays(3)
   }

   # Return the week of our adjusted day
   $weekofYear = [System.Globalization.CultureInfo]::InvariantCulture.Calendar.GetWeekOfYear($inputDate, [System.Globalization.CalendarWeekRule]::FirstFourDayWeek, [System.DayOfWeek]::Monday)
   return $weekofYear
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-03-12T06:47:31.453

这是[il_guru](https://stackoverflow.com/a/11155102/7108481)[答案](https://stackoverflow.com/a/11155102/7108481)的扩展版本和可空版本。

## 延期：

```
public static int GetIso8601WeekOfYear(this DateTime time)
{
    var day = CultureInfo.InvariantCulture.Calendar.GetDayOfWeek(time);
    if (day >= DayOfWeek.Monday && day <= DayOfWeek.Wednesday)
    {
        time = time.AddDays(3);
    }

    return CultureInfo.InvariantCulture.Calendar.GetWeekOfYear(time, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday);
} 
```

## 可空：

```
public static int? GetIso8601WeekOfYear(this DateTime? time)
{
    return time?.GetIso8601WeekOfYear();
} 
```

### 用途：

```
new DateTime(2019, 03, 15).GetIso8601WeekOfYear(); //returns 11
((DateTime?) new DateTime(2019, 03, 15)).GetIso8601WeekOfYear(); //returns 11
((DateTime?) null).GetIso8601WeekOfYear(); //returns null 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-06-11T09:00:28.587

```
var cultureInfo = CultureInfo.CurrentCulture;
var calendar = cultureInfo.Calendar;

var calendarWeekRule = cultureInfo.DateTimeFormat.CalendarWeekRule;
var firstDayOfWeek = cultureInfo.DateTimeFormat.FirstDayOfWeek;
var lastDayOfWeek = cultureInfo.LCID == 1033 //En-us
                    ? DayOfWeek.Saturday
                    : DayOfWeek.Sunday;

var lastDayOfYear = new DateTime(date.Year, 12, 31);

var weekNumber = calendar.GetWeekOfYear(date, calendarWeekRule, firstDayOfWeek);

 //Check if this is the last week in the year and it doesn`t occupy the whole week
return weekNumber == 53 && lastDayOfYear.DayOfWeek != lastDayOfWeek 
       ? 1  
       : weekNumber; 
```

它适用于美国和俄罗斯文化。ISO 8601 也将是正确的，因为俄罗斯周从星期一开始。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-05-02T11:28:38.837

使用 c# 和 DateTime 类确定周数 ISO 8601 样式的最简单方法。

问这个：一年中的多少个星期四是本周的星期四。答案等于想要的周数。

```
var dayOfWeek = (int)moment.DayOfWeek;
// Make monday the first day of the week
if (--dayOfWeek < 0)
    dayOfWeek = 6;
// The whole nr of weeks before this thursday plus one is the week number
var weekNumber = (moment.AddDays(3 - dayOfWeek).DayOfYear - 1) / 7 + 1; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-02-02T08:33:42.463

如果您没有 .NET 5.0，请扩展 DateTime 类以包含周数。

```
public static class Extension {
    public static int Week(this DateTime date) {
        var day = (int)CultureInfo.CurrentCulture.Calendar.GetDayOfWeek(date);
        return CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(date.AddDays(4 - (day == 0 ? 7 : day)), CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday);
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-06-22T10:58:45.340

问题是：你如何定义一周是在 2012 年还是在 2013 年？我猜你的假设是，由于一周中有 6 天在 2013 年，因此应该将本周标记为 2013 年的第一周。

不确定这是否是正确的方法。那一周从 2012 年开始（12 月 31 日星期一），所以应该标记为 2012 年的最后一周，因此应该是 2012 年 53 日。2013 年的第一周应该从 7 日星期一开始。

现在，您可以使用星期几信息来处理边缘周（一年中的第一周和最后一周）的特殊情况。这完全取决于你的逻辑。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-03-01T06:40:40.123

```
 DateTimeFormatInfo dfi = DateTimeFormatInfo.CurrentInfo;
  DateTime date1 = new DateTime(2011, 1, 1);
  Calendar cal = dfi.Calendar;

  Console.WriteLine("{0:d}: Week {1} ({2})", date1, 
                    cal.GetWeekOfYear(date1, dfi.CalendarWeekRule, 
                                      dfi.FirstDayOfWeek),
                    cal.ToString().Substring(cal.ToString().LastIndexOf(".") + 1)); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-02-05T08:23:20.030

根据 il_guru 的回答，我根据自己的需要创建了这个版本，它还返回了年份组件。

```
 /// <summary>
    /// This presumes that weeks start with Monday.
    /// Week 1 is the 1st week of the year with a Thursday in it.
    /// </summary>
    /// <param name="time">The date to calculate the weeknumber for.</param>
    /// <returns>The year and weeknumber</returns>
    /// <remarks>
    /// Based on Stack Overflow Answer: https://stackoverflow.com/a/11155102
    /// </remarks>
    public static (short year, byte week) GetIso8601WeekOfYear(DateTime time)
    {
        // Seriously cheat.  If its Monday, Tuesday or Wednesday, then it'll
        // be the same week# as whatever Thursday, Friday or Saturday are,
        // and we always get those right
        DayOfWeek day = CultureInfo.InvariantCulture.Calendar.GetDayOfWeek(time);
        if (day >= DayOfWeek.Monday && day <= DayOfWeek.Wednesday)
        {
            time = time.AddDays(3);
        }
        // Return the week of our adjusted day
        var week = (byte)CultureInfo.InvariantCulture.Calendar.GetWeekOfYear(time, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday);
        return ((short)(week >= 52 & time.Month == 1 ? time.Year - 1 : time.Year), week);
    } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-05-21T10:37:35.020

这两种方法会有所帮助，假设我们的一周从星期一开始

```
/// <summary>
    /// Returns the weekId
    /// </summary>
    /// <param name="DateTimeReference"></param>
    /// <returns>Returns the current week id</returns>
    public static DateTime GetDateFromWeek(int WeekReference)
    {
        //365 leap
        int DaysOffset = 0;
        if (WeekReference > 1)
        {
            DaysOffset = 7;
            WeekReference = WeekReference - 1;
        }
        DateTime DT = new DateTime(DateTime.Now.Year, 1, 1);
        int CurrentYear = DT.Year;
        DateTime SelectedDateTime = DateTime.MinValue;

        while (CurrentYear == DT.Year)
        {
            int TheWeek = WeekReportData.GetWeekId(DT);
            if (TheWeek == WeekReference)
            {
                SelectedDateTime = DT;
                break;
            }
            DT = DT.AddDays(1.0D);
        }

        if (SelectedDateTime == DateTime.MinValue)
        {
            throw new Exception("Please check week");
        }

        return SelectedDateTime.AddDays(DaysOffset);
    }
/// <summary>
    /// Returns the weekId
    /// </summary>
    /// <param name="DateTimeReference"></param>
    /// <returns>Returns the current week id</returns>
    public static int GetWeekId(DateTime DateTimeReference)
    {
        CultureInfo ciCurr = CultureInfo.InvariantCulture;
        int weekNum = ciCurr.Calendar.GetWeekOfYear(DateTimeReference,
        CalendarWeekRule.FirstFullWeek, DayOfWeek.Monday);
        return weekNum;
    } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-02-12T08:37:27.040

在 PowerShell 7.xy 中：如果您需要匹配的 WeekYear，您将需要以下两个代码行。

```
[System.Globalization.ISOWeek]::GetWeekOfYear((get-date))
[System.Globalization.ISOWeek]::GetYear((get-date)) 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2012-06-22T10:54:25.310

一年有 52 周和 1 天或 2 天（52 x 7 = 364）。2012-12-31 将是第 53 周，这一周只有 2 天，因为 2012 年是一圈年。

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2020-02-06T06:11:13.823

```
public int GetWeekNumber()
{
   CultureInfo ciCurr = CultureInfo.CurrentCulture;
   int weekNum = ciCurr.Calendar.GetWeekOfYear(DateTime.Now, 
   CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday);
   return weekNum;
} 
```

# android - 由于第二个中的列表视图，选项卡中的第三个子活动不起作用

> ID：11154674
> 
> 赞同：0
> 
> 时间：2012-06-22T10:43:47.260
> 
> 标签：android, listview, tags, adapter, subactivity

我有一个 TabInterface.java 托管五个选项卡。在其中一个选项卡中，我正在使用子活动。当我单击 AddBook 选项卡（扩展 ActivityGroup）时，搜索书页面会正确加载。当我单击搜索按钮时，会生成书籍列表。当我点击这本书时，必须打开一个新页面，但它的程序运行正常，但屏幕上没有显示任何内容。

**TabInterface.java**

```
public class TabInterface extends TabActivity
{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.tablayout);
  Resources res = getResources();
  TabHost tabHost = getTabHost();
  LocalActivityManager mlam = new LocalActivityManager(this, false);
  mlam.dispatchCreate(savedInstanceState);
  ............................................
  intent = new Intent().setClass(this, AddBook.class);
  spec = tabHost.newTabSpec("AddBook").setIndicator("Add Book", res.getDrawable(R.drawable.tab_icons)).setContent(intent);
  tabHost.addTab(spec);
  ..............................................` 
```

**AddBook.java**

```
...........
Intent i = new Intent(this.getBaseContext(), BookList.class);
replaceContentView("blist", i, getApplicationContext());
........
public void replaceContentView(String id, Intent newIntent, Context c)
{
  View view = getLocalActivityManager().startActivity(id, newIntent.addFlags(Intent.FLAG_ACTIVITY_CLE AR_TOP)).getDecorView();
  this.setContentView(view);
}
.......... 
```

**BookList.java**

```
 ......................

 private class BookAdapter extends ArrayAdapter < Books > //my custom adater
 ...................
 public View getView(final int position, View convertView, ViewGroup parent)
 ...................

 //in getView function
 v.setOnClickListener(new View.OnClickListener()
 {
   public void onClick(View v)
   {
     Intent k = new Intent(getBaseContext(), BookNew.class);
     AddBook ab = (AddBook) getParent();
     ab.replaceContentView("bnew", k, getApplicationContext());
   }
 }

 ................... 
```

第三个子活动 BookNew.java 运行正常，但未显示输出。当没有标签显示时它工作正常。我可以知道我错在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:38:30.747

奇怪没有人能回答我的问题。在花了大约 5-6 天后，我找到了一个解决方案。它没有显示的原因是因为我使用了 notfyDataSetChanged() 所以它没有绘制下一个片段。

# mysql - Mysql 程序输出负值

> ID：11154676
> 
> 赞同：-1
> 
> 时间：2012-06-22T10:44:02.087
> 
> 标签：mysql, stored-procedures

我做了一个程序，其中两个查询返回值

> 甲和乙

a和b的减法是c

```
c = a-b; 
```

如果 c 的值为正，则程序返回正确的值，如果 c 的值为负，则程序返回 NULL。

这是我的程序。

```
DELIMITER $$

USE `db`$$

DROP PROCEDURE IF EXISTS `getOutStandingBalance`$$

CREATE DEFINER=`root`@`%` PROCEDURE `getOutStandingBalance`(OUT Total DOUBLE SIGNED,IN OID INT)
    DETERMINISTIC
    COMMENT 'A procedure'
BEGIN
    DECLARE Credit DOUBLE;
    DECLARE Debit  DOUBLE;
    SELECT SUM(transaction.Amount) INTO Credit FROM `transaction` WHERE transaction.IsDeleted=0 AND transaction.IsCredit=1 AND transaction.OID=OID;

    SELECT SUM(transaction.Amount) INTO Debit FROM `transaction` WHERE transaction.IsDeleted=0 AND transaction.IsCredit=0 AND transaction.OID=OID;

    SET Total = (Credit-Debit);
END$$

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:49:01.023

如果没有为交易的贷方或借方找到任何行，则变量将为`NULL`。在 SQL 中，任何带有 a 的计算都会`NULL`产生`NULL`.

要修复，请执行以下操作：

```
SET Total = ifnull(Credit, 0) - ifnull(Debit, 0); 
```

另外，将签名更改为

```
OUT Total decimal(16,2) 
```

或类似的。你为什么用`DOUBLE SIGNED`？

# java - XSSFWorkbook 需要很长时间才能加载

> ID：11154678
> 
> 赞同：11
> 
> 时间：2012-06-22T10:44:14.063
> 
> 标签：java, excel, optimization, apache-poi, xssf

我正在使用以下代码：

```
File file = new File("abc.xlsx");
InputStream st = new FileInputStream(file);
XSSFWorkbook wb = new XSSFWorkbook(st); 
```

xlsx 文件本身有 25,000 行，每行包含 500 列的内容。在调试过程中，我看到我创建 XSSFWorkbook 的第三行，需要很长时间（1 小时！）才能完成此语句。

有没有更好的方法来访问原始 xlsx 文件的值？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-22T16:30:29.640

首先，当您有文件时，不要从 InputStream 加载 XSSFWorkbook！使用 InputStream 需要将所有内容缓冲到内存中，这会占用空间并花费时间。由于您不需要进行缓冲，因此不要！

如果您使用 POI 的最新夜间版本运行，那么这非常容易。您的代码变为：

```
File file = new File("C:\\D\\Data Book.xlsx");
OPCPackage opcPackage = OPCPackage.open(file);
XSSFWorkbook workbook = new XSSFWorkbook(opcPackage); 
```

否则，它非常相似：

```
File file = new File("C:\\D\\Data Book.xlsx");
OPCPackage opcPackage = OPCPackage.open(file.getAbsolutePath());
XSSFWorkbook workbook = new XSSFWorkbook(opcPackage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:46:45.513

考虑使用 POI 的 Streaming 版本。这将根据需要将文件的一个子集加载到内存中。这是处理大文件时推荐的方法。

[POI SXSSF](http://poi.apache.org/spreadsheet/how-to.html#sxssf)

# c++ - Eckel Vol1, pg283, Incomplete type specification，编译器在做什么？

> ID：11154679
> 
> 赞同：0
> 
> 时间：2012-06-22T10:44:15.513
> 
> 标签：c++

```
struct X;

struct Y {
  void f(X*);
};

struct X { //definition
private:
  int i;
public:
  friend void Y::f(X*);
  <SNIP'd>
}; 
```

> “struct`Y`有一个成员函数`f()`，可以修改类型的对象`X`。这有点难，因为**C++ 编译器要求您在引用它之前声明所有内容**`Y`，因此必须先声明struct，然后才能将其成员`Y::f(X*)`声明为struct 中的朋友`X`。但是`Y::f(X*)`要声明 struct`X`必须先声明！
> 
> 这是解决方案。请注意，它`Y::f(X*)`采用`X`对象的地址。这一点很关键，因为**编译器总是知道如何传递一个地址，不管传递的对象是什么，这个地址都是固定大小的**，即使它没有关于类型大小的完整信息。”

所以在这里我们有：

```
struct X; struct Y { ... }; struct X { ... }; 
```

我的问题是这样的：

1.  为什么编译器坚持`X`不完整地声明为：`struct X;`??

    毕竟，正如作者所说：“编译器总是知道如何传递一个固定大小的地址。” 这只是一个声明，它告诉编译器这`X`是一个结构并且很快就会跟随，那么为什么编译器如此坚持要你输入字母： struct `X`; 毕竟我`X`本身没有使用？？那时没有生成汇编语言代码。并且当它读取`X*`肯定可以说它是一个地址（指针）..为什么：`struct X;`需要？

    声明函数的重点是在实际使用之前进行类型检查。所以如果我这样做：

    ```
     int foo(void); foo(30); 
    ```

    编译器会嚎叫。但是在上面，如果我不说：`struct X;`它有什么区别？他只是在检查我对`X`（函数名）的拼写吗？

2.  为什么颠倒结构 Y 和 X 的位置不起作用？像这样：
    `struct Y; struct X { ... }; struct Y { ... };`
    我得到：

    > 错误：不完整类型的无效使用`'struct main()::Y'`

    显然，编译器不满意我对 `Y`( `struct Y;`) 的类型说明不完整。但是缺少什么宝贵的小信息？毕竟 struct `Y`; 应该告诉编译器`Y`即将跟进（与我们在 Q1 中所做的相同`struct X; struct Y {}; struct X{};`：）

3.  为什么作者将 struct`X`称为定义？如果我这样做： `struct X { ... };`这肯定是一个声明？当我像这样实例化结构时：`X`foo; 那么这是一个定义？正确的？

4.  我该怎么做呢：

    ```
    struct X {
      friend void Y::f(X*);
      void f(Y*);
    };

    struct Y {
      friend void X::f(Y*);
      void f(X*);
    }; 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:55:18.710

> 为什么编译器坚持将 X 不完整地声明为：struct X?? 毕竟，正如作者所说：“编译器总是知道如何传递一个固定大小的地址。”

你不这样做：这也有效：

```
struct Y { void f(struct X*); };

class X {
    int i;
    friend void Y::f(X*);
}; 
```

你*还有*什么建议？

此外，在按值传递时，您甚至不必拥有完整的类型，**除非您*实际*定义了方法**：

```
struct Y { void f(struct X); };

// too early:    
void Y::f(struct X) { /* whoops compile error */ }

class X {
    int i;
    friend void Y::f(X);
};

// ok here:
void Y::f(X) { /* compile success */ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:12:43.283

> 毕竟，正如作者指出的那样：“编译器总是知道如何传递一个固定大小的地址。”这只是一个声明，告诉编译器 X 是一个结构并且很快就会跟随，那么为什么编译器坚持要你打出字母：`struct X;`毕竟我没有使用 X 本身？那时没有生成汇编语言代码..当它读取“X *”时，它肯定可以看出它是一个地址（指针）..为什么：`struct X;`需要？

作者并没有告诉你*所有*令人讨厌的细节。编译器知道如何传递指针（地址），如果它知道对象`X`是什么类型的话。该语言允许某些指针`char`具有不同的大小，例如可寻址机器上的指针或函数指针。

因此，您必须告诉编译器这`X`是 a`struct`而不是内置类型的函数或 typedef。

# ruby - Puppet 模板 (erb) 中的 Ruby 实例变量

> ID：11154685
> 
> 赞同：0
> 
> 时间：2012-06-22T10:44:32.357
> 
> 标签：ruby, erb, puppet

我不理解我在 Puppet 模板 (erb) 中编写的这段 Ruby 代码的行为。它必须与我忽略且无法找出的实例变量的某些属性有关。

在 Puppet 端，变量 $local_users 可以在文件 site.pp 中声明（和初始化）或不声明。在下面显示的模板代码中，if 语句检查它是否先前已初始化。

```
<% if @local_users -%>
  <%= fail('local_users has to be an array') unless local_users.class == Array -%>
<% else -%>
  <% local_users = [ "root" ] -%>
  <%# some code to add more users to the array -%>
<% end -%>
<% local_users.uniq.each do |user| -%>
  <%= user %>
<% end -%> 
```

如果 $local_users 未在 site.pp 文件（其他分支）中声明，则此代码可以完美运行。如果它被声明（如果是分支），那么在尝试应用 Puppet 清单时它会失败：

```
Failed to parse template sendmail/local-users.erb: undefined method `uniq' for nil:NilClass at /usr/share/puppet/modules/sendmail/manifests/config.pp:39 
```

（第 39 行是调用模板的地方`content => template('sendmail/sendmail.mc.erb'),`：）

问题是在循环中 local_users 变量不被识别为数组。我解决了这个问题，只是在 if 分支上声明了一个局部变量：

```
<% if @local_users -%>
  <%= fail('local_users has to be an array') unless local_users.class == Array -%>
  <% local_users = @local_users -%>
<% else -%> 
```

但是在 if 分支内部**它是一个 Array**，因为它`local.users.class == Array`返回 true （此时我也可以毫无问题地使用方法 local_users.uniq ）。此外，我尝试使用`if local_users`（不带@）并且在 if 分支中 local_users 仍然是一个数组，但在循环中不断失败。

以下是我的问题：

1.  如何解释这种行为？为什么 local_users 变量是 if 分支内的数组而不是循环？
2.  我的解决方法是正确的还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:41:13.073

因为在 Ruby`nil`中是一个具有自己的类 ( `NilClass`) 的对象，并且因为（尝试使用`irb`）：

```
nil.respond_to? :class
# => true 
```

语句`local_users.class == Array`返回`false`。

`local_user`是视图的局部变量，`@local_user`而是该视图后面的控制器的实例变量。

有两种不同的东西，这就是为什么你必须分配`local_user`to`@local_user`才能没有`nil`when ou invoke `local_users.uniq`。

顺便说一句，你为什么要使用`local_users`而不是简单地使用`@local_users`和移动控制器上的所有逻辑？

# ruby - .where 返回的集合未按预期响应

> ID：11154688
> 
> 赞同：0
> 
> 时间：2012-06-22T10:44:42.560
> 
> 标签：ruby, ruby-on-rails-3, activerecord, where

我正在尝试通过 where 查询定义一个新数组，但我只能让它以一种方式工作。

这里是：

```
<%   

 @children = Array.new
 Topic.where(breadcrumb_id: @topic.id).each do |y|
     @children.push(y.name)
 end

 return @children
 %>

 Returns the array ["Performance Arts", "Visual Arts", "Physical Arts", "Music", "Culinary Arts"] (All topics) 
```

但我宁愿只做

```
 @children = Topic.where(breadcrumb_id: @topic.id)

  return @children.each.name

  Returns "undefined method `name' for #<Enumerator:0x007fe92205a1f0>" 
```

无论出于何种原因 .each 都不会正确响应......尽管它在第一个示例中的初始 where 调用中起作用。有什么不同？

有没有办法做到这一点，以便我可以直接通过数组提取名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:05:58.243

那不是什么`each`。您可能正在寻找`map`（或其别名），`collect`

```
Topic.where(...).map {|topic| topic.name} 
```

您可以使用 Symbol#to_proc 快捷方式将其缩短一点：

```
Topic.where(...).map &:name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T11:22:23.653

在 Rails 3.2 上还有`pluck`：

```
@children = Topic.where(breadcrumb_id: @topic.id).pluck("name") 
```

这具有做 a`SELECT name FROM ...`而不是的额外好处`SELECT *`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:57:48.447

#where 方法返回一个[ActiveRecord::Relation](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html)对象，而不是一个数组。

要获取数组，请在其上调用 #all 或 #to_a：

```
@children = Topic.where(breadcrumb_id: @topic.id).all
@children = Topic.where(breadcrumb_id: @topic.id).to_a 
```

请注意，您无需将其转换为数组即可对其进行迭代。

查看 Frederick Cheung 关于为什么您使用 #each 不起作用的答案。

# javascript - 未找到 ExtJS renderTo 元素

> ID：11154693
> 
> 赞同：4
> 
> 时间：2012-06-22T10:45:13.180
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

我有一个 MVC 架构，但是当我尝试在现有的一个 TabPanel 中创建另一个 TabPanel 时，我在浏览器中得到了这个：

`el is null`

`el = el.dom || Ext.getDom(el); ext-all-debug.js (line 12807)`

据我了解，似乎新的 TabPanel 无法找到需要的 div 来呈现。无论如何，这是控制器：

```
Ext.define('FI.controller.MainController', {
extend: 'Ext.app.Controller',
id: 'mainController',
views: ['MainTabPanel', 'UnitsTabPanel', 'SummariesTabPanel'],
mainTabPanel : {}, 
unitsTabPanel : {},
summariesTabPanel : {},
init: function(){
    console.log("main controller is init");
    console.log(this);

    this.control({
        'mainTabPanel':{
            afterrender: this.onCreate
        }
    });

    this.mainTabPanel = Ext.widget('mainTabPanel');
},

onCreate: function(){
    console.log("main tab panel is created");
    console.log(this);
    this.unitsTabPanel = Ext.widget('unitsTabPanel');
    this.summariesTabPanel = Ext.widget('summariesTabPanel');
}
}); 
```

这是**MainTabPanel**：

```
Ext.define("FI.view.MainTabPanel", {
extend: 'Ext.tab.Panel',
renderTo:'container',
alias: 'widget.mainTabPanel',
enableTabScroll: true,
items:[{
        title:'Units',
        html: "<div id='units'></div>",
        closable: false
    },
    {title: 'Summaries',
        html: "<div id='summaries'></div>",
        closable:false
    }
]
}); 
```

这是**SummariesTabPanel**（有问题的那个）：

```
Ext.define("FI.view.SummariesTabPanel", {
extend: 'Ext.tab.Panel',
renderTo: 'summaries',
alias: 'widget.summariesTabPanel',
enableTabScroll: true
}); 
```

问题出在`SummariesTabPanel`. 如果我不创建它，则会`UnitsTabPanel`渲染。由于某种原因，它找不到`summaries`div。

你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:51:35.450

SummariesTabPanel 根据您的最后一段代码呈现到“单位”div，对吗？如果不是，请替换`renderTo: 'units'`为`renderTo: 'summaries'`.

* * *

**编辑**

由于情况并非如此，您可以查看 Ext 4 Panel 文档（此处：[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.panel。 Panel-cfg-html](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.panel.Panel-cfg-html) ) 表示在组件完全呈现之前不会添加 html 内容。因此，您必须等待选项卡的[afterrender](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.panel.Panel-event-afterrender)事件（而不是现在的选项卡面板），然后才能真正获取 DOM 元素。

如果您实例化此面板

```
{title: 'Summaries',
 html: "<div id='summaries'></div>",
 closable:false
} 
```

并将指向它的指针存储到一个单独的变量中，您可以监听它的 afterrender 事件并重试。

解决方法是使用页面的现有元素（即静态 html 片段），而不是通过面板的`html`配置选项添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:49:18.243

你为什么要那样做？如果您想拥有一个嵌套面板 - 只需在彼此之间定义它们。不要使用`renderTo`

```
Ext.define("FI.view.SummariesTabPanel", {
  extend: 'Ext.tab.Panel', 
  alias: 'widget.summariesTabPanel'
});

Ext.define("FI.view.MainTabPanel", {
  extend: 'Ext.tab.Panel',
  alias: 'widget.mainTabPanel',
  enableTabScroll: true,
  items:[{
      xtype: 'summariesTabPanel'
      title:'Units',
      closable: false
    }
  ]
}); 
```

# cakephp - 将模型名称动态传递给 CakePHP 插件

> ID：11154697
> 
> 赞同：0
> 
> 时间：2012-06-22T10:45:41.400
> 
> 标签：cakephp, cakephp-2.1, cakephp-model

我很难用措辞来表达我的问题，所以很难找到答案。希望你会知道如何提供帮助。

我正在创建一个 CakePHP 2.1 插件，它将与一系列自己的模型进行交互： - 朋友 - 组 - 用户

Friend 和 Group 是专门为插件创建的模型，它们在插件中正常运行。但是，User 模型实际上只是父应用程序中某个其他表的别名。

因此，如果“我的真棒应用程序”决定使用“我的真棒插件”，它必须有自己的“用户”表（尽管它可能会调用其他东西）。假设“My Awesome Application”有一个名为 MyUser 的模型。“My Awesome Plugin”想要动态地告诉它的内部用户模型 $useTable = “my_users”。

我的问题是，如何将这些数据传递给插件？如何配置“我的真棒插件”以了解用户应该 $useTable "my_users";

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:42:05.447

据我了解，您希望插件中的模型使用通常属于您的应用程序中的模型的表 - 按照约定。您是否尝试过静态设置：

```
public $useTable = "my_users"; 
```

在插件中？所有插件通常在 Cake 启动时被初始化，所以所有的配置都应该在那时被加载。你为什么需要这个——它确实限制了你很多？插件模型使用的表会改变运行时吗？

该`Model`课程还有一些您可能会觉得有用的好东西：

```
$this->User->table; 
```

保存模型的表名 - 当前正在使用的表是**。

您还可以设置模型的源表（在控制器内）：

$this->User->setSource('table_name);

** 我不确定这是否适用于您使用`Model::setSource()`. 检查通话`$this->User->table;`后的内容会很有趣`Model::setSource()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T04:34:20.760

我已经找到了一种方法来实现这一点，但它可能不适用于所有人的所有场景。

我在我的插件中创建了一个组件，然后我在我的控制器中调用了该组件。我通过组件传递用户模型的名称。这样，我可以获取有关用户模型的信息，并且可以将其设置为我的插件的 useTable 以在插件中使用。

当然，这种方法限制了我使用组件来使用插件，但这可能是最好的。

这是我如何做到的一个例子：

```
// in the AppController
public $components = array(
'MyPlugin.MyPluginComponent' => array('userModel'=>'UserModelName')
);

// in the Plugin's Component
class MyPluginComponent extends Component {

function initialize($controller) {

    //get the base user model
    $this->UserModel = ClassRegistry::init($this->settings['userModel']);

    //set the useTable for our plugin's user model
    $this->PluginUser = ClassRegistry::init('MyPlugin.PluginUser');
    //set the useTable value for this model
    $this->PleaseUser->setSource($this->UserModel->useTable);
} 
```

这似乎对我有用。希望这对其他人有帮助。

# c# - 从“加入”查询中组合实体对象

> ID：11154707
> 
> 赞同：0
> 
> 时间：2012-06-22T10:46:21.780
> 
> 标签：c#, entity-framework

我有这个 Linq 查询，我试图简化：

```
 List<A> LR = (from a in ent.A
                              join b in ent.B on a.ID equals b.idarticle
                              join c in ent.C on b.idB equals c.id
                              select new A()
                              { name=a.name, surname = c.surname

    }).toList(); 
```

简而言之，我需要从表 C 中提取的 A 字段（通过交叉表 B），以便 A 中的“名称”和 C 中的“姓氏”组成一个新的 A。

但我得到“无法构建实体类型 A”......虽然它可以用于匿名类型......有可能得到它吗？我知道我需要一个新的类类型并填充它，但这更短。谢谢，萨维里奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:49:36.460

That error has to do possibly with of restrictions in entity framework. So you could let ef return anonymous object, and then transform it into `List<A>`

```
 List<A> LR = (from a in ent.A
                              join b in ent.B on a.ID equals b.idarticle
                              join c in ent.C on b.idB equals c.id
                              select new 
                              { name=a.name, surname = c.surname

    })toList().Select(anon => new A() { name=anon.name, surname = anon.surname }); 
```

# c++ - 使用 CoCreateInstance 从 C++ 调用 COMVisible VB.Net dll

> ID：11154708
> 
> 赞同：2
> 
> 时间：2012-06-22T10:46:28.540
> 
> 标签：c++, vb.net, dll, com

自从我上一个问题以来，在一定程度上取得了进展，我已经编译了以下项目。它基于[https://stackoverflow.com/a/10949784/846550](https://stackoverflow.com/a/10949784/846550)

但是在运行时调用 CoCreateInstance 失败。HRESULT 是 0x80131522 - 谷歌为此，大多数点击似乎与我没有使用的 SQL 服务器有关。

C++ 代码，非托管

```
#include <iostream>
#include <atlbase.h>
#import "..\ClassLibrary1\bin\debug\ClassLibrary1.tlb" no_namespace

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    ATLENSURE_SUCCEEDED(CoInitialize(NULL));

    CLSID clsid;
    _ComClass1 *t; 
    ATLENSURE_SUCCEEDED(::CoInitialize(NULL));
    ATLENSURE_SUCCEEDED(CLSIDFromProgID(OLESTR("ClassLibrary1.ComClass1"), &clsid));

    HRESULT hr = CoCreateInstance(clsid,NULL,CLSCTX_INPROC_SERVER,
                                   __uuidof(_ComClass1),(LPVOID*) &t);
    ATLENSURE_SUCCEEDED(hr);

    ATLENSURE_SUCCEEDED(t->showform());
    ATLENSURE_SUCCEEDED(t->increment());

    CoUninitialize();
    return 0;
} 
```

这是用于良好测量的 DLL 代码 - 在 VB 中几乎完全自动生成为 COM DLL 类。（DLL 也显示为使用 oleview 注册的）。

```
<ComClass(ComClass1.ClassId, ComClass1.InterfaceId, ComClass1.EventsId)> _
Public Class ComClass1

#Region "COM GUIDs"
    ' These  GUIDs provide the COM identity for this class 
    ' and its COM interfaces. If you change them, existing 
    ' clients will no longer be able to access the class.
    Public Const ClassId As String = "46783a4a-5ca9-4930-addb-cde91a377c02"
    Public Const InterfaceId As String = "e2ad7298-7339-45fb-aad1-cb82188bf067"
    Public Const EventsId As String = "b7e10cdf-dc2a-4052-9b0f-f6f9d5a1f0ac"
#End Region

    ' A creatable COM class must have a Public Sub New() 
    ' with no parameters, otherwise, the class will not be 
    ' registered in the COM registry and cannot be created 
    ' via CreateObject.
    Public Sub New()
        MyBase.New()
    End Sub

    Private f1 As Form1

    Public Sub showform()
        f1 = New Form1()
        f1.Show()
    End Sub

    Public Sub increment()
        f1.ProgressBar1.Increment(5)
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:58:11.887

这是一个`TypeLoadException`，HRESULT 0x80131522 是`COR_E_TYPELOAD`。

这意味着 CLR 找不到您的程序集。它需要被复制到与可执行文件相同的目录、路径中或在 GAC 中注册。

的文档`REGASM`说：

> 使用 Regasm.exe 注册程序集后，您可以将其安装在全局程序集缓存中，以便可以从任何 COM 客户端激活它。如果程序集仅由单个应用程序激活，您可以将它放在该应用程序的目录中。

*   [http://msdn.microsoft.com/en-us/library/tzat5yw6(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/tzat5yw6(v=vs.71).aspx)

也就是说，除非它安装在客户端的应用程序目录、路径中、使用参数注册，或者安装在 GAC 中，否则它将无法创建`/codebase`，后两者都需要强名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T18:35:31.193

FWIW，使用 /codebase 参数不需要强命名。

# tridion - SDL Tridion Content Porter 2009 SP1 - 同步内容

> ID：11154718
> 
> 赞同：3
> 
> 时间：2012-06-22T10:47:12.220
> 
> 标签：tridion, tridion-2011

我在我们的 SDL Tridion 2011 SP1 开发和（全新和空的）测试环境之间遇到内容移植项目问题，希望对 Content Porter (2009 SP1) 提供的功能进行一些说明...

我正在移植一些“图像”多媒体组件。但是，这些图像组件是在更改架构之前创建的（在开发环境中）以删除几个字段（“高度”和“宽度”）。

这些组件与 Schema 一起正确导出，没有错误。但是，当我进行导入时，我收到一条错误消息，指出架构中缺少字段。（请参阅下面的错误详细信息。）

我曾尝试在导入设置上检查“导入前与架构同步内容”选项，但尽管[文档](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_ContentPorter_2009_SP2/7DGH253HDJDJ884JJLLAPWWRSFDH3737388D4)说“如果项目具有架构中不存在的字段，则 Content Porter 将其删除”，我仍然得到相同错误。这不适用于元数据字段或多媒体组件，还是我遗漏了什么？

谢谢，乔纳森

* * *

错误详情：[错误]

XML 验证错误。原因：命名空间“uuid:0c8ff632-92a3-44f5-9253-a1a961155540”中的元素“元数据”在命名空间“uuid:0c8ff632-92a3-44f5-9253-a1a961155540”**中有无效的子元素“height** ”。预期的可能元素列表：命名空间“uuid:0c8ff632-92a3-44f5-9253-a1a961155540”中的“alt_text”..命名空间“uuid:0c8ff632-92a3-44f5-9253-a1a961155540”中的元素“元数据”具有无效的子元素命名空间“uuid：0c8ff632-92a3-44f5-9253-a1a961155540”中的“高度”。预期的可能元素列表：命名空间“uuid:0c8ff632-92a3-44f5-9253-a1a961155540”中的“alt_text”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T10:54:32.467

看起来您最好的选择是在导出之前确保您的组件对其架构有效。所以**要么**：

1.  手动打开并保存每个相关组件，在这种情况下，内容管理器资源管理器（普通 Web GUI）将修复您的内容**或**
2.  正如我们所说，从 2011 年之前的 PowerTools 或正在构建的新工具（由社区志愿者）运行组件同步器。

更熟悉的人可能会插话实际原因，但在此之前，这些似乎是您最快的前进方式。

# blackberry - 如何使用各种操作系统版本在 Eclipse 中构建黑莓项目？

> ID：11154719
> 
> 赞同：-1
> 
> 时间：2012-06-22T10:47:19.880
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

我正在使用用于 Eclipse 的 blackberry java 插件进行开发，并且当我下载了它的最新版本时。它带有 os 版本 7，但我想使用 os 版本 5,6 等构建我的应用程序。但我不知道它所以是任何人都可以告诉我我应该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:17:51.420

在您的插件中转到帮助->安装新软件，您将看到一个窗口，您将在其中找到“使用”...。粘贴此 URL **Blackberry 更新：http: [//www.blackberry.com/go/eclipseUpdate /3.5/java](http://www.blackberry.com/go/eclipseUpdate/3.5/java)** 在bottem选择框会显示，你可以在那里选择JDK。选择您的jdk，然后单击完成...下载需要一些时间。

# css - 如何在所有浏览器的 DIV 中居中 IMG

> ID：11154720
> 
> 赞同：0
> 
> 时间：2012-06-22T10:47:21.267
> 
> 标签：css

我已经阅读了所有 Google 最佳结果技巧，但我无法在 div 中居中图像。

例如这个流行的技巧：[http](http://webdesign.about.com/od/beginningcss/a/aa012207.htm) ://webdesign.about.com/od/beginningcss/a/aa012207.htm或[http://www.w3.org/Style/Examples/007/center.en.html](http://www.w3.org/Style/Examples/007/center.en.html) 不起作用在 IE 8 中。
我已经尝试过 Stackoverflow 中的另一个，但它在 Opera 中不起作用。

所以我认为一个技巧适用于大多数浏览器（IE8、Firefox、Safari、Opera、Maxthon、K-Melon、SeaMonkey）：

```
<p style="text-align:center"><img  style="display: block;   margin-left: auto;   margin-right: auto;"   src="parliament.gif" width="200" height="71"></p> 
```

**任何意见？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:51:59.317

It depends what you want to center: a block element with explicit width, or an inline element:

[http://jsfiddle.net/VNuFH/](http://jsfiddle.net/VNuFH/)

Center a block image:

```
<div>
    <img style="display: block; margin: 0 auto;" src="...">
</div> 
```

Center an inline image:

```
<div style="text-align: center;">
    <img src="...">
</div>
​ 
```

If you would want to center a shrink-wrapped div (for example image with caption), you could use the center float trick with one element:

[http://pmob.co.uk/pob/centred-float.htm](http://pmob.co.uk/pob/centred-float.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:08:49.503

这样做会奏效，

```
 <p style="text-align:center">
  <img  style="position:absolute;
  width:200px;
  height:70px;
  top:50%;
  left:50%;
  margin:-35px 0 0 -100px;
  visibility:visible;
  src="parliament.gif">
 </p> 
```

这里发生的是图像左上角通过使用 top:50%, left:50% 定位在 p 的中间，但随后使用负边距偏移图像以到达中间。这个技巧适用于所有浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:13:47.903

嘿，现在你可以像这样使用**显示表格单元格**属性

**现场演示** [http://jsfiddle.net/22cHK/](http://jsfiddle.net/22cHK/)

**HTML**

```
<div class="center">
<img src="http://testing.gobanana.co.uk/wp-content/uploads/2011/03/CrashTestDummy-2-8544b.jpg" >
</div> 
```

**CSS**

```
.center{
text-align:center;
    border:solid 10px red;
    vertical-align: middle;
    display:table-cell;
    width:700px;
    height:700px;
}
.center img{

} 
```

现场演示[http://jsfiddle.net/22cHK/](http://jsfiddle.net/22cHK/)

# sql - 带有联接的 SQL SELECT INTO 查询，错误“数据库中已经有一个名为 '*****' 的对象。”

> ID：11154721
> 
> 赞同：16
> 
> 时间：2012-06-22T10:47:26.030
> 
> 标签：sql, sql-server, join, select-into

我目前正在尝试使用 SELECT INTO 查询将数据从表复制到另一个表中。但我在 SQL Server 中收到错误。

“消息 2714，级别 16，状态 6，第 2 行数据库中已经有一个名为‘产品’的对象。”

我对 sql 还是很陌生。这是我为完成这项工作而创建的 SQL 脚本。

```
BEGIN TRANSACTION
SELECT d.[PDate]
      ,d.[SDate]
      ,d.[UseDRM]
      ,d.[CreatedBy]
      ,d.[CreatedDate]
      ,d.[UpdatedBy]
      ,d.[UpdatedDate]
INTO [******].[dbo].[Product]
FROM [******].[dbo].[ProductTypeData] AS d
JOIN [******].[dbo].[Product] AS t
ON d.ProductTypeDataID = t.ProductTypeDataID
ROLLBACK TRANSACTION 
```

我已经在目标表中创建了这些列，但它们目前是空的。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-22T10:51:21.600

SELECT INTO 用于根据您拥有的数据创建表。

由于您已经创建了表，因此您想使用 INSERT INTO。

例如

```
INSERT INTO table2 (co1, col2, col3)
SELECT col1, col2, col3
FROM table1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T10:53:55.583

Select Into 用于创建新表。

取而代之的是，您可以使用

```
INSERT INTO table1 (col1, col2, col3)
SELECT col1, col2, col3
FROM table2 
```

# flash - 将 AS3 片段转换为 AS2

> ID：11154722
> 
> 赞同：0
> 
> 时间：2012-06-22T10:47:33.597
> 
> 标签：flash, actionscript

首先，我想为我糟糕的英语道歉，因为它不是我的母语。

我需要帮助将一段 AS3 脚本转换为 AS2，我知道它有点“你能为我做这个”的问题，但我真的无法解决它。

这是需要转换为 AS2 的一段脚本：

```
var url:String = "http://media.admeen.com/branding/branding01.swf";
var w:int = 100;
var h:int = 100;

branding_def.addEventListener(MouseEvent.CLICK, onClickHandler);
branding_def.buttonMode = true;
branding_def.useHandCursor = true;
function onClickHandler(event:MouseEvent){
    var variables:URLVariables = new URLVariables();
    variables.lng = Capabilities.language;
    var request:URLRequest = new URLRequest("http://media.admeen.com/branding/forward.php");
    request.data = variables;
    try {
        navigateToURL(request, "_blank");
    } catch (e:Error) {
        trace("Error: ");
    }
}

var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, success);
if(Security.sandboxType == Security.REMOTE){
    var context:LoaderContext = new LoaderContext();
    context.securityDomain = SecurityDomain.currentDomain;
    loader.load(new URLRequest(url), context);
} else {
    loader.load(new URLRequest(url));
}

function success(evt:Event):void{
    var branding:MovieClip = MovieClip(evt.target.content);
    if (contains(branding_def)) removeChild(branding_def);
    var fX = (w/branding.loaderInfo.width);
    var fY = (h/branding.loaderInfo.height);
    addChild(this.scaleToFit(branding,(branding.width*fX),(branding.height*fY)));
}

function scaleToFit(mc:MovieClip, maxW:int, maxH:int):MovieClip{
    maxH = maxH == 0 ? maxW : maxH;
    mc.width = maxW;
    mc.height = maxH;
    mc.scaleX < mc.scaleY ? mc.scaleY = mc.scaleX : mc.scaleX = mc.scaleY;
    return mc;
} 
```

我真的希望你能帮我解决这个问题！

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T01:01:14.347

首先，我认为即使您知道自己在做什么而没有打开[语言参考](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=Part2_AS2_LangRef_1.html)，也无法进行 AS2 。

您将遇到的最大问题是事件的概念非常原始和落后。对于大多数课程，都会有一种回调的事情发生。范围很不稳定。看起来您使用的是时间线代码而不是正确的类，因此您可能不会遇到范围问题。由于某种原因，这与框架脚本与类的行为不同。如果您确实有问题，请查看[Delegate Class](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/00002284.html)。

您想查看的其他一些值得注意的事情：MovieClip [onPress](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/00001337.html#395593) MovieClip [loadMovie](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/00001318.html#389585)

祝你好运，如果这还不足以让你到达那里，请回帖。

# java - 对相同数量的类使用更少的文件时的性能优势？

> ID：11154725
> 
> 赞同：0
> 
> 时间：2012-06-22T10:47:42.420
> 
> 标签：java

如果我更改源代码文件的数量（不更改代码本身的任何内容），我的应用程序是否有任何性能差异？我的意思是，例如，如果我将所有类都放在 1 个文件中（没有新关系，作为静态类），而不是 50 个，这会对性能有好处（或缺点）吗？

就是想...

问题不在于可维护性。我只想知道这是否会提高性能（以及为什么）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T10:51:26.950

在编译您的项目时，它可能会对编译器的性能产生（可忽略的）影响。之后就无关紧要了，因为实际运行的是编译器生成的类文件。

一个更有趣的问题是在运行时将类文件放在目录层次结构中和将它们放在 JAR 文件中（同样可以压缩或未压缩）之间是否存在性能差异。将它们放在未压缩的 JAR 文件中可能是最快的，但这只会影响启动时间，而且可能不会太大。

一旦应用程序启动，类定义就会保存在内存中，它们的存储位置无关紧要。

就 PHP（我猜这个问题的来源）而言，Java 总是隐式地使用字节码缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:51:22.423

据我了解，所有类都将导致`*.class`创建不同的文件，无论它们在代码中的布局方式如何。

因此，任何性能优势都将仅限于编译阶段，因为生成的类/JAR 在运行时将是相同的。

（即使在这里，您也不太可能看到显着/显着的性能改进。当然不是那些值得以不自然的方式布局代码的改进。只需编写有意义且易于理解的代码，并相信编译器明智地将其转换为字节码。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:55:11.917

使用“聪明的类加载”，“大类”将在启动时受到性能影响。*特别是如果它是使用*[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)之类的东西部署的（它可以根据需要**下载、**缓存和加载类）。

至于运行时的影响——加载后的性能，我会把它留给其他人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T10:55:50.317

这个问题没有实际意义，因为在大多数情况下它是*不可能的*。您不能将两个公共类放入同一个 .java 文件中（编译器会抱怨）。对于非公共类，这是可能的，但它对为共享相同源文件的那些类生成的字节码*没有*影响。

如果将多个类作为静态类放入一个封闭类中，这将导致生成的字节码中的类名较长，但实际类中代码的性能仍然相同。

# javascript - 我怎样才能修剪文本 我只能访问 .ascx 文件而不是代码隐藏。 我希望能够仅显示<asp:label控件返回的字符串的左侧部分。 0="" 478="" 我考虑过将标签设置为display:none;="" 并添加第二个<a="" 问问题="" 2012-06-22t10:47:44.310="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我只能访问="" .ascx="" 文件而不是代码隐藏。="" 我希望能够仅显示<asp:label控件返回的字符串的左侧部分。="" 并添加第二个<asp:label并使用一些javascript操作从隐藏控件设置文本属性，但我不知道怎么做？="" 有任何想法吗？="" 如何禁用="" cgridview="" 视图按钮或将可见性设置为="" false="" 一些朋友可以建议如何禁用="" 小部件上的视图按钮以及如何添加更多按钮，如活动..="" $this-="">widget('zii.widgets.grid.CGridView', array( 'id'=>'customer-grid', 'dataProvider'=>$model->search(), 'filter'=>$model, 'columns'=>array( 'id', 'first_name', 'last_name', 'club.club_name', array( 'class' => 'CButtonColumn', 'updateButtonUrl' =>'Yii::app()->createUrl("/customer/editmember1",array("id" => $data->primaryKey))', 'updateButtonImageUrl'=>Yii::app()->request->baseUrl.'/images/edit.jpg', 'deleteButtonUrl' =>'Yii::app()->createUrl("/customer/delete",array("id" => $data->primaryKey))', 'deleteButtonImageUrl'=>Yii::app()->request->baseUrl.'/images/delete.jpg', 'viewButton' => array('visiable' => false), ), ), )); javascriptasp.net 4 2 回答 2 This answer is useful 0 you can do this on the client side with javascript easily. if a char ie '-' delimits the sections, you can gt the value with javascript and .split it by '-' check this out for examples SO JS Split question 于 2012-06-22T10:51:45.213 回答 This answer is useful 0 如果你习惯使用 jQuery，试试这个： $(function(){ var text = $("LABELID").html(); var Index = 0; var Length = text.indexOf("-") + 1; var text = $("LABELID").html().substring(Index, Length); $("LABELID").html(text ); }); 或者 $(function(){ var text = $("LABELID").html().split("-")[0]; $("LABELID").html(text ); }); 于 2012-06-22T10:57:02.327 回答 Related 1 c - 带问号的 SCPI 查询抛出 -110 错误 1 c# - 如何在没有兼容性错误的情况下添加资源？ 0 assembly - 如何在汇编中读取整数 1 xml - 在使用 xmlstring 作为数据的 JQGrid 中使用 XML 链接 2 objective-c - 在objective-c中没有多重继承的最优雅的实现方式是什么？ 3 python - Django 向导，一步完成多种形式 1 javascript - 猜测 HTML5 地理位置何时能正常工作 0 ruby-on-rails - 从 dataURL rails 上传照片 1 powershell - 如何在 PowerShell 中将下划线附加到字符串变量而不解释 .ps1 文件中的回车符？ 1 opencv - 打开 cv 应用程序中的错误“应用程序无法正确初始化 (0x0000005)。单击确定以终止程序” Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</asp:label控件返回的字符串的左侧部分。>

> ID：11154726
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, asp.net

我只能访问 .ascx 文件而不是代码隐藏。

我希望能够仅显示`<asp:label`控件返回的字符串的左侧部分。

我考虑过将标签设置为`display:none`; 并添加第二个`<asp:label`并使用一些javascript操作从隐藏控件设置文本属性，但我不知道怎么做？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:51:45.213

you can do this on the client side with javascript easily.

if a char ie '-' delimits the sections, you can gt the value with javascript and .split it by '-'

check this out for examples [SO JS Split question](https://stackoverflow.com/questions/96428/how-do-i-split-this-string-with-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:57:02.327

如果你习惯使用 jQuery，试试这个：

```
$(function(){
 var text = $("LABELID").html();
 var Index = 0;
 var Length = text.indexOf("-") + 1;
 var text = $("LABELID").html().substring(Index, Length);
  $("LABELID").html(text );
}); 
```

或者

```
$(function(){
     var text = $("LABELID").html().split("-")[0];
      $("LABELID").html(text );
    }); 
```

# delphi - 无法修改 EnumWindows 回调中的参数

> ID：11154727
> 
> 赞同：1
> 
> 时间：2012-06-22T10:47:44.923
> 
> 标签：delphi, pascal, freepascal, lazarus, fpc

我尝试在 Lazarus (Free Pascal) 中使用以下代码获取主窗口句柄：

```
function FindMainWindow(Pid: LongWord): LongWord;
type
  TParam = record
    Window: HWnd;
    Test: Integer;
    Pid: LongWord;
  end;
  PParam = ^TParam;
var
  Params: TParam;
  function _FindMainWindow(Wnd: HWnd; MyLParam: PParam): Bool; stdcall;
  var
    WinPid: DWord;
  begin
    with MyLParam^ do
    begin
      Test := 2;
      GetWindowThreadProcessID(Wnd, @WinPid);
      Result := (WinPid <> Pid) or (not IsWindowVisible(Wnd))
        or (not IsWindowEnabled(Wnd));
      if not Result then begin
        Window := Wnd;
      end;
    end;
  end;
begin
  Params.Pid := Pid;
  Params.Test := 1;
  EnumWindows(@_FindMainWindow, LParam(@Params));
  ShowMessage('Done!');
  ShowMessage(IntToStr(Params.Test));
  Result := Params.Window;
end; 
```

问题是`Params.Test`运行回调后仍然为 1。我想修改函数`Params`中的`_FindMainWindow`。

注意：我无法直接访问`Params`，`_FindMainWindow`因为我收到“访问冲突”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:36:27.737

当然在 Delphi 中，它也出现在 FPC 中，嵌套函数不能用作回调函数。使用 32 位编译器时，碰巧嵌套函数可以用作回调。但是这样的代码只被编译器接受，因为回调函数在 Windows 单元中被声明为无类型指针。如果 Windows 单元将它们声明为过程类型，您会发现编译器对象使用嵌套函数。

对于 64 位 Delphi 编译器，您根本不能将嵌套函数用作回调。虽然编译器允许您继续，但由于在 Windows 单元中使用了无类型指针（见上文），回调函数没有被正确调用。显然 FPC 也是如此。您将不得不停止对回调使用嵌套函数。

有趣的是，FPC 和 Delphi 编译器在这里都有相同的特性。我的猜测是 x64 调用约定是基于寄存器的约定，而不是基于堆栈的 x86`stdcall`是这个问题背后的驱动力。我敢打赌，如果您尝试使用嵌套的 x86`register`函数作为回调，那么在运行时也会失败。

# java - 打开以数字开头的两个字符的字符串

> ID：11154729
> 
> 赞同：2
> 
> 时间：2012-06-22T10:48:12.160
> 
> 标签：java, string, enums, switch-statement

我正在尝试编写一段代码，该代码采用两位十六进制数，例如“0C”，并将其与列表进行比较。

我正在使用 Java 6，因此无法打开字符串，最初计划在 Enums 上使用 switch，但没有意识到 Enums 必须以字母开头。

有没有一种简单的方法可以在没有一系列“if，else if ...”语句的情况下实现以下目标？：

```
public void code(String oc) {

switch (oc) {
    case 00:
        // do something
        break;
    case 0A:
        // do something else
        break;
    case A1:
                   ....
             } 
```

谢谢，罗伯特。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T10:54:54.167

在 Java 6 中，无法直接执行此操作。您必须将字符串值转换为数字（以某种方式），然后打开数字。例如：

```
switch (Integer.parseInt(oc, 16)) {
case 0x00:
    // do something
    break;
case 0x0A:
    // do something else
    break;
case 0xA1:
    ....
} 
```

字符串到数字的转换相对昂贵，并且可能会抵消使用`switch`... 的性能优势，除非您有大量不同的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T11:04:30.127

您可以使用`enum`，只需在前面放一个字母，如下所示：

```
public enum MyEnum {
    X00,
    X0A,
    XA1
    // etc
}

public void code(String oc) {

    switch (MyEnum.valueOf("X" + oc)) { 
        case X00:
            // do something
            break;
        case X0A:
            // do something
            break;
        case XA1:
            // do something
            break;
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:03:20.113

如果您需要为每种情况*选择*一个元素，您可以将所有内容放入哈希图中：

```
private final static Value DEFAULT_VALUE = ...;
private final static HashMap<Key, Value> A_MAP = new HashMap<Key, Value>();
static { // populate the map
     A_MAP.put(..., ...);
     ...
}

// query value for key:
public Value get(final Key key) {
    final Value result = A_MAP.get(key);
    return result == null ? DEFAULT_VALUE : result;
} 
```

显然 Key 和 Value 需要替换为要使用的具体类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T11:06:13.283

您可以使用地图和反射。首先初始化您的地图并为每种情况创建一个方法：

```
Map<String, Method> cases = new HashMap<String, Method>();

private void doSomething(param1, param2... etc) {
    // do your stuff
}

private void doSomethingElse(param1, param2... etc) {
    // do other stuff
}

cases.put("00", this.getClass().getMethod("doSomething", param1.class, param2.class, ..);
cases.put("0A", this.getClass().getMethod("doSomethingElse", param1.class, param2.class, ..);

// etc. 
```

然后，当您需要使用开关时：

```
cases.get(yourCase).invoke(this, param1, param2, etc.); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T11:17:34.183

您可以对第一个和第二个字符使用嵌套开关：

```
 char c0 = oc.charAt(0);
    char c1 = oc.charAt(1);

    switch(c0) {
    case '0':
        switch(c1) {
        case '1':
            // ...
        }
        // ...
    } 
```

但这只有在只有很少的代码可以打开时才可读。

# gridview - 如何禁用 cgridview 视图按钮或将可见性设置为 false

> ID：11154731
> 
> 赞同：11
> 
> 时间：2012-06-22T10:48:33.547
> 
> 标签：gridview, yii, visible, cgridview, cbuttoncolumn

一些朋友可以建议如何禁用 cgridview 小部件上的视图按钮以及如何添加更多按钮，如活动..

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'customer-grid',
'dataProvider'=>$model->search(),
'filter'=>$model,
'columns'=>array(
       'id',
       'first_name',
           'last_name',
       'club.club_name',
       array(
         'class' => 'CButtonColumn',
                     'updateButtonUrl' =>'Yii::app()->createUrl("/customer/editmember1",array("id" => $data->primaryKey))',
                     'updateButtonImageUrl'=>Yii::app()->request->baseUrl.'/images/edit.jpg',
                     'deleteButtonUrl' =>'Yii::app()->createUrl("/customer/delete",array("id" => $data->primaryKey))',
                     'deleteButtonImageUrl'=>Yii::app()->request->baseUrl.'/images/delete.jpg', 
                     'viewButton' => array('visiable' => false), 
            ),

              ),   
               )); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-22T11:15:48.037

使用“[模板](http://www.yiiframework.com/doc/api/1.1/CButtonColumn#template-detail)”属性只显示您想要的按钮：

```
'class' => 'CButtonColumn',
           'template' => '{update}{delete}',
                 'updateButtonUrl' =>'Yii::app()->createUrl("/customer/editmember1",array("id" => $data->primaryKey))',
                 'updateButtonImageUrl'=>Yii::app()->request->baseUrl.'/images/edit.jpg',
                 'deleteButtonUrl' =>'Yii::app()->createUrl("/customer/delete",array("id" => $data->primaryKey))',
                 'deleteButtonImageUrl'=>Yii::app()->request->baseUrl.'/images/delete.jpg', 
        ), 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-03T13:24:53.717

这很简单。例如，我有以下网格，其中禁用了更新和删除按钮。只有视图按钮可见=>true

 `````
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'activity-grid',
'dataProvider'=>$model->search(),
'filter'=>$model,
'columns'=>array(
    'id',
    'employee_id',
    'vehicle_id',
    'radio_id',
    'aed_id',
    'laptop_id',
    /*
    'checked_out_on',
    'checked_in_on',
    */
    array(
        'class'=>'CButtonColumn',
        'template'=>'{update}{view}{delete}',
                    'buttons'=>array(
                    'update'=>array(
                            'visible'=>'false',
                    ),
                    'view'=>array(
                            'visible'=>'true',
                    ),
                    'delete'=>array(
                            'visible'=>'false',
    ), 
```

),

```
 ),
), 
```

));`  `* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T07:03:32.077

```
 'class' => 'CButtonColumn',
                    'template' => '{update}',
                     'updateButtonUrl' =>'Yii::app()->createUrl("/post/update",array("id" => $data->primaryKey))',
                    'updateButtonImageUrl'=>Yii::app()->request->baseUrl.'/assets/aed78a8d/gridview/update.png', 
`````

# f# - 合并两个时间戳序列以产生字符串时出错

> ID：11154732
> 
> 赞同：0
> 
> 时间：2012-06-22T10:48:38.743
> 
> 标签：f#, functional-programming, f#-interactive

该代码根据它们的值对两个输入序列 - seq01 和 seq02 进行`timestamp`排序，并返回一个序列，该序列指示要读取哪个序列以使值按顺序排列。

对于 seq02 的时间戳值小于 seq01 的时间戳值的情况，我们为返回的序列生成“2”，否则为“1”。这些表示在该点是要采用 seq01 还是要采用 seq02 以使数据按顺序排列（按时间戳值）。

```
let mergeSeq (seq01:seq<_>)  (seq02:seq<_>) = 
    seq { 
            use iter01 = seq01.GetEnumerator()
            use iter02 = seq02.GetEnumerator() 
            while iter01.MoveNext() do
                let _,_,time01 = iter01.Current
                let _,_,time02 = iter02.Current 
                while time02 < time01 && iter02.MoveNext()  do 
                    yield "2"
                yield "1"
    } 
```

为了在 FSI 中对其进行测试，创建了两个序列 a 和 b，a={1;3;5;...} 和 b={0;2;4;...}。所以预期的值为`let c = mergeSeq a b`{"2","1","2","1"...}。但是我收到此错误：`error FS0001: The type ''a * 'b * 'c' does not match the type 'int'`

**编辑**

更正后：

```
let mergeSeq (seq01:seq<_>)  (seq02:seq<_>) = 
    seq { 
            use iter01 = seq01.GetEnumerator()
            use iter02 = seq02.GetEnumerator() 
            while iter01.MoveNext() do
                let time01 = iter01.Current
                let time02 = iter02.Current 
                while time02 < time01 && iter02.MoveNext()  do 
                    yield "2"
                yield "1"
    } 
```

运行此程序后，还有另一个错误：`call MoveNext`. 不知何故没有执行迭代。

**编辑 2**

```
let mergeRef (seq01:seq<_>) (seq02:seq<_>) = 
    seq{
            use iter01 = seq01.GetEnumerator()
            use iter02 = seq02.GetEnumerator()
            iter01.MoveNext() 
            iter02.MoveNext() 

            let temp01 = ref iter01.Current  //!!using mutable reference
            let temp02 = ref iter02.Current

            while iter01.MoveNext() do
                while (iter02.MoveNext()) && ((!temp02) < (!temp01)) do
                    temp02 := iter02.Current
                    yield "2"
                yield "1" 
                temp01 := iter01.Current

            //if seq01 finishes before seq02
            while iter02.MoveNext() do
                yield "2"

       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:54:01.520

You need to change

```
let _,_,time01 = iter01.Current
let _,_,time02 = iter02.Current 
```

to

```
let time01 = iter01.Current
let time02 = iter02.Current 
```

so that the code is type-checked with `seq<int>`.

I don't understand your intention. If you want to compare each corresponding pair of elements in two sequences, there are more functional solutions:

```
let mergeSeq seq01 seq02 = 
    Seq.map2 (fun s1 s2 -> if s2 < s1 then "2" else "1") seq01 seq02 
```

If you want to merge two sorted sequences, using `GetEnumerator` is fine but returning `"2"` and `"1"` doesn't make sense to me.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:54:47.557

你写的代码好像

```
a={1,1,1;2,2,2;3,3,3...} 
```

只需使用

```
 let time01 = iter01.Current
            let time02 = iter02.Current 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T16:26:17.060

修改后...

您需要在 2 上调用 MoveNext，然后才能访问 current。当您在内部循环中移动 2 时，您不会更新 time02 。而且您没有正确检查序列的结尾（例如，如果 2 结束但 1 正在运行，您将尝试在结束后访问 2）。

（这是作业吗？）

# ruby-on-rails - rails 3中的嵌套表单错误，无法正确保存

> ID：11154733
> 
> 赞同：0
> 
> 时间：2012-06-22T10:48:43.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms, nested-attributes

我有一个脚手架产品和两个模型`productnumbers`和`serialnumber`.

产品.rb

```
has_one :productnumber 
accepts_nested_attributes_for :productnumber 
```

产品编号.rb

```
belongs_to :product 
has_many :serialnumbers 
accepts_nested_attributes_for :serialnumbers 
```

序列号.rb

```
belongs_to :productnumber 
```

表格显示得很好，我可以输入数据并毫无问题地创建或更新，但`serialnumber`根本没有保存。编辑产品时，该`serialnumber`字段为空白，但在创建产品时有数据。

只有`product`and`productnumber`被保存但`serialnumber`不被保存。

Rails 不会给出`serialnumber`未保存的错误。任何帮助如何保存`serialnumber`它的一部分`productnumber`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:48:38.110

```
class CustomersController < ApplicationController
  # GET /customers
  # GET /customers.json
  def index
    @customers = Customer.find(:all, :include=> [:continent, :paymethod])

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @customers }
    end
  end

  # GET /customers/1
  # GET /customers/1.json
  def show
    @customer = Customer.find(params[:id], :include=> [:continent, :paymethod])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @customer }
    end
  end

  # GET /customers/new
  # GET /customers/new.json
  def new
    @customer = Customer.new
    @continents = Continent.find :all
    @paymethods = Paymethod.find :all
    @customer.build_company

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @customer }
    end
  end

 # GET /customers/1/edit
  def edit
    @customer = Customer.find(params[:id])
    @continents = Continent.find :all
    @paymethods = Paymethod.find :all

  end

  # POST /customers
  # POST /customers.json
  def create
    @customer = Customer.new(params[:customer])
    @continents = Continent.find :all
    @paymethods = Paymethod.find :all

    respond_to do |format|
      if @customer.save
        format.html { redirect_to @customer, notice: 'Customer was successfully created.' }
        format.json { render json: @customer, status: :created, location: @customer }
      else
        format.html { render action: "new" }
        format.json { render json: @customer.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /customers/1
  # PUT /customers/1.json
  def update
    @customer = Customer.find(params[:id])

    respond_to do |format|
      if @customer.update_attributes(params[:customer])
        format.html { redirect_to @customer, notice: 'Customer was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @customer.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /customers/1
  # DELETE /customers/1.json
  def destroy
    @customer = Customer.find(params[:id])
    @customer.destroy

    respond_to do |format|
      format.html { redirect_to customers_url }
      format.json { head :no_content }
    end
  end
end 
```

# openssl - 打开 SSL 证书错误

> ID：11154735
> 
> 赞同：0
> 
> 时间：2012-06-22T10:48:55.887
> 
> 标签：openssl, ssl-certificate, x509certificate

从这里为函数“”提供的开放 ssl 文档`SSL_get_verify_result`： [http](http://www.openssl.org/docs/ssl/SSL_get_verify_result.html) ://www.openssl.org/docs/ssl/SSL_get_verify_result.html 它指出这里给出了错误： [http ://www.openssl.org/docs /apps/verify.html](http://www.openssl.org/docs/apps/verify.html)

那么，如果存在 SSL 主机不匹配错误，将调用这些错误中的哪一个？即证书中的主机名和请求中的主机名不同？

还有哪些错误实际上可以安全忽略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:55:07.420

SSL_get_verify_result 不执行主机名不匹配搜索。我们必须手动考虑证书中的多个 CN 和主题备用名称 (SAN)。

可用于处理多个 CN 的函数是：

> int lastpos = -1; lastpos=X509_NAME_get_index_by_NID(X509_get_subject_name(cert), NID_commonName, lastpos); X509_NAME_get_entry(X509_get_subject_name(cert), lastpos);

使用新的 lastpos 再次调用 X509_NAME_get_index_by_NID 将为我们提供下一个 CN，直到它返回 -1 表示没有更多可用的 CN。

此函数给出 a `X509_NAME_ENTRY *`，可以转换为`char *`using `ASN1_STRING_to_UTF8`。

请务必考虑 SAN 和 CN 中的通配符

# iphone - 在 iPhone 应用程序中集成 ShareKit 2.0

> ID：11154738
> 
> 赞同：5
> 
> 时间：2012-06-22T10:49:06.407
> 
> 标签：iphone, objective-c, ios, xcode

谁能告诉我在我的应用程序中集成新的 SDK Sharekit 2.0 时我做错了什么？

我从“ [git://github.com/ShareKit/ShareKit”](https://github.com/ShareKit/ShareKit)下载了 sdk ，并按照[https://github.com/ShareKit/ShareKit/wiki](https://github.com/ShareKit/ShareKit/wiki)的安装和集成说明进行操作。

最后，当我构建程序失败并且没有给出错误或异常时，当我从 Sharekit.xcodeproj 中拖动 ShareKit 类时，它给出了两个重复错误（`SHKDefaultConfiguration.h`），如何处理以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:14:14.800

您不能在项目中导入 ShareKit 文件，只需导入（拖放）ShareKit Xcode 项目文件。

但是您需要在项目中引用 ShareKit .h 文件，因此您必须在构建设置中添加 .h 的路径。

添加您的目标“标题搜索路径”：

```
$(SRCROOT)/[The/Relative/Path/Of/ShareKit]/Classes/** 
```

和

```
$(SRCROOT)/[The/Relative/Path/Of/ShareKit]/Submodules/** 
```

例如，如果您将 ShareKit 放在与项目目录相同级别的目录“ShareKit”上，则添加：

```
$(SRCROOT)/../ShareKit/Classes/** 
```

和

```
$(SRCROOT)/../ShareKit/Submodules/** 
```

# c# - C# Background Thread

> ID：11154747
> 
> 赞同：0
> 
> 时间：2012-06-22T10:49:41.127
> 
> 标签：c#, multithreading

Let me describe what I am trying to achieve. I am programming in C#.

I have a function (method) DoCalculations(). I want to call this DoCalculations() method recursively. However, in C# I get exception as unhandled exception System.StackOverflow. So, I am trying to run DoCalculations() method on a back ground thread.

On FORM LOAD event. I have done following:-

```
Thread objThread = new Thread(new ThreadStart(DoCalculations)); 
```

On START BUTTON CLICK event. I am starting the Thread as follows.

```
 objThread.IsBackground = true;
    objThread.Start();
    while (!objThread.IsAlive)
    {
    } 
```

And I intend to run method DoCalculations() continuously with above While Loop.

```
DoCalculations()
{
//some calculations.

} 
```

I do get control in DoCalculations() method one time. However, I want to do this every instant.

Please if any one can assist me with regards to back ground thread, or is there any better way to achieve to do parallel computation.

I have used above approach in VB.NET, making me more confused why its not working in C#.NET

Any assistance, comments greatly appreciated.

Thanks AP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:19:28.543

首先，使用后台工作者，因为它更容易使用且速度更快。

其次，您的循环代码应该进入后台线程。

这是一些帮助您入门的代码。

```
BackgroundWorker bw = new BackgroundWorker();
bw.DoWork += bw_DoWork;
bw.RunWorkerAsync();

...

private void bw_DoWork(object sender, DoWorkEventArgs e)
{
    while (someCondition)
    {
        DoCalculations();
    }
} 
```

编辑：听起来你只是想修复堆栈溢出，而不知道如何去做。忘记多线程，而不是递归调用 DoCalculations，而是在循环中调用它，并确保循环知道何时终止。此外，如果您不想在此期间锁定 GUI，那么无论如何最好使用后台线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:17:35.737

[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx) **提供一种以指定时间间隔执行方法的机制。**

*如何在您的情况下使用....*

```
using System.Threading; 
```

声明定时器回调和定时器对象如下..

```
 private TimerCallback calculateTimerDelegate = null;
 private System.Threading.Timer calculationTimer = null; 
```

并在您的 Load() 事件中初始化它们..

```
calculateTimerDelegate = new TimerCallback(DoCalculation);
calculationTimer = new Timer(calculateTimerDelegate , null, 10000, (1 * 60 * 1000)); 
```

现在，你的计算方法......

```
DoCalculations()
{
    //some calculations.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:15:24.370

如果您遇到堆栈溢出异常，则**不会**通过引入多线程来发现使其消失的方法。您的递归代码中有一个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:54:04.100

如果你想在后台线程上重复运行它，你可以使用这样的`System.Threading.Timer`类：

```
var timer = new Timer( DoCalculations, null, TimeSpan.FromSeconds(0), TimeSpan.FromSeconds(1)); 
```

这将每秒运行您的计算。如果要调整时间，请更改最后一个`TimeSpan`参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T11:05:57.340

使用 BackgroundWorker 类

[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# mysql - Multiple max results

> ID：11154748
> 
> 赞同：3
> 
> 时间：2012-06-22T10:49:42.297
> 
> 标签：mysql, sql

Table structure

```
id (p) | date | id2 (fk) | id3 (fk) 
```

where (p) is primary id and (fk) is foreign key

This query returns a list of latest unique rows

```
select
    max(date) as date1,
    id1,
    id2
from `table`
group by id1, id2 
```

I would also like to have the second date in a row, which have to be the second highest date

Something like

```
select
    max(date) as date1,
    max_second(date) as date2,
    id1,
    id2
from `table`
group by id1, id2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T10:53:05.797

Join the table to itself, matching the id columns but (and this is the key) matching where the joined table's rows have dates less than the main table's rows.

```
select
    max(t1.date) as date1,
    max(t2.date) as date2,
    t1.id2,
    t1.id2
from `table` t1
left join `table` t2 on t2.id1 = t1.id1 and t2.id2 = t1.id2 and t2.date < t1.date
group by id1, id2; 
```

Note that `date2` may `null` if there are no rows for a previous date (hence the need for a `left join`)

This query will take forever unless you have an index on id1 and/or id2.
For maximum speed, do this:

```
create index table_id1_id2 on `table`(id1, id2); 
```

and if that's not fast enough, try the speed after running this:

```
create index table_id1_id2_date on `table`(id1, id2, date); 
```

# position - Fixed Position without Overlay?

> ID：11154749
> 
> 赞同：1
> 
> 时间：2012-06-22T10:49:49.990
> 
> 标签：position

i am trying to append a new Div to a Page with Javascript , i want to have it fixed but WITHOUT overlaying the page, it should look like a sidebar at the left side of the page, currently if i set it to position fixed, it appears but overlays the whole page, any idea how to fix this?

thx in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:55:52.657

通过修复一个元素，您将其从正常的渲染流程中移除，因此其他元素的行为就好像它不存在一样。避免这种情况的最好方法是在页面其余部分的实际内容中添加填充，假装侧边菜单在那里。

```
div.menu {
position:fixed;
left:0px;
top:100px;
width:200px;
height:400px;
}
div.content {
padding-left:215px;
} 
```

padding-left 为侧边栏填充了 200px 的框，加上 15 的很好的填充，因此文本不会压在侧面。

```
<div class='menu'>Menu Here</div>
<div class='content'>
    Content<br />In<br />Here<br />Fits in place
</div> 
```

# javascript - Best way to do multiple pagination on one page in codeigniter

> ID：11154750
> 
> 赞同：5
> 
> 时间：2012-06-22T10:49:53.910
> 
> 标签：javascript, codeigniter, pagination

I have seen a number of old posts around this topic on stack overflow but none of them seem to give any clarity. What I have understood by going through them is that codeigniter doesnt support multiple paginations through its class and that you have to write your own class.

I wonder if that is the case. In case any body here has an idea about how to do it please let me know. I have three lists which I'm passing into the view. However when I paginate all of them, all the three lists response to same page offset. Is Ajax_pagination the way out?

Please suggest how to do this.

UPDATE: Here is my code and what I'm trying to do.This is a view file. I have two lists 1\. org_list 2\. Ind_list I'm trying to pass to these two lists in tow view files (organization_listing, individual_listing) both of which are loaded in this view file and therefore appear on the same page. Now I can paginate one list but when I paginate the second file they both respond to same uri offset.

I'm generating the pagination links in the (organization_listing, individual_listing) view files.

```
<?php 

    $config['base_url'] = 'http://localhost/socialinew/user_registration/index.php/members_area/view_members_area';
    $config['total_rows'] = count($org_list);
    $config['per_page'] = 4;
    $config['num_links'] = 20;
    $config['full_tag_open'] = '<div id="pagination3">';
    $config['full_tag_close'] = '</div>';

    $this->pagination->initialize($config);

    for($i=$this->uri->segment(3)+0;$i<(($this->uri->segment(3)+$config['per_page']));$i++)
    {
        if(isset($org_list[$i]))
        {$temp_org[$i]=$org_list[$i];
        }

    }

    $tmp_org['org_list']=$temp_org;

$this->load->view('organization/organization_listing',$tmp_org);

    $org_config['base_url'] = 'http://localhost/socialinew/user_registration/index.php/members_area/view_members_area/';
    $org_config['total_rows'] = count($ind_list);
    $org_config['per_page'] = 5;
    $org_config['num_links'] = 20;
    $org_config['full_tag_open'] = '<div id="pagination2">';
    $org_config['full_tag_close'] = '</div>';

    $this->pagination->initialize($org_config);

    for($i=$this->uri->segment(4)+0;$i<(($this->uri->segment(4)+$config['per_page']));$i++)
    {
        if(isset($ind_list[$i]))
        {$temp_ind[$i]=$ind_list[$i];
        }
    }

        $tmp_ind['ind_list']= $temp_ind; 
```

$this->load->view('individual_listing',$tmp_ind);?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:24:44.903

伙计们，我终于使用 javascript 将我的个人分页加载到页面中，所以我将我的分页发送到三个不同的视图中，然后使用 javascript 将这些视图调用到页面中。无法找出在同一页面上进行多个分页的任何方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:27:01.003

If you want

```
1 2 3 4

 results

1 2 3 4

 results 
```

I'm fairly certain it's pretty straight forward:

1.  just configure for the first set (say to use uri segment 3)
2.  Initialize the pagination
3.  Create the links; and
4.  Send it to the view.

Then

1.  Configure for the second set (say to use uri segment 4)
2.  Initialize the pagination
3.  Create the links; and
4.  Send it to the view.

# operating-system - How heap area is protected from the interference of the stack & vice-versa?

> ID：11154752
> 
> 赞同：0
> 
> 时间：2012-06-22T10:50:07.743
> 
> 标签：operating-system

Does it always happen that stack always grows downwards & heap grows upwards?
If its so, then how does OS keeps the heap area protected from the interference of the stack & vice-versa?
If its not, then what factors affect it? OS version ? Compiler? Anything else??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:28:53.367

是的，这通常是这种情况。其实现细节由操作系统管理并且变化很大。举一个非常简单的例子，假设堆栈从内存中的较高地址开始，而堆则从较低地址开始。如果您跟踪堆的顶部和堆栈的顶部，并且将更多数据放在堆上并将更多数据放在堆栈上，它们最终会在两者之间的某个地方相遇，因为正如您所说，堆栈向下增长而堆向上增长。发生这种情况时，内存已用完，因此您只需要跟踪这两者何时发生冲突。

现在对于一个真正的操作系统，这通常不是那么简单，因为每个进程都有自己的堆栈，有些有自己的堆，我们可能正在处理实际物理位置可能在任何地方的虚拟内存地址。您可以假设每个堆和堆栈都被赋予了一个地址和一个限制，这些地址和限制构成了每个进程可以使用的最大内存量的边界。如果达到这个限制，操作系统需要告诉进程它内存不足或尝试找到更多内存来分配给内存不足的进程。

# javascript - 如果将 Array 对象的函数添加到 Array 原型中，则不对其进行迭代

> ID：11154758
> 
> 赞同：2
> 
> 时间：2012-06-22T10:50:28.013
> 
> 标签：javascript, arrays, internet-explorer-6, indexof

根据[在 IE6 中将 indexOf 方法添加到 Array 类的方式](https://stackoverflow.com/questions/1744310/how-to-fix-array-indexof-in-javascript-for-ie-browsers)，我现在如何拒绝此方法迭代任何随机数组？例如：

```
Array.prototype.indexOf = function(needle) { ... };

var array = [1, 2, 3];
for (var i in array) {
    document.write(i + ': ' + array[i]);
} 
```

给出输出

```
0: 1
1: 2
2: 3
indexOf: function ... 
```

如何跳过*indexOf*属性并停止对其进行迭代而不向 where 添加任何代码

```
for(...) 
```

叫做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T21:53:10.500

`for..in`这是 Javascript循环的一个众所周知的问题。

您可能认为您只是循环遍历您直接添加的数组或对象的元素，但它也会循环遍历原型中的任何方法。这可能会产生意想不到的后果。

有两种解决方法：

首先，对于数组，不要使用`for..in`. 改用一个简单的`for()`循环——即：

```
for(var counter=0; counter<myArray.length; counter++) {...} 
```

建议将这种形式用于数组，因为它保证只遍历数字数组元素。

当然，它不适用于通用对象，因为它们既没有`length`属性也没有数字元素。对于这些，您仍然需要使用`for..in`，但您还应该始终`if()`在循环中包含一条语句`for..in`以过滤掉不需要的元素。

其格式应如下所示：

```
for (name in obj) {
    if (obj.hasOwnProperty(name)) {
        ...
    }
} 
```

这看起来很难看，但是由于不这样做的问题，建议使用 Javascript 的最佳实践，以至于如果您不编写， [JSLint](http://www.jslint.com/)和[JSHint](http://www.jshint.com/)等 JS 代码质量检查工具会将其标记为问题你的`for..in`循环是这样的。

您可以在此处阅读有关此问题的更多信息：http: [//yuiblog.com/blog/2006/09/26/for-in-intrigue/](http://yuiblog.com/blog/2006/09/26/for-in-intrigue/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:55:41.347

通过`for(...)`对数组使用正确的循环。

```
for (var i = 0, length = array.length; i < length; i++) {
    console.log(i + ": " + array[i]);
} 
```

您使用的表单用于迭代对象及其原型链的成员。

[为](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for)
[...在](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-15T19:46:09.870

或者，您可以在循环体的开头添加一行，如下所示：

```
for(var i in myArray) {
    if(typeof(myArray[i])=="function") continue;
    ...
    ...
    ...
} 
```

这个不会增加缩进，并且更容易复制粘贴到源代码中的每个循环中（如果你经常使用**for..in**并且不想弄得一团糟），只要你不这样做t*故意*将函数存储在数组中，你很高兴。

# c# - Lambda Where Clause Error

> ID：11154768
> 
> 赞同：2
> 
> 时间：2012-06-22T10:51:05.720
> 
> 标签：c#, lambda

I'm trying to write a lambda like below but my syntax is incorrect.

```
Result = ListOfNumbers.Where(val => { val != Num1; val != Num2; }).ToList()[0]; 
```

The error I get is

> Not all code paths return a value in lambda expression of type 'System.Func`<int,int,bool>`'

Perhaps there's a better way of doing this... I know there's the numbers 1, 2 and 3 (in that order) in ListOfNumbers. Num1 and Num2 at this point will both be either 1, 2 or 3 (they can't be the same though). I want my result to be the 'other' number from ListOfNumbers. Hope that's clear. If you can think of a neater way of doing it I'd love to hear it.

Any thoughts?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:52:53.250

you need to change it to

```
val => val != Num1 && val != Num2 
```

If I write the code you've provided as it would be as a function you might see what's wrong:

```
public bool Predicate(int val)
{
   val != Num1;
   val != Num2;
} 
```

*I.e. - where's the return statement?*

Although - note that that will actually fail to compile with the error `Only assignment, call, increment, decrement, and new object expressions can be used as a statement` - the compiler rules in lambdas are slightly different and so you get a different error but ultimately it's for the same kind of reason - in your case none of your lambda paths return anything.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:52:45.917

Change the lambda as:

```
ListOfNumbers.Where(val =>  val != Num1 && val != Num2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:53:21.953

Did you actually want to do this?

```
Result = ListOfNumbers.Where(val => val != Num1 && val != Num2).ToList()[0]; 
```

Also, what if the list has no elements? You should better check that before accessing it by index.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T10:55:15.590

You are getting the error because inside Where clause you are not getting any bool, you need to change your lambda expression to :

```
Result = ListOfNumbers.Where(val =>  val != Num1 && val != Num2).ToList()[0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T10:57:02.377

As your code expecting `System.Func<int,int,bool>` delegate which returns boolean value as in where condition So, you should define it in following way:

```
Result = ListOfNumbers.Where(val => { val != Num1 && val != Num2; }).ToList()[0]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T10:58:48.973

I think you want to produce something like this :

```
Result = ListOfNumbers.Where(val => val != Num1 && val != Num2).ToList()[0]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T11:00:39.023

If you create a block in your lambda empression you must use the `return` statement (if the lambda defines a result type).

If you just want the first element you can use `FirstOrDefault` instead of `Where`.

```
Result = ListOfNumbers.FirstOrDefault(val => val != Num1 && val != Num2 ); 
```

with a block:

```
Result = ListOfNumbers.FirstOrDefault(val => 
            { 
               var b = val != Num1 && val != Num2; 
               return b;
            } 
         ); 
```

I used `&&` but I really don't know what is your condition...

# java - Populate an Array of Objects Using a Database

> ID：11154769
> 
> 赞同：1
> 
> 时间：2012-06-22T10:51:05.527
> 
> 标签：java, android

I am trying to create and populate an array of objects with information returned from a database query. I can't seem to get this working properly with my code below.

Any help is appreciated. Thanks in advance.

Module Object:

```
public class Module {
public String moduleEnglishTitle;
public String moduleJapaneseTitle;
public String moduleCompletionRate;
public int moduleRating;
public Module() {
    super();
}

public Module(String moduleEnglishTitle, String moduleJapaneseTitle, String moduleCompletionRate, int moduleRating) {
    super();
    this.moduleEnglishTitle = moduleEnglishTitle;
    this.moduleJapaneseTitle = moduleJapaneseTitle;
    this.moduleCompletionRate = moduleCompletionRate;
    this.moduleRating = moduleRating;
} 
```

}

These four variables of the object are to be populated from database, into a Module object array in the activity where the data is to be used. This data is then populated into a ListView using a custom ArrayAdapter. The ArrayAdapter, Listview, and Module object all work well together if I manually create the list using this:

```
Module module_data[] = new Module[] {
            new Module("hello","hello","hello", 3),
            new Module("hello","hello","hello", 2)
    }; 
```

However, I don't want to populate it this way, I want to use data from a database using this cursor:

```
public Cursor getModuleList() {
    Cursor mCursor = myDataBase.rawQuery("SELECT mod, engtitle, japtitle FROM master WHERE type='module'", null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

I have this code so far, but it's not working:

```
 Module module_data[] = new Module[moduleInfo.getCount()];
    int i = 0;
    while(moduleInfo.isAfterLast()) {

        module_data[i].moduleJapaneseTitle = moduleInfo.getString(1);
        module_data[i].moduleEnglishTitle = moduleInfo.getString(2);
        module_data[i].moduleCompletionRate = "済み： " + moduleStats.getString(7);
        module_data[i].moduleRating = moduleStats.getInt(4);

        moduleInfo.moveToNext();
        moduleStats.moveToNext();
        i++;
    } 
```

.................

```
06-22 20:42:27.045: E/AndroidRuntime(440): FATAL EXCEPTION: main
06-22 20:42:27.045: E/AndroidRuntime(440): java.lang.RuntimeException: Unable to start activity ComponentInfo{jp.atomicideas.ne/jp.atomicideas.ne.Story2}: java.lang.NullPointerException
06-22 20:42:27.045: E/AndroidRuntime(440):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
06-22 20:42:27.045: E/AndroidRuntime(440):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
06-22 20:42:27.045: E/AndroidRuntime(440):  at android.app.ActivityThread.access$1500(ActivityThread.java:121)
06-22 20:42:27.045: E/AndroidRuntime(440):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
06-22 20:42:27.045: E/AndroidRuntime(440):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-22 20:42:27.045: E/AndroidRuntime(440):  at android.os.Looper.loop(Looper.java:130)
06-22 20:42:27.045: E/AndroidRuntime(440):  at android.app.ActivityThread.main(ActivityThread.java:3701)
06-22 20:42:27.045: E/AndroidRuntime(440):  at java.lang.reflect.Method.invokeNative(Native Method)
06-22 20:42:27.045: E/AndroidRuntime(440):  at java.lang.reflect.Method.invoke(Method.java:507)
06-22 20:42:27.045: E/AndroidRuntime(440):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
06-22 20:42:27.045: E/AndroidRuntime(440):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
06-22 20:42:27.045: E/AndroidRuntime(440):  at dalvik.system.NativeStart.main(Native Method)
06-22 20:42:27.045: E/AndroidRuntime(440): Caused by: java.lang.NullPointerException
06-22 20:42:27.045: E/AndroidRuntime(440):  at jp.atomicideas.ne.Story2.onCreate(Story2.java:59)
06-22 20:42:27.045: E/AndroidRuntime(440):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-22 20:42:27.045: E/AndroidRuntime(440):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
06-22 20:42:27.045: E/AndroidRuntime(440):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:00:54.650

加一个感叹号`moduleInfo.isAfterLast()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:57:28.160

你这里有问题`while(moduleInfo.isAfterLast())`

将您的代码更改为以下代码段。

```
int i = 0;
if (moduleInfo.moveToFirst() && moduleStats.moveToFirst())
{
  do {

    module_data[i].moduleJapaneseTitle = moduleInfo.getString(1);
    module_data[i].moduleEnglishTitle = moduleInfo.getString(2);
    module_data[i].moduleCompletionRate = "済み： " + moduleStats.getString(7);
    module_data[i].moduleRating = moduleStats.getInt(4);

    moduleStats.moveToNext();
    i++;
  } while (moduleInfo.moveToNext());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:59:01.497

利用

```
 module_data[i] = new Module (); 
```

和

“！” 不见了..........

```
 while(!moduleInfo.isAfterLast()) {
        module_data[i] = new Module ();//<--------------------------
        module_data[i].moduleJapaneseTitle = moduleInfo.getString(1);
        module_data[i].moduleEnglishTitle = moduleInfo.getString(2);
        module_data[i].moduleCompletionRate = "済み： " + moduleStats.getString(7);
        module_data[i].moduleRating = moduleStats.getInt(4);

        moduleInfo.moveToNext();
        moduleStats.moveToNext();
        i++;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T02:24:58.553

我能够通过这种方式解决它：

```
 Module module_data[] = new Module[moduleInfo.getCount()];
    int i;
    for(i=0; i<7; i++) {
        module_data[i] = new Module(moduleInfo.getString(1), moduleInfo.getString(2),  "済み： " + moduleStats.getString(7), moduleStats.getInt(4));
        moduleInfo.moveToNext();
        moduleStats.movetoNext();
    } 
```

问题是，我通过其构造函数错误地创建和使用了 Module 对象。

感谢大家的帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T12:38:44.683

试试这个，我正在使用**ArrayList 代替......**

`Module mod;`

`ArrayList<Module> module_data = new ArrayList<Module>();`

`final Cursor cursor = db.query(DbHelper.TABLE_NAME, null, null, null, null, null, null,null );`

`while(cursor.moveToNext()){`

`mod = new Module();`

`module_data.add(new` `module(cursor.getString(0),cursor.getString(1),cursor.getString(2),cursor.getInt(3));`

`}`

# android - 在android中发送电子邮件后显示Toast？

> ID：11154772
> 
> 赞同：5
> 
> 时间：2012-06-22T10:51:19.250
> 
> 标签：android, android-intent

我正在使用以下代码发送邮件

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("text/plain");
i.putExtra(Intent.EXTRA_EMAIL, new String[] { "abc@yahoo.com" });
i.putExtra(Intent.EXTRA_CC, new String[] { bcc_string });
i.putExtra(Intent.EXTRA_SUBJECT, "Video Suggest");
i.putExtra(Intent.EXTRA_TEXT, url_link); 

try {
   startActivityForResult(Intent.createChooser(i, "Send Mail..."), 1);
} catch (android.content.ActivityNotFoundException ex) {
   Toast.makeText(AllVideos.this, "There are no email clients installed.", Toast.LENGTH_SHORT)
   .show();
} 
```

在我的活动结果中，我使用以下代码

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // System.out.println("inactivity");
    // Toast.makeText(AllVideos.this, "Mail Send", 10).show();

    System.out.println("inside activity result");

    if (requestCode == 1) {
        if (requestCode == 1 && resultCode == RESULT_OK) {
            Toast.makeText(this, "Mail sent.", Toast.LENGTH_SHORT).show();

        } else if (requestCode == 1 && resultCode == RESULT_CANCELED) {
            Toast.makeText(this, "Mail canceled.", Toast.LENGTH_SHORT)
                    .show();
        } else {
            Toast.makeText(this, "Plz try again.", Toast.LENGTH_SHORT)
                    .show();
        }
    }
} 
```

但是每次我发送或丢弃消息时，我都会收到“邮件已取消”的祝酒词。请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:16:23.907

根据[链接](https://stackoverflow.com/questions/3778048/how-can-we-use-startactivityforresult-for-email-intent)

你不能，这不是 API 的一部分。一旦你按下发送按钮它就会返回，即使它没有发送

ACTION_SEND 没有任何输出，因此您总是得到默认值，即 RESULT_CANCELED。

此外，您不能使用返回的 Intent 数据对其进行检查，因为无论是邮件发送还是丢弃，它始终为空。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T11:04:17.183

试试这个方法。

```
 if (requestCode == 1) 
   {
        if (resultCode == RESULT_OK) 
        {
            Toast.makeText(this, "Mail sent.", Toast.LENGTH_SHORT).show();

        } 
        else if (resultCode == RESULT_CANCELED) 
        {
            Toast.makeText(this, "Mail canceled.", Toast.LENGTH_SHORT)
                    .show();
        } 
        else 
        {
            Toast.makeText(this, "Plz try again.", Toast.LENGTH_SHORT)
                    .show();
        }
  } 
```

# objective-c - 简单窗口中的 Objective-C 日历。如何？

> ID：11154776
> 
> 赞同：2
> 
> 时间：2012-06-22T10:51:22.870
> 
> 标签：objective-c, xcode, macos

我的目标是创建一个状态栏应用程序，它将绘制下拉日历。我对使用 Objective-C 编程还很陌生，我认为这可能是学习该语言的好项目。

我是否在其中绘制日历，`NSMenuItem(custom)`或者这是错误的方法。我会使用`NSDatePicker`来绘制日历吗？我在 XCode 中找不到`DatePicker`可以像在 VS2010 中一样拖放到画布上的对象。

我希望日历看起来像这样： ![在此处输入图像描述](../Images/3a9589d2b6aac90a0ad4b880095d5698.png)

我该如何进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:58:24.187

查看以下示例：
[将 MAAttachedWindow 与 NSStatusItem 一起使用](http://mattgemmell.com/2008/03/04/using-maattachedwindow-with-an-nsstatusitem/)

下载项目并更改 SDK 以使其正常工作：

![Xcode 截图](../Images/ebf4a02e0ea04e4c569c4b2add1bc933.png)

现在`NSDatePicker`在 Interface Builder 中添加并将其样式更改为`graphical`.

![Xcode 截图](../Images/41ecbad90d30260309a3130b2e9a0280.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:55:22.637

只需获取一个日期选择器并将其样式更改为图形。

# php - How to put facebook profile picture into a coordinates of a picture?

> ID：11154778
> 
> 赞同：1
> 
> 时间：2012-06-22T10:51:32.353
> 
> 标签：php, facebook, coordinates, photo

I have extracted the user's facebook profile photo.

My question is: How is it possible that upon clicking a button, the user's facebook profile photo will be in the coords="4,25,33,54"? How to echo the picture into this coordinates?

Thank you all for the time and effort.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:24:25.413

您可以使用 CSS 在显示图像时对其进行[剪辑。](https://developer.mozilla.org/en/CSS/clip)图像必须绝对定位才能做到这一点，并且必须从图像的左上角计算底部和右侧坐标。

# dynamic - Change the color of dynamical made line when it goes below another line jqplot

> ID：11154787
> 
> 赞同：1
> 
> 时间：2012-06-22T10:52:05.230
> 
> 标签：dynamic, colors, jqplot, lines

I have made a jqplot which has one line which is dynamical created from some question and 2 others, an industry standard and a best practices line.

I want to be able to change the color of the dynamical created line when it goes below the industry standard and change it again if it goes above the best practices line.

Is this possible or am I trying to take this too far?

Thank you all in advance for your response.

here is some of my code:

```
//Get radio Values  var values = $('input:radio:checked').map(function () { 
  return this.value; }).get(); 

    var line1 =[[1,values[0]], [2,values[1]], [3,values[2]], [4,values[3]], [5,values[4]]];
var line2 =[[1,4],[2,5],[3,4],[4,5],[5,5]];
var line3 =[[1,1],[2,2],[3,2],[4,4],[5,4]];

  $.jqplot('chartdiv',  [line2,line1,line3],

{  title:'Best Practices Chart',   highlighter: {useAxesFormatters: true,       showTooltip: true,
tooltipLocation: 'nw',
lineWidthAdjust: 2.5, },

grid:{  
drawGridLines: true,
backgroundColor: '#FFFFFF'},//plot labels   axes:{yaxis:{ticks:['Poor','Low', 'Medium', 'High', 'Best Practice'],   renderer: $.jqplot.CategoryAxisRenderer,

xaxis:{ticks:['DP Officer', 'Policies & Procedures', 'Awareness & Education', 'Information Security', 'Data Quality'],   renderer: $.jqplot.CategoryAxisRenderer, 

seriesColors: ["#00FF00", "#000000", "#0000FF"],legend: {
        show: true,
      }, series: [

{markerOptions: {style:'dimaond'}, label: 'Best Practise'},
{label: 'Your Practise'},
{markerOptions: {style:'filledSquare'}, label: 'Average Practise'},],
    });
  }); }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:32:28.093

[该示例展示了一个系列的动态重绘。](http://jsfiddle.net/Boro/3PNGt/6/) 在 2 秒后的示例中，第一个白色的线被重新绘制为黑色。您可以使用它进行重绘，但请记住，它不会更改其默认属性，例如，当您按下按钮时，线条会以默认颜色重绘，例如在示例中。

# background - 修复了滚动查看器 Windows Metro 中的背景（非视差）

> ID：11154790
> 
> 赞同：0
> 
> 时间：2012-06-22T10:52:18.440
> 
> 标签：background, windows-8, microsoft-metro, scrollviewer, parallax

我正在尝试将纹理作为背景添加到滚动查看器。我希望背景随内容移动，但我希望它固定。不使用视差效果...

到目前为止，我得到的是：

```
 <!-- Background -->
   <Canvas ZIndex="-1" x:Name="backgroundCanvas">
   </Canvas>

       <ScrollViewer
            x:Name="myGridScrollViewer"
            AutomationProperties.AutomationId="GridScrollViewer"
            Grid.Row="1"
            Margin="0,-4,0,0"
            Style="{StaticResource HorizontalScrollViewerStyle}">
            <StackPanel Orientation="Horizontal">
                <StackPanel Margin="116,4,0,0" Orientation="Horizontal" Height="586" VerticalAlignment="Top">
                    <Border x:Name="HeroImage" VerticalAlignment="Top"  Width="700" Height="550" Background="Yellow" Margin="0,0,15,0" ></Border>
                    <Border VerticalAlignment="Top"  Width="350" Height="400" Background="White" Margin="0" ></Border>
                </StackPanel>
                <GridView
                    x:Name="recipeGridView"
                    AutomationProperties.AutomationId="MyGridView"
                    AutomationProperties.Name="MyItems"
                    TabIndex="1"
                    Grid.Row="1"
                    Margin="65,0,116,46"
                    ItemsSource="{Binding Path=Items}"
                    ItemTemplate="{StaticResource myGridViewTemplate}"
                    VirtualizingStackPanel.VirtualizationMode="Recycling"
                    SelectionMode="None"
                    IsItemClickEnabled="True"
                    ItemClick="ItemDetailClick" VerticalContentAlignment="Top"/>
            </StackPanel>
        </ScrollViewer> 
```

后面的代码：

```
public ItemsList()
{
    this.InitializeComponent();

    UpdateBackground(0);
    myGridScrollViewer.ViewChanged += UpdateBackgroundImagePosition;
}

private void UpdateBackground(double offset)
{
    BitmapImage im = new BitmapImage(new Uri("ms-appx:///Assets/tileable_bg.png"));
    var brush = new ImageBrush();
    brush.ImageSource = im;

    backgroundCanvas.SetValue(Canvas.WidthProperty, Window.Current.Bounds.Width);
    backgroundCanvas.SetValue(Canvas.HeightProperty, Window.Current.Bounds.Height);
    backgroundCanvas.SetValue(Canvas.MarginProperty, new Thickness(offset, 0, 0, 0));
    backgroundCanvas.SetValue(Canvas.BackgroundProperty, brush);
}

private void UpdateBackgroundImagePosition(object sender, ScrollViewerViewChangedEventArgs e)
{
    UpdateBackground(-((ScrollViewer)sender).HorizontalOffset*2);
} 
```

正如您在事件侦听器 (UpdateBackgroundImagePosition) 中看到的那样，我必须将 Horizo​​ntalOffset 乘以 2 才能使背景与内容固定。但是当我移动滚动条的内容时，背景并没有固定在内容的位置，移动有点不同，有点慢，然后在正确的位置结束动画。

关于如何获得它的任何建议，或者默认情况下窗口是否“强制”使用视差背景？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:54:26.770

由于 Windows 8 Metro 中尚不支持 Tiled Brush，因此似乎可行但不是很好的解决方案是：

```
 <ScrollViewer
        x:Name="itemsGridScrollViewer"
        AutomationProperties.AutomationId="GridScrollViewer"
        Grid.Row="0"
        Margin="0,-4,0,0"
        Style="{StaticResource HorizontalScrollViewerStyle}">

        <!-- Main Grid: Wrapper for all the content -->
        <Grid x:Name="MainGrid">
            <Grid x:Name="TiledBackground" />

            <GridView x:Name="ContentPanel" .... />
        </Grid>
     </Scrollviewer> 
```

*   网格“TiledBackground”包含填充 Scrollviewer 所需的尽可能多的单元格。这是在代码隐藏中实现的。

我希望尽快有更好的解决方案。

# java - spring mvc - 从 jBoss 中分离静态内容（Apache httpd 前期）

> ID：11154792
> 
> 赞同：0
> 
> 时间：2012-06-22T10:52:20.700
> 
> 标签：java, apache, spring-mvc, jboss, mod-jk

我对spring mvc很陌生。我想要实现的是从 jboss 应用服务器中分离出我的 webapp（js、img、css）的静态内容。

我已经成功地将 apache httpd 与 jboss 与 mod_jk 连接起来。我的 mod_jk 挂载参数如下所示：

```
JkAutoAlias "/apache/httpd/root"

JkMount  /* ajp13

JkUnMount /img/* ajp3
JkUnMount /css/* ajp3
JkUnMount /js/* ajp3 
```

我的应用程序，web.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/ javaee/web-app_2_5.xsd">

<!-- Root-context is empty -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

</web-app> 
```

还有我的 servlet-context 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:p="http://www.springframework.org/schema/p"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
    ">

<mvc:annotation-driven/>

<mvc:resources mapping="/resources/**" location="/resources/"/>

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/pages/"/>
    <property name="suffix" value=".jsp"/>
</bean>
<context:component-scan base-package="com.execon"/>

<bean id="messageSource"
      class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:messages"/>
    <property name="defaultEncoding" value="UTF-8"/>
</bean>

</beans> 
```

现在的问题是，虽然 mod_jk 应该将 /img、/js、/css 传递给 jboss 应用程序服务器，但它正在这样做并且我得到很好的 404 错误“资源不可用”。有人可以帮助我吗？

还有一件事，我希望我的应用程序可以从 /app url 获得，所以在不更改 web.xml 的情况下，我看到很少有评论建议这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:33:54.880

答案是如此简单明了，以至于我真的很惭愧我问了这个问题......

```
JkAutoAlias "/apache/httpd/root"

JkMount  /* ajp13    <--- REMOVE THIS ASTERISK

JkUnMount /img/* ajp3
JkUnMount /css/* ajp3
JkUnMount /js/* ajp3 
```

编辑：

甚至更好，只需更改顺序：

```
JkAutoAlias "/apache/httpd/root"

JkUnMount /img/* ajp3
JkUnMount /css/* ajp3
JkUnMount /js/* ajp3

JkMount  /* ajp13 
```

因此，您不必删除星号并键入传递给 jboss 的每个 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:06:42.640

当我想设置静态资源服务时，本教程帮助了我：

[http://www.connect-sam.com/2012/06/liferay-61-performance-tips-serving.html](http://www.connect-sam.com/2012/06/liferay-61-performance-tips-serving.html)

# asp.net - Is there any ASP.NET application to monitor online user and page view log report?

> ID：11154793
> 
> 赞同：4
> 
> 时间：2012-06-22T10:52:22.333
> 
> 标签：asp.net, asp.net-mvc, elmah, signalr

I've recently seen [ElmahR](http://elmahr.apphb.com/) which is very useful to monitor the application's exceptions.

Is there any application like ElmahR to monitor online users and trace the user navigation.

I've seen some usefull reports in Site Log module in [DNN](http://www.dotnetnuke.com), but I want to use a stand-alone application to monitor online users and get page view reports for any asp.net application.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:05:43.353

诸如实时分析之类的东西？

[http://analytics.blogspot.com/2011/09/whats-happening-on-your-site-right-now.html](http://analytics.blogspot.com/2011/09/whats-happening-on-your-site-right-now.html)

我想你知道谷歌实时分析，但你在寻找另一种解决方案吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:51:48.087

我在我的 4 个项目中使用了 Elmah，它是我认为目前市场上最好的监控工具之一。与其他配置相比，Elmah 的配置也很简单。它只需要 web.config 中的一些配置，并且只需要在控制器上包含 [HandleError] 属性，这样一旦控制器操作中断，MVC 就会将错误记录到 Elmah。如果需要，我将为您提供有用的链接来配置 elmah。

# android - Robotium: Getting back to activity under test

> ID：11154794
> 
> 赞同：0
> 
> 时间：2012-06-22T10:52:22.997
> 
> 标签：android, unit-testing, android-activity, robotium

I writing test cases for Android apps using Robotium. One of my test cases opens a file (e.g., an image) which causes the opening of another activity from another app to display the image.

This far, everythings fine. However, afterwards, I want to get back to my activity under test, as I want to test further functionality.

How can I acchieve this?

Neither

```
solo.sendKey(android.view.KeyEvent.KEYCODE_BACK); 
```

nor

```
solo.goBack(); 
```

nor

```
solo.getCurrentActivity().onBackPressed() 
```

works because the activity displaying the image belongs to another app and thus, to another process.

Anything else I could try?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T10:58:45.807

您正在进行验收测试，是的，这是为了查看您系统的 UI 是否正常工作。

您无需测试图像是否已打开（因为这超出了您的应用范围）。

**但是**，建议使用单独的单元测试来断言您调用了正确的意图（或任何代码片段）来打开此图像。

这样，您就可以将代码覆盖在测试中，而不会出现测试其他人代码的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-24T08:52:14.463

对我来说，这可以完成工作：

```
mSolo.goBackToActivity("MainActivity"); 
```

在我的例子中，我在浏览器中打开一个 URL，然后我回到被测活动。唯一的缺点（到目前为止）是其他应用程序仍保留在后台堆栈中，但可能也有解决此问题的方法。

我假设在提出此问题后已添加此方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T10:51:59.723

我建议您重新启动目标活动以达到初始状态：

..... mSolo.finishOpenedActivities(); 设置活动（空）；mSolo = new Solo(mInstrumentation, getActivity()); ……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-30T08:43:45.480

如果您能够执行 adb 命令并且知道此意图启动了哪个应用程序，则可以执行以下操作：

```
adb shell am force-stop <package-of-started-app> 
```

然后你回到之前的活动。

注意：如果此意图有多个可能的应用程序并且显示应用程序选择对话框，则此方法不起作用。在这种情况下，您必须手动为此意图设置默认应用程序。

# php - Change Language Facebook Share PHP, Zend

> ID：11154795
> 
> 赞同：0
> 
> 时间：2012-06-22T10:52:29.213
> 
> 标签：php, facebook

I have a PHP project with Zend Framework. and I want to add a Facebook Share option. The project has different Languages. English, Tagalog, Deutsch, France. etc. So what I want to do with my Facebook Share option is, whether the user selects any of this languages, for example the user is Tagalog, then the content of Facebook Share will also be in Tagalog as the user will share the website. Can anyone help me with this? I also heard that Facebook Share Option is deprecated in favor of the Like button, so any suggestion? actually the project already have a Like button. but I want to add the Share button every after the transaction has been made. Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:45:40.393

您应该使用[AddThis](http://www.addthis.com/)或[ShareThis](http://sharethis.com/)之类的服务，它们会自动翻译，总体上让您的生活更轻松。

# javascript - JQuery plugins stop working on appending querystring parameters

> ID：11154796
> 
> 赞同：1
> 
> 时间：2012-06-22T10:52:34.813
> 
> 标签：javascript, jquery

I'm new with Javascript programming, I need to insert this code in the body of a page, I take some Get parameters from URL and I attach them to the iframe string:

```
<script>
document.write("<iframe width='700' height='500' frameborder='0' src=https://www.mysite.com/abs/indexabs.php?stid=261&lg=en&step2=1&"+unescape(window.location.href.slice(window.location.href.indexOf('?') + 1)))+"></iframe>"
</script> 
```

This code runs and loads the iframe content...but there are other jQuery elements on the page, that don't run anymore (i.e. Nivo slider, Jquery UI datepicker)

Is there a different manner to do the same without jQuery incompatibility?

Thanks

# r - How to use functions in R

> ID：11154798
> 
> 赞同：3
> 
> 时间：2012-06-22T10:52:35.927
> 
> 标签：r, function

I have a two column dataframe in R and i want to add a third column with values that are a function of the first two. As long as the function is a simple mathematical formula no problem `data$c <- data$a*15 - 10 + data$b*0.5` But my function is non continous and contains conditionals, i would like to do: `foo <- function(x,y){if (x<2) {return(0)} else {....}` and `data$c <- foo(data$a, data$b)` But this gets me errors. What am i missing?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:59:28.413

您正在寻找`ifelse`功能。首先创建一个数据框：

```
> d <- data.frame(x = rnorm(5), y=rnorm(5))
> d
           x           y
1 -0.3581471  0.18149804
2  0.5096839  0.01260114
3  0.6742558  1.04851531
4  1.0761349 -0.17504221
5 -0.2373933 -1.11475886 
```

现在使用创建一个额外的列`ifelse`：

```
> d$z <- ifelse(d$x < 0, 0, d$y + 1)
> d
           x           y         z
1 -0.3581471  0.18149804 0.0000000
2  0.5096839  0.01260114 1.0126011
3  0.6742558  1.04851531 2.0485153
4  1.0761349 -0.17504221 0.8249578
5 -0.2373933 -1.11475886 0.0000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:03:55.073

```
df = data.frame(a=rnorm(20),b=runif(20))

new_var = function(x,y)
{
  if(x<0)
  { x = x^2}
  else
  { x = x^3}

  if(y<.5)
  { -log10(y)}
  else
  {
    exp(y)
  }
  return((2*(x+y))/x*y)
}

df$c = sapply(1:length(df$a), function(i){new_var(df$a[i],df$b[i])})

head(df)
            a          b          c
1 -0.09149107 0.04834675 0.65517298
2 -2.43732351 0.04086087 0.08228385
3 -1.69573283 0.54795413 1.30474339
4 -0.40106220 0.72952356 8.07641367
5 -0.38244706 0.65524147 7.18118555
6  0.76334945 0.38455655 1.43404971 
```

# javascript - Do I need insert a pixel tracking on the DOM?

> ID：11154801
> 
> 赞同：2
> 
> 时间：2012-06-22T10:52:47.303
> 
> 标签：javascript, yui

I have the following code:

```
[..]
var img = document.createElement('img');
img.src = 'www.example.com/pixeltracking';
[.. more stuff..] 
```

that works well in Chrome but in Firefox I've never saw finish the request.

When I add the image to the DOM, now Firefox finish the load but chrome stop the code execution without any error message.

```
[..]
var img = document.createElement('img');
img.src = 'www.example.com/pixeltracking';
document.body.appendChild(img);
[.. more stuff..] 
```

Any idea? Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:54:28.227

您的代码的问题是您忘记`http://`了网址。现在您正尝试加载`www.example.com/pixeltracking` *相*对于当前 URL 的内容，例如`http://yourdomain.com/foobar/www.example.com/pixeltracking`.

# antlr - 记住 AST 中的 ANTLR 规则/节点

> ID：11154807
> 
> 赞同：3
> 
> 时间：2012-06-22T10:53:04.670
> 
> 标签：antlr

我正在编写一个用 ANTLR 实现的简单查询解析器，我想检索查询的树表示。为此，我正在使用`options { output = AST }`. 然后我解析查询并得到树（代码是python）：

```
lexer = MyQueryLexer(char_stream)
tokens = antlr3.CommonTokenStream(lexer)
parser = MyQueryParser(tokens)
q = parser.query()  # query is my root rule
# do something with q.tree 
```

现在，我从解析器得到的树不包含任何规则名称，只是一个平面列表中的标记。我可以使用重写规则和`^`/`!`将它们放入树结构中，但是它们仍然只是标记。例如，其中一个查询的一部分可能是`color = 1`. 这符合以下规则（简化）：

```
propcondition
: propertyname '=' value 
```

那将变成：

```
# token type, text
5 color
20 =
8 1 
```

我`'='^`可以把它变成：

```
20 =
  5 color
  8 1 
```

但我希望该片段记住它是作为“propcondition”匹配的。我能找到的最接近的事情是引入带有重写规则的假令牌：

```
propcondition
: propertyname '=' value -> ^(PROPCONDITION propertyname '=' value)
// ... 
```

然后给出：

```
4 PROPCONDITION
  5 color
  20 =
  8 1 
```

这是要走的路吗？我觉得我在这里缺少一些基本功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:31:37.793

是的，这就是要走的路。请注意，如果您创建一个名为 的根`PROPCONDITION`，则可以去掉该`'='`符号：这样的条件将永远有两个孩子，对吧？一个左边，一个右边。

```
propcondition
 : propertyname '=' value -> ^(PROPCONDITION propertyname value)
 ; 
```

创建以下树：

![在此处输入图像描述](../Images/2a59ef0082e1ece063cec16a710c6771.png)

如果有更多的运营商，你可以这样做：

```
propcondition
 : propertyname '=' value -> ^(PROPCONDITION ^('=' propertyname value))
 | propertyname '<' value -> ^(PROPCONDITION ^('<' propertyname value))
 | ...
 ; 
```

# string - UNIX 'ls' 命令 - 通配符 'OR' 运算符

> ID：11154811
> 
> 赞同：11
> 
> 时间：2012-06-22T10:53:13.993
> 
> 标签：string, shell, unix, wildcard, ls

我有一个带有时间戳文件的目录，格式如下：

```
processAlpha20120618.txt
processAlpha20120619.txt
processAlpha20120620.txt
processBeta20120618.txt
processBeta20120619.txt
processBeta20120620.txt
... etc. 
```

我想要一个特定日期的列表。像这样的东西：

```
ls -l *201206[19|20|21]* 
```

显然上述方法不起作用，但你可以看到我试图实现的目标。我想匹配字符串“201206”后跟“19”、“20”或“21”的任何内容。

我知道这可以使用**grep**或**find**，我只是想知道是否可以使用**ls**来完成。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-22T11:01:11.157

如果您想要匹配确切的日期（看起来就是这样），那么使用 bash 扩展的方法是：

```
ls -l *201206{19,20,21}* 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-22T10:57:22.687

`ls`不这样做 - 外壳扩展`*`等，然后将它们`ls`作为参数传递给。

查看 shell 的文档 - 它是调用[globbing](http://www.faqs.org/docs/abs/HTML/globbingref.html)

# .htaccess - .htaccess RewriteRule ReDirect driving me nuts (IUpdate 02)

> ID：11154812
> 
> 赞同：0
> 
> 时间：2012-06-22T10:53:19.080
> 
> 标签：.htaccess, mod-rewrite

Update 02

Hi all,

```
 After much searching I found a very good clue that helped me take some important steps towards my goal. Everything is now working well except for the following:

I need to ReWrite or ReDirect to www.domain.com/go404 in these cases:
   www.domain.com
   www.domain.com/
   domain.com
   domain.com/

 But not, of course, when they type
    www.domain.com/subdomain or
    domain.com/subdomain

 Presently, my htaccess code has this snippet added:

    # This sends "just domain" visits to 404
    RewriteCond %{HTTP_HOST} ^domain.com$ [NC] 
    RewriteRule ^(.*)$ http://www.domain.com/go404 [R=301,L]

    # This one makes a NON WWW become a WWW
    RewriteCond %{HTTP_HOST} ^domain.com$ [NC] 
    RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L]

    # This strips the trailing slash
    RewriteRule ^(.*)\/(\?.*)?$ $1$2 [R=301,L]

Can anyone tell me how to set up the condition so it ONLY allows domains written without the trailing slash and/or subfolder string? As indicated above those should redirect to 404. 
```

Thanks!

* * *

Update from my original question:

Hi guys, I tried the solution offered but it doesn't work. To recap:

```
I'm trying to get our Magento site to respond as in the table below using .htaccess rewrites. For whatever reason, only some options work (marked as "Ok"). The others produce www.domain.com, that I don't want (marked as "Fail"). 
```

When visitor types The (internal) result should be: --------------------------- ------------------------------------- www.domain.com www.domain.com/go404 (Fail)
www.domain.com/ www.domain.com/go404 (Fail)
www.domain.com/notfound www.domain.com/go404 (Ok)
www.domain.com/subdomain www.domain.com/_subdomain (Ok)
www.domain.com/subdomain/ www.domain.com/_subdomain (Ok)
www.domain.com/admin www.domain.com/admin (Ok)

```
domain.com          www.domain.com/go404        (Fail)   
domain.com/         www.domain.com/go404        (Fail)   
domain.com/notfound     www.domain.com/go404        (Fail)   
domain.com/subdomain    www.domain.com/_subdomain   (Fail)   
domain.com/subdomain/   www.domain.com/_subdomain   (Ok)   
domain.com/admin        www.domain.com/admin        (Fail)   

To keep things in order in our Root, all subdomains are folders called _subdomain. Visitors to the site only have to write www.domain.com/subdomain and we add the underscore in front. 
```

Notes: "notfound" is any string without a corresponding "_subdomain" folder
"admin" is a valid exception: no underscore in front
As you can see from the table above all addresses without the "www" fail. Also, I have two specific problems related to the "clean" domain + clean domain with trailing slash.

This is my complete htaccess (I erased the comments to make it shorter):

* * *

```
addhandler x-httpd-php5-cgi .php5    
addhandler x-httpd-php5-cgi .php   
addhandler x-httpd-php-cgi .php4   

Options -MultiViews   
DirectoryIndex index.php  

<IfModule mod_php5.c>  
php_value memory_limit 256M  
php_value max_execution_time 18000  
php_flag magic_quotes_gpc off   
php_flag session.auto_start off
php_flag suhosin.session.cryptua off
php_flag zend.ze1_compatibility_mode Off
</IfModule>

<IfModule mod_security.c>
SecFilterEngine Off
SecFilterScanPOST Off
</IfModule>

<IfModule mod_deflate.c>

</IfModule>

<IfModule mod_ssl.c>
SSLOptions StdEnvVars
</IfModule>

<IfModule mod_rewrite.c>
Options +FollowSymLinks
RewriteEngine on
RewriteBase /
RewriteRule ^api/([a-z][0-9a-z_]+)/?$ api.php?type=$1 [QSA,L]
RewriteRule ^api/rest api.php?type=rest [QSA,L]
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
RewriteRule .* - [L,R=405]
RewriteCond %{REQUEST_URI} !^/(media|skin|js)/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule .* index.php [L]
</IfModule>

AddDefaultCharset Off

<IfModule mod_expires.c>
ExpiresDefault "access plus 1 year"
</IfModule>

Order allow,deny
Allow from all

<Files RELEASE_NOTES.txt>
order allow,deny
deny from all
</Files>

RewriteCond %{HTTP_HOST} ^domain\.com$
RewriteRule ^domain\.com/(admin)$ www.domain.com/$1 [L]
RewriteRule ^/(.*)$ www.domain.com/_$1  [L]
RewriteRule ^www\.domain\.com/(admin)$ www.domain.com/$1 [L]
RewriteRule ^www\.domain\.com/(.*)$ www.domain.com/_$1 
```

* * *

Thanks to all

Old question:

I'm trying to get our site to respond in this way using .htaccess rewrites. For whatever reason, only one of the options works (marked as "Ok") and all of the others produce www.domain.com (marked as "Fail").

I need to achieve this combination:

```
When visitor types               The (internal) result should be:
-----------------------------    --------------------------------
www.domain.com                   www.domain.com/go404       (Fail)
www.domain.com/                  www.domain.com/go404       (Fail)
www.domain.com/subdomain         www.domain.com/_subdomain  (Ok)
www.domain.com/admin             www.domain.com/admin       (Ok)

domain.com                       www.domain.com/go404       (Fail)
domain.com/                      www.domain.com/go404       (Fail)
domain.com/subdomain             www.domain.com/_subdomain  (Fail)
domain.com/admin                 www.domain.com/admin       (Fail) 
```

My (root) .htaccess file has this:

```
RewriteRule ^/(admin) www.domain.com/$1
RewriteRule ^/(.*) www.domain.com/_$1  [L] 
```

I tried forcing domain.com into www.doman.com with

```
RewriteRule ^domain.com$ www.domain.com     (Fail) 
```

Btw: the subdomain folder (_subdomain) also has an .htaccess file. Do I need to add RewriteRule there too? I tried with/without to no avail.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:55:41.950

我不确定你是如何使用这些重写器来处理第 3 个案例的。他们只是不应该工作。

这是我会使用的：

```
#external redirect to www. version (to prevent duplicated content)
RewriteCond %{HTTP_HOST} ^domain\.com$
RewriteRule .* http://www.domain.com/$0 [R=302,L]

RewriteRule ^/?$ /go404
RewriteRule ^/?(admin) - [L]
RewriteRule ^/?(.*) /_$1  [L] 
```

# python - Python: Uniquefying a list with a twist

> ID：11154815
> 
> 赞同：5
> 
> 时间：2012-06-22T10:53:47.220
> 
> 标签：python, list

Lets say I have a list:

```
L = [15,16,57,59,14] 
```

The list contains mesurements, that are not very accurate: that is the real value of an element is +-2 of the recorded value. So 14,15 and 16 can have the same value. What I want to do is to uniquefy that list, taking into account the mesurement errors. The output should therefor be:

```
l_out = [15,57] 
```

or

```
l_out = [(14,15,16),(57,59)] 
```

I have no problem producing either result with a for loop. However, I am curious if there could be a more elegant solution. Ideas much appriciated.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T11:38:17.857

[正如lazer 在评论中指出的那样，这里](https://stackoverflow.com/questions/8226923/sort-list-of-floating-point-numbers-in-groups)已经发布了一个类似的问题。使用集群模块解决我的问题是：

```
>>> from cluster import *
>>> L = [15,16,57,59,14]
>>> cl = HierarchicalClustering(L, lambda x,y: abs(x-y))
>>> cl.getlevel(2)
[[14, 15, 16], [57, 59]] 
```

或（获取每个组的平均值的唯一列表）：

```
>>> [mean(cluster) for cluster in cl.getlevel(2)]
[15, 58] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:56:34.770

这是我在纯 Python 方法中执行此操作的方法：

```
s = sorted(L)
b = [i + 1 for i, (x, y) in enumerate(zip(s, s[1:])) if y > x + 2]
result = [s[i:j] for i, j in zip([None] + b, b + [None])] 
```

这`b`是“中断”列表，即集群结束的索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T12:01:30.357

如果你想要标准的 lib python，`itertool`'s`groupby`是你的朋友：

```
from itertools import groupby

L = [15,16,57,59,14]

# Stash state outside key function. (a little hacky).
# Better way would be to create stateful class with a __call__ key fn.
state = {'group': 0, 'prev': None}
thresh = 2

def _group(cur):
    """Group if within threshold."""
    if state["prev"] is not None and abs(state["prev"] - cur) > thresh:
        state["group"] += 1 # Advance group
    state["prev"] = cur
    return state["group"]

# Group, then drop the group key and inflate the final tuples.
l_out = [tuple(g) for _, g in groupby(sorted(L), key=_group)]

print l_out
# -> [(14, 15, 16), (57, 59)] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-22T11:21:05.150

For 循环是最简单的方法，但如果你真的想要一个单行代码：
`l_out = list(set(tuple([tuple(filter(lambda i: abs(item - i) < 3, L)) for item in L])))`
虽然很不清楚，我更喜欢 for 版本:)

# jquery - Jquery menu onhover shows only 1st child

> ID：11154816
> 
> 赞同：0
> 
> 时间：2012-06-22T10:53:51.577
> 
> 标签：jquery, css, jquery-ui

Just a noob trying to learn, I came out with a problem that when i hover the parent of menu only first child shows up not the rest. Please dont mind the css. Help appreciated.

heres the link to [Sample code](http://jsfiddle.net/program_me/s6EXf/2/)

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:58:03.663

或者使用这个：

```
 $('#multimenu a').hover(function(){
    $(this).next().show();
 },function(){
    $(this).next().hide(); 
 }); 
```

**工作示例：http:** [//jsfiddle.net/s6EXf/5/](http://jsfiddle.net/s6EXf/5/)

将 HTML 更改为：

```
<ul id="multimenu">
    <li><a href="#">Example 1</a><div class="submenu"></div></li>         
    <li><a href="#">Example 2</a><div class="submenu"></div></li>    
    <li><a href="#">Example 3</a><div class="submenu"></div></li>
    <li><a href="#">Example 4</a><div class="submenu"></div></li>
    <li><a href="#">Example 5</a><div class="submenu"></div></li>
</ul> 
```

删除了第一个子类，因为可以使用 css 伪类来完成`:first-child`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:55:35.233

您不能拥有多个具有相同 id 的控件，您可以使用 name 代替。所以我改变了

**[现场演示](http://jsfiddle.net/rajaadil/s6EXf/15/)**

```
 $('li[name=multimenu]').hover(function() {
      $(this).children('.submenu').show();
     }, function() {
         $(this).children('.submenu').hide();
    });​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T10:57:48.450

您在所有 li 中都使用 multimenu 作为**id是错误的。**Id 可以在页面中使用一个。ID 是唯一的。

我将所有 id 更改为 class 及其工作参见下面的示例。

**示例：http:** [//jsfiddle.net/surendraVsingh/s6EXf/6/](http://jsfiddle.net/surendraVsingh/s6EXf/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T12:59:47.273

尝试这个

html:

```
<ul>
<li><a href="#">Example 1</a>
    <div class="submenu">
         <div>aaaa<div>
         <div>bbbb<div> 
         <div>cccc<div>     
    </div>
</li>
<li><a href="#">Example 2</a>
    <div class="submenu">
         <div>1111<div>
         <div>2222<div> 
         <div>3333<div>     
    </div>
</li>
<li><a href="#">Example 3</a>
    <div class="submenu">
         <div>xxxx<div>
         <div>yyyy<div> 
         <div>zzzz<div>    
    </div>
</li>
<li><a href="#">Example 4</a>
    <div class="submenu">
         <div>4444<div>
         <div>5555<div> 
         <div>6666<div>    
    </div>
</li>
</ul> 
```

​</p>

CSS：

```
ul li { 
float:left;
margin-left:1em;    
}
.submenu {
position:absolute; 
display:none;
width:105px;  
height:150px; 
-webkit-border-radius: 0px 0px 10px 10px;
border-radius: 0px 0px 10px 10px; 
background:#ccc; 
z-index:123;
} 
```

查询：

```
$('li').hover(function() {
   $(this).children('.submenu').show();
   }, function() {
   $(this).children('.submenu').hide();
});​ 
```

在此处查看演示：http:
[//jsfiddle.net/naresh3591/4H5BE/4/](http://jsfiddle.net/naresh3591/4H5BE/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T11:01:43.890

问题是id必须唯一，js只获取第一个。将 id="multimenu" 更改为 class="multimenu" 那么 js 代码应该是：

```
 $('.multimenu').hover(function(){

        $(this).children('.submenu').show();

     },function(){

        $(this).children('.submenu').hide();

     });​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T10:57:57.157

[检查演示](http://jsfiddle.net/s6EXf/3/)。

利用

```
$('ul #multimenu').hover(function(){

}); 
```

此外，您对所有 li 元素使用相同的 id，您不应该这样做。id 是唯一的。

# filemaker - 基于搜索条件的动态值列表（通过包含关联表出现）

> ID：11154823
> 
> 赞同：0
> 
> 时间：2012-06-22T10:54:10.513
> 
> 标签：filemaker

我在 Filemaker 12 中工作，我想要一种特殊类型的动态值列表（如果我可以通过“包含”运算符关联表，这当然是可能的）。

我有一个`persons`包含大约 500 个条目的表，其中包含`name`和字段`personid`。为了让用户输入 a `personid`（到相关表中），我希望他们使用**value-list**。

使用*整个*s列表的值列表`personname`不是很实用（它需要大量滚动或知道确切的名称）。我的想法是包含一个`namesearch`（一个“虚拟”全局变量，我可以用它来缩小列表的范围），所以用户可以输入人名的一部分，值列表会更新为只包括那些名字的人**包含** `namesearch`.

*注意：`Contains`可以使用filemaker函数来实现[`PatternCount`](https://stackoverflow.com/questions/9537267/boolean-for-whether-a-string-contains-a-substring)。*

我知道如何根据表中的关系创建动态值列表*（使用“仅包含从以下位置开始的相关值：”）*，但不幸的是，“包含”在管理数据库 < 关系...是否可以添加与运营商的关系`contains`？

如果这是不可能的，是否有另一种方法来产生这种价值列表行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:25:55.590

您描述的内容类似于值列表的默认行为。即最初它列出了所有姓名，但如果您关闭列表，键入姓名的一部分，然后再次打开它，它将只显示姓名以您键入的内容开头的人。要打开或关闭列表，您可以使用 ESC 键；它不像好的 AJAX typeahead 小部件那样流畅，但可以工作。

实现此目的的另一种方法是创建人员表的门户并根据您的全局字段设置过滤器。此处门户将作为始终打开的值列表工作。

另一种方法是使用触发器搜索人员表，从找到的集合中获取所有 ID 并将它们放入全局变量中。这可以通过脚本完成，但更快的方法是编写一个自定义函数，该函数使用 GetNthRecord 循环搜索结果集中的记录。现在，您可以建立从这个变量到 People 表的另一个实例的关系，并拥有一个过滤值列表。

# django - check_for_language 总是返回 false

> ID：11154832
> 
> 赞同：2
> 
> 时间：2012-06-22T10:55:17.520
> 
> 标签：django, internationalization

我尝试使用 django i18n 进行语言翻译。当我尝试调用`set_language()`i18n 的方法时，`check_for_language(lang_code)`总是返回 false。
我完成了所有步骤。在项目文件夹中创建`locale`目录并正确执行`makemessages`&`compilemessages`命令并创建`.po`&`.mo`文件。

# google-apps-script - 使用应用程序脚本“发送到驱动器”创建图像

> ID：11154836
> 
> 赞同：0
> 
> 时间：2012-06-22T10:55:27.167
> 
> 标签：google-apps-script

大家好，我正在使用发送到云端硬盘应用程序脚本。

现在，如果我收到的电子邮件包含作为附件的图像，则该图像存储在我指定的文件夹中，但我尝试打开它时看不到预览。

相反，如果我在 Google Drive 中手动上传图像，我可以看到预览。

我注意到从应用程序脚本创建的图像的 url 的 id 比手动上传的其他图像长。

我看不到的图像 ID 示例（由应用程序脚本创建）：

[https://docs.google.com/a/xxxx.com/file/d/0B1G2PrcwzsrzMS02MGEzNjBkOS01YjAyLTRhYTktODFkNS1kNzU5NmIzYWEyNDE/edit](https://docs.google.com/a/xxxx.com/file/d/0B1G2PrcwzsrzMS02MGEzNjBkOS01YjAyLTRhYTktODFkNS1kNzU5NmIzYWEyNDE/edit)

我可以看到的图像 ID 示例（手动上传）

[https://docs.google.com/a/xxxx.com/file/d/0B1G2PrcwzsrzMG5k​​VDZuUGlqRWc/edit](https://docs.google.com/a/xxxx.com/file/d/0B1G2PrcwzsrzMG5kVDZuUGlqRWc/edit)

我怎样才能解决这个问题修改脚本？

先感谢您

```
var threads = GmailApp.getUserLabelByName(gLabel).getThreads(0, 5);

  var folder  = DocsList.getFolder(gFolder);

  for (var x=0; x<threads.length; x++) {

    var messages = threads[x].getMessages();

    for (var y=0; y<messages.length; y++) {

      var att = messages[y].getAttachments();

      for (var z=0; z<att.length; z++) {
        try {

        Logger.log(att[z].getContentType());

          var file = folder.createFile(att[z]);
          Utilities.sleep(1000);
        }
        catch (e) {
          GmailApp.sendEmail(
            Session.getActiveUser().getUserLoginId(), 
            "Error: " + e.message
          );
        }
      }       
    }    
    GmailApp.getUserLabelByName(gLabel)
      .removeFromThread(threads[x]);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:29:41.507

我认为这可能与问题[1239有关](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1239)

我可以使用 createFile 和 copy 方法在 DocList 中重现它：

```
 //Using uploaded jpeg as source
    var doc =  DocsList.getFileById(id)
        DocsList.copy(doc,"test1"); 
```

副本将加载，没有可用的预览

# php - 在数据库php中查找特定值

> ID：11154837
> 
> 赞同：0
> 
> 时间：2012-06-22T10:55:28.530
> 
> 标签：php, mysqli

我尝试了不同的方法，但似乎都没有奏效。当我在 MySQL 控制台中尝试该命令时，它可以正常工作，但是当我在这个 PHP 脚本中尝试它时，它会向我发送一个空字符串。

```
$search = $mysqli->prepare("SELECT item_path FROM items WHERE item_title = ?");

while (array_key_exists($i, $parts)) {
    // An array that contains (word1, word2, word3)
    $data = $parts[$i];

    // Wraps data in "" for mysqli query
    $data = "\"" . $data . "\"";

    // Binding here still doesn't work
    $search->bind_param("s", $data);

    // This should execute the above prepare and give me the data
    // from the way I think it work's this execute() should use the updated $data
    $search->execute();
    $search->bind_result($img_path);
    $search->fetch();

    // This returns an empty string
    echo $img_path;
    echo "<img src= \"", $img_path, "\" >";

    $i++;
} 
```

如果我进入 MySQL 控制台并运行：

```
SELECT item_path FROM items WHERE item_title = "word1" 
```

我得到了我期待的 item_path，但由于某种原因，我的脚本返回了一个空字符串。

提前感谢您的帮助（如果您愿意的话）！

编辑：

```
 // Wraps data in "" for mysqli query
    $data2 = "\"" . $data . "\"";

    // Binding here still doesn't work even after changing the var
    $search->bind_param("s", $data2); 
```

我厌倦了将绑定更改为另一个变量，但我仍然得到一个空字符串。我不确定这是否是因为我错误地包装了数据，或者是否还有其他原因。我一直在寻找其他类似的事情发生，但我一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:06:13.460

您将语句绑定在子句之外，并且永远不会使用`$data`您更改的语句。

```
$search = $mysqli->prepare("SELECT item_path FROM items WHERE item_title = ?");

while (array_key_exists($i, $parts)) {
    // An array that contains (word1, word2, word3)
    $data = $parts[$i];

    // Wraps data in "" for mysqli query
    $data = "\"" . $data . "\"";

    // Bind it here instead!
    $search->bind_param("s", $data);

    // This should execute the above prepare and give me the data
    $search->execute();
    $search->bind_result($img_path);
    $search->fetch();

    // This returns an empty string
    echo $img_path;
    echo "<img src= \"", $img_path, "\" >";

    $i++;
} 
```

# python - 在 python 中生成错误和访问日志

> ID：11154843
> 
> 赞同：-2
> 
> 时间：2012-06-22T10:55:50.220
> 
> 标签：python, logging, web.py

我们意识到我们的服务流程需要错误日志和访问日志。这些是像服务一样长时间运行的进程；他们回应打给他们的电话。

因此，我们需要您的帮助来简单地实现以下目标：

```
# for developers
from MyLogger import log

log.error 'something bad something wrong'
log.access 'something something' 
```

我正在考虑设计这个`MyLogger`，它将简单地将错误重定向到标准错误并访问标准输出，以便我可以通过标准错误和标准输出的配置将错误收集到特定文件。

还有一点：这些服务只不过是 web.py 实例。

我想我不是在寻找各种级别的控制日志，例如警告、调试、错误、信息等。我的目标更多是拥有类似于 apache Web 服务器的错误日志和访问日志。所以我的开发者不用担心使用warn、debug等如下：

```
log.warn msg
log.debug msg 
```

这不是必需的。

我只想拥有一个类似于 Web 服务器或服务的错误日志和访问日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:59:30.777

[Python 标准日志记录模块](http://docs.python.org/library/logging.html)中已经包含了那个“电池” 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:59:30.840

Python 随[`logging`](http://docs.python.org/library/logging.html)模块一起提供。

# php - 使用 PHP 将 MySQL 数据导出到 xml - HTML 编码和一般错误 BRAIN MELT

> ID：11154848
> 
> 赞同：3
> 
> 时间：2012-06-22T10:56:10.963
> 
> 标签：php, html, xml, encoding, cdata

任何能回答我的问题的人都应该获得巨大的超凡金牌！

我正在尝试将 MySQL 表的内容转换为一种漂亮、简单的 XML 格式。我正在运行一些运行良好的 PHP，我可以看到 XML（美好时光）。但是，在 MySQL 表中，有几个字段填充了非编码的 HTML 表代码。我将每个字段值包装在 CDATA 标记中，我确保 xml 标记已关闭，但我想知道我是否遗漏了某些内容，因为它出错了，我不明白为什么（坏次）。对我来说它看起来不错，所以我尝试在 Excel 中打开它（因为这就是客户端会看到它的方式）它声称“包”的开始标签与“long_description”的结束标签匹配。

[http://www.shavesgreensafaris.com/display.php](http://www.shavesgreensafaris.com/display.php)是我正在处理的页面，因此您可以在那里查看数据。

这是我正在使用的代码...

```
 $xml          = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";
        $root_element = "packages";
        $xml         .= "<$root_element>";

        if(mysql_num_rows($result)>0)
        {
           while($result_array = mysql_fetch_assoc($result))
           {
              $xml .= "<package>";

              //loop through each key,value pair in row
              foreach($result_array as $key => $value)
              {
                 //$key holds the table column name
                 $xml .= "<$key>";

                 //embed the SQL data in a CDATA element to avoid XML entity issues
                 $xml .= "<![CDATA[$value]]>"; 

                 //and close the element
                 $xml .= "</$key>";
              }

              $xml.="</package>";
           }
        }

//close the root element
$xml .= "</$root_element>";

//send the xml header to the browser
header ("Content-Type:text/xml"); 

//output the XML data
echo $xml; 
```

我到底做错了什么？！

* * *

## 编辑

好的，所以似乎有些东西从第 310 行周围的 long_description 标记中删除了一个“<” - 如果您想将其视为“>long_description>”，您可以在视图源中搜索 - 发生了一些非常奇怪的事情，并且标签没有正确形成。我不完全确定这是如何发生的，因为我使用的代码肯定会在所有 $keys 上放置左尖括号和右尖括号。它只发生一次，但它似乎把其他一切都塞满了。

有谁知道为什么会发生这种情况？

非常感谢任何帮助，并在此先感谢！

宝石

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:28:08.483

我觉得[DOM](http://www.php.net/manual/en/book.dom.php)将是解决这个问题的方法。乍一看，该代码可能看起来有些麻烦，但它会为您处理所有输出格式：

```
<?php

  // The names of the root node and the node that will contain a row
  $root_element = "packages";
  $row_element = "package";

  // Create the DOMDocument and the root node
  $dom = new DOMDocument('1.0', 'utf-8');
  $rootNode = $dom->appendChild($dom->createElement($root_element));

  // Loop the DB results
  while ($row = mysql_fetch_assoc($result)) {

    // Create a row node
    $rowNode = $rootNode->appendChild($dom->createElement($row_element));

    // Loop the columns
    foreach ($row as $col => $val) {

      // Create the column node and add the value in a CDATA section
      $rowNode->appendChild($dom->createElement($col))
              ->appendChild($dom->createCDATASection($val));

    }

  }

  // Output as string
  echo $dom->saveXML(); 
```

# cakephp - 如何防止用户编辑别人的帖子

> ID：11154854
> 
> 赞同：1
> 
> 时间：2012-06-22T10:56:42.720
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

假设我有`User`模型和`Post`模型。`Post`模型包含字段`user_id`。 `User`已经`$hasMany`开`Post`和`Post`已经`$belongsTo`开`User`。

我有一些帖子编辑操作：

```
PostsController::edit($id) {
    if($this->request->isPost())
    {
        $this->Post->id = $id;
        $this->Post->save();
    }

    $post = $this->Post->read($id);
    $this->set(compact('post'));
} 
```

我`AuthComponent`用来登录用户。

如何防止用户编辑其他一些帖子？有没有内置功能/选项的蛋糕来做到这一点？因为 some1 可以使用任何 id 登录和发布编辑操作。甚至没有保存帖子数据的情况 - 假设帖子是私人的（只有所有者应该看到它） - 当有人调用 posts/edit/some_id 时，它会看到这篇帖子的编辑表单......

更简单的方法是在编辑操作的开头添加它：

```
$this->Post->id = $id;
if($this->Post->readField('user_id') != $this->Auth->user('id')) 
{ //trigger error or redirect } 
```

但是我必须在每个更新/读取属于某个用户的任何数据的操作的开头添加它。所以我正在寻找更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:26:16.380

[蛋糕手册](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html#authorization-who-s-allowed-to-access-what)中提供了一个确切的示例（也可以方便地使用 Post/User 模型）

人人都是赢家！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:48:12.060

好吧，没有办法避免添加一行来检查用户是否有权执行某项操作。即使您使用 ACL（访问控制列表），这是 Cake 最强大的功能之一。

但是正如您所说的一般的优雅，ACL 将是最好的：) 不过要小心，它们有一个陡峭的学习曲线。不要轻易放弃，这是值得的。

您应该会看到本书[http://book.cakephp.org/1.3/view/1543/Simple-Acl-controlled-Application中的 ACL](http://book.cakephp.org/1.3/view/1543/Simple-Acl-controlled-Application)

# internet-explorer-8 - pie.htc 文件在 IE8 和 IIS6 中错误地显示为 http_referer

> ID：11154855
> 
> 赞同：0
> 
> 时间：2012-06-22T10:56:56.717
> 
> 标签：internet-explorer-8, iis-6

我正在开发一个公司内部网，我们最近使用设计机构指定的各种 CSS3 优点对其进行了重新设计。我们的公司标准浏览器（仍然）是 IE8，所以为了使 CSS3 正常工作，我使用了 CSS3 PIE (http://css3pie.com/)，它通过 .htc 文件使用 VML 重新创建 CSS 功能 - 效果很好。但是我注意到在 IE8 中查看的页面的 http_referer 值被返回为 pie.htc 的位置，而不是实际的引用页面，并且在重新设计之前它工作得很好。Firefox 被允许作为替代浏览器，并且对于在该浏览器中查看的页面，所有 http_referer 值都是应有的。这对于使用此变量进行重定向的表单来说非常令人头疼，

我已经向 CSS3 PIE 的开发人员标记了这一点，这对他来说是个谜，但在我注册一个错误之前，我想看看它是否可能是 IIS 的一些失败或我错过了一些设置（我正在使用版本6 在 Windows 2003 上）。我们也有一个带有 Apache 的 Linux 服务器，用于不同的目的，我使用相同的技术重新设计了它，并且似乎没有显示相同的行为。

是否有人对他们能够解决的 IIS 上的 PIE 或任何其他 .htc 文件有任何相关经验？还是某种永远无法修复的 IE8 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:20:37.463

我们遇到同样的问题。我们从 html 中删除了它。这可能是一个 IE 错误，我看不出 .htc 的引用者应该与页面相同的任何原因。

# java - 从 JXDatePicker 获取时间

> ID：11154863
> 
> 赞同：1
> 
> 时间：2012-06-22T10:57:40.267
> 
> 标签：java, swing, datepicker, simpledateformat, swingx

是否可以从 JXDatePicker 组件中不仅获取日期，还获取日期和时间？

我已将小部件配置为显示此格式：

```
SimpleDateFormat dateFormatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
JXDatePicker startTime = new JXDatePicker(System.currentTimeMillis); // This gets today's Date, but time appears as 00:00:00
startTime.setFormats(dateFormatter); 
```

每当我在日历中选择一天时，时间都会设置为 00:00:00，即使它手动设置了任何其他值。我不在乎，但是当我获得 JXDatePicker 的值时，即使它已被编辑，我也会收到 00:00:00。例如，如果将 2012-06-22 07:23:10 写入我的 JXDatePicker，然后调用 dateFormatter.format(startTime.getDate())，我将收到字符串“2012-06-22 00:00:00” .

我需要获取时间值。有什么简单的方法可以做到这一点？如果太难，我可以换成你建议的不同的小部件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T12:39:27.940

JXDatePicker 仅用于提取日期。任何时候都不会回来。这就解释了为什么你会得到 00:00:00。你将不得不找到另一个。也许这就是你要找的那个：

[有可用于 Java Swing 的好的免费日期和时间选择器吗？](https://stackoverflow.com/questions/654342/is-there-any-good-and-free-date-and-time-picker-available-for-java-swing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T16:05:46.070

JXDatePicker 可能应该仅用于概念上的日期，但您仍然可以从其编辑器中收集完整的 Java Date 对象。只需使用这样的东西：

```
JXDatePicker datePicker = new JXDatePicker();
datePicker.setFormats("dd-MM-yyyy HH:mm:ss");

/*
  set in any way value inside datePicker
*/

JFormattedTextField editor = datePicker.getEditor();
Date dateInDatePicker = (Date) editor.getValue(); 
```

以这种方式使用它您可以收集整个 Java Date 对象，而不是仅修剪为日期信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:01:09.213

将此发布给可能访问此问题的其他人，而不是 OP，因为我相信您现在已经找到了解决方案。

这是一个非常有用的解决方案。它非常容易更新和定制。

[http://www.java.net/node/700914](http://www.java.net/node/700914)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T07:23:59.910

很简单。只需将其粘贴到您的类定义部分。

```
private JXDatePicker Today= new JXDatePicker(new Date()); 
```

这将显示系统日期，如：“09.09.2014”
如果您的区域设置不同，请尝试将日期格式化为：

```
datePicker.setFormats("dd/MM/yyyy"); 
```

ETC...

不需要放任何其他东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-06T09:19:59.453

```
JFormattedTextField editor = jXDatePicker1.getEditor();

Date dateInDatePicker = (Date) editor.getValue();

DateFormat sysDate = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");

String date_to_store = sysDate.format(dateInDatePicker); 
```

# javascript - 在jQuery中触发复制事件？

> ID：11154865
> 
> 赞同：2
> 
> 时间：2012-06-22T10:57:41.980
> 
> 标签：javascript, jquery

是否可以从 JavaScript/jQuery 触发复制事件？我想通过单击按钮来模拟复制事件，但找不到这样做的方法。我不想使用 ZeroClipboard 和任何其他 Flash。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T11:00:36.600

没有 Flash 或 silverlight 之类的插件是不可能的。

# objective-c - 如何在ios5中进行应用内购买？

> ID：11154867
> 
> 赞同：3
> 
> 时间：2012-06-22T10:57:45.137
> 
> 标签：objective-c, in-app-purchase, xcode4.3, ios5

我已使用以下代码进行应用内购买。

```
- (void)viewDidLoad {
if ([SKPaymentQueue canMakePayments]) {
    NSLog(@"Can Buy Product");

    SKProductsRequest *productRequest=[[SKProductsRequest alloc]initWithProductIdentifiers:[NSSet setWithObject:@"com.mycompany.myproduct.productpack"]];
    productRequest.delegate=self;
    [productRequest start];
}
else {

    NSLog(@"Product Can't be purchased");
}
}

-(IBAction)purchasePack1 {

SKPayment *payment=[SKPayment paymentWithProductIdentifier:@"com.mycompany.myproduct.productpack"];
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];
[[SKPaymentQueue defaultQueue] addPayment:payment];

}

-(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {

validProduct=nil;
int count=[response.products count];
if (count>0) {
    NSLog(@"Product Avail");

    validProduct=[response.products objectAtIndex:0];
}
else {
    NSLog(@"No Product avail");
    [purchaseBtn setHidden:TRUE];
}
}

-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions {

for (SKPaymentTransaction *transaction in transactions) {
    switch (transaction.transactionState) {
        case SKPaymentTransactionStatePurchasing:
            NSLog(@"Purchasing");   
            [activityIndicatorObj setHidden:FALSE];
            [activityIndicatorObj startAnimating];
            break;

        case SKPaymentTransactionStatePurchased:

            UIAlertView *alt=[[UIAlertView alloc]initWithTitle:@"Congrats" message:@"Thanks For Purchasing " delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
            [alt show];
            [alt release];
            NSLog(@"Purchased");
            [activityIndicatorObj stopAnimating];
            [activityIndicatorObj setHidden:TRUE];
            [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
            break;

            case SKPaymentTransactionStateFailed:

            if (transaction.error.code!=SKErrorPaymentCancelled) {

                NSLog(@"Cancelled");

            }
            [[SKPaymentQueue defaultQueue] finishTransaction:transaction];

            UIAlertView *alt1=[[UIAlertView alloc]initWithTitle:@"Sorry" message:@"Some Error Encountered!" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
                [alt1 show];
                [alt1 release];
            NSLog(@"Failed");
            [activityIndicatorObj stopAnimating];
            [activityIndicatorObj setHidden:TRUE];
            break;

            case SKPaymentTransactionStateRestored:
            NSLog(@"Restored");
            [activityIndicatorObj stopAnimating];
            [activityIndicatorObj setHidden:TRUE];
            [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
            break;

        default:
            break;
    }
}
} 
```

当我点击购买按钮时，我收到一条警告消息，上面写着“您已经购买了此产品但尚未下载，您要下载吗？” 当我单击“是”时，我没有得到 App 的任何响应，并且我确定该产品尚未下载。谁能告诉我这个问题的建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:51:17.703

我没有看到任何实现`- (void)provideContent:(NSString *)productId`- 你错过了那部分吗？在任何情况下，当 transactionState 切换到 SKPaymentTransactionStatePurchased 时，您都应该收到通知。

如果您还没有，您可能想看看 Ray Wenderlich tut on [in-app](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases) purchase，它将帮助您建立一个应用内管理器课程。我认为您已将应用程序内逻辑放在视图控制器中 - 将该部分留在单独的类中会很好。所以一个应用内经理/助手:-)

# php - HTML 似乎忽略了 PHP 命令？

> ID：11154873
> 
> 赞同：0
> 
> 时间：2012-06-22T10:57:49.037
> 
> 标签：php, mysql, html

当谈到 HTML 时，我是一个完全的新手，如果我是一个傻瓜，我从来不需要做任何网页的东西，所以很抱歉。

我有一个 iOS 应用程序的高分表，我也想在该应用程序的网站上显示它。排行榜在使用 PHP 和 mySQL 的应用程序中运行良好，但是当我尝试在 HTML 文件中使用 PHP 访问数据库时，它似乎没有注意 PHP 的逻辑（即，如果我有 if/ else 语句，它将同时运行两种情况）。

这是我的代码的简化版本，如果连接到数据库成功，则表头中的第一列将显示“成功”，否则将显示“失败”。

```
<body>

<table class="altrowstable" id="alternatecolor">

<?php
if (!mysql_connect($db_host, $db_user, $db_pwd))
{
    <tr>
    <th>Failure</th><th>Player</th><th>Points</th><th>Played</th><th>Wins</th><th>Draws</th><th>Losses</th>
    </tr>
}
else
{
    <tr>
    <th>Success</th><th>Player</th><th>Points</th><th>Played</th><th>Wins</th><th>Draws</th><th>Losses</th>
    </tr>
}

?>

</table>
</body> 
```

谁能看到这里做错了什么？我假设 if/else 会正常工作，但是我将两行都插入到表中，“失败”和“成功”。

编辑：我也尝试过使用 echo ""; 等等，但不确定哪种方式是正确的，因为它们都给了我同样的错误，它忽略了 PHP。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T11:00:00.953

将您的代码更改为

```
 <table class="altrowstable" id="alternatecolor">

    <?php
    if (!mysql_connect($db_host, $db_user, $db_pwd))
    {
?>
        <tr>
        <th>Failure</th><th>Player</th><th>Points</th><th>Played</th><th>Wins</th><th>Draws</th><th>Losses</th>
        </tr>
  <?php
   }
    else
    {
  ?>
        <tr>
        <th>Success</th><th>Player</th><th>Points</th><th>Played</th><th>Wins</th><th>Draws</th><th>Losses</th>
        </tr>
<?php
    }

    ?>

    </table> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T11:00:09.707

我认为你需要把你的 HTML 标签放在这样的`echo`命令中

```
echo '<tr>
      <th>Failure</th><th>Player</th><th>Points</th><th>Played</th><th>Wins</th>         <th>Draws</th><th>Losses</th>
      </tr>'; 
```

这应该工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:00:04.170

`<?php`和之间`?>`只是 PHP 代码。它将您的 HTML 视为 PHP。

任何一个

1.  采用`echo`
2.  放在`?>`HTML 之前和`<?php>`之后（即停止和开始 PHP 处理）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T11:01:29.920

检查文件的扩展名。它需要是 filename.php 你需要一个服务器来启动 php 代码你可以像这里一样使用 echo heredoc

```
<body>

<table class="altrowstable" id="alternatecolor">

<?php
if (!mysql_connect($db_host, $db_user, $db_pwd))
{
echo <<<_END
<tr>
<th>Failure</th><th>Player</th><th>Points</th><th>Played</th><th>Wins</th><th>Draws</th><th>Losses</th>
</tr>
_END
}
else
{
echo <<<_END
<tr>
<th>Success</th><th>Player</th><th>Points</th><th>Played</th><th>Wins</th><th>Draws</th><th>Losses</th>
</tr>
_END
}
?>
</table>
</body> 
```

这似乎工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T11:02:29.097

试试这个：

```
 <body>

    <table class="altrowstable" id="alternatecolor">

    <?php
    if (!mysql_connect($db_host, $db_user, $db_pwd))
    {
    ?>
        <tr>
        <th>Failure</th><th>Player</th><th>Points</th><th>Played</th><th>Wins</th><th>Draws</th><th>Losses</th>
        </tr>
<?php
    }
    else
    {
?>
        <tr>
        <th>Success</th><th>Player</th><th>Points</th><th>Played</th><th>Wins</th><th>Draws</th><th>Losses</th>
        </tr>
     <?php } ?>

    </table>
    </body> 
```

# windows - MATLAB 使用带有凭据的 UNC 路径

> ID：11154888
> 
> 赞同：1
> 
> 时间：2012-06-22T10:58:48.780
> 
> 标签：windows, matlab, unc, network-share, networkcredentials

我需要在**MATLAB**中使用*UNC-Path*。由于*进一步需要登录凭据并且不需要***存储**在机器上，我正在寻找一种更改路径的好方法。 目前我想到了这个解决方案

 *****```
try
    cd('\\192.168.175.128\shr');
catch
    system('net use \\192.168.175.128\shr pwd /USER:netusr')
    cd('\\192.168.175.128\shr');
end 
```

但我正在寻找更好的想法：也许在 matlab 之类的`cd_to_unc(path,usr,pwd)`或其他集成解决方案中有一个集成功能？我认为，系统调用是一种无效的，不是吗？
只是为了明确 - 这不是与安全相关的问题。我只是在寻找一种（也许）`more efficient`方法来做这个坐骑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:08:38.063

MATLAB 是一个通用的数学原型 IDE（至少）。我不相信它意味着拥有你正在寻找的能力。在大多数情况下，使用 LAN 上的凭据实现网络访问是高度特定于平台的，我会假设它超出了 MATLAB 的“范围”。

MATLAB 具有用于创建路径字符串的标准实用程序，这些路径字符串大多与平台无关。请参阅[fullfile](http://www.mathworks.se/help/techdoc/ref/fullfile.html)、[pathsep](http://www.mathworks.se/help/techdoc/ref/pathsep.html)、[filesep](http://www.mathworks.se/help/techdoc/ref/filesep.html)、[fileparts](http://www.mathworks.se/help/techdoc/ref/fileparts.html)等。但一件事是创建带有路径名的字符串 - 另一件事是访问这些路径。我相信这始终取决于底层操作系统。使用`cd`and`system`可能是您唯一的选择。

我假设您可以在驱动程序级别解决此问题，并使用内置凭据的特殊 URI（如[RFC1738](https://www.rfc-editor.org/rfc/rfc1738)中所述，类似的做法是 URI 中的 FTP 凭据）。安全性可能不太理想。如果这样的东西不存在，我会感到惊讶 - 至少在 linux 上。*****

# php - 如何在symfony中列出某个作者写的文章？

> ID：11154890
> 
> 赞同：0
> 
> 时间：2012-06-22T10:58:49.020
> 
> 标签：php, symfony1, symfony-1.4, backend

我在一个简单的新闻 Web 应用程序上工作。

它有表 Articles(id,title,content,user_id) 和表 Users(id,name,username,passwd..) 等。

在后端应用程序中，我只想列出具有特定`user_id`.

我`user_id`会从`$this->getUser()->getAttribute('user_id')`.

据我所知，symfony 网站上提供的文档没有涵盖这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:09:56.497

你可以：

*   在您的 generator.yml 中插入一个新行，如下所示：

    ```
    list:
      title: Articles list
      table_method: getArticlesByUserId 
    ```

*   在你的 ArticleTable.class.php 中插入一个新函数：

    ```
    public function getArticlesByUserId() {
      $userId = sfContext::getInstance()->getUser()->getAttribute( 'user_id' );
      $u = $this->createquery( 'u' )->where( 'u.user_id = ?', $userId );  

      return $q;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:19:36.077

[本文](http://symfony-world.blogspot.fr/2010/03/custom-query-for-admin-generator.html)将为您提供不同的方法。

关于您的需求，您可以覆盖`buildQuery`：

```
protected function buildQuery()
{
  return parent::buildQuery()
    ->where('user_id = ?', $this->getUser()->getAttribute('user_id'));
} 
```

# wcf - 通过 Excel VBA 从 WCF 服务调用方法

> ID：11154896
> 
> 赞同：2
> 
> 时间：2012-06-22T10:59:14.587
> 
> 标签：wcf, excel, vba

我通过 WCF Web 服务创建了一个方法。我已经上传到我的服务器了。我想做的是在 Excel VBA 宏中调用该方法。是否可以？

就像是：

```
Dim client As DaybookServicesClient = New DaybookServicesClient()
' Use the 'client' variable to call operations on the service.

' Calls my method
client.ExecuteSQLJob()

' Always close the client.
client.Close() 
```

如何在 Excel VBA 中引用我的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:30:54.943

一种方法是创建 WebGet wcf 服务，服务将返回 adorecordset xml，在宏上您可以使用以下代码获取记录集

```
 Public Function GetRSFromString(sXML As String) As Object
   Dim oStream As Object, oRecordset As Object
   Set oStream = CreateObject("ADODB.Stream")
   oStream.Open
   oStream.WriteText sXML
   oStream.Position = 0
   Set oRecordset = CreateObject("ADODB.Recordset")
   oRecordset.Open oStream
   oStream.Close
   Set oStream = Nothing
   Set GetRSFromString = oRecordset
   Set oRecordset = Nothing
End Function

Public Function GetSoapRequest()
    Dim strResult As String
    Dim xmlhtp As Object, xmlDoc As Object, oRecordSetFromXML As Object
    Set xmlhtp = CreateObject("msxml2.xmlhttp.6.0")
    With xmlhtp
            .Open "get", "http://[server]/ServiceName.svc/FunctionName", False
            .setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
            .Send
            Set xmlDoc = CreateObject("msxml2.DOMDocument.6.0")
            strResult = .responseText
            xmlDoc.loadXML strResult
            Set oRecordSetFromXML = AdoFunction .GetRSFromString(xmlDoc.Text)
    End With
    Set xmlDoc = Nothing
    Set xmlhtp = Nothing               
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:55:17.300

[您可以使用Web 服务参考工具](http://msdn.microsoft.com/en-us/library/aa140260%28v=office.10%29.aspx)从 excel 中调用 Web 服务，为您的服务生成代理，然后在 VBA 代码中进行调用。

但是，由于 VB 和 Java（托管服务）之间的互操作性，我之前曾尝试过使其正常工作并失败了。

如果您的呼叫是一种方式（VBA 代码不需要响应），最好让 VBA 代码通过 msmq 向中介服务发送消息，然后由中介服务代表您拨打电话。这是我最终使用的解决方案。

# java - JSP & Java - 使用 jslt forEach 在 JSP 中呈现数据 - 如何访问较低的元素

> ID：11154897
> 
> 赞同：0
> 
> 时间：2012-06-22T10:59:23.763
> 
> 标签：java, spring, list, jsp, foreach

我有一个任务要做，我需要获取响应对象中返回的数据，并将其发送到 JSP。我需要做的是在我使用 javascript 和 jquery 创建的菜单列表中显示它 - （效果很好，它只需要数据）。

我正在使用 Spring，这是我的 Java 代码 - 这显示了对象：

```
@Controller
public class WordListController {

    /* @version $Revision: $ $Date: $ */

    @Autowired
    private FrontendServiceFacade FrontendServiceFacade;

    private final Logger logger = Logger.getLogger(this.getClass());

    @RequestMapping("/ViewWords")
    public String WordListRequestController(Model model) {

        WordListRequest request = new WordListRequest();
        WordListResponse response;

        request.setLibraryId("LIB_CODE_1");

        try{
            response = (WordListResponse)FrontendFacade.getWordList(request);           
        }catch(Exception e){
            //TODO Process Exception
            e.printStackTrace();
            return null;
        }

        List<UserBooksType.Book> returnedWordBooks = null;
        List<UserBookPagesType.Page> returnedWordPages = null;
        List<WordsType.Word> returnedWords = null;
        List<WordPageList> WordPageList= new ArrayList<WordPageList>();

        int bookSize = 0;
        int pageSize = 0;
        int wordSize = 0;
        String bookId = "";
        String pageName = "";
        String wordId = "";

        returnedWordBooks = response.getDataLoad().getUserBooks().getBook();
        bookSize = response.getPayLoad().getUserBooks().getBook().size();

        WordPagesList wordPagesList = new WordPagesList();

        ArrayList<BookList> bookList = new ArrayList<BookList>();
        ArrayList<PageList> pageList = new ArrayList<PageList>();
        ArrayList<WordList> wordList = new ArrayList<WordList>();

        // Loop <Book>
        for (UserBooksType.Book book : returnedWordBooks) {
            System.out.println("Book Loop");

            bookId = book.getBookId();

            // *********************************************
            BookList bookL = new BookList();
            bookL.setBookId(bookId);
            // *********************************************

            returnedWordPages = book.getUserBookPages().getPage();
            pageSize = book.getUserBookPages().getPage().size();

            // Loop <Pages>
            for (UserBookPagesType.Page page : returnedWordPages) {

                pageName = page.getName();

                returnedWords = page.getWords().getWord();
                wordSize = page.getWords().getWord().size();

                // Loop <Word>
                for (WordsType.Word word : returnedWords) {
                    System.out.println("Word Loop");

                    wordId = word.getWordId();

                    WordPageList WordPage = new WordPageList();

                    WordPage.setBookId(bookId);
                    WordPage.setPageName(pageName);
                    WordPage.setWordId(wordId);

                    WordPageList.add(WordPage);

                }

            }
        }
        // model.addAttribute("ViewWords", WordPageList); // I dont want to pass
        model.addAttribute("ViewWords", response); // I want to pass this
        return "ViewWords";
    }

} 
```

这显示了对象是如何构建的。我想做的是将“响应”对象直接传递给 JSP，而不是“WordPageList”列表。

有没有办法我可以直接传递这个对象，然后他们循环通过 JSP 上的对象。

这是我的 JSP 代码：

```
<li ><span class="folder">Books</span>
    <ul>
        <c:forEach items="${ViewBooks}" var="WordPageList" varStatus="status">
            <li class="closed"><span class="folder">${WordPageList.bookId}</span>
                <ul>
                    <li class="closed"><span class="folder">${WordPageList.PageName}<br /></span>
                        <ul>
                            <li class="closed"><span class="folder">${WordPageList.wordId}<br /></span>
                                <ul>
                                    <li><span class="file">Option 1</span></li>
                                    <li><span class="file">Optoin 2</span></li>
                                    <li><span class="file">Option 3</span></li>
                                    <li><span class="file">Option 4</span></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </c:forEach>
    </ul>
</li> 
```

这真的不适合我想要的。我想做类似的事情，但是将“响应”对象传递给 JSP，然后循环通过该对象来呈现数据，所以我认为这是使用嵌套的 foreach 语句，但我不知道该怎么做，或者如何评估这些元素。

我希望这是有道理的。

编辑：

这是所要求的 WordListResponse 类：

```
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;
import javax.xml.bind.annotation.adapters.CollapsedStringAdapter;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "responseStatus",
    "errorNumber",
    "errorDescription",
    "data"
})
@XmlRootElement(name = "WordListResponse")
public class WordListResponse {

    protected int responseStatus;
    protected int errorNumber;
    @XmlElement(required = true)
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    protected String errorDescription;
    @XmlElement(required = true)
    protected WordListResponse.Data data;

    /**
     * Gets the value of the responseStatus property.
     * 
     */
    public int getResponseStatus() {
    return responseStatus;
    }

    /**
     * Sets the value of the responseStatus property.
     * 
     */
    public void setResponseStatus(int value) {
    this.responseStatus = value;
    }

    /**
     * Gets the value of the errorNumber property.
     * 
     */
    public int getErrorNumber() {
    return errorNumber;
    }

    /**
     * Sets the value of the errorNumber property.
     * 
     */
    public void setErrorNumber(int value) {
    this.errorNumber = value;
    }

    /**
     * Gets the value of the errorDescription property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getErrorDescription() {
    return errorDescription;
    }

    /**
     * Sets the value of the errorDescription property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setErrorDescription(String value) {
    this.errorDescription = value;
    }

    /**
     * Gets the value of the data property.
     * 
     * @return
     *     possible object is
     *     {@link WordListResponse.Data }
     *     
     */
    public WordListResponse.Data getData() {
    return data;
    }

    /**
     * Sets the value of the data property.
     * 
     * @param value
     *     allowed object is
     *     {@link WordListResponse.Data }
     *     
     */
    public void setData(WordListResponse.Data value) {
    this.data = value;
    }

    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
    "userBooks"
    })
    public static class Data {

    @XmlElement(required = true)
    protected UserBooksType userBooks;

    /**
     * Gets the value of the userBooks property.
     * 
     * @return
     *     possible object is
     *     {@link UserBooksType }
     *     
     */
    public UserBooksType getUserBooks() {
        return userBooks;
    }

    /**
     * Sets the value of the userBooks property.
     * 
     * @param value
     *     allowed object is
     *     {@link UserBooksType }
     *     
     */
    public void setUserBooks(UserBooksType value) {
        this.userBooks = value;
    }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:14:41.110

嵌套的 forEach 与非嵌套的 forEach 完全相同：

```
<%-- iterate over the someList field of the someObject attribute --%>
<c:forEach var="outerItem" items="${someObject.someList}">
    <%-- now, outerItem is an attribute, and you may access its fields --%>

    <%-- iterate over the otherList field of the outerItem attribute --%>
    <c:forEach var="innerItem" items="${outerItem.otherList}">

        <%-- now, innerItem is an attribute, and you may access its fields --%>

    </c:forEach>

</c:forEach> 
```

上面假设 Spring 控制器在属性中存储了一个具有以下结构的对象`someObject`：

```
 class Xxx {
     public List<Yyy> getSomeList() {
         ...
     } 
 }

 class Yyy {
     public List<Zzz> getOtherList() {
         ...
     } 
 } 
```

# android - Android以编程方式设置按钮文本

> ID：11154898
> 
> 赞同：18
> 
> 时间：2012-06-22T10:59:27.400
> 
> 标签：android, button

有人知道如何以编程方式设置按钮的文本吗？

事情是我没有从主布局（setContentView）调用它我在一个异步任务之后膨胀的视图中调用它这是我尝试过的但是这在第二行给出了一个空指针异常

```
Button mButton=(Button)findViewById(R.id.contact);
        mButton.setText("number"); 
```

这是我调用按钮的布局

```
 <Button
       android:id="@+id/contact"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_below="@+id/address"
       android:layout_toLeftOf="@+id/badge"
       android:background="@drawable/ic_btn_call"
       android:textSize="10dp"
       android:textStyle="bold"
       android:textColor="@color/white"/> 
```

在这里我的观点我在膨胀

```
ClubInfo = LayoutInflater.from(getBaseContext()).inflate(R.layout.clubinfocell,
                null);

        TextView TeamNameText = (TextView) ClubInfo.findViewById(R.id.TeamName);
        TeamNameText.setText(teamName);

        TextView AddressText = (TextView) ClubInfo.findViewById(R.id.address);
        AddressText.setText(address1);

        Button mButton=(Button)ClubInfo.findViewById(R.id.contact);
        mButton.setText(telephone); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-22T11:14:56.443

然后使用您的视图的对象来初始化它：

```
Button mButton = (Button)your_view_object.findViewById(R.id.contact);
mButton.setText("number"); 
```

当您尝试识别除 Activity 布局之外的视图时，您必须像这样传递该视图的引用。如果不是，Android 将继续从您在`setContentView()`.

例如，假设您已经膨胀了这样的视图：

```
View View = mInflater.inflate(R.layout.gridelement, null); 
```

然后将此视图的对象用于该膨胀布局中存在的按钮：

```
 Button mButton = (Button)View.findViewById(R.id.contact); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T11:04:31.433

将您的代码更改为：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);//set layout here in which u have add contact in xml
        Button mButton=(Button)findViewById(R.id.contact);
        mButton.setText("number"); 
```

**编辑：** 你的 \res\layout\main.xml 看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
<Button
       android:id="@+id/contact"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_below="@+id/address"
       android:layout_toLeftOf="@+id/badge"
       android:background="@drawable/ic_btn_call"
       android:textSize="10dp"
       android:textStyle="bold"
       android:textColor="@color/white"/>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:01:39.690

你`mButton`是 null.so NPE.are you refrenced xml resources after`setContentView`

```
onCreate(){
...
setContentView(R.layout.yourlayout);

Button mButton=(Button)findViewById(R.id.contact);
mButton.setText("number");

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T11:04:49.980

检查 R.java 文件导入语句

你确定你已经导入了你使用的项目吗.. 并且只是格式化你的布局（.xml）文件保存它并再次输入相同的语句

# eclipse - 从 Eclipse 中的 findbugs 检测器中删除单个模式

> ID：11154899
> 
> 赞同：2
> 
> 时间：2012-06-22T10:59:27.797
> 
> 标签：eclipse, findbugs

是否可以从 Eclipse Indigo 的 findbugs 中的 SerializableIdiom 检测器中删除单个 (SE_NO_SERIALVERSIONID) 模式？

该模式让我对所有可序列化类上的 serialVersionUID 消息感到恼火。我不想仅仅因为序列化的一些极端情况而乱扔我的代码。但是，我只能删除整个 SerializableIdiom，如果我尝试将 int 用于 serialVersionUID，我想得到警告。

**更新：**

在一边。这不是我所追求的，即使这是我要求的;-)。我所追求的是摆脱 serialVersionID 警告。这些可能设置在许多级别上。自动设置的警告由 Eclipse 编译器生成。要删除它们：Window -> Preferences -> Java -> Compiler -> Errors/Warnings 并将“Serializable class without serialVersionUID”设置为 Ignore。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:39:45.533

您一直在查看 Eclipse 首选项中的错误位置，即启用/禁用检测器的 Findbugs“配置”选项卡。相反，请使用选项卡“过滤文件”，添加排除文件过滤器并将其放入文件中：

```
<FindBugsFilter>
  <Match>
    <Bug pattern="SE_NO_SERIALVERSIONID" />
  </Match>
</FindBugsFilter> 
```

[您可以过滤](http://findbugs.sourceforge.net/manual/filter.html)的内容更多。

# javascript - 如何使用 parent、before、children 等？

> ID：11154903
> 
> 赞同：2
> 
> 时间：2012-06-22T10:59:34.507
> 
> 标签：javascript, jquery, html

```
<table>
    <tr><td><input type="text" value="123"></td><td><input class="here" type="text"></td></tr>
    <tr><td><input type="text" value="333"></td><td><input class="here" type="text"></td></tr>
</table>

$(".here").click(function(){

     alert($(this).parent().before().children().val());

}) 
```

**演示：http:** [//jsfiddle.net/4enGp/](http://jsfiddle.net/4enGp/)

**如果我在此处**单击带有类的输入，那么这应该会显示此 TR 中第一个输入的值，但这会显示当前输入的值。我怎样才能做到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T11:02:07.153

`$(this).parent().prev().find("input").val()`

[http://jsfiddle.net/4enGp/1/](http://jsfiddle.net/4enGp/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T11:17:09.833

```
jQuery(".here").click(function(){
   jQuery(this).parent("td").prev("td").find("input").val();
})​; 
```

# asp.net - 页面中只能添加一个 ScriptManager 实例

> ID：11154906
> 
> 赞同：3
> 
> 时间：2012-06-22T10:59:47.757
> 
> 标签：asp.net, asp.net-ajax, ajaxcontroltoolkit

“只能将 ScriptManager 的一个实例添加到页面中。” 当我将脚本管理器添加到 AJAX 工具包的密码强度时出现此错误。

我在我的 createuserwizard 的密码字段旁边添加了密码强度。当这是我网站中唯一的脚本管理器时，为什么会出现此错误？

这是代码：

```
 <asp:TextBox runat="server" ID="Password" TextMode="Password" MaxLength="20" />
<asp:ScriptManager ID="ScriptManager2" runat="server">
</asp:ScriptManager>
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate> 
 <asp:PasswordStrength ID="Password_PasswordStrength" runat="server" 
                                Enabled="True" TargetControlID="Password"   DisplayPosition="RightSide"
                             StrengthIndicatorType="BarIndicator"
                              BarBorderCssClass="barBorder"
                               BarIndicatorCssClass="barInternal">
                         </asp:PasswordStrength>

                            <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator10" ControlToValidate="Password" 
                                ErrorMessage="Password is required." />   
      </ContentTemplate> </asp:UpdatePanel> 
                        </td>
                    </tr> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T11:06:15.580

只需删除此 ScriptManager 即可正常工作。

```
<asp:ScriptManager ID="ScriptManager2" runat="server">
</asp:ScriptManager> 
```

您肯定在 Page 或 MasterPage 的其他位置添加了 ScriptManager。

[ScriptManager 控件概述](http://msdn.microsoft.com/en-us/library/bb398863.aspx)

> 只能将 ScriptManager 控件的一个实例添加到页面中。页面可以直接或间接包含在嵌套组件内的控件，例如用户控件、母版页的内容页或嵌套母版页。如果页面已经包含 ScriptManager 控件，但嵌套或父组件需要 ScriptManager 控件的附加功能，则该组件可以包含 ScriptManagerProxy 控件。例如，ScriptManagerProxy 控件使您能够添加特定于嵌套组件的脚本和服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T11:01:59.987

也许您的 Masterpage 也有一个 Scriptmanager？检查您的整个 aspx 页面层次结构...

# javascript - Facebook 是否修复了 fb_xd_fragment 错误？

> ID：11154907
> 
> 赞同：1
> 
> 时间：2012-06-22T10:59:56.260
> 
> 标签：javascript, facebook

几个月前，我遇到了使用 facebook 的like 按钮的 fb_xd_fragment 错误。

所以我通过设置channelUrl来使用这个[工作。](https://stackoverflow.com/questions/2955012/facebook-javascript-sdk-fb-xd-fragment)已经有一段时间了，但我还需要解决这个问题还是 facebook 最终解决了这个问题？我可以从 facebook[插件页面](https://developers.facebook.com/docs/reference/plugins/like/)粘贴 HTML5 代码吗？

# java - 低暂停收集器 - 并发模式失败

> ID：11154911
> 
> 赞同：1
> 
> 时间：2012-06-22T11:00:14.103
> 
> 标签：java, garbage-collection

我们在产品中的一个应用程序遇到问题。

虚拟机配置如下

-XX:MaxPermSize=300M -Xms2560M -Xmx2560M -Xloggc:/app/log/gc-admin-20120619-123754.log -verbose:gc -XX:+PrintGCTimeStamps -XX:+PrintGCDetails -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction =80 -XX:+DisableExplicitGC -XX:CMSMaxAbortablePrecleanTime=8000

我错过并将应用的两个选项是 XX:PermSize - 应该与 MaxPermSize 相同（推荐） UseCMSInitiatingOccupancyOnly 当使用 CMSInitiatingOccupancyFraction 时，否则您指定的值不会坚持！

然而，随着管道的这些变化，我不太相信它会解决我的问题。

我看到并发模式失败，但是当失败发生时，世界集合的停止需要永恒。目前我有点困惑为什么！

这是一些示例

> 168427.476: [GC [1 CMS-initial-mark: 2135988K(2578880K)] 2141041K(2617216K), 3.1029210 secs] [Times: user=0.02 sys=0.01, real=3.10 secs] 168430.596: [CMS-concurrent-mark--mark-secs] ] 168441.309: [GC 168441.309: [ParNew: 36520K->36520K(38336K), 0.0000210 secs]168441.309: [CMS168747.453: [CMS-concurrent-mark: 309.313/316.8575 secs=2.8s: 用户,sys.8575 secs=2.8s real=316.81 secs]（并发模式失败）：2561882K->1310927K(2578880K), 767.0309740 secs] 2598402K->1310927K(2617216K), [CMS Perm : 96774K->96171K(158792K), 7674K->96171K(158792K) 76 s [158792K]. =3.87 系统=5.06，真实=766.92 秒]

让我担心整个 STW 集合的是时间 766.92 秒，但 CPU 时间只有“user=3.87 sys=5.06”，那么剩下的时间里发生了什么？这就是我感到困惑的地方，我无法想象停止应用程序中的所有线程需要那么长时间！可能会折腾？？

> 169545.325: [GC [1 CMS-initial-mark: 2141069K(2578880K)] 2166025K(2617216K), 0.0530140 secs] [Times: user=0.05 sys=0.00, real=0.06 secs] 169545.379: [CMS-concurrent-mark--mark-secs] ] 169558.635：[CMS 并发标记：10.407/13.256 秒] [时间：用户 = 7.58 系统 = 0.53，真实 = 13.25 秒] 169558.635：[CMS 并发预清理启动] 169558.684：[CMS 并发预清理： 0.048/0.048 秒] [时间：用户 = 0.01 系统 = 0.00，实际 = 0.05 秒] 169558.684：[CMS 并发中止预清理启动] 169560.544：[GC 169560.544：[ParNew169560.605：[CMS 并发中止-preclean: 0.210/1.921 secs] [Times: user=0.93 sys=0.05, real=1.92 secs] 169560.846: [GC [YG occupancy: 1906 K (38336 K)]169560.846: [Rescan (parallel) , 0.0046910 secs]169560\. ：[弱 refs 处理，0.0000990 秒] [1 CMS 备注：2350428K(2578880K)] 2352335K(2617216K)，0.0048570 秒] [时间：user=0.01 sys=0.00, real=0.01 secs] 169560.853: [CMS-concurrent-sweep-start] 169568.204: [CMS-concurrent-sweep: 7.351/7.351 secs] [Times: user=0.91 sys=0.09, real=7.34 secs] 169568.204：[CMS-concurrent-reset-start] 169568.211：[CMS-concurrent-reset：0.007/0.007 secs] [Times：user=0.01 sys=0.00，real=0.01 secs]

这个显示没有问题

> 252247.318: [GC [1 CMS-initial-mark: 2069401K(2578880K)] 2075094K(2617216K), 1.5311840 secs] [Times: user=0.01 sys=0.00, real=1.53 secs] 252248.849: [CMS-concurrent-mark--mark-secs] ] 252350.336: [GC 252350.336: [ParNew: 20984K->4222K(38336K), 12.2251190 secs]252362.561: [CMS252520.780: [CMS-concurrent-mark: 161.376/271.922 secs] = 1s.7 用户,2.56 秒real=271.89 secs]（并发模式失败）：2232372K->1061586K(2578880K), 407.2310250 secs] 2240205K->1061586K(2617216K), [CMS Perm : 97525K->97381K41s [1604880K450].Time].Time =4.23 系统=2.99，真实=419.39 秒]

然后是另一个巨大的“Times: user=4.23 sys=2.99, real=419.39 secs”。CPU 时间是次要的“user=4.23 sys=2.99”，但总时间是“419.39”。什么可能导致VM挂起这么长时间？理想情况下，2.5g 应该在 10 秒内收集到 STW 集合中！！

我要降低阈值 CMSInitiatingOccupancyFraction 但我认为这样的收集时间不会有帮助！有些系列运行顺利，有些则不顺利，但就像我说的那样，当世界完全停止时，我担心的是时机。

我已阅读 [https://blogs.oracle.com/jonthecollector/entry/what_the_heck_s_a](https://blogs.oracle.com/jonthecollector/entry/what_the_heck_s_a)

我们正在使用jdk6。

有人曾经经历过类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:23:58.320

正如您所观察到的，当并发模式失败时，将退回到 stop-the-world 收集。我的理解是，这*可以*使用标记扫描紧凑收集器而不是更有效的复制收集器来完成。

这并不能完全解释为什么收集需要这么长时间。但是，VM 抖动是一个合理的理论，您的证据支持这一点……但是您需要获得一些操作系统级别的 VM 交换/分页率测量值才能确定。（如果 JVM 将导致抖动，那么在堆已满时的完整垃圾回收期间，它很可能是最糟糕的。）

回到导致并发模式失败的原因，您链接到的博客说最有可能发生的事情：

*   您的堆已满，或者
*   对象分配率太高，或
*   对象分配率太不稳定，或者
*   以上的一些组合。

建议的解决方案是：

*   增加堆大小。
*   减少 CMSInitiatingOccupancyFraction 值
*   增加 CMSIncrementalSafetyFactor 值

另一种是切换到吞吐量收集器，并在它进行完整收集时偶尔遇到“长时间”暂停。

如果问题是虚拟机抖动，那么您就处于困境和困境之间。相对于机器或虚拟机可用的物理 RAM 量，您过度分配了虚拟内存。您的选择是为机器/虚拟机提供更多 RAM，或者通过减少堆大小、停止服务和应用程序等来减少系统的虚拟内存使用量。

（请注意，无论您是否使用虚拟化，都可能发生虚拟内存抖动。只是虚拟化的过度分配内存的诱惑更强......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:35:30.607

您的应用程序是否在虚拟机上运行？

一种解释可能是您的主机过载或交换，这会阻止 VM 工作并看到发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:49:42.290

永久代（`PermSize`）用于保存 VM 本身的反射，例如类对象和方法对象。这些反射对象被直接分配到永久代，并且它的大小独立于其他代。通常，可以忽略这一代的大小，因为默认大小已经足够了。但是，加载许多类的程序可能需要更大的永久代。

默认情况下，`MaxPermSize`-client 为 32mb，-server 为 64mb。但是，如果不同时设置`PermSize`和`MaxPermSize`，除非需要，否则总体堆不会增加。当您同时设置`PermSize`和`MaxPermSize`时，例如 192mb，额外的堆空间将在启动时分配并保持分配状态。

尝试调整两个 VM 参数，它可能会解决您的问题。

```
-XX:PermSize=300m -XX:MaxPermSize=300m 
```

# intellij-idea - 如何防止 IntelliJ IDEA 删除未使用的包？

> ID：11154912
> 
> 赞同：75
> 
> 时间：2012-06-22T11:00:15.433
> 
> 标签：intellij-idea

我正在使用intelliJ，我的问题是当我开始将一些临时未使用的包导入到我的类文件中时，intellij 会在一秒钟内删除这些行。

我怎样才能关闭这个不太好的功能？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-06-22T11:03:19.670

禁用`File | Settings`| `Editor`| `General`| `Auto Import`| **动态优化导入**。

通常您不需要手动添加导入，IDEA 会为您完成。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-04-20T14:02:24.130

对于 Scala 开发人员：您可以**启用**

`Settings > Editor > General > Auto Import > Optimize imports on the fly`

但将**排除**项添加到

```
Settings > Editor > Code Style > Scala > Imports always marked as used: 
```

[![在此处输入图像描述](../Images/12435f39239b866d0d735bf2c9fb4be8.png)](https://i.stack.imgur.com/4oc8A.png)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-03-03T19:45:55.443

在 Intellij 14 中： `Settings > Editor > General > Auto Import > Optimize imports on the fly.`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-16T21:18:37.500

（更新）对于那里的 Scala 开发人员，您现在可以只吃 1/2 块蛋糕并吃掉另外 1/2：禁用*仅 scala的自动优化*

[![在此处输入图像描述](../Images/bba2c15bc0e6c79ffdb212341e42c529.png)](https://i.stack.imgur.com/uQVx9.png)

# xml - 在 jsp 中读取 POST 请求 XML

> ID：11154916
> 
> 赞同：0
> 
> 时间：2012-06-22T11:00:24.683
> 
> 标签：xml, jsp, xmlhttprequest, http-post

我正在尝试使用 XMLHttpRequest 将 XML 发送到 jsp。谁能告诉我如何在 jsp 中读取请求 XML？下面是我用来进行 POST 调用的代码。

提前致谢！

```
var xmlHttpRequest=new XMLHttpRequest();
xmlHttpRequest.open("POST",url,true);
xmlHttpRequest.setRequestHeader("Content-Type", "text/xml");
xmlHttpRequest.send("<xml><user_id>F1528</user_id></xml>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:22:03.073

`JSP's`应该用来生成页面，`Servlets`应该用来处理业务逻辑。

我建议您阅读 Servlet 中的请求正文。将读取的正文设置为请求属性并将请求转发给呈现请求正文的 JSP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:33:00.113

我还没有尝试过，但似乎[JSTL](https://stackoverflow.com/tags/jstl/info)应该提供一个简单的解决方案：

```
<%@ taglib prefix="x" uri="http://java.sun.com/jsp/jstl/xml" %>
<x:parse doc="${pageContext.request.reader}" var="parsedXml"/> 
```

这应该会产生一个名为`parsedXml`.

# android - KSOAP ANDROID 实施

> ID：11154919
> 
> 赞同：1
> 
> 时间：2012-06-22T11:00:29.970
> 
> 标签：android, ksoap

嗨，我有一个与 Android K-SOAP 相关的问题，我是第一次使用 K-SOAP Android

[这是服务链接](http://sdservices.iyogi.net/iyogi/webservicesnonrestv5/toolbarwebservices.asmx?op=GetSubscriptionByInputObject)

在这里你可以看到请求，那里也提到了响应，这是我的代码来访问服务并获取响应`包 com.ksoap.net;

```
import org.ksoap2.SoapEnvelope;
   import org.ksoap2.serialization.PropertyInfo;
   import org.ksoap2.serialization.SoapObject;
   import org.ksoap2.serialization.SoapPrimitive;
   import org.ksoap2.serialization.SoapSerializationEnvelope;
   import org.ksoap2.transport.AndroidHttpTransport;
   import org.ksoap2.transport.HttpTransportSE;

   import android.app.Activity;
   import android.os.Bundle;
   import android.util.Log;
   import android.widget.TextView;

public class AndroidWebService extends Activity {

        private final String NAMESPACE = "http://webservices.iyogi.net/";
                                                                                          private                                                                                 final                                                                        String                                                             URL                                                  =                                          "http://sdservices.iyogi.net               /iyogi           /webservicesnonrestv5/toolbarwebservices.asmx";
        private final String SOAP_ACTION = "http://webservices.iyogi.net/GetSubscriptionByInputObject";
        private final String METHOD_NAME = "GetSubscriptionByInputObject";
        String request = "<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                + "<soap:Envelope "
                + "xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" "
                + "xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" "
                + "xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\">"
                + "<soap:Body>"
                + "<GetSubscriptionByInputObject xmlns=\"http://webservices.iyogi.net\">"
                + "<inpAccessCode>" + "<AccessCode>”2466276627755434”&lt;/AccessCode>"
                + "</inpAccessCode>" + "</GetSubscriptionByInputObject>"
                + "</soap:Body>" + "</soap:Envelope>";

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            // SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

            String weight = "3700";
            String fromUnit = "Grams";
            String toUnit = "Kilograms";

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(
                    URL);

            try {
                androidHttpTransport.call(SOAP_ACTION, envelope);
                SoapObject response = (SoapObject) envelope.getResponse();
                int result = Integer.parseInt(response.getProperty(0).toString());
                System.out.println("result  is " + Integer.toString(result));
                System.out.println("res is -->>  "
                        + response.getProperty(0).toString());
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
}` 
```

请帮助我点击并从该服务中获得正确的响应非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:17:41.070

```
 final String URL = "url";
              u = new java.net.URL(URL);

             URLConnection uc = u.openConnection();
             connection = (HttpURLConnection) uc;

             connection.setDoOutput(true);
             connection.setDoInput(true);
             connection.setRequestProperty("SOAPAction", SOAP_ACTION);
             connection.setRequestMethod("POST");
             connection.setRequestProperty("Content-type", "text/xml; charset=utf-8");

             String xmldata ="xml request";

             //System.out.println(xmldata);
             OutputStream out = connection.getOutputStream();

             Writer wout = new OutputStreamWriter(out);

              wout.write(xmldata);

                wout.flush();

                wout.close();
                InputStream is = connection.getInputStream();
                MakeHttpRequest.actiovationParser(is,AndroidWebService.this); 
```

它运行良好欢呼快乐编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:27:06.710

试试这个`

```
 import org.ksoap2.SoapEnvelope;
       import org.ksoap2.serialization.PropertyInfo;
       import org.ksoap2.serialization.SoapObject;
       import org.ksoap2.serialization.SoapPrimitive;
       import org.ksoap2.serialization.SoapSerializationEnvelope;
       import org.ksoap2.transport.AndroidHttpTransport;
       import org.ksoap2.transport.HttpTransportSE;

       import android.app.Activity;
       import android.os.Bundle;
       import android.util.Log;
       import android.widget.TextView;

    public class AndroidWebService extends Activity {

            private final String NAMESPACE = "http://webservices.iyogi.net/";
                                                                                              private                                                                                 final                                                                        String                                                             URL                                                  =                                          "http://sdservices.iyogi.net               /iyogi           /webservicesnonrestv5/toolbarwebservices.asmx";
            private final String SOAP_ACTION = "http://webservices.iyogi.net/GetSubscriptionByInputObject";
            private final String METHOD_NAME = "GetSubscriptionByInputObject";
    private final String URL = "http://sdservices.iyogi.net/iyogi/webservicesnonrestv5/toolbarwebservices.asmx";

HttpTransportSE httpTransport = null;

        SoapObject request = null;
    request = new SoapObject(NAMESPACE, METHOD_NAME);
            PropertyInfo pi = new PropertyInfo();       
            pi.setName("AccessCode");
            pi.setValue("2466276627755434");
            pi.setType(PropertyInfo.STRING_CLASS);
            request.addProperty(pi);
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;

            envelope.setOutputSoapObject(request);

            httpTransport = new HttpTransportSE(URL);
            httpTransport.debug = true;

            try {
                httpTransport.call(SOAP_ACTION, envelope);

    SoapObject response = (SoapObject) envelope.getResponse();
                    int result = Integer.parseInt(response.getProperty(0).toString());
                    System.out.println("result  is " + Integer.toString(result));
                    System.out.println("res is -->>  "
                            + response.getProperty(0).toString());
                } catch (Exception e) {
                    e.printStackTrace();
                } 
```

`

# eclipse - 将eclipse（不是EE）与tomcat 7集成

> ID：11154920
> 
> 赞同：0
> 
> 时间：2012-06-22T11:00:33.097
> 
> 标签：eclipse, tomcat

我正在使用 Eclipse indigo，我想将它与我拥有的预安装的 tomcat7 服务器集成。
我知道如何在 java EE 中轻松地做到这一点，但现在我需要不在 EE 上运行它。
可能吗？如果是这样，怎么做？
非常感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:09:14.063

基本上，不，没有你已经拥有的插件或基本上做同样事情的替代品。不过，我不明白“我不需要在 EE 上运行它”部分。为什么？

# java - 隐马尔可夫模型阈值

> ID：11154923
> 
> 赞同：11
> 
> 时间：2012-06-22T11:00:38.413
> 
> 标签：java, algorithm, artificial-intelligence, speech-recognition, hidden-markov-models

我开发了一个使用 mfcc 和隐藏马尔可夫模型进行声音识别的概念验证系统。当我在已知声音上测试系统时，它给出了有希望的结果。尽管系统在输入未知声音时返回最接近匹配的结果，并且得分不是那么明显，但它是未知声音，例如：

我已经训练了 3 个隐藏马尔可夫模型，一个用于语音，一个用于从水龙头流出的水，一个用于敲桌子。然后我在看不见的数据上测试它们并得到以下结果：

```
input: speech
HMM\knocking:  -1213.8911146444477
HMM\speech:  -617.8735676792728
HMM\watertap:  -1504.4735097322673

So highest score speech which is correct

input: watertap
HMM\knocking:  -3715.7246152783955
HMM\speech:  -4302.67960438553
HMM\watertap:  -1965.6149147201534

So highest score watertap which is correct

input: knocking
HMM\filler  -806.7248912250212
HMM\knocking:  -756.4428782636676
HMM\speech:  -1201.686687761133
HMM\watertap:  -3025.181144273698

So highest score knocking which is correct

input: unknown
HMM\knocking:  -4369.1702184688975
HMM\speech:  -5090.37122832872
HMM\watertap:  -7717.501505674925 
```

这里的输入是一个未知的声音，但它仍然返回最接近的匹配，因为没有用于阈值/垃圾过滤的系统。

我知道在关键字发现中，可以使用垃圾或填充模型过滤掉 OOV（词汇外）声音，但它说它是使用一组有限的未知单词进行训练的，而这不能像我一样应用于我的系统不知道系统可能记录的所有声音。

语音识别系统中的类似问题如何解决？以及如何解决我的问题以避免误报？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:20:04.647

要拒绝其他词，您需要一个填充模型。

这是一个统计假设检验。你有两个假设（单词是已知的，单词是未知的）。要做出决定，您需要估计每个假设的概率。

填充模型是从您拥有的语音中训练出来的，只是以不同的方式，例如它可能是任何语音声音的单个高斯。您比较通用填充模型的分数和 HMM 单词的分数并做出决定。有关更深入的信息和高级算法，您可以查看有关关键字发现的任何论文。这篇论文有一个很好的评论：

语音关键词识别与数据挖掘应用 AJ Kishan Thambiratnam

[http://eprints.qut.edu.au/37254/1/Albert_Thambiratnam_Thesis.pdf](http://eprints.qut.edu.au/37254/1/Albert_Thambiratnam_Thesis.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:14:03.067

所以我所做的是：我创建了填充模型的简化版本。每个代表水龙头声音、敲击声音和语音声音的 hmm 是一个单独的 6 状态 hmm，由来自 30、50、90 个不同长度的 0.3 秒到 10 秒的训练集的声音训练。然后我创建了一个填充模型，它是一个状态为 1 的 hmm，包含所有用于敲击、敲击和语音的训练集声音。因此，如果给定声音的 hmm 模型分数大于填充物的分数 - 声音会被识别，否则它是未知声音。我并没有真正的大数据，但我已经对看不见的声音进行了假阳性拒绝和真阳性拒绝的以下测试。

```
true positives rejection
knocking 1/11 = 90% accuracy
watertap 1/9 = 89% accuracy
speech 0/14 = 100% accuracy

false positives rejection
Tested 7 unknown sounds
6/7 = 86% accuracy 
```

所以从这个快速测试中我可以得出结论，这种方法给出了合理的结果，尽管我有一种奇怪的感觉，它可能还不够。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T13:00:26.317

判别模型往往比生成模型在分类任务上表现更好。

使用专门设计的 CRF 或最大边距分类器（结构化 svm）绝对可以在此任务上获得更好的性能。

这篇论文 (http://ttic.uchicago.edu/~jkeshet/papers/KeshetGrBe07.pdf) 讨论了一个与您类似的分类问题，并表明最大边距公式优于填充模型的生成方法。

可能没有什么开箱即用的东西可以做我所描述的，但是，通过一些努力，你也许可以扩展 svm-struct。（hmm-svm 实现不适用于您的问题，因为您需要提前指定隐藏状态结构，而不是学习任意连接的隐藏状态结构。）

# wpf - 当内容可见时动态更改 WPF 窗口的宽度

> ID：11154925
> 
> 赞同：0
> 
> 时间：2012-06-22T11:00:42.837
> 
> 标签：wpf, vb.net

我希望能够在程序开始时隐藏屏幕的左侧和屏幕的右侧。

然后，当用户按下`create new`按钮时，屏幕左侧变为可用，以便他们可以创建新项目。然后当他们按下`save`它时，它只返回到中间数据网格。

然后我想在双击数据网格行时添加一个事件（数据被编程到代码中的数据网格中）屏幕的右侧变得可见然后当`allocate`按下按钮时右侧再次消失只是离开数据网格。

我对 WPF 相当陌生，所以不确定这是否可以完成。我正在为我的公司制作原型并且已经有一些使用单独的窗口时，我正在尝试在同一个窗口中进行操作。我发布了一张图片，但由于我是新用户，所以无法发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:01:28.923

要隐藏和显示控件，我建议使用扩展器（正如您的评论所说的那样）或网格并根据需要设置它们的可见性。如果您希望您的侧面板出现在数据网格上，那么显示它们只是改变它们的可见性的问题。如果不想遮挡 DataGrid，那么您将需要更改面板的可见性以及窗口的大小。

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow">
<Grid>
    <!-- DataGrid display -->
    <Grid>
        <StackPanel>
            <Button Content="Add New" Click="OnAddNewButtonClick" Width="100"/>
            <DataGrid ItemsSource="{Binding GridItems}" IsReadOnly="True" Name="dataGrid">
                <DataGrid.RowStyle>
                    <Style TargetType="{x:Type DataGridRow}">
                        <EventSetter Event="MouseDoubleClick" Handler="OnRowDoubleClick"/>
                    </Style>
                </DataGrid.RowStyle>
            </DataGrid>
        </StackPanel>
    </Grid>

    <!-- Left column pops up over DataGrid -->
    <Grid Name="LeftColumn" Visibility="Collapsed" Background="Red" Width="200" HorizontalAlignment="Left">
        <StackPanel  VerticalAlignment="Center">
            <Button Content="Hide Column" Click="OnLeftColumnButtonClick"/>
        </StackPanel>
    </Grid>

    <!-- Right Column expands screen size-->
    <Grid  Visibility="Collapsed" Name="RightColumn" Width="200" HorizontalAlignment="Right">
        <StackPanel Background="Green" >
            <TextBlock Text="Hidden Column"/>
            <Button Content="Hide Panel" Click="OnRightColumnButtonClick"/>
        </StackPanel>
    </Grid>
</Grid>
</Window 
```

C# - 我知道你在 VB 中工作，但这对我来说更快。代码应该是不言自明的，但如果您需要 VB 示例，请告诉我：

```
public partial class MainWindow : Window
{
    public ObservableCollection<Person> GridItems { get; set; }
    private const double CollapsedWidth =  500;
    private const double ExpandedWidth = 700;

    public MainWindow()
    {
        DataContext = this;
        GridItems = new ObservableCollection<Person>();
        GridItems.Add(new Person { Name = "Foo", Age = 1 });
        GridItems.Add(new Person { Name = "Bar", Age = 2 });
        InitializeComponent();
        Width = CollapsedWidth;

    }

    private void OnAddNewButtonClick(object sender, RoutedEventArgs e)
    {
        LeftColumn.Visibility = Visibility.Visible;
    }

    private void OnLeftColumnButtonClick(object sender, RoutedEventArgs e)
    {
        LeftColumn.Visibility = Visibility.Collapsed;
    }

    private void OnRowDoubleClick(object sender, MouseButtonEventArgs e)
    {
        Width = ExpandedWidth;
        RightColumn.Visibility = Visibility.Visible;
    }

    private void OnRightColumnButtonClick(object sender, RoutedEventArgs e)
    {
        RightColumn.Visibility = Visibility.Collapsed;
        Width = CollapsedWidth;
    }
} 
```

# php - get_categories() 只返回正在使用的类别

> ID：11154928
> 
> 赞同：17
> 
> 时间：2012-06-22T11:01:00.030
> 
> 标签：php, wordpress, plugins

```
$args = array(
"type"      => "post",      
"orderby"   => "name",
"order"     => "ASC");

$types = get_categories($args); 
```

执行此操作时。$types 仅包含“未分类”，因为它被用作我帖子的默认值。还有其他可用的类别，但除非我有使用它们的帖子，否则它们不会返回。如何返回所有可能的类别，而不仅仅是正在使用的类别？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-22T11:04:18.157

```
<?php $args = array("hide_empty" => 0,
                    "type"      => "post",      
                    "orderby"   => "name",
                    "order"     => "ASC" );
      $types = get_categories($args);
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T11:05:06.197

为此，我建议使用：

```
wp_list_categories( $args ); 
```

关于这个函数和如何使用的进一步解释：http: [//codex.wordpress.org/Template_Tags/wp_list_categories](http://codex.wordpress.org/Template_Tags/wp_list_categories)

# windows-phone-7 - windows phone 7如何检查网络是否可用？

> ID：11154933
> 
> 赞同：3
> 
> 时间：2012-06-22T11:01:24.383
> 
> 标签：windows-phone-7

对于互联网检查，我编写了以下代码行。

```
bool isAvailable = NetworkInterface.GetIsNetworkAvailable();
             if (isAvailable == true)
             {
} 
```

如果网络也不可用，上述行总是返回 true。请告诉我如何检查互联网连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:10:21.740

> 检查**NetworkInterfaceType**。如果 Internet 可用，则它应该不是**None**

```
return (Microsoft.Phone.Net.NetworkInformation.NetworkInterface.NetworkInterfaceType 
!= Microsoft.Phone.Net.NetworkInformation.NetworkInterfaceType.None); 
```

**[vjsrinath 的](https://stackoverflow.com/users/1069018/vjsrinath)****参考答案**：**[https ://stackoverflow.com/questions/8341169/how-to-check-internetconnection-in-wp7](https://stackoverflow.com/questions/8341169/how-to-check-internetconnection-availability-in-wp7)**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:14:55.233

你也可以试试，

```
bool isAvailable = Microsoft.Phone.Net.NetworkInformation.DeviceNetworkInformation.IsNetworkAvailable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T14:20:10.420

签`NetworkInterface.NetworkInterfaceType`入 UI 线程是“危险的”，因为它是一个阻塞调用！此调用可能需要长达 20 秒...

使用以下方法进行非阻塞调用：

```
public static void IsConnected(Action<bool> completed)
{
    ThreadPool.QueueUserWorkItem(o =>
    {
        var type = NetworkInterface.NetworkInterfaceType;
        completed(type != NetworkInterfaceType.None);
    });
} 
```

请参阅[https://xp-dev.com/svn/mytoolkit/MyToolkit.Wp8/Networking/NetworkState.cs](https://xp-dev.com/svn/mytoolkit/MyToolkit.Wp8/Networking/NetworkState.cs)（*来自我的项目页面*）

如果您想更改`completed`操作中的 UI，您必须在 UI 线程中运行逻辑。例如：

```
NetworkState.IsConnected(connected => {
    if (connected)
    {
        Deployment.Current.Dispatcher.BeginInvoke(delegate { 
            // TODO add your UI logic
        });
    }
}); 
```

如果您需要大量连接检查，请查看`NetworkStateTracker`我的项目：

[https://xp-dev.com/svn/mytoolkit/MyToolkit.Wp8/Networking/NetworkStateTracker.cs](https://xp-dev.com/svn/mytoolkit/MyToolkit.Wp8/Networking/NetworkStateTracker.cs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T11:51:40.557

```
 Always check this in a thread, it takes some time        
    internal static bool IsNetworkAvailable()
    {
        bool _bhasNetworkConnection = false;
        try
        {
            _bhasNetworkConnection = (NetworkInterface.NetworkInterfaceType != NetworkInterfaceType.None);
        }
        catch
        {
            _bhasNetworkConnection = false;
        }

        return _bhasNetworkConnection;
    } 
```

# qt - 在 Windows 上的 qt creator 中找不到 QNetworkProxy

> ID：11154936
> 
> 赞同：0
> 
> 时间：2012-06-22T11:01:36.247
> 
> 标签：qt, qt-creator

我正在编写一个需要代理支持的应用程序，据我所知可以使用 QNetworkProxy，但是每当我键入 `#include <QNetworkProxy>`它时都找不到它。我也尝试过更新工具，看看我是否遗漏了一些东西，但似乎一切都已安装。

我在 windows7 x64 上运行 QT creator，sdk 版本：4.8.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:15:12.577

您应该将 QT += network 添加到您的 .pro 文件中。

# javascript - jQuery：JSON 对象子处理

> ID：11154942
> 
> 赞同：0
> 
> 时间：2012-06-22T11:01:45.743
> 
> 标签：javascript, jquery, json

我正在尝试`<table>`通过 javascript 函数创建一个。

我得到一个看起来像这样的 JSON 元素：

```
header
    ["Nom", "Région", "Activité", 10 more...]
0   "Nom"   
1   "Région"
2   "Activité"
// other fields 

body
    Object { entity0=[13], entity1=[13], entity2=[13], more...}

entity0
    ["Org2", "Org2", "Org2", 10 more...]

0    "Org2"
1    "Org2" 
2    "Org2"
//Other fields
entity1
    ["gfhu", "rtyud", "dgud", 10 more...]
//Other entities 
```

我正在尝试像那样解码它（我解析 JSON 并将其提供给该函数）：

```
function createTableEntity(tab, id){
    table = '<table cellpadding="0" cellspacing="0" border="0" class="display" id="'+id+'">';
    table = table + '<thead><tr>';
    $(tab.header).children().each(function(){
        table = table + '<td>' + this + '</td>';
    });
    table = table + '</tr></thead>';

    table = table + '<tbody>';

    $(tab.body).children().each(function(){
        table = table + '<tr>';

       $(this).children().each(function(){
           table = table + '<td>' + $(this) + '</td>';
       });

       table = table + '</tr>';
    });

    table = table + '</tbody>';

    table = table + '</table>';

    //alert(table);

    return table;
} 
```

从我得到的结果来看，没有孩子（`$(tab.header).children().each(function(){});`）。

它从何而来？如何遍历从 JSON 解析的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:05:23.330

您不需要 jquery 循环遍历 JSON 解析的结果，因为它是一个 Javascript 对象。

如果你在 tab.header 中有一个数组，你可以简单地循环它

```
 $.each(tab.header, function() { 
```

或者更经典，没有 jquery，使用

```
 for (var i=0; i<tab.header.length; i++) { 
```

# android - 如何使文本视图在 android 的按钮单击事件中可见

> ID：11154943
> 
> 赞同：1
> 
> 时间：2012-06-22T11:01:48.380
> 
> 标签：android, button, textview

我开发了一个简单的应用程序，其中包含一个文本视图。我的问题是我希望在按钮单击事件时在不可见的文本视图中可见。

在加载时我这样做

```
myTextView.setVisible(View.GONE); 
```

然后在按钮单击事件中，我这样做。

```
myTextView.setVisible(View.VISIBLE); 
```

textview 是可见的，但它在 TextView 下方重叠意味着 myTextView 不能包含空间。那我现在能做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T11:03:09.013

采用

`myTextView.setVisible(View.INVISIBLE);`

代替

```
myTextView.setVisible(View.GONE); 
```

坚持布局**中的空间**......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:09:38.387

如果您使用的是相对布局，`android:layout_below="id_of_above_text_view"`请在第二个文本视图中指定。

如果你没有在相对布局中指定与视图的关系，它将出现在另一个之上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:12:36.590

我相信，对您的代码稍作改动应该可以使其正常工作。

```
myTextView.setVisibility(View.INVISIBLE); 
```

点击按钮后，

```
myTextView.setVisibility(View.VISIBLE); 
```

为了在java代码中做这件事，试试这个（虽然我自己还没有尝试过）......

```
RelativeLayout rl = new RelativeLayout(this);
ImageView iv = new ImageView(this);
iv.setImageResource(R.drawable.xxx);
TextView txt = new TextView(this);
txt.setText("XXX");
rl.addView(iv,0);
rl.addView(txt,1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T11:29:25.047

试试这个：

```
RelativeLayout layout = new RelativeLayout(this);
TextView tv1 = new TextView(this);
tv1.setText("A");
tv1.setId(1); 

TextView tv2 = new TextView(this);
tv2.setText("B");
tv2.setId(2);

RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
        RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.FILL_PARENT);
lp.addRule(RelativeLayout.BELOW, tv1.getId());

layout.addView(tv1);        
layout.addView(tv2, lp); 
```

当您更改可见性时，调用`invalidate()`myTextView 的父视图（此处为布局）或布局的根视图（`layout.getRootView()`）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-22T10:33:52.207

这将在按下相应按钮时显示和隐藏文本。如果您想使用按钮控制多个文本，这非常有用

1）XML文件：

```
 <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="5dp"
                    android:orientation="vertical"
                    android:gravity="center_vertical">
                    <TableRow
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="center" >
                    <Button
                        android:text="The Origin"
                        android:id="@+id/btnOrigin"
                        android:onClick="buttonOnClick"/>
                    </TableRow>
                    <TableRow
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="center" >
                        <TextView
                            android:id="@+id/txtOrigin"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:text="@string/about"
                            android:textColor="#000"
                            android:textSize="@dimen/text_body"
                            android:gravity="center_vertical"
                            android:layout_marginLeft="10dp"
                            android:layout_marginRight="10dp"
                            android:visibility="gone"/>
                    </TableRow>
                </LinearLayout>
                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="5dp"
                    android:orientation="vertical"
                    android:gravity="center_vertical">
                    <TableRow
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="center" >
                        <Button
                            android:text="Vision"
                            android:id="@+id/btnVision"
                            android:onClick="buttonOnClick"/>
                    </TableRow>
                    <TableRow
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="center" >

                        <TextView
                            android:id="@+id/txtVision"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:text="@string/vision"
                            android:textColor="#000"
                            android:textSize="@dimen/text_body"
                            android:gravity="center_vertical"
                            android:layout_marginLeft="10dp"
                            android:layout_marginRight="10dp"
                            android:visibility="gone"/>
                    </TableRow>
                </LinearLayout> 
```

2) JAVA代码

```
 private TextView txtOrigin, txtVision;

        public void buttonOnClick(View view) {
        switch (view.getId()) {
            case R.id.btnOrigin:
                txtOrigin = (TextView) findViewById(R.id.txtOrigin);
                txtOrigin.setVisibility(View.VISIBLE);
                txtVision = (TextView) findViewById(R.id.txtVision);
                txtVision.setVisibility(View.INVISIBLE);
                break;
             case R.id.btnVision:
                txtVision = (TextView) findViewById(R.id.txtVision);
                txtVision.setVisibility(View.VISIBLE);
                txtOrigin = (TextView) findViewById(R.id.txtOrigin);
                txtOrigin.setVisibility(View.INVISIBLE);
                break;
                }
             } 
```

# python - 使用 argparse 需要两个参数之一

> ID：11154946
> 
> 赞同：241
> 
> 时间：2012-06-22T11:02:04.757
> 
> 标签：python, argparse

鉴于：

```
import argparse

pa = argparse.ArgumentParser()
pa.add_argument('--foo')
pa.add_argument('--bar')

print pa.parse_args('--foo 1'.split()) 
```

我如何

*   至少使 "foo, bar" 之一成为强制性: `--foo x`，`--bar y`并且`--foo x --bar y`很好
*   最多使“foo，bar”之一成为强制性：`--foo x`或者`--bar y`很好，`--foo x --bar y`不是

* * *

## 回答 #1

> 赞同：379
> 
> 时间：2012-06-22T11:14:52.873

我认为您正在寻找诸如[互斥](http://docs.python.org/library/argparse.html#mutual-exclusion)之类的东西（至少对于您问题的第二部分）。

这样，只会接受 foo 或 bar ，而不是两者。

```
import argparse

parser = argparse.ArgumentParser()
group = parser.add_mutually_exclusive_group(required=True)
group.add_argument('--foo',action=.....)
group.add_argument('--bar',action=.....)
args = parser.parse_args() 
```

顺便说一句，刚刚发现[另一个问题](https://stackoverflow.com/questions/5603364/how-to-code-argparse-combinational-options-in-python)指的是同类问题。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-06-22T11:22:16.140

如果您需要一些模块未提供的检查，您可以随时手动进行：

```
pa = argparse.ArgumentParser()
...
args = pa.parse_args()

if args.foo is None and args.bar is None:
   pa.error("at least one of --foo and --bar required") 
```

# javascript - Jquery mobile 在没有互联网连接时检查以显示错误消息而不是加载谷歌地图

> ID：11154948
> 
> 赞同：1
> 
> 时间：2012-06-22T11:02:11.863
> 
> 标签：javascript, jquery, google-maps, jquery-mobile, dom-events

从过去 2 天开始，我想要实现的是 - 当没有互联网连接时，我可以在我的 jQuery 移动页面上显示一条错误消息，即“抱歉，没有互联网连接”。

我尝试了很多东西，但都没有奏效。下面的代码是我最后一次尝试使用 try-catch 块的时候。但即使这样也无济于事。当我在浏览器中加载页面时会发生以下情况 -

当 Internet 连接可用时 - 已加载地图并且工作正常。当没有 Internet 连接时 - 我得到空白页。没有页眉和页脚。带有一些默认的灰色背景，这对我的应用程序来说看起来很糟糕。:( 任何形式的帮助都是可观的。我还在学习。

我现在使用的代码如下 -

```
 <!DOCTYPE html> 
 <html>
 <script src="SpryAssets/SpryTabbedPanels.js" type="text/javascript"></script>
 <link href="SpryAssets/SpryTabbedPanels.css" rel="stylesheet" type="text/css">
 <head>
 <meta charset="utf-8">
  <link rel="stylesheet" href="assets/css/master.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="assets/css/jquery.mobile.structure-1.0.min.css"              type="text/css" media="screen" />
  <link rel="stylesheet" href="assets/css/jquery.mobile.theme-1.0.min.css" type="text/css" media="screen" />
  <script src="assets/js/jquery-1.6.4.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="assets/js/jquery.mobile-1.0.min.js" type="text/javascript" charset="utf-8">  </script>
  <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <style type="text/css"> 
    #map_canvas { height: 330px; width: 100%; margin: 0px; padding: 0px }
  </style>

 </head> 
 <body>

 <div data-role="header" data-theme="e">
 <a data-icon="home" data-iconpos="notext" rel="external" href="index.html#page2"></a>
   <h1>Maps</h1>   
 </div>
 <div data-role="content" data-theme="d">  
  <div id="map_canvas">
   <script type="text/javascript">
     function initialize(){
       try{
            var locations = [
           ['Dr. Martin Luther King Library',37.3356,-121.8853, 4],
           ['Duncan Hall',37.3325,-121.8820, 5],
               ['Clark Hall',37.3360,-121.8827, 3],
               ['Event Center',37.3355,-121.8797, 2],
               ['Student Union',37.3369,-121.8806,  1]
             ];

            var map = new google.maps.Map(document.getElementById('map_canvas'), {
                      zoom: 16,
                      center: new google.maps.LatLng(37.3369,-121.8806),
                      mapTypeId: google.maps.MapTypeId.ROADMAP
                   });

            var infowindow = new google.maps.InfoWindow();
            var marker, i;

           for (i = 0; i < locations.length; i++) 
             {  
                marker = new google.maps.Marker({
                position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                     map: map
                });

              google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {
                        infowindow.setContent(locations[i][0]);
                        infowindow.open(map, marker);
                      } 
         })(marker, i));
             }
               }
         catch(err)
           {
             document.getElementById("map_canvas").text='Sorry, No internet connection.';
           }
     }

   google.maps.event.addDomListener(window, 'load', initialize);

</script>  
</div>
</div>
<div data-role="footer" data-theme="e">
 <h4>&copy; blah-blah Inc.</h4>
</div>

</body>
</html> 
```

欢迎任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:23:41.330

您可以[`window.navigator.onLine`](https://developer.mozilla.org/en/DOM/window.navigator.onLine)在 iOS 5+ 和 Android 2.2+ 上使用。

```
if (window.navigator.onLine) {
    google.maps.event.addDomListener(window, 'load', initialize);
} else {
    document.getElementById("map_canvas").text='Sorry, No internet connection.';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:10:54.620

这是我用于 PhoneGap/jQuery Mobile App 的代码。

```
<script type="text/javascript" charset="utf-8" src="js/core/cordova-1.6.1.min.js"></script>
<script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
    function onLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    // PhoneGap is loaded and it is now safe to make calls PhoneGap methods
    //
    function onDeviceReady() {

    }
    // alert dialog dismissed
    function alertDismissed() {
        // do something
    }
    function checkReachability() {
        var _check=true;

        var networkState = navigator.network.connection.type;
        var states = {};
        states[Connection.UNKNOWN]  = 'Unknown connection';
        states[Connection.ETHERNET] = 'Ethernet connection';
        states[Connection.WIFI]     = 'WiFi connection';
        states[Connection.CELL_2G]  = 'Cell 2G connection';
        states[Connection.CELL_3G]  = 'Cell 3G connection';
        states[Connection.CELL_4G]  = 'Cell 4G connection';
        states[Connection.NONE]     = 'No network connection';

        //alert('Connection type: '+ networkState + states[networkState]);
        if(networkState==="unknown"){
            _check=false;
            showAlert();
            return _check;
        }
        else {
            return true;
        }
    }
    function showAlert() {
        navigator.notification.alert("Please connect your device to Internet.",onDeviceReady,"No Network Connectivity","OK");
    }
</script> 
```

然后放在进入您的页面的按钮内。像这样的东西：

```
 <div data-role="content">  
      <ul data-role="listview">
        <li><a href="#MyMapPage" onTouchStart="checkReachability()" data-transition="slide">My Map Page</a></li>
      </ul> 
     </div> 
```

如果没有连接，用户将收到本机警报“请将您的设备连接到 Internet”。

# yii - 为 Yii 创建查找字段

> ID：11154953
> 
> 赞同：1
> 
> 时间：2012-06-22T11:02:32.537
> 
> 标签：yii, lookup, yii-components

我正在尝试在我的应用程序中制作类似查找字段的内容。

目的是用户单击浏览按钮，它会弹出一个对话框（小部件），里面有一个网格（CGridView）。用户可以选择一行，并将“描述”列发送到我的表单中的文本字段。

我已经通过**在表单中​​注册以下脚本来完成这部分：**

```
Yii::app()->clientScript->registerScript('scriptName', '
function onSelectionChange()
{
        var keys = $("#CGridViewUsuario > div.keys > span");

        $("#CGridViewUsuario > table > tbody > tr").each(function(i)
        {
                if($(this).hasClass("selected"))
                {
                        $("#Funcionario_UsuarioId").val($(this).children(":nth-child(1)").text());
                }
        });
}
'); 
```

还有我的小部件：

```
 <?php $this->beginWidget('zii.widgets.jui.CJuiDialog', array(
                    'id'=>'mydialog',

                    'options'=>array(
                        'title'=>'Usuário',
                        'width' => 'auto',
                        'autoOpen'=>false,
                    ),
                ));

            $this->widget('zii.widgets.grid.CGridView', array(
                'dataProvider' => Usuario::model()->searchByLogin($model->UsuarioId),
                'id' => 'CGridViewUsuario',
                'filter' => Usuario::model(),
                'columns' => array(
                    'Login',
                    'Nome',
                ),
                'htmlOptions' => array(
                    'style'=>'cursor: pointer;'
                    ),                   
                'selectionChanged'=>'js:function(id){ onSelectionChange(); }',
            ));

            $this->endWidget('zii.widgets.jui.CJuiDialog');
        ?> 
```

现在我有两个任务要做：

*   当用户单击浏览按钮时，CGridView 应该会出现，其中过滤器已经填充了他在表单中键入的输入。

*   让 CGridView 过滤器工作。

别忘了，如果这一切运行成功，当用户点击保存按钮时，我将不得不在模型中保存查找字段的相应 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:03:24.370

您可以简单地为对话框的`open`事件提供一个回调函数，并在回调函数中

1.  使用 jquery 选择器选择您想要选择的输入过滤器（gridview），并从您想要的表单中的任何字段填充其值：

    ```
    $("#CGridViewUsuario .filters input[name='Userio[login]']").val($("#Funcionario_UsuarioId").val());
    // replace the names/ids to whatever you are using,
    // if you want to set multiple values, then you might have to run a loop or each() or something of that sort 
    ```

2.  *然后使用jquery.yiigridview.js* '`$.fn.yiiGridView.update`函数调用服务器根据您填充的值更新gridview ：

    ```
    $.fn.yiiGridView.update("CGridViewUsuario", {
       data: $("#CGridViewUsuario .filters input").serialize()
    }); 
    ```

    您可以在生成的 html 或您的资产文件夹中看到*jquery.yiigridview.js*`$.fn.yiiGridView.update`文件，并在其中找到该函数。

要订阅对话框的`open`事件，您可以将函数名称传递给`'open'`对话框`'options'`字段的选项：

```
$this->beginWidget('zii.widgets.jui.CJuiDialog', array(
                'id'=>'mydialog',

                'options'=>array(
                    'title'=>'Usuário',
                    // other options

                    'open'=>'js:dialogOpenCallback'
                ),
)); 
```

您可以在`registerScript()`调用本身中定义函数：

```
<?php
  Yii::app()->clientScript->registerScript('scriptName', '
    function onSelectionChange()
    {...}

    function dialogOpenCallback(event,ui){
       $("#CGridViewUsuario .filters input[name='Userio[login]']").val($("#Funcionario_UsuarioId").val());
       // replace the names/ids to whatever you are using,
       $.fn.yiiGridView.update("CGridViewUsuario", {
          data: $("#CGridViewUsuario .filters input").serialize()
       });
    }
   '); 
```

此外，您可以更改调用`onSelectionChange()`函数的方式：

```
'selectionChanged'=>'js:onSelectionChange'//'js:function(id){ onSelectionChange(); }', 
```

并更改您的函数签名：`function onSelectionChange(id)`.

差点忘了，将gridview的数据提供者和过滤器更改为模型实例，而不是静态实例。

# python - 如何在 Python 中使用 x DPs 将分数写为十进制？

> ID：11154954
> 
> 赞同：3
> 
> 时间：2012-06-22T11:02:45.623
> 
> 标签：python, printing, decimal, precision, fractions

我正在寻找的是一种将python Fraction() 类型写入任意小数位的方法。我查看了分数和小数的python文档，但我看不到任何转换或写出分数的方法。

所以我正在寻找的是一些打印出来的方法

```
Fraction(5, 7) 
```

作为

```
0.7142857142857142857142857142857142857142857142857142 
```

代替

```
>> float(Fraction(5, 7))
0.7142857142857143 
```

指定 DP 的数量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T11:10:31.257

[`Decimal`](http://docs.python.org/library/decimal.html)您可以使用该类具有任意精度。

```
from fractions import Fraction
from decimal import localcontext, Decimal

def print_fraction(f, digits):
    assert(f.imag == 0)

    # Automatically reset the Decimal settings
    with localcontext() as ctx:
        ctx.prec = digits
        print(Decimal(f.numerator) / Decimal(f.denominator))

f = Fraction(5, 7)
print_fraction(f, 52) 
```

这将打印`0.7142857142857142857142857142857142857142857142857143`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:43:54.143

```
from decimal   import Decimal, localcontext
from fractions import Fraction

def format_fraction(f, precision):
    with localcontext() as ctx:
        ctx.prec = precision
        return str(Decimal(f.numerator) / f.denominator)

f = Fraction(5, 7)
print(format_fraction(f, 52)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T19:46:10.860

```
def format_fraction(f, precision):
    if f == 0: return "0"
    s = str(int(f)) + "."
    f -= int(f)
    with localcontext() as ctx:
        ctx.prec = precision
        s += str(Decimal(f.numerator) / f.denominator).partition(".")[2]
    return s 
```

这将返回`"1341.73"`而不是`"1.3E+3"`on `format_fraction(Fraction(88554379,66000),2)`。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-22T11:09:14.753

您可以使用[字符串格式化](http://docs.python.org/library/stdtypes.html#string-formatting-operations)来做到这一点。有了它，你总是可以编写自己的包装函数。

```
>>> '%.64f' % (5 / 7.0)
'0.7142857142857143015746146375022362917661666870117187500000000000' 
```

# c - 为什么我不能初始化和 int 值到静态变量

> ID：11154957
> 
> 赞同：2
> 
> 时间：2012-06-22T11:02:49.540
> 
> 标签：c

`ERROR`当我在线运行这个程序时，我得到了

```
static int b = a; //error : initializer element is not constant 
```

不明白为什么？

```
 #include <stdio.h>
   // #include <setjmp.h>
    int main()
    {
    int a = 5;
    static int b = a;

    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:28:18.733

除了此处其他答案中说明的其他原因外，请参阅标准中的以下声明。

[C 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)在第4 点（第 6.7.8 节初始化）中说明了这一点：

```
All the expressions in an initializer for an object that has static storage duration
shall be constant expressions or string literals. 
```

另外，关于什么是常量表达式，在第 6.6 节常量表达式中说如下：

```
A constant expression can be evaluated during translation rather than runtime, and
accordingly may be used in any place that a constant may be. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T11:27:04.463

*在 C（与 C++ 不同）中，任何具有静态存储持续时间*的对象（包括函数静态）的初始化程序必须是常量表达式。在您的示例`a`中不是常量表达式，因此初始化无效。

C99 6.7.8 / 4：

> 具有静态存储持续时间的对象的初始化程序中的所有表达式都应为常量表达式或字符串文字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:23:55.540

静态变量始终是全局的，因为它不在任何线程的堆栈上，它的声明是否在函数内部并不重要。

所以全局变量的初始化是在程序`b`启动期间，在任何函数（包括.`main``a``a``main`

因此，您真的不能指望编译器接受它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T11:36:42.677

根据Als的回答......

```
// This is really crappy code but demonstrates the problem another way ....
#include <stdio.h>
int main(int argc, char *argv[])
{
static int b = argc ; // how can the compiler know 
                      // what to assign at compile time?

return 0;
} 
```

# java - 黑莓代码错误（空指针异常）

> ID：11154958
> 
> 赞同：-1
> 
> 时间：2012-06-22T11:02:50.933
> 
> 标签：java, blackberry, nullpointerexception, blackberry-jde

这是我的简单代码。

我有一个问题。它给了我空指针异常。

谁能告诉我为什么它给我错误“空指针异常”？

我无法理解。

请回复您的想法。

```
public final class MyScreen extends MainScreen implements FieldChangeListener
{
    /**
     * Creates a new MyScreen object
     */
    MyTextField textfield1,textfield2,textfield3;
    FontFamily alphaSansFamily;
    ButtonField buttonNew,buttonFind;
    public MyScreen()
    {        
        System.out.println("In field Change Method");
        setTitle("Offline Dictionary");
        int width = Display.getWidth();
        HorizontalFieldManager hrm=new HorizontalFieldManager();

        MyTextField textfield1=new MyTextField(width-150, 50);
        textfield1.setBackground(BackgroundFactory.createSolidBackground(Color.GRAY));
        textfield1.setBorder(BorderFactory.createRoundedBorder(new XYEdges(10,10,10,10),Border.STYLE_SOLID));
        try {
            alphaSansFamily = FontFamily.forName("BBAlpha Serif");
            Font appFont = alphaSansFamily.getFont(Font.PLAIN, 9, Ui.UNITS_pt);
            textfield1.setFont(appFont);
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }

        textfield1.setText("");
        hrm.add(textfield1);

        buttonFind=new ButtonField("Search",FIELD_RIGHT|FIELD_VCENTER);
        buttonFind.setChangeListener(this);
        hrm.add(buttonFind);

        add(hrm);

        HorizontalFieldManager hrm1=new HorizontalFieldManager();

        MyTextField textfield2=new MyTextField(width-150, 50);
        textfield2.setBackground(BackgroundFactory.createSolidBackground(Color.GRAY));
        textfield2.setBorder(BorderFactory.createRoundedBorder(new XYEdges(10,10,10,10),Border.STYLE_SOLID));
        try {
            alphaSansFamily = FontFamily.forName("BBAlpha Serif");
            Font appFont = alphaSansFamily.getFont(Font.PLAIN, 9, Ui.UNITS_pt);
            textfield1.setFont(appFont);
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }

        textfield1.setText("");
        hrm1.add(textfield2);
        buttonNew=new ButtonField("New",FIELD_LEFT|FIELD_VCENTER);
        buttonNew.setChangeListener(this);
        hrm1.add(buttonNew);

        add(hrm1);

        textfield3=new MyTextField(width-60, 50);
        textfield3.setBackground(BackgroundFactory.createSolidBackground(Color.GRAY));
        textfield3.setBorder(BorderFactory.createRoundedBorder(new XYEdges(10,10,10,10),Border.STYLE_SOLID));
        try {
            alphaSansFamily = FontFamily.forName("BBAlpha Serif");
            Font appFont = alphaSansFamily.getFont(Font.PLAIN, 9, Ui.UNITS_pt);
            textfield1.setFont(appFont);
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }

        textfield3.setText("");
        add(textfield3);

    }
    public void fieldChanged(Field field, int context) {
        System.out.println("In field Change Method");
        if (field==buttonFind)
        {
            Dialog.inform("Find Button Pressed!");
            System.out.println("In Button Find");
            buttonNew.setEnabled(false);
            textfield2.setEditable(false);
            textfield3.setEditable(false);
        }
        else 
        {
            Dialog.inform("New Button Pressed!");
            buttonFind.setEnabled(false);
            textfield1.setEditable(false);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:49:53.797

在 Eclipse 中按 F11 来调试您的应用程序。您应该能够看到引发 NullPointerException 的确切行。

# c# - 可以通过从应用程序中获取值而不在 WP7 中触发它来更新动态磁贴吗？

> ID：11154959
> 
> 赞同：1
> 
> 时间：2012-06-22T11:02:51.480
> 
> 标签：c#, windows-phone-7, live-tile

我的应用程序中有动态磁贴，不是 Web 服务应用程序。退出应用程序时更新动态磁贴。因此，如果用户一天不打开应用程序，它就不会得到更新。

我可以在不去服务器的情况下更新吗？Tiles 是否可以通过自行触发应用程序从应用程序中获取值，或者实时图块可以从应用程序中获取值而无需用户每天打开它？

阿尔法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T11:06:15.347

如果您注册一个[PeriodicTask](http://msdn.microsoft.com/en-us/library/microsoft.phone.scheduler.periodictask%28v=VS.92%29.aspx)并且您将有 25 秒的时间每 30 分钟执行一次，在此期间您可以更新您的活动磁贴。

有关详细信息，请参阅[Windows Phone 后台代理概述](http://msdn.microsoft.com/en-us/library/hh202942%28v=vs.92%29.aspx)。

# python - PyODBC“找不到图像 (0) (SQLDriverConnect)”

> ID：11154965
> 
> 赞同：1
> 
> 时间：2012-06-22T11:03:25.890
> 
> 标签：python, ms-access, pyodbc

我正在尝试使用 PyODBC 连接到 Access 数据库。它在 Windows 上运行良好，但在 OS XI 下运行它——</p>

> 回溯（最后一次调用）：文件“”，第 1 行，在文件“access.py”中，第 10 行，在**init** self.connection = connect(driver='{Microsoft Access Driver ( *.mdb)}', dbq= path, pwd=password) pyodbc.Error: ('00000', '[00000] [iODBC][Driver Manager]dlopen({Microsoft Access Driver (* .mdb)}, 6): image not found (0) (SQLDriverConnect) ')

我必须安装其他东西吗？我是否安装错了 PyODBC？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:44:53.237

pyodbc 允许连接到 ODBC 数据源，但它实际上并不实现驱动程序。

我不熟悉 OS X，但在 Linux 上，ODBC 源通常在 odbcinst.ini 文件中描述（位置由 ODBCSYSINI 变量确定）。

您需要为 OS X 安装 Microsoft Access ODBC 驱动程序。

# asp.net-mvc - 奇怪的 MVC3 性能问题

> ID：11154966
> 
> 赞同：0
> 
> 时间：2012-06-22T11:03:25.773
> 
> 标签：asp.net-mvc, asp.net-mvc-3, performance, mvc-mini-profiler

在我的代码似乎到达我的控制器之前，我遇到了一个奇怪的问题。

通过使用 SO Mini-MVC-Profiler，我发现某个请求需要 500 毫秒（500 毫秒！！！），而据我所知它正在做的事情；太高了！

![在此处输入图像描述](../Images/66da78c966d7d7c63e1ab28215a4af04.png)

我们确实使用统一 IoC 来创建我们的依赖项，并且在创建以下 EntityController 的情况下，需要创建一个 AppServices 依赖项，这确实需要实例化一些服务类，但我不希望这需要 500 毫秒，它只是构造函数。

有什么方法可以调试来具体找出占用时间的地方吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:01:22.933

也许不是您要寻找的答案，也不是花哨，但您可以使用[System.Diagnostics.Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:21:54.870

我认为您需要尝试分析您的代码，例如使用 Ant 分析器。它告诉你时间间隔发生在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:48:58.243

我认为这个问题要么用 '' 解决，要么不是问题

# ruby-on-rails - Michael Hartl 的 Ruby on Rails 教程。第 9 章测试失败

> ID：11154967
> 
> 赞同：3
> 
> 时间：2012-06-22T11:03:31.780
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我是一名新手，正在阅读 Michael Hartl 的 Tuby on Rails 教程，我在第 9 章的测试中有几个失败的项目。

运行 RSPEC 测试返回：

```
sis-macbook-pro:sample_app Lagaspi$ bundle exec rspec spec/
...................................FF................................

Failures:

1) Authentication authorization in the Users controller visiting the edit page 
 Failure/Error: before { visit edit_user_path(user) }
 NameError:
   undefined local variable or method `user' for #<RSpec::Core::ExampleGroup::Nested_2::Nested_3::Nested_2::Nested_1:0x007fca6433d3b8>
 # ./spec/requests/authentication_pages_spec.rb:72:in `block (5 levels) in <top (required)>'

2) Authentication authorization in the Users controller submitting to the update action 
 Failure/Error: before { put user_path(user) }
 NameError:
   undefined local variable or method `user' for #<RSpec::Core::ExampleGroup::Nested_2::Nested_3::Nested_2::Nested_2:0x007fca6434db50>
 # ./spec/requests/authentication_pages_spec.rb:77:in `block (5 levels) in <top (required)>'

Finished in 1.85 seconds
69 examples, 2 failures

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:73 # Authentication authorization in the Users controller visiting the edit page 
rspec ./spec/requests/authentication_pages_spec.rb:78 # Authentication authorization in the Users controller submitting to the update action 
```

我的 authentication_pages_spec.rb

```
require 'spec_helper'

describe "Authentication" do

subject { page }

describe "signin page" do
before { visit signin_path }

it { should have_selector('h1',    text: 'Sign in') }
it { should have_selector('title', text: 'Sign in') }
end

describe "signin" do
before { visit signin_path }

describe "with invalid information" do
  before { click_button "Sign in" }

  it { should have_selector('title', text: 'Sign in') }
  it { should have_selector('div.alert.alert-error', text: 'Invalid') }

  describe "after visiting another page" do
    before { click_link "Home" }
    it { should_not have_selector('div.alert.alert-error') }
  end
 end

 describe "with valid information" do
  let(:user) { FactoryGirl.create(:user) }
  before { sign_in user }

  it { should have_selector('title', text: user.name) }
  it { should have_link('Profile',     href: user_path(user)) }
  it { should have_link('Sign out',    href: signout_path) }
  it { should have_link('Settings',    href: edit_user_path(user)) }
  it { should have_link('Users',       href: users_path) }
  it { should_not have_link('Sign in', href: signin_path) }

  describe "followed by signout" do
    before { click_link "Sign out" }
    it { should have_link('Sign in') }
  end
 end
end

describe "authorization" do

describe "for non-signed-in users" do
  let(:user) { FactoryGirl.create(:user) }

  describe "when attempting to visit a protected page" do
    before do
      visit edit_user_path(user)
      fill_in "Email",    with: user.email
      fill_in "Password", with: user.password
      click_button "Sign in"
    end

    describe "after signing in" do

      it "should render the desired protected page" do
        page.should have_selector('title', text: 'Edit user')
      end
    end
  end
  end

   describe "in the Users controller" do

    describe "visiting the edit page" do
      before { visit edit_user_path(user) }
      it { should have_selector('title', text: 'Sign in') }
    end

    describe "submitting to the update action" do
      before { put user_path(user) }
      specify { response.should redirect_to(signin_path) }
    end
  end
  end

  describe "as wrong user" do
  let(:user) { FactoryGirl.create(:user) }
  let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
  before { sign_in user }

  describe "visiting Users#edit page" do
    before { visit edit_user_path(wrong_user) }
    it { should_not have_selector('title', text: full_title('Edit user')) }
  end

  describe "submitting a PUT request to the Users#update action" do
    before { put user_path(wrong_user) }
    specify { response.should redirect_to(root_path) }
  end
  end
end 
```

这是上面的第 73 行

```
it { should have_selector('title', text: 'Sign in') } 
```

和上面的第 78 行

```
specify { response.should redirect_to(signin_path) } 
```

有任何想法吗？我真的不知道这意味着什么。谢谢 Si。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T11:24:15.220

在第 50 行，你有

```
let(:user) { FactoryGirl.create(:user) } 
```

但是 :user 在您到达第 73 行时不再可用，因为您关闭了第 68 行中定义的 :user 的描述块。在第 77 行您尝试再次使用它时也是如此。

我的建议是将**let(:user)**移到规范的顶部，这样您只需要定义一次，而不是在整个规范中包含它。如果做不到这一点，请在第 71 行再次定义它（**描述“在用户控制器中”**之后的行）

* * *

潜在的解决方案是在顶部定义 let(:user)..... 所以你只需要定义一次 user 而不是在每个块中

```
require 'spec_helper'

describe "authentication" do
  subject { page }
  let(:user) { FactoryGirl.create(:user) }
  ... 
```

# algorithm - 如何使用 TerracottaJobStore 在 Quartz-Scheduler 中知道哪个节点作业将执行？

> ID：11154968
> 
> 赞同：0
> 
> 时间：2012-06-22T11:03:35.023
> 
> 标签：algorithm, quartz-scheduler, terracotta

我已将 terracotteJobStore 与 Quartz-Scheduler 绑定

terracotteJobStore 如何确定下一个作业应该为哪个节点执行？

哪个算法用于 terracotteJobStore 中的节点选择有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T05:42:20.800

如果“Quartz Scheduler”与“TerracotteJobStore”一起使用，并且接下来有任何作业要执行，那么该作业的节点选择将是随机的。

使用“Qurtz Where”可以根据标准制作 Job。意味着如果你想制作一个必须在具有至少 2 个核心的节点上运行的作业，或者制作一个在平均 CPU 负载为 70% 的节点上运行的作业，或者制作一个在具有 70% CPU 负载的节点上运行的作业在这种情况下，“Quartz Where”至少有 330 MB 的 Java 堆空闲内存很有用。

只有在“Quartz Where”的情况下，才能预测 Job 将在哪个 Node 上执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:19:57.040

使用 OS Terracotta 的 JobStore，您无需决定作业将在哪个节点上执行。并不是说它真的是随机发生的，而是调度程序在非集群模式下的行为。所以基本上，每个节点都会以固定的时间间隔，并根据下一个触发器触发何时获取下一个触发器。由于集群中所有节点的行为方式相同，所以最先获得锁的节点也将能够先获得触发器。

Terracotta EE 带有 Quartz Where 功能，可以让您描述应该在哪里解雇工作。您可以通过观看这个简短的截屏视频了解更多关于 Quartz Where 的信息：http: [//www.codespot.net/blog/2011/03/quartz-where-screencast/](http://www.codespot.net/blog/2011/03/quartz-where-screencast/)

希望这会有所帮助。

# sql-server-2005 - SQL Server 2005 我无法从表中读取

> ID：11154973
> 
> 赞同：0
> 
> 时间：2012-06-22T11:03:51.610
> 
> 标签：sql-server-2005

请假设在 SQL Server 2005 中，如果您启动以下查询：

```
SELECT CHICKEN_CODE FROM ALL_CHICKENS WHERE MY_PARAMETER = 'N123123123'; 
```

您获得：

```
31 
```

结果。

现在，我想编写一个函数，给定 的值`MY_PARAMETER`，产生对应的值`CHICKEN_CODE`，在表中找到`ALL_CHICKENS`。

我在 SQL Server 2005 中编写了以下存储函数：

```
ALTER FUNCTION [dbo].[determines_chicken_code]
(
    @input_parameter                         VARCHAR 
)
RETURNS varchar
AS 
BEGIN
    DECLARE @myresult varchar

    SELECT @myresult  =  CHICKEN_CODE
    FROM dbo.ALL_CHICKENS
    WHERE MY_PARAMETER = @input_parameter

    RETURN @myresult
END 
```

但是，如果我启动以下查询：

```
SELECT DBO.determines_chicken_code('N123123123') 
```

它产生：

```
NULL 
```

为什么？

预先感谢您的友好合作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:07:56.790

像这样定义 varchar 变量的长度

```
varchar(100) 
```

如果没有`100`（或您选择的任何长度），它的长度是`1`并且该 `where`子句将过滤掉正确的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T11:08:26.683

为您的 varchar 指定一个长度（例如：varchar(100)）。没有长度，varchar = 1 char。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:14:15.060

根据其他 PS，您只能在 @myresult 中存储一个字符，因为您没有指定任何长度，bcoz 1 char 长度是 Varchar 数据类型的默认值。

**为什么我们得到 NULL，而不是第一个字符：**

如果根据 ALL_CHICKENS 表中的`Where`子句过滤了多条记录，则从 ALL_CHICKENS 表的最后一行中提取 CHICKEN_CODE 列的值。

似乎最后一行在 CHICKEN_CODE 列中具有空值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T11:25:48.137

指定 @input_parameter 的长度，@myresult 默认 varchar lengh 为 1。

# javascript - java脚本数组赋值错误

> ID：11154978
> 
> 赞同：3
> 
> 时间：2012-06-22T11:04:13.887
> 
> 标签：javascript, arrays

```
var UserBoard = new Array(20,20);
for(var i = 0; i < 21; ++i){
    for(var j = 0; j < 21; ++j){
        UserBoard[i,j] = 0;
    }
}
document.write(UserBoard[3,5]);
UserBoard[4,5]=1;
document.write(UserBoard[3,5]); 
```

[http://jsfiddle.net/XbyqN/2/](http://jsfiddle.net/XbyqN/2/)

这很简单，但我不知道为什么会这样。警报应该是 0，而不是 1，因为我已经将二维数组初始化为 0。

有人可以解释我为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T11:09:45.033

让我们分解一下

```
var UserBoard = new Array(20,20); 
```

您正在创建一个包含两个插槽的数组，它们都包含值“20”（int）。所以你的数组是`[20, 20]`

接下来，您的循环：

```
for(var i = 0; i < 21; ++i){
  for(var j = 0; j < 21; ++j){
    UserBoard[i,j] = 0;
  }
} 
```

二维数组不是这样定义的。在这种情况下，只有“j”计数器会做一些事情。“i”被简单地忽略了。所以你最终得到一个数组，如下所示：`[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]`

接下来，赋值：

```
UserBoard[4,5]=1; 
```

相当于：

```
UserBoard[5]=1; 
```

和你的警报：

```
alert("test: " + UserBoard[3,5]); 
```

相当于：

```
alert("test: " + UserBoard[5]); 
```

这就是为什么您会收到“1”作为警报。

如果你想要二维数组，你应该使用以下符号：

```
UserBoard[4][5] = 1; 
```

在 MDN 上阅读所有内容：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:09:09.007

你想要`UserBoard[i][j]`而不是`UserBoard[i,j]`.

多维数组并不像您认为的那样有效。实际上，它们是数组的数组。

用这个 ：

```
var UserBoard = new Array(20);
for(var i = 0; i < 20; ++i){
  UserBoard[i] = new Array(20);
  for(var j = 0; j < 20; ++j){
    UserBoard[i][j] = 0;
  }
} 
```

我建议您开始使用`console.log`Chrome 的开发人员工具来调试您的代码（或 Firebug）。在代码末尾尝试此操作，然后键入 F12 键：

```
console.log(UserBoard); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:09:21.227

逗号运算符计算其两个操作数（从左到右）并返回第二个操作数的值。

```
var UserBoard = new Array(20,20); // [20, 20]
for(var i = 0; i < 21; ++i){
  for(var j = 0; j < 21; ++j){
    UserBoard[i,j] = 0; // UserBoard[j] = 0
  }
}
UserBoard[4,5]=1; // UserBoard[5] = 1
alert("test: " + UserBoard[3,5]); // UserBoard[5] 
```

你想要的是：

```
var UserBoard = [];
for (var i = 0; i < 20; i++) { // i < 20
    UserBoard[i] = [];
    for (var j = 0; j < 20; j++) {
        UserBoard[i][j] = 0;
    }
}
UserBoard[4][5]=1;
alert("test: " + UserBoard[3][5]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T11:22:30.940

使用数组构造函数 ( `new Array`) 创建新数组时，参数具有不同的含义，具体取决于参数的类型和总数。

```
var array20long = new Array(20);// = [undefined,undefined,undefined,....].length === 20
var arrayString = new Array('foo');// = ['foo']
var yourArray = new Array(20,20);// = [20,20] 
```

简而言之：将 1 个整数传递给数组构造函数，创建一个长度等于传递的 int 的数组，传递几个整数将导致 1 维数组，其长度等于参数的总数。在您的情况下，两个整数创建一个具有 2 个值的数组。每个索引都将被初始化为其对应的参数。在你的情况下：索引 0 === 20，索引 1 === 20，如果你写`new Array(20,10)`了 ，结果将是一个像`[20,10]`.

你得到了基本的想法。
重要的是要注意，使用逗号访问多维数组是行不通的：`arr[1,2]`你应该写而不是写`arr[1][2]`. 谷歌一些 JavaScript 的介绍性教程，不会有什么坏处……你很快就会明白为什么使用数组构造函数不是创建数组的最佳方式

# java - 使用 Java 的 WebDriver 中是否有任何方法可以控制浏览器的速度？

> ID：11154982
> 
> 赞同：8
> 
> 时间：2012-06-22T11:04:24.590
> 
> 标签：java, selenium-webdriver, selenium-rc

当我使用 Selenium RC 时，有一个方法 setSpeed 为：

selenium.setSpeed("500");

Selenium WebDriver中控制浏览器速度的方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T14:44:09.207

Selenium WebDriver 中不再有任何方法可以控制每个“步骤”的速度。曾经，接口上有一个`setSpeed()`方法`Options`（在 Java 绑定中；其他绑定在其适当命名的对象上具有类似的构造），但它在很久很久以前就被弃用了。这背后的理论是，您不需要*先验地*减慢 WebDriver 代码的每一步。如果您需要等待正在自动化的应用程序中发生某些事情，您应该使用隐式或显式等待例程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-03T15:12:58.127

没有直接的方法。但是您可以使用一个 hack，您可以覆盖 webdriver 的方法并引入显式睡眠来减慢您的测试速度，例如。覆盖 findElement 方法

```
public class _WebDriver extends FirefoxDriver {

@Override
public WebElement findElement(By by) {
    try {
        Thread.sleep(500);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return by.findElement((SearchContext) this);
}

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T09:01:46.493

您可以使用`Thread.Sleep(500)`（或等效的）任何您用来运行 webdriver 的语言。这将导致线程暂停确切的毫秒数。

或者，您可以使用[此处](http://seleniumhq.org/docs/04_webdriver_advanced.html)描述的*显式*或*隐式等待*。

*   显式等待允许您定义一个`ExpectedCondition`. Webdriver 将每 500 毫秒检查一次条件，直到它返回 true，（之后将立即恢复执行）。

*   隐式等待导致 webdriver 不断重试尝试在 DOM 中定位某些内容。一旦找到元素，执行将立即恢复。

请注意，无论是隐式等待还是显式等待都不能保证 500 毫秒的暂停。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:26:44.987

更好的可能是将 webdriver FluentWait 类与 ExpectedCondition 一起使用。样本可以在这里找到：http: [//www.summa-tech.com/blog/2011/10/10/using-page-objects-with-selenium-and-web-driver-20/](http://www.summa-tech.com/blog/2011/10/10/using-page-objects-with-selenium-and-web-driver-20/)

# python - 更新 XML 文件中的值

> ID：11154986
> 
> 赞同：0
> 
> 时间：2012-06-22T11:04:32.787
> 
> 标签：python, xml, perl

我有以下格式的 XML 文件：

```
<Principal ID="122" >
<Status Fees="${Fees}"/>
</Principal>
<Principal ID="123" >
<Status Fees="${Fees}"/>
</Principal>
<Principal ID="124" >
<Status Fees="${Fees}"/>
</Principal>
<Principal ID="125" >
<Status Fees="${Fees}"/>
</Principal> 
```

我需要`${Fees}`用 Fees1、Fees2、Fees3 等更新变量。有超过 365 条记录。有人可以帮助我如何通过 Perl 或 Python 做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:08:16.393

使用正则表达式进行 xml 操作并不是一个好主意，但在这种情况下，我还是会使用它：

***Perl 脚本：***

```
my $xml = join (/\n/, <main::DATA>);
my @fees = (1, 2, 3, 4);

$xml =~ s/(<Status Fees=")\${Fees}("\/>)/{$1 . shift(@fees) . $2}/ige;

print "$xml";

__DATA__
<Principal ID="122" > 
<Status Fees="${Fees}"/> 
</Principal> 
<Principal ID="123" > 
<Status Fees="${Fees}"/> 
</Principal> 
<Principal ID="124" > 
<Status Fees="${Fees}"/> 
</Principal> 
<Principal ID="125" > 
<Status Fees="${Fees}"/> 
</Principal> 
```

***输出：***

```
<Principal ID="122" > 
<Status Fees="1"/> 
</Principal> 
<Principal ID="123" > 
<Status Fees="2"/> 
</Principal> 
<Principal ID="124" > 
<Status Fees="3"/> 
</Principal> 
<Principal ID="125" > 
<Status Fees="4"/> 
</Principal> 
```

[在这里](http://ideone.com/WPJsd)查看并测试它。

* * *

如果要替换`${Fees}`为变量的实际值`$Fees`并且此变量的名称发生更改，请使用：

***Perl 脚本：***

```
my $xml = join (/\n/, <main::DATA>);
my ($fee1, $fee2, $fee3, $fee4) = (1, 2, 3, 4);

$xml =~ s/(<Status Fees=")\${(.*?)}("\/>)/{$1 . eval('$'.$2) . $3}/ige;

print "$xml";

__DATA__
<Principal ID="122" > 
<Status Fees="${fee1}"/> 
</Principal> 
<Principal ID="123" > 
<Status Fees="${fee2}"/> 
</Principal> 
<Principal ID="124" > 
<Status Fees="${fee3}"/> 
</Principal> 
<Principal ID="125" > 
<Status Fees="${fee4}"/> 
</Principal> 
```

***输出：***

```
<Principal ID="122" > 
<Status Fees="1"/> 
</Principal> 
<Principal ID="123" > 
<Status Fees="2"/> 
</Principal> 
<Principal ID="124" > 
<Status Fees="3"/> 
</Principal> 
<Principal ID="125" > 
<Status Fees="4"/> 
</Principal> 
```

[在这里](http://ideone.com/1WtKS)查看并测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:30:02.683

简短的 Python 版本。相当低效，但即时运行超过 365 个条目。

```
xml = open("INPUT.XML","rb").read()
count = 1
while "${Fees}" in xml:
    xml = xml.replace("${Fees}", "Fees%d"%count, 1)
    count += 1
open("OUTPUT.XML","wb").write(xml) 
```

# c# - 从后台线程奇怪的行为更新 datagridview

> ID：11154988
> 
> 赞同：1
> 
> 时间：2012-06-22T11:05:00.603
> 
> 标签：c#, datagridview

我有一些数据，我在一个任务中更新它：该应用程序目前是一个黑客的想法，因此为代码道歉。

```
Task.Factory.StartNew(() =>
    {
        dataGridView1.BeginInvoke((Action)(() =>
            {
                dataGridView1.SuspendLayout();
            }));

        dataSet1.Reset();
        da.Fill(dataSet1);

        dataGridView1.BeginInvoke((Action)(() =>
            {
                dataGridView1.DataSource = dataSet1.Tables[0];
                dataGridView1.Columns[0].Visible = false;
                dataGridView1.Columns[1].Width = 50;
                dataGridView1.ResumeLayout();
            }));
    }
    ).ContinueWith(task =>
        {
            if (dataSet1.Tables[0].Rows.Count > 0)
            {
                if (lastcount != dataSet1.Tables[0].Rows.Count)
                {
                    lastcount = dataSet1.Tables[0].Rows.Count;
                    if (lastcount == 0)
                    {
                        NotifyWithMessage("The items have been cleared", "Items cleared");
                    }
                    else
                    {
                        NotifyWithMessage(String.Format("There are {0} new items in your monitor", dataSet1.Tables[0].Rows.Count));
                    }
                }
            }
        }
    ); 
```

现在，代码基本上可以工作了。没有错误，这很好..

当它在任务之外更新时，datavgridview 根本没有闪烁，当我在调试中运行它时，它非常小，并且在黑客可以接受的范围内..当我在调试之外运行它的那一刻......非常明显！暂停和恢复布局根本没有任何区别。我需要线程中的代码，因为 UI 在没有响应的情况下是块状的 - 虽然它是可以接受的，但现在它的刷新很糟糕。

我的 Datagridview 是根据单元格颜色自定义颜色的，但是，我只是不明白为什么调试和发布之间存在差异，我希望性能反过来！

（我试过 Invoke 和 BeginInvoke ......）

我在*[两个屏幕之一上查看了 DataGridView 的可怕重绘性能](https://stackoverflow.com/questions/118528/horrible-redraw-performance-of-the-datagridview-on-one-of-my-two-screens)*

而在debug下，这个根本不闪烁，甚至一点点都没有……在release条件下，有一个可笑的闪烁……

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:45:54.903

启动一项在后台填充数据集的任务，完成此任务后，您将执行 BeginInvoke，在其中暂停布局、分配数据并恢复。

使用您现在拥有的版本，执行代码路径的可能性非常多，很难预测会发生什么。

渲染必须在 UI 线程上，所以你所能做的就是尝试优化它的代码。我会按照文章开头所述执行异步部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:47:27.647

最后我做了什么：我将查询重新放入一个新的数据集中，如果计数相同，那么我没有更新网格，如果计数发生了变化，我做了。

```
timer1.Stop();

        Task<Boolean>.Factory.StartNew(() =>
            {
                DataSet t = new DataSet();
                //_dataSet1.Reset();
                Boolean ok = false;
                Int16 retries = 0;
                while (!ok && retries<3)
                try
                {
                    da.Fill(t);
                    ok = true;
                }
                catch
                {
                    retries++;
                    Thread.Sleep(1000);
                }
                //if (!ok) throw new Exception("DB error");
                if (!ok) return false;
                try
                {
                    if (t.Tables.Count > 0 && t.Tables[0].Rows.Count != _lastcount)
                    {
                        _dataSet1 = t;
                        _lastcount = t.Tables[0].Rows.Count;
                        return true;
                    }
                }
                catch {  }
                return false;
            }).ContinueWith(task =>
                {
                    if (task.IsFaulted)
                    {
                        SQLFailed();
                        return;
                    }
                    if (!task.Result) return;

                    Invoke((Action) (() =>
                                         {
                                             dataGridView1.DataSource = _dataSet1.Tables[0];
                                             dataGridView1.Columns[0].Visible = false;
                                             dataGridView1.Columns[1].Width = 50;
                                         }));

                    if (_lastcount == 0)
                    {
                        NotifyWithMessage("The items have been cleared", "Items cleared");
                    }
                    else
                    {
                        NotifyWithMessage(String.Format("There are {0} new items in your monitor", _lastcount));
                    }
                });

    timer1.Start(); 
```

# silverlight - Silverlight 项目中未显示数据

> ID：11154998
> 
> 赞同：0
> 
> 时间：2012-06-22T11:05:32.280
> 
> 标签：silverlight

我得到了一个 Silverlight 项目。部分完成并给出了数据库连接。我刚刚将项目复制到我的系统中。我已经开始调试了。然后，前端 UI 开始显示，但没有数据。那里有下拉菜单，网格标题等..但是没有从数据库中检索到数据。我找不到为什么这与我刚接触 Silverlight 完全一样。

谁能帮我吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:07:58.040

知道了。最后发现日期格式不正确。系统日期和为日期格式编写的代码不匹配。