# StackOverflow 问答 000464000-000464999

# c++ - C++ 的简单动态图形显示

> ID：464000
> 
> 赞同：5
> 
> 时间：2009-01-21T03:23:01.610
> 
> 标签：c++, visualization, real-time

我正在寻找一个简单的 C++ 图形布局库。我想将该库嵌入到我们基于 wxWidgets 的可视化器中。总之，我正在寻找类似[graphviz](http://www.graphviz.org/Gallery.php)的东西，除了动态 - 即当事件发生时，只需要加载图形的变化，而不是完整的显示。有[dynagraph](http://www.dynagraph.org/)，但它似乎是一个死项目。之前有人建议我使用 VTK - 但它是重量级的。

我正在寻找可用于商业用途的开源、非 copyleft 类型的库（GPL 已经出局，LGPL 应该没问题）。我愿意接受谷歌不会给出的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-21T05:17:41.910

Graphviz 生成的布局基于全局结构 - 任何单个添加都可以显着改变输出（除非您使用固定坐标，在这种情况下您可能不会问这个问题）。基本上，如果您想要自动放置元素，您需要接受以下解决方案之一：

*   当放置新元素时，会实时运行物理模拟，导致节点疯狂反弹，直到它们安顿到新位置。这会很慢，但会显示出“令人愉悦”的变化。
*   放置新元素时，将重新绘制整个图形（物理/隐藏的任何内容，但整个内容都会被修改）。由于不必重绘，这会更快，但节点的相对位置可以完全不同。
*   放置新元素时，不会修改现有元素。在进行了足够多的动态更新后，您的图表将看起来很糟糕，因为自动放置是一个全局优化问题。

抱歉，我对您的问题无能为力，但也许这有助于解释为什么您正在寻找的东西可能根本不存在（或没有任何好处）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-23T19:30:40.457

克服使用 graphviz 时的一些问题（由 Tom 描述）。我们将可视化器世界坐标设置为与 graphviz 世界坐标一致。

然后。假设每个视觉元素都有一个唯一的标识符，使用这些元素构建一个图形。将图形输出为文本。根据输出解析重新调整所有内容。?

--

迈克尔

# bluetooth - 通过蓝牙控制手机摄像头

> ID：464005
> 
> 赞同：1
> 
> 时间：2009-01-21T03:29:14.547
> 
> 标签：bluetooth, nokia, n73

我希望能够在 C# 中使用蓝牙远程控制诺基亚 N73 手机的照片和视频相机功能。

我看过[32feet.NET 蓝牙库](http://inthehand.com/content/32feet.aspx)，但我真的不知道如何处理它。任何现有的**专门设计用于控制相机功能的**[蓝牙配置文件](http://www.alanjmcf.me.uk/comms/bluetooth/Bluetooth%20Profiles%20and%2032feet.NET.html)？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-23T03:14:07.463

是的，有一个[**基本成像配置文件**(BIP)](http://en.wikipedia.org/wiki/AVRCP#Basic_Imaging_Profile_.28BIP.29)，其中一个子集**Remote Camera**功能允许发起者*(PC)*远程使用数码相机*（在手机上）*

此外，适用于 Windows 的[东芝蓝牙堆栈](http://en.wikipedia.org/wiki/Bluetooth_stack#Toshiba_stack)具有：

*   具有“RemCam”配置文件支持的蓝牙摄像头的“远程摄像头”工具，这是 BIP 配置文件的（非强制性）子配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-04T18:27:06.100

如果我没记错的话，市场上的大多数手机都不支持 BIP 配置文件的“远程摄像头”功能。他们只是使用 BIP 来发送和接收图像。

# python - django 应用程序配置

> ID：464010
> 
> 赞同：0
> 
> 时间：2009-01-21T03:32:58.080
> 
> 标签：python, django

我很想开始使用 Django，但我真的在为初始设置而苦苦挣扎。我安装了 Python/MySql/Apache2.2/mod_python。现在我正在尝试创建一个正确的目录结构，然后分别更新 Django 和 Apache settings.py/httpd 文档。特别是后者中的位置标签。Django 和 Python 基于简单性，但这是 Django 人员的一个巨大疏忽，没有在这方面提供更多指导。我在 Django 开发服务器中运行了一个基本页面，但无法加载样式表。所以我决定安装 mod_python 并尝试在我的开发环境中使用 apache，我更加沮丧。我似乎在网络上或书籍中的任何地方都找不到一个很好的例子来说明如何创建一个真实的目录结构，然后基于该结构，如何配置必要的设置。教程中的所有内容都像往常一样不现实或很有帮助。太简单。如果这里有人可以分享他们如何配置他们的 Django 目录和设置，那就太棒了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-22T02:09:42.867

多谢你们。在进行了更多搜索之后，我找到了我在 [这里](http://rob.cogit8.org/blog/2008/Jun/20/django-and-relativity/)寻找的东西。这是一个示例项目目录结构和 settings.py。如果您查看那里的评论，您会发现很多其他人也对此感到困惑，并发现该示例很有帮助。如果 Django 创建一个推荐的 dir 结构，这样你就知道在哪里存储 css、js、django 应用程序文件、模板文件等，那就太好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T08:35:45.317

不要使用 Apache 进行开发，这会让你每 15 秒重新启动 Apache 一次（**编辑**：或者你可以只使用 PythonDebug On）。

[这种技术](http://docs.djangoproject.com/en/dev/howto/static-files/#limiting-use-to-debug-true)是如何通过开发服务器加载您的媒体（样式表等）。如果您使用确切的片段，则需要将 MEDIA_URL 设置为 '/site_media/' 并将 MEDIA_ROOT 设置为 '/path/to/media' （显然后者可能需要更改为您的媒体文件实际所在的位置）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-21T22:43:43.287

我们刚刚在 OSCON2010 上构建并发布了（在 Apache2 下）Djenes：

*   [谷歌代码上的 Djenesis](http://code.google.com/p/djenesis/)

Djenesis 的两个目标是

*   轻松引导基于您的新项目
*   提供基于数十个基于 Django 的特定于 Web 的应用程序的默认项目模板

有关功能/优点/教程以及代码的更多详细信息，请参阅 Google 代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T04:15:23.237

您的问题有很多，所以我将尝试将其归结为：

1.  本教程旨在让您使用框架并以尽可能少的配置启动和运行。没有要配置的服务器等。如果您尝试使用开发服务器加载 CSS，则需要从开发服务器“之外”的某个地方提取 CSS。例如，在我的 Mac 上，我启动了开发服务器，但从内置的 apache 服务器加载了 CSS。

2.  这里有更多关于使用 Apache 和 mod-python 的信息：[mod_python and apache setup info](http://docs.djangoproject.com/en/dev/howto/deployment/modpython/#howto-deployment-modpython)

3.  我不确定您所说的“创建目录结构”是什么意思，但大多数核心应用程序文件通常是通过运行`django-admin.py`脚本、运行`startproject`和`startapp`. 这在本教程中进行了演示。

您也可以在 IRC #django 频道上提问！如果您正在寻找有关该主题的书籍，还可以查看[Django Book](http://www.djangobook.com/)。

# asp.net - Dropdownlist selecteditem 始终是第一项，尽管选择

> ID：464021
> 
> 赞同：1
> 
> 时间：2009-01-21T03:46:15.980
> 
> 标签：asp.net, drop-down-menu

我有 4 个下拉框。前 2 个将填充第三个框。第三个框填充第四个下拉列表。当我去提交时，我去获取第 4 个下拉列表的 selectedvalue。由于某种原因，这始终是第一个值，而不是实际选择的值。屏幕清楚地显示了另一个已选择的项目。可能是什么问题？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-21T03:49:35.647

您是否在页面加载中绑定下拉列表？Page_Load 发生在按钮提交等控制事件之前。因此，如果您在检查 button_submit 中的值之前在 page_load 中重新绑定，它将被重置为列表中的第一个值。

您通常可以通过使用以下方法来避免这种情况

**页面加载：**

```
If Not Page.IsPostback() Then
    ''//Bind controls here
End If 
```

如果不是这样，请详细说明您如何绑定和使用这些控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T03:56:32.107

不，我没有在 page_Load 中绑定它。仅当第三个下拉列表 selectedvalue 更改时，下拉列表才会绑定。

# language-agnostic - 何时使用和不使用每种开发范式？

> ID：464022
> 
> 赞同：7
> 
> 时间：2009-01-21T03:46:51.313
> 
> 标签：language-agnostic, methodology, heuristics

鉴于开发的各种有条不紊的方法，我们是否可以一起得出一些启发式方法，哪些方法在什么情况下是合适的，例如

*   案例驱动开发
*   模型驱动开发
*   行为驱动的发展
*   测试驱动开发
*   Rational 统一过程
*   杰克逊结构化设计
*   等人

没有任何方法太老、太专业或“不存在”；-)

请每个答案仅列出一种方法，并包括最合适和最不合适的情况。例如：

* * *

# 方法

黑客攻击

# 最合适的

*   单独编写无关紧要的事情时
*   在尝试弄清楚某些事情是如何*真正*起作用时，而不是：
    *   你认为它是如何工作的
    *   医生说它有效
    *   谷歌说它有效
    *   它应该工作

# 最不合适

*   编写生产代码时
*   在团队环境中工作时

* * *

注意：寻找每种方法的细节，而不是一般建议。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-21T08:45:13.503

使用适合您的团队想要的工作方式并获得最佳结果的方法。示例：如果您的团队充满了存储过程、面向 SQL 的表思考者，那么您不应该使用 o/r 映射器，因为这完全不符合团队的思考/工作方式。

最重要的是：获得优秀的软件工程师。没有什么比专业的优秀软件工程师更重要的了。拥有优秀的软件工程师，您可以使用任何方法并获得良好的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T12:15:22.723

无论您选择什么，请确保您定期质疑您的方法并改进它。

# .net - 到 DataGridView 标题文本的复杂数据绑定

> ID：464027
> 
> 赞同：0
> 
> 时间：2009-01-21T03:49:54.693
> 
> 标签：.net, winforms, data-binding, datagridview

有没有办法将复杂的数据绑定到列的标题文本？还是手动设置值并从源侦听更改事件的唯一方法？

为了记录，我都试过了

```
MyDataGrid.DataBindings.Add("Columns[<columnIndex>].HeaderText",MySource,"MyProperty"); 
```

和

```
MyDataGrid.DataBindings.Add("Columns[\"ColumnName\"].HeaderText",MySource,"MyProperty"); 
```

无济于事，也`DataGridViewColumn`没有`DataGridViewColumnHeaderCell`财产`DataBindings`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T08:13:09.357

不，列标题不支持数据绑定，因为据了解，此元数据将（大部分）是静态的。

在这种情况下，我会按照您的建议手动执行（从属性读取并订阅事件以更新列标题）。

对于更复杂的需求（仅出于完整性考虑），如果您编写自己的实现，您可以采取更多控制，或者或甚至更好地`PropertyDescriptor`公开您引发类型事件的实现；但是，其中任何一项都是**大量**的工作，仅仅因为您的建议，这根本不值得。`TypeDescriptionProvider``ITypedList``IBindingList``ListChanged``ListChangedType.PropertyDescriptorChanged`

 **# testing - 如何测试一堆 n 个元素？

> ID：464031
> 
> 赞同：0
> 
> 时间：2009-01-21T03:54:08.287
> 
> 标签：testing

这似乎是一个愚蠢的问题，但我真的很喜欢你的评论，并想验证我的测试人员的想法。

```
I can think of following test cases:
1) Pop element from empty stack should return error
2) Push n+1 elements in stack should return error during insertion of n+1th element
3) validate empty,full and top functions of stack.
4) if stack is used in multithreaded environment , make sure it is synchronized.
5) validate stack functionality: 
    push element (x)
    pop element: it should return x 
```

评论？

如果在面试中问这个问题，可能的答案是什么？我的回答是否足够有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T04:04:49.593

我认为你已经涵盖了所有内容，除了可能检查 3)`n`之前推送的元素是你所期望的。这将捕获错误的边界条件检查，即仅在写入新元素后才检查堆栈是否已满。

此外，我会对您的测试用例进行不同的分组，并为每个测试用例测试 top、pop、push、empty、full：

1.  空栈
2.  与一个元素堆叠*
3.  与一些元素堆叠，可能调用 pop/push 两次或更频繁
4.  堆栈几乎满（n-1 个元素）*
5.  全栈

*不是必需的，但可能是极端情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T04:00:27.213

在我看来很好。只需确保在验证功能时，确保多个项目以正确的顺序返回，top 在每次弹出和推送后正常工作，并且在弹出最后一个元素后正确报告为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T04:01:40.723

我还将数字 101 推到 100+n 然后将它们全部弹出以确保它们以相反的顺序脱落（将捕获排序问题，例如“有时弹出将获得第二个元素而不是第一个元素”）。

以下序列应该彻底测试除多线程需求之外的所有需求：

*   空给真。
*   完全给出错误。
*   pop 给出错误。
*   top 给出错误（我假设这是一个 peek 操作）。
*   对于 n = 101 到 100+sz-1：
    *   推 n 作品。
    *   顶部给出 n。
    *   空给出假。
    *   完全给出错误。
*   推 100+sz 作品。
*   顶部给出 100+sz。
*   空给出假。
*   完全给出真实的。
*   推 99 给出错误。
*   顶部给出 100+sz。
*   空给出假。
*   完全给出真实的。
*   对于 n = 100+sz 到 102：
    *   pop 给出 n。
    *   顶部给出 n - 1。
    *   空给出假。
    *   完全给出错误。
*   pop 给出 101。
*   顶部给出错误。
*   空给真。
*   完全给出错误。
*   pop 给出错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T04:01:51.470

我会增强 (5) 以阅读：推送 N 个不同的元素，弹出 N 次并确保以相反的顺序检索相同的元素

检查排序列表、反向排序列表和未排序列表中的元素是否包含此词也是谨慎的做法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-21T04:05:30.917

你想对此感到非常神经质吗？确认数据结构的性能总是很有趣的。堆栈应该具有​​恒定的性能。因此，对于 [0,n-1) 中的每个 k，您可以推送 k 个元素，然后将 (k+1)st 个元素推送和弹出 1e8 次，并确保时间是可比的。我可以想象几个脑死的实现，其中元素 n-1 的推送和弹出时间是元素 0 的 n 倍。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-21T04:08:54.343

如果除了 push 和 pop 之外还有其他方法（例如[length 和 top](http://en.wikipedia.org/wiki/Stack_(data_structure))），也请测试它们。

对于顶部，测试：

*   空堆栈（错误）
*   全栈（第 n 个元素）
*   重复调用（应该返回与未删除元素相同的值）

对于长度，测试：

*   空栈
*   全栈
*   推后行为（加一）
*   post pop（减一）
*   行为后置顶（无变化）
*   在空堆栈上发布弹出（零）
*   后推全栈 (n)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-21T04:10:40.250

多线程：最好编写一个测试，其中至少有 3 个线程同时敲击数据结构。并确保您在多处理器机器上运行它，这样您才能获得真正的并发性，而不仅仅是时间切片。

并且不要忘记以下情况：

```
if( !stack.Empty )
{
    // oops, another thread emptied the stack and now this call will throw an error:
    stack.Pop();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-21T04:12:57.237

好的，从评论中

堆栈的测试可以分为

```
Functionality testing
Performance testing
Security testing: if data pushed onto stack are strings , then we may need to check for buffer overflows 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-11-13T16:36:15.793

我认为还有一件最简单的事情值得人们关注。Stack 是一个 LIFO 数据结构，所以如果你用给定“a,b,c,d.......w”的项目序列填充（随后推送）给定的堆栈，你应该得到相反的序列（w ,....,d,c,b,a) 当您弹出堆栈的所有元素时。有人应该检查堆栈的主要属性是否正确。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-25T05:04:40.453

如果您正在谈论编写测试用例来确定堆栈是否为空，那么就是这样

```
public class LinkStackTest {
protected StackInterface<String> stack;
protected int size;
@Before public void setUp() {
stack = new LinkStack<String>();
}
@Test public void empty() {
assertTrue(stack.isEmpty());
assertEquals(0, stack.size());
} 
```

# iphone - 自定义 MPMoviePlayerController

> ID：464036
> 
> 赞同：2
> 
> 时间：2009-01-21T03:57:45.957
> 
> 标签：iphone, cocoa-touch, mpmovieplayercontroller

我想自定义一个 MPMoviePlayerController 来为视频播放器添加更多控制。我可以添加额外的控件，但顶部缓冲控件被删除。我怎样才能让它可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:40:02.933

我对您的问题的理解是您希望在 MPMoviePlayerController 上有一些额外的控件。现在我过去已经这样做了（在 OS 4.3 中并且确保它也可以在最新版本中完成）并且在某种程度上它是一种痛苦。我是如何通过挖掘（向下循环层次结构）进入播放器的子视图和记录（NSLog）所需的组件并添加或隐藏所需的视图....我还设法确定缓冲条何时变暗，从而使用 NSTimer 相应地隐藏我的自定义按钮。如果这一切听起来像你想要的......让我知道。我可以发布一些代码..!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T08:25:59.423

您是否尝试过来自 iPhone 参考库的“代码示例”：[https](https://developer.apple.com/iphone/library/samplecode/MoviePlayer_iPhone/index.html) ://developer.apple.com/iphone/library/samplecode/MoviePlayer_iPhone/index.html ？

# python - Python 中如何处理 POST 和 GET 变量？

> ID：464040
> 
> 赞同：142
> 
> 时间：2009-01-21T03:59:03.957
> 
> 标签：python, post, get

在 PHP 中，您可以只`$_POST`用于 POST 和`$_GET`GET（查询字符串）变量。Python中的等价物是什么？

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2009-01-21T11:53:01.473

假设您要发布一个带有以下内容的 html 表单：

```
<input type="text" name="username"> 
```

如果使用[原始 cgi](http://docs.python.org/library/cgi.html)：

```
import cgi
form = cgi.FieldStorage()
print form["username"] 
```

如果使用[Django](http://docs.djangoproject.com/)、[Pylons](http://pylonshq.com/)、[Flask](http://flask.pocoo.org/)或[Pyramid](http://www.pylonsproject.org/projects/pyramid/about)：

```
print request.GET['username'] # for GET form method
print request.POST['username'] # for POST form method 
```

使用[Turbogears](http://turbogears.org/)，[Cherrypy](http://www.cherrypy.org/)：

```
from cherrypy import request
print request.params['username'] 
```

[网络.py](http://webpy.org)：

```
form = web.input()
print form.username 
```

[韦克泽格](http://werkzeug.pocoo.org/)：

```
print request.form['username'] 
```

如果使用 Cherrypy 或 Turbogears，您还可以定义处理函数，直接采用参数：

```
def index(self, username):
    print username 
```

[谷歌应用引擎](https://developers.google.com/appengine/docs/python/gettingstartedpython27/introduction)：

```
class SomeHandler(webapp2.RequestHandler):
    def post(self):
        name = self.request.get('username') # this will get the value from the field named username
        self.response.write(name) # this will write on the document 
```

所以你真的必须选择其中一个框架。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2015-01-11T23:26:51.277

我知道这是一个老问题。然而令人惊讶的是，没有给出好的答案。

首先，这个问题是完全有效的，没有提到框架。CONTEXT 是 PHP 语言等价物。尽管在 Python 中有很多方法可以获取查询字符串参数，但框架变量只是方便地填充。在 PHP 中，`$_GET`也是`$_POST`方便变量。它们分别从 QUERY_URI 和 php://input 解析。

在 Python 中，这些函数是`os.getenv('QUERY_STRING')`和`sys.stdin.read()`。记得导入 os 和 sys 模块。

我们必须小心这里的“CGI”一词，尤其是在与 Web 服务器交互时谈论两种语言及其共性时。1、CGI作为一种协议，定义了HTTP协议中的数据传输机制。2\. Python 可以配置为在 Apache 中作为 CGI 脚本运行。3\. Python中的CGI模块提供了一些便利功能。

由于 HTTP 协议与语言无关，并且 Apache 的 CGI 扩展也与语言无关，因此获取 GET 和 POST 参数应该只承受​​语言之间的语法差异。

这是填充 GET 字典的 Python 例程：

```
GET={}
args=os.getenv("QUERY_STRING").split('&')

for arg in args: 
    t=arg.split('=')
    if len(t)>1: k,v=arg.split('='); GET[k]=v 
```

对于 POST：

```
POST={}
args=sys.stdin.read().split('&')

for arg in args: 
    t=arg.split('=')
    if len(t)>1: k, v=arg.split('='); POST[k]=v 
```

您现在可以访问以下字段：

```
print GET.get('user_id')
print POST.get('user_name') 
```

我还必须指出 CGI 模块不能很好地工作。考虑这个 HTTP 请求：

```
POST / test.py?user_id=6

user_name=Bob&age=30 
```

使用`CGI.FieldStorage().getvalue('user_id')`会导致空指针异常，因为模块盲目地检查 POST 数据，而忽略了 POST 请求也可以携带 GET 参数的事实。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-07-05T22:15:06.777

我发现 nosklo 的答案非常广泛和有用！对于像我这样可能会发现直接访问原始请求数据也很有用的人，我想添加这样做的方法：

```
import os, sys

# the query string, which contains the raw GET data
# (For example, for http://example.com/myscript.py?a=b&c=d&e
# this is "a=b&c=d&e")
os.getenv("QUERY_STRING")

# the raw POST data
sys.stdin.read() 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2009-01-21T04:31:44.313

它们存储在 CGI 字段存储对象中。

```
import cgi
form = cgi.FieldStorage()

print "The user entered %s" % form.getvalue("uservalue") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-21T04:11:28.347

这在一定程度上取决于您将什么用作 CGI 框架，但它们可以在程序可访问的字典中找到。我会向您指出文档，但我现在还没有进入 python.org。但是[这个关于 mail.python.org 的注释会给你一个第一个指针](http://mail.python.org/pipermail/python-list/2008-April/485712.html)。查看 CGI 和 URLLIB Python 库了解更多信息。

**更新**

好吧，那个链接坏了。这是[基本的 wsgi 参考](https://docs.python.org/2/library/wsgiref.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-21T04:30:44.860

Python 只是一种语言，要获取 GET 和 POST 数据，您需要一个用 Python 编写的 Web 框架或工具包。正如查理指出的那样，Django 是其中之一，cgi 和 urllib 标准模块是其他的。还可以使用 Turbogears、Pylons、CherryPy、web.py、mod_python、fastcgi 等。

在 Django 中，您的视图函数接收具有 request.GET 和 request.POST 的请求参数。其他框架会以不同的方式做这件事。

# jquery - jquery ui datepicker 在 IE 6.0 中无法正确呈现（显示）

> ID：464041
> 
> 赞同：2
> 
> 时间：2009-01-21T03:59:22.583
> 
> 标签：jquery, jquery-ui, internet-explorer, datepicker, jquery-ui-datepicker

`jquery ui datepicker`我的in有显示问题`IE 6.0`。

IE 6.0 中不显示日期选择器弹出框的边框，弹出窗口的背景为白色（应为灰色），并且后退和前进导航图标显示颜色错误。FF 和更高版本的 IE 显示预期的正确结果。

我在这里错过了一些非常愚蠢的东西吗？

非常感谢您的帮助！马库斯

日期选择器

```
<script type="text/javascript" src="../30_JS/jquery.js"></script>
<script type="text/javascript" src="../30_JS/ui/i18n/ui.datepicker-de.js"></script>
<script type="text/javascript" src="../30_JS/jquery-ui-personalized-1.6rc4.js"></script>

<link rel="stylesheet" type="text/css" href="../00_CSS/00_jquery_theme/ui.all.css">

<script type="text/javascript">
    $(function() {
        $('#date-pick-occupied-1').datepicker({ showOn: "button",
            buttonImage: "../20_IMG/icon_date_picker.png",
            dateFormat: 'dd.mm.yy',
            buttonImageOnly: true });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T05:14:54.520

对于它的价值，你可以看看风格。Datepicker 应该包含“#ui-datepicker-div”下的所有内容。如果您没有得到更好的答案，请调整样式并添加条件注释并包含样式。

老实说，出于宗教观点，我什至不测试IE6的兼容性，所以我不知道它在IE6中是否好用。我会尝试使用默认设置运行 datepicker，如果它仍然不起作用，我会开始修剪和修改 CSS。

# database-design - 您是否应该在数据库级别和应用程序级别强制执行约束？

> ID：464042
> 
> 赞同：61
> 
> 时间：2009-01-21T03:59:54.750
> 
> 标签：database-design

我一直在阅读 Dan Chak 的“Enterprise Rails”一书，它让我思考：您是否认为您应该在数据库级别和应用程序级别都有数据约束？或者您是否觉得与 Ruby on Rails 之类的固执己见的框架相似——数据库只是数据的“愚蠢存储库”，所有检查都应该在你的应用程序中完成（我不想在这里单独列出 RoR——我是我自己是 Rails 的忠实粉丝，但我不同意它对数据库的处理方式）？

就个人而言，我认为您应该同时拥有它们，以确保您的数据库和应用程序得到很好的保护。我的意思是你应该使用非空约束，如果已知的话，给你的字段一个长度（而不是将它们全部留在*nvarchar(255)* ），在你的数据库上有诸如**外键**、**检查约束**和**触发器**之类的东西，然后还通过应用程序中的业务逻辑规则强制执行此操作。IMO 这使您的应用程序通过其用户界面变得健壮，并且还可以防止可能直接访问数据库的人。

我最常看到的反论点是它需要相当于重复逻辑的东西。一次在数据库级别，一次在应用程序级别——假设您有一个检查约束来验证是否输入了产品的 SKU（即它的长度大于零）。

您现在还需要在业务逻辑中包含验证方法，以确保用户输入的值的长度大于零，并且还可能需要一些客户端 Javascript 在用户键入数据时捕获错误。

我个人并不认为这是一件坏事——是的，你有一些重复的逻辑，但最终的结果是“数据库作为堡垒”的心态，因为如果你考虑一下，你的数据是应用程序中最重要的部分；毕竟，如果数据很容易被破坏和破坏，那么您闪亮的新 Web 2.0 应用程序有什么用呢？

您对此有何看法？数据库应该是像诺克斯堡这样的坚不可摧的堡垒，还是一个由激光守卫的开放式保险箱？换句话说，您应该牺牲一些重复的逻辑来确保数据模型的安全，还是将所有内容留给您的应用程序并仅使用数据库来存储数据？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-01-21T04:53:45.517

简而言之：**数据库应该强制执行约束。**

为什么 ：

1.  **更轻松。**例如。要在特定数据列上设置约束，只有一个地方可以设置它：列本身。数据可能来自各种来源，但检查是在数据最终搁置的地方进行的。
2.  **正直。**数据库应该对其托管的数据负责。不一致的数据库与没有数据库一样好。
3.  **灵活性。**新的 UI 开发环境来得太频繁了。如果数据库主动说它会处理约束，那么前端开发和功能测试就更容易了。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-01-21T04:17:33.937

是的，如果您想限制数据库中的内容。这些层应该尽可能地相互区分，并且您的数据库不应该依赖另一个层来确保它遵循规则。

无法保证有缺陷（或恶意）的“业务逻辑”层不会将有害数据插入您的表中。当然，如果您可以信任其他层，则可能不需要它。但是我在一家大型机商店工作，那里的 DBA 总是不得不解决由年轻的 Java 鞭打者在没有足够（任何？）测试的情况下将他们的错误代码推出生产环境引起的问题 :-)。

在不同开发区域之间共享的数据库表（这就是我们的全部）应该*始终*保护自己免受错误数据的影响。当 App A 将不可靠的数据放入 App B 使用的表中时，并不是 App A 的开发人员在承受压力，而是 DBA。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-01-21T04:29:08.467

如果您遵循 Jeff Atwood 学校的数据库只是一个愚蠢的数据存储和检索系统，那么您会将所有验证放在应用程序层中。

但是，我发现应用程序就像小孩子一样。不加检查，他们会把房间里的所有东西都扔掉。这将由父母来收拾烂摊子。在这种情况下，将由 DBA 进行清理。

但是，我认为您需要小心使用每个数据库数据完整性功能，因为它就在那里。使用外键约束和触发器重载数据库可能会产生比您想象的更多的问题。我倾向于只在关系非常密切的表上使用外键，例如表头/明细表对。如果您开始在任何地方添加外键，您最终可能会得到一个难以想象的数据库。

我很少使用触发器。我认为他们使数据库非常不透明。您发出一个简单的更新/插入/删除命令，可能会发生奇怪的事情。我想有两个地方是不可避免的：

1.  当您没有写入数据库的应用程序的源代码并且您需要修改行为时。触发器是您唯一的选择。

2.  如果您在视图上执行 CRUD 操作。插入/更新/删除操作必须使用触发器。

我倾向于在应用程序中执行基本验证。通过这种方式，用户可以立即得到反馈，指出出现了问题。需要查找相关表的复杂验证可能最好在数据库中完成（以及应用程序所做的简单验证）。我认为，如果不使用复杂的锁定策略，在应用程序级别几乎不可能保证某些形式的验证。

如果您有多个应用程序，可能在不同平台上以不同语言编写，那么将更多验证放入数据库层的情况会得到加强。由不同程序员编写的两个或多个应用程序执行相同验证的可能性相当小。最好在一个地方进行。

这个世界的 Jeff Atwoods 会建议您编写一个所有应用程序都用来与之通信的 Web 服务。Web 服务执行数据验证。这样做可以使数据库保持为哑存储容器，从而使您能够切换数据库引擎。实际上，您很少更改数据库引擎（除非您开始使用 Microsoft Access！）。如果您编写 Web 服务纯粹是为了集中您的数据验证，那么我认为您太过分了。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2009-01-21T04:13:58.780

如果您确定永远不会有另一个客户端应用程序，那么您可以将数据库视为一个简单的存储。但是，如果您将拥有多个客户端应用程序，显然您将不得不在所有客户端应用程序中复制约束，这是一个坏主意。请记住，其他客户端包括开发人员工具。

此外，通过将数据库用作“哑存储库”，您很可能最终会得到一个效率较低的应用程序。数据库可以比您的应用程序更有效地做很多事情。为什么不利用它呢？

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-01-21T04:35:01.187

通常总会有一些重复，并且数据库不仅仅是愚蠢的存储库。

### D b

数据库确保数据级别的完整性。外键约束、非空约束和大小约束都基本被数据库覆盖。

你不能在数据库中做所有事情，但你可以做很多事情。保护数据。

### 业务层

向上移动一个级别，您就有了业务逻辑。通常这是您与其他应用程序（Web 服务、您自己的 UI 等）的集成点。这里将业务逻辑编码到应用程序中。例如，如果产品的结束日期为 x，那么如果 y 有不同的结束日期，它就不会出现在 y 中。

很难在数据库中描述这种规则，所以你不要。但是你的业务逻辑层仍然会拦截它知道是无效的东西。例如，如果描述字段不允许为空，则业务逻辑不应该将其发送到数据库。无论如何它都会出错，但是您会尝试在已知错误的地方拦截它们。

也很难在数据库中表达其他“规则”，例如“如果新用户来自阿肯色州，他们的有效期为 1 年，否则为 2 年，除非他们有 3 个孩子，其中一个名叫 Barry”。我们可以嘲笑这个例子，但是一个经验丰富的程序员会告诉你，业务逻辑是最大的矛盾之一。

### 用户界面

向上移动到 UI，UI 还定期在屏幕中编码业务逻辑。表单和其他页面通常会以无效状态存在，至少大部分时间了解规则是 UI 的工作。希望 UI 将逻辑推迟到业务层，但业务层不知道字段 1 是截止日期，字段 2 是描述。

如果用户已经选择了小部件 Y，则 UI 知道使用 X 搜索产品。UI 知道需要描述，并且项目计数 > 0 且 < 100（在这些示例中，一个好的 UI 将依赖于业务层告诉它，例如，最小值和最大值，但 UI 仍然知道关系）

在 Web UI 中，我们还添加了再次复制服务器代码中的逻辑的客户端脚本。我们使用客户端脚本来获得更好的用户体验，但最终不要相信来自客户端的任何东西（可以关闭脚本，手动操作表单字段等）

* * *

所以你可以看到逻辑会重复。您尝试尽可能地减少重复，但实际上，考虑到非平凡的程序，这几乎是不可能的。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-01-21T04:16:47.493

我认为您应该不惜一切代价尝试保护您的数据。没有什么比尝试报告由于应用程序有错误而具有不良数据的应用程序更糟糕的了。现在这是什么意思？

你应该通过 FK 来加强你的关系，没有理由不这样做。您应该尽量避免使用空值，并且仅在适当的空值时使用它们。不过，我确实认为有一条细线。

您是否应该解析电话号码以确保其格式正确？可能不会，但话又说回来，您可能应该将电话号码存储在没有格式问题的模式中。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-01-21T06:15:43.510

如果您没有在数据库中强制执行至少基本的完整性，则在某些时候无效数据会进入。可能来自应用程序。错误，可能来自某人拉起 SQL 控制台，无论如何。然后你会发现，当不可能的事情（“所有 B 记录都必须有 A 记录！你的意思是它不存在是什么意思？”）发生时，你的应用程序有有趣的失败模式。

只有当应用程序是唯一会触及该数据库的东西时，才能在应用程序中强制执行完整性。即便如此，您最好小心应用程序错误，因为应用程序比架构大得多，这更容易。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-01-21T10:57:12.630

为了提供一个稍微不同的观点，我认为这取决于上下文。

首先，多年来，我已经从 100% 确信在 DBMS 中实现约束转变为试图完全避免它：我希望我的所有业务逻辑都在同一层上。

其次，我在 Rails 上做了很多工作，而 ActiveRecord 迁移不允许在字段大小和 NULL_ness 之外定义太多的 db-resident 约束。

如果您正在构建一个新应用程序，其中包含一个完全专用于您的应用程序的新数据库，那么您可以在应用程序代码中强制执行您的约束作为业务逻辑的一部分。这就是 Rails 喜欢的工作方式，而且它似乎工作得很好。

如果您要针对在数据库约束中实现业务规则的遗留数据库构建一个新应用程序，那么我建议您继续这样做，并在业务层中接受一些重复的验证规则。最好在尝试将数据应用到数据库之前检查数据是否有效。

如果您正在构建一个新的应用程序/数据库，并期望其他应用程序将访问数据，那么该方法将取决于如何构建这些其他应用程序。同样，在 Rails 中，您可能应该寻找共享模型的方法，在这种情况下，该层就足够了。如果你不能拒绝其他实现方式直接访问你的数据，那么你又回到了重复。我的偏好是尝试 - 非常努力地 - 拒绝对这些应用程序的直接 db 访问，并努力通过（希望是 RESTful）Web 服务为它们提供服务，以便您可以在业务逻辑级别管理数据完整性。

如果第三方（内部或其他）应用程序对您的架构具有 DDL 访问权限，那么就不要再担心这个问题了——您已经失去了对数据的控制，而且您搞砸了！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-21T05:09:05.780

我个人的偏好是在数据库层强制执行基本验证，然后使用自省技术将这些约束作为默认值提升到应用程序层（约定优于配置）。如果我在表单或类似的表单中有一些不寻常的用户交互，那么我将使用我需要的任何新行为覆盖我从数据库获得的默认值。这有助于我在数据库层保持最基本的验证主要是 DRY-ly，而我在应用程序层进行更复杂的验证（即电话号码格式）。

我可以对电话号码之类的东西进行检查约束，但我发现检查约束是一种困难且令人沮丧的方式来强制执行格式。

如果我有一个应用程序需要从第二个来源接收输入（即它同时具有 Web 界面和桌面客户端），那么我会尝试让第二个界面通过第一个界面工作（通过 Web 服务提交桌面数据）例如）或者如果失败了，那么除了在应用程序层进行验证之外，我还会在数据库中使用检查约束。

首先，我希望尽可能地保持数据的完整性，因为不良数据将不可避免地对应用程序造成严重破坏——此外（实际上同样重要）我希望应用程序能够处理用户提供的信息的验证.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-21T05:12:37.053

从 OOP 的角度来看，数据库就像 Object/Actor 一样，在更大的系统中，它应该对自己负责。这包括验证输入的必要需求。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-01-21T09:20:30.533

两者都是。我在最后一个地方发现了这个。我们有带有 sybase 数据库的旧式 delphi 系统。新系统是 .NET 和 Sql 服务器。一位特定员工单独负责将 sybase 数据库转换为 sql server 数据库，以供需要升级到新 .NET 系统的客户使用。他从未使用过 .NET 应用程序代码，因此从未在应用程序级别看到数据约束。

因此，他不得不依赖传递给他的信息和数据库级别的数据约束。如果约束在数据库级别不正确或缺失，则会导致数据错误并来自客户的支持电话。这种情况发生的次数超出了我们的预期，因为数据约束并不总是从应用程序级别复制到数据库级别。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-21T04:41:17.973

最好在数据库级别强制执行这些约束，因为它们的性能更高（在 C 中实现）。可以在另一层上复制验证，因为它提供了更多用户友好的错误和验证消息。

这不是 XOR 命题，最好在安全方面犯错，对数据库执行这些约束将使您的系统更[耐用](http://en.wikipedia.org/wiki/ACID)。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-01-24T13:14:24.303

这取决于。

如果您正在构建一个要嵌入到您正在构建的单个应用程序中的数据库，您可以选择将数据验证放入 DBMS 或应用程序或两者中。几乎所有由数据库新手、经验丰富的程序员构建的数据库都属于这一类。在这种情况下，其他一些回复会回答您的问题。

但是，如果您正在构建一个旨在存储从多个应用程序接收到的数据的数据库，并且其中一些应用程序的编程超出了您的控制范围，那么您必须构建 DBMS 以进行防御，并且不允许来自错误的数据一个损坏的应用程序会感染您提供给其他应用程序和交互式用户的数据。你无法捕捉到所有的错误，但你可以捕捉到很多错误。

至少，您应该设计您的表，使它们至少有一个可能的主键（可能的主键称为候选键）。您应该从候选键中选择一个主键，并将其声明为主键约束。这强制实体完整性。

此外，您应该为每个外键声明一个“引用”约束。这会强制执行参照完整性。使用一个不错的 DBMS，即使外键是可选的，也应该能够强制引用完整性，换句话说，它可能是 NULL。NULL 当然不指代任何东西。

将这两种验证转移到应用程序是没有意义的。无论如何，该应用程序必须往返于数据库以检测违反规则的情况。

在我看来，业务逻辑不应该在数据库中的想法是对数据库的全部含义的误解。同样，如果您的数据库嵌入在单个应用程序中，那么适合您自己。

至于禁止缺失值 (NULLS) 的验证规则，在应用程序和数据库中实现它们并没有什么坏处。在许多情况下，这是正确的做法。与范围检查类似。

对于非常大的项目，您需要一个单独的文档来概述数据的所有业务规则。该文档应说明规则在何处执行，在数据库中、在应用程序中或两者中。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-09-20T19:20:54.060

同样，在这*两个*层面上。即使是三点。

数据库级别的验证是长期数据完整性所必需的，而且只是为了安全。但是在将数据发送到服务器之前，我们需要在客户端额外验证表单中的数据。

我们可以使用 DB 中的约束来验证所有内容，但验证错误和警告消息必须本地化并以用户为中心，而不是以 API 为中心（带有错误代码）。

“拒绝访问”而不是“找不到记录”也可以解释更多。

所有三个级别都需要进行细微不同的验证。客户端、API 和 DB： - 客户端，因为它对于出色的 UX 和减少服务器负载是必需的。- DB 是为了保持数据受限。- API（服务器端）验证是为了让 API 用户可以区分消息。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2009-03-24T11:01:42.163

我同意这个问题的答案取决于环境。

在我当前的环境中，我们的应用程序只有两个开发人员和不到一千名用户。如果您可以确保您的编程实践包括在应用程序层中实现业务逻辑的要求，那么您就可以成功地处理数据库之外的约束。

如果您的应用程序需要很好地扩展并且最终将由大量开发人员维护并被无数用户使用，那么可能在数据库中实施数据约束可以提高效率并消除因更改而造成的潜在灾难应用层。

# asp.net - 如何解决无法将代码块放入皮肤文件的事实？

> ID：464052
> 
> 赞同：1
> 
> 时间：2009-01-21T04:05:38.343
> 
> 标签：asp.net, eval, detailsview, skinning

我有一个我正在写的 asp.net 页面，我对这个问题感到困惑。我有 3 个与 LINQ 绑定的 DetailView。装订效果很好。现在，我有一个皮肤文件，我想用它来布置 DV，它看起来像这样。

```
<asp:DetailsView SkinID="blogViews" runat="server" Width="100%" CssClass="post" 
AutoGenerateRows="False" GridLines="None" FooterStyle-CssClass="comments" FooterStyle-Height="50px">
<Fields>
    <asp:BoundField DataField="blog_title" ShowHeader="False" ItemStyle-CssClass="title" ItemStyle-Font-Size="X-Large"/>
    <asp:BoundField DataField="blog_content" HtmlEncode="False" ShowHeader="False" ItemStyle-CssClass="entry" />
</Fields> 
```

现在的问题是，我需要添加一个 templateField 来显示一些数据，并且我需要它在标题和内容字段之间。通过使用模板字段，我需要执行以下操作：

```
Eval("blog_datetime") 
```

和其他一些人。不幸的是，皮肤文件不允许代码块。我无法将模板字段添加到 aspx 页面本身，因为它将 templateField 放在 DetailsView 的底部。我想我要问的是：

如何解决无法将代码块放入皮肤文件的事实？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T04:49:55.587

我想知道您是否最好创建一个自定义控件来布置这些详细信息视图？

皮肤文件用于修改样式而不是行为和绑定。

自定义控件将允许您完成所有这些操作并获得三个数据视图共享布局的好处。

# scheme - 在 Scheme 中分配原子列表

> ID：464057
> 
> 赞同：2
> 
> 时间：2009-01-21T04:10:36.477
> 
> 标签：scheme, racket

我正在尝试在 Macintosh 上使用 DrScheme 从“The Little Schemer”一书中学习 Scheme。它以“l 的汽车是什么，其中 l 是论点 (abc)？”之类的东西开头。

我知道这个问题的答案是，但我实际上无法弄清楚在 Dr Scheme 中输入什么来“跟随”。关于如何分配给 l 的一个简单想法，例如 > (def l ('a 'b 'c))

给我错误：“函数调用：在左括号后需要一个定义的名称或原始操作名称，但发现了别的东西”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-21T04:16:53.797

定义一些东西：

```
(define <name> <value>) 
```

所以要定义 l：

```
(define l '(a b c)) 
```

这定义`l`为 list `(a b c)`。单引号引用它后面的任何内容，无论是符号还是列表，这意味着它不会被评估而是按原样读取。但是，您*不会引用您设置的名称。*值得庆幸的是，这是 Scheme 中极少数存在这种不一致的操作之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T04:13:42.133

试试这个：

```
(define l '(a b c)) 
```

在这里，引用适用于整个列表`(a b c)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T04:15:37.823

或者，只需使用

```
(car '(a b c)) 
```

错误告诉你的是：当读者看到一个列表时，它想将列表的第一个元素视为一个函数。这就是`(+ 1 2 3)`工作原理：它调用 hthe 函数`+`。（严格来说，它查看符号`'+`并发现绑定了一个函数，然后调用该函数。）

所以，当你输入

```
(define l ('a 'b 'c)) 
```

它查看内部列表，然后想要找到一个函数。相反，它会找到名为 的符号`a`。由于那里没有功能，因此您会收到错误消息。相反，如果您键入

```
(define l '(a b c)) 
```

您已经通过引用告诉读者，将其视为列表而不试图解释它。

以下是 Mac 上 MIT Scheme 的示例：

```
1 ]=> (define li '(a b c))

;Value: li

1 ]=> (car li)

;Value: a

1 ]=> (car '(a b c ))

;Value: a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T17:21:28.737

非缩写形式

```
(define l '(a b c)) 
```

是

```
(define l (quote (a b c))) 
```

或者在这种情况下甚至是这样：

```
(define l (list 'a 'b 'c)) 
```

如果没有“列表”部分，它显然会尝试执行'a

# asp.net - 如何创建页面实例

> ID：464062
> 
> 赞同：-1
> 
> 时间：2009-01-21T04:12:14.383
> 
> 标签：asp.net

我有一个接口 IPageState，它有一个 ClearState 方法。我想创建一个实现此接口的 asp.net 页面实例并在该实例上调用 ClearState 方法。

任何人都可以帮助我了解如何创建 asp.net 页面的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T04:21:54.177

这实际上与创建任何其他对象的实例没有什么不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T04:30:43.707

我不确定我是否理解这个问题。页面类与任何其他类相同。前任：

```
Public Class ExamplePage : IPageState
{
    private void ClearState()
    {

    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-01-21T19:05:14.190

让我举例说明，

ProducuListing.aspx 和 ProductDetails.aspx 是我网站中的两个页面。我想做类似的事情

```
IPageState pd = new ProductDetails() as IPageState;
pd.ClearState(); 
```

在 ProductListing.aspx 页面中，反之亦然。现在我不能像上面的例子那样对页面类名进行硬编码。所以我会使用的明显解决方案是反射。但是每个页面的程序集都不同，因为我使用的是 vs 2005 网站项目。

我想要一个通用的解决方案，我可以在其中创建网站中任何页面的实例，并检查它是否实现了该接口以及它是否调用了 ClearState 方法。

我希望这能让我的问题更清楚。

就靠你们了！！！！

# big-o - 下界和紧界有什么区别？

> ID：464078
> 
> 赞同：114
> 
> 时间：2009-01-21T04:21:40.993
> 
> 标签：big-o

参考这个[答案](https://stackoverflow.com/questions/3255/big-o-how-do-you-calculate-approximate-it#3368)，什么是 Theta（紧界）？

Omega 是下限，很容易理解，是算法可能花费的最短时间。我们知道 Big-O 是上限，表示算法可能花费的最长时间。但我对Theta一无所知。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2009-01-21T04:26:22.670

*Big O*是上限，而*Omega*是下限。*Theta*需要 Big O 和 Omega，所以这就是为什么它被称为*紧密界限*（它必须同时是上限和下限）。

例如，一个算法`Omega(n log n)`至少需要`n log n`时间，但没有上限。算法采用`Theta(n log n)`是非常优先的，因为它**至少** `n log n`需要(Omega n log n)**且不超过** `n log n`(Big On n log n)。

* * *

## 回答 #2

> 赞同：126
> 
> 时间：2009-01-22T23:32:08.097

*Θ 表示法*（theta 表示法）被称为紧界，因为它比*O 表示法*和*Ω 表示法*（omega 表示法）更精确。

如果我是懒惰的，我可以说对排序数组的二分查找是 O(n ² )、O(n ³ ) 和 O(2 ^n )，并且在每种情况下我在技术上都是正确的。那是因为 O-notation 只指定了一个*上限*，而二分搜索在所有这些函数的上限上都有界，只是不是很接近。这些懒惰的估计是*没有用*的。

*Θ-notation 通过结合*O-notation 和 Ω- notation 解决了这个问题。如果我说二分搜索是 Θ(log n)，那会为您提供更精确的信息。它告诉您算法在给定函数的两侧都有边界*，*因此它永远不会比规定的更快或更慢。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-01-21T04:30:14.953

如果你有 *O(f(n))*的东西，这意味着有*k*，*g(n)*使得*f(n)* ≤ *kg(n)*。

如果你有 *Ω(f(n))*的东西，这意味着有*k*，*g(n)*使得*f(n)* ≥ *kg(n)*。

如果你有一个*O(f(n))* *和* *Ω(f(n))*的东西，那么它就是*Θ(f(n)*。

维基[百科的文章](http://en.wikipedia.org/wiki/Big_O_notation)是不错的，如果有点密集。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-18T16:06:57.020

**渐近上限**意味着给定算法在最长时间内执行，具体取决于输入的数量。

我们以排序算法为例。如果一个数组的所有元素都按降序排列，那么对它们进行排序，运行时间为`O(n)`，显示了上限复杂度。如果数组已经排序，则值为`O(1)`.

通常，`O-notation`用于上限复杂度。

* * *

**渐近紧密界**(c [1] g(n) ≤ f(n) ≤ c [2] g(n)) 显示函数的平均界复杂度，其值介于界限（上限和下限）之间，其中 c [1]和c [2]是常数。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-21T04:45:11.400

短语*最小时间*和*最大时间*在这里有点误导。当我们谈论大 O 符号时，我们感兴趣的不是实际时间，而是当我们的输入大小变大时时间如何增加。这通常是我们谈论的平均或最坏情况时间，而不是*最佳情况*，这通常对解决我们的问题没有意义。

以另一个问题的已接受答案中的数组搜索为例。在大小为 n 的列表中找到特定数字所需的时间平均为 n/2 * some_constant。如果你把它当作一个函数`f(n) = n/2*some_constant`，它的增长速度不会快于`g(n) = n`，在查理给出的意义上。此外，它的增长速度不会比`g(n)`两者都慢。因此，`g(n)`实际上是 Big-O 表示法的上限和下限`f(n)`，所以线性搜索的复杂度*正好是* **n**，这意味着它是 Theta(n)。

在这方面，另一个问题的已接受答案中的解释并不完全正确，它声称 O(n) 是上限，因为对于某些输入，算法可以在恒定时间内运行（这是我上面提到的*最好的情况*，这并不是我们真正想知道的关于运行时间的信息）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-28T20:03:28.353

> 如果我是懒惰的，我可以说对排序数组的二分查找是 O(n2)、O(n3) 和 O(2n)，并且在每种情况下我在技术上都是正确的。

我们可以使用 o-notation（“little-oh”）来表示一个不是渐近紧的上界。big-oh 和 little-oh 都是相似的。但是，big-oh 很可能用于定义渐近紧上界。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-06T15:34:43.087

确切地说，下界或 $\omega $ bfon f(n) 表示渐近小于或等于 f(n) 的函数集，即 U g(n)≤ cf(n) $\for all $`un≥ n ' 对于某些 c, n' $\in $ $\Bbb{N}$

f(n) 的上界或 $\mathit{O}$ 表示渐近大于或等于 f(n) 的函数集，从数学上讲，

$ g(n)\ge cf(n) \for all n\ge n' $ ，对于一些 c,n' $\in $ $\Bbb{N}$。

现在 $\Theta $ 是上面写的两个的交集

> `$\theta $`

就像如果一个算法就像“正是 $\Omega\left( f(n)\right$ ”，那么最好说它是 $\Theta\left(f(n)\right)$ 。

或者，我们也可以说它给`$ \omega $`了我们最低限度的实际速度。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-05-18T07:29:36.293

之间的基本区别

> 块引用

渐近上界和渐近紧密 Asym.upperbound 表示一个给定的算法，它可以根据输入的数量在最长时间内执行，例如，在排序算法中，如果所有数组 (n) 元素都按降序排列，则将其升序将花费 O(n) 的运行时间，这显示了上限复杂度，但如果它们已经排序，那么它将花费 ohm(1)。所以我们通常使用“O”表示法来表示上限复杂度。

不对称。紧密边界显示例如（c1g（n）<=f（n）<=c2g（n））显示紧密边界限制，使得函数具有两个边界（上限和下限）之间的值，给出平均情况。

# java-me - 使用 J2ME 获取基站名称

> ID：464090
> 
> 赞同：0
> 
> 时间：2009-01-21T04:33:26.290
> 
> 标签：java-me

如何使用 J2ME 获取基站名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-21T15:53:20.583

我一般不知道香草 J2ME/MIDP 有什么方法。虽然特定平台可能会提供一些方法。例如，您可以使用 BlackBerry`net.rim.device.api.system.GPRSInfo`和相关的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-03T09:56:51.763

不幸的是，它不是一个标准的实现，它会从一个制造商变为另一个制造商。但是您可以尝试以下代码：

```
String cellID = System.getProperty("com.sonyericsson.net.cellid");  
if (cellID == null)
     cellID = System.getProperty("CellID"); 
```

它适用于大多数索尼爱立信手机和摩托罗拉。如果你运气好，可以选择其他品牌。

# java - finally 块是否总是运行？

> ID：464098
> 
> 赞同：121
> 
> 时间：2009-01-21T04:38:24.283
> 
> 标签：java, finally

是否存在最终可能无法在 java 中运行的情况？谢谢。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2009-01-21T04:42:56.130

来自[Sun 教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)

> 注意：如果在执行 try 或 catch 代码时 JVM 退出，则 finally 块可能不会执行。同样，如果执行 try 或 catch 代码的线程被中断或杀死，即使应用程序作为一个整体继续运行，finally 块也可能不会执行。

我不知道finally块不会执行的任何其他方式......

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2009-01-21T04:41:14.387

[System.exit](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#exit(int))关闭虚拟机。

> 终止当前运行的 Java 虚拟机。该参数用作状态码；按照惯例，非零状态码表示异常终止。
> 
> 该方法调用`exit`类中的方法`Runtime`。此方法永远不会正常返回。

```
 try {
        System.out.println("hello");
        System.exit(0);
    }
    finally {
        System.out.println("bye");
    } // try-finally 
```

“再见”不会在上面的代码中打印出来。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2009-01-21T05:53:28.140

只是为了扩展其他人所说的，任何不会导致诸如 JVM 退出之类的事情都会导致 finally 块。所以下面的方法：

```
public static int Stupid() {
  try {
    return 0;
  }
  finally {
    return 1;
  }
} 
```

会奇怪地编译并返回 1。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-01-21T09:57:22.347

与 System.exit 相关，还有某些类型的灾难性故障，finally 块可能无法执行。如果 JVM 完全耗尽内存，它可能会直接退出而没有捕获或最终发生。

具体来说，我记得一个我们愚蠢地尝试使用的项目

```
catch (OutOfMemoryError oome) {
    // do stuff
} 
```

This didn't work because the JVM had no memory left for executing the catch block.

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-01-21T13:47:40.273

```
try { for (;;); } finally { System.err.println("?"); } 
```

In that case the finally will not execute (unless the deprecated `Thread.stop` is called, or an equivalent, say, through a tools interface).

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2010-04-30T12:45:59.863

The Sun tutorial has been wrongly quoted here in this thread.

Note: If the JVM exits while the try or catch code is being executed, then the finally block **will** not execute. Likewise, if the thread executing the try or catch code is interrupted or killed, the finally block **will** not execute even though the application as a whole continues.

If you look into sun tutorial closely for finally block, it doesn't say "will not execute" but "may not execute" Here is the correct description

> Note: If the JVM exits while the try or catch code is being executed, then the finally block **may** not execute. Likewise, if the thread executing the try or catch code is interrupted or killed, the finally block **may** not execute even though the application as a whole continues.

The apparent reason for this behavior is, call to system.exit() is processed in a runtime system thread which may take time to shutdown the jvm, meanwhile thread scheduler can ask finally to execute. So finally is designed to always execute, but if you are shutting down jvm, it may happen that jvm shuts down prior to finally getting being executed.

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2011-04-20T13:38:04.593

Also if a deadlock/livelock happens inside `try` block.

Here's the code that demonstrates it:

```
public class DeadLocker {
    private static class SampleRunnable implements Runnable {
        private String threadId;
        private Object lock1;
        private Object lock2;

        public SampleRunnable(String threadId, Object lock1, Object lock2) {
            super();
            this.threadId = threadId;
            this.lock1 = lock1;
            this.lock2 = lock2;
        }

        @Override
        public void run() {
            try {
                synchronized (lock1) {
                    System.out.println(threadId + " inside lock1");
                    Thread.sleep(1000);
                    synchronized (lock2) {
                        System.out.println(threadId + " inside lock2");
                    }
                }
            } catch (Exception e) {
            } finally {
                System.out.println("finally");
            }
        }

    }

    public static void main(String[] args) throws Exception {
        Object ob1 = new Object();
        Object ob2 = new Object();
        Thread t1 = new Thread(new SampleRunnable("t1", ob1, ob2));
        Thread t2 = new Thread(new SampleRunnable("t2", ob2, ob1));
        t1.start();
        t2.start();
    }
} 
```

This code produces the following output:

```
t1 inside lock1
t2 inside lock1 
```

and "finally" never gets printed

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2011-09-08T07:32:39.023

If the JVM exits while the try or catch code is being executed, then the finally block may not execute. ([source](http://download.oracle.com/javase/tutorial/essential/exceptions/finally.html))

Normal Shutdown - this occurs either when the last non-daemon thread exits OR when Runtime.exit() ([source](http://geekexplains.blogspot.com/2008/06/jvm-shutdown-jvm-shutdown-sequence.html))

When a thread exits, the JVM performs an inventory of running threads, and if the only threads that are left are daemon threads, it initiates an orderly shutdown. When the JVM halts, any remaining daemon threads are abandoned finally blocks are not executed, stacks are not unwound the JVM just exits. Daemon threads should be used sparingly few processing activities can be safely abandoned at any time with no cleanup. In particular, it is dangerous to use daemon threads for tasks that might perform any sort of I/O. Daemon threads are best saved for "housekeeping" tasks, such as a background thread that periodically removes expired entries from an in-memory cache. ([source](https://rads.stackoverflow.com/amzn/click/com/0321349601))

Last non-daemon thread exits example:

```
public class TestDaemon {
    private static Runnable runnable = new Runnable() {
        @Override
        public void run() {
            try {
                while (true) {
                    System.out.println("Is alive");
                    Thread.sleep(10);
                    // throw new RuntimeException();
                }
            } catch (Throwable t) {
                t.printStackTrace();
            } finally {
                System.out.println("This will never be executed.");
            }
        }
    };

    public static void main(String[] args) throws InterruptedException {
        Thread daemon = new Thread(runnable);
        daemon.setDaemon(true);
        daemon.start();
        Thread.sleep(100);
        // daemon.stop();
        System.out.println("Last non-daemon thread exits.");
    }
} 
```

Output:

```
Is alive
Is alive
Is alive
Is alive
Is alive
Is alive
Is alive
Is alive
Is alive
Is alive
Last non-daemon thread exits.
Is alive
Is alive
Is alive
Is alive
Is alive 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-11-04T16:01:23.580

In following cases, finally block will not be executed :-

*   When `System.exit(0)` is invoked from `try` block.
*   When JVM runs out of memory
*   When your java process is killed forcefully from task mgr or console
*   Deadlock condition in your `try` block
*   When your machine shuts down due power failure

There may also be other fringe cases, where finally block will not be executed.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-09-14T08:58:37.850

There are two ways to stop finally block code execution:
1\. Use System.exit();
2\. If somehow execution control don't reach to try block.
See:

```
public class Main
{
  public static void main (String[]args)
  {
    if(true){
        System.out.println("will exceute");
    }else{
        try{
            System.out.println("result = "+5/0);
        }catch(ArithmeticException e){
          System.out.println("will not exceute");
        }finally{
          System.out.println("will not exceute");  
        }
    }
  }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-23T15:54:14.847

I've come across a very specific case of the finally block not executing related specifically to the play framework.

I was surprised to find that the finally block in this controller action code only got called after an Exception, but never when the call actually succeeded.

```
try {
    InputStream is = getInputStreamMethod();
    renderBinary(is, "out.zip");
catch (Exception e) {
    e.printStackTrace();
} finally {
    cleanUp();
} 
```

Perhaps the thread is terminated or something when renderBinary() is called. I would suspect the same thing happens for other render() calls, but I didn't verify it.

I solved the problem by moving the renderBinary() to after the try/catch. Further investigation revealed that play provides an @Finally annotation to create a method that gets executed after a controller action executes. The caveat here is that this will get called after the execution of ANY action in the controller, so it may not always be a good choice.

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-01-26T10:00:05.710

```
//If ArithmeticException Occur Inner finally would not be executed
class Temp
{
    public static void main(String[] s)
    {
        try
        {
        int x = 10/s.length;
        System.out.println(x);
        try
            {
                int z[] = new int[s.length];
                z[10] = 1000;
            }catch(ArrayIndexOutOfBoundsException e)
            {
                System.out.println(e);
            }
         finally
        {
            System.out.println("Inner finally");
        }
        }
        catch(ArithmeticException e)
        {
            System.out.println(e);
        }
    finally 
    {
        System.out.println("Outer Finally"); 
    }

System.out.println("Remaining Code");   
}
} 
```

# database - 使用 C++ Builder 创建文件名访问数据库的更好方法是什么？

> ID：464108
> 
> 赞同：0
> 
> 时间：2009-01-21T04:46:28.353
> 
> 标签：database, ms-access, c++builder, file-management

晚上的最后一个问题。并为这个完全的菜鸟道歉。

在stackoverflow和google的帮助下，我实现了以下...

```
void __fastcall TForm1::Button1Click(TObject *Sender)
{
 ADOCommand1->CommandText = "drop table pictures purge";
 ADOCommand1->Execute();
 ADOCommand1->CommandText = "create table pictures(id autoincrement, filename TEXT(255), notes text(255), category text(20), rank int, filedate datetime,constraint table1_PK primary key(id));";
 ADOCommand1->Execute();
 AddFiles(Edit1->Text);
}
//---------------------------------------------------------------------------

int AddFiles(AnsiString path, int count)
{
 TSearchRec sr;
 int f,count2=0;
 f = FindFirst(path+"\\*.*", faAnyFile, sr);
 while( !f )
 {
  if(sr.Attr & faDirectory)
  {
   if(sr.Name != "."   &&   sr.Name != "..")
   {
    AnsiString subpath;
    subpath.sprintf("%s%s%s", path, "\\", sr.Name);
    count = AddFiles(subpath,count);
   }
  }
  else
  {
   Form1->ADOCommand1->CommandText = "Insert into pictures (filename) values ('" + StringReplace(path + "\\" + sr.Name, "'", "''", TReplaceFlags()<<rfReplaceAll) + "')";
   Form1->ADOCommand1->Execute();
   ++count;
   ++count2;
   if (count2 > 100)
   {
    count2 = 0;
    Form1->Caption = "Added " + IntToStr(count)+ " Files.";
    Application->ProcessMessages();
   }

  }
  f = FindNext(sr);

 }
 FindClose(sr);
return count;
} 
```

它基本上是遍历给定目录及其子目录，并将每个文件（带有路径）添加到 MS Access 数据库中。

（我是唯一的用户，所以我不太关心安全性）

对于大量文件，此代码非常慢。谁能描述一个更好的方法来做代码正在做的事情，（希望不要让你的答案太复杂。我是这个记住的菜鸟）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T05:17:53.423

代码中的瓶颈很可能是 ADO/Access 数据库层。目录级函数（FindFirst()、FindNext()）相对较快。您可以通过用 cout 语句替换这些调用来验证数据库是否是瓶颈。我的猜测是，将结果输出到控制台时它会运行得更快。

以我的经验，Access 不是高性能数据库，ADO 驱动程序不如本机驱动程序快。我敢打赌，如果您用更严重的数据库替换数据库，您会发现性能有所提高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T07:27:48.420

首先 - 不需要删除/创建表。创建一次，然后在要重置它时调用“从图片中删除”。第二 - 注释掉“Form1->ADOCommand1->Execute();” 看看它有多快。这表明问题是否在保存到数据库中。

如果您打算在未来开发一些严肃的东西，那么我建议您寻找更好的数据库解决方案。（Firebird 嵌入式、MySQL 嵌入式等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T15:00:46.553

对于 MySQL，有[CBuilder 组件](http://www.devart.com/mydac/?gclid=COLf5dP2n5gCFZKV3wodcHJPng) ——非常好用。

# perl - 如何从 Perl Frontier-RPC 调用中获取客户端的 IP 地址？

> ID：464109
> 
> 赞同：1
> 
> 时间：2009-01-21T04:47:12.503
> 
> 标签：perl, xml-rpc

我试图让我的 Perl Frontier XML-RPC 守护进程了解调用者的 IP 地址。我不得不说我是 Perl 的新手，所以也许这很明显。我知道[Frontier::Daemon](http://search.cpan.org/dist/Frontier-Daemon)继承自[IO::Socket::INET](http://search.cpan.org/dist/IO)，它有一个`peeraddr()`方法，但是当守护进程没有将自己的实例传递给 XML-RPC 方法调用时，这对我没有帮助。

这是我的代码大致的样子：

```
 my $server = Frontier::Daemon->new(
        methods => {
                diff => \&diff,
        },
        LocalPort => 8080,
        ReuseAddr => 1,
    );
```

然后在下面：

```
sub diff {
    return $_[0] - $_[1];
}
```

如何从“diff”中获取呼叫者的 IP 地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T21:07:57.267

不幸的是，你不能使用 Frontier 的服务器类来做到这一点。在调用本地过程/方法时，您对实际的套接字连接本身没有任何句柄。

碰巧的是，能够访问这些信息是我最近添加到我的[RPC::XML](http://search.cpan.org/dist/RPC-XML/)包中的服务器类的一个特性。请参阅服务器类文档中的“[如何调用方法](http://search.cpan.org/dist/RPC-XML/lib/RPC/XML/Server.pm#How_Methods_Are_Called)”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T15:30:29.740

我同时运行 Frontier::Daemon 和 Frontier::RPC2（在 Apache 下）。我不知道在使用 Frontier::Daemon 时如何获取客户端 IP，但如果您使用 Frontier::RPC2，那么 Apache 环境变量 $ENV{REMOTE_ADDR} 将包含客户端的 IP 地址。

# linux - 指定配置文件数据位置的任何方式

> ID：464116
> 
> 赞同：15
> 
> 时间：2009-01-21T04:51:53.100
> 
> 标签：linux, gcc, gprof

默认配置文件来自可执行文件，运行并调用该文件`gmon.out`。有没有办法指定一个新的位置？

我在 i386/linux2.6 上使用 gcc 3.4.6

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-21T10:30:35.710

太糟糕了，`GMON_OUT_PREFIX`glibc 中没有记录环境变量。我从网上获得了以下信息并在我的机器上进行了测试。

如果设置环境变量`GMON_OUT_PREFIX`，则输出文件命名为 `${GMON_OUT_PREFIX}.[PID]`，pid 是分析进程的 id。

例如：

```
GMON_OUT_PREFIX=mygmon; gcc -o foo -pg foo.c 
```

gmon out 文件是：`mygmon.12345`，假设 foo 进程 id=12345。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2011-01-25T11:15:25.527

[jscoot](https://stackoverflow.com/users/54060/jscoot)的[解决方案](https://stackoverflow.com/a/464743/694576)对我有用，重要的区别是`GMON_OUT_PREFIX`在**执行**时设置，**而不是**在编译时设置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-03-17T19:50:58.813

上周我遇到了同样的问题，我通过以下方式解决了它。这里的想法是将进程当前目录更改为您想要生成 gmon.out 文件的任何位置。不能以这种方式更改文件名。它允许您更改可以保存文件的位置。

```
#ifdef GPROF
                       /* so we can gprof */
                       if (1) {
                           char tmpdir[32];
                           snprintf(tmpdir, 32, "/tmp/%05d", mypid);
                           mkdir(tmpdir, S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH);
                           chdir(tmpdir);
                       }
#endif 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T06:02:15.800

给 gprof 一个不同的文件名：

```
gprof a.out gprof-foo.out 
```

至于重命名它们，请设置 GMON_OUT_PREFIX 环境变量。我通过 libc 上的好 ol' objdump 找到了这个……当然，libc 文档什么也没说。

# php - PHP 中的 CURL 用法

> ID：464120
> 
> 赞同：1
> 
> 时间：2009-01-21T04:55:03.190
> 
> 标签：php, curl

我对 CURL (PHP) 有疑问。我想使用 CURL 直接登录网站。有没有可能，如果可以，请指导我。

我尝试了以下但它不起作用

```
http://username:password@myurl 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T05:04:06.867

这可能是您正在寻找的：

```
$ch = curl_init("http://myurl");
curl_setopt($ch, CURLOPT_USERPWD, "[username]:[password]");
$output = curl_exec($ch); 
```

[您可以在此处](http://us2.php.net/manual/en/function.curl-setopt.php)找到 CURL 的更多选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T06:22:43.700

praveenjayapal，您是否尝试登录到使用 HTTP 身份验证的站点？或者该站点是否有您填写的某种用户名/密码表格？

在第二种情况下，CURL 可能不是正确的解决方案，因为此类站点通常会在您成功登录后在您的浏览器中存储某种身份验证 cookie。

为了模拟浏览器的行为，您必须发送提交用户名和密码的 POST/GET 请求，然后读取 HTTP 标头中返回的 cookie。（可能有一种方法可以让 CURL 将它们吐出。）一旦你有了 cookie，你就可以继续正常访问该站点，只要你继续发送 cookie。

请注意：许多网站的行为不像我上面描述的那么简单。但是大多数基于 PHP 的站点只是使用 PHP 会话来跟踪用户浏览站点。这意味着您需要“告诉”该站点您属于某个会话。根据网站上 PHP 的配置方式，这可以通过存储和发送`phpsessid`cookie 来完成，或者`phpsessid`作为每个请求中的 GET 参数来完成。

# .net - .Net PostgreSQL 连接字符串

> ID：464131
> 
> 赞同：6
> 
> 时间：2009-01-21T05:03:02.487
> 
> 标签：.net, database, postgresql, connection-string

我在我正在处理的项目中使用 PostgreSQL，其中一个查询超时。我需要增加数据库连接的超时时间，但由于我通过一个复杂的包装器使用我的 DAO 到 Active Record 和 NHibernate，我无法调整命令对象的超时时间 - 所以我希望你可以更改超时时间通过连接字符串。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-21T05:10:37.167

[Npgsql](https://www.npgsql.org/doc/index.html) -native 连接字符串：

```
Server=127.0.0.1;Port=5432;Userid=u;Password=p;Protocol=3;SSL=false;Pooling=false;MinPoolSize=1;MaxPoolSize=20;Timeout=15;SslMode=Disable;Database=test" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-21T05:06:09.267

试试这个：

Provider=PostgreSQL OLE DB Provider;Data Source=myServerAddress;location=myDataBase;User ID=myUsername;password=myPassword;timeout=1000;

只需将明显的部分（myUsername、myServerAddress 等）替换为您的内容即可。

此外，为了您的参考，该站点将为您提供地球上几乎任何数据库的连接字符串模板，以您需要的任何方式使用它：

[http://www.connectionstrings.com](http://www.connectionstrings.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T05:08:47.077

您是否尝试过优化查询？优化是增加超时的最佳选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T05:11:03.937

找到它：CommandTimeout=20;Timeout=15;

# latex - 在 TeX 源代码中嵌入 BBL 文件内容

> ID：464137
> 
> 赞同：2
> 
> 时间：2009-01-21T05:05:41.343
> 
> 标签：latex

我需要将 .bbl 文件中的书目信息嵌入到 .tex 源文件中。根据 Google 的许多地方，这应该像将 .bbl 文件的内容复制到 .tex 文件一样简单，替换 \bibliography{} 命令。

但是，当我这样做时，我收到以下错误：

```
./Witmer.tex:82: Undefined control sequence.
<argument> \@listctr 

l.82 \bibitem{bhole-ner_over_time}

The control sequence at the end of the top line
of your error message was never \def'ed. If you have
misspelled it (e.g., `\hobx'), type `I' and the correct
spelling (e.g., `I\hbox'). Otherwise just continue,
and I'll forget about whatever was undefined.

./source.tex:82: You can't use `\relax' after \the.
<recently read> \c@ 

l.82 \bibitem{bhole-ner_over_time}

I'm forgetting what you said and using zero instead. 
```

我现在不知道问题出在哪里。我包括了 cite 包，当我使用 .bbl 文件时一切都很好。

我正在使用 bibtex 生成 bbl 文件。文件的相关部分：

```
\bibliographystyle{plain}
\begin{thebibliography}{9}
...trimmed for size...

\bibitem{geo-spatialexpressions}
Annette Herskovits.
\newblock {\em Representation and processing of spatial expressions}.
\newblock Lawrence Erlbaum Associates, Inc., Mahwah, NJ, USA, 1998.

\end{thebibliography} 
```

更新：

这是问题和建议的修复：错误基本上意味着参考书目生成代码期望每个 \bibitem 应该有一些参数：

```
\bibitem[\protect\citeauthoryear{Herskovits}{1998}]{geo-spatialexpressions}
Herskovits, A.
\newblock 1998.
\newblock {\em Representation and processing of spatial expressions}.
\newblock Mahwah, NJ, USA: Lawrence Erlbaum Associates, Inc. 
```

我实际上是在尝试使用与 \cite 的定义和参考书目生成相混淆的样式文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T05:33:12.940

你是对的，它应该工作。

我不认为 cite 包会影响这里的任何东西。comp.text.tex 上有一篇[文章](http://groups.google.com/group/comp.text.tex/browse_frm/thread/37d6becd04d5b2a2/1957fc4ebe22cb0e?lnk=gst&q=%5C%40listctr#1957fc4ebe22cb0e)提到了类似的错误，涉及在没有适当参考书目样式的情况下使用 jurabib，但我认为我们需要更多信息才能解决您的问题。

* * *

在您编辑后，我又看了一遍；根据您最初编写的内容，这可以正常工作：

```
\documentclass[12pt]{article}
\usepackage{cite}
\begin{document}
\bibliographystyle{plain}
\begin{thebibliography}{1}
\bibitem{geo-spatialexpressions}
Annette Herskovits.
\newblock {\em Representation and processing of spatial expressions}.
\newblock Lawrence Erlbaum Associates, Inc., Mahwah, NJ, USA, 1998.
\end{thebibliography}
\end{document} 
```

因此强调需要在问题中提供您正在加载的包以及您使用的参考书目样式。

无论如何，你已经设法解决了这个问题，这很好:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T05:20:19.253

.bbl 文件的内容是否被一个

```
\begin{thebibliography}
 ...
\end{thebibliography} 
```

环境？如果您要直接包含参考书目条目，我认为这是必要的。（我总是使用 bibtex，所以我自己对那个环境不是很熟悉）

# fonts - 使用 pdflatex 从 LaTeX Source 将字体嵌入 PDF

> ID：464140
> 
> 赞同：5
> 
> 时间：2009-01-21T05:07:20.073
> 
> 标签：fonts, pdflatex

我需要在我的输出 PDF 中嵌入我在 TeX 文档中使用的字体。我正在使用 pdflatex 进行 TeX 处理，并使用 TextMate 作为我的编辑器。

我找不到任何关于如何在 PDF 文档中嵌入我需要的字体的参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-21T05:35:11.440

从 pdfTex 文档中，

> # 5 设置字体
> 
> pdfTEX 可以使用 Type 1 和 TrueType 字体（在某种程度上也可以使用 OpenType 字体）。字体文件应该可用并嵌入文档中使用的所有字体。可以在 pdfTEX 中使用 METAFONT——生成的字体，但是如果在 Type 1 或 TrueType 格式中可用，强烈建议不要使用这些字体，如果只是因为位图 Type 3 字体在（旧版本）中的渲染效果很差Adobe 阅读器。鉴于所有 Computer Modern 字体的 Type 1 版本都是免费的，并且能够使用标准 PostScript 字体，因此在 pdfTEX 中很少需要使用位图字体。

您可能需要安装 Type 1 Computer Modern 字体。现代 tex-live 有它们。如果您有较旧的 TeX 发行版，则有`lmodern`：

```
\documentclass{article}
\usepackage{lmodern}
\begin{document}

Hello, world.

\end{document} 
```

现在，如果您检查结果文档中的字体，例如`pdffonts`：

```
name                                 type              emb sub uni object ID
------------------------------------ ----------------- --- --- --- ---------
SZVHEC+LMRoman10-Regular             Type 1            yes yes no       4  0 
```

答对了。嵌入类型 1 字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T09:46:36.443

在 mypaper.tex 文件中包含以下行：

```
\usepackage[T1]{fontenc} 
```

使用latex后编译为pdf：

```
dvipdfm -p letter mypaper 
```

我检查了使用 pdffonts，没有更多的 T3 字体。答对了。

# service - 存在哪些基于 IP 对人员进行地理定位的服务？

> ID：464142
> 
> 赞同：7
> 
> 时间：2009-01-21T05:08:55.500
> 
> 标签：service, geolocation

人们使用什么来对个人 IP 进行地理定位以确定他们所在的城市？

我已经尝试过 Google API 的内置功能，但它的地理位置数据库似乎参差不齐。

[http://code.google.com/apis/ajax/documentation/#ClientLocation](http://code.google.com/apis/ajax/documentation/#ClientLocation)

有人使用任何其他服务成功进行地理定位吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-21T05:16:36.017

我见过的最稳定的公司是[MaxMind](http://www.maxmind.com/)。

我的一个朋友正在使用成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-11T10:13:33.037

**hostip.info**提供基于社区的地理定位服务。他们有一个非常干净的用于地理定位 IP 地址查找的 API。他们的数据库中有超过 860 万个条目。

例子：

```
http://api.hostip.info/get_html.php?ip=12.215.42.19&position=true
  Country: UNITED STATES (US)
  City: Sugar Grove, IL
  Latitude: 41.7696
  Longitude: -88.4588 
```

如果你添加只是调用：

```
http://api.hostip.info/?ip=12.215.42.19 
```

您将获得一个 XML 文档。

来源：Scott Hanselman - [The Weekly Source Code 37 - ASP.NET MVC 中的地理定位/地理定位（反向 IP 地址查找）变得简单](http://www.hanselman.com/blog/TheWeeklySourceCode37GeolocationGeotargetingReverseIPAddressLookupInASPNETMVCMadeEasy.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-09-25T20:36:05.333

我使用了[IPInfoDB](http://www.ipinfodb.com/ip_location_api.php)（可能使用与 MaxMind 相同的数据库），它的 API 具有简单的 XML 和 JSON 格式，以及 Google 的 ClientLocation。两者都不是完美的，他们经常不同意。我真的没有发现一个比另一个更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-24T18:46:09.137

我正在使用[Codehelper.io](http://ip.codehelper.io) 他们的 PHP 类很好，他们可以为您检测真实 IP，并获取位置，返回带有国家、城市、纬度、调用代码、用户语言等的 JSON。

他们还支持 Javascript。在他们的网站上查看示例。

```
<?php
// Required Libraries
require_once("ip.codehelper.io.php");
require_once("php_fast_cache.php");

// New Class
$_ip = new ip_codehelper();

// Detect Real IP Address & Location
$real_client_ip_address = $_ip->getRealIP();
$visitor_location       = $_ip->getLocation($real_client_ip_address);

// Output result
echo $visitor_location['Country']."";
echo "<pre>";
print_r($visitor_location); 
```

# c++ - 为什么构造函数中的 Multi Args 在 linux 下不起作用？

> ID：464143
> 
> 赞同：0
> 
> 时间：2009-01-21T05:09:02.990
> 
> 标签：c++, linux, variadic-functions

对于我的异常类，我有一个具有多个参数（...）的构造函数，它在 Windows 下工作正常，但是，在 linux 下它编译得很好，但拒绝链接到它。

为什么这在linux下不起作用？

这是一个例子：

```
class gcException
{
public:
    gcException()
    {
        //code here
    }

    gcException(uint32 errId, const char* format = NULL, ...)
    {
        //code here
    }
}

enum
{
    ERR_BADCURLHANDLE,
}; 
```

.

编辑

所以当我这样称呼它时：

```
if(!m_pCurlHandle)
    throw gcException(ERR_BADCURLHANDLE); 
```

我得到这个编译错误：

```
error: no matching function for call to ‘gcException::gcException(gcException)’
candidates are: gcException::gcException(const gcException*)
                 gcException::gcException(gcException*)
                 gcException::gcException(gcException&) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-21T05:21:40.297

问题是您的复制构造函数不接受您抛出的临时变量。这是一个临时的，因此是一个右值。对非常量的引用，即`gcException&`不能绑定到它。[在此处](https://stackoverflow.com/questions/445570/when-cant-an-object-be-converted-to-a-reference#445591)阅读详细信息。

正如对该答案的评论所暗示的那样，微软编译器有一个错误，使其绑定指向非常量对象的引用接受右值。您应该将您的复制构造函数更改为：

```
gcException(gcException const& other) {
    // ...
} 
```

让它发挥作用。它说该错误已在 Visual C++ 2005 中修复。因此，从该版本开始，您会遇到同样的问题。所以最好马上解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T05:20:02.903

它编译和链接就好了。我将您的测试代码扩展为完整的“程序”：

```
class gcException {
    public:
        gcException() { }
        gcException(int errId, const char* format, ...) { }
};
int main() { new gcException(1, "foo", "bar", "baz"); } 
```

然后`g++ -Wall test.cpp`运行没有错误。根据`g++ -v`，我有 gcc 版本 4.3.2 (Debian 4.3.2-1.1)。我的快速示例是否为您编译？

（您是否可能不小心使用 gcc 而不是 g++ 编译或链接？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T05:35:10.080

好吧，刚刚弄清楚了，似乎代码块使用 gcc 而不是 g++ 来编译文件。

# .net - .NET 3.5 SP1 对 WCF/REST 有多重要？

> ID：464146
> 
> 赞同：2
> 
> 时间：2009-01-21T05:09:18.403
> 
> 标签：.net, wcf, rest

我刚看完一[本关于 WCF](http://tanguay.info/web/index.php?pg=books&id=6)的书，很惊讶它根本没有提到 REST。

REST 是在 .NET 3.5 SP1 中添加的 WCF 的事后考虑，因此没有很好地融入或集成得很好？

我假设 Silverlight 和 XBAP 可以毫无问题地使用 WCF，还是由于它们的沙盒环境而有一些限制？我一直在读到一些人在[让 WCF 与 XBAP 很好地配合时遇到问题](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/dee3b9b3-975c-4372-b61a-779ce8f0c351/)，我认为 Silverlight 也存在类似的问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-24T17:56:00.007

应用到 REST 系统的许多约束即使不是不可能，也很难用 WCF REST 实现。编程模型有泄漏的抽象（json / xml 的不同方法），不支持多种媒体类型（仅 x​​ml 和 json），方法选择过于依赖 uri 参数等。它没有与 asp 集成。 net 无论如何，也就是 WCF 处理的服务 /customer 和应该返回 html 的 /customer 之间存在差异。

并不是说您不能自己实现所有这些，但您很快就会得到几乎所有 WCF Rest 开箱即用的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-22T01:44:20.170

就 WCF 上的 REST 而言，我认为 Tim Ewald[说得最好](http://www.pluralsight.com/community/blogs/tewald/archive/2007/08/26/48298.aspx)

“......我不确定我是否要在一个旨在将 HTTP 因素考虑在内的层上构建在一个旨在将其排除在外的层之上。”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-21T06:08:01.560

[John Papa](http://johnpapa.net/)在我们当地的 .Net 用户组中发言。他演示了 Silverlight -> Restful 服务调用。你可以[得到他的书](http://johnpapa.net/silverlight/now-available-data-driven-services-with-silverlight-2/)和/或下载他的代码。

在上面的链接中搜索“使用 Silverlight 2 的数据驱动服务的源代码”。我没有直接链接它，因为 url 可能会改变（他更新文件）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T06:31:05.680

这是个人观点，但我不认为 3.5 SP 1 中的 RESTful 支持是事后的想法。使用 WCF 创建和消费是可能的，而像 ADO.NET 数据服务这样的东西将它作为一个关键特性来接受。

Silverlight 和 XBAP 可以毫无问题地使用 WCF。他们最大的问题是

*   安全。它们具有更高的安全性，这可能会导致在完全受信任的应用程序中看不到的问题。这是为了保护用户，所以我不认为这是一件坏事，只是需要处理的事情。
*   Silverlight 仅是异步的。

我个人的经验是，Silverlight 使用 WCF 比使用 XBAP 更容易，因为安全模型比运行 XBAP 的愚蠢定义更好（为什么不只使用一次单击 + WPF，你会得到与 XBAP 完全相同而不会头痛 - 我会现在离开我的肥皂盒）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-21T19:04:13.770

与分发有关的所有内容都将被纳入 WCF，但 WCF 作为一个框架将驻留。这意味着，当它的核心概念足够强大时，它就会存在。这个核心概念就是 WCF 提供的：一个用于实现新的分布式通信协议的框架。这些资产可以在项目之间共享。WCF 是这些资产可以存在的运行时。每个 WCF 程序员都会立即知道如何集成新的 WCF 资产。例如：Azure 中的 ServiceBus 组件作为 WCF 的新资产提供。已经启用 WCF 的项目可以立即切换到新的 ServiceBus。REST 不是 WCF，但 WCF 已通过 REST 进行了扩展，而不会破坏其核心概念。除此之外，WCF 还有很多其他协议：Streamed、Bidirection、WS-*、.... Silverlight 没有 WCF 集成。它支持 HTTP 和 TCP/Socket 通信。为什么 Silverlight 和 WCF 之间有密切的关系？Silverlight 正处于快速扩展的阶段。它也是通信堆栈。WCF 也支持 Silverlight 中的每一种新的通信方式。它正在协同发展。顺便说一句，Linq 也有一个进化的核心概念。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-01T19:24:14.490

在 3.5 之前使用 WCF 进行 REST 基本上意味着*不做*很多已融入 WCF 的东西。但是在 3.5 之前使用 WCF 实现 REST 服务是非常可行的，它只是涉及更多代码。您基本上必须忽略 SOAPy 的东西，并构建您自己的自定义通道堆栈。（要做到这一点，您必须创建一个 CustomBindings 并告诉 TextMessageEncoder 不要使用 SOAP（通过使用 MessageVersion=None））您使用 3.5 获得的东西是所有 REST 的东西都是开箱即用的，您可以选择使用 WebHttpBinding 指定 REST 接口。因此，在我看来，REST 实现非常适合现有的 WCF 堆栈，而不是添加到其中的 hack。但是他们在 3.5 中让 REST 开箱即用的精简版而非 SOAPy 版本变得简单。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-03-25T14:30:00.310

为了完整[起见，Kenn Scribner 和 Scott Seely 编写的 Effective REST Services via .NET: For .NET Framework 3.5](https://rads.stackoverflow.com/amzn/click/com/0321613252)存在。DNR 或 HC 或 DFB 与 Scott 进行了交谈，我购买它是为了获得 WCF 的一般报道。我还没有阅读它（甚至翻阅它），如果/当我阅读它时会报告（尽管如果我在跑到 OpenRasta 之前什至不这样做，我不会感到惊讶）。

# java - 如何在 Java Swing 中构建 Google-chrome 选项卡和菜单栏界面？

> ID：464149
> 
> 赞同：4
> 
> 时间：2009-01-21T05:11:10.893
> 
> 标签：java, user-interface, swing, open-source, google-chrome

有人知道一个开源项目或代码片段，它演示了如何在 Swing 中创建一个类似谷歌浏览器的界面，其中包含类似的选项卡和工具栏？

我知道，我可以使用[JTabbedPane](http://java.sun.com/javase/6/docs/api/javax/swing/JTabbedPane.html)，但我正在考虑一个外观和感觉与谷歌浏览器“标签式浏览”非常相似的界面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-02-18T01:19:13.103

我刚刚为此创建了自己的开源库，称为 Jhrome。看看这个！

它在 github 上可用：[https ://github.com/jedwards1211/Jhrome](https://github.com/jedwards1211/Jhrome)

目前文档很少，但它非常可靠，除了我还没有弄清楚的 AWT/Swing 内存泄漏。如果有足够多的人对它感兴趣，我会完善它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-24T07:09:52.260

您可能可以使用未装饰的 JFrame (setUndecorated(true)) 来摆脱标题栏。

然后，您将创建一个布局，其中包含一个填充窗口的选项卡式窗格，然后覆盖右上角的最小/最大/关闭按钮。

如果选项卡式窗格太不灵活，您需要在顶部放置一个按钮栏，使用切换按钮控制多个内容面板，并让选项卡看起来像自己；当每个按钮变为活动状态时，它会隐藏当前面板并取消隐藏属于它的面板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T06:29:15.433

我认为你应该选择[Substance LAF](https://substance.dev.java.net/)并为它制作一个类似于 Chrome 的皮肤*（Substance 是一种可皮肤的 LAF，它在图形方面扩展了 Swing 的功能）*并使用它，这不是最简单的方法，但如果你有时间和意志力，你会得到你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T09:11:00.637

也看看这个问题（及其答案）：[JTabbedPane: Components before and after the tabs itself](https://stackoverflow.com/questions/888856/jtabbedpane-components-before-and-after-the-tabs-themselves/891862)。

# asp.net - 根据菜单选择更改菜单的背景颜色

> ID：464158
> 
> 赞同：0
> 
> 时间：2009-01-21T05:19:18.663
> 
> 标签：asp.net, javascript, css

我有一个包含 5 个项目的水平 css 菜单。

例如 1) 主页 2) 用户 3) 类别 4) 产品 5) 联系方式

When "home" is selected the background color (via css) of the entire menu div (id="topmenu") is blue.

我希望 div 的背景颜色在选择“用户”时变为绿色，在选择“类别”时变为紫色。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-21T05:26:24.157

您可以像这样设置多个类：

```
<ul> 
   <li class="Menu1 Selected"><a href="#">Home</a></li> 
   <li class="Menu2"><a href="#">Users</a></li>
</ul> 
```

然后在您的 CSS 中，您为每个菜单项设置了一个类，以使其处于选定状态：

```
.Menu1 .Selected
{
   background-color: #000000;
}
.Menu2 .Selected
{
   background-color: #ffffff;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T05:28:50.687

```
<div id="topmenu">
<ul>
<li><a href="home" onclick="changeBackground('green');">Home</a></li>
<li><a href="users" onclick="changeBackground('blue');">Users</a></li>
<li><a href="home" onclick="changeBackground('purple');">Category</a></li>
<li><a href="home" onclick="changeBackground('brown');">Products</a></li>
<li><a href="users" onclick="changeBackground('orange');">Contact</a></li>
</ul>
</div>
<script type="text/javascript">

function changeBackground(color){
  document.getElementById("topmenu").style.backgroundColor = color;
  return false;
}
</script> 
```

我认为这样的事情应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T05:33:34.187

您可能希望将单个元素放入`<span>`标签中，在其中您可以更好地控制单个项目的外观。

例如：

```
<span id="users">Users</span> <span id="category">Category</span> 
```

那么 CSS 可能看起来像：

```
span#users:hover { background-color: green; }

span#category:hover { background-color: purple; } 
```

# vb.net - 在我的工具箱中添加 AxWEBBrowser

> ID：464166
> 
> 赞同：0
> 
> 时间：2009-01-21T05:21:42.697
> 
> 标签：vb.net, visual-studio

如何在我的工具箱中添加 AxWEBBrowser？我尝试通过 TOOLS -> Customized toolbox -> Com components -> 自定义我的工具箱，但我没有找到任何 AxWEBBrowser。我还在我的参考资料中包含了 AxInterop.SHDocVw 和 Interop.SHDocVw。添加 AxWEBBrowser 我还需要做什么？谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-17T14:21:36.223

您需要从 COM 组件中选择“Microsoft Web Browser”。

如果您需要浏览，文件名为“ieframe.dll”。它通常应该在 System32 文件夹中。

# django - MultiValueDictKeyError 使用 Appengine SDK 和 Django 进行文件上传

> ID：464167
> 
> 赞同：0
> 
> 时间：2009-01-21T05:24:06.907
> 
> 标签：django, google-app-engine, upload, file-upload

谁能帮我在这里发现我的问题：

我正在尝试使用 appengine 和 django 实现文件上传例程，但遇到了 MultiValueDictKeyError 错误。该文件似乎没有从网页传输到服务器。

其中一部分是学习练习，所以我不想使用 djangoform 为我处理数据。

我正在使用 SDK 版本 1.1.8、django 版本 1.1.0 alpha 和 google-appengine-django r68

我的 html 看起来像这样：

```
<form method="POST" action="." enctype="multipart/form-data">
  Title: <input type="text" name="title"/>
  Text: <input type="text" name="txt"/>
  Image: <input type="file" name="imgfile"/>

  <input type="submit"/>
</form> 
```

我的蟒蛇看起来像这样：

def 索引（请求）：

```
if request.POST:
   newtxt = TestModel()
   newtxt.title = request.POST.get('title', '')
   newtxt.txt = request.POST.get('txt', '')
   blFileData = request.FILES['imgfile'].read()
   if blFileData:
       newtxt.img = blFileData
   newtxt.put()

return render_to_response('index.html', ({'filestore': query,})) 
```

错误如下所示：

MultiValueDictKeyError 在 /

“在”中找不到密钥“imgfile”

请求方法：POST 请求 URL： [http://localhost:8000/](http://localhost:8000/) 异常类型：MultiValueDictKeyError 异常值：“Key 'imgfile' not found in” 异常位置：/Users/david/Sites/testsite/myapp/views.py in index ，第 19 行 Python 可执行文件：/Library/Frameworks/Python.framework/Versions/2.5/Resources/Python.app/Contents/MacOS/Python Python 版本：2.5.2

/Users/david/Sites/testsite/myapp/views.py in index blFileData = request.FILES['imgfile'].read() ... ▼ Local vars Variable Value newtxt
TestModel(**{'txt': u' World', 'img': 无, 'title': u'Hello'}) 请求, POST:, COOKIES:{}, META:{'APPLICATION_ID': 'google-app-engine-django', 'AUTH_DOMAIN': 'gmail.com'，'CONTENT_LENGTH'：'21'，'CONTENT_TYPE'：'application/x-www-form-urlencoded'，'CURRENT_VERSION_ID'：'1.1'，'GATEWAY_INTERFACE'：'CGI/1.1'，'HTTP_ACCEPT ': 'text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5', 'HTTP_ACCEPT_LANGUAGE': 'en', 'HTTP_CONNECTION': '保持活动状态', 'HTTP_HOST': 'localhost:8000', 'HTTP_REFERER': ' [http://localhost:8000/](http://localhost:8000/)', 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_4_11; en) AppleWebKit/525.27.1 (KHTML, like Gecko) Version/3.2.1 Safari/525.27.1', 'PATH_INFO': u'/', 'PATH_TRANSLATED': u'/Users/david/Sites/testsite/main.py', 'QUERY_STRING': '', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': u'', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8000', 'SERVER_PROTOCOL': 'HTTP/1.0', 'SERVER_SOFTWARE': 'Development/1.0', 'TZ': 'UTC ', 'USER_EMAIL': '', 'wsgi.errors': ', mode 'w' at 0x130b0>, 'wsgi.input': , 'wsgi.multiprocess': False, 'wsgi.multithread': False, 'wsgi .run_once': True, 'wsgi.url_scheme': 'http', 'wsgi.version': (1, 0)}>

想法？谢谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T06:26:23.347

由于某种原因，文件没有被上传，或者如果有的话，它被绑定到 request.FILES 中的不同键

尝试记录 request.FILES 的值或尝试从处理程序检查其值并查看 request.FILES 字典中真正包含的内容。这可能会带来一些突破。

要设置跟踪，您可以使用 pdb。

```
import pdb
pdb.set_trace() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-10T16:43:02.577

我也遇到过这个错误，但那是因为我使用了**encoding="multipart/form-data"**，我认为这是错误的。我改为使用**enctype="multipart/form-data"**并且它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-22T01:54:04.753

好吧，最奇怪的事情发生了。我在昨天签字之前写了这个问题。当我今晚重新启动以再次尝试时，在我对其进行任何更改之前，这件事已经奏效了。无论如何感谢您的帮助。

# unit-testing - Common Lisp 的持续集成？

> ID：464172
> 
> 赞同：5
> 
> 时间：2009-01-21T05:26:39.740
> 
> 标签：unit-testing, version-control, continuous-integration, common-lisp

有没有针对 CL 的持续集成框架？具体来说，我正在寻找：

*   自动“构建”，即从基本状态加载 ASDF 系统*   自动化测试*   状态推送 - 电子邮件通知等，特别是对于损坏的构建和失败的测试*   状态拉取——网站、日志、开发团队可以拉取的任何内容*   状态历史记录 - 运行的详细信息已保存并可轻松浏览

在我看来，Lisp 社区的开源方面支持单独开发。对团队的支持很少。只需手动创建一个带有 lib 依赖项的项目主干，可以由随机开发人员签出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T06:54:41.763

您可以使用[Hudson](http://hudson-ci.org/)，它非常简单且与语言无关。唯一的要求是你可以从一个批处理文件开始整个事情，并在发生错误时返回一个非 0 的值。我们将它用于 Java、C++ 和 Ruby 项目。

也许这也有帮助：如果您的程序没有返回错误代码，您可以编写一个在程序之后运行的小脚本，该脚本检查输出日志中的错误并在发现错误时返回错误代码。

# sql-server - 我将使用什么 bcp 格式文件来插入 59 列？

> ID：464182
> 
> 赞同：1
> 
> 时间：2009-01-21T05:37:44.337
> 
> 标签：sql-server, sql-server-2005, bulkinsert, bcp

第一次观察，这个BCP格式文件的限制数据文件：（最多连续三行）

```
1;a;b;c;d;e;f;; 2;d;e;f;g;h;i;; 3;g;h;i;j;k;l;; 
4;j;k;l;m;n;o;; 5;m;n;o;p;q;r;; 
6;p;q;r;s;t;u;;What bcp format file that I'm gonna used to insert 59 columns? 
```

格式文件：

```
9.0
9
1  SQLCHAR 0 0 "" 0 x ""
2  SQLCHAR 0 0 ";" 2  col1  Latin1_General_CI_AS
3  SQLCHAR 0 0 ";" 3  col2  Latin1_General_CI_AS
4  SQLCHAR 0 0 ";" 4  col3  Latin1_General_CI_AS
5  SQLCHAR 0 0 ";" 5  col4  Latin1_General_CI_AS
6  SQLCHAR 0 0 ";" 6  col5  Latin1_General_CI_AS
7  SQLCHAR 0 0 ";" 7  col6  Latin1_General_CI_AS
8  SQLCHAR 0 0 ";" 8  col7  Latin1_General_CI_AS
9  SQLCHAR 0 0 "" 0 x "" 
```

表结构

```
Create Table bcp2 (id bigint identity(1,1), col1 varchar(2), col2 varchar(2), col3 varchar(2), col4 varchar(2), col5 varchar(2), col6 varchar(2), col7 varchar(2), dte bit default 0) 
```

当我尝试添加另一行时，它会给出此错误消息，

消息 4832，级别 16，状态 1，第 1 行批量加载：在数据文件中遇到意外的文件结尾。消息 7399，级别 16，状态 1，第 1 行链接服务器“（null）”的 OLE DB 提供程序“BULK”报告了错误。提供商没有提供有关该错误的任何信息。消息 7330，级别 16，状态 2，第 1 行无法从链接服务器“（null）”的 OLE DB 提供程序“BULK”获取行。

如果我这样排列数据，它会给出一条错误消息，Msg 8152、Level 16、State 14、Line 1 字符串或二进制数据将被截断。该语句已终止。

这种排列（三个连续的线）给出了一个错误，

```
1;a;b;c;d;e;f;; 2;d;e;f;g;h;i;; 3;g;h;i;j;k;l;; 
4;j;k;l;m;n;o;; 5;m;n;o;p;q;r;; 
6;p;q;r;s;t;u;; 
```

这种排列（一行）不会出错，它将插入所有6行，

```
1;a;b;c;d;e;f;; 2;d;e;f;g;h;i;; 3;g;h;i;j;k;l;; 4;j;k;l;m;n;o;; 5;m;n;o;p;q;r;; 6;p;q;r;s;t;u;; 
```

第二个观察，这种数据排列适用于特定的格式文件

数据文件及其排列：

```
1;a;b;c;d;e;f;g;h;i;; 2;d;e;f;g;h;i;j;k;l;; 3;g;h;i;j;k;l;m;n;o;; 
4;j;k;l;m;n;o;p;q;r;; 5;m;n;o;p;q;r;s;t;u;; 
6;p;q;r;s;t;u;v;w;x;; 
```

...它插入三行

```
1;a;b;c;d;e;f;g;h;i;; 2;d;e;f;g;h;i;j;k;l;; 3;g;h;i;j;k;l;m;n;o;; 4;j;k;l;m;n;o;p;q;r;; 5;m;n;o;p;q;r;s;t;u;; 6;p;q;r;s;t;u;v;w;x;; 
```

...它只插入一行

使用这种格式文件：

```
9.0
12
1  SQLCHAR 0 0 "" 0 x ""
2  SQLCHAR 0 0 ";" 2  col1  Latin1_General_CI_AS
3  SQLCHAR 0 0 ";" 3  col2  Latin1_General_CI_AS
4  SQLCHAR 0 0 ";" 4  col3  Latin1_General_CI_AS
5  SQLCHAR 0 0 ";" 5  col4  Latin1_General_CI_AS
6  SQLCHAR 0 0 ";" 6  col5  Latin1_General_CI_AS
7  SQLCHAR 0 0 ";" 7  col6  Latin1_General_CI_AS
8  SQLCHAR 0 0 ";" 8  col7  Latin1_General_CI_AS
9  SQLCHAR 0 0 ";" 9  col8  Latin1_General_CI_AS
10 SQLCHAR 0 0 ";" 10 col9  Latin1_General_CI_AS
11 SQLCHAR 0 0 ";" 11 col10 Latin1_General_CI_AS
12 SQLCHAR 0 0 "\r\n" 0 x "" 
```

表结构保持不变，

```
Create Table bcp (id bigint identity(1,1), col1 varchar(2), col2 varchar(2), col3 varchar(2), col4 varchar(2), col5 varchar(2), col6 varchar(2), col7 varchar(2), col8 varchar(2), col9 varchar(2), col10 varchar(2), dte bit default 0) 
```

现在，我的问题是，我将使用什么格式文件来正确插入所有 59 列中的所有数据？

我的实际数据（部分）：

```
087728127;V1.10;R;WithMedia;58-1231925646@208.74.75.250;0002;Wed Jan 14 09:34:06 2009;NA;Wed Jan 14 09:35:06 2009;0;Origination CANCEL; 487;O;000054;SIP;0067*116;116.93.51.23;01149614244656;208.74.75.250;5372a7cc31a45f9a237780a125ce14ca@116.93.51.23;116.93.51.23;14840;208.74.75.250;12348;G.711u_64k,G.711a_64k,RFC 2833;0;0;0;0;0;0;0;050500;SIP;3072151001;208.74.75.250;49614244656;208.80.156.52;58-1-1231925646@208.74.75.250;0.0.0.0;0;208.74.75.250;12350;NA;0;0;0;0;0;0;0;F;01149614244656;0;60;0;0;0000003A 496DB18E 484B6AB4 FA4B4AD0;;
087728128;V1.10;R;WithMedia;62-1231925689@208.74.75.250;0002;Wed Jan 14 09:34:49 2009;NA;Wed Jan 14 09:35:12 2009;0;Origination CANCEL; 487;O;050450;SIP;6326378682;116.93.51.98;011420556844118;208.74.75.250;call-00EC569B-CFE0-DD11-0216-4B6@116.93.51.98;116.93.51.98;11096;208.74.75.250;12364;G.729,RFC 2833;437;799;13988;25568;0;0;0;050001;SIP;6326378682;208.74.75.250;011420556844118;204.9.203.210;62-1-1231925689@208.74.75.250;204.9.203.210;11092;208.74.75.250;12366;G.729,RFC 2833;799;437;25568;13988;0;0;0;F;011420556844118;0;7;16;0;0000003E 496DB1B9 44AC3D38 FA4B4AD0;; 
```

...数据是连续的，仅在双分号后用空格分隔。

这是我的实际格式文件：

```
9.0
61
1       SQLCHAR       0        0      ""         0     x                                      ""
2       SQLCHAR       0        0      ";"        2     Sequence                               Latin1_General_CP1_CI_AS
3       SQLCHAR       0        0      ";"        3     Version                                Latin1_General_CP1_CI_AS
4       SQLCHAR       0        0      ";"        4     RecordType                             Latin1_General_CP1_CI_AS
5       SQLCHAR       0        0      ";"        5     ConnectionType                         Latin1_General_CP1_CI_AS
6       SQLCHAR       0        0      ";"        6     SessionID                              Latin1_General_CP1_CI_AS
7       SQLCHAR       0        0      ";"        7     ReleaseCause                           Latin1_General_CP1_CI_AS
8       SQLCHAR       0        0      ";"        8     StartTime                              Latin1_General_CP1_CI_AS
9       SQLCHAR       0        0      ";"        9     AnswerTime                             Latin1_General_CP1_CI_AS
10      SQLCHAR       0        0      ";"        10    ReleaseTOD                             Latin1_General_CP1_CI_AS
11      SQLCHAR       0        0      ";"        11    WestofGMT                              Latin1_General_CP1_CI_AS
12      SQLCHAR       0        0      ";"        12    RelCauseTxt                            Latin1_General_CP1_CI_AS
13      SQLCHAR       0        0      ";"        13    RelCauseBin                            Latin1_General_CP1_CI_AS
14      SQLCHAR       0        0      ";"        14    1strelease                             Latin1_General_CP1_CI_AS
15      SQLCHAR       0        0      ";"        15    OrgTrunkId                             Latin1_General_CP1_CI_AS
16      SQLCHAR       0        0      ";"        16    OrgProtocol                            Latin1_General_CP1_CI_AS
17      SQLCHAR       0        0      ";"        17    OrgSrcNo                               Latin1_General_CP1_CI_AS
18      SQLCHAR       0        0      ";"        18    OrgSrcHost                             Latin1_General_CP1_CI_AS
19      SQLCHAR       0        0      ";"        19    OrgDestNo                              Latin1_General_CP1_CI_AS
20      SQLCHAR       0        0      ";"        20    OrgDestHost                            Latin1_General_CP1_CI_AS
21      SQLCHAR       0        0      ";"        21    OrgCallID                              Latin1_General_CP1_CI_AS
22      SQLCHAR       0        0      ";"        22    OrgRemPayIPAdd                         Latin1_General_CP1_CI_AS
23      SQLCHAR       0        0      ";"        23    OrgRemPayUDPAdd                        Latin1_General_CP1_CI_AS
24      SQLCHAR       0        0      ";"        24    OrgLocPayIPAdd                         Latin1_General_CP1_CI_AS
25      SQLCHAR       0        0      ";"        25    OrgLocPayUDPAdd                        Latin1_General_CP1_CI_AS
26      SQLCHAR       0        0      ";"        26    OrgCodecList                           Latin1_General_CP1_CI_AS
27      SQLCHAR       0        0      ";"        27    OrgIngrPck                             Latin1_General_CP1_CI_AS
28      SQLCHAR       0        0      ";"        28    OrgEgrPck                              Latin1_General_CP1_CI_AS
29      SQLCHAR       0        0      ";"        29    OrgIngrOct                             Latin1_General_CP1_CI_AS
30      SQLCHAR       0        0      ";"        30    OrgEgrOct                              Latin1_General_CP1_CI_AS
31      SQLCHAR       0        0      ";"        31    OrgIngrPckLoss                         Latin1_General_CP1_CI_AS
32      SQLCHAR       0        0      ";"        32    OrgIngrDelay                           Latin1_General_CP1_CI_AS
33      SQLCHAR       0        0      ";"        33    OrgIngrPckJitter                       Latin1_General_CP1_CI_AS
34      SQLCHAR       0        0      ";"        34    TermTrunkId                            Latin1_General_CP1_CI_AS
35      SQLCHAR       0        0      ";"        35    TermProtocol                           Latin1_General_CP1_CI_AS
36      SQLCHAR       0        0      ";"        36    TermSrcNo                              Latin1_General_CP1_CI_AS
37      SQLCHAR       0        0      ";"        37    TermSrcHost                            Latin1_General_CP1_CI_AS
38      SQLCHAR       0        0      ";"        38    TermDestNo                             Latin1_General_CP1_CI_AS
39      SQLCHAR       0        0      ";"        39    TermDestHost                           Latin1_General_CP1_CI_AS
40      SQLCHAR       0        0      ";"        40    TermCallID                             Latin1_General_CP1_CI_AS
41      SQLCHAR       0        0      ";"        41    TermRemPayIPAdd                        Latin1_General_CP1_CI_AS
42      SQLCHAR       0        0      ";"        42    TermRemPayUDPAdd                       Latin1_General_CP1_CI_AS
43      SQLCHAR       0        0      ";"        43    TermLocPayIPAdd                        Latin1_General_CP1_CI_AS
44      SQLCHAR       0        0      ";"        44    TermLocPayUDPAdd                       Latin1_General_CP1_CI_AS
45      SQLCHAR       0        0      ";"        45    TermCodecList                          Latin1_General_CP1_CI_AS
46      SQLCHAR       0        0      ";"        46    TermIngrPck                            Latin1_General_CP1_CI_AS
47      SQLCHAR       0        0      ";"        47    TermEgrPck                             Latin1_General_CP1_CI_AS
48      SQLCHAR       0        0      ";"        48    TermIngrOct                            Latin1_General_CP1_CI_AS
49      SQLCHAR       0        0      ";"        49    TermEgrOct                             Latin1_General_CP1_CI_AS
50      SQLCHAR       0        0      ";"        50    TermIngrPckLoss                        Latin1_General_CP1_CI_AS
51      SQLCHAR       0        0      ";"        51    TermIngrDelay                          Latin1_General_CP1_CI_AS
52      SQLCHAR       0        0      ";"        52    TermIngrPckJitter                      Latin1_General_CP1_CI_AS
53      SQLCHAR       0        0      ";"        53    FinRouteInd                            Latin1_General_CP1_CI_AS
54      SQLCHAR       0        0      ";"        54    RoutingDigits                          Latin1_General_CP1_CI_AS
55      SQLCHAR       0        0      ";"        55    CallDuration                           Latin1_General_CP1_CI_AS
56      SQLCHAR       0        0      ";"        56    PostDialDelay                          Latin1_General_CP1_CI_AS
57      SQLCHAR       0        0      ";"        57    RingTime                               Latin1_General_CP1_CI_AS
58      SQLCHAR       0        0      ";"        58    Duration                               Latin1_General_CP1_CI_AS
59      SQLCHAR       0        0      ";"        59    ConfID                                 Latin1_General_CP1_CI_AS
60      SQLCHAR       0        0      ";"        60    RPIDANI                                Latin1_General_CP1_CI_AS
61      SQLCHAR       0        0      ""          0    x                                      "" 
```

这是我的实际表结构：

```
CREATE TABLE [dbo].[SansayRawInfo](
    [RawDataId] [bigint] IDENTITY(1,1) NOT NULL,
    [Sequence] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Version] [varchar](30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [RecordType] [varchar](44) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [ConnectionType] [varchar](26) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [SessionID] [varchar](42) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [ReleaseCause] [varchar](14) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [StartTime] [varchar](42) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [AnswerTime] [varchar](42) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [ReleaseTOD] [varchar](42) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [WestofGMT] [varchar](42) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [RelCauseTxt] [varchar](42) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [RelCauseBin] [varchar](28) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [1strelease] [varchar](22) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgTrunkId] [varchar](64) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgProtocol] [varchar](16) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgSrcNo] [varchar](138) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgSrcHost] [varchar](138) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgDestNo] [varchar](138) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgDestHost] [varchar](138) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgCallID] [varchar](138) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgRemPayIPAdd] [varchar](26) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgRemPayUDPAdd] [varchar](16) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgLocPayIPAdd] [varchar](26) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgLocPayUDPAdd] [varchar](16) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgCodecList] [varchar](138) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgIngrPck] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgEgrPck] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgIngrOct] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgEgrOct] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgIngrPckLoss] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgIngrDelay] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [OrgIngrPckJitter] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermTrunkId] [varchar](64) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermProtocol] [varchar](16) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermSrcNo] [varchar](138) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermSrcHost] [varchar](138) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermDestNo] [varchar](138) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermDestHost] [varchar](138) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermCallID] [varchar](138) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermRemPayIPAdd] [varchar](26) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermRemPayUDPAdd] [varchar](16) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermLocPayIPAdd] [varchar](26) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermLocPayUDPAdd] [varchar](16) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermCodecList] [varchar](138) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermIngrPck] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermEgrPck] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermIngrOct] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermEgrOct] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermIngrPckLoss] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermIngrDelay] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [TermIngrPckJitter] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [FinRouteInd] [varchar](44) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [RoutingDigits] [varchar](74) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [CallDuration] [varchar](16) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [PostDialDelay] [varchar](16) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [RingTime] [varchar](16) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Duration] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [ConfID] [varchar](46) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [RPIDANI] [varchar](74) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Status] [bit] NULL DEFAULT ((0))
) ON [PRIMARY] 
```

... 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T14:36:18.710

很多很好的细节，但是您缺少正在使用的*实际 bcp 命令*。
我怀疑**-c -r 和 -t**选项有问题。

无论如何，一些事情要尝试：

从[这里](http://support.microsoft.com/kb/67409)

*   检查您的线路终端选项。
*   数据文件中的隐藏字符。
*   在数据文件中使用空格作为分隔符。

# javascript - 寻找 jQuery 插件（或代码）以在鼠标悬停上自动滚动 Carousel 项目

> ID：464187
> 
> 赞同：0
> 
> 时间：2009-01-21T05:43:36.350
> 
> 标签：javascript, jquery, effects, mouseover, image-gallery

有谁知道可以复制此功能的 Jquery 插件？

[动态驱动 Cmotion 画廊](http://www.dynamicdrive.com/dynamicindex4/cmotiongallery2.htm)

这个想法是你有一个图像列表，一次只有 X 个图像是可见的，而不是单击下一个/上一个来滚动浏览它们相对于鼠标中心位置的偏移量滚动的图像。

我看过[JCarousel](http://sorgalla.com/projects/jcarousel/)，它除了鼠标悬停功能外，什么都有。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-08-19T09:27:11.117

我花了很多时间拼命寻找具有完全相同功能的插件。最后我放弃了，自己建了一个。希望这可以帮助：

[http://www.convergent-evolution.co.uk/resources/jquery-plugins/scrolling-carousel/](http://www.convergent-evolution.co.uk/resources/jquery-plugins/scrolling-carousel/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-02-28T17:46:53.610

To addup jquery plugin, I prefer roundabout plugin for smart carousel and animation, Check this demo and code here.

[http://pujanmaharjan.com.np/jquery-carousel/](http://pujanmaharjan.com.np/jquery-carousel/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-08-19T09:34:55.143

Jquery Cycle 插件适用于这类事情
[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

这可能是一个延伸，但基本上你想使用`scrollVert`效果，你可以让 prev/next 指示器覆盖在图像上（不可见）。

它可能不是一个轮播自定义插件，但我相信它的使用非常广泛并且在很大程度上是可配置的。

# php - 在 JavaScript (JSON) 中解析 jQuery 数据

> ID：464188
> 
> 赞同：0
> 
> 时间：2009-01-21T05:43:46.290
> 
> 标签：php, javascript, jquery, json

我正在使用 PHP、jQuery 和 JSON。现在我需要知道如何在 JavaScript 中解析 jQuery 数据。

### 加载.php

```
<?php

    ...
    $json =json_encode($array);

?> 
```

它通过以下数据返回 jQuery。

```
 [{"name":"STA","distance":"250","code":25},
 {"name":"GIS","distance":"500","code":45}] 
```

### jQuery代码

```
$.getJSON("load.php", function(json){
    // Access object
    var a = json;
    pass(a);
}); 
```

现在我需要将 JSON ( `a`) 传递给文件中定义的 JavaScript `my.js`：

```
var myjson = {};

function pass(a) {
    myjson = a;

    //Here, how do I get name, and distance, code.
    //I have tried "alert(myjson.name)". It returns undefined.
} 
```

我应该对我的逻辑进行哪些更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-21T05:46:59.153

您有一个 JSON 对象数组，因此您需要遍历该数组以获取每个单独的对象：

```
for(var x = 0; x < myjson.length; x++) {
    alert(myjson[x].name);
    // myjson[x].distance, myjson[x].code also available
} 
```

或者，如果您想以 jQuery 方式进行操作：

```
jQuery.each(myjson, function(x) {
    alert(myjson[x].name);
}); 
```

这两个例子都会给你一个带有“STA”和“GIS”的警报。

除此之外，正如 OIS 所指出的，您还试图在代码中读取错误的变量。JSON 应该在名为 的变量中`a`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T05:51:31.513

您尝试使用未在您的函数范围内定义的名为 json 的变量。相反，您必须使用名为 a 的参数。

```
function pass(a) {
   var i;
    while(i = a.pop()) {
        alert(i.name + " " + i.distance);
    }
} 
```

# sql - 将函数结果分配给表变量

> ID：464191
> 
> 赞同：2
> 
> 时间：2009-01-21T05:45:12.650
> 
> 标签：sql, stored-procedures, dynamic-queries

SQL Server (2000/2005) 函数获取表名和字段名作为参数，并从函数内的动态查询返回结果。结果应分配给`Table`将在存储过程中进一步使用的变量。如何做到这一点？

我收到错误消息：“只能从函数中执行函数和扩展存储过程。”

```
Declare @Data as table (FieldValue varchar(100))
insert into @Data select * from MyFunction ('Person.Address','AddressID')     

-- Function
Alter function MyFunction (
   @TableName varchar(100), @FieldName varchar(100) 
) returns @GetData table (
   FieldValue  varchar(100) 
) as
begin
        Declare @SQL varchar(250)
        Set @SQL = 'Select '+@FieldName+ ' from '+ @TableName
        Exec sp_executesql @SQL     
        return
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-12-12T16:46:32.203

只是为了关闭循环......

这是调用函数并将这些结果放入表变量中的语法

@simons 解决方案的小型构建

这在 sql2012 和 sql2014 上运行。

[不要忘记关闭表格语句。如果您将表格全部放在一行上，这很容易做到。]

```
declare @t table(field1  nvarchar(100) )

insert @t select * from dbo.Cool_1Field_Function( 'parm1' ,'parm2')
select * from @t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T05:52:08.613

我不确定这如何与函数一起使用，但如果您有一个返回结果集的存储过程，您可以使用 INSERT EXEC 语句将其插入到表变量中。

```
INSERT @TableVariable
EXEC spYourProcedure 
```

只要字段匹配就可以了。否则，您可以使用：

```
INSERT @TableVariable (FieldInSp1, FieldInSp2)
EXEC spYourProcedure 
```

这样您就可以在存储过程之间传递数据。有关一些额外信息，请参阅[INSERT EXEC 语句的此页面。](http://www.sommarskog.se/share_data.html#INSERTEXEC)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T10:24:59.403

您不能在用户定义的函数中使用“exec”。UDF 必须没有副作用。

# exception - 使用自定义 JSF 事件处理程序拦截异常

> ID：464193
> 
> 赞同：1
> 
> 时间：2009-01-21T05:49:38.540
> 
> 标签：exception, jsf, actionlistener

有什么方法可以`ActionListener`在 JSF 中创建一个自定义类，以便我可以在使用我自己的 ActionListener 类按下命令按钮时拦截异常

我尝试使用以下代码：

`firstpage.jsp`

```
<f:view>
  <html>
    <head>
      <title>firstpage</title>
    </head>
    <body>
      <h:form>    
        <h:commandButton id="button" value="submit"
                         actionListener="#{databasebean.fetchUserName}"/>
      </h:form>
    </body>
  </html>
</f:view> 
```

`Dao.java`

```
package getexception;

import java.sql.*;
import java.util.ArrayList;
import javax.faces.event.ActionEvent;

public class Dao {

    String firstname;
    private Connection con=null;
    private Statement stmt = null;
    private ResultSet rst = null;
    private ArrayList ar;
    String driver = "sun.jdbc.odbc.JdbcOdbcDriver";
    String url = "jdbc:odbc:" + "new";
    public Dao() {

    }

    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

    public String getFirstname() {
        return firstname;
    }
    public void fetchUserName(ActionEvent ae) throws Exception{
        Driver d= (Driver)Class.forName(driver).newInstance();
        con = DriverManager.getConnection(url,"","");
        stmt = con.createStatement();
        rst=stmt.executeQuery("select firstname from employee where firstname like '%e'");
        if(rst.next()) {
            this.setFirstname(rst.getString("firstname"));
        }
        rst.close();
        stmt.close();
        con.close();
    }} 
```

`NewActionListener.java`

```
package getexception;

import com.sun.faces.application.ActionListenerImpl;
import javax.faces.application.Application;
import javax.faces.application.NavigationHandler;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;

public class NewActionListener extends ActionListenerImpl{

    public void processAction(ActionEvent event) {
    try {
        System.out.println("try block");
        super.processAction(event);

    } catch (Exception exception) {
        System.out.println("catch block");
        FacesContext facesContext = FacesContext.getCurrentInstance();
        Application application = facesContext.getApplication();
        NavigationHandler navigationHandler = application.getNavigationHandler();
        navigationHandler.handleNavigation(facesContext,null,"exceptionNavigation");
        facesContext.renderResponse();
        }
    }} 
```

`faces-config.xml`

```
<faces-config xmlns="http://java.sun.com/JSF/Configuration">
  <managed-bean>
    <managed-bean-name>databasebean</managed-bean-name>
    <managed-bean-class>getexception.Dao</managed-bean-class>
    <managed-bean-scope>application</managed-bean-scope>
  </managed-bean>

  <navigation-rule>
    <navigation-case>
      <from-outcome>exceptionNavigation</from-outcome>
      <to-view-id>/error.jsp/<to-view-id>
    </navigation-case>
  </navigation-rule>

  <application>
    <action-listener>getexception.NewActionListener</action-listener>
  </application>

  <managed-bean>
    <managed-bean-name>backing_hellopage</managed-bean-name>
    <managed-bean-class>getexception.backing.Hellopage</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
  </managed-bean>
</faces-config> 
```

`error.jsp`

```
 <html>
    <f:view>
      <head>
        <title>firstpage</title>
      </head>
      <body>
        <h:form>
          <h:outputText value="Exception succesfully navigated"/>
        </h:form>
      </body>
    </f:view>
  </html> 
```

该代码生成了一个 SQL 异常，但它没有向我显示`error.jsp`页面。

**我有什么错误配置导致异常触发时错误页面不显示？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T12:27:58.110

[Application.setActionListener](http://java.sun.com/javaee/5/docs/api/javax/faces/application/Application.html#setActionListener(javax.faces.event.ActionListener))的 javadoc ：

> 设置要为所有**ActionSource** 组件注册的默认 ActionListener。

应用程序上设置的[ActionListener](http://java.sun.com/javaee/5/docs/api/javax/faces/event/ActionListener.html)不负责调用其他侦听器。它不会调用通过[actionListener](http://java.sun.com/javaee/javaserverfaces/1.2/docs/tlddocs/h/commandButton.html)属性或[f:actionListener](http://java.sun.com/javaee/javaserverfaces/1.2/docs/tlddocs/f/actionListener.html)标签设置的任何内容。**它*负责*处理[action](http://java.sun.com/javaee/javaserverfaces/1.2/docs/tlddocs/h/commandButton.html)属性**，该属性绑定到返回导航案例字符串的方法（请参阅[ActionSource](http://java.sun.com/javaee/5/docs/api/javax/faces/component/ActionSource.html)上的 get/setAction ）。

因此，应用程序上的侦听器无法捕获来自其他侦听器的事件，因为它不调用它们。

概括：

```
<h:commandButton action="#{bean.foo1}" actionListener="#{bean.foo2}">
    <f:actionListener type="type.Foo3" />
</h:commandButton> 
```

1.  **foo1:** (method *public String foo1()* ) 使用 faces-config [ActionListener](http://java.sun.com/javaee/5/docs/api/javax/faces/application/Application.html#getActionListener())
2.  **foo2:** (method *public void foo2(ActionEvent)* ) 使用[MethodExpressionActionListener](http://java.sun.com/javaee/5/docs/api/javax/faces/event/MethodExpressionActionListener.html)
3.  **Foo3：**（class *public class Foo3 implements ActionListener*）直接注册在组件上

* * *

顺便说一句，最好使用这种模式来创建在 faces-config.xml 中注册的 ActionListener：

```
public class MyActionListener implements ActionListener {

    private final ActionListener delegate;

    public MyActionListener(ActionListener delegate) {
        this.delegate = delegate;
    }

    public void processAction(ActionEvent event)
            throws AbortProcessingException {
        delegate.processAction(event);
    }

} 
```

当 JSF 框架配置自己时，它会将底层的 ActionListener 实现传递给构造函数。这适用于许多 JSF 人工制品（工厂等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-19T22:22:12.413

您在该行中有一个不必要的斜杠 (/)：

```
<to-view-id>/error.jsp/<to-view-id> 
```

应该

```
<to-view-id>/error.jsp<to-view-id> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T06:09:33.960

在这里你可以找到，如何[实现一个动作监听器](http://java.sun.com/javaee/5/docs/tutorial/doc/bnaut.html#bnauv)

在这里，如何[在组件上注册一个侦听](http://java.sun.com/javaee/5/docs/tutorial/doc/bnasz.html#bnatb)器（甚至是 commandButton 的示例）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-09-07T15:36:08.193

我相信你需要：

```
<from-view-id>/*</from-view-id> 
```

在导航规则之后和导航案例之前。

# c# - 查看 Excel 在 .NET 中是否处于单元格编辑模式的解决方法

> ID：464196
> 
> 赞同：2
> 
> 时间：2009-01-21T05:51:52.420
> 
> 标签：c#, vb.net, excel, interop, excel-interop

我有一个用 VB.NET 编写的应用程序，它通过互操作与 Excel 进行交互。我最终遇到了 Cell-edit mode 的已知问题（有关一些背景信息，请参阅[MSDN](http://forums.microsoft.com/msdn/ShowPost.aspx?PostID=4087801&SiteID=1)和[stackoverflow](https://stackoverflow.com/questions/221984/how-to-tell-if-excel-application-is-in-cell-edit-mode)）。

我一直在尝试将建议的代码转换为 VB.NET，但不断收到以下错误：

```
Reference required to assembly 'office, Version=11.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' containing the type 'Microsoft.Office.Core.CommandBars'. Add one to your project. (BC30652) - E:\ ... .vb:3471 
```

原始 C# 代码（来自前面提到的文章）如下

```
private bool IsEditMode()
{
   object m = Type.Missing;
   const int MENU_ITEM_TYPE = 1;
   const int NEW_MENU = 18;

   // Get the "New" menu item.
   CommandBarControl oNewMenu = Application.CommandBars["Worksheet Menu Bar"].FindControl(MENU_ITEM_TYPE, NEW_MENU, m, m, true );

  if ( oNewMenu != null )
  {
     // Check if "New" menu item is enabled or not.
     if ( !oNewMenu.Enabled )
     {
        return true;
     }
  }
  return false;
} 
```

我转换的 VB.NET 代码如下

```
Private Function isEditMode() As Boolean
    isEditMode = False
    Dim m As Object = Type.Missing
    Const  MENU_ITEM_TYPE As Integer = 1
    Const  NEW_MENU As Integer = 18

    Dim oNewMenu As Office.CommandBarControl
    ' oExcel is the Excel Application object 
    ' the error is related to the below line
    oNewMenu = oExcel.CommandBars("Worksheet Menu Bar").FindControl(MENU_ITEM_TYPE, NEW_MENU, m, m, True)
    If oNewMenu IsNot Nothing Then
        If Not oNewMenu.Enabled Then
            isEditMode = True
        End If
    End If
End Function 
```

我添加了对 Microsoft Office 对象库的 (COM) 引用

```
Imports Office = Microsoft.Office.Core
Imports Microsoft.Office.Interop 
```

我有点卡住了。我已经尝试过间接引用 CommandBar 对象，并重新添加引用但无法弄清楚问题所在。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T08:15:22.457

作为快速而肮脏的修复，我使用以下代码作为替代

```
Private Function isEditMode() As Boolean
    isEditMode = False
    Try
        oExcel.GoTo("###")
    Catch Ex As Exception
       ' Either returns "Reference is not valid." 
       ' or "Exception from HRESULT: 0x800A03EC"
       If ex.Message.StartsWith("Exception") then isEditMode  = True
    End Try     
End Function 
```

当 Excel 处于单元格编辑模式时，.GoTo 功能（和相应的菜单项）不可用。如果代码运行时用户在单元格中工作，则为 .GoTo 函数提供一个虚拟目标将不会做任何事情，也不会影响任何事情。

一个额外的功能是不需要对 Microsoft Office 对象 (Microsoft.Office.Core) 库的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T18:03:38.563

```
Function ExcelIsBusy()
ExcelIsBusy = Not Application.Ready
Dim m
m = Empty
Const MENU_ITEM_TYPE = 1
Const NEW_MENU = 18

Dim oNewMenu
Set oNewMenu = Application.CommandBars("Worksheet Menu Bar").FindControl(MENU_ITEM_TYPE, NEW_MENU, m, m, True)
If Not (oNewMenu Is Nothing) Then
    If Not oNewMenu.Enabled Then
        ExcelIsBusy = True
        'throw new Exception("Excel is in Edit Mode")
    End If
End If

End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:52:49.183

我们以前使用过该`Application.CommandBars["Worksheet Menu Bar"]`方法，但遇到了一个缺陷。在编辑模式下退出 Excel 时，编辑模式取消，但该函数仍返回 true，因为菜单项已作为关机的一部分被禁用。

我们改用以下解决方案：

```
public static bool ApplicationIsInEditMode(Application application)
{
    try
    {
        application.ReferenceStyle = application.ReferenceStyle;
    }
    catch (COMException e)
    {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-06T23:38:27.053

一个较旧的帖子，但不是一个老问题。上面的检测和退出解决方案很好，但我找到了另一个让 Excel 退出编辑模式的解决方案，它不需要使用 API 来查找窗口或使用 Sendkeys 来单击单元格，我的解决方案使用事件。Excel 甚至可以处于编辑模式并最小化，这个解决方案仍然有效。如果您正在阅读本文，您可能不需要确切的代码，但如果您需要，请告诉我。首先使用类似于之前解决方案的 try catch 检测 Excel 编辑模式，如果 Excel 处于编辑模式，则设置全局标志 True。然后告诉 Excel 关闭。即使在编辑模式下，此操作也可用。在 Excel OnClosing 事件中检查是否设置了 Global 标志，如果设置了 On Closing 事件“e.Cancel”为 True，这将停止 Excel 关闭。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-07T11:27:04.457

以下代码将检测 excel 是否处于编辑模式并退出：

```
private void exitEditMode()
{

    if (!isExcelInteractive())
    {
        // get the current range
        Excel.Range r = Globals.ThisAddIn.Application.ActiveCell;
        // bring Excel to the foreground, with focus
        // and issue keys to exit the cell
        xlBringToFront();
        Globals.ThisAddIn.Application.ActiveWindow.Activate();
        SendKeys.Flush();
        SendKeys.SendWait("{ENTER}");
        // now make sure the original cell is
        // selected…
        r.Select();
    }
}

private bool isExcelInteractive()
{
    try
    {
        // this line does nothing if Excel is not
        // in edit mode. However, trying to set
        // this property while Excel is in edit
        // cell mdoe will cause an exception
        Globals.ThisAddIn.Application.Interactive = Globals.ThisAddIn.Application.Interactive;
        return true; // no exception, ecel is 
        // interactive
    }
    catch
    {
        return false; // in edit mode
    }
}

private void xlBringToFront()
{
    SetForegroundWindow(Globals.ThisAddIn.Application.Hwnd);
}

[DllImport("User32.dll")]
public static extern Int32 SetForegroundWindow(int hWnd); 
```

# iphone - 如何调整文本大小以适合 UITextField

> ID：464203
> 
> 赞同：1
> 
> 时间：2009-01-21T05:54:27.967
> 
> 标签：iphone

我试图让文本自动调整大小以适应 UITextField。我在界面构建器中设置了适合值的调整，但是当我构建并运行时，文本会从默认大小变为最小大小，并且当框中的文本较少时，大小永远不会增加。

我想让文本像在苹果 iPhone 计算器中那样工作。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T13:46:17.283

文本字段永远不会使文本变大。他们只会将其从默认大小减小到最小大小。

因此，您需要将默认文本大小更改为更大。

请记住，您正在使用高度和宽度。除非您有一个方形文本字段，否则任何调整都不会在两个方向上填充该字段。

# django - Django ORM：获取满足特定条件的最新先前对象

> ID：464206
> 
> 赞同：2
> 
> 时间：2009-01-21T05:58:25.103
> 
> 标签：django, django-models, django-orm

给定一个像这样的对象：

```
class M(models.Model):
  test = models.BooleanField()
  created_date = models.DateTimeField(auto_now_add=True) 
```

给定样本数据（假设单调递增的自动 created_date）：

```
M(test=False).save()

M(test=True).save()

M(test=False).save()

X = M(test=True).save()

M(test=False).save()

Y = M(test=False).save()

M(test=False).save()

M(test=True).save() 
```

如果给定 Y，是否可以使用 Django ORM 创建一个返回 X 的查询（上一个查询，按日期，其中 'test'=True）？如果是这样，怎么做？

换句话说：给定 Y，如何获得“test”为 True 的最近的先前元素？

感谢您的想法和反馈，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-21T06:12:43.140

试试这个

```
M.objects.filter(created_date__lte=Y.created_date).filter(test=True)[0:1] 
```

您还可以添加一个 order_by 子句，例如

```
M.objects.filter(created_date__lte=Y.created_date)\
         .filter(test=True)\
         .order_by('-created_date')[0:1] 
```

这应该有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-21T06:12:06.573

[在Django field lookups](http://docs.djangoproject.com/en/dev/ref/models/querysets/#id7)的帮助下，您可以通过以下表达式实现您想要的效果：

```
M.objects.filter( test=True, created_date__lt=Y.created_date ).order_by( '-created_date' ) 
```

根据结果​​查询集对象中是否有任何元素，您可以选择第一个元素，这将是您想要的最新对象。

# java - Java 线程：指定应该在 run 函数中执行的内容

> ID：464214
> 
> 赞同：1
> 
> 时间：2009-01-21T06:07:44.727
> 
> 标签：java, multithreading, singleton

我有一个`DBAdmin`连接到数据库的类，然后还有一些其他类，例如等`Article`，`Category`它们对数据库执行某些查询。

我在 Swing 应用程序中使用这些类来构建一种小型 Intranet CMS 应用程序。

现在，`Category`该类有一堆`static`方法，例如`addCategory`，`editCategory`等等，例如：

```
public class Category implements Runnable {

    public void run () {
        //Code that will be executed in a separate thread, from the Runnable Interface
    }

    public static int addCategory(Category cat) {
        DBAdmin db = DBAdmin.getInstance();
        db.connectDB();
        //rest of the code that creates sql statement and so on...
    }

    //Other static edit and delete methods that will be called from outside
} 
```

PS`DBAdmin`是一个Singleton Class，`getInstance`方法返回自调用的实例。

现在，我想要做的是数据库操作应该在与应用程序不同的线程中运行，并且我设法做了一些示例测试，这些测试在 a is`run`时在方法中运行。`Thread``started`

但问题是我无法指定在`run`启动线程时应该在方法中运行哪个方法。

从某种意义上说，例如当`addCategory`从外部调用时，该`run`方法应该调用`addCategory`它内部的方法。

有没有办法将函数作为回调参数从方法传递给 run 方法，`addCategory`以便它知道在启动新线程时应该在其中调用哪个函数？还是有一种完全不同的方式来实现我想要做的事情？

PS我在这一点上对Java“相当”陌生，尤其是多线程，所以我可能在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-21T06:41:43.053

听起来您想要的是一个线程，它为整个程序执行所有数据库访问，在这种情况下，您不应该将东西传递给 run 方法。因为当你有一个线程时，它所做的只是调用一个 run 方法，当它启动时，那个 run 方法会一直执行，直到它返回或线程被强制终止。做这种事情的方法是有一个同步队列，比如说，在你的 DBAdmin 类中。然后像 addCategory 这样的方法将准备它们的语句并将它们添加到这个共享队列中。单个数据库线程一次处理队列中的语句，当语句完成时，它通知将其添加到队列中的线程。事实上，Java（至少是最近的版本）包括一组可以为您做这些的类；他们' 重新称为 Executors，它们可以在 java.util.concurrent 包中找到。具体来说，查看 java.util.concurrent.Executors.newSingleThreadExecutor() 方法，这是我在这种情况下使用的方法。

```
class SQLQueryCallable implements Callable<SQLResultSet> {
    private String query;
    public SQLQueryCallable(String query) {
        this.query = query;
    }
    public SQLResultSet Call() throws Exception {
        // execute query
        return results;
    }
}
ExecutorService ex = Executors.newSingleThreadExecutor();

// in DBAdmin somewhere:
    public SQLResultSet runQuery(String query) {
        Future<SQLResultSet> f = ex.submit(new SQLQueryCallable(query));
        return f.get(); // this waits for the query to complete
    } 
```

如果我一直误读您的问题，并且您实际上希望每个数据库查询在其自己的线程中执行，那么我建议创建一个名为 SQLQuery 之类的类，它实现 Runnable（或扩展 Thread）-实际上，您甚至可以考虑使用 java.util.concurrent.Callable，它允许您从其 call() 方法（类似于 run()）返回一个值。类构造函数应该将 SQL 语句作为参数，并且它的 run 方法应该完成执行该语句的工作。然后，如果您使用过 Callable，则可以返回语句的结果，或者如果您使用过 Runnable，则可以将其存储在某个通常可访问的位置。这就是您所问问题的简单答案，即如何将数据传递给 run() 方法：使用类构造函数。

```
class SQLQueryRunnable implements Runnable {
    private String query;
    public SQLQueryRunnable(String query) {
        this.query = query;
    }
    public void run() {
        // execute query
    }
} 
```

PS 多线程是一件很难习惯的事情，但 Java 是一种很好的语言（我认为）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T06:26:56.437

正如 Adeel 指出的那样，您似乎将数据和操作混合在一个类中。但是，如果您想坚持这一点，您可以在 Category 中添加一个命令字段，该字段可以在 run 方法中的开关（或某些此类）中使用。

动作.java：

```
enum Action {ADD, EDIT, DELETE} 
```

在 DbAdmin 中：

```
Category c = new Category(Action.ADD, /* other category parameter */);
c.start(); 
```

类别运行：

```
switch (_action) {
case ADD: addCategory(this);  // or make addCategory instance method
.....
} 
```

# java - 从 MATLAB 传递到 Java 的奇怪类

> ID：464216
> 
> 赞同：4
> 
> 时间：2009-01-21T06:08:14.930
> 
> 标签：java, matlab

我有一些 MATLAB 代码和一些 Java 代码需要相互通信。我得到一个`NoSuchMethodError`. 当我将 MATLAB 双精度数组传递给接受`double[]`参数的 Java 方法时。

所以我写了一个简单的“hello world”来获取传递给方法的对象的类

```
public void printArray(Object array) {

        System.out.println(array.getClass());
        System.out.println(array.getClass().getPackage());
    } 
```

从 MATLAB 调用这个方法，我得到了这个有趣的输出：

```
>> a.printArray(2)
class java.lang.Double
package java.lang
>> a.printArray('hello')
class java.lang.String
package java.lang
>> a.printArray(true)
class java.lang.Boolean
package java.lang
>> a.printArray([2 3 4])
class [D
null
>> a.printArray([true false])
class [Z
null 
```

有人可以解释发生了什么。我有 MATLAB R14，Java 类是用 1.3 兼容性编译的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T06:17:04.223

对我来说看起来很简单：Matlab 将数字作为 Double 实例传递给 Java，字符串作为 String 实例，布尔值作为 Boolean 实例，数组作为 Java 数组。因此，尝试将您的方法签名从 更改`method(double[] blah)`为`method(Double[] blah)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T17:00:25.393

MATLAB 具有一组启发式方法，可将 MATLAB 数据类型转换为被调用的 Java 方法所需的类型。完整的详细信息在 MATLAB 文档中的将[数据传递给 Java 方法中进行了描述。](http://www.mathworks.com/help/matlab/matlab_external/passing-data-to-a-java-method.html)

该方法的签名 ,`void printArray(Object array)`并没有为 MATLAB 提供关于 Java 真正想要什么的太多信息。这就是为什么您会看到多种类型，具体取决于您如何称呼它。

关于您最初的问题，我不确定为什么这对您不起作用。仔细看看[Passing Built-In Types](http://www.mathworks.com/help/matlab/matlab_external/passing-data-to-a-java-method.html#f61465)。

它提供了示例 MATLAB 代码

```
poly = java.awt.Polygon([14 42 98 124], [55 12 -2 62], 4); 
```

其中对应的 Java 方法具有签名

```
public Polygon(int xpoints[], int ypoints[], int npoints) 
```

这与您的问题略有不同，因为它涉及整数数组而不是双精度数组，但应该以相同的方式工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-21T23:01:31.933

我认为原始问题已由[OP 更新](https://stackoverflow.com/questions/464216/strange-classes-passed-from-matlab-to-java#466400)，因此我将借此机会总结我们迄今为止的发现：

*   我们已经确定原始问题中的示例代码会产生预期的行为。**MATLAB 将数据作为原语传递给 Java，Java 对对象执行适当的自动装箱。**[正如Matthew Simoneau 的回复](https://stackoverflow.com/questions/464216/strange-classes-passed-from-matlab-to-java#466086)中所指出的，MATLAB 在其文档的“[将数据传递给 Java 方法](http://www.mathworks.com/help/matlab/matlab_external/passing-data-to-a-java-method.html)”部分中解释了它如何将其数据类型与 Java 数据类型相匹配。令人惊讶的是，单个 MATLAB 数据类型可能会匹配不同的 Java 数据类型，例如以该优先顺序`logical`匹配`boolean`、`byte`、`short`、`int`、`long`、`float`和`double`, 。

*   OP最初遇到的`NoSuchMethodError`那个是由于使用了错误的方法引起的。这[不再是问题](https://stackoverflow.com/questions/464216/strange-classes-passed-from-matlab-to-java#466400)。**使用`double[]`作为方法参数有效。**

*   **“奇怪的”类名（`[D`和`[Z`）实际上是 Java 用来描述原始类型数组的符号。**API 解释了[Class.getName()](http://java.sun.com/javase/6/docs/api/java/lang/Class.html#getName())中的用法。

结案=）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T18:17:01.870

显然，java 很好地接受了数组。它的 Arrays.toString() 方法无法处理该输入。我在方法签名中使用了 double[] 并在循环中打印了数组，它起作用了。然而，为什么会出现奇怪的类名仍然是一个悬而未决的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-21T18:28:58.007

正如其他人所说，这是预期的行为。Java 数组只是没有非常有用的字符串表示。如果您想获得数组的更有用的字符串表示形式，可以将它们包装在 List 中，例如：

```
Arrays.asList(new Double[] { 1.1, 2.2, 3.3 }) 
```

# firebug - 如何破译 Firebug 以提高网站速度

> ID：464217
> 
> 赞同：0
> 
> 时间：2009-01-21T06:08:37.423
> 
> 标签：firebug

我正在尝试修复我的网站，并发现了这个名为 Firebug 的好工具。我试图查明为什么我的网站加载速度很慢（基于 wordpress 的网站）。我希望看看是否有人可以给我一些提示。我在 Net->All 下得到的结果是。

```
GET www.XXXXX.com  http://www.XXXXX.com/  302 Moved
Temporarily                   ?        10.08s
GET XXXXX.com           http://XXXXX.com/         200
OK                       XXXXX.com  9 KB   7.36s
GET submenucontents.htm?1232464334833
http://XXXXX.com/wp-content/themes/bl_custom/submenucontents.htm?1232464334833
200 OK XXXXX.com  878 B  442ms

3 requests 
```

我首先尝试使用 www 访问该站点（并将其重定向到没有 www 前缀的地址）。

在 GET XXXXX.com 的响应标头下，我得到：

```
Response Headers
Date    Tue, 20 Jan 2009 15:12:03 GMT
Server  Apache
Cache-Control no-store, no-cache, must-revalidate, post-check=0, pre-
check=0
Expires Thu, 19 Nov 1981 08:52:00 GMT
Pragma no-cache
X-Pingback http://XXXXX.com/xmlrpc.php
Set-Cookie xLanguage_7b770aac8932bb67100357a3682248c9=en; expires=Sat,
02-Jan-2010 20:32:09 GMT; path=/

Keep-Alive      timeout=15, max=100
Connection Keep-Alive
Transfer-Encoding       chunked
Content-Type    text/html; charset=UTF-8

Request Headers
Host XXXXX.com
User-Agent      Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.0.5)
Gecko/2008120122 Firefox/3.0.5
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language en-us,en;q=0.5
Accept-Encoding gzip,deflate
Accept-Charset  ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive      300
Connection      keep-alive
Cookie  xLanguage_7b770aac8932bb67100357a3682248c9=en;
PHPSESSID=c8fde81fo6f76uitqemqk7k5b3 
```

如果有人可以提供帮助，将不胜感激！！谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-21T06:19:31.193

对于性能分析，我建议你使用[YSlow](http://developer.yahoo.com/yslow/)，如果页面可以改进，YSlow 会列出需要做的具体更改：

[![](https://i.stack.imgur.com/AXjgd.png)](https://i.stack.imgur.com/AXjgd.png)
[（来源：[yimg.com](http://us.i1.yimg.com/us.yimg.com/i/rt/yslow/perfview.png)）]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-21T06:24:11.310

嗯，如果我没看错，您的服务器需要 10 秒才能响应重定向。还有7秒吐出主页。所以可能需要 17 秒才能看到任何内容。哎哟。

您当然应该按照其他答案的建议安装 YSlow，但它只会告诉您您的服务器（或您与它的连接，或您的 DNS 服务器等）运行速度非常慢。

（注意后面的请求要快得多，我猜是 DNS。如果 YSlow 没有给出任何线索，那么像 Wireshark 这样的工具可以向您显示实际的网络流量，因此您可以看到花费了这么长时间。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T06:18:55.173

安装 YSlow，让它告诉你出了什么问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T06:19:53.220

为 Firebug使用[YSlow](http://developer.yahoo.com/yslow/)

还可以阅读 ACM Queue 杂志的文章[High Performance Web Sites](http://queue.acm.org/detail.cfm?id=1466450)，这是一篇解释清楚的文章，介绍了如何设计快速的客户端体验。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-21T07:01:06.647

另一个很好的读物是雅虎在高性能网站上的东西： [链接文本](http://developer.yahoo.com/performance/index.html#rules) 和[链接文本](http://developer.yahoo.com/performance/rules.html)

# c# - ASP.NET MVC ViewData 空

> ID：464220
> 
> 赞同：5
> 
> 时间：2009-01-21T06:10:29.200
> 
> 标签：c#, asp.net-mvc, .net-3.5

我目前正在使用 C# ASP.NET MVC 创建一个电子商务网站，但遇到了一个问题。在产品页面和搜索结果页面等页面上，我必须将数据列表从我的控制器传递到 ViewPage 并且效果很好。但是，如果 Viewdata 等于 null，则会发生 null 引用异常。当它遍历 ViewData 并显示产品或评论时，它发生在视图页面内。

**//ProductController.cs**

```
public ActionResult Products_Sub(string category, int page)
{
ViewData["Products"] = database.GetByCategory(category, page);
return View();
} 
```

**//ViewPage.cs -- 产品循环**

```
 <ul> foreach (E_Store.Models.Product product in ViewData["Products"] as  
 List<e_store.models.product>)
 {%> 
 <li>
 <img alt="<%= product.Title%>" src="<%= product.Thumbnail %>" /> 
 <a href="/<%=product.Category %>/<%= product.SubCategory %>/<%= product.ASIN %>/1">
 <%=product.Title%></a>
 </li>
 }%>
 </ul> 
```

到达以下代码段时会发生 Null 引用异常：

```
 <ul> foreach (E_Store.Models.Product product in ViewData["Products"] as 
```

我想知道的是，如果确实发生了这种类型的错误，最好的方法是捕捉它，而不是诉诸`if`检查它是否为空的语句。

如果有人知道这样做的好方法，我真的很想知道。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-21T06:16:24.227

在你的情况下，我会让你的 database.GetByCategory(category, page) 方法只返回一个空列表而不是 null，这样你的 foreach 语句就不会有任何数据循环，但你不会得到一个空异常。

如果您不处理列表并且项目为空，我们使用

```
Html.Encode(ViewData.Eval("Field")) 
```

要获取项目的 HTML 值，如果项目为空，它将返回 ""。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T06:20:34.500

您始终可以像这样使用内联的空合并运算符：

```
<%= product.Title ?? "" %> 
```

..但你最终会得到带有空属性的标签。可能不是你想要的。

您将需要在某处使用 ifs。问题需要它。但问题是“你可以把它们放在哪里而不弄乱？”

我很好，我把整个事情都包装在一个 if 中。如果您不是，请尝试为循环的每个项目使用 Html 扩展方法。传入 ViewData 模型对象，可能还有一个布尔条件来测试 eval。我将 Html.Encode() 重载到 Html.IfEncode(condition, stringIfTrue, stringIfFalse) 你会尝试类似的东西，但对于整个图像和锚组。否则可能会在该视图后面的代码中构建组，然后使用

```
<% =GetImageAndLinkHtml() %> 
```

..例如。

如果您需要更多信息，请告诉我

# mutex - 互斥体名称 - 最佳实践？

> ID：464253
> 
> 赞同：9
> 
> 时间：2009-01-21T06:33:46.860
> 
> 标签：mutex, naming

[与这个问题](https://stackoverflow.com/questions/459554/how-do-i-tell-if-one-instance-of-my-program-is-running)相关，命名互斥锁的最佳做法是什么？我意识到这可能会因操作系统甚至版本（尤其是 Windows）而异，因此请在回答时指定平台。我的兴趣是 Win XP 和 Vista。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-21T07:11:15.083

全局互斥锁的一个真正安全的名称是`<a description> + <a GUID>`：

```
MyApp Single Instance Mutex : {c96f7db4-d743-4718-bef0-8533a198bcca} 
```

通过使用这样的名称，其他人绝对不可能使用与您的互斥锁相同的互斥锁名称。

使用进程资源管理器四处探查，您可以看到 GUID 在一些地方使用，但一般情况下它们不使用。不过，确实出现的一种模式是“互斥锁”这个词被大量使用，而微软似乎喜欢使用首都。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T21:38:26.437

**建议：**

将对象类型（在本例中为 Mutex）和应用程序命名空间合并到唯一名称中。这通常是安全的。如果您想真正安全，那么还要附加一个 Guid。

**例子：**

```
 string mutexName = "MUTEX: Skyz.Messaging.ThreadPooling.MyAppSingleInstance"; 
```

**好处：**

通过为您的应用程序创建命名约定，您可以轻松管理许多对象名称，创建更具可读性的代码，并使现有和未来的开发人员非常容易理解代码。

**提示：**

与其在代码中直接使用 Mutex，不如编写一个可重用的包装类，它可以使代码更易于维护，以防您想要更改实现或添加调整。请记住使用一次性模式移除互斥锁，否则您会遇到问题！

```
using (SingletonProcess singletonProcess = new SingletonProcess("MUTEX: Skyz.Apps.MessagingQueue.InstanceMarker"))
        {
            if (singletonProcess.IsDuplicateInstance)
            {
                ConsoleWriter.WriteColorLine("An instance of the ExporterService exists, you cannot start a second instance.");
return  

            } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T06:42:36.053

谷歌搜索 CreateMutex 样本显示“MyMutex”是最常用的互斥锁名称。

因此，您应该将互斥锁命名为“NotMyMutex”以保证唯一性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-21T06:37:27.443

您可以将您要保护的内容的描述与“Guard”一词结合起来

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-04-23T04:57:32.277

我过去没有使用过 GUID，但我开始认为这是个好主意——如果你想想世界上所有开发人员都在使用不同的软件。

除非您想出可以确定是唯一的非常晦涩的名称，否则您应该考虑 GUID。

# jquery - Jquery 表单插件（添加 ajax 表单验证）

> ID：464254
> 
> 赞同：1
> 
> 时间：2009-01-21T06:34:19.963
> 
> 标签：jquery

我正在创建一个通过 Jquery 表单插件提交的注册表单。我正在尝试使用后端 php 文件通过 ajax 验证表单字段。这是我的 Javascript。仅当我将其设置为返回 false 时，它​​才有效，否则它提交它而不验证它，如果我返回它为 true。

```
$(document).ready(function(){
    $(".close_pop").click(function(){
        $("#rc").fadeOut("slow");
    });

    var options = { 
        target:        '.container',
        beforeSubmit: validate    
    }; 
    $('#register_form_id').submit(function() { 
        // inside event callbacks 'this' is the DOM element so we first 
        // wrap it in a jQuery object and then invoke ajaxSubmit 
        $(this).ajaxSubmit(options); 
        // !!! Important !!! 
        // always return false to prevent standard browser submit and page navigation 
        return false; 
    });
}); 
function validate(formData, jqForm, options) { 
    var fn = $('input[@name=first_name]').fieldValue(); 
    var ln = $('input[@name=last_name]').fieldValue(); 
    var e = $('input[@name=maile]').fieldValue(); 
    var p = $('input[@name=pass]').fieldValue();
    var url = "/register/validate?first=" + fn + "&last=" + ln + "&email=" + e + "&pass=" + p; 
    if (!fn[0]) { 
        $("#fn").focus();
        $(".error").fadeIn("slow");
        $(".error").html("Please enter your first name.");
        return false;
    }
    if (!ln[0]) { 
        $("#ln").focus();
        $(".error").fadeIn("slow");
        $(".error").html("Please enter your last name.");
        return false;
    }
    if (!e[0]) { 
        $("#e").focus();
        $(".error").fadeIn("slow");
        $(".error").html("Please enter a valid email address (e.g. name@domain.com.)");
        return false;
    }
    if (!p[0]) { 
        $("#p").focus();
        $(".error").fadeIn("slow");
        $(".error").html("Please enter a valid password (It must be at least 6 characters.)");
        return false;
    }       
     $.get(url , 
        function(data){
        if(data == 'ng') {
            $(".error").fadeIn("slow");
            $(".error").html("We are experiencing technical issues. Please try again later.");
            return false;
        } else if(data == 'f') {
            $("#fn").focus();
            $(".error").fadeIn("slow");
            $(".error").html("Please enter your first name.");
            return false;
        } else if(data == 'l') {
            $("#ln").focus();
            $(".error").fadeIn("slow");
            $(".error").html("Please enter your last name.");
            return false;
        } else if(data == 'e') {
            $("#e").focus();
            $(".error").fadeIn("slow");
            $(".error").html("Please enter a valid email address (e.g. name@domain.com.)");
            return false;
        } else if(data == 'e_u') {
            $("#e").focus();
            $(".error").fadeIn("slow");
            $(".error").html("This email address appears to be registered.");
            alert(data);
            return false;
        } else if(data == 'p') {
            $("#p").focus();
            $(".error").fadeIn("slow");
            $(".error").html("Please enter a valid password (It must be at least 6 characters.)");
            return false;
        } else if(data == 'y') {
            return true;
        } else {
            return false;
        }
      });
      return false;
} 
```

php 文件会回显某些关键字或字母，以说明它是否遇到了问题。如果它运行顺利，它会回显“y”。

正如我上面所说，当数据等于 y 但它不是时，我需要它返回 true。它验证的唯一方法是我是否保留倒数第二行“return false;” 否则它会通过我的 php 后端提交。我在使用 if(!var[0]) { } 函数时没有遇到任何问题，所以这不是问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T06:37:56.397

您可以查看[jQuery Validator 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)，它为您提供了许多验证选项，包括 AJAX 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T07:07:47.117

这是因为您使用 validate 函数就好像它是一个同步操作一样。但是 .get 方法是异步的，这意味着该函数不会等待 xhr 方法返回，而是始终会通过并返回 false。您可以使用 .ajax 方法调用并将其标记为 asynchronous:false 但是这是不好的做法，因为它会为用户锁定 ui，并且如果由于某种原因 xhr 无法返回客户端浏览器，除非您取消通过 xhr 超时调用 - 但我不建议使用这种方法。

由于 nickf 没有尝试[验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。作者提到了[同步 ajax 验证的复杂性](http://bassistance.de/2008/01/30/jquery-validation-plugin-overview/)以及该插件如何帮助您避免担心它。

> Ajax 有助于弥合差距，但在表单提交上同步验证并不是一件容易的事。验证插件使它像纯客户端验证一样简单。您需要做的就是为字段指定“远程”规则并提供指向处理验证的服务器端资源的参数。

# css - 下拉菜单在 IE6 或 IE7 中不起作用在 Firefox 中可以正常工作

> ID：464256
> 
> 赞同：1
> 
> 时间：2009-01-21T06:36:28.727
> 
> 标签：css, internet-explorer-6, internet-explorer-7, drop-down-menu

我被我开发的网站上的菜单卡住了。 [http://charlienutting.com](http://charlienutting.com)

如果您将鼠标悬停在顶部菜单栏的图库上，它应该会显示一个下拉菜单。它在 Firefox 中运行良好，但在 IE6 和 IE7 中很糟糕。

如果有人可以提供帮助，真的很感激。现在大约一周来解决这个问题..

编辑-但是，如果您可以看到可以单击的下拉链接，但这些链接不可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-21T07:02:27.457

当你在 IE 中调试它时发生了什么？你看到了什么错误信息，你尝试了什么？

我很乐意提供帮助，但实际上，您还没有描述问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T07:08:35.930

我猜是透明度问题。也许 js/dropdown.js 中的行看起来像

```
c.style.filter = 'alpha(opacity=' + ( 100 / c.maxh) + ')'; 
```

启动[脚本调试器](http://blogs.msdn.com/ie/archive/2004/10/26/247912.aspx)并查看 c.maxh 的值是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T07:16:50.017

首先让我说你有设计师的天赋:)

但是，该网站的代码存在一些问题。我建议删除该下拉代码并使用 JQuery 的效果库实现您自己的代码（我这样说是因为您已经在页面中加载了 JQuery）。那是浏览器兼容的，所以你不会在 IE 上遇到这些问题。

[http://docs.jquery.com/Effects](http://docs.jquery.com/Effects)

接下来，您的标题会在图库、简历和联系人之间更改大小。您可能希望得到修复。此外，简历页面的链接在 FF 3.4 中的位置很奇怪......最好不要使用绝对定位来制作它们。您可以通过混合“float：right”和“position：absolute”（但不设置“left”或“top”属性）来实现：）

您的页面正在使用 doctype，但未验证。

哦 - 现在是 2009 年，顺便说一句：D（见版权）

暗示：

```
(C) 2008 - <?php echo date("Y"); ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T01:33:06.503

尝试设置[doctype](http://www.w3.org/QA/2002/04/valid-dtd-list.html)。我知道我过去在没有正确文档类型的情况下遇到悬停事件的问题。您当前的页面将 Internet Explorer 设置为 Quirks 模式。

目前，如果在 IE9 中我将模式设置为 IE7，然后将“文档模式”从“Quirks 模式”切换到“Internet Explorer 7”模式，它们会正确显示。

把它放在你的 HTML 文件的顶部，看看设置你的 doctype 是否能解决这个问题：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd"> 
```

# nant - 如何自动化 TeamCity 中控制台应用程序的单元测试？

> ID：464261
> 
> 赞同：3
> 
> 时间：2009-01-21T06:41:34.487
> 
> 标签：nant, automated-tests, teamcity, console-application, xunit.net

我编写了一个包含许多单元测试的控制台应用程序，我想将它包含在我的 nant 构建脚本中，以便它将在我们的 TeamCity CIS 上运行。

不幸的是，我不太确定该怎么做。nant 脚本包含已添加的当前项目的示例……它们都必须提供需要测试的程序集。即 MyProject.dll 但我的控制台应用程序没有类似的东西，因为它编译成 MyProject.exe

必须有一种方法可以自动执行这些测试，因为我能够在 Visual Studio 中毫无问题地运行单元测试。

有谁知道这是否以及如何可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-27T12:00:59.760

这个问题的答案是在添加 DLL 程序集列表的同一位置添加可执行文件的名称。单元测试集被编译成可执行文件，而不是单独的 dll 文件。

[Gishu](https://stackoverflow.com/users/1695/gishu)是这个答案的功劳……因为他通过评论回答了我……但是，我想将此问题标记为已回答，因此我正在写下答案，以便其他人可以从中受益解决方案。

Gishu，如果您回到这个问题，请随时写下您的评论作为答案，我会将已接受的答案更改为您的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-26T17:12:31.723

您对这些测试使用什么测试框架？你提到了 Visual Studio，我猜它是 mstest。TeamCity 从 4.0 开始为 sln2008 构建运行器添加了对 MSTest 的支持。

您能否在 [http://www.jetbrains.net/confluence/display/TCD4/.NET+Testing+Frameworks+Support上查看支持的 .NET 单元测试框架的完整列表](http://www.jetbrains.net/confluence/display/TCD4/.NET+Testing+Frameworks+Support)

无论如何，请查看 [http://www.jetbrains.net/confluence/display/TCD4/Build+Script+Interaction+with+TeamCity上的自定义单元测试集成手册页](http://www.jetbrains.net/confluence/display/TCD4/Build+Script+Interaction+with+TeamCity)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-26T17:14:36.337

我刚刚注意到 xUnit 标签。xUnit 支持 TeamCity。请参阅 [http://www.codeplex.com/xunit/WorkItem/View.aspx?WorkItemId=4278](http://www.codeplex.com/xunit/WorkItem/View.aspx?WorkItemId=4278) 了解更多详情。

# api - 是否有使用 FriendFeed API 的应用程序？

> ID：464263
> 
> 赞同：0
> 
> 时间：2009-01-21T06:42:57.497
> 
> 标签：api, friendfeed

有谁知道任何使用friendfeed API的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T06:48:35.567

[Ping.fm](http://ping.fm/)发布到 FriendFeed。

[FriendDeck](http://www.frienddeck.com/)从 FriendFeed 聚合。

两者都使用远程密钥身份验证和 FriendFeed API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-23T18:38:47.910

还有一个使用新的 FriendFeed API 构建的自动关注应用程序[http://www.ffollo.com 。](http://www.ffollo.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T19:50:34.983

[FFToGo](http://www.fftogo.com/)是一个很好的 FriendFeed 移动界面，它建立在 FF api 之上。它的开发人员随后被 Friendfeed 聘用，并且仍然在那里工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-17T16:10:20.983

好吧，我最近发布了一个使用 FriendFeed API 的脚本，它在[GitHub 上](https://github.com/adbar/microblog-explorer)。

# .net - 对于使用 Visual Studio 08 的独立程序员来说，最好的源代码控制系统是什么？

> ID：464264
> 
> 赞同：9
> 
> 时间：2009-01-21T06:44:46.510
> 
> 标签：.net, visual-studio, version-control

我是第一次为客户编写 C# 应用程序，但我不确定如何采用版本控制系统。

我的版本控制系统是由每天制作源代码的完整副本组成的，所以我永远不会浪费一天以上的工作。

我想做一些不那么原始的事情。哪种源代码控制软件最适合使用 Visual Studio 2008 的单人团队？

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-01-21T06:47:50.123

我会使用 Subversion，使用 [TortoiseSVN可以](http://tortoisesvn.tigris.org/)[很容易地设置](http://vincenthomedev.wordpress.com/2007/10/15/setup-svn-local-repository-step-by-step/)本地存储库。

为了让 IDE 集成来管理最常见的操作，我真的推荐你[AnhkSVN](http://ankhsvn.open.collab.net/)，一个用于 Visual Studio 的 Subversion SourceControl Provider。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-21T06:47:57.453

我偏爱[Sourcegear](http://www.sourcegear.com/)，好吧，因为那是我使用的:-)。它对一名开发人员免费，并且与 Visual Studio 很好地集成在一起。

另一个不错的选择是[Subversion](http://subversion.tigris.org/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-21T07:09:51.530

我会使用[Perforce](http://www.perforce.com)。它对单个项目是免费的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-21T06:50:59.443

我处于类似的情况，并且有一个带有 VisualSVN 服务器的登台服务器，我在我的开发机器上使用 TortoiseSVN。

我还使用 VisualSVN 与 Visual Studio 集成，但您可能不需要。

我还建议每天提交一次以上。不要给自己设定一个最小的时间表，而是在完成每一项功能或你认为一天中的小里程碑之后尝试提交。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-21T06:56:24.207

我不确定什么是最好的，但有很多免费的可供选择。

[查看维基百科](http://en.wikipedia.org/wiki/Category:Free_revision_control_software)上列出的那些

在我的项目中，我通常使用 Subversion。它易于设置和使用。

我用过 Visual Source Safe ……但我发现 Subversion 要好得多……

我听说过关于 Git 的好报告……但由于我从未使用过它，所以我无法真正给你推荐。

最终很高兴看到您想使用 VCS，因为这绝对是推荐的做法。我认为使用任何 VCS 都比不使用 VCS 要好。

但至于哪一个是最好的？好吧，可能只有您可以根据您的需求和经验水平来确定。考虑一下人们在这个网站上提出的建议，但自己亲自尝试一些并下定决心。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-21T08:24:59.740

[集市](http://bazaar-vcs.org)是个不错的选择。它比 Subversion、Perforce 或 CVS 更易于安装，并且不需要服务器组件。在 Windows、Mac 或 *nix 上同样有效。我没有使用过 SourceGear，但我相信它使用了类似的客户端-服务器模型来进行颠覆。这将引起争论，但我发现命令行界面比 Git 更简单，但也许这只是我。没有与 VisualStudio 的集成，但老实说，除了 AnkSvn 可能的例外，我还没有看到任何做得很好的东西。如果您可以时不时地使用命令行，那么没有什么比这更简单的了。

安装 Bazaar 后 - 将其与现有代码一起使用很简单：

```
cd mycode              # base directory of your source tree 
bzr init .
bzr add *              # recursively adds your source tree
bzr commit -m "first commit ! " 
```

你完成了。然后 - 假设您在该目录中有一个文件 foo.c ，您可以这样做：

```
bzr log foo.c
------------------------------------------------------------
revno: 1
committer: me<me@MYHOST>
branch nick: tmp2
timestamp: Wed 2009-01-21 16:59:55 +0900
message:
  first commit 
```

现在像往常一样编辑您的代码，每当您准备好提交更改时，再次运行 bzr commit。

请参阅[教程](http://doc.bazaar-vcs.org/bzr.dev/en/mini-tutorial/index.html)页面以获得更深入的介绍。

它还附带了一些有用的工具，例如 bzr-svn，您可以使用这些工具将本地 Bazaar 存储库导入 Subversion 存储库，同时保留完整的历史记录。所以我的雇主使用 Subversion，但我在本地机器上使用 Bazaar 来进行小型测试应用程序和实用程序脚本。然后，如果需要将它们添加到官方工作存储库中，那就太好了。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-23T21:23:36.810

SourceGear Vault 很棒，是的，它仍然免费供个人使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-21T06:47:53.977

SVN 是一个很好的工具，可以很好地与 windows 和 VS 集成。下载 TourtisSVN。我用

[http://ankhsvn.open.collab.net/](http://ankhsvn.open.collab.net/)

作为一个 VS 插件。

开始使用 SVN 真的很容易，而且真的很有帮助；特别是当你把它放在网络服务器上时，这样你就可以在所有计算机之间同步你的代码，无论你在哪里。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-07-07T17:38:52.160

为 SVN 再添一笔。太棒了。

您必须为客户端使用 TortoiseSVN。（哦，可能还有其他客户端）对于 IDE 集成，我同时使用了 AnkhSVN 和 VisualSVN。VisualSVN 对于 IDE 集成 IMO 来说要好得多……但它不是免费的。（但它很[便宜](http://www.visualsvn.com/visualsvn/purchase/#faq_how_many)。）对我来说，如果我不能使用 VisualSVN，我可能会完全放弃 IDE 集成而只使用 Tortoise。

与其他人一样，对您进行单独的源代码控制有好处。在没有它的情况下，我独自工作了 10 年，不知道我是如何做到的。

赛斯

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-01-11T17:40:13.237

嗯，有 SourceSafe，它通常随 Visual Studio 一起提供。我已经快十年没有使用它了，而且它非常有限。在大约六人的编程小组中，我们正在挑战极限。当然，你只是一个人；它可能已经改进了。

在那些日子里，Perforce 要好得多 - 但适用于更大的群体并且超出了你的价格范围（或者我的，现在我是独立的！）

Subversion (SVN) 和 TortoiseSVN 客户端是我目前用于洲际源代码控制的。做我们需要的。对于一个人来说，它应该工作得很好。

* * *

## 回答 #11

> 赞同：-5
> 
> 时间：2009-01-21T07:01:04.947

将 SVN 或 GIT（或任何其他工具）引入您的工作流程有其自身的开销，有时收益不会超过开销。

无论如何，如果您每天都在制作源代码的完整副本，那么您已经拥有了源代码控制。

如果您不确定是否需要 SVN 或 GIT 等专业的源代码控制工具，则不需要它。

# database - 多少应用程序“智能”应该驻留在数据库中？

> ID：464272
> 
> 赞同：10
> 
> 时间：2009-01-21T06:49:30.260
> 
> 标签：database

我最近注意到一种趋势，即人们将越来越多的处理从数据库转移到应用程序中。有些人把它带到了我看来荒谬的极端。

我见过的应用程序设计不仅禁止所有使用存储过程，还禁止在数据库中强制执行任何类型的约束（这将包括主键、外键、唯一性和检查约束）。我什至见过只需要使用存储在数据库中的一种数据类型的应用程序，即 varchar(2000)。不允许使用 DateTime 和数字类型。事务和并发也在数据库之外处理。

有没有人看到这些应用程序成功实施？我处理过的两种以这种方式实现的实现都存在各种数据完整性和并发问题。谁能解释这种将东西（逻辑、处理、约束）移出数据库的趋势？其背后的动机是什么？这是我想象的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-21T11:03:11.650

首先，我真的希望没有 PK 和 FK 以及合理数据类型的数据库不会出现趋势。那真的会是一场悲剧。

但肯定有一大群核心开发人员更喜欢将逻辑放在他们的应用程序中而不是存储过程中。我同意 Riho 的主要原因：通常，DBA 管理数据库，这意味着开发人员必须经历大量管理开销——获得 DBA 的批准——才能创建和更新存储过程。程序员天生喜欢控制他们的世界，并以“他们的方式”做事。

还有几个有效的技术原因：

1.  用于开发存储过程的 SQL 的过程扩展（例如 T-SQL）传统上缺乏用户定义的数据类型、可调试性、可移植性和与外部系统的互操作性——所有这些都有助于开发可靠的大型软件。（而且笨拙的语法也无济于事。）
2.  软件版本控制（例如 svn）适用于管理非常大的代码库，但管理 DB 模式更改是一个更难的问题，并且支持较少。每个严肃的商店都对其应用程序代码库使用版本控制，但许多商店仍然没有任何严格的系统来管理他们的数据库；因此，存储的 proc 很容易落入一个未版本化的“黑洞”，这使编码人员非常紧张。

我个人的观点是，核心业务逻辑越接近数据越好，特别是如果有多个代理访问数据库（或者将来可能会这样做）。T-SQL 及其同类语言是弱语言，这是一个不幸的历史产物，导致了“数据和逻辑应该分离”的想法的兴起。我的理想世界是每个业务规则都封装在数据库强制执行的约束中，并且所有不一致都会*很快失效*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-21T06:56:52.583

我喜欢将逻辑排除在数据库之外。我倾向于避免使用存储过程和触发器。不过，我确实总是使用正确的数据类型、键、索引和约束。我看到它的方式是数据库是数据库，应用程序是应用程序。数据库应该正确有效地存储您的数据，而应用程序应该拥有逻辑。也许我从来没有遇到过需要存储过程或触发器的情况；因此从未倾向于使用它们来解决问题。但对我来说，在数据库中给逻辑一个家对我来说似乎是“混乱”的。我宁愿从应用程序本身控制一切。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-21T07:00:37.477

这一趋势源于这样一个事实，即软件技术行业主要由人类组成和驱动，因此受到趋势和非理性行为的影响。要了解今天发生的事情，需要对数据库的历史以及它们与编程语言的并行开发有一点了解。

简而言之，这个答案可能会被否决：SQL 是数据库语言世界的 IE6。它打破了关系模型的许多规则——换句话说，它有点像一个计算器，它执行不正确的乘法运算，并且没有减号运算符。SQL 还不够完整，无法成为真正的解决方案。它的开发从未超出原型阶段，也从未打算用于工业环境。但后来被 oracle 天真地使用，结果证明它是一个“杀手级应用”，SQL 成为行业标准而不是其技术上的优势竞争对手，剩下的就是历史了。SQL 的语法基于一组命令行表格数据处理工具和 COBOL。充满了错误、不一致和混杂的专有版本和功能

我认为你必须谈论的趋势是最近 ORM 的扩散：错误地试图修补 SQL 的明显缺陷。数据库触发器和过程是试图修补 SQL 问题的另一个错误功能。

如果历史以一种合乎逻辑且有序的方式进行，那么您的问题的答案将很简单：只要遵循关系模型的规则，一切都会自行解决。不幸的是，关系模型的规则并不完全适合当前的基于 SQL 的 DBMS，因此不幸的是，一些应用程序级别的摆弄、触发器或任何其他愚蠢的补丁是必要的，最终成为主观意见的问题，而不是合理的论点，您使用哪种愚蠢的技巧。

所以真正的答案是尽可能地遵循关系模型，然后在剩下的部分中捏造它。如果您是唯一使用数据库的人，请将逻辑放入应用程序中，并且您需要将所有源代码保存在版本存储库中。如果多个应用程序可能使用该数据库，请尽可能使数据库成为防弹和自给自足——这里的主要目标是确保数据保持一致。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-21T09:11:14.247

最终，数据库以及您如何连接到它是您的“持久性 API”——数据库中有多少，应用程序中有多少是特定于应用程序的。但重要的方面是 API**边界**负责生成或使用正确的数据。

就个人而言，我更喜欢应用程序中的瘦访问层和数据库中的 sprocs/PKs/FKs 来强制事务正确性并启用 API 版本控制。这也允许其他应用程序在不破坏数据模型的情况下修改数据库。

如果我看到另一个白痴使用 *SELECT * FROM blah* 我会和 Uzi 一起发疯... :-)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-21T10:45:00.953

“数据库应该正确有效地存储您的数据，而应用程序应该拥有逻辑” - Nelson LaQeut 在另一个答案中。

这似乎是问题的症结所在：所有“逻辑”都属于应用程序而不是数据库。但“逻辑”是什么意思？有各种各样的“逻辑”，其中一些属于应用程序，而另一些，我想说，最好放在数据库中。

我认为大多数开发人员会同意（当然？）基本数据完整性（例如主键和外键）属于数据库。对于更复杂的数据完整性逻辑的共识较少——即使是不起眼但有用的检查约束通常也被严重低估了。.

应用程序阵营认为数据库“仅仅是”一个存储“属于”他们的应用程序的数据的地方。数据库阵营（我所在的地方）将应用程序视为“仅”一个（也许是目前唯一）“属于”数据库的数据用户 - 或者更确切地说属于业务并由业务**管理**数据库（DBMS = 数据库**管理**系统）。

如果您的所有数据逻辑都绑定在您的应用程序中，那么当应用程序需要以最新的流行范式重写时会发生什么（或者您认为 J2EE 是最后一个）？正如 Tom Kyte 经常说[的，一切都与数据有关](http://tkyte.blogspot.com/2007/10/it-all-about-data.html)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-21T06:56:42.523

数据库是应用程序的一个组成部分，但每个人对此的解释不同。隔离它们绝对是明智之举，但这并不意味着您可以规避它们在您的编程中所做的事情。正确的数据类型和主键引用是良好数据库设计的重要组成部分，在此基础上可以构建良好的应用程序。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-21T07:21:38.603

虽然我个人认为数据库应该有足够的智慧来保护自己，但一些不了解数据库不是愚蠢服务的人认为，并且没有错误地介意你，数据和逻辑应该分开。现在在很多情况下，数据和逻辑的分离是一个强大的工具，但是大多数数据库已经为我们提供了原子性、冗余、处理、检查等的可靠实现......这些服务及其 API 因供应商而异，许多应用程序程序员都觉得值得尝试在应用程序层实现这类东西，以避免将自己与特定的数据库层捆绑在一起。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-21T06:55:36.003

我不能说我已经看到了创建具有糟糕数据库设计的糟糕应用程序的“趋势”。编程就像任何其他学科一样，有些人不会学习工具或只想偷工减料。我什至与一个不“信任”数据库的人交谈过。您描述的应用程序正如您所说的，可笑的噩梦。不要跟随那些“趋势”。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-21T07:04:30.807

我还是更喜欢在 SQL Server 中使用存储过程和函数。它实际上为应用程序增加了更多的灵活性。它还具有性能优势。一般来说，我认为将所有内容都放在应用程序中并不是一个好主意。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-21T07:21:03.410

我认为那些创建没有索引或只有一个 VARCHAR(2000) 列的数据库的“开发人员”只是第一次尝试进入高价 IT 世界的艺术专业。没有人，即使是一点点的 IT 教育，也不会制作这种数据库结构。

我可以理解将逻辑排除在格式良好的数据库之外的原因。通常进行更改非常耗时（您必须说服数据库管理员进行更改，以及随之而来的所有繁文缛节）。如果业务逻辑在您的程序中，那么它只取决于您。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-01-21T08:58:23.790

在数据库中使用约束，但对于任何复杂的逻辑，我会将其放在数据访问层中或使用标准对象关系映射 (ORM) 工具之一，例如 Hibernate/NHibernate。

人们普遍认为这会影响性能；基于预编译存储过程但必须在每次调用时编译“原始”查询的观点。但是，我主要在 SQL Server 2005/2008 中工作，这在处理“原始”参数化查询、缓存已编译的查询路径以供将来调用数据库方面非常有效。这意味着在 SQL Server 下，存储过程的性能与参数化 SQL 查询的性能基本上没有区别。

丢失存储过程的唯一缺点是，如果您对数据库安全权限非常精细，并且在数据库登录级别强制执行安全性。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-01-21T12:47:11.270

我有一个简单的哲学。

*   如果需要保持数据库安全并处于一致状态，请确保在数据库中进行

我确实尝试在那里保留很多其他东西，在我的世界中，更新客户的数据库比更新他们的应用程序更容易......

本质上，我尝试将数据库视为伪对象。一堆我可以调用的方法等，但我不希望应用程序关心内部数据存储的细节。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2009-01-21T09:33:21.973

根据我的经验，将任何应用程序逻辑放在数据库中*总是*会导致 WTF。不管数据库程序员多么聪明，数据库多么先进，它总是以错误告终。相反的问题是“我的 C# 代码应该多久使用它自己的平面文件结构和查询语言管理关系数据”，答案是（几乎）总是*never*。

我觉得数据库应该是用来做数据存储的，这是它擅长的。

# css - 放置在css中时，为什么Firefox无法读取带有空格的图像路径？

> ID：464295
> 
> 赞同：3
> 
> 时间：2009-01-21T07:05:39.773
> 
> 标签：css, firefox

例如，类似css中的这条规则

`div.something { background-image: url(http://i2.photobucket.com/albums/y24/5609903697/Beyond Birthday/BB39.jpg); }`

在 FF 中不起作用，但在 IE 中会起作用，因为“Beyond”和“Birthday”之间有一个空格。我知道解决方案是要么没有空间，要么放 %20%，但只是想知道为什么 IE 可以处理这个问题而 FF 不能。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-21T07:08:15.447

您是否尝试过用单引号将网址括起来？

```
background-image: url('/folder/file name.jpg'); 
```

这没有回答为什么部分，但我假设这是因为 IE 更宽容，而 Firefox 可以正确解析 CSS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-21T07:08:20.703

FF 需要引用 url。如果您按如下方式格式化 CSS：

```
div.something {
  background-image:url('http://i2.photobucket.com/albums/y24/5609903697/Beyond Birthday/BB39.jpg'); 
} 
```

...文件应该可以工作。至少它对我有用，当我尝试使用 FireBug 时（省略引号时不显示背景图像）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-21T07:08:27.413

简单地把它放在引号里。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-21T08:26:28.893

用“%20”替换空格，就像它应该在 Urls 中编码一样？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-12T08:41:08.947

如果不引用 URI，则必须反斜杠转义任何会导致该值不是 URI 令牌的字符。这些字符包括：

> 括号、逗号、空格字符、单引号 (') 和双引号 (")

请参阅[http://www.w3.org/TR/CSS2/syndata.html#value-def-uri](http://www.w3.org/TR/CSS2/syndata.html#value-def-uri "URL 和 URI")。

当任何规则发生解析错误时，整个规则都会被丢弃。兼容的浏览器永远不应尝试从此类解析错误中恢复。在这种情况下，Internet Explorer 未遵循 CSS 建议，并且其行为不正确。（IE 获取 CSS 错误。还有什么新内容。）

您的 CSS 规则可以通过上述引用或转义来修复，如下所示：

```
div.something {
  background-image: url(http://i2.photobucket.com/albums/y24/5609903697/Beyond\ Birthday/BB39.jpg);
} 
```

# castle-windsor - 谁调用带有参数的构造函数（Castle.Windsor）

> ID：464299
> 
> 赞同：0
> 
> 时间：2009-01-21T07:07:34.140
> 
> 标签：castle-windsor

我正在按照在线教程学习 Castle.windsor。这是简单的示例代码：

```
public class Form1 {
    private readonly HttpServiceWatcher serviceWatcher;
    private System.ComponentModel.Container components = null;

public Form1()
{
    InitializeComponent();
}

public Form1(HttpServiceWatcher serviceWatcher) : this()
{
    this.serviceWatcher = serviceWatcher;
}
} 
```

HttpServiceWatcher 在 xml 配置文件中。我的问题是：谁在调用具有参数的构造函数：`public Form1(Http....)`？在 program.cs 我有这个：

```
container.AddComponent("form.component",typeof(Form1));

Form1 form1 = (Form1) container["form.component"];

Application.Run(form1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-22T18:39:07.300

容器在创建请求的对象时调用构造函数。被调用的构造函数是容器可以满足的具有最多参数的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T07:28:43.097

依赖容器本身创建对象（并因此调用构造函数）。

# c# - “纯虚函数调用”消息框

> ID：464311
> 
> 赞同：3
> 
> 时间：2009-01-21T07:12:54.923
> 
> 标签：c#

我的一个 C# Winforms 应用程序随机显示一个“**纯虚函数调用**”消息框。当我单击该消息框的确定按钮时，**应用程序立即关闭**。我在我的应用程序日志文件中找不到任何异常，并且事件日志为空。谁能告诉我这次崩溃的可能原因以及我如何进一步分析问题的根本原因？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-21T07:19:57.653

你是从析构函数中调用抽象函数吗？

通过某个搜索引擎：[http ://www.google.com/search?q=pure+virtual+function+call+c%23](http://www.google.com/search?q=pure+virtual+function+call+c%23)

雷蒙德有一个非常详细的回应：http: [//blogs.msdn.com/oldnewthing/archive/2004/04/28/122037.aspx](http://blogs.msdn.com/oldnewthing/archive/2004/04/28/122037.aspx)

# linux - 如何在 x86 linux 上执行 MIPS 汇编程序？

> ID：464313
> 
> 赞同：17
> 
> 时间：2009-01-21T07:14:08.417
> 
> 标签：linux, assembly, x86, mips, qemu

为了运行 MIPS 汇编程序，是否有任何用于 x86 linux 的命令行解释器或任何其他程序集？

我希望能够编写简单的 MIPS 汇编程序并从本地机器上的控制台运行它们。

我知道 SPIM，但它~~需要 X Windows~~，我很好奇是否有更好的选择。

编辑：原来它不需要 X Windows。我仍然有 SPIM 的问题。在我的拙见中不是最好的。Qemu / 交叉编译的工具链需要更多的工作，但我的怪癖更少。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-21T07:51:13.550

顺便说一句，[Spim](http://pages.cs.wisc.edu/~larus/spim.html)不需要 X Windows。它也有一个控制台界面。运行`spim`或`xspim`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-21T08:46:10.867

您将需要一个交叉编译工具链，或者构建您自己的交叉 binutils。对于预构建的工具链，您可以访问[代码源](http://www.codesourcery.com/)。如果您只想编译程序集，那么您只需要 binutils。[Linux Mips](http://www.linux-mips.org/wiki/Toolchains) wiki上有一些指导方针

对于仿真部分，我会选择 QEmu。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-11-06T16:11:02.727

[MARS](http://courses.missouristate.edu/KenVollmar/MARS/)让我的 MIPS 架构的汇编编程变得非常容易。如果您想要 GUI/IDE，我肯定会推荐 MARS。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-17T18:00:58.763

我昨天也是同样的情况。我也不喜欢 SPIM，所以这就是我所做的：

*   安装了 gxemul 和 gxemul-doc（这些是 debian 上的包名）*   按照文档中的详细说明在模拟 MIPS 机器上安装 netbsd*   因为 netbsd 已经包含了标准的 gcc 工具链和 vi，所以你可以开始了。

    建立网络也很容易并且有据可查。这具有不需要摆弄交叉编译的优点。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-18T05:10:21.750

您可以使用 gxemul，它模拟 MIPS 机器（其中包括 Dreamcast），并且能够运行许多操作系统（包括 linux、netbsd 等）。

[gxemul-维基百科](http://en.wikipedia.org/wiki/GXemul)

[gxemul-主页](http://gavare.se/gxemul)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-21T07:23:33.763

[QEmu](http://wiki.qemu.org/Index.html)有一个很好的 MIPS 仿真器。将它与交叉编译的 GCC/binutils 结合起来（从技术上讲，您只需要 binutils 即可获得 GAS，即 GNU 汇编程序），您就可以开始了。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-05T05:41:37.423

假设您希望使用 GCC。

在 x86-64 系统上编译 MIPS，然后使用模拟器运行可执行文件的步骤：

1.  使用交叉编译工具链生成可执行文件。

    *   如果您使用的是 Debian/Ubuntu，请为 MIPS 安装交叉编译工具链。例如，以下任一 APT 包：`gcc-mips-linux-gnu`(MIPS big endian) 或`gcc-mipsel-linux-gnu`(MIPS little endian)。

    *   编译使用`mips-linux-gnu-gcc`（`mipsel-linux-gnu-gcc`对于小端 MIPS）；组装使用`mips-linux-gnu-as`；链接使用`mips-linux-gnu-ld`.

2.  使用模拟器运行可执行文件。

    *   安装一个模拟器，可以在另一种架构（例如 x86-64）上启动为一种架构（例如 MIPS）编译的 Linux 程序：`sudo apt-get install qemu-user`。

    *   使用模拟器运行为 MIPS 编译的可执行文件：（`qemu-mips ./a.out`或`qemu-mipsel ./a.out`为 little endian MIPS）。简单地跑步`./a.out`也可以。如果您（或您的发行版的 qemu 包）已设置 binfmt-misc 以透明地运行 qemu-user，则模拟器可能会自动使用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-21T07:17:12.153

也许你可以看看这些[模拟器](http://www.linux-mips.org/wiki/Emulators)？我不是专家，但清单似乎不错。

# python - Python - 每分钟点击次数的实现？

> ID：464314
> 
> 赞同：2
> 
> 时间：2009-01-21T07:14:19.397
> 
> 标签：python

这似乎是一个微不足道的问题，但我似乎无法确定我想怎么做。基本上，我希望能够从套接字服务器生成一个数字，它可以随时给出最后一分钟收到的数据包数量。我该怎么做？

我在考虑可能对使用当前秒作为键的字典求和，当接收到数据包时，它将该值增加一，并将其​​上方的 second+1 键设置为 0，但这似乎很草率。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T07:19:56.423

在其他语言中解决这个问题的一个常见模式是让被测量的东西简单地增加一个整数。然后你把它留给监听客户端来确定间隔和频率。

所以你基本上不要*让*套接字服务器知道像“分钟”这样的东西，因为这是观察者计算的一个特征。然后您还可以支持具有不同间隔分辨率的多个侦听器。

我想您想要某种环形缓冲区结构来进行滚动日志记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T07:24:35.430

对于它的价值，如果您不是每秒都收到一个数据包，那么上面的实现将无法工作，因为下一秒条目不一定会重置为 0。

无论哪种方式，afaik 执行此操作的“正确”方法（ala 日志分析）是保留您收到的所有查询的有限记录。因此，只需将查询、接收时间等放入数据库，然后简单的数据库查询将在一分钟内或过去的任何一分钟内为您提供使用。不过，不确定这对你来说是否太重量级了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T07:35:51.740

当您说最后一分钟时，您是指从 x:00 到 x:59 的确切最后几秒还是最后一整分钟？后者将更容易实现，并且可能会给出准确的结果。您有一个 prev 变量保存前一分钟的点击值。然后你有一个当前值，每次有新的命中时都会增加。您将 prev 的值返回给用户。在分钟的变化中，您将 prev 与当前交换并重置当前。

如果您想要更高的分析，您可以将一分钟分成 2 到 6 片。每个切片都需要一个变量或列表条目。假设您有 6 片 10 秒。您还有一个指向当前切片 (0..5) 的索引变量。对于每次点击，您都会增加一个临时变量。当切片结束时，您将索引变量的值替换为 temp 的值，重置 temp 并将索引向前移动。您将切片变量的总和返回给用户。

# php - 在 PHP 中通过 SSH 连接到 MySQL 服务器

> ID：464317
> 
> 赞同：27
> 
> 时间：2009-01-21T07:16:21.080
> 
> 标签：php, mysql, ssh

我在远程 Linux 机器上有我的数据库，我想使用 SSH 和 PHP 函数进行连接（我目前正在使用 ssh2 库）。我尝试使用 mysql_connect，但是当我尝试使用此功能时，它使我无法访问（尽管我已授予权限）：

```
$connection = ssh2_connect('SERVER IP', 22);

ssh2_auth_password($connection, 'username', 'password');

$tunnel = ssh2_tunnel($connection, 'DESTINATION IP', 3307);

$db = mysqli_connect('127.0.0.1', 'DB_USERNAME', 'DB_PASSWORD', 
                         'dbname', 3307, $tunnel)
    or die ('Fail: '.mysql_error()); 
```

我收到错误“mysqli_connect() 期望参数 6 是字符串，给定资源”。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-22T02:09:52.663

### SSH隧道解决方案

设置到 MySQL 数据库服务器的 SSH 隧道（通过 Jumpbox 代理以确保安全）。

### (A) 图形用户界面工具

根据您的要求，您可以使用内置 SSH 隧道支持的 GUI MySQL 客户端，例如**Visual Studio Code** [转发端口/创建 SSH 隧道](https://code.visualstudio.com/docs/remote/ssh#_forwarding-a-port-creating-ssh-tunnel)、[TablePlus](https://tableplus.com/)或使用[PuTTY](https://en.wikipedia.org/wiki/PuTTY)设置*本地*端口转发。

在 macOS 上，我喜欢[Secure Pipes](https://www.opoet.com/pyro/)或[TablePlus](https://tableplus.com/)。

### (B) 命令行

**步骤1。**

```
ssh -fNg -L 3307:10.3.1.55:3306 username@ssh-jumpbox.com 
```

这里的关键是**“-L”**开关，它告诉 ssh 我们正在请求*本地*端口转发。

我选择使用上面的**3307**端口。*我的本地*计算机上指向此端口的所有流量现在都将通过我的*ssh 客户端*“端口转发”到在 address 的主机上运行的*ssh 服务器*`ssh-jumpbox.com`。

Jumpbox ssh 代理服务器将代表您解密流量并与您的 MySQL 数据库服务器建立网络连接`10.3.1.55:3306`，在这种情况下。MySQL 数据库服务器会看到来自 Jumpbox 内部网络地址的连接。

**本地端口转发语法**
语法有点棘手，但可以看作：

```
<local_workstation_port>:<database_server_addr_remote_end_of_tunnel>:<database_server_port_remote_end> username@ssh_proxy_host.com 
```

如果您对其他开关感兴趣，它们是：

-f（进入后台）
-N（不执行远程命令）
-g（允许远程主机连接到本地转发端口）

私钥认证，在上面添加（-i）开关：

> -i /path/to/private-key

**第2步。**

告诉你的本地 MySQL 客户端通过你的机器上的本地端口 3307 (-h 127.0.0.1) 通过你的 SSH 隧道连接，它现在转发通过你在步骤 1 中建立的 SSH 隧道发送到它的所有流量。

```
mysql -h 127.0.0.1 -P 3307 -u dbuser -p passphrase 
```

客户端和服务器之间的数据交换现在通过加密的 SSH 连接发送并且是安全的。

**安全注意事项**
不要直接通过隧道连接到您的数据库服务器。拥有可从 Internet 直接访问的数据库服务器是一项巨大的安全责任。将隧道目标地址设置为 Jumpbox/Bastion 主机的 Internet 地址（请参见步骤 1 中的示例），并将您的数据库作为远程网络上数据库服务器的*内部*IP 地址。SSH 将完成其余的工作。

**步骤 3。**

现在连接您的 PHP 应用程序：

```
<?php
      $smysql = mysql_connect( "127.0.0.1:3307", "dbuser", "passphrase" );
      mysql_select_db( "db", $smysql ); 
?> 
```

感谢*Chris Snyder 的*精彩[文章](http://chxo.com/be2/20040511_5667.html)，详细介绍了用于 MySQL 连接的 ssh 命令行隧道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-12T19:28:25.987

不幸的是，php 提供的 ssh2 隧道似乎无法处理远程 mysql 连接，因为您无法指定要隧道的本地端口（它仅适用于端口 22 或远程服务器运行的任何 ssh 端口）。我对此的解决方案是通过`exec()`运营商打开隧道并从那里照常连接：

```
exec('ssh -f -L 3307:127.0.0.1:3306 user@example.com sleep 10 > /dev/null');
$mysqli = new mysqli('127.0.0.1', 'user', 'password', 'database', '3307'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-17T17:14:32.603

我一直在寻找同样的东西，但我更喜欢不需要外部命令和管理外部进程。所以在某些时候我想，编写一个可以在任何 PHP 流上运行的纯 PHP MySQL 客户端有多难？根据 MySQL 协议文档，我花了大约半天的时间。

[https://gist.github.com/UCIS/4e509915ed221660e58f5169267da004](https://gist.github.com/UCIS/4e509915ed221660e58f5169267da004)

您可以将其与 SSH2 库或任何其他流一起使用：

```
 $ssh = ssh2_connect('ssh.host.com');
    ssh2_auth_password($ssh, 'username', 'password');
    $stream = ssh2_tunnel($ssh, 'localhost', 3306);
    $link = new MysqlStreamDriver($stream, 'SQLusername', 'SQLpassword', 'database');
    $link->query('SELECT * FROM ...')->fetch_assoc(); 
```

它没有实现完整的 mysqli API，但它应该适用于所有纯文本查询。如果你决定使用这个，请小心，我还没有彻底测试过代码，字符串转义代码也没有经过审查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T07:26:17.393

根据[文档](http://us.php.net/manual/en/mysqli.connect.php)，最后一个参数应该是套接字或管道名称，例如“/var/run/mysql/mysql.sock”。由于您没有使用 UNIX 套接字进行连接，因此这不适用于您……所以请尝试将其排除在外。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-21T07:26:11.907

我相信我（我想大多数人）在让它工作时遇到问题的原因是因为 mysql 服务器中的用户被设置为只允许来自“localhost”而不是 127.0.0.1，即 localhost 的 IP 地址。

我通过执行以下步骤使其工作：

## 第 1 步：允许目标用户使用 127.0.0.1 主机

SSH 正常进入您的服务器，并使用 mysql root 用户登录，然后发出命令：

```
GRANT ALL ON yourdbname.* TO yourdbuser@127.0.0.1 IDENTIFIED BY 'yourdbpassword'; 
```

当然，关键是在上面指定 127.0.0.1。

## 第 2 步：启动到 MySQL 的本地 SSH 隧道

您现在可以启动到远程 MySQL 服务器的本地 SSH 隧道，如下所示：

```
ssh -vNg -L 33306:127.0.0.1:3306 sshuser@remotehost.com 
```

`-v`使 ssh 以详细模式运行，这有助于查看正在发生的事情。例如，当您尝试连接时，您会在终端控制台中看到如下调试输出：

```
debug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0
debug1: Connection to port 33306 forwarding to 127.0.0.1 port 3306 requested. 
```

关闭连接时输出如下：

```
debug2: channel 2: is dead
debug2: channel 2: garbage collecting
debug1: channel 2: free: direct-tcpip: listening port 33306 for 127.0.0.1 port 3306, connect from 127.0.0.1 port 52112 to 127.0.0.1 port 33306, nchannels 3 
```

`-N`使 ssh 不发出任何命令，而是在建立连接后等待。

`-g`允许远程主机连接到本地转发端口。不完全确定这是否有必要，但它可能对通过同一 SSH 隧道多路复用多个连接很有用。

`-L`这是主要参数，指定`33306`连接远程主机的本地IP地址`127.0.0.1`和远程主机的mysql端口的本地端口，通常`3306`.

在此之后，您可以使用所需的任何机制/其他参数通过 SSH 连接到远程主机。在我的情况下，我使用我配置的密钥文件，`~/.ssh/config`所以我只需要指定`user@host`进入。

发出这样的命令会在前台运行 SSH，因此我可以使用`Ctrl + C`. 如果您想在后台进程中运行此隧道，您可以添加`-f`来执行此操作。

## 第 3 步：从 PHP/其他 mysql 兼容方法连接

在您的 localhost 上从上面运行的 SSH 隧道的行为将与您的 mysql 在`127.0.0.1`. 我使用端口`33306`（注意三个 3），它可以让我在其正常端口上运行我的本地 sql 服务器。您现在可以像往常一样连接。终端上的`mysql`命令如下所示：

```
mysql -h 127.0.0.1 -P 33306 -u yourmysqluser -p 
```

其中`-P`（大写 P）指定 SSH 隧道的本地端接受连接的端口。使用`127.0.0.1`IP 地址而不是`localhost`因为 mysql cli 可能会尝试使用 linux 套接字进行连接，这一点很重要。

对于 PHP 连接字符串，我的数据源名称字符串（对于我的 Yii2 配置）如下所示：

```
'dsn' => 'mysql:host=127.0.0.1;dbname=yourdbname;port=33306', 
```

密码和用户名按正常方式指定。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-23T11:23:33.637

即使我尝试通过根凭据和公钥对执行 ssh 来尝试它，但它允许我通过命令行而不是通过 php 代码连接。我也尝试通过创建隧道（通过使用 ssh2 函数），从 php 代码（系统、执行等）运行 shell 命令，但没有任何效果。最后我尝试了 ssh2 函数来执行 shell 命令，它终于工作了:) 这是代码，如果它对你有帮助的话：----

```
$connection = ssh2_connect($remotehost, '22');
if (ssh2_auth_password($connection, $user,$pass)) { 
    echo "Authentication Successful!\n";
} else {
    die('Authentication Failed...');
}

$stream=ssh2_exec($connection,'echo "select * from zingaya.users where id=\"1606\";" | mysql');
stream_set_blocking($stream, true);
while($line = fgets($stream)) { 
    flush();
    echo $line."\n";
} 
```

如果想专门使用 php 函数，它对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-25T21:44:54.443

确保您连接的用户名和密码具有正确的主机名权限。我相信您可以使用 '%' 作为通配符。此外，如果您要连接到不在本地网络上的远程计算机（如果您尝试 ssh 进入它，我会假设您是），您将不得不转发路由器上的端口，服务器所在的服务器用于外部流量能够连接到它。

[http://www.lanexa.net/2011/08/create-a-mysql-database-username-password-and-permissions-from-the-command-line/](http://www.lanexa.net/2011/08/create-a-mysql-database-username-password-and-permissions-from-the-command-line/)

# javascript - Internet Explorer 全屏模式？

> ID：464332
> 
> 赞同：8
> 
> 时间：2009-01-21T07:26:37.330
> 
> 标签：javascript, internet-explorer, fullscreen

我正在构建一个基于网络的免费动态新闻阅读器（又名“自动播放”功能），您可以从这里对其进行测试：

[http://www.fivetechsoft.com/news](http://www.fivetechsoft.com/news)

我想实现一个按钮来全屏显示它。有什么提示吗？

请注意，目前仅支持 IE。其他浏览器支持即将推出。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-21T14:28:22.423

这将简单地发送 F11。对于安全设置较弱的 IE 来说已经足够了。不过，您可能希望保留这些内容仅供内部使用：

```
<script type="text/javascript">
    function max() {
        var wscript = new ActiveXObject("Wscript.shell");
        wscript.SendKeys("{F11}");
    }
</script> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-21T07:33:08.080

以下是有关该问题的一些信息：http: [//www.htmlgoodies.com/beyond/dhtml/article.php/3470521](http://www.htmlgoodies.com/beyond/dhtml/article.php/3470521)

总结一下信息，将这段 JS 粘贴到代码的头部。

```
<script>
<!--
window.open("bigpage.html","fs","fullscreen=yes")
//-->
</script> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-21T14:05:54.043

如果您可以控制机器，例如在 kiosk 安装中，您可以通过运行批处理文件并提供 URL 以“kiosk 模式”启动 IE：（将此字符串和名称保存为“launch.bat”）

```
start iexplore.exe -k "c:\Kiosk\default.htm" 
```

或者

```
start iexplore.exe -k "http://www.google.com" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-21T07:33:45.333

```
<script>
var splashWin = window.open("http://google.com", "win",
    "fullscreen=1,toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=0,resizable=0")
</script> 
```

谷歌是你的朋友：

[http://webfx.eae.net/dhtml/splashwin/splashwin.html](http://webfx.eae.net/dhtml/splashwin/splashwin.html)

:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-21T11:46:13.810

您可以在页面中添加“以全屏模式查看最佳”通知 - 这也可以。

> [我想以编程方式] 全屏显示当前查看的 [窗口]

你看，你所要求的在大多数浏览器中是不可能的，这是一件好事™</p>

想象一下可能性——你进入一个网站，它会以编程方式将你切换到全屏模式，如果你试图返回，它会让你保持在那里。生活在无法关闭的弹出窗口中已经够糟糕了，以编程方式操作浏览器将是（安全性、可用性、你有什么）的噩梦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-11-18T15:50:09.203

要在启动 ie 时实现全屏：

右键单击桌面启动图标...并在目标字段中追加`-k "http://www.google.com"`

完整的目标字段应该类似于

```
"C:\Program Files (x86)\Internet Explorer\iexplore.exe" -k "http://www.google.com" 
```

这将禁用所有 IE 工具栏，您命名的地址栏，您也无法按 F11 返回正常视图

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-08-11T23:02:22.893

Most professional games have a pre-coded button to interface the user to full screen, as an option to the `F11` Key. It should not be viewed as a bad thing.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-21T10:05:03.220

此代码越来越近，但仍在打开一个新窗口，并且窗口标题仍然可见：

window.open（location.href，'全屏'，'全屏，滚动条'）

所以它仍然与按 F11 不同:-(

# c - 串口通讯

> ID：464334
> 
> 赞同：1
> 
> 时间：2009-01-21T07:27:50.463
> 
> 标签：c, linux, serial-port

我正在尝试为用 LINUX 编写的 ac 代码创建一个 GUI。

这段代码基本上连接了两个系统，打开串口，通过端口将数据从一个系统写入另一个系统。我该怎么做呢？

随身携带的开发工具是Qt Designer version 3.3.5 和K Develop，我应该使用哪一个。如何去做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T06:10:39.930

在 Linux 中，每个硬件设备都使用标准文件系统权限映射到文件系统。

如果你只是在Linux下使用一个简单的串口协议，你可以把任何串口设备当成一个文件。这意味着，它们可以仅使用标准文件来打开、读取、写入和处理。

串行端口的“文件名”通常`/dev/ttyS0`或`/dev/ttyUSB0`取决于串行端口的类型。它通常与`/dev/modem`常规分布符号链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T06:24:22.860

如果您实际上必须编写串行端口部分（我从您的问题中不清楚这一点），那么您需要了解的其他系统调用是“ioctl”和“termios”，以设置各种串行端口参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T08:02:53.933

我想你可能找错地方了。您可能应该在网络上搜索有关 C++ 编程的教程，或者获取一本书（那里有很多）。一旦您对 C++ 感到满意（如果您还不熟悉，则需要一些时间），您就可以开始阅读有关编写 KDE 应用程序的内容了。[在KDE 网站](http://www.kde.org)上可能有一些介绍性的东西要阅读，不要忘记 Google 在整个过程中都是你的朋友 ;-)

顺便说一句，Qt Designer 只是一个用于进行 GUI 布局的程序，而 KDevelop 是一个功能齐全的 IDE，它结合了 Qt Designer、文本编辑器和一堆其他东西。您可以使用 KDevelop 编写任何东西，从非常简单的“Hello World”C++ 程序到像 KDevelop 本身一样复杂的程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T23:16:16.880

似乎您使用的是 QT。您应该尝试[QextSerialPort](http://qextserialport.sourceforge.net/ "qextserialport")，它是 QT 的串行端口类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-21T08:33:50.720

doc.trolltech.com网站有大量文档[。](http://doc.trolltech.com)你一定要去看看。我会为您的发行版使用最新的可用 Qt 库，因为它是一个新的开发。

关于串口 C 代码，我会保留它并从您的 C++ 代码中调用它。请注意可能会破坏应用程序交互感觉的耗时操作。

# asp.net - 如何将 Dreamweaver 创建的 HTML 嵌入到 ASP.NET 应用程序中

> ID：464337
> 
> 赞同：0
> 
> 时间：2009-01-21T07:31:03.450
> 
> 标签：asp.net, html, dreamweaver

一位朋友要求我添加一些我真的只知道如何在 ASP.NET 中执行的基于数据库的功能，他主要在 Dreamweaver 中创建了一个视觉上非常吸引人的网站。问题是当我将他生成的 HTML 加载到一个 ASPX 页面中时，它呈现得非常可怕。我尝试向 ASP.NET 项目添加一个基本的 .html 页面，但它看起来仍然很时髦。他在 Mac 上，而我（显然）在使用 Windows 机器。有没有一种干净的方法来获取一个非常完整（但非常静态）的网站并向其中添加 ASP.NET 功能？非常欢迎任何评论。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T10:49:43.783

只是一个快速的想法。

您在评论中说：

> 一切*正常*，只是看起来不像在 Safari 浏览器中那样好

它在哪里看起来不像在 Safari 浏览器中那样好？在 IE/Firefox 中作为 Web 服务器（内置 cassini 服务器或 IIS）的页面，或者在 Visual Studio 中切换到设计视图时？

Visual Studio 在正确渲染事物时遇到了很多麻烦 - 它实际上不符合任何人的定义的标准 - VS2010 显然要好得多 - 例如，尝试查看此页面：[display/box/float/clear test](http://www.w3.org/Style/CSS/Test/CSS1/current/test5526c.htm) in a browser and in the VS设计师 - 非常不同。

如果你的意思是在浏览器中，哪个浏览器？你试过用 Firefox 代替吗？如果它被构建为在 Safari 中看起来不错，它可能会在 Firefox 中运行，但在 IE 中的呈现/布局可能存在问题 - 这是一个相当众所周知的问题。

如果所有样式表都被正确调用（例如检查[Firebug](http://www.w3.org/Style/CSS/Test/CSS1/current/test5526c.htm) for Firefox），那么可能有一些 CSS 问题需要为 IE 解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T07:36:54.533

ASP.NET 不会改变标准 HTML 的呈现。所以一定有其他问题，比如缺少样式表（全部一起或链接断开）或图像。正确复制 HTML 并解决显示问题后，您可以添加 ASP.NET 控件和代码以使其正常运行。

# c# - .NET 的多线程库

> ID：464338
> 
> 赞同：10
> 
> 时间：2009-01-21T07:31:26.477
> 
> 标签：c#, .net, multithreading

我在一些程序中使用了多个线程，但仍然感觉不太舒服。

有哪些适用于 C#/.NET 的多线程库，其中一个有哪些优势？

我所说的多线程库是指所有有助于使多线程编程更容易的东西。

您定期使用什么 .NET 集成（例如 ThreadPool）？你遇到了哪些问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-21T07:46:53.450

在应用程序中使用多个线程有多种原因：

*   用户界面响应能力
*   并发操作
*   并行加速

一个人应该选择的方法取决于你想要做什么。例如，对于 UI 响应性，请考虑使用`BackgroundWorker`。

For concurrent operations (e.g. a server: something that doesn't *have* to be parallel, but probably does need to be concurrent even on a single-core system), consider using the thread pool or, if the tasks are long-lived and you need a lot of them, consider using one thread per task.

If you have a so-called embarrassingly parallel problem that can be easily divided up into small subproblems, consider using a pool of worker threads (as many threads as CPU cores) that pull tasks from a queue. The Microsoft [Task Parallel Library (TPL)](http://en.wikipedia.org/wiki/Task_Parallel_Library) may help here. If the job can be easily expressed as a monadic stream computation (i.e. with a query in LINQ with work in transformations and aggregations etc.), Parallel LINQ (same link) which runs on top of TPL may help.

There are other approaches, such as [Actor-style parallelism](http://en.wikipedia.org/wiki/Actor_model) as seen in Erlang, which are harder to implement efficiently in .NET because of the lack of a green threading model or means to implement same, such as CLR-supported continuations.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-05T01:00:47.023

I like this one [http://www.codeplex.com/smartthreadpool](http://www.codeplex.com/smartthreadpool)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-21T08:20:36.813

Check out the [Power Threading](http://www.wintellect.com/PowerThreading.aspx) library.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-21T18:43:06.153

I have written a lot of threading code in my days, even implemented my own threading pool & dispatcher. A lot of it is documented here:

[http://web.archive.org/web/20120708232527/http://devplanet.com/blogs/brianr/default.aspx](http://web.archive.org/web/20120708232527/http://devplanet.com/blogs/brianr/default.aspx)

Just realize that I wrote these for very specific purposes and tested them in those conditions, and there is no real silver-bullet.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-21T07:39:47.320

我的建议是在迁移到任何其他库之前先熟悉线程池。很多框架代码都使用线程池，因此即使您碰巧找到了 The Best Threads Library(TM)，您仍然必须使用线程池，因此您确实需要了解这一点。

您还应该记住，在实现线程池和对其进行调整方面已经投入了大量工作。即将到来的 .NET 版本有许多由并行库的开发引发的改进。

在我看来，当前线程池的许多“问题”都可以通过了解其优缺点来解决。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-21T08:16:33.187

Please keep in mind that you really should be closing threads (or allowing the threadpool to dispose) when you no longer need them, unless you will need them again soon. The reason I say this is that each thread requires stack memory (usually 1mb), so when you have applications sitting on threads but not using them, you are wasting memory.

For exmaple, Outlook on my machine right now has 20 threads open and is using 0% CPU. That is simply a waste of (a least) 20mb of memory. Word is also using another 10 threads with 0% CPU. 30mb may not seem like much, but what if every application was wasting 10-20 threads?

Again, if you need access to a threadpool on a regular basis then you don't need to close it (creating/destroying threads has an overhead).

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-21T08:55:47.167

You don't have to use the threadpool explicitly, you can use BeginInvoke-EndInvoke if you need async calls. It uses the threadpool behind the scenes. See here: [http://msdn.microsoft.com/en-us/library/2e08f6yc.aspx](http://msdn.microsoft.com/en-us/library/2e08f6yc.aspx)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-28T15:38:24.033

You should take a look at the [Concurrency & Coordination Runtime](http://msdn.microsoft.com/en-us/library/bb905447.aspx). The CCR can be a little daunting at first as it requires a slightly different mind set. This [video](http://channel9.msdn.com/shows/Going+Deep/Expert-to-Expert-Meijer-and-Chrysanthakopoulos-Concurrency-Coordination-and-the-CCR/) has a fairly good job of explanation of its workings...

In my opinion this would be the way to go, and I also hear that it will use the same scheduler as the [TPL](http://msdn.microsoft.com/en-us/magazine/cc163340.aspx).

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-21T07:41:33.557

对我来说，框架的内置类绰绰有余。这`Threadpool`很奇怪而且很蹩脚，但您可以轻松编写自己的。

我经常将这个`BackgroundWorker`类用于前端，因为它让生活变得更加轻松——事件处理程序的调用是自动完成的。

我定期手动启动线程并将它们安全地保存在字典中，`ManualResetEvent`以便能够检查其中谁已经结束。我`WaitHandle.WaitAll()`为此使用方法。问题是，WaitHandle.WaitAll 一次不接受超过 64 个 WaitHandle 的数组。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-09T17:18:47.300

You might want to look at the series of articles about threading patterns. Right now it has sample codes for implementing a WorkerThread and a ThreadedQueue.

[http://devpinoy.org/blogs/jakelite/archive/tags/Threading+Patterns/default.aspx](http://devpinoy.org/blogs/jakelite/archive/tags/Threading+Patterns/default.aspx)

# html - 最小化显式填充样式属性的使用

> ID：464339
> 
> 赞同：1
> 
> 时间：2009-01-21T07:32:21.577
> 
> 标签：html, css, padding

我发现我正在编写很多看起来像这样的代码：

```
 <div id="leftCol">

                <div style="padding-top:10px">
                    <asp:Image ID="imgRazor1" ImageUrl="http://www.example.com/dynimg.aspx?imageKey=XXX" runat="server" />
                </div>

                   <div style="padding-top:10px">
                    <asp:Image ID="imgRazor2" ImageUrl="http://www.example.com/dynimg.aspx?imageKey=XXX_CART" runat="server" />
                </div>

                <div style="padding-top:20px; padding-bottom:15px">
                    <asp:Image ID="Image3" ImageUrl="~/images/announcements/announcement1.jpg" runat="server" />
                    <div style="font-size:x-small">(from example.com)</div>
                </div>
            </div> 
```

也就是说，我放置了很多明确的填充或边距。

我想知道有什么更好的方法是没有像这样的类名结束：

```
.mediumPadding {
    padding-top:10px;
}

.smallPadding {
    padding-top:5px;
}

.padding15 {
    padding: 15px
} 
```

当我编写这样的实际内容而不是更通用的整体布局时，我倾向于发现特定的填充大小更合适。我会发现自己从 8px 变为 11px，然后又变回 9px。这一定是我的设计师，但我真的不喜欢我正在形成的习惯。

我认为自己无法重新审视“中等填充”为 9px 并将其更改为 11px 并期待令人满意的结果的全球规则。它可能会使某些页面看起来更好，并破坏其他页面。

其他人做什么来解决这个问题？我想要 css 的好处，但我需要很好的控制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-21T07:43:52.287

您的代码遭受了严重的 div-itis 的困扰。我首先会为标题、段落等使用适当的标签。一旦你有一个正确标记的文档，你可以为公共元素添加类，然后根据需要对这些类进行样式设置。您会发现某些类型的元素无论在哪里都共享一种样式，因此您可以最大限度地减少内联样式的数量。

您的类应该反映元素的属性（例如“标题”）。通常，类不应引用特定的设计实现。HTML 是“什么”，CSS 是“如何”。当您使用代表设计细节的 CSS 类时，您将如何将方法注入到您的 HTML 中。

（是的，有时需要打破这些规则。但这些都是例外。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T12:10:57.177

这些 div 中的每一个都有一个目的。他们受到不同待遇的原因。找到它并给这些 div 起一个反映内容的名称。

```
<div id="leftCol">
  <div class="navigation"></div>
  <div class="calendar"></div>
</div> 
```

然后你应该把你的填充到样式表中。如果您要恢复设计元素的内联样式，那么您就没有正确考虑语义。一旦你在那里有了你的类，你可以使用 Web Developer 等快速、轻松地编辑你的样式表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T07:37:42.347

如果需要，您可以有一个通用规则并在特定情况下使用 id 规则覆盖它：

```
#leftCol > div { /* general rule */ }
#img1 { /* custom override 1 */ }
#img2 { /* custom override 2 */ } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T08:51:06.830

通常容器中的第一个和最后一个元素需要特殊处理。您的示例中似乎就是这种情况。

first-child 和 last-child 选择器在浏览器中还不是很可靠（主要是因为 IE6），所以你可以手动为第一个和最后一个元素添加类，或者使用一些 javascript 来帮助你 -[后代](http://www.alistapart.com/articles/keepelementskidsinlinewithoffspring/)这样做很好。

# python - 在 Python 中组合两个排序列表

> ID：464342
> 
> 赞同：81
> 
> 时间：2009-01-21T07:33:47.847
> 
> 标签：python, list, sorting

我有两个对象列表。每个列表都已按日期时间类型的对象的属性排序。我想将这两个列表组合成一个排序列表。最好的方法只是进行排序还是在 Python 中有更聪明的方法？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2009-01-21T12:16:08.993

> 有没有更聪明的方法在 Python 中做到这一点

这还没有提到，所以我会继续 - 在 python 2.6+ 的 heapq 模块中有一个[合并 stdlib 函数](https://github.com/python/cpython/blob/3.7/Lib/heapq.py#L314)。如果您要做的只是完成工作，那么这可能是一个更好的主意。当然，如果你想实现自己的，merge-sort的merge是要走的路。

```
>>> list1 = [1, 5, 8, 10, 50]
>>> list2 = [3, 4, 29, 41, 45, 49]
>>> from heapq import merge
>>> list(merge(list1, list2))
[1, 3, 4, 5, 8, 10, 29, 41, 45, 49, 50] 
```

这是[文档](https://docs.python.org/3/library/heapq.html#heapq.merge)。

* * *

## 回答 #2

> 赞同：120
> 
> 时间：2009-01-21T09:14:08.487

人们似乎过于复杂了..只需将两个列表组合起来，然后对它们进行排序：

```
>>> l1 = [1, 3, 4, 7]
>>> l2 = [0, 2, 5, 6, 8, 9]
>>> l1.extend(l2)
>>> sorted(l1)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

..或更短（且无需修改`l1`）：

```
>>> sorted(l1 + l2)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

..简单的！另外，它只使用了两个内置函数，所以假设列表的大小合理，它应该比在循环中实现排序/合并更快。更重要的是，上面的代码少得多，而且可读性很强。

如果您的列表很大（我猜超过几十万），使用替代/自定义排序方法可能会更快，但可能首先需要进行其他优化（例如，不存储数百万个`datetime`对象）

使用`timeit.Timer().repeat()`（重复功能 1000000 次），我将它与[ghoseb 的](https://stackoverflow.com/questions/464342/combining-two-sorted-lists-in-python#464454)解决方案进行了松散的基准测试，并且`sorted(l1+l2)`速度大大加快：

`merge_sorted_lists`拿..

```
[9.7439379692077637, 9.8844599723815918, 9.552299976348877] 
```

`sorted(l1+l2)`拿..

```
[2.860386848449707, 2.7589840888977051, 2.7682540416717529] 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2009-01-27T10:09:03.637

长话短说，除非`len(l1 + l2) ~ 1000000`使用：

```
L = l1 + l2
L.sort() 
```

![合并与排序比较](https://i.stack.imgur.com/XsRdj.png)

图的描述和源代码可以在[这里](https://stackoverflow.com/questions/464960/code-golf-combining-multiple-sorted-lists-into-a-single-sorted-list#464967)找到。

该图是由以下命令生成的：

```
$ python make-figures.py --nsublists 2 --maxn=0x100000 -s merge_funcs.merge_26 -s merge_funcs.sort_builtin 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2009-01-21T07:36:52.347

这只是合并。将每个列表视为一个堆栈，并不断弹出两个堆栈头中较小的一个，将项目添加到结果列表中，直到其中一个堆栈为空。然后将所有剩余的项目添加到结果列表中。

```
res = []
while l1 and l2:
    if l1[0] < l2[0]:
        res.append(l1.pop(0))
    else:
        res.append(l2.pop(0))

res += l1
res += l2 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2009-01-21T10:36:56.087

[ghoseb 的](https://stackoverflow.com/questions/464342/combining-two-sorted-lists-in-python#464454)解决方案有一个小缺陷，使它成为 O(n**2)，而不是 O(n)。
问题是它正在执行：

```
item = l1.pop(0) 
```

对于链表或双端队列，这将是一个 O(1) 操作，因此不会影响复杂性，但由于 python 列表是作为向量实现的，这会将 l1 的其余元素复制一个空格，一个 O(n) 操作. 由于这是在每次遍历列表时完成的，因此它将 O(n) 算法转换为 O(n**2) 算法。这可以通过使用不改变源列表而只跟踪当前位置的方法来纠正。

我已经尝试按照[dbr的建议对校正后的算法与简单的 sorted(l1+l2) 进行基准测试](https://stackoverflow.com/questions/464342/combining-two-sorted-lists-in-python#464538)

```
def merge(l1,l2):
    if not l1:  return list(l2)
    if not l2:  return list(l1)

    # l2 will contain last element.
    if l1[-1] > l2[-1]:
        l1,l2 = l2,l1

    it = iter(l2)
    y = it.next()
    result = []

    for x in l1:
        while y < x:
            result.append(y)
            y = it.next()
        result.append(x)
    result.append(y)
    result.extend(it)
    return result 
```

我已经用生成的列表测试了这些

```
l1 = sorted([random.random() for i in range(NITEMS)])
l2 = sorted([random.random() for i in range(NITEMS)]) 
```

对于各种大小的列表，我得到以下时间（重复 100 次）：

```
# items:  1000   10000 100000 1000000
merge  :  0.079  0.798 9.763  109.044 
sort   :  0.020  0.217 5.948  106.882 
```

所以事实上，看起来 dbr 是正确的，除非你期望非常大的列表，否则最好只使用 sorted() ，尽管它的算法复杂性确实更差。盈亏平衡点是每个来源列表中的大约一百万个项目（总共 200 万个）。

不过，合并方法的一个优点是重写为生成器是微不足道的，它将使用更少的内存（不需要中间列表）。

**[编辑]** 我用更接近问题的情况重试了这个 - 使用包含字段“ `date`”的对象列表，这是一个日期时间对象。上面的算法改成比较对比`.date`，排序方法改成：

```
return sorted(l1 + l2, key=operator.attrgetter('date')) 
```

这确实改变了一些事情。比较更昂贵意味着我们执行的数量变得更重要，相对于实现的恒定时间速度。这意味着 merge 弥补了失地，在 100,000 个项目上超过了 sort() 方法。基于更复杂的对象（例如大字符串或列表）进行比较可能会进一步改变这种平衡。

```
# items:  1000   10000 100000  1000000[1]
merge  :  0.161  2.034 23.370  253.68
sort   :  0.111  1.523 25.223  313.20 
```

[1]：注意：实际上我只为 1,000,000 个项目重复了 10 次，并相应地按比例放大，因为它非常慢。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-01-21T08:36:40.590

这是两个排序列表的简单合并。看看下面的示例代码，它合并了两个排序的整数列表。

```
#!/usr/bin/env python
## merge.py -- Merge two sorted lists -*- Python -*-
## Time-stamp: "2009-01-21 14:02:57 ghoseb"

l1 = [1, 3, 4, 7]
l2 = [0, 2, 5, 6, 8, 9]

def merge_sorted_lists(l1, l2):
    """Merge sort two sorted lists

    Arguments:
    - `l1`: First sorted list
    - `l2`: Second sorted list
    """
    sorted_list = []

    # Copy both the args to make sure the original lists are not
    # modified
    l1 = l1[:]
    l2 = l2[:]

    while (l1 and l2):
        if (l1[0] <= l2[0]): # Compare both heads
            item = l1.pop(0) # Pop from the head
            sorted_list.append(item)
        else:
            item = l2.pop(0)
            sorted_list.append(item)

    # Add the remaining of the lists
    sorted_list.extend(l1 if l1 else l2)

    return sorted_list

if __name__ == '__main__':
    print merge_sorted_lists(l1, l2) 
```

这应该适用于 datetime 对象。希望这可以帮助。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-01-21T13:10:00.397

```
from datetime import datetime
from itertools import chain
from operator import attrgetter

class DT:
    def __init__(self, dt):
        self.dt = dt

list1 = [DT(datetime(2008, 12, 5, 2)),
         DT(datetime(2009, 1, 1, 13)),
         DT(datetime(2009, 1, 3, 5))]

list2 = [DT(datetime(2008, 12, 31, 23)),
         DT(datetime(2009, 1, 2, 12)),
         DT(datetime(2009, 1, 4, 15))]

list3 = sorted(chain(list1, list2), key=attrgetter('dt'))
for item in list3:
    print item.dt 
```

输出：

```
2008-12-05 02:00:00
2008-12-31 23:00:00
2009-01-01 13:00:00
2009-01-02 12:00:00
2009-01-03 05:00:00
2009-01-04 15:00:00 
```

我敢打赌，这比任何花哨的纯 Python 合并算法都快，即使对于大数据也是如此。Python 2.6`heapq.merge`完全是另一回事。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-11-12T23:55:35.390

```
def merge_sort(a,b):

    pa = 0
    pb = 0
    result = []

    while pa < len(a) and pb < len(b):
        if a[pa] <= b[pb]:
            result.append(a[pa])
            pa += 1
        else:
            result.append(b[pb])
            pb += 1

    remained = a[pa:] + b[pb:]
    result.extend(remained)

return result 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-04-15T14:20:36.213

Python 的排序实现“timsort”专门针对包含有序部分的列表进行了优化。另外，它是用 C 编写的。

[http://bugs.python.org/file4451/timsort.txt](http://bugs.python.org/file4451/timsort.txt)
[http://en.wikipedia.org/wiki/Timsort](http://en.wikipedia.org/wiki/Timsort)

正如人们所提到的，它可能会通过某个常数因子多次调用比较函数（但在许多情况下，可能会在更短的时间内调用更多次！）。

> 然而，我永远不会依赖这个。——丹尼尔·纳达西

我相信 Python 开发人员致力于保持 timsort，或者至少在这种情况下保持 O(n) 的排序。

> 在串行机器上，不能在小于 O(n log n) 的时间内完成广义排序（即，将基数排序与有限值域分开）。——巴里·凯利

对，一般情况下的排序不能比这更快。但是由于 O() 是一个上限，因此 timsort 在任意输入上为 O(n log n) 并不与给定 sorted(L1) + sorted(L2) 的 O(n) 相矛盾。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-04-27T12:11:49.423

Merge Sort 中合并步骤的实现，它遍历两个列表：

```
def merge_lists(L1, L2):
    """
    L1, L2: sorted lists of numbers, one of them could be empty.

    returns a merged and sorted list of L1 and L2.
    """

    # When one of them is an empty list, returns the other list
    if not L1:
        return L2
    elif not L2:
        return L1

    result = []
    i = 0
    j = 0

    for k in range(len(L1) + len(L2)):
        if L1[i] <= L2[j]:
            result.append(L1[i])
            if i < len(L1) - 1:
                i += 1
            else:
                result += L2[j:]  # When the last element in L1 is reached,
                break             # append the rest of L2 to result.
        else:
            result.append(L2[j])
            if j < len(L2) - 1:
                j += 1
            else:
                result += L1[i:]  # When the last element in L2 is reached,
                break             # append the rest of L1 to result.

    return result

L1 = [1, 3, 5]
L2 = [2, 4, 6, 8]
merge_lists(L1, L2)               # Should return [1, 2, 3, 4, 5, 6, 8]
merge_lists([], L1)               # Should return [1, 3, 5] 
```

我还在学习算法，如果代码可以在任何方面改进，请告诉我，感谢您的反馈，谢谢！

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-01-21T07:49:13.663

使用合并排序的“合并”步骤，它在 O(n) 时间内运行。

来自[维基百科](http://en.wikipedia.org/wiki/Merge_sort)（伪代码）：

```
function merge(left,right)
    var list result
    while length(left) > 0 and length(right) > 0
        if first(left) ≤ first(right)
            append first(left) to result
            left = rest(left)
        else
            append first(right) to result
            right = rest(right)
    end while
    while length(left) > 0 
        append left to result
    while length(right) > 0 
        append right to result
    return result 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-04-09T14:32:18.047

递归实现如下。平均性能为 O(n)。

```
def merge_sorted_lists(A, B, sorted_list = None):
    if sorted_list == None:
        sorted_list = []

    slice_index = 0
    for element in A:
        if element <= B[0]:
            sorted_list.append(element)
            slice_index += 1
        else:
            return merge_sorted_lists(B, A[slice_index:], sorted_list)

    return sorted_list + B 
```

或具有改进空间复杂度的生成器：

```
def merge_sorted_lists_as_generator(A, B):
    slice_index = 0
    for element in A:
        if element <= B[0]:
            slice_index += 1
            yield element       
        else:
            for sorted_element in merge_sorted_lists_as_generator(B, A[slice_index:]):
                yield sorted_element
            return        

    for element in B:
        yield element 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-05-21T16:46:22.270

这是我**在线性时间内**的解决方案，无需编辑 l1 和 l2：

```
def merge(l1, l2):
  m, m2 = len(l1), len(l2)
  newList = []
  l, r = 0, 0
  while l < m and r < m2:
    if l1[l] < l2[r]:
      newList.append(l1[l])
      l += 1
    else:
      newList.append(l2[r])
      r += 1
  return newList + l1[l:] + l2[r:] 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-01-21T07:39:55.757

好吧，天真的方法（将 2 个列表组合成一个大列表并排序）将是 O(N*log(N)) 复杂度。另一方面，如果您手动实现合并（我不知道python库中是否有任何现成的代码，但我不是专家）复杂性将是O（N），这显然更快。Barry Kelly 在帖子中很好地描述了这个想法。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-09-07T17:04:13.880

如果你想以一种更符合学习迭代中发生的事情的方式来做，试试这个

```
def merge_arrays(a, b):
    l= []

    while len(a) > 0 and len(b)>0:
        if a[0] < b[0]: l.append(a.pop(0))    
        else:l.append(b.pop(0))

    l.extend(a+b)
    print( l ) 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-08-30T11:43:39.853

```
import random

    n=int(input("Enter size of table 1")); #size of list 1
    m=int(input("Enter size of table 2")); # size of list 2
    tb1=[random.randrange(1,101,1) for _ in range(n)] # filling the list with random
    tb2=[random.randrange(1,101,1) for _ in range(m)] # numbers between 1 and 100
    tb1.sort(); #sort the list 1 
    tb2.sort(); # sort the list 2
    fus=[]; # creat an empty list
    print(tb1); # print the list 1
    print('------------------------------------');
    print(tb2); # print the list 2
    print('------------------------------------');
    i=0;j=0;  # varialbles to cross the list
    while(i<n and j<m):
        if(tb1[i]<tb2[j]):
            fus.append(tb1[i]); 
            i+=1;
        else:
            fus.append(tb2[j]);
            j+=1;

    if(i<n):
        fus+=tb1[i:n];
    if(j<m):
        fus+=tb2[j:m];

    print(fus);

  # this code is used to merge two sorted lists in one sorted list (FUS) without
  #sorting the (FUS) 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-01-05T05:25:14.063

使用了归并排序的归并步骤。但我用过**generators**。 *时间复杂度* **O(n)**

```
def merge(lst1,lst2):
    len1=len(lst1)
    len2=len(lst2)
    i,j=0,0
    while(i<len1 and j<len2):
        if(lst1[i]<lst2[j]):
                yield lst1[i]
                i+=1
        else:
                yield lst2[j]
                j+=1
    if(i==len1):
        while(j<len2):
                yield lst2[j]
                j+=1
    elif(j==len2):
        while(i<len1):
                yield lst1[i]
                i+=1
l1=[1,3,5,7]
l2=[2,4,6,8,9]
mergelst=(val for val in merge(l1,l2))
print(*mergelst) 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-08-04T03:24:19.530

这段代码的时间复杂度为 O(n)，并且可以合并任何数据类型的列表，给定一个量化函数作为参数`func`。它会生成一个新的合并列表，并且不会修改作为参数传递的任何一个列表。

```
def merge_sorted_lists(listA,listB,func):
    merged = list()
    iA = 0
    iB = 0
    while True:
        hasA = iA < len(listA)
        hasB = iB < len(listB)
        if not hasA and not hasB:
            break
        valA = None if not hasA else listA[iA]
        valB = None if not hasB else listB[iB]
        a = None if not hasA else func(valA)
        b = None if not hasB else func(valB)
        if (not hasB or a<b) and hasA:
            merged.append(valA)
            iA += 1
        elif hasB:
            merged.append(valB)
            iB += 1
    return merged 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-01-21T07:44:39.103

```
def compareDate(obj1, obj2):
    if obj1.getDate() < obj2.getDate():
        return -1
    elif obj1.getDate() > obj2.getDate():
        return 1
    else:
        return 0

list = list1 + list2
list.sort(compareDate) 
```

将对列表进行适当的排序。定义您自己的函数来比较两个对象，并将该函数传递给内置的排序函数。

不要使用冒泡排序，它的性能很糟糕。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-01-28T08:29:05.863

`O(m+n)`复杂性

```
def merge_sorted_list(nums1: list, nums2:list) -> list:
        m = len(nums1)
        n = len(nums2)

        nums1 = nums1.copy()
        nums2 = nums2.copy()
        nums1.extend([0 for i in range(n)])
        while m > 0 and n > 0:
            if nums1[m-1] >= nums2[n-1]:
                nums1[m+n-1] = nums1[m-1]
                m -= 1
            else:
                nums1[m+n-1] = nums2[n-1]
                n -= 1
        if n > 0:
            nums1[:n] = nums2[:n]
        return nums1

l1 = [1, 3, 4, 7]    
l2 =  [0, 2, 5, 6, 8, 9]    
print(merge_sorted_list(l1, l2)) 
```

输出

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-03-27T00:53:32.790

如果您有一个小列表，只需将它们合并并使用内置函数进行排序，如下所示：

```
def in_built_sort(list1, list2):
    // time complexity : O(nlog n) 
    return sorted(list1 + list2) 
```

但如果您在两个列表中都有类似 MILLION 或 BILLION 元素，请使用此方法：

```
def custom_sort(list1, list2):
    // time complexity : O(n)
    merged_list_size = len(list1) + len(list2)
    merged_list = [None] * merged_list_size

    current_index_list1 = 0
    current_index_list2 = 0
    current_index_merged = 0
    while current_index_merged < merged_list_size:
        if (not current_index_list1 >= len(list1) and (current_index_list2 >= len(list2) or list1[current_index_list1] < list2[current_index_list2])):
            merged_list[current_index_merged] = list1[current_index_list1]
            current_index_list1 += 1
        else:
            merged_list[current_index_merged] = list2[current_index_list2]
            current_index_list2 += 1

        current_index_merged += 1
    return merged_list 
```

性能测试：针对两个列表中的 1000 万个随机元素进行测试并重复 10 次。

```
print(timeit.timeit(stmt=in_built_sort, number=10))  // 250.44088469999997  O(nlog n)   
print(timeit.timeit(stmt=custom_sort, number=10)) // 125.82338159999999  O(n) 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2018-06-27T01:57:20.433

希望这可以帮助。非常简单直接：

l1 = [1, 3, 4, 7]

l2 = [0, 2, 5, 6, 8, 9]

l3 = l1 + l2

l3.sort()

打印 (l3)

[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

# firefox - 在 Firefox 中禁用框架调整大小

> ID：464343
> 
> 赞同：3
> 
> 时间：2009-01-21T07:34:44.553
> 
> 标签：firefox, resize, frames, frameset

我有以下框架：

`<frameset rows="625,*" cols="*" framespacing="0" frameborder="0" border="0" noresize> <frame marginheight="0px" src="music-NEW.php" name="mainFrame" scrolling="NO" frameborder="0" noresize> <frame marginheight="0px" src="musicplayer.php" name="bottomFrame" scrolling="NO" frameborder="0" noresize> </frameset>`

在 IE 中，框架集呈现我想要的样子，一个无缝页面的外观。在 Firefox 中，框架集在框架之间显示一个可抓取的栏，并允许抓取该栏并调整框架的大小，我似乎无法摆脱。

另外，为什么框架在 Firefox 和 Safari 中不对齐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T07:39:16.087

将 noresize="noresize" 添加到您的框架：

```
<frame  noresize="noresize"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T08:05:16.363

你真的希望用户不能调整你的框架吗？

为什么？

你知道他的屏幕有多大吗？你知道，如果他/她是残疾人，不能阅读小写字母，必须调整这个框架的大小吗？

在我看来，你最好考虑固定尺寸和禁止某些东西。您的访客/用户不会很幸运。尽管如此，他/她将始终能够删除这个愚蠢的属性（例如 Firebug）。

只是我的两分钱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-07-02T22:47:39.223

现在是老问题了，但也许在这种情况下使用 IFRAME 是相关的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T07:51:16.420

您可能想知道[marginwidth 和 marginheight](http://www.w3.org/TR/html401/present/frames.html#adef-marginwidth)必须大于 0px。试试没有那个属性？

> 边距宽度 = 像素 [CN]

此属性指定在其左右边距中框架内容之间要留下的空间量。该值必须大于零（像素）。默认值取决于用户代理。

> 边距高度 = 像素 [CN]

此属性指定在框架的顶部和底部边距中的内容之间要留下的空间量。该值必须大于零（像素）。默认值取决于用户代理。

# java - Web 服务调用的事务选项

> ID：464346
> 
> 赞同：1
> 
> 时间：2009-01-21T07:35:29.683
> 
> 标签：java, web-services, jakarta-ee, transactions

是否有人对 Web 服务调用上可用的事务选项有任何见解？1.) 我们有两个应用程序需要它们之间的事务通信。2.) App1 在应用程序 2 上调用 Web 服务，然后对其自己的数据库进行一些更改。需要协调对 app2 的调用和对其自身数据库的更改。我们应该怎么做？有哪些可能的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T08:07:23.503

您进行 web 服务调用，如果它成功在您自己的数据库中进行更改。如果更改您自己的数据库失败，则调用 Web 服务以恢复之前调用中所做的更改。为此，Web 服务必须提供还原功能。

例如，网络服务有 createUser 功能，那么他们应该有 deleteUser 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T08:22:41.320

这取决于您使用的技术堆栈。在 .Net WCF 中提供了事务功能，否则您唯一能做的就是最小化可能发生错误的时间跨度。

在以前的应用程序中，我为该服务提供了 Web 服务的令牌。当服务返回（同步或异步）时，它会返回令牌。令牌具有嵌入的时间戳。如果时间戳已过期，则事务将中止，否则我假设 Web 服务调用成功。

webservice调用成功返回后，NEXT方法调用就是记录你系统内的事务。这会创建一个非常小的窗口，其中 Web 服务背后的系统和您的系统将不同步。它还减少了发生意外错误的机会，这将阻止您进行更新/插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-02T20:39:51.313

你可以试试[Atomikos ExtremeTransactions](http://www.atomikos.com/Main/ExtremeTransactions)。它包括对回滚跨越多个站点的 WS/SOAP 事务的支持。

盖伊

# dll - Vista 中的 OpenAs_RunDLL

> ID：464353
> 
> 赞同：2
> 
> 时间：2009-01-21T07:38:10.270
> 
> 标签：dll, windows-vista, 64-bit

这不是一个严格的编程问题，但希望这里有人有知识可以帮助我。

运行 Vista x64 时，尝试打开未知类型的文件时，“打开文件方式”对话框会永远出现。

具体来说，在“使用网络服务查找正确的程序”和“从已安装程序列表中选择一个程序”之间进行选择的提示会立即出现，但在此处按 OK 和出现下一个窗口（带有已安装程序的列表）。

当我从命令行运行“rundll32 shell32.dll,OpenAs_RunDLL”时，也会出现同样的延迟。

我猜这不是常见的行为，因为我觉得它非常烦人，而且我在任何地方都找不到任何提及它的内容。

所以..有人知道它可能是什么吗？或者我可以做些什么来尝试找出答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-02T19:35:46.483

VonC 可能是正确的。

阅读这篇文章：

[http://blogs.technet.com/markrussinovich/archive/2005/08/28/the-case-of-the-intermittent-and-annoying-explorer-hangs.aspx](http://blogs.technet.com/markrussinovich/archive/2005/08/28/the-case-of-the-intermittent-and-annoying-explorer-hangs.aspx)

启动操作时，您应该使用进程资源管理器来观察堆栈。您应该能够分辨出哪种操作正在超时。

在此处下载流程浏览器：

[http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T08:01:54.247

您可以检查您是否没有声明网络连接 ( `net use`)，或者更一般地说，您的“打开文件方式”中列出的程序列表可能使用的任何网络路径。

如果网络路径不可用，“超时”延迟会影响 GUI 响应能力，尤其是当 GUI 必须探索/列出这些路径时。

# apache-flex - 如何加载模块来控制面板，vbox等+flex

> ID：464354
> 
> 赞同：0
> 
> 时间：2009-01-21T07:38:15.137
> 
> 标签：apache-flex, flex3

我是这个 flex 的新手。任何人都可以解决我的问题吗？这是我的查询：我有一个主页分为 3 部分，如顶部、左侧、中间位置。在中间位置 - 面板和组合框在那里。我想将我的模块加载到面板的中间位置。我有组合框，当我选择任何基于我使用自定义模块加载器控件将模块加载到该面板的项目时。到这里为止一切正常。我的问题：我从组合框中选择了一个选项，它显示了一个模块（sam1）。当我单击（sam1）时，它应该在同一位置（而不是 sam1-sam2）打开另一个模块（sam2）。那么你能告诉我你对如何解决它的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-17T14:34:35.220

听起来您需要将所有模块放入[ViewStack](http://livedocs.adobe.com/flex/3/langref/mx/containers/ViewStack.html)中。然后你有一个选择：

*   您可以简单地绑定到组合框中的索引（或由组合框数据指定的索引，如下例所示）。
*   您可以拾取 ComboBox 的[更改事件](http://livedocs.adobe.com/flex/3/langref/mx/controls/ComboBox.html#event:change)并手动更改 ViewStack 的[selectedChild](http://livedocs.adobe.com/flex/3/langref/mx/containers/ViewStack.html#selectedChild)。
*   你可以

就像是：

```
<?xml version="1.0"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml">

    <mx:Script>
        <![CDATA[
            [Bindable]
            public var modules:Array = 
                [ {label:"Module A", moduleIndex:0}, 
                  {label:"Module B", moduleIndex:1}, 
                  {label:"Mobule C", moduleIndex:2} ]);
        ]]>
    </mx:Script>

    <mx:ComboBox dataProvider="{modules}" id="modulesCombobox" />

    <mx:ViewStack id="modulesViewStack" creationPolicy="auto" 
            selectedIndex="{modulesCombobox.selectedItem.moduleIndex}">

        <mx:ModuleLoader id="moduleA" url="{'views/ModuleA.swf}" /> 
        <mx:ModuleLoader id="moduleB" url="{'views/ModuleB.swf}" /> 
        <mx:ModuleLoader id="moduleC" url="{'views/ModuleC.swf}" /> 
    </mx:ViewStack>
</mx:Application> 
```

# c - GMP mpf_add 的精度丢失。我的数字哪里去了？

> ID：464358
> 
> 赞同：3
> 
> 时间：2009-01-21T07:40:22.717
> 
> 标签：c, precision, gmp

我将两个负浮点数相加：

```
char * lhs = "-2234.6016114467412141";
char * rhs = "-4939600281397002.2812"; 
```

根据 Perl，使用 bignum 和 Math::BigFloat，答案是

```
-4939600281399236.8828114467412141 
```

但是，根据 GMP，使用下面的代码，答案是

```
-4939600281399236.88281 
```

我哪里出错了？剩下的“14467412141”怎么了？

```
#include "stdafx.h"
#include "gmp-static\gmp.h"
#include <stdlib.h>         /* For _MAX_PATH definition */
#include <stdio.h>
#include <malloc.h>
#include <math.h>

#define F(x) mpf_t x; mpf_init( x );

void main(void)
{
    F(f_lhs);
    F(f_rhs);
    F(f_res);

    char * resbuff;

    mp_exp_t exp;

    char * lhs = "-2234.6016114467412141";
    char * rhs = "-4939600281397002.2812";

    int validOp = mpf_set_str( f_lhs, lhs, 10 );
    validOp = mpf_set_str( f_rhs, rhs, 10 );

    mpf_add( f_res, f_lhs, f_rhs );

    resbuff = mpf_get_str( NULL, &exp, 10, 0, f_res );
    printf( "Using mpf_add, %s + %s = %s (exp=%d)\n", lhs, rhs, resbuff, exp );

    free(resbuff);
} 
```

样本输出：

```
Using mpf_add, -2234.6016114467412141 + -4939600281397002.2812 = -493960028139923688281 (exp=16) 
```

*PS*我尝试添加一个`mpf_set_default_prec`大于64（默认）值的调用，但没有效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T08:48:38.257

看起来你在 64 位溢出尾数。尝试`mpf_get_prec(f_res)`检查它是否是您想要的精度。如果`mpf_set_default_prec()`在初始化任何 mpf 变量（main 的第 1 行）之前不调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-28T17:55:25.933

以较大的值启动。试试这个：

```
mpf_set_default_prec(5*1024) 
```

# javascript - 自定义异常类型

> ID：464359
> 
> 赞同：234
> 
> 时间：2009-01-21T07:40:32.760
> 
> 标签：javascript, exception

我可以在 JavaScript 中为用户定义的异常定义自定义类型吗？如果是这样，我会怎么做？

* * *

## 回答 #1

> 赞同：239
> 
> 时间：2009-07-16T12:26:01.000

来自[网络参考](http://webreference.com/programming/javascript/rg32/index-2.html)：

```
throw { 
  name:        "System Error", 
  level:       "Show Stopper", 
  message:     "Error detected. Please contact the system administrator.", 
  htmlMessage: "Error detected. Please contact the <a href=\"mailto:sysadmin@acme-widgets.com\">system administrator</a>.",
  toString:    function(){return this.name + ": " + this.message;} 
}; 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2014-12-31T17:37:29.497

您应该创建一个原型继承自 Error 的自定义异常。例如：

```
function InvalidArgumentException(message) {
    this.message = message;
    // Use V8's native method if available, otherwise fallback
    if ("captureStackTrace" in Error)
        Error.captureStackTrace(this, InvalidArgumentException);
    else
        this.stack = (new Error()).stack;
}

InvalidArgumentException.prototype = Object.create(Error.prototype);
InvalidArgumentException.prototype.name = "InvalidArgumentException";
InvalidArgumentException.prototype.constructor = InvalidArgumentException; 
```

这基本上是[上面](https://stackoverflow.com/users/489553/disfated)发布的内容的简化版本，增强了堆栈跟踪在 Firefox 和其他浏览器上的工作。它满足他发布的相同测试：

用法：

```
throw new InvalidArgumentException();
var err = new InvalidArgumentException("Not yet..."); 
```

它的行为是预期的：

```
err instanceof InvalidArgumentException          // -> true
err instanceof Error                             // -> true
InvalidArgumentException.prototype.isPrototypeOf(err) // -> true
Error.prototype.isPrototypeOf(err)               // -> true
err.constructor.name                             // -> InvalidArgumentException
err.name                                         // -> InvalidArgumentException
err.message                                      // -> Not yet...
err.toString()                                   // -> InvalidArgumentException: Not yet...
err.stack                                        // -> works fine! 
```

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2009-01-21T08:58:35.507

您可以实现自己的异常及其处理，例如，如下所示：

```
// define exceptions "classes" 
function NotNumberException() {}
function NotPositiveNumberException() {}

// try some code
try {
    // some function/code that can throw
    if (isNaN(value))
        throw new NotNumberException();
    else
    if (value < 0)
        throw new NotPositiveNumberException();
}
catch (e) {
    if (e instanceof NotNumberException) {
        alert("not a number");
    }
    else
    if (e instanceof NotPositiveNumberException) {
        alert("not a positive number");
    }
} 
```

还有另一种用于捕获类型异常的语法，尽管这不适用于每个浏览器（例如，不在 IE 中）：

```
// define exceptions "classes" 
function NotNumberException() {}
function NotPositiveNumberException() {}

// try some code
try {
    // some function/code that can throw
    if (isNaN(value))
        throw new NotNumberException();
    else
    if (value < 0)
        throw new NotPositiveNumberException();
}
catch (e if e instanceof NotNumberException) {
    alert("not a number");
}
catch (e if e instanceof NotPositiveNumberException) {
    alert("not a positive number");
} 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2009-01-21T08:22:04.113

是的。你可以抛出任何你想要的东西：整数、字符串、对象等等。如果你想抛出一个对象，那么只需创建一个新对象，就像在其他情况下创建一个对象，然后抛出它。[Mozilla 的 Javascript 参考](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Statements/throw)有几个例子。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2011-01-18T20:54:49.797

```
function MyError(message) {
 this.message = message;
}

MyError.prototype = new Error; 
```

这允许使用像..

```
try {
  something();
 } catch(e) {
  if(e instanceof MyError)
   doSomethingElse();
  else if(e instanceof Error)
   andNowForSomethingCompletelyDifferent();
} 
```

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2017-04-24T18:17:58.097

**简而言之：**

*   如果您使用**没有转译**器的 ES6 ：

    ```
    class CustomError extends Error { /* ... */} 
    ```

    有关当前最佳实践的信息，请参阅[使用 ES6 语法扩展 Javascript 中的错误](https://stackoverflow.com/questions/31089801/extending-error-in-javascript-with-es6-syntax)

*   如果你使用**Babel 转译器**：

选项 1：使用[babel-plugin-transform-b​​uiltin-extend](https://github.com/loganfsmyth/babel-plugin-transform-builtin-extend)

选项 2：自己做（灵感来自同一个库）

```
 function CustomError(...args) {
      const instance = Reflect.construct(Error, args);
      Reflect.setPrototypeOf(instance, Reflect.getPrototypeOf(this));
      return instance;
    }
    CustomError.prototype = Object.create(Error.prototype, {
      constructor: {
        value: Error,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
    Reflect.setPrototypeOf(CustomError, Error); 
```

*   如果您使用的是**纯 ES5**：

    ```
    function CustomError(message, fileName, lineNumber) {
      const instance = new Error(message, fileName, lineNumber);
      Object.setPrototypeOf(instance, Object.getPrototypeOf(this));
      return instance;
    }
    CustomError.prototype = Object.create(Error.prototype, {
      constructor: {
        value: Error,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
    if (Object.setPrototypeOf){
        Object.setPrototypeOf(CustomError, Error);
    } else {
        CustomError.__proto__ = Error;
    } 
    ```

*   替代方案：使用[Classtrophobic](https://github.com/WebReflection/classtrophobic/)框架

**解释：**

*为什么使用 ES6 和 Babel 扩展 Error 类是个问题？*

因为不再识别 CustomError 的实例。

```
class CustomError extends Error {}
console.log(new CustomError('test') instanceof Error);// true
console.log(new CustomError('test') instanceof CustomError);// false 
```

事实上，从 Babel 的官方文档来看，你[不能扩展任何内置的 JavaScript 类](http://babeljs.io/docs/usage/caveats/#classes)，例如`Date`、或。`Array``DOM``Error`

此处描述了该问题：

*   [本机扩展打破了 HTMLELement、Array 和其他](https://github.com/babel/babel/issues/4480)
*   [由基类型（如 Array、Number、Object、String 或 Error）扩展的类的对象不是此类的实例](https://github.com/babel/babel/issues/5496)

*其他 SO 答案呢？*

所有给定的答案都可以解决`instanceof`问题，但您会丢失常规错误`console.log`：

```
console.log(new CustomError('test'));
// output:
// CustomError {name: "MyError", message: "test", stack: "Error↵    at CustomError (<anonymous>:4:19)↵    at <anonymous>:1:5"} 
```

而使用上述方法，不仅可以解决`instanceof`问题，还可以保留常规错误`console.log`：

```
console.log(new CustomError('test'));
// output:
// Error: test
//     at CustomError (<anonymous>:2:32)
//     at <anonymous>:1:5 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2017-11-29T17:22:28.463

**ES6**

使用新的 class 和 extend 关键字，现在变得更容易了：

```
class CustomError extends Error {
  constructor(message) {
    super(message);
    //something
  }
} 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2012-01-12T03:33:31.397

以下是如何创建与 native`Error`行为完全相同的自定义错误。该技术目前**仅适用于 Chrome 和 node.js。**如果您不了解它的作用，我**也不建议您使用它。**

```
Error.createCustromConstructor = (function() {

    function define(obj, prop, value) {
        Object.defineProperty(obj, prop, {
            value: value,
            configurable: true,
            enumerable: false,
            writable: true
        });
    }

    return function(name, init, proto) {
        var CustomError;
        proto = proto || {};
        function build(message) {
            var self = this instanceof CustomError
                ? this
                : Object.create(CustomError.prototype);
            Error.apply(self, arguments);
            Error.captureStackTrace(self, CustomError);
            if (message != undefined) {
                define(self, 'message', String(message));
            }
            define(self, 'arguments', undefined);
            define(self, 'type', undefined);
            if (typeof init == 'function') {
                init.apply(self, arguments);
            }
            return self;
        }
        eval('CustomError = function ' + name + '() {' +
            'return build.apply(this, arguments); }');
        CustomError.prototype = Object.create(Error.prototype);
        define(CustomError.prototype, 'constructor', CustomError);
        for (var key in proto) {
            define(CustomError.prototype, key, proto[key]);
        }
        Object.defineProperty(CustomError.prototype, 'name', { value: name });
        return CustomError;
    }

})(); 
```

结果我们得到

```
/**
 * name   The name of the constructor name
 * init   User-defined initialization function
 * proto  It's enumerable members will be added to 
 *        prototype of created constructor
 **/
Error.createCustromConstructor = function(name, init, proto) 
```

然后你可以像这样使用它：

```
var NotImplementedError = Error.createCustromConstructor('NotImplementedError'); 
```

并`NotImplementedError`像你一样使用`Error`：

```
throw new NotImplementedError();
var err = new NotImplementedError();
var err = NotImplementedError('Not yet...'); 
```

它的行为是预期的：

```
err instanceof NotImplementedError               // -> true
err instanceof Error                             // -> true
NotImplementedError.prototype.isPrototypeOf(err) // -> true
Error.prototype.isPrototypeOf(err)               // -> true
err.constructor.name                             // -> NotImplementedError
err.name                                         // -> NotImplementedError
err.message                                      // -> Not yet...
err.toString()                                   // -> NotImplementedError: Not yet...
err.stack                                        // -> works fine! 
```

请注意，这`error.stack`绝对正确，并且不包括`NotImplementedError`构造函数调用（感谢 v8's `Error.captureStackTrace()`）。

笔记。有丑`eval()`。使用它的唯一原因是为了正确`err.constructor.name`。如果你不需要它，你可以简化一切。

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2012-08-13T12:04:44.743

我经常使用原型继承的方法。覆盖`toString()`为您提供了这样的优势，即像 Firebug 这样的工具将记录实际信息，而不是`[object Object]`在控制台中记录未捕获的异常。

用于`instanceof`确定异常的类型。

## main.js

```
// just an exemplary namespace
var ns = ns || {};

// include JavaScript of the following
// source files here (e.g. by concatenation)

var someId = 42;
throw new ns.DuplicateIdException('Another item with ID ' +
    someId + ' has been created');
// Firebug console:
// uncaught exception: [Duplicate ID] Another item with ID 42 has been created 
```

## 异常.js

```
ns.Exception = function() {
}

/**
 * Form a string of relevant information.
 *
 * When providing this method, tools like Firebug show the returned 
 * string instead of [object Object] for uncaught exceptions.
 *
 * @return {String} information about the exception
 */
ns.Exception.prototype.toString = function() {
    var name = this.name || 'unknown';
    var message = this.message || 'no description';
    return '[' + name + '] ' + message;
}; 
```

## DuplicateIdException.js

```
ns.DuplicateIdException = function(message) {
    this.name = 'Duplicate ID';
    this.message = message;
};

ns.DuplicateIdException.prototype = new ns.Exception(); 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2009-01-21T08:21:39.370

使用[throw](http://www.w3schools.com/js/js_throw.asp)语句。

JavaScript 不关心异常类型是什么（就像 Java 一样）。JavaScript 只是注意到，有一个异常，当您捕获它时，您可以“查看”异常“说”什么。

如果您必须抛出不同的异常类型，我建议使用包含异常字符串/对象的变量，即消息。在需要的地方使用“throw myException”并在 catch 中将捕获的异常与 myException 进行比较。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-11-04T12:07:42.210

```
//create error object
var error = new Object();
error.reason="some reason!";

//business function
function exception(){
    try{
        throw error;
    }catch(err){
        err.reason;
    }
} 
```

现在我们设置将原因或我们想要的任何属性添加到错误对象并检索它。通过使错误更合理。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-02-08T01:26:27.430

请参阅MDN 中的[此示例](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types)。

如果您需要定义多个错误（在[此处](https://repl.it/Bkd7/2)测试代码！）：

```
function createErrorType(name, initFunction) {
    function E(message) {
        this.message = message;
        if (Error.captureStackTrace)
            Error.captureStackTrace(this, this.constructor);
        else
            this.stack = (new Error()).stack;
        initFunction && initFunction.apply(this, arguments);
    }
    E.prototype = Object.create(Error.prototype);
    E.prototype.name = name;
    E.prototype.constructor = E;
    return E;
}
var InvalidStateError = createErrorType(
    'InvalidStateError',
    function (invalidState, acceptedStates) {
        this.message = 'The state ' + invalidState + ' is invalid. Expected ' + acceptedStates + '.';
    });

var error = new InvalidStateError('foo', 'bar or baz');
function assert(condition) { if (!condition) throw new Error(); }
assert(error.message);
assert(error instanceof InvalidStateError);  
assert(error instanceof Error); 
assert(error.name == 'InvalidStateError');
assert(error.stack);
error.message; 
```

代码大部分抄自：[What's a good way to extend Error in JavaScript?](https://stackoverflow.com/questions/1382107/whats-a-good-way-to-extend-error-in-javascript/27925672?noredirect=1#comment58243073_27925672)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-02-20T16:46:08.430

与 ES2015 类一起使用的 asselin[答案](https://stackoverflow.com/a/27724419/4375377)的替代方案

```
class InvalidArgumentException extends Error {
    constructor(message) {
        super();
        Error.captureStackTrace(this, this.constructor);
        this.name = "InvalidArgumentException";
        this.message = message;
    }
} 
```

# objective-c - Cocoa/Objective-C 和分布式对象的例子？

> ID：464365
> 
> 赞同：3
> 
> 时间：2009-01-21T07:43:43.800
> 
> 标签：objective-c, cocoa, distributed-objects

我正在学习 Cocoa 和 Objective-C（好吧，还有 C）来制作一些我曾经漂浮过的 Mac 应用程序。我需要使用分布式对象，但找不到简单、简洁的示例。有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T09:15:14.457

[谷歌搜索](http://www.google.com/search?q=distributed+objects+cocoa)提出了很多点击。[Apple 文档](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/DistrObjects/DistrObjects.html)也很好 。[深夜可可](http://www.mac-developer-network.com/podcasts/lnc/lnc020/)也有一集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T08:43:22.073

我维护 comp.lang.objective-c 常见问题解答，其中有一个示例：[如何在远程对象之间转发消息](http://thaesofereode.info/clocFAQ/#cocoa-do)？它很短，但应该给你基本的想法，然后你可以在上面挂上它链接的 Apple 和 GNUstep 文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-21T09:04:18.833

这是一篇相当老的文章，但这可能是分布式对象的一个​​很好的起点。我个人发现从较旧的教程开始更容易，然后逐步升级到使用 Core Data 等新技术的最新教程。

[http://cocoadevcentral.com/articles/000062.php](http://cocoadevcentral.com/articles/000062.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-23T21:51:22.450

我在 SourceForge 发现了[这个项目](http://sourceforge.net/projects/bibdesk/)，这是一个相当大的 Cocoa 项目。它使用 bonjour 和分布式对象，除此之外，我发现它是一个很好的资源和示例。只是想我会把它放在那里，以防有人遇到这个问题。

# vb6 - 如何在所有 vb 函数中放置错误处理程序

> ID：464379
> 
> 赞同：1
> 
> 时间：2009-01-21T07:54:21.423
> 
> 标签：vb6, error-handling, error-logging

我们有多个 vb 项目。我们希望将错误处理程序放在所有函数中，并且错误处理程序应该写入文件。是否有可用的工具 - 我们已经查看了代码智能和 vbwatch。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-21T10:13:30.020

[MZ-Tools](http://www.mztools.com/index.aspx)是免费且非常容易安装的，经常被推荐：

支持的 Microsoft 开发工具

*   Visual Studio 2008（Express 版本除外）
*   Visual Studio 2005（Express 版本除外）
*   视觉工作室 .NET 2003
*   视觉工作室 .NET 2002
*   视觉基础 6.0
*   视觉基础 5.0
*   VBA 编辑器（Office 2000-2007 或其他）

支持的编程语言

*   视觉 C#
*   Visual Basic .NET
*   Visual C++（部分支持，大部分功能）
*   视觉J#
*   Visual Basic 6.0 和 5.0
*   适用于应用程序的 Visual Basic (VBA)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T08:00:50.943

这是一个免费软件程序：
[http ://wareseeker.com/Software-Development/automatic-error-handling-pro-1.1.0.zip/238557](http://wareseeker.com/Software-Development/automatic-error-handling-pro-1.1.0.zip/238557)

这里有一些自己做的源代码：http:
[//www.nigelrivett.net/VB/VBAddErrorHandling.html](http://www.nigelrivett.net/VB/VBAddErrorHandling.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T13:02:25.373

确保在将其放入所有程序之前测试性能。我们的错误处理程序解决方案 (VBrig) 显着影响了我们 CAD/CAM 应用程序中的数学计算和屏幕重绘。它写得还不错，但是增加了数百次的日志记录。

我们切换到在所有事件例程中使用错误处理并选择了其他区域。虽然从设计的角度来看并不理想，但它使性能恢复到了它需要的水平。

# sharepoint - VSeWSS 1.2 的最佳部署方法

> ID：464380
> 
> 赞同：4
> 
> 时间：2009-01-21T07:55:04.073
> 
> 标签：sharepoint, wss

任何人都可以建议基于 VSeWSS 1.2 的开发的最佳部署方法吗？

我已经使用这个超过 6 个月了.. 有没有人尝试使用 WSPBuilder 来达到这个目的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-21T09:25:30.117

我个人更喜欢使用 stsdev ( [http://www.codeplex.com/stsdev](http://www.codeplex.com/stsdev) )。我使用过 WSPbuilder 和 STSDEV。Stsdev 提供了一些您使用 stsdev gui 创建的开发项目模板，与您使用 new > project 创建的标准项目模板不同。

stsdev 项目有一个 Rootfiles 文件夹，它对应于目标服务器上的“12 hive”。您放入 Rootfiles 文件夹和子文件夹的所有文件都会自动添加到 solutionpackage.ddf 和 manifest.xml，因此您不必担心编辑这些文件并使用 makecab 编译它们。

stsdev 提供的另一个好处是构建目标，例如构建、部署、重新部署、在 GAC 中刷新程序集、收回和升级。因此 stsdev 项目会自动编译二进制文件，构建 .wsp 包，并根据构建类型运行 stsadm 命令。如果您愿意，可以通过编辑位于项目的 DeploymentFiles 文件夹中的 Microsoft.SharePoint.targets 来自定义构建目标的行为。只要你只是在处理代码，GAC 中的 Refresh Assembly 是一种非常快速的构建方法，之后你可以立即看到 sharepoint 中的变化。

stsdev 的一个缺点是，如果您使用源代码控制，则 manifest.xml 和 SolutionPackage.ddf 如果未检出，则为只读，并会导致编译错误（我通常在处理时检出 DeploymentFiles 文件夹中的所有文件）项目）。因此，您必须在构建之前检查这些文件。另一件事是它会获取Rootfiles 下的**所有**文件，包括隐藏的 vssver2.scc 文件（如果您使用源代码管理）。该项目仍然可以毫无问题地构建和部署，但文件位于 wsp 包中，并复制到目标服务器上的“12 hive”。

我认为与 WSPbuilder 相比，stsdev 可以让您自定义开发项目的任何内容，这是我在 WSPbuilder 中无法做到的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T18:39:59.967

您应该帮自己一个忙，看看 VSeWSS **1.3**。请参阅 Kirk Evans 的博客以获得良好的视频概述：http: [//blogs.msdn.com/kaevans/archive/2009/03/13/sharepoint-developer-series-part-1-introducing-vsewss-1-3.aspx](http://blogs.msdn.com/kaevans/archive/2009/03/13/sharepoint-developer-series-part-1-introducing-vsewss-1-3.aspx) .

主要缺点可能是它需要 Visual Studio 2008。

我一直是 STSDEV 的倡导者，但现在我倾向于 VSeWSS 1.3。我怀疑其他 WSPBuilder 和 STSDEV 用户随着时间的推移也会有同样的感觉，但我还没有完成对它的评估。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-21T18:13:49.877

我们一直使用 WSPBuilder。如果您正在寻找创建 wsp's，这是最好的。

它还提供了一个 VS 插件。您可以直接从 VS 构建、部署、升级等。提供 VS 模板，如空白功能、Web 部件功能、带有接收器的功能、工作流功能、事件处理程序、项目模板等...

我们使用 WSPBuilder 管理 20 多个项目

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-21T14:24:47.997

正如 Kirk Liemohn 指出的那样，您确实应该升级到 VSeWSS 1.3。我们收集了大量客户反馈，并且在此版本中为开发人员提供了许多新功能。

它包括用于仅将新二进制文件或文件部署到 SharePoint 12 文件夹结构中的快速部署命令。它还可以在带有 Visual Studio 2008 的 x64 操作系统上运行。它具有命令行支持。

[在这里](http://www.microsoft.com/downloads/details.aspx?familyid=FB9D4B85-DA2A-432E-91FB-D505199C49F6&displaylang=en)可用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-22T03:50:06.730

我也更喜欢 WSPBuilder。我无法按照我想要的方式配置 WSPBuilder 没有任何问题。在最新版本中，您可以根据需要单独覆盖每个项目或开发人员的设置。

WSPBuilder 还有一个很棒的附加组件，称为 SPVisualDev (codeplex.com/spvisualdev)。除了其他功能之外，它还提供了用于添加 ASCX 文件的模板，它会自动将您放在项目 12-hive 文件夹中的文件从 VS 下推到真正的 12-hive 文件夹中。对我来说节省了大量时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-23T21:28:46.653

VSeWSS 1.2 的一个缺点是缺乏部署到 bin 的支持。1.3 增加了这一点，但我还没有让它与引用的程序集一起工作。我已经切换到[STSDev 2008](http://stsdev2008.codeplex.com/)，这是原始 STSDev 的衍生产品，并修复了错误。我一直在与主要贡献者合作，为 CodePlex 上的项目添加文档，但在一年多一点的时间里下载了 1900 次。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-08-12T20:01:41.607

我使用过 VSeWSS 1.2 和 1.3，它确实使部署非常容易。我的问题是，如果您想将 Web 部件分发到客户管理的 SharePoint 服务器，你们通常会做什么。您是否只是获取 Release 文件夹并告诉他们运行 setup.bat 脚本？你有不同的包装吗？您是否创建自定义安装程序？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-08-31T18:23:00.937

VSeWSS 1.3 CTP 现已推出，并且*确实*具有命令行支持。话虽这么说，恕我直言，这些扩展是基于目前将它们用于一个非常大、非常复杂的项目 - 直肠疼痛，原因如下：

1.  每次打开启用了扩展的项目的解决方案时，您都必须坐下来等待 VSeWSS 对每个项目进行仔细检查，检查结构并尝试重新打包每个解决方案。随着您添加到解决方案中的每个启用扩展的项目，等待似乎呈指数增长。鉴于在 VM 中进行 SharePoint 开发已经包含所有等待，等待可能会非常痛苦。

2.  虽然 VSeWSS 正在通过这些项目，但没有任何迹象表明正在进行任何工作；VS 只是变得毫无反应。

3.  每次您使用启用扩展的项目*关闭*VS 解决方案时，VSeWSS 都会重新执行整个操作。鉴于这一点，在我目前的项目中，我通常在座位上坐了 10 个小时左右，而我最不想做的就是等待更长的时间回家，这个过程比痛苦更糟糕（如果这甚至可能的话。）我们团队中的大多数开发人员只是去任务管理器并杀死*devenv.exe*。过程而不是等待。

4.  尝试使用当前 (CTP) 版本的扩展来进行集成构建时，我们遇到了非常糟糕的情况。从命令行使用 VSeWSS 来构建和打包我们所有的项目时，我们遇到了很多问题。

In brief, use STSDEV. Setting up the folders is kind of a pain, but once you have everything scripted out, you're pretty much set.

# svn - 用于避免更改标签子目录的 SVN 预提交挂钩

> ID：464384
> 
> 赞同：40
> 
> 时间：2009-01-21T07:59:06.327
> 
> 标签：svn, tags, svn-hooks, pre-commit

是否有人对如何添加避免更改标签子目录的预提交挂钩有明确的说明？

我已经在互联网上搜索了很多。我找到了这个链接：[SVN::Hooks::DenyChanges](https://metacpan.org/pod/SVN::Hooks::DenyChanges)，但我似乎无法编译东西。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-03-15T22:58:40.877

我没有足够的声誉来“评论”Raim 上面的回答，但他的工作很好，除了一个例外，他的 grep 模式是错误的。

我只是将以下内容用作我的预提交钩子（我没有现有的钩子，在这种情况下您需要合并）：

```
#!/bin/sh

REPOS="$1"
TXN="$2"

SVNLOOK=/opt/local/bin/svnlook

# Committing to tags is not allowed
$SVNLOOK changed -t "$TXN" "$REPOS" | grep "^U\W.*\/tags\/" && /bin/echo "Cannot commit to tags!" 1>&2 && exit 1

# All checks passed, so allow the commit.
exit 0 
```

Raim 的 grep 模式的唯一问题是，如果它位于您的存储库的“根”，它只会匹配“标签”。由于我的仓库中有几个项目，因此他编写的脚本允许在标记分支上提交。

另外，请务必按照指示 chmod +x ，否则您会认为它在提交失败时起作用，但在提交失败时它失败了，因为它无法执行预提交挂钩，而不是因为挂钩起作用。

这真的很棒，谢谢雷姆。比所有其他建议更好更轻，因为它没有依赖关系！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-02-23T01:16:22.173

这是一个简短的 shell 脚本，用于防止在创建标签后提交标签：

```
#!/bin/sh

REPOS="$1"
TXN="$2"

SVNLOOK=/usr/bin/svnlook

# Committing to tags is not allowed
$SVNLOOK changed -t "$TXN" "$REPOS" | grep "^U\W*tags" && /bin/echo "Cannot commit to tags!" 1>&2 && exit 1

# All checks passed, so allow the commit.
exit 0 
```

将此保存在`hooks/pre-commit`您的 Subversion 存储库中，并使用`chmod +x`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2010-08-23T17:46:54.573

这是我的 Windows 批处理文件预提交挂钩。如果用户是管理员，则将跳过其他检查。它检查提交消息是否为空，以及提交是否针对标签。注意：findstr 是其他平台上 grep 的一个 nerfed 替代品。

它检查提交是否是标记的方式，它首先检查 svnlook 更改是否包含“tags/”。然后它会检查 svnlook changed 是否匹配 "^A.tags */[^/]* /$"，这意味着它会检查你是否在 tags/ 下添加一个新文件夹。

允许用户创建新项目。预提交挂钩允许用户创建文件夹trunk/ tags/ 和branches/。不允许用户删除文件夹trunk/tags/和branchs/。这将适用于单个或多项目存储库。

```
 @echo off
 rem This pre-commit hook will block commits with no log messages and blocks commits on tags.
 rem Users may create tags, but not modify them.
 rem If the user is an Administrator the commit will succeed.

 rem Specify the username of the repository administrator
 rem commits by this user are not checked for comments or tags
 rem Recommended to change the Administrator only when an admin commit is neccessary
 rem then reset the Administrator after the admin commit is complete
 rem this way the admin user is only an administrator when neccessary
 set Administrator=Administrator

 setlocal

 rem Subversion sends through the path to the repository and transaction id.
 set REPOS=%1%
 set TXN=%2%

 :Main
 rem check if the user is an Administrator
 svnlook author %REPOS% -t %TXN% | findstr /r "^%Administrator%$" >nul
 if %errorlevel%==0 (exit 0)

 rem Check if the commit has an empty log message
 svnlook log %REPOS% -t %TXN% | findstr . > nul
 if %errorlevel% gtr 0 (goto CommentError)

 rem Block deletion of branches and trunk
 svnlook changed %REPOS% -t %TXN% | findstr /r "^D.*trunk/$ ^D.*branches/$" >nul
 if %errorlevel%==0 (goto DeleteBranchTrunkError)

 rem Check if the commit is to a tag
 svnlook changed %REPOS% -t %TXN% | findstr /r "^.*tags/" >nul
 if %errorlevel%==0 (goto TagCommit)
 exit 0

 :DeleteBranchTrunkError
 echo. 1>&2
 echo Trunk/Branch Delete Error: 1>&2
 echo     Only an Administrator may delete the branches or the trunk. 1>&2
 echo Commit details: 1>&2
 svnlook changed %REPOS% -t %TXN% 1>&2
 exit 1

 :TagCommit
 rem Check if the commit is creating a subdirectory under tags/ (tags/v1.0.0.1)
 svnlook changed %REPOS% -t %TXN% | findstr /r "^A.*tags/[^/]*/$" >nul
 if %errorlevel% gtr 0 (goto CheckCreatingTags)
 exit 0

 :CheckCreatingTags
 rem Check if the commit is creating a tags/ directory
 svnlook changed %REPOS% -t %TXN% | findstr /r "^A.*tags/$" >nul
 if %errorlevel% == 0 (exit 0)
 goto TagsCommitError

 :CommentError
 echo. 1>&2
 echo Comment Error: 1>&2
 echo     Your commit has been blocked because you didn't enter a comment. 1>&2
 echo     Write a log message describing your changes and try again. 1>&2
 exit 1

 :TagsCommitError
 echo. 1>&2
 echo %cd% 1>&2
 echo Tags Commit Error: 1>&2
 echo     Your commit to a tag has been blocked. 1>&2
 echo     You are only allowed to create tags. 1>&2
 echo     Tags may only be modified by an Administrator. 1>&2
 echo Commit details: 1>&2
 svnlook changed %REPOS% -t %TXN% 1>&2
 exit 1 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2010-08-20T07:17:45.523

这个 anwser 是在日期之后很多，但我发现了 svnlook changed 命令的 --copy-info 参数。

此命令的输出在第三列中添加了一个“+”，因此您知道它是一个副本。您可以检查对 tags 目录的提交，并且只允许存在“+”的提交。

我在[我的博客文章](http://blog.jachim.be/2010/08/disallow-changes-in-subversion-tags/)中添加了一些输出。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-30T23:30:45.477

派对很晚了，但是我写了一个 python 预提交钩子，它基于[http://subversion.tigris.org/](http://subversion.tigris.org/)上的 log-police.py 脚本。

这个脚本应该做你想做的事，但是它也会检查日志消息是否存在，尽管这应该很容易从脚本中删除。

一些警告：

*   我是 Python 新手，所以它很可能会写得更好
*   它仅在 Windows 2003 上使用 Python 2.5 和 Subversion 1.4 进行了测试。

要求：

*   颠覆
*   Python
*   Python 的 Subversion 绑定

最后，代码：

```
#!/usr/bin/env python

#
# pre-commit.py:
#
# Performs the following:
#  - Makes sure the author has entered in a log message.
#  - Make sure author is only creating a tag, or if deleting a tag, author is a specific user
#
# Script based on http://svn.collab.net/repos/svn/trunk/tools/hook-scripts/log-police.py
#
# usage: pre-commit.py -t TXN_NAME REPOS
# E.g. in pre-commit.bat (under Windows)
#   python.exe {common_hooks_dir}\pre_commit.py -t %2 %1
#

import os
import sys
import getopt
try:
  my_getopt = getopt.gnu_getopt
except AttributeError:
  my_getopt = getopt.getopt

import re

import svn
import svn.fs
import svn.repos
import svn.core

#
# Check Tags functionality
#
def check_for_tags(txn):
  txn_root = svn.fs.svn_fs_txn_root(txn)
  changed_paths = svn.fs.paths_changed(txn_root)
  for path, change in changed_paths.iteritems():
    if is_path_within_a_tag(path): # else go to next path
      if is_path_a_tag(path):
        if (change.change_kind == svn.fs.path_change_delete):
          if not is_txn_author_allowed_to_delete(txn):
            sys.stderr.write("\nOnly an administrator can delete a tag.\n\nContact your Subversion Administrator for details.")
            return False
        elif (change.change_kind != svn.fs.path_change_add):
          sys.stderr.write("\nUnable to modify " + path + ".\n\nIt is within a tag and tags are read-only.\n\nContact your Subversion Administrator for details.")
          return False
        # else user is adding a tag, so accept this change
      else:
        sys.stderr.write("\nUnable to modify " + path + ".\n\nIt is within a tag and tags are read-only.\n\nContact your Subversion Administrator for details.")
        return False
  return True

def is_path_within_a_tag(path):
  return re.search('(?i)\/tags\/', path)

def is_path_a_tag(path):
  return re.search('(?i)\/tags\/[^\/]+\/?$', path)

def is_txn_author_allowed_to_delete(txn):
  author = get_txn_property(txn, 'svn:author')
  return (author == 'bob.smith')

#
# Check log message functionality
#
def check_log_message(txn):
  log_message = get_txn_property(txn, "svn:log")
  if log_message is None or log_message.strip() == "":
    sys.stderr.write("\nCannot enter in empty commit message.\n")
    return False
  else:
    return True

def get_txn_property(txn, prop_name):
  return svn.fs.svn_fs_txn_prop(txn, prop_name)

def usage_and_exit(error_msg=None):
  import os.path
  stream = error_msg and sys.stderr or sys.stdout
  if error_msg:
    stream.write("ERROR: %s\n\n" % error_msg)
  stream.write("USAGE: %s -t TXN_NAME REPOS\n"
               % (os.path.basename(sys.argv[0])))
  sys.exit(error_msg and 1 or 0)

def main(ignored_pool, argv):
  repos_path = None
  txn_name = None

  try:
    opts, args = my_getopt(argv[1:], 't:h?', ["help"])
  except:
    usage_and_exit("problem processing arguments / options.")
  for opt, value in opts:
    if opt == '--help' or opt == '-h' or opt == '-?':
      usage_and_exit()
    elif opt == '-t':
      txn_name = value
    else:
      usage_and_exit("unknown option '%s'." % opt)

  if txn_name is None:
    usage_and_exit("must provide -t argument")
  if len(args) != 1:
    usage_and_exit("only one argument allowed (the repository).")

  repos_path = svn.core.svn_path_canonicalize(args[0])

  fs = svn.repos.svn_repos_fs(svn.repos.svn_repos_open(repos_path))
  txn = svn.fs.svn_fs_open_txn(fs, txn_name)

  if check_log_message(txn) and check_for_tags(txn):
    sys.exit(0)
  else:
    sys.exit(1)

if __name__ == '__main__':
  sys.exit(svn.core.run_app(main, sys.argv)) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2011-11-17T08:46:58.120

大多数以前编写的脚本都是不完整的，因为有几个案例没有涉及。这是我的脚本：

```
contains_tags_dir=`$SVNLOOK changed --copy-info -t "$TXN" "$REPOS" | head -1 | egrep "+\/tags\/.*$" | wc -l | sed "s/ //g"`

if [ $contains_tags_dir -gt 0 ]
then
  tags_dir_creation=`$SVNLOOK changed --copy-info -t "$TXN" "$REPOS" | head -1 | egrep "^A       .+\/tags\/$" | wc -l | sed "s/ //g"`
  if [ $tags_dir_creation -ne 1 ]
  then
    initial_add=`$SVNLOOK changed --copy-info -t "$TXN" "$REPOS" | head -1 | egrep "^A \+ .+\/tags\/.+\/$" | wc -l | sed "s/ //g"`
    if [ $initial_add -ne 1 ]
    then
      echo "Tags cannot be changed!" 1>&2
      exit 1
    fi
  fi
fi 
```

它可能看起来很复杂，但您必须确保您在其中，并且如果它不存在，`/tags`您可以创建它以及所有后续文件夹。`/tags`任何其他更改都会被阻止。几乎没有一个以前的脚本涵盖了 Subversion 书中描述的所有情况`svnlook changed ...`。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-07-19T15:38:05.133

接受的答案会阻止更新标签中的文件，但不会阻止将文件添加到标签中。以下版本同时处理：

```
#!/bin/sh

REPOS="$1"
TXN="$2"
SVNLOOK="/home/staging/thirdparty/subversion-1.6.17/bin/svnlook"

# Committing to tags is not allowed
$SVNLOOK changed -t "$TXN" "$REPOS" --copy-info| grep -v "^ " | grep -P '^[AU]   \w+/tags/' && /bin/echo "Cannot update tags!" 1>&2 && exit 1

# All checks passed, so allow the commit.
exit 0 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-11-11T14:42:03.723

我的版本只允许创建和删除标签。这应该处理所有特殊情况（如添加文件、更改属性等）。

```
#!/bin/sh

REPOS="$1"
TXN="$2"
SVNLOOK=/usr/local/bin/svnlook

output_error_and_exit() {
    echo "$1" >&2
    exit 1
}

changed_tags=$( $SVNLOOK changed -t "$TXN" "$REPOS" | grep "[ /]tags/." )

if [ "$changed_tags" ]
then 
    echo "$changed_tags" | egrep -v "^[AD] +(.*/)?tags/[^/]+/$" && output_error_and_exit "Modification of tags is not allowed."
fi 

exit 0 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-11T18:25:51.990

由于第一个答案没有阻止添加/支持文件，并阻止了新标签的创建，以及许多其他不完整或有问题的地方，我重新设计了它

这是我的预提交钩子：目标是：

*   禁止提交标签（文件添加/抑制/更新）
*   不要阻止标签的创建

--------- 文件“预提交”（放入存储库*挂钩*文件夹中）---------

```
#!/bin/sh

REPOS="$1"
TXN="$2"

SVNLOOK=/usr/bin/svnlook

#Logs
#$SVNLOOK changed -t "$TXN" "$REPOS" > /tmp/changes
#echo "$TXN" > /tmp/txn
#echo "$REPOS" > /tmp/repos

# Committing to tags is not allowed
# Forbidden changes are Update/Add/Delete.  /W = non alphanum char  Redirect is necessary to get the error message, since regular output is lost.
# BUT, we must allow tag creation / suppression

$SVNLOOK changed -t "$TXN" "$REPOS" | /bin/grep "^A\W.*tags\/[0-9._-]*\/." && /bin/echo "Commit to tags are NOT allowed ! (Admin custom rule)" 1>&2 && exit 101
$SVNLOOK changed -t "$TXN" "$REPOS" | /bin/grep "^U\W.*tags\/[0-9._-]*\/." && /bin/echo "Commit to tags are NOT allowed ! (Admin custom rule)" 1>&2 && exit 102
$SVNLOOK changed -t "$TXN" "$REPOS" | /bin/grep "^D\W.*tags\/[0-9._-]*\/." && /bin/echo "Commit to tags are NOT allowed ! (Admin custom rule)" 1>&2 && exit 104

# All checks passed, so allow the commit.
exit 0; 
```

--------- 文件“预提交”结束 ---------

另外，我制作了 2 个 shell 脚本来在我的 svn 的每个项目中复制我的钩子：一个用于设置只读的 repo：

--------- 脚本“setOneRepoTagsReadOnly.sh” ---------

```
#!/bin/sh

cd /var/svn/repos/svn
zeFileName=$1/hooks/pre-commit
/bin/cp ./CUSTOM_HOOKS/pre-commit $zeFileName
chown www-data:www-data $zeFileName
chmod +x $zeFileName 
```

--------- 文件“setOneRepoTagsReadOnly.sh”结束 ---------

并且为每个回购调用它，以使我的所有回购都只读：

--------- 文件“makeTagsReadOnly.sh” ---------

```
#!/bin/shs/svn                                                                                                                                                                         
#Lists all repos, and adds the pre-commit hook to protect tags on each of them
find /var/svn/repos/svn/ -maxdepth 1 -mindepth 1 -type d -execdir '/var/svn/repos/svn/setOneRepoTagsReadOnly.sh' \{\} \; 
```

--------- 文件“makeTagsReadOnly.sh”结束 ---------

我直接从svn“root”（在我的例子中是/var/svn/repos/svn）执行那些脚本。顺便说一句，可以将 cron 任务设置为通过每天执行这些脚本来自动修改新的 repos

希望能帮助到你。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-09-29T09:26:41.570

如果您使用 JIRA，则可以使用名为[Commit Policy](https://marketplace.atlassian.com/plugins/com.midori.jira.plugin.jira-commit-policy-plugin)的附加组件来保护存储库中的路径，**而无需编写自定义钩子**。

如何？使用名为*[Changed files must match a pattern](http://www.midori-global.com/products/jira-commit-policy-plugin/documentation/#file-pattern-condition)*的条件。

它有一个正则表达式类型参数，该参数必须与提交中的每个文件匹配，否则提交将被拒绝。因此，在您的情况下，您应该使用表示“不以前缀 /tags/ 开头”的正则表达式。

（您可以使用相同的插件实现许多其他智能检查。）

*免责声明：我是一名开发此付费插件的开发人员。*

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-18T15:14:26.943

列出的答案很棒，但没有一个完全符合我的需要。我想允许轻松创建标签，但是一旦创建它们，它们应该是完全只读的。

我还想防止出现以下愚蠢情况：

```
svn copy myrepo/trunk myrepo/tags/newrelease 
```

第一次一切都很好。但是第二次，如果标签已经存在，你最终会得到`myrepo/tags/newrelease/trunk`.

我的 pre-commit 挂钩将查找任何预先存在的 SVN 目录匹配`(repo)/tags/(tag)/`，如果找到则失败：

```
$SVNLOOK tree -N --full-paths "$REPOS" "`$SVNLOOK changed -t "$TXN" "$REPOS" \
  | sed 's/[A-Z][[:space:]]*\([^/]*\)\/tags\/\([^/]*\)\/.*/\1\/tags\/\2\//' \
  | head -n 1`" \
  && echo "Tag already exists, commit rejected." >&2 \
  && exit 1 
```

# java - 是否可以从 Java 应用程序控制 CPU 使用率？

> ID：464387
> 
> 赞同：5
> 
> 时间：2009-01-21T07:59:50.647
> 
> 标签：java, streaming, cpu-usage

我正在开发一个通过 HTTP 流式传输音乐的 Java 应用程序，我遇到的一个问题是，当应用程序从磁盘读取音频文件并将其发送到客户端时，它通常会使 CPU 达到 90-100 %（这可能会导致用户在运行其他应用程序时出现问题）。

是否可以控制执行此工作的线程以使用更少的 CPU，或者这是否需要由操作系统控制？目前是否有任何技术可以管理您的应用程序的密集程度？

我知道您可以以高/低优先级启动线程，但这在这种情况下似乎对我没有任何影响。

（我无法忘记“我已经要求计算机做某事，所以它显然会尽可能快地完成它......”）

谢谢！

竿。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-21T08:20:27.017

该任务（从磁盘读取文件并通过 HTTP 发送）不应*使用*任何大量 CPU，尤其是在音乐流所需的比特率下（除非您正在谈论多通道未压缩 PCM 或类似的东西，但是即使这样，它也应该是 I/O-bound 并且不使用大量 CPU）。

您可能正在以一种非常低效的方式进行读/写。您是分别读/写每个字节还是使用某种缓冲区？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T21:40:55.857

我会检查你正在使用多少缓冲。如果您一次读/写一个字节，您将消耗大量 CPU。但是，如果您正在读取/写入 4 kB 的块，则根本不应该使用太多 CPU。如果您的网络是互联网，那么您的 CPU 不应超过单个客户端的 10%。

缓冲区大小的一种近似值是带宽 * 延迟。例如，如果您希望用户以 500 KB/s 的速度进行流式传输，并且网络延迟高达 0.1 秒，那么缓冲区大小应该在 50 KB 左右。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-21T08:03:19.330

您可以使用 Thread 中的方法降低它的优先级（如有必要，通过 Thread.currentThread() ）。

您还可以在它的处理循环中放置延迟（Thread.sleep()）。

除此之外，让操作系统来处理它。如果您的程序可以使用 100% CPU，并且没有其他东西需要 CPU，那么您的应用程序不妨使用它，而不是让 O/S 空闲任务拥有它。

流数据确实应该是 I/O 绑定的，因此您绝对应该查看在读取数据和发送数据之间所做的工作。例如，您是否正在逐字节读取/发送无缓冲？

编辑：针对 marr75 的评论，我绝对不主张您编写*浪费*CPU 资源的糟糕、低效的代码 -[我的网站上有一篇文章](http://www.softwaremonkey.org/Article/CodeBloat)清楚地传达了我对这种思维方式的看法。相反，我要说的是，如果您的代码合法地需要 CPU，并且如果用户想要做其他事情，您已经优先考虑让它表现得很好，那么人为地延迟结果只是为了避免挂钩是没有意义的CPU——这只会对用户造成伤害，让他们等待更长时间等待最终结果，他们可能希望尽快获得最终结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T20:09:50.347

您是否有以下一项或多项：

*   软件 RAID
*   压缩文件夹
*   侵入式病毒检查器
*   环回文件系统

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-21T20:04:34.443

好的，谢谢大佬们的建议！看起来我只需要考虑尝试提高我的应用程序流式传输方式的效率（尽管不确定这会走多远，因为我基本上只是从磁盘读取文件并将其写入客户...）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-21T20:13:18.063

VisualVM 很容易用于找出你的 CPU 时间花在了 Java 应用程序上，它包含在最新版本的 JDK 中（在 Windows 上名为 jvisualvm.exe）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-21T09:14:05.880

除了上面给出的信息之外：JVM 在如何使用操作系统线程方面是自由的。Java 应用程序中的线程可能在单独的操作系统线程中运行，或者它可能与其他线程共享该线程。查看您正在使用的 JVM 的文档以获取更多信息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-26T17:15:36.600

跟进我的“深思熟虑的缓冲区”评论，这是 TCP 缓冲的一个很好的经验法则，缓冲区大小 = 2 * 带宽 * 延迟

因此，如果您想流式传输 214kbps 的音乐（大约 27kB/s）并且有 60ms 的延迟，那么您正在查看 3.24 KB，并且四舍五入到一个不错的 4kB 缓冲区将非常适合您在广泛的范围内使用系统。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-21T08:34:38.097

我认为您不能在不丢失功能（流音乐）的情况下降低优先级。您的程序从操作系统获得了这么多 CPU，因为它需要它。这不像操作系统无缘无故地放弃 cpu 时间，或者因为“它有心情”。

如果您认为，您可以在不使用那么多 cpu 利用率的情况下完成任务，您可以分析您的应用程序并找出这种高 cpu 利用率发生在哪里，然后尝试改进您的代码。

我认为您正在以低效的方式进行流式传输，但我说流式传输可以是一项高度利用的任务。

我再说一遍，不要考虑通过降低进程的优先级或告诉操作系统“不要给这个进程太多的 cpu 时间”来降低 cpu 利用率。在我看来，这完全是错误的直觉。通过在分析后改进算法和代码来降低 CPU 使用率。

本文是分析 java 的一个良好开端：http: [//www.ibm.com/developerworks/edu/os-dw-os-ecl-tptp.html](http://www.ibm.com/developerworks/edu/os-dw-os-ecl-tptp.html)

# file - 如何从 Java 1.4.2 更改文件权限？

> ID：464391
> 
> 赞同：5
> 
> 时间：2009-01-21T08:02:03.450
> 
> 标签：file, permissions

我正在寻找一个代码片段，我必须使用它来更改 unix 上的文件权限。我的项目在 java 1.4.2 上运行 ..

只需一个示例代码示例或需要使用的方法就可以了..

问候， 森尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T08:04:59.390

你不是唯一一个： [如何在 Java 中更改文件的权限和最后修改？](https://stackoverflow.com/questions/459622/how-to-change-the-files-permission-and-last-modified-in-java)

如果现有的 java.io.File 方法不够用，原则上您可以使用 Runtime.exec("chmod ...")。但它不会是便携式的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T08:29:15.283

您还可以查看[java.lang.File的 Gnu ClassPath 实现](http://cvs.savannah.gnu.org/viewvc/classpath/java/io/File.java?revision=1.70&root=classpath&view=markup)

他们基于 JNI 调用实现了该功能：

```
native/jni/java-io/java_io_VMFile.c:
  set_file_permissions: new helper function.
  Java_java_io_VMFile_setReadable: new native method to bakcup 1.6 methods
  in VMFile.java. 
```

[VMFile.java](http://cvs.savannah.gnu.org/viewvc/classpath/vm/reference/java/io/VMFile.java?revision=1.13&root=classpath&view=markup)声明调用：

```
 /**
   * Set the write permission of the file.
   */
  public static synchronized native boolean setWritable(String path,
                                                        boolean writable,
                                                        boolean ownerOnly); 
```

[native/jni/java-io/java_io_VMFile.c](http://cvs.savannah.gnu.org/viewvc/classpath/native/jni/java-io/java_io_VMFile.c?revision=1.17&root=classpath&view=markup)确实实现了所需的功能...

```
JNIEXPORT jboolean JNICALL
Java_java_io_VMFile_setWritable (JNIEnv *env,
                                 jclass clazz __attribute__ ((__unused__)),
                                 jstring name,
                                 jboolean writable,
                                 jboolean ownerOnly)
{
  return set_file_permissions (env, name, writable, ownerOnly,
                               CPFILE_FLAG_WRITE);
}

[...]
result = cpio_chmod (filename, permissions); 
```

所以......如果你真的想要它，可以通过查看[cpio.c 的源代码](http://acapulco.dyndns.org/manual/src/work/gcc-4.3.0/libjava/classpath/native/jni/native-lib/cpio.c)来实现它：它`chmod`从**libc**标准库调用（[LibGW32C](http://gnuwin32.sourceforge.net/packages/libgw32c.htm)确实将其中一些功能移植到 Windows）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-10T17:44:19.027

更清楚一点：Java 1.6 引入了像 File.canExecute() 和 File.setExecutable(boolean) 这样的 getter/setter 来获得文件权限。因此，一种解决方案是使用最新的 JDK 而不是您提到的 1.4。否则，按照建议，您可以尝试向后移植或调用特定于平台的命令。

# jquery - 具有适当后退按钮支持的 jQuery 灯箱

> ID：464405
> 
> 赞同：2
> 
> 时间：2009-01-21T08:12:37.953
> 
> 标签：jquery, jquery-plugins, lightbox

在运行了一些可用性测试后，我发现参与者打开了一个[jQuery Lightbox](http://leandrovieira.com/projects/jquery/lightbox/)来查看更大的图像。然后，他们只需点击浏览器的后退按钮，而不是点击“关闭”按钮。这会将它们发送到最后一页，而不是关闭灯箱。

有谁知道支持所描述的后退按钮行为的 jQuery 照片库？或者有没有人修改他们的 jQuery Lightbox 来这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T08:16:03.783

在此处尝试 jQuery[历史插件](http://www.mikage.to/jquery/jquery_history.html)。您可能需要添加一些自定义挂钩函数来修改 Lightbox 的行为，但这应该不会太难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-08T21:13:20.750

回答 5 年前提出的问题有点奇怪，但我发布了一个可以做到这一点的画廊脚本 - [http://photoswipe.com/](http://photoswipe.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-08T09:01:09.563

我有另一个解决方案给你。Jquery mobile 支持导航控制。看看这个链接 [如何在 Jquery mobile 中控制后退按钮事件？](https://stackoverflow.com/questions/18211984/how-to-control-back-button-event-in-jquery-mobile)

# objective-c - 如何在 webview 中显示本地图像？

> ID：464416
> 
> 赞同：2
> 
> 时间：2009-01-21T08:17:40.517
> 
> 标签：objective-c, cocoa, webkit

我想在 webview 中显示本地图像，怎么办？有人有一个简单的演示吗？多谢！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-02T18:26:54.543

最好的方法是将 baseURL 设置为 Bundles 路径。然后从那里你可以从你的 Bundle 中调用图像，如下所示：

```
NSString *bundlePath = [[NSBundle mainBundle] bundlePath];
NSURL *bundleBaseURL = [NSURL fileURLWithPath: bundlePath];

[webView loadHTMLString:htmlContent baseURL: bundleBaseURL]; 
```

HTML 中的 Image 然后可以直接调用本地图像。

```
<img src="yourImageFromTheMainBundle.jpg" /> 
```

同样可以用于调用 CSS 文件甚至 JS 文件，因为 baseURL 会在主 Bunble 内部查找。

如果它不在您的主包中，您所要做的就是将 baseURL 更改为图像所在的路径。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-21T11:32:03.247

```
NSURL *imageURL = [NSURL fileURLWithPath:localImagePath];
NSURLRequest *request = [NSURLRequest requestWithURL:imageURL];
[[webView mainFrame] loadRequest:request]; 
```

# svn - 如何使用 SVN，Branch？标签？树干？

> ID：464417
> 
> 赞同：163
> 
> 时间：2009-01-21T08:17:56.587
> 
> 标签：svn, version-control

我在谷歌上搜索了一下，找不到一个好的[SVN](http://en.wikipedia.org/wiki/Subversion_%28software%29)的“初学者”指南，而不是“我如何使用命令”的意思；如何控制我的源代码？

我想澄清的是以下主题：

*   你多久提交一次？经常按`Ctrl`+ `s`？
*   什么是分支，什么是标签，你如何控制它们？
*   什么进入SVN？只有源代码还是您也在这里共享其他文件？（不考虑版本化文件..）

我不知道分支和标签是什么，所以我不知道目的，但我的猜测是你将东西上传到主干，当你进行主要构建时，你将它移动到分支？那么，在这种情况下，什么被认为是主要构建？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2009-01-21T08:39:26.950

当我们在这里实施 Subversion 时，我问过自己同样的问题——大约 20 名开发人员分布在 4 到 6 个项目中。我没有找到任何一个很好的“答案”来源。以下是我们的答案在过去 3 年中如何发展的部分内容：

-- 尽可能多地提交；我们的经验法则是，只要您完成了足够的工作，如果修改丢失，则必须重新进行工作，这将是一个问题；有时我每 15 分钟左右提交一次，有时可能是几天（是的，有时我需要一天时间来编写 1 行代码）

- 正如您先前的答案之一所建议的那样，我们将分支用于不同的开发路径；现在，对于我们的一个程序，我们有 3 个活动分支：1 个用于主要开发，1 个用于并行化程序的尚未完成的工作，1 个用于修改它以使用 XML 输入和输出文件的工作；

-- 我们几乎不使用标签，尽管我们认为我们应该使用它们来识别发布到生产环境；

想想沿着单一路径进行的开发。在某个时间或开发状态下，营销部门决定发布产品的第一个版本，因此您在标有“1”（或“1.0”或您有什么）的路径中放置一个标志。在其他某个时间，一些明亮的火花决定将程序并行化，但决定这将需要数周时间，并且人们希望在此期间继续沿着主要路径前进。因此，您在路径上建立了一个分叉，不同的人在不同的分叉上徘徊。

道路上的旗帜被称为“标签”，道路上的岔路口是“分支”的分叉处。有时，树枝也会一起回来。

-- 我们将构建可执行文件（或系统）所需的所有材料放入存储库；这至少意味着源代码和生成文件（或 Visual Studio 的项目文件）。但是当我们有图标和配置文件以及所有其他东西时，它们就会进入存储库。一些文档进入了 repo；当然，任何可能是程序不可或缺的文档（例如帮助文件）都可以，并且它是放置开发人员文档的有用地方。

我们甚至将生产版本的 Windows 可执行文件放在那里，为寻找软件的人提供一个单一的位置——我们的 Linux 版本转到服务器，因此不需要存储。

-- 我们不要求存储库始终能够提供可构建和执行的最新版本；有些项目以这种方式工作，有些则不然；该决定取决于项目经理，取决于许多因素，但我认为在对程序进行重大更改时它会崩溃。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-01-21T08:25:43.873

```
* How often do you commit? As often as one would press ctrl + s? 
```

尽可能经常地。除非受源代码控制，否则代码不存在:)

频繁的提交（之后是较小的更改集）使您可以轻松地集成更改并增加不破坏某些东西的机会。

其他人指出，当您拥有一段功能性代码时，您应该提交，但是我发现稍微更频繁地提交很有用。有几次我注意到我使用源代码控制作为快速撤消/重做机制。

当我在自己的分支上工作时，我更喜欢尽可能多地提交（字面意思是我按 ctrl+s 的频率）。

```
* What is a Branch and what is a Tag and how do you control them? 
```

阅读[SVN 书](http://svnbook.red-bean.com/)- 这是您学习 SVN 时应该开始的地方：

*   [什么是分支？](http://svnbook.red-bean.com/en/1.5/svn.branchmerge.whatis.html)
*   [标签](http://svnbook.red-bean.com/en/1.5/svn.branchmerge.tags.html)

> ```
> * What goes into the SVN? 
> ```

文档、构建所需的小型二进制文件以及其他具有一定价值的东西都用于源代码管理。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-21T08:20:43.257

提交频率取决于您的项目管理风格。如果它会破坏构建（或功能），许多人会避免提交。

可以通过以下两种方式之一使用分支，通常是：1) 一个用于开发的活动分支（并且主干保持稳定），或 2) 用于备用开发路径的分支。

标签通常用于识别版本，因此它们不会在混合中丢失。“释放”的定义取决于你。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-11T07:04:41.250

我认为主要问题是源代码控制的心理画面很混乱。我们通常有主干和分支，但随后我们会得到不相关的标签/发布或其他影响的想法。

如果你更完整地使用树的概念，它会变得更清晰，至少对我来说是这样。

我们得到树干 -> 形成分支 -> 生产水果（标签/发布）。

这个想法是您从主干中发展项目，然后在主干足够稳定以容纳分支时创建分支。然后，当树枝结出果实时，您将其从树枝上摘下来并作为标签释放。

标签本质上是可交付成果。而树干和树枝产生它们。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-21T09:23:58.653

只是添加另一组答案：

*   每当我完成一项工作时，我都会承诺。有时这是一个小错误修复，只更改了一行，我花了 2 分钟完成；其他时候是两周的汗水。此外，根据经验，您不会提交任何破坏构建的内容。因此，如果您花费了很长时间来做某事，请在提交之前获取最新版本，并查看您的更改是否会破坏构建。当然，如果我长时间不投入，我会感到不安，因为我不想放弃那份工作。在 TFS 中，我将这个好东西用作“搁置集”。在 SVN 中，您将不得不以另一种方式解决。也许创建自己的分支或手动将这些文件备份到另一台机器。
*   分支是整个项目的副本。最好的说明可能是产品的版本控制。想象一下，您正在从事一个大型项目（例如，Linux 内核）。经过几个月的努力，您终于获得了向公众发布的 1.0 版本。之后，您开始使用您的产品的 2.0 版本，这将变得更好。但与此同时，也有很多人在使用 1.0 版本。这些人会发现你必须修复的错误。现在，您无法修复即将发布的 2.0 版本中的错误并将其发送给客户——它根本没有准备好。相反，您必须提取 1.0 源代码的旧副本，修复那里的错误，然后将其发送给人们。这就是分支的用途。当你发布 1。0 版本您在 SVN 中创建了一个分支，该分支在那时制作了源代码的副本。这个分支被命名为“1.0”。然后，您继续在主要源副本中处理下一个版本，但 1.0 副本仍保留在发布时的状态。您可以继续在那里修复错误。标签只是附加到特定修订版的名称，以便于使用。您可以说“源代码的修订版 2342”，但更容易将其称为“第一个稳定修订版”。:)
*   我通常将与编程直接相关的所有内容都放在源代码管理中。例如，由于我正在制作网页，因此我还将图像和 CSS 文件放在源代码管理中，更不用说配置文件等了。项目文档不会放在那里，但这实际上只是一个偏好问题。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-01-21T08:40:51.610

正如其他人所说，[SVN Book](http://svnbook.red-bean.com/)是您开始学习的最佳起点，也是您获得海腿后的绝佳参考。现在，对于您的问题...

**你多久提交一次？经常按 ctrl + s 吗？**

通常，但不如按 ctrl + s 的频率。这是个人品味和/或团队政策的问题。就我个人而言，当你完成一段功能代码时，我会说提交，无论多么小。

**什么是分支，什么是标签，你如何控制它们？**

首先，主干是您进行积极开发的地方。它是您的代码的主线。分支是与主线的一些偏差。这可能是一个重大偏差，例如以前的版本，或者只是您想尝试的一个小调整。标签是代码的快照。这是一种将标签或书签附加到特定修订版的方法。

还值得一提的是，在颠覆中，主干、分支和标签只是约定俗成的。没有什么能阻止您在标签中工作或拥有作为您的主线的分支，或者完全忽略标签-分支-主干方案。但是，除非您有充分的理由，否则最好遵守惯例。

**什么进入SVN？只有源代码还是您也在这里共享其他文件？**

也是个人或团队的选择。我更喜欢在我的存储库中保留与构建相关的任何内容。这包括配置文件、构建脚本、相关媒体文件、文档等。您不应该*在*每个开发人员的机器上签入需要不同的文件。您也不需要检查代码的副产品。我主要考虑构建文件夹、目标文件等。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-01-21T08:34:14.760

其他人说这取决于你的风格。

对您来说最大的问题是您“集成”软件的频率。测试驱动开发、敏捷和 Scrum（以及许多其他）依赖于小的更改和持续集成。他们宣扬要做出微小的改变，每个人都会找到突破口并一直修复它们。

然而，在一个更大的项目（想想政府、国防、100k+LOC）中，你根本不能使用持续集成，因为这是不可能的。在这些情况下，最好使用分支来做大量的小提交，但只将可以工作并准备好集成到构建中的东西带回主干。

不过，对分支的一个警告是，如果它们没有得到适当的管理，那么在你的存储库中将工作放到主干中可能是一场噩梦，因为每个人都从主干上的不同位置进行开发（顺便说一句，这是最大的论据之一）持续集成）。

这个问题没有明确的答案，最好的方法是与您的团队合作，提出最佳的折衷解决方案。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-21T09:29:09.220

这里有很多好的评论，但没有提到的是提交消息。这些应该是强制性的和有意义的。特别是分支/合并。这将允许您跟踪哪些更改与哪些错误功能相关。

例如，svn`commit . -m 'bug #201 fixed y2k bug in code'`会告诉任何查看历史的人该修订是为了什么。

一些错误跟踪系统（例如 trac）可以在存储库中查找这些消息并将它们与票证相关联。这使得计算出与每张工单相关的更改非常容易。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-21T08:33:59.253

对于提交，我使用以下策略：

*   尽可能多地提交。

*   每个功能更改/错误修复都应该有自己的提交（不要一次提交多个文件，因为这会使该文件的历史不清楚 - 例如，如果我独立更改日志模块和 GUI 模块并且我同时提交两者，这两个更改都将在两个文件历史记录中可见。这使得读取文件历史记录变得困难），

*   不要在任何提交时破坏构建——应该可以检索任何版本的存储库并构建它。

构建和运行应用程序所需的所有文件都应该在 SVN 中。测试文件等不应该，除非它们是单元测试的一部分。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-07-02T15:21:08.797

我们工作的政策是这样的（多开发团队致力于面向对象的框架）：

*   每天从 SVN 更新以获取前一天的更改

*   每天提交，因此如果您第二天生病或缺席，其他人可以轻松地从您离开的地方接手。

*   不要提交破坏任何东西的代码，因为这会影响其他开发人员。

*   处理小块并每天提交有意义的评论！

*   作为一个团队：保留一个开发分支，然后将预发布代码（用于 QA）移动到生产分支。这个分支应该只有完整的工作代码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-21T09:39:01.417

我认为提交频率有两种方法：

1.  经常提交，对于每个实现的方法，一小部分代码等。
2.  只提交已完成的部分代码，如模块等。

我更喜欢第一个 - 因为使用源代码控制系统不仅对项目或公司非常有用，首先它对开发人员有用。对我来说，最好的功能是在搜索最佳分配任务实现时回滚所有代码。

# sql - 更新日期字段

> ID：464425
> 
> 赞同：2
> 
> 时间：2009-01-21T08:21:29.730
> 
> 标签：sql

我继承了 MYSQL 数据库，该数据库有很多表，其中包含以下数据

```
CREATE TABLE IF NOT EXISTS `ejl_registration` (
  `id` int(11) NOT NULL auto_increment,
  `team_id` int(11) default NULL,
  `start_date` date default NULL,
  `end_date` date default NULL,
  PRIMARY KEY  (`id`),
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=88668 ; 
```

start_date 和 end_date 应该具有如下值：

*   2007-1-5, 2007-12-31
*   2008-1-1, 2008-12-31
*   2009-1-15,2009-12-31

但其中一些 en_date 字段为 NULL 或 0000-00-00。有没有办法让单个查询更新所有那些无效的 en_date 字段并将它们的值设置为年末等于 start_date 的年份

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T08:32:26.370

试试这个（请仔细检查，我没有测试过命令）：

```
UPDATE `ejl_registration` SET `end_date`= CONCAT(YEAR(`start_date`),'-12-31')
WHERE `end_date` IS NULL OR `end_date` = '0000-00-00'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T11:32:26.647

我不知道 MySQL 中是否存在 DATEADD 和 DATEDIFF，但我强烈建议使用某种日期函数，而不是转换为字符串并以这种方式操作它们。

在 MS SQL SERVER 中，这可以工作......

```
UPDATE
    ejl_registration
SET
    end_date = DATEADD(YEAR, 1 + DATEDIFF(YEAR, 0, start_date), 0)
WHERE
    (end_date) IS NULL OR (end_date = '0000-00-00') 
```

# mysql - 当我将字段更改为 utf8 时，为什么我的查询需要两倍的时间？

> ID：464426
> 
> 赞同：0
> 
> 时间：2009-01-21T08:21:35.113
> 
> 标签：mysql, query-optimization

我最初将我的字段设置为`latin1_swedish_ci`，我将其更改为`utf8_general_ci`（字段和表），然后发现我的查询从 ~1.8 秒变为 ~3.3。我在该字段上有一个索引，甚至重新创建了索引（删除然后添加）。该字段在 order by 子句中使用。

如果有问题或者这是否正常，有什么想法吗？

我正在运行 MySQL 5.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-21T09:12:39.660

`latin1_swedish_ci`是每个字符一个八位字节的编码系统。一旦您知道比较字符和整个字符串的整理（或排序）顺序就相对简单了。

`utf8_general_ci`每个字符需要一到四个八位字节。以这种编码方式解码八位字节数据更难，因此需要更长的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T09:26:02.423

我自己不经常使用 mysql，但我可能能够对问题所在提供一些见解。

latin1_swedish_ci 字符集是一个单字节编码系统，这意味着使用该系统编码的每个字符都只占用一个字节。将此与 utf8_general_ci 字符集进行对比，其中每个字符由每个字符一到四个八位字节组成，这意味着需要一到四个字节来表示每个字符。

这有一个明显的缺点，即 utf8 字符占用更多的空间、更多的内存，最重要的是，需要更多的 cpu 时间来识别。而最明显的优势是 utf8 字符可以编码为任何 unicode 字符。

由于这个问题标有“查询优化”，您需要问自己是否真的需要表示更“异国情调”的字符，或者单八位字节系统（例如纯 ASCII 表）中表示的字符是否是足以满足您的需求。因为从本质上讲，utf8 会吃掉更多的 CPU/内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T09:34:38.913

您的查询看起来如何？

您是否可以在该字段上使用过滤器，并将参数的数据类型指定为非 utf8 数据类型？在这种情况下，DBMS 将不得不进行一些强制转换，这会影响性能。

# c# - 如何在 C# 中使用 COM

> ID：464437
> 
> 赞同：1
> 
> 时间：2009-01-21T08:26:04.980
> 
> 标签：c#

如何在 Visual Studio .NET 2005 中使用 C# 引用 VB 6.0 组件（.dll）

引用此 DLL 文件后，我可以在解决方案资源管理器的引用文件夹图标中看到新图标。但是这个新图标有“！” 符号。我双击了这个新图标，上面写着“无法在对象浏览器中查看此项目，因为它不可用或尚未构建。请确保项目可用且已构建。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-21T08:51:01.980

只需添加引用，Visual Studio 就会为您创建一个包装（互操作）程序集。

如果您想更好地控制此程序集的创建（如名称、签名），请使用 tlbimp.exe 在命令行中执行此操作

例子：

```
tlbimp.exe MyCOMDLL.dll /keyfile:KeyFile.snk /out:MyCOMInterop.dll 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-21T08:28:10.497

尝试将其添加为您的项目的参考。Visual Studio 将为其添加一个包装器，您应该能够使用该代码吗？

这取决于组件是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T08:55:53.373

引用此 DLL 文件后，我可以在解决方案资源管理器的引用文件夹图标中看到新图标。但是这个新图标有“！” 符号。我双击了这个新图标，上面写着“无法在对象浏览器中查看此项目，因为它不可用或尚未构建。请确保项目可用且已构建。”

# sharepoint - 如何实现用于索引重量级格式的 IFilter？

> ID：464443
> 
> 赞同：2
> 
> 时间：2009-01-21T08:32:01.567
> 
> 标签：sharepoint, search, ifilter

我需要为 Microsoft Search Server 2008 开发一个 IFilter，它执行长时间的计算以提取文本。从一个文件中提取文本可能需要 5 秒到 12 小时。如何设计这样的 IFilter，以便守护程序不会在超时时重置它，并且如果其他 IFilter 挂断，它们也可以在超时时重置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-27T01:29:02.390

12小时，哇！

如果需要很长时间并且有很多文件，最好的选择是创建一个预处理应用程序，该应用程序将提取文本并使其可供 iFilter 访问。

另一种选择是创建文档的 html 摘要并指示爬虫为这些文档编制索引。如果必要的话，摘要页面可以很容易地链接到文档本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-22T19:33:45.160

我实际上还没有开发任何过滤器，所以我基本上只是在猜测，但我一直理解的方式是 IFilter 正是基于块的原因。由过滤器实现来确保返回的块“足够小”，因此如果事情花费太长时间，调用搜索守护程序可以简单地在两个块之间退出。

显然，我的假设是错误的，否则您不会问这个问题。

# wpf - 是否有官方的 Windows Presentation Foundation (WPF) 徽标？

> ID：464445
> 
> 赞同：8
> 
> 时间：2009-01-21T08:33:23.293
> 
> 标签：wpf

是否有像 .Net 和 ActiveX 那样的官方 Windows Presentation Foundation (WPF) 徽标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-08-04T11:06:36.793

我想你会得到最接近的是 Matts 的答案。还有这件艺术品：

![WPF](https://3.bp.blogspot.com/_DtNprzFCO3o/SIg_41Fhc1I/AAAAAAAAACU/A1WA0TZ3q78/s320/WPF_Logo_thumb.png)

文件类型还有一个 XAML 徽标：

[![XAML 徽标](https://i.stack.imgur.com/Oj7SL.jpg)](https://i.stack.imgur.com/Oj7SL.jpg)
[（来源：[zdnet.com](http://i.zdnet.com/blogs/xamllogo.jpg)）]

想想看，即使 Silverlight 也有一个漂亮的标志。为什么不也为 WPF 制作一个漂亮的徽标 :(..

[![银光](https://i.stack.imgur.com/slSq1.jpg)](https://i.stack.imgur.com/slSq1.jpg)
[（来源：[technet.com](http://blogs.technet.com/blogfiles/seanearp/WindowsLiveWriter/WPFEisSilverlight_5784/image002_low%5B4%5D.jpg)）]

啊好吧..我猜只有微软会知道:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-21T08:37:16.533

我见过的最近的是来自[windowsclient.net](http://windowsclient.net/wpf/)的：

[WPF http://windowsclient.net/SiteFiles/1000/wpfsp1/wpf.png](http://windowsclient.net/SiteFiles/1000/wpfsp1/wpf.png)

# asp.net - “HttpContext.Current.Session”与 Global.asax “this.Session”

> ID：464456
> 
> 赞同：13
> 
> 时间：2009-01-21T08:37:23.223
> 
> 标签：asp.net, session, session-state, global-asax

最近，在为工作中的 ASP.NET 项目编写一些代码时。我们需要一个跟踪工具来获取用户活动的基本指标（页面点击计数等），我们将跟踪它们，然后通过in[`Session`](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.aspx)将数据保存到 DB 。`Session_End`[`Global.asax`](http://msdn.microsoft.com/en-us/library/1xaas8a2.aspx)

我开始破解，初始代码运行良好，在每个页面加载时更新数据库。我想在每个请求上删除这个数据库命中，只是依靠`Session_End`存储所有数据。

所有跟踪代码都封装在`Tracker`类中，包括本质上包装会话变量的属性。

**问题** 是当我`Tracker.Log()`在`Session_End`方法中执行时[`HttpContext.Current.Session`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.current.aspx)，Tracker 代码中的[`NullReferenceException`](http://msdn.microsoft.com/en-us/library/system.nullreferenceexception.aspx). 现在，这是有道理的，因为[`HttpContext`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx)总是与**当前**请求相关，当然在 中`Session_End`，没有请求。

我知道它`Global.asax`有一个`Session`属性，它返回一个`HttpSessionState`实际上似乎工作正常的属性（我最终将它注入到跟踪器中）..

**但我很好奇，我怎么能从*外部*获得对所`HttpSessionState`使用对象的相同引用？`Global.asax`*`Global.asax`***

 *在此先感谢各位，感谢您的意见。:)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-23T00:08:45.247

为了更好地回答原始问题：

## 背景

每个页面请求都会启动一个新`Session`对象，然后从您的会话存储中扩充它。为此，它使用客户端提供的 cookie 或特殊路径构造（用于无 cookie 会话）。使用此会话标识符，它会查询会话存储并反序列化（这就是除了 InProc 之外的所有提供者都需要可序列化的原因）新的会话对象。

对于 InProc 提供程序，只需将它存储在`HttpCache`会话标识符键控中的引用交给您。*这就是 InProc 提供程序在`AppDomain`回收时丢弃会话状态的原因（也是多个 Web 服务器无法共享 InProc 会话状态*的原因。

这个新创建和膨胀的对象被卡在`Context.Items`集合中，因此它在请求期间可用。

然后，您对`Session`对象所做的任何更改都会在对会话存储的请求结束时通过序列化（或者在 InProc 的情况下，`HttpCache`条目被更新）进行持久化。

由于`Session_End`在没有当前请求的情况下立即触发，因此该`Session`对象在没有可用信息的情况下自动旋转。如果使用 InProc 会话状态，过期`HttpCache`会触发一个回调事件到您的`Session_End`事件中，因此会话条目可用，但仍然是上次存储在`HttpContext.Cache`. 该值`HttpApplication.Session`通过内部方法（称为`ProcessSpecialRequest`）针对属性存储，然后可用。在所有其他情况下，它在内部来自`HttpContext.Current.Session`值。

## 您的答案

由于 Session_End 总是针对空上下文触发，因此您应该始终在该事件中使用 this.Session 并将 HttpSessionState 对象传递给您的跟踪代码。在所有其他情况下，从跟踪代码中获取`HttpContext.Current.Session`然后传递给跟踪代码是非常好的。但是，不要让跟踪代码到达会话上下文**。**

## 我的答案

`Session_End`除非您知道您正在使用的会话存储支持`Session_End`，否则不要使用，如果**它**`true`从`SetItemExpireCallback`. 唯一的开箱即用商店是`InProcSessionState`商店。`Session_End`可以编写一个会话存储，但如果有多个服务器，谁将处理它的问题有点模棱两可。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-21T11:49:43.210

**Global.asax 实现 HttpApplication - 当您在其中调用它**时，您正在与它交谈。

[HttpApplication](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.aspx)的 MSDN 文档详细介绍了如何在 HttpHandler 中获取它，然后访问它的各种属性。

**然而**

您的应用程序可以创建多个 HttpApplication 实例来处理并行请求，并且这些实例可以重复使用，因此仅以某种方式选择它并不能保证您拥有正确的实例。

我还要注意一点 - 如果您的应用程序崩溃，则无法保证 session_end 将被调用，并且您将丢失所有会话中的所有数据，这显然不是一件好事。

我同意在每个页面上记录可能不是一个好主意，但可能是发生一些异步日志记录的中途之家 - 你将细节发送到日志记录类，不时记录你所追求的细节 - 仍然不是 100%如果应用程序崩溃，它是可靠的，但你不太可能失去一切。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-21T08:49:51.547

我想你已经回答了你自己的问题：通常 Global.asax 和 HttpContext.Current.Session 中的 Session 属性是相同的（如果有当前请求）。但是在会话超时的情况下，没有活动请求，因此您不能使用 HttpContext.Current。

如果要从 Session_End 调用的方法访问会话，则将其作为参数传递。创建一个重载版本的 Log() 方法，该方法将 HttpSessionState 作为参数，然后从 Session_End 事件处理程序调用 Tracker.Log(this.Session)。

BTW：你知道在任何情况下你都不能依赖会话结束事件吗？只要您有正在进行的会话状态，它就会起作用。使用 SQL server 或 StateServer 管理会话状态时，不会触发会话结束事件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-01-21T07:53:27.133

只有在文件中设置为`Session_End`时才会引发该事件。如果会话模式设置为or ，则不会引发事件。 `sessionstate mode``InProc``Web.config``StateServer``SQLServer`

用于`Session["SessionItemKey"]`获取会话值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-16T15:31:36.070

好的，我在跟踪会话活动时遇到了同样的问题。我没有使用 session_end 事件，而是为我的 sessiontracker 类实现了 IDisposable 接口和析构函数。我已修改 Dispose() 方法以将会话活动保存到数据库。当用户单击注销按钮时，我调用了方法 obj.Dispose()。如果用户错误地关闭了浏览器，那么 GC 将在清理对象时调用析构函数（不是立即，但肯定会在一段时间后调用此方法）。析构函数方法在内部执行相同的 Dispose() 方法以将会话活动保存到 DB 中。

-山

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-11-09T10:28:31.920

在 Session_Start 事件期间，您的 Global.asax 文件中提供了会话。也许等到这一点做的事情？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-01-21T08:51:40.247

请记住 Session_End 在会话超时而没有活动时运行。浏览器不会发起该事件（因为它处于非活动状态），因此您真正获得该事件的唯一时间是使用 InProc 提供程序时。在每个其他提供者中，此事件将永远不会触发。

道德？不要使用 Session_End。

# .net - 如何创建（32 位）.NET 应用程序以使用 3 GB RAM？

> ID：464458
> 
> 赞同：12
> 
> 时间：2009-01-21T08:38:40.350
> 
> 标签：.net, windows, memory

我正在创建一个需要使用大量 RAM 的 .NET 应用程序 (C#)。我最近知道在 32 位版本的 Windows XP 上我只能使用 2 GB，除非我使用`/3Gb`开关，并`IMAGE_FILE_LARGE_ADDRESS_AWARE`在可执行文件头中设置标志。但是由于我正在开发一个 .NET 应用程序，我想我不能直接修改可执行文件，可以吗？那么，我应该怎么做才能让我的应用程序使用 3 GB？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-21T08:47:50.567

.NET exe 仍然是标准的 PE 文件；因此您可以尝试使用`editbin /LARGEADDRESSAWARE`来设置标志，但请注意，如果您使用 ClickOnce 之类的东西（因为它维护文件的加密哈希），这将不起作用。

但是，请注意，就单个对象/数组的最大大小而言，您仍然具有相同的 .NET 限制。对于大量内存，x64 是一个更好的主意。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-21T08:43:10.060

/3GB 开关位于操作系统引导加载程序上，而不是您的应用程序上。（编辑：它也存在于本机 C/C++ 编译器中，但不存在于 C# 编译器中）就您的应用程序而言，它会请求内存并且操作系统会将其提供给您的进程。但是，在您的程序使用虚拟内存之前，您可以再访问 1 个 gig（可能，您并不总是获得 3gig，具体取决于您的硬件外围设备）。

正如 Marc Gavell 向我指出的那样，您可能需要在您的 exe 上运行命令“editbin /LARGEADDRESSAWARE my.exe”作为构建后选项来启用此功能。在这里找到了一位 MS 人的参考资料：[MS 论坛](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/c50ea343-b41b-467d-a457-c5a735e4dfff/)

我可以建议你看看你的程序，看看你是否可以重新架构它以使用更少的内存。也许您可以处理较小块的数据集，而不是尝试将整个数据一次加载到内存中？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T14:06:58.193

您还应该增加进程的最大工作集大小：请参阅[SetProcessWorkingSetSize](http://msdn.microsoft.com/en-us/library/ms686234(VS.85).aspx) API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T09:04:17.117

好吧，我不确定这一点，但这是我的想法：

.NET 可执行文件可以通过两种方式编译 - 特定于平台和独立于平台。默认情况下，它们与平台无关，并且在运行程序时，代码（如其他答案中所述）JIT 到特定于平台的代码。

现在，例如，如果您的可执行文件是这些与平台无关的可执行文件之一，并且您在 64 位操作系统上运行它，那么它将被 JIT 化为 64 位代码，对吗？因此，它将能够处理超过 3GB 的 RAM。

我想说的是 - 我认为 PE 标头中写的内容根本不重要。可用 RAM 的实际数量由 .NET 运行时确定，该运行时又会查看当前平台并尽可能生成最佳的 JIT 代码。

我认为您不必担心 /3GB 开关，因为 .NET 会为您处理好它。相信.NET！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-21T09:41:09.040

您可以尝试通过命名管道使用远程处理，并通过物理上拥有更多进程来获得更多内存。

如果你正在做任何形式的互操作（和正常的.Net 套接字在这里计数），你应该创建一个对象缓存（例如，使用套接字一个 byte[] 缓冲区）在应用程序启动时分配大量这些对象。

你应该阅读[这篇文章](http://jdconley.com/blog/archive/2006/06/26/how-to-build-scalable-.net-server-applications-memory-management.aspx "肥皂盒里面的信息")。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-02T09:50:12.333

我刚刚在 Windows 10（64 位）上使用 VS2019 上的一个小型 x86 C# 程序对其进行了测试。默认情况下，我可以在内存不足之前分配 1605 个 1Mb 大小的字符串。

通过设置 ：

“editbin /LARGEADDRESSAWARE my.exe”

我可以在内存不足之前分配 3330 个 1Mb 大小的字符串。

在 Windows 10（64 位）上，它因此超过 3Gb 空间寻址。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-01-21T08:53:57.637

据我记得，/3GB 开关只能用于 Windows Server（2000 或 2003），但不能用于 Windows XP。您需要在 boot.ini 文件的末尾写入 /3GB。这样，对于应用程序，操作系统可以启用更多通常分配给内核进程使用的内存。但是，/3GB 并不意味着您可以为您的应用程序使用 3GB 的内存，它只是可以使用更多的内存，但不一定必须是 3GB。对于 .net 应用程序，据我所知，使用 /3GB 开关最多可以使用 1.8GB 内存。顺便说一句，您可能还想检查 /PAE 开关。

# python - Qt 现在在 LGPL 下发布，你会推荐它而不是 wxWidgets 吗？

> ID：464463
> 
> 赞同：27
> 
> 时间：2009-01-21T08:40:58.193
> 
> 标签：python, qt, wxpython, wxwidgets

我是 wxWidgets 的重度用户，部分原因是许可的原因。

*   您如何看待 wxWidgets 的未来，以及[最近宣布](http://www.qtsoftware.com/about/licensing)的 Qt 现在在 LGPL 下发布？
*   您认为 wxwidget 对于新项目来说仍然是一个不错的技术选择吗？或者您会建议采用 Qt，因为它将成为事实上的标准。
*   我还对这可能对它们与最常见的脚本语言（例如 PyQt、wxPython、wxRuby）的绑定产生的影响感兴趣。为什么 PyQt 有专业级的设计师而 wxPython 却没有得到充分利用？

### 有关的：

> [https://stackoverflow.com/questions/443546/qt-goes-lgpl-on-windows-is-it-good-enough-to-use-instead-of-mfc](https://stackoverflow.com/questions/443546/qt-goes-lgpl-on-windows-is-it-good-enough-to-use-instead-of-mfc)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-21T15:45:21.707

对于我们这些被 wxWidgets 吸引的人来说，因为它是一个跨平台库，它使用本机控件来获得正确的外观和感觉，Qt 的许可更改几乎没有任何后果。

**编辑：**

关于

> Qt 没有本机控件但具有本机绘图功能

让我引用[wxWidgets wiki 页面比较工具包](http://wiki.wxwidgets.org/WxWidgets_Compared_To_Other_Toolkits)：

> Qt 没有像 wxWidgets 那样的真正的本地端口。我们的意思是，即使 Qt 非常逼真地绘制它们，Qt 也会在每个平台上绘制自己的小部件。值得一提的是，Qt 带有用于 Mac OS X 和 Windows XP 和 Vista 的特殊样式，它们使用原生 API（Mac OS X 上的外观管理器，Windows XP 上的 UxTheme）来绘制标准的小部件原语（例如滚动条或按钮），就像任何本机应用程序。*事件处理、由此产生的视觉反馈和小部件布局始终由 Qt 实现。*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-02-05T10:29:34.033

我目前在工作中使用 pyqt，我发现自己完全满意。你有更好的文档（恕我直言），更好的事件管理（信号槽模式在某种程度上比旧的简单回调风格更强大），并且在像 qt-designer 这样的图形设计器中导入你的自定义小部件要容易得多。据我所知，qt-designer 比任何 wxpython 对应物（如 Boa Constructor 和 pyGlade）都更强大。您还可以很好地支持以不同语言翻译程序的字符串（至少比 wxLocale 更好的支持，并且您可以使用完全集成在 qt 系统中的 Qt-Linguist 之类的工具）。

我在一些业余作品中使用 wxpython，但我仍然是那里的菜鸟。我认为它比 pyqt 更大的优势是在不同平台上具有原生的外观和感觉。例如，如果您正在开发 windows/linux 应用程序，这将是一个重要的问题。实际上，您可以使用“皮肤”来获得 windows-qt 应用程序的原生外观，但我不知道如何实现这一点（抱歉，我从未在 windows 上使用过 qt :D）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-21T09:13:48.313

老实说，我认为人们不会大量放弃 WxWidgets。

对于 python，有 PyQt 绑定和 WxPython 绑定。尽管 Qt 比 WxWidgets 实用得多，但大多数 GUI python 开源程序都是用 WxWidgets 编写的。由于这些程序是开源的，因此 GPL 与 LGPL 在他们选择工具包时并没有那么重要。

Gtk 也是如此。许多开源应用程序是在 Windows 上用 Gtk 编写的，尽管 Gtk 在 Windows 上很难使用。使用 Qt，这些应用程序在跨平台的基础上维护起来会容易得多，但这并没有发生。

因此，工具包的选择受许多参数的影响，许可只是其中之一。

我仍然不明白为什么 Qt 不是更主流，因为在我看来它是有史以来最简单、更实用的 GUI 工具包。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-01-21T12:57:50.827

请注意，截至 2009 年 1 月，虽然 Qt 4.5 将在 LGPL 下提供，但 Riverbank Computing 尚未发布任何有关[PyQt](http://www.riverbankcomputing.co.uk/software/pyqt/download)未来版本许可的公告。PyQt 仍然只是[商业/GPLv2/GPLv3](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/pyqt4ref.html#license)。

正如对此答案的评论中所述，诺基亚于 2009 年 8 月宣布了 LGPL 许可的[PySide](http://www.pyside.org/)项目。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-21T10:12:35.823

Qt 是一个非常全面和高质量的框架。我确信许多使用 wxWidgets 的新项目现在将使用 LGPL Qt。但是已经在使用 wxWidgets 的项目无疑会继续使用 wxWidgets 而不是进行大规模的重写。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-07-03T12:31:50.427

我选择 wxPython 有两个主要原因：

1.  Boa Constructor 仍然是一个 beta 产品，让我可以统一控制 100% 的过程，而 PyQt 确实有更好的设计器，但编辑“事件处理程序”之间没有任何联系。

我理想的 IDE 设计、创建事件，让我只编辑所需的功能代码，然后运行；无需“编译 UIC”，无需切换编辑器，无需进入命令行。虽然对于大型应用程序来说这无关紧要，但我目前的领域是快速和小型程序。

2.  许可......现在没关系，但一旦我开始小规模出售我的东西，它就会发生。

3.  对于事件代码，事件功能代码中的自动完成功能似乎在 QTDesigner 中不起作用。我可能遗漏了一些东西，但是上面描述的“破碎”过程阻止它成为 RAD。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-10-20T04:10:12.390

我永远无法将 Qt 设置为交叉编译。我记得看到奇趣科技说他们不正式支持交叉编译，虽然我现在找不到。

有很多指南和详细说明如何让 Qt 进行交叉编译，所以它可能（很可能）我做错了什么。

在选择框架时，我建议考虑并测试它们的交叉编译能力。

# java - 我们 Java 程序的外部程序

> ID：464471
> 
> 赞同：2
> 
> 时间：2009-01-21T08:46:42.877
> 
> 标签：java, process, exec

如何用 Java 编写一个程序来执行另一个程序？此外，该程序的输入应该从我们的程序中给出，该程序的输出应该写入一个文件。

这是我获取其输出的一小部分代码：

```
Process p = Runtime.getRuntime().exec("C:\\j2sdk1.4.0\bin\\helloworld.java");
BufferedReader input =
        new BufferedReader(new InputStreamReader(p.getInputStream()));
while ((line = input.readLine()) != null) 
  System.out.println(line);

input.close(); 
```

这是我的一组代码，但这会引发`IOException`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-21T08:51:43.290

Java 为此提供的 API 是[ProcessBuilder](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ProcessBuilder.html)。设置工作目录和传递参数相对简单。

有点棘手的是传递 STDIN 并读取 STDERR 和 STDOUT，至少对于非平凡的大小，因为您需要启动单独的线程以确保清除相应的缓冲区。否则，您调用的应用程序可能会阻塞，直到它可以写入更多输出，并且如果您还等待该过程完成（不确保读取 STDOUT），您将死锁。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-21T09:23:44.707

当你只想启动其他程序时，你可以像这样使用 exec 方法：

```
Runtime r = Runtime.getRuntime();
mStartProcess = r.exec(applicationName, null, fileToExecute);

StreamLogger outputGobbler = new StreamLogger(mStartProcess.getInputStream());
outputGobbler.start();

int returnCode = mStartProcess.waitFor();

class StreamLogger extends Thread{

   private InputStream mInputStream;

   public StreamLogger(InputStream is) {
        this.mInputStream = is;
    }

   public void run() {
        try {
            InputStreamReader isr = new InputStreamReader(mInputStream);
            BufferedReader br = new BufferedReader(isr);
            String line = null;
            while ((line = br.readLine()) != null) {
                    System.out.println(line);
            }
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }

} 
```

执行：

```
public Process exec(String command, String envp[], File dir) 

   @param      command   a specified system command.
   @param      envp      array of strings, each element of which 
                         has environment variable settings in format
                         <i>name</i>=<i>value</i>.
   @param      dir       the working directory of the subprocess, or
                         <tt>null</tt> if the subprocess should inherit
                         the working directory of the current process. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-21T08:49:59.673

您可以使用[java.lang.Process](http://java.sun.com/javase/6/docs/api/java/lang/Process.html)和[java.lang.ProcessBuilder](http://java.sun.com/javase/6/docs/api/java/lang/ProcessBuilder.html)。您使用 getInputStream/getOutputStream/getErrorStream 与流程的输入/输出进行交互。

[但是，有一个名为Exec](http://commons.apache.org/exec/)的 Apache Commons 库，旨在使这一切变得更容易。（在引用命令行参数等时，它通常会变得很麻烦。）我自己没有使用过 Exec，但值得一试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-22T04:00:54.310

请不要编辑您的问题，使其不再符合原始答案。如果您有后续问题，请清楚地标记它们，或者将它们作为单独的问题提出，或者使用评论之类的。

至于你的 IOException，请给出它显示的错误信息。

此外，您似乎正在尝试直接运行“.java”文件。那不管用。此处描述的方法是启动本机二进制可执行文件。如果你想运行一个“.java”文件，你必须把它编译成一个类，然后调用那个类的*主*方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-21T08:49:35.290

你在哪个平台？

如果你在 *nix 上，你可以输入：

java我的程序| 我的外部程序 > myfilename.txt

# c# - 检查是否存在 SQL 表

> ID：464474
> 
> 赞同：43
> 
> 时间：2009-01-21T08:48:25.043
> 
> 标签：c#, .net, sql, ado.net, odbc

以数据库独立方式检查 Sql 数据库中是否存在表的最佳方法是什么？

我想出了：

```
 bool exists;
   const string sqlStatement = @"SELECT COUNT(*) FROM my_table";

   try
    {
       using (OdbcCommand cmd = new OdbcCommand(sqlStatement, myOdbcConnection))
       {
            cmd.ExecuteScalar();
            exists = true;
       }
    }
    catch
    {
        exists = false;
    } 
```

有一个更好的方法吗？当与数据库的连接失败时，此方法将不起作用。我找到了适用于 Sybase、SQL server、Oracle 的方法，但没有任何方法适用于所有数据库。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-01-21T09:03:05.310

```
bool exists;

try
{
    // ANSI SQL way.  Works in PostgreSQL, MSSQL, MySQL.  
    var cmd = new OdbcCommand(
      "select case when exists((select * from information_schema.tables where table_name = '" + tableName + "')) then 1 else 0 end");

    exists = (int)cmd.ExecuteScalar() == 1;
}
catch
{
    try
    {
        // Other RDBMS.  Graceful degradation
        exists = true;
        var cmdOthers = new OdbcCommand("select 1 from " + tableName + " where 1 = 0");
        cmdOthers.ExecuteNonQuery();
    }
    catch
    {
        exists = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-21T10:25:30.433

如果您正在尝试数据库独立性，您将不得不假设一个最低标准。IIRC ANSI [INFORMATION_SCHEMA](http://msdn.microsoft.com/en-us/library/ms186778.aspx)视图是 ODBC 一致性所必需的，因此您可以像这样查询它们：

```
select count (*) 
  from information_schema.tables 
 where table_name = 'foobar' 
```

鉴于您使用的是 ODBC，您还可以使用各种[ODBC API 调用](http://msdn.microsoft.com/en-us/library/ms714562(VS.85).aspx)来检索此元数据。

请记住，可移植性等同于在[任何地方进行一次编写测试，](http://www.justwerks.com/write-once-test-everywhere)因此您仍然必须在您打算支持的每个平台上测试应用程序。这意味着您天生受限于有限数量的可能数据库平台，因为您只有这么多资源用于测试。

结果是您需要为您的应用程序找到一个最低的公分母（这比寻找 SQL 困难得多）或构建一个平台相关部分，其中不可移植的功能可以插入到每个平台上基础。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-21T08:57:57.707

我不认为存在一种适用于所有数据库的通用方式，因为这是非常具体的东西，取决于数据库的构建方式。

但是，为什么要使用特定查询来执行此操作？您不能将实现从您想做的事情中抽象出来吗？我的意思是：为什么不创建一个通用接口，其中包括一个名为“TableExists(string tablename)”的方法。然后，对于您想要支持的每个 DBMS，您创建一个实现该接口的类，并在 TableExists 方法中，为该 DBMS 编写特定的逻辑。
然后 SQLServer 实现将包含一个查询 sysobjects 的查询。

在您的应用程序中，您可以拥有一个为给定上下文创建正确实现的工厂类，然后您只需调用 TableExists 方法。

例如：

```
IMyInterface foo = MyFactory.CreateMyInterface (SupportedDbms.SqlServer);

if( foo.TableExists ("mytable") )
... 
```

我认为这是我应该做的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-21T09:05:16.960

我完全支持 Frederik Gheysels 的回答。如果你必须支持多个数据库系统，你应该针对一个抽象接口实现你的代码，每个数据库系统都有特定的实现。除了检查现有表之外，还有更多不兼容语法的示例（例如：将查询限制为一定数量的行）。

但是，如果您确实必须使用示例中的异常处理来执行检查，您应该使用比 COUNT(*) 更有效的以下查询，因为数据库没有实际的选择工作要做：

```
SELECT 1 FROM my_table WHERE 1=2 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-21T10:04:50.350

我会避免执行，`select count(x) from xxxxxx`因为 DBMS 实际上会继续执行，这对于大表可能需要一些时间。

相反，只需*准备*一个`select * from mysterytable`查询。如果神秘表不存在，准备将失败。不需要实际执行准备好的语句。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-12-14T18:40:21.750

以下对我很有效......

```
private bool TableExists(SqlConnection conn, string database, string name)
{
    string strCmd = null;
    SqlCommand sqlCmd = null;

    try
    {
        strCmd = "select case when exists((select '['+SCHEMA_NAME(schema_id)+'].['+name+']' As name FROM [" + database + "].sys.tables WHERE name = '" + name + "')) then 1 else 0 end";
        sqlCmd = new SqlCommand(strCmd, conn);

        return (int)sqlCmd.ExecuteScalar() == 1;
    }
    catch { return false; }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-21T09:27:14.840

在我工作的当前项目中，我需要编写支持许多数据库类型的“数据代理”。

所以我决定下一步做：使用虚拟方法编写一个具有基本（数据库独立）功能的基类，并在子类中覆盖所有特定于数据库的时刻

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-12-29T19:54:48.387

非常简单

```
use YOUR_DATABASE --OPTIONAL
SELECT count(*) as Exist from INFORMATION_SCHEMA.TABLES where table_name = 'YOUR_TABLE_NAME' 
```

如果答案是 1，则有一张桌子。如果答案为 0，则没有表。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-11T08:54:43.670

如果你想避免 try-catch 解决方案，我建议使用这种方法，使用 sys.tables

```
private bool IsTableExisting(string table)
    {
        string command = $"select * from sys.tables";
        using (SqlConnection con = new SqlConnection(Constr))
        using (SqlCommand com = new SqlCommand(command, con))
        {
            SqlDataReader reader = com.ExecuteReader();
            while (reader.Read())
            {
                if (reader.GetString(0).ToLower() == table.ToLower())
                    return true;
            }
            reader.Close();
        }
        return false;
    } 
```

# algorithm - 使用 PRNG 而不是改组生成改组范围

> ID：464476
> 
> 赞同：25
> 
> 时间：2009-01-21T08:49:04.760
> 
> 标签：algorithm, language-agnostic, random, shuffle

在给定任意种子值的情况下，是否有任何已知算法可以在线性时间和恒定空间（当输出迭代产生时）中生成混洗范围 [0..n)？

假设 n 可能很大，例如数百万，因此不需要潜在地产生每个可能的排列，尤其是因为它不可行（种子值空间需要很大）。这也是需要恒定空间的原因。（所以，我特别不是在寻找数组改组算法，因为这要求范围存储在长度为 n 的数组中，因此会使用线性空间。）

我知道[问题 162606](https://stackoverflow.com/questions/162606/iterating-shuffled-0-n-without-arrays)，但它没有给出这个特定问题的答案 - 从排列索引到该问题中给出的排列的映射将需要巨大的种子值空间。

理想情况下，它会像一个周期和范围为 的[LCG](http://en.wikipedia.org/wiki/Linear_congruential_generator) ，但选择和用于 LCG`n`的艺术是微妙的。简单地满足 LCG 的限制并在整个周期内满足我的要求，但我想知道是否有更好的想法。`a``c``a``c`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-22T01:32:59.430

根据[Jason 的回答](https://stackoverflow.com/questions/464476/generating-shuffled-range-using-a-prng-rather-than-shuffling#465473)，我在 C# 中做了一个简单直接的实现。找到大于 N 的 2 的下一个最大幂。这使得生成 a 和 c 变得微不足道，因为 c 需要是互质的（意味着它不能被 2 整除，也就是奇数），并且 (a-1) 需要能被 2 整除，并且 (a-1) 需要能被 4 整除。从统计学上讲，应该需要 1-2 个同余才能生成下一个数（因为 2N >= M >= N）。

```
class Program
{
    IEnumerable<int> GenerateSequence(int N)
    {
        Random r = new Random();
        int M = NextLargestPowerOfTwo(N);
        int c = r.Next(M / 2) * 2 + 1; // make c any odd number between 0 and M
        int a = r.Next(M / 4) * 4 + 1; // M = 2^m, so make (a-1) divisible by all prime factors, and 4

        int start = r.Next(M);
        int x = start;
        do
        {
            x = (a * x + c) % M;
            if (x < N)
                yield return x;
        } while (x != start);
    }

    int NextLargestPowerOfTwo(int n)
    {
        n |= (n >> 1);
        n |= (n >> 2);
        n |= (n >> 4);
        n |= (n >> 8);
        n |= (n >> 16);
        return (n + 1);
    }

    static void Main(string[] args)
    {
        Program p = new Program();
        foreach (int n in p.GenerateSequence(1000))
        {
            Console.WriteLine(n);
        }

        Console.ReadKey();
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2011-05-27T23:30:59.013

这是来自[FryGuy 的回答的](https://stackoverflow.com/questions/464476/generating-shuffled-range-using-a-prng-rather-than-shuffling/#467767)[线性同](http://en.wikipedia.org/wiki/Linear_congruential_generator)余生成器的 Python 实现。因为无论如何我都需要写它，并认为它可能对其他人有用。

```
import random
import math

def lcg(start, stop):
    N = stop - start

    # M is the next largest power of 2
    M = int(math.pow(2, math.ceil(math.log(N+1, 2))))

    # c is any odd number between 0 and M
    c = random.randint(0, M/2 - 1) * 2 + 1

    # M=2^m, so make (a-1) divisible by all prime factors and 4
    a = random.randint(0, M/4 - 1) * 4 + 1

    first = random.randint(0, M - 1)
    x = first
    while True:
        x = (a * x + c) % M
        if x < N:
            yield start + x
        if x == first:
            break

if __name__ == "__main__":
    for x in lcg(100, 200):
        print x, 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-21T14:14:05.853

听起来您想要一种算法，该算法可以保证产生从 0 到 n-1 的循环而没有任何重复。根据您的要求，几乎可以肯定有一大堆。如果您想深入研究其背后的理论，[群论将是最有用的数学分支。](http://en.wikipedia.org/wiki/Group_theory)

如果您想要快速并且不关心可预测性/安全性/统计模式，LCG 可能是最简单的方法。您链接到的维基百科页面包含这组（相当简单的）要求：

> 一般LCG的周期最多为m，而对于a的一些选择则要小得多。当且仅在以下情况下，LCG 将有一个完整的周期：
> 
> 1.  c 和 m 互质，
> 2.  a - 1 可以被 m 的所有素因子整除
> 3.  a - 1 是 4 的倍数，如果 m 是 4 的倍数

或者，您可以选择一个周期 N >= n，其中 N 是具有方便数值属性的最小值，并丢弃在 n 和 N-1 之间产生的任何值。例如，最低的 N = 2 ^k - 1 >= n 将允许您使用[线性反馈移位寄存器](http://en.wikipedia.org/wiki/LFSR)(LFSR)。或者找到你最喜欢的加密算法（RSA、AES、DES 等）并给定一个特定的密钥，找出它置换的数字的空间 N，并为每一步应用一次加密。

如果 n 很小，但您希望安全性很高，这可能是最棘手的情况，因为任何序列 S 的周期 N 都可能远高于 n，但推导出具有较短周期的非重复数字序列也是不平凡的比 N。（例如，如果您可以获取 S mod n 的输出并保证不重复的数字序列，这将提供攻击者可能使用的有关 S 的信息）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-23T19:33:35.987

请参阅我关于[使用分组密码的安全排列的](http://blog.notdot.net/2007/9/Damn-Cool-Algorithms-Part-2-Secure-permutations-with-block-ciphers)文章，了解一种方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-05T12:42:19.523

查看线性反馈移位寄存器，它们可以用于此目的。解释它们的简短方法是从种子开始，然后使用公式进行迭代

```
x = (x << 1) | f(x) 
```

其中 f(x) 只能返回 0 或 1。

如果您选择一个好的函数`f`，x 将以一种好的伪随机方式循环遍历 1 到 2^n-1（其中 n 是某个数字）之间的所有值。可以在[此处](http://www.xilinx.com/support/documentation/application_notes/xapp052.pdf)找到示例函数，例如您可以使用的 63 个值

```
f(x) = ((x >> 6) & 1) ^ ((x >> 5) & 1) 
```

# c# - WCF 安全问题

> ID：464478
> 
> 赞同：1
> 
> 时间：2009-01-21T08:49:12.217
> 
> 标签：c#, .net, wcf, certificate, wcf-security

一些背景：为了提供身份验证，我在客户端和服务器端（WCF）使用证书并为所有客户端使用一个证书（从应用程序目录手动加载它 - 不是最安全的方式，但它不需要管理证书存储和使安装更加困难）：

```
 AddressHeader hostHdr = AddressHeader.CreateAddressHeader(ServiceFactory.CLIENT_HOST_HEADER, ServiceFactory.NAMESPACE, hostName);
        builder.Headers.Add(hostHdr);
        builder.Identity = new X509CertificateEndpointIdentity(GetServiceCertificate(name));

        _factory = new ChannelFactory<T>(name, builder.ToEndpointAddress());
        _factory.Credentials.ClientCertificate.Certificate = GetClientCertificate(name);
        X509ServiceCertificateAuthentication auth = _factory.Credentials.ServiceCertificate.Authentication;

        auth.CertificateValidationMode =X509CertificateValidationMode.Custom;
        auth.CustomCertificateValidator = new CustomCertificateValidator(new[] {GetServiceCertificate(name)}); 
```

这是客户端，服务器端主机设置如下所示：

```
private void CertificateSetup(ServiceHost host)
    {
        if (ServiceCertificate != null)
            host.Credentials.ServiceCertificate.Certificate = ServiceCertificate;

        X509ClientCertificateAuthentication authentication =
                        host.Credentials.ClientCertificate.Authentication;

        authentication.CertificateValidationMode =
            X509CertificateValidationMode.Custom;

        authentication.CustomCertificateValidator =
            new CustomCertificateValidator(new [] {ClientCertificate});
    } 
```

这工作正常并允许签署消息，但就安全模式设置如下：

```
 <security mode="Message">            
        <message clientCredentialType="Certificate" />
      </security> 
```

但是我需要

```
string name = OperationContext.Current.ServiceSecurityContext.WindowsIdentity.Name; 
```

以某种方式在 ServiceSecurityContext 中获取 WindowsIdentity。混合（传输和消息）安全模式没有帮助，因为我不知道为什么，但即使我在配置中为传输部分模式基础设施设置 Windows clientCredentials 也会尝试建立 SSL 连接。

有任何想法吗 ？？？？

* * *

证书用于消息签名，即证明另一方是真正的客户端或服务（中间人）。但正在开发的系统中的授权部分依赖于 ServiceSecurityContect 中的 WindowsIdentity。我想要的只是在 sec.context 中包含 WindowsIdentity，同时 PrimaryIdentity 是 X509CertIdentity。所以我需要在服务器端知道哪个域用户请求了服务操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T11:52:27.853

试试这个链接重新：模拟：

[http://msdn.microsoft.com/en-us/library/ms730088.aspx](http://msdn.microsoft.com/en-us/library/ms730088.aspx)

关于“将客户端证书映射到 Windows 帐户”的部分，似乎是您所追求的。

在客户端配置：

```
authentication mapClientCertificateToWindowsAccount="true" 
```

客户端代码：

' 创建一个将证书设置为客户端凭据类型的绑定。

```
Dim b As WSHttpBinding = New WSHttpBinding()

b.Security.Message.ClientCredentialType = MessageCredentialType.Certificate 
```

' 创建将证书映射到 Windows 帐户的服务主机。

```
Dim httpUri As Uri = New Uri("http://localhost/Calculator")

Dim sh As ServiceHost = New ServiceHost(GetType(HelloService), httpUri)

sh.Credentials.ClientCertificate.Authentication.MapClientCertificateToWindowsAccount = True 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T10:26:48.853

如果您在每一端都使用带有证书的消息安全性来保护它，我不太确定您为什么需要 Windows 身份？这背后的原因是什么？

也许这个链接会有用——第 6 节和第 7 节有证书身份验证的配置设置的详细信息，其工作方式类似于 SSL：

[http://www.codeproject.com/KB/WCF/wcf_certificates.aspx](http://www.codeproject.com/KB/WCF/wcf_certificates.aspx)

# linux - 为什么我们在 linux 中需要一个 swapper 任务？

> ID：464483
> 
> 赞同：50
> 
> 时间：2009-01-21T08:50:06.397
> 
> 标签：linux, linux-kernel, scheduled-tasks

当在任务调度点运行队列中没有更多可运行任务时，选择运行空闲任务（又名交换任务）。但是这个如此特殊的任务有什么用呢？另一个问题是为什么我在用户态的“ps aux”输出（PID=0）中找不到这个线程/进程？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-01-21T09:26:08.447

原因是历史性的和程序性的。空闲任务是正在运行的任务，如果没有其他任务可以运行，就像你说的那样。它具有最低的优先级，这就是为什么它正在运行，没有其他任务可运行。

程序化原因：这大大简化了进程调度，因为您不必关心特殊情况：“如果没有可运行的任务会发生什么？”，因为总是至少有一个任务可运行，即空闲任务。您还可以计算每个任务使用的 CPU 时间量。如果没有空闲任务，哪个任务会占用没有人需要的 CPU 时间？

历史原因：在我们有能够降压或进入省电模式的CPU之前，它必须随时全速运行。如果没有可运行的任务，它会运行一系列 NOP 指令。今天空闲任务的调度通常使用HLT指令（停止）来降低cpu，因此可以节省电力。因此，在我们这个时代的空闲任务中有某种功能。

在 Windows 中，您可以在进程列表中看到空闲任务，它是空闲进程。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-01-21T08:53:21.710

linux内核维护了一个在IO/互斥锁等上被“阻塞”的进程的等待列表。如果没有可运行的进程，则空闲进程被放置到运行队列中，直到它被从等待队列中出来的任务抢占。

它有一个任务的原因是，您可以（大约）测量内核由于 IO / 锁等阻塞而浪费了多少时间。此外，它使内核的代码更容易，因为空闲任务与它需要进行上下文切换的每个任务，而不是可能使更改内核行为更加困难的“特殊情况”空闲任务。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-21T13:22:03.710

每个 cpu 实际上有一个空闲任务，但它不在主任务列表中，而是在 cpu 的“struct rq”运行队列结构中，作为 struct task_struct * 。

每当（在该 CPU 上）没有更好的事情可做时，调度程序就会激活它，并执行一些特定于体系结构的代码以使 CPU 处于低功耗状态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T10:32:16.270

您可以使用 ps -ef 它将列出正在运行的进程的编号。然后在第一个链接中，它将列出第一个 pid - 0 这是交换任务。

# hibernate - JPA 和 Hibernate 如何管理序列？

> ID：464484
> 
> 赞同：5
> 
> 时间：2009-01-21T08:50:53.307
> 
> 标签：hibernate, jpa, sequences

我在我的项目中使用 Hibernate，我的许多实体都使用序列作为他们的技术密钥。例如：

```
@Entity
@Table(name = "T_MYENTITY")
@SequenceGenerator(name = "S_MYENTITY", sequenceName = "S_MYENTITY")
public class MyEntity {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "S_MYENTITY")
    @Column(name = "MY_ENTITY_ID")
    private Long entityId;

    ...

} 
```

当这个类的新对象被持久化时，我有两个关于 Hibernate 生成的 ID 的问题：

1.  为什么 SequenceGenerator（来自 javax.persistence）的默认值 allocationSize 设置为 50 而不是 1？那有什么利益呢？
2.  Hibernate 用于计算生成的 ID 的默认算法是什么？似乎 Hibernate 使用了由我的 Oracle 数据库托管的序列返回的值，但是在将其分配给我的实体之前对其进行了修改......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2009-02-10T22:15:09.663

1.  这是出于性能原因（预取）
2.  阅读休眠源代码。

# c# - .Net1 MenuItem 与 .Net2 ToolStripMenuItem -> 选择事件

> ID：464493
> 
> 赞同：0
> 
> 时间：2009-01-21T08:54:10.570
> 
> 标签：c#, .net

在 .NET 1.1 中，我使用了一个`MenuItem`select 事件，但对于`ToolStripMenuItem`s，这个事件似乎不存在。什么是替代方案？

**编辑：** `MouseEnter`或`MouseHover`不通过键盘捕捉菜单选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-12T14:56:51.747

有什么理由不能使用 MenuItem？从[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.menuitem.aspx)：

> 尽管 ToolStripMenuItem 替换了以前版本的 MenuItem 控件并为其添加了功能，但如果您选择，则保留 MenuItem 是为了向后兼容和将来使用。

所以以后会继续支持MenuItem...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T12:29:40.073

您可以使用`ToolStripMenuItem.MouseEnter`或`ToolStripMenuItem.MouseHover`

# java - 如何在 Java 中实现 OpenID

> ID：464494
> 
> 赞同：7
> 
> 时间：2009-01-21T08:54:46.310
> 
> 标签：java, openid

我将如何在 Java Web 应用程序中支持 OpenID 身份验证？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-21T09:07:44.240

[openid4java](http://code.google.com/p/openid4java/)可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-21T09:10:26.963

看看[openid4java](http://code.google.com/p/openid4java/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T09:09:39.897

看看[joid](http://code.google.com/p/joid/)也。
更多详情请访问：[http ://code.google.com/p/joid/wiki/Introduction](http://code.google.com/p/joid/wiki/Introduction)

# asp.net - 如何知道 ItemTemplate 的序数位置

> ID：464497
> 
> 赞同：0
> 
> 时间：2009-01-21T08:57:56.770
> 
> 标签：asp.net, css, repeater

需要为第一个 ItemTemplate 项添加样式 (class="bBot")，我怎么知道它是第一个？

```
<asp:Repeater id="ArticlesRepeater" runat="server">
    <HeaderTemplate>
        <div class="FR boxW380">
            <div class="cnt mag">
             <div class="FR">
                    <a href="#">Subscribe</a>
                    &#160; &#160;
                    <a href="#">Archive</a>
             </div>
             <h1>Magazine</h1>
    </HeaderTemplate>

    <ItemTemplate>
                <div>
                    <a href="#">
                        <img class="visu" alt=""
                            src="<%# DataBinder.Eval(Container.DataItem, "image") %> " />
                        <span class="title">
                            <%# DataBinder.Eval(Container.DataItem, "title") %>
                        </span>
                        <span class="content">
                            <%# DataBinder.Eval(Container.DataItem, "shortintroduction")%>
                        </span>
                    </a>
                    <div class="CB"></div>
                </div>
    </ItemTemplate>

    <FooterTemplate>
            </div>
        </div>
    </FooterTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T15:02:25.677

```
((Panel) ArticlesRepeater.Items[0].Controls[0]).CssClass = "bBot"; 
```

这将为您提供对中继器 Item 集合中第一项中包含的第一个控件的引用。您仍然需要将此控件转换为适当的类型。在您的示例中，假设您希望将 css 应用于包含 div，将其更改为 Panel（服务器控件）以简化转换并设置 CssClass 属性。

# tapestry - 在 Tapestry5 中使用 JSCookMenu

> ID：464504
> 
> 赞同：0
> 
> 时间：2009-01-21T09:01:20.697
> 
> 标签：tapestry

我正在尝试使用 Tapestry4 将我的项目升级到 Tapestry5。我正在寻找一个在 Tapestry5 中使用 JSCookMenu 的组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-22T17:31:45.203

你在 Tapestry 4 中使用 JSCookMenu 吗？你到底需要什么？如果只是菜单选项需要在 T5 页面中调用代码的链接，那么您应该将[ComponentResources](http://tapestry.apache.org/tapestry5/apidocs/org/apache/tapestry5/ComponentResources.html)注入到您的页面中，以便您可以创建所需的链接并将它们添加到页面上的 javascript 片段中。您可以使用注入的 RenderSupport 实例在页面的 setupRender() 方法中添加 Javascript 来创建菜单变量和对 cmDraw 的调用，例如：

```
@Environmental
private RenderSupport renderSupport;
@Inject
private ComponentResources resources;

void setupRender() {
  renderSupport.addScript("var myMenu = [ ['icon', 'title', '%s', 'target', 'desc'], ['icon', 'title', '%s', 'target', 'desc'] ];",
    resources.createEventLink("event1"), resources.createEventLink("event2"));
  renderSupport.addScript("cmDraw('menuID', myMenu, 'hbr', cmThemeOffice);");
}

public void onEvent1() {
  //this method gets called from the first option
}
public void onEvent2() {
  //this method gets called from the second option
} 
```

要在页面中包含 JSCookMenu.js 文件，请在页面类中添加注释：

```
@IncludeJavaScriptLibrary("JSCookMenu.js")
public class MyPage {...} 
```

JSCookMenu.js 需要作为资产添加到您的 T5 应用程序中。

# security - 间谍软件行为信息

> ID：464511
> 
> 赞同：2
> 
> 时间：2009-01-21T09:04:49.660
> 
> 标签：security

作为试图描述间谍软件构成的威胁以及如何减轻它的一部分，我一直在寻找有关当前各种常见间谍软件木马如何捕获密码数据的信息。我最好的猜测是他们要么记录击键，截取浏览器提交，要么截取 GUI 消息。

我想要一些更明确的信息，但一直找不到。我在哪里可以找到这种分析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T18:16:58.013

大多数恶意软件（我指的是高级恶意软件）都是用 ASM 或 C++ 编写的。他们中的许多人使用 Windows 高级 API 在用户按键时将键盘按键活动与当前窗口挂钩。

例如，对于键盘活动，他们主要使用`SetWindowsHookEx`带有`WH_KEYBOARD_LL`钩子的函数

他们还使用 GetActiveWindow API 来检测当前活动窗口的标题。因此，在键盘记录器中，大多数情况下您会看到如下内容：

```
[Gmail - Google Chrome Browser]
testuser@gmail.com {TAB} testpassword 
```

因此，收到键盘日志的人会阅读它，如您在上面看到的。

另一种方法是在浏览器中注入一些专门编写的 DLL 或扩展，我主要在 Internet Explorer 中看到它，它们使用 BHO DLL 来接收所有 GET/POST 数据，因此您不需要任何正在运行的 EXE 文件，只需一个在您打开 Internet Explorer 时运行的 DLL，该 DLL 将直接将您的所有 POST/GET 数据原样发送到黑客的服务器。它大部分在同一时间完成，BHO 不存储任何东西（大部分），并将您发送到银行的相同 POST/GET 数据同时发送到黑客的服务器。但其他键盘记录器大多存储键盘日志，直到达到一定大小，例如 5kb，然后木马将键盘日志提交给黑客。

还有一些“不那么常​​见”的技巧来捕获击键，那就是有一个在 ring-0（内核模式）下运行并捕获键盘数据的低级驱动程序，它更复杂且难以检测，但黑客也很难使用时，您需要另一个合作的 ring-3（用户模式）应用程序在内核接收键盘的同时获取当前窗口、当前键盘布局（英语、中文、阿拉伯语等），因为不知道键盘布局和窗口哪个用户按下了这些键，它将“几乎”无用。

我还看到了一种捕获击键的“不专业”方式，即使用`GetAsynKeyState`API。他们主要编写一个循环函数，并通过每 100 毫秒调用一次此 API 来捕获关键事件（例如）。

所以我想我已经介绍了很多键盘记录器用来捕获按键的技术，如果你有更具体的问题，请告诉我。

# enterprise - 什么是“企业就绪”？我们可以测试一下吗？

> ID：464514
> 
> 赞同：10
> 
> 时间：2009-01-21T09:05:52.590
> 
> 标签：enterprise, production-environment

Stackoverflow 上有几个问题询问 x ( [Ruby](https://stackoverflow.com/questions/14823/is-ruby-on-rails-ready-for-the-enterprise "红宝石") / [Drupal](https://stackoverflow.com/questions/426830/is-drupal-ready-for-the-enterprise) ) 技术是否“为企业做好准备”。

我想问一下“企业就绪”是如何定义的。

有没有人创建了自己的清单？

有没有人有他们测试的基准？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-21T09:19:51.860

简而言之：
“企业就绪”是指：如果它崩溃了，使用它的企业可能会起诉你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-21T09:51:05.930

“企业就绪”在很大程度上意味着我们可以在大型组织内可靠有效地运行它。

涉及到几个因素：

*   它可靠吗？
*   我们现有的员工可以支持它，还是我们需要专家？
*   它可以适应我们既定的安全模型吗？
*   可以使用我们的自动化工具进行部署吗？
*   管理有多容易？业务用户可以这样做还是我们需要专家？
*   如果它使用数据库，它是我们的标准数据库，还是我们需要培训更多的专家？

根据系统对业务的重要性，以下问题也可能适用：

*   能否实现高可用？
*   可以负载均衡吗？
*   是否足够安全？

开源项目通常没有足够重视在大型组织中部署和运行软件的困难。例如，大多数 OS 项目默认使用 MySql 作为数据库，这对于大多数小型项目来说是一个不错且明智的选择，但是，如果您的企业拥有 ORACLE 站点许可证并且拥有一支高技能的 ORACLE DBA 团队，那么 MySql 选项看起来显然没有吸引力。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-21T09:15:36.767

大多数情况下，“测试”（如果真的可以这样称呼的话）是某个企业（=大型企业）已经使用它部署了成功且稳定的产品。所以它更像是说它在战场上证明了它的价值，或者类似的东西。换句话说，该框架已经成功使用，或者没有在现实世界中使用，你不能仅仅按照一些清单和负载测试就说它的企业准备好了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-21T09:26:00.443

就像罗伯特古尔德在他的回答中所说的那样，当它被其他一些大型项目证明时，它就是“企业就绪”。我会这样说：如果有人用它赚了数百万美元，并被风险投资杂志写成今年（某年，不一定是这一年）最热门的新事物，那么它就是企业级的。:)

看待这个问题的另一种方式是，当非技术老板或企业主不担心他们是否选择了一个好的平台来经营他们的业务时，一项技术就是企业就绪的。从这个意义上说，企业就绪是衡量品牌认知度而不是技术成熟度的标准。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-21T10:15:48.393

构建了几个“企业”应用程序...

开发之外的企业意味着，如果它坏了，有人可以修复它。我曾与雇主/承包商合作过，这些雇主/承包商很可能是管理最差的托管服务提供商、数据供应商等，因为他们会在出现问题时解决问题，即使他们出现很多问题，并且在他们出现问题时有人打电话休息。

因此，以另一种方式重申，企业软件是企业软件，因为它具有可用的支持选项。一个简单的例子：jQuery 不是企业的，而 ExtJS 是，因为 ExtJS 有一个企业支持结构。（是的，我知道这两个框架就像将工具集与工厂制造的家用套件进行比较）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-18T12:00:07.273

由于我的日常工作都是关于企业架构的，我相信现在企业这个词不是关于规模或规模，而是更多地指的是软件产品的销售方式。

例如，Ruby on Rails 不是企业，因为没有供应商会进入您的商店并为开发人员社区反复做 Powerpoint 演示。Ruby on Rails 没有销售主管带我去高尔夫球场或我最喜欢的餐厅吃午饭。Gartner 等行业分析公司也没有深入研究 Ruby on Rails。

在这些事情发生之前，Ruby on Rails 永远不会被视为“企业”......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-21T09:20:21.437

根据我的经验，“企业就绪”标签表明管理者害怕采用开源技术，这可能与不跟随该技术的愿望相平衡。

这可能会客观地与第三方公司的支持或与现有开发工具的集成等考虑因素进行争论。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-21T09:42:36.820

我想当一个应用程序足够稳定以供大公司使用时，它可以被认为是“企业就绪”。这也意味着一定程度的支持，所以当它不可避免地破裂时。

是否“企业就绪”完全是主观的，未定义的，而是“流行语”。基本上，你不能拥有`test_isEnterpriseReady()`- 只是让你的应用程序尽可能可靠和高效。

# sqlite - Firefox 书签 SQLite 结构

> ID：464516
> 
> 赞同：14
> 
> 时间：2009-01-21T09:06:42.463
> 
> 标签：sqlite, firefox-addon, firefox-3, bookmarks

我正在尝试编写一个 Firefox 3 插件，它可以让我轻松地重新标记书签。例如，我有一些标记为“开发”的书签和一些标记为“开发”的书签，我想要一种方法可以轻松地将所有“开发”标签更新为“开发”。不幸的是，我找不到一个插件来做到这一点，所以我想我会创建自己的。

在我设法掌握基础知识并发现 FireFox 将所有书签存储在名为 Places.sqlite 的 SQLite 数据库中之前，我还没有开发过插件。在该数据库中有一个名为 moz_bookmarks 的表，其中包含书签目录中的所有书签、标签和文件夹。书签文件夹及其子书签的结构使用外键 id 表示，该外键 id 指向同一个表中的父文件夹的 id，该表再次向上递归到该父文件夹的 Id，直到它到达书签根。

但是，我陷入困境的地方是您在 Firefox 中应用的标签与书签的关系。每个标签都有一个类型 = 2 和父 ID = 4。但是我看不出这与使用该标签的实际书签之间没有关联。如果我在 Firefox 中将书签添加到没有特定文件夹但给它 2 或 3 个标签，那么它的父文件夹 ID 为 5，对应于“未归档”，但我看不到与它关联的标签的进一步关联。

我[在结构上找到了这个 Wiki 页面，](http://www.forensicswiki.org/index.php?title=Mozilla_Firefox_3_History_File_Format)但它并没有真正帮助。

这让我发疯了:(请帮助...

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-04-11T14:30:45.787

您可能已经发现自己，但标签应用如下：

数据库中所有 URL 的中心位置是`moz_places`. 该表`moz_bookmarks`通过外键列引用它`fk`。

如果您标记书签，则 中有多个条目`moz_bookmarks`，所有条目都具有相同的引用`fk`：第一个是书签本身（在`title`列中具有标题）对于每个标记，`moz_bookmarks`具有相同外键`fk`并引用列中的标签`parent`（指向标签所在的行`moz_bookmarks`）。

如果您有一个标题为“Stackoverflow”的书签“ [http://stackoverflow.com ”，标签为“programming”和“info”，您将获得：](http://stackoverflow.com)

```
moz_places
----------
id    url   (some more)
3636  http://stackoverflow.com

moz_bookmarks
-------------
id    type    fk     parent    title          (other columns omitted...)
332   1       3636   5         Stackoverflow  (parent=5 -> unfiled folder)
333   2       (NULL) 4         programming    (programming tag, parent=4 -> tags folder)
334   1       3636   333       (NULL)         (link to 'programming' tag)
335   2       (NULL) 4         info           (info tag, parent=4 see above)
336   1       3636   335       (NULL)         (link to 'info' tag) 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T09:48:53.047

正如 MartinStettner 建议的标签结构基于标签 id 的外键，因此您首先必须确定目标标签的 moz_bookmark.id。

[这个 Mozilla PDF](https://wiki.mozilla.org/images/d/d5/Places.sqlite.schema3.pdf)解释了 sqllite 中的关系......

> > 标签会在 moz_bookmarks 中产生两个新条目。第一个是标签，parent=4（标签），fk=NULL。第二个条目跟在第一个条目之后，并以前一个标签作为其父项，fk 指向 moz_places 中的正确条目。

以此为指导...一旦您知道标签的 ID，您就可以加入 moz_places.id ON moz_bookmarks.fk ...

```
 SELECT moz_places.id, moz_places.url, moz_places.title, moz_bookmarks.parent    
    FROM moz_places    
    LEFT OUTER JOIN moz_bookmarks    
    ON moz_places.id = moz_bookmarks.fk    
    WHERE moz_bookmarks.parent = N 
```

出口 ...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-24T00:39:51.830

我不能完全帮助您了解操作方法，但是，也许扩展“SQLite Manager”至少会在您试图弄清楚该做什么的部分帮助您。该插件是一个通用管理器，但它也包含 Firefox 使用的默认数据库作为标准选项。

使用该扩展名，重命名您喜欢的关键字应该相对简单。如果您只是在寻找一种修复它的方法，这可能会起作用，如果您仍然喜欢编写自己的工具，也许这个工具至少可以帮助查询；）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-11-27T01:12:08.757

我也帮不上什么忙-发现您的问题正在寻找相同的答案...

我设法找到的是相关的 Mozilla 文档。书签系统称为 Places，数据库表在[https://developer.mozilla.org/en-US/docs/The_Places_database](https://developer.mozilla.org/en-US/docs/The_Places_database)中进行了描述。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-07T10:05:02.353

因为我必须深入挖掘才能找到这些信息，所以这里是获取所有书签的 url、标题和创建日期的请求：

```
SELECT h.url, b.title, b.dateAdded
FROM moz_places h
JOIN moz_bookmarks b
ON h.id = b.fk; 
```

我希望它会帮助人们寻找这个答案。

# asp.net - 在 ASP.NET 中将 DataTable 绑定到 FormsView 控件

> ID：464517
> 
> 赞同：0
> 
> 时间：2009-01-21T09:06:57.703
> 
> 标签：asp.net, controls, formview

我有一个 FormView 控件，它使用 DataSource 控件进行绑定。它具有项目模板，因此会自动显示 New、Edit、Delete 按钮，然后从 DataSource 控件查询中选择适当的查询。

如果我必须从后面的代码中映射 FormView 控件的新建、编辑和删除按钮，方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-22T02:54:26.083

这里最重要的是不要忘记传递CommandName 作为您要执行的操作，即插入、更新、删除...。这将触发FormView 的事件来执行此类操作。

看看[这里](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.itemcommand.aspx)和[这里](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.commandname.aspx)。

# design-patterns - 桥接模式和策略模式有什么区别？

> ID：464524
> 
> 赞同：127
> 
> 时间：2009-01-21T09:09:13.660
> 
> 标签：design-patterns, strategy-pattern, bridge

我尝试阅读有关[dofactory](https://www.dofactory.com/net/design-patterns)、维基百科和许多网站的许多文章。我不知道桥接模式和策略模式之间的区别。

我知道它们都将抽象与其实现分离，并且可以在运行时更改实现。

但是我还是不知道在什么情况下应该使用策略，或者在什么情况下应该使用桥牌。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-01-21T09:18:51.300

语义。来自[维基百科](http://en.wikipedia.org/wiki/Strategy_pattern#Strategy_versus_Bridge)：

> 策略模式的 UML 类图与桥模式的图相同。但是，这两种设计模式的意图并不相同。策略模式适用于行为，而桥接模式适用于结构。
> 
> 上下文和策略之间的耦合比桥接模式中抽象和实现之间的耦合更紧密。

据我了解，当您抽象可以从外部源提供的行为（例如，配置可以指定加载某些插件程序集）时，您正在使用策略模式，并且您在使用时使用桥接模式相同的结构使您的代码更整洁。实际代码看起来非常相似 - 您只是出于**稍微不同的原因**应用这些模式。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2009-01-21T13:34:24.607

The Bridge pattern is a structural pattern (HOW DO YOU BUILD A SOFTWARE COMPONENT?). The Strategy pattern is a dynamic pattern (HOW DO YOU WANT TO RUN A BEHAVIOUR IN SOFTWARE?).

**The syntax is similar but the goals are different:**

*   **Strategy**: you have more ways for doing an operation; with strategy, you can choose the algorithm at run-time and you can modify a single Strategy without a lot of side-effects at compile-time;
*   **Bridge**: you can split the hierarchy of interface and class, join it with an abstract reference (see [explication](http://bytescrolls.blogspot.com/2009/01/design-patterns-bridge.html))

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-09-03T12:51:00.377

I was thinking the same, but recently I had to use bridge and realized that bridge is using strategy and adding abstraction to the context so that you later can make more changes without changing the client. When using Strategy without the abstraction the design is not as flexible and may require changes to the client later. But when using the whole bridge the design becomes even more flexible. Here you can se how going from Strategy to Bridge gives more flexibility. Also we assume that now "visa" and "master" are not only available on cards but on phones and chips also; and if we use bridge it is much easier to add that support.

[![Strategy VS Bridge](https://i.stack.imgur.com/nSdkF.png)](https://i.stack.imgur.com/nSdkF.png)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2011-07-27T16:53:20.123

**Strategy:**

*   Context tied to the Strategy: The context Class (possibly Abstract but not really an interface! as u wish to encapsulate out a specific behavior and not the entire implementation) would know/contain the strategy interface reference and the **implementation** to invoke the strategy behavior on it.
*   Intent is ability to swap behavior at runtime

    ```
    class Context {

         IStrategy strategyReference;

         void strategicBehaviour() {

            strategyReference.behave();
         }

    } 
    ```

**Bridge**

*   Abstraction not tied to the Implementation: The abstraction interface (or abstract class with most of the behavior abstract) would not know/contain the implementation interface reference
*   Intent is to completely decouple the Abstraction from the Implementation

    ```
    interface IAbstraction {

        void behaviour1();

        .....

    }

    interface IImplementation {

         void behave1();

         void behave2();

         .....

    }

    class ConcreteAbstraction1 implements IAbstraction {

          IImplementation implmentReference;

          ConcreteAbstraction1() {

               implmentReference = new ImplementationA() // Some implementation

          }

          void behaviour1() {

                implmentReference.behave1();

          }

          .............

    }

    class ConcreteAbstraction2 implements IAbstraction {

          IImplementation implmentReference;

          ConcreteAbstraction1() {

               implmentReference = new ImplementationB() // Some Other implementation

          }

          void behaviour1() {

                implmentReference.behave2();

          }

          .............

    } 
    ```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-02-17T15:41:20.483

***Bridge****:* ( A structural pattern)

*Bridge pattern decouples abstraction and implementation and allows both to vary independently.*

Use this pattern when :

1.  Abstractions and implementations have not been decided at compile time
2.  Abstractions and implementations should be changed independently
3.  Changes in implementation of abstraction should not affect caller application
4.  Client should be insulated from implementation details.

***Strategy:*** ( Behavioural pattern)

*Strategy patterns enable you to switch between multiple algorithms from a family of algorithms at run time.*

Use Strategy pattern when :

1.  Multiple versions of algorithms are required
2.  The behaviour of class has to be changed dynamically at run time
3.  Avoid conditional statements

Related posts:

[When do you use the Bridge Pattern? How is it different from Adapter pattern?](https://stackoverflow.com/questions/319728/when-do-you-use-the-bridge-pattern-how-is-it-different-from-adapter-pattern/37514779#37514779)

[Real World Example of the Strategy Pattern](https://stackoverflow.com/questions/370258/real-world-example-of-the-strategy-pattern/35180265#35180265)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-05-09T22:13:32.387

**Design pattern types**

*   **Behavioural:** patterns characterise the ways in which classes or objects interact and distribute responsibility
*   **Structural:** patterns deal with the composition of classes or objects.
*   **Creational :** patterns are concerned about the process of object creation.

**[Bridge](https://www.youtube.com/watch?v=9jIgSsIfh_8&index=14&list=PLF206E906175C7E07) (Structural)**

> Decouple an abstraction from its implementation so that each may vary. independently. [![enter image description here](https://i.stack.imgur.com/Q68h4.png)](https://i.stack.imgur.com/Q68h4.png)

Take a remote. The remote has buttons 1-6\. This is the concrete class in the diagram above. Each button will work different depending on if the remote is used for a TV or DVD. The functionality for each button is abstracted from the implementation by the implementer interface.

This allows us to change how the remote will work for each device.

**[Strategy](https://www.youtube.com/watch?v=-NCgRD9-C6o&index=2&list=PLF206E906175C7E07) (Behavioural)**

> Define a family of algorithms , encapsulate each one and make them interchangeable. [![enter image description here](https://i.stack.imgur.com/9Trzg.png)](https://i.stack.imgur.com/9Trzg.png)

In strategy, if we were looking at the remote scenario. The "state" is the entire remote which we swap out by changing the context's state reference. The "concreteStateA" (TV remote) "concreteStateB" (DVD Remote).

Additional reading:

*   [Java design principles and patterns](https://www.amazon.co.uk/Java-Design-Pattern-Essentials-Bevis-ebook/dp/B00A9HSR2M/ref=sr_1_1?ie=UTF8&qid=1525903474&sr=8-1&keywords=java%20design%20pattern%20essentials)
*   [Design Patterns](https://www.amazon.co.uk/Design-patterns-elements-reusable-object-oriented/dp/0201633612/ref=sr_1_1?s=books&ie=UTF8&qid=1525903528&sr=1-1&keywords=design%20patterns%20elements%20of%20reusable%20object-oriented%20software)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-18T18:09:09.377

1.  **Strategy** Pattern is used for Behavioural decisions, while **Bridge** Pattern is used for Structural decisions.

2.  **Brigde** Pattern separats the abstract elements from the implementation details, while **Strategy** Pattern is concerned making algorithms more interchangeable.

[**Strategy Pattern in UML**](https://i.stack.imgur.com/A7hdL.png)

[**Brigde Pattern in UML**](https://i.stack.imgur.com/ZQKYf.png)

**Strategy Pattern in Swift:**

```
protocol PrintStrategy {
   func print(_ string: String) -> String
}

class Printer {
   let strategy: PrintStrategy

   init(strategy: PrintStrategy) {
      self.strategy = strategy
    }

  func print(_ string: String) -> String {
     return self.strategy.print(string)
  }
}

class UpperCaseStrategy: PrintStrategy {
    internal func print(_ string: String) -> String {
        return string.uppercased()
    }
}

class LowerCaseStrategy: PrintStrategy {
    internal func print(_ string: String) -> String {
        return string.lowercased()
    }
}

var lower = Printer(strategy: LowerCaseStrategy())
lower.print("I love Software Patterns")

var upper = Printer(strategy: UpperCaseStrategy())
upper.print("I love Software Patterns") 
```

**Brigde Pattern in Swift:**

```
protocol Appliance {
   func run()
}

protocol Switch {
   let appliance: Appliance {get set}
   func turnOn()
}

class RemoteControl: Switch {
   var appliance: Appliance

   init(appliance: Appliance) {
       self.appliance = appliance
   }

   internal func turnOn() {
      appliance.run()
   }
}

class TV: Appliance {
   internal func run() {
      print("TV is ON")
   }
}

class Stereo: Appliance {
   internal func run() {
      print("Stereo is ON")
   }
}

var tvRemote = RemoteControl.init(appliance: TV())
tvRemote.turnOn()

var stereoRemote = RemoteControl.init(appliance: Stereo())
stereoRemote.turnOn() 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-01-21T09:21:46.223

添加到 willcodejavaforfood 的答案中，它们在实现中可以是相同的。但是，您使用策略来交换诸如排序策略之类的策略，而使用桥接来桥接两个对象的实现，例如数据库包装器和网络适配器，以便客户端代码可以使用其中任何一个来处理相同的 API。所以命名实际上说明了一切

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-21T09:18:11.973

[来自关于策略](http://en.wikipedia.org/wiki/Strategy_pattern#Strategy_versus_Bridge)模式的 wiki

> 策略模式的 UML 类图与桥模式的图相同。但是，这两种设计模式的意图并不相同。策略模式适用于行为，而桥接模式适用于结构。
> 
> 上下文和策略之间的耦合比桥接模式中抽象和实现之间的耦合更紧密。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-04-11T14:48:30.300

Just to add to what has already been said about the pattern comparison (difference of intent, ...): the Bridge pattern is also intentionally structured to allow the abstraction hierarchy side to vary. In languages like C# this could imply you have an abstraction base that contains virtual methods as a way to allow intended variations that don't cause problems for existing consumers. Other than that the two patterns might appear identical for the most part.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-10-22T15:46:15.467

Strategy pattern is used when you wish to plug algorithm or strategy at run time. As category of pattern also implies that it deals with behaviour of the objects. On the other hand bridge is structural pattern and deals with structural hierarchy of the objects. It decouples the abstraction from implementation by introducing a refined abstraction between them. Refined abstraction can be confused with the run time strategy plugged (In Strategy pattern). Bridge pattern deals with the structural aspects by providing a mechanism to avoid creating n number of classes.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-06-09T13:54:15.610

For strategy pattern only the implementation varies.

Suppose, class A is using class B which has multiple implementations available. So in that case B would be abstract with actual implementation provided at runtime. This is strategy pattern

Now if A itself is abstract. Both A and B may vary. You would use Bridge pattern.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-09-08T09:33:44.140

I think there's a slight difference between them in the context they're being used.

I use the Bridge pattern to separate orthogonal concepts which they both belong to a bigger one - to let them vary independently. It usually involves multiple abstractions.

IMO, the Strategy pattern is simpler or more flat. It serves to OCP for sure but doesn't necessarily to be part of another and bigger concept like the Bridge pattern.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-11-16T10:59:59.800

In the Strategy pattern, the activities of the "Parent" for a particular operation are constant whereas the activities of the "Child" can vary. However, in the Bridge Pattern, the activities of the Parent, as well as the Child, can vary.

So, for example,

```
public class Ticket {

    Date dateOfTravel;
    int distance;
    Vehicle vehicle;
    Seat  seat;

    public float getTotalFare(){
         //depends on 
               //Distance
               //Vehicle - whether Vehicle is AC or non-AC. 
               //Seat - based on the location of the Seat.

        //Fare = vehicleBaseFare*seatMultiplier*distance

    }

} 
```

In the above, the variations depend on the Parent (distance) as well as the children (Vehicle and Seat). So, here Vehicle and Seat both acted like Bridge.

Now, here

```
public class Vehicle {

   TrackingDevice device;

   public Coordinates getCoordinates(){
       return device.getCoordinates();
   }
} 
```

Here, the Parent's role was constant, i.e., nothing! So, this was a Strategy pattern.

# c# - 如何序列化 IList ?

> ID：464525
> 
> 赞同：15
> 
> 时间：2009-01-21T09:09:15.610
> 
> 标签：c#, .net, web-services, .net-3.5, ibatis.net

我有一个返回 IList 的 OR 映射器（iBatis.Net）。

```
// IList<T> QueryForList<T>(string statementName, object parameterObject);
var data = mapper.QueryForList<Something>(statement, parameters); 
```

我正在尝试在 Web 服务中使用它并希望以 1:1 的比例返回数据。当然，我不能在 WebMethod 中返回 IList，因为它是一个接口，因此不可序列化。

我发现映射器确实返回了一个列表。但是我害怕将它转换为 List 因为映射器的内部工作当然可能会在未来的版本中发生变化（而且感觉很脏）。

那我应该...

```
a) return new List<Something>(data);

b) return (List<Something>)data;

c) // your solution here 
```

非常感谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-21T09:28:26.507

如果它确实是，`List<T>`但您想防止更改并让它仍然有效，那么最高效的解决方案是尝试将其转换为列表，如果失败，则从其内容创建一个新列表，例如

```
var data = mapper.QueryForList<T>(statement, parameters);
var list = data as List<T> ?? new List<T>(data); 
```

但是，您提到不能返回接口，因为它是 Web 服务。对于 ASMX 和类，这可能是正确的`XmlSerializer`，但是如果您使用 WCF 构建 Web 服务并使用它，`DataContractSerializer`那么它将很高兴地序列化集合接口（作为服务的输入和输出）。不过，这种类型的变化可能比您想要的要大一些！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T09:19:02.627

为什么要序列化 ​​IList :) 只需将其用作您自己的集合的源并对其进行序列化：

```
var data = mapper.QueryForList<T>(statement, parameters);
var yourList = new List<T>(data);
//Serialize yourList here )) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T09:17:04.157

我认为你不需要交流）。使用解决方案 a) 应该是非常安全的。

该解决方案依赖于 IBatis.net 的公共 api。好的 api 不会改变他们的公共 api，除非它真的是解决关键任务问题的唯一解决方案

希望这可以帮助。

# python - 应用服务器的单元测试

> ID：464543
> 
> 赞同：3
> 
> 时间：2009-01-21T09:15:42.803
> 
> 标签：python, unit-testing, twisted

我写了一个应用服务器（使用 python & twisted），我想开始写一些测试。但由于时间限制，我不想使用 Twisted 的试用版，现在没有时间玩它。所以这就是我的想法：编写一个连接到应用服务器并发出必要请求的小型测试客户端（通信协议是一些内部 XML），以静态方式存储接收到的 XML，然后编写一些测试使用 unitest 处理那些静态数据。

我的问题是：这是一种正确的方法吗？如果是，这种方法涵盖了哪些类型的测试？

此外，使用这种方法有几个缺点，例如：无法访问数据库层以构建/重建模式，测试客户端何时连接到服务器：每个单元测试或运行测试套件之前?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-01T11:25:33.207

您应该使用试用版。这真的不是很难。Trial 的文档有待改进，但如果你知道如何使用标准库单元测试，唯一的区别就是不用写

```
import unittest 
```

你应该写

```
from twisted.trial import unittest 
```

...然后您可以从您的`test_`方法中返回 Deferreds。几乎其他一切都是一样的。

另一个区别是，不是在模块底部构建一个巨大的测试对象然后运行

```
python your/test_module.py 
```

您可以简单地定义您的测试用例，然后运行

```
trial your.test_module 
```

如果您根本不关心反应器集成，实际上，您可以`trial`在一组现有的 Python 单元测试上运行。试用版支持标准库 ' `unittest`' 模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T11:15:34.870

**“我的问题是：这是一个正确的方法吗？”**

这是你选择的。你找了很多借口，所以我假设你在这门课上相当固定。这不是最好的，但你已经列出了你这样做的所有理由（然后就这个具体的行动方案提出了后续问题）。“正确”不再进入它，所以这个问题没有答案。

**“这种方法涵盖了什么样的测试？”**

他们称之为“黑盒”测试。应用程序服务器是一个黑盒子，有一些输入和输出，您无法测试它的任何内部结构。它被认为是一种可接受的测试形式，因为它测试底线外部接口的可接受行为。

如果您有问题，结果证明它对进行诊断工作毫无用处。您会发现您还需要对内部结构进行白盒测试。

**“无法访问数据库层以构建/重建模式，”**

为什么不？这是 Python。编写一个单独的工具来导入该层并进行数据库构建。

**“测试客户端什么时候连接到服务器：每个单元测试还是在运行测试套件之前？”**

取决于测试的意图。取决于您的用例。与您的实际目标客户在“现实世界”中会发生什么？

您需要测试类似客户端的行为，以客户端建立连接的方式建立连接。

此外，您还需要测试异常行为，例如客户端断开连接或做事无序或未连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T14:01:38.157

我认为你选择了错误的方向。确实，试用文档非常轻量。但是 Trial 是基于 unittest 的，只添加了一些东西来处理 reactor 循环和异步调用（编写处理 defers 的测试并不容易）。您所有不包括延迟/异步调用的测试都将与正常的单元测试完全相同。

Trial 命令是一个测试运行器（有点像鼻子），因此您不必为您的测试编写测试套件。您将节省时间。最重要的是，Trial 命令可以输出分析和覆盖信息。只需执行 Trial -h 即可获取更多信息。

但无论如何，您首先应该问自己的是您最需要哪种测试，单元测试、集成测试或系统测试（黑盒）。使用 Trial 可以完成所有工作，但不一定总是最合适的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T09:35:17.927

以前没有使用过twisted，并且twisted/trial 文档与我刚刚看到的相比并不出色，但是您可能需要2-3 天的时间才能正确实施您上面描述的测试系统。现在，就像我说的我不知道试用版，但我猜你可能会在 1-2 天内让它工作，因为你已经有了一个 Twisted 应用程序。现在，如果试用版在更短的时间内为您提供更多覆盖，我会选择试用版。

但请记住，这只是粗略查看文档的答案

# paypal - 美国以外的网站支付专业版

> ID：464545
> 
> 赞同：4
> 
> 时间：2009-01-21T09:17:22.893
> 
> 标签：paypal, payment, website-payment-pro

我目前的在线商店使用 PayPal 快速结账（也适用于信用卡）向用户收费。我们的调查（和 A/B 测试）表明，他们愿意以更少的步骤下订单，而无需访问 Paypal 网站。

我们位于香港，因此不能使用带有*DirectPayment的**网站支付专业版。*您是否有任何其他解决方案可以满足我们的需求（即相同的定价水平）。小额交易（< 100 美元），需要在我们的信用卡商店内完全集成解决方案（无需重定向到其他网站）？

 *我们可能会将贝宝作为没有信用卡的客户的备用解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T09:35:59.080

由于 PayPal 在香港确实不提供 WPP，我只看到三个选项：

*   在提供 WPP 的美国/英国/加拿大开展业务；
*   使用标准的信用卡支付提供商，而不是 PayPal；
*   继续使用 WPS。

恐怕这些都不是相同水平的定价和收益。:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T09:39:38.590

[我想知道您是否对Google Checkout](http://code.google.com/apis/checkout/index.html)也有同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T09:46:05.613

看看： [http ://www.avangate.com](http://www.avangate.com) [http://www.epayment.ro](http://www.epayment.ro)

# iis - 为什么还要回收应用程序池？

> ID：464546
> 
> 赞同：13
> 
> 时间：2009-01-21T09:17:25.017
> 
> 标签：iis, web-applications, webserver, application-pool, recycle

也许有人可以对这个简单的问题有所了解：

我有一个经过彻底审查的 .NET Web 应用程序。每当一个应用程序域（进程）启动时，它都会为每个应用程序域（进程）加载一个缓存，并且在完成此缓存加载之前无法完全回复请求。

我一直在检查我的应用程序池的设置，并开始想知道为什么我什至如此频繁地回收（每 1,000,000 次调用或 2 小时一次）。

什么会阻止我将自动回收设置为每 24 小时甚至更长时间一次？如果内存对 appdomain 失控，为什么不完全删除该选项并进行回收？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-21T09:56:08.807

如果您的应用程序可靠运行的时间超过为应用程序池回收设置的阈值，那么一定要提高阈值。如果您的应用程序稳定，则没有缺点。

对我们来说，我们完全关闭了回收，取而代之的是每分钟加载一个测试页面并在连续五次加载失败时运行 iisreset 的任务。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-21T09:24:17.233

您可能应该从可靠性的角度来看待回收。根据历史数据，您应该了解您的应用程序使用了多少内存、CPU 等，以及历史模式以及何时开始出现问题。知道了这一点，您可以配置回收来解决这些问题。例如，如果您知道您的应用程序的内存使用模式*不断增加，导致应用程序在几天后内存不足，您可以将其配置为在此之前回收。

* 显然，如果可能，您还希望解决此错误，但可以使用回收来提高客户的可靠性

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-21T09:24:05.593

他们这样做的原因是应用程序可能“不工作”，即使它的 CPU 和内存都很好（想想死锁）。应用程序回收是最终的故障保护措施，可以保护有缺陷的代码免于死亡。

此外，任何未能实现 IDisposable 的代码都会在回收时运行终结器，这可能会释放持有的资源。

# .net - 从 .NET Web 服务返回行

> ID：464547
> 
> 赞同：0
> 
> 时间：2009-01-21T09:17:50.303
> 
> 标签：.net, web-services, datatable

我正在使用 .NET Web 服务作为数据库的接口。从此 Web 服务返回行的最佳方法是什么？

我隐约记得 .NET 2.0 在返回 DataTable 对象方面存在问题。这些问题还存在吗？

**更新： .NET 1.1 中**[的](http://support.microsoft.com/kb/306134) 一些[问题](http://bytes.com/groups/net-web-services/376326-possible-return-datatable-webservice-method)。另外，我相信在 2.0 中，DataTable 在客户端被反序列化为 DataSet 对象。我对么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T09:21:24.697

您正在有效地尝试做 ADO.net 的工作吗？您最好返回 POCO（普通的旧 c# 对象），您可以有效地对其进行序列化以发送肥皂，然后将它们拉回另一边。也许您可以在您的问题中向我们提供更多信息，说明您要做什么。

DataRows 和 DataTables 在 .net 3.0 中没有改变。如果你想使用实体框架来传递东西，虽然你会遇到不同的麻烦。如果它们是行，请查看使用 Linq，并序列化然后将行实体作为集合传递。有一些方法可以在客户端将实体重构为数据上下文，以便引用链接备份等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T09:33:22.613

我同意斯宾塞的观点。使用 Web 服务，您可以与客户签订合同。不应该仅仅因为你想改变你的数据库的形状就破坏这个契约。我将创建一个与表结构匹配的类并返回该结构的“列表”对象。然后，当数据模型更改时，您可以维护此接口并创建与新结构匹配的第二个服务方法。

# c++ - 如何正确使用#include 指令？

> ID：464560
> 
> 赞同：19
> 
> 时间：2009-01-21T09:22:40.527
> 
> 标签：c++, c

有没有关于如何`#include`正确使用的资料？我没有找到任何详细解释这种用法的 C/C++ 教科书。在正式的项目中，我总是在处理它时感到困惑。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-01-21T09:31:07.173

总是让我绊倒的一个大问题是：

这在标题路径中搜索：

```
#include <stdio.h> 
```

这将在您的本地目录中搜索：

```
#include "myfile.h" 
```

你应该对每个标题做的第二件事是：

我的文件名.h：

```
#ifndef MYFILENAME_H
#define MYFILENAME_H
//put code here
#endif 
```

这种模式意味着你不能在编译中重新定义标题（为 orsogufo 向我指出这被称为“包含保护”而欢呼）。阅读 C 编译器如何实际编译文件（在链接之前），因为这将使 #define 和 #include 的世界对您有很大的意义，C 编译器在解析文本时不是很聪明的。（但是 C 编译器本身是另一回事）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-01-21T09:35:16.790

*   如果您有钱，请查看 John Lakos 的大型 C++ 软件设计。
*   Google C++ 编码指南也有一些不错的东西。
*   也可以在线查看 Sutter Herb 材料（博客）。

基本上，您需要了解不需要包含标头的位置，例如。前向声明。还要尝试确保包含文件一个一个地编译，并且仅在必须时将#includes放入h文件中（例如模板）。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-01-21T13:11:56.180

因此，您的编译器可能支持 2 个唯一的包含文件搜索路径：
非正式地，我们可以称为系统包含路径和用户包含路径。**#include <XX>**
搜索 系统包含路径。 #include " **XX"**搜索用户包含路径，然后搜索系统包含路径。

 ****检查标准草案 n2521：
第 16.2 节：

```
2 A preprocessing directive of the form 

  # include < h-char-sequence> new-line 

  searches a sequence of implementation-deﬁned places for a header identiﬁed
  uniquely by the speciﬁed sequence between the < and > delimiters, and
  causes the replacement of that directive by the entire contents of the
  header. How the places are speciﬁed or the header identiﬁed is
  implementation-deﬁned. 

3 A preprocessing directive of the form 

  # include " q-char-sequence" new-line 

  causes the replacement of that directive by the entire contents of the
  source ﬁle identiﬁed by the speciﬁed sequence between the " " delimiters.
  The named source ﬁle is searched for in an implementation-deﬁned manner.
  If this search is not supported, or if the search fails, the directive is
  reprocessed as if it read

  # include < h-char-sequence> new-line 

  with the identical contained sequence (including > characters, if any)
  from the original directive. 
```

这方面的一个例子是 gcc

```
 -isystem <dir>              Add <dir> to the start of the system include path
  -idirafter <dir>            Add <dir> to the end of the system include path
  -iwithprefix <dir>          Add <dir> to the end of the system include path
  -iquote <dir>               Add <dir> to the end of the quote include path
  -iwithprefixbefore <dir>    Add <dir> to the end of the main include path
  -I <dir>                    Add <dir> to the end of the main include path 
```

要查看您的 gcc 在哪里搜索，请执行以下操作：

```
g++ -v -E -xc++ /dev/null -I LOOK_IN_HERE
#include "..." search starts here:
#include <...> search starts here:
  LOOK_IN_HERE
  /usr/include/c++/4.0.0
  /usr/include/c++/4.0.0/i686-apple-darwin9
  /usr/include/c++/4.0.0/backward
  /usr/local/include
  /usr/lib/gcc/i686-apple-darwin9/4.0.1/include
  /usr/include
  /System/Library/Frameworks (framework directory)
  /Library/Frameworks (framework directory)
End of search list. 
```

那么你如何使用这些知识。
有几种思想流派。但我总是列出我的库，从最具体到最一般。

例子

文件：plop.cpp

```
#include "plop.h"
#include "plop-used-class.h"

/// C Header Files
#include <stdio.h>    // I know bad example but I drew a blank

/// C++ Header files
#include <vector>
#include <memory> 
```

这样，如果头文件“plop-used-class.h”应该包含 <vector> 这将被编译器咳嗽。如果我将 <vector> 放在顶部，则该错误将对编译器隐藏。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-21T10:20:56.290

除了其他注释之外，请记住，如果您只有指针或引用，则不需要在另一个标头中 #include 标头。例如：

需要标头：

```
#include "Y.h"
class X
{
   Y y; // need header for Y
}; 
```

不需要标题：

```
class Y; 
class X
{
   Y* y; // don't need header for Y
};
//#include "Y.h" in .cpp file 
```

第二个示例编译速度更快，依赖项更少。这在大型代码库中可能很重要。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-21T21:59:06.443

只是 Andy Brice 的答案的一个附录，您还可以使用函数返回值的前向声明：

```
class Question;
class Answer;

class UniversityChallenge
{
...
    Answer AskQuestion( Question* );
...
}; 
```

这是我不久前提出的一个问题的链接，其中有一些很好的答案[http://bytes.com/groups/c/606466-forward-declaration-allowed](http://bytes.com/groups/c/606466-forward-declaration-allowed)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-21T09:37:29.157

头文件是C分离接口和实现的方式。它们分为两种类型：标准头文件和用户定义的头文件。标准头文件，例如 string.h，允许我们访问底层 C 库的功能。您应该在每个使用相关功能的 .c 文件中#include 它。通常这使用方括号，如 #include 用户定义的头文件将您的函数实现公开给其他程序员或您的 C 代码的其他部分。如果你已经实现了一个名为rational.c 的模块来进行有理数的计算，那么它的公共接口应该有一个对应的rational.h 文件。每个使用该功能的文件都应该#includerational.h，并且rational.c 应该#include 它。通常这是使用 #include "rational.h" 完成的[C 预处理器](http://en.wikipedia.org/wiki/C_preprocessor)。它主要进行文本替换和粘贴文本。Spence 在他的模式中是正确的，它可以防止重复的#includes，这会弄乱命名空间。这是包容的基础，[GNU Make](http://www.gnu.org/software/make/)给你更多的权力，也给你更多的麻烦。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-21T10:29:42.843

查看有关使用 和用于 C++[的讨论](https://stackoverflow.com/questions/301586)，包括 C 库。`#include<filename.h>``#include<filename>`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-21T10:33:55.640

*编辑：安迪·布莱斯（Andy Brice）也以更简短的方式提出了这一点。*

跟进 null 的答案，要考虑的最重要的事情是您将#include 放在哪里。

当您编写#include 时，预处理器实际上包括您在当前文件中列出的文件的内容，包括这些文件中的任何#include。这显然会导致编译时文件非常大（代码膨胀），因此您需要仔细考虑是否需要 #include。

在标准代码文件布局中，您有一个带有类和函数声明的类的 .h 文件，然后是一个 .cpp 实现文件，您应该注意头文件中的 #include 数量。这是因为，每次您对头文件进行更改时，任何包含它的文件（即使用您的类）也必须重新编译；如果头文件本身有很多包含，那么使用该类的每个文件在编译时都会显着膨胀。

最好尽可能使用前向声明，以便您可以编写方法签名等，然后在 .cpp 文件中#include 相关文件，以便您可以实际使用代码所依赖的类和结构。

```
//In myclass.h
class UtilClass; //Forward declaration of UtilClass - avoids having to #include untilclass.h here

class MyClass
{
    MyClass();
    ~MyClass();

    void DoSomethingWithUtils(UtilClass *util); //This will compile due to forward declaration above
};

//Then in the .cpp
#include utilclass.h

void MyClass::DoSomethingWithUtils(UtilClass *util)
{
    util->DoSomething(); //This will compile, because the class definition is included locally in this .cpp file.
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-23T10:45:16.713

> 有没有关于如何正确使用#include 的资料？

我强烈推荐[C++ 核心指南](https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines)的[SF: Source files](https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#sf-source-files)部分作为一个很好的起点。

> 我没有找到任何详细解释这种用法的 C/C++ 教科书。

[在John Lakos](https://www.informit.com/store/large-scale-c-plus-plus-software-design-9780201633627)的“Large-Scale C++ Software Design”中可以找到许多关于 C++ 项目物理组成主题的传统智慧。

> 在正式的项目中，我总是在处理它时感到困惑。

你有很好的陪伴。在[C++20 模块](https://en.cppreference.com/w/cpp/language/modules)之前，`#include`这是从多个文件组合 C++ 翻译单元的唯一实用方法。它是一种简单的、有限的工具，预处理器通过它基本上将整个文件复制/粘贴到其他文件中。由此产生的编译器输入通常是巨大的，并且工作通常从一个翻译单元重复到下一个翻译单元。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2009-01-21T09:50:36.960

您使用`#include "yourfile.h"`if `yourfile.h`is in the current working directory 并且`#include <yourfile.h>`如果文件的路径`yourfile.h`包含在 C++ 包含目录中（在配置中的某处，例如：`c:\mylib\yourfile.h`，路径`c:\mylib\`必须指定为包含目录），您还可以包含 .cpp 和 .hpp （h 加加）。有一组特定的文件可以写成：`#include <iostream>`. 对于这个特定的示例工作，您需要指定`using namespace std;`

有一个非常不错的软件，它与微软的 Visual c++ 集成，并显示了包含路径。[http://www.profactor.co.uk/includemanager.php](http://www.profactor.co.uk/includemanager.php)

# odbc - 如何使用 ODBC 从 Informix 中的 varchar 列中获取尾随空格

> ID：464567
> 
> 赞同：2
> 
> 时间：2009-01-21T09:25:52.173
> 
> 标签：odbc, informix, varchar

我无法从 Informix 数据库中的 varchar 列中获取尾随空格。

我创建了测试表，用一些尾随空格填充了它，但是它们没有被 SELECT 返回，而它们似乎存储在数据库中。

```
CREATE TABLE tmptable (txt varchar(240));
INSERT INTO tmptable (txt) VALUES ('123   ');
SELECT txt, txt || '***', LENGTH(txt) FROM tmptable; 
```

我得到了字段：

```
1: '123' : no trailing spaces!!!
2: '123   ***' : it seems that spaces are stored!!!
3: 3 : LENGTH() do not count trailing spaces!!! 
```

我测试的其他数据库：Oracle 和 PostgreSQL 返回带有尾随空格的 varchar 字段。我尝试了 RPAD() 但没有成功。有没有办法得到尾随空格？

服务器：IBM Informix 动态服务器版本 11.50.TC2DE

客户端：使用 ISA（HTML 页面源代码中没有空格）和 ODBC 驱动程序 3.50.TC3DE 进行测试

**编辑** 简单的 Python 测试程序（在 Windows 上使用 ActivePytnon 2.6 进行测试，您必须在最后几行更改连接字符串）

```
import odbc

def test_varchar(db_alias, dbname):
    print
    print
    arr = db_alias.split('/')
    print '%s    %s' % (arr[0], dbname)
    print '--------------'
    connection = odbc.odbc(db_alias)
    try:
        cursor = connection.cursor()
        cursor.execute("DELETE FROM tmptable;")
        cursor.execute("INSERT INTO tmptable (txt) VALUES ('   %s   ')" %  (dbname))
        #cursor.commit()
        cursor.execute("SELECT txt, txt || '***', LENGTH(txt) FROM tmptable;")
        for row in cursor.fetchall():
            print '[%s]\t[%s]\t[%s]' % (row[0], row[1], row[2])
    finally:
        connection.close()

#test_varchar('database/user/passwd',   'DBproducer')
test_varchar('oracledb/usr/passwd',     'Oracle    ')
test_varchar('informixdb/usr/passwd',   'Informix  ')
test_varchar('postgresqldb/usr/passwd', 'PostgreSQL') 
```

和结果：

```
c:\tools\pyscripts\scripts\db_examples>test_odbc.py
oracledb    Oracle
--------------
[   Oracle       ]      [   Oracle       ***]   [16]

informixdb    Informix
--------------
[   Informix]   [   Informix     ***]   [11]

postgresqldb    PostgreSQL
--------------
[   PostgreSQL   ]      [   PostgreSQL   ***]   [16] 
```

Jython 中使用 JDBC 的类似程序：

*   与本机 JDBC 驱动程序一起工作（不修剪尾随空格）
*   对 JDBC-ODBC 桥不起作用（修剪尾随空格c）

资源：

```
# for Jython 2.5 invoke with --verify
# beacuse of bug: http://bugs.jython.org/issue1127

import sys
from com.ziclix.python.sql import zxJDBC

def test_varchar(driver, db_url, usr, passwd):
    arr = db_url.split(':', 2)
    dbname = arr[1]
    if dbname == 'odbc':
        dbname = db_url
    print "\n\n%s\n--------------" % (dbname)
    try:
        connection = zxJDBC.connect(db_url, usr, passwd, driver)
    except:
        ex = sys.exc_info()
        s = 'Exception: %s: %s\n%s' % (ex[0], ex[1], db_url)
        print s
        return
    cursor = connection.cursor()
    cursor.execute("SELECT txt, txt || '***', LENGTH(txt) FROM tmptable")
    for row in cursor.fetchall():
        print '[%s]\t[%s]\t[%s]' % (row[0], row[1], row[2])

#test_varchar(driver, db_url, usr, passwd)
test_varchar("org.postgresql.Driver", 'jdbc:postgresql://127.0.0.1/pg_testdb', 'postgres', 'postgres')
test_varchar("oracle.jdbc.driver.OracleDriver", 'jdbc:oracle:oci:@MNTEST', 'user', 'passwd')
test_varchar("com.informix.jdbc.IfxDriver", 'jdbc:informix-sqli://127:0:0:1:9088/test_td:informixserver=ol_mn;DB_LOCALE=pl_PL.CP1250;CLIENT_LOCALE=pl_PL.CP1250;charSet=CP1250', 'user', 'passwd')

# db_url = jdbc:odbc:[ODBC source name]
test_varchar("sun.jdbc.odbc.JdbcOdbcDriver", 'jdbc:odbc:inf_test_db_odbc', 'user', 'passwd')
test_varchar("sun.jdbc.odbc.JdbcOdbcDriver", 'jdbc:odbc:ora_testdb_odbc', 'user', 'passwd')
test_varchar("sun.jdbc.odbc.JdbcOdbcDriver", 'jdbc:odbc:pg_testdb_odbc', 'postgres', 'postgres') 
```

结果（仅适用于 Informix）：

```
C:\tools\pyscripts\scripts\db_examples>jython --verify test_jdbc2.py

informix-sqli
--------------
[   Informix     ]      [   Informix     ***]   [11]

jdbc:odbc:inf_test_db_odbc
--------------
[   Informix]   [   Informix     ***]   [11] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-21T15:42:26.517

在 ESQL/C 中，很可能从 VARCHAR 列中获取尾随空格。我的 SQLCMD 程序（可从[IIUG Software Archive](http://www.iiug.org/software)获得）做到了。但是您必须非常小心地为保存结果的变量使用正确的类型。默认情况下，各种 char 类型被视为 CHAR 而不是 VARCHAR，除非您另有指示，否则库会从 CHAR 值中去除尾随空格（当您另外指示时，空白填充为全长）。

关于 ISA：我不知道您如何确定它返回的内容。我对它丢失了尾随空格并不感到惊讶。类似的评论也适用于 DB-Access。

关于 ODBC：请您显示代码，因为尽管代码中可能存在错误（感谢您提供版本信息 - 它有帮助，并让我放心，您实际上是最新的系统） ，更有可能是您编写的使用它的代码有问题。

关于 LENGTH()：定义为在计算长度之前去除尾随空格；它总是将其参数视为 CHAR 值而不是 VARCHAR 值。

获取您的代码并使用 SQLCMD：

```
Black JL: sqlcmd -d stores - <<!
        > CREATE TABLE tmptable (txt varchar(240));
        > INSERT INTO tmptable (txt) VALUES ('123   ');
        > SELECT txt, txt || '***', LENGTH(txt) FROM tmptable;
        > !
123   |123   ***|3
Black JL: 
```

' `Black JL:`' 是我在机器 'black' 上的 Unix 提示符；正如你所看到的，我得到了尾随的空白（但我在大约 20 年前写了 SQLCMD，现在，部分原因是 DB-Access，或者更确切地说，它的前身 ISQL，没有为我的目的做足够仔细的事情）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-28T22:02:58.607

对于不想猜测“正确类型”是什么的任何人，我已经通过指定“lvarchar”类型让我的 esql 程序工作。（至少一个版本的 esql/c 指南暗示“varchar”应该可以工作，但它不适合我）

# javascript - jQuery Sounds IE7 / IE8 问题与 Flash ExternalInterface

> ID：464568
> 
> 赞同：1
> 
> 时间：2009-01-21T09:25:57.043
> 
> 标签：javascript, jquery, flash, audio, externalinterface

我想向 Web 应用程序添加声音警报。我相信 Flash 是支持所有主流浏览器的最佳方式，即。IE、火狐、Chrome、Safari。Chrome 似乎不适用于非闪光声音解决方案。

我一直在使用 jQuery，想使用[jQuery Sound](http://plugins.jquery.com/project/sound)插件。[jQuery Sound Plug-in Demo](http://www.digitalxero.net/music/index.html)中显示了一个示例，但是我无法在 IE7 和 IE8 Beta 中使用它。

我在下面的代码部分中遇到了一个 JavaScript 问题。

```
load: function(evt, url) {
    var self = $(this);
    var id = self.data("sound.settings").id;
    var movie = self.data("sound.get_movie")(id);
    movie.load(url);
    self.data("sound.isPlaying", true);
}, 
```

该插件还使用以下函数来获取适合 IE 浏览器的 Flash 电影。

```
var get_movie = function(id) {
    var movie = null;
    if ($.browser.msie) {
        movie = window[id];
    } else {
        movie = document[id];
    }
    return movie;
}; 
```

这里有什么我遗漏的东西，所以这可以在 IE7 和 IE8 Beta 中工作吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-22T08:16:08.960

更改以下代码后，该问题已得到解决：

```
 if ($.browser.msie) {
        var html = '<object id="' + settings.id + '" data="' + settings.swf + '" type="application/x-shockwave-flash" width="0" height="0">';
        html += ' <param name="movie" value="' + settings.swf + '"/>';
        html += ' <param name="AllowScriptAccess" value="always"/>';
        html += ' <param name="quality" value="high"/>';
        html += ' <param name="wmode" value="transparent"/>';
        html += ' <!-- -->';
        html += ' </object>';
    } else {
        var html = '<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"';
        html += ' codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" width="0" height="0"';
        html += ' id="' + settings.id + '"';
        html += ' align="middle">';
        html += '<param name="movie" value="' + settings.swf + '" />';
        html += '<param name="quality" value="' + settings.quality + '" />';
        html += '<param name="FlashVars" value="id=' + settings.id + '"/>';
        html += '<param name="allowScriptAccess" value="always"/>';
        html += '<embed src="' + settings.swf + '" FlashVars="id='+ settings.id +'"';
        html += ' allowScriptAccess="always" quality="' + settings.quality + '" bgcolor="#ffffff" width="0" height="0"';
        html += ' name="' + settings.id + '" align="middle" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />';
        html += '</object>';
    }

...

var get_movie = function(id) {
    var movie = null;
    if ($.browser.msie) {
        //movie = window[id];
        movie = document.getElementById(id);
    } else {
        movie = document[id];
    }
    return movie;
}; 
```

参考来源：[SoundManager 2](http://www.schillmania.com/projects/soundmanager2/)

# c# - 以编程方式登录到 Windows XP

> ID：464580
> 
> 赞同：2
> 
> 时间：2009-01-21T09:30:41.633
> 
> 标签：c#, logging, windows-xp, network-programming

有人听说可以通过编程方式登录到 Windows xp，我想修改域控制器对用户进行身份验证的方式，如果用户以我的特殊方式进行身份验证，它会将用户名和密码返回给在客户端机器上工作的服务，所以它应该使用从 DC 传递的凭据登录用户，而无需等待用户插入其原始凭据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-21T09:39:20.197

看看这个：[Gina.dll MSDN](http://msdn.microsoft.com/en-us/library/aa375457(VS.85).aspx)

Gina 是指纹读取器等用于自定义登录屏幕的系统。你也许可以用这个来达到你的目的？

为了将来证明您的应用程序（Vista 和 Windows 7），您可能希望查看以下内容：[MSDN Mag Vista Credential Providers](http://msdn.microsoft.com/en-us/magazine/cc163489.aspx)

# eclipse - 从 Eclipse 到 IntelliJ

> ID：464586
> 
> 赞同：11
> 
> 时间：2009-01-21T09:33:16.963
> 
> 标签：eclipse, intellij-idea

我知道一些（疯狂的）人想[从 IntelliJ 转移到 Eclipse](https://stackoverflow.com/questions/167400/eclipse-for-intellij-idea-users)。在我这边，我正在移动“正常方式”，即从 Eclipse 3.3 到 IntelliJ 8.0.1

我真的很喜欢它，但有时我有点失落。

您知道专门为 Eclipse 用户创建的任何特定 IntelliJ 指南或教程吗？

例如，经过一些测试，我错过了一些在 Eclipse 上有用的选项（我不是说它们在 IntelliJ 中不存在，我只是说我没有找到它们！）：

*   自动插入';'的正确位置 特点
*   保存时执行的操作（格式化、重组和清理导入）...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-22T14:04:22.110

在 Jetbrains 主页中查看此常见问题解答：[链接](http://www.jetbrains.com/idea/documentation/migration_faq.html)。它不是指南或教程，而是介绍了 Eclipse 用户在移动时应该习惯的一些基本概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-30T18:26:58.413

用于自动插入';' 我上次查看时（可能是想法 6，也许是 7）在正确的位置（以及大括号）它不存在。我的同事总是想知道我为什么要插入';' 当我与他们配对时，在愚蠢的地方。我告诉他们当这个功能在 Idea 中可用时通知我，但直到现在他们还没有。

有两个最[相关的](https://stackoverflow.com/questions/239732/things-possible-in-intellij-that-arent-possible-in-eclipse) [问题](https://stackoverflow.com/questions/461255/things-possible-in-eclipse-that-arent-possible-in-intellij)（见右栏）涵盖了两个方向的“A 中可能发生的事情，B 中不可能发生的事情”——您可能会在那里找到想法，以及在人们告诉您该怎么做的答案的评论中找到想法做。

编辑（也许这比评论更好）；

...这似乎*有点*可能。请参阅我[对相关问题的回答](https://stackoverflow.com/questions/461255#answer-462506)的评论：。有人可能会争辩说 CTRL-SHIFT-ENTER 不如 ';' 直观，但在 Idea 中，您习惯于键入比在 eclipse 中更多的此类快捷方式......这最接近您要求的功能。希望能帮助到你...

# java - 如何使用java捕获其他应用程序的选定屏幕？

> ID：464593
> 
> 赞同：12
> 
> 时间：2009-01-21T09:34:42.220
> 
> 标签：java, screenshot

我们正在尝试开发屏幕捕获实用程序。

我们如何使用 Java 捕获另一个应用程序的选定屏幕？我们如何在捕获的屏幕上添加标注？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-31T01:46:34.360

根据[Prajakta 对项目的描述，我相信对操作屏幕截图的一些解释是有序的（我认为 John 在解释](https://stackoverflow.com/questions/464593/how-to-capture-selected-screen-of-other-application-using-java/490843#490843)[如何使用 java.awt.Robot 类捕获屏幕截图](https://stackoverflow.com/questions/464593/how-to-capture-selected-screen-of-other-application-using-java/466998#466998)方面做得很好）。请记住，正如[Steve McLeod 所说](https://stackoverflow.com/questions/464593/how-to-capture-selected-screen-of-other-application-using-java/465025#465025)，Java 可能无法自动定位您要在屏幕上捕获的窗口的位置。这很重要，因为 Robot 类需要自动或手动从您那里知道这个位置。

[通过调用屏幕截图的BufferedImage](http://java.sun.com/javase/6/docs/api/java/awt/image/BufferedImage.html)的 createGraphics() 方法时收到的 Graphics2D 对象，可以将标注、文本、图像等添加到屏幕截图中。我强烈建议您查看[Graphics2D 的 API](http://java.sun.com/javase/6/docs/api/java/awt/Graphics2D.html)以更好地了解它的功能。我还建议查找一些教程，可能[从 Sun 的 2D 图形教程开始](http://java.sun.com/docs/books/tutorial/2d/index.html)。题为“[肮脏的富客户](http://filthyrichclients.org/)”的书也可能会派上用场。

当您最终想要保存修改后的屏幕截图时，可以使用[ImageIO](http://java.sun.com/javase/6/docs/api/javax/imageio/ImageIO.html)类的“写入”方法之一。

这是一个非常简单的、从头到尾的示例。您可以填写任何必要的详细信息。

我希望这会有所帮助！

```
Robot robot = new Robot();

// The hard part is knowing WHERE to capture the screen shot from
BufferedImage screenShot = robot.createScreenCapture(x, y, width, height);
Graphics2D graphics = screenShot.createGraphics();

// Add a label to the screen shot
Color textColor = Color.RED;
graphics.setColor(textColor);
graphics.drawString("Some text", textX, textY);

// Save your screen shot with its label
ImageIO.save(screenShot, "png", new File("myScreenShot.png")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-21T21:06:13.510

```
Robot r = new Robot();
Toolkit t = Toolkit.getDefaultToolkit();
Dimension d = t.getScreenSize();
Image i = r.createScreenCapture( 0, 0, d.width, d.height ); 
```

应该为您提供整个屏幕的完整图像。但是，如果您有多个显示器，不确定这是否能让您得到所有​​的东西......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-08T14:21:25.940

使用此代码，我可以在 windows10 中制作某些窗口的屏幕，不要忘记依赖关系。

致谢：[Windows：如何获取所有可见窗口的列表？](https://stackoverflow.com/questions/3188484/windows-how-to-get-a-list-of-all-visible-windows)

```
<dependency>
    <groupId>net.java.dev.jna</groupId>
    <artifactId>jna</artifactId>
    <version>4.5.0</version>
</dependency> 
```

代码：

```
import java.awt.AWTException;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

import javax.imageio.ImageIO;

import com.sun.jna.Native;
import com.sun.jna.Structure;
import com.sun.jna.win32.StdCallLibrary;

public class Main {
    public static void main(String[] args) throws AWTException, IOException {

        int hWnd = User32.instance.FindWindowA(null, "Minesweeper X");
        WindowInfo w = getWindowInfo(hWnd);
        User32.instance.SetForegroundWindow(w.hwnd);
        BufferedImage createScreenCapture = new Robot().createScreenCapture(new Rectangle(w.rect.left, w.rect.top, w.rect.right - w.rect.left, w.rect.bottom - w.rect.top));
        ImageIO.write(createScreenCapture, "png", new File("screen.png"));

        // listAllWindows();
    }

    private static void listAllWindows() throws AWTException, IOException {
        final List<WindowInfo> inflList = new ArrayList<WindowInfo>();
        final List<Integer> order = new ArrayList<Integer>();
        int top = User32.instance.GetTopWindow(0);
        while (top != 0) {
            order.add(top);
            top = User32.instance.GetWindow(top, User32.GW_HWNDNEXT);
        }

        User32.instance.EnumWindows(new WndEnumProc() {
            public boolean callback(int hWnd, int lParam) {
                WindowInfo info = getWindowInfo(hWnd);
                inflList.add(info);
                return true;
            }

        }, 0);
        Collections.sort(inflList, new Comparator<WindowInfo>() {
            public int compare(WindowInfo o1, WindowInfo o2) {
                return order.indexOf(o1.hwnd) - order.indexOf(o2.hwnd);
            }
        });
        for (WindowInfo w : inflList) {
            System.out.println(w);
        }
    }

    public static  WindowInfo getWindowInfo(int hWnd) {
        RECT r = new RECT();
        User32.instance.GetWindowRect(hWnd, r);
        byte[] buffer = new byte[1024];
        User32.instance.GetWindowTextA(hWnd, buffer, buffer.length);
        String title = Native.toString(buffer);
        WindowInfo info = new WindowInfo(hWnd, r, title);
        return info;
    }

    public static interface WndEnumProc extends StdCallLibrary.StdCallCallback {
        boolean callback(int hWnd, int lParam);
    }

    public static interface User32 extends StdCallLibrary {
        public static final String SHELL_TRAY_WND = "Shell_TrayWnd";
        public static final int WM_COMMAND = 0x111;
        public static final int MIN_ALL = 0x1a3;
        public static final int MIN_ALL_UNDO = 0x1a0;

        final User32 instance = (User32) Native.loadLibrary("user32", User32.class);

        boolean EnumWindows(WndEnumProc wndenumproc, int lParam);

        boolean IsWindowVisible(int hWnd);

        int GetWindowRect(int hWnd, RECT r);

        void GetWindowTextA(int hWnd, byte[] buffer, int buflen);

        int GetTopWindow(int hWnd);

        int GetWindow(int hWnd, int flag);

        boolean ShowWindow(int hWnd);

        boolean BringWindowToTop(int hWnd);

        int GetActiveWindow();

        boolean SetForegroundWindow(int hWnd);

        int FindWindowA(String winClass, String title);

        long SendMessageA(int hWnd, int msg, int num1, int num2);

        final int GW_HWNDNEXT = 2;
    }

    public static class RECT extends Structure {
        public int left, top, right, bottom;

        @Override
        protected List<String> getFieldOrder() {
            List<String> order = new ArrayList<>();
            order.add("left");
            order.add("top");
            order.add("right");
            order.add("bottom");
            return order;
        }
    }

    public static class WindowInfo {
        int hwnd;
        RECT rect;
        String title;

        public WindowInfo(int hwnd, RECT rect, String title) {
            this.hwnd = hwnd;
            this.rect = rect;
            this.title = title;
        }

        public String toString() {
            return String.format("(%d,%d)-(%d,%d) : \"%s\"", rect.left, rect.top, rect.right, rect.bottom, title);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-31T02:23:13.990

也许你可以通过允许用户选择他想要截屏的区域来解决机器人缺乏知道窗口边界的能力。

你有两种方法，如果选项是全屏你不需要担心，按照前面描述的机器人方法。

如果申请是针对所需区域：

1.  启动所需的应用程序。

2.  获取桌面的全屏。

3.  使用屏幕截图作为背景创建一个全屏应用程序，仅允许用户选择要捕获图像的区域（您从一个小方块开始，让用户拖动直到他创建所需的屏幕截图）

4.  将此信息传递给机器人并从该区域截取屏幕截图。

像这样的东西：

[替代文字 http://img136.imageshack.us/img136/8622/screencapturebb3.png](http://img136.imageshack.us/img136/8622/screencapturebb3.png)

如果您不喜欢使用完整屏幕截图作为背景的选项，您可以使用[透明窗口](http://java.sun.com/developer/technicalArticles/GUI/translucent_shaped_windows/)。

并做同样的事情:-)

啊，第二个选择是尝试识别边界分析图像，但老实说，我认为这不值得。

还有第三种选择，但是是个秘密。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-21T10:48:41.087

也许[java.awt.Robot](http://java.sun.com/javase/6/docs/api/java/awt/Robot.html)类可以帮助截屏，尽管我认为它不能定位单个窗口。至于这些“调用”，Robot 类也可以调用鼠标点击和按键，如果这就是你的意思的话。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-21T09:41:04.343

您需要提供更具体的信息才能获得有意义的帮助。首先，这需要在哪些操作系统上运行？您是否需要捕获单个窗口或整个显示器的内容（您在原始帖子中使用了含糊不清的术语“其他应用程序的选定屏幕”）。当您“将标注添加到捕获的屏幕”时，您具体想看到什么？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-21T12:10:09.363

如果您想截取另一个非Java 应用程序代码的特定窗口的屏幕截图，我认为您将不得不编写一些本机（即非Java）代码。Java 应用程序和非 Java 应用程序在这种级别上的交互是困难的。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2010-12-28T10:42:44.980

用于在 Java 中捕获屏幕截图的代码，

[http://www.codinguide.com/2010/04/capture-screen-shot-from-java.html](http://www.codinguide.com/2010/04/capture-screen-shot-from-java.html)

# sql-server - 从另一台机器上的另一个存储过程中调用存储过程

> ID：464609
> 
> 赞同：1
> 
> 时间：2009-01-21T09:40:18.213
> 
> 标签：sql-server

我正在使用 SQL Server 2000。我在机器 A 上有一个存储过程。我想从机器 B 上的存储过程中调用这个存储过程。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T09:54:10.510

您可以使用 SQL Server 的[链接服务器功能](http://msdn.microsoft.com/en-us/library/aa213778.aspx)。

> 链接服务器配置允许 Microsoft SQL Server 对不同服务器上的 OLE DB 数据源执行命令。链接服务器具有以下优势：
> 
> *   远程服务器访问
>     
>     
> *   能够在整个企业的异构数据源上发布分布式查询、更新、命令和事务。
>     
>     
> *   以类似方式处理不同数据源的能力。

调用可能如下所示：

```
 exec MyRemoteServer.MyDB.dbo.sp_MyStoredProc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T09:48:23.330

阅读这篇[博文](http://blog.sqlauthority.com/2007/10/06/sql-server-executing-remote-stored-procedure-calling-stored-procedure-on-linked-server/)。本质上，如果服务器已经设置为链接服务器，您可以使用 EXEC RemoteServer.DatabaseName.DatabaseOwner.StoredProcedureName

# sql-server - 如何在 SSRS 报告正文中获取 TotalPages？

> ID：464614
> 
> 赞同：5
> 
> 时间：2009-01-21T09:41:50.053
> 
> 标签：sql-server, reporting-services

有什么方法可以获取 ssrs 报告正文中的总页数？我尝试了不同的方法，但无法在报告正文中获取页码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-03T00:47:28.430

我认为不可能按照您的要求进行操作。

该`Globals!TotalPages`值仅在报表主体完成呈现后才可用，在此之前服务器将不知道报表中的总页数。这就是当您尝试在报告正文中
引用时会产生错误的原因。`TotalPages`您将只能在页眉或页脚中使用此值。

# php - 动态背景图片 PHP GD

> ID：464616
> 
> 赞同：0
> 
> 时间：2009-01-21T09:42:57.337
> 
> 标签：php, resize, background, gd, resolution

**问题** 基本上，不可能以正确的方式使用带有背景图像的全尺寸照片。不同的分辨率、宽屏等。我正在寻找的是针对这个问题的 JS/PHP GD 解决方案。

**技术** 据我所知，它将如下。Javascript 查找可用的屏幕尺寸（浏览器窗口）或屏幕分辨率。将其解析为 PHP GD。在 FTP 上，您将获得高分辨率图像（例如 1600x1200）。PHP GD 根据 JS 解析的信息对其进行缩放。这也必须对调整大小起作用。

由于我“只是”一个简单的设计师，我缺乏 JS/PHP 让我在这个问题上丧命。

如果有人可以帮助我提供适当的解决方案，我很乐意在完成后将它们与我的新网站上的朋友链接。在此先感谢荷兰的厚爱。

菲尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T10:03:21.787

> 基本上，不可能以正确的方式使用背景图像。

我知道这是您的意见，但网络的其余部分似乎不同意您的看法。他们让它发挥作用。但这可能不是这里的主要问题。

为每个用户调整背景大小，地狱，如果你不缓存，每个请求都会在一纳秒内摧毁你的服务器。GD 调整大小很昂贵，如果这是在共享主机上，您最终会让您的网站启动它。如果同一台服务器上还有其他站点，它们会缓慢爬行。

即使您可以将足够多的煤铲到服务器中，它也会带来非常不可靠的用户体验。浏览器不仅能够下载文件，还必须等待 PHP 生成图像，然后才能下载。

如果我在大屏幕上加载这个网站怎么办？我这里有一个可能的 ~3840*1200 分辨率。即使你不放大它，我也必须下载完整版。大屏幕尺寸并不意味着我的计算机上有多余的光纤。

但是，综上所述，这当然是可能的。我建议你从 jQuery 开始。它使挂钩到 window -load 和 -resize 事件以及动态更改 CSS 变得非常简单。可以通过几个简单的谷歌来完成细节：“php resize image”、“jquery onresize”和“jquery change background”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T11:08:41.843

您还可以制作几个 css 样式表来匹配某些分辨率。这个 UNTESTED 示例可能会给您一些帮助。

```
<html>
  <head>
    <title></title>
    <link rel="stylesheet" id="styleSwitch" href="" />

    <script  type="text/javascript">
      function getStyle(){
      var theStyleLink = document.getElementById('styleSwitch');­

     if (window.innerWidth < 810){
        theStyleLink.setAttribute("href", ­ "small-window.css");

     }
     else {
       theStyleLink.setAttribute("href", ­ "large-window.css");

       }
     }
   </script>
 </head>
 <body onload="getStyle();">

 </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-10T19:03:51.393

你可以完全用 CSS 做到这一点..

查看包含和覆盖：[https ://developer.mozilla.org/en-US/docs/Web/CSS/background-size](https://developer.mozilla.org/en-US/docs/Web/CSS/background-size)

奖金：http: [//blog.geneticcoder.com/2015/12/09/rotate-and-cross-fade-background-images-with-jquery-css-background-opacity-trick/](http://blog.geneticcoder.com/2015/12/09/rotate-and-cross-fade-background-images-with-jquery-css-background-opacity-trick/)

# visual-studio - 插入 Tracepoint：如何设置默认消息？

> ID：464617
> 
> 赞同：2
> 
> 时间：2009-01-21T09:43:11.080
> 
> 标签：visual-studio, debugging, trace, breakpoints

在 MS VisualStudio（我使用的是 2005）中，可以右键单击某个代码文件并在此处“插入跟踪点”。

命中跟踪点时打印的默认消息是`Function: $FUNCTION, Thread: $TID $TNAME`. 我宁愿让它不同（例如`Thread: $TID [{(void*)this}::$FUNCTION]`）。现在只需输入所需的信息就很容易了，但我不想在余下的职业生涯中这样做。

如何设置默认跟踪点消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-22T11:40:11.653

进入注册表并更改键 HKCU\Software\Microsoft\VisualStudio\8.0\Debugger\DefaultTracepointMessage 的值。

# c++ - 在 OSX 上相当于 Windows 的 QueryPerformanceCounter 是什么？

> ID：464618
> 
> 赞同：28
> 
> 时间：2009-01-21T09:43:47.317
> 
> 标签：c++, c, windows, unix, porting

我正在将一个库从 Windows 移植到 *NIX（当前为 OSX），现在有没有人可以使用什么函数来代替 Microsoft 的 QueryPerformanceCounter 和 QueryPerformanceFrequency？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2011-05-12T20:29:57.270

在 OSX上`mach_absolute_time`，`mach_timebase_info`是 Win32 QueryPerformance* 函数的最佳等效项。

请参阅[http://developer.apple.com/library/mac/#qa/qa1398/_index.html](http://developer.apple.com/library/mac/#qa/qa1398/_index.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-21T10:10:03.770

[http://www.tin.org/bin/man.cgi?section=3&topic=clock_gettime](http://www.tin.org/bin/man.cgi?section=3&topic=clock_gettime) （以及那里提到的其他功能） - 它是 Posix！如果 HPET 不存在，将退回到更差的计数器。（虽然应该不是问题）

[http://en.wikipedia.org/wiki/High_Precision_Event_Timer](http://en.wikipedia.org/wiki/High_Precision_Event_Timer)

分辨率应约为+10Mhz。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-21T10:31:52.883

尝试使用 boost 的[ptime](http://www.boost.org/doc/libs/1_37_0/doc/html/date_time/posix_time.html)进行便携式高分辨率计时。

**更新**（提示，2 年后，由 Mark 在下面的评论）：

这些天我会使用`std::chrono::high_resolution_clock`; [例子](https://bitbucket.org/timday/lru_cache/src/04389f1c73e9/test/scoped_timer.h)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-12-12T04:33:17.753

他询问了 OS X。使用 CoreAudio 的这些 API：

```
AudioConvertHostTimeToNanos(AudioGetCurrentHostTime()) 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-01-21T10:11:40.943

回到过去，您要么拥有 uclock，要么深入研究汇编程序来阅读[RDTSC](http://www.google.se/search?hl=en&safe=off&rlz=1C1GGLS_svSE292SE305&q=RDTSC&btnG=Search)。

G。

# sql - 如何让活动用户通过 SQL 连接到 postgreSQL 数据库？

> ID：464623
> 
> 赞同：96
> 
> 时间：2009-01-21T09:46:48.403
> 
> 标签：sql, postgresql, active-users

如何让活动用户通过 SQL 连接到 postgreSQL 数据库？这可能是用户 ID 或用户数。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2009-01-21T09:50:46.400

（问题）你没有得到那个信息吗

> 从[pg_user 中](http://www.postgresql.org/docs/current/interactive/user-manag.html#DATABASE-USERS)选择 * ；

或使用视图[pg_stat_activity](http://www.postgresql.org/docs/current/interactive/monitoring-stats.html)：

```
select * from pg_stat_activity; 
```

**添加：**

观点说：

> 每个服务器进程一行，显示数据库 OID、数据库名称、进程 ID、用户 OID、**用户名**、当前查询、查询的等待状态、当前查询开始执行的时间、进程启动的时间以及**客户端的地址和端口号**。除非参数 stats_command_string 已关闭，否则报告当前查询数据的列可用。此外，这些列仅在检查视图的用户是超级用户或与拥有所报告进程的用户相同时才可见。

您不能过滤并获取该信息吗？这将是数据库上的当前用户，您可以使用开始执行时间来获取最近 5 分钟的所有查询......

类似的东西。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2009-01-21T09:58:02.907

使用 balexandre 的信息：

```
SELECT usesysid, usename FROM pg_stat_activity; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-07-18T05:54:21.837

OP 询问连接*到特定数据库*的用户：

```
-- Who's currently connected to my_great_database?
SELECT * FROM pg_stat_activity 
  WHERE datname = 'my_great_database'; 
```

这将为您[提供各种有趣的信息](https://www.postgresql.org/docs/current/monitoring-stats.html#PG-STAT-ACTIVITY-VIEW)（正如其他人所提到的），例如

*   用户 ID（列`usesysid`）
*   用户名 ( `usename`)
*   客户端应用程序名称（`appname`），如果它设置该变量 -`psql`这样做:-)
*   IP 地址 ( `client_addr`)
*   它处于什么状态（与状态和等待状态相关的几列）
*   和大家最喜欢的，当前正在运行的 SQL 命令 ( `query`)

# php - php变量问题

> ID：464627
> 
> 赞同：0
> 
> 时间：2009-01-21T09:49:28.150
> 
> 标签：php

我有以下 php 代码，为简洁起见已被剪掉。在声明 $lastImg 后，我遇到了代码问题，特别是 size 似乎从未被分配任何值，因此 outputwidth 和 outputheight 保持空白。我一直无法找出造成这种情况的原因。

pic_url 只是数据库中的一个字符串，并且绝对指向一个有效的图像。当我在没有代码调整大小的情况下运行我的页面时，图像会完美显示。

```
<?php
header("Content-Type: text/html; charset=utf-8");

if (isset($_GET["cmd"]))
    $cmd = $_GET["cmd"];
else
    die("You should have a 'cmd' parameter in your URL");

$pk = $_GET["pk"];
$con = mysql_connect("localhost", "someuser", "notreal");

if(!$con)
{
    die('Connection failed because of' . mysql_error());
}

mysql_query('SET NAMES utf8'); 
mysql_select_db("somedb",$con);

if($cmd == "GetAuctionData")
{
    $sql="SELECT * FROM AUCTIONS WHERE ARTICLE_NO ='$pk'";
    $sql2="SELECT ARTICLE_DESC FROM AUCTIONS WHERE ARTICLE_NO ='$pk'";
    $htmlset = mysql_query($sql2);
    $row2 = mysql_fetch_array($htmlset);

    $result = mysql_query($sql);
    while ($row = mysql_fetch_array($result))
    {
        $columns = array('FINISHED', 'WATCH', 'PRIVATE_AUCTION', 'REVISED', 'PAYPAL_ACCEPT', 'PRE_TERMINATED', 'PIC_XXL', 'PIC_DIASHOW');
        foreach($columns as $column)
        {
            $$column = $row[$column] ? 'YES' : 'NO';
        }

        $lastImg = $row['PIC_URL']; 
        $maxWidth  = 250;
        $maxHeight = 300;

            $size = getimagesize($_SERVER['DOCUMENT_ROOT'] . $lastImg);
var_dump($size);
echo "SIZE = ".$size."";
if ($size) {
    $imageWidth  = $size[0];
    $imageHeight = $size[1];
    $wRatio = $imageWidth / $maxWidth;
    $hRatio = $imageHeight / $maxHeight;
    $maxRatio = max($wRatio, $hRatio);
else {
die(print_r(error_get_last())); }
else if ($maxRatio > 1) {
        $outputWidth = $imageWidth / $maxRatio;
        $outputHeight = $imageHeight / $maxRatio;
    } else {
        $outputWidth = $imageWidth;
        $outputHeight = $imageHeight;
    }
}

        echo "<h1>".$row['ARTICLE_NAME']."</h1>
            <div id='rightlayer'>
            <img src='".$lastImg."' width='".$outputWidth."' height='".$outputHeight."'>
            </div>";
    }
}

mysql_free_result($result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T10:01:24.833

我不得不说它看起来像 $row['PIC_URL'] 可能没有指向一个有效的图像，这是 getimagesize 失败的唯一原因。AUCTIONS 中的数据库结构是什么样的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T10:01:41.353

第一个。做一个

```
print_r($row) 
```

就在你的下方

```
while ($row = mysql_fetch_array($result)) 
```

并查看是否在那里设置了数组 PIC_URL

第二你真的应该做一个安全的查询。

```
$sql="SELECT * FROM AUCTIONS WHERE ARTICLE_NO ='$pk'"; 
```

应该

```
$sql = sprintf("SELECT * FROM AUCTIONS WHERE ARTICLE_NO = %d", mysql_real_escape_string($pk)); 
```

与其他 SQL 查询相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T10:05:12.127

您有一些相互冲突的事情：

```
$size = getimagesize($lastImg);

echo "<img src='".$lastImg."' ...>" 
```

`getimagesize`需要一个文件名，而`<img>`需要一个 URL。

你可以尝试这样的事情：

```
$root = str_replace($_SERVER['SCRIPT_NAME'], '', $_SERVER['SCRIPT_FILENAME']);

$size = getimagesize($root . $lastImg); 
```

[**编辑**]对不起。`DOCUMENT_ROOT`不对。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T10:09:17.470

尝试：

```
$lastImg = $row['PIC_URL'];
var_dump($row);
die(); 
```

查看 $row['PIC_URL'] 中是否有任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-21T10:17:50.540

首先，要获得正确的错误消息，请将您的代码更改为：

```
$size = getimagesize($lastImg);
echo "SIZE = ".$size."";
if ($size) {
    $imageWidth  = $size[0];
    $imageHeight = $size[1];
    $wRatio = $imageWidth / $maxWidth;
    $hRatio = $imageHeight / $maxHeight;
    $maxRatio = max($wRatio, $hRatio);

    if ($maxRatio > 1) {
        $outputWidth = $imageWidth / $maxRatio;
        $outputHeight = $imageHeight / $maxRatio;
    } else {
        $outputWidth = $imageWidth;
        $outputHeight = $imageHeight;
    }
} else {
    die(print_r(error_get_last()));
} 
```

之后，我们可以查看错误并尝试进一步调查。

# vb.net - 为什么我会收到错误：System.Runtime.InteropServices.COMException？

> ID：464631
> 
> 赞同：2
> 
> 时间：2009-01-21T09:51:11.453
> 
> 标签：vb.net, office-interop

我正在使用 VB.NET 在 Microsoft 中创建标签。这是我的代码：

```
Public Sub CreateLabel(ByVal StrFilter As String, ByVal Path As String)
    WordApp = CreateObject("Word.Application")
    ''Add a new document.
    WordDoc = WordApp.Documents.Add()
    Dim oConn As SqlConnection = New SqlConnection(connSTR)
    oConn.Open()

    Dim oCmd As SqlCommand
    Dim oDR As SqlDataReader
    oCmd = New SqlCommand(StrFilter, oConn)
    oDR = oCmd.ExecuteReader

    Dim intI As Integer
    Dim FilePath As String = ""
    With WordDoc.MailMerge
        With .Fields
            Do While oDR.Read
                For intI = 0 To oDR.FieldCount - 1
                    .Add(WordApp.Selection.Range, oDR.Item(intI))
                Next
            Loop
        End With
        Dim objAutoText As Word.AutoTextEntry = WordApp.NormalTemplate.AutoTextEntries.Add("MyLabelLayout", WordDoc.Content)
        WordDoc.Content.Delete()
        .MainDocumentType = Word.WdMailMergeMainDocType.wdMailingLabels
        FilePath = CreateSource(StrFilter)
        .OpenDataSource(FilePath)
        Dim NewLabel As Word.CustomLabel = WordApp.MailingLabel.CustomLabels.Add("MyLabel", False)
        WordApp.MailingLabel.CreateNewDocument(Name:="MyLabel", Address:="", AutoText:="MyLabelLayout")
        objAutoText.Delete()

        .Destination = Word.WdMailMergeDestination.wdSendToNewDocument
        WordApp.Visible = True
        .Execute()
    End With
    oConn.Close()
    WordDoc.Close()
End Sub

Private Function CreateSource(ByVal StrFilter As String) As String
    Dim CnnUser As SqlConnection = New SqlConnection(connSTR)
    Dim sw As StreamWriter = File.CreateText("C:\Mail.Txt")
    Dim Path As String = "C:\Mail.Txt"
    Dim StrHeader As String = ""
    Try
        Dim SelectCMD As SqlCommand = New SqlCommand(StrFilter, CnnUser)
        Dim oDR As SqlDataReader
        Dim IntI As Integer
        SelectCMD.CommandType = CommandType.Text
        CnnUser.Open()
        oDR = SelectCMD.ExecuteReader
        For IntI = 0 To oDR.FieldCount - 1
            StrHeader &= oDR.GetName(IntI) & " ,"
        Next
        StrHeader = Mid(StrHeader, 1, Len(StrHeader) - 2)
        sw.WriteLine(StrHeader)
        sw.Flush()
        sw.Close()
        StrHeader = ""
        Do While oDR.Read
            For IntJ As Integer = 0 To oDR.FieldCount - 1
                StrHeader &= oDR.GetString(IntJ) & " ,"
            Next
        Loop
        StrHeader = Mid(StrHeader, 1, Len(StrHeader) - 2)
        sw = File.AppendText(Path)
        sw.WriteLine(StrHeader)
        CnnUser.Close()
        sw.Flush()
        sw.Close()
    Catch ex As Exception
        MessageBox.Show(ex.Message, "TempID", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try
    Return Path
End Function 
```

现在，当我运行程序时，我收到了这个错误。我努力尝试但无法找到错误可能是什么问题：

> System.Runtime.InteropServices.COMException --> 水平和垂直间距必须分别大于或等于标签宽度和高度。

即使我尝试以编程方式设置水平和垂直间距，它也会给出相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T15:02:39.810

Make sure that you have a default printer set up for the user account that the application runs under. Might not be relevant but I have had various unusual problems following that omission.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-10-01T13:39:26.503

您是否安装了 Office 主互操作程序集？（适当缩写为 PIA）

试试[这个](http://msdn.microsoft.com/en-us/library/kh3965hw%28VS.80%29.aspx)

# windows - 监控自己进程中的内存使用情况

> ID：464632
> 
> 赞同：1
> 
> 时间：2009-01-21T09:52:30.263
> 
> 标签：windows, winapi, memory, windows-mobile

让我们暂时把海森堡放在一边。

我将如何从我自己的进程中监控该进程正在使用多少内存？

（我可能故意低估了这个问题，梦想着有创意的答案......）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-21T10:30:59.143

Quassnoi 是正确的 - 但也可能值得检查我们的这个问题：

[如何从](https://stackoverflow.com/questions/63166/how-to-determine-cpu-and-memory-consumption-from-inside-a-process)包含代码示例的进程内部确定 CPU 和内存消耗

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T10:17:57.093

采用[`GetProcessMemoryInfo()`](http://msdn.microsoft.com/en-us/library/ms683219.aspx)

`WorkingSetSize`in`PROCESS_MEMORY_COUNTERS_EX`似乎是你想要的。

# tdd - 您是否使用 TDD 进行调试修复？

> ID：464639
> 
> 赞同：9
> 
> 时间：2009-01-21T09:56:45.107
> 
> 标签：tdd, debugging, integration-testing

我知道有很多关于 TDD 的东西，我也在尝试学习实践。但我想知道对你的错误修复进行 TDD 是否是个好主意？

我正在考虑找到错误并缩小范围。编写单元测试以确保它现在可以通过它之前引起的任何问题。为其他可破坏的条件编写更多单元测试。最后编写单元测试来测试集成测试，因为在此之前我们没有任何单元测试，所以每当我修复错误时，我总是担心我可能会意外破坏某些东西。

1.  那么TDD也适合调试吗？
2.  或者是否有其他方法或资源/书籍对此目的更有用？
3.  正如我上面提到的，我更关心集成测试部分。我正在寻找与 LAMP/Axkit/Perl 相关的方法中的任何内容。

谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-01-21T10:03:57.293

1.  编写一个因错误而失败的测试。
2.  修复代码中的错误。
3.  重新运行测试。
4.  重新运行所有测试。

所以 - 是的 - 非常如此。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-21T10:02:54.923

当测试人员发现一个错误时，我通常会为它编写一个单元测试。当测试成功时，我知道该错误已修复，并且将来总会再次被覆盖。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-21T10:08:10.827

当您的系统中有错误时，最好在 TDD 中编写一个发现错误的测试（即证明错误的红色测试）。当您必须修复错误时，测试最终应该变为绿色。如果它们足够接近，找出任何其他错误可能是个好主意。

关于调试，应该使用 TDD 来利用远离程序员的调试会话。如果您不知道某个错误在哪里，您仍然可以进行调试，但是如果您有一个具有足够粒度的回归测试套件，则更容易查明错误。

您必须记住，TDD 更多的是关于[单元测试](https://stackoverflow.com/questions/61400/what-makes-a-good-unit-test)而不是集成测试。编写集成测试没有任何问题，因为它们是一种健全性检查，可确保您的应用程序或被测系统正常工作。

一本关于使用 xUnit 框架进行测试的书是[xUnit Patterns 这本书](http://xunitpatterns.com/)，它足够通用，可以使用任何单元测试框架（即使是[PerlUnit](http://perlunit.sourceforge.net/)，我猜也是）一本你可以使用 xUnit 框架做的有趣技巧的食谱。

[更新： Extreme Perl](http://www.extremeperl.org/bk/unit-testing)有一章关于 perl 中的单元测试。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-21T10:05:08.960

简而言之，答案是肯定的。这样做的基本结构是编写一个测试用例来模拟错误并使测试用例失败。然后修复将通过测试用例的错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-21T10:11:45.937

是的。当然，您在发布的 TDD 期间执行的所有测试都将添加到回归测试套件中。但是，在一个错误的情况下，那个回归套件显然不够详细。

修复错误的第一步是复制它，这**就是**TDD。一旦你找到了一个复制错误的测试用例，你可以根据需要扩展它（以捕捉同一类的其他明显问题），但我不倾向于做很多扩展，因为我们有特定的周转时间修复一个错误。

修复该错误后，将测试用例添加到回归套件中。我们的想法是不断向回归套件中添加测试用例，用于发布和错误修复，以提供很好的覆盖率。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-21T10:03:52.690

在修复错误时，我总是在实际代码之前编写测试。

这样我就有了一个工作代码的期望示例——我可以只专注于使这个测试（以及所有其他测试，用于回归）通过。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-21T10:47:51.230

是的，但要小心，如果你写的 bug 和我一样多，你很快就会有大量的测试来覆盖你写的所有 bug，然后修复。

这将意味着测试运行会变慢，并且行为意图会因错误测试而变得混乱。

您可以将这些测试在逻辑上分开或重新访问您原来的一组*指定的行为检查*（阅读测试），看看您是否真的涵盖了所有预期的行为。

我认为区分两者很重要。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-21T09:58:38.317

我认为您最初会修复错误，然后回归测试将由 TDD 组成。

# sql-server - 如何仅在 tsql 中从计数扩展行

> ID：464642
> 
> 赞同：3
> 
> 时间：2009-01-21T09:58:11.547
> 
> 标签：sql-server, tsql, common-table-expression

我有一个包含数字和范围值的表。例如，一列的值为 40，另一列的值为 100，这意味着从 40 开始，范围有 100 个以 139 结尾的值，包括数字 40。我想编写一个 tsql 语句，将我的数据扩展为单个行。

我想我需要一个 cte，但不知道如何实现这一点。

注意：扩展时我期待 7m 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T12:05:14.537

如果你想要 CTE，这里是一个例子：

初始插入：

```
insert into rangeTable (StartValue, RangeValue)
select 40,100
union all select 150,10
go 
```

查询：

```
with r_CTE (startVal, rangeVal, generatedVal)
as
(
    select r.startValue, r.rangeValue, r.startValue
    from rangeTable r
    union all
    select r.startValue, r.rangeValue, generatedVal+1
    from rangeTable r
    inner join r_CTE rc 
        on r.startValue = rc.startVal
        and r.rangeValue = rc.rangeVal
        and r.startValue +  r.rangeValue > rc.generatedVal + 1
)
select * from r_CTE
order by startVal, rangeVal, generatedVal 
```

请注意，默认的最大递归数为 100。您可以通过调用将其更改为最大值 32767

```
option (maxrecursion 32767) 
```

或无限制

```
option (maxrecursion 0) 
```

详见[BOL](http://msdn.microsoft.com/en-us/library/ms175972.aspx) _

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T10:53:32.873

我不知道如何使用公用表表达式来完成，但这里有一个使用临时表的解决方案：

```
 SET NOCOUNT ON

   DECLARE @MaxValue INT
   SELECT @MaxValue = max(StartValue + RangeValue) FROM MyTable

   DECLARE @Numbers table ( 
      Number INT IDENTITY(1,1) PRIMARY KEY 
   )

   INSERT @Numbers DEFAULT VALUES 

   WHILE COALESCE(SCOPE_IDENTITY(), 0) <= @MaxValue 
      INSERT @Numbers DEFAULT VALUES 

    SELECT n.Number
    FROM   @Numbers n
    WHERE  EXISTS(
        SELECT *
        FROM   MyTable t
        WHERE  n.Number BETWEEN t.StartValue AND t.StartValue + t.RangeValue - 1
    )

    SET NOCOUNT OFF 
```

如果 Numbers 表是常规表，则可以优化。因此，您不必在每次调用时填写临时表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T10:41:22.193

你可以试试这种方法：

```
create function [dbo].[fRange](@a int, @b int)
    returns @ret table (val int)
as 
begin
    declare @val int
    declare @end int
    set @val = @a
    set @end = @a + @b
    while @val < @end
    begin
        insert into @ret(val)
        select @val
        set @val = @val+1
    end
return
end

go

declare @ranges table(start int, noOfEntries int)

insert into @ranges (start, noOfEntries)
select 40,100
union all select 150, 10

select * from @ranges r
    cross apply dbo.fRange(start,noOfEntries ) fr 
```

不是最快的，但应该可以

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T11:05:42.927

我会做一些与 splattne 略有不同的事情......

```
SET NOCOUNT ON

DECLARE @MaxValue INT
DECLARE @Numbers table (
    Number INT IDENTITY(1,1) PRIMARY KEY CLUSTERED
 )

SELECT @MaxValue = max(RangeValue) FROM MyTable
INSERT @Numbers DEFAULT VALUES

WHILE COALESCE(SCOPE_IDENTITY(), 0) <= @MaxValue
    INSERT @Numbers DEFAULT VALUES

SELECT
    t.startValue + n.Number
FROM
    MyTable t
INNER JOIN
    @Numbers n
        ON n.Number < t.RangeValue

SET NOCOUNT OFF 
```

这将最大限度地减少您需要插入表变量的行数，然后使用连接将一个表“乘以”另一个表......

根据查询的性质，源表不需要索引，但“数字”表应该有索引（或主键）。聚集索引指的是它们在磁盘上的存储方式，所以我看不到 CLUSTERED 在这里是相关的，但我把它留在了我刚从 Splattne 复制的地方。

（像这样的大连接可能很慢，但仍然比数百万次插入快得多。）

# javascript - 调试 IE6 的 javascript

> ID：464644
> 
> 赞同：13
> 
> 时间：2009-01-21T09:59:23.120
> 
> 标签：javascript, css, debugging, internet-explorer-6, cross-browser

firebug 是一个非常有用的工具，我不能认为自己没有它。我还下载了 js 文件，它可以帮助您在使用 IE6 时获得类似的功能，希望它可以帮助我解决一些问题，但是，我收到的消息不是很友好，例如：

“预期 ':' (default2.aspx,16)” - 在第 16 行，没有什么可以期待“：”

或者

第 198 行的“对象不支持此属性或方法（default2.aspx,198）”没有什么有趣的东西需要任何支持。

我的网站在 IE6 中看起来像一个不同的网站。大多数 css 不起作用，一些 jquery 函数不起作用，我需要让这个网站在 IE6 中工作。任何帮助将不胜感激；

*   如何知道消息（如上面的消息）在 IE6 中的含义以及如何在 IE6 中有效地调试 js？

*   css 兼容性从哪里开始。例如，我应该为不同的浏览器创建不同的 css 文件并通过检测浏览器来加载它们吗？还是有任何常见问题和技巧？

我迷路了，所以请给我任何开始的方向..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-21T10:15:06.427

您在 IE6 中调试 javascript：-

[微软脚本调试器](http://www.microsoft.com/downloads/details.aspx?familyid=2F465BE0-94FD-4569-B3C4-DFFDF19CCD99&displaylang=en)

[QuirksMode](http://www.quirksmode.org/)网站是一个有用的网站，可用于确定哪些 CSS 位是由哪个浏览器以何种方式实现的。注意 IE6“标准”模式渲染是出了名的错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-21T15:40:32.653

你可以试试[Companion JS](http://www.my-debugbar.com/wiki/CompanionJS/HomePage)。它在调试方面非常好。它还需要 Microsoft Script Debugger。

Companion JS 谢天谢地支持“console.log”（通过 firebug）。它是免费工具。[Debug-bar](http://www.debugbar.com/)是一个很好的 CSS-DOM-Javascript 调试器，但它不是免费用于商业目的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-21T14:19:01.287

我使用的两个工具是：

1.  [网页开发助手](http://projects.nikhilk.net/WebDevHelper)
2.  [IE 开发者工具栏](http://www.microsoft.com/en-us/download/details.aspx?id=18359)

它们在某种程度上重复了彼此的功能，但每一个都可以用于不同的任务。Web Development Helper 有一个内置的 JavaScript 控制台，它不如 Firebug，但总比没有好，而且比 MS Script Debugger 更容易。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-21T14:19:58.073

> “预期 ':' (default2.aspx,16)” - 在第 16 行，没有什么可以期待“：”

错误不会出现在 .aspx 文件的第 16 行，甚至可能不会出现在 aspx 文件生成的 HTML 源代码的第 16 行。它将在您链接的 .js 文件之一的第 16 行附近。哪一个？IE不会告诉你。

您可以通过在每个 .js 文件的开头添加额外的行并查看错误行号会发生什么来找出答案，但最好已经安装 Script Debugger。

IE8 终于解决了这个问题。

> 我应该为不同的浏览器创建不同的css文件并通过检测浏览器来加载它们吗？还是有任何常见问题和技巧？

从符合标准的 CSS 和标准模式文档类型开始，并在 Firefox 3、Opera、Safari、Chrome 中进行测试。大多数情况下，它们会给你或多或少相同的结果。现在在 IE7 中测试，希望它能正常工作。

今天比较麻烦的浏览器是IE6。您可能需要为其添加黑客。如果样式表很多，您可以在单独的样式表中执行此操作，或者只是使用“* html”hack 来作为偶尔的规则。

所有旧的黑客，你的盒子模型黑客等等，你都可以忘记。它们仅用于已死的 IE5 和不应该使用的 IE6 Quirks Mode。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-21T14:13:45.247

我使用以下两种方式之一进行 js 调试：Microsoft Script Editor 或[Firebug Lite](http://getfirebug.com/lite.html)。去[这里](http://www.dedestruct.com/2007/12/21/how-to-debug-javascript-in-ie-6-ask-a-question/)了解更多信息。

至于 CSS，我推荐一个[CSS Reset](http://developer.yahoo.com/yui/reset/)。对于 IE6 中的细微差别，请考虑使用[条件注释](http://www.quirksmode.org/css/condcom.html)。

在制作要在多个浏览器中使用的应用程序时，[quirksmode](http://quirksmode.org/)是救命稻草。

编辑：[blackbird](http://www.gscottolson.com/blackbirdjs/)是一个很好的跨浏览器跟踪状态的工具。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-21T14:21:55.743

或进行 AJAX 调用以将调试变量/消息发送到将记录它的 ASP (PHP) 脚本。如果问题是未定义的变量或有类似问题，这将有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-21T15:50:43.410

对于它的价值，我发现使用单独的 js 文件时行号错误要准确得多。

我在开发时仍然使用 IE6 作为我的主要浏览器。它在以后省去了很多麻烦，因为您经常会在此过程的早期发现 CSS 问题。

我还发现使用 JavaScript 记录器发送调试消息很有帮助。这是一堆警报消息的替代方案。就个人而言，我使用[yahoo UI logger](http://developer.yahoo.com/yui/logger/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-14T21:54:48.397

我使用[MS Script Debugger](http://www.microsoft.com/downloads/details.aspx?familyid=2F465BE0-94FD-4569-B3C4-DFFDF19CCD99&displaylang=en)取得了一些成功，还有[IE Developer Toolbar](http://www.microsoft.com/en-us/download/details.aspx?id=18359)和[Firebug Lite](http://getfirebug.com/lite.html)。我最近[了解了](http://www.berniecode.com/blog/2007/03/08/how-to-debug-javascript-with-visual-web-developer-express/) [MS Visual Web Developer Express Edition](http://msdn.microsoft.com/vstudio/express/vwd/)，到目前为止这是一个很大的改进。

# ejb - 有人可以解释ejb中@Remote / @Local 或仅@Stateless 之间的区别吗？

> ID：464660
> 
> 赞同：4
> 
> 时间：2009-01-21T10:04:36.527
> 
> 标签：ejb, local, stateless

估计题主说了。我试过用谷歌搜索这个，但还没有得到我正在寻找的答案。

我有很多只有@Stateless 的EJB。有时我把@Local 放在他们身上，却不知道为什么，以及好处/坏处。我也知道我可以放@Remote，但真的不知道有什么区别。

希望有人能给出清晰的描述，或者指出我的某个地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-21T10:15:25.960

注释是 EJB 3.0 的一部分。例如。@stateless 表示它是一个无状态会话 bean。@local 用于本地接口，@Remote 用于远程 bean 接口。[这里](http://edocs.bea.com/wls/docs100/ejb30/annotations.html#wp1416811)给出了注释的详细描述。不过，要理解这些术语的含义，您应该参考有关 EJB 的手册或书籍。[您可以从这里](http://www.theserverside.com/tt/books/wiley/masteringEJB3/index.tss)下载一本好的 EJB 3.0 书籍。还可以查看 Manning Pub[的 EJB 3 in Action](http://www.manning.com/panda/)。

# programming-languages - 你编程是为了盈利吗？

> ID：464667
> 
> 赞同：9
> 
> 时间：2009-01-21T10:06:12.063
> 
> 标签：programming-languages

我不确定这个问题是否再次被问到，但你会为了经济利益而用一种语言编程吗？甚至更多，因为我们大多数人都使用几种不同的语言编写代码：您是否使用一种您不喜欢的语言工作，但您仍然为了盈利而这样做？如果是这样，您掌握、喜欢并希望在工作中使用的语言是什么？

我目前是一名 python 开发人员，并收到了一份从事 .net 技术（asp.net、mvc、c#）的工作，但来自 unix 背景，我对此保持沉默。另一方面，.net 方面的经济利益更大。此外，我确实更喜欢在 python 中编码而不是在 c# 中，但这只是我的主观感受。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-21T10:28:34.623

我是一名 Java 开发人员（也有 linux 背景）并且我喜欢我目前的工作，所以我可能会再用 Java 编程一段时间。

但老实说，我认为你应该克服你的“宗教”顾虑 :) 学习一门新语言会拓宽你的知识面，而且会很有趣。.NET 还很年轻，因此设计人员有机会从过去学习并正确处理某些在您知道的其他平台/框架/语言中可能会尴尬的事情（我只能判断 java：异常处理很烂，介绍较晚泛型是次优的，swing 使用起来过于困难——仅举几例）。

如果你的新工作不仅提供了学习新技术的可能性，而且意味着更多的钱，那么你很幸运！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-21T10:35:31.100

是的。我是一名顾问，所以我使用客户希望我使用的任何语言进行编程。

我不介意在工作中使用与我“喜欢”不同的语言。因为我也在家里做一些业余编程，所以我可以为这些项目使用我想要的任何语言。对我来说，编程是关于解决问题和创造性的出路，所以实现语言通常并不那么重要。

就个人而言，我认为[可以享受任何语言的编程](http://blog.looplabel.net/2008/08/12/the-programming-high/)。不同的语言和架构提供了不同的优势、劣势和挑战，我已经学会了欣赏它们。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-21T13:28:10.517

盈利 - 是，
只为盈利 - 否

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-21T10:11:37.667

为了真正的利润，[你必须会说 Java](http://www.youtube.com/watch?v=3XGJq8wrw5I)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-21T10:21:45.353

ABAP——SAP 的内部语言。

它是一种乏味的 QBASICy 语言，它支持的 SAP 应用程序臃肿、乏味和迟钝，SAP 项目需要数年令人费解的乏味努力才能实施。

对于任何编程语言的承包商来说，它的每小时/每日费率最高。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-21T11:27:19.403

希望每个人都能达到他们意识到编程语言只是一种编程语言的水平，尽管它们都具有曾经发明的所有语言思想的不同子集，但它们中的大多数（无论如何都是主流思想）“足够好”，可以让你任务完成。这真的不是什么大不了的事。毕竟，你正在考虑在这里找一份工作，所以无论你最终写什么，这可能不是你很关心的东西，所以你为什么要关心你用什么语言写它呢？拿钱，付帐，在家里用你喜欢的语言写你喜欢的东西。

FWIW 我先学了 C，然后是 C++，在大学里我真的很喜欢 SML，但是当我得到第一份编程工作时，是在 VB 中。从那时起，我的大部分编程工作都是在 C# 和 VB.NET 中完成的，但现在我回到了不受管理的世界，混合了 C、Objective-C 和 C++，但我只遇到过一种语言我真的可以完成任何工作：OCCAM。而且我认为我永远不会被要求再次使用它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-21T11:40:55.100

我认为考虑你的长期就业能力也很重要。

您可能决定花费数年时间选择允许您以您喜欢的语言编写代码的角色，但有一天您会发现您拥有许多雇主并不需要的传统技能。另一方面，传统技能可以让你赚很多钱，尽管通常不是无限期的。

我最近发现，6 年的 WinForms、C# .NET 1.1 经验并没有让我很好地适应那些正在寻找具有 ASP.NET 2.0 经验的雇主的面试...

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-21T13:03:08.493

是的，没有。应雇主的要求，我从 .Net 更改为 ABAP，并使用了一年。尽管变化很有趣，但我权衡了我在 .Net 和 ABAP 方面的经验（8 年），并决定我不想浪费这些经验。我一有机会就换了工作。

我想这与你的职业发展方向有很大关系。我会说这在很多方面都是个人决定。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-21T11:19:24.693

我必须更改为使用语言X，平台Y是有原因的

我申请了一份“ASP.Net 程序员”的工作。但是当我第一天去我的办公室时。我的老板告诉我“客户取消了我们的项目”。

所以我的老板指派我使用 Visual C++ 嵌入式在 symbion 上做字典应用程序。

他给了我 4 天的时间来做这个项目，如果我不能完成这个项目，他会解雇我。

我不在乎我必须使用什么编程语言。当我学习新技术时，我也很享受。但是没有时间学习，我别无选择。

所以我只是屈服于信仰。

那么我多次改变我的编程语言的一个原因是有人强迫我改变它。

对于你的问题。

“你掌握、喜欢并想在工作中使用的语言是什么？”

我以前使用过 VB.Net，但现在我更喜欢 c#。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-21T10:08:06.317

是的。Vb.Net 到 C# = 更多的钱和尊重。我发誓人们嘲笑我说我是一个 vb.net 程序员。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-21T10:10:33.957

奇怪的是，我有与斯宾塞相反的经历。我来自 Java/C# 背景，并为一份工作做了六个月的 VB.NET。最终爱上了它并围绕它写了我的整个博客平台......在我和 django 私奔之前，就是这样。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-21T10:12:23.907

很多人还在用 COBOL 编码，相比之下 .NET 就相当不错了。另一方面，我会说你用什么语言编码并不重要，重要的是你的同事是谁。如果他们聪明且友好，那么即使是 PL/I 体验也可能会很愉快。所以决定你是否愿意接受这份工作，而不是语言偏好。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-01-21T10:13:35.823

我从 Unix/C 升级到 VB 1.0，它获得了丰厚的回报，然后我学习了 C++，并最终迁移回了 C#，我仍然认为原始 VB 是一种用于组合 UI 的好语言。试一试——你可能会惊讶于你的发现。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-01-21T10:25:50.697

有时我在用 C++ 编程时会有这种感觉 :)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-01-21T12:21:17.640

不要担心同胞的hyperboreean！在学习 C# 的同时，您仍然可以使用 IronPython 在 .NET 中编写 Python 代码。

[IronPython](http://www.codeplex.com/IronPython)来救援！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-01-21T12:56:10.410

你必须喜欢你正在使用的语言，否则你会很痛苦。我喜欢使用 C# 并发现 PHP 或 Python 等较小的语言很有趣，但是当我必须使用另一种可能需要数十年才能掌握的细微差别的大语言时，我觉得我在浪费时间，因为我还没有准备好致力于掌握它们。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-01-21T13:16:18.123

我认为您将要做的工作类型应该高于您将使用的工具。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-01-21T13:30:43.133

我最喜欢的编程语言是 Python（使用它我得到报酬），我有很强的 Unix 背景，而且我*确实*接受了 C#/ASP.NET 的职位:-)

对我来说，最大的因素是工作场所、人员和决策过程。我会影响对我来说很重要的事情，学到很多东西，并开始做我不会做的事情。

最喜欢的编程语言只是衡量工作满意度的一个参数。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-01-21T13:30:59.903

我选择我自己使用的语言。
很多年前，我有时不得不使用我没有选择的语言，比如 C51 用于移动设备编程，这也很有趣，但现在我只是使用我最喜欢的语言，让我周围的其他人也使用它； )

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-01-21T13:31:17.297

获得更多的钱和使用您喜欢或更舒适的编程语言进行编程是给定特定工作的两个维度，它们可能是一致的，也可能是相隔 180 度的。所以你真的需要决定在那个特定的时间点对你来说什么是重要的：盈利能力或享受/舒适。如果它的盈利能力，那么你必须自己学习在那个特定点上工作所需的任何编程语言或平台。如果它很享受，那么放松并在你的舒适区享受你喜欢的 PL 并拒绝这个提议，但不要忘记像我这样的人总是准备好拿走别人扔掉的东西来获得更多的知识，赚更多的钱，创造更多的生活.

# delphi - 异常记录器：最佳实践

> ID：464668
> 
> 赞同：6
> 
> 时间：2009-01-21T10:06:13.233
> 
> 标签：delphi, exception-handling

我刚刚开始在我的 (Delphi) 应用程序中使用异常记录器 (EurekaLog)。现在我的应用程序每天都会通过电子邮件向我发送大量错误消息。这是我到目前为止发现的

*   很多重复的错误
*   来自同一台 PC 的多封邮件

虽然这是改进我的应用程序的非常有价值的输入，但我对所获得的大量信息感到有些不知所措。

处理来自应用程序的邮件的最佳做法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-21T10:14:09.253

如果您像目前这样获得大量信息，那么您根本不会获得任何信息。

所以我想说将您的错误分类为组，例如警告、致命错误等。然后将您的电子邮件限制为最重要的消息（致命）。除此之外，请定期（日、周...）查看您的日志。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-21T10:50:49.303

我的异常日志记录使用 madExcept 作为核心，但我自己的传输机制是让它们全部进入数据库。核心信息全部从每个报表中提取出来并放入字段中，整个报表也被存储起来。堆栈跟踪会自动分析以删除不感兴趣的函数，只留下我失败的函数列表。

随着这种情况的自动发生，我现在可以“忽略”每条传入的消息，但可以在网格中查看更大的图景，它可以简单地向我展示哪些功能遇到的问题最多。然后我可以专注于它们，寻找原因并修复它们。

如果我选择，我的显示应用程序还能够过滤掉某个数量之前的构建中的报告，这样我就可以告诉它在构建 75 之前不要包含“MyWidget.BadProc”，一旦我修复它。

这帮助我改进了我的应用程序，并解决了人们发现最成问题的问题，而无需猜测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T10:21:01.253

这在很大程度上取决于发回的错误是什么。显而易见的是，如果您的应用程序中有错误，它们需要修复并将补丁/更新发送给您的客户。

如果它们是您知道可能发生并且不需要通知您的异常，您可以在 Eureaka 日志选项中添加“异常过滤器”以指定应如何处理（或忽略它们！）。

另一种选择是在邮件主题行中使用 EurekaLog 变量（您可以在其中添加异常描述等），然后使用您的电子邮件客户端基于此进行过滤。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T14:24:04.973

我使用 madExcept 做到了这一点。它对于追踪我们无法重现的问题非常有用。

这让我问你为什么得到这么多？未捕获的异常应该很少而且相差甚远。特别是如果用户看到一个错误对话框。我负责几个应用程序，每个应用程序都有数百次安装，而且我很少收到电子邮件通知。

如果他们主要来自极少数 PC，我会与其中一些用户合作，找出他们的不同之处，或者他们的设置如何产生异常。

如果他们来自各地，那可能是您的测试中出现的错误。

无论哪种方式，使用细节来修复你的代码，或者至少，预测已知的异常并正确地捕获它们（没有空的try..except）。

解决热点问题将大大减少您收到的电子邮件数量，从而使偶尔的通知更易于管理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-29T13:59:01.740

我认为您应该丢弃所有重复项。只留下报告的数量。即，如果您收到 100 个报告，但只有 4 个独特的问题 - 只留下 4 个报告，丢弃其他 96 个报告，但使用它们的计数按严重性对报告进行排序。例如，第 4 题 6 份报告，第 3 题 10 份报告，第 2 题 20 份报告，第 1 题 60 份报告。因此，您应该使用 60 份报告解决第一个问题，然后才切换到第二个。

我相信 EurekaLog 在它的报告中有 BugID。相同的问题具有相同的 BugID。这将允许您对具有重复项的报告进行排序。EurekaLog Viewer 还可以对重复项进行排序。

# c++ - CListCtrl - 如何启用多选

> ID：464675
> 
> 赞同：1
> 
> 时间：2009-01-21T10:09:49.310
> 
> 标签：c++, mfc, windows-mobile, clistctrl

我正在为 Windows Mobile 创建一个 MFC 应用程序，但不知道如何为列表控件 (CListCtrl) 启用多项选择。在属性面板中，Single Selection 设置为 False，但仍然无法选择多个项目。

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-21T14:25:03.553

我从未针对 Windows Mobile，但您可以尝试以下方法：

> list.ModifyStyle(LVS_SINGLESEL, 0);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T17:44:06.303

如果您希望以编程方式执行此操作，CWnd 基础的 ModifyStyle 方法将起作用（参见 Diego 的帖子），或者如果您将控件放在对话框上，您可以在资源编辑器中定义属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-18T08:36:36.147

所有 ListView 窗口样式都在`CommCtrl.h`头文件中定义。在 Microsoft 网站上查看[此页面。](https://docs.microsoft.com/en-us/windows/win32/controls/list-view-window-styles)

ListView 控件的默认设置允许多选。如果您只需要从列表中进行单一选择，请使用以下代码：

```
m_ListControl.ModifyStyle(NULL, LVS_SINGLESEL, 0); 
```

`m_ListControl`是您的列表控件的变量。您可以在上面的页面中提到许多其他样式。

这是另一个例子：

```
ListView_SetExtendedListViewStyle(::GetDlgItem(m_hWnd, IDC_LIST1), LVS_EX_FULLROWSELECT | LVS_EX_GRIDLINES); 
```

# objective-c - NSTableView 中的鼠标悬停

> ID：464677
> 
> 赞同：2
> 
> 时间：2009-01-21T10:10:05.893
> 
> 标签：objective-c, cocoa, macos

我无法使用 NSTableView 创建鼠标悬停功能。这个想法是（如果在首选项中选择了该功能）将鼠标指针放在 NSTabelView 中的特定行上方将显示一个小的弹出窗口，其中包含有关该特定行中条目的附加信息。效果不应该是立竿见影的（例如，在滚动按钮时突出显示按钮），而是会延迟几秒钟。

到目前为止，我已经使用工具提示委托方法实现了这个功能，但是如果需要显示超过 1-3 行的信息，这不允许自定义窗口并且不能很好地工作（布局明智）。

在 Hillegass 的书中，建议使用 mouseEntered/mouseExited 方法进行翻转，但据我所知，这适用于窗口的预定义区域，而不是表格视图中的行。

有没有人有什么建议？

格雷戈尔·托马塞维奇，瑞典

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T10:59:08.273

你在正确的轨道上使用 -mouseEntered: 和 -mouseExited:。

查看 NSView 的 -addTrackingRect:owner:userData:assumeInside: 和 -removeTrackingRect: 方法。您可以设置您的 tableView 以在 tableView 的内容发生更改时为其中的每一行创建 trackingRects，或者，每当调用 -tile 或其他与布局相关的方法时，在整个 tableView 上设置/更新一个跟踪区域。

# javascript - 通过在 Windows XP x64 上使用 JScript 执行 .hta 文件来“拒绝访问”

> ID：464679
> 
> 赞同：2
> 
> 时间：2009-01-21T10:10:30.633
> 
> 标签：javascript, html, windows, scripting, 64-bit

我有一个简单的 HTML（作为 HTA）应用程序，它在 Windows XP x64 机器上显示奇怪的行为。我定期（不是每次）收到错误消息“访问被拒绝”。当我启动应用程序时。Windows XP 32bit 上的相同应用程序运行良好...

有人有什么想法或解释吗？

错误信息：

```
线路：18
字符：6
错误：访问被拒绝。
代码：0
网址：file:///D:/test_j.hta

```

这是我的“test_j.hta”的代码：

```
<html>

<head>
<title>Test J</title>

<HTA:APPLICATION 
     ID="objTestJ" 
     APPLICATIONNAME="TestJ"
     SCROLL="no"
     SINGLEINSTANCE="yes"
     WINDOWSTATE="normal"
>

<script language="JScript">

function main()
{
     //window.alert("test");
     window.resizeTo(500, 300);        
}

function OnExit()
{
    window.close();
}

</script>

</head>

<body onload="main()">
     <input type="button" value="Exit" name="Exit" onClick="OnExit()" title="Exit">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T10:29:18.880

尝试在启动代码周围添加一个 try catch

```
try
{ 
    window.resizeTo(500, 300); 
} catch(e) { } 
```

或者尝试 setTimeout:-

```
setTimeout(function() {
    window.resizeTo(500, 300);
}, 100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-15T17:13:38.127

对于经过这里的任何人来说，我遇到了类似的问题（我的问题是文档已经加载时），这是由于浏览器尚未准备好执行调整大小/移动操作，无论是由于完成加载或（在我的情况下）当它仍在处理先前的调整大小请求时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-04-08T03:07:34.210

延迟和尝试捕获：

```
setTimeout(function() {
    try { 
        window.resizeTo(500, 300); 
    } 
    catch(e) { }
}, 100); 
```

# java - 运行 rmi 服务器，classnotfound

> ID：464687
> 
> 赞同：29
> 
> 时间：2009-01-21T10:12:00.927
> 
> 标签：java, eclipse, rmi, rmiregistry

嗨，我正在尝试运行一个将类绑定到命名服务器的 java 应用程序，但我不断收到 ClassNotFoundException

首先我启动注册表：

> rmir​​egistry

然后从eclipse我尝试执行服务器但得到这个错误

> java.rmi.ServerException：服务器线程发生RemoteException；嵌套异常是：java.rmi.UnmarshalException：错误解组参数；嵌套异常是： java.lang.ClassNotFoundException: progInternet2008.commons.NominabileFactory at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:396) at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:250) at sun.rmi.transport.Transport$1.run(Transport.java:159) at java.security.AccessController.doPrivileged(Native Method) at sun.rmi.transport.Transport.serviceCall(Transport.java:155) at sun.rmi .transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535) 在 sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790) 在 sun.rmi.transport.tcp.TCPTransport$ConnectionHandler。在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang .Thread.run(Thread.java:619) 在 sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:255) 在 sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:233) 在 sun.rmi。 server.UnicastRef.invoke(UnicastRef.java:359) at sun.rmi.registry.RegistryImpl_Stub.rebind(Unknown Source) at progInternet2008.Pozzobon.tesi.Slave.main(Slave.java:54) 原因：java.rmi。 UnmarshalException：解组参数错误；嵌套异常是：java.lang.ClassNotFoundException: progInternet2008.commons.NominabileFactory at sun.rmi.registry.RegistryImpl_Skel。

我已经阅读了 RMI Java 教程，但仍然无法正常工作......

作为VM Arguments，我设置了这个：

> -Djava.rmi.server.codebase=文件：${workspace_loc}/progInternet2008

请帮我

（我正在使用 Java 6）

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2015-11-09T02:03:40.747

从 /bin、/build 或 /build/classes 文件夹运行`rmiregisrty`命令，无论哪个文件夹是构建文件的根目录。

我花了半天时间试图解决同样的问题。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-04-22T22:55:31.283

发生异常是因为 rmiregistry 应用程序不知道从哪里加载类。当您尝试在 RMI 注册表中绑定对象时，注册表会下载该对象的类定义。其他一些答案告诉您通过设置 rmiregistry 应用程序的类路径来解决此问题，以便它在启动时具有类定义并且不需要下载任何内容，但 Sun 的 Java RMI 教程**[明确表示不要这样做这个](http://java.sun.com/docs/books/tutorial/rmi/running.html "运行示例程序（Java 教程 > RMI）")**。我怀疑这有可能导致注册表中类的版本和服务器上的类之间发生冲突。

处理该问题的正确方法是按照您的尝试设置 java.rmi.server.codebase 属性。该属性要求目录路径以正斜杠结尾，如下所示：

```
-Djava.rmi.server.codebase=文件：${workspace_loc}/progInternet2008/

```

如果 ${workspace_loc} 变量是相对路径并且 rmiregistry 应用程序未在同一目录中启动，那么您也可能会遇到问题，因此相对路径不正确。如果您将路径设为绝对路径，或者在适当的目录中启动 rmiregistry，ClassNotFoundException 应该会消失。有关更多详细信息，请参阅有关[java.rmi.server.codebase 属性的教程。](http://java.sun.com/javase/6/docs/technotes/guides/rmi/codebase.html "使用 Java RMI 进行动态代码下载")

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-16T21:18:54.273

好的，我刚刚克服了这个问题。确保在运行时设置`rmiregistry`了`CLASSPATH`环境变量。

例如，您可能有一个脚本：

```
set CLASSPATH=[path to jdbc driver].jar
rmiregistry.exe 
```

这就是让我丢失的类路径正常工作所需要的一切。我不确定如何发送`-cp commandline`到`rmiregistry.exe`. 它的文档非常缺乏。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-21T10:36:07.150

我相当肯定您必须使用与您的应用程序相同的类路径来启动您的 RMI 服务器。我相信它采用与 java 相同的参数，即 -cp `[your class path]`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-19T10:07:28.917

关闭最初启动 rmiregistry 的 cmd 窗口。在新的 cmd 中转到项目类文件所在的位置（uptill bin）并使用以下命令启动注册表：

> rmir​​egistry -J-Djava.rmi.server.useCodebaseOnly=false

如果您使用的是 Eclipse，请运行 ServerSideProject，您的 ImplementationClass 实例将绑定到指定的 URL。

只需在绑定方法下方打印一行并查看它是否被打印。如果打印成功，则表示您的服务器工作正常。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-09T14:52:24.813

我从 JDK1.6.0_33 升级到 1.7.0_45 并且遇到了同样的问题。我找到了这个文档并通过启动 rmiregistry 解决了这个问题：

rmir​​egistry -Djava.rmi.server.useCodebaseOnly=false

请参阅以下 [http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/enhancements-7.html](http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/enhancements-7.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-11-26T10:20:55.297

尝试在 VM Arg 末尾添加 /bin：

```
-Djava.rmi.server.codebase=file:${workspace_loc}/progInternet2008/bin 
```

您将运行的文件位于此目录中，因此您需要将其包含在路径中。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-11-07T23:07:43.697

我遇到了同样的问题，要解决此问题，请确保在运行**rmiregistry时将您的***CLASSPATH*设置为包含服务器类的路径。

 **在 linux 机器上运行以下命令。

```
export CLASSPATH="<server_class_path>" 
```

确保已设置**CLASSPATH ：**

```
echo $CLASSPATH 
```

设置类路径后，运行**rmiregistry**

```
rmiregistry & 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-03-10T19:30:07.167

我花了一整天卸载和重新安装我的 JDK 并更改类路径和环境变量。但罪魁祸首是命令**start rmigregistry**没有以正确的方式启动 rmiregistry。因此，感谢此页面上的评论，解决方案是暂时*取消设置*CLASSPATH。这是通过命令完成的`set CLASSPATH=`

# c# - 如何在 VS2008 和 SQL Server CE 上基于现有的 .sdf 文件创建空本地数据库

> ID：464693
> 
> 赞同：4
> 
> 时间：2009-01-21T10:14:07.537
> 
> 标签：c#, .net, database, sql-server-ce

我想使用 Visual Studio 2008 IDE 为 SQL Server Compact 3.5 数据库编辑我的本地数据库架构。但是，文档和 UI 中的所有内容似乎都假设应用程序/程序集只想使用单个数据库，并且从不希望基于现有模式创建新数据库。

我希望能够使用可视化工具编辑数据库架构，然后拥有一种基于编辑后的架构创建新数据库文件的机制。这样，我的应用程序创建的每个文档都将存储在它们自己单独的数据库文件 (.sdf) 中。此外，出于单元测试的目的，我希望能够创建空的临时 .sdf 文件，以便在空数据库上运行我的单元测试。

我知道如何使用现有模式创建新的空数据库的唯一方法就是将我的主 .sdf 文件复制到一个新文件中。

使用 C# 代码创建新的 .sdf 文件的推荐方法是什么？即，如何实现 MyModel.Create("foo.sdf") 以便它使用我在 Visual Studio 中创建的架构创建 .sdf 文件。

**编辑**：经过长时间的调查，我最终完全放弃了 VS2008 本地数据库 .sdf 编辑器，并开始使用 LINQ-to-SQL 创建新的 .sdf 文件。我现在只指定一堆 C# 类，注释它们以使用 LINQ-to-SQL 并通过调用我的 DataContext 的 CreateDatabase 方法创建新的数据库文件。MSDN 上有一个很好的文档：[How to: Dynamicly Create a Database (LINQ to SQL)](http://msdn.microsoft.com/en-us/library/bb399420.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T10:20:16.887

创建一个“model.sdf”数据库，其中包含架构和可能需要的初始数据。如果你想创建一个新的数据库，你可以从这个模型中创建一个副本。

您还可以[从现有数据库](http://www.codeplex.com/ExportSqlCE)（[替代链接](http://bembengarifin-tech.blogspot.com/2008/08/generate-script-export-data-from-sql-ce.html)）创建 Sql-DDL，然后创建一个空数据库并在其上执行此 SQL。这会慢很多。

# .net - 最大数组长度配额

> ID：464707
> 
> 赞同：36
> 
> 时间：2009-01-21T10:19:21.163
> 
> 标签：.net, wcf, wcf-binding

我正在编写一个小型 WCF/WPF 应用程序来调整图像大小，但是当我尝试从客户端向我的服务发送大小为 28K 的图像时，WCF 让我很伤心。当我发送较小的图像时，该服务运行良好。我立即认为这是一个配置问题，我在网上搜索了有关绑定配置中 MaxArrayLength 属性的帖子。我已将客户端和服务器上这些设置的限制提高到最大 2147483647，但我仍然收到以下错误：

> 格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数[http://mywebsite.com/services/servicecontracts/2009/01:OriginalImage](http://mywebsite.com/services/servicecontracts/2009/01:OriginalImage)时出错。InnerException 消息是“反序列化 System.Drawing.Image 类型的对象时出错。读取 XML 数据时已超出最大数组长度配额 (16384)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxArrayLength 属性来增加此配额。有关更多详细信息，请参阅 InnerException。

我使我的客户端和服务器配置相同，它们如下所示： 服务器：

```
<system.serviceModel>
    <bindings>
        <netTcpBinding>
            <binding name="NetTcpBinding_ImageResizerServiceContract" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
                hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="10"
                maxReceivedMessageSize="2147483647">
                <readerQuotas maxDepth="32"
                              maxStringContentLength="2147483647"
                              maxArrayLength="2147483647"
                              maxBytesPerRead="2147483647"
                              maxNameTableCharCount="2147483647" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
                <security mode="Transport">
                    <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                    <message clientCredentialType="Windows" />
                </security>
            </binding>
        </netTcpBinding>
    </bindings>
    <behaviors>
        <serviceBehaviors>
            <behavior name="ServiceBehavior">
                <serviceMetadata httpGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="false" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <services>
        <service name="LogoResizer.WCF.ServiceTypes.ImageResizerService" behaviorConfiguration="ServiceBehavior">
            <host>
                <baseAddresses>
                    <add baseAddress="http://localhost:900/mex/"/>
                    <add baseAddress="net.tcp://localhost:9000/" />
                </baseAddresses>
            </host>
            <endpoint binding="netTcpBinding" contract="LogoResizer.WCF.ServiceContracts.IImageResizerService" />
            <endpoint  address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        </service>
    </services>
</system.serviceModel> 
```

我的客户端配置如下所示：

```
 <system.serviceModel>
    <bindings>
        <netTcpBinding>
            <binding name="NetTcpBinding_ImageResizerServiceContract" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
                hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="10"
                maxReceivedMessageSize="2147483647">
                <readerQuotas maxDepth="32" 
                              maxStringContentLength="2147483647"
                              maxArrayLength="2147483647" 
                              maxBytesPerRead="2147483647" 
                              maxNameTableCharCount="2147483647" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
                <security mode="Transport">
                    <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                    <message clientCredentialType="Windows" />
                </security>
            </binding>
        </netTcpBinding>
    </bindings>
    <client>
        <endpoint address="net.tcp://localhost:9000/" binding="netTcpBinding"
            bindingConfiguration="NetTcpBinding_ImageResizerServiceContract"
            contract="ImageResizerService.ImageResizerServiceContract"
            name="NetTcpBinding_ImageResizerServiceContract">
            <identity>
                <userPrincipalName value="me@domain.com" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel> 
```

似乎无论我将这些值设置为什么，我仍然会收到一条错误消息，说 wcf 无法序列化我的文件，因为它大于 16384。有什么想法吗？

**更新：**为了我的隐私，userPrincipalName 标签中的电子邮件地址已被更改

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-01-21T10:34:03.097

我的错误 - 我忘记在我的服务器端配置中将绑定配置应用到我的端点。服务器配置应为：

```
<system.serviceModel>
    <bindings>
        <netTcpBinding>
            <binding name="NetTcpBinding_ImageResizerServiceContract" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
                hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="10"
                maxReceivedMessageSize="2147483647">
                <readerQuotas maxDepth="2147483647"
                              maxStringContentLength="2147483647"
                              maxArrayLength="2147483647"
                              maxBytesPerRead="2147483647"
                              maxNameTableCharCount="2147483647" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
                <security mode="Transport">
                    <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                    <message clientCredentialType="Windows" />
                </security>
            </binding>

        </netTcpBinding>
    </bindings>
    <behaviors>
        <serviceBehaviors>
            <behavior name="ServiceBehavior">
                <serviceMetadata httpGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="false" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <services>
        <service name="LogoResizer.WCF.ServiceTypes.ImageResizerService" behaviorConfiguration="ServiceBehavior">
            <host>
                <baseAddresses>
                    <add baseAddress="http://localhost:900/mex/"/>
                    <add baseAddress="net.tcp://localhost:9000/" />
                </baseAddresses>
            </host>
            <endpoint bindingConfiguration="NetTcpBinding_ImageResizerServiceContract" binding="netTcpBinding" contract="LogoResizer.WCF.ServiceContracts.IImageResizerService" />
            <endpoint  address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        </service>
    </services>
</system.serviceModel> 
```

请注意 bindingConfiguration="NetTcpBinding_ImageResizerServiceContract" 已添加到 netTcp 端点。我的应用程序现在可以处理更大的图像。甜的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-10-23T11:51:32.637

请添加`<readerQuotas>`in 绑定。

这是上传和下载 byte[] 时的主要问题，它解决了我的问题。

```
<basicHttpBinding>
    <binding name="ServicesBinding" transferMode="Streamed" maxBufferSize="200000000"
        maxReceivedMessageSize="200000000" messageEncoding="Text"  
        receiveTimeout="00:10:00">
        <readerQuotas maxDepth="2147483647"
            maxStringContentLength="2147483647"
            maxArrayLength="2147483647"
            maxBytesPerRead="2147483647"
            maxNameTableCharCount="2147483647" />
    </binding>
</basicHttpBinding> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-03-02T16:07:15.570

我使用了 Microsoft SDK SvcConfigEditor。如果你使用 Visual Studio（它有自己的版本），你就有这个。它也是免费下载的。

在您的硬盘驱动器上（检查 Program Files 和 Program Files (x86)）：

> C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools\SvcConfigEditor.exe
> 
> C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\NETFX 4.0 Tools\SvcConfigEditor.exe

如果您有多个 Microsoft SDK 安装，您使用的版本将取决于您正在开发的 .NET 版本。该工具会抛出一个错误，让您知道您试图在错误的版本下打开 .dll 文件。

要使用该工具，请指向您的服务的 .dll 文件，然后让该工具完成繁重的工作。如果您有服务与服务（代理服务）通信，这将特别有用。另外，请记住，您可能需要为客户端（在应用程序中）和服务器配置（在 Web 服务中）进行配置设置。

我缺少服务器端端点上的配置。我必须做两件事：

1.  在我的服务器端配置上放置一个端点，使用 SvcConfigEditor 配置
2.  记得在 SvcConfigEditor 工具中设置 MaxArrayLength

此外，ASP.NET 对这个值很挑剔，因此您可以尝试简化配置绑定并将其关闭：

```
 <serviceHostingEnvironment multipleSiteBindingsEnabled="false" /> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-23T10:33:56.647

它工作正常，以前在浏览 wcf 服务时显示 net.tcp://myservice.com/Ac_Service.svc/mex 的引用，但现在它是 [http://myservice.com/Ac_Service.svc?wsdl](http://myservice.com/Ac_Service.svc?wsdl)

它将来也能正常工作吗，没有任何问题。

# remote-desktop - 远程桌面/视觉支持的最佳解决方案是什么？

> ID：464715
> 
> 赞同：7
> 
> 时间：2009-01-21T10:21:41.127
> 
> 标签：remote-desktop

我们目前正在研究不同的远程桌面支持解决方案，以帮助我们的客户，如果他们对我们的软件有任何问题，我想就最好的解决方案提供一些意见。

我们有以下需求/愿望：

*   跨平台
*   最好不要在用户端安装
*   应该穿透防火墙并且不受防病毒软件的干扰。
*   支撑后不留残渣。

我知道 VNC、logmeinrescue.com、dameware 远程控制、msn 远程桌面等等，但哪一个是最好的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-21T10:32:27.500

我还建议[TeamViewer](http://www.teamviewer.com)，有一个免费版本和一个商业版本，您可以使用您的徽标重新命名以重新分发给您的客户。它确实需要（非管理）安装，但也可以在防火墙后面工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T10:26:42.177

[副驾驶](https://www.copilot.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-21T11:47:33.027

绝对[是 TeamViewer](http://www.teamviewer.com/)！特别是因为这对“另一方”来说很容易。不需要复杂的技能。只需安装并运行它。很容易通过电话解释，同时立即询问他们的“代码”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T10:26:53.753

试试[`CoPilot`](https://www.copilot.com/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-21T10:30:26.303

到目前为止，[TeamViewer对我的帮助很大，但它仅适用于 Windows 和 Mac。](http://www.teamviewer.com/)不幸的是，没有 Linux 支持。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-21T10:30:39.580

我个人觉得 UltraVNC 是 Windows 机器最好的支持工具，特别是因为最终用户可以在你做的时候看到你在做什么。也非常适合培训目的。

RDP 很简洁，但我发现它使用起来非常令人沮丧，除非在高带宽或带宽稳定的机器上。如果最终用户端点的路由硬件不是很好，端口转发也可能会很痛苦。您还需要担心用户权限和启用 RDP，如果您需要以第三人称操作，这可能会很棘手。

UltraVNC（与其他 VNC 客户端一样）有一个很酷的“侦听主机”，如果服务器的端点不是直接连接到网络，它允许您将 VNC 保持在 VNC 服务器中。这可能非常有用。我曾在金融服务部门工作，我们以这种身份使用 VNC，并且在安装它时从未遇到任何问题，也从未出现过安全漏洞。

SSH 也是一种选择，通过 OpenSSH，您可以在 Windows 上使用它（使用 cygwin），但这并不总是合适的。

最后，我认为 VNC 可能是你最好的选择。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-21T10:45:29.097

我们使用 UltraVnc SC（单击），请参见此处： [http ://www.uvnc.com/addons/singleclick.html](http://www.uvnc.com/addons/singleclick.html)

您的客户只需要从您的帮助台下载一个小文件并运行它。然后您的帮助台可以控制客户的桌面。关闭会话后，小文件将自行卸载。要求是您的 UltraVNC 应该在侦听模式下运行。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-21T11:56:38.267

我对[CrossLoop](http://www.crossloop.com/)有很好的体验。它是免费的，可让您在 2 分钟内建立连接。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-21T10:32:50.450

我经常使用 logmein.com，它工作得很好，但它确实有完整的客户端安装。但是，它在任何时候都可用，并且安装后不需要用户允许远程连接（您的客户可能会也可能不会接受）。

鉴于您的要求，我认为 CoPilot 可能是您唯一的选择，尽管您将需要客户端交互 - 他们需要下载并运行可执行文件，但它非常简单。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-21T10:38:39.830

[我对NTRSupport](http://www.ntrglobal.com/ntrsupport/en-US/home-NTRsupport.asp)的遥控器有很好的体验。非常易于使用，无需安装。

我还使用和/或使用了以下不满足您所有要求的软件：

*   Timbuktu Pro - 性能差，功能少，现在不推荐。
*   UltraVNC - 工作，但我记得剪贴板和文件传输支持的一些问题。
*   PCAnywhere - 工作，但性能从未令人满意，尴尬的剪贴板处理。
*   RDP - 非常适合 Windows 机器，但在不清楚是否必须使用控制台会话时可能会出现问题。有时，您只是不小心断开了服务器会话。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-21T10:43:43.470

仅适用于 Windows：[Crossloop](http://www.crossloop.com)

# event-handling - 在打开的 wx.ComboCtrl 中接收击键

> ID：464717
> 
> 赞同：0
> 
> 时间：2009-01-21T10:22:41.780
> 
> 标签：event-handling, wxpython, wxwidgets

来自[这个问题](https://stackoverflow.com/questions/462320/window-overflowing-widget-in-wxwidgets)，我有一个带有自定义弹出窗口的 wxComboCtrl，该弹出窗口由带有一堆单选按钮的面板组成。我的问题是，当我打开弹出窗口时，组合没有击键，因为事件由面板本身处理..我想将这些KeyEvents重定向到组合的textctrl，但我找不到让它工作的方法：/
我走错路了吗？我应该在用户按键时手动处理 textctrl 值吗？我认为这会有点麻烦.. 因为据说 textctrl 已经知道如何处理这些事件..

这是我的测试用例（Linux 上的 wxPython 2.8），“on_key”方法应该是罪魁祸首：

```
import wx
import wx.combo

class CustomPopup(wx.combo.ComboPopup):

    def Create(self, parent):
        # Create the popup with a bunch of radiobuttons
        self.panel = wx.Panel(parent)
        sizer = wx.GridSizer(cols=2)
        for x in range(10):
            r = wx.RadioButton(self.panel, label="Element "+str(x))
            r.Bind(wx.EVT_RADIOBUTTON, self.on_selection)
            sizer.Add(r)
        self.panel.SetSizer(sizer)

        # Handle keyevents
        self.panel.Bind(wx.EVT_KEY_UP, self.on_key)

    def GetControl(self):
        return self.panel

    def GetAdjustedSize(self, minWidth, prefHeight, maxHeight):
        return wx.Size(200, 150)

    def on_key(self, evt):
        if evt.GetEventObject() is self.panel:
            # Trying to redirect the key event to the combo.. But this always returns false :(
            print self.GetCombo().GetTextCtrl().GetEventHandler().ProcessEvent(evt)
        evt.Skip()

    def on_selection(self, evt):
        self.Dismiss()
        wx.MessageBox("Selection made")

class CustomFrame(wx.Frame):

    def __init__(self):
        # Toolbar-shaped frame with a ComboCtrl
        wx.Frame.__init__(self, None, -1, "Test", size=(800,50))
        combo = wx.combo.ComboCtrl(self)
        popup = CustomPopup()
        combo.SetPopupControl(popup)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(combo, 0)
        self.SetSizer(sizer)
        self.Layout()

if __name__ == '__main__':
    app = wx.PySimpleApp()
    CustomFrame().Show()
    app.MainLoop() 
```

**编辑：**
我在同一主题上发现了这些（未解决的）讨论。
[“当显示 ComboPopup 时，ComboCtrl 失去键盘焦点”](http://aspn.activestate.com/ASPN/Mail/Message/wxpython-users/3647254)
[“使用 wx.ComboCtrl 的问题”](http://www.nabble.com/issue-using-wx.ComboCtrl-tt18869073.html#a18886262)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-10-21T14:10:27.997

对于使用面板作为控件基础的自定义 ComboPopup 控件，我遇到了同样的问题。

EmulateKeypress 刚刚进入了一个永无止境的循环。我发现将面板绑定到 EVT_KEY_DOWN 并将 EVT_CHAR 绑定到覆盖的 OnComboKey​​Event 函数，并在事件处理链中向下跳过事件是在弹出窗口打开的情况下将文本输入到 ComboCtrl 的文本框中所需的全部内容。我认为这是有道理的。由于 Popup 不是严格意义上的控件，因此在通过 Bind() 方法绑定到 wx.app 事件循环之前，它的事件不会属于任何地方。

我在下面包含了重写的 OnComboKey​​Event 函数，以便其他任何人都可以探索这个问题。

```
 def create(self, *args, **kwds):
       ...
       self.panel.Bind(wx.EVT_CHAR, self.OnComboKeyEvent)
       self.panel.Bind(wx.EVT_KEY_DOWN, self.OnComboKeyEvent)
       ...
 def OnComboKeyEvent(self,  evt):
        evt_dict = {wx.EVT_TEXT.typeId: "TextEvent", 
                            wx.EVT_CHAR.typeId:"CharEvent", 
                            wx.EVT_CHAR_HOOK.typeId:"CharHookEvent",
                            wx.EVT_KEY_UP.typeId:"KeyUpEvent", 
                            wx.EVT_KEY_DOWN.typeId:"KeyDownEvent"}
        if evt.GetEventType() in evt_dict:
            thelogger.debug("oncombokeyevet:%s" % evt_dict[evt.GetEventType()])

        super().OnComboKeyEvent(evt)
        evt.Skip() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-26T07:46:28.993

我在 wxpython-users 上得到了 Robin Dunn 本人的回答：

> 像这样向本机小部件发送低级事件并不像大多数人期望的那样工作。您期望这会导致将字符添加到文本 ctrl，但它不能这样做，因为 ProcessEvent 所做的只是将 wx.Event 发送到任何绑定的事件处理程序，然后它会停止。它不会进入下一步并将该事件转换为等效的本机消息并将其发送到本机小部件。请参阅“模拟键盘事件”线程。
> 
> 它在非 Windows 平台上效果不佳，但您可以尝试调用 EmulateKeypress。

# actionscript-3 - 向 AVM2 添加语言

> ID：464722
> 
> 赞同：4
> 
> 时间：2009-01-21T10:25:25.753
> 
> 标签：actionscript-3, compiler-construction, language-design, bytecode

我对制作一种在 AVM2 上运行的语言很感兴趣，我正在寻找关于从哪里开始的建议。我确实意识到这绝不是一项微不足道的任务，但我想尝试一下，至少在此过程中了解更多关于实现语言的知识。

我已经搞砸了 ANTLR，并且一直在阅读语言开发的语法问题。我正在寻找的是关于路径的建议或有用的参考资料/书籍。

例如，我想生成（脚本/手动）一些非常简单的 AVM2 字节码，并让它在 VM 上运行作为开始。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-21T11:01:53.777

如果您对 Haxe 不感兴趣，则基本上需要编写自己的编译器，将对象编译为 ABC（Actionscript 字节码）。Adobe 在 ABC 和 AVM2 上提供的[AVM2 概述](http://www.adobe.com/devnet/actionscript/articles/avm2overview.pdf)文档应该可以帮助您入门。这是一个相当详尽的文档，但请注意字节码说明中的一些拼写错误。

您还需要将字节码包装在 doABC 标记中，作为 SWF 容器的一部分。您可以从[SWF 文件格式](http://www.adobe.com/devnet/swf/pdf/swf_file_format_spec_v10.pdf)文档中获得更多信息。

如果您想在编写数据结构（优化的 int 格式等）方面占得先机，请随时在我一直从事的动态模拟项目 asmock 上查看代码。SWF/ByteCode 生成的东西有点乱，但有 IDataOutput 包装器（[SWF](https://asmock.svn.sourceforge.net/svnroot/asmock/trunk/source/ASMock/src/flemit/framework/SWFOutput.as)、[ByteCode](https://asmock.svn.sourceforge.net/svnroot/asmock/trunk/source/ASMock/src/flemit/framework/bytecode/ByteCodeWriter.as)）可能会派上用场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T10:40:52.303

看看[Haxe](https://haxe.org/)：它是一种开源语言，可以针对不同的平台，包括 AVM。您可以深入研究 SWF 编译器源代码以获得一些灵感。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-27T13:28:29.230

Adobe 的 Project Alchemy 可以作为很好的参考 [http://labs.adobe.com/technologies/alchemy/](http://labs.adobe.com/technologies/alchemy/)

进展如何？我也有兴趣做一个 Java 到 AVM2 的编译器......你有任何已发布的代码吗？

# sql-server - Sql 2005 数据迁移

> ID：464724
> 
> 赞同：1
> 
> 时间：2009-01-21T10:25:34.317
> 
> 标签：sql-server, ssis, identity

我在两台不同的机器上运行相同的数据库。数据库广泛使用身份列，并且这些表发生了非常可怕的冲突。我现在想将这两者合并在一起，然后再解决我可能会做的根本问题

A) 使用 GUID（笨拙但无处不在） B) 分配身份范围，有点像 naff，但意味着您仍然可以按顺序访问记录，敲击基本 Sql 并轻松选择记录，它可以识别哪台机器源自数据。

我的问题是，在其中一个数据库上重新键入（即更改主键）以使数据不再发生冲突的最佳方法是什么。我们只查看总共 6 个表，但 3 个表中有很多行 ~ 2M。

更新 - 是否有任何真正的 sql 代码可以做到这一点，我知道 Identity Insert 等。我之前已经以多种不优雅的方式解决了这个问题，我一直在寻找优雅的解决方案，最好有一个不错的解决方案TSQL SP 来完成这项工作——如果不存在，我会将其编码并放置在 wiki 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T06:37:25.027

我会先在表中添加另一列，然后用新的`Primary key`.

然后我会使用更新语句来更新`foreign key`所有相关表中的新字段。

然后你可以删除旧的`Primary key`和旧的`foreign key`字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T10:31:01.873

一种简单的方法是将其中一个数据库上的所有键更改为固定增量，例如 10,000,000，然后它们将对齐。为此，您必须关闭应用程序以使数据库安静下来并删除所有受此影响的 FK 引用，并在完成后重新创建它们。您还必须将所有受影响的标识列上的种子值重置为适当的值。

一些表将是参考数据，如果不同步，合并起来会更复杂。您可能会遇到冲突代码的问题，这些代码在不同的实例上意味着相同的事物，或者相同的代码具有不同的含义。这可能是您的应用程序的问题，也可能不是问题，但如果实例在运行时没有在它们之间进行协调，您可能需要仔细检查这一点。

此外，如果没有规范的来源，姓名和地址等数据*很可能会不同步。*你可能需要把这些弄出来，运行一个匹配的查询，让企业整理任何异常。

# asp.net - 如何从 Modifed Base 64 for URL 中删除填充？

> ID：464726
> 
> 赞同：2
> 
> 时间：2009-01-21T10:26:01.447
> 
> 标签：asp.net, base64

这篇关于[Base64 URL](http://en.wikipedia.org/wiki/Base64)的 Wiki 文章说

“出于这个原因，存在一个修改过的 Base64 for URL 变体，其中**不会使用填充 '='**，标准 Base64 的 '+' 和 '/' 字符分别替换为 '-' 和 '_'，这样不再需要使用 URL 编码器/解码器，并且对编码值的长度没有影响，保持相同的编码形式完整，可用于关系数据库、Web 表单和一般的对象标识符。”

当我尝试使用 ASP.NET 删除填充时，在获取查询字符串时出现错误。我该如何解释缺少的填充？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T10:43:00.553

```
string encoded = GetBase64FromQueryString();

encoded = encoded.PadRight(NextMultiple(encoded.Length, 4), '=');
...
static int NextMultiple(int value, int multiple)
{
    int r = value % multiple;
    return value + (r != 0 ? multiple - r : 0);
} 
```

# java - 如何在 Tapestry5 中使用 InvokeListener？

> ID：464727
> 
> 赞同：1
> 
> 时间：2009-01-21T10:26:38.340
> 
> 标签：java, tapestry

如何转换此代码

```
<span jwcid="permissionInEachStep@InvokeListener"
      listener="listener:onEditPermissionInEachStep"/> 
```

进入tapestry5还是有不同的方法来调用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T15:43:43.160

如果您希望在渲染之前调用它，您可以将您的方法重命名为 setupRender()。如果您需要在循环中多次调用它，那么我想您必须使用其 setupRender 方法定义自己的组件并将其包含在您的页面中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-17T01:43:54.357

添加到 Chochos 的答案中......在 Tapestry 5 中，您可以连接到渲染周期中的许多阶段。这是这些阶段的图表，以及一些解释： [http ://tapestry.apache.org/tapestry5/guide/rendering.html](http://tapestry.apache.org/tapestry5/guide/rendering.html)

您可以通过向您希望 Tapestry 调用的方法添加适当的注释（@SetupRender、@AfterRender 等 - 参见上面链接中的示例）或在 Chochos 的示例中，Tapestry 将寻找一个方法来挂钩这些阶段在与事件名称匹配的 java 页面类中（您不必担心大小写 - Tapestry 在这种情况和大多数情况下都不区分大小写）。

# java - java类成员的访问级别

> ID：464731
> 
> 赞同：6
> 
> 时间：2009-01-21T10:27:24.017
> 
> 标签：java, encapsulation

我意识到这是一个非常基本的问题，但它一直困扰着我。据我了解，如果您在 Java 中声明一个私有字段，那么它在该类之外是不可见的。如果它受到保护，那么它可用于继承的类和同一包中的任何东西（如果其中任何一个定义不正确，请纠正我）。

这是否意味着不能声明一个只能被继承类访问的​​字段，而不是同一包中的其他非继承类？

我很欣赏有办法解决这个问题，但是有没有你想要这种行为的情况？

显然，上述问题适用于方法和领域。

非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-21T10:30:14.947

请参阅：http: [//java.sun.com/docs/books/tutorial/java/javaOO/accesscontrol.html](http://java.sun.com/docs/books/tutorial/java/javaOO/accesscontrol.html)
包 > 子类，您永远不能拥有仅由子类可见的字段，而不能由同一包中的类可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-21T10:31:33.370

基本上：

*   private：只能由类访问。
*   public：任何类都可以访问。
*   protected：类、所有继承的类和当前包的类*（已编辑）*均可访问。
*   未定义范围：当前包的所有类都可以访问。

更多信息[在这里](http://java.sun.com/docs/books/tutorial/java/javaOO/accesscontrol.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-21T10:33:28.293

是的，Java 的受保护访问有点奇怪。我无法立即明白为什么它是可取的。*就我个人而言，字段*并不困扰我，因为我不喜欢非私有字段（常量除外），但其他成员也是如此。

.NET 根本没有包/命名空间访问可见性的概念，但它有一个替代方案，即程序集（想想“jar 文件”——不完全相同，但很接近）。坦率地说，我想要命名空间*和*部署单元可见性选项，但似乎我注定要失望......

# iphone - 如何流式传输视频并播放？

> ID：464732
> 
> 赞同：6
> 
> 时间：2009-01-21T10:28:01.770
> 
> 标签：iphone, media-player

如何从网络流式传输视频数据并在 iPhone 上播放？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-21T12:28:43.507

首先，您是在开发针对 iPhone 优化的 Web 应用程序还是原生应用程序？

在第一种情况下，您唯一的选择是将视频文件转码为 Quicktime H.264（m4v 或 mp4 扩展名）。您可以使用 Quicktime Pro（使用导出菜单）或 VLC（作为免费替代品）。然后只需添加一个超链接到您的 HTTP 服务器上的视频文件。确保它呈现正确的内容类型和内容（阅读[iPhone OS 的 Safari Web 内容指南：配置您的服务器](https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/CreatingVideoforSafarioniPhone/CreatingVideoforSafarioniPhone.html#//apple_ref/doc/uid/TP40006514-SW6)）。这适用于 Web 和本机应用程序（在本机应用程序中，您将使用 MPMoviePlayerController 视图）。“流式传输”（技术上称为 Quicktime 电影文件的渐进式下载）也可以。

如果您正在谈论流式直播内容（即您制作的直播内容或转码直播的内容），目前没有官方的方式来做这件事（从 iPhone OS 2.2 开始）。iPhone OS 不支持 RTSP/RTP 流。许多原生 iPhone 应用程序（例如 UStream.tv 和 Orb Live）创建了他们的自定义直播流解决方案（它们中的大多数通过 HTTP 传输具有数秒延迟的延迟流，然后使用 FFmpeg 或其他库以某种方式在手机上对其进行解码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-17T16:24:23.237

如果您正在寻找基于服务器的解决方案（带有非常实惠的 Amazon EC2 选项），请务必在[http://www.wowzamedia.com/advanced.php上查看 Wowza](http://www.wowzamedia.com/advanced.php)

它无需定制应用程序即可直接流式传输到 iPhone/iPod Touch。

注意：我根本不隶属于他们......只是一个粉丝/客户。

编辑：刚刚注意到这个问题有多老了。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T14:53:26.040

您是想在您的应用程序中流式传输视频还是仅在您的 iPhone 上流式传输？要通过应用程序流式传输视频，请使用 MPMoviePlayerController 并将视频的 URL 传递给它。MPMoviePlayerController 将自己流式传输视频并为您播放。

# python - Python 正则表达式 - 如何从通配符表达式中捕获多个组？

> ID：464736
> 
> 赞同：35
> 
> 时间：2009-01-21T10:29:31.657
> 
> 标签：python, regex, lexical-analysis

我有一个 Python 正则表达式，其中包含一个可以出现零次或多次的组 - 但是当我之后检索组列表时，只有最后一个存在。例子：

`re.search("(\w)*", "abcdefg").groups`()

这将返回列表 ('g',)

我需要它返回 ('a','b','c','d','e','f','g',)

那可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-01-21T10:33:24.987

```
re.findall(r"\w","abcdefg") 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-01-21T11:19:08.733

除了[Douglas Leeder 的解决方案](https://stackoverflow.com/questions/464736/python-regular-expressions-how-to-capture-multiple-groups-from-a-wildcard-expre#464755)，这里是解释：

在正则表达式中，组数是固定的。将量词放在组后面不会增加组计数（想象所有其他组索引都会增加，因为更早的组匹配不止一次）。

当需要多次匹配时，带有量词的组是使复杂子表达式原子化的方式。正则表达式引擎除了将最后一个匹配项仅保存到组之外别无他法。简而言之：没有办法用一个“手无寸铁”的正则表达式来实现你想要的，你必须找到另一种方法。

# browser - 在不同的进程中启动网页

> ID：464748
> 
> 赞同：0
> 
> 时间：2009-01-21T10:31:27.470
> 
> 标签：browser

当在页面上单击特定链接时，我想在不同的进程中启动浏览器。当我检查网络时，我发现了以下提示：[http](http://www.dslreports.com/faq/3849) ://www.dslreports.com/faq/3849 。但是在那里我们必须更改注册表。有没有什么简单的方法可以在不接触注册表的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-22T18:07:05.133

如果您使用[Google Chrome](http://www.google.com/chrome)浏览器，每个新窗口或标签页都会在单独的进程中运行。 [Internet Explorer 版本 8](http://www.microsoft.com/windows/Internet-explorer/beta/default.aspx)也会这样做（目前处于第二轮测试阶段）。

如果从开始菜单或命令行或电子邮件中的链接（但不是通过单击 IE 中的链接）启动早期版本的 IE，它将在单独的进程中运行一个新窗口。我想你可以创建一个客户端将运行的代理，它会拦截你关心的链接并通过运行命令行请求来启动它们。不过，这似乎比修改注册表更麻烦（假设注册表更改仍然有效——看起来您的链接来自 2002 年）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T10:49:31.257

除非您更改客户端计算机设置或它正在运行的软件，否则我认为这是不可能的。

你为什么要这样做？

# language-agnostic - 源代码中的类成员顺序

> ID：464751
> 
> 赞同：8
> 
> 时间：2009-01-21T10:32:20.277
> 
> 标签：language-agnostic, refactoring

之前有人[问过这个问题（问题号 308581）](https://stackoverflow.com/questions/308581/how-should-i-order-the-members-of-a-c-class)，但是那个特定的问题和答案有点 C++ 特有的，而且很多东西在 Java 或 C# 等语言中并不真正相关。

问题是，即使在重构之后，我发现我的源代码文件中有一些混乱。我的意思是，函数体没问题，但我对函数本身的排序方式不太满意。当然，在像 Visual Studio 这样的 IDE 中，如果您记得成员的调用方式，则相对容易找到成员，但情况并非总是如此。

我已经尝试了几种方法，例如将公共方法放在首位，但这种方法的缺点是文件顶部的函数最终会调用文件底部的另一个私有函数，所以我最终滚动了所有时间。

另一种方法是尝试将相关方法组合在一起（可能分成区域），但显然这有其局限性，好像同一个类中有许多不相关的方法，那么也许是时候将类分解为两个或更多更小的类了。

所以请考虑一下：您的代码已被正确重构，以满足*Code Complete*中提到的所有要求，但您仍然希望为**符合人体工程学的目的**重新排序您的方法。你的方法是什么？

（实际上，虽然不完全是技术问题，但这个问题真的让我非常恼火，所以如果有人能提出一个好的方法，我将不胜感激）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-21T10:38:14.057

实际上，我完全依赖于我的 IDE 的导航功能，即 Visual Studio。大多数时候我使用 F12 跳转到声明（或 Shift-F12 查找所有引用）和 Ctrl+- 跳转回来。

原因是大部分时间我都在处理我自己没有编写的代码，我不想花时间重新排序方法和字段。

PS：而且我还使用[RockScroll](http://www.hanselman.com/blog/IntroducingRockScroll.aspx)，这是一个 VS 插件，它使导航和滚动大文件变得非常容易

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-21T10:37:33.497

如果您真的在滚动和查找时遇到问题，那么您可能患有神级综合症。

Fwiw，我个人倾向于：

```
class
{
  #statics (if any)

  #constructor

  #destructor (if any)

  #member variables

  #properties (if any)

  #public methods (overrides, etc, first then extensions)

  #private (aka helper) methods (if any)
} 
```

而且我对区域块没有反感，也没有评论，所以可以随意使用两者来表示关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T10:54:26.503

从我（Java）的角度来看，我会按顺序说构造函数、公共方法、私有方法。我总是尝试将实现某个接口的方法组合在一起。

我最喜欢的武器是 IntelliJ IDEA，它有一些很好的折叠方法体的可能性，因此即使它们在源文件中的实际位置相隔 700 行，也很容易将两个方法直接显示在彼此之上。

我会小心地在实际源代码中胡乱摆弄方法的位置。您的 IDE 应该使您能够以您想要的方式查看源代码。在开发人员可以使用他们选择的 IDE 的项目上工作时，这一点尤其重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T11:35:20.447

我的命令，它来了。

*   我通常把静态放在第一位。

*   接下来是成员变量和属性，访问一个特定成员的属性与该成员组合在一起。我尝试将相关信息组合在一起，例如所有包含路径信息的字符串。

*   第三是构造函数（或构造函数，如果你有几个）。

*   之后按照方法。这些是按该特定类看起来合乎逻辑的任何东西排序的。我经常按访问级别对方法进行分组：私有、受保护、公共。但是我最近有一个类需要从它的基类中重写很多方法。因为我在那里做了很多工作，所以我把它们放在一个组中，不管他们的访问级别如何。

我的建议：订购您的课程，以帮助您的工作流程。不要简单地订购它们，只是为了有秩序。花在订购上的时间应该是一项投资，可以帮助您节省更多时间，否则您需要上下滚动。

在 C# 中，我使用`#region`将这些组彼此分开，但这是一个品味问题。有很多人不喜欢地区。我愿意。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-21T11:47:45.587

我将刚刚创建的最新方法放在类的顶部。这样，当我打开项目时，我又回到了我正在开发的最后一种方法。我更容易回到“区域”。

这也反映了我刚刚创建的方法（使用其他方法）是其他方法的最顶层。

将相关功能组合在一起，不要硬着头皮将所有私有功能放在最底层。同样，模仿 C# 属性的设计原理，相关函数应该彼此靠近，C# 语言的属性构造强化了这一想法。

* * *

PS
如果只有 C# 可以嵌套 Pascal 或 Delphi 等函数。也许 Anders Hejlsberg 可以把它放在 C# 中，他还发明了 Turbo Pascal 和 Delphi :-) [D](http://www.digitalmars.com/d/2.0/function.html)语言有嵌套函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-21T19:04:47.467

几年前，我花了太多时间思考这个问题，并想出了一个非常复杂的系统来对类中的声明进行排序。顺序取决于访问说明符，方法或字段是静态的、瞬态的、易失的等。

这不值得。恕我直言，您不会从如此复杂的安排中获得真正的好处。

我现在做的事情要简单得多：

1.  构造函数（默认构造函数优先，否则顺序无关紧要。）
2.  方法，按名称排序（静态与非静态无关，抽象与具体，虚拟与最终等）
3.  内部类，按名称排序（接口与类等无关紧要）
4.  字段，按名称排序（静态与非静态无关紧要。）首先是可选的常量（公共静态最终），但这不是必需的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-05T09:03:46.173

我很确定有一个视觉工作室插件可以重新排序代码中的类成员。

所以即类顶部的ctors然后是静态方法然后是实例方法......类似的东西

不幸的是我不记得这个插件的名字了！我也认为这个插件是免费的！也许其他人可以帮助我们？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-28T17:57:46.197

我个人对构建课程的看法如下：

我很严格

*   首先是常量和静态字段，按字母顺序排列
*   alpha 顺序的非私有内部类和枚举
*   字段（和适用的属性），按字母顺序排列
*   ctors（和适用的 dtors）
*   静态方法和工厂方法
*   下面的方法，以 alpha 顺序排列，无论可见性如何。

我一直使用 IDE 的自动格式化功能。所以我`Ctrl+Shift+F`工作的时候经常打。我将自动格式化功能导出到一个我随身携带的 xml 文件中。

在进行合并和变基时，它有助于走下坡路。它是您可以在您的 IDE 或构建过程中自动化的类型，这样您就不必为此费脑筋。

我并不是说**我**的方式就是方式。但是选择一些东西，配置它，始终如一地使用它，直到它成为一种反射，然后忘记它。

# delphi - ADO、Adonis、更新标准

> ID：464754
> 
> 赞同：1
> 
> 时间：2009-01-21T10:33:05.767
> 
> 标签：delphi, ado

在一个表单上，我有一个 Quantum Grid 和一些支持 db 的编辑组件。在网格中添加新记录时，在网格和单独的编辑组件中键入一些编辑值，我收到一个错误：

> EOleException：无法找到要更新的行。自上次读取以来，某些值可能已更改

经过一番谷歌搜索，我认为将“更新标准”属性从 adCriteriaAllCols 更改为 adCriteriaKey 可能是正确的解决方案。但是，我如何以及何时在 Adonis 查询中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-02T05:55:09.613

如果您的数据集包含自动增量字段或一个或多个字段具有默认值，那么这可能是问题所在。调用 Post 字段后，更改它们在数据库中的值，但您的数据集可能无法检测到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T18:11:43.327

虽然我不使用 Adonis，但我相信它有可能使用 TClientDataset (CDS) 用来识别构成主键的字段的相同机制：属性***TField.ProviderFlags***。

我相信这可能是一个开始寻找的好地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-02-04T13:13:38.213

实际上 ADO 提供了[动态属性](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680933%28v=vs.85%29.aspx)来控制基于查询的更新 (QBU) 行为 大多数代码都包含在 ADOInt.pas 中，相应的事件是记录集属性（任何 TADODataSet）的 OnAfterOpen 和连接属性（TADOConnection）的 OnCreate。我猜“更新标准”不是这种情况下的解决方案，因为它处理 WHERE 子句来指定用于更新的字段。您可以按如下方式更改“更新重新同步”：

```
//After open a TCustomADODataSet
  TCustomADODataSet(DataSet).Properties['Update Resync'].Value :=
    adResyncAutoIncrement + adResyncUpdates + adResyncInserts; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-25T07:14:06.433

如果您的查询中有连接表：

TADOQuery 不能在 sql 数据库中编辑和发布数据。

您可以创建其他 TADOQuery 并通过主键选择而无需任何连接表并编辑然后将数据发布到 sql 数据库中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-15T21:52:06.317

我遇到了类似的问题 - 更新所有值都相同的行会导致您遇到错误。我在 ado 连接的末尾添加了标志“Option=2”，这解决了问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-12T19:30:13.097

这是旧的。但我的情况可能发生在别人身上。所以我发布了这个答案。

这个错误也发生在我身上。我正在使用 Access 数据库并在表单上使用一些 TADOTable。关系是主从关系，我将所有表与 IDE 设计器连接在一起。我的桌子是 tbl_Floor、tbl_FloorParts、tbl_Seat，其中 tbl_Floor 是 tbl_FloorParts 的主人，而 tbl_FloorParts 是 tbl_Seat 的主人。所以为了解决这个错误，我做了这个技巧。

```
procedure Tfrm_Main.UpdateTblFloor(...);
var
  FID:Integer;
  q:TADOQuery
begin
  FID:=tbl_Floor.FieldByName('FID').AsInteger;
  tbl_Floor.Close;
  q:=TADOQuery.Create(nil);
  try
    q.Connection:=tbl_Floor.Connection;
    q.SQL.Add('Update [Floor]');
    q.SQL.Add(...);//Set Fields that needed to be updated
    q.SQL.Add('where [FID]='+IntToStr(FID));
    q.ExecSQL;  
  finally
    q.free;
  end;
  tbl_Floor.Open;
  tbl_Floor.Locate('FID',FId,[loPartialKey]);
end; 
```

我为 tbl_Floor,tbl_FloorParts 添加了这些事件

```
procedure Tfrm_Main.tbl_FloorAfterOpen(DataSet: TDataSet);
begin
  tbl_FloorParts.Open;
end;

procedure Tfrm_Main.tbl_FloorBeforeClose(DataSet: TDataSet);
begin
  tbl_FloorParts.Close;
end;

procedure Tfrm_Main.tbl_FloorPartsAfterOpen(DataSet: TDataSet);
begin
  tbl_Seat.Open;
end;

procedure Tfrm_Main.tbl_FloorPartsBeforeClose(DataSet: TDataSet);
begin
  tbl_Seat.Close;
end; 
```

# c# - 是否可以将变量转换为存储在另一个变量中的类型？

> ID：464765
> 
> 赞同：18
> 
> 时间：2009-01-21T10:36:28.460
> 
> 标签：c#, casting

这是我需要做的：

```
object foo = GetFoo();
Type t = typeof(BarType);
(foo as t).FunctionThatExistsInBarType(); 
```

可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-01-21T10:58:15.607

您可以使用[Convert.ChangeType](http://msdn.microsoft.com/en-us/library/dtb69x08.aspx)方法。

```
object foo = GetFoo(); 
Type t = typeof(string);
string bar = (string)Convert.ChangeType(foo, t); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-01-21T10:39:35.117

你不能。C# 没有实现[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)。

您必须实现一个接口并强制转换为它。

（但是有人尝试这样做。以[Duck Typing Project](http://www.deftflux.net/blog/page/Duck-Typing-Project.aspx)为例。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-11T09:17:13.533

由于在c#中添加了动态，我认为我们可以这样做：

```
class Program {
    static void Main(string[] args) {
        List<int> c = new List<int>(); 
        double i = 10.0;
        Type intType = typeof(int);
        c.Add(CastHelper.Cast(i, intType)); // works, no exception!
    }
}

class CastHelper {
    public static dynamic Cast(object src, Type t) {
        var castMethod = typeof(CastHelper).GetMethod("CastGeneric").MakeGenericMethod(t);
        return castMethod.Invoke(null, new[] { src });
    }
    public static T CastGeneric<T>(object src) {
        return (T)Convert.ChangeType(src, typeof(T));
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-21T12:05:59.713

您最初的问题是有缺陷的，因为您要求将变量视为编译时未知的类型，但请注意，当您声明变量时，您在左侧定义了字符串。从 3.5 开始的 C# 是静态类型的。

一旦动态可用，您可以执行以下操作：

```
dynamic foo = GetFoo();
foo.FunctionThatExistsInBarType(); 
```

因为当你不知道类型是什么但你知道它总是支持实例方法 FunctionThatExistsInBarType();

现在你被迫使用反射（或代码生成，它实际上相当于很多相同的东西，但前期成本更高，后期速度更快）。

```
// any of these can be determined at runtime
Type t = typeof(Bar);
string methodToCall = "FunctionThatExistsInBarType";
Type[] argumentTypes = new Type[0];
object[] arguments = new object[0];
object foo;
// invoke the method - 
// example ignores overloading and exception handling for brevity
// assumption: return type is void or you don't care about it
t.GetMethod(methodToCall, BindingFalgs.Public | BindingFlags.Instance)
    .Invoke(foo, arguments); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-23T09:36:40.660

如果您在编译时知道所有必需的类型，那么[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)（有点）是可能的：

```
class BarFoo {}
class Foo {}
class Bar {}

class Program
{
    static void Main( )
    {
        var foo = new Foo( );
        var bar = new Bar( );
        var barfoo = new BarFoo( );

        Console.WriteLine(DoStuff(foo));
        Console.WriteLine(DoStuff(bar));
        Console.WriteLine(DoStuff(barfoo));

    }

    static string DoStuff(Foo foo) { return "DoStuff(Foo foo)"; }
    static string DoStuff(Bar bar) { return "DoStuff(Bar bar)"; }
    static string DoStuff(Base fb) { return "DoStuff(object fb)"; }
} 
```

输出：

```
Dostuff(Foo foo)
Dostuff(Bar bar);
DoStuff(object fb); 
```

如果您最终实现了许多基本上完全相同的方法，请考虑实现一个接口。

# wcf - 部署 WCF 服务和“找不到资源”

> ID：464771
> 
> 赞同：1
> 
> 时间：2009-01-21T10:38:21.047
> 
> 标签：wcf

可能这是一个新手问题，我正在生产中部署一个支持 Ajax 的 WCF 服务，它说“找不到资源”我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T15:26:37.143

哦，这是因为我的主机在 IIS 中使用了 3 个域名，所以我不得不使用 CustomHostFactory 来解决这个问题

[http://zubairdotnet.blogspot.com/2008/08/error-collection-already-contains.html](http://zubairdotnet.blogspot.com/2008/08/error-collection-already-contains.html)

# php - 构建个人 CMS - 类和库

> ID：464775
> 
> 赞同：3
> 
> 时间：2009-01-21T10:40:17.063
> 
> 标签：php, content-management-system, object

我正在构建我的个人 CMS，需要您的建议来组织核心功能和课程。我有文件夹：

```
/shared
   /classes
       DB.php
       Session.php
       Config.php
       ...
   /libraries
       Arrays.php
       DateTime.php
       Email.php
       ... 
```

“类”文件夹中的文件包含核心类（每个文件一个类）。

现在的问题是关于 /libraries/ - 它们包含可以在任何类中使用的函数，有时它们使用另一个库中的一些其他函数，有时它们需要访问一些核心类。我应该将它们写为函数，还是将它们设为静态并包装在某个类中？基本上我到处都需要它们，但要让它们井井有条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T21:02:22.237

> 我应该将它们写为函数，还是将它们设为静态并包装在某个类中？基本上我到处都需要它们，但要让它们井井有条。

你有没有研究过命名空间？将所有函数包装到命名空间中可能是您​​最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T21:28:11.077

我的建议是首先考虑 CMS 的架构目标。当然，这将是 100% 属于你的，但这并不意味着你不会因为不确定在哪里以及如何上钩、它做什么以及我如何从这里获得它而受苦。

这就是为什么我绝对不建议你让库调用库。从我的角度来看，除了应用程序流中的前几个核心类之外，您的任何类都不应该依赖于其他任何东西，因为您希望将工作分布在其他一些单一用途的自包含类中。你的核心类应该以单一性和原子性为目标。

我不知道你的架构模式将是什么（我假设它将是 MVC、HMVC 或 PAC），但我认为你最好先定义一些核心类 [/core]，它们将为初始化奠定基础应用程序通过实例化一些库 [/libraries] 来解析传入的请求请求并在初始化请求的控制器 [/controllers] 之前执行一些默认任务。

图书馆应该有一个单一的目的。会话处理库应该单独处理会话、路由库路由等。最初，您可以创建基本控制器和基本模型并将其放入 [/core] 并让控制器 [/controllers] 和模型 [/models] 扩展您的基本来自 [/core] 的控制器和模型。

与往常一样，组件的耦合越少越好。一个好的解决方案将是轻量级、小型和广泛的。如果您将来更改任何设计思路，您可以简单地更改核心类并对整个应用程序产生巨大影响，而无需在其他地方进行任何进一步的更改，这将很有帮助。

# powershell - 如何使用 Powershell 更改文件的属性？

> ID：464777
> 
> 赞同：27
> 
> 时间：2009-01-21T10:40:32.430
> 
> 标签：powershell

我有一个 Powershell 脚本，可以将文件从一个位置复制到另一个位置。复制完成后，我想清除源位置中已复制文件的存档属性。

如何使用 Powershell 清除文件的存档属性？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-01-21T10:49:06.313

您可以像这样使用旧的 dos attrib 命令：

```
attrib -a *.* 
```

或者使用 Powershell 来实现，你可以这样做：

```
$a = get-item myfile.txt
$a.attributes = 'Normal' 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-01-21T20:34:12.187

由于 Attributes 基本上是一个位掩码字段，因此您需要确保清除存档字段，同时保留其余字段：

```
PS C:\> $f = 获取项目 C:\Archives.pst
PS C:\> $f.Attributes
存档，NotContentIndexed
PS C:\> $f.Attributes = $f.Attributes -band (-bnot [System.IO.FileAttributes]::Archive)
PS C:\> $f.Attributes
NotContentIndexed
PS H:\>

```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-01-21T10:58:33.453

从[这里](http://scriptolog.blogspot.com/2007/10/file-attributes-helper-functions.html)：

```
function Get-FileAttribute{
    param($file,$attribute)
    $val = [System.IO.FileAttributes]$attribute;
    if((gci $file -force).Attributes -band $val -eq $val){$true;} else { $false; }
} 

function Set-FileAttribute{
    param($file,$attribute)
    $file =(gci $file -force);
    $file.Attributes = $file.Attributes -bor ([System.IO.FileAttributes]$attribute).value__;
    if($?){$true;} else {$false;}
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-31T11:13:06.653

```
$attr = [System.IO.FileAttributes]$attrString
$prop = Get-ItemProperty -Path $pathString
# SetAttr
$prop.Attributes = $prop.Attributes -bor $attr
# ToggleAttr
$prop.Attributes = $prop.Attributes -bxor $attr
# HasAttr
$hasAttr = ($prop.Attributes -band $attr) -eq $attr
# ClearAttr
if ($hasAttr) { $prop.Attributes -bxor $attr } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-11-25T20:40:38.350

您可以使用以下命令来切换行为

```
$file = (gci e:\temp\test.txt)
$file.attributes
Archive

$file.attributes = $file.Attributes -bxor ([System.IO.FileAttributes]::Archive)
$file.attributes
Normal

$file.attributes = $file.Attributes -bxor ([System.IO.FileAttributes]::Archive)
$file.attributes
Archive 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-21T20:27:34.743

米奇的答案适用于大多数属性，但[不适](https://mcpmag.com/articles/2012/03/20/powershell-dir-command-tricks.aspx)用于“压缩”。如果要使用 PowerShell 在文件夹上设置压缩属性，则必须使用命令行工具[compact](https://technet.microsoft.com/en-us/library/cc976811.aspx)

```
compact /C /S c:\MyDirectory 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-13T05:01:51.563

我发现西蒙斯蒂尔的回答很有帮助，尽管我需要修改的不仅仅是一个文件，所以我将其更改为以下内容：

```
 $BadAttributes = Get-ChildItem "C:\PATH" -Recurse -Force

foreach($File in $BadAttributes) {

if (Test-Path -Path $File -IsValid)
{

$File.attributes = 'Normal'

}

}

# Check file attributes
Get-ItemProperty -Path "C:\PATH" | Format-list -Property Attributes -Force 
```

# c# - .NET：由于事务超时导致异步回滚

> ID：464781
> 
> 赞同：2
> 
> 时间：2009-01-21T10:42:02.943
> 
> 标签：c#, .net, multithreading, timeout, transactions

在 C# 项目中，我在`System.Transactions.Transaction`. *当事务超时发生时，回滚在工作线程中执行：显然，事务使用计时器并在计时器到期时调用计时器回调（ Microsoft*关于此问题
的文档很少）。因此，我的事务资源中 ) 的实现是异步调用的。 *`IEnlistmentNotification.Rollback(...`*

 *我的问题是：我该如何处理？当然，回滚代码会更改资源的内部状态，例如通过丢弃更改。看来我必须同步对这个资源的所有访问。但是，该资源不是为线程保存而设计的。有没有人有这个问题的经验，或者是否有某种“最佳实践”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-10-24T20:19:54.463

我想您可以锁定资源的回滚方法以使它们同步，因为回滚将是奇怪的情况，并且序列化访问不会在性能方面造成太多问题...

使用 IoC，例如 Windsor，实现 IInterceptor 并使用拦截器锁定所有 IResource.Rollback() 方法。这是一个正交的问题，所以它应该作为一个来实现。

# java - Java ReentrantReadWriteLocks - 在读锁中如何安全地获取写锁？

> ID：464784
> 
> 赞同：70
> 
> 时间：2009-01-21T10:42:18.497
> 
> 标签：java, concurrency, reentrantreadwritelock

我目前在我的代码中使用[ReentrantReadWriteLock](http://java.sun.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)来同步对树状结构的访问。这个结构很大，可以同时被许多线程读取，偶尔会修改其中的一小部分——所以它似乎很适合读写习惯。我知道对于这个特定的类，不能将读锁提升为写锁，因此根据 Javadocs，必须在获得写锁之前释放读锁。我以前在不可重入上下文中成功地使用过这种模式。

然而，我发现我无法在不永久阻塞的情况下可靠地获取写锁。由于读锁是可重入的，我实际上是这样使用它的，所以简单的代码

```
lock.getReadLock().unlock();
lock.getWriteLock().lock()
```

如果我以可重入方式获得了读锁，则可以阻止。每次解锁调用只会减少保持计数，并且只有在保持计数达到零时才会真正释放锁。

**编辑**澄清这一点，因为我认为我最初解释得不太好 - 我知道这个类中没有内置的锁升级，我必须简单地释放读锁并获得写锁。我的问题是/是，无论其他线程在做什么，调用`getReadLock().unlock()`可能不会真正释放*该*线程对锁的持有，如果它以可重入方式获得它，在这种情况下，调用`getWriteLock().lock()`将永远阻塞，因为该线程仍然持有读取锁定并因此阻止自己。

例如，这个代码片段永远不会到达 println 语句，即使在没有其他线程访问锁的情况下运行单线程：

```
final ReadWriteLock lock = new ReentrantReadWriteLock();
lock.getReadLock().lock();

// In real code we would go call other methods that end up calling back and
// thus locking again
lock.getReadLock().lock();

// Now we do some stuff and realise we need to write so try to escalate the
// lock as per the Javadocs and the above description
lock.getReadLock().unlock(); // Does not actually release the lock
lock.getWriteLock().lock();  // Blocks as some thread (this one!) holds read lock

System.out.println("Will never get here"); 
```

所以我问，有没有一个很好的成语来处理这种情况？具体来说，当一个持有读锁的线程（可能是可重入的）发现它需要进行一些写操作，因此想要“挂起”自己的读锁以获取写锁（根据需要在其他线程上阻塞以释放他们对读锁的持有），然后在相同状态下“拿起”它对读锁的持有？

由于这个 ReadWriteLock 实现是专门设计为可重入的，当可以重入获取锁时，肯定有一些明智的方法可以将读锁提升为写锁吗？这是关键部分，这意味着天真的方法不起作用。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-09-13T11:31:54.160

这是一个老问题，但这里既有解决问题的方法，也有一些背景信息。

正如其他人所指出的，经典的[读写锁](http://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock)（如 JDK [ReentrantReadWriteLock](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)）本质上不支持将读锁升级为写锁，因为这样做很容易出现死锁。

如果您需要在不首先释放读锁的情况下安全地获取写锁，那么有一个更好的选择：改为查看*读-写-**更新***锁。

[我编写了一个 ReentrantReadWrite_Update_Lock，并在此处](https://github.com/npgall/concurrent-locks)根据 Apache 2.0 许可将其作为开源发布。我还发布了有关 JSR166[并发兴趣邮件列表](http://cs.oswego.edu/pipermail/concurrency-interest/2013-July/011621.html)的方法的详细信息，并且该方法在该列表上的成员反复审查中幸免于难。

该方法非常简单，正如我在并发兴趣中提到的那样，这个想法并不是全新的，因为它至少早在 2000 年就在 Linux 内核邮件列表中讨论过。此外，.Net 平台的[ReaderWriterLockSlim](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)支持锁升级还。到目前为止，这个概念实际上还没有在 Java (AFAICT) 上实现。

*这个想法是在读*锁和*写*锁之外提供一个*更新*锁。更新锁是介于读锁和写锁之间的一种中间类型的锁。和写锁一样，一次只有一个线程可以获取更新锁。但就像读锁一样，它允许对持有它的线程进行读访问，并同时对持有常规读锁的其他线程进行读访问。关键特性是更新锁可以从它的只读状态升级到写锁，这不容易死锁，因为只有一个线程可以持有更新锁并且一次可以升级。

 **这支持锁升级，而且在具有*先读后写*访问模式的应用程序中，它比传统的读写器锁更有效，因为它在更短的时间内阻塞了读取线程。

[网站](https://github.com/npgall/concurrent-locks)上提供了示例用法。该库具有 100% 的测试覆盖率，并且位于 Maven 中心。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-01-21T10:58:19.697

我在这方面取得了一点进展。通过将锁变量显式声明为 a`ReentrantReadWriteLock`而不是简单的 a `ReadWriteLock`（不太理想，但在这种情况下可能是必要的邪恶），我可以调用该[`getReadHoldCount()`](http://java.sun.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html#getReadHoldCount())方法。这使我可以获取当前线程的保持数，因此我可以多次释放读锁（然后重新获取相同的数量）。所以这是有效的，正如一个快速而肮脏的测试所示：

```
final int holdCount = lock.getReadHoldCount();
for (int i = 0; i < holdCount; i++) {
   lock.readLock().unlock();
}
lock.writeLock().lock();
try {
   // Perform modifications
} finally {
   // Downgrade by reacquiring read lock before releasing write lock
   for (int i = 0; i < holdCount; i++) {
      lock.readLock().lock();
   }
   lock.writeLock().unlock();
} 
```

不过，这会是我能做的最好的吗？它感觉不是很优雅，我仍然希望有一种方法可以以一种不那么“手动”的方式来处理它。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2011-01-29T02:02:11.690

你想做的应该是可能的。问题是Java没有提供可以将读锁升级为写锁的实现。具体来说，javadoc ReentrantReadWriteLock 说它不允许从读锁升级到写锁。

无论如何，Jakob Jenkov 描述了如何实现它。有关详细信息，请参阅[http://tutorials.jenkov.com/java-concurrency/read-write-locks.html#upgrade](http://tutorials.jenkov.com/java-concurrency/read-write-locks.html#upgrade)。

## 为什么需要升级读写锁

从读锁升级到写锁是有效的（尽管在其他答案中断言相反）。可能会发生死锁，因此部分实现是识别死锁并通过在线程中抛出异常以打破死锁来打破死锁的代码。这意味着作为事务的一部分，您必须处理 DeadlockException，例如，通过重新进行工作。一个典型的模式是：

```
boolean repeat;
do {
  repeat = false;
  try {
   readSomeStuff();
   writeSomeStuff();
   maybeReadSomeMoreStuff();
  } catch (DeadlockException) {
   repeat = true;
  }
} while (repeat); 
```

如果没有这种能力，实现可序列化事务的唯一方法是一致地读取一堆数据，然后根据所读取的内容写入一些内容，这是在开始之前预期写入将是必要的，因此获得对所有数据的 WRITE 锁在写需要写的内容之前阅读。这是 Oracle 使用的 KLUDGE（SELECT FOR UPDATE ...）。此外，它实际上降低了并发性，因为在事务运行时没有其他人可以读取或写入任何数据！

特别是在获得写锁之前释放读锁会产生不一致的结果。考虑：

```
int x = someMethod();
y.writeLock().lock();
y.setValue(x);
y.writeLock().unlock(); 
```

您必须知道 someMethod() 或它调用的任何方法是否在 y 上创建了可重入读锁！假设你知道它确实如此。那么如果你先释放读锁：

```
int x = someMethod();
y.readLock().unlock();
// problem here!
y.writeLock().lock();
y.setValue(x);
y.writeLock().unlock(); 
```

另一个线程可能会在你释放它的读锁之后，在你获得它的写锁之前改变 y。所以 y 的值不会等于 x。

## 测试代码：将读锁升级为写锁块：

```
import java.util.*;
import java.util.concurrent.locks.*;

public class UpgradeTest {

    public static void main(String[] args) 
    {   
        System.out.println("read to write test");
        ReadWriteLock lock = new ReentrantReadWriteLock();

        lock.readLock().lock(); // get our own read lock
        lock.writeLock().lock(); // upgrade to write lock
        System.out.println("passed");
    }

} 
```

## 使用 Java 1.6 输出：

```
read to write test
<blocks indefinitely> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2010-04-04T23:45:44.707

你想要做的事情根本不可能通过这种方式。

你不能有一个读/写锁，你可以毫无问题地从读升级到写。例子：

```
void test() {
    lock.readLock().lock();
    ...
    if ( ... ) {
        lock.writeLock.lock();
        ...
        lock.writeLock.unlock();
    }
    lock.readLock().unlock();
} 
```

现在假设，两个线程将进入该函数。（你假设并发，对吧？否则你一开始就不会关心锁......）

假设两个线程将同时启动*并且*运行*速度同样快*。这意味着，两者都将获得一个读锁，这是完全合法的。但是，最终两者都将尝试获取写锁，而它们中的任何一个都不会获得：各自的其他线程持有读锁！

根据定义，允许将读锁升级为写锁的锁很容易出现死锁。对不起，但你需要修改你的方法。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-02-24T06:05:47.633

Java 8 现在有`java.util.concurrent.locks.StampedLock` 一个`tryConvertToWriteLock(long)`API

更多信息请访问[http://www.javaspecialists.eu/archive/Issue215.html](http://www.javaspecialists.eu/archive/Issue215.html)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-01-21T11:01:38.283

您正在寻找的是锁升级，并且使用标准 java.concurrent ReentrantReadWriteLock 是不可能的（至少不是原子的）。你最好的办法是解锁/锁定，然后检查没有人在两者之间进行修改。

您正在尝试做的事情，强制所有读取锁定不是一个好主意。读锁的存在是有原因的，你不应该写。:)

**编辑：**
正如 Ran Biron 指出的那样，如果您的问题是饥饿（一直在设置和释放读取锁，永远不会降至零），您可以尝试使用公平排队。但你的问题听起来不像是你的问题？

**编辑 2：**
我现在看到了您的问题，您实际上已经在堆栈上获得了多个读锁，并且您想将它们转换为写锁（升级）。这在 JDK 实现中实际上是不可能的，因为它不跟踪读锁的所有者。可能有其他人持有您看不到的读锁，并且它不知道有多少读锁属于您的线程，更不用说您当前的调用堆栈（即您的循环正在杀死*所有*读锁，不只是你自己的，所以你的写锁不会等待任何并发读者完成，你最终会弄得一团糟）

我实际上遇到了类似的问题，我最终编写了自己的锁来跟踪谁拥有什么读锁并将这些升级为写锁。虽然这也是一种 Copy-on-Write 类型的读/写锁（允许一个 writer 沿着 reader），所以还是有点不同。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-03-21T13:30:10.290

对 OP：只需解锁与您进入锁一样多的次数，就这么简单：

```
boolean needWrite = false;
readLock.lock()
try{
  needWrite = checkState();
}finally{
  readLock().unlock()
}

//the state is free to change right here, but not likely
//see who has handled it under the write lock, if need be
if (needWrite){
  writeLock().lock();
  try{
    if (checkState()){//check again under the exclusive write lock
   //modify state
    }
  }finally{
    writeLock.unlock()
  }
} 
```

在写锁作为任何自尊并发程序检查所需的状态。

不应在调试/监控/快速故障检测之外使用 HoldCount。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-11T07:55:31.893

像这样的东西呢？

```
class CachedData
{
    Object data;
    volatile boolean cacheValid;

    private class MyRWLock
    {
        private final ReentrantReadWriteLock rwl = new ReentrantReadWriteLock();
        public synchronized void getReadLock()         { rwl.readLock().lock(); }
        public synchronized void upgradeToWriteLock()  { rwl.readLock().unlock();  rwl.writeLock().lock(); }
        public synchronized void downgradeToReadLock() { rwl.writeLock().unlock(); rwl.readLock().lock();  }
        public synchronized void dropReadLock()        { rwl.readLock().unlock(); }
    }
    private MyRWLock myRWLock = new MyRWLock();

    void processCachedData()
    {
        myRWLock.getReadLock();
        try
        {
            if (!cacheValid)
            {
                myRWLock.upgradeToWriteLock();
                try
                {
                    // Recheck state because another thread might have acquired write lock and changed state before we did.
                    if (!cacheValid)
                    {
                        data = ...
                        cacheValid = true;
                    }
                }
                finally
                {
                    myRWLock.downgradeToReadLock();
                }
            }
            use(data);
        }
        finally
        {
            myRWLock.dropReadLock();
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-21T12:15:46.183

我想这`ReentrantLock`是由树的递归遍历引起的：

```
public void doSomething(Node node) {
  // Acquire reentrant lock
  ... // Do something, possibly acquire write lock
  for (Node child : node.childs) {
    doSomething(child);
  }
  // Release reentrant lock
} 
```

你不能重构你的代码以将锁处理移到递归之外吗？

```
public void doSomething(Node node) {
  // Acquire NON-reentrant read lock
  recurseDoSomething(node);
  // Release NON-reentrant read lock
}

private void recurseDoSomething(Node node) {
  ... // Do something, possibly acquire write lock
  for (Node child : node.childs) {
    recurseDoSomething(child);
  }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-12-02T20:52:12.363

那么，我们是否期望 java 仅在该线程尚未对 readHoldCount 做出贡献时才增加读取信号量计数？这意味着与仅仅维护 int 类型的 ThreadLocal readholdCount 不同，它应该维护 Integer 类型的 ThreadLocal Set（维护当前线程的 hasCode）。如果这没问题，我建议（至少现在）不要在同一个类中调用多个读取调用，而是使用一个标志来检查当前对象是否已经获得了读取锁。

```
private volatile boolean alreadyLockedForReading = false;

public void lockForReading(Lock readLock){
   if(!alreadyLockedForReading){
      lock.getReadLock().lock();
   }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-07-02T15:07:46.817

[在ReentrantReadWriteLock](http://edelstein.pebbles.cs.cmu.edu/jadeite/main.php?api=java6&state=class&package=java.util.concurrent.locks&class=ReentrantReadWriteLock)的文档中找到。它清楚地表明，读取器线程在尝试获取写锁时永远不会成功。根本不支持您尝试实现的目标。您**必须**在获取写锁之前释放读锁。降级仍有可能。

> 重入
> 
> 此锁允许读取器和写入器以 {@link ReentrantLock} 的样式重新获取读取或写入锁。在写线程持有的所有写锁都被释放之前，不允许非重入读者。
> 
> 此外，写入者可以获取读锁，但反之则不行。在其他应用程序中，当在调用或回调在读锁下执行读取的方法期间持有写锁时，重入可能很有用。**如果读者试图获取写锁，它将永远不会成功。**

来自上述来源的示例用法：

```
 class CachedData {
   Object data;
   volatile boolean cacheValid;
   ReentrantReadWriteLock rwl = new ReentrantReadWriteLock();

   void processCachedData() {
     rwl.readLock().lock();
     if (!cacheValid) {
        // Must release read lock before acquiring write lock
        rwl.readLock().unlock();
        rwl.writeLock().lock();
        // Recheck state because another thread might have acquired
        //   write lock and changed state before we did.
        if (!cacheValid) {
          data = ...
          cacheValid = true;
        }
        // Downgrade by acquiring read lock before releasing write lock
        rwl.readLock().lock();
        rwl.writeLock().unlock(); // Unlock write, still hold read
     }

     use(data);
     rwl.readLock().unlock();
   }
 } 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2009-01-21T10:59:18.117

在 ReentrantReadWriteLock 上使用“公平”标志。“公平”意味着锁定请求按照先到先得的方式提供服务。您可能会遇到性能下降，因为当您发出“写入”请求时，所有后续“读取”请求都将被锁定，即使它们本可以在预先存在的读取锁仍被锁定时得到处理。

# c++ - 将基于 Mingw32 的代码移植到 msvc2008

> ID：464788
> 
> 赞同：0
> 
> 时间：2009-01-21T10:43:51.050
> 
> 标签：c++, debugging, visual-c++, cross-platform, mingw

我们最近有一个使用 Qt 的声子组件的新要求，它在 Windows 上需要 Visual Studio。

我安装了 VS2008 并运行了编译。由于 make 不能像 nmake 那样工作，存在一堆问题。

由于我需要维护跨平台，我想测试正在使用哪个编译器，以便我可以根据需要进行更改。

一个例子是**PRETTY_FUNCTION**是一个 g++ 宏，而**FUNCDNAME** 是 VC 等价的。如何测试我使用哪个编译器来确定要调用哪个宏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T10:47:30.933

使用[_MSC_VER](http://msdn.microsoft.com/en-us/library/b0084kay.aspx)宏。如果已定义，则您使用的是 Visual Studio：

```
 #ifdef _MSC_VER
 ... MSVC code ...
 #else
 ... other compiler ...
 #endif 
```

# joomla - Joomla 问题：如何在介绍文本和正文中使用不同的图像

> ID：464807
> 
> 赞同：0
> 
> 时间：2009-01-21T10:51:15.043
> 
> 标签：joomla

Joomla 问题：有没有办法在介绍文本中使用不同的图像？我计划在 introtext 中放置一个不同且较小的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T15:55:33.033

Could one not duplicate the the opening paragraph/content above the [Read More] line, except with whatever changes are needed? Then, in the article's Advanced Parameters, set the [Intro Text] value to "Hide" so the intro doesn't appear when the article is displayed normally?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-29T08:46:47.693

看这里： [http ://www.theartofjoomla.com/home/5-commentary/81-joomlas-hidden-feature-hiding-intro-text.html](http://www.theartofjoomla.com/home/5-commentary/81-joomlas-hidden-feature-hiding-intro-text.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T15:36:43.003

我添加了这些代码，它在我的情况下运行良好

```
<?php
$text = $article->introtext;
if(preg_match('/<\s*img[^>]+>/Ui', $text, $matches)){
$image=$matches[0];
$text = str_replace($image,'',$text);
}
if ($matches) {
$image = str_replace('img src="','img width="100px" src="',$image);
$image = str_replace("caption","", $image);
echo '' . $image . '';
}
else {echo '<img width="100px" src="/images/defaultarticleimage.jpg"
 class="defaultArticleImage" />';}
 ?> 
```

添加到文件 components/com-contents/view/category/tmpl/default_articles.php （首先将此文件复制到您的模板）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-02-17T23:18:24.337

当前的 Joomla 代码是不可能的。

介绍文本用于显示文章的简短介绍（通常在主页上），然后一旦用户打开文章，介绍文本就会显示在顶部，然后是其余文本

# jquery - Jquery点击事件没有触发/区分两个相同的HTML块

> ID：464808
> 
> 赞同：2
> 
> 时间：2009-01-21T10:51:17.993
> 
> 标签：jquery

[这是我的页面。](http://www.mobal.com/worldphone/indexa.php)

如果您找到红色的“特价商品”框，您会在单击其标题时看到它展开。页面底部还有另一个相同的框。如果你也点击那个，你会看到我的问题。点击事件正在触发两个框。这是一个疏忽。我的问题是我似乎无法让我的替代 JS 工作。我想我可以使用 next('div') 方法（在代码示例中注释掉）来定位 div 并展开它。这似乎不起作用。

这是我当前的 JS 同时触发两个盒子：

```
//=====Special Offer Expanders START=====
        $('a.expand-offer').click(function(event){
            event.preventDefault();
            //$('a.expand-offer').next('div').slideToggle(200);
            $('div.offer-expander').slideToggle(200);
        });
//=====Special Offer Expanders END===== 
```

谁能看到一种区分 JS 中两个重复框的方法，以便它们彼此独立扩展？我考虑将“.top”和“.bottom”类添加到标记中，但这很麻烦，因为我希望能够以通用方式使用特价商品标记，而无需添加独特的类。

* * *

抱歉，这是我迄今为止尝试过的：

```
$(this).next('div.offer-expander').slideToggle(200);
$(this).next('.offer-expander').slideToggle(200);
$(this).next('div').slideToggle(200); 
```

似乎没有一个工作。（我把它放在评论中，但它缺少代码突出显示。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T10:59:02.847

是的。用于`$(this)`引用单击的元素并像那样移动。我不确定第三行将如何工作（因为我看不到您的源代码），但我已取消注释第二行以给您一个想法：

```
 $('a.expand-offer').click(function(event){
            event.preventDefault();
            $(this).next('div').slideToggle(200);
            //$('div.offer-expander').slideToggle(200);
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T11:55:23.807

您的“a.expand-offer”在另一个段落元素中，因此您需要尝试再上一层
尝试：

```
$(this).parent().next('div.offer-expander').slideToggle(200); 
```

# c# - C# .net 助记符和一般使用

> ID：464813
> 
> 赞同：0
> 
> 时间：2009-01-21T10:51:40.083
> 
> 标签：c#, syntax, static, procedures

我刚开始使用 C#，在我看来，微软似乎将他们的新系统称为 .Net，因为您必须使用 Internet 查找所有内容以找到有用的函数以及他们将其隐藏在哪个类中。

对我来说，要求编写和设计为独立的过程/函数（非实例化静态对象）使其类不能同时用作它们的命名空间似乎是荒谬的。

那就是为什么我不能使用 Write 或 WriteLine 而不是 Console.WriteLine ？

然后，当我开始习惯于我正在使用的对象（如字符串）知道如何执行操作时，我习惯于使用外部函数来实现（如上、下、子字符串等），他们改变了规则数字，由于某种原因，数字不知道如何将自己从一种数字类型转换为另一种，相反，您必须调用 Convert 类静态函数将 double 更改为 int 和 Math 类静态函数以实现舍入和截断..快速将您的简单（其他语言）语句转换为 C# 中的大量字符行。

它似乎也沉迷于强类型，这在某种程度上干扰了我编码时的思维过程。我知道类型安全可以减少错误，但我认为它也会增加复杂性，有时是不必要的。如果您可以在需要时选择上下文驱动的类型，而无需显式的 Casting 或 Converting 或 ToStringing（这在 C# 中似乎是完成任何事情的基本必要条件），那就太好了。

那么......甚至可以在记事本中编写有意义的代码并在没有互联网访问的情况下使用 cl 吗？如果不求助于自动完成和网络访问，您会使用什么参考书？

有什么建议可以让你更自然地理解这种语言并更自然地使用它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-21T11:02:32.230

我认为您会因为多年来习惯于以一种方式工作而感到有些痛苦，现在必须花时间让自己在新平台中使用/开发感到舒适。

我不同意你的观点，MS 在字符串知道如何将自己转换为另一种类型而其他数据类型（如整数）不知道这一点上并不一致。这不是真的，因为字符串自己也不知道应该如何将它们转换为另一种类型。（您可以使用 Convert 类将类型转换为其他类型）。然而，确实 .NET 中的每种类型都有一个 ToString() 方法，但是，您不应该依赖该方法将您拥有的任何内容转换为字符串。

我认为您以前从未使用过 OO 语言，因此，您在范式转换方面遇到了一些困难。这样想：一切都与责任和行为有关。一个类（如果设计得好）负责做一件事，并且把这件事做好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-21T11:11:41.773

没有任何借口可以使用记事本编写现代语言。SharpDevelop 或 Visual C# Express 提供了以高效方式使用 C# 的功能。

不，由于复杂性，不使用互联网作为信息来源也不是一个好的选择。

您可以购买一本以结构化方式向您介绍语言概念的书，但要获得最新信息，互联网是必要的。

是的，与任何其他语言一样，C# 也有缺点。我只能给你建议以适应这种语言。在那之后，许多缺点变得可以理解，即使其中一些并没有变得不那么烦人。如果您想了解某些语言结构如何工作或如何更有效地解决特定问题，我建议您使用示例代码提出清晰、直接的问题。这样更容易回答这些问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-21T11:00:53.217

对于记事本，我没有任何有用的建议，但是我建议您使用免费的 IDE、Microsofts [Express Editions](http://www.microsoft.com/express/vcsharp/)或[Sharp Develop](http://www.icsharpcode.net/OpenSource/SD/Download/)之一。IDE 将加快语言的学习速度，此时您可以切换回记事本。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-21T11:14:38.990

阅读您的帖子，我认为您以前主要使用 C 或动态语言。也许 C# 对你来说只是一个错误的选择，有 IronPython、F# 和一堆其他具有必要功能的语言（比如类之外的函数等）

关于一致性，我不同意你的看法。事实上，.NET 的某些组件之间存在细微的不一致，但大部分 FW 是非常一致和可预测的。

强类型是低缺陷数的一个重要因素。动态类型在小型/中型项目（如脚本等）中表现良好。在或多或少复杂的程序中，动态可能会引入很多复杂性。

关于互联网/自动完成 - 我几乎无法想象任何不需要大量知识资源的 .NET 大小的技术。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-21T11:12:03.037

使用记事本在 C# 中编程就像买一辆法拉利在土路上行驶。

至少使用 Visual Studio 速成版。对于您所写的内容，我了解您来自非 OO 背景，请尝试学习 OO 概念并尝试使用它。您最终将了解为 .Net 做出的大多数设计决策。

[http://en.wikipedia.org/wiki/Object-oriented_programming](http://en.wikipedia.org/wiki/Object-oriented_programming)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-16T02:36:52.440

哦，男孩，我从哪里开始（这将是一个很长的帖子哈哈哈），好吧，让我们一点一点来：“Microsoft 将他们的系统称为 .NET，因为您必须使用 Intenet...”，原因被称为 .NET。 NET 是因为 MICROSOFT LANGUAGUES（现在还有一些其他语言也像 Phyton 和 Ruby 等）可以调用任何库或 DLL，例如您可以“NET”（网络或调用）一个用 Visual Basic、F# 构建的 DLL , C++ 来自 WITHIN C# 或任何这些语言，您也可以调用（或“.NET”）C# 库。好的一个下来！

下一个：“要求....让他们的类不作为他们的命名空间似乎是荒谬的”，这是因为命名空间可以有尽可能多的类，而你的问题是：“这就是为什么不能我使用 Write 或 WriteLine 而不是 Console.WriteLine ？”。原因是：“Console”（System.Console 是程序开头的“Using”语句）命名空间是“Write”和“WriteLine”存在的地方！！（您也可以完全限定它（或“调用它”） ")。（在我看来，这一切都需要学习 C# 语法），好的 NEXT：

“当我开始习惯对象的想法时......”，简单地说：C# 是一种“强类型安全语言”，因此应该 - 必须告诉你“你正在进入”什么，否则留下使用 PHP 或 C 等“弱或无类型安全语言”，这并不意味着不好，只是意味着你的工作要确保，正如我告诉我的学生：“如果你需要一个 INT，那么定义一个 INT 而不是 LETTING编译器会为你做这件事，否则你会有很多坏的错误”，或者换句话说，在设计一个软件之前做你的功课。

注意：C# 是隐式类型安全语言，所以如果你想你可以将它作为不安全的语言运行，那么从那时起你的工作就是确保，所以当错误在运行时到达时不要抱怨（因为懒惰）（而且很多时候当客户已经在使用您的蹩脚软件时）。

...最后但并非最不重要：你想用记事本射击自己吗？Studio Express 是免费的，甚至数据库 SQL SERVER 也是免费的！！，除非您为一家公司工作，否则我将要求 PRO 等。所有“额外”的东西都是给大公司、团队等的，你可以用免费版本做 99% 的东西（一旦你想扩展到分布式软件或大型项目，你仍然可以购买更新到完整版本，或者如果您的软件大受欢迎，例如：如果您需要每秒从数据库中获得数百万次查询或命中，或者 100 人正在处理同一个项目（代码），但大多数时候只有 2 或 3 个“普通”开发人员在家里或小办公室工作，免费的就足够了！！）

欢呼！！！（PS：80年代以来的软件开发人员）

# c# - 如何以编程方式在 SQL Server 2005 数据库中查找多对多关系

> ID：464817
> 
> 赞同：0
> 
> 时间：2009-01-21T10:54:09.657
> 
> 标签：c#, sql-server, sql-server-2005, code-generation, metadata

我可以在 C# 中找到直接表外键，例如：

```
 foreach (ForeignKey key in CurrentTable.ForeignKeys) {
                    Console.WriteLine("FK:" + key.ReferencedTable);
          } 
```

多对多关系的经典表示是通过与两个主表具有一对多关系的中间表来实现的，因此具有 many2many 关系的表之间没有直接链接。

目前，我尝试查找多对多关系，检查我正在分析的表是否只有两列，并且两列都是不同表的外键（在这种情况下，我将其识别为中间表）。

这不是最好的解决方案，因为有时中间表还带有其他列。

以编程方式找到这个many2many关系的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-21T11:03:20.513

作为附加标准，您可以使用以下事实：在许多情况下，两个外键的对代表连接/中间表的主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T11:04:20.057

您似乎已经提出了自己的解决方案。不要搜索具有两个外键引用其他不同表且没有其他列的表，只需删除短语“并且没有其他列”。

换句话说，寻找“有两个外键引用其他不同表的表”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T11:46:07.743

此语句查找具有至少两个外键列的所有表

```
SELECT  objects_1.name AS Master1, objects_2.name AS Master2, sys.objects.name AS Detail, 
    sys.columns.name AS Column1, columns_1.name AS Column2
FROM sys.objects 
INNER JOIN sys.columns ON sys.objects.object_id = sys.columns.object_id 
INNER JOIN sys.foreign_key_columns ON sys.columns.column_id = sys.foreign_key_columns.parent_column_id 
    AND sys.columns.object_id = sys.foreign_key_columns.parent_object_id 
INNER JOIN sys.objects AS objects_1 ON sys.foreign_key_columns.referenced_object_id = objects_1.object_id 
INNER JOIN sys.columns AS columns_1 ON sys.objects.object_id = columns_1.object_id 
    AND columns_1.column_id <> sys.columns.column_id 
INNER JOIN sys.foreign_key_columns AS foreign_key_columns_1 ON columns_1.object_id = foreign_key_columns_1.parent_object_id 
    AND columns_1.column_id = foreign_key_columns_1.parent_column_id 
INNER JOIN sys.objects AS objects_2 ON objects_2.object_id = foreign_key_columns_1.referenced_object_id
WHERE     (sys.columns.is_nullable = 0) AND (columns_1.is_nullable = 0)
ORDER BY Master1, Detail, Master2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-23T03:55:36.447

如果一个表有两个不同表的外键列，那么它肯定代表了表之间的多对多关系。表具有其他列的事实仅意味着表（实体）之间的关系由额外属性进一步限定。请看下图中的示例：

[![替代文字](https://i.stack.imgur.com/jVHPR.jpg)](https://i.stack.imgur.com/jVHPR.jpg)

在上面的示例中，产品和账单之间存在多对多关系。交集表还将具有描述性属性，如“数量”、“礼品包装”等。这并不能消除首先存在多对多关系的事实。表格看起来像这样

*   产品（prod_id，名称，单位重量，单位）
*   Bill(BillNo, date, amount,uom)
*   BillItems（prod_Id，BillNo，数量，gift_flg）

# java - 使用java将透明的gif / png转换为jpeg

> ID：464825
> 
> 赞同：23
> 
> 时间：2009-01-21T10:58:33.127
> 
> 标签：java, transparency, jpeg, gif, java-io

我想使用 Java 将 gif 图像转换为 jpeg。它适用于大多数图像，但我有一个简单的透明 gif 图像：

[输入 gif 图片 http://img292.imageshack.us/img292/2103/indexedtestal7.gif](http://img292.imageshack.us/img292/2103/indexedtestal7.gif)

[如果图像丢失：它是一个带有透明像素的蓝色圆圈]

当我使用以下代码转换此图像时：

```
File file = new File("indexed_test.gif");
BufferedImage image = ImageIO.read(file);
File f = new File("indexed_test.jpg");
ImageIO.write(image, "jpg", f); 
```

此代码在不引发异常的情况下工作，但会导致无效的 jpeg 图像：

[![输出JPEG图像](https://i.stack.imgur.com/wkyrb.jpg)](https://i.stack.imgur.com/wkyrb.jpg)

[如果图像丢失：IE 无法显示 jpeg，Firefox 显示的图像颜色无效。]

我正在使用 Java 1.5。

我还尝试使用 gimp 将示例 gif 转换为 png，并将 png 作为 Java 代码的输入。结果是一样的。

这是JDK中的错误吗？如何在没有 3rd 方库的情况下正确转换图像？

**更新：**

答案表明 jpeg 转换无法正确处理透明度（我仍然认为这是一个错误），并建议使用预定义颜色替换透明像素的解决方法。两种建议的方法都非常复杂，所以我实现了一个更简单的方法（将作为答案发布）。我接受使用此解决方法的第一个已发布答案（由 Markus 提供）。我不知道哪种实现更好。我选择了最简单的一个，但我发现了一个不起作用的 gif。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-10-09T18:39:16.827

对于 Java 6（我认为也是 5）：

```
BufferedImage bufferedImage = new BufferedImage(image.getWidth(null), image.getHeight(null), BufferedImage.TYPE_INT_RGB);
g = bufferedImage.createGraphics();
//Color.WHITE estes the background to white. You can use any other color
g.drawImage(image, 0, 0, bufferedImage.getWidth(), bufferedImage.getHeight(), Color.WHITE, null); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-22T09:08:11.587

正如问题更新中已经提到的那样，我已经实现了一种用预定义颜色替换透明像素的更简单方法：

```
public static BufferedImage fillTransparentPixels( BufferedImage image, 
                                                   Color fillColor ) {
    int w = image.getWidth();
    int h = image.getHeight();
    BufferedImage image2 = new BufferedImage(w, h, 
        BufferedImage.TYPE_INT_RGB);
    Graphics2D g = image2.createGraphics();
    g.setColor(fillColor);
    g.fillRect(0,0,w,h);
    g.drawRenderedImage(image, null);
    g.dispose();
    return image2;
} 
```

我以这种方式在jpeg转换之前调用此方法：

```
if( inputImage.getColorModel().getTransparency() != Transparency.OPAQUE) {
    inputImage = fillTransparentPixels(inputImage, Color.WHITE);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-21T16:58:17.190

问题（至少对于 png 到 jpg 的转换）是配色方案不一样，因为 jpg 不支持透明度。

我们已经成功地完成了这些方面的事情（这是从各种代码中提取的 - 所以请原谅格式的粗略）：

```
File file = new File("indexed_test.gif");
BufferedImage image = ImageIO.read(file);
int width = image.getWidth();
int height = image.getHeight();
BufferedImage jpgImage;

//you can probably do this without the headless check if you just use the first block
if (GraphicsEnvironment.isHeadless()) {
  if (image.getType() == BufferedImage.TYPE_CUSTOM) {
      //coerce it to  TYPE_INT_ARGB and cross fingers -- PNGs give a    TYPE_CUSTOM and that doesn't work with
      //trying to create a new BufferedImage
     jpgImage = new BufferedImage(width,height,BufferedImage.TYPE_INT_ARGB);
  } else {
     jpgImage = new BufferedImage(width, height, image.getType());
  }
} else {
     jgpImage =   GraphicsEnvironment.getLocalGraphicsEnvironment().
        getDefaultScreenDevice().getDefaultConfiguration().
        createCompatibleImage(width, height, image.getTransparency()); 
}

//copy the original to the new image
Graphics2D g2 = null;
try {
 g2 = jpg.createGraphics();

 g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, 
                    RenderingHints.VALUE_INTERPOLATION_BICUBIC);
 g2.drawImage(image, 0, 0, width, height, null);
}
finally {
   if (g2 != null) {
       g2.dispose();
   }
}

File f = new File("indexed_test.jpg");

ImageIO.write(jpgImage, "jpg", f); 
```

这适用于 png 到 jpg 和 gif 到 jpg。您将在透明位所在的位置获得白色背景。您可以通过在调用 drawImage 之前让 g2 用另一种颜色填充图像来更改此设置。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-13T16:37:45.540

晚了 3 个月，但我遇到了一个非常相似的问题（虽然甚至没有加载 gif，但只是生成了一个透明图像 - 比如说，没有背景，彩色形状 - 当保存到 jpeg 时，所有颜色都搞砸了，不仅的背景）

[在 java2d-interest list 的这个相当老的线程中](http://www.mail-archive.com/java2d-interest@capra.eng.sun.com/msg02996.html)找到了这段代码，我想分享一下，因为经过快速测试，它比您的解决方案性能要高得多*：*

```
 final WritableRaster raster = img.getRaster();
        final WritableRaster newRaster = raster.createWritableChild(0, 0, img.getWidth(), img.getHeight(), 0, 0, new int[]{0, 1, 2});

        // create a ColorModel that represents the one of the ARGB except the alpha channel
        final DirectColorModel cm = (DirectColorModel) img.getColorModel();
        final DirectColorModel newCM = new DirectColorModel(cm.getPixelSize(), cm.getRedMask(), cm.getGreenMask(), cm.getBlueMask());

        // now create the new buffer that we'll use to write the image
        return new BufferedImage(newCM, newRaster, false, null); 
```

不幸的是，我不能说我*完全*理解它的作用；）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-01-05T10:14:17.980

如果你创建一个 BufferedImage.TYPE_INT_ARGB 类型的 BufferedImage 并保存到 JPEG，就会出现奇怪的事情。在我的情况下，颜色被切成橙色。在其他情况下，生成的图像可能无效，其他阅读器将拒绝加载它。

但是，如果您创建 BufferedImage.TYPE_INT_RGB 类型的图像，则将其保存为 JPEG 可以正常工作。

因此，我认为这是 Java JPEG 图像编写器中的一个错误 - 它应该只编写没有透明度的情况（就像 .NET GDI+ 所做的那样）。或者在最坏的情况下引发异常，并带有有意义的消息，例如“无法编写具有透明度的图像”。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-21T11:01:09.363

JPEG 不支持透明度。因此，即使您正确获得了圆圈颜色，您仍然会有黑色或白色背景，具体取决于您的编码器和/或渲染器。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-07T18:41:44.020

```
BufferedImage originalImage = ImageIO.read(getContent());
BufferedImage newImage = new BufferedImage(originalImage.getWidth(), originalImage.getHeight(), BufferedImage.TYPE_3BYTE_BGR);

    for (int x = 0; x < originalImage.getWidth(); x++) {
        for (int y = 0; y < originalImage.getHeight(); y++) {
            newImage.setRGB(x, y, originalImage.getRGB(x, y));
        }
    }
 ImageIO.write(newImage, "jpg", f); 
```

2020 年 7 月 9 日**编辑：**添加`imageIO.write`

# c# - 清单有什么好处 .寻找替代品？

> ID：464831
> 
> 赞同：0
> 
> 时间：2009-01-21T11:01:01.547
> 
> 标签：c#, .net, performance

最近我用一个谓词来描述搜索逻辑，并把它传递给了几个Lists的Find方法。

```
foreach (IHiscoreBarItemView item in _view.HiscoreItems)
{
    Predicate<Hiscore> matchOfHiscoreName = 
        (h) => h.Information.Name.Equals(item.HiscoreName);

    var current = player.Hiscores.Find(matchOfHiscoreName);
    item.GetLogicEngine().ForceSetHiscoreValue(current as Skill);

    var goal = player.Goals.Find(matchOfHiscoreName);
    item.GetLogicEngine().ForceSetGoalHiscoreValue(goal as Skill);
} 
```

除了“更少的代码”之外，使用上述方法而不是替代方法是否有任何好处。

我对性能特别感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-21T11:09:58.500

Find 优于使用 LINQ 的优势：在 .NET 2.0 中可用 LINQ 优于 Find 的优势：与其他序列的一致性；查询表达式语法等

Find 对 BinarySearch 的好处：列表不必排序，只需要相等比较 BinarySearch 对 Find 的好处：BinarySearch is O(log n); 查找是 O(n)

Find 对 foreach 循环的好处：紧凑性和不重复自己 Foreach 循环对 Find 的好处：您想要执行的任何其他自定义处理

其中，只有 Find 与 BinarySearch 有任何真正的性能差异。当然，如果您可以从 a 更改`List<T>`为 a`Dictionary<TKey,TValue>`则查找元素将变得摊销 O(1) ...

# tfs - 是否可以在 Team Build 期间编辑文件？

> ID：464834
> 
> 赞同：2
> 
> 时间：2009-01-21T11:01:41.857
> 
> 标签：tfs, tfsbuild

我正在寻找一种在 Team Build 中编辑配置文件（asp.net 项目中的 web.config）的方法。

具体来说，在将构建的 Web 应用程序复制到其目的地之前，我正在查看在配置文件中取消注释或添加身份模拟。

我知道可以有多个配置文件并将一个复制到另一个（我们使用这种方法来为开发、生产、演示等提供不同的配置），但在这种情况下，最好将配置保留在一个文件，因为这里唯一的变化是身份模拟应该是假的还是真的。

我已经用谷歌搜索了一段时间，但没有找到任何解决方案，但也许这里有人可以帮助我弄清楚如何或简单地说这是不可能的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T11:14:28.197

看看[http://www.codeplex.com/sdctasks](http://www.codeplex.com/sdctasks)

这是一组构建任务，可让您做各种有趣的事情。有几个与网站（站点）相关的任务，但如果涉及到它，也有 XML 任务应该允许您适当地操作文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T16:13:19.830

XmlPoke msbuild 4.0 任务将为您提供帮助，这是内置的。这是链接：http: [//msdn.microsoft.com/en-us/library/ff598687.aspx](http://msdn.microsoft.com/en-us/library/ff598687.aspx)

# c++ - C++ 3D 模型动画库？

> ID：464843
> 
> 赞同：3
> 
> 时间：2009-01-21T11:04:31.617
> 
> 标签：c++, animation, model, 3d

我有自己的使用 C++ 和 OpenGL 的游戏引擎，但我有带有可以移动的各个部分的模型，我不确定如何在不对其进行硬编码的情况下对其进行动画处理。是否有任何库可以通过脚本或 IK 或其他动画技术提供解决方案，而无需借助 Ogre 等游戏引擎？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T11:32:26.850

[Cal3d](http://home.gna.org/cal3d/)可能是一种选择。皮肤角色动画，无需导入整个引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T15:54:45.440

如果你想要物理，有很多开源的物理引擎，比如[ODE](http://www.ode.org/)和[box2D](http://www.box2d.org/)。

如果你想要类似游戏的行为，像[lua](http://www.lua.org/)这样的嵌入脚本语言对于游戏引擎来说是很常见的。

# c# - 将 args（参数）传递到窗口窗体应用程序

> ID：464852
> 
> 赞同：3
> 
> 时间：2009-01-21T11:10:03.383
> 
> 标签：c#, windows, arguments

我有接受 args 的 Windows 应用程序，我使用它来设置窗口行为

问题是我需要在其中一些参数中传递文本，但我的应用程序将其视为多个参数，所以，这个：

```
"http://www.google.com/" contact 450 300 false "Contact Info" true "Stay Visible" true 
```

实际上有**11 个**参数，而不是我期望的**9 个。**

**将“联系信息”**和**“保持可见”**仅作为一个参数传递的诀窍是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-21T11:12:59.167

你是直接从命令行运行它吗？如果是这样，我希望它可以正常工作。（顺便说一下，我假设您正在使用 Main 方法中的参数？）

例如，这是一个小型测试应用程序：

```
using System;

class Test
{
    static void Main(string[] args)
    {
        foreach (string arg in args)
        {
            Console.WriteLine(arg);
        }
    }
} 
```

执行：

```
>test.exe first "second arg" third
first
second arg
third 
```

这是一个控制台应用程序，但就传递给 Main 方法的内容而言，它与 WinForms 没有区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T11:15:04.217

[MSDN 说](http://msdn.microsoft.com/en-us/library/96s74eb0(VS.80).aspx)，它应该按照您提到的方式工作。

```
class CommandLine
{
    static void Main(string[] args)
    {
        // The Length property provides the number of array elements
        System.Console.WriteLine("parameter count = {0}", args.Length);

        for (int i = 0; i < args.Length; i++)
        {
            System.Console.WriteLine("Arg[{0}] = [{1}]", i, args[i]);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T11:25:59.670

你是如何执行你的应用程序的？
如果您从另一个应用程序执行它，您可能忘记正确格式化参数字符串：

```
String arguments = "First \"Sec ond\" Third Fourth \"Fi fth\"" 
```

将有五个参数，而

```
String arguments = "First Sec ond Third Fourth Fi fth" 
```

会有七个。

如果参数在快捷方式目标属性中，则同样适用：

```
"C:\My Path\MyApplication.exe" "Argument 1" Argument2 Argument3 "Argument 4" 
```

代替

```
"C:\My Path\MyApplication.exe" Argument 1 Argument2 Argument3 Argument 4 
```

# xml - 引用 XML 中的另一个元素

> ID：464853
> 
> 赞同：5
> 
> 时间：2009-01-21T11:10:09.733
> 
> 标签：xml, xslt, xpath

我正在尝试为我的应用程序设计一个 XML 文档结构。

我想存储一个孔列表，如下所示

```
<Holes>
 <Hole id='1' dia='0.1' depth='2'/>
 <Hole id='2' dia='0.2' depth='1.67'/>
 <Hole id='3' dia='0.3' depth='0.44'/>
</Holes> 
```

在我的文档的另一部分，我想通过 id 来引用一个洞。例如

```
<Drill useHoleWithId='1'/> 
```

当我的代码在 <Drill> 元素上方找到时，我希望它在 id='1' 的 <Hole> 元素中检索“dia”和“depth”属性的值。

当然，我可以搜索 id 等于 'useHoleWithId' 的值的 <Hole> 元素，然后获取属性的值，但我认为也许有更好的方法可以使用一些 XML 技巧来做到这一点。有没有？

PS - 虽然我对它们一无所知，但 XPath、XLink、XQuery 或 XPointer 中的任何一个都可以提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-21T11:20:09.120

XPath 无疑是一种方法。查找 id 为 1 的持有的 Xpath 查询类似于`Holes/Hole[@id="1"]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-21T14:51:15.747

**有一个标准的 XPath 函数可以通过它们的“id”属性来引用元素**。

**来自[XPath 1.0](http://www.w3.org/TR/xpath#function-id)规范**：

**[`id()`](http://www.w3.org/TR/xpath#function-id)**函数函数通过它们的唯一性来选择元素（`ID`参见[5.2.1 唯一ID]）。当参数`id`是 类型`node-set`时，结果是应用`id`到`string-value`参数中每个节点的结果的并集`node-set`。当 to 的参数`id`是任何其他类型时，参数将转换为 a `string`，就好像通过调用`string function`; 被`string`分成一个`whitespace-separated list of tokens`（`whitespace`是匹配产生的任何字符序列`S`）；结果是 a`node-set`包含与 相同`document`且`context node`具有`unique ID`等于列表中任何标记的元素。

*   `id("foo")`选择具有唯一`ID`foo的元素

*   `id("foo")/child::para[position()=5]`
    选择具有唯一`ID`foo元素的第五个 para 子元素

**[在XSLT](http://www.w3.org/TR/xslt)****中可以使用另一种更通用的方式来引用节点（不仅是元素）**。该**[`<xsl:key/>`](http://www.w3.org/TR/xslt#key)**指令和 XSLT**[`key()`](http://www.w3.org/TR/xslt#function-key)**函数是专门为此目的而设计的。

**例如**，假设一个文档包含 XSLT 形式的书目参考，并且有一个单独的 XML 文档 bib.xml 包含一个书目数据库，其条目格式为：

```
<entry name="XSLT">...</entry> 
```

**然后样式表可以使用以下内容来转换 bibref 元素**：

```
<xsl:key name="bib" match="entry" use="@name"/>

<xsl:template match="bibref">
  <xsl:variable name="name" select="."/>
  <xsl:for-each select="document('bib.xml')">
    <xsl:apply-templates select="key('bib',$name)"/>
  </xsl:for-each>
</xsl:template> 
```

**请注意**，XSLT 中的键克服了以下`id()`功能限制：

*   ID 属性必须在 DTD 中声明。如果一个 ID 属性仅在外部 DTD 子集中声明为 ID 属性，那么只有当 XML 处理器读取外部 DTD 子集时，它才会被识别为 ID 属性。但是，XML 并不要求 XML 处理器读取外部 DTD，而且它们很可能选择不这样做，尤其是在文档声明为 `standalone="yes"`.

*   一个文档只能包含一组唯一 ID。不能有单独的独立的唯一 ID 集。

*   元素的 ID 只能在属性中指定；它不能由元素的内容或子元素指定。

*   ID 被限制为 XML 名称。例如，它不能包含空格。

*   一个元素最多可以有一个 ID。

*   最多一个元素可以有一个特定的 ID。

由于这些限制，XML 文档有时包含 ID/IDREF/IDREFS 属性未明确声明的交叉引用结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T11:55:31.890

XML 是数据的惰性视图。您已经*使用*“useHoleWithId”创建了您的参考。您如何解释和采取行动以获取该`<hole>`元素取决于您的实现，当然 xpath（更改文档的 xslt 只是实现 xpath 来执行此操作）是执行此操作的有效方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T11:38:20.193

你可以改造它：

```
 <xsl:for-each select="my/Drill">
   <xsl:variable name="drillid"> 
    <xsl:value-of select="@useHoleWithId"/>
   </xsl:variable> 
   <Drill>
    <xsl:attribute name="diameter">
     <xsl:value-of select="/my/Holes/Hole[@id=$drillid]/@dia"/>
    </xsl:attribute>
    <xsl:attribute name="useid">
     <xsl:value-of select="$drillid"/>
    </xsl:attribute>
   </Drill>
  </xsl:for-each> 
```

这样`Hole`的属性就会出现在`Drill`标签中

# apache-flex - flashVars flex3

> ID：464862
> 
> 赞同：1
> 
> 时间：2009-01-21T11:13:18.230
> 
> 标签：apache-flex, flashvars

嗨，我正在尝试使用 flashVars，但是由于某种原因没有发送到我的 flex 应用程序。

我将我的对象嵌入到速度文件中，这是对象嵌入代码；

```
<object width="$!WIDTH" height="$!HEIGHT">
    <param name="flashVars" value="maximizeUrl=http://maximizeUrl"/>       
    <param name="movie" value="$!SRC"/>
    <embed src="$!SRC" width="$!WIDTH" height="$!HEIGHT"/>
</object> 
```

任何想法为什么这不会发生在我身上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T11:41:51.260

我假设您在使用 Firefox 时遇到了问题，它忽略了 object 标签，而是使用了 embed 标签。您还需要在此处添加 flashvars 参数作为属性：

```
<object width="$!WIDTH" height="$!HEIGHT">
        <param name="flashVars" value="maximizeUrl=http://maximizeUrl"/>       
    <param name="movie" value="$!SRC"/>
    <embed src="$!SRC" width="$!WIDTH" height="$!HEIGHT" flashVars="maximizeUrl=http://maximizeUrl"/>
</object> 
```

或者，您可以使用[SWFObject](http://code.google.com/p/swfobject/)动态生成嵌入代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T11:48:47.863

我同意大卫的回答，使用 SWFObject 或优先使用 flexbuilder 附带的代码。查看我对这个问题的回答[https://stackoverflow.com/questions/452402/how-to-make-javascript-talk-to-flash-ac3-embedded-with-swfobject-2-0#461727](https://stackoverflow.com/questions/452402/how-to-make-javascript-talk-to-flash-ac3-embedded-with-swfobject-2-0#461727)

# python - 如何获得列表元素的所有可能组合？

> ID：464864
> 
> 赞同：591
> 
> 时间：2009-01-21T11:13:40.053
> 
> 标签：python, combinations

我有一个包含 15 个数字的列表，我需要编写一些代码来生成这些数字的所有 32,768 个组合。

我发现[一些代码](http://desk.stinkpot.org:8080/tricks/index.php/2008/04/get-all-possible-combinations-of-a-lists-elements-in-python/)（通过谷歌搜索）显然可以满足我的要求，但我发现代码相当不透明并且对使用它持谨慎态度。另外，我觉得必须有一个更优雅的解决方案。

我唯一想到的就是循环遍历十进制整数 1-32768 并将它们转换为二进制，然后使用二进制表示作为过滤器来挑选出适当的数字。

有人知道更好的方法吗？使用`map()`，也许？

* * *

## 回答 #1

> 赞同：742
> 
> 时间：2011-05-05T12:56:24.243

[这个答案](https://stackoverflow.com/questions/464864/python-code-to-pick-out-all-possible-combinations-from-a-list/464882#464882)错过了一个方面：OP要求所有组合......不仅仅是长度“r”的组合。

所以你要么必须遍历所有长度“L”：

```
import itertools

stuff = [1, 2, 3]
for L in range(0, len(stuff)+1):
    for subset in itertools.combinations(stuff, L):
        print(subset) 
```

或者——如果你想变得时髦（或者让阅读你代码的人的大脑弯曲）——你可以生成“combinations()”生成器链，并遍历它：

```
from itertools import chain, combinations
def all_subsets(ss):
    return chain(*map(lambda x: combinations(ss, x), range(0, len(ss)+1)))

for subset in all_subsets(stuff):
    print(subset) 
```

* * *

## 回答 #2

> 赞同：618
> 
> 时间：2009-01-21T11:20:04.160

看看[itertools.combinations](http://docs.python.org/library/itertools.html#itertools.combinations)：

> ```
> itertools.combinations(iterable, r) 
> ```
> 
> 从输入可迭代中返回 r 个长度的元素子序列。
> 
> 组合按字典排序顺序发出。因此，如果输入的可迭代对象已排序，则组合元组将按排序顺序生成。

从 2.6 开始，包括电池！

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2011-07-01T00:21:10.823

这是一个懒惰的单线，也使用 itertools：

```
from itertools import compress, product

def combinations(items):
    return ( set(compress(items,mask)) for mask in product(*[[0,1]]*len(items)) )
    # alternative:                      ...in product([0,1], repeat=len(items)) ) 
```

这个答案背后的主要思想：有 2^N 组合 - 与长度为 N 的二进制字符串的数量相同。对于每个二进制字符串，您选择与“1”相对应的所有元素。

```
items=abc * mask=###
 |
 V
000 -> 
001 ->   c
010 ->  b
011 ->  bc
100 -> a
101 -> a c
110 -> ab
111 -> abc 
```

需要考虑的事项：

*   这要求您可以调用`len(...)`（`items`解决方法：如果`items`类似于生成器之类的可迭代对象，请先将其转换为列表`items=list(_itemsArg)`）
*   这要求迭代的顺序`items`不是随机的（解决方法：不要发疯）
*   这要求这些项目是唯一的，否则它们`{2,2,1}`都`{2,1,1}`将折叠到`{2,1}`（解决方法：`collections.Counter`用作 的替代品；它基本上是一个多重集......尽管如果您需要它是可散列`set`的，您可能需要稍后使用）`tuple(sorted(Counter(...).elements()))`

* * *

**演示**

```
>>> list(combinations(range(4)))
[set(), {3}, {2}, {2, 3}, {1}, {1, 3}, {1, 2}, {1, 2, 3}, {0}, {0, 3}, {0, 2}, {0, 2, 3}, {0, 1}, {0, 1, 3}, {0, 1, 2}, {0, 1, 2, 3}]

>>> list(combinations('abcd'))
[set(), {'d'}, {'c'}, {'c', 'd'}, {'b'}, {'b', 'd'}, {'c', 'b'}, {'c', 'b', 'd'}, {'a'}, {'a', 'd'}, {'a', 'c'}, {'a', 'c', 'd'}, {'a', 'b'}, {'a', 'b', 'd'}, {'a', 'c', 'b'}, {'a', 'c', 'b', 'd'}] 
```

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2016-12-06T01:45:35.240

在@Dan H 高度赞成的[回答](https://stackoverflow.com/a/5898031/355230)下的评论中，提到了[文档](https://docs.python.org/3/library/itertools.html#itertools-recipes)`powerset()`中的配方——包括[Dan 自己](https://stackoverflow.com/questions/464864/how-to-get-all-possible-combinations-of-a-list-s-elements/5898031#comment10012495_5898031)的配方。*但是*，到目前为止，没有人将其发布为答案。由于它可能是解决问题的最佳方法之一，如果不是最好的方法，并且得到另一位评论者的[一点鼓励](https://stackoverflow.com/questions/464864/how-to-get-all-possible-combinations-of-a-list-s-elements/5898031#comment69178954_5898031)，如下所示。该函数生成**每个**可能长度的列表元素的**所有**唯一组合（包括那些包含零和所有元素的组合）。[`itertools`](https://docs.python.org/3/library/itertools.html#itertools-recipes)

 *******注意**：如果略有不同，目标是仅获得唯一元素的组合，请更改行`s = list(iterable)`以`s = list(set(iterable))`消除任何重复元素。无论如何，`iterable`最终变成了一种`list`可以与生成器一起使用的方法这一事实（与其他几个答案不同）。

```
from itertools import chain, combinations

def powerset(iterable):
    "powerset([1,2,3]) --> () (1,) (2,) (3,) (1,2) (1,3) (2,3) (1,2,3)"
    s = list(iterable)  # allows duplicate elements
    return chain.from_iterable(combinations(s, r) for r in range(len(s)+1))

stuff = [1, 2, 3]
for i, combo in enumerate(powerset(stuff), 1):
    print('combo #{}: {}'.format(i, combo)) 
```

输出：

```
combo #1: ()
combo #2: (1,)
combo #3: (2,)
combo #4: (3,)
combo #5: (1, 2)
combo #6: (1, 3)
combo #7: (2, 3)
combo #8: (1, 2, 3) 
```

* * *

## 回答 #5

> 赞同：43
> 
> 时间：2014-06-25T07:08:01.400

这个单线为您提供所有组合（如果原始列表/集合包含不同的元素，则为项目之间的`0`和项目）并使用本机方法：`n``n`[`itertools.combinations`](https://docs.python.org/2/library/itertools.html#itertools.combinations)

## 蟒蛇2

```
from itertools import combinations

input = ['a', 'b', 'c', 'd']

output = sum([map(list, combinations(input, i)) for i in range(len(input) + 1)], []) 
```

## 蟒蛇 3

```
from itertools import combinations

input = ['a', 'b', 'c', 'd']

output = sum([list(map(list, combinations(input, i))) for i in range(len(input) + 1)], []) 
```

* * *

输出将是：

```
[[],
 ['a'],
 ['b'],
 ['c'],
 ['d'],
 ['a', 'b'],
 ['a', 'c'],
 ['a', 'd'],
 ['b', 'c'],
 ['b', 'd'],
 ['c', 'd'],
 ['a', 'b', 'c'],
 ['a', 'b', 'd'],
 ['a', 'c', 'd'],
 ['b', 'c', 'd'],
 ['a', 'b', 'c', 'd']] 
```

* * *

在线尝试：

[http://ideone.com/COghfX](http://ideone.com/COghfX)

* * *

## 回答 #6

> 赞同：42
> 
> 时间：2014-05-19T17:25:51.250

这是一个使用递归的例子：

```
>>> import copy
>>> def combinations(target,data):
...     for i in range(len(data)):
...         new_target = copy.copy(target)
...         new_data = copy.copy(data)
...         new_target.append(data[i])
...         new_data = data[i+1:]
...         print new_target
...         combinations(new_target,
...                      new_data)
...                      
... 
>>> target = []
>>> data = ['a','b','c','d']
>>> 
>>> combinations(target,data)
['a']
['a', 'b']
['a', 'b', 'c']
['a', 'b', 'c', 'd']
['a', 'b', 'd']
['a', 'c']
['a', 'c', 'd']
['a', 'd']
['b']
['b', 'c']
['b', 'c', 'd']
['b', 'd']
['c']
['c', 'd']
['d'] 
```

* * *

## 回答 #7

> 赞同：42
> 
> 时间：2019-02-01T13:02:27.973

这是一种可以很容易地转移到所有支持递归的编程语言**（没有 itertools，没有 yield，没有列表理解）**的方法：

```
def combs(a):
    if len(a) == 0:
        return [[]]
    cs = []
    for c in combs(a[1:]):
        cs += [c, c+[a[0]]]
    return cs

>>> combs([1,2,3,4,5])
[[], [1], [2], [2, 1], [3], [3, 1], [3, 2], ..., [5, 4, 3, 2, 1]] 
```

* * *

## 回答 #8

> 赞同：28
> 
> 时间：2015-03-17T05:52:28.243

您可以使用以下简单代码在 Python 中生成列表的所有组合：

```
import itertools

a = [1,2,3,4]
for i in xrange(0,len(a)+1):
   print list(itertools.combinations(a,i)) 
```

结果将是：

```
[()]
[(1,), (2,), (3,), (4,)]
[(1, 2), (1, 3), (1, 4), (2, 3), (2, 4), (3, 4)]
[(1, 2, 3), (1, 2, 4), (1, 3, 4), (2, 3, 4)]
[(1, 2, 3, 4)] 
```

* * *

## 回答 #9

> 赞同：22
> 
> 时间：2011-08-24T10:24:55.047

我同意 Dan H 的观点，Ben 确实要求**所有**组合。`itertools.combinations()`没有给出所有组合。

另一个问题是，如果输入迭代很大，最好返回一个生成器而不是列表中的所有内容：

```
iterable = range(10)
for s in xrange(len(iterable)+1):
  for comb in itertools.combinations(iterable, s):
    yield comb 
```

* * *

## 回答 #10

> 赞同：20
> 
> 时间：2016-12-20T04:29:07.627

我想我会为那些在不导入 itertools 或任何其他额外库的情况下寻求答案的人添加此功能。

```
def powerSet(items):
    """
    Power set generator: get all possible combinations of a list’s elements

    Input:
        items is a list
    Output:
        returns 2**n combination lists one at a time using a generator 

    Reference: edx.org 6.00.2x Lecture 2 - Decision Trees and dynamic programming
    """

    N = len(items)
    # enumerate the 2**N possible combinations
    for i in range(2**N):
        combo = []
        for j in range(N):
            # test bit jth of integer i
            if (i >> j) % 2 == 1:
                combo.append(items[j])
        yield combo 
```

简单的产量发生器用法：

```
for i in powerSet([1,2,3,4]):
    print (i, ", ",  end="") 
```

上面使用示例的输出：

> [] , [1] , [2] , [1, 2] , [3] , [1, 3] , [2, 3] , [1, 2, 3] , [4] , [1, 4] , [2, 4] , [1, 2, 4] , [3, 4] , [1, 3, 4] , [2, 3, 4] , [1, 2, 3, 4] ,

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2015-09-14T00:13:02.740

这是另一个解决方案（单线），涉及使用`itertools.combinations`函数，但这里我们使用双列表推导（而不是 for 循环或求和）：

```
def combs(x):
    return [c for i in range(len(x)+1) for c in combinations(x,i)] 
```

* * *

演示：

```
>>> combs([1,2,3,4])
[(), 
 (1,), (2,), (3,), (4,), 
 (1, 2), (1, 3), (1, 4), (2, 3), (2, 4), (3, 4), 
 (1, 2, 3), (1, 2, 4), (1, 3, 4), (2, 3, 4), 
 (1, 2, 3, 4)] 
```

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2020-03-03T19:35:16.647

3个功能：

1.  n 个元素的所有组合列表
2.  n 元素列表的所有组合，其中顺序不明确
3.  所有排列

```
import sys

def permutations(a):
    return combinations(a, len(a))

def combinations(a, n):
    if n == 1:
        for x in a:
            yield [x]
    else:
        for i in range(len(a)):
            for x in combinations(a[:i] + a[i+1:], n-1):
                yield [a[i]] + x

def combinationsNoOrder(a, n):
    if n == 1:
        for x in a:
            yield [x]
    else:
        for i in range(len(a)):
            for x in combinationsNoOrder(a[:i], n-1):
                yield [a[i]] + x

if __name__ == "__main__":
    for s in combinations(list(map(int, sys.argv[2:])), int(sys.argv[1])):
        print(s) 
```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2019-11-23T15:43:56.287

```
from itertools import permutations, combinations

features = ['A', 'B', 'C']
tmp = []
for i in range(len(features)):
    oc = combinations(features, i + 1)
    for c in oc:
        tmp.append(list(c)) 
```

* * *

输出

```
[
 ['A'],
 ['B'],
 ['C'],
 ['A', 'B'],
 ['A', 'C'],
 ['B', 'C'],
 ['A', 'B', 'C']
] 
```

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2020-05-05T16:27:29.120

您还可以使用优秀软件包中的[powerset](https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.powerset)功能。[`more_itertools`](https://pypi.org/project/more-itertools/)

```
from more_itertools import powerset

l = [1,2,3]
list(powerset(l))

# [(), (1,), (2,), (3,), (1, 2), (1, 3), (2, 3), (1, 2, 3)] 
```

我们还可以验证它是否符合 OP 的要求

```
from more_itertools import ilen

assert ilen(powerset(range(15))) == 32_768 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2015-09-13T23:28:46.337

以下是“标准递归答案”，类似于其他类似答案[https://stackoverflow.com/a/23743696/711085](https://stackoverflow.com/a/23743696/711085)。（我们实际上不必担心堆栈空间用完，因为我们无法处理所有 N! 排列。）

它依次访问每个元素，要么取走它，要么离开它（我们可以直接从这个算法中看到 2^N 基数）。

```
def combs(xs, i=0):
    if i==len(xs):
        yield ()
        return
    for c in combs(xs,i+1):
        yield c
        yield c+(xs[i],) 
```

* * *

演示：

```
>>> list( combs(range(5)) )
[(), (0,), (1,), (1, 0), (2,), (2, 0), (2, 1), (2, 1, 0), (3,), (3, 0), (3, 1), (3, 1, 0), (3, 2), (3, 2, 0), (3, 2, 1), (3, 2, 1, 0), (4,), (4, 0), (4, 1), (4, 1, 0), (4, 2), (4, 2, 0), (4, 2, 1), (4, 2, 1, 0), (4, 3), (4, 3, 0), (4, 3, 1), (4, 3, 1, 0), (4, 3, 2), (4, 3, 2, 0), (4, 3, 2, 1), (4, 3, 2, 1, 0)]

>>> list(sorted( combs(range(5)), key=len))
[(), 
 (0,), (1,), (2,), (3,), (4,), 
 (1, 0), (2, 0), (2, 1), (3, 0), (3, 1), (3, 2), (4, 0), (4, 1), (4, 2), (4, 3), 
 (2, 1, 0), (3, 1, 0), (3, 2, 0), (3, 2, 1), (4, 1, 0), (4, 2, 0), (4, 2, 1), (4, 3, 0), (4, 3, 1), (4, 3, 2), 
 (3, 2, 1, 0), (4, 2, 1, 0), (4, 3, 1, 0), (4, 3, 2, 0), (4, 3, 2, 1), 
 (4, 3, 2, 1, 0)]

>>> len(set(combs(range(5))))
32 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2017-10-06T16:08:32.030

*我知道使用 itertools 来获取所有*组合要实用得多，但是如果你碰巧想要编写**很多代码，你***可以部分地通过列表理解来实现这一点*

 **对于两对的组合：

```
lambda l: [(a, b) for i, a in enumerate(l) for b in l[i+1:]] 
```

而且，对于三对的组合，就这么简单：

```
lambda l: [(a, b, c) for i, a in enumerate(l) for ii, b in enumerate(l[i+1:]) for c in l[i+ii+2:]] 
```

* * *

结果与使用 itertools.combinations 相同：

```
import itertools
combs_3 = lambda l: [
    (a, b, c) for i, a in enumerate(l) 
    for ii, b in enumerate(l[i+1:]) 
    for c in l[i+ii+2:]
]
data = ((1, 2), 5, "a", None)
print("A:", list(itertools.combinations(data, 3)))
print("B:", combs_3(data))
# A: [((1, 2), 5, 'a'), ((1, 2), 5, None), ((1, 2), 'a', None), (5, 'a', None)]
# B: [((1, 2), 5, 'a'), ((1, 2), 5, None), ((1, 2), 'a', None), (5, 'a', None)] 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2017-11-06T09:01:08.323

这里有两个实现`itertools.combinations`

一个返回列表的

```
def combinations(lst, depth, start=0, items=[]):
    if depth <= 0:
        return [items]
    out = []
    for i in range(start, len(lst)):
        out += combinations(lst, depth - 1, i + 1, items + [lst[i]])
    return out 
```

一个返回一个生成器

```
def combinations(lst, depth, start=0, prepend=[]):
    if depth <= 0:
        yield prepend
    else:
        for i in range(start, len(lst)):
            for c in combinations(lst, depth - 1, i + 1, prepend + [lst[i]]):
                yield c 
```

请注意，建议为那些提供帮助函数，因为 prepend 参数是静态的，并且不会随着每次调用而改变

```
print([c for c in combinations([1, 2, 3, 4], 3)])
# [[1, 2, 3], [1, 2, 4], [1, 3, 4], [2, 3, 4]]

# get a hold of prepend
prepend = [c for c in combinations([], -1)][0]
prepend.append(None)

print([c for c in combinations([1, 2, 3, 4], 3)])
# [[None, 1, 2, 3], [None, 1, 2, 4], [None, 1, 3, 4], [None, 2, 3, 4]] 
```

这是一个非常肤浅的案例，但最好是安全而不是抱歉

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2017-12-17T18:04:33.027

这个怎么样..使用字符串而不是列表，但同样的事情..字符串可以被视为Python中的列表：

```
def comb(s, res):
    if not s: return
    res.add(s)
    for i in range(0, len(s)):
        t = s[0:i] + s[i + 1:]
        comb(t, res)

res = set()
comb('game', res) 

print(res) 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2017-12-19T16:23:42.837

来自 itertools 的组合

```
import itertools
col_names = ["aa","bb", "cc", "dd"]
all_combinations = itertools.chain(*[itertools.combinations(col_names,i+1) for i,_ in enumerate(col_names)])
print(list(all_combinations)) 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2018-10-12T12:59:42.657

**如果没有** `itertools`Python 3，您可以执行以下操作：

```
def combinations(arr, carry):
    for i in range(len(arr)):
        yield carry + arr[i]
        yield from combinations(arr[i + 1:], carry + arr[i]) 
```

最初在哪里`carry = "".`

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2015-05-01T05:07:03.430

这段代码采用了一个简单的算法和嵌套列表......

```
# FUNCTION getCombos: To generate all combos of an input list, consider the following sets of nested lists...
#
#           [ [ [] ] ]
#           [ [ [] ], [ [A] ] ]
#           [ [ [] ], [ [A],[B] ],         [ [A,B] ] ]
#           [ [ [] ], [ [A],[B],[C] ],     [ [A,B],[A,C],[B,C] ],                   [ [A,B,C] ] ]
#           [ [ [] ], [ [A],[B],[C],[D] ], [ [A,B],[A,C],[B,C],[A,D],[B,D],[C,D] ], [ [A,B,C],[A,B,D],[A,C,D],[B,C,D] ], [ [A,B,C,D] ] ]
#
#  There is a set of lists for each number of items that will occur in a combo (including an empty set).
#  For each additional item, begin at the back of the list by adding an empty list, then taking the set of
#  lists in the previous column (e.g., in the last list, for sets of 3 items you take the existing set of
#  3-item lists and append to it additional lists created by appending the item (4) to the lists in the
#  next smallest item count set. In this case, for the three sets of 2-items in the previous list. Repeat
#  for each set of lists back to the initial list containing just the empty list.
#

def getCombos(listIn = ['A','B','C','D','E','F'] ):
    listCombos = [ [ [] ] ]     # list of lists of combos, seeded with a list containing only the empty list
    listSimple = []             # list to contain the final returned list of items (e.g., characters)

    for item in listIn:
        listCombos.append([])   # append an emtpy list to the end for each new item added
        for index in xrange(len(listCombos)-1, 0, -1):  # set the index range to work through the list
            for listPrev in listCombos[index-1]:        # retrieve the lists from the previous column
                listCur = listPrev[:]                   # create a new temporary list object to update
                listCur.append(item)                    # add the item to the previous list to make it current
                listCombos[index].append(listCur)       # list length and append it to the current list

                itemCombo = ''                          # Create a str to concatenate list items into a str
                for item in listCur:                    # concatenate the members of the lists to create
                    itemCombo += item                   # create a string of items
                listSimple.append(itemCombo)            # add to the final output list

    return [listSimple, listCombos]
# END getCombos() 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2017-02-05T03:42:55.247

这是我的实现

```
def get_combinations(list_of_things):
"""gets every combination of things in a list returned as a list of lists

Should be read : add all combinations of a certain size to the end of a list for every possible size in the
the list_of_things.

"""
list_of_combinations = [list(combinations_of_a_certain_size)
                        for possible_size_of_combinations in range(1,  len(list_of_things))
                        for combinations_of_a_certain_size in itertools.combinations(list_of_things,
                                                                                     possible_size_of_combinations)]
return list_of_combinations 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2017-10-22T00:57:26.393

不使用 itertools：

```
def combine(inp):
    return combine_helper(inp, [], [])

def combine_helper(inp, temp, ans):
    for i in range(len(inp)):
        current = inp[i]
        remaining = inp[i + 1:]
        temp.append(current)
        ans.append(tuple(temp))
        combine_helper(remaining, temp, ans)
        temp.pop()
    return ans

print(combine(['a', 'b', 'c', 'd'])) 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2011-08-21T19:10:24.223

使用列表理解：

```
def selfCombine( list2Combine, length ):
    listCombined = str( ['list2Combine[i' + str( i ) + ']' for i in range( length )] ).replace( "'", '' ) \
                     + 'for i0 in range(len( list2Combine ) )'
    if length > 1:
        listCombined += str( [' for i' + str( i ) + ' in range( i' + str( i - 1 ) + ', len( list2Combine ) )' for i in range( 1, length )] )\
            .replace( "', '", ' ' )\
            .replace( "['", '' )\
            .replace( "']", '' )

    listCombined = '[' + listCombined + ']'
    listCombined = eval( listCombined )

    return listCombined

list2Combine = ['A', 'B', 'C']
listCombined = selfCombine( list2Combine, 2 ) 
```

输出将是：

```
['A', 'A']
['A', 'B']
['A', 'C']
['B', 'B']
['B', 'C']
['C', 'C'] 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2020-10-30T21:17:32.947

我迟到了，但想分享我找到的解决同一问题的解决方案：具体来说，我正在寻找顺序组合，所以对于“STAR”，我想要“STAR”、“TA”、“AR”，但不是“SR”。

```
lst = [S, T, A, R]
lstCombos = []
for Length in range(0,len(lst)+1):
    for i in lst:
        lstCombos.append(lst[lst.index(i):lst.index(i)+Length]) 
```

可以通过在最后一行之前添加额外的 if 来过滤重复项：

```
lst = [S, T, A, R]
lstCombos = []
for Length in range(0,len(lst)+1):
    for i in lst:
         if not lst[lst.index(i):lst.index(i)+Length]) in lstCombos:
             lstCombos.append(lst[lst.index(i):lst.index(i)+Length]) 
```

如果由于某种原因这会在输出中返回空白列表，这发生在我身上，我补充说：

```
for subList in lstCombos:
    if subList = '':
         lstCombos.remove(subList) 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-05-07T19:17:02.480

如[文档中所述](https://docs.python.org/3.6/library/itertools.html)

```
def combinations(iterable, r):
    # combinations('ABCD', 2) --> AB AC AD BC BD CD
    # combinations(range(4), 3) --> 012 013 023 123
    pool = tuple(iterable)
    n = len(pool)
    if r > n:
        return
    indices = list(range(r))
    yield tuple(pool[i] for i in indices)
    while True:
        for i in reversed(range(r)):
            if indices[i] != i + n - r:
                break
        else:
            return
        indices[i] += 1
        for j in range(i+1, r):
            indices[j] = indices[j-1] + 1
        yield tuple(pool[i] for i in indices)

x = [2, 3, 4, 5, 1, 6, 4, 7, 8, 3, 9]
for i in combinations(x, 2):
    print i 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-12-04T06:54:39.297

如果有人正在寻找一个反向列表，就像我一样：

```
stuff = [1, 2, 3, 4]

def reverse(bla, y):
    for subset in itertools.combinations(bla, len(bla)-y):
        print list(subset)
    if y != len(bla):
        y += 1
        reverse(bla, y)

reverse(stuff, 1) 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-09-04T19:59:48.897

```
flag = 0
requiredCals =12
from itertools import chain, combinations

def powerset(iterable):
    s = list(iterable)  # allows duplicate elements
    return chain.from_iterable(combinations(s, r) for r in range(len(s)+1))

stuff = [2,9,5,1,6]
for i, combo in enumerate(powerset(stuff), 1):
    if(len(combo)>0):
        #print(combo , sum(combo))
        if(sum(combo)== requiredCals):
            flag = 1
            break
if(flag==1):
    print('True')
else:
    print('else') 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-08-05T05:29:35.173

如果您不想使用组合库，这里是解决方案：

```
nums = [1,2,3]
p = [[]]
fnl = [[],nums]

for i in range(len(nums)):
    for j in range(i+1,len(nums)):
        p[-1].append([i,j])

for i in range(len(nums)-3):
    p.append([])
    for m in p[-2]:
        p[-1].append(m+[m[-1]+1])

for i in p:
    for j in i:
        n = []
        for m in j:
            if m < len(nums):
                n.append(nums[m])
        if n not in fnl:
            fnl.append(n)

for i in nums:
    if [i] not in fnl:
        fnl.append([i])

print(fnl) 
```

输出：

```
[[], [1, 2, 3], [1, 2], [1, 3], [2, 3], [1], [2], [3]] 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2022-02-07T07:15:29.720

在组合大小上递归的另一种解决方案：

```
def _comb(items, i, res, pos):
    if len(items) == i:
        return

    res += [r + [c] for c in items for r in res[pos:]]
    # Combinations are like a tree, and "pos" is the leaves index
    # where we build the new sub tree 
    _comb(items,i+1, res, len(items)**i+pos)

def comb(items):
    l = [[]]
    _comb(items, 0, l, 0)
    return l 
```

# java - Java中的“用于编码的不可映射字符”警告

> ID：464874
> 
> 赞同：125
> 
> 时间：2009-01-21T11:17:37.333
> 
> 标签：java, encoding, utf-8, ascii

我目前正在开发一个 Java 项目，该项目在编译时发出以下警告：

```
/src/com/myco/apps/AppDBCore.java:439: warning: unmappable character for encoding UTF8
    [javac]         String copyright = "� 2003-2008 My Company. All rights reserved."; 
```

我不确定 SO 将如何在日期之前呈现字符，但它应该是版权符号，并在警告中显示为菱形中的问号。

值得注意的是，该字符正确显示在输出工件中，但是警告很麻烦，并且有朝一日，包含此类的文件可能会被错误地保存编码的文本编辑器触及...

如何将此字符注入“版权”字符串，以便编译器满意，并且符号保留在文件中而没有潜在的重新编码问题？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2009-10-24T20:59:58.660

尝试：javac -encoding ISO-8859-1 file_name.java

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2009-01-21T11:20:51.037

使用“\uxxxx”转义格式。

根据[Wikipedia](http://en.wikipedia.org/wiki/Copyright_symbol)，版权符号是 unicode U+00A9 所以你的行应该是：

```
String copyright = "\u00a9 2003-2008 My Company. All rights reserved."; 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-05-28T14:27:35.403

If you're using Maven, set the `<encoding>` explicitly in the compiler plugin's configuration, e.g.

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin> 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2014-02-13T13:28:49.323

This helped for me:

> All you need to do, is to specify a envirnoment variable called JAVA_TOOL_OPTIONS. If you set this variable to -Dfile.encoding=UTF8, everytime a JVM is started, it will pick up this information.

Source: [http://whatiscomingtomyhead.wordpress.com/2012/01/02/get-rid-of-unmappable-character-for-encoding-cp1252-once-and-for-all/](http://whatiscomingtomyhead.wordpress.com/2012/01/02/get-rid-of-unmappable-character-for-encoding-cp1252-once-and-for-all/)

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2015-09-13T23:03:22.053

put this line in yor file .gradle above the Java conf.

```
apply plugin: 'java'
compileJava {options.encoding = "UTF-8"} 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-04-05T06:17:35.030

Most of the time this compile error comes when unicode(UTF-8 encoded) file compiling

```
javac -encoding UTF-8 HelloWorld.java 
```

and also You can add this compile option to your IDE ex: Intellij idea
(File>settings>Java Compiler) add as additional command line parameter

![enter image description here](https://i.stack.imgur.com/eqbY6.png)

> **-encoding :** encoding Set the source file encoding name, such as EUC-JP and UTF-8.. If -encoding is not specified, the platform default converter is used. ([DOC](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/javac.html))

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2018-10-21T10:42:44.723

### Gradle Steps

If you are using Gradle then you can find the line that applies the java plugin:

```
apply plugin: 'java' 
```

Then set the encoding for the compile task to be UTF-8:

```
compileJava {options.encoding = "UTF-8"} 
```

If you have unit tests, then you probably want to compile those with UTF-8 too:

```
compileTestJava {options.encoding = "UTF-8"} 
```

### Overall Gradle Example

This means that the overall gradle code would look something like this:

```
apply plugin: 'java'
compileJava {options.encoding = "UTF-8"}
compileTestJava {options.encoding = "UTF-8"} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-04-30T01:53:52.040

This worked for me:

```
<?xml version="1.0" encoding="utf-8" ?>
<project name="test" default="compile">
    <target name="compile">
        <javac srcdir="src" destdir="classes" encoding="iso-8859-1" debug="true" />
    </target>
</project> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-04-14T19:07:30.717

For those wondering why this happens on some systems and not on others (with the same source, build parameters, and so on), **check your `LANG` environment variable**. I get the warning/error when `LANG=C.UTF-8`, but not when `LANG=en_US.UTF-8`.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-12-07T07:56:16.383

如果您使用eclipse（即使您编写utf8字符，Eclipse也可以为您放置utf8代码。您在编程时会看到正常的utf8字符，但背景将是utf8代码）；

1.  选择**项目**
2.  右键单击并选择**属性**
3.  在**资源面板**上选择**资源**（在 2 之后打开的右上方菜单。）
***   您可以在**资源面板**，**文本文件编码**中看到，选择其他您想要的**

 ****PS：**如果您在代码中使用静态值，则可以。例如 String test = "İİİİİİıııııııçççççç";

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-06-22T12:14:13.167

I had the same problem, where the character index reported in the java error message was incorrect. I narrowed it down to the double quote characters just prior to the reported position being hex 094 (cancel instead of quote, but represented as a quote) instead of hex 022\. As soon as I swapped for the hex 022 variant all was fine.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-06-24T15:06:15.640

If one is using Maven Build from the command prompt one can use the following command as well:

```
 mvn -Dproject.build.sourceEncoding=UTF-8 
```

# c# - 使用 Windows 虚拟邮件服务器发送带有标题返回路径的电子邮件

> ID：464876
> 
> 赞同：4
> 
> 时间：2009-01-21T11:17:47.503
> 
> 标签：c#, email, mailmessage, return-path

我正在尝试使用 .NET MailMessage 类发送一封电子邮件，该类还可以添加返回路径标头，以便任何退回邮件都返回到不同的电子邮件地址。代码如下：

```
MailMessage mm = new MailMessage(
    new MailAddress(string.Format("{0}<{1}>", email.FromName, email.FromEmail)), 
    new MailAddress(emailTo));

mm.Subject = ReplaceValues(email.Subject, nameValues);
mm.ReplyTo = new MailAddress(string.Format("{0}<{1}>", email.FromName, email.FromEmail));
mm.Headers.Add("Return-Path", ReturnEmail);

// Set the email html and plain text
// Removed because it is unneccsary for this example

// Now setup the smtp server
SmtpClient smtp = new SmtpClient();
smtp.Host = SmtpServer;
smtp.DeliveryMethod = SmtpDeliveryMethod.PickupDirectoryFromIis;

if (SmtpUsername.Length > 0)
{
    System.Net.NetworkCredential theCredential = 
        new System.Net.NetworkCredential(SmtpUsername, SmtpPassword);
    smtp.Credentials = theCredential;
}

smtp.Send(mm); 
```

每当我检查发送的电子邮件时，我都会检查标题，它似乎总是缺少返回路径。我是否缺少正确配置它的东西？正如我上面所说，我在我的开发机器 (XP) 上使用标准的虚拟邮件服务器，但它最终将在 Windows 2003 上运行。

有没有人知道为什么它没有通过？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-26T16:26:03.860

Return-Path 是根据 SMTP MAIL FROM Envelope 设置的。您可以使用 Sender 属性来做这样的事情。
另一个关于您迟早会遇到的相关问题的讨论：[如何使用 System.Net.Mail 设置 SMTP 信封 MAIL FROM？](https://stackoverflow.com/questions/51793/how-can-you-set-the-smtp-envelope-mail-from-using-system-net-mail)

顺便说一句，如果您使用 SmtpDeliveryMethod.PickupDirectoryFromIis，则 Sender 属性不会用作 MAIL FROM；你必须使用网络作为传递方式来保持这个值。我没有找到任何解决此问题的方法。
[PickupDirectoryFromIis、Sender 属性和 SMTP MAIL FROM 信封](https://stackoverflow.com/questions/457880/pickupdirectoryfromiis-sender-property-and-smtp-mail-from-envelope)

# c# - 为什么 msi 文件大小比主应用程序大

> ID：464878
> 
> 赞同：0
> 
> 时间：2009-01-21T11:18:22.493
> 
> 标签：c#, windows-installer

我发现 msi 文件的大小是 69.0 MB，尽管我的主应用程序的大小是 1.5 MB，那么所有这些大小都用在哪里？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T12:02:26.897

像之前的海报一样，我建议使用[Orca](https://docs.microsoft.com/en-us/windows/win32/msi/orca-exe)来检查包装。它包含在 Windows Installer SDK 中。您必须知道运行应用程序需要什么。大多数情况下，您需要 VC++ 运行时、数据访问组件、第 3 方 dll。如果您的应用程序是托管的，您可以为 .NET 2.0 运行时添加 ~20 mb。.NET 3.5 可再发行版 ia 约为 ~200Mb。客户资料约为 70mb，这可能会回答您的问题。考虑使用网络下载器，它会按需下载和安装 .NET 运行时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-30T03:14:31.443

***先决条件和运行***时：我的猜测是您在 MSI 中包含了大量的*合并模块*、*运行时包*或*先决条件。*`.NET framework`像这样的先决条件`Crystal Reports`是使你的包膨胀的一种常见方法。

***MSI 文件碎片***：另一种可能是您已多次**保存 MSI**。MSI 文件是 COM 结构的存储文件，它们没有对内部流进行任何“碎片整理”。要确定这是否是问题所在，只需在 Orca 中打开 MSI 并执行另存为... 如果文件大小减小，则问题（或部分问题）是由文件碎片引起的。

***旧式 Office 文件***：请注意，“另存为...”行为与 Office 文档中的行为相同。例如，在 Word 文档上执行另存为时，文件大小可能会大大减小。其原因是当文件内容流式传输到没有碎片的新文件时发生的“碎片整理”。较新版本的 Office 使用 Zip 格式，其中包含 XML 和资源，而不是 COM 结构化存储文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T11:23:47.757

1.5 MB 到 69 MB？哇，那是相当不同的。如果您使用的是 VS 安装项目，请检查您没有捆绑 .NET Framework 或任何其他组件。

还可以查看[WiX](http://wix.sourceforge.net/)以生成您的 msi 包。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T11:46:37.397

[使用Orca](http://msdn.microsoft.com/en-us/library/aa370557.aspx)检查您的 msi 文件。它将显示 msi 文件中的所有表格，包括打包文件及其大小。

但是，如果您谈论的是“添加/删除程序”对话框中报告的大小，您应该阅读[此博客条目](http://blogs.msdn.com/oldnewthing/archive/2004/07/09/178342.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-21T11:27:22.290

这太极端了，我经常使用 wix，但我从来没有从小文件中看到过这么大的 msi，例如我有大约 110 KB 的东西。所以我认为这一定是由于您使用的工具。如果您删除完整的 .msi 内容并进行完整的重建，会发生什么？

问候

# javascript - 如何获取pdf文件中文本的坐标

> ID：464883
> 
> 赞同：0
> 
> 时间：2009-01-21T11:20:06.483
> 
> 标签：javascript

谁能告诉我如何使用 javascript 在 pdf 文档中获取坐标，假设如果某些文本写在 pdf 文档中，那么我如何获取该文本的坐标（x，y）。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T14:49:56.903

> 它非常紧急。

一项任务对你的工作来说有多紧迫是无关紧要的，因为我们没有得到报酬来完成你的工作。SO在这里促进学习。

> 假设如果某些文本是用 pdf 文档编写的，那么我如何获取该文本的坐标（x，y）

假设您正在谈论嵌入在 PDF 文档中的 JavaScript，我的理解是您无法访问完整的文档文本。但是，如果您想查找文本中某个特定位的位置，可以为其添加注释，然后访问其 rect 属性：

```
var doc= this; // or however you are accessing it
var annot= doc.getAnnot(0, 'AnnotationName');
var left= annot.rect[0];
var bottom= annot.rect[1];
var right= annot.rect[2];
var top= annot.rect[3]; 
```

# c# - 自动实现的属性是否支持属性？

> ID：464889
> 
> 赞同：7
> 
> 时间：2009-01-21T11:21:21.210
> 
> 标签：c#, attributes, automatic-properties

有人告诉我，在 c# 中，自动实现的属性不允许使用属性。真的吗？如果是，为什么？

编辑：我从一本流行的 LINQ 书籍中获得了这些信息，简直不敢相信！编辑：请参阅 Paul Kimmel 的 LINQ Unleashed 第 34 页，他说“*自动实现的属性不允许使用属性，因此如果需要属性，请自行选择属性*”

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-21T11:24:05.260

您可以毫无问题地将属性应用于自动属性。

引用[MSDN](http://msdn.microsoft.com/en-us/library/bb384054.aspx)：

> 在自动实现的属性上允许使用属性，但显然不允许在支持字段上使用属性，因为这些属性无法从您的源代码中访问。如果您必须在属性的支持字段上使用属性，只需创建一个常规属性。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-21T11:49:58.657

证明这是错误的最简单方法是测试它：

```
using System;
using System.ComponentModel;
using System.Reflection;

class Test
{
    [Description("Auto-implemented property")]
    public static string Foo { get; set; }  

    static void Main(string[] args)
    {
        var property = typeof(Test).GetProperty("Foo");
        var attributes = property.GetCustomAttributes
                (typeof(DescriptionAttribute), false);

        foreach (DescriptionAttribute description in attributes)
        {
            Console.WriteLine(description.Description);
        }
    }
} 
```

我建议您给作者发电子邮件，以便他可以将其作为勘误表发布。如果他的意思是你不能将属性应用到 f *​​ield*，这会给他一个更仔细解释的机会。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-01-14T15:57:41.927

我认为作者的意思是，您不能将自定义属性应用于私有支持字段。例如，如果要将自动属性标记为非序列化，则不能这样做：

```
[Serializable]
public class MyClass
{
    [field:NonSerializedAttribute()]
    public int Id
    {
        get;
        private set;
    }
} 
```

这段代码可以编译，但它不起作用。您*可以*将属性应用于属性本身，但*不能*将其应用于支持字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T11:49:23.743

另请注意，任何 Automatic 属性也将应用 CompilerGeneratedAttribute。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-14T14:11:59.710

当前版本的 Visual Studio 和 C# 编译器支持这一点。我使用启用了 C# 8.0 的 VS 16.4.2 进行了测试。我不确切知道它是在哪个版本中启用的，但这是个好消息。

句法：

```
[field: NonSerialized]
public SomeNonSerializableType MyAutoProperty { get; set; } = DefaultValueAfterSerialization; 
```

实际用例；支持整洁/可往返的合格 XML 序列化，没有杂乱的支持字段，但避免运行时异常并解决代码分析错误 CA2235：

```
/// <summary>
/// XML name table for serialization.
/// </summary
[XmlSerializerNamespaces]
[field: NonSerialized]
public XmlSerializerNamespaces XmlNamespaces { get; set; } = new XmlSerializerNamespaces(); 
```

如果您正在使用 .NET Core 3、.NET Standard 2.1 或更高版本开发新的“SDK”样式项目之一，它将立即工作，因为它们默认为语言版本 8。否则对于所有“旧版”.NET Framework 和非-SDK 项目，您必须将“LangVersion”设置添加到您的项目[中，如此](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/configure-language-version#edit-the-project-file)处所述的“8.0”或“最新”。

# c - 调试可能从 Windows 服务调用的 Windows DLL

> ID：464898
> 
> 赞同：1
> 
> 时间：2009-01-21T11:23:45.323
> 
> 标签：c, dll, windows-services

每次执行 snmpwalk（另一个控制台应用程序）时，我都有由 Windows SNMP 服务 (snmp.exe) 调用的 SNMP 扩展代理 DLL。我想进入从上述 Windows 服务调用的 DLL 代码。我该怎么做呢？

谢谢索姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T11:39:01.097

通常，您会将调试器附加到使用您的 DLL 的正在运行的进程，然后像往常一样与调试器交互。

在 Visual Studio 2008 中，您可以通过使用“调试”>“附加到进程”来完成此操作，然后选择正确的进程。至少我依稀记得以前是这样做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T12:20:09.217

正如 Timo Geusch 建议的那样，您可以从 Visual Studio 附加到正在运行的服务。之后，您可以在代码中设置断点。您还可以在要调试库的位置添加对[DebugBreak函数的调用。](http://msdn.microsoft.com/en-us/library/ms679297(VS.85).aspx)如果要调试的代码在附加到进程之前执行（例如，如果您的代码在服务启动事件的处理程序中执行），这可以帮助您。

编辑：您可以附加到任何服务，即使您没有调试信息，但在这种情况下，您将无法在函数调用上方看到堆栈跟踪。

# c# - 如何在 C# 中打开 Excel 文件？

> ID：464902
> 
> 赞同：72
> 
> 时间：2009-01-21T11:25:48.110
> 
> 标签：c#, .net, excel, vsto

我正在尝试将一些[VBA](http://en.wikipedia.org/wiki/Visual_Basic_for_Applications)代码转换为 C#。我是 C# 新手。目前我正在尝试从文件夹中打开一个 Excel 文件，如果它不存在，则创建它。我正在尝试类似以下的事情。我怎样才能让它工作？

```
Excel.Application objexcel;
Excel.Workbook wbexcel;
bool wbexists;
Excel.Worksheet objsht;
Excel.Range objrange;

objexcel = new Excel.Application();
if (Directory("C:\\csharp\\error report1.xls") = "")
{
    wbexcel.NewSheet();
}

else
{
    wbexcel.Open("C:\\csharp\\error report1.xls");
    objsht = ("sheet1");
}
objsht.Activate(); 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2009-01-21T15:07:07.307

您需要安装 Microsoft Visual Studio Tools for Office (VSTO)。

VSTO 可以在 Visual Studio 安装程序中的 Workloads > Web & Cloud > Office/SharePoint Development 下选择。

之后，创建一个通用的 .NET 项目并 `Microsoft.Office.Interop.Excel`通过“添加引用...> 程序集”对话框添加对的引用。

```
Application excel = new Application();
Workbook wb = excel.Workbooks.Open(path); 
```

`Missing.Value`是一种特殊的反射结构，用于不必要的参数替换

* * *

在较新的版本中，所需的程序集引用称为`Microsoft Excel 16.0 Object Library`. 如果您没有安装最新版本，您可能已经安装了`Microsoft Excel 15.0 Object Library`或旧版本，但包含的过程相同。

[![在此处输入图像描述](https://i.stack.imgur.com/J6wmd.png)](https://i.stack.imgur.com/J6wmd.png)

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2011-10-18T21:49:31.110

```
FileInfo fi = new FileInfo("C:\\test\\report.xlsx");
if(fi.Exists)
{
    System.Diagnostics.Process.Start(@"C:\test\report.xlsx");
}
else
{
    //file doesn't exist
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-28T17:45:04.663

```
private void btnChoose2_Click(object sender, EventArgs e)
{
  OpenFileDialog openfileDialog1 = new OpenFileDialog();
  if (openfileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
  {
    this.btnChoose2.Text = openfileDialog1.FileName;
    String filename = DialogResult.ToString();

    var excelApp = new Excel.Application();
    excelApp.Visible = true;
    excelApp.Workbooks.Open(btnChoose2.Text);
  }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T06:23:41.163

你应该这样打开

```
 Excel.Application xlApp ;
        Excel.Workbook xlWorkBook ;
        Excel.Worksheet xlWorkSheet ;
        object misValue = System.Reflection.Missing.Value;

        xlApp = new Excel.ApplicationClass();
        xlWorkBook = xlApp.Workbooks.Open("csharp.net-informations.xls", 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
        xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1); 
```

来源：[http ://csharp.net-informations.com/excel/csharp-open-excel.htm](http://csharp.net-informations.com/excel/csharp-open-excel.htm)

鲁登

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-20T00:39:50.433

进口

```
 using Excel= Microsoft.Office.Interop.Excel;
 using Microsoft.VisualStudio.Tools.Applications.Runtime; 
```

这是使用 C# 打开 Excel 工作表的代码。

```
 Microsoft.Office.Interop.Excel.Application excel = new Microsoft.Office.Interop.Excel.Application();
    Microsoft.Office.Interop.Excel.Workbook wbv = excel.Workbooks.Open("C:\\YourExcelSheet.xlsx");
    Microsoft.Office.Interop.Excel.Worksheet wx = excel.ActiveSheet as Microsoft.Office.Interop.Excel.Worksheet;

    wbv.Close(true, Type.Missing, Type.Missing);
    excel.Quit(); 
```

这是有关如何使用 C# 打开 excel 工作表的视频伙伴[https://www.youtube.com/watch?v=O5Dnv0tfGv4](https://www.youtube.com/watch?v=O5Dnv0tfGv4)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-21T11:39:27.973

要打开文件，请尝试以下操作：

```
objexcel.Workbooks.Open(@"C:\YourPath\YourExcelFile.xls",
    missing, missing, missing, missing, missing, missing, missing,
    missing, missing, missing, missing, missing,missing, missing); 
```

您必须提供那些看起来很愚蠢的“缺失”论点。如果您在 VB.Net 中编写相同的代码，您将不需要它们，但您无法在 C# 中避免它们。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-21T14:57:21.240

如果您也说出问题所在，或者在运行时失败，则更容易为您提供帮助。

但是快速浏览一下，您已经混淆了一些事情。

由于几个问题，以下内容不起作用。

```
if (Directory("C:\\csharp\\error report1.xls") = "") 
```

您要做的是创建一个新的 Directory 对象，该对象应该指向一个文件，然后检查是否有任何错误。

您实际上在做的是尝试调用一个名为 Directory() 的函数，然后为结果分配一个字符串。这将不起作用，因为 1/ 您没有名为 Directory(string str) 的函数，并且您无法从函数分配结果（您只能将值分配给变量）。

您应该做的（至少对于这一行）如下

```
FileInfo fi = new FileInfo("C:\\csharp\\error report1.xls");
if(!fi.Exists)
{
    // Create the xl file here
}
else
{
    // Open file here
} 
```

至于为什么 Excel 代码不起作用，您必须检查 Google 应该能够为您提供的 Excel 库的文档。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-07-15T10:50:35.600

```
Microsoft.Office.Interop.Excel.Application excapp;

excapp = new Microsoft.Office.Interop.Excel.Application();

object misval=System.Reflection.Missing.Value;

Workbook wrkbuk = new Workbook();

Worksheet wrksht = new Worksheet();

wrkbuk = excapp.Workbooks._Open(@"C:\Users\...\..._template_v1.0.xlsx", misval, misval, 
misval, misval, misval, misval, misval, misval, misval, misval, misval, misval);

wrksht = (Microsoft.Office.Interop.Excel.Worksheet)wrkbuk.Worksheets.get_Item(2); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-21T15:29:42.987

这是一个商业应用程序还是一些业余爱好者/开源软件？

我问这个是因为根据我的经验，所有免费的 .NET Excel 处理替代品都有严重的问题，原因不同。对于业余爱好者，我通常最终将 jExcelApi 从 Java 移植到 C# 并使用它。

但如果这是一个商业应用程序，您最好购买第三方库，例如[Aspose.Cells](http://www.aspose.com/categories/file-format-components/aspose.cells-for-.net-and-java/default.aspx)。相信我，这完全值得，因为它节省了大量时间，而且时间不是免费的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-04-04T15:06:57.567

为了在 C# 应用程序中编辑 Excel 文件，我最近开始使用[NPOI](https://github.com/tonyqus/npoi)。我很满意。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-01-12T06:54:06.490

**代码 ：**

```
 private void button1_Click(object sender, EventArgs e)
     {

        textBox1.Enabled=false;

            OpenFileDialog ofd = new OpenFileDialog();
            ofd.Filter = "Excell File |*.xlsx;*,xlsx";
            if (ofd.ShowDialog() == DialogResult.OK)
            {
                string extn = Path.GetExtension(ofd.FileName);
                if (extn.Equals(".xls") || extn.Equals(".xlsx"))
                {
                    filename = ofd.FileName;

                    if (filename != "")
                    {
                        try
                        {
                            string excelfilename = Path.GetFileName(filename);

                        }
                        catch (Exception ew)
                        {
                            MessageBox.Show("Errror:" + ew.ToString());
                        }
                    }
                }
            } 
```

# iphone - iPhone 开发 - 内存管理课程

> ID：464908
> 
> 赞同：8
> 
> 时间：2009-01-21T11:27:30.930
> 
> 标签：iphone, memory, performance

我需要学习内存管理。我有一个使用多个视图（大约 10 个）的应用程序，其中一些附加到选项卡控制器。问题是我正在使用图像（我从 Web 服务加载的许多图像）。我面临以下问题。

1.  当我在表格视图中滚动时，内存不断增加（为什么？） - 我检查了 Apple 网站上的 CustomTableViewCell 应用程序，当我使用 Instruments 运行它时，它显示了相同的迹象。

2.  我正在对许多对象使用自动释放，但我看到这些对象实际上并没有被释放并且内存是有线的。我怎样才能摆脱这些对象？

3.  如何告诉 NSAutoreleasePool 定期释放未使用的对象？我认为这可以帮助我摆脱有线内存。但我可以这样做吗？

Apple 或其他人（书籍或在线文章）是否有任何示例解释如何使用 Instruments（通过示例详细说明？）并微调应用程序的内存和性能？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-21T17:29:18.033

既然我们已经有了对自动释放的“只说不”的答案，我想我会添加一个关于如何更有效地使用自动释放的提示。不管是好是坏，并​​不是每个人都会完全避免自动释放——如果没有其他原因，只是因为 Apple 提供了许多方便的方法来向您提供自动释放的对象。

您不能只告诉自动释放池释放您不使用的任何对象。没有垃圾收集，它怎么知道呢？

您可以做的是创建一个本地自动释放池，然后在您不再需要本地自动释放对象时释放它。如果您有一个要创建自动释放对象的块，您将通过在块的开头创建一个本地自动释放池来确保它们被释放（只需分配/初始化它，不需要魔法）然后在释放池块的末端。瞧，池中的对象也被释放了。

自动释放池嵌套，所以如果你这样做，请记住这一点。如果您释放自动释放池，请确保它是最近分配的池，而不是其他池。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T11:34:38.047

当控制权返回给系统时，自动释放的内存会被释放，但只有在它选择时才会释放。如果您希望强制释放内存，请使用“释放”，它可以在那里工作。

应该注意的是，由于内存碎片化，分配和释放一块内存似乎无法让您回到可测量的“空闲”内存开始的位置。

托尼

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T13:40:56.107

出于性能原因，Apple 建议您尽可能自己保留/释放对象。自动释放它们可能会导致过多的内存使用，因为自动释放的对象并不总是立即释放。

换句话说，如果你知道你已经完成了一个对象，明确地释放它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T18:16:01.323

UITableView 有一种方法可以重用不再显示的表格单元格。这样，如果您一次只在屏幕上显示 6 个单元格，它不会在您滚动时继续创建更多单元格，而是重用已离开屏幕的单元格。每当您想创建一个新单元格时，首先查询 tableview 以查看它是否可以重用，如果没有则创建一个新单元格。

可以在此处找到的斯坦福 iphone 课程说明的幻灯片 55 上找到一个示例：[http ://www.scribd.com/doc/7671058/Standford-CS-193P-11Performance](http://www.scribd.com/doc/7671058/Standford-CS-193P-11Performance)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-21T14:57:47.793

根据 Apple 的说法，您不应使用自动释放，而应根据需要显式保留和释放对象。autorelease 不会在其功能结束后立即释放对象。如果在 tableview 中使用从 web 服务下载的图像，请尝试缓存这些图像并尽可能重用它们。另一种选择是仅获取正在显示的图像。

# c# - 无法更改 WinForms ComboBox 中的 DisplayMember

> ID：464911
> 
> 赞同：1
> 
> 时间：2009-01-21T11:28:27.293
> 
> 标签：c#, .net, winforms, combobox

我正在尝试使用以下代码更改组合框的显示方式：

```
 private void UpdateMapRoadPointList(List<GeographicAddress> plstMapRoadPointList)
    {
        cboFind.DataSource = plstMapRoadPointList;
        cboFind.DisplayMember = "ShortCode";
        cboFind.ValueMember = "";
    } 
```

GeographicAddress 是一个具有返回字符串的 ShortCode 属性的类：

```
 internal string ShortCode
    {
        get { return Distance + Carriageway; }
    } 
```

但是，在使用应用程序时，显示的值仍然来自 GeographicAddress.ToString()。在调试时，似乎 cboFind.DisplayMember = "ShortCode" 没有效果！DisplayMember 在执行该行之前和之后是 "" ！

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-21T11:36:02.240

```
public string ShortCode
    {
        get { return Distance + Carriageway; }
    }

private void UpdateMapRoadPointList(List<GeographicAddress> plstMapRoadPointList)
    {
        cboFind.DataSource = plstMapRoadPointList;
        cboFind.DisplayMember = "ShortCode";
    } 
```

这应该工作

将`ShortCode`属性设置为 Public 否则它将失败并使用`GeographicAddress.ToString()`

# html - 正则表达式匹配 HTML 中的属性？

> ID：464913
> 
> 赞同：1
> 
> 时间：2009-01-21T11:30:25.700
> 
> 标签：html, regex, parsing

我有一个 txt 文件，它实际上是某个网页的 html 源。在该 txt 文件中，有各种以“title=”标记开头的字符串。例如

```
<div id='UWTDivDomains_5_6_2_2'  title='Connectivity Framework'> 
```

我有兴趣提取文本**连接框架**并将其写入单独的文件。

像这样，有许多这样的标签，每个标签在 title='some text here which I need to extract 之后都有不同的文本'我想从 html 源/txt 文件中提取所有此类文本实例并写入单独的 txt文件。文本只能包含小写、大写字母和数字。每个文本字符串的长度（以字符为单位）会有所不同。

我正在为 Windows 使用 PowerGrep。Powergrep 允许我使用正则表达式 inout 搜索文本文件。我尝试使用搜索作为 title='[a-zA-Z0-9]

它显示了正确的匹配，但它只匹配字符串的第一个字符，并且只写入与第二个 txt 文件匹配的文本字符串的第一个字符，而不是所有字符串。

我希望所有字符串都匹配并写入第二个文件。

使用 powergrep 做我想做的事情的正确正则表达式或方法是什么？

-广告。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-21T12:17:12.470

我只是不确定必须询问多少次 HTML 文件的正则表达式解析问题（并用“使用 DOM 解析器”的正确解决方案来回答）。它每天都会出现。

困难在于：

*   在 HTML 中，属性可以有单引号、双引号甚至没有引号；
*   类似的字符串可以出现在 HTML 文档本身中；
*   您必须处理正确的转义；和
*   格式错误的 HTML（体面的解析器对常见错误非常健壮）。

因此，如果您满足所有这些要求（并且它变得非常复杂但仍然不完美的正则表达式），它仍然不是 100%。

HTML 解析器的存在是有原因的。使用它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-21T12:15:28.697

其他答案都对正则表达式进行了正确的更改，因此我将解释您的原始问题是什么。

方括号表示一个[字符类](http://www.regular-expressions.info/charclass.html)- 这意味着正则表达式将匹配这些括号内的任何字符。但是，与其他所有内容一样，默认情况下它只会匹配一次。正如正则表达式 " `s`" 只匹配 " " 中的第一个字符`ssss`，正则表达式 " `[a-zA-Z0-9]`" 将只匹配 " " 中的第一个字符`Connectivity Framework`。

通过添加[重复](http://www.regular-expressions.info/repeat.html)，可以使该字符类重复匹配。最简单的方法是在它之后添加一个星号（它将匹配 0 次或更多次出现）。因此，正则表达式“ `[a-zA-Z0-9]`*”将匹配一行中的尽可能多的字符，直到它遇到一个不在该字符类中的字符（在你的情况下，空格字符，因为你没有将它包含在你的括号中）。

正则表达式虽然很难准确地描述语法 - 如果有人在属性中放置非字母数字字符（例如＆符号）怎么办？您可以尝试通过使字符集“除引号字符之外的任何内容”来捕获引号之间的所有输入，因此“ `'[^']*'`”通常会做正确的事情。通常您还需要记住转义（例如，`'Mary\'s lamb'`您确实想要在中间捕获撇号的字符串，因此简单的“除撇号之外的所有内容”字符集都不会删除它），但幸运的是，这不是问题根据规范的 XML/HTML。

尽管如此，如果有一个现有的库可以为您进行提取，这可能比滚动您自己的库更快、更正确，所以如果可能的话，我会倾向于这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-21T11:36:16.873

我不熟悉 PowerGrep，但是，您的正则表达式不完整。试试这个：

```
title='[a-zA-Z0-9 ]*' 
```

或者更好：

```
title='([^']*)' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T12:23:37.683

我会使用这个正则表达式来获取标题属性值

```
<[a-z]+[^>]*\s+title\s*=\s*("[^"]*"|'[^']*'|[^\s >]*) 
```

请注意，此正则表达式匹配带引号的属性值表达式。因此，如果需要，您必须删除它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-21T11:33:43.010

这是您需要的正则表达式

```
title='([a-zA-Z0-9]+)' 
```

但是如果你要做更多这样的事情，使用解析器可能会使其更加健壮和有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-21T11:34:11.043

试试这个：

```
title=\'[a-zA-Z0-9]*\' 
```

# c# - 如何将文件拖到我创建的 exe（拖放到图标上）并在 exe 开始运行时将其作为参数？

> ID：464922
> 
> 赞同：1
> 
> 时间：2009-01-21T11:34:25.130
> 
> 标签：c#

如何将文件拖到我创建的 exe 中（拖放到图标上）并在 exe 开始运行时将其作为参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-06T20:52:43.450

如果您编写以下代码，那么当您将文件拖到 exe 图标上时，args[0] 会将其路径作为参数：（我添加了 if 语句，如果您在不拖动任何内容的情况下启动程序，它应该不要崩溃）

```
class Program
    {
        static void Main(string[] args)
        {
            if (args.Length > 0)
            {
                Console.WriteLine(args[0]);
            }
            Console.ReadLine();
        }
    } 
```

# c# - 结合序列化和数据绑定的问题

> ID：464929
> 
> 赞同：1
> 
> 时间：2009-01-21T11:36:03.817
> 
> 标签：c#, data-binding, serialization

实际上我正在使用 C# 并且已经让 DataBinding 和序列化工作。但是现在我想将这两种方法结合在一个类中，但我遇到了一些问题。

所以让我们从一个小示例类开始：

```
using System;
using System.Runtime.Serialization;
using System.Windows.Forms;

namespace MySample
{
    [DataContract(IsReference = true)]
    class SerializeAndBind : IExtensibleDataObject
    {
        [DataMember]
        private String bindedControlName;
        [DataMember]
        private String bindedPropertyName;

        private DateTime creationTime;

        [System.ComponentModel.Browsable(false)]
        public virtual ExtensionDataObject ExtensionData { get; set; }

        public event EventHandler CreationTimeChanged;

        public SerializeAndBind()
        {
            CreationTime = DateTime.Now;
        }

        public SerializeAndBind(Control ControlName, String PropertyName)
            : this()
        {
            InitializeDataBinding(ControlName, PropertyName);
        }

        [DataMember]
        public DateTime CreationTime
        {
            get
            {
                return creationTime;
            }
            set
            {
                creationTime = value;

                if (CreationTimeChanged != null)
                    CreationTimeChanged(this, EventArgs.Empty);
            }
        }

        public override string ToString()
        {
            return CreationTime.ToString();
        }

        [OnDeserialized]
        private void InitializeDataBindingAfterDeserialization(StreamingContext ctx)
        {
            if (bindedControlName != null)
            {
                Control control;

                control = FindControlByName(bindedControlName);

                if(control != null)
                    InitializeDataBinding(control, bindedPropertyName);
            }
        }

        private void InitializeDataBinding(Control ControlName, string PropertyName)
        {
            BindingSource bindingSource = new BindingSource();
            bindingSource.DataSource = this;
            Binding binding = new Binding(PropertyName, bindingSource, "CreationTime", true, DataSourceUpdateMode.OnPropertyChanged);
            binding.Format += new ConvertEventHandler(OnFormat);
            ControlName.DataBindings.Add(binding);

            bindedControlName = ControlName.Name;
            bindedPropertyName = PropertyName;
        }

        private void OnFormat(object sender, ConvertEventArgs e)
        {
            if (e.DesiredType == typeof(String))
            {
                e.Value = this.ToString();
            }
        }
    }
} 
```

正如你所看到的，这个类有一个 ctor，它接受你想要绑定这个对象的 Control 和 PropertyName。对于序列化，我将 Control 和 PropertyName 保存为字符串（保存整个控件会有点多；-)）。

我添加了一个将在反序列化后调用的函数。但是正如您所看到的，存在其中`FindControlByName()`不存在的功能。

现在我可以开始使用反射来找到适当的控件，但是对于反射我需要某种起点（我会说形式），但是类如何在不知道自身之外的任何东西的情况下访问它？

或者这只是错误的方法，我需要不同的设计？

任何帮助将不胜感激，奥利弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T20:38:59.850

我同意以前的帖子，从您的数据中分解出您的处理。更清洁，更易于调试、维护和扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T12:12:30.967

就个人而言，我怀疑这是否会变得“干净”——序列化对于数据来说效果很好，但对于与序列化图之外的对象紧密连接的对象来说就不是很好了。

在反序列化时，对象位于以太中（事实上，`DataContractSerializer`甚至不使用**任何**构造函数）。因此，它无法获取表单等。您*也许*可以使用静态字段（可能是 [ThreadStatic]）进行一些可怕的 hack 来保存当前表单，但它会变得脆弱和丑陋。

（不过，我希望有人会有更好的答案！）

# sql - SQL2008：MSOLAP 和 SSRS 类未注册特定维度的错误

> ID：464933
> 
> 赞同：0
> 
> 时间：2009-01-21T11:37:46.167
> 
> 标签：sql, sql-server-2008, reporting-services, ssrs-2008, olap

我们的产品利用分析服务与报告服务相结合，我们最近进行了一些更改以增加对 SQL2008 的兼容性。除了将某些维度、钻取或度量添加到报告中外，一切都很好，我们突然收到以下错误：

> 服务器：操作已取消。高级关系引擎中的错误。无法与 DataSourceID 为“Adventure Works DW”、名称为“Adventure Works DW”的数据源建立连接。OLE DB 错误：OLE DB 或 ODBC 错误：未注册类。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-23T12:40:06.447

发现问题。

SQL2008 不附带我的多维数据集用来从数据仓库检索数据的 SQL Native Client 提供程序。

解决方案：

改为将提供程序更改为 SQL OLE DB 提供程序。

如果您愿意，可以使用 XMLA：

```
<Object>
    <DatabaseID>Adventure Works DW</DatabaseID>
    <DataSourceID>Adventure Works DW</DataSourceID>
  </Object>
  <ObjectDefinition>
    <DataSource xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="RelationalDataSource">
      <ID>Adventure Works DW</ID>
      <Name>Adventure Works DW</Name>
      <ConnectionString>Provider=SQLOLEDB.1;Data Source=s;Persist Security Info=False;Integrated Security=SSPI;Initial Catalog=AdventureWorksDWDW</ConnectionString>
      <ImpersonationInfo>
        <ImpersonationMode>ImpersonateServiceAccount</ImpersonationMode>
      </ImpersonationInfo>
      <Timeout>PT0S</Timeout>
    </DataSource>
  </ObjectDefinition>
</Alter> 
```

# .net - .NET 类的再分发许可

> ID：464941
> 
> 赞同：0
> 
> 时间：2009-01-21T11:39:09.410
> 
> 标签：.net, licensing

我对许可问题的经验很少。假设我正在为 .NET 2.0 开发应用程序。可以在我的应用程序中使用（和分发）一些 .NET 3.5 DLL 吗？

例如，我可以将设置中的“System.Core.dll”复制到客户端的机器上吗？或者我什至可以提取一些类（例如使用反射器），将它的源代码放在我的一个项目中，然后按原样使用它？

我不确定使用 Reflector 来执行此操作是否合法，但是从[Microsoft 的 Reference Source Server](http://referencesource.microsoft.com/)下载相同的类有什么区别？

无论如何，我想我只是在*使用*类，这是框架实际提供的。我的想法有什么误解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-21T11:46:04.140

您绝对*绝对*不应该开始将 DLL 从一个框架版本重新分发到另一个框架版本。

一方面它很可能是非法的（甚至或者可能*特别是*使用反射器来提取源代码）——但更重要的是，你会得到一些代码，这些代码是为一个版本的框架运行而设计和编写的。谁知道他们是否依赖于 mscorlib 中仅在 .NET 3.5 中实现的错误修复？

如果您想要 .NET 2.0 中的 LINQ to Objects，[LINQBridge](http://www.albahari.com/nutshell/linqbridge.aspx)是您的朋友。对于其他问题，我强烈建议在部署机器上寻找第三方实现或升级框架版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T11:47:37.660

为什么需要分发这些 dll？无论如何，您都需要在客户端机器上安装 .Net 框架。这应该包括所有相关的 Microsoft dll。

AFAIK .Net ap 无法在没有框架的机器上运行，所以无论如何你都需要它。

**编辑** 我刚刚查看了[.NET Framework 1.1 Redistributable EULA](http://msdn.microsoft.com/en-us/library/ms994344.aspx)（在 Google 中找不到 3.0 的 EULA）。它并没有明确允许您提出的建议，所以我的猜测是您可能不会这样做。

ps：伊纳尔 ;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T11:57:59.840

我敢肯定，您认为 .NET 上的 Microsoft 许可证绝对是非法的

# c# - 我怎样才能让 MasterPage 中的 Response.Redirect() 工作？

> ID：464948
> 
> 赞同：6
> 
> 时间：2009-01-21T11:41:07.377
> 
> 标签：c#, javascript, asp.net

我有一个问题：当我从 MasterPage 调用 Response.Redirect() 时，它不起作用。好吧，调试我可以看到，直到 Pre_Render() 方法加载了目标页面，然后才呈现上一页。

这里有一些代码可以更好地解释：

（来自 MasterPageMain.master.cs）

```
protected void Page_Init(object sender, EventArgs e)
{
    string m_QueryStringValue = Request.QueryString.Get("action");
    if ((!string.IsNullOrEmpty(m_QueryStringValue)) && (m_QueryStringValue.ToLower() == "send"))
    {
        if (Session["to"] != null && Session["to"] is List<string>) this.SendPageByMail();
        else
        {
            Session.Add("AddressToSend", Request.RawUrl);
            Response.Redirect("~/chooseRecipients.aspx");
        }
    }
} 
```

我有一个javascript，当我单击发送按钮时，它添加了添加“action=send”的查询字符串。

如果我在“~/somethingInterestingToSend()”页面上-例如-我想进入收件人选择页面，但是当我单击“发送”按钮时，我总是看到相同的页面。

可能是什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-12-02T12:50:04.573

如果您想将未登录的用户重定向到登录页面，您应该像这样检查 Request.RawUrl()：

```
string strURL=Request.RawUrl.ToUpper();

if (!strURL.Contains("LOGIN.ASPX") && !strURL.Contains("LOGOUT.ASPX")
    && !strURL.Contains("ERROR.ASPX") && !strURL.Contains("UNDERCONSTRUCTION.ASPX"))
{
    Response.Redirect("~/Login.aspx", false);
} 
```

所有其他站点将被重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-22T22:11:21.427

无法测试这个理论（目前从内存中运行），但试一试：

（对不起，也清理了一些代码）

```
protected void Page_Init(object sender, EventArgs e)
{
    string m_QueryStringValue = Request.QueryString.Get("action") ?? "";
    if (m_QueryStringValue.ToLower() == "send")
    {
        if ( (Session["to"] as List<string>) != null) 
        {
            this.SendPageByMail();
        }
        else
        {
            Session.Add("AddressToSend", Request.RawUrl);
            Response.Redirect("~/chooseRecipients.aspx", false);
            HttpContext.Current.ApplicationInstance.CompleteRequest()
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T13:03:19.927

我不确定我是否完全理解您对问题的描述，但这里有几点需要考虑：

你提到了一个发送按钮。如果这是一个 ，单击它会触发一个 javascript 回发到服务器。此回发是到原始 URL。我不确定您使用 Javascript 修改了什么，但我认为它不会更改回发 URL（和查询字符串）。

如果您需要执行重定向逻辑，您可能希望在服务器上的按钮单击事件中执行。

如果您不需要在服务器上执行任何逻辑，您可以使用 javascript 进行重定向：

```
window.location = "chooseRecipients.aspx"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T12:30:41.943

我不知道它是否是你问题的根源，但我会改变两件事。我会将您的代码更改为：

```
Response.Redirect("~/chooseRecipients.aspx", false); 
```

并将逻辑移至 PageLoad

# visual-studio-2008 - 为什么 Visual Studio 2008 要反复保存我的项目文件？

> ID：464959
> 
> 赞同：1
> 
> 时间：2009-01-21T11:46:47.570
> 
> 标签：visual-studio-2008, tfs, save

我在 Visual Studio 2008 中有一个半大型解决方案文件，其中包含大约 25-30 个项目。

我注意到很多时候当我想关闭解决方案文件或签入对 TFS 的待定更改时，VS 会询问我是否要保存特定项目。

如果我取消操作，点击全部保存，然后重试，它会再次询问我。

如果我尝试签入挂起的更改，它会询问我，我点击是，保存更改，签入发生，如果我现在尝试关闭解决方案，它会再次询问我是否要保存项目文件。

我究竟做错了什么？

据我所知，这个项目与其他项目没有什么不同。

如果我关闭解决方案（在过程中保存项目文件），重新打开它并关闭它，那么它不会询问我，而是对整个解决方案中的任何文件执行任何操作，看起来这个文件现在是编辑，即使 VS 没有检查出来。

至少有一次我经历过我添加到项目中的文件没有检入 TFS，所以似乎根本没有进行保存操作，这可以解释为什么它反复要求我保存它。

如果有人能对这个问题有所了解，那就太好了。

* * *

**编辑1：**为了响应项目文件的编辑以确保它包含`SAK`条目，解决方案中的所有项目文件都已包含该条目。为了确保我刚刚对 XML 节点进行了文件级递归搜索，它们都包含 SAK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T11:58:53.020

通过右键单击->卸载从解决方案中卸载项目。然后在文本编辑器中通过在项目上单击右键->编辑打开 vcproj/csproj 文件。有一些属性，如 SccProjectName、SccLocalPath 等。将所有这些更改为：

```
    <SccProjectName>SAK</SccProjectName>
    <SccLocalPath>SAK</SccLocalPath>
    <SccAuxPath>SAK</SccAuxPath>
    <SccProvider>SAK</SccProvider>

```

保存它，并检查一次，你会没事的。

SAK 表示项目的 TFS 绑定信息可以从 mssccprj.scc 文件中获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-22T08:25:46.553

**解决了。**

该项目包含 T4 模板文件，如果在我尝试全部保存时在 Visual Studio 中打开这些文件，则代码的生成似乎围绕两个步骤进行：

1.  删除旧生成的文件
2.  创建新的生成文件

这两个似乎都会暂时更改项目文件，因此它看起来总是会更改为 Visual Studio。

# algorithm - 代码高尔夫：将多个排序列表组合成一个排序列表

> ID：464960
> 
> 赞同：10
> 
> 时间：2009-01-21T11:47:03.043
> 
> 标签：algorithm, language-agnostic, sorting, merge, code-golf

实现一种算法，将任意数量的排序列表合并为一个排序列表。目的是用你喜欢的任何语言创建最小的工作程序。

例如：

```
input:  ((1, 4, 7), (2, 5, 8), (3, 6, 9))
output: (1, 2, 3, 4, 5, 6, 7, 8, 9)

input:  ((1, 10), (), (2, 5, 6, 7))
output: (1, 2, 5, 6, 7, 10) 
```

**注意**：连接输入列表然后使用语言提供的排序功能的解决方案不符合高尔夫精神，并且不会被接受：

```
sorted(sum(lists,[])) # cheating: out of bounds! 
```

除此之外，您的算法*应该*（但不一定）要快得多！

清楚地说明语言、任何弱点和字符数。仅在计数中包含有意义的字符，但出于艺术/可读性目的，请随意在代码中添加空格。

为了保持整洁，建议改进评论或在适当的地方编辑答案，而不是为每个“修订”创建新答案。

**编辑**：如果我再次提交这个问题，我会将“没有提供语言的排序”规则扩展为“不要连接所有列表然后对结果进行排序”。现有的进行 concatenate-then-sort 的条目实际上非常有趣和紧凑，所以我不会追溯引入它们破坏的规则，但可以随意在新提交的内容中使用更具限制性的规范。

* * *

灵感来自[在 Python 中组合两个排序列表](https://stackoverflow.com/questions/464342/combining-two-sorted-lists-in-python)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-29T18:34:24.047

42 个字符的 OCaml：

```
let f=List.fold_left(List.merge compare)[] 
```

我想我应该得到 42 的额外学分吗？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-21T11:48:48.983

**Python：113 个字符**

```
def m(c,l):
    try:
        c += [l[min((m[0], i) for i,m in enumerate(l) if m)[1]].pop(0)]
        return m(c,l)
    except:
        return c

# called as:
>>> m([], [[1,4], [2,6], [3,5]])
[1, 2, 3, 4, 5, 6] 
```

**编辑：**看到在一些地方出现了关于性能的讨论，我会提到我认为这是非常有效的实现，尤其是随着列表的增长。我在 10 个排序的随机数列表上运行了三种算法：

*   我的解决方案（*合并*）
*   `sorted(sum(lists, []))`（*内置*）
*   [Deestan 的解决方案](https://stackoverflow.com/questions/464960/code-golf-combining-multiple-sorted-lists-into-a-single-sorted-list#465044)以不同的方式排序（*重新实现*）

![列表合并性能](https://i622.photobucket.com/albums/tt302/gefafwisp/merge_gr.png)

**编辑**2：（JFS）

图的标签：

*   `merge_26`--`heapq.merge()`来自 Python 2.6 标准库
*   `merge_alabaster`-- 上述代码（`Merge`上图标注）
*   `sort_builtin`--`L = sum(lists,[]); L.sort()`
*   [Deestan 的解决方案](https://stackoverflow.com/questions/464960/code-golf-combining-multiple-sorted-lists-into-a-single-sorted-list#465044)是 O(N**2)，因此它被排除在比较之外（所有其他解决方案都是 O(N)（对于提供的输入））

输入数据是`[f(N) for _ in range(10)]`，其中`f()`是：

```
max_ = 2**31-1
def f(N):
    L = random.sample(xrange(max_), n)
    L.sort()
    return L
f.__name__ = "sorted_random_%d" % max_ 
```

![性能数据 Nmax=2**16](https://i.stack.imgur.com/6Ngpo.png) 注意：`merge_alabaster()`由于`N > 100`.`RuntimeError: "maximum recursion depth exceeded"`

要获取[生成此图的 Python 脚本](http://gist.github.com/51074)，请键入：

```
$ git clone git://gist.github.com/51074.git 
```

结论：对于相当大的列表，内置排序显示出接近线性的行为，并且是最快的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-21T22:20:45.357

Common Lisp 已经`merge`在语言标准中提供了通用序列的功能，但它只适用于两个序列。对于多个按升序排列的数字列表，可以在以下函数中使用（97个基本字符）。

```
(defun m (&rest s)
  （如果（不是（cdr s））
      （汽车）
      （申请#'m
             (cons (merge 'list (car s) (cadr s) #'<)
                   (cddr s)))))
```

*编辑*：一段时间后重新访问：这可以在一行中完成：

```
(defun multi-merge (&rest lists)
  (reduce (lambda (a b) (merge 'list a b #'<)) lists)) 
```

这有 79 个具有有意义名称的基本字符，将这些字符简化为一个字母，结果为 61：

```
(defun m(&rest l)(reduce(lambda(a b)(merge 'list a b #'<))l)) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-01-21T16:19:35.053

**Ruby：100 个字符（1 个重要的空格，4 个重要的换行符）**

```
def m(i)
  a=[]
  i.each{|s|s.each{|n|a.insert((a.index(a.select{|j|j>n}.last)||-1)+1,n)}}
  a.reverse
end 
```

人类版：

```
def sorted_join(numbers)
  sorted_numbers=[]

  numbers.each do |sub_numbers|
    sub_numbers.each do |number|
      bigger_than_me = sorted_numbers.select { |i| i > number }
      if bigger_than_me.last
        pos = sorted_numbers.index(bigger_than_me.last) + 1
      else
        pos = 0
      end

      sorted_numbers.insert(pos, number)
    end
  end

  sorted_numbers.reverse
end 
```

这都可以替换为`numbers.flatten.sort`

基准：

```
 a = [[1, 4, 7], [2, 4, 8], [3, 6, 9]]
 n = 50000
 Benchmark.bm do |b|
   b.report { n.times { m(a) } }
   b.report { n.times { a.flatten.sort } }
 end 
```

产生：

```
 user     system      total        real
 2.940000   0.380000   3.320000 (  7.573263)
 0.380000   0.000000   0.380000 (  0.892291) 
```

所以我的算法执行得很糟糕，是的！

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-01-21T12:16:22.097

*重新提交*

**Python - 74 个字符**（计算空格和换行符）

```
def m(i):
 y=[];x=sum(i,[])
 while x:n=min(x);y+=[n];x.remove(n)
 return y 
```

`i`作为列表列表输入

用法：

```
>>> m([[1,5],[6,3]])
[1, 3, 5, 6] 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-01-21T13:26:12.127

**Haskell：127 个字符（没有缩进和换行）**

```
m l|all null l=[]
   |True=x:(m$a++(xs:b))
 where
   n=filter(not.null)l
   (_,min)=minimum$zip(map head n)[0..]
   (a,((x:xs):b))=splitAt min n 
```

它基本上概括了两个列表的合并。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-01-21T20:59:49.357

我就把这个留在这里...

**语言：C，字符数：265**

```
L[99][99];N;n[99];m[99];i;I;b=0;main(char t){while(scanf("%d%c",L[i]+I,&t)+1){++
I;if(t==10){n[i++]=I;I=0;}}if(I)n[i++] = I;N=i;while(b+1){b=-1;for(i=0;i<N;++i){
I=m[i];if(I-n[i])if(b<0||L[i][I]<L[b][m[b]])b=i;}if(b<0)break;printf("%d ",L[b][
m[b]]);++m[b];}puts("");} 
```

接受这样的输入：

```
1 4 7
2 5 8
3 6 9
(EOF) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-01-21T14:37:37.553

**F#：116 个字符**：

```
let p l=
    let f a b=List.filter(a b) in
    let rec s=function[]->[]|x::y->s(f(>)x y)@[x]@s(f(<=)x y) in
    [for a in l->>a]|>s 
```

注意：此代码会导致 F# 引发大量警告，但它确实有效 :)

这是带有空格和有意义标识符的注释版本（注意：上面的代码不使用 #light 语法，下面的代码使用）：

```
let golf l=
    // filters my list with a specified filter operator
    // uses built-in F# function
    // ('a -> 'b -> bool) -> 'a -> ('b list -> 'b list)
    let filter a b = List.filter(a b)

    // quicksort algorithm
    // ('a list -> 'a list)
    let rec qsort =function
        | []->[]
        | x :: y -> qsort ( filter (>) x y) @ [x] @ qsort ( filter (<=) x y)

    // flattens list
    [for a in l ->> a ] |> qsort 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-01-21T15:21:08.667

虽然我没有耐心尝试这个，但我的一位同事向我展示了一种可以使用 0 字符键执行此操作的方法 - [Whie Space](http://compsoc.dur.ac.uk/whitespace/)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-01-24T21:06:40.230

> （所有其他解决方案都是 O(N) （对于提供的输入））

如果我们让 N 是输出中元素的数量，k 是输入列表的数量，那么你不能比 O(N log k) 更快——假设每个列表只是一个元素，你会具有比 O(N log N) 更快的基于比较的排序。

我看过的那些看起来更像是 O(N*k)。

您可以相当轻松地降低到 O(N log k) 时间：只需将列表放在堆中即可。这是进行 I/O 高效排序的方法之一（您也可以概括快速排序和堆/堆排序）。

[没有代码，只是评论]

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2010-03-10T00:51:48.140

## Javascript

```
function merge(a) {
    var r=[], p;
    while(a.length>0) {
        for (var i=0,j=0; i<a.length && p!=a[j][0]; i++)
            if (a[i][0]<a[j][0])
                j = i;

        r.push(p = a[j].shift());

        if (!a[j].length)
            a.splice(j, 1);
    }
    return r;
} 
```

测试：

```
var arr = [[1, 4, 7], [2, 5, 8], [3, 6, 9]]​;
alert(merge(arr)); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-01-24T22:14:58.330

VB 通常不是代码高尔夫的首选语言，但无论如何都可以使用。

设置 -

```
 Dim m1 As List(Of Integer) = New List(Of Integer)
        Dim m2 As List(Of Integer) = New List(Of Integer)
        Dim m3 As List(Of Integer) = New List(Of Integer)
        Dim m4 As List(Of Integer) = New List(Of Integer)

        m1.Add(1)
        m1.Add(2)
        m1.Add(3)

        m2.Add(4)
        m2.Add(5)
        m2.Add(6)

        m3.Add(7)
        m3.Add(8)
        m3.Add(9)

        Dim m5 As List(Of List(Of Integer)) = New List(Of List(Of Integer))
        m5.Add(m1)
        m5.Add(m2)
        m5.Add(m3) 
```

VB.NET 中的一次尝试（无排序）

```
 While m5.Count > 0
            Dim idx As Integer = 0
            Dim min As Integer = Integer.MaxValue
            For k As Integer = 0 To m5.Count - 1
                If m5(k)(0) < min Then min = m5(k)(0) : idx = k
            Next
            m4.Add(min) : m5(idx).RemoveAt(0)
            If m5(idx).Count = 0 Then m5.RemoveAt(idx)
        End While 
```

另一个 VB.NET 尝试（使用*允许*的排序）

```
 Private Function Comp(ByVal l1 As List(Of Integer), ByVal l2 As List(Of Integer)) As Integer
        Return l1(0).CompareTo(l2(0))
    End Function
    .
    .
    .
    While m5.Count > 0
        m5.Sort(AddressOf Comp)
        m4.Add(m5(0)(0)) : m5(0).RemoveAt(0)
        If m5(0).Count = 0 Then m5.RemoveAt(0)
    End While 
```

整个节目——

```
 Dim rand As New Random
        Dim m1 As List(Of Integer) = New List(Of Integer)
        Dim m2 As List(Of Integer) = New List(Of Integer)
        Dim m3 As List(Of Integer) = New List(Of Integer)
        Dim m4 As List(Of Integer) = New List(Of Integer)
        Dim m5 As List(Of List(Of Integer)) = New List(Of List(Of Integer))
        m5.Add(m1)
        m5.Add(m2)
        m5.Add(m3)

        For Each d As List(Of Integer) In m5
            For i As Integer = 0 To 100000
                d.Add(rand.Next())
            Next
            d.Sort()
        Next

        Dim sw As New Stopwatch
        sw.Start()
        While m5.Count > 0
            Dim idx As Integer = 0
            Dim min As Integer = Integer.MaxValue
            For k As Integer = 0 To m5.Count - 1
                If m5(k)(0) < min Then min = m5(k)(0) : idx = k
            Next
            m4.Add(min) : m5(idx).RemoveAt(0)
            If m5(idx).Count = 0 Then m5.RemoveAt(idx)
        End While
        sw.Stop()

        'Dim sw As New Stopwatch
        'sw.Start()
        'While m5.Count > 0
        '    m5.Sort(AddressOf Comp)
        '    m4.Add(m5(0)(0)) : m5(0).RemoveAt(0)
        '    If m5(0).Count = 0 Then m5.RemoveAt(0)
        'End While
        'sw.Stop()

        Console.WriteLine(sw.Elapsed)
        Console.ReadLine() 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-01-24T23:07:18.223

红宝石：

合并方法的主体中有 41 个重要字符，3 个重要空白字符。

arrs 是一个数组数组

```
 def merge_sort(arrs)
    o = Array.new
    arrs.each do |a|
      o = o | a
    end
    o.sort!
  end 
```

在 irb 中测试：

```
 arrs = [ [ 90, 4, -2 ], [ 5, 6, -100 ], [ 5, 7, 2 ] ]
  merge_sort(arrs) 
```

返回：[-100, -2, 2, 4, 5, 6, 7, 90]

编辑：使用提供合并/排序的语言，因为它可能由 C 代码支持并满足“更快”的要求。稍后我会考虑解决方案（这里是周末，我正在度假）。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-01-27T00:29:23.760

C＃

```
static void f(params int[][] b)
{
    var l = new List<int>();
    foreach(var a in b)l.AddRange(a);
    l.OrderBy(i=>i).ToList().ForEach(Console.WriteLine);
}
static void Main()
{
    f(new int[] { 1, 4, 7 },
      new int[] { 2, 5, 8 },
      new int[] { 3, 6, 9 });
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-01-27T01:12:35.590

**Perl：22 个字符，包括两个重要的空白字符。**

```
sub a{sort map{@$_}@_} 
```

这里只有内置函数。看？;)

像这样调用：

```
my @sorted = a([1, 2, 3], [5, 6, 89], [13, -1, 3]);
print "@sorted" # prints -1, 1, 1, 2, 3, 3, 5, 6, 89 
```

老实说，否认语言特性（注意：不是库......）似乎有点反驳这一点。用一种语言实现的最短代码应该包括构建/语言特性。当然，如果您导入一个模块，您应该将该代码计入您的解决方案。

编辑：删除了 $_ 周围不必要的 {}。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2010-04-26T09:55:27.783

**F#，32 个字符**

```
let f x=List.sort(List.concat x) 
```

并且不使用 concat 的内置函数（57 个字符）：

```
let f x=List.sort(Seq.toList(seq{for l in x do yield!l})) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-01-21T12:36:44.333

对于 Python ，我不认为[你](https://stackoverflow.com/questions/464342/combining-two-sorted-lists-in-python#465043)能比[@Sykora](https://stackoverflow.com/users/53850/sykora)的回复更好。

更改为处理您的输入：

```
import heapq
def m(i): 
    return list(heapq.merge(*i))

print m(((1, 4, 7), (2, 5, 8), (3, 6, 9))) 
```

对于实际功能，59 个字符，或缩减版的 52 个：

```
import heapq
def m(i): return list(heapq.merge(*i)) 
```

这还具有使用 Python 内置的经过测试的真实实现的好处

**编辑：**删除分号（感谢[@Douglas](https://stackoverflow.com/users/3978/douglas-leeder)）。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-01-29T18:25:06.810

尽管它可能会违反规则。这是一个漂亮而简短的**c++**条目：

**13 个字符**

```
l1.merge(l2); // Removes the elements from the argument list, inserts 
              // them into the target list, and orders the new, combined 
              // set of elements in ascending order or in some other 
              // specified order. 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-06-19T23:58:25.413

GNU 系统脚本（我猜这是作弊，但也很高兴知道）。

```
sort -m file1 file2 file3 ... 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2010-02-22T00:51:08.270

通过链表在 C 中实现。

[http://datastructuresandalgorithmsolutions.blogspot.com/2010/02/chapter-2-basic-abstract-data-types_7147.html](http://datastructuresandalgorithmsolutions.blogspot.com/2010/02/chapter-2-basic-abstract-data-types_7147.html)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2010-04-26T10:41:08.017

## BASH 包含大约 250 个基本字符

BASH 并不擅长列表操作，无论如何这就是工作。

```
# This merges two lists together
m(){ 
    [[ -z $1 ]] && echo $2 && return; 
    [[ -z $2 ]] && echo $1 && return; 
    A=($1); B=($2); 
    if (( ${A[0]} > ${B[0]} ));then 
        echo -n ${B[0]}\ ;
        unset B[0];
    else 
        echo -n ${A[0]}\ ;
        unset A[0];
    fi;
    m "${A[*]}" "${B[*]}";
}
# This merges multiple lists
M(){
    A=$1;
    shift;
    for x in $@; do
        A=`m "$A" "$x"`
    done
    echo $A
}

$ M '1 4 7' '2 5 8' '3 6 9'
1 2 3 4 5 6 7 8 9 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2010-04-26T12:58:59.397

VB.NET (2008) 185 个字符

接受列表（列表（字节））

```
Function s(i)

    s=New List(Of Byte)

    Dim m,c
    Dim N=Nothing

    Do
        m=N
        For Each l In i:
            If l.Count AndAlso(l(0)<m Or m=N)Then m=l(0):c=l

        Next

        If m<>N Then s.Add(m):c.Remove(m)       

    Loop Until m=N

End Function 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2010-07-12T17:58:26.297

Python，107 个字符：

```
def f(l):  
 n=[]  
 for t in l:  
  for i in t: n+=[t]  
 s=[]  
 while n: s.+=[min(n)]; n.remove(min(n))  
 return s 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2014-01-30T11:24:37.833

Haskell 类似（158 个，但可以删除超过 24 个空格。）：

```
mm = foldl1 m where
  m [] b = b
  m a [] = a
  m (a:as) (b:bs)
   | a <= b = a : m as (b:bs)
   | true   = b : m (a:as) bs 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2009-01-24T21:14:00.043

Python，181 个字符

* * *

```
from heapq import *
def m(l):
 r=[]
 h=[]
 for x in l:
  if x:
   heappush(h, (x[0], x[1:]))
 while h:
  e,f=heappop(h)
  r.append(e)
  if f:
   heappush(h, (f.pop(0),f))
 return r 
```

这在 O(NlgM) 时间内运行，其中 N 是项目的总数，M 是列表的数量。

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2009-01-27T13:59:35.307

VB

设置：

```
Sub Main()
    f(New Int32() {1, 4, 7}, _
      New Int32() {2, 5, 8}, _
      New Int32() {3, 6, 9})
End Sub 
```

输出：

```
Sub f(ByVal ParamArray b As Int32()())
    Dim l = New List(Of Int32)
    For Each a In b
        l.AddRange(a)
    Next
    For Each a In l.OrderBy(Function(i) i)
        Console.WriteLine(a)
    Next
End Sub 
```

# wia - WPD 等效于 WIA DeviceDlg

> ID：464965
> 
> 赞同：3
> 
> 时间：2009-01-21T11:48:17.910
> 
> 标签：wia, wpd

我正在向当前使用 Windows 图像采集 (WIA) 的应用程序添加 Windows 便携式设备 (WPD) 支持。WIA 通过 IWiaItem::DeviceDlg 提供了一个方便的图片选择对话框。

我找不到 WPD 等价物。有没有，如果没有，允许用户选择项目的首选技术是什么？我不必编写自己的对话，是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-28T11:37:53.457

来自 MS 的回复：

> [T]这里没有用于图片选择的专用对话框（WIA 之外）。相反，您应该使用支持 WPD 设备导航的常规文件打开对话框。需要做一些魔术才能在设备内的正确文件夹中启动对话框。您可能必须编写代码才能找到包含图片的文件夹。
> 
> 传递给“文件打开”对话框的神奇路径是：:::{20D04FE0-3AEA-1069-A2D8-08002B30309D}\<device instance id>
> 
> 设备实例 ID 可以通过 SetupApi 调用 (SetupDi*) 从 PnP 设备路径派生。
> 
> 此外，上述路径可以包括附加路径元素以标识设备上的特定文件夹。这些对于每个设备型号都不同，但看起来像： ::{20D04FE0-3AEA-1069-A2D8-08002B30309D}\\Store0\Pictures

# python - 解析函数

> ID：464970
> 
> 赞同：3
> 
> 时间：2009-01-21T11:49:51.027
> 
> 标签：python, parsing

我正在用 python 制作一个脚本解析器，但我有点卡住了。我不太确定如何解析一行的所有函数（甚至一次只解析一个函数），然后搜索具有该名称的函数，如果存在，则执行该函数而不是编写大量列表 if elif否则阻止....

*编辑*

这是我自己正在制作的脚本语言。它没有什么很复杂的，但是我有一个包含 8 个函数的标准库，所以我需要能够运行，我如何解析一行并运行该行中命名的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-21T12:37:12.850

获得函数名称后，使用 dispatch dict 运行函数：

```
def mysum(...): ...
def myotherstuff(...): ...

# create dispatch dict:
myfunctions = {'sum': mysum, 'stuff': myotherstuff}

# run your parser:
function_name, parameters = parse_result(line)

# run the function:
myfunctions[function_name](parameters) 
```

或者使用以下命令创建一个类：

```
class Commands(object):
    def do_sum(self, ...): ...
    def do_stuff(self, ...): ...
    def run(self, funcname, params):
        getattr(self, 'do_' + funcname)(params)

cmd = Commands()
function_name, parameters = parse_result(line)
cmd.run(function_name, parameters) 
```

您还可以查看 stdlib 中的[cmd 模块](http://docs.python.org/library/cmd)来完成您的课程。它可以自动为您提供您的语言的命令行界面，并自动完成选项卡命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T12:06:42.380

查看[PyParsing](http://pyparsing.wikispaces.com/)，它允许直接在 Python 代码中定义语法：

假设函数调用只是`somename()`：

```
>>> from pyparsing import *
>>> grammar = Word(alphas + "_",  alphanums + "_")("func_name") + "()" + StringEnd()
>>> grammar.parseString("ab()\n")["func_name"]
"ab" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T11:55:53.293

看看[PLY](http://www.dabeaz.com/ply/)。它应该可以帮助您保持解析器规范的清洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T12:08:41.487

这完全取决于您要解析的代码。

如果您正在解析 Python 语法，请使用`parser`Python 中的模块：http: [//docs.python.org/library/parser.html](http://docs.python.org/library/parser.html)

您可以在以下位置找到可用于 Python 的非常完整的解析器库列表：http: [//nedbatchelder.com/text/python-parsers.html](http://nedbatchelder.com/text/python-parsers.html)

# sharepoint - 如何在 SharePoint 中创建可在子网站中使用的共享文档库？

> ID：464974
> 
> 赞同：2
> 
> 时间：2009-01-21T11:51:11.633
> 
> 标签：sharepoint, document-library

我们想在某个站点级别创建一个通用文档库，然后在不同子站点的该文档库上创建视图？这在 SharePoint 中可行吗？可以以声明方式完成吗？

玲

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T18:47:34.757

我建议使用**DataFormWebPart**（需要 SharePoint Designer 插入和自定义**DFWP**，结果可以导出到功能）

以下博客条目列出了一个合适的 SPDataSource 示例： [SPDataSource and Rollups with the Data View](http://blogs.msdn.com/sharepointdesigner/archive/2007/04/24/spdatasource-and-rollups-with-the-data-view.aspx)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T12:22:31.040

不是开箱即用。您将需要第三方“上卷”（“下卷”）Web 部件，或者您需要自己编写。OTB，列表/库的视图仅在当前站点级别可见。

话虽如此，汇总（以一种或另一种形式）可能是共享点最常见的第三方卖家之一（只是猜测）。事实上，我敢打赌有几个免费项目可供您使用（检查 codeplex）。找到满足您需求的产品应该没有问题。

我的建议是编写你自己的，因为这会给你一些使用 SharePoint 对象模型的真正好的体验，并且确实没有复杂的概念。一旦您不再能够通过 OM 进行站点导航和访问列表数据，您几乎就拥有了所需的所有工具。

祝你好运

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-03-05T07:16:34.130

我发现了一个便宜又很棒的 webpart，它可以从所有子站点汇总文档，并具有搜索、分页和排序功能。 [http://speasysolution.miiduu.com/es-sharepoint-2010-documents-rollup](http://speasysolution.miiduu.com/es-sharepoint-2010-documents-rollup)

我用过，简单又强大

# performance - XSLT 与 Xalan 对比 STX 与 Joost

> ID：464979
> 
> 赞同：6
> 
> 时间：2009-01-21T11:53:36.540
> 
> 标签：performance, xslt, xalan, stx

与使用 STX（使用 Joost）相比，我在哪里可以找到使用 XSLT（使用 Xalan）的重要示例的性能指标（内存/时间）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T23:45:21.167

可能没有一套通用的基准。对于 XSLT，有（曾经？）XSLTMark，但这是为了比较 XSLT 引擎。

有[一页](http://yquem.inria.fr/~frisch/xstream/bench.html)比较了用不同转换语言编写的相同转换。

最好的选择可能是对您的问题进行建模，生成测试数据并测量您感兴趣的事物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T06:19:35.200

我同意，最好通过编写自己的基准来获得真正的答案。

就其价值而言，我记得许多开发人员对 STX 比 XSLT 处理器快得多寄予厚望。但发现实现的实际性能达不到预期。部分原因可能是 XSLT 处理器实现现在已经优化得非常好，因此可以非常有效地处理简单的转换，考虑到所有的事情。因此，STX 实现也需要花时间在相同程度上磨练实现，以显着提高常见转换的速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-05-30T09:09:42.483

你真的应该使用你自己的基准来覆盖你使用的东西。

但这里有一个数据点（[http://www.kindle-maps.com/blog/some-performance-information-on-joost-stx.html](http://www.kindle-maps.com/blog/some-performance-information-on-joost-stx.html)），一个 1.3GB 的 XML 文件（来自 OpenStreetMap 数据），1,800,000 个节点在低端笔记本电脑上使用简单的 STX 模板在 3 分钟内完成处理。

# sql-server - 链接服务器错误

> ID：464982
> 
> 赞同：1
> 
> 时间：2009-01-21T11:55:07.303
> 
> 标签：sql-server

我正在使用链接服务器使用 MSDTC 传输数据

```
Alter Proc [dbo].[usp_Select_TransferingDatasFromServerCheckingforExample]

@RserverName varchar(100), ----- Server Name  
@RUserid Varchar(100),           ----- server user id
@RPass Varchar(100),              ----- Server Password 
@DbName varchar(100)           ----- Server database    

As

Set nocount on
Set Xact_abort on

Declare @user varchar(100)
Declare @userID varchar(100)
Declare @Db Varchar(100)
Declare @Lserver varchar(100)

Select @Lserver = @@servername
Select @userID = suser_name()
select @User=user

Exec('if exists(Select 1 From [Master].[' + @user + '].[sysservers] where srvname = ''' + 
    @RserverName + ''') begin Exec sp_droplinkedsrvlogin ''' +  @RserverName + ''',''' + @userID +
    ''' exec sp_dropserver ''' + @RserverName + ''' end ')

declare @ColumnList varchar(max)
set @ColumnList = null

Select @ColumnList =  case when @ColumnList is not null then @ColumnList + ',' + quotename(name) else quotename(name) end 
From syscolumns where Id = object_id('Crnot') order by colid   

Set identity_Insert Crnot On
exec ('Insert Into ['+ @RserverName + '].'+ @DbName + '.'+ @user +'.Crnot ('+ @ColumnList +') Select '+ @ColumnList +' from Crnot ')
Set identity_Insert Crnot Off

Exec sp_droplinkedsrvlogin  @RserverName,@userID
Exec sp_dropserver @RserverName 
```

执行此 qry 时，我收到错误“无事务活动”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-23T04:55:36.867

检查您的 MS DTC 配置（从文档中剪切和粘贴，最近未检查）：

1.  开始、运行、dcomcnfg.exe

2.  在组件服务窗口中，展开组件服务...计算机...我的电脑。

3.  右键单击我的电脑，属性。

4.  单击 MSDTC 选项卡上的安全配置。

5.  单击以选中网络 DTC 访问复选框。

6.  设置允许入站和允许出站复选框

7.  在事务管理器通信组下，单击以选中不需要身份验证选项。

8.  验证 DTC 登录帐户名称是否设置为 NT AUTHORITY\NetworkService。

9.  单击确定等

在您的代码中，`Set identity_Insert Crnot`仅适用于本地对象。

它应该是动态 SQL 的一部分`INSERT`

# c# - 使用 .Net 获取域中的计算机列表

> ID：464983
> 
> 赞同：4
> 
> 时间：2009-01-21T11:55:08.100
> 
> 标签：c#, network-programming

如何使用 C# 获取域中的计算机名称列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-21T12:04:41.637

```
using System.DirectoryServices;

public void PrintComputersInDomain (string domainName)
{
    DirectoryEntry de = new DirectoryEntry ("LDAP://" + domainName);
    de.Children.SchemaFilter.Add ("computer");
    foreach (DirectoryEntry c in de.Children)
    {
        Console.WriteLine (c.Name);
    }
} 
```

来自[http://msmvps.com/blogs/siva/archive/2008/01/25/enumerating-computers-in-a-domain.aspx](http://msmvps.com/blogs/siva/archive/2008/01/25/enumerating-computers-in-a-domain.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-21T12:05:45.130

如果您在 Windows 域中，则可以对目录运行 LDAP 查询以拉回计算机帐户列表

# .net - 如何在 .NET 中判断您是在 x86 还是 x64 上运行？

> ID：464988
> 
> 赞同：3
> 
> 时间：2009-01-21T11:56:21.607
> 
> 标签：.net

.NET（3.5 或更低）中有没有办法判断控制台应用程序是在 x86 还是 x64 上运行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-21T11:59:11.600

```
IntPtr.Size == 8 // 64bit 
```

如果您不介意使用互操作，此功能会有所帮助：[IsWow64Process](http://msdn.microsoft.com/en-us/library/ms684139(VS.85).aspx) ( [example](http://blogs.msdn.com/oldnewthing/archive/2005/02/01/364563.aspx) )

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-21T12:37:30.150

你是指机器还是过程？你为什么想知道？

Aku 的回答会告诉您您所在的进程是否在 64 位模式下运行。在当前版本的 Windows 上，这可能意味着 Itanuim 或 x64。

即使在 64 位机器/操作系统上，您的进程也不一定是 64 位的。

Othewise [Microsoft.Build.Utilities.ProcessorArchitecture.CurrentProcessArchitecture](http://msdn.microsoft.com/en-us/library/microsoft.build.utilities.processorarchitecture.currentprocessarchitecture.aspx)返回一个带有当前 proc 架构的字符串。它在 3.5 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T13:00:11.353

如果我对控制台应用程序有一个 x64 和一个 x86 二进制依赖项呢？

有没有办法在运行时根据我们是在 x64 还是 x86 上运行来决定使用哪个引用？

# c# - 是否正在做任何工作来创建 C# 编译器来生成本机 exe？

> ID：464992
> 
> 赞同：6
> 
> 时间：2009-01-21T11:57:25.067
> 
> 标签：c#, compiler-construction, native, exe

是否正在做任何工作来创建 C# 编译器来生成本机 exe？例如，输出是本机 exe 而不是 .NET 程序集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T12:15:14.673

如果你想要一个独立的部署（即不需要框架），有几个选项 - 见[这里](http://www.yoda.arachsys.com/csharp/faq/#framework.required)。但是，我不知道任何可以可靠地生成纯非托管代码的东西。您想到的用例是什么？对于嵌入式等，有微框架、CF 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T12:58:33.713

为什么不试试 NGen。例如 Paint.NET 在安装后使用 nGen 创建本机图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-21T11:59:54.547

Mono 有这样的解决方案，这是'mkbundle' - 我猜是静态链接而不是使用 JIT/CLR/GAC

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-21T12:05:02.947

您仍然必须以某种形式提供库，因此您仍然必须安装运行时，或者本机 exe 必须很大。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-21T12:47:43.563

[.NET 链接器](http://www.remotesoft.com/linker/)

您可能会发现阅读以下内容也很有趣：[.NET Internals and Native Compiling](http://ntcore.com/Files/netint_native.htm)。

请注意，要使反射起作用，必须始终提供有关代码的大量信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-21T12:50:40.110

有两个活跃的项目。它们面向基于 CIL 的操作系统，但当前迭代的 MOSA 编译器框架在 Windows 上运行（单元测试等）并且具有有限的引导支持。Cosmos 曾经有一个 Windows 架构和一些插件，但他们不再使用 Windows - 只启动到 CIL 环境。

Cosmos 走得更远，但是它们有很多固定的对象支持。MOSA 目前只是裸机（静态方法）——尽管它是以“正确”的方式完成的，并且经过了良好的单元测试（我认为进展更快）。再给它几个月，然后回去看看。

Niether 目前有一个 JIT（这没关系，因为你不想要一个）。所有这些都被提前编译成机器码。

*   [MOSA](http://www.codeplex.com/mosa "MOSA 主页")（编译器框架）
*   [宇宙](http://www.gocosmos.org/index.en.aspx "宇宙主页")(IL2CPU)

# javascript - 获取 ajax 调用的参数（进入模式对话框）

> ID：464998
> 
> 赞同：0
> 
> 时间：2009-01-21T11:59:02.163
> 
> 标签：javascript, ajax

在一个 html 页面上，我单击一个链接，然后我得到一个对话框，该对话框通过 ajax 调用加载服务器内容。

我无法更改创建此对话框的 javascript，也无法更改 ajax 回调。

我需要从另一个 javascript 访问单击链接的 href 以更改从 ajax 调用加载到对话框中的一些内容。这是在对话框出现之后。

由于我只能读取当前页面的 window.location（包含对话框的页面，而不是加载到对话框本身的页面），有没有办法获取导致对话框显示的单击链接的 href？（即 ajax 调用的 GET 参数）

为每个单击的链接附加回调不能可靠地工作，因为我必须捕获导致对话框打开的最后一个...

- 编辑 -

好吧，我正在使用 jquery，但我认为它不依赖于实现。

更普遍的问题是：如果我无法访问 ajax 回调，有没有办法在 GET 请求中获取导致 div（某些内容）更新的 url？（假设您可以在加载 div**后**在其中调用 javascript 函数）。

IE。如果它是一个弹出窗口（window.open），我只需阅读 window.location 即可调用该页面，但由于它是从 ajax 请求加载的 div，我如何才能调用该 url？

总之谢谢~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-31T21:20:34.973

1.  Install Firefox (if you do not have it already)
2.  Install [Firebug](http://getfirebug.com/index.html) extension
3.  Enable firebug for your site
4.  Click the Link that launches the dialog (reproduce the situation)
5.  Open the firebug window (bottom right corner of firefox)
6.  Under Net - >XHR tab you can see the **exact** URL call with **all** GET/POST parameters that was triggered.

Then explore firebug some more to see what other possibilities it offers!************************