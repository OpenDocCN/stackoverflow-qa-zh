# StackOverflow 问答 10309000-10309999

# php - 为什么sql MAX函数不能正常工作？

> ID：10309003
> 
> 赞同：2
> 
> 时间：2012-04-25T03:35:40.183
> 
> 标签：php, sql, max

我有这个查询在某种程度上起作用。它返回“评级”的正确值（输出为 7，最高评级），但“内容”的输出来自表中的不同行。（不是评分最高的行，即 7）

```
$bestAnswerQuery = MYSQL_QUERY("SELECT content, MAX(rating) as rating FROM answers WHERE questionID = '$questionID'");

$fetchBestAnswer = MYSQL_FETCH_ASSOC($bestAnswerQuery);

echo "$fetchBestAnswer[content] $fetchBestAnswer[rating]"; 
```

谁能告诉我为什么？我已经搜索过，但无法找出为什么它不能正常工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T03:41:57.080

这不是聚合`MAX`在 SQL 中的工作方式。您的困惑来自 MySQL（默认）对聚合的非 ANSI 处理。

聚合喜欢`MAX`对组进行操作。在没有`group by`子句的情况下，整个结果集被视为一个组。只有作为`group by`子句一部分的表达式才能包含在`select`子句中，而不包含在聚合中。如果没有`group by`，则`select`子句中的所有列或表达式都必须包含在聚合中。

然而，MySQL 的默认配置打破了这一点，允许您在子句中包含非分组表达式`select`，但是任何给定表达式用于获取其值的行是未定义的；它可以是组内的任何行。

在那个冗长的答案之后，如果你想要得到的是给定问题的最大值`rating`和表中的相关`content`列，你可以这样做：

```
select 
    rating, 
    content 

from answers 

where questionID = '$questionID' 

order by rating desc 

limit 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:40:48.473

像这样更改查询：

```
$bestAnswerQuery = mysql_query("SELECT content, rating as rating 
          FROM answers 
          WHERE questionID = '$questionID'
            AND rating = MAX(rating)"); 
```

# php - 从数组+对象创建嵌套 ul li 的 php 函数

> ID：10309006
> 
> 赞同：3
> 
> 时间：2012-04-25T03:36:02.467
> 
> 标签：php, arrays, nested-loops

我有这样的数组+对象。

```
Array
(
    [0] => stdClass Object
        (
            [tid] => 1
            [parent_id] => 0
            [language] => th
            [t_type] => category
            [t_name] => cat1
            [t_description] => 
            [t_uri] => cat1
            [t_uri_encoded] => cat1
            [t_uris] => 
            [meta_title] => 
            [meta_description] => 
            [meta_keywords] => 
            [childs] => Array
                (
                    [0] => stdClass Object
                        (
                            [tid] => 3
                            [parent_id] => 1
                            [language] => th
                            [t_type] => category
                            [t_name] => cat1.1
                            [t_description] => 
                            [t_uri] => cat1.1
                            [t_uri_encoded] => cat1.1
                            [t_uris] => 
                            [meta_title] => 
                            [meta_description] => 
                            [meta_keywords] => 
                            [childs] => Array
                                (
                                    [0] => stdClass Object
                                        (
                                            [tid] => 5
                                            [parent_id] => 3
                                            [language] => th
                                            [t_type] => category
                                            [t_name] => cat1.1.1
                                            [t_description] => 
                                            [t_uri] => cat1.1.1
                                            [t_uri_encoded] => cat1.1.1
                                            [t_uris] => 
                                            [meta_title] => 
                                            [meta_description] => 
                                            [meta_keywords] => 
                                        )

                                )

                        )

                    [1] => stdClass Object
                        (
                            [tid] => 4
                            [parent_id] => 1
                            [language] => th
                            [t_type] => category
                            [t_name] => cat1.2
                            [t_description] => 
                            [t_uri] => cat1.2
                            [t_uri_encoded] => cat1.2
                            [t_uris] => 
                            [meta_title] => 
                            [meta_description] => 
                            [meta_keywords] => 
                        )

                )

        )

    [1] => stdClass Object
        (
            [tid] => 2
            [parent_id] => 0
            [language] => th
            [t_type] => category
            [t_name] => cat2
            [t_description] => 
            [t_uri] => cat2
            [t_uri_encoded] => cat2
            [t_uris] => 
            [meta_title] => 
            [meta_description] => 
            [meta_keywords] => 
        )

) 
```

json字符串中的这个数组+对象

```
[{"tid":"1","parent_id":"0","language":"th","t_type":"category","t_name":"cat1","t_description":null,"t_uri":"cat1","t_uri_encoded":"cat1","t_uris":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"childs":[{"tid":"3","parent_id":"1","language":"th","t_type":"category","t_name":"cat1.1","t_description":null,"t_uri":"cat1.1","t_uri_encoded":"cat1.1","t_uris":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"childs":[{"tid":"5","parent_id":"3","language":"th","t_type":"category","t_name":"cat1.1.1","t_description":null,"t_uri":"cat1.1.1","t_uri_encoded":"cat1.1.1","t_uris":null,"meta_title":null,"meta_description":null,"meta_keywords":null}]},{"tid":"4","parent_id":"1","language":"th","t_type":"category","t_name":"cat1.2","t_description":null,"t_uri":"cat1.2","t_uri_encoded":"cat1.2","t_uris":null,"meta_title":null,"meta_description":null,"meta_keywords":null}]},{"tid":"2","parent_id":"0","language":"th","t_type":"category","t_name":"cat2","t_description":null,"t_uri":"cat2","t_uri_encoded":"cat2","t_uris":null,"meta_title":null,"meta_description":null,"meta_keywords":null}] 
```

**如何像这样创建嵌套的 ul li。**

```
<ul>
  <li>cat1
    <ul>
        <li>cat1.1
            <ul>
                <li>cat1.1.1</li>
            </ul>
        </li>
        <li>cat1.2</li>
    </ul>
  </li>
  <li>cat2</li>
</ul> 
```

这就是我尝试过的

```
echo list_nested_cat( $list_item );
function list_nested_cat( $list_item, $start = 0) {
    echo '<ul style="margin-left: 1em;">';
    foreach ( $list_item as $item ) {
        if ( isset( $item->childs ) && is_array( $item->childs ) ) {
            echo '<li>'.$item->t_name.'</li>';
            list_nested_cat($item->childs);
        } else {
            echo '<li>'.$item->t_name.'</li>';
        }

    }
    echo '</ul>';
} 
```

但此函数回显不正确的 html 嵌套 ul li 格式。

附言。我从 arnaud576875 的代码创建数组对象

[类别和子类别的 PHP 树结构，无需循环查询](https://stackoverflow.com/questions/4843945/php-tree-structure-for-categories-and-sub-categories-without-looping-a-query)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T03:51:00.180

这应该让你开始：

它使用递归函数；它自称。

**更新**

使用 JSON 对象进行测试并修复了一些错误

```
<?php    

echo make_ulli($object); 

function make_ulli($array){
    if(!is_array($array)) return '';

    $output = '<ul>';
    foreach($array as $item){  

        $output .= '<li>' . $item->t_name;      

        if(property_exists($item, 'childs'))
            $output .= make_ulli($item->childs);

        $output .= '</li>';

    }   
    $output .= '</ul>';

    return $output;
}

?> 
```

# google-maps - 在 Sencha Touch 2 中单击 google 标记后显示视图（面板、容器等）

> ID：10309007
> 
> 赞同：0
> 
> 时间：2012-04-25T03:36:06.227
> 
> 标签：google-maps, sencha-touch, extjs, google-maps-markers

我在 sencha touch 2 上有一张地图，上面装有标记（动态）。目前，当我单击标记时，它们各自的信息窗口会打开。我想使用信息窗口中的按钮或单击标记来打开容器。

这可能吗，有人可以指导我吗？我只知道它与标记的听众有关......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:21:35.537

In order to listen the click event for a marker you can use the following code:

```
google.maps.event.addListener(marker, 'click', onClickHandler); 
```

marker is a google.maps.Marker.

If you want to put a button inside of infoWindow. You could listen for click events in the infoWindow and then check if the click was inside a button.

```
....
infoWindow.content = '<div>text</div><div class="button">button</div>';
infoWindow.content.addEventListener('click', onInfoWindowClickHandler);

function onInfoWindowClickHanlder(event) {
   if(event.target.className == 'button') {
      // Button click
   }
} 
```

This is only one aproximation. I've not tested the code, so could need some tunning, but the idea should work.

You must read [https://developers.google.com/maps/documentation/javascript/](https://developers.google.com/maps/documentation/javascript/)

# android - 设计日历视图

> ID：10309013
> 
> 赞同：1
> 
> 时间：2012-04-25T03:37:29.027
> 
> 标签：android, android-layout

我想创建一个类似于下图中的日历的视图，但我不知道从哪里开始。我想为此找到最好的方法。我想到了 GridView，但没有成功。请问有人有什么建议吗？

![在此处输入图像描述](../Images/7cda6651d08ecafc9a7ee8ae2815347c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:40:38.807

使用带有线性布局标题的网格布局。您可以使用 GridLayout 来实现单击命令，并使用一些花哨的适配器工作，您可以管理一周/一个月的日期。

编辑：

这是您可以做什么以及 GridView 如何为您工作的粗略概念。

```
class CalendarView extends LinearLayout {

    public CalendarView (Context context) {
        super(context);
        setOrientation(LinearLayout.VERTICAL);

        mHeader = new LinearLayout(context);
        mHeader.setOrientation(LinearLayout.HORIZONTAL);
        addView(mHeader);
        // Add in your days, shouldn't be too bad, they are just text views.

        mCalendar = new GridView(context);
        mCalendar.setColumns(mHeader.getNumViews()); // You could hard code this.
        mCalendar.setAdapterView(new CalendarAdapter());
        addView(mCalendar);
    }

    // ... Other contructors

    private class CalendarAdapter extends BaseAdapter {
        // Override methods, this should be too bad.

        @Override public view getView (int pos, View convert, ViewGroup parent) {
            ListView lv = (ListView)convert;
            if (convert == null)
                lv = new ListView(parent.getContext());

            // Here you will need to figure out some way of
            // determining the date.

            CalendarDate app = (CalendarDate)lv.getTag();

            // Determine if this view is already set to the correct date,
            // if not rest the list view

            app.sort();

            lv.setAdapter(new ArrayAdapter(parent.getContext(), R.layout.datelistview, app.getDates());
        }
    }

    public static class CalendarDate {
        List<Appointment> mDates = new ArrayList<Appointment>();

        public void addAppointment(Appointment app) {
            mDate.add(app);
        }

        // ... and the rest of your methods (getters and state returns)
    }

    public Appointment implements Compareable<Appointment> {
        private Date mDate;

        private String mName;   // Appointment name
        private String mDesc;   // Appointment description

        @Override public int compareTo(Appointment to) {
            return mDate.compareTo(mDate);
            }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:58:03.283

Android 在 SDK 中不提供任何日历视图。从开发人员的角度来看，这是一个很大的损失。在很多情况下，显示一个月的日期并为用户提供一些选择日期的选项是有益的。

一种解决方案是使用第 3 方组件。第二个是自己实现一个

检查这些链接，将对您有所帮助

[http://w2davids.wordpress.com/android-simple-calendar/](http://w2davids.wordpress.com/android-simple-calendar/)

还有这个

[http://caughtinthemobileweb.wordpress.com/2011/06/20/how-to-implement-calendarview-in-android/](http://caughtinthemobileweb.wordpress.com/2011/06/20/how-to-implement-calendarview-in-android/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T04:06:42.570

您可以将水平 LinearLayout 带入具有相同权重的所有 textview 的垂直 LinearLayout。

```
 android:layout_weight="1"

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:padding="5dp">

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="sun" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="mon" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="tue" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="wed" />

        <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="thu" />

        <TextView
            android:id="@+id/textView6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="fri" />
        <TextView
            android:id="@+id/textView7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="sat" />
    </LinearLayout>
    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="sun" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="mon" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="tue" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="wed" />

        <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="thu" />

        <TextView
            android:id="@+id/textView6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="fri" />
        <TextView
            android:id="@+id/textView7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="sat" />
    </LinearLayout>

</LinearLayout> 
```

# java - 学习使用防止数据竞争条件的线程

> ID：10309015
> 
> 赞同：3
> 
> 时间：2012-04-25T03:37:36.500
> 
> 标签：java, multithreading, race-condition

以下代码应该通过使用 common 上的同步方法来防止 Data Racing。但由于某种原因，输出始终是 19915-19980。如果不是数据竞赛，不应该是20000吗？

```
public class SyncVarDataRace extends Thread {

    private static int common = 0;

    public void run(){
        synchronized((Integer)common){
            int local = common;
            local+=1;
            common = local;
        }
    }

    public static void main(String[] args) throws InterruptedException {
        SyncVarDataRace[] allThreads = new SyncVarDataRace[20000];

        for(int i = 0; i < allThreads.length; i++){
            allThreads[i] = new SyncVarDataRace();
        }

        for(SyncVarDataRace d: allThreads){
            d.start();
        }

        for(SyncVarDataRace d: allThreads){
            d.join();
        }

        System.out.println(common);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T03:40:10.563

您正在尝试在自动装箱的对象上进行同步，该对象每次都是不同的对象。

```
synchronized((Integer)common){ 
```

重点是在每个线程中同步同一个对象。即使您`common`将`Integer`其设置为 ，只要将其分配给另一个值，它将是另一个对象。

您需要锁定一个常量对象。我建议定义一个可以同步的本地对象：

```
 private final static Object lock = new Object();
 private static int common = 0;
 ...

 synchronized (lock) {
     common++;
 } 
```

在这种特定情况下可能会更好，您可以考虑使用`AtomicInteger`. 这使您可以在没有任何同步的情况下执行以下操作。

```
 private static AtomicInteger common = new AtomicInteger(0);
 ...

 // no need to synchronize since that is handled by the class
 common.incrementAndGet(); 
```

# codeigniter - 在 routes.php 中使用多种语言

> ID：10309019
> 
> 赞同：0
> 
> 时间：2012-04-25T03:37:59.630
> 
> 标签：codeigniter, url-rewriting

当我向我的应用程序添加多语言支持时，我的 routes.php 出现问题，某些路由已停止工作。

似乎任何一个片段都有效，任何有两个或更多片段的东西都不起作用。

任何有关如何解决此问题的帮助将不胜感激。

Routes.php 摘录：

```
// URI like '/en/about' -> use controller 'about'
$route['^(en|br)/(.+)$'] = "$2";
$route['dashboard'] = 'dashboard';    //THIS WORKS
$route['profile'] = 'profile/profile_list';
$route['profile_list/page'] = 'profile/profile_list';    //THIS DOESN'T
$route['profile_list/page/(:any)'] = 'profile/profile_list/$1';
$route['profile/update'] = 'profile/update';
$route['profile/(:any)'] = 'profile/$1';
$route['default_controller'] = 'landing';
// '/en', '/de', '/fr' and '/nl' URIs -> use default controller
$route['^(en|br)$'] = $route['default_controller']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:05:04.447

通过以下信息找出答案：[Codeigniter 论坛](http://codeigniter.com/forums/viewthread/61150)

只需添加此变量，其中包括我使用的任何两个字母语言代码的 url 段：

```
$prepended_lang = "(?:[a-zA-Z]{2}/)?"; 
```

然后相应地修改路线：

```
$route[$prepended_lang.'logout'] = 'login/logout'; 
```

# sql - Rails 3.2 Active Record Join：记录未显示

> ID：10309024
> 
> 赞同：2
> 
> 时间：2012-04-25T03:38:41.020
> 
> 标签：sql, ruby-on-rails, activerecord, join, ruby-on-rails-3.2

我的模型有一个多对多的关系，教练可以指导多个团队，一个团队可以有多个教练。（助理、主管等）

在 Rails 控制台中，当我运行时：

```
 @coach = Coach.joins(:teams).select("coaches.first_name, coaches.last_name, teams.team_level") 
```

返回：

```
 => [#<Coach first_name: "john", last_name: "doe">] 
```

请注意，它不会返回`teams.team_level`，所以我不能`@coach.team_level`在我的视图中使用

当我这样做时`.to_sql`，它会返回：

```
=> "SELECT coaches.first_name, coaches.last_name, teams.team_level 
FROM `coaches` 
INNER JOIN `coach_teams` ON `coach_teams`.`coach_id` = `coaches`.`id` 
INNER JOIN `teams` ON `teams`.`id` = `coach_teams`.`team_id` 
```

这是我所期望的......所以当我对我的数据库运行这个查询时，我得到了预期的字段。

我在这里做错了什么/我没有看到什么？感谢您查看这个！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:54:50.157

你没有做错任何事，你使用模型的方法，`Coach`所以你得到`Coach`模型/s。

由于您在团队中使用联接，因此`team_level`无需额外查询即可访问该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:06:40.980

它实际上很好。您要求一个 Coach 模型，然后加入 Team 模型。

所以你实际上只需要`@coach.teams.team_level`访问团队级别。

选择不能改变你的模型的模式，它只能过滤从SQL返回的属性，这样你需要更少的往返和更少的数据传输，但结构是不变的。

# java - ArrayList 在添加值时返回索引

> ID：10309026
> 
> 赞同：11
> 
> 时间：2012-04-25T03:38:47.030
> 
> 标签：java, data-structures, collections

我正在寻找一个类似于 ArrayList 的 java 数据结构，当我只使用 value 参数进行添加或推送时，将自动为我返回索引。

例如：

```
ArrayList<String> elements = new ArrayList<String>();

String element = "foo";
String elementTwo = "bar";

int index1 = elements.add(element); //note this does not exist, i.e. returns bool in api
int index2 = elements.add(elementTwo);

System.out.println(elements.get(index1)); //would give "foo" 
```

我可以看到围绕 ArrayList 编写一个包装类，该类管理一个计数器，该计数器在每次添加操作和调用时递增：

```
ArrayList.add(int index, E element) 
```

你真的需要为此写一个 ArrayList 的包装器吗？这似乎很简单，可以在某个地方开箱即用？

**编辑：**

对于这个用例，我需要固定和唯一的索引（键）。有人建议了一张地图，我同意这一点。有谁知道在值插入时为您提供自动（唯一）生成的键的映射实现？我只是想决定是否需要为此实现自己的包装器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T03:44:02.877

该元素将被添加到列表的末尾。所以你可以使用`elements.size()-1`来获取新的元素索引。

请注意，如果多个线程同时修改列表，这将不可靠。

**编辑：**还请注意，使用 s 索引作为唯一 ID 可能不是一个好主意，`ArrayList`因为元素索引可能会更改（例如，当您删除元素或使用 插入新元素时`add(int, Object)`）。如果这是一个问题，取决于您要对索引做什么：如果您在添加元素后只需要它很短的时间，并且可以确保在此期间列表没有被修改，那么没有问题。在另一种情况下，即使在调用时返回索引的方法`add(Object)`也无济于事，因为无论如何索引都不会更新。为防止出现此问题，您可以：

*   确保您永远不会从列表中删除元素，也永远不会使用`add(int, Object)`.
*   除了删除元素，您还可以将它们设置为`null`使用方法`set(int, null)`。这样，任何元素索引都不会改变。
*   使用其他一些数据结构，例如具有自定义 ID 的地图，如 helloannanil 在他的回答中建议。

**编辑 2：**我没有找到合适的、可立即使用的实现（但这并不意味着没有，当然）。为了提出一个好的解决方案，需要更多关于数据结构预期用途的信息，但这里有一些想法和注意事项：

*   如果元素的最大数量不是很大，`ArrayList`可以使用 an 并且元素索引表示 ID。如上所述，要删除一个元素，可以将其设置为`null`不更改索引。插入时，`null`可以重复使用具有值的位置。
*   您还可以使用此答案中显示的两种方法之一：[https](https://stackoverflow.com/a/8939049/1347968) ://stackoverflow.com/a/8939049/1347968 （关键字`AtomicLong`或`IdentityHashMap`）
*   不要依赖或因为它**不能**保证的“唯一性”（通过运行[Suns/Oracles Bug #6321873](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6321873)底部的示例来尝试）。`Object.hashCode()``System.identityHashCode(Object)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T03:44:32.270

那么在这种情况下我所做的（我喜欢 ArrayLists）是通过询问列表的大小来获取最后一个索引：

```
String thing = "theThing";
List<String> strList = new ArrayList<String>();
strList.add(thing);
int indexOfThing = strList.size() - 1; 
```

我的意思是，比实现自己的 List 更容易并且可以正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T03:48:25.080

如果你真的想要这个功能，你可以使用map而不是list

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T20:30:33.793

根据您的评论和编辑的问题，我认为您可以扩展 HashMap 供您使用，如下所示：

```
public class MyMap<V> extends HashMap<Integer, V> {
    private static final long serialVersionUID = 1L;
    public int add(V elem) {
        int key = System.identityHashCode(elem);
        super.put(key, elem);
        return key;
    }
} 
```

然后在你的类中声明`MyMap`如下：

```
private MyMap<String> map = new MyMap<String>(); 
```

然后添加你的元素，`MyMap`如下所示：

```
.....
.....
String element = "foo";
String elementTwo = "bar";
int index1 = map.add(element);
int index2 = map.add(elementTwo); 
```

现在，您拥有`index1`并`index2`作为插入字符串的索引，您可以在应用程序的生命周期内使用或传递这些字符串。`MyMap`您可以根据需要多次插入或删除元素，但您的索引 (`index1`和`index2`) 将返回您插入的元素，如下所示：

```
String elem1 = map.get(index1); // will return "foo"
String elem2 = map.get(index2); // will return "bar" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-20T07:29:02.947

```
String thing = "theThing";
List<String> strList = new ArrayList<String>();
strList.add(thing);
int indexOfThing = strList.size() - 1; 
```

如果您删除一个项目，这将不再有效。

# java - 使用 Facebook 登录/注册 - 测试用户

> ID：10309027
> 
> 赞同：2
> 
> 时间：2012-04-25T03:39:04.310
> 
> 标签：java, facebook, facebook-graph-api, facebook-oauth

我对 facebook 集成相当陌生。我必须添加“使用 Facebook 注册/登录”选项以在我的网站上注册新用户。我正在执行以下步骤：[服务器端身份验证](https://developers.facebook.com/docs/authentication/server-side/)

1）我用哪个帐户来测试这个？如果我用它来玩api，我的个人帐户会被暂停或禁止吗？

2）要测试api，我必须像这样创建测试用户吗？[测试用户](https://developers.facebook.com/docs/test_users/)

3）另外，要创建测试用户，看起来我需要[作为应用程序进行身份验证](https://developers.facebook.com/docs/authentication/applications/)有人可以解释为什么我应该作为应用程序进行身份验证来创建测试用户吗？

4）有时，我对“app”这个词的使用感到困惑。我的网站不被视为 Facebook 应用程序，因为我使用 facebook 注册/在我的用户中。正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:48:56.790

1.  不（如果你正在做你在评论中提到的）

2.  您不必创建测试用户，但这样做会有所帮助。例如，如果您正在通过应用测试墙贴，那么最好保持您的个人资料/时间线干净。创建应用程序时，您还可以选择在应用程序的设置页面中创建测试用户，因此您无需以编程方式执行此操作。

3.  测试用户与应用程序相关联，因此*可能*这就是您需要 app_access_token 的原因。但是，如果您在应用程序的设置页面中使用 ui 创建测试用户，则无需提及任何令牌。

4.  是的，它被认为是一个，这就是 facebook 的图表的工作方式，外部（第 3 方）对象（他们称它们为应用程序，作为概括，毕竟您的网站可以称为 Web 应用程序）和 facebook 对象（如用户）之间存在联系，页面等。当您创建应用程序时，您可以看到 facebook 允许您为应用程序指定的不同类型/类别的应用程序。所以这只是一个名字，没什么好担心的。

# c - 使用许多单独的示例文件设置 Xcode 项目

> ID：10309030
> 
> 赞同：0
> 
> 时间：2012-04-25T03:39:24.027
> 
> 标签：c, xcode, xcode4, coderunner

我在浏览一本书时正在玩很多小 C 文件。例如：

*   定义文件
*   第01章
    *   指针.c
    *   结构指针.c
    *   矢量Ops.c
    *   defsTest.c
*   第02章
    *   选择排序.c
    *   递归.c
    *   冒泡排序.c
*   等等……</li>

我目前正在使用一个名为[CodeRunner](http://krillapps.com/coderunner/)的很棒的小应用程序，但我确实错过了 Xcode 中的调试和智能感知功能。

有没有办法设置项目，以便我可以从一个项目中单独运行每个文件？我知道我总是可以为每个文件创建一个包含一个项目的工作区，但这似乎很麻烦——必须有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:59:27.380

1)

是的。使用命令行（您必须安装可以从此[页面上的“寻找其他开发人员工具”链接](https://developer.apple.com/xcode/index.php)下载的“命令行添加”），构建过程非常简单：

```
gcc -o selectionSort selectionSort.c 
```

（前提是您的 .c 文件中有 " `main`" 函数）。

或者：

2)

要从 Xcode IDE 中构建，您必须为每个要构建的小应用程序创建一个新产品（或目标），并将您要构建的适当 .c 文件添加到该新产品中。您要构建的应用程序类型称为“命令行工具”。

当您创建一个新项目或选择“新目标”时，您会看到并选择以下内容：

![在此处输入图像描述](../Images/16ada4f3875f39dae0878be10f9c4287.png)

# linux - 如果有尾随字段，为什么 sort 命令排序不同？

> ID：10309033
> 
> 赞同：0
> 
> 时间：2012-04-25T03:39:51.157
> 
> 标签：linux, shell, sorting

考虑排序键：a、a01 和 a02，如果没有尾随字段，排序结果如下所示：

```
$ cat test1
a01
a
a02
$ sort test1
a
a01
a02
$ 
```

但是如果有尾矿场，事情就会变得奇怪：

```
$ cat test2
a01 7
a 12
a02 42
$ sort test2
a01 7
a02 42
a 12
$ 
```

为什么键“a”从排序结果的顶部落到底部？

我的排序版本是“排序（GNU coreutils）5.97”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:53:25.457

我的版本的手册页`sort`说：

```
***  WARNING  *** The locale specified by the environment affects sort order.  
Set LC_ALL=C to get the traditional sort order that uses native byte values. 
```

事实上，如果我设置`LC_ALL=C`并运行`sort`您的第二个示例，我会得到：

```
$ LC_ALL=C sort < tosort 
a 12
a01 7
a02 42 
```

您的默认位置可能不是`C`.

# spring - Spring - SpEL 是否易受攻击？

> ID：10309034
> 
> 赞同：8
> 
> 时间：2012-04-25T03:39:55.033
> 
> 标签：spring, security, spring-el

我遇到了一篇文章[开源库有漏洞](http://www.networkworld.com/news/2012/032612-open-source-vulnerabilities-257645.html)。

这篇文章指出“Spring Expression Language (SpEL) 可以通过 HTTP 参数提交被利用，这将允许攻击者获取敏感的系统数据、应用程序和用户 cookie。”

有人可以对此进行更多说明吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-19T21:32:48.760

Aspect Security 的发现是在 2013 年 1 月发现的，但 SpringSource 发布的修复是在 2011 年首次发现时提供的。Aspect Security 的 Dan Amodio 告知 SpringSource 远程代码执行的可能性。

SpringSource 更新了我们的安全报告 12-06-2012 与 Aspect Security 的发现 - 但原始公告中列出的修复/缓解仍然适用：http: [//support.springsource.com/security/cve-2011-2730](http://support.springsource.com/security/cve-2011-2730)

此漏洞仅影响 Spring Framework 版本：

• 3.0.0 到 3.0.5 -- 升级到 3.0.6 可以解决问题。• 2.5.0 到 2.5.6.SEC02（社区版本）——在此处升级到 2.5.6.SEC03 可以解决问题。• 2.5.0 到 2.5.7.SR01（订阅客户）——在此处升级到 2.5.7.SR02 可以解决问题。

这已在所有版本中得到修复——SpringFramework 的当前版本是 3.2，于 2012 年 12 月发布。

谢谢，

-Pieter (SpringSource)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T05:03:48.900

查看 SpEL 的Aspect Security/Minded Security[评估](http://www.mindedsecurity.com/fileshare/ExpressionLanguageInjection.pdf)（[谷歌文档链接](https://docs.google.com/document/d/1dc1xxO8UMFaGLOwgkykYdghGWm_2Gn0iCrxFsympqcE/edit?hl=en_US)），您链接到的文章可能指的是（针对 SpEL 的特定情况）。

它们描述了某些 spring JSP 标记如何对 EL 表达式进行双重评估。在这些情况下，用户可能会以 SpEL 的形式向服务器提交数据，例如作为带有值的请求参数`${bean.val}`（URL 编码）

```
http://...?exp=$%7Bbean.val%7D 
```

在 JSP 页面中，表达式`${param.exp}`将被解析为`${bean.val}`本身是安全的文本。但是，如果该表达式位于 spring JSTL 标记的属性中，则可以再次评估该解析值，例如在`spring:message`标记中：

```
<spring:message message="${param.exp}" /> 
```

将导致将值`${bean.val}`传递给`spring:message`将评估该`bean.getVal()`方法的标签。因此，我们现在有由客户端提交并在服务器上运行的代码。

# django - 如何从 Django JsonField 获取数据？

> ID：10309036
> 
> 赞同：1
> 
> 时间：2012-04-25T03:40:06.833
> 
> 标签：django, json

我想知道如何从 JsonField 获取（“解码？”）数据，我有这个：

```
{"pleople": "name=Jhon&email=email@domain.com", "id": 251304} 
```

我如何将它传递给我的视图`name['Jhon']`或任何类型的对象以与 querySet 或参数一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:25:25.097

```
>>> from urlparse import parse_qs, parse_qsl

>>> parse_qs("name=Jhon&email=email@domain.com")
{'email': ['email@domain.com'], 'name': ['Jhon']} # allow multiple values

>>> dict(parse_qsl("name=Jhon&email=email@domain.com"))
{'email': 'email@domain.com', 'name': 'Jhon'} # dict w/ single value 
```

或者你可以`django.http.QueryDict`直接使用

```
>>> from django.http import QueryQict
>>> QueryDict("name=Jhon&email=email@domain.com")
<QueryDict: {u'name': [u'Jhon'], u'email': [u'email@domain.com']}> 
```

# c++ - 在 C++ 中读取具有多个分隔符的文件

> ID：10309037
> 
> 赞同：1
> 
> 时间：2012-04-25T03:40:07.137
> 
> 标签：c++, delimiter, getline

我有一个要阅读的文本文件，但它的格式并不漂亮（故意）。

我必须将数据排序到一个结构中，并且数据类型不同，所以首先我将它们排序到一个数组中，这样我就可以根据顺序将它们排序到结构中。我做了一个代码来获取一行，然后测试它是否有空格，如果有空格，它会使用''作为分隔符再次扫描它。如果没有，它只是将字符串存储到数组中。

这是代码：

```
int nextw(ifstream &file, string array[]){

    string line;
    string token;
    stringstream iss;
    size_t foundspace;

    int i = 0;

    while(getline(file, line)){
            iss << line;

            foundspace = line.find(" ");
            if(foundspace != string::npos){
                    while(getline(iss, token, ' ')){
                            array[i++] = token;
                    }
            }
            else
                    array[i++] = line;
    }
    return i;
} 
```

它返回数组的计数。

问题是它跳过了一行数据。例如，我有：

```
data data data data data
data
data
data
data
data
skipped_data skipped_data
data
data
etc... 
```

仅跳过带有空格分隔符的单行 2 字数据。该行没有被视为该行是单个字符串，它根本不在数组中。

编辑：添加更多代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:48:42.677

没关系，我发现“>>”可以代替 getline()。

# oracle - 适用于 Oracle 11g 和 ASP.NET MVC 3.0 的 NHibernate 3.3 或 Entity Framework 4.3？

> ID：10309038
> 
> 赞同：0
> 
> 时间：2012-04-25T03:40:09.257
> 
> 标签：oracle, entity-framework, nhibernate, stored-procedures

我必须在 NHibernate (3.3) 和 Entity Framework (4.3) 的最新版本之间进行选择，才能使用 Oracle 11g；我们架构的一个非常特殊的问题是：我们必须执行大量存储过程才能与其他旧系统保持平衡。

我们将使用**ASP.NET MVC 3**作为用户界面。**那么，您能帮我们在NHibernate**和**Entity** **Framework**之间选择哪个更方便我们的架构吗？

我已经读过实体框架的 Oracle 驱动程序是非常新的，所以我还不能决定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:14:51.427

MS 非常致力于 EF，但他们不是为 Oracle 开发提供商！Oracle 是否也致力于 EF？

做出决定的最佳方法是创建一个简短的 POC（概念证明），您可以在其中评估这两种工具的一些简单和中间问题（您也可以尝试一个难题），您必须在实际项目中解决。这将帮助您了解这两种工具在您的实际问题上所面临的挑战，而不仅仅是在一些虚构的讨论中。它还将帮助您了解采用新技术并将其与现有环境集成的困难。

# java - 应用程序的持续执行

> ID：10309042
> 
> 赞同：0
> 
> 时间：2012-04-25T03:40:33.083
> 
> 标签：java, web-applications, synchronization

我正在尝试构建一个电子商务 Java Web 应用程序，我遇到了从商店预订/购买商品的问题。每个项目只能购买一次，我的问题是两台不同机器上的用户可能会购买相同的项目，为此我正在考虑同步。我不太了解同步以及当没有人使用它时应用程序如何仍然运行。应用程序是否在服务器端运行？有人可以给我一些这方面的信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T04:16:04.043

一种可能的方法是锁定数据库中的字段。锁定数据库将阻止任何试图访问它的应用程序使用它。如果您从服务器端应用程序使用锁“同步”，您必须确保只有该应用程序可以访问数据库，否则您可以两次销售相同的产品。一些关于您的数据库锁定机制的研究可能可以帮助您防止这个问题。

# graphics - 如何按百分比计算渐变颜色

> ID：10309044
> 
> 赞同：5
> 
> 时间：2012-04-25T03:40:35.040
> 
> 标签：graphics, colors, rgb

我有一个浮动分数，即 0 到 1

我需要把这个分数翻译成颜色，

0 为绿色

1 是红色的

0.5 应该在绿色到红色渐变色的中间

等等

这个怎么写？我不知道。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T03:45:18.763

设渐变颜色参数为`t`, `0.0 =< t =< 1.0`

```
colour = RGB(255 * t, 255 * (1 - t), 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:45:07.313

将浮点数乘以 255 得到绿色值，将 (1-float) 乘以 255 得到红色值。如果需要输出 css 颜色代码，请使用 rgb(x,y,z)。

# android - 从 android 设备连接到 localhost

> ID：10309049
> 
> 赞同：1
> 
> 时间：2012-04-25T03:40:52.060
> 
> 标签：android, localhost

我已经搜索过这个主题，但仍然不知道如何使它工作:(
我有一个 SOAP Web 服务（ASP.NET），这个地址（在我的本地主机上）是[http://localhost:50473/Service1。 asmx](http://localhost:50473/Service1.asmx)

然后我的 android 设备上有肥皂客户端，我想连接以使用来自服务器的服务。很多人说usb线连接不上，必须连接同一个wifi网络，使用内部IP。
好的，现在我的笔记本电脑和安卓设备都连接到了 wifi 网络，
我的笔记本电脑得到了 192.168.43.17
我的安卓设备得到了 192.168.43.26

那么设备如何连接到上面的 SOAP 服务器呢？
在我的设备上，我使用 192.168.43.17:50473/Service1.asmx 但没有运气:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T03:47:28.607

您需要在 AndroidManifest.xml 中设置 uses-permission - [android.permission.INTERNET](http://developer.android.com/resources/samples/SampleSyncAdapter/AndroidManifest.html)并在网络浏览器上测试 (http://192.168.43.17:50473/Service1.asmx) url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:46:55.977

使用 Http 连接

```
HttpClient httpclient = new DefaultHttpClient();            
HttpGet httppost = new HttpGet("http://localhost/");
HttpResponse response = httpclient.execute(httppost);              
HttpEntity ent=response.getEntity();
InputStream is=ent.getContent(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T20:40:26.397

您可能让您的网络服务器在您的环回接口而不是您的网络接口上侦听。这方面的主要迹象是：

*   点击`127.0.0.1`并`localhost`（来自本地主机或 Android 模拟器）工作
*   命中`192.168.xxx.xxx`不起作用，无论是来自本地主机、LAN 还是 WAN

我在[这里](https://stackoverflow.com/a/16743134/538222)的答案中更多地讨论了诊断和解决此问题。

# jquery-ui - IE8 中的 jQuery UI 滑块和可排序不兼容

> ID：10309050
> 
> 赞同：1
> 
> 时间：2012-04-25T03:41:05.843
> 
> 标签：jquery-ui, cross-browser, jquery-ui-sortable, jquery-ui-slider

我有一个 jQuery UI 滑块包裹在一个可排序的 li 中。html是这样的：

```
<ul class="sortable">
   <li><div class="slider"></div></li>
   <li><div class="slider"></div></li>
</ul> 
```

在 IE8 中，当我拖动滑块时，`li`也会拖动滑块。但是我Chrome和FF，事情在意料之中。

我认为这与事件传播有关，我尝试在滑块中添加 stopPropagation 但它仍然不起作用。

有什么提示吗？

# ruby-on-rails - 尝试安装任何 gem 时出现 MongoDB 连接错误

> ID：10309058
> 
> 赞同：0
> 
> 时间：2012-04-25T03:41:46.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongomapper

我正在尝试使用 gem 1.8.23、Ruby 1.9.2p318（2012-02-14 修订版 34678）[x86_64-darwin10.8.0]、MongoDB 1.6.2 和 MongoMapper 0.11.0 和 heroku 运行 Rails 3.2.3。我能够启动 rails 服务器并在开发和 heroku 上使用 mongoDB。但是每当我尝试安装任何新的东西（例如引导程序）或运行“rails s”命令时，我都会收到以下错误（粘贴在下面）。我认为它与 mongodb 和/或 mongo 映射器有关。我还附上了配置文件。几天以来我一直坚持这一点，任何提示或想法都受到高度赞赏。不幸的是，这是我的第一个 RoR 应用程序，因此我可能听起来很愚蠢。

错误：

```
 new-host:talker Name$ rails g bootstrap:install
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from  at /Users/Name/Projects/talker/config/environment.rb:12)
/Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/networking.rb:330:in `rescue in receive_message_on_socket': Operation failed with the following exception: connection closed (Mongo::ConnectionFailure)
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/networking.rb:322:in `receive_message_on_socket'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/networking.rb:188:in `receive_header'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/networking.rb:175:in `receive'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/networking.rb:139:in `receive_message'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/cursor.rb:469:in `block in send_initial_query'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/util/logging.rb:36:in `instrument'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/cursor.rb:467:in `send_initial_query'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/cursor.rb:458:in `refresh'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/cursor.rb:128:in `next'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/db.rb:511:in `command'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/connection.rb:628:in `check_is_master'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/connection.rb:402:in `connect'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/connection.rb:589:in `setup'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo-1.6.2/lib/mongo/connection.rb:114:in `initialize'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo_mapper-0.11.1/lib/mongo_mapper/connection.rb:75:in `new'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/mongo_mapper-0.11.1/lib/mongo_mapper/connection.rb:75:in `connect'
    from /Users/Name/Projects/talker/config/initializers/mogo.rb:28:in `'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `block in load'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/engine.rb:588:in `block (2 levels) in '
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/engine.rb:587:in `each'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/engine.rb:587:in `block in '
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/Name/Projects/talker/config/environment.rb:12:in `'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/application.rb:103:in `require'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/application.rb:103:in `require_environment!'
    from /Users/Name/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.3/lib/rails/commands.rb:25:in `'
    from script/rails:6:in `require'
    from script/rails:6:in `'
new-host:talker Name$ 
```

环境.rb

```
`require File.expand_path('../application', **FILE**)
Talker::Application.initialize!` 
```

`mongo.rb`

```
``MongoMapper.config = { 
  Rails.env => { 'uri' => ENV['MONGOHQ_URL'] || 'mongodb://localhost:28017' } }
MongoMapper.connect(Rails.env)
if defined?(PhusionPassenger)
   PhusionPassenger.on_event(:starting_worker_process) do |forked|
     MongoMapper.connection.connect if forked
   end
end`` 
```

* * *

 ``## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:25:35.903

您的配置文件说要连接到 localhost:28017，但那是 Web 控制台。你可能想要 localhost:27017。``

# javascript-events - 在表单有效之前阻止用户点击“提交”

> ID：10309060
> 
> 赞同：0
> 
> 时间：2012-04-25T03:41:56.467
> 
> 标签：javascript-events

我有一个使用大量 javascript 和 ajax 来确定每个字段是否有效的 Web 表单。它会即时提供警告消息，以帮助用户了解何时出现问题。我什至在提交按钮上使用“禁用”功能，直到一切正常。但问题是：所有事件处理都使用“onblur”功能进行。但是当最后一个字段被填写时，验证不会发生，直到用户点击离开该字段。但他们为什么会呢？除了单击提交之外，页面上没有什么可做的，除非他们首先单击其他地方，其他任何地方，否则他们无法执行此操作（以触发验证事件）。我正试图找到解决这个问题的方法。必须有一种方法，他们不必进行额外的点击。它似乎并不专业。有没有解决这个问题的标准方法？每次用户输入单个字母时是否可以触发验证事件？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:51:30.037

表单节点有一个`onsubmit`在用户尝试提交表单时触发的事件。您可以使用它来验证所有表单字段并决定是否让用户提交表单。一般的实现是这样的：

```
<form onsubmit="return validateForm()">
    ...
</form> 
```

并且在你的 JavaScript 函数中，如果用户可以继续提交表单，你必须返回 true，或者在表单提交之前取消用户的请求。

（在伪代码中）：

```
function validateForm(){
    if(formIsOkay){
        return true;
    }else{
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:49:08.107

您可以使用 onkeyup 验证每个字段，并将您的用户通知保留给 onblur 方法，这样它就不会变得烦人。如果 onkeyup 中所有字段都有效，请启用提交按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:41:32.180

鉴于 {onChange, onKeyup, blur, etc} 在处理复制/粘贴或其他边缘情况时的限制，我可能会添加一个计时器以每 500 毫秒左右轮询一次并启用/禁用提交按钮：

```
window.setInterval(checkEnableSubmit, 500);

function checkEnableSubmit(){
   if(validateForm()){
       // enable submit button
   } 
}

function validateForm(){
     if(formIsOkay){
         return true;
     }
     return false;
} 
```

我仍然会在按钮单击时调用 validateForm() 以避免用户在调用计时器之前使数据无效并提交。服务器端验证是给定的，但如果可能的话，我想避免错误的提交。

# objective-c - UIImage resizableImageWithCapInsets：没有按预期工作

> ID：10309064
> 
> 赞同：13
> 
> 时间：2012-04-25T03:42:36.397
> 
> 标签：objective-c, xcode, cocoa-touch, ios5, uiappearance

我正在编写针对 iOS 5.0+ 平台的第一个 iOS 应用程序。我正在使用该`UIAppearance`协议来自定义应用程序 UI。

我正在尝试更改`UIBarButtonItem`整个应用程序的背景。由于我`UIBarButtonItem`的 's 可能会根据所使用的文本或图标而改变大小，因此我正在尝试`UIImage resizableImageWithCapInsets:`与我的背景 png 一起使用。

我最初在[Ray Wenderlich](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)上找到了我需要的代码。使用完全相同的代码，图像与上述教程中使用的图像非常接近，我得到了奇怪的结果。也许这只是我对 Cocoa Touch 的缺乏经验。

这是我正在使用的代码。

**DreamsAppDelegate.m - 自定义外观：**

```
UIImage *btnBg = [[UIImage imageNamed:@"navBarButton-bg"] 
          resizableImageWithCapInsets:UIEdgeInsetsMake(0, 6, 0, 6)];

[[UIBarButtonItem appearance] setBackgroundImage:btnBg 
                                        forState:UIControlStateNormal 
                                      barMetrics:UIBarMetricsDefault]; 
```

这是我正在尝试使用的 png 背景图像

![png背景](../Images/013ee7b8f2e32d5971d542e65c35d259.png)

这是结果（在模拟器中）

![尝试使用 resizableImageWithCapInsets 的结果：](../Images/43a7be0e3ac06bc4f231706b4c56a904.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-25T03:58:50.267

`left`和 之间以及和`right`之间的图像部分平铺以填充图像所需的空间。试试。`top``bottom``UIEdgeInsetsMake(15, 6, 15, 6)`

概括地说，如果您的图像具有连续渐变，则重复部分应该只有 1 个像素高。由于您的按钮图像高 31 像素，`top`and `bottom`（的第一个和第三个参数`UIEdgeInsetsMake`）应该加到 30。它们不必相等；`UIEdgeInsetsMake(8, 6, 22, 6)`会将重复的部分向上移动，从而导致背景变浅。

另外，您附加的文件是图像的普通版本还是视网膜（'@2x'）版本？插图必须在普通版本的大小范围内。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-17T14:14:25.077

我有完全一样的问题。

您可以做的另一件事是设置 UIImageResizingModeStretch 的 resizingMode。它解决了我的问题。

但是，它在 IOS5 中不可用。所以我的解决方案是像其他人所说的那样做。意识到可平铺的一面应该只有一个像素。无论如何，大多数按钮在中间并没有太大变化。

所以，使用这个代码：

```
-(UIImage *) resizableImageWithCapInsets2: (UIEdgeInsets) inset
    {
        if ([self respondsToSelector:@selector(resizableImageWithCapInsets:resizingMode:)])
        {
            return [self resizableImageWithCapInsets:inset resizingMode:UIImageResizingModeStretch];
        }
        else
        {
            float left = (self.size.width-2)/2;//The middle points rarely vary anyway
            float top = (self.size.height-2)/2;
            return [self stretchableImageWithLeftCapWidth:left topCapHeight:top];
        }
    } 
```

# asp.net - ASP.NET 我的国家下拉列表变大

> ID：10309066
> 
> 赞同：0
> 
> 时间：2012-04-25T03:43:33.767
> 
> 标签：asp.net, html, css, drop-down-menu

我把这段代码放在我的 Load 方法中：

```
 if (!IsPostBack)
        {
            RegionInfo reginfo;                  

            CultureInfo[] cultInfoList = CultureInfo.GetCultures(CultureTypes.AllCultures);

            foreach (CultureInfo cultInfo in cultInfoList)
            {
                try
                {

                    reginfo = new RegionInfo(cultInfo.LCID);               

                    ListItem li = new ListItem(reginfo.DisplayName, reginfo.TwoLetterISORegionName);

                    if (DropDownList2.Items.IndexOf(li) < 1)
                    { DropDownList2.Items.Add(li); }
                }
                catch 
                {

                }
            }
        } 
```

但是我的 DropDownList 控件在加载一个长名称的国家时会显着改变大小，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:55:43.020

您可以在 ListBox 中添加一个“最大宽度”的 CSS 样式。那将是**style="max-width: 100px;"** 管他呢。

# ipad - 剪切文本后，UIPasteBoard 字符串永远不会得到正确的值

> ID：10309068
> 
> 赞同：1
> 
> 时间：2012-04-25T03:43:44.427
> 
> 标签：ipad, uiwebview, uitextview, cut, uipasteboard

我已经使用 UIMenuController 在 textview 中剪切了一个文本，我想将它粘贴到另一个地方。但是 UIPasteBoard 字符串永远不会得到正确的值。仅供参考，它只是在剪切过程中发生，但在复制过程中没有问题。

例如：我已经复制“XYZ”并粘贴它，UIPasteBoard 字符串包含正确的值，有“XYZ”

然后，我想剪切“ABC”并粘贴它，但是 UIPasteBoard 字符串包含错误的值，它仍然是“XYZ”而不是“ABC”，并且 xcode 输出给了我一个文本`Webcore NSBeep()!`

我不明白为什么会发生这种情况，有人可以给我一些线索吗？谢谢你

**更新**

我只是使用 canPerformAction 方法：

```
-(BOOL)canPerformAction:(SEL)action withSender:(id)sender{

    return [super canPerformAction:action withSender:sender];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:24:20.103

这就是您应该使用简单文本设置粘贴板的方式：

```
[[UIPasteboard generalPasteboard] setString:@"XYZ"]; 
```

## 使用你自己的`UIMenuController`：

```
UIMenuItem * copy = [[UIMenuItem alloc] initWithTitle:@"Copy Text" action:@selector(copyText:)];

UIMenuController * actionMenu = [UIMenuController sharedMenuController];
[actionMenu setMenuItems:[NSArray arrayWithObjects: copy, nil]];
[actionMenu setTargetRect:someButton.frame inView:someButton.superview];
[actionMenu setArrowDirection:UIMenuControllerArrowDefault];
[actionMenu setMenuVisible:YES animated:YES];

-(void)copyText:(id)sender {
    UIButton * button = (UIButton*)sender;
    [[UIPasteboard generalPasteboard] setString:button.titleLabel.text];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T14:52:17.150

> 例如：我已经复制“XYZ”并粘贴它，UIPasteBoard 字符串包含正确的值，有“XYZ”
> 
> 然后，我想剪切“ABC”并粘贴它，但是 UIPasteBoard 字符串包含错误的值，它仍然是“XYZ”而不是“ABC”，并且 xcode 输出给了我一个文本**Webcore NSBeep()！**

答案：**Webcore NSBeep()！**因为“ABC”没有复制到您的剪贴板中，并且通过哔哔声通知错误（恕我直言，这不是任何平台通知错误的明智方式，这将是任何视觉指示）

请注意：NSBeep() 是 iPhone 上不存在的 ApplicationKit 框架的一部分。

# c# - WCF 服务中的 WebScriptEnablingBehavior 不适用于 POST 方法

> ID：10309069
> 
> 赞同：1
> 
> 时间：2012-04-25T03:43:46.810
> 
> 标签：c#, wcf, iis, rest

我想利用`WebScriptEnablingBehavior`我的 WCF REST 服务来提供生成 javascript 客户端代理（以及随之而来的强类型对象）的能力。
它适用于`GET`and`client.DownloadData()`方法（作为查询字符串传递的参数），但我正在努力让它与`POST`and一起使用`client.UploadData(...)`。

问题是我的服务方法中的参数最终都为空（没有错误/异常，我可以通过它进行调试......它们只是空的）。

`web.config`文件_

```
<services>
  <service behaviorConfiguration="ServiceBehavior" name="ServWS_Main_2.WS_Main_2">
    <endpoint address="" behaviorConfiguration="JSONOnly" binding="webHttpBinding"
      bindingConfiguration="StreamedRequestWebBinding" contract="ServWS_Main_2.IServWS" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="JSONOnly">
      <enableWebScript/>
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

服务合同

```
[ServiceContract]
public interface IServWS
{
    [OperationContract]
    [WebInvoke(Method = "POST")]
    ProviderInfo AddTo(string serviceName, BubbleInfo bubble);
} 
```

实施

```
public class WS_Main_2 : IServWS
{
    public ProviderInfo AddTo(string serviceName, BubbleInfo bubble)
    {
        // at this point both serviceName and bubble  are null
    }
} 
```

作为参数传递的复杂类型的定义

```
[DataContract]
public class BubbleInfo
{

    [DataMember(EmitDefaultValue = false)]
    public string Text { get; set; }

    [DataMember(EmitDefaultValue = false)]
    public string Caption { get; set; }
} 
```

来自客户的电话

```
BubbleInfo bub = new BubbleInfo() { Text = "test2" };

MemoryStream stream = new MemoryStream();
DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(BubbleInfo));
serializer.WriteObject(stream, bub);

var url = GetURL() + "/addto?serviceName=MyService";
byte[] data = client.UploadData(url, "POST", stream.ToArray()); 
```

请注意，如果我不使用`WebScriptEnablingBehavior`but`webHttp`而`URITemplate`代替，它可以正常工作。
使用 Visual Studio 内置 Web 服务器以及 IIS Express 7.5 进行测试。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:18:57.530

我认为这与请求消息的“正文样式”有关。当服务实际需要“包装”消息时，您可能会向服务发送“裸” JSON 消息（在 JSON 周围有一个额外的包装器，通常是参数名称。）

你需要注意的是`WebInvokeAttribute.BodyStyle`属性。它获取和设置发送到服务操作和从服务操作接收到的消息的正文样式。它控制是否包装发送到应用该属性的服务操作以及从该服务操作接收到的请求和响应。通常返回的 JSON 由可以跨域执行的 JavaScript 函数包装，因此您可能需要通过切换到“裸”主体样式来删除它。

如果将 WebInvokeAttribute 上的 BodyStyle 属性显式设置为 Bare 或 Wrapped，然后重试，会发生什么情况？这能解决你的问题吗？我觉得应该！

# jquery - jquery parent.html 不是函数

> ID：10309076
> 
> 赞同：1
> 
> 时间：2012-04-25T03:44:13.837
> 
> 标签：jquery, parent

使用 jQuery 的完整新手并且遇到了一些问题。

我有一个表格，其中一些单元格中有一个（每个单元格不超过一个选择）。

在下面的代码中，select 是传递给函数的元素。我正在尝试获取父级，以便我可以删除并用一些 html 替换它。

```
function submit_pick( select ) {
    var parent = select.parent().get(0);      
    select.remove();
    jQuery("#testdiv").html(parent.tagName);
    parent.html(parent.tagName);
} 
```

`select.remove();`按预期工作

`jQuery("#testdiv").html(parent.tagName);`也可以按预期生产TD

`parent.html(parent.tagName);`不起作用。Firefox 的 Web 控制台给出错误 parent.html is not a function。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:48:10.040

`.get(0)`返回一个本机`DOMElement`而不是`jQuery`对象，因此您需要包装`parent`内部`$()`（也是`html()`抱怨不是函数的原因，因为它`html()`属于 jQuery 对象，而不是`DOMElement`）：

```
jQuery(parent).html(parent.tagName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:47:47.933

尝试：

```
 jQuery(parent).html(parent.tagName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T03:47:01.897

`parent`不再是 jQuery 对象，您必须使用：

```
$(parent).html(parent.tagName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T03:47:45.003

get 返回一个 dom 元素而不是 jquery 对象。尝试

```
var parent = select.parent().eq(0); 
```

`eq`为您提供索引处的 jquery 对象，这正是您想要的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T03:48:46.660

这是因为您已经完成`.get(0)`了返回 DOM 元素，而不是 jquery 对象的操作。

[http://api.jquery.com/get/](http://api.jquery.com/get/)

您应该使用`jQuery(parent)`才能`.html()`再次使用该方法。

# java - 用于安排 SQL 文件在 UNIX 机器上的特定日期和时间执行的 Java 代码

> ID：10309081
> 
> 赞同：1
> 
> 时间：2012-04-25T03:45:07.607
> 
> 标签：java

我是 java 新手，正在寻求帮助以在 java 中编写代码，该代码从本地机器获取 abc.sql 文件，并在给定数据空间下的 unix 服务器上的特定日期和时间执行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:49:06.890

使用 Quartz 作为库。如果你知道如何在 Java 中使用 webapps，那么 Quartz 中有一个 Servlet 可以为你自动启动和停止 lib 工厂。

[http://quartz-scheduler.org/](http://quartz-scheduler.org/)

示例：http: [//quartz-scheduler.org/documentation/quartz-2.x/examples/](http://quartz-scheduler.org/documentation/quartz-2.x/examples/)

希望这可以帮到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:58:27.317

使用 cron 实用程序。您*应该*通过执行阅读其手册页

```
man cron 
```

但是如果你很懒（像我一样）并且不喜欢阅读手册页（像我一样），你可以谷歌这个并找到一些好的教程，比如

[http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/](http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/)

在您创建的 cron 作业中，设置命令以运行 Java 文件，就像您在终端中键入它以正常执行它一样。

# c# - 如何在设计时显示 Web 用户控件的控件？

> ID：10309086
> 
> 赞同：1
> 
> 时间：2012-04-25T03:46:02.180
> 
> 标签：c#, asp.net, webusercontrol

这就是我这几天的研究，但我仍然无法在设计时显示控件......它保持显示类型“System.Web.UI.UserControl 没有公共属性名称。控件没有显示而我有内在属性

.aspx 代码示例：

```
<XF:XFButton ID="XFButton1" runat="server" >
    <Button1 ClientSideEvents-Click = "function(s,e){ApplyJavascript();}"></Button1>
 </XF:XFButton> 
```

.ascx 代码后面的示例：

```
 namespace XESControlsTestApp.WebControl
    {
        [PersistenceMode(PersistenceMode.InnerProperty)]
        [ParseChildren(true)]
        [Browsable(true)]

        public class ContentContainer : Control, INamingContainer {

            private ITemplate _content;
            public ITemplate ContentTemplate
            {
                get { return this._content; }
                set { this._content = value; }
            }

            protected override void OnInit(EventArgs e)
            {
                base.OnInit(e);

                if (this._content != null)
                {
                    ContentContainer container = new ContentContainer();
                    this._content.InstantiateIn(container);
                    this._content.InstantiateIn(this);
                }
            }
        } 
```

# utf-8 - 为什么 Netbeans、Aptana Studio 和 Komodo Edit 都不以 UTF-8 保存？

> ID：10309088
> 
> 赞同：1
> 
> 时间：2012-04-25T03:46:46.017
> 
> 标签：utf-8, text-editor, netbeans-7, aptana3, komodoedit

我正在重新投入开发，并想为 HTML5/JQuery 找到一个好的编辑器。

能够以 UTF-8 保存文件很重要。

但是，虽然我在**NetBeans 7.0**中将我的项目设置为以 UTF-8 编码，但当我在项目中创建一个文件，然后在 Notepad++ 中查看它时，该文件以 ANSI 编码，我必须手动将编码设置为 UTF- 8：

![在此处输入图像描述](../Images/2619f322fcc3ef20e5467c3ffec2be5a.png)

在**Aptana Studio 3**中，我将工作区设置为 UTF-8 编码，我的项目继承自该编码，但是当我在项目中创建一个文件并在 Notepad++ 中查看它时，它以 ANSI 编码，我必须手动更改编码转为 UTF-8：

![在此处输入图像描述](../Images/fec07af8744976305aa29f27d8417164.png)

所以我尝试了**Komodo Edit 7**并在文件中手动将编码设置为 UTF-8，保存文件，在 Notepad++ 中查看它说文件是 ANSI。

![在此处输入图像描述](../Images/b13fcdf905d170c2f512879b53a47c47.png)

我注意到在这些编辑器中的任何一个中，如果我在文件中放入了德语变音符号，那么 Notepad++ 将其显示为“ANSI as UTF-8”，但我仍然必须在 Notepad++ 中手动将其更改为 UTF-8，它将保留。

我想要一个以 UTF-8 保存的编辑器的原因是我记得几年前有一个项目，文件中有德语和法语字符，在各种编辑器中查看和保存它们后，这些字符将被替换为垃圾字符. 解决方案是始终将文件的编码初始设置为 UTF-8。

我认为编辑器现在已经很先进了，如果您指定文件应该以 UTF-8 保存，那么它们实际上以每个现代文本编辑器都可以识别的方式保存在 UTF-8 中。不是这样吗？关于 UTF-8，我对现代文本编辑器和开发环境有什么不了解的地方？

**我怎样才能让这些编辑器以 UTF-8 编码保存他们的文件？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T03:58:55.220

仅包含 ASCII 表中也存在的字符（前 128 个 Unicode 字符，即您的基本字母数字字符）的 UTF-8 编码文件与 ASCII/ANSI 编码文件无法区分。我的猜测是 Notepad++ 根本无法区分（因为没有）并且默认为 ANSI。当您包含一个不在 ASCII 表中的字符时，您可以看到差异。通过“ANSI as UTF-8”，我只能猜测它的意思是“此文档包含 ANSI 表（又名 Latin-1）中的字符并以 UTF-8 保存”。

换句话说，您的 IDE 可能没问题，问题出在 Notepad++ 上。

尝试像汉字这样的字符，这将产生一个非常独特的 UTF-8 字节序列，它肯定*不是*ANSI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T02:05:26.053

从我在这个主题上看到的情况来看，Notepad 的 UTF-8 等同于 Notepad++ 的 UTF-8，这意味着包含 BOM。如果使用此编码保存文件并在 NetBeans 中打开，它实际上会显示一个`-`或多个`ï»¿`BOM 序列的字符（取决于项目或 IDE 的编码是否设置为 UTF-8。）但是如果您保存Notepad++ 中的文件编码为“UTF-8 without BOM”，并且将您的项目定义为 UTF-8 或将您的 netbeans_default_options 包含在其中`-J-Dfile.encoding=UTF-8`，您将看到我认为应该是 UTF-8 的内容。不幸的是，如果您尝试在 NetBeans 中编辑此文件而不包含 ANSI 代码集之外的字符，您会看到您在问题中提到的行为，该文件的编码设置为 ANSI。

因此，为了使这成为您问题的“某种”答案，请记住并非所有编辑器的 UTF-8 概念都是相同的。Notepad++ 提供了关于文件真正编码的最实际信息。我想说在 Linux 或 Mac 环境中开发可能是确保本地化正确的一个不错的选择，但在 Windows 上，一个不错的解决方法可能是在文件中包含一个非 ANSI 字符以确保它始终保存为 UTF-8（非 BOM）文件。顺便说一句，这一切都是针对 NetBeans 开发的。我没有和其他人一起测试过，不过我敢打赌，如果他们有非 ANSI 字符，他们会在 Windows 机器上正确保存文件。对不起kluge团伙，但无论哪种方式，我希望它可以帮助那些在同样问题上挣扎的人。

# c++ - 为什么结构的大小需要是任何结构成员的最大对齐的倍数

> ID：10309089
> 
> 赞同：13
> 
> 时间：2012-04-25T03:47:01.677
> 
> 标签：c++, memory-alignment

我了解结构成员之间发生的填充，以确保各个类型的正确对齐。但是，为什么数据结构必须是最大成员对齐的倍数？我不明白最后需要填充。

参考： [http ://en.wikipedia.org/wiki/Data_structure_alignment](http://en.wikipedia.org/wiki/Data_structure_alignment)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T03:53:40.563

好问题。考虑这种假设类型：

```
struct A {
    int n;
    bool flag;
}; 
```

因此，一个类型的对象`A`应该占用 5 个字节（4 个用于 int 加上 1 个用于 bool），但实际上它占用了 8 个字节。为什么？

如果您使用这样的类型，就会看到答案：

```
const size_t N = 100;
A a[N]; 
```

如果每个`A`只有五个字节，那么`a[0]`将对齐 but `a[1]`，`a[2]`而大多数其他元素不会。

但为什么对齐甚至很重要？有几个原因，都与硬件有关。原因之一是最近/经常使用的内存被缓存在CPU 芯片上的*缓存行*中，以便快速访问。小于缓存行的对齐对象总是适合单行（但请参阅下面附加的有趣注释），但未对齐对象可能跨越两行，浪费缓存。

实际上还有更基本的硬件原因，与字节寻址数据沿 32 位或 64 位数据总线传输的方式有关，与高速缓存线完全不同。不对齐不仅会因额外的取指而阻塞总线（与以前一样由于跨接），而且还会迫使寄存器在字节进入时对其进行移位。更糟糕的是，不对齐往往会混淆优化逻辑（至少，英特尔的优化手册说确实如此，尽管我对最后一点没有个人了解）。因此，从性能的角度来看，错位是非常糟糕的。

由于这些原因，浪费填充字节通常是值得的。

*更新：* 下面的评论都很有用。我推荐他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:18:19.937

根据硬件的不同，对齐可能是必要的，或者只是有助于加快执行速度。

在一定数量的处理器（我相信是 ARM）中，未对齐的访问会导致硬件异常。干净利落。

尽管典型的 x86 处理器更宽松，但访问未对齐的基本类型仍然会受到惩罚，因为处理器必须做更多的工作才能将位带入寄存器，然后才能对其进行操作。尽管如此，当需要*打包*时，编译器通常会提供特定的属性/编译指示。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T03:52:36.947

因为虚拟寻址。

> “......在页面大小的边界上对齐页面可以让硬件通过替换地址中的高位来将虚拟地址映射到物理地址，而不是进行复杂的算术运算。”

顺便说一句，我发现这个维基百科页面写得很好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-25T03:53:28.583

如果 CPU 的寄存器大小是 32 位，那么它可以通过一条汇编指令来抓取位于 32 位边界上的内存。抓取 32 位的速度较慢，然后获取从第 8 位开始的字节。

顺便说一句：不必有填充。您可以要求包装结构。

# php - 在php上显示日历

> ID：10309094
> 
> 赞同：6
> 
> 时间：2012-04-25T03:47:34.460
> 
> 标签：php, html, calendar

我搜索了 PHP 上的日历，但我搜索的只是日期时间选择器。

但我只想要一个简单的日历，它可以显示日期，而不需要选择它们。

我只需要像在我们的操作系统中正常工作的日历一样显示日历，谢谢。

有什么办法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T03:53:33.677

这是您可以使用的一个：http: [//keithdevens.com/software/php_calendar](http://keithdevens.com/software/php_calendar)

```
<?php
//http://keithdevens.com/software/php_calendar
$time = time();
$today = date('j', $time);
$days = array($today => array(null, null,'<div id="today">' . $today . '</div>'));
$pn = array('&laquo;' => date('n', $time) - 1, '&raquo;' => date('n', $time) + 1);
echo generate_calendar(date('Y', $time), date('n', $time), $days, 1, null, 0);

// PHP Calendar (version 2 . 3), written by Keith Devens
// http://keithdevens . com/software/php_calendar
//  see example at http://keithdevens . com/weblog
// License: http://keithdevens . com/software/license

function generate_calendar($year, $month, $days = array(), $day_name_length = 3, $month_href = NULL, $first_day = 0, $pn = array())
{
    $first_of_month = gmmktime(0, 0, 0, $month, 1, $year);
    // remember that mktime will automatically correct if invalid dates are entered
    // for instance, mktime(0,0,0,12,32,1997) will be the date for Jan 1, 1998
    // this provides a built in "rounding" feature to generate_calendar()

    $day_names = array(); //generate all the day names according to the current locale
    for ($n = 0, $t = (3 + $first_day) * 86400; $n < 7; $n++, $t+=86400) //January 4, 1970 was a Sunday
        $day_names[$n] = ucfirst(gmstrftime('%A', $t)); //%A means full textual day name

    list($month, $year, $month_name, $weekday) = explode(',', gmstrftime('%m, %Y, %B, %w', $first_of_month));
    $weekday = ($weekday + 7 - $first_day) % 7; //adjust for $first_day
    $title   = htmlentities(ucfirst($month_name)) . $year;  //note that some locales don't capitalize month and day names

    //Begin calendar .  Uses a real <caption> .  See http://diveintomark . org/archives/2002/07/03
    @list($p, $pl) = each($pn); @list($n, $nl) = each($pn); //previous and next links, if applicable
    if($p) $p = '<span class="calendar-prev">' . ($pl ? '<a href="' . htmlspecialchars($pl) . '">' . $p . '</a>' : $p) . '</span>&nbsp;';
    if($n) $n = '&nbsp;<span class="calendar-next">' . ($nl ? '<a href="' . htmlspecialchars($nl) . '">' . $n . '</a>' : $n) . '</span>';
    $calendar = "<div class=\"mini_calendar\">\n<table>" . "\n" . 
        '<caption class="calendar-month">' . $p . ($month_href ? '<a href="' . htmlspecialchars($month_href) . '">' . $title . '</a>' : $title) . $n . "</caption>\n<tr>";

    if($day_name_length)
    {   //if the day names should be shown ($day_name_length > 0)
        //if day_name_length is >3, the full name of the day will be printed
        foreach($day_names as $d)
            $calendar  .= '<th abbr="' . htmlentities($d) . '">' . htmlentities($day_name_length < 4 ? substr($d,0,$day_name_length) : $d) . '</th>';
        $calendar  .= "</tr>\n<tr>";
    }

    if($weekday > 0) 
    {
        for ($i = 0; $i < $weekday; $i++) 
        {
            $calendar  .= '<td>&nbsp;</td>'; //initial 'empty' days
        }
    }
    for($day = 1, $days_in_month = gmdate('t',$first_of_month); $day <= $days_in_month; $day++, $weekday++)
    {
        if($weekday == 7)
        {
            $weekday   = 0; //start a new week
            $calendar  .= "</tr>\n<tr>";
        }
        if(isset($days[$day]) and is_array($days[$day]))
        {
            @list($link, $classes, $content) = $days[$day];
            if(is_null($content))  $content  = $day;
            $calendar  .= '<td' . ($classes ? ' class="' . htmlspecialchars($classes) . '">' : '>') . 
                ($link ? '<a href="' . htmlspecialchars($link) . '">' . $content . '</a>' : $content) . '</td>';
        }
        else $calendar  .= "<td>$day</td>";
    }
    if($weekday != 7) $calendar  .= '<td id="emptydays" colspan="' . (7-$weekday) . '">&nbsp;</td>'; //remaining "empty" days

    return $calendar . "</tr>\n</table>\n</div>\n";
}
?> 
```

这是一个非常基本的迷你日历。没有花哨的功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-11T22:21:26.153

我只用 PHP5 + ajax 写了一个这样的（如果你需要使用它）：

```
<?php

class PN_Calendar {

    public $first_day_of_week = 0; //0 - sunday, 1 - monday
    public $current_year = null;
    public $current_month = null;
    public $current_day = null;
    public $show_year_selector = true;
    public $min_select_year = 1991;
    public $max_select_year = 2045;
    public $show_month_selector = true;

    public function __construct($atts = array()) {
        if (isset($atts['first_day_of_week'])) {
            $this->first_day_of_week = $atts['first_day_of_week'];
        }

        if (!isset($atts['year'])) {
            $this->current_year = date('Y');
        } else {
            $this->current_year = $atts['year'];
        }

        if (!isset($atts['month'])) {
            $this->current_month = date('m');
        } else {
            $this->current_month = $atts['month'];
        }

        if (!isset($atts['day'])) {
            $this->current_day = date('d');
        } else {
            $this->current_day = $atts['day'];
        }
        //***
        if (isset($atts['show_year_selector'])) {
            $this->show_year_selector = $atts['show_year_selector'];
        }

        if (isset($atts['show_month_selector'])) {
            $this->show_month_selector = $atts['show_month_selector'];
        }

        if (isset($atts['min_select_year'])) {
            $this->min_select_year = $atts['min_select_year'];
        }

        if (isset($atts['max_select_year'])) {
            $this->max_select_year = $atts['max_select_year'];
        }
    }

    /*
     * Month calendar drawing
     */

    public function draw($data = array(), $y = 0, $m = 0) {
        //***
        if ($m == 0 AND $m == 0) {
            $y = $this->current_year;
            $m = $this->current_month;
        }
        //***
        $data['week_days_names'] = $this->get_week_days_names(true);
        $data['cells'] = $this->generate_calendar_cells($y, $m);
        $data['month_name'] = $this->get_month_name($m);
        $data['year'] = $y;
        $data['month'] = $m;
        return $this->draw_html('calendar', $data);
    }

    private function generate_calendar_cells($y, $m) {
        $y = intval($y);
        $m = intval($m);
        //***
        $first_week_day_in_month = date('w', mktime(0, 0, 0, $m, 1, $y)); //from 0 (sunday) to 6 (saturday)
        $days_count = $this->get_days_count_in_month($y, $m);
        $cells = array();
        //***
        if ($this->first_day_of_week == $first_week_day_in_month) {
            for ($d = 1; $d <= $days_count; $d++) {
                $cells[] = new PN_CalendarCell($y, $m, $d);
            }
            //***
            $cal_cells_left = 5 * 7 - $days_count;
            $next_month_data = $this->get_next_month($y, $m);
            for ($d = 1; $d <= $cal_cells_left; $d++) {
                $cells[] = new PN_CalendarCell($next_month_data['y'], $next_month_data['m'], $d, false);
            }
        } else {
            //***
            if ($this->first_day_of_week == 0) {
                $cal_cells_prev = 6 - (7 - $first_week_day_in_month); //checked, is right
            } else {
                if ($first_week_day_in_month == 1) {
                    $cal_cells_prev = 0;
                } else {
                    if ($first_week_day_in_month == 0) {
                        $cal_cells_prev = 6 - 1;
                    } else {
                        $cal_cells_prev = 6 - (7 - $first_week_day_in_month) - 1;
                    }
                }
            }
            //***
            $prev_month_data = $this->get_prev_month($y, $m);
            $prev_month_days_count = $this->get_days_count_in_month($prev_month_data['y'], $prev_month_data['m']);

            for ($d = $prev_month_days_count - $cal_cells_prev; $d <= $prev_month_days_count; $d++) {
                $cells[] = new PN_CalendarCell($prev_month_data['y'], $prev_month_data['m'], $d, false);
            }

            //***
            for ($d = 1; $d <= $days_count; $d++) {
                $cells[] = new PN_CalendarCell($y, $m, $d);
            }
            //***
            //35(7*5) or 42(7*6) cells
            $busy_cells = $cal_cells_prev + $days_count;
            $cal_cells_left = 0;
            if ($busy_cells < 35) {
                $cal_cells_left = 35 - $busy_cells - 1;
            } else {
                $cal_cells_left = 42 - $busy_cells - 1;
            }
            //***
            if ($cal_cells_left > 0) {
                $next_month_data = $this->get_next_month($y, $m);
                for ($d = 1; $d <= $cal_cells_left; $d++) {
                    $cells[] = new PN_CalendarCell($next_month_data['y'], $next_month_data['m'], $d, false);
                }
            }
        }
        //***
        return $cells;
    }

    public function get_next_month($y, $m) {
        $y = intval($y);
        $m = intval($m);

        //***
        $m++;
        if ($m % 13 == 0 OR $m > 12) {
            $y++;
            $m = 1;
        }

        return array('y' => $y, 'm' => $m);
    }

    public function get_prev_month($y, $m) {
        $y = intval($y);
        $m = intval($m);

        //***
        $m--;
        if ($m <= 0) {
            $y--;
            $m = 12;
        }

        return array('y' => $y, 'm' => $m);
    }

    public function get_days_count_in_month($year, $month) {
        return $month == 2 ? ($year % 4 ? 28 : ($year % 100 ? 29 : ($year % 400 ? 28 : 29))) : (($month - 1) % 7 % 2 ? 30 : 31);
    }

    public static function get_month_name($m) {
        $names = self::get_monthes_names();
        return $names[intval($m)];
    }

    public function get_week_day_name($num, $shortly = false) {
        $names = $this->get_week_days_names($shortly);
        return $names[intval($num)];
    }

    public function get_week_days_names($shortly = false) {
        if ($this->first_day_of_week == 1) {
            if ($shortly) {
                return array(
                    1 => 'Mo',
                    2 => 'Tu',
                    3 => 'We',
                    4 => 'Th',
                    5 => 'Fr',
                    6 => 'Sa',
                    7 => 'Su'
                );
            }

            return array(
                1 => 'Monday',
                2 => 'Tuesday',
                3 => 'Wednesday',
                4 => 'Thursday',
                5 => 'Friday',
                6 => 'Saturday',
                7 => 'Sunday'
            );
        } else {
            if ($shortly) {
                return array(
                    0 => 'Su',
                    1 => 'Mo',
                    2 => 'Tu',
                    3 => 'We',
                    4 => 'Th',
                    5 => 'Fr',
                    6 => 'Sa'
                );
            }

            return array(
                0 => 'Sunday',
                1 => 'Monday',
                2 => 'Tuesday',
                3 => 'Wednesday',
                4 => 'Thursday',
                5 => 'Friday',
                6 => 'Saturday'
            );
        }
    }

    public static function get_monthes_names() {
        return array(
            1 => 'January',
            2 => 'February',
            3 => 'March',
            4 => 'April',
            5 => 'May',
            6 => 'June',
            7 => 'July',
            8 => 'August',
            9 => 'September',
            10 => 'October',
            11 => 'November',
            12 => 'December'
        );
    }

    public function draw_html($view, $data = array()) {
        @extract($data);
        ob_start();
        include('views/' . $view . '.php' );
        return ob_get_clean();
    }

    }

class PN_CalendarCell {

    public $cell_year = null;
    public $cell_month = null;
    public $cell_day = null;
    public $in_current_month = true;

    public function __construct($y, $m, $d, $in_current_month = true) {
        $this->cell_year = $y;
        $this->cell_month = $m;
        $this->cell_day = $d;
        $this->in_current_month = $in_current_month;
    }

    public function get_week_day_num() {
        return date('w', mktime(0, 0, 0, $this->cell_month, $this->cell_day, $this->cell_year)); //from 0 (sunday) to 6 (saturday);
    }

    public function draw($events) {
        $this_day_events = 0;
        if (is_array($events)) {
            if (isset($events[$this->cell_year][$this->cell_month][$this->cell_day])) {
                $this_day_events = count($events[$this->cell_year][$this->cell_month][$this->cell_day]);
            }
        } else {
            $events = array();
        }
        ?>

        <span class="pn_cal_cell_ev_counter" <?php if ($this_day_events <= 0): ?>style="display: none;"<?php endif; ?>><?php echo $this_day_events ?></span>
        <a data-year="<?php echo $this->cell_year ?>" data-month="<?php echo $this->cell_month ?>" data-day="<?php echo $this->cell_day ?>" data-week-day-num="<?php echo $this->get_week_day_num() ?>" href="javascript:void(0);" class="<?php if ($this->in_current_month): ?>pn_this_month<?php else: ?>other_month<?php endif; ?>"><?php echo $this->cell_day ?></a>
    }

} 
```

脚本调用：

```
<?php
   include_once 'classes/calendar.php';
   $calendar = new PN_Calendar();
   echo $calendar->draw();
?> 
```

**下载带有演示的脚本**：http : [//pluginus.net/archives/simple-free-open-source-ajax-php-calendar-script](http://pluginus.net/archives/simple-free-open-source-ajax-php-calendar-script)

**演示**：[http ://demo.pluginus.net/calendar/](http://demo.pluginus.net/calendar/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-11T22:01:35.030

我也在寻找一个简单的解决方案，一个 PHP 类，它为我提供了一个月历，我可以在其中轻松添加事件。

我找到了这个 PHP 日历[http://coreyworrell.com/calendar/](http://coreyworrell.com/calendar/)

您仍然必须在 html 中创建视图/模板，但您可以在那里找到可以使用的 CSS 和 HTML 版本。

它在 PHP 中也有自定义事件

```
$event = $calendar->event()
  ->condition('timestamp', strtotime('January 2, 2010'))
  ->title('Hello All')
  ->output('My Custom Event')
  ->add_class('custom-event-class'); 
```

# functional-programming - OCaml - 与元组中的列表引用进行模式匹配

> ID：10309095
> 
> 赞同：11
> 
> 时间：2012-04-25T03:47:36.080
> 
> 标签：functional-programming, pattern-matching, ocaml, ml

有更清洁的方法吗？我正在尝试对 a 进行模式匹配

`(a' option * (char * nodeType) list ref`

我发现的唯一方法是这样做：

```
match a with
| _, l -> match !l with
  | (c, n)::t -> doSomething 
```

难道没有办法`a`与其他东西相匹配......

```
match a with
| _, ref (c,n)::t -> doSomething 
```

...或类似的东西？在这个例子中，只做另一场比赛看起来并不重，但在实际情况下，它可能有点......

感谢您的回答。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T03:59:35.350

该`ref`类型被定义为具有可变字段的记录：

```
type 'a ref = {
    mutable contents : 'a;
} 
```

这意味着您可以使用如下记录语法对其进行模式匹配：

```
match a with
| _, { contents = (c,n)::t } -> doSomething 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-25T03:59:45.627

在 OCaml 中，a`ref`是一个秘密记录，带有一个名为 的可变字段`contents`。

```
match a with
| _, { contents = (c, n) :: t } -> (* Do something *) 
```

# linq-to-sql - 使用 Single() 时，Linq2Sql 生成的 sql 是否包含 Top？

> ID：10309100
> 
> 赞同：1
> 
> 时间：2012-04-25T03:48:03.720
> 
> 标签：linq-to-sql, c#-4.0, entity-framework-4

当我执行 Linq2Sql 查询时

```
db.Items.Single(it => it.Id == 1) 
```

有人坚持认为生成的sql就像

```
select TOP (2) [t0].Id, [t0].Name
from [dbo].[SomeTable] as [t0]
where [t0].Id = @p0 
```

但是我从 Sql Server Profiler（和 Linqpad 的 sql 窗口和 VS IntelliTrace 窗口）得到的结果表明 sql 不包含任何 TOP，只是简单的

```
select [t0].Id, [t0].Name
from [dbo].[SomeTable] as [t0]
where [t0].Id = @p0 
```

重要的是Linq版本吗？我正在使用 .Net 框架 4.0，并引用了 System.Data.Linq dll 的 4.0 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:10:31.830

第一个查询由使用 TOP(2) 的实体框架生成，但第二个查询由不使用 TOP(2) 的 Linq-to-Sql 生成，而是在结果集包含多个记录时检查读取逻辑（并在这种情况下中止阅读）。

# c - 两个日期之间的 C 程序天数

> ID：10309107
> 
> 赞同：7
> 
> 时间：2012-04-25T03:48:48.887
> 
> 标签：c

我写了一个程序，*应该*找到两个日期之间的天数，但它有一些小问题。当我通读它时，这个逻辑在我的脑海中非常有意义，所以我假设我有一些语法错误，我一直在看或者其他什么。

首先，当输入不同年份的两个日期时，输出总是关闭大约一个月（大多数情况下为 31，但在一种情况下为 32……看图）。其次，两个恰好相隔一个月的日期将返回第二个月的天数（即 1/1/1 到 2/1/1 产生 28）。该程序不可避免地会发生其他一些奇怪的事情，但我希望这些信息足以帮助你们找出我做错了什么。对于我的一生，我无法独自解决这个问题。我对C比较陌生，所以请温柔=）

谢谢

```
// Calculates the number of calendar days between any two dates in history (beginning with 1/1/1).

#include <stdio.h>
#include <stdlib.h>

void leap(int year1, int year2, int *leap1, int *leap2);
void date(int *month1, int *day1, int *year1, int *month2, int *day2, int *year2, int *leap1, int *leap2);

int main(void)
{
        int month1, day1, year1, month2, day2, year2, leap1, leap2;
        int daysPerMonth[] = {31,28,31,30,31,30,31,31,30,31,30,31};
        int daysPerMonthLeap[] = {31,29,31,30,31,30,31,31,30,31,30,31};

        leap(year1, year2, &leap1, &leap2);
        date(&month1, &day1, &year1, &month2, &day2, &year2, &leap1, &leap2);

        if(year1 == year2)
        {
                int i, total;

                if(month1 == month2)                            // Total days if month1 == month2
                {
                        total = day2 - day1;
                        printf("There are %d days between the two dates.", total);
                }
                else
                {
                    if(leap1 == 1)
                        total = daysPerMonthLeap[month1] - day1;
                    else
                        total = daysPerMonth[month1] - day1;

                    for(i = month1 + 1; i < month2; i++)        // Days remaining between dates (excluding last month)
                    {
                        if(leap1 == 1)
                            total += daysPerMonthLeap[i];
                        else
                            total += daysPerMonth[i];
                    }

                    total += day2;                              // Final sum of days between dates (including last month)

                    printf("There are %d days between the two dates.", total);
                }
        }
        else                                                    // If year1 != year2 ...
        {
                int i, total, century1 = ((year1 / 100) + 1) * 100, falseleap = 0;

                if(leap1 == 1)
                    total = daysPerMonthLeap[month1] - day1;
                else
                    total = daysPerMonth[month1] - day1;

                for(i = month1 + 1; i <= 12; i++)               // Day remaining in first year
                {
                    if(leap1 == 1)
                        total += daysPerMonthLeap[i];
                    else
                        total += daysPerMonth[i];
                }

                for(i = 1; i < month2; i++)                     // Days remaining in final year (excluding last month)
                {
                    if(leap2 == 1)
                        total += daysPerMonthLeap[i];
                    else
                        total += daysPerMonth[i];
                }

                int leapcount1 = year1 / 4;                     // Leap years prior to and including first year
                int leapcount2 = year2 / 4;                     // Leap years prior to and NOT including final year
                if(year2 % 4 == 0)
                        leapcount2 -= 1;

                int leaptotal = leapcount2 - leapcount1;        // Leap years between dates

                for(i = century1; i < year2; i += 100)          // "False" leap years (divisible by 100 but not 400)
                {
                        if((i % 400) != 0)
                                falseleap += 1;
                }

                total += 365 * (year2 - year1 - 1) + day2 + leaptotal - falseleap;      // Final calculation
                printf("There are %d days between the two dates.", total);
        }
        return 0;
}

void leap(int year1, int year2, int *leap1, int *leap2)             // Determines if first and final years are leap years
{
        if(year1 % 4 == 0)
        {
                if(year1 % 100 == 0)
                {
                        if(year1 % 400 == 0)
                                *leap1 = 1;
                        else
                                *leap1 = 0;
                }
                else
                        *leap1 = 1;
        }
        else
                *leap1 = 0;

        if(year2 % 4 == 0)
        {
                if(year2 % 100 == 0)
                {
                        if(year2 % 400 == 0)
                                *leap2 = 1;
                        else
                                *leap2 = 0;
                                }
                else
                        *leap2 = 1;
        }
        else
                *leap2 = 0;
}

void date(int *month1, int *day1, int *year1, int *month2, int *day2, int *year2, int *leap1, int *leap2)
{
        for(;;)                     // Infinite loop (exited upon valid input)
        {
                int fail = 0;
                printf("\nEnter first date: ");
                scanf("%d/%d/%d", month1, day1, year1);
                if(*month1 < 1 || *month1 > 12)
                {
                        printf("Invalid entry for month.\n");
                        fail += 1;
                }
                if(*day1 < 1 || *day1 > 31)
                {
                        printf("Invalid entry for day.\n");
                        fail += 1;
                }
                if(*year1 < 1)
                {
                        printf("Invalid entry for year.\n");
                        fail += 1;
                }
                if(daysPerMonth[month1] == 30 && *day1 > 30)
                {
                        printf("Invalid month and day combination.\n");
                        fail += 1;
                }
                if(*month1 == 2)
                {
                        if(*leap1 == 1 && *day1 > 29)
                        {
                            printf("Invalid month and day combination.\n");
                            fail += 1;
                        }
                        else if(*day1 > 28)
                        {
                            printf("Invalid month and day combination.\n");
                            fail += 1;
                        }
                }
                if(fail > 0)
                        continue;
                else
                        break;
        }

        for(;;)
        {
                int fail = 0;
                printf("\nEnter second date: ");
                scanf("%d/%d/%d", month2, day2, year2);
                if(*year1 == *year2)
                {
                        if(*month1 > *month2)
                        {
                                printf("Invalid entry.\n");
                                fail += 1;
                        }
                        if(*month1 == *month2 && *day1 > *day2)
                        {
                                printf("Invalid entry.\n");
                                fail += 1;
                        }
                }
                if(*month2 < 1 || *month2 > 12)
                {
                        printf("Invalid entry for month.\n");
                        fail += 1;
                }
                if(*day2 < 1 || *day2 > 31)
                {
                        printf("Invalid entry for day.\n");
                        fail += 1;
                }
                if(*year2 < 1)
                {
                        printf("Invalid entry for year.\n");
                        fail += 1;
                }
                if(daysPerMonth[month2] == 30 && *day2 > 30)
                {
                        printf("Invalid month and day combination.\n");
                        fail += 1;
                }
                if(*month2 == 2)
                {
                        if(*leap2 == 1 && *day2 > 29)
                        {
                            printf("Invalid month and day combination.\n");
                            fail += 1;
                        }
                        else if(*day2 > 28)
                        {
                            printf("Invalid month and day combination.\n");
                            fail += 1;
                        }
                }
                if(fail > 0)
                        continue;
                else
                        break;
        }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T04:12:06.203

首先，该`leap`功能感觉过于复杂；您不需要在一个函数调用中同时执行两个日期，我相信可以更简洁地编写它，以便它更明显正确。这是我所使用的一个不*简洁*的版本，但我相信很容易检查逻辑：

```
int is_leap_year(int year) {
        if (year % 400 == 0) {
                return 1;
        } else if (year % 100 == 0) {
                return 0;
        } else if (year % 4 == 0) {
                return 1;
        } else {
                return 0;
        }
} 
```

你可以这样称呼它：

```
int year1, year2, leap1, leap2;
year1 = get_input();
year2 = get_input();
leap1 = is_leap_year(year1);
leap2 = is_leap_year(year2); 
```

没有指针，代码重复也大大减少。是的，我知道这`is_leap_year()`可以简化为一个`if(...)`语句，但这对我来说很容易阅读。

其次，我认为您在 0 索引数组和 1 索引人类月份之间存在不匹配：

```
 if(*month1 < 1 || *month1 > 12) 
```

对比

```
 int daysPerMonth[] = {31,28,31,30,31,30,31,31,30,31,30,31}; 
```

第三，我认为每月的天数可以计算得更好一些：

```
int days_in_month(int month, int year) {
        int leap = is_leap_year(year);
        /*               J   F   M   A   M   J   J   A   S   O   N   D */
        int days[2][12] = {{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31},
                           {31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31}};
        if (month < 0 || month > 11 || year < 1753)
                return -1;

        return days[leap][month];
} 
```

在这里，我假设一月是 0；您需要强制其余代码匹配。（我从[The Elements of Programming Style](http://en.wikipedia.org/wiki/The_Elements_of_Programming_Style)（[第 54 页](http://books.google.com/books?ei=jzeXT--_OYeYiAKJjuX6Dw&id=-_QmAAAAMAAJ&dq=%22the+elements+of+programming+style%22&q=leap+year#search_anchor)）中学到了这个双数组技巧。）使用这样的例程最好的部分是它从差异计算中删除了跳跃条件。

第四，您正在索引超出其范围的数组：

```
 for(i = month1 + 1; i <= 12; i++)
            {
                if(leap1 == 1)
                    total += daysPerMonthLeap[i]; 
```

这只是 0 索引数组和 1 索引月份问题的另一个实例——但请确保在修复月份时也修复此问题*。*

我担心我还没有找到所有的问题——你可能会发现在输入后对第一个和第二个日期进行*排序*并删除所有验证码更容易——然后使用名称`before`和`after`/或其他东西来命名在计算的复杂核心中更容易思考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T04:19:26.497

这不是一个完整的答案。我只是想提一个更好的方法来计算闰年（这取自`The C Programming Language`- 第 41 页）

```
if ((year % 4 == 0 && year % 100 != 0) || year % 400 ==0)
    printf("%d is a leap year \n", year);
else
    printf("%d is not a leap year \n", year); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T04:09:53.963

将所有月份索引减 1。

我的意思是一月将对应`daysPerMonth[0]`or`daysPerMonthLeap[0]`而不是`daysPerMonth[1]`or `daysPerMonthLeap[1]`。这是数组索引的原因是从 0 开始的。

所以，无论你在哪里使用`month1`，`month2`在`daysPerMonth[]`or`daysPerMonthLeap[]`中，使用`month1-1`and`month2-1`代替。

我希望这足够清楚。否则，请随时发表评论。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T04:34:01.670

改变

```
int daysPerMonth[] = {31,28,31,30,31,30,31,31,30,31,30,31};
int daysPerMonthLeap[] = {31,29,31,30,31,30,31,31,30,31,30,31}; 
```

至

```
int daysPerMonth[] = {0,31,28,31,30,31,30,31,31,30,31,30,31};
int daysPerMonthLeap[] = {0,31,29,31,30,31,30,31,31,30,31,30,31}; 
```

即在开头填充数组，因为所有代码都依赖于数组值从元素1而不是元素0开始。

这将摆脱您抱怨的错误。

`day2`另一个问题是当您添加到总数时出现一个错误。在这两种情况下，您都应该添加`day2 - 1`而不是`day2`. 这也是由于日期索引从 1 而不是 0 开始的。

在我进行了这些更改（加上一些只是为了编译代码）之后，它可以正常工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-25T06:25:09.680

您的代码片段中有多个问题..但我必须说这是一个非常好的尝试。您尝试实现的目标有很多捷径。

我编写了以下程序，该程序查找两个给定日期之间的天数。您可以将此作为参考。

```
#include <stdio.h>
#include <stdlib.h>

char *month[13] = {"None", "Jan", "Feb", "Mar", 
                   "Apr", "May", "June", "July", 
                   "Aug", "Sept", "Oct", 
                   "Nov", "Dec"};

/*
daysPerMonth[0] = non leap year
daysPerMonth[1] = leap year
*/
int daysPerMonth[2][13] = {{-1, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31},
                           {-1, 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31}};

typedef struct _d {
    int day;        /* 1 to 31 */
    int month;      /* 1 to 12 */
    int year;       /* any */
}dt;

void print_dt(dt d)
{
    printf("%d %s %d \n", d.day, month[d.month], d.year);
    return;
}

int leap(int year)
{
    return ((year % 4 == 0 && year % 100 != 0) || year % 400 ==0) ? 1 : 0;
}

int minus(dt d1, dt d2)
{
    int d1_l = leap(d1.year), d2_l = leap(d2.year);
    int y, m;
    int total_days = 0;

    for (y = d1.year; y >= d2.year ; y--) {
        if (y == d1.year) {
            for (m = d1.month ; m >= 1 ; m--) {
                if (m == d1.month)  total_days += d1.day;
                else                total_days += daysPerMonth[leap(y)][m];
                // printf("%d - %5s - %d - %d \n", y, month[m], daysPerMonth[leap(y)][m], total_days);
            }
        } else if (y == d2.year) {
            for (m = 12 ; m >= d2.month ; m--) {
                if (m == d2.month)  total_days += daysPerMonth[leap(y)][m] - d2.day;
                else                total_days += daysPerMonth[leap(y)][m];
                // printf("%d - %5s - %d - %d \n", y, month[m], daysPerMonth[leap(y)][m], total_days);
            }
        } else {
            for (m = 12 ; m >= 1 ; m--) {
                total_days += daysPerMonth[leap(y)][m];
                // printf("%d - %5s - %d - %d \n", y, month[m], daysPerMonth[leap(y)][m], total_days);
            }
        }

    }

    return total_days;
}

int main(void)
{
    /* 28 Oct 2018 */
    dt d2 = {28, 10, 2018};

    /* 30 June 2006 */
    dt d1 = {30, 6, 2006};

    int days; 

    int d1_pt = 0, d2_pt = 0;

    if (d1.year  > d2.year)     d1_pt += 100;
    else                        d2_pt += 100;
    if (d1.month > d2.month)    d1_pt += 10;
    else                        d2_pt += 10;
    if (d1.day   > d2.day)      d1_pt += 1;
    else                        d2_pt += 1;

    days = (d1_pt > d2_pt) ? minus(d1, d2) : minus(d2, d1);

    print_dt(d1);
    print_dt(d2);
    printf("number of days: %d \n", days);

    return 0;
} 
```

输出如下：

```
$ gcc dates.c 
$ ./a.out 
30 June 2006 
28 Oct 2018 
number of days: 4503 
$ 
```

注意：这不是一个完整的程序。它缺乏输入验证。

希望能帮助到你！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-07T04:44:18.230

```
//Difference/Duration between two dates
//No need to calculate leap year offset or anything
// Author: Vinay Kaple
# include <iostream>
using namespace std;
int main(int argc, char const *argv[])
{
    int days_add, days_sub, c_date, c_month, b_date, b_month, c_year, b_year;
    cout<<"Current Date(dd mm yyyy): ";
    cin>>c_date>>c_month>>c_year;
    cout<<"Birth Date(dd mm yyyy): ";
    cin>>b_date>>b_month>>b_year;
    int offset_month[12] = {0,31,59,90,120,151,181,212,243,273,304,334};
    days_add = c_date + offset_month[c_month-1];
    days_sub = b_date + offset_month[b_month-1];
    int total_days = (c_year-b_year)*365.2422 + days_add - days_sub+1;
    cout<<"Total days: "<<total_days<<"\n";
    int total_seconds = total_days*24*60*60;
    cout<<"Total seconds: "<<total_seconds<<"\n";
    return 0;
} 
```

# java - “无法在 [path] 处初始化 App Engine SDK”是什么意思，如何解决？

> ID：10309109
> 
> 赞同：6
> 
> 时间：2012-04-25T03:49:03.563
> 
> 标签：java, eclipse, google-app-engine

我正在使用“Google Plugin for Eclipse”，并同时安装了“Web Toolkit SDK”和“App Engine Java SDK”。奇怪的是，当 Web Toolkit SDK 工作正常时，App Engine SDK 无法初始化。尝试将 Eclipse 指向 GAE SDK 根目录将导致“无法在 [path] 处初始化 App Engine SDK”错误。单独下载 GAE SDK 将产生相同的结果。

我猜这个错误是由版本问题引起的？这是设置：

*   Eclipse 3.7 靛蓝
*   Eclipse 3.7 的谷歌插件
*   appengine-java-sdk-1.6.4，appengine-java-sdk-1.6.5（手动下载）
*   Java JVM 1.6
*   Mac OSX 10.5, 32 位

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T03:28:12.790

如上所述，检查已安装的 java sdks 和 java Jre 的版本。我遇到了同样的错误。

我有 jdk1.7.0_45.jdk 和匹配的 JRE 即 jre-7u45，然后在 eclipse->preference->java 中设置它们的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T20:57:12.533

检查您使用的 Java 版本。

例如，如果您的系统上有一个比最新版本更旧的默认 Java 版本，无论 Eclipse 使用什么作为运行时或项目 JDK，SDK 都可能会尝试使用您操作系统上的默认 JDK 进行初始化。

对我来说，问题是我的默认 JDK 是 Java 6，而 GAE 目前还没有被编译为支持低于 Java 7 的任何东西。

# emacs - emacs中框架和窗口之间的差异

> ID：10309112
> 
> 赞同：11
> 
> 时间：2012-04-25T03:49:15.407
> 
> 标签：emacs

我刚开始使用EMACS，太棒了。

所以我有这个问题，窗户和框架有什么区别？

我的理解是：

1.  您可以按“q”退出框架而不是窗口。
2.  框架由一系列窗口组成
3.  frame 将包含所有缓冲区的子集。
4.  框架更像是项目的概念，而窗口是每个文件的概念。

3 和 4 似乎不正确，因为当我尝试在帧之间跳转时，我仍然看到所有缓冲区。

那么我的理解正确吗？或者我没有以正确的方式做这件事？

EMACS 是否有类似项目的功能来将缓冲区组织到不同的项目中，这样当我在缓冲区之间跳转时，我只看到缓冲区本地化到该项目？

**有人可以多谈谈EMAC中与框架和窗口相关的项目概念吗？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-25T05:37:24.783

这有点令人困惑，但这都是历史造成的。Emacs 最早是在[文本终端](http://en.wikipedia.org/wiki/Computer_terminal)时代创建的，那时 GUI 还很普遍。您所拥有的只是等宽文本行，通常大约 80 列乘 24 行。Emacs 能够将屏幕分割成多个窗口，因此您可以一次看到多个文件。

然后图形终端和图形用户界面出现了，“窗口”开始意味着图形用户界面的种类。但是 Emacs 有几十个函数和变量，它们的名字中都带有“window”，它们处理了它的分屏类型的窗口。重命名这些函数会破坏所有使用它们的 Emacs Lisp 代码。因此，当 Emacs 获得 GUI 界面时，其设计者决定更容易想出一个新术语来表示“GUI 窗口”，而将“窗口”保留为“旧式 Emacs 窗口”。他们提出的新术语是“框架”（因为框架是围绕窗户的东西）。

因此，当 Emacs 谈到“框架”时，它的含义与其他程序称为“窗口”的含义相同。在 Emacs 中，框架基本上是一个终端仿真器，可以根据需要调整大小。每个框架的行为都非常像在文本终端中运行的 Emacs；框架可以包含一个或多个旧式 Emacs 窗口。

但是，单个 Emacs 进程的所有帧都是链接的。任何缓冲区都可以显示在任何帧的任何窗口中，并且您可以同时在多个窗口和/或帧中显示相同的缓冲区。

[您可以在 Emacs 手册的“框架”一章中](http://www.gnu.org/software/emacs/manual/html_node/emacs/Frames.html)找到更多详细信息。

So your (3) is not correct; every buffer is available in every frame. (4) is not really correct either; it's up to you how many frames and/or windows you want to use. Personally, I normally use 1 frame with 1 or 2 windows. I occasionally use a second frame if I want more space to display one file while working on 1 or 2 other files.

# c - malloc.c:2453 中的断言

> ID：10309113
> 
> 赞同：1
> 
> 时间：2012-04-25T03:50:11.393
> 
> 标签：c, arrays, malloc

我有以下程序尝试对字符串进行标记（基于空格）并将其写入 char ** 数组。

```
#include <stdio.h>
#include <stdlib.h>

#define len 180

void tokenize(char *str, char **tokens)
{
    int l = 0, index = 0;
    int i = 0;
    int str_i;
    int tok_i;

    while(*str) {
        if (*str == ' ') {
            tokens[i] = malloc(sizeof(char) * l+1);
            if (tokens[i] == NULL) return;

            tok_i = 0;           
            for (str_i=index-len ; str_i<index ; str_i++) {
                tokens[i][tok_i] = str[str_i];
                tok_i++;
            }

            tokens[i][tok_i] = '\0';
            tokens[i++] = NULL;
            l = 0;
            index++;
        }
        str++;
        l++;
        index++;
    }       

    return;         
}

int main()
{
    char str[len] = "this is a test string";
    char **tokens = malloc(100 * sizeof(char *));

    if (str == NULL || tokens == NULL)
        return 1;

    printf("input string: %s\n", str);
    tokenize(str, tokens);

    return 0;
} 
```

上面的程序编译得很好，但是在执行时，我得到了以下断言`malloc.c`

```
$ gcc -ggdb -Wall prog.c 
$ ./a.out 
input string: this is a test string
a.out: malloc.c:2453: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed.
Aborted (core dumped)
$ 
```

堆栈跟踪显示以下内容：

```
(gdb) bt
#0  0x0000003b28036285 in raise () from /lib64/libc.so.6
#1  0x0000003b28037b9b in abort () from /lib64/libc.so.6
#2  0x0000003b2807d37d in __malloc_assert () from /lib64/libc.so.6
#3  0x0000003b28080c37 in _int_malloc () from /lib64/libc.so.6
#4  0x0000003b28082595 in malloc () from /lib64/libc.so.6
#5  0x000000000040055f in tokenize (str=0x7fffffffe017 " a test string", tokens=0x601010) at prog.c:15
#6  0x00000000004006de in main () at prog.c:46
(gdb) 
```

我该如何调试？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T03:59:29.013

> ```
> for (str_i=index-len ; str_i<index ; str_i++) {
>         tokens[i][tok_i] = str[str_i];
>         tok_i++;
> }
> 
> tokens[i][tok_i] = '\0'; 
> ```

其中至少有一个**在分配的内存之外，**`tokens[i][tok_i]`因此您最终会破坏的内部信息。之后，[欢闹接踵而至](http://en.wikipedia.org/wiki/Undefined_behavior)。**`malloc`**

 **`str_i`初始化也很有趣，因为第一次迭代将是 -180 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T04:02:36.677

在你的 for 循环中

```
for (str_i=index-len ; str_i<index ; str_i++) 
```

str_i 是一个负数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T04:09:36.330

是的，在@cnicutar 和@spicavigo 的建议下，我将代码更改如下，它工作正常。

```
#include <stdio.h>
#include <stdlib.h>

#define str_len 180

void tokenize(char *str, char **tokens)
{
    int length = 0, index = 0;
    int i = 0;
    int str_i;
    int tok_i;

    while(str[length]) {
        if (str[length] == ' ') {
            /* this charecter is a space, so skip it! */
            length++;
            index++;

            tokens[i] = malloc(sizeof(char) * (index+1));

            tok_i = 0;           
            for (str_i=length-index ; str_i<length; str_i++) {
                tokens[i][tok_i] = str[str_i];
                tok_i++;
            }

            tokens[i][tok_i] = '\0';
            i++;
            index = 0;
        }
        length++;
        index++;
    }       

    /* copy the last word in the string */
    tokens[i] = malloc(sizeof(char) * index);
    tok_i = 0;           
    for (str_i=length-index ; str_i<length; str_i++) {
        tokens[i][tok_i] = str[str_i];
        tok_i++;
    }
    tokens[i][tok_i] = '\0';
    tokens[i++] = NULL;

    return;         
}

int main()
{
    char *str = malloc(str_len * sizeof(char));
    char **tokens = malloc(100 * sizeof(char *));
    int i = 0;

    if (str == NULL || tokens == NULL)
        return 1;

    gets(str);
    printf("input string: %s\n", str);
    tokenize(str, tokens);

    while(tokens[i] != NULL) {
        printf("%d - %s \n", i, tokens[i]);
        i++;
    }

    while(tokens[i])
        free(tokens[i]);
    free(tokens);
    free(str);

    return 0;
} 
```**

# regex - 拆分字符串中的第一个逗号

> ID：10309122
> 
> 赞同：10
> 
> 时间：2012-04-25T03:51:03.700
> 
> 标签：regex, r

如何使用 base 在第一个逗号上有效地拆分以下字符串？

```
x <- "I want to split here, though I don't want to split elsewhere, even here."
strsplit(x, ???) 
```

期望的结果（2 个字符串）：

```
[[1]]
[1] "I want to split here"   "though I don't want to split elsewhere, even here." 
```

先感谢您。

编辑：没想到要提这个。这需要能够推广到一列，这样的字符串向量，如：

```
y <- c("Here's comma 1, and 2, see?", "Here's 2nd sting, like it, not a lot.") 
```

结果可以是两列或一个长向量（我可以取每个其他元素）或每个索引（[[n]]）有两个字符串的字符串列表。

对缺乏明确性表示歉意。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T04:23:39.543

这就是我可能会做的。它可能看起来很老套，但由于`sub()`和`strsplit()`都是矢量化的，因此在处理多个字符串时它也可以顺利工作。

```
XX <- "SoMeThInGrIdIcUlOuS"
strsplit(sub(",\\s*", XX, x), XX)
# [[1]]
# [1] "I want to split here"                               
# [2] "though I don't want to split elsewhere, even here." 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-25T04:40:30.797

从`stringr`包装：

```
str_split_fixed(x, pattern = ', ', n = 2)
#      [,1]                  
# [1,] "I want to split here"
#      [,2]                                                
# [1,] "though I don't want to split elsewhere, even here." 
```

（这是一个一行两列的矩阵。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T13:52:02.503

这是另一种解决方案，使用正则表达式来捕获第一个逗号之前和之后的内容。

```
x <- "I want to split here, though I don't want to split elsewhere, even here."
library(stringr)
str_match(x, "^(.*?),\\s*(.*)")[,-1] 
# [1] "I want to split here"                              
# [2] "though I don't want to split elsewhere, even here." 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-25T04:06:36.353

`library(stringr)`

`str_sub(x,end = min(str_locate(string=x, ',')-1))`

这将得到你想要的第一个位。改变`start=`和`end=`获得`str_sub`你想要的任何东西。

如：

`str_sub(x,start = min(str_locate(string=x, ',')+1 ))`

并换`str_trim`行以摆脱领先空间：

`str_trim(str_sub(x,start = min(str_locate(string=x, ',')+1 )))`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-25T04:30:02.870

这行得通，但我更喜欢 Josh Obrien：

```
y <- strsplit(x, ",")
sapply(y, function(x) data.frame(x= x[1], 
    z=paste(x[-1], collapse=",")), simplify=F)) 
```

受到追逐的回应的启发。

许多人给出了非基本方法，所以我想我会添加我通常使用的方法（尽管在这种情况下我需要一个基本响应）：

```
y <- c("Here's comma 1, and 2, see?", "Here's 2nd sting, like it, not a lot.")
library(reshape2)
colsplit(y, ",", c("x","z")) 
```

# javascript - 使用 jQuery 显示警告

> ID：10309128
> 
> 赞同：3
> 
> 时间：2012-04-25T03:52:05.003
> 
> 标签：javascript, jquery, forms, validation, form-submit

我正在做一些[jQuery](http://jquery.com/)表单验证，但我遇到了一个问题。到目前为止，我有以下代码：

```
// catch any form submission
$('form').submit(function () {
    'use strict';
    // if the browser doesn't support HTML5's required attribute
    if (!Modernizr.input.required) {
        // catch any field that should be required
        $(this).find('input[required]').each(function () {
            // if is empty
            if ($(this).val() === '') {
                // create a span that contains a warning to the user
                var requiredFieldWarning = document.createElement('span');
                requiredFieldWarning.text = 'This field is required.';

                // display the span next to the current field
            }
        });
    }
}); 
```

我正在尝试在`span`未验证的提交表单的任何输入旁边“附加”或显示一个，但我不知道如何。我想不显眼地做到这一点，这就是我`span`在 JavaScript 中创建上述内容的原因。

另外，如果提交的表单的任何字段未验证，我如何防止表单被提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:56:02.967

为什么要重新发明轮子？你应该使用[jquery表单验证](http://docs.jquery.com/Plugins/Validation)插件..

**编辑**：添加代码以防止提交无效表单。

回答你的问题：

```
$('form').submit(function (e) {
    'use strict';
    var valid = true;
    var $form = $(this);
    $form.find("span.error").remove();
    // if the browser doesn't support HTML5's required attribute
    if (!Modernizr.input.required) {
        // catch any field that should be required
        $form.find(':input[required]').each(function () {
            // if is empty
            var $this = $(this);
            if ($.trim($this.val()) === '') {
                // create a span that contains a warning to the user
               $this.after("<span class='error'>This field is required.</span>");
               valid = false;
            }
        });
    }
    if(!valid){
       e.preventDefault();
    }
}); 
```

这是一个较短的版本：

```
$('form').submit(function (e) {
   'use strict';
    Modernizr.input.required ? e[$(this).find("span.error").remove().end()
        .find(':input[required][value=""]')
        .after("<span class='error'>This field is required.</span>")
        .length ? 'preventDefault': 'isDefaultPrevented']() : null;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:58:08.217

我在输入后添加了一个跨度标签。在重新验证表单之前，它会删除这些跨度并仅在需要时重新创建。如果添加了这些跨度中的任何一个，则不会提交表单。

```
$('form').submit(function (event) {
    'use strict';

    $('.invalid-error', $(this)).remove();
    // remove any old spans

    var submit_form = true;
    // form submits by default

    // if the browser doesn't support HTML5's required attribute
    if (!Modernizr.input.required) {
        // catch any field that should be required
        $(this).find('input[required]').each(function () {
            // if is empty
            if ($(this).val() === '') {  

                $(this).after('<span="invalid-error">This field is required.</span>');
                // add span after input
                submit_form = false;

            }
        });
    }
    if(!submit_form) event.preventDefault();
    // stop form from submitting
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T03:56:49.287

```
 var flag = 0;
 if ($(this).val() === '') {
       flag = 1;
       var warningblock = '<span class="warning">This field is required.</span>';
       $(this).after(warningblock);             
    } 
//end of each loop
if(flag){ //put this block out side the loop
 return false; //form wont submit
}
return true;

    CSS
    .warning{
    /**add styles for warning here***/
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-25T04:00:45.310

jsFiddle ( [http://jsfiddle.net/4KxzB/10/](http://jsfiddle.net/4KxzB/10/) )

这是我的工作示例，在 chrome 中按预期工作。

要阻止表单提交，只需`return false;`

```
<form>
    <input type="text" required/>
    <input type="submit" value="submit"/>
</form>

<script>
    $('form').submit(function ()
    {
        'use strict';
        // if the browser doesn't support HTML5's required attribute
        if (!Modernizr.input.required)
        {
            var validInput = true;

            // catch any field that should be required
            $(this).find('input[required]').each(function ()
            {
                // if is empty
                if ($(this).val() === '')
                {
                    // create a span that contains a warning to the user
                    var requiredFieldWarning = document.createElement('span');
                    requiredFieldWarning.text = 'This field is required.';

                    // Cancels form submit
                    validInput = false;
                }
            });

            return validInput;
        }
    });
</script>​ 
```

# jsf-2 - 在 jsf bean 中设置和获取参数时的性能问题

> ID：10309130
> 
> 赞同：0
> 
> 时间：2012-04-25T03:52:06.353
> 
> 标签：jsf-2

我正在使用 JSF2.0 并在该数据表中创建一个数据表，我从托管 bean 获取值。在托管 bean 中的后期构造注释方法中，我从另一个文件调用我的 Web 服务。

以下是该代码

```
<h:dataTable
                    value="#{bean1.getList}" var="c" styleClass="order-table"
                    headerClass="order-table-header" width="100%" 
                    rowClasses="order-table-odd-row,order-table-even-row" rows="8"
                    columnClasses="first,second">

                    <h:column>
                        <f:facet name="header">
                            <h:selectBooleanCheckbox></h:selectBooleanCheckbox>
                        </f:facet>
                             <h:selectBooleanCheckbox value="#{c.id}"></h:selectBooleanCheckbox>

                    </h:column>

                    <h:column>
                        <!-- <f:facet name="header"/> -->
                        <h:outputLabel value="From: "></h:outputLabel>
                        <h:outputLabel value="#{c.from}"></h:outputLabel>
                        <br></br>
                        <!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -->
                        <h:outputLabel value="Sub: "></h:outputLabel>
                        <h:outputLabel  value="#{c.sub}"/>
                        <h:commandLink immediate="true" action="#{bean2.doRead}" value="Read" id="Read"></h:commandLink> 
                    </h:column>

                    <!-- Footer Setting -->
                    <f:facet name="footer">

                    </f:facet>
                </h:dataTable> 
```

我的 Bean1 课

```
@PostConstruct
public void prepareList(){
{
        web service call

}

public List<InboxBean> getemailList(){
    return list;
} 
```

现在，当我单击具有 id Read 的 commandlink 时，我的 bean1 post 构造标记属性也被调用。我不想表演。那么，如何摆脱这个问题，我还想在 bean2 setProperty 中设置主题值。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T05:07:58.003

如果将 bean 放在请求范围内，就会发生这种情况。然后，每个 HTTP 请求都将重建 bean。而是将 bean 放在视图或会话范围内。

例如在视图范围内：

```
@ManagedBean
@ViewScoped
public class Bean {} 
```

只要您通过返回`null`或`void`在操作方法中与同一视图交互，视图范围的 bean 就会存在。

或者在会话范围内：

```
@ManagedBean
@SessionScoped
public class Bean {} 
```

会话范围的 bean 与已建立的浏览器会话一样长。也就是说，从涉及 bean 的第一个 HTTP 请求开始，直到客户端关闭整个浏览器实例或服务器端会话到期（默认为 30 分钟）。

对于*您的特定情况*，视图范围 bean 很可能是最佳选择。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

# python - 模拟 - 如何在调用者上引发异常？

> ID：10309132
> 
> 赞同：19
> 
> 时间：2012-04-25T03:52:19.583
> 
> 标签：python, unit-testing, mocking

假设这是代码

```
def move(*args, **kwargs):   
    try:
        shutil.move(source, destination)
    except Exception as e:
        raise e 
```

在我的tests.py中

```
@patch.object(shutil, 'move')
def test_move_catch_exception(self, mock_rmtree):
    ''' Tests moving a target hits exception. '''
    mock_rmtree.side_effect = Exception('abc')
    self.assertRaises(Exception, move,
                             self.src_f, self.src_f, **self.kwargs) 
```

说了这个

```
 File "unittests.py", line 84, in test_move_catch_exception
    self.src_f, self.src_f, **self.kwargs)
AssertionError: Exception not raised 
```

如果我断言`mock_rmtree`它会通过。我如何断言调用者（在这种情况下是函数`move`）？

* * *

正如**aquavitae**指出的那样，主要原因是复制粘贴错误，而且我一开始就断言了一个元组。始终断言正确的返回类型...

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-25T06:37:23.240

您的示例中有错字，缺少`'`.

它并不完全清楚你在问什么，但如果我理解正确，你问的是如何测试引发的异常是否被捕获 inside `move`。一个问题是你正在打补丁`shutil.rmtree`，而不是打补丁，`shutil.move`但你不能确定它`shutil.rmtree`是否会被调用。 `shutil.move`仅在成功复制目录时才实际调用`shutil.rmtree`，但由于您正在复制`self.src_f`到自身，因此不会发生这种情况。但是，这不是一个很好的修补方法，因为根本无法保证`shutil.move`调用的假设并且取决于实现。`shutil.rmtree`

至于如何测试，只需检查返回值是否符合预期：

```
@patch.object(shutil, 'move')
def test_move_catch_exception(self, mock_move):
    ''' Tests moving a target hits exception. '''
    e = OSError('abc')
    mock_move.side_effect = e
    returns = move(self.src_f, self.src_f, **self.kwargs)
    assert returns == (False, e) 
```

# c++ - C++ 用常量值填充数组，循环和改变值

> ID：10309137
> 
> 赞同：0
> 
> 时间：2012-04-25T03:52:42.373
> 
> 标签：c++, arrays, loops, constants

这是我正在编写的数组的一些基本代码。我需要用 4 填充数组的所有插槽 (14)，然后编写一个循环，将插槽 6 和 13 替换为 0。我是初学者，还没有学习矢量，只是基本的编程材料。

```
const int MAX = 14;

int main ()
{

    board ();
    cout<<endl;

    {

        int i;
        int beadArray[MAX] = {4};

        for (i = 0; i < MAX; i++)
        {
            beadArray[i] = -1;
        }

        for (i = 0; i < MAX; i++)
        {
             cout<<i<<"\t";
        }
     }

    cout<<endl;
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T04:11:27.617

```
#include <iostream>
#include <cstdlib>
using namespace std;

int main(){

    //this constant represents the size we want our array to be
    //the size of an array must be determined at compile time.
    //this means you must specify the size of the array in the code.
    const unsigned short MAX(14);

    //now we create an array
    //we use our MAX value to represent how large we want the array to be
    int beadArray[MAX] = {4};

    //now our array looks like this:
    //+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
    //| 4 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
    //+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

    //but you want each index to be filled with 4.
    //lets loop through each index and set it equal to 4.
    for (int i = 0; i < MAX; ++i){
        beadArray[i] = 4;
    }

    //now our array looks like this:
    //+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
    //| 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 |
    //+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

    //to set slots 6 and 13 equal to 0, it is as simple as this:
    beadArray[6] = 0;
    beadArray[13] = 0;

    //careful though, is that what you wanted?
    //it now looks like this:
    //+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
    //| 4 | 4 | 4 | 4 | 4 | 4 | 0 | 4 | 4 | 4 | 4 | 4 | 4 | 0 |
    //+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

    //this is because the [index number] starts at zero.

    //index: 0   1   2   3   4   5   6   7   8   9   10  11  12  13
    //     +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
    //     | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 |
    //     +---+---+---+---+---+---+---+---+---+---+---+---+---+---+

    //print out your array to see it's contents:
    for (int i = 0; i < MAX; i++){
        cout << beadArray[i] << " ";
    }

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:58:47.230

你可以做这样的事情

```
int beadArray[14];
for(int i=0;i<14;i++){
    beadArray[i]=4;
}
beadArray[6]=0;
beadArray[13]=0; 
```

或者

```
int beadArray[14];
for(int i=0;i<14;i++){
    if(i==6 || i==13)
        beadArray[i]=0;
    else
        beadArray[i]=4;
} 
```

# java - 短信 Java 库

> ID：10309139
> 
> 赞同：0
> 
> 时间：2012-04-25T03:53:10.133
> 
> 标签：java, sms

我正在开发一个用于发送和接收消息的 Java 桌面应用程序。任何人都可以帮助我使用免费的 Java 库来帮助我的程序运行良好。我还需要记录库信息。SMS 网关和 SMSC 都已启动并运行，我只需要创建一个可以在linux或windows服务器上运行的应用程序，可以发送和接收消息。这个项目是关于mLearning的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:01:45.547

由于您选择 java 作为 sms 应用程序的语言，因此在 linux 和 windows 中工作应该不是什么大问题。你看过这些java sms库吗？

*   [smppapi](http://smslib.org/)
*   [短信库](http://smppapi.sourceforge.net/)

上面的库应该带有许多示例应用程序，解释如何调用发送或接收短信。

你也可以试试这些 SMSC 模拟器

*   Logica 的[SMSC 模拟器](http://opensmpp.logica.com/CommonPart/Download/download2.html)
*   [smscsim](http://code.google.com/p/smscsim/)

# javascript - 如何在d3中获取变量属性

> ID：10309147
> 
> 赞同：17
> 
> 时间：2012-04-25T03:53:48.537
> 
> 标签：javascript, d3.js

如何使用 d3 返回变量的特定属性？

例如，我想通过鼠标悬停选择一个元素，并将选择传递给一个函数，但前提是该元素`id`是一个特定的名称。

像这样的东西？

```
d3.select("body").on("mouseover", function(){ 
    if (d3.select(this).attr("id") == "correct") {
        enableInteraction(d3.select(this));
    }
}); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-25T04:50:24.843

是的。选择`this`然后使用常用功能访问属性。

# android - Android adb 命令模拟触摸事件和超级用户 apk 建议

> ID：10309158
> 
> 赞同：0
> 
> 时间：2012-04-25T03:56:35.627
> 
> 标签：android, adb, root

当我为我的应用请求权限时`.exec("su")`，我的 SuperSU 应用弹出要求我按下“授予”按钮以允许我的应用获得 root 权限。由于某些原因，我的屏幕不够大，导致我无法按下 SuperSU 应用程序附带的“授予”按钮。我认为 adb 命令 sendevent 可能会帮助我完成这一步，但很难猜测按下按钮的坐标。

有没有其他方法可以做到这一点，或者其他替代应用程序可以在不按下授予按钮的情况下做到这一点？

任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:04:56.050

您可能应该自定义超级用户应用程序以重新定位按钮。

或者，如果您在设备上有一个 root shell（也许是通过 adb？），您可以制作一个 setuid 复制工具箱 sh 消除对按钮对话框的需要，但这会使设备上的任何东西都可以使用它，这是非常冒险的。

无论如何，您似乎也误解了超级用户的能力：您的应用程序不能以 root 身份运行，它只能启动一个辅助进程。

比任何这些开放式 root 访问想法更好的是拥有一个固定功能、静态链接的 setuid 可执行文件，它不接受任何输入，可以执行您希望发生的任何特权任务。该程序越短，您审核它的机会就越大。

# ios - ABPeoplePickerNavigationControllerDelegate 中的 ABMultiValueIdentifier 设置不正确，这是一个 iOS 错误吗？

> ID：10309164
> 
> 赞同：2
> 
> 时间：2012-04-25T03:57:51.537
> 
> 标签：ios, cocoa-touch, addressbook, abaddressbook

我在实现 ABPeoplePickerNavigationControllerDelegate 时遇到了这个奇怪的问题。所以标识符有时在委托方法中被错误地获取了它的值

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier; 
```

例如，当我从联系人中选择第一个号码时，标识符应该为 0。但有时它是 1（即使该联系人只有 1 个号码）！

很容易验证，

```
...
ABMultiValueRef phoneProperty = ABRecordCopyValue(person,property);
int count = ABMultiValueGetCount(phoneProperty);
NSLog(@"How many numbers do I have %d and which number do I choose %d",count,identifier); 
```

它有时会打印出来

> 我有多少个数字**1**我选哪个数字**1**

那么有人也遇到过同样的问题吗？

更新：有时标识符甚至大于计数。怎么会！！

> 我有多少个数字 2 我选择哪个数字 3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:17:17.043

只是想通了为什么并为自己感到尴尬。

所以 ABMultiValueIdentifier 与索引不同，在我得到标识符后，我需要使用 ABMultiValueGetIndexForIdentifier 来获取索引。然后使用该索引调用 ABMultiValueCopyValueAtIndex。

顺便说一句，在 AdressBook Crash 也有同样的问题[，只有一些联系人！](https://stackoverflow.com/questions/3818360/adressbook-crash-only-with-some-contacts)

# php - mysql-php 错误信息

> ID：10309183
> 
> 赞同：1
> 
> 时间：2012-04-25T04:00:35.430
> 
> 标签：php

```
//connecting to the remot database ends
//connecting to the local database
            do
        {
           array_push($msgs2,$msgs['Message']);
        }
        while($msgs=mysql_fetch_assoc($rs));

        $con=mysql_pconnect($todb,'
               die("couldn't connect");
        }

           mysql_select_db("dtestfor_IPAB_db",$con);//databasename

           foreach($msgs2 as $m)
        {
            $m2 = explode(",",$m);

        }
//connecting to the local database ends
//connecting to the remot database  
            $dblink2 = mysql_pconnect); // connect server 2

             // select database 2

        $rs4=mysql_query("select max(sms_index) as 'ma' from ".$smstable."");
        $max2=mysql_fetch_assoc($rs4); 
//connecting to the remot database ends
//connecting to the local database
            $con=mysql_pconnect($todb,);//servername,username,password
                if(!$con)
        {
               die("couldn't connect");
        }

            mysql_select_db($con);

        mysql_query(']);
 //connecting to the local database ends
 ?> 
```

大家好....我正在尝试从一台服务器上的 sms 表中获取值，并将这些值插入到另一台服务器的另一个表中。在这样做的同时，我正在使用另一个表来检查 sms 表中的最大值，因此它将插入这些值。所有代码看起来都很好，但是当我执行代码时，我收到错误消息警告：mysql_fetch_assoc（）：提供的参数不是第 37、45、67 行（url）上的有效 MySQL 结果资源。我认为语法有问题。任何帮助将不胜感激......在此先感谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:24:44.957

~~我会像这样更改您的查询行：~~

 ~~```
$rs2_sql = "select sms_index as 'ma' from $countertable";
$rs2 = mysql_query($rs2_sql, $con) or die(mysql_error()); 
```~~ 

~~让我们知道这是怎么回事。~~

因此，如果`mysql_error()`告诉您没有选择数据库，请执行以下操作：

```
mysql_select_db("dtestfor_IPAB_db", $con) or die(mysql_error()); 
```

这将告诉您为什么无法选择数据库。

# java - 为什么这个线程数据竞争？

> ID：10309186
> 
> 赞同：-1
> 
> 时间：2012-04-25T04:00:52.947
> 
> 标签：java, multithreading, race-condition

我是线程和学习的新手。为什么这个数据竞赛？我知道如何使用该`Synchronized(){}`方法但不使用修饰符。

```
public class SyncMethodDataRace extends Thread {

    private static int common = 0;

    public synchronized void run(){
        int local = common;
        local++;
        common = local;
    }

    public static void main(String[] args) throws InterruptedException {
        SyncMethodDataRace[] allThreads = new SyncMethodDataRace[20000];

        for(int i = 0; i < allThreads.length; i++){
            allThreads[i] = new SyncMethodDataRace();
        }

        for(SyncMethodDataRace d: allThreads){
            d.start();
        }

        for(SyncMethodDataRace d: allThreads){
            d.join();
        }

        System.out.println(common);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T04:05:02.273

通过制作`run`方法`synchronized`，您没有实现所需的同步。同步方法锁定类的当前实例。在您的示例中，没有其他线程正在调用`run`另一个线程的方法，因此没有阻塞。

在您的情况下，您可能需要一个在所有实例之间共享的静态对象以进行同步，即：

```
private static Object syncObject = new Object();

public void run() {
    synchronized (syncObject) {
        //....
    }
} 
```

# javascript - 如何利用对我的 JQuery 编码的滑动 div 的控制？

> ID：10309188
> 
> 赞同：0
> 
> 时间：2012-04-25T04:01:01.707
> 
> 标签：javascript, jquery

本质上，我有 4 个 div 轮流滑入和延迟滑出，然后它会调用该功能。像这样：

```
$(document).ready (function bradslide(){

$("#slide1").delay('1000').slideDown('1000').delay('6000').slideUp('1000');
$("#slide2").delay('9000').slideDown('1000').delay('6000').slideUp('1000');
$("#slide3").delay('17000').slideDown('1000').delay('6000').slideUp('1000');
$("#slide4").delay('25000').slideDown('1000').delay('6000').slideUp('1000', 'swing',      bradslide);
}
); 
```

让我说这很好用，但是如果提出建议，我愿意清理它或使其更容易或更符合标准。

但是我的问题是：如何安排这个以便最终用户可以操作动画。这会自行滑过 div，但理想情况下，我希望有几个按钮可以单击以向后或向前（我想你明白了）。

任何关于如何或从哪里开始的建议将不胜感激。我想我可能不得不放弃这段代码。提前谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:53:02.383

尽管我有自己的评论，但我确实有一些一般性建议：

1.  研究使用类而不是 ID，然后使用 jQuery 的 DOM 遍历方法来确定下一个候选滑块是什么。跟踪“currentSlide”然后定位“nextSlide”（用`.next()`可能标识？）意味着您可以添加任意数量的滑块 div（使用类而不是 ID，记得吗？）并且仍然可以工作。

2.  用户控件（下一张、上一张或选择特定幻灯片）只需中断计时器（可能是 setTimeout 而不是`.delay()`），然后调用完全相同的函数将下一张幻灯片放置到位。

3.  为了使代码更加可重用和灵活，您应该使用一些变量。例如，如果您的幻灯片持续时间为 1000，则您将`var duration = 1000`范围限定到适当的位置（文档准备功能很好......或滑动功能），然后在您的函数调用中（无论它最终看起来像什么） , 你会使用`.slideDown(duration)`. 然后，您可以将该值设置为您想要的任何值，并在以后轻松更新它。

4.  扩展上述内容，您甚至可以构建一个 API，允许您将值传递到自定义滑块函数中：

```
var bradslide = function(container, delay, duration) {
  // do stuff with a parent container, some delay value, and a duration value
};

bradslide('sliderParent', 6000, 1000); 
```

# delphi - 如何在启用 VCL 样式的情况下更改 TPanel 的颜色？

> ID：10309190
> 
> 赞同：15
> 
> 时间：2012-04-25T04:01:19.750
> 
> 标签：delphi, delphi-xe2, vcl-styles

启用 VCL 样式后，我需要更改 TPanel 的颜色。*[我尝试使用和修改文章使用启用 VCL 样式更改编辑控件的颜色中](https://theroadtodelphi.wordpress.com/2012/02/06/changing-the-color-of-edit-controls-with-vcl-styles-enabled/)*列出的代码，但它不适用于 TPanel。如何在启用 VCL 样式的情况下更改 TPanel 的颜色？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-25T04:45:47.140

[`TPanel`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ExtCtrls.TPanel)不使用样式挂钩来绘制控件，因此您不能使用文章中描述的技术。相反，您必须覆盖该[`paint`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ExtCtrls.TCustomPanel.Paint)方法。

使用插入器类检查此示例。

```
type

  TPanel=Class(Vcl.ExtCtrls.TPanel)
  protected
    procedure Paint; override;
  End;

Uses
  Vcl.Styles,
  Vcl.Themes;

{$R *.dfm}

{ TPanel }

procedure TPanel.Paint;
const
  Alignments: array[TAlignment] of Longint = (DT_LEFT, DT_RIGHT, DT_CENTER);
  VerticalAlignments: array[TVerticalAlignment] of Longint = (DT_TOP, DT_BOTTOM, DT_VCENTER);
var
  Rect: TRect;
  LColor: TColor;
  LStyle: TCustomStyleServices;
  LDetails: TThemedElementDetails;
  TopColor        : TColor;
  BottomColor     : TColor;
  LBaseColor      : TColor;
  LBaseTopColor   : TColor;
  LBaseBottomColor: TColor;
  Flags: Longint;

  procedure AdjustColors(Bevel: TPanelBevel);
  begin
    TopColor := LBaseTopColor;
    if Bevel = bvLowered then
      TopColor := LBaseBottomColor;
    BottomColor := LBaseBottomColor;
    if Bevel = bvLowered then
      BottomColor := LBaseTopColor;
  end;

begin
  Rect := GetClientRect;

  LBaseColor := Color;//use the color property value to get the background color.
  LBaseTopColor := clBtnHighlight;
  LBaseBottomColor := clBtnShadow;
  LStyle := StyleServices;
  if LStyle.Enabled then
  begin
    LDetails := LStyle.GetElementDetails(tpPanelBevel);
    if LStyle.GetElementColor(LDetails, ecEdgeHighLightColor, LColor) and (LColor <> clNone) then
      LBaseTopColor := LColor;
    if LStyle.GetElementColor(LDetails, ecEdgeShadowColor, LColor) and (LColor <> clNone) then
      LBaseBottomColor := LColor;
  end;

  if BevelOuter <> bvNone then
  begin
    AdjustColors(BevelOuter);
    Frame3D(Canvas, Rect, TopColor, BottomColor, BevelWidth);
  end;
  if not (LStyle.Enabled and (csParentBackground in ControlStyle)) then
    Frame3D(Canvas, Rect, LBaseColor, LBaseColor, BorderWidth)
  else
    InflateRect(Rect, -Integer(BorderWidth), -Integer(BorderWidth));
  if BevelInner <> bvNone then
  begin
    AdjustColors(BevelInner);
    Frame3D(Canvas, Rect, TopColor, BottomColor, BevelWidth);
  end;
  with Canvas do
  begin
    if not LStyle.Enabled or not ParentBackground then
    begin
      Brush.Color := LBaseColor;
      FillRect(Rect);
    end;

    if ShowCaption and (Caption <> '') then
    begin
      Brush.Style := bsClear;
      Font := Self.Font;
      Flags := DT_EXPANDTABS or DT_SINGLELINE or
        VerticalAlignments[VerticalAlignment] or Alignments[Alignment];
      Flags := DrawTextBiDiModeFlags(Flags);
      if LStyle.Enabled then
      begin
        LDetails := LStyle.GetElementDetails(tpPanelBackground);
        if not LStyle.GetElementColor(LDetails, ecTextColor, LColor) or (LColor = clNone) then
          LColor := Font.Color;
        LStyle.DrawText(Handle, LDetails, Caption, Rect, TTextFormatFlags(Flags), LColor)
      end
      else
        DrawText(Handle, Caption, -1, Rect, Flags);
    end;
  end;
end; 
```

![在此处输入图像描述](../Images/01f69e26c73e20522041fb7a643412c0.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-04-02T23:41:22.913

在 XE5 中，如果您关闭 StyleElements 属性中的 seClient 标志，则 Color 属性会再次按预期工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-12T00:32:53.817

根据@costa 的回答，使用：

```
StyleElements := StyleElements - [seClient]; 
```

在您的 TPanel 后代类的构造函数中

或者，如果您只有一些 TPanel（或后代类）实例，您可以这样做：

```
with myPanel do StyleElements := StyleElements - [seClient]; 
```

使用 -[...] 语法，因为 StyleElements 是一个集合

有关 StyleElements 的更多信息，请阅读本文：

为表单和控件调整 VCL 样式 - [http://edn.embarcadero.com/article/42812](http://edn.embarcadero.com/article/42812)

# javascript - onmouseover onmouseout fadeIn fadeOut no jQuery

> ID：10309197
> 
> 赞同：2
> 
> 时间：2012-04-25T04:02:31.323
> 
> 标签：javascript, fadein, fadeout, onmouseover

我正在寻找一种优雅的解决方案，用于在不使用 jQuery 的情况下在鼠标移出时淡入和淡出 HTML 元素 onmouseover（称我为老式）。

从理论上讲，下面的 js 解决方案应该可以工作，但是我在使用它时遇到问题，有人可以指出我正确的方向或提供替代解决方案吗？

我的 Js 函数是，插入的 HTML 与页面上的 HTML 相同...

```
function fadeIn(element) {

   for (i = 0; i < 100; i++) {
      var value = 0 + i;

      element.style.opacity = value;
      element.style.filter = 'alpha(opacity=' + value + ')';
   }
}

function fadeOut(element) {

   for (i = 0; i < 100; i++) {
      var value = 100 - i;

      element.style.opacity = value;
      element.style.filter = 'alpha(opacity=' + value + ')';
      element.innerHTML = "<div class='container' id='container' onmouseover='fadeOut(this)'><img src='./images/myImage.jpg' onload='fadeIn(this.parent)' /></div>";

   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:20:57.113

你的淡入/淡出不能正常工作，因为你没有做任何事情来控制变化率。这将立即执行并显示/隐藏元素。

尝试这样的事情：

```
function fadeIn(el) {
   var opac = 0;
   var i = setInterval(function() {
     opac += 10;
     if (opac >= 100) {
       clearInterval(i);
       opac = 100;
     }
     el.style.opacity = opac;
     el.style.filter = 'alpha(opacity=' + opac + ')';

   }, 20);
} 
```

这应该在 200 毫秒（20 * 100 / 10）内消失。玩数字来调整速度。

至于鼠标悬停/移出，您可以像绑定其他任何事件一样绑定事件。

通常，使用 HTML 属性附加 JS 事件是不受欢迎的。通常你会有这样的助手：[https ://gist.github.com/955642](https://gist.github.com/955642)

您想编写自己的方法来检查哪些主要方法`addEventListener`或`attachEvent`您的浏览器支持。

# javascript - 了解“javascript：...;” 里面

> ID：10309198
> 
> 赞同：11
> 
> 时间：2012-04-25T04:02:33.640
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T04:20:42.077

如果您需要传递需要运行的 javascript**片段**而不是元素的**默认行为**，则使用此`javascript: ;`语法。

例如

```
<a href="javascript:alert('');">Test</a> <!-- Runs on the click of the link --> 
```

同样，您也可以将它们组合在其他事件上，例如等`onclick`，`onchange`但这实际上*不是*必需的，因为您可以直接执行代码段。

我多年来看到的这个用途是：

1.  `<a href="javascript:void(0);">Test</a>`
2.  `<form action="javascript:void(0);">..</form>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T04:13:43.673

javascript:; 在 href 中与在“onclick”属性中放置内容相同。

因此，

```
<a href="javascript:do_something();">Link</a> 
```

等同于

```
<a href="#" onclick="do_something();">Link</a> 
```

我不确定何时使用哪个更好，但值得一提的是，您可以在大多数现代浏览器的地址栏中键入这些“链接”，它就会运行。

复制并粘贴（或键入，chrome 似乎禁止这样做。）到您的地址栏

```
javascript:alert("test"); 
```

以及您可以将带有这些地址的链接保存到书签，以便它会在您单击书签的任何页面上运行该脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T04:04:21.603

仅此一项没有任何作用，但通常**javascript:**在一些 JavaScript 代码之前表示浏览器应该执行代码，而不是将 href 属性视为 URL。就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T04:14:13.040

这可能旨在作为单击时不执行任何操作的参考，并且可能伴随设置 onclick 等以实际执行任何操作。

upd：虽然有人说将脚本放入 href 与将其放入 onclick 中是一样的，但还是有一些区别，例如右键单击时会发生什么（有些脚本绝对不应该在新选项卡等中打开）。尽管如此，我对这种做法的看法是它有点丑陋，不仅仅是因为当鼠标悬停在链接上时状态栏中的文本信息不足。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-25T04:19:40.223

您可以将其想象为有人在复制“javascript:;” 进入 url 框中，然后按 Enter。由于它以“javascript:”开头，浏览器将知道在当前页面中执行以下作为 javascript 的内容。因为后面是一个“;”，所以实际上什么都不会发生。这与单击将 onClick 属性设置为“;”的按钮相同。

例如：

```
<a href="javascript:alert('howdy!')">Click me!</a> 
```

具有相同的效果

```
<button onClick="alert('howdy!')">Click me!</button> 
```

甚至

```
<a href="#" onClick="alert('howdy!')">Click me!</a> 
```

请记住，由于它是一个链接，大多数浏览器都会在状态栏中呈现其地址（在这种情况下为“javascript:alert('howdy!')”），这可能是不受欢迎的（我觉得它特别难看）。

# lucene - ElasticSearch 的模糊查询

> ID：10309199
> 
> 赞同：23
> 
> 时间：2012-04-25T04:02:36.183
> 
> 标签：lucene, elasticsearch, fuzzy-search

我是*ElasticSearch*的新手，目前正在探索它的功能。我感兴趣的其中之一是*Fuzzy Query*，我正在对其进行测试并且使用时遇到了麻烦。这可能是一个愚蠢的问题，所以我想已经使用此功能的人会很快找到答案，至少我希望如此。:)

顺便说一句，我觉得它可能不仅与*ElasticSearch相关，而且可能与**Lucene*直接相关。

让我们从一个名为“first index”的新索引开始，我在其中存储了一个值为“american football”的对象“label”。这是我使用的查询。

```
bash-3.2$ curl -XPOST 'http://localhost:9200/firstindex/node/?pretty=true' -d '{
  "node" : {
    "label" : "american football"
  }
}
' 
```

这是我得到的结果。

```
{
  "ok" : true,
  "_index" : "firstindex",
  "_type" : "node",
  "_id" : "6TXNrLSESYepXPpFWjpl1A",
  "_version" : 1
} 
```

到目前为止一切顺利，现在我想使用模糊查询找到这个条目。这是我发送的：

```
bash-3.2$ curl -XGET 'http://localhost:9200/firstindex/node/_search?pretty=true' -d '{
  "query" : {
    "fuzzy" : {
      "label" : {
        "value" : "american football",
        "boost" : 1.0,
        "min_similarity" : 0.0,
        "prefix_length" : 0
      }                       
    }    
   }   
}
' 
```

这就是我得到的结果

```
{
  "took" : 15,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 0,
    "max_score" : null,
    "hits" : [ ]
  }
} 
```

如您所见，没有命中。但是现在，当我将查询的值从“美式**足球**”缩小到“美式**足球**”时，如下所示：

```
bash-3.2$ curl -XGET 'http://localhost:9200/firstindex/node/_search?pretty=true' -d ' {
  "query" : {
    "fuzzy" : {
      "label" : {
        "value" : "american footb",
        "boost" : 1.0,
        "min_similarity" : 0.0,
        "prefix_length" : 0
      }
    }
  }
}
' 
```

然后我的条目得到了正确的命中，因此结果是：

```
{
  "took" : 0,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 1,
    "max_score" : 0.19178301,
    "hits" : [ {
      "_index" : "firstindex",
      "_type" : "node",
      "_id" : "6TXNrLSESYepXPpFWjpl1A",
      "_score" : 0.19178301, "_source" : {
        "node" : {
          "label" : "american football"
        }
      }
    } ]
  }
} 
```

* * *

所以，我有几个与这个测试有关的问题：

1.  **为什么在执行一个值完全等于我唯一的条目“美式足球**”的查询时我没有得到任何结果

2.  这与我具有多字价值这一事实有关吗？

3.  有没有办法在我的查询结果中获得“相似性”分数，这样我就可以更好地理解如何为我的模糊查询找到正确的阈值

4.  ElasticSearch 网站上有一个专门用于*模糊查询*的页面，但我不确定它是否列出了我可以用于模糊查询的所有潜在参数。我能找到这么详尽的清单吗？

5.  实际上，其他查询的问题相同。

6.  使用 lucene 语法进行模糊匹配的*模糊查询*和*查询字符串查询*之间有区别吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-28T02:16:37.837

# 1.

模糊查询根据条款进行。它无法处理短语，因为它不分析文本。因此，在您的示例中，elasticsearch 尝试将“美式足球”一词与美式足球和美式足球相匹配。词项之间的匹配基于[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)，用于[计算相似度得分](https://github.com/apache/lucene-solr/blob/lucene_solr_3_5/lucene/src/java/org/apache/lucene/search/FuzzyTermEnum.java#L151). 由于您有 min_similarity=0.0 任何术语都应该匹配任何术语，只要编辑距离小于最小术语的大小。在您的情况下，术语“美式足球”的大小为 17，而术语“美式足球”的大小为 8。这两个术语之间的距离是 9，大于最小术语 8 的大小。因此，这任期被拒绝。"american footb" 和 "american" 之间的编辑距离是 6。它基本上是术语 "american"，最后加了 6 个。这就是它产生结果的原因。使用 min_similarity=0.0 几乎所有编辑距离为 7 或更少的东西都会匹配。例如，您甚至可以在搜索“aqqqqqq”时获得结果。

# 2.

是的，正如我上面解释的，它与多字值有些相关。如果要搜索多个词，请查看[Fuzzy Like This Query](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-flt-query.html) 和[Text Query的 fuzziness 参数](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-text-query.html)

# 4 & 5。

通常，在 elasticsearch.org 之后的下一个最佳信息来源是 elasticsearch 源代码。

# function - 从函数绘制 .PPM 文件时，Python 图形会跳过每隔一个像素

> ID：10309201
> 
> 赞同：0
> 
> 时间：2012-04-25T04:02:37.253
> 
> 标签：function, graphics, python-3.x, ppm

我正在为大学课程编写程序。我将保存为二维数组的 .PPM 文件从 main 导入到函数中。然后我必须使用 .setPixel 和 color_RGB() 方法和函数更新图形窗口（在主窗口中打开）的像素。

像素正在更新，但是由于某种原因，每个彩色像素之间都有一个白色像素。这不是 PPM 文件（它们是由我的教授提供的，我已经尝试了多个文件），所以它必须是我的功能。

警告：我不允许在我的程序中使用我们课程中尚未涵盖的任何内容（这是第一年，4 个月的课程，因此范围并不大）。我不需要确切地知道如何修复它，就像我需要知道它为什么这样做一样（又名：我需要能够解释我是如何修复它的，以及它为什么会首先损坏）。

这是我的功能：

```
def Draw_Pic(pic,pic_array, sizeX, sizeY, gfx_window):

for y in range(sizeY):

    for x in range(0, sizeX, 3):

        pixel_color = color_rgb(pic_array[y][x],pic_array[y][x+1],pic_array[y][x+2])

        pic.setPixel(x,y,pixel_color)
        gfx_window.update() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:30:15.870

您正在使用`range(0, sizeX, 3)`它创建一个值从 0 到 sizeX 且增量为 3 的列表。

因此，您的 x 变为 0..3..6..9 等。对于您从 3 个组件组合像素颜色的部分非常有意义，但随后您`pic.setPixel(x,y,colors)`使用相同的交错 x。

希望有帮助。

PS顺便说一句，为什么是“颜色”而不是“颜色”？

**编辑**另外，这样你将只复制 1/3 的图像`pic_array`。

# django - South 0.7.4：不支持blank=True吗？

> ID：10309202
> 
> 赞同：0
> 
> 时间：2012-04-25T04:03:07.790
> 
> 标签：django, django-models, migration, django-south

我有一个 Django 模型，它的一些字段有选项`blank=True`。

但是当我用南迁移模式时，这个选项没有在数据库上设置。

那么South不支持这个选项吗？

在文档中我找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:06:44.693

这些`blank`选项不适用于实际的数据库表，它只影响管理/表单中的验证处理方式（您可以输入空白字符串）。如果你想允许 NULL 那么你想要的选项是`null=True`South 支持的选项。

[请参阅文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.Field.blank)中关于空白与 null 的讨论

# text - 文本分类中的特征选择

> ID：10309203
> 
> 赞同：1
> 
> 时间：2012-04-25T04:03:18.453
> 
> 标签：text, document-classification

我目前在研究文本分类，重点是特征选择。谁能建议我任何可用于提供特征选择功能（特别是信息增益、卡方、优势比、互信息等）的文本分类的软件/程序？

谢谢和最好的问候=）

# javascript - 半透明点上的加色

> ID：10309206
> 
> 赞同：0
> 
> 时间：2012-04-25T04:03:32.717
> 
> 标签：javascript, ruby, image-processing, css, canvas

我有一个方形图标，被黑色面具变暗。这个面具上应该有许多点，各种颜色。这些点具有附加颜色，因此当彼此叠加时，它们会变亮。结合起来，足够多的这些会使黑色蒙版变成彩色甚至是白色，从而露出下面的图像。

怎么可能做到这一点？客户端，使用 canvas 还是 css3？服务器端，使用 ImageMagick 还是其他？

这是画布上加色的链接：http: [//contrapunctus.net/blog/2010/rgb-demo](http://contrapunctus.net/blog/2010/rgb-demo)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:54:27.200

HTML5 Canvas + [Context Blender](https://github.com/Phrogz/context-blender) + 屏幕模式。

或者，正如您链接的那样，使用加法全局复合模式。

或者使用 ImageMagick。

或者使用[ChunkyPNG](https://github.com/wvanbergen/chunky_png)和添加。

# javascript - Backbone 模型的 id 是如何填充的？

> ID：10309207
> 
> 赞同：1
> 
> 时间：2012-04-25T04:04:04.460
> 
> 标签：javascript, backbone.js

我注意到 Backbone 模型的所有实例都有一个如下所示的 id： id：`"/api/v1/item/36/"`这是对应于模型的 URL。当然，我希望 ID 仅为 36。这是我的 API 返回的 JSON 的问题吗？这是我的 API 返回的 JSON：

```
{"created_at": "2012-04-24T22:09:41.683039", "id": "36", "name": "new", "resource_uri": "/api/v1/item/36/", "updated_at": "2012-04-24T22:51:23.664253", "user": "/api/v1/user/9/"} 
```

它是否尝试将 resource_uri 呈现为 ID？还是完全分开的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:21:30.757

Backbone 本身不会`id`为您的模型分配任何内容。

两件事之一：您要么`id`明确分配，要么将 Backbone`id`从您的第一个*请求的**响应*中获取到服务器以*创建*模型。`POST`

 **Backbone 确实为每个模型分配了一个*唯一标识符*，但这个标识符是[Model.cid](http://documentcloud.github.com/backbone/#Model-cid)。

如果你的`Model.id`样子`/api/v1/item/36/`是因为你以某种方式明确地分配了这个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:19:41.417

如果您从此 JSON 实例化模型，则 id 将为 36。如果您使用集合，则需要指定 url：“/api/v1/item/”，以便集合知道在哪里获取/保存模型。**

# jquery-ui - jQuery UI 的 .ui-selected 定义的 CSS 在哪里？

> ID：10309212
> 
> 赞同：2
> 
> 时间：2012-04-25T04:04:27.453
> 
> 标签：jquery-ui, jquery-ui-selectable

我正在尝试将 jQuery UI Selectable 应用于我网站的一部分。但是，拖动鼠标时我看不到选择框，所选`li`元素的颜色也没有改变。

所以为了理解这个问题，我回到了源头：

[http://jqueryui.com/demos/selectable/](http://jqueryui.com/demos/selectable/)

我看到（使用 IE9 开发人员工具）将样式`.ui-selected`应用于选定元素。使用 Trace Styles，IE 显示`background-color`最初在 中定义`jquery-ui.css`但（最终）被`#selectable .ui-selected`. 但是，IE 没有显示`#selectable .ui-selected`. 搜索我引用的 jQuery UI 样式表`jquery-ui-1.8.18.custom.css`，发现没有提及`ui-selected`，我也没有在`jquery.ui.selectable.css`.

演示页面究竟在哪里获取背景颜色的 CSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:21:00.087

我发现其他 jQueryUI 演示之一在自定义样式表中定义了这些类的样式，因此我最终遵循了该方法。

[http://jqueryui.com/demos/selectable/#serialize](http://jqueryui.com/demos/selectable/#serialize)

这些样式不属于 jQueryUI [Themeroller](http://jqueryui.com/themeroller/)似乎很奇怪。也许这在未来会改变。

# php - 阿贾克斯没有被解雇？

> ID：10309213
> 
> 赞同：0
> 
> 时间：2012-04-25T04:04:37.740
> 
> 标签：php, ajax

我正在使用 jquery 验证器插件，并且正在尝试使用 AJAX 对其进行第一次尝试。

现在，我有以下 HTML 代码：

```
 <div class="grid_12" id="info">
        </div>

        <div class="grid_12">
            <div class="block-border">
                <div class="block-header">
                    <h1>Inserir nova página</h1><span></span>
                </div>
                <form id="formulario" class="block-content form" action="<?=$_SERVER['PHP_SELF'];?>" method="post">
                    <div class="_100">
                        <p><label for="textfield">Nome da página</label><input id="page_name" name="textfield" class="required text" type="text" value="" /></p>
                    </div>

                    <div class="_100">
                        <p><label for="textarea">Conteúdo da página</label><textarea id="page_content" name="textarea" class="required uniform" rows="5" cols="40"></textarea></p>
                    </div>
                    <div class="block-actions">
                        <ul class="actions-left">
                            <li><a class="button red" id="reset-validate-form" href="javascript:void(0);">Limpar</a></li>
                        </ul>
                        <ul class="actions-right">
                            <li><input type="submit" class="button" name="send" value="Inserir"></li>
                        </ul>
                    </div> 
```

还有我的 JS 代码：

```
 <script type="text/javascript">
$().ready(function() {

    /*
     * Form Validation
     */
    $.validator.setDefaults({
        submitHandler: function(e) {
            $.jGrowl("Ação executada com sucesso.", { theme: 'success' });
            $(e).parent().parent().fadeOut();

            /*
             * Ajax
             */
            var mypostrequest=new ajaxRequest();
            mypostrequest.onreadystatechange=function(){
             if (mypostrequest.readyState==4){
              if (mypostrequest.status==200 || window.location.href.indexOf("http")==-1){
               document.getElementById("info").innerHTML=mypostrequest.responseText;
              }
              else{
               alert("An error has occured making the request")
              }
             }
            }
            var page_name=encodeURIComponent(document.getElementById("page_name").value);
            var page_content=encodeURIComponent(document.getElementById("page_content").value);
            var parameters="page_name="+page_name+"&page_content="+page_content;
            mypostrequest.open("POST", "ajax/inserir_utilizador.php", true);
            mypostrequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            mypostrequest.send(parameters);

            v.resetForm();
            v2.resetForm();
            v3.resetForm();

            return false;
        }
    });
    var v = $("#create-user-form").validate();
    jQuery("#reset").click(function() { v.resetForm(); $.jGrowl("User was not created!", { theme: 'error' }); });

    var v2 = $("#write-message-form").validate();
    jQuery("#reset2").click(function() { v2.resetForm(); $.jGrowl("Message was not sent.", { theme: 'error' }); });

    var v3 = $("#create-folder-form").validate();
    jQuery("#reset3").click(function() { v3.resetForm(); $.jGrowl("Folder was not created!", { theme: 'error' }); });

    var formulario = $("#formulario").validate();
    jQuery("#reset-validate-form").click(function() { formulario.resetForm(); $.jGrowl("O formulário foi limpo!", { theme: 'information' }); });
    }); 
```

我有一个 div #info，其中没有任何内容，我试图将 ajax 的结果放在那里。

我的 ajax 文件只是试图回显 POST 值：

```
<?php
$page_name=$_POST["page_name"];
$page_content=$_POST["page_content"];

echo $page_name."<br />";
echo $page_content;
?> 
```

但这真的行不通。它真的没有做任何事情，或者如果有，它会刷新页面。

我错过了什么？

问候和感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:20:58.800

我建议您使用`$.ajax()`or `$.post()`。
它更容易，你的头痛肯定会消失。

```
$.ajax({
  type: 'POST',
  url: 'url to post',
  data: data,
  success: function(data, status) {
    //callback for success
  },
  error: error, //callback for failure
  dataType: "json" //or "html" etc
}); 
```

这里有很多例子：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.ajax/)
[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.post/)

# centos - IPTables 端口范围

> ID：10309214
> 
> 赞同：1
> 
> 时间：2012-04-25T04:04:41.727
> 
> 标签：centos, iptables

大家好，在我的 iptables 文件中，我有以下行：

```
-A INPUT -m state --state NEW -m tcp -p tcp --dport 20000:25000 -j ACCEPT 
```

因为我正在尝试打开一系列端口，这些端口需要为多个（是的，很多多个）不同的 minecraft 服务器打开。

我知道问题出在 IPTables 上，因为当我停止它们时，我能够访问服务器（端口 20004）但是打开它们后，我无法连接，我的格式是否正确？我什至只是

```
-A INPUT -m state --state NEW -m tcp -p tcp --dport 20004 -j ACCEPT 
```

第二个复制了确切的 SSH 端口 22 规则，显然端口除外，有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:18:42.173

你有没有发出

```
-F INPUT 
```

首先，如果相关？

你已经征求意见了。如果你还没有尝试过这个，你可能会。IPtables 错误有时并非易事，不是吗？但是，如果您从一个已知的状态开始，它会有所帮助`-F`。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-14T21:11:34.793

你也可以使用上面的规则

```
iptables -A INPUT -m state --state NEW -m tcp -p tcp --match multiport --dports 20000:25000 -j ACCEPT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-25T09:24:46.497

你可以试试这个

#iptables -A INPUT -p tcp --match multiport --dports 20000:25000 -j ACCEPT

# php - 为什么 PayPal NVP 不接受我的货币代码？

> ID：10309215
> 
> 赞同：0
> 
> 时间：2012-04-25T04:05:00.487
> 
> 标签：php, paypal

我希望贝宝快速结帐页面以澳元显示总额，但它不接受。

这工作没问题

```
$nvpStr =  "&RETURNURL=$returnURL
            &CANCELURL=$cancelURL
            &PAYMENTREQUEST_0_PAYMENTACTION=Sale
            &PAYMENTREQUEST_0_AMT=$total
            &PAYMENTREQUEST_0_ITEMAMT=$total
            &L_PAYMENTREQUEST_0_NAME0=$name
            &L_PAYMENTREQUEST_0_QTY0=$quantity
            &L_PAYMENTREQUEST_0_AMT0=$price
            &L_PAYMENTREQUEST_0_DESC0=$description
            &NOSHIPPING=1 
            "; 
```

但这会返回错误代码 [L_LONGMESSAGE1] => 不支持货币。

```
$nvpStr =  "&RETURNURL=$returnURL
            &CANCELURL=$cancelURL
            &PAYMENTREQUEST_0_PAYMENTACTION=Sale
            &PAYMENTREQUEST_0_AMT=$total
            &PAYMENTREQUEST_0_ITEMAMT=$total
            &PAYMENTREQUEST_0_CURRENCYCODE=AUD
            &L_PAYMENTREQUEST_0_NAME0=$name
            &L_PAYMENTREQUEST_0_QTY0=$quantity
            &L_PAYMENTREQUEST_0_AMT0=$price
            &L_PAYMENTREQUEST_0_DESC0=$description
            &NOSHIPPING=1 
            "; 
```

事实上，无论我选择什么代码 PAYMENTREQUEST_0_CURRENCYCODE , EUR, USD ，它总是返回那个错误。我试过大写和没有大写，检查空格等。

还尝试了每个建议中的 url 编码货币代码，但同样的错误。

```
$cc = urlencode("AUD");

    $nvpStr =  "&RETURNURL=$returnURL
                &CANCELURL=$cancelURL
                &PAYMENTREQUEST_0_PAYMENTACTION=Sale
                &PAYMENTREQUEST_0_AMT=$total
                &PAYMENTREQUEST_0_ITEMAMT=$total
                &PAYMENTREQUEST_0_CURRENCYCODE=$cc
                &L_PAYMENTREQUEST_0_NAME0=$name
                &L_PAYMENTREQUEST_0_QTY0=$quantity
                &L_PAYMENTREQUEST_0_AMT0=$price
                &L_PAYMENTREQUEST_0_DESC0=$description
                &NOSHIPPING=1 
                "; 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:59:02.290

我认为您必须对货币类型进行 url 编码。

如：

```
PAYMENTREQUEST_0_CURRENCYCODE'=>urlencode('GBP') 
```

# c# - Visual Studio 2010 Professional 播放按钮已禁用

> ID：10309221
> 
> 赞同：5
> 
> 时间：2012-04-25T04:05:39.730
> 
> 标签：c#, visual-studio-2010, debugging, windows-phone

我在 VS2010 Pro 中的一个项目出现问题，它不允许我点击屏幕顶部的“调试”播放按钮，它已被禁用，当我打开其他项目或启动新项目时它已启用然而，在新项目/其他项目上，它在一个项目上被禁用，我不知道我改变了什么（我打开这个已经有一段时间了，因为上次打开它让我很生气），我能做些什么重新启用“播放”按钮？（调试），这是一个 Windows Phone 7 项目，我正在弄乱 .csproj 代码。

编辑：

菜单项已被禁用“开始调试：F5”也不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T04:24:41.647

确保您没有根据此[MSDN 论坛链接启用多个启动项目](http://social.msdn.microsoft.com/Forums/en/vsdebug/thread/cb10e83a-70b6-43b4-9527-dc5ce9115dcf)

![在此处输入图像描述](../Images/d7e64a623f679ef3dafbddd584eced19.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T04:16:11.297

确保您选择了启动项目。右键单击您的可运行项目之一，然后选择“设置为启动项目”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T04:13:56.537

原因之一可能是您将项目设置为编译为库。

有一种简单的退出方法 - 只需启动新项目，然后将所有代码/资源文件从旧项目文件夹复制到新文件夹，然后将它们添加到 Visual Studio 中的新项目中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T08:55:49.377

试试这个

转到“项目属性...”>>编译>>高级编译选项...并将生成调试信息：更改为“完整”。

# maven - 在 Maven 3 中使用 jarsign 插件和程序集插件

> ID：10309222
> 
> 赞同：1
> 
> 时间：2012-04-25T04:05:47.487
> 
> 标签：maven, maven-3, maven-assembly-plugin, jar-signing, maven-jarsigner-plugin

我正在使用程序集插件将小程序列表打包到带有我的 maven 项目的模块之一中的 zip 中。这是 pom.xml：

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
     xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<modelVersion>4.0.0</modelVersion>
<packaging>pom</packaging>
<artifactId>applets-deploy</artifactId>
<name>deploy</name>
<dependencies>
  <dependency>
    <groupId>com.activx.lims</groupId>
    <artifactId>applets-common</artifactId>
    <version>${project.version}</version>
  </dependency>
  <dependency>
    <groupId>com.activx.lims</groupId>
    <artifactId>ceplot-applet</artifactId>
    <version>${project.version}</version>
  </dependency>
  </dependencies>
......  
<build>
<plugins>
  <plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <configuration>
      <descriptors>
        <descriptor>src/main/assembly/resources.xml</descriptor>
      </descriptors>
    </configuration>
    <executions>
      <execution>
        <id>make-assembly</id>
        <phase>package</phase>
        <goals>
          <goal>single</goal>
        </goals>
      </execution>
    </executions>
  </plugin>
</plugins>
</build>
</project> 
```

我需要在打包之前对 jar 进行签名，我可以在这里使用 jarsign 插件吗？如何使用？我在构建过程中找不到 jar 文件临时存储的位置。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:58:03.053

这将是 jarsigner 插件的正常使用。默认情况下，jar 在打包阶段由 jar 插件构建并输出`${project.build.directory}`到`target`.

您只需要在打包过程中构建 jar 之后和组装 zip 之前的某个时间对 jar 进行签名。您可以通过将程序集插件绑定到稍后的阶段或通过在程序集插件上方添加 jarsigner 插件并将其绑定到包阶段来做到这一点。

# ipad - 来自 UINavigationController 的弹出视图多次导致应用程序崩溃

> ID：10309223
> 
> 赞同：-1
> 
> 时间：2012-04-25T04:05:48.703
> 
> 标签：ipad, uinavigationcontroller, crash, popviewcontroller

有一个项目详细信息屏幕，用户可以在其中阅读有关所选项目的所有信息，并且此屏幕中还有一个搜索栏，用户可以在其中搜索项目，然后当他们选择一个时，将显示它，因为数据复杂，所以我必须通过弹出当前项目视图然后推入新项目视图来做到这一点。

只做几次就一切正常，当用户这样做大约 25-30 次时会出现问题，应用程序变慢然后崩溃。

我猜这应该是内存的问题，但找不到它在哪里。

请帮我解决这个问题，谢谢！

![在此处输入图像描述](../Images/c82f7013f8125135feaaa096a56382c9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:42:05.990

你必须找出你的记忆增长的地方。只有这样，您才能找到解决方法。给你几个小窍门

*   转到**Xcode -> 产品 -> 分析**以找出您有内存泄漏的地方并避免它们。

*   还可以使用 Instruments 进行更多测试。

*   不要使用分配大图像，

    ```
    [UIImage imageNamed:]; 
    ```

    上述方法将缓存图像。而是使用，

    ```
    [UIImage imageWithContentsOfFile:]; 
    ```

# css - 输入范围滑块

> ID：10309225
> 
> 赞同：0
> 
> 时间：2012-04-25T04:06:31.877
> 
> 标签：css, html, input, cross-browser, range

> **可能重复：**
> [哪些浏览器当前支持“范围”输入？](https://stackoverflow.com/questions/5944552/what-browsers-currently-support-the-range-input)

使用输入类型范围时，有没有办法在所有主要浏览器中显示滑块？

我正在使用这段代码：

```
<input id="Priority" type="range" min="1" max="5" step="1" value="3" onchange="showValue(this.value)" /> 
```

我知道它可以在 Chrome 中使用，但是当我使用 Internet Explorer 或 Firefox 时，它只显示一个文本框而不是一个滑块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:12:17.847

最好的方法是使用 jqueryui 滑块：http: [//jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:26:57.403

我在 GitHub 上找到了这个。如果你将文件保存到 GitHub，你可以从这个人的页面 fork 它。他们授予使用代码的权限。我的范围滑块现在显示在所有浏览器中。

[https://github.com/fryn/html5slider/blob/master/html5slider.js](https://github.com/fryn/html5slider/blob/master/html5slider.js)

注意：您必须包含版权声明：

版权所有 (c) 2010-2011 Frank Yan, [http://frankyan.com](http://frankyan.com)

在您的页面中，或者像我一样将带有版权声明的整个页面保存为单独的 .js 文件。

# playn - 对于 PlayN，有人可以提供一个简单的代码示例来展示如何加载字体文件吗？

> ID：10309227
> 
> 赞同：0
> 
> 时间：2012-04-25T04:06:37.350
> 
> 标签：playn

我正在寻找一个加载 ttf 文件（在我的情况下为`Inconsolata.ttf`）并创建文本层的简单示例。

是否有可能以与平台无关的方式做到这一点？[从这里](https://stackoverflow.com/a/9116829/1093087)的回复中，我得到的印象不是。

我正在使用playn-samples 展示中的 TextDemo[示例](http://code.google.com/p/playn-samples/source/browse/showcase/core/src/main/java/playn/showcase/core/text/TextDemo.java?spec=svn4636b14414a57f22f36ff78c4a04a94bc370f54a&r=4636b14414a57f22f36ff78c4a04a94bc370f54a#57)作为参考进行简单的概念验证。

我目前对如何注册 ttf 文件有点困惑。这是我的代码：

```
private void testCustomFont() {
    // text
    String text = "Hello, Cleveland!";

    // load font
    String fontName = "Inconsolata";
    Font.Style fontStyle = Font.Style.BOLD;
    Float fontSize = 24f;
    Font myFont = graphics().createFont(fontName, fontStyle, fontSize);

    // format text
    Integer fontColor = Color.rgb(0, 0, 255);
    TextFormat textFormat = new TextFormat().withFont(myFont).withTextColor(fontColor);

    // create font image layer
    ImageLayer textLayer = graphics().createImageLayer();
    TextLayout textLayout = graphics().layoutText(text, textFormat);
    CanvasImage textImage = graphics().createImage((int)Math.ceil(textLayout.width()), 
            (int)Math.ceil(textLayout.height()));
    textImage.canvas().drawText(textLayout, 0, 0);
    textLayer.setImage(textImage);

    // position text layer and add to root layer
    textLayer.setTranslation(20, 20);
    graphics().rootLayer().add(textLayer);
} 
```

项目布局如下：

```
/project
├── core
│   └── MyProject.java
└──  resources
    └──  fonts
         └──  Inconsolata.ttf 
```

这将显示文本，但正如预期的那样，不是以所需的字体显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:32:59.890

理想情况下，我希望字体加载与资产管理器的图像加载一样工作：

```
String fontPath = "fonts/Inconsolata.ttf";
Font.Style fontStyle = Font.Style.BOLD;
Float fontSize = 24f;
Font myFont = assetManager().getFont(fontPath, fontStyle, fontSize); 
```

那是不可能的，所以我考虑做这样的事情：

```
private void registerFont() {
    if (platformType().equals(Platform.Type.JAVA)) {
        Platform platform = Platform.getJavaPlatformApi();
        platform.assets().setPathPrefix("com/klenwell/myproject/resources");
        platform.graphics().registerFont("Inconsolata", "fonts/Inconsolata.ttf");
    }
    else if (platformType().equals(Platform.Type.ANDROID)) {
        Platform platform = Platform.getAndroidPlatformApi();
        platform.assets().setPathPrefix("com/klenwell/myproject/resources");
        platform.graphics().registerFont("Inconsolata", "fonts/Inconsolata.ttf");
    }
    else if (platformType().equals(Platform.Type.HTML)) {
        // rely on CSS setting in HTML host file
    }
} 
```

但是核心 Platform 类中没有像 getJavaPlatformApi 这样的方法。如此[处](https://stackoverflow.com/a/9116829/1093087)所述，“您必须在您打算使用的每个后端手动注册字体。”

* * *

按照[TextDemo 示例](http://code.google.com/p/playn-samples/source/browse/)的示例，这就是我在上面的示例中为 Java 和 HTML 平台加载字体的方式：

### Java平台

更新Java 目录中的[游戏类：](http://code.google.com/p/playn-samples/source/browse/showcase/java/src/main/java/playn/showcase/java/ShowcaseJava.java)

```
public class MyProjectJava {

  public static void main(String[] args) {
    JavaPlatform platform = JavaPlatform.register();
    platform.assets().setPathPrefix("com/klenwell/myproject/resources");
    platform.graphics().registerFont("Inconsolata", "fonts/Inconsolata.ttf");
    PlayN.run(new MyProject());
  }
} 
```

### HTML 平台

编辑HTML 快照目录下的[HTML 主机文件：](http://code.google.com/p/playn-samples/source/browse/showcase/html/src/main/webapp/Showcase.html)

```
<!DOCTYPE html>
<html>
  <head>
    <title>MyProject Font Loading Example</title>
    <style>
      @font-face {
        font-family: "Inconsolata";
        src: url(myproject/resources/fonts/Inconsolata.ttf);
      }
    </style>
  </head>
  <body bgcolor="black">
    <script src="myproject/myproject.nocache.js"></script>
  </body>
</html> 
```

### 安卓平台

即将公布

### iOS平台

即将公布

我还没有涉足 Android 或 iOS 编译，所以目前我无法提供这些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T05:12:27.343

[PlayN wiki's custom fonts page](https://code.google.com/p/playn/wiki/CustomFonts)似乎涵盖了您的问题。

> PlayN 支持使用自定义字体，但需要针对您希望在游戏中使用的每个不同后端专门集成此类字体。所有后端都支持 TrueType (.ttf) 字体。一些后端（iOS、HTML5、Android）支持 OpenType (.otf) 字体。

主要步骤似乎是：

1.  将字体文件添加为资产。
2.  使用 . 为每个后端分别注册字体`platform.graphics().registerFont()`。
3.  使用 创建一个字体对象`PlayN.graphics().createFont()`，然后照常使用它。

# jquery - 自定义 jquery 插件，将每个元素与自己的数据链接

> ID：10309232
> 
> 赞同：0
> 
> 时间：2012-04-25T04:08:11.797
> 
> 标签：jquery

我正在开发一个用于文本框内提示的 jQuery 插件。到目前为止，我的工作正常。但是，我需要为具有原始提示的文本框实现“全部删除”方法。

我能想到的唯一方法是循环并将值与标题进行比较：

```
$('input').each(function() {
  if ($(this).prop('title') == $(this).val()) {
    $(this).val('');
  }
}); 
```

但是，问题在于我可以根据标题设置提示或在选项中覆盖它。所以..我不想依赖标题。

**问题**：是否有内置的 jQuery 机制来链接元素与特定数据，或者是否有其他解决方案？

这是我当前的代码：

```
(function ($) {
    var settings = {
        normColor: '#000000',
        hintColor: '#808080',
        hint: ''
    };

    var methods = {
        init: function (options) {
            var $this = $(this);

            // try to set original text color of input
            settings.normColor = $this.css('color');

            // set hint to the title
            settings.hint = $this.prop('title'); 

            // merge default settings with user provided options
            // we need to supply a blank array as the first
            // argument so the default settings are not overwritten
            settings = $.extend({}, settings, options);

            return this.each(function () {
                $this.css('color', settings.hintColor);
                $this.val(settings.hint);

                // begin on focus
                $this.on('focus', function () {
                    if ($this.val() == settings.hint) { // if what's entered is NOT the hint
                        $this.val('');

                        // return to normal color
                        $this.css('color', settings.normColor);
                    }
                }); // end on focus

                // begin on blur
                $this.on('blur', function () {
                    if ($this.val().length == 0 || $this.val() == msg) {
                        $this.val(settings.hint);
                        $this.css('color', settings.hintColor);
                    }
                }); // end on blur
            });
        },
        remove: function () {
            return this.each(function () {
                alert('remove');
            });
        },
        removeAll: function() {
            return this.each(function () {
                alert('remove all');
            });
        }
    };

    /// begin main function
    $.fn.hint = function (method) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery.hint');
        }
    };
})(jQuery); 
```

# java - JTextField : 当文本太长时如何在 JTextField 左侧设置文本

> ID：10309235
> 
> 赞同：7
> 
> 时间：2012-04-25T04:08:55.207
> 
> 标签：java, swing, jtextfield

我有一个很长的`String`内容，我想在`JTextField`. 如果`String`太长，它会显示 的右侧部分`String`，而不是左侧部分，即使我使用`setHorizontalAlignment(JTextField.LEFT)`

例如，如果我`String`是**“JTextField 示例，此文本太长”**，它应该显示为...

```
|----------------------|
| JTextField example ..|
|----------------------| 
```

但相反，它显示为...

```
|----------------------|
| this text is too long|
|----------------------| 
```

有人可以建议如何解决这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-25T04:50:59.217

当字段的大小大于字符串的字符数时，horizo​​ntalAlignement 工作正常，但如果它更小，它只会使用其创建的 setText 进行 LEFT_ALIGNMENT，而不是使用任何以后的 setText。

您可以使用以下命令将插入符号的位置强制到文本的开头：

```
myTextField.setCaretPosition(0); 
```

# ios - 如何在单击按钮时从一个视图控制器导航到另一个视图控制器？

> ID：10309238
> 
> 赞同：11
> 
> 时间：2012-04-25T04:09:27.223
> 
> 标签：ios, uiviewcontroller, navigation, uibutton

我是iOS应用程序开发的新手，请帮助我如何在按钮单击时从一个`view controller`转到另一个？`view controller`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-30T07:34:52.223

按照以下步骤，让按钮选择器为

`[button addTarget:select action:@selector(buttonClick) forControlEvents:UIControlEventTouchUpInside];` 并将选择器实现为

```
-(void)buttonClick{
UIViewController *controler = [[UIViewController alloc] init];
[self.navigationController pushViewController:controler animated:YES];} 
```

并确保 viewController 中嵌入了 NavigationController 并将 UIViewController 替换为您希望推送的控制器。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-10T15:12:36.830

在您的函数中使用此代码`Objective-C`进行导航 -

```
DashboardViewController *dvc = [self.storyboard instantiateViewControllerWithIdentifier:@"DashboardView"];
[dvc setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
[self presentViewController:dvc animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-08T04:42:18.750

尝试这个：

```
nextViewController *obj =[[nextViewController alloc]initWithNibName:@"nextViewController" bundle:nil];
[self.navigationController pushViewController:obj animated:YES];
[obj release]; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-25T04:12:25.077

您可以使用任何方法 -

> 1.  pushViewController: 动画: - 将视图推送到导航堆栈上
>     
>     
> 2.  presentModalViewController:nc 动画： - 以模态方式呈现视图。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-25T04:12:23.830

```
YourSecondViewcontroller *temp = [[YourSecondViewcontroller alloc]initWithNibName:@"YourSecondViewcontroller" bundle:nil];
[self.navigationController pushViewController:temp animated:YES]; 
```

//或者

```
[self presentModalViewController:temp animated:YES]; 
```

[`Visit this reference for tutorial and working demo code`](http://www.icodeblog.com/2008/08/03/iphone-programming-tutorial-transitioning-between-views/)

希望，这会帮助你..享受

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-25T04:35:36.363

> //SAViewController 将是您的目标视图
> 
> // 在当前视图中导入 SAViewController.h 文件

```
SAViewController *admin = [[SAViewController alloc]initWithNibName:@"SAViewController" bundle:nil];
[self presentModalViewController:admin animated:YES];
[admin release]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-25T13:00:36.123

试试这个代码：

```
- (IBAction)btnJoin:(id)sender {

   SecondViewController *ViewController2 = [self.storyboardinstantiateViewControllerWithIdentifier:@"SecondViewController"];
   [self.navigationController pushViewController: ViewController2 animated:YES];

} 
```

# jquery - 带有单选按钮的 Jquery UI 照片管理器未单击

> ID：10309239
> 
> 赞同：0
> 
> 时间：2012-04-25T04:09:31.853
> 
> 标签：jquery, jquery-ui

好的，我仍在研究这个 jquery 照片管理器，您可以在此处查看原始的完整工作原理[http://jqueryui.com/demos/droppable/#photo-manager](http://jqueryui.com/demos/droppable/#photo-manager)

这是我遇到的问题，我为每张图片都包含了一个单选按钮。我一直把头撞在墙上，想知道为什么我不能点击并改变单选按钮。现在我意识到是什么导致了这个，这是我添加这部分的代码的这一部分

```
else if ($target.is("input.ismainchk")) {
            //recycleImage($item);
        } 
```

单击单选按钮时，我真的不需要它触发另一个功能我只需要单击单选按钮

这是一些 HTML，因此您可以了解我正在使用的内容。

```
 <ul id="gallery" class="gallery ui-helper-reset ui-helper-clearfix ui-droppable">
<li id="d386f25f-66b8-429d-aaa9-c0552a4839fa" class="ui-widget-content ui-corner-tr ui-draggable" style="width: 96px; display: list-item;">
<h5 class="ui-widget-header">
<input id="textd386f25f-66b8-429d-aaa9-c0552a4839fa.jpg" class="ghost-text" type="text" size="13" defaultval="Picture Headline" maxlength="150" style="color: grey;">
</h5>
<img id="../userimages/d386f25f-66b8-429d-aaa9-c0552a4839fa.jpg" width="96" height="72" src="../userimages/d386f25f-66b8-429d-aaa9-c0552a4839fa.jpg">
<a class="ui-icon ui-icon-zoomin" href="images/high_tatras4.jpg" title="View larger image">View larger</a>
<input id="d386f25f-66b8-429d-aaa9-c0552a4839fa.jpgmain" class="ismainchk" type="radio" title="Main Img" name="maingroup">
<a class="ui-icon ui-icon-trash" title="Delete this image" href="link/to/trash/script/when/we/have/js/off">Delete image</a>
</li> 
```

这是给出问题的 JQuery 部分。

```
 // resolve the icons behavior with event delegation
    $("ul.gallery > li").click(function (event) {
        var $item = $(this),
            $target = $(event.target);

        if ($target.is("a.ui-icon-trash")) {
            deleteImage($item);
        } else if ($target.is("a.ui-icon-zoomin")) {
            viewLargerImage($target);
        } else if ($target.is("a.ui-icon-refresh")) {
            recycleImage($item);
        } else if ($target.is("input.ismainchk")) {
            //recycleImage($item);
        }

        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:23:03.377

好吧，在研究了几天之后，经过大量的反复试验，我找到了答案。返回错误；最后导致未检查单选按钮。将 return false 移动到特别需要它的单个项目允许检查单选按钮

```
 $("ul.gallery > li").click(function (event) {
        var $item = $(this),
            $target = $(event.target);

        if ($target.is("a.ui-icon-trash")) {
            deleteImage($item);
            return false;
        } else if ($target.is("a.ui-icon-zoomin")) {
            viewLargerImage($target);
            return false;
        } else if ($target.is("a.ui-icon-refresh")) {
            recycleImage($item);
            return false;
        }           

    }); 
```

# objective-c - Cocoa/Obj-C 路径控制 - 你能限制它只选择目录吗？

> ID：10309247
> 
> 赞同：3
> 
> 时间：2012-04-25T04:10:22.117
> 
> 标签：objective-c, xcode, cocoa, path

我正在学习编写 Mac 程序并正在查看路径控制对象。我需要将其选择限制为仅目录而不是文件。

有没有办法做到这一点？在法律类型框中是否有一个特殊的关键字可以表示“目录”？我尝试了“文件夹”和“目录”，但它们不起作用。

谢谢，

斯科特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T04:42:51.873

我实际上并没有尝试过，但您似乎可以调用`-[NSPathCell setAllowedTypes:]`，将 public.folder 指定为唯一允许的 UTI。

回应评论询问更多关于它应该去哪里的细节：如果你有一个到 an 的出口`NSPathControl`，你可以像这样以编程方式设置它：

```
[[myPath cell] setAllowedTypes: [NSArray arrayWithObject: @"public.folder"]]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-26T16:25:15.337

在 Interface Builder 中设置`Legal Types`为只允许`public.folder`对我有用。

# wpf - ListView.GridViewColumn (*) 宽度

> ID：10309249
> 
> 赞同：43
> 
> 时间：2012-04-25T04:10:45.393
> 
> 标签：wpf, listview, gridview, wpfdatagrid, gridviewcolumn

我正在使用`ListView`控件而不是`DataGrid`在我的**WPF**应用程序中。我想给`*`我的宽度`ListView.GridViewColumn`，但是每当我给我提供`*`宽度时`ListView.GridViewColumn`，它都会给我一个编译时错误。请建议我如何提供`*`宽度`ListView.GridViewColumn`，以便`ListView.GridViewColumn`在我最大化屏幕时自动填充额外空间。

对此的任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-04-25T04:51:55.083

请尝试该解决方案：

```
<ListView>
    <ListView.View>
        <GridView>
            <GridViewColumn Header="column1" x:Name="col1"/>
            <!--Column that shall resize: Width is set to the Actual Width of the helper field defined below-->
            <GridViewColumn Header="column2" 
                            Width="{Binding ElementName=helperField, Path=ActualWidth}"/>
        </GridView>
    </ListView.View>
    Test Text
</ListView>

<!--This is the hidden helper Grid which does the resizing -->
<Grid Visibility="Hidden">
    <Grid.ColumnDefinitions>
        <!--Width is bound to width of the first GridViewColumn -->
        <ColumnDefinition Width="{Binding ElementName=col1, Path=ActualWidth}"/>
        <!--Width is set to "Fill"-->
        <ColumnDefinition Width="*"/>
        <!--Correction Width-->
        <ColumnDefinition Width="10"/>
    </Grid.ColumnDefinitions>
    <!--This is the hidden helper Field which is used to bind to, using the "Fill" column of the helper grid-->
    <Grid Grid.Column="1" x:Name="helperField"/>
</Grid> 
```

您还可以在以下链接中找到其他一些解决方案：

[http://social.msdn.microsoft.com/forums/en-US/wpf/thread/3ee5696c-4f26-4e30-8891-0e2f95d69623/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/3ee5696c-4f26-4e30-8891-0e2f95d69623/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T00:33:40.103

我在这里发布了我的方法，这有点不同（但发现它非常可靠并且允许百分比宽度列[https://stackoverflow.com/a/10526024/41211](https://stackoverflow.com/a/10526024/41211)），因为我尝试了上述方法并找到了我的 devenv。 exe 处理最大化，因为它不断尝试使用上述动态绑定重新评估我的设计器视图。

# regex - Django urlconf中的正则表达式“OR”匹配，而不将匹配作为视图参数发送

> ID：10309254
> 
> 赞同：0
> 
> 时间：2012-04-25T04:12:09.953
> 
> 标签：regex, django, http-status-code-404, urlconf

在我的 Django urlconf 中，我想为探测脚本的请求返回 404。否则，由于我使用的是 FlatPage 中间件，因此该请求会不必要地访问数据库以查找相应的 FlatPage。

我的问题是，正确匹配的以下模式正在发送“php”、“cgi”或“pl”作为视图函数的`template_name`参数。`page_not_found`

```
urlpatterns = patterns('',
    # don't even bother looking up a flatpage for these matches
    (r'\.(php|cgi|pl)$', 'django.views.defaults.page_not_found'), 
    ...
) 
```

有什么方法可以在不将匹配作为参数发送到视图的情况下执行该正则表达式“或”逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:14:30.017

非捕获组用 表示[`(?:...)`](http://docs.python.org/library/re.html#regular-expression-syntax)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:14:54.760

您可以使用非捕获组：`(?:regex)`

所以你的模式是：

`(r'\.(?:php|cgi|pl)$', 'django.views.defaults.page_not_found'),`

# ruby - 如何通过 API 更新 Facebook 页面的地址

> ID：10309259
> 
> 赞同：0
> 
> 时间：2012-04-25T04:12:33.760
> 
> 标签：ruby, facebook, koala

我正在尝试使用 koala ruby​​ gem 通过 API 更新 facebook 业务页面的地址/位置，到目前为止还没有有效的解决方案。

```
page_access_token = "gw4t3434"
page_api = Koala::Facebook::API.new(page_access_token)
page_api.graph_call('me', {:location => {:street => "my street"}}, 'post') #error. Koala::Facebook::APIError: OAuthException: (#100) Parameters do not match any fields that can be updated
page_api.graph_call('me', {:location => {:address => "my street"}}, 'post') #error. Koala::Facebook::APIError: OAuthException: (#100) Parameters do not match any fields that can be updated
page_api.graph_call('me', {:address => "my street"}}, 'post')# not raise error but not working
page_api.graph_call('me', {:street => "my street"}}, 'post')# not raise error but not working 
```

[我在facebook api 参考](http://developers.facebook.com/docs/reference/api/page/)中也找不到关于更新页面地址的明确解释。我可能会遗漏一些东西...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:45:27.433

您不能写入位置对象，只能读取。请参阅 API 中的“[更新页面属性](https://developers.facebook.com/docs/reference/api/page/)”。此外，没有权限请求写入位置对象。

另一种方法是你写到页面的关于部分——这是允许的。也许您可以在此处放置地址参考，以满足使最终用户可以看到地址更改的要求。

# javascript - 如何使用 RubyMine 4.0 的“content_for”助手启用 JavaScript 代码格式化程序

> ID：10309261
> 
> 赞同：1
> 
> 时间：2012-04-25T04:12:39.313
> 
> 标签：javascript, ruby-on-rails, rubymine

我正在为 Mac 使用 RubyMine 4.0.3。当我编写 ERB 视图模板并编写内联 javascript 时，'content_for :javascript' 助手没有突出显示并格式化为 javascript。如下所示：

```
<% content_for :javascript do %>
/* JavaScript code */
<% end %> 
```

如何在 Rails 规则上启用 RubyMine 的 JavaScript 代码格式化程序？我发现“脚本”标签被集中突出显示，如下所示：

```
<script type="text/javascript">
/* JavaScript code */
</script> 
```

但这不是 Rails 风格，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:14:12.750

现在不可能，我已经[提交了功能请求](http://youtrack.jetbrains.com/issue/RUBY-10969)，星/投票。

# java - 在for每个循环中的if中的语句的返回值

> ID：10309264
> 
> 赞同：1
> 
> 时间：2012-04-25T04:13:02.363
> 
> 标签：java, if-statement, foreach, return

我有这种方法，它使用一个 for each 循环，其中有一个 if 语句

```
public static Apartment getApartment(String aNumber)

//for loop to iterate through the list of apartments         
{   
for (Apartment x : listOfApartments) 
  { 
  // Variable to hold the value of returned apartment    
  if (x.getApartmentNo().equalsIgnoreCase(aNumber))
  { Apartment chosen = x;
  }
  else 
  {JOptionPane.showMessageDialog(null, "Apartment not found");
  }

}  
return chosen;
} 
```

我收到未找到符号选择的错误。我想我在错误的地方声明了变量。有什么帮助吗？注意：这是一个接受 String 并返回 Object Apartment 的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T04:18:19.003

你必须重写你的循环：在你完成循环之前，你不应该做出没有找到公寓的决定。您也不需要将值分配给临时变量 - 一旦找到公寓，立即将其归还。

您可以报告只有在完成循环后才找到公寓。

```
for (Apartment x : listOfApartments) { 
    // Variable to hold the value of returned apartment    
    if (x.getApartmentNo().equalsIgnoreCase(aNumber)) {
        return x;
    }
}
JOptionPane.showMessageDialog(null, "Apartment not found");
return null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T04:17:19.360

如果您的条件“x.getApartmentNo().equalsIgnoreCase(aNumber)”评估为假怎么办？
未创建“选择”的公寓数据类型！
你怎么能返回尚未实例化的东西？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T04:18:45.827

这是一个范围问题，Chosen 是在 if 语句中创建的。

在外部声明它并将其设置为 null，然后如果条件为真，则该函数将返回 selected，如果不是，则返回 null。

```
public static Apartment getApartment(String aNumber)

//for loop to iterate through the list of apartments         
{   
Apartment chosen = null;

for (Apartment x : listOfApartments) 
  { 
  // Variable to hold the value of returned apartment    
  if (x.getApartmentNo().equalsIgnoreCase(aNumber))
  { chosen = x;
  }
  else 
  {JOptionPane.showMessageDialog(null, "Apartment not found");
  }

}  
return chosen;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T04:20:21.607

编写该方法的一种简单（且正确）的方法是：

```
public static Apartment getApartment(String aNumber) {
    for (Apartment x : listOfApartments)
      if (x.getApartmentNo().equalsIgnoreCase(aNumber))
        return x;
    JOptionPane.showMessageDialog(null, "Apartment not found");
    return null;
} 
```

不必为应该立即返回的值声明局部变量。此外，消息对话框应该只*在*循环结束后出现，因为只有这样我们才能确定没有公寓有被搜索的号码。

关于问题中的代码，您是对的：该变量`chosen`应该在循环*之前*`for`声明，因此可以在循环*之后*引用它。您声明它的方式，它仅在`if`块内可见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T04:17:09.893

你是对的；你宣布选错地方了。在循环之前声明它，但将它（那里）分配给 null。这样，当您到达退货线时，它就可以保证有一个价值。

或者，假设只有一间公寓匹配（或者，您不在乎哪一间），您可以简单地`return x;`输入 if...true 情况。并在循环后返回 null，假设循环完成。此外，因为您正在循环播放，所以每个*不*匹配的公寓都会显示“未找到”消息；您可能只想在循环完成后显示它而不找到公寓。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T04:17:12.107

您代码中的变量`chosen`被困在创建它的范围内，因此不能在`{}`. 此外，if 语句的 else 分支在 for 循环的其余部分运行之前触发。

您实际上不需要保存选择的公寓，您可以立即将其归还，如下所示：

```
public static Apartment getApartment(String aNumber)
{   
    for (Apartment apartment : listOfApartments) 
    {   
        if (apartment.getApartmentNo().equalsIgnoreCase(aNumber))
            return x;
    }  
    JOptionPane.showMessageDialog(null, "Apartment not found");
    return null;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-25T04:18:04.743

在 for 循环之前声明变量“选择”，如下所示：

```
Apartment chosen = new Apartment(); 
```

当你找到你要找的公寓时，你也可以跳出 for 循环。如果列表很大，它可能会节省一些时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-25T07:59:43.093

函数返回的变量`chosen`在这里超出范围，在循环开始之前在方法的开头声明它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-25T08:10:37.890

接受的答案是正确的，但我强烈建议避免使用多个返回语句。具有多个返回语句的代码更难管理。可能看起来还不是什么大问题，但是当代码增长时，这可能成为一个真正的问题。

```
public static Apartment getApartment(String aNumber)
{   
    Apartment result = null;
    for (Apartment apartment : listOfApartments) 
    {   
        if (apartment.getApartmentNo().equalsIgnoreCase(aNumber))
        {
             result = apartment;
             break;
        }
    }  
    if (result == null)
    {
        JOptionPane.showMessageDialog(null, "Apartment not found");
    }
    return result;
} 
```

# html - 设置div高度自动和滚动可以使用

> ID：10309268
> 
> 赞同：4
> 
> 时间：2012-04-25T04:13:51.577
> 
> 标签：html

```
<div style='width: 240px; height:530px; overflow:scroll;'>
<table>
bla.. bla..
</table>
</div> 
```

亲爱的，我想自动设置这个 div 的高度，但是当我把它改成 height:auto; 表中的数据不能滚动。

有人有建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T04:28:12.923

```
<div style='width: 240px; min-height:530px; overflow:scroll;'>
<table>
bla.. bla..
</table>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T04:22:08.330

您可以使用 set **min-height**和**max-height**，因此如果超过 max-height 将显示滚动

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-30T13:52:00.423

```
<div style='width: 240px; height:530px; overflow-y: auto;'>

<table>
bla.. bla..

</table>

</div> 
```

我们可以使用其他选项**溢出：auto;** 如果我们想要滚动条 X 和 Y

# php - 如何将已有的 html 组织或使用到一个新的 php 应用程序中？

> ID：10309273
> 
> 赞同：0
> 
> 时间：2012-04-25T04:14:50.920
> 
> 标签：php

寻找有关如何处理大量预先存在的 .html 文件（50,000 多个）的想法。我想要完成的是能够保持相同的层次结构、链接等......但通过 php 或其他方式向它们添加内容......

能够将它们组织或路由到 php 应用程序或我自己的 cms 中。我一直在想办法做到这一点，并提出了一些想法，但希望能从一些专业人士那里得到一些反馈。

我真的只需要创建一个可以获取数据一次并将其添加到我开发的 cms 的东西。我有一个脚本，我编写了一个能够索引和搜索等的脚本。但是如何在保持结构的同时使用内容并添加到它们让我有点摇摆不定。有什么想法吗？

* * *

更新：我发现了一些让我更容易的技巧

使用 .htacess 文件和广告：

AddType 应用程序/x-httpd-php .html .htm

然后我可以将包含添加到这些文件中，我注意到将其放在配置文件中的哪个位置，但当我知道时会更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:21:47.040

我将采取的方法是将 html 保留在您需要的函数中。在逻辑上将它们分开为：

```
function output_html_one($link_here, $or_link_there...) {...}
function output_html_two($other_links...) {...} 
```

当您想将它们与您拥有的文件一起输出时，只需调用该函数，它将被发送出去。我相信其他人会给你偏好。这允许您通过参数让他们访问变量，这是一个缺点，但它可以使所有内容井井有条并提供一些清晰度，因为您可以将原始 html 与代码中的逻辑分开。我很好奇看看别人怎么说。

编辑：我在 html_header 中添加了 $user ，所以它更清晰。例如，假设您可能想要检查用户是否已登录。这为您提供了一种定制 html 的方法。然后您转到包含此内容的文件，您可以跳入和跳出 php 标签以添加动态内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:40:56.050

如果您要使用像 Wordpress 这样的 CMS，假设您的内容遵循某种常规结构，您可以将 HTML 框架重新创建为模板，然后编写一个脚本来解析每个 HTML 文件并根据 HTML 文件名等标准创建一个帖子.

您甚至可以通过在帖子创建时设置 slug 来匹配文件名，但如果您打算保留指向该站点的所有反向链接，则需要服务器重写规则来删除 .htm(l)。

当然，我过于简单化了，因为有 50,000 多个文件，移动所有数据并非易事。

也许使用这样的东西自动化它：[http ://wordpress.org/extend/plugins/import-html-pages/](http://wordpress.org/extend/plugins/import-html-pages/)

# c# - 从 CLI C++ 应用程序在库中加载 C# WPF 表单

> ID：10309279
> 
> 赞同：2
> 
> 时间：2012-04-25T04:15:44.507
> 
> 标签：c#, c++, .net, c, wpf

我有一个用 C# 编写的 dll 文件，它与我用 C++ 编写的应用程序的解决方案相同，其中一些文件设置为在 /cli 标志下编译。我想在我的 C# dll 中加载 WPF 表单并将其显示在 C++ /cli 应用程序中。

我已经将我的 C++ 应用程序配置为显示 WPF 内容，因为我目前正在以编程方式将控件添加到 WPF 表单中，但我无法找到如何在运行时从外部资源加载表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:41:26.400

如果您将控件引用添加到您的 CLI 项目，您应该能够访问您的控件；让应用程序句柄使用[ApplicationHandle->Run(YourWindow)](http://msdn.microsoft.com/en-us/library/ms597011.aspx)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-26T06:49:15.280

您可以像这样将外部 DLL 加载到您的项目中

```
Dim assembly As Assembly = Assembly.LoadFile(libraryPath & "filename.dll")
Dim type As Type = assembly.[GetType]("NameSpace.ClassName")

// i'm loading as a form here but can be any control
Dim frm As Form = TryCast(Activator.CreateInstance(type), Form) 
```

最后一点，如果您在加载的表单（上图）中加载一个类或控件，该表单也驻留在同一个程序集中，您还需要先加载它，然后在表单中调用它

# sql - 解码与 NVL 功能有什么区别？

> ID：10309282
> 
> 赞同：3
> 
> 时间：2012-04-25T04:16:09.503
> 
> 标签：sql, oracle

我一直想知道 DECODE 和 NVL 功能的内部工作是如何完成的。如果 DECODE 函数中的参数数量更多，它是否有更多开销？

此外，NVL 函数是否评估给定的值而不是 NULL，即使原始值不是 NULL，例如对于 NVL(COL1, func_call())，即使 COL1 不是 NULL，也会计算 func_call()。在这种情况下，如果 COL1 很少为 null 并且 func_call() 很耗时，则可能会产生性能问题。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T04:47:38.507

NVL 总是评估两个参数，所以即使 COL1 不为空，它也会评估 func_call()

解码确实短路，因此第一个有效条件停止执行。

使用类似的论点，两者之间的性能非常相似。我通常只是根据简单性来选择 - NVL，除非我需要一个 if-then-else 类型的构造。

- - 编辑 - -

在确实使用 NVL 的情况下，如果您发现自己在使用 nvl(col1, nvl(col2, '0')) 之类的嵌套 NVL，请查看 coalesce 函数，该函数将表示为 coalesce(col1, col2, '0' ) - 返回第一个非空参数

# jquery - jQuery 与动态内容相等的 div 高度

> ID：10309284
> 
> 赞同：0
> 
> 时间：2012-04-25T04:16:57.177
> 
> 标签：jquery, css, height

我正在尝试实现等高的列，其中一个包含扩展菜单。

我*几乎*可以使用下面的代码（基于[此代码](http://blog.huidesign.com/wp-content/demo/equal_height/equalColumnDynamic.html)）运行它。[您可以在此页面](http://chantalorganics.co.nz/wordpress/top-products/)和[此页面](http://chantalorganics.co.nz/wordpress/)上看到列的高度相同。

唯一的问题是在后一页和任何其他短页上，内容下方都有一个空格。计算的高度是否包括隐藏的子菜单？如果是这样，我可以停止这样做还是需要使用不同的代码？

提前感谢您的任何指导！

简化的 HTML：

```
<div id="body-container">
<div id="primary-menu">
  <div class="menu">
  <ul>
  <li>Menu item</li>
  <li>Menu item</li>
  <li>Menu item
    <ul class="sub-menu" style="float: none; display: none; visibility: hidden;">
    <li>Submenu item</li>
    <li>Submenu item</li>
  </li>
  </ul>
  </div>
</div>
<div id="container">
Main content
</div>
</div> 
```

jQuery：

```
jQuery(document).ready( function(){
    function equalHeight(){
        var heightArray = jQuery("#body-container>div").map( function(){
                 return  jQuery(this).height();
                 }).get();
        var maxHeight = Math.max.apply( Math, heightArray);
        jQuery("#container").height(maxHeight);
        jQuery("#primary-menu").height(maxHeight);
            }
    equalHeight();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:50:21.533

Try using visiblity:collapse instead of visiblity:hidden.... Because hidden hides the content but it has the space of the content calculated... But collapse hides the content along with the space... [try this...](http://w3schools.com/cssref/playit.asp?filename=playcss_visibility_collapse)

# java - Android arraylist 大量字符串对象

> ID：10309288
> 
> 赞同：1
> 
> 时间：2012-04-25T04:17:50.147
> 
> 标签：java, android, storage

我正在为网站开发 Android 应用程序。它有大约 100000 的大量用户。我必须将这些用户提取到 Arraylist 以进行自定义用户搜索。将这么多数据存储在 Arraylist 中（尤其是在 Android 中）是一种好习惯吗？如果没有，我打算使用 Sqlite 数据库有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T04:37:51.980

您不想使用任何类型的列表。

数据库经过优化以存储和搜索大量数据，如果您将这些用户名存储在 ArrayList 中，您将负责确保有效搜索。

首先，这似乎是一个糟糕的主意。为什么要拥有所有 10 万个以上用户名的本地副本？这是对带宽的严重浪费！如果应用程序可以在数据库中查询它正在搜索的用户名，那就更好了。然后，您可以仅将结果存储在客户端上。

```
ex: SELECT * FROM `user` WHERE `name` LIKE "david" 
```

仅存储查询的结果。不是每个用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T04:22:35.930

制作数据类并使其可序列化并使用文件存储..因为如果您使用DataBase获取和放置数据是一项不同的任务......存储文件对象更适合数据处理..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T04:36:09.617

将内容存储在 ArrayList 中似乎不是一个好主意。根据数据或您的应用程序，您可能会收到“OutOfMemory”错误。尝试将信息持久化到 SQLite 数据库或文件中。

另一方面，我认为没有必要批量下载 10 万用户数据并将其存储在本地以便在设备上进行搜索。您可以让您的服务进行搜索并仅返回搜索结果。如果这是可能的，那么将其存储在 ArrayList 中也不错。如果您的数组列表的大小超过了 DVM 允许的数量，您可以覆盖 onLowMemory 回调并清空列表内容。通过这种方式，您可以防止您的应用程序被杀死

# objective-c - 如何将特定混合模式添加到自定义 AccessoryView

> ID：10309289
> 
> 赞同：1
> 
> 时间：2012-04-25T04:17:56.880
> 
> 标签：objective-c, ios, xcode

我有一个表格视图，我希望自定义附件视图按钮。为此，我有带有半透明像素的自定义 PNG 图像。

```
UIButton *myAccessoryButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 24, 24)];
[myAccessoryButton setUserInteractionEnabled:YES];

[myAccessoryButton setBackgroundColor:[UIColor clearColor]];

[myAccessoryButton setImage:[UIImage imageNamed:@"accessory_btn"] forState:UIControlStateNormal];
[myAccessoryButton addTarget: self
                      action: @selector(accessoryButtonTapped:withEvent:)
            forControlEvents: UIControlEventTouchUpInside];

[cell setAccessoryView:myAccessoryButton]; 
```

这对我来说很好用按钮绘制，除了一个麻烦。在我的模板 (PSD) 中，此按钮具有混合模式 - 重叠，当我从 PSD 格式导出该按钮时，它具有白色半透明像素，必须以相同的重叠混合模式与表格背景混合​​。但默认情况下，当我将导出的 PNG 加载为 UIImage 以自定义我的附件视图时，它会在默认模式下混合。

如何更改 UIImage 或 UIButton 或 AccessoryView 的混合模式可能是？

![这是 Photoshop 视图](../Images/bfa9d2f666d6e01b388fbbd80666fc44.png) ![这是模拟器视图](../Images/7b2c61754bbbdf2b73a2d382ca73956c.png) ![在此处输入图像描述](../Images/835d8be506797865a02504e068e47d3c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:16:40.790

左边的图片是你在 Photoshop 中得到的吗？您希望它在不改变色调的情况下使背景变亮吗？如果是这样，就没有简单的方法来实现这一目标。

有两种部分解决方案：

1.  有一个单独的`drawRect`块（或其`CALayer`等效项）来绘制背景并使用适当的`CGBlendMode`.
2.  编辑图片，使底部的辉光是当前背景的棕色阴影。

无论哪种方式，你都会失去灵活性；拖动按钮或更改背景图形并将所有内容很好地融合在一起会很好。

这可能会改变。 `CALayer`已经有一个名为`compositingFilter`. 但是，从 iOS 5.1 开始，它的行为是未定义的。如果将来有人在 iOS*确实*具有可以工作的合成过滤器的情况下阅读此内容，请添加评论以说明这一点。

# wcf - WCF 服务构造函数

> ID：10309291
> 
> 赞同：3
> 
> 时间：2012-04-25T04:18:06.553
> 
> 标签：wcf, constructor

嗨，我的 WCF 服务有一个服务构造函数。理想情况下应该只初始化一次。但是我看到每隔几分钟就会调用一次服务构造函数。是否有一些 timevalue 或一些其他配置设置可以限制 no。对构造函数的调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:37:55.147

您可以通过使用静态构造函数来做到这一点。

如果构造函数需要初始化非静态属性，那么您可能需要的是单例 WCF 服务。WCF 服务可以有不同的实例化模式（PerCall、PerSession 和**Single**）

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)] 
```

请注意，单一实例化模式可能无法扩展。

您可以在此处阅读有关[服务实例管理的更多信息](http://www.codeproject.com/Articles/86007/3-ways-to-do-WCF-instance-management-Per-call-Per#Single%20Instance%20mode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:33:04.603

WCF 服务类的创建（以及因此构造函数的调用）取决于服务的[InstanceContextMode](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.instancecontextmode.aspx)值。根据其[值](http://msdn.microsoft.com/en-us/library/system.servicemodel.instancecontextmode.aspx)（例如 PerCall、PerSession、Single）创建服务实例。

您可以设置`Single`使类行为类似于单例的值。

# c# - 如何使用 POST 在 HTTP 服务器上上传文件？

> ID：10309293
> 
> 赞同：2
> 
> 时间：2012-04-25T04:18:28.660
> 
> 标签：c#, asp.net, .net, http, http-post

我正在尝试使用 POST 在 HTTP 服务器上上传文件，但是当我调用它时，它会在 **req.GetResponse();** 在客户端代码中

**远程服务器返回错误：(405) Method Not Allowed。**

**客户代码**

```
 public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            string fileToUpload = Server.MapPath("~/Files/Ricky_Martin_Livin_la.mp3");
            string uploadUrl = "http://localhost/soundcheck/uploadfiles.aspx";
            //string uploadUrl = "http://10.0.2.2/musicapp/handle_upload.php";
            FileStream rdr = new FileStream(fileToUpload, FileMode.Open);
            HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uploadUrl);
            req.Method = "PUT"; // you might use "POST"
            req.ContentLength = rdr.Length;
            req.AllowWriteStreamBuffering = true;

            Stream reqStream = req.GetRequestStream();

            byte[] inData = new byte[rdr.Length];

            // Get data from upload file to inData 
            int bytesRead = rdr.Read(inData, 0, int.Parse(rdr.Length.ToString()));

            // put data into request stream
            reqStream.Write(inData, 0, int.Parse(rdr.Length.ToString()));

            rdr.Close();
            req.GetResponse();

            // after uploading close stream 
            reqStream.Close();
        }
    } 
```

**服务器代码**

```
using System;
using System.Collections;
using System.IO;
using System.Data;
using System.Web;
using System.Text;
using System.Web.Security;

public partial class uploadfiles : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            LogInFile("First");
            HttpFileCollection uploadFile = Request.Files;
            LogInFile("Second");
            if (uploadFile.Count > 0)
            {
                HttpPostedFile postedFile = uploadFile[0];
                LogInFile("Thrid");
                System.IO.Stream inStream = postedFile.InputStream;
                LogInFile("Forth");
                byte[] fileData = new byte[postedFile.ContentLength];
                LogInFile("Fifth");
                inStream.Read(fileData, 0, postedFile.ContentLength);
                LogInFile("Sixth");
                postedFile.SaveAs(Server.MapPath("Data") + "\\" + postedFile.FileName);
            }        
        }
        catch (Exception ex)
        { 
            StringBuilder sb = new StringBuilder();
            sb.AppendLine("Message : " +ex.Message);
            sb.AppendLine("Source : " + ex.Source);
            sb.AppendLine("StackTrace : " + ex.StackTrace);
            sb.AppendLine("InnerException : " + ex.InnerException);
            sb.AppendLine("ToString : " + ex.ToString());

            LogInFile(sb.ToString());
        }
    }
    public void LogInFile(string str)
    {
        StringBuilder sb = new StringBuilder();
        using (StreamReader sr = new StreamReader(Server.MapPath("Data") + "\\expfile.txt"))
        {            
            sb.AppendLine("= = = = = =");
            sb.Append(sr.ReadToEnd());
            sb.AppendLine();
            sb.AppendLine();
        }
        sb.AppendLine(str);
        using (StreamWriter outfile = new StreamWriter(Server.MapPath("Data") + "\\expfile.txt"))
        {
            outfile.Write(sb.ToString());
        }
    }

} 
```

在服务器代码中，我编写这些日志来跟踪哪一行是否有任何错误或错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T04:24:51.923

```
req.Method = "PUT"; // you might use "POST" 
```

到

```
req.Method = "POST"; 
```

然后再试一次。

# python - Django 文档：模型；代码第 1 行的错误

> ID：10309295
> 
> 赞同：0
> 
> 时间：2012-04-25T04:18:38.177
> 
> 标签：python, django, django-models

在[有关 Models 的 Django 文档中](https://docs.djangoproject.com/en/1.3/topics/db/models/)，我被要求运行的第一个命令和 python 的响应是：

```
>>> from django.db import models

Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    from django.db import models
  File "C:\Python26\lib\site-packages\django\db\__init__.py", line 11, in <module>
        if DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "C:\Python26\lib\site-packages\django\utils\functional.py", line 184, in inner
    self._setup()
  File "C:\Python26\lib\site-packages\django\conf\__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is             undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable     DJANGO_SETTINGS_MODULE is undefined. 
```

从堆栈跟踪中可以看出，我正在 python 2.6.6 中运行 django 服务器。谁能给我一个线索，让我从本教程的右脚开始？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:20:58.940

你这样做是错的。

```
$ python manage.py shell 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T04:21:20.290

你是从 ./manage.py shell 运行这些命令吗？如果不指定项目的 settings.py 文件的位置，则无法从常规 python shell 运行 django 命令。Django 的 ./manage.py shell 命令为您指定了这一点，从而更容易在命令行上执行 django 操作。

如果您在当前工作目录中没有看到名为 manage.py 的文件，那么这可能意味着您不在 django 应用程序的目录中，或者您还没有启动它。

编辑：此外，该文档是作为在应用程序的 models.py 文件中放入内容的示例，而不是您应该在命令行中输入的内容。这并不意味着它不能在命令行上运行（如果你使用 manage.py shell），但这不是文档所建议的。如果您不清楚如何启动 shell 以及哪些文件放在哪里，请查看教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T06:10:32.687

这里的[答案](https://stackoverflow.com/questions/4382032/defining-a-model-class-in-django-shell-fails/10328007#10328007)肯定适用于我正在使用的交互式提示，但是我不认为第一个代码块的意图是要实际运行！[在模型文档](https://docs.djangoproject.com/en/1.4/topics/db/models/)中的第一个代码之后，您应该将下一个代码放入在上一个教程中创建的 models.py 文件中......我想这就是他们巧妙地标记该部分“快速示例”的原因。多么令人头疼！

此外，该段继续说“上面的 Person 模型将创建一个类似...的数据库表”，这表明它从未打算按原样实际运行。

# javascript - 基于时间和 if/else 的 javascript 日期或下一个日期

> ID：10309298
> 
> 赞同：0
> 
> 时间：2012-04-25T04:19:06.807
> 
> 标签：javascript

我想在我的网站上显示我当前的发货时间。每天我都有一个下午 2:00 的时间，并希望将日期更改为下一个工作日。现在我必须每天手动更改它

```
Currently Shipping:
Tuesday, April, 24th
Cut-off Time:
2:00 pm PST 
```

我已经做了足够多的研究，相信这是可能的，但我对自己操纵脚本以将各个部分放在一起的了解还不够。

两点通常不会改变所以我希望我可以使用脚本在指定的时间自动改变（只是日、月和日期）

请指教 谢谢！

到目前为止，我尝试整理的内容

```
var currentTime = new Date();
var month = currentTime.getDay();
var month = currentTime.getMonth() + 1;
var date = currentTime.getDate();
var thehour = datetoday.getHours();
if(thehour < 14) { document.write(day + "," + month + "," + date) }
else if (thehour > 14) ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:43:03.567

首先，您必须在服务器上执行此操作，因为客户端计算机不知道正确的时区偏移量（可能是 -8 小时或 -7 小时，具体取决于是否为夏令时）并且客户端时钟可能不是准确设置（或可能故意设置错误）。

因此，如果您要将偏移量发送给客户端，您不妨只发送时间。当你发送区域时，不要只发送 PST，因为这对很多人来说是模棱两可的，发送实际的偏移量（UTC -8 或 -7 视情况而定）。或者以 UTC 格式发送截止时间并让用户计算出来。

例如，要将本地时间转换为其他时区，您可以执行以下操作：

```
var pstOffset = 480; // Standard time offset
var pdtOffset = 420  // Daylight saving offset
var now = new Date();

// Adjust to PST
now.setMinutes(now.getMinutes() + now.getTimezoneOffset() - pstOffset);

alert(now); // Time in PST 
```

但请注意，日期对象仍处于本地时区，因为您无法更改实际偏移量，只能调整时间以允许它。

要发送截止时间并将其转换为本地时间，最简单的方法是发送 UTC 时间戳并在本地框中进行转换，因此：

```
var ts  = '2012-04-24T08:00:00Z'; // UTC cut-off for standard time on 24/4
var tsd = '2012-04-24T07:00:00Z'; // UTC cut-off for daylight saving time on 24/4

function utcToLocal(s) {
  var bits = s.split(/[-T:Z]/g); // Split string into useful bits
  var d = new Date();

  // Set local date object to UTC supplied time
  d.setUTCFullYear(bits[0], bits[1] - 1, bits[2]);
  d.setUTCHours(+bits[3], +bits[4], +bits[5]);
  return d;
}

alert( 'Your clock says it\'s now ' + (new Date()) +
       '\nThe cut-off for shipping is ' + utcToLocal(ts)); 
```

并根据服务器时间发送适当的 UTC 时间戳（例如，如果他们错过了 4 月 24 日的发货时间，则向他们发送 4 月 25 日的时间）。

### 编辑

这是一个完整的解决方案，但请记住我说过不要在客户端上这样做：

```
/* Get the cut-off of 2pm PST or PDT on current or
 * next working day. If d is true (e.g. 1) use PDT, 
 * otherwise use PST   
**/
function setCutoffTime(d) {
  var pstOffset = 480; // PST offset in minutes
  var psdOffset = 420; // PDT offset in minutes
  var now = new Date();
  var addDays = 0;
  var cutoff;
  var days = 'Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');
  var months = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');

  // Utility to add a leading zero      
  function addZ(n) {
    return (n<10?'0':'') + n;
  }

  // Convert to PST time
  now.setMinutes(now.getMinutes() + 
                 now.getTimezoneOffset() - (d? psdOffset : pstOffset));

  // If after 2pm, push to tomorrow
  if (now.getHours() > 14) now.setHours(now.getHours() + 12);

  // If on a weekend, push to Monday
  if (now.getDay() == 6) addDays = 2;
  if (now.getDay() == 0) addDays = 1;

  now.setDate(now.getDate() + addDays);

  // Now on working day pre 2pm, so set time to 14:00
  now.setHours(14, 0, 0);

  // And convert back to local time
  now.setMinutes(now.getMinutes() - now.getTimezoneOffset() + 
                 (d? psdOffset : pstOffset));

  // Return a formatted string - should  be a separate function
  return 'Shipping cut-off: ' + 
          addZ(now.getHours()) + ':' +
          addZ(now.getMinutes()) + ' on ' +
          days[now.getDay()] + ', ' +
          now.getDate() + ' ' +
          months[now.getMonth()] +
          ', ' + now.getFullYear();
}

alert(setCutoffTime()); // Cut-off for PST
alert(setCutoffTime(true)); // Cut-off for PDT 
```

# html - 选择选项，带锚

> ID：10309299
> 
> 赞同：1
> 
> 时间：2012-04-25T04:19:19.270
> 
> 标签：html

我如何将以下代码转换为`<select> <option>`下拉列表？目前，当我选择下面的任何一个链接时，它会过滤掉一个仅显示所选项目的列表。

```
<span>Filters:</span>
<a class="button" href="#all">All</a>
<a class="button" href="#settings">Settings</a>
<a class="button" href="#categories">Categories</a> 
```

**试图做这样的事情**

```
<select>
<option class="button" href="#all">All</option>
<option class="button" href="#settings">Settings</option>
<option class="button" href="#categories">Categories</option>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:05:46.450

如果我理解正确，您希望您的链接表现得像一个选择框。[http://jsfiddle.net/aatZJ/1/](http://jsfiddle.net/aatZJ/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T04:24:57.587

jQuery`.change()`可以帮助你。

[http://api.jquery.com/change/](http://api.jquery.com/change/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T04:30:37.523

为什么不将 onClick 事件添加到您的选项元素？

只需在每个 onclick 中将 location.href 设置为所需的值。

# java - 在 Windows 7 上为 JNI_CreateJavaVM 链接到什么库？

> ID：10309304
> 
> 赞同：2
> 
> 时间：2012-04-25T04:19:53.127
> 
> 标签：java, c++, java-native-interface

我正在用 C++ 构建 JNI 应用程序的第一个工作版本。我不认为申请的具体细节对这个问题很重要。如果是，我将附加它们。

我的代码编译没有错误。但是，有一个链接器错误：

```
error LNK2019: unresolved external symbol __imp__JNI_CreateJavaVM@12 
```

我知道这`JNI_CreateJavaVM`不包含在`jvm.lib`/中`jvm.dll`。但是，我无法确定该函数需要链接到哪个*库*。

我安装了 JDK（但只有 64 位 - 这是一个 32 位 C++ 应用程序，可能是相关的）。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T11:50:06.820

将 jvm.lib 链接到 Visual Studio 中的项目的步骤：

*   右键单击项目-> 属性。
*   在 Properties 对话框中，在 Linker->Input->AdditionalDependencies 区域下添加 jvm.lib。
*   最后在Linker->General->AdditionalLibraryDirectories下写入 jvm.lib 路径（如“C:\Program
    Files\Java\jdk1.7.0_60\lib”）

在这些步骤之后，您的项目可以链接到 jvm 并且运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:31:39.850

If you want to run a Java application from C++ I suggest using exec and creating a new process esp if one is 32-bit and the other 64-bit.

# java - 在 JPA 中，哪种类型的参数更适合使用“位置/命名”？

> ID：10309314
> 
> 赞同：0
> 
> 时间：2012-04-25T04:21:25.103
> 
> 标签：java, hibernate, jakarta-ee, jpa-2.0

使用 Hibernate 作为提供者。

就性能（或其他）而言，**哪种类型的参数更好用？** 为什么**？**

*位置*

```
TypedQuery<Client> query = em.createQuery
  ("FROM Client c WHERE c.clientId = ?1",Client.class);
query.setParameter(1, clientId); 
```

或*命名*

```
TypedQuery<Client> query = em.createQuery
  ("FROM Client c WHERE c.clientId = :clientId",Client.class);
query.setParameter("clientId", clientId); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T05:25:39.110

在这种情况下，您不应该真正考虑性能，**命名参数有助于提高代码的可读性**。即使它慢了几**纳秒**左右，你也应该坚持下去。

```
TypedQuery<Client> query = em.createQuery
  ("FROM Client c WHERE c.clientId = :clientId",Client.class);
query.setParameter("clientId", clientId); 
```

在上面的几行中，很明显您正在为 设置值`clientId`。**它简单、清晰、清晰，是您想要的编码方式**。

# hadoop - 在 Hadoop 0.20 中使用分布式缓存进行复制连接

> ID：10309320
> 
> 赞同：0
> 
> 时间：2012-04-25T04:22:07.557
> 
> 标签：hadoop, distributed-caching

我一直在尝试在集群和 karmasphere 接口上使用分布式缓存进行复制连接。我在下面粘贴了代码。我的程序在缓存中找不到文件

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.Hashtable;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.filecache.DistributedCache;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.FileInputFormat;
import org.apache.hadoop.mapred.FileOutputFormat;
import org.apache.hadoop.mapred.InputFormat;
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.KeyValueTextInputFormat;
import org.apache.hadoop.mapred.MapReduceBase;
import org.apache.hadoop.mapred.Mapper;
import org.apache.hadoop.mapred.OutputCollector;
import org.apache.hadoop.mapred.Reporter;
import org.apache.hadoop.mapred.TextOutputFormat;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;

// A demostration of Hadoop's DistributedCache tool
// 

public class MapperSideJoinWithDistributedCache extends Configured implements Tool {
        private  final  static  String inputa =  "C:/Users/LopezGG/workspace/Second_join/input1_1" ; 
public static class MapClass extends MapReduceBase implements Mapper<Text, Text, Text, Text> {

  private Hashtable<String, String> joinData = new Hashtable<String, String>();

  @Override
  public void configure(JobConf conf) {
    try {
      Path [] cacheFiles = DistributedCache.getLocalCacheFiles(conf);
          System.out.println("ds"+DistributedCache.getLocalCacheFiles(conf));
      if (cacheFiles != null && cacheFiles.length > 0) {
        String line;
        String[] tokens;
        BufferedReader joinReader = new BufferedReader(new FileReader(cacheFiles[0].toString()));

        try {
          while ((line = joinReader.readLine()) != null) {
          tokens = line.split(",", 2);
          joinData.put(tokens[0], tokens[1]);
        }
        } finally {
          joinReader.close();
        }
      }
      else
          System.out.println("joinreader not set" );
    } catch(IOException e) {
      System.err.println("Exception reading DistributedCache: " + e);
    }
  }

  public void map(Text key, Text value, OutputCollector<Text, Text> output,  Reporter reporter) throws IOException {
    String joinValue = joinData.get(key.toString());
    if (joinValue != null) {
    output.collect(key,new Text(value.toString() + "," + joinValue));
    }
  }
}

public int run(String[] args) throws Exception {
  Configuration conf = getConf();
  JobConf job = new JobConf(conf, MapperSideJoinWithDistributedCache.class);

  DistributedCache.addCacheFile(new Path(args[0]).toUri(), job); 
  //System.out.println( DistributedCache.addCacheFile(new Path(args[0]).toUri(), conf));
    Path in = new Path(args[1]);
  Path out = new Path(args[2]);
  FileInputFormat.setInputPaths(job, in);
  FileOutputFormat.setOutputPath(job, out);
  job.setJobName("DataJoin with DistributedCache");
  job.setMapperClass(MapClass.class);
  job.setNumReduceTasks(0);
  job.setInputFormat( KeyValueTextInputFormat.class);
  job.setOutputFormat(TextOutputFormat.class);
  job.set("key.value.separator.in.input.line", ",");
  JobClient.runJob(job);
  return 0;
}

  public static void main(String[] args) throws Exception {
                long time1= System.currentTimeMillis();
                System.out.println(time1);
      int res = ToolRunner.run(new Configuration(),
      new MapperSideJoinWithDistributedCache(),args);
          long time2= System.currentTimeMillis(); 
          System.out.println(time2);
          System.out.println("millsecs elapsed:"+(time2-time1));
      System.exit(res);

  }
} 
```

我得到的错误是

```
O mapred.MapTask: numReduceTasks: 0
Exception reading DistributedCache: java.io.FileNotFoundException: \tmp\hadoop-LopezGG\mapred\local\archive\-2564469513526622450_-1173562614_1653082827\file\C\Users\LopezGG\workspace\Second_join\input1_1 (The system cannot find the file specified)
ds[Lorg.apache.hadoop.fs.Path;@366a88bb
12/04/24 23:15:01 INFO mapred.Task: Task:attempt_local_0001_m_000000_0 is done. And is in the process of commiting
12/04/24 23:15:01 INFO mapred.LocalJobRunner: 
```

但任务执行完成。有人请帮助我>我查看了其他帖子并进行了所有修改，但仍然无法正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:30:26.240

我必须承认我从不使用 DistributedCache 类（而是通过 GenericOptionsParser 使用 -files 选项），但我不确定 DistributedCache 在运行作业之前会自动将本地文件复制到 HDFS 中。

虽然我在 Hadoop 文档中找不到任何证据证明这一事实，但在 Pro Hadoop 书中提到了一些与此有关的内容：

*   [http://books.google.com/books?id=8DV-EzeKigQC&pg=PA133&dq=%22The+URI+must+be+on+the+JobTracker+shared+file+system%22&hl=en&sa=X&ei=jNGXT_LKOKLA6AG1-7j6Bg&ved =0CEsQ6AEwAA#v=onepage&q=%22The%20URI%20must%20be%20on%20the%20JobTracker%20shared%20file%20system%22&f=false](http://books.google.com/books?id=8DV-EzeKigQC&pg=PA133&dq=%22The+URI+must+be+on+the+JobTracker+shared+file+system%22&hl=en&sa=X&ei=jNGXT_LKOKLA6AG1-7j6Bg&ved=0CEsQ6AEwAA#v=onepage&q=%22The%20URI%20must%20be%20on%20the%20JobTracker%20shared%20file%20system%22&f=false)

在您的情况下，首先将文件复制到 HDFS，然后在调用 DistributedCache.addCacheFile 时，在 HDFS 中传递文件的 URI，看看是否适合您

# php - 注意：未定义的索引：在第 142 行的 C:\wamp\www\somygms\a.php

> ID：10309322
> 
> 赞同：-1
> 
> 时间：2012-04-25T04:22:14.980
> 
> 标签：php, mysql

每当我在本地 Web 服务器上运行此 php 代码时，都会出现错误：

```
<?php
@ require_once ('C:\wamp\www\Connections\koneksi.php');
session_start();
if (!isset($_SESSION['id']))
{
    header("Location:index.php");
}
$sql = "SELECT * FROM pasien WHERE noreg = 1122312131";
$query = mysql_query($sql) or die(mysql_error());
$data2 = mysql_fetch_array($query);

?>

            <form id="form1" name="form1" method="post" action="#">
          <table width="804" border="0" id="inputdata" style="border-collapse:collapse">
            <tr>
              <th width="8" rowspan="3" bgcolor="#CCCCCC" scope="row">&nbsp;</th>
              <th width="104" height="50" bgcolor="#CCCCCC" scope="row"><div align="right">Kode Pasien</div></th>
              <td width="250" bgcolor="#CCCCCC"><label for="nama"></label>
                <label for="noreg"></label>
                <div align="left">
                <input name="noreg" type="text" id="noreg" size="15" maxlength="13">
                <input type="submit" name="view" id="view"  value="View">       <?php
                @ include_once ('database.php');
                $view = $_POST['view'];
                $noreg = $_POST['noreg'];
                if($view){
                    $_POST[$noreg];
                }
                ?> 
```

这是错误：

```
( ! ) Notice: Undefined index: view in C:\wamp\www\somygms\a.php on line 139 
```

和

```
( ! ) Notice: Undefined index: noreg in C:\wamp\www\somygms\a.php on line 140 
```

感谢您的帮助，将不胜感激。

-行政

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:29:44.200

您正在使用数组项不存在初始化这两个变量。

```
$view = $_POST['view'];
$noreg = $_POST['noreg']; 
```

清楚地表明`view`and`noreg`不是来自 POST 方法。您应该检查以确认这一点。用于`var_dump($_POST);`查看发布的数据。

当你编码时，你应该确保你正在编写的代码将尽可能地在所有情况下执行。在您的情况下，请在之前初始化变量或使用 isset 再次检查和初始化。

```
$view = isset($_POST['view']) ? $_POST['view'] : '';
$noreg = isset($_POST['noreg']) ? $_POST['noreg'] : ''; 
```

* * *

现在它被指出了......默认情况下该页面将有***no POST variables ***，所以你已经过滤掉了这种情况

```
if(isset($_POST) && count($_POST)) {
    @ include_once ('database.php');
    $view = $_POST['view'];
    $noreg = $_POST['noreg'];
    if($view){
        $_POST[$noreg];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:28:19.987

这是因为您访问了 $_POST 中不存在的密钥。尝试以下操作：

```
$view = (isset($_POST['view']) ) ? $_POST['view'] : '';
$noreg = (isset($_POST['noreg']) ) ? $_POST['noreg'] : ''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T20:07:24.367

在第 3 行调用`fetch()`非对象的成员函数`C:\wamp\www\chat\chat_vue.php`

# php - php POST数据未按预期工作

> ID：10309327
> 
> 赞同：0
> 
> 时间：2012-04-25T04:22:46.983
> 
> 标签：php, sql-server

提交表单后，我有一个页面可以将数据发布到另一个页面。我猜服务器。如果我错了，请纠正我。

```
<form action="http://192.168.1.118/collegeShuttle/test/welcome.php" method="post">
Name: <input type="text" name="fname" />
Age: <input type="text" name="age" />
<input type="submit" />
</form> 
```

太好了，我可以在第二页上执行此操作并期望取回数据

```
<html>
Welcome <?php echo $_POST["fname"]; ?>!<br />
You are <?php echo $_POST["age"]; ?> years old.
</html> 
```

我最大的问题是，当我从不同的设备或计算机导航到该页面时。我收到错误消息说这些变量是未定义的。我的问题是，如果它声称要发布到服务器，为什么我不能从不同的计算机访问它？如果不是这种情况，有没有办法将数据发送到我可以从任何计算机访问的服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:29:51.467

`$_POST`数据正在发送到，`http://192.168.1.118/collegeShuttle/test/welcome.php`那么您是否在该页面中获取数据？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:31:05.447

每当有人向您的页面发送 POST 数据（通常通过表单，如您在上面列出的）时，都会定义该`$_POST`变量。该变量仅在 POST 数据已提交到页面时定义，并且仅对该请求（发送数据的请求）有效。如果您打开另一个窗口重新发送 POST 数据，那么它会丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T04:37:54.350

发布数据具有 resquest 范围，如果您想将数据持久保存在服务器上，可能需要使用数据库。在你学习 php 之前你需要学习一些“http”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T04:42:12.147

因为您的第二台设备在名为 phpsessid 的 cookie 中没有相同的值。如果您想以这种方式工作，请从一台设备提交表单。注意 phpsessid cookie 值，在第二台设备上创建名称为 phpsesid 的 cookie 并放入您之前复制的值。现在打开第二页。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T10:15:40.077

试试这个 ：

```
 <html>
        Welcome<?php echo $_REQUEST["fname"]; ?>!<br />
        You are <?php echo $_REQUEST["age"]; ?> years old.
    </html> 
```

# python - Python 列表被返回列表的方法损坏

> ID：10309328
> 
> 赞同：0
> 
> 时间：2012-04-25T04:22:59.297
> 
> 标签：python, list

我是 python 新手，无法找到任何解释我在下面看到的行为的东西。我在从方法返回列表时注意到了这个问题，并将其提炼为显示问题的最简单形式。我想出了一个解决方法，但想知道我的理解中缺少什么，因为我希望两个示例的行为相同。

```
class MyCount:
    """A simple count test to show return list problem"""
    def __init__(self):
        self.next = [0]

    def count_good(self):
        self.next[0] += 1
        return [self.next[0]]

    def count_bad(self):
        self.next[0] += 1
        return self.next # returning using this form corrupts the recieving list

c=MyCount()
result=4*[0]
result[0]=c.count_good()
result[1]=c.count_good()
result[2]=c.count_bad()
print result
result[3]=c.count_bad()
print result

>>> c=MyCount()
>>> result=4*[0]
>>> result[0]=c.count_good()
>>> result[1]=c.count_good()
>>> result[2]=c.count_bad()
>>> print result
[[1], [2], [3], 0]
>>> result[3]=c.count_bad()
>>> print result
[[1], [2], [4], [4]]   <--- the return changed the previous item in the list
>>>
>>> c=MyCount()
>>> result=4*[0]
>>> c.count_good()
[1]
>>> c.count_good()
[2]
>>> c.count_bad()
[3]
>>> c.count_bad()  <--- seems to work fine when not returning to a list
[4]
>>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T04:33:36.613

当您返回时`return self.next`，您将返回对*实际列表对象*的`self.next`引用，**而不是副本**。因此，从任何地方对该原始列表对象所做的任何更改都将反映在引用该原始对象的所有位置。

为了返回副本，您应该制作一个完整的切片：

```
return self.next[:] 
```

或使用以下`list()`功能：

```
return list(self.next) 
```

# iphone - UITableView 单元格中的复选标记

> ID：10309329
> 
> 赞同：0
> 
> 时间：2012-04-25T04:23:05.590
> 
> 标签：iphone, uitableview, checkbox, checkmark

我想要 Checkmark 特别是 TableView Cell。

所以我使用了代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

newRow = [indexPath row];
oldRow = [lastIndexPath row];

if (newRow != oldRow) {
    UITableViewCell *newCell = [tableView cellForRowAtIndexPath:indexPath];
    newCell.accessoryType = UITableViewCellAccessoryCheckmark;

    UITableViewCell *oldCell = [tableView cellForRowAtIndexPath: lastIndexPath]; 
    oldCell.accessoryType = UITableViewCellAccessoryNone;

    lastIndexPath = indexPath; 
}
else{
    UITableViewCell *newCell = [tableView cellForRowAtIndexPath:indexPath];
    newCell.accessoryType = UITableViewCellAccessoryCheckmark;
    lastIndexPath = indexPath;
}} 
```

它在 iPhone 模拟器中工作正常。但是在 iPhone 设备中进行测试时，它会使应用程序崩溃。

对此有什么解决方案..？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:35:43.273

您崩溃的最可能原因是您的 ivar `lastIndexPath`，. 您将值存储在其中而不保留它们，因此它们可能随时被释放。尝试定义一个名为`lastIndexPath`(`retain`用于手动引用计数，`strong`用于自动引用计数) 的属性。然后你可以使用`self.lastIndexPath = indexPath`or `[self setLastIndexPath:indexPath]`。

此外，像这样强行更改单元格内容也很糟糕。最好先存储选中的索引，然后重新加载表数据。为了获得最大效率，仅更新更改的单元格。让您的`cellForRowAtIndexPath:`方法打开和关闭复选标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:32:19.423

只需在“cellForRowAtIndexPath”方法中编写以下代码。

```
[[cell imageView] setImage:[UIImage imageNamed:@"tickmarkBlue.png"]];
[[cell imageView] setHidden:YES]; 

if(<your condition here>)
{
      [[cell imageView] setHidden:NO];
} 
```

# java - IntelliJ IDEA 远程 JSP 调试？

> ID：10309330
> 
> 赞同：5
> 
> 时间：2012-04-25T04:23:07.793
> 
> 标签：java, jsp, jakarta-ee, jboss, intellij-idea

我正在使用 IntelliJ IDEA 11.1.1，并试图弄清楚如何在 JBOSS 4.01 服务器上远程调试 JSP。我可以成功地远程调试 servlet，但无法让 JSP 进行调试。JBOSS 运行如下`JAVA_OPTS`：

```
-Xdebug -Xrunjdwp:server=y,transport=dt_socket,address=4142,suspend=n 
```

我是 IntelliJ IDEA 世界的新手，所以任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:37:05.583

我已经用 JBoss 5.1.0 进行了尝试，它工作正常，确保您已为部署配置了工件，我使用了以下设置：

![JBoss 远程](../Images/c2950bb18ca969deac8e6e7c491435b2.png)

![部署](../Images/20532e558a8a6d8b6a3cf576b7df9008.png)

![人工制品](../Images/87ddd8b6bd7797222fa6793d503874b9.png)

在 JSP 中命中断点：

![JSP 断点](../Images/0c09b41dbb8b842b5f48a726764917c2.png)

# ruby-on-rails - Rails 将空查询参数 (/new?) 附加到我的 URLS

> ID：10309338
> 
> 赞同：1
> 
> 时间：2012-04-25T04:24:17.023
> 
> 标签：ruby-on-rails, url, params

这个问题可能有一个明显的答案......但我不确定在哪里看。

出于某种原因，rails 在某些重定向上将空查询字符串附加到我的 URL。我有一个用户“仪表板”页面，他们可以在其中单击一个按钮来创建一个新的“foo”。

当我单击按钮转到此路径时，URL 显示为：“localhost/foo/new？”

我不知道这个幻像查询参数是从哪里来的......我什至不知道这是否是一个大问题，但出于某种原因，我觉得它可能会在缓存或 SEO 端伤害我。有没有人有一些关于在哪里看的指示？

**更新 1**

我用来生成指向 new_foo 项目的链接的代码（使用 HAML 和引导程序）：

```
= button_to "New Foo!", new_foo_path, :method => :get, :class => btn_class 
```

控制器中的代码如下所示：

```
def new
  @foo = Foo.new(:my_attribute => 2500)
end 
```

关于第二条评论——我不认为这个对象此时会被保存在数据库中？我认为 Rails object.new 方法只是在内存中构建它，直到#save 才会持久化。

**更新 2**

在将代码更改为“link_to”时，问题似乎已经消失了......你能解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:43:22.063

button_to 与 link_to 不同。button_to 实际上会在页面中构建一个表单。表格将是这样的。

```
<form action="/foo/new" class="button_to" method="get">
   <div><input type="submit" value="abc"></div>
</form> 
```

它是一个获取表单，当点击提交时，将使用表单中的输入字段作为参数。不会使用该操作的查询。例如：

```
= button_to new_foo_path(:test => true)
#=> <form action="/foo/new?test=true" class="button_to" method="get">
      <div><input type="submit" value="abc"></div>
    </form> 
```

当你点击提交时，url 将是“/foo/new?”，test=true 消失了。它是 html 的专长。可能再举一个例子会让你明白。

```
= form_tag(new_foo_path(:test => true), :method => :get) do
   = hidden_field_tag "field_in_form", "true"
   = submit_tag "submit" 
```

after you click submit. the url will be "/foo/new?field_in_form=true".I think the "?" always appear when you submit a get form contain input(include submit_tag).

# c++ - 如何使用最少的代码 C++ 设置数组的特定元素

> ID：10309339
> 
> 赞同：1
> 
> 时间：2012-04-25T04:24:19.150
> 
> 标签：c++, arrays

我想知道是否有一种简单的方法可以在一行代码中设置多个数组元素。例如，而不是：

```
int Array[10];
Array[4] = 100;
Array[7] = 100; 
```

有没有办法做类似下面的事情？

```
int Array[10];
Array[4 & 7] = 100; 
```

我知道上面的代码不起作用，但我真的想不出任何其他方式来显示我的问题。无论如何，提前感谢任何想分享他们意见的人:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T04:32:12.737

```
int array[10];
array[4] = array[7] = 100;
array[4] = 100, array[7] = 100;
4[array] = 7[array] = 100; 
```

编辑：

您可能希望将循环用于元素的某种动态设置

```
int i, array[10], array_element[3] = { 3, 5, 6 };
for (i = 0; array_element[i] && array[array_element[i]]; i++) array[array_element[i]] = 100; 
```

如果“最小”代码是指抽象，则另一种选择是定义一个函数

```
overlord::set(array, 100, "3, 5, 6");
overlord::set(array, 100, "{ 3, 5, 6 }");
overlord::set(array, "3: 200, 5: 400, 6: 500"); 
```

无论哪种方式，您都不会在 C++ 或 C 中找到“动态”语言功能。您必须对现有的基本功能进行抽象，才能获得那种愚蠢的动态类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:31:49.380

你可以这样做

```
 int Array[10];
 Array[4] = Array[7] = 100; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T04:50:06.150

如果您尝试设置一系列元素，则可以使用 for 循环

```
int array[10];
for(int i=0; i<10; i++) {
    array[i] = 100;
} 
```

您也可以使用此技巧仅对某些数字执行此操作

```
int nums[2] = { 4,7 }; //Positions you wish to set
for(int i=0; i<2; i++) {
    array[nums[i]] = 100;  //nums[0] = 4, array[4] 
                           //nums[1] = 7, array[7]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T07:03:44.023

你有这个完全可读的代码：

```
int Array[10];
Array[4] = 100;
Array[7] = 100; 
```

并且您想“在一行代码中设置多个数组元素”。好的：

```
int Array[10];
Array[4] = 100; Array[7] = 100; 
```

但你为什么要？是否有我没有听说过的换行符短缺？

# c++ - 需要为一个 gui 应用程序编写一个测试

> ID：10309344
> 
> 赞同：-1
> 
> 时间：2012-04-25T04:24:32.360
> 
> 标签：c++, qt, user-interface, gui-testing

我正在寻找自动化控制点击、列表视图点击等，有没有什么好的 qt 框架可以提供帮助？我需要在没有源代码的情况下执行这些测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T06:45:47.830

Qt 提供了自己的单元测试框架：QTestLib

这个库是每个 Qt SDK 的一部分。

[您可以在此处](http://qt-project.org/doc/qt-4.8/qtestlib-tutorial.html)找到教程，尤其是第 3 点和第 4 点将显示一种可能足以满足您的 GUI 测试需求的方法。

显然，从第 1 点开始不会受到伤害。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:13:35.140

For a full-blown UI testing framework, have a look at [Squish](http://www.froglogic.com/squish/gui-testing/). It supports scripting of UI interactions (with Python, tcl, javascript), property and screenshots comparisons. It requires you to purchase license(s), but it's well worth the money if you do commercial software development.

# crystal-reports - 无法将 axmschart 转换为位图。(vb.net)

> ID：10309351
> 
> 赞同：0
> 
> 时间：2012-04-25T04:25:22.257
> 
> 标签：crystal-reports, vb.net-2010, vb6-migration

我正在开发一个从 vb6 迁移到 vb.net 的项目。在使用水晶报告期间，我遇到了这个问题。实际上，我必须在报告中打印我的应用程序的 axmschart。所以我使用以下代码：

```
 gtmpString = Application.StartupPath & gsGraphPicPath

    Dim myPic As New Bitmap(_chtAnlysGraph_0.AsBitmap)'''''ERROR here...as bitmap is                   not a member of AXMSCHART''''''''
    PictureBox1.Image = myPic
    PictureBox1.Image.Save(gtmpString, System.Drawing.Imaging.ImageFormat.Png)

    Dim intCount As Short
    Dim dRow As DataRow
    Dim dTable As New DataTable
    Dim dt As New DataSetResults.AnalysisTableDataTable 'Report filling 

    dTable = dt.Copy
    dRow = dTable.NewRow
    For intCount = 1 To msgAnlysData.Rows - 1
        dRow = dTable.NewRow
        dRow.Item("Sr_No") = msgAnlysData.get_TextMatrix(intCount, 1)
        dRow.Item("abs_val") = msgAnlysData.get_TextMatrix(intCount, 2)
        dRow.Item("pt_conc") = msgAnlysData.get_TextMatrix(intCount, 3)
        dRow.Item("lin_conc") = msgAnlysData.get_TextMatrix(intCount, 4)
        dRow.Item("poly_conc") = msgAnlysData.get_TextMatrix(intCount, 5)
        'If gtmpString = True Then
        gtmpString = Application.StartupPath & gsGraphPicPath
        dRow.Item("graph1") = savepic(gtmpString)
        ' End If
        If msgAnlysData.get_TextMatrix(intCount, 2) = Nothing Then

        Else
            dTable.Rows.Add(dRow)
        End If
    Next intCount 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:35:59.577

```
Dim myPic As New Bitmap(_chtAnlysGraph_0) 
```

# android - Android webview不播放视频

> ID：10309353
> 
> 赞同：0
> 
> 时间：2012-04-25T04:25:26.470
> 
> 标签：android, video, webview

在我的应用程序中，webviews 中有 webviews 和视频。但是视频没有播放 .. 下面是 webview 代码片段。

```
Web.setWebViewClient(new myWebClient()); 
Web.getSettings().setJavaScriptEnabled(true);
Web.getSettings().setPluginsEnabled(true);
Web.getSettings().setUserAgentString("Mozilla/5.0 (Linux; U; Android 2.0; en-us; Droid Build/ESD20) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:24:44.510

2天后，寻找一种简单的方法来做这件事，对我来说，这是最好和最简单的解决方案：

```
public CustomViewCallback mCustomViewCallback;

@Override
public void onShowCustomView(View view, CustomViewCallback callback) {
    super.onShowCustomView(view, callback);
    if (view instanceof FrameLayout) {
        FrameLayout customViewContainer = (FrameLayout) view;
        mCustomViewCallback = callback;
        if (customViewContainer.getFocusedChild() instanceof VideoView) {
            VideoView customVideoView = (VideoView) customViewContainer.getFocusedChild();
            try {
                Field mUriField = VideoView.class.getDeclaredField("mUri");
                mUriField.setAccessible(true);
                Uri uri = (Uri) mUriField.get(customVideoView);
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setDataAndType(uri, "video/*");
                mActivity.startActivity(intent);
                new Handler().post(new Runnable() {
                    @Override
                    public void run() {
                        mCustomViewCallback.onCustomViewHidden();
                    }
                });
            } catch (Exception e) {
            }
        }
    }
} 
```

希望这有助于...

PS：适用于 YouTube

# c - 用另一个替换字符串

> ID：10309354
> 
> 赞同：1
> 
> 时间：2012-04-25T04:25:34.207
> 
> 标签：c

我只是不确定为什么我`replaceWord`根本不进入文件我已经使用了所有注释掉等等等等。我只是想用从命令行参数收到的文本替换。我知道我可能离我很远我只是在寻找一种相对简单的方法来做到这一点。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main ( int argc, char *argv[] )
{
if ( argc != 4 ) /* argc should be 2 for correct execution */
    {
        /* We print argv[0] assuming it is the program name */
        printf( "usage: %s filename\n", argv[0] );
    }
    else 
    {
        // We assume argv[1] is a filename to open
        char* wordReplace = argv[1];
        char* replaceWord = argv[2]; 
        FILE *file = fopen( argv[3], "r" );
        /* fopen returns 0, the NULL pointer, on failure */
        if ( file == 0 )
        {
            printf( "Could not open file\n" );
        }
        else 
        {
           char string[100];
           int len = 0;
            /* read one character at a time from file, stopping at EOF, which
               indicates the end of the file.  Note that the idiom of "assign
               to a variable, check the value" used below works because
               the assignment statement evaluates to the value assigned. */
            while  ( (fscanf( file, "%s", string ) ) != EOF )
            {
                len = strlen(string);
                printf( "%s\n", string );
                if(strcmp(string, wordReplace) == 0){
                //fseek (file, (-strlen(string) + 1), 1);
                //fputc(*replaceWord,file);
                //replaceWord++;
                //strcpy(string, replaceWord);
                fprintf(file,"%s",replaceWord);
                fputs(replaceWord, file);
                printf("\n%d\n", len);
                }
            }
            fclose( file );
        }
      }
    printf("\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T04:28:54.890

您已经在`r`ie 读取模式下打开了文件并尝试对其进行写入。

***同样在更正之后，请注意，如果要替换文件，***替换的单词和要替换的单词的大小必须相同。否则，您最终将覆盖其他数据。并且您需要使用诸如`fseek`重新定位内部文件指针之类的功能，因为`fp`之后会向前移动`fscanf`

# nginx - nginx - 仅提供图像

> ID：10309357
> 
> 赞同：12
> 
> 时间：2012-04-25T04:25:52.940
> 
> 标签：nginx

我正在尝试设置 nginx，因此“static.domain.com”只能提供图像。这是我想出的，但我知道它可以更有效地完成。如果有人试图访问任何 .htm、.php、目录（我还缺少什么？）文件，我想提供 403.html。当然，403.htm 和 static.htm 文件除外。

有什么想法可以正确保护它吗？

```
server {
     listen          xx.xx.xx.xx:80;

     server_name     static.domain.com;

     root            /www/domain.com/httpdocs;
     index           static.htm;

     access_log      off;
     error_log       /dev/null crit;

     error_page  403  /403.html;

     # Disable access to .htaccess or any other hidden file
     location ~ /\.ht  {
        deny all;
     }

     location ~* \.php {
        deny all;
     }

     # Serve static files directly from nginx
     location ~* \.(jpg|jpeg|gif|png|bmp|ico|pdf|flv|swf|exe|html|htm|txt|css|js) {
        add_header        Cache-Control public;
        add_header        Cache-Control must-revalidate;
        expires           7d;
     }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-25T04:35:17.457

为什么不将图像向上移动，然后全部否认？

```
location ~* \.(jpg|jpeg|gif|png|bmp|ico|pdf|flv|swf|exe|html|htm|txt|css|js) {
   add_header        Cache-Control public;
   add_header        Cache-Control must-revalidate;
   expires           7d;
}
location  / {
    deny all; 
} 
```

> 没有不匹配正则表达式的语法。相反，匹配目标正则表达式并分配一个空块，然后使用 location / 匹配其他任何内容。-来自[http://wiki.nginx.org/HttpCoreModule#location](http://wiki.nginx.org/HttpCoreModule#location)

编辑：从“location /”中删除“=”引用文档：

```
location  = / {
  # matches the query / *only.* 
}
location  / {
  # matches *any query*, since all queries begin with /, but regular
  # expressions and any longer conventional blocks will be
  # matched first.
} 
```

我的错。

# asp.net - 将多个 Javascript 函数动态添加到 .Net 控件

> ID：10309358
> 
> 赞同：1
> 
> 时间：2012-04-25T04:26:18.443
> 
> 标签：asp.net

我只是有一个查询我有一个字符串，其中包含添加到字符串变量的所有以下函数，我想将它添加到例如文本框控件的控件中。那么如何将其添加到文本框控件

`string strTextBoxScripts = " onclick="Func1();" onKeypress="Func2();" "; textbox.attributes.add(strTextBoxScripts);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:46:30.790

看起来您正试图将一些文本直接注入到为 ASP.NET 文本框控件呈现的 HTML 中。

试试这个：

```
 textbox.Attributes.Add("onclick", "Func1();");
 textbox.Attributes.Add("onKeypress", "Func2();"); 
```

ASP.NET Web 控件在由控件呈现的 HTML 与 ASP.NET TextBox 控件向程序员公开的所有特性和功能之间创建了关注点分离。在后台并且对您不可见，当用户加载您的 ASP.NET 页面时，它将从基本 Page 类执行 Render() 函数，该函数最终将在页面上的所有控件（包括您的 TextBox）上调用 Render()。

只有在该 Render() 函数中，您才能获得看起来像您可能期望的 HTML 的任何内容：

```
 <input id="ctl00_textbox" onclick="Func1();" onKeypress="Func2();" /> 
```

# java - retainAll 改变最后一个元素

> ID：10309360
> 
> 赞同：0
> 
> 时间：2012-04-25T04:26:30.430
> 
> 标签：java, collections

```
List<Left> resultList = lists.iterator().next();
    for (Iterator iterator = lists.iterator(); iterator.hasNext();) {
        List<Left> list = (List<Left>) iterator.next();         
        resultList.retainAll(list);
    }

    /*for (Left left : resultList) {
         System.out.println(left.getData());
    }*/

    for (Left left : mLeft) {           
        ArrayList<Left> mTempList = left.getArray();    
        for (Iterator iterator = mTempList.iterator(); iterator.hasNext();) {
            Left left2 = (Left) iterator.next();
            System.out.println(left2.getData());
        }
    } 
```

我试图找出共同的元素，我的原始列表正在改变。我的意思是当我打印列表时只有最后一个元素被改变。有什么建议么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:45:15.460

`resultList` gets assigned to the first element in your collection `lists` right at the top.

On line 4 you execute `retainAll` against `resultList` without changing what `resultList` is assigned to - it's still pointing to the first object in `lists`.

You might consider creating a new `List<Left>` object to check for the common elements, right at the start instead of how you've declared `resultList`:

```
List<Left> resultList = new List<Left>();
resultList.addAll ((List<Left>) lists.iterator().next());
... 
```

You would then want to use resultList in the final loop when you print out the elements.

Note that you are still assuming that `lists` has at least one element - if it's empty you'll get an exception.

# web-services - 客户端发送 json 并在服务器中检索它

> ID：10309362
> 
> 赞同：1
> 
> 时间：2012-04-25T04:26:35.953
> 
> 标签：web-services, yii, unity3d

现在我正在用 UNITY3D 制作游戏。
我想将 json 文件发送到服务器以将其存储在数据库中
我使用 Yii 框架通过 php 构建服务器，我在客户端 [UNITY3D] 中发送数据并在服务器 [Yii] 中检索它时遇到问题。
请帮我。
UNITY3D 代码：我想将“名称”-> 发送到服务器

```
 var url = "http://localhost:8888/TPP/index.php/site/saveName";
    var form = new WWWForm();
    form.AddField( "player", "Henry" );
    var download = new WWW( url, form );
    print(download);
    yield download;

    if(download.error) {
        print( "Error downloading: " + download.error );
        return;
    } else {
        // show the highscores
        Debug.Log(download.text);
    } 
```

在 Yii 中，我尝试在请求 public function actionSaveName() {

```
 if(isset($_POST['name']) {
        echo $_POST['name'];
    } else {
        echo "nothing";
    }

} 
```

那正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:26:51.077

unity 部分很好，但是在 yii 中你必须检查`$_POST['player']`而不是`$_POST['name']`因为根据[AddField() 文档](http://unity3d.com/support/documentation/ScriptReference/WWWForm.AddField.html "http://unity3d.com/support/documentation/ScriptReference/WWWForm.AddField.html")，第一个参数是生成的表单元素的名称。

如果你想拥有它，`name`那么你必须将 AddField 更改为：`form.AddField("name", "Henry");`

# ruby-on-rails - rails，选择提交表单的单选按钮

> ID：10309363
> 
> 赞同：1
> 
> 时间：2012-04-25T04:27:01.233
> 
> 标签：ruby-on-rails, forms, radio-button, twitter-bootstrap

我想知道是否有一种方法可以在按下单选按钮时提交表单，而不需要“提交”按钮。

我有代码...

```
<div class="btn-group" data-toggle-name="filter" data-toggle="buttons-radio" >
   <button value="0" class="btn" data-toggle="button">Newest</button>
   <button value="1" class="btn" data-toggle="button">Score</button>
</div> 
```

顺便说一句，我正在使用 Twitter 的引导程序。我想知道是否可以通过单击这两个按钮中的任何一个来进入我的课程#index 操作？我希望用户能够按最新/分数进行过滤，并将其中一个值传递到我的索引操作中。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:41:46.297

```
javascript:document.formName.submit(); 
```

您可以在 onclick 中使用此行来提交表单，而无需使用提交按钮

# java - eclipse中文件夹的不同象形图？

> ID：10309364
> 
> 赞同：0
> 
> 时间：2012-04-25T04:27:25.697
> 
> 标签：java, eclipse

我在 Eclipse 中有一个链接目录，但不知何故，我有两种类型的目录象形图，它们的功能完全相同。选项也相同，但象形图不同。这是图像：

[图片] http://desmond.imageshack.us/Himg832/scaled.php?server=832&filename=testbn.png&res=landing](http://desmond.imageshack.us/Himg832/scaled.php?server=832&filename=testbn.png&res=landing)

布局描述符具有与其他文件夹不同的图标。为什么象形文字不一样？它们的功能有什么不同吗？如何将它们更改为适当的象形图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:47:34.167

[本页](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-icons.htm)解释了 Eclipse JDT 图标的含义。

在您的示例中：

*   `data`并且`skin`是仅包含非 Java 文件的包。
*   `fonts`是一个空包。
*   `layout-descriptors`是一个文件夹。

显示与其他三个不同的原因`layout-descriptors`是因为它是无效的 Java 包名称（包含破折号）。

# .net - 使用 VB.NET 处理 Excel com 对象的正确方法？

> ID：10309365
> 
> 赞同：6
> 
> 时间：2012-04-25T04:27:27.263
> 
> 标签：.net, vb.net, excel, com

我有以下代码（从在线教程获得）。该代码正在运行，但我怀疑处理 Excel com 对象的方式有些**不合适**。我们真的需要调用 GC.Collect 吗？或者处理这个 Excel com 对象的最佳方法是什么？

```
Public Sub t1()
    Dim oExcel As New Excel.Application
    Dim oBook As Excel.Workbook = oExcel.Workbooks.Open(TextBox2.Text)

    'select WorkSheet based on name
    Dim oWS As Excel.Worksheet = CType(oBook.Sheets("Sheet1"), Excel.Worksheet)
    Try

        oExcel.Visible = False
        'now showing the cell value
        MessageBox.Show(oWS.Range(TextBox6.Text).Text)

        oBook.Close()
        oExcel.Quit()

        releaseObject(oExcel)
        releaseObject(oBook)
        releaseObject(oWS)
    Catch ex As Exception
        MsgBox("Error: " & ex.ToString, MsgBoxStyle.Critical, "Error!")
    End Try
End Sub

Private Sub releaseObject(ByVal obj As Object)
    Try
        System.Runtime.InteropServices.Marshal.ReleaseComObject(obj)
        obj = Nothing
    Catch ex As Exception
        obj = Nothing
    Finally
        GC.Collect()
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-06-29T22:30:21.213

首先 - 您*永远*不必打电话`Marshal.ReleaseComObject(...)`或`Marshal.FinalReleaseComObject(...)`在进行 Excel 互操作时。这是一个令人困惑的反模式，但任何有关此的信息（包括来自 Microsoft 的）表明您必须从 .NET 手动释放 COM 引用都是不正确的。事实上，.NET 运行时和垃圾收集器正确地跟踪和清理 COM 引用。对于您的代码，这意味着您可以删除整个`releaseObject(...)`Sub 并调用它。

其次，如果要确保在进程结束时清理对进程外 COM 对象的 COM 引用（以便 Excel 进程将关闭），则需要确保垃圾收集器运行。您可以通过调用`GC.Collect()`和正确地做到这一点`GC.WaitForPendingFinalizers()`。调用两次是安全的， end 确保循环也被清理干净。

第三，在调试器下运行时，局部引用会人为地保持活动状态，直到方法结束（这样局部变量检查才起作用）。因此，调用对于从同一方法`GC.Collect()`中清除对象无效。`rng.Cells`您应该将执行 COM 互操作的代码从 GC 清理中拆分为单独的方法。

一般模式是：

```
Sub WrapperThatCleansUp()

    ' NOTE: Don't call Excel objects in here... 
    '       Debugger would keep alive until end, preventing GC cleanup

    ' Call a separate function that talks to Excel
    DoTheWork()

    ' Now Let the GC clean up (twice, to clean up cycles too)
    GC.Collect()    
    GC.WaitForPendingFinalizers()
    GC.Collect()    
    GC.WaitForPendingFinalizers()

End Sub

Sub DoTheWork()
    Dim app As New Microsoft.Office.Interop.Excel.Application
    Dim book As Microsoft.Office.Interop.Excel.Workbook = app.Workbooks.Add()
    Dim worksheet As Microsoft.Office.Interop.Excel.Worksheet = book.Worksheets("Sheet1")
    app.Visible = True
    For i As Integer = 1 To 10
        worksheet.Cells.Range("A" & i).Value = "Hello"
    Next
    book.Save()
    book.Close()
    app.Quit()

    ' NOTE: No calls the Marshal.ReleaseComObject() are ever needed
End Sub 
```

关于这个问题有很多虚假信息和混淆，包括 MSDN 和 StackOverflow 上的许多帖子。

最终说服我仔细研究并找出正确建议的是这篇文章[https://blogs.msdn.microsoft.com/visualstudio/2010/03/01/marshal-releasecomobject-considered-dangerous/](https://blogs.msdn.microsoft.com/visualstudio/2010/03/01/marshal-releasecomobject-considered-dangerous/)以及找到在某些 StackOverflow 答案的调试器下，引用保持活动状态的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T06:10:38.973

@PanPizza C# 和 VB.NET 非常相似，去掉`;`行尾的 ，`Worksheets sheets = ...`变成`Dim sheets Worksheets = ...`. 如果您有兴趣在编程方面做得更好，那么您应该真正学习如何在这两种方法之间进行转换，因为许多 .NET 示例仅在其中一种中提供，而您实际上是在限制自己。

如本答案所述：[如何正确清理 Excel 互操作对象？](https://stackoverflow.com/questions/158706/how-to-properly-clean-up-excel-interop-objects-in-c-sharp)“从不使用两个点”这意味着总是降级到单个子对象并且从不这样做`Dim oWS AS Excel.Worksheet = oExcel.Worksheets.Open(...)`总是降级到工作簿然后降级到工作表，从不直接从`Excel.Application`.

作为一般规则，您需要做的是以与创建项目相反的顺序释放项目。否则，您将脚从其他参考下方取出，它们将无法正确解除分配。

请注意如何创建 Excel 应用程序 ( `oExcel`)，然后是 Excel 工作簿 ( `oBook`)，最后是 Excel 工作表 ( `oWS`)，您需要以相反的顺序释放它们。

因此，您的代码变为：

```
 oBook.Close()
    oExcel.Quit()

    releaseObject(oWS)
    releaseObject(oBook)
    releaseObject(oExcel)
Catch ex As Exception 
```

并从`Sub releaseObject(ByVal obj As Object)`

```
Finally
    GC.Collect() 
```

这不是必需的，GC 会自然而然地发生并且不要期望您的应用程序立即释放内存，.NET 将未分配的内存池化，以便它可以轻松地在此内存中实例化对象，而不必向操作系统请求更多内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-21T16:05:07.270

对我来说，关键是让 GarbageCollector (GC) 知道我想要清理一些东西。我意识到这通常不是必需的，但是在使用 COM 对象时，有时是必需的。有关更多信息，请参阅此链接[https://www.add-in-express.com/creating-addins-blog/2013/11/05/release-excel-com-objects/](https://www.add-in-express.com/creating-addins-blog/2013/11/05/release-excel-com-objects/)

释放对象后，通过调用和 请求`GC`清理。上面的链接指出，为了从内存中完全删除 COM 对象，必须调用这些方法两次。就我而言，调用这些方法一次可行，但可能值得调用两次。`Collect()``WaitForPendingFinalizers()`

```
oBook.Close()
oExcel.Quit()

releaseObject(oExcel)
releaseObject(oBook)
releaseObject(oWS)

GC.Collect()
GC.WaitForPendingFinalizers()
GC.Collect()
GC.WaitForPendingFinalizers() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T08:38:12.417

我已经搜索并搜索了这个，甚至微软自己的解决方案也不起作用（如果你想看看[这里）。](http://support.microsoft.com/default.aspx?scid=KB;EN-US;q317109)我有一个将数据导出到 Excel 模板的 vb.net 应用程序。理想情况下，当用户关闭 Excel 窗口时，它会终止该进程，但它不会，因为正如 Microsoft 文章中所述，vb.net 仍在引用它。

您需要自己杀死该进程，有一个过程如下：

```
For Each p As Process In Process.GetProcesses
     If p.ProcessName = "EXCEL.EXE" Then p.Kill
Next 
```

但是，这会杀死所有 Excel 实例，并且用户可能会打开其他 Excel 窗口，这些窗口会在不保存的情况下关闭，所以我想出了这个（我正在使用的工作簿称为“Top 5 Issues Template”）：

```
For Each p As Process In Process.GetProcesses
     If InStr(p.MainWindowTitle, "Top 5 Issues Template") <> 0 Then p.Kill
Next 
```

这通过窗口名称而不是进程名称来查找，并且仅终止与其相关的进程。这是我可以让 Excel 正确关闭而不会弄乱任何东西的唯一方法。

# c# - 将 object[,] 数组元素转换为 int 以进行条件运算符比较 c#

> ID：10309376
> 
> 赞同：0
> 
> 时间：2012-04-25T04:29:24.113
> 
> 标签：c#, multidimensional-array, while-loop, int, type-conversion

我正在尝试将 object[,] 数组元素转换为 int 以进行条件运算符比较。我的 classesArray 由字符串和整数组成。我引用的列的值只能为 1 或 0，因为我将它用作标志。如果有 1，我希望它继续到下一行/行。我使用的代码没有正确执行程序

```
while (classesArray[classesArrayRow,7] == (object)1)
                {
                    classesArrayRow++;
                } 
```

我的整个 tempArray 都填满了 classesArray 的第一行。所以，我试图尝试

```
while ((int)classesArray[classesArrayRow,7] > 0) 
```

虽然没有错误，但这个演员表不起作用。

我的代码：

```
private void ProcessObjects(object[,] classesArray, object[,] classesAvailabilityArray, Excel.Workbook workbook2, Excel.Sheets excelSheets)
    {
        // once classes are selected, they are copied to a temporary location
        // while they're waiting to be printed
        object[,] tempArray = new object[6,3];

        // This stops the while loop once enough credit hours have been taken 
        // if a break condition has not been met first.
        // It must reach 123 hours for CS Degree .
        int hourCounter = 0;

        int iteration = 0;

        while (hourCounter < 123)
        {
            // this while loop copies some classes from classes array to tempArray
            // so they can be printed into the excel template (NewStudentTemplateCS.xlsx)
            //
            int classes = 1, hours = 0; // stops while loop if limit is reached
            int tempArrayRow = 0, tempArrayCol = 0; // used to select individual elements of tempArray
            int classesArrayRow = 1, classesArrayCol = 1; // used to select individual elements of classesArray

            while(classes < 7 || hours < 17)
            {
                // this loop checks the status of the flag and stops at the first avaliable
                // class/row of classesArray
                while (classesArray[classesArrayRow,7] == (object)1)
                {
                    classesArrayRow++;
                }

                // copies the call EX: "MATH 2313" from classesArray to tempArray
                tempArray[tempArrayRow,tempArrayCol] = classesArray[classesArrayRow,classesArrayCol];
                tempArrayCol ++;
                classesArrayCol += 2;
                // copies the name EX: "Calculus I" from classesArray to tempArray
                tempArray[tempArrayRow, tempArrayCol] = classesArray[classesArrayRow, classesArrayCol];
                tempArrayCol++;
                classesArrayCol++;
                // Copies the hours EX: "3" from classesArray to tempArray
                tempArray[tempArrayRow, tempArrayCol] = classesArray[classesArrayRow, classesArrayCol];

                // increments classes, hours, and hourCounter for exit decision
                classes += 1;

                // converts object element to an int for the following "+=" operator
                int numberOfHours = Convert.ToInt32(classesArray[classesArrayRow, classesArrayCol]);

                // adds numberOfHours to the following varriable to increment loop exit decision
                hours += numberOfHours;
                hourCounter += numberOfHours;

                // sets flag to one
                classesArrayCol += 3;
                classesArray[classesArrayRow, classesArrayCol] = 1;

                //reset column varriables
                classesArrayCol = 1;
                tempArrayCol = 0;

                // increments row for temp array
                tempArrayRow++;

            }// end while loop

            // print method that prints temp array and clears tempArray for next use
            PrintArray(tempArray, iteration, workbook2, excelSheets);

            // iterates iteration
            iteration++;

        } // end while loop

    } // end ProcessObjects method 
```

我的数据：

标头 = 呼叫、号码、班级名称、小时数、先决条件编号、先决条件名称和标志。第 1 行 = MATH 2313、1000、微积分 I、3、0、0 和 0。第 2 行 = MATH 2113、1001，微积分实验室 I、1、0、0 和 0

我想打印第 1 行 = MATH 2113、微积分 I 和 3。第 2 行 = MATH 2113、微积分实验室 1 和 1

我用 0 填充了所有空元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:40:17.000

代码`classesArray[classesArrayRow,7] == (object)1`将执行**引用比较**，它应该总是在装箱的整数上返回 false。正确的方法是：

```
while ((int)classesArray[classesArrayRow,7] != 0){
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:29:56.873

One quick way to solve your problem is to write code to check whether is a string or number

```
if(classesArray[0,7] is int) // values were imported as ints
{
    while ((int)classesArray[classesArrayRow,7] == 1)
    {
        classesArrayRow++;
    }
}
if(classesArray[0,7] is string) // values were imported as strings
{
    while ((string)classesArray[classesArrayRow,7] == "0")
    {
        classesArrayRow++;
    }
} 
```

I would definitely change the whole code, especially when it's not one time task.

# iphone - 从 UIView 创建 UIImage 时出现非 null 无效上下文错误

> ID：10309382
> 
> 赞同：3
> 
> 时间：2012-04-25T04:30:08.383
> 
> 标签：iphone, uiview, uiimage, cgcontext

我正在使用以下内容从 UIView 生成 UIImage

```
UIGraphicsBeginImageContextWithOptions(view.frame.size, YES, [[UIScreen mainScreen] scale]);
[view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage* img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

这通常有效，但大约有一半的时间，当调用 renderInContext 时出现此错误：

```
<Error>: CGContextDrawImage: invalid context 0x84d0b20 
```

有谁知道为什么会发生这种情况，或者如何检测它何时发生？我想如果上下文的地址是 0x0 我会感觉更好，因为它至少是我可以测试和处理的东西，但到目前为止这让我很难过。

编辑：哎呀。意味着使用 view.frame.size 而不是 view.bounds.size。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T05:17:49.683

如果创建宽度或高度为零的上下文，则上下文将无效。如果视图大小在任一轴上为零，*或者*视图为`nil`.

此外，由于您正在渲染一个图层，您可能想要获取*图层*边界和比例，而不是*视图边界*和*屏幕比例*。大多数情况下，这些值是相同的，但最好考虑到它们不同的时候。

```
// Debugging output to see how if an invalid context is being created due to zero size.
NSLog(@"View = %@", view);
NSLog(@"View size = %@", NSStringFromCGSize(view.bounds.size));

UIGraphicsBeginImageContextWithOptions(view.layer.bounds.size, YES, view.layer.contentsScale);
[view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage* img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-04T02:22:02.693

我有一个类似的问题，但能够通过在我的图层渲染其内容之前推送和弹出图像上下文来解决它。

尝试这样的事情：

```
UIImage *snapshotImage = nil;
UIGraphicsBeginImageContextWithOptions(view.bounds.size, NO, view.layer.contentsScale);
{
    CGContextRef imageContext = UIGraphicsGetCurrentContext();

    if (imageContext != NULL) {
        UIGraphicsPushContext(imageContext);
        {
            [view.layer renderInContext:imageContext];
        }
        UIGraphicsPopContext();
    }

    snapshotImage = UIGraphicsGetImageFromCurrentImageContext();
}
UIGraphicsEndImageContext(); 
```

对于它的价值，有其他（更有效）的方法来获取快照，但它仍处于 NDA 之下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T04:38:32.510

```
UIGraphicsBeginImageContext(self.view.frame.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

希望对你有帮助....

# couchdb - 在 Geocouch 中，如何通过 lon/lat 坐标获取所有对象？

> ID：10309399
> 
> 赞同：1
> 
> 时间：2012-04-25T04:33:28.043
> 
> 标签：couchdb, geospatial

即包含此坐标的所有对象（对于多边形）或交叉它们​​（对于线）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:34:25.510

您可以将查询的边界框折叠到一个点。

# php - 如何使用 php 发送 facebook 应用程序生成的请求？

> ID：10309401
> 
> 赞同：1
> 
> 时间：2012-04-25T04:33:50.350
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我正在使用以下 url 向用户发送应用程序生成的请求：

[https://graph.facebook.com/apprequests/?ids=](https://graph.facebook.com/apprequests/?ids=) ".$userid."&message=Hello&access_token=".$appToken."&method=post

如果 $userid 设置为当前登录用户，这将正常工作。但是我无法向我的应用程序用户朋友发送请求，并且上面的代码会引发以下错误：

{"error":{"message":"(#2) 无法创建任何应用请求","type":"OAuthException","code":2}}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:54:48.577

这对我有用：

```
$app_id = YOUR_APP_ID;
$app_secret = YOUR_APP_SECRET;

$token_url = "https://graph.facebook.com/oauth/access_token?" .
“client_id=”。$app_id 。
“&client_secret=”。$app_secret 。
"&grant_type=client_credentials";

//你的应用访问令牌
$app_access_token = file_get_contents($token_url);

$apprequest_url =“https://graph.facebook.com/”。
$your_friend_id 。
"/apprequests?message='一些消息'&" .
$app_access_token 。"&method=post";

$result = file_get_contents($apprequest_url);
回显$结果；

```

希望能帮助到你

# javascript - 无法在 WebView 控件上显示网页

> ID：10309403
> 
> 赞同：1
> 
> 时间：2012-04-25T04:34:06.667
> 
> 标签：javascript, javafx-2

我尝试按照此处描述的说明进行操作：[http](http://docs.oracle.com/javafx/2.0/webview/jfxpub-webview.htm) ://docs.oracle.com/javafx/2.0/webview/jfxpub-webview.htm 在 javafx 2.1 上显示网页，但网页不显示虽然我已经使用 javafx-ant 工具签署了我的应用程序（此链接提到了签署 javafx 应用程序[如何在浏览器中的 JavaFx 2.0 中的 WebView 中显示 javascript 网页](https://stackoverflow.com/questions/8497850/how-can-i-display-a-javascript-webpage-inside-a-webview-in-javafx-2-0-in-browser)）。

在浏览器上运行 javafx 时我可以查看网页，但在将应用程序作为 java 独立应用程序运行时无法查看。

这是代码：

浏览器控制：

```
public class Browser extends Region {

    final WebView browser = new WebView();
    final WebEngine webEngine = browser.getEngine();

    public Browser() {
        //apply the styles
        getStyleClass().add("browser");
        // load the web page
        webEngine.load("http://www.google.com");
        //add the web view to the scene
        getChildren().add(browser);

    }
    //...
} 
```

显示它：

```
 Stage stage = new Stage();

    stage.setTitle("Web View");
    Scene scene = new Scene(new Browser(),590,400, Color.web("#666970"));
    stage.setScene(scene);
    scene.getStylesheets().add("/com/sai/javafx/calendar/styles/BrowserToolbar.css");  

  stage.show(); 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:51:32.623

这是一个示例应用程序：

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

public class WebViewSample extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(final Stage primaryStage) {
    final WebView webView = new WebView(); 
    webView.getEngine().load("http://docs.oracle.com/javafx/");
    primaryStage.setScene(new Scene(webView));
    primaryStage.show();
  }
} 
```

这是它在浏览器中的样子，内部滚动窗格是 JavaFX WebView 呈现的浏览器，外部文本是嵌入 JavaFX WebView 的 html 页面。

![浏览器示例图像中的 WebView](../Images/a250a5e6fca3dc198270b9d1fe656b3b.png)

为了运行它，我使用了[NetBeans nightly build](http://bits.netbeans.org/download/trunk/nightly/latest/)、[JavaFX 2.2b4](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)、[JDK7u6ea](http://jdk7.java.net/archive/7u6-b07.html)、Win7、IE9。

NetBeans 中的步骤是：

1.  新项目 | JavaFX | JavaFX 应用程序
2.  使用示例应用程序代码创建一个 Java 文件。
3.  创建项目后，右键单击项目 | 特性
    *   构建 | 部署 | 勾选“请求无限制访问”
    *   运行 | 检查收音机运行“在浏览器中”
    *   可以接受属性更改
4.  按 F6 在浏览器中运行应用程序。
5.  接受任何安全对话框警告。
6.  等待几秒钟以加载 WebView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:23:24.863

据我所知，解决我的问题的唯一方法是在本地加载.html文件（不能从其他域加载网页，并且这个html文件不能引用任何外部链接）

```
public Browser() {
   //apply the styles
   getStyleClass().add("browser");        
   // load the web page
   final URL urlHello = Browser.class.getResource("sample.html");
   webEngine.load(urlHello.toExternalForm());
} 
```

显示它：

```
Stage stage = new Stage();

stage.setTitle("Web View");
Scene scene = new Scene(new Browser(),590,400, Color.web("#666970"));
stage.setScene(scene);
scene.getStylesheets().add("/com/sai/javafx/calendar/styles/BrowserToolbar.css");  

stage.show(); 
```

# unix - Diff-command：不打印不同的行但仍然说两个文件不同

> ID：10309405
> 
> 赞同：7
> 
> 时间：2012-04-25T04:34:23.800
> 
> 标签：unix, diff

我正在使用 diff 命令来比较两个文本文件。他们需要从字面上匹配。

所以我使用差异：

`diff binary.out binary.expected`

（顺便说一下，这些文件不是二进制文件。它们是文本文件。我称它们为二进制，因为这是项目的名称）

并得到

`Binary files binary.out and binary.expected differ`

当我使用另一个差异工具时，最聪明的（又名人类），这两个文件之间真的没有什么不同。

有谁碰巧知道这里发生了什么？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T22:23:15.240

`diff`来自[diffutils](http://www.gnu.org/software/diffutils/diffutils.html)的关于文本/二进制的内容如下：

> `diff`通过检查文件中的前几个字节来确定文件是文本还是二进制文件；确切的字节数取决于系统，但通常为数千。如果文件该部分中的每个字节都不为空，则`diff`认为该文件是文本；否则它认为该文件是二进制文件。

因此 GNU diff 对什么是文本有一个非常开放的定义，并且`--text`很少需要使用该选项来强制它将文件视为文本。

您是否检查过是否`binary.out`或`binary.expected`包含空字符？你的差异程序是什么版本？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T04:39:52.217

确保忽略差异选项中的空白。

它还可以看到 Unicode 字符并将其解释为二进制。查看您的差异工具是否有强制文本模式的选项。

# php - 如何实现另一个表的 table_info

> ID：10309406
> 
> 赞同：0
> 
> 时间：2012-04-25T04:34:29.093
> 
> 标签：php, mysql, sql, codeigniter

我正在尝试为我的用户创建一个更加动态的系统，实现他们在需要时创建每个必要信息的方法。（对不起，如果我的英语很弱）

首先，我有一个名为 User 的表，如下所示：

```
User:

id   |   name   |    login   |     password

1    |   Rose   |  rose.120  |     897763
2    |   John   |  john.red  |     120347
3    |   Mark   |  mark.foo  |     385598 
```

另一个表包含每个用户的一些信息：

```
User_info:

id  |  user_id  |  info_name      |   value          |  required  |  order

6   |   1       | Telephone       |  555-4083        |   yes      |   2 
7   |   1       | Email           |  rose.120@g.com  |   yes      |   1 
8   |   1       | Another E-mail  |  rose.mg@fc.com  |   no       |   3 
```

当我从数据库中获取这些值时，如何有效地设置 PHP 对象或这些值的数组。
我尝试创建一个 mysql_query 并以此结果在对象中创建一个循环，并为任何行创建一个 WHERE 子句到用户 ID。（我正在使用 CodeIgniter）

```
 if( $user != false ) $this->getUser();
    foreach( $this->user->result() as $row ) {
        $this->db->where('user_id', $row->id);
    }
    $this->db->from('user_info');
     ... 
```

当我有这个对象时，我需要将 User_info 行放在用户对象中。正确的？
我只是好奇这是否是这样做的好方法，或者我的方法不对。
我希望这很清楚。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:53:49.583

基本上，是的。但是，您可以设置您的[模型](http://codeigniter.com/user_guide/general/models.html)`user_info`来定义一种从您的表和`user`表中检索信息的方法。这些方面的东西：

```
// in user_model.php
function get_user_with_info() {
  $user = $this->getUser();
  $user['info'] = $this->db->where('user_id', $row->id)->from('user_info')->row();

  return $user;
} 
```

如果您打算经常进行此查询，您将很快遇到[N+1 问题](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)。Codeigniter 中更好的选择可能是`join`在`get_users`函数中使用表：

```
function get_users() {
  $this->db->select('*')
  $this->db->from('user');
  $this->db->join('user_info', 'user.id = user_info.user_id');

  $results = $this->db->result();
  $users = [];
  foreach ($results as $result) {
    $user_id = $result['user_id'];
    if (!isset($users[$user_id])) {
      $users[$user_id] = array(
        'id' => $user_id,
        'info' => array(
          // add info fields from first result
        )
      );
    } else {
      $users[$user_id]['info'][] = array( 
        // add additional info fields
      );
    }
  }
  return $users;
} 
```

您将需要调整细节，但希望这能给您一个开始的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:47:42.473

While using code codeIgniter, make a function in your model file and put your code. Then, in the controller, call this function in the model and send your required parameter. You are using codeigniter then you have to follow the architecture too.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T04:55:52.040

不要忘记，这样你必须在用户对象中使用动态数组。而不是命名为“电话”、“电子邮件”等的字段，您可以通过 $user->Telephone、$user->Email 和其他方式访问（这是一个简单的方法，我认为是一个好方法），您必须创建动态具有对 $info_name->$value 的数组。在“用户”对象中，您必须创建附加功能，解析每个属性 $info_name。这更灵活，但更复杂。

所以我认为，你必须在灵活性和复杂性之间找到中庸之道。

# css - 如何在块元素之间添加垂直间距，但不是顶部和底部

> ID：10309408
> 
> 赞同：20
> 
> 时间：2012-04-25T04:35:07.557
> 
> 标签：css

假设我有一堆 P、LI 或 DIV 元素，它们之间没有任何内容。我想控制它们之间的垂直间距，所以它们不会那么紧。但我不想在顶部和底部添加任何空间，因为这是由父元素处理的，我不需要更多。有没有一种适用于所有块元素的简单方法？

说我有这样的东西：

```
p {
  margin: 5px 0;
  } 
```

接着

```
 <div>
   <p>1</p>
   <p>2</p>
   <p>3</p>
   <p>4</p>
 </div> 
```

但我不希望 p 1 上方或 p 4 下方 5px，因为 div 已经有填充，我不想弄乱它。我只想要 p 1 和 p 2、p 2 和 p 3 之间的 10px 等。

我确信我可以做一些笨拙的事情（我有很多次），但我正在寻找一些更清洁的东西，我不必为这种常见情况做很多特殊情况。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-25T04:44:38.497

Use adjacent selectors

```
p + p { margin-top: 10px; } 
```

Basically the concept is that, if a `p` comes after another `p` give 10px margin in between.

You usage is something similar to

```
p + p, li + li, div + div { 
    margin-top: 10px;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T04:50:27.360

This can also be done using `:last-child` or `:first-child`

Here is an example:

```
p, li, div {
    margin-bottom: 10px;
}

p:last-child, li:last-child, div:last-child {
    margin-bottom: none;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T04:59:15.807

您可以使用[相邻](http://www.w3.org/TR/CSS2/selector.html)的选择器。你可以这样定义：

```
p + p{
 margin-top:0;
} 
```

**或者**

```
p ~ p{
 margin-top:0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T05:14:18.077

```
p { margin: 10px 0 0 0; }
p:first-child { margin: 0; } 
```

也就是说，将所有`p`元素的上边距设置为 10px，将其他边距设置为零，但第一个`p`元素除外，您甚至将其上边距设置为零。

这比许多其他使用旧浏览器不支持的上下文选择器的方法更广泛。为了获得真正最大的浏览器支持，您可以为标记中的第一个元素分配一个类，`p`并使用类选择器而不是`p:first-child`.

这是最简单的方法，因为 CSS 对元素进行操作，而不是对元素之间的内容进行操作。因此，您需要某种方法来区分`p`元素序列中的第一个`p`元素。

请注意`p { margin: 5px 0; }`（在问题中提到）会创建 5px 的垂直边距，而不是 10px，因为相邻的垂直边距会折叠。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T04:42:46.220

```
p, li, div {
    margin-bottom: 10px;
}
#parentID {
    margin-bottom: -10px;
} 
```

# jquery - 网络摄像头图片直接到文件附件

> ID：10309415
> 
> 赞同：6
> 
> 时间：2012-04-25T04:36:13.313
> 
> 标签：jquery, ruby-on-rails, file-upload, webcam

所以我有一个表单，用户可以在这个表单中上传图片。作为替代方案，我希望他们能够拍照并上传。

* * *

现在我想，当用户使用某种闪存网络摄像头界面拍照时，该照片需要在用户完成他/她的表单时存储在某种中间存储器中。

有没有解决的办法？最好的解决方案是什么？

我认为实际上只有两种选择。

> 要么（a）我持有临时照片，然后在提交表单后再次接受它，要么（b）用户拍照，它被下载到他们的本地计算机上，他们必须选择它作为要再次提交的文件。

这些解决方案都没有让我真正满意，所以我想知道是否有更好的方法来做到这一点。

**编辑：**作为一个额外的奖励，虽然它并不真正相关，但我正在制作一个带有 Paperclip 的 Rails 应用程序用于文件附件。另外，我更喜欢使用 jQuery...

*也只是来自经验丰富的 UI Web 开发人员的一般意见会很好..*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T20:04:39.580

我在我的 rails 应用程序中使用了这个：[http](http://www.xarg.org/project/jquery-webcam-plugin/) : //www.xarg.org/project/jquery-webcam-plugin/ 从网络摄像头捕获图像。你可以在这里下载这个 jQuery-webcam：[https ://github.com/infusion/jQuery-webcam](https://github.com/infusion/jQuery-webcam)

这是一个大致完成的实现，对于凌乱的代码感到抱歉：

```
class PicturesController < ApplicationController
  require 'base64'
    def capture
      # do something
      render :layout => "webcam"
    end

    def save_image
      image = params[:capture][:image]
      File.open("#{Rails.root}/public/path_you_want_to_image/image_name.png", 'wb') do |f|
        f.write(Base64.decode64(image))
      end
      # Or use paperclip to save image for a model instead!!
    end
end 
```

**视图/布局/webcam.html.erb**：

```
<!DOCTYPE html>
<html>
<head>
  <title>Application Name</title>
  <%= stylesheet_link_tag :all %>
  <%= javascript_include_tag :defaults %>
  <%= javascript_include_tag "http://www.google-analytics.com/ga.js"%>
  <%= javascript_include_tag "http://code.jquery.com/jquery-1.4.2.min.js"%>
  <%= javascript_include_tag "jquery.webcam"%>
  <script>
      !window.jQuery && document.write('<script src="jquery-1.4.3.min.js"><\/script>');
  </script>
  <%= csrf_meta_tag %>
</head>
<body> 
  <%= yield %>
</body>
</html> 
```

**视图/图片/capture.html.erb**：

```
 <div id="webcam">
   <p>Capture image here!</p>
  </div>

  <%= form_for(save_image_pictures_path, :method => "post", :remote => true) do |f|%>
    <%= hidden_field(:item, :sku)%>
    <div id="capture_images"><input id="capture_image" type="hidden" value="" name="capture[image]"></div>
    <%= submit_tag "Capture Image", :onClick=>"javascript:capture_image();"%>  
  <% end %>     
  <%= link_to "Back", root_path %>
   <p>
     <canvas id="canvas" width="320" height="240"></canvas>
   </p>

<script type="text/javascript">

var pos = 0;
var ctx = null;
var cam = null;
var image = null;

var filter_on = false;
var filter_id = 0;

function changeFilter() {
    if (filter_on) {
        filter_id = (filter_id + 1) & 7;
    }
}

function capture_image(){
    webcam.capture();
    changeFilter();
    void(0);
    var canvas = document.getElementById('canvas')
    var context = canvas.getContext("2d");
    var img     = canvas.toDataURL("image/png");
    var item_image = img.replace(/^data:image\/(png|jpg);base64,/, "") ;
    document.getElementById('capture_images').innerHTML="<input id=\"capture_image\" type=\"hidden\" value=\""+item_image+"\" name=\"capture[image]\">";
}

function toggleFilter(obj) {
    if (filter_on =!filter_on) {
        obj.parentNode.style.borderColor = "#c00";
    } else {
        obj.parentNode.style.borderColor = "#333";
    }
}

  jQuery("#webcam").webcam({

    width: 320,
    height: 240,
    mode: "callback",
    swffile: "/javascripts/jscam_canvas_only.swf",

    onTick: function(remain) {

        if (0 == remain) {
            jQuery("#status").text("Cheese!");
        } else {
            jQuery("#status").text(remain + " seconds remaining...");
        }
    },

    onSave: function(data) {

        var col = data.split(";");
        var img = image;

        if (false == filter_on) {

            for(var i = 0; i < 320; i++) {
                var tmp = parseInt(col[i]);
                img.data[pos + 0] = (tmp >> 16) & 0xff;
                img.data[pos + 1] = (tmp >> 8) & 0xff;
                img.data[pos + 2] = tmp & 0xff;
                img.data[pos + 3] = 0xff;
                pos+= 4;
            }

        } else {

            var id = filter_id;
            var r,g,b;
            var r1 = Math.floor(Math.random() * 255);
            var r2 = Math.floor(Math.random() * 255);
            var r3 = Math.floor(Math.random() * 255);

            for(var i = 0; i < 320; i++) {
                var tmp = parseInt(col[i]);

                /* Copied some xcolor methods here to be faster than calling all methods inside of xcolor and to not serve complete library with every req */

                if (id == 0) {
                    r = (tmp >> 16) & 0xff;
                    g = 0xff;
                    b = 0xff;
                } else if (id == 1) {
                    r = 0xff;
                    g = (tmp >> 8) & 0xff;
                    b = 0xff;
                } else if (id == 2) {
                    r = 0xff;
                    g = 0xff;
                    b = tmp & 0xff;
                } else if (id == 3) {
                    r = 0xff ^ ((tmp >> 16) & 0xff);
                    g = 0xff ^ ((tmp >> 8) & 0xff);
                    b = 0xff ^ (tmp & 0xff);
                } else if (id == 4) {

                    r = (tmp >> 16) & 0xff;
                    g = (tmp >> 8) & 0xff;
                    b = tmp & 0xff;
                    var v = Math.min(Math.floor(.35 + 13 * (r + g + b) / 60), 255);
                    r = v;
                    g = v;
                    b = v;
                } else if (id == 5) {
                    r = (tmp >> 16) & 0xff;
                    g = (tmp >> 8) & 0xff;
                    b = tmp & 0xff;
                    if ((r+= 32) < 0) r = 0;
                    if ((g+= 32) < 0) g = 0;
                    if ((b+= 32) < 0) b = 0;
                } else if (id == 6) {
                    r = (tmp >> 16) & 0xff;
                    g = (tmp >> 8) & 0xff;
                    b = tmp & 0xff;
                    if ((r-= 32) < 0) r = 0;
                    if ((g-= 32) < 0) g = 0;
                    if ((b-= 32) < 0) b = 0;
                } else if (id == 7) {
                    r = (tmp >> 16) & 0xff;
                    g = (tmp >> 8) & 0xff;
                    b = tmp & 0xff;
                    r = Math.floor(r / 255 * r1);
                    g = Math.floor(g / 255 * r2);
                    b = Math.floor(b / 255 * r3);
                }

                img.data[pos + 0] = r;
                img.data[pos + 1] = g;
                img.data[pos + 2] = b;
                img.data[pos + 3] = 0xff;
                pos+= 4;
            }
        }

        if (pos >= 0x4B000) {
            ctx.putImageData(img, 0, 0);
            pos = 0;
        }

    },

    onCapture: function () {
        webcam.save('/product_capture');

        jQuery("#flash").css("display", "block");
        jQuery("#flash").fadeOut(100, function () {
            jQuery("#flash").css("opacity", 1);
        });

    },

    debug: function (type, string) {
        jQuery("#status").html(type + ": " + string);
    },

    onLoad: function () {

        var cams = webcam.getCameraList();
        for(var i in cams) {
            jQuery("#cams").append("<li>" + cams[i] + "</li>");
        }
    }
});

function getPageSize() {

    var xScroll, yScroll;

    if (window.innerHeight && window.scrollMaxY) {
        xScroll = window.innerWidth + window.scrollMaxX;
        yScroll = window.innerHeight + window.scrollMaxY;
    } else if (document.body.scrollHeight > document.body.offsetHeight){ // all but Explorer Mac
        xScroll = document.body.scrollWidth;
        yScroll = document.body.scrollHeight;
    } else { // Explorer Mac...would also work in Explorer 6 Strict, Mozilla and Safari
        xScroll = document.body.offsetWidth;
        yScroll = document.body.offsetHeight;
    }

    var windowWidth, windowHeight;

    if (self.innerHeight) { // all except Explorer
        if(document.documentElement.clientWidth){
            windowWidth = document.documentElement.clientWidth;
        } else {
            windowWidth = self.innerWidth;
        }
        windowHeight = self.innerHeight;
    } else if (document.documentElement && document.documentElement.clientHeight) { // Explorer 6 Strict Mode
        windowWidth = document.documentElement.clientWidth;
        windowHeight = document.documentElement.clientHeight;
    } else if (document.body) { // other Explorers
        windowWidth = document.body.clientWidth;
        windowHeight = document.body.clientHeight;
    }

    // for small pages with total height less then height of the viewport
    if(yScroll < windowHeight){
        pageHeight = windowHeight;
    } else {
        pageHeight = yScroll;
    }

    // for small pages with total width less then width of the viewport
    if(xScroll < windowWidth){
        pageWidth = xScroll;
    } else {
        pageWidth = windowWidth;
    }

    return [pageWidth, pageHeight];
}

window.addEventListener("load", function() {

    jQuery("body").append("<div id=\"flash\"></div>");

    var canvas = document.getElementById("canvas");

    if (canvas.getContext) {
        ctx = document.getElementById("canvas").getContext("2d");
        ctx.clearRect(0, 0, 320, 240);

        var img = new Image();
        img.src = "/images/rails.png";
        img.onload = function() {
            ctx.drawImage(img, 129, 89);
        }
        image = ctx.getImageData(0, 0, 320, 240);
    }

    var pageSize = getPageSize();
    jQuery("#flash").css({ height: pageSize[1] + "px" });

}, false);

window.addEventListener("resize", function() {

    var pageSize = getPageSize();
    jQuery("#flash").css({ height: pageSize[1] + "px" });

}, false);
</script> 
```

只需确保 jquery.webcam.js 中引用的“ **jscam.swf** ”文件正确加载到页面上。

您可以在**routes.rb**中定义的路线是：

```
resources :pictures do
  collection do 
    get 'capture'
    post 'save_image'
  end
end 
```

然后，您可以从这里使用：[https](https://github.com/blueimp/jQuery-File-Upload) ://github.com/blueimp/jQuery-File-Upload使用 Ajax 表单提交来上传它！

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T07:30:50.427

错误。

代替

```
def save_image
  image = params[:canvas][:image]
  File.open("#{Rails.root}/public/path_you_want_to_image/image_name.png", 'wb') do |f|
    f.write(Base64.decode64(image))
  end
  # Or use paperclip to save image for a model instead!!
end 
```

由

```
def save_image
  image = params[:capture][:image]
  File.open("#{Rails.root}/public/path_you_want_to_image/image_name.png", 'wb') do |f|
    f.write(Base64.decode64(image))
  end
  # Or use paperclip to save image for a model instead!!
end 
```

和

```
function capture_image(){
webcam.capture();
changeFilter();
void(0);
var canvas = document.getElementById('canvas')
var context = canvas.getContext("2d");
var img     = canvas.toDataURL("image/png");
var item_image = img.replace(/^data:image\/(png|jpg);base64,/, "") ;
document.getElementById('capture_images').innerHTML="<input id=\"capture_image\" type=\"hidden\" value=\""+capture_image+"\" name=\"capture[image]\">";} 
```

到

```
function capture_image(){
webcam.capture();
changeFilter();
void(0);
var canvas = document.getElementById('canvas')
var context = canvas.getContext("2d");
var img     = canvas.toDataURL("image/png");
var item_image = img.replace(/^data:image\/(png|jpg);base64,/, "") ;
document.getElementById('capture_images').innerHTML="<input id='capture_image' type='hidden' value=\'"+item_image+"\' name='capture[image]'>";} 
```

在此之后，一切正常。

PS。如果您得到：“capture_image() is not a fn”，请将 fn 名称更改为：“capture_images()”，不要忘记在 onClick 事件中更改名称

# wpf - 复制粘贴 WPF 窗口出现错误

> ID：10309422
> 
> 赞同：2
> 
> 时间：2012-04-25T04:37:39.287
> 
> 标签：wpf, xaml

我意识到当我们尝试复制粘贴其中一个窗口时，VS 会出错。错误通常是方法调用在 InitializeComponet() 或其他方法之间不明确的类型。这是因为 VS 只重命名 xaml 文件而不是关联的 CS 文件。我不知道为什么 VS 不处理。复制粘贴现有窗口的更好方法是什么，不会出现任何错误。还是他们有任何简单的解决方法？我们需要手动重命名的所有其他内容是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T05:46:02.733

VS 也会重命名 XAML 和关联的 CS 文件。它不会更改CS 文件中的**类名称**和**构造函数名称以及 XAML 文件中的****x:Class**属性。如果你改变这些，这会很好。

我认为没有解决方法，但我认为这也不是很多工作。

# c# - 在 windows 服务中调用 windows 应用程序

> ID：10309426
> 
> 赞同：0
> 
> 时间：2012-04-25T04:38:12.190
> 
> 标签：c#, c#-4.0, web-applications, windows-services

我正在研究类似于 2010 年提出的这个问题

[如何在 C# 中使用 Windows 服务调用 Windows 应用程序？](https://stackoverflow.com/q/2309079/1270384)

这个答案可能是我的问题的解决方案

[https://stackoverflow.com/a/2309089/1270384](https://stackoverflow.com/a/2309089/1270384)

虽然我不知道该怎么做。

想知道是否有人可以给我一个提到的例子或类似的东西，即提到的流程类，或者只是一个关于如何执行给出的说明的简短例子。

**更新**

我有一个 Web 应用程序，它检查我的数据库是否有对特定表的更改。我希望我的应用程序在我试图创建的这个 Windows 服务中被调用，我想安排它每 20 秒运行一次。

我是 Windows 服务的新手，所以不太明白所解释的内容。

任何澄清将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:57:48.677

在服务控制面板的登录选项卡上，选中“允许服务与桌面交互”复选框。那么你可以做这样的事情。

```
public class WinService : ServiceBase
{
Process p = new Process();

public WinService()
{
InitializeComponent();
}

protected override void OnStart(string[] args)
{
RunApp();
}

private void RunApp()
{
p.StartInfo.FileName = @"<path to your app>";
p.StartInfo.Arguments = "<your params>";
p.StartInfo.WindowStyle = ProcessWindowStyle.Maximized;
p.Start();
}

protected override void OnStop()
{
p.Kill();
}
} 
```

编辑：参数传递：

列出 startInfo.Arguments 中的所有参数，用空格分隔。数字参数按原样列出，字符串参数用引号列出。

**例子：**

如果您的应用程序的命令行是：

```
YourApp.exe param1 "param two" param3 
```

那么你的 startInfo.Arguments 应该设置为：

```
startInfo.Arguments = "param1 \"param two\" param3"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:09:32.467

您始终可以将 Web 应用程序中的逻辑封装在一个单独的类中，您可以在服务中简单地调用该类。

`WebClient`否则，您可以使用该类调用您的网站。

# android - 在通话过程中播放音频，以便通话中的其他人可以听到

> ID：10309431
> 
> 赞同：2
> 
> 时间：2012-04-25T04:39:03.750
> 
> 标签：android

我正在开发一个应用程序，当被叫方取消呼叫时需要向被叫方播放音频歌曲，并且当音频歌曲播放完成时，自动呼叫必须自动断开。我试图在 android API 中找到任何类或方法来执行此操作，但找不到...请帮助我如何做到这一点..您的回答可能对我有帮助...请回复

先感谢您..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-25T04:50:43.420

AFAIK, it is *not* possible to play a sound in the ongoing call and also to automatically dosconnect a call. Telephont API doesnt provide any methods to do any od these. So both od these requirement can't be fullfilled in ANdroid.

# java - 使用 servlet 下载文件

> ID：10309435
> 
> 赞同：0
> 
> 时间：2012-04-25T04:40:00.363
> 
> 标签：java, file, servlets, download

嗨，我尝试了以下 java 代码，如果我将它们用作 java 应用程序，它们可以正常工作，但是当我在我的 servlet 页面中使用相同的代码时，它们不起作用意味着我无法下载文件。请建议我应该做哪些更改，以便我可以使用 Servlets 下载文件。

一个。

```
 java.io.BufferedInputStream in = new java.io.BufferedInputStream(new java.net.URL("http://169.254.174.150:8084/WebApplication1/files/check.txt").openStream());
    File f1 = new File("D:\\a.txt");
    java.io.FileOutputStream fos = new java.io.FileOutputStream(f1);
    java.io.BufferedOutputStream bout = new BufferedOutputStream(fos, 1024);
    byte data[] = new byte[1024];
    while (in.read(data, 0, 1024) >= 0) {
        bout.write(data);
    }
    bout.close();
    in.close();
} 
```

湾。[http://www.javabeat.net/examples/2012/04/13/download-file-from-http-https-server-using-java/](http://www.javabeat.net/examples/2012/04/13/download-file-from-http-https-server-using-java/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:51:37.647

One of the older JavaBeat examples like the one you specified can be found [here](http://www.javabeat.net/examples/2007/10/10/file-upload-and-download-using-java/)

I found other solutions too but this seems to be the most comprehensive.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:52:27.557

Couple of things, insetad of writing it to a file try wrting the data directly to the responce. Before writing data you will have to set the following parameters to the responce

```
 //byte[] filedata = ; intialize your file contents
        String filename = "a.txt";

        //      set the header information in the response.
        res.setHeader("Content-Disposition", "attachment; filename=\"" + filename + "\";");
        res.setContentType("application/x-unknown");
        ByteArrayInputStream byteStream = new ByteArrayInputStream(filedata);
        BufferedInputStream bufStream = new BufferedInputStream(byteStream);
        ServletOutputStream responseOutputStream = res.getOutputStream();
        int data = bufStream.read();
        while (data != -1)
        {
            responseOutputStream.write(data);
            data = bufStream.read();
        }

        bufStream.close();
        responseOutputStream.close(); 
```

where res is a HttpServletResponse object. After this you can write data to responseOutputStream.

# php - 具有本地存储的会话

> ID：10309436
> 
> 赞同：2
> 
> 时间：2012-04-25T04:40:01.690
> 
> 标签：php, javascript, html, local-storage, session-cookies

我对 HTML5 的 javascript 和 localstorage 使用非常陌生。我目前在我的站点中使用 PHP 会话，并希望转移到本地存储，因为此时我正在使用 cookie 来更新会话。

我知道 localstorage 是一个客户端函数，而不是像 PHP 这样的服务器端函数，所以这让我很难弄清楚如何解决这个问题。

我要做的就是设置 localstorage 值（我已经完成了），但我需要能够将它们传递回 PHP 以将它们重新建立为 SESSION 变量（我必须这样做，因为我的网站有 100 多个页面一次最多 50 个会话变量，所以我想简单地使用本地存储来重新生成会话变量而不是 cookie。

如果有人可以帮助我解决这个问题，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:11:34.740

您将需要使用 ajax 或某种形式的方式来联系您的服务器以允许这样做。您可以访问该本地存储的唯一方法是使用客户端脚本（javascript），它反过来可以用它来做事。我不知道ajax，但你应该研究一下。我也同意@Truth，本地存储很好，特别是如果您不想使用 cookie，但唯一的好处是用户可以离线使用该本地存储。所以真的没有真正的理由你应该这样做。如果您使用 cookie，则可以通过脚本访问该信息。另一方面，您可以使用本地存储来替代在用户浏览器上禁用 cookie。

# wpf - 如何从 FlowDocument 中获取段落

> ID：10309439
> 
> 赞同：3
> 
> 时间：2012-04-25T04:40:39.793
> 
> 标签：wpf, flowdocument, paragraph

我在我的应用程序中使用富文本框。

在 flowdocument 中，我有一个表格，在其中，我有 tablerow 组，再次在 tablerow 内，然后是表格单元格。在表格单元格中，我使用了一个具有特定名称的段落。稍后我如何通过使用 c# 代码指定名称来获取本段？

我将如何获得所有具有名称的段落并且所有这些段落都将在一个表格内但在不同的表格行和表格单元格中？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:55:30.407

在创建（或访问）段落时，将段落放入其中，`Dictionary<string, Paragraph>()`使用名称作为其键，以便稍后通过键/名称提取。

# sql - 触发调用过程错误

> ID：10309447
> 
> 赞同：1
> 
> 时间：2012-04-25T04:41:53.747
> 
> 标签：sql, oracle, stored-procedures, triggers, oracle10g

我在使用此触发器时遇到了一些问题。我创建了一个程序来检查薪水是否在某个范围内。如果它没有落在某个范围内，则引发异常。问题是即使程序编译没有错误，触发器也找不到程序。

```
set serveroutput on;
create or replace procedure check_salary (
    tmp_id in varchar2,
    tmp_sal in number
  )
IS
v_sal number(6,0) := tmp_sal;
v_min number(6,0);
v_max number(6,0);
ex_fail exception;
cursor cur_select is
    select min_salary, job_id, max_salary
    from jobs where job_id = tmp_id;

BEGIN

 for rec_something in cur_select loop
  v_min := rec_something.min_salary;
  v_max := rec_something.max_salary;
    if v_sal >= v_min and v_sal <= v_max then
      raise ex_fail;
    end if;
 end loop;
 exception
  when ex_fail then
    dbms_output.put_line('Invalid salary ' || v_sal || ' must be between ' || v_min  || ' and ' || v_max ||'.');
END;
/ 
show errors;

create or replace trigger check_salary_trg
  after insert or update on employees
  for each row
declare

begin
  IF UPDATING or INSERTING THEN
    execute check_salary(:NEW.job_id, :NEW.salary);
  end if;
end;
/
show errors; 
```

错误信息：

```
PROCEDURE check_salary compiled
No Errors.
TRIGGER check_salary_trg compiled
Warning: execution completed with warning
5/13           PLS-00103: Encountered the symbol "CHECK_SALARY" when expecting one of the following:

   := . ( @ % ; immediate
The symbol ":=" was substituted for "CHECK_SALARY" to continue. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T06:10:53.620

将其更改为：

```
create or replace trigger check_salary_trg
  after insert or update on employees
for each row
begin
  IF UPDATING or INSERTING THEN
    check_salary(:NEW.job_id, :NEW.salary);
  end if;
end;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:08:52.813

在 PL/SQL 块中执行过程时，不要使用

```
 EXECUTE syntax 
```

有关执行的更多信息，您可以查看以下链接

[http://docstore.mik.ua/orelly/oracle/prog2/ch23_01.htm](http://docstore.mik.ua/orelly/oracle/prog2/ch23_01.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:33:06.650

堆栈溢出异常是由于使用了`dbms_output.put_line`内部`check_salary`过程。

SQL*Plus 命令`set serveroutput on`默认保留很小的大小，您必须指定缓冲区大小或`dbms_output.put_line`从`check_salary`过程中删除。

为了增加默认缓冲区大小，请使用：

`set serveroutput on size 1000000`

# css - 如何在各种浏览器和操作系统上使用适当的 webfont 呈现一致性？

> ID：10309450
> 
> 赞同：1
> 
> 时间：2012-04-25T04:42:21.367
> 
> 标签：css, fonts, web, typography

我在 Fontsquirrel 中使用 webfont 创建了一个*网站*。

```
@font-face 
{   
    font-family: 'Univers57Condensed';  
    src: url('/resources/fonts/univers-condensed-webfont.eot');     
    src: url('/resources/fonts/univers-condensed-webfont.eot?#iefix') 
    format('embedded-opentype'), 
    url('/resources/fonts/univers-condensed-webfont.woff') format('woff'),
    url('http://hcil.snu.ac.kr/~muclipse/resources/fonts/univers-condensed-webfont.ttf')
    format('truetype'), 
    url('/resources/fonts/univers-condensed-webfont.svg#Univers57Condensed')
    format('svg');  
    font-weight: normal;    
    font-style: normal; 
} 
```

我像上面一样导入了eot、woff、svg、ttf文件。

实际上，它工作正常，但我看到了一些问题。

IE 似乎总是加载 eot 文件，但谷歌浏览器似乎无法预测地加载随机文件。

> ![铬，在 MacOS 中](../Images/05aeb118045a83b162fa81f5b608486a.png)

Chrome，在 MasOS 中，正常状态，但有时文本会变得更胖。

> ![在此处输入图像描述](../Images/d2533e9f4ec61afd97bd44bf6eb59875.png)

我猜渲染字体的差异是由加载不同的字体文件引起的，不是吗？

我该如何解决这个问题，只导入 eot 和另一种格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:11:24.823

我怀疑这种差异的真正原因仅仅是不同的操作系统以不同的方式呈现字体。相同的字体在 Windows、OS X 和 Linux 上看起来会略有不同 - 甚至在一个操作系统中，也会根据设置而改变（在 Windows 上，如果启用/禁用 ClearType，您可以看到这一点）。

基本上，像素完美的相似性在不同平台上是不可能的。

# asp.net - Ajax 手风琴 - 回发时按钮不会触发

> ID：10309452
> 
> 赞同：0
> 
> 时间：2012-04-25T04:42:38.887
> 
> 标签：asp.net, ajaxcontroltoolkit, accordion

我在页面上有一个 Ajax 手风琴控件。在第一个窗格中，我有一个按钮，单击该按钮可打开第二个窗格（将选定的手风琴索引设置为第二个窗格）。如果我单击第一个窗格的标题以将其打开（关闭第二个窗格）并再次单击该按钮，则其 OnClick 不会触发并且第二个窗格不会打开。

# java - Java: Synchronization between Outer Class and inner class

> ID：10309462
> 
> 赞同：2
> 
> 时间：2012-04-25T04:44:47.747
> 
> 标签：java, synchronization

I have code similar to following:

```
class OuterClass
{
   private final AtomicInteger count = new AtomicInteger(0);

   private class InnerClass extends TimerTask
   {
       public void run()
       {
            ......
            ......
            incremenetCount();
       }
   }

   public void doSomething()
   {
        .......
        .......
        incremenetCount();
   }

   private void incrementCount()
   {
      count.incrementAndGet();
   }
} 
```

Is calling `incrementCount` from inner class the same as calling it from any other function in outer class as the synchronization is actually around the variable `count`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T04:46:32.047

> ***Is calling incrementAndCount from inner class the same as calling it from any other function in outer class [...]***

Yes, calling `incrementCount()` from the inner class is the same as calling `incrementCount()` from the outer count.

All non-static inner classes have an implicit reference to the object of the enclosing class, and it is through this reference the `incrementCount()` will be called.

(Story would have been different if your inner class was *static* though.)

> ***as the synchronization is actually around the variable count?***

Doesn't matter. The same method, is called on the same object, regardless if you do the call from the inner or from the outer class.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T05:21:34.157

简短的回答是它是安全的。

要了解原因，让我们看一下：

```
class SomeClass {
    private final AtomicInteger count = new AtomicInteger(0);
    ...
    private void incrementCount() {
        count.incrementAndGet();
    }
} 
```

需要考虑两个问题来确定这是否是线程安全的。

1.  获取`count`是否正确同步？回答是 - 因为`count`被声明为`final`并且有规则说`final`一旦构造函数完成就可以在不同步的情况下读取字段。

2.  该`incrementAndGet()`方法是线程安全的吗？回答是 -`AtomicInteger`类的规范是这样说的。

现在让我们看一下内部类的情况。内部类的实例对外部类的实例有一个隐藏的最终引用。所以 ...

```
 public void run() {
        incrementCount();
    } 
```

相当于这个...

```
 private final OuterClass $outer;  // initialized by the constructor.
    ...
    public void run() {
        $outer.incrementCount();
    } 
```

根据上面第 1 点的推理，`incrementCount()`调用本身是线程安全的。并且 fetch`$outer`也是线程安全的，因为它隐含地是一个`final`字段。

# php - PHP数据处理困难

> ID：10309467
> 
> 赞同：1
> 
> 时间：2012-04-25T04:45:46.687
> 
> 标签：php, http-post, storage, string-comparison

我有以下问题。

我有一个用于保存里程碑的 jQuery 手风琴，在每个里程碑内我都有一个按钮来向里程碑添加一个事件。这很好用。我为每个输入分配名称的方式如下。

```
<input type="text" name="milestone_0_name">
<input type="text" name="milestone_0_start_date">
<input type="text" name="milestone_0_end_date">
<input type="text" name="milestone_0_description">
<input type="text" name="milestone_1_name">
<input type="text" name="milestone_1_start_date">
<input type="text" name="milestone_1_end_date">
<input type="text" name="milestone_1_description">
<input type="text" name="milestone_2_name">
<input type="text" name="milestone_2_start_date">
<input type="text" name="milestone_2_end_date">
<input type="text" name="milestone_2_description">
and so on... 
```

因此，之后当我将事件添加到里程碑_0 时，例如生成的标记如下：

```
<input type="text" name="milestone_0_events_event_0_event_name">
<input type="text" name="milestone_0_events_event_0_event_start_date">
<input type="text" name="milestone_0_events_event_1_event_name">
<input type="text" name="milestone_0_events_event_1_event_start_date"> 
```

我不是`$_POST`数据处理方面的专家，所以我使用这种方式来了解哪些事件属于某个里程碑。问题是我用来确定一个里程碑有多少变量（里程碑的信息和每个事件信息）的函数有一个我似乎找不到的问题。

功能是：

```
// Assign all $_POST data to $milestones
$milestones = $_POST;
print_r($milestones);

$milestoneNames = array();
$milestoneSize = array();

$default = "milestone_";
$indexOfMilestone=0;
$ind=0;
$text=$default.$indexOfMilestone;
$indexOfIteration=0;
$actualSize=0;
$change=false;

foreach($milestones as $ms)
{
    $currKey = KeyName($milestones,$indexOfIteration);
    echo $text.'.'.$currKey.'<br />';
    $pos = strripos($currKey, $text);
    if ($pos === false) 
    {
        $milestoneSize[$indexOfMilestone] = $indexOfIteration;
        $indexOfMilestone++;
        $text=$default.$indexOfMilestone;
    }
$indexOfIteration++;
}

print_r($milestoneSize); 
```

使用测试数据，输出为：

```
 [milestone_0_name] => Milestone 1
    [milestone_0_start_date] => 12-4-25
    [milestone_0_end_date] => 12-4-26
    [milestone_0_description] => abcdefg
    [milestone_0_events_event_0_event_name] => asdg
    [milestone_0_events_event_0_event_start_date] => ff
    [milestone_0_events_event_1_event_name] => fghjk
    [milestone_0_events_event_1_event_start_date] => ff
    [milestone_0_events_event_2_event_name] => zxcv
    [milestone_0_events_event_2_event_start_date] => ff
    [milestone_0_events_event_3_event_name] => bnm,
    [milestone_0_events_event_3_event_start_date] => zz
    [milestone_0_events_event_4_event_name] => qwerty
    [milestone_0_events_event_4_event_start_date] => zz
    [milestone_0_events_event_5_event_name] => uiop
    [milestone_0_events_event_5_event_start_date] => zz
    [milestone_1_name] => Milestone 2
    [milestone_1_start_date] => 12-4-26
    [milestone_1_end_date] => 12-4-27
    [milestone_1_description] => sadg ads asdgasdg adsga sgdsa gsad adsg asdg
    [milestone_1_events_event_0_event_name] => 1234
    [milestone_1_events_event_0_event_start_date] => ff
    [milestone_1_events_event_1_event_name] => 4321
    [milestone_1_events_event_1_event_start_date] => ff
    [milestone_1_events_event_2_event_name] => 6542
    [milestone_1_events_event_2_event_start_date] => ff
)

milestone_0.milestone_0_name
milestone_0.milestone_0_start_date
milestone_0.milestone_0_end_date
milestone_0.milestone_0_description
milestone_0.milestone_0_events_event_0_event_name
milestone_0.milestone_0_events_event_0_event_start_date
milestone_0.milestone_0_events_event_1_event_name
milestone_0.milestone_0_events_event_1_event_start_date
milestone_0.milestone_0_events_event_2_event_name
milestone_0.milestone_0_events_event_2_event_start_date
milestone_0.milestone_0_events_event_3_event_name
milestone_0.milestone_0_events_event_3_event_start_date
milestone_0.milestone_0_events_event_4_event_name
milestone_0.milestone_0_events_event_4_event_start_date
milestone_0.milestone_0_events_event_5_event_name
milestone_0.milestone_0_events_event_5_event_start_date
**milestone_0.milestone_1_name**
milestone_1.milestone_1_start_date
milestone_1.milestone_1_end_date
milestone_1.milestone_1_description
milestone_1.milestone_1_events_event_0_event_name
milestone_1.milestone_1_events_event_0_event_start_date
milestone_1.milestone_1_events_event_1_event_name
milestone_1.milestone_1_events_event_1_event_start_date
milestone_1.milestone_1_events_event_2_event_name
milestone_1.milestone_1_events_event_2_event_start_date

Array ( [0] => 16 ) 
```

问题出现在以粗体或 ** ** 标记的行中（不确定预览是否正常），里程碑_0 应该是里程碑_1。这个问题破坏了整个计数过程:)。

无论如何，如果这不是存储数据的好方法，`$_POST`我愿意接受改进数据存储的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:51:51.433

根据您的要求，这是我将如何构建表单：

```
<ul class="milestones">

 <li>
  <label>
   Name
   <input type="text" name="milestones[0][name]">
  </label>
  <label>
   Start date
   <input type="text" name="milestones[0][start_date]">
  </label>
  <label>
   End date
   <input type="text" name="milestones[0][end_date]">
  </label>
  <label>
   Description
   <input type="text" name="milestones[0][description]">
  </label>
 <ul class="events">
  <li>
   <label>
    Name
    <input type="text" name="milestones[0][events][0][name]">
   </label>
   <label>
    Start date
    <input type="text" name="milestones[0][events][0][start_date]">
   </label> 
  </li>
  <li>
   <label>
    Name
    <input type="text" name="milestones[0][events][1][name]">
   </label>
   <label>
    Start date
    <input type="text" name="milestones[0][events][1][start_date]">
   </label> 
  </li>
 </ul>
</li>

 <li>
  <label>
   Name
   <input type="text" name="milestones[1][name]">
  </label>
  <label>
   Start date
   <input type="text" name="milestones[1][start_date]">
  </label>
  <label>
   End date
   <input type="text" name="milestones[1][end_date]">
  </label>
  <label>
   Description
   <input type="text" name="milestones[1][description]">
  </label>
 </li>

</ul> 
```

这将产生 POST 数据，例如：

```
milestones => array(
 0 => array(
  name => "name",
  start_date => "2012-04-25",
  end_date => "2012-04-28",
  description => "desc",
  events => array(
   0 => array(
    name => "name0",
    start_date => "date0",
   ),
   1 => array(
    name => "name1",
    start_date => "date1",
   ),
  ),
 ),
 1 => array(
  name => "name",
  start_date => "2012-05-01",
  end_date => "2012-05-14",
  description => "desc",
 ),
) 
```

# php - Want to get list of Facebook friends with search friend functionality

> ID：10309469
> 
> 赞同：0
> 
> 时间：2012-04-25T04:45:56.723
> 
> 标签：php, facebook

I have fetched friend list from facebook using below code:

```
$session = $facebook->getSession();

if ($session) {
    $uid = $facebook->getUser();
    $friends = $facebook->api('/me/friends');
}

foreach ($friends as $key=>$value) {
    echo count($value) . ' Friends';
    echo '<hr />';
    echo '<ul id="friends">';
    foreach ($value as $fkey=>$fvalue) {
        echo '<li><img src="https://graph.facebook.com/' . $fvalue->id . '/picture" title="' . $fvalue->name . '"/></li>';
    }
    echo '</ul>';
} 
```

I have one query that I have fetched friend list from facebook using this API, but I have one input box where I have type `john` then this friend list should contain list of friends whose name is 'jhon'. How can I implement this functionality in existing code?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:59:23.203

这是一个类似于我认为您所追求的项目：http: [//www.devthought.com/2008/01/12/textboxlist-meets-autocompletion/](http://www.devthought.com/2008/01/12/textboxlist-meets-autocompletion/)

如果我没记错的话，这在 Mootools 和 jQuery 版本中都可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:03:16.347

我所做的是将朋友姓名和 user_ids 存储在一个表中，并在新登录时更新该表。因此，我们可以从那里创建一个通过 ajax 命中的自动完成端点。

```
SELECT * FROM `user_contacts`
WHERE `name` LIKE "%{$name}%" AND `user_id` = "{$user_id}"
LIMIT 5 
```

我们获取这个查询的结果并对其进行 json_encode，我们可以将这些数据直接传递到 jquery ui 自动完成中。

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

似乎运作良好，但是 user_contacts 表可以相对快速地填满，具体取决于您拥有多少 Facebook 用户。我不是 100% 在 Facebook 的 T&C 上存储这些数据，所以它值得研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:16:44.420

获取函数`in_array`，你可以传递你搜索的数组和字符串。

# javascript - 如何获取时区偏移值

> ID：10309471
> 
> 赞同：0
> 
> 时间：2012-04-25T04:46:06.000
> 
> 标签：javascript

我的要求是，我需要将时区值转换为偏移值，例如亚洲/迪拜到 +4 .. 考虑在 js 中初始化日期。

```
var currentDate = new Date(); 
```

并且可以设置时区并获取偏移量..

```
currentDate.setTimezone("Asia/Dubai");
var offsetValue=currentDate.getTimezoneOffset();

alert('offsetValue---'+offsetValue); 
```

它不起作用..在设定的时区出现页面错误..有没有其他方法可以获得offet值？也需要考虑夏令时..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:54:09.633

该`Date`对象不知道`setTimezone`方法。如果您想将 a 设置`Date`为“亚洲/迪拜”时区，这可能是一种方式：

```
var regionalDate = new Date;
regionalDate.setHours(regionalDate.getUTCHours()+4); //=> set to UTC+4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T06:58:17.207

这不是一个有效的 jquery 语句

```
currentDate.setTimezone("Asia/Dubai"); 
```

只需删除此行，您将获得时区偏移量。

# browser - Jquery移动示例在浏览器中不起作用

> ID：10309482
> 
> 赞同：1
> 
> 时间：2012-04-25T04:47:49.513
> 
> 标签：browser, jquery-mobile

我创建了一个 jquery mobile 示例，它在 jsfiddle.net 中完全正常工作，但在任何浏览器中都无法正常工作。我提供了相关链接，您可以在浏览器和 jsfiddle 中进行测试。

```
 note:jsfiddle.net is the site where you can run and test the jquery examples.

    for brower :   http://errortec.blogspot.in/    

    u can copy the code from the errortec.blogspot.in and place it in your html file and check it in ur browser so that u can understand the problem 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:19:11.337

尝试将您的脚本包含在一个准备好的函数中：

```
$(document).ready( function() {
//your script here
}); 
```

还有一个拼写错误，你的脚本标签的文本属性是 text/javacsript。如果您只是为链接使用 href 属性，导航也应该可以工作。对于 jquery mobile，一些特定的事件可用：pageinit、pagecreate、pageshow。

更新：您的点击处理程序应该添加到 jQuery*就绪*处理程序中：

```
<script type="text/javascript">
$(document).ready( function() {
    $('#prevchild').click(function() {
        $.mobile.changePage($('#home'), {
            transition: 'slide',
            reverse: true
        });
    });

    $('#nextchild').click(function() {
        $.mobile.changePage($('#child'), {
            transition: 'slide',
            reverse: true
        });
    });
    $('#login').click(function() {
        $.mobile.changePage($('#child'), {
            transition: 'slide',
            reverse: true
        });
    });
    $('#back').click(function() {
        $.mobile.changePage($('#home'), {
            transition: 'slide',
            reverse: true
        });
    });

    $('#next').click(function() {
        $.mobile.changePage($('#child'), {
            transition: 'slide',
            reverse: true
        });
    });

    $('#prev').click(function() {
        $.mobile.changePage($('#home'), {
            transition: 'slide',
            reverse: true
        });
    });
});
</script> 
```

我已经在 Chrome 中尝试过你的代码，它适用于这个小改动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:52:12.867

你的身体没有开始标签。它应该在最后一个脚本标签和第一个 div 之间开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:29:17.370

```
In this case try to keep the javascript in on windows.load() as shown below :

    <script type="text/javascript">
        window.onload=function(){

            $('#prevchild').click(function() {

                    $.mobile.changePage($('#home'), {
                    transition: 'slide',
                    reverse: true
                });
            });

            $('#nextchild').click(function() {

                $.mobile.changePage($('#child'), {
                    transition: 'slide',
                    reverse: true
                });
            });

            $('#login').click(function() {
                $.mobile.changePage($('#child'), {
                    transition: 'slide',
                    reverse: true
                });
            });

            $('#back').click(function() {
                $.mobile.changePage($('#home'), {
                    transition: 'slide',
                    reverse: true
                });
            });

            $('#next').click(function() {
                $.mobile.changePage($('#child'), {
                    transition: 'slide',
                    reverse: true
                });
            });

            $('#prev').click(function() {
                $.mobile.changePage($('#home'), {
                    transition: 'slide',
                    reverse: true
                });
            });
} 
```

body 组件在脚本执行后加载&通过使用 onload() 脚本将在组件加载后执行，因此组件将知道我尝试过的脚本并对我有帮助；我希望面临同样问题的人会发现它很有帮助。

# r - R 中的元组遵循 Mathematica Tuples[list, n]

> ID：10309486
> 
> 赞同：2
> 
> 时间：2012-04-25T04:48:40.047
> 
> 标签：r, wolfram-mathematica, tuples

我想在 R 中复制 Mathematica 的 Tuples[list, n] 的行为。例如，

```
Tuples[{0, 1}, 3] = 
{{0, 0, 0}, {0, 0, 1}, {0, 1, 0}, {0, 1, 1}, {1, 0, 0}, 
{1, 0, 1}, {1, 1, 0}, {1, 1, 1}}. 
```

在 R 中，我想要以下结果：

```
tuples(c(0,1), 3) = list( c(0, 0, 0), c(0, 0, 1), c(0, 1, 0), 
c(0, 1, 1), c(1, 0, 0), c(1, 0, 1), c(1, 1, 0), c(1, 1, 1) ) 
```

或类似的东西，我可以提取子列表 c(0,0,0) 等。

有这个命令吗？或者我该如何编程？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:06:34.683

这是一种方法：

```
tuples <- function(x, n) do.call(expand.grid, rep(list(x), n))

tuples(0:1, 3)
#   Var1 Var2 Var3
# 1    0    0    0
# 2    1    0    0
# 3    0    1    0
# 4    1    1    0
# 5    0    0    1
# 6    1    0    1
# 7    0    1    1
# 8    1    1    1 
```

我认为将其保留为矩阵或 data.frame 更有意义，因为所有元素都具有相同的长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T21:57:24.437

combinatorics 包，'combinat' 版本 0.0-8，包含一个名为 hcube 的函数，它也可以用来生成像 Mathematica 这样的元组，例如：

```
hcube(c(2,2,2), translation=c(-1,-1,-1))

     [,1] [,2] [,3]
[1,]    0    0    0
[2,]    1    0    0
[3,]    0    1    0
[4,]    1    1    0
[5,]    0    0    1
[6,]    1    0    1
[7,]    0    1    1
[8,]    1    1    1 
```

# php - how to use more model in MVC

> ID：10309489
> 
> 赞同：0
> 
> 时间：2012-04-25T04:49:17.473
> 
> 标签：php, model-view-controller, model

As i know in MVC, Model always connect to database, example:

```
class a extends Model {
...
}

class Model {
    public function __construct() {
        $db = new database;
        $db->connect('localhost','root','','example');
    }
} 
```

But, in the case i have more Model always run to get config in database. So, when run website will be 2 Model are used. This equivalent to 2 connect to database so its has effect to system when have many people visit my website (200 request = 400 connect to database)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:16:21.097

## 关于型号

实际上，模型首先不在课堂上。**模型是一个层**，其中包含大量对象。模型层中的两个主要类实例组负责以下职责之一：

*   领域业务逻辑和规则：由领域对象实现^([（一）](http://c2.com/cgi/wiki?DomainObject) [（二）](https://en.wikipedia.org/wiki/Business_object))
*   数据访问和持久性：通常实现为数据映射器^([(3)](http://martinfowler.com/eaaCatalog/dataMapper.html))

在代码中，它看起来类似于：

```
$user = $factory->buildObject('user');
$mapper = $factory->buildMapper('user');
$user->setId( 42 );
$mapper->fetch($user);
$now = time();
if ( $user->hasStatus( User::STATUS_LOCKED ) && !$user->isBanned( $now ) )
{
   $user->setStatus( User::STATUS_AVAILABLE );
}
$mapper->commit($user); 
```

您可能会注意到，业务对象在任何时候都不会真正与数据库交互。或者甚至意识到这一点。信息可能存储在纯文本文件中，或通过远程 REST API 或某些 noSQL 事物存储。域对象不关心这一点。所有存储都由映射器处理。控制发票制作的业务逻辑不依赖于发票信息的来源。

## 关于连接

由于您使用的是 OOP，因此您可能会利用它。考虑这个例子：

```
class Test
{
    protected $ob = null;
    public function __construct( $ob )
    {
        $this->ob = $ob;
    }
    public function get() 
    {
        var_dump( $this->ob->data );
    }
    public function set( $val )
    {
        $this->ob->data = $val;
    }
}

$object = new stdClass;
$foo = new Test($object);
$bar = new Test($object);

$foo->set('lorem ipsum');
$bar->get(); 
```

要查看执行：[http ://codepad.org/coCibwyk](http://codepad.org/coCibwyk)

您应该注意到，`Test`类的两个实例共享**同一个**实例。在您的代码中，您可以对[PDO](http://php.net/pdo)的实例执行相同的操作。

如果您使用类似于第一个代码剪切的东西，那么：

```
class Factory
{
    protected $connection = null;
    public function __construct( $connection )
    {
        $this->connection = $connection;
    }
    public function buildMapper( $className )
    {
        $className = $className . 'Mapper';
        $instance = new $className ;
        $instance->useConnection( $this->connection );
        return $instance;
    }
    // ... some other code 
} 
```

因此，当您使用 时`$mapper = $factory->buildMapper('user');`，该方法会创建一个已经有连接的对象。

# javascript - 实现这个多级下拉列表的最简单方法是什么？

> ID：10309491
> 
> 赞同：0
> 
> 时间：2012-04-25T04:49:33.400
> 
> 标签：javascript, xhtml

我想实现以下下拉列表系统： ![在此处输入图像描述](../Images/b63e0c507e0e10c7a757db49a3cb25b2.png)

我知道下拉列表是使用`<select>`语句实现的。但是，我不确定是否需要使用 Javascript 命令来处理图片中列出的要求。你会建议如何处理这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:59:09.157

我认为如果您只想允许用户根据第一个选项中的选择事件选择第二个和第三个选项，您可能需要 JavaScript 来执行此操作。如果您必须为禁用 JavaScript 的用户提供服务，您将必须有一个更新按钮之类的东西，该按钮发布到服务器，其中 ASP.Net / PHP / Django / Node.js 中的服务器端代码或类似的东西，构建第二个和第三个选项并将它们返回给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:00:48.787

您可以将第二个和第三个下拉列表放在`div`s 中，并最初将它们隐藏。选择第一个的值后，使第二个可见，依此类推。您可以使用 javascript 轻松完成此操作。例如：

```
function onLoad() {
document.getElementById("dayDropDownDiv").style.visibility="hidden";
} 
```

并在 div 中创建选择`body`：

```
<div id="dayDropDownDiv">
    <label for="select-Day" class="select">Day:</label>
    <select name="select-day" id="dayDropDown" onchange="dayChange(this)"></select>
</div> 
```

您还可以在 javascript 中以编程方式创建下拉菜单。您必须将`<option>`s添加到`<select>`s`innerHTML`中：

```
function addValues() {
    var dayOptionsList = "";

for(loopIndex=1;loopIndex<=31;loopIndex++){
        dayOptionsList = dayOptionsList+"<option>"+loopIndex+"</option>";//<-this will create an options list for days
    var daySelector  = document.getElementById("dayDropDown");
    daySelector.innerHTML = dayOptionsList;//done
} 
```

`<select>`最后，在选择第一个特定选项时使它们可见：

```
function firstValueSelected( resultsObj){
     var val = obj.options[obj.selectedIndex].text;//<- text of selected option
     if(val=="f")
         document.getElementById("dayDropDownDiv").style.visibility="visible";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T05:11:06.070

您将在页面上拥有所有三个下拉菜单，但下拉菜单 2 和 3 将被隐藏。在更改第一个下拉菜单时，您必须检查第一个下拉菜单的值并显示第二个和第三个下拉菜单。演示可[在此处获得](http://jsfiddle.net/vKJ9G/1/)

在 html 中，我们定义了三个下拉列表，第一个是可见的，第二个和第三个是隐藏的。当从第一个下拉列表中选择 3 时，我们将显示隐藏的下拉列表

```
<select id="sel1" >    
    <option > 1 </option>
    <option > 2 </option>
    <option > 3 </option>
</select>

<select id="sel2" style="display:none" >
    <option > 1 </option>
    <option > 2 </option>
    <option > 3 </option>
</select>

<select id="sel3" style="display:none" >
    <option > 1 </option>
    <option > 2 </option>
    <option > 3 </option>
</select>

​In javascript we have show the hidden dropdowns when 3 is selected from first drop down

$('#sel1').change(function ()
{   
    if($(this).val() == "3")
    {

        $('#sel2').show();
        $('#sel3').show();
    }
}
);
​ 
```

# objective-c - 子视图显示在其父视图之外

> ID：10309502
> 
> 赞同：1
> 
> 时间：2012-04-25T04:51:08.240
> 
> 标签：objective-c, cocoa-touch, uiview

在我的 iPad 应用程序中，我有一个`UIView`名为“myView”的对象，其框架为 (0, 0, 600, 500)。现在我想`UIImageView`在这个 myview 中添加一个，所以这是我的代码：

```
UIImageView *myImageView = [[UIImageView alloc] initWithFrame:CGRectMake(-100, 0,100, 200)];
[myImageView setImage:UIImage imageNamed:@"myImage.png"];
[myView addSubView:myImageView];
[myImageView release]; 
```

因此，根据此代码，不应显示 myImageView，因为它的 x 坐标为“-100”，宽度为“100”。但它显示在左侧的 myView 之外。

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:54:55.630

使用`UIView`的`clipsToBounds`属性，默认关闭。

# css - Mobile Safari 不接受 Century Gothic

> ID：10309510
> 
> 赞同：4
> 
> 时间：2012-04-25T04:52:41.660
> 
> 标签：css, fonts, safari

我创建了这个网站：

[http://imageworkz.asia/sixsensestester](http://imageworkz.asia/sixsensestester)

它具有“Century Gothic”字体系列，并且在除 MOBILE Safari 之外的所有浏览器中都能正常工作。请注意，它是 MOBILE Safari，因为在普通 Safari 中字体很好。有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T05:21:09.467

您可以在堆栈中提供后备字体。如果不出意外，只需回退到默认的无衬线字体：

```
font-family: 'Century Gothic', sans-serif; 
```

对于移动 Safari，它可能是 Helvetica Apple 许可的任何内容。如果这还不够好，请在网络上搜索“Century Gothic 替代 iOS”，或者只是查看适用于 iOS 的字体列表，以便在 Helvetica 不适合您时选择另一个备用字体。那么它将是：

```
font-family: 'Century Gothic', SomeFont, sans-serif; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:21:48.213

该页面也不会在我的 Android 上显示 Century Gothic。不足为奇，因为移动设备通常具有相当有限的字体库。

即使在 Windows 系统上，Century Gothic 也不是通用的，但可能低于 90%，请参阅 [http://www.codestyle.org/css/font-family/sampler-WindowsResults.shtml](http://www.codestyle.org/css/font-family/sampler-WindowsResults.shtml)

# android - Android, animation, How to sliding in and out a layout from screen?

> ID：10309511
> 
> 赞同：0
> 
> 时间：2012-04-25T04:52:45.450
> 
> 标签：android, animation, layout, slide

In my application I need to record by camera. During recording I show some items as menu on screen. I need to slide out menu from screen when user clicks an arrow and slide it in when user touched the screen.

I have two problem. 1) It seems my animation doesn't work. 2) when i set RelativeLayout to visible/invisible just the view take effect, camera view doesn't get the whole of screen as you see in images (I don't want see black background).

![enter image description here](../Images/8c663bd1e316a8c7af3d8e8090ac082c.png) ![enter image description here](../Images/9e682b348863be354001d15c53eab5eb.png)

R.anim.slide_in_up:

```
<?xml version="1.0" encoding="utf-8"?>

<translate 
    xmlns:android       = "http://schemas.android.com/apk/res/android"
    android:fromYDelta  = "100%p" 
    android:toYDelta    = "0%p"
    android:duration    = "3000" /> 
```

R.anim.slide_out_up:

```
<?xml version="1.0" encoding="utf-8"?>

<translate 
    xmlns:android       = "http://schemas.android.com/apk/res/android"
    android:fromYDelta  = "0%p" 
    android:toYDelta    = "100%p"
    android:duration    = "3000" /> 
```

Code, for showing slide_in_up:

```
rlMenu = (RelativeLayout) findViewById(R.id.rlMenu);
        imHide  = (ImageView) findViewById(R.id.btn_hide);
        imHide.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                rlMenu.setVisibility(View.INVISIBLE);
                overridePendingTransition(R.anim.slide_in_up, R.anim.slide_out_up);
            }
        }); 
```

Code, for showing slide_out_up:

```
@Override
    public boolean onTouchEvent(MotionEvent event) {

        rlMenu.setVisibility(View.VISIBLE);
        overridePendingTransition(R.anim.slide_out_up, R.anim.slide_in_up);

        return super.onTouchEvent(event);
    } 
```

Screen layout:

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
    xmlns:android           = "http://schemas.android.com/apk/res/android"
    android:layout_width    = "fill_parent"
    android:layout_height   = "fill_parent"
    android:orientation     = "vertical" >

     <FrameLayout
        android:id              = "@+id/camera_preview"
        android:layout_width    = "fill_parent"
        android:layout_height   = "0dip"
        android:layout_weight   = "1" />

     <RelativeLayout
         android:id             = "@+id/rlMenu"
         android:layout_width   = "fill_parent"
         android:layout_height  = "wrap_content"
         android:orientation    = "horizontal" >

         <RelativeLayout
             android:layout_width           = "240dip"
             android:layout_height          = "50dip"
             android:background             = "@drawable/btn_top_edge_right"
             android:layout_alignParentLeft = "true" >

             <ImageView 
                 android:id                     = "@+id/btn_hide"
                 android:layout_width           = "40dip"
                 android:layout_height          = "wrap_content"
                 android:src                    = "@drawable/btn_record_hide"
                 android:layout_marginTop       = "10dip"
                 android:layout_marginBottom    = "10dip"
                 android:contentDescription     = "@string/menu_contentdescription"
                 android:scaleType              = "fitXY" />

             <ImageView 
                 android:id                     = "@+id/btn_record"
                 android:layout_width           = "wrap_content"
                 android:layout_height          = "wrap_content"
                 android:src                    = "@drawable/btn_record_start"
                 android:layout_toRightOf       = "@id/btn_hide"
                 android:layout_margin          = "10dip"
                 android:contentDescription     = "@string/menu_contentdescription" />

             <ImageView 
                 android:id                     = "@+id/btn_stop"
                 android:layout_width           = "wrap_content"
                 android:layout_height          = "wrap_content"
                 android:src                    = "@drawable/btn_record_stop"
                 android:layout_toRightOf       = "@id/btn_record"
                 android:layout_marginTop       = "10dip"
                 android:layout_marginBottom    = "10dip"
                 android:contentDescription     = "@string/menu_contentdescription"
                 android:clickable              = "false" />         
         </RelativeLayout>

         <Button
             android:id                         = "@+id/btn_done"
             android:layout_width               = "wrap_content"
             android:layout_height              = "50dip"
             android:background                 = "@drawable/btn_record_done"
             android:layout_alignParentRight    = "true"
             android:text                       = "@string/Record_btn"
             android:paddingLeft                = "15dip"
             style                              = "@style/simpletopic.bold" />

     </RelativeLayout>
</LinearLayout> 
```

How can I remove the whole of RelativeLayout and enlarge camera view with my animation? Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:37:51.100

我认为如果您使用框架布局，这将解决问题。添加两个框架并将图片添加到框架中。或者将动画添加到两个框架并使其播放将解决这个问题。我认为这将工作并给你什么你想要。下面显示了一小段代码，希望这会对你有所帮助。

```
if (imagesetflag == true) {
                Right_to_left_in = AnimationUtils.loadAnimation(this,
                        R.anim.right_to_left_in);
                Right_to_left_out = AnimationUtils.loadAnimation(this,
                        R.anim.right_to_left_out);
                left_to_Right_in = AnimationUtils.loadAnimation(this,
                        R.anim.left_to_right_in);
                Left_to_Right_out = AnimationUtils.loadAnimation(this,
                        R.anim.left_to_right_out);

                frame1.setImageBitmapReset(decryptedimage, 0, true);

                frame1.bringToFront();
                frame1.setVisibility(View.VISIBLE);
                frame2.setVisibility(View.INVISIBLE);
                frame1.setAnimation(Right_to_left_in);
                frame2.setAnimation(Right_to_left_out);                                     

            } else {
                Right_to_left_in = AnimationUtils.loadAnimation(this,
                        R.anim.right_to_left_in);
                Right_to_left_out = AnimationUtils.loadAnimation(this,
                        R.anim.right_to_left_out);
                left_to_Right_in = AnimationUtils.loadAnimation(this,
                        R.anim.left_to_right_in);
                Left_to_Right_out = AnimationUtils.loadAnimation(this,
                        R.anim.left_to_right_out);

                frame2.setImageBitmapReset(decryptedimage, 0, true);

                frame2.bringToFront();
                frame2.setVisibility(View.VISIBLE);
                frame1.setVisibility(View.INVISIBLE);
                frame2.setAnimation(Right_to_left_in);
                frame1.setAnimation(Right_to_left_out);                 

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:37:17.563

只需尝试将可见性 GONE 设置为其他布局元素，这样主视图就会被拉伸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:54:52.447

回答第二个问题。尝试如下更改布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <FrameLayout
        android:id="@+id/camera_preview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <RelativeLayout
        android:id="@+id/rlMenu"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:orientation="horizontal" >

            <ImageView
                android:id="@+id/btn_hide"
                android:layout_width="40dip"
                android:layout_height="wrap_content"
                android:layout_marginBottom="10dip"
                android:layout_marginTop="10dip"
                android:contentDescription="@string/menu_contentdescription"
                android:scaleType="fitXY"
                android:src="@drawable/btn_record_hide" />

            <ImageView
                android:id="@+id/btn_record"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="10dip"
                android:layout_toRightOf="@id/btn_hide"
                android:contentDescription="@string/menu_contentdescription"
                android:src="@drawable/btn_record_start" />

            <ImageView
                android:id="@+id/btn_stop"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="10dip"
                android:layout_marginTop="10dip"
                android:layout_toRightOf="@id/btn_record"
                android:clickable="false"
                android:contentDescription="@string/menu_contentdescription"
                android:src="@drawable/btn_record_stop" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/btn_done"
                style="@style/simpletopic.bold"
                android:layout_width="wrap_content"
                android:layout_height="50dip"
                android:layout_alignParentRight="true"
                android:background="@drawable/btn_record_done"
                android:paddingLeft="15dip"
                android:text="@string/Record_btn" />
        </LinearLayout>
    </RelativeLayout>

</RelativeLayout> 
```

我在使用自定义 MapView 时遇到了类似的情况。

# ios - AIR modules + iOS

> ID：10309513
> 
> 赞同：2
> 
> 时间：2012-04-25T04:53:04.093
> 
> 标签：ios, memory-management, air, module

We are building a large-scale app with AIR for iOS.

One constraint of an AIR app with the iOS packager is that there are no modules. It is possible to load SWF files, but any embedded actionscript code is ignored.

We are wondering what happens to an AIR app for iPad when the code size gets very large. Are you aware of any technique for dividing code up into logical load groups, or do app developers just rely on virtual memory to swap in only a subset (hopefully) of the entire binary image?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:35:18.250

**不可以，AIR 不允许打包多个主要 SWF。**

我们有一个相当大的项目，也想使用模块。

**我们最终得到的**解决方案是****删除所有嵌入式源**。`[Embed]`这包括由 Flash IDE 或类创建的图形和声音库。**

 **所有资源都在运行时使用

*   [用于 mp3/声音的声音](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html).load()
*   [加载器](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html).load() 与png/jpeg/images的[异步图像解码策略](http://help.adobe.com/en_US/as3/dev/WS52621785137562065a8e668112d98c8c4df-8000.html)
*   [FileStream](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/FileStream.html) .openAsync() 用于其他/二进制数据。

我们有 36 MB SWF 文件，现在只有 1.4 MB 加上所有外部资源。**

# android - 如何使用 ffmpeg 到 android 在 android 中获取视频文件的帧

> ID：10309517
> 
> 赞同：1
> 
> 时间：2012-04-25T04:53:25.067
> 
> 标签：android, ffmpeg, android-mediaplayer, android-video-player

> **可能重复：**
> [在 Android 上使用 FFMPEG](https://stackoverflow.com/questions/5164211/use-ffmpeg-on-android)

我正在做一个项目，该项目用于获取视频帧进行编辑并保存为帧的相同位置。

我搜索了很多，但结果是，应该使用 ffmpeg 库来获取框架。

请给我一个简单的分步示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T06:32:32.657

在此[博客](http://www.roman10.net/category/android-tutorial/ffmpeg-on-android)中，您可以找到一些示例，逐步将 ffmpeg 移植到 android。刚刚安装后，您可以保存帧或使用其他 ffmpeg 功能。

# parsing - Scala 地图解析器

> ID：10309518
> 
> 赞同：1
> 
> 时间：2012-04-25T04:53:30.333
> 
> 标签：parsing, scala, map, case, parser-combinators

我想构建一个可以接受 Map 输入并输出 Case 类的 Parser。现在我有一些似乎没有利用 FP 的命令式代码。我只是看不到如何构建一个可以输出 Case 类的 Parser。

这是我所拥有的：

```
def fromMap(m: Map[String,AttributeValue]): User =  {
    val id = m.get("user-id") map {_.getS}
    val email = m.get("email").get.getS
    val name = m.get("name").get.getS
    val openId = m.get("openId") map {_.getS}
    User(id, email, name, openId)
} 
```

**更新：** 我想我应该更清楚我想做一些类似于 Anorm 但使用 scala 中的 Parser Combinators 的事情。上述问题是不灵活或不可重用的。调用者必须拿走他们得到的东西。

我希望解析器组合器将是解析 Map 形式结果的正确方法。正如您可能已经猜到的那样，我正在使用 DyanmoDB。

**更新2：** 显然我不能很好地解释这个问题。我要做的就是编写一个或多个 Pareser 组合器，它们可以使用调用者指定的绑定将 Map 转换为调用者选择的 Case 类。输入映射 => 输出案例类

**更新 3：** [https](https://github.com/wfaler/scala-dynamo) ://github.com/wfaler/scala-dynamo看起来很有趣，但不使用解析器组合器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:18:23.010

与@4e6 类似的答案，但仅使用 Scalas 内置方法实现：

```
case class User(id: String, email: String, name: String, openId: String)

val m = Map("user-id" -> "123", "email" -> "test@test.org", "name" -> "testuser", "openId" -> "456")

def fromMap(m: Map[String, String]): Option[User] = for {
  id <- m get "user-id"
  email <- m get "email"
  name <- m get "name"
  openId <- m get "openId"
} yield User(id, email, name, openId)

scala> fromMap(m)
res0: Option[User] = Some(User(123,test@test.org,testuser,456)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:33:36.333

我想`scalaz` `ApplicativeBuilder`这就是你要找的。此外，`Option`作为避免异常的一种方式，最好返回一个。不知道是什么`getS`，所以您的代码段的简化版本可能是：

```
case class User(val id: String, val email: String, val name: String, val OpenId: String)

def fromMap(m: Map[String, String]): Option[User] = {
  val id = m.get("user-id")
  val email = m.get("email")
  val name = m.get("name")
  val openId = m.get("openId")
  id |@| email |@| name |@| openId apply User
} 
```

为避免混淆，`apply`方法`ApplicationBuilder`实际上接受了一个函数，所以详细版本是

```
(id |@| email |@| name |@| openId) { (id, email, name, openId) =>
  new User(id, email, name, openId)
} 
```

可以在[此处找到更多应用程序示例](https://github.com/scalaz/scalaz/blob/v6.0.4/example/src/main/scala/scalaz/example/ExampleApplicative.scala)

# c - 非阻塞 UDP 写入返回的字节数是否少于请求的字节数？

> ID：10309520
> 
> 赞同：6
> 
> 时间：2012-04-25T04:53:45.097
> 
> 标签：c, sockets, udp

我有一个应用程序，它通过可以在单工（单向传输）或双工模式（双向）下运行的链接从发送者到接收者点对点发送数据。在单工模式下，应用程序使用 UDP 发送数据，而在双工模式下，它使用 TCP。由于 TCP 套接字上的写入可能会阻塞，因此我们使用非阻塞 IO（带有 FIONBIO 的 ioctl - 此发行版不支持 O_NONBLOCK 和 fcntl）和 select() 系统调用来确定何时可以写入数据。使用 NIO 是为了在网络状况恶化时，如果需要，我们可以在超时后提前中止发送。我想使用相同的基本代码进行发送，而是在更高抽象的 TCP/UDP 之间进行更改。这对 TCP 非常有用。

但是我担心非阻塞 IO 如何用于 UDP 套接字。我可能错误地阅读了手册页，但是由于 write() 可能返回指示发送的字节数少于请求的字节数，这是否意味着客户端将在其数据报中接收到更少的字节数？要发送给定的数据缓冲区，可能需要多次写入，这可能是因为我使用的是非阻塞 IO。我担心这会转化为客户端收到的多个 UDP 数据报。

我对套接字编程相当陌生，所以如果在这里有一些误解，请原谅我。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T22:13:09.880

假设一个正确（未损坏）的 UDP 实现，那么每个 send/sendmsg/sendto 将对应于一个完整的数据报发送，每个 recv/recvmsg/recvfrom 将对应于一个完整的数据报接收。

如果 UDP 消息无法完整传输，您应该会收到`EMSGSIZE`错误消息。由于网络中某个点的大小，发送的消息可能仍然失败，在这种情况下，它根本不会到达。但它不会分块交付（除非 IP 堆栈存在严重错误）。

一个好的经验法则是将您的 UDP 有效负载大小保持在最多 1400 字节。这是非常近似的，并且为各种形式的隧道留出了很大的空间，以避免碎片化。

# objective-c - Facebook 在时间线上发布

> ID：10309522
> 
> 赞同：0
> 
> 时间：2012-04-25T04:53:58.340
> 
> 标签：objective-c, ios, facebook

是否可以在没有对话框的情况下将任何文本发布到用户时间轴？我知道如何使用提要对话框来做到这一点，但我只需要发布一些文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:15:12.247

嗨，你可以做类似的事情

```
FB.api(
     FB.api('/me/feed', 'post', { body: body, message: 'My message is ...' }, function(response) {
        if (!response || response.error) {
            alert(response);
       } else {
            alert(response)); 
```

} }); }

# scala - 案例树转换

> ID：10309523
> 
> 赞同：1
> 
> 时间：2012-04-25T04:54:05.107
> 
> 标签：scala, tree, case, transformation

这是楼梯书上的一个 Expr 类。

```
abstract class Expr
case class Var(name: String) extends Expr
case class Number(num: Double) extends Expr
case class UnOp(operator: String, arg: Expr) extends Expr
case class BinOp(operator: String, left: Expr, right: Expr) extends Expr 
```

现在，我想要一个函数来重命名表达式中的变量。这是我的第一次尝试。

```
def renameVar(expr: Expr, varName: String, newName: String): Expr = expr match {
    case Var(name) if name == varName => Var(newName)
    case Number(_) => expr
    case UnOp(operator, arg) => UnOp(operator, renameVar(arg, varName, newName))
    case BinOp(operator, left, right) => BinOp(operator, renameVar(left, varName, newName), renameVar(right, varName, newName))
}

val anExpr = BinOp("+", Number(1), Var("x"))
val anExpr2 = renameVar(anExpr, "x", "y") 
```

这可行但很乏味（我正在使用的实际类有几个案例子类）。另外，我可能需要几个类似的转换。有没有更好的选择（可能使用高阶函数）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:04:16.667

所以你的版本`renameVar`必须知道两个不同的事情：它必须知道如何递归树，它必须知道如何重命名变量。

一种解决方案可能是将这两个问题分开。您可以使用[访问者设计模式](http://en.wikipedia.org/wiki/Visitor_pattern)让每个类控制它如何进行递归；visit 方法只关心如何遍历树。当它遍历时，它可以通过一个处理实际工作的函数（在你的情况下重命名一个变量）。

这是一个简单的实现，它传递一个转换函数（操作`Expr`并返回一个`Expr`）。它使用 a 的事实`PartialFunction`允许您对树中的表达式进行模式匹配以进行操作。案例未涵盖的任何表达式都将退回到正常递归（由 指定`doVisit`）。

根据不同任务的种类，您可能需要更复杂的访问方法。但这应该让您对方向有所了解：

```
// Class Hierarchy
abstract class Expr {
  def visit(f: PartialFunction[Expr, Expr]): Expr = if (f.isDefinedAt(this)) f(this) else doVisit(f)
  protected def doVisit(f: PartialFunction[Expr, Expr]): Expr
}
case class Var(name: String) extends Expr {
  protected def doVisit(f: PartialFunction[Expr, Expr]) = this
}
case class Number(num: Double) extends Expr {
  protected def doVisit(f: PartialFunction[Expr, Expr]) = this
}
case class UnOp(operator: String, arg: Expr) extends Expr {
  protected def doVisit(f: PartialFunction[Expr, Expr]) = UnOp(operator, arg.visit(f))
}
case class BinOp(operator: String, left: Expr, right: Expr) extends Expr {
  protected def doVisit(f: PartialFunction[Expr, Expr]) = BinOp(operator, left.visit(f), right.visit(f))
}

// Transformation Functions
def renameVar(expr: Expr, varName: String, newName: String): Expr = {
  expr.visit { case Var(`varName`) => Var(newName) }
} 
```

现在您可以引入一个新类，如`TernaryOp(String, Expr, Expr, Expr)`，以类似的方式定义其`doVisit`方法，并且无需您修改`renameVar`（或任何其他转换函数，如`renameVar`）即可工作。

# django - 扩展 Django 用户以获得权限

> ID：10309524
> 
> 赞同：5
> 
> 时间：2012-04-25T04:54:09.783
> 
> 标签：django, permissions, authentication, extend

我只想让列表用户获得许可，所以我只制作了一个如下所示的自定义模型

```
from django.db import models
from django.contrib.auth.models import  Permission,User

class Mycustomuser(User):
    class Meta:
        permissions = (
            ('users','users'),
            ('view_user', 'View user'),
        ) 
```

在视图中我简单地称为

```
items=Mycustomuser.objects.all() 
```

它只返回 4 的用户 ID。

我这样做是因为我使用 django Guardian 获得了以下许可

```
task = MyCustomuser.objects.create()
joe = User.objects.get(username__exact='admin')
assign('view_category', joe, task) 
```

现在我想在调用 MyCustomuser 时检查该权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:18:21.597

没有必要也不建议扩展`User`模型。请参阅[存储有关用户的其他信息](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)。

也就是说，您可以在不设置`permissions`模型元属性的情况下创建权限，请参阅以[编程方式创建权限](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)。

# c++ - 如何有条件地定义默认构造函数？

> ID：10309529
> 
> 赞同：10
> 
> 时间：2012-04-25T04:54:50.857
> 
> 标签：c++, c++11, default-constructor, enable-if

我在想一个像这样的类：

```
template < typename ...Whatever >
class MyClass
{
public:
    static constexpr bool has_default_ctr = Something;

    // I want this only if "has_default_ctr" is "true".
    MyClass();

    //...
}; 
```

我认为我不能`std::enable_if`为此使用构造函数模板（因为没有参数）。我错了吗？如果没有，还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-25T05:16:24.323

C++11 允许（可靠地）`enable_if`在模板参数中使用 -style SFINAE：

```
template<
    // This is needed to make the condition dependent
    bool B = has_default_ctr
    , typename std::enable_if<B, int>::type = 0
>
MyClass();

// When outside of class scope:
// have to repeat the condition for out-of-line definition
template<bool B, typename std::enable_if<B, int>::type = 0>
MyClass::MyClass()
/* define here */ 
```

在 C++03 中，您可以使用带有默认参数的一元构造函数——默认参数意味着构造函数仍然算作默认构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-01T10:08:17.107

由于评论中提到了具有默认参数的解决方案，但我需要相当长的时间来弄清楚如何做到这一点（将我的 Enabler 类设为私有，这不起作用），这里是建议的解决方案，以防有人正在寻找它：

```
class MyClass {
public:
   // if constructor is supposed to be public,
   // this helper class must be public as well!
   struct Enabler {}; 

   template <class U = Enabler>
   MyClass (std::enable_if_t<has_default_ctr, U> = Enabler {})
   {
      // whatever
   }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T05:44:37.740

要根据某些条件获得类的不同定义，请将依赖关系计算放在模板参数中。

```
// primary template, no default constructor unless Something is true
template< typename T, bool has_default_ctr = Something > class MyClass {
    // as you had it, with no default constructor
};

// you want MyClass<T,true> to be just like MyClass<T,false>
// but with a default constructor:
template< typename T > class MyClass<T,true> : public MyClass<T,false> {

    MyClass() : MyClass<T,false>(/* chosen constructor args */) { etc; }

    using MyClass<T,false>::MyClass<T,false>;
}; 
```

如果您没有 C++11，则不能使用`using`构造函数继承，您必须重新声明其所有构造函数并将它们的参数转发给基类。

这是手指对键盘的操作，我没有方便的编译器 atm，因此可能会出现轻微的语法错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T20:00:18.163

你可以做一些简单的事情

```
template < typename ...Whatever >
class MyClass
{
public:
    static constexpr bool has_default_ctr = Something;

    // I want this only if "has_default_ctr" is "true".
    MyClass()
    {
        static_assert(has_default_ctr, "Not Default Constructible");
    }

    //...
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-17T09:55:55.207

这`enable_if`很容易（如果类也模板化，它也可以工作）：

```
#include <type_traits>

class MyClass
{
public:
    static constexpr bool has_default_ctr = Something;

    // I want this only if "has_default_ctr" is "true".
    template <typename = std::enable_if<has_default_ctr>::type>
    MyClass();

    //...
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-11T19:23:50.087

这是我最近使用的一个。如果它的数据成员支持默认构造函数，我需要一个带有默认构造函数的类模板，否则默认构造函数不应该编译。

类模板定义了模板类型参数，类定义了这种类型的数据成员（使用继承的变体也可能很有吸引力，因为它可以使用空基类优化）。数据成员的默认构造函数由类的默认构造函数自动调用。如果数据成员的类型没有默认构造函数，则编译失败。否则它会成功。这是代码：

```
#include <string>
template <typename Data>
class Demo
{
    Data d_data;

    public:
        Demo() = default;        // OK when used and Data has a default
                                 // constructor. 

        Demo(Data const &data)   // Exampe of an additional constructor
        :
            d_data(data)
        {}

        // ...
};

struct WithoutDefault
{
    WithoutDefault(int)
    {}
};

int main()
{
    Demo<std::string> withString;
    // Demo<NoDefault> nope;              // won't compile

    WithoutDefault nod(10);
    Demo<WithoutDefault> nodefault(nod);  // OK
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-28T15:28:48.927

可能的答案并不完全适合这个问题。但是，如果您只想在模板参数类型字段具有默认构造函数时为模板类启用默认构造函数。然后您可以在模板类中创建显式默认构造函数。参见示例：

```
struct HasDefault
{
    HasDefault() = default;
    HasDefault(int) {}
};

struct NoDefault
{
    NoDefault() = delete;
    NoDefault(int) {}
};

template <typename ValueT>
struct Wrapper
{
    Wrapper() = default;
    Wrapper(ValueT &&value) : value(std::forward<ValueT>(value)) {}

    ValueT value;
};

int main()
{
    Wrapper<HasDefault> hasDefault;
    Wrapper<HasDefault> hasDefault2(1);
    //Wrapper<NoDefault> noDefault; error: use of deleted function 'Wrapper<ValueT>::Wrapper()
    Wrapper<NoDefault> noDefault2(1);
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-25T05:02:50.770

您可以使用具有不同参数的不同构造函数

```
MyClass(){

}
MyClass(int num){

}
MyClass(String s){
} 
```

并且您可以简单地编写返回类并在其中写入条件的静态函数：

```
static chooseContructor(/*parameters*/){
 if(/*something*/){
     return new MyCLass();
 }
 else if(/*something else*/){
     return new MyClass(int num);
 }
 else if{
    return new MyClass(String s);
 }
} 
```

等等......这样的东西会给你一个半自动的构造函数选择器

# unix - 创建自己的 unix 命令

> ID：10309533
> 
> 赞同：1
> 
> 时间：2012-04-25T04:55:21.620
> 
> 标签：unix, command

是否可以创建我们自己的 unix 命令？例如：我们有执行某些操作的`ls -ltr`、`cd`等。`mkdir`我想创建一个类似的命令，它将用户名密码保存到数据库中的表中。我对unix有点陌生。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T05:21:53.557

是的，很容易创建自己的命令来执行您认为有用的工作。你可以用各种语言来实现它们，从 shell 到 Perl 到 C 等等。

标准命令的唯一意义是它们（通常）安装在其他任何地方`/bin`或`/usr/bin`其他任何地方，并且它们执行由标准（通常是 POSIX）定义的工作。通常，人们将本地创建的命令放在`/usr/local/bin`; 其他人将为自己创建一个目录`$HOME/bin`并将他们的个人命令放在那里。您只需要确保这些目录在您的 PATH 上。

在我的`$HOME/bin`目录中（取决于我正在查看的机器），我的主要工作机器上有 46 个命令（在这台机器上）到大约 500 个。这些命令做不同的工作；这些名字对我来说是助记符（通常对其他人来说不是）。一些命令经过优化，可以在任何地方用于生产（这些命令有手册页，几乎可以定义为生产就绪）。其他人是为快速而肮脏的工作而组装的快速黑客。删除了一些快速技巧；有些被打磨；有些会被藏起来，以防我将来需要做类似的事情。只有琐碎的事情不受版本控制。

在这台机器上（我只是随便使用，并不真正用于开发工作），我有 9 个 shell 脚本，4 个 Perl 脚本，其余的都是可执行文件（主要是 Git 和 Go）。在我的主要机器上，我有更多的 shell 和 Perl 脚本，而 C 程序则相对较少。自从我第一次学习 Perl 以来，我的 Python 脚本很少，而且我对 Python 不太熟悉。我已经编写和收集这些脚本很长时间了；最古老程序的最古老版本可以追溯到大约 1987 年。

# right-click - 右键单击时“Git Bash here”不起作用

> ID：10309538
> 
> 赞同：38
> 
> 时间：2012-04-25T04:56:04.723
> 
> 标签：right-click, git-bash

我不知道这是怎么发生的，但在今天之前，我可以右键单击任何文件夹，并且会有一个选项`Git Bash here`。但是今天我没有那个选项。有谁知道如何找回它？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2016-08-17T16:24:34.893

**如何在不**重新安装的情况下修复：

在将所有程序从主硬盘驱动器上移出并将它们粘贴到我的“P”驱动器后，我遇到了这个问题。但保持所有目录结构相同。

Git 从：
**C:\DEV\PROG\GIT**
移动 到：
**P:\DEV\PROG\GIT**

1：**打开注册表编辑器：** 在开始菜单搜索中输入“regedit”并回车。

2：在regedit中找到“git bash here”的上下文菜单快捷方式配置：菜单“编辑”>“查找”>“查找内容”并输入“git_shell”

3：编辑数据值，使路径指向正确的位置。就我而言，我改变了：

```
"C:\DEV\PROG\GIT\git-bash.exe" "--cd=%v."
TO:
"P:\DEV\PROG\GIT\git-bash.exe" "--cd=%v."
Screen shot included below. 
```

[![RegEdit 中的 git_shell 数据路径](../Images/2df78d4f5a0f8eef3522974c6fa664c6.png)](https://i.stack.imgur.com/itIWV.png)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-04-25T05:10:25.910

重新安装 Git 并选择：

```
Context menu entries: "Git Bash Here" (and the "Git GUI Here" option) 
```

在安装过程中。不能说它为什么消失了，但这应该把它带回来。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-11-24T11:03:50.790

如果您无法使用重新安装方法，请执行以下步骤。

使用**REGEDIT**

```
1/ Open regedit (search it if needed)
2/ Go to 'HKEY_CURRENT_USER/Software/Classes/Directory/Background'
3/ Create new key 'shell'
4/ Create new key 'Git bash here' (or whatever name you want to see in the menu)
5/ Create new key 'command' (must be named command)

At this point point you'll have
'HKEY_CURRENT_USER/Software/Directory/Background/shell/Git bash here/command'

6/ Edit the value of the command key as follow 'pathToGit/git-bash.exe' 
```

更新或打开新的 Windows 资源管理器，您会在右键单击时看到它。

图片总结一下：[![如何在上下文菜单中添加 git bash](../Images/451f864068520e48555cb4555cb8f259.png)](https://i.stack.imgur.com/ootY7.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-13T18:37:22.063

运行此脚本 (AddGitToExplorerContextMenu.reg)。您可能需要更新 Git 的位置。您也可以通过 regedit 手动添加它

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\Directory\Background\shell\git_shell]
@="Git Bash"

[HKEY_CLASSES_ROOT\Directory\Background\shell\git_shell\command]
@="\"C:\\Program Files\\Git\\git-bash.exe\" \"--cd=%v.\"" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-20T19:09:48.267

1.  完全卸载 Git 并删除程序文件中的 Git 文件夹。
2.  安装 Git。
3.  从上下文菜单中，选择“Git Bash”和“Git GUI here”选项。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-16T11:38:24.670

我发现我要查找的内容在左侧窗格中，而不是在右侧文件夹中。并且仍然使用右键单击。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2022-02-10T21:43:23.367

有同样的问题，意识到以前右键单击选项会显示的文件夹内的任何位置，但现在我必须选择或突出显示文件夹，然后右键单击才能显示选项。

# asp.net - 用于图像处理的 Http Handler

> ID：10309539
> 
> 赞同：3
> 
> 时间：2012-04-25T04:56:08.533
> 
> 标签：asp.net, .net, c#-4.0, image-processing, handlers

我为所有其他应用程序创建了一个集中的图像应用程序。
我在该应用程序中创建了一个 http 处理程序以进行响应。
我在查询字符串中传递图像的路径，作为响应，它找到图像并添加水印并将其发送回作为响应。
此应用程序的目的是为图像添加水印并将其发送回其他应用程序。我正在使用带有 C# 的 asp.net。

现在我在应用程序的两个页面上遇到问题，我有 15 张图片要显示。
为此，我必须调用处理程序 15 次。

是否有可能在单个呼叫中获得响应。
我可以将这些图像组合成一个并发送回响应并使用**图像精灵吗**像我调整页面上的图像的功能。所有图像的大小相同。

我是否以正确的方式思考或有任何其他解决方案。

谢谢，
谢卡尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:22:56.697

> 为此，我必须调用处理程序 15 次。

15 个请求并不算多，尤其是如果它们是从总体请求较低的干净页面发出的。

CSS sprites 无疑是一个很好的实践，但它们通常是为一组小的静态图像创建的（非常适合按钮、图标等）。

一个考虑因素是图像的总大小。如果生成的精灵非常大，则可能会降低用户体验，因为他们需要等待整个大图像被处理和下载。

另一个考虑因素是在确定将哪些图像组合成一个图像时涉及多少开发工作和计算复杂性。

对于高流量参考站点，请考虑[Yahoo Flickr](http://flickr.com)使用的技术：

*   非常小的图像的精灵
*   小缩略图的[数据 URI](http://css-tricks.com/data-uris/)
*   从多个域提供的常规图像用于其他所有内容
*   大型图像列表的按需加载

**摘要**
根据您的描述，我可能更倾向于将多个请求与延迟加载以及尽可能多的缓存服务器端（在生成图像时）和客户端（通过 HTTP 过期标头）相结合。

# sql-server - 从 Node.js 连接到 SQL Server 数据库

> ID：10309540
> 
> 赞同：26
> 
> 时间：2012-04-25T04:56:09.353
> 
> 标签：sql-server, node.js

该问题重复了一些较旧的问题，但从那时起情况可能已经改变。

是否有一些官方支持从 Node.js 连接到 SQL Server（例如来自 MS 的官方库）？或者至少是一些适用于生产级应用程序的维护良好的第三方库？

我们通常使用 ASP.NET MVC/SQL Server 组合，但目前我有一个任务，express/Node.js 似乎更合适（我想玩一些新的东西），所以问题是我们是否可以依赖于 Node.js 和 SQL Server 的交互。

UPD：微软似乎终于发布了官方驱动：[https ://github.com/WindowsAzure/node-sqlserver](https://github.com/WindowsAzure/node-sqlserver)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-08-13T13:15:33.353

这主要是为未来的读者准备的。由于问题（至少是标题）集中在“从节点 js 连接到 sql server 数据库”，我想介绍一下“mssql”节点模块。

目前，我们有一个稳定版本的用于 NodeJs 的 Microsoft SQL Server 驱动程序（“msnodesql”），可在此处获取：[https](https://www.npmjs.com/package/msnodesql) ://www.npmjs.com/package/msnodesql 。虽然它在与 Microsoft SQL Server 数据库的本机集成方面做得很好（比任何其他节点模块），但有几件事需要注意。

“msnodesql”需要在主机上安装一些先决条件（如 python、VC++、SQL 本机客户端等）。这使您的“节点”应用程序“Windows”依赖。如果您对基于“Windows”的部署感到满意，那么使用“msnodesql”是最好的。

另一方面，还有另一个名为“mssql”的模块（可在此处获得[https://www.npmjs.com/package/mssql](https://www.npmjs.com/package/mssql)），它可以根据配置与“乏味”或“msnodesql”一起使用。虽然这个模块可能没有“msnodesql”那么全面，但它几乎解决了大部分需求。

如果您想从“mssql”开始，我看到了一个简单直接的视频，它解释了如何在此处使用 NodeJs 连接到 Microsoft SQL Server 数据库：[https ://www.youtube.com/watch?v=MLcXfRH1YzE](https://www.youtube.com/watch?v=MLcXfRH1YzE)

上述视频的源代码可在此处获得：http: [//techcbt.com/Post/341/Node-js-basic-programming-tutorials-videos/how-to-connect-to-microsoft-sql-server-using-节点js](http://techcbt.com/Post/341/Node-js-basic-programming-tutorials-videos/how-to-connect-to-microsoft-sql-server-using-node-js)

以防万一，如果上面的链接不起作用，我在这里包括源代码：

```
var sql = require("mssql");

var dbConfig = {
    server: "localhost\\SQL2K14",
    database: "SampleDb",
    user: "sa",
    password: "sql2014",
    port: 1433
};

function getEmp() {
    var conn = new sql.Connection(dbConfig);

    conn.connect().then(function () {
        var req = new sql.Request(conn);
        req.query("SELECT * FROM emp").then(function (recordset) {
            console.log(recordset);
            conn.close();
        })
        .catch(function (err) {
            console.log(err);
            conn.close();
        });        
    })
    .catch(function (err) {
        console.log(err);
    });

    //--> another way
    //var req = new sql.Request(conn);
    //conn.connect(function (err) {
    //    if (err) {
    //        console.log(err);
    //        return;
    //    }
    //    req.query("SELECT * FROM emp", function (err, recordset) {
    //        if (err) {
    //            console.log(err);
    //        }
    //        else { 
    //            console.log(recordset);
    //        }
    //        conn.close();
    //    });
    //});

}

getEmp();
```

上面的代码很容易解释。我们定义了 db 连接参数（在“dbConfig”JS 对象中），然后使用“Connection”对象连接到 SQL Server。为了执行“SELECT”语句，在这种情况下，它使用“Request”对象，该对象在内部与“Connection”对象一起使用。该代码解释了使用基于“承诺”和“回调”的执行的两种风格。

上面的源代码只解释了连接到 sql server 数据库和执行 SELECT 查询。您可以通过以下“mssql”节点的文档轻松将其提升到一个新的水平：[https ://www.npmjs.com/package/mssql](https://www.npmjs.com/package/mssql)

**更新：** 这里有一个使用纯 Node.js REST 标准（使用 Microsoft SQL Server）进行 CRUD 操作的新视频：[https](https://www.youtube.com/watch?v=xT2AvjQ7q9E) ://www.youtube.com/watch?v=xT2AvjQ7q9E 。这是一个很棒的视频，它从头开始解释一切（它有很多代码，在这里解释/复制整个代码不会那么令人愉快）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-25T10:07:36.680

我不确定您是否看到此[Node JS 的 MS SQL 模块列表](https://github.com/joyent/node/wiki/modules#wiki-db-mssql)

如果可能，请在使用后分享您的经验。

祝你好运

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-08T00:16:21.393

我们刚刚发布了用于 SQL Server 连接的 Node.JS 预览驱动程序。您可以在此处找到它： [Introducing the Microsoft Driver for Node.JS for SQL Server](http://blogs.msdn.com/b/sqlphp/archive/2012/06/08/introducing-the-microsoft-driver-for-node-js-for-sql-server.aspx)。

驱动程序支持回调（这里，我们连接到本地 SQL Server 实例）：

```
// Query with explicit connection
var sql = require('node-sqlserver');
var conn_str = "Driver={SQL Server Native Client 11.0};Server=(local);Database=AdventureWorks2012;Trusted_Connection={Yes}";

sql.open(conn_str, function (err, conn) {
    if (err) {
        console.log("Error opening the connection!");
        return;
    }
    conn.queryRaw("SELECT TOP 10 FirstName, LastName FROM Person.Person", function (err, results) {
        if (err) {
            console.log("Error running query!");
            return;
        }
        for (var i = 0; i < results.rows.length; i++) {
            console.log("FirstName: " + results.rows[i][0] + " LastName: " + results.rows[i][1]);
        }
    });
}); 
```

或者，您可以使用事件（这里，我们连接到 SQL Azure aka Windows Azure SQL 数据库）：

```
// Query with streaming
var sql = require('node-sqlserver');
var conn_str = "Driver={SQL Server Native Client 11.0};Server={tcp:servername.database.windows.net,1433};UID={username};PWD={Password1};Encrypt={Yes};Database={databasename}";

var stmt = sql.query(conn_str, "SELECT FirstName, LastName FROM Person.Person ORDER BY LastName OFFSET 0 ROWS FETCH NEXT 10 ROWS ONLY");
stmt.on('meta', function (meta) { console.log("We've received the metadata"); });
stmt.on('row', function (idx) { console.log("We've started receiving a row"); });
stmt.on('column', function (idx, data, more) { console.log(idx + ":" + data);});
stmt.on('done', function () { console.log("All done!"); });
stmt.on('error', function (err) { console.log("We had an error :-( " + err); }); 
```

如果遇到任何问题，请在 Github 上提出问题：[https ://github.com/windowsazure/node-sqlserver/issues](https://github.com/windowsazure/node-sqlserver/issues)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T06:37:14.107

npm 上有一个模块叫做`mssqlhelper`

您可以通过以下方式将其安装到您的项目中`npm i mssqlhelper`

连接和执行查询的示例：

```
var db = require('./index');

db.config({
    host: '192.168.1.100'
    ,port: 1433
    ,userName: 'sa'
    ,password: '123'
    ,database:'testdb'
});

db.query(
    'select @Param1 Param1,@Param2 Param2'
    ,{
         Param1: { type : 'NVarChar', size: 7,value : 'myvalue' }
         ,Param2: { type : 'Int',value : 321 }
    }
    ,function(res){
        if(res.err)throw new Error('database error:'+res.err.msg);
        var rows = res.tables[0].rows;
        for (var i = 0; i < rows.length; i++) {
            console.log(rows[i].getValue(0),rows[i].getValue('Param2'));
        }
    }
); 
```

你可以在这里阅读更多关于它的信息：[https ://github.com/play175/mssqlhelper](https://github.com/play175/mssqlhelper)

:o)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-16T22:43:18.320

[msnodesql](https://www.npmjs.com/package/msnodesql)对我来说效果很好。这是一个示例：

```
var mssql = require('msnodesql'), 
    express = require('express'),
    app = express(),
    nconf = require('nconf')

nconf.env()
     .file({ file: 'config.json' });

var conn = nconf.get("SQL_CONN");   
var conn_str = "Driver={SQL Server Native Client 11.0};Server=server.name.here;Database=Product;Trusted_Connection={Yes}";

app.get('/api/brands', function(req, res){
    var data = [];
    var jsonObject = {};    

    mssql.open(conn_str, function (err, conn) {
        if (err) {
            console.log("Error opening the connection!");
            return;
        }
        conn.queryRaw("dbo.storedproc", function (err, results) {
        if(err) {
                   console.log(err);
                   res.send(500, "Cannot retrieve records.");
                }
       else {
             //res.json(results);

             for (var i = 0; i < results.rows.length; i++) {
                 var jsonObject = new Object()
                 for (var j = 0; j < results.meta.length; j++) { 

                    paramName = results.meta[j].name;
                    paramValue = results.rows[i][j]; 
                    jsonObject[paramName] = paramValue;

                    }
                    data.push(jsonObject);  //This is a js object we are jsonizing not real json until res.send             
            } 

                res.send(data);

            }       
        });
    });
}); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-04-27T10:41:53.547

```
//start the program
var express = require('express');
var app = express();

app.get('/', function (req, res) {

    var sql = require("mssql");

    // config for your database
    var config = {
        user: 'datapullman',
        password: 'system',
        server: 'localhost', 
        database: 'chat6' 
    };

    // connect to your database
    sql.connect(config, function (err) {

        if (err) console.log(err);

        // create Request object
        var request = new sql.Request();

        // query to the database and get the records

        request.query("select * From emp", function (err, recordset) {            
            if  (err) console.log(err)

            // send records as a response
            res.send(recordset);

        });
    });
});

var server = app.listen(5000, function () {
    console.log('Server is running..');
}); 
```

//在数据库中创建一个表作为emp（我已经创建为chat6）

```
// programs ends here 
```

//将其保存为 app.js 并作为节点 app.js 运行 //在浏览器中打开为 localhost:5000

# xcode - sigabrt on filteredArrayUsingPredicate

> ID：10309541
> 
> 赞同：2
> 
> 时间：2012-04-25T04:56:24.087
> 
> 标签：xcode, predicate, sigabrt

我是一个菜鸟，正在尝试将书中的示例转换为我可以使用的应用程序。

示例应用程序是联系人应用程序的修改版本，并且可以正常工作。

我做了一些进一步的修改，搜索不再有效。它在以下行上发出 sigabrts

```
self.filteredAnswercards = [flattenedArray
                            filteredArrayUsingPredicate:predicate]; 
```

我难住了。我的头被我的键盘敲得血淋淋的。

非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T01:25:40.743

我的建议是将崩溃的行包裹在 @try/@catch 块中，并在 catch 中记录异常和异常的 callStackSymbols 方法的结果。

作为记录，Xcode 4.x 版本的部分问题在于它们在告诉您异常来自**何处方面比 3.x 版本差得多。**出于这个原因，熟悉使程序或调试器告诉你你需要知道什么的技巧是非常重要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:31:53.157

很难说没有看到更多的代码。Sigabort 通常意味着抛出了异常。您可以放置​​一个断点`objc_exception_throw`以获取回溯，这应该有助于突出原因。

如果您在上述情况下没有得到任何新信息，其他人说完全重新启动计算机会有所帮助......但我没有可以验证这一点的情况。

---- 根据评论进行编辑 -----

听起来好像`filteredAnswercards`是 nil，那肯定会导致 Sigabort。正确分配该数组，您应该一切顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:36:39.927

我猜那`predicate`是零。你在哪里分配的？或者你从来没有分配它？

# ios - 关于iOS内存管理

> ID：10309543
> 
> 赞同：0
> 
> 时间：2012-04-25T04:56:34.677
> 
> 标签：ios

我有一个视图控制器显示一个表格视图，见下文：

```
//.h file
@interface CoreDataViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>
    //NSArray property
    @property (retain, nonatomic) NSArray *arr;
@end

//.m file
- (void)viewDidLoad {
    //fetch data from core data, pass to arr property
    //context is a instance of NSManagedObjectContext
    arr = [context executeFetchRequest:request error:nil];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {   
    if (arr == nil) {
        return 0;
    }
    return [arr count]; //program stop here, nothing showed up in output console
} 
```

xcode Profile(Instrument) 告诉我在*return [arr count] 处有一个僵尸对象；* 我对后台发生的事情感到困惑，也许属性*arr*是由 iOS 发布的，但是该属性在 .h 文件中确实有一个保留关键字。

如果 NSArray 像这样替换为 NSMutableArray，我发现一个解决方案可以解决这个问题：

```
@interface CoreDataViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>
    //change to NSMutableArray
    @property (retain, nonatomic) NSMutableArray *arr;
@end

- (void)viewDidLoad {
    //convert NSArray to NSMutableArray
    arr = [[context executeFetchRequest:request error:nil] mutableCopy];
} 
```

*mutableCopy*方法中是否有保留或自动释放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:02:50.337

如果你使用 mutableCopy，你需要自己释放一个变量。它将保留计数增加 1，但不会减少。可能你可以使用 -

```
arr = [[[context executeFetchRequest:request error:nil] mutableCopy] autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:28:37.113

是的，属性*arr*在 .h 文件中有一个 retain 关键字，但是你直接使用了 ivar，你没有使用 setter 方法来设置*arr*的值。所以它不会增加*arr*的保留计数，您应该将代码更改为：

```
//.m file
- (void)viewDidLoad {
  //fetch data from core data, pass to arr property
  //context is a instance of NSManagedObjectContext
  self.arr = [context executeFetchRequest:request error:nil];
} 
```

并在 dealloc 方法中释放*arr*

```
- (void)dealloc
{
  [arr release];
  [super dealloc];
} 
```

无需将 NSArray 更改为 NSMutableArray

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T06:32:41.533

根据[Basic Memory Management Rules](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-SW1)，是的， mutableCopy 增加了保留计数。底线，名称以`alloc`, `new`,开头的方法`copy`，或`mutableCopy`全部返回一个具有 +1 保留计数的对象（即，它将为您保留，因此您获得所有权，并且在非 ARC 项目中，您'负责手动释放它）。该`executeFetchRequest`方法没有，因此它（可以）返回零保留计数，除非您拥有它，否则您不能依赖它存在，即您通过自己的保留有效地 +1 保留计数。

现在，很明显，您假设因为您将您的财产定义为保留财产，它将为您保留。但是您必须使用系统生成的 setter 来执行此操作，但您的初始代码示例不会执行此操作。相反，您自己直接访问 ivar，绕过 setter。如果你想获得所有权，增加你的属性所暗示的保留计数，你应该调用默认设置器：

```
[self setArr:[context executeFetchRequest:request error:nil]]; 
```

或使用等效的点符号：

```
self.arr = [context executeFetchRequest:request error:nil]; 
```

但是，当您单独使用 ivar arr（没有点或`self setArr`语法）时，它会绕过 setter 方法。这不是一个好的做法，因为你没有做必要的保留。在这个例子中（因为你知道 arr 还没有值），理论上你可以这样做：

```
arr = [[context executeFetchRequest:request error:nil] retain]; 
```

但是如果 arr 可能已经有一个指向另一个数组的指针，你真的想要：

```
[release arr];
arr = [[context executeFetchRequest:request error:nil] retain]; 
```

使用 setter 是安全的，并避免一些这种愚蠢。看看[Declared Properties](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW1)，了解如何使用`retain`转换为什么 setter 代码，我认为这可能更有意义。

更新：

顺便说一句，正如其他人指出的那样，虽然上面的代码解决了你的数组没有被保留的问题，但是一旦你成功地进行了保留，你必须记住在你的 dealloc 中释放它。

# python - Python beautifulsoup 遍历表

> ID：10309550
> 
> 赞同：23
> 
> 时间：2012-04-25T04:57:47.320
> 
> 标签：python, beautifulsoup

我正在尝试将表数据抓取到 CSV 文件中。不幸的是，我遇到了障碍，下面的代码只是为所有后续的 TR 重复第一个 TR 中的 TD。

```
import urllib.request
from bs4 import BeautifulSoup

f = open('out.txt','w')

url = "http://www.international.gc.ca/about-a_propos/atip-aiprp/reports-rapports/2012/02-atip_aiprp.aspx"
page = urllib.request.urlopen(url)

soup = BeautifulSoup(page)

soup.unicode

table1 = soup.find("table", border=1)
table2 = soup.find('tbody')
table3 = soup.find_all('tr')

for td in table3:
    rn = soup.find_all("td")[0].get_text()
    sr = soup.find_all("td")[1].get_text()
    d = soup.find_all("td")[2].get_text()
    n = soup.find_all("td")[3].get_text()

    print(rn + "," + sr + "," + d + ",", file=f) 
```

这是我的第一个 Python 脚本，因此我们将不胜感激！我查看了其他问题的答案，但无法弄清楚我在这里做错了什么。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-25T05:08:39.093

`find()`每次使用or时，您都是从文档的顶层开始`find_all()`，因此，例如，当您要求所有“td”标签时，您将获得*文档中的所有“td”标签，*而不仅仅是那些在您搜索的表和行中。您最好不要搜索那些，因为它们没有按照您的代码编写方式使用。

我想你想做这样的事情：

```
table1 = soup.find("table", border=1)
table2 = table1.find('tbody')
table3 = table2.find_all('tr') 
```

或者，你知道，更像这样的东西，具有更多描述性的变量名称来引导：

```
rows = soup.find("table", border=1).find("tbody").find_all("tr")

for row in rows:
    cells = row.find_all("td")
    rn = cells[0].get_text()
    # and so on 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-25T05:09:41.110

问题是，每次你试图缩小搜索范围（在这个 tr 中获取第一个 td 等）时，你只是在回拨汤。Soup 是顶级对象——它代表整个文档。你只需要调用一次soup，然后使用它的结果代替soup 进行下一步。

例如（变量​​名称更改为更清晰），

```
table = soup.find('table', border=1)
rows = table.find_all('tr')

for row in rows:
    data = row.find_all("td")
    rn = data[0].get_text()
    sr = data[1].get_text()
    d = data[2].get_text()
    n = data[3].get_text()

    print(rn + "," + sr + "," + d + ",", file=f) 
```

我不确定 print 语句是执行您在此处尝试执行的操作的最佳方式（至少，您应该使用字符串格式而不是加法），但我将其保留原样，因为它不是核心问题。

Also, for completion: `soup.unicode` won't do anything. You're not calling a method there, and there's no assignment. I don't remember BeautifulSoup having a method named unicode in the first place, but I'm used to BS 3.0 so it may be new in 4.

# android - Android SQLite 数据库：创建表和插入时出现问题

> ID：10309552
> 
> 赞同：1
> 
> 时间：2012-04-25T04:57:49.043
> 
> 标签：android, sqlite

我不确定我学习如何使用 SQLite 数据库的简单程序发生了什么。我的程序基于在[这个站点](http://android-er.blogspot.com/2011/06/simple-example-using-androids-sqlite_02.html)上找到的程序。我决定消除使用变量的问题，并将所有内容都写入我的创建表字符串。我也尝试过使用适当的 KEY_CONTENT 等但无济于事。希望这是足够的代码让您了解问题所在。另外，是否有任何我可以编写的代码（日志或 Toast 输出）有助于找出问题所在？

```
public class SQLiteAdapter  {

public static final String DB_NAME = "My_Database";
public static final String DB_TABLE = "My_Table";
public static final int DB_VERSION = 1;
public static final String KEY_CONTENT = "My_Content";

String SCRIPT_CREATE_DATABASE = "CREATE TABLE My_Table (_id INTEGER PRIMARY KEY AUTOINCREMENT, My_Content TEXT);";

private SQLiteHelper sqLiteHelper;
private SQLiteDatabase sqLiteDatabase;

private Context context;

public SQLiteAdapter(Context c){
    context = c;
}
public SQLiteAdapter openToRead() throws android.database.SQLException {
      sqLiteHelper = new SQLiteHelper(context, DB_NAME, null, DB_VERSION);
      sqLiteDatabase = sqLiteHelper.getReadableDatabase();
      return this; 
     }
public SQLiteAdapter openToWrite() throws android.database.SQLException {
      sqLiteHelper = new SQLiteHelper(context, DB_NAME, null, DB_VERSION);
      sqLiteDatabase = sqLiteHelper.getWritableDatabase();
      return this; 
     }

public void close(){
      sqLiteHelper.close();
     }

public long insert(String content){

      ContentValues contentValues = new ContentValues();
      contentValues.put("My_Content", content);
      return sqLiteDatabase.insert("My_Table", null, contentValues);
     }
public int deleteAll(){
      return sqLiteDatabase.delete(DB_TABLE, null, null);
     }

     public String queueAll(){
      String[] columns = new String[]{KEY_CONTENT};
      Cursor cursor = sqLiteDatabase.query(DB_TABLE, columns, 
        null, null, null, null, null);
      String result = "";

      int index_CONTENT = cursor.getColumnIndex(KEY_CONTENT);
      for(cursor.moveToFirst(); !(cursor.isAfterLast()); cursor.moveToNext()){
       result = result + cursor.getString(index_CONTENT) + "\n";
      }

      return result;
     }

     public class SQLiteHelper extends SQLiteOpenHelper {

      public SQLiteHelper(Context context, String name,
        CursorFactory factory, int version) {
       super(context, name, factory, version);
      }

      @Override
      public void onCreate(SQLiteDatabase db) {

       db.execSQL(SCRIPT_CREATE_DATABASE);
      }

      @Override
      public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
       // TODO Auto-generated method stub

      }

     } 
```

}

我的主要活动开始像这样处理 SQLite DB：

```
mySQLiteAdapter = new SQLiteAdapter(this);
        mySQLiteAdapter.openToWrite();
        mySQLiteAdapter.insert("First try"); 
```

这是Logcat：

```
04-25 14:19:37.404: E/Database(217): Error inserting My_Content=First try
04-25 14:19:37.404: E/Database(217): android.database.sqlite.SQLiteException: no such table: My_Table: , while compiling: INSERT INTO My_Table(My_Content) VALUES(?);
04-25 14:19:37.404: E/Database(217):    at android.database.sqlite.SQLiteProgram.native_compile(Native Method)
04-25 14:19:37.404: E/Database(217):    at android.database.sqlite.SQLiteProgram.compile(SQLiteProgram.java:110)
04-25 14:19:37.404: E/Database(217):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:59)
04-25 14:19:37.404: E/Database(217):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
04-25 14:19:37.404: E/Database(217):    at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1027)
04-25 14:19:37.404: E/Database(217):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1413)
04-25 14:19:37.404: E/Database(217):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1286)
04-25 14:19:37.404: E/Database(217):    at com.willmer.trialsqlite.SQLiteAdapter.insert(SQLiteAdapter.java:53)
04-25 14:19:37.404: E/Database(217):    at com.willmer.trialsqlite.TrialSQLiteActivity.onCreate(TrialSQLiteActivity.java:25)
04-25 14:19:37.404: E/Database(217):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-25 14:19:37.404: E/Database(217):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
04-25 14:19:37.404: E/Database(217):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-25 14:19:37.404: E/Database(217):    at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-25 14:19:37.404: E/Database(217):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-25 14:19:37.404: E/Database(217):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 14:19:37.404: E/Database(217):    at android.os.Looper.loop(Looper.java:123)
04-25 14:19:37.404: E/Database(217):    at android.app.ActivityThread.main(ActivityThread.java:4363)
04-25 14:19:37.404: E/Database(217):    at java.lang.reflect.Method.invokeNative(Native Method)
04-25 14:19:37.404: E/Database(217):    at java.lang.reflect.Method.invoke(Method.java:521)
04-25 14:19:37.404: E/Database(217):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-25 14:19:37.404: E/Database(217):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-25 14:19:37.404: E/Database(217):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:05:59.890

用以下代码替换您的代码。因为`Table`它本身就是一个关键字。

```
String SCRIPT_CREATE_DATABASE = "CREATE TABLE My_Table (_id INTEGER PRIMARY KEY AUTOINCREMENT, My_Content TEXT);"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:04:03.820

您必须在 "Table" 、 "(" 和 "Values" 、 "(" 之间留出空格。

像下面

```
INSERT INTO Table (Content) VALUES (?); 
```

# jquery - 对话框中的 Zend Form 错误消息

> ID：10309553
> 
> 赞同：1
> 
> 时间：2012-04-25T04:57:51.470
> 
> 标签：jquery, zend-framework

我有一个在 jquery 对话框中显示的 zend 表单。它工作正常。我的 Zend 表单字段之一具有“必需”验证。现在的问题是，当有人在未填写该字段的情况下发布表单时，错误消息不会显示在对话框内，而是显示为正常操作。我想知道如何在 jquery Diloag Box 中显示错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:30:54.427

> 我想知道如何在 jquery Diloag Box 中显示错误消息。

方法如下：在您的操作中添加：

`$this->view->errors = $form->getErrors();`

然后你把这个错误数组放在jquery对话框中

在视图脚本中

```
<?php if (!empty($this->errors)): ?>
    <div id="dialog" title="Form Error ">
        <ul>
            <?php foreach ($this->errors as $msg): ?>
                <ul><?= $msg ?></ul>
            <?php endforeach; ?>
        </ul>
    </div>
<?php endif; ?> 
```

# iphone - 用我的邮件附加 PDF/Doc 文件

> ID：10309555
> 
> 赞同：3
> 
> 时间：2012-04-25T04:57:55.910
> 
> 标签：iphone, ios, xcode, email, email-attachments

我已经从网上生成了 pdf 文件。在看到 pdf 时，我想通过邮件发送该 pdf，并自动附加该 pdf。我使用了很多代码，但对于单个 pdf 来说一切正常。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T05:03:55.670

尝试这个，

```
if([MFMailComposeViewController canSendMail]){      

    MFMailComposeViewController *mail=[[MFMailComposeViewController alloc]init];
    mail.mailComposeDelegate=self;
    [mail setSubject:@"Email with attached pdf"];   
    NSString *newFilePath = @"get path where the pdf reside";

    NSData * pdfData = [NSData dataWithContentsOfFile:newFilePath];
[mail addAttachmentData:pdfData mimeType:@"application/pdf" fileName:@"yourpdfname.pdf"];
    NSString * body = @"";
    [mail setMessageBody:body isHTML:NO];
    [self presentModalViewController:mail animated:YES];
    [mail release];         
}
else
{
    //NSLog(@"Message cannot be sent");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-15T07:06:20.513

谢谢@Gypsa
这是快速代码

```
func composeMail(){        
        if(MFMailComposeViewController.canSendMail()){

            var mail:MFMailComposeViewController = MFMailComposeViewController()
            mail.mailComposeDelegate = self

            mail.setSubject("Email with attached pdf")

            //file name "attatchment.pdf" in project bundle
            var newFilePath:NSString = NSBundle.mainBundle().pathForResource("attatchment", ofType: "pdf")!

            var pdfData:NSData = NSData(contentsOfFile: newFilePath as String)!
            mail.addAttachmentData(pdfData, mimeType: "application/pdf", fileName: "attatchment.pdf")

            var body:NSString = ""
            mail.setMessageBody(body as String, isHTML: false)
            self.presentViewController(mail, animated: true) { () -> Void in

            }

        }else{

            println("Message cannot be sent")
        }
    }

    // MARK: - MFMailComposeViewControllerDelegate
    func mailComposeController(controller: MFMailComposeViewController!, didFinishWithResult result: MFMailComposeResult, error: NSError!)
    {
        self.dismissViewControllerAnimated(true, completion: { () -> Void in
        })
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:10:56.397

mime 类型是 pdf 的更改，所以使用这种 mime 类型它对我来说很好用

```
NSMutableData *pdfData = [NSMutableData data];
UIGraphicsBeginPDFContextToData(pdfData, bounds, nil); 
```

然后在将来的某个时候，您需要将该 pdfData 传递给 MFMailComposeViewController。

```
MFMailComposeViewController *vc = [[[MFMailComposeViewController alloc] init] autorelease];
[vc setSubject:@"my pdf"];
[vc addAttachmentData:pdfData mimeType:@"image/pdf" fileName:@"SomeFile.pdf"]; 
```

# java - 如何在 Android 应用程序中显示图像

> ID：10309556
> 
> 赞同：8
> 
> 时间：2012-04-25T04:58:01.290
> 
> 标签：java, android, image, android-sdcard

我想在我的 Android 应用程序中以特定大小显示图像。我该怎么做？请指导我？还有一件事我想要 SD 卡中的图像。所以请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T05:12:50.050

首先，您需要创建一个图像视图。

```
ImageView imageView = new ImageView(getApplicationContext()); 
```

创建布局参数以在布局上添加图像视图

```
LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT); 
```

然后获取您的图像路径

```
String path = Environment.getExternalStorageDirectory() + "/your folder name/image_name.bmp"; 
```

在 ImageView 上设置图像

```
Bitmap image = BitmapFactory.decodeFile(path);
imageView.setImageBitmap(image); 
```

获取要添加的布局

```
RelativeLayout rl = (RelativeLayout) findViewById(R.id.relativeLayout1); 
```

将视图添加到布局

```
rl.addView(imageView, lp); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T05:06:14.523

您可以使用以下代码片段在 imageview 中加载图像。

```
ImageView iv = new ImageView(this);
iv.setImageUri(Uri.parse("file://loaction")); 
```

您可以使用上述示例方法从 sd 卡中显示图像中的图像。即使不对文件路径进行硬编码，也可以使用 Environment.getExternalEnvironment() 来获取路径。

```
Environment.getExternalStorageDirectory() + "/folder/filename.ext"; 
```

如果没有内部文件夹使用下面

```
 Environment.getExternalStorageDirectory() + "/filename.ext"; 
```

# jquery-mobile - jquery mobile + phonegap onclick

> ID：10309558
> 
> 赞同：1
> 
> 时间：2012-04-25T04:58:14.020
> 
> 标签：jquery-mobile, cordova

我一直在试图解决这个问题，但仍然卡住了。所以我在 iOS 和 JQueryMobile 上使用 PhoneGap。我试图在单击按钮时显示警报。

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
<script type="text/javascript" charset="utf-8" src="cordova-1.6.1.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
        </script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js">
        </script> 
```

我有这个

`<a href="#" id="button" data-role="button" data-theme="b"> Login </a>` `$(document).ready("#button").click(function() { alert('button clicked'); });`

当我尝试在 chrome 中启动它时，它工作正常。但是，当我使用 iphone 模拟器时，它没有显示任何内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T10:11:27.130

对于普通的 Web 应用程序，您将使用 dom ready 即

```
$(function(){ // <-- this is a shortcut for $(document).ready(function(){ ... });
    $('#button').click(function(){
        alert('button clicked');
    });
}); 
```

然而，在 JQM 应用程序中，绑定到“pageinit”会更有用，即

```
$(document).on('pageinit','[data-role=page]',function(){
    $('#button').click(function(){
        alert('button clicked');
    });
}); 
```

绑定到 pageinit 效果更好，因为 JQM 将新页面插入到与第一页相同的 dom 中。因此，您在 dom ready 中的所有代码都不会再次被调用。因此，我在上面放置的第一段代码仅适用于您的 JQM 应用程序的第一页。无论您的按钮位于哪个页面，第二个都可以使用。如果我可以为您进一步澄清这一点，请告诉我。

# php - PHP：创建和使用 REST 和身份验证

> ID：10309560
> 
> 赞同：1
> 
> 时间：2012-04-25T04:58:24.183
> 
> 标签：php, rest, authentication

我计划创建一些简单的 REST Web 服务，供其他一些应用程序使用（一切都是内部的，不面向 Internet）。由于某些原因，应用程序应与 SSO（Windows、NTLM 或其他）一起使用。我遇到的问题是如何在 Web 服务中进行身份验证。

调用 Web 服务的应用程序不知道用户密码，所以我有点迷失了如何在没有用户登录的情况下对 REST 进行身份验证？例如。避免基本身份验证

由于用户的简单性并且不必在我的应用程序中处理密码，我想避免登录。我有哪些选择？我错过了一些明显的东西吗？

这是否是一个解决方案：创建令牌，将其传递给服务并将其存储在数据库中。Web 服务检查数据库中是否存在令牌。（过期处理？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:48:17.080

正如您所提到的，此问题的最常见解决方案是基于简单密钥或令牌的身份验证。这就是很多谷歌服务（例如地图）的工作方式。您只需在服务提供者上为每个消费者生成一个密钥，将其存储在您的数据库中，并验证所有调用是否都传递了一个有效的密钥。

更复杂的选项是[HMAC](http://en.wikipedia.org/wiki/HMAC)或[OAuth](http://en.wikipedia.org/wiki/OAuth)身份验证。鉴于您的情况，即仅在您的 Intranet 内提供服务，我想说保持简单并使用单密钥身份验证。

在上述情况下，我认为不需要处理过期。尽管如此，如果你想实现它，那么你可以

*   在每个客户端请求上，在服务器上生成一个基于时间戳的令牌
*   在您对请求的回复中，还包括此令牌
*   客户端应在后续请求中同时使用静态 API 密钥和动态令牌
*   服务器应检查令牌的生命周期并根据需要接受/拒绝请求。

# matlab - opencv中有没有相当于matlab conv2的函数

> ID：10309561
> 
> 赞同：6
> 
> 时间：2012-04-25T04:58:31.830
> 
> 标签：matlab, image-processing, opencv, convolution

matlab函数conv2有没有直接的opencv函数？我尝试使用 cvFilter2D()，但它似乎给了我与 conv2() 不同的结果。

例如：

```
CvMat * Aa = cvCreateMat(2, 2, CV_32FC1);
CvMat * Bb = cvCreateMat(2, 2, CV_32FC1);
CvMat * Cc = cvCreateMat(2, 2, CV_32FC1);
cvSetReal2D(Aa, 0, 0, 1);
cvSetReal2D(Aa, 0, 1, 2);
cvSetReal2D(Aa, 1, 0, 3);
cvSetReal2D(Aa, 1, 1, 4);
cvSetReal2D(Bb, 0, 0, 5);
cvSetReal2D(Bb, 0, 1, 5);
cvSetReal2D(Bb, 1, 0, 5);
cvSetReal2D(Bb, 1, 1, 5);
cvFilter2D(Aa, Cc, Bb);

This produces the matrix [20 30; 40 50]

In MATLAB:
>> A=[1 2; 3 4]
A =
1 2
3 4

>> B=[5 5; 5 5]
B =
5 5
5 5

>> conv2(A,B,'shape')
ans =
50 30
35 20 
```

请帮助我。它对我非常有用。谢谢。

问候

阿兰加拉詹。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T03:08:08.933

数值计算环境 Matlab（或例如它的免费替代品 GNU Octave）提供了一个名为 conv2 的函数，用于给定矩阵与卷积核的二维卷积。在基于免费的图像处理库 OpenCV 编写一些 C++ 代码时，我发现 OpenCV 目前没有提供等效的方法。

尽管有一个 filter2D() 方法可以实现二维相关，并且可以用于将图像与给定内核进行卷积（通过翻转该内核并将锚点移动到正确的位置，如相应的 OpenCV 文档页面中所述)，如果有一种方法提供与 Matlab 相同的边界处理选项（“完整”、“有效”或“相同”卷积），例如比较使用 OpenCV 在 Matlab 和 C++ 中实现的相同算法的结果，那就太好了。

这是我想出的：

```
enum ConvolutionType {   
/* Return the full convolution, including border */
  CONVOLUTION_FULL, 

/* Return only the part that corresponds to the original image */
  CONVOLUTION_SAME,

/* Return only the submatrix containing elements that were not influenced by the border       
*/
  CONVOLUTION_VALID
};

void conv2(const Mat &img, const Mat& kernel, ConvolutionType type, Mat& dest) {
  Mat source = img;
  if(CONVOLUTION_FULL == type) {
    source = Mat();
    const int additionalRows = kernel.rows-1, additionalCols = kernel.cols-1;
    copyMakeBorder(img, source, (additionalRows+1)/2, additionalRows/2,     
(additionalCols+1)/2, additionalCols/2, BORDER_CONSTANT, Scalar(0));
  }

  Point anchor(kernel.cols - kernel.cols/2 - 1, kernel.rows - kernel.rows/2 - 1);
  int borderMode = BORDER_CONSTANT;
  filter2D(source, dest, img.depth(), flip(kernel), anchor, 0, borderMode);

  if(CONVOLUTION_VALID == type) {
    dest = dest.colRange((kernel.cols-1)/2, dest.cols - kernel.cols/2)
           .rowRange((kernel.rows-1)/2, dest.rows - kernel.rows/2);
  }
} 
```

在我的单元测试中，这个实现产生的结果与 Matlab 实现几乎相同。请注意，如果内核足够大，OpenCV 和 Matlab 都会在傅里叶空间中进行卷积。“大”的定义在两种实现中有所不同，但结果应该仍然非常相似，即使对于大内核也是如此。

此外，对于“完整”卷积情况，此方法的性能可能是一个问题，因为需要复制整个源矩阵以在其周围添加边框。最后，如果您在 filter2D() 调用中收到异常并且您正在使用只有一列的内核，这可能是由这个错误引起的。在这种情况下，请将borderMode 变量设置为例如BORDER_REPLICATE，或者使用OpenCV 主干中最新版本的库。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T07:47:10.940

如果您使用卷积，则矩阵边缘会出现问题。卷积掩码需要矩阵之外的值。OpenCV 和 matlab 的算法使用不同的策略来处理这个问题。OpenCV 只是复制边界的像素，而 matlab 只是假设所有这些像素都是零。

因此，如果您想在 OpenCV 中模拟 matlab 的行为，您可以手动添加此零填充。甚至还有专门的功能。让我举一个例子来说明如何修改你的代码：

```
CvMat * Ccb = cvCreateMat(3, 3, CV_32FC1);
CvMat * Aab = cvCreateMat(3, 3, CV_32FC1);
cvCopyMakeBorder(Aa,Aab, cvPoint(0,0),IPL_BORDER_CONSTANT, cvScalarAll(0));
cvFilter2D(Aab, Ccb, Bb); 
```

这给出的结果是：

```
20.000   30.000   20.000 
40.000   50.000   30.000 
30.000   35.000   20.000 
```

要获得您想要的结果，您只需删除第一列和第一行即可摆脱我们添加的边框引入的额外数据。

# php - "^/page/(\d+)$" 的 preg_match

> ID：10309562
> 
> 赞同：2
> 
> 时间：2012-04-25T04:58:40.200
> 
> 标签：php, regex, preg-match

这应该很简单，但我正在努力让这个 preg_match 工作。

我想从像这样“/page/30/”这样的 url 中捕获页码，其中 $match[0] 将返回 30。

```
$uri = "/page/30/";
$pat = "/^\/page\/(\d+)$/";
preg_match($pat, $uri,$matches);
print_r($matches); //should print 30 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T06:02:26.830

主要原因，你没有得到输出是（就像格雷格说的那样），你忘记了模式中的斜杠。

作为提示，当您想`/`逐字匹配时，请使用不同的正则表达式分隔符，以避免转义斜杠。

所以这将符合您的模式：

```
$uri = "/page/30/";
$pat = "~^/page/(\d+)/$~";
preg_match($pat, $uri, $matches);
print_r($matches); //should print 30 
```

然后有一个误解，`$matches`是返回一个包含整个匹配项的数组，`$matches[0]`然后是匹配的组。

因此，如果您想打印`30`，您需要执行以下操作：

```
print($matches[1]); 
```

因为数字存储在第一个捕获组中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T05:00:42.697

```
$uri = "/page/30/";
$pat = "/(?<=^\/page\/)\d+/";
preg_match($pat, $uri, $matches);
print_r($matches); //should print 30 
```

将正则表达式更改为`/(?<=^\/page\/)\d+/`. 有关说明，请参阅有关[环视断言](http://www.regular-expressions.info/lookaround.html)的教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T05:04:06.527

您忽略了斜杠。这应该正确匹配：

```
$pat = "/^\/page\/(\d+)\/$/"; 
```

# html - 如何使页脚粘在底部边距的包装器底部？

> ID：10309563
> 
> 赞同：1
> 
> 时间：2012-04-25T04:58:44.900
> 
> 标签：html, css, margin, footer, sticky-footer

我正在尝试制作一个贴在包装底部的页脚，但要留下底部边距，以便可以看到正文背景上的图案图像。
我遇到了粘性页脚

[http://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

效果很好，但是我尝试向页脚/包装器/正文添加边距/填充的所有尝试都没有。

我想这一定是一件非常简单的事情，但我没有找到它。感谢您的任何提示/建议！

这是相关的CSS：

```
* 
{
    margin: 0;
}
html, body 
{
    margin-top: 0px;
    margin-bottom: 25px;
    background-repeat: repeat;
    background-image: url(images/modulo-pattern-grey-light.gif);
    height: 100%;
}

#wrapper 
{
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -98px;
    background: #fff url(images/footer.gif) left bottom no-repeat;
    width: 980px;
    box-shadow: 4px 4px 5px #999;
}
.footer, .push 
{
    height: 98px;
}

.footer 
{
    margin-left: 490px;
    margin-right: 40px; 
    background-color: #bc4c9b;
} 
```

HTML：

```
<div id="wraper">
<div class="header"></div>
<div class="logo">
</div>
<div class="menu_container">
<div class="main_menu">  
<ul>  
<li><a href="index.html">Home</a></li>  
<li><a class="selected" >Quiénes Somos</a></li>  
<li><a href="consultoria.html">Consultoría</a></li>  
<li><a href="capacitacion.html">Capacitación</a></li>  
<li><a href="academico.html">Académico / Artículos</a></li>  
<li><a href="alianzas.html">Alianzas</a></li> 
<li><a href="proyectos.html">Proyectos</a></li>  
<li><a href="contacto.html">Contacto</a></li>   
</ul>  
</div> 
</div>
<div class="quienes_pic"></div>
<div class="quienes_text"></div>
  <div class="push"></div>
</div>
<div class="footer"></div> 
```

抱歉，我没有提到，但固定位置不起作用，因为我希望相同的页脚在不同高度的不同页面上工作。想法是在所有页面中使用相同的包装和页脚，然后分配不同的正文 ID 以设置不同的高度

很像通过这个网站完成的：

[http://www.casadelviento.com.ar/](http://www.casadelviento.com.ar/)

在这种情况下，它使用不同的主体 id 和不同的包装器，我认为可能可以用更少的代码和更清晰的方式来完成（即我不明白为什么包装器高度`#contenido-index`和主体高度之间存在差异）

```
#contenido-index {
background-color: #FFF;
height: 2040px;
width: 900px;
margin: 0 auto;
}
#contenido-chicos {
background-color: #FFF;
height: 2760px;
width: 900px;
margin: 0 auto;
}
#contenido-adultos {
background-color: #FFF;
height: 2810px;
width: 900px;
margin: 0 auto;
}
#contenido-somos {
background-color: #FFF;
height: 2150px;
width: 900px;
margin: 0 auto;
}
#contenido-historia {
background-color: #FFF;
height: 980px;
width: 900px;
margin: 0 auto;
}
#contenido-horarios {
background-color: #FFF;
height: 967px;
width: 900px;
margin: 0 auto;
}
#contenido-contacto {
background-color: #FFF;
height: 750px;
width: 900px;
margin: 0 auto;
}
#contenido-videos {
background-color: #FFF;
height: 820px;
width: 900px;
margin: 0 auto;
}
#contenido-fotos {
background-color: #FFF;
height: 595px;
width: 900px;
margin: 0 auto;
}
#body-index {
height: 2160px;
}
#body-somos {
height: 2070px;
}
#body-historia {
height: 1150px;
}
#body-horarios {
height: 1060px;
}
#body-chicos {
height: 2700px;
}
#body-adultos {
height: 2800px;
}
#body-videos {
height: 960px;
}
#body-fotos {
height: 740px;
}
#body-contacto {
height: 880px;
}
/*FOOTER}*/
#contenedor_pie {
height: 40px;
width: 500px;
float: left;
margin-left: 20px;
margin-top: 15px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:14:30.860

参考[http://alt-web.com/DEMOS/CSS2-Sticky-Footer.shtml](http://alt-web.com/DEMOS/CSS2-Sticky-Footer.shtml)

您可以将页脚 HTML 定义为

```
 <div id="Sticky">
       <h2>Here is a Sticky Footer</h2>
       <p>Test for Sticky Footer</p>
   </div> 
```

那么你的 CSS 就像

```
 #Sticky 
   {
       color:#FFF;
       text-shadow: 2px 2px 2px #333; 
       border: 2px solid orange;
       position:fixed;
       padding: 0 10px 0 10px;                 
       left: 0px;
       bottom: 0px;
       width: 100%;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:50:00.013

嘿，您可以轻松地在您的 css 中定义一些代码，如下所示

***CSS***

```
body{background:green;}
#wrapper {
background:red;
    min-height:700px;
}
.footer {
position:fixed;
    bottom:20px;
    height:100px;
    background:yellow;
    left:0;
    right:0;
} 
```

**HTML**

```
<div id="wrapper">Wraper text </div>

<div class="footer">Sticky footer</div> 
```

现场演示[http://jsfiddle.net/6z6Uk/](http://jsfiddle.net/6z6Uk/) ​</p>

现在根据您的设计进行调整。

# r - 在 R 中按星期几重新排序因子水平

> ID：10309564
> 
> 赞同：19
> 
> 时间：2012-04-25T04:58:53.317
> 
> 标签：r, dataframe, r-factor

我在 R 中有以下 data.frame：

```
> daily
        DoW         Duration
1    Friday 14.0000000000000
2    Monday 21.0000000000000
3  Saturday 12.0000000000000
4  Thursday 28.0000000000000
5   Tuesday 12.0000000000000
6 Wednesday 91.0000000000000
7    Sunday 20.0000000000000 
```

我想更改因子水平的顺序，以便星期按（美国）星期几顺序排列。

看起来我可以用`relevel()`. 但这仅需要 1 个数字参数并将其移至顶部。所以, `relevel(daily$DoW, 7)`, 星期天移动到顶部，但其余部分保持无序（这意味着我需要以相反的顺序重新调整它）。

可行，但必须有更好的方法，对吧？

（时间序列解决方案也可以接受。）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-25T05:09:43.930

您需要在因子中指定级别，然后`order`与索引一起使用：

```
daily$DoW <- factor(daily$DoW, levels= c("Sunday", "Monday", 
    "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"))

daily[order(daily$DoW), ] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-16T09:46:55.247

而不是 a `factor`，你想要的是 a `Ordered.Factor`。

这行 R 代码将您的`DoW`变量转换为“有序因子”：

```
daily$DoW <- ordered(daily$DoW, levels=c("Monday", "Tuesday", "Wednesday", "Thursday", 
"Friday", "Saturday", "Sunday")) 
```

Now when you use `table`, `plot` or any other functions on `Dow` it will be the order you specified above.

# tridion - 如何在 SDL Tridion 2011 SP1 中处理 Dreamweaver TBB 中的嵌套重复区域

> ID：10309577
> 
> 赞同：7
> 
> 时间：2012-04-25T05:00:32.800
> 
> 标签：tridion

我正在 SDL Tridion 2011 SP1 中处理 DWT TBB。

我有一个多值的嵌入式字段“body”。在这个嵌入字段中，我还有一个简单的文本字段“值”，它又是多值的。

要呈现“值”字段，我必须使用两个重复循环。

但我无法区分两个循环的 Indeces。

我写了如下。

```
<!-- TemplateBeginRepeat name="Component.Fields.body" -->
    <!-- TemplateBeginRepeat name="Component.Fields.body[${TemplateRepeatIndex}].value" -->
    <div>@@RenderComponentField("Fields.body[${TemplateRepeatIndex}].value", TemplateRepeatIndex)@@ </div>
    <!-- TemplateEndRepeat -->
<!-- TemplateEndRepeat --> 
```

我无法渲染字段。

任何人都可以帮助如何处理 DWT TBB 中的多个嵌套区域。

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-25T19:38:09.610

[Neil 提到](http://code.google.com/p/tridion-practice/wiki/IteratingOverMultivalueEmbeddedFields)的Tridion 练习页面是一个很好的参考。但是该页面显示了如何对所有嵌入字段进行通用迭代。如果您知道字段名称，事情会变得容易一些。在您的情况下，这就是您的 DWT 中所需的全部内容：

```
<!-- TemplateBeginRepeat name="body" -->
    <!-- TemplateBeginRepeat name="Field.value" -->
        <div>@@RenderComponentField(FieldPath+".value", 
                                               TemplateRepeatIndex)@@ </div>
    <!-- TemplateEndRepeat -->
<!-- TemplateEndRepeat --> 
```

逐行：

1.  迭代`body`组件字段的值
2.  迭代可嵌入模式的`value`子字段的值`body`
3.  在这个阶段，`FieldPath`指的是当前`body`值，所以`body[0]`，`body[1]`等等，`TemplateRepeatIndex`是当前的索引`value`。所以我们可以`RenderComponentField`用这些知识构造正确的调用。

## 例子

我有一个包含两个`body`字段的组件，每个字段都有两个`value`字段。所以XML是：

```
<Content xmlns="uuid:8841d68e-7b1b-45cd-a6d6-7e7da5de3ef9">
    <body>
        <value>body1.value1</value>
        <value>body1.value2</value>
    </body>
    <body>
        <value>body2.value1</value>
        <value>body2.value2</value>
    </body>
</Content> 
```

上述 DWT 在此组件上的输出为：

```
<div><tcdl:ComponentField name="body[0].value"
                          index="0">body1.value1</tcdl:ComponentField></div>
<div><tcdl:ComponentField name="body[0].value" 
                          index="1">body1.value2</tcdl:ComponentField></div>
<div><tcdl:ComponentField name="body[1].value" 
                          index="0">body2.value1</tcdl:ComponentField></div>
<div><tcdl:ComponentField name="body[1].value" 
                          index="1">body2.value2</tcdl:ComponentField></div> 
```

## 调试这些情况

许多人在编写这样的结构时遇到问题。我也不例外，我刚刚发现通过知道关键变量是：和`Field`，我可以让大多数情况下工作。如有疑问，只需将此片段嵌入到每个.`FieldPath``TemplateRepeatIndex``TemplateBeginRepeat`

```
(FieldPath=@@FieldPath@@, TemplateRepeatIndex=@@TemplateRepeatIndex@@) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T07:53:57.160

FieldPath变量在这里对**您**没有帮助吗？

有关迭代多值嵌入字段的示例，请参阅[Tridion Practice 站点。](http://code.google.com/p/tridion-practice/wiki/IteratingOverMultivalueEmbeddedFields)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T06:35:28.620

正如您已经注意到的，您不能在内循环中使用外循环索引。内循环索引将隐藏外循环索引。因此，您需要一种解决方法。我能想到我过去使用的 2 个：

1.  使用 C# TBB（程序集或片段）生成输出。这不是一个很好的解决方案，但它很实用。您至少可以生成内部循环的输出并将各个值存储在包变量中。然后在外部循环中，您可以简单地迭代这些值并将它们包含在输出中。示例：创建名为`body_0`,`body_1`等的变量。然后在外部循环中使用`@@body_${TemplateRepeatIndex}@@`

2.  使用 Dreamweaver 函数来模拟内部循环索引。您可以为`Set`Package 项目变量提供一个函数，并为`Increment`它提供一个函数。然后在循环中使用这个变量。例子：

> ```
> <!-- TemplateBeginRepeat name="Component.Fields.body" -->
>     @@Set("i", 0)@@
>     <!-- TemplateBeginRepeat name="Component.Fields.body[${i}].value" -->
>         <div>@@Component.Fields.body[${i}].value[${TemplateRepeatIndex}]</div>
>     <!-- TempalteEndRepeat -->
>     @@Increment("i")@@ 
> ```

您必须自己编写`Set`和`Increment`DWT 函数来存储和增加包中的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T06:25:33.357

试试这种方式： -

```
<!-- TemplateBeginRepeat name="Component.Fields.body" -->
    @@Push("PrimaryIndex", TemplateRepeatIndex)@@
    <!-- TemplateBeginRepeat name="Component.Fields.body[${PrimaryIndex}].value" -->
            @@Push("SecondaryIndex", TemplateRepeatIndex)@@
            <div>@@RenderComponentField("Fields.body[${PrimaryIndex}].value", ${SecondaryIndex})@@ </div>
    <!-- TemplateEndRepeat -->
<!-- TemplateEndRepeat --> 
```

## 更新 1：

只是我对此有所了解。这样做怎么样？

```
<!-- TemplateBeginRepeat name="Component.Fields.body" -->
    <!-- TemplateBeginRepeat name="value" -->               
            <div>@@Field@@</div> 
    <!-- TemplateEndRepeat -->
<!-- TemplateEndRepeat --> 
```

不使用任何`TemplateRepeatIndex`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T17:27:56.873

对于那些使用**没有**SP1 版本的 Tridion 2009 的人（如我们的客户），不能按照前面的答案中的建议使用“FieldPath”变量。但是有一种简单的方法可以在 DWT 本身中实现这一点，如下面的示例代码所示：

```
 <!-- TemplateBeginRepeat name="Component.body" -->
        <!-- TemplateBeginRepeat name="Field.value" -->
         <div> @@Field@@> </div>
        <!-- TemplateEndRepeat -->
    <!-- TemplateEndRepeat --> 
```

# python - python和perl之间的RPC

> ID：10309579
> 
> 赞同：1
> 
> 时间：2012-04-25T05:00:37.803
> 
> 标签：python, perl, rpc, zeromq, msgpack

我目前正在使用 json 和 http 从 python 调用 perl 函数，但速度很慢。根据一些研究，messagepack 最适合序列化，而 zeromq 是最好的传输方式。两者都有跨平台绑定，但在深入研究之前，我想知道其他人正在使用什么来实现快速跨语言 RPC（最好使用持久的 tcp 连接）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:17:48.450

[Thrift](http://thrift.apache.org/)是一个跨语言的 RPC 平台，旨在非常高效和高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:19:17.310

在研究了几天之后，我将使用 ZeroMQ + 消息包。ZeroMQ 文档展示了如何使用消息包，我只需几行代码就可以实现一个 RPC 服务器或客户端。perl 和 python 的 ZeroMQ 模块都内置了 JSON 序列化，因此可以单独使用 ZeroMQ 实现 RPC，但是 messagepack 将很好地提升我的数据繁重调用。Thrift 看起来也不错，但它增加了一个额外的配置文件，而且级别相当高。我确信使用 ZeroMQ 可以获得最大的性能，它留下了更多的选择余地。

# php - 如何为 $Body 结果添加后缀？

> ID：10309583
> 
> 赞同：-1
> 
> 时间：2012-04-25T05:00:47.637
> 
> 标签：php, email

我正在尝试了解如何为电子邮件中的字段数据添加后缀。如何将“ of 42”添加到字段数据的末尾？

```
$Body .= $reg_count ' of 42';

or

$Body .= $reg_count " of 42"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:02:15.787

```
$Body .= $reg_count . " of 42"; 
```

你没有连接`$reg_count`和`" of 42"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:03:14.620

您应该使用连接操作符 (.) 连接变量和字符串

```
$Body .= $reg_count . ' of 42'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T05:05:53.043

```
 $Body .= $reg_count." of 42";
  or
  $Body .= "$reg_count of 42"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T05:02:18.673

与其他所有字符串的方式相同。

```
'foo' . 'bar' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T05:04:29.017

简单地做

```
 $Body .= "$reg_count  of 42"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T05:25:47.517

$Body .= $reg_count 。' 42'; 或 $Body .= "$reg_count of 42"; 使用其中任何一个

# list - '|' 如何 序言中的字符追加而不是拆分列表？

> ID：10309585
> 
> 赞同：3
> 
> 时间：2012-04-25T05:00:56.303
> 
> 标签：list, prolog, append

我的例子是使用 append 仿函数：

```
append([],L,L). 
append([H|T],L2,[H|L3])  :-  append(T,L2,L3).

//append([123],[abc],L3). this is the query 
```

真正让我困惑的是 [H|L3] 列表。形成我读到的内容，这会引起人们的注意，那么如何将其附加到列表中。当它在列表中递归并开始返回时，它是如何附加的？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T06:59:49.523

该符号`[H|T]`是 . 的语法糖`'.'(H, T)`。所以它是一个有名字的函子`.`——一个点和两个参数。考虑：

```
?- [1,2,3] = [X|L]。
X = 1,
L = [2, 3]。

```

在这里我们问，是否有方程的解`[1,2,3] = [X|L]`。而且，是的，这两个答案替换描述了一个解决方案。求解这个方程的过程称为统一。这个过程包含了数据结构的读取、选择和写入。所以，你可以称之为“脱头”，但你会错过背后的普遍性。毕竟：

```
?- X = 1，L = [2, 3]，M = [X|L]。
X = 1,
L = [2, 3],
M = [1, 2, 3]。

```

在这里，我们从一个较小的列表中构建了一个新列表。但什么是：

```
?- M = [X|L]。
M = [X|L]。

```

这个答案暗示了许多解决方案。例如，所有长度为 1 和更长的列表。

由于您正在查看`append/3`，请考虑以下查询：

```
?-附加（Xs，Ys，[X，Y，Z]）。
?-附加（Xs，Xs，Zs）。
?-附加（Xs，Ys，Zs）

```

[更多关于列表语法](https://stackoverflow.com/a/10029124/772868)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T06:55:36.490

`trace/0`当您想知道执行的样子时，您可以在这些情况下使用。

这是它的概述。

*   你打电话`append([1, 2, 3], [a, b, c], L3).`
*   `[1, 2, 3]`不为空，则应用第二个子句
*   它呼唤`append([2, 3], [a, b, c], L4).`并记住它的头`L3`就像它的头，`[1, 2, 3]`它的尾巴`L3`是`L4`
*   `[2, 3]`不为空，则应用第二个子句
*   它呼唤`append([3], [a, b, c], L5).`并记住它的头`L4`就像它的头，`[2, 3]`它的尾巴`L4`是`L5`
*   `[3]`不为空，则应用第二个子句
*   它呼唤`append([], [a, b, c], L6).`并记住它的头`L5`就像它的头，`[3]`它的尾巴`L5`是`L6`
*   `[]`与 结合`[]`，应用第一个子句
*   它说`L6`与`[a, b, c]`

现在Prolog有所有的信息来回答你：

```
L6 = [a, b, c],
L5 = [3|L6],
L4 = [2|L5],
L3 = [1|L4]. 
```

将允许 Prolog 得出结论`L3 = [1, 2, 3, a, b, c]`。

希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T05:48:28.223

在 Prolog 中，你永远不会做任何像“起飞”那样活跃的事情。将其视为“专注于”可能会更好。（Prolog 本质上是声明性的；您不说要做什么，而是说某物的样子。）例如，列表可能是空的 ( `[]`) 或非空的 ( `[H|T]`)；每个非空列表都有一个 head`H`和一个 tail `T`，并且`|`只是让您引用它们。根据需要，统一可以使用列表的声明`[H|T]`来拆分列表或将列表放在一起。

# android - 冻结屏幕方向

> ID：10309588
> 
> 赞同：2
> 
> 时间：2012-04-25T05:01:02.117
> 
> 标签：android, screen-orientation, android-screen

有带有以下代码的 CheckBox：

```
 CheckBox cb = (CheckBox)findViewById(R.id.freezer);
    cb.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (isChecked) {
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);
            } else {
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR);
            }
        }
    }); 
```

所以，当我检查它时，屏幕会旋转到默认的系统方向（我的平板电脑的横向）。

我需要冻结当前方向。如果您将设备转为纵向并切换 CheckBox，则必须输入设备旋转，直到取消选中 CheckBox。

Display.getRotation() 不是解决方案，因为每个设备都有自己的 Surface.ROTATION

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T12:43:20.120

所以，这是我的解决方案。

```
private int getCurentOrientation() {
    Display d = ((WindowManager) getSystemService(WINDOW_SERVICE))
            .getDefaultDisplay();
    boolean isWide = d.getWidth() >= d.getHeight();
    switch (d.getRotation()) {
    case Surface.ROTATION_0:
        return isWide ? ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE
                : ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;
    case Surface.ROTATION_90:
        return isWide ? ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE
                : ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT;
    case Surface.ROTATION_180:
        return isWide ? ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE
                : ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT;
    case Surface.ROTATION_270:
        return isWide ? ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE
                : ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;
    }
    return -1;
}

private void lockOrientation(boolean lock) {
    if (lock) {
        setRequestedOrientation(getCurentOrientation());
    } else {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR);
    }
} 
```

在 4 台设备（2 台智能手机和 2 台平板电脑）上，它可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:21:17.497

既然你知道如何获得当前方向，就写

```
if(isChecked){
      setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
} else {
      setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T05:51:53.680

创建一个成员变量并保存当前设置状态。短is_landscape = -1；

oncheckedchange 监听器，您可以永久设置状态并保存。

```
if (is_landscape == -1) {
    Configuration config_screen = getResources().getConfiguration();
    int orientation = config_screen.orientation;
    if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
       setRequestedOrientation(Configuration.ORIENTATION_LANDSCAPE);
       is_landscape = 0;
    } else {
       setRequestedOrientation(Configuration.ORIENTATION_PORTRAIT);
       is_landscape = 1;
   }
} 
```

问题是，每当您旋转设备时，它都会重新创建您的活动，因此您会失去状态。所以只需将您的 is_landscape 变量保存在

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    oustate.putExtra("last_state", is_landscape);
    super.onSaveInstanceState(outState);
}

you can restore your position on on restore instance

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    is_landscape = savedInstanceState.getShort("last_state");
    if (is_landscape == 0) {
        setRequestedOrientation(Configuration.ORIENTATION_LANDSCAPE);
    } else if (is_landscape == 1) {
        setRequestedOrientation(Configuration.ORIENTATION_PORTRAIT);
    }
    super.onRestoreInstanceState(savedInstanceState);
} 
```

如果您不想保存和恢复实例，那么您可以使用。

android:configChanges="方向"

在您的清单文件中，它不允许在更改设备方向时重新创建活动。

希望它对你有用。

如果你想检测反向状态也可以使用

int state = (WindowManager)getSystemService(WINDOW_SERVICE)).getDefaultDisplay().getRotation();

如果状态是 Surface.ROTATION_0 那么它将是纵向 如果状态是 Surface.ROTATION_90 那么它将是横向 如果状态是 Surface.ROTATION_180 那么它将是反向纵向 如果状态是 Surface.ROTATION_270 那么它将是反向横向

在 Surface.ROTATION_0 和 Surface.ROTATION_180 的情况下设置纵向。在 Surface.ROTATION_90 和 Surface.ROTATION_270 的情况下设置景观。

您还可以设置旋转而不是方向，以便您的设备处于旋转状态而不是定向状态。

# struts2 - Struts2 Tiles 配置问题

> ID：10309590
> 
> 赞同：0
> 
> 时间：2012-04-25T05:01:25.303
> 
> 标签：struts2

我在struts2 中配置瓷砖。

我已经添加了所有需要的罐子。`Struts-tiles-plugin`, `tiles-api`, `tiles-compat`, `tiles-jsp`, `tiles-core`, `tiles-servlet`, `commons-beanutils`,`commons-digester`等等。

但我收到了这个错误。我的完整堆栈跟踪是

```
Apr 25, 2012 9:55:37 AM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter struts2
java.lang.NoSuchMethodError: com.opensymphony.xwork2.util.finder.UrlSet.<init>(Lcom/opensymphony/xwork2/util/finder/ClassLoaderInterface;Ljava/util/Set;)V
    at org.apache.struts2.convention.PackageBasedActionConfigBuilder.buildUrlSet(PackageBasedActionConfigBuilder.java:380)
    at org.apache.struts2.convention.PackageBasedActionConfigBuilder.findActions(PackageBasedActionConfigBuilder.java:352)
    at org.apache.struts2.convention.PackageBasedActionConfigBuilder.buildActionConfigs(PackageBasedActionConfigBuilder.java:317)
    at org.apache.struts2.convention.ClasspathPackageProvider.loadPackages(ClasspathPackageProvider.java:53)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:200)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:55)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:374)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:418)
    at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:190)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:275)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:397)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:108)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3693)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4340)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:920)
    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:883)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1138)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:516)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:566)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Apr 25, 2012 9:55:37 AM org.apache.catalina.core.StandardContext start
SEVERE: Error filterStart
Apr 25, 2012 9:55:37 AM org.apache.catalina.core.StandardContext start
SEVERE: Context [/UBITECWeb] startup failed due to previous errors 
```

如何解决这个问题 请任何人解决这个问题...

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:50:49.670

还添加 xwork-core jar 文件。那有 UrlSet 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T08:54:32.880

在其中添加 .jar 的位置：

1.  右键 > 属性 > Java 构建路径 > 然后是 jar 或其他选项。

2.  在文件夹 WEB-INF > lib 中的项目资源管理器中。

    如果您的答案是 2，请尝试使用第一个选项。我在这两个地方都有 .jars 并且没有问题。

干杯！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T05:49:40.343

这是由于jar文件不匹配，使用maven下载所有必要的jar，它会做所有的。您所要做的就是指定 struts 依赖项。采取一些示例项目并尝试。

[ViralPatel 站点](http://viralpatel.net/blogs/struts-2-tiles-plugin-tutorial-with-example-in-eclipse/)有示例应用程序，其中指定了必要的库。参考它。

# scheme - DrRacket 中未定义截断

> ID：10309591
> 
> 赞同：1
> 
> 时间：2012-04-25T05:01:37.840
> 
> 标签：scheme, racket, truncate, integer-division

我正在尝试`truncate`在方案中使用该功能，而 DrRacket 不断发出此消息

```
ProblemA.rkt:27:46: truncate: this function is not defined in: truncate 
```

是否有导入或我可以添加的东西，以便编译器可以找到库`truncate`？

基本上我想在方案中进行整数除法，`98/10 = 9`而不是`9.8`但`truncate`函数不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T05:10:26.150

`(quotient 98 10)`做你想做的事。

我实际上是“除法返回浮动”行为的忠实粉丝。整数在除法下不闭合（理论上）。并且`1/2 == 0`可以引入细微的错误（在实践中）。我也总是在 python 中“从 __future__ 导入部门”。

# javascript - 如何在javascript中使用正则表达式检查空的json响应？

> ID：10309598
> 
> 赞同：1
> 
> 时间：2012-04-25T05:02:26.733
> 
> 标签：javascript, regex, json

我的 ajax 响应返回一个空响应（即带有多行空格），我想在我的成功函数中检查它。如何在javascript中使用正则表达式检查空的json响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:11:28.623

```
> /^\s*$/.test("foo")
false
> /^\s*$/.test("")
true
> /^\s*$/.test("   ")
true
> /^\s*$/.test("\n\n")
true 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-25T05:14:31.120

1.  将`jQuery.ajax`数据类型设置为`text`
2.  创建以下`success`回调

    ```
    $.ajax({
      // other options..
      dataType: 'text',
      success(planinTextData) {
        if (planinTextData !== '') {
          var data = JSON.parse(planinTextData);
        }
      }
    }); 
    ```

# php - 使用 FTP 在 PHP 中更改文件夹权限

> ID：10309599
> 
> 赞同：1
> 
> 时间：2012-04-25T05:02:31.683
> 
> 标签：php, ftp, permissions, directory

我们可以使用 ftp_chmod 命令更改您服务器的文件夹权限，您可以使用 php 脚本，希望这在 chmod() 不起作用时有所帮助。

```
$ftp_server='www.example.com';$ftp_user_name='FTPUSRname';
$ftp_user_pass='password';
$conn_id = ftp_connect($ftp_server)or die("asdfdf");
// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);
$file = '/public_html/subdomains/giorgio/';
if (ftp_chmod($conn_id, 0777, $file) !== false) {
  echo "$file chmoded successfully to 777\n";
}
else { 
  echo "could not chmod $file\n";
} 
```

# iphone - 在 ios 5.0 中将控件的标记属性设置为字符串

> ID：10309603
> 
> 赞同：1
> 
> 时间：2012-04-25T05:02:56.473
> 
> 标签：iphone, ios5, tags

我想对使用 iOS 3.0 开发的代码进行更改，以便它可以在 iOS 5.0 上运行。

但问题是，`tag`iphone 中任何控件的属性`NSString`在 iOS 5.0 中都没有取值，而在 iOS 3.0 中没有与 assign `tag`as a相关的问题`NSString`。

我在 iOS 5.0 中收到此警告：

```
lview.tag=@"lblPatientDetail";

"incompatible pointer to integer conversion assigning to integer'(aka 'int') from NSString" 
```

此警告存在于整个项目中，导致大量问题。

那么有没有一种方法可以让我们在 iOS 5.0中分配`NSString`一个值？`tag`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:15:30.887

UIView[标签](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)属性是一个 NSInteger，所以你不能给它分配一个字符串值。您的问题的直接解决方案是对标签使用整数值，而不是字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:16:43.823

如果您专门寻找字符串（使用任何这种方式，您实际上必须使用 int），有两种可能的方式来执行此操作 -

1.  为这些字符串值创建一个枚举，然后使用枚举。

2.  您可以使用 intValue 方法将字符串转换为 int。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T03:50:05.483

如果您想通过字符串识别对象，请改用 NSDictionary。我将在下面提供有关如何使用 NSDictionary 的示例。

```
NSDictionary *dictionary;
NSArray *keys = [NSArray arrayWithObjects:@"key1", @"key2", @"key3", nil];

NSArray *objects = [NSArray arrayWithObjects:@"How", @"are", @"you", nil];

dictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

for (id key in dictionary) {

    NSLog(@"key: %@, value: %@", key, [dictionary objectForKey:key]);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T05:19:46.793

添加 micro 来存储 NSInteger 和使用 micro 作为字符串。

# assembly - 用汇编语言对寄存器中的位进行补码

> ID：10309607
> 
> 赞同：-1
> 
> 时间：2012-04-25T05:03:40.593
> 
> 标签：assembly, x86-64, bit, cpu-registers, complement

如何补充寄存器中的一个或多个位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:06:38.377

[XOR](http://zsmith.co/intel_x.html#xor)将是一个很好的指令，用于翻转单个位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-03T21:40:42.407

例如，您可以分别使用 XOR 和 NOT 指令。

你的号码是 1111，你需要像 0110 这样的 0 和 3 位置的补码，所以：

```
mov al, 1111
xor al, 0110
not al
int 3 
```

这应该将 1111 的所有寄存器更改为 0110

# ios - uitextview 中的文本下划线

> ID：10309609
> 
> 赞同：0
> 
> 时间：2012-04-25T05:03:51.373
> 
> 标签：ios, ios4, uitextview

如何以编程方式在 uitextview 中为文本加下划线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T08:00:44.890

```
NSMutableAttributedString *attributedString = [self.textView.attributedText mutableCopy];   
int valueToSet = kCTUnderlineStyleSingle;
[attributedString addAttribute:NSUnderlineStyleAttributeName value:[NSNumber numberWithInt:valueToSet] range:CGMakeRange(0, self.textView.text.length)];

self.textView.attributedText = attributedString;
[attributedString release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:09:51.660

为此，您可以使用 NSAttributedString。以下是相同的链接 - [https://github.com/AliSoftware/Ali-Cocoa-Classes](https://github.com/AliSoftware/Ali-Cocoa-Classes)

你可以参考这个线程来检查如何使用 NSAttributedString。 [你如何使用 NSAttributedString？](https://stackoverflow.com/questions/3482346/how-do-you-use-nsattributedstring)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:34:52.920

我使用 UIWebView 而不是 UITextView 来解决这个问题。

```
NSString *contentHtml = [NSString stringWithFormat:@"<html><head></head><body><font color=\"white\" size=\"4\"><table width=\"260px\"><tr><td align=\"left\" width=\"160px\"><u>Left:</u></td><td align=\"right\" width=\"100px\">315</td></tr></table></font></body></html>"];
[listWebView loadHTMLString:contentHtml baseURL:nil]; 
```

# php - 检查用户是否在 PHP 中上传了文件

> ID：10309611
> 
> 赞同：0
> 
> 时间：2012-04-25T05:03:55.663
> 
> 标签：php, html

我正在尝试检查用户是否选择上传的文件

html

```
<input  type=\"file\" name=\"upload1[]\" multiple /> 
```

php

```
if(is_uploaded_file($_FILES['upload1']['tmp_name'])){
    echo 'ok';
} 
```

我正在测试使用它不起作用。有没有其他方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:14:00.530

我会查看此位置以获取有关如何正确处理此案例的更多信息： [http ://www.php.net/manual/en/features.file-upload.multiple.php](http://www.php.net/manual/en/features.file-upload.multiple.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:32:13.580

检查这个

```
 <form enctype="multipart/form-data" method="POST">
                Choose a file to upload:
                <input type="file" name="upload1[]" multiple />
                <br />
                <input type="submit" value="Upload File" name="submit" />
            </form>
            <?php

                if (isset($_POST['submit'])) {

                    if (isset($_FILES['upload1'])) {

                        $counter = count($_FILES['upload1']['name']);
                        for ($i = 0; $i < $counter; $i++) {

                            if (is_uploaded_file($_FILES['upload1']['tmp_name'][$i])) {
                                echo $_FILES['upload1']['tmp_name'][$i] . ' - ok <br>';
                            }

                        }

                    }
                }

            ?> 
```

# iphone - 找捏手势的点

> ID：10309613
> 
> 赞同：1
> 
> 时间：2012-04-25T05:04:01.013
> 
> 标签：iphone, uigesturerecognizer

我对 UIGestures 很熟悉，但这种特殊的需求让我碰壁了。

问题：如何找到 UIPinchGesture 的起点和终点？

我必须得到所有这四个点，并且必须在服务器端进行一些计算。

以前有人试过吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T05:46:34.917

利用

```
- (CGPoint)locationOfTouch:(NSUInteger)touchIndex inView:(UIView *)view 
```

喜欢

```
[gesture locationOfTouch:0 inView:youView]; //first
[gesture locationOfTouch:1 inView:youView]; //second 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:18:51.303

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touchPositionOne = [[[event allTouches] allObjects] objectAtIndex:0];
UITouch *touchPositionTwo = [[[event allTouches] allObjects] objectAtIndex:1];
CGPoint fps = [touchPositionOne locationInView:self.imageView];
CGPoint sps = [touchPositionTwo locationInView:self.imageView];

NSLog(@"%@ %@", NSStringFromCGPoint(fps), NSStringFromCGPoint(sps));
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touchPositionOne = [[[event allTouches] allObjects] objectAtIndex:0];
UITouch *touchPositionTwo = [[[event allTouches] allObjects] objectAtIndex:1];
CGPoint fps = [touchPositionOne locationInView:self.imageView];
CGPoint sps = [touchPositionTwo locationInView:self.imageView];

NSLog(@"%@ %@", NSStringFromCGPoint(fps), NSStringFromCGPoint(sps));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T08:34:06.753

```
CGPoint point1 = [gestureRecognizer locationOfTouch:0 inView:piece];
CGPoint point2 = [gestureRecognizer locationOfTouch:1 inView:piece];
CGPoint center = [gestureRecognizer locationInView:piece]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-05T14:25:52.397

我认为在 XCode 12 中您可以使用 location(ofTouch:, in:) 来识别点的位置：

```
print(sender.location(ofTouch: 0, in: view))
print(sender.location(ofTouch: 1, in: view)) 
```

# android - Android：无法在 RelativeLayout 中对齐 3 个视图

> ID：10309620
> 
> 赞同：0
> 
> 时间：2012-04-25T05:04:30.610
> 
> 标签：android, layout, android-relativelayout

我有以下相对布局

```
 <RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="2dp"
    android:layout_marginRight="5dp"
    android:layout_marginBottom="5dp"
    android:layout_marginTop="5dp">
        <TextView
            android:id="@+id/x_memtxtlay"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_toLeftOf="@+id/x_memamtlay"
            android:textColor="#000000"
            android:textSize="22sp"
            android:paddingLeft="3dp">
        </TextView>

        <EditText
            android:id="@+id/x_memamtlay"
            android:layout_height="40dp"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_width="70dp"
            android:inputType="number"
            android:singleLine="true"
            android:paddingLeft="2dp"
            android:paddingRight="2dp"
            android:background="@drawable/edittext_greybg"
            android:visibility="gone">
        </EditText>

        <TextView
            android:id="@+id/x_memamt"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:textColor="#000000"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:textSize="20sp"
            android:background="@drawable/number_fill">
        </TextView>

</RelativeLayout> 
```

现在我必须根据一些要求在我的活动中定期将 EditText(@+id/x_memamtlay) 可见性设置为消失/可见，并将第二个 TextView(@+id/x_memamt) 可见性设置为消失/可见。EditText 或 TextView 将在一次。

问题是，在第一个 TextView(@+id/x_memtxtlay) 中，

当我设置 android:layout_toLeftOf="@+id/x_memamtlay" : (在 EditText 的左边) ![](../Images/1f0c1b0db1e8ff4f1ff1f2b6dffface8.png)

但是当我设置 android:layout_toLeftOf="@+id/x_memamt" : (在第二个 TextView 的左边) ![在此处输入图像描述](../Images/efe549d0e86c04d97893c1beb846a951.png)

如何调整布局以使第一个 TextView 与 EditText 和第二个 TextView 左对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:13:49.653

试试这只是代码中的一个小改动::

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginLeft="2dp"
    android:layout_marginRight="5dp"
    android:layout_marginBottom="5dp"
    android:layout_marginTop="5dp">
        <TextView
            android:id="@+id/x_memtxtlay"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:textColor="#000000"
            android:textSize="22sp"
            android:text="sdasdasd"
            android:layout_toLeftOf="@+id/x_memlay"
            android:paddingLeft="3dp">
        </TextView>
<FrameLayout  android:id="@+id/x_memlay"
            android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_alignParentRight="true"
            android:layout_centerVertical="true">
     <EditText
            android:id="@+id/x_memamtlay"
            android:layout_height="40dp"

            android:layout_width="70dp"
            android:inputType="number"
            android:singleLine="true"
            android:paddingLeft="2dp"
            android:paddingRight="2dp"

            android:visibility="gone">
        </EditText>

        <TextView
            android:id="@+id/x_memamt"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:textColor="#000000"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:textSize="20sp"

        </TextView>
</FrameLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:17:36.780

在您的代码中，您正在编写

```
 EditText.setVisibility(View.GONE); 
```

写

```
 EditText.setVisibility(View.INVISIBLE); 
```

那么您不需要更改您的 XML 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:17:55.923

在最近的几次更新中，XML 出现了一些问题。您需要输入值才能将您想要的内容一一移动到您想要的位置。

# tridion2009 - 是否可以将功能区工具栏按钮的值返回到简单的文本字段？

> ID：10309622
> 
> 赞同：1
> 
> 时间：2012-04-25T05:04:54.757
> 
> 标签：tridion2009, tridion

我添加了一个按钮来将弹出页面中的值返回到 RTF 字段。但我目前的要求是将值添加到简单的文本字段中。谁能给我建议一种方法，如何将值返回到简单的文本字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T12:34:09.323

Currently you can't do that in supported way because there are no API to get access to Field Builder control from the View. If you'll decide to workaround this (accessing private properties, some other hacks), you can achieve this by using Field Builder control API. For example:

```
var field = fieldBuilder.getFocusField(); // returns currently focused field object
field.getValues();  // returns field values (might be more than 1 in case of multivalue fields
field.setValues([...]); // sets field values 
```

But be careful, that by clicking on the Ribbon Toolbar Button focus will be moved out from the field to the Ribbon Toolbar Button. So `fieldBuilder.getFocusField()` will return `null`. One of the possible solutions to listen for the `"focusmove"` event on Field Builder control to track focused fields.

# ubuntu - 通过 SES 从托管在 Micro-EC2 上的 AWS 上的 Drupal 发送电子邮件

> ID：10309624
> 
> 赞同：0
> 
> 时间：2012-04-25T05:05:02.470
> 
> 标签：ubuntu, amazon-ec2, amazon-web-services, postfix-mta, amazon-ses

所以我按照这里的说明进行操作：

[http://www.linnovate.net/blog/setup-postfix-work-amazon-ses](http://www.linnovate.net/blog/setup-postfix-work-amazon-ses)

但我无法让它工作:(

这是我的后缀日志：[http ://dl.dropbox.com/u/14188709/mail.log](http://dl.dropbox.com/u/14188709/mail.log)

有人对我有一些故障排除的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:20:54.970

您引用的相当简短的说明以及您提供的日志表明可能涉及几个问题 - 我将按如下方式处理：

*   我假设您已经这样设置了[Amazon SES](http://aws.amazon.com/ses/)，即验证了您的电子邮件地址（必需）并请求了生产访问权限，如果需要的话（可选；否则请参阅[设置 Amazon SES](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/InitialSetup.html)）
*   从有关主题的原始文档开始，其中已经包含了一些必需的额外步骤（例如，与 CA 证书和服务启动等有关）：

    *   第一步是[设置安全隧道](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/SMTP.MTAs.SecureTunnel.html)

        *   请注意，[Postfix](http://www.postfix.org/)可能实际上不需要这个，因为它本身提供了一个本地 TLS 包装器（请参阅[在 Postfix SMTP 服务器中启用 TLS](http://www.postfix.org/TLS_README.html#server_enable)），请参阅相应的 SES 说明：

            > **重要的**
            > 
            > 一些 MTA 具有对 TLS Wrapper 的本机支持，而另一些则没有。检查您的邮件服务器的文档以确定它是否支持 TLS Wrapper。如果它支持 TLS Wrapper，那么您不需要设置安全隧道。

            **但是**，我自己还没有尝试过，很多人似乎只是简单地使用 SES 和[stunnel](http://www.stunnel.org/)运行 Postfix 。

    *   最后一步是[将 Amazon SES 与 Postfix 集成](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/SMTP.MTAs.Postfix.html)

原则上，这应该会通过 SMTP 集成为 SES 生成一个完全工作的 Postfix；如果没有，您需要进一步挖掘，我认为 AWS 团队[对 SES 隧道上的论坛主题证书问题](https://forums.aws.amazon.com/thread.jspa?threadID=84846)的回复提供了可能出现问题的最佳摘要，无论线程主题显然过于受限。

*   此外，darignac[对他自己问题的解决方案](https://forums.aws.amazon.com/message.jspa?messageID=311774#311774)实际上可能确实适用于更广泛的受众：

    > 我的 ec2 机器运行的是 Ubuntu 11.10，我从包管理器安装了 stunnel（因为这通常是正确的方法）。这不知何故是行不通的。我在另一台运行 Amazon linux 的 ec2 机器上检查了 stunnel，它在那里开箱即用。所以我下载了 stunnel，在 Ubuntu 中手动编译和安装。必须创建 /usr/local/var/run/stunnel 以启用 stunnel 将其 pidfile 放在那里。[...]

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T22:23:48.597

您不再需要执行上述任何操作。我在 EC2 Small 上维护我的 Drupal 站点，它的数据库位于 RDS 实例上，并且运行良好。但是您必须下载并启用一个名为 SMTP 的 Drupal 模块，它会拦截使用 Postfix 或您最初设置的任何内容通过 EC2 系统发出的所有邮件，并通过 SMTP 将其发送出去。它具有 SSL 或 TLS 的可配置选项，并支持“SMTP 身份验证”。

对我有用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T19:59:38.360

您不再需要使用 stunnel。

查看亚马逊的教程： [http ://docs.amazonwebservices.com/ses/latest/DeveloperGuide/SMTP.MTA.Postfix.html](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/SMTP.MTAs.Postfix.html)

# g++ - 带有 TBB 的 Geany 的 C++ 编译和构建命令

> ID：10309625
> 
> 赞同：0
> 
> 时间：2012-04-25T05:05:09.890
> 
> 标签：g++, tbb, geany

我想知道**使用 g++ 编译器的带有 TBB 的 Geany 的 C++ 编译和构建命令是**什么。几天来我一直在与 Geany 斗争，但我无法让它发挥作用。

**注意：**在我的 C++ 代码中，我包含了必要的标头并验证了语法是否正确。

**现在控制台正在向我抛出这个：**

E:\Applications\MinGW\bin\g++ "test.cpp" -Wall -o "test" -ltbb -lrt -std=c++0x （在目录：\fs.ece.uprm.edu\students\s802068090\桌面）在来自 E:/Applications/tbb/parallel_for.h:36:0 的文件中，来自 test.cpp:2: E:/Applications/tbb/tbb_exception.h:340:5: 错误：命名空间中的“exception_ptr” “std”未命名类型 E:/Applications/tbb/tbb_exception.h:356:31：错误：命名空间“std”中的“exception_ptr”未命名类型 E:/Applications/tbb/tbb_exception.h:356 :51: 错误：ISO C++ 禁止声明没有类型的“src”[-fpermissive] E:/Applications/tbb/tbb_exception.h：在成员函数“void tbb::internal::tbb_exception_ptr::throw_self()”中： E:/Applications/tbb/tbb_exception.h:353:26: 错误：'rethrow_exception' 不是'std' 的成员 E:/Applications/tbb/tbb_exception.h:353:49: 错误: 'my_ptr' 未在此范围内声明 E:/Applications/tbb/tbb_exception.h: 在构造函数中'tbb::internal::tbb_exception_ptr::tbb_exception_ptr(const int&)': E:/Applications/tbb/tbb_exception.h:356:59: 错误：类 'tbb::internal::tbb_exception_ptr' 没有任何名为 'my_ptr' 的字段 E:/Applications/tbb/tbb_exception.h ：在构造函数'tbb::internal::tbb_exception_ptr::tbb_exception_ptr(const tbb::captured_exception&)'中：E:/Applications/tbb/tbb_exception.h:357:59：错误：类'tbb::internal::tbb_exception_ptr'没有任何名为“my_ptr”的字段 E:/Applications/tbb/tbb_exception.h:357:66: 错误：“copy_exception”不是“std”的成员 编译失败。my_ptr' 未在此范围内声明 E:/Applications/tbb/tbb_exception.h: 在构造函数中 'tbb::internal::tbb_exception_ptr::tbb_exception_ptr(const int&)': E:/Applications/tbb/tbb_exception.h:356 :59: 错误：类 'tbb::internal::tbb_exception_ptr' 没有任何名为 'my_ptr' 的字段 E:/Applications/tbb/tbb_exception.h: 在构造函数 'tbb::internal::tbb_exception_ptr::tbb_exception_ptr(const tbb::captured_exception&)': E:/Applications/tbb/tbb_exception.h:357:59: 错误：类 'tbb::internal::tbb_exception_ptr' 没有任何名为 'my_ptr' 的字段 E:/Applications/tbb/ tbb_exception.h:357:66：错误：“copy_exception”不是“std”的成员编译失败。my_ptr' 未在此范围内声明 E:/Applications/tbb/tbb_exception.h: 在构造函数中 'tbb::internal::tbb_exception_ptr::tbb_exception_ptr(const int&)': E:/Applications/tbb/tbb_exception.h:356 :59: 错误：类 'tbb::internal::tbb_exception_ptr' 没有任何名为 'my_ptr' 的字段 E:/Applications/tbb/tbb_exception.h: 在构造函数 'tbb::internal::tbb_exception_ptr::tbb_exception_ptr(const tbb::captured_exception&)': E:/Applications/tbb/tbb_exception.h:357:59: 错误：类 'tbb::internal::tbb_exception_ptr' 没有任何名为 'my_ptr' 的字段 E:/Applications/tbb/ tbb_exception.h:357:66：错误：“copy_exception”不是“std”的成员编译失败。tbb_exception_ptr::tbb_exception_ptr(const int&)': E:/Applications/tbb/tbb_exception.h:356:59: 错误：类 'tbb::internal::tbb_exception_ptr' 没有任何名为 'my_ptr' 的字段 E:/Applications /tbb/tbb_exception.h：在构造函数 'tbb::internal::tbb_exception_ptr::tbb_exception_ptr(const tbb::captured_exception&)'中：E:/Applications/tbb/tbb_exception.h:357:59：错误：类 'tbb: :internal::tbb_exception_ptr' 没有任何名为 'my_ptr' 的字段 E:/Applications/tbb/tbb_exception.h:357:66: 错误：'copy_exception' 不是 'std' 的成员 编译失败。tbb_exception_ptr::tbb_exception_ptr(const int&)': E:/Applications/tbb/tbb_exception.h:356:59: 错误：类 'tbb::internal::tbb_exception_ptr' 没有任何名为 'my_ptr' 的字段 E:/Applications /tbb/tbb_exception.h：在构造函数 'tbb::internal::tbb_exception_ptr::tbb_exception_ptr(const tbb::captured_exception&)'中：E:/Applications/tbb/tbb_exception.h:357:59：错误：类 'tbb: :internal::tbb_exception_ptr' 没有任何名为 'my_ptr' 的字段 E:/Applications/tbb/tbb_exception.h:357:66: 错误：'copy_exception' 不是 'std' 的成员 编译失败。/Applications/tbb/tbb_exception.h：在构造函数'tbb::internal::tbb_exception_ptr::tbb_exception_ptr(const tbb::captured_exception&)'中：E:/Applications/tbb/tbb_exception.h:357:59：错误：类' tbb::internal::tbb_exception_ptr' 没有任何名为 'my_ptr' 的字段 E:/Applications/tbb/tbb_exception.h:357:66: 错误：'copy_exception' 不是 'std' 的成员 编译失败。/Applications/tbb/tbb_exception.h：在构造函数'tbb::internal::tbb_exception_ptr::tbb_exception_ptr(const tbb::captured_exception&)'中：E:/Applications/tbb/tbb_exception.h:357:59：错误：类' tbb::internal::tbb_exception_ptr' 没有任何名为 'my_ptr' 的字段 E:/Applications/tbb/tbb_exception.h:357:66: 错误：'copy_exception' 不是 'std' 的成员 编译失败。

# vba - 附加数据抓取宏，将页面打印到文件

> ID：10309636
> 
> 赞同：1
> 
> 时间：2012-04-25T05:06:50.240
> 
> 标签：vba, screen-scraping, extra

我使用 Attachmate Extra 录制了以下宏！X-treme 在工作中。我相信我使用的是 9.0 版。我正在尝试从跨越各种屏幕的报告中“抓取”数据，并将每一页打印到 .txt 或 .prn 文件中。呈现的代码会逐步完成所有必要的屏幕，但无法将结果输出到我想在 MS Excel 中操作的所需文件。

我是 Attachmate 的新手，因此我们将不胜感激。只是添加几行代码来指导输出还是这里有更大的图景？非常感谢您的帮助！

```
' Global variable declarations
Global g_HostSettleTime%
Global g_szPassword$

Sub Main()
'--------------------------------------------------------------------------------
' Get the main system object
     Dim Sessions As Object
 Dim System As Object
 Set System = CreateObject("EXTRA.System")  ' Gets the system object
 If (System is Nothing) Then
    Msgbox "Could not create the EXTRA System object.  Stopping macro playback."
    STOP
 End If
 Set Sessions = System.Sessions

 If (Sessions is Nothing) Then
    Msgbox "Could not create the Sessions collection object.  Stopping          
            macro playback."
    STOP
 End If
     '--------------------------------------------------------------------------------
     ' Set the default wait timeout value
 g_HostSettleTime = 3000        ' milliseconds

 OldSystemTimeout& = System.TimeoutValue
 If (g_HostSettleTime > OldSystemTimeout) Then
    System.TimeoutValue = g_HostSettleTime
 End If

    ' Get the necessary Session Object
 Dim Sess0 As Object
 Set Sess0 = System.ActiveSession
 If (Sess0 is Nothing) Then
    Msgbox "Could not create the Session object.  Stopping macro playback."
    STOP
 End If
 If Not Sess0.Visible Then Sess0.Visible = TRUE
 Sess0.Screen.WaitHostQuiet(g_HostSettleTime)

    ' This section of code contains the recorded events
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf11>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf10>") 
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf8>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf3>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)
Sess0.Screen.Sendkeys("<Pf3>")  
Sess0.Screen.WaitHostQuiet(g_HostSettleTime)

System.TimeoutValue = OldSystemTimeout

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:08:43.467

我只会使用 Excel VBA 和 Attachmate Extra！对象库将所需的值拉入 Excel 而不是中间文件。

特别是`getstring`函数 ( `Function GetString(Row As Integer, Col As Integer, Length As Integer, [Page]) As String`) 并将值拖放到 Excel 工作表中。

请参阅下面的 VBA 代码插入，这是一个简单的文本拉取。

要在 VBA 窗口中将 Attachmate Extra Object Library 添加到 Excel 中，请选择工具 > 参考 > 然后从列表中选择 Attachmate Extra Object Library 或浏览项目。

您可以通过 Excel VBA 对象浏览器查看对象、属性和方法。

```
Sub MF_Status_Test()

    ' Test Order Lookup Macro
    Set Sys = GetObject("C:\Program Files\E!PC\Sessions\Mainframe.EDP")

    Set MyScreen = Sys.Screen

    Do While ActiveCell.Offset(0, 0).Value <> ""
        Let Order = ActiveCell.Offset(0, 0).Value
        MyScreen.SendKeys (Order)

        MyScreen.SendKeys ("<enter>")
        Found1st = MyScreen.WaitHostQuiet(150)

        Dt = MyScreen.getstring(7, 11, 8)
        Let ActiveCell.Offset(0, 1).Range("A1") = Dt
        Let Dt = ""

        ST = MyScreen.getstring(6, 11, 2) & MyScreen.getstring(17, 12, 3)
        Let ActiveCell.Offset(0, 2).Range("A1") = ST
        Let ST = ""

        Amt = MyScreen.getstring(3, 53, 10)
        Let ActiveCell.Offset(0, 3).Range("A1") = Trim(Amt)
        Let Amt = ""

        MyScreen.SendKeys ("<PF8>")

        Dt = MyScreen.getstring(7, 11, 8)
        Let ActiveCell.Offset(0, 4).Range("A1") = Dt
        Let Dt = ""

        ST = MyScreen.getstring(6, 11, 2) & MyScreen.getstring(17, 12, 3)
        Let ActiveCell.Offset(0, 5).Range("A1") = ST
        Let ST = ""

        Amt = MyScreen.getstring(3, 53, 10)
        Let ActiveCell.Offset(0, 6).Range("A1") = Trim(Amt)
        Let Amt = ""

        Found1st = MyScreen.WaitHostQuiet(150)

        ActiveCell.Offset(1, 0).Range("A1").Select
    Loop
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T14:39:23.520

最好的方法是连接到 Attachmate EXTRA！来自 Excel 的会话，而不是相反。

安装 Attachmate 对象库可能有助于调试等，但不是必需的。

这是一个基本的 VBA 模块，您无需安装对象库即可从 Excel 运行，这将允许您将密钥发送到当前打开的 EXTRA！会话并从屏幕读取值：

```
Sub GetData()

Dim Sessions As Object
Dim System As Object
Dim Sess0 As Object

'Extra Objects
Set System = CreateObject("EXTRA.System")
Set Sessions = System.Sessions
Set Sess0 = System.ActiveSession
If Sess0 Is Nothing Then
    MsgBox ("Could not create the Session object.  Stopping macro playback.")
    Exit Sub
End If

If Not Sess0.Visible Then Sess0.Visible = True
Sess0.Screen.WaitHostQuiet (3000)

'Now the active EXTRA! session is bound to the Object "Sess0", we can use it like a normal VBA object:

Sess0.Screen.SendKeys ("<Pf8>") ' Press F8
Sess0.Screen.WaitHostQuiet (1000) ' Wait for 1 second for the screen to stop updating (should really do this after every keypress that causes the mainframe to update)

Sess0.Screen.MoveTo 21, 28 ' Move the cursor to row 21, column 28.

Sess0.Screen.SendKeys ("<Pf9>") ' Press F9
Sess0.Screen.WaitHostQuiet (1000)

Sess0.Screen.SendKeys ("<Tab><Tab><Tab>Logon<Enter>") ' Press Tab 3 times, then type "Logon" and press enter
Sess0.Screen.WaitHostQuiet (1000)

Dim SomeString as String
SomeString = Sess0.Screen.GetString(1, 1, 20) ' Read the first 20 characters displayed on the screen to "SomeString"

Sess0.Connected = False ' Disconnect from the mainframe session

'Tidying up
System.TimeoutValue = OldSystemTimeout
Set Sessions = Nothing
Set System = Nothing
Set Sess0 = Nothing

End Sub 
```

# iphone - 如何将 iPhone 应用程序连接到 asmx soap 网络服务

> ID：10309639
> 
> 赞同：0
> 
> 时间：2012-04-25T05:07:33.423
> 
> 标签：iphone, asp.net, web-services, soap, asmx

我是堆栈溢出的新手。我正在通过我的 iPhone 应用程序进行 Web 服务连接，我对 iPhone 开发非常陌生，所以我通过以下链接尝试了一个示例，

```
http://www.leesilver.net/1/post/2011/08/calling-a-web-service-from-objective-c.html 
```

但我收到以下错误，`"property 'data' not found on object of type 'AppDelegate'"` 在 NSString *query = AppDelegate.data; 行

以下是我的完整代码，

```
-(IBAction)btnDone:(id)sender{

    recordResults = FALSE;
    NSString *query = AppDelegate.data; // Getting the error at this line
                                        //property 'data' not found on object of type 'AppDelegate'        
    query = [query stringByReplacingOccurrencesOfString:@"<" withString:@"&lt;"];
    query = [query stringByReplacingOccurrencesOfString:@">" withString:@"&gt;"];

    NSString *soapMessage = [NSString stringWithFormat:
                             @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                             "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
                             "<soap:Body>\n"
                             "<HelloWorld xmlns=\"http://tempuri.org/\">\n"
                             "<xmlIn>\n"
                             "<![CDATA[%@]]>\n"
                             "</xmlIn>\n"
                             "</HelloWorld>\n"
                             "</soap:Body>\n"
                             "</soap:Envelope>\n", query ];

    NSLog(@"%@",soapMessage);
    NSURL *url = [NSURL URLWithString:@"http://www.xxxxxxx.net/service.asmx"];
    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
    NSString *msgLength = [NSString stringWithFormat:@"%d",[soapMessage length]];
    [theRequest addValue:@"text/xml" forHTTPHeaderField:@"Content-Type"];
    [theRequest addValue:@"http://www.xxxxxxxxxxx.net/service.asmx?op=HelloWorld" forHTTPHeaderField:@"SOAPAction"];
    [theRequest addValue:msgLength forHTTPHeaderField:@"Content-Type"];
    [theRequest setHTTPMethod:@"POST"];
    [theRequest setHTTPBody:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]];
    NSLog(@"Message Length..%@",msgLength);

    NSURLConnection *theConnection = [[NSURLConnection alloc]initWithRequest:theRequest delegate:self];

    if(theConnection)
    {
        conWebData = [NSMutableData data];
    }
    else
    {
        NSLog(@"theConnection is NULL");
    }

}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [conWebData setLength:0];
}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"ERROR with theConnection");
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"DONE. Received Bytes:%d",[conWebData length]);
    NSString *theXML = [[NSString alloc]initWithBytes:[conWebData mutableBytes] length:[conWebData length] encoding:NSUTF8StringEncoding];
    NSLog(@"%@",theXML);

    xmlParser = [[NSXMLParser alloc]initWithData:conWebData];
    [xmlParser setDelegate:self];
    [xmlParser setShouldResolveExternalEntities:YES];
    [xmlParser parse];
}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if([elementName isEqualToString:@"HelloWorldResult"])
    {
        if(!soapResults)
        {
            soapResults = [[NSMutableString alloc]init];
        }
        recordResults = TRUE;
    }
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if(recordResults)
    {
        [soapResults appendString:string];
    }
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"HelloWorldResult"])
    {
        recordResults = FALSE;
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"" message:soapResults delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        soapResults = nil;
    }
} 
```

对此的任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:43:49.520

消息长度的标头是“Content-Length”而不是“Content-Type”，所以尝试：[theRequest addValue:msgLength forHTTPHeaderField:@"Content-Length"]; 而不是 [theRequest addValue:msgLength forHTTPHeaderField:@"Content-Type"]; 对于 REST Web 服务，应用程序服务器必须返回 XML 或 JSON 作为消息响应，请参阅我的“WebService”应用程序上的示例...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T06:46:04.747

嗨，我创建了一个对我有用的工具，[http://www.wsdl2code.com](http://www.wsdl2code.com)

```
SampleServiceProxy *proxy = [[SampleServiceProxy alloc]initWithUrl:@"YOUR
            URL" AndDelegate:self];

    [proxy GetDouble];
    [proxy GetEnum];
    [proxy getEnum:kTestEnumTestEnum2];
    [proxy GetInt16];
    [proxy GetInt32];
    [proxy GetInt64];
    [proxy GetString];
    [proxy getListStrings]; 
```

# java - 如何使用 Java 对 .docx 文件进行数字签名

> ID：10309640
> 
> 赞同：4
> 
> 时间：2012-04-25T05:07:36.670
> 
> 标签：java, apache-poi

如何使用 java 对 .docx 文件进行数字签名，签名应嵌入到 .docx 文件中。我使用了 Apache-poi API，但我无法对 .docx 文件进行数字签名。需要哪个 API 以及如何使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-03-08T17:13:30.383

尽管这个问题已经很老了，但我想创建参考答案以链接到。不久前我已经修改了[e-Id 小程序](https://github.com/e-Contract/eid-applet)代码，现在可以进行签名了。

查看[POI 文档](http://poi.apache.org/encryption.html#XML-based+formats+-+Signing+%28XML+Signature%29)以获取更多详细信息。

基本代码如下：

```
// loading the keystore - pkcs12 is used here, but of course jks & co are also valid
// the keystore needs to contain a private key and it's certificate having a
// 'digitalSignature' key usage
char password[] = "test".toCharArray();
File file = new File("test.pfx");
KeyStore keystore = KeyStore.getInstance("PKCS12");
FileInputStream fis = new FileInputStream(file);
keystore.load(fis, password);
fis.close();

// extracting private key and certificate
String alias = "xyz"; // alias of the keystore entry
Key key = keystore.getKey(alias, password);
X509Certificate x509 = (X509Certificate)keystore.getCertificate(alias);

// filling the SignatureConfig entries (minimum fields, more options are available ...)
SignatureConfig signatureConfig = new SignatureConfig();
signatureConfig.setKey(keyPair.getPrivate());
signatureConfig.setSigningCertificateChain(Collections.singletonList(x509));
OPCPackage pkg = OPCPackage.open(..., PackageAccess.READ_WRITE);
signatureConfig.setOpcPackage(pkg);

// adding the signature document to the package
SignatureInfo si = new SignatureInfo();
si.setSignatureConfig(signatureConfig);
si.confirmSignature();
// optionally verify the generated signature
boolean b = si.verifySignature();
assert (b);
// write the changes back to disc
pkg.close(); 
```

# c# - 反序列化 json 数组以列出 wp7

> ID：10309643
> 
> 赞同：3
> 
> 时间：2012-04-25T05:08:04.290
> 
> 标签：c#, .net, json, windows-phone-7

我需要从 json 中的子数组中获取数据，但它没有被转换为列表，下面是我的 json 字符串

{"responseCode":"0","re​​sponseObject":{"TotalRecords":25,"TotalDisplayRecords":25,"aaData":[{"InvoiceId":16573,"somedata..},"appCrmAccount(一些标题，总共 100 个这样的标题) amount":40086.00,"invoiceNumber":"12,accountName":"dfgAsfsadf","dueDateStr":"04/24/2012"(待进入列表的数据)

这是我的代码：

```
var djson = new DataContractJsonSerializer(typeof(dataList));
var stream = new MemoryStream(Encoding.UTF8.GetBytes(json));
dataList result = (dataList)djson.ReadObject(stream);//not getting execute 
```

请帮助..在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:53:05.313

试试这个

```
private void btnAdd_Click(object sender, RoutedEventArgs e)
{
    WebClient proxy = new WebClient();
    proxy.DownloadStringCompleted += new DownloadStringCompletedEventHandler(proxy_DownloadStringCompleted);
    proxy.DownloadStringAsync(new Uri(""));
} 
```

并且需要解析返回的 JSON 如下。在创建 DataContractJsonSrrializer 实例的参数中，我们传递了学生列表。

```
void proxy_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    Stream stream = new MemoryStream(Encoding.Unicode.GetBytes(e.Result));

    DataContractJsonSerializer obj = new DataContractJsonSerializer(typeof(List<Student>));
    List<Student> result = obj.ReadObject(stream) as List<Student>;
    lstStudents.ItemsSource = result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:58:29.630

您应该标记所有类和属性 DataContract 和 DataMember 属性。使用您的代码片段，我创建了如下内容：

```
[DataContract]
    public class Result
    {
        [DataMember(Name="responseCode")]
        public int Code { get; set; }

        [DataMember(Name="responseObject")]
        public ResponseObject Result { get; set; }
    }

    [DataContract]
    public class ResponseObject
    {
        [DataMember]
        public int TotalRecords { get; set; }

        [DataMember]
        public int TotalDisplayRecords { get; set; }

        [DataMember(Name="aaData")]
        public DataItem[] Data { get; set; }
    }

    [DataContract]
    public class DataItem
    {
        [DataMember(Name = "InvoiceId")]
        public int InvoiceId { get; set; }

        // Others properties
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T13:39:01.673

您究竟需要做的是将数组元素返回作为 DataContract 并将其子成员作为 DataMember 作为

```
[DataContract] 
public class mainresponse
 {
 [DataMember]
 public resultmap arrayelement { get; set; }
 }  
 [DataContract]
 public class resultmap 
{
 [DataMember] 
 public string substringhere { get; set; } 
 }     
 var djson = new DataContractJsonSerializer(typeof(Mainresponse));
 var stream = new MemoryStream(Encoding.UTF8.GetBytes(responsestring));
 mainresponse result = (mainresponse)djson.ReadObject(stream); 
```

它...

# objective-c - Cocoa - 如何格式化 XML 文件

> ID：10309644
> 
> 赞同：6
> 
> 时间：2012-04-25T05:08:14.930
> 
> 标签：objective-c, cocoa, nsxml

有没有一种方法可以在以编程方式创建 XML 文件时以正确的方式格式化它？

例如，如果我使用此代码创建一个简单的 XML 文件：

```
NSXMLElement *fallback_driver = [[NSXMLElement alloc] initWithName:@"fallback-driver"];

NSXMLElement *folder = [[NSXMLElement alloc] initWithName:@"folder"];
[folder setStringValue:[ads_make objectValueOfSelectedItem]];
NSXMLElement *filename =[[NSXMLElement alloc] initWithName:@"filename"];
[filename setStringValue:ads_driver_name_selected];

[fallback_driver addChild:folder];
[fallback_driver addChild:filename];

NSXMLElement* rootNode = [ads_user_printxml rootElement];
[rootNode addChild:fallback_driver]; 
```

当它运行时，我想按照下图中的注释部分输出，而不是实际的 XML（未注释）。

![xml代码](../Images/cddb2dd920f6dfdcb04af069992121c1.png)

如何以这种方式格式化 XML 文件？谢谢！

附言

感谢您的回答。但是，我想将我拥有的 NSXMLDocument 转换为 NSData 以保存...

我在尝试

```
NSData *newData = [[ads_user_printxml XMLDataWithOptions:NSXMLNodePrettyPrint]XMLData]; 
```

但是我收到警告说“'NSData'可能不会响应'-XMLData'，在我添加XMLDataWithOptions之前它工作正常。我还尝试了'XMLStringWithOptions'方法（如你所说 - 但认为数据更多适当），但产生了相同的警告。

有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T07:03:24.967

您可以使用以下命令输出格式良好的 XML 字符串：

```
NSString* string = [xmlNode XMLStringWithOptions:NSXMLNodePrettyPrint]; 
```

请注意，因为`NSXMLDocument`和`NSXMLElement`是 的子类`NSXMLNode`，所以您也可以对这些类执行此操作。

如果您想要`NSData`而不是字符串，只需执行以下操作：

```
NSData* xmlData = [xmlNode XMLDataWithOptions:NSXMLNodePrettyPrint]; 
```

# javascript - 仅使用纯 JavaScript（无 jQuery）将元素添加到给定纯文本 HTML 的 DOM

> ID：10309650
> 
> 赞同：59
> 
> 时间：2012-04-25T05:09:16.650
> 
> 标签：javascript, html, dom

我需要能够在给定 HTML 的原始文本字符串的页面中添加元素，包括任意数量的标签、属性等。理想情况下，我希望能够对任意格式良好的 html 字符串执行类似操作；

```
 var theElement = document.createElement("<h1 id='title'>Some Title</h1><span style="display:inline-block; width=100px;">Some arbitrary text</span>");

document.getElementById("body").appendChild(theElement); 
```

显然这不起作用，我正在寻找实现相同结果的好方法。如果可能，我想避免解析 HTML。我可以使用的工具受到严格限制，没有 jQuery 或外部包含，并且必须是跨浏览器并且向后兼容到 IE6。任何帮助都是巨大的。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-04-25T05:14:24.037

尝试分配给匿名元素的[`innerHTML`属性](https://developer.mozilla.org/en/DOM:element.innerHTML)[`children`](https://developer.mozilla.org/en/DOM/Element.children)并附加其每个.

```
function appendHtml(el, str) {
  var div = document.createElement('div');
  div.innerHTML = str;
  while (div.children.length > 0) {
    el.appendChild(div.children[0]);
  }
}
var html = '<h1 id="title">Some Title</h1><span style="display:inline-block; width=100px;">Some arbitrary text</span>';
appendHtml(document.body, html); // "body" has two more children - h1 and span. 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-07-19T21:46:27.610

您可以使用[`insertAdjacentHTML`](https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML)：

```
document.body.insertAdjacentHTML("beforeend", theHTMLToInsert); 
```

除了 之外还有其他选项`beforeend`，但听起来您想附加到元素，这就是这样`beforeend`做的。

现场示例：

```
document.body.insertAdjacentHTML("beforeend", "<div>This is the new content.</div>");
```

```
<div>Existing content in <code>body</code>.</div>
```

与使用`+=`with不同`innerHTML`，这不需要浏览器遍历元素的内容并创建一个 HTML 字符串来表示它，销毁这些元素（包括它们拥有的任何事件处理程序），并将它们替换为相同的元素加上你的补充。它只是添加您的添加内容，而现有内容保持不变。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-25T05:18:17.637

```
var el =  document.createElement("h1")
el.id="title";
el.innerHTML = "Some title";
document.body.appendChild(el);

var el2 =  document.createElement("span")
el2.style.display="block";
el2.style.width="100%";
el2.innerHTML = "Some arb text";
document.body.appendChild(el2); 
```

应该工作（小提琴：http: [//jsfiddle.net/gWHVy/](http://jsfiddle.net/gWHVy/)）

*编辑：* 这是您知道要插入的直接子项的属性的特殊情况的解决方案。看看在一般情况下有效[的 Aaron 解决方案。](https://stackoverflow.com/a/12042778)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-25T05:14:17.490

您可以获取要在其下插入 HTML 的元素的 elementId，并使用 innerHTML 添加 html。

```
document.getElementById("body").innerHTML = "<h1 id='title'>Some Title</h1><span>test</span>"; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-20T18:08:40.290

maerics 解决方案立即解决了我的问题。但是，我需要对其进行快速调整以完成我需要的操作。我有几个在点击时加载的脚本和样式表。我无法将脚本或样式表作为实际对象添加到 DOM 加载后。如果您将innerHTML 设置为document.body 以包含该`<link rel="stylesheet" />`部分，它只会打印文本并且浏览器不会将其识别为链接对象。为了解决这个问题，我使用了以下代码。

```
function appendHtml(el, str) {
  var div = document.createElement('div');
  div.innerHTML = str;
  while (div.children.length > 0) {
      if ( div.children[0].tagName == 'LINK' ) {
          // Create an actual link element to append later
          style = document.createElement('link');
          style.href = div.children[0].href;
          // append your other things like rel, type, etc
          el.appendChild(style);
      }
      el.appendChild(div.children[0]);
  }
} 
```

# jquery - jQuery在JSP中使用多个参数自动完成

> ID：10309651
> 
> 赞同：2
> 
> 时间：2012-04-25T05:09:20.957
> 
> 标签：jquery, jsp, autocomplete, drop-down-menu, url-parameters

我使用 JSP，我想传递两个参数以及 jquery 自动完成功能。我的第二个参数是选择框的值。我使用了以下代码，但只获得了选项中的第一个值。我检查了返回选择框值的函数，它只在页面加载时被调用。有什么办法可以解决我的问题吗？

```
 /* inside my page */

        jQuery(function() {
    $("#branch").autocomplete("getbranchdetails.jsp", {
        extraParams: {
            filter: getDropdownValue()
        }
    });
});

    function getDropdownValue() {
    var compId=document.getElementById("company").value;
    return compId;
    }

        /* inside getbranchdetails.jsp */

        <%
        String company=request.getParameter("filter");

        System.out.println("company :"+company);

        getbranchdetails db=new getbranchdetails();
        String query = request.getParameter("q");
        List<String> agent = db.getData(query,brtype);
        Iterator<String> iterator = agent.iterator();
        while(iterator.hasNext()) {
        String agents = (String)iterator.next();
        out.println(agents);
        }
        %> 
```

我也尝试了以下链接，但没有运气 [http://123code.blogspot.in/2010/09/jquery-autocomplete-plugin-using.html](http://123code.blogspot.in/2010/09/jquery-autocomplete-plugin-using.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:03:01.170

改变这个：

```
$("#branch").autocomplete("getbranchdetails.jsp");
extraParams: {
    filter: getDropdownValue()
}
}); 
```

至

```
$("#branch").autocomplete("getbranchdetails.jsp", {
    extraParams: {
        filter: getDropdownValue()
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:03:34.220

尝试这个...

```
$('#branch').autocomplete('getbranchdetails.jsp', {
    mustMatch: false
});

$('#branch').setOptions({
    extraParams:{filter: function(){return $('#company').val();}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:41:24.510

看看这个 jsFiddle... [http://jsfiddle.net/PTeMy/](http://jsfiddle.net/PTeMy/)

在自动完成中，源可以定义为函数调用。使用它，您应该能够根据需要构建自动完成列表。

例如...

HTML

```
<input id="auto" type="text">

must contain....
<select>
    <option value="a">a</option>        
    <option value="b">b</option>        
    <option value="c">c</option>        
    <option value="d">d</option>        
    <option value="e">e</option>        
    <option value="f">f</option>        
    <option value="g">g</option>        
</select>​ 
```

脚本

```
$(document).ready(function(){
    $('#auto').autocomplete({
        source: getTags()
    });
});

function getTags(){
        var tags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];   

    tags = $.grep(tags, function(t) {
        return t.indexOf($('select').val()) > 0;
    });

    return tags;
}

​ 
```

# iphone - 不会让我将浮点数添加到 NSMutableArray

> ID：10309658
> 
> 赞同：0
> 
> 时间：2012-04-25T05:10:02.247
> 
> 标签：iphone, objective-c, cocoa-touch

目前，我正在尝试实现一种将两个 UITextField 值（在用户输入后）存储在两个单独的数组中的方法。但是，当我使用控制台运行程序时，每个数组的 NSLog 返回空值（没有插入浮点数）。

我尝试切换到 int，但它说存在不兼容问题。有人知道我要去哪里错了吗？

```
-(IBAction)logSet:(id)sender {
    [repsUsed insertObject:[reps.text floatValue] atIndex:0];
    [weightUsed insertObject:[weight.text floatValue] atIndex:0];

    NSLog(@"%@", repsUsed);
    NSLog(@"%@", weightUsed); 
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T05:15:13.653

NSMutable 只能添加对象和浮点数，int 不是用于插入浮点值的对象类型，使其成为对象

> [repsUsed insertObject:[NSNumber numberWithFloat:[reps.text floatValue]] atIndex:0];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:15:13.647

您不能将 float 值或 int 值直接插入到数组中。相反，您可以直接插入字符串值。当您阅读时，您可以将其转换为浮点数。

尝试使用

```
[repsUsed insertObject:reps.text atIndex:0];
[weightUsed insertObject:weight.text atIndex:0]; 
```

当您读取数组时。你可以这样使用。

```
float val1 = [[repsUsed objectAtIndex:0]floatValue];
float val2 = [[weightUsed objectAtIndex:0]floatValue]; 
```

希望这可以帮助！！！

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-25T05:15:58.153

试试这个

```
 [repsUsed addObject:[reps.text floatValue]];
 [weightUsed addObject:[weight.text floatValue]]; 
```

# c# - 使用 POST 在 HTTP 服务器上上传文件为 HttpFileCollection 提供 0？

> ID：10309659
> 
> 赞同：1
> 
> 时间：2012-04-25T05:10:05.213
> 
> 标签：c#, asp.net, .net, http-post

我正在尝试使用 POST 在 HTTP 服务器上上传文件，但是当我调用它时

**uploadFile.Count = 0** amd 不进入 if 语句。文件路径正确。

**客户代码**

```
 public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            string fileToUpload = Server.MapPath("~/Files/Ricky_Martin_Livin_la.mp3");
            string uploadUrl = "http://localhost/soundcheck/uploadfiles.aspx";
            //string uploadUrl = "http://10.0.2.2/musicapp/handle_upload.php";
            FileStream rdr = new FileStream(fileToUpload, FileMode.Open);
            HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uploadUrl);
            req.Method = "POST"; // you might use "POST"
            req.ContentLength = rdr.Length;
            req.AllowWriteStreamBuffering = true;

            Stream reqStream = req.GetRequestStream();

            byte[] inData = new byte[rdr.Length];

            // Get data from upload file to inData 
            int bytesRead = rdr.Read(inData, 0, int.Parse(rdr.Length.ToString()));

            // put data into request stream
            reqStream.Write(inData, 0, int.Parse(rdr.Length.ToString()));

            rdr.Close();
            req.GetResponse();

            // after uploading close stream 
            reqStream.Close();
        }
    } 
```

**服务器代码**

```
using System;
using System.Collections;
using System.IO;
using System.Data;
using System.Web;
using System.Text;
using System.Web.Security;

public partial class uploadfiles : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            LogInFile("First");
            HttpFileCollection uploadFile = Request.Files;
            LogInFile("Second");
            LogInFile(uploadFile.Count.ToString());
            if (uploadFile.Count > 0)
            {
                HttpPostedFile postedFile = uploadFile[0];
                LogInFile("Thrid");
                System.IO.Stream inStream = postedFile.InputStream;
                LogInFile("Forth");
                byte[] fileData = new byte[postedFile.ContentLength];
                LogInFile("Fifth");
                inStream.Read(fileData, 0, postedFile.ContentLength);
                LogInFile("Sixth");
                postedFile.SaveAs(Server.MapPath("Data") + "\\" + postedFile.FileName);
            }        
        }
        catch (Exception ex)
        { 
            StringBuilder sb = new StringBuilder();
            sb.AppendLine("Message : " +ex.Message);
            sb.AppendLine("Source : " + ex.Source);
            sb.AppendLine("StackTrace : " + ex.StackTrace);
            sb.AppendLine("InnerException : " + ex.InnerException);
            sb.AppendLine("ToString : " + ex.ToString());

            LogInFile(sb.ToString());
        }
    }
    public void LogInFile(string str)
    {
        StringBuilder sb = new StringBuilder();
        using (StreamReader sr = new StreamReader(Server.MapPath("Data") + "\\expfile.txt"))
        {            
            sb.AppendLine("= = = = = =");
            sb.Append(sr.ReadToEnd());
            sb.AppendLine();
            sb.AppendLine();
        }
        sb.AppendLine(str);
        using (StreamWriter outfile = new StreamWriter(Server.MapPath("Data") + "\\expfile.txt"))
        {
            outfile.Write(sb.ToString());
        }
    }

} 
```

在服务器代码中，我编写这些日志来跟踪哪一行是否有任何错误或错误。

在服务器代码中，它给出 uploadFile.Count = 0 并且不进入 在调试模式下，客户端代码成功执行，但在页面上给出此消息

您可以从服务器/客户端代码中看到.. 不涉及数据库。

![在此处输入图像描述](../Images/64d07bbfa1ebeef616da5245c4af343d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:36:14.983

我认为您提供的数据库凭据不正确。

# html - rails 和 html，如何从表单中检索参数

> ID：10309664
> 
> 赞同：0
> 
> 时间：2012-04-25T05:10:27.360
> 
> 标签：html, ruby-on-rails, forms, params

我有关注

```
<%= form_tag lessons_path, :method => 'get', :name => "filter_form" do %>
  <div class="btn-group" data-toggle-name="is_private" data-toggle="buttons-radio" >
  <button value="0" class="btn" data-toggle="button">Public</button>
  <button value="1" class="btn" data-toggle="button">Private</button>
</div> 
```

当用户单击其中任何一个按钮时，表单会提交并转到我的课程#index。我怎样才能得到用户点击的值？我知道 params[:something] 通常来自 url 中的 GET 请求，但是在这种情况下呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T05:22:12.333

只需提供您的按钮`name`属性：

```
<%= form_tag lessons_path, :method => 'get', :name => "filter_form" do %>
  <div class="btn-group" data-toggle-name="is_private" data-toggle="buttons-radio" >
    <button name="public"  type="submit" value="0" class="btn" data-toggle="button">Public</button>
    <button name="private" type="submit" value="1" class="btn" data-toggle="button">Private</button>
  </div>
<% end %> 
```

然后`params`像往常一样在您的控制器中检查：

```
if(params[:public])
    # public has pressed
elsif(params[:private])
    # private was pressed
else
    # Hmm, someone is trying to cause trouble.
end 
```

您会注意到，我在 s 中添加`type="submit"`了`<button>`一些浏览器`type="submit"`作为默认值（根据[标准](http://www.w3.org/TR/html401/interact/forms.html#h-17.5)）和一些使用`type="button"`，因此最好是明确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:12:26.120

在 rails 中，params 哈希将包含所有已提交/传递到页面的元素。这包括 GET 参数和 POST 参数。您应该使用[复选框](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-check_box)（或单选按钮）来表示此类数据。如果您的字段存在于数据库中，那么您应该执行以下操作：

```
<br><%= f.check_box :is_private %> Private 
```

然后，您可以使用`params[:is_private]`

如果你想使用按钮，那么我建议创建两个 url 来切换复选框的状态。否则，您将不得不依赖 JavaScript 来更改字段。

如果你想使用按钮，但也使用相同的更新 url，那么你需要按下按钮来切换复选框的状态，有 JQuery 插件可以做到这一点（一个例子是[http://widowmaker.kiev .ua/复选框/](http://widowmaker.kiev.ua/checkbox/)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T05:55:39.220

一个表单只会提交一个动作。

使用 i18n 定义按钮文本，然后检查控制器操作中提交参数的 i18n 值

例如在你的表格中

```
<%= submit_tag I18n.t('checkout.button.place_order'), :class => "submit" %> 
```

这同样适用于 f.submit 按钮。

然后在你的控制器中

```
if params[:commit] == I18n.t('checkout.button.place_order')
  Do something
else
  Do something else
end 
```

在您的 en.yml 或任何定义实际文本的内容中

```
en:
  checkout:
    button:
      place_order: 'Place Order' 
```

显然只是调整以满足您的需求

通过使用 i18n，您可以轻松更改 i18n 定义中按钮上的文本，而不会影响您的控制器逻辑，并且仍然可以处理您希望使用的任何国际化/翻译

使用它，您可以在单个表单上设置任意数量的按钮，然后在控制器操作中添加您需要的任何条件逻辑

**更新** I18n 是国际化的缩写（单词中有 18 个字符 :)），只需在名为 en.yml 的语言环境文件夹中创建一个文件，然后以我上面描述的格式定义您需要的任何内容，您就可以开始了。使用 t 在任何需要它们的地方引用 I18n 变量。helper 看看这个 railscast 以获得更详细的解释 [http://railscasts.com/episodes/138-i18n](http://railscasts.com/episodes/138-i18n)

**更新 2**回应 mu is too short 的评论如下

> 为什么不只添加一个名称属性？然后您可以使用独立于其内容的按钮。请记住，a 可以包含嵌入的 HTML，这在 param 中没有多大意义

使用 i18n 会使该注释完全无效，因为根本不检查文本。你可以随心所欲地制作文本，使用 I18n 确实是一个好习惯。请注意，在上面的示例中，您正在检查控制器“checkout.button.place_order”中的常量，而不是定义为“Place Order”的值。

# php - 我拥有的移动客户端的 OAuth 2

> ID：10309667
> 
> 赞同：3
> 
> 时间：2012-04-25T05:11:03.123
> 
> 标签：php, api, authentication, oauth-2.0, bcrypt

我有一个 LAMP-stack webapp，它公开了一个 REST API。目标是拥有 3 层 - 数据库、服务 (REST) 和多个前端客户端（网站、Android、iPhone）。目前，这些层都在同一个盒子上。网站使用 API 调用服务逻辑进行 CRUD 操作，移动客户端尚未构建。

我正在使用 PHP bcrypt 实现来存储用户凭据。这在设计上很慢/ CPU 密集型。每个 API 调用都需要一个用户名/密码对以及 API 参数。这将阻碍大规模扩展，因为每次 API 调用都会计算哈希值。

所以，我一直在寻找替代方案。OAuth 2.0 使用不昂贵的可撤销令牌，但我读过的文章似乎表明该协议的主要用例是让第三方访问我的 API。这不太适合我的模型，例如，移动客户端归我所有。

1.  OAuth 是否仅适用于第三方，或者公司通常会将其移动客户端添加为自己的 API 的 OAuth 消费者？

2.  是否可以将共享密钥与我发布到应用市场的 Android/iPhone 应用捆绑在一起，以便它们能够立即与 API 关联？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T06:38:42.373

oAuth v2 ( [http://oauth.net/2/](http://oauth.net/2/) ) 有许多身份验证模式（总共 6 个），尽管最终用户授权 3rd 方应用程序的“3 条腿”场景是最明显的，但它绝对是一个好方法，甚至如果您拥有这些应用程序。

您可以使用两条腿的流程，例如受信任的凭证流程[https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-25#section-4.3](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-25#section-4.3)。基本上，在此您信任客户端代码（您编写它）来接收和查看用户的用户名和密码并将其发送到您的 API。完成此操作后，oAuth 令牌将照常出现，密码无需再次通过连接。

关于共享密钥的第二个问题 - 如果您的应用程序始终需要用户登录，那么您可能能够避免将共享密钥放入应用程序，因为您的身份验证依赖于用户凭据（在这种情况下，只需在应用程序中放置一个 ID，以便您知道它是哪个版本）。如果应用程序在某些模式下无需用户登录即可运行，那么您可能别无选择，只能至少在初始化步骤中嵌入某种秘密。

# c++ - 编译任何东西的奇怪错误，VS 2010：致命错误 LNK1120：1 未解决的外部

> ID：10309670
> 
> 赞同：0
> 
> 时间：2012-04-25T05:11:16.003
> 
> 标签：c++, visual-studio-2010

我最近为我的家庭作业安装了 VS 2010，但我无法让它编译和运行我写的任何东西。如果我选择了一个空项目，无论我写什么代码，我都会得到这个错误，即使代码是错误的，如果我选择了一个非空项目，它不会给出任何错误，即使我的代码是完整的错误的。我在 Windows 7 Ultimate x86 上，它是相当旧的安装，所以我认为这可能是操作系统问题。所以我重新安装了 Windows，但这次是 x64。仍然没有变化，同样的该死的错误。我不知道该怎么办，我已经在互联网上搜索了几个小时，但我找不到答案。我在这里看到过类似的问题，但他们的回答对我没有帮助。

整个错误：

```
1>------ Build started: Project: newproject, Configuration: Debug Win32 ------
1>Build started 25/04/2012 10:27:00 AM.
1>InitializeBuildStatus:
1>  Touching "Debug\newproject.unsuccessfulbuild".
1>ManifestResourceCompile:
1>  All outputs are up-to-date.
1>LINK : error LNK2001: unresolved external symbol _mainCRTStartup
1>C:\Users\Milad\documents\visual studio 2010\Projects\newproject\Debug\newproject.exe : fatal error LNK1120: 1 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.85
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

编码：

```
#include <iostream>
using namespace std;
int main()
{
    cout<<"test";
        return 0;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:03:25.703

您需要链接到 c 运行时，可能是 msvcr100。我手头没有 VC 2010，也有一段时间没有使用它，但通常默认情况下你会得到它。

也许你应该选择win32控制台项目，而不是空项目：http: [//msdn.microsoft.com/en-us/library/ms235629.aspx](http://msdn.microsoft.com/en-us/library/ms235629.aspx)

这里有更多关于 C 运行时的信息：http: [//msdn.microsoft.com/en-us/library/abx4dbyh.aspx](http://msdn.microsoft.com/en-us/library/abx4dbyh.aspx)

# calendar - 如何创建泰米尔语日历

> ID：10309671
> 
> 赞同：4
> 
> 时间：2012-04-25T05:11:17.757
> 
> 标签：calendar, tamil

我想用泰米尔语创建一个日历。我进行了广泛的搜索，但所有结果都显示了如何将日历中的文本从其他语言转换为泰米尔语。但我想为泰米尔语年创建整个泰米尔语日历。我非常感谢从头开始用泰米尔语创建日历的任何帮助。

我需要帮助的另一项任务是将英语日期转换为等效的泰米尔语日期。

# java - Android Checkable ListView 项目保持选中状态

> ID：10309674
> 
> 赞同：0
> 
> 时间：2012-04-25T05:11:34.397
> 
> 标签：java, android, listview

问题：当我清除并重新填充我的 ListView 时，如果以前检查过某个项目，那么也会检查同一索引处的项目。如果添加到适配器的元素数量 < 先前检查项目的索引，则不检查任何内容。

我已经尝试阻止使用 convertView 即使它存在但没有效果。奇怪的是，当我逐步通过调试器查看发生了什么时，我看到重新填充适配器会导致在 CheckableLinearLayout 中调用一次或多次 setChecked(true)。（我在下面包含了该堆栈跟踪）查看这些调用的调用堆栈表明它不是我编写的任何发起这些调用的代码。就好像 ListView 正在记住先前选择的索引并自行恢复它。

我的实现：我将 ListView 设置为 singleSelection 模式。我使用具有 getView(...) 的自定义 ArrayAdapter，它返回我的 CheckableListView 实现的实例：

```
public class CheckableLinearLayout extends LinearLayout implements Checkable {

   private boolean isChecked;

   public CheckableLinearLayout(Context context) {
      super(context);
   }

   public CheckableLinearLayout(Context context, AttributeSet attrs) {
      super(context, attrs);
   }

   @Override
   public void setChecked(boolean isChecked) {
      this.isChecked = isChecked;
      if(isChecked) {
         setBackgroundColor(Color.DKGRAY);
      } else {
         setBackgroundColor(Color.BLACK);
      }
   }

   @Override
   public boolean isChecked() {
      return isChecked;
   }

   @Override
   public void toggle() {
      setChecked(!isChecked);
   }
} 
```

我的 ArrayAdapter 的 getView 实现：

```
@Override
public View getView(int pos, View convertView, ViewGroup parent) {

         LayoutInflater inf = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

         CheckableLinearLayout row = (CheckableLinearLayout) convertView;
         if (row == null) {
            row = (CheckableLinearLayout) inf.inflate(R.layout.file_explorer_item, parent, false);
         }

         // I explicitly set checked to false, in case this was a convertView:
         row.setChecked(false);

         // population various elements of the view is done here

         return row;
      }
   } 
```

有任何想法吗？

PS。这是对 setChecked(true) 的一个神秘调用的堆栈跟踪：

```
<1> main@830013232224, prio=5, in group 'main', status: 'RUNNING'
      at my.package.CheckableLinearLayout.setChecked(CheckableLinearLayout.java:25)
      at android.widget.ListView.setupChild(ListView.java:1834)
      at android.widget.ListView.makeAndAddView(ListView.java:1765)
      at android.widget.ListView.fillSpecific(ListView.java:1318)
      at android.widget.ListView.layoutChildren(ListView.java:1636)
      at android.widget.AbsListView.onLayout(AbsListView.java:1863)
      at android.view.View.layout(View.java:11278)
      at android.view.ViewGroup.layout(ViewGroup.java:4224)
      at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
      at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
      at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
      at android.view.View.layout(View.java:11278)
      at android.view.ViewGroup.layout(ViewGroup.java:4224)
      at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
      at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
      at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
      at android.view.View.layout(View.java:11278)
      at android.view.ViewGroup.layout(ViewGroup.java:4224)
      at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
      at android.view.View.layout(View.java:11278)
      at android.view.ViewGroup.layout(ViewGroup.java:4224)
      at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
      at android.view.View.layout(View.java:11278)
      at android.view.ViewGroup.layout(ViewGroup.java:4224)
      at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
      at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
      at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
      at android.view.View.layout(View.java:11278)
      at android.view.ViewGroup.layout(ViewGroup.java:4224)
      at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
      at android.view.View.layout(View.java:11278)
      at android.view.ViewGroup.layout(ViewGroup.java:4224)
      at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
      at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
      at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
      at android.view.View.layout(View.java:11278)
      at android.view.ViewGroup.layout(ViewGroup.java:4224)
      at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
      at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1617)
      at android.widget.LinearLayout.onLayout(LinearLayout.java:1401)
      at android.view.View.layout(View.java:11278)
      at android.view.ViewGroup.layout(ViewGroup.java:4224)
      at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
      at android.view.View.layout(View.java:11278)
      at android.view.ViewGroup.layout(ViewGroup.java:4224)
      at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
      at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
      at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
      at android.view.View.layout(View.java:11278)
      at android.view.ViewGroup.layout(ViewGroup.java:4224)
      at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
      at android.view.View.layout(View.java:11278)
      at android.view.ViewGroup.layout(ViewGroup.java:4224)
      at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1489)
      at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
      at android.os.Handler.dispatchMessage(Handler.java:99)
      at android.os.Looper.loop(Looper.java:137)
      at android.app.ActivityThread.main(ActivityThread.java:4424)
      at java.lang.reflect.Method.invokeNative(Method.java:-1)
      at java.lang.reflect.Method.invoke(Method.java:511)
      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
      at dalvik.system.NativeStart.main(NativeStart.java:-1)

<10> Binder Thread #2@830019920808, prio=5, in group 'main', status: 'RUNNING'
      at dalvik.system.NativeStart.run(NativeStart.java:-1)

<9> Binder Thread #1@830019917952, prio=5, in group 'main', status: 'RUNNING'
      at dalvik.system.NativeStart.run(NativeStart.java:-1)

<8> FinalizerWatchdogDaemon@830019904352 daemon, prio=5, in group 'main', status: 'SLEEPING'
      at java.lang.VMThread.sleep(VMThread.java:-1)
      at java.lang.Thread.sleep(Thread.java:1031)
      at java.lang.Thread.sleep(Thread.java:1013)
      at java.lang.Daemons$FinalizerWatchdogDaemon.run(Daemons.java:213)
      at java.lang.Thread.run(Thread.java:856)

<7> FinalizerDaemon@830019904008 daemon, prio=5, in group 'main', status: 'WAIT'
      at java.lang.Object.wait(Object.java:-1)
      at java.lang.Object.wait(Object.java:401)
      at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:102)
      at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:73)
      at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
      at java.lang.Thread.run(Thread.java:856)

<6> ReferenceQueueDaemon@830019903648 daemon, prio=5, in group 'main', status: 'WAIT'
      at java.lang.Object.wait(Object.java:-1)
      at java.lang.Object.wait(Object.java:364)
      at java.lang.Daemons$ReferenceQueueDaemon.run(Daemons.java:128)
      at java.lang.Thread.run(Thread.java:856)

<5> Compiler@830019903408 daemon, prio=5, in group 'system', status: 'WAIT'
      at dalvik.system.NativeStart.run(NativeStart.java:-1)

<3> Signal Catcher@830019902928 daemon, prio=5, in group 'system', status: 'WAIT'
      at dalvik.system.NativeStart.run(NativeStart.java:-1)

<2> GC@830019902704 daemon, prio=5, in group 'system', status: 'WAIT'
      at dalvik.system.NativeStart.run(NativeStart.java:-1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T17:18:27.963

你可以使用这个 CheckableLinearLayout

```
public class CheckableLinearLayout extends LinearLayout implements Checkable {
boolean mChecked = false;

private static final int[] CHECKED_STATE_SET = {
        R.attr.state_checked
};

public CheckableLinearLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
public boolean isChecked() {
    return mChecked;
}

@Override
public void setChecked(boolean checked) {
    if (mChecked != checked) {
        mChecked = checked;
        refreshDrawableState();
    }
}

@Override
public void toggle() {
    mChecked = !mChecked;
    refreshDrawableState();
}

@Override
protected int[] onCreateDrawableState(int extraSpace) {
    final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
    if (isChecked()) {
        mergeDrawableStates(drawableState, CHECKED_STATE_SET);
    }
    return drawableState;
}

@Override
public boolean performClick() {
    toggle();
    return super.performClick();
} 
```

}

performClick 被覆盖 - 所以它会在点击时改变它的状态；如果您不需要它，请将其删除

对于背景颜色，您可以使用以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true">
        <shape android:shape="rectangle">
            <solid android:color="#e13f2e"/>
        </shape>
    </item>
    <item android:state_checked="false">
        <shape android:shape="rectangle">
            <solid android:color="#ffffff"/>
        </shape>
    </item>
</selector> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:43:47.037

setChecked 将由 ListView 调用（如果有 Checkable 接口），其值来自 getCheckedItemPosition(s)（使用 ListView setItemChecked 设置）在 getView 之后。清除或更改适配器时，可能未清除内部容器。需要时取消选中该项目。

我建议也使用可绘制的状态列表。onCreateDrawableState、mergeDrawableState、refreshDrawableState、state_checked。只是谷歌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:20:56.957

这是因为每次在列表视图中移动项目时，它都会重新创建其每一行，但由于您尚未保存状态，因此在重新创建时它会删除其状态并将其设置为默认状态。我已经发布了一个相关的答案，您可以查看希望它会有所帮助。

[如何实现一个获取所有复选框状态并将选中项的值添加到arraylist的按钮？](https://stackoverflow.com/questions/10190083/how-to-implement-a-button-that-gets-all-checkboxs-state-and-adds-the-value-of-c/10191369#10191369)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-02T18:56:30.790

这是 CheckableRelativeLayout 的一个很好的实现：[链接](https://github.com/android/platform_packages_apps_music/blob/master/src/com/android/music/CheckableRelativeLayout.java)

此外，在 layout/xml 中设置 listView SINGLE_CHOICE（或多个）对我不起作用，在设置适配器后使用它

```
 myListView.setChoiceMode(AbsListView.CHOICE_MODE_SINGLE); 
```

# quartz-scheduler - 使用 Quartz 调度程序的 Ram 大小

> ID：10309676
> 
> 赞同：0
> 
> 时间：2012-04-25T05:11:40.753
> 
> 标签：quartz-scheduler

在我的应用程序中使用的石英调度程序我想检查石英调度程序消耗的 ram 内存的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:33:47.733

In Java you cannot simply see how much memory given library/framework uses. I guess you have problems with memory consumption? If you are using `RAMJobStore` then all jobs and triggers are stored in memory. If you have hundreds of thousands of them, the amount of memory used will be significant (but not easily computable).

With `JDBCJobStore` the memory footprint will be minimal.

# php - 将结果从 php 脚本发送到电子邮件中？

> ID：10309678
> 
> 赞同：0
> 
> 时间：2012-04-25T05:11:46.523
> 
> 标签：php, email

我试图弄清楚如何让我的所有结果在我的 php 脚本的电子邮件中均匀排列在一起。

我希望它看起来像这样：

```
Registry No.:      12345X
First Name:        Erik
Last Name:         Peterson

$Body = "";
$Body .= "Registry No.: ";
$Body .= $reg;
$Body .= "\n";
$Body .= "First Name: ";
$Body .= $first_name;
$Body .= "\n";
$Body .= "Last Name: ";
$Body .= $last_name; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:15:44.580

使用 PHP_EOL 换行。我用它来发送邮件以插入换行符。它对我有用。

关于格式，您可以使用 html 表格或使用一些间距。

**更新 ：**

通过 PHP 发送 HTML 邮件是完全相同的邮件功能。例如/

```
mail($to, $subject, $body, $headers); 
```

但是您需要在标题中添加内容/类型，告诉邮件客户端它是 html 电子邮件

将此添加到您的`$headers`

```
$headers .= 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

例如，现在您可以将一些 html 代码附加到您的 $body 变量中。

```
$body = "
<table>
    <tr>
        <td> Registry No.:</td>
        <td>$reg</td>
    </tr>
    <tr>
        <td>First Name:</td>
        <td>$first_name</td>
    </tr>
    <tr>
        <td>Last Name: </td>
        <td>$last_name</td>
    </tr>
</table>
"; 
```

希望这可以帮助你。

# mpmovieplayercontroller - MPMoviePlayerController 在全屏模式下不旋转视图

> ID：10309679
> 
> 赞同：2
> 
> 时间：2012-04-25T05:12:04.340
> 
> 标签：mpmovieplayercontroller, fullscreen, uisplitviewcontroller, ios5.1, layoutsubviews

我目前正在为 iPad iOS 5.1 开发 masterDetail 应用程序。

当在 masterViewController 中点击一行时，会在详细视图控制器中播放视频。视频播放良好，在全屏模式下可以旋转。

但是，当视频处于全屏模式时旋转设备时，它不会旋转底层视图。因此，当视频退出全屏时，底层视图会在瞬间闪烁到之前的方向，然后再切换到当前方向。

我尝试捕获 MPMoviePlayerWillExitFullScreen 通知，然后调用 shouldAutoRotateToInterfaceOrientation .....但这没有帮助。

当我进入全屏模式时，我也会收到以下错误：

“拆分视图控制器应在布局之前设置其子级！”。但是这个错误只发生在模拟器中。

任何人都可以对这个问题有所了解吗？

# r - R编程语言，我如何编写一个接受数字信息或变量值的函数？

> ID：10309680
> 
> 赞同：1
> 
> 时间：2012-04-25T05:12:05.977
> 
> 标签：r, function, random

我有一个请求用户输入数字的函数，如下所示：

```
request_KBEHAVIOR<-function()
{
as.numeric(readline("Please enter Kramer's behavior>>> "))
} 
```

所以克莱默的行为是一个介于 0 和 1 之间的值（概率），用户会输入类似“.5”的内容

但是，我还希望用户输入像 =1/exp(runif(1)) 这样的等式。这可能吗？

例如在 excel 中，您可以在单元格中输入一个值，或者您可以输入一个类似 =1/exp(rand()) 的函数，然后您可以在任何其他方程式中引用该单元格。非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T05:27:16.937

您可以使用`eval(parse(text=...))`：

```
request_KBEHAVIOR<-function() as.numeric(eval(parse(text=
                                 readline("Please enter Kramer's behavior>>> "))))

request_KBEHAVIOR()
Please enter Kramer's behavior>>> 1/exp(runif(1))
# [1] 0.379733

request_KBEHAVIOR()
Please enter Kramer's behavior>>> 0.5
# [1] 0.5 
```

# sitecore - 如何在 sitecore 6.2 中首次将默认语言附加到 URL 加载

> ID：10309681
> 
> 赞同：0
> 
> 时间：2012-04-25T05:12:24.447
> 
> 标签：sitecore

我在 web.config 文件中创建了 languageEmbedding="always" 。但是，当 URL 首次加载时，它不会将语言附加到 URL。例如：[http ://www.abc.com/def/ghi](http://www.abc.com/def/ghi)

我需要 URL 类似于**http://www.abc.com/en/def/ghi**

任何人都可以向我推荐这个问题的解决方法。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T05:54:10.780

`languageEmbedding="always"`仅适用于生成的链接。如果 URL 中没有语言代码，您必须自行实现强制重定向第一个请求的功能。

我认为您可以通过将处理器添加到`<preprocessRequest>`管道并将其放在`StripLanguage`处理器之前来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:13:51.123

为定义下的网站节点设置 defaultLanguage="en"。

# jquery - jQuery 动画和 removeClass 与 addClass

> ID：10309688
> 
> 赞同：2
> 
> 时间：2012-04-25T05:13:14.187
> 
> 标签：jquery

当我“ **removeClass('below')** ”时，它会删除 css 类，但是当我再次单击该对象时，它会执行相同的操作。

我试图通过删除 css 代码来消除点击功能的工作能力。我究竟做错了什么？

```
$('.below').click(function() {
    $(this).removeClass('below');
    $('#welcome').removeClass('fadeInLeft, bounceOutLeft').addClass('fadeOutLeft');
    $('#welcome_search').delay('500').animate({"top": "-=140px"},"slow");
}); 
```

我的 html 看起来与此类似：

```
<div id="welcome_item" class="below">
    stuff
</div> 
```

请帮忙解决这个问题，谢谢。

如果我想在更改类后重新绑定点击怎么办？

```
$('.below').click(function() {
    $(this).unbind('click').removeClass('below').addClass('above');
    $('#welcome').removeClass('fadeInLeft bounceOutLeft').addClass('fadeOutLeft');
    $('#welcome_search').delay('500').animate({"top": "-=140px"},"slow");
});

$('.above').click(function() {
    $(this).removeClass('above').addClass('below');
    $('#welcome_search').animate({"top": "+=140px"},"slow");
    $('#welcome').removeClass('fadeInLeft bounceOutLeft fadeOutLeft').delay('500').addClass('fadeInLeft');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T05:16:48.803

到运行 jQuery 代码时，`click`事件已经绑定到带有 class 的元素`.below`，并且每次单击元素时，jQuery 实际上不再检查元素的类，因此删除 class 将无济于事这。

您可以`unbind`改用

[http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

```
$('.below').click(function() {
    $(this).unbind('click');
    $('#welcome').removeClass('fadeInLeft, bounceOutLeft').addClass('fadeOutLeft');
    $('#welcome_search').delay('500').animate({"top": "-=140px"},"slow");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:16:13.077

采用[`.off()`](http://jqapi.com/#p=off)

删除类是不够的，事件已附加到节点，因此您还应该删除附加到它的事件。

**[演示](http://jsfiddle.net/dhirajbodicherla/8jt2A/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:17:03.233

您也可以使用

```
$('.below').live("click",function(){}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T05:17:05.007

删除类时只需取消绑定事件。

```
$('#foo').unbind('click'); 
```

所以你的js代码应该是这样的。

```
$('.below').click(function() {
    $(this).unbind('click');
    $(this).removeClass('below');
    $('#welcome').removeClass('fadeInLeft, bounceOutLeft').addClass('fadeOutLeft');
    $('#welcome_search').delay('500').animate({"top": "-=140px"},"slow");
}); 
```

# html - 如何在 HTML5 文本的 Div 中添加淡出效果

> ID：10309689
> 
> 赞同：2
> 
> 时间：2012-04-25T05:13:24.303
> 
> 标签：html, css

我有文本 div 我希望在页面加载或加载 div 时对此有淡出效果 我有以下 html 代码我想在其上执行

```
<div class="text_paragraph">
    <p>Bovine Respiratory Disease (BRD) is the leading cause of economic 
       loss in the beef industry. <small>1, 2</small></p>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T05:21:57.840

你可以用 CSS3 做到这一点。像这样写：

```
.text_paragraph >p{
    -webkit-animation: fadi 5s 1;
}
@-webkit-keyframes fadi {
    0%   { opacity: 0; }
    100% { opacity: 1; }
}
@-moz-keyframes fadi {
    0%   { opacity: 0; }
    100% { opacity: 1; }
} 
```

检查这个[http://jsfiddle.net/TPsb7/2/](http://jsfiddle.net/TPsb7/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:18:07.023

淡出元素通常不是用纯 HTML 完成的。您可以使用 CSS 来完成，但总的来说，它是在[jQuery](http://jquery.com)之类的库的帮助下完成的，它允许您以最少的代码执行复杂的动画和效果。

```
$(document).ready(function(){
  $(".text_paragraph").fadeOut();
}); 
```

`div`文档加载完成后，上面的代码就会淡出你的。

# android - 仅在android中显示特定城市的谷歌地图

> ID：10309690
> 
> 赞同：3
> 
> 时间：2012-04-25T05:13:27.280
> 
> 标签：android, google-maps

我想显示特定城市的地图，当用户选择任何城市时，只会显示该城市的区域而不是整个地图。我需要一些建议来做这种事情。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:21:45.360

您可以通过意图打开地图。

```
String uri = "geo:"+ latitude + "," + longitude;
startActivity(new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri)));

// You can also choose to place a point like so:
String uri = "geo:"+ latitude + "," + longitude + "?q=my+street+address";
startActivity(new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri)));

/*
* The Possible Query params options are the following:
*
* Show map at location: geo:latitude,longitude
* Show zoomed map at location: geo:latitude,longitude?z=zoom
* Show map at locaiton with point: geo:0,0?q=my+street+address
* Show map of businesses in area: geo:0,0?q=business+near+city
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:05:32.077

首先，您必须要求用户选择一个城市，然后使用[Geocoder](http://developer.android.com/reference/android/location/Geocoder.html)类查找城市的纬度和经度，使用以下代码

```
 MapController mControl;
    MapView mapView;
     mapView= (MapView) findViewById(R.id.navView)
     mControl = mapView.getController();
     mControl.animateTo(GeoP); //GeoP is the geopoint of your city 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:30:54.170

Here, We need to do RND for each city, what is the latitude & longitude for each city. so for to find latitude & long. for each city no need to go there and check what is the lat. long., The simple way to do is [Find coordinates by moving around the map](http://universimmedia.pagesperso-orange.fr/geo/loc.htm). So After getting all lat. long. for each city. Use this lat. & long. to display map according to the user selection of city. So it will display particular area. So check following code how to use latitude & longitude to display map.

```
Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setData(Uri.parse("geo:0,0?q=" + ("40.7890011, -124.1719112")));
            try {
                startActivity(intent);
            } catch (Exception e) {
                e.printStackTrace();
            } 
```

Hope this will help you. Thanks

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T05:46:58.483

为此目的有一个很好的类，称为 Geocoder

这是[参考](http://developer.android.com/reference/android/location/Geocoder.html)

你可以只使用方法

```
getFromLocationName("My Particular city", ...) 
```

并获取与其匹配的位置列表。第一个通常是您需要的。

我想，这是唯一的方法。不过非常有用。:)

希望，它有帮助！）

# php - odbc_connect 之后，php number_format 没有给出预期的输出

> ID：10309695
> 
> 赞同：0
> 
> 时间：2012-04-25T05:14:04.917
> 
> 标签：php, number-formatting

请检查以下代码的输出。

```
<?php
define("DSN","somedb");
define("USER","");
define("PASS","");

echo number_format(17, 2, '.', ',');
echo number_format(19, 2, '.', ',');

$dbObj = odbc_connect(DSN,USER,PASS);

echo number_format(17, 2, '.', ',');
echo number_format(19, 2, '.', ',');
?> 
```

现在在 odbc_connect 之后的代码如下：

echo number_format(17, 2, '.', ',');

## 预期输出是

17.00

## 但它给出了输出

16:0

同样的事情也发生在 19 岁。对于所有其他数字，输出符合预期。

我正在使用 Windows Server 2008、apache 2.2、php 5.2.17

我找到了这个

[https://bugs.php.net/bug.php?id=47418&edit=1](https://bugs.php.net/bug.php?id=47418&edit=1)

但这并没有给出解决方案

谁能告诉我有什么问题。我相信你们中的一些人已经遇到过这个问题。所以请让我知道这是什么以及如何解决/克服它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:18:13.763

试试这个..

$num = number_format(17, 2, '.', '');

# android - 在华为u8150中安装clockworkmod

> ID：10309698
> 
> 赞同：0
> 
> 时间：2012-04-25T05:14:16.667
> 
> 标签：android, recovery, rom

我使用ROM Manager在mu Huawei u8150手机中安装了clockworkmod recovery。但是，当我使用 ROM 管理器（或按下电源、降低音量和通话结束按钮）重新启动到恢复模式时，它会停留在开始显示上，并且没有任何反应。我可以知道这有什么问题以及如何将clockworkmod恢复安装到我的手机吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:15:11.623

看来你刷了 CWM 3.0.2.4，它适用于较新的 rom，只需将恢复模式更改为传统模式，然后重新启动到恢复模式，我认为你将采用更安全的方式

# python - 用于缩放关键帧的 Python/Maya 简单脚本

> ID：10309711
> 
> 赞同：0
> 
> 时间：2012-04-25T05:15:19.707
> 
> 标签：python, animation, maya, keyframe

我正在 Maya 上使用 Python 编写脚本，以允许我将选定的关键帧缩放一定数量。

基本上，如果我在动画上制作动画，我可以轻松地将所有关键帧缩放为相隔 2 个关键帧。由于我是初学者，因此脚本应该非常原始，因为我仍然需要做一些手动工作（选择对象和关键帧）。

我只需要一个可以自动为我缩放它们的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:26:00.570

要开始使用 maya python 脚本，请选择所有关键帧，然后：

```
import maya.cmds as mc
mc.scaleKey(timeScale=2, timePivot=0) 
```

# php - PHP对象数组排序

> ID：10309715
> 
> 赞同：1
> 
> 时间：2012-04-25T05:15:58.193
> 
> 标签：php, arrays, object

你好我想按日期对我的对象数组进行排序，就像这样：

```
$array = array( 
[0] = array ('date' => '2012-05-15', 'name' => 'jon')
[1] = array ('date' => '2012-05-10', 'name' => 'jon')
[2] = array ('date' => '2012-05-09', 'name' => 'jon')
[3] = array ('date' => '2012-05-16', 'name' => 'jon')
); 
```

我能以某种方式做到这一点吗？我必须使用什么方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:24:41.560

您可以使用[`usort()`](http://php.net/manual/en/function.usort.php)一些自定义逻辑来完成此操作：

```
$array = array(
    array('date' => '2012-05-15', 'name' => 'jon'),
    array('date' => '2012-05-10', 'name' => 'jon'),
    array('date' => '2012-05-09', 'name' => 'jon'),
    array('date' => '2012-05-16', 'name' => 'jon')
);

function mySorter( $a, $b ) {
  if ( $a['date'] < $b['date'] ) return -1;
  if ( $a['date'] > $b['date'] ) return 1;
  return 0;
}

usort( $array, mySorter ); 
```

当一切都说完了，`$array`现在看起来像这样：

```
大批
(
    [0] => 数组
        (
            [日期] => 2012-05-09
            [名称] => 乔恩
        )
    [1] => 数组
        (
            [日期] => 2012-05-10
            [名称] => 乔恩
        )
    [2] => 数组
        (
            [日期] => 2012-05-15
            [名称] => 乔恩
        )
    [3] => 数组
        (
            [日期] => 2012-05-16
            [名称] => 乔恩
        )
)
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:27:07.730

[`uasort()`](http://php.net/manual/en/function.uasort.php)是另一种选择。

```
$array = array( 
array ('date' => '2012-05-15', 'name' => 'jon'),
array ('date' => '2012-05-10', 'name' => 'jon'),
array ('date' => '2012-05-09', 'name' => 'jon'),
array ('date' => '2012-05-16', 'name' => 'jon')
);

function date_sort($a, $b)
{
    if ( $a['date'] < $b['date'] ) return -1;
    if ( $a['date'] > $b['date'] ) return 1;
    return 0;
}

uasort($array, 'date_sort');
var_dump($array); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T06:00:39.263

显然，[usort](http://us3.php.net/usort)是答案。但是，如果要指定排序标准（按日期排序或按名称排序），可以执行以下操作：

```
<?php
$sortOrder = 'date'; // default is to sort by date
$array = array( 
[0] = array ('date' => '2012-05-15', 'name' => 'jon')
[1] = array ('date' => '2012-05-10', 'name' => 'jon')
[2] = array ('date' => '2012-05-09', 'name' => 'jon')
[3] = array ('date' => '2012-05-16', 'name' => 'jon')
);

function date_sort($a, $b)
{
    global $sortOrder;

    if( $sortOrder == 'date' ) {
        if ( strtotime( $a['date'] ) < strtotime( $b['date'] ) ) return -1;
        if ( strtotime( $a['date'] ) > strtotime( $b['date'] ) ) return 1;
        return 0;
    } else if( $sortOrder == 'name' ) {
        return strcmp( $a['name'], $b['name'] );
    }
}

// sorted by date
uasort($array, 'mysort');

// sorted by name
$sortOrder = 'name';
uasort($array, 'mysort');
?> 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T05:36:18.457

```
$array = array(
array ('date' => '2012-05-15', 'name' => 'jon'), 
array ('date' => '2012-05-10', 'name' => 'jon'),
array ('date' => '2012-05-09', 'name' => 'jon'),
array ('date' => '2012-05-16', 'name' => 'jon') 
```

);

```
sort($array);

echo '<pre>';
print_r($array);
echo '</pre>'; 
```

使用已有的方法。

# java - 带有普通 JDBC 的 DAO 生成器工具

> ID：10309716
> 
> 赞同：7
> 
> 时间：2012-04-25T05:15:58.803
> 
> 标签：java, jdbc, dao

我正在寻找一个好的**DAO 生成器，它使用***普通*的JDBC 4 和基本的[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)操作构建类。

我已经看到[NetBeans](http://netbeans.org/)使用[JPA](http://en.wikipedia.org/wiki/Java_Persistence_API)和[Hibernate](http://en.wikipedia.org/wiki/Hibernate)生成类和*Java Bean 或实体*。我正在寻找其他类似的工具，但我要求生成的类不使用第三方库，只使用[JRE](http://en.wikipedia.org/wiki/Java_Platform,_Standard_Edition)。我很感激你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T05:40:14.223

我认为您可能有兴趣查看[AuDAO](http://audao.spoledge.com/)源代码（您可以“使用”其中生成 DAO 和 Bean 的部分并编写执行类似操作的代码 - 它是开源的）

这个库完全符合您的描述： ![在此处输入图像描述](../Images/0b81441563a78872b709c1a28d61c35f.png)

但是，我认为您可能会错过重点，使用 Hibernate 之类的工具的优势在于开发人员与数据库的松散耦合。你不需要知道所有的数据库方言；休眠可以。这很方便，因为生产服务器运行 DB2、Oracle 或 MySQL，而我们的 Junit 测试使用具有不同语法的 SQLite。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-09T16:33:33.630

让我们看一下**Telosys Tools**一个基于数据库模型的简单代码生成器。这个工具是免费的并且非常容易使用。请参阅网站[https://sites.google.com/site/telosystools/](https://sites.google.com/site/telosystools/)

从 2.1.1 版开始，一些模板可用于**本机 JDBC DAO** （请参阅博客[http://telosys-tools.blogspot.fr/2015/03/telosys-tools-ver-211-whats-new.html](http://telosys-tools.blogspot.fr/2015/03/telosys-tools-ver-211-whats-new.html)）。

只需选择捆绑包“ **persistence-native-jdbc-TT211** ”即可生成 DAO、Interfaces、Beans (DTO)、JUnit 测试……所有模板都是免费的，可在 GitHub ( [https://github.com/telosys-工具](https://github.com/telosys-tools)）

# java - 使用 Collections-Maps

> ID：10309717
> 
> 赞同：1
> 
> 时间：2012-04-25T05:15:59.733
> 
> 标签：java, collections, maps

我试图为地图中的键提供多个值。我想让这种东西起作用..mapp.put("key1","value1") mapp.put("key1","value2")。第一个值“value1”被“value2”覆盖。如何保留这两个值？我应该去寻找除地图之外的任何其他东西来实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:17:28.263

将两个 valyes 放入另一个集合（Vector、Set、Stack，任何适合您的用途；或其他任何东西），并将帽子集合作为值存储在地图中。

作为使用 Vector 的随机示例：

```
Vector<Object> myVector = new Vector<Object>();
myVector.add("value1");
myVector.add("value2");
mapp.put("key1", myVector); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:23:14.047

从[Map](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html)的Javadoc ，

**`A map cannot contain duplicate keys; each key can map to at most one value.`**

因此，如果要为单个键放置多个值，则需要将值添加到列表中，并将 key1 和列表放入映射中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T05:24:21.487

```
HashMap<K, HashSet<V>> map = new HashMap<K, HashSet<V>>();
if(!map.containsKey(k)) {
  map.put(k, new HashSet<V>());
}
map.get(k).add(v); 
```

如果您有重复的值，请使用列表/向量而不是哈希集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T05:25:07.557

您可以将 un map 与列表一起使用。像这样的东西：

```
Map<String, List<String>> map = new HashMap<String, List<String>>(); 
```

将 a 放入`key1`第一个值：

```
if (!map.containsKey("key1")) {
    map.put("key1", new LinkedList<String>());
}
map.get("key1").add("value1"); 
```

将第二个值添加到`key1`

```
map.get("key1").add("value2"); 
```

您可以通过一种方法获得所有这些

```
public void add(String key, String value) {
    if (!map.containsKey(key)) {
        map.put(key, new LinkedList<String>());
    }
    map.put(key, value);
} 
```

如果您想要 的值`key1`，您将获得`List`

```
List<String> values = map.get("key1"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T05:20:30.010

如果您想要具有该行为的地图，还可以查看 Multimap

# javascript - HTML：如何在 div 中将一系列复选框换行到下一行？

> ID：10309721
> 
> 赞同：0
> 
> 时间：2012-04-25T05:16:36.227
> 
> 标签：javascript, html, webforms, formatting

![添加新标签](../Images/f82e562947a19cd9ed4ee52408d22857.png)

所以我有一个烹饪食谱数据库，我正在制作一个网络表单，该表单最终将连接到数据库以向其中添加条目。数据库中的一列是“标签”。Web 表单将显示之前使用过的所有标签（带有复选框），并为用户提供添加新标签的选项，该标签将显示为现有标签旁边的新复选框。

问题＃1：现在标签被1个空格隔开，但我希望它们被更大的间隙隔开，这样看起来更好。做这个的最好方式是什么？

问题2：随着更多标签的添加，它们最终会到达该字段集的右边缘。使它们换行到下一行并确保忽略新标签和前一个标签之间的空格的最佳方法是什么？（否则新标签可能会缩进我不想要的下一行！）

HTML代码：

```
<p>
    <fieldset>
        <legend>Tags:</legend>
        <span class="tags">
            <input type="checkbox" name="tags" value="Dessert">Dessert  <input type="checkbox" name="tags" value="Fast">Fast  <input type="checkbox" name="tags" value="Entree">Entree
        </span>
        <p>
            <input type="text" id="addtag"><input type="submit" value="Add">
        </p>
    </fieldset>
</p> 
```

JAVASCRIPT：

```
$("input[value='Add']").click(function(event){
    event.preventDefault();
    tagAdded = document.getElementById('addtag').value;
    if (tagAdded!=null && tagAdded.trim()!="") {
        //$('.tags').append('????????');
    }
 }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:25:33.627

首先，您的标签（如“甜点”）应该在`<label>`标签中，因此：

```
<input type="checkbox" name="tags" value="Dessert" id="tag-1"><label for="tag-1">Dessert</label> 
```

如果您现在单击该单词，它将激活它前面的复选框。

然后做一个更大的差距：使用CSS：

```
label{
    margin-right: 2em;
} 
```

这将在您的标签之间产生一个大小为 2 个字母 m 的间隙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:25:28.933

您可以将每个复选框的标签包装在标签中，并为标签添加右填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:30:18.507

I guess this can solve problem 1 & 2...

wrap each tag like this:

```
<div class="wrapper">
    <input type="checkbox" name="tags" value="Dessert">Dessert
</div> 
```

css:

```
.wrapper { margin-right:10px; float:left; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T06:04:34.887

修改标记，使复选框块是这样的（请注意，还有其他问题需要修复，例如您现在尝试将其放入`fieldset`内部`p`，这是无效的并且不起作用）：

```
<div class="tags">
<label><input type="checkbox" ...>Dessert</label>
<label><input type="checkbox" ...>Fast</label>
...
</div> 
```

使用这样的 CSS 代码：

```
.tags { margin-left: -4em; }
.tags label { padding-left: 4em;  white-space: nowrap; } 
```

我使用大间距只是为了让事情更清晰；2em 可能就足够了——只要记住让负的左边距值与填充值匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T06:34:12.957

尝试以这种方式放置您的代码

html:

```
<p>
    <fieldset>
        <legend>Tags:</legend>
        <span class="tags">
            <p> <input type="checkbox" name="tags" value="Dessert"> Dessert</p>
            <p> <input type="checkbox" name="tags" value="Fast"> Fast</p>
            <p> <input type="checkbox" name="tags" value="Entree"> Entree</p>
        </span>
        <div>
            <input type="text" id="addtag"><input type="submit" value="Add">
        </div>
    </fieldset>
</p>​ 
```

Javascript：

```
$("input[value='Add']").click(function(event){
    event.preventDefault();
    tagAdded = document.getElementById('addtag').value;
    if (tagAdded!=null && tagAdded.trim()!="") {
        $('.tags').append('<p> <input type="checkbox" name="tags" value="' + tagAdded.trim() + '" /> ' + tagAdded.trim() + '</p>');
    }
 });​ 
```

CSS：

```
div { clear:both; }
.tags p {
    float:left;
    margin-right:20px;    
} 
```

​</p>

# javascript - 如何在 Google Analytics 中使用 trackPageview？

> ID：10309726
> 
> 赞同：7
> 
> 时间：2012-04-25T05:16:59.300
> 
> 标签：javascript, google-analytics

我需要在Google Analytics中配置**_trackPageview的帮助。**我想跟踪一个文件被下载了多少次。根据 Google Analytics 文档，我需要在下载链接中使用以下 onClick 事件。

```
<a href="http://www.example.com/files/map.pdf" 
    onClick="javascript: _gaq.push(['_trackPageview', '/downloads/map']);"> 
```

但我找不到任何信息，添加后，我可以在哪里看到这个链接的下载统计信息？我需要在我的 Google Analytics（分析）帐户中配置任何内容吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T05:33:32.177

这应该可行，并且您不需要在 Analytics 中配置任何内容。您不会立即看到事件出现在 Google Analytics（分析）帐户中。我会给它 24-48 小时开始出现。

从安装代码时开始，应跟踪所有点击。它可能会显示在热门内容下，或者您可以按部分 URL 过滤访问过的页面。

由于 Analytics 固有的延迟，当您尝试新的跟踪技术时，经常会怀疑自己。跟进并确认事件正在注册非常重要。

编辑：有关 _trackPageview 与 _trackEvent 的更多信息...

_trackPageview：“Google Analytics 的 _trackPageview 是用于 ga.js 跟踪网站的功能，可让您跟踪网站上不生成综合浏览量的事件。”

_trackEvent：“事件跟踪是 ga.js 跟踪代码中提供的一种方法，可用于记录用户与网站元素的交互，例如 Flash 驱动的菜单系统。”

我的建议是，如果您有许多不同的可下载文件要跟踪，请查看 _trackEvent。如果您只有一两个文件要跟踪，_trackPageview 绝对适合。我的想法是，当您要跟踪的文件数量较多时，_trackEvent 会让您按类别（文件下载）、操作（超链接点击）和标签（地图）进行跟踪，如果您有兴趣，这可能会更有用整体下载。

_trackEvent 也是临时的，因为您编写的任何代码都应该自动生成相应的报告项，而无需在 Google Analytics 中进行任何配置。

更多信息（以上引用自这些页面）：

_trackPageview： http: [//support.google.com/googleanalytics/bin/answer.py ?hl=en&answer=55597](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55597)

_trackEvent：[https ://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T17:06:51.837

如果您想确保您的跟踪工作正常但不想等待 24-48 小时，请转到 Google Analytics（分析）侧边栏中的实时（测试版）选项卡。

在另一个选项卡上访问该网站，一旦您看到“现在”指示器显示您的存在，请单击您的下载链接。如果您看到它出现在“热门活动页面”中，那么您就可以开始了，镀金和金色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T09:26:12.600

您还可以使用 ga.js 的调试版本来诊断错误。它将诸如“无效跟踪代码”之类的内容打印到 Javascript 控制台。

在此页面上搜索“使用 ga_debug.js 进行调试”：

[https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting](https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting)

# jquery - 验证多个 TinyMCE 编辑器

> ID：10309732
> 
> 赞同：3
> 
> 时间：2012-04-25T05:17:42.273
> 
> 标签：jquery, validation, tinymce

我有一个包含多个 TinyMCE 编辑器的表单。有些编辑器是高级的，有些是简单的编辑器。我已经使用[jquery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)在客户端进行验证。我一直在通过添加以下代码来验证单个 TinyMCE 编辑器。

```
$('#submit').click(function() {

    var content = tinyMCE.activeEditor.getContent(); // get the content

    $('#description').val(content); // put it in the textarea

}); 
```

但是现在我应该验证所有编辑器，知道吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-25T09:41:18.087

尝试

```
$('#submit').click(function() {

  for (i=0; i < tinymce.editors.length; i++){
    var content = tinymce.editors[i].getContent(); // get the content

    $('#description').val(content); // put it in the textarea
  }
}); 
```

或更简单

```
$('#submit').click(function() {
     tinymce.triggerSave();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-07T07:21:19.227

一种更通用的方法是将编辑器内容保存回 textarea，然后让 jquery 验证在 textarea 本身中发挥作用

```
tinymce.init({
    setup: function (editor) {
        editor.on('init change', function () {
            editor.save();
        });
    }
}); 
```

因为 tinymce textarea 是隐藏的，所以您还必须将您的 jquery 验证代码更新为类似这样的内容

```
$('#myform').validate({
    ignore: ':hidden:not(textarea)'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:26:51.060

试试这样

java脚本代码

```
 jQuery(document).ready(function(){
            // binds form submission and fields to the validation engine
            jQuery("#formID").validationEngine();
        }); 
```

html代码

第一个 TinyMCE

```
 <textarea rows="" cols="" id="first" class="validate[required] text-input tinymce"></textarea> 
```

第二个 TinyMCE

```
<textarea rows="" cols="" id="second" class="validate[required] text-input tinymce"></textarea> 
```

我也这样用过，很好用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T05:08:40.497

如果您有 Html 编辑器 tinymce，则所需的验证无法正常工作，您可以使用此代码解决您的问题，如果您有多个 Htmleditor，请在您的应用程序中安装 tinymce，您可以这样做我知道这是正确的解决方案，但您可以这样做它并解决这个问题

在模型中给出tinymce.cshtml页面的路径ok

```
 [Required(ErrorMessage = "Please enter About Company")]
  [Display(Name = "About Company : ")]
  [UIHint("tinymce_jquery_full"), AllowHtml]
  public string txtAboutCompany { get; set; }

  [Required(ErrorMessage = "Please enter About Company")]
  [Display(Name = "About Company : ")]
  [UIHint("tinymce_jquery_full"), AllowHtml]
  public string txtAboutCompany { get; set; } 
```

现在在您的视图中添加一个像这样的跨度

```
 <div class="divclass">
     @Html.LabelFor(model => model.txtAboutCompany, new { @class = "required" })
     @Html.EditorFor(model => model.txtAboutCompany)
     <span class="field-validation-error" id="AC" style="margin:9px 0 0 157px;"></span>
 </div>
<div class="divclass">
     @Html.LabelFor(model => model.txtAboutCompany, new { @class = "required" })
     @Html.EditorFor(model => model.txtAboutCompany)
     <span class="field-validation-error" id="AC" style="margin:9px 0 0 157px;"></span>
 </div> 
```

在提交按钮单击事件上创建 jQuery

```
$("#BusinessProfile").click(function () {
    var aboutC = $("#txtAboutCompany").val()
    var pinfo = $("#txtProductinfo").val();
    if (aboutC == "" && pinfo == "") {
        $("#AC").append("").val("").html("Please enter about company")
        $("#PI").append("").val("").html("Please enter product information")
        $("#bpform").valid();
        return false;
    } else if (aboutC == "") {
        $("#PI").append("").val("").html("")
        $("#AC").append("").val("").html("Please enter about company")
        $("#txtAboutCompany").focus();
        $("#bpform").valid();
        return false;
    } else if (pinfo == "") {
        $("#AC").append("").val("").html("")
        $("#PI").append("").val("").html("Please enter product information")
        $("#txtProductinfo").focus();
        $("#bpform").valid();
        return false;
    }
    else {
        $("#AC").append("").val("").html("");
        $("#PI").append("").val("").html("");
        //return true;
        $("#bpform").validate();
    }
}); 
```

我希望你的问题可以解决

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-09T18:59:07.047

根据我的经验，jquery 验证对 tinyMCE 编辑器有两个问题。首先，tinyMCE 缓冲内容，因此 jquery 验证看到的底层文本区域内容并不总是反映编辑器。其次，通过jquery验证找到的textarea在tinyMCE结构深处隐藏了好几层。当 jquery 验证将其错误消息放在该文本区域之后时，错误消息也会被隐藏。

有两个单独的 jquery 验证功能可以解决这些问题： [Normalizers](https://jqueryvalidation.org/normalizer/)：允许您在验证之前转换字段的内容 [Error Placement](https://jqueryvalidation.org/reference/)：允许您修改错误在 DOM 中的显示位置。这两个都可以通过 setDefaults 方法全局配置，如下所示：

```
 jQuery.validation.setDefaults({
    normalizer:function(val){
        var ele = jQuery(this);
        if(window.tinyMCE.editors[ele.id]){
            window.tinyMCE.editors[ele.id].save();
            return window.tinyMCE.editors[ele.id].getContents();
        }
        return val;
    },
    errorPlacement:function(error,element)
    {
        var ele = jQuery(element);
        if(window.tinyMCE.editors[ele.id]){
            var realTarget = window.tinyMCE.editors[ele.id].getContainer().parent();
            error.insertAfter(realTarget);
        }
        error.insertAfter(element);
    }
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-25T05:21:40.957

相反，您可以使用 TinyMCE 的`isDirty()`方法

参考：[这里](http://www.tinymce.com/wiki.php/API3%3amethod.tinymce.Editor.isDirty)

**用法**

> tinyMCE.activeEditor.isDirty()

希望这可以帮助

# session - 将一些 php 和 web 应用程序相关文件从我朋友的 windows 计算机移植到我的 mac 后，我遇到了一些错误

> ID：10309735
> 
> 赞同：0
> 
> 时间：2012-04-25T05:17:44.943
> 
> 标签：session, heroku, facebook-apps, php

这是针对在 heroku 上运行的 facebook 应用程序，但 heroku 可能不是问题。问题要么是某种与缓存相关的东西，操作系统移植，要么我认为这可能是回车问题。

无论如何，我在顶部和底部分别遇到了几个错误：

```
Warning: Unknown: 
Warning: session_start(): open(C:\ProgramData\Jcx.Software\VS.Php\2.10.6970.0\temp/sess_i4ood4poc11ebsgth000g1nm74, O_RDWR) failed: No such file or directory (2) in /app/www/sdk/src/facebook.php on line 37

Warning: session_start(): Cannot send session cache limiter - headers already sent (output started at /app/www/sdk/src/facebook.php:37) in /app/www/sdk/src/facebook.php on line 37 
open(C:\ProgramData\Jcx.Software\VS.Php\2.10.6970.0\temp/sess_i4ood4poc11ebsgth000g1nm74, O_RDWR) failed: No such file or directory (2) in Unknown on line 0 Warning: Unknown: Failed to write session data (files). Please verify that the current setting of session.save_path is correct (C:\ProgramData\Jcx.Software\VS.Php\2.10.6970.0\temp) in Unknown on line 0 
```

基本上我已经尝试了整个“确保会话处于最重要的位置”，但我在任何文件中都没有该会话代码。我已经尝试了整个确保“？>”在新行上也没有效果。

**更新**

我发现了一个叫做：zend_extension_ts="C:\Program Files (x86)\Jcx.Software\VS.Php\2010\php 5.2\ext\php_xdebug.dll"

在一个名为 php.ini 的文件中，即使我试图摆脱它似乎也没有改变任何东西。所以，我认为这与我之前推送的一些文件有关，然后使用 puo、intellisense.cache、projphp 等扩展名删除这些文件。

我不知道这些是否是自动生成的，但无论如何根据我的错误：

*   在名为 temp 的文件中有一些会话数据。我没有名为 temp 的文件。
*   zend_extension_ts 应该在某处被引用，但它在我的代码中不可见。
*   我显然需要通过 session_start() 再次重新发送会话缓存限制器，这在我的代码中不可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:46:32.430

不是会话，我敢肯定。但是您的代码中包含目录路径，但该目录不存在！只需先重构那部分代码！

作为提示，您应该使用 realpath() 并在尝试使用之前检查路径是否存在。

希望这可以帮助！

# android - 正则表达式无法根据要求正常工作

> ID：10309739
> 
> 赞同：0
> 
> 时间：2012-04-25T05:18:00.837
> 
> 标签：android, regex

我对正则表达式中使用的模式感到困惑。我想要的是在十进制之前，用户想要输入的最大数字是三，并且数字不应该以零开头。输入小数点前的数字后，可以是三位或两位或一位，但不能以零开头。我希望允许用户在小数点后输入一位，并且不应超过一位。那么这些的模式是什么？

例子：

**号码 允许输入：`1.3`, `22.3`, `333.4`,`999.6`**

**Number 不允许输入: `0`, `0.1`, `.1`, `4444.67`,`333.78`**

**我用过的代码**

```
tempEditText.setFilters(new InputFilter[]{new DecimalDigitsInputFilter(3,1)});
class DecimalDigitsInputFilter implements InputFilter
{
    Pattern mPattern;

    public DecimalDigitsInputFilter(int digitsBeforeZero, int digitsAfterZero)
    {
        mPattern = Pattern.compile("[0-9]{0," + (digitsBeforeZero - 1) + "}+((\\.[0-9]{0," + (digitsAfterZero - 1) + "})?)");
    }

    @Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend)
    {
        Matcher matcher = mPattern.matcher(dest);
        if(!matcher.matches())
        {
            return "";
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:23:51.910

我认为你想要的模式是：

```
^[1-9]\d{0,2}\.\d?$ 
```

解释：

```
^        // Start of string
[1-9]    // First digit can't be 0
\d{0,2}  // Zero, one, or two more digits after first digit
\.       // Literal decimal point
\d?      // Optional single digit after decimal point
$        // End of string 
```

在您的代码中，它将是：

```
mPattern = Pattern.compile("^[1-9]\\d{0," + (digitsBeforeZero - 1)
           + "}(\\.\\d{0," + digitsAfterZero + "})?$"); 
```

小数点和尾随数字的括号表示像“1”这样的数字。将无法匹配。这是一个版本，它要求小数点和后面的数字可选：

```
mPattern = Pattern.compile("^[1-9]\\d{0," + (digitsBeforeZero - 1)
           + "}\\.\\d{0," + digitsAfterZero + "}?$"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:28:06.933

```
Pattern.compile("[1-9]{0," + (digitsBeforeZero - 1) + "}+((\\.[0-9]{0," + (digitsAfterZero - 1) + "})?)" 
```

试试这个....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:36:34.517

您有以下问题：

```
"[0-9]{0," + (digitsBeforeZero - 1) + "}+((\\.[0-9]{0," + (digitsAfterZero - 1) + "})?)"
 ^^^^^                                              ^
  1                                                 2 
```

1.  您的模式在开始时允许 0，但您不想要前导 0

2.  您允许点后有 0 个数字，但您不想要它。

3.  您需要在正则表达式周围使用锚点以避免部分匹配（允许使用“Foo123.4Bar”）

所以试试这个

```
mPattern = Pattern.compile("^[1-9][0-9]{0," + (digitsBeforeZero - 1) + "}((\\.[0-9]{1," + (digitsAfterZero - 1) + "})?)$");
                                                                                                          ^^^^
                                                                                                       really -1 ??? 
```

# wix - wix 如果单击取消按钮，则烧录引导程序崩溃问题

> ID：10309742
> 
> 赞同：1
> 
> 时间：2012-04-25T05:18:07.670
> 
> 标签：wix, bootstrapper, burn

我正在尝试创建一个安装 .Net 框架 4 作为先决条件的 Wix 刻录引导程序，然后安装我的 msi。引导程序 exe 工作正常，但唯一的问题是，每当我尝试在中途取消安装时，引导程序就会崩溃。请帮我解决问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T07:11:59.513

此错误已修复。请升级到 RTM 版本的 WiX v3.6 或更高版本。

# c++ - C++ 奇怪的文本行为 - 随机垃圾文本

> ID：10309746
> 
> 赞同：0
> 
> 时间：2012-04-25T05:18:42.653
> 
> 标签：c++, class

**解决了**

在我重新安装我的操作系统（2008 服务器）之后，我注意到我的程序中发生了一些奇怪的事情。

这是部分源代码的链接[http://phantomworksstudios.com/cpp/ss/sof-odd.h](http://phantomworksstudios.com/cpp/ss/sof-odd.h)

首先是代码：

### 自定义数据.h

```
class INI_{

public:
const char* error;
stringstream CharToStr2;

Layout layout;      
Settings settings;

string file; 

int OpenFile(string open_file){
    CharToStr2.str("");
    ifstream SSMAIN_FILE_SETTINGS; 
    CharToStr2<<open_file;
    cout<<"CharToStr: "<<CharToStr2<<endl;
    cout<<"CharToStr.str(): "<<CharToStr2.str()<<endl; 
    cout<<"CharToStr.str.c_str(): "<<CharToStr2.str().c_str()<<endl;

    SSMAIN_FILE_SETTINGS.open(CharToStr2.str().c_str());
        if(!SSMAIN_FILE_SETTINGS){
        CharToStr2<<" is currupt or not found!. Loading default configuration!";
        cout<<"STRING1:"<<CharToStr2<<endl<<endl;
        cout<<"STRING2:"<<CharToStr2.str()<<endl<<endl;
        cout<<"STRING3:"<<CharToStr2.str().c_str()<<endl<<endl;
        error=CharToStr2.str().c_str(); 
        cout<<"ERROR:"<<error<<endl;   
        }
    cout <<"CLASS INI_: "<<SSMAIN_FILE_SETTINGS<<" : "<<file<<endl<<endl;
    }
};

INI_ SourceStudioConfiguration; 
```

### 程序.h

```
case WM_CREATE:  
SSMAIN_EXPLORERWINDOW_MENU=LoadMenu(SSMAIN_HINSTANCE,MAKEINTRESOURCE(ID_EXPLORER_MENU));
    SourceStudioConfiguration.layout.cx=0;   
    User_Buffer=32767;
    OpenProcessToken(GetCurrentProcess(),TOKEN_QUERY,&hToken);
    GetUserProfileDirectory(hToken,InfoBuf,&User_Buffer);
    User_Path=InfoBuf;
//      cout<<InfoBuf<<endl<<endl;
    CharToStr<<InfoBuf<<"\\Source Studio\\preference.ini";
    preference=CharToStr.str();
    cout<<User_Path<<" : "<<preference<<endl<<endl;
//       SourceStudioConfiguration.file=preference;
    SourceStudioConfiguration.OpenFile(preference);
    cout<<"CREATE:"<<SourceStudioConfiguration.error<<endl<<endl;

    cout<<"Class File"<<SourceStudioConfiguration.file<<endl<<endl;
    hbmPWSBUTTON = (HBITMAP)LoadBitmap(hInst_PWSBUTTON, MAKEINTRESOURCE(IMG_PWS_BUTTON));
    cout<<"Load PWS Bitmap: "<<hbmPWSBUTTON<<endl;
    hbmPWSCommandOVERVIEW=(HBITMAP)LoadBitmap(hInst_PWSCOMMANDTB,  MAKENTRESOURCE(IMG_PWS_COMMAND_OVERVIEW));
    hbmPWSCommandDOCUMENT=(HBITMAP)LoadBitmap(hInst_PWSCOMMANDTB, MAKEINTRESOURCE(IMG_PWS_COMMAND_DOCUMENT));
    hbmPWSCommandNEWFILE=(HBITMAP)LoadBitmap(hInst_PWSCOMMANDTB, MAKEINTRESOURCE(IMG_PWS_COMMAND_NEWFILE));
    hbmPWSCommandCLOSE=(HBITMAP)LoadBitmap(hInst_PWSCOMMANDTB, MAKEINTRESOURCE(IMG_PWS_COMMAND_CLOSE));
    cout<<"CREATE:"<<SourceStudioConfiguration.error<<endl<<endl;
    cout<<"Load PWS Command Toolbar Bitmap: "<<hbmPWSCommandOVERVIEW<<endl;
    cout<<"CREATE 277:"<<SourceStudioConfiguration.error<<endl<<endl;
    SSMAIN_REBARWINDOW = CreateWindowEx(WS_EX_TOOLWINDOW|WS_EX_TRANSPARENT, REBARCLASSNAME,NULL,            WS_CHILD|WS_BORDER|RBS_VARHEIGHT|TBS_HORZ|RBS_BANDBORDERS|CCS_NODIVIDER|CCS_NOPARENTALIGN,0,0,0,0,hwnd, NULL, 0, 0);     
    SSMAIN_EXPLORERWINDOW=CreateWindowEx(WS_EX_TRANSPARENT,"button",NULL, BS_GROUPBOX|WS_CHILD,0,79,150,SSMAIN_HEIGHT-157,hwnd, (HMENU)SSMAIN_EXPLORERWINDOW_MENU, SSMAIN_EXPLORERBAR_HINSTANCE, 0);     
    //SSMAIN_EXPLORERWINDOW_REBAR=CreateWindowEx(WS_EX_TOOLWINDOW|WS_EX_TRANSPARENT, REBARCLASSNAME, NULL, WS_CHILD|WS_BORDER|RBS_VARHEIGHT|TBS_HORZ|RBS_BANDBORDERS|CCS_NODIVIDER|CCS_NOPARENTALIGN, 0,0,0,0,SSMAIN_EXPLORERWINDOW,NULL,0,0);     
    SSMAIN_NAVIGATIONTOOLBAR=CreateWindowEx(WS_EX_TOOLWINDOW|WS_EX_TRANSPARENT, "TOOLBARWINDOW32", NULL, WS_CHILD|WS_VISIBLE|WS_CLIPSIBLINGS|TBSTYLE_TOOLTIPS|TBSTYLE_FLAT|TBSTYLE_ALTDRAG|TBSTYLE_LIST|CCS_NODIVIDER|CCS_NOPARENTALIGN|CCS_ADJUSTABLE|CCS_NORESIZE, 0, 0, 0, 0,SSMAIN_REBARWINDOW, (HMENU)IDC_NAVIGATIONTOOLBAR, GetModuleHandle(NULL), NULL);
    SSMAIN_EXPLORERWINDOW_OVERVIEW=CreateWindowEx(0,"button", NULL,BS_BITMAP|BS_USERBUTTON|BS_TEXT|WS_CHILD|WS_VISIBLE|WS_CLIPSIBLINGS, 4, 12, 18, 18,SSMAIN_EXPLORERWINDOW, (HMENU)IDC_EXPLORERWINDOW_REBAR_COMMANDBAR, GetModuleHandle(NULL), NULL);
    SSMAIN_EXPLORERWINDOW_DOCUMENT=CreateWindowEx(0, "button",NULL,BS_BITMAP|BS_USERBUTTON|BS_TEXT|WS_CHILD|WS_VISIBLE|WS_CLIPSIBLINGS, 24, 12, 18, 18,SSMAIN_EXPLORERWINDOW, (HMENU)IDC_EXPLORERWINDOW_REBAR_COMMANDBAR, GetModuleHandle(NULL), NULL);
    SSMAIN_EXPLORERWINDOW_NEWFILE=CreateWindowEx(0,"button",NULL, BS_BITMAP|BS_USERBUTTON|BS_TEXT|WS_CHILD|WS_VISIBLE|WS_CLIPSIBLINGS, 44, 12, 18, 18,SSMAIN_EXPLORERWINDOW, (HMENU)IDC_EXPLORERWINDOW_REBAR_COMMANDBAR, GetModuleHandle(NULL), NULL);
    SSMAIN_EXPLORERWINDOW_CLOSE=CreateWindowEx(0,"button",NULL, BS_BITMAP|BS_USERBUTTON|BS_TEXT|WS_CHILD|WS_VISIBLE|WS_CLIPSIBLINGS, 62, 12, 18, 18,SSMAIN_EXPLORERWINDOW, (HMENU)IDC_EXPLORERWINDOW_REBAR_COMMANDBAR, GetModuleHandle(NULL), NULL);

    //SSMAIN_PARENTCONTAINER=CreateWindow("SYSTABCONTROL32","", WS_EX_COMPOSITED|WS_CHILD|WS_VISIBLE,100,100,0,0,hwnd,(HMENU)ID_PARENTCONTAINER,SSMAIN_PARENTCONTAINER_HINSTANCE, NULL);                  
    SSMAIN_STATIC_RTF_CONTAINER=CreateWindowEx(WS_EX_TRANSPARENT|WS_EX_CLIENTEDGE, "static","",WS_CHILD,0,0,0,0,hwnd,(HMENU)IDC_STATIC_RTF_CONTAINER,0,0);
    SSMAIN_STATIC_RTFCONTROL_PARENT_HSCROLL=CreateWindow("SCROLLBAR","", WS_EX_COMPOSITED|WS_CHILD|WS_VISIBLE|SBS_BOTTOMALIGN,100,100,20,20,SSMAIN_STATIC_RTF_CONTAINER,(HMENU)IDC_STATIC_RTFCONTROL_PARENT_HSCROLL,SSMAIN_PARENTCONTAINER_HINSTANCE,NULL);        

    SSMAIN_LISTBOXRTFCOUNT= CreateWindowEx(0,"LISTBOX",NULL, WS_CHILD|WS_CLIPSIBLINGS|ECO_AUTOVSCROLL|LBS_NOINTEGRALHEIGHT|LBS_NOTIFY|WS_VISIBLE|WS_GROUP, 0,0,0,0,SSMAIN_STATIC_RTF_CONTAINER,(HMENU)IDC_LISTBOXRTFCOUNT,NULL,NULL);             

    SSMAIN_RTFCONTROL=CreateWindow("RICHEDIT","text", WS_CHILD|WS_VISIBLE|ES_MULTILINE|ES_AUTOHSCROLL|WS_VSCROLL|WS_HSCROLL|WS_GROUP, 0,0,0,0,SSMAIN_STATIC_RTF_CONTAINER,(HMENU)IDC_RTFCONTROL,SSMAIN_RTFCONTROL_HINSTANCE,0);

    SSMAIN_TOOLBAR=CreateWindowEx(WS_EX_TOOLWINDOW|WS_EX_TRANSPARENT, "TOOLBARWINDOW32", NULL, WS_CHILD|WS_VISIBLE|WS_CLIPSIBLINGS|TBSTYLE_TOOLTIPS|TBSTYLE_FLAT|TBSTYLE_ALTDRAG|TBSTYLE_LIST|CCS_NODIVIDER|CCS_NOPARENTALIGN|CCS_ADJUSTABLE|CCS_NORESIZE, 0, 0, 0, 0,hwnd, (HMENU)IDC_TOOLBAR, GetModuleHandle(NULL), NULL);
    SSMAIN_STATUSBAR = CreateWindow("MSCTLS_STATUSBAR32", "", WS_EX_COMPOSITED|WS_CHILD|WS_VISIBLE, 100, 100, 0, 0, hwnd, NULL, 0, NULL);                          

    cout<<"CREATE 300:"<<SourceStudioConfiguration.error<<endl<<endl;   SendMessage(SSMAIN_STATUSBAR,SB_SETPARTS,(WPARAM)3,(LPARAM)&panes);
    SSMAIN_TOOLBARSYNTAX = CreateWindowEx(WS_EX_TOOLWINDOW|WS_EX_TRANSPARENT, "TOOLBARWINDOW32", NULL, WS_CHILD|WS_VISIBLE|WS_CLIPSIBLINGS|TBSTYLE_TOOLTIPS|TBSTYLE_FLAT|TBSTYLE_ALTDRAG|TBSTYLE_LIST|CCS_NODIVIDER|CCS_NOPARENTALIGN|CCS_ADJUSTABLE|CCS_NORESIZE, 0, 0, 0, 0,SSMAIN_REBARWINDOW, (HMENU)IDC_TOOLBARSYNTAX, GetModuleHandle(NULL), NULL);
    SSMAIN_PWSBUTTON = CreateWindowEx(WS_EX_TRANSPARENT, "static", NULL, SS_BITMAP|TBSTYLE_TOOLTIPS|SS_NOTIFY|WS_CHILD|WS_VISIBLE, 50, 50, 32, 32, hwnd, (HMENU)IDC_PWSBUTTON, 0, 0);     
                                                                                                         SSMAIN_TOOLTIP = CreateWindowEx(0, TOOLTIPS_CLASS, 0, WS_POPUP|TTS_ALWAYSTIP, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, hwnd, 0, SSMAIN_HINSTANCE, 0); 
```

现在由于某种原因，`SSMAIN_RTFCONTROL=CreateWindow("RICHEDIT","...`当我显示`cout<<"CREATE 300:"<<SourceStudioConfiguration.error<<endl<<endl;` 文本后都是随机文本。`SSMAIN_RTFCONTROL=CreateWindow("RICHEDIT","...`现在，如果我在它应该正确显示之前使用相同的东西。

我的问题是它为什么要这样做？

此外，如果我忽略`SSMAIN_RTFCONTROL=CreateWindow("RICHEDIT","...` 作为注释，它会像它应该的那样工作，但是在 cmd 窗口上再多几行之后，它会再次显示为随机文本。

有什么我看不到的吗？就像太多的信息开始弄乱错误空间并且可能在其中设置一些东西，它不应该？

另外据我所知，在重新安装我的操作系统之前我没有遇到这个问题。

谢谢，我对此感到非常困惑，如果您需要更多信息，请告诉我，我会发布它们

另外，我尝试通过应用它所说的空格来格式化代码，但有时它不允许在行前有任何空格，有时它会这样做，所以我不知道这是怎么回事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:16:44.063

好吧，伙计们，这是解决方案，即使我不知道为什么这有任何意义......

```
class INI_{    

    public:
    const char* error;
    stringstream CharToStr2;
    string errordesc;
    Layout layout;      
    Settings settings;  
    string file; 

    int OpenFile(string open_file){
    CharToStr2.str("");
    ifstream SSMAIN_FILE_SETTINGS; 
    CharToStr2<<open_file;
    cout<<"CharToStr: "<<CharToStr2<<endl;
    cout<<"CharToStr.str(): "<<CharToStr2.str()<<endl; 
    cout<<"CharToStr.str.c_str(): "<<CharToStr2.str().c_str()<<endl;

    SSMAIN_FILE_SETTINGS.open(CharToStr2.str().c_str());
    if(!SSMAIN_FILE_SETTINGS){
        CharToStr2<<" is currupt or not found!. Loading default configuration!";
        cout<<"STRING1:"<<CharToStr2<<endl<<endl;
        cout<<"STRING2:"<<CharToStr2.str()<<endl<<endl;
        cout<<"STRING3:"<<CharToStr2.str().c_str()<<endl<<endl;
        errordesc=CharToStr2.str();
        error=errordesc.c_str(); 
        cout<<"ERROR:"<<error<<endl;   
    }
    cout <<"CLASS INI_: "<<SSMAIN_FILE_SETTINGS<<" : "<<file<<endl<<endl;
}
}; 
```

注意到我添加了一个变量字符串 errordesc 并将源流分配给它，然后将 errordesc 分配给错误

# request - 错误请求，您的浏览器发送了此服务器无法理解的请求

> ID：10309751
> 
> 赞同：46
> 
> 时间：2012-04-25T05:20:06.670
> 
> 标签：request

有两个应用服务器和一个交换机。当我使用应用程序服务器 ip 访问应用程序时，它工作正常。但是，如果我在我的 url 中使用 switch ip 错误请求错误仅针对 firefox 和 chrome 仅针对少数链接抛出。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-16T15:21:40.827

[这](http://www-01.ibm.com/support/docview.wss?uid=swg21384722)是 ibm 对此问题的详细解释和解决方案。

**问题（摘要）**

对 HTTP 服务器的请求失败，响应代码为 400。

**症状**

来自浏览器的响应可能如下所示：

错误请求 您的浏览器发送了此服务器无法理解的请求。请求头字段的大小超过服务器限制。

HTTP Server Error.log 显示以下消息：“请求失败：读取标头错误”

**原因**

这通常是由于 Cookie 非常大，因此请求标头字段超出了为 Web Server 设置的限制。

**诊断问题**

为了帮助诊断问题，您可以在 httpd.conf 中的 LogFormat 指令中添加以下内容： error-note: %{error-notes}n

**解决问题**

对于服务器端：增加 httpd.conf 中指令 LimitRequestFieldSize 的值：LimitRequestFieldSize 12288 或 16384 对于如何设置 LimitRequestFieldSize，请检查[增加 Apache 中 LimitRequestFieldSize 的值](https://serverfault.com/questions/413984/increase-the-value-of-limitrequestfieldsize-in-apache)

对于客户端：清除 Web 浏览器的缓存应该没问题。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-07-28T17:38:15.727

如果您使用 2.2.15-60 以上版本的 Apache httpd Web 服务器，那么也可能是因为`_`主机名中的下划线。

[https://ma.ttias.be/apache-httpd-2-2-15-60-underscores-hostnames-now-blocked/](https://ma.ttias.be/apache-httpd-2-2-15-60-underscores-hostnames-now-blocked/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-02-05T04:08:39.560

我刚刚从浏览器中删除了我存储的 cookie、站点数据和缓存……它起作用了。我用的是火狐...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-03-04T07:35:36.147

确保对 url 中的所有查询参数进行 url 编码。

在我的情况下，我的 url 中有一个空格“”，我正在使用 curl 进行 API 调用，而我的 api 服务器给出了这个错误。

表示以下网址 `http://somedomain.com?key=some value with space`

应该 `http://somedomain.com/?key=some%20value%20with%20space`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-11T15:29:56.973

我参加聚会有点晚了，但是在使用 openidc auth 模块时遇到了这个问题。

我最终注意到 cookie 没有被正确清除，并且我至少有 10 个 mod_auth_openidc_state_... cookie，只要我提出请求，所有这些都会由我的浏览器发送。

如果这听起来很熟悉，请仔细检查您的 cookie！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-09T14:59:44.317

我正在使用特殊字符测试我的应用程序并观察到相同的错误。经过一番研究，事实证明**%**符号是原因。我不得不将其修改为编码表示**%25**。现在一切都很好，感谢下面的帖子

[https://superuser.com/questions/759959/why-does-the-percent-sign-in-a-url-cause-an-http-400-bad-request-error](https://superuser.com/questions/759959/why-does-the-percent-sign-in-a-url-cause-an-http-400-bad-request-error)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-18T06:44:20.340

就我而言：

在标题中

> 内容类型`space``space`

或者

> 内容类型`tab`

有两个空格或制表符

当我删除它然后它工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-12T00:19:18.170

就我而言，这是一个**与 cookie 相关的**问题，我有许多价值非常大的 cookie，这就是导致问题的原因。

[您可以在stackoverflow.com](https://stackoverflow.com)上复制此问题，只需打开控制台并输入以下内容：

```
[ ...Array(5) ].forEach((i, idx) => {
    document.cookie = `stackoverflow_cookie${idx}=${'a'.repeat(4000)}`;
}); 
```

那是什么？

我正在创建 5 个长度或值为 4000 字节的字符串的 cookie；然后重新加载页面，你会看到同样的问题。

我在[google.com](https://google.com)上尝试过，您会收到错误消息，但它们会自动为您清除 cookie，这是重新开始的一个不错的后备方案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-09T05:59:54.727

如果您在 WordPress 网站上收到此错误，请检查以下解决方案。

1.  损坏的浏览器缓存和 Cookie：删除您的 Cookie 并清除缓存
2.  重启你的服务器

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-24T03:48:32.870

对于 GET 请求，请确保传递的参数是 url 编码的。如果您使用的是 php，则可以使用[urlencode](https://www.php.net/manual/en/function.urlencode.php)函数

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-20T09:33:57.450

检查您的数据类型是否正确。

例如：如果您发送文件，您需要考虑发送文件的完整对象

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-05-21T13:04:24.663

在我的 magento2 网站中，单击产品时显示完全相同的错误，

我的解决方案是去编辑搜索引擎优化的值 - 这个产品的 URL 键，

确保 URL Key 中只有字母、数字和 -，例如 100-washed-cotton-duvet-cover-set，删除所有其他特殊字符，例如 % 。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-11-01T18:37:17.243

当我`Bad Request, Your browser sent a request that this server could not understand` 尝试使用`curl`.
我通过`scp`将文件从源机器复制到目标机器来解决它。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-08-19T12:06:33.470

如果您遇到同样的问题并且其他解决方案均无效，请再次检查 url。

在我的情况下，它最终是一个空格，当它被添加到 Cronjob 时，也有人不小心复制了一个空格。

# oracle - 如何在Oracle存储过程中编写动态sql？

> ID：10309752
> 
> 赞同：1
> 
> 时间：2012-04-25T05:20:24.063
> 
> 标签：oracle, stored-procedures, dynamic-sql

基本上在我的更新 sql 查询列名将是动态的

```
update bi_employee set <this_is_dynamic_column> where emp_id = 12 
```

以下是我到目前为止编写的存储过程。

```
CREATE OR replace PROCEDURE Sp_run_employee_updates
IS
  CURSOR c_emp IS
    SELECT *
    FROM   BI_EMPLOYEE_UPDATE
    WHERE  EFFECTIVE_DATE = To_date('30-Apr-2012', 'dd-mm-yy');
BEGIN
    FOR employee_update IN c_emp LOOP
        declare update_sql varchar2(225);
        update_sql := 'UPDATE BI_EMPLOYEE   SET     '
                      || employee_update.column_name
                      || '= employee_update.new_value  WHERE     emp_id = '
                      || employee_update.employee_id;
    END LOOP;
END; 
```

它给了我以下错误

> 错误（17,13）：PLS-00103：在预期以下情况之一时遇到符号“=”：常量异常表 long double ref char 时间时间戳间隔日期二进制国家字符 nchar 符号“”被替换为“=”继续。

* * *

> 错误（22,5）：PLS-00103：在预期以下情况之一时遇到符号“UPDATE”：开始函数杂注过程子类型类型当前游标删除之前存在符号“开始”替换“更新”以继续。

* * *

> 错误（31,6）：PLS-00103：遇到符号“;” 当期待以下之一时：循环

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T05:39:28.963

a- 这应该是这样的：

```
to_date('30-Apr-2012','dd-mon-yyyy'); 
```

b- 你可以这样做：

```
CREATE OR REPLACE
PROCEDURE SP_RUN_EMPLOYEE_UPDATES IS  

  update_sql varchar2(225);

  CURSOR c_emp IS
   SELECT * 
   FROM BI_EMPLOYEE_UPDATE 
   WHERE EFFECTIVE_DATE = to_date('30-Apr-2012','dd-mon-yyyy');

BEGIN

 FOR employee_update in c_emp LOOP

     update_sql :=  'UPDATE BI_EMPLOYEE SET ' || employee_update.column_name || 
                    '= :1 WHERE emp_id = :2' ;

  execute immediate update_sql using employee_update.new_value, employee_update.employee_id;

 END LOOP;

END SP_RUN_EMPLOYEE_UPDATES; 
```

# android - 与 Android 应用和 Google Drive 实时同步

> ID：10309756
> 
> 赞同：4
> 
> 时间：2012-04-25T05:20:40.507
> 
> 标签：android, google-drive-api

我想知道利用 Google Drive 在不同设备（Android、iOS、网络等）上的不同用户之间执行自定义文档的实时同步是否可行。我所说的类似于 Google Docs 的实时协作功能（我相信它是由于 Google Wave 的工作而添加的），但具有自定义文档格式。

例如，用户将在 Android 应用程序上操作文档中的数据，这些更改将实时（或接近）显示在与他们共享原始文档的另一个用户的 Android 或 Web 应用程序中。

这是 Google Drive 和 Google Drive SDK 旨在处理的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:40:35.807

您将不得不为此使用自己的逻辑。这里的复杂性在于推送实时更改并以有效的方式进行，因此您可能只会发送文件的差异，或者甚至更好地将操作转换发送到连接的客户端，这并非易事。Google Drive 仅用于存储整个文件，因此在您的情况下，您可以使用它来存储所有并发编辑的汇总结果。

从技术上讲，对于 web 应用程序，您可能必须使用 web-sockets 或长轮询技术或频繁轮询（我无法在这方面为您提供 Android 帮助）。

如果您有兴趣，我会先阅读以下内容：[http ://en.wikipedia.org/wiki/Operational_transformation](http://en.wikipedia.org/wiki/Operational_transformation)

# .net - wpf DataGrid 绑定到 xml 文件显示意外行为

> ID：10309757
> 
> 赞同：0
> 
> 时间：2012-04-25T05:20:48.163
> 
> 标签：.net, wpf, data-binding, datagrid, wpfdatagrid

我有一个看起来像这样的 xml 文件：

# 技术.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<Tech>
<item ID="1" CATEGORY="example_1" NAME="example1" MIN_LEVEL1 ="1"    MAX_LEVEL1 ="10"/>

.

.

<item ID="102" CATEGORY="example_1222" NAME="example1333" MIN_LEVEL1 ="1"    MAX_LEVEL1 ="10"/>

</Tech> 
```

我使用 xmldataprovider 将它绑定到数据网格的 DataGridTextColumn

```
<XmlDataProvider x:Key="tech" Source="tech.xml" XPath="Tech" /> 
```

像这样

```
<DataGrid ItemsSource="{Binding someotherclass}">

<DataGridTextColumn Binding  Source="{StaticResource tech}"   XPath="@NAME" />

.
.
.
other datagrid columns...

</DataGrid> 
```

我遇到的问题是 DataGridTextColumn 输出中的所有行都显示值“example1”

而不是人们所期望的值 example1....example1333。

请注意，datagrid ItemsSource 绑定到其他一些数据文件，只有 DataGridTextColumn 绑定到 tech.xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:54:49.773

一种可能的方法 - 使用转换器。但是您需要有一些字段或属性，它将您的`xml`数据与`someotherclass`数据连接起来。我创建了通过索引连接两个集合的示例应用程序。希望它的帮助。

![示例应用](../Images/6527c1251ee048da0cdc7e524909326c.png)

这里的代码：

MainWindow.xaml：

```
<Window x:Class="XmlAndSeparateSource.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:XmlAndSeparateSource"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>        
    <XmlDataProvider x:Key="TechSource" Source="tech.xml"  XPath="Tech/item" />
    <local:RowNumberConverter x:Key="rowNumberConverter" />
</Window.Resources>
<Grid>
    <DataGrid ItemsSource="{Binding }"
              AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTextColumn Header="xml">
                <DataGridTextColumn.Binding>
                    <MultiBinding Converter="{StaticResource rowNumberConverter}">
                        <Binding Source="{StaticResource TechSource}" />
                        <Binding RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}" />
                        <Binding />
                    </MultiBinding>
                </DataGridTextColumn.Binding>
            </DataGridTextColumn>
            <DataGridTextColumn Header="string" Binding="{Binding}" />
        </DataGrid.Columns>
    </DataGrid>
</Grid>
</Window> 
```

主窗口.cs

```
namespace XmlAndSeparateSource
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        DataContext = new List<string>()
        {
            "str1",
            "str2",
            "str3",
            "str4",
        };
        InitializeComponent();

    }
}
} 
```

RowNumberConverter.cs：

```
class RowNumberConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {

        //get the grid and the item
        IEnumerable<XmlNode> xml = values[0] as IEnumerable<XmlNode>;
        DataGrid grid = values[1] as DataGrid;
        Object item = values[2];
        int index = grid.Items.IndexOf(item);

        return xml.ElementAt(index).Attributes.GetNamedItem("NAME").Value;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

技术.xml：

```
<Tech>
    <item ID="1" CATEGORY="example_1" NAME="example1" MIN_LEVEL1 ="1" MAX_LEVEL1 ="10"/>
    <item ID="2" CATEGORY="example_2" NAME="example2" MIN_LEVEL1 ="1" MAX_LEVEL1 ="10"/>
    <item ID="3" CATEGORY="example_3" NAME="example3" MIN_LEVEL1 ="1" MAX_LEVEL1 ="10"/>
    <item ID="102" CATEGORY="example_1222" NAME="example1333" MIN_LEVEL1 ="1" MAX_LEVEL1 ="10"/>
</Tech> 
```

# php - 将照片分成 X 和 Y 部分

> ID：10309761
> 
> 赞同：0
> 
> 时间：2012-04-25T05:21:00.253
> 
> 标签：php, image, fatal-error, imagick

我有一个 96x96 的图像，我需要将它分成 36 个 16x16 的图像，下面给出的脚本可以在我的本地主机上正常工作，但不能在我的网络主机上工作。

```
 function makeTiles($name, $imageFileName, $crop_width, $crop_height)
    {
    $dir = "/pic";
    $slicesDir = "/pic/16X16";

    // might be good to check if $slicesDir exists etc if not create it.
    $ImgExt = split(".",$imageFileName);
    $inputFile = $dir . $imageFileName;

    $img = new Imagick($inputFile);
    $imgHeight = $img->getImageHeight();
    $imgWidth = $img->getImageWidth();

    $cropWidthTimes = ceil($imgWidth/$crop_width);
    $cropHeightTimes = ceil($imgHeight/$crop_height);
    for($i = 0; $i < $cropWidthTimes; $i++)
    {
        for($j = 0; $j < $cropHeightTimes; $j++)
        {
            $img = new Imagick($inputFile);
            $x = ($i * $crop_width);
            $y = ($j * $crop_height);
            $img->cropImage($crop_width, $crop_height, $x, $y);
            $data = $img->getImageBlob();
            $newFileName = $slicesDir . $name . "_" . $x . "_" . $y . ".".$ImgExt[1];
            $result = file_put_contents ($newFileName, $data);
        }
    }
} 
```

出现致命错误

```
Fatal error: Class 'Imagick' not found in myfile.php line number 
```

我的主人说：

> 不幸的是，Imagick 和图像魔法都是相同的，我们没有将它们作为 PHP 模块，我们有像 ImageMagick 二进制文件这样的二进制文件，而图像魔法路径是 /usr/local/bin。在您的脚本中包含此功能并从您的端检查网站功能。

我不知道如何解决这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:34:55.750

如果我理解正确，您将不得不使用以下命令`imagick`从脚本中调用二进制文件`exec()`：

```
 exec('/usr/local/bin/convert '.$inputFile.' -crop 96x96+ox+oy '.$newFilename); 
```

和应替换为正确的偏移值`ox`。`oy`

以下是一些可能有帮助的链接：

1.  [如何使用 php 中的 Imagick 二进制文件](https://stackoverflow.com/questions/5277601/how-do-i-use-imagemagick-binaries-from-php)
2.  [imagick - 转换命令行工具](http://www.imagemagick.org/script/convert.php)

# ruby-on-rails-3 - 使用 Rails 3.2 和 Asset Pipeline 压缩 JST 模板

> ID：10309766
> 
> 赞同：0
> 
> 时间：2012-04-25T05:21:26.257
> 
> 标签：ruby-on-rails-3, backbone.js, asset-pipeline, ejs

我通过[EJS gem](https://github.com/sstephenson/ruby-ejs)（由 rails-backbone 捆绑）使用[rails-backbone](https://github.com/codebrew/backbone-rails)和 JST 模板。这不是一个大问题，但是 JS 压缩器不会删除 JST 模板中的空格。所以，显而易见的问题是：如何让资产管道压缩 jst.ejs 模板？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:37:09.100

我的解决方案：

```
# initializers/clean_ejs_template.rb

require 'ejs'

module EJS
  class << self
    def compile(source, options = {})
      source = source.dup

      escape_quotes!(source)
      #replace_interpolation_tags!(source, options)
      #replace_evaluation_tags!(source, options)
      escape_whitespace!(source)

      # remove extra whitespace and newlines
      source.gsub!(/\s{2,}|\\n/,'')
      # use _.template instead
      "_.template('#{source}')"

      #"function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments);};" +
      #  "with(obj||{}){__p.push('#{source}');}return __p.join('');}"
    end
  end
end 
```

# java - Guava EventBus：如何从事件处理程序返回结果

> ID：10309778
> 
> 赞同：4
> 
> 时间：2012-04-25T05:22:03.090
> 
> 标签：java, events, event-handling, guava

我有一个 Web 服务，它从另一个系统接收 xml 事件，使用特定的工作流程处理它们，并将潜在错误列表作为 HTTP 响应发送回。

事件处理工作流由几个使用[Guava 的 EventBus实现的处理程序（比如说：](http://code.google.com/p/guava-libraries/wiki/EventBusExplained) *Preprocessor*、*Persister*和*Validator* ）组成。处理程序相互发送事件。像这样的东西：

```
public class RequestHandler {

    @RequestMapping
    public Errors handleRequest(String xmlData) {
        eventBus.post(new XmlReceivedEvent(xmlData));
        ...
        return errors; // how to get errors object from the last handler in chain ? 
    }
}

public class Preprocessor {

    @Subscribe
    public void onXmlReceived(XmlReceivedEvent event) {
       // do some pre-processing
       ...  
       eventBus.post(new PreprocessingCompleteEvent(preprocessingResult)); 
    }
}

public class Persister {

    @Subscribe
    public void onPreprocessingComplete(PreprocessingCompleteEvent event) {
       // do some persistence stuff
       ...    
       eventBus.post(new PersistenceCompleteEvent(persistenceResult)); 
    }
}

public class Validator {

    @Subscribe
    public void onPersistenceComplete(PersistenceCompleteEvent event) {
       // do validation
       ...    
       eventBus.post(new ValidationCompleteEvent(errors)); // errors object created, should be returned back to the RequestHandler 
    }
} 
```

问题是：**如何将***Validator*处理程序的处理结果深度返回到起点（*RequestHandler*），以便用户可以接收到 HTTP 响应？

我考虑两种选择：

1.  将错误对象设置为初始 XmlReceivedEvent 并在处理完成后检索它：

    ```
    public class RequestHandler {

        @RequestMapping
        public Errors handleRequest(String xmlData) {
            XmlReceivedEvent event = new XmlReceivedEvent(xmlData);
            eventBus.post(event);
            ...
            return event.getErrors(); 
        }
    } 
    ```

但是，在这种情况下，我必须将错误对象传递给链中的每个事件，以使其可供*Validator*使用真实数据填充它。

1.  *将RequestHandler*从*Validator*订阅到*ValidationCompleteEvent* ，其中包含填充的错误对象。

     *```
    public class RequestHandler {

        private Errors errors;

        @RequestMapping
        public Errors handleRequest(String xmlData) {
            XmlReceivedEvent event = new XmlReceivedEvent(xmlData);
            eventBus.post(event);
            ...
            return this.errors; // ??? 
        }

        @Subscribe
        public void onValidationComplete(ValidationCompleteEvent event) {
            this.errors = event.getErrors();
        }
    } 
    ```* 

 *但是，不幸的是，*RequestHandler*是一个 Spring 无状态服务（单例），所以我想避免在类字段中保存任何数据。

欣赏任何想法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T13:46:35.143

If you want a workflow like that, you shouldn't be using a Guava `EventBus` for it. `EventBus` is specifically intended to allow events to be posted to subscribers without the event poster knowing or caring about what those subscribers are... as such, you can't return results to the poster of an event from subscribers.

It sounds to me like you should be doing something much more straightforward here, like injecting your preprocessor, persister and validator and calling their methods directly.*

# android - 基于新建的android源码启动模拟器

> ID：10309779
> 
> 赞同：1
> 
> 时间：2012-04-25T05:22:04.380
> 
> 标签：android, build, emulation, jit, dalvik

我已经下载了 android 源代码并对 `dalvik/vm/interp/Jit.cpp`. 我已经使用

```
 $source build/envsetup.h 
           $lunch full-eng 
           $make -j4 
```

构建成功。现在当我启动模拟器时

```
 $out/host/linux-x86/bin/android list targets 
           $out/host/linux-x86/bin/android create avd -n virtual - t target_api 
           $out/host/linux-x86/bin/emulator -avd virtual 
```

模拟器启动但是当我使用模拟器检查 libdvm.so 文件属性时

```
 $adb shell 
           #cd system/lib 
           #ls -l lidvm.so 
```

文件创建日期为 2011-12-14。我认为模拟器是在标准的 android 4.0.3 api 上启动的（libdvm.so 可能是在那一天创建的）。现在我想让模拟器从我新建的代码开始（即我想在模拟器中查看我在 dalvik 源代码中所做的更改）。我怎么可能做到这一点？谢谢。

# php - 如何使用 Google Analytics 获得前 20 名城市名称？

> ID：10309782
> 
> 赞同：0
> 
> 时间：2012-04-25T05:22:13.960
> 
> 标签：php, google-analytics, google-analytics-api

我正在使用 Google Analytics，并希望在我的报告中显示排名前 20 的城市。此代码获取前 20 个城市的访问量，但我不知道如何根据访问量获取城市名称。

```
$geographicPages = $ga->getReport(
    array('dimensions'=>urlencode('ga:city'),
        'metrics'=>urlencode('ga:visits'),
        'max-results' => 20,  
        'sort'=>'-ga:visits',
        'filters'=>'ga:city!%3DSurat'
    )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:57:11.167

我得到了这个问题的答案代码是

```
$geographicPages = $ga->getReport(
        array('dimensions'=>urlencode('ga:city'),
            'metrics'=>urlencode('ga:visits'),
            'max-results' => 20,  
            'sort'=>'-ga:visits',
            'filters'=>'ga:city!%3DSurat'
            )
        );

if(count($geographicPages)>0)
{
     foreach($geographicPages as $cityname=>$curGeoPage)
     {
          echo $cityname." : ".$curGeoPage['ga:visits'];
     }
} 
```

# python - 如何“截断”相同长度元组的元组的最后一列？

> ID：10309783
> 
> 赞同：1
> 
> 时间：2012-04-25T05:22:31.857
> 
> 标签：python, tuples

假设我有

```
x = ((1, 2, 3), (4, 5, 6), (7, 8, 9)) 
```

我怎么去

```
x = ((1, 2), (4, 5), (7, 8)) 
```

?

我想出的唯一方法是使用列表理解然后转换回元组：

```
x = tuple([n[1:len(n)] for n in x]) 
```

但我觉得这是一种丑陋的做法......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T05:25:06.650

```
In [1]: x = ((1, 2, 3), (4, 5, 6), (7, 8, 9))

In [2]: tuple(a[:-1] for a in x) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T05:24:24.513

您可以使用生成器表达式而不是列表推导（它们几乎是一样的）：

```
x = tuple(n[1:] for n in x) 
```

请注意，这不会给您上面的内容。如果你想切断你真的应该这样做：

```
x = tuple(n[:-1] for n in x) 
```

# c - Unix 最大文件描述符

> ID：10309784
> 
> 赞同：1
> 
> 时间：2012-04-25T05:22:54.080
> 
> 标签：c, system-calls, file-descriptor

**我最近编写了一个程序来计算每个进程**打开的文件描述符的最大数量。

本质上是

```
int fd = creat("somefile.dat");
int count = 1;

while(1)
{

 int s = dup(fd);

  if (s == -1)
    break;

  count++;
}

printf("Max fd: %d", s); 
```

现在我将如何应用这个相同的程序，但要找到**系统范围**而不是每个进程的最大 fd 量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T02:53:51.860

我有多种解决方案的想法：

1 - 将 MINIX 中允许的最大进程数乘以每个进程的最大 FD

*   我唯一担心的是，有某种硬上限低于或高于进程数 * 每个进程的 FD

2 - 创建一个多次运行上述程序的程序

*   规定是您必须以某种方式将计数返回到原始程序并对其求和
    *   另外，我不知道如何从程序中调用其他进程并从中检索返回值。
    *   此外，如何同时运行所有进程？以及您如何知道 MAX # 进程，以及您如何知道何时停止运行进程？

PS你一定在我的ecs150班，不是吗？

# java - Richfaces的excel导出：dataTable

> ID：10309786
> 
> 赞同：1
> 
> 时间：2012-04-25T05:23:05.937
> 
> 标签：java, jakarta-ee, jsf-2, richfaces

我正在尝试为我实现 excel 导出，这导致错误以下是我尝试过的方式

```
 <h:form id="excelExport"> 
        <a4j:outputPanel id="matched">            
            <h:panelGrid  width="100%" border="1">
                <rich:dataTable id="tblMatched" value="#{SampleBean.exportDataList}" var="iList" bgcolor="#ffffff" border="1" cellpadding="4" cellspacing="3" rows="10" width="100%" dir="LTR" frame="hsides" rules="all" >
                    <h:column>
                        <f:facet name="header">
                            <h:outputText style="" value="Feed Id" />
                        </f:facet>
                        <h:outputText value="#{iList.feedId}" > </h:outputText>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputText style="" value="Data Source Name" />
                        </f:facet>
                        <h:outputText value="#{iList.sourceName}" > </h:outputText>
                    </h:column>
                </rich:dataTable>
                <h:commandLink value="Export table" action="#{org.jboss.seam.excel.excelExporter.export('excelExport:tblMatched')}" />                    
            </h:panelGrid>
            </a4j:outputPanel>
        </h:form> 
```

当我单击链接时，出现以下错误

> 严重：javax.el.PropertyNotFoundException：/SampleExport.xhtml @76,139 action="#{org.jboss.seam.excel.excelExporter.export('excelExport:tblMatched')}"：目标无法到达，标识符 'org' 解析为 null javax.faces.el.E​​valuationException: javax.el.PropertyNotFoundException: /SampleExport.xhtml @76,139 action="#{org.jboss.seam.excel.excelExporter.export('excelExport:tblMatched')}"：目标不可达，标识符'org' 解析为 null

我用过 jboss-seam-excel.jar 和 jxl.jar

有什么建议可以解决我的问题...？？？？

# sql - 一个查询，三个表，显示左表中的所有行？

> ID：10309787
> 
> 赞同：0
> 
> 时间：2012-04-25T05:23:13.500
> 
> 标签：sql, join

我需要为三个表提取数据，左表需要始终显示在“位置”中调用的行。我的问题是，由于有三张桌子，我无法让它工作。我已经疯狂地尝试连接，它只在做两个表时有效，但是一旦我得到第三个它就不起作用，它只会显示所有三个表中不为空的行。我需要能够在第一个表中显示指定的 ID，无论其他两个表对于指定的 ID 是否完全为空

我有一个数据库，我只有读取权限，所以改变它的结构是行不通的。下面是我的 SQL 代码，它可以正常工作以获取我想要的数据，但有一个 ID 没有显示，因为它没有指定日期的数据。

```
select
    [User].Id,
    [User].Name,
    convert(float,round(sum(SalesOrderJournalDetail.Price*SalesOrderJournalDetail.Shipped),2)) as 'Sales Yesterday', 
    convert(float,round(sum(SalesOrderJournalDetail.ActualCost*SalesOrderJournalDetail.Shipped),2)) as 'Cost Yesterday',
    count(distinct(SalesOrderJournalDetail.SalesOrderId)) as 'Orders Yesterday', 
    count(SalesOrderJournalDetail.SalesOrderId) as 'Lines Yesterday',
    convert(float,UserTotal.SalesMTD,2) as 'Sales MTD',
    round(convert(float,UserTotal.CostMTD,2),2) as 'Cost MTD'
from 
    [User], UserTotal, SalesOrderJournalDetail
where
    [User].Id in (' 725',' 150',' 239',' 225',' 209',' 227',' 222',' 232',' 241',' 215',' 214',' 722',' 134',' 201',' 238',' 721','M104',' 244',' 245',' 104')
and convert(varchar(10),SalesOrderJournalDetail.InvoiceDate,111) = '2012/04/19'
    and [User].Id=SalesOrderJournalDetail.SalesPersonUserId
    and SalesOrderJournalDetail.SalesPersonUserId=UserTotal.UserId
group by [User].Id, [User].Name, SalesOrderJournalDetail.SalesPersonUserId, UserTotal.UserId, UserTotal.SalesMTD, UserTotal.CostMTD 
order by [User].Name 
```

为了帮助解释结构，[User] 表显示用户的 ID 号和名称，SalesOrderJournalDetail 表显示当天的销售额，UserTotal 表显示每月的销售额数据（通过一些计算）。

我需要从后两个表中显示当天的销售额和每月的销售额，并且需要从第一个表中提取用户的姓名和 ID。

这三个表的唯一数据是 [User].Id、SalesJournalDetail.SalesPersonUserId 和 UserTotal.UserId

无论该用户是否没有日销售额或月销售额，我有什么想法可以让它显示 where cluase 中显示的所有 ID？

哦，这是使用 Microsoft SQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:58:40.290

使用您的结构创建表格。有非常小的列名更改。请相应更改。ActualCost 是我表中的 ActualPrice。

以下将是查询

```
SELECT 
    ISNULL(SalesJournalUserId,TotalSalesUserId) AS UserId,
    ISNULL(SalesJournalUserName,TotalSalesUserName) AS UserName,
    [Orders Yesterday],
    [Lines Yesterday],
    [Sales Yesterday],
    [Cost Yesterday],
    [Sales MTD],
    [Cost MTD]  FROM
(
    (
    SELECT 
        SalesUser.Id as SalesJournalUserId,
        SalesUser.Name as SalesJournalUserName,
        [Orders Yesterday],
        [Lines Yesterday],
        [Sales Yesterday],
        [Cost Yesterday]

    FROM
        [SalesUser]
    LEFT JOIN
    (
        select
            [User].Id,
            [User].Name,
            Count(distinct(SalesOrderJournalDetail.ID)) as 'Orders Yesterday',
            Count((SalesOrderJournalDetail.ID)) as 'Lines Yesterday',
            convert(float,round(sum(SalesOrderJournalDetail.Price*SalesOrderJournalDetail.Shipped),2)) as 'Sales Yesterday', 
            convert(float,round(sum(SalesOrderJournalDetail.ActualPrice*SalesOrderJournalDetail.Shipped),2)) as 'Cost Yesterday'  
        from 
            [SalesUser] as [User]
        LEFT JOIN SalesOrderJournalDetail
        on [User].Id = SalesOrderJournalDetail.SalesPersonUserId    
        where
        --[User].Id =1 and
        convert(varchar(10),SalesOrderJournalDetail.InvoiceDate,111) = '2012/04/19'
        group by [User].Id,[user].Name
    )  SOJD

    ON SalesUser.Id = SOJD.ID
    ) SOJDALLUSERS

INNER JOIN
    (
    SELECT 
        SalesUser.Id as TotalSalesUserId,
        SalesUser.Name as TotalSalesUserName,
        [Sales MTD],
        [Cost MTD] 
    FROM
        [SalesUser]

    LEFT JOIN
    (
        select
        [User].Id,
        [User].Name,
        convert(float,sum(UserTotal.SalesMTD),2) as 'Sales MTD',
        round(convert(float,sum(UserTotal.CostMTD),2),2) as 'Cost MTD' 
        from 
        [SalesUser] as [User]
        LEFT JOIN UserTotal
        on [User].Id = UserTotal.UserId    
        --where
        --[User].Id =1     
        group by [User].Id,[User].name
    ) AS SOUT 
    ON SalesUser.Id = SOUT.ID
    ) SOUTALLUSERS

    ON SOJDALLUsers.SalesJournalUserId = SOUTALLUSERS.TotalSalesUserId

) 
```

工作原理 子查询 SOJDALLUSERS：将 SalesUser 表与您的 SalesOrderJournalTable 连接起来。为每个用户获取数据

子查询 SOUT ：将 SalesUser 表与 UserTotal 表连接起来。为每个用户获取数据。如果我没记错的话，您的 SalesMTD 和 CostMTD 应该是每个用户的“总和”。你错过了。

上述两个结果是内部连接的，以获取每个用户的详细信息。由于上述子查询为 sales 表中的每个用户带来数据，因此上述两个子查询的内连接将保证所有用户的数据在数据丢失时具有适当的空值。

我已经创建了表格并检查了以下场景 1\. 用户的 journal 和 salestotal 表中的数据 2\. journal 表中的数据，但用户的 salestotal 表中的数据 3\. salestotal 表中的数据，但用户的 journal 表中的数据。

它工作..享受

表架构供您参考![表架构供您参考](../Images/5881b00b3ec686509b1153f8238d213d.png)

如果它为您的问题提供了一些方向，请标记为答案。做这个查询是一个很好的挑战..

# cassandra - 如何从 Hector Cassandra 的列族中检索一组 rowID 中超级列的所有值

> ID：10309791
> 
> 赞同：3
> 
> 时间：2012-04-25T05:23:26.057
> 
> 标签：cassandra, super, hector

我想根据超级列名检索不同的行 id 值。为此，我使用了此代码

```
 SuperColumnQuery<String, String, String, String> superColumnQuery =
            HFactory.createSuperColumnQuery(keyspaceOperator, se, se,se,se);
    superColumnQuery.setColumnFamily(COLUMN_FAMILY).setKey(rowID).setSuperName(superColumnName);
    QueryResult<HSuperColumn<String, String, String>> result = superColumnQuery.execute();
    //rowID contains a list of rows separated by ',' 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:58:39.033

鉴于您正在尝试根据列名选择行键，我冒昧地猜测您的数据模型是倒退的。您通常应该从外部移动 - 在行键上选择，然后在超列名称上选择，然后在列名称上选择。否则，您将无法通过迭代代码中的行来尝试匹配列名，而不是使用 Cassandra 引擎来选择您需要的内容。这种方法永远不会规模化。

所以我建议重做你的数据模型——或者如果你需要这样，考虑添加另一个 ColumnFamily 作为第一个索引。与老式 SQL 数据库相反，NoSQL 数据库（如 Cassandra）的信条是“如果你在进行非规范化 - 你做对了”。

# android - 如何在android的媒体播放器中更改用户代理？

> ID：10309792
> 
> 赞同：1
> 
> 时间：2012-04-25T05:23:43.813
> 
> 标签：android, user-agent, android-mediaplayer

> **可能重复：**
> [如何更改 android 的默认 MediaPlayer 用户代理？](https://stackoverflow.com/questions/7267502/how-to-change-androids-default-mediaplayer-user-agent)

如何更改..的默认值。**`User-Agent`**当您尝试获取 Http 流数据时，我们可以设置媒体播放器的自定义用户代理....**`MediaPlayer`****`Android`**

有谁知道怎么做？提前致谢。

# python - 如何在 Apache2.2 中托管 Django1.3.1？

> ID：10309794
> 
> 赞同：0
> 
> 时间：2012-04-25T05:23:52.550
> 
> 标签：python, windows, django, apache2, django-wsgi

我在 WindowsXP(win32) 上使用 python 2.7.2、Django 1.3.1、Apache 2.2.22。通过我在[这里](http://pradyumnajoshi.wordpress.com/2009/06/09/setting-up-mod_wsgi-for-apache-and-django-on-windows/)找到的文档，我一步一步地做了，但是当给出目录部分时

```
 `Alias /media/ C:/Programs/TestDjango/mysite/media/
    <Directory C:/Programs/TestDjango/mysite/media/>
    Order deny,allow
    Allow from all
    </Directory>
    WSGIScriptAlias / C:/Programs/TestDjango/mysite/apache/django.wsgi
    <Directory C:/Programs/TestDjango/mysite/apache>
    Order deny,allow
    Allow from all
    </Directory>` 
```

并重新启动 Apache，在打开 localhost/mysite 时出现 Microsoft Visual C++ 库运行时错误，并且 Apache 错误日志显示“渲染时捕获错误配置：加载 pyodbc 模块时出错：DLL 加载失败：动态链接库 (DLL) 初始化例程失败了。”....我的 Django 应用程序在 WAMP 中运行，但想知道单独使用 Apache2.2.22 时我哪里出错了。遵循了许多 Django 文档，但仍然相同，请帮助我找出我哪里出错了。谢谢

（身份由 guettli 修复）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T04:24:16.207

我解决了，这是版本问题，因为我使用的是 Apache 2.2.21 而不是 Apache 2.2.22，它的工作原理。我按照此[链接](http://sdtidbits.blogspot.in/2009/10/deploying-django-application-on-apache.html)中的步骤操作。

安装 Python 2.7.2、Django 1.3.1 和 Apache2.2.21 安装 modwsgi 模块。

模块文件将被命名为 mod_wsgi-win32-ap22py26-2.6.so [get mod_wsgi](http://code.google.com/p/modwsgi/downloads/list/)。

将其复制到 Apache 安装的模块目录。例如，C:/Program Files/Apache Software Foundation/Apache2.2/modules。

将其重命名为 mod_wsgi.so。右键单击-> 属性单击取消阻止并应用

打开 Apache 的 http.conf 文件。

在所有其他 LoadModule 条目之前添加行 LoadModule wsgi_module modules/mod_wsgi.so。

通过将以下内容添加到 http.conf 的末尾，为您的 Django 项目配置 Apache：

```
# Static content
    Alias /media/ C:/Programs/TestDjango/mysite/media/

    <Directory C:/Programs/TestDjango/mysite/media/>
    Order deny,allow
    Allow from all
    </Directory>

# Django dynamic content

    WSGIScriptAlias / C:/Programs/TestDjango/mysite/apache/django.wsgi

    <Directory C:/Programs/TestDjango/mysite/apache>
    Order deny,allow
    Allow from all
    </Directory>` 
```

icardtest 是 Django 项目的根目录。icardtest 下面的路径将特定于您的项目。此配置通过 URL 空间 /media/ 为所有静态媒体提供服务，其余所有通过 WSGI 和 Django 提供服务。创建一个文件 django.wsgi 并向其中添加以下内容：

```
 ` import os
        import sys

        sys.path.append('C:/Programs/TestDjango')
        os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'

        import django.core.handlers.wsgi
        application = django.core.handlers.wsgi.WSGIHandler()` 
```

重启阿帕奇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:07:33.580

您的错误与您的 python 设置有关，而不是 Apache。

`Error loading pyodbc module: DLL load failed: A dynamic link library (DLL) initialization routine failed.`

这意味着您与 Apache 一起使用的 Python 无法加载该`pyodbc`模块。修复此错误后，您可以继续。

# iphone - iCloud 是否仅适用于 UIDocument 和 CoreData（如何使用 iCloud 上的数据备份任何文件夹）

> ID：10309795
> 
> 赞同：1
> 
> 时间：2012-04-25T05:23:58.367
> 
> 标签：iphone, objective-c, ios5, backup, icloud

我阅读了苹果文档和其他一些链接，发现只有 UIDocument 或 Core Data 使用 iCloud 的示例。

我在名为“backUPFolder”的文档目录中创建了一个文件夹，其中包含一些图像和其他文件。

我想问一下，是否可以将这个 backUPFolder 移动到 iCloud 中，并且所有数据都存在于这个文件夹中。

如果是，请提供一些有用的链接或建议我可以遵循的方法。

我的要求是在 iCloud 上备份我的数据。

请帮帮我。我被困在这里。

任何建议将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:15:28.077

我也只看过 UIDocument 和 Core Data 的例子。想到的是将您的图片和文档转换为核心数据 blob 并将它们与核心数据一起存储。这也可能非常有效。

或者，您可以查看[Dropbox API](https://www.dropbox.com/developers/start/setup#ios)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:23:31.087

如果您的文件夹位于应用程序的 Documents 或 Library 文件夹中，假设用户启用了 iCloud（并且您没有明确将文件标记为 ），它将自动备份到 iCloud `NSURLIsExcludedFromBackupKey`。

作为开发人员，与 iCloud 进行的任何手动交互通常都是在您的应用程序安装之间明确共享文件。如果您的要求只是备份数据，您无需执行任何操作，只需将文件夹存储在 Documents 中。

# php - 嵌套 substr php

> ID：10309801
> 
> 赞同：-1
> 
> 时间：2012-04-25T05:24:34.390
> 
> 标签：php, arrays, nested, substr

地狱所有，

我正在努力使我的代码更清洁，你们能否让我知道以下内容是否真的有效。从我的测试来看，我似乎无法分辨，因为它会随着比赛而持续。请帮助并提前感谢您。

```
$minar=array('1','2','9','0');
if ($phpmins>"2" && in_array(substr($phpmins, -1),$minar) && $phpmins<$newmax) 
```

我担心的部分是：`&& in_array(substr($phpmins, -1),$minar)`

您可以将 substr 嵌套在 in_array 中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:27:57.547

Yes you can. `substr` returns a value which is then passed to `in_array` as the first parameter. These are all equivalent in this respect:

```
in_array('foo', $minar)
in_array($var, $minar)
in_array(someFunction(), $minar) 
```

Those are the basic rules of programming and values/variables/function return values.

# matlab - matlab guis 使用 GUIDE

> ID：10309804
> 
> 赞同：0
> 
> 时间：2012-04-25T05:24:51.083
> 
> 标签：matlab, matlab-guide

我有一个主 GUI，我可以从中打开几个子 GUI。我需要编写一个代码，这样当我打开子 GUI 时，当我打开第二个子 GUI 时应该关闭第一个子 GUI，但主 GUI 应该保持打开状态。任何人都可以帮我解决代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:14:58.250

如果你有 sub gui 图形句柄（你应该），那么你应该可以随时关闭它们。尝试将关闭图形命令放在子 gui 的打开功能中。例如，如果您有两个子 gui，请在打开函数 sub gui 1 中添加一些代码，以检查 sub gui 2 是否打开，如果打开则关闭它。对 sub gui 2 执行相反的操作。

我没有时间检查这个想法，否则我会的。似乎它应该工作。

# objective-c - 使用 NSColor 和 Alpha 时 drawSwatchInRect 绘制对角线

> ID：10309807
> 
> 赞同：1
> 
> 时间：2012-04-25T05:25:15.580
> 
> 标签：objective-c, drawing, nstableview, nscolor, nsrect

我试图在我的 TableView 中非常简单地绘制一个透明的突出显示颜色：

```
if ([self isSelected]){
    self.alphaValue = 0.5f;
    NSColor * fillColor = [NSColor colorWithCalibratedRed: 100.0f/256.0f 
                                                    green: 100.0f/256.0f 
                                                     blue: 100.0f/256.0f 
                                                    alpha: 0.5];

    [fillColor drawSwatchInRect:dirtyRect];

} 
```

不过，它画了一些奇怪的东西，原始颜色和新的 alpha 颜色之间的对角线。我知道解决方案可能很简单——但我似乎无法弄清楚它是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T01:53:13.010

我认为这正是`drawSwatchInRect:`设计的目的。当您有任何 alpha 值时，色板会显示您的颜色与黑色（左上角）和白色（右下角）合成时的外观。无论 Apple UI 组件在何处显示颜色，它们都会这样做。如果您使用的颜色不是灰色阴影，则更明显。

![具有不同不透明度的色样](../Images/1bdd493cdd4f3f86d5eb6f995bb3f25b.png)

如果你想用特定颜色填充一个矩形，让背景显示出来，试试这个：

```
[fillColor set];
NSBezierPath *rectPath = [NSBezierPath bezierPathWithRect:dirtyRect];
[rectPath fill]; 
```

虽然这适用于填充矩形，但请注意`dirtyRect`并不总是相同的形状。对于大多数绘图，您希望使用`bounds`正在绘制的视图。

# java - Android XML 图形布局查看器 - 无法实例化自定义视图，找不到类？

> ID：10309808
> 
> 赞同：2
> 
> 时间：2012-04-25T05:25:18.897
> 
> 标签：java, android, xml, eclipse

我有一个非常简单的自定义视图，它试图绘制`OvalShape`一个`android.graphics.drawable.shapes.OvalShape`. 所以它是 SDK 原生的。

这是错误标题：

```
com.dan.test.ui.ArcButton failed to instantiate. 
```

这是错误正文：

```
java.lang.ClassNotFoundException: android.graphics.drawable.shapes.OvalShape
at com.android.ide.eclipse.adt.internal.resources.manager.ProjectClassLoader.findClass(ProjectClassLoader.java:105)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
at java.lang.Class.getConstructor0(Unknown Source)
at java.lang.Class.getConstructor(Unknown Source)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:327)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:166)
at com.android.layoutlib.bridge.android.BridgeInflater.loadCustomView(BridgeInflater.java:205)
at com.android.layoutlib.bridge.android.BridgeInflater.createViewFromTag(BridgeInflater.java:133)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
at android.view.LayoutInflater.inflate(LayoutInflater.java:296)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:279)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:318)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1361)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1115)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:941)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.partActivated(LayoutEditorDelegate.java:477)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.partBroughtToTop(LayoutEditorDelegate.java:487)
at org.eclipse.ui.internal.PartListenerList$2.run(PartListenerList.java:87)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.runtime.Platform.run(Platform.java:888)
at org.eclipse.ui.internal.PartListenerList.fireEvent(PartListenerList.java:57)
at org.eclipse.ui.internal.PartListenerList.firePartBroughtToTop(PartListenerList.java:85)
at org.eclipse.ui.internal.PartService.firePartBroughtToTop(PartService.java:208)
at org.eclipse.ui.internal.WorkbenchPagePartList.firePartBroughtToTop(WorkbenchPagePartList.java:76)
at org.eclipse.ui.internal.WorkbenchPagePartList.fireActiveEditorChanged(WorkbenchPagePartList.java:52)
at org.eclipse.ui.internal.PartList.setActiveEditor(PartList.java:162)
at org.eclipse.ui.internal.WorkbenchPage.makeActiveEditor(WorkbenchPage.java:1355)
at org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:3629)
at org.eclipse.ui.internal.WorkbenchPage.requestActivation(WorkbenchPage.java:3159)
at org.eclipse.ui.internal.PartPane.requestActivation(PartPane.java:279)
at org.eclipse.ui.internal.EditorPane.requestActivation(EditorPane.java:98)
at org.eclipse.ui.internal.PartPane.setFocus(PartPane.java:325)
at org.eclipse.ui.internal.EditorPane.setFocus(EditorPane.java:127)
at org.eclipse.ui.internal.PartStack.presentationSelectionChanged(PartStack.java:837)
at org.eclipse.ui.internal.PartStack.access$1(PartStack.java:823)
at org.eclipse.ui.internal.PartStack$1.selectPart(PartStack.java:137)
at org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:133)
at org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:269)
at org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:278)
at org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1(DefaultTabFolder.java:1)
at org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$2.handleEvent(DefaultTabFolder.java:88)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:774)
at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:2746)
at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1433)
at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:257)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

这是我的布局 XML 的一部分：

```
<com.dan.test.ui.ArcButton
android:id="@+id/btn_arc"
android:layout_width="100dip"
android:layout_height="75dip"
android:layout_gravity="center"
/> 
```

这是我在 ArcButton 类中的 onDraw 代码：

```
@Override
protected void onDraw(Canvas canvas)
{
    super.onDraw(canvas);

    // SETUP
    int r = (int) radius;

    // BG WHITE
    int cx = this.getWidth() / 2, cy = this.getHeight() / 2;
    Paint bg_paint = new Paint();
    bg_paint.setAntiAlias(true);
    bg_paint.setARGB(255, 255, 255, 255);
    ShapeDrawable bg = new ShapeDrawable(new OvalShape()); // If removed, then ArcShape causes the same CNFE error
    canvas.drawCircle(cx, cy, r, bg_paint);

    // ROTATING ARC
    ShapeDrawable drawable = new ShapeDrawable(new ArcShape(-90, s));
    drawable.getPaint().setColor(0xff74AC23);
    drawable.setBounds(cx - (r-2), cy - (r-2), cx + (r-2), cy + (r-2));
    drawable.draw(canvas);

    invalidate();
} 
```

编辑：另外，我已经有了这些构造函数。即便如此，错误仍然发生：

```
public ArcButton(Context context, AttributeSet attrs, int defStyle)
{
    super(context, attrs, defStyle);
}

public ArcButton(Context context, AttributeSet attrs)
{
    super(context, attrs);
}

public ArcButton(Context context)
{
    super(context);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:25:09.610

找到我的代码，也许你有一些不同，也有干净的项目。

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.drawable.ShapeDrawable;
import android.graphics.drawable.shapes.ArcShape;
import android.graphics.drawable.shapes.OvalShape;
import android.util.AttributeSet;
import android.view.View;

public class Button1 extends View
{
    private int radius = 100;

     /**
     * @param context
     * @param attrs
     */
    public Button1(Context context, AttributeSet attrs) 
    {
        super(context, attrs);
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        super.onDraw(canvas);

        // SETUP
        int r = (int) radius ;

        // BG WHITE
        int cx = this.getWidth() / 2, cy = this.getHeight() / 2;
        Paint bg_paint = new Paint();
        bg_paint.setAntiAlias(true);
        bg_paint.setARGB(255, 255, 255, 255);
        ShapeDrawable bg = new ShapeDrawable(new OvalShape()); // If removed, then ArcShape causes the same CNFE error
        canvas.drawCircle(cx, cy, r, bg_paint);

        // ROTATING ARC
        ShapeDrawable drawable = new ShapeDrawable(new ArcShape(-90, 60));
        drawable.getPaint().setColor(0xff74AC23);
        drawable.setBounds(cx - (r-2), cy - (r-2), cx + (r-2), cy + (r-2));
        drawable.draw(canvas);

        invalidate();
    }
} 
```

![在此处输入图像描述](../Images/59249e90d0e12df10c12e4ad2f3eda64.png)

# c# - PsExec v 1.98 输出重定向问题

> ID：10309817
> 
> 赞同：1
> 
> 时间：2012-04-25T05:25:55.887
> 
> 标签：c#, psexec

我认为之前关于这个主题的任何问题都没有给出这个问题的答案。我使用 psexec 执行远程 exe 文件。当我在命令行中运行它时，我得到了 exe 文件的输出。`psexec.exe \\machine C:\somename.exe`.
当我使用 C sharp Process Execution 时，它要么挂起，要么不重定向输出。对于某些 exe，它超时，对于某些重定向标准输出为空，并且错误包含 Exe 退出，代码为 0。有什么方法可以捕获输出？

```
 ProcessStartInfo startInfo = new ProcessStartInfo();
        startInfo.FileName =GetPsExecPath();
        startInfo.Arguments = arguments;
        Debug.WriteLine(arguments);
        startInfo.UseShellExecute = false;
        startInfo.RedirectStandardError = true;
        startInfo.RedirectStandardOutput = true;
        startInfo.CreateNoWindow = true;
        Process process = new Process();
        process.StartInfo = startInfo;
        process.Start();
        process.WaitForExit();
        error = process.StandardError.ReadToEnd();
        output = process.StandardOutput.ReadToEnd();
        Debug.WriteLine(error);
        Debug.WriteLine(output);
        process.close(); 
```

编辑：Soln 所以这个问题主要是因为 Psexec 把很多其他的东西扔到了标准错误中，因此我们读取它们的顺序，如果我们使用 ReadToEnd() 可能会导致死锁。所以如果我们使用 BeginOutputReadLine 它就像一个魅力！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T12:26:48.127

此代码段导致死锁的几率非常高。因为您首先阅读 StandardError，然后阅读 StandardOutput。这意味着 process.StandardOutput.ReadToEnd() 在进程退出之前不会被调用。这意味着当 psexec 填满足够的字符时，它将无法刷新其 stdout 输出缓冲区。这意味着它将阻塞，因此永远不会终止。死锁城。

如果你交换这两个调用，你会有更好的机会，大多数程序将大部分输出发送到标准输出。但是，如果 psexec 出于某种原因将大量字符写入 stderr，则死锁的可能性仍然不为零。您可以通过使用 BeginOutputReadLine 和 BeginErrorReadLine 来完全消除这种情况。

# html - 如何使用 CSS 制作一组在浏览器窗口边缘流动的图像？

> ID：10309818
> 
> 赞同：0
> 
> 时间：2012-04-25T05:25:58.287
> 
> 标签：html, css, image

我正在尝试编写基于 Javascript 的图片库。现在我已经设置了代码，所以我知道图像都将处于相同的高度，但是......

如何安排我的标记和 CSS，以便所有图像都显示在一行上，并且当新图像超出浏览器窗口的宽度时，图像中“越界”的部分只是隐藏并且不显示在下一行？

我一直在尝试以各种方式对图像本身及其容器进行尝试`overflow`，但无济于事。我在这里忽略了一些简单的东西。`float``display``div`

现在标记看起来像：

```
<div id="slider">
    <img src="img1.png" /> 
    <img src="img2.png" /> 
    <img src="img3.png" /> 
</div> 
```

即使图像的组合宽度大于浏览器窗口的宽度，我应该如何设置它以使其显示在一行上？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T05:28:52.170

```
#slider {
    white-space: nowrap;
    overflow   : hidden;
    width      : 100%
} 
```

# linux - 权限被拒绝在 ubuntu 上使用 g+w 模式写入目录

> ID：10309820
> 
> 赞同：3
> 
> 时间：2012-04-25T05:26:09.913
> 
> 标签：linux, ubuntu

在 ubuntu 10.04.4 服务器上，我这样做了：

```
sudo mkdir -p /data/somedir
sudo chown -R www-data.www-data /data/somedir
sudo chmod -R g+w /data/somedir
sudo usermod -a -G www-data john ##john is current login user. 
```

. 完成这些操作后，我想在`/data/somedir`. 但是当我这样做时：

```
echo "123" > /data/somedir/123 
```

， 我有：

```
-bash: /data/somedir/123: Permission denied 
```

ls -l 输出：

```
$ ls -l /data/
total 4
drwxrwxr-x 2 www-data www-data 4096 2012-04-24 22:30 somedir 
```

问题是：为什么？在那之后我还有什么需要做的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T05:27:45.830

所做的更改`usermod`仅在以下登录时生效；您现有的登录会话还没有该`www-data`组，您可以使用`id`. 改变正在运行的进程的身份并不容易（`newgrp` *可能*有效）；最简单的处理方法是注销并重新登录。

# ios - 禁用 UITableView 水平滚动

> ID：10309821
> 
> 赞同：5
> 
> 时间：2012-04-25T05:26:48.727
> 
> 标签：ios, uitableview, uiscrollview

我用一个小框架创建了`UITableView`一个，比如 (0,0,50,50)。我想禁用水平滚动但保持垂直滚动。

我设置`self.table.bounces = NO`了，但是tableview也不能垂直滚动。结果，动画并不是那么完美。

所以有人有提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T05:50:11.140

更改tableView的内容大小，确保内容大小的宽度不大于框架大小

```
self.tableView.contentSize = CGSizeMake(self.tableView.frame.size.width, self.tableView.contentSize.height); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-01T11:46:28.397

检查表格视图的内容插入属性是否非零。如果是这样，将其重置为零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-21T22:25:01.783

您可以将`AlwaysBounceHorizontal`UITableView 的属性设置为 false，如下所示：

**迅速：**

```
self.tableView.alwaysBounceHorizontal = false 
```

**目标-C：**

```
[self.tableView setAlwaysBounceHorizontal:NO]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-12T17:17:17.043

```
self.tblViewProfile.alwaysBounceHorizontal = false // using coding 
```

或者通过**故事板/xib**

> [在情节提要或 xib 中取消勾选水平反弹选项](https://i.stack.imgur.com/3cG59.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-03T14:53:53.627

如果您已申请`tableView.contentInsetAdjustmentBehavior =`，请尝试选择值 `.scrollableAxes`而不是`.automatic`或`.always`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-25T05:34:14.063

如果您在界面构建器中创建了表格视图，则可以选择检查垂直滚动并取消选中水平滚动。

如果您没有，那么您应该尝试在界面构建器中创建它并将其分配给您的 IBOutlet

希望能帮助到你 ！

# java - 检查 MethodDeclaration 是否类似于 IMethod

> ID：10309824
> 
> 赞同：3
> 
> 时间：2012-04-25T05:26:51.830
> 
> 标签：java, abstract-syntax-tree, eclipse-jdt

有什么方法可以比较 MethodDeclaration 对象和 IMethod 对象并检查它们是否相似？或者有什么方法可以将 MethodDeclaration 对象转换为 IMethod 对象（IMethod 提供 isSimilar 函数）？

**更新：**同样，我想知道 FieldDeclaration 是否可以转换为 IField。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:45:28.537

MethodDeclaration 是一个 ASTNode，而 IMethod 是一个 JavaElement。检查这两个对象是否对应相同方法的确定方法是比较它们的 Binding。

有关如何获取 ASTNode 和 JavaElement 的绑定，请参阅[http://wiki.eclipse.org/JDT/FAQ#From_an_ASTNode_to_an_IBinding](http://wiki.eclipse.org/JDT/FAQ#From_an_ASTNode_to_an_IBinding)和[http://wiki.eclipse.org/JDT/FAQ#From_an_IJavaElement_to_an_IBinding 。](http://wiki.eclipse.org/JDT/FAQ#From_an_IJavaElement_to_an_IBinding)一旦你有了 Binding 或 Binding 键，你就可以比较它了。

# iphone - 使用 iOS 的 writeImageToSavedPhotosAlbum 时获取实际文件名

> ID：10309825
> 
> 赞同：0
> 
> 时间：2012-04-25T05:27:02.570
> 
> 标签：iphone, ios, ipad, photo

我正在编写一个 AR 应用程序，它会截取屏幕截图，然后将图像放在相册中，以便最终用户可以使用它。我正在使用 writeImageToSavedPhotosAlbum。我现在遇到的主要问题是我似乎无法获取图像的文件名。

我从 NSURL 得到如下信息： assets-library://asset/asset.PNG?id=8AD512D0-205E-424D-B466-F31CCE4F299C&ext=PNG

当我需要类似的东西时：Image_0050.png

有谁知道如何获得实际的图像名称？或者，也许我完全错了？

谢谢，内森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T14:44:47.340

您需要的信息在任何 ALAsset 的 ALAssetRepresentation 中。您需要做的就是获取当前资产的默认表示，然后您就可以访问您想要的所有信息。

```
ALAsset *asset = <some_asset>;
NSLog(@"filename %@", asset.defaultRepresentation.filename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:33:23.473

没有名字。你所拥有的只是一个 UIImage 对象。

# delphi - delphi：如何将 TGUID 转换为 PTypeInfo 指针？

> ID：10309826
> 
> 赞同：4
> 
> 时间：2012-04-25T05:27:04.683
> 
> 标签：delphi, interface, delphi-2010, rtti

我有一个 TGUID 变量，我想通过 Rtti 将它“转换”为描述该接口的 PTypeInfo ..

```
AGUID := StringToGUID('{19BB9F78-1FB1-4B0F-B691-82EE5CD7A941}');

.. transform AGUID to PTypeInfo ..

AInterface = GlobalContainer.Resolve( <PTypeInfo> expected); 
```

德尔福 2010+

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T08:50:28.873

```
function GetInterfaceTypeInfo(const GUID: TGUID): PTypeInfo;
var
  Ctx: TRttiContext;
  AType: TRttiType;
begin
  Result := nil;
  Ctx := TRttiContext.Create;
  try
    for AType in Ctx.GetTypes do
      if (AType.TypeKind = tkInterface) and IsEqualGUID(GetTypeData(AType.Handle)^.Guid, GUID) then
      begin
        Result := AType.Handle;
        Break;
      end;
  finally
    Ctx.Free;
  end;
end; 
```

# c++ - 将结构存储在地图中；检查结构是否存在于地图中

> ID：10309828
> 
> 赞同：1
> 
> 时间：2012-04-25T05:27:08.930
> 
> 标签：c++, search, map, constructor, struct

Q#1）下面的结构不想被复制并给出编译错误 - 为什么以及如何处理它？

```
#include <iostream>
#include <string>
#include <map>

using namespace std;

struct person
{
    person(string n)
        :name(n)
    {}

    string name;
};

int main()
{
    map<string, person> my_map;

    my_map["one"] = person("Tom");

    return 0;
} 
```

Q#2）我们可以通过省略结构构造函数“person（const string& n）”并一一分配结构值来避免上述问题：

```
#include <iostream>
#include <string>
#include <map>

using namespace std;

struct person
{
    string name;
};

int main()
{
    map<string, person> my_map;

    person p;
    p.name = "Tom";
    my_map["one"] = p;

    return 0;
} 
```

所以，假设我这样做，并且在地图中存储了很多人之后，我想检查地图中是否存在特定的人。据我所知，正确的做法是：

```
if(my_map.find("one") == my_map.end()) { //it doesn't exist in my_map }  
else {//it exists} 
```

但据我了解，这将一一遍历整个地图，不是吗？如果是，那么可以这样做：

```
using namespace std;

struct person
{
    string name;
    string identifier; // <--
};

int main()
{
    map<string, person> my_map;

    person p;
    p.name = "Tom";
    p.identifier = "something"; // <--
    my_map["one"] = p;

    if(my_map["unknown"].identifier == "something") // <--
        cout << "Found" << endl;
    else 
        cout << "Not found" << endl;

    return 0;
} 
```

通过这样做，我们避免了迭代，并且内存中的垃圾与我们的标识符匹配的可能性是......我猜很小，特别是如果我们使用一些哈希。那么这样做可以（安全）吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T06:23:09.387

1）由于以下表达式，您的第一个示例中的代码无法编译：

```
my_map["one"] 
```

`my_map["one"]`构造一个`std::string`from `"one"`，并将其传递给[std::map::operator[]](http://en.cppreference.com/w/cpp/container/map/operator_at)。`map::operator[]`确保将值映射到提供的键（如果键尚未与值关联，则通过将键与默认构造的值相关联）并返回对该值的引用。

这不会编译，因为`person`没有默认构造函数（“默认构造函数”是不带参数的构造函数）。

有几种方法可以解决此问题。

一种方法是您采用的方式 - 删除构造函数。它之所以有效，是因为如果您不提供任何构造函数，则会隐式定义默认构造函数。

另一种方法是显式定义默认构造函数`person`：

```
struct person
{
    person():name(){} //or person()=default; if your compiler supports this
    person(string n)
        :name(n)
    {}
    string name;
}; 
```

另一种方法是根本不使用`operator[]`，而是使用[map::insert](http://en.cppreference.com/w/cpp/container/map/insert)，如下所示：

```
auto pair(my_map.insert(std::make_pair(std::string("one"),person("Tom"))));
if (!pair.second) {
    *pair.first = person("Tom");
} 
```

* * *

2）在地图中查找元素的正确方法是（如您所说）使用：

```
if(my_map.find("one") == my_map.end()) {/*it doesn't exist in my_map*/}
else {/*it exists*/} 
```

这不会*检查*地图中的每个元素 - 实际上它可能只检查`O(log(map.size()))`元素。

你的担心是完全没有根据的，这是在地图中找到元素**的**正确方法，但是你继续的方式表明对做什么有严重的误解`operator[]`。

您问“如果地图中不存在，`my_map["unknown"].identifier == "something"`返回 true的概率是多少？”。`"unknown"`

对此的答案是，无论如何都没有机会返回 true，因为如果`std::string("unknown")`映射中不存在带有键的值，那么`operator[]`将`std::string("unknown")`与默认构造关联`person`，因此`identifier`将是一个空字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T05:29:46.623

首先，既然你有一个构造函数，你需要提供一个默认的构造函数。这是因为 C++ 标准库容器使用值语义。所以地图需要能够复制值、分配它们并默认构造它们。由于您提供了构造函数，因此编译器不会合成默认构造函数。这是一个什么都不做的默认构造函数：

```
person() {} // default constructs string, so no special aciton required. 
```

特别是在 的情况下，当映射中不存在具有键的元素时`std::map`，返回对默认构造值的引用：`operator[]`

```
my_map["one"] = p; // creates *default* person, then *assigns* it the value of p. 
```

其次，关于您关于搜索地图的问题`std::map`，搜索具有对数复杂性，通常实现为自平衡二叉树。因此，当您搜索时，您不会遍历整个地图。并且由于`operator[]`在搜索键不存在时通过访问引入了新元素，因此使用表单`find()`是执行此操作的规范方式。

既然您提到了散列，C++11 提供了`std::unordered_map`,`tr1`和. 这些使用散列函数执行搜索是常数时间。是否值得使用取决于地图大小等因素。常数时间可能大于搜索小地图所用的对数时间。`boost``hash_map`

***注意***：如果你想使用你的结构作为键，或者想把它插入到标准库之一`sets`，你有进一步的要求：

**maps**：您需要通过类的小于运算符或自定义比较器函子为键提供[严格的弱排序。](http://en.wikipedia.org/wiki/Strict_weak_ordering)如果要`person`用作密钥，则需要类似以下内容：

```
bool operator<(const person& rhs) const { return name < rhs.name; } 
```

**unordered_ 或哈希映射**：您必须通过 an或 functor为键提供[哈希函数和相等比较。](http://en.cppreference.com/w/cpp/utility/hash)`operator==`.

# javascript - 在 IE 中使用 AJAX 时 jQuery 权限被拒绝

> ID：10309829
> 
> 赞同：0
> 
> 时间：2012-04-25T05:27:14.840
> 
> 标签：javascript, jquery, ajax, internet-explorer

这让我完全束手无策。对于我的网站，我使用 ajax 来替换 DIV 的内容。其他所有页面都可以在所有浏览器中正常工作，但是我的“投资组合”选项卡下有一些链接不是。它们是“摄影”、“交互”、“打印”和“传统”。当我尝试点击那些使用 IE8 的用户时，他们在我的 jquery.js 文件的第 2 行字符 3238 中返回了“Permission Denied”。jQuery 文件已更新为可用的最新版本。这四个页面的唯一特殊属性是它们有一个分页脚本和一个 shadowbox.js 脚本。如果我在 AJAX 之外单独加载这些页面，则代码可以正常工作。根据我的测试，脚本在其他所有方面都可以正常工作，只是图像速度较慢，但​​我稍后会修复它。如果有人有任何解决方案，这将不胜感激。我在这里尝试了一些事情的答案，但没有一个解决了这个问题。

我的网站位于[http://codyshawdesign.com](http://codyshawdesign.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:07:34.900

正如我所见，它与 JQuery 无关，而是与您执行异步请求的方式有关。

此 URL 在 IE 上呈现错误：[http://codyshawdesign.com/#traditional](http://codyshawdesign.com/#traditional)，

```
<script id=__ie_ondomload defer=true src=//:></script> 
```

首先，**更正您的 AJAX 请求**。

**不要返回完整的 HTML 文档**以将其插入您的页面。只有你需要的内容！

并且因为它是同一个页面，所以直接将您的脚本和 CSS 包含在您的索引文档中。

所有这些**都不应该成为您的 AJAX 响应的一部分**！

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Traditional</title>
<link rel="stylesheet" type="text/css" href="shadowbox.css">
<script type="text/javascript" src="shadowbox.js"></script>
<script type="text/javascript">
Shadowbox.init({
     counterType: 'skip',
}
    [......]
});    
</script>
</head>
<body> 
```

# c# - 数据更改在父窗口中反映错误

> ID：10309833
> 
> 赞同：0
> 
> 时间：2012-04-25T05:27:37.493
> 
> 标签：c#, wpf, data-binding

我有以下要求：

1.  `TreeView`物品展示
2.  在 中显示所选项目的详细信息`TreeView`。
3.  用于编辑所选项目的对话框。

我已经实现了这些要求，但是第三个没有做它应该做的事情，所以我被卡住了。

我想要它做什么：编辑对话框应该能够编辑一个项目。这不是`TreeViewItem`我的一个课程的一个实例。

1.  保存编辑 - 一个将关闭对话框的按钮。
2.  放弃编辑 - 用于重置项目中更改的字段并关闭对话框的按钮。

第二个要求不起作用。如果我编辑一个字段并点击取消，项目详细信息面板仍会显示编辑。我已经调试过，但我发现底层项目没有改变 - 但是项目显示的是更改后的值。

代码：

1.  项目类别（类别）

    ```
    public class Category
    {
        public virtual int Id { get; set; }
        public virtual string Name { get; set; }
        public virtual string Description { get; set; }
        public virtual Unit Unit { get; set; }
        public virtual List<Category> ChildCategories { get; set; }
        public virtual Category ParentCategory { get; set; }
        public virtual bool IsMainCategory { get; set; }

        public Category()
        {
            ChildCategories = new List<Category>();
        }

        public virtual void AddChild(Category child)
        {
            ChildCategories.Add(child);
            child.ParentCategory = this;
        }
    } 
    ```

2.  项目（类别）详细信息显示在标签中：

    ```
    <DataTemplate DataType="{x:Type local:Category}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="4*" SharedSizeGroup="a" />
                <ColumnDefinition Width="6*" SharedSizeGroup="b" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="1*" />
                <RowDefinition Height="1*" />
            </Grid.RowDefinitions>

            <TextBlock Text="Name" Grid.Column="0" Grid.Row="0" Padding="5"/>
            <TextBlock Text="{Binding Path=Name}" Grid.Column="1" Grid.Row="0" Padding="5"/>
            <TextBlock Text="Description" Grid.Column="0" Grid.Row="1" Padding="5"/>
            <TextBlock Text="{Binding Path=Description}" Grid.Column="1" Grid.Row="1" Padding="5"/>
        </Grid>
    </DataTemplate> 
    ```

3.  主窗口中编辑项目的事件处理程序：

    ```
    private void EditCategory(object sender, RoutedEventArgs e)
    {
        Category ctg = _tree.SelectedItem as Category;
        if (ctg != null)
        {
            CategoryDefineWindow cdw = new CategoryDefineWindow();
            cdw.CategoryObject = ctg;
            cdw.ShowDialog();
        }
    } 
    ```

4.  项目编辑器窗口 xaml：

    ```
    <Window x:Class="BSRCat.View.CategoryDefineWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Height="150" Width="500">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*" SharedSizeGroup="a" />
            <ColumnDefinition Width="7*" SharedSizeGroup="b" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="1*" />
            <RowDefinition Height="1*" />
            <RowDefinition Height="1*" />
        </Grid.RowDefinitions>

        <TextBlock Text="Name" Grid.Column="0" Grid.Row="0" Padding="5"/>
        <TextBox Text="{Binding Path=CategoryObject.Name, RelativeSource={RelativeSource AncestorType=Window}}" Grid.Column="1" Grid.Row="0" Padding="5"/>
        <TextBlock Text="Description" Grid.Column="0" Grid.Row="1" Padding="5"/>
        <TextBox Text="{Binding Path=CategoryObject.Description, RelativeSource={RelativeSource AncestorType=Window}}" Grid.Column="1" Grid.Row="1" Padding="5"/>

        <StackPanel Orientation="Horizontal" Grid.Row="2" Grid.ColumnSpan="2" HorizontalAlignment="Right">
            <Button Content="Ok" Margin="5" Height="20" Width="30" Click="Confirmed"/>
            <Button Content="Cancel" Margin="5" Height="20" Width="50" Click="Cancelled"/>
        </StackPanel>
    </Grid>
    </Window> 
    ```

5.  后面的项目编辑器窗口代码：

    ```
    public partial class CategoryDefineWindow : Window
    {
        public Category CategoryObject 
        {
            get
            {
            return _category;
            }
            set
            {
                _category = value;
                _initial = new Category() { Name = value.Name, Description = value.Description     };
            }
        }

        private Category _category;
        private Category _initial;

        public CategoryDefineWindow()
        {
            InitializeComponent();
        }

        private void Confirmed(object sender, RoutedEventArgs e)
        {
            Close();
        }

        private void Cancelled(object sender, RoutedEventArgs e)
        {
            _category.Name = _initial.Name;
            _category.Description = _initial.Description;
            Close();
        }
    } 
    ```

我已经调试了该`CategoryDefineWindow.Cancelled`方法，并且该`_category`对象已正确重置。我找不到哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:07:56.457

Category 类应该实现 INotifyPropertyChanged 接口。一旦属性值发生更改，WPF 将收到通知。

```
 public class Category : INotifyPropertyChanged
{
    private string _Name;
    private string _Description;

    public virtual int Id { get; set; }
    public virtual string Name
    {
        get
        {
            return _Name;
        }
        set
        {
            if (_Name == value)
                return;

            _Name = value;
            NotifyPropertyChanged("Name");
        }
    }

    public virtual string Description
    {
        get
        {
            return _Description;
        }
        set
        {
            if (_Description == value)
                return;

            _Description = value;
            NotifyPropertyChanged("Description");
        }
    }
    public virtual Unit Unit { get; set; }
    public virtual List<Category> ChildCategories { get; set; }
    public virtual Category ParentCategory { get; set; }
    public virtual bool IsMainCategory { get; set; }

    public Category()
    {
        ChildCategories = new List<Category>();
    }

    public virtual void AddChild(Category child)
    {
        ChildCategories.Add(child);
        child.ParentCategory = this;
    }

    private void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

# java - 在 PHP 和 Java 中使用套接字

> ID：10309837
> 
> 赞同：2
> 
> 时间：2012-04-25T05:28:47.040
> 
> 标签：java, php, sockets, tcp, client-server

我试图创建一个 PHP 脚本来确定服务器（托管下面列出的 java 程序的计算机）是否正在运行，如果是，则 php 函数应该返回 true，否则返回 false。

这是服务器：

```
package darestium.minecraft.server;

import java.io.BufferedReader;
import java.net.*;
import java.io.*;

public class Server {
    private static ServerSocket socket;

    private static Socket connection;
    private static String command       = new String();
    private static String responseStr   = new String();;

    private static int port = 4343;

    public static void main(String args[])  {
        System.out.println("Signal Server is running.");

        try  {
            socket = new ServerSocket(port);

            while (true)  {
                connection = socket.accept();

                InputStreamReader inputStream = new InputStreamReader(connection.getInputStream());
                DataOutputStream response = new DataOutputStream(connection.getOutputStream());
                BufferedReader input = new BufferedReader(inputStream);

                command = input.readLine();

                response.writeBytes(responseStr);
                response.flush();
                //response.close();

                System.out.println("Running");
            }
        } catch (IOException e)  {
            System.out.println("Fail!: " + e.toString());
        }

        System.out.println("Closing...");
    }
} 
```

这是客户：

```
<?
    function isRunning()  {
        $address = 'darestium.dyndns-free.com';
        $port = 4343;
        $socket = socket_create(AF_INET, SOCK_STREAM, getprotobyname('tcp'));
        $message = 'loolololol';

        try {
            socket_connect($socket, $address, $port);

            $status = socket_sendto($socket, $message, strlen($message), MSG_EOF, $address, $port);

            if ($status != false)  {
                return true;
            }

            return false;
        } catch (Exception $e)  {
            return false;
        }
    }
?> 
```

以下是显示在 php 页面上的错误消息，它会像这样回显函数的结果：

```
include('server.php');
echo isRunning(); 
```

然后是错误信息：

```
Warning: socket_connect() [function.socket-connect]: unable to connect [0]: No connection could be made because the target machine actively refused it. in C:\Users\darestium\Documents\Portables\xampp\htdocs\darestium\minecraftserver.php on line 9

Notice: Use of undefined constant MSG_EOF - assumed 'MSG_EOF' in C:\Users\darestium\Documents\Portables\xampp\htdocs\darestium\minecraftserver.php on line 11

Warning: socket_sendto() expects parameter 4 to be long, string given in C:\Users\darestium\Documents\Portables\xampp\htdocs\darestium\minecraftserver.php on line 11 
```

我想知道如何解决这个问题。另外，我希望能够向服务器发送消息，有什么想法可以做到这一点吗？我基于[简单的 Java TCP 服务器和 PHP 客户端问题](https://stackoverflow.com/questions/9714694/simple-java-tcp-server-and-php-client-problems)

注意：我对套接字和服务器/客户端通信非常陌生。

**编辑：**

@VideanuAdrian 好的，只是端口转发了端口 4343，它不再显示第一个错误，但该函数似乎总是返回 false，最后两个错误仍然显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:32:43.460

您不应关闭服务器中的 DataOutputStream 对象。

只需`response.close();`在您的服务器中注释该行，该程序应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:41:45.030

运行客户端/服务器时，您需要知道运行应用程序的用户是否有权访问该端口。到 1024 的端口由系统知道的应用程序/服务保留。这就是第 1 点。

第 2 点：最好的方法之一是在连接线程方法中运行服务器。以这种方式运行，当有新的客户端请求到达时，服务器可以将请求句柄委托给连接线程。

第3点：消息与协议有关。如果您使用的是 HTTP 或 FTP 等内置协议，则必须使用协议规则。如果没有，您可以为消息请求/响应建立自己的规则。

我建议您在继续之前阅读 Java 网络教程。运行所有 Java 示例。稍后，您可以与 PHP 混合使用。您拥有的有关套接字和协议的信息越多，您的程序就会越好。

[http://docs.oracle.com/javase/tutorial/networking/](http://docs.oracle.com/javase/tutorial/networking/)

希望这可以帮到你。

# ios - Reliable way to map an iOS SDK canonical name to its path

> ID：10309841
> 
> 赞同：1
> 
> 时间：2012-04-25T05:28:57.403
> 
> 标签：ios, sdk

As part of [an open source iOS testing framework](https://github.com/dhemery/victor) I'm developing, I want to programmatically launch the Simulator with a given SDK. I want users of my framework to be able to identify an SDK by its canonical name, then my framework will launch the simulator using that SDK.

I know:

*   How to obtain the canonical names of all currently installed SDKs: `xcodebuild -showsdks`
*   How to obtain the developer root: `xcode-select -print-path`.
*   The file paths where *recent* versions of Xcode store their SDKs (the particular path below developer root).

But I don't know that future Xcode installations will put the SDKs in the same place relative to developer root. My testing framework currently makes assumptions about those paths, and those assumptions make me mildly nervous. I could require users to specify the full path to the SDK, but I'd like to be more friendly than that. Canonical names seem reasonably friendly (i.e., they are at least discoverable via a tool).

So: **Is there a stable, reliable, programmatic way** (e.g. an Apple-supplied command line tool) **to identify the SDK root associated with a given SDK canonical name?**

# .net - Open a CSV file through notepad and convert it to UTF-8 in .NET?

> ID：10309843
> 
> 赞同：1
> 
> 时间：2012-04-25T05:29:01.190
> 
> 标签：.net, csv, character-encoding

I am trying to batch convert quite a number of CSV files present encoding to UTF-8 through .NET

What I have been doing till now is opening the csv file one by one and selecting "all files" from the "save as/format type" dropdown box and selecting the encoding as "UTF-8" again from the dropdown box below it and then I save it (It doesn't asks to replace the original file though).

As this procedure is quite tedious, I would like to write a tiny app for it in vb.NET

All I came up with is this: `System.Text.Encoding.Convert(System.Text.Encoding.ASCII,System.Text.Encoding.UTF-8)`

But thats creating an error :(

Any suggestions? Thx

**UPDATE:** Just updated my question to use .NET's internal lib/funcs instead of using Notepad :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:18:33.297

看看[`DirectoryInfo`](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)枚举目录中的文件。

[`File.ReadAllText()`](http://msdn.microsoft.com/en-us/library/ms143368.aspx)然后看看[`File.WriteAllText()`](http://msdn.microsoft.com/en-us/library/ms143376.aspx)哪些是您可以轻松用于转换编码的便捷方法。

请注意，如果您希望在文件开头没有签名的 UTF-8 (U+FEFF)，则需要使用

```
var encoding = new UTF8Encoding(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:30:21.160

如果这是一次性的，请启动 PowerShell：

```
gci *.csv | %{ Get-Content $_ | Set-Content -Encoding UTF8 "$($_.BaseName)_Encoded.csv" } 
```

gci *.csv ：获取当前目录中的所有 csv 文件并将结果通过管道传输到“foreach”循环 (%) 每个文件的 Get-Content 然后将结果通过管道传输到执行 UTF8 转换的 Set-Content 并将结果存储在具有相同基本名称的文件，后缀为“_Encoded”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T06:34:08.950

试试[这个](https://stackoverflow.com/questions/4520184/how-to-detect-the-character-encoding-of-a-text-file)： [Mozilla 的字符集检测器](http://www.mozilla.org/projects/intl/chardet.html)或[它的 .NET 端口](http://code.google.com/p/chardetsharp/)。
或者
[在这里](https://stackoverflow.com/questions/64860/best-way-to-convert-text-files-between-character-sets)，您可以找到其他人的做法。

**编辑：** 或适应/使用[这个](http://forums.asp.net/t/1173381.aspx/1)

```
using System; 
using System.Data; 
using System.IO; 
using System.Text; 

public partial class Converting : System.Web.UI.Page

{ 
    protected void Page_Load(object sender, EventArgs e)

    { 

        string sourceDir = "C:\\test";

        string newDir = "C:\\test2";

        foreach (String sourceFile in System.IO.Directory.GetFiles(sourceDir))

        { 
            char[] splitter = { '\\' };

            String[] str = sourceFile.Split(splitter); 
            String fname = str[str.Length - 1]; 

            FileStream fs = new FileStream(sourceFile, FileMode.Open, FileAccess.ReadWrite);

            StreamReader ReadFile = new StreamReader(fs, System.Text.Encoding.ASCII);

            FileStream fs1 = new FileStream(newDir + 
"\\new_" + fname, FileMode.OpenOrCreate, FileAccess.Write); 
            StreamWriter WriteFile = new StreamWriter(fs1, System.Text.Encoding.UTF8);

            String strLine; 
            while (ReadFile != null)

            { 
                strLine = ReadFile.ReadLine(); 
                //MessageBox.Show(strLine); 
                if (strLine != null) 
                { 
                    WriteFile.WriteLine(strLine); 
                } 
                else 
                { 
                    ReadFile.Close(); 
                    ReadFile = null; 
                    WriteFile.Close(); 
                } 
            } 
        } 
    } 
} 
```

# powerpoint - PPTX OpenXML - Which is the newline indicator in bulleted text?

> ID：10309848
> 
> 赞同：1
> 
> 时间：2012-04-25T05:30:00.770
> 
> 标签：powerpoint, openxml, presentationml

Can you please help me identify which is the newline indicator in bulleted text in PPTX OpenXML ? based on this I want add newline character in my program

-Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:34:21.200

使用[休息类](http://msdn.microsoft.com/en-us/library/documentformat.openxml.drawing.break.aspx)

因此，对于以下带有带换行符的项目符号列表的幻灯片：

![在此处输入图像描述](../Images/ac40f91420d16b7d4863bd161790a4e8.png)

请参阅从第三个项目符号到第四个项目符号显示的以下代码截图：

```
 using DocumentFormat.OpenXml.Presentation;
        using DocumentFormat.OpenXml;
        using A = DocumentFormat.OpenXml.Drawing; 
```

...

```
 A.Run run3 = new A.Run();
        A.RunProperties runProperties3 = new A.RunProperties(){ Language = "en-US", Dirty = false, SpellingError = true, SmartTagClean = false };
        A.Text text3 = new A.Text();
        text3.Text = "Th";

        run3.Append(runProperties3);
        run3.Append(text3);

        A.Run run4 = new A.Run();
        A.RunProperties runProperties4 = new A.RunProperties(){ Language = "en-US", Dirty = false, SmartTagClean = false };
        A.Text text4 = new A.Text();
        text4.Text = "";

        run4.Append(runProperties4);
        run4.Append(text4);

        A.Break break1 = new A.Break();
        A.RunProperties runProperties5 = new A.RunProperties(){ Language = "en-US", Dirty = false, SmartTagClean = false };

        break1.Append(runProperties5);

        A.Run run5 = new A.Run();
        A.RunProperties runProperties6 = new A.RunProperties(){ Language = "en-US", Dirty = false, SpellingError = true, SmartTagClean = false };
        A.Text text5 = new A.Text();
        text5.Text = "ird";

        run5.Append(runProperties6);
        run5.Append(text5);
        A.EndParagraphRunProperties endParagraphRunProperties1 = new A.EndParagraphRunProperties(){ Language = "en-US", Dirty = false, SmartTagClean = false };

        paragraph3.Append(paragraphProperties3);
        paragraph3.Append(run3);
        paragraph3.Append(run4);
        paragraph3.Append(break1);
        paragraph3.Append(run5);
        paragraph3.Append(endParagraphRunProperties1); 
```

此代码是使用[Open XML Productivity Tool](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=5124)生成的。我强烈建议您使用它对您在 Excel、Word 和 PowerPoint 中编写代码所需的内容进行逆向工程。

希望这可以帮助...

# java - How to search for an outlook contact through java program?

> ID：10309850
> 
> 赞同：1
> 
> 时间：2012-04-25T05:30:25.577
> 
> 标签：java, automation, outlook

Can any one give me a solution to automate finding a contact from MS Outlook using java?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:11:26.923

Outlook 通常会配置为从集中的 LDAP 存储库中查找地址。您将获得大量用于查询和浏览 LDAP 的 Java 库。

# java - 为什么字符串比较不相等？

> ID：10309851
> 
> 赞同：5
> 
> 时间：2012-04-25T05:30:48.040
> 
> 标签：java

> **可能重复：**
> [字符串不等于字符串？](https://stackoverflow.com/questions/7128775/string-is-not-equal-to-string)

我是 java 新手，我不知道这个代码块有什么问题。我知道数组不是空的，我正在其他地方测试它。也许有一个我习惯用c#编程的语法问题。

```
 Scanner input = new Scanner(System.in);
     System.out.println("Enter ID :");
     String employeeId = input.nextLine();
     int index =  -1;
     for(int i = 0 ; i < employeeCounter ; i++)
     {
         if(employeeId == employeeNumber[i])
         {
           index = i;
         }
     }

     if(index == -1)
     {
         System.out.println("Invalid");
         return;
     } 
```

我总是进入“无效”部分。知道为什么吗？提前致谢

* * *

`employeeNumber[0]`is `"12345"` `employeeId`is`"12345"` 但我不能进入第一个 if 语句，尽管`employeeId`IS 等于`employeeNumber[0]`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-25T05:33:32.893

不要将字符串与`==`.

采用

```
if (string1.equals("other")) {
    // they match
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T05:33:33.183

比较这样的字符串

```
if(employeeId.equals(employeeNumber[i]) {

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T05:37:01.130

正如其他人所指出的 - 完整的代码会有所帮助，但我的猜测是这行代码：

```
if(employeeId == employeeNumber[i]) 
```

您不使用 == 比较 2 个字符串。请改用 equals() 或 equalsIgnoreCase()。== 仅检查对象是否相等，即employeeId 和employeeNumber 是否引用内存中的同一对象。因此，对于对象，始终使用 equals() 方法。对于字符串，您也可以使用 equalsIgnoreCase() 进行不区分大小写的匹配。== 应该用于原始类型，如 int、long 等。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-25T05:33:35.630

当您将 == 与两个字符串一起使用时，它会比较指针地址您应该使用 firststring.equals(secondstring) 来比较两个字符串

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-25T05:34:01.563

使用`equals()`方法比较字符串

```
if(employeeId.equals(employeeNumber[i])){} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-25T05:51:20.353

比较字符串时，使用 `String1.equals(String2)`; 这应该给你结果

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-25T05:41:19.727

"==" 检查两个对象的引用是否相同。但是 equals() 方法检查内容是相同还是不同。

# jquery - Fade ul menu element in and out on mouse hover

> ID：10309852
> 
> 赞同：3
> 
> 时间：2012-04-25T05:30:51.980
> 
> 标签：jquery, html, jquery-ui

I'm trying to create a slick fade in/fade out effect when users hover over an unordered list menu by using jQuery.Thus far I can fade in the sub menu when users hover over a menu item containing sub items but I'm struggling to hide it.

The requirement is as follows - If the mouse is not over the sub menu items or it's parent - fade out the sub menu list.

I'm including a screen shot of my menu and the HTML markup, please suggest how can i hide the menu as per the requirement listed above:

![menu](../Images/41913d13ce837d1b63476e2d73bc33d0.png)

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Home</title>
    <link href="Styles/Style.css" rel="stylesheet" type="text/css" />
    <script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        jQuery(document).ready(function () {

            $('#subList').css("display", "none");

            $('#item3').mouseover(function () {
                $('#subList').fadeIn('slow');
                $('#subList').css("display", "block");
            });

            $('#subItem1').mouseover(function () {
                $('#subList').css("display", "block");
            });

            $('#subItem2').mouseover(function () {
                $('#subList').css("display", "block");
            });

            $("#subItem1").mouseleave(function () {
                $("#subList").fadeOut("slow");
            });

            $('#subItem2').mouseleave(function () {
                $('#subList').fadeOut("slow");
            });
        });
    </script>
</head>
<body>
    <div class="menu">
        <ul>
            <li><a href="item4.htm">Menu Item 4</a></li>
            <li><a href="#" id="item3">Menu Item3</a>
                <ul id="subList">
                    <li id="subItem1"><a href="subItem1.htm">Sub Item 1</a></li>
                    <li id="subItem2"><a href="subItem2.htm">Sub Item 2</a></li>
                </ul>
            </li>
            <li><a href="item2.htm">Menu Item 2</a></li>
            <li><a href="item1.htm">Menu Item 1</a></li>
        </ul>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T05:42:53.070

试试这个脚本：

```
$(function(){
    $(".menu ul li").hover(function(){
             $(this).children("ul").stop().fadeIn("slow");
       },
       function(){
             $(this).children("ul").stop().fadeOut("slow");   
    })
}) 
```

[http://jsfiddle.net/2yEtK/1/](http://jsfiddle.net/2yEtK/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:43:05.933

试试这个脚本：

```
 jQuery(document).ready(function () {

        $('#subList').css("display", "none");

        $('#item3').parent().hover(function () {
            $('#subList').fadeIn('slow');
            $('#subList').show();
        },
            function(){
                $('#subList').fadeOut('slow');
                $('#subList').hide();
        }
        );
    }); 
```

这里有 JSFiddle 链接：http: [//jsfiddle.net/scQ9W/1/](http://jsfiddle.net/scQ9W/1/)

您还可以使用 slideDown() 和 slideUp()。请参阅此链接：http: [//jsfiddle.net/scQ9W/2/](http://jsfiddle.net/scQ9W/2/)

应用一些css后：http: [//jsfiddle.net/scQ9W/3/](http://jsfiddle.net/scQ9W/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:46:32.703

跳过 $("#subItem1/subItem2").mouseleave 并使用...

```
$('#subList').mouseleave(function () {
   $(this).fadeOut("slow");
}); 
```

反而？

# android - advice needed with accessing database

> ID：10309854
> 
> 赞同：0
> 
> 时间：2012-04-25T05:31:22.823
> 
> 标签：android

I have been building an application. One of the activity involves two EditText fields. The first field sets the title and the second field sets the text which the user enters. The title and the text gets saved and the title gets displayed in a customised list view. Now when I click on the title displayed in the list.An new Activity opens up.Which has the same title as the one clicked in the list.But the problem here is the corresponding text which the user entered, does not gets displayed.I've been searching for this but couldn't actually reach anywhere.Could someone please help me with this.I'd really appreciate it:)Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:44:32.313

```
 EditText ed;
   ed.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String s=ed.getText().toString();
            Intent i=new Intent(TestpjtActivity.this,classname.class);
            i.putExtra("editvalue", s);
                            startActivity(i);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:39:32.970

@android noob，您可以为此使用 Intent 和 Bundle

# python - Trying to create a heatmap for a planet wars bot which shows which army has the most influence

> ID：10309856
> 
> 赞同：2
> 
> 时间：2012-04-25T05:31:25.837
> 
> 标签：python, python-2.7, pygame, pydev

I'm trying to create a heatmap for a planetwars bot which indicates which influence a planet is under. The initial map looks like: [http://imgur.com/a/rPVnl#0](http://imgur.com/a/rPVnl#0)

Ideally the Red planet should have a value of -1, the Blue planet should have a value of 1, and the planet marked 1 should have a value of 0\. (Or 0 to 1, mean of 0.5 would work)

My initial analysis code is below, but the results it outputs are between 0.13 and 7.23.

```
for p in gameinfo.planets: #gameinfo.planets returns {pid:planet_object}
        planet = gameinfo.planets[p]
        own_value = 1
        for q in gameinfo.my_planets.values():
            if q != planet:
                q_value = q.num_ships / planet.distance_to(q)
                own_value = own_value + q_value

        enemy_value = 1
        for q in gameinfo.enemy_planets.values():
            if q != planet:
                q_value = q.num_ships / planet.distance_to(q)
                enemy_value = enemy_value + q_value

        self.heatmap[p] = own_value/enemy_value 
```

I've also tried to add some code to curb the range from 0 to 1

```
highest = self.heatmap.keys()[0]
    lowest = self.heatmap.keys()[0]
    for p in gameinfo.planets.keys():
        if self.heatmap[p] > highest:
            highest = self.heatmap[p]
        elif self.heatmap[p] < lowest:
            lowest = self.heatmap[p]
    map_range = highest-lowest

    for p in gameinfo.planets.keys():
        self.heatmap[p] = self.heatmap[p]/map_range

    self.heatmap_mean = sum(self.heatmap.values(), 0.0) / len(self.heatmap) 
```

The values ended up between 0 and 1, but the mean was 0.245? (Also the values actually ranged from 0.019 to 1.019).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T16:02:03.893

我已经解决了我的问题，这就是解决方案的样子。

```
#HEATMAP ANALYSIS
    for p in gameinfo.planets:

        ave_self_value = 0
        for q in gameinfo.my_planets:
            if q != p:
                ave_self_value = ave_self_value + (self.planet_distances[p][q] * gameinfo.planets[q].num_ships / self.own_strength)

        ave_enemy_value = 0
        for q in gameinfo.enemy_planets:
            if q != p:
                ave_enemy_value = ave_enemy_value + (self.planet_distances[p][q] * gameinfo.planets[q].num_ships / self.enemy_strength)

        self.heatmap[p] = ave_enemy_value - ave_self_value

    hmin, hmax = min(self.heatmap.values()), max(self.heatmap.values())

    for h in self.heatmap.keys():
        self.heatmap[h] = 2 * (self.heatmap[h] - hmin) / (hmax - hmin) - 1

    self.heatmap_mean = sum(self.heatmap.values(), 0.0) / len(self.heatmap)
    #END HEATMAP ANALYSIS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:25:54.857

```
for p in foo:
    ...
    ...
    for q in bar:
        ...
        if q != p:
            q_value = some_value / another_value
            own_value = own_value + q_value 
```

为粗略的简化道歉。说`foo`是`[1, 2, 3, 4, 5]`，酒吧是`[1, 5]`。

第一次通过，`p`是`1`。`q`需要`1`，所以`q==p`。接下来，现在，`q`将我认为是小于一的正数累加。`5``q!=p``own_value``q_value`

但第二次通过，`p`是`2`。`q`需要`1`, so `q!=p`, so`own_value`上升 1 的几分之一。然后`q`，`5`如此`q!=p`静止，如此`own_value`再次上升相同的分数。这就是问题所在：`(some_value / another_value) + (some_value / another_value)`打破 -1 到 1 的比例。有时你会得到 7.23，因为那是多少次`q`不相等`p`。

里面什么都没有

```
for x in foo:
    for y in bar: 
```

关心规范化的构造`for x in foo`- 只是`for q in bar`。

# javascript - 在javascript中验证其扩展名以外的pdf文件？

> ID：10309857
> 
> 赞同：8
> 
> 时间：2012-04-25T05:31:31.147
> 
> 标签：javascript, jsp, file-upload, file-format

我让用户可以选择上传这样的文件

```
<form action="#" onsubmit="return Checkfiles(this);">
    <center><input type="file" id="filename"> 
    <input type="submit" value="Go!"></center>
    </form> 
```

当用户上传文件时，我使用以下 javascript 函数验证文件

```
<script type="text/javascript">
        function Checkfiles()
        {
        var fup = document.getElementById('filename');
        var fileName = fup.value;
        var ext = fileName.substring(fileName.lastIndexOf('.') + 1);
        if(ext == "pdf" )
        {
        return true;
        } 
        else
        {
        alert("Upload pdf files only");
        fup.focus();
        return false;
        }
        }
    </script> 
```

一切都很好。
**但我想通过其他方式验证文件，而不仅仅是通过它的扩展名**
，我会给出这样做的理由。我将图像文件重命名为 image.pdf，现在它是 pdf 格式但无法打开。

所以我想以确切的方式验证一个pdf文件。除了扩展名之外，还有其他方法可以检查吗？
**编辑**
我想在服务器端使用 jsp 页面进行验证。那么我该怎么做呢？
提前致谢 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T07:03:57.767

要在 javascript 上验证文件类型，这里有一些方法：

```
// Your way: getting the extension and checking it.
// I suggest this way instead of using indexOf:
var ext = fileName.split('.').reverse()[0]
// Splits by '.', reverse the array, and returns the first element

// Another way: checking the type of the file
if ( fup.files[0].type === 'application/pdf' ) {
    console.log( 'It is validated!' )
} 
```

现场示例：http: [//jsbin.com/akati3/2](http://jsbin.com/akati3/2)感谢[https://stackoverflow.com/a/4581316/851498](https://stackoverflow.com/a/4581316/851498)

但是，您应该像其他人所说的那样在服务器端*真正验证这一点。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T05:38:03.503

任何类型的 javascript 验证都只是为了让用户感到舒适。一切都应该在服务器端进行验证。用户可以轻松禁用或修改任何 javascript 代码。

反正。您无法在 javascript 中检查文件内容。

在 PHP 中，您可以使用[http://www.php.net/manual/en/function.finfo-file.php](http://www.php.net/manual/en/function.finfo-file.php)通过其内容来检测文件类型。大多数其他语言应该具有类似的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:53:56.783

据我所知，检查pdf是否真的是pdf只能在服务器端完成。您可以尝试使用 IText 或类似的东西打开它；我敢打赌，当您尝试打开或修改 PDF 以外的其他内容时，它会引发某种异常。

# php - MySql - 不同服务器中表的大小写敏感问题

> ID：10309860
> 
> 赞同：2
> 
> 时间：2012-04-25T05:32:06.083
> 
> 标签：php, mysql, sql

我在三个不同的服务器上工作，它们是 unix/windows/unix。

`case-1`: 在我的 loacl 服务器是 unix 中，我有一个表名 Country_master 及其字段 pk_CountryId、CountryName 等。

`case-2`：在我的演示服务器中，窗口表名自动更改为 country_master。

`case-3`：在我的 Live 服务器中，它是 unix 表名 country_master。

但是在我的代码表名称中，我使用的是 Country_master 所以它给了我这样的错误

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42S02]: Base table or view not found: 1146 Table 'markets.Country_master' doesn't exist'. 
```

我有什么办法不改变数据库和代码中的表名，但它需要小写吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:40:58.200

您可以通过设置 lower_case_table_names 系统变量来更改区分大小写。有关说明，请参见此处：

[http://dev.mysql.com/doc/refman/5.6/en/identifier-case-sensitive.html](http://dev.mysql.com/doc/refman/5.6/en/identifier-case-sensitivity.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T05:41:48.767

来自[精美手册](http://dev.mysql.com/doc/refman/5.5/en/identifier-case-sensitivity.html)：

> 在 MySQL 中，数据库对应于数据目录中的目录。数据库中的每个表对应于数据库目录中的至少一个文件（可能更多，取决于存储引擎）。触发器也对应于文件。因此，底层操作系统的大小写敏感性在数据库、表和触发器名称的大小写敏感性中起作用。

因此，表名的大小写敏感性取决于底层文件系统：它们（通常）在 Windows 和 OSX 上不区分大小写，但在 Linux 上区分大小写。此行为部分取决于[`lower_case_table_names`](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_lower_case_table_names)设置：

> 如果设置为 0，则按指定存储表名，并且比较区分大小写。如果设置为 1，则表名以小写形式存储在磁盘上，并且比较不区分大小写。如果设置为 2，则表名按给定方式存储，但以小写形式进行比较。此选项也适用于数据库名称和表别名。

所以你有各种各样的东西会影响你的表名的区分大小写。唯一明智的解决方案（IMO）是始终使用小写表名，这样您就不必担心它；您还应该使用小写的列名以保持一致性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T05:41:59.927

[http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitive.html](http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitivity.html)

> 9.2.2\. 标识符区分大小写 在 MySQL 中，数据库对应于数据目录中的目录。数据库中的每个表对应于数据库目录中的至少一个文件（可能更多，取决于存储引擎）。因此，底层操作系统的大小写敏感性在数据库和表名的大小写敏感性中起作用。这意味着数据库和表名在 Windows 中不区分大小写，而在大多数 Unix 中区分大小写。一个值得注意的例外是 Mac OS X，它基于 Unix，但使用不区分大小写的默认文件系统类型 (HFS+)。但是，Mac OS X 也支持 UFS 卷，它与任何 Unix 一样区分大小写。请参阅第 1.8.4 节，“标准 SQL 的 MySQL 扩展”。
> 
> 注意 尽管在某些平台上数据库和表名不区分大小写，但您不应在同一语句中使用不同大小写来引用给定的数据库或表。以下语句不起作用，因为它同时将表称为 my_table 和 MY_TABLE：
> 
> mysql> SELECT * FROM my_table WHERE MY_TABLE.col=1; 列、索引和存储的例程名称在任何平台上都不区分大小写，列别名也不区分。触发器名称区分大小写，这与标准 SQL 不同。
> 
> 默认情况下，表别名在 Unix 上区分大小写，但在 Windows 或 Mac OS X 上不区分大小写。以下语句在 Unix 上不起作用，因为它将别名称为 a 和 A：
> 
> mysql> SELECT col_name FROM tbl_name AS a -> WHERE a.col_name = 1 OR A.col_name = 2; 但是，在 Windows 上允许使用相同的语句。为避免此类差异引起的问题，最好采用一致的约定，例如始终使用小写名称创建和引用数据库和表。建议使用此约定以实现最大的便携性和易用性。
> 
> 表和数据库名称如何存储在磁盘上并在 MySQL 中使用受 lower_case_table_names 系统变量的影响，您可以在启动 mysqld 时设置该变量。lower_case_table_names 可以采用下表中显示的值。在 Unix 上，lower_case_table_names 的默认值为 0。在 Windows 上，默认值为 1。在 Mac OS X 上，默认值为 2。
> 
> 值 含义 0 表和数据库名称使用 CREATE TABLE 或 CREATE DATABASE 语句中指定的字母大小写存储在磁盘上。名称比较区分大小写。如果您在具有不区分大小写文件名的系统（例如 Windows 或 Mac OS X）上运行 MySQL，则不应将此变量设置为 0。如果在不区分大小写的文件系统上使用 --lower-case-table-names=0 将此变量强制为 0，并使用不同的字母大小写访问 MyISAM 表名，则可能会导致索引损坏。1 表名以小写形式存储在磁盘上，名称比较不区分大小写。MySQL 在存储和查找时将所有表名转换为小写。此行为也适用于数据库名称和表别名。2 表和数据库名称使用 CREATE TABLE 或 CREATE DATABASE 语句中指定的字母大小写存储在磁盘上，但 MySQL 在查找时将它们转换为小写。名称比较不区分大小写。这仅适用于不区分大小写的文件系统！InnoDB 表名以小写形式存储，如 lower_case_table_names=1。如果您只在一个平台上使用 MySQL，您通常不必更改 lower_case_table_names 变量的默认值。但是，如果要在文件系统区分大小写不同的平台之间传输表，则可能会遇到困难。例如，在 Unix 上，您可以有两个不同的表，名为 my_table 和 MY_TABLE，但在 Windows 上，这两个名称被认为是相同的。
> 
> 在所有系统上使用 lower_case_table_names=1。这样做的主要缺点是，当您使用 SHOW TABLES 或 SHOW DATABASES 时，您看不到原始字母大小写的名称。
> 
> 在 Unix 上使用 lower_case_table_names=0，在 Windows 上使用 lower_case_table_names=2。这将保留数据库和表名的字母大小写。这样做的缺点是您必须确保您的语句在 Windows 上始终以正确的字母大小写引用您的数据库和表名。如果您将语句转移到字母大小写很重要的 Unix，如果字母大小写不正确，它们将不起作用。
> 
> 例外：如果您正在使用 InnoDB 表并试图避免这些数据传输问题，则应在所有平台上将 lower_case_table_names 设置为 1 以强制将名称转换为小写。
> 
> 如果您计划在 Unix 上将 lower_case_table_names 系统变量设置为 1，则必须先将旧数据库和表名转换为小写，然后再停止 mysqld 并使用新变量设置重新启动它。要对单个表执行此操作，请使用 RENAME TABLE：
> 
> 将表 T1 重命名为 t1；要转换一个或多个整个数据库，请在设置 lower_case_table_names 之前转储它们，然后删除数据库，并在设置 lower_case_table_names 后重新加载它们：
> 
> 使用 mysqldump 转储每个数据库：
> 
> mysqldump --databases db1 > db1.sql mysqldump --databases db2 > db2.sql ... 对每个必须重新创建的数据库执行此操作。
> 
> 使用 DROP DATABASE 删除每个数据库。
> 
> 停止服务器，设置 lower_case_table_names，然后重新启动服务器。
> 
> 重新加载每个数据库的转储文件。因为设置了 lower_case_table_names，所以每个数据库和表名将在重新创建时转换为小写：
> 
> mysql < db1.sql mysql < db2.sql ... 如果根据二进制排序规则它们的大写形式相等，则对象名称可能被视为重复。对于游标、条件、过程、函数、保存点、存储的例程参数和存储的程序局部变量的名称也是如此。对于列名、约束名、数据库名、使用 PREPARE 准备的语句、表、触发器、用户和用户定义的变量的名称，情况并非如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T05:48:41.453

如果您使用的是 MySQL，您可以使用以下指令在 my.conf 中设置表名和列名区分大小写

```
set-variable = lower_case_table_names=1 
```

更新后不要忘记重启服务器。如果在所有服务器中使用相同的列名会更好

# sql-server - How to force SqlExpressChk.exe from bootstrapper to check for other instance than SQLEXPRESS

> ID：10309861
> 
> 赞同：0
> 
> 时间：2012-04-25T05:32:08.490
> 
> 标签：sql-server, installation, version, instance, bootstrapper

In SQL Express bootstrapper there is a file called SqlExpressChk.exe used to check the version of the installed SQL Express.

Unfortunately I've read that this file is looking for instance name SQLEXPRESS. Does anybody know how to force SqlExpressChk to look for another instance name ? I don't install SQL Server with default instance name.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:57:22.603

没有办法。SqlExpressChk.exe 仅限于默认实例名称 SQLEXPRESS。它不会检测 MSDN 上记录的其他命名实例。

但是，您可以通过多种其他方式检查实例。

[在这个相关的 SO question](https://stackoverflow.com/questions/141154/how-can-i-determine-installed-sql-server-instances-and-their-versions)的答案中列出了各种各样的方法。

[这个简单的谈话文章中记录了](http://www.simple-talk.com/sql/database-administration/why-this-sql-server-dba-is-learning-powershell/)PowerShell ：

```
# SQLVer.ps1
# usage: ./SQLVer.ps1 
# Check SQL version

foreach ($svr in get-content "C:\data\AllServers.txt")
{
 $con = "server=$svr;database=master;Integrated Security=sspi" 
 $cmd = "SELECT SERVERPROPERTY('ProductVersion') AS Version, SERVERPROPERTY('ProductLevel') as SP"
 $da = new-object System.Data.SqlClient.SqlDataAdapter ($cmd, $con)
 $dt = new-object System.Data.DataTable
 $da.fill($dt) | out-null
 $svr
 $dt | Format-Table -autosize
} 
```

[此 MSDN 文章中](http://blogs.msdn.com/b/sqlexpress/archive/2006/07/29/682254.aspx)还记录了 WMI ：

```
try
{
    // Run a WQL query to return information about SKUNAME and SPLEVEL about installed instances
    // of the SQL Engine.
    ManagementObjectSearcher getSqlExpress = 
      new ManagementObjectSearcher("root\\Microsoft\\SqlServer\\ComputerManagement",
      "select * from SqlServiceAdvancedProperty where SQLServiceType = 1 and 
      ServiceName = '" + instance + "' and (PropertyName = 'SKUNAME' or 
      PropertyName = 'SPLEVEL')");

    // If nothing is returned, SQL Express isn't installed.
    if (getSqlExpress.Get().Count==0)
    {
       return false;
    }
}
catch (ManagementException e)
{
   Console.WriteLine("Error: " + e.ErrorCode + ", " + e.Message);
   return false;
} 
```

# c - sizeof (long) 与 sizeof (*lp)

> ID：10309864
> 
> 赞同：1
> 
> 时间：2012-04-25T05:32:28.637
> 
> 标签：c, compiler-construction

一段经常执行的代码有以下计算：

```
long *lp
char *ep, *cp
...
tlen = (ep - cp) / sizeof (*lp); 
```

将其更改为：

```
long *lp
char *ep, *cp
...
tlen = (ep - cp) / sizeof (long); 
```

导致更高的效率（因为在编译时计算的 sizeof ）或者现代编译器已经在编译时处理这个问题。gcc 是做什么的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T05:36:42.300

该`sizeof`运算符始终是编译时评估的构造⁰，因此没有区别。

片段...

```
 tlen = (ep - cp) / sizeof (*lp); 
```

因此将被转化为类似的东西......

```
 tlen = (ep - cp) / 4; 
```

（假设`sizeof(long)==4` ¹。），应用了优化，下一个转换可能是......

```
 tlen = (ep - cp) >> 2; 
```

当然，还会有更多优化；这只是证明它是编译时构造⁰的可能结果。

我总是更喜欢`"sizeof(_var-name_)"`，`sizeof(_typename_)`因为它更通用，并且在更改变量的类型时不需要手动调整（从数组更改为指针时除外）。

* * *

^(0：可变长度数组除外。)

^(1：尺寸因平台而异)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T05:33:53.980

`sizeof()`总是在编译时计算，所以没有区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:45:50.060

您可以通过编写完全省去除法

```
tlen = ((long*)ep - (long*)cp); 
```

我不确定这是否会更有效。我的小实验没有结果。测试！

编辑：正如评论中所提到的，它仅在指针实际指向 long（或适合保存 long 的内存位置）时才有效。但如果他们没有在原始代码中，原始结果也没有意义，所以我假设他们是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T11:59:40.080

不会导致性能差异，但会导致取决于平台的行为差异。例如：在 Win x64 上 sizeof(long) 将为 4 但 sizeof(*lp) 为 8

# c++ - Unit testing for embedded system

> ID：10309866
> 
> 赞同：1
> 
> 时间：2012-04-25T05:32:50.970
> 
> 标签：c++, unit-testing

I am having a product which runs on Vxworks on end product hardware. But development is done in Visual studio using cross compiler and downloaded to hardware for testing. I am planning to write unit test cases for product. My question is because my development is done on windows and how can I run unit test cases as it is not resemebling real scenario?

Any inputs are welcome

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:41:53.600

我怀疑您的代码通过系统调用与 VxWorks 进行了很多交互。在那里放置一个抽象层会很困难。

你用的是c还是c++？

如果您使用的是 c++，并且您可以识别系统的某些部分：

*   经常变化；和
    *   主要处理内部数据；或者
    *   仅与周围系统的预定义/形式化子集相关（例如协议处理或单独的 PLC 控制逻辑模块）。

然后你应该首先在模块和系统的其余部分之间注入 c++ 接口。此模块应仅与接口/适配器相关。然后你有一个可以捆绑到视觉工作室测试工具中的独立部件。

然后，您应该尝试识别系统中容易出现错误、受到（频繁）更改或审核的区域。您可能永远无法在目标系统上实现 50% 的覆盖率，但您可以实现一个系统，其中 90% 的日常编码发生在覆盖的 40% 的代码库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:44:34.960

您可以像任何其他系统一样执行此操作：

*   编写单元测试
*   编译并加载到目标系统
*   运行单元测试
*   验证结果

它在哪里运行并不重要。最大的困难在于输出能力有限的嵌入式系统。但即使只有一个 LED，它仍然应该可以发出成功和失败的信号。只是它比显示“通过”更抽象一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T06:08:39.760

没有额外的努力是不可能的（*新项目；编译两次；为您的主机并让它在您的主机上运行*）在这种情况下，搜索支持您的单元测试目标的开发环境，例如[http://www.parasoft.com /jsp/products/embedded_cpptest.jsp](http://www.parasoft.com/jsp/products/embedded_cpptest.jsp)

继续阅读[parasoft C++ 单元测试问题](https://stackoverflow.com/questions/281037/parasoft-c-unit-test-question)。

# iphone - 验证电子邮件时，如果按两次空格，则会自动出现句号

> ID：10309867
> 
> 赞同：0
> 
> 时间：2012-04-25T05:33:20.097
> 
> 标签：iphone, objective-c, ios, nsstring, email-validation

我正在使用我们大多数人用于电子邮件验证的普通正则表达式。

问题：假设我的Email id是：a@a.com，那么在“com”之后，如果我按两次空格，会自动出现一个句号。

我正在使用以下代码来验证电子邮件。

```
- (BOOL)validateEmailWithString:(NSString*)email
{
    NSLog(@"helloo in validate");
    NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}"; 
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex]; 
    return [emailTest evaluateWithObject:email];
} 
```

我该如何避免这个句号？？？？

由于我是iphone开发的新手，请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:52:27.550

```
-(BOOL)validateEmail:(NSString *)inputText {
NSString *emailRegex = @"[A-Z0-9a-z][A-Z0-9a-z._%+-]*@[A-Za-z0-9][A-Za-z0-9.-]*\\.[A-Za-z]{2,6}"; 
NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex]; 
NSRange aRange;
if([emailTest evaluateWithObject:inputText]) 
{
    aRange = [inputText rangeOfString:@"." options:NSBackwardsSearch range:NSMakeRange(0, [inputText length])];
    int indexOfDot = aRange.location;
    NSLog(@"aRange.location:%d - %d",aRange.location, indexOfDot);
    if(aRange.location != NSNotFound) 
    {
        NSString *topLevelDomain = [inputText substringFromIndex:indexOfDot];
        topLevelDomain = [topLevelDomain lowercaseString];
        NSLog(@"topleveldomains:%@",topLevelDomain);
        NSSet *TLD;
        TLD = [NSSet setWithObjects:@".aero", @".asia", @".biz", @".cat", @".com", @".coop", @".edu", @".gov", @".info", @".int", @".jobs", @".mil", @".mobi", @".museum", @".name", @".net", @".org", @".pro", @".tel", @".travel", @".ac", @".ad", @".ae", @".af", @".ag", @".ai", @".al", @".am", @".an", @".ao", @".aq", @".ar", @".as", @".at", @".au", @".aw", @".ax", @".az", @".ba", @".bb", @".bd", @".be", @".bf", @".bg", @".bh", @".bi", @".bj", @".bm", @".bn", @".bo", @".br", @".bs", @".bt", @".bv", @".bw", @".by", @".bz", @".ca", @".cc", @".cd", @".cf", @".cg", @".ch", @".ci", @".ck", @".cl", @".cm", @".cn", @".co", @".cr", @".cu", @".cv", @".cx", @".cy", @".cz", @".de", @".dj", @".dk", @".dm", @".do", @".dz", @".ec", @".ee", @".eg", @".er", @".es", @".et", @".eu", @".fi", @".fj", @".fk", @".fm", @".fo", @".fr", @".ga", @".gb", @".gd", @".ge", @".gf", @".gg", @".gh", @".gi", @".gl", @".gm", @".gn", @".gp", @".gq", @".gr", @".gs", @".gt", @".gu", @".gw", @".gy", @".hk", @".hm", @".hn", @".hr", @".ht", @".hu", @".id", @".ie", @" No", @".il", @".im", @".in", @".io", @".iq", @".ir", @".is", @".it", @".je", @".jm", @".jo", @".jp", @".ke", @".kg", @".kh", @".ki", @".km", @".kn", @".kp", @".kr", @".kw", @".ky", @".kz", @".la", @".lb", @".lc", @".li", @".lk", @".lr", @".ls", @".lt", @".lu", @".lv", @".ly", @".ma", @".mc", @".md", @".me", @".mg", @".mh", @".mk", @".ml", @".mm", @".mn", @".mo", @".mp", @".mq", @".mr", @".ms", @".mt", @".mu", @".mv", @".mw", @".mx", @".my", @".mz", @".na", @".nc", @".ne", @".nf", @".ng", @".ni", @".nl", @".no", @".np", @".nr", @".nu", @".nz", @".om", @".pa", @".pe", @".pf", @".pg", @".ph", @".pk", @".pl", @".pm", @".pn", @".pr", @".ps", @".pt", @".pw", @".py", @".qa", @".re", @".ro", @".rs", @".ru", @".rw", @".sa", @".sb", @".sc", @".sd", @".se", @".sg", @".sh", @".si", @".sj", @".sk", @".sl", @".sm", @".sn", @".so", @".sr", @".st", @".su", @".sv", @".sy", @".sz", @".tc", @".td", @".tf", @".tg", @".th", @".tj", @".tk", @".tl", @".tm", @".tn", @".to", @".tp", @".tr", @".tt", @".tv", @".tw", @".tz", @".ua", @".ug", @".uk", @".us", @".uy", @".uz", @".va", @".vc", @".ve", @".vg", @".vi", @".vn", @".vu", @".wf", @".ws", @".ye", @".yt", @".za", @".zm", @".zw", nil];
        if(topLevelDomain != nil && ([TLD containsObject:topLevelDomain])) 
        {
            //NSLog(@"TLD contains topLevelDomain:%@",topLevelDomain);
            return TRUE;
        }
//            else {
//             NSLog(@"TLD DOEST NOT contains topLevelDomain:%@",topLevelDomain);
//             }

    }
}
return FALSE;
} 
```

**登赤**

```
if ([self validateEmail:txtFieldUserName.text]) 
{
    NSLog(@"done");
} 
else
{
 NSLog(@"Not done");
} 
```

也许它会帮助你......谢谢......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:30:36.180

两个空格后出现句号是正常行为。大多数用户都知道这一点，并且当它发生时不会感到惊讶。您可以在设置中将其关闭（常规->键盘->“。”快捷方式）。

如果你真的想防止它发生，你可以使用[这个答案](https://stackoverflow.com/a/6113117/74118)中的代码。请注意，您必须设置文本字段委托才能调用它。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)text
{
    //Check if a space follows a space
    if ( (range.location > 0 && [text length] > 0 &&
          [[NSCharacterSet whitespaceCharacterSet] characterIsMember:[text characterAtIndex:0]] &&
          [[NSCharacterSet whitespaceCharacterSet] characterIsMember:[[textField text] characterAtIndex:range.location - 1]]) )
    {
        //Manually replace the space with your own space, programmatically
        textField.text = [textField.text stringByReplacingCharactersInRange:range withString:@" "];

        //Make sure you update the text caret to reflect the programmatic change to the text view
//      textField.selectedTextRange = NSMakeRange(range.location+1, 0);  

        //Tell Cocoa not to insert its space, because you've just inserted your own
        return NO;
    }
    return YES;
} 
```

# vb6 - Windows 7 任务栏中的 VB6 应用程序图标模糊

> ID：10309875
> 
> 赞同：1
> 
> 时间：2012-04-25T05:33:43.957
> 
> 标签：vb6, windows-7-x64, taskbar

我有一个 VB6 应用程序，其中一个表单图标设置为应用程序图标。问题是在 Windows 7 中，即使图标包含 16x16、32x32 和 48x48 尺寸，图标看起来也很模糊。

有没有办法解决这个问题？它尝试了 SendMessage(... SETICON... ICON_BIG) 但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:24:44.600

ico 文件中的图标颜色深度是多少？

VB6（我相信）支持图标的最大 8 位颜色深度（256 色）：-

因此，如果在 8 位颜色深度中没有大小为 48 x 48 的图标，它可能会使用最接近的匹配并将其缩放到 48 x 48

编辑：

我刚刚尝试使用一个没有 8 位深度的 48 x 48 图标（但在更高深度有 48 x 48）的图标，并且任务栏中使用的图标是 8 位颜色深度的 32 位图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:59:11.100

我并没有声称了解用于选择要在各个地方显示的图标图像的完整启发式方法，但我认为这里发生的事情是您的 48x48 图像正在被拍摄和缩小。

我怀疑在许多版本的 Windows 上使用 VB6 程序会发生什么情况，如果没有 16 色 16x16 图像，则会拍摄和缩放更大的尺寸。原因可能仅仅是由于 ICO 资源/文件中图像的顺序。

如果您编辑您的 ICO 并添加 16x16 图像的 16 色版本，您的“问题”可能会消失。

# javascript - jQuery合并多个javascript数组值

> ID：10309886
> 
> 赞同：0
> 
> 时间：2012-04-25T05:35:22.397
> 
> 标签：javascript, arrays, merge

我遇到了一种情况，我需要将两个不同数组中的值合并到一个数组中。

我的第一个数组值如下：

```
[35.3,35.3,35.3,35.3,35.2,33.8,29.8,21.5] 
```

第二个数组值如下：

```
[10,20,30,40,50,60,70,80] 
```

结果数组：

```
[[35.3,10],[35.3,20],[35.3,30],[35.4,40],[35.2,50],[33.8,60],[29.8,70],[21.5,80]] 
```

感谢你的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:45:51.353

这是纯 javascript 中用于等长数组的简单函数：

```
var a = [35.3,35.3,35.3,35.3,35.2,33.8,29.8,21.5];
var b = [10,20,30,40,50,60,70,80];

function merge(a, b) {
    if (a.length == b.length) {
        var c = [];
        for (var i = 0; i < a.length; i++) {
            c.push([a[i], b[i]]);
        }
        return c;
    }
    return null;
}

var c = merge(a, b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:39:15.703

由于您已经想使用一个库，这里有一个使用另一个库的建议（jQuery 并不是真正的非 DOM 相关工具的工具）：

[http://documentcloud.github.com/underscore/#zip](http://documentcloud.github.com/underscore/#zip)

> ```
> zip_.zip(*arrays) 
> ```
> 
> 将每个数组的值与相应位置的值合并在一起。当您有通过匹配数组索引进行协调的单独数据源时很有用。如果您正在使用嵌套数组的矩阵，则 zip.apply 可以以类似的方式转置矩阵。
> 
> ```
> _.zip(['moe', 'larry', 'curly'], [30, 40, 50], [true, false, false]);
> => [["moe", 30, true], ["larry", 40, false], ["curly", 50, false]] 
> ```

* * *

由于您的数组具有相同的大小，因此这里有一个简单的函数来完成这项工作：

```
function zip(arr1, arr2) {
    var arr = new Array(arr1.length);
    for(var i = 0; i < arr1.length; i++) {
        arr.push([arr1[i], arr2[i]]);
    }
    return arr;
} 
```

要使其采用最短的数组并忽略另一个数组中的其他元素：

```
for(var i = 0, len = Math.min(arr1.length, arr2.length); i < len; i++) 
```

# iphone - UITableViewCell contentLayer backgroundColor 不会覆盖附件的背景

> ID：10309892
> 
> 赞同：0
> 
> 时间：2012-04-25T05:36:50.133
> 
> 标签：iphone, ios, uitableview, background-color

我正在编写一个小应用程序来自学新的设计和信息检索技巧。我正在使用以下行来设置我的`UITableViewCell`子类的背景：

```
cell.contentView.backgroundColor = [UIColor blackColor]; 
```

...但它似乎不想落后于那个附属视图：

![](../Images/e9b14c0e7cb13d5855d58126e1a1620b.png)

如何让 backgroundColor 真正跨越整个背景`UITableViewCell`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:50:01.497

附件视图未添加到单元格的 contentView。如您所见，内容视图通过从右侧缩小来调整大小，以便配件可以适应。这也会在显示删除按钮时发生。

您需要设置`backgroundColor`整个单元格的 - 此外，这必须在`tableView:willDisplayCell:forRowAtIndexPath:` 委托方法中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:41:59.490

如果要设置整个单元格的颜色，请使用 -

```
cell.backgroundColor = [UIColor blackColor]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:42:30.447

不完全是这个问题的明确答案，但是当您使用“分组”视图而不是标准`UITableView`样式时，它会很好地工作。

# objective-c - 数组引用不同数组中的对象

> ID：10309893
> 
> 赞同：0
> 
> 时间：2012-04-25T05:36:59.610
> 
> 标签：objective-c, ios, arrays, object

我有下面列出的卡车清单。我还列出了下面列出的人员名单。我希望第二个人 (dondi) 成为 Buttermilk Truck 的所有者，但我不知道如何在属性 peopleTruck 中引用它。有任何想法吗？

```
 listTrucks = [[NSMutableArray alloc] initWithObjects:
               [Truck truckWithCuisine:@"American Cuisine" name:@"Buttermilk Truck" menu:[NSData dataWithContentsOfFile:@"/Users/Steve/Desktop/Truck Tracker App/Truck Tracker App/Buttermilk Truck Menu.tiff"] latitude: [NSNumber numberWithDouble: 0.1] longitude: [NSNumber numberWithDouble: 0.1]schedule:@"7/15/12"],

 listUsers = [[NSMutableArray alloc] initWithObjects:
             [Person personWithEmail:@"stephen" password:@"test" type:@"Eater" userFavoritesList:nil, personsTruck:nil],
             [Person personWithEmail:@"dondi" password:@"test" type:@"Owner" userFavoritesList:favoritedTrucks = [[NSMutableArray alloc] init], personsTruck:listTrucks.],
              nil];
 selectedPerson = nil; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:47:52.620

你知道卡车的主人，我的意思是它是静态的吗？

如果是的话，你可以去这个..

您可以通过在 Truck 对象中添加用户列表的索引值来维护卡车列表中的所有者姓名，该索引值提供对用户列表的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:43:16.087

在`listUsers`店里`personsTruck = 0`。这意味着 array 的第一个元素`listTrucks`。从`listTrucks`用户`objectAtIndex:`0 (personsTruck) 获取价值。

# jquery - Jquery - 直接我不能映射对象值？

> ID：10309898
> 
> 赞同：0
> 
> 时间：2012-04-25T05:37:42.257
> 
> 标签：jquery

我将元素引用存储在对象中。稍后如果我引用对象值，我无法得到结果..

```
 var cciApp = {};

    cciApp.widget = {
console.log($(cciApp.tools.title))//return undefined
        shuffle : function(){
            $($(cciApp.tools.title), cciApp.tools.secParent).click(function(){
                $(this).siblings('.expand-area').slideToggle().end().parent().siblings().children('.expand-area').slideUp();
            })
        }
    }

    $(document).ready(function(){
        cciApp.tools = {
            secParent : $('#Accordion'),
            title:$(cciApp.tools.secParent).find('h3')//i am not getting any result.
        }
        cciApp.widget.shuffle();
    }) 
```

我相信可能会返回功能会有所帮助。但是为什么我们需要返回这些东西来检索数据，而不是仅仅引用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:41:05.433

Yu需要像这样改变它，

```
 secParent : $('#Accordion'),
        title:$('#Accordion').find('h3') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:52:17.377

你不能这样做：

```
cciApp.widget = {
    console.log($(cciApp.tools.title))//return undefined
    // ...
}; 
```

您正在对象声明中**调用函数。**没办法。

# java - 为什么在jsp中会话超时后会话有会话ID？

> ID：10309901
> 
> 赞同：0
> 
> 时间：2012-04-25T05:38:01.490
> 
> 标签：java, javascript, ajax, struts

嗨，在 JavaScript 的 jsp 中，我正在检查会话中的 userdId，如果会话也过期，它总是有会话 ID，但是我在会话过期后检查了 java Action 类，用户 ID 为空，但在 jsp 中没有。[代码链接](http://jsfiddle.net/hari034/xWtPz/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:28:49.710

尝试在您的 javascript 代码中提醒 sessionId。旧的过期后你会发现sessionId不一样了。

还要检查创建新会话时代码在做什么。它可能正在新会话中设置用户标识。

# c# - Delphi中的DataTable（类似于DataSet）组件

> ID：10309908
> 
> 赞同：4
> 
> 时间：2012-04-25T05:38:48.137
> 
> 标签：c#, delphi, tdataset

我是 Delphi 开发人员和 C# 开发人员。C# 具有支持随机访问行的 DataTable 类。是否有类似于 DataTable (C#) 的第三方 TDataSet (Delphi) 组件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T05:45:44.800

Delphi 中有[`TClientDataSet`](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/DBClient_TClientDataSet.html)类，其功能类似于[`DataSet`](https://msdn.microsoft.com/en-us/library/system.data.dataset(v=vs.110).aspx).NET 中的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-26T08:48:22.737

您可以使用[Ian 建议](https://stackoverflow.com/a/45313233/937125)[`TADODataSet`](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/ADODB_TADODataSet.html)的断开连接的内存数据集。与IMO相比，它非常强大。`TClientDataSet`

`ADO`但是不需要所有低级的东西。它很简单：

```
var 
   ds: TADODataSet;

ds := TADODataSet.Create(nil);

//add our fields
ds.FieldDefs.Add('InvoiceNumber', ftInteger);
ds.FieldDefs.Add('CustomerName',  ftWideString, 200);
ds.FieldDefs.Add('CreatedDate',   ftDateTime);
ds.FieldDefs.Add('Comments',      ftWideMemo);
ds.FieldDefs.Add('Quantity',      ftFloat);
ds.FieldDefs.Add('InvoiceTotal',  ftCurrency);
ds.CreateDataSet;

//Add a row of values - the easy way
ds.Append;
ds.FieldByName('InvoiceNumber').AsInteger := 1783;
ds.FieldByName('CustomerName').AsString   := 'Hubert Farnsworth';
ds.FieldByName('CreatedDate').AsDateTime  := Now;
ds.FieldByName('Comments').AsString       := 'The quick brown fox jumped over the lazy dog';
ds.FieldByName('Quantity').AsFloat        := 19809.32; //imperial gallons
ds.FieldByName('InvoiceTotal').AsCurrency := 99.95; //GBP
ds.Post;

//Add another row of values - with an array of values all at once
ds.AppendRecord([1784, 'Steven Gates', Now, '//no comment', 1292, 19.25]); 
```

您还可以编辑现有数据：

```
ds.First;
ds.Edit;
ds.FieldByName('InvoiceNumber').AsInteger := 1786; 
```

然后，您可以使用[`TDataSource`](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/DB_TDataSource.html)将其绑定到`TADODataSet`并在需要时使用数据感知控件链接到`TDataSource`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T05:53:24.693

[AnyDAC 中的数据存储引擎](http://www.da-soft.com/anydac/data-access-engine.html#dats)。通常，它是[ADO.NET](http://en.wikipedia.org/wiki/ADO.NET) v 1，但用于本机代码。它可以与 TADMemTable 一起使用。

PS：AnyDAC 是商业产品。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T18:04:38.460

[kbmMemTable CodeGear 版，您可以在https://portal.components4developers.com](https://portal.components4developers.com)注册后作为 kbmmW CodeGear 版的一部分免费下载（如果出现任何错误，请忽略证书。该站点*有效*）。

kbmMemTable CodeGear Edition 包含功能最丰富的 Delphi 内存表.. 免费。它甚至包含：

*   SQL 支持高级高性能索引过滤书签
*   与其他数据集源和目标的数据集交换
*   master/detail 多个游标（以及单独的过滤器和索引）
*   物理上相同的数据非常高性能的版本控制和
*   跟踪数据更改，包括解决这些问题的能力
*   通过 deltahandlers 更改到其他地方
*   加上产品中的数百个功能和好东西

如果您需要源 kbmMemTable 标准版可用，并且如果您需要可以在 Delphi 内存数据集中找到的最佳性能，您可以将 kbmMemTable 专业版作为 kbmMW 专业版和 kbmMW 企业版的捆绑部分。

最好的问候金马德森 www.components4developers.com

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T20:40:13.477

JVCL 有支持随机访问行和字段的 TjvMemoryData。它比 Delphi 自己的 TClientDataSet 灵活一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-26T12:40:41.023

Cary Jensen 有一个比较 ClientDataSets 和 DataTables 的优秀系列：[内存中数据集：ClientDataSet 和 .NET DataTable 比较：第 1 部分概述](http://caryjensen.blogspot.de/2009/09/in-memory-datasets-clientdataset-and.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-26T14:27:34.813

[AidAim](http://www.aidaim.com/in-memory_sql_database_delphi.htm)提供免费（供个人使用）内存数据库表

> SQLMemTable 是一个功能齐全的内存数据库系统；它包括数据库、表、查询和批量移动组件以及有用的实用程序（带有源代码）、演示和全面的帮助。SQLMemTable 不需要 BDE 或任何外部驱动程序，并且占用空间小。

另一个免费（开源）组件是[TxQuery](http://code.google.com/p/txquery/) (MPL)

> TxQuery 组件是一个 TDataSet 后代组件，可用于使用 SQL 语句查询一个或多个 TDataSet 后代组件

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-07-25T20:48:49.687

目标是拥有一个纯粹的内存`TDataSet`。`TClientDataSet`（除了[错误](http://codeverge.com/embarcadero.datasnap/tclientdataset-createdataset-failing-wit/1097715)）的问题是，您将依赖客户在他们的计算机上没有的 DLL。（意味着你有一个 dll 加密狗）。

幸运的是，微软已经创建了一个客户端的、内存中的、本机等效的 a `DataTable`：ADO `Recordset`。

您可以制作您的 ADO `Recordset`，为其提供字段，然后将其包装在 a 中`TADODataSet`，以便它从规范的 Delphi 中继承`TDataSet`（或者您可以直接使用 ADO Recordset 对象）。

```
var
    rs: Recordset;

//Use ADO Recordset to hold our in-memory table
rs := CoRecordset.Create;
rs.CursorLocation := adUseClient; //default is adUseServer 
```

现在您有了记录集，您可以定义字段：

```
//add our fields
rs.Fields.Append('InvoiceNumber', adInteger,      0,   adFldUpdatable, EmptyParam);
rs.Fields.Append('CustomerName',  adVarWChar,     200, adFldUpdatable, EmptyParam);
rs.Fields.Append('CreatedDate',   adDBTimeStamp,  0,   adFldUpdatable, EmptyParam);
rs.Fields.Append('Comments',      adLongVarWChar, -1,  adFldUpdatable, EmptyParam);
rs.Fields.Append('Quantity',      adDouble,       0,   adFldUpdatable, EmptyParam);
rs.Fields.Append('InvoiceTotal',  adCurrency,     0,   adFldUpdatable, EmptyParam); 
```

您还必须对`Open`记录集实现字段：

```
var
   o: OleVariant;

//It's impossible in Delphi to omit parameters. So we do it the late-binding IDispatch way
//  rs.Open(EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam);
o := (rs as IDispatch);
o.Open; 
```

您有空的内存表。现在您可以添加数据行：

```
//Add a row of values - the easy way
rs.AddNew(EmptyParam, EmptyParam); //moves cursor to newly added row
rs.Fields['InvoiceNumber'].Value := 1783;
rs.Fields['CustomerName'].Value  := 'Hubert Farnsworth';
rs.Fields['CreatedDate'].Value   := Now;
rs.Fields['Comments'].Value      := 'The quick brown fox jumped over the lazy dog';
rs.Fields['Quantity'].Value      := 19809.32; //imperial gallons
rs.Fields['InvoiceTotal'].Value  := 99.95; //GBP

//Add another row of values - you can add by single value
rs.AddNew('InvoiceNumber', 1784);

//Add another row of values - you can add by field names
rs.AddNew(VarArrayOf(['InvoiceNumber', 'InvoiceTotal']), VarArrayOf([1784, 22.37]));

//Add another row of values - you can add by ordinal index
rs.AddNew(VarArrayOf([0, 2]), VarArrayOf([1785, Now]));

//Move to the start of the Recordset, so it will be ready for the person using it.
if (not rs.BOF) or (not rs.EOF) then //You can't MoveFirst on a Recordset if the Recordset is empty. (It's throws an error instead of not throwing an error)
rs.MoveFirst; 
```

最后，我们想要一个熟悉的`TDataSet`包装器：

```
var
   dataset: TDataSet;      

//Wrap the recordset is a TDataSet descendant 
//that knows how to talk to an ADO recordset: the TADODataSet.
dataset := TADODataSet.Create(nil);
dataset.Recordset := rs; 
```

所以我可以测试它：

```
var 
   ds: TDataSet;
begin
   ds := CreateMemoryDataSet();
   ShowMessage(DataSetToMarkdown(ds)); 
```

我得到了预期的内存数据：

```
| InvoiceNumber | CustomerName      | CreatedDate          | Comments | Quantity | InvoiceTotal |
|---------------|-------------------|----------------------|----------|----------|--------------|
| 1783          | Hubert Farnsworth | 7/25/2017 3:32:21 PM | The quick brown fox jumped over the lazy dog | 19809.32 | 99.95 |
| 1784          |                   |                      |          |          |              |
| 1784          |                   |                      |          |          | 22.37        |
| 1785          |                   | 7/25/2017 3:32:22 PM |          |          |              | 
```

您还可以修改内存中的值：

```
ds := CreateMemoryDataSet();    
ds.First;
ds.Edit;
ds.FieldByName('InvoiceNumber').AsInteger := 1786;
ShowMessage(DataSetToMarkdown(ds));

| InvoiceNumber | CustomerName      | CreatedDate          | Comments | Quantity | InvoiceTotal |
|---------------|-------------------|----------------------|----------|----------|--------------|
| 1786          | Hubert Farnsworth | 7/25/2017 3:32:21 PM | The quick brown fox jumped over the lazy dog | 19809.32 | 99.95 |
| 1784          |                   |                      |          |          |              |
| 1784          |                   |                      |          |          | 22.37        |
| 1785          |                   | 7/25/2017 3:32:22 PM |          |          |              | 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-06-26T10:56:16.187

您可能对来自**Inovativa** ( [http://www.inovativa.com.br/public ) 的](http://www.inovativa.com.br/public)**TECDataset** (EverClassy Dataset)感兴趣，它是一个内存数据集，可以填充任何类的对象。

# android - Android 中不调用 OnActionResult 方法

> ID：10309912
> 
> 赞同：0
> 
> 时间：2012-04-25T05:39:12.697
> 
> 标签：android

我想从图库中选择图像。请检查以下代码。

```
public class Camera extends Activity {

     private static final int SELECT_PICTURE = 1;
     private String selectedImagePath;
     WebView localview;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
    }

    public void ChoosePhoto(WebView webview)
    {
                localview=webview;
            Intent intent = new Intent();
                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(Intent.createChooser(intent,"Select Picture"), SELECT_PICTURE); 
    }   

    public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE)
            {
                Uri selectedImageUri = data.getData();
                selectedImagePath = getPath(selectedImageUri);
                try {
                    FileInputStream fileis=new FileInputStream(selectedImagePath);
                    BufferedInputStream bufferedstream=new BufferedInputStream(fileis);
                    byte[] bMapArray= new byte[bufferedstream.available()];
                    bufferedstream.read(bMapArray);
                    localview.loadUrl("javascript:ReceivePhoto(\""+bMapArray+"\")");
                    if (fileis != null) 
                    {
                        fileis.close();
                    }
                    if (bufferedstream != null) 
                    {
                        bufferedstream.close();
                    }
                } catch (FileNotFoundException e) {                 
                    e.printStackTrace();
                } catch (IOException e) {                   
                    e.printStackTrace();
                }               
            }
        }
    }

    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

} 
```

并将活动包含在清单文件中。但是选择图像后，**不会调用 OnActivityResult。**

谁能帮帮我吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:53:35.413

这就是我从图库中挑选图像的方法：

活动启动：

```
 Intent intent = new Intent(Intent.ACTION_GET_CONTENT);  
            intent.setType("image/*");
            startActivityForResult(intent, Comun.GALLERY_PIC_REQUEST); 
```

捕获活动结果：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(resultCode == Activity.RESULT_OK) {
        mUriImagen = data.getData();

             // Do something

    }
} 
```

**编辑：**删除了不必要的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:16:21.440

让我们试试这个。

你的相机类：

```
public class Camera {

private Activity mParentActivity;
private OnPhotoChosenListener mPhotoChosenListener;

    // Declare an Iterface for comunicating with Activity
    interface OnPhotoChosenListener{
        public void onPhotoChosen();
    }

public Camera(Activity parentActivity) {
    mParentActivity = parentActivity;
}

public void ChoosePhoto(WebView webview)
{
    mPhotoChosenListener.onPhotoChosen();
} 
```

您的活动：

```
public class MyActivity extends Activity implements OnPhotoChosenListener{

Camera myCamera;
private static final int SELECT_PICTURE = 1;
private String selectedImagePath;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    myCamera = new Camera(this);
}

public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_PICTURE)
        {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);
            try {
                FileInputStream fileis=new FileInputStream(selectedImagePath);
                BufferedInputStream bufferedstream=new BufferedInputStream(fileis);
                byte[] bMapArray= new byte[bufferedstream.available()];
                bufferedstream.read(bMapArray);
                localview.loadUrl("javascript:ReceivePhoto(\""+bMapArray+"\")");
                if (fileis != null) 
                {
                    fileis.close();
                }
                if (bufferedstream != null) 
                {
                    bufferedstream.close();
                }
            } catch (FileNotFoundException e) {                 
                e.printStackTrace();
            } catch (IOException e) {                   
                e.printStackTrace();
            }               
        }
    }
}

@Override
public void onPhotoChosen(){
    Intent intent = new Intent(Intent.ACTION_GET_CONTENT);  
    intent.setType("image/*");
    startActivityForResult(intent, Comun.GALLERY_PIC_REQUEST);
}

public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

唯一剩下的就是怎么打电话

> ChooseFoto(Webview webview)

方法。这是我不明白该怎么做的部分。也许你找到了解决方案。

**编辑：**添加用于实现接口的代码。

# jquery - 在页面加载时创建导航（jQuery/Web 设计）

> ID：10309917
> 
> 赞同：0
> 
> 时间：2012-04-25T05:39:59.577
> 
> 标签：jquery, navigation

我有一个涉及许多图像的项目，但每个用户只关心发布的少数图像。当前系统的组织方式是年 > 月 > 日，我想在画廊导航页面中保持这种状态。

每次添加一组新图像时，我都可以更新图库导航页面，但我想知道是否可以在页面加载时使用 jQuery 从现有文件夹系统构建导航，这样一旦添加了新的图像文件夹无需对导航页面进行任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:47:46.333

你绝对不能单独使用 jQuery 来做到这一点。作为一个 javascript 库，它运行在客户端并且本身无法访问服务器的文件系统。

您至少需要一个 ajax 请求来（即）服务器上的一个 PHP 文件，该文件将读取文件系统并创建菜单。

也就是说，您可以在交付页面之前创建菜单，从而保存 ajax 请求。在脚本中，您甚至可以缓存动态菜单，并且每小时更新一次（根据您的需要进行调整）。

# linux - 在安装 RPM 之前验证 Linux 软件包

> ID：10309920
> 
> 赞同：0
> 
> 时间：2012-04-25T05:40:15.747
> 
> 标签：linux, rpm, rpmbuild

我有一个需要安装的 RPM 文件，在安装之前我想检查其中包含的软件包的版本。如果软件包已经安装，我可以使用`rpm -qi`知道版本号，但是如果未安装软件包，我使用什么选项来查找版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:46:43.263

该`-p`选项可用于将查询定向到已卸载的包。

```
rpm -qip package.rpm 
```

# android - 从另一个 Activity 更新视图

> ID：10309927
> 
> 赞同：0
> 
> 时间：2012-04-25T05:41:28.200
> 
> 标签：android, android-activity, android-intent

我正在尝试使用带有 Theme.Dialog 的 Activity 来模拟软件键盘。键盘活动仅覆盖屏幕的一部分。底层活动仍然处于活动状态，可以直接控制。我希望输入的文本在输入时显示在基础活动中。

有没有办法我可以做到这一点？我正在考虑将我的 EditText 的引用放入 Intent Bundle，但这似乎不正确。

**编辑**：有人回答使 EditText 静态，但随后删除了响应。如果这被证明是正确的反应，他们可以把它加回来吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:45:37.867

它不起作用..您的活动将处于暂停状态..您尝试在那里调用某些东西肯定会引发异常..不要尝试它..`onActivityResult()`改为尝试...

**:编辑**

那么试试这个..

获取活动实例（我的意思是具有编辑文本的活动）然后

```
if(!yourActviity.isFinishing())
{

((EditText)yourActviity.findViewById(R.id.editText)).setText("text");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T05:52:21.000

如果您正在使用自定义对话框，您可以使用其 mainactivity 上下文访问主活动中的变量。为此，您需要将上下文转换为 mainactivity 类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T23:38:31.920

我正在回答我自己的问题，因为提供原始答案的人将其删除，并且没有重新发布。

到目前为止，我发现的最佳解决方案是在软件键盘活动中创建一个静态字段，该字段指的是被操纵的 EditText。然后，调用 Activity 会在启动 Intent 之前更新此静态字段。

这可以无缝地工作，并且调用 Activity 被从堆栈中删除没有任何问题。

# java - 在单个类文件中多次实现比较器

> ID：10309929
> 
> 赞同：5
> 
> 时间：2012-04-25T05:41:36.473
> 
> 标签：java, comparator

我有一些代码可以按修改日期对路径进行排序。我还想编写一些代码来以相反的顺序对路径进行排序，并且以后可能想要添加一些其他排序方法。有没有办法从单个类文件中进行所有排序？或者我是否必须创建另一个类 PathSortByDateReverse、PathSortByCreated、PathSortByFoo 等。另外，我将如何使用不同的排序方法？

```
import java.nio.file.Path;
import java.util.Comparator;

public class PathSortByDate implements Comparator<Path> {

@Override
public int compare(Path first, Path second) {
    long seconddate = second.toFile().lastModified(); // get just the filename
    long firstdate = first.toFile().lastModified();

    if (firstdate == seconddate) {
        return 0;
    } else if (firstdate > seconddate) {
        return 1;
    } else {
        return -1;
    }
}
} 
```

然后我从另一个类中调用它：

```
public static ArrayList<Path> sortArrayListByDate(ArrayList<Path> pathlist) {
    Collections.sort(pathlist,new PathSortByDate());
    return pathlist;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T05:50:58.183

为什么不选择匿名内部类？

```
public static final Comparator<Person> ID_DESC
     = new Comparator<Person>() {
      public int compare(Person p1, Person p2) {
         return -1 * p1.getId().comparedTo(p2.getId());
         // reversed order
      }
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T06:18:44.987

我通常会这样做。请注意，构造函数是“私有的”，并且有一个“公共工厂方法”来获取实例。在任何给定点都会存在两个 PathComparator 实例。如果您要优化代码并使用最佳实践，这将是一件大事。

```
import java.nio.file.Path;
import java.util.Comparator;

final public class PathComparator implements Comparator<Path> {

// comparator for in order
final private static PathComparator ascendingOrderComparatorDate = new PathComparator(true);
// comparator for reverse order
final private static PathComparator descendingOrderComparatorDate = new PathComparator(false);

final private int isAscendingOrderInt;

final public PathComparator getPathComparator(boolean isAscendingOrder) {
    return isAscendingOrder ? ascendingOrderComparatorDate : descendingOrderComparatorDate;
}

private PathComparator(boolean isAscendingOrder) {
    this.isAscendingOrderInt = isAscendingOrder ? 1 : -1;
}

@Override
public int compare(Path first, Path second) {
    // for optimization (not required but highly recommended)
    if(first == second) return 0;

    long seconddate = second.toFile().lastModified(); // get just the filename
    long firstdate = first.toFile().lastModified();

    if (firstdate == seconddate) {
        return 0;
    } else if (firstdate > seconddate) {
        return isAscendingOrderInt * 1;
    } else {
        return isAscendingOrderInt * -1;
    }
}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T05:44:54.433

您不需要制作反向比较器，只需制作它并使用

```
Collections.reverseOrder() 
```

# mysql - MySQL 复杂连接优化

> ID：10309937
> 
> 赞同：1
> 
> 时间：2012-04-25T05:42:09.807
> 
> 标签：mysql

我有一个结果集，我使用以下方法从三个表之间的连接中获得：

```
SELECT X.*, Y.Name FROM `A` AS X
INNER JOIN `B` AS Y
INNER JOIN `C` AS Z
ON X.id=Y.id AND X.categoryID=Z.categoryID
WHERE X.userID_FK=%d AND X.listID_FK=%d 
ORDER BY Z.categoryRank ASC 
```

我有第四个表“D”，其中包含：

```
-------------------------------
  id_FK    userID_FK    vote
------------------------------- 
```

这里`(id_FK, userID_FK)`的pair是PK。

第一个查询返回的每个都`X.id`可以在表中有多个条目`D`。通常，对于每个返回的行，为了计算票数`id`，我会编写如下查询：

```
SELECT SUM(vote) FROM D WHERE `id`=%d 
```

我想知道是否可以将这两个查询优化为一个查询，因为当前方案会导致`O(n)`执行时间。`n`是第一个查询返回的结果数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T06:33:52.860

你可以简单地这样做

```
SELECT
X.*,
Y.Name,
(SELECT
   SUM(vote)
   FROM D
   WHERE `id` = X.id) as Count
FROM `A` AS X
INNER JOIN `B` AS Y
INNER JOIN `C` AS Z
ON X.id = Y.id
  AND X.categoryID = Z.categoryID
WHERE X.userID_FK =  % d
AND X.listID_FK =  % d
ORDER BY Z.categoryRank ASC 
```

# java - 在一个驱动程序中运行相关的 hadoop 作业

> ID：10309939
> 
> 赞同：1
> 
> 时间：2012-04-25T05:42:28.907
> 
> 标签：java, hadoop, distributed-cache

我目前有两个 hadoop 作业，其中第二个作业需要将第一个作业的输出添加到分布式缓存中。目前我手动运行它们，所以在第一个作业完成后，我将输出文件作为参数传递给第二个作业，其驱动程序将其添加到缓存中。

第一份工作只是一个简单的仅限地图的工作，我希望在按顺序执行两个工作时可以运行一个命令。

任何人都可以帮我编写代码以将第一个作业的输出放入分布式缓存中，以便可以将其传递给第二个作业吗？

谢谢

编辑：这是工作 1 的当前驱动程序：

```
public class PlaceDriver {

public static void main(String[] args) throws Exception {

    Configuration conf = new Configuration();
    String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();
    if (otherArgs.length != 2) {
        System.err.println("Usage: PlaceMapper <in> <out>");
        System.exit(2);
    }
    Job job = new Job(conf, "Place Mapper");
    job.setJarByClass(PlaceDriver.class);
    job.setMapperClass(PlaceMapper.class);
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(Text.class);
    TextInputFormat.addInputPath(job, new Path(otherArgs[0]));
    TextOutputFormat.setOutputPath(job, new Path(otherArgs[1]));
    System.exit(job.waitForCompletion(true) ? 0 : 1);
}
} 
```

这是 job2 的驱动程序。作业 1 的输出作为第一个参数传递给作业 2 并加载到缓存中

```
public class LocalityDriver {

public static void main(String[] args) throws Exception {

    Configuration conf = new Configuration();
    String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();
    if (otherArgs.length != 3) {
        System.err.println("Usage: LocalityDriver <cache> <in> <out>");
        System.exit(2);
    }
    Job job = new Job(conf, "Job Name Here");
    DistributedCache.addCacheFile(new Path(otherArgs[0]).toUri(),job.getConfiguration());
    job.setNumReduceTasks(1); //TODO: Will change
    job.setJarByClass(LocalityDriver.class);
    job.setMapperClass(LocalityMapper.class);
    job.setCombinerClass(TopReducer.class);
    job.setReducerClass(TopReducer.class);
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(Text.class);
    TextInputFormat.addInputPath(job, new Path(otherArgs[1]));
    TextOutputFormat.setOutputPath(job, new Path(otherArgs[2]));
    System.exit(job.waitForCompletion(true) ? 0 : 1);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:42:31.977

在同一个主目录中创建两个作业对象。让第一个等待完成，然后再运行另一个。

```
public class DefaultTest extends Configured implements Tool{

    public int run(String[] args) throws Exception {

        Job job = new Job();

        job.setJobName("DefaultTest-blockx15");

        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(IntWritable.class);

        job.setMapperClass(Map.class);
        job.setReducerClass(Reduce.class);

        job.setNumReduceTasks(15);

        job.setInputFormatClass(TextInputFormat.class);
        job.setOutputFormatClass(TextOutputFormat.class);

        FileInputFormat.setInputPaths(job, new Path(args[0]));
        FileOutputFormat.setOutputPath(job, new Path(args[1]));

        job.setJarByClass(DefaultTest.class);

        job.waitForCompletion(true):

                job2 = new Job(); 

                // define your second job with the input path defined as the output of the previous job.

        return 0;
    }

    public static void main(String[] args) throws Exception {
        Configuration conf = new Configuration();
        String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();
        ToolRunner.run(new DefaultTest(), otherArgs);
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:11:39.673

MapReduce 中的作业链是非常常见的场景。你可以试试[cascading](http://www.cascading.org/)，一个开源的 MapReduce 工作流管理软件。[这里](https://stackoverflow.com/questions/3681494/does-anyone-find-cascading-for-hadoop-map-reduce-useful)有一些关于级联的讨论。或者您可以[在此处](https://stackoverflow.com/questions/2499585/chaining-multiple-mapreduce-jobs-in-hadoop)查看与您类似的讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T18:54:14.403

您还可以使用 ChainMapper、JobControl 和 ControlledJob 来控制您的工作流程

```
Configuration config = getConf();

Job j1 = new Job(config);
Job j2 = new Job(config);
Job j3 = new Job(config);

j1.waitForCompletion(true);

JobControl jobFlow = new JobControl("j2");
ControlledJob cj3 = new ControlledJob(j2, null);
jobFlow.addJob(cj3);
jobFlow.addJob(new ControlledJob(j2, Lists.newArrayList(cj3)));
jobFlow.addJob(new ControlledJob(j3, null));
jobFlow.run(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:49:18.993

一个直接的答案是将两个主要方法的代码提取到两个单独的方法中，例如：`boolean job1()`并`boolean job2()` 在一个主要方法中依次调用它们，如下所示：

```
public static void main(String[] args) throws Exception {
   if (job1()) {
      jobs2();
   }
} 
```

其中`job1`和调用的返回值是`job2`调用的结果`job.waitForCompletion(true)`

# json - `[1,2,3]` 是有效的 json 格式吗？

> ID：10309948
> 
> 赞同：-2
> 
> 时间：2012-04-25T05:43:26.587
> 
> 标签：json, validation

我知道：

```
{
   "name": "Mike",
   "age": 18
} 
```

或者

```
[{"name": "Mike"},{"name": "Jeff"}] 
```

是有效的 json。

但我不确定`[1,2,3]`是不是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T05:45:57.140

[1,2,3] 一个有效的 JSON 数组，但不是一个有效的 JSON 对象。对象必须采用 {...} 形式。

~~您的其他示例不是有效的 JSON。字符串必须用双引号。~~你修好了。

# ruby - 安装指南针问题 - 使用 gem install compass - windows 7

> ID：10309951
> 
> 赞同：-1
> 
> 时间：2012-04-25T05:43:45.067
> 
> 标签：ruby, compass-sass, sass

在 Windows 7 上安装 ruby​​ 版本 1.9.3 后一直在尝试安装指南针，但总是不时收到以下消息：

```
C:\Users\marif>gem install compass
Fetching: fssm-0.2.9.gem ( 22%)ERROR:  While executing gem ... (Gem::RemoteFetch
er::FetchError)
    too many connection resets (http://cachefly.mirrors.rubygems.org/gems/fssm-0
.2.9.gem) 
```

也试过了，`gem update --system`但到目前为止没有任何运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:45:21.330

啊，它在家庭网络上工作，从来没有在工作中以某种方式工作过。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T01:28:24.140

我认为在 windows7 中你必须在安装 ruby​​ 后重新启动你的机器。这就是它对我有用的方式。甚至我也在想同样的方式，它在工作网络上不起作用，但在家庭网络上起作用，但这是错误的。

# ipad - ipad应用程序中的pdf下载链接不起作用

> ID：10309954
> 
> 赞同：0
> 
> 时间：2012-04-25T05:44:01.867
> 
> 标签：ipad, pdf

我有一个独立的离线 html 应用程序，它不适合在服务器上部署。我已将该 html 应用程序转换为 ipad 应用程序。

该应用程序具有本地 pdf 和 excel 文件的链接。我提供了在应用程序中下载这些文件的链接。它在浏览器中运行良好。

但是在 ipad 中，下载 pdf 报告和 excel 表报告的链接不起作用（即使我点击链接 pdf 也不会出现。它的行为就像一个死链接！）

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:30:46.513

要下载 pdf，请尝试以下操作：

1）创建一个按钮来调用`printTapped()`方法（UIBarButtonItem在这里很好）

**printTapped()**

```
- (void)printTapped 
{  

    NSData *pdfdata = [[NSData alloc] initWithContentsOfURL:@"try your url from where you want to download the pdf"];

    //Store the Data locally as PDF File

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
    NSString *docsDirectory = [paths objectAtIndex:0];

    NSString *filePath = [docsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.pdf",app.stritreejob]];

      //=======//
} 
```

# bash - 查找调用 bash 脚本的桌面快捷方式的位置

> ID：10309955
> 
> 赞同：3
> 
> 时间：2012-04-25T05:44:11.073
> 
> 标签：bash, shortcut, freedesktop.org

我有一个桌面快捷方式，例如`/home/user/Desktop/myfolder/link.desktop`它调用`bash`位于其他地方的脚本，例如`/tmp/myscript.sh`

在我的脚本中，如何找到调用我的脚本的快捷方式的路径？有可能吗？

我真正想要实现的是快捷链接所在的子文件夹，例如`/home/user/Desktop/myfolder/subfolder`. 在我的脚本中，我希望能够访问子文件夹。

我已经尝试过，但无论快捷方式图标在哪里，`readlink -f`它都会返回。`/home/user`

我无法设置工作路径，因为快捷链接已生成并动态放置在不同位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:45:08.923

好吧，至少你可以在你的脚本中做这样的事情：

```
find / -iname '*desktop' -exec fgrep -l $0 \{\} \; 2>/dev/null 
```

这将遍历您的文件系统并在每个`.desktop`文件中搜索您的脚本...但是*请注意*，这可能会产生误导，因为有人可以在`.desktop`...中添加注释，因此您可以先创建一个搜索字符串`^Exec=/PATH/TO/$0`，然后使用`egrep`而不是`fgrep`.

或者您可以执行复制功能，在将`.desktop`文件复制到其位置并将其新位置作为参数添加到该`Exec`行时编辑文件，例如：

```
mycp() {
    sed "s/^Exec=.*/& $2/" $1 > $2 
} 
```

或者（我会同意）[根据规范](http://standards.freedesktop.org/desktop-entry-spec/latest/ar01s06.html)`%k`使用你的`Exec`行中的参数。

# python - 在python中为控制器进程创建Web界面

> ID：10309956
> 
> 赞同：0
> 
> 时间：2012-04-25T05:44:28.110
> 
> 标签：python, scheduling, pyramid

我有一个需要每隔一段时间运行的多阶段过程。我还有一个控制器程序，它在正确的时间启动流程，将流程的各个阶段链接在一起，并检查每个阶段是否正确执行。控制器访问一个数据库，该数据库存储有关流程过去运行的信息、流程未来执行的参数等。

现在，我想使用 Pyramid 为 Controller 构建一个 Web 界面，以便我可以查看有关进程的信息并影响 Controller 的运行。这意味着 Web 界面中的操作必须影响控制器数据库中的更改。自然，Web 界面将使用与控制器完全相同的数据模型。

控制器和 Web 服务器交互的最佳方式是什么？我考虑了两种可能性：

*   通过在 Pyramid 的初始化例程中调用 sched 来组合控制器和 Web 服务器
*   让 Web 服务器向控制器发送 RPC，例如使用 Pyro。

我应该如何在这里进行？以及在使用第二个选项时如何避免（数据模型的）代码重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:21:10.573

我会避免在与 Web 应用程序相同的进程中运行您的控制器 - 例如，以较低的权限运行 Web 应用程序是一种常见的做法；在一些多线程/多进程环境中，它可能会产生多个工作人员，然后可能会在感觉这样做时杀死/回收它们。因此，让您的控制器在具有某种 RPC 机制的单独进程中运行似乎是一个更好的主意。

关于代码重复 - 有 2 个选项：

*   您可以将公共代码（模型）提取到两个应用程序都使用的单独模块/鸡蛋中

*   如果您发现需要共享大量代码 - 没有什么会强迫您为这些应用程序拥有单独的项目。您可以拥有一个带有两个或多个“入口点”的代码库——其中一个将启动 Pyramid WSGI 应用程序，另一个将启动您的 Controller 进程。

# sencha-touch-2 - Sencha touch 2中如何刷新DataView的数据渲染

> ID：10309964
> 
> 赞同：1
> 
> 时间：2012-04-25T05:45:00.057
> 
> 标签：sencha-touch-2

我以轮播形式添加了一个数据视图，它显示为一个列表。然后我删除了数据视图的几个项目，但轮播视图中的列表没有改变。我应该怎么做才能刷新视图？

我尝试了几种方法，例如'remove（）'，'removeAll（）'，'destroy（）'，'refresh（）'，但它没有效果。

模型：

```
Ext.define('Chihiro.model.User', {
extend: 'Ext.data.Model',
config: {
    fields: [ 'id', 'name', 'nickname', 'signiture', 'gender', 'birthday', 'school', 'job', 'portrait', 'interests', 'dis'],
    proxy: {
        type: 'localstorage',
        id: 'friends'
    },
    autoLoad: true
}
}); 
```

数据视图：

```
Ext.define('Chihiro.view.userlist.List', {
extend: 'Ext.DataView',
xtype: 'userlist',

store: {
    model: 'Chihiro.model.User'
},
config: {
    ui:'loans',
    useComponents: true,
    defaultType: 'listitem',
    emptyText: '<div style="margin-top: 20px; text-align: center">没有找到任何人哦</div>',
    deselectOnContainerClick: false
}
}); 
```

控制板：

```
Ext.define('Chihiro.view.contact.List', {
extend: 'Ext.Carousel',

xtype: 'contactpanel',
id: 'contactnavigationview',

layout: 'vbox',
config: {
    fullscreen: true,
    //autoDestroy: false,
    scrollable: true,
    //defaultBackButtonText: '返回',
    items: [
        {
            xtype: 'titlebar',
            docked: 'top',
            title: '好友'
        }
    ]
}
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:54:35.593

您将需要重新加载商店以刷新数据视图。

`remove()`, `removeAll()`,`destroy()`和之类的方法`refresh()`肯定不会有任何效果。

当您更改商店内的项目时，您需要`load()`在数据存储上调用方法。这将实质上刷新您的数据视图。

```
yourStoreForDataView.load(); 
```

有用的帖子：[**煎茶触摸：刷新列表：商店**](https://stackoverflow.com/questions/6112237/sencha-touch-refresh-list-store)

# android - Phonegap ChildBrowser 问题

> ID：10309965
> 
> 赞同：2
> 
> 时间：2012-04-25T05:45:06.983
> 
> 标签：android, iphone, blackberry, cordova, childbrowser

我正在创建一个移动应用程序，它使用 childbrowser 连接到一些基于 jive 的社区。我可以轻松打开社区、登录和做事。

但我还需要在我的应用程序中获取会话详细信息，以便我可以使用这些来获取 JSON 字符串，以在我的应用程序上显示用户图像/信息，以显示该用户已登录。

我尝试在 childbrowser 上工作，但无法进行太多调查。它似乎不适用于我的社区 URL。使用 google url 时，它会显示位置更改的弹出窗口，但不适用于我的 url。

任何人都可以帮助我获取我想要的数据吗？

这是我用来检测位置变化的示例代码：

```
 function openURL() {
          window.plugins.childBrowser.onLocationChange= function(loc){ 
             alert('In index.html new loc = ' + loc);
          };
  window.plugins.childBrowser.showWebPage("https://communityName.jive-mobile.com/#jive-login", { showLocationBar: false });       
  } 
```

我正在获取我的登录页面，但登录后我看不到任何警报！我需要获取用户登录证明和用户会话详细信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:32:37.863

我刚刚更新了 ChildBrowser 插件供我自己使用，下面给出了这里的代码：[如何从 WebView 获取网页内容？](https://stackoverflow.com/questions/2376471/how-do-i-get-the-web-page-contents-from-a-webview#8623129)

我正在使用它登录 Google API oAuth2，查看要加载的正确页面。我正在使用具有（计算的）html 源的 onPageLoaded(html) 事件。您可能希望使用它来获取已加载的 html 并检查“stuff”。我不使用 jive，所以我不知道从哪里开始，但我会提供一个示例 Google oAuth2 项目供您尝试。

高温高压

编辑：

代码位于：[https ://code.google.com/p/filechunkreader/](https://code.google.com/p/filechunkreader/)

不要让自己被名字所迷惑，这个项目是我的 Java 插件实验的仓库。到目前为止，它包含 2 个插件，FileChunkReader 和一个自定义版本的 ChildBrowser。

# php - 将全角字符更改为半角

> ID：10309967
> 
> 赞同：3
> 
> 时间：2012-04-25T05:45:25.277
> 
> 标签：php, javascript

```
"合同会社Ｋｎｏｗｌｅｄｇｅ　Ｌｉｂｒａｒｙ" => "合同会社Knowledge Library" 
```

我只想使用 java 脚本或 php 将字符串中的字母数字字符转换为单字节

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T06:52:22.340

在 PHP 中，用于[`mb_convert_kana`](http://php.net/mb_convert_kana)将“zen-kaku”转换为“han-kaku”。

# bash - sed 搜索和替换包含 / 的字符串

> ID：10309968
> 
> 赞同：29
> 
> 时间：2012-04-25T05:45:26.453
> 
> 标签：bash, sed

我无法弄清楚如何使用`sed`来搜索和替换`/`文本文件中包含该字符的字符串`/etc/myconfig`。

例如，在我现有的文本文件中，我有：

```
myparam /path/to/a argB=/path/to/B xo 
```

我希望将其替换为：

```
myparam /path/to/c argB=/path/to/D xo 
```

我尝试在 bash 中这样做：

```
line='myparam /path/to/a argB=/path/to/B xo'
line_new='myparam /path/to/c argB=/path/to/D xo'
sed -i 's/$line/$line_new/g' /etc/myconfig 
```

但什么也没有发生。

尝试

```
grep -rn "$line" /etc/myconfig 
```

不过确实返回了我`'myparam /path/to/a argB=/path/to/B xo'`。

表达我的`sed`命令以执行此搜索和替换并正确处理命令的正确方法是什么`/`？（我认为`/`我的字符串中的字符是给我带来问题的字符，因为我使用类似的`sed`命令来搜索和替换文本文件中的另一行没有问题，并且该行没有`/`字符。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-25T05:52:13.747

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-25T05:56:39.947

This might work for you:

```
sed -i "s|$line|$line_new|g" /etc/myconfig 
```

You must use `"`'s so that the `$line` and `$new_line` are interpolated. Also use `|` or any character not found in the match or replacement strings as a delimiter.

# actionscript-3 - 在 as3 中实例化文档类

> ID：10309971
> 
> 赞同：1
> 
> 时间：2012-04-25T05:45:43.973
> 
> 标签：actionscript-3

您好需要在 as3 中实例化文档类。我有一个将加载 load.swf 的主要电影。load.swf 的文档类是 LoadedMovie。我使用此代码：

```
public function Main()
    {
        var url:URLRequest = new URLRequest("load.swf");
        loader=new Loader();
        loader.contentLoaderInfo.addEventListener(Event.COMPLETE, finishLoading);
        loader.load(url);
    }
    function finishLoading(e:Event)
    {
        var sn:LoadedMovie=new LoadedMovie();
        addChild(sn);

    } 
```

它添加了电影剪辑，但我的框架脚本不起作用。我停在最后一帧。有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:09:28.597

一旦加载，加载器将包含您加载的 swf 文档类的实例。只需 addChild 加载程序，您就可以开展业务了。

```
var url:URLRequest = new URLRequest("load.swf");
loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, finishLoading);
loader.load(url);
addChild(loader); 
```

从加载的 swf 实例化稍微复杂一些，您必须处理应用程序域等。

# java - 我可以用 Java 动态生成 xsd 吗？

> ID：10309981
> 
> 赞同：0
> 
> 时间：2012-04-25T05:46:00.590
> 
> 标签：java, dynamic, xsd, runtime

我想从用户那里获取变量名称及其类型，并在运行时根据此信息生成 xsd。

我找不到任何方法来做到这一点。你知道一些吗？

您的帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:54:41.497

您可以尝试使用[Castor](http://castor.org/xml-framework.html)。您可以从 XML 生成 XSD。您需要生成一个 XML，然后使用类[XMLInstance2Schema](http://www.castor.org/javadoc/org/exolab/castor/xml/schema/util/XMLInstance2Schema.html)将其转换为带有此框架的 XSD 。

# windows-phone-7 - 如何在 Windows Phone 7 中处理嵌套的 Rx Web 请求调用

> ID：10309984
> 
> 赞同：1
> 
> 时间：2012-04-25T05:46:16.580
> 
> 标签：windows-phone-7, windows-phone-7.1, system.reactive

在我的应用程序中，我使用网络请求调用链从网络获取数据。即根据一个请求的结果，我将发送其他请求，依此类推。但是当我处理 Web 请求时，只有父请求正在处理。另外两个请求仍在运行。我如何在 Rx 中取消所有这些请求

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:38:08.860

为了使您的订阅终止所有内容，您要么不能破坏 monad，要么需要确保您在`IDisposable`模型中工作。

要保留 monad（即坚持使用 IObservables）：

```
var subscription = initialRequest.GetObservableResponse()
    .SelectMany(initialResponse =>
    {
        // Feel free to use ForkJoin or Zip (intead of Merge) to 
        // end up with a single value
        return secondRequest.GetObservableResponse()
            .Merge(thirdRequest.GetObservableResponse());
    })
    .Subscribe(subsequentResponses => { }); 
```

要使用`IDisposable`模型：

```
var subscription = initialRequest.GetObservableResponse()
    .SelectMany(initialResponse =>
    {
        return Observable.CreateWithDisposable(observer =>
        {
            var secondSubscription = new SerialDisposable();
            var thirdSubscription = new SerialDisposable();

            secondSubscription.Disposable = secondRequest.GetObservableResponse()
                .Subscribe(secondResponse =>
                {
                    // Be careful of race conditions here!

                    observer.OnNext(value);
                    observer.OnComplete();
                });

            thirdSubscription.Disposable = thirdRequest.GetObservableResponse()
                .Subscribe(thirdResponse =>
                {
                    // Be careful of race conditions here!
                });

            return new CompositeDisposable(secondSubscription, thirdSubscription);
        });
    })
    .Subscribe(subsequentResponses => { }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:09:13.053

一种方法是使用 TakeUntil extnsion 方法，如此处[所述](https://stackoverflow.com/questions/9990882/how-to-cancel-rx-based-web-request-in-windows-phone-7/9991251#9991251)。在您的情况下，将此方法作为参数的事件可能是父请求引发的某个事件。

如果您可以向我们展示一些代码，我们可以更具体地解决问题。

问候，

# visual-studio-2010 - 引导程序包未显示在先决条件菜单中

> ID：10309990
> 
> 赞同：0
> 
> 时间：2012-04-25T05:46:38.623
> 
> 标签：visual-studio-2010, crystal-reports, clickonce, bootstrapping

我正在尝试创建一个引导程序包以将 Crystal Reports 2011 添加到我的应用程序中。我已经确定位置应该是 c:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper。我在包文件夹中添加了包，但它没有显示在先决条件菜单中。我已经尝试重新启动，但它仍然没有出现。我使用了从 SAP 下载的名为 CRforVS_clickonce_13_0_3 的包。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:04:10.093

您应该在安装包中捆绑 Crystal Reports 2011 的合并模块。如果您包含合并模块，它们将简单地捆绑到一个安装中。

（听起来似乎没有特定的原因来引导多个 MSI 包。合并模块是一种简单可靠的运行时部署方法。）

# iphone - 将 UITextView 添加到自定义 tableViewCell = Crash

> ID：10309991
> 
> 赞同：0
> 
> 时间：2012-04-25T05:46:39.020
> 
> 标签：iphone, objective-c, xcode

我有一个自定义表格视图单元格，其中包含一些对象 UIImageView、UILabel 和一个 UITextView。除了 UITextView 之外的所有对象都可以正常工作，但是当我尝试更改 textView 上的文本时：

```
 myTextView.text = @"Some string"; 
```

应用程序因此错误而崩溃：

```
Tried to obtain the web lock from a thread other than the main thread or the web thread. This may be a result of calling to UIKit from a secondary thread. Crashing now... 
```

任何建议都非常感谢。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:58:19.320

该错误听起来像是您正在从未在主线程上执行的代码块中设置 text 属性。检查以确保您拥有的任何修改 UIKit 对象的代码都在主线程上执行此操作。下面的例子：

```
dispatch_async(dispatch_get_main_queue(), ^{
            // Set text here
            myTextView.text = @"Some string"; 
        }); 
```

# arrays - 将文件读入 d 中的行数组

> ID：10309993
> 
> 赞同：5
> 
> 时间：2012-04-25T05:46:52.110
> 
> 标签：arrays, file-io, d

将文本文件读入行数组的正确方法是什么？我在罗塞塔石碑上发现了以下内容：

```
string[] readLines(string filename) {
  auto f = File(filename);
  scope(exit) f.close();
  string[] lines;

  foreach (str; f.byLine) {
    lines ~= str.idup;
  }

  return lines;
} 
```

但它看起来像每行调整一个数组大小，这是非常低效的。我可以通过标准的加倍方法跟踪读取的行数并调整数组的大小

```
 int i = 0;
  foreach (str; f.byLine) {
    if (lines.length <= i + 1) {
      lines.length = lines.length * 2 + 1;
    }
    lines[i] = str.idup;
    i++;
  }
  lines.length = i; 
```

但这已经足够样板代码了，我不得不怀疑我是否只是忽略了标准库中已经为我做这件事的东西。

* * *

**编辑：**给 fwend 的评论更多的可见性：[这篇文章](http://dlang.org/d-array-article.html)详细描述了数组分配器是如何工作的，以及为什么运行时可以有效地处理追加

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T05:51:07.300

实际上，只要空间不足，D 就会将数组的保留空间加倍，因此您无需手动操作。[这里](http://dlang.org/arrays.html)有很多关于D的数组的信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T09:53:41.350

最初您可能会得到很多重新分配，但随着数组的增长，它的容量应该会增长，这样它就不太可能通过进一步的附加来分配。您可以打印出数组的`capacity`属性以查看它是如何增长的。

但是，如果您特别担心附加性能，那么您可能应该使用[`std.array.Appender`](http://www.dlang.org/phobos/std_array.html#Appender)，在这种情况下，您的代码将如下所示：

```
string[] readLines(string filename)
{
    auto file = File(filename);
    auto lines = appender!(string[]);

    foreach(line; file.byLine())
        lines.put(to!string(line));

    return lines.data;
} 
```

`Appender`旨在使附加更有效，并将利用它可以使附加比`~=`本身更有效的任何技巧。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T21:48:39.023

也许是这样：

```
import std.algorithm;
import std.array;
import std.file;

string[] readLines(string input)
{
    Appender!(string[]) result;
    foreach (line; input.splitter("\n"))
        result.put(line);
    return result.data;
}

void main()
{
    string input = cast(string)std.file.read("test.d");
    string[] lines = readLines(input);
} 
```

它应该足够快，因为结果只是创建预加载输入字符串的切片而不分配新数组（除了切片本身的分配，IOW 指针+长度字段）。