# StackOverflow 问答 000816000-000816999

# c++ - 从 C++ 中的字符串中删除非整数

> ID：816001
> 
> 赞同：2
> 
> 时间：2009-05-03T00:35:16.470
> 
> 标签：c++, casting, variable-assignment

在我的一本书中有一条关于人们将逗号输入整数并弄乱你的程序的评论，但它没有详细说明。这让我开始思考，所以我尝试编写一个小算法来获取 std::string 并删除所有非整数字符。此代码编译但跳过输出。为什么没有任何东西被分配给newstring？if(isdigit(fstring[i])) 是否将其指向的地址评估为真以保存数字？

```
//little algorithm to take the non-integers out of a string
//no idea on efficiency

#include <iostream>
#include <string>

int main()
{
    std::cout << "Enter a number with non-integer characters: ";

    std::string fstring; 
    getline(std::cin, fstring);

    std::string newstring;

    int i = 0, x = 0;

    while (i != fstring.length())
    {
        if (isdigit(fstring[i]))
        {
            newstring[x] = fstring[i];
            i++;
            x++;
        }
        else
        {
           i++;
        }
    }

    std::cout << std::endl;
    std::cout << newstring;
    system("PAUSE");
} 
```

第二个问题，可能属于其他地方：如何将字符串转换为 int（或浮点数）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T00:40:00.187

newstring 的长度为 0，因此 x=0 的 newstring[x] 实际上是非法的。您应该使用以下命令附加到字符串： newstring.append(1, fstring[i])

对于第二个问题，查找 atoi()、atof()、strtol(0、strtof() 函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-03T01:22:41.597

字符串类似于数组，但字符串的默认构造函数会创建一个空字符串。为什么它应该分配比它需要的更多的内存？即使是这样，也没有说有多少，或者它是否足以容纳 fstring 的过滤副本。我印象深刻，它不会崩溃。

一个简单的修改是改变：

```
std::string newstring; 
```

到：

```
 std::string newstring(fstring.length(), '\0') 
```

在循环之后添加：

```
 newstring.resize(x); 
```

这将确保`newstring`在过滤期间至少有足够的空间（可能更多），并且在完成过滤后将被修剪到适当的大小。您可能还对 中的[`std::remove_copy_if`](http://www.sgi.com/tech/stl/remove_copy_if.html)功能感兴趣`<algorithm>`。

例如

```
struct isnotdigit { bool operator()(char c) { return !isdigit(c); } };

std::string newstring(fstring.length(), '\0');
std::string::iterator i = std::remove_copy_if(fstring.begin(), 
  fstring.end(), newstring.begin(), isnotdigit());
newstring.erase(i, newstring.end()); 
```

至于将字符串转换为整数/浮点数，除了已经提到的`atoi`, `strtol`, `atof`,`strtof`等函数之外，您还可以使用 iostream 库：

```
 #include <sstream>
 std::string integer("23");
 std::istringstream iss(integer);
 int result;
 iss >> result;

 std::string floatingpoint("3.14");
 std::istringstream iss2(floatingpoint);
 double result2;
 iss2 >> result2; 
```

此外，如果您熟悉您可能感兴趣的 printf 系列函数`scanf`，`sscanf`

```
 const char *s = "23";
 int result;
 sscanf(s, "%d", &result); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-03T11:34:23.530

扩展成业的回答：

要删除非数字：

```
#include <iostream>
#include <functional>
#include <string>
#include <algorithm>

using namespace std;

int main() {
    string fstring;
    getline(cin, fstring);
    fstring.erase(
        remove_if(fstring.begin(), fstring.end(),
            not1(ptr_fun(static_cast<int(*)(int)>(isdigit)))
        ),
        fstring.end()
    );

    cout << fstring << "\n";
} 
```

不过，我不确定为什么需要 static_cast。我认为如果没有它，isdigit 就有些模棱两可了。[编辑：如果你不做“使用命名空间标准”，那么你就不需要它，所以懒惰写示例代码是我的错。]

这是否比滚动你自己的循环更简单是有争议的：

```
#include <iostream>
#include <string>

using namespace std;

int main() {
    string fstring, ins;
    getline(cin, ins);
    for (string::iterator it = ins.begin(); it != ins.end(); ++it) {
        if (isdigit(*it)) fstring.push_back(*it);
    }
    cout << fstring << "\n";
} 
```

而 C++0x 会有 copy_if，基本上是偶然遗漏的，实现起来也很简单：

```
#include <iostream>
#include <string>
#include <algorithm>
#include <iterator>

int main() {
    std::string fstring, ins;
    std::getline(std::cin, ins);
    std::copy_if(ins.begin(), ins.end(), 
        std::back_inserter(fstring), isdigit);
    std::cout << fstring << "\n";
} 
```

转换为 int（或 float）：

```
int i = boost::lexical_cast<int>(fstring); 
```

或者如果你没有提升：

```
#include <sstream>

int i = 0;
std::stringstream(fstring) >> i; 
```

请注意，您必须初始化 i，否则如果 fstring 为空，则不会设置它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T04:05:52.703

要删除数字：

```
fstring.erase(
      std::remove_if(fstring.begin(), fstring.end(), &isdigit), 
      fstring.end()); 
```

要将字符串转换为 int/float/...：

```
int n1 = boost::lexical_cast<int>("123");
float n2 = boost::lexical_cast<float>("123.456"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T01:13:22.133

*   字符串转浮点数：

你需要`#include <cstdlib>`

```
float strtof(const char *nptr, char **endptr); 
```

例如：

```
 float f = strtof("3.4",NULL); 
```

*   字符串转整数

你需要`#include <cstdlib>`

```
int atoi(const char *numPtr); 
```

请注意，这些是 C 函数，而不是 C++，因此您需要在 std::string 上使用 c_str() 方法来获取 C 字符串。

```
const char* c_str ( ) const; 
```

# apache-flex - Flex：从类访问 MXML

> ID：816006
> 
> 赞同：0
> 
> 时间：2009-05-03T00:38:35.213
> 
> 标签：apache-flex, class, mxml, privacy

我有一个在创建完成时实例化的类：

```
public var catalog : AppCollection = new AppCollection (catalogStrip); 
```

CatalogStrip 是一个 HBox。

在这个类中，我创建了一个 VBox 并将其作为子项添加到 catalogStrip。这是所述类的构造函数：

```
public function AppCollection (_container : HBox) {
    this.container = _container;
} 
```

这是我遇到问题的代码：

```
public function populate (e : ResultEvent) : void {
    var appImage : Image = new Image ();
    var appText : Text = new Text ();
    var appContainer : VBox = new VBox ();

    appImage.source = "./res/Halo.png";
    appImage.width = 70;
    appImage.height = 70;

    appText.text = "Halo 4";

    appContainer.width = 110;
    appContainer.height = 125;
    appContainer.addChild (appImage);
    appContainer.addChild (appText);

    tbox = appContainer;

    this.container.addChild (appContainer);
} 
```

在最后一行，它说 this.container 为空。不可能的！我在构造函数中添加了它！此外，我还尝试实例化 main.mxml 并从那里访问容器。当我从 main.mxml 中的脚本标记尝试相同的代码时，它可以工作，但这首先扼杀了将类放在那里的全部意义。如何从外部类访问 MXML 标记？我有我所有的进口和一切......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T02:07:32.770

```
public var catalog : AppCollection = new AppCollection (catalogStrip); 
```

是否在 main.mxml 的脚本部分中？如果是这样，这就是您获得空对象的原因。你需要有一个方法：

```
public var catalog : AppCollection;

private function handleCreationComplete():void
{
    this.catalog = new AppCollection(catalogStrip);
} 
```

# emacs - 无法在配置文件和手册之间快速移动

> ID：816007
> 
> 赞同：0
> 
> 时间：2009-05-03T00:38:59.207
> 
> 标签：emacs, manuals, manpage

男士手册有以下内容

> 指定要使用的配置文件；默认为 **/private/etc/man.conf**。（参见 man.conf(5)。）

对于 man 中的 /private/etc/man.conf，PATH 以粗体显示。它建议我它可能是文件的超链接。有一个类似 Emacs 的人在里面移动会很酷。

我没有成功直接从手册中输入文件。

**如何**不在 man中执行以下操作，直接从 man 手册中获取文件？

```
Ctrl-Z
emacs /private/etc/man.conf 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T01:32:30.857

我不知道我理解你的问题。

您可以在 Emacs 中查看手册页：

```
M-x man man 
```

从出现的手册页中，路径上的点以粗体显示。

```
M-x find-file-at-point 
```

# php - 可以在循环中使用while循环吗？

> ID：816013
> 
> 赞同：0
> 
> 时间：2009-05-03T00:43:34.610
> 
> 标签：php, while-loop

我正在尝试做的是以下内容：我有一个值数组，这些值最终将用于生成一个随机的唯一字符串，但这要晚一点。首先我想遍历数组中的所有值（foreach 循环）然后我想限制这个（while 循环）这是一个正确的方法吗？

下面的代码不起作用，任何人都可以看到我做错了什么吗？

```
<?php 

    $array = array(
          '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', 
          'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 
          'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 
          'u', 'v', 'w', 'x', 'y', 'z', '!', '£', '$', '%',
          '^', '&', '*', '(', ')', '_', '+', '{', '}'
    );

    $length_of_unique_key = 15;
    $counter = 0;

    foreach($array as $values)
    {
          $counter++;

          while ($counter <= $length_of_unique_key)
          {

          }
    }

?> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-03T00:46:13.010

你不应该在`while`循环中增加你的计数器，所以它可以退出吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-03T01:29:07.353

查看循环（或任何其他控制结构）出了什么问题的最好方法就是遍历它。有时您可以在脑海中做到这一点；在其他时候，将跟踪点插入代码可能会有所帮助。

在这种情况下，我认为如果您只是简单地在脑海中运行代码，您将能够发现它有什么问题。但出于教学目的，我将在这里进行介绍。首先让我们给每一行代码编号：

```
$array = array(...);               // line 1
$length = 15;                      // line 2
$counter = 0;                      // line 3
foreach($array as $values)         // line 4
{
      $counter++;                  // line 5
      while ($counter <= $length)  // line 6
      {
                                   // line 7
      }                            // line 8
                                   // line 9
}                                  // line 10 
```

现在让我们来看看它：

1.  `$array`被分配一个一维数组：
    `array(0 => '1', 1 => '2', 2 => '3', ...)`
2.  `$length`设置为**15**。
3.  `$counter`是设置**0**。
4.  开始`for loop`；`$values`= `$array[0]`= **'1'**。
5.  `$counter`递增。`$counter`= **1**。
6.  开始`while loop`；检查`$counter`( **1** ) <= `$length`( **15** )。
7.  没做什么。
8.  回到第 6 行。
9.  第 6 行：如果`$counter`( **1** ) <= `$length`( **15** )，继续循环。
10.  第 7 行：什么都不做。
11.  第 8 行：回到第 6 行。
12.  第 6 行：`$counter`( **1** ) 仍然 <= `$length`( **15** )，再次进入循环。
13.  第 7 行：什么都不做。
14.  第 8 行：回到第 6 行。

如您所见，您陷入了无限循环，因为既不改变`$counter`也不`$length`改变值。所以第`while`6 行中的条件总是计算为**真**（1 <= 15）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T00:46:36.333

为什么不做类似下面的代码，它会生成一个循环的密钥。见鬼，为什么不做一个生成密钥的函数呢？

```
function keyval($length)
{
    $length_of_unique_key = $length;
    $array = array(
          '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', 
          'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 
          'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 
          'u', 'v', 'w', 'x', 'y', 'z', '!', '£', '$', '%',
          '^', '&', '*', '(', ')', '_', '+', '{', '}'
    );
    for($i=0;$i<$length_of_unique_key;$i++)
    {
        $key.=$array[rand(0,sizeof($array)-1)];
    }
    return $key;
}

echo keyval(15); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T00:46:49.437

您发布的所有代码都是合法的，但显然您遗漏了一些内容，这将有助于回答这个问题......否则，您的 $counter 在 while 循环期间保持不变，它永远不会退出

# oop - 没有依赖注入的对象组合是一件坏事吗？

> ID：816018
> 
> 赞同：3
> 
> 时间：2009-05-03T00:46:44.383
> 
> 标签：oop, inversion-of-control

据我了解，当对与另一个对象具有组合关系（“具有”关系）的对象进行单元测试时，如果您使用某种依赖注入，则只能真正模拟组合对象。因此，以下类型的代码使单元测试变得非常困难，因此可能被认为是一件坏事：

```
<?php
class aSampleClass {
    private $dependency;
    public function __construct() {
        $this->dependency = new otherClass;
    }
} 
```

通过将对象的实例作为参数传递给构造函数，这个玩具示例很容易转换为使用依赖注入`otherClass`，但情况并非总是如此。上述形式的对象组合（在类实现中直接使用“new”运算符）是一件坏事吗？您是否应该始终尝试编写一个类，以便可以在隔离其关联的情况下对其进行全面测试？

当您使用简单的值对象（用域驱动设计的说法）时，使用依赖注入对我来说似乎搁浅了，例如日期或金钱对象。在这些情况下，直接实例化有问题的 Value 对象似乎是有意义的。例如：

```
<?php
    class anotherSampleClass {
        public function getTimeDifferencePhrase() {
            $now = new date_Time;
            $then = new date_Time(time()-60*60*24);
            return $now->relativeTimePhrase($then);
        }
    } 
```

当然，在这个例子中，单元测试更有意义的是`anotherSampleClass`也练习`date_Time`对象的实现，而不是尝试使用模拟对象或测试替身。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T01:12:19.250

这取决于*您*要测试的内容。依赖注入解决了测试你的类的问题，而不必担心它对外部服务的依赖（可能会失败，没有测试数据，或者不适合单元测试）。

您不会模拟一个值对象（或字符串、int 等），只是为了测试您的类是否正确构造了它并调用了差异运算符……这都是实现的一部分，与测试它并不真正相关.

但是，您将测试您`getRelativeTimeDifferencePhrase`在通过时是否正确返回“24 小时前” `60 * 60 * 24 seconds`。

然后你会意识到你的硬编码`time()`会导致一个脆弱的测试——因为你无法足够准确地预测`time()`你的代码运行时会返回什么。这将导致一个`RealTimeService`，这将引入一个您可以控制的接缝。

让您的类实例化 a`RealTimeService`将使您无法注入您的`MockTimeService`- 以便您可以硬编码`time()`它是什么，因此您最终会将 a 传递`ITimeService`给您的构造函数。现在，你有了依赖注入。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-19T12:37:32.610

依赖注入确实解决了很多问题。但是，许多人没有看到它是聚合而不是组合。在您实例化**otherClass**的示例中，您有一个组合。因此，通过引入依赖注入，您实际上打破了组合和得墨忒耳定律并引入了聚合。

我认为只要不破坏架构，依赖注入就很棒。很多人说在构造函数中使用new操作符不好，应该将实例传递给构造函数，但他们错了。它应该取决于域。在某些情况下，它甚至可能导致混乱，尤其是在没有垃圾收集的语言中。例如，C++ 中的经验法则是创建者销毁一个对象。那么如果有电池的手机被毁坏了，谁来毁掉电池呢？电话或任何将其传递给电话的对象？但在某些情况下，您可能希望将电池传递到手机中。例如，如果您正在为工厂建模。

所以，回答你的问题“没有依赖注入的对象组合是一件坏事吗？” - 这取决于您正在建模的领域，牺牲设计而不是可测试性是IMO的一件坏事。如果你发现一些不可测试的东西，那么看看你的设计是否正确。我通常会看看是否可以引入依赖注入。如果这是不可能的，那么我看看我是否可以引入工厂方法。如果没有，那么我会看看我是否可以做其他事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T00:56:03.410

在这些情况下，没有一个明确的规则应该遵循。依赖注入通常是一件好事，但并不总是必要的。这是关于分析你的类并找出谁应该真正负责创建依赖项。

如果您正在使用非常简单的对象，这些对象在语义上属于您的类并且您的类对它们完全负责，那么依赖注入可能会过度设计。你真的不需要测试 date_Time，所以我不会费心注入那个特定的依赖项。

要考虑的另一件事是在构造函数中构建该依赖项是否会使您的类无法测试。例如，它发生在使用随机数生成器的类中。在这种情况下，如果你不使用依赖注入，那么真的没有办法注入一个生成器，它可以为你提供一组可预测的适合测试的数字。

所以，简短的回答：这通常是一件好事，但并不总是必要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T00:57:18.210

对于这样的事情没有硬性规定。一些纯粹主义者会说你应该注入依赖，而其他人会选择更务实的方法。由于 VO 本身没有任何依赖关系，我可能会调用 KISS 原则并说在对象中“新建”它是完全可以的。尤其如此，VO 驻留在同一个模块中（在 DDD 术语中）。此外，在对象中实例化 VO 并不会降低其可测试性。

# java - Java 中的高级 GUI 可能吗？

> ID：816020
> 
> 赞同：9
> 
> 时间：2009-05-03T00:48:18.187
> 
> 标签：java, user-interface

也许是一个哲学问题。我最近在 GUI 中看到了一些有趣的视觉效果，主要是在原生平台 API 上。我知道“它只是软件”，而且很可能，只要有足够的工作，任何事情都可以用像素来完成。问题是（终于！），Java 真的是用 GUI 做花哨的事情的一种选择吗？我想这似乎是一件愚蠢的事情，但我有点喜欢 Windows Presentation Foundation 的一些工作。我没有看到像 Java 这样的综合努力。我应该去哪里看？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-03T00:52:02.747

看看[JavaFX](http://javafx.com/)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-03T00:53:17.003

Java 的 GUI 前端已经有了一些进步。

例如，从 Java 6 Update 10 开始，可以在 Java 中制作透明和形状的窗口（即媒体播放器中常见的任意形状的窗口）：

[如何创建半透明和异形窗口](http://java.sun.com/developer/technicalArticles/GUI/translucent_shaped_windows/)

[Filthy Rich Clients: Developing Animated and Graphical Effects for Desktop Java Applications](https://rads.stackoverflow.com/amzn/click/com/0132413930) by Chet Haase 和 Romain Guy 是一本很好的书，里面包含了在 Swing 中制作高级 GUI 的技巧。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-03T00:53:17.020

如果您喜欢强大的 GUI 并且不介意它不完全是 Java-y，那么显然可以查看[Standard Widget Toolkit](http://www.eclipse.org/swt/)（eclipse 背后的窗口工具集）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-03T03:01:01.347

[Filthy Rich Clients](http://filthyrichclients.org/)一书涵盖了 Swing 和 Java2d 中的许多高级渲染和动画技术。[如果JavaFX](http://javafx.com/)不是一个选项，可能值得一看。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-03T00:54:00.527

'Consolidated' 和 'Java' 通常不会一起使用，但除此之外还有[Pivot](https://pivot.dev.java.net/)、[Thinlet](http://www.thinlet.com/)、[Swing](http://www.javaswing.net/)和[SWT](http://www.eclipse.org/swt/) .. 等等。所以我认为答案是：是的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-03T02:12:15.067

Java（在某些平台上）的唯一限制是 JVM 和主机 OS ui 框架之间的无缝集成（想想拖放等）。

除此之外，您认为 Java 无法处理的事情是什么？

[https://appframework.dev.java.net/](https://appframework.dev.java.net/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-03T03:00:38.163

在用 Java 完成了主要的 Swing 开发之后，我会说，如果你想要的只是 Windows，我会非常努力地思考 Java 比 .NET 给你带来的哪些优势，以使它值得一试。是的，最终你可以完成它。有一些很棒的软件表明它可以做到。这不简单。完全没有。

但是，如果您想做 Windows GUI 开发，那么 Java 最终会成为您的障碍。想要与 Windows 服务交互（例如桌面搜索，只是举个例子）？很难做到。

另一方面，如果您需要您的软件独立于平台，那就完全不同了。

JavaFX 很有前途，但它很新。无论如何，对于无聊的业务应用程序，许多您所期望的东西还没有出现。如果您正在编写游戏，那就有点不同了。

# wpf - 在 WPF 中制作日志窗口的建议

> ID：816022
> 
> 赞同：5
> 
> 时间：2009-05-03T00:49:14.907
> 
> 标签：wpf, richtextbox

我目前正在为我的应用程序开发一个日志窗口，它的外观和行为就像 Visual Studio 中的输出窗口一样。它每秒可以被数千条消息轰炸，并且需要处理非常大的日志（数十万行）。

到目前为止，我已经通过使用 a 快速制作了一个`RichTextBox`，并且效果很好。我使用了`RichTextBox`而不是a `TextBox`，因为我认为最终用颜色格式化错误消息可能会很好。

是`RichTextBox`一个好的选择还是有更好的选择？是否有任何其他建议可以遵循以使其尽可能高效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T05:55:04.423

将消息排队并让后台线程格式化它们。我还建议让窗口成为​​队列一部分的视图，这样窗口就不必填满。

# iphone - 如何在 UIButton 子类中覆盖 -drawrect？

> ID：816024
> 
> 赞同：12
> 
> 时间：2009-05-03T00:51:50.143
> 
> 标签：iphone, uibutton

你好。我需要在自定义按钮上写一些文本。所以我继承了 UIButton。在-drawrect中，我写我需要的文本。问题是文本最终位于按钮下方。在我写完我的文本后，UIButton 的 drawrect 会继续并在我的上方绘制。

我什至没有调用 [super drawrect: rect]，尽管我在绘制之前就已经预料到会调用它。似乎 UIButton 的 drawrect 无论如何都会被调用。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-03T09:40:48.110

正如其他人所说，您不需要继承 UIButton - 事实上最好不要，因为 UIButton 非常复杂（如您所见）。你有三个选择：

*   将按钮的标题留空，然后在按钮的所需位置添加一个新的文本字段。
*   如果您使用的是 3.0，请访问按钮的标签属性。虽然标签本身是只读的，但它的属性（包括框架）不是。
*   子类 UIControl。UIControl 是一个 UIView，因此您可以添加其他视图 - 文本和图像，并且 UIView 实现了操作消息行为 ( `addTarget:action:forControlEvents:`)。UIButton 在此之上实现了状态性。

如果您不需要 UIButton`setTitle:forState:`和相关功能之类的东西，但您使用了很多这样的控件，我会使用第三个选项。否则使用第一个（如果您使用的是 3.0，则使用第二个）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-02T11:08:47.483

这对我很有效......（忽略复杂的绘图代码）。

1.  创建 UIButton 的子类
2.  在 StoryBoard 中创建一个 UIButton
3.  转到 Identity Inspector 并输入您的自定义按钮类的名称

这是我的 UIButton 代码：

h 文件：

```
#import <UIKit/UIKit.h>

@interface DoneButton : UIButton

@property (assign, nonatomic) BOOL selected;

@end 
```

.m 文件：

```
 #import "DoneButton.h"

    @implementation DoneButton

    @synthesize selected = _selected;

    - (id)initWithFrame:(CGRect)frame
    {
        self = [super initWithFrame:frame];
        if (self) {
            // Initialization code
        }
        return self;
    }

    - (void)setSelected:(BOOL)selected
    {
        if (_selected != selected) {
            _selected = selected;
            [self setNeedsDisplay];
        }
    }

    - (void)drawRect:(CGRect)rect
    {
        // Drawing code

        if (_selected) {
            //// Color Declarations
            UIColor* color2 = [UIColor colorWithRed: 0 green: 0 blue: 0 alpha: 1];

            //// Bezier Drawing
            UIBezierPath* bezierPath = [UIBezierPath bezierPath];
            [bezierPath moveToPoint: CGPointMake(49.39, 31.25)];
            [bezierPath addLineToPoint: CGPointMake(49.39, 31.25)];
            [bezierPath addCurveToPoint: CGPointMake(46.64, 25.19) controlPoint1: CGPointMake(49.39, 29.02) controlPoint2: CGPointMake(48.38, 26.94)];
            [bezierPath addCurveToPoint: CGPointMake(44.3, 18.95) controlPoint1: CGPointMake(46.63, 22.72) controlPoint2: CGPointMake(45.88, 20.53)];
            [bezierPath addCurveToPoint: CGPointMake(42.44, 17.59) controlPoint1: CGPointMake(43.75, 18.4) controlPoint2: CGPointMake(43.13, 17.95)];
            [bezierPath addCurveToPoint: CGPointMake(38.07, 16.61) controlPoint1: CGPointMake(41.17, 16.93) controlPoint2: CGPointMake(39.67, 16.62)];
            [bezierPath addCurveToPoint: CGPointMake(33.15, 13.95) controlPoint1: CGPointMake(36.62, 15.18) controlPoint2: CGPointMake(34.95, 14.23)];
            [bezierPath addCurveToPoint: CGPointMake(32.78, 13.92) controlPoint1: CGPointMake(33.03, 13.93) controlPoint2: CGPointMake(32.9, 13.93)];
            [bezierPath addCurveToPoint: CGPointMake(32, 13.86) controlPoint1: CGPointMake(32.52, 13.89) controlPoint2: CGPointMake(32.26, 13.86)];
            [bezierPath addLineToPoint: CGPointMake(32, 13.86)];
            [bezierPath addLineToPoint: CGPointMake(32, 13.86)];
            [bezierPath addLineToPoint: CGPointMake(32, 13.86)];
            [bezierPath addLineToPoint: CGPointMake(32, 13.86)];
            [bezierPath addCurveToPoint: CGPointMake(31.38, 13.91) controlPoint1: CGPointMake(31.79, 13.86) controlPoint2: CGPointMake(31.59, 13.89)];
            [bezierPath addCurveToPoint: CGPointMake(30.85, 13.95) controlPoint1: CGPointMake(31.2, 13.92) controlPoint2: CGPointMake(31.02, 13.92)];
            [bezierPath addCurveToPoint: CGPointMake(26.92, 15.74) controlPoint1: CGPointMake(29.44, 14.17) controlPoint2: CGPointMake(28.12, 14.8)];
            [bezierPath addCurveToPoint: CGPointMake(25.94, 16.61) controlPoint1: CGPointMake(26.58, 16.01) controlPoint2: CGPointMake(26.25, 16.29)];
            [bezierPath addCurveToPoint: CGPointMake(24.13, 16.76) controlPoint1: CGPointMake(25.31, 16.61) controlPoint2: CGPointMake(24.71, 16.66)];
            [bezierPath addCurveToPoint: CGPointMake(19.7, 18.95) controlPoint1: CGPointMake(22.41, 17.06) controlPoint2: CGPointMake(20.88, 17.77)];
            [bezierPath addCurveToPoint: CGPointMake(17.36, 25.19) controlPoint1: CGPointMake(18.12, 20.53) controlPoint2: CGPointMake(17.37, 22.72)];
            [bezierPath addCurveToPoint: CGPointMake(14.61, 31.25) controlPoint1: CGPointMake(15.62, 26.94) controlPoint2: CGPointMake(14.61, 29.02)];
            [bezierPath addLineToPoint: CGPointMake(14.61, 31.25)];
            [bezierPath addCurveToPoint: CGPointMake(14.61, 31.25) controlPoint1: CGPointMake(14.61, 31.25) controlPoint2: CGPointMake(14.61, 31.25)];
            [bezierPath addCurveToPoint: CGPointMake(14.66, 31.92) controlPoint1: CGPointMake(14.61, 31.48) controlPoint2: CGPointMake(14.64, 31.7)];
            [bezierPath addCurveToPoint: CGPointMake(14.7, 32.4) controlPoint1: CGPointMake(14.67, 32.08) controlPoint2: CGPointMake(14.67, 32.24)];
            [bezierPath addCurveToPoint: CGPointMake(15.86, 35.44) controlPoint1: CGPointMake(14.86, 33.46) controlPoint2: CGPointMake(15.27, 34.48)];
            [bezierPath addCurveToPoint: CGPointMake(15.97, 35.64) controlPoint1: CGPointMake(15.9, 35.5) controlPoint2: CGPointMake(15.93, 35.57)];
            [bezierPath addCurveToPoint: CGPointMake(17.36, 37.32) controlPoint1: CGPointMake(16.36, 36.23) controlPoint2: CGPointMake(16.83, 36.78)];
            [bezierPath addCurveToPoint: CGPointMake(17.49, 38.98) controlPoint1: CGPointMake(17.36, 37.89) controlPoint2: CGPointMake(17.41, 38.44)];
            [bezierPath addCurveToPoint: CGPointMake(18.35, 41.7) controlPoint1: CGPointMake(17.65, 39.95) controlPoint2: CGPointMake(17.92, 40.87)];
            [bezierPath addCurveToPoint: CGPointMake(19.7, 43.55) controlPoint1: CGPointMake(18.7, 42.38) controlPoint2: CGPointMake(19.15, 43)];
            [bezierPath addCurveToPoint: CGPointMake(25.93, 45.89) controlPoint1: CGPointMake(21.28, 45.13) controlPoint2: CGPointMake(23.47, 45.88)];
            [bezierPath addCurveToPoint: CGPointMake(27.61, 47.28) controlPoint1: CGPointMake(26.47, 46.42) controlPoint2: CGPointMake(27.02, 46.89)];
            [bezierPath addCurveToPoint: CGPointMake(32, 48.64) controlPoint1: CGPointMake(28.96, 48.16) controlPoint2: CGPointMake(30.44, 48.64)];
            [bezierPath addLineToPoint: CGPointMake(32, 48.64)];
            [bezierPath addLineToPoint: CGPointMake(32, 48.64)];
            [bezierPath addLineToPoint: CGPointMake(32, 48.64)];
            [bezierPath addLineToPoint: CGPointMake(32, 48.64)];
            [bezierPath addCurveToPoint: CGPointMake(38.06, 45.89) controlPoint1: CGPointMake(34.23, 48.64) controlPoint2: CGPointMake(36.31, 47.63)];
            [bezierPath addCurveToPoint: CGPointMake(44.3, 43.55) controlPoint1: CGPointMake(40.53, 45.88) controlPoint2: CGPointMake(42.72, 45.13)];
            [bezierPath addLineToPoint: CGPointMake(44.3, 43.55)];
            [bezierPath addLineToPoint: CGPointMake(44.3, 43.55)];
            [bezierPath addCurveToPoint: CGPointMake(46.64, 37.31) controlPoint1: CGPointMake(45.88, 41.97) controlPoint2: CGPointMake(46.63, 39.78)];
            [bezierPath addCurveToPoint: CGPointMake(49.39, 31.25) controlPoint1: CGPointMake(48.38, 35.56) controlPoint2: CGPointMake(49.39, 33.48)];
            [bezierPath addLineToPoint: CGPointMake(49.39, 31.25)];
            [bezierPath closePath];
            [color2 setStroke];
            bezierPath.lineWidth = 1;
            [bezierPath stroke];

            //// Bezier 2 Drawing
            UIBezierPath* bezier2Path = [UIBezierPath bezierPath];
            [bezier2Path moveToPoint: CGPointMake(22.42, 29.85)];
            [bezier2Path addLineToPoint: CGPointMake(29.74, 37.17)];
            [bezier2Path addLineToPoint: CGPointMake(41.58, 25.33)];
            bezier2Path.usesEvenOddFillRule = YES;

            [color2 setStroke];
            bezier2Path.lineWidth = 1;
            [bezier2Path stroke];

        } else {

            //// Color Declarations
            UIColor* color3 = [UIColor colorWithRed: 0.5 green: 0.5 blue: 0.5 alpha: 1];

            //// Bezier 2 Drawing
            UIBezierPath* bezier2Path = [UIBezierPath bezierPath];
            [bezier2Path moveToPoint: CGPointMake(22.42, 29.85)];
            [bezier2Path addLineToPoint: CGPointMake(29.74, 37.17)];
            [bezier2Path addLineToPoint: CGPointMake(41.58, 25.33)];
            bezier2Path.usesEvenOddFillRule = YES;

            [color3 setStroke];
            bezier2Path.lineWidth = 1;
            [bezier2Path stroke];
        }
    } 
```

如果选择了按钮，则绘制第一个代码，否则绘制另一个代码。我更喜欢这种方法，因为我使用 Paint Code。所以这可以节省大量时间，而且您不需要创建数千个 png 或 jpeg。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-03T10:59:01.993

根据您对其他答案之一的评论，这是一个询问“我如何用 Y 做 X 以实现 Z？”的情况。当你真的应该问“我如何实现 Z？”时

如果您希望按钮在图像顶部而不是旁边绘制文本，只需将图像设置为按钮的背景图像。使用`setBackgroundImage:forState:`, 而不是`setImage:forState:`, 然后正常设置标题。

在任何情况下，您要么必须在 中绘制图像`drawRect:`，要么将文本移动到子视图中，以便将其绘制在图像上方。我提到的解决方案是第二个选项的一个版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-03T01:19:53.163

您不需要子类化 UIButton 只是为了向它添加一些文本。下面是在 UIViewController 子类的 -viewDidLoad 方法中为自定义按钮设置按钮标题的示例：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0, 0, 44, 44);
[button setTitle:@"x" forState:UIControlStateNormal];
[self.view addSubview:button]; 
```

您还可以设置按钮的字体属性或使用 -setTitleColor:forState: 更改颜色。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T09:31:33.403

在按钮视图上添加子视图怎么样？然后你就可以完全控制它，而不用关心按钮做了什么。您甚至可以将其设为标签并为自己保存 drawRect。

# perl - 为什么Spreadsheet::XLSX::Utility2007 的xls2csv 四舍五入到小数点后两位？

> ID：816038
> 
> 赞同：0
> 
> 时间：2009-05-03T01:08:54.347
> 
> 标签：perl, excel, csv, decimal, rounding

我正在编写一个 Perl/Tk 脚本，它使用 Spreadsheet::Read 模块中的 ss2tk 示例脚本显示 Excel 工作表。它不会四舍五入两位小数，但来自[Spreadsheet::XLSX::Utility2007](http://search.cpan.org/dist/Spreadsheet-XLSX)的函数确实四舍五入到两位小数。为什么？我正在尝试将第二个功能用作我的程序的一个功能，以提供将显示的工作表转换为 CSV 文件的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-01T12:52:06.847

我看到您能够在 Frieduck 的帮助下在[PerlMonks上](http://www.perlmonks.org/?node_id=734666)[得到答案（与](http://www.perlmonks.org/?node_id=734666)[friedo](https://stackoverflow.com/users/20745/friedo)有任何关系吗？），所以我将它联系起来是为了让人们受益。

总而言之，基本上事实证明， [Spreadsheet::XLSX::Utility2007](http://search.cpan.org/dist/Spreadsheet-XLSX-0.1/lib/Spreadsheet/XLSX/Utility2007.pm)的内部在检索单元格值时会自动应用 2 位小数位格式。提出的两种解决方法是：

1.  [通过修改 XLSX 内部结构来更改模块生成单元类型的方式](http://www.perlmonks.org/?node_id=761577)（使其将它们全部视为默认值）。
2.  [更改模块处理从电子表格加载的单元格的方式](http://www.perlmonks.org/?node_id=761576)（将它们视为具有原始电子表格中的未格式化值），也可以通过修改内部结构。

无论哪种方式，还提到您最好定义一个`local`sub 来执行修改后的行为，这样就不会因更改模块而导致任何令人讨厌的意外。

# asp-classic - 如何抓取自己的网站？

> ID：816040
> 
> 赞同：1
> 
> 时间：2009-05-03T01:10:17.243
> 
> 标签：asp-classic

我继承了一个旧的 Classic ASP 网站进行修改。虽然没有预先要求，但我想删除一堆旧的“孤立”页面。

出于某种原因，老开发人员决定创建文件的多个实例而不是使用源代码控制（例如。`index-t.asp, index-feb09.asp, index-menutest.asp`）。

我想知道是否有人知道可以为我抓取我自己的网站的程序或网站？它可能需要能够抓取公共站点，因为有很多包含文件。此外，有些网址是相对的，有些是绝对的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T01:34:33.207

我最喜欢的工具是[Xenu](http://home.snafu.de/tilman/xenulink.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T01:36:24.123

还有 W3C 链接检查器：http: [//validator.w3.org/checklink](http://validator.w3.org/checklink)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T02:36:48.970

您永远不应该让曾经有效的 URL 过时。糟糕的网络开发者！没有饼干！！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-03T02:38:35.190

你应该考虑：

1.  将整个现有站点置于源代码管理中，然后
2.  删除多余的页面，看看谁在抱怨

# sockets - Easy Button to UDP Packet - 控制板术语

> ID：816041
> 
> 赞同：2
> 
> 时间：2009-05-03T01:10:47.257
> 
> 标签：sockets, hardware, tcp, microcontroller, ethernet

对于那些处理微控制器编程的人...

我想要一个瞬时接触开关（假设是一个 Staples Easy Button，因为这是最有趣的瞬时接触开关），当它被按下时，通过网络发送一个广播 UDP 数据包（由 .NET 应用程序接收并从那里做各种有趣的事情）。

到目前为止，我发现的最接近的是工业数据采集硬件接口，但我正在寻找更多具有几个输入引脚和以太网输出的可编程单微控制器。这个或任何特定建议是否有特殊术语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-17T23:38:32.750

以我的经验，任何带有板载以太网外围设备的微控制器都可能满足您的需求——一些制造商在开发板和有限的编译器上比其他制造商做得更好，因此这可能会影响您。查看 Microchip、TI、飞思卡尔和 Keil（第三方 - 但很好的工具）。

取决于您想要做多少工作（按照燃烧时间的相反顺序！）：

*   从任何已经有以太网和工作代码示例的人那里购买开发板。
*   购买具有带以太网外设的 MCU，但没有代码示例的开发板。
*   围绕带有以太网外设的 MCU 设计您自己的以太网硬件，并编写/调试您自己的代码和硬件。

只是我的2c！玩得开心。

ps 并且不要忘记在购买开发板之前测试 IDE。MCU开发环境的质量存在*巨大*差异，它将直接影响您的体验......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T01:26:31.713

既然您希望使用 .NET（可能是 Windows），我建议您看看[Coding4Fun](http://blogs.msdn.com/coding4fun/pages/1994662.aspx)。

以下是他们的一些[硬件项目](http://blogs.msdn.com/coding4fun/archive/tags/hardware/default.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T21:09:45.307

一个 5 美元的 PIC 芯片只需少量的逻辑/功率就可以做到这一点，请参阅 www.microchip.com，根据数量，您可以构建一块板或购买一块板。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T21:17:49.767

更简单、更便宜的方法是在不学习新语言的情况下使用像[Phidg​​ets这样的东西。](http://www.phidgets.com/)

允许您将按钮连接到 phidgets 板，然后将其连接到 USB 端口。使用 C# 编写您的通信层。Phidg​​et 带有一组 .net 库，可实现与 phidget 板之间的通信。

查看他们网站上的 phidget 论坛以获取答案和示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T21:24:03.043

我认为最简洁的方法是使用几个[XBee](http://www.digi.com/products/wireless/point-multipoint/xbee-series1-moduledocs.jsp)模块。将其中一个隐藏在 Easy Button 内，将另一个连接到计算机。当按下按钮时，电脑会收到一个信号，你可以做任何你喜欢的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T17:35:52.887

如果您对以太网一无所知，[XPort](http://www.lantronix.com/device-networking/embedded-device-servers/)和[WizNet](http://www.wiznet.co.kr)模块等模块可以让您更轻松地将以太网添加到基于微控制器的系统中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-14T13:51:22.053

我也推荐PIC。您可能会从 Microchip 获得微型样品。它们带有 TCP/IP 堆栈、学生级 C 编译器（无优化）。您只需要添加电源和以太网插孔。

.NET 应用程序需要侦听某个端口上的任何广播数据包。

听起来像一个整洁的小项目。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-17T23:32:35.417

推荐一个 XPort：如果您需要以太网，使用起来非常简单。

有关信息

看看 Jeremy Bentham 的 TCP-Lean。他是[IOSoft 硬件公司这里](http://iosoft.co.uk/ "硬件")

他获得了在 PIC 上运行的完整 TCP/IP 堆栈和 Web 服务器。源代码包括在内。它同样适用于任何其他硬件。许多人将 PIC 卡在旧的 ISA 8 位网卡上。效果很好。

如果您可以容忍从串行网络开始，那么使用串行端口和 SLIP 进行 Windows“直接计算机到计算机的连接”真的很容易。

要发送数据包，您需要做的就是发送正确的字节序列。

涉及最多的部分是用于设置 SLIP 链接的 Microsoft 客户端-服务器握手。（普通SLIP根本没有调用初始化）MS协议（来自内存）客户端发送“CLIENT”作为响应，服务器发送“CLIENTSERVER”

之后，一个简单的应用程序可以随时发送单个罐装的 SLIP 帧 UDP 数据包。（对于按钮发送者，您*真的不需要不同的序列号。）*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-23T09:31:11.217

您需要一个带有廉价/免费开发工具并具有板载以太网硬件的处理器评估板。突然想到的一对来自 Atmel (AVR32A) 和 Rabbit。

Atmel 提供了一个免费的开发系统，它带有一个 FreeRTOS 端口和以太网演示软件。

Rabbit 带有一个基于 C 语言变体的免费开发环境。语言扩展在 C 实现中提供了一些内置的多任务处理能力。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-12-31T22:49:28.877

我在 2008 年对此进行了研究。我发现了一个来自德国的现成按钮，大约 90 美元加上可能昂贵的运费。我没有给它添加书签，从那以后我就再也找不到了。很可能已经停产了。我确实找到了这个：

[http://www.plasma2002.com/epb/#details](http://www.plasma2002.com/epb/#details)

# c# - .NET 图形数据库

> ID：816055
> 
> 赞同：57
> 
> 时间：2009-05-03T01:25:22.573
> 
> 标签：c#, java, .net, mono, graph-databases

我一直在设计一个基于 .NET/Mono 框架的应用程序，它应该大量使用*图论中的最短路径*，我想使用本机解决方案来遍历图的节点，而不是实施难以维护且会严重影响性能的替代解决方案。

我找到了一个非常适合我的范围的应用程序：**neo4j**。

不幸的是，这个应用程序纯粹是用 Java 代码编写的，由于两种架构之间的巨大差异，它不能移植到 .NET。

有没有人知道是否有neo4j的任何端口或.NET的类似解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-23T23:30:35.633

我很惊讶没有人提到[Fallen-8](http://www.fallen-8.com/)，它就像 .NET 平台的“Neo4J”（也是开源的）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-03T01:36:01.627

有[db4o 数据库引擎](http://www.db4o.com/)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-06-05T09:23:54.760

自从 Neo4j 开始获得[REST 支持](http://wiki.neo4j.org/content/Getting_Started_REST)以来，事情发生了一些变化，现在有两个不同的 .Net REST 客户端正在工作中：

*   [Neo4RestNet](http://bitbucket.org/2hdddg/neo4restnet)
*   [Neo4jRestSharp](http://neo4jrestsharp.codeplex.com/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-06-23T16:21:42.840

来自 Codeplex 的[BrightstarDB 。](https://brightstardb.codeplex.com/)BrightstarDB 是一个开源、快速、可嵌入和可扩展的 NoSQL 数据库，适用于 .NET 平台，具有代码优先数据模型生成功能。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-03-30T18:35:38.740

微软也在开发一款[——Trinity](http://research.microsoft.com/en-us/projects/trinity/)

**编辑 1：**
我最近才遇到这个[存储库](https://github.com/ahzf/repositories)。我还没有查看代码或使用它，但它有 .NET 接口用于：

1.  蓝图
2.  雷克斯特
3.  管道

这些实用程序可用于连接多个图形数据库，包括 neo4j 和 OrientDB。有关更多信息，请查看[TinkerPop](http://www.tinkerpop.com/)。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2011-09-06T08:19:21.970

现在，您可以免费下载和测试 Sparsity Technologies 于 2011 年 7 月发布的带有 .NET API 的 DEX 图数据库，网址为：

[http://www.sparsity-technologies.com/dex_downloads](http://www.sparsity-technologies.com/dex_downloads)

以及如何使用 .NET 构建您的第一个图形数据库？在 Dzone 解释：

[http://architects.dzone.com/articles/how-build-your-first-net-graph](http://architects.dzone.com/articles/how-build-your-first-net-graph)

Rgds

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-11-08T13:41:38.360

DEX 高性能图形数据库具有专用的 .Net API，因此可能有助于将其与您的架构集成。你可以[在这里下载](http://www.sparsity-technologies.com/dex_download_previ?v=4.7.0&lang=.Net)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-08-09T00:17:13.697

我很惊讶没有人提到 QuickGraph，这是一个非常成熟且功能丰富的 NET 图形库。它有多种图形表示和大量算法。

[http://quickgraph.codeplex.com/](http://quickgraph.codeplex.com/)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2011-06-03T17:23:23.927

[binpress](http://www.binpress.com/app/neo4net/176)上的 Neo4Net 可能会有所帮助。

这与测试人员在此处建议的 CodePlex 上的[Neo4Net不同](http://neo4net.codeplex.com/)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-03T07:49:35.333

目前唯一可用的是 Clojure、JR​​uby、Jython 和 Python 的绑定。然而，对于 Neo4j 的 JRuby REST API，[http](http://github.com/andreasronge/neo4j/tree/2840b4c3d58e0250fdc31b63b11ac941ea944ba6/test/rest) ://github.com/andreasronge/neo4j/tree/2840b4c3d58e0250fdc31b63b11ac941ea944ba6/test/rest 可能是目前最好的选择。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-10-30T13:47:23.027

这是一个相当古老的问题，但当我偶然发现它时，我想其他人也会。

.Net 和 Neo4j 有一个客户端 [http://hg.readify.net/neo4jclient/wiki/Home](http://hg.readify.net/neo4jclient/wiki/Home)

和 Cypher 的 API [http://mtranter.com/2013/09/21/cypher-net-a-neo4j-cypher-api/](http://mtranter.com/2013/09/21/cypher-net-a-neo4j-cypher-api/)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2010-06-04T15:15:13.030

今天早上在 Neo4j 邮件列表上找到了这个链接（我想，我似乎再也找不到它了）：

[http://www.thewebsemantic.com/2010/06/03/neo4j-on-net-3-5/](http://www.thewebsemantic.com/2010/06/03/neo4j-on-net-3-5/)

它本质上让您将 java 编译为 .net，然后您可以引用新创建的程序集。

还没有尝试过，但我很快就计划好了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2010-07-20T22:57:50.533

Neo4Net 也在开发中：http: [//neo4net.codeplex.com/](http://neo4net.codeplex.com/)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2010-10-30T12:37:52.923

[http://www.webling.com](http://www.webling.com)上的人也在开发一个本地 .NET 图形数据库来支持他们的 Web 应用程序。我认为它还没有公开发布，但它看起来很有动力。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-03-03T21:32:59.877

他们将其命名为 CloudGraph，并将在[http://www.cloudgraph.com](http://www.cloudgraph.com)上发布。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2011-07-20T21:21:37.767

请在 www.sparsity-technologies.com 中查看新的 .net 版本的 DEX。

# c - C/D画线包

> ID：816060
> 
> 赞同：2
> 
> 时间：2009-05-03T01:32:47.627
> 
> 标签：c, graphics, d, wireframe

我发现我自己需要一个画线包。我需要弹出一个窗口并画线和点。文字会很好，但我可以没有它。最重要的是，我需要一些简单的东西才能运行。我没有时间在 libs 周围闲逛（如果我确实有时间，我会愿意，但我已经落后了）。

我更喜欢[D 语言](http://www.digitalmars.com/d/1.0)解决方案（Windows XP、D1.0、Phobos），但我可能可以使用任何带有 C 链接和源代码的东西。

我还可以使用进程外解决方案，如：生成输入文件，调用程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T02:13:19.980

**如果您想要一个进程外的解决方案，为了让某些东西快速启动并运行，生成 PostScript 和启动 PostScript 查看器**很难。这个技巧的最大优点是你生成了一些东西，你不喜欢它的样子，你可以手动编辑它，直到它看起来更好。然后您返回并编辑生成器。因此，您的原型制作周期非常快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T12:59:33.513

[量子点](http://dsource.org/projects/scrapple/browser/trunk/qd/)。

它就是*为此*而生的。

只需导入 qd，与 SDL.lib 链接（如果需要文本，则为 SDL_ttf），然后设置 screen(width, height)，line(x1, y1, x2, y2) 绘制一条线，pset(x1, y1) 到画一个点， print(x1, y1, Bottom|Right, "text") 打印文本。cls 重置，翻转更新屏幕。events() 来处理事件。将 , rgb(r, g, b) 附加到上述任何命令以更改线条颜色， Fill(rgb(r, g, b)) 以更改填充颜色。

例如，请参阅 test*.d

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T02:51:33.443

另一种选择是使用[Cairo](http://cairographics.org/)。它有一个非常容易学习的 API，非常强大，可以开箱即用地编写 PNG、PS、PDF 和 SVG。它还支持绘制到 GDI、X 和 Quartz 窗口。

cairo有一个旧的[D 绑定](http://dsource.org/projects/bindings/browser/trunk/cairo)（由一些没有才华的黑客编写），它可能仍然有效。如果不出意外，它将演示如何在 D 中链接和使用 cairo。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T10:45:09.483

您可以使用 SDL 弹出一个窗口并使用 SDL_gfx 中的 SDL_gfxPrimitves.h 来绘制线条（它还可以渲染基本文本和形状）。它不需要太多时间来设置并且是便携式的。

```
#include <SDL/SDL.h>
#include <SDL/SDL_gfxPrimitives.h>

main() {
    SDL_Surface *screen = NULL;

    if ( SDL_Init(SDL_INIT_VIDEO) < 0 )
        exit(EXIT_FAILURE);

    atexit(SDL_Quit);

    screen = SDL_SetVideoMode(500, 500, 32, SDL_SWSURFACE|SDL_ANYFORMAT);

    if ( screen == NULL )
        exit(EXIT_FAILURE);

    lineColor(screen, 50, 50, 200, 200, 0xff0000ff);
    SDL_Flip(screen);

    sleep(5);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T02:11:32.433

[`wxwidgets`](http://www.wxwidgets.org/)是功能更强大、移植更广泛的 GUI 工具包之一。该工具包本机是 C，但有许多其他语言的绑定。我不知道D是否在其中。

# asp.net - asp.net 如何以编程方式为大约 10 个下拉列表添加 TemplateField

> ID：816062
> 
> 赞同：2
> 
> 时间：2009-05-03T01:34:03.007
> 
> 标签：asp.net, detailsview, edititemtemplate

这是我第三次问这个问题了。我没有得到很好的答案。我希望我能得到一些帮助，但我会继续问这个问题，因为这是一个很好的问题，所以专家不应该忽视这个......

因此，我在 DetailsView 控件中手动添加了大约 10 个下拉列表控件，如下所示。我应该能够以编程方式添加它。请帮助，不要忽视...

```
 <asp:DetailsView ID="dvProfile" runat="server" 
        AutoGenerateRows="False" DataKeyNames="memberid" DataSourceID="SqlDataSource1" 
        OnPreRender = "_onprerender"

        Height="50px" onm="" Width="125px">

        <Fields>

           <asp:TemplateField HeaderText="Your Gender">
                    <EditItemTemplate>
                            <asp:DropDownList ID="ddlGender" runat="server" 
                                            DataSourceid="ddlDAGender"
                                            DataTextField="Gender" DataValueField="GenderID"
                                            SelectedValue='<%#Bind("GenderID") %>'
                                >

                             </asp:DropDownList>
                    </EditItemTemplate>

                    <ItemTemplate >
                                <asp:Label Runat="server" Text='<%# Bind("Gender") %>' ID="lblGender"></asp:Label>
                    </ItemTemplate>

                <asp:CommandField ShowEditButton="True" ShowInsertButton="True" />
            </Fields>
        </asp:DetailsView> 
```

==================================================== =====

添加于 2009 年 5 月 3 日

这是我到目前为止所拥有的，我仍然无法以编程方式添加下拉列表。

```
private void PopulateItemTemplate(string luControl)
{
    SqlDataSource ds = new SqlDataSource();
    ds = (SqlDataSource)FindControl("ddlDAGender");
    DataView dvw = new DataView();
    DataSourceSelectArguments args = new DataSourceSelectArguments();

    dvw = (DataView)ds.Select(args);
    DataTable dt = dvw.ToTable();

    DetailsView dv = (DetailsView)LoginView2.FindControl("dvProfile");

    TemplateField tf = new TemplateField();
    tf.HeaderText = "Your Gender";
    tf.ItemTemplate = new ProfileItemTemplate("Gender", ListItemType.Item);
    tf.EditItemTemplate = new ProfileItemTemplate("Gender", ListItemType.EditItem);
    dv.Fields.Add(tf);
}

public class ProfileItemTemplate : ITemplate
{
    private string ctlName;
    ListItemType _lit;
    private string _strDDLName;
    private string _strDVField;
    private string _strDTField;
    private string _strSelectedID;
    private DataTable _dt;

    public ProfileItemTemplate(string strDDLName, 
                                                        string strDVField, 
                                                        string strDTField,
                                                        DataTable dt
                                                        )
    {
        _dt = dt;
        _strDDLName = strDDLName;
        _strDVField = strDVField;
        _strDTField = strDTField;
    }

    public ProfileItemTemplate(string strDDLName,
                                                    string strDVField,
                                                    string strDTField,
                                                    string strSelectedID,
                                                    DataTable dt
                                                    )
    {
        _dt = dt;
        _strDDLName = strDDLName;
        _strDVField = strDVField;
        _strDTField = strDTField;
        _strSelectedID = strSelectedID;
    }

    public ProfileItemTemplate(string ControlName, ListItemType lit)
    {
        ctlName = ControlName;
        _lit = lit;

    }

    public void InstantiateIn(Control container)
    {

        switch(_lit)
        {
            case ListItemType.Item : 
                Label lbl = new Label();
                lbl.DataBinding += new EventHandler(this.ddl_DataBinding_item);
                container.Controls.Add(lbl);
                break;
            case ListItemType.EditItem :
                DropDownList ddl = new DropDownList();
                ddl.DataBinding += new EventHandler(this.lbl_DataBinding);
                container.Controls.Add(ddl);

                break;
        }
    }

    private void ddl_DataBinding_item(object sender, EventArgs e)
    {

        DropDownList ddl = (DropDownList)sender;
        ddl.ID = _strDDLName;
        ddl.DataSource = _dt;
        ddl.DataValueField = _strDVField;
        ddl.DataTextField = _strDVField;
    }

    private void lbl_DataBinding(object sender, EventArgs e)
    {
        Label lbl = (Label)sender;
        lbl.ID = "lblGender";

        DropDownList ddl = (DropDownList)sender;
        ddl.ID = _strDDLName;
        ddl.DataSource = _dt;
        ddl.DataValueField = _strDVField;
        ddl.DataTextField = _strDTField;
        for (int i = 0; i < _dt.Rows.Count; i++)
        {
            if (_strSelectedID == _dt.Rows[i][_strDVField].ToString())
            {
                ddl.SelectedIndex = i;
            }
        }

        lbl.Text = ddl.SelectedValue;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-04-15T11:58:01.417

我发现这篇文章[http://aspalliance.com/1125](http://aspalliance.com/1125)关于以编程方式创建模板字段。我希望这有助于解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T01:52:43.007

你试过什么？你有什么问题？如果您以前没有回答过这些问题，那么您没有得到好的答案也就不足为奇了。

显然，您必须找到要为其添加下拉菜单的 TemplateField，并且必须将其 EditItemTemplate 属性设置为实现 ITemplate 的类的实例。该实例将`InstantiateIn`调用它的方法来将控件添加到父控件。在这种情况下，您可以在此处配置和添加 DropDownList。

如果这个描述不充分，那你就得说在什么方面不充分，以便我或其他人回答。

# jquery - 如何遍历谷歌地图坐标？

> ID：816065
> 
> 赞同：0
> 
> 时间：2009-05-03T01:35:54.577
> 
> 标签：jquery, google-maps

我被困在试图循环遍历这个在谷歌地图上放置大头针的 GPS 坐标数组。

这是我的代码： http: [//pastie.org/466369](http://pastie.org/466369)

问题在**第 27-36 行**。

如果我将其更改为以下内容，它将在该确切位置放置 1 个引脚，但我希望它循环通过阵列，以便我可以添加多个引脚：

```
//var markers = [];

    for (var i = 0; i < 1; i++) {
        var point = new GLatLng(39.729308,-121.854087);
        marker = new GMarker(point);
        map.addOverlay(marker);
        markers[i] = marker;
    } 
```

任何人都知道为什么下面的这个版本会破坏？

```
var markers = [
(39.729308,-121.854087),
(39.0,-121.0)
];

for (var i = 0; i < markers.length; i++) {
    var point = new GLatLng(markers[i]);
    marker = new GMarker(point);
    map.addOverlay(marker);
    markers[i] = marker;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T01:58:46.190

首先，以下代码是不正确的 JavaScript。

```
var markers = [
(39.729308,-121.854087),
(39.0,-121.0)
]; 
```

你可能打算这样做：

```
var markers = [
[39.729308,-121.854087],
[39.0,-121.0]
]; 
```

其次，根据文档[`GLatLng`需要两个参数](http://code.google.com/apis/maps/documentation/reference.html#GLatLng)，而不是数组。

试试这个：

```
var point = new GLatLng(markers[i][0], markers[i][1]); 
```

**编辑**

我已经更正了您的代码并将其托管在 JS Bin 上。解决上述问题后似乎可以正常工作：

[http://jsbin.com/afojo](http://jsbin.com/afojo)

# javascript - 基于原型与基于类的继承

> ID：816071
> 
> 赞同：223
> 
> 时间：2009-05-03T01:39:10.043
> 
> 标签：javascript, oop, inheritance, prototype-programming

在 JavaScript 中，每个对象同时是一个实例和一个类。要进行继承，您可以使用任何对象实例作为原型。

在 Python、C++ 等中，有类和实例作为单独的概念。为了进行继承，您必须使用基类创建一个新类，然后可以使用该类生成派生实例。

为什么 JavaScript 会朝这个方向发展（基于原型的面向对象）？相对于传统的、基于类的 OO，基于原型的 OO 有哪些优点（和缺点）？

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2009-05-03T01:43:28.567

这里有大约一百个术语问题，主要是围绕某人（不是你）试图让他们的想法听起来像最好的。

所有面向对象的语言都需要能够处理几个概念：

1.  数据的封装以及对数据的相关操作，除其他外，称为数据成员和成员函数，或称为数据和方法。
2.  继承，可以说这些对象就像其他对象集一样，除了这些更改
3.  多态性（“许多形状”），其中对象自行决定要运行哪些方法，以便您可以依赖语言来正确路由您的请求。

现在，就比较而言：

首先是整个“类”与“原型”的问题。这个想法最初始于 Simula，其中使用基于类的方法，每个类表示一组共享相同状态空间（读取“可能值”）和相同操作的对象，从而形成一个等价类。如果您回顾一下 Smalltalk，因为您可以打开一个类并添加方法，这实际上与您在 Javascript 中可以执行的操作相同。

后来的 OO 语言希望能够使用静态类型检查，所以我们在编译时得到了固定类集的概念。在公开课版本中，您有更多的灵活性；在较新的版本中，您可以在编译器中检查某些需要测试的正确性。

在“基于类”的语言中，复制发生在编译时。在原型语言中，操作存储在原型数据结构中，在运行时被复制和修改。然而，抽象地说，一个类仍然是共享相同状态空间和方法的所有对象的等价类。当您向原型添加一个方法时，您实际上是在创建一个新的等价类的元素。

现在，为什么要这样做？主要是因为它在运行时提供了一种简单、合乎逻辑、优雅的机制。现在，要创建一个新对象*或*创建一个新类，您只需执行一次深拷贝，复制所有数据和原型数据结构。然后，您或多或少地免费获得继承和多态性：方法查找*始终*包括按名称向字典询问方法实现。

最终出现在 Javascript/ECMA 脚本中的原因基本上是，当我们在 10 年前开始使用它时，我们正在处理功能不那么强大的计算机和不那么复杂的浏览器。选择基于原型的方法意味着解释器可以非常简单，同时保留面向对象的理想属性。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2010-12-13T11:50:07.810

可以在论文[Self: The Power of Simplicity](http://www.cs.ucsb.edu/~urs/oocsb/self/papers/self-power.html)中找到稍微偏向于基于原型的方法的比较。该论文提出以下支持原型的论点：

> **通过复制创造**。从原型创建新对象是通过一个简单的操作来完成的，复制，一个简单的生物学隐喻，克隆。从类创建新对象是通过实例化完成的，其中包括对类中格式信息的解释。实例化类似于根据计划建造房屋。复制对我们来说是一个比实例化更简单的隐喻。
> 
> **预先存在的模块的例子**。原型比类更具体，因为它们是对象的示例，而不是格式和初始化的描述。这些示例可以通过使模块更易于理解来帮助用户重用模块。基于原型的系统允许用户检查典型代表，而不是要求他从描述中理解。
> 
> **支持独一无二的对象**。Self 提供了一个框架，可以轻松地包含具有自己行为的独一无二的对象。由于每个对象都有命名槽，并且槽可以保存状态或行为，因此任何对象都可以具有唯一的槽或行为。基于类的系统是为存在许多具有相同行为的对象的情况而设计的。没有语言支持一个对象拥有自己的独特行为，创建一个保证只有一个实例的类是很尴尬的[*想想单例模式*]。Self 没有这些缺点。任何对象都可以根据自己的行为进行定制。唯一的对象可以保存唯一的行为，不需要单独的“实例”。
> 
> **消除元回归**。基于类的系统中的任何对象都不能自给自足；需要另一个对象（它的类）来表达它的结构和行为。这导致了概念上无限的元回归：a`point`是 class`Point`的一个实例，它是 metaclass 的一个实例`Point`，它是 metametaclass 的一个实例，无穷无尽 `Point`。另一方面，在基于原型的系统中，一个对象可以包含它自己的行为。不需要其他物体来为它注入生命。原型消除了元回归。

[Self](http://selflanguage.org/)可能是第一种实现原型的语言（它还开创了其他有趣的技术，如 JIT，后来进入 JVM），因此阅读[其他 Self 论文](http://www.cs.ucsb.edu/~urs/oocsb/self/papers/papers.html)也应该是有益的。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-05-03T02:47:06.170

你应该看看[Douglas Crockford](http://www.crockford.com/)写的一本关于 JavaScript的[好书](https://rads.stackoverflow.com/amzn/click/com/0596517742)。它很好地解释了 JavaScript 创建者所做的一些设计决策。

JavaScript 的重要设计方面之一是其原型继承系统。对象是 JavaScript 中的一等公民，以至于常规函数也被实现为对象（准确地说是“函数”对象）。在我看来，当它最初设计为在浏览器中运行时，它是用来创建大量单例对象的。在浏览器 DOM 中，您会发现窗口、文档等都是单例对象。此外，JavaScript 是松散类型的动态语言（与 Python 是强类型的动态语言相反），因此，通过使用“原型”属性实现了对象扩展的概念。

所以我认为在 JavaScript 中实现的基于原型的 OO 有一些优点：

1.  适用于松散类型的环境，无需定义显式类型。
2.  实现单例模式非常容易（在这方面比较 JavaScript 和 Java，你就会知道我在说什么）。
3.  提供在不同对象的上下文中应用对象方法的方法，从对象动态添加和替换方法等（在强类型语言中是不可能的）。

以下是原型 OO 的一些缺点：

1.  实现私有变量的简单方法。[使用Crockford](http://www.crockford.com/)的魔法使用[闭包](http://www.crockford.com/javascript/private.html)实现私有变量是可能的，但它绝对不像在 Java 或 C# 中使用私有变量那么简单。
2.  我还不知道如何在 JavaScript 中实现多重继承（就其价值而言）。

# c# - 另一个普通面板顶部的透明面板

> ID：816076
> 
> 赞同：1
> 
> 时间：2009-05-03T01:43:44.387
> 
> 标签：c#, winforms

我想在另一个面板上显示一个透明面板，两个面板都有标签、文本框等子控件。如果透明面板是另一个面板的子控件，则透明度工作正常，但如果不是，则标签和文本框普通面板出现在透明面板的顶部。该地区其他地区的透明度工作正常。

有任何想法吗 ？？？

我试过把透明面板放在前面，但没有帮助。也许我需要指定绘制控件的顺序？？如果是，我该怎么做？

有趣的是，如果我将应用程序移到任务栏下方并打开它。它达到了正确的结果。（重印解决了问题！！但为什么？？）。但是，当我将其最小化并恢复时，它并不能修复它！

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T01:33:42.693

Windows.Forms 中的透明度是通过关系层次结构而不是视觉层次结构来实现的。绘制透明控件时，.NET 基本上会调用父树，要求每个父控件绘制自身，然后绘制实际控件内容本身。

同一控件中的两个兄弟姐妹将相互绘制。

因此，要回答这个问题，最上面的面板/控件需要是您要在其上绘制的控件的子控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-05-26T00:44:05.317

如果您想要一个不会遮挡其兄弟姐妹的透明控件，根据[Bob Powell](https://web.archive.org/web/20141227200000/http://bobpowell.net/transcontrols.aspx)的说法，您可以通过重写 CreateParams 方法来添加真正的透明度。阅读链接以获取完整说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T01:16:15.840

如果您的所有面板/标签/控件都是单个 UserControl 的一部分，那么您可能是对的，您只需要设置 Z 顺序（从前到后的顺序）。您可以使用 Visual Studio 设计器中的“查看”>“其他窗口”>“文档大纲”下的“文档大纲”来执行此操作。

如果您以编程方式执行此操作，则可以调用 Control.BringToFront() 或 Control.SendToBack() 来更改它们的 z 顺序。一种可能的方法是（假设 ctl1 打算在后面，而 ctl4 打算在前面模式。

```
SuspendLayout()
ctl1.BringToFront()
ctl2.BringToFront() ' Bring ctl2 in front of ctl1
ctl3.BringToFront() ' 3 in front of 2 (and in turn 1)
ctl4.BringToFront() ' 4 in front of the rest
ResumeLayout() 
```

Suspend/Resume Layout 调用可防止 UI 在您重新排列时更新。

# java - Java 中有哪些 HTML 模板选项可以替代从 servlet 代码中进行 HTML 输出？

> ID：816077
> 
> 赞同：5
> 
> 时间：2009-05-03T01:43:44.650
> 
> 标签：java, templates, servlets

给定以下 Hello World servlet，如何将 Hello World 输出从 servlet 代码中传输出来，并将其放入某种 HTML 模板格式中？我想简单地从 servlet 调用模板并让它呈现我在模板中引用的 Java 变量 - 也许通过将“Hello World”字符串引用为 SprogzServlet 类中的类变量？

```
package boochy;

import java.io.IOException;
import javax.servlet.http.*;

@SuppressWarnings("serial")
public class SprogzServlet extends HttpServlet
{
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException
    {
        resp.setContentType("text/plain");
        resp.getWriter().println("Hello, world");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T01:47:38.417

在不使用某种将所有视图委托给 JSP（PDF 输出和其他极端情况除外）的 MVC 框架的情况下进行 Java Web 开发是非常罕见的，因此您有：

*   JSP；
*   [阿帕奇速度](http://velocity.apache.org/moving.html)；
*   [自由标记](http://freemarker.org/)。

一些 Web 框架，如[Tapestry](http://tapestry.apache.org/)和[JSF](http://java.sun.com/javaee/javaserverfaces/)（“Java Server Faces”）有点像带有额外标签的 HTML 视图。

无论如何，JSP 最终都只是编译为 servlet，并且往往是输出 HTML 的一种更方便的形式。一般来说，我会至少使用它们，而不是直接在 servlet 中编写一堆 out.println() 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T14:46:37.717

我已经在一个非常小的内部站点上成功使用了 Velocity 多年。

它易于使用并且有一个漂亮干净的 API。它非常好地处理突发的活动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T14:35:13.470

有趣的是，我之前刚刚看到一个稍微类似的问题。您还可以通过[Quercus](http://www.caucho.com/resin-3.0/quercus/)使用 PHP 页面在 Java 中进行页面呈现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T02:01:20.553

cletus 在他的建议中是非常正确的。

如果您“简单地”需要基于模板的渲染，那么 Freemarker（或速度）是可以使用的解决方案。它们非常有效。您可以提高复杂性阶梯并使用 JSP。

我不同意这仅限于 MVC 模式。在最简单的情况下（显然这不适用于大型系统），您可以使用相同的 servlet 服务所有请求，并选择一个速度/freemarker 模板，并填充所需的上下文并呈现模板。

# php - 如何替换字符串中的一个或两个连续换行符？

> ID：816085
> 
> 赞同：13
> 
> 时间：2009-05-03T01:53:05.987
> 
> 标签：php, regex, pcre, line-breaks

我正在用 PHP 开发一个[服务站点](http://kottke.org/08/02/single-serving-sites)，它只显示访问者发布的消息（最好围绕网站的主题）。任何人每小时最多可以发布三条消息。

由于网站只有一页，我想控制每条消息的垂直长度。但是，我确实希望至少部分保留原始消息中的换行符。折衷方案是允许两个换行符，但如果超过两个，则将它们替换为连续两个换行符。Stack Overflow 实现了这一点。

例如：

```
Porcupines\nare\n\n\n\nporcupiney. 
```

将更改为

```
Porcupines<br />are<br /><br />porcupiney. 
```

检查换行符的一个棘手方面是它们可能被收集并存储为`\r\n`、`\r`或`\n`. 我考虑过将所有换行符转换为`<br />`s using `nl2br()`，但这似乎没有必要。

我的问题：在 PHP 中使用正则表达式（使用 and 之类的函数`preg_match()`）`preg_replace()`，我如何检查连续两个以上换行符的实例（它们之间有或没有空格），然后将它们更改为总共两个换行符?

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-05-03T02:05:58.217

```
preg_replace('/(?:(?:\r\n|\r|\n)\s*){2}/s', "\n\n", $text) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-03T02:07:17.327

就像是

```
preg_replace('/(\r|\n|\r\n){2,}/', '<br/><br/>', $text); 
```

应该工作，我想。虽然我不完全记得 PHP 语法，但它可能需要更多转义：-/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-14T22:49:47.220

`\R`是与系统无关的[转义序列](https://www.php.net/manual/en/regexp.reference.escape.php#:%7E:text=matches%20%5Cn,%20%5Cr%20and%20%5Cr%5Cn)，它将匹配`\n`,`\r`和`\r\n`.

因为您想贪婪地匹配 1 或 2 个连续的换行符，所以您需要使用限制量词`{1,2}`。

代码：（[演示](https://3v4l.org/lAD1J)）

```
$string = "Porcupines\nare\n\n\n\nporcupiney.";

echo preg_replace('~\R{1,2}~', '<br />', $string); 
```

输出：

```
Porcupines<br >are<br /><br />porcupiney. 
```

* * *

现在，要澄清其他答案不正确的原因/位置...

由于量词表达式不正确，@DavidZ 无法解释的答案无法替换唯一的换行符（[Demo of failure ）。](https://3v4l.org/kLgdD)

它生成：

```
Porcupines\nare<br/><br/>porcupiney. 
```

[@chaos 的纯代码答案（失败演示](https://3v4l.org/XGrW0)）可以生成完全相同的结果。正则表达式不仅冗长且错误地实现了量词逻辑，而且还添加了`s`模式修饰符。

如果`s`模式中存在点元字符，则模式修饰符仅对正则表达式有影响。因为`.`模式中没有，所以修饰符是无用的，并且正在教研究人员无意义/不正确的编码实践。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-20T14:38:23.067

我只是想补充一点，即使它没有直接回答这个问题，它可能会帮助那些想要限制换行数的人。我需要这个来限制论坛帖子中换行符的数量。我使用了上面选择的答案，并添加了这个：

```
//Some pre processing
$textarea_reply = str_replace("\r", "<br>", $textarea_reply);
$textarea_reply_splitByLines = explode("<br>", $textarea_reply);
$textarea_reply = "";
$line_count = 0;
$line_limit = 10;

//Re-add the line breaks with a limit of $line_limit
foreach ($textarea_reply_splitByLines as $line){
    $textarea_reply.= $line." "; 
    if($line_count<$line_limit) $textarea_reply.= "<br>";
    $line_count++;
} 
```

无论如何，这都会将换行符的数量限制为最大数量。

# python - Python 中的科学绘图

> ID：816086
> 
> 赞同：8
> 
> 时间：2009-05-03T01:53:32.240
> 
> 标签：python, visualization, plot, scientific-computing

我有一个包含我需要可视化的（事件时间、纬度、经度）的大型元组数据集。我希望生成一个类似于“电影”的 xy 图，但想知道是否有人有更好的主意，或者是否有一种简单的方法可以在 Python 中做到这一点？

提前感谢您的帮助，--Leo

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-03T02:14:07.917

获取[matplotlib](http://matplotlib.sourceforge.net)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-01T20:17:06.537

最简单的选择是 matplotlib。可能对您有用的两个特定解决方案是：

1）您可以生成一系列图，每个图都是给定时间的快照。这些可以在 matplotlib 中显示为动态图，其中轴保持不变，数据四处移动；或者您可以将一系列情节保存到单独的文件中，然后将它们组合起来制作电影（使用单独的应用程序）。做这些事情的官方示例中有许多示例。

2）一个简单的散点图，其中圆圈的颜色随时间变化可能对您的数据很有效。这非常容易。例如， 看到[这个，它会产生这个图形](http://matplotlib.sourceforge.net/examples/pylab_examples/ellipse_collection.html)[替代文本 http://matplotlib.sourceforge.net/plot_directive/mpl_examples/pylab_examples/ellipse_collection.hires.png](http://matplotlib.sourceforge.net/plot_directive/mpl_examples/pylab_examples/ellipse_collection.hires.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-03T16:18:16.657

我会尝试rpy。R 的所有力量，都来自 python。 [http://rpy.sourceforge.net/](http://rpy.sourceforge.net/)

rpy 太棒了。

查看 CRAN 动画库， [http: //cran.r-project.org/web/packages/animation/index.html](http://cran.r-project.org/web/packages/animation/index.html)

当然，你必须学习一些关于 R 的知识才能做到这一点，但如果你打算在未来经常做这种事情，那么值得你花时间学习。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-01T18:56:25.233

如果您对使用 Python 进行科学绘图感兴趣，请查看 Mlab：[http ://code.enthought.com/projects/mayavi/docs/development/html/mayavi/mlab.html](http://code.enthought.com/projects/mayavi/docs/development/html/mayavi/mlab.html)

它允许您绘制 2d / 3d 并对数据进行动画处理，并且图表的质量非常高。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-03T16:46:34.060

Enthought 的[Chaco](http://code.enthought.com/chaco/)专为交互式/更新绘图而设计。api 等需要一些时间来适应，但是一旦你在那里，它就是一个很棒的框架。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-03T04:23:53.270

我在 Python 应用程序生成嵌入了动画功能的 SVG 方面取得了相当大的成功，但它使用的元素集比你可能拥有的要少。例如，如果您的数据是关于地震事件的，则显示一个圆圈，该圆圈在事件发生时出现，并且其大小与事件的大小相匹配。添加时间线上的移动指示器非常简单。

[万花筒](http://www.kevlindev.com/samples/kaleidoscope/kaleidoscope.svg)（Opera，其他可能，Safari 不是）展示了很多移动的作品，我发现了鼓舞人心的。网站上还有很多其他优秀的 SVG 教程内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-03T05:06:05.010

你可能想看看[PyQwt](http://pyqwt.sourceforge.net/)。这是一个与 Qt/PyQt 一起使用的绘图库。

几个 PyQwt 示例（在 qt4examples 目录中）展示了如何创建“移动”/动态变化的图 - 查看`CPUplot.py`, `MapDemo.py`, `DataDemo.py`.

# naming-conventions - 如果我在不同的命名空间上有相同的类名，我该怎么办？

> ID：816088
> 
> 赞同：0
> 
> 时间：2009-05-03T01:54:57.010
> 
> 标签：naming-conventions, namespaces

我正在做一个项目，我遇到了以下*命名问题*。

我想实现工厂模式，但我不知道要使用的最佳类命名（我正在从一个更改为另一个，这非常耗时：S）。

我通常使用命名空间来分隔类*组*，但我的*问题*在于这段特定的代码：

```
class Mesh
{
    ...
};
namespace Factory
{
    class Mesh
    {
        ...
    };
}
...
Factory::Mesh meshFactory;
Mesh *mesh = meshFactory.create(...); 
```

我的*问题*是，如果我使用这种结构，我可以混合 Mesh 类（无论是工厂类还是实际的 Mesh 类）。实际上，这是一种简化，我的问题涉及更多的命名空间，并且在两个命名空间中都使用了具有相同名称的类。

我在考虑可能使用后缀来分隔类并将它们放在同一个命名空间中，例如：

```
class Mesh
{
     ...
};
class MeshFactory
{
     ...
};
MeshFactory meshFactory;
Mesh *mesh = meshFactory.create(...); 
```

因此，每个班级的工作没有混淆。

我不喜欢使用不同名称空间并发明不同名称的简单解决方案，因为我最终会使用名称空间名称来区分它们：

```
class Mesh
{
    ...
};
namespace Factory
{
    class MeshFactory // I can't figure a better different name
    {
        ...
    };
} 
```

我更喜欢第二种选择。

有充分的理由说明第一个选择更好吗？还是有其他方法？最佳实践对此有何看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T02:03:37.880

请记住 OO 设计中“最佳实践”的这条黄金法则：命名类很容易占设计解决方案的 50%。如果您在命名实体时遇到问题，则表明您的脑海中没有清晰的概念模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T01:59:03.477

是什么原因导致您将 Mesh 类命名为“Mesh”？

生成 Mesh 实例的工厂类是否具有相同的原因？

如果是这样，那么它们应该是同一个类，具有相同的名称。

如果不是，那么它们应该是不同的类，具有不同的名称。

由于工厂类的唯一目的可能是生成 Mesh 类的实例，因此我建议您将其命名为 MeshFactory。

命名空间不相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T01:59:49.357

您必须完全符合使用条件。如果您的完全限定名称太长，请使用别名。

a.网格 b.网格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T02:03:36.320

一般来说，在 .NET 领域（特别是 C#）中，如果绝对没有办法绕过它（即第 3 方），我会重新映射该类：

```
using MyMesh = My.Mesh;
using FooMesh = Foo.Mesh; 
```

除非你显然不是在谈论 C#（这个问题应该用 c++ 标记），否则我会在引用任何一个时使用完整的命名空间。虽然打字不方便，但只需一个错误就很麻烦。

# asp.net - 打印 ASP.NET 3.5 图表控件

> ID：816090
> 
> 赞同：2
> 
> 时间：2009-05-03T01:58:51.917
> 
> 标签：asp.net, printing, charts, controls

有关如何以 PDF 格式打印生成的图表的任何信息？它们在屏幕上看起来很棒，但最终用户希望打印它们并根据需要归档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T17:11:15.057

我正在寻找一种方法来做到这一点，并找到了 winforms 的答案

这是我得到 asp:chart 打印的方式

在网页上添加javascript：

```
<script type="text/javascript" language="javascript">
    function printChart() {

    var html = '<HTML>\n<HEAD>\n';
    html += '<link rel="stylesheet" type="text/css" href="../../../Styles/print.css" media="print"> \n';

    html += '\n</HEAD>\n<BODY>\n';
    html += '\n<div>';

    var printReadyElement = document.getElementById("printChart");

    if (printReadyElement != null) {
        html += printReadyElement.innerHTML;
    }
    else {
        alert("Trouble printing Chart");
        return;
    }

    html += '\n</div>';

    html += '\n</BODY>\n</HTML>';

    var printWin = window.open("", "printSpecial");
    printWin.document.open();
    printWin.document.write(html);
    printWin.document.close();

    printWin.print();

} 
```

这链接到一个输入按钮

```
<input type="button" value="Print" onclick="printChart()" style="width:99px; height:26px;" /> 
```

下一步是将元素添加到 web.config

```
<appSettings> 
   <add key="ChartImageHandler" value="storage=memory;timeout=20;deleteAfterServicing=false;" />
</appSettings> 
```

在*system.web*标签下

```
 <httpHandlers>      
        <add path="ChartImg.axd" verb="GET,HEAD,POST" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false" />
    </httpHandlers> 
```

*system.webServer*下

 *```
<handlers>
  <remove name="ChartImageHandler">
  <add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD,POST" path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
</handlers> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-11T14:40:52.790

所以我在使用 JavaScript 函数 PrintPage(); 时遇到了同样的问题。它将打印网页，但不包括 asp.net 图表控件。您可以看到图表的边框，但看不到数据。因此，我为解决此问题所做的是将用于调用 printPage() 函数的按钮移到 updatePanel 之外，并且它起作用了。

希望这可以帮助某人。

```
<asp:Button runat="server" ID="btnPrint" OnClick="btnPrint_Click" CssClass="Floater" Text="Print Customer Report" Visible="True" />

<script>
    function PrintPage() {

        window.print();
    }
</script>

protected void btnPrint_Click(object sender, EventArgs e)
    { 
        ScriptManager.RegisterStartupScript(Page, GetType(), "JsStatus", "PrintPage();", true);
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-09-04T15:25:35.480

从 MSDN 下载图表控件示例。有几个如何打印的示例。要获取 PDF，您需要 PDF 打印驱动程序。

[http://code.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=1591](http://code.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=1591)

查看 \WinSamples\ChartFeatures\Printing\

简单的方法是：

```
using System.Windows.Forms.DataVisualization.Charting;
...

// Show Page Setup dialog
chart1.Printing.PageSetup();

// Print preview chart
chart1.Printing.PrintPreview();

// Print chart (without Printer dialog)
chart1.Printing.Print(false);

... 
```

# c++ - 排版撇号 + 宽字符串文字破坏了我的 wofstream (C++)

> ID：816092
> 
> 赞同：1
> 
> 时间：2009-05-03T01:59:36.547
> 
> 标签：c++, unicode, widestring, wofstream

在处理不祥的印刷撇号（'）时，我刚刚遇到了一些奇怪的行为——而不是打字机撇号（'）。与宽字符串文字一起使用时，撇号会中断 wofstream。

此代码有效

```
ofstream file("test.txt");
file << "A’B" ;
file.close(); 
```

==> A'B

此代码有效

```
wofstream file("test.txt");
file << "A’B" ;
file.close(); 
```

==> A'B

此代码失败

```
wofstream file("test.txt");
file << L"A’B" ;
file.close(); 
```

==> 一个

此代码失败...

```
wstring test = L"A’B";
wofstream file("test.txt");
file << test ;
file.close(); 
```

==> 一个

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T08:54:13.807

在使用 wofstream 之前，您应该“启用”语言环境：

```
std::locale::global(std::locale()); // Enable locale support 
wofstream file("test.txt");
file << L"A’B"; 
```

因此，如果您有系统语言环境`en_US.UTF-8`，那么文件`test.txt`将包含 utf8 编码数据（4 个字节），如果您有系统语言环境`en_US.ISO8859-1`，那么它将将其编码为 8 位编码（3 字节），除非 ISO 8859-1 错过了这样的字符。

```
wofstream file("test.txt");
file << "A’B" ;
file.close(); 
```

此代码有效，因为`"A’B"`实际上是 utf-8 字符串，并且您将 utf-8 字符串逐字节保存到文件中。

**注意：**我假设您使用的是类似于 OS 的 POSIX，并且您的默认语言环境与默认语言环境“C”不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T02:05:00.717

您确定这不是您的编译器对源文件中“损坏”的 unicode 字符的支持吗？如果您使用`\x`或类似的方法对字符串文字中的字符进行编码怎么办？`wchar_t`您的源文件是否即使在您的编译器中可能采用任何编码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T07:05:43.707

尝试将流插入字符包装在一个`try-catch`块中，并告诉我们它会抛出什么异常（如果有）。

我不确定这里发生了什么，但无论如何我都会骚扰猜测。印刷撇号可能有一个适合一个字节的值。这是可行的，`"A’B"`因为它盲目地复制字节而不用担心底层编码。然而，有了`L"A’B"`，一个依赖于实现的编码因子开始发挥作用。它可能找不到正确的 UTF-16（如果您在 Windows 上）或 UTF-32（如果您在 *nix/Mac 上）值来存储此特定字符。

# jquery - 比较性能 - htc 与 jQuery

> ID：816096
> 
> 赞同：0
> 
> 时间：2009-05-03T02:02:43.373
> 
> 标签：jquery, performance, internet-explorer, html-components

我有一个（仅限 IE）网络应用程序，它现在使用 htc 来呈现 html 小部件。

我正在考虑将应用程序迁移到 jQuery。htc 和 jQuery 之间的性能比较如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-11-14T13:52:51.663

这不是一个真正有效的问题。

.htc 文件通常使用 javascript。jQuery 只是一个位于 javascript 之上并为您提供一些额外功能的库。如果需要，您甚至可以*在*.htc 文件中使用它。所以你基本上是在询问 jQuery 本身的性能。

我从未真正研究过统计数据，但我可以说，如果您正确使用选择器并为它们提供上下文，那么在大多数情况下，jQuery 的速度几乎可以忽略不计。它使跨浏览器编码变得更加容易，并且通常值得任何轻微的性能损失。

如果替代方法是使用您自己的自制代码，您可能会看到性能改进，而不是使用 jQuery 的性能命中。

# javascript - 谷歌地图 zoomOut-Pan-zoomIn 动画

> ID：816100
> 
> 赞同：20
> 
> 时间：2009-05-03T02:04:08.457
> 
> 标签：javascript, google-maps, settimeout

我想知道如何使用 Google Maps API 平滑地放大动画。

我有两分，一分在中国，一分在法国。当我放大中国时，点击法国按钮。我希望它逐渐平滑缩小，一次缩放一个级别。当它被缩小时，它应该平移到新位置，然后在新位置上放大一个缩放级别。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-03T02:25:03.350

您需要[`zoomOut`](http://code.google.com/apis/maps/documentation/reference.html#GMap2.zoomOut)设置连续缩放参数的[`panTo`](http://code.google.com/apis/maps/documentation/reference.html#GMap2.panTo)方法来进行缩放和平滑平移到新中心点的方法。

您可以收听地图对象上的[`zoomEnd`](http://code.google.com/apis/maps/documentation/reference.html#GMap2.zoomend)和事件，以将您的,和方法[`moveEnd`](http://code.google.com/apis/maps/documentation/reference.html#GMap2.moveend)链接在一起。`zoomOut``panTo``zoomIn`

编辑：

因此，在针对此问题实施示例的过程中，我发现and （或仅在地图上）上的`doContinuousZoom`参数并没有按预期工作。缩小时它可以正常工作，如果图块在缓存中（这是重要的一点，如果图块没有被缓存，那么它就不可能获得你想要的平滑动画）然后它会做一些很好的缩放用于模拟平滑缩放动画的图块，并在每个缩放步骤中引入约 500 毫秒的延迟，因此您可以异步执行（与在我的示例中看到的不同，我使用 setTimeout 来调用异步）。 `ZoomIn``ZoomOut``EnableContinuousZoom``panTo`

不幸的是，该方法并非如此`zoomIn`，它只是跳转到目标缩放级别，而没有每个缩放级别的缩放动画。我没有尝试明确设置谷歌地图代码的版本，所以这可能是在以后的版本中修复的问题。无论如何，这里的[示例代码](http://www.cannonade.net/geo2.js)主要是 javascript 箍跳，而不是 Google Maps API：

[http://www.cannonade.net/geo.php?test=geo2](http://www.cannonade.net/geo.php?test=geo2)

因为这种方法似乎有点不可靠，所以我认为显式地对 setZoom 进行异步处理会更有意义（与平移的东西相同）。

编辑2：

所以我现在明确地进行异步缩放（一次使用`setTimeout`一个缩放）。我还必须在每次缩放发生时触发事件，以便我的事件链正确。似乎正在同步调用 zoomEnd 和 panEnd 事件。

在地图上设置 enableContinuousZoom 似乎不起作用，所以我猜想用参数调用 zoomOut、zoomIn 是让它工作的唯一方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T10:25:17.527

这是我的方法。

```
var point = markers[id].getPosition(); // Get marker position
map.setZoom(9); // Back to default zoom
map.panTo(point); // Pan map to that position
setTimeout("map.setZoom(14)",1000); // Zoom in after 1 sec 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-08T16:10:36.833

```
var zoomFluid, zoomCoords;   //shared variables

function plotMarker(pos, name){
    var marker = new google.maps.Marker({
        map: map,
        title:name,
        animation: google.maps.Animation.DROP,
        position: pos
    });
    google.maps.event.addListener(marker, 'click', function(){
            zoomCoords = marker.getPosition();     //Updates shared position var
            zoomFluid = map.getZoom();            //Updates shared zoom var;
            map.panTo(zoomCoords);       //initial pan
            zoomTo();                   //recursive call
    });

}

//  increases zoomFluid value at 1/2  second intervals
function zoomTo(){
    //console.log(zoomFluid);
    if(zoomFluid==10) return 0;
    else {
         zoomFluid ++;
         map.setZoom(zoomFluid);
         setTimeout("zoomTo()", 500);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-30T21:04:43.177

对于缩放，这对我很有效：

```
function animateMapZoomTo(map, targetZoom) {
    var currentZoom = arguments[2] || map.getZoom();
    if (currentZoom != targetZoom) {
        google.maps.event.addListenerOnce(map, 'zoom_changed', function (event) {
            animateMapZoomTo(map, targetZoom, currentZoom + (targetZoom > currentZoom ? 1 : -1));
        });
        setTimeout(function(){ map.setZoom(currentZoom) }, 80);
    }
} 
```

# c# - 以缩进格式将 xml 字符串或 XmlNode 保存到文本文件？

> ID：816109
> 
> 赞同：5
> 
> 时间：2009-05-03T02:12:09.670
> 
> 标签：c#, .net, xml

我有一个很长的 xml 字符串。我想以很好的缩进格式将 xml 字符串保存到文本文件中：

```
<root><app>myApp</app><logFile>myApp.log</logFile><SQLdb><connection>...</connection>...</root> 
```

我喜欢的格式：

```
<root>
   <app>myApp</app>
   <logFile>myApp.log</logFile>
   <SQLdb>
      <connection>...</connection>
      ....
   </SQLdb>
</root> 
```

有哪些 .Net 库可供 C# 使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-03T02:23:40.280

这将适用于你想做的事情......

```
var samp = @"<root><app>myApp</app><logFile>myApp.log</logFile></root>";    
var xdoc = XDocument.Load(new StringReader(samp), LoadOptions.None);
xdoc.Save(@"c:\temp\myxml.xml", SaveOptions.None); 
```

与 System.Xml 命名空间相同的结果...

```
var xdoc = new XmlDocument();
xdoc.LoadXml(samp);
xdoc.Save(@"c:\temp\myxml.xml"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-03T02:19:31.553

我将假设您并不是说您有一个 System.String 实例，其中包含一些 XML，并且我希望您不要通过字符串操作来创建它。

也就是说，您所要做的就是在创建 XmlWriter 时设置正确的设置：

```
var sb = new StringBuilder();
var settings = new XmlWriterSettings {Indent = true};
using (var writer = XmlWriter.Create(sb, settings))
{
    // write your XML using the writer
}

// Indented results available in sb.ToString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-02T13:12:51.493

只是另一种选择：

```
using System.Xml.Linq;

public string IndentXmlString(string xml)
{
    XDocument doc = XDocument.Parse(xml);
    return doc.ToString();
} 
```

# database - DB 设计：查找表的排序顺序

> ID：816112
> 
> 赞同：1
> 
> 时间：2009-05-03T02:13:03.100
> 
> 标签：database, language-agnostic, database-design

我有一个应用程序，其中数据库后端有大约 15 个查找表。例如，有一个这样的县表：

```
CountyID(PK)    County
49001       Beaver  
49005       Cache   
49007       Carbon  
49009       Daggett 
49011       Davis   
49015       Emery   
49029       Morgan  
49031       Piute   
49033       Rich    
49035       Salt Lake   
49037       San Juan    
49041       Sevier  
49043       Summit  
49045       Tooele  
49049       Utah    
49051       Wasatch 
49057       Weber 
```

这个应用程序的 UI 在这些查找表的不同位置有许多组合框，我的客户要求在这种情况下列出这些框：

```
CountyID(PK)    County
49035       Salt Lake
49049       Utah
49011       Davis
49057       Weber
49045       Tooele      
'The Rest Alphabetically 
```

完成此任务的最佳计划是为 SortOrder(numeric) 的每个查找表添加一列。我有一位同事告诉我，他认为这会导致表格违反 3rd-Normal-Form，但我认为排序顺序仍然取决于键并且仅取决于键（即使列表的其余部分是按字母顺序排列的）。

添加 SortOrder 列是执行此操作的最佳方法，还是有更好的方法我只是没有看到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-03T02:51:03.117

我同意@cletus 的观点，即排序顺序列是一个很好的方法，它不违反 3NF（因为，正如你所说，排序顺序列条目在功能上取决于表的候选键）。

我不确定我是否同意字母数字优于数字。以县为例，很少有新的县。但不要求分配的数字是连续的；例如，您可以为它们分配 100 的倍数，从而为插入留出足够的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T02:17:00.733

是的，我同意当要求像您引用的那样自定义排序顺序时，排序顺序列是最佳解决方案。但是，我不会使用数字列。如果数据是字母数字，则排序顺序应该是字母数字。这样，您就可以使用县域中的任何内容来播种值。

如果您使用数字字段，则无论何时添加新条目，都必须（可能）对整个表重新排序。所以：

列：ID、县、SortOrder

种子：

```
UPADTE County SET SortOrder = CONCAT('M-', County) 
```

对于特殊情况：

```
UPDATE County
SET SortOrder = CONCAT('E-' . County)
WHERE County IN ('Salt Lake', 'Utah', 'Davis', 'Weber', 'Tooele') 
```

可以说，您可能希望在其中放置另一个标记列以指示这些条目是特殊的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T18:24:27.140

我选择了数字和大倍数。

即使使用 CONCAT('E-'.. 示例，我也没有获得所需的排序顺序。这会给我 Davis、SL、Tooele ......而盐湖城需要排在第一位。

我最终使用了 10 的倍数，并为非特殊排序条目分配了一个值，例如 10000。这样每个查找的视图都可以具有

```
ORDER BY SortOrder ASC, OtherField ASC 
```

另一个程序员建议在 Oracle 中使用 DECODE，或者在 SQL Server 中使用 CASE 语句，但这是一个更通用的解决方案。YMMV。

# vim - 当我使用 Dvorak 时，无法在 Vim 的 Tlist 中向上移动 t

> ID：816113
> 
> 赞同：1
> 
> 时间：2009-05-03T02:13:13.053
> 
> 标签：vim, dvorak, taglist

**问题：**在 Vim 的 Taglist 中向上移动 "t"

当我不在 TagList 中时，移动键 DHTN 在 Vim 中工作。

我的[.vimrc中有以下内容](https://stackoverflow.com/questions/165231/vim-dvorak-keybindings-rebinding)

```
 no h j 
 no t k 
 no n l 
 no s : 
 no S : 
 no j d 
 no J D 
 no l n 
 no L N
 no - $ 
 no _ ^ 
 no N 
 no ; z 
 no T L 
 no P P 
 no p p 
```

**如何在 TagList 中也启用移动键“t”？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-03T19:21:44.513

可以通过将以下内容添加到您的 .vimrc 来解决该问题

```
if v:version >= 700                                                                                                                                                                                           
         nnoremap <buffer> <silent> t
                     \ 
         nnoremap <buffer> <silent> <C-t>
                     \ 
         endif 
```

**对伟大的问题的回应：**

我通过将以下内容添加到我的 .vimrc 重新映射密钥失败

```
if v:version >= 700
         nnoremap <buffer> <silent> l
                     \ :call <SID>Tlist_Window_Jump_To_Tag('checktab')<CR>
         nnoremap <buffer> <silent> <C-l>
                     \ :call <SID>Tlist_Window_Jump_To_Tag('newtab')<CR>
         endif 
```

您将如何进行重新映射？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T05:24:03.123

问题是标签列表已经为这些键定义了非常具体的操作，因此重新绑定它们已经将功能移到了它之上，并且不能用于转移责任。可能还有另一种方法，但您可以在 :1560 和 :1562 行编辑 taglist.vim

```
 nnoremap <buffer> <silent> t
      nnoremap <buffer> <silent> <C-t> 
```

将“t”更改为您想要的字母，也许是“l”。您还将在此区域中找到所有其他键绑定。虽然不需要这些更改或受这些更改影响，但如果您从 :535 行开始更改其他绑定，您也可以更新帮助消息

# python - 使用 Python 混合 RSS 提要的好方法是什么？

> ID：816118
> 
> 赞同：1
> 
> 时间：2009-05-03T02:15:47.070
> 
> 标签：python, django, rss, feed, parsing

SimplePie 允许您将提要合并在一起：

[http://simplepie.org/wiki/tutorial/sort_multiple_feeds_by_time_and_date](http://simplepie.org/wiki/tutorial/sort_multiple_feeds_by_time_and_date)

Python 世界里有这样的东西吗？Universal Feed Parser 文档没有说明将多个提要合并在一起的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T03:12:42.457

[这](http://github.com/dustin/snippets/blob/master/python/net/http/combiner.py)对你来说可能是一个好的开始。我很久以前为一个非常具体的组合写了它，但我认为我写它并不是*为了*满足我的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T18:08:20.977

**[Atomisator](http://atomisator.ziade.org/)**是一个数据聚合器框架。它的目的是提供一个引擎来通过合并多个数据源来构建任何类型的数据。它是作为“专家 Python 编程”一书中的示例应用程序开发的。您可以使用不同的输入和输出格式。RSS 聚合器是示例的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T03:34:07.490

 [Planet](http://www.planetplanet.org/)是一个用 Python 编写的提要聚合器。它的开发基本上已经死了，但代码仍然存在于几个分支中，包括 Planet Venus。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T08:04:19.993

我正在使用雅虎管道来完成这项任务。它是一套非常强大的工具。我使用管道连接基于某些标准的提要，并让它生成一个兼容的 rss 提要，然后我使用通用提要解析器进行处理。

# hardware - 更多 CPU 缓存是否有助于 Visual Studio 2008 中的编译/开发？

> ID：816120
> 
> 赞同：2
> 
> 时间：2009-05-03T02:17:13.010
> 
> 标签：hardware, development-environment, cpu

我正在考虑用一台新的笔记本电脑来代替我现在的机器。我注意到很多机器都有 P8xx 和 T9xxx Intel Core 2 Duo。T9xxx 有溢价，但我相信与 P8xx 中的 3 兆相比，它们有 6 兆的缓存。这会对我的编译时间或任何其他统计数据有帮助吗？我应该将溢价投资在比缓存更多的 RAM 上吗？

我在 Visual Studio 2008、一些 C++/MFC 中做了很多 Web 工作。我只是想根据我的需求来平衡我的预算，而不会矫枉过正。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T02:27:41.880

通常这不如增加 CPU 内核的数量（如果您没有一对一的依赖树，可以运行并行构建）或 CPU 本身的速度那么有用 - 但结果可能仍会因您的实际项目而异一起工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T03:06:44.547

我不知道更多的缓存是否会有所帮助。我想它不会受伤。有几件事对我的 Visual Studio 性能有所帮助。

1.  在系统中放置尽可能多的 RAM。RAM很便宜，你应该最大限度地利用你的机器。

2.  转到您的电源选项，并确保您的 CPU 正在全速运行。例如，在我的机器上，安装了 Vista，将电源选项从“平衡”切换到“高性能”大约会使编译速度提高一倍。

# ipc - 进程间通信

> ID：816128
> 
> 赞同：2
> 
> 时间：2009-05-03T02:22:59.910
> 
> 标签：ipc

使用文件进行进程间通信的优缺点是什么？让我介绍一下我提出这个问题的背景。

问题是具有一些约束的经典生产者消费者问题。生产者是一组运行在机器集群上的协作进程，并使用广播相互通信。每个进程都有自己知道的本地用户，并通过上述广播机制让其他进程知道他们。到目前为止，正在广播/共享的状态信息还没有被持久化，但现在它需要被持久化。

该系统已经在生产环境中运行多年，现在支持成千上万的用户，人们可以理解的是，人们非常担心为此添加任何额外的依赖项以增加对持久性的支持。我们选择的路径是在现有进程中生成一个新线程，将本地流量写入文件系统上的文件，然后由新进程读取（我们称之为消费者）并持久化。我们看到这种方法的优点是：

1.  我们免费获得持久性。如果新进程出现问题，我们在将其写入文件系统时不会丢失任何本地流量。只要消费者知道它在哪里停止，只要它出现，它就可以开始处理数据。
2.  使用队列库和普通的旧 unix 文件 IO 没有学习曲线。
3.  最大的优点是我们根本不影响当前的生产者进程，除了文件写入的新线程。

这种方法的一些问题是：

1.  文件锁定和争用及其对性能的影响。
2.  确保写入缓冲区已刷新，并且生产者仅在将完整事件写入文件后才释放文件锁。消费者应该阅读不完整的记录。

想法？这种方法是否幼稚，我们是否应该为使用现成的持久队列库的加速时间支付初始成本？这里的要点是我们希望对当前进程产生最小的影响并且不添加任何依赖项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T02:34:13.547

我最近面临这个选择，并考虑充分了解 Berkeley DB 以使用其队列机制。但最终我决定改用 Unix 文件系统并使用[Posix 信号量](https://stackoverflow.com/questions/355030/is-it-possible-to-avoid-a-wakeup-waiting-race-using-only-posix-semaphores-is-i)*编写我自己的原子队列原语*。如果所有进程都在一台机器上，这很容易。atomic put函数大约有十几行代码；原子获取，因为如果队列为空，它必须等待，大约是大小的三倍。

我的建议是你设计一个能隐藏这些细节**的原子队列 API 。**（遵循 Parnas 的建议，即使用接口隐藏可能更改的设计细节的经典示例。）您可以使用普通 Unix 文件 I/O 执行 API 的第一个版本。然后，您可以尝试诸如锁定、Berkeley DB 或信号量之类的变体——所有这些都具有“对当前进程的最小影响”。

在您尝试某些东西之前，您不会知道性能影响。真实文件系统上的文件锁定非常好；NFS 上的文件锁定是一种负担。

# language-agnostic - 如何保持我的代码简单？

> ID：816130
> 
> 赞同：12
> 
> 时间：2009-05-03T02:24:34.087
> 
> 标签：language-agnostic

- 编辑 -

我相信这是一个可能有多个答案的有效问题（如此处所定义[）](https://stackoverflow.com/questions/157125/do-we-really-need-the-subjective-tag-and-is-it-commonly-mis-used/157227#157227)。这不是讨论也不是民意调查。此外，这个问题显然没有争议，因为到目前为止似乎没有一个受访者相互争论。

- 原文 -

惊人的！我做软件大约 15 年了，但我仍然*不知道*我在做什么 :)

说真的，我仍然在与基础知识斗争：

*   过度工程与 YAGNI
*   偷工减料以满足最后期限与推迟业务
*   冒险的创新与乏味的旧东西
*   享受独自工作的自由与团队的力量

但最糟糕的是代码复杂性。我的代码往往会变得*邪恶*。几周后它甚至会咬*自己。*我付出了巨大的努力来保持它简单、可读、可维护、优雅、美观、内聚、松散耦合，基于很好的直接抽象。但所有这些努力都付诸东流！

不要误会我的意思，按照大多数人的标准，我的代码是相当不错的。我的意思是它很灵活，或多或少是可单元测试的，并且可以做它需要做的事情。然而，这远非简单。

每一个变化都需要大量的重构。如果另一个人打开我的代码以添加功能，他将不得不做一些愚蠢的事情。即使他是天才，即使他是我自己不熟悉代码库的克隆人，他也无法做到正确。为什么，为什么会发生这种事？是不是有一些方法论，一些技术，一些冥想技巧，什么都没有？！

如何保持我的代码简单？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-03T08:05:35.450

正如[@neodymium](https://stackoverflow.com/questions/816130/how-do-i-keep-my-code-simple/816158#816158)以一种善意的方式指出的那样，*不要让你的算法驱动代码*。为了举例说明这实际上意味着什么，请考虑一下您在一周前编写的 C# 中的以下悲伤装置：

```
public void DoArray(string[] strArr) {
    string s = null;

    for(int i = 0; i < strArr.Length; i++)
    {
        if(strArr[i].Equals("Needle"))
            s = strArr[i];
    }

    if(s != null)
        Console.WriteLine("I've found " + s);
} 
```

仅通过查看代码可能需要一段时间才能找出您编写的内容。但最后你记得这个方法在字符串数组中查找“Needle”。你惊叹于你的算法是多么的巧妙，但又担心你花了一两分钟才意识到它在做什么。

## 不要通过评论开始使事情变得清晰！

你的第一直觉可能是写评论来帮助你的同事，**但就停在那里！**评论不过是[道歉](http://butunclebob.com/ArticleS.TimOttinger.ApologizeIncode)。取而代之的是，让我们自己在代码中变得清晰……*水晶般清晰*。

为了做到这一点，试着想象你以前从未见过自己的代码。通过对自己说诸如“这是什么”和“为什么会这样”之类的话来强迫它。然后我们将开始重构这个东西。我们可以做的第一个简单重构是将方法重命名为更合适的名称。怎么样：

```
public void FindNeedle(string[] strArr) { … } 
```

我们还能做什么？我们可以：

*   重命名`strArr`为更合适的名称，例如`haystack`.
*   将返回类型更改为 a`bool`并更改方法，以便在找到针时返回。
*   将方法的`Console.WriteLine(…)`一部分移到此方法的上下文之外，以便调用代码可以这样做：`if ( FindNeedle(myArray) ) WriteFoundNeedle();`
*   使用`foreach`而不是`for`.

代码可能最终如下（您的里程可能会有所不同）：

```
public bool HasNeedle(string[] haystack) {
    foreach(string straw in haystack)
    {
        if(straw.Equals("Needle"))
            return true;
    }
    return false;
}

// Is called by the following:
if ( HasNeedle(strArr) )
{
    Console.WriteLine("I've found the needle!");
} 
```

## 小步骤重构

为了使您的代码更加清晰、易懂和易读，可以做很多事情，而这可以通过重构代码来实现。以尽可能小的步骤进行重构。就像移动或封装逻辑并将它们命名为更具逻辑性和可读性的东西。就像一个冗长而复杂的 if 语句一样简单：

```
if ( strArr[pos - 1].Equals("do") && strArr[pos + 1].Equals("then") ) 
```

...可以通过将逻辑语句移动到[它自己的方法](http://www.refactoring.com/catalog/extractMethod.html)中来重构为更简单的东西：

```
if ( CurrentIsSurroundedByDoThen(strArr, pos) ) 
```

有很多方法可以重构。我建议您阅读其中的一些内容，Martin Fowler 已经写了一本关于它的书，但也有一个[包含代码示例和/或类图的在线目录](http://www.refactoring.com/catalog/)。必须在假设它将使您的代码比以前更易于**维护**的情况下决定是否应该进行重构。

## 在附录中

请记住保持重构[简单](http://c2.com/cgi/wiki?SimplySimplistic)，并牢记[SOLID 原则](http://www.lostechies.com/blogs/chad_myers/archive/2008/03/07/pablo-s-topic-of-the-month-march-solid-principles.aspx)。

[此外，如果您以正确的方式](https://stackoverflow.com/questions/61400/what-makes-a-good-unit-test)编写单元测试来开始您的项目，那么重构就会变得更加自然。你重构得越多，你的代码就会变得越清晰。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-03T06:45:50.433

我感觉到你的痛苦，伙计。在复杂系统中为简单而斗争是软件工程的斗争。如果你已经搞定了，那么你可能没有在足够努力的工程问题上工作。而且难并不总是意味着复杂，它可能是“明天实施x，以防止天塌下来”。

走向简单... TDD 彻底提到，完全同意。TDD 是一种让代码专注于它需要做的事情的技巧。经常提到的重构。完全同意。

关于简单性与复杂性以及单独工作......不要单独处理交付代码。每次签到都要进行代码审查，并鼓励代码审查员对你进行调查。这将使您保持正确的妥协和平衡。每天至少与某人讨论您的代码一次。轮换审稿人。我的工作更清晰，与队友一起更好。不要在意它们有多绿。实际上，越绿色越好，以确保代码清晰。

关于单独工作......单独工作在研发中占有一席之地，而不是在交付的代码中。充其量，孤独的牛仔项目制作很酷的东西，维护起来非常痛苦。单独完成的工作总是需要一两个月的时间来重新实现并重新分解为凡人可维护的代码，并修复一些巨大的疏忽。如果在你发布牛仔代码之后的那一两个月打击你，那真的很痛苦。

编辑：在细节方面，我发现各种有关域驱动设计的书籍对于提供创建超清晰代码的方法非常有帮助。但 DDD 并不适用于所有问题。

如果你确实找到了简单和过度设计之间平衡的答案......好吧，我什至不知道该怎么做。我想我会感到无聊并找到另一份工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-03T02:38:14.800

> > 如何保持我的代码简单？

使用代码来实现正确的算法。

不要让你的算法编写代码。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-03T03:16:44.770

对我来说，测试驱动开发让一切变得不同。当我在没有测试证明的情况下编写代码时，我会想到太多的场景，担心代码是否可以工作，编写大量额外的东西以确保它可以工作，等等。

当我进行 TDD 时，代码非常简单，因为测试让我编写了正确的代码，我没有那么防御，但我确信它满足所有要求，因为测试通过了。

我发现有帮助的另一件事是检查开源项目的代码。他们中的许多人都有易于其他人理解和修改的代码，因此可以很好地了解如何实现这一目标。在这方面我最喜欢的一个是 JMock。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-11T14:44:30.587

最简单的一种，我最喜欢的是[引入解释变量](http://www.refactoring.com/catalog/introduceExplainingVariable.html)。

这：

```
if ( (platform.toUpperCase().indexOf("MAC") > -1) &&
      (browser.toUpperCase().indexOf("IE") > -1) &&
       wasInitialized() && resize > 0 )
 {
   // do something
 } 
```

变成：

```
final boolean isMacOs     = platform.toUpperCase().indexOf("MAC") > -1;
final boolean isIEBrowser = browser.toUpperCase().indexOf("IE")  > -1;
final boolean wasResized  = resize > 0;

if (isMacOs && isIEBrowser && wasInitialized() && wasResized)
{
    // do something
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-03T02:53:03.160

经常重构。

这是我发现的使代码简单的唯一可靠方法。有时，如果不先开始编写代码，您就无法想办法摆脱复杂性。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-03T02:33:47.450

或多或少可单元测试意味着它不可单元测试。:)

如果您不能轻松地编写测试，而无需跳过大量的箍或设置工作，那么这似乎是一个问题，IMO，应该需要重构。

我尝试遵循三个原则： 让它发挥作用 让它正确 让它快。

第一个只是让它工作，主要是单元测试。:)

然后我重构和改进单元测试，完成它们。这是您应该进行的下一步，因为听起来您可能忽略了这个概念。此外，请尝试删除任何硬编码值以使其更灵活。将它们放在 xml 文件、数据库中或作为一些常用文件中的常量。

然后，我分析和优化瓶颈。

您可能希望查看 xetreme 编程 (XP) 并了解仅实现所需功能的概念，而不是尝试实现您认为需要的功能。它应该简化代码。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-03T03:04:00.760

我通常会记住这句话来编码。

> **奥卡姆剃刀**最简单的（解释|解决方案）通常是最好的。

我建议您发布一些代码并征求批评和意见。你可以从其他人那里学到很多东西。尝试一下 ：）

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-07-27T01:09:32.330

当您考虑是否添加或删除某些东西时，问问自己它是否属于提供 80% 差异的 20% 的努力。

如果没有或您有疑问，请将其删除。如果删除的内容如此重要，那么它很快就会变得显而易见。

不断告诉自己“做起来简单”也有帮助。追求简单，忘记纠正，纠正会来并亲吻你。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-03T02:47:48.663

我认为这是一个普遍的问题。我们都试图创建优雅的代码和干净的代码，有时我们最终会做得又快又脏，因为我们承受着压力，时间和预算不是无限的。

我尝试跟随 DRY 和 KISS。“不要重复自己”和“保持简单愚蠢”。我也遵循“一件事”的规则。方法、类、命名空间应该只做一件事。

老实说，我尝试过从测试驱动开发的角度做一个项目，我发现很难进入那种思维定势，你们红、绿、重构，但它确实有助于打破旧习惯.

我一直是紧密耦合的受害者，不得不将东西撕成自己的组件，这很残酷并且破坏了应用程序，但你可能会被赶上。

这真的是一个模糊的问题，我同意，社区维基！

ps 我不相信某事是`more`或`less`，它是`is`，或它`isn't`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-03T02:51:17.733

在我的脑海中浮现：在你的日程安排中安排时间来*重构*. 将重构作为交付需求的一部分，而不仅仅是事后的想法。

这将基于希望交付一种更易于维护、更可重用的产品，因此未来的开发人员不会惊慌失措并且不得不破解。

我真的认为答案是让重构成为你生活中更重要的一部分，并对其进行自律。（我也需要这个！类似的问题......我想我们大多数人都在这条船上。）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-11T14:37:17.857

只添加需要的东西——不要未来证明——只对实际问题做出反应

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-03T03:23:14.647

您可以尝试经常运行复杂性指标，确定复杂性的上限是多少，并在超出该限制时进行重构。复杂性指标是客观的。它们为您提供了一种量化软件复杂程度的方法以及一种衡量进度的方法。也许您正在为非常好的代码而自责。或者您认为代码在复杂性指标上的得分很高。

我知道这些指标很粗糙。真正重要的是复杂性的主观心理体验，而不是 McCabe 复杂性数，后者是前者的粗略近似。另一方面，我发现这些指标非常有用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-03T09:01:44.270

关于 KISS 主题：

1) 不要觉得你必须修复核心代码中的所有微小错误/功能。有时最好将它们记录在案，让调用您的代码的人担心如何解决它们。（很有可能他永远不会触发那个特定的错误，所以任何检查都会浪费处理。）这使您的代码保持小、快速和简单。如果您想制作一个万无一失但臃肿的版本，请将其与库代码（在其之上）分开编码......

2）不要让其他人更改您的代码！他可以调用你的代码，或者他可以扩展你的代码，所以如果它已经在做它的工作，他真的需要改变核心吗？不要让他将您的 SimpleAndSpeedySearchPage 变成 SuperAdvancedSearchPageWithCowbell，让他通过扩展或调用您的代码来构建 SuperAdvancedSearchPageWithCowbell。

如果您的队友确实开始在您整洁的小库中添加东西，请自己进行重构。将你的好代码拉到一个超类中，让他只留下他的代码调用你的代码。

总结：一旦你的代码完成了它的基本工作，就停止工作，让它只读！如果您想添加“高级功能”和“特定于您的应用程序的错误修复”，请将它们添加到其他地方。100 个简单的类比 10 个臃肿的类好。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-11T14:35:57.360

想到的几件事：

1.  尝试提前计划您的实施策略——可能在纸上或与同行讨论，然后再深入实施。很可能已经有一个库函数可用于处理您的部分问题。
2.  写下概述实施步骤的伪代码。
3.  尝试实现这些方法，使每个方法都有一个目的，或者将其他方法联系在一起。应该可以一目了然地看到任何方法应该做什么。这就是 TDD 可以帮助您专注于更容易测试的小方法的地方。较小的方法也有特定的名称，因此名称已经告诉了您很多信息。此外，一些简单的复杂性指标，来自[这个问题](https://stackoverflow.com/questions/204369/seeking-clarifications-about-structuring-code-to-reduce-cyclomatic-complexity)的指标可以帮助您确定您的方法是否尝试做太多事情。
4.  当你的实现工作时不要停下来——尝试重构，直到它尽可能简单和可维护。经常问自己，如果其他人会读到这篇文章，他们会理解吗？

# development-environment - 便携式 Windows 开发环境和 USB 拇指驱动器

> ID：816141
> 
> 赞同：2
> 
> 时间：2009-05-03T02:31:35.287
> 
> 标签：development-environment, portability, usb-drive

在过去的几年里，当我不得不重新安装操作系统和 20 多种开发工具和应用程序时，我发现自己浪费了越来越多的时间。我希望在虚拟机上做更多的工作。

现在您开始看到 32GB 和 64GB 拇指驱动器。我想知道你能从 USB 拇指驱动器运行 Virtual PC 或 VMWare 映像吗？这样做有什么问题吗？我会计划每天备份图像，以防驱动器发生故障。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T02:35:22.157

从闪存驱动器上运行 VM 会产生非常糟糕的性能。不过，我想您可以先将虚拟硬盘驱动器复制到本地存储。我自己在外部硬盘驱动器上运行我的虚拟机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T02:36:54.650

我从未尝试过拇指驱动器，但我一直将外部 USB 驱动器用于虚拟机。我使用 VirtualPC 2007 并没有遇到任何问题。事实上，有时如果主机处于较弱的一侧，则将 VM 放在外部驱动器上会提高性能。我推荐外部USB驱动器路线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T02:38:29.933

我建议您购买外部 SSD 来安装这些虚拟机。拇指驱动器不以速度着称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T02:40:00.850

这是完全可行的。看看[VMware Player - To Go](http://mcpmag.com/columns/article.asp?editorialsid=1500)。性能会比内部硬盘差，但并不完全糟糕。杰夫做了一个[简单的比较](http://www.codinghorror.com/blog/archives/001127.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T19:45:29.067

Windows XP（以及 Vista 和 7）可以在多种硬件配置上启动，每种配置都有不同的驱动程序（零售许可证，而不是 OEM）。

我开始为我的便携式环境使用 2.5" USB HDD。它在多台机器（@home、@work 或任何 VMWare）上都可以正常启动。

我不推荐闪存棒，但我推荐 SSD 棒。今天，您可以找到带有 2 个末端、一个 USB 和一个 eSATA 的 SSD 记忆棒。

要使用 Windows XP 启动 USB 驱动器，您需要[USBoot](http://usboot.org)。第一次启动后，Windows 会安装一些驱动程序，包括磁盘控制器驱动程序（没有这些驱动程序，如果直接在 SATA 上启动，Windows 会蓝屏并显示 0x0000007b）。

自从第一个英特尔固态硬盘问世后，我转而使用固态硬盘。我有 2 个 2.5" 托盘（插入 2.5" 驱动器，就像软盘一样）@home 和 @work。

我可以在 VMWare 和许多其他使用 USB 的计算机上启动 Windows（我有，它可以挽救生命）。我什至从备份 VHD 启动过一次 :)

我使用 Windows Backup 备份到版本化的 VHD（在命令行中，请参阅 Windows Vista、7、2008、2008 R2 上的 wbadmin 命令）。我可以非常快地恢复包括操作系统在内的整个环境，并且我已经从几次灾难中恢复过来。

我还将 EFS 用于重要文件（不要忘记备份 EFS 文件）。

我几乎拥有最小的笔记本电脑，我很高兴我不必携带笔记本电脑包来回工作。

USBoot 应该适用于 Windows Vista 和 7，但我还没有时间切换（对于我的东西的大小和复杂性来说，这是一个耗时的过程）。

# java - Java中字符串的最大长度-调用length()方法

> ID：816142
> 
> 赞同：161
> 
> 时间：2009-05-03T02:31:35.830
> 
> 标签：java, string

在**Java**中，参照方法调用`String`，对象可能具有的最大大小是多少？`length()`

我知道将`length()`a 的大小返回`String`为 a `char []`;

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2009-05-03T02:35:36.023

考虑到[`String`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)类的[`length`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#length())方法返回一个`int`，该方法将返回的最大长度为[`Integer.MAX_VALUE`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#MAX_VALUE)，即`2^31 - 1`（或大约 20 亿）。

在数组的长度和索引方面，（例如`char[]`，这可能是 s 实现内部数据表示的方式`String`），[第 10 章：Java 语言规范的数组](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html)，[Java SE 7 版](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)说如下：

> 数组中包含的变量没有名称；相反，它们被使用非负整数索引值的数组访问表达式引用。这些变量称为数组的 *组件*。如果一个数组有`n`分量，我们说`n`是数组的 *长度*；`0`数组的组件使用从到的整数索引来引用`n - 1`，包括在内。

此外，索引必须是`int`值，如[第 10.4 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.4)所述：

> 数组必须按`int`值索引；

因此，极限似乎确实是`2^31 - 1`，因为这是非负值的`int`最大值。

但是，可能会有其他限制，例如数组的最大可分配大小。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-07-27T19:50:39.320

`[java.io.DataInput.readUTF()](http://docs.oracle.com/javase/7/docs/api/java/io/DataInput.html#readUTF%28%29)`并`[java.io.DataOutput.writeUTF(String)](http://docs.oracle.com/javase/7/docs/api/java/io/DataOutput.html#writeUTF%28java.lang.String%29)`说一个`String`对象由***两个字节***的长度信息和字符串中每个字符的[修改后的 UTF-8表示表示。](http://docs.oracle.com/javase/7/docs/api/java/io/DataInput.html#modified-utf-8)`DataInput`由此得出结论，当与and一起使用时，String 的长度受到字符串的修改后的 UTF-8 表示的字节数的限制`DataOutput`。

此外， Java 虚拟机[规范`CONSTANT_Utf8_info`](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4.7)中的规范定义了如下结构。

```
CONSTANT_Utf8_info {
    u1 tag;
    u2 length;
    u1 bytes[length];
} 
```

你可以发现'length'的大小是**两个字节**。

某个方法（例如`String.length()`）的返回类型`int`并不总是意味着它允许的最大值是`Integer.MAX_VALUE`。相反，在大多数情况下，`int`仅出于性能原因而选择。Java 语言规范说，大小小于 的整数会在计算之前`int`转换为`int`（如果我的记忆正确的话），这是`int`在没有特殊原因时选择的原因之一。

编译时的最大长度最多为 65536。再次注意，长度是[修改后的 UTF-8](http://docs.oracle.com/javase/7/docs/api/java/io/DataInput.html#modified-utf-8)表示的字节数，而不是`String`对象中的字符数。

`String`对象在运行时可能能够有更多的字符。但是，如果要使用`String`带有`DataInput`和`DataOutput`接口的对象，最好避免使用太长的`String`对象。当我实现 和 的 Objective-C 等效项时，我发现了这个`DataInput.readUTF()`限制`DataOutput.writeUTF(String)`。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-05-03T02:34:36.277

由于数组必须用整数索引，因此数组的最大长度为`Integer.MAX_INT`（2 ^(31) -1 或 2 147 483 647）。当然，这是假设您有足够的内存来保存该大小的数组。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-02-17T04:05:05.370

我有一台 2010 iMac，内存为 8GB，运行 Eclipse Neon.2 Release (4.6.2) 和 Java 1.8.0_25。使用 VM 参数 -Xmx6g，我运行了以下代码：

```
StringBuilder sb = new StringBuilder();
for (int i = 0; i < Integer.MAX_VALUE; i++) {
    try {
        sb.append('a');
    } catch (Throwable e) {
        System.out.println(i);
        break;
    }
}
System.out.println(sb.toString().length()); 
```

这打印：

```
Requested array size exceeds VM limit
1207959550 
```

因此，似乎最大数组大小为 ~1,207,959,549。然后我意识到我们实际上并不关心 Java 是否内存不足：我们只是在寻找最大数组大小（这似乎是某个地方定义的常量）。所以：

```
for (int i = 0; i < 1_000; i++) {
    try {
        char[] array = new char[Integer.MAX_VALUE - i];
        Arrays.fill(array, 'a');
        String string = new String(array);
        System.out.println(string.length());
    } catch (Throwable e) {
        System.out.println(e.getMessage());
        System.out.println("Last: " + (Integer.MAX_VALUE - i));
        System.out.println("Last: " + i);
    }
} 
```

哪个打印：

```
Requested array size exceeds VM limit
Last: 2147483647
Last: 0
Requested array size exceeds VM limit
Last: 2147483646
Last: 1
Java heap space
Last: 2147483645
Last: 2 
```

所以，最大值似乎是 Integer.MAX_VALUE - 2，或 (2^31) - 3

PS我不知道为什么我在（2 ^ 31）-3`StringBuilder`时达到极限。似乎它的内部大小增加了一倍来增长它，所以这可能会导致问题。`1207959550``char[]``AbstractStringBuilder``char[]`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-03T02:36:35.413

显然它绑定到一个int，即0x7FFFFFFF（2147483647）。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-12-18T06:14:41.303

String 类的 length() 方法的返回类型是**int**。

> 公共整数长度（）

参考[http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#length()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#length())

所以 int 的最大值是***2147483647***。

字符串在内部被认为是 char 数组，所以索引是在最大范围内完成的。这意味着我们无法索引第 2147483648 个成员。所以 java 中 String 的最大长度是 2147483647。

java中的原始数据类型int是4字节（32位）。由于1位（MSB）用作*符号位*，范围限制在*-2^31到2^31-1*（-2147483648到2147483647）内。我们不能使用负值进行索引。所以显然我们可以使用的范围是从 0 到 2147483647。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-15T06:14:10.260

正如[Takahiko Kawasaki 的回答中提到的，java 以](https://stackoverflow.com/a/17901857/8520798)[修改后的 UTF-8](https://docs.oracle.com/javase/7/docs/api/java/io/DataInput.html#modified-utf-8)和 JVM-Spec [CONSTANT_UTF8_info 结构](https://docs.oracle.com/javase/specs/jvms/se9/html/jvms-4.html#jvms-4.4.7)的形式表示 Unicode 字符串，2 个字节分配给长度（而不是字符串的字符数）。
为了扩展答案，[ASM jvm 字节码](https://asm.ow2.io/)库的[`putUTF8`方法](https://asm.ow2.io/javadoc/org/objectweb/asm/ByteVector.html#putUTF8-java.lang.String-)包含以下内容：

```
public ByteVector putUTF8(final String stringValue) {
    int charLength = stringValue.length();
    if (charLength > 65535) {   
   // If no. of characters> 65535, than however UTF-8 encoded length, wont fit in 2 bytes.
      throw new IllegalArgumentException("UTF8 string too large");
    }
    for (int i = 0; i < charLength; ++i) {
      char charValue = stringValue.charAt(i);
      if (charValue >= '\u0001' && charValue <= '\u007F') {
        // Unicode code-point encoding in utf-8 fits in 1 byte.
        currentData[currentLength++] = (byte) charValue;
      } else {
        // doesnt fit in 1 byte.
        length = currentLength;
        return encodeUtf8(stringValue, i, 65535);
      }
    }
    ...
} 
```

但是当代码点映射> 1字节时，它会调用`encodeUTF8`方法：

```
final ByteVector encodeUtf8(final String stringValue, final int offset, final int maxByteLength /*= 65535 */) {
    int charLength = stringValue.length();
    int byteLength = offset;
    for (int i = offset; i < charLength; ++i) {
      char charValue = stringValue.charAt(i);
      if (charValue >= 0x0001 && charValue <= 0x007F) {
        byteLength++;
      } else if (charValue <= 0x07FF) {
        byteLength += 2;
      } else {
        byteLength += 3;
      }
    }
   ...
} 
```

从这个意义上说，最大字符串长度为 65535 字节，即 utf-8 编码长度。而`char`不算数
你可以从上面的 utf8 结构链接中找到 JVM 的修改后的 Unicode 代码点范围。

# c++ - C++中的图像子目录

> ID：816143
> 
> 赞同：2
> 
> 时间：2009-05-03T02:31:38.903
> 
> 标签：c++, image

基本上，我希望对我的文件进行排序，而不是将它们全部放在与我的可执行文件相同的文件夹中，但是在相对于我的可执行文件的子文件夹中引用文件已被证明是困难的。

```
// DEFINES
#define IMAGE_BACKGROUND "\\content\\images\\background.bmp"
#define FONT_MAIN "\\content\\fonts\\sai.ttf" 
```

上面的代码显然是行不通的。我读到 args[0] 不知何故是我的路？有人愿意再详细说明一下吗？

```
int main(int argc, char* args[])
{ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T03:27:54.743

我应该提到[Boost.Filesystem](http://www.boost.org/doc/libs/1_39_0/libs/filesystem/doc/index.htm)是一个很好的库，可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T19:14:04.550

Have you tryed doing:

```
#define IMAGE_BACKGROUND "\content\images\background.bmp" 
```

That might be the problem (as i have used images from sub folders like that before)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T19:04:19.493

此代码应该可以工作：

```
#define IMAGE_BACKGROUND "\\content\\images\\background.bmp"

int main(int argc, char* args[])
{

    char buf[512];
    int endOfPath = strrchr(args[0], '\\') - args[0];
    strncpy_s(buf, sizeof(buf), args[0], endOfPath);
    strcat(buf, IMAGE_BACKGROUND); 
```

就像其他人说的那样， args[0] 是可执行文件的完整路径，所以你不能按原样使用它。strrchr 函数（中间有两个 r）查找给定字符的最后一次出现并返回指向它的指针。假设您使用的是单字节字符，从返回的指针中减去 args[0] 将为您提供两个指针之间的字符数——当您减去两个指针时，实际上是减去了内存地址，所以您是left with 是指针之间的偏移量或距离。这个距离就像找到的字符的索引。

然后我使用 strncpy_s 函数将 endOfPath 字符数从 args[0] 复制到我们的临时缓冲区。现在，如果您的程序路径是
“C:\Windows\Users\Me\Desktop\myProgram\theProgram.exe”
，则 buf 变量将包含
“C:\Windows\Users\Me\Desktop\myProgram”

然后我使用 strcat (conCATenation) 函数将常量附加到末尾。

请注意，使用#define 时，“\\”在 C/C++ 中是必需的，并且还请注意，在您使用 IMAGE_BACKGROUND 的任何地方都将包含“”标记。

在这些代码行之后，buf 将包含：
“C:\Windows\Users\Me\Desktop\myProgram\content\images\background.bmp”

希望这会有所帮助并且不会太令人困惑......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T16:48:08.447

我实际上通过使用以下代码解决了它，谢谢大家的回复：

```
// DEFINES
#define IMAGE_BACKGROUND ".\\content\\images\\background.png"
#define IMAGE_BLUEBLOCK ".\\content\\images\\blueblock.png"
#define FONT_MAIN ".\\content\\fonts\\sai.ttf" 
```

结果是。获取“工作路径目录”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T02:34:26.433

args[0] 是“可执行文件”的完整路径名（嗯，但这也由操作系统和 shell 决定，因此您可能会得到一个不完整的短文件名），而不是其文件夹。你必须截断它。

尝试 splitpath 和 joinpath。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-03T02:42:10.720

`args[0]`是用于调用可执行文件的名称，不一定是可执行文件的完整路径。您对依赖于操作系统的可执行文件的*工作目录感兴趣。*

无论如何，您必须小心相对路径。如果您的用户从不同的目录调用您的程序，您的工作目录可能会出现意外情况，您将无法正确引用您的文件。

由于您在 Windows 中，因此可以使用该`GetModuleFileName`函数（请参阅[文档](http://msdn.microsoft.com/en-us/library/ms683197(VS.85).aspx)）来获取可执行文件的全名，如下所示：

```
GetModuleFileName(NULL, buffer, length); 
```

# sharepoint - 对于 C# 开发人员来说，最好的 Sharepoint 书籍是什么？

> ID：816155
> 
> 赞同：3
> 
> 时间：2009-05-03T02:36:53.073
> 
> 标签：sharepoint

对于 C# 开发人员来说，最好的 Sharepoint 2007 书籍是什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T02:46:41.427

Microsoft® Office SharePoint® Server 2007 内部
[http://www.microsoft.com/learning/en/us/books/10472.aspx](http://www.microsoft.com/learning/en/us/books/10472.aspx)

索引和搜索引擎内部：Microsoft® Office SharePoint® Server 2007
[http://www.microsoft.com/MSPress/books/12195.aspx](http://www.microsoft.com/MSPress/books/12195.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-03T03:41:40.313

[专业 SharePoint 解决方案开发：结合 .NET、SharePoint 和 Office 2007（Sharepoint 中的专家之声）](http://www.apress.com/book/view/1590598083) 作者：Susie Adams、Ed Hild - ISBN：1590598083、9781590598085

专业的 SharePoint 解决方案开发：结合 .NET、SharePoint 和 Office 2007 采用实用的问题/解决方案方法来应对常见的业务挑战。您不仅会遇到有趣的代码示例，还会看到如何将这些示例与 Microsoft 协作平台服务相结合。书籍解决方案侧重于使用 Visual Studio Tools for Office 构建用户界面层。解决方案可以作为服务提供商与 SharePoint 交互，利用 SharePoint 的许多协作功能，如文档存储库、协作网站和搜索功能。

这本书是独一无二的，因为它从最终用户在使用 Microsoft 协作平台支持业务流程时每天面临的挑战开始。这些解决方案以虚构公司的假设业务挑战的形式呈现。通过在此背景下展示示例，作者 Ed Hild 和 Susie Adams 可以更轻松地了解挑战和解决方案的价值。这些示例的目标是构建应用程序，利用 Office 桌面界面的优势和丰富的 SharePoints 协作功能。

* * *

[专业 SharePoint 2007 Web 内容管理开发：使用 Office SharePoint Server 2007 构建发布站点（Wrox 程序员到程序员）](http://www.wrox.com/WileyCDA/WroxTitle/Professional-SharePoint-2007-Web-Content-Management-Development-Building-Publishing-Sites-with-Office-SharePoint-Server-2007.productCd-0470224754.html) 作者：Andrew Connell - ISBN：0470224754、9780470224755、9780470396315

本书适用于使用发布网站（利用 MOSS 2007 WCM 功能的网站）的 SharePoint 开发人员。它仅在绝对必要时才详细介绍管理主题。在大多数情况下，没有两章是相互依赖的，因此每一章都可以独立于其他章节作为参考。读者无需具有任何 SharePoint 开发经验，但他们应该具有 ASP.NET 2.0 开发实践和主题的一些经验和工作知识。当然，如果读者至少对 SharePoint 的全部内容有所了解，那将是有益的。

本书涵盖了 MOSS 2007 WCM Publishing 网站。您会发现一些章节似乎涵盖了一般的 WSS 3.0 主题，但所有内容都是在发布站点的上下文中处理的。虽然章节按逻辑顺序排列，但不必以线性方式从头到尾阅读本书。

* * *

[高级 SharePoint 服务解决方案（专业人士的专业书籍）](http://www.apress.com/book/view/1590594568) 作者：Scot P. Hillier - ISBN：1590594568、9781590594568、9781430200024

无论您是否已经从 Scot P. Hilliers 的第一本著名的 Apress 书籍 Microsoft SharePoint：构建 Office 2003 解决方案中受益，这个精彩的后续工作一定会令您满意！本书将介绍 Web 部件和 SharePoint Services 编程的高级技术。

Hillier 还介绍了与 BizTalk Server 2004 和 Content Server 等相关产品的高级集成技术。本书面向已经了解所有基本 SharePoint Services 的高级开发人员，将引导您解决超具体的高级问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-03T04:08:03.993

这是我购买的三个，发现非常好：

1.  [真实世界 SharePoint 2007：16 位 MOSS 和 WSS MVP 不可或缺的经验](https://rads.stackoverflow.com/amzn/click/com/0470168358)
2.  [Microsoft Windows SharePoint Services 3.0 内部](https://rads.stackoverflow.com/amzn/click/com/0735623201)
3.  [SharePoint 2007 用户指南：学习 Microsoft 的协作和生产力平台](https://rads.stackoverflow.com/amzn/click/com/1590598296)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T18:18:10.563

上面列出的 Connel 和 Pattison 书籍都是 SharePoint 的必读书籍。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T00:59:40.973

我将从上面提到的 Pattison 书开始。这为您提供了一个很好的起点。

[Microsoft Windows SharePoint Services 3.0 内部](https://rads.stackoverflow.com/amzn/click/com/0735623201)

# python - 这个 SimPy 安装有什么问题？

> ID：816156
> 
> 赞同：0
> 
> 时间：2009-05-03T02:36:53.650
> 
> 标签：python, windows, installation, simpy

好吧，我试了很多次

```
python setup.py install 
```

来自我的命令提示符的命令

尝试这个时：

```
from SimPy.Simulation import * 
```

在空闲时，我得到这个：

```
Traceback (most recent call last):
  File "C:/Python30/pruebas/prueba1", line 1, in <module>
    from SimPy.Simulation import *
  File "C:\Python30\SimPy\Simulation.py", line 320
    print 'SimPy.Simulation %s' %__version__,
                              ^
SyntaxError: invalid syntax
>>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T02:41:19.210

并非每个模块都支持 python 3 - 事实上，现在 90% 或更多的模块都用于 2.x。

您应该为此模块使用 2.5 或 2.6，或者找到与 3.0 兼容的 simpy。

您也可以运行 2->3 升级脚本来修改您的 simpy 源代码，但我不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-31T23:18:22.390

我有一个类似的错误，我安装了 python 2.6.4，所以我认为你不能使用旧版本的 python 来解决你的问题。

```
alumno@ubuntu:/usr/local/SimPy/SimPy$ python carro.py

Traceback (most recent call last):
  File "carro.py", line 2, in <module>

from SimPy.Simulation  import *

ImportError: No module named SimPy.Simulation 
```

linux2 上的 Python 2.6.4rc2（r264rc2:75497，2009 年 10 月 20 日，02:55:11）[GCC 4.4.1]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T10:07:02.450

请参阅第 4 点： http: [//pythonhosted.org/SimPy/Manuals/INSTALLATION.html](http://pythonhosted.org/SimPy/Manuals/INSTALLATION.html) 以获得解决方法。它对我有用。

simpy 包似乎没有与 SimPy 相同的类，通过使用 pip install SimPy 命令，安装了 simpy。

因此，只需从链接下载 SimPy 包并将其复制到 python 的类路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-23T20:07:07.470

您的 Python 安装没有任何问题。SimPy 1 和 SimPy 2 使用与 SimPy 3 截然不同的语法，SimPy 3 是您安装的版本 - 并且是广泛可用的版本。旧教程都是针对旧版 SimPy 编写的。查看此页面...

[http://simpy.readthedocs.org/en/latest/simpy_intro/installation.html](http://simpy.readthedocs.org/en/latest/simpy_intro/installation.html)

# html - 嵌入silverlight，像闪光灯一样的东西？

> ID：816159
> 
> 赞同：1
> 
> 时间：2009-05-03T02:38:15.487
> 
> 标签：html, silverlight, embed

因此，如果我有一个 flash 对象，例如 youtube 视频，我可以很容易地将其嵌入网站（我认为因为那是 flash，而不是 youtube，也许我错了？）。

我希望能够在静态 html 页面（比如我的博客，它不是带有 xap 文件的站点）上放置一个 silverlight 对象/嵌入标签（无 javascript），并完成它。

基本上，除非您可以将自定义 javascript 添加到您的网站，否则似乎没有办法做到这一点。我找到了这个链接： http: [//msdn.microsoft.com/en-us/library/cc189089](http://msdn.microsoft.com/en-us/library/cc189089(VS.95).aspx) (VS.95).aspx 。

只是对此感到非常困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-03T03:25:12.490

你可以只用一个对象标签来做到这一点。MSDN 示例中使用的 JavaScript 用于打印加载应用程序时发生的任何错误（尽管它们通常只是在浏览器的状态栏中显示为警告）。

我推荐的最小片段可能如下所示：

```
<object data="data:application/x-silverlight-2," type="application/x-silverlight-2"
    width="200px" height="200px">
    <param name="source" value="URL/To/SilverlightApp.xap" />
    <param name="minRuntimeVersion" value="2.0.31005.0" />
    <a href="http://go.microsoft.com/fwlink/?LinkID=124807" style="text-decoration: none;">
        <img src="http://go.microsoft.com/fwlink/?LinkId=108181" alt="Get Microsoft Silverlight"
            style="border-style: none" />
    </a>
</object> 
```

# web-services - 在不抨击 API 的情况下开发/测试 Twitter 应用程序

> ID：816164
> 
> 赞同：8
> 
> 时间：2009-05-03T02:39:29.387
> 
> 标签：web-services, twitter

我目前正在开发一个与 Twitter 配合使用的应用程序，但是在开发/测试时（尤其是那些不严重依赖真实 Twitter 数据的部分），我想避免经常访问 API 或发布垃圾推文。

人们是否有一个通用的策略来简化 API（缓存除外）？我正在考虑推出我自己的库，该库基本上会拦截传出请求并返回模拟响应，但我想先确保我没有遗漏任何明显的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-03T03:21:46.617

我可能会从模拟您的应用程序所需的 API 的特定部分开始。事实上，这实际上可能会迫使您为您的应用程序提出一个更简洁的设计，因为它或多或少地要求您从应用程序“应该做什么”而不是“应该如何”做的角度来考虑您的应用程序。

例如，如果您使用 Twitter 搜索 API，那么您的应用程序很可能不应该关心您使用的是 JSON 还是 Atom 格式选项。使用给定查询搜索 Twitter 并返回结果的能力代表了您想要的功能，因此您应该在该抽象级别模拟 API。输出格式只是一个实现细节。

通过在功能方面而不是在低级实现细节方面模拟 API，您可以确保应用程序在您真正连接到 Twitter 之前执行您期望它执行的操作。那时，您已经验证了应用程序是否按预期工作，所以剩下的唯一事情就是编写代码来发出 REST 请求并解析响应，这应该相当简单，所以您可能不会结束那时用大量垃圾数据访问 Twitter。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T03:06:20.240

缓存可能是最好的解决方案。除此之外，我相信 API 限制为每小时 100 个请求。因此，也许可以创建一个函数来持续计算每个请求，当它接近 100 时，它会说，好的，每 10 个 API 请求我将提取数据。它不会很难设置，可能是一个梯度函数，当你接近极限时会停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T04:50:03.660

我使用了 Tweet#，它缓存并应该做你需要的一切，因为它覆盖了 100% 的 twitter api，然后......

[http://dimebrain.com/2009/01/introducing-tweet-the-complete-fluent-c-library-for-twitter.html](http://dimebrain.com/2009/01/introducing-tweet-the-complete-fluent-c-library-for-twitter.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-08T19:36:48.750

在数据库中缓存内容...如果缓存太旧，则通过 API 请求最新数据。

Also think about getting your application account white-listed, it will allow you to have a 20,000 api request limit per hour vs the measly 100 (which is made for a user not an application).

[http://twitter.com/help/request_whitelisting](http://twitter.com/help/request_whitelisting)

# geography - 从哪里获取地理数据？

> ID：816171
> 
> 赞同：4
> 
> 时间：2009-05-03T02:45:49.010
> 
> 标签：geography

我需要新网站的地理数据。

需要的数据是

*   州（带有名称和标准缩写）
*   ZipCode（包含所有可用数据的邮政编码列表，例如邮政编码所属的位置）

我获得这些数据的最佳来源是什么？

任何帮助表示赞赏。

* * *

谢谢大家的回答，

对不起，我离线了几天。是的，我说的是美国邮政编码数据。

我认为邮政服务数据最可靠，我会使用它。

提到的其他替代方案具有类似且格式更好的数据。但我认为使用邮政服务将是最好的选择

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T22:18:18.070

对于邮政编码[Maxmind 免费邮政编码数据库](http://www.maxmind.com/app/postalcode)是我所知道的最全面的免费可用列表。

有关具有名称和 ISO ALPHA-3 代码的国家/地区列表，请参阅[国家或地区、代码和缩写](http://unstats.un.org/unsd/methods/m49/m49alpha.htm)。

当然，维基百科有一个列表和一些指向其他有用资源[的指针 维基百科 - 国家列表](http://en.wikipedia.org/wiki/List_of_countries)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T00:40:51.533

（美国假设，“邮政编码”有点暗示美国的 5 位代码，而“邮政编码”是通用术语）

**州**及其缩写很简单，在[Postal Service 网站上。](http://www.usps.com/ncsc/lookups/usps_abbreviations.html)（包括关岛和美国其他非州的地区）

**邮政编码：** Postal Service 将是有问题的权威机构，但看起来他们不提供邮政编码 <-> 城镇的基本数据库，除了通过交互式的一对一查找。他们确实[为 $ale 提供街道级别的邮政编码数据库和其他信息](http://www.usps.com/ncsc/addressinfo/addressinfomenu.htm)。然而，人口普查局[有一套几乎相同的可用信息](http://www.census.gov/geo/www/gazetteer/places2k.html)。（ZCTA = 邮政编码制表区域）这在[Sourceforge 项目](https://sourceforge.net/projects/zips/)中也更容易预先打包（在他们的论坛中，他们声称这是来自人口普查局的数据）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T02:49:07.473

这是一个可能有帮助的洪流：http: [//www.mininova.org/tor/761374](http://www.mininova.org/tor/761374)

我相信这是合法的，因为它只是公开的地理数据。此外，如果您正在寻找访问数据库：[http ://databases.about.com/od/access/a/zipcodedatabase.htm](http://databases.about.com/od/access/a/zipcodedatabase.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T03:22:00.953

对于什么国家？澳大利亚邮政有一个可下载的文件，其中包含您在[此处](http://www1.auspost.com.au/postcodes/index.asp?sub=2)搜索的所有数据。似乎其他国家的邮政服务也会提供这种服务。

编辑：只是在听[.NET Rocks 没有。437](http://www.dotnetrocks.com/default.aspx?showNum=437)和 Bob Beauchemin 提到大部分数据可在[census.gov 获得](http://www.census.gov/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-03T23:02:18.120

我假设您在谈论美国（如果您需要州和邮政编码......）。

[TIGER/Line](http://en.wikipedia.org/wiki/Topologically_Integrated_Geographic_Encoding_and_Referencing)数据可免费获得。不确定它是否包含邮政编码等，但值得一看，因为它在公共领域。

或者您可以查看[data.geocomm.com](http://data.geocomm.com)。我不知道它的确切法律地位是什么。

# vim - 无法通过 Vim 中的一个命令关闭多个缓冲区

> ID：816175
> 
> 赞同：70
> 
> 时间：2009-05-03T02:46:44.530
> 
> 标签：vim

我在屏幕中使用 Vim。我运行命令

```
vim <bigFolder> 
```

我陷入困境，因为关闭每个缓冲区没有意义

```
:q 
```

**如何通过 Vim 中**的一个命令关闭 Vim 中的所有活动缓冲区？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2010-01-03T09:40:59.933

该`:bufdo`命令允许您在所有缓冲区上执行命令。在这种情况下，您希望一次运行`:bufdo bdelete`以关闭所有打开的缓冲区。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2009-05-03T02:58:32.973

`:qall`或`:qa`将关闭所有窗口

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2010-06-26T20:34:56.280

:%bd(删除)

我想这就是你要的

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-05-06T06:32:36.600

```
:on 
```

将关闭除您当前正在编辑的缓冲区之外的所有缓冲区（光标在此缓冲区内）。

```
:on! 
```

也将关闭修改过的缓冲区，但这些将成为隐藏缓冲区。

```
:ls 
```

将列出所有缓冲区及其状态（隐藏，...）

一些帮助：

```
:h only
:h hidden-buffer
:h ls 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2010-09-09T21:15:59.807

`:on`不关闭任何缓冲区。

它只关闭其他窗口。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-04-09T10:36:07.373

这不完全是您所要求的，但以下内容可能会产生理想的结果。它：

*   使当前选项卡成为唯一打开的选项卡 ( `:tabo`)
*   使选项卡中的窗口成为唯一打开的窗口 ( `:only`)
*   在打开的窗口中显示第一个缓冲区 ( `1 b`)
*   删除编号为 2 到 2000 ( `2,2000bd`)的缓冲区

    `:tabo | :only | 1 b | 2,2000 bd`

如果您打开的缓冲区超过 2000 个，请进行相应调整。

如果您只是想删除所有缓冲区，`1,2000bd`应该完成这项工作，但请注意，将为所有打开的选项卡和窗口创建新的空缓冲区。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-05-03T02:59:08.637

但这并不能保存缓冲区。也许:wqall！:xall！好一点。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-29T18:57:27.797

如果你碰巧让 VIM 完全卡住了，你应该仍然可以从 VIM 外部杀死它。

*   如果你能用 CTRL+Z 挂起 VIM，那么你可以用`kill %vim`
*   如果你不能暂停 VIM，你应该可以使用`ps`. 你可以杀死它：

```
$ ps -f -C vim
UID        PID  PPID  C STIME TTY          TIME CMD
nfellman 27273  7473  0 Jun24 pts/15   00:00:00 /nfs/iil/home/nfellman/vim/bin/vim a.pl
nfellman 37213  23747 0 Jun23 pts/15   00:00:00 /nfs/iil/home/nfellman/vim/bin/vim b.pl 
```

所以如果我想杀死正在编辑的 VIM，`a.pl`你可以这样做：

```
kill -9 27273 
```

这甚至应该在屏幕内工作

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2009-06-29T19:21:40.913

`:q!`

总是为我工作。

# ruby-on-rails - 使用已处理数据填充轨道的最佳实践

> ID：816180
> 
> 赞同：2
> 
> 时间：2009-05-03T02:49:44.027
> 
> 标签：ruby-on-rails, ruby, activerecord, dry

我已经在一个处理一些数据的程序上工作了几个月，现在它不是通过命令行显示信息（使用 ActiveRecord 存储），而是通过 Rails 显示处理后的信息应用程序。

我面临的第一个问题是我应该在同一个应用程序中还是在不同的应用程序中进行数据处理和数据显示。我很想拥有单独的应用程序，因为 rails 应用程序中的代码越少，出现安全问题的可能性就越小（出于优化原因，一些数据处理代码有点丑陋和不安全）。

第二个问题是如何处理数据库模式，如果我将其拆分为一个 Rails 显示应用程序和一个离线数据处理器。仅仅为 Rails 应用程序提供一个完全填充的数据库就足够了吗，还是我也应该为 rails 应用程序提供迁移和/或 schema.rb？

**编辑**：数据处理应用程序是 Wikipedia 的 Get to Philosophy 现象的[解析器](http://github.com/agrimm/philosophy-dump-parser/tree/master)。对于英文版，它需要一个 20GiB 的 XML 文件，并查看大约 600 万个页面如何相互链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T04:18:14.017

在没有更多上下文的情况下，真的不能说是否拆分应用程序。

关于第二个问题，您可以在没有架构和迁移的情况下正常工作，回到 Rails 0.5 天，在没有任何这些花哨的 schmancy 功能的情况下做得很好。

只需确保您有一个可靠的数据库架构，该架构同样适用于您的应用程序的两个部分（或两个应用程序，取决于您采用的方式）

# java - 如何使用侦听器访问其他元素？

> ID：816188
> 
> 赞同：3
> 
> 时间：2009-05-03T02:57:31.433
> 
> 标签：java, user-interface, listeners

我正在设置一个 GUI，我需要在其中获取从表单元素输入的信息并操作信息。这需要我使用一些元素来访问其他元素。

例如，我有一个输入框 ( `JTextField`) 和一个按钮 ( `JButton`) 在它旁边。当按下按钮时，我需要能够操作输入到输入框中的文本。到目前为止，我为完成这项工作所做的一切努力都失败了。

这就是我的代码现在的样子（我在评论中嵌入了我的问题）：

```
public class MyClass
{
    public static void main(String args[])
    {
        // Form elements are in here
        JTextField myTextField = new JTextField(10);
        JButton myTextFieldSubmit = new JButton("Submit");
        myTextFieldSubmit.addActionListener(new ListenerClass());
    }
}

class ListenerClass implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        // This is what happens when these elements are used
        // I need to be able to access the form elements from MyClass in here, but this doesn't seem possible with my current setup
        // For example, when the Submit button is pressed, I need to be able to myTextField.getText() and edit MyClass members
        // How should my setup be changed to accommodate these needs?
    }
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T03:06:01.583

这在很大程度上是一个可变范围问题。

目前，文本字段和按钮都在该`main`方法的范围内，因此拥有一个单独的类`ActionListener`将意味着它无法访问这些变量。

有几种方法可以实现这一点：

(1) 在 中创建一个内部类`ListenerClass`，`MyClass`并将`myTextField`和`myTextFieldSubmit`变成 的实例字段`MyClass`。

```
public class MyClass
{
  final static JTextField myTextField = new JTextField(10);
  final static JButton myTextFieldSubmit = new JButton("Submit");

  public static void main(String args[])
  {
    myTextFieldSubmit.addActionListener(new ListenerClass());
  }

  static class ListenerClass implements ActionListener
  {
    public void actionPerformed(ActionEvent e)
    {
      myTextField.setText("");
    }
  }
} 
```

(2) 在方法中创建一个匿名内部类`main`，这将允许`myTextField`和`myTextFieldSubmit`保持在同一个地方，只要它们被声明`final`。

```
public class MyClass
{
  public static void main(String args[])
  {
    final JTextField myTextField = new JTextField(10);
    final JButton myTextFieldSubmit = new JButton("Submit");

    myTextFieldSubmit.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e)
        {
            myTextField.setText("");
        }
    });
  }
} 
```

(3) 创建一个本地类，该类对`main`方法来说是本地的。同样，这将需要声明文本字段和按钮以`final`允许从内部类访问。

```
public class MyClass
{
  public static void main(String args[])
  {
    final JTextField myTextField = new JTextField(10);
    final JButton myTextFieldSubmit = new JButton("Submit");

    class ListenerClass implements ActionListener
    {
      public void actionPerformed(ActionEvent e)
      {
        myTextField.setText("");
      }
    }

    myTextFieldSubmit.addActionListener(new ListenerClass());
  }
} 
```

(4) 传递对 的引用`ListenerClass`，例如在构造函数中，以及创建`myTextField`和`myTextFieldSubmit`实例变量。

```
public class MyClass
{
  JTextField myTextField = new JTextField(10);
  JButton myTextFieldSubmit = new JButton("Submit");

  public MyClass()
  {
    myTextFieldSubmit.addActionListener(new ListenerClass(this));
  }

  public static void main(String args[])
  {
    new MyClass();
  }
}

class ListenerClass implements ActionListener
{
  MyClass myClass;

  public ListenerClass(MyClass myClass)
  {
    this.myClass = myClass;
  }

  public void actionPerformed(ActionEvent e)
  {
    myClass.myTextField.setText("");
  }
} 
```

(5) make`myTextField`和`myTextFieldSubmit`into`static`字段，并允许从`ListerClass`.

```
public class MyClass
{
  static JTextField myTextField = new JTextField(10);
  static JButton myTextFieldSubmit = new JButton("Submit");

  public static void main(String args[])
  {
    myTextFieldSubmit.addActionListener(new ListenerClass());
  }
}

class ListenerClass implements ActionListener
{
  public void actionPerformed(ActionEvent e)
  {
    MyClass.myTextField.setText("");
  }
} 
```

可能还有更多方法可以实现这一点，并且可能有更好的方法来实现这一点。您采用哪种方法的选择实际上取决于应用程序的所需设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T02:59:40.180

您可以将`MyClass`构造函数中的引用传递给`ListenerClass`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T03:03:17.673

您的问题对于在 Java 中出于任何目的使用侦听器都很常见：如何让处理程序访问通知侦听器或其对等方的对象。

一般有两种约定。

一种是直接从事件对象中获取对象。你可以用 getSource() 来做到这一点。但是你只会得到做到这一点的小部件。

另一种选择是让侦听器类能够访问小部件。一种方法是使用非静态内部类（这取决于您如何声明它），在这种情况下，它可以访问包含类的成员。

但是，在这种情况下，您的小部件是变量，而不是成员（您确定要这样做吗？）。因此，您唯一的解决方案是让成员将它们保存在 Listner 类中，然后在 addListener 调用中创建侦听器，而不是创建侦听器，传递相关的小部件，然后添加侦听器。侦听器现在可以通过他自己对存储在成员中的引用访问这些小部件。

# architecture - 用函数式语言实现 ESB（企业服务总线）

> ID：816190
> 
> 赞同：5
> 
> 时间：2009-05-03T02:58:40.027
> 
> 标签：architecture, functional-programming, erlang, esb

我希望 Stackoverflow 上的架构问题是合理的，所以我在这里问这个问题。

我一直在尝试查看函数式语言在面向数学的问题之外的哪些方面有用，我突然意识到 ESB（企业服务总线）对于 FP 语言来说是完美的，因为请求之间没有任何共享，根据我的经验，当初始消息进入并根据转换规则进行处理时。

有什么理由说明这是一个坏主意吗？

是否已经在进行中？

我相信像 Erlang 这样的东西的可扩展性可能非常有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T12:33:06.320

看看[RabbitMQ](http://www.rabbitmq.com)。它不是真正的 ESB，而是企业消息传递系统，但很有趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-03T03:15:18.503

很难说比“是的，你是对的”更有洞察力的了。Clojure 的第一个生产用途正是如此。

# c# - 构建器设计模式的实际用途是什么？

> ID：816193
> 
> 赞同：4
> 
> 时间：2009-05-03T02:59:56.637
> 
> 标签：c#, design-patterns, architecture

我已经阅读过它，我了解它的基本功能——我想知道这个模式的一个常见的、现实生活中使用的例子。

作为参考，我主要使用 Microsoft 堆栈处理业务应用程序、Web 和 Windows。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T03:13:31.440

想想一个行程构建者。您可以将很多东西添加到您的行程中，例如酒店、租车、航空公司航班，每个的基数都是 0 到 *。Alice 可能有汽车和旅馆，而 Bob 可能有两个航班，没有汽车和三个旅馆。

创建一个具体的工厂甚至是一个抽象的工厂来吐出一个行程是非常困难的。您需要的是一个工厂，您可以在其中执行不同的步骤，某些步骤会发生，而其他步骤则不会，并且通常会由于创建过程而产生非常不同类型的对象。

一般来说，你应该从工厂开始，只有当你需要对过程进行更高的粒度控制时才去建造者。

[此外， Data & Object Factory](http://www.dofactory.com/Patterns/PatternBuilder.aspx)有很好的描述、代码示例和 UML 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-03T03:15:40.313

关键用例：

*   当最终结果是不可变的，但是用构造函数来做这一切会太复杂
*   当我想部分构建一些东西并重用那个部分构建的东西，但每次都在最后定制它
*   当你从工厂模式开始，但是工厂正在构建的东西有太多的排列时

总之，builder 使您的构造函数保持简单，但允许不变性。

您说的是 C#，但这是一个简单的 Java 示例：

```
StringBuilder sb = new StringBuilder();
sb.append("Hello");
sb.append(" ");
sb.append("World!");
System.out.println(sb.toString()); 
```

相对于：

```
String msg = "";
msg += "Hello";
msg += " ";
msg += "World!";
System.out.println(msg); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T03:08:57.927

**编辑：你会在我的评论中看到我可能已经匆忙回答这个问题，并且在这个过程中让自己感到困惑。我将继续编辑它以与抽象工厂一起使用，正如我认为我最初打算的那样，但请注意，这主要是为了参考，不一定是对原始问题的回应。**

我见过的最常见的例子是关于如何构建 GUI 组件的。

例如，如果您正在为您的应用程序设计一个表单，其 GUI 组件可以采用多种表示形式（可能基于您运行的平台），您将设计一个抽象工厂来处理这些组件的创建。

为了向表单添加新控件，代码可能如下所示：

```
public MyForm ()
{
    GuiFactory  factory = new Win32Factory ();
    Button      btn = factory.CreateButton ();

    btn.Text = "Go!"
    btn.Location = new Point (15, 50);

    this.Controls.Add (btn);
} 
```

这满足了抽象工厂模式，因为您可以创建工厂对象的不同实例来创建所创建对象的不同表示，而无需更改客户端代码（这是一个基本示例，但我认为通常您不会使用 new 创建 Win32Factory，它将通过其他一些抽象获得）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T03:11:30.040

我们经常看到的一个常见示例是操作系统的“sysgen”。你有一个进程选择了你需要的所有模块，配置它们，并返回一个已定制的可引导映像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T03:20:44.153

我遇到的一个用例是拥有多个数据源时。特定情况涉及缓存和数据库。大部分数据是否从缓存中提取。第二个加载器查看数据以查看它是否是从缓存中加载的。它将查询数据库以完成填充数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-03T03:36:55.643

有时，为了理解它们，考虑与[软件无关的设计模式示例可能会有所帮助。](http://www.cours.polymtl.ca/inf3700/divers/nonSoftwareExample/patexamples.html)

我现在正在使用一个系统，它使用构建器来创建订单。订单是一个由其他几个类组成的类。我的构建器创建并验证关联的类，如果所有类都有效，则创建订单类的实例。通过这种方式，我可以确定我永远不会有缺少数据的订单实例。

# search-engine - 在我的网站上实施良好搜索的最快方法是什么？

> ID：816194
> 
> 赞同：0
> 
> 时间：2009-05-03T03:00:29.367
> 
> 标签：search-engine, cloud, agile

假设我有一个像 stackoverflow 这样的网站。我需要添加一个搜索功能，我需要它是好的。我不在乎是否必须添加徽标（例如，如果我使用谷歌搜索）。我有什么选择，最少的开发和最少的服务器类型依赖。
我目前正在使用 Lamp (php)。

编辑：
对不起，但我说的是一个开源应用程序，每个用户都在他的服务器机器上安装它（因此要求不是特定于服务器的）。goolge搜索，据我所知，我必须先订阅它，一个我希望用户不必做的过程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T03:01:51.720

最简单的方法是添加自定义 Google 搜索。

[http://www.google.com/coop/cse/](http://www.google.com/coop/cse/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T03:04:51.103

未经测试，但过去这样的事情对我有用：

```
<form action="http://www.google.com/search" onSubmit="this.q.value+=' site:mysite.com';return true">
<input name="q" />
</form> 
```

否则，也许是这样：[http ://www.google.com/sitesearch/](http://www.google.com/sitesearch/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T04:29:27.903

好的，所以您在评论中添加了您希望将搜索集成到桌面应用程序中的内容。我过去使用[ht://Dig](http://www.htdig.org/)取得了相当大的成功，但它似乎失去了一些动力。更高级的现代应用程序倾向于使用需要大量集成的[Apache Lucene 。](http://lucene.apache.org/java/docs/)

如果您正在寻找更高级别的东西，请查看[solr](http://lucene.apache.org/solr/)，它将自己归类为“开源企业搜索服务器”。

# sql-server - 备份 SQL08 DB 时出现错误 1815

> ID：816202
> 
> 赞同：1
> 
> 时间：2009-05-03T03:05:42.550
> 
> 标签：sql-server, backup

我正在尝试将 SQL08 数据库备份到远程驱动器上的目标，并一直以错误原因“1815”结束。在编写备份脚本或使用任务向导 GUI 时会发生这种情况。尝试将 UNC 或共享驱动器号用于同一路径时也会发生这种情况。网络上的另一台机器备份到同一路径没有问题。网络位置具有对所有人开放的写访问权限。有任何想法吗？

顺便说一句，成功的机器是在 Vista 上运行的服务器 2008 VPC，而失败的机器只是直接在 XP 主机上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-03T11:47:26.853

检查运行 sql server 的服务帐户对 UNC 的写访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-03-04T08:00:55.743

我认为你有一个现有的备份重命名它并再次执行

# symfony1 - php symfony 从 mysql 获取 blob 图像数据

> ID：816207
> 
> 赞同：1
> 
> 时间：2009-05-03T03:07:09.273
> 
> 标签：symfony1, blob

如何从具有 blob 图像的 mysql db 获取图像数据字符串？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T20:19:47.550

假设您使用 Symfony 附带的默认 ORM (Propel)，$your_object->getImage()* 应该返回您存储在数据库中的任何 blob 值。

您可能已经知道这一点并且这不是一个选项，但是您是否考虑过将图像存储在目录中并使用数据库来存储图像的路径？

*假设'image'是database/schema.yml中的字段名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T10:30:07.970

将图像存储在数据库与文件系统中总是存在激烈的争执。

将它们存储在数据库中更安全（如果您需要保护对它们的访问），但通常您需要包装器来读取它们并将它们显示在标签中（如果您这样做的话）。

有很多优点和缺点......取决于你的需要什么更好。

是的，sjobe 的 $x->getImage() 足以获得 blob 内容。

# c# - WCF：什么是 ServiceHost？

> ID：816211
> 
> 赞同：39
> 
> 时间：2009-05-03T03:09:36.817
> 
> 标签：c#, wcf, web-services, servicehost

由于我目前正在学习使用 WCF 服务，因此我经常在互联网上遇到教程，其中提到`ServiceHost`在使用 WCF 服务时使用 a 。

**这到底是什么`ServiceHost`？**

* * *

在我当前的项目中，我正在使用 WCF 服务并从我的应用程序中引用它，每当我想从我的应用程序中使用它时，我只需`ServiceClient`像这样实例化它：

```
new MusicRepo_DBAccess_ServiceClient(new InstanceContext(instanceContext), customBinding, endpointAddress); 
```

然后从该实例访问我的网络方法（`OperationContract`s）（显然在使用方法之前打开它，然后用 and 关闭`Open`它`Close`）

我的 WCF 服务托管在我的 IIS 中，我只需`.svc`从我的应用程序访问`ServiceClient`.

那么为什么以及在哪里`ServiceHost`使用呢？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-03T03:27:09.990

ServiceHost 基本上为您提供了在非 IIS 或 WAS 设置中托管 WCF 服务所需的一切。ServiceHost 的常见位置是控制台应用程序或 Windows 服务。请参阅 MSDN 中的示例代码，了解[如何在控制台应用程序中设置 ServiceHost](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehost.aspx)。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-05-03T08:15:10.093

您的服务实现只是一个 .NET 类 - 您需要为它提供一个运行时环境，以便它可以以某种方式执行。这就是 ServiceHost 的用途——它将加载您的服务类，设置端点和通道侦听器以及所有这些东西，从而为您的服务类提供一个“生态系统”来生存和运行。

您可以自己在控制台应用程序、Windows 服务甚至 Winforms 应用程序中实例化 ServiceHost 类，从而使您的 WCF 服务类对外部世界可用 - 或者您可以将该工作委托给 IIS 或 WAS。甚至 IIS 或 WAS 也将使用 ServiceHost 来托管您的 WCF 服务——它们只是在后台自动执行，并且“按需”——只要有对您的 WCF 服务的请求。

马克

# python - Python/Ruby 作为移动操作系统

> ID：816212
> 
> 赞同：10
> 
> 时间：2009-05-03T03:09:58.593
> 
> 标签：python, ruby, mobile, operating-system, dynamic-languages

我想知道为什么不编写智能手机/移动设备操作系统以允许选择动态语言？iPhone 使用 Objective-C，Google Android 使用 Java，Windows Mobile 使用任何形式的 .NET 语言。

使用 Python、Ruby 或任何其他动态语言编写的移动操作系统背后的原因是什么？我知道在低级别他们不会削减它，但 C 或 C++ 会很好，例如 Python 可能是与之交互的顶层。我的意思是，有 Jython 或 CPython。

我只是想知道为什么我们在当今的移动操作系统中看不到更多的动态语言支持。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-03T03:26:56.573

总的来说，就是所有这些。内存、速度，以及可能最重要的程序员熟悉度。苹果在 Objective C 上投入巨大，Java 基本人人皆知，C# 也很流行。如果您正在尝试吸引大众程序员，那么从流行的东西开始是有意义的，即使它有点无聊。

实际上没有任何技术要求阻止它。我们可以编写一个完整的 Ruby 堆栈，让程序员在 C 中重新实现慢速位，这没什么大不了的。对于任何正在开发移动操作系统的公司来说，这都是一项投资，最终我不确定他们会从中获得多少收益。

最后，它是移动设备的开端。5 年后，看到更广泛的移动堆栈，我一点也不感到惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T15:54:28.087

与问题的前提相反：最早的主流移动设备之一是[Newton](http://en.wikipedia.org/wiki/Apple_Newton)，它被设计为使用一种称为[NewtonScript的专用动态语言](http://en.wikipedia.org/wiki/NewtonScript)用于应用程序开发。Newton 开发环境和语言使得应用程序协同工作和共享信息变得特别容易——这几乎与当前的 iPhone 体验截然相反。尽管许多从头开始编写新的 Newton 应用程序的开发人员非常喜欢它——NewtonScript“感觉”很像 Ruby——但 Newton 存在一些性能问题并且移植现有代码并不容易，即使在 Apple 后来添加了将 C 代码合并到一个 NewtonScript 程序。此外，在 Newton 上保护自己的知识产权非常困难——其他开发人员在大多数情况下可以查看你的代码，甚至一时兴起覆盖其中的一部分——这是一场安全噩梦。

**牛顿是商业上的失败。**

Palm 采纳了 Apple 的一些最佳创意并对其进行了改进，但放弃了动态语言支持作为整体简化的一部分，最终导致 PalmOS 获得了大部分移动市场份额（多年来），因为独立移动软件开发商蜂拥而至。新平台。

*Newton 失败的原因*有很多，但有些可能会归咎于 NewtonScript。Apple 在 iPhone 上“思考不同”，他们似乎做出的早期决定之一是尽可能利用现有的核心开发人员基础，让人们更容易在 Objective C 中进行开发。如果 iPhone 正式上市对动态语言的支持，这将是在经过长时间和仔细考虑如何在提供安全和高性能平台的同时最好地做到这一点之后添加的。

在他们这样做 5 分钟后，其他人就会跟随。:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-03T17:59:39.330

移动设备上多种语言的情况比问题所暗示的要好。如今，即使在相当便宜的手机中也可以使用 Java（在其 J2ME 中）。Symbian S60 正式支持[Python](http://opensource.nokia.com/projects/pythonfors60/)和[Javascript 的小部件](http://www.forum.nokia.com/Resources_and_Information/Explore/Web_Technologies/Web_Runtime/)，还有一个 Ruby 端口，虽然它仍然是相当实验性的。Charles Nutter 已经尝试[让 JRuby 在 Android 上运行](http://blog.headius.com/2009/02/domo-arigato-mr-ruboto.html)。 [rhomobile](http://rhomobile.com/home)声称允许在 Ruby 中开发一个应用程序，然后该应用程序将在*所有*主要的智能手机操作系统上运行，尽管这种可移植性声明意味着对这些应用程序可以实现的功能的限制。

区分移动操作系统（执行诸如共享和保护资源之类的操作系统工作）和运行时平台（为用户编写的应用程序提供工作环境和一组 API）是很重要的。一个操作系统可以支持多个运行时，例如如何在 Windows 中同时运行 C++ 和 Java 应用程序，即使 Windows 本身是用 C++ 编写的。

运行时将具有不同的性能特征，并或多或少地暴露操作系统和硬件的能力。例如，J2ME 可在大量设备上使用，但在许多设备上，J2ME 运行时不提供对摄像头的访问或进行调用的能力。“本机”运行时（即应用程序使用与操作系统相同的语言编写的运行时）在这方面没有什么不同：“本机”应用程序可以做什么取决于运行时允许什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T03:15:14.917

越狱的 iPhone 可以安装 python，实际上我经常使用 python。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-03T03:17:37.953

我认为性能问题可能是部分原因，但不是全部原因。移动设备没有非常强大的硬件可供使用。

不过，我对此部分不确定。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-03T03:21:07.443

最紧迫的问题之一是垃圾收集。垃圾收集经常会在嵌入式机器中引入不可预知的停顿，这些停顿有时需要实时性能。

这就是为什么有一个 Java Micro Edition 有一个不同的垃圾收集器，它减少了暂停以换取更慢的程序。

Refcounting 垃圾收集器（如 CPython 中的垃圾收集器）也不太容易出现暂停，但当具有许多嵌套指针（如链表）的数据被删除时可能会爆炸。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-03T17:35:38.543

webOS——Palm 的新操作系统，将在 Pre 上首次亮相——让您可以针对 JavaScript 中的 webkit 运行时编写应用程序。时间会证明它有多成功，但我怀疑它不会是第一个走这条路的。随着移动设备变得越来越强大，您会看到动态语言变得越来越流行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-10-02T22:08:35.963

Rhomobile 的开源[Rhodes](http://rhomobile.com/products/rhodes)框架今天提供了这一功能。世界上第一个适用于所有智能手机的 Ruby 实现。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-03T03:13:13.377

我怀疑基本原因是安全性和可靠性的结合。您不希望有人能够轻易破解手机，并且您希望对正在安装的内容有所控制。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-03T03:20:08.523

记忆力也是一个重要因素。不幸的是，在 Python 中很容易吃掉内存。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-03T03:33:22.297

有很多原因。其中：

*   商业原因，例如软件锁定策略，
*   效率：动态语言通常被认为更慢（在某些情况下确实更慢，或者至少限制了你可以做的优化量。在移动设备上，优化代码比在 PC 上更需要)，并且倾向于使用更多内存，这对于内存有限且缓存很少的便携式设备来说是一个重要问题，
*   保持开发简单：一个开箱即用支持 Python、Ruby 和 Java 的平台：
    *   意味着三次编写文档和提供支持的工作，
    *   将开发工作分为三部分；有用的材料需要更长的时间才能出现在网络上，并且在您的平台上使用与您相同的语言的开发人员较少，
    *   需要更多的设备存储空间来支持所有这些语言，
*   需要说服管理层。我一直觉得 Java 的优点很容易向非技术观众解释。.Net 和 Obj-C 似乎也分别是 Microsoft 和 Apple 平台的一个非常自然的选择。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-07-02T23:59:40.030

My Palm 有一个[Lua 实现](http://en.wikipedia.org/wiki/Plua)，可以让你做合理的 GUI，一个相当无用的旧 Python 1.5，一个[极好的 Forth](http://www.quartus.net/products/forth/)（它允许你生成编译的应用程序）和一个允许完成 GUI 开发的[Scheme 。](http://www.lispme.de/lispme/)

在最近的 Apple WWDC 2009 上，Symbian 联盟第一天在相邻的建筑物中举办了一场活动，为每个人免费赠送[诺基亚 5800 ，](http://europe.nokia.com/find-products/devices/nokia-5800-xpressmusic)*甚至只是为了营销宣传午餐*- 一部 350 美元的手机。该活动是为[Ovi 商店](http://store.ovi.com/)推销开发，他们在那里有开发人员，下午还有一场编程比赛。

他们强调用于 Symbian 开发的三种语言是 Java、Flash (lite) 和[Python](http://www.forum.nokia.com/Tools_Docs_and_Code/Tools/Runtimes/Python_for_S60/)。Python 是允许您在设备[或 PC](http://people.csail.mit.edu/kapu/symbian/python.html)上工作的唯一选项，并且包含具有 OpenGL ES 和其他电话功能的示例。

借助将 Python 应用程序捆绑到可以在商店中托管的独立应用程序的实用程序，我想说 S60 上的 Python 在（仍然）占主导地位的平台上是*严肃动态语言的竞争者。*

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-07-03T00:12:49.350

OpenMoko Freerunner 有一个名为 SHR 的 Linux 发行版。它的大部分设置和框架代码都是用 python 编写的，而且……嗯，它不是很快。这是可以忍受的，但从一开始就计划在 Vala 重写它。

另一方面，我的几个小型应用程序运行速度足够快（唯一的缺点是启动时间长）可以考虑使用 python 来开发用户应用程序。

记录一下：Freerunner 有 400MHz 的 ARM 和 128MB 的 RAM。我想一旦移动设备超过 1GHz，像 Python 这样的语言对于中级的东西也足够快（低级是内核）。

# xss - 防止 XSS 漏洞的措施（就像几天前的 Twitter 一样）

> ID：816224
> 
> 赞同：7
> 
> 时间：2009-05-03T03:16:49.873
> 
> 标签：xss

即使是像 Twitter 这样的知名网站也存在 XSS 漏洞，我们应该怎么做才能防止这种攻击呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-03T04:13:59.330

您可以做的第一件事是将您的 cookie 设置为仅 HTTP ......这至少可以防止会话 cookie 劫持。当您可能是自己网站的管理员时，就像有人窃取您的 cookie 一样。

剩下的就是验证所有用户输入。

*   规则 #0 - 切勿插入不受信任的数据，除非在允许的位置
*   规则 #1 - 在将不受信任的数据插入 HTML 元素内容之前进行 HTML 转义
*   规则 #2 - 在将不受信任的数据插入 HTML 通用属性之前进行属性转义
*   规则 #3 - 在将不受信任的数据插入 HTML JavaScript 数据值之前 JavaScript 转义
*   规则 #4 - 在将不受信任的数据插入 HTML 样式属性值之前进行 CSS 转义
*   规则 #5 - 在将不受信任的数据插入 HTML URL 属性之前进行 URL 转义

在这里详细讨论的非常冗长的主题：

[http://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet](http://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)

[http://www.owasp.org/index.php/Cross_site_scripting](http://www.owasp.org/index.php/Cross_site_scripting)

XSS 只是众多漏洞利用之一，每个 Web 开发人员都应该牢记前 10 名 OWASP，恕我直言

[http://www.owasp.org/index.php/Top_10_2007](http://www.owasp.org/index.php/Top_10_2007)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T20:32:31.923

就像您可以通过使用准备好的语句使 SQL 注入成为非问题一样，您可以通过使用执行类似操作的模板引擎（DOM 序列化程序）使 XSS 非问题。

设计您的应用程序，以便所有输出都通过模板引擎。使模板引擎默认对所有数据进行 HTML 转义。这样，您将拥有默认安全的系统，并且不依赖于人类（以及大型系统的其余部分）勤奋地转义 HTML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T03:53:15.167

我不知道你用什么来写你的代码，但如果你使用 asp.net，你会被部分覆盖。asp.net 有他们所谓的请求验证，当启用时，它可以防止通过用户输入引入恶意脚本。

但有时，您必须允许使用某种文本编辑器，例如您在此问题中键入的那种。在这种情况下，您必须部分禁用请求验证以允许最终用户输入一些“富文本”html。在这种情况下，您将不得不构建某种白名单过滤机制。

仅供参考，我不知道其他人，但 Microsft 有一个名为 Anti-Xss 的库。

# java - 循环函数在 Java 类中的行为不符合预期

> ID：816226
> 
> 赞同：1
> 
> 时间：2009-05-03T03:19:32.440
> 
> 标签：java, class, methods, public

所以我做了一个圆形类来设置半径，并且应该输出半径，周长和面积但是，如果我输入半径，半径，周长，面积不会输出回来，它只显示为 0.0 继承人我的 Circle.java

```
public class Circle
{
    private double radius;
    private double PI = 3.14159;

    public void setRadius(double rad)
    {
            radius = rad;
    }

    public double getRadius()
    {
            return radius;
    }

    public double getArea()
    {
            return PI * radius * radius;
    }

    public double getDiameter()
    {
            return 2 * radius;
    }

    public double getCircumference()
    {
            return 2 * PI * radius;
    }

} 
```

和 heres circledemo.java [http://pastie.org/466414](http://pastie.org/466414) -formatting 在这里不好

首先我输入半径，但是当我调用 getRadius、圆周、面积时，它只输出 0.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T04:42:49.120

让我们一步一步地看一下程序的执行。首先，初始化一些变量，然后创建一个 Scanner 对象。接下来，您进入一个`while`循环。在 while 循环中，您显示主菜单，从键盘读取输入，**创建一个新的 Circle 对象**，然后处理您收到的输入。并且您一直这样做，直到`flag`设置为`false`，在这种情况下程序退出。

注意到这里有什么奇怪的吗？

变量只存在于声明它的范围内，而您的 Circle 对象是在 while 循环*内声明的。*请记住，while 循环的主体代表 while 循环*的****一次迭代***。因此，本质上，您的 Circle 对象正在一遍又一遍地重新创建，这就是为什么没有效果。*`setRadius()`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T04:52:59.017

在while 循环之外创建Circle 对象实例（即代码Circle one = new Circle()）。循环的每次迭代都会导致对象以新状态（即新半径）重新创建。

# .net - 从 .NET 可执行文件加载类型

> ID：816227
> 
> 赞同：2
> 
> 时间：2009-05-03T03:19:57.977
> 
> 标签：.net, reflection

与从编译成 .dll 的 .NET 程序集加载类型相比，从可执行 (.exe) 的 .NET 程序集动态加载类型是否有任何影响？

如果 .exe 和 .dll 是否是 .NET 可执行文件（只是不是 BadImageFormatException 的忠实拥护者），那么测试 .exe 和 .dll 的最佳和最快的方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T03:25:03.830

EXE 和 DLL 文件在 Windows 中没有太大区别，在 .NET 中更是如此。它本质上只是入口点是什么以及其他一些细节的问题。（.NET DLL 确实有一个入口点，但您没有实现它。在本机代码中，它称为 DllMain。）

至于测试它是否是 .NET 程序集，我建议简单地尝试加载它以仅用于反射并捕获异常。但是，如果您真的想避免这种情况，请查看[此博客条目](http://geekswithblogs.net/rupreet/archive/2005/11/02/58873.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T08:03:51.523

使用 exe 托管类型有一个重要的考虑因素……VS2005 不太支持它。编译器 (csc)、运行时等都没有发现真正的问题 - 只是 IDE 对添加对 exe 文件的引用不太满意。

这在 VS2008 中已修复，但如果您需要支持 VS2005 开发人员，我建议您使用 dll 作为参考。

在装配级别上，没有很大的差异。

为了区分两者（exe / dll） - 检查程序集上的入口点：

```
using System;
using System.Reflection;
using System.Net;

class Program {
    static void Main() {
        IsItAnExe(typeof(Program).Assembly); // this one ;-p
        IsItAnExe(typeof(string).Assembly); // mscorlib
        IsItAnExe(typeof(WebClient).Assembly); // System
    }
    static void IsItAnExe(Assembly assembly) {
        MethodInfo entryPoint = assembly.EntryPoint;
        Console.WriteLine(assembly.GetName().Name + ": " +
            (entryPoint == null ? "no entry-point" :
            (entryPoint.DeclaringType.FullName + "." + entryPoint.Name)));
    }
} 
```

# c++ - 从头到尾遍历 (C++ LL Q:1)

> ID：816232
> 
> 赞同：1
> 
> 时间：2009-05-03T03:21:02.343
> 
> 标签：c++, linked-list

* * *

```
int LinkedList::DoStuff()
{
Node *Current    = next_;
while ( Current != NULL )
    {
        Current = Current->next_;
        length_++;
    }
    // At the last iteration we have reached the end/tail/last node
    return length_;
} 
```

* * *

除了最后一个节点之外没有更多的节点。我怎样才能遍历到前端的尾端？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T03:38:28.697

除非您的链表是双向链表，否则这很难做到。递归是一种方法，假设您没有太大的列表以至于您将用完堆栈空间，就像这样（伪代码）：

```
DoStuffBackwards (currNode) {
    if (currNode != NULL) {
        DoStuffBackwards (currNode->next);
        // Process currNode here.
    }
}

DoStuffBackwards (firstNode); 
```

这是有效的，因为你一直调用`DoStuffBackwards()`下一个节点，直到你用完列表，然后当你回滚递归堆栈时，你处理每个节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T04:47:15.083

如果您只想从最后一个节点倒退到当前节点，那么 Pax 的答案（使用递归）是您最好的选择，另请参阅下面的我的版本。如果您的当前节点不是您的非循环单链表的头，并且您想从当前节点转到头节点，那是不可能的。

```
int LinkedList::DoStuff()
{
    return DoStuffBackward(next_, 0);
}

int LinkedList::DoStuffBackward(Node* node, int n)
{
    if (!node)
    {
        return n;
    }

    int len = DoStuffBackward(node->next_, n + 1);
    std::cout << "doing stuff for node " << n << std::endl;
    return len;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T06:36:37.647

这有家庭作业的味道，所以没有代码，但这里是一个不需要递归的解决方案的概述：

如果您想向后遍历列表，则在遍历列表以找到结尾时，可以选择重新链接列表以向后指向。然后，当您重新遍历列表（它以与原始列表相反的顺序访问节点）时，您重复与以前相同的重新链接，并且列表以其原始顺序结束。

这在概念上很简单，但是正确处理指针和链接（尤其是在列表的开头和结尾处）可能有点棘手。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T03:23:29.000

您的链表类是双向链接的还是单链接的？如果每个节点内部没有*前一个*指针，则不能向后遍历。

我还建议您发布更多代码并花时间使您的问题易于阅读。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T06:53:46.420

递归可以工作，就像构建一个辅助数据结构一样，例如一个数组，原始列表的每个元素都有一个条目。如果您想要一个不需要 O(n) 额外存储的单线程列表解决方案，最好的办法是按照 Michael 的建议将列表反转到位。我为此写了一个例子，[但考虑到对家庭作业的关注，我会省略它]。关于反转列表的一个注意事项：如果有任何其他数据结构包含指向原始列表的指针，并且您可能在遍历期间访问它们，如果它们需要在反转列表时访问它们，它们将无法工作，而这如果他们尝试修改列表，可能会导致数据损坏。

更新：好的，这是（C++）例程来反转一个列表。不过，它还没有经过测试。而且我会注意，如果这是家庭作业，发帖人仍然需要弄清楚如何正确使用此例程才能获得完整的答案。

```
Node *ReverseList(Node *head) {
    // Reverse a single-threaded list in place, return new head
    Node *prev=NULL;
    Node *cur=head;

    while (Node *next=cur->next_) {
        cur->next_ = prev;
        prev = cur;
        cur = next;
    }
    cur->next_ = prev;
    return cur;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-03T11:27:56.323

将列表推入堆栈，然后将它们弹出。

# sql - 有没有Oracle的“rowid”伪列概念的开源SQL数据库？

> ID：816234
> 
> 赞同：3
> 
> 时间：2009-05-03T03:21:25.790
> 
> 标签：sql, database, oracle, rowid

我知道 MySQL 和 PostgreSQL[1]*没有*这个概念，所以我有兴趣找出一个开源 SQL 数据库确实有这个概念。

[1] 后来有人指出PostgreSQL确实有rowid伪列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T12:57:06.640

`PostgreSQL`确实有这个概念。

请参阅[**此处**](http://www.commandprompt.com/ppbook/x4636)以获取您感兴趣的伪列的简要列表`PostgreSQL`：`ctid`

> `ctid (tuple identifier)`
> 
> 描述元组在数据库中的物理位置的标识符。一对数字由 ctid 表示：块号和该块内的元组索引。

那是`Oracle`'s 的直接模拟`rowid`。

至于`MySQL`，行的物理位置不可用于前端。

in `MyISAM`,`rowid`只是从开头开始的文件偏移量，这就是存储在索引叶子中的内容。

在`InnoDB`中，表是`index organized`设计使然，这意味着它们始终具有某种主键，并且`InnoDB`表上的索引将其`PRIMARY KEY`用作行指针。

`Oracle`对于的表也是如此`index organized`，其中 a`rowid`不是指向数据文件中块的物理指针，而是一个这样的称为`logical ROWID`，或`UROWID`

如果您`ROWID`从 中的`INDEX ORGANIZED`表格中选择 a `Oracle`，您将看到它具有不同的格式（类似于`*BAEBwPICwQL+`）。这实际上是一个编码`PRIMARY KEY`值。

请注意，如果您没有将任何列定义为`PRIMARY KEY`,`MySQL`将创建一个隐藏的代理项`PRIMARY KEY`，您将永远无法控制它。

`PRIMARY KEY`这就是为什么您应该始终在表中创建某种类型的 a `InnoDB`：它是免费的，并且您可以控制该列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T03:26:25.170

如果他们都没有这样做，那么其他人也不会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T03:30:16.457

SQLite 有一个自动递增的“ROWID”列，您可以使用 ROWID、_ROWID 或 OID 访问该列。如果您定义一个整数主键，那么它们将被别名。

# c# - OpenID 登录帮助按钮

> ID：816241
> 
> 赞同：1
> 
> 时间：2009-05-03T03:23:54.130
> 
> 标签：c#, asp.net-mvc, openid

如果您已经在使用像 DotNetOpenId 这样的库，是否有一种简单的方法来实现类似于[stackoverflow](https://stackoverflow.com/users/login?returnurl=/)和[uservoice登录页面上的按钮的 OpenID 登录“帮助按钮”？](http://uservoice.com/session/new)看起来[RPX](https://rpxnow.com/)解决了一半的问题，但它需要重新实现登录代码才能使用他们的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-07T20:26:14.310

还有一些开源替代品，它们都依赖于 jQuery：

[openid-selector](http://code.google.com/p/openid-selector/)是早期版本。

[openid-realselector](http://code.google.com/p/openid-realselector/)是一个更类似于 jQuery 的重写，更好看，但样式较少。

两者都完全是 JavaScript，因此它们独立于您的服务器端选择。

# asp.net - ZedGraph 标签

> ID：816256
> 
> 赞同：2
> 
> 时间：2009-05-03T03:28:35.740
> 
> 标签：asp.net, controls, charts, zedgraph

在 ZedGraph 中，我如何显示每个点的文本标签，并`XAxis`一起显示？

如果我做

```
myPane.XAxis.Type = AxisType.Text;
myPane.XAxis.Scale.TextLabels = array_of_string; 
```

我在 XAxis 上得到这样的标签

![在此处输入图像描述](https://i.stack.imgur.com/RdFvG.png)

如果我这样做

```
for (int i = 0; i < myCurve.Points.Count; i++)
{
    PointPair pt = myCurve.Points[i];
    // Create a text label from the Y data value
    TextObj text = new TextObj(
        pt.Y.ToString("f0"), pt.X, pt.Y + 0.1,
        CoordType.AxisXYScale, AlignH.Left, AlignV.Center);
    text.ZOrder = ZOrder.A_InFront;
    text.FontSpec.Angle = 0;
    myPane.GraphObjList.Add(text);
} 
```

我在曲线上得到标签，像这样

![替代文字，Pointlabel.png](https://i.stack.imgur.com/3i6dC.png)

但如果我同时做这两件事，曲线上的标签就会消失。

有没有办法结合这两种标签？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-03T05:39:19.470

在您澄清问题后，我已经更改了答案。您只需要记住正确放置标签：

```
<%
  System.Collections.Generic.List<ZedGraphWebPointPair> points = new System.Collections.Generic.List<ZedGraphWebPointPair>();
  for (int i = 0; i < 15; i++)
  {
    // Let's have some fun with maths
    points.Add(new ZedGraphWebPointPair
    {
      X = i,
      Y = Math.Pow(i - 10, 2) * -1 + 120
    });
  }

  System.Collections.Generic.List<string> XAxisLabels = new System.Collections.Generic.List<string>();

  TestGraph.CurveList.Add(new ZedGraphWebLineItem { Color = System.Drawing.Color.Red });
  TestGraph.XAxis.Scale.FontSpec.Size = 9;

  int j = 1;
  foreach (ZedGraphWebPointPair point in points)
  {
    // Add the points we calculated
    TestGraph.CurveList[0].Points.Add(point);

    // Add the labels for the points
    TestGraph.GraphObjList.Add(new ZedGraphWebTextObj
    {
      Location =
      {
        CoordinateFrame = ZedGraph.CoordType.XChartFractionYScale,
        // Make sure we position them according to the CoordinateFrame
        X = Convert.ToSingle(j) / points.Count - 0.05f,
        Y = Convert.ToSingle(point.Y) + 3f,
        AlignV = ZedGraph.AlignV.Top
      },
      Text = point.Y.ToString(),
      FontSpec = { Angle = 90, Size = 9, Border = { IsVisible = false } }
    });

    // Add the labels for the XAxis
    XAxisLabels.Add(String.Format("P{0}", j));

    j++;
  }

  TestGraph.RenderGraph += delegate(ZedGraphWeb zgw, System.Drawing.Graphics g, ZedGraph.MasterPane mp)
  {
    ZedGraph.GraphPane gp = mp[0];
    gp.XAxis.Type = ZedGraph.AxisType.Text;
    gp.XAxis.Scale.TextLabels = XAxisLabels.ToArray();
  };

%> 
```

该代码将生成此图：

[![ZedGraph 示例](https://i.stack.imgur.com/fimy9.png)](https://i.stack.imgur.com/fimy9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-06-09T08:37:56.670

如果轴类型是文本，下面的代码更容易获得点的 x 坐标；）

```
for (int tPoint = 0; tPoint < curve.Points.Count; tPoint++)
{
    TextObj text = new TextObj(curve.Points[tPoint].Y.ToString(), curve.Points[tPoint].X, curve.Points[tPoint].Y + 10);
} 
```

# emacs - 无法直接从终端在 Emacs 上打开手册

> ID：816257
> 
> 赞同：0
> 
> 时间：2009-05-03T03:28:40.157
> 
> 标签：emacs, manuals

我想直接在终端中打开手册到 Emacs

```
man man 
```

我将以下代码作为别名放入 .zshrc 失败

```
alias man=x
unalias man  
man() { emacs ^x man } 
```

**如何打开 emacs 的手册？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-03T05:53:31.853

也许这就是你的意思：

```
function man() { emacs -eval "(progn (setq Man-notify-method 'bully) (man \"$1\"))" } 
```

`setq`只是为了使手册页隐藏缓冲区`*scratch*`；如果你不想那样，那就足够了

```
function man() { emacs -eval "(man \"$1\")" } 
```

如果要从命令行调用 Emacs 函数，必须将函数调用写在 elisp 中；你不能只在命令行上给出 Emacs 键序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T03:38:47.213

我不确定我是否完全理解您的问题，但是您可以在 emacs 中打开一个手册页，只需在`M-x man`要查看的手册页之后执行。如果您想直接从命令行执行此操作，我想设置一个脚本来执行此操作不会太难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T05:52:30.997

```
alias man 'emacs -e man' 
```

查看信息页面的[这一](http://www.gnu.org/software/emacs/manual/html_node/emacs/Initial-Options.html)部分（以及以下部分）以获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T03:40:02.563

几种可能性，具体取决于您希望手册页的格式：

```
man man > /tmp/man
emacs /tmp/man 
```

或者

```
zcat `man -w man` | nroff > /tmp/man
emacs /tmp/man 
```

或者

```
emacs `man -w man` 
```

# architecture - 良好的架构面试问题

> ID：816258
> 
> 赞同：34
> 
> 时间：2009-05-03T03:28:54.070
> 
> 标签：architecture

面试时可以问哪些好问题，以了解申请人对建筑的了解程度？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-05-03T03:47:45.227

架构不仅仅是一个琐碎的问题（例如，设计模式的使用），而且比其他面试主题更主观。通常没有一个正确的架构，因此评估某人变得更加棘手。你能得到的最多的是对受访者的想法的了解。

我建议您向受访者描述您（面试官）最熟悉的复杂产品或产品的一部分。然后让他想想他将如何构建它并解释他的推理，然后专注于具体的决定并提出问题。

当然，只有在以下情况下才这样做：

*   您愿意听取其他不属于您自己的设计。
*   您能够接受潜在的批评并承认您自己的设计可能不完美

一个额外的好处是，如果他被雇用，你会看到你如何处理分歧。

如果您的产品曾经被重新架构过，另一种方法是描述旧版本的架构并询问受访者他将如何重新架构它。如果结果接近当前架构，则候选人更有可能非常适合您团队的风格和心态。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-05-03T04:53:35.897

假设您已经检查了他们的文化/个性契合度和发展技能，我建议您执行以下操作：

1.  要求候选人描述他们实际设计和/或实施的中大型系统的架构。围绕他们所做的设计权衡提出探索性问题。

2.  为候选人提供具有多个已知缺陷的系统设计。它可以是你编造的，也可以是众所周知的。假设他们没有时间或金钱限制，要求候选人找出缺陷并重新设计系统。

3.  向候选人展示一组重要系统（即用于在医院环境中审查医学图像的分布式系统）的要求利益相关者（您）的要求，并在其设计中做出适当的权衡。

这些都不能保证你会选择最好的“建筑师”（我和乔尔和杰夫的标题建筑师有同样的问题）。但是，这些绝对是很好的过滤技术，应该可以帮助您为您的团队确定具有有价值特征的人。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-05-03T03:49:00.933

1.  询问他们在“社区”中追随和钦佩谁的建筑能力，为什么？这将使您了解他们的建筑风格的哲学倾向。此外，如果他们不能说出任何人的名字或为什么钦佩他们，那是一个很大的危险信号，因为他们显然没有跟上社区的最佳实践和进步。
2.  要求他们用与面试相关的架构设计模式来命名一些问题/缺点/权衡。如果他们不能做到这一点，这是一个危险信号，因为他们可能在不知不觉中无能（即：一个狂热的男孩），而不是在这个领域拥有真正的经验和洞察力。命名给定架构带来的优势要容易得多，而真正理解劣势则需要更深入的了解。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-05-03T03:31:59.557

“所以，我不会在这里和你开玩笑：你能告诉我一些能让我相信你对建筑很了解的事情吗？”

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-03T04:08:59.543

我有点担心你的问题。乍一看，我会建议类似“请描述中西部草原形式对现代工艺美术设计的影响”。

从脸颊上移开舌头，我建议克里斯在上面做了什么。为候选人提供与您和您的团队就与您的工作相关的架构设计进行互动的机会。如果你觉得没有能力根据看到他们解决问题而不是解决问题来判断他们的能力，那么你需要让其他人参与面试。或者从 Joel 和 Jeff 的书中翻页，从“架构”这个术语开始，开始寻找称职的软件工程师。

在我看来，设计或“架构师”的能力是一种技能，而不是一套知识。问他们一堆问题，比如“使用 J2EE vX 与 J2EE vY 对性能有何影响”或“CORBA 还是 RMI 哪个更好”只会让你看起来很傻。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-03T11:47:31.080

提出这样的问题的问题在于没有真正的“正确”答案，所以主要是让候选人开始说话。我会要求他们描述一个他们已经实现并引以为豪的架构。然后跟进诸如“你最自豪的是什么？”之类的事情。然后你可以问他们过去犯了什么错误，诸如此类。

我对此感到更自在，因为您对这个人有一种感觉，而不是他们回答预设问题的能力。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-03T05:06:38.737

“你读过 McConnell 的 Code Complete 吗？”

# c# - 不再有动态的、尴尬的反射吗？

> ID：816269
> 
> 赞同：3
> 
> 时间：2009-05-03T03:36:09.373
> 
> 标签：c#, dynamic, reflection, runtime

C# 4.0 引入了`dynamic`关键字，它将在运行时查找。

这是否意味着我们不再需要尴尬的反思？如果有，你能举个例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T03:46:02.750

我们仍然会有反射 - 对常规 CLR 对象使用“动态”将调用基于反射的调度程序。

所以 - 我们仍然会有反射，但它会更容易做到。

这是一个例子：

```
// Via 'dynamic'    
dynamic dx = GetSomeCLRObject();
dx.DoSomething();
dx.SomeMember = 2;

// Via Reflection
object x = GetSomeCLRObject();
Type xt = x.GetType();
MemberInfo DoSomethingMethod = xt.GetMethod("DoSomething");
DoSomethingMethod.Invoke(x, null);
PropertyInfo SomeMemberProperty = xt.GetProperty("SomeMember");
SomeMemberProperty.SetValue(x, 2); 
```

我不了解你，但我喜欢前者。=)

在这两种情况下，我都没有得到编译时检查，没有 Intellisense，没有 IDE 支持——但前一种情况比后者更具表现力。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-03T03:42:47.173

动态调度只是反射的一种可能用途。有很多很好的理由来询问一个类的结构，获取有关该结构的信息并以某种形式可视化或以某种方式对其进行操作，而无需动态访问成员。反思在这里停留。:)

如果您想要动态关键字的示例，[这里是一个来自 PDC](http://channel9.msdn.com/pdc2008/TL16/)的视频，该视频是[该人本人](http://www.microsoft.com/presspass/exec/techfellow/hejlsberg/default.mspx)在谈论它（以及其他与 C# 4.0 相关的内容）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T07:58:29.057

动态将大大有助于解决仅通过名称知道的方法的问题，其中名称是已知的并在编译时固定 - 但是当然，如​​果您控制类型，这些方法也可以表示为接口。

有些情况`dynamic`根本没有帮助：

*   在编译时方法名称未知（即从配置/用户输入加载）
*   对象创建
*   也许一些泛型场景

我看到的最大用途`dynamic`是：

*   COM 互操作（显然）
*   通用运算符支持
*   没有通用接口的鸭子打字
*   DLR 互操作（见评论）

但它绝对不能解决所有反射问题。

# python - 如何在 Python 中转义撇号等？

> ID：816272
> 
> 赞同：8
> 
> 时间：2009-05-03T03:37:49.493
> 
> 标签：python, html, django, html-entities

我有一个带有如下符号的字符串：

```
&#39; 
```

这显然是一个撇号。

我尝试了 saxutils.unescape() 没有任何运气并尝试了 urllib.unquote()

我该如何解码？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T03:54:01.250

看看[这个问题](https://stackoverflow.com/questions/275174/)。您正在寻找的是“html 实体解码”。通常，您会发现一个名为“htmldecode”之类的函数可以执行您想要的操作。Django 和 Cheetah 都提供了和 BeautifulSoup 一样的功能。

如果您不想使用库并且所有实体都是数字的，那么另一个答案将非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T11:12:42.350

试试这个：（在[这里](http://github.com/sku/python-twitter-ircbot/blob/321d94e0e40d0acc92f5bf57d126b57369da70de/html_decode.py)找到）

```
from htmlentitydefs import name2codepoint as n2cp
import re

def decode_htmlentities(string):
    """
    Decode HTML entities–hex, decimal, or named–in a string
    @see http://snippets.dzone.com/posts/show/4569

    >>> u = u'E tu vivrai nel terrore - L&#x27;aldil&#xE0; (1981)'
    >>> print decode_htmlentities(u).encode('UTF-8')
    E tu vivrai nel terrore - L'aldilà (1981)
    >>> print decode_htmlentities("l&#39;eau")
    l'eau
    >>> print decode_htmlentities("foo &lt; bar")                
    foo < bar
    """
    def substitute_entity(match):
        ent = match.group(3)
        if match.group(1) == "#":
            # decoding by number
            if match.group(2) == '':
                # number is in decimal
                return unichr(int(ent))
            elif match.group(2) == 'x':
                # number is in hex
                return unichr(int('0x'+ent, 16))
        else:
            # they were using a name
            cp = n2cp.get(ent)
            if cp: return unichr(cp)
            else: return match.group()

    entity_re = re.compile(r'&(#?)(x?)(\w+);')
    return entity_re.subn(substitute_entity, string)[0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T08:53:22.140

最强大的解决方案似乎是Python 名人 Fredrik Lundh 的[这个函数](http://effbot.org/zone/re-sub.htm#unescape-html)。它不是最短的解决方案，但它可以处理命名实体以及十六进制和十进制代码。

# dwarf - 在 Mac OSX 中读取 DWARF 文件

> ID：816276
> 
> 赞同：7
> 
> 时间：2009-05-03T03:39:57.120
> 
> 标签：dwarf

任何人都可以帮我编写一个可以读取 DWARF 文件并给我文件名、行号和函数名详细信息的程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-03T03:54:44.307

DWARF-2 和 DWARF-3 的规格在这里：

[http://dwarfstd.org/dwarf-2.0.0.pdf](http://dwarfstd.org/dwarf-2.0.0.pdf)

[http://dwarfstd.org/Dwarf3.pdf](http://dwarfstd.org/Dwarf3.pdf)

这里有一个不错的阅读 DWARF 文件的库：

[http://reality.sgiweb.org/davea/dwarf.html](http://reality.sgiweb.org/davea/dwarf.html)

您可以获取并使用该库来读取您的 DWARF 文件（它读取 DWARF-2 和 DWARF-3），或者您可以查看源代码以了解如何编写自己的库/函数集来执行工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T22:16:21.893

你可以看看 binutils 中的 avr-readelf。binutils/dwarf.c 中的 display_debug_lines() 函数负责解码 DWARF 行号信息。

此外，如上所述，您可以使用 libdwarf。这很好地隐藏了 DWARF 的低级复杂性，让您专注于获取数据。

使用 elfdescriptor 设置 libdwarf 并获得 Dwarf_Debug 结构后，您可以执行以下操作：

1.  使用 dwarf_srclines() 遍历所有编译单元
2.  在每个 cu 上使用 dwarf_srclines()
3.  对从 dwarf_srclines() 返回的数组中的每个条目使用 dwarf_lineaddr()
4.  记得在正确的地方使用 dwarf_dealloc()。

# asp.net - Visual Studio 2005 ASP.NET 网站中的 CopyLocal？

> ID：816282
> 
> 赞同：2
> 
> 时间：2009-05-03T03:45:42.643
> 
> 标签：asp.net, vb.net, web, resources

Visual Studio 2005 **ASP.NET 网站**中是否有类似 Reference 属性**CopyLocal**的东西？

 **VS05 **Web 应用程序在****解决方案资源管理器**中有一个 References 文件夹，您可以在其中选择一个引用并在“属性”窗口中查看其属性，例如 CopyLocal。

但是 VS05**网站在****Class View**中只有一个 References 文件夹，您无法在其中访问引用的任何属性。是否有另一种简单的方法来设置网站中引用的属性？或者当您将网站发布到您自己的机器上时，参考 DLL 是否会自动复制？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T04:09:48.263

网站项目有一个 Bin 文件夹，在您发布时会复制到网站的根目录。

**编辑：**重读你的问题。答案是肯定的，发布时会自动复制参考。您可以在 bin 文件夹中看到引用

# python - Python 的“这个 Unicode 的最佳 ASCII”数据库在哪里？

> ID：816285
> 
> 赞同：86
> 
> 时间：2009-05-03T03:46:17.180
> 
> 标签：python, unicode, ascii

我有一些使用 Unicode 标点符号的文本，比如左双引号、右单引号作为撇号等等，我需要它的 ASCII 格式。Python 是否有这些字符的数据库以及明显的 ASCII 替代品，所以我可以做得比将它们全部变成“？”更好。?

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2009-11-09T14:37:23.273

[Unidecode](http://pypi.python.org/pypi/Unidecode)看起来像是一个完整的解决方案。它将花哨的引号转换为 ascii 引号，将带重音的拉丁字符转换为不带重音的字符，甚至尝试音译来处理没有 ASCII 等效字符的字符。这样您的用户就不必看到一堆 ? 当您必须通过旧的 7 位 ascii 系统传递他们的文本时。

```
>>> from unidecode import unidecode
>>> print unidecode(u"\u5317\u4EB0")
Bei Jing 
```

[http://www.tablix.org/~avian/blog/archives/2009/01/unicode_transliteration_in_python/](http://www.tablix.org/~avian/blog/archives/2009/01/unicode_transliteration_in_python/)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-05-03T04:16:58.013

在我原来的回答中，我还建议`unicodedata.normalize`. 但是，我决定对其进行测试，结果发现它不适用于 Unicode 引号。它在翻译带重音的 Unicode 字符方面做得很好，所以我猜`unicodedata.normalize`是使用该`unicode.decomposition`函数实现的，这让我相信它可能只能处理由字母和变音符号组合而成的 Unicode 字符，但我不是真的Unicode 规范方面的专家，所以我可以充满热气......

在任何情况下，您都可以使用`unicode.translate`来处理标点符号。该`translate`方法将 Unicode 序数字典转换为 Unicode 序数，因此您可以创建一个映射，将 Unicode-only 标点符号转换为 ASCII 兼容标点符号：

```
'Maps left and right single and double quotation marks'
'into ASCII single and double quotation marks'
>>> punctuation = { 0x2018:0x27, 0x2019:0x27, 0x201C:0x22, 0x201D:0x22 }
>>> teststring = u'\u201Chello, world!\u201D'
>>> teststring.translate(punctuation).encode('ascii', 'ignore')
'"hello, world!"' 
```

如果需要，您可以添加更多标点符号映射，但我认为您不必担心处理每个 Unicode 标点符号字符。如果您*确实*需要处理重音符号和其他变音符号，您仍然可以使用`unicodedata.normalize`来处理这些字符。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2009-05-03T04:15:43.367

有趣的问题。

谷歌帮助我找到[了这个](http://www.peterbe.com/plog/unicode-to-ascii)使用[unicodedata 模块](http://effbot.org/librarybook/unicodedata.htm)描述的页面，如下所示：

```
import unicodedata
unicodedata.normalize('NFKD', title).encode('ascii','ignore') 
```

# java - 如何在 NetBeans GUI Builder 中包含自定义面板？

> ID：816286
> 
> 赞同：20
> 
> 时间：2009-05-03T03:47:16.867
> 
> 标签：java, swing, netbeans, jpanel

我写了一个扩展 JPanel 的类。是否可以在 NetBeans GUI Builder 中使用它并让它在所有自动代码生成过程中存活下来？

我已使用 GUI 构建器中的自定义代码选项将对象实例化为新类，但似乎无法从 JPanel 更改声明，所以只有我覆盖的方法被调用，我不能调用 new JPanel 中不存在的那些。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-03T03:52:12.097

只需将类从项目树拖到 GUI 设计器中的窗体上。

就像它在[stackoverflow 问题 691890](https://stackoverflow.com/questions/691890/reusing-a-jpanel-in-netbeans-gui-designer)中所说的那样。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-03T03:51:30.303

您可以使用调色板管理器将组件添加到调色板，然后您可以在 GUI 构建器中使用它，就像使用任何其他类一样。
请参阅[如何使用 Swing 组件的自定义子类？](http://wiki.netbeans.org/FaqFormUsingCustomComponent)在 NetBeans Wiki 中。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-03T03:52:51.987

只需为您的类提供一个公共的无参数构造函数。然后，您可以通过右键单击它并选择添加到调色板来将类添加到调色板。

# shell - 无法在不打开工作的情况下终止工作

> ID：816288
> 
> 赞同：1
> 
> 时间：2009-05-03T03:48:59.297
> 
> 标签：shell, task

我运行以下代码失败

```
sudo killall %4 
```

其中 %4 是我的 Vim 会话。

你怎么能在没有前景的情况下终止工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T04:00:07.523

试试`kill %4`吧。unix shell 使用 %x 作为当前运行进程的变量。要查看可以使用 %x 语法的进程，请使用`jobs`. Killall 是“kill”的包装，基本上相当于`ps -aux | grep | 剪切-f2 -d "" | xargs kill' 之类的，如果你是一个 shell junky。

不，抱歉，那个 shell 命令不能正常工作，但它确实说明了 killall 的工作原理 =p。它只会杀死与您提供的字符串匹配的所有进程。

另外，请尝试使用“man kill”来了解有关 kill 的更多信息。特别是， kill -9 您可能会觉得很有用。这有点相当于“强制退出”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T04:05:24.250

我相信你想要“杀”而不是“杀戮”。我在 tcsh 下测试是这样的：

```
home% cat
^Z
Suspended
home% kill %1
home% 
[1]    Terminated                    cat 
```

此外，我怀疑这是否适用于 sudo 因为 sudo 会调用一个新的 shell，不是吗？在那个 shell 中， %4 不会被定义。

```
home% cat
^Z
Suspended
home% sudo kill %1
Password:
kill: illegal process id: %1 
```

如果你真的需要sudo，你可以试试这个：

```
home% jobs -l
[1] + 26318 Suspended cat
home% sudo kill 26318 
```

# qt - Phonon 可以用于捕获或转码吗？

> ID：816291
> 
> 赞同：2
> 
> 时间：2009-05-03T03:49:46.050
> 
> 标签：qt, kde, phonon

Qt/KDE 的 Phonon 媒体框架抽象首先实现了播放。它还能做更复杂的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T14:44:15.057

Phonon 在其当前状态下仅支持播放。Qt 团队希望在未来添加捕获功能：

> Phonon 及其 Qt 后端虽然功能齐全，可用于多媒体播放，但仍在开发中。未来的功能是为音乐和视频文件捕获媒体和更多处理器的可能性。

[资源](http://doc.trolltech.com/4.5/phonon-overview.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T14:43:27.633

Phonon 中还没有用于捕获或转码的 API。效果和捕获在 KDE 的 Phonon 路线图上，可以在这里查看；

[http://phonon.kde.org/cms/1007](http://phonon.kde.org/cms/1007)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T00:20:24.083

据我所知，[Phonon](http://phonon.kde.org/)只是底层媒体后端的包装器。在 Linux 下 Phonon 默认使用[GStreamer](http://www.gstreamer.net/)，但[似乎](http://liquidat.wordpress.com/2008/04/10/more-phonon-backends-vlc-mplayer/)可以更改它们。因此，如果后端可以捕获或转码，基本上 Phonon 也可以这样做。也许你必须扩展 Phonon。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-15T11:12:01.293

4.6 中有一个新功能，称为 QtMultimedia：

[http://doc.trolltech.com/4.6-snapshot/qtmultimedia.html](http://doc.trolltech.com/4.6-snapshot/qtmultimedia.html)

它还没有完成，但你可以看到一些进展。

# git - 谁能给我一个使用 Git 的良好翻译工作流程的例子？

> ID：816295
> 
> 赞同：1
> 
> 时间：2009-05-03T03:53:06.307
> 
> 标签：git, workflow, translation, dvcs

我在某处（我不记得确切的位置）读到 Git（可能还有其他任何好的 DCVS）在您翻译某些文本时是一个很好的工具。

我正在尝试为这种情况找出一个工作流程，而我能得到的最好的结果是：

1.  使用你自己的分支。像往常一样翻译文件，根据需要提交。
2.  当上游有更改时，将它们与您自己的分支合并。
3.  解决合并问题（这些问题应该在任何添加文本的地方，因为您可能翻译了所有文本）

因此，在由合并标记的文件中，应该很容易找到（使用 >>> 标记）更改的位置。无论如何，我想我可能错过了这一点，我什至不确定当在先前更改的文件的一部分中发现更改并且您之前标记为已合并时会发生什么。

谢谢。

**编辑：**好的，有人指出（在评论中）问题本身并不清楚。所以具体来说，我想知道的是这个工作流程是否正确，或者是否有一种（或多种）方法可以做得更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T04:29:00.603

好吧，我有一个应用程序，我一直在维护两个分支来对其进行本地化，让我告诉你，它很快就不再有趣了。

有一点帮助的事情是将可本地化的字符串包含在它们自己的行中，以确保您不会遇到不必要的冲突。

但最终，真正可行的方法是拥有一些 m17n 框架并有单独的文件进行本地化。分支并没有完全扩展。

# macos - 无法在屏幕内使用 pbcopy -clipboard

> ID：816302
> 
> 赞同：3
> 
> 时间：2009-05-03T04:00:16.460
> 
> 标签：macos, gnu-screen, pbcopy

**问题尽管接受了一个答案，但仍未解决：**我们正在努力让 Jonah 的代码正常工作。

**问题：**将（1）的代码更改为（2）

我知道[线程](https://stackoverflow.com/questions/810025/unable-to-use-screen-efficiently-in-macs-terminal)。我希望能够在 Screen 内运行以下代码

**代码 (1)**

```
cat ~/.vimrc | pbcopy                   (1) 
```

**代码 (2)**

```
cat ~/.vimrc > /tmp/pbcopy.pipe         (2) 
```

**我解决问题的尝试：** 将以下代码放入 .zshrc

```
function pbcopy() { "(cat \"$1\")"  > /tmp/pbcopy.pipe } 
```

我明白了

```
cat masi | pbcopy          
pbcopy: command not found: (cat "")
cat: masi: No such file or directory 
```

**如何在 Screen 中使用 pbcopy？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T04:40:42.790

好吧，这是一个古怪的答案，但这也是一个古怪的问题，所以至少它们匹配。您可以使用 创建一个命名管道[`mkfifo`](http://opengroup.org/onlinepubs/007908799/xcu/mkfifo.html)，然后设置一个无限循环，从命名管道读取文件并将它们通过管道传输到`pbcopy`（或`xsel`、`xclip`等）。

**1.**在不在屏幕会话中的终端中（仅运行一次）：

```
/usr/bin/mkfifo /tmp/pbcopy.pipe
while true; do /bin/cat /tmp/pbcopy.pipe | /usr/bin/pbcopy; done 
```

你可能想把它变成一个 shell 脚本，比如（这可能应该更健壮）

```
#!/bin/bash

if [[ -e /tmp/pbcopy.pipe ]]; then
    echo "it looks like I am already running"
    echo "remove /tmp/pbcopy.pipe if you are certain I am not"
    exit 1
fi

while true; do
    /bin/cat /tmp/pbcopy.pipe | /usr/bin/pbcopy
done 
```

您可以命名`pbcopy_server.sh`，使其可执行（`chmod a+x pbcopy_server.sh`）并放在路径中的某个位置，这样您就可以`nohup pbcopy_server.sh &`在第一次启动机器时说出它。

**2.**在任何其他终端（包括屏幕会话中的终端）中，您现在可以 cat 文件（或将程序的输出重定向到 /tmp/pbcopy.pipe，文本将出现在剪贴板中。

```
cat file > /tmp/pbcopy.pipe

df -h > /tmp/pbcopy.pipe 
```

**3.**为了让它看起来像你在呼唤真实`pbcopy`，你可以用一些东西来`/tmp/pbcopy.pipe`为你做猫。

**3a。**使用一个`zsh`函数：

```
function pbcopy() { cat > /tmp/pbcopy.pipe } 
```

**3b。**或者创建一个名为的 Perl 脚本`pbcopy`并将其放在您的`PATH`than之前的目录中`/usr/bin`：

```
#!/usr/bin/perl

use strict;
use warnings;

open my $out, ">", "/tmp/pbcopy.pipe"
   or die "could not open pipe to pbcopy: $!\n";

print $out $_ while <>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T18:16:53.943

在[http://www.samsarin.com/blog/2008/10/18/copying-gnu-screen-buffer-to-leopard-clipboard/中找到了一个更简单的解决方案来使用 osascript](http://www.samsarin.com/blog/2008/10/18/copying-gnu-screen-buffer-to-leopard-clipboard/)

在评论中，Andrew Wason 提供了这个复制屏幕缓冲区的解决方案：

**.screenrc 中的代码**

```
# binds C-a b to copy the contents of your last screen copy to the MacOSX pasteboard
bind b eval "writebuf /tmp/screen-pbcopy" "exec /usr/bin/osascript -e 'tell application \"System Events\"' -e 'set the clipboard to (read posix file \"/tmp/screen-pbcopy\" as text)' -e 'end tell'" 
```

同样使用 osascript，这是一个 bash 脚本，它在屏幕中模拟 pbcopy 的行为。欢迎对此脚本进行改进：

**将此代码保存为路径中某处的 bash 脚本，例如：~/bin/pbcopyScreen.bash**

```
#!/bin/bash

# saves all standard input to a file
cat > /tmp/screen_pbcopy_kludge_buffer

# uses osascript to set the MacOSX pastebaord to the contents of the file
/usr/bin/osascript -e 'tell application "System Events"' -e 'set the clipboard to (read posix file "/tmp/screen_pbcopy_kludge_buffer" as text)' -e 'end tell'

rm /tmp/screen_pbcopy_kludge_buffer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T21:29:55.837

您可以安装旧版本的 Macport 屏幕，这似乎可以解决此问题，如本文评论中所述：
[链接到最后一条评论，解释如何做](http://www.samsarin.com/blog/2008/10/18/copying-gnu-screen-buffer-to-leopard-clipboard/#comment-613)

我已经尝试过自己并且屏幕现在使用 pbcopy 工作得很好！:-)

检查该步骤：

1.  使用其 DMG 文件安装 Macport。[豹的DMG](http://svn.macports.org/repository/macports/downloads/MacPorts-1.7.1/MacPorts-1.7.1-10.5-Leopard.dmg)

2.  启动一个**新的终端**，
    `$ sudo vi /opt/local/etc/macports/sources.conf`
    最后这两行只保留在 sources.conf 中，不再有：

    file:///Users/xxxxx/ports
    rsync://rsync.macports.org/release/ports/ [默认]

3.  `$ cd
    $ mkdir -p ports/sysutils/`（不要创建“screen”目录，svn 会）

4.  `$ cd ports/sysutils/
    $ svn co -r 45745 http://svn.macports.org/repository/macports/trunk/dports/sysutils/screen`

5.  退房后：

    $ cd $HOME/ports
    $ portindex
    在 /Users/keugaerg/ports 中创建软件索引 添加端口 sysutils/screen

    ```
    Total number of ports parsed:   1 
    Ports successfully parsed:  1    
    Ports failed:           0 
    ```

6.  `$ sudo port install screen` （可能需要一段时间作为下载屏幕和构建它）

然后就完成了，只需要启动 /opt/local/bin/screen 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-01-16T08:39:11.193

这似乎在 Snow Leopard 的 GNU Screen 版本中得到了修复，即使它保持相同的版本号 4.00.03 (FAU) 23-Oct-06。

或者，您可以更新到 Screen 版本 4.01：

```
git clone git://git.savannah.gnu.org/screen.git 
```

# vim - VI/VIM 编辑器：使用映射序列用 HTML 标记换行

> ID：816327
> 
> 赞同：1
> 
> 时间：2009-05-03T04:25:03.907
> 
> 标签：vim

我正在尝试定义一个 vi 'map' 命令序列，它将当前单词包含在 HTML 标记中，例如 B（粗体）标记。地图定义如下：

```
:map K ebi<B><esc>ea</B><esc> 
```

地图以运动“eb”开始移动到所选单词的开头，假设最可能的光标位置是单词的开头或中间。问题是，如果光标位于单词的最后一个字符上，它就不起作用 - 那么后面的单词将被换行。

是否有一个技巧可以使这张地图可靠地用于任何带有单词的光标位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T04:48:18.170

如果这是一个单独的地图，那很好，但如果你想做更多，或者更频繁地做，你最好使用带有[环绕.vim的文本对象](http://www.vim.org/scripts/script.php?script_id=1697)

如果您使用该脚本，则可以（在正常模式下）

```
ysiwtb> 
```

您必须按字面意思输入。`ys`是告诉surround.vim 监听一个文本动作。`iw`选择您当前所在的单词。`t`告诉它你想用标签包围。`b>`告诉它你想使用哪个标签。

即使您不想使用环绕.vim，您也可以考虑`:help text-objects`在地图中使用文本对象 ( )。`iw`or text 对象是您想要的`inner-word`，但我还不知道如何将其包装在地图中。

编辑：我想出了如何在地图中使用它，这里是......

```
:map K viwO<Esc>i<b><Esc>lviw<Esc>a</b><Esc> 
```

这会将光标留在`>`结束标记的结束处。它应该在光标最初所在的单词中的任何位置起作用。

但就像我说的，surround.vim 更可取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T09:13:41.387

另一种方法：删除内部单词（diw），插入标签，找到最后一个<，插入删除。

```
:map K diwi<b></b><Esc>F<P 
```

[closetag.vim ：关闭打开的 HTML/XML 标记](http://vim.sourceforge.net/scripts/script.php?script_id=13) 的函数和映射可能很有趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T09:27:12.527

如果你想要一个更全球化的解决方案，你可以试试[XPTemplate](http://www.vim.org/scripts/script.php?script_id=2611)它可以为你提供环境。只需选择您的文本，输入选择好的片段（我认为是t_）并输入您的标签名称，但如果您愿意，您可以添加一个特殊的模板。

[此外，它是使用各种语言的非常好的工具，如您在此视频](http://www.vimeo.com/4172117)中所见

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T04:34:03.463

改用磅。

e 移动到当前单词的末尾，或者如您所见，下一个单词。b 如果您在第一个字符上，则移动到当前单词或上一个单词的开头。为了防止在第一个字符上移动到前一个单词，向右移动一个字符。即使您在单词的最后一个字母上，b 也会将您带到正确的位置。

所以你的整行将是：

```
:map K lbi<B><esc>ea</B><esc> 
```

# c# - WPF：一个文本框，它具有在按下 Enter 键时触发的事件

> ID：816334
> 
> 赞同：23
> 
> 时间：2009-05-03T04:28:44.083
> 
> 标签：c#, wpf, xaml, custom-controls

我没有在我的应用程序中为每个事件附加一个`PreviewKeyUp`事件`TextBox`并检查按下的键是否是 Enter 键然后执行操作，而是决定实现 a 的扩展版本，`TextBox`其中包括一个 DefaultAction 事件，该事件在 a 中按下 Enter 键时触发`TextBox`。

我所做的基本上是创建一个从`TextBox`公共事件扩展的新类`DefaultAction`，如下所示：

```
public class DefaultTextBoxControl:TextBox
{
    public event EventHandler<EventArgs> DefaultAction = delegate { };

    public DefaultTextBoxControl()
    {
        PreviewKeyUp += DefaultTextBoxControl_PreviewKeyUp;
    }

    void DefaultTextBoxControl_PreviewKeyUp(object sender, System.Windows.Input.KeyEventArgs e)
    {
        if (e.Key != Key.Enter)
        {
            return;
        }
        DefaultAction(this, EventArgs.Empty);
    }
} 
```

然后我使用我的应用程序中的这个自定义文本框，比如（xaml）：

```
<Controls:DefaultTextBoxControl  DefaultAction="DefaultTextBoxControl_DefaultAction">
</Controls:DefaultTextBoxControl> 
```

* * *

现在，在我学习 WPF 的一点经验中，我意识到几乎大多数时候都有一种“更酷”（并且希望更容易）的方式来实现事物

...所以我的问题是，**如何改善上述控制？** 或者也许有另一种方法可以进行上述控制？...也许只使用声明性代码而不是声明性（xaml）和程序性（C#）？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-05-03T08:11:31.037

看看几个月前的[这篇博客文章](http://www.madprops.org/blog/wpf-textbox-selectall-on-focus/)`TextBox.GotFocus`，我在其中附加了一个“全局”事件处理程序来选择文本。

本质上，您可以`KeyUp`在 App 类中处理事件，如下所示：

```
protected override void OnStartup(StartupEventArgs e)
{
    EventManager.RegisterClassHandler(typeof(TextBox),
        TextBox.KeyUpEvent,
        new System.Windows.Input.KeyEventHandler(TextBox_KeyUp));

    base.OnStartup(e);
}

private void TextBox_KeyUp(object sender, System.Windows.Input.KeyEventArgs e)
{
    if (e.Key != System.Windows.Input.Key.Enter) return;

    // your event handler here
    e.Handled = true;
    MessageBox.Show("Enter pressed");
} 
```

...现在您的应用程序中的每个人都会在用户输入`TextBox`时调用该方法。`TextBox_KeyUp`

**更新**

正如您在评论中指出的那样，这仅在每个人都`TextBox`需要执行相同的代码时才有用。

要添加像 Enter 按键这样的任意事件，您最好查看[Attached Events](http://msdn.microsoft.com/en-us/library/bb613550.aspx)。我相信这可以得到你想要的。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-12-21T16:25:41.610

既然问了这个问题，现在`InputBindings`TextBoxes 和其他控件上有一个属性。有了这个，可以使用纯粹的 XAML 解决方案，而不是使用自定义控件。将 s分配`KeyBinding`给`Return`和`Enter`指向一个命令可以做到这一点。

例子：

```
<TextBox Text="Test">
    <TextBox.InputBindings>
        <KeyBinding Command="{Binding SomeCommand}" Key="Return" />
        <KeyBinding Command="{Binding SomeCommand}" Key="Enter" />
    </TextBox.InputBindings>
</TextBox> 
```

有些人提到这`Enter`并不总是有效，并且`Return`可能在某些系统上使用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-01-16T07:49:20.810

当用户在 TextBox 中按下 Enter 键时，文本框中的输入将出现在用户界面 (UI) 的另一个区域中。

以下 XAML 创建用户界面，该界面由 StackPanel、TextBlock 和 TextBox 组成。

```
<StackPanel>
  <TextBlock Width="300" Height="20">
    Type some text into the TextBox and press the Enter key.
  </TextBlock>
  <TextBox Width="300" Height="30" Name="textBox1"
           KeyDown="OnKeyDownHandler"/>
  <TextBlock Width="300" Height="100" Name="textBlock1"/>
</StackPanel> 
```

下面的代码创建 KeyDown 事件处理程序。如果按下的键是 Enter 键，则会在 TextBlock 中显示一条消息。

```
private void OnKeyDownHandler(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Return)
    {
        textBlock1.Text = "You Entered: " + textBox1.Text;
    }
} 
```

有关更多信息，请阅读[MSDN](https://msdn.microsoft.com/en-us/library/ms752054(v=vs.100).aspx)文档

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-10-03T02:08:13.887

```
 private void txtBarcode_KeyDown(object sender, KeyEventArgs e)
    {
        string etr = e.Key.ToString();

        if (etr == "Return")
        {
            MessageBox.Show("You Press Enter");
        }
    } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-10-03T02:13:38.317

将事件添加`xaml`到特定的文本框或对象：

`KeyDown="txtBarcode_KeyDown"`

# sql - 从表中仅删除 500 行

> ID：816338
> 
> 赞同：4
> 
> 时间：2009-05-03T04:35:40.293
> 
> 标签：sql, sql-server, tsql

有人可以帮我查询一下，从一个有 20000 行的表中只删除 500 行。还必须早于特定日期。

谢谢你的帮助，

苏菲

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-03T04:38:21.720

您可以像在选择中一样使用 Top 关键字

```
Delete Top (500) 
From myTable
Where Date < '01/01/2009' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-03T04:42:58.247

如果您使用的是 SQL Server 2005，您可以这样做：

```
DELETE TOP (500) FROM your_table
WHERE date_field < @my_particular_date 
```

或者你可以这样做：

```
SET ROWCOUNT 500

DELETE your_table
WHERE date_field < @my_particular_date 
```

在 SQL Server 2000 中，您可以这样做：

```
DELETE your_table
WHERE pk_field IN (
  SELECT TOP (500) * FROM your_table
  WHERE date_field < @my_particular_date
) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-03T04:45:40.643

```
DELETE FROM Table_Name WHERE Primary_Key_Column IN (
    SELECT TOP 500 Primary_Key_Column FROM Table_Name WHERE [Date] < '01/01/2009'  ORDER BY Primary_Key_Column ASC
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T04:49:23.253

Top 仅适用于 Transact Sql，每个 sql 都有自己的版本

对于 mySql 和 posGres

```
Delete 
From myTable
Where Date < '01/01/2009'
LIMIT 10; 
```

对于甲骨文：

```
SELECT 
FROM myTable 
WHERE Date < '01/01/2009'
and ROWNUM <= 10 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-03T04:42:17.593

设置行数 500

从表名中删除 TheDate < @YourDate

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-03T08:26:58.940

我唯一要补充的是，您可能希望在大多数这些查询的末尾使用“ORDER BY [DATE] DESC”。如果您有多个匹配的日期，您将需要添加额外的列排序以删除正确的值。

当然，这假定您实际上有一个“createddate”或“modifieddate”可以用来排序。您没有指定它是最旧的创建还是最旧的未修改。（即如果 ID=1 是最旧的，但我昨天修改了它，是否仍应将其删除？）如果您按主键排序，则需要小心 - 假设您使用的是递增主键而不是 GUID或者其他的东西...

# ajax - 是否可以使用 <canvas> 合并差异图像

> ID：816339
> 
> 赞同：1
> 
> 时间：2009-05-03T04:36:31.740
> 
> 标签：ajax, image, merge, canvas, vnc

我正在开发一个类似于 VNC 的基于 AJAX 的应用程序。我能够重现从浏览器到远程机器的键盘和鼠标交互。但是当涉及到显示部分时..我依靠页面刷新来重新捕获最新捕获的桌面图像。

我想通过使用 AJAX 请求从服务器获取当前图像捕获的增量和先前渲染的图像来改进显示方面.. 并尝试使用 <canvas> 合并在 JAVA 脚本中接收到的增量内容以重建显示。如果能够这样做，我的应用程序将非常有用。

如果专家能评论该方法的可行性和实用性，我将不胜感激。

问候，

段落

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T18:42:31.307

这应该是可能的。例如，通过使用drawImage() 从服务器获取表示为数据URL 的新图像以及放置它们的位置坐标。

# html - 为什么这个 div/img 不会在 IE8 中居中？

> ID：816343
> 
> 赞同：33
> 
> 时间：2009-05-03T04:42:08.420
> 
> 标签：html, css, internet-explorer-8

我有一个非常简单的保持页面，我构建了一个以 div、锚点和图像为中心的页面。出于某种原因，它不会以 IE8 为中心（两种模式），我希望有人能告诉我原因。我还没有机会在其他 IE 浏览器中尝试它。我已经在 Chrome 和 FF3 中尝试过，它可以正常工作。

```
<html>
<head>
<title>Welcome</title>
<style>
    #pageContainer {width:300px;margin:0 auto;text-align:center;}
    #toLogo{border:none; }
</style>
</head>
<body>
    <div id="pageContainer">
    <a href="http://portal.thesit.com" id="toSite"><img src="LOGO_DNNsmall.png" id="toLogo"></a>
    </div>
</body>
</html> 
```

我说真的很简单。:)

谢谢，

布雷特

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2009-05-03T05:16:09.820

你真的希望你的页面在怪癖模式下工作吗？一旦我将 doctype 添加到强制标准模式，您的 HTML 中心就可以了：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
<title>Welcome</title>
<style>    
    #pageContainer {width:300px;margin:0 auto;text-align:center;}    
    #toLogo{border:none; }
</style>
</head>

<body>

<div id="pageContainer">
    <a href="http://portal.thesit.com" id="toSite">
    <img src="http://stackoverflow.com/content/img/so/logo.png" id="toLogo"></a> </div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-03T05:02:24.660

`auto`div 两侧的边距留给浏览器决定它的去向。没有任何东西告诉浏览器 div 应该在正文中居中，或者左对齐或右对齐。所以这取决于浏览器。如果您在正文中添加指令，您的问题将得到解决。

```
<html>
  <head>
    <title>Welcome</title>
    <style>
      body { text-align: center;}
      #pageContainer {width:300px; margin:0px auto;
            text-align:center; border:thin 1px solid;}
      #toLogo{border:none; }
    </style>
  </head>
  <body>
    <div id="pageContainer">
      <a href="http://portal.thesit.com" id="toSite">
        <img src="LOGO_DNNsmall.png" id="toLogo">
      </a>
    </div>
  </body>
</html> 
```

我给 div 添加了一个 1px 的边框，这样你就可以更清楚地看到发生了什么。

您将其留给浏览器，因为它处于怪癖模式。要删除 quirks 模式，请在顶部添加一个 doctype 定义，如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>Welcome</title>
    <style>
      #pageContainer {width:300px; margin:0px auto;
            text-align:center; border:thin 1px solid;}
      #toLogo{border:none; }
    </style>
  </head>
  <body>
    <div id="pageContainer">
      <a href="http://portal.thesit.com" id="toSite">
        <img src="LOGO_DNNsmall.png" id="toLogo">
      </a>
    </div>
  </body>
</html> 
```

现在您将能够在页面上看到 300 px 的 div 中心。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-03T04:52:33.357

添加`text-align:center`到正文中。`margin:0 auto`与div 上的结合时应该这样做。

`text-align:center`您可以通过将整个页面内容包装在一个全宽容器中并在其上进行设置，而不使用主体上的 居中`text-align:center`。

```
<html>
<head>
<title>Welcome</title>
<style>
    #container {text-align:center;border:1px solid blue}
    #pageContainer {width:300px; margin:0 auto; border:1px solid red}
    #toLogo{border:none; }
</style>
</head>
<body>
    <div id="container">
        <div id="pageContainer">
        <a href="http://portal.thesit.com" id="toSite"><img src="LOGO_DNNsmall.png" id="toLogo"></a>
        </div>
    </div>
</body>
</html> 
```

（我添加了`container`div）。它并没有真正改变任何东西......只是一个额外的div。您仍然需要所有相同的 css 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T04:56:50.460

您可能希望将其更改为以下内容：

```
<html>
<head>
<title>Welcome</title>
<style>
    body { text-align: center; }
    #pageContainer {width:300px;margin:0 auto;}
    #toLogo{border:none; }
</style>
</head>
<body>
    <div id="pageContainer">
    <a href="http://portal.thesit.com" id="toSite"><img src="LOGO_DNNsmall.png" id="toLogo"></a>
    </div>
</body>
</html> 
```

被`text-align:center;`移动到身体上。如果您想在 div 中放置其他对齐的左侧内容`#pageContainer`，那么您需要`text-align:left;`该类。这是我现在在很多网站中使用的解决方案，并且似乎适用于所有浏览器（这是 Dreamweaver 在其入门模板中使用的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-11T23:24:26.837

对于蓝图用户 这让我发疯了，直到我发现这篇文章：[ie8 和蓝图问题](http://groups.google.com/group/blueprintcss/browse_thread/thread/fa867151127c932b) 长话短说，在你的 html 代码中更改

```
 <!--[if IE]>
 <link rel="stylesheet" href="../css/blueprint/ie.css" type="text/css" media="screen, projection" /> 
<![endif]--> 
```

为了

```
<!--[if lt IE 8]>
<link rel="stylesheet" href="../css/blueprint/ie.css" type="text/css" media="screen, projection" />
<![endif]--> 
```

问候亚历克斯

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2010-04-06T16:16:19.757

这适用于 IE6、7、8、FF 3.6.3：

```
 #container
    {
        width:100%;
    }

    #centered
    {
        width:350px;
        margin:0 auto;
    } 
```

和

```
 <div id="container">
        <div id="centered">content</div>
    </div> 
```

# c# - 用这种方法绘制图像？

> ID：816347
> 
> 赞同：0
> 
> 时间：2009-05-03T04:43:16.217
> 
> 标签：c#, graphics, drawing

```
 private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
    {
        NumberOfBets++;

        if ((e.X >= 40 && e.X <= 125) && (e.Y >= 0 && e.Y <= 26))
        {
            bettingStatus[0]++;
            for (int x; x < 10; x++)
            {
                Graphics graphic = (???)
            }
        } 
```

我正在尝试在此 MouseDown 方法中绘制图像。我不知道“（？？？）”部分的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T04:59:25.540

```
// Create a Graphics object for the pictureBox1 control.
Graphics g = pictureBox1.CreateGraphics(); 
```

阅读更多：[MSDN：图形类](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)

您应该在 Paint 事件中进行绘制，因为如果不这样做，如果重新绘制控件，您将失去绘图。传递给 Paint 事件处理程序的 PaintEventArgs 具有一个名为 Graphics 的属性（类型为 System.Drawing.Graphics），您可以在其上进行绘图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T04:55:10.213

您需要`Graphics`从某个地方获取，可能`pictureBox1`在您的情况下：

```
Graphics graphic = pictureBox1.CreateGraphics(); 
```

...但是您确定要在`MouseDown`事件处理程序中绘图吗？如果任何部分被重绘，它将不会被重绘。您最好在`Paint`事件处理程序中完成所有绘图并设置一个标志`MouseDown`。然后使要重绘的区域无效以绘制新图像。

或者，如果您的图像将更加静态，您可以创建一个`Bitmap`，在其上绘制，然后将`Image`您的设置`PictureBox`为指向`Bitmap`。例如：

```
Bitmap bmp = new Bitmap(200, 100);
Graphics graphics = Graphics.FromImage(bmp);
//do drawing here
pictureBox1.Image = bmp; 
```

# c# - 从 Socket 接收分块数据到单个缓冲区

> ID：816350
> 
> 赞同：1
> 
> 时间：2009-05-03T04:46:38.753
> 
> 标签：c#, sockets, buffer

我正在尝试使用套接字编写一个简单的 SNPP（简单网络寻呼协议）客户端。一切似乎都运行良好，除了服务器之间的小不一致。

当我发送命令时，我需要读取回复，通常是单个数据块。但是，Sprint 的 SNPP 服务器分两部分发送回复。第一个数据块是状态码的第一位。第二块是剩余部分。例如，当我尝试接收“220 网关就绪”回复时，它是这样到达的：

```
2 
```

我必须发送另一个空命令来检索其余部分：

```
20 Gateway ready 
```

目前，我正在使用：

```
byte[] buffer = new byte[256];
socket.Receive(buffer); 
```

如何确保在发出命令后收到所有可用数据，而不为每个数据块分配单独的缓冲区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-03T08:21:59.500

对于分块的响应，我建议您阅读这样的数据：

```
using (var resultStream = new MemoryStream())
{
    const int CHUNK_SIZE = 2 * 1024; // 2KB, could be anything that fits your needs
    byte[] buffer = new byte[CHUNK_SIZE];
    int bytesReceived;
    while ((bytesReceived = socket.Receive(buffer, buffer.Length, SocketFlags.None)) > 0)
    {
        byte[] actual = new byte[bytesReceived];
        Buffer.BlockCopy(buffer, 0, actual, 0, bytesReceived);
        resultStream.Write(actual, 0, actual.Length);
    }

    // Do something with the resultStream, like resultStream.ToArray() ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T05:18:37.053

尝试检查 Socket.Available 属性以确定是否需要再次调用 Receive。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T05:28:09.790

我想我理解你的问题。[Socket.Receive](http://msdn.microsoft.com/en-us/library/w3xtz6a5.aspx)的这种重载允许您传递一个整数来指定开始放置数据的偏移位置。如果您有 1 个字节，则在您的示例中的第一次调用时，您可以使用偏移量 1 调用此重载并使用相同的缓冲区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T06:23:12.810

`Socket.Receive`返回一个整数，它是接收到的字节数。您可以检查这是否为 1 并`Receive`再次调用。

```
byte[] buffer = new byte[256];
int len = socket.Receive(buffer);

if (len == 1)
  socket.Receive(buffer, 1, buffer.Length - 1, SocketFlags.None); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-21T05:33:17.860

全部，

当网络服务器在“块”中发送数据时，它会在每个块之前加上它的长度（作为指示十六进制值的字符串）。

块大小 [;块扩展] 块数据

例如：分块 15 个字节：

F; 123456789ABCDEF

从 Socket 接收 HTTP 数据的最大问题是确定要读取多少数据：如果您已接收到所有可用数据并再次调用 Recieve 方法，则 Recieve 方法将阻塞，直到远程套接字发送更多数据，这对于HTTP/1.0 连接永远不会发生。

您需要实现一个环绕套接字的阅读器；它应该将数据接收到缓冲区中，并提供一个“ReadLine”方法来读取缓冲区的内容，直到它读取 13 后跟 10 (CRLF)

# c++ - 在 C++ 中使用带有 MinGW 编译器的 COM 对象

> ID：816352
> 
> 赞同：4
> 
> 时间：2009-05-03T04:47:39.407
> 
> 标签：c++, windows, com, mingw

我有一个进程内 COM 服务器（即 DLL），我想在 C++ 应用程序中使用它，该应用程序将使用 MinGW 套件（使用 CodeLite IDE）进行编译。我不知道从哪里开始，有任何提示、建议或示例代码吗？

干杯，马特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T05:05:41.733

就像一个普通的COM一样，你需要得到它的头文件，用于COM类的结构和CLSID，然后

```
CoCreateInstance(CLSID, ..., ppv)
ppv->YourComAPI1(arg1); 
```

与在 VC 下开发没有什么不同。

# c - 如何对一个函数指针进行类型定义，该函数指针将其自身类型的函数作为参数？

> ID：816356
> 
> 赞同：10
> 
> 时间：2009-05-03T04:49:41.023
> 
> 标签：c, function-pointers, typedef

示例：一个函数接受一个函数（接受一个函数 (that ...) 和一个 int）和一个 int。

```
typedef void(*Func)(void (*)(void (*)(...), int), int); 
```

它在哪里递归爆炸`(...)`。是否有根本原因无法做到这一点，或者是否有其他语法？在我看来，没有演员表应该是可能的。我真的在尝试传递一个调度表，但我可以弄清楚我是否可以通过这种类型。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-03T05:08:44.377

您可以将函数指针包装在结构中：

```
struct fnptr_struct;
typedef void (*fnptr)(struct fnptr_struct *);
struct fnptr_struct {
  fnptr fp;
}; 
```

我不确定这是否是对铸造的改进。我怀疑没有结构是不可能的，因为 C 要求在使用类型之前定义类型，并且 typedef 没有不透明的语法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-03T05:28:32.723

直接做是不可能的。您唯一的选择是让函数指针参数接受未指定的参数，或者接受指向包含函数指针的结构的指针，正如[Dave 建议](https://stackoverflow.com/questions/816356/how-can-i-typdef-a-function-pointer-that-takes-a-function-of-its-own-type-as-an-a/816386#816386)的那样。

```
// Define fnptr as a pointer to a function returning void, and which takes one
// argument of type 'pointer to a function returning void and taking
// an unspecified number of parameters of unspecified types'
typedef void (*fnptr)(void (*)()); 
```

# sql - oracle9i 查询

> ID：816365
> 
> 赞同：0
> 
> 时间：2009-05-03T04:55:18.140
> 
> 标签：sql, oracle

我有一个由 6 列组成的 oracle 表，其中一个是日期列。日期字段在某些行中有空条目...没有其他字段为空。我可以删除日期字段为空的行吗？或者我应该更新这些行的日期字段中的一些值......？

请为我提供执行这两项操作的正确方法？

谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T09:05:46.260

如果您需要保留行中的其他值，您可以在查询中为日期提供默认值；

```
SELECT NVL(dateCol, to_date('31/01/2009','dd/MM/yyyy')) FROM dataTable 
```

要更新表中的空值，请使用；

```
UPDATE dataTable
SET dateCol = to_date('31/01/2009','dd/MM/yyyy') 
WHERE dateCol IS NULL 
```

删除空行；

```
DELETE FROM dataTable
WHERE dateCol IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T05:05:55.757

从 date_field 为空的 table_name 中删除；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T09:42:40.053

正确答案已经给出。我只是在这里添加一点解释。使用相等运算符 (=) 和 NULL 进行比较总是给出 NULL，而不是 TRUE。这就是为什么你必须使用“IS NULL”而不是“= NULL”。以下是讨论 NULLS 的文档部分：http: [//download.oracle.com/docs/cd/B28359_01/server.111/b28286/sql_elements005.htm#i59110](http://download.oracle.com/docs/cd/B28359_01/server.111/b28286/sql_elements005.htm#i59110)

一个例子：

```
SQL> create table mytable (col1,col2,col3,col4,col5,datecol)
  2  as
  3  select 1,1,1,1,1,sysdate from dual union all
  4  select 2,2,2,2,2,null from dual union all
  5  select 3,3,3,3,3,null from dual
  6  /

Tabel is aangemaakt.

SQL> delete mytable
  2   where datecol = null
  3  /

0 rijen zijn verwijderd.

SQL> select * from mytable
  2  /

 COL1  COL2  COL3  COL4  COL5 DATECOL
----- ----- ----- ----- ----- -------------------
    1     1     1     1     1 03-05-2009 11:36:08
    2     2     2     2     2
    3     3     3     3     3

3 rijen zijn geselecteerd.

SQL> delete mytable
  2   where datecol is null
  3  /

2 rijen zijn verwijderd.

SQL> select * from mytable
  2  /

 COL1  COL2  COL3  COL4  COL5 DATECOL
----- ----- ----- ----- ----- -------------------
    1     1     1     1     1 03-05-2009 11:36:08

1 rij is geselecteerd. 
```

问候，罗布。

# c - 查找定义 C 函数的头文件

> ID：816366
> 
> 赞同：5
> 
> 时间：2009-05-03T04:56:30.820
> 
> 标签：c, header, openafs

应该不难吧？对？

我目前正在搜索 OpenAFS 代码库以查找 pioctl 的标头定义。我已经抛出了我所拥有的一切：检查 ctags，grepped pioctl 的源代码等。我最接近线索的是有一个文件 pioctl_nt.h 包含定义，除了它是实际上不是我想要的，因为没有任何用户空间代码直接包含它，而且它是特定于 Windows 的。

现在，我不希望您去下载 OpenAFS 代码库并为我找到头文件。不过，我很好奇：当其他一切都失败时，您有什么技术可以找到所需的头文件？哪些最坏的情况可能导致代码库中的 grep for pioctl 实际上没有提出任何看起来像函数定义的东西？

我还应该注意，我可以访问两个独立的用户空间程序，它们已经正确完成，所以理论上我可以对函数进行 O(n) 搜索。但是没有一个头文件弹出给我，而且 n 很大......

**编辑：**直接的问题已经解决： pioctl() 是隐式定义的，如下所示：

```
AFS.xs:2796: error: implicit declaration of function ‘pioctl’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-03T05:20:16.143

如果`grep -r`并且`ctags`失败了，那么它可能被定义为一些讨厌的宏的结果。您可以尝试制作最简单的文件以成功调用`pioctl()`和编译，然后对其进行预处理以查看会发生什么：

```
gcc -E test.c -o test.i
grep pioctl -C10 test.i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T05:11:52.903

有编译器选项可以显示预处理器输出。试试那些？在我脑子里完全没有任何可能的定义的可怕时刻，-E 选项（在大多数 c 编译器中）除了喷出预处理的代码外什么也没做。

**根据请求的信息**：通常我只是捕获有问题的文件的编译，因为它在屏幕上输出，然后快速复制和粘贴并在编译器调用之后放置 -E。结果会将预处理器输出喷到屏幕上，因此将其重定向到文件。浏览该文件，因为所有的宏和愚蠢的事情都已经处理好了。

**最坏的情况：**

*   K&R 风格原型
*   宏隐藏了定义
*   隐式声明（根据您的回答）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T05:24:29.583

您是否考虑过使用`cscope`（可从[SourceForge](http://cscope.sourceforge.net/)获得）？

我在一些相当重要的代码集（25,000+ 个文件，一个文件中最多约 20,000 行）上使用它并取得了很好的成功。在古代 Sun E450 上构建交叉引用需要一段时间（5-10 分钟）和更长的时间（20-30 分钟），但我发现结果很有用。

* * *

在几乎同样古老的 Mac（双 1GHz PPC 32 位处理器）上，在 OpenAFS (1.5.59) 源代码上运行的 cscope 出现了很多声明函数的地方，有时在代码中内联，有时在标头中. 扫描 4949 个文件需要几分钟，生成一个 58 MB 的 cscope.out 文件。

*   openafs-1.5.59/src/sys/sys_prototypes.h
*   openafs-1.5.59/src/aklog/aklog_main.c（连同评论“为什么 AFS 不提供这些原型？”）
*   openafs-1.5.59/src/sys/pioctl_nt.h
*   openafs-1.5.59/src/auth/ktc.c 包括对 PIOCTL 的定义
*   openafs-1.5.59/src/sys/pioctl_nt.c 提供了它的实现
*   openafs-1.5.59/src/sys/rmtsysc.c 提供了它的实现（有时是 afs_pioctl() ）

发现的 184 个实例中的其余部分似乎是函数的使用、文档参考、发行说明、更改日志等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T05:34:21.273

我们决定的当前工作理论，在戳了预处理器并且也没有找到任何东西之后，是 OpenAFS 让编译器推断函数的原型，因为它返回一个整数并接受指针、整数、指针、整数作为它的参数。我将通过自己定义来处理这个问题。

**编辑**：太棒了！我找到了确凿的证据：

```
AFS.xs:2796: error: implicit declaration of function ‘pioctl’ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-10T19:44:25.143

虽然最初的一般问题已得到解答，但如果有人到达此页面想知道在哪里可以找到定义 pioctl 的头文件：

在当前版本的 OpenAFS (1.6.7) 中，pioctl 的原型在 sys_prototypes.h 中定义。但是在最初提出这个问题的时候，那个文件并不存在，并且在 OpenAFS 代码树之外没有可见的 pioctl 原型。

但是，大多数 pioctl 用户可能想要或者至少可以使用 lpioctl（“本地” pioctl），它总是在本地机器上发出系统调用。在 afssyscalls.h 中有一个原型（现在还有 sys_prototypes.h）。

不过，如今最简单的选择就是使用 libkopenafs。为此，包括 kopenafs.h，使用函数 k_pioctl，并链接到 -lkopenafs。这往往是一个比尝试与 OpenAFS libsys 和其他东西链接更方便的界面。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-03T05:26:22.667

通常不是在手册页概要中说吗？

# linux - 如何强制生成文件重建目标？

> ID：816370
> 
> 赞同：224
> 
> 时间：2009-05-03T05:00:49.047
> 
> 标签：linux, makefile

我有一个生成文件，然后调用另一个生成文件。由于这个 makefile 调用了更多的 makefile 来完成工作，所以它并没有真正改变。因此，它一直认为该项目已构建并且是最新的。

```
dnetdev11 ~ # make
make: `release' is up to date. 
```

如何强制 makefile 重建目标？

```
clean = $(MAKE) -f ~/xxx/xxx_compile.workspace.mak clean

build = svn up ~/xxx                                                       \
        $(clean)                                                                \
        ~/cbp2mak/cbp2mak -C ~/xxx ~/xxx/xxx_compile.workspace        \
        $(MAKE) -f ~/xxx/xxx_compile.workspace.mak $(1)                    \

release:
        $(build )

debug:
        $(build DEBUG=1)

clean:
        $(clean)

install:
        cp ~/xxx/source/xxx_utility/release/xxx_util /usr/local/bin
        cp ~/xxx/source/xxx_utility/release/xxxcore.so /usr/local/lib 
```

注意：删除姓名以保护无辜者

最终固定版本：

```
clean = $(MAKE) -f xxx_compile.workspace.mak clean;

build = svn up;                                         \
        $(clean)                                        \
        ./cbp2mak/cbp2mak -C . xxx_compile.workspace;   \
        $(MAKE) -f xxx_compile.workspace.mak    $(1);   \

.PHONY: release debug clean install

release:
        $(call build,)

debug:
        $(call build,DEBUG=1)

clean:
        $(clean)

install:
        cp ./source/xxx_utillity/release/xxx_util /usr/bin
        cp ./dlls/Release/xxxcore.so /usr/lib 
```

* * *

## 回答 #1

> 赞同：809
> 
> 时间：2009-05-03T05:18:07.337

make的`-B`开关，其长格式是`--always-make`，告诉`make`忽略时间戳并生成指定的目标。这可能会破坏使用 make 的目的，但它可能是您所需要的。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-05-03T05:03:26.620

您可以声明您的一个或多个目标是[虚假](http://www.gnu.org/software/make/manual/html_node/Phony-Targets.html)的。

> 虚假目标是不是真正的文件名的目标。相反，它只是您提出明确请求时要执行的配方的名称。使用假目标有两个原因：避免与同名文件发生冲突，以及提高性能。
> 
> ...
> 
> 虚假目标不应该是真实目标文件的先决条件；如果是，则每次 make 更新该文件时都会运行其配方。只要虚假目标永远不是真实目标的先决条件，虚假目标配方将仅在虚假目标是指定目标时执行

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-05-03T05:33:35.707

Sun 手册中记录的一个技巧`make`是使用（不存在的）目标“.FORCE”。您可以通过创建一个包含以下内容的文件 force.mk 来做到这一点：

```
.FORCE:
$(FORCE_DEPS): .FORCE 
```

然后，假设您现有的 makefile 被调用`makefile`，您可以运行：

```
make FORCE_DEPS=release -f force.mk -f makefile release 
```

由于`.FORCE`不存在，任何依赖于它的东西都将过时并重建。

所有这些都适用于任何版本的`make`; 在 Linux 上，您有 GNU Make，因此可以使用所讨论的 .PHONY 目标。

还值得考虑为什么`make`认为发布是最新的。这可能是因为您`touch release`在执行的命令中有一个命令；这可能是因为存在一个名为“release”的文件或目录并且没有依赖关系，因此是最新的。然后是真正的原因...

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2009-05-03T05:12:57.270

其他人建议使用 .PHONY，这绝对是正确的。.PHONY 应用于输入和输出之间的日期比较无效的任何规则。由于您没有任何表单目标，因此`output: input`您应该为所有目标使用 .PHONY！

综上所述，您可能应该在 makefile 的顶部为各种文件名定义一些变量，并定义具有输入和输出部分的真实 make 规则，以便您可以使用 make 的好处，即您只会实际编译需要交配的东西！

编辑：添加示例。未经测试，但这就是你的做法 .PHONY

```
.PHONY: clean    
clean:
    $(clean) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-03T05:06:29.720

如果我没记错的话，“make”使用时间戳（文件修改时间）来确定目标是否是最新的。强制重新构建的一种常见方法是使用“触摸”命令更新该时间戳。您可以尝试在您的 makefile 中调用“touch”来更新其中一个目标（可能是这些子 makefile 之一）的时间戳，这可能会强制 Make 执行该命令。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-04-21T13:43:01.957

这种简单的技术将允许 makefile 在不需要强制时正常运行。**在makefile**的末尾创建一个名为**force**的新目标。**强制**目标将触及您的默认目标所依赖的文件。在下面的示例中，我添加了**touch myprogram.cpp**。我还添加了一个递归调用**make**。这将导致每次键入**make force**时都会生成默认目标。

 ******```
yourProgram: yourProgram.cpp
       g++ -o yourProgram yourProgram.cpp 

force:
       touch yourProgram.cpp
       make 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-02-04T01:22:10.393

我试过这个，它对我有用

将这些行添加到 Makefile

```
clean:
    rm *.o output

new: clean
    $(MAKE)     #use variable $(MAKE) instead of make to get recursive make calls 
```

保存并立即调用

```
make new 
```

它会重新编译一切

发生了什么？

1）“新”调用干净。'clean' 执行 'rm' 删除所有扩展名为 '.o' 的目标文件。

2）“新”调用“制造”。'make' 看到没有 '.o' 文件，所以它会再次创建所有的 '.o'。然后链接器将所有 .o 文件链接到一个可执行输出

祝你好运

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-11-29T08:30:24.437

`make clean`删除所有已编译的目标文件。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-10-27T15:26:43.807

如果您不需要保留已成功编译的任何输出

```
nmake /A 
```

重建所有

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-08T17:17:50.667

根据 Miller 的[Recursive Make Considered Harmful](http://miller.emu.id.au/pmiller/books/rmch/)你应该避免打电话`$(MAKE)`！在您展示的情况下，它是无害的，因为这不是一个真正的生成文件，只是一个包装脚本，它也可能是用 Shell 编写的。但是你说你在更深的递归级别继续这样，所以你可能遇到了那篇令人大开眼界的文章中显示的问题。

当然，使用 GNU 会很麻烦。即使他们意识到了这个问题，这是他们记录在案的做事方式。

OTOH，[makepp](http://makepp.sourceforge.net/ "可靠的 GNU 替代品")是为了解决这个问题而创建的。您可以在每个目录级别编写您的 makefile，但它们都被绘制到您项目的完整视图中。

但是遗留的 makefile 是递归编写的。所以有一个解决方法，`$(MAKE)`除了将子请求引导回主 makepp 进程之外什么都不做。只有当你在你的 submakes 之间做多余的或者更糟糕的矛盾的事情时，你才必须请求`--traditional-recursive-make`（这当然会破坏 makepp 的这个优势）。我不知道你的其他makefile，但如果它们写得很干净，makepp 必要的重建应该会自动发生，而不需要其他人在这里建议的任何黑客。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-04-21T20:54:52.827

已经提到过，但我想我可以添加到使用`touch`

如果您`touch`要编译所有源文件，该`touch`命令会将文件的时间戳更改`touch`为执行该命令的系统时间。

源文件 timstamp`make`用于“知道”文件已更改，需要重新编译

例如：如果项目是一个 c++ 项目，那么 do `touch *.cpp`，然后`make`再次运行，并且 make 应该重新编译整个项目。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-02-14T08:02:17.837

正如 abernier 指出的那样，GNU make 手册中有一个推荐的解决方案，它使用“假”目标来强制重建目标：

```
clean: FORCE
        rm $(objects)
FORCE: ; 
```

这将运行干净，而不管任何其他依赖项。

我在手册中的解决方案中添加了分号，否则需要一个空行。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-02-21T15:32:29.637

这实际上取决于目标是什么。如果它是虚假目标（即目标与文件无关），您应该将其声明为.PHONY。

但是，如果目标不是虚假目标，但您只是出于某种原因想要重建它（例如，当您使用 __TIME__ 预处理宏时），您应该使用此处答案中描述的 FORCE 方案。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-07-02T02:22:59.123

在我的 Linux 系统（Centos 6.2）上，声明目标 .PHONY 和创建对 FORCE 的虚假依赖之间存在显着差异，而规则实际上确实创建了与目标匹配的文件。当每次都必须重新生成文件时，它需要文件上的假依赖 FORCE 和假依赖的 .PHONY。

错误的：

```
date > $@ 
```

正确的：

```
FORCE
    date > $@
FORCE:
    .PHONY: FORCE 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2012-06-11T20:11:59.690

[http://www.gnu.org/software/make/manual/html_node/Force-Targets.html#Force-Targets](http://www.gnu.org/software/make/manual/html_node/Force-Targets.html#Force-Targets)

# google-app-engine - 如何根据 App Engine 中的电子邮件地址确定 user_id？

> ID：816372
> 
> 赞同：13
> 
> 时间：2009-05-03T05:02:54.157
> 
> 标签：google-app-engine, email, user-identification

最新的 App Engine SDK (1.2.1) 有一个 API 调用，用于根据用户的电子邮件地址计算用户帐户的 ID。（即使用户稍后更改地址，该 ID 仍保持不变。）有关信息，请参阅[有关唯一、不透明用户 ID](https://stackoverflow.com/questions/778965/generating-unique-and-opaque-user-ids-in-google-app-engine)的问题。但是，我对此 API 调用有疑问。

`user_id()`适用于登录用户（即 from `users.get_current_user)`，但它返回构造函数`None`创建的对象`users.User()`。** 什么给出？

例如，使用出色的[App Engine 控制台](http://con.appspot.com)，此代码**不起作用**。

```
>>> import google.appengine.api.users
>>> me = google.appengine.api.users.get_current_user()
>>> me
users.User(email='jason.h.smith@gmail.com',_user_id='105261964646342707921')
>>> me.user_id()
'105261964646342707921'
>>> somebody = google.appengine.api.users.User('someone@gmail.com')
>>> somebody
users.User(email='someone@gmail.com')
>>>somebody.user_id()
>>> type(somebody.user_id())
<type 'NoneType'> 
```

我想要一种将电子邮件地址转换为用户 ID 的简单方法。 *如何提前从 Google 强制获取此 ID；或者如果不可能，为什么不呢？*

## 编辑：这是当前的解决方法。

感谢尼克约翰逊的回答。这是他的实际解决方案：

```
>>> from google.appengine.ext import db
>>> from google.appengine.api import users
>>> class User(db.Model):
...   user = db.UserProperty(required=True)
...
>>> def email_to_userid(address):
...   """Return a stable user_id string based on an email address, or None if
...   the address is not a valid/existing google account."""
...   u = users.User(address)
...   key = User(user=u).put()
...   obj = User.get(key)
...   return obj.user.user_id()
>>> email_to_userid('jason.h.smith@gmail.com')
u'105261964646342707921'
>>> email_to_userid('this@is-an-invalid-email-address')
>>> email_to_userid('this@is-an-invalid-email-address') is None
True 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-03T11:02:28.270

当前的解决方法是创建一个用户对象，将其存储到数据存储中，然后再次获取它。如果电子邮件对应于有效的 Google 帐户，则返回实体中的 User 对象将填充其 user_id 字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-05T00:31:17.750

要使建议的解决方案与 NDB 一起使用，只需将 use_cache=False, use_memcache=False 添加到 get 方法。也就是说： `obj = key.get(use_cache=False, use_memcache=False)` 这保证了从数据存储中获取实体并填充了 user_id 参数（仅当这是一个有效的 Google 帐户时）。

# java - Collection接口地址基数中的containsAll()和retainAll()？

> ID：816379
> 
> 赞同：2
> 
> 时间：2009-05-03T05:05:47.177
> 
> 标签：java, collections

在 Java 中，AbstractCollection 类中的 containsAll 和 retainAll 明确声明不尊重基数，因此换句话说，每边有多少个值实例并不重要。由于标准库中的所有 Java 集合都扩展了 AbstractCollection，因此假设它们都以相同的方式工作。

但是，Collection 接口中这些方法的文档并没有说什么。应该从 AbstractCollection 推断，还是故意未指定以允许定义不同工作方式的集合？

例如， apache-collections 中的 Bag 明确声明它确实尊重基数，并声称它违反了 Collection 版本的合同（尽管实际上并非如此）。

那么，这些操作在 Collection 中而不是在 AbstractCollection 中的语义是什么？

编辑：那些想知道我为什么会关心的人，那是因为作为我博士学位的一部分。工作我证明了开发人员并不期望 Apache 中的一致性违规，但我试图理解为什么 Collection 接口如此模棱两可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T07:06:45.483

containsAll (in Collection) 的 javadocs 说：

> 返回： 如果此集合包含指定集合中的所有元素，则返回 true

对于retainAll（在集合中）：

> 仅保留此集合中包含在指定集合中的元素（可选操作）。换句话说，从这个集合中移除所有不包含在指定集合中的元素。

I read containsAll's contract to mean that calling a.containsAll(b) will return true, if and only if, calling a.contains(bElem) for each element bElem in b would return true. I would also take it to imply that a.containsAll(someEmptyCollection) would also return true. As you state the javadocs for AbstractCollection more explicitly state this:

> This implementation iterates over the specified collection, checking each element returned by the iterator in turn to see if it's contained in this collection. If all elements are so contained true is returned, otherwise false.

I agree that the contact for Collection for containsAll sould be more explicit to avoid any possiblity for confusion. (And that the reading of the javadocs for AbstractCollection should NOT have been necessary to confirm ones understanding of Collection)

在调用retainAll之后，我不会对重复元素的数量做出假设。Collection 中规定的合同（根据我的阅读）并不意味着如何处理任一集合中的重复项。根据我对retainAll in collection 的阅读， a.retainAll(b) 的多个可能结果都是合理的：

1.  结果包含 1 个在 a 和 b 中至少有一个副本的元素
2.  结果包含在 a 中的每个元素（包括重复项），但不在 b 中的元素除外
3.  甚至，结果包含介于 1 和在 a 中的每个元素的 a 中找到的副本数之间的某个位置，除了那些不在 b 中的元素。我本来期望＃1或＃2，但会根据合同假设这三个中的任何一个都是合法的。

AbstractCollection 的 javadocs 确认它使用 #2：

> 这个实现迭代这个集合，依次检查迭代器返回的每个元素，看看它是否包含在指定的集合中。如果它没有被包含，它会使用迭代器的 remove 方法从这个集合中删除

尽管由于这不在我阅读原始 Collection 接口合同的范围内，但我不一定会假设 Collection 的行为通常是这种方式。

完成后，也许您应该考虑向 JavaDoc 提交建议的更新。

至于“为什么 Collection 接口如此模棱两可”——我严重怀疑这是故意的——可能只是在编写 API 的那部分时没有给予其应有的优先级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T05:33:58.233

我不认为 Collection 以这种或其他方式定义它，但它只是成为一种遵循 AbstractCollection 行为的约定，例如[google-collections](http://google-collections.googlecode.com)这样做：查看[他们的 Multiset 文档](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Multiset.html#containsAll(java.util.Collection))（Multiset 就是他们所说的 Bag）

# sql-server - sql server 2008 express 设置问题

> ID：816385
> 
> 赞同：0
> 
> 时间：2009-05-03T05:07:34.567
> 
> 标签：sql-server, sql-server-2008

我以前有 sql server 2005 express 并卸载了它。我还卸载了任何与 vs 相关的程序并安装了带有 SP1 的 visual web developer 2008 express edition。现在我正在尝试安装 sql server 2008，我看到的错误消息与众不同，没有任何建议就不要管它了..

我无法在互联网上找到正确解决方案的最新问题是；

sql server 注册表项的一致性验证错误，提示“无法修改以前安装的 SQL Server 注册表项。要继续，请参阅有关如何修复注册表项的 SQL Server 安装文档。

正如您可能没有猜到文档中提供的信息一样多...此外，当我尝试删除任何与 sql server 相关的注册表项时，它不会让我这样做。（是的，我停止了所有相关服务..）

这里有人可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-23T07:17:42.577

Well actually, I believe, one should not go through such mess in order to accomplish a simple task like this. In the end, I ended up formatting my PC and re-installing SQL Server.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-11-10T23:03:53.093

您可以尝试使用此过程：

*   停止所有 SQL Server 服务
*   删除所有 SQL Server 服务`sc delete servicename`
*   控制面板 - 添加/删除程序 - 选择和删除所有 Microsoft SQL Server 程序
*   打开 regedit 并删除此注册表项中的所有 SQL Server 文件夹：`HKEY_LOCAL_MACHINE/ SOFTWARE/MICROSOFT`
*   从 Program Files 目录中删除 SQL Server 文件夹
*   重启

这个过程应该可以解决问题，我已经用这个过程解决了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T11:48:47.427

我发现如果您安装了 SSMS 加载项，但在卸载 ssms 之前尚未卸载，就会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-22T15:50:14.587

您可能需要先使用 regedt32 更改相关注册表项的权限，然后才能通过普通 regedit 删除这些项

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-12T21:38:18.520

我知道这是一个老问题，你已经在评论中说你重新格式化了机器。但是，我刚刚遇到了这个确切的消息并想分享我的解决方案，因为它很简单，但是错误消息根本没有帮助！

我使用了错误的安装包。我有一台 64 位 Intel Windows 7 计算机，我正在尝试使用 SQL Server 2008 的 x86 版本。一旦我找到正确的版本 (x64)，我就没有收到此错误，并且安装正常进行。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-03T07:55:10.047

我遇到了类似的问题，因为我还剩下一些 SQL Server 2005 的残余物——不是服务，而是 IDE 的某些部分。无论如何，为了解决它，我使用了升级选项（对不起，我现在不记得确切的选项了）。在运行了几分钟的升级部分之后，我可以毫无问题地运行完整安装。

# python - Python：避免关于太多参数的 Pylint 警告

> ID：816391
> 
> 赞同：68
> 
> 时间：2009-05-03T05:13:02.387
> 
> 标签：python, refactoring, pylint

我想将一个大的 Python 函数重构为更小的函数。例如，考虑以下代码片段：

```
x = x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9 
```

当然，这是一个微不足道的例子。在实践中，代码更复杂。我的观点是它包含许多必须传递给提取函数的局部范围变量，如下所示：

```
def mysum(x1, x2, x3, x4, x5, x6, x7, x8, x9):
    x = x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9
    return x 
```

问题是 Pylint 会触发关于太多参数的警告。

我可以通过执行以下操作来避免警告：

```
def mysum(d):
    x1 = d['x1']
    x2 = d['x2']
    ...
    x9 = d['x9']
    x = x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9
    return x

def mybigfunction():
    ...
    d = {}
    d['x1'] = x1
    ...
    d['x9'] = x9
    x = mysum(d) 
```

但这种方法对我来说很难看。它需要编写大量甚至是多余的代码。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2009-05-03T07:22:58.563

首先，[玻璃市的一句警句](http://www.cs.yale.edu/homes/perlis-alan/quotes.html)：

> “如果你有一个有 10 个参数的程序，你可能会漏掉一些。”

这 10 个论点中的一些可能是相关的。将它们分组到一个对象中，然后传递它。

举个例子，因为问题中没有足够的信息来直接回答：

```
class PersonInfo(object):
  def __init__(self, name, age, iq):
    self.name = name
    self.age = age
    self.iq = iq 
```

然后你的 10 个参数函数：

```
def f(x1, x2, name, x3, iq, x4, age, x5, x6, x7):
  ... 
```

变成：

```
def f(personinfo, x1, x2, x3, x4, x5, x6, x7):
  ... 
```

调用者变为：

```
personinfo = PersonInfo(name, age, iq)
result = f(personinfo, x1, x2, x3, x4, x5, x6, x7) 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2009-05-03T07:59:40.147

您想要一种更好的方式来传递论点，还是只是一种阻止 Pylint 给您带来困难的方式？如果是后者，您可以通过在代码中添加 Pylint 控制注释来停止唠叨：

```
#pylint: disable=R0913 
```

或更好：

```
#pylint: disable=too-many-arguments 
```

记住尽快将它们重新打开。

在我看来，传递大量参数并没有任何*本质上*的错误，主张将它们全部包装在一些容器参数中的解决方案并没有真正解决任何问题，除了阻止 Pylint 唠叨你:-)。

如果你需要传递二十个参数，那么就传递它们。这可能是必需的，因为您的函数做的太多，重构可能会有所帮助，这是您应该考虑的事情。但这不是*我们*真正可以做出的决定，除非我们看到“真正的”代码是什么。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2009-05-03T10:58:03.400

您可以轻松更改 Pylint 中允许的最大参数数量。只需打开您的*pylintrc*文件（如果您还没有，请生成它）并更改：

```
max-args = 5 
```

至：

```
max-args = 6 # Or any value that suits you 
```

来自 Pylint 的[手册](https://pylint.readthedocs.io/en/latest/user_guide/run.html#command-line-options)

> 指定适合您的设置和编码标准的所有选项可能很乏味，因此可以使用 rc 文件来指定默认值。Pylint 查找 /etc/pylintrc 和 ~/.pylintrc。--generate-rcfile 选项将根据标准输出上的当前配置生成一个带注释的配置文件并退出。您可以将其他选项放在此选项之前以在配置中使用它们，或者从默认值开始并手动调整配置。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-05-03T05:17:42.470

您可以尝试使用[Python 的可变参数](http://docs.python.org/tutorial/controlflow.html#arbitrary-argument-lists)功能：

```
def myfunction(*args):
    for x in args:
        # Do stuff with specific argument here 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-05-03T05:18:05.480

也许您可以将一些参数转换为成员变量。如果您需要那么多状态，那么上课对我来说是个好主意。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-11-06T11:31:02.083

我不喜欢提到这个数字。符号名称更具表现力，并且避免了添加可能随着时间的推移而过时的注释。

所以我宁愿这样做：

```
#pylint: disable-msg=too-many-arguments 
```

而且我还建议不要让它悬在那里：它将保持活动状态，直到文件结束或被禁用，以先到者为准。

所以最好这样做：

```
#pylint: disable-msg=too-many-arguments
code_which_would_trigger_the_msg
#pylint: enable-msg=too-many-arguments 
```

我还建议每行启用/禁用一个警告/错误。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-05-03T05:16:17.853

简化或分解该函数，使其不需要九个参数（或忽略 Pylint，但像您提议的那样躲避 lint 工具的目的）。

如果这是一项临时措施，请使用*[Pylint 中所述的注释禁用相关特定功能的警告：为块或语句禁用消息？](http://lists.logilab.org/pipermail/python-projects/2006-April/000664.html)*

稍后，您可以使用 grep 查找所有禁用的警告。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-03T05:19:36.130

Python 有一些很好的函数式编程工具，很可能很好地满足您的需求。查看[lambda 函数](http://www.secnetix.de/olli/Python/lambda_functions.hawk)和[map](http://docs.python.org/library/functions.html)。此外，当您似乎更适合使用列表时，您正在使用 dicts。对于您提供的简单示例，请尝试使用此成语。请注意，地图会更好更快，但可能不适合您的需求：

```
def mysum(d):
   s = 0  
   for x in d:
        s += x
   return s

def mybigfunction():
   d = (x1, x2, x3, x4, x5, x6, x7, x8, x9)
   return mysum(d) 
```

您提到有很多局部变量，但坦率地说，如果您正在处理列表（或元组），从长远来看，您应该使用列表并排除所有这些局部变量。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-08-11T14:58:37.237

对于 Python3，您应该只使用[关键字参数](https://www.python.org/dev/peps/pep-3102/)：

### 文件*pylint_args_too_many.py*

```
"""Example of a function causing pylint too-many-arguments"""

def get_car(
    manufacturer, model, year=None, registration_number=None, vin=None, color=None
):
    """Returns dict with all required car attributes"""
    return dict(
        manufacturer=manufacturer,
        model=model,
        year=year,
        registration_number=registration_number,
        vin=vin,
        color=color,
    )

print(repr(get_car(manufacturer="ACME", model="Rocket"))) 
```

```
pylint pylint_args_too_many.py 

************* Module pylint_args_too_many
pylint_args_too_many.py:3:0: R0913: Too many arguments (6/5) (too-many-arguments)

------------------------------------------------------------------
Your code has been rated at 6.67/10 (previous run: 6.67/10, +0.00) 
```

### 文件*pylint_args.py*

```
"""Show how to avoid too-many-arguments"""

def get_car(
    *, manufacturer, model, year=None, registration_number=None, vin=None, color=None
):
    """Returns dict with all required car attributes"""
    return dict(
        manufacturer=manufacturer,
        model=model,
        year=year,
        registration_number=registration_number,
        vin=vin,
        color=color,
    )

print(repr(get_car(manufacturer="ACME", model="Rocket"))) 
```

```
pylint pylint_args.py 

--------------------------------------------------------------------
Your code has been rated at 10.00/10 (previous run: 10.00/10, +0.00) 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2019-01-05T18:51:50.443

我遇到了同样的唠叨错误，我意识到这与[PyCharm](https://en.wikipedia.org/wiki/PyCharm)自动检测的一个很酷的功能有关……只​​需添加`@staticmethod`装饰器，它就会自动删除使用该方法的错误。

# wpf - WPF：路由事件还是常规事件？

> ID：816392
> 
> 赞同：11
> 
> 时间：2009-05-03T05:14:14.147
> 
> 标签：wpf, events, routed-events

在 WPF 中，我们有路由事件。什么时候应该使用这些来代替常规活动？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-03T05:17:50.317

路由事件有特殊的行为，但如果您在引发它的元素上处理事件，则该行为在很大程度上是不可见的。

如果您使用任何建议的场景，路由事件变得强大的地方：在公共根中定义公共处理程序，合成您自己的控件，或定义您自己的自定义控件类。

路由事件侦听器和路由事件源不需要在其层次结构中共享公共事件。任何[UIElement](http://msdn.microsoft.com/en-us/library/system.windows.uielement.aspx)或[ContentElement](http://msdn.microsoft.com/en-us/library/system.windows.contentelement.aspx)都可以是任何路由事件的事件侦听器。因此，您可以将整个工作 API 集中可用的全套路由事件用作概念“接口”，从而应用程序中的不同元素可以交换事件信息。这种用于路由事件的“接口”概念特别适用于输入事件。

路由事件也可用于通过元素树进行通信，因为事件的事件数据被永久保存到路由中的每个元素。一个元素可以更改事件数据中的某些内容，并且该更改将可用于路由中的下一个元素。

除了路由方面，还有其他两个原因可以将任何给定的 WPF 事件实现为路由事件而不是标准 CLR 事件。如果您正在实现自己的事件，您还可以考虑以下原则：

*   某些 WPF 样式和模板功能（例如[EventSetter](http://msdn.microsoft.com/en-us/library/system.windows.eventsetter.aspx)和[EventTrigger](http://msdn.microsoft.com/en-us/library/system.windows.eventtrigger.aspx) ）要求引用的事件是路由事件。这就是前面提到的事件标识符场景。
*   路由事件支持类处理机制，类可以指定静态方法，这些方法有机会在任何注册的实例处理程序可以访问它们之前处理路由事件。这在控件设计中非常有用，因为您的类可以强制执行事件驱动的类行为，这些行为不会通过处理实例上的事件而被意外抑制。

来源：[MSDN：路由事件概述](http://msdn.microsoft.com/en-us/library/ms742806.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-07-15T17:31:59.337

在 WPF 控件组合中被高度使用。它要求使用路由事件，因为一组控件的组合在大多数情况下都会暴露单个活动。

# sql - SQL Server 2008 慢表，表分区

> ID：816395
> 
> 赞同：0
> 
> 时间：2009-05-03T05:17:17.150
> 
> 标签：sql, sql-server-2008

我有一张已经增长到超过 100 万条记录的表......今天（全部有效）

我需要加快速度......表分区会是答案吗？如果是这样，我可以在构建查询方面获得一些帮助吗？

该表有 4 个 bigint 值键，所有这些都具有索引的主键和用户 ID 上的索引 desc，其他值最大为 139（现在只有 10,000 多个用户）

任何帮助或方向将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T07:21:01.220

在考虑分区之前，您应该调查您的索引和查询工作负载。如果您进行了大量的插入操作，您的聚集索引可能会出现碎片。

即使您使用的是 SQL Server Express，您仍然可以使用此免费工具进行分析：[Profiler for Microsoft SQL Server 2005/2008 Express Edition](http://sqlprofiler.googlepages.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T05:25:43.057

您可能只需要调整查询和/或索引。100 万条记录不应该给您带来问题。我有一张有几亿条记录的表，并且能够保持相当高的性能。我发现 SQL Server 分析器对这些东西很有帮助。它在 SQL Server Management Studio 中可用（但不幸的是，不是 express 版本）。您还可以`Query > Include Actual Execution Plan`查看查询期间所用时间的图表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T07:39:11.460

我同意其他评论。对于相当小的数据库（最大的表 1MM 记录），如果优化查询并且其余代码没有通过冗余查询滥用数据库，那么数据库中的任何活动都不太可能提供明显的负载。这是了解数据库查询和其余代码之间相互作用的好机会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-02T17:27:02.477

在此处查看我关于 sql 表分区的实验 [ [http://faiz.kera.la/2009/08/02/does-partitioning-improve-performance-for-sql-tables/]](http://faiz.kera.la/2009/08/02/does-partitioning-improve-performance-for-sql-tables/])。希望这对您有所帮助...对于您的情况，1M并不是一个可观的数字。可能您需要微调查询而不是进行分区。

# php - 帮助php空白页？

> ID：816404
> 
> 赞同：1
> 
> 时间：2009-05-03T05:20:42.273
> 
> 标签：php

我经营着一个梦幻篮球联赛。我的 php 网站/sql 数据库旨在让管理团队的人通过网站做所有事情——他们可以放弃一名球员，球员自动进入 FA 池等。

直到大约一周前，一切都运行良好。现在任何时候球队去签一名球员，点击“签”后，他们会得到一个空白的 PHP 页面。我不知道为什么 - 我没有对任何文件进行任何调整。它刚刚开始发生。下面是空白 PHP 页面的代码 - 有人可以帮忙吗？

```
<?php

$username = "me";
$password = "mypassword";
$database = "mydatabase";

mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");

$Team_Offering = $_POST['Team_Name'];
$Fields_Counter = $_POST['counterfields'];
$Roster_Slots = $_POST['rosterslots'];
$Healthy_Roster_Slots = $_POST['healthyrosterslots'];
$Type_Of_Action = $_POST['Action'];

$queryt="SELECT * FROM nuke_ibl_team_info WHERE team_name = '$Team_Offering' ";
$resultt=mysql_query($queryt);

$teamid=mysql_result($resultt,0,"teamid");

$Timestamp = intval(time());

// ADD TEAM TOTAL SALARY FOR THIS YEAR

$querysalary="SELECT * FROM nuke_iblplyr WHERE teamname = '$Team_Offering' AND retired = 0 ";
$results=mysql_query($querysalary);
$num=mysql_numrows($results);
$z=0;

while($z < $num)
    {
        $cy=mysql_result($results,$z,"cy");
        $cyy = "cy$cy";
        $cy2=mysql_result($results,$z,"$cyy");
        $TotalSalary = $TotalSalary + $cy2;
        $z++;
    }

//ENT TEAM TOTAL SALARY FOR THIS YEAR

$k=0;
$Salary=0;

while ($k < $Fields_Counter)
{
$Type=$_POST['type'.$k];
$Salary=$_POST['cy'.$k];
$Index=$_POST['index'.$k];
$Check=$_POST['check'.$k];
$queryn="SELECT * FROM nuke_iblplyr WHERE pid = '$Index' ";
$resultn=mysql_query($queryn);
$playername=mysql_result($resultn,0,"name");
$players_team=mysql_result($resultn,0,"tid");

if ($Check == "on")
  {
  if ($Type_Of_Action == "drop")
    {
      if ($Roster_Slots < 4 and $TotalSalary > 7000)
        {

          echo "You have 12 players and are over $70 mill hard cap.  Therefore you can't drop a player! <br>You will be automatically redirected to <a href=\"http://www.chibul.com/iblv2\">the main IBL page</a> in a moment.  If you are not redirected, click the link.";

        }else{

          $queryi = "UPDATE nuke_iblplyr SET `ordinal` = '1000', `droptime` = '$Timestamp' WHERE `pid` = '$Index' LIMIT 1;";
          $resulti=mysql_query($queryi);

          $topicid=32;
          $storytitle=$Team_Offering." make waiver cuts";
          $hometext="The ".$Team_Offering." cut ".$playername." to waivers.";

          // ==== PUT ANNOUNCEMENT INTO DATABASE ON NEWS PAGE 
          $timestamp=date('Y-m-d H:i:s',time());

          $querycat="SELECT * FROM nuke_stories_cat WHERE title = 'Waiver Pool Moves'";
          $resultcat=mysql_query($querycat);
          $WPMoves=mysql_result($resultcat,0,"counter");
          $catid=mysql_result($resultcat,0,"catid");

          $WPMoves=$WPMoves+1;

          $querycat2="UPDATE nuke_stories_cat SET counter = $WPMoves WHERE title = 'Waiver Pool Moves'";
          $resultcat2=mysql_query($querycat2);

          $querystor="INSERT INTO nuke_stories (catid,aid,title,time,hometext,topic,informant,counter,alanguage) VALUES ('$catid','Associated Press','$storytitle','$timestamp','$hometext','$topicid','Associated Press','0','english')";
          $resultstor=mysql_query($querystor); 
          echo "<html><head><title>Waiver Processing</title>
            </head>
            <body>
            Your waiver moves should now be processed.  <br>You will be automatically redirected to <a href=\"http://www.chibul.com/iblv2\">the main IBL page</a> in a moment.  If you are not redirected, click the link.
            </body></html>";
        }

    } else {
      if ($players_team == $teamid)
        {
          $queryi = "UPDATE nuke_iblplyr SET `ordinal` = '800', `teamname` = '$Team_Offering', `tid` = '$teamid' WHERE `pid` = '$Index' LIMIT 1;";
          $resulti=mysql_query($queryi);
          $Roster_Slots++;

          $topicid=33;
          $storytitle=$Team_Offering." make waiver additions";
          $hometext="The ".$Team_Offering." sign ".$playername." from waivers.";

          // ==== PUT ANNOUNCEMENT INTO DATABASE ON NEWS PAGE 

          $timestamp=date('Y-m-d H:i:s',time());

          $querycat="SELECT * FROM nuke_stories_cat WHERE title = 'Waiver Pool Moves'";
          $resultcat=mysql_query($querycat);
          $WPMoves=mysql_result($resultcat,0,"counter");
          $catid=mysql_result($resultcat,0,"catid");

          $WPMoves=$WPMoves+1;

          $querycat2="UPDATE nuke_stories_cat SET counter = $WPMoves WHERE title = 'Waiver Pool Moves'";
          $resultcat2=mysql_query($querycat2);

          $querystor="INSERT INTO nuke_stories (catid,aid,title,time,hometext,topic,informant,counter,alanguage) VALUES ('$catid','Associated Press','$storytitle','$timestamp','$hometext','$topicid','Associated Press','0','english')";
          $resultstor=mysql_query($querystor); 
          echo "<html><head><title>Waiver Processing</title>
            </head>
            <body>
            Your waiver moves should now be processed.  <br>You will be automatically redirected to <a href=\"http://www.chibul.com/iblv2\">the main IBL page</a> in a moment.  If you are not redirected, click the link.
            </body></html>";

        } else {

          if ($Healthy_Roster_Slots < 4 and $TotalSalary + $Salary > 7000)
          {

              echo "You have 12 or more healthy players and this signing will put you over $70\.  Therefore you can not make this signing. <br>You will be automatically redirected to <a href=\"http://www.chibul.com/iblv2\">the main IBL page</a> in a moment.  If you are not redirected, click the link.";

          } elseif ($Healthy_Roster_Slots > 3 and $TotalSalary + $Salary > 7000 and $Salary > 103) {

              echo "You are over the hard cap and therefore can only sign players who are making veteran minimum contract! <br>You will be automatically redirected to <a href=\"http://www.chibul.com/iblv2\">the main IBL page</a> in a moment.  If you are not redirected, click the link.";

          } elseif ($Healthy_Roster_Slots < 1) {
              echo "You have full roster of 15 players.  You can't sign another player at this time! <br>You will be automatically redirected to <a href=\"http://www.chibul.com/iblv2\">the main IBL page</a> in a moment.  If you are not redirected, click the link.";

          } else {

              $queryi = "UPDATE nuke_iblplyr SET `ordinal` = '800', `bird` = '0', `cy` = '1', `cy1` = '$Salary', `teamname` = '$Team_Offering', `tid` = '$teamid' WHERE `pid` = '$Index' LIMIT 1;";
              $resulti=mysql_query($queryi);
              $Roster_Slots++;

              $topicid=33;
              $storytitle=$Team_Offering." make waiver additions";
              $hometext="The ".$Team_Offering." sign ".$playername." from waivers.";

              // ==== PUT ANNOUNCEMENT INTO DATABASE ON NEWS PAGE 

              $timestamp=date('Y-m-d H:i:s',time());

              $querycat="SELECT * FROM nuke_stories_cat WHERE title = 'Waiver Pool Moves'";
              $resultcat=mysql_query($querycat);
              $WPMoves=mysql_result($resultcat,0,"counter");
              $catid=mysql_result($resultcat,0,"catid");

              $WPMoves=$WPMoves+1;

              $querycat2="UPDATE nuke_stories_cat SET counter = $WPMoves WHERE title = 'Waiver Pool Moves'";
              $resultcat2=mysql_query($querycat2);

              $querystor="INSERT INTO nuke_stories (catid,aid,title,time,hometext,topic,informant,counter,alanguage) VALUES ('$catid','Associated Press','$storytitle','$timestamp','$hometext','$topicid','Associated Press','0','english')";
              $resultstor=mysql_query($querystor); 
              echo "<html><head><title>Waiver Processing</title>
                </head>
                <body>
                Your waiver moves should now be processed.  <br>You will be automatically redirected to <a href=\"http://www.chibul.com/iblv2\">the main IBL page</a> in a moment.  If you are not redirected, click the link.
                </body></html>";

            }
        }
    }
  }
$k++;
}

?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-03T05:26:48.890

将以下内容放在打开的 PHP 标记之后：

```
error_reporting(E_ALL);
ini_set('display_errors', 'On'); 
```

如果这不起作用，则可能存在解析错误，然后您需要检查错误日志。

您还需要转义您在查询中输入的值。这可能会导致 MySQL 查询失败。如果有人`"`输入 $_POST['Team_Name'] 您的第一个查询可能会失败。

最后一个可能的问题：你确定它仍然可以连接到 MySQL 吗？

找到问题的一种方法是注释掉大部分代码，然后逐个取消注释部分。

**编辑：**所以你的第一个问题是`mysql_connect`线路。需要将其更改为，注意引号：`mysql_connect('localhost',$username,$password);`此外，该行中的变量`$result`和`$queryt`拼写错误并以正确的拼写方式使用：`$resultt=mysql_query($queryt);`我尚未检查其余部分，但可能还有其他错误会导致您的脚本中断。一些错误列表对于修复很重要，但不会破坏您的脚本。

转义：查看以下页面： http: [//php.net/manual/en/function.mysql-escape-string.php](http://php.net/manual/en/function.mysql-escape-string.php)这基本上可以防止人们删除您的整个数据库。

检查[此页面](http://php.net/manual/en/function.mysql-connect.php)上的示例代码以了解如何连接到 MySQL 并检查您是否已连接。

**另一个建议：**你确定你的查询都没有失败吗？您可能想在继续之前检查查询的结果是否为假，例如：

```
if ($resultcat2 === false) {
    trigger_error('query failed ' . $sql, E_USER_ERROR);
    echo 'Sorry, there was a problem processing your request. Please try again later.';
    exit;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T05:25:39.517

在 php.ini 文件中打开 PHP 的错误报告并查看是否报告了任何错误或警告。还尝试在最后一个？>之前删除文件末尾的尾随空格，这在过去给我带来了问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-03T05:48:10.307

对上述一些回复添加了评论。请尽量为我哑口无言 - 我对此非常陌生。但是，当我根本没有对代码进行任何更改时，我无法弄清楚为什么它会突然停止工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-03T06:15:44.420

如果您没有对任何文件进行任何更改并且它只是“损坏”了，那么这表明您的网络主机通过了配置更改，您的数据库以某种方式被破坏了，或者其他人可能已经更改了某些内容。

为了帮助找出罪魁祸首，在每一个之后

```
if{
else{
while{ 
```

或/和在每几个语句之后（语句以分号结尾；）将其添加到下一行

```
print "<br> made it to this label: some_unique_label_name_here"; 
```

每次应该更换标签以帮助您跟踪代码的位置。这将是您调试脚本以了解代码执行达到多远的第一步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T19:06:07.237

So an update...nothing. lol

If you review this code:

```
$k=0; 
```

$Salary=0;

print "
made it to this label: some_unique_label_name_here";

while ($k < $Fields_Counter)

{

$Type=$_POST['type'.$k];

$Salary=$_POST['cy'.$k];

$Index=$_POST['index'.$k];

$Check=$_POST['check'.$k];

$queryn="SELECT * FROM nuke_iblplyr WHERE pid = '$Index' "; $resultn=mysql_query($queryn);

$playername=mysql_result($resultn,0,"name");

$players_team=mysql_result($resultn,0,"tid");

If I put the print statement below while, the page goes blank and it doesn't show up. If the print statement is before while, the statement shows up but there's no action made on the page. The end result is that when running this page, the player selected on the previous page should be removed from Free Agents, added to the user's team, and a story should be posted on the front page announcing it. Obviously none of those are happening here.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-03T07:45:02.880

顺便说一句，您应该更改 get 或 post 中的每个变量，例如：

```
$Team_Offering = $_POST['Team_Name']; 
```

至

```
$Team_Offering = mysql_real_escape_string($_POST['Team_Name']); 
```

在 mysql 查询中使用它之前，否则你很容易受到 SQL 注入攻击。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-03T05:30:11.520

在不详细介绍您的代码的情况下，我建议您查找任何可能循环很长时间而不返回的部分

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-03T05:40:12.010

启用错误报告后，请确保放入与所有 if 语句相对应的 else 语句，以便确定这些语句是否被触发。加入一些回声。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-03T06:26:56.327

另外，澄清一下——我在网站上可能有三打 PHP 文件——这是唯一一个停止工作的文件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-03T06:44:34.710

这就是我得到的地方......如果我把打印线放在它下面，打印线下面的所有东西都不会显示出来。

```
$k=0;
$Salary=0;

print "<br> made it to this label: some_unique_label_name_here";

while ($k < $Fields_Counter)

{

$Type=$_POST['type'.$k];

$Salary=$_POST['cy'.$k];

$Index=$_POST['index'.$k];

$Check=$_POST['check'.$k];

$queryn="SELECT * FROM nuke_iblplyr WHERE pid = '$Index' ";
$resultn=mysql_query($queryn);

$playername=mysql_result($resultn,0,"name");

$players_team=mysql_result($resultn,0,"tid"); 
```

# javascript - 使用 javascript 在 html 表中创建链接

> ID：816431
> 
> 赞同：5
> 
> 时间：2009-05-03T05:51:05.680
> 
> 标签：javascript, html, dom

我正在使用以下代码将列动态添加到 html 表中：

```
var tblHeadObj = window.opener.document.getElementById("maintable").tHead;
var j=0;
while(j < fname.length)
{ 
  if(tblHeadObj != null) 
  {
    for(var h = 0; h < tblHeadObj.rows.length; h++) 
    {
      var newTH = window.opener.document.createElement('th');

      tblHeadObj.rows[h].appendChild(newTH);
      //newTH.innerHTML='[th]row:'+h+'cell:'+(tblHeadObj.rows[h].cells.length-1)
    }
  }
  var tblBodyObj = window.opener.document.getElementById("maintable").tBodies[0];
  //for(var i = 0; i < tblBodyObj.rows.length; i++) {
  var newCell=tblBodyObj.rows[0].insertCell(-1);
  var newCell=tblBodyObj.rows[0].insertCell(-1);
  // newCell.innerHTML = (tblBodyObj.rows[0].cells.length - 1)
  newCell.innerHTML=  fname[j];
  j++;
} 
```

现在我想将列作为链接​​。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-03T07:13:47.353

正如其他人所指出的，“将列作为链接​​”是什么意思还不清楚。然而，作为一个社区，我们已经习惯于对真正的问题进行猜测，并根据该假设提供解决方案。随着我们获得解决越来越多不清楚的问题的经验，我们的 ESP 技能变得更加磨练。

您似乎正在通过 DOM 方法创建 HTML 表。我假设您想在创建的表格单元中创建一个链接，这是我的建议：

使用相同的`createElement`方法创建您需要的任何元素。例如，可以使用以下代码创建链接（锚点）：

```
var link = document.createElement("a");
link.setAttribute("href", "http://www.microsoft.com")
link.className = "someCSSclass";
// For IE only, you can simply set the innerText of the node.
// The below code, however, should work on all browsers.
var linkText = document.createTextNode("Click me");
link.appendChild(linkText);

// Add the link to the previously created TableCell.
newCell.appendChild(link); 
```

或者，您也可以按照@Anonymous 的建议设置 TableCell 的 innerHTML。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-03T06:07:51.037

如果您尝试将单元格内容放入锚点，那么一种方法是更改

```
newCell.innerHTML=  fname[j]; 
```

至

```
newCell.innerHTML=  '<a href="'+whatever+'">'+fname[j]+'</a>'; 
```

where`whatever`是一个包含适当字符串的变量。

请注意，所有内容`fname[j]`都是内联的（例如，不是表格或块，如 div、标题、表单——但表单输入是可以的），否则大多数浏览器会过早关闭锚点。如果需要，您可以仅将锚点放在单元格内容的部分周围，但最简单的方法取决于内容是什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-12-31T09:51:12.660

这一切都很好，但我需要链接中的图像，所以这里是代码：

```
 cell[k] = document.createElement('td');
   var link = document.createElement('a');
            link.setAttribute('href', "http://www.ilovethismusic.com");
            link.setAttribute('target', "_blank");

            var newimg = document.createElement('img');
            newimg.src = "http://www.ilovethismusic.com/Views/Images/bg_header.jpg";
            newimg.alt = "imageMissing";
            newimg.width = "95";
            newimg.height = "45";
            newimg.border = "0";

            link.appendChild(newimg);

        cell[k].appendChild(link); 
```

# javascript - jQuery：为什么我不能在我的滚动事件中访问事件对象？

> ID：816436
> 
> 赞同：0
> 
> 时间：2009-05-03T05:55:08.917
> 
> 标签：javascript, jquery

我想访问原始事件对象，但对象返回 undefined..

```
$(window).scroll(function(event) {
        alert(event.pageX);
    }); 
```

我只是在尝试一下，如果它会起作用。该示例尽可能基本，因此我也可以计算其他事件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-03T06:22:48.070

需要注意的一件事是**不要将单词`event`**用作参数（或变量）的名称，因为在某些浏览器（如 IE 和 Chrome）中，`event`它已经是一个对象，如果使用它，您将被覆盖已经存在的功能。

因此，尝试将您的代码更改为：

```
$(window).scroll(function(ev) {
    alert(ev.pageX);
}); 
```

# c# - 一个 exe 中的多个 Windows 服务

> ID：816437
> 
> 赞同：28
> 
> 时间：2009-05-03T05:55:55.310
> 
> 标签：c#, windows, windows-services

我正在尝试构建几个 Windows 服务来做不同的事情。例如，我需要以下 Windows 服务：

1.  通过电子邮件发送每日报告
2.  每 30 分钟定期清理一些存档信息
3.  等等

我需要 Windows 服务来完成的任务是不同的，所以我不太喜欢将它们全部放在一个服务中的想法。

到目前为止，我得到的是 Visual Studio 2008 中的一个项目。我创建了一个 Windows 服务，我在 OnStart 事件上设置了一个计时器（它只是每 5 秒写入一个文本文件以进行测试）。然后我在项目中添加了一个安装程序，当我运行 InstallUtil.exe 时，一切正常。

当我向同一个项目添加第二个 Windows 服务时，问题就出现了。我再次设置了 OnStart 代码，使用相同的日志记录信息（略有不同，因此我可以知道哪个服务正在写入日志）。使用第二个 Windows 服务，我将 Program.cs 中的 Main 事件从：

```
 static void Main(string[] args)
    {
        ServiceBase[] ServicesToRun = new ServiceBase[] 
        { 
            new Service1()
        };

        ServiceBase.Run(ServicesToRun);
    } 
```

至：

```
 static void Main(string[] args)
    {
        ServiceBase[] ServicesToRun = new ServiceBase[] 
        { 
            new Service1(),
            new Service2()
        };

        ServiceBase.Run(ServicesToRun);
    } 
```

此时，没有编译时错误，但 Service2 服务从不做任何事情……日志记录任务永远不会触发。

我将其缩小到第二个服务没有与之关联的“安装程序”这一事实。然后，我尝试像使用第一个服务一样添加安装程序（即，右键单击服务设计器，然后单击“添加安装程序”）。现在，当我转到 ProjectInstaller.cs 文件时，那里还有另一个 serviceInstaller (serviceInstaller2)。

现在，当我构建项目并尝试安装服务时，我转到“服务”控制面板窗口，尝试启动 Service1，我收到以下错误消息：

> Windows 无法在本地计算机上启动 Service1 服务。
> 
> 错误 1083：此服务配置为运行的可执行程序未实现该服务。

如果我也尝试启动 Service2，我会收到相同的错误消息（当然，错误消息标识 Service2 除外）。

为了让两个服务从一个 exe 运行，我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-11-06T22:39:05.757

我已经想出了如何拥有一个可执行文件但有两个服务。每个服务都以自己的名称和启动/停止能力安装到服务管理器。我想这就是你想要的，对吗？这是我所做的：

1.  创建了一个服务项目。
2.  向同一个项目添加了第二个服务（具有唯一的服务名称）。
3.  为两个服务（ServiceA 和 ServiceB）添加了安装程序。
4.  在 ProjectInstaller.Designer.vb 文件中，我更改了 Me.Installers.AddRange 行以显示两个服务安装程序。(Me.ServiceInstaller1, Me.ServiceInstaller2)
5.  在主服务的 Main 入口点（在我的例子中是 ServiceA），我将 ServicesToRun 变量设置为一个包含我希望它运行的所有服务（ServiceA 和 ServiceB）的 ServiceBase 数组。这是一个重要的步骤，因为服务管理器根据此处的参数数量设置属性 - 允许同一 exe 的多个实例或仅允许单个实例。
6.  添加安装程序项目并使用服务的输出。
7.  使用服务的输出添加自定义操作。

您可以在此处找到演示代码：
[http ://code.google.com/p/multi-service-install/](http://code.google.com/p/multi-service-install/)

# 享受！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-10-15T10:42:18.683

我想你们已经解决了这个问题，但是如果其他人需要它，我会发布一个今天花了我几个小时的问题的答案。解决的办法不是添加另一个项目安装程序，而是添加一个服务安装程序，它是项目安装程序上的一个组件。新添加的服务安装程序必须配置第二个服务名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-11T07:41:26.060

我今天遇到了类似的问题，并设法解决了。

首先，我确保每个服务都有一个有意义且唯一的 ServiceName 属性。生成器为这两个服务都赋予了相同的名称，这不会有帮助。

然后我删除并重新生成了 ProjectInstaller 类，并为每个类添加了安装程序。我确保它们都在静态 Main 方法中实例化。

我现在可以使用一个 dll 安装这两个服务，但不幸的是，当我启动其中一个服务时，它似乎同时执行自身和另一个服务的功能。也就是说，这两项服务都在运行（即使只有一项服务在计算机管理器中显示为“已启动”）。我还在想办法解决这个问题...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T06:39:58.027

我实际上正在构建与您的想法非常相似的东西。我决定做的（到目前为止）是让我所有的“服务”（虽然它们不是服务，但一个“控制器”是）实现一个特定的接口（也使用 init() 和 execute() 操作作为 FREQUENCY 枚举）。

控制器是 Windows 服务，它在运行时从 xml 设置文件中读取程序/dll 列表，并将它们加载到列表中，并以它们定义的任何频率调用它们的 execute() 方法（如果适用）。

在我的例子中，每个程序还包含一个用户控件，它被加载到控制器的标签页中，允许用户控制/修改它。如果您有兴趣，我会发布代码。

不确定这是否清楚。我实际上是从另一个 SO 用户那里得到了这个想法，他实现了类似的东西，但我现在找不到那个帖子。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-01-04T09:29:28.423

我使用 sc.exe 轻松完成此任务。[http://support.microsoft.com/kb/251192](http://support.microsoft.com/kb/251192)

例如：`sc create "My Display Service Name" binpath= "c:\app\mysvc.exe --service"`

注意：每个等号都应该在其值之前有*空格*，正如您在“binpath”中看到的那样

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-11-20T01:07:15.877

在一个可执行文件中安装 2 个不同且不相关的服务对我来说有一种奇怪的味道。虽然有可能让它工作，但它并没有使它正确。

听起来，您需要以不同的时间间隔执行一些不同的任务，并且您的任务可能相关也可能不相关。你看过 Quartz.NET 吗？这听起来很适合您的需求。

[http://quartznet.sourceforge.net/features.html](http://quartznet.sourceforge.net/features.html)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-10-12T16:00:40.680

我今天遇到了同样的问题并设法解决了它。在我的情况下，我只需要打开我的服务的 *.designer.cs 文件并确保服务名称设置正确。更重要的是，如果您在 *Installer.cs 中有代码，则应在 *Installer.Designer.cs 中使用相同的名称。

我认为此错误仅由于名称不匹配而发生。

希望这会有所帮助

# c# - Substage - 制作符合 MS StyleCop 的模板

> ID：816438
> 
> 赞同：0
> 
> 时间：2009-05-03T05:57:29.940
> 
> 标签：c#, subsonic, substage

我有一个大小适中的爱好项目，大约 66K LOC，位于[http://www.wheelmud.net](http://www.wheelmud.net) 最近，一名团队成员获得了符合 MS StyleCop 的大部分代码。唯一剩下的是我们的数据层。您可以想象，由于我们仍处于开发的早期阶段，因此它会经常重新生成。

我尝试修改 aspx 模板，但我看到了很多我需要修复的东西。我看到的第一件事是 using 语句位于命名空间声明之上。有什么方法可以通过模板修改这种行为，还是我需要用电锯来处理 SubStage 的代码？

我不介意更改源，但我想在我开始之前先问一下。我以前为其他项目做过这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T03:44:57.003

在 2.2 版中，添加了一个补丁以将标签添加到生成文件的顶部，以便 StyleCop 忽略它们。[看到这个问题](http://code.google.com/p/subsonicproject/issues/detail?id=40)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T18:31:59.493

我将把所有现有的模板滚动到 T4 中以避免将来出现模板问题。我们仍然会支持旧的东西 - 但使用 T4 来做这将真的有助于像你这样的情况

# xml - crossdomain.xml 不工作

> ID：816441
> 
> 赞同：0
> 
> 时间：2009-05-03T05:59:22.853
> 
> 标签：xml, flash

我需要向我的网站添加一个 crossdomain.xml 文件，以便可嵌入的 flash 小部件可以访问其 rss 提要。小部件抛出错误，看起来是因为我的 crossdomain.xml 文件没有被视为有效的 xml 文件。

注意到如果您浏览到我网站上的跨域文件，浏览器会打开下载对话框：http: [//imgfave.com/crossdomain.xml](http://imgfave.com/crossdomain.xml)

而如果您转到另一个站点上的跨域文件，浏览器会打开该文件： http: [//newfoundlandartstore.com/crossdomain.xml](http://newfoundlandartstore.com/crossdomain.xml)

也许我的服务器没有包含 xml 文件的正确标头？无论如何有一个php跨域文件并在PHP中设置标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T06:01:19.993

在顶部，放置：

```
<?php
  header('Content-Type: text/xml');
?> 
```

要使网络服务器`.xml`作为`.php`文件运行，请将其添加到`.htaccess`：

```
RemoveHandler .xml
AddType application/x-httpd-php .xml 
```

但是，您可以避免使用 PHP 并简单地编写：

```
AddType text/xml .xml 
```

# nhibernate - Nhibernate - 在 Web 应用程序中使用 HasMany 集合加载实体

> ID：816444
> 
> 赞同：2
> 
> 时间：2009-05-03T06:02:31.987
> 
> 标签：nhibernate, model-view-controller

首先是其他人试图进入 forum.hibernate.org。我已经尝试了一段时间。不敢相信它下来了。

我是 NHibernate 的新手。放轻松。

我有一个 MVC 应用程序，我有一个名为 Recipe 的实体，它有 HasMany 集合评论、成分和图像。

在 MVC 控制器的操作中，我正在加载前 20 个配方以加载到我的主页上。

我正在使用以下 HQL 来执行此操作。我想预取图像，以便显示第一个图像。但我的第一个食谱有 3 张图片，因此查询结果为一个食谱加载了 3 行。

```
 string sql = "from Recipe r " +
            "left join fetch r.Images " +
            "inner join fetch r.User " + 
            "where r.Completed!=0";
        IList<Recipe> recipes = (IList<Recipe>)session.CreateQuery(sql)
            .SetMaxResults(20)
            .List<Recipe>(); 
```

我用什么方法来加载前 20 个已加载图像的食谱？？？我强调我想预取图像而不是延迟加载，这是因为列表是在控制器操作中加载的，所以当我在我的用户控件中枚举它们时无法加载图像。

马尔科姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T07:55:29.110

试试这个：

```
string sql = "from Recipe r " +
       "left join fetch r.Images " +
       "inner join fetch r.User " + 
       "where r.Completed!=0";

var recipes = session
    .CreateQuery(sql)
    .SetResultTransformer(CriteriaUtil.DistinctRootEntity)
    .SetMaxResults(20)
    .List<Recipe>(); 
```

# asp.net-mvc - 使用哪个：“AcceptGet，AcceptPost”（MvcContrib）与AcceptVerbs（ASP.NET Mvc）？

> ID：816456
> 
> 赞同：4
> 
> 时间：2009-05-03T06:22:21.457
> 
> 标签：asp.net-mvc

在 ASP.NET MVC 中，控制器方法可以被修饰为接受特定的 HTTP 方法（Get、Post、Get.. 等）。在 MvcContrib 和 ASP.NET MVC 之间有 3 个类：“AcceptGet、AcceptPost”和 AcceptVerbs。这三个：“AcceptGet，AcceptPost”和 AcceptVerbs 做同样的事情。他们指定允许什么 http 方法访问一个动作/方法。

AcceptGet 和 AcceptPost 在 MvcContrib 中。而 AcceptVerbs 是 Mvc 框架的本机。哪个更好用？

**AcceptGet/AcceptPost (MvcContrib)**

```
/// <returns></returns>
[AcceptGet]
public ActionResult Profile(string id) 
```

**AcceptVerbs(ASP.NET Mvc)**

```
/// <returns></returns>
[AcceptVerbs(HttpVerbs.Get)]
public ActionResult EditRequest(string id) 
```

MvcContrib 项目的 AcceptPost 文档可在[此处](http://mvccontrib.codeplex.com/Wiki/View.aspx?title=AcceptPostAcceptGet&referringTitle=Home)找到。

创建 AcceptGet 和 AcceptPost 似乎是为了填补早期版本的 ASP.NET Mvc 框架之一的空白。AcceptGet 和 AcceptPost 类提供了强类型的 HttpMethod 属性。

ASP.NET MVC 与 AcceptVerbs 一起发布，它需要一个枚举：

```
[Flags]
public enum HttpVerbs
{
    Delete = 8,
    Get = 1,
    Head = 0x10,
    Post = 2,
    Put = 4
} 
```

我的问题是哪一个是更好的实现，AcceptGet/AcceptPost 还是 AcceptVerbs（带有 HttpVerbs 枚举类型）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T11:04:34.727

我认为这两种实现之间没有太大区别，但鉴于

```
[AcceptVerbs(HttpVerbs.Get)]
public ActionResult EditRequest(string id) 
```

现在是框架的一部分，我总是使用它。两者都是强类型的，因此没有真正的区别，并且 HttpVerbs 枚举包括 MVC contrib 版本中没有的 Delete、Head 和 Put。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-01-07T12:10:57.123

从 ASP.Net MVC 2 Preview 1 版本开始，以下属性位于核心 MVC 框架中 - HttpPost、HttpGet、HttpDelete、HttpPut。当然，AcceptVerbs 属性仍然受支持。

因此，如果您使用的是 MVC 2，那么您可以使用这些新属性，而不需要 AcceptPost 和 AcceptGet 的 MVC Contrib 版本。

# iphone - 优化CGLayer drawRect方法

> ID：816459
> 
> 赞同：0
> 
> 时间：2009-05-03T06:24:10.860
> 
> 标签：iphone, objective-c, optimization

我目前正在使用 CGContextDrawLayerInRect 在 drawRect 中绘制 CGLayer。这经常被调用。有什么方法可以通过只绘制 CGLayer 的已更改部分而不是 drawRect 中的整个 CGLayer 来减少开销？

```
-(void)drawRect:(CGRect)rect {
    CGContextRef currentContext = UIGraphicsGetCurrentContext();
    CGContextDrawLayerInRect(currentContext, [self bounds], _backgroundLayer);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-03T17:44:00.817

我认为这几乎是你能得到的优化。是否可以减少调用 setNeedsDisplay 的频率，也许？如果这对你来说太慢了，你下一个最好的选择是使用 OpenGL！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-01-11T10:44:54.193

也许尝试完全消除 -drawRect: 。绘制到 UIImageView 或 CALayer 并让它处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T09:33:13.057

rect 参数确实描述了需要重绘的区域。除了用它来限制你重绘的数量之外，没有。当调用 drawrect 时，您不知道系统对您的层做了什么 - 例如，您可能将整个视图预渲染到系统动画的新上下文中。

你真的看到表现不佳吗？也许您的绘图代码可以通过其他方式进行优化。

# c++ - 为什么派生类不能在数组中工作？(C++)

> ID：816463
> 
> 赞同：3
> 
> 时间：2009-05-03T06:33:06.360
> 
> 标签：c++, arrays, class, inheritance, polymorphism

我创建了一个名为 vir 的类，带有一个函数 move：

```
class vir
{
public:
     vir(int a,int b,char s){x=a;y=b;sym=s;}
     void move(){}
}; 
```

（它派生自一个具有变量 int x、int y 和 char sym 的类）我从中派生了一个类，称为 subvir：

```
class subvir:public vir
{
public:
     subvir(int a,int b,char s){x=a;y=b;sym=s;}
     void move();
};
subvir::move()
{
     x++;
     return;
} 
```

然后我创建了一个 vir 数组，并将一个 subvir 放入其中

```
subvir sv1(0,0,'Q');
vir vir_RA[1]={sv1}; 
```

但是当我尝试使用 sv1.move() 时：

vir_RA[0].move();

它使用 vir move ({}) 而不是 subvir move ({x++})。我尝试将 sv1 设为 vir，将 vir_RA 设为 vir，它可以工作，当我将它们都设为 subvir 时它也可以工作，但我需要它们不同。我尝试将 vir::move() 设为纯虚拟，但随后我得到一个错误来证实数组。有谁知道当我从数组中使用 move() 时如何让它工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-03T06:41:12.410

您遇到了一个名为[slicing](http://en.wikipedia.org/wiki/Object_slicing)的问题。使用指针数组，或类似[Boost.ptr_container](http://www.boost.org/doc/libs/1_39_0/libs/ptr_container/doc/reference.html)的东西。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-03T06:55:27.787

基类必须有`virtual`函数来获得你想要的东西，使这些纯粹会导致一个抽象的基类——你不能实例化的东西。但是，您仍然可以创建指向抽象基类的指针/引用并将派生类对象分配给它们。您的基类最好表示为：

```
class vir
{
public:
     vir(int a,int b,char s){x=a;y=b;sym=s;}
     virtual void move(){}
}; 
```

这也使得派生类的`move`虚拟化。但是，您的`move`定义缺少返回值并且不会编译。尝试：

```
void subvir::move()
{
     x++;
     return;
} 
```

请注意，您需要指针（如其他答案中所述）或对派生类的引用才能使动态绑定起作用。因此，不要`vir`使用对象数组，而是使用基类指针数组：

```
vir* v[ 2 ] = { new subvir(0, 0, 'Q'), new subvir(10, -10, 'P') }; 
```

您还应该阅读 C++ FAQ Lite 的以下部分：

*   [继承——基础](http://www.parashift.com/c++-faq-lite/basics-of-inheritance.html)
*   [继承——虚函数](http://www.parashift.com/c++-faq-lite/virtual-functions.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-03T06:38:10.497

在这种情况下，您需要一个指针数组，而不是实例数组。使用 vir*[] 代替 vir[]

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-03T06:42:57.850

两件事情。该数组是 vir 的数组，所以它当然使用 vir::move。move() 不是虚拟方法。

但更重要的是切片。您不能将子类放入数组中。如果 sizeof vir != sizeof subvir，数组将不会正确排列。目前它们的大小相同。但如果他们不是，会发生什么。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-03T07:27:00.567

是的，基本上编译器不允许数组中的子类，因为数组针对类型大小进行了严格的初始化，并且子类型往往大于父类，如果您可以使用子类型值初始化数组，则会导致问题。真正发生的是编译器首先分配数组 N * size(base_type) 字节。然后它复制每个初始化对象的 size(base_type) 字节。如果它们是不同的类型，它们会被截断，并且你的代码中可能会发生奇怪的事情。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-03T09:27:55.923

让我巩固以前的答案。

这里实际上有两个问题。一是切片。您正在使用 subvir 的副本初始化 virs 数组。在这种情况下，编译器将 vir 部分从 subvir 中切出并将其复制到数组中，因此您确实只能在那里获得 vir 对象。现在在您的特定情况下，subvir 除了 vir 之外没有其他数据成员，因此切片有点退化，vir 对象看起来很像 subvir 对象。但是，vir 和 subvir 是不同的类，数组中的对象最终是 vir 对象，而不是伪装成 vir 的 subvir 对象。即使两者具有相同的数据成员，两者之间的差异实际上也会体现出来的一种方式是，如果 vir 具有被 subvir 重载的虚函数。在这种情况下，数组中对象中的 vtable 指针将指向 vir 的 vtable，而不是 subvir 的。当然，

第二个问题是多态性。在使用点（对 move() 的调用），编译器认为您正在调用 vir 类型的对象的 move() 方法（因为该数组是一个 virs 数组）。（编译器的想法当然是正确的，因此由于切片，在这种情况下可能是退化的。）如果它实际上是你想要的 subvir 对象，你可以通过 make move() 调用 subvir::move() ) vir 中的虚拟。

要获得所需的行为，您可以使用指针数组（但是您将直接在 sv1 上操作，而不是它的副本，除非您首先创建一个副本并使用指向该副本的指针初始化该数组）。

# asp.net-mvc - .NET MVC 慢速站点

> ID：816464
> 
> 赞同：4
> 
> 时间：2009-05-03T06:33:40.990
> 
> 标签：asp.net-mvc, performance, sql-server-2008, iis-7

我有一个网站需要大约 20 秒来加载每个页面（无论它做什么）

所以我输入了一个不属于路由的/scripts/test.html，它仍然需要很长时间......没有数据库什么也没打。

我将 web.config 重命名为 _web.config 并立即加载，将其重命名为...回到大约 20-30 秒的加载时间。

在本地运行应用程序...我在 Global.asax.cs 中的 RegisterRoutes 上放置了一个断点并运行它... /代码）

服务器是 Mosso IIS7/SQL Server 2008 集群

该网站受到了很大的打击......请帮助？或要测试/调试的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T17:52:50.647

几件事要尝试：

*   尝试使用 FileMon/ProcessMonitor 查看是否有大量磁盘活动。
*   如果上述不是问题，请安装 Jet Brains 的 Dot Trace 实例。分析应用程序，看看是否存在一些在本地机器上不明显的内存或性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-17T16:03:19.343

我看到了另一个通过禁用 IPv6 解决的相关问题，也许可以试试。

# c - 多线程文本处理的成本/收益

> ID：816465
> 
> 赞同：0
> 
> 时间：2009-05-03T06:33:43.427
> 
> 标签：c, objective-c, multithreading

我正在为 iPhone 开发一个实时语法荧光笔，我创建了一个自定义 UIView，它接受一个字符串，解析它，然后在它的 drawRect: 方法中突出显示它。我还实现了一个闪烁的光标。但是，它开始变得有点慢，我认为当我实现多行处理和块处理时，它会更慢。但是，我尝试将`[formattedTextView setNeedsDisplayInRect:]`调用放在视图控制器中的函数中，然后使用`[self performSelectorInBackground:@selector(updateDisplay) withObject:nil]`. 键盘现在反应更快了，但这似乎是在单核处理器上对线程的错误使用。

做这样的事情有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T07:08:32.203

正如您自己指出的那样，在单处理器上，多线程不会带来巨大的性能提升，但会带来稳定性和复杂性的损失。

动态语法着色是一个难题，充满了优化的可能性：

*   您是否在整个文本上应用了一堆正则表达式？（坏的）或者你是否解析文本以保存在像 ast 这样的有效数据结构中？
*   您是否将彩色绘画限制在可见区域？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T07:11:46.767

> 我正在开发一个实时语法荧光笔

您是在做关键字突出显示还是编写了 BNF 解析器？

对于后者，为什么不让它在一个线程中运行呢？GUI 仅显示到目前为止已解码的所有内容的颜色。这样您就可以获得即时更新但延迟着色。

# ruby - 您如何确定特定 Ruby Gem 的旧版本是什么？

> ID：816469
> 
> 赞同：1
> 
> 时间：2009-05-03T06:37:55.567
> 
> 标签：ruby, rubygems

您如何确定特定 Ruby Gem 的旧版本是什么？

我需要恢复到旧版本的 rack gem，但我不确定哪些版本可用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T08:30:46.857

为此，您可以使用 gem 命令，如下所示：

```
gem query --remote -a -n ^rack$ 
```

query 的 -n 开关限制了通过正则表达式进行搜索，因此在这种情况下，您只会获得名称与字符串“rack”完全匹配的 gem。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-03T07:13:36.340

去

```
http://rubyforge.org/projects/#{gem_name}/ 
```

单击导航栏中的“文件”并查看`.gem`可用的文件。这些文件是 Rubygems 的官方来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T12:36:46.720

如果您想知道已安装的旧版本，请使用 gem list：

```
$ gem list

*** LOCAL GEMS ***

actionmailer (2.3.2, 2.3.1, 2.3.0, 2.2.2, 2.1.2, 2.1.1, 2.1.0, 2.0.2)
actionpack (2.3.2, 2.3.1, 2.3.0, 2.2.2, 2.1.2, 2.1.1, 2.1.0, 2.0.2)
activerecord (2.3.2, 2.3.1, 2.3.0, 2.2.2, 2.1.2, 2.1.1, 2.1.0, 2.0.2)
... 
```

# php - 我在win xp上安装了php5.2.9 +mysql5.1+apache2.2.6 .iam无法让php与mysql连接

> ID：816471
> 
> 赞同：0
> 
> 时间：2009-05-03T06:38:58.577
> 
> 标签：php, mysql, connect

我在win xp上安装了php5.2.9 +mysql5.1+apache2.2.6。我无法让 php 与 mysql 连接。这是代码。

```
<? php 
$link=mysql_connect('localhost','root','godismine');

if(!$link) 
echo "fail"; 

else echo "success"; 

mysql_close(); 
 ?> 
```

我认为代码中没有任何错误。phpinfo 显示 mysql 支持，所以它不能是安装问题。我只是无法得到问题。每当我运行这个脚本时，我都会得到一个空白屏幕。请帮忙。我是 php 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T07:46:05.170

让 MySQL*告诉*你错误是什么......

```
<?php
$link=mysql_connect('localhost','root','godismine');如果（！$链接）{
  回声“失败”；
  echo '并且错误信息是：'。[mysql_error()](http://php.net/mysql_error) ;
}
别的 {
  回声“成功”；
  mysql_close($链接);
}
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T07:13:39.850

您是否也在数据库中创建了用户/授予权限？无论如何，以 root 身份连接并不是一个好主意。

# wpf - WPF 组织树/图表控件或连接？

> ID：816472
> 
> 赞同：0
> 
> 时间：2009-05-03T06:39:01.930
> 
> 标签：wpf, charts

Q1。这将是为组织对象（自引用）设置简单 WPF 组织结构图或树的最佳资源或教程。我希望在单击时有一个按钮，该按钮将显示各个部门的组织结构图（分层）树和子部门。我正在寻找启动代码+控制的基础。

Q2.有没有Crystal Report或WPF之类的报表软件可以呈现这样的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T11:19:02.787

Q1：[来自博客的 1 个链接](http://wpfblog.info/2008/05/27/wpf-treeview-org-chart-a-bit-of-refactoring/)
[以上来自 Wayback 的存档版本](http://web.archive.org/web/20090520093457/http://wpfblog.info/2008/05/27/wpf-treeview-org-chart-a-bit-of-refactoring/)

[另一个来自代码项目](http://www.codeproject.com/KB/WPF/CustomTreeViewLayout.aspx)

Q2：[商业印刷控制](http://www.componentone.com/SuperProducts/ReportsWPF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T13:18:25.247

你可以看看[Family.Show](http://www.vertigo.com/familyshow.aspx)，它有一个非常漂亮的家谱图。这不是制作组织结构图的开箱即用解决方案，但它是一个很好的例子。[CodePlex](http://www.codeplex.com/familyshow)上提供了源代码。

[替代文字 http://i3.codeplex.com/Project/Download/FileDownload.aspx?ProjectName=familyshow&DownloadId=15919](http://i3.codeplex.com/Project/Download/FileDownload.aspx?ProjectName=familyshow&DownloadId=15919)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-10T21:19:58.010

几年后，Infragistics 也有一个组织结构图 WPF 控件。

[基础设施组织结构图](http://www.infragistics.com/samples/wpf/org-chart/overview)

![在此处输入图像描述](https://i.stack.imgur.com/lXKGv.jpg)

# javascript - 需要帮助反向地理编码以将消息附加到 GLatLng 坐标

> ID：816479
> 
> 赞同：2
> 
> 时间：2009-05-03T06:48:15.887
> 
> 标签：javascript, jquery, google-maps

*我的代码*：http: [//jsbin.com/epuxu](http://jsbin.com/epuxu)

在 SO 的帮助下，我设法对地址进行了地理编码，并将其相应的图钉放置在地图上。**问题是**我无法选择坐标以便在地图上附加一个#message div，因为我没有坐标了。

我怀疑我在本节中做错了什么：

```
/* Message
--------------------*/
$("#message").appendTo(map.getPane(G_MAP_FLOAT_SHADOW_PANE));

    function displayPoint(marker, index){
        $("#message").hide();

        var moveEnd = GEvent.addListener(map, "moveend", function(){
            var markerOffset = map.fromLatLngToDivPixel(marker.getLatLng());
            $("#message")
                .fadeIn()
                .css({ top:markerOffset.y, left:markerOffset.x });

            GEvent.removeListener(moveEnd);
        });
        map.panTo(marker.getLatLng());
    } 
```

当我使用原始坐标代码时它可以工作（这在 jsbin 上被注释掉了）：

```
var markers = [
    [39.729308,-121.854087],
    [39.0,-121.0]
    ];

    for (var i = 0; i < markers.length; i++) {
        var point = new GLatLng(markers[i][0], markers[i][1]);
        marker = new GMarker(point);
        map.addOverlay(marker);
        markers[i] = marker;
    } 
```

但我需要帮助才能使其与当前代码一起使用：

```
function showAddress(markers) {
    if (geocoder) {
        geocoder.getLatLng(markers,
            function(point) {
                if (!point) {
                    alert(markers + " not found");
                } else {
                    marker = new GMarker(point);
                    map.addOverlay(marker);
                    markers[i] = marker;
                }
            }
        );
    }
}

for (var i = 0; i < markers.length; i++) {
    showAddress(markers[i]);
} 
```

我对使用谷歌地图 api 有点陌生，所以任何关于我做错了什么的见解都会非常有帮助。谢谢=]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T10:47:19.463

恐怕您的代码有很多问题：P

我不得不做一些整形手术，但结果如下：http: [//jsbin.com/atofe](http://jsbin.com/atofe)

以下是我所做更改的说明。如果您需要帮助理解任何事情，请告诉我。

* * *

```
<script type="text/javascript">
  document.write(marker);
</script> 
```

我不得不将其注释掉，因为它会导致错误。我猜你不小心把它放在那里了。

```
<script type="text/javascript">
  // document.write(marker);
</script> 
```

* * *

```
var markers = [
  ["624 Nord Ave #20, Chico CA"],
  ["200 Nord Ave, Chico CA"],
  ["100 Nord Ave, Chico CA"],
  ["5th and Ivy, Chico CA"]
]; 
```

由于我们使用的是地址而不是坐标，因此您不需要（实际上您不应该这样做，因为它只会使事情复杂化）将每个字符串封装在一个数组中。我还将它重命名`addresses`以使其更清晰并防止与实际标记发生冲突（稍后会详细介绍）。

```
var addresses = [
  "624 Nord Ave #20, Chico CA",
  "200 Nord Ave, Chico CA",
  "100 Nord Ave, Chico CA",
  "5th and Ivy, Chico CA"
]; 
```

* * *

```
function showAddress(markers) {
  if (geocoder) {
    geocoder.getLatLng(markers,
      function(point) {
        if (!point) {
          alert(markers + " not found");
        } else {
          marker = new GMarker(point);
          map.addOverlay(marker);
          markers[i] = marker;
        }
      }
    );
  }
}

for (var i = 0; i < markers.length; i++) {
  showAddress(markers[i]);
}

/* Add Markers to List
--------------------*/
$(markers).each(function(i,marker){
  $("<li>")
    .html(i+" - "+marker)
    .click(function(){
      displayPoint(marker, i);
    })
    .appendTo("#list");
  GEvent.addListener(marker, "click", function(){
    displayPoint(marker, i);
  });
}); 
```

这是我必须做出最大改变的地方。你在这里犯了几个重大错误。

`markers`首先，当您应该使用新名称时，您重新使用了该变量。在此过程中，您重写了地址字符串数组并误解了存储内容的位置（这就是我将地址字符串数组重命名为 的原因`addresses`）。

其次，您尝试在地理编码器实际返回其响应*之前将标记添加到列表中。*我想你没有意识到这`getLatLng`是一个异步函数，所以它只有在地理编码器返回它的响应后才会执行回调函数。由于您没有等待响应，因此它使“将标记添加到列表”部分变得无用，因为尚未检索到标记。

`handleGeocoderResponse`因此，为了解决这些问题，我在新函数中移动了“将标记添加到列表”部分。这可确保仅在返回地理编码器响应后将标记添加到列表中。我还必须使用双[闭包](http://www.kryogenix.org/code/browser/secrets-of-javascript-closures/)，因为我们使用的是循环和异步函数。

```
function handleGeocoderResponse(addr, j) {
  /*
    These are closures. We have to return a function
    that contains our Geocoder repsonse handling code
    in order to capture the values of "addr" and "j"
    as they were when they were passed in.  
  */
  return (function(point) {

    if (!point) {
      alert(addr + " not found");
    }
    else {
      var marker = new GMarker(point);
      map.addOverlay(marker);

      /* Add markers to list
      ------------------------*/
      $("<li>")
        .html(j + " - " + addr)
        .click(function(){
          displayPoint(marker, j);
        })
        .appendTo("#list");

      GEvent.addListener(marker, "click", function(){
        displayPoint(marker, j);
      });
    }

  });
}

for (var i = 0; i < addresses.length; i++) {
  if (geocoder) {
    var address = addresses[i];
    geocoder.getLatLng(
      address,
      handleGeocoderResponse(address, i)
    );
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T09:44:00.287

我不确定您到底在寻找什么。“ `#message div`”是指这样的信息[窗口](http://code.google.com/intl/nl/apis/maps/documentation/examples/map-infowindow.html)[吗](http://code.google.com/intl/nl/apis/maps/documentation/reference.html#GMap2.Methods.Info-Window)？如果是这样，您可以在以下几行中执行一些操作（注意该 行）：`GEvent.addListener()`

```
/* Geocoded Addresses
--------------------*/
var markers = [
 ["624 Nord Ave #20, Chico CA"],
 ["200 Nord Ave, Chico CA"],
 ["100 Nord Ave, Chico CA"],
 ["5th and Ivy, Chico CA"]
];

function showAddress(markers) {
 if (geocoder) {
  geocoder.getLatLng(markers,
   function(point) {
    if (!point) {
     alert(markers + " not found");
    } else {
     marker = new GMarker(point);
     GEvent.addListener(marker, 'click', function() {
      marker.openInfoWindowHtml('<strong>Awesome place</strong><br>746 Blah street<br>1337 Awesomeville');
     });
     map.addOverlay(marker);
     markers[i] = marker;
    }
   }
  );
 }
}

for (var i = 0; i < markers.length; i++) {
 showAddress(markers[i]);
} 
```

[试试看](http://jsbin.com/eguxi)，去点击一个标记！:)

# java - 简单的迭代器循环给出了意想不到的结果

> ID：816480
> 
> 赞同：1
> 
> 时间：2009-05-03T06:48:38.880
> 
> 标签：java, iterator, logic, while-loop

我确信这是我的逻辑明显的错误，但我似乎无法弄清楚我做错了什么。很简单，我有一个安全代码数组列表，我想计算每个安全代码组合之间的相关性。我的代码如下：

```
private void crossCorr(ArrayList<String> codes, HashMap<String, Stock> stockMap){

    // iterate through the codes list and get all the cross correlations:

    Iterator<String> itr1 = codes.iterator();
    while(itr1.hasNext()){
        String code1 = itr1.next();
System.out.println("  -----  " +code1);
        Iterator<String> itr2 = codes.iterator();
        ArrayList<Double> corrs = new ArrayList<Double>();
        HashMap<String, Double> codeCorr = new HashMap<String, Double>();
        String code2="";
        double corr=-2;
        while(itr2.hasNext()){
            code2 = itr2.next();
            Maths calcs = new Maths();      
            corr = calcs.getCorrelation(stockMap.get(code1).getRorHistory(), stockMap.get(code2).getRorHistory());
            corrs.add(corr);    // we order this list and then use this ordered list
                                // to find the codes for the stocks with the highest
                                // correlation for any given stock
            codeCorr.put(code2, corr);
            System.out.println(code1+" - "+code2+" - Correlation is "+corr);
        }
        orderCorrs(6, codeCorr, corrs, code1);
    }

} 
```

我得到的输出是——

----- GOOG
GOOG - GOOG -相关性是1.0000000000000002
歌-雅虎-相关的0.6986623807707519
GOOG - MSFT -相关性是0.7275411317567286
GOOG - CSCO -相关性是0.8122979333663799
GOOG - AAPL -相关性是0.8217785260604609
GOOG - ADBE -相关性是0.6102679356472099
GOOG - DISH -关联是0.644852624453125
GOOG - NSOL -关联是0.11600387177879072
GOOG - SBUX -关联是0.6694306410719489
GOOG - PSFT -关联是-0.09921822861087544
GOOG - XOM -关联是0.6728272039489009
GOOG - WMT -关联是0.4004364090315347
GOOG - IBM -关联是0.7559988282095168
歌- JPM -相关性是0.7085525367336528歌
- DNA -相关性是0.13628949379947575歌
- HPQ -相关性是0.7819350018750656歌
- KO -相关性是0.5700932682157461歌
- VZ -相关性是0.737881573641585歌
- INTC -相关性是0.7654127298771953歌
- SPY -相关性是0.8042488406758052
歌- PEP - 相关性是0.6297924741882344 goog
- wfc - 相关性是0.5064491351161948 goog -
关联是0.238752389446595 goog - qcom -
相关是0.726356709262025 goog - cop - cop
- 相关是0.570604981251932 goog - mcd
- 相关性是0.5434872575410538

但我从来没有得到

YHOO - GOOG - 相关性是……等等等等。

我确信这是一个简单的错误，出于某种原因我没有接受它。

我知道我做了两次相关计算，一旦我让这部分按预期工作，我会解决这个问题。

如果我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T06:56:45.100

删除了对我们不知道的代码的引用的快速测试应用程序对我来说效果很好。

是否有可能引发您未处理的未经检查的异常？如果您可以发布一个简短但*完整*的程序来演示该问题，那将非常有帮助。复制您的整个项目，并删除一些位（例如硬编码数据和返回值），直到您不能拿走任何其他东西而问题也会消失。当然，那时您很可能已经为自己找到了问题。

顺便说一句，如果您使用的是 Java 1.5 或更高版本，则使用扩展的 for 循环比显式使用迭代器更简单。你会这样做：

```
for (String code1 : codes) {
    // ...
    for (String code2 : codes) {
        // ...
    }
} 
```

# latex - 在 LaTeX 中检测输出设备

> ID：816482
> 
> 赞同：5
> 
> 时间：2009-05-03T06:50:50.047
> 
> 标签：latex, postscript

有没有办法在 LaTeX 样式/类文件中检测正在使用的输出设备（或至少它具有哪些功能）？`pstricks`原因是，我正在编写一个类文件，如果 Postscript 可用，我想在其中使用一些 Postscript 特定的包（例如），但如果我只是写

```
\RequirePackage{pstricks} 
```

那么如果我用`pdflatex`. 所以理想情况下，我正在寻找可以使用的东西

```
\if@postscriptokay\RequirePackage{pstricks}\fi 
```

看起来这一定是可能的，因为我知道像这样的包`pgf`可以改变它们的行为以根据输出设备使用适当的图形命令，但我已经做了一些谷歌搜索并检查了我的 LaTeX 书，但还没有找到方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-03T07:19:38.963

```
\usepackage{ifpdf}

\ifpdf
  % nothing
\else
  \RequirePackage{pstricks}
\fi 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-03T07:21:07.587

您可以像这样检测 pdfTeX（这就是这样`ifpdf.sty`做的）：

```
\makeatletter
\ifx\pdfoutput\@undefined
  no pdfTeX
\else\ifnum\pdfoutput<1
  pdfTeX is outputting a .dvi file
\else
  pdfTeX is outputting a .pdf file
\fi\fi 
```

graphics.sty、hyperref.sty 和 pgf.sty 内置了自己的自动检测机制。它们根据自动检测和包选项加载不同的驱动程序文件（如`pdftex.def`和）。`hpdftex.def`如果您在 .tex 文件中加载任何这些，请尝试获取它们加载的驱动程序的信息。相关驱动文件有：

```
/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys-*.def
/usr/share/texmf-texlive/tex/latex/hyperref/hpdftex.def
/usr/share/texmf-texlive/tex/latex/graphics/*.def
  /usr/share/texmf-texlive/tex/latex/pdftex-def/pdftex.def 
```

`pgf.sty`和的驱动程序名称`graphicx.sty`存储在宏中`\Gin@driver`。您可以在加载任何这些包后检查此宏。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-03T12:28:38.190

看看包[pstool](http://www.ctan.org/tex-archive/help/Catalogue/entries/pstool.html)和[auto-pst-pdf](http://www.ctan.org/tex-archive/help/Catalogue/entries/auto-pst-pdf.html)。他们在这里帮助使用`pstricks`pdfLaTeX 和朋友。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T12:22:09.233

如果您使用的是[KOMA-Script](ftp://ftp.ctan.org/tex-archive/macros/latex/contrib/koma-script/)包（我真的可以推荐，除非您当然需要使用不同的样式），那么您已经有一个宏：`\ifpdfoutput{pdf output}{dvi output}`在该包中定义。如果没有，请使用`ifpdf`已经提到的包。

# php - 关于使用不同登录名跨数据库检索相关数据的建议？

> ID：816489
> 
> 赞同：0
> 
> 时间：2009-05-03T06:57:20.920
> 
> 标签：php, mysql, cross-database

我在来自数据库 A、表 A (AA) 的查询中有一组用户 ID。

我在数据库 B 表 A (BA) 中有主用户数据库。

对于从 AA 在我的结果数组中返回的每个用户 ID，我想从 BA 检索该用户 ID 的名字和姓氏。

不同的用户帐户控制每个数据库。不幸的是，每个登录名都不能拥有对每个数据库的权限。

问题：如何以最少的查询和/或处理时间检索第一个和最后一个？阵列中有 20 个用户？阵列中有 20,000 个用户？如果适用，任何数量级更高？

使用 php 5 / mysql 5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T07:03:40.250

只要数据库在同一台服务器上，只需使用跨数据库连接。用于访问数据的数据库登录名也需要两个数据库的权限。就像是：

```
SELECT AA.userID, BA.first, BA.last
FROM databasename.schema.table AA
INNER JOIN databasename.schema.table BA ON AA.userID = BA.userID 
```

**回应评论：**

我不相信我正确阅读了有关多次登录的部分，抱歉。您不能在一个连接上使用两个不同的 mySQL 登录。如果您需要执行多个查询，您实际上只有三个选项。A) 遍历第一个结果集并运行多个查询。B) 运行使用带有 userID IN (@firstResultSet) 的 WHERE 子句的查询并传入第一个结果集。C）从第二个数据库中选择所有内容并将它们加入代码中。

所有这三个选项都不是很好，所以我会问，为什么不能更改两个数据库之一的用户权限？我还要问，为什么需要选择 20,000 个用户的名称和 ID？除非这是某种类型的数据转储，否则我会寻找一种不同的方式来显示数据，这种方式既更易于使用，又可以减少查询密集度。

综上所述，无论您选择哪个选项，都将基于各种不同的情况。如果记录数较少，低于 1,000，我会使用选项 B。如果记录数较多，我可能会使用选项 C，并尝试将两个结果集放入可以连接的东西中（例如使用 array_combine）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T09:23:11.990

我认为这里的关键是它应该可以在两个数据库调用中进行。

您的第一个从数据库 A 获取 id，第二个将它们传递给数据库 B。

我不知道 mysql，但在 sqlserver 中我会使用 xml 数据类型并将所有 id 传递到使用它的语句中。在 xml 数据类型之前，我会在 IN 语句中使用 id 建立一些动态 SQL。

从 DatabaseA.TableA 中选择用户 ID

遍历 id 并建立一个逗号分隔的字符串。

“从 DataBaseB.TableA 中选择名字、姓氏，其中 UserId 在（”+stringId+“）”

这样做的问题是，使用 20,000 个 ID，您发送的数据量可能会出现一些性能问题。这就是我使用 XML 数据类型的地方，所以也许看看 mysql 有哪些替代方案来传递 id 列表。

# php - 我想通过 RTMP 从 FMS 服务器下载 Remote SharedObject

> ID：816511
> 
> 赞同：0
> 
> 时间：2009-05-03T07:20:37.383
> 
> 标签：php, flash, amf, rtmp, shared-objects

我想通过脚本联系 FMS 服务器并下载持久的 Remote SharedObject。

Flash 程序连接到 FMS 服务器，打开一个 NetConnection，进行 SharedObject.getRemote 调用。我想通过 PHP、Ruby、Perl 等访问这些信息，以便在脚本中使用。

我了解此信息通过 RTMP 协议作为 AMF 对象发送到 Flash 播放器。因为它是 RTMP 而不是 HTTP，所以我不能使用 SabreAMF 客户端，因为它使用不支持 RTMP 的 cURL。

有人对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T20:21:21.347

抱歉，没有使用 SabreAMF 的经验，所以我要说的内容不会有太大帮助。

您不能使用 swf 作为从 SabreAMF 到 Ruby 的代理/桥接器吗？从 swf 获取远程对象，当您获得数据后，将其传递给您首选的服务器语言（Ruby 等）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T11:36:18.183

SharedObject 本质上只是一个键/值集合。您所要做的就是通过 Flash 进行调用，侦听更新事件，遍历 SharedObject 的所有属性并将它们写入您自己的对象 - 字典或只是对象类型。然后，您可以将其作为 PHP 使用的任何类型发送到您的 Sabre AMF 网关。

# php - 如何从 tinymce 编辑器中插入图像？

> ID：816512
> 
> 赞同：1
> 
> 时间：2009-05-03T07:20:46.743
> 
> 标签：php, javascript, jquery, tinymce

我正在尝试使用 tinymce 文本编辑器，但无法使用 jQuery 获取编辑器的内容，并且如果我使用简单的 post 方法获取值，我会得到文本，但没有得到图像？

我尝试使用 jQuery 的代码是：

```
$(document).ready(function()
{
    $("#save").click(function()
    {
        $.post("test_skin_dump.php",{
            data_info:$("#elm2").html;
        } ,function(data) {
            if(data)
            {
                $("#show_result").html(data);
            }               
        });
    });
}); 

<textarea id="elm2" name="elm2" rows="15" cols="80" style="width: 80%"> 
</textarea> 
```

我做错了什么，有人可以纠正我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T18:38:22.823

TinyMCE 有自己的 API，您可以利用它。事实上，它真的不算太糟糕。在您的情况下，您可以通过以下方式获取整个编辑器：

```
tinyMCE.activeEditor().getBody(); 
```

如果您确定用户点击了图像（即选中），那么您可以这样做以仅获取图像节点：

```
tinyMCE.activeEditor().selection.createHTML(); 
```

请注意，这`.selection`是一个属性，这就是它没有一组括号的原因。

如果您不喜欢任何此代码，或者由于某种原因它不能完全回答您的问题，请随时查看以下链接：

*   [EditorManager](http://wiki.moxiecode.com/index.php/TinyMCE:API/tinymce.EditorManager) - 这是 tinyMCE 对象
*   [API](http://wiki.moxiecode.com/index.php/TinyMCE:API)

让我知道您是否还有其他需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T07:38:10.167

[`html`](http://docs.jquery.com/Attributes/html)是一个函数。您缺少括号。您还有一个额外的分号。

替换这个：

```
data_info:$("#elm2").html; 
```

有了这个：

```
data_info:$("#elm2").html() 
```

其余的看起来不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-06-02T08:13:20.003

使用以下命令将代码插入到您的编辑器中：

```
tinyMCE.execCommand('mceInsertContent',false,'<img src="mypic.png" />'); 
```

希望这可以帮助 ：）

# c# - 控制互联网连接数据

> ID：816518
> 
> 赞同：0
> 
> 时间：2009-05-03T07:24:52.443
> 
> 标签：c#, windows, network-programming, port, communication

我想以编程方式控制 Internet 连接（我使用 Visual Studio .net (C#)）。我想处理所有发送到互联网的请求。

例如，如果用户在任何浏览器上键入“google.com”，我希望在将其发送到 Internet 之前获取此请求。

简单来说，这是一个 Windows 用来从通信端口发送和检索数据的过程，请任何人有一个简单的文章来解释这个过程，还有任何人知道如何使用 dot net 控制通信端口上的数据流.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T08:00:36.803

您可能想查看[Fiddler](http://www.fiddler2.com/fiddler2/)是如何工作的，这是一个透明代理，它会自动将自身添加到 WININET 链中，以便它可以看到正在发出的每个请求。

根据[这篇 MSDN](http://msdn.microsoft.com/en-us/library/bb250446.aspx)文章：

> ...该程序将自己注册为 Microsoft Windows Internet Services (WinInet) 的系统代理，这是 Internet Explorer、Microsoft Office 和许多其他产品使用的 HTTP 层。

此外，请查看此问题的答案 - [How to create a simple Proxy in C#](https://stackoverflow.com/questions/226784/how-to-create-a-simple-proxy-in-c)。

# javascript - 使用 jquery easing 插件的 jQuery 双动画

> ID：816519
> 
> 赞同：1
> 
> 时间：2009-05-03T07:26:00.507
> 
> 标签：javascript, jquery

我想实现类似这个页面的东西：[link](http://gsgd.co.uk/sandbox/jquery/easing/)

查看 Clicker 框。盒子有两个动画。一个用于easeInQuad，然后另一个动画用于easeInOutSine。

我怎样才能在我自己的函数中实现类似的东西？

```
$(function() 
{
    var iH = window.innerHeight + 80;
    var position = $(window).scrollTop();

    $(window).scroll(function() 
    {
        var scroll = $(window).scrollTop();

        if(scroll > position) 
        {
            $("body").animate(
            {
                scrollTop: iH
            },1000,
            "easeInOutQuart")
            .animate(
            {
                scrollTop: parseInt($(window).scrollTop()) - 80
            },1000,
            "easeInOutQuart");
        } 
        else if(scroll < position) 
        {
            $("body").get(0).scrollTop = 0;
        }

        position = $(window).scrollTop();
    });
}); 
```

第二个动画效果不太好。但它确实向上滚动。但它向上滚动太多，而不仅仅是 80 像素。它向上滚动到顶部，然后动画进入无限循环。在第二个 .animate 之后，它将一次又一次地继续为其设置动画。不停。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T19:46:26.583

$("body").stop(true)

这将清除对象上的所有动画队列。

[http://docs.jquery.com/Effects/stop](http://docs.jquery.com/Effects/stop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T09:43:45.870

我认为最好使用切换效果

[http://www.sohtanaka.com/web-design/examples/toggle/](http://www.sohtanaka.com/web-design/examples/toggle/)

# java - Tomcat上的文件监听进程

> ID：816521
> 
> 赞同：4
> 
> 时间：2009-05-03T07:30:55.363
> 
> 标签：java, tomcat, servlets, jakarta-ee

我需要一个非常简单的进程来监听目录并在该目录上创建新文件时执行一些操作。

我想我需要一个线程池来做到这一点。

这使用spring框架很容易实现，我通常使用但我现在不能使用它。我只能使用tomcat，我该如何实现呢？“启动”该线程的入口点是什么？

它必须是一个servlet吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T16:36:53.200

既然你提炼了这个问题，这里有另一个答案：how to start a daemon in tomcat：

首先，在 web.xml 中注册你的守护进程：

<listener> my.package.servlet.Daemons</listener>

然后将 Daemons 类实现为`ServletContextListener`这样的实现：

该代码将每 5 秒调用一次，当您的应用关闭时，tomcat 将调用 contextDestroyed。注意变量是易变的，否则在多核系统上可能会遇到关机问题

```
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

public class Daemons implements ServletContextListener {
private volatile boolean active = true;

Runnable myDeamon = new Runnable() {

    public void run() {
        while (active) {
            try {
                System.out.println("checking changed files...");
                Thread.sleep(5000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
};

public void contextInitialized(ServletContextEvent servletContextEvent) {
    new Thread(myDeamon).start();
}

public void contextDestroyed(ServletContextEvent servletContextEvent) {
    active = false;
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T08:34:26.910

您可以创建一个[侦听](http://java.sun.com/j2ee/1.4/docs/tutorial/doc/Servlets4.html)器来启动线程，但这不是一个好主意。当您在 Web 容器中运行时，您不应该启动自己的线程。Stack Overflow 中有几个问题说明为什么会这样。您可以使用[Quartz](http://www.quartz-scheduler.org/)（调度程序框架），但我猜您无法达到可接受的分辨率。

无论如何，您所描述的不是 Web 应用程序，而是一个守护程序服务。您可以独立于您的 Web 应用程序来实现它，并为它们创建一种相互通信的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T09:50:38.430

真正的仅 java 文件通知将在 java 7 中添加。这是[javadoc 的一部分，对其进行了粗略的描述](http://download.java.net/jdk7/docs/api/java/nio/file/WatchService.html)。

> 从文件系统观察事件的实现旨在直接映射到可用的本机文件事件通知工具

现在，您将不得不创建一个依赖于本机平台的程序来为您执行此操作，

或者实现某种轮询，每隔一段时间列出目录以检测更改。

您现在可以使用一个[通知库- 它使用 linux 上的 C 程序来检测 sourceforge 上的更改。](http://sourceforge.net/projects/jfilenotify/)在 Windows 上它使用轮询。我没有尝试看看它是否有效。

# svn - SVN 支持的最大修订号是多少？

> ID：816523
> 
> 赞同：22
> 
> 时间：2009-05-03T07:34:44.293
> 
> 标签：svn, version-control, fsfs

SVN 支持的最大修订号是多少？该 repo 是 FSFS 类型，托管在 Fedora 机器上。

谢谢，

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-03T07:40:16.167

如果您使用的是 32 位计算机，则它是 2147483647，即 2 ^(31) -1，有符号 32 位整数的最大值。对于 64 位计算机，它是……更多。无论如何，对于人类进行提交的任何实际目的来说，这应该足够了。

实际上，在达到最大修订号限制之前，您可能会用完磁盘空间或目录索引变得太慢。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-03T07:42:07.007

可能超过20亿。[在http://svn.haxx.se/users/archive-2005-03/0394.shtml](http://svn.haxx.se/users/archive-2005-03/0394.shtml)有一个有趣的讨论

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-03T07:42:23.010

我想它足够大，不会打扰。

假设它存储在一个 32 位的值中。这意味着如果你每秒提交一次，你将需要 136 年才能获得溢出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T21:24:23.063

基于时间的答案假设只有一个人在做提交。在这里，我们至少有十几个......但它们都在工作，而不是每秒发布一次提交。再说一次，这取决于您使用该工具的程度。您*可以一次*提交项目的一部分，而不是一次提交整个项目。...但鉴于其他答案，这一点确实没有实际意义。

# java - 在 Java 中缩放图像的最佳方法是什么？

> ID：816548
> 
> 赞同：13
> 
> 时间：2009-05-03T07:59:04.420
> 
> 标签：java, image, web-applications, graphics, image-scaling

我有一个用 Java（Spring、Hibernate/JPA、Struts2）编写的 Web 应用程序，用户可以在其中上传图像并将它们存储在文件系统中。我想缩放这些图像，使它们具有一致的大小以在网站上显示。哪些库或内置函数将提供最佳结果？在做出决定时，我将考虑以下标准（按此顺序）：

*   免费/开源（必要）
*   易于实施
*   结果质量
*   表现
*   可执行文件的大小

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2011-07-05T16:41:22.147

我真的建议给 imgscalr 看看。

它是在 Apache 2 许可下发布的，托管在[GitHub 上](https://github.com/thebuzzmedia/imgscalr)，已经部署在少数 Web 应用程序中，有一个非常简单但经过迂腐记录的 API，有代码可以解决 JDK 中的 2 个主要图像错误，你可以透明地告诉你只有在缩放操作或可怕的结果后突然开始出现“黑色”图像时才会注意到，为您提供 Java 中可用的最佳外观结果，可通过 Maven 和 ZIP 获得，并且只是一个类.

基本使用如下所示：

```
BufferedImage img = ImageIO.read(...); // load image
BufferedImage scaledImg = Scalr.resize(img, 320); 
```

这是最简单的调用，库将对质量做出最佳猜测，尊重您的图像比例，并将结果置于 320x320 边界框内。注意，边界框只是使用的最大 W/H，因为您的图像比例得到尊重，所以生成的图像仍然会尊重它，比如 320x200。

如果您想覆盖自动模式并强制它为您提供最好看的结果，甚至对结果应用非常温和的抗锯齿过滤器以使其看起来更好（尤其适用于缩略图），该调用将如下所示：

```
BufferedImage img = ImageIO.read(...); // load image
BufferedImage scaledImg = Scalr.resize(img, Method.QUALITY, 
                                       150, 100, Scalr.OP_ANTIALIAS); 
```

这些都只是示例，API 很广泛，涵盖了从超级简单的用例到非常专业的所有内容。您甚至可以传入自己的 BufferedImageOp 以应用于图像（并且该库会自动为您修复 6 年的 BufferedImageOp JDK 错误！）

在 Java 中成功缩放图像比该库为您所做的要多得多，例如，在对图像进行操作时，始终将图像保持为受支持最好的 RGB 或 ARGB 图像类型之一。如果用于任何图像操作的图像类型得不到很好的支持，Java2D 图像处理管道在幕后就会退回到劣质的软件管道。

如果这一切听起来让人头疼，那就是……这就是我编写库并将其开源的原因，这样人们就可以调整图像大小并继续他们的生活而无需担心。

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-03T08:30:40.803

查看[Java Image I/O API](http://java.sun.com/j2se/1.4.2/docs/guide/imageio/index.html)以读取/写入图像。然后使用[AffineTransform](http://java.sun.com/j2se/1.4.2/docs/api/java/awt/geom/AffineTransform.html)调整大小。

此外，[这是](http://www.java2s.com/Code/Java/2D-Graphics-GUI/Imagescale.htm)一个使用 java.awt.Image 的完整示例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-05-08T09:31:05.150

还要查看[java-image-scaling](http://code.google.com/p/java-image-scaling)库。它创建了比 ImageIO 质量更好的图像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-04-11T14:18:41.880

图像编辑的最佳工具是[ImageMagick](http://www.imagemagick.org)，它是开源的。

Java 语言有两个接口：

[JMagick](http://www.jmagick.org/)使用 JNI 接口到 ImageMagick

和

[im4java](http://im4java.sourceforge.net)什么是 ImageMagick 的命令行界面

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-17T13:13:29.803

发现这更快：

```
public static BufferedImage getScaledInstance(final BufferedImage img, final int targetWidth, final int targetHeight,
                                              final Object hint) {
    final int type = BufferedImage.TYPE_INT_RGB;
    int drawHeight = targetHeight;
    int drawWidth = targetWidth;
    final int imageWidth = img.getWidth();
    final int imageHeight = img.getHeight();
    if ((imageWidth <= targetWidth) && (imageHeight <= targetHeight)) {
        logger.info("Image " + imageWidth + "/" + imageHeight + " within desired scale");
        return img;
    }
    final double sar = ((double) imageWidth) / ((double) imageHeight);
    if (sar != 0) {
        final double tar = ((double) targetWidth) / ((double) targetHeight);
        if ((Math.abs(tar - sar) > .001) && (tar != 0)) {
            final boolean isSoureWider = sar > (targetWidth / targetHeight);
            if (isSoureWider) {
                drawHeight = (int) (targetWidth / sar);
            }
            else {
                drawWidth = (int) (targetHeight * sar);
            }
        }
    }
    logger.info("Scaling image from " + imageWidth + "/" + imageHeight + " to " + drawWidth + "/" + drawHeight);
    final BufferedImage result = new BufferedImage(drawWidth, drawHeight, type);
    try {
        final Graphics2D g2 = result.createGraphics();
        try {
            if (hint != null) {
                g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, hint);
            }
            g2.drawImage(img, 0, 0, drawWidth, drawHeight, null);
        }
        finally {
            g2.dispose();
        }
        return result;
    }
    finally {
        result.flush();
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-29T10:39:23.927

我知道这是一个非常古老的问题，但我使用标准 Java API 得到了自己的解决方案

```
import java.awt.*;
import java.awt.event.*;
import javax.imageio.*
import java.awt.image.*;

BufferedImage im, bi, bi2;
Graphics2D gfx;
int imWidth, imHeight, dstWidth, dstHeight;
int DESIRED_WIDTH = 500, DESIRED_HEIGHT = 500;

im = ImageIO.read(new File(filePath));
imWidth = im.getWidth(null);
imHeight = im.getHeight(null);

dstWidth = DESIRED_WIDTH;
dstHeight = (dstWidth * imHeight) / imWidth;

bi = new BufferedImage(dstWidth, dstHeight, im.getType());

gfx = bi.createGraphics();
gfx.drawImage(im, 0, 0, dstWidth, dstHeight, 0, 0, imWidth, imHeight, null);

bi2 = new BufferedImage(DESIRED_WIDTH, DESIRED_HEIGHT, im.getType());
gfx = bi2.createGraphics();

gfx.drawImage(bi, 0, 0, DESIRED_WIDTH, DESIRED_HEIGHT, null);

ImageIO.write(bi2, "jpg", new File(filePath)); 
```

我相信它可以改进和适应。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T18:08:45.727

我尝试将 imgscalr 与标准 Java 1.6 进行比较，但我不能说它更好。

我试过的是

```
BufferedImage bufferedScaled = Scalr.resize(sourceImage, Method.QUALITY, 8000, height); 
```

和

```
 Image scaled = sourceImage.getScaledInstance(-1, height, Image.SCALE_SMOOTH);
  BufferedImage bufferedScaled = new BufferedImage(scaled.getWidth(null),  scaled.getHeight(null), BufferedImage.TYPE_INT_RGB);
  bufferedScaled.getGraphics().drawImage(scaled, 0, 0, null); 
```

大约 5 分钟的测试让我觉得第二件事（纯 Java 1.6）会产生更好的结果。

# c# - 由 Linq 查询填充的 C# AutoSize DatagridView

> ID：816555
> 
> 赞同：1
> 
> 时间：2009-05-03T08:04:47.513
> 
> 标签：c#, datagridview, autosize

我有一个由 linq 查询填充的 datagridview 控件：

```
public static IQueryable SearchByDepartmentNameInfo(string deptName)
    {

        ExamineDataContext dc = new ExamineDataContext();

        var queryResult = from q in dc.GetTable<Question>()
                          where q.Topic.Module.Department.DepartmentName.Equals(deptName)
                          join s in dc.Solutions
                          on q.QuestionID equals s.QuestionID
                          into qs // note grouping        
                          select new
                          {
                              Module = q.Topic.ModuleTitle,
                              Topic = q.TopicName,
                              Question = q.QuestionText,
                              QuestionType = q.QuestionType,
                          };
        return queryResult;
    }

dataGridView1.DataSource = Repository.SearchByDepartmentNameInfo("Computer Science"); 
```

我希望 datagridview 根据查询返回的数据自动调整列的大小。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T08:09:05.600

this.dataGridView1.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T08:44:43.670

尝试在后面添加

dataGridView.AutoResizeColumns();

# php - 用于插入日期、时间的 PHP MySQL 语法

> ID：816557
> 
> 赞同：1
> 
> 时间：2009-05-03T08:06:20.253
> 
> 标签：php, mysql, syntax

我正在尝试使用 php 脚本插入日期、时间字段，但出现语法错误。有人可以告诉我，我在哪里做错了。谢谢各位

INSERT INTO calendar(event,from,to,day) VALUES ('".$_REQUEST['event']."', '".$_REQUEST['from_time']."', '".$_REQUEST['to_time ']."', '".$_REQUEST['date_event']."')

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-08-09T20:57:30.687

要插入 mySQL 日期时间字段，字符串必须采用某种格式，以便 mySQL 能够理解。问题是 php 对如何表示日期有自己的想法和想法。在处理两者之间的日期时，您必须翻译。

如果在 php 中你正在处理一个时间对象，你可以这样做来得到一个字符串 mySQL 会喜欢：

```
$mysqlDateString = date('Y-m-d H:i:s', $phpdate); 
```

或者，如果您正在处理字符串日期，您可以这样做：

```
$mysqlDateString = date('Y-m-d H:i:s', $strtotime("08/09/2009")); 
```

如果你从 mySQL 得到一个日期时间字符串，你可以用 PHP 来处理它：

```
$phpTime = strtotime($mysqlDateString); 
```

我自己也遇到了这个问题，所以希望这对你也有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T08:09:50.433

切勿在未清理数据的情况下将字符串数据插入 sql 语句，否则会导致 sql 注入（有意或无意注入），请参阅[http://php.net/mysql_real_escape_string](http://php.net/mysql_real_escape_string)
如果您没有安装调试器，请让 php 打印 sql声明，以便您可以检查它。

格式化和缩进你的 sql 查询。它们更容易阅读和调试。

始终检查 mysql_query() 的返回值。如果为 FALSE，则查询失败，[mysql_errno()](http://php.net/mysql_errno)或[mysql_error()](http://php.net/mysql_error)可以告诉您有关错误原因的更多信息。

如果你想使用一个同时也是[MySQL 保留字](http://dev.mysql.com/doc/refman/5.1/en/reserved-words.html)的标识符，你几乎总是必须把它放在反引号 (`) 或双引号中（在 ansi 模式下）。

MySQL 理解的日期/时间文字的格式在[http://dev.mysql.com/doc/refman/5.0/en/date-and-time-types.html进行了解释](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-types.html)

使用 _REQUEST 进行 INSERT 操作可能会有问题......但我把它留给其他人来回答;-)

```
<?php
$mysql = mysql_connect...`$query = "
  INSERT INTO
    `calendar`
    (`event`, `from`, `to`, `day`)
  VALUES
    (
      '" . mysql_real_escape_string($_REQUEST['event'], $mysql) ."',
      '" . mysql_real_escape_string($_REQUEST['from_time'], $mysql) ."',
      '" . mysql_real_escape_string($_REQUEST['to_time'], $mysql) ."',
      '" . mysql_real_escape_string($_REQUEST['date_event'], $mysql]) ."'
    )
";
echo '<pre>$query=', htmlspecialchars($query), '</pre>';
$result = mysql_query($query, $mysql);
if ( !$result ) {
  echo 'error: ', mysql_error($mysql);
}`
```

顺便说一句：改用[准备好的语句](http://www.php.net/pdo.prepared-statements)。

# php - .htaccess 文件修改

> ID：816558
> 
> 赞同：4
> 
> 时间：2009-05-03T08:06:28.773
> 
> 标签：php, .htaccess

我有一个 .htaccess 文件，它安排所有请求都通过 index.php。现在我想为 rss.php 做一个例外。直接通过 rss.php。我该怎么做呢？

这是它现在的样子：

```
RewriteEngine on
RewriteBase /
RewriteRule !\.(js|ico|txt|gif|jpg|png|css)$ index.php 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T08:10:11.353

把它放在最后一行之前。

```
RewriteCond %{REQUEST_URI} !^/rss\.php$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-03T08:13:52.717

您可以使用附加[`RewriteCond`指令](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)排除任何现有文件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T21:18:12.453

或者，进行与文件匹配的重写，然后跳过其余的重写测试。

通过将以下行放在现有的 RewriteRule 之前将重定向而不通过 index.php。

```
RewriteRule  ^/rss.php  /rss.php  [L] 
```

我在寻找使用我的 /robots.txt 文件执行此操作的方法时遇到了此页面。

[mod_rewrite 与 apache1.3](http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html#RewriteRule)

# c# - C# --> Java 代码生成器

> ID：816565
> 
> 赞同：1
> 
> 时间：2009-05-03T08:14:33.730
> 
> 标签：c#, java, .net, code-generation

我有一个小型（约 2000 行代码）类，我想从 java 和 .NET 中使用它。有几种方法可以做到这一点 - 其中包括将类包装为服务，使用一些互操作巫术，或者将代码复制到 C# 和 java。

您是否知道完成后者的开箱即用工具 - 采用没有依赖关系的简单 C# 类并将其转换为等效的 java 类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T08:35:09.653

[IKVM.NET](http://www.ikvm.net/)在获取 jar 文件并将其编译为托管的 .NET 程序集方面做得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T08:29:25.440

如果它很小（或者实际上，即使它很大），我不确定机械翻译工具的智慧；我从来没有和他们在一起过多少快乐。但是，一种选择是用 J# 编写 .NET 代码。

但我强调——如果是我，我会手动在两者之间手动移植并分别维护它们。大多数情况下差异并不大 - 有符号字节，装箱差异等。当然，任何有代表的东西都需要改变 - 并且捕获的变量的工作方式不同等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T09:16:37.700

曾经有一个 COM 桥，您可以使用 regasm.exe 或 Visual Studio 注册 C# 程序集以在 COM 中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T09:30:22.860

这不是您真正要求的，但我只想创建一个简单的 C# 到 Java 转换器。

差异并没有那么大，而且您似乎是源代码的作者，因此您可以避免难以翻译的令人讨厌的结构。这样你的翻译器就很简单了。我会从 C# 转到 Java，因为 C# 更具表现力，并且您可以在 Java 中模拟几乎所有 C# 函数。

实际上[cs2java](http://www.cs2java.com/)似乎就是这样做的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-14T00:12:58.837

这是我知道的[工具列表。](http://jni4net.sourceforge.net/links.shtml)Sharpen 或 j2cstranslator 看起来是不错的选择。

# c# - 创建自定义 MSBuild 任务时如何从 C# 代码中获取当前项目目录？

> ID：816566
> 
> 赞同：188
> 
> 时间：2009-05-03T08:14:58.300
> 
> 标签：c#, msbuild

我不想使用硬编码的路径运行外部程序，而是想获取当前的项目目录。我正在使用自定义任务中的进程调用外部程序。

我该怎么做？AppDomain.CurrentDomain.BaseDirectory 只是给了我 VS 2008 的位置。

* * *

## 回答 #1

> 赞同：359
> 
> 时间：2012-08-09T11:11:03.403

```
using System;
using System.IO;

// This will get the current WORKING directory (i.e. \bin\Debug)
string workingDirectory = Environment.CurrentDirectory;
// or: Directory.GetCurrentDirectory() gives the same result

// This will get the current PROJECT bin directory (ie ../bin/)
string projectDirectory = Directory.GetParent(workingDirectory).Parent.FullName;

// This will get the current PROJECT directory
string projectDirectory = Directory.GetParent(workingDirectory).Parent.Parent.FullName; 
```

* * *

## 回答 #2

> 赞同：142
> 
> 时间：2009-05-03T08:32:53.187

您可以尝试这两种方法之一。

```
string startupPath = System.IO.Directory.GetCurrentDirectory();

string startupPath = Environment.CurrentDirectory; 
```

告诉我，你觉得哪个更好

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2018-08-03T19:04:57.173

如果项目在 IIS Express 上运行，则`Environment.CurrentDirectory`可能指向 IIS Express 所在的位置（默认路径为*C:\Program Files (x86)\IIS Express*），而不是项目所在的位置。

* * *

这可能是各种项目最合适的目录路径。

```
AppDomain.CurrentDomain.BaseDirectory 
```

这是 MSDN 的定义。

> 获取程序集解析器用于探测程序集的基目录。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2015-09-16T21:58:38.663

这还将通过从当前执行目录向上导航两个级别来为您提供项目目录（这不会为每个构建返回项目目录，但这是最常见的）。

```
System.IO.Path.GetFullPath(@"..\..\") 
```

当然，您希望将其包含在某种验证/错误处理逻辑中。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2021-02-19T22:17:57.573

# 2020年回答

到目前为止，我对所有发布的解决方案的随意性感到惊讶，简直目瞪口呆。

获取 C# 项目的根文件夹的唯一***正确***^(方法1)是利用该`[CallerFilePath]`属性获取源文件的完整路径名，然后从中减去文件名和扩展名，留下项目的路径.

以下是***实际***操作方法：

在项目的根文件夹中，添加`ProjectSourcePath.cs`具有以下内容的文件：

```
internal static class ProjectSourcePath
{
    private const  string  myRelativePath = nameof(ProjectSourcePath) + ".cs";
    private static string? lazyValue;
    public  static string  Value => lazyValue ??= calculatePath();

    private static string calculatePath()
    {
        string pathName = GetSourceFilePathName();
        Assert( pathName.EndsWith( myRelativePath, StringComparison.Ordinal ) );
        return pathName.Substring( 0, pathName.Length - myRelativePath.Length );
    }
} 
```

这`string?`需要一个相当晚的 C# 版本，带有`#nullable enable`; 如果你没有它，那么只需删除`?`.

`Assert()`功能是我自己的；如果你喜欢危险地生活，你可以用你自己的代替它，或者省略它。

函数`GetSourceFilePathName()`定义如下：

```
using System.Runtime.CompilerServices

    public static string GetSourceFilePathName( [CallerFilePath] string? callerFilePath = null ) //
        => callerFilePath ?? ""; 
```

有了以上内容后，您可以按如下方式使用它：

```
string projectSourcePath = ProjectSourcePath.Value; 
```

* * *

¹ “正确”如：万无一失；万无一失；没有假设；不被鞋带绑在一起；当您更改不相关的内容时，不太可能在没有警告的情况下可怕地中断；等等

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-05-23T14:44:50.897

如果你想知道你的解决方案所在的目录是什么，你需要这样做：

```
 var parent = Directory.GetParent(Directory.GetCurrentDirectory()).Parent;
            if (parent != null)
            {
                var directoryInfo = parent.Parent;
                string startDirectory = null;
                if (directoryInfo != null)
                {
                    startDirectory = directoryInfo.FullName;
                }
                if (startDirectory != null)
                { /*Do whatever you want "startDirectory" variable*/}
            } 
```

如果您只使用`GetCurrrentDirectory()`方法，无论您是在调试还是发布，您都会获得构建文件夹。我希望这有帮助！如果您忘记了验证，它将是这样的：

```
var startDirectory = Directory.GetParent(Directory.GetCurrentDirectory()).Parent.Parent.FullName; 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-10-14T03:22:17.817

根据[Gucu112 的回答](https://stackoverflow.com/a/52402026/3427520)，但对于 .NET Core Console/Window 应用程序，它应该是：

```
string projectDir = 
    Path.GetFullPath(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, @"..\..\..")); 
```

我在 .NET Core Window 应用程序的 xUnit 项目中使用它。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-06-28T09:17:34.790

**这个解决方案对我很有效，在开发服务器上以及通过 C# 使用 ASP.NET MVC5**的 TEST 和 PROD 服务器上：

```
var projectDir = Path.GetDirectoryName(AppDomain.CurrentDomain.BaseDirectory); 
```

如果您需要**项目配置文件中的项目目录，**请使用：

```
$(ProjectDir) 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2011-08-22T05:21:09.127

我也在找这个。我有一个运行 HWC 的项目，我想将网站保留在应用程序树之外，但我不想将其保留在调试（或发布）目录中。FWIW，公认的解决方案（以及这个解决方案）仅标识可执行文件正在运行的目录。

为了找到那个目录，我一直在使用

```
string startupPath = System.IO.Path.GetFullPath(".\\"). 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-03-19T03:33:21.860

```
using System;
using System.IO;

// Get the current directory and make it a DirectoryInfo object.
// Do not use Environment.CurrentDirectory, vistual studio 
// and visual studio code will return different result:
// Visual studio will return @"projectDir\bin\Release\netcoreapp2.0\", yet 
// vs code will return @"projectDir\"
var currentDirectory = new DirectoryInfo(AppDomain.CurrentDomain.BaseDirectory);

// On windows, the current directory is the compiled binary sits,
// so string like @"bin\Release\netcoreapp2.0\" will follow the project directory. 
// Hense, the project directory is the great grand-father of the current directory.
string projectDirectory = currentDirectory.Parent.Parent.Parent.FullName; 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-02-15T16:16:20.917

我也遇到过类似的情况，在谷歌无果之后，我声明了一个公共字符串，它修改了调试/发布路径的字符串值来获取项目路径。使用此方法的一个好处是，由于它使用当前项目的目录，因此无论您是从调试目录还是发布目录工作都无关紧要：

```
public string DirProject()
{
    string DirDebug = System.IO.Directory.GetCurrentDirectory();
    string DirProject = DirDebug;

    for (int counter_slash = 0; counter_slash < 4; counter_slash++)
    {
        DirProject = DirProject.Substring(0, DirProject.LastIndexOf(@"\"));
    }

    return DirProject;
} 
```

然后，您可以随时调用它，只需使用一行：

```
string MyProjectDir = DirProject(); 
```

这在*大多数*情况下应该有效。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-06-16T11:19:53.970

另一种方法来做到这一点

```
string startupPath = System.IO.Directory.GetParent(@"./").FullName; 
```

如果要获取 bin 文件夹的路径

```
string startupPath = System.IO.Directory.GetParent(@"../").FullName; 
```

也许有更好的方法=)

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2015-10-10T15:16:04.333

另一个不完美的解决方案（但可能比其他一些更接近完美）：

```
 protected static string GetSolutionFSPath() {
        return System.IO.Directory.GetParent(System.IO.Directory.GetCurrentDirectory()).Parent.Parent.FullName;
    }
    protected static string GetProjectFSPath() {
        return String.Format("{0}\\{1}", GetSolutionFSPath(), System.Reflection.Assembly.GetExecutingAssembly().GetName().Name);
    } 
```

即使当前项目不是解决方案，此版本也会返回**当前项目的**`Startup Project`文件夹。

第一个缺陷是我跳过了所有的错误检查。这可以很容易地解决，但只有当您将项目存储在驱动器的根目录中或在路径中使用联结（并且该联结是解决方案文件夹的后代）时才应该是一个问题，因此这种情况不太可能. 我不完全确定 Visual Studio 是否可以处理这些设置中的任何一个。

您可能遇到的另一个（更有可能）问题是项目名称*必须*与项目的文件夹名称匹配才能找到它。

您可能遇到的另一个问题是项目必须位于解决方案文件夹中。这通常不是问题，但如果您使用了`Add Existing Project to Solution`将项目添加到解决方案的选项，那么这可能不是您的解决方案的组织方式。

最后，如果您的应用程序将修改工作目录，则应在执行此操作之前存储此值，因为此值是相对于当前工作目录确定的。

当然，这也意味着您不能在项目属性对话框中更改项目的`Build`->`Output path`或`Debug`->选项的默认值。`Working directory`

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-07-12T07:31:29.437

试试这个，很简单

```
HttpContext.Current.Server.MapPath("~/FolderName/"); 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2018-12-29T17:21:22.637

如果您真的想确保获得源项目目录，则无论 bin 输出路径设置为：

1.  添加预构建事件命令行（Visual Studio：项目属性 -> 构建事件）：

    `echo $(MSBuildProjectDirectory) > $(MSBuildProjectDirectory)\Resources\ProjectDirectory.txt`

2.  将`ProjectDirectory.txt`文件添加到项目的 Resources.resx 中（如果还不存在，请右键单击项目 -> 添加新项目 -> 资源文件）

3.  从代码访问`Resources.ProjectDirectory`。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2012-02-15T16:49:44.923

在我终于完成了关于公共字符串的我们的第一个答案以得出答案之后，我突然意识到您可能可以从注册表中读取一个值以获得您想要的结果。事实证明，这条路线甚至更短：

首先，您必须包含 Microsoft.Win32 命名空间，以便您可以使用注册表：

```
using Microsoft.Win32;    // required for reading and / or writing the registry 
```

这是主要代码：

```
RegistryKey Projects_Key = Registry.CurrentUser.OpenSubKey(@"SOFTWARE\Microsoft\VisualStudio\9.0", false);
string DirProject = (string)Projects_Key.GetValue(@"DefaultNewProjectLocation"); 
```

关于这个答案的注释：

我正在使用 Visual Studio 2008 专业版。如果您使用的是其他版本（即 2003、2005、2010 等），那么您可能不必修改 SubKey 字符串的“版本”部分（即 8.0、7.0 等）。

如果您使用我的答案之一，并且问的不是太多，那么我想知道您使用了我的哪种方法以及为什么。祝你好运。

*   分米

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2015-08-12T14:49:20.837

使用它来获取项目目录（为我工作）：

```
string projectPath = 
    Directory.GetParent(Directory.GetCurrentDirectory()).Parent.FullName; 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2018-09-19T09:01:18.127

我使用以下解决方案来完成工作：

```
string projectDir =
    Path.GetFullPath(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, @"..\..")); 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2018-12-24T21:58:00.837

尝试：

```
var pathRegex = new Regex(@"\\bin(\\x86|\\x64)?\\(Debug|Release)$", RegexOptions.Compiled);
var directory = pathRegex.Replace(Directory.GetCurrentDirectory(), String.Empty); 
```

这是与其他解决方案不同的解决方案，它也考虑了可能的 x86 或 x64 构建。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-08-20T15:41:27.020

（因为 22 个答案还不够……这里还有一个……）

Mike Nakis 发布了一个很好的答案，我添加了一些增强功能。这只是他非常好的代码的一个稍微改进的版本。

正如 Mike 指出的，这个类文件必须在项目的根目录中。

我没有遇到以下任何问题，但也许有一些我不知道的细微差别。YMMV。

```
using System.IO;
using System.Runtime.CompilerServices;

namespace Whatever
{
  internal static class ProjectPathInfo
  {
    public static string CSharpClassFileName = nameof(ProjectPathInfo) + ".cs";
    public static string CSharpClassPath;
    public static string ProjectPath;
    public static string SolutionPath;

    static ProjectPathInfo() {
      CSharpClassPath = GetSourceFilePathName();
      ProjectPath = Directory.GetParent(CSharpClassPath)!.FullName;
      SolutionPath = Directory.GetParent(ProjectPath)!.FullName;
    }

    private static string GetSourceFilePathName( [CallerFilePath] string? callerFilePath = null ) => callerFilePath ?? "";
  }
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-09-04T17:47:32.737

最佳解决方案

```
string PjFolder1 =
    Directory.GetParent(AppDomain.CurrentDomain.BaseDirectory).
        Parent.Parent.FullName; 
```

其他解决方案

```
string pjFolder2 = Path.GetDirectoryName(Path.GetDirectoryName(Path.GetDirectoryName(
                System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase))); 
```

测试它，AppDomain.CurrentDomain.BaseDirectory 在过去的项目中为我工作，现在我得到调试文件夹....所选的好答案只是不工作！。

```
//Project DEBUG folder, but STILL PROJECT FOLDER
string pjDebugFolder = AppDomain.CurrentDomain.BaseDirectory;

//Visual studio folder, NOT PROJECT FOLDER
//This solutions just not work
string vsFolder = Directory.GetCurrentDirectory();
string vsFolder2 = Environment.CurrentDirectory;
string vsFolder3 = Path.GetFullPath(".\\");   

//Current PROJECT FOLDER
string ProjectFolder = 
    //Get Debug Folder object from BaseDirectory ( the same with end slash)
    Directory.GetParent(pjDebugFolder).
    Parent.//Bin Folder object
    Parent. //Project Folder object
    FullName;//Project Folder complete path 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-11-29T20:11:19.990

这适用于带有 SDK Core MSBuild 配置的 VS2017。

您需要在 EnvDTE / EnvDTE80 包中进行 NuGet。

不要使用 COM 或互操作。什么……垃圾！！

```
 internal class Program {
    private static readonly DTE2 _dte2;

    // Static Constructor
    static Program() {
      _dte2 = (DTE2)Marshal.GetActiveObject("VisualStudio.DTE.15.0");
    }

    private static void FindProjectsIn(ProjectItem item, List<Project> results) {
      if (item.Object is Project) {
        var proj = (Project) item.Object;
        if (new Guid(proj.Kind) != new Guid(Constants.vsProjectItemKindPhysicalFolder))
          results.Add((Project) item.Object);
        else
          foreach (ProjectItem innerItem in proj.ProjectItems)
            FindProjectsIn(innerItem, results);
      }

      if (item.ProjectItems != null)
        foreach (ProjectItem innerItem in item.ProjectItems)
          FindProjectsIn(innerItem, results);
    }

    private static void FindProjectsIn(UIHierarchyItem item, List<Project> results) {
      if (item.Object is Project) {
        var proj = (Project) item.Object;
        if (new Guid(proj.Kind) != new Guid(Constants.vsProjectItemKindPhysicalFolder))
          results.Add((Project) item.Object);
        else
          foreach (ProjectItem innerItem in proj.ProjectItems)
            FindProjectsIn(innerItem, results);
      }

      foreach (UIHierarchyItem innerItem in item.UIHierarchyItems)
        FindProjectsIn(innerItem, results);
    }

    private static IEnumerable<Project> GetEnvDTEProjectsInSolution() {
      var ret = new List<Project>();
      var hierarchy = _dte2.ToolWindows.SolutionExplorer;
      foreach (UIHierarchyItem innerItem in hierarchy.UIHierarchyItems)
        FindProjectsIn(innerItem, ret);
      return ret;
    }

    private static void Main() {
      var projects = GetEnvDTEProjectsInSolution();
      var solutiondir = Path.GetDirectoryName(_dte2.Solution.FullName);

      // TODO
      ...

      var project = projects.FirstOrDefault(p => p.Name == <current project>);
      Console.WriteLine(project.FullName);
    }
  } 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-10-04T11:47:45.133

好的，2021 年，派对有点晚了……但我对我在许多项目中发现的所有可能性感到非常恼火：

*   垃圾箱/调试
*   bin/x86/调试
*   bin/Debug/net5.0-windows
*   ...

来吧...我只需要一个（或几乎）**一行**来解决测试单元中的一些文件；我需要在所有过去、现在、（也许将来）的项目中使用它。

因此，**如果项目名称与其所在的相对文件夹相同**：

1.  使用程序集名称选择项目根文件夹名称；
2.  返回直到找到该名称。

代码示例：

```
string appName = Assembly.GetExecutingAssembly().GetName().Name;
var dir = new DirectoryInfo(Environment.CurrentDirectory);
while (dir.Name != appName) {
  dir = Directory.GetParent(dir.FullName);
}
return dir.FullName; 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-12-01T16:24:16.760

```
string projPath = Path.GetFullPath(@"..\..\..\");
Console.WriteLine(projPath); 
```

这对我来说一直很有效。搏一搏。

* * *

## 回答 #25

> 赞同：-7
> 
> 时间：2010-11-23T19:36:28.737

Directory.GetParent(Directory.GetCurrentDirectory()).Parent.Parent.Parent.Parent.FullName

会给你项目目录。

# xcode - XCode 中没有 Go To Last Edit Location 快捷方式吗？

> ID：816568
> 
> 赞同：21
> 
> 时间：2009-05-03T08:16:09.670
> 
> 标签：xcode, macos, ide, editor, intellij-idea

我还是新手`XCode`，我仍然想念`IntelliJ IDEA`.

*也许对我来说最大的痛点是缺少允许您移动最近的**更改点***（修改文件的点）的键盘快捷键（甚至是菜单操作）。

如果您熟悉`IntelliJ`，我指的是`Ctrl`- `Shift`-`Backspace`快捷方式...（或`Shift`-`⌘</kbd>-`Backspace` on a Mac)`

我**不是**指通过您最近的观点导航（通过`Alt`-`⌘</kbd>-`Left` & `Alt`-`⌘</kbd>-`Right`) - only locations you edited.``

[您可以在这里](https://stackoverflow.com/questions/146297/what-are-those-little-xcode-tips-tricks-you-wish-you-knew-about-2-years-ago)找到一些有用的`XCode`技巧。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-16T22:12:57.807

⌘-Z 然后重做

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-28T13:15:35.447

我是通过谷歌来到这里的。在 Xcode 4 和 5 中，快捷方式是

CTRL + 命令 + 后退箭头

CTRL + 命令 + 向前箭头

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-24T12:11:41.427

它不像 Jetbrains 和其他公司那样可用。使用 AppCode 可能是一种选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-09T10:41:48.773

要滚动浏览您最近在 Xcode 中所做的更改：

按住 Control + Command 键（同时按住）然后按下并释放后退箭头（在 Apple 键盘的右下角） 在仍然按住 Control 和 Command 键的同时，再次按下后退箭头。

这将滚动浏览您对项目中的文件所做的更改。我相信这只会向您展示自项目开放以来的变化。

# c# - TreeView 中的 Silverlight 工具包手风琴

> ID：816575
> 
> 赞同：0
> 
> 时间：2009-05-03T08:23:39.323
> 
> 标签：c#, silverlight, xaml

我正在尝试获取 SL Tookit（2009 年 3 月）Accordion 控件来填充 TreeView 控件的 ItemTemplate，但它不能正确呈现（只有 1x1 像素正方形）。

这是我的 XAML：

```
<UserControl x:Class="SilverlightTest.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:tk="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"
    xmlns:tkw="clr-namespace:System.Windows;assembly=System.Windows.Controls.Toolkit"
    xmlns:lo="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Layout.Toolkit"
    Width="400" Height="300">
    <Grid x:Name="LayoutRoot" Background="White">
        <tk:TreeView Name="tv">
            <tk:TreeView.ItemTemplate>
                <DataTemplate>
                    <lo:Accordion Name="acc" SelectionMode="ZeroOrMore">
                        <lo:Accordion.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Key}"/>
                            </DataTemplate>
                        </lo:Accordion.HeaderTemplate>
                        <lo:Accordion.ContentTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Value: "/>
                                    <TextBlock Text="{Binding Value}"/>
                                </StackPanel>
                            </DataTemplate>
                        </lo:Accordion.ContentTemplate>
                    </lo:Accordion>
                </DataTemplate>    
            </tk:TreeView.ItemTemplate>
        </tk:TreeView>
    </Grid>
</UserControl> 
```

和代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

namespace SilverlightTest
{
    public partial class MainPage : UserControl
    {
        public MainPage()
        {
            InitializeComponent();

            KeyValuePair<string, string>[] data = new KeyValuePair<string,string>[]
            {
                new KeyValuePair<string, string>("Item 1", "Apple"),
                new KeyValuePair<string, string>("Item 2", "Banana"),
                new KeyValuePair<string, string>("Item 3", "Grapefruit"),
                new KeyValuePair<string, string>("Item 4", "Kiwi")
            };

            tv.ItemsSource = data;
        }
    }
} 
```

我能做些什么来让它做我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-12-19T07:26:41.890

您应该通过添加来完成代码

tv.UpdateLayout();

那应该这样做。

/米克

# ruby-on-rails - 使用 Rails 以外的 Ruby 框架是否有任何潜在的缺点？

> ID：816576
> 
> 赞同：6
> 
> 时间：2009-05-03T08:24:34.390
> 
> 标签：ruby-on-rails, ruby, sinatra, web-frameworks, ramaze

我想使用比 Rails 更轻的框架（Sinatra/Ramaze/Camping），但我担心这样做我将无法使用许多以插件形式为 Rails 量身定制的共享库。这是一个主要问题还是这些插件中的大多数都可以在不同的 Ruby 框架中使用？

使用 Rails 以外的 Ruby 框架还有其他潜在的缺点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-03T08:39:08.133

你仍然可以在你提到的所有框架中使用[gems](http://rubygems.org/)，所以很多东西都是可重用的。想换一个新的ORM，没问题。想要一个花哨的 shmacy 语法高亮，没问题。Rails 一直在大力推动从旧的插件模型转向专门使用 gems。

如果其他框架之一适合您的需求，最好使用它。请记住，在文档和示例方面，rails 有更多内容。

如果我正在学习 Ruby 并想尝试一个 Web 框架，我可能会选择 Rails，不是因为它更好，而是因为它有更好的工具和文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T09:05:33.263

Rails 使用的大多数 Ruby 模块（甚至 ActiveRecord）都可以在没有 Rails 的情况下使用。但是这样你就失去了 Rails 提供的集成的额外好处。您可能需要更加努力地将 Ruby 模块粘合到您选择的框架上。另请注意，大多数关于 Rails 使用的 Ruby 模块的文档只告诉您如何在 Rails 中使用该*模块*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T04:45:02.303

[网络效应](http://en.wikipedia.org/wiki/Network_effect)起到了一定的作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T07:11:54.900

当您使用其他框架（如 sinatra、camping 等）时出现的一个问题是，rails 为您的应用程序中的文件提供了一种经过验证的结构。较小的框架是相当开放和免费的。

当您与多个开发人员一起工作时，这可能是一个不利因素，因为您需要就创建约定进行对话，而不是简单地遵循它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T20:12:23.557

如果您使用 Ruby 不到一年，请坚持使用 Rails，除非您有一个非常明确的需求，并且可以更好地由其他框架之一处理。

较轻的框架，尤其是 Sinatra，往往受到那些确切知道他们需要什么并且无法承受未使用代码带来任何额外开销的人的欢迎。本质上，你选择了你的工具链，而不是通常被 Rails 给你的东西所困。（是的，在 Rails 中，您可以用其他库替换 ActiveRecord 等，但这并不容易。）因此，较轻的框架为您提供了更多的自由，但在许多情况下您还有很多工作要做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-04T00:38:16.080

我认为除了 ActiveRecord 插件（例如acts_as_nested_set 等）之外，没有任何 Rails 插件可以开箱即用，它们仍然需要一些管道工作（设置 $LOAD_PATH 并需要正确的文件）。我会推荐用于 ORM 的[DataMapper](http://datamapper.org/doku.php)，它不仅比 ActiveRecord 快得多，而且它还非常模块化构建，并且插件是您可以轻松安装的实际宝石。不同的是，ActiveRecord 插件大多是猴子补丁，每个新版本都会中断。

Sinatra 没有任何“好东西”，没有 Rakefile，没有骨架，没有脚本/生成，但实际上这就是它的目的。你可以逐渐“插入”所有额外的东西。还有一些带有一些基本布局和默认设置的 sinatra 应用程序[框架，您可能会发现这些很有用。](http://github.com/nrhammond/sinatra-skeleton/tree/master)

# javascript - 如何更新正确的跨度？

> ID：816579
> 
> 赞同：0
> 
> 时间：2009-05-03T08:26:17.010
> 
> 标签：javascript

在我基于论坛的网站上，我在每个帖子下方都有一个链接，用于报告垃圾邮件或滥用行为。每当单击此链接时，都会在服务器上调用 Web 服务，当调用返回时，包含链接的范围（参见下面的代码）会更新为“发布报告”之类的内容，或者如果发生错误，则显示类似于“报告帖子时出错，这是 javascript 代码：

```
<script src="/js/MicrosoftAjax.js" type="text/javascript" language="javascript"></script>

<script type="text/javascript" language="javascript">

    var spanToUpdate;

    function ReportPost(updateSpan, postID)
    {
      if (confirm("Are you sure you want to report this post as spam or abuse?"))
      {
        spanToUpdate = updateSpan;
        var proxy = SiteWS.ReportPost(postID, onReportPostSuccess, onReportPostFailure);
      }
    }

    function onReportPostSuccess(sender, e)
    {
      spanToUpdate.innerHTML = "Post reported";
    }

    function onReportPostFailure(sender, e)
    {
      spanToUpdate.innerHTML = "An error occurred while reporting the post";
    }

</script> 
```

这是报告链接：

```
<div class="post">
  <p>post text here</p>
  <span><a href="#" onclick="ReportPost(this.parentNode, <%= post.ID %>);return false;" title="Report spam or abuse">Report Post</a></span>
</div>

Other posts ... 
```

如您所见，我使用变量 spanToUpdate 来保存对包含报告链接的 span 的引用，这意味着如果用户在调用返回之前报告了另一个帖子（即单击另一个报告链接），则 span最后一个帖子会更新两次，上一个根本不会更新，有什么解决方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T08:37:08.993

您可以为此使用匿名函数和闭包。

```
函数 ReportPost(updateSpan, postID) {
  if (confirm("您确定要将此帖子举报为垃圾邮件或滥用行为吗？")) {
    var proxy = SiteWS.ReportPost(
      邮政编号，
      功能（发件人，e）{updateSpan.innerHTML =“发布报告”}，
      function(sender,e) {updateSpan.innerHTML = "发帖时出错" }
    );
  }
}
```

编辑：

> 嗯..只是想知道，当调用匿名方法时，updateSpan 是否会引用同一个跨度？——瓦利德·艾萨

是的，这就是闭包的魔力。试试这个小例子：

```
<head>
  <script>
    function foo()
    {
      bar(1, 100);
      bar(2, 150);
      bar(3, 200);
      bar(4, 250);
      bar(5, 300);
      document.getElementById("div1").innerHTML += "foo() is done. ";
      return;
    }
    function bar(val, timeout) {
      window.setTimeout(
        function() {
          document.getElementById("div1").innerHTML += " " + val + " ";
        },
        timeout
      );
    }
  </script>
</head>
<body>
  <button onclick="foo()">click</button>
  <div id="div1"></div>
</body>
```

您会看到，每次调用匿名函数时，它都会从调用 bar() 时的时间/上下文中保留“自己的”val 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T08:38:46.883

不是 JavaScript 开发人员，所以这可能行不通。是否可以保留对帖子 ID 和 spanToUpdate 的引用，然后让服务器的响应包含帖子 ID。然后您可以检索正确的 spanToUpdate。

# asp.net - 如何将数据源动态分配给列表视图

> ID：816581
> 
> 赞同：2
> 
> 时间：2009-05-03T08:27:30.937
> 
> 标签：asp.net, listview

我在将数据源动态分配给列表视图时遇到问题。

例如，我有 receivedBonuses(Bonus)、receivedLeaves(Leave) 的列表，我希望 listview 根据用户单击的链接按钮显示这些列表项。

研究互联网和 stackoverflow.com 我发现了 3 个解决方案：

1.  在列表视图中使用中继器。但就我而言，我无法将其应用于我的案例，我完全糊涂了

2.  使用嵌套列表视图。我试着这样做：

 `````
 <asp:ListView ID = "bonuses" runat="server" DataSource ='<%# Eval("received_bonuses") %>' >
        <ItemTemplate>

            <tr>

                <td><%# Eval("bonus_desc")%></td>

                <td><%# Eval("bonus_type")%></td>                  

            </tr>
            </ItemTemplate>
                 <LayoutTemplate>

             <table>

                    <tr>

                        <th>Bonus Description</th> 

                        <th>Bonus Received Date</th>

                    </tr>

                    <tr ID="itemPlaceholder" runat="server" />

                        </table>

        </LayoutTemplate> 
```

```
 <table>

                    <tr>

                        <th>Bonus Description</th> 

                        <th>Bonus Received Date</th>

                    </tr>

                    <tr ID="itemPlaceholder" runat="server" />

                        </table>

        </LayoutTemplate>

</asp:ListView>

    <br /> 
```` 

`在后面的代码上，我试着这样写： `protected void dataBound(object sender, ListViewItemEventArgs e) { this.DataBindChildren();``

 `````
 } 
````  `它没有给出任何错误它只是没有工作。

3.  使用数据寻呼机

我不知道如何将它应用到我的案例中。

任何帮助表示赞赏。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2011-01-23T04:24:42.667

您在服务器端所要做的就是更改 DataSource 或 DataSourceID 属性并在 ListView 上调用 DataBind。

在使用 <%# Eval("") %> 语法时，您必须确保要绑定的对象具有在 Eval 中命名的那些属性。因此，当您的属性前面带有类型名和下划线时，您可能会遇到切换数据源的问题。话虽如此。有 2 个选项可以更改数据源。在按钮的单击事件或您使用的任何切换机制中，您可以编写类似的内容。

不在标记中使用 DataSource：

```
List<Bonus> bonusList = GetBonuses();
MyListView.DataSource = bonusList;
MyListView.DataBind(); 
```

在标记中使用 DataSource：

```
//where bonus list would be the id of the datasource in the markup
MyListView.DataSourceID= "BonusList"; 

MyListView.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T09:05:23.467

您需要动态执行此操作吗？如果您只有“奖金”和“离开”，您是否可以不创建两个列表视图，然后根据单击的链接按钮对列表视图进行可见=真/假的显示逻辑？

# version-control - 我们如何为设计师等管理 TFS 中的非代码文件？

> ID：816588
> 
> 赞同：2
> 
> 时间：2009-05-03T08:32:19.660
> 
> 标签：version-control, tfs

通常项目由一组非源代码文件组成，如界面图像（PSD、JPG、...）。我们如何使用 TFS 管理这些类型的文件，以及图形设计师如何签入或签出他们的图像文件以在 Photoshop 等应用程序中使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T09:15:07.047

您可以简单地将二进制文件（PSD、JPG 等）添加到您的树中，但需要注意以下几点：

*   大文件在服务器上占用更多空间。来自[http://social.msdn.microsoft.com/Forums/en-US/tfsversioncontrol/thread/6f642d0f-5459-4a14-a19d-ede34713bcf4](http://social.msdn.microsoft.com/Forums/en-US/tfsversioncontrol/thread/6f642d0f-5459-4a14-a19d-ede34713bcf4)的引用：TFS 确实以不同的方式处理大型（> 16mb）文件。它不执行增量存储，而是存储每个版本的完整副本。这是一项优化，可以使这些大文件的签入速度更快。文本文件和二进制文件没有区别。小的是 Delta 的，大的是存储的。
*   大文件的下载速度较慢（参见上面的相同链接）。
*   如果发生冲突（即两个人同时修改同一个二进制文件），其中一个人必须完全手动解决冲突，例如他必须在图像编辑器中加载所有 3 个图像版本，看看差异，并手动合并更改。

# random - 是否存在用于根据用户输入构建熵池的软件？

> ID：816595
> 
> 赞同：2
> 
> 时间：2009-05-03T08:35:40.387
> 
> 标签：random, cryptography, prng, entropy

出于某些目的，能够绕过任何类型的算法生成的随机数以支持自然输入（例如掷骰子）会很好。例如，加密密钥生成让我觉得需要足够少的随机数据，并且数据真正随机的要求足够高，这可能是一个可行且理想的事情。

所以在我动手之前我想知道的是：是否有任何软件可以直接从随机数字输入构建熵池？请注意，仅仅将事物从基数 r 转换为基数 2 是不够的；例如，因为 3 和 2 是相对素数，所以将基数 3（或基数 6）数字转换为二进制数字同时保持原始输入中的最大熵并不完全简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-03T08:40:44.617

该设备[`/dev/random`](http://en.wikipedia.org/wiki/Urandom)在 Linux 上正是这样做的——也许值得查看源代码？

**编辑：**

正如 joeytwiddle 所说，如果没有足够的随机性，`/dev/random`将阻塞，等待通过监视外部设备（例如鼠标、磁盘驱动器）来“建立”熵。这可能是也可能不是您想要的。如果您不想等待并且对可能质量较低的随机性感到满意，请`/dev/urandom`改用 - 它是一个非阻塞伪随机数生成器，`/dev/random`它在可用时注入随机性，使其比普通的确定性 PRNG 更加随机。（详情请参阅`man /dev/urandom`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T08:47:44.727

本文针对 UN*X 和 Windows[提出](http://www.cs.auckland.ac.nz/~pgut001/pubs/usenix98.pdf)了各种具有实现思路的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-03T08:49:20.167

我不确定你在问什么。“熵池”只是“一些随机数”的一个词，所以你当然可以用掷骰子；只需将它们用作具有所需特征的伪随机数生成器即可。

[您可以从例如Lavarnd](http://www.lavarnd.org/)或[Hotbits](http://www.fourmilab.ch/hotbits/)在线获取物理生成的随机数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T09:51:36.540

请注意，池中的熵量不一定是整数。这应该主要处理您的除 2 以外的主要因素问题。

即使您最终使用了一个确实需要整数估计的实现，您也需要大量掷骰子来生成加密密钥。所以你可以要求他们成群结队。如果用户给您 10 次 d6 掷骰的结果，并且您估计熵为 25 位，那么每次掷骰子您只损失了 0.08 位。记得四舍五入;-)

顺便说一句，我认为向用户询问 TRNG 数据，而不是像 /dev/random 那样从硬件源中提取数据，是一种有趣的玩具，而不是一种改进。对于专家来说，生成随机数已经够难的了——你不想让普通用户任由他们自己的业余爱好摆布。“随机数的产生太重要了，不能靠运气”——罗伯特·科维尤。

另一方面，BSD 的作者认为，由于 PC 硬件上实际资源的熵估计并不是那么好理解（这是一个物理问题，而不是数学问题），因此使用 PRNG 实际上并不是一个糟糕的选择，前提是它根据 Schneier / Kelsey / Ferguson 的[Yarrow](http://www.schneier.com/yarrow.html)设计重新播种。您的骰子想法至少比 /dev/random 的典型熵源具有优势，只要可以信任用户找到公平的骰子并正确掷骰子，您就可以自信地设置熵的下限。它的缺点是，拥有一副好双筒望远镜和/或窃听键盘的手段（例如通过其 E/M 发射）的观察者可能会破坏整个方案，因此这完全取决于您的威胁模型。

# java - 哪种 Java HTML 模板技术的工作方式最接近 Ruby (erb/haml)？

> ID：816600
> 
> 赞同：2
> 
> 时间：2009-05-03T08:37:40.537
> 
> 标签：java, haml, velocity, freemarker, stringtemplate

在 Apache Velocity、Freemarker、Hamlets、Tapestry、StringTemplate、JSP、JSP Weaver（其他？）等 Java[模板解决方案](http://en.wikipedia.org/wiki/Template_engine_(web))中，它们最接近 Ruby 中类似 HTML 模板解决方案的简洁性和简单性 - haml/erb。我关心模板引擎的语法以及它与服务器上的控制器代码集成的简单程度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-12-09T14:16:23.430

在 Java 中混合代码和数据的做法比在 Ruby 中更不受欢迎。推荐的 Java 实践是使用标记库而不是代码块。我提到这一点只是因为如果您以与典型 Rub​​y 模板相同的方式编写 Java 模板，其他 Java 开发人员（我假设您在一个团队中工作）可能会抱怨。

所以现在回答你的问题.....标准的 JSP 以及 JSTL 和 EL 确实不是一个糟糕的解决方案。但为了更加简洁，请查看 GSP，Grails 使用的模板解决方案。您可以在任何Java webapp 中使用GSP，即您不需要使用Groovy/Grails。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T12:22:47.610

我想你要说的是这个

红宝石

```
<% foreach vars do |var| %>
  <!-- some html code to do -->
  <%=h var %>
<% end %> 
```

爪哇

```
<% for( int i = 0; i < vars.length; i++ ) { %>

   <%=vars[i]%>
<% }  %> 
```

所以标签是相似的

对于控制器的 java 端，视图 spring 提供了一种很好地分离它们的方法

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-03T14:27:56.983

...如果您想使用[Quercus](http://www.caucho.com/resin-3.0/quercus/) ，您甚至可以使用 PHP 。然后，您可以像 JSP、Velocity 等一样使用这些作为“视图”和弹簧或支柱等来处理控制器。

我们不久前做的一个项目是使用 JSP、struts 和 spring。它们都很好地集成在一起，我们可以做所描述的事情。

大多数渲染/模板引擎都有不同的语法。Java 的优点（和野兽）是您可以选择您觉得更舒服的语法，并将其与您选择的控制器/容器一起使用。

# hadoop - hadoop 幕后

> ID：816601
> 
> 赞同：-3
> 
> 时间：2009-05-03T08:38:27.773
> 
> 标签：hadoop

有人可以根据软件背后的想法解释什么是 hadoop 吗？是什么让它如此受欢迎和/或强大？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T10:15:24.017

Hadoop 是一种编程环境，可以在大型机器集群上并行运行大量计算。它对丢失多台机器具有弹性，可扩展以通过添加机器来实现更快的计算，并且可跟踪以报告计算状态。Hadoop 之所以受欢迎，是因为它是一个强大的开源环境，而且很多用户（包括 Yahoo!、Microsoft 和 Facebook 等大型用户）都将它用于大型数据处理项目。它之所以强大，是因为它使用了 map/reduce 算法，该算法将计算分解为两个简单操作的序列：

1.  map - 获取项目列表并对每个项目执行相同的简单操作。例如，获取网页的文本，对其进行标记并将每个标记替换为字符串 :1
2.  reduce - 获取项目列表并使用累积运算符对其进行累积。例如，取 :1 的列表，统计出现的次数，输出 :nt 形式的列表，其中 nt 是在原始列表中出现的次数。

使用适当的分解（程序员所做的）和任务分配和监控（Hadoop 所做的），您可以获得快速可扩展的计算；在我们的示例中 - 字数计算。您可以对数十张地图进行排序并减少并获得复杂算法的实现。这是非常高级的观点。现在阅读更多关于[MapReduce](http://en.wikipedia.org/wiki/MapReduce)和[Hadoop](http://hadoop.apache.org/core/docs/current/mapred_tutorial.html)的详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-03T08:44:17.870

Hadoop 实现了 Google 的 MapReduce 算法，为了更好地理解它，您必须阅读 Google 的 MapReduce 论文，网址为[http://research.google.com/archive/mapreduce.html](http://research.google.com/archive/mapreduce.html)

# java - 在java中进行xml转换和过滤

> ID：816611
> 
> 赞同：0
> 
> 时间：2009-05-03T08:52:55.557
> 
> 标签：java, xml, pipeline

我想过滤几个嵌套的 xml 元素，评估它们的属性。为此，我正在寻找一个高效且轻量级的 java api 或框架。

主要要求是：

*   根据某些模式或条件过滤元素主体
*   基于事件的 XML 转换

我的第一个想法是 apache jelly，但 jelly 有一个难看的副作用。它删除了 CDATA 标记，这是不受欢迎的行为。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T08:57:00.553

简单一点，试试[SAX](http://www.saxproject.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T08:56:19.527

我很确定[JXPath](http://commons.apache.org/jxpath/)具有过滤功能。可能值得一看:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T12:18:35.780

最后，我使用 dom4j 和 xpath 实现了过滤器链。我决定使用这个 api 是因为如果您必须在一个文档中移动多个分支并且它内置在 xpath 中有助于找到想要的元素，它会非常方便。

感谢您的回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T14:21:01.600

XSLT 是否适合您？为此内置了 java 库，并且布局使得您只能在满足某些标签和/或条件时设置部分。再说一次，您必须学习 XSLT。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T15:36:27.317

我使用并推荐 xquery 而不是 xslt。两者都是函数式语言，需要一些时间来适应。撒克逊支持两者。见[http://saxon.sourceforge.net/](http://saxon.sourceforge.net/)

# c# - 仅从 DataGridView 的特定列获取文本

> ID：816618
> 
> 赞同：3
> 
> 时间：2009-05-03T08:57:46.793
> 
> 标签：c#, datagridview, cell

我有一个填充了 4 列和多行数据的 DataGridView。我想遍历 DataGridView 并仅从*特定列*获取单元格值，因为我需要将此数据传递给方法。

这是我的代码：

```
foreach (DataGridViewRow row in this.dataGridView2.Rows)
{                            
    foreach (DataGridViewCell cell in row.Cells)
    {
        if (cell.Value == null || cell.Value.Equals(""))
        {
            continue;
        }

        GetQuestions(cell.Value.ToString());  
    }
} 
```

这似乎只是通过所有单元格，但是我需要能够指定如下内容：

```
foreach (DataGridViewRow row in this.dataGridView2.Rows)
{                            
    foreach (DataGridViewCell cell in row.Cells[2])//Note specified column index
    {
        if (cell.Value == null || cell.Value.Equals(""))
        {
            continue;
        }
        GetQuestions(cell.Value.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T09:03:31.053

你不只是想删除内`foreach`循环吗？还是我错过了什么？

```
foreach (DataGridViewRow row in this.dataGridView2.Rows)
{                            
    DataGridViewCell cell = row.Cells[2]; //Note specified column index
    if (cell.Value == null || cell.Value.Equals(""))
    {
        continue;
    }

    GetQuestions(cell.Value.ToString());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-03T09:09:30.617

```
foreach (DataGridViewRow row in this.dataGridView2.Rows)
{
   DataGridViewCell cell = row.Cells["foo"];//Note specified column NAME
   {
      if (cell != null && (cell.Value != null || !cell.Value.Equals("")))
      {
         GetQuestions(cell.Value.ToString());
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-03T09:09:13.287

也许您可以检查 ColumnIndex？尽管如此，仍然会循环遍历所有单元格。

```
if (cell.Value == null || cell.Value.Equals("") || cell.ColumnIndex != 2)
{
    continue;
} 
```

# git - 管理许多 git 存储库

> ID：816619
> 
> 赞同：100
> 
> 时间：2009-05-03T09:01:14.973
> 
> 标签：git, multiple-repositories

在 git 中设置项目很容易，因此即使对于小脚本，我也可以拥有单独的存储库。现在的问题是如何管理它们。

我在多个地方使用这些存储库工作。当我对某个存储库进行了更改后，我希望能够更新其他地方的存储库。

所以我有一个目录，里面有很多存储库。

1.  我怎样才能获取所有这些？
2.  如何检查其中是否有任何未提交的更改？
3.  如何检查其中是否有要合并的更改？

如果能够用一个命令来完成这些工作，那就太好了。

输出需要足够安静才能真正注意到要做的事情。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2011-02-28T11:06:47.563

我强烈推荐多个存储库工具[mr](http://myrepos.branchable.com/)。我曾经使用过一段时间其他人推荐的自定义 shell 脚本，但使用 mr 对我来说有以下好处：

*   它是通用的：可以使用各种版本控制系统的组合，而不仅仅是 git（例如 Mercurial、SVN 等）。
*   速度很快：mr 可以并行执行多个作业。我使用许多 git/mercurial 存储库并每天同步它们几次。先生极大地加快了这个过程。
*   管理存储库签出列表既简单又快捷。只需使用“mr register”而不是修改自定义脚本中的项目列表。

关于您关于静默输出的问题：可以使用命令行开关 -q 修改详细程度。我更喜欢默认输出，它看起来很好地将输出统一在一个简短而清晰的摘要中。

我为 mr 命令使用以下别名，以确保 mr 始终选择存储在 $HOME 中的我的默认项目列表，并使用 5 个并行线程：

```
alias mr='mr -d ~/ -j 5 ' 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-03T00:27:25.977

我必须说我从当前接受的答案开始（只是一堆迭代存储库的帮助脚本），但总而言之，这对我来说是一种缺乏经验。

所以，在尝试了 mr、repo 和 git-submodules 之后，我发现每个模块都缺少不同的方式，所以，我最终做了自己的变体：http: [//fabioz.github.io/mu-repo](http://fabioz.github.io/mu-repo)这是一个成熟的工具这一点 - 它具有允许您执行以下操作的工作流程：

*   克隆多个仓库
*   差异（和编辑）多个存储库中的当前更改
*   预览传入的更改
*   在多个存储库中并行运行命令
*   创建回购组
*   在多个 repos 上运行与 git 无关的命令
*   等（有关更多信息，请参见[主页](http://fabioz.github.io/mu-repo)）。

请注意，它支持任何运行 Python 的操作系统；）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-10-18T22:40:27.760

[**gr**](http://mixu.net/gr/) (git-run) 扩展[**了mr**](http://mixu.net/gr/)的功能（仅适用于`git`）。我发现使用它的标签系统组织多个 git 存储库更容易。虽然代码`gr`维护得不好。如果您使用的是 bash，请确保将其与`-t tag`使用`#tag`。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-03T09:30:52.157

您可以尝试使用带有自定义文件的[repo](http://google-opensource.blogspot.com/2008/11/gerrit-and-repo-android-source.html)`manifest.xml`来指定存储库的位置。有[一些](http://groups.google.com/group/repo-discuss/browse_thread/thread/a9496404da1644d3)关于如何执行此操作的文档。

或者，您可以使用[`git-submodule(1`)](http://git-scm.com/docs/git-submodule)。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-01-07T11:55:21.867

我编写了一个名为“ [RepoZ](https://github.com/awaescher/RepoZ) ”的工具，它会在您克隆 git 存储库或更改其中的任何内容（例如切换分支）时自动发现它们。

一旦找到，存储库就会被“跟踪”。这只会在本地存储库列表中显示它们，包括受[posh-git](https://github.com/dahlbyk/posh-git)启发的密集状态信息。这包含当前分支和其他内容，例如文件编辑和传入或传出提交的计数。

[![回购用户界面](https://raw.githubusercontent.com/awaescher/RepoZ/master/_doc/RepoZ-ReadMe-UI-Both.png)](https://raw.githubusercontent.com/awaescher/RepoZ/master/_doc/RepoZ-ReadMe-UI-Both.png)

这有助于跟踪您的本地存储库和未完成的提交或推送工作。此外，您可以使用存储库列表作为导航，从一个存储库切换到另一个存储库。

[![回购导航](https://i.stack.imgur.com/diy6M.gif)](https://i.stack.imgur.com/diy6M.gif)

# “我怎样才能把它们都拿回来？”

Windows 版本提供了一个上下文菜单来获取或拉取存储库。使用多选，您可以一次在多个存储库上运行操作。

但是，您可能会发现另一个非常有用的功能：

[![RepoZ 自动获取](https://i.stack.imgur.com/bksdX.png)](https://i.stack.imgur.com/bksdX.png)

使用自动获取，您可以告诉 RepoZ 在后台定期获取所有 git 存储库的远程。当然，这些提取不会与您的本地提交发生冲突。没有像 with 这样的本地合并尝试`git pull`。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-02-07T04:29:22.863

我编写了一个名为[gita](https://github.com/nosarthur/gita)的命令行工具来管理多个 repos。它并排显示注册回购的状态，例如

[![在此处输入图像描述](https://github.com/nosarthur/gita/raw/master/doc/screenshot.png)](https://github.com/nosarthur/gita/raw/master/doc/screenshot.png)

它还可以从任何工作目录委派 git 命令/别名。

现在使用此工具回答您的问题：

> 我怎样才能获取所有这些？

```
gita fetch 
```

> 如何检查其中是否有任何未提交的更改？

该`gita ll`命令在分支名称旁边显示 3 个可能的符号，表示

*   `+`: 阶段性变化
*   `*`: 未分级的更改
*   `_`：未跟踪的文件/文件夹

> 如何检查其中是否有要合并的更改？

分支名称以 5 种方式着色

*   白色：本地分支没有远程分支
*   绿色：本地分支与远程分支相同
*   红色：本地分支已与远程分支分道扬镳
*   紫色：本地分支在远程分支之前（适合推送）
*   黄色：本地分支在远程分支之后（适合合并）

要安装它，只需运行

```
pip3 install -U gita 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-03-15T16:11:42.003

[gitslave](http://gitslave.sf.net)是一个工具，它可以通过在 super 和 subs 之间创建超级项目/子项目关系来在许多存储库上运行相同的命令。这（默认情况下）提供输出摘要，因此您可以专注于提供唯一输出的存储库（对 git status 有用，对 git ls-files 不太有用）。

这通常用于需要将多个存储库组合在一起并将它们同时保存在同一个分支或标签上的项目。对于我的（裸）存储库目录，我只有一个小的 makefile，它可以让我运行任意 git 命令，如您所见，我主要用于 fsck 和 gc：

```
full: fsck-full gc-aggressive
        @:

fsck-full:
        for f in */.; do (cd $$f; echo $$f; git fsck --full || echo $$f FAILED); done

gc-aggressive:
        for f in */.; do (cd $$f; echo $$f; git gc --aggressive || echo $$f FAILED); done

%:
        for f in */.; do (cd $$f; git $@ || echo $$f FAILED); done 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-12-22T02:32:43.343

您可以`git-status-all`为此使用 gem：[https ://github.com/reednj/git-status-all](https://github.com/reednj/git-status-all)

```
# install the gem    
gem install git-status-all

# use the status-all subcommand to scan the directory
git status-all 
```

还有一个 fetch 选项，它将在显示状态之前从所有存储库的源中获取：

```
git status-all --fetch 
```

[![git状态全部](https://i.stack.imgur.com/rbKwl.png)](https://i.stack.imgur.com/rbKwl.png)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-08-25T10:45:42.327

我已经创建了一个别名和一个函数，可以在目录中的所有可用存储库上运行任何 git 命令（递归）。你可以在这里找到它：[https ://github.com/jaguililla/dotfiles/git](https://github.com/jaguililla/dotfiles/git)

这是代码：

```
#!/bin/sh
# To use it: source git_aliases

# Example: rgita remote \;
alias rgita='find . -type d -name .git -execdir git'

# Example: rgit remote -vv
rgit() {
  rgita "$@" \;
} 
```

希望能帮助到你 ：）

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-05-07T19:51:48.620

我使用这个脚本在我的所有存储库中轻松执行 git 命令。

```
#!/bin/sh
if [ ! "$1" = "" ] ; then

   if [ "$GITREPO" = "" -a -d "$HOME/cm/src" ] ; then
      GITREPO="$HOME/cm/src"
   fi

   if [ "$GITREPO" != "" ] ; then

      echo "Git repositories found in $GITREPO"
      echo "-=-=-=-=-=-=-=-=-=-=-=-=-=-"

      DIRS="`/bin/ls -1 $GITREPO`"

      for dir in $DIRS ; do

         if [ -d $GITREPO/$dir/.git ] ; then
            echo "$dir -> git $1"
            cd $GITREPO/$dir ; git $@
            echo
         fi

      done
   else

      echo "Git repositories not found."

   fi
fi 
```

默认情况下，脚本将在 ~/cm/src 中查找 git 存储库，但您可以根据自己的喜好设置 GITREPO 环境变量来覆盖它。

此脚本基于[此脚本](http://github.com/dmzdev/scripts/blob/5b3d81ba55dde263a9805a785ca50b746bca8064/gitbatch.sh)。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-12-18T15:59:32.847

如果有人还在看这个帖子，请查看我的名为 gitme 的 shell 脚本

您将需要手动输入本地 git 存储库，但我每天都使用此工具在多台计算机上协作多个 git 项目。

你可以跑`git clone https://github.com/robbenz/gitme.git`

脚本也发布在下面

```
#!/bin/bash -e

REPOS=( 
/Users/you/gitrepo1
/Users/you/gitrepo2
/Users/you/gitrepo3
/Users/you/gitrepo4
)

MOVE="Moving to next REPO... \n" 

tput setaf 2;echo "What ya wanna do? You can say push, pull, commit, ftp push, or status"; tput sgr0

read input

if [ $input =  "commit" ]
then
    tput setaf 2;echo "Do you want a unique commit message? [y/n]";tput sgr0
    read ans
    if [ $ans = "y" ]
    then 
        for i in "${REPOS[@]}"
        do
            cd "$i"
            tput setaf 6;pwd;tput sgr0 
            git add . -A
            read -p "Commit description: " desc  
            git commit -m "$desc"
            tput setaf 2;echo  $MOVE;tput sgr0 
            sleep 1
        done 
    else 
        for i in "${REPOS[@]}"
        do
            cd "$i"
            tput setaf 6;pwd;tput sgr0 
            git add . -A
            git commit -m "autocommit backup point"
            tput setaf 2;echo  $MOVE;tput sgr0 
            sleep 1
        done
    fi 
elif [ $input = "push" ] || [ $input = "pull" ] || [ $input = "ftp push" ] || [ $input = "status" ]
    then
        for i in "${REPOS[@]}"
do
    cd "$i"
    tput setaf 6;pwd;tput sgr0 
    git $input 
    tput setaf 2;echo  $MOVE;tput sgr0 
    sleep 1
    done 
else tput setaf 1;echo "You have zero friends";tput sgr0 
fi 
```

我在 ~/.bash_profile 中设置了一个别名，所以`alias gitme='sh /path/to/gitme.sh'`

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-02-07T17:06:53.133

为此，您可以使用`every`which 可以按照此模式在多个目录中运行 cli 命令`every <command>`

**安装：** `npm i -g every-cli`

**使用示例：** `every git branch`

```
- repo-1
  master
- repo-2
  develop 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-05-03T13:22:34.580

您应该检查CPAN 上的[rgit](http://search.cpan.org/perldoc?rgit)，它递归地在目录树中的所有存储库上执行 git 命令。

从文档：

> 此实用程序递归搜索所有 git 存储库的根目录（可能是当前工作目录或 - 如果已设置 - GIT_DIR 环境变量给出的目录），按存储库路径排序此列表，chdir 进入每个它们，并执行指定的 git 命令。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-10-22T16:02:00.890

我刚刚创建了一个工具，可以做你想做的事！

1.  我怎样才能获取所有这些？`gmaster fetch`
2.  如何检查其中是否有任何未提交的更改？`gmaster status`
3.  如何检查其中是否有要合并的更改？`gmaster status`

它被称为 gitmaster：[https ://github.com/francoiscabrol/gitmaster](https://github.com/francoiscabrol/gitmaster)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-04-25T14:45:40.580

我将这个简单的 bash 函数写入我的 .bash_profile 中，以便能够仅在所有 git 存储库中运行 git、maven、gradle 或任何其他 bash 命令：

```
# usefull function to work with multiple git repositories
all() {
    failed=0
    printf '>>> START RUNNING: "%s" >>>' "$*"
    for d in */; do
        pushd "$d" > /dev/null
        if [ -d ".git" ]
        then
            printf '\n--------------------------------------------\n\n'
            pwd
            eval $@
            if [ $? -ne 0 ]
            then
                failed=1
                break;
            fi
        fi
        popd > /dev/null
    done
    if [ $failed -eq 0 ]
    then
        printf '\n--------------------------------------------\n'
        printf '<<< RAN "%s" WITH SUCCESS!!! <<<' "$*"
    else
        printf '\n<<< FAILED!!! <<<'
    fi
} 
```

可以这样使用

```
all git st
all git pull
all ./gradlew clean test
etc. 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-07-30T06:42:04.137

有一个方便的工具可以获取所有多个存储库。 `git-pull-all`是一个在多个 git 存储库上异步执行的命令行工具。

## 安装

```
npm install -g git-pull-all 
```

## 用法

假设您有这些文件和目录：

```
~/Projects/
  cool-examples/
    .git/
  funny-movies/
  my-todos.txt
  super-express/
    .git/ 
```

当您`git-pull-all`在目录上运行命令时`~/Projects`，它应该找到子 git 存储库（在上述情况下*为 cool-examples*和*super-express*）然后`git pull`在每个存储库上执行。

```
$ cd ~/Projects
$ git-pull-all
funny-movies/
Not a git repository
cool-examples/
Already up-to-date.
super-express/
Already up-to-date.
Done! 
```

```
git-pull-all ~/Projects 
```

* * *

GitHub链接：[https ://github.com/tatsuyaoiw/git-pull-all](https://github.com/tatsuyaoiw/git-pull-all)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-10-26T10:04:26.433

我找到了一个很好的解决方案，可以从所有具有 .git 文件夹的子目录中提取当前分支，即使每个 repo 都签出了不同的分支。该命令是单行的，足够灵活，可以针对不同的 git 命令进行修改，并且可以使用别名。

只需复制并粘贴以下内容：

```
find . -type d -maxdepth 2 -name .git -exec sh -c 'cd $0 && cd .. && git pull origin $(git rev-parse --abbrev-ref HEAD)' {} \; 
```

分解它：

```
find . -type d -maxdepth 2 -name .git 
```

在当前目录 (find .) 中查找名称为 ".git" (-name .git) 的所有目录 (-type d)，最多查找两个目录深度（2 而不是 1，因为我们正在寻找git repo 文件夹中的 git 文件夹）。

```
-exec sh -c 
```

运行以下 shell 命令 (exec sh -c)

```
'cd $0 && cd .. && git pull origin $(git rev-parse --abbrev-ref HEAD)' 
```

将目录更改为第一个参数（cd $0），然后将目录更改为上一级以离开 .git 文件夹（cd ..），然后执行 git pull origin 同时通过为当前分支运行 git rev-parse... 指定分支HEAD 提交。

```
{} \; 
```

“{}”是我们从初始*find*命令获得的结果相对路径。这 ; 用于结束命令。

在 zsh 上的 MacOS 10.14.6 上测试。按原样，仅当远程和本地分支命名相同时才有效，AFAIK。

您可以修改它以获取状态。我希望您可以添加参数以进一步使其更加灵活，但我还没有尝试过。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2022-02-18T22:37:12.550

我为此编写了一个 CLI 工具，请参见[https://manicli.com/](https://manicli.com/)。它还有一些不错的附加功能：

*   在许多 repos 上运行命令
*   声明式配置
*   灵活过滤，选择1个项目，项目有标签，或子路径

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-06-17T13:12:30.837

免责声明：我正在[www.repoflow.com上开发此工具](http://www.repoflow.com)

> 我怎样才能获取所有这些？
> 如何检查其中是否有要合并的更改？

*   您可以获取所有涉及的存储库（或推送/拉取/提交它们），在获取后 UI 将使用新的存储库状态更新，如果存储库出现分歧，您可以看到冲突类型并开始合并它们。

[![在此处输入图像描述](https://i.stack.imgur.com/W26gb.gif)](https://i.stack.imgur.com/W26gb.gif)

> 如何检查其中是否有任何未提交的更改？

*   在 UI 上，您可以查看每个存储库的文件状态（您可以单独或批量添加/删除它们）。

[![在此处输入图像描述](https://i.stack.imgur.com/POr8M.gif)](https://i.stack.imgur.com/POr8M.gif)

我正在研究这个，但这也解决了 OP 问题并帮助管理多个存储库，您可以使用 UI 或底层 GraphQL API 创建自己的脚本，请考虑将其作为另一种选择。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-09-24T16:37:30.573

我使用 Visual Studio 代码。我们的代码库中有大约 20 个库，它们都是独立的 Git 存储库，Visual Studio Code 中的源代码控制选项卡非常适合“一目了然”地查看本地存储库的落后或领先程度。还有一些设置可以定期获取以使该信息保持最新，以及刷新按钮。

它不像脚本那么方便，但是当涉及到源代码控制时，我喜欢做一个做出改变的人。需要一个非常好的脚本来小心不要覆盖更改等。使用 VS Code 方法，您可以快速获得大量信息，您可以自己采取行动。

这是它的截图：

[![VS Code 中的源代码控制窗口](https://i.stack.imgur.com/eSs3S.png)](https://i.stack.imgur.com/eSs3S.png)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-11-18T11:52:34.247

我使用我的代码编辑器（VS 代码）的多光标选择/多行编辑功能来创建批处理/shell 脚本并一次性执行它。通过这个简单愚蠢的解决方案，我知道我在做什么以及我可以从执行这些命令中得到什么。无需猜测，无需学习，无需定制。另一个原因是，每次我想对驻留在公共父目录中的不同存储库集执行命令时。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-07-09T21:14:54.360

请按照以下步骤从所有存储库中提取代码：

1.  使用扩展名为 .bat 创建一个新文件
2.  将该文件放在您拥有所有存储库文件夹的同一层次结构中
3.  编辑 .bat 文件并添加下面提到的脚本

```
FOR /D %%G in (%cd%\*) Do cd %%G & call git branch & call git pull & cd ..
echo All code pulled successfully!!
pause 
```

4.  保存文件并双击开始拉取代码

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2012-11-24T10:18:00.047

[https://github.com/wwjamieson3/envisionTools](https://github.com/wwjamieson3/envisionTools)有一个名为 gitstat 的 bash 脚本，它可以执行此操作以及更多功能。它与 GNU 和 mac 兼容。如果被要求，它可以从远程执行获取。它显示未跟踪、修改、添加、删除和暂存的文件。它通过在遥控器上显示未合并的提交和未推送的本地提交来与遥控器不同。它还可以以摘要或详细模式甚至 HTML 显示颜色编码的结果。它使用 locate 而不是 find，因为它的速度无限快，并且如果它变得太旧，甚至会提示更新您的 locate 数据库。

* * *

## 回答 #24

> 赞同：-6
> 
> 时间：2009-05-03T14:13:28.610

看起来写一个脚本来做这件事很容易。本质上，它需要遍历存储库，然后使用 git ls-files、git diff 和 git log 等命令。

# wpf - 在silverlight中动态生成图像的问题

> ID：816620
> 
> 赞同：1
> 
> 时间：2009-05-03T09:01:17.003
> 
> 标签：wpf, silverlight, image

我正在动态地将图像添加到画布对象中，该画布对象工作了一段时间，但由于某种特殊原因突然停止显示。

这是代码：

```
public void shootProjectile()
{

    var projectileImage = new Image();
    var currChar = (CharactersRef.SCharacterProjectile)lstSubMenu.SelectedItem;
    projectileImage.Name = currChar.projectileName;
    Uri imageUri = new Uri("/Images/Projectiles/"+ currChar.projectileName +".png", UriKind.Relative);

    projectileImage.Height = currChar.projectileHeight;
    projectileImage.Width=currChar.projectileWidth;
    var currPuppet = pg.PuppetList.SingleOrDefault(p => p.puppetID == turnID);
    var projectileY = Convert.ToDouble(pcCombatArea.PhysicsObjects[currPuppet.CharacterName+"torso"].GetValue(Canvas.TopProperty));
    var projectileX = Convert.ToDouble(pcCombatArea.PhysicsObjects[currPuppet.CharacterName + "torso"].GetValue(Canvas.LeftProperty));

    if (currPuppet.faceRight)
    {
        projectileX += currPuppet.elbowToArmpit + currPuppet.elbowToHandTip;
    }
    else
    {
        projectileX -= currPuppet.elbowToArmpit + currPuppet.elbowToHandTip;
    }           
    projectileImage.SetValue(Canvas.LeftProperty,projectileX);
    projectileImage.SetValue(Canvas.TopProperty, projectileY);
    cnvGame.Children.Add(projectileImage);
    projectileImage.Source = new BitmapImage(imageUri);
    projectileImage.ImageOpened += new EventHandler<RoutedEventArgs>(projectileImage_ImageOpened);
} 
```

Top 和 Left 值在画布大小的范围内（画布为 800 x 600，而坐标为 200、100）。我可以在画布子项中找到图像，并且 url 似乎没问题，我仔细检查了它。我将 png 图像构建类型设置为资源但无济于事。如果你注意到我已经添加了一个 ImageOpened，即使它没有被触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T04:41:15.450

如果您将映像构建类型设置为资源，请尝试从映像 URI 中删除前导“/”。

# python-3.x - python3.0上的setuptools

> ID：816623
> 
> 赞同：5
> 
> 时间：2009-05-03T09:02:17.577
> 
> 标签：python-3.x, setuptools

我试图为 python3.0 安装“setuptool”包。但不幸的是，当我尝试安装时，它说模块名称“dist”丢失。请帮我解决这个问题。

* * *

### 截至 2013 年 3 月的编辑：

请在接受的答案下方查看@LennartRegebro 的最新回复

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-10-10T08:35:51.880

**Setuptools 0.7 及更高版本支持 Python 3。**

Setuptools 在实践中长期无人维护，这促使几个人联合起来创建了一个名为“Distribute”的分支，该分支自 2009 年起被移植到 Python 3。

然而在 2013 年，项目合并了，Setuptools 和 Distribute 现在是同一个东西。安装 Distribute 将安装一个除了安装 Setuptools 什么都不做的空包。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T02:34:49.967

您可以在以下两个链接中找到它们：一个用于 setuptools，另一个用于 pip，享受吧！

[http://pypi.python.org/pypi/pip](http://pypi.python.org/pypi/pip)

[http://pypi.python.org/pypi/setuptools](http://pypi.python.org/pypi/setuptools)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-03T09:37:32.483

**==这个答案已经过时了==**

看来 setuptools 目前正在移植到 Python 3。看起来有些困难。Lennart Regebro 在这里更详细地解释了这一点：

[http://regebro.wordpress.com/2009/04/21/setuptools-on-python-3-work-on-hold/](http://regebro.wordpress.com/2009/04/21/setuptools-on-python-3-work-on-hold/)

[http://www.mail-archive.com/distutils-sig@python.org/msg07183.html](http://www.mail-archive.com/distutils-sig@python.org/msg07183.html)

[http://regebro.wordpress.com/2009/02/01/setuptools-and-easy_install-for-python-3](http://regebro.wordpress.com/2009/02/01/setuptools-and-easy_install-for-python-3)

# linux - 如何从结构“skbuff”中获取 saddress

> ID：816629
> 
> 赞同：1
> 
> 时间：2009-05-03T09:05:04.590
> 
> 标签：linux, networking, linux-kernel

我有一个程序需要从结构“skbuff”中获取源地址，在以前的内核版本中，我可以使用以下行获取“saddr”：

```
static __u32
get_src_ip(const struct sk_buff *skb){
    return ntohl(skb->nh.iph->saddr);
} 
```

以下是错误信息：

```
error: 'const struct sk_buff' has no member named 'nh' 
```

谁能告诉我正确的代码？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T09:50:18.290

sk_buff 自 Linux 2.6.22 起更改了它的结构名称。你应该 `skb->network_header`改用。

好吧，您可能还需要更改许多成员变量名称 - 只需参考最新的手册即可。

# java - 关闭 JFrame 窗口时如何使用 DefaultClosingOperation 以外的其他内容？

> ID：816644
> 
> 赞同：2
> 
> 时间：2009-05-03T09:12:05.633
> 
> 标签：java, events, jframe, listeners

我正在使用套接字在聊天客户端上工作，并且我希望在用户单击“X”时窗口关闭之前执行某些代码（例如正确关闭连接）。

我可以在不必实现所有抽象方法的情况下做到这一点`WindowListener`吗？

/阿文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T09:14:39.047

只是**扩展** `WindowAdapter`，而不是**实施** `WindowListener`。

您会在所有 Swing 听众身上找到这个概念。( `MouseListener/MouseAdapter`, `KeyListener/KeyAdapter`, ...) 有一个`Listener`接口和一个`Adapter`用空方法实现该接口的类。

因此，如果您只想对特定事件做出反应，请使用适配器并覆盖所需的方法。

**例子：**

```
setWindowListener(new WindowAdapter() {
    public void windowClosed(WindowEvent e) {
        //Cleanup code
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T09:18:54.480

这是你需要的

```
private class Closer extends WindowAdapter
{
public void windowClosing(WindowEvent e)
{
int exit = JOptionPane.showConfirmDialog(this, "Are you
sure?");
if (exit == JOptionPane.YES_OPTION) {
System.exit(0);}
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T14:02:06.890

如何`ExitListener`从 a中添加 an 的示例`FrameView`：

```
YourApp.getApplication().addExitListener(new ExitListener() {

         @Override
         public boolean canExit(EventObject arg0) {
            doStuff();

            // the return value is used by the application to actually exit or
            // not. Returning false would prevent the application from exiting.
            return true;
         }
} 
```

# c# - 有没有办法从使用 C# 阻塞文件的进程中获取 PID？

> ID：816645
> 
> 赞同：3
> 
> 时间：2009-05-03T09:12:37.083
> 
> 标签：c#, file-io, pid

有没有办法从使用 C# 阻塞文件的进程中获取 PID？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T09:53:07.127

我不知道它是否可以完全在框架内完成，但也许你可以调用[SysInternals 的 Handle.exe](http://technet.microsoft.com/en-us/sysinternals/bb896655.aspx)来完成这里的繁重工作？

# mysql - 大表的 MySQL 主键列类型

> ID：816646
> 
> 赞同：8
> 
> 时间：2009-05-03T09:13:00.220
> 
> 标签：mysql, database, database-design, schema

我正在使用相对较大的数据库表（**700K 行**）进行项目。

错误，我在设计数据库模式时犯了。当行数增加时，我不得不增加 ID 的列类型 bigint( **x** )。

现在是 bigint(44)。我害怕设置高 x 值，因为我认为它会显着降低性能。也许我错了..

请帮助我解决问题。

我可以设置一次什么列类型而忘记这个问题？

在 DB 模式设计领域我应该更好地学习什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-03T09:29:22.987

当您创建一列时，`BIGINT(44)`“44”是显示宽度 - 它不会影响您可以存储的值的范围或检索它们的速度。

对于自动递增的 ID，您想使用一个`UNSIGNED`数字，例如`BIGINT(44) UNSIGNED`. 这将使值的范围加倍并添加额外的约束，这通常是一件好事。

未签名的 INT 最多可存储：

> 4,294,967,295

未签名的 BIGINT 最多可存储：

> 18,446,744,073,709,551,615

你不会很快填补这个。

您没有说最大 ID 的增长速度有多快 - 如果您没有插入很多行，那么您应该坚持使用，`UNSIGNED INT`因为它占用的空间更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-05T22:24:02.803

我认为默认情况下任何主键都是未签名的。无论如何，对主键使用负数充其量是不赞成的，并且会破坏东西。

# sql - 什么时候适合使用 NOLOCK？

> ID：816650
> 
> 赞同：9
> 
> 时间：2009-05-03T09:14:07.410
> 
> 标签：sql, sql-server-2005, deadlock, nolock

我不时遇到一些长时间运行的查询超时问题和死锁。

我想知道什么时候最适合使用 NOLOCK 以及在哪里使用？

我是否在更新和插入中使用它？或阅读？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T09:43:45.090

请注意，您可以在每个表的基础上指定 nolock。

我通常在复杂的 SELECT 查询中使用 nolock，但仅用于几乎从未更改的小查找表和仅显示数据。您知道列出当前半年价格的表格，或将 id 查找到字符串等。这些内容只会随着重大更新而改变，之后服务器通常会定期重新启动。

这显着提高了性能，在最繁忙的时候减少了死锁的机会，更重要的是，在最坏的情况下，对于涉及大量表的查询（这是合乎逻辑的，他们必须获得更少的锁，而那些 sidetables几乎在任何地方都经常使用，通常从需要锁定的 7-8 个表减少到 4 个表）

但要非常小心添加它，不要急于添加，也不要常规添加。用得好不会疼，用得不好会疼得厉害。

不要将它用于高度关键的东西，计算的东西等，因为它会变得不一致，任何迟早会导致写入的东西。

另一个这样的优化是 ROWLOCK，它只锁定行级别。这在更新（或删除）行彼此不相关的表时非常有用，例如您只放入日志记录的表（并且插入的顺序无关紧要）。如果您有一个方案，即在事务结束时将日志记录写入某个表，这也可以大大加快速度。

如果您的数据库的写入百分比相对较低，则可能不值得。我的读写比率低于 2:1。

我在处理此问题时保存的一些 URL：

[http://www.developerfusion.com/article/1688/sql-server-locks/4/](http://www.developerfusion.com/article/1688/sql-server-locks/4/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-03T10:13:45.907

SQL Server 中有四个[事务隔离级别：](http://www.mssqlcity.com/Articles/General/TIL.htm)

1.  阅读未提交
2.  阅读已提交
3.  可重复阅读
4.  可序列化

对于它所应用的表，NOLOCK 相当于“未提交读”。这意味着您可以看到将来可能回滚的事务中的行，以及许多其他奇怪的结果。

尽管如此，nolock 在实践中仍然非常有效。尤其是对于显示稍有错误的数据并不是世界末日的只读查询，例如业务报告。我会避免它靠近更新或插入，或者通常靠近决策代码的任何地方，特别是如果它涉及发票。

作为 nolock 的替代方案，请考虑“已提交的读取快照”，它适用于具有大量读取和较少写入活动的数据库。您可以通过以下方式打开它：

```
ALTER DATABASE YourDb SET READ_COMMITTED_SNAPSHOT ON; 
```

它适用于 SQL Server 2005 及更高版本。这就是 Oracle 默认的工作方式，也是 stackoverflow 本身使用的方式。甚至还有一个关于它的[编码恐怖](http://www.codinghorror.com/blog/archives/001166.html)博客条目。

PS 长时间运行的查询和死锁也可能表明 SQL Server 正在使用错误的假设。检查您的统计信息或索引是否已过期：

```
SELECT 
    object_name = Object_Name(ind.object_id),
    IndexName = ind.name,
    StatisticsDate = STATS_DATE(ind.object_id, ind.index_id)
FROM SYS.INDEXES ind
order by STATS_DATE(ind.object_id, ind.index_id) desc 
```

统计数据应在每周维护计划中更新。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-03T19:04:58.533

Use nolock as a last resort. Most deadlock problems can be fixed by tuning the queries and/or tuning the indexes. I think I've seen one deadlock in the last 5 years that couldn't be fixed by tuning one of the two.

Also note that NOLOCK is only honoured on select statements. Data modifications will always lock, that behaviour cannot be changed. So if you're got a writer/writer deadlock (quite common), no lock won't help at all.

Also be aware that nolock, in addition to returning dirty data can result in duplicate rows (rows read twice from the underlying table) and missing rows (rows in the underlying table that weren't read at all).

Nolock essentially means to SQL Server 'I don't mind if my results are slightly inaccurate'

Snapshot isolation is an option. Just make sure that you test carefully first as the increased load on TempDB can be quite severe, depending how frequent and long your transactions are. Also note that while you won't see deadlocks in snapshot isolation, you can get update conflicts. Again, test and make sure that your apps work properly and can handle any errors that they get.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-03T09:21:11.540

在可以接受脏读和幻像记录时使用它，例如，您可能有定期运行的非关键报告，其中信息的准确性不是主要驱动因素，而是查看记录量或其他一些指标

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-03T09:48:50.757

当可以读取脏数据时，您应该使用 nolock。可能对数据库进行大量更改的大型事务可能仍在进行中，使用 nolock 只会返回它到目前为止设置的数据。如果该事务然后回滚您正在查看的数据可能是错误的。因此，您应该只在返回的内容可能是错误的情况下才使用它。

死锁是一个常见问题，但十分之九是完全由开发人员问题引起的。我会专注于寻找死锁的原因，而不是使用 nolock。很可能只是一个事务以与所有其他事务不同的顺序做事。解决这个问题可能会使您的所有问题都消失。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-03T10:22:48.880

对于没有读锁的事务一致视图，建议在 SQL Server 中启用快照隔离。

这与 NOLOCK 略有不同，因为当您读取信息时，结果总是反映已提交数据的版本，而不是查看未提交数据的可能性。这提供了与 NOLOCK（无“读”锁）相同的锁定并发性，结果更清晰。

即使具有事务一致性，也应始终牢记，您在显示时继续显示或使用的数据无论如何都可能是错误的或过时的。我见过太多人认为，如果他们使用数据的速度足够快，或者如果他们在查询/事务中使用它就可以了。这是荒谬的——我认为，可重复的一致性级别一开始就不应该实现，因为它只会鼓励不良行为。它们在 Oracle 中不存在。

就我个人而言，我喜欢为某些非关键数据视图和报告禁用锁定，因为它给系统带来的负担更少，而且提供稍微不准确的结果的可能性很小也不是问题。

在初始开发方面，利用可重复的读取一致性级别并犯下诸如为用户输入保留开放事务之类的罪行可能对开发人员来说更容易一些，但几乎总是会导致主要的道路“障碍”，以实现合理扩展应用程序的任何希望.

我的观点是，最好的方法始终是“仔细检查”仍然必须为真的条件，以便将更新应用于任何数据。

坏的：

```
UPDATE myaccount SET balance = 2000 
```

更好的：

```
UPDATE myaccount SET balance = balance + 2000 
```

更好的是：

```
UPDATE myaccount SET balance = 2000 WHERE balance = 0 AND accountstatus = 1 
```

最后，应用程序必须检查行数以确保在向用户提供成功反馈之前实际更新了预期的行数。

# iphone - 是否可以在 iPhone 中获取不同频道的 Wi-Fi 信号强度数据？

> ID：816656
> 
> 赞同：4
> 
> 时间：2009-05-03T09:18:25.277
> 
> 标签：iphone, uikit, wifi

我假设 iPhone Wi-Fi 硬件能够在通道之间切换，因为我的 WLAN 路由器向我显示了通道 1 到 13。所以我认为必须将 WLAN 频谱划分为这些。我想观察我的应用程序中特定通道的信号强度。有没有办法获取这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T09:43:32.923

您的路由器在特定频道 (1-13) 上广播，而您的 iphone 将只使用正在广播的频道。信道的原因是为了减少对周围其他路由器的干扰。理想情况下，您想选择一个未使用的频道。尽管频道本身重叠，例如频道 7 仍会干扰频道 +/- 5 频道。

您可以下载许多应用程序，这些应用程序将向您显示它可以找到的所有接入点以及它们正在广播的频道。这可以帮助您找到自己使用的最佳渠道。

基本上我要说的是，你的 iPhone 不能选择你的路由器在哪个频道上广播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T07:38:47.880

WiFi 分为 13 个通道 - 它们用于减少对使用相同频谱的其他路由器和设备的干扰。频道可以在路由器中手动设置，但通常由路由器自动选择。渠道本身重叠；例如，频道 7 仍会干扰频道 +/- 5 频道。请注意，并非所有频道都在世界所有地区获得许可，因此您可能只能在路由器上看到（比如说）11 个频道。

听起来您正在寻找的是任何给定频道上的信噪比或更一般的“质量” - 即找出哪个频道最适合特定安装。尽管允许您计算此值的各种指标在硬件接口上可用，但 iPhone 网络 API 并未公开它们。您可以使用越狱的 iPhone 和相应的 devkit 或将您的应用程序切换到桌面进行调查。

# c# - 如何在每次单击按钮时发送数组的下一个元素？

> ID：816658
> 
> 赞同：1
> 
> 时间：2009-05-03T09:19:01.843
> 
> 标签：c#, .net

我有一个字符串 [] arr。我想让它就像我一旦单击按钮 arr[0] 进入文本框，如果我再次单击按钮 arr[1] 进入文本框。

我知道它将使用一些计数器并在每次单击时递增它，但我只是对语法感到困惑。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T09:24:57.053

这是一个示例：

```
int _Counter = 0;
string[] arr = new string[4] {"1", "2", "3", "4"};

private void buttonClick(Object sender, EventArgs e)
{
    textbox.Text = arr[_Counter];
    _Counter++;
    if (_Counter == arr.Length) {_Counter = 0;}
} 
```

如果您在 ASP.NET 应用程序中使用它，您应该将 _Counter 存储在 ViewState、Session 或 Cookie 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T09:59:04.930

```
if(Session["Counter"] == null)
   Session["Counter"] = 0;
string[] arr = new string[4] {"A", "B", "C", "D"};
private void button1_Click(Object sender, EventArgs e)
{        
    textbox1.Text = arr[int.parse(Session["Counter"])];
    Session["Counter"]=int.parse(Session["Counter"])+1;
    if (int.parse(Session["Counter"]) == arr.Length)
    {
       Session["Counter"]= 0;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T11:08:26.183

一切都有一条线。;)

```
int _counter = 0;
string[] _values = {"1", "2", "3", "4"};

private void buttonClick(Object sender, EventArgs e)> {
    TheLittleTextbox.Text = _values[_counter++ % _values.Length];
} 
```

（注意：由于计数器没有重置，点击 20 亿次后它会溢出......但是，因为你会磨损一大堆老鼠（大约 20 年日夜不停地疯狂点击）才能到达那里，我认为它足够安全......）

# java - 使用静态对象而不是数据库会不会错？

> ID：816662
> 
> 赞同：5
> 
> 时间：2009-05-03T09:21:37.577
> 
> 标签：java, design-patterns, static

这本质上是一个设计模式问题：

我期望查询数据库以获取与给定股票最高度相关的股票列表（股票/证券）。

相反，我想也许我应该创建一个具有静态 HashMap 的对象并将我的数据存储在其中。然后每次我需要时“查询”它。

这种方法会有什么问题吗，因为我相信它会比查询数据库中的相同数据显着提高性能。数据量相对较小，不会增长，因此不会造成问题。以后会不会有什么问题会咬我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-03T09:26:34.383

出于备份的原因，我仍然会使用数据库，但是在客户端使用像 oscache 这样的缓存 API 将数据存储在本地文件系统上以便快速访问，然后如果系统出现故障，请从数据库中恢复缓存并继续使用缓存在您的代码中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-03T11:12:47.653

如果您的应用程序只需要一个不会自动更新的只读缓存，那么这种方法没有任何问题。

但是有一个警告：如果数据量（包括 Java 对象和 HashMap 的开销）变得太大而无法完全保存在 RAM 中，性能将迅速而急剧地下降（下降 10,000 倍或更多）。数据库系统旨在高效访问磁盘数据；HashMap 不是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T09:27:17.627

一般来说，这种方法没有任何问题。只要确保你不直接访问你的静态类，因为那样你会创建一个“[坏单例](http://blogs.msdn.com/scottdensmore/archive/2004/05/25/140827.aspx)”。（就像一个全局变量）

取而代之的是引入某种注册机制来在所有将查询它的对象上注册这个类。比你有一个“好单身”，不会有以后的问题。

```
public class MyDataClass {
    private MyDataClass() { }
    public static MyDataClass getInstance() {
        if (instance == null) instance = new MyDataClass();
        return instance;
    }
    private static MyDataClass instance = null;
}

public class MyDataProcessor {
    public void registerData(MyDataClass data) { 
       this.data = data;
    }
    public void process() {
        assert(data != null);
        data.getData(...);
    }
    private MyDataClass data;
} 
```

当然，这种方法在持久性、健壮性等方面毕竟在架构层上可能存在一些问题……也许使用带有缓存层的数据库会更好，但这在很大程度上取决于用户的实际需求.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T09:32:45.913

您的方法的问题在于代码和数据之间没有分离。

这会导致一些缺点：

*   你不能做备份
*   您必须重新编译/重新部署您的应用程序才能更改数据

由于您似乎不需要关系数据库，因此我建议您使用像[BerkeleyDB](http://www.oracle.com/technology/products/berkeley-db/index.html)这样的嵌入式键值数据库，它也非常快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-03T09:35:59.337

如果数据确实发生了变化并且您需要更新哈希并每次重新编译，那么您会遇到的问题。

话虽这么说，你知道数据，你可以知道这会对你产生多大的影响。

一种选择可能是将数据保存在数据库中，然后将其缓存到 HashMap。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-03T10:40:26.703

通常，回来并咬人的是一些永远不会改变的假设。因此，如果您稍后获得涉及更新值、添加新值和让多个客户端访问数据的要求，如果您已经在使用数据库，那么您的工作量就会减少。而是在客户端进行一些缓存以提高性能。只是我的2c。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-03T12:19:28.117

您的想法还不错，但是我个人会寻求缓存解决方案。

忽略那些说每次数据更改时您都需要重新编译/重新分发的人，因为我认为他们不明白您所说的静态是什么意思。即，他们认为您将对源中的值进行硬编码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-03T10:41:17.417

如果这更容易，将数据存储在 HashMap 中。

[然后，您可以使用XStream](http://xstream.codehaus.org)序列化此副本。这将创建 HashMap 对象的 XML 版本。

因此，您的应用程序可以根据需要将其写入磁盘，您可以手动编辑它并将其重新加载到应用程序中。这意味着您拥有 HashMap，以及磁盘上可以根据需要更改的可配置表示。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-03T10:52:34.863

静态缓存可以工作。

请记住，如果您有多个应用程序访问同一个数据库，您将需要某种消息传递总线和[分布式缓存](http://ehcache.sourceforge.net/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-03T11:49:56.287

你应该使用缓存吗？是的，如果它更快，并且您永远不想更新数据，或者如果缓存的数据不是最新的真实数据并不重要。

您应该将此访问放在 API 后面，并将缓存隐藏在抽象后面。然后您可以使用不同的缓存策略，或者完全放弃缓存的想法，而不必每次都重写其余代码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-03T14:05:41.543

同样，这取决于你做什么，这可能没问题。只要您有某种方法可以在服务器维护/关闭的情况下保留 HashMap 等中的内容。

您只需要一个序列化方法。我看到上面提到了XStream。

还有一个名为[Prevayler](http://www.prevayler.org/wiki/)的库。这会即时序列化更改，但可以让您将所有内容保存在内存中。因此，即使在您没有时间正确关机的突然断电时，这也可能会有一些用处。

尝试不同的方法以查看适合您的方法并提取 DAO 背后的细节。

# sql - 查找日期范围包含给定日期的行

> ID：816671
> 
> 赞同：1
> 
> 时间：2009-05-03T09:29:13.457
> 
> 标签：sql, mysql

我正在查看以下问题：

我的组表包含两个字段：ArrivalDate 和 DepartureDate。

现在我想找到在给定日期在场的所有组。

例如。SQL 查询传递了一个日期，我想找到该日期在 ArrivalDate 到 DepartureDate 范围内的每个组。

非常感谢！马丁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-03T09:35:04.737

```
SELECT
  ...
FROM
  yourGroupTable as y
WHERE
  Curdate() BETWEEN y.ArrivalDate AND y.DepartureDate
```

用您的实际日期值替换 Curdate()。

# java - XMLDecoder.readObject() 返回 null

> ID：816679
> 
> 赞同：2
> 
> 时间：2009-05-03T09:33:41.417
> 
> 标签：java, xml

我正在尝试使用 XMLDecoder 从 XML 文件中读取对象。构造似乎没问题，但是当我调用 readObject() 方法时，我得到 null 而不是我期望的对象。

该文件存在并且创建的 BufferedInputStream 正确读取该文件。此代码在编写它的原始 Vista 笔记本电脑上工作正常，但在我的 Win Xp 机器上失败。

```
 try {
        XMLDecoder decoder = new XMLDecoder(new BufferedInputStream(
            new FileInputStream("Params.xml")));

        Params = (Parameters)decoder.readObject();
        decoder.close();

    } catch (FileNotFoundException e) {
        System.out.println(e.toString()); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T10:37:34.307

如果它在您的 XP 机器上失败，但在您的 Vista 机器上工作，那么这听起来像是一些环境问题。

由于它涉及 XML，我想知道是否存在字符编码问题，并且您的 Vista/XP 环境设置了不同的编码属性。如果是这种情况，那么 XMLDecoder 可能无法正确解析 XML。

检查两个安装的系统属性`file.encoding`。看看它们是否不同会很有趣。您的 .xml 文件是否指定字符编码？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-05T00:26:31.447

Vista 和 XP 机器上使用的 Java 版本是否相同？还要检查最初用于创建 xml 的 Java 版本。

另一个测试是在 XP 盒子上编码一个对象并尝试读回它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T10:16:57.587

这意味着您以某种方式`InputStream`被`XmlDecoder`.

你能试试：

```
XMLDecoder decoder = new XMLDecoder(new FileInputStream("Params.xml")); 
```

直接使用`FileInputStream`而不是`BufferedInputStream`？

或者尝试在`reset()`您的初始化`BufferedInputStream`中使用它之前？`XmlEncoder`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T10:54:23.860

您可以尝试`XMLDecoder`使用自定义构建您的`ExceptionListener`并将 a`println`放入其中。

```
public XMLDecoder(InputStream in,
                  Object owner,
                  ExceptionListener exceptionListener) 
```

此外，如果流不包含对象（或不再包含对象），则抛出异常，您是否正在捕获该异常`readObject`？`ArrayIndexOutOfBoundsException`

# python - 如何在 GAE 模板中获取当前页面的 url

> ID：816683
> 
> 赞同：2
> 
> 时间：2009-05-03T09:36:30.833
> 
> 标签：python, google-app-engine, templates, django-templates, web-applications

在 Google App Engine 中，是否有标签或其他机制来获取模板中当前页面的 URL，或者是否有必要将 url 作为变量从 python 代码传递给模板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T10:13:19.823

这取决于您如何填充模板。如果您在 Django 之外使用它们，那么您必须自己使用 URL 填充它们。如果您在 Django 中使用默认配置使用它们，则必须自己使用 URL 填充它们。避免您自己填充它们的替代方法是配置 DJANGO.CORE.CONTEXT_PROCESSORS.REQUEST 上下文处理器，如[本页](http://docs.djangoproject.com/en/dev/ref/templates/api/)所述，然后直接访问请求对象的适当部分（例如 request.path）。

# c - 从单个文件同时读取

> ID：816684
> 
> 赞同：4
> 
> 时间：2009-05-03T09:37:19.553
> 
> 标签：c, windows, linux, concurrency, io

我有以下问题情况。一堆数据被分成 10k 个小文件（每个大约 8-16 kib）。根据用户输入，我必须尽快加载并处理它们。更准确地说，每个数据包可以拆分成100-100k个文件，大约有1k个数据包。不过，它们中的大多数都是较小的。

现在，我正在使用线程池，在每次文件访问时，下一个空闲线程都会打开文件，读取它，然后返回准备显示的数据。由于未来文件的数量会增加，我对这种方法不太满意，特别是如果它最终可能会得到大约 100k 或更多的文件（部署它肯定会很有趣；））。

因此，我们的想法是将一个数据包的所有这些小文件组合成一个大文件，然后从中读取。我可以保证它将是只读的，但我不知道将同时访问一个文件的线程数（我知道最大数量）。这将为我提供大约 1000 个大小合适的文件，并且我可以轻松添加新的数据包。

问题是：在这种情况下，如何允许 1..N 个线程有效地从单个文件中读取？我可以在 Windows 上使用异步 I/O，但是对于小于 64k 的读取，它应该是同步的。内存映射文件不是一个选项，因为预期大小> 1.6 GiB，我仍然需要能够在x86上运行（除非我可以有效地映射一些小部分，读取它，再次取消映射 - 我的经验内存映射是它带来了与单次读取相比相当多的开销）。

我想过打开每个数据包N次，并以循环方式给每个线程一个句柄，但问题是它最终可能会以（数据文件数）x（最大线程数）打开句柄（可以轻松变成 8-16k），而且我必须在每次访问数据包时进行同步，或者使用一些无锁魔法来获得下一个空闲文件句柄。

因为这似乎不是一个原始问题（我猜，任何数据库引擎都有类似的问题，您可以有 M 个表（数据包）和 N 行（在我的情况下是文件），并且您希望允许尽可能多的线程尽可能同时读取行）。那么这里推荐的做法是什么？顺便说一句，它应该在 Windows 和 Linux 上运行，因此欢迎使用可移植的方法（或者至少可以在两个平台上工作的方法，即使它们使用不同的底层 API ——只要它们可以被包装，我很高兴）。

[**编辑**] 这不是关于速度，而是关于隐藏延迟。也就是说，我可能每秒读取 100 个这些小文件，所以我最多只能达到 1 mib/s。我主要关心的是查找时间（因为我的访问模式是不可预测的），我想通过在向用户显示旧数据的同时触发读取来隐藏它们。问题是如何允许多个线程对多个文件发出 IO 请求，并且可能有 >1 个线程访问单个文件。

如果其中一个调用需要 70 毫秒左右才能完成，那真的没问题，但如果读取调用阻塞，我负担不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T09:42:14.750

我认为多线程不会对磁盘​​读取有很大帮助。假设文件在一个磁盘盘片上，你只有一组读磁头可以访问它，所以你就在那里被序列化了。

在这种情况下，我想我会有一个磁盘读取进程，将文件顺序读取到缓冲区中（这有望最大限度地提高读取性能，因为读取头不需要移动太多，假设数据文件相当完整）和一个读取缓冲区的处理线程数，当它们完成处理时将它们标记为空闲。

无论您选择继续，我是否可以建议您确保您的代码的结构使得不同类型的线程的数量易于配置，最好是从可执行文件命令行。在这种情况下，您将需要尝试不同的线程配置，以找到适合您特定情况的最佳数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T00:42:09.900

Linux 根本没有可用的异步 IO（是的，有 aio_*，但它只适用于 O_DIRECT 并且有各种奇怪的限制）所以如果你想要一些可移植的东西，你只需要使用普通的读取调用。mmap 会起作用，但如果您每次只阅读少量内容，更改映射的成本可能会有点高。

现在，我不了解 Windows，但是在 Linux 上，有一个 pread() 函数可以让您从给定偏移量的文件描述符中读取，而不会影响文件描述符的查找指针。有了这个，您可以让任意数量的线程从同一个文件中读取，而无需锁定文件描述符或任何类似的傻事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T09:45:39.877

我能想象的读取大量数据的最快方法是创建一个磁盘分区（主分区或逻辑分区，但没有 LVM），然后直接读取分区设备（例如`/dev/sda5`）*顺序*，没有文件系统，只使用一个线程每个磁盘。顺序访问原始磁盘很重要，以避免磁盘寻道，这比顺序读取要慢得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T09:47:11.837

会伤害你的问题是头部争用；不管你运行了多少线程，头部一次只能在一个位置。您是否可以选择将文件分布在多个磁盘上？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T09:56:12.283

mmap 方法派上用场了。您不需要为每次读取执行 mmap/unmap 循环，但有一个线程处理所有这些映射和处理*指针*（实际上是偏移量和长度）。当线程访问映射到文件的虚拟内存时，操作系统会安排真正的读取部分。

请记住，过多的线程不会提高阅读速度。数据库引擎通常具有数量非常有限的 I/O 线程来满足应用程序线程的所有 I/O 需求。

# apache-flex - 在 Flash/Flex 应用程序中使用 Ogg Vorbis

> ID：816701
> 
> 赞同：5
> 
> 时间：2009-05-03T09:49:09.400
> 
> 标签：apache-flex, mp3, flash, ogg

我正在寻找使用 ogg vorbis 而不是 mp3 来流式传输音频。似乎 Flash 播放器本身并不支持 ogg。是否有可以嵌入应用程序本身的编解码器引擎，可以播放 .ogg 而不是 .mp3？

一般来说，对于流式音频，有什么比 mp3 更好的格式并且受 Flash 支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T11:01:14.203

Adobe Alchemy 技术的首次演示之一是用于 Flash 的 OggVorbis 库。有关源代码和库本身，请参[见此页面](http://labs.adobe.com/wiki/index.php/Alchemy:Libraries)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T10:46:25.237

还有一个 Haxe 解码器，请参见此处：

[http://barelyfocused.net/blog/2008/10/03/flash-vorbis-player/](http://barelyfocused.net/blog/2008/10/03/flash-vorbis-player/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-25T13:35:48.080

在最近的 Google IO 大会上，Google 宣布了他们新的 WebM 媒体格式，该格式应该会在 Flash 10.1.x 中得到支持。我不知道他们是否确切地宣布了何时。我提到它的原因是格式的音频部分是 Vorbis。不确定你的截止日期是什么时候，但如果它可以等到那个时候，听起来很快就会有本地支持。

# python - 使用 selenium 和 firefox 保存图像

> ID：816704
> 
> 赞同：9
> 
> 时间：2009-05-03T09:51:07.523
> 
> 标签：python, selenium

我正在尝试使用 selenium 服务器和 python 客户端从网站保存图像。我知道图像的 URL，但我找不到保存它的代码，无论是文档本身，还是嵌入在当前浏览器会话中。

到目前为止我发现的解决方法是保存页面的屏幕截图（有 2 种 selenium 方法可以做到这一点），但我想要原始图像。

我不介意摆弄单击菜单选项等，但我找不到方法。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-01-14T00:10:28.910

我找到了将图像放入画布的代码，然后将其转换为数据——例如，这些数据可以进行 base64 编码。我的想法是在 selenium 中使用 eval 命令来调用它，但是在我的测试中，toDataURL 会引发安全错误 1000。如果不是因为该错误，它似乎非常接近解决方案。

```
var data, canvas, ctx;
var img = new Image();
img = document.getElementById("yourimageID");
canvas = document.createElement('canvas');
canvas.width = img.width;
canvas.height = img.height;
ctx = canvas.getContext("2d");
ctx.drawImage(img, 0, 0);  // everything works up to here
data = canvas.toDataURL();  // this fails ***
var base64Img = data.replace(/^data:image\/(png|jpg);base64,/, ""); 
```

做一些研究，我发现当图像来自不同域时，不允许使用 toDataURL 的引用。但是，我什至通过保存页面来尝试此代码，剥离除图像本身和此脚本之外的所有内容。

例如 (index.html) ：

```
<html><head></head><body>
<img src="local/hard/disk/img.jpg" id="yourimageID">
<script>
// script from above
</script>
</body></html> 
```

img.jpg和index.html是本地存储的，在本地用firefox打开页面，还是报安全错误1000！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T03:18:48.860

要按照您想要的方式执行此操作（实际捕获发送到浏览器的内容），您需要修改 Selenium RC 的代理代码（请参阅 ProxyHandler.java）并将文件本地存储在磁盘上，同时发送回响应到浏览器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-04-23T14:25:26.260

我试图完成同样的任务，但我想抓取的图像是我的显示器（壁纸）的大小——所以捕获屏幕截图的解决方法对我不起作用。我想出了一个办法...

我已经设置了 selenium 以转到我想要的页面（这会引发所有会话好东西）然后我使用了一个名为“Workspace Macro”的程序来循环执行 selenium 任务。

从这里获取它[http://www.tethyssolutions.com/product.htm](http://www.tethyssolutions.com/product.htm) - 他们有一个试用版，我认为它可以运行 30 次或其他东西。

所以这里的进展：

*   启动火狐
*   打开硒和负载测试用例
*   启动它，但很快暂停它。
*   录制一个宏，在 selenium 上推动“步骤”，然后转到 firefox 窗口并单击文件->将页面另存为，保存，然后停止录制
*   运行宏x次...
*   利润？？

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T11:21:02.080

我没有使用过 selenium，但如果你知道图像的 URL，为什么不这样做：

```
from urllib import urlretrieve

urlretrieve(url, filename) 
```

这会将 url 保存到文件名。更多信息[在这里](http://docs.python.org/library/urllib.html#urllib.urlretrieve)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-03T10:48:43.360

转到图像 URL 然后截取页面截图怎么样？Firefox 全屏显示图像。希望这可以帮助..

# c# - LINQ：分组集合

> ID：816707
> 
> 赞同：0
> 
> 时间：2009-05-03T09:52:18.220
> 
> 标签：c#, linq

我正在对太空入侵者进行编程以进行练习 ;-) 并且工作得很好，但是我的入侵者还击有问题。

所有入侵者都存储在一个列表中，我使用 linq 将这些入侵者按其 X 位置分组，这样我就可以随机访问一个组并采取该列底部的入侵者进行反击。

```
var r = from invader in invaders
                group invader by invader.Location.X into invaderGroup
                orderby invaderGroup descending
                select invaderGroup.Take(random.Next(0, invaderGroup.Count())); 
```

但无论我尝试什么（例如*选择新的 {invasionGroup.Key,invasiongroup };*）我的结果总是**null**？

任何人都可以为我提供一些帮助/提示吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T10:23:40.457

我发现您的查询有两个问题；您正在对组进行排序而不是对入侵者进行排序，并且您正在使用`Take`一个可以为零的随机数，因此它可能会返回一个空结果。

这适用于按 X 坐标对入侵者进行分组，按 Y 坐标对其进行排序，随机选择一个组并获得具有最高 Y 坐标的入侵者：

```
var r =
    from invader in invaders
    orderby invader.Location.Y descending
    group invader by invader.Location.X into invaderGroup
    select invaderGroup;

Invader fire = r.Skip(random.Next(r.Count())).First().First(); 
```

# c# - C# - ListBox DataSource 属性和绑定 ArrayList

> ID：816710
> 
> 赞同：3
> 
> 时间：2009-05-03T09:57:10.083
> 
> 标签：c#, listbox, datasource

我创建了一个包含 KeyValuePair<string, string> 对象的 ArrayList。我想将一些 ListBox 绑定到该列表，这样我就不必通过迭代来填充它们，同时复制我在上述 ArrayList 中拥有的所有数据。

我是 Delphi 程序员，在 Delphi 中我会使用 ListView 控件，将其 OwnerData 属性设置为 true，然后使用 OnData 事件使给定项（具有指定索引）显示来自具有相同数组项的任何数据指数。OnData 方法将当前显示的项目作为参数提供给我，因此我可以访问它的 Index、Caption 和 SubItems 属性。基于该索引，我可以使项目显示来自具有相同索引的数组项目的一些数据。如果修改了该数组，则在数组长度发生更改时刷新 ListView 和/或设置其 Count 属性就足够了。

如何使用 ListBox 控件在 C# 中实现相同的目标？我将 listBox.DataSource 属性设置为包含 KeyValuePairs 的 myArrayList。现在我希望 listBox 显示 KeyValuePairs 对象的键。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-03T10:03:27.290

.NET 列表框内置了此功能。您已经设置了`DataSource`属性，因此要仅显示列表中的键，请设置：

```
listBox.DisplayMember = "Key"; 
```

# python - 在 Python 中动态改变范围？

> ID：816712
> 
> 赞同：1
> 
> 时间：2009-05-03T09:59:57.627
> 
> 标签：python, beautifulsoup

所以说我正在使用 BeautifulSoup 来解析页面，而我的代码发现查询至少有 7 个页面。

分页看起来像

```
 1 2 3 4 5 6 7 Next 
```

如果我一直分页到 7，有时会有超过 7 页，所以如果我在第 7 页，分页看起来像

```
 1 2 3    7 8 9 10 Next 
```

所以现在，我知道至少还有 3 页。我正在使用初始传递来确定有多少页，即 get_num_pages 返回 7

我正在做的是迭代每个页面上的项目，所以我有类似的东西

```
for page in range(1,num_pages + 1):
  # do some stuff here 
```

如果脚本发现超过 7 页，有没有办法动态更新范围？我想另一种方法是保持计数，当我到达第 7 页时，分别处理。我正在寻找解决此问题的最佳方法的建议和解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T10:07:23.553

您可能可以创建一个具有可变状态的生成器来确定它何时终止......但是像这样简单的东西呢？

```
page = 1
while page < num_pages + 1:
    # do stuff that possibly updates num_pages here
    page += 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-03T11:05:47.420

这是一个无代码的答案，但我认为如果你利用美丽的汤让你做的事情很简单：

首先，在第一页上，您有页码和链接；从您的问题来看，它们看起来像这样：

```
1 2 3 4 5 6 7 [next] 
```

不同的网站处理分页的方式不同，有些网站提供了跳转到开始/结束的链接，但在你的网站上，你说它在前 7 页之后看起来像这样：

```
1 2 3 ... 7 8 9 10 [next] 
```

现在，在某个时候，你会走到尽头，它看起来像这样：

```
1 2 3 ... 20 21 22 23 
```

请注意，没有 [next] 链接。

所以忘记生成器和范围以及跟踪中间范围等。只需这样做：

1.  使用漂亮的汤来识别给定页面上的页面 # 链接，以及下一步按钮。
2.  每次看到 [next] 链接时，请关注它并用美丽的汤重新解析
3.  当你点击一个没有下一个链接的页面时，最后一个 #page 链接就是总页数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T19:27:35.140

我喜欢 John's `while`-based 解决方案，但要使用 a`for`您可以执行以下操作：

```
pages = range(1, num_pages+1)
for p in pages:
   ...possibly pages.extend(range(something, something)) here... 
```

也就是说，您必须为循环的范围命名，以便在需要时对其进行扩展。更改您正在迭代的容器通常是不受欢迎的，但在这种特定且高度受限的情况下，它实际上可能是一个有用的习惯用法。

# c++ - 一个好的（和免费的）VCL GUI 替代品

> ID：816714
> 
> 赞同：4
> 
> 时间：2009-05-03T10:00:26.737
> 
> 标签：c++, windows, user-interface, c++builder, vcl

我有一个项目，其 VCL 代码库建立在 Borland C++ Builder 6 之上。我打算重写它的大部分内容，因为它在当前状态下几乎无法维护。我正在寻找一个好的和免费的 VCL 替代品。这是一个仅限 Windows 的闭源商业项目。

所以主要要求是：

1.  商业闭源项目免费
2.  管理 Windows GUI。不需要其他组件（数据库链接和东西）
3.  可扩展（因此可以基于现有的 GUI 组件编写我自己的 GUI 组件）
4.  对 STL 友好。

请发表您的建议，如果可能的话，请说明优点和缺点。

## 编辑

感谢所有的答案。我决定使用 Qt，因为它还有一些其他不错的功能，例如 Qt Linguist 翻译套件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T10:22:58.740

查看[wxWidgets](http://www.wxwidgets.org)。它的设计有点过时，但是当您开始使用它并使用最新版本时，它应该对 STL 非常友好。它可以免费用于商业用途，即使您不打算使用它的跨平台功能，它也可能是您编写 Windows GUI 的好库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-03T10:20:10.853

试试[Qt](https://www.qt.io/)。它的 LGPL 所以它可以用于闭源软件。它提供小部件、网络功能、数据库访问、通过 WebKit 的 Web 渲染、动画等等。它的文档是同类中最好的之一。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-03T10:22:03.470

您可以使用[QT](http://qt-project.org/)或[wxwidgets](http://www.wxwidgets.org)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-03T13:09:07.967

正如[mghie所指出的](https://stackoverflow.com/questions/816714/a-good-and-free-vcl-gui-alternative/816742#816742)

wxWidgets 是一个很棒的库。它有很多绑定（.net、lua-我最喜欢的等），它有 gui 编辑器。尽管它会生成相当晦涩的代码，但您可以找到简单的拆分 ui \ it 的功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-03T10:09:57.803

您需要的可能是免费版本的 BCB：[Turbo C++ Explorer](http://www.turboexplorer.com/cpp)，或尝试 .NET CLR / WinForms。

WxWidgets 只是一个 GUI 库。Qt 是一个平台，但与 VCL 之类的 RAD 框架相去甚远。唯一的竞争者是 MFC，不幸的是它不是免费的。从某种角度来看，.NET+CLR 是 VCL 的继承者——好吧，也许你也可以试试——如果你不介意它需要庞大的 .NET 框架。

如果您只想要一个“好的和免费的解决方案”并且不介意坚持使用 VCL，请使用 TC++Exp。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-03T10:21:24.563

你可能想看看[Qt Project](http://qt-project.org/)

# bash - 在 bash 中解析发件人姓名的电子邮件

> ID：816717
> 
> 赞同：2
> 
> 时间：2009-05-03T10:04:12.780
> 
> 标签：bash, unix

我在一个文件夹中有多个文件，每个文件都有一封电子邮件。每条消息都有一个格式的标题

主题：格式化字体
收件人：help@abc.com
发件人：发件人姓名

邮件正文

我想从所有消息中获取所有唯一的发件人姓名（每个文件只有 1 条消息）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T10:21:29.883

假设消息中间不能有随机标头，那么这应该可以解决问题：

```
cat * | grep '^From: ' | sort -u 
```

如果消息中间可能有其他误导性的“发件人：”行，那么您只需要确保只从每条消息中获取第一个匹配行，如下所示：

```
for f in * ; do cat $f | grep '^From: ' | head -1 | sort -u ; done 
```

显然，您可以将任一命令中的 * 替换为不同的 glob 或文件名列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T10:38:46.143

是否要过滤发件人姓名或电子邮件地址？通常你在“发件人”行中都有两个，例如

```
From: Lessie <etxhakk@ericsson.se> 
```

您可以使用`sed`删除电子邮件地址部分

```
sed 's/^From: //;s/ *<[^>]*> *//' 
```

最终得到这样的结果：

```
ls | while read filename
do
    grep '^From: ' $filename | head -n1 | sed 's/^From: //;s/ *<[^>]*> *//;s/^"//;s/"$//'
done | sort -u 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T20:44:05.040

收紧一些答案。（我还没有足够的声誉发表评论。）以下应该足够了：

```
grep -m 1 '^From: ' * | sed -'s/^From: *//' | sort -u 
```

将为您提供目录中所有消息的唯一地址列表。如果要清理地址部分，可以向 sed 命令添加更多内容，例如 che 的答案。不需要'cat * | grep'。

# ruby - Ruby 中的多个引用

> ID：816719
> 
> 赞同：1
> 
> 时间：2009-05-03T10:05:55.083
> 
> 标签：ruby, reference

我希望下面的代码打印“8”、“111”和“999”。我认为每个 a、b、c 和 d 都指向同一个内存位置。如果我通过其中一个更改位置，为什么另一个不更改？显然，我的逻辑很差，或者我忽略了一些东西。相反，它会打印“7”、“7”和“8”。

为什么？

```
a=b=c=d=7
     b  =  8
     puts d

     c  = 111
     puts a

     d  =  999
     puts b 
```

**[澄清]**

我困惑的原因是[书中的例子（第20页）。](http://www.scribd.com/doc/230611/A-Great-Ruby-eBook)他们在那里改变了类似的值，但他们得到了我上面建议的结果。我们说的是同一个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-03T10:35:49.053

```
a=b=c=d=7
# a, b, c and d points to the same integer object "7"
     b  =  8
# b now points to a new object "8"
# "=" does not change the value of the pointer integer, 
# it assings a new reference like in the line above
     puts d
# obviously, d still points to "7"

     c  = 111
# c now points to another integer object "111"
     puts a
# a still points to "7"

     d  =  999
# d now points to a new integer object "999"
     puts b
# b still points to "8" 
```

在 Ruby 中，Integer 对象是不可变的，因此您不能将 Integer 分配给多个引用并在之后更改其值。

正如@pts 建议的那样，您应该使用数组来包装您的 Integer 引用，因为数组是可变的，您可以在之后更改值。

```
a=b=c=d=[7]
b[0] = 8
puts d[0]
c[0] = 111
puts a[0]
d[0] = 999
puts b[0] 
```

澄清：

如果您来自 C++ 背景，可能会感到奇怪，因为 C++ 使用相同的语法做了两件事，分配引用和更改引用的值。

```
int a = 10; // creates an int on the stack with value 10
int& b = a; // creates a reference to an int and references the a variable
b = 5; // change the value referenced by b (so a) to 5
// a and b now hold the value 5 
```

在 Ruby 中，引用是可变的，而整数不是（与 C++ 完全相反）。所以分配一个引用实际上会改变引用而不是引用的值。

另一种解决方案是创建一个可变整数类：

```
class MutableInteger
  attr_writer :value
  def initialize(value)
    @value = value
  end
  def inspect
    value
  end
  def to_i
    value
  end
  def to_s
    value
  end
end

a = b = MutableInteger.new(10)
a.value = 5
puts b
# prints 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T10:26:25.817

获得您期望的输出的最简单方法是使用单元素数组：

```
a=b=c=d=[7]
b[0] = 8
puts d[0]
c[0] = 111
puts a[0]
d[0] = 999
puts b[0] 
```

要获取 a 和 b 是否引用同一个对象，请使用`a.__id__ == b.__id__`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T10:13:31.290

它们不指向相同的内存位置。[Ruby 不通过引用传递。](http://www.khelll.com/blog/ruby/c-passes-by-reference-java-and-ruby-dont/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T13:01:25.863

在第一行之后，a、b、c 和 d 都指向同一个 Fixnum 对象（值为 7）。但是，当您执行 b = 8 时，b 现在指向一个新的 Fixnum 对象（值为 8）。

实际上，您将 b 分配给一个新对象，而不是改变现有对象。这就是为什么您的更改没有按预期传播的原因。

如果您与 C++ 进行比较，这就像按值分配指针，而不是按引用分配。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-08-27T15:16:46.580

我强烈建议[通过参考阅读 C 通行证 Java 和 Ruby 不要](http://www.khelll.com/blog/ruby/c-passes-by-reference-java-and-ruby-dont/)

# iphone - 将 Obj-C 2.0 属性与可变对象（例如 NSMutableArray）一起使用的最佳方法是什么？

> ID：816720
> 
> 赞同：12
> 
> 时间：2009-05-03T10:06:57.873
> 
> 标签：iphone, objective-c, cocoa, macos, properties

我有一个具有 NSMutableArray 属性的 Obj-C 2.0 类。如果我使用下面的代码，那么合成的 setter 会给我一个不可变的副本，而不是一个可变的副本：

```
@property (readwrite, copy) NSMutableArray *myArray; 
```

Apple 没有实现以下语法有什么原因吗？

```
@property (readwrite, mutablecopy) NSMutableArray *myArray; 
```

既然我们没有`mutablecopy`，那么处理这种（看似常见的）情况的最佳方法是什么？我应该只编写自己的 setter 来执行 -mutableCopy 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-03T12:33:49.083

前段时间我遇到了同样的问题，并[在 Apple Developer Connection 上找到了一份文档，](http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/ObjectiveC/Articles/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW17)建议提供您自己的 setter 实现。链接文档的代码示例：

```
@interface MyClass : NSObject {
    NSMutableArray *myArray;
}
@property (nonatomic, copy) NSMutableArray *myArray;
@end

@implementation MyClass

@synthesize myArray;

- (void)setMyArray:(NSMutableArray *)newArray {
    if (myArray != newArray) {
        [myArray release];
        myArray = [newArray mutableCopy];
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-03T16:50:27.560

`NSMutableArray`在 Cocoa中传递 s 并不常见。标准的 Cocoa 实践是为索引到多的属性实现键值编码兼容的[方法。](http://developer.apple.com/documentation/Cocoa/Conceptual/KeyValueCoding/Concepts/Compliant.html#//apple_ref/doc/uid/20002172-SW2)这有两个好处：

1.  键值观察按预期工作（在某些情况下观察 NSMutableArray 会导致不是你想要的行为）
2.  你的数据结构的实现是隐藏的，因为你暴露了变异方法（例如`-[MyObject insertObjectInMyProperty:(id)newObject atIndex:(NSUInteger)i]`，不是数据结构本身。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-03T17:15:33.897

如前所述，*正确*的做法是不要将可变数组设为属性。[这里](http://boredzo.org/blog/archives/2008-11-26/how-to-work-with-a-bound-to-array)有一个很好的解释你应该实现什么来兼容 KVC 。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-03T14:09:18.150

请记住，传递可变数组并不是 Cocoa 中的常见做法。你可以使用私有的可变数组作为内部存储，但是使用普通的 NSArray 对象创建方法来添加或获取对象。这可能就是为什么没有 mutablecopy 属性声明的原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-03T10:51:28.000

您必须编写自己的二传手。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-17T01:42:07.387

保持 NSMutableArray 的正确方法是使用 retain 属性：

```
@property (nonatomic, retain) NSMutableArray *myArray; 
```

您不需要编写自己的设置器或使用副本。copy 属性应该与一个 NSArray 一起使用，当该属性被捕获到另一个对象中时，它实际上确实需要被复制。例如，如果您将 NSMutableArray 对象分配给具有 copy 属性的 NSArray 类型的属性，那么您确实希望制作可变数组的副本以从那时起将其“捕获”为不可变属性。

而且 Marc 有正确的方法，通常不会使 NSMutableArray 成为对象公共 API 的一部分。如果你确实有一个公共属性，它可以是一个带有 copy 属性的 NSArray。

# java - 用java替换字符串中所有标签的最佳方法

> ID：816722
> 
> 赞同：2
> 
> 时间：2009-05-03T10:07:34.817
> 
> 标签：java, string, replace, stringbuilder

我有一个服务方法，它接受一个字符串，然后用标签库中的项目替换字符串中的标签。如下：

```
for( MetaDataDTO tag : tagValues )
{
    message = message.replace( tag.getKey(), tag.getText1() );
} 
```

明显地; 这会产生大量新字符串并且很糟糕。但是 StringBuilder 替换方法对于一个字符串中的多个字符串使用起来很麻烦。我怎样才能使我的方法更有效？

它用于文本块，例如：

亲爱的#firstName#，您的#applicationType# 申请已被#approvedRejected# 抱歉。

其中#firstName#等是元数据数据库中的键。标签也可能没有被散列字符包围。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-03T10:25:44.040

基本上你想像这样复制[Matcher.replaceAll()](http://java.sun.com/j2se/1.5.0/docs/api/java/util/regex/Matcher.html#replaceAll(java.lang.String))的执行：

```
public static String replaceTags(String message, Map<String, String> tags) {
  Pattern p = Pattern.compile("#(\\w+)#");
  Matcher m = p.matcher(message);
  boolean result = m.find();
  if (result) {
    StringBuffer sb = new StringBuffer();
    do {
      m.appendReplacement(sb, tags.containsKey(m.group(1) ? tags.get(m.group(1)) : "");
      result = m.find();
    } while (result);
    m.appendTail(sb);
    message = sb.toString();
  }
  return message;
} 
```

**Note:** I've made an assumption about the valid tag (namely \w in the regex). You will need to cater this for what's really valid (eg "#([\w_]+)#").

I've also assumed the tags above looks something like:

```
Map<String, String> tags = new HashMap<String, String>();
tags.add("firstName", "Skippy"); 
```

and not:

```
tags.add("#firstName#", "Skippy"); 
```

If the second is correct you'll need to adjust accordingly.

This method makes exactly one pass across the message string so it doesn't get much more efficient than this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T02:38:42.030

Thanks for your help guys. Certainly learned more about java. Here is my solution. It is this way to support different looking tags and tags within tags:

```
private static String replaceAllTags(String message, Map< String, String > tags)
{
    StringBuilder sb = new StringBuilder( message );
    boolean tagFound = false;
    /**
     * prevent endless circular text replacement loops
     */
    long recurrancyChecker = 5000;

    do
    {
        tagFound = false;
        Iterator it = tags.entrySet().iterator();
        while( it.hasNext() )
        {
            Map.Entry pairs = (Map.Entry) it.next();

            int start = sb.indexOf( pairs.getKey().toString() );

            while( start > -1 && --recurrancyChecker > 0 )
            {
                int length = pairs.getKey().toString().length();
                sb.replace( start, start + length, pairs.getValue().toString() );
                start = sb.indexOf( pairs.getKey().toString() );
                tagFound = true;
            }
        }
    }
    while( tagFound && --recurrancyChecker > 0 );
    return sb.toString();
} 
```

# c# - Silverlight：更新列表框模板项

> ID：816724
> 
> 赞同：0
> 
> 时间：2009-05-03T10:08:56.527
> 
> 标签：c#, silverlight-2.0

我有列表框，在单击事件时我打开新面板，在其中更改列表框的数据，更准确地说是图像源。我有问题如何更新列表框以获得新图片。提前致谢。这是我的代码：

```
<ListBox x:Name="lbNarudzbe" MouseLeftButtonUp="lbNarudzbe_MouseLeftButtonUp" HorizontalAlignment="Center" MaxHeight="600">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Image Margin="0,5,0,0" Width="50" Height="50" HorizontalAlignment="Center" Source="{Binding Path=Picture}" />
                                <TextBlock HorizontalAlignment="Center" FontSize="23" Text="{Binding Path=UkupnaCijena}" Width="80"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

public partial class Page : UserControl
    {
        ObservableCollection<Narudzba> narudzbe = new ObservableCollection<Narudzba>();

        public Page()
        {
            InitializeComponent();

            narudzbe.Add(new Narudzba());
            narudzbe.Add(new Narudzba());
            narudzbe.Add(new Narudzba());
            narudzbe.Add(new Narudzba());

            lbNarudzbe.ItemsSource = narudzbe;

        }

     public class Narudzba
            {
               //...
                public string Picture
                {
                    get { return "picture source"; }
                }..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T11:13:25.000

基本上，当您想更新列表框中的图片时，您正在更新 Narudzba 类的 Picture 属性，并且由于您的 Narudzba 类没有实现 INotifyPropertyChanged 接口，因此列表框无法更新图片。

这是一些可能有帮助的代码。

```
 public class Narudzba : System.ComponentModel.INotifyPropertyChanged
{
    public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;
    void Notify(string propName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propName));
        }
    }

    string _picturesource;

    public string Picture
    {
        get { return _picturesource; }
        set 
        { 
            _picturesource = value;
            Notify("Picture");
        }
    }

    public Narudzba(string picturesource)
    {
        _picturesource = picturesource;
    }
  }
} 
```

那么 lbNarudzbe_MouseLeftButtonUp 事件代码应该是这样的

```
 private void lbNarudzbe_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        Narudzba nb  = (Narudzba)lbNarudzbe.SelectedItem;
        nb.Picture = "http://somedomain.com/images/newpicture.jpg";            
    } 
```

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T10:26:17.110

虽然不确定，但是对于列表框外部的图像块对象和其中的对象，您不能有相同的绑定吗？

# c# - 如何在 c# 中轻松地在控制台或文件中获取用户的输入？

> ID：816726
> 
> 赞同：1
> 
> 时间：2009-05-03T10:10:45.790
> 
> 标签：c#, file, input, console

我是 C++ 用户，现在尝试使用 C#。

在 c++ 中，从用户那里获取输入很有趣（只是 >>）并支持所有类型。文件也是如此。但是在 c# 中它太复杂了，因为我只能接受字符串。然后我必须操纵它以备后用。

如果我想在同一行中使用空格分隔的多个输入，它会变得更加复杂，因为我必须进行字符串拆分。然后转换...

可能是为了错误处理和安全代码。但无论如何，我对 C# 感到失望。

你们都是这里的专家。有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T10:22:53.703

最终，包装它并不需要太多 - 您只需要缓冲当前行并以您想要的格式读取输入。但是 IMO，一点拆分/TryParse 等很少会受到伤害。

我不是 100% 确定可以`>>`接受的预期格式，但我怀疑很难做类似的事情。不过，我不是自愿写的；-p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T17:47:08.940

正如已经回答的那样，C# 不支持这一点。根本没有为流重载 << 或 >> 并且虽然有 TextWriter.WriteLine(" ",...) 没有对应的 TextReader.ReadLine() 与可变参数列表。

我会猜一下*为什么*：dat cin 所理解的以空格分隔的数据格式不再被广泛使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T10:34:12.910

据我所知，你必须以艰难的方式做到这一点。（不过，从好的方面来说，困难的方法比 C++ 中的要简单；））

Console.OpenStandardInput() 确实为您提供了输入流，因此可以将其视为文件，但如果需要，您必须自己进行字符串拆分。当然，C# 有一个不错的 Regex 库，可以在这里提供帮助。

T.TryParse（其中 T 是 int、float，无论您想读取哪种类型）都应该让您将字符串转换为这些类型。

# svn - SVN 原子提交方法

> ID：816732
> 
> 赞同：8
> 
> 时间：2009-05-03T10:15:35.717
> 
> 标签：svn, version-control, svnignore

我在哪里：Linux 命令行

我现在遇到的问题：

有时我无法进行原子提交（包括一个特定票证/任务所需的所有修改），因为我们在存储库中有一些文件，其内容在本地开发环境中有所不同。

例如：（`database.xml`数据库名称、用户名、密码等）。我在本地环境中修改了这个文件，每次我需要提交/签入时，我都会手动列出提交所需的所有文件/文件夹（不包括这个本地修改的文件）。

也许这是一个错误的设计决策，`database.xml`必须从存储库中删除并更改为`database.xml.template`（存储在 SVN 中），所以在您手动执行之前不会包含此文件以提交`svn add`？也许这是错误的方法 - 将所有这些环境相关信息存储在存储库中 - 在这种情况下，我们可以通过提交修改后的配置来破坏一切，例如..

据我了解，`svn:ignore`属性在这种情况下无济于事，因为它只能用于未存储在存储库中的文件。

如何解决这个问题？

PS：我使用的是 Ubuntu，而且大部分是纯命令行的 SVN。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-03T10:26:46.627

对此的“标准”程序是这样的（原谅 SVN 语法，我最近一直在使用[Bazaar](http://en.wikipedia.org/wiki/Bazaar_%28software%29)）：

```
echo config > database.xml.template
svn add database.xml.template
svn ignore database.xml
svn commit 
```

然后在每个人的开发机器上：

```
svn checkout
cp database.xml.template database.xml
...edit database.xml... 
```

当他们承诺时，

```
echo foo > someotherfile
svn commit 
```

该`database.xml`文件不会被添加到 Subversion。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-03T10:22:25.950

您应该在存储库中存储一个模板，而不是您需要在本地修改的实际文件。

这样，您可以在需要时重建原始文件，而不必冒险将文件存储到不应该存在的存储库中。

不， svn:ignore 在这里帮不了你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T08:03:35.223

我的 2 美分：首先，您需要确保是否有任何（简单的）方法可以为参与项目的所有开发人员协调您的路径。这可能是相同的相对目录结构或应用程序中的某个薄层，它支持一些 shell 变量或诸如 $home、%USERPROFILE% 等。随着时间的推移，这将比让每个开发人员处理它自己的未版本化配置和这也是 IDE 试图提供的。

一般来说，版本控制配置文件对我来说非常好，这只是开发人员花在设置上的时间，不应该意外丢失。

# iphone - 在另一个视图上显示 UIViewController/UIView

> ID：816745
> 
> 赞同：4
> 
> 时间：2009-05-03T10:24:50.810
> 
> 标签：iphone, uiview, uiviewcontroller

我正在尝试创建一个选择器控制器，其上方有一个“完成”按钮，以显示在另一个视图中的表单上。

我创建了 UIViewController 的子类，并使用 IB 添加了工具栏和选择器视图。这看起来很好，通过复制 UICatalog 中的示例，我可以让它显示所需的值，我可以监听选择等。

[替代文字 http://web.me.com/gareth.davis/so/settlement_picker_ui.png](http://web.me.com/gareth.davis/so/settlement_picker_ui.png)

在上面，我将视图的背景颜色设置为 alpha 0.0。我还尝试将它自身的视图的 alpha 设置为 0.0，这只是显示一个完全透明的视图。

[替代文字 http://web.me.com/gareth.davis/so/picker_running_in_app.png](http://web.me.com/gareth.davis/so/picker_running_in_app.png)

以上是显示在我的表单顶部的视图控制器，使用：

```
 [self presentModalViewController:settlementPickerViewController                         
                        animated:YES]; 
```

除了尝试设置视图的各种 alpha 属性之外，我还尝试更改视图的高度，以便不需要透明部分，麻烦的是视图随后位于屏幕的一半。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T10:57:26.637

解决方案似乎不是使用 UIViewController 而是一个简单的自定义 UIView 很好地完成了这项工作。

我在 awakeFromNib 方法中使用了 Haentz 的颜色设置：

```
- (void)awakeFromNib {
    picker.delegate = self;
    self.backgroundColor = [UIColor clearColor];    
} 
```

请注意，您必须实现这一点，而不是使用 x-code 模板为您提供的 initWithFrame 方法，因为 nib 控制的视图不使用 initWithFrame （来自苹果文档）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T16:54:52.153

可能我只是不明白，但我不完全明白这里有什么问题。在底部截图中，UI 元素是否应该是透明的，没有上面的白色区域？您需要在 UIViewController 中适当地设置 UIView 的框架，我想您可能必须将背景颜色设置为透明：

```
self.view.backgroundColor = [UIColor clearColor]; 
```

我不确定，因为我从不使用 IB，但可以将基本视图的背景颜色的 Alpha 值设置为 0。不是视图本身的 alpha，而是背景颜色的 alpha。

# php - 在浏览器上显示调整大小的图像

> ID：816752
> 
> 赞同：0
> 
> 时间：2009-05-03T10:28:12.113
> 
> 标签：php, html

下面我的 PHP 代码在浏览器上显示了一个原始大小为 300x300 的图像。

```
<?
$location="http://localhost/folwer.bmp ";   
header("Location:  $location");
?> 
```

但我需要在浏览器上将其显示为 120x240 或任何其他尺寸。如何在不使用 PHP 调整原始图像大小的情况下做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T11:33:18.090

使用此[页面](http://www.white-hat-web-design.co.uk/articles/php-image-resizing.php)上的类（将其保存为服务器上的 SimpleImage.php）然后使用：

```
<?php
   header('Content-Type: image/jpeg');
   include('SimpleImage.php');
   $image = new SimpleImage();
   $image->load($location);
   $image->resize(120, 240);
   $image->output();
?> 
```

几点评论：

为此，$location 变量必须具有服务器上图像的路径，而不是 URL。

这会将图像的大小调整为宽 120 像素，高 240 像素。您可能需要 240 x120。

我不确定这是否适用于 bmp 文件。无论如何，你在做什么处理 bmp 文件？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-03T13:00:53.090

旁注：您需要将图像更改为**PNG**、**JPG**或**GIF**，因为**BMP**不是***完全支持的 Web 浏览器图像格式***。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T10:39:05.207

只要您只将图像交给浏览器，您就无法控制它。不过，您可以将其包装在一个简单的 HTML 文件中并在标签上设置`width`and`height`属性。`<img>`

如果您已经使用它在网页中显示图像，那么您可以在`<img>`那里更改标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T11:18:19.263

用这个替换你的脚本：

```
<?php
$location = '/flower.bmp';
echo '<img src="'.htmlspecialchars($location).'" width="120" height="240">'; 
```

这会生成一个带有适当图像标记的 HTML 页面，该页面会以适当的大小加载flower.bmp。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-05T18:43:10.673

只需复制图像并[调整](http://abcoder.com/php/problem-with-resizing-corrupted-images-using-php-image-functions/)其大小。

# javascript - jQuery：需要一些帮助.. .animate 的回调函数不起作用

> ID：816754
> 
> 赞同：0
> 
> 时间：2009-05-03T10:29:33.607
> 
> 标签：javascript, jquery, callback

我想在我的动画插件中添加某种反弹效果，但它不起作用。根本不调用回调：

```
$(function() {
    var offset = $("#first").offset();
    var position = $(window).scrollTop();
    $(window).scroll(function() {
      var scroll = $(window).scrollTop();
      if (scroll>position) {
        $("body")
          .animate({
            scrollTop: offset.top + $("#first").innerHeight() + 150
          },
          1000,
          "easeInOutQuart",
          function() {
             $("body").animate({
              scrollTop: offset.top - 150
            },
            1000,
            "easeOutBounce"
            )
          })
      }
    })
  }) 
```

好的..这是我的HTML代码..我不知道为什么你的工作很好..但我的不是.. $('html') 不起作用但你的工作正常..

```
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Bounce Test Pad</title>
<link rel=stylesheet href="index.css" type= "text/css" />
<script type="text/javascript" src ="jquery-1.3.2.js"></script>
<script type = "text/javascript" src="jquery.easing.1.3.js"></script>
</head>
<body>
    <img id="lightbulb" src = "img/veioza.png">
    <div id="wrapper">
        <img id="first"  class="images" src="img/nike.jpg" />
        <img id ="second" class = "images" src="img/golden.jpg" />
        <img id = "third" class ="images" src ="img/a.jpg" />
    </div>
<script type="text/javascript">
    $(window).resize(function() {
        centerIt();
    });
    $(function() {
        centerIt();
    })
    function centerIt() {
        var viewportWidthSize = window.innerWidth;
        var pixels = (viewportWidthSize / 2) - $("#first").width() / 2;
        $("#wrapper img").css("left",  pixels);
    };

    $(function() {
        var offset = $("#first").offset();
        var prevpos = $(window).scrollTop();
        var animating = false;
        $(window).scroll(function() {
            var curpos = $(window).scrollTop();
            if (curpos>prevpos && !animating) {
                $('html').animate(
                        {scrollTop: offset.top + $("#first").height()},
                        1000,
                        "easeInOutQuart"
                    )
            }
            animating = true;
        })
    })
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T13:12:18.023

AnhTu 关于引发滚动事件的动画是正确的。

这是一个固定的演示： http: [//jsbin.com/alede](http://jsbin.com/alede)（您可以在此处编辑演示：http: [//jsbin.com/alede/edit](http://jsbin.com/alede/edit)）

您必须添加代码以防止在动画仍在发生时重新设置动画：

```
var status = $('#status');
var offset = $("#downcontent").offset();
var height = $("#downcontent").height();
var animating = false;
var prevpos = $(window).scrollTop();

$(window).scroll(function(){
  var curpos = $(window).scrollTop();
  if (curpos > prevpos && !animating) {
    $('html').animate(
      {scrollTop: offset.top + height},
      1000,
      "easeInOutQuart",
      function(){
        $('html').animate(
          {scrollTop: offset.top},
          1000,
          "easeOutBounce",
          function(){
            animating = false;
            status.html('Both animations finished.<br />');
          }
        );
        status.html('First animation finished.<br />Second animation started<br />');
      }
    );
    animating = true;
    status.html('First animation started<br />');
  }
  prevpos = curpos;
}); 
```

**编辑**

好的，我用您的 HTML 代码创建了另一个演示。我稍微修复了 JavaScript 并添加了一些 CSS 规则：http: [//jsbin.com/oqapa](http://jsbin.com/oqapa)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T11:40:38.413

不使用回调来做

```
if (scroll>position) {
    $("body")
      .animate({
        scrollTop: offset.top + $("#first").innerHeight() + 150
      },1000,"easeInOutQuart")
      .animate({
        scrollTop: offset.top - 150
      },1000,"easeOutBounce")
    })
 } 
```

但我认为你必须绑定到其他事件。因为当您为 body 设置动画时，它可能会引发事件 window.scroll

# apache-flex - Flex 自定义组件

> ID：816757
> 
> 赞同：0
> 
> 时间：2009-05-03T10:36:49.567
> 
> 标签：apache-flex, components

我红色我可以创建“MXML 组件”和“AS3 组件”。这两种方法都使用现有组件作为它们的基础。问题：如果我不能扩展任何现有组件（因为我需要完全不同的东西）怎么办？我是否必须使用（商业）Flash 创作环境从头开始创建组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T12:30:01.853

> 如果我不能扩展任何现有组件（因为我需要完全不同的东西）怎么办？

您可以选择创建自己的组件。Adobe 的网站上提供了足够的文档。看：

*[自定义 Flex 组件](http://livedocs.adobe.com/flex/3/html/intro_1.html#110674)

*[自定义 Actionscript 组件](http://livedocs.adobe.com/flex/3/html/basic_as_1.html#165449)

> 我是否必须使用（商业）Flash 创作环境从头开始创建组件？

您不需要 Flex Builder 3 来创建基于 AS3/MXML 的组件。您可以在任何编辑器中执行此操作。您需要的是免费的 SDK，用于编译这些。

# algorithm - 使用数组实现 4 堆

> ID：816770
> 
> 赞同：1
> 
> 时间：2009-05-03T10:45:11.637
> 
> 标签：algorithm, heap

当使用数组存储所有元素时，您使用什么样的数学来遍历 4 堆？具体来说，如何找到特定叶子的父节点的索引？

假设我有以下数组：

0|1|2|3|4|5|6|7|8|9|10|... 等

然后从堆中构建堆，其中 1 是根，2..5 是它的孩子，6..9 是 2 的孩子等等。

如果我需要找到（例如）6 的父母，我需要的数学究竟是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T11:42:44.197

首先是一个简单的观察。根在*1*，所以所有孩子都从*2*开始。在索引*i*之前，堆中有*i-1*个顶点（请记住，索引 0 不是顶点！），每个顶点都有 4 个子节点。所以第*i*^个孩子将在*2+4*(i-1)*到*2+4*i-1*例如，*1*的孩子是*2+4*0=2*到*2+4*0+3=5*。

```
def son_(i):
    return range(2+4*(i-1),2+4*i)
for i in range(1,10): print i,son_(i) 
```

输出

```
1 [2, 3, 4, 5]
2 [6, 7, 8, 9]
3 [10, 11, 12, 13]
4 [14, 15, 16, 17]
5 [18, 19, 20, 21]
6 [22, 23, 24, 25]
7 [26, 27, 28, 29]
8 [30, 31, 32, 33]
9 [34, 35, 36, 37] 
```

没有洞，看。

如果 first_son(i)=2+4i 和 last_son(i)=2+4i+3=4(i+1)+1，我们有那个father(n)=floor((n-2)/4)+1 . （+1 是使数组从 1 开始）

让我们测试一下：

```
def father_(n):
    return (n-2)/4+1
for i in range(2,20): print i,father_(i) 
```

输出：

```
2 1
3 1
4 1
5 1
6 2
7 2
8 2
9 2
10 3
11 3
12 3
13 3
14 4
15 4
16 4
17 4
18 5
19 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T12:22:53.023

要查找任何孩子的父母（除了 1，它没有父母）：

```
parent = int((child + 2) / 4) 
```

要查找父母的第一个和最后一个孩子：

```
child_first = parent * 4 - 2
child_last  = parent * 4 + 1 
```

您可以在操作中看到这一点，因为在每个级别，您添加的元素数量是上一级别的四倍：

```
 1           (   1)
  2 thru    5 (   4)
  6 thru   21 (  16)
 22 thru   85 (  64)
 86 thru  341 ( 256)
342 thru 1365 (1024)

Level 1:
1 -> 2 3 4 5

Level 2:
2 ->  6  7  8  9
3 -> 10 11 12 13
4 -> 14 15 16 17
5 -> 18 19 20 21

Level 3:
 6 -> 22 23 24 25
 7 -> 26 27 28 29
 8 -> 30 31 32 33
 9 -> 34 35 36 37
10 -> 38 39 40 41
11 -> 42 43 44 45
12 -> 46 47 48 49
13 -> 50 51 52 53
14 -> 54 55 56 57
15 -> 58 59 60 61
16 -> 62 63 64 65
17 -> 66 67 68 69
18 -> 70 71 72 73
19 -> 74 75 76 77
20 -> 78 79 80 81
21 -> 82 83 84 85 
```

```
Level 4:
 22 ->  86  87  88  89
 23 ->  90  91  92  93
 24 ->  94  95  96  97
 25 ->  98  99 100 101
 : : : :
 82 -> 326 327 328 329
 83 -> 330 331 332 333
 84 -> 334 335 336 337
 85 -> 338 339 340 341 
```

例子是：

```
parent of 342 = int(344/4) = 86 (same for 343,344,345).
parent of 346 = int(348/4) = 87 (same for 347,348,349).
first child of 21 = 21 * 4 - 2 = 82
last  child of 21 = 21 * 4 + 1 = 85 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T11:01:24.857

您需要整数除法和乘法。例如，6 的父级是`1+((6-1)/4) = 2`。5 的父母是`1+((5-1)/4) = 2`. 10 的父母是`1+((10-1)/4) = 3`，等等 2 的孩子是`2+4*(2-1)..(2+4*(3-1))-1 = 6..9`。

# wpf - WPF 是 ECMA 标准库吗？

> ID：816780
> 
> 赞同：0
> 
> 时间：2009-05-03T10:52:11.900
> 
> 标签：wpf, standards-compliance

WPF 是 ECMA 标准库吗？或者它只是 MS .net 实现的一部分？请问有什么参考吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T10:57:16.630

它不是。

C# 和 CLR 是 ECMA，但 WPF 不是。

更详细地说，BCL 是 ECMA，但 FCL 不是。

WPF 和 WinForms 应该是 FCL。

# git - 将 git 的分支名称附加到命令提示符

> ID：816790
> 
> 赞同：21
> 
> 时间：2009-05-03T10:58:54.007
> 
> 标签：git, bash, shell

我想使用其中一个 Git-completion.bash 功能，但我无法自定义我想要的外观。这是我的 .bash_profile 的相关部分：

```
source ~/.git-completion.bash

function prompt
{
local WHITE="\[\033[1;37m\]"
local GREEN="\[\033[0;32m\]"
local CYAN="\[\033[0;36m\]"
local GRAY="\[\033[0;37m\]"
local BLUE="\[\033[0;34m\]"
export PS1="
${GREEN}\u${CYAN}@${BLUE}\h ${CYAN}\w $(__git_ps1 '(%s)') ${GRAY}
$ "
}
prompt 
```

并且它不显示分支名称。

但是，如果我将上面的导出 PS1 替换为下面的，它会按预期工作：

```
export PS1='\w$(__git_ps1 "(%s)") > ' 
```

我想这是一些撇号/引号问题。

我应该如何更正第一个版本以使其正常工作？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-03T11:22:06.587

获得正确引用的诀窍是将所有内容都用双引号引起来，但`$(__git_ps1 "(%s)")`单引号除外。

```
source ~/.git-completion.bash
function prompt
{
local WHITE="\[\033[1;37m\]"
local GREEN="\[\033[0;32m\]"
local CYAN="\[\033[0;36m\]"
local GRAY="\[\033[0;37m\]"
local BLUE="\[\033[0;34m\]"
export PS1="
${GREEN}\u${CYAN}@${BLUE}\h ${CYAN}\w"' $(__git_ps1 "(%s)") '"${GRAY}"
}
prompt 
```

另一种解决方案是在问题的代码中`$(`替换为。`\$(`

Background information: Two substitutions take place: first at `export PS1="..."` time, and later when the prompt is displayed. You want to execute `__git_ps1` each time the prompt is displayed, so you have to make sure that the first substitution keeps `$(...)` intact. So you write either `'$(...)'` or `"\$(...)"`. These are the two basic ideas behind the solutions I've proposed.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-03T11:09:57.100

不确定，但[vcprompt](http://vc.gerg.ca/hg/vcprompt/)可能会更好地为您解决问题？

# javascript - 是否有任何用于类似 stackoverflow 的投票的 Ajax（原型或 JQuery 插件）示例？

> ID：816808
> 
> 赞同：2
> 
> 时间：2009-05-03T11:14:24.903
> 
> 标签：javascript, ajax, jquery, jquery-plugins, prototypejs

任何用于实现投票的好 ajax 示例，类似于 stackoverflow.com 的向上和向下按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T11:21:34.623

您创建一个投票页面，例如 yoursite.com/vote?postid=1234&direction=up ，将投票保存在数据库中。然后创建用于投票的按钮或链接，并在用户单击链接时执行 Ajax 请求：

jQuery：

```
$.post("vote", { postid: the_id, direction: "up" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-02-20T03:13:41.800

您可以使用这个：[http](http://www.technabled.com/2011/02/pulse-lite-reddit-ajax-up-down-voting.html) ://www.technabled.com/2011/02/pulse-lite-reddit-ajax-up-down-voting.html 披露：我是开发人员。

# .net - 我需要在我的 Dispose 方法中调用 GC.KeepAlive(this) 吗？

> ID：816818
> 
> 赞同：5
> 
> 时间：2009-05-03T11:22:59.783
> 
> 标签：.net, memory-management

在[这个问题](https://stackoverflow.com/questions/792660/is-gc-suppressfinalize-guaranteed)中，@Jon skeet 引用了权威 Chris Brumme 的这篇[旧博客文章](http://blogs.msdn.com/cbrumme/archive/2003/04/19/51365.aspx)。

我想知道，我是否需要`GC.SuppressFinalize(this)`使用 a来跟踪所有调用，`GC.KeepAlive(this)`以避免在处理程序在大量多线程应用程序中运行期间可以调用终结器的奇怪竞争条件？

如果是这样，你能想出一个暴露这个错误的示例程序吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-03T11:30:21.387

不`GC.KeepAlive`。实际上什么也没做；其目的是“欺骗”运行时以防止特定对象在方法开始和调用`GC.KeepAlive`.

任何方法调用都会以这种方式使对象保持活动状态：您可以将其传递给`Console.WriteLine`、 call `ToString`，甚至`GC.SuppressFinalize`...。

（或者正如 MSDN 所说：

> KeepAlive 方法除了延长作为参数传入的对象的生命周期外，不执行任何操作并且不会产生任何副作用。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-11-11T03:10:48.027

最近一位同事问我这个问题，并在我的博客上发布了答案以及示例代码：

[http://nitoprograms.blogspot.com/2009/08/q-if-dispose-calls-suppressfinalize-is.html](http://nitoprograms.blogspot.com/2009/08/q-if-dispose-calls-suppressfinalize-is.html)

您可能还对我的其他 Disposable 博客文章感兴趣，其中一篇探讨了何时需要 SuppressFinalize 或 KeepAlive。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T11:34:41.517

只是好奇，在什么情况下会出现问题？假设 Dispose() 方法超过了它引用对象的任何成员的点。终结器释放对象会出现什么问题？

# php - MySQL：全文索引以前的记录？

> ID：816819
> 
> 赞同：1
> 
> 时间：2009-05-03T11:24:02.777
> 
> 标签：php, mysql, full-text-search

在我已经有一堆记录之后，我在我的三个列上添加了一个 FULLTEXT 索引......这是否意味着 FULLTEXT 不会索引它们并且只会索引在添加 FULLTEXT 索引之后插入的记录？如果是这样，无论如何要重新索引整个数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T11:32:40.837

当您执行 ALTER TABLE ADD INDEX 时，旧记录会立即被编入索引（新记录一插入就会被编入索引）。FULLTEXT 索引也是如此。

但是请注意，有时（例如，当您更改选项 ft_min_word_len、ft_max_word_len 或 ft_stopword_file 时）您必须重建 FULLTEXT 索引，请参阅[http://dev.mysql.com/doc/refman/5.1/en/fulltext-fine- Tuning.html](http://dev.mysql.com/doc/refman/5.1/en/fulltext-fine-tuning.html)了解详情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T11:42:46.257

确保索引与其索引的数据一致是 MySQL 的责任，而不是您的责任。

当您在现有数据上添加索引时，MySQL 将根据该现有数据构建索引。

FULLTEXT 索引也不例外。

如果您怀疑您的表已经以某种方式损坏，或者您对 MySQL 构建索引的方式进行了一些其他高级调整，您应该只需要重建索引。

# bash - 通过 cut 命令使用空格作为分隔符

> ID：816820
> 
> 赞同：367
> 
> 时间：2009-05-03T11:24:23.133
> 
> 标签：bash, unix, cut

我想使用空格作为`cut`命令的分隔符。

我可以为此使用什么语法？

* * *

## 回答 #1

> 赞同：412
> 
> 时间：2009-05-03T11:28:19.490

```
cut -d ' ' -f 2 
```

其中 2 是您想要的以空格分隔的字段的字段编号。

* * *

## 回答 #2

> 赞同：214
> 
> 时间：2013-09-28T16:59:24.447

通常，如果您使用空格作为分隔符，您希望将多个空格视为一个，因为您会解析将某些列与空格对齐的命令的输出。（和谷歌搜索带我到这里）

在这种情况下，单个`cut`命令是不够的，您需要使用：

```
tr -s ' ' | cut -d ' ' -f 2 
```

或者

```
awk '{print $2}' 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2015-05-02T03:52:49.097

^(补充现有的有用答案；向[QZ Support 致敬](https://stackoverflow.com/users/3196753/qz-support)，鼓励我发布单独的答案：)

**两种不同的机制**在这里发挥作用：

*   (a)`cut` *本身*`-d`是否需要将传递给选项的分隔符（在这种情况下为空格）作为*单独的参数*，或者是否可以将其*直接*附加到`-d`.

*   (b) 在将参数传递给被调用的命令之前， *shell通常如何解析参数。*

(a) 引用了[POSIX 公用事业指南](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap12.html)（强调我的）

> 如果标准实用程序的 SYNOPSIS 显示带有*强制*选项参数的选项 [...]，则符合要求的应用程序**应为该选项及其选项参数使用*单独***的参数。**但是**，符合要求的实现还应***允许*应用程序在同一参数字符串中指定选项和选项参数，而无需插入字符**。

换句话说：在这种情况下，**因为`-d`的 option-argument 是*强制***的，**您可以*选择*是否将分隔符指定为**：

*   (s) EITHER: 一个***单独*的论点**
*   (d) OR：作为***直接附加*到`-d`**的值。

一旦你选择了 (s) 或 (d)，重要的是*shell*的字符串文字解析 - (b) -

*   使用方法**(s)**，以下所有形式都是等效的：

    *   `-d ' '`
    *   `-d " "`
    *   `-d \<space> # <space> used to represent an actual space for technical reasons`
*   使用方法**(d)**，以下所有形式都是等效的：

    *   `-d' '`
    *   `-d" "`
    *   `"-d "`
    *   `'-d '`
    *   `d\<space>`

等效性由*shell*的字符串文字处理解释：

上述所有**解决方案在看到它们时都会产生*完全相同的字符串*（在每个组中）`cut`**：

*   **(s)** :`cut`将`-d`, 作为它*自己的*参数，后跟一个包含空格字符的*单独*`\`参数 - 不带引号或前缀！。

*   **(d)** : `cut`sees`-d` *加*一个空格字符 - 不带引号或`\`前缀！- 作为*同一*论点的一部分。

基于***shell*****解析*****字符串文字*****的方式，各个组中的形式最终相同的原因是双重的****：**

 ***   shell 允许通过**一种称为*****quoting****的机制按原样*指定文字，它可以采用*多种形式*： ***   **单引号**字符串：里面的内容按`'...'`字面*意思理解*并形成*一个*参数
    *   **双引号**字符串：里面的内容`"..."`也形成一个*单一*的参数，但受*插值*的影响（扩展变量引用，例如`$var`，命令替换（`$(...)`或``...``），或算术扩展（`$(( ... ))`）。
    *   **`\`*-单个*字符的引用：**单个字符`\`前面的字符会导致该字符被解释为文字。** 
***   引用由**[引号删除](http://wiki.bash-hackers.org/syntax/quoting)**来补充，这意味着一旦 shell 解析了命令行，它就会**从参数**（封闭或或实例）***中删除*****引号字符 - 因此，被调用的命令永远不会看到引号字符**。`'...'``"..."``\`**

 ***** * *

## 回答 #4

> 赞同：45
> 
> 时间：2009-05-03T20:47:35.993

你也可以说：

```
cut -d\  -f 2 
```

请注意，反斜杠后面有两个空格。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-04-22T13:03:08.837

我[刚刚发现](https://stackoverflow.com/questions/29796979/read-line-containing-string-bash/29797044?noredirect=1#comment47722859_29797139)你也可以使用`"-d "`：

```
cut "-d " 
```

### 测试

```
$ cat a
hello how are you
I am fine
$ cut "-d " -f2 a
how
am 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-05-14T11:38:21.110

如果数据有多个空格，你不能用 cut 轻松做到这一点。我发现标准化输入以便于处理很有用。一个技巧是使用 sed 进行标准化，如下所示。

```
echo -e "foor\t \t bar" | sed 's:\s\+:\t:g' | cut -f2  #bar 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-08-01T16:12:16.950

[scut](http://moo.nac.uci.edu/~hjm/scut_cols_HOWTO.html)，一个类似于 cut 的实用程序（我做的更聪明但更慢），可以使用任何 perl 正则表达式作为中断标记。在空白处打断是默认设置，但您也可以在多字符正则表达式、替代正则表达式等上打断。

```
scut -f='6 2 8 7' < input.file  > output.file 
```

所以上面的命令将打破空白列并按该顺序提取（基于0的）cols 6 2 8 7。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-29T06:11:06.640

我有一个答案（我承认有些令人困惑的答案）涉及`sed`、正则表达式和捕获组：

*   `\S*`- 第一个字
*   `\s*`- 分隔符
*   `(\S*)`- 第二个词 - 捕获
*   `.*`- 线路的其余部分

作为`sed`表达式，需要对捕获组进行转义，即`\(`and `\)`。

返回捕获组的`\1`副本，即第二个单词。

```
$ echo "alpha beta gamma delta" | sed 's/\S*\s*\(\S*\).*/\1/'
beta 
```

当您查看此答案时，它有些令人困惑，并且您可能会想，为什么要打扰？好吧，我希望有些人可能会“啊哈！” 并将使用此模式通过单个`sed`表达式解决一些复杂的文本提取问题。

# javascript - Dojo：在 OnChange 上获取 inlineEditBox 的 ID

> ID：816825
> 
> 赞同：1
> 
> 时间：2009-05-03T11:29:09.393
> 
> 标签：javascript, dojo

我正在使用 dojo 和 dijit 并有一个 inlineEditBox 小部件。我正在尝试捕获 onchange 事件并将键/值帖子发送到 php 页面（设置到数据库中）。该值是刚刚提交的新值，可从 e.target.value 获得。这很容易。

我希望键值是 inlineEditBox 小部件的 id。我如何以编程方式访问它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-11-29T06:54:30.183

由于 InlineEditBox 是一个小部件，因此最好不要监视 DOM 级别的事件。相反，为什么不连接到 InlineEditBox.onChange？例如：

```
<span dojoType="dijit.InlineEditBox" ...>
     <script type="dojo/connect" event="onChange" args="value">
          console.log(this.id + " changed to value" + value);
     </script>
</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:06:26.197

```
<span data-dojo-type="dijit.InlineEditBox" data-dojo-props="onChange:function(){ applyChange(arguments[0]);}" width="70px" title="Admin Notes">Database Value</span>
<script>
function applyChange(newValue){
    console.log(newValue);
}
</script> 
```

# iphone - 从 UIColor 中提取 rgb

> ID：816828
> 
> 赞同：80
> 
> 时间：2009-05-03T11:31:36.843
> 
> 标签：iphone, core-graphics, uicolor, cgcolor

以前见过这个问题，但我的例子似乎不起作用。

```
const CGFloat *toCol = CGColorGetComponents([[UIColor greenColor] CGColor]); 
```

使用 GDB 查看该数组是空的。有什么提示吗？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2009-05-03T12:12:53.860

您提供的代码示例应该可以工作。

尝试这个：

```
UIColor uicolor = [[UIColor greenColor] retain];
CGColorRef color = [uicolor CGColor];

int numComponents = CGColorGetNumberOfComponents(color);

if (numComponents == 4)
{
  const CGFloat *components = CGColorGetComponents(color);
  CGFloat red = components[0];
  CGFloat green = components[1];
  CGFloat blue = components[2];
  CGFloat alpha = components[3];
}

[uicolor release]; 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2011-10-21T16:22:09.917

在 iOS 5 中，您可以使用：

```
UIColor *color = [UIColor orangeColor];
CGFloat red = 0.0, green = 0.0, blue = 0.0, alpha = 0.0;

if ([color respondsToSelector:@selector(getRed:green:blue:alpha:)]) {
    [color getRed:&red green:&green blue:&blue alpha:&alpha];
} else {
    const CGFloat *components = CGColorGetComponents(color.CGColor);
    red = components[0];
    green = components[1];
    blue = components[2];
    alpha = components[3];
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-22T10:26:29.773

这是一个全面的解决方案，它还考虑了非 RGB 颜色，例如 [UIColor blackColor]

```
UIColor *color = [UIColor blackColor];
CGFloat red = 0.0, green = 0.0, blue = 0.0, alpha = 0.0;
// iOS 5
if ([color respondsToSelector:@selector(getRed:green:blue:alpha:)]) {
     [color getRed:&red green:&green blue:&blue alpha:&alpha];
} else {
     // < iOS 5
     const CGFloat *components = CGColorGetComponents(color.CGColor);
     red = components[0];
     green = components[1];
     blue = components[2];
     alpha = components[3];
}

// This is a non-RGB color
if(CGColorGetNumberOfComponents(color.CGColor) == 2) {
    CGFloat hue;
    CGFloat saturation;
    CGFloat brightness;
    [color getHue:&hue saturation:&saturation brightness:&brightness alpha:&alpha];

} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2011-08-07T16:42:30.107

只需使用 memcpy：

```
CGColorRef tmpColor = [[currentColorView backgroundColor] CGColor];
CGFloat newComponents[4] = {};
memcpy(newComponents, CGColorGetComponents(tmpColor), sizeof(newComponents));
// now newComponents is filled with tmpColor rgba data 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-21T16:32:14.260

感谢威尔斯特的指导。对于任何使用灰度颜色（使用创建`colorWithWhite:alpha:`）的人，下面的代码示例将让您计算出白色值（HSV 方法不适用于以这种方式创建的颜色）。

```
CGFloat red = 0.0, green = 0.0, blue = 0.0, alpha = 0.0, white = 0.0;

// This is a non-RGB color
if(CGColorGetNumberOfComponents(self.color.CGColor) == 2) {
    [self.color getWhite:&white alpha:&alpha];
}
else {
    // iOS 5
    if ([self.color respondsToSelector:@selector(getRed:green:blue:alpha:)]) {
        [self.color getRed:&red green:&green blue:&blue alpha:&alpha];
    } else {
        // < iOS 5
        const CGFloat *components = CGColorGetComponents(self.color.CGColor);
        red = components[0];
        green = components[1];
        blue = components[2];
        alpha = components[3];
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-07-03T16:38:01.313

结帐[uicolor-utilities](https://github.com/ars/uicolor-utilities)。似乎是一个非常好的库，可以使用 UIColor 执行此操作以及许多其他有用的事情。例如，使用这个库，您可以编写：

```
CGFloat red = [myColor red]; 
```

# java - 有没有办法释放饱和的连接池？

> ID：816835
> 
> 赞同：3
> 
> 时间：2009-05-03T11:34:38.617
> 
> 标签：java, database, connection-pooling, ibm-midrange, open-esb

我正在 glassfish 服务器上使用 open esb。我们有一个与 as400 数据库一起使用的连接池。

每隔几天我们就会收到此错误：分配连接时出错。原因：使用中的连接等于 max-pool-size 和过期的 max-wait-time。无法分配更多连接

缓解 cp 的最佳方法是重新启动服务器。我们还设法设置了另一个具有相同属性的 cp。

我的问题是：有没有办法主动“告诉” cp 释放其所有打开的连接？

干杯，伊兰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T13:10:59.180

在此之前，请弄清楚连接未正确释放的原因。听起来好像有一个地方被遗忘了（你在 finally 子句中都有 close() 吗？）。

我强烈推荐 Michael Nygards “放开它！” 为软件生产做好准备的技术。

编辑#1：如果我正确理解您的描述，您的后端程序会进入 QSYSOPR 中的 MSGW，这会导致连接挂起，直到给出响应，在您的情况下这几乎没有。是否可以选择使用默认回复为“C”的配置文件，允许故障作为异常传播给您？

否则，您可以为连接或整个服务器设置 24 小时的超时期限？然后至少连接最终将被关闭。此解决方案虽然无法扩展，但可能会使开发更容易。

请注意，也可以有一个单独的监视线程定期查找 MSGW，并在获取回调堆栈以进行事后分析后自动向他们发送答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T14:48:05.763

如果您可以在几秒钟内确定“正常”连接使用的上限，则可以使用 GlassFish 的连接泄漏检测机制。在 GF 的管理控制台（我使用 v2.1）中，转到 Resources / JDBC / Connection Pools / [your cp] / Advanced 并在 Connection Settings 下将 Leak Reclaim 设置为 true 并为 Leak Timeout 设置以秒为单位的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-09-27T10:23:00.983

我遇到了这个问题，结果是事务管理。在类中添加 @TransactionManagement(TransactionManagementType.BEAN) 解决了这个问题。就我而言，我不想要任何交易代码，但您的里程可能会根据您的要求而有所不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T20:03:12.323

您在对 Andersen 的评论中提到您收到了 AS400 消息。您可以设置对这些消息的自动答复，以避免让异常消息处于打开状态。查看 AS400 上的 WRKRPYLE（工作回复列表条目）命令以自动回复这些错误并避免挂起。

# c# - C# 多个 Linq 查询搜索问题

> ID：816838
> 
> 赞同：1
> 
> 时间：2009-05-03T11:36:13.760
> 
> 标签：c#, linq, linq-to-sql

我有多个 linq 查询，用于根据每个查询的单个特定条件搜索信息数据库。例如，通过 ID 或姓名等。

目前，用户只能通过一种查询方式进行搜索。问题是我希望用户能够使用多个条件进行搜索，而不必编写新的查询来组合来自多个查询的条件。

例如：

下面我有一个查询，它根据存储在其下的部门名称返回一组问题，另一个查询根据存储问题的模块标题返回一组问题。由于目前用户只能按部门名称或模块标题搜索 - 例如计算机科学或分布式系统，我想更改它以便用户可以指定如下内容：

返回所有属于 DepartmentName == Computer Science && ModuleTitle == Distributed Systems 的问题。

帮助将不胜感激。

这是当前代码：

```
//Department Name Query
public static IQueryable SearchByDepartmentNameInfo(string deptName)
    {

        ExamineDataContext dc = new ExamineDataContext();

        var queryResult = from q in dc.GetTable<Question>()
                          where q.Topic.Module.Department.DepartmentName.Equals(deptName)
                          join s in dc.Solutions
                          on q.QuestionID equals s.QuestionID
                          into qs // note grouping        
                          select new
                          {
                              Module = q.Topic.ModuleTitle,
                              Topic = q.TopicName,
                              Question = q.QuestionText,
                              QuestionType = q.QuestionType,
                          };
        return queryResult;
    }

    //Module Title Query
    public static IQueryable SearchByModuleTitleInfo(string modTitle)
    {

        ExamineDataContext dc = new ExamineDataContext();

        var queryResult = from q in dc.GetTable<Question>()
                          where q.Topic.Module.ModuleTitle.Equals(modTitle)
                          join s in dc.Solutions
                          on q.QuestionID equals s.QuestionID
                          into qs // note grouping        
                          select new
                          {
                              Module = q.Topic.ModuleTitle,
                              Topic = q.TopicName,
                              Question = q.QuestionText,
                              QuestionType = q.QuestionType,
                          };
        return queryResult;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T11:41:12.250

您可以将它们组合成一个查询，仅在设置条件时应用条件：

```
where (cond1 == "" || row.field1 == cond1)
&& (cond2 == "" || row.field2 == cond2)
... 
```

因此，如果您搜索 cond1="" 和 cond2="somevalue"，实际上您只是在搜索 cond2。但是，如果您同时指定两者，它将选择两个条件的交集。

添加一些检查以确保至少指定了一个条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T11:52:02.037

您是否考虑过让函数接受 IQueryable 作为参数，而不是在其中硬编码 GetTable？这将允许您通过将结果从一个函数传递到另一个函数的输入来组合查询。当然，在您评估最终结果之前，查询仍然不会执行。

# java - 在Java中选择多个文件

> ID：816845
> 
> 赞同：0
> 
> 时间：2009-05-03T11:41:01.923
> 
> 标签：java, file-upload

```
<input type="file"> 
```

有助于一次选择一个文件。

我需要让我的 java 应用程序的用户一次选择多个文件。

应用程序需要用户上传50-100个文件，要求用户一个一个上传这50-100个文件肯定是不可行的。我尝试在网上搜索有关选择多个文件的帮助，但没有帮助。用户只是讨厌使用小程序。所以，这个选项被排除了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T11:51:16.330

基本上，您需要为此使用 Javascript 在页面上动态创建尽可能多的文件输入元素。

对于这个问题也有多种现有的解决方案，从在服务器端和客户端都集成的解决方案到仅作为客户端的解决方案。我建议至少研究一下[YUI Uploader之类的东西。](http://developer.yahoo.com/yui/uploader/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T11:59:10.740

如果浏览器无法选择多个文件进行上传，那么 100 个 INPUT 框对用户来说仍然是一项繁重的工作。也许最好让他们选择将文件收集到档案中（例如 zip 文件），并让您的服务器在收到时解压缩它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T17:12:59.130

要创建真正的多文件上传表单，您必须使用 Flash 或 Java 小程序。另一种方法是使用 JavaScript 向表单动态添加多个输入字段，但这仍然需要用户单独选择文件。一种方法是使用[jQuery 多文件插件](http://code.google.com/p/jquery-multifile-plugin/)，但根据需要上传的文件数量，这听起来不能满足您的要求。

如果您必须坚持纯 HTML 功能，我还建议您创建某种基于 ZIP 的上传并使用服务器端提取来处理它，但这仍然需要用户执行额外的步骤，因此可能会遇到一些阻力。

在 HTML 5 中，您可以在 input 标记上设置一个“multiple”属性，该属性应该会产生您需要的行为。

# sql - Oracle中的重复行

> ID：816851
> 
> 赞同：2
> 
> 时间：2009-05-03T11:44:08.437
> 
> 标签：sql, oracle, distinct

如何防止在选择查询中选择重复行？

我有一个包含以下字段的表：

*   姓名
*   类型
*   用户1
*   用户2
*   用户3
*   日期

我的查询要求我只在用户在前端输入的时间为特定用户选择数据。假设用户输入 1，那么选择查询应该只为 user1 检索数据。

我目前正在这样做：

```
select name,type,date from table1 order by user1; 
```

但是我在结果中得到了多余的行？？

我做错了什么？如何避免这些重复的行？

请帮忙...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T11:58:24.347

我不知道我是否完全明白你的问题。但无论如何我都会尝试：

1.  如果您想根据用户输入过滤某些用户，请尝试：

    select name, type, "date" from table1 where user = [WHATEVER YOUR USER INPUTS] order by name

2.  如果您想根据用户输入选择不同的列（user1、user2、user3），请尝试：

    select name, type, "date", decode(YOUR_USER_INPUT, 1, user1, 2, user2, 3, user3) from table1 order by name

3.  如果您**只是**想要不同的结果，请尝试**选择不同的**

    从 table1 中选择不同的名称、类型、“日期”、user1、user2、user3

请提供一个例子，以便我们可以提供相应的帮助**。**祝你好运，*古德勒克*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-03T16:51:45.763

您有两个选择 SELECT DISTINCT 或使用 GROUP BY 子句。您还有一个日期列，在 Oracle 中这也意味着有时间，所以为了安全起见，您应该截断日期列。即使你知道时间不是插入截断的一部分。好的做法是，当您看到日期时，您认为它有时间。

您将遇到的下一个问题是您不能在不属于 SELECT 的列上使用 ORDER BY。

我的建议是 GROUP BY。

```
 SELECT user1, name, type, TRUNC(date) date
FROM Table1
GROUP BY user1, name, type, TRUNC(date)
ORDER BY user1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T11:49:43.883

尝试 SELECT DISTINCT

# .net - 基础商务舱：不好吗？

> ID：816852
> 
> 赞同：2
> 
> 时间：2009-05-03T11:44:17.970
> 
> 标签：.net, architecture, business-objects

我想创建我的基础业务类，例如 EntityBase，以具有一些常见的行为，例如实现用于跟踪对象更改的接口（IsNew、IsDirty）和 INotifyPropertyChanges 接口。

但是很多人说拥有一个基础业务类并从中派生所有业务对象是个坏主意。通常他们说在实体类中有表示代码是不好的。但我认为这只是一个理论。实践中有什么不好？他们说：自己试试。通常没有更多的争论。

那你们怎么看？是好还是坏？如果不好，为什么？请尝试做一个实际的人，而不是理论的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T11:54:11.610

很多人赞同[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)的理念，即一个类应该只有一个职责范围。通过将状态跟踪、渲染等构建到一个公共基类中，您肯定会违反 SRP。如果你的班级处理了很多任务，它会有很多改变的理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T11:52:39.353

这不好。我们使用这个已经好几年了，我们可以在我们的基类中放入任何足够通用的东西，以使其适用于所有继承的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T12:31:12.303

从面向对象设计的角度来看，这可能不是最优雅的解决方案，但如果要使用数据绑定，在基类中实现 INotifyPropertyChanged 通常是个好主意。通过这种方式，您可以最大程度地减少必须在所有实体中实施它的负担。

在更改跟踪的情况下，如果您想将该职责与基类分开，您应该查看[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)模式，尽管正如您在.net 应用程序中指出的那样，看到更改跟踪实现很常见。依赖于 ORM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T12:33:33.997

如果您的业务实体不需要从这些基类派生，我认为拥有一组接口和基类来实现这些接口并提供您在业务实体中想要的一些通用功能，这并不一定是坏事。这为您的实施提供了灵活性，同时提供了实施的便利。

例如，我有一个 IValidatedEntity 接口，它几乎应用于我创建的每个业务对象。它要求业务对象实现一些验证规则。但是，我的审计对象只在内部创建，我使用单元测试来确保我不能创建无效的审计对象，因此这些类不实现 IValidatedEntity 接口

我的大多数类都从 Web 获取输入并包含字符串数据，它们都派生自 XSSValidatedEntity 类（它实现了 IValidatedEntity 接口），但通过 HTML 解析器提供 XSS 检查以防止将 HTML 注入数据库。对于我的大多数类，这都可以正常工作，但在那些我想允许有限（安全）HTML 的情况下，我显然不能从这个类派生。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T12:44:07.123

您所描述的内容听起来更像是一个表示对象，但 IsDirty 和 IsNew 也可以在域模型中使用。在决定在基础对象中包含什么之前，您应该清楚地了解业务需求是什么。专注于业务对象片刻，需求会有多静态？你是否掌握了所有控制对象如何交互的规则，这些规则会改变吗？如果他们改变，多久改变一次？这对你来说可能是最具挑战性的

您可能会发现，根据应用程序，您的大部分工作应该来自实现业务流程，因此应该来自 CRUD 功能的架构。虽然很重要，但不是你努力的重点。换句话说，您的业务对象将支持业务流程的概念，而不包括 IsDirty。然后，您的数据访问层可以专注于记录的状态并确定是插入还是更新数据。

# jquery - 如何使用 Grails 框架实现 ajax 投票应用程序？

> ID：816853
> 
> 赞同：0
> 
> 时间：2009-05-03T11:45:34.703
> 
> 标签：jquery, grails, prototype, grails-plugin, voting

有什么好的代码示例或文章可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T10:19:49.667

没有可以进行“投票”的插件，因为投票是特定于域的。

在 grails 中实现一个简单的投票应用程序很容易。我会写在这里，但我需要更多关于你投票的内容、投票对象等的详细信息。

至于 ajax 部分，这与投票是正交的。要在您的应用程序中实现“ajax”，只需使用 remoteFunction 标签：[http](http://www.grails.org/Tag+-+remoteFunction) ://www.grails.org/Tag+-+remoteFunction获取一些文档。或者您可以使用 jquery 自己滚动。

# java - Maven：删除单个传递依赖

> ID：816858
> 
> 赞同：26
> 
> 时间：2009-05-03T11:47:33.030
> 
> 标签：java, maven-2, dependencies

我的项目包含一个 jar 文件，因为它被列为传递依赖项。

但是，我已经验证不仅我不需要它，而且它会导致问题，因为 jar 文件中的一个类会影响我在另一个 jar 文件中需要的一个类。

如何从传递依赖项中删除单个 jar 文件？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-03T12:11:51.537

您可以通过以下方式排除依赖项：

```
 <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring</artifactId>
                <version>2.5.6</version>
                <exclusions>
                        <exclusion>
                                <groupId>commons-logging</groupId>
                                <artifactId>commons-logging</artifactId>
                        </exclusion>
                </exclusions>
        </dependency> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-05-03T17:19:20.597

正确的方法是使用排除机制，但是有时您可能更喜欢使用以下技巧来避免在许多工件具有您希望忽略的相同传递依赖项时添加大量排除项。您无需指定排除项，而是定义一个范围为“已提供”的附加依赖项。这告诉 Maven 您将在运行时手动提供此工件，因此它不会被打包。例如：

```
 <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring</artifactId>
            <version>2.5.6</version>
    </dependency>
    <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
            <scope>provided</scope>
    </dependency> 
```

副作用：您必须指定要忽略的工件*的*版本，并且将在构建时检索其 POM；这不是常规排除的情况。如果您在防火墙后面运行私有 Maven 存储库，这对您来说可能是个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-03T12:09:36.783

您可以通过明确排除有问题的工件来做到这一点。获取包含问题的依赖项并将其标记为排除：

来自 Maven[网站](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management)：

```
<dependency>
  <groupId>group-a</groupId>
  <artifactId>artifact-a</artifactId>
  <version>1.0</version>
  <exclusions>
    <exclusion>
      <groupId>group-c</groupId>
      <artifactId>excluded-artifact</artifactId>
    </exclusion>
  </exclusions>
</dependency> 
```

# .net - .Net 中继器等效于单个对象？

> ID：816864
> 
> 赞同：5
> 
> 时间：2009-05-03T11:50:35.380
> 
> 标签：.net, webforms, repeater, custom-server-controls

有人可以尝试推荐最佳的行动理由来解决以下请求：

我已经创建了许多使用 Repeater 类作为基础的扩展类，并且喜欢这样做的灵活性、易用性和结果。我现在要做的是为单个对象（即未实现 IListSource 或 IEnumerable 的 DataSource）制作类似的自定义 Web 控件。我已经通过扩展转发器创建了我想要实现的结构，然后在设置数据源时使用 1 个项目的列表来保存对象，然后进行数据绑定。

```
e.g a rough example:

    Dim oObj as New MyObject(1)
    Dim gl As New Generic.List(of MyObiect)()
    gl.Add(oObj)
    rpt.DataSource = gl
    rpt.DataBind() 
```

这似乎是一个小技巧，我想做的是以下几点：

```
e.g new call, where my control is the new custom control:

    Dim oObj as New MyObject(1)
    myControl.DataSource = oObj 
    myControl.DataBind() 
```

我希望能够使用各种变量和属性定义此自定义控件，其结果将启用以下类型的布局：

```
<My:ObjControl ID="frm" runat="server">
    <Tabs>
        <My:Tab name="Details">
            <Items>
                <My:Item Type="Text" Label="First Name" Property="FirstName" />
                <My:Item Type="Text" Label="Last Name" Property="LastName" />
                <My:Item Type="Text" Label="Title" Property="Title" />
            </Items>
        </Tab>
        <My:Tab name="Address">
            <Items>
                <My:Item Type="Text" Label="Address 1" Property="Address1" />
                <My:Item Type="Text" Label="Address 2" Property="Address2" />
                <My:Item Type="Text" Label="Address 3" Property="Address3" />
            </Items>
        </Tab>
    </Tabs>
</My:ObjControl> 
```

此实现必须使用 WebForms 进行，尽管考虑到上述情况，使用 MVC 似乎是理想的方法。通过这样做，我想创建一个灵活的 WebControl，它使用反射（可用于实现特定接口的所有类），它将生成所需的表单，每次需要时只需要后面（上面）三行代码。

我是否应该将一个属性添加到一个自定义中继器（DataObject），该中继器接受一个对象并相应地设置 DataSource 并节省我的时间？或者，还有更好的方法？

希望这一切都有意义！

干杯，史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T12:20:26.227

您正在努力解决转发器想要一个 List 并且您想给它 1 个实例的事实。只需将其包装在一个新的 List* oObj 中）然后继续。它一直都在做。

我当然不知道他们在使用自定义服务器控件时到底发生了什么。在我看来，你又太努力了。

```
<asp:repeater id="whatever" runat=server>
   <ItemTemplate>First Name: <%# DataBinder.Eval(Container.DataItem,"FirstName") %></ItemTemplate>
</asp:repeater> 
```

# dtd - 在 DTD 中使用任何名称声明元素

> ID：816874
> 
> 赞同：3
> 
> 时间：2009-05-03T11:56:56.923
> 
> 标签：dtd, any

是否可以在我的 DTD 中声明一个可以有任何名称的元素？到目前为止，我了解到 ANY 只能用于以下数据类型：

`<!ELEMENT element-name ANY>`

任何帮助将不胜感激。

——阿里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-03T20:53:54.230

不，ANY 关键字仅适用于元素的类别。无论如何，ANY 作为*名称*的语义是什么？无论您希望得到什么，DTD 都没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T21:09:17.550

是的，但不是因为我认为你想要的原因。

请参阅 XML 1.0 规范的 3.2 元素类型声明，产品 45 和 46，位于

[http://www.xml.com/axml/target.html#elemdecls](http://www.xml.com/axml/target.html#elemdecls)

ANY 是一个 XML 关键字，是 contentspec 的一部分，意味着元素的内容可以是任何不违反 XML 规则的内容。

您可以使用名称“ANY”来命名元素类型，但在内容模型中使用时，它不会具有 ANY 关键字的语义。

# cryptography - 如何从给定的 GUID 预测下一个 GUID？

> ID：816882
> 
> 赞同：4
> 
> 时间：2009-05-03T12:01:19.863
> 
> 标签：cryptography, email, guid, cryptanalysis

我已经向我们的客户发送了 10000 封邮件，每封邮件都有一个格式的链接

```
http://example.com/LogIn?key={guid} 
```

不幸的是，`guid`我发送的是随机指南（由 生成的测试数据`Guid.NewGuid()`），所以客户都收到了无效链接......

根据我从网络服务器收到的 404，我发送了一些指南。我读过 Windows 中的 guid 生成器很弱，​​因此您可以从已有的 guid 预测下一个 guid。有谁知道怎么做？如果我能做到这一点，我可以使我发送的指南有效，这样链接就会再次起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-03T14:06:16.880

Windows 生成 GUID 的方式已经改变了好几次，互联网上许多看似可靠的建议是完全错误的（也许只是过时了，也许总是完全错误）。

上次我研究这个（几年前，可能是 XP SP2）时，我直接进入操作系统代码以查看实际发生的情况，它正在使用[安全随机数生成器](http://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator)生成一个随机数。

如果您以默认方式生成它们，我怀疑您会很幸运地从另一个预测一个 GUID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-03T04:47:10.293

首先，您需要知道它们是否符合 RFC4122，并且您需要获取版本。

# 如果是 UUIDv1，你可以预测它们

UUIDv1 由：

*   时间戳（自公历纪元以来的 100 ns 间隔）
*   A版（1）半字节
*   RFC4122 合规性的两个（或三个，lol）位（这会导致半字节在 [89ab] 中）
*   时钟 id（随机位）
*   节点 ID（常量 6 字节掩码）

您只需要遍历可能的时间戳。当心，那里有很多 100 ns 的间隔！

一些软件正在生成 UUIDv1（Grafana 仪表板 ID、Airbnb 列表等），但一些软件依赖于随机 UUID、UUIDv4。

# 如果是 UUIDv4，你可能会窃取 PRNG 上下文

正如 Nikolay «denish» Denishchenko (Kaspersky) 不久前所展示的，如果对生成 UUID 的进程具有调试访问权限，则可以窃取当前的 RC4 上下文并在其他地方复制多达 500000 个 UUID。这已经在 Microsoft Windows XP 上得到了证明（嗨，Will Dean），它使用了一个有趣的 8*RC4 机制，并且每 500000 个 UUID 只用实际熵播种。

在 Windows 10 上（它不完全是 Windows 版本，而是 .NET 框架或 rpcrt4.dll 版本），它不再是 RC4 而是 AES，大概用于 CTR 模式。大概有相同的熵重用。

有关更多信息，请查看我在那里所做的工作[https://uuid.pirate-server.com/blog/](https://uuid.pirate-server.com/blog/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T13:59:54.507

有几种不同类型的指南。类型 1 使用主机 ID（通常是 MAC 地址）、序列号以及当前日期和时间。类型 4 是完全随机的。如果它是 1 类 UUID，您可能会找出一组相当有限的可能 UUID，但即便如此，您也无法生成单个 UUID 序列，因此您将无法确定特定用户的特定 UUID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T18:17:43.130

即使您能做到，预测下一个 GUID 也是不可靠的，但如果您拥有可支配的资源，这很可能是完全不可能的。

您最好的选择是简单地将手动重定向从任何不匹配的 GUID 添加到通用页面，该页面要么解释出了什么问题，要么只是以编程方式确定它们应该在哪里结束并将它们发送到那里。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-03T12:31:51.473

GUID 的一部分是当前日期/时间。如果您碰巧按顺序收到其中两个，那么您可以知道它们的创建速度有多快，因此可以很有信心地预测序列。

# c# - Form.ShowDialog() 还是 Form.ShowDialog(this)？

> ID：816885
> 
> 赞同：42
> 
> 时间：2009-05-03T12:03:13.353
> 
> 标签：c#, .net, winforms

我听说如果我在没有指定所有者的情况下调用 form.ShowDialog()，那么可能会出现在屏幕上看不到对话框表单的情况（它将与其他窗口一起隐藏）。这是真的吗？我在没有指定所有者的情况下使用了 ShowDialog() 数百次，我从来没有遇到过任何问题。

你能解释一下在什么情况下我可以得到所描述的问题吗？

**更新：**

好吧，我做了很多实验，使用 ShowDialog()（没有指定所有者）没有遇到任何真正的意外问题。

所以我认为这只是谣言 ShowDialog() 会导致问题。如果您不同意 - 请给我一个导致问题的代码示例。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2010-01-11T23:21:30.043

`ShowDialog()`我发现vs的一个烦恼`ShowDialog(this)`。

运行TestApp，显示`newform.ShowDialog()`，单击任务栏或快速启动工具栏上的“显示桌面”，单击任务栏上的TestApp。它显示主窗体。您必须执行 Alt-Tab 才能进入您的新表单。

VS

运行TestApp，显示`newform.ShowDialog(this)`，单击任务栏或快速启动工具栏上的“显示桌面”，单击任务栏上的TestApp。它在顶部显示新表格。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-06-30T17:19:48.833

只是为了更好地理解所有者拥有的关系：

> .NET 允许一个表单“拥有”其他表单。拥有的表单对于浮动工具箱和命令窗口很有用。拥有表单的一个示例是 Microsoft Word 中的“查找和替换”窗口。当所有者窗口最小化时，拥有的窗体也会自动最小化。当拥有的表单与其所有者重叠时，它始终显示在顶部。

(c) Matthew MacDonald 的“Pro .NET 2.0 Windows 窗体和自定义控件”。

* * *

> 当**ShowDialog**显示新表单时，在当前活动的表单（称为所有者表单）和新表单（称为拥有的表单）之间**建立了隐式关系。**这种关系确保拥有的表单是活动表单，并且始终显示在所有者表单的顶部。
> 
> 这种关系的一个特点是拥有的表单会影响其所有者表单的行为（使用**ShowDialog**时）：
> 
> *   无法最小化、最大化甚至移动所有者窗体。
> *   拥有的表单阻止鼠标和键盘输入到拥有者的表单。
> *   当拥有的表单是时，所有者表单被最小化。
> *   只能关闭拥有的表单。
> *   如果所有者和拥有的表单都被最小化并且如果用户按 Alt+Tab 切换到拥有的表单，则拥有的表单被激活。
> 
> 然而，与 ShowDialog 方法不同的是，对**Show**方法的调用**不会建立隐式的所有者拥有关系**。这意味着任何一种形式都可以是当前活动的形式。
> 
> 如果没有隐含的所有者拥有关系，所有者和拥有的形式都可以最小化、最大化或移动。如果用户关闭主窗体以外的任何窗体，则重新激活最近活动的窗体。
> 
> 尽管**ShowDialog 建立了隐式的所有者拥有关系**，但拥有的表单没有内置方式来回调或查询打开它的表单。在无模式情况下，您可以设置新表单的 Owner 属性来建立所有者拥有的关系。作为一种快捷方式，您可以将所有者窗体作为参数传递给 Show 方法的重载，该方法还采用 IWin32Window 参数（IWin32Window 由 Windows 窗体 UI 对象实现，这些对象通过 IWin32Window.Handle 属性公开 Win32 HWND 属性）。
> 
> 显式模式所有者拥有的表单关系中的表单行为与其隐式模式对应物相同，但非模式所​​有者拥有关系在非所有者拥有的无模式情况下提供了额外的行为。首先，无模式拥有的表单总是出现在所有者表单的顶部，即使其中任何一个都可以是活动的。当您需要在应用程序中的其他表单之上保留表单（例如浮动工具窗口）时，这很有用。其次，如果用户按 Alt+Tab 从所有者切换，则所拥有的表单也会随之而来。为了确保用户知道哪个表单是主表单，最小化所有者会隐藏所有拥有的表单的任务栏按钮，只留下所有者的任务栏按钮可见。

(c) Chris Sells、Michael Weinhardt 的“Windows Forms 2.0 编程”。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-03T14:45:22.743

“当前活动窗口”通常是指前台窗口，但前提是它属于当前线程 - 请参阅MSDN 中的[GetActiveWindow](http://msdn.microsoft.com/en-us/library/ms646292(VS.85).aspx)。

（实际信息在社区内容中，但评论者是正确的，没有“每线程活动窗口”，AFAIK）。

因此，当用户切换到另一个应用程序（或线程）窗口时，您最终会得到一些“默认窗口”。即使 .NET 在这里做了一些魔术，模式也会被破坏：预期的父窗口不会被禁用（例如，您可以切换到主窗口，然后关闭它，或修改某些内容，这通常会由于重入而破坏您的应用程序） .

此外，如果另一个应用程序当前处于活动状态，您的对话框将不会显示在顶部，但它会隐藏在某个其他窗口的后面。

作为一个小烦恼，初始位置通常是不正确的或具有误导性的。

但实际上，这种情况很少发生：如果您打开对话框以响应主窗口上的菜单或按钮单击，则用户实际上永远不会设法切换到另一个窗口。

但是，这在技术上是可行的，并且如果您打开对话框以响应某些自动化、外部消息等，这很可能会发生。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-03T12:32:44.950

无参数 ShowDialog() 仅使用“默认”父级。对于它的价值，默认父级是“当前活动窗口”是什么。当您关心父母是什么时，您需要明确设置它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-13T22:55:23.433

我的问题是`ShowDialog()`从使用`ShowDialog()`. 结果是一个隐藏的表单，无法访问它来关闭它。

After reading this topic, I tried `ShowDialog(this)` and it worked perfectly. The second dialog showed on top, centered, and completely functional. When the second form was set to `Dialogresult.OK` it allowed access to the underlying dialog which was able read its properties and then close it.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-01-17T10:19:54.940

是的，在某些情况下确实有所不同。到目前为止，我对无参数方法没有任何问题，我有点惊讶父表单不是默认表单。因此，为避免意外行为，请始终将真正的父窗体传递给 ShowDialog 方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-12T05:55:29.317

举个例子：

在您的主窗体中，您有一个启用了标签编辑的 ListView。编辑特定标签时，您会启动第二个窗口（使用`ShowDialog()`in `AfterLabelEdit`）。新表单不显示在任务栏中。

如果您的用户开始编辑标签，然后单击另一个应用程序，则将显示第二个表单，但是当返回您的应用程序时，用户只会看到您的主表单，因为显示模式对话框而禁用。然而，通常的闪烁机制（如果您单击调用者，将模式对话框变为字体）将不起作用（肯定是因为 AfterEdit 调用尚未返回），并且您的用户将无法到达第二种形式，除非通过循环通过使用 Ctrl+Tab 打开的窗口。

调用`ShowDialog(this)`解决了这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-23T13:49:05.077

我遇到了这个问题，为了解决它，将 Windows 状态属性更改为正常，因为它可能已最小化。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-28T16:16:59.750

我刚刚发现了一个没有指定所有者使用`this`导致严重问题的案例。

启动时，我的应用程序会强制自己进入全屏模式，并确保它始终具有焦点，即使用户尝试 Alt+Tab 退出它，除非您以管理员或开发人员身份登录。

当我`ShowDialog()`在自定义表单上使用时，由于某种原因，对话框出现*在*我的应用程序后面，并且应用程序本身变得无响应，因为对话框当前处于活动状态。如果我使用`ShowDialog(this)`，那么表格会按预期显示。

# python - wxPython：可折叠面板小部件

> ID：816887
> 
> 赞同：2
> 
> 时间：2009-05-03T12:04:04.473
> 
> 标签：python, user-interface, wxpython, widget

我有我的主程序窗口，我想做一个可折叠的面板。我的意思是，一个与窗口的一侧对齐的面板，带有一个折叠/展开按钮。重要的是，当面板折叠/展开时，其他小部件会相应地改变它们的大小以利用它们所拥有的空间。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T13:47:19.513

这是使用 wx.SplitterWindow 的一种方法

```
import wx, wx.calendar

class FoldableWindowContainer(wx.Panel):
    def __init__(self, parent, left, right):
        wx.Panel.__init__(self, parent)

        sizer = wx.BoxSizer(wx.HORIZONTAL)
        self.SetSizer(sizer)
        self.splitter = wx.SplitterWindow(self, style=wx.SP_LIVE_UPDATE)
        left.Reparent(self.splitter)
        right.Reparent(self.splitter)
        self.left = left
        self.right = right
        self.splitter.SplitVertically(self.left, self.right)
        self.splitter.SetMinimumPaneSize(50)
        self.sash_pos = self.splitter.SashPosition
        sizer.Add(self.splitter, 1, wx.EXPAND)

        fold_button = wx.Button(self, size=(10, -1))
        fold_button.Bind(wx.EVT_BUTTON, self.On_FoldToggle)
        sizer.Add(fold_button, 0, wx.EXPAND)

    def On_FoldToggle(self, event):
        if self.splitter.IsSplit():
            self.sash_pos = self.splitter.SashPosition
            self.splitter.Unsplit()
        else:
            self.splitter.SplitVertically(self.left, self.right, self.sash_pos)

class FoldTest(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None)

        left = wx.Panel(self, style=wx.BORDER_SUNKEN)
        right = wx.Panel(self, style=wx.BORDER_SUNKEN)

        left_sizer = wx.BoxSizer(wx.VERTICAL)
        left.SetSizer(left_sizer)
        left_sizer.Add(wx.calendar.CalendarCtrl(left), 1, wx.EXPAND | wx.ALL, 5)
        left_sizer.Add(wx.Button(left, label="Act"), 0, wx.EXPAND | wx.ALL, 5)

        right_sizer = wx.BoxSizer(wx.VERTICAL)
        right.SetSizer(right_sizer)
        right_sizer.Add(
            wx.StaticText(right, label="Fold panel", style=wx.BORDER_RAISED),
            1, wx.EXPAND | wx.ALL, 5
        )

        FoldableWindowContainer(self, left, right)

app = wx.PySimpleApp()
app.TopWindow = FoldTest()
app.TopWindow.Show()
app.MainLoop() 
```

另外，请查看 wxPython 演示中的 wx.CollapsiblePane。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T12:57:31.427

如果您正确创建层次结构，wxPython（以及 Swing 和其他）的布局管理器应该能够为您执行此操作。让我们假设它绑定到右侧，因此：

```
+-----------------------------+
|+----------------+ +--------+|
||                | | This is||
||                | | your   ||
||   Other stuff  | | panel  ||
||                | +--------+|
||                | +--------+|
||                | | Another||
||                | | panel  ||
|+----------------+ +--------+|
+-----------------------------+ 
```

如果您的布局正确，您将拥有一个包含两列的顶级布局，一列用于其他内容，另一列用于右侧容器。

*该*容器将拥有自己的布局管理器，其中包含两行，一排用于顶部面板，一排用于底部。

这样，当您将顶部面板（您的可折叠面板）调整为更短（折叠）或更高（展开）时，布局管理器应该扩展或收缩底部面板以适应。

显然，您可以使用更复杂的布局管理器，我选择了最简单的布局管理器来说明如何做到这一点，而不会使讨论与列/行跨度和锚点等混淆。您还可以通过反转窗口管理器（水平 <-> 垂直）来更改折叠方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-09T05:03:41.817

Toni Ruža 的原始示例，稍作修改以在 4.0/Phoenix 下工作。非常好的工作示例，谢谢托尼！

```
import wx
import wx.adv

class FoldableWindowContainer(wx.Panel):
    def __init__(self, parent, left, right):
        wx.Panel.__init__(self, parent)

        sizer = wx.BoxSizer(wx.HORIZONTAL)
        self.SetSizer(sizer)
        self.splitter = wx.SplitterWindow(self, style=wx.SP_LIVE_UPDATE)
        left.Reparent(self.splitter)
        right.Reparent(self.splitter)
        self.left = left
        self.right = right
        self.splitter.SplitVertically(self.left, self.right)
        self.splitter.SetMinimumPaneSize(50)
        self.sash_pos = self.splitter.GetSashPosition()
        sizer.Add(self.splitter, 1, wx.EXPAND)

        fold_button = wx.Button(self, size=(10, -1))
        fold_button.Bind(wx.EVT_BUTTON, self.On_FoldToggle)
        sizer.Add(fold_button, 0, wx.EXPAND)

    def On_FoldToggle(self, event):
        if self.splitter.IsSplit():
            self.sash_pos = self.splitter.GetSashPosition()
            self.splitter.Unsplit()
        else:
            self.splitter.SplitVertically(self.left, self.right, self.sash_pos)

class FoldTest(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None)

        left = wx.Panel(self, style=wx.BORDER_SUNKEN)
        right = wx.Panel(self, style=wx.BORDER_SUNKEN)

        left_sizer = wx.BoxSizer(wx.VERTICAL)
        left.SetSizer(left_sizer)
        left_sizer.Add(wx.adv.CalendarCtrl(left), 1, wx.EXPAND | wx.ALL, 5)
        # left_sizer.Add(wx.Button(left, label="Act"), 0, wx.EXPAND | wx.ALL, 5)  # uncommented as unbound

        right_sizer = wx.BoxSizer(wx.VERTICAL)
        right.SetSizer(right_sizer)
        right_sizer.Add(wx.StaticText(right, label="Fold this panel using the thin vertical button on the right"),
                        1, wx.EXPAND | wx.ALL, 5)

        FoldableWindowContainer(self, left, right)

if __name__ == '__main__':
    app = wx.App()
    ex = FoldTest()
    ex.Show()
    app.MainLoop() 
```

# iphone - UISlider，滑动解锁

> ID：816891
> 
> 赞同：4
> 
> 时间：2009-05-03T12:06:33.483
> 
> 标签：iphone

我需要在我的 iphone 应用程序中添加一个 UISlider 控件。这应该看起来像在任何 iphone 或 ipod touch 中显示的“滑动解锁”滑块。我无法弄清楚如何做到这一点。

在滑动解锁滑块中，如果我们将 thumbImage 留在滑块的中间，它会自动回到左侧。我们如何让这种功能在我们的项目中工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T13:59:47.440

您必须使用 UISlider 方法自己实现这一点。首先，您必须使用 initWithFrame: 在代码中创建适当大小的滑块。然后只需切碎您想要的图像并使用以下方法设置它们：

```
setMinimumValueImage:(UIImage*)image;
setMaximumValueImage:(UIImage*)image;
setThumbImage:(UIImage*)image forState:(UIControlState)state;
setMinimumTrackImage:(UIImage*)image forState:(UIControlState)state;
setMaximumTrackImage:(UIImage*)image forState:(UIControlState)state; 
```

然后，在滑块的操作方法中，检查滑块是否处于最大值。如果没有，请使用

```
setValue:(float)val animated:(BOOL)flag 
```

最有可能使用动画=YES。我认为你必须关闭持续更新，否则你会在每一步都得到动作，导致你总是向后动画。您可能需要对此进行一些调整，但它应该可以正常工作。您不会获得 Apple 所做的文本效果，但使用静态图像会非常接近。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T13:55:51.180

“滑动解锁”似乎比 UISlider 更接近 UISwitch。

自定义 UISwitch 没有记录。

如果您习惯使用未记录的功能，请查看 Erica Sadun 的 Developers's Cookbook - 第 8 章。

本章的示例代码可以在[http://code.google.com/p/cookbooksamples/downloads/list](http://code.google.com/p/cookbooksamples/downloads/list)找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-01-17T17:13:53.710

我想这是我在我的应用程序中实现的。

[http://denizdemir.com/2011/03/07/animated-slider-iphones-cool-first-impression/](http://denizdemir.com/2011/03/07/animated-slider-iphones-cool-first-impression/)

但是，如果您打算使用此功能将您的应用程序提交到 iTunes，它可能会被拒绝。因为它将与苹果产品“令人困惑地相似”。只是提醒一下。

# .net - 基于.Net 的开源社交网站？

> ID：816892
> 
> 赞同：3
> 
> 时间：2009-05-03T12:07:03.140
> 
> 标签：.net, open-source, social

我正在建立一个像 Facebook 这样的网站。不是 Facebook 的竞争对手，只是一个中等规模的内部学校校友网站。:-)

我喜欢的特点是，每个年级/班级可以组织成一个小组，并有小组管理员，每个人属于一个年级/班级小组，并且有一个完整的系统管理员来管理所有小组。每个年级/班级都可以有公告板、讨论板之类的东西，每个人都可以使用该平台与其他人交流并分享文件/照片。

我的问题是，是否有任何现有的此类基于开源 .Net 的项目可供使用？

提前谢谢，乔治

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T12:56:05.550

我正在[http://raya.codeplex.com/](http://raya.codeplex.com/)在.NET 上运行一个。它是 partuza 的一个端口，[http](http://partuza.nl/) ://partuza.nl/ 是一个基于 PHP OpenSocial 的示例社交网站。对于应用程序，您可以运行任何 iGoogle 或来自 Myspace、Orkut、friendster 等网站的任何应用程序，只需进行少量修改或无需修改。想帮忙吗？:)

或者，您可以简单地使用 Google 朋友群[http://www.google.com/friendconnect/](http://www.google.com/friendconnect/)为您的网站添加社交功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-02-19T18:38:51.653

免费但非开源：[MonoX](http://www.mono-software.com)。包括很多社交网络模块。看来他们也支持开放社交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T12:15:14.867

如果你真的想建立这样的服务，我认为你应该看看这本书：

**[ASP.NET 3.5 社交网络](http://www.packtpub.com/expert-guide-for-social-networking-with-asp-.net-3.5/book)**

这是其中的[示例章节](http://www.packtpub.com/files/asp-net-3-5-social-networking-sample-chapter-5-friends.pdf)（pdf）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T13:40:50.763

Google 的[OpenSocial](http://code.google.com/apis/opensocial/)可能是您最好的选择。或者，您可以使用免费的[Ning](http://www.ning.com/)，它本质上是一个功能强大的创建社交网络的向导。

在线存在许多基本的社交网络基础设施，您只需根据需要对其进行修改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T12:12:19.133

我不认为有一个开源网站。但是，如果您想使用 CMS，那么您可以使用 dotnetnuke。然后为社交网站创建一个模块。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-03T12:15:07.113

谷歌有开放的社交。[http://code.google.com/apis/opensocial/](http://code.google.com/apis/opensocial/)

那里有很多 PHPBB 类型的网站。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-03T12:15:15.820

Dotnetnuke 可能是最接近的。还有一个社区服务器，它为小团体提供免费版本，但我不认为它是开源的。

# svn - 如何减少项目环境设置的时间？

> ID：816901
> 
> 赞同：1
> 
> 时间：2009-05-03T12:14:03.467
> 
> 标签：svn, permissions, development-environment

**`tmp`在我们的项目中，我们在文件夹**中写入了大量应用程序日志（有时它们非常有用）。

在这个文件夹中，我们有组件的目录，例如：

*   api
*   email2sms
*   预定发送
*   计费
*   等等。总之不到 10 个文件夹。

**问题：** 新组件的文件夹随着时间的推移而出现——每个文件夹都必须是可写的。

因此，每个开发人员在本地环境中对每个文件夹进行 chmod 都需要时间，在生产环境中对这些文件夹进行 chmod 需要时间。

**如何解决这个问题？** 这个过程如何自动化（Apache Ant 任务、SVN 属性、应用程序的脚本——必须负责该任务）？

**环境：** 开发环境——Ubuntu、Windows；生产 - FreeBSD

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T14:44:36.677

我在我工作的大多数公司中使用的快速而肮脏的方法是这样的：

1.  将所有代码放入版本控制系统（如 SVN 或其他东西）中，以便所有开发人员都拥有文件的单一来源。你显然已经在这样做了。**欢呼！**
2.  放入该代码的根目录，一个名为`setup_permissions.sh`更新所有本地环境内容的文件。这可以包括权限，或者您需要运行的任何内容。
3.  每天早上，所有的程序员都会`svn update`更新文件，以及`setup_permissions.sh`.
4.  他们尝试运行他们的代码。看到一个问题。他们跑`setup_permissions.sh`。
5.  世界上一切都好！

至于 的内容`setup_permissions.sh`，可能是这样的：

```
#/bin/sh
TMP=/tmp

mkdir $TMP/api
mkdir $TMP/email2sms
mkdir $TMP/scheduled_sending
mkdir $TMP/billing
chmod 777 -r $TMP/api $TMP/email2sms $TMP/scheduled_sending $TMP/billing 
```

并添加您认为需要的更多命令。
（哦，不要使用`chmod 777`......这是一个糟糕的主意。只需将此视为示例。）

这种方法的关键是**纪律**。您必须相信您的程序员在`setup_permissions.sh`更新他们的本地环境时能够遵守纪律。更新生产系统的人也是如此。

您还必须有纪律来更新`setup_permissions`您对目录结构所做的任何更改，以及它需要的任何权限更改 - 而不是只是在您的计算机上手动进行更改，然后将其保留。（对目录结构进行更改的所有其他开发人员也是如此。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T12:24:56.950

创建日志的人（程序/组件）应该负责使日志文件对每个人都可写 - 在创建日志时使用 mod=777 （每个人都可写）。

如果部署过程有安装脚本，也可以在脚本中执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T13:56:14.820

一个简单的 shell 脚本中的 mkdir 和 chmod 就足够了。

# sql-server - SQLServer 存储过程

> ID：816902
> 
> 赞同：0
> 
> 时间：2009-05-03T12:14:14.683
> 
> 标签：sql-server, tsql, stored-procedures, full-text-search

我想听听你们是否有想法做以下事情：我有一个包含一些卡定义 [id][Company][Mode] 的表，这可能是 Audi 100、Ford Mustan 等。然后我有另一个字段这是一个包含汽车和模型的字符串，可能是“Ford Mustang 2.5T”，然后我需要从卡定义中找到正确的 ID。我虽然想做

```
@CarDefintion = "Ford Mustang 2.5T"
Select top 1 CarDefinitionId 
  from dbo.CarModelDefinition 
 where CONTAINS(Model,@Cardefinition) 
   AND Contains(Company, @Cardefinition) 
```

但由于 Model + Company 不是唯一的，我收到此错误：*“不能在表或索引视图 'dbo.CarModelDefinition' 上使用 CONTAINS 或 FREETEXT 谓词，因为它不是全文索引。”* 有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T12:37:28.107

```
@CarDefintion = "Ford Mustang 2.5T"

Select top 1 CarDefinitionId 
  from dbo.CarModelDefinition 
 where @Cardefinition LIKE Model OR @Cardefinition LIKE Company 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T12:39:49.490

使用 搜索带有通配符列值的字符串`LIKE`。

```
@CarDefintion = "Ford Mustang 2.5T"
Select top 1 CarDefinitionId 
  from dbo.CarModelDefinition 
 where @Cardefinition like '%' + model + '%'
   AND @Cardefinition like '%' + company + '%'; 
```

`+`是字符串连接运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T12:24:11.633

```
DECLARE @CarDefintion VARCHAR(25)
        SET @CarDefintion = 'Ford Mustang 2.5T'

DECLARE @Make  VARCHAR(25)
DECLARE @Model VARCHAR(25)
SELECT @Make  = SUBSTRING(@CarDefintion,0,CHARINDEX(' ',REVERSE(@CarDefintion)))
SELECT @Model = LTRIM( REPLACE(@CarDefintion,@Make,'')) 

--SELECT @Make,@Model

        SELECT TOP 1 * 
          FROM dbo.CarModelDefinition 
         WHERE Model   = @Model
           AND Company = @Make 
```

CONTAINS() 函数用于全文搜索，您很可能没有使用（因此出现错误）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T12:35:54.413

@CarDefintion 必须是字符串吗？是否可以将其设为 Model 和 Company 的数组，然后您可以在 SQL 中引用它们？

如果做不到这一点，您是否绝对确定有人不只是放“Mustang 2.5T”而不是“Ford Mustang 2.5T”？如果您可以绝对确定，那么一种方法是按空格分隔，然后对每个段进行一系列查找以尝试定位它。

# string - ActionScript2：使用两个分隔符拆分文本，帮助

> ID：816904
> 
> 赞同：1
> 
> 时间：2009-05-03T12:14:33.823
> 
> 标签：string, actionscript-2, split

我尝试在 AC2 中使用拆分来创建项目。

这个我有

```
 in_pers = 3x5+5x3+6x8;

var tmp:Array = in_pers.split("+");

trace(tmp);  //output ==  3x5, 5x3, 6x8 
```

但是，如果 in_pers = 3x5+5x3-6x8-4x2;

我怎样才能得到 3x5、5x3、6x8、4x2 的结果

如何使用带有两个分隔符的拆分。

最良好的问候..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-08T17:49:33.267

有一种更简单的方法可以执行 wikiup 建议的操作：

```
function strReplace( haystack:String, needle:String, replacement:String ):String
{
    var tmpA:Array = haystack.split( needle );
    return tmpA.join( replacement );
}

function multiSplit( haystack:String, needles:Array ):Array
{
    // generate a unique String for concatenation.
    var salt:String = String( Math.random() ); //replace with anything you like

    // Replace all of the strings in the needles array with the salt variable
    for( var i:Number = 0; i < needles.length; i++ )
    {
        haystack = strReplace( haystack, needles[ i ], salt );
    }

    //haystack now only has the objects you want split up concatenated by the salt variable.
    //split haystack and you'll have your desired result.
    return haystack.split( salt );
} 
```

这不仅更小，而且速度更快（虽然比 for(i = 0; i < val; i++) （查找迭代与递归）花费的时间要长得多）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-03-18T14:19:51.357

我知道一个更简单的方法：

```
var in_pers :String = "3x5+5x3-6x8";

var reg :RegExp = new RegExp ( "[+\-]" , "gi" );

trace ( in_pers.split ( reg ) ); // output: 3x5,5x3,6x8 
```

这应该够了吧。

秘诀是使用 RegExp 类，女巫起初理解起来有点复杂，因为它像狗屎一样记录在案并且非常混乱。

[+-] 表示“+”或“-”，在“gi”中，g 表示全局（匹配找到的所有模式，而不仅仅是第一个模式），i 表示不区分大小写。

希望它可以帮助任何阅读本文的人...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T20:26:25.247

遗憾的是，AS2 对正则表达式没有原生的理解。要使用 RegExp，您必须迁移到 AS3，或者找到为 AS2 编写的正则表达式类……那里有一些。

我认为为此目的，您需要创建一个自定义函数。我不确定我在下面创建的那个是最好的……有点笨拙，也许不是性能最好的，但我认为它基本上可以满足您的需求。

```
var in_pers:String = "3x5+5x3-6x8-4x2";
var tmp:Array = multiSplit(in_pers, ["+", "-"]);
trace (tmp);

function multiSplit(str:String, delimiters:Array):Array
{
    /* create an array to return */
    var resultArray:Array = [];

    /* loop through the string */
    var a:Number = 0;
    while (a < str.length)
    {
        var first:Number = str.length;
        var bLen:Number = delimiters.length;

            /* loop through the delimiters */
        for (var b:Number = 0; b < bLen; b++)
        {
            var delimiter:String = delimiters[b];

                /* find the first delimiter */
            var index:Number = str.indexOf(delimiter, a + 1);

            if (index != -1 && index < first)
                first = index;
        }
        if (first == a)
            break;
        /* Add the substring to the return array */
        resultArray.push(str.substring(a, first));
        a = first+1;
    }
    return resultArray;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-06-26T02:55:36.870

```
trace(("3x5+5x3+6x8-6x3-2x8+3x5").split("-").join("+").split("+"));
//output ==  3x5,5x3,6x8,6x3,2x8,3x5 
```

# php - 如何使用 Zend_Db 添加多行？

> ID：816910
> 
> 赞同：22
> 
> 时间：2009-05-03T12:17:45.783
> 
> 标签：php, mysql, zend-framework, zend-db, zend-db-table

我有一个包含信息的数组，它或多或少看起来像这样：

```
$data[] = array('content'=>'asd');
$data[] = array('content'=>'asdf'); 
```

我想将这两个条目都添加到数据库中。

```
$db->insert('table', $data); 
```

不添加两个条目。我究竟做错了什么？我必须使用 Zend_Db_Table 吗？

```
$data = array('content'=>'asdf');
$db->insert('table', $data); 
```

当然工作

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-03T12:34:35.977

我不认为 Zend_Db 支持插入多行。

但是，如果您只有两行或更多行，则可以使用循环。

```
foreach ($data as $row)
{
    $db->insert('table', $row)
} 
```

* * *

前 Zend Framework 开发人员[Bill Karwin 前段时间](https://stackoverflow.com/users/20860/bill-karwin)[在 Nabble 上写了这个](http://zend-framework-community.634137.n4.nabble.com/Multiple-insert-update-bulk-tp673145p673149.html)：

行集基本上是一个集合对象，因此我将向该类添加方法以允许将行添加到集合中。所以你应该能够做到这一点：

```
// creates a rowset collection with zero rows
$rowset = $table->createRowset();

// creates one row with unset values 
$row = $table->createRow();

// adds one row to the rowset 
$rowset->addRow($row); 

// iterates over the set of rows, calling save() on each row
$rowset->save(); 
```

将整数传递给 createRowset() 以创建 N 个空行是没有意义的。无论如何，您只需要遍历它们即可使用值填充它们。因此，您不妨编写一个循环来使用应用程序数据创建和填充各个行，然后将它们添加到集合中。

```
$rowset = $table->createRowset();
foreach ($appData as $tuple) 
{
    $row = $table->createRow($tuple);
    $rowset->addRow($row);
}
$rowset->save(); 
```

允许将数组数组传递给 createRowset() 确实有意义，因为这与将元组传递给 createRow() 的用法一致。

```
$rowset = $table->createRowset($appData); // pass array of tuples 
```

这将执行与上一个示例相同的循环（除了最后的 save() 之外），创建一个新行的新行集，准备好进行 save()d。

SQL中有两种方法可以提高插入数据的效率：

1.  使用包含多行的单个 INSERT 语句：

    插入 t (col1, col2, col3) 值 (1, 2, 3), (4, 5, 6), (7, 8, 9);

2.  准备一个 INSERT 语句并多次执行：

    准备插入到 t (col1, col2, col3) 值 (?, ?, ?); 执行 1、2、3 执行 4、5、6 执行 7、8、9

但是，支持这些改进中的任何一个都会增加 Row 和 Rowset 类的复杂性。这是由于当前 Zend_Db_Table_Row 类在调用 save() 时区分需要插入或更新的行的内部方式。这种区别由 Row 对象封装，因此 Rowset 不知道各个行是新行还是现有行的修改副本。因此，为了让 Rowset 类提供使用更高效 SQL 的多行 save() 方法，脏数据的管理必须完全重构。更简单的解决方案是让 Rowset 遍历其行，对每一行调用 save()。这对于 OO 封装更好，尽管它无助于优化 SQL 以插入行集。

无论如何，当最需要高效的 SQL 时，在典型的 Web 请求中批量加载多行数据确实很少见。少量行的效率差异很小，因此只有在批量加载大量行时才会有明显的改进。如果是这种情况，您无论如何都不应该使用 INSERT，您应该使用 MySQL 的 LOAD DATA 语句，或者如果您使用其他 RDBMS 品牌，则应该使用等效功能。INSERT 通常不是加载大量数据的最有效选择。

关于返回自动生成的密钥，我不会打扰。请注意，如果您使用纯 SQL（例如在 mysql CLI 中），并且在单个 INSERT 语句中插入多行，则只能获取最后生成的 id 值，而不是插入的所有行的 id 值。这是 SQL 行为；对于任何语言或任何框架都是如此。

```
INSERT INTO t (col1, col2, col3) VALUES (1, 2, 3), (4, 5, 6), (7, 8, 9);
SELECT LAST_INSERT_ID(); -- returns only the id for the third tuple 
```

如果您确实需要每一行的 id，您应该编写一个循环并一次插入一行，在插入每一行后检索生成的 id。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-05-03T23:47:48.633

您可以通过该方法执行任何您想要的 SQL 语法——包括多行`INSERT`语句。`Zend_Db_Adapter_Abstract::query()`

但是`Zend_Db_Table`和`Zend_Db_Table_Rowset`类的方法不支持一次性插入多行。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2011-04-19T11:27:42.427

要插入多行，您可以使用 Zend_Db

```
$stmt = $table->getAdapter()->prepare('INSERT INTO tablename (col1, col2, col3) VALUES (?, ?, ?), (?, ?, ?)');

$stmt->execute( array($value1, $value2, $value3, $value4, $value5, $value6) ); 
```

（来自比尔·卡尔文）

在您的情况下，我们可以将其更改为以下代码：

```
$data[] = array('content'=>'asd');
$data[] = array('content'=>'asdf');

$stmt = $table->getAdapter()->prepare('INSERT INTO table (col1) VALUES (?), (?)');
$stmt->execute( $data ); 
```

要动态生成这些“（？），（？）”，如果数据是动态的，您可以尝试使用以下代码段：

```
$values = implode(',',array_fill(0,count($data),'(?)')); 
```

希望这可以帮助

问候， Riki Risnandar

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-10T23:22:24.860

这是我的解决方案：

```
public function saveRows($array) {
        $vAmount    = count($array);
        $values     = array();
        $columns    = array();

        foreach ($array as $colval) {
            foreach ($colval as $column=>$value) {
                array_push($values,$value);
                !in_array($column,$columns) ? array_push($columns,$column) : null;
            }
        }

        $cAmount    = count($columns);
        $values     = array_chunk($values, $cAmount);
        $iValues    = '';
        $iColumns   = implode("`, `", $columns);

        for($i=0; $i<$vAmount;$i++)
            $iValues.="('".implode("', '", $values[$i])."')".(($i+1)!=$vAmount ? ',' : null);

        $data="INSERT INTO `".$this->_name."` (`".$iColumns."`) VALUES ".$iValues;
        die($data);
        $this->query($data);
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T16:14:34.527

这是工作。

```
 $query = 'INSERT INTO ' . $db->quoteIdentifier('table') . ' (`col1`, `col2`) VALUES ';
    $queryVals = array();
    foreach ($data as $row) {
        foreach($row as &$col) {
            $col = $db->quote($col);
        }
        $queryVals[] = '(' . implode(',', $row) . ')';
    }
    $stmt = $db->query($query . implode(',', $queryVals)); 
```

[如何在zend框架中构建多个插入查询](https://stackoverflow.com/questions/4802686/how-to-build-multiple-insert-query-in-zend-framework)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T16:12:39.463

如果您确实使用 ZF2，则解决方案可能是这样的：

```
$insert = $this->getSql()->insert();
foreach ($values as $value) {
    $relation = array(
        'column_one' => $value,
        'column_two' => $value
    );
    $insert->values($relation, Insert::VALUES_MERGE);
}

$insertRes = $this->executeInsert($insert); 
```

# sql-server - 如何为 sql server express 数据库启用成员资格提供程序

> ID：816914
> 
> 赞同：1
> 
> 时间：2009-05-03T12:21:29.220
> 
> 标签：sql-server, asp.net-mvc

我正在使用 Visual webdeveloper express edtion 2008 和 sql server express edition 使用 ASP.NET MVC。我正在创建一个将使用会员提供程序的站点，我想使用我自己的数据库而不是应用程序服务数据库。我已经在 app_data 文件夹中创建了我的数据库，但我仍然无法使用 aspnet_regsql 命令注册它。它没有在列表中显示。任何人都可以建议为会员提供者启用我的数据库的方法吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-03T12:28:35.273

您应该能够从命令行运行 aspnet_regsql，如下所示：

```
aspnet_regsql -A all -C "Data Source=.\SQLEXPRESS;Integrated Security=True;User Instance=True" -d "C:\MyProject\APP_DATA\aspnetdb.mdf" 
```

`-d`用正确的文件夹路径替换开关`APP_DATA`。

# regex - 匹配奇数个转义符号

> ID：816915
> 
> 赞同：3
> 
> 时间：2009-05-03T12:21:47.940
> 
> 标签：regex, pcre, backreference

我需要匹配 C++ 预处理器语句。现在，预处理器语句可能跨越多行：

```
#define foobar \
    "something glorious" 
```

这个最后的反斜杠可能会被转义，所以下面的结果是两个单独的行：

```
#define foobar \\
No longer in preprocessor. 
```

问题是如何有效地匹配显式续行。我有以下我*认为*有效的表达式。基本上，它测试反斜杠的数量是否为奇数。它是否正确？可以更有效地完成吗？

```
/
    [^\\]           # Something that's not an escape character, followed by …
    (?<escape>\\*?) # … any number of escapes, …
    (?P=escape)     # … twice (i.e. an even number).
    \\ \n           # Finally, a backslash and newline.
/x 
```

（我使用的是 PHP，所以 PCRE 规则适用，但我会很感激*任何*正则表达式白话的答案。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T13:55:55.267

我认为你让它变得比它需要的更困难。试试这个：

```
/
  (?<!\\)    # not preceded by a backslash
  (?:\\\\)*  # zero or more escaped backslashes
  \\ \n      # single backslash and linefeed
/x 
```

# macos - 如何使 textmate 与 NFS 一起工作？

> ID：816918
> 
> 赞同：5
> 
> 时间：2009-05-03T12:22:47.360
> 
> 标签：macos, editor, textmate

我使用并喜欢 textmate，但在 NFS 上，每当它的一个窗口获得焦点时，它都会重新扫描所有打开的文件以进行更改，因此会有很大的延迟。我已经查看但没有找到任何禁用此功能的方法。

有谁知道一个好的解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T02:21:01.777

您还可以获得[ReMate](http://ciaranwal.sh/remate/)的 TextMate 插件，该插件将允许禁用自动刷新。

但是，如果能够在每个项目的基础上做到这一点，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T13:19:22.013

我一般不知道 mac 或 NFS，但谷歌搜索告诉我，你可以尝试在 mac 上使用这个 NFS 选项，假设 textmate 统计文件以找出它们是否已更改：

```
nfs.client.statfs_rate_limit
nfs.lockd.host_monitor_cache_timeout 
```

让我们知道它是否有任何好处。

请参阅[手册页](http://developer.apple.com/documentation/Darwin/Reference/ManPages/man5/nfs.conf.5.html "NFS 手册页")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T20:15:17.990

我相信没有这样的选择。[查看可以设置的高级选项](http://manual.macromates.com/en/expert_preferences#expert_preferences) 但是您将 rsync 用于正在进行的项目和临时编辑，这不是大问题。

# apache - 重定向的正确方法是什么？

> ID：816924
> 
> 赞同：5
> 
> 时间：2009-05-03T12:25:26.077
> 
> 标签：apache, redirect, dns

如果我有两个域名：

altcognito.com

并说我有另一个以下域：

alt-cognito.com

什么是“最佳”重定向（我是否使用永久等...？）我想建议 altcognito.com 是“正确”的网站。

（当然，这些只是示例）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T12:28:59.047

如果你想说“你应该总是去 foo 而不是 bar”，你想要一个 301 重定向（你用你的前端服务器做）。请参阅[http://www.google.com/support/webmasters/bin/answer.py?hl=en&answer=93633](http://www.google.com/support/webmasters/bin/answer.py?hl=en&answer=93633)

302（临时）重定向应该用于您无法提供页面但希望稍后返回的情况。不幸的是，这是您从 JSP 向前获得的重定向。

应尽可能避免客户端（元刷新或 javascript）重定向。

根据评论进行编辑：这里是用于配置永久（或临时）重定向的 Apache 文档的链接：[http ://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-03T12:36:34.863

```
<VirtualHost *:80>
    ServerAlias altcognito.com
    ServerAlias alt-cognito.com
    ServerAlias www.alt-cognito.com
    RedirectMatch permanent ^/(.*) http://www.altcognito.com/$1
</VirtualHost> 
```

3 个域（www 和非 www）将 301 重定向到您的主域 www.altcognito.com

# asp.net-mvc - ASP.net MVC - 视图如何访问模型？

> ID：816925
> 
> 赞同：7
> 
> 时间：2009-05-03T12:25:41.880
> 
> 标签：asp.net-mvc, model-view-controller

在我见过的所有 MVC Diagrams 中，View 和 Model 之间总是存在连接，这表明 View 可以访问 Model。

我只是想知道：这适用于什么时候？目前，我的控制器操作从 QueryString 中获取一个参数，查询模型以获取 MyObjectViewData，然后返回一个视图，传入 MyObjectViewData。所以基本上我在两者之间有控制器。

这似乎是合乎逻辑的方法，但它不符合 Model 和 View 一起有业务的假设。

他们在没有控制器的情况下进行交互的典型情况是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T12:39:22.470

在 MVC（在 web 上）中，视图通过渲染模型实体的特定实例直接与模型交互。它仅通过控制器间接作用**于模型。**在非 Web 实现中，您可以使用观察者模式向 View 元素注册处理程序，这些处理程序可以调用模型中的方法来更新模型而无需控制器交互。ASP.NET MVC 和其他基于 Web 的实现比非 Web 实现更松散耦合。在我看来，这是一件好事。它确实倾向于使控制器实现更胖，并且您需要小心保持控制器和模型之间的关注点分离。

Web 实现可能应该在没有从模型到视图的间接连接的情况下绘制，因为如果没有控制器，您就无法真正在两者之间进行通信。我想有人可能会争辩说 Web 服务可以提供这种连接，但我认为它只是控制器的另一种形式。

# java - 哪些非自由工具在 Java 开发人员中流行

> ID：816931
> 
> 赞同：3
> 
> 时间：2009-05-03T12:29:12.243
> 
> 标签：java, eclipse, ide, netbeans, eclipse-plugin

我与之交互的绝大多数开发人员都在使用 Eclipse（我更喜欢 NetBeans），并将利用许多可用的免费插件。然而，他们中的许多人很少使用需要货币支付的工具。

开发人员有没有考虑过这可能是不明智的，并且他们正在损害自己的生产力？大多数开发人员会为某些类型的工具付费吗？同样，是否有他们想要使用但不是因为它们不是免费的工具？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-03T12:36:24.303

[Intellij](http://www.jetbrains.com/idea/)是一个很棒的工具，尤其是与 Eclipse IMO 相比。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-03T13:10:35.560

JProfiler 用于内存分析等

[http://www.ej-technologies.com/products/jprofiler/overview.html](http://www.ej-technologies.com/products/jprofiler/overview.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-03T12:45:15.437

[Intellij](http://www.jetbrains.com/idea/)可能是我知道开发人员使用的最流行的“付费”工具。我曾在客户站点工作，他们认为它非常高效，以至于他们拥有站点范围的许可证，而一些类似的站点将使用（免费的）Eclipse 或 NetBeans。

有一个巨大的动机不为东西买单。但如果不必为您节省那么*多*时间就值得了。在大型企业中，每个座位/每天的开发人员成本高得惊人。如果您声称 Intellij 可以为您节省 2 到 3 天的生产力，那么它就会收回成本（我想说，这在很大程度上是一个主观的论点，但我知道独立顾问会为 Intellij 付费他们自己）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-03T12:49:32.773

[JIRA](http://www.atlassian.com/software/jira/)和[FishEye](http://www.atlassian.com/software/fisheye/)提高了生产力，而且它们不仅限于 Java。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-03T12:45:12.643

虽然我更喜欢使用开源库编写软件，但我真的很喜欢使用[IntelliJ](http://www.jetbrains.com/idea/index.html)。在 eclipse 上工作了大约一年，它无疑提高了我的工作效率。

我现在正在考虑购买[javarebel](http://www.zeroturnaround.com/javarebel/)，这应该会再次提高生产力。

另一方面，使用一个源代码不可用的库，会导致错误，因为不知道它是如何工作的，调试会更加困难，并且它可能包含无法检测到的安全问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-06T21:01:28.447

我们一直在使用 Jira + Fisheye + Crucible。虽然前两个只是您用于跟踪问题和查看/搜索存储库的标准工具，但第三个工具 Crucible 非常宝贵。它是帮助进行代码审查的工具。

[http://www.atlassian.com/software/crucible/](http://www.atlassian.com/software/crucible/)

它极大地增加了我们进行代码审查的数量，并为我们提供了一些跟踪错误得到修复和代码审查的信息。

此外，我们还有一些 YourKit 的浮动许可证 [http://www.yourkit.com/](http://www.yourkit.com/)

我们经常使用它来解决内存和性能问题。

我们试着遵循这个口头禅：首先，写它，让它工作。其次，只优化需要优化的部分。

为了进行优化，您需要知道瓶颈在哪里，而分析是找出问题的最佳方法之一。你选择最慢的东西并修复它，再次配置文件，如果它足够快，你就完成了。如果没有，选择最慢的东西并修复它，冲洗并重复。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-03T12:48:40.997

我也喜欢 NetBeans，但我知道很多人为 MyEclipse 付费，因为它的附加功能。价格也很合理（〜50美元）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-03T12:31:54.623

许多软件公司会购买一些代码混淆工具，而且它们通常不是免费的（或仅供试用）。

有些人还会购买好的覆盖工具。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-03T13:40:41.917

JUnit Max 用于在 Eclipse 中进行连续测试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-04T09:55:20.140

Beyond compare 是文件/文件夹比较的最佳工具。[http://www.scootersoftware.com/](http://www.scootersoftware.com/)

# php - php foreach 帮助

> ID：816932
> 
> 赞同：0
> 
> 时间：2009-05-03T12:29:49.793
> 
> 标签：php, loops

我有一个 4 行的数据集。我正在使用 2 个 foreach 循环来获取我的数据。外部 foreach 需要循环一次，我需要内部循环循环 4x。有没有办法做到这一点，还是我需要拆分数组？

```
 foreach($reports as $key=>$val)
  {
      if($val['rpt_type'] == 'Sooa')
      {
        foreach($val as $foo)
        {
          echo $foo['name'];
        }
      }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T13:13:18.503

我仍然不确定您的数据结构的外观。对我来说，为了能够使用“rpt_type”，它必须看起来像这样：

```
$reports = array(
    0 => array(
        'rpt_type' => '...',
        ...
        'rows' => array(
            'name' => '...',
            ...
        ),
    ),
    1 => ...
); 
```

然后，您可以使用以下方法对其进行迭代：

```
foreach($reports as $report) {
    if($report['rpt_type'] == 'Sooa') {
        foreach($report['rows'] as $row) {
            echo $row['name'];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T13:20:59.640

首先，使用 php 的 var_dump 函数检查 $reports 变量的内容：

```
var_dump($reports); 
```

它会打印出这样的东西：

```
array(3) {
  [0]=>
  int(1)
  [1]=>
  int(2)
  [2]=>
  array(3) {
    [0]=>
    string(1) "a"
    [1]=>
    string(1) "b"
    [2]=>
    string(1) "c"
  }
} 
```

然后你可以实现你的循环，查看你拥有的实际数据，无论你的锯齿状数组是以哪种方式形成的。

# java - 将应用程序链接到 Swing GUI 的最佳方式是什么？

> ID：816935
> 
> 赞同：1
> 
> 时间：2009-05-03T12:31:21.943
> 
> 标签：java, multithreading, swing

如果我有 Swing GUI 类和应用程序，我应该如何管理这些对象之间的通信？我应该将 GUI 对象链接传递给应用程序还是将应用程序链接传递给 GUI？

例子：

```
public class App{

public App()
{
   GUI gui = new GUI(this)
}

} 
```

或者

```
public GUI{
public GUI()
{
   App gui = new App(this)
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T12:38:20.490

看看[MVC 模式](http://en.wikipedia.org/wiki/Model-view-controller)。理想情况下，您希望展示您的应用程序，以便不同的 GUI 组件可以使用它（想象稍后提供应用程序的 Web/servlet 视图或命令行界面）。该要求禁止您的应用程序具有隐含的 Swing 知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-27T16:48:09.413

目前的答案都很好，但这里有一件非常关键的事情：你有“多线程”标签，但还没有人解决它。您肯定希望将 MVC 中的“C”视为将被线程化的东西，甚至可能希望通过管理器接口甚至视图接口遵循管理器设计模式——接口的使用将有助于扩大您的选择范围更多用于未来的重构，甚至重新设计。过去，我使用 java.util.observer 和 java.util.observable——Java 中的原始 MVC 模式 :)——来处理通信问题。请记住不要阻塞您的主线程，否则您的 GUI 将冻结。是的，MVC 是一个好的开始，但是在您描述的 App->GUI 中，不仅仅是 MVC，将整个 GUI 视为您的应用程序的视图，模型很可能是某种数据集（数据库、平面文件、状态信息）和您的应用程序的控制器。请记住，GUI 很可能至少有一个接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T14:13:00.327

是的，MVC 模式会有所帮助。您真的想消除两个组件之间的紧密耦合。或者至少，选择后者，意思是：

```
public GUI {
    public GUI() {
         App gui = new App(this)
    }
} 
```

这样，至少您的应用程序逻辑不依赖或绑定到您的 GUI。

# c - C日历结构

> ID：816953
> 
> 赞同：0
> 
> 时间：2009-05-03T12:36:35.377
> 
> 标签：c, compiler-construction, calendar

有人可以快速看一下这段 C 代码，看看为什么会出现编译器错误吗？它是一种将详细信息输入日历结构的功能，应在日历上创建一个节点，即一个“事件”。

```
struct event enter_key(void)
{
        int day,month,year,starttime,endtime,length;
        char* descp;
    struct event* n;

        printf("Enter Day:\n");
        scanf("%d", &day);
        printf("Enter Month:\n");
        scanf("%d", &month);
        printf("Enter Year: \n");
        scanf("%d", &year);
        printf("Enter starttime:\n"); scanf("%d", &starttime);
        printf("Enter endtime:\n");
        scanf("%d", &endtime);
        printf("Enter Description: \n");
        scanf("%s", &descp);

        n=mkevent(day, month, year, starttime, endtime, &descp); 
```

尝试编译时，我收到此消息：

> newpro.c:115：警告：从不兼容的指针类型传递“mkevent”的参数 6

谁能告诉我我是否错误地声明了指针，或者我是否应该为“descp”指针分配空间，或者我是否试图以错误的方式在结构中创建一个节点？

感谢阅读，C新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T12:44:25.267

指针应该指向一个足够大的缓冲区，以容纳用户在`scanf`调用中输入的值。

```
 %s      Matches  a  sequence of non-white-space characters;
          the next pointer must be a pointer to char, and the
          array  must  be  large  enough  to  accept  all the
          sequence and the terminating  NUL  character.   The
          input string stops at white space or at the maximum
          field width, whichever occurs first. 
```

所以它可能是这样的

```
char descp[ MAX_DESCRIPT ];

scanf("%s", descp); 
```

尽管在实际代码中，您应该使用其中一种技术来读取不会导致缓冲区溢出的字符串（以及可能的用户要求输入包含空格的描述）。

> 我是否尝试以错误的方式在结构中创建节点？

我不知道 mkevent 的签名，但我希望它以指向字符串缓冲区 ( `const char*`) 的指针作为描述，而不是指向指向字符串的指针的指针 ( pass in`descp`而不是`&descp`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T12:44:43.237

descp 是“指向字符的指针”(char*) 类型。在有问题的行中，您传递的是指针本身的地址（char**）。删除参数前面的“&”。

哦，不要在生产代码中使用 scanf() ，尤其是读取字符串。它不进行任何边界检查，从而可能导致缓冲区溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T12:44:31.630

该消息告诉您，您`mkevent`需要一个不同类型的参数（在 &descp 的位置）。

您应该再次检查 mkevent() 需要什么。它不是字符**。

也许您应该在 mkevent 行中将 &descp 更改为 descp - 只是猜测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T12:45:05.047

你没有显示 mkevent 的声明，但我猜你想通过`desc`，而不是它的地址。你有：

```
n=mkevent(day, month, year, starttime, endtime, &descp); 
```

你可能想要：

```
n=mkevent(day, month, year, starttime, endtime, descp); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T13:25:45.480

给我们 mkevent() 的声明会有所帮助，但这很可能是因为当你应该传递 descp 时你传递了 &descp。

# asp.net-membership - ActiveDirectoryMembershipProvider 源在哪里

> ID：816963
> 
> 赞同：1
> 
> 时间：2009-05-03T12:41:48.690
> 
> 标签：asp.net-membership

我听说 ActiveDirectoryMembershipProvider 源代码可用。

我在对我们的开箱即用提供程序的设置进行故障排除时遇到了一些困难，单步调试源代码会非常方便。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T12:51:14.377

您可以使用CodeProject 提供的[.NET Framework Mass 下载](http://www.codeproject.com/KB/dotnet/netmassdownloader.aspx)器获取 .NET Framework的整个源代码。[您可以在http://referencesource.microsoft.com/](http://referencesource.microsoft.com/)上找到有关如何使用和从 Microsoft 下载它的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T14:33:31.760

[反过来，您可以从Microsoft](http://referencesource.microsoft.com/netframework.aspx)下载源代码（以 MSI 形式提供） 。多么酷啊！

# vbscript - 如何从 inf 安装打印机驱动程序，然后在 vbscript 中使用所述驱动程序设置打印机

> ID：816964
> 
> 赞同：1
> 
> 时间：2009-05-03T12:42:01.653
> 
> 标签：vbscript, printing

我正在编写一个需要使用 postscript 驱动程序设置 Xerox Phaser 打印机的脚本。计算机上当前装有 PCL 驱动程序（尽管尚未在其上设置打印机。）我想使用指定的 INF 安装 PS 驱动程序，然后使用安装 INF 后提供的驱动程序安装打印机（以免意外使用 PCL 驱动程序。）如何在 VBScript 中完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T12:45:18.960

这是一个关于如何做到这一点的示例：[VBScript 安装打印机](http://episteme.arstechnica.com/eve/forums/a/tpc/f/6330927813/m/8270955345)

**编辑：**对于本地打印机，对脚本进行以下更改

```
oPort.PortName = "LPT1:"
oPort.PortType = 3 
```

并删除`oPort.HostAddress`线

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T15:23:22.660

您可能想看看使用[rundll32 InstallHinfSection](http://msdn.microsoft.com/en-us/library/aa376957(VS.85).aspx)函数。我就是这样做的。它不需要您安装任何额外的 ActiveX 组件。这里有一个如何使用它的例子：[http](http://www.msfn.org/board/Silent-parameters-for-RunDll32-setupapi-t106711.html) : //www.msfn.org/board/Silent-parameters-for-RunDll32-setupapi-t106711.html 基本上它，`%systemroot%\system32\rundll32.exe setupapi,InstallHinfSection DefaultInstall 132 C:\drivers\2100\PCL 5e\hp211ip5.inf`

您可能还想查看 PrintUIEntry 函数，因为如果系统上已经加载了驱动程序，这将允许您添加打印机。请参阅此处了解更多信息：http: [//support.microsoft.com/kb/189105](http://support.microsoft.com/kb/189105)

# c# - 在 vs 2008 中选择当前行的组合键？

> ID：816977
> 
> 赞同：0
> 
> 时间：2009-05-03T12:46:50.517
> 
> 标签：c#, key, combinations

我刚开始在 vs 2008 上学习 c#。

我找到了关键组合

1.  选择当前单词
2.  删除当前行

是否有选择当前行的组合键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T12:49:49.980

`HOME`, `SHIFT`+`END`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T13:05:24.623

您也可以按 CTRL+C 复制光标当前所在的整行。您不会看到选择栏，但整行被复制到 clibboard。然后，您可以按 CTRL+V 将其粘贴到您喜欢的任何位置。

编辑：确保您没有在该行中选择任何内容，在这种情况下，只有选择会被复制到剪贴板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T13:00:15.650

你可以使用 ctrl + w。

有关更多信息，请访问此用户链接： [http ://smallworkarounds.blogspot.com/2008/12/visual-studio-2008-tips-tricks-for.html](http://smallworkarounds.blogspot.com/2008/12/visual-studio-2008-tips-tricks-for.html)

# parameters - 物理学中的 DIY 模拟

> ID：816979
> 
> 赞同：-1
> 
> 时间：2009-05-03T12:47:02.390
> 
> 标签：parameters, simulation

我正在尝试为大学生构建一个软件，以通过实验学习物理概念。例如尝试不同的角度来击中一个移动的物体（理解射弹理论）；具有不同速度/质量的运动物体发生碰撞以更好地理解碰撞等。需要建立逼真的实验（更多的 2D/3D 外观和感觉）。有没有免费软件可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T13:44:07.463

[Open Dynamics Engine](http://www.ode.org/)是一个不错的游戏物理引擎，您可能想看看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T16:23:40.340

从来没有听说过任何免费软件可以做到这一点，但肯定有很多物理模拟框架有多种语言。他们中的大多数使用 Verlet 集成。以下是一些物理引擎：

*   [APE](http://www.cove.org/ape) : 用 actionscript 编写的 2d 引擎，支持像弹簧这样的软体
*   [box2dflash](http://box2dflash.sourceforge.net/) : 2d 引擎也用 actionscript 编写，基于 box2d 用 C 编写。仅支持刚体
*   [phys2D](http://www.cokeandcode.com/phys2d/)：用java编写的二维引擎
*   [jbullet](http://jbullet.advel.cz/)：子弹 3d 引擎的 java 端口
*   [fun-motion](http://www.fun-motion.com/list-of-physics-games/)：不是物理引擎，但列出了几个基于物理的游戏。**真的值得检查**，因为您可能会发现一些游戏可以满足您的需求
*   [我的物理实验室](http://www.myphysicslab.com)：也不是引擎，但有一些质量弹簧系统的 java 示例等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T12:52:42.843

这让我想起了 Microsoft DOS 中的[Gorilla](http://www.jefflewis.net/archive/programming/gorilla.bas)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T13:01:22.697

[游戏开发者](http://oreilly.com/catalog/9780596000066/#top)的物理学可能很有趣。从链接页面：

> 碰撞台球。导弹轨迹。超速汽车的转弯动力学。通过应用物理定律，您可以对游戏中几乎所有弹跳、飞行、滚动、滑动或静止不动的事物进行逼真建模，从而为计算机游戏、模拟和动画创建引人入胜、可信的内容

它不使用开源物理/游戏框架，但涵盖了所有低级物理编码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-09T01:56:14.000

查看[Chipmunk](http://wiki.slembcke.net/main/published/Chipmunk) 2-D 物理 SDK。- 我发现基于现有的演示非常容易上手。

您可以轻松设置一些具有初始质量、位置和速度的物体，并使用键盘或鼠标调整属性，然后开始模拟。

# linux - 在 Fedora 8 Core 上运行启动脚本

> ID：816980
> 
> 赞同：0
> 
> 时间：2009-05-03T12:48:17.957
> 
> 标签：linux, amazon-ec2, fedora

我将 Amazon EC2 与 Fedora 8 Core AMI 一起使用。我有一个安装在 /ebsmnt 的 EBS 卷，以及一个位于 /ebsmnt/startupscript.sh 的启动脚本。目前我必须登录到服务器，cd 到 /ebsmnt/ 并手动运行脚本。如何让 Fedora 在启动时自动运行此脚本，而无需我进行任何交互？（通过将它放在 /ebsmnt/ 上，我不必每次想要更改脚本时都重新编译 AMI）。我对 *nix 不太熟悉，因此非常感谢您提供分步指南。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T13:51:55.197

/etc/rc.local 文件的内容在启动时执行。
注意：您必须添加脚本的完整路径。

脚本是否理解“开始”和“停止”参数？如果是这样，它可以添加到运行级别。

# c# - 我可以将 ShowDialog() 设置为不是最顶层的吗？

> ID：816981
> 
> 赞同：2
> 
> 时间：2009-05-03T12:48:26.457
> 
> 标签：c#, winforms, show, showdialog, topmost

有没有办法可以将 ShowDialog() 设置为不是最顶层的？我查看了所有相关的 SO 问题，但没有一个*完全*符合我的情况。

我所做的是从 datagridview 按钮列打开一个新的 WinForm。这个新表单从几个 SQLite 表中提取信息，并允许用户将信息添加到单击按钮的行中。

我使用下面的代码打开 WinForm。我使用 ShowDialog() 方法，因此我可以判断用户是在表单中保存信息还是取消它。

```
Pay_Bill_Window paywindow = new Pay_Bill_Window(getClickedRowID);
if (paywindow.ShowDialog() == DialogResult.OK)
{
    FillPendingPaymentDataGrid(dbAccess.GetPendingBills());
} 
```

我这样做是为了告诉我是否需要重新加载 datagridview 中的信息。

用户可以填写到窗口中的信息来自其他来源，例如 Web 浏览器，因此将表单置于所有应用程序之上并不理想。

有没有办法可以阻止窗口位于所有应用程序之上（在我的一系列窗口中最上面的很好），或者有没有办法告诉用户在另一个表单上单击了哪个按钮（基本上，使用`paywindow.Show()`和观看对于不同类型的退货）？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T14:22:09.057

默认情况下，在“所有应用程序意义上”，表单不应该是 TopMost。如果您看到这种行为，很可能是因为该属性是在设计器中设置的。在设计器中取消设置属性或尝试以下操作。

```
using ( Form form = CreateMyForm() ) {
  form.TopMost = false;
  form.ShowDialog(parent);
  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T13:18:54.857

使用这样的东西：form1：

```
 private void button1_Click(object sender, EventArgs e)
        {
            Form2 frm = new Form2();
            frm.Show();
            frm.FormIsClosing += frm_FormIsClosing;

        }

        void frm_FormIsClosing(object sender, DialogResult rsl)
        {
            if (rsl == System.Windows.Forms.DialogResult.Yes)
                MessageBox.Show("We got it");
        } 
```

表格2：

```
 public delegate void IsClosing(object sender, DialogResult rsl);

        public event IsClosing FormIsClosing;

        private void Form2_FormClosed(object sender, FormClosedEventArgs e)
        {
            FormIsClosing(this, System.Windows.Forms.DialogResult.Yes);
        } 
```

然后关闭 form2 ， FormIsClosing 触发，您可以在 from1 中捕获它；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T19:53:10.553

我还没有找到一种方法来防止表单在显示时处于最顶层`ShowDialog()`（这将表单显示为模态，我不知道如何覆盖它）。

但是，我找到了一种方法来观察第二种形式，当用 显示时`Show()`，通过观察[这个 StackOverflow 问题](https://stackoverflow.com/questions/677056/opening-forms-in-c)`form.Disposed`中的事件。

来自[伊恩](https://stackoverflow.com/users/21061/ian)：

```
Form2 form2 = null;

void button_click(object sender, EventArgs e) 
{     
    if(form2 == null)   
    {
        form2 = new Form2();
        form2.Disposed += new EventHandler(f_Disposed);
        form2.Show();
    }
}

void f_Disposed(object sender, EventArgs e) 
{
    form2 = null; 
} 
```

据我所知，这不允许我查看表单关闭的原因（例如 with `DialogResult`），因此*每次*表单关闭时都会触发事件，这对我的情况来说是可以的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-07T21:00:51.643

```
paywindow.ShowDialog(this) 
```

应该管用。附加参数告诉父级如何，并将使其位于父级之上，但不是最顶层。Topmost 意味着即使您激活另一个窗口，该窗口也会停留在您的桌面上。这不是 ShowDialog 的默认行为。正如 JaredPar 提到的，将您的表单/窗口设置为 TopMost=false 为真。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-03T12:54:06.537

```
paywindow.ShowDialog(this) 
```

# .net - 什么进程正在访问我的程序集（在 Visual Studio 中清理项目时删除失败？

> ID：816988
> 
> 赞同：1
> 
> 时间：2009-05-03T12:50:01.290
> 
> 标签：.net, visual-studio, msbuild

我在自定义 msbuild 任务中运行外部进程。此任务在我构建项目 B 时调用的程序集 A 中。一切正常。但是，在尝试清理项目时。Visual Studio 2008 给我一个错误提示“进程无法访问程序集 A，因为它正被另一个进程使用”。重新启动 Visual Studio 可解决此问题。

调用外部进程的代码如下

```
Process process = new Process();
process.StartInfo = new ProcessStartInfo
{
    FileName = @"c:\program.exe",
    Arguments = "",
    UseShellExecute = false,
    CreateNoWindow = true,
    RedirectStandardOutput = true,
    RedirectStandardError = true
};

process.Start();
process.WaitForExit(5000); 
```

我该如何解决这样的问题？

更新：使用 Process Explorer，它告诉我 devenv.exe 对程序集 A 有句柄。为什么以及如何阻止它对它有句柄？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T13:06:12.653

我不完全确定你的问题的目标。您可以使用进程资源管理器找出锁定文件的进程。

像这里的东西：http: [//windowsxp.mvps.org/processlock.htm](http://windowsxp.mvps.org/processlock.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T14:48:51.207

这很正常…… devenv.exe 正在执行该进程，但句柄仍然存在。我不知道你怎么能避免这种情况，但我确信几分钟后手柄可能会消失。

我不确定垃圾收集是否与它有关，但是您是否尝试过这样的事情？：

```
using (Process process = new Process()){

process.StartInfo = new ProcessStartInfo { FileName = @"c:\program.exe", Arguments = "", UseShellExecute = false, CreateNoWindow = true, RedirectStandardOutput = true, RedirectStandardError = true };

process.Start();

process.WaitForExit(5000);
} 
```

这至少会设置对象的范围。

# build-process - 您如何影响集成服务器上的构建？

> ID：816991
> 
> 赞同：2
> 
> 时间：2009-05-03T12:51:44.077
> 
> 标签：build-process, build-automation

假设您有两个开发人员在他们的笔记本电脑（A 和 B）上本地开发一个项目。他们每个人都有 SVN 存储库的工作副本，并且他们在 VS 中进行编码。每个人都有一个功能齐全的应用程序副本。他们在每个停止点都向 SVN 承诺。

你有一个集成/测试服务器 (C)，它有另一个工作副本，只要你想测试它就会更新。

您还拥有生产服务器 (D)，它具有来自 C 的构建后 xcopy。

假设代码是一个 Web 应用程序项目，因此它*需要*显式构建（与只获取源代码并即时构建的网站项目相反）。

您如何在集成服务器 (C) 上进行管理？

如果开发人员在他们的机器（A 和 B）上构建，然后将 DLL 推送到集成服务器（C）......这将不起作用，因为集成服务器必须从它们两者中获取代码并开发一个通用 DLL . 因此，所有源代码都必须到达集成服务器（C），*在那里构建*，并且只有所需的文件和 DLL 被推送到生产环境（D）。

您如何管理集成服务器 (C) 上的构建？您是否从命令行进行了定时构建？您是否在集成服务器（C）上安装 VS 并以这种方式构建？如果从命令行执行此操作，如何管理 VS 通常在 CSPRJ 或 SLN 文件中管理的所需引用和其他设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T12:59:48.317

这个问题的最佳解决方案是使用持续构建解决方案，例如 CruiseControl。您正确识别了自己做的所有陷阱，最终设置第三方软件包会简单得多，而不必自己解决这些问题。

CruiseControl 可以配置为基于颠覆提交、定时或按需构建。此外，它还可以运行您的所有单元测试并在出现问题时提醒人们。这完全是一个非常棒的软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T13:28:31.370

我们还使用来自 svn repo 的 subversion 提交挂钩，它会在每次提交时激活单元测试构建。我们将不同的构建链接起来，因此当单元测试构建为绿色时，集成测试和 Web 测试就会运行。此外，我们真的很想在所有这些结束时链接发布版本，但是我们的集成测试对此不够稳定（开发中具有不良 SLA 的片状后端环境 - 我讨厌它！）。目前我们手动启动发布版本。从质量的角度来看，我们可以从所有绿灯直接进入验收测试服务器，但这意味着您可能希望在验收测试中运行交替映像，因为如果构建系统每次都重新部署，则会造成相当多的停机时间成功的提交已经完成了。（在我们的项目中，我们'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T13:43:13.360

我们使用 Cruise Control 在集成服务器上进行持续集成。我们的巡航控制脚本执行以下步骤：

*   从 cc.net 服务器上的 SVN 下载最新代码
*   执行 MSBUILD 文件以编译下载的最新代码
*   将发布版本复制到单独的文件夹中
*   我们为“Release”构建维护一个单独的文件夹，因此相同的脚本也会在 SVN“Release”分支中提交最新构建
*   执行测试用例 [使用 nUnit 构建]
*   发送包含构建状态和测试执行结果的电子邮件

以上命令均在我们的 CC.net 服务器上配置，并安排在凌晨 1 点执行。为了便于维护，我们在集成服务器本身上部署了 CC.net 服务器。如果它是一个 Web 应用程序，这也有助于我们自动执行我们的测试用例并发送结果。任何代码破坏都会通过电子邮件发送给配置的订阅者，并在第二天采取适当的措施。

一旦集成服务器上一切正常，我们只需“更新”生产服务器上的“发布”分支。

[您可以在此处](http://cruisecontrol.sourceforge.net/gettingstarted.html)找到有关 cc.net 的更多信息

如果您需要脚本方面的帮助，我当然可以为您提供帮助。

# windows-mobile - 使用 ce 4.2 处理持久存储和冷启动

> ID：816993
> 
> 赞同：2
> 
> 时间：2009-05-03T12:52:40.143
> 
> 标签：windows-mobile, compact-framework, mobile, windows-ce, sql-server-ce

我花了整个星期五和星期六来做这件事，但我的想法已经不多了；

我有一个项目，我需要在运行 windows ce4.2 (windows mobile 2003) 的符号 8146 设备上运行 sql ce 和 .net2.0 以及我的应用程序所需的符号库。

当设备冷启动时，用户分区中的所有内容都会被删除。过去我使用符号 memcapture 实用程序来解决这个问题，但这次它说设备上没有足够的空间。

问题是 8146 只有 7 MB 多一点的非意志存储，我需要恢复 10-12 MB 的数据（到目前为止）

有没有其他人遇到过这个并解决了它？我在想我需要编写一个在设备启动时运行的小应用程序并检查所有内容的状态，然后如果需要将内容从紧凑型闪存卡复制回主存储器。

我不知道如何通过编程方式访问 CF 卡，所以我有点难过。

symbol 中还有两个应用程序听起来可能会有所帮助：regmerge.dll 和 copyfiles - 它们仅在冷启动时运行。

只有 10.2 兆字节的东西需要持久化，我知道我可以以某种方式解决这个问题！

我将在星期一早上致电符号技术支持，并在此处发布我提出的任何解决方案（如果有）。

在此期间有什么想法吗？

谢谢，

乔

更新：我已经为它订购了一张 CF 卡，摩托罗拉已经打开了一个箱子 - 我应该在星期二有更多的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T15:04:57.190

设备会一直连接吗？

您可能要考虑不要尝试将所有内容都保留在设备本身上，而是编写一个小型引导程序，该程序将通过无线网络联系 Web 服务器以关闭其余的程序/数据文件。

或者，您可以向 Symbol/Motorala 询问有关 AirBeam 的信息。AirBeam 是他们的软件包部署解决方案。每次启动设备时，它都会检查软件包的更新。

如果您确实需要在离线时重新构建设备，您将需要使用上面提到的紧凑型闪存卡路径以及一个引导程序，以确保安装您需要的每个项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T14:47:32.643

你能进一步压缩数据吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T10:21:28.000

以下是一个小批处理文件，应该处理这个问题，注意您可能需要更改路径名：

```
enter code here 
```

ECHO OFF
REM ----------------------------
REM 安装符号库：
REM ------------ ----------------
如果不存在 "\Windows\AppMgr\Symbol Managed Class Libraries.DAT" 复制 "\Storage Card\symbol.all.arm.cab" \Temp\symbol .all.arm.cab 如果存在 \Temp\symbol.all.arm.cab \windows\wceload.exe /noaskdest \Temp\symbol.all.arm.cab

REM -------------
REM 安装 .NET Framework 2.0
REM ------------- ---------------
如果不存在 "\Windows\AppMgr\Microsoft .NET CF 2.0.DAT" 复制 "\Storage Card\NETCFv2.wce5.armv4i.cab" \Temp\NETCFv2 .wce5.armv4i.cab
如果存在 \Temp\NETCFv2.wce5.armv4i.cab \windows\wceload.exe /noaskdest \Temp\NETCFv2.wce5.armv4i.cab

在我得到一张紧凑型闪存卡之前，我将无法对此进行测试（已订购 - 百思买有一个本地的 149.00 .. naaa ...）

——乔

请注意，我不确定您是否需要确保设备上有命令处理器 - 我会在测试/验证所有内容后在这里发表评论。

# c# - C# Databound ComboBox 自动更新

> ID：816999
> 
> 赞同：2
> 
> 时间：2009-05-03T12:55:41.620
> 
> 标签：c#, data-binding, combobox

我有一个绑定到数据库表的组合框。当用户向表中插入一条新数据时，我希望组合框自动更新以显示此数据，但是我不确定我将如何去做。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-03T13:07:18.737

我的程序中有类似的东西。

每当我的 datagridview 更新时，我都会清空组合框并重新填充它。

类似于（我现在没有可用的代码，但这是一般想法）：

```
if (!combobox.isempty())
{
    combobox.clear()
}

// Fill combobox here 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-03T13:00:29.783

我认为，在您知道向此表添加一些数据的那一刻，您应该调用：

```
yourcombobox.Databind(); 
```

您还必须`yourcombobox.DataSource`在调用之前再次定义属性`Databind()`******```**********