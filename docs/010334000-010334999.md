# StackOverflow 问答 10334000-10334999

# c++ - 数组歧义的基地址

> ID：10334003
> 
> 赞同：1
> 
> 时间：2012-04-26T13:03:42.793
> 
> 标签：c++, c, arrays, pointers

以下代码中的 cc 是保存数组 c 的基地址，还是保存来自“Hello”的字母“H”的地址？如果答案是基地址，那么为什么在执行 cc++ 之后 cc 不增加 8 个字节，因为它应该持有两个指针？

```
void foo(char *cc[])
{
    printf("%x\n",cc);
    cc++;
    printf("%x\n",cc);
}

int main()
{
    char *c[] = {"Hello","World"};
    foo(c);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T13:14:14.470

`c`是一个指针数组。第一个指针 ( ) 指向由字母*Hello*和后跟空字符`c[0]`组成的字符数组。指向另一个字符数组，其中包含*World*后跟空字符。*`c[1]`*

 **所以`cc`会指向`c[0]`如上所述。增量`cc`将与上述相同`c[1]`。

最好把这些东西画在纸上，以便更好地理解发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:14:08.790

它将被递增`sizeof(char*)`，因为数组元素是`char*`：

```
#include <stdio.h>

void foo(char *cc[])
{
    printf("%x %s\n",cc,*cc);
    cc++;
    printf("%x %s\n",cc, *cc);
}

int main()
{
    char *c[] = {"Hello","World"};
    printf("sizeof(char*)=%d\n", sizeof(char*));
    foo(c);
    return 0;
} 
```

输出：

```
sizeof(char*)=4
bf8fd910 你好
bf8fd914 世界

```

> bf8fd914 - bf8fd910 = 4

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:26:17.480

```
void foo(char *cc[])
{
    printf("%p\n",cc);
    cc++;
    printf("%p\n",cc);
}

int main()
{
    char *c[] = {"Hello","World", "yo"};
    foo(c);

    int *p = new int[1];
    int *q = p + 1;
    printf("p = %p and p+1 = %p \n", p, q);

    printf("sizeof(int) = %u, sizeof(dptr)=%u and sizeof
        sizeof(int), sizeof(c), sizeof(*c));
} 
```

每个指针都增加值 = 它指向的元素的大小。
因此，一个 int 指针将增加 4 个字节。
cc = {"hello", "world"} 指针将增加 16 个字节，即每个 ptr * 2
8 个字节，并且 cc = {"hello", "world", "yo"} 指针将增加 24 个字节，即 8 个字节每点 * 3

如果 cc 指针未静态初始化，即 (char **c)，则 c 现在将充当普通指针。它将增加 8 个字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:18:59.660

cc的数组确实有两个指针，第一个指向“hello”，另一个指向“world”！cc是一个存储指针的数组！**

# android - 如何捕获不是用户手动发送的短信？有什么绝招吗？

> ID：10334004
> 
> 赞同：-1
> 
> 时间：2012-04-26T13:03:45.450
> 
> 标签：android, broadcastreceiver, android-contentprovider

由于发送的短信没有广播接收器，我们需要定期轮询短信内容提供者（content://sms/sent），并想出一个方法来捕捉消息已发送（onChange）。这是最容易的部分！

棘手的一点是，是否有可能（可能是一个巧妙的技巧、黑客攻击、解决方法，甚至是现有系统中的漏洞）可以指示用户是手动发送短信还是由其他安装的应用程序自动发送的由某种意图触发的后台服务或接收器！

说啥？可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:19:04.253

如果您的应用程序正在发送短信，那么您可以获得短信发送或未发送的状态，如下所示。由于您没有未发送短信的全球回呼，您无法了解它。

```
 /**
 * Listen to Delivery Reports of sent SMSs
 */
private BroadcastReceiver mSmsDeliveryListener = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        try{
            int result = getResultCode();
            switch (result){
                case Activity.RESULT_OK:
                    //SMS Delivered
                    break;

                case Activity.RESULT_CANCELED:
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                case SmsManager.RESULT_ERROR_NULL_PDU:
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    //SMS Delivery failed
                    break;

                default:
        //SMS Delivery failed
                    break;
                }

            }//End of Switch
        }catch (Exception e) {
            e.printStackTrace();
        }
    }
}; 
```

# php - 从 PHP 发布到 Facebook 墙

> ID：10334005
> 
> 赞同：2
> 
> 时间：2012-04-26T13:03:46.323
> 
> 标签：php, facebook

我正在使用 PHP 向用户的 Facebook 墙发布这个小挑战。已经注册用户并被授权使用 publish_stream 和 offline_access 在他们的墙上发帖。

我需要检索他们保存在我的数据库中的 user_id 并用它来发布到他们的墙上。

这是我的脚本的副本。

```
$query = "select * from user_details ";
//echo $query;
$result = mysql_query($query);
while($rows = mysql_fetch_row($result)) {
    //create message with token gained before
    $post =  array(
        //'access_token' => 'TOKEN HERE',
        'access_token'=>$facebook->getAccessToken(),
        'message' => 'Hello');

    $uid = $rows[uid];

    $res = $facebook->api($uid.'/feed', 'POST', $post);
} 
```

使用`$facebook->api($uid.'/feed', 'POST', $post);`而不是的目的
`$facebook->api('me/feed', 'POST', $post);`是能够获取他们的 user_id 并发布到他们的墙上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:18:00.653

你为什么用`mysql_query`？我们不像 1999 年那样狂欢，现在是 2012 年，所以使用 MySQLi 或 - 我的建议 - PDO。

如果您只是发布到用户墙，则不需要获取特定的用户 ID；使用`/me/feed`很好。如果您试图在朋友墙上发帖，那么这就是垃圾邮件，所以不要这样做。

# android - 自定义小部件：错误膨胀类

> ID：10334012
> 
> 赞同：1
> 
> 时间：2012-04-26T13:04:12.440
> 
> 标签：android, xml, widget

我想调整 AutoCompleteTextView 的过滤器选项，因为它不能识别中间的空格。这就是为什么我创建了一个名为 MyAutoCompleteView 的类：

```
package my.house;

public class MyAutoCompleteView
   extends
      android.widget.AutoCompleteTextView
{

   public MyAutoCompleteView (android.content.Context context)
   {
      super (context);
   }

   public MyAutoCompleteView(android.content.Context context, android.util.AttributeSet attrs)
   {
      super(context, attrs);
   }

   public MyAutoCompleteView(android.content.Context context, android.util.AttributeSet attrs, int defStyle)
   {
      super(context, attrs, defStyle);
   }
} 
```

为了测试这个东西，我将布局 xml 更改为：

```
<my.house.MyAutoCompleteView
    android:id='@+id/search'
    android:layout_height='wrap_content'
    android:layout_width='fill_parent'
    android:singleLine='true'
  ></my.house.MyAutoCompleteView> 
```

因为我使用 Fragments，所以我正在膨胀布局文件。

这是我的片段中的 onCreateView 方法：

```
@Override
   public android.view.View onCreateView (
      final android.view.LayoutInflater inflater,
      final android.view.ViewGroup container,
      final android.os.Bundle savedInstanceState)
   {

      return inflater.inflate (my.house.R.layout.myfragment, container, false);
} 
```

不幸的是，我收到此错误消息：

> android.view.InflateException: Binary XML file line #17: Error inflating class my.house.MyAutoCompleteView

任何想法可能是什么问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:01:29.630

不幸的是，proguard 优化了我的代码并通过构造函数减少了它。Proguard 已禁用并且可以正常工作。

# actionscript-3 - 射击游戏的计数器

> ID：10334021
> 
> 赞同：0
> 
> 时间：2012-04-26T13:04:41.347
> 
> 标签：actionscript-3

我想知道如何创建代码，当拍摄时，将计算我剩下的那个项目的数量？我在做一个射击场；没什么特别的。所以更详细地说，我有 8 个随机出现在屏幕上的怪物，我在侧面有另一个图形，它包含从 8 开始的计数器（怪物数量）。射击一个后，计数器将从 8 下降到 7、6、5、4，...等。

我有一个 Main 类，它包含将怪物放在列表中的所有代码，一个 Monsters 类，它只有动画，最后，另一个板类（计数器）我不知道如何获得计数器像我想要的那样工作。有人认为他们可以提供帮助吗？

此外，该板有一个动态文本字段，上面已经写着“Monster's Left”，它是用 Flash 制作的，我需要它来倒计时。

是的，对不起，这是我正在使用的代码：

```
private var _monsters:Array = []; 

for(var j:uint = 0; j < 8; j++)
{
    var monster:Monster = new Monster();
    this.addChild(monster);
    monster.x = 100 + j * 100;
    monster.y = 475;
    _monsters.push(monster);
    monster.addEventListener(MouseEvent.CLICK, monsterDestroy);
} 
```

上面的代码在主类中：下面是板的代码：

```
import flash.events.Event;

public class Board extends ScoreDisplayBase
{
    private var _monsters:Array = [];

    public function Board()
    {
        super();
        this.addEventListener(Event.ENTER_FRAME, countDown);
    }

    private function countDown(event:Event):void
    {
        //store the monster we clicked on in a new array
        var clickedMonster:monster = monster(event.currentTarget);

        var index:uint = _monsters.indexOf(clickedMonster);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:01:58.180

或者，您可以添加`var alive:Boolean`到您的怪物类，并检查您将遍历您的列表并为每个真实添加 +1 的活怪物的数量。这将更具可扩展性，因为如果您添加或删除怪物，数字将保持准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:27:48.163

啊，好吧，你就那样做……

你应该写一个 onclick-eventlistener。每次单击怪物时，您都会增加单击怪物的数量（并删除或删除该特定怪物）并比较单击的怪物数量是否等于您在开始时启动的数组的大小。

# javascript - 使用自定义绑定、扩展器或自定义函数扩展 Knockout

> ID：10334023
> 
> 赞同：4
> 
> 时间：2012-04-26T13:04:46.543
> 
> 标签：javascript, performance, knockout.js

在扩展 Knockout 的功能时，什么时候适合使用自定义绑定、扩展器和使用“fn”的自定义函数？选择一个而不是另一个时会影响性能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T13:32:25.813

当您尝试完成的功能涉及 UI 和您的数据时，您通常希望选择自定义绑定，因此您需要访问元素并且通常需要一些数据来控制如何处理元素。

`.fn`在这一点上，扩展程序和添加到之间确实没有太大区别。在通过`.fn`.

这通常不是问题，但扩展器只适用于可观察对象和计算可观察对象。使用`.fn`您需要添加功能才能`ko.subscribable.fn`使其对两者都可用。但是，在某些情况下，您的功能可能仅适用于其中一个，因此使用`ko.observable.fn`and`ko.computed.fn`将是更好的选择。

我发现扩展`.fn`是最简洁的语法。如果您确定要返回`this`或包装它的新类型，那么您可以轻松支持链接。扩展器更明确一点，并确保类型的 API 表面区域保持精简（为此值得）。

# android - 加快将 iPad 应用程序移植到 Android 的速度

> ID：10334026
> 
> 赞同：0
> 
> 时间：2012-04-26T13:04:59.967
> 
> 标签：android, ios, porting

我的工作包括将 iPad 应用程序移植到 Android（从 Objective-C 到 Java）。我在 Android 环境中开发过，但从未在 iOS 环境中开发过。目前我正在寻求建议——我想知道是否有一种方法、方法或过程可以帮助我更轻松地做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:27:10.340

在这个阶段，答案通常是否定的，但我有一些建议可能会有所帮助。

*   广泛使用 UIWebView/Webkit - 除了任何 HTML5 媒体（和 SVG），渲染 HTML 时几乎不需要移植。通常，您在一个中渲染的内容在另一个上渲染得很好。

*   如果您的 iOS 应用程序是基本的显示-编辑-那种风格的应用程序，您可能会发现 PhoneGap、jQuery Mobile、Titanium 或新的 Adob​​e 套件是更好的时间投资。

*   由于 Android 缺乏一致的设备基础，这使得开发富含动画的 UI 变得困难，您可能会发现没有 1-1 的 UI 比较。相反，请考虑您提供的功能，以及它们的基础数据和视图模型。

*   您应该能够创建类似的 UIViewController/Activity 结构，尽管幕后的绑定逻辑将是特定于平台的。将其映射到一些纸上 - 它为您的 UI 框架制定了一个非常好的下一步计划。

*   更喜欢“输入数据”和“输出数据”之间的中间抽象，这样您就可以交换解析器/工具包/apis/框架，而无需将所有内容都破解成比特。

*   如果您有自定义绘制例程和图形，请确保您有填充渐变或颜色。Android 使用盒子模型来支持多种屏幕尺寸 - iOS 只有 4 种分辨率需要担心。重新创建相同的外观可能需要太多时间 -[对比柔和的颜色](http://kuler.adobe.com/)是一个很好的占位符，直到您可以证明制作艺术品的合理性。

没有太多可以说[的，以前没有说过的](http://nfarina.com/post/8239634061/ios-to-android)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:00:41.090

几点建议：

*   在大多数情况下，您需要将 UI 重新设计为 iPad，作为平板电脑并且与大多数 Android 设备相比具有更大的屏幕。建议：检查是否有专门用于 iPhone 的应用程序版本，因为它在重新设计阶段可能非常有用。
*   检查 iPad 代码是否包含除 Objective-C 代码之外的 C/C++ 代码。如果有大量代码，您可以考虑使用 Android NDK，它允许 C/C++ 代码与 Java 一起使用。
*   如果 iPad 应用程序使用基于 HTML5/CSS/JavaScript 组合的流行跨平台框架之一（例如 PhoneGap），您可能能够重用大部分代码。负责呈现 HTML5 的 iPad 和 Android 浏览器/ui 元素都基于相同的引擎 (WebKit)，并且通常会产生相似的体验。注意：一些框架允许自定义访问本机功能，这几乎在所有情况下都需要重写。
*   如果与用户界面指南冲突，请勿尝试在 Android 上创建完全相同的 UI。您可能知道这些指南可在以下网址获得：http: [//developer.android.com/guide/practices/ui_guidelines/index.html](http://developer.android.com/guide/practices/ui_guidelines/index.html) Android 用户习惯于某些界面，他们应该获得与其他适用于 Android 的应用程序类似的体验。此外，为 iPad 上存在的 Android 创建类似的控件可能会非常痛苦。如果有压力要做出相同的“外观和感觉”，这里有一篇文章解释了如何抵御这种压力：[将 iPhone 应用程序移植到 Android？如何说服他们不要](https://stackoverflow.com/questions/6358069/porting-iphone-applications-to-android-how-to-convince-them-not-to)
*   iPad 上存在的许多功能在 Android 上将不可用（例如，仅使用图像的 Android 应用程序启动屏幕）。因此分析 iPad 应用程序并将其分解为一组功能。拥有它们后，您可以将它们映射到 Android API 并开始编码。
*   目前还没有 Objective-C 到 Java 的转换器（这可能会在未来发生变化）但是为了总体感觉 Objective-C 和 Java 之间有什么区别，您可能需要阅读 Theresa Ray 的“将 Objective-C 移植到 Java”张量信息系统公司

# sql - 如何有效地使用 min() 和 max()？

> ID：10334031
> 
> 赞同：1
> 
> 时间：2012-04-26T13:05:11.500
> 
> 标签：sql, performance, sqlite, max, min

我有一个 sql 查询，我检查一个值是否在表的最大值和最小值之间。我现在按如下方式实现：

```
SELECT spectrum_id, feature_table_id
FROM 'spectrum', 'feature' 
WHERE `spectrum`.msrun_msrun_id = 1
AND `feature`.msrun_msrun_id = 1
AND (SELECT min(rt) FROM `convexhull` WHERE `convexhull`.feature_feature_table_id =  `feature`.feature_table_id) <= scan_start_time 
AND scan_start_time <= (SELECT max(rt) FROM `convexhull` WHERE 'convexhull'.feature_feature_table_id = 'feature'.feature_table_id)
AND (SELECT min(mz) FROM `convexhull` WHERE `convexhull`.feature_feature_table_id = `feature`.feature_table_id) <= base_peak_mz 
AND base_peak_mz <= (SELECT max(mz) FROM `convexhull` WHERE `convexhull`.feature_feature_table_id = `feature`feature_table_id) 
```

这运行非常缓慢，因为每次运行此查询时我都会从凸包中选择 4 次，因此我尝试使用内部连接对其进行改进：

```
SELECT spectrum_id, feature_table_id 
FROM 'spectrum', 'feature'
INNER JOIN `convexhull` ON `convexhull`.feature_feature_table_id = `feature`.feature_table_id
WHERE `spectrum`.msrun_msrun_id = ? "+ 
AND `feature`.msrun_msrun_id = ? "+
AND min(`convexhull`.rt) <= scan_start_time "+
AND scan_start_time <= max(`convexhull`.rt) "+
AND min(`convexhull`.mz) <= base_peak_mz "+
AND base_peak_mz <= max(`convexhull`.mz)", spectrumFeature_InputValues) 
```

但是，min() 和 max() 语句只能在 select 语句之后使用。如何使第一个查询更有效率，这样我就可以得到 min 和 max rt 和 mz 而不必进行 4 次查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T13:19:52.037

编辑：又过了几分钟，又看了一遍，意识到所有数据都来自那个表，所以这样的东西应该可以工作

```
SELECT 
    spectrum_id
    ,feature_table_id
FROM 
    spectrum AS s
    INNER JOIN feature AS f
        on f.msrun_msrun_id = s.msrun_msrun_id
    INNER JOIN (select 
         feature_feature_table_id
         ,min(rt) AS rtMin
        ,max(rt) AS rtMax
        ,min(mz) AS mzMin
        ,max(mz) as mzMax
     FROM 
        convexhull
     GROUP BY 
         feature_feature_table_id
     ) AS t
     ON t.feature_feature_table_id = f.feature_table_id
WHERE
    s.msrun_msrun_id = 1
    AND s.scan_start_time >= t.rtMin
    AND s.scan_start_time <= t.rtMax
    AND base_peak_mz >= t.mxMin
    AND base_peak_mz <= t.mzMax 
```

我认为您想从凸包表中进行选择，并按 feature_feature_table_id 进行分组，从而获得该分组中的最小和最大 rt。

然后，您可以将该选择包装在括号中，为其命名（如 t）并加入它。

希望这足以让您上路..如果不在这里创建示例模式：http: [//sqlfiddle.com/](http://sqlfiddle.com/)

并输入您的查询，我可以修改它。

作为旁注，我认为您希望在特定字段上加入这些表，而不是使用 where 子句比较从两者中进行选择：

```
SELECT spectrum_id, feature_table_id
FROM 'spectrum', 'feature' 
WHERE `spectrum`.msrun_msrun_id = 1
AND `feature`.msrun_msrun_id = 1 
```

和：

```
SELECT 
    spectrum_id
    ,feature_table_id
FROM 
    spectrum AS s
    INNER JOIN feature AS f
        on f.msrun_msrun_id = s.msrun_msrun_id
WHERE
    s.msrun_msrun_id = 1 
```

如果我有什么问题，请告诉我。

# java - Scala 中的 @throws 不允许调用 Java 来捕获正确的异常类型

> ID：10334035
> 
> 赞同：7
> 
> 时间：2012-04-26T13:05:15.977
> 
> 标签：java, eclipse, scala, exception, scala-ide

我有一些这样的Scala代码：

```
class Callee {
  @throws(classOf[MyCheckedException])
  def doStuff() {
  }
} 
```

像这样从 Java 调用它：

```
public class Caller {

  public static void main(String[] args) {
    // this won't compile; the Java compiler complains that the catch block is unreachable
    // however without the catch block, it complains "unhandled exception MyCheckedException"
    try {
      new Callee().doStuff();
    }
    catch (MyCheckedException e) {

    }
  }
} 
```

删除 catch 块会导致 Java 编译器出错，提示“未处理的异常类型 MyCheckedException”。为 MyCheckedException 添加 catch 块会导致编译器抱怨 catch 块无法访问，因为从不抛出异常。

如果我捕获 Exception 并执行 instanceOf，我可以捕获来自 doStuff 的正确异常，但我认为 @throws 注释应该生成正确的字节码以使正确的 catch 块工作。我错了，还是这里有错误？

作为记录，这是使用 Scala 2.9.2 和 Java 1.6。

**编辑：**它使用 sbt 从命令行编译调用 javac/scalac。该错误仅在 Eclipse 中的 compile-as-you-type 期间很明显，这表明该错误存在于 Eclipse Java 编译器或 IDE 的某些部分中。其他人可以这样复制吗？我正在使用 Eclipse 3.7.2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T14:59:39.377

我可以用 2.9.1 在 Helios 上重现这个。[这是演示编译器中的错误，您应该在http://www.assembla.com/spaces/scala-ide/tickets](http://www.assembla.com/spaces/scala-ide/tickets)上将其作为错误提出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:58:57.923

为了将来参考，这个问题已经修复（https://github.com/scala-ide/scala-ide/commit/055a81cd3fe792e4327668791888c30cf04793f5）。[Scala IDE 2.0.x 和 Helium nightlies](http://scala-ide.org/download/nightly.html)都提供了该修复程序。此外，它将包含在下一个 Scala IDE 2.0.2 维护版本中。

（对不起，额外的噪音，但我意识到有一个答案比一个简单的评论更明显）

# c - 如何以及在何处调用外部定义的结构

> ID：10334040
> 
> 赞同：0
> 
> 时间：2012-04-26T13:05:30.140
> 
> 标签：c, static, extern, linkage

文件：元素.h

```
#ifndef ELEMENT_H
#define ELEMENT_H 

typedef struct Elem {
  char * itag;
  char * cont;
  char * etag;
  struct Elem * previous;
} Element;

void printElement ( Element * );
#endif /* ELEMENT_H */ 
```

我在 element.h 和 element.c 中声明并定义了一个结构`Element`（未显示，但在其中执行了 malloc）。

文件的功能之一`parser.c`应该是访问`Element`. 如果某些条件适用，`Element`则会创建一个新指针，并填充其中一个指针属性。之后的一些迭代，如果其他条件适用，另一个指针属性会得到一些文本。然后，当满足其他一些条件时，`Element`应该将指向的指针传递给另一个文件的函数：`output.c`.

我的问题是：我应该如何以及在哪里打电话`Element`。如果在条件内创建指向它的指针，则`if`它是那里的自动变量。迭代函数时不可见。

我可以声明它`static`，但编译器返回错误`error: 'e' undeclared (first use in this function)`。`if`例如：在迭代 1 中，指针在语句的一个分支中创建；在迭代 2 中，访问了另一个分支，`if`我做了类似的事情`e->etag = "a";`

如果我声明，在（第一个）`extern Element * e;`的第二个分支中会出现相同的错误。`if``else if`

文件输出.c

```
#include element.h
write_element ( Element * e )
{
    write_to_disk(... e->itag, e->etag);
} 
```

文件解析器.c

```
#include "element.h"

# some other functions
void parser ( char * f, char * b )
{
    if ( something ) {
        /* Need to access externally defined Element type structure, but it should be visible in all `parser` function */
        Element * e;
        e->itag = ... realloc(...)
        ...

    } else if (..... ) {
        /* Should assume a pointer to Element is already created */
        e->etag = "a";

    } else if ( .... ) {
        /* Should assume a pointer to Element is already created */
        /* and itag, etag and cont have some text */
        write_element( e );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:09:12.423

编码

```
typedef struct Elem {
  char * itag;
  char * cont;
  char * etag;
  struct Elem * previous;
} Element; 
```

没有定义元素。它只告诉编译器它的结构。没有一个元素被定义。

尝试拥有

```
extern Element myElement; 
```

在头文件中。

在对应的`.c`文件中放

`Element myElement`;

这将保留空间`myElement`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:45:09.963

您应该使用关键字« extern »。例如 ：

**fh :**

```
#ifndef H_LP_F_20120426154230   
#define H_LP_F_20120426154230 

typedef struct Elem {
    char *itag;
    char *cont;
    char *etag;
    struct Elem *previous;
} Element;

extern Element myStruct;

#endif 
```

**fc**

```
#include "f.h"

Element myStruct;
/* nom I can use myStruct */ 
```

# mysql - 使用 MAMP 在 codeigniter 中获取未知事务错误

> ID：10334042
> 
> 赞同：0
> 
> 时间：2012-04-26T13:05:31.440
> 
> 标签：mysql, codeigniter, transactions, mamp

我正在使用 MAMP 和 codeigniter 框架。

* * *

我面临一个非常奇怪的问题。我写的有一个活动记录语句。

```
$this->db->select('user_vcard.pro_pic_filename AS `author_pro_pic_filepath`'); 
```

如果我`AS author_pro_pic_filepath`在 CI 语句中使用，在执行 HTTP 请求后，我会收到一个 SERVER ERROR。然后，如果我尝试刷新页面，我的浏览器会停顿很长时间，然后，在某一时刻，它说

```
Error Number: 1205.
Lock wait timeout exceeded; try restarting transaction 
```

但是，如果我`AS author_pro_pic_filepath`用任何其他名称替换，它就可以正常工作。

* * *

以下是我试图解决问题的方法：

1.  我导出了数据库的 .sql 转储并将其保存在安全的地方
2.  我尝试删除所有表。
3.  我尝试删除整个数据库。
4.  我从表中清除了所有 MySQL 用户权限
5.  我从浏览器中清除了所有 cookie、会话数据
6.  我在 Safari 和 Chrome 上都试过了
7.  我尝试关闭 MAMP。
8.  我试着关闭我的笔记本电脑。
9.  我试着一起做以上所有事情。
10.  我还尝试关闭我的 codeigniter 代码中的所有事务语句。

**结果没有变化**。它总是表现得像我上面提到的那样。

我在我的应用程序的其他几个文件中使用了相同的活动记录语句。到处都运行良好。但只有在这个 ONE 特定文件中，我才面临上述问题。

* * *

SQL查询结果：SHOW ENGINE INNODB MUTEX；

```
Rows: 2

Type    InnoDB  
Name    /users/severin/MAMPexp/MAMP_packages/mysql-5.5.9/storage/innobase/srv/srv0srv.c:1030    
Status  os_waits=1

Type    InnoDB
Name    /users/severin/MAMPexp/MAMP_packages/mysql-5.5.9/storage/innobase/log/log0log.c:832 
Status  os_waits=7 
```

* * *

SQL查询结果：SHOW ENGINE INNODB MUTEX；

```
Rows: 1

Type    InnoDB      
Name    
Status  
=====================================
120426 18:39:04 INNODB MONITOR OUTPUT
=====================================
Per second averages calculated from the last 5 seconds
-----------------
BACKGROUND THREAD
-----------------
srv_master_thread loops: 56 1_second, 56 sleeps, 5 10_second, 8 background, 8 flush
srv_master_thread log flush and writes: 57
----------
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 8, signal count 8
Mutex spin waits 2, rounds 31, OS waits 1
RW-shared spins 7, rounds 210, OS waits 7
RW-excl spins 0, rounds 0, OS waits 0
Spin rounds per wait: 15.50 mutex, 30.00 RW-shared, 0.00 RW-excl
------------
TRANSACTIONS
------------
Trx id counter 8BCB
Purge done for trx's n:o < 8BBD undo n:o < 0
History list length 149
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 0, not started, OS thread id 4531712000
MySQL thread id 55, query id 926 localhost root
SHOW ENGINE INNODB STATUS
---TRANSACTION 8BBB, not started, OS thread id 4531163136
MySQL thread id 44, query id 820 localhost doc2doc
---TRANSACTION 8BBD, ACTIVE 486 sec, OS thread id 4531437568
3 lock struct(s), heap size 376, 2 row lock(s), undo log entries 1
MySQL thread id 45, query id 831 localhost doc2doc
Trx read view will not see trx with id >= 8BBE, sees < 8BBE
--------
FILE I/O
--------
I/O thread 0 state: waiting for i/o request (insert buffer thread)
I/O thread 1 state: waiting for i/o request (log thread)
I/O thread 2 state: waiting for i/o request (read thread)
I/O thread 3 state: waiting for i/o request (read thread)
I/O thread 4 state: waiting for i/o request (read thread)
I/O thread 5 state: waiting for i/o request (read thread)
I/O thread 6 state: waiting for i/o request (write thread)
I/O thread 7 state: waiting for i/o request (write thread)
I/O thread 8 state: waiting for i/o request (write thread)
I/O thread 9 state: waiting for i/o request (write thread)
Pending normal aio reads: 0 [0, 0, 0, 0] , aio writes: 0 [0, 0, 0, 0] ,
ibuf aio reads: 0, log i/o's: 0, sync i/o's: 0
Pending flushes (fsync) log: 0; buffer pool: 0
413 OS file reads, 520 OS file writes, 381 OS fsyncs
0.00 reads/s, 0 avg bytes/read, 0.00 writes/s, 0.00 fsyncs/s
-------------------------------------
INSERT BUFFER AND ADAPTIVE HASH INDEX
-------------------------------------
Ibuf: size 1, free list len 0, seg size 2, 0 merges
merged operations:
insert 0, delete mark 0, delete 0
discarded operations:
insert 0, delete mark 0, delete 0
Hash table size 276707, node heap has 1 buffer(s)
0.00 hash searches/s, 0.00 non-hash searches/s
---
LOG
---
Log sequence number 5050799
Log flushed up to   5050799
Last checkpoint at  5050799
0 pending log writes, 0 pending chkp writes
370 log i/o's done, 0.00 log i/o's/second
----------------------
BUFFER POOL AND MEMORY
----------------------
Total memory allocated 137363456; in additional pool allocated 0
Dictionary memory allocated 114130
Buffer pool size   8192
Free buffers       7736
Database pages     455
Old database pages 0
Modified db pages  0
Pending reads 0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 0, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 402, created 53, written 322
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000, young-making rate 0 / 1000 not 0 / 1000
Pages read ahead 0.00/s, evicted without access 0.00/s
LRU len: 455, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
--------------
ROW OPERATIONS
--------------
0 queries inside InnoDB, 0 queries in queue
2 read views open inside InnoDB
Main thread id 4506259456, state: waiting for server activity
Number of rows inserted 507, updated 2, deleted 0, read 1679
0.00 inserts/s, 0.00 updates/s, 0.00 deletes/s, 0.00 reads/s
----------------------------
END OF INNODB MONITOR OUTPUT
============================ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:27:24.493

***`big time dumb ass`***我的天啊............我花了 2 天时间试图弄清楚这一点，我刚刚证明了自己是一个。

当我没有事先加载帮助器时，我正在调用一个帮助器函数。

原谅我的白痴。

# android - 媒体播放器错误安卓

> ID：10334044
> 
> 赞同：1
> 
> 时间：2012-04-26T13:05:35.150
> 
> 标签：android, media-player

我有一个活动，它有一系列按钮，按下时应该播放音频文件。我一直在尝试使用 MediaPlayer 来实现它，但是我无法让它工作。这是我一直在尝试的代码：

```
 final MediaPlayer mp = new MediaPlayer();
    Button ger1play = (Button) findViewById(R.id.ger1play);ger1play.setOnClickListener(new View.OnClickListener() {
      @Override
      public void onClick(View v) {
          mp.setDataSource(this, R.raw.greet_1);
          mp.prepare();
          mp.start();

      }
  }); 
```

setDateSource 方法似乎不起作用，谁能告诉我哪里出错了？然后我想根据按下的按钮将 mediaPlayer 设置为相关的音频文件，这可能吗？

**更新**

```
 final MediaPlayer mp = new MediaPlayer();
    Button ger1play = (Button) findViewById(R.id.ger1play);ger1play.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
    try {
                        Uri myUri = Uri.parse(R.raw.greet_1);

                       mp.setDataSource(GreetingsLesson.this, R.raw.greet_1);

                       mp.prepare();

                       mp.start();

                    } catch (IllegalArgumentException e) {

                       e.printStackTrace();

                    } catch (IllegalStateException e) {

                       e.printStackTrace();

                    } catch (IOException e) {

                       e.printStackTrace();

                    }
       }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:12:15.973

尝试这个：

```
 final MediaPlayer mp = new MediaPlayer();
    Button ger1play = (Button) findViewById(R.id.ger1play);ger1play.setOnClickListener(new View.OnClickListener() {
      @Override
      public void onClick(View v) {
  try {

                     mp.setDataSource(CurrentActivity.this, R.raw.greet_1);

                     mp.prepare();

                     mp.start();

                  } catch (IllegalArgumentException e) {

                     e.printStackTrace();

                  } catch (IllegalStateException e) {

                     e.printStackTrace();

                  } catch (IOException e) {

                     e.printStackTrace();

                  }
     }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:22:53.520

你是在模拟器中运行这个吗？如果是这样，请检查您的 AVD 管理器是否在硬件下，添加属性“音频播放支持 | 是”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:59:59.803

如果您想使用来自应用程序原始资源或应用程序资产文件的文件之一发送媒体播放器对象，您可以执行以下操作：

```
try {
AssetFileDescriptor fd = getResources().openRawResouceFd(R.raw.greet_1);
mp.setDataSource(fd.getFileDescriptor(), fd.getStartOffset(), fd.getLength());
mp.start();
fd.close();
} catch (IllegalArgumentException e) {
// handle exception
} catch (IllegalStateException e) {
// handle exception
} catch (IOException e) {
// handle exception
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T14:40:18.270

为什么不直接使用

```
mp = MediaPlayer.create(this, R.raw.greet_1); 
```

然后你不需要准备或开始。

# android - 如何为 android API 级别 8 安装 Google Map API

> ID：10334046
> 
> 赞同：2
> 
> 时间：2012-04-26T13:05:36.303
> 
> 标签：android, android-maps

我是 android 新手，你想使用 Google Map API 在 Android（2.2 版）中开发应用程序，我发现了各种类似的教程

[http://www.androidhive.info/2012/01/android-working-with-google-maps/](http://www.androidhive.info/2012/01/android-working-with-google-maps/)

![在此处输入图像描述](../Images/e1a66c4b4d9ea38bd06064aa7678d932.png)

但我无法找到如何在此链接中安装适用于 API 级别 8 的 Google Map API。

任何人都可以向我提供解释旧 API 安装的链接，因为我有 14 级的谷歌地图 API，但我想安装 8 级。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:08:34.407

第 1 步：打开您的 SDK 管理器

![在此处输入图像描述](../Images/f56973a04df2a972a133f646dca3e3ae.png)

第 2 步：在列表中向下滚动以找到您想要的 API 级别

第 3 步：选中您希望的 API 级别的“Google API”复选框

步骤#4：单击“安装包...”按钮并按照提示进行操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:50:56.680

我有同样的问题，显然是因为 sdk 管理器没有更新。我不想更新，所以我无法确认那部分。但是，我可以确认一种方法。

Alan Sha 发布了手动下载 API 的方法。

[https://stackoverflow.com/a/7860557/962685](https://stackoverflow.com/a/7860557/962685)

照他说的做就行了。您必须在清单和项目设置中更改您的 api 级别。

# visual-studio-2010 - 添加对话框 - Visual c++ Express 2010

> ID：10334052
> 
> 赞同：0
> 
> 时间：2012-04-26T13:06:08.687
> 
> 标签：visual-studio-2010

我习惯于使用 Visual Studio 6.0 来开发 c++ API。我已经下载并安装了 Visual c++ 2010 Express，现在我发现自己身处异国他乡！

我做的第一件事是制作一个 hello blank windows 应用程序。那行得通。

接下来，我想我会尝试查看“关于”对话框，但如果我能找到它，那就太糟糕了。我也尝试创建一个新对话框，但不知道如何去做。

所以我的问题是......

如何查看“关于”对话框？

如何添加新对话框？

如果我右键单击项目目录但显示为灰色，我看到有一个“添加资源”。

感觉自己像个白痴，但感谢任何帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:12:11.653

据我所知，c++ express 产品中没有资源编辑器。

请参阅[Windows .rc 文件的免费资源编辑器？](https://stackoverflow.com/questions/381915/free-resource-editor-for-windows-rc-files)

# sorting - 具体的冒泡排序过程

> ID：10334053
> 
> 赞同：1
> 
> 时间：2012-04-26T13:06:09.860
> 
> 标签：sorting, loops, bubble-sort

我正在复习考试，其中一个练习题如下：

*在两次冒泡排序迭代后给出数组的内容（假设首先选择数组左侧的最小值*

43 16 99 12 48 14 62

给出的答案是：

12 14 43 16 99 48 62

我一直在查看我的笔记，试图找出为什么这是正确答案，但我不知道为什么。我在谷歌和维基百科上找到了冒泡排序的例子，虽然这些对我来说很有意义，但它们也很简单，但这更难。

有人可以解释一下 12 14 43 16 99 48 62 是怎么回答的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:14:42.430

我对此感到困惑一分钟，因为确实很难看到，但是一旦您意识到他们是如何做到的，就足够简单了。尽管如此，它还是很愚蠢。

我们正在排序，使最小的数字在左边，但我们*从右边迭代。*所以第一个测试是比较 14 和 62，而不是交换；然后比较 48 和 14，并交换；然后是 12 和 14，什么都不做，等等。一旦你到达左端，回到右端并做第二次通过，你最终会得到给定的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:22:49.280

好的，这与您的老师给出的答案不同，但这是（我希望）对冒泡排序的清晰解释：

因为图片往往胜于文字：[http ://www.algolist.net/Algorithms/Sorting/Bubble_sort](http://www.algolist.net/Algorithms/Sorting/Bubble_sort)

在您的情况下，在第一次迭代之后：

43 > 16 => **16 43** 99 12 48 14 62

43 < 99 => 16 **43 99** 12 48 14 62

99 > 12 => 16 43 **12 99** 48 14 62

99 > 48 => 16 43 12 **48 99** 14 62

99 > 14 => 16 43 12 48 **14 99** 62

99 > 62 => 16 43 12 48 14 **62 99**

第二次迭代：

16 < 43 => **16 43** 12 48 14 62 99

43 > 12 => 16 **12 43** 48 14 62 99

43 < 48 => 16 12 **43 48** 14 62 99

48 > 14 => 16 12 43 **14 48** 62 99

48 < 62 => 16 12 43 14 **48 62** 99

62 < 99 => 16 12 43 14 48 **62 99**

# c# - 使用 Server.Transfer 传递参数但不使用查询字符串

> ID：10334065
> 
> 赞同：3
> 
> 时间：2012-04-26T13:07:35.227
> 
> 标签：c#, asp.net, server.transfer

我有一个注册表单，想将用户转移到成功页面，告诉他一封电子邮件已发送到他的电子邮件。我需要将他的电子邮件从注册页面转移到成功页面。

我找到了关于 Server.Transfer 的信息，但我不知道如何发送参数。我不想使用查询字符串，因为我不喜欢在 URL 中透露信息。

这样做的正确方法是什么（如果可能）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T13:11:27.893

```
Server.Transfer("destination.aspx", true) 
```

您可能会看到上面的代码包含控件被转移到的页面的名称和一个布尔值“True”，以指示在目标页面中保留当前表单状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T13:12:28.623

在您的登录页面中设置一个属性并在其中存储电子邮件。

完成后，做一个`Server.Transfer("~/SuccessPage.aspx", true);`

在您重定向的另一页上，您应该检查类似的内容：

```
if(this.PreviousPage != null) {
    ((LoginPageType)this.PreviousPage).MyEmailProperty;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T13:16:15.597

当您使用服务器传输时，您只需将执行移动到不同的服务器处理程序，用户将看不到新的 url 或参数，因此可以安全地进行此传输。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T13:46:28.660

我宁愿建议您以不同的方式进行操作。

当用户单击注册按钮时，您验证一切，然后从仍然当前页面发送电子邮件（因此您根本不需要将数据传输到另一个页面）。如果一切顺利，您只需重定向：

Response.Redirect("/order/success.aspx");

如果出现问题（验证错误、发送电子邮件导致异常），您仍然在正确的页面上进行重试。在大多数情况下，我根本不会使用 Server.Transfer。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T13:09:38.990

您必须在某处保留该值。显而易见的选项在 Session 对象或数据库中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-05T08:00:10.980

对于这种用例。您可以使用 Context.Items 使用键保存数据，并使用您正在执行 Server.Transfer 的子页面中的相同键读取值。Context.Items 对您来说是一种按请求范围内的缓存。
`Context.Items['DataKey'] = Data;`
`Server.Transfer("~/AnyRouteRelativePath", true);`

# android - 获取 WebView 导航事件

> ID：10334067
> 
> 赞同：0
> 
> 时间：2012-04-26T13:07:37.567
> 
> 标签：android

我正在一个可以将推文发布到 twitter 的 android 应用程序中工作，并且我正在使用 Web View 小部件进行操作。如果用户未登录，它将转到登录屏幕，如果它是登录用户，它将转到推文页面。我的要求是在我的应用程序发推文后，它应该**返回到我的应用程序**。我如何通过 WebView 处理这种情况。我将如何从我的 WebView 获取重定向 url。

请帮我。

请查看我的代码：

```
public class TestTwittershareActivity extends Activity {
    WebView webview;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        webview = (WebView) findViewById(R.id.webview);
        webview.getSettings().setJavaScriptEnabled(true);
        webview.loadUrl("http://www.twitter.com?status=");
        webview.setWebViewClient(new HelloWebViewClient());
    }

    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && webview.canGoBack()) {
            webview.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    private class HelloWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);

            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:02:35.033

如果我正确理解您的问题，您需要一种方法来检查用户是否已完成发送推文。你最好的办法是检查你的 web 视图中加载的 url。希望这个 url 有某种迹象表明推文已经完成（也许在状态部分？）。要检查 url，您可以使用您已经创建的 HelloWebViewClient 类并覆盖它的 onPageFinished 方法。例如这样的：

```
@Override
public void onPageFinished(WebView view, String url) {
    super.onPageFinished(view, url);
    if (url.contains("status=DONE")) {
        // start your activity here
    }
} 
```

如果您无法根据 url 检测到用户已完成，那么事情就会复杂得多。在这种情况下，您可以尝试添加允许您[提取已加载页面的 html 的](https://stackoverflow.com/q/4543663/741249)javascript，并且您必须解析 html 以查找用户是否完成的线索。

# html - CSS条件注释不起作用

> ID：10334068
> 
> 赞同：1
> 
> 时间：2012-04-26T13:07:43.213
> 
> 标签：html, css, conditional

我有一个在 Chrome、IE 和 FF 中没有正确排列的 div。Chrome 需要一个 padding-left:40px; 而 IE 和 FF 则没有。我一直在玩 if 几个小时，我知道我错过了一些简单的东西。这是我一直在尝试的：

```
<!--[if !IE]>-->
<link href="non-ie.css" rel="stylesheet" type="text/css">
<!--<![endif]--> 
```

我也尝试过正常的 style.css：

```
<!--[if !IE]--> 
#lower .expo {padding-left:40px;}
<!-- <![endif]--> 
```

或#lower .expo {width:400px; 填充顶部：40px；向左飘浮;}

我也试过这个：

```
#lower .expo {width:400px; padding-left:40px; padding-top:40px; float:left;}
<!--[if gt IE 6]> 
#lower .expo {width:400px; padding-top:40px; float:left;}
<!-- <![endif]--> 
```

有趣的是，如果我这样做：

```
<!--[if gt IE 6]> 
#lower .expo {width:400px; padding-top:40px; float:left;}
<![endif]-->
#lower .expo {width:400px; padding-left:40px; padding-top:40px; float:left;} 
```

IE 显示正确但 FF 或 Chrome 不正确。这让我疯狂。我一定错过了一些简单的东西，但我已经看了太久了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T13:10:22.743

只是为了您的实际错误，它在于您如何进行评论。它应该是：

```
<!--[if !IE]><!-->
<link href="non-ie.css" rel="stylesheet" type="text/css">
<!--<![endif]--> 
```

* * *

为了比这更好的方法，这就是我使用的：

```
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="ie6"    lang="en"><![endif]-->
<!--[if IE 7]>    <html class="ie7"    lang="en"><![endif]-->
<!--[if IE 8]>    <html class="ie8"    lang="en"><![endif]-->
<!--[if IE 9]>    <html class="ie9"    lang="en"><![endif]-->
<!--[if IE 10]>   <html class="ie10"   lang="en"><![endif]-->
<!--[if !IE]><!--><html class="non-ie" lang="en"><!--<![endif]--> 
```

这样做的好处是您可以保持仅使用 1 个样式表的最佳实践。你只需在你的目标前面加上你想破解的相应的 IE 类。

例如： `.ie6 #target-id`

* * *

如需更深入的解释，请查看[Paul Irish 的](http://paulirish.com/about/)文章：

[条件样式表 vs CSS hacks？答：都没有！](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)

**更新：**

> 2012.01.17：这是我们在 HTML5 Boilerplate 中的当前迭代。实际上，我们试图将其减少到 IE ≤8 的单个 .oldIE 类（与安全的 css hack 一起使用），但这并没有成功。无论如何，我们当前的版本..
> 
> ```
> <!--[if lt IE 7]><html class="lt-ie9 lt-ie8 lt-ie7"><![endif]-->
> <!--[if IE 7]><html class="lt-ie9 lt-ie8"><![endif]-->
> <!--[if IE 8]><html class="lt-ie9"><![endif]-->
> <!--[if gt IE 8]><!--><html class=""><!--<![endif]--> 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:15:25.593

尝试下载这个 javascript 文件。[http://firststepdesign.org/browserselect.js](http://firststepdesign.org/browserselect.js)然后将它链接到你的 html 中。

```
<script src="browserselect.js" type="text/javascript"></script> 
```

之后转到您的 css 并使用它们为不同的浏览器选择特定的 css。

只有 Internet Explorer 会检测到这一点。

```
.ie .example {
  background-color: yellow
} 
```

只有 Firefox 会检测到这一点。

```
.gecko .example {
  background-color: gray
} 
```

只有 Safari 和 Chrome 会检测到这一点。

```
.webkit .example {
  background-color: black
} 
```

如果您需要更多评论，希望这会有所帮助。

# php - preg 替换以生成链接

> ID：10334069
> 
> 赞同：0
> 
> 时间：2012-04-26T13:07:50.770
> 
> 标签：php, preg-replace, preg-match

我正在开发一个简单的 cms，在某些情况下，我想在数据库中存储一个可能包含一些链接的段落，但我不想在数据库中存储 html 代码，我希望它如下所示：

一些文字，一些文字||关键字||http://an-external-site.com/keyword|| 一些文字和一些文字

然后使用php生成这样的链接：

一些文字，一些文字 <a href="http://an-external-site.com/keyword">关键字</a> 一些文字和一些文字

那么，该怎么做呢？例如 preg_replace()

有没有办法让 url 使用预定义的变量指向我网站内的内部页面，例如

一些文字，一些文字||关键字||MS/关键字|| 一些文字和一些文字

这将是：

一些文字，一些文字 <a href="http://mysite.com/keyword">关键字</a> 一些文字和一些文字

其中 MS 指的是我的网站，例如[http://mysite.com/](http://mysite.com/)

所以这里 php 函数获取模式，然后决定是简单地使用示例 1 中的完整 url 还是用等于[http://mysite.com/的预定义变量替换 MS](http://mysite.com/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:13:58.297

我建议使用类似[bbcode](http://freecode.com/projects/bbcode)的类来直接获取项目中的非 html 代码。

如果您仍想使用正则表达式，您可以使用如下内容：

```
$pattern = '=^(.*)<a(.*)href\="?(\S+)"([^>]*)>(.*)</a>(.*)$=msi';
while (preg_match($pattern, $row, $txt))
{
  /* $txt[3] holds the link. */
  echo $txt[3]."\n";

  $row = $txt[1]." here was a link ".$txt[6];
}

/* print $row */
print "<br>".nl2br($row); 
```

# ruby-on-rails - Capybara + Selenium + RSpec — 将 JS 设置为 true 时的 LoadError

> ID：10334071
> 
> 赞同：8
> 
> 时间：2012-04-26T13:07:57.360
> 
> 标签：ruby-on-rails, selenium, rspec, capybara

当我将我的 rspec 测试之一设置为 :js => true 时，我收到以下错误。我正在使用以下版本：

Rails — 3.2.2
Rspec — 2.9.0
Capybara — 1.1.2

根据文档，Capybara 应该通过 Selenium 使用 :js => true 运行任何规范。我尝试将 Selenium 添加到我的 Gemfile 中，以防 Capybara 无法找到它，但这不起作用。

```
1) UserSignups GET /signup supports js
 Failure/Error: visit signup_path
 LoadError:
   no such file to load -- {
     "frozen": {
       "app.update.auto": false,
       "app.update.enabled": false,
       "browser.download.manager.showWhenStarting": false,
       "browser.EULA.override": true,
       "browser.EULA.3.accepted": true,
       "browser.link.open_external": 2,
       "browser.link.open_newwindow": 2,
       "browser.offline": false,
       "browser.safebrowsing.enabled": false,
       "browser.safebrowsing.malware.enabled": false,
       "browser.search.update": false,
       "browser.sessionstore.resume_from_crash": false,
       "browser.shell.checkDefaultBrowser": false,
       "browser.tabs.warnOnClose": false,
       "browser.tabs.warnOnOpen": false,
       "devtools.errorconsole.enabled": true,
       "dom.disable_open_during_load": false,
       "extensions.autoDisableScopes": 10,
       "extensions.logging.enabled": true,
       "extensions.update.enabled": false,
       "extensions.update.notifyUser": false,
       "network.manage-offline-status": false,
       "network.http.phishy-userpass-length": 255,
       "offline-apps.allow_by_default": true,
       "prompts.tab_modal.enabled": false,
       "security.fileuri.origin_policy": 3,
       "security.fileuri.strict_origin_policy": false,
       "security.warn_entering_secure": false,
       "security.warn_entering_secure.show_once": false,
       "security.warn_entering_weak": false,
       "security.warn_entering_weak.show_once": false,
       "security.warn_leaving_secure": false,
       "security.warn_leaving_secure.show_once": false,
       "security.warn_submit_insecure": false,
       "security.warn_viewing_mixed": false,
       "security.warn_viewing_mixed.show_once": false,
       "signon.rememberSignons": false,
       "toolkit.networkmanager.disable": true,
       "toolkit.telemetry.prompted": 2,
       "toolkit.telemetry.enabled": false,
       "toolkit.telemetry.rejected": true
     },
     "mutable": {
       "browser.dom.window.dump.enabled": true,
       "browser.startup.page": 0,
       "browser.startup.homepage": "about:blank",
       "dom.max_script_run_time": 30,
       "dom.report_all_js_exceptions": true,
       "javascript.options.showInConsole": true,
       "network.http.max-connections-per-server": 10,
       "webdriver_accept_untrusted_certs": true,
       "webdriver_assume_untrusted_issuer": true
     }
   } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T15:08:13.967

我现在有同样的问题 3 天了！这让我发疯了！

**简短回答：**降级`selenium-webdriver`到`2.21.1`

**长解释：** 在深入研究源代码后，我可以验证问题`selenium-webdriver` `2.21.2`出在 Rails 应用程序中（我个人在 rails 3.0.x 上测试）。

可以在这里找到有问题的代码行[http://code.google.com/p/selenium/source/browse/trunk/rb/lib/selenium/webdriver.rb?r=16651#78](http://code.google.com/p/selenium/source/browse/trunk/rb/lib/selenium/webdriver.rb?r=16651#78)

根本原因是在 Rails 应用程序中，该类`ActiveSupport::Dependencies::Loadable`定义了一个调用`load`on的类级别方法`Object`，因此检查`MultiJson.respond_to?(:load)`总是返回`true`但它的`load`方法错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-01T00:17:06.680

这也可以通过将 multi_json 升级到最新版本来解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:50:56.107

我遇到了同样的问题，我的解决方案是更改我正在使用的驱动器。例如：

```
scenario "answering the quiz for my recipient", :js => true, :driver => :rack_test do
    click_button "Continue"
end 
```

这样我使用 rack_test 而不是 selenium-webdrive （ Capybara 的默认值）。

希望这对你有帮助！

# jquery - 使用 Fancybox 缩放较小的图像

> ID：10334079
> 
> 赞同：0
> 
> 时间：2012-04-26T13:08:21.083
> 
> 标签：jquery, image, resize, fancybox

我想知道是否有一种简单的方法可以在fancyBox（2.0.6）容器中缩放较小的图像。

现在，当我有高分辨率图像时，我的页面可以正常工作，fancybox 会缩放到视口。

我想要做的是如果有一个小图像（比如 200x300 像素），我想调整该图像的大小以适应视口。我知道它的质量会下降，但我仍然希望它扩大规模。

这可以做到吗？我在 fancyBox API 中找不到任何东西可以做到这一点，也没有插件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:48:55.343

为了保持纵横比我修改了上面

```
afterShow: function(){
 wh = $(window).height()/this.height;
 ww = $(window).width()/this.width;
 if (wh<ww)
 {
         this.height = this.height*wh;
         this.width = this.width*wh;
 }
 else
 {
         this.height = this.height*ww;
         this.width = this.width*ww;
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T16:34:19.187

这是可行的，但过渡看起来真的很奇怪（因为不是正常的工作方式，而是迫使高档）

假设你有这个 html：

```
<a class="fancy" href="images/01.jpg">open small image and upscale</a> 
```

你可以试试这个脚本：

```
$(document).ready(function(){
 $(".fancy").fancybox({
  afterShow: function(){
   this.height = $(window).height();
   this.width = 'auto'
  }
 }); // fancybox
});//ready 
```

PS。使用风险自负

# python - 使用python静态类C#/Java风格，作用域差异报错

> ID：10334083
> 
> 赞同：0
> 
> 时间：2012-04-26T13:08:41.323
> 
> 标签：python, class, static

我有两个文件，分别是game.py 和map.py。以下简化代码位于其中：

```
from PyQt4.QtGui import *
from PyQt4.QtCore import *

from datetime import *

from map import *

class Game:

    Scene = QGraphicsScene
    View = QGraphicsView

    @staticmethod
    def start():
        Game.App = QApplication(sys.argv)       
        Game.Scene=QGraphicsScene();    

        Game.Scene.setBackgroundBrush(QBrush(QColor(Qt.green)));

        Game.View=QGraphicsView(Game.Scene);
        print Game
        map=Map()

        Game.App.exec_()

if __name__=='__main__':
    Game.start() 
```

和文件map.py：

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from game import *
class Map(QObject):
    def __init__(self,parent=None):
        super(Map,self).__init__(parent);
        print Game
        v=Game.View
        print v
        v.setWindowTitle("sth") 
```

运行 game.py 结果

```
__main__.Game
game.Game
<class 'PyQt4.QtGui.QGraphicsView'>
Traceback (most recent call last):
  File "/home/abiusx/workspace/borj/trunk/game.py", line 119, in <module>
    Game.start()
  File "/home/abiusx/workspace/borj/trunk/game.py", line 66, in start
    map=Map()
  File "/home/abiusx/workspace/borj/trunk/map.py", line 16, in __init__
    v.setWindowTitle("asb")
TypeError: QWidget.setWindowTitle(QString): first argument of unbound method must have type 'QWidget' 
```

问题是，map.py 中引用 Game.View 的代码将其检测为一个类（如在类主体中定义的那样），而不是被覆盖的内容（实际实例）。Game 在 game.py 中也称为**main** .Game 但在 map.py 中称为 game.Game

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:19:13.053

> map.py 中引用 Game.View 的代码，将其检测为一个类

那是因为`View = QGraphicsView`将它设置为一个类。它仅在您运行时成为一个实例`Game.start`。（老实说，我不明白你为什么`class`最初将这个类变量设置为一个对象，或者为什么这个`Game`类存在。）

> Game 在 game.py 中也称为 main.Game，但在 map.py 中称为 game.Game

`__main__`当您将模块作为脚本运行时，模块名称将更改为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:45:41.420

每当在 Python 中读取文件时，当它到达一个类定义时，它就会定义该类。

在我的场景中，游戏和地图都相互依赖。这是python中众所周知的循环引用问题。我添加了另一个模块 main.py，在其中使用了游戏和地图，在地图中使用了游戏。问题解决了。

# .net - .NET Remoting 给出 KRB_AP_ERR_MODIFIED 错误

> ID：10334084
> 
> 赞同：0
> 
> 时间：2012-04-26T13:08:41.730
> 
> 标签：.net, remoting, kerberos

我们的应用程序有错误，希望有人能提供帮助。以下是正在发生的事情的摘要：

1) 我们的应用程序具有 3 层架构——Silverlight 应用程序、Web 层和后端业务逻辑层。

*   业务逻辑层（主要是遗留代码）作为 Windows 服务运行。
*   我们为每个客户提供一项服务。
*   系统中有多个业务逻辑服务器，每个都为我们的客户运行多个 Windows 服务
*   Silverlight 浏览器应用程序将通过一组 WCF Web 服务与 Web 层通信，而 Web 层将通过 .NET Remoting 与业务逻辑通信。
*   每个客户端的 Windows 服务在启动时都会为远程端点建立一个 TCP 端口。
*   Web 层的作用是获取传入请求并将其路由到正确的服务。

2) 我们的 SilverLight 应用程序中存在零星问题。用户将在界面中看到一条消息，显示“无法为源 'ExceptionManagerInternalException' 打开日志。您可能没有写访问权限”或“对 SSPI 的调用失败，请参阅内部异常。” 这两个错误都是由同一个问题引起的，在系统上具有管理员权限的用户将看到第二条消息，“普通”客户端用户将看到第一条消息。

3) 可以在 Web 服务器上的任一事件日志中看到有关错误的更多详细信息。在系统事件日志中，我们看到：

> Kerberos 客户端收到来自 aaa$ 的 KRB_AP_ERR_MODIFIED 错误。使用的目标名称是 HOST/bbb.cab.local。这表明目标服务器未能解密客户端提供的票证。当目标服务器主体名称 (SPN) 在目标服务使用的帐户以外的帐户上注册时，可能会发生这种情况。请确保目标 SPN 已在服务器使用的帐户上注册，并且仅在该帐户上注册。当目标服务使用的目标服务帐户密码与 Kerberos 密钥分发中心 (KDC) 用于目标服务帐户的密码不同时，也会发生此错误。请确保服务器上的服务和 KDC 都更新为使用当前密码。如果服务器名称不是完全限定的，则目标域 (domain.

4) 我们已经捕获了跟踪文件，这些文件允许我们看到在我们得到这个错误时发生的事件：

*   SOAP 调用进入 Web API (WCF)
*   客户端 ID 从 http 标头中恢复。客户端 ID 允许我们唯一标识在浏览器实例上工作的用户，并在客户端首次登录系统时被放入标题中。当他们登录时，我们还在 Web 服务器上缓存了客户端 ID 以及他们连接的服务。这是在我们端点上的 WCF 行为中实现的。
*   使用此查找，系统的地址（即服务器的名称和 tcp 端口）和服务的 SPN (HOST\) 被放入线程存储中。
*   我们已使用日志记录 (NLOG) 来确认此过程是否正常进行
*   然后，Web 层上的代码将对服务器进行 .NET Remoting 调用。
*   然后，Web 层中的代码对业务逻辑层进行 .NET Remoting 调用。在 ClientChannelSink 中，我们从线程存储中获取服务器的地址和 SPN，并配置远程调用以到达正确的目的地。NLOG 跟踪已确认从线程存储中检索到正确的详细信息并用于配置调用。我们看到了一条跟踪，其中 UserA@domain.local 使用 HOST\aaa 的 SPN 请求访问 aaa）。
*   从网络监视器跟踪中，我们可以看到 DNS 包并为服务器名称返回正确的 IP 地址。
*   从网络监视器跟踪中，我们可以看到向 ​​DC 发出了 Kerberos 票证请求。
*   此请求将包含与预期不同的服务器的 SPN（在我们的跟踪中，请求要求 HOST\bbb）
*   Kerberos 票证服务为请求的服务 (HOST\bbb) 的用户 (UserA@domain.local) 返回一个有效的 Kerberos 票证
*   使用错误服务的有效 Kerberos 票证将请求发送到预期服务（服务器 aaa）。
*   服务（在服务器 aaa 上）拒绝该请求。这是合法的，因为 Kerberos 票证不是用于 HOST\aaa 而是 HOST\bbb

我认为事件日志中的任何“建议”都不是导致此问题的原因： - 我们的系统上没有任何重复的 SPN - 两台计算机在同一个域中 - 问题是零星的；消息中列出的问题看起来总是会导致完全失败。

我已经阅读了有关 asp.net 线程敏捷性的信息，但我认为这不会导致此问题，因为我们总是将请求发送到正确的服务器，但使用了错误的 Kerberos 票证。如果我们使用线程存储中的“错误”设置，那么我们会将请求发送到错误的服务器，并为该服务器提供匹配的 Kerberos 票证。对原因或如何进一步调查此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:18:45.003

我不确定您的后端接口，但您不需要明确传递 Kerberos 票证本身。您只需要创建 Windows 主体并确定是否要允许在您的服务器中进行模拟。如果是这样，那么您必须通过在域中创建 SPN 来信任给定的委派服务。

您是否为域中的业务层/数据层 HOST\aaa 服务器的帐户和地址定义了 SPN？

您的另一个选择是在您的业务逻辑中完全绕过委托，在前端执行登录，然后使用它在您的应用程序中创建您自己的安全权限。这样，您根本不需要在业务/数据层内传递 kerberos 令牌。

# php - 我可以只使用 NOSQL 编写整个应用程序吗？

> ID：10334086
> 
> 赞同：4
> 
> 时间：2012-04-26T13:09:00.233
> 
> 标签：php, mysql, nosql, relational-database

我正在计划一个打算存储大量用户数据的应用程序。我很关心数据重审的速度。
我听说过一点关于 NOSQL 的知识，并且知道它提供了比关系数据库更好的性能。所以我打算使用 NOSQL（最好是 MongoDB）作为我的主要数据库系统。

我想问是否真的有可能仅使用 NOSQL 甚至将其用作我的主数据库来创建整个应用程序。我在正确的道路上吗？我还需要使用关系数据库（MySQL）吗？

我在 NOSQL 技术方面完全是新手，如果有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:15:39.317

大多数 NoSQL 数据库，包括 MongoDB 都是水平扩展的——这意味着您将通过向 MongoDB 集群添加更多机器来扩展性能，以便在您增加流量时保持性能。

*您*是否可以仅使用 MongoDB 编写应用程序取决于您如何构建对象模型以及如何进行编码——但是有许多站点不使用其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:14:18.203

我不知道它们是否“更快”，即使它们是，我也不会将其用作您的主要动机。像 mongo 这样的基于文档的数据库与 SQL 数据库根本*不同。*您应该先尝试一下，确保您了解其中的区别。

是否可以使用 mongo（或 SQL）编写整个应用程序取决于应用程序，不是吗？我建议*不要*在同一个应用程序中使用两个单独的数据库引擎，除非有一些特定的（和不寻常的）理由这样做。IE。最好的办法是评估你的选择并选择最合适的**一个**。

# javascript - 如何删除上一页。上一个对象？Javascript .prev().remove();

> ID：10334087
> 
> 赞同：0
> 
> 时间：2012-04-26T13:09:02.790
> 
> 标签：javascript, jquery

就像是

```
<input name="fails[]" type="file" size=40 /><br />
<textarea name="apraksts[]">About</textarea>
<a href="#" onclick="remove(this);return false".....>remove</a> 
```

和javascript：

```
function remove(obj){
 $(obj).prev('textarea').remove();
 $(obj).prev('input').remove();
 $(obj).remove();
 } 
```

为什么它不删除输入（为什么不删除两个对象）？

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:11:15.007

prev 的文档说：

> 获取匹配元素集中每个元素的前一个同级元素，可选地由选择器过滤。

删除 后`<textarea>`，该元素是`<br>`. 由于它不匹配`input`，因此生成的 jQuery 对象不包含任何元素。然后删除那些 0 个对象。

* * *

我怀疑解决该问题的更好方法是将所有元素包装在 a `<div>`（或具有更适合上下文语义的容器中）并删除*它*（而不是依次删除每个元素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:21:04.237

或者您也可以使用 prevAll。这将选择所有先前的兄弟元素，然后由您的选择器过滤：

$(obj).prevAll('input').remove();

# php - 使用数组变量将字符串变量从 PHP 发送回 ajax...？

> ID：10334090
> 
> 赞同：0
> 
> 时间：2012-04-26T13:09:13.640
> 
> 标签：php, javascript, jquery, html, sql

我想在 PHP 变量中保存一条消息，并将它与已经返回的其他数组变量一起发送回去。例如，我在 PHP 代码中进行了一些错误检查，并且想要一个带有特定消息的字符串变量，以便在我的 javascript 中使用。

这是PHP：

```
<?php
    include('config-searchres.php');

    $term = $_POST['resid'];
    $sql = mysql_query("SELECT * FROM ap_form_8 WHERE id = '$term'"); //select first name (element_1_1) from form #8

    if ($row = mysql_fetch_array($sql)){  //if reservation number exists
        if ($row['element_11'] != 'Cancelled'){  //if reservation has not already been cancelled
            if (strtotime($row['element_3']) >= strtotime(date("Y-m-d"))){  //if reservation has not already passed date
                echo json_encode($row);
            }
            else  //Reservation already passed (old reservation)
            {
                echo 'passed';
            }
        }
        else  //Reservation already cancelled
        {
            echo 'cancelled';
        }
    }
    else  //Reservation not found
    {
        echo 'not found';
    }
    mysql_close();
?> 
```

如您所见，有 3 条不同的消息，“已通过”、“已取消”和“未找到”...如果存在这些条件之一，我想将此字符串发送回我的 javascript，以便我可以显示它在一个 DIV 中。但是，我也想用它发送 $row 数据。

我的JavaScript：

```
 <script type="text/javascript">
        $(document).ready(function(){
            resetForms('reservation');
            $('#form-reservation').submit(function(event){ 
                event.preventDefault();  //the page will no longer refresh on form submit.
                var resCheck = $(this).find('input[class="reservationid"]').val(); //now we have the reservation ID, let's perform our check.
                $.ajax({ 
                    url: 'inc/searchres.php', 
                    type: 'POST',
                    data: 'resid='+resCheck, 
                    success: function(data){  //data is all the info being returned from the php file 
                        $('#reservation-id').val(resCheck);  //add read ID back into text box
                        var jsonData = $.parseJSON(data);  //parse returned JSON data so we can use it like data.name, data.whatever 
                            //****I wanted the line just below this to display the appropriate message sent back from the PHP****
$("#res-message").html('<a>Reservation ID Located, Information is displayed below</a>');
                            $('#json-reservation').populate({personal_first_name:jsonData['element_1_1'],personal_last_name:jsonData['element_1_2'],personal_phone_1:jsonData['element_7'],personal_email:jsonData['element_2'],reservation_status:jsonData['ADD THIS CELL'], reservation_id:jsonData['id'], reservation_date:jsonData['element_3'],reservation_time:jsonData['element_4'],reservation_party:jsonData['element_5'],reservation_special_request:jsonData['element_6'],reservation_using_coupon:jsonData['element_9'],reservation_coupon_code:jsonData['element_10'],reservation_status:jsonData['element_11']});
                            $("#res-cancel-message").html('');
                    },
                    error: function(){
                        $("#res-message").html('<a>There was an error with your request</a>');
                        $("#res-cancel-message").html('');
                    }
                });
            });
        });
        </script> 
```

我用星号标记了此时我用静态消息填充 DIV 的位置，这是我将从 PHP 填充消息的行。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:13:53.393

您总是可以稍等片刻回显 json 编码的 $row。添加 $row 并将您的消息发送到一个数组变量，您可以对它进行 json 编码并回显。

不能 100% 确定语法细节/点

```
$response_array = array('message' => 'yourmessage', 'row' => $row);
echo json_encode($response_array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:12:18.520

您可以将该消息添加为您的 JSON 属性之一，然后适当地搜索它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:12:53.243

只需从服务器传递适当的消息。让我们假设您的消息在**消息**变量中：

$("#res-message").html('' + data.message +'预定ID已定位，信息在下方');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:17:00.820

当您将行数据转换为 $row 时，它就是一个数组。如果您敢，您可以在 json_encode 之前将您的消息添加到该数组中。

```
$row["message"] = ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T13:41:56.673

两个都用ajax发送。就像不要在 if else 的正文中回显任何内容，只需将消息存储在变量中，例如`$message = 'passed'`，现在在 php 请求页面的末尾执行此操作：

```
echo json_encode(array('message_js'=>$message, 'row_js' => $row)); 
```

这会发送 json 数组作为响应，因此您可以在其中发送尽可能多的变量。只需将它们放入 array() 并将它们转换为 json 使用`json_encode()` 转换为 json 并作为响应传递。当收到您的 ajax 成功函数时，只需解码两个 json 变量 :`message_js`和`row_js`.

你可以使用 jquery 的 parsejson 来获取你的变量然后

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T13:21:16.777

你可以这样做：

```
$result = array();

if ($row = mysql_fetch_array($sql)){  //if reservation number exists
    if ($row['element_11'] != 'Cancelled'){  //if reservation has not already been cancelled
        if (strtotime($row['element_3']) >= strtotime(date("Y-m-d"))){  //if reservation has not already passed date
            $result = array('status' => 'OK', 'data' => $row);
        }
        else  //Reservation already passed (old reservation)
        {
            $result = array('status' => 'passed', 'data' => $row);
        }
    }
    else  //Reservation already cancelled
    {
        $result = array('status' => 'cancelled', 'data' => $row);
    }
}
else  //Reservation not found
{
    $result = array('status' => 'not found', 'data' => null);
}

echo json_encode($result); 
```

# playframework-2.0 - 如何在 Play Framework 2.0 中像在 PLAY 中一样开始手动测试！v1?

> ID：10334098
> 
> 赞同：2
> 
> 时间：2012-04-26T13:09:36.327
> 
> 标签：playframework-2.0

我为 Play 编写了一个简单的测试类！2.0：

```
public class TestLogin {

    @Test
    public void test() {
    running(testServer(3333, fakeApplication(inMemoryDatabase())), HTMLUNIT, new Callback<TestBrowser>() {
        @Override
        public void invoke(TestBrowser browser) {
        browser.goTo("http://localhost:3333");
        assertThat(browser.$("section h1").first().getText()).isEqualTo("Login");

        }
    });
    }
} 
```

在 Play v1 中，您可以执行以下命令：

```
play test 
```

你可以 goto `http://localhost:9000/@tests`。但是现在在 Play 2.0 中这不起作用并且没有记录？我只想开始我的 Selenium 测试，手动（每个测试用例/方法）和自动化（一堆测试用例）。

这在 Play2.0 中如何实现？

顺便说一句：在我的终端中运行命令**play test**输出以下内容：

```
[warn] 1 warning
[info] No tests to run for test:test 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T18:08:14.237

你可以尝试做一个**干净的游戏**，然后再次尝试**游戏测试**。在我进行清洁之前，我收到了相同的*“没有要运行的测试”消息。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:29:57.603

它们是否放在`test`文件夹中？

你做对了，否则。命令确实是：

```
play test 
```

但是没有用于测试启动的 Web 界面。一切都通过命令行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:40:14.030

关键似乎是，测试类必须在“测试”包中。这意味着，您必须插入“包装测试；” 在您的 java 文件的顶部。

对我来说，这会在 IDE 中创建一条错误消息，但播放控制台上的“测试”命令会按预期运行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-08T17:18:33.937

我通过添加“扩展测试用例”来修复它。只有@Test 注解是不够的。

# ruby-on-rails - 从 ActiveRecord 获取表名

> ID：10334103
> 
> 赞同：27
> 
> 时间：2012-04-26T13:10:02.617
> 
> 标签：ruby-on-rails, ruby, activerecord

我曾经`ActiveRecord::Base.set_table_name`在动态创建的 ActiveRecord 类上设置我的表名。现在我需要知道以后如何获得该值。api 文档没有提到如何做到这一点。此外，我无法从 ActiveRecord 类名中派生表名，因为它们的键控方式与表名不同。

这是我正在做的一个更好的例子

```
table_klass = Class.new(ActiveRecord::Base)
    ActiveRecord::Base.const_set(const_name,table_klass)
    app = @app
    table_klass.class_eval do
      after_save do
        @@channel.push self
      end
      set_table_name t.server_table
      establish_connection(
        :adapter  => "mysql2",
        :host     => app.db_host,
        :username => app.db_user,
        :password => app.db_pass,
        :database => app.db_name
      )
    end 
```

在这种情况下，如果`const_name`= Test 并且数据库名称是 Database，它应该创建一个 ActiveRecord::Base::DatabaseTest 类，它会这样做。但是当我在它上面调用 table_name 时，我得到未定义的局部变量或方法。我需要在课堂上调用 table_name 吗？

**更新：** 我通过调用得到它的工作`instance.class.table_name`

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-26T13:16:12.810

你试过`table_name`吗？[文档](http://apidock.com/rails/ActiveRecord/ModelSchema/ClassMethods/table_name)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-01T20:55:26.680

晚会迟到了。

我使用了以下 Rails 代码：

```
my_record = Record.id(0) # hypothetical code
table_name = my_record.class.table_name 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-26T13:20:08.550

```
class User < ActiveRecord::Base
end

User.table_name 
# 'users' 
```

# mysql - mysqldump 不工作

> ID：10334106
> 
> 赞同：0
> 
> 时间：2012-04-26T13:10:20.820
> 
> 标签：mysql, database, mysqldump

当我使用 -p 选项发出以下命令并且它不要求 pwd 并退出以在 ssh 中提示时。

```
mysqldump -u root -p mydb > backup.sql 
```

请让我知道 mysqldump 命令有什么问题。为什么它不要求密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:21:27.157

尝试这样的事情：

```
mysqldump -h <host> -u <username> --password=<pwd> <databasename> > db.sql 
```

或者，如果你真的想在 tty 上得到提示，那么：

```
mysqldump -h <host> -u <username> -p <dtabasename> > db.sql 
```

在您的情况下，主机可能是 127.0.0.1。

# android - 上传照片到自己的网站

> ID：10334109
> 
> 赞同：0
> 
> 时间：2012-04-26T13:10:24.953
> 
> 标签：android, image-uploading

我一直在寻找一个程序来上传我用相机拍摄的照片，并以位图的形式存储到我自己的网站。我尝试了以下代码，但没有成功。

```
 public void onClick(View v) {
            ByteArrayOutputStream bytearrayStream = new ByteArrayOutputStream();
            bitmapPicture.compress(Bitmap.CompressFormat.JPEG, 90, bytearrayStream);
            byte [] byteArray = bytearrayStream.toByteArray();
            String byteArrayToString = Base64.encodeBytes(byteArray);
            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("image", byteArrayToString));

            try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://www.mywebsite.com/upload_image.php");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                stream = entity.getContent();

                Toast text = Toast.makeText(getApplicationContext(), "OK", Toast.LENGTH_LONG);
                text.show();
            }
            catch(Exception e){
                Log.e("log_tag", "Error in http connection " + e.toString());
                Toast text = Toast.makeText(getApplicationContext(), "FOUT", Toast.LENGTH_LONG);
                text.show();

            }
        } 
```

我在网站端使用的 php 代码是

```
<?php
$base=$_REQUEST['image'];
echo $base;
// base64 encoded utf-8 string
 $binary=base64_decode($base);
// binary, utf-8 bytes
header('Content-Type: bitmap; charset=utf-8');
// print($binary);
//$theFile = base64_decode($image_data);
$file = fopen('test.jpg', 'wb');
fwrite($file, $binary);
fclose($file);
echo '<img src=test.jpg />';
?> 
```

如果我在 localhost 上尝试 php 文件，它会生成一个 test.jpg。所以我认为如果`$_REQUEST['image']`不为空，则会创建正确的文件。

如果尝试区域中没有错误，我的 androidprogram 会显示一个 toasttext 'OK'。如果有错误，它会显示“FOUT”。在我的 Xperia 上测试时，它总是显示 OK...

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:46:38.927

尝试这个

```
public void executeMultipartPost() throws Exception {
try {
ByteArrayOutputStream bos = new ByteArrayOutputStream();
 bm.compress(CompressFormat.JPEG, 75, bos);
 byte[] data = bos.toByteArray();
 HttpClient httpClient = new DefaultHttpClient();
  HttpPost postRequest = new HttpPost("http://www.mywebsite.com/upload_image.phpamp");
 ByteArrayBody bab = new ByteArrayBody(data, "forest.jpg");

  MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
reqEntity.addPart("uploaded", bab);
 reqEntity.addPart("photoCaption", new StringBody("sfsdfsdf"));
 postRequest.setEntity(reqEntity);
HttpResponse response = httpClient.execute(postRequest);
 BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
 String sResponse;
 StringBuilder s = new StringBuilder();

while ((sResponse = reader.readLine()) != null) {
 s = s.append(sResponse);
  }
 System.out.println("Response: " + s);
 } catch (Exception e) {
   // handle exception here
   Log.e(e.getClass().getName(), e.getMessage());
  }
 } 
```

# c# - 如何将 RGB24 像素格式的 WriteableBitmap 转换为 EmguCV 图像 格式？

> ID：10334110
> 
> 赞同：0
> 
> 时间：2012-04-26T13:10:36.823
> 
> 标签：c#, image, image-processing, emgucv, writeablebitmap

我正在尝试转换具有 Rgb24 作为 pixelFormat 的 WriteableBitmap。我想将相同的图像存储到具有 Bgr 格式的 EmguCV 图像中。我编写了以下代码，但没有给出适当的结果。

```
public unsafe void Convert(WriteableBitmap bitmap)
    {
        byte[] retVal = new byte[bitmap.PixelWidth * bitmap.PixelHeight * 4];
        bitmap.CopyPixels(new Int32Rect(0, 0, bitmap.PixelWidth, bitmap.PixelHeight), retVal, bitmap.PixelWidth * 4, 0);

        Bitmap b = new Bitmap(bitmap.PixelWidth, bitmap.PixelHeight);
        int k = 0;
        byte red, green, blue, alpha;
        for (int i = 0; i < bitmap.PixelWidth; i++)
        {                
            for (int j = 0; j < bitmap.PixelHeight && k<retVal.Length; j++)
            {
                alpha = retVal[k++];
                blue = retVal[k++];
                green = retVal[k++];
                red = retVal[k++];

                System.Drawing.Color c = new System.Drawing.Color();
                c = System.Drawing.Color.FromArgb(alpha, red, green, blue);

                b.SetPixel(i, j, c);   
            }
        }
        currentFrame = new Image<Bgr, byte>(b);

        currentFrame.Save("Converted.jpg");
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:54:07.783

Are you still getting this error? I finally got this working by dumping the data from the WriteableBitmap variable into a MemoryStream and then from there into a Bitmap variable.

Below is an example: bitmap is the WriteableBitmap variable

```
BitmapEncoder encoder = new BmpBitmapEncoder();
encoder.Frames.Add(BitmapFrame.Create(bitmap);
MemoryStream ms = new MemoryStream();

encoder.Save(ms);
Bitmap b=new Bitmap(ms);
Image<Bgr, Byte> image = new Image<Bgr, Byte>(b); 
```

I think this way is a better approach because you don't have go through the nested for loops which could be far slower. Anyway hope this works for you

# android - 我的静音应用程序不会静音所有声音

> ID：10334114
> 
> 赞同：1
> 
> 时间：2012-04-26T13:10:53.883
> 
> 标签：android, mute

嘿伙计们，我正在学习 Android 开发，我正在研究一本书，该书向我展示了如何制作一个可以打开和关闭静音的应用程序。我可以让我的应用程序按照我的意愿振动，但我需要帮助才能关闭所有声音。当我进入另一个应用程序，比如画一些东西时，我会从那个应用程序中获得声音。我环顾四周，发现将 STREAM_MUSIC 静音。这是我写的。

```
if(mPhoneIsSilent)
        {
            mAudioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
            mAudioManager.setStreamMute(STREAM_MUSIC, false);
            mAudioManager.setStreamMute(STREAM_SYSTEM, false);
            mPhoneIsSilent = false;
        }
        else
        {
            mAudioManager.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
            mAudioManager.setStreamMute(STREAM_MUSIC, true);
            mAudioManager.setStreamMute(STREAM_SYSTEM, true);
            mPhoneIsSilent = true;
        } 
```

但我仍然可以从其他应用程序中获得声音。我使用了正确的流类型吗？

谢谢您的帮助。

# javascript - 骨干视图继承到 GrandChild 级别

> ID：10334116
> 
> 赞同：0
> 
> 时间：2012-04-26T13:11:03.447
> 
> 标签：javascript, backbone.js

我有三个这样的主干视图：

```
ParentView = Backbone.View.extend({
    addUsers : function()
    {
        console.log("Parent's Add User");
    },

    addProject : function()
    {
        console.log("Parent's Add Project");
    }
});

ChildView = ParentView.extend({
    addProject : function()
    {
        var self = this;

        console.log("Child's add Project");

        self.constructor.__super__.addProject.apply(self);
    }
});

GrandChildView = ChildView.extend({
    addItem : function()
    {
        var self = this;
        self.addProject();
    },

    addUsers : function()
    {
        var self = this;
        console.log("Grand Child's Add users");
        self.constructor.__super__.addUsers.apply(self);
    }
});

var vChild = new ChildView();
vChild.addProject(); // works fine, by calling it own and parent's functions.

var vGrandChild = new GrandChildView();
vGrandChild.addUsers();   // This throws Maximum call stack size exceeded error, 
```

当我创建 GrandChildView 的新实例然后调用它的 addUsers 方法时，它会抛出超出的最大堆栈大小，我猜这是因为它一直在调用自己。但无法弄清楚。原因似乎是调用 super 的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:12:21.637

你实际上在做什么，如果你真的按照你的函数调用的步骤，你应该能够理解它确实是在无限循环中调用“孙子”视图:)

`this`提示：每次都想一想你`apply`......;）

否则，这可能是您要实现的目标：

```
ParentView = Backbone.View.extend({
    addUsers : function()
    {
        console.log("Parent's Add User");
    },

    addProject : function()
    {
        console.log("Parent's Add Project");
    }
});

ChildView = ParentView.extend({
    addProject : function()
    {
        console.log("Child's add Project");

        ParentView.prototype.addProject.call(this);
    }
});

GrandChildView = ChildView.extend({

    addItem : function()
    {
        this.addProject();
    },

    addUsers : function()
    {
        console.log("Grand Child's Add users");
        ChildView.prototype.addUsers.call(this);
    }
});

var vChild = new ChildView();
vChild.addProject(); // works fine, by calling it own and parent's functions.

var vGrandChild = new GrandChildView();
vGrandChild.addUsers(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:50:05.903

试一试：将此添加到您的 ChildView：

```
addUsers : function()
{
    var self = this;
    console.log("Child's Add users");
    self.constructor.__super__.addUsers.apply(self);
} 
```

也许因为该`addUsers`函数在 中未正确定义，`ChildView.prototype`但它被*继承*，然后它找不到并在`self.prototype`. 我不知道..正如我所说的，我认为 JS 并不意味着以这种方式使用继承作为常见*的面向 OO 的语言*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T06:55:06.980

我把你的代码转换成 CoffeeScript，它给了我这个对我有用的 JavaScript：

```
var ChildView, GrandChildView, ParentView,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype; return child; },
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ParentView = (function(_super) {

  __extends(ParentView, _super);

  ParentView.name = 'ParentView';

  function ParentView() {
    return ParentView.__super__.constructor.apply(this, arguments);
  }

  ParentView.prototype.addUsers = function() {
    return console.log("Parent's Add User");
  };

  ParentView.prototype.addProject = function() {
    return console.log("Parent's Add Project");
  };

  return ParentView;

})(Backbone.View);

ChildView = (function(_super) {

  __extends(ChildView, _super);

  ChildView.name = 'ChildView';

  function ChildView() {
    this.addProject = __bind(this.addProject, this);
    return ChildView.__super__.constructor.apply(this, arguments);
  }

  ChildView.prototype.addProject = function() {
    console.log("Child's add Project");
    return ChildView.__super__.addProject.apply(this, arguments);
  };

  return ChildView;

})(ParentView);

GrandChildView = (function(_super) {

  __extends(GrandChildView, _super);

  GrandChildView.name = 'GrandChildView';

  function GrandChildView() {
    this.addUsers = __bind(this.addUsers, this);

    this.addItem = __bind(this.addItem, this);
    return GrandChildView.__super__.constructor.apply(this, arguments);
  }

  GrandChildView.prototype.addItem = function() {
    return this.addProject();
  };

  GrandChildView.prototype.addUsers = function() {
    console.log("Grand Child's Add users");
    return GrandChildView.__super__.addUsers.apply(this, arguments);
  };

  return GrandChildView;

})(ChildView); 
```

据我了解，棘手的一点是您将 this 绑定到函数内部的 self 。每次使用调用函数的上下文调用函数时都会发生这种情况，这正是您要省略的内容。您需要将 this 绑定到函数中，因为通常仅用于回调，或者在没有引用调用函数的对象的情况下，只有对函数的引用。因此，如果您需要在这种情况下绑定 this，请在函数之外进行。

# maven - 在 mvn 程序集上

> ID：10334128
> 
> 赞同：0
> 
> 时间：2012-04-26T13:11:32.370
> 
> 标签：maven

以下当前将我的依赖项放入新创建的 lib 目录中。

```
<dependencySets>
    <dependencySet>
        <outputDirectory>lib</outputDirectory>
        <scope>runtime</scope>
    </dependencySet>
</dependencySets> 
```

**问题：如何更改它以排除 1 个文件？**

以下不起作用：

```
<dependencySets>
    <dependencySet>
        <outputDirectory>lib</outputDirectory>
        <scope>runtime</scope>
        <excludes>
            <exclude>my_program-0.0.1-SNAPSHOT.jar</exclude>
        </excludes>
    </dependencySet>
</dependencySets> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:25:12.713

尝试使用约定：

```
<exclude>groupId:artifactId</exclude> 
```

因此，如果您有例如：

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency> 
```

要排除它：

```
<exclude>org.springframework:spring-jdbc</exclude> 
```

# jqplot - jqPlot - 在图形上选择范围时如何更改背景颜色

> ID：10334135
> 
> 赞同：1
> 
> 时间：2012-04-26T13:11:59.273
> 
> 标签：jqplot

我正在使用 jqPlot 来渲染启用缩放的图形。

例如：

[http://www.jqplot.com/tests/zooming.php](http://www.jqplot.com/tests/zooming.php)

在上面的示例中，当您在图表上进行选择时，图表画布被涂成灰色（除了选择）。有谁知道如何定制这种颜色？

我一直无法在 jquery.jqplot.css 中找到要调整的 jqPlot CSS 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:05:46.550

恐怕在这个特定的绘画过程中没有涉及到 css。尽管有一门课程可以为您指明正确的方向。我的嫌疑人是`jqplot-zoom-canvas`班级。虽然我认为这幅画默认为灰色。

因此，我只看到两个选项：

1.  直接在 jqplot 脚本中更改绘画。
2.  或者在绘制缩放选择开始时更改颜色，`jqplot-zoom-canvas`然后在绘制缩放停止时将其更改回默认值。但我不知道这类事件是否有挂钩。因此，您实际上可能只剩下选项 no。1.

# blackberry - 关于 RichTextField 中文本的对齐方式

> ID：10334137
> 
> 赞同：0
> 
> 时间：2012-04-26T13:12:01.467
> 
> 标签：blackberry, alignment, field, richtext

我见过很多对齐但是它们是否像 Microsoft Word 中的对齐对齐一样在黑莓中更好地查看黑莓我知道有 TEXT_ALIGN_HCENTER 和其他但是否有像 BB 中的对齐对齐以在黑莓中显示文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:22:23.020

在 RichTextField 属性中使用 RichTextField.TEXT_ALIGN_HCENTER。它的工作方式与您的需要相同。

```
RichTextField textData = new RichTextField("sample text",RichTextField.USE_ALL_WIDTH |RichTextField.TEXT_ALIGN_HCENTER ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T16:15:45.333

为什么你不为文本字段尝试同样的逻辑。希望它有效！

```
 add(new LabelField(" Name ",LabelField.FIELD_HCENTER | LabelField.NON_FOCUSABLE)); 
```

# jquery - 在JQuery单击功能中为图像添加类

> ID：10334138
> 
> 赞同：0
> 
> 时间：2012-04-26T13:12:02.803
> 
> 标签：jquery

在点击功能中的所有图像，

```
<script type="text/javascript">
  $(".blurall").click(function(){
  $("[img='.jpg']").addClass("opacity");
  });
</script> 
```

我的 CSS

```
.opacity{
    opacity:0.5;
} 
```

没有工作任何人帮助我！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T13:14:12.977

在调用它之前确保你的 DOM 已经[准备好。](http://api.jquery.com/ready/)此外，您忘记了第一[类选择器](http://api.jquery.com/class-selector/)周围的引号。我把旧的换成了`$.click`首选的[`$.on`](http://api.jquery.com/on/)。最后，更新您的选择器，以便匹配`src`必须[以结尾](http://api.jquery.com/attribute-ends-with-selector/) `.jpg`。

```
$(function(){
    $( ".blurall" ).on( "click", function() {
        $( "img[src$='.jpg']" ).addClass( "opacity" );
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:17:27.747

你的选择器错了，`img[src$='.jpg']`像这样使用

```
<script type="text/javascript">
  $(".blurall").click(function(){
      $("img[src$='.jpg']").addClass("opacity");
  });
</script> 
```

试试这个...

# php - 将输入数组中的特定输入值发送到 JavaScript

> ID：10334140
> 
> 赞同：0
> 
> 时间：2012-04-26T13:12:04.130
> 
> 标签：php, javascript

我正在使用查询通过循环填充消息列表，这是我的代码：

```
<?php
$sql_i_msg_sent_waiting="SELECT t1.i_message_id,t2.username,t2.name,t2.propic,t2.age,t2.dob,t3.religion,t3.caste 
FROM candidate_i_message as t1, candidate_register_table as t2, candidate_social_table as t3 WHERE t1.from_username='$_SESSION[logged_user]' AND t1.to_username=t2.username AND t2.username=t3.username AND t1.status='0'";
$result_i_msg_sent_waiting=mysql_query($sql_i_msg_sent_waiting,$con);
$count=mysql_num_rows($result_i_msg_sent_waiting);
echo $count;

?>

<div id="section_i_message_sent_waiting" style="width:650px; overflow:auto;">
         <h2>Awaiting Sent Request</h2> 
          <?php
          if(mysql_num_rows($result_i_msg_sent_waiting)==0)
           {
            ?>
            <div style="width:650px; border-bottom:1px solid #CCCCCC" align="center">
            <table border='0' cellspacing='0' cellpadding='0' width='550px' align='center'>
            <tr style='padding-botton:5px; border-bottom:1px solid #CCCCCC'>
            <td width='50px'/>
            <td><FONT COLOR=red FACE='Geneva, Arial' SIZE=2>
                       No Messages Found.</FONT></td>
                    <td width='50px'/></tr></table>
            </div>      

         <?php
         }
         else
         {
         while($row_i_msg_sent_waiting=mysql_fetch_array($result_i_msg_sent_waiting))
         {
         ?>
         <div style="width:650px; border-bottom:1px solid #CCCCCC" align="center">
           <table width="550px" cellpadding="0" cellspacing="0" border="2" align="center" style="vertical-align:middle">
           <tr style='vertical-align:middle'>
           <td style='vertical-align:middle' width="100px">
           <form method='post' action='id.php' name='showid' id='showid'>
           <input type='hidden' name='pro_username' id='pro_username' 
             value="<?php echo $row_i_msg_sent_waiting['username'];?>"/>
                     <input type='image' src='<?php echo $row_i_msg_sent_waiting['propic'];?> ' style="width:100px; vertical-align:middle"/>
         </form>
           </td>
           <td style='vertical-align:middle;border-right:1px solid #CCCCCC;border-top:1px solid #CCCCCC' width="450px" >
               <table width="450px" cellpadding="0" cellspacing="0" border="0">
                 <tr>
                 <td width="10px"/>
                 <td width="100px" align="left">Name</td>
                 <td width="10px">:</td>
                 <td width="100px" align="left"><?php echo $row_i_msg_sent_waiting['name'];?>
                 </td>
                 <td width="10px">
                 <td width="100px" align="left">Age</td>
                 <td width="10px">:</td>
                 <td width="100px" align="left"><?php echo $row_i_msg_sent_waiting['age'];?>
                 </td>
                 <td width="10px"/>
                 </tr>
                  <tr>
                 <td width="10px"/>
                 <td width="100px" align="left">Date Of Birth</td>
                 <td width="10px">:</td>
                 <td width="100px" align="left"><?php echo $row_i_msg_sent_waiting['dob'];?>
                 </td>
                 <td width="10px">
                 <td width="100px" align="left">Religion</td>
                 <td width="10px">:</td>
                 <td width="100px" align="left"><?php echo $row_i_msg_sent_waiting['religion'];?>
                 </td>
                 <td width="10px"/>
                 </tr>
                 <tr>
                 <td width="10px"/>
                 <td width="100px" align="left">Caste</td>
                 <td width="10px">:</td>
                 <td width="100px" align="left"><?php echo $row_i_msg_sent_waiting['caste'];?>
                 </td>
                 <td width="10px">
                 <td width="100px" align="left">Religion</td>
                 <td width="10px">:</td>
                 <td width="100px" align="left"><?php echo $row_i_msg_sent_waiting['religion'];?>
                 </td>
                 <td width="10px"/>
                 </tr>
                 <tr>
                 <td width="10px"/>
                 <td width="100px" align="left">Action</td>
                 <td width="10px">:</td>
                 <td width="100px" align="left">
                 <form method="post" name="cancel_request_form"  id="cancel_request_form"
                 action="javascript:cancel_request(document.getElementById('cancel_request_form'));">
                 <input type="text" name="no_of_msg" id="no_of_msg" value="<?php echo $count;?>"/>
                    <input type="text" name="cancel_request[]" id="cancel_request[]" 
                    value="<?php echo $row_i_msg_sent_waiting['i_message_id'];?>"/>
                    <input type="submit" name="cancel" id="cancel" class="button" style="width: 100px" value="Cancel Request"/>
                    </form>
                 </td>
                 <td width="10px">
                 <td width="100px" align="left"></td>
                 <td width="10px">:</td>
                 <td width="100px" align="left">
                 </td>
                 <td width="10px"/>
                 </tr>
                             </table>
           </td>
           </tr>

           </table>
         </div>
         <?php 
         } 
         }?>

</div> 
```

线

```
<input type="text" name="cancel_request[]" id="cancel_request[]" 
                    value="<?php echo $row_i_msg_sent_waiting['i_message_id'];?>"/>

                creates a array of input type text, and each input text contains corressponding message_id...since each input text is contained within a form, and since the form is within a loop, the form is also repeatative..when the submit button will be clicked corressponding to a particular form, the input type text[] within that form will fire the value to get accepted in the javascript i give below...

<script>
function cancel_request(obj) {

alert(document.getElementByName('cancel_request[]').value);
}
</script> 
```

但是脚本显示问题，它根本不起作用。我不知道怎么了。它没有显示任何东西。有 message_id 1 和 2：一个文本类型 input[] 包含值 1，另一个包含值 2。

当我单击对应于值 1 的提交按钮时，该文本类型输入的值将被发送到 JavaScript 并显示。我的脚本有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:53:24.400

功能是`getElementsByName`- 复数形式的元素。然后，您可以像访问数组一样访问它。

# r - 如何从具有属性的矩阵中找到 5 个最接近的数字？

> ID：10334143
> 
> 赞同：-3
> 
> 时间：2012-04-26T13:12:17.070
> 
> 标签：r, matrix

我有一个矩阵如下

```
`> y
       1         2         3
1  0.8802216 1.2277843 0.6875047
2  0.9381081 1.3189847 0.2046542
3  1.3245534 0.8221709 0.4630722
4  1.2006974 0.8890464 0.6710844
5  1.2344071 0.8354292 0.7259998
6  1.1670665 0.9214787 0.6826173
7  0.9670581 1.1070461 0.7742342
8  0.8867365 1.2160533 0.7024281
9  0.8235792 1.4424190 0.2030302
10 0.8821301 1.0541099 1.2279813
11 1.1958634 0.9708839 0.4297043
12 1.3542734 0.7747481 0.5119648
13 0.4385487 0.3588158 4.9167998
14 0.8530141 1.3578511 0.3698620
15 0.9651803 0.8426226 1.6132899
16 0.8854192 1.2272616 0.6715839
17 0.7779642 0.8132233 2.3386331
18 0.9936722 1.1629110 0.5083558
19 1.1235897 1.0018480 0.5764672
20 0.7887222 1.3101684 0.7373181
21 2.2276176 0.0000000 0.0000000` 
```

我找到了一条线索，但它可以为整个矩阵提供位置，`

> n<-read.table(file.choose(),header=T)
> 
> y<-n[,c("1","2","3")]
> 
> 我的号码=1.12270420185886。
> 
> z<-abs(y-my.number)==min(abs(y-my.number)) which(z) [1] 19 `

我也想找到至少 5 个最接近的带有字母 & 列的值，换句话说，我想要矩阵中最接近的 5 个单个值及其位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:04:39.103

我不知道它是什么语言；是R吗？

在程序语言中，我会将所有值保存到映射 (val, (pos)) = (val (row, col); example (0.880..-> (1, 1))，然后按值排序。

然后迭代i<-pos（1到map.size-5），得到diff（pos（i），pos（i+5）），寻找最小值（diff），然后得到值和它们的位置.

这是Scala中的一个解决方案：

```
val matrix = """1  0.8802216 1.2277843 0.6875047
2  0.9381081 1.3189847 0.2046542
3  1.3245534 0.8221709 0.4630722
4  1.2006974 0.8890464 0.6710844
5  1.2344071 0.8354292 0.7259998
6  1.1670665 0.9214787 0.6826173
7  0.9670581 1.1070461 0.7742342
8  0.8867365 1.2160533 0.7024281
9  0.8235792 1.4424190 0.2030302
10 0.8821301 1.0541099 1.2279813
11 1.1958634 0.9708839 0.4297043
12 1.3542734 0.7747481 0.5119648
13 0.4385487 0.3588158 4.9167998
14 0.8530141 1.3578511 0.3698620
15 0.9651803 0.8426226 1.6132899
16 0.8854192 1.2272616 0.6715839
17 0.7779642 0.8132233 2.3386331
18 0.9936722 1.1629110 0.5083558
19 1.1235897 1.0018480 0.5764672
20 0.7887222 1.3101684 0.7373181
21 2.2276176 0.0000000 0.0000000"""

// split block of text into lines
val lines=matrix.split ("\n")
// split lines into words
val rows = lines.map (l => l.split (" \\+"))
// remove the index from the beginning (1, 2, ... 21) and 
// transform values from Strings to double numbers
// triples is: Array(Array(0.8802216, 1.2277843, 0.6875047), Array(0.9381081, 1.3189847, 0.2046542),
val triples = rows.map (_.tail).map(triple=> triple.map (_.toDouble))
// generate an own index for the rows and columns 
// elems is: elems: Array[Array[(Double, (Int, Int))]] = Array(Array((0.8802216,(0,0)), (1.2277843,(0,1)), (0.6875047,(0,2))), Array((0.9381081,(1,0)), ...
val elems = triples.zipWithIndex.map {t=> t._1.zipWithIndex.map (vc=> (vc._1 -> (t._2, vc._2)))}
// sorted = Array((0.0,(20,1)), (0.0,(20,2)), (0.2030302,(8,2)), (0.2046542,(1,2)), 
val sorted = elems.sortBy (e => e._1)
// delta5 = List(0.3588158, 0.369862, 0.2266741, 0.2338945, 0.10425639999999997, 0.1384938,
val delta5 = sorted.sliding (5, 1).map (q => q(4)._1-q(0)._1).toList
val minindex = delta5.indexOf (delta5.min) // minindex: Int = 29, delta5.min = 0.008824799999999966

// we found the smallest intervall of 5 values beginning at 29: 
(29 to 29 +5).map (sorted (_)) 
res568: scala.collection.immutable.IndexedSeq[(Double, (Int, Int))] = 
    Vector( (0.8802216,(0,0)), 
        (0.8821301,(9,0)), 
        (0.8854192,(15,0)), 
        (0.8867365,(7,0)), 
        (0.8890464,(3,1)), 
        (0.9214787,(5,1))) 
```

由于 Scala 从 0 到 20 和从 0 到 2 计数，您的索引分别从 1 到 3 和 1 到 21 运行，因此您必须将 (1,1) 添加到每个位置=> (1,1), (10 ,1) 等等。

# sql - 在 SQL 中计算具有计数器值的行之间的差异

> ID：10334147
> 
> 赞同：2
> 
> 时间：2012-04-26T13:12:24.480
> 
> 标签：sql, sqlite

我得到了表 T1，我在其中更新了一些计数器值

```
id, unix_time_stamp, counter1, counter10
1 , 1333435800     , 55      , 80 
```

然后我得到了表 T2，我在其中复制了这些值

```
id, unix_time_stamp, counter1, counter10, value1, value10
1 , 1333435800     , 55      , 80       , 0     , 0
2 , 1333435801     , 60      , 87       , 5     , 7
3 , 1333435802     , 70      , 90       , 10    , 3
3 , 1333435804     , 80      , 100      , 5     , 5 
```

这是通过一些触发功能完成的

```
INSERT INTO T2 (unix_time_stamp, counter1, counter10) SELECT unix_time_stamp, counter1, counter10 FROM T1 WHERE id=1 
```

我想要的是计算 value1, value10 作为

```
(current_counter1 - last_counter1)/(current_time - last_time) 
```

并将它们放入此插件中。

例如时间戳为 1333435804 的值 1 将是

```
value1=(80-70)/(1333435804-1333435802) = 5 
```

也就是说

```
insert into t2
(unix_time_stamp, counter1, counter10, value1)
SELECT unix_time_stamp, counter1, counter10, 
(counter1 - (select counter1 from T1 order by unix_time_stamp DESC LIMIT 1)/
(unix_time_stamp - (select unix_time_stamp from T1 order by unix_time_stamp DESC LIMIT 1)
FROM T1 WHERE id=1 
```

但我想要一个更短的版本，因为我有 10 个计数器 :)

整个情况有点复杂，我有理由不在 SQL 之外这样做

我正在使用 sqlite

这对我来说太复杂了:)请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:32:10.237

你的问题有点不清楚。这附近有吗？

```
DECLARE @Id int = 1

DECLARE @LastCounter1 int,
        @LastCounter10 int,
        @LastTime timestamp,

SELECT TOP 1    @LastCounter1 = counter1,
                @LastCounter10 = counter10,
                @LastTime = unix_time_stamp
FROM            T2
WHERE           id = @Id
ORDER BY        unix_time_stamp DESC

INSERT INTO T2 (id, unix_time_stamp, counter1, counter10, value1, value10)
SELECT      unix_time_stamp,
            counter1,
            counter10,
            ((counter1 - @LastCounter1) / (unix_time_stamp - @LastTime)),
            ((counter10 - @LastCounter10) / (unix_time_stamp - @LastTime)) 
```

更新的答案：

```
INSERT INTO T2 (id, unix_time_stamp, counter1, counter10, value1, value10)
SELECT      T1.id,
            T1.unix_time_stamp,
            T1.counter1,
            T1.counter10,
            ((T1.counter1 - [Last].counter1) / (T1.unix_time_stamp - [Last].unix_time_stamp)), 
            ((T1.counter10 - [Last].counter10) / (T1.unix_time_stamp - [Last].unix_time_stamp))
FROM        T1
INNER JOIN  (
                SELECT TOP 1    id,
                                counter1,
                                counter10,
                                unix_time_stamp
                FROM            T2
                WHERE           id = 1
                ORDER BY        unix_time_stamp DESC
            ) [Last] ON T1.id = [Last].id
WHERE       T1.id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:44:44.950

我猜下面的查询会计算插入子句所需的所有数据：

```
SELECT 1e0 * (cur.counter1 - prv.counter1)/(cur.unix_time_stamp - prv.unix_time_stamp)   AS [value1]
, 1e0 * (cur.counter10 - prv.counter10)/(cur.unix_time_stamp - prv.unix_time_stamp)      AS [value10]
, cur.counter1 AS [cur_counter1], cur.counter10 AS [cur_counter10], cur.unix_time_stamp AS [cur_time]
, prv.counter1 AS [prv_counter1], prv.counter10 AS [prv_counter10], prv.unix_time_stamp AS [prv_time]
FROM T1 cur, T1 prv
WHERE cur.counter1 = (SELECT MAX(aux_0.counter1) FROM T1 aux_0)
AND prv.counter1 = (SELECT MAX(aux_1.counter1) FROM T1 aux_1 WHERE aux_1.counter1 < cur.counter1); 
```

# performance - Teradata：如何设计表以使用许多外键列进行规范化？

> ID：10334149
> 
> 赞同：0
> 
> 时间：2012-04-26T13:12:33.083
> 
> 标签：performance, foreign-keys, primary-key, primitive, teradata

我正在 Teradata 中设计一个大约 30 列的表。这些列将需要存储几个时间间隔样式的值，例如 Daily、Monthly、Weekly 等。将实际字符串值存储在表中是不好的设计，因为这将是数据的严重重复。相反，我想做的是创建一个原始查找表。该表将包含 Daily、Monthly、Weekly，并将使用 Teradata 的标识列来派生主键。然后，这个主键将作为外键存储在我正在创建的表中。

这适用于我的应用程序，因为我只需要知道原始键值，因为我填充了我的 Web 表单的下拉列表。但是，我们使用的其他应用程序将需要运行报告或通过提要接收此数据。因此，需要创建一个视图，将该表连接到原始表，以便它可以实际返回 Daily、Monthly 和 Weekly。

我关心的是性能。我从来没有创建过包含如此大量外键字段的表，而且我对 Teradata 相当陌生。在我踏上艰难地解决这一切的漫长道路之前，我想要任何我能得到的关于实现目标的最佳方式的建议。

**编辑：**我想我应该补充一点，这个查找表将是不相关的原语的混搭。它将包含与上面已经提到的时间间隔相关的一组值，但也包含诸如 24x7 和 8x5 之类的时间范围。该表将设计如下：

```
ID 类型值
--- ------------ ------------
每天 1 次间隔
2 间隔每月
3 间隔每周
4 时间范围 24x7
5 时间范围 8x5
```

**编辑第 2 部分**：添加了一个新标签以更多地了解此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T23:27:08.013

你所做的应该没问题。显然，您需要运行实际查询并在适当的地方收集统计信息。

我可以推荐的一件事是在查找表中增加一行，如下所示：

```
ID  Type         Value
--- ------------ ------------
0   Unknown      Unknown 
```

然后在主表中，不要将字段设为空，而是将它们的值设为 0。这允许您使用内部联接而不是外部联接，这将有助于提高性能。

# c# - 启动字处理，但文件名已更改

> ID：10334153
> 
> 赞同：1
> 
> 时间：2012-04-26T13:12:52.383
> 
> 标签：c#, ms-word

在 C# 中，我在名为“MyDoc.docx”的临时文件夹中创建了一个文件

然后我用这个文件启动 Word 进程。

我使用 FileSystemWatcher 监视文件更改，并且还监视 Word 进程何时退出。

我想阅读对文档所做的更改。

但是，Word 使用的文件名与我提供的不同。它使用的是短 (8.3) 文件名。但是，它没有使用我计算的短文件名应该是什么——似乎 Word 正在使用它自己的临时文件名。

如何确定我的文件已更改？我如何知道 Word 正在使用的文件的名称？

有什么想法吗？

**回答：**

应该处理重命名事件，而不是处理 Word 文件的更改事件。当 Word 保存其文档时，它会保存其临时文件，然后将其复制到原始文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:16:20.200

Word 总是将他的临时文件放到“C:\Users\Alex\Desktop”（Windows Server 2008 除外），这样您就可以像这样找到它们

```
var files = new DirectoryInfo(@"C:\Users\Alex\Desktop").GetFiles()
.Where(arg => !(arg.Attributes.HasFlag(FileAttributes.Hidden) && arg.Extension == ".docx" && arg.Name.StartsWith("~$")))
.ToList(); 
```

**编辑**

并尝试这个找到

```
 Process[] processes = Process.GetProcesses();
        int i = 0;
        foreach (Process p in processes)
        {
            if (p.ProcessName.Contains("WinWord"))
            {
                try
                {
                    ProcessModuleCollection modules = p.Modules;
                    for (int j = 0; j <= modules.Count - 1; j++)
                    {
                        string sFile = modules[j].FileName;//can be needed file
                    }
                }
                catch (Exception exception)
                {
                    //MsgBox(("Error : " & exception.Message)) 
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:46:15.873

应该处理重命名事件，而不是处理 Word 文件的更改事件。当 Word 保存其文档时，它会保存其临时文件，然后将其复制到原始文件名。

# jquery - 使用 jQuery 导航 JSON

> ID：10334159
> 
> 赞同：0
> 
> 时间：2012-04-26T13:12:58.750
> 
> 标签：jquery, json, parsing

我看到[这个答案](https://stackoverflow.com/questions/5288833/how-to-search-json-tree-with-jquery)处理从 JSON 获取数据。我正在尝试做几乎相同的事情，但我的 JSON 的结构与数组/对象不同，我不确定如何以相同的方式解析它。

我的 JSON 是这种格式，我正在尝试编写一个函数来根据链接的问题查找某些元素，但没有 json 中元素的键，不确定如何定位。还是我需要尝试重新处理我的 json 输出？（它是由 json_encode 从修改后的 codeigniter db 查询创建的。

```
$(function() {
var json = [
  {

    "answer": [

      "4555"

    ],
    "answer_string": "4555|",
    "qid": "70",
    "aid": "742"
  }, 
 {

    "answer": [

      "monkeys",
      "badgers",
      "monkeybadgers"

    ],
    "answer_string": "monkeys|badgers|monkeybadgers|",
    "qid": "71",
    "aid": "742"
  }
];
    $.each(json[], function(i, v) {
        if (v.qid= "70") {
            alert(v.answer[0]);
            return;
        }
    });
});​ 
```

[jsfiddle](http://jsfiddle.net/cutcopypaste/jQmyf/)

我需要找到 qid 匹配某个数字的 answer[0] 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:19:21.740

你的 javascript 搞砸了。查看更新的小提琴：

[http://jsfiddle.net/jQmyf/2/](http://jsfiddle.net/jQmyf/2/)

具体来说： `if (v.qid= "70") {`应该是`v.qid==`

应该`$.each(json[]`只是`$.each(json`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:30:40.690

您应该只给每个数组的名称：

```
$.each(ja, function(i, v) { 
```

在 if 中使用比较而不是赋值：

```
if (v.qid== "70") {

$(function() {
    var ja= [
      {
        "answer": [

          "4555"
        ],
        "answer_string": "4555|",
        "qid": "70",
        "aid": "742"
      }
    ];
    $.each(ja, function(i, v) {
        if (v.qid== "70") {
            alert(v.answer[0]);
            return;
        }
    });
});​ 
```

[更新小提琴](http://jsfiddle.net/jQmyf/9/)：

# java - 使用正则表达式限制文本框

> ID：10334168
> 
> 赞同：0
> 
> 时间：2012-04-26T13:13:38.077
> 
> 标签：java, regex

我正在尝试验证一个文本框，我希望用户只输入 0.1 和 4.0 之间，我正在使用以下正则表达式

```
^[0-4](\.[0-9]+)?$ 
```

事情是甚至接受 4.1 等等，直到 4.9

请对我如何解决此问题有任何想法

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:17:15.080

试试这个

```
^(?:[0-3](?:\.[0-9]+)?|4(?:\.0)?)$ 
```

**编辑**

我添加了非捕获组。

正如塞浦路斯所问，这里有一个解释：我将原始正则表达式限制为 3.9，并为 4(.0) 添加了另一个条件

```
NODE                     EXPLANATION
  ^                        //the beginning of the string
  (?:                      //group, but do not capture:
    [0-3]                  //any character of: '0' to '3'
    (?:                    //group, but do not capture (optional):
      \.                   //'.'
      [0-9]+               //any character of: '0' to '9' (1 or more times)
    )?                     //end of grouping
   |                       //OR
    4                      //'4'
    (?:                    //group, but do not capture (optional):
      \.                   //'.'
      0                    //'0'
    )?                     //end of grouping
  )                        //end of grouping
  $                        //before an optional \n, and the end of the string 
```

# php - 我收到一些卷曲错误

> ID：10334172
> 
> 赞同：0
> 
> 时间：2012-04-26T13:13:53.337
> 
> 标签：php, json, curl

我正在使用此代码...但我的代码中出现一些 curl 错误..

```
 function send_data($data) {
            $url = ""; // URL to POST FORM. (Action of Form)
            $url .= '?acx=' . urlencode('V2ViSnNvbkRldkFwbkBTaWdtYUFwbjpXZWIxMjMkSnNvbg==') . '&key=' . urlencode('QW51bWF0aGlVbmRhQFNpZ21hQXBuOlVuZHVBbnVtYXRoaQ==');
            $url .= '&impdata=' . urlencode('{"System":{"Client":"SigmaApn","ACX":"V2ViSnNvbkRldkFwbkBTaWdtYUFwbjpXZWIxMjMkSnNvbg==","KEY":"QW51bWF0aGlVbmRhQFNpZ21hQXBuOlVuZHVBbnVtYXRoaQ==","ClientIP":"74.117.104.99","Mode":"TEST"},"Module":{"Process":"BatchEnrollment","Version":"2.1.5","DataDefinition":[{"Name":"enrolment_queue","IncludeRecType":"false","Identifier":"sys_batch_no","Header":["batch_no","source","source_line","agent_code","premise_id","plan_group","request_date","enrol_type","cust_firstname","cust_lastname","phone1","cm_address1","cm_city","cm_state","cm_zip","life_support","cust_status","plan_id1","contract_ind","contract_type","calc_method","rate_type","adder1_rate","cust_bill_type","edi_bill_presenter"]}],"Data":[["Batch","BATCH","1","0","PREMISE1","R","10/28/2011","M","' . $data['personalinfo_first_name'] . '","' . $data['personalinfo_last_name'] . '","8050123481","' . $data['service_address1'] . '","' . $data['service_city'] . '","' . $data['service_state'] . '","' . $data['service_zipcode'] . '","N","P","PN001","Y","MCP2","1","4","0.02","Default","ESP"]]}}');
            $url .= '&mode=' . urlencode('TEST');
            $headersVal = array("application/x-www-form-uriencoded");
            $myFile = "/tmp/isigma.txt";
            $fh = fopen($myFile, 'w') or die("can't open file");
            $ch = curl_init();    // Initialize a CURL session.
            curl_setopt($ch, CURLOPT_URL, $url);  // Pass URL as parameter.
            curl_setopt($ch, CURLOPT_STDERR, $fh);
            curl_setopt($ch, CURLOPT_POST, 1); // use this option to Post a form  
            curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, '1');
            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, '1');
            curl_setopt($ch, CURLOPT_CAINFO, getcwd() . "/iSIGMARootCA.crt");
            curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
            curl_setopt($ch, CURLOPT_SSLCERT, getcwd() . "/APN_Generic_JSON.pem");
            curl_setopt($ch, CURLOPT_SSLKEY, getcwd() . "/apnakey.pem");
            curl_setopt($ch, CURLOPT_SSLCERTTYPE, "PEM");
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            $result = curl_exec($ch);  // grab URL and pass it to the variable.
            curl_close($ch);  // close curl resource, and free system resources.  
            fclose($fh);

            $res_array = json_decode($result, true);

            if (!empty($result)) {
                return $res_array;
            } else {
                echo "Curl Error" . curl_error($ch);
            }
        } 
```

提前感谢您的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:17:54.050

我正在使用此功能发布数据。您可以将关联数组作为第二个参数，第一个是您要调用的 url。

```
private function postData($url, $data) {

        $post_data = http_build_query($data);
        $fp = tmpfile();
        $curl = curl_init();
        curl_setopt($curl, CURLOPT_URL, $url);
        curl_setopt($curl, CURLOPT_TIMEOUT, 20);
        curl_setopt($curl, CURLOPT_FILE, $fp);
        curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data);
        curl_setopt($curl, CURLOPT_VERBOSE, 1);
        curl_setopt($curl, CURLOPT_FAILONERROR, 1);
        curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($curl, CURLOPT_COOKIEJAR, '/dev/null');

        $status = curl_exec($curl);
        $response['http_code'] = curl_getinfo($curl, CURLINFO_HTTP_CODE);

        if ($status) {
            $response['error'] = curl_error($curl);
            $response['errno'] = curl_errno($curl);
        }

        curl_close($curl);

        rewind($fp);

        $response['data'] = '';
        while ($str = fgets($fp, 4096)) {
            $response['data'] .= $str;
        }
        fclose($fp);

        return $response['data'];
    } 
```

# wordpress - 在一页上清除 PHP 会话

> ID：10334174
> 
> 赞同：1
> 
> 时间：2012-04-26T13:13:55.233
> 
> 标签：wordpress, session, firefox

我在 WordPress 中为电子商务网站开发了一个主题。该网站使用我创建的自定义登录系统的会话。

问题是一个特定的页面，查看篮子，由于某种原因，当您查看它时，它会清除 FIREFOX 中的会话。

我的函数文件中有这段代码来启动会话：

```
function init_sessions() {
if (!session_id()) {
    session_start();
}
}
add_action('init', 'init_sessions'); 
```

登录时设置以下会话：

```
$_SESSION['id']=$db['id'];
$_SESSION['timer']=time()+3600;
$_SESSION['remote_ip']=$_SERVER['REMOTE_ADDR']; 
```

我尝试在保留 print_r($_SESSION) 的同时删除视图篮脚本的全部内容，但它仍然被重置。

要在 FIREFOX 中复制该网站的视图：http: [//www.greengrocerschoice.co.uk](http://www.greengrocerschoice.co.uk)

使用电子邮件登录：test@bytewire.co.uk 和密码：password

将一两个产品添加到您的购物篮，然后导航到[http://www.greengrocerschoice.co.uk/viewbasket/](http://www.greengrocerschoice.co.uk/viewbasket/)当您重新加载页面并查看此页面时，您会注意到您不再登录。

正在使用以下版本的 WordPress：您正在使用 WordPress 3.0.1。

是否有人对可能导致问题的原因或调试技巧有任何头绪，以确定导致问题的原因？

谢谢

# python - 将对象作为函数的参数传递

> ID：10334179
> 
> 赞同：1
> 
> 时间：2012-04-26T13:14:05.130
> 
> 标签：python, object, dll, ctypes

有一个来自 DLL（C 语言）的函数，`link("parameters", &connection);`它接受一个字符串参数并初始化一个连接。

有一个函数`connect(connection)`，`connection`通过调用初始化的对象在哪里`link()`。

我将 Python 连接对象`connect()`作为参数传递给函数

```
connection_t = ctypes.c_uint32
link = mydll.link
link.argtypes=(ctypes.c_char_p, ctypes.POINTER(connection_t) )
connect = mydll.connect
connect.argtypes=(connection_t,)
...
connection = connection_t()
link ("localhost: 5412", ctypes.byref(connection))
... 
```

但是，如果我将“连接”对象传输到 mydll 库的任何其他函数，该函数会返回一个值，但该值不正确。

```
func=mydll.func
status_t=ctypes.c_uint32
status=status_t()
func.argtypes=(ctypes.c_ulong,ctypes.POINTER(status_t))
result=func(connection, ctypes.byref(status)) 
```

在此示例`result=0`中，但在此代码的 C 变体中，我收到了正确的值（不是 0）

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:33:08.730

根据您描述 C api 的评论：

```
link(const char* set, conn_type* connection );
func(conn_type* connection, uint32_t* status); 
```

因为 func 需要一个指向连接类型的指针，所以代码应该是这样的：

```
mydll=ctypes.CDLL('mydll')
connection_t = ctypes.c_uint32
link = mydll.link
link.argtypes=(ctypes.c_char_p, ctypes.POINTER(connection_t) )
connection = connection_t()
link("localhost: 5412", ctypes.byref(connection))

func=mydll.func
status_t=ctypes.c_uint32
status=status_t()
func.argtypes=(ctypes.POINTER(connection_t),ctypes.POINTER(status_t))
result=func(ctypes.byref(connection), ctypes.byref(status)) 
```

# javascript - 如何将“或”运算符合并到我的 javascript 数组代码中？

> ID：10334188
> 
> 赞同：0
> 
> 时间：2012-04-26T13:14:19.640
> 
> 标签：javascript

我正在使用下面的**javascript**代码来隐藏/如何基于所选项目类型的部分。下面数组中的值是从保管箱中选择的值。下面的 id 是部分/字段集 id [我知道它们是数字，但这是我们获得应用程序的方式，所以现在坚持使用它]。我想有多个这样的值：

值：“广告”，值：“小册子”，值：“巴士套”

所以基本上我想说：如果**value**等于 Ad **、** Brochure**或**Bus Wrap，则显示 id 838。我无法让它工作。如何将“或”运算符合并到此代码中？

```
//Project Types
var projectTypes = new Array (
    {id : '838', value: 'Ad'},
    {id : '838', value: 'Cars'},
    {id : '839', value: 'Brochure'},
    {id : '839', value: 'Planes'},
    {id : '840', value: 'Bus Wrap'},
    {id : '840', value: 'Boats'}
);

refreshSections(project_type);  

function refreshSections(selectedType) 
{   
    for (var i = 0; i < projectTypes.length; i++) 
    {
        if (projectTypes[i].value == selectedType) 
        {
            document.getElementById("section-"+ projectTypes[i].id).style.display = '';
        } 
        else 
        {
            document.getElementById("section-"+ projectTypes[i].id).style.display = 'none';
        }
    }
} 
```

这是我想要完成的 html 示例：

```
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>Project Overview</title>
    <script type="text/javascript">
    var projectType_Field_Id = '1169';

    //Project Types
    var projectTypes = new Array (
        {id : '11', value:'Cars'},
        {id : '12', value:'Boats'},
        {id : '13', value:'Planes'}

        );

    //occurs onLoad
    function formOnLoad()
    {
        var project_type = document.getElementById(projectType_Field_Id).value;
        refreshSections(project_type);
        }
    /*
     *  Onchange - Project Type
     */
    function projectTypeChange()
    { 
        var project_type = document.getElementById(projectType_Field_Id).value;
        refreshSections(project_type);
    }

    function refreshSections(selectedType) 
    {    
        for (var i = 0; i < projectTypes.length; i++) 
        {
            if (projectTypes[i].value == selectedType) 
            {
                document.getElementById("section-"+ projectTypes[i].id).style.display = '';
            } else {
                document.getElementById("section-"+ projectTypes[i].id).style.display = 'none';
            }
        }

    }

    </script>
    </head>

    <body onload="formOnLoad();">
    <form method="post" action="">
    <fieldset name="mainSection">
                    <legend style="color:blue; font-weight:bold">Project Overview Section</legend>

                    <table style="width: 100%">
                        <tr>
                            <td style="height: 33px; width: 178px; color:maroon">Name</td>
                            <td style="height: 33px"><input  id="1125" name="1125" type="text" /></td>
                        </tr>
                        <tr>
                            <td style="height: 33px; width: 178px; color:maroon">Email</td>
                            <td style="height: 33px"><input  id="1026" name="1026" type="text" /></td>
                        </tr>
                        <tr>
                            <td style="width: 178px">Product Title</td>
                            <td><input  id="1089" name="1089" type="text" /></td>
                        </tr>
                        <tr>
                            <td style="width: 178px">Product Type</td>
                            <td><select id="1169" name="1169"  onChange="projectTypeChange();">
                            <option value="">Select</option>
                            <option value="Cars">Cars</option>
                            <option value="Boats">Boats</option>
                            <option value="Planes">Planes</option>
                            <option value="Trains">Trains</option>
                            <option value="Skateboard">Skateboard</option>
                            <option value="Helicopter">Helicopter</option>

                            </select></td>
                        </tr>
                                        </table>
                </fieldset><br /><br />

                <fieldset id="section-11" name="section-11">
                    <legend style="color:fuchsia; font-weight:bold">Car Details Section</legend>

                    <table cellpadding="2" style="width: 100%">
                        <tr>
                            <td style="width: 334px; height: 35px"><label style="color:maroon">Size:</label></td>
                            <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                        </tr>
                        <tr>
                            <td style="height: 35px; width: 334px">Color:</td>
                            <td style="height: 35px">
                            <select id="1433" name="1433">
                    <option value="Orange">Orange</option>
                            <option value="Blank">Blank</option>
                            <option value="Green">Green</option>
                </select></td>
                        </tr>
                        <tr>
                            <td style="width: 334px">Description:</td>
                            <td>
                            <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                        </tr>
                    </table>
                                </fieldset>
                                <br />
                <fieldset id="section-12" name="section-12">
                    <legend style="color:fuchsia; font-weight:bold">Plane Details Section</legend>

                    <table cellpadding="2" style="width: 100%">
                        <tr>
                            <td style="width: 334px; height: 35px"><label  style="color:maroon">Size:</label></td>
                            <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                        </tr>
                        <tr>
                            <td style="height: 35px; width: 334px">Color:</td>
                            <td style="height: 35px">
                            <select id="1433" name="1433">
                    <option value="Orange">Orange</option>
                            <option value="Blank">Blank</option>
                            <option value="Green">Green</option>
                </select></td>
                        </tr>
                        <tr>
                            <td style="width: 334px">Description:</td>
                            <td>
                            <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                        </tr>
                    </table>
                                </fieldset><br />
                <fieldset id="section-13" name="section-13">
                    <legend style="color:fuchsia; font-weight:bold">Boat Details Section</legend>

                    <table cellpadding="2" style="width: 100%">
                        <tr>
                            <td style="width: 334px; height: 35px"><label  style="color:maroon">Size:</label></td>
                            <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                        </tr>
                        <tr>
                            <td style="height: 35px; width: 334px">Color:</td>
                            <td style="height: 35px">
                            <select id="1433" name="1433">
                    <option value="Orange">Orange</option>
                            <option value="Blank">Blank</option>
                            <option value="Green">Green</option>
                </select></td>
                        </tr>
                        <tr>
                            <td style="width: 334px">Description:</td>
                            <td>
                            <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                        </tr>
                    </table>
                                </fieldset>
    <fieldset id="section-1011" name="section-1011">
                    <legend style="color:green; font-weight:bold">Misc Info Section</legend>

                    <table cellpadding="2" style="width: 100%">
                        <tr>
                            <td style="width: 334px; height: 35px"><label>Size:</label></td>
                            <td style="height: 35px"><input id="1301" name="1301" type="text" /></td>
                        </tr>
                        <tr>
                            <td style="height: 35px; width: 334px">Color:</td>
                            <td style="height: 35px">
                            <select id="1302" name="1302">
                    <option value="Orange">Orange</option>
                            <option value="Blank">Blank</option>
                            <option value="Green">Green</option>
                </select></td>
                        </tr>
                        <tr>
                            <td style="width: 334px">Description:</td>
                            <td>
                            <textarea id="1303" name="1303" rows="2" style="width: 433px"></textarea></td>
                        </tr>
                    </table>
                                </fieldset>
                                <input name="Send Job" type="submit" value="Send Job" />

    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:23:48.010

看起来在你的 for 循环中，你只需要检查你是否`selectedType`匹配`projectTypes`. 试试这个 -

```
for (var i = 0; i < projectTypes.length; i++) 
{
    if (projectTypes[i].value == selectedType) 
    {
        document.getElementById("section-"+ projectTypes[i].id).style.display = '';
        break;
    } 

} 
```

这只会在匹配项目类型时显示您的元素，然后在匹配后立即跳出循环。

# jquery - Jquery：摇摆标志

> ID：10334191
> 
> 赞同：0
> 
> 时间：2012-04-26T13:14:27.470
> 
> 标签：jquery

我目前正在为一个老派 c64 小组制作一个网站，我认为展示像旧介绍那样左右摆动的徽标会很好。

我以为我有它，但它向一个方向摆动，然后回来然后停止。

这是代码：

```
jQuery(document).ready(function() {
function right() {
    $('header img').animate({
    left: '680px',
    }, 5000, function() {
    left()
    });
}
function left() {
    $('header img').animate({
    left: '0px',
    }, 5000, function() {
    right()
    });
}
}); 
```

我确定我缺少一些简单的东西，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:23:04.940

看起来这可能是范围的问题。尝试在就绪事件处理程序之外定义函数，如下所示：

```
function right() {
    $('header img').animate({
    left: '680px',
    }, 5000, function() {
        left();
    });
}

function left() {
    $('header img').animate({
    left: '0px',
    }, 5000, function() {
        right();
    });
}

jQuery(document).ready(function() {
    right();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:26:09.603

我认为这与动画队列有关。我将 stop() 添加到 t 动画中，现在它可以工作了。因此，如果您想在页面上使用摆动徽标，请使用以下代码：

```
jQuery(document).ready(function() {
right();

    function right() {
        $('#images img').stop().animate({
// Move the image right to the width of the container, minus the width of the image
        left: '480px',
        }, 5000, function() {
        left()
        });
    }
    function left() {
        $('#images img').stop().animate({
// Move back to the left
        left: '0px',
        }, 5000, function() {
        right()
        });
    }

}); 
```

# c# - 外键实体框架问题

> ID：10334192
> 
> 赞同：1
> 
> 时间：2012-04-26T13:14:35.207
> 
> 标签：c#, .net

我有一个父子实体：

```
public class Transaction
{
  public int TransactionId {get; set;}
  public int? OrderId {get; set;}
  public virtual Order Order {get; set;}

} 

public class Order 
{
  public int Id {get; set;}
  public virtual List<OrderItems> OrderItems {get; set;}
}

public class OrderItem
{
  public int Id {get; set;}
  public string Item {get; set;}
  public virtual int OrderId {get; set;}
  public virtual Order Order {get; set;}
} 
```

上下文如下：

```
 modelBuilder.Entity<Transaction>( )
            .HasKey( x => x.TransactionId )
            .ToTable( "Transactions" );

        modelBuilder.Entity<Transaction>( )
            .HasOptional( x => x.Order )
            .WithMany( )
            .HasForeignKey( t => t.OrderId );

        modelBuilder.Entity<Order>( )
            .HasKey( o => o.Id )
            .ToTable("Orders");

        modelBuilder.Entity<OrderItem>( )
            .HasKey( i => i.Id )
            .ToTable( "OrderItems" );

        modelBuilder.Entity<OrderItem>( )
            .HasRequired( x => x.Order )
            .WithMany( o => o.OrderItems )
            .HasForeignKey( p => p.OrderId ); 
```

当我尝试创建事务类型的新实体时，类似于：

```
var transaction = new Transaction 
                   {TransactionId = Guid.NewGuid;
                    Order = new Order {OrderItems = new List<OrderItems>{Item="SunCream"}}}; 
```

和

```
ctx.Transactions.Add(transaction);
ctx.SaveChanges(); 
```

我明白了

> INSERT 语句与 FOREIGN KEY 约束“FK_Transactions_Orders_OrderId”冲突。冲突发生在数据库“Transactions”、表“dbo.Orders”、“Id”列中。

我到底在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:24:56.830

我相信在添加事务之前，您需要先将 Order 对象显式添加到 ctx 对象中。这样，当您调用`.SaveChanges()`上下文时，它将知道它必须先提交订单，然后再提交交易。

# ruby - 检查是否通过 require 执行或导入了 Ruby 程序

> ID：10334195
> 
> 赞同：5
> 
> 时间：2012-04-26T13:14:48.030
> 
> 标签：ruby, command-line

你如何检查一个 Ruby 文件是通过“require”或“load”导入的，而不是简单地从命令行执行的？

例如：

foo.rb 的内容：

```
puts "Hello" 
```

bar.rb 的内容

```
require 'foo' 
```

输出：

```
$ ./foo.rb
Hello
$ ./bar.rb
Hello 
```

基本上，我想调用 bar.rb 来不执行 puts 调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T13:17:54.383

```
if __FILE__ != $0       #if the file is not the main script which is running
  quit                  #then quit
end 
```

把它放在 foo.rb 中的所有代码之上

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T13:18:36.227

将 foo.rb 更改为：

```
if __FILE__ == $0
  puts "Hello"
end 
```

这将检查`__FILE__`- 当前 ruby​​ 文件的名称 - 与`$0`- 正在运行的脚本的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-16T03:38:13.247

为了更好的可读性，您还可以使用 `$PROGRAM_NAME`

```
 if __FILE__ == $PROGRAM_NAME
      puts "Executed via CLI #{__FILE__}"
    else
      puts 'Referred'
    end 
```

更多信息：[__FILE__ == $PROGRAM_NAME 在 ruby​​ 中是什么意思？](https://stackoverflow.com/questions/37101151/what-does-file-program-name-mean-in-ruby)

# css - Firefox 12 中没有水平滚动条，窗口最小化

> ID：10334198
> 
> 赞同：2
> 
> 时间：2012-04-26T13:15:02.650
> 
> 标签：css, firefox, scrollbar

我正在一个客户端站点上工作，并注意到当我的窗口处于还原模式（x 左侧的按钮）时，我在 FF12 中没有水平滚动条。有没有其他人注意到这一点？我在谷歌和这个板上搜索过，但在 FF12 中没有看到任何直接引用。我不知道此时它会导致问题，但我想知道这是否是一个错误。IE9 和 Chrome 在同一站点上显示此滚动条。我正在努力将它添加到我的 CSS 中。开发人员是否需要在 FF 中添加一些东西，也许是所有版本？我对网络开发还是很陌生。其他客户网站或我们的网站有这个滚动条，但我不负责这些项目的 CSS，所以我不知道它是否是手动添加的。我不应该需要 CSS 的帮助，我只是想知道 FF12 的其他人是否看到了这一点。干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T14:04:03.010

我找到了一张 Firefox 票。看一下

[https://bugzilla.mozilla.org/show_bug.cgi?id=749699](https://bugzilla.mozilla.org/show_bug.cgi?id=749699)

F12 对大负整数的位置有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T08:30:40.360

我们遇到了同样的问题。我们的 Web 应用程序使用 Firefox 11 正确显示了滚动条。

我们在 Firefox 12 中丢失了滚动条。

设置“overflow:scroll”显示滚动条的一部分，但它被禁用。因此，在某些情况下，Firefox 12 似乎不再识别框溢出。

Chrome 和 IE 正确显示滚动条。所以firefox 12肯定有变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T19:42:11.433

如果您没有看到滚动条 - 这可能意味着没有可滚动的内容。

无论如何。开启此功能可能会对您有所帮助：

```
html {
  overflow-x: scroll;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T22:40:07.770

改变这个：

```
img.style.top = "-9999999999px"; 
```

进入这个：

```
img.style.top = "-99999999px"; 
```

这是 Firefox 12 上的错误。

# python - 当路径是 Windows 映射的网络驱动器时，os.walk 在 Eclipse/PyDev 中引发“未知异常”

> ID：10334200
> 
> 赞同：0
> 
> 时间：2012-04-26T13:15:09.283
> 
> 标签：python, eclipse, search, pydev, os.walk

我正在尝试编写一个在 Windows 环境中搜索映射驱动器上的不同文件的模块。这在 PythonWin 和 Idle 中完美运行，但在 Eclipse/Pydev 中运行时会引发异常*“拆分输入时出现未知异常。按任意键退出” 。*L:\ ia 映射的网络驱动器

```
import os
path = "L:\\"
for (path, dirs, files) in os.walk(path):
    print dirs 
```

如果我设置 `path = "C:\\"`这个效果很好。Eclipse/PyDev 与 Idle 有什么不同的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:26:50.193

我知道 PyDev 做的不同的一件事是网站定制......尝试删除它只是为了看看它是否可以解决问题：

改名：

`plugins\org.python.pydev_XXX\pysrc\pydev_sitecustomize\sitecustomize.py`去`__sitecustomize.py`发射，看看这是否可能是问题......

# scala - 覆盖 BsonRecord 填充其字段的方式

> ID：10334205
> 
> 赞同：1
> 
> 时间：2012-04-26T13:15:31.880
> 
> 标签：scala, mongodb, lift

我想扩展 BsonRecord 类以在填写时处理它的一些字段。我试图通过扩展 setFieldsFrom... 方法来做到这一点，但它似乎不起作用...

这是我的代码：

```
trait NodeBsonRecord[MyType <: BsonRecord[MyType]] extends BsonRecord[MyType]
{
    self: MyType =>

    override def setFieldsFromDBObject(dbo:DBObject) =
    {
      super.setFieldsFromDBObject(dbo)
      println("setFieldsFromDBObject")
    }
    override def setFieldsFromJSON(json:String) =
    {
      val out = super.setFieldsFromJSON(json)
      println("setFieldsFromJSON")
      out
    }
    override def setFieldsFromJsonString(json:String) =
    {
      val out = super.setFieldsFromJsonString(json)
      println("setFieldsFromJsonString")
      out
    }
    override def setFieldsFromJValue(jval:JValue) =
    {
      val out = super.setFieldsFromJValue(jval)
      println("setFieldsFromJValue")
      out
    }
    override def setFieldsFromReq(req:Req) =
    {
      val out = super.setFieldsFromReq(req)
      println("setFieldsFromReq")
      out
    }
} 
```

因此，当我请求记录时（使用 MongoRecord.find()），我希望看到一个“setFieldFrom...”的东西，但什么都没有打印出来...

任何人都可以告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:46:41.960

Mongo 似乎在 BsonMetaRecord 中使用[setFieldsFromDBObject](https://github.com/lift/framework/blob/master/persistence/mongodb-record/src/main/scala/net/liftweb/mongodb/record/BsonRecord.scala#L138)作为 find 的一部分，它遍历每个字段并调用 setFromAny。

# css - IE8中的按钮布局问题

> ID：10334207
> 
> 赞同：0
> 
> 时间：2012-04-26T13:15:46.580
> 
> 标签：css

我在右侧的搜索有一个名为 Go 的按钮，它在除 IE8 之外的所有现代浏览器中都位于正确的位置（在 IE7 和 IE6 中，这是一场噩梦，但我不关心那些浏览器）。我尝试了一些东西，但是按钮在 IE8 中没有到位，有人可以告诉我为什么会这样，所以这里有一张图片来说明我的意思 [http://content.screencast.com/users/cryoffalcon/folders/Jing /media/92fc0c87-44ac-4c7a-9af5-d8d5824ef85d/go%20button.png](http://content.screencast.com/users/cryoffalcon/folders/Jing/media/92fc0c87-44ac-4c7a-9af5-d8d5824ef85d/go%20button.png)

这是演示页面[http://bloghutsbeta.blogspot.com/2012/03/testing-3.html](http://bloghutsbeta.blogspot.com/2012/03/testing-3.html) 如果你不想在这里寻找 css 是 css：

```
.formbox {
background:#434445;
border-top-color:#0f0f0f;
border-top-style:solid;
border-top-width:3px;
border-left-color:#0f0f0f;
border-left-style:solid;
border-left-width:3px;
border-right-color:#797d7d;
border-right-style:solid;
border-right-width:3px;
border-bottom-color:#797d7d;
border-bottom-style:solid;
border-bottom-width:3px;
-webkit-border-radius: 6px;
    -moz-border-radius: 6px;
    border-radius: 6px;
color:#787D7D;
font:13px Verdana,Geneva,sans-serif;
margin: 3px 0 5px 5px;
padding:1px;
}
.formbutton {
margin:0 5px 5px 0;
color:#B6E85E;
text-shadow: 0 0 4px #7F241C, 0 0 4px #7F241C,
        0 0 4px #7F241C;
cursor:pointer;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:41:18.970

如果您在 html 头中创建一个条件语句来包装您的新样式表，这很容易解决，例如

```
<!--[if IE 8]><link rel="stylesheet" href="Css/ie.css" /><![endif]--> 
```

并将以下 CSS 放入您的样式表中，这应该可以解决问题。

```
input.formbutton.buttonbloghuts.buttongradient {
position: relative;
top: 8px;
} 
```

您的脑海中已经有了一个条件语句来创建您的 HTML5 元素。

有任何问题，我很乐意提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:46:26.663

`.formbox`从和中删除顶部和底部边距`.formbutton`，并将它们都设置为`vertical-align: top;`很大程度上解决了 IE8 中的问题。如果您需要它们周围的垂直空间，您可以`padding`在父级上移动 use `form`（并使其成为`display: block;`）。

（使用[条件类](http://lostmonocle.com/post/108304549/css-tip-conditional-classes)可以更轻松地针对此类针对 IE 的特定修复）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:30:30.487

如果您可以提供一个按钮代码的 jsfiddle 会有所帮助。IE 开发工具不太愿意与我合作。如果我没记错的话，请尝试在两个输入字段上添加左浮动，看看会发生什么。

看看这个网站和搜索：它真的很相似，但是有一个额外的 div 来做有弹性的东西：[http ://www.genesismedicalimaging.com](http://www.genesismedicalimaging.com/)

# java - 迭代器映射问题

> ID：10334208
> 
> 赞同：-1
> 
> 时间：2012-04-26T13:15:50.793
> 
> 标签：java, collections, iterator, maps

我想采用一个迭代器，它检索数组列表的每条记录（数组列表中的每个对象都有三个字段）。现在，我希望将检索到的记录发送到一个函数，我想在其中填充一个 Map。

有人可以建议怎么做吗？

```
public class MainClass {

public void func1(int count){
    System.out.println("iterator's record retrieved. Next is to populate"+count+"to the map");
    //populateMap();
    return;
}

public static void main(String[] args) {
    // TODO Auto-generated method stub

    MainClass mc=new MainClass();

    ThreeFields tf1=new ThreeFields();
    ThreeFields tf2=new ThreeFields();
    ThreeFields tf3=new ThreeFields();

    tf1.setField1("A");
    tf1.setField2("B");
    tf1.setField3("C");

    tf2.setField1("D");
    tf2.setField2("E");
    tf2.setField3("F");

    tf3.setField1("G");
    tf3.setField2("H");
    tf3.setField3("I");

    ArrayList al=new ArrayList();
    Object al1;
    al.add(tf1);
    al.add(tf2);
    al.add(tf3);

    Iterator i=al.listIterator();

    while(i.hasNext()){
        al1=i.next();

    }

} 
```

}

我不明白如何使用检索到的对象 al1 的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:26:25.013

考虑将原始列表的引用传递给您的方法，以将其转换为如下所示的地图：

```
 Map<Integer, ThreeFields> convert2Map(List<ThreeFields> list) {
      Map<Integer, ThreeFields> map = new HashMap<Integer, ThreeFields>(list.size());
      // Use LinkedHashMap instead of HashMap if you want to retain the insertion order
      for (int i=0; i<list.size(); i++)
          map.put(i, list.get(i));
      return map;
 } 
```

当你在调用方法中声明你的列表时，你应该使用泛型。所以使用这种形式：

```
List<ThreeFields> al = new ArrayList<ThreeFields>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:19:46.547

```
Iterator myItr  =  myList.iterator();
Item myItem = myItr.next();
myFunction(myItem); 
```

那是你想要的吗？

您可能希望将来发布您尝试的代码。人们不喜欢为您编写代码，而是喜欢帮助您更正它。这样你就可以学习，而且它不仅表现出他们的努力。

# python - 从python wikipedia页面输出中检索主要段落

> ID：10334209
> 
> 赞同：0
> 
> 时间：2012-04-26T13:15:57.450
> 
> 标签：python, html, parsing, wikipedia

有什么方法可以提取

> 阿尔伯特·爱因斯坦（/ˈælbərt ˈaɪnstaɪn/；德语：ˈalbɐt ˈaɪnʃtaɪn；1879 年 3 月 14 日至 1955 年 4 月 18 日）是一位德国出生的理论物理学家，他发展了广义相对论，影响了物理学的一场革命。............. 超过 150 篇非科学作品。[6][8] 他的巨大智慧和独创性使“爱因斯坦”这个词成为天才的代名词。[9]

（主要段落的整个输出，如果代码运行可见）

自动从以下代码的输出？即使它是从不同的维基百科页面输出的：

```
import urllib2
import re, sys
from HTMLParser import HTMLParser

class MLStripper(HTMLParser):
    def __init__(self):
        self.reset()
        self.fed = []
    def handle_data(self, d):
        self.fed.append(d)
    def get_data(self):
        return ''.join(self.fed)

def stripHTMLTags(html):
    html = re.sub(r'<{1}br{1}>', '\n', html)
    s = MLStripper()
    s.feed(html)
    text = s.get_data()
    if "External links" in text:
        text, sep, tail = text.partition('External links')
    if "External Links" in text:
        text, sep, tail = text.partition('External Links')
    text = text = text.replace("See also","\n\n See Also - \n")
    text = text.replace("*","- ")
    text = text.replace(".", ". ")
    text = text.replace("  "," ")
    text = text.replace("""   /
 / ""","")
    return text

opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0')]
infile = opener.open('http://en.wikipedia.org/w/index.php?title=Albert_Einstein&printable=yes')
page = infile.read()
print stripHTMLTags(page) 
```

请原谅我糟糕的格式、代码（可能还有缩进），我现在使用的是 3" 显示器并且没有机会检查我自己的代码：P。

还要感谢那些帮助我完成这项工作的人:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T16:15:54.880

我强烈建议不要对任何网站进行 html 抓取。

这样做很痛苦，很容易损坏，很多网站所有者不喜欢它。

使用它（[python-wikitools](https://github.com/alexz-enwp/wikitools)）与 Wikipedia API（从长远来看是您的最佳选择）进行交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T20:36:13.067

以下 API 请求返回纯文本页面提取： [https ://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=Albert%20Einstein&explaintext](https://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=Albert%20Einstein&explaintext)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T16:02:38.470

我在这里留下我的答案，因为它直接是 OP 要求的。执行此操作的正确方法是按照下面[@ChristophD 的答案](https://stackoverflow.com/a/10337343/1290420)`python-wikitools`中的建议使用。

* * *

我稍微修改了您问题中的代码以使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。存在其他选项。您可能还想尝试[lxml](http://lxml.de/)。

```
import urllib2
import re, sys
from HTMLParser import HTMLParser

# EDIT 1: import the packag
from BeautifulSoup import BeautifulSoup

class MLStripper(HTMLParser):
    def __init__(self):
        self.reset()
        self.fed = []
    def handle_data(self, d):
        self.fed.append(d)
    def get_data(self):
        return ''.join(self.fed)

def stripHTMLTags(html):
    html = re.sub(r'<{1}br{1}>', '\n', html)
    s = MLStripper()
    s.feed(html)
    text = s.get_data()
    if "External links" in text:
        text, sep, tail = text.partition('External links')
    if "External Links" in text:
        text, sep, tail = text.partition('External Links')
    text = text = text.replace("See also","\n\n See Also - \n")
    text = text.replace("*","- ")
    text = text.replace(".", ". ")
    text = text.replace("  "," ")
    text = text.replace("""   /
 / ""","")
    return text

opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0')]
infile = opener.open('http://en.wikipedia.org/w/index.php?title=Albert_Einstein&printable=yes')
page = infile.read()

# EDIT 2: convert the page and extract text from the first <p> tag
soup = BeautifulSoup(page)
para = soup.findAll("p", limit=1)[0].text

print stripHTMLTags(para) 
```

# iphone - 将图像放在 UITextfield 的底部作为背景

> ID：10334212
> 
> 赞同：0
> 
> 时间：2012-04-26T13:16:07.717
> 
> 标签：iphone, ios, xcode, ios5, uitextfield

经过大量搜索后，我发布了这个问题，我必须在 UITextfield 的底部放置一个图像，我已经使用以下代码进行了尝试：

```
letterField.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;
letterField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
letterField.textAlignment = UITextAlignmentCenter;
letterField.borderStyle = UITextBorderStyleNone;
UIImageView *myView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"text_line.png"]];
[letterField  setLeftView:myView];
[letterField  setRightViewMode:UITextFieldViewModeAlways];
[myView release];
// letterField.background = [UIImage imageNamed:@"text_line.png"];  
// [letterField setBackground:[UIImage imageNamed:@"text_line.png"]];  
letterField.textColor = [UIColor whiteColor];  
letterField.returnKeyType = UIReturnKeyDone; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:21:16.277

```
[yourtextfield insertSubview:imgViewTitleBackGround atIndex:0];// mgViewTitleBackGround is image view with background image. 
```

//或者

```
[yourtextfield setBackground:[UIImage imageNamed:@"text_line.png"]];// you can add your image
yourtextfield.textColor = [UIColor redColor]; 
```

希望，这会帮助你..享受

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:24:55.480

对不起，我之前的回答完全错误。从我可以看到您的图像是 text_line.png - 我想它是某种分隔线，我建议您尝试使用 UITextField 的边界创建一个新的 UIView，然后在此视图中添加文本字段并添加UIImage 视图再次作为该视图的子视图正确居中。我不知道这是否符合您的需求，但您可以尝试一下。

# iphone - Xcode：如何在 IOS5 故事板中添加新的标签屏幕？

> ID：10334215
> 
> 赞同：20
> 
> 时间：2012-04-26T13:16:14.800
> 
> 标签：iphone, objective-c, ios, xcode, ios5

![在此处输入图像描述](../Images/93714db7bbe19f1375b27e7be650aded.png)

我有这个.. 如何使用 iOS5 故事板添加另一个选项卡屏幕，以便“帐户”可以有 3 个屏幕。

账户 ---> 账户列表 ---> 账户详情

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-03T04:07:26.477

您首先放入一个新的 ViewController，然后按住 Ctrl 键从 Tab Bar Controller 拖动到该新控制器。

这会弹出一个弹出窗口，您可以在其中选择“添加关系 Segue”。这会将其连接为第三个选项卡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T13:25:26.247

这可以通过**编程**方式完成：

```
// Tab Controller
UITabBarController *tabBarController = [[UITabBarController alloc]init];

// Views to be accessed
UIViewController *controllerOne = [[UIViewController alloc]init];
UIViewController *controllerTwo = [[UIViewController alloc]init];
UIViewController *controllerThree = [[UIViewController alloc]init];

// Store UIViewControllers in array
NSArray* screenControllers = [NSArray arrayWithObjects:controllerOne, controllerTwo, controllerThree, nil];

// Add Views to Controller
tabBarController.viewControllers = screenControllers; 
```

或使用**InterfaceBuilder**：

*   将“标签栏项目”添加到左侧面板中的视图层次结构

    ![在此处输入图像描述](../Images/209087a8741fb5d105359c9a7debdde3.png)

或使用**情节提要**：

[iOS 故事板](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)（向下滚动/搜索“*只需将其添加到我的选项卡*”）

# php - Doctrine 2.1.6 逆向工程 1-n（一对多）关联被误解为 1-1（一对一）

> ID：10334217
> 
> 赞同：0
> 
> 时间：2012-04-26T13:16:16.733
> 
> 标签：php, sql, orm, doctrine-orm

我发现 Doctrine 的逆向工程过程有一个奇怪的行为，只需创建两个由简单的 1-n 关系绑定的简单表，看看以下 SQL 代码的快照：

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

DROP SCHEMA IF EXISTS `ACME` ;
CREATE SCHEMA IF NOT EXISTS `ACME` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci ;
USE `ACME` ;

-- -----------------------------------------------------
-- Table `ACME`.`task`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ACME`.`task` ;

CREATE  TABLE IF NOT EXISTS `ACME`.`task` (
  `id_task` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `description` VARCHAR(45) NULL ,
  PRIMARY KEY (`id_task`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `ACME`.`tag`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ACME`.`tag` ;

CREATE  TABLE IF NOT EXISTS `ACME`.`tag` (
  `id_tag` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `name` VARCHAR(50) NULL ,
  `task_id` INT UNSIGNED NOT NULL ,
  PRIMARY KEY (`id_tag`) ,
  INDEX `fk_tag_task` (`task_id` ASC) ,
  CONSTRAINT `fk_tag_task`
    FOREIGN KEY (`task_id` )
    REFERENCES `ACME`.`task` (`id_task` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 
```

我有一个 Symfony2 netbeans 项目

> /应用程序/MAMP/htdocs/Acme

从那个位置，根据

> [http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html](http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html)

在终端中我做了：

```
$ ./../../bin/php/php5.3.6/bin/php app/console doctrine:mapping:convert yml ./src/Acme/TaskBundle/Resources/config/doctrine/ --from-database --force
Processing entity "Tag"
Processing entity "Task"

Exporting "yml" mapping information to "/Applications/MAMP/htdocs/Acme/src/Acme/TaskBundle/Resources/config/doctrine"

$ ./../../bin/php/php5.3.6/bin/php app/console doctrine:mapping:import Acme\TaskBundle yml
Importing mapping information from "default" entity manager
  > writing /Applications/MAMP/htdocs/Acme/src/Acme/TaskBundle/Resources/config/doctrine/Tag.orm.yml
  > writing /Applications/MAMP/htdocs/Acme/src/Acme/TaskBundle/Resources/config/doctrine/Task.orm.yml

$ ./../../bin/php/php5.3.6/bin/php app/console doctrine:generate:entities Acme\TaskBundle
Generating entities for bundle "AcmeTaskBundle"
  > backing up Tag.php to Tag.php~
  > generating Acme\TaskBundle\Entity\Tag
  > backing up Task.php to Task.php~
  > generating Acme\TaskBundle\Entity\Task 
```

事实是它看起来还可以，因为如果你看一下“Tag.orm.yml”：

```
Acme\TaskBundle\Entity\Tag:
  type: entity
  table: tag
  fields:
    idTag:
      id: true
      type: integer
      unsigned: false
      nullable: false
      column: id_tag
      generator:
        strategy: IDENTITY
    name:
      type: string
      length: 50
      fixed: false
      nullable: true
  oneToOne:
    task:
      targetEntity: Task
      cascade: {  }
      mappedBy: null
      inversedBy: null
      joinColumns:
        task_id:
          referencedColumnName: id_task
      orphanRemoval: false
  lifecycleCallbacks: {  } 
```

它创建了**oneToOne**关系，而不是**oneToMany**！

如果您需要更多确认，这里是***Task.php***和***Tag.php***：

***任务.php***

```
namespace Acme\TaskBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Acme\TaskBundle\Entity\Task
 */
class Task
{
    /**
     * @var integer $idTask
     */
    private $idTask;

    /**
     * @var string $description
     */
    private $description;

    /**
     * Get idTask
     *
     * @return integer 
     */
    public function getIdTask()
    {
        return $this->idTask;
    }

    /**
     * Set description
     *
     * @param string $description
     */
    public function setDescription($description)
    {
        $this->description = $description;
    }

    /**
     * Get description
     *
     * @return string 
     */
    public function getDescription()
    {
        return $this->description;
    }
} 
```

***标签.php***

```
namespace Acme\TaskBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Acme\TaskBundle\Entity\Tag
 */
class Tag
{
    /**
     * @var integer $idTag
     */
    private $idTag;

    /**
     * @var string $name
     */
    private $name;

    /**
     * @var Acme\TaskBundle\Entity\Task
     */
    private $task;

    /**
     * Get idTag
     *
     * @return integer 
     */
    public function getIdTag()
    {
        return $this->idTag;
    }

    /**
     * Set name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this->name = $name;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * Set task
     *
     * @param Acme\TaskBundle\Entity\Task $task
     */
    public function setTask(\Acme\TaskBundle\Entity\Task $task)
    {
        $this->task = $task;
    }

    /**
     * Get task
     *
     * @return Acme\TaskBundle\Entity\Task 
     */
    public function getTask()
    {
        return $this->task;
    }
} 
```

小伙伴们也遇到过这个问题吗？
先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:20:23.230

我做了一个重要的发现：在第一个命令中使用 xml 而不是 yml，那个命令使用了学说：映射：转换，它以正确的方式工作。

该死的愚蠢的虫子。

Linuxatico

# java - LZW 压缩 - 修改版

> ID：10334220
> 
> 赞同：1
> 
> 时间：2012-04-26T13:16:21.417
> 
> 标签：java, compression, fileinputstream, fileoutputstream, lzw

我有一个 LZW 算法 -

```
private void start(int maxNumBits) throws IOException{
    System.out.println("Beginning");
    /** Compress a string to a list of output symbols. */
    // Build the dictionary.
    for (int i = 0; i < 256; i++)
        dict.put("" + (char)i, i);
    int i;
    String w = "";
    int bitsRead = 0;
    int bitsOutput = 0;
    int trieLength = 0;
    float lastCr = 0f;
    while((i = reader.read()) != EOF){
        bitsRead += 8;
        float currentCr = (float)bitsRead / (float)bitsOutput;
        if(bytesRead % 1024 == 0)
            System.out.println(currentCr);
        String wi = w + (char)i;
        if (dict.containsKey(wi) && ((currentCr >= lastCr) || (trieLength < maxNumBits))){
            w = wi;
            trieLength += 8;
        }
        else {
            fos.write(dict.get(w));
            bitsOutput += 8;
            // Add wi to the dictionary.
            dict.put(wi, mapSize++);
            w = "" + (char)i;
            trieLength = 0;
        }
        lastCr = currentCr;
    }
    // Output the code for w.
    if (!w.equals("")){
        fos.write(dict.get(w));
        bitsOutput += 8;
    }
} 
```

where`maxNumBits`应该是 trie 的最大大小。`maxNumBits`假设异常在传递参数的主类中被捕获。假设`dict`是 a `HashMap`，`reader`是 a`FileInputStream`并且`fos`是 a `FileOutputStream`。

在我的版本中，如果 trie 变满（即`trieLength > maxNumBits`），则继续压缩，直到当前压缩率（`currentCr`）小于上一个压缩率（`lastCr`）。

我已经在一个 ~8mb 文件上运行了它，并且更改 trie 长度对累积压缩率没有任何影响。这是代码吗

```
if(dict.containsKey(wi) && ((currentCr >= lastCr)||(trieLength < maxNumBits))) 
```

是否符合所描述的要求？

谢谢你的帮助，

山姆

编辑 - 感谢您在格式化方面的帮助，爱德华

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T19:43:39.027

事实证明，在检查下一次迭代之前没有检查 trieLength，这意味着当它变满时没有生成新的 trie。

# android - 适用于 1.6 的 Android 快速操作

> ID：10334221
> 
> 赞同：-3
> 
> 时间：2012-04-26T13:16:31.617
> 
> 标签：android

是否有可能在 2.3 中为 1.6 执行快速操作栏。请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:21:53.127

这里有一个很好的指南：

[http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

并通过它基于这里的源一目了然：

[http://code.google.com/p/simple-quickactions/](http://code.google.com/p/simple-quickactions/)

看起来它应该适用于 1.6

# facebook - Facebook Bundle 和 Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken::serialize() 必须返回一个字符串或 NULL

> ID：10334223
> 
> 赞同：1
> 
> 时间：2012-04-26T13:16:41.370
> 
> 标签：facebook, serialization, symfony

我已经按照捆绑包的文档（标记版本与 symfony 2.012 一起使用）：

[http://knpbundles.com/FriendsOfSymfony/FOSFacebookBundle](http://knpbundles.com/FriendsOfSymfony/FOSFacebookBundle)

所以当我打算现在登录我的网站时，我遇到了这个错误：

Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken::serialize() 必须返回一个字符串或 NULL

我使用 facebook 登录，但它没有登录我的网站，这是我的配置文件：

//安全.yml

```
security:
factories:
    - "%kernel.root_dir%/../vendor/bundles/FOS/FacebookBundle/Resources/config/security_factories.xml"
providers:

    fos_userbundle:
        id: fos_user.user_manager
    my_fos_facebook_provider:
       id: my.facebook.user    

firewalls:
    main:
        pattern: .*
        fos_facebook:
            app_url: "http://apps.facebook.com/psiware/"
            server_url: "http://localhost/keepinsport/web/app_dev.php/ks"
            login_path: ^/login
            check_path: ^/login_check$
            default_target_path: /
            provider: my_fos_facebook_provider
        form_login:
            provider:     fos_userbundle
            login_path:   /login
            use_forward:  false
            check_path:   /login_check
            failure_path: null
            default_target_path: /ks
        logout:
            path:   /logout
            target: /
            handlers: ["fos_facebook.logout_handler"] 
        anonymous:    true
        remember_me:
          key:      aSecretKey
          #Correspond à un mois
          lifetime: 2592000
          path:     /
          domain:   ~           

encoders:
    Symfony\Component\Security\Core\User\User: plaintext
    FOS\UserBundle\Model\UserInterface: sha512

# C'est ici que tout se passe : qui a accès à quoi ?
access_control:
    - { path: ^/$,          role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/login$,     role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/register,   role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/resetting,  role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/admin/,     role: ROLE_ADMIN }
    - { path: ^/ks,         role: ROLE_USER }
    - { path: ^/facebook/,  role: [ROLE_FACEBOOK] }
    - { path: ^/.*,         role: [IS_AUTHENTICATED_ANONYMOUSLY] }

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH] 
```

//我的 config.yml

```
fos_facebook:
file:   %kernel.root_dir%/../vendor/facebook/src/base_facebook.php
alias:  facebook
app_id: 106071199501870
secret: 219af5b2792ea6267de3cf1017f91c1a
cookie: true
permissions: [email, user_birthday, user_location]

services:
my.facebook.user:
    class: Ks\UserBundle\Security\User\Provider\FacebookProvider
    arguments:
        facebook: "@fos_facebook.api"
        userManager: "@fos_user.user_manager"
        validator: "@validator" 
```

//我的 login.html.twig

```
{{ facebook_initialize({'xfbml': true, 'fbAsyncInit': 'onFbInit();'}) }}
{{ facebook_login_button({'autologoutlink': true}) }}
 <script>
    function goLogIn(){
        window.location = "{{ path('_security_check') }}";
    }

    function onFbInit() {
        if (response.session || response.authResponse) {
            setTimeout(goLogIn, 500);
        } else {
            window.location.href = "{{ path('_security_logout') }}";
        }
    }
</script> 
```

//我的用户实体

```
 /**
 * @var string
 *
 * @ORM\Column(name="firstname", type="string", length=255)
 */
protected $firstname;

/**
 * @var string
 *
 * @ORM\Column(name="lastname", type="string", length=255)
 */
protected $lastname;

/**
 * @var string
 *
 * @ORM\Column(name="facebookId", type="string", length=255)
 */
protected $facebookId;

public function serialize()
{
    return serialize(array($this->facebookID, parent::serialize()));
}

public function unserialize($data)
{
    list($this->facebookID, $parentData) = unserialize($data);
    parent::unserialize($parentData);
}

/**
 * @return string
 */
public function getFirstname()
{
    return $this->firstname;
}

/**
 * @param string $firstname
 */
public function setFirstname($firstname)
{
    $this->firstname = $firstname;
}

/**
 * @return string
 */
public function getLastname()
{
    return $this->lastname;
}

/**
 * @param string $lastname
 */
public function setLastname($lastname)
{
    $this->lastname = $lastname;
}

/**
 * Get the full name of the user (first + last name)
 * @return string
 */
public function getFullName()
{
    return $this->getFirstName() . ' ' . $this->getLastname();
}

/**
 * @param string $facebookId
 * @return void
 */
public function setFacebookId($facebookId)
{
    $this->facebookId = $facebookId;
    $this->setUsername($facebookId);
    $this->salt = '';
}

/**
 * @return string
 */
public function getFacebookId()
{
    return $this->facebookId;
}

/**
 * @param Array
 */
public function setFBData($fbdata)
{
    if (isset($fbdata['id'])) {
        $this->setFacebookId($fbdata['id']);
        $this->addRole('ROLE_FACEBOOK');
    }
    if (isset($fbdata['first_name'])) {
        $this->setFirstname($fbdata['first_name']);
    }
    if (isset($fbdata['last_name'])) {
        $this->setLastname($fbdata['last_name']);
    }
    if (isset($fbdata['email'])) {
        $this->setEmail($fbdata['email']);
    }
} 
```

//我的facebookProvider.php

```
class FacebookProvider implements UserProviderInterface 
```

{ /** * @var \Facebook */ 受保护的 $facebook; 受保护的 $userManager; 受保护的 $validator;

```
public function __construct(BaseFacebook $facebook, $userManager, $validator)
{
    $this->facebook = $facebook;
    $this->userManager = $userManager;
    $this->validator = $validator;
}

public function supportsClass($class)
{
    return $this->userManager->supportsClass($class);
}

public function findUserByFbId($fbId)
{
    return $this->userManager->findUserBy(array('facebookId' => $fbId));
}

public function loadUserByUsername($username)
{
    $user = $this->findUserByFbId($username);

    try {
        $fbdata = $this->facebook->api('/me');
    } catch (FacebookApiException $e) {
        $fbdata = null;
    }

    if (!empty($fbdata)) {
        if (empty($user)) {
            $user = $this->userManager->createUser();
            $user->setEnabled(true);
            $user->setPassword('');
        }

        // TODO use http://developers.facebook.com/docs/api/realtime
        $user->setFBData($fbdata);

        if (count($this->validator->validate($user, 'Facebook'))) {
            // TODO: the user was found obviously, but doesnt match our expectations, do something smart
            throw new UsernameNotFoundException('The facebook user could not be stored');
        }
        $this->userManager->updateUser($user);
    }

    if (empty($user)) {
        throw new UsernameNotFoundException('The user is not authenticated on facebook');
    }

    return $user;
}

public function refreshUser(UserInterface $user)
{
    if (!$this->supportsClass(get_class($user)) || !$user->getFacebookId()) {
        throw new UnsupportedUserException(sprintf('Instances of "%s" are not supported.', get_class($user)));
    }

    return $this->loadUserByUsername($user->getFacebookId());
} 
```

}

我不明白为什么序列化不起作用感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:14:15.610

您使用的是哪个版本的 Symfony？对于 Symfony 2.0.X，您需要分支 2.0，而不是 master。检查捆绑文档（这是分支 2.0 之一）：

[https://github.com/FriendsOfSymfony/FOSFacebookBundle/blob/2.0/README.md](https://github.com/FriendsOfSymfony/FOSFacebookBundle/blob/2.0/README.md)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:40:03.260

和提供者的in`security.yml` `check_path`不应该相同。`form_login``fos_facebook`

# ruby-on-rails - 我的 Rails rake 测试被杀死（超时），因为我认为（！）是因为我写了一个懒惰的构建方法

> ID：10334227
> 
> 赞同：0
> 
> 时间：2012-04-26T13:16:55.597
> 
> 标签：ruby-on-rails, unit-testing

这里有人会碰巧知道以下代码是否能够在运行后导致处理器严重消耗`rake test`？

```
 def calc_yesterday_count
    self.jobs.select{|a| a.completed_on > Time.zone.now.yesterday.beginning_of_day && a.completed_on < Time.zone.now.yesterday.end_of_day if a.completed_on != nil}.length
  end

  def calc_yesterday_sum
    self.jobs.select{|a| a.completed_on > Time.zone.now.yesterday.beginning_of_day && a.completed_on < Time.zone.now.yesterday.end_of_day if a.completed_on != nil}.map(&:total).sum
  end

  def calc_today_count
    self.jobs.select{|a| a.completed_on > Time.zone.now.beginning_of_day && a.completed_on < Time.zone.now.end_of_day if a.completed_on != nil}.length
  end

  def calc_today_sum
    self.jobs.select{|a| a.completed_on > Time.zone.now.beginning_of_day && a.completed_on < Time.zone.now.end_of_day if a.completed_on != nil}.map(&:total).sum
  end

  def calc_week_count
    self.jobs.select{|a| a.completed_on > Time.zone.now.beginning_of_week && a.completed_on < Time.zone.now.end_of_week if a.completed_on != nil}.length
  end

  def calc_week_sum
    self.jobs.select{|a| a.completed_on > Time.zone.now.beginning_of_week && a.completed_on < Time.zone.now.end_of_week if a.completed_on != nil}.map(&:total).sum
  end

  def calc_month_count
    self.jobs.select{|a| a.completed_on > Time.zone.now.beginning_of_month && a.completed_on < Time.zone.now.end_of_month if a.completed_on != nil}.length
  end

  def calc_month_sum
    self.jobs.select{|a| a.completed_on > Time.zone.now.beginning_of_month && a.completed_on < Time.zone.now.end_of_month if a.completed_on != nil}.map(&:total).sum
  end

  def calc_year_count
    self.jobs.select{|a| a.completed_on > Time.zone.now.beginning_of_year && a.completed_on < Time.zone.now.end_of_year if a.completed_on != nil}.length
  end

  def calc_year_sum
    self.jobs.select{|a| a.completed_on > Time.zone.now.beginning_of_year && a.completed_on < Time.zone.now.end_of_year if a.completed_on != nil}.map(&:total).sum
  end

  def calc_open_estimates_sum
    self.jobs.uncompleted.select{|a|a.which != 'job'}.map(&:total).sum
  end

  def calc_jobs_in_progress_sum
    self.jobs.non_estimate.uncompleted.select{|a| a.scheduled_on < Time.zone.now if a.scheduled_on != nil}.map(&:total).sum
  end

alias :account_stats_method :account_stats

    #lazy build account stats
def build_account_stats
  @estimates_in_progress = self.jobs.completed.select{|a|a.which != 'job'}.map(&:total).sum
  @jobs_in_progress      = self.jobs.non_estimate.uncompleted.select{|a| a.scheduled_on < Time.zone.now if a.scheduled_on != nil}.map(&:total).sum
  @account_stats = {
    :account_id         => self.id,
    :yesterday_count    => self.calc_yesterday_count,
    :yesterday_total    => self.calc_yesterday_sum,
    :today_count        => self.calc_today_count,
    :today_total        => self.calc_today_sum,
    :week_count         => self.calc_week_count,
    :week_total         => self.calc_week_sum,
    :month_count        => self.calc_month_count,
    :month_total        => self.calc_month_sum,
    :year_count         => self.calc_year_count,
    :year_total         => self.calc_year_sum
  }
  self.create_account_stats(@account_stats)
end

def account_stats
  if account_stats_method.nil?
    build_account_stats
  else
    account_stats_method
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:59:50.427

仍然有点难以看到发生了什么，但我假设 self.jobs 基于 ActiveRecord 关联。当您使用`self.jobs.select { ... }`它时，它会从数据库中加载所有作业，然后遍历所有作业以确定要提取哪些作业。您最好使用那里的数据库查询来选择您想要的记录。假设您使用的是 Rails 3，更改`select`为`where`应该是正确的方向。如果您使用的是 Rails 2，则需要将其更改为`:conditions`.

```
self.jobs.where('completed_on > ? AND completed_on < ? AND completed_on IS NOT NULL' , Time.zone.now.beginning_of_day, Time.zone.now.end_of_day).map(&:total).sum 
```

# c# - 更好地编写静态词典

> ID：10334229
> 
> 赞同：0
> 
> 时间：2012-04-26T13:16:58.557
> 
> 标签：c#, dictionary, enumeration

我正在保留一个静态字典，以将存储在数据库中的简单整数映射到枚举值。

```
static Dictionary<long, EModelType> AttributeIdTypeToEModelType = 
   new Dictionary<long, EModelType>()
   {
      {1, EModelType.StatStr},
      {6, EModelType.HistStr},
      {7, EModelType.HistVal}
   }; 
```

最大的优势是当数据从数据库到达时，我使用它直接获取我的枚举值。

```
typ = AttributeIdTypeToEModelType[i]; 
```

这个系统的用法很简洁，但我觉得为此而拥有一个静态字典并不干净。

我没有机会尝试找到一种更清洁的方式来使用枚举器并覆盖它们的值。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:19:45.127

您不需要将 a`Dictionary`转换`int`为适当的`Enum`类型：

```
var type = (EModelType)yourInt; 
```

或使用[`Enum.ToObject`](http://msdn.microsoft.com/en-us/library/system.enum.toobject.aspx)：

```
var type = Enum.ToObject(typeof(EModelType) , yourInt); 
```

您可以通过以下方式检查它是否存在[`Enum.IsDefined`](http://msdn.microsoft.com/en-us/library/system.enum.isdefined.aspx)：

```
if (! Enum.IsDefined(typeof(EModelType), yourInt)) throw new ArgumentException("Illegal type"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:21:56.203

如果数据库中的值是字符串，则使用：

```
EnumType x = (EnumType)Enum.Parse(typeof(EnumType), dr[0].ToString()); 
```

如果数据库中的值很长，则使用：

```
EnumType x = (EnumType)dr[0]; 
```

如果您需要枚举的长值，请使用：

```
long x = (long)EnumType.SomeEnum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:32:31.570

`int`您应该使用支持类型定义您的枚举，如下所示：

```
public enum EModelType : int
{
    StatStr = 1,
    HistStr = 6,
    HistVal = 7
} 
```

然后，就像 Tim 和 Chris 建议的那样，只需将整数从数据库转换或解析为您的枚举类型。

# tsql - 日期和时间范围的 SQL 帮助

> ID：10334233
> 
> 赞同：0
> 
> 时间：2012-04-26T13:17:10.680
> 
> 标签：tsql, date, time

我在扩展我的以下查询时遇到了一些困难。下面的查询有效，并为我提供了我需要的所有行。

```
select (e.Firstname+' '+ e.lastname) as ApprovedBy
    , wd.TargetDate
    ,wd.ACTDate
    ,wd.UploadDate
    ,wd.ApproveDate 
From Approved wd 
JOIN Employee e 
    on EmployeeID = wd.ApproveDateId 
where wd.ApproveDate Between '4/2/2012 14:30:00.000' and '4/30/2012 23:00:59.000'
order by ApproveDate 
```

现在我必须把它放在一个日期范围内？我需要的是有关如何获取所有大于 '4/2/2012 14:30:00.000' 但介于 2012 年 4 月 2 日和 2012 年 4 月 30 日之间的行的方向？我只想要日期范围内时间大于 14:30:00.000 的行吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:27:24.810

假设您的意思是您想要一个 DATE 范围（即没有时间）然后是包括时间在内的第二个条件，可以按如下方式完成（SQL 2008+）：

```
SELECT  ( e.Firstname + ' ' + e.lastname ) AS ApprovedBy ,
        wd.TargetDate ,
        wd.ACTDate ,
        wd.UploadDate ,
        wd.ApproveDate
FROM    Approved wd
        JOIN Employee e ON EmployeeID = wd.ApproveDateId
WHERE   CONVERT(DATE, wd.ApproveDate) BETWEEN CONVERT(DATE, '4/2/2012', 101)
                                      AND     CONVERT(DATE, '4/30/2012', 101)
        AND wd.ApproveDate > CONVERT(DATETIME, '4/2/2012 14:30:00.000', 101)
ORDER BY ApproveDate 
```

如果您想要时间更长的所有日子（在范围内），请将上面的第二个条件替换为：

```
AND CONVERT(TIME(0), wd.ApproveDate) > CONVERT(TIME(0), '14:30:00') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:26:38.250

格式应该是

```
'YYYY-MM-DD HH:MM:SS' 
```

所以 2012 年 4 月 2 日是

```
'2012-04-02 14:30'. 
```

您可以使用 BETWEEN 来比较这样的日期。

# iphone - 调整模态视图的大小

> ID：10334234
> 
> 赞同：0
> 
> 时间：2012-04-26T13:17:11.150
> 
> 标签：iphone, objective-c, ios, modal-dialog, modalviewcontroller

我不知道如何实现它，但下图显示了我想要出现的模态大小：

![模态视图控制器](../Images/a65a782f88b9d042b24efd5ca4db61be.png)

我用于推送模态视图的代码是：

```
CustomerLogin *customerlogin = [[CustomerLogin alloc] initWithNibName:@"CustomerLogin" bundle:nil];
        [self presentModalViewController:customerlogin animated:YES]; 

        [customerlogin release]; 
```

编辑 - -

做出如下建议的更改，如下所示：

```
UIView *overlay = [[UIView alloc] initWithFrame:self.view.bounds];
        overlay.backgroundColor = [UIColor colorWithWhite:0 alpha:0.5]; // Black color
        [self.navigationController.view addSubview:overlay];

        //Add Login View
        CustomerLogin *loginView = [[CustomerLogin alloc] initWithFrame:CGRectMake(0,0, 200, 300)]; //I guessed a size
        loginView.center = overlay.center; //Center the view
        [overlay addSubview:loginView]; 
```

得到3个错误：

CustomerLogin 上不存在属性中心 CustomerLogin 不会响应 initWithFrame 不兼容的指针类型发送 CustomerLogin* 以键入 UIView*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:28:59.880

您正在尝试呈现模态视图控制器而不是单个视图。

实现这一点的最佳方法是创建一个叠加层（例如黑色，alpha 0.5），然后在它上面显示登录视图。

覆盖层用于防止用户与后台控件交互（如果使用 NavigationViewController，则为后退按钮、按钮、选项卡等...）。

这是一个例子：

```
UIView *overlay = [[UIView alloc] initWithFrame:self.view.bounds];
overlay.backgroundColor = [UIColor colorWithWhite:0 alpha:0.5]; // Black color
[self.view addSubview:overlay];

//Add Login View
CustomLoginView *loginView = [[CustomLoginView alloc] initWithFrame:CGRectMake(0,0, 200, 300)]; //I guessed a size
loginView.center = overlay.center; //Center the view
[overlay addSubview:loginView]; 
```

请记住，如果您有 TabBarController 或 NavigationController，则应将覆盖应用到它，而不是使用`[self.view addSubview:overlay]`use`[self.tabBarController.view addSubview:overlay]`或`[self.navigationController.view addSubview:overlay]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:24:24.770

利用

```
 -(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
        // grab an image of our parent view
    UIView *parentView = self.presentingViewController.view;

        // For iOS 5 you need to use presentingViewController:
        // UIView *parentView = self.presentingViewController.view;

    UIGraphicsBeginImageContext(parentView.bounds.size);
    [parentView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *parentViewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

        // insert an image view with a picture of the parent view at the back of our view's subview stack...
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:self.view.bounds];
    imageView.image = parentViewImage;
    [imageView setHidden:YES];
    [self.view insertSubview:imageView atIndex:0];
}
-(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [[self.view.subviews objectAtIndex:0] setHidden:NO];
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];

        // remove our image view containing a picture of the parent view at the back of our view's subview stack...
    [[self.view.subviews objectAtIndex:0] removeFromSuperview];
} 
```

在您的模态视图控制器中

请记住，您的模态视图需要是全屏的，所以将您想要成为模态视图的内容放在另一个具有透明背景的全屏尺寸视图中

模态视图控制器的视图需要是这个视图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:31:27.403

您可能想查看 TSAlertView。它允许您创建自定义视图，这些视图类似于 UIAlertView 的代码。 [https://github.com/TomSwift/TSAlertView](https://github.com/TomSwift/TSAlertView)

# javascript - MVC：如何确保我的字段在编辑表单的视图中选择了值？

> ID：10334236
> 
> 赞同：1
> 
> 时间：2012-04-26T13:17:15.237
> 
> 标签：javascript, jquery, html, asp.net-mvc, asp.net-mvc-3

我在我的项目中使用 MVC3-Viewmodel。

我有一个创建和编辑表单，我要做的是确保在用户创建表单后，他/她应该能够编辑它，当用户在编辑页面时我希望值是显示在输入和选择中。唯一不起作用的字段是我的 DropDownList。我不知道为什么。

如果我关闭应用程序并转到编辑表单，我希望 DropDownList 具有创建的值。

这是代码：

```
foreach (SelectedQuestionViewModel items in Model.AllSelectedQuestions)
{  

 <select id="selectstyle2" class="Grade">
 @{
  <option>n/a</option>
  int Grade = 1;
    for (int i = 1; i <= 10; i++)
    {
     <option @(items.Grade.HasValue && items.Grade.Value == Grade ? "selected" : "") >@(i)</option>
    }
  }
 </select>
} 
```

任何帮助类型的帮助表示赞赏。

注意：我使用 ajax 发布到我的控制器，在控制器内我用从这个 DDL 中选择的值填充我的“Model.Grade”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:25:45.530

您的 foreach 循环中*有*您的选择标签。在外面写这个标签，像这样：

```
<select>
@foreach(var x in Model)
   //write out options
</select> 
```

也看看 Html.DropDownList 扩展方法。这可以完成您尝试手动执行的操作。

[http://msdn.microsoft.com/en-us/library/system.web.mvc.html.selectextensions.dropdownlist.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.selectextensions.dropdownlist.aspx)

举个例子

```
@{
    var selectListItems = (new[] { 1,2,3}).Select(i=>new SelectListItem { Text = i.ToString(), Value = i.ToString() });
}
@Html.DropDownListFor(m=>m.AllSelectedQuestions[0].Grade, selectListItems, "n/a") 
```

# hash - 具有可变长度字母数字输出的一种方式散列

> ID：10334237
> 
> 赞同：2
> 
> 时间：2012-04-26T13:17:16.390
> 
> 标签：hash, alphanumeric, hash-collision, variable-length

我需要一种方法散列可变长度（10-20 个字符）的字母数字 + 特殊字符（ascii）字符串。输出应为可变长度，但最长为 25 个字符，字母数字且不区分大小写。

另外我不想产生碰撞，所以我需要一些无碰撞或至少没有被证明（还没有？）的东西来产生碰撞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:35:55.520

[这里](http://www.strchr.com/hash_functions)有很多关于不同哈希函数的好东西。我不认为任何人做你所要求的。它们都会发生碰撞。

也许你应该看看一些简单的加密算法。

这是一种简单的加密技术，可以满足您的要求：

```
char szInput = "hash me", szOutput[20], szKey = "foo";
int i, cbKey = strlen(szKey), cbInput = strlen(szInput);

for (i=0 ; i<cbInput ; ++i)
  szOutput[i] = szInput[i]^szKey[i%cbKey];  // xor with a differnt char from the key 
```

您将无法识别输出并且它不会发生碰撞，因为它是可逆的。

另一种更难破译的方法是使用密钥中的当前字符作为调用 rand() 的计数。使用最后一次调用 rand() 的结果进行异或运算。由于 rand() 总是为给定的种子生成相同的数字流，因此您的“哈希”不会发生冲突并且可以被解密。

如果您希望哈希是“一种方式”......然后扔掉钥匙！

# jquery - 如何使用jquery更改元素的css

> ID：10334239
> 
> 赞同：10
> 
> 时间：2012-04-26T13:17:20.183
> 
> 标签：jquery, html, css

我已将 CSS 属性定义为

```
#myEltId span{
  border:1px solid black;
} 
```

单击按钮时，我想删除它的边框。

```
$('#button1').click(function() {
  // How to fetch all those spans and remove their border
}); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-26T13:18:43.490

只需使用：

```
$('#button1').click(
    function(){
        $('#myEltId span').css('border','0 none transparent');
    }); 
```

或者，如果您更喜欢长格式：

```
$('#button1').click(
    function(){
        $('#myEltId span').css({
            'border-width' : '0',
            'border-style' : 'none',
            'border-color' : 'transparent'
        });
    }); 
```

而且，我强烈建议阅读 API `css()`（请参阅下面的参考资料）。

参考：

*   [`css()`](http://api.jquery.com/css/).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T13:28:11.440

如果您将多次使用它，您还可以定义没有边框的 css 类：

```
.no-border {border:none !important;} 
```

然后使用 jQuery 应用它；

```
$('#button1').click(function(){
        $('#myEltId span').addClass('no-border');
}); 
```

# c# - 用于公钥加密的商业 .NET 库

> ID：10334240
> 
> 赞同：0
> 
> 时间：2012-04-26T13:17:21.320
> 
> 标签：c#, .net, cryptography, public-key-encryption

在 SO、代码项目等上有很多公钥加密实现的例子。

我想评估一些商业解决方案，因为我自己不是来自该领域，而是更愿意依赖成熟的产品。

设想：

*   ASP .NET 应用程序加密文件容器。
*   WinForms 应用程序解密容器。
*   ASP .NET 应用程序不应访问 WinForms 的私钥。
*   WinForms 的应用程序不应访问 ASP .NET 应用程序的私钥。

结果：强大的加密、防篡改和身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:10:30.363

确保 SSL 不适用于您的想法。您似乎正在尝试在客户端和服务器之间进行安全通信和身份验证。为此使用 SSL。事实上，这可能是您在服务器端获得的最好的安全性，因为您将在哪里存储加密密钥。[在这里](https://stackoverflow.com/a/10326474/980922)查看我的答案以获得深入的解释。

如果您想保护客户端上的数据（不是来自用户，那将是 DRM），请使用 DPAPI 或其[托管包装器](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.aspx)。这实际上比您可以购买的任何东西都更安全，因为它解决了颁发的密钥存储问题。如果您在客户端上加密了数据并且需要离线访问，您最终要么将密钥存储在系统上，要么让用户插入某些东西，或者让他们输入单独的密码。第一个是不安全的，第二个是痛苦的。DPAPI 在从用户登录密码派生的密钥下加密（或智能卡或 Windows 的生物识别正在使用它们）

## 关于加密库的主题

.net 随附带有公钥加密的托管代码加密包和本地代码的包装器。它的[System.security.cryptography 包](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aspx)及其免费且已安装在任何具有 .net 的 Windows 系统上。

最低限度，您可以使用它来处理公共私钥部分而无需任何实际努力（例如从 zipblackbox 加密密钥）。

一些免费/开源库也支持从密码创建加密容器。我想到了 Truecrypt、tarsnap 和 7zip（尽管这些可能需要管理员权限才能安装）。还有 dotNetZip 进行加密，我认为不需要管理员权限即可安装，并且在非复制左许可证下是免费和开源的。

你也可以很容易地制作你想要的加密容器，尽管我知道你为什么会犹豫不决。只需使用Microsoft CLR 安全人员编写的此类，将文件写入该流，添加 IV 和标记，然后使用公钥加密对其提供的密钥进行加密[。](http://clrsecurity.codeplex.com/wikipage?title=Security.Cryptography.AuthenticatedAesCng)在另一端，解密密钥，读取 iv，解密数据，验证标签匹配，然后你的好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:37:07.163

公钥密码学很容易被滥用，而且这种情况经常发生。例如，人们忘记的一件事是公钥加密非常慢，并且要加密任何有意义的数据量（对于 1024 位 RSA 密钥超过约 100 个字节），需要使用对称算法并生成会话密钥。这就是出现安全漏洞的地方。

为了解决这个问题，存在几种使用公钥/私钥和证书加密/解密数据的标准。它们是 PKCS#1 和 PKCS#7（后来的 CMS）和 OpenPGP 等等。

我们的[SecureBlackbox](http://www.eldos.com/sbb/)组件库是一个全面的安全解决方案，可为许多安全方案和标准提供实施，并提供广泛的示例和支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:20:15.953

然后，您应该查看的唯一库是下一代加密 (CNG) API。这些是 Windows 上的本机，已经过彻底测试并实现了当今存在的几乎所有重要的、经过测试的算法。

这个库还有一个用于 Windows 的加密安全随机数生成器。

您可能还想查看 Windows 的 DPAPI 和 Windows 证书存储。请记住，尝试在客户端实施任何安全措施以阻止客户端调查您的应用程序是徒劳的。如果客户拥有盒子，他们就拥有您的应用程序以及您希望实施的任何安全措施。

标准的 RSA 算法非常适合您正在做的事情，但是您可能需要调查使用证书来注册公钥/私钥，因为这将使您的应用程序更具适应性和更易于管理。

# java - 从 java 程序调用 SVN 命令

> ID：10334246
> 
> 赞同：8
> 
> 时间：2012-04-26T13:17:41.430
> 
> 标签：java, svn, tortoisesvn, command

我想从 java 程序中调用 SVN 命令（更新、提交）。有什么帮助吗？

SVN : Tortoise SVN 环境 : java 程序将在 jBoss 服务器内运行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T13:23:21.783

在应用服务器中使用 GUI SVN 客户端是一个非常非常糟糕的主意。虽然 TortoiseSVN[可以编写脚本](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-automation.html)，但它仍然是一个 GUI 应用程序，意外情况可能会导致它在您的服务器上弹出一个对话框（并且某些任务可能总是打开一个对话框）。

使用 SVN 的 Java 实现（例如[SvnKit](http://svnkit.com/) ）要好得多- 然后你可以使用一个很好的 Java API，你的问题就变得没有意义了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T13:21:54.907

当然，有几个图书馆可以完成这项工作。就个人而言，我要么使用[SVNKit](http://svnkit.com/)，要么使用[Maven SCM](http://maven.apache.org/scm/)抽象（后者功能较弱但更便携）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T13:21:26.620

使用[SVNKit](http://svnkit.com/)可能是最简单的，它是 Java 中 SVN 的本机实现，如果您需要在它们之间共享工作副本，您可以获得与您的命令行客户端版本匹配的版本。

它属于 copy-left-ish 许可证，但只要您在自己的服务器上运行代码并且不分发它应该没问题（但 IANAL 等）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T13:21:28.247

您可以考虑使用[SVNKit](http://svnkit.com/)，这是一个用于与 SVN 工作区交互的 java 库。IntelliJ 和 Eclipse 插件使用它来提供 SVN 支持。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-26T13:21:57.763

一个快速的谷歌搜索带来了[http://svnkit.com/](http://svnkit.com/)

# php - 表单提交出错

> ID：10334247
> 
> 赞同：0
> 
> 时间：2012-04-26T13:17:43.537
> 
> 标签：php, html, forms, submit

我正在尝试将 html 表单提交到发送邮件的 php 文件。我在使用 ajax 之前尝试过，它表现得很奇怪，当我改为纯 html 和 php 时，它也表现得很奇怪。所以我有这个表格：

```
<form id="comandaform" action="send.php" method="post">
        <div class="ordercol">
            <label for="nume">Nume companie</label>
            <input type="text" id="nume" name="nume" />
            <label for="email">Email</label>
            <input type="text" id="email" name="email" />
            <label for="tel">Telefon (te sunam noi!)</label>
            <input type="text" id="tel" name="tel" />
        </div>
        <div class="ordercol">
            <label for="detalii">Detalii despre domeniul tau de activitate</label>
            <textarea name="detalii" id="detalii"></textarea>
            <input type="submit" id="submit" value="trimite"/>
        </div>
</form> 
```

处理此问题的 PHP 脚本是：

```
<?php

$nume = $_POST["nume"];
$mail = $_POST["email"];
$tel = $_POST["tel"];
$det = $_POST["detalii"];
$mess = "";

if(isset($nume)&&isset($mail)&&isset($tel)&&isset($det))
{
$to      = 'mail@gmail.com';
$subject = 'Comanda Site100';
$message = 'Nume companie:  '.$nume.'\n'.
    'Telefon: '. $tel.'\n'.
    'E-mail: '. $mail.'\n'.

'Detalii:\n'.
$det;

if(mail($to, $subject, $message))
{
    echo "succes";
}else{
    echo "fail";
}
}else{
    echo "fail";
}
?> 
```

当我尝试提交时，浏览器将找不到该`send.php`文件。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:26:49.233

你真的得到一个找不到文件的错误吗？

在 send.php 的顶部添加一行 write

就像是：

echo '处理表格...';

这样您就可以看到页面正在正确加载。

然后尝试手动加载它

例如。

如果您的表格位于

[http://www.mydomain.com/form.html](http://www.mydomain.com/form.html)

然后尝试通过键入加载 send.php

[http://www.mydomain.com/send.php](http://www.mydomain.com/send.php)

确保它加载正常。

您还可以将所有 $_POST 更改为 $_REQUEST 然后您可以使用查询字符串对其进行测试

例如。

[http://www.mydomain.com/send.php?nume=bob](http://www.mydomain.com/send.php?nume=bob)

这应该使您朝着找到问题的正确方向前进……如果不回发，请告诉我们上述情况发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:29:04.280

我立即注意到关于您的代码的两件事。

首先，如果您的浏览器没有找到`send.php`，这强烈表明您有路径错误。您要么在 HTML 操作路径中缺少子文件夹，要么文件位于与您预期不同的位置。

其次，即使您确实找到了表单，它也可能会出现错误。如果这些字段中的任何一个为空白，则`unidentified index call`在尝试将 $_POST 键分配给局部变量时会出现错误。接下来，当您检查变量是否已设置时，它们当然是，毕竟您只是设置了它们。但是，如果表单的任何字段留空，它们将具有未定义的值。

```
//Use an inline check when assigning the form field values
$nume = isset($_POST["nume"]) ? $_POST["nume"] : ''; 
```

然后，在检查完整性时...

```
//Check for empty values
if (!empty($nume) && !empty($mail) && !empty($tel) && !empty($det)){
// Etc... 
```

# c - 如何为 pthread 堆栈正确分配内存

> ID：10334248
> 
> 赞同：3
> 
> 时间：2012-04-26T13:17:51.040
> 
> 标签：c, pthreads, mmap

我正在尝试监视我的线程的堆栈使用情况。为此，我需要知道线程堆栈的地址，而我发现这样做的唯一方法是使用`pthread_attr_setstack()`.

我目前正在使用 mmap 来分配内存：

```
 pthread_attr_t ptAttr;
   pthread_t pth;
   pthread_attr_init(&ptAttr);
   void *stack = mmap(NULL, stksize, PROT_WRITE|PROT_READ, MAP_ANONYMOUS|MAP_SHARED, -1, 0);
   pthread_attr_setstack(&ptAttr, stack, stksize);
   pthread_create(&pth,&ptAttr,threadFunc,&info); 
```

所以第一个问题，这是分配内存的好方法`mmap`吗？标志是否正确？我应该`malloc`改用吗？这将在没有虚拟/交换内存的低资源设备上运行。

第二个问题，这个内存会在线程死掉的时候自动释放吗？如果您不确定，有没有办法查明它是否已发布？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T14:44:11.780

“监控”是什么意思？如果您只想确保不会为堆栈浪费太多空间（这会阻止您在 32 位系统或具有低 ram+swap 的系统上拥有大量线程），您应该简单地使用`pthread_attr_setstacksize`函数而不是`pthread_attr_setstack`. 这样，您无需自己负责分配堆栈。`pthread_attr_setguardsize`如果您担心线程一次会在堆栈上分配多个页面，您还可以选择使用以确保更大的保护页面区域作为保护，但请注意这会消耗您的虚拟地址空间。

如果您真的想*测量*堆栈使用情况，`pthread_attr_setstack`可能是正确的工具，但它一点也不简单。我会用 分配内存`mmap`，并将其设为只读。然后将`SIGSEGV`处理程序安装到`mprotect`可写的错误页面，增加一个计数器，然后返回。这将为您提供线程接触的实际页面数的计数。而且由于信号处理程序将在故障线程中运行（这是保证的，因为它是一个同步信号），您可以将计数保存在线程本地存储变量中以在多个线程上执行计数。

但是，您实际上可能需要在调用之前使最后一页或两页可写`pthread_create`，因为第一次写入尝试可能会发生在父线程中，并且如果您尝试存储信号处理程序，您可能不希望信号处理程序在那里运行导致线程本地存储。

最后访问您的具体问题：

1.  你不想`MAP_SHARED`。该标志用于将在进程之间共享的内存。在你的情况下它可能不会受到伤害，但它会产生误导。使用`MAP_PRIVATE`.

2.  内存不会被释放，而且形式上*永远不会*被释放。POSIX 非常明确地指出，重用或释放给线程的堆栈是未定义的行为，因为您无法可靠地确定生存期（即使在`pthread_join`返回之后，从概念上讲，线程仍有可能执行其最后几条退出指令，因此仍然触摸堆栈，并且它可能会无限期地保持停滞）。我相信这在 glibc/NPTL 上是*不可能的*，因为他们在线程退出时使用内核生成的 futex 唤醒事件来发出信号`pthread_join`以原子方式与线程退出，但 NPTL 可能会缓存和重用您捐赠给这样的线程的堆栈（因为无论如何您都不允许重用/释放它们）。为了确保您必须检查来源。因此，我建议**不要**`pthread_attr_setstack`在生产代码中使用。使用`pthread_attr_setstacksize`. `pthread_attr_setstack`应该只用于开发时的黑客攻击，比如你现在可能正在做的事情。

# entity-framework-4.1 - EF Code First：识别动态代理的最佳方法

> ID：10334253
> 
> 赞同：2
> 
> 时间：2012-04-26T13:18:03.410
> 
> 标签：entity-framework-4.1, ef-code-first

了解我的代码优先实体是否来自直接代码（新 DataObject（））的最佳方法是什么

或从上下文 (Context.DataObjects.First())

因为我没有阻止我的上下文使用动态代理，所以我可以这样做：

```
 protected DataObject()
    {
        if (this.GetType().Namespace != "System.Data.Entity.DynamicProxies")
        {
            this.Id = IdGenerator.NextId<DataObject>();
        }
    } 
```

但这看起来是一个糟糕的解决方案，因为 GetType() 很昂贵。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:23:49.950

如果要检查必须调用的实体的类型`GetType`。顺便提一句。[直接在MSDN](http://msdn.microsoft.com/en-us/library/ee835846.aspx)上有推荐的解决方案。要从 DbContext 获取 ObjectContext 实例，您可以使用：

```
ObjectContext objectContext = ((IObjectContextAdapter)dbContext).ObjectContext; 
```

# android - 从文件加载顶点

> ID：10334254
> 
> 赞同：0
> 
> 时间：2012-04-26T13:18:04.230
> 
> 标签：android, file-io, opengl-es

我想从某种文件中加载顶点并绘制对象。例如，我怎样才能为一个简单的矩形做到这一点？我想先从简单的事情开始。有没有我可以参考的教程？

# cakephp - cakePHP 存储分页参数并在下次访问时调用

> ID：10334256
> 
> 赞同：0
> 
> 时间：2012-04-26T13:18:19.883
> 
> 标签：cakephp, pagination

我正在尝试存储寻呼请求的状态。我希望用户在离开带有 cakephp 分页组件的页面时（例如编辑），返回时返回到使用分页组件访问的最后一个页面。

因此，如果用户访问[http://www.site.com/users/view/page:3](http://www.site.com/users/view/page:3)并离开该页面，则必须返回到同一页面。我尝试了一个我上网的分页召回组件，但没有设法让它工作。我正在使用 cakePHP 2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:04:15.027

要修改分页器用作参数的内容，您需要`CakeRequest`在调用之前修改控制器上的对象`$this->Paginator->paginate()`。

例如，如果用户浏览到`/users/index/page:3`并且您想将其发送到第 4 页，请修改控制器中的请求，如下所示：

```
$this->request->params['named']['page'] = 4; 
```

# javascript - 如何在 jqGrid 中只显示水平网格线？

> ID：10334265
> 
> 赞同：2
> 
> 时间：2012-04-26T13:18:56.577
> 
> 标签：javascript, jquery, css, jquery-ui, jqgrid

我的页面上有一个 jqGrid，但其中的所有网格线看起来有点太忙了。有什么简单的方法只显示水平线吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:26:17.673

添加CSS：

```
.ui-jqgrid tr.ui-row-ltr td {
    border-right-style: none;
    border-left-style: none;
} 
```

# javascript - Javascript获取对象键名

> ID：10334267
> 
> 赞同：84
> 
> 时间：2012-04-26T13:19:10.337
> 
> 标签：javascript

我将如何获得关注的关键名称？例如，我想要“button1”和“button2”？

```
var buttons = {
    button1: {
        text: 'Close',
        onclick: function(){

        }
    },
    button2: {
        text: 'Close2',
        onclick: function(){

        }
    }
}

var i;
for(i in buttons){
    if(buttons.hasOwnProperty(i)){
        alert(buttons[i].text);
    }
} 
```

我尝试使用，`.push()`虽然这不起作用。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-04-26T13:24:02.877

如果您稍微修改一下措辞，这可能会更好地理解：

```
var buttons = {
  foo: 'bar',
  fiz: 'buz'
};

for ( var property in buttons ) {
  console.log( property ); // Outputs: foo, fiz or fiz, foo
} 
```

请注意，您正在迭代对象的属性，`property`在每个后续循环中用作对每个属性的引用。

[MSDN](http://msdn.microsoft.com/en-us/library/55wb2d34%28v=vs.94%29.aspx)谈到`for ( variable in [object | array ] )`以下内容：

> 在循环的每次迭代之前，变量被分配对象的下一个属性名称或数组的下一个元素索引。然后，您可以在循环内的任何语句中使用它来引用对象的属性或数组的元素。

另请注意，对象的属性顺序不是恒定的，并且可以更改，这与数组的索引顺序不同。那可能会派上用场。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-04-26T13:26:06.860

ECMAscript 第 5 版还为您提供了简洁的方法`Object.keys()`和`Object.getOwnPropertyNames()`.

所以

```
Object.keys( buttons );  // ['button1', 'button2']; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-26T13:21:09.993

更改`alert(buttons[i].text);`为`alert(i);`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-26T13:22:35.407

变量`i`是您看起来的键名。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-08-19T05:14:06.923

ES6 更新……尽管过滤器和映射都可能需要自定义。

`Object.entries(theObj)`返回一个对象的 [[key, value],] 数组表示，可以使用 Javascript 的数组方法 .each()、.any()、.forEach()、.filter()、.map()、 .reduce() 等

节省大量迭代对象部分`Object.keys(theObj)`或`Object.values()`单独的工作。

```
const buttons = {
    button1: {
        text: 'Close',
        onclick: function(){

        }
    },
    button2: {
        text: 'OK',
        onclick: function(){

        }
    },
    button3: {
        text: 'Cancel',
        onclick: function(){

        }
    }
}

list = Object.entries(buttons)
    .filter(([key, value]) => `${key}`[value] !== 'undefined' ) //has options
    .map(([key, value], idx) => `{${idx} {${key}: ${value}}}`)

console.log(list)
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-02-08T08:14:20.570

这是一个简单的示例，它将帮助您获取对象键名。

`var obj ={parts:{costPart:1000, salesPart: 2000}}; console.log(Object.keys(obj));`

输出将是**parts**。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-07-10T17:54:47.420

假设您可以访问 Prototype，这可能会起作用。几分钟前，我为自己编写了这段代码；我一次只需要一个键，因此对于键：值对的大列表或吐出多个键名来说，这不是时间效率。

```
function key(int) {
    var j = -1;
    for(var i in this) {
        j++;
        if(j==int) {
            return i;
        } else {
            continue;
        }
    }
}
Object.prototype.key = key; 
```

这被编号以与数组相同的方式工作，以节省头痛。对于您的代码：

```
buttons.key(0) // Should result in "button1" 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-09-23T10:25:02.813

要检索键和值，请使用以下内容。

```
 for (let property in buttons) {
    console.log('key:' + property, 'value:'+ buttons[property]);
 } 
```

# jquery - touch.js 在 iphone 上模拟 jQuery 拖动

> ID：10334269
> 
> 赞同：0
> 
> 时间：2012-04-26T13:19:14.097
> 
> 标签：jquery, jquery-ui, touch

我正在使用这样的代码使其响应 jQuery UI 滑块和拖放内容，这些内容位于 ipad/iphone 上的 html 网页中（并且运行良好）。

```
function touchHandler(event)
{
    var touches = event.changedTouches,
        first = touches[0],
        type = "";

    switch(event.type)
    {
        case "touchstart": type = "mousedown"; break;
        case "touchmove":  type="mousemove"; break;        
        case "touchend":   type="mouseup"; break;
        default: return;
    }
    var simulatedEvent = document.createEvent("MouseEvent");
    simulatedEvent.initMouseEvent(type, true, true, window, 1,
                              first.screenX, first.screenY,
                              first.clientX, first.clientY, false,
                              false, false, false, 0/*left*/, null);

    first.target.dispatchEvent(simulatedEvent);

    event.preventDefault();
}

function initTouch()
{
   document.addEventListener("touchstart", touchHandler, true);
   document.addEventListener("touchmove", touchHandler, true);
   document.addEventListener("touchend", touchHandler, true);
   document.addEventListener("touchcancel", touchHandler, true);    
}
$(document).ready(function (){initTouch();}); 
```

拖动和滑动效果很好。问题是当我想在 html 按钮（如“输入”或“a”）上进行简单的单击（点击）时不起作用。

我认为这类似于“它像第一次触摸一样理解这个点击”。我该怎么做，当我在同一个地方简单地点击（不移动或拖动）时，让它也能工作。或者，如果我触摸 HTML 的特定元素。

非常感谢，莱昂内尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T04:41:46.210

我也面临同样的问题。但是可以通过在 event.preventDefault() 之前更改 touch.js 文件来解决这个问题： "if($(this).attr('href')=='')";

# php - 将每个语句拆分为按字母顺序排列的两个 div

> ID：10334270
> 
> 赞同：0
> 
> 时间：2012-04-26T13:19:16.233
> 
> 标签：php, zend-framework

我有这段代码可以按字母顺序回显数据库中的字段，并带有它们开头的字母的标题。数据库中的信息不够宽，无法容纳 100% 的页面宽度，因此我想将信息拆分为两个单独的 div 并将它们并排浮动。CSS 很简单，但我不确定如何拆分他们。数据库中有 50 个项目，所以我希望第一个 foreach 语句在 25 处停止，然后从它在第二个 div 中停止的位置继续。

这是我的代码：

```
<?php
    $previousLetter = false;
?>
<?php foreach($this->clubs as $clubs) : ?>
    <?php
    $firstLetter = substr($clubs->club_name, 0, 1);
    if ($firstLetter != $previousLetter) {
    ?>
        <h3 id="club-link-header"><u><?php echo $firstLetter; ?></u></h3>
    <?php } ?>
        <a id="club-link" href="<?php echo $this->url(array('controller' => 'club-description', 'action' => 'index', 'club_id' => $clubs->id));?>"><br />
        <?php echo $this->escape($clubs->club_name);?></a>
    <?php $previousLetter = $firstLetter; ?>
<?php endforeach; ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:37:48.610

你可以试试下面的代码。我希望你能理解。

```
<?php
    $previousLetter = false;
?>
<?php 
$i=1; // have a counter variable
foreach($this->clubs as $clubs) : ?>
    <?php
    $firstLetter = substr($clubs->club_name, 0, 1);
    if ($firstLetter != $previousLetter) {
    if($i==1){
        echo "<div class="left_class">"; // open left div
    }
    ?>
        <h3 id="club-link-header"><u><?php echo $firstLetter; ?></u></h3>
    <?php } ?>
        <a id="club-link" href="<?php echo $this->url(array('controller' => 'club-description', 'action' => 'index', 'club_id' => $clubs->id));?>"><br />
        <?php echo $this->escape($clubs->club_name);?></a>
    <?php $previousLetter = $firstLetter; ?>
<?php 
    if($i==25){
        echo "</div>"; //close left div
        echo "<div class="right_class">"; // open right div
    }

    if($i==50){
        echo "</div>"; //close right div
    }

$i++; // increment the counter variable for each loop
endforeach; 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:42:55.913

在这将清除浮动之后，您需要放入另一个 div。

```
<div style="clear:both;"></div> 
```

# coding-style - Erlang 编码标准和良好实践

> ID：10334271
> 
> 赞同：6
> 
> 时间：2012-04-26T13:19:19.370
> 
> 标签：coding-style, erlang

我的团队正在我的新工作中学习一些 Erlang。现在我们已经编写了一些代码，但是代码开始变得有点混乱并且不一致。

我想知道是否有 Erlang 社区遵循的编码标准，可以用作基线。诸如如何缩进，变量和函数的命名，如何构建模块等。

另外，是否有任何工具可以检查这些参数？我正在考虑 Python 世界中的 PEP8 或 PyFlakes。我使用 vim，它会检测语法错误，这很好，但我想更进一步，尝试保持良好、一致的风格，我们可以共享并使代码更具可读性。

更新：关于 Kemal 的评论，我必须说这非常有趣（我们会充分利用它），但并未完全涵盖该主题。我的问题是*说服*团队使用一致的代码风格，尽可能保持一致。说服所有人的一个好方法是使用 Erlang 社区推荐的编码风格。也许它不存在，但我想尝试一些简单的事情，比如选择 CameCase 而不是 Underscored_words 可以极大地帮助使代码具有一致的外观并提高可读性。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T13:20:50.727

嗯，有这个[http://www.erlang.se/doc/programming_rules.shtml](http://www.erlang.se/doc/programming_rules.shtml)。它相当全面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T17:32:40.163

我不知道一个。哪个对您来说更具可读性？这：

```
init([]) ->
   AChild = {'AName',{'AModule',start_link,[]},
         permanent,2000,worker,['AModule']},
   {ok,{{one_for_all,0,1}, [AChild]}}. 
```

或这个：

```
init([]) ->
   AChild = {
      'AName',
      {'AModule', start_link, []},
      permanent,
      2000,
      worker,
      ['AModule']
   },
   {
      ok, 
      {
         {one_for_all,0,1}, 
         [AChild]
      }
   }. 
```

或这个：

```
init([]) ->
   AChild = { 'AName'
            , {'AModule', start_link, []}
            , permanent
            , 2000
            , worker
            , ['AModule'] }
   { ok, 
      { {one_for_all,0,1}
      , [AChild] } }. 
```

我喜欢最后一个，但一致性是最重要的。所以我建议定义一个适合你的标准。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-07T09:52:00.627

有一个名为[Elvis](https://github.com/inaka/elvis)的工具可用于强制编码风格，但默认规则是来自[Inaka](https://github.com/inaka/erlang_guidelines)（创建者）的规则，而不是整个 Erlang 社区的默认规则。

# android - Android：将逗号分隔的字符串与字符串的arraylist进行比较

> ID：10334272
> 
> 赞同：0
> 
> 时间：2012-04-26T13:19:21.383
> 
> 标签：android, equals, indexof

我以逗号分隔字符串的形式从数据库中获取位置名称。我将此字符串与包含我输入的位置名称的字符串的 ArrayList 进行比较，以检查输入的位置名称是否与数据库中的位置名称相同。为此，我使用以下代码。但这似乎不起作用。请让我怎么做。我也使用了 equals()，但它不能正常工作。

```
String loc =DataHelperdh.getLocationList(id); // loc holds the comma separated locations

for (int i2 = 0; i2 < locationList.size(); i2++)
{                               
  if(locationList.get(i2)==null || locationList.get(i2).equals(""))continue;
      String str1 =loc.toString();
      int result = str1.indexOf(locationList.get(i2));
      if(result > -1){  
          Toast.makeText(getApplicationContext(), "Locations with same name cannot exist same", Toast.LENGTH_LONG).show();
          break;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:29:13.747

您检查是否`str1`包含整个列表，这不太可能。如果你把它转过来，它应该可以工作。

```
String loc = DataHelperdh.getLocationList(id); // loc holds the comma separated locations

for (int i2 = 0; i2 < locationList.size(); i2++) {
  String test = locationList.get(i2);                        
  if(test == null || test.isEmpty()) continue;
  int result = loc.indexOf(test);
  if(result > -1) {  
    Toast.makeText(getApplicationContext(), "Locations with same name cannot exist same", Toast.LENGTH_LONG).show();
    break;
  }
} 
```

# asp.net - web.config 中的拒绝是什么以及它是如何工作的？

> ID：10334274
> 
> 赞同：-4
> 
> 时间：2012-04-26T13:19:29.460
> 
> 标签：asp.net, web-config

我对否认`users="?"`和否认感到困惑`users="*"`。所以请告诉我有什么区别？请。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T13:21:16.077

> 问号 (?) 拒绝匿名用户，星号 (*) 表示所有用户帐户都被拒绝访问。

来源：[拒绝授权的元素](http://msdn.microsoft.com/en-us/library/8aeskccd.aspx)

# facebook-graph-api - Canvas 应用程序中的 Facebook Auth：单击链接时 Internet Explorer 重定向到索引

> ID：10334280
> 
> 赞同：0
> 
> 时间：2012-04-26T13:20:02.183
> 
> 标签：facebook-graph-api, iframe, facebook-oauth, facebook-canvas

我的 Facebook 应用程序在 Firefox 中运行良好，但在 IE 中单击链接时表现奇怪：它一直重定向，当单击 iFrame 中的链接时，它最终重定向回 index.php，而不保留链接的 GET-Vars。它似乎总是重定向到 authentification-URL。

这是我的画布页面的核心部分：index.php：

```
 <?

require 'facebook-php-sdk-6c82b3f/src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'XXX',
  'secret' => 'YYY',
));

function get_facebook_cookie($app_id, $application_secret) {
  $args = array();
  parse_str(trim($_COOKIE['fbs_' . $app_id], '"'), $args);
  ksort($args);
  $payload = '';
  foreach ($args as $key => $value) {
    if ($key != 'sig') {
      $payload .= $key . '=' . $value;
    }
  }
  if (md5($payload . $application_secret) != $args['sig']) {
    return null;
  }
  return $args;
}

$cookie = get_facebook_cookie('XXX',  'YYY');

// Get User ID
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

?>

<body onload="self.focus();document.tips.tip0A.focus()" scroll="no" style="overflow:hidden">
<div id="fb-root"></div>
<script type="text/javascript">
    window.fbAsyncInit = function () {
        FB.init({ appId: 'XXX', status: true, cookie: true, xfbml: true });
        FB.Canvas.setSize({ height: 890 });
    };
    (function () {
        var e = document.createElement('script');
        e.type = 'text/javascript';
        e.src = document.location.protocol +
            '//connect.facebook.net/en_US/all.js';
        e.async = true;
        document.getElementById('fb-root').appendChild(e);
    } ());
</script>

<?
if (!$user_profile[id]) {?>
<script>
  var oauth_url = 'https://www.facebook.com/dialog/oauth/';
  oauth_url += '?client_id=429812627032252';
  oauth_url += '&redirect_uri=' + encodeURIComponent('https://apps.facebook.com/euro_challenge/');
  oauth_url += '&scope=email,user_birthday'

  window.top.location = oauth_url;
</script>
<?}?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:28:52.500

```
<?
    header("p3p: CP=\"ALL DSP COR PSAa PSDa OUR NOR ONL UNI COM NAV\"");
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:34:57.860

Facebook 建议使用虚假的 P3P 标头只是为了让 IE 满意。小心发出“真实”的 P3P 标头，因为这意味着您有特定的隐私政策。它不仅仅是随机字符。

在此页面上[http://developers.facebook.com/docs/samples/canvas/](http://developers.facebook.com/docs/samples/canvas/)的开发者文档 Facebook 推荐：

```
P3P: CP="HONK" 
```

# c# - asp.net gridview 更改 DropDownList 已启用

> ID：10334282
> 
> 赞同：0
> 
> 时间：2012-04-26T13:20:06.997
> 
> 标签：c#, asp.net, gridview

我试图更改 gridview 行中的 dropdownlist.enabled 。

我写了这个代码块。

```
 if (isEdit && index == e.Row.RowIndex)
            {
                foreach (GridViewRow item in GridView1.Rows)
                {
                    if (item.RowIndex == index)
                    {
                        DataRowView rowView2 = (DataRowView)item.DataItem;
                        DDL = (DropDownList)item.FindControl("ddlLocation");
                        DDL.Enabled = true;
                        isEdit = false;
                    }
                }

             } 
```

并从 GridView1_RowEditing 获取 isEdit

喜欢 ：

```
 isEdit = true; 
```

并从行命令中获取索引，例如：

```
 if (e.CommandName == "Edit")
        {
            index = Convert.ToInt32(e.CommandArgument);
        } 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:46:22.577

您应该能够将代码简化为：

```
if (isEdit)
{
    DropDownList DDL = (DropDownList)GridView1.Rows[index].FindControl("ddlLocation");
    DDL.Enabled = true;
    isEdit = false;
 } 
```

# javascript - onclick 处理程序不执行分配的功能

> ID：10334293
> 
> 赞同：0
> 
> 时间：2012-04-26T13:20:42.943
> 
> 标签：javascript

我有这个代码：

```
<script type="text/javascript">

window.onload = function () {
    document.getElementById('image011').onclick = hideTopMenu();
​}

</script> 
```

就我而言，我不能使用 JQuery，我只需要使用纯 JavaScript。
谁能告诉我问题出在哪里？
页面加载后，如果我点击 image011，顶部菜单将被隐藏。问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T13:22:03.067

您需要将*函数引用*分配为事件处理程序。

您正在做的是，分配函数调用的结果`hideTopMenu()`

因此，您的行需要如下所示：

```
document.getElementById('image011').onclick = hideTopMenu; 
```

# r - Matlab 在 R 中的 sparse(i,j,s,m,n) 等价

> ID：10334296
> 
> 赞同：4
> 
> 时间：2012-04-26T13:20:46.560
> 
> 标签：r, matlab, matrix, sparse-matrix

我正在与 R 合作。

我有一个矩阵结构，但存储在三个列表 IND1、IND2 和 VAL 中，每个列表的长度都相同；我需要将 VAL 中的值存储在矩阵 MAT 中，这样：

```
for each i in 1 to N:
    MAT[IND1(i), IND2(i)] == VAL(i) 
```

正如您所猜测的那样，MAT 的最终大小不一定是 NxN，但我确实知道大小必须是多少（如果您需要知道大小，可以将其称为 m，因为对我来说它必须是方阵）。

Matlab 有一个很好的函数来创建一个[稀疏](http://www.mathworks.com/help/techdoc/ref/sparse.html)矩阵，它完全可以做到这一点，但我需要用 R 语言来完成这个，希望没有循环，有谁知道这是否可以做到，请告诉我怎么做。提前致谢。

PS：我已经尝试了明显的：

```
MAT <- matrix(nrow=m, ncol=m)
MAT[IND1, IND2] <- VAL 
```

但我得到了一个奇怪的结果（所有行都有相同的重复值）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T13:57:27.540

DWin 是正确的 - Matrix 包是要走的路。但是，如果您有大量数据，我发现值替换的替换类型可能会挂起或花费很长时间。更好的方法可能是创建一个类 sparseMatrix 对象，然后在需要时转换为类矩阵。前任。

```
set.seed(1)
n=50
x <- sample(seq(100), n)
y <- sample(seq(100), n)
z <- runif(n)
cbind(x,y,z)

library(Matrix)
s.mat <- sparseMatrix(i=x, j=y, x=z)
dim(s.mat)
image(s.mat)

#convert to a class matrix if needed
mat <- as.matrix(s.mat)
mat[which(mat==0)] <- NaN 
```

![在此处输入图像描述](../Images/003a44e1abd6622432d66cfff7ecd2a4.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T13:32:02.017

Matrix 包提供了各种稀疏矩阵类。创建稀疏矩阵对象后，您将以上述方式精确加载值：

```
library(Matrix)
?Matrix 
```

...将让你开始。顺便说一句，以您说明的方式加载密集矩阵的代码将是：

```
M <- matrix(NA, nrow=max(c(IND1,IND2)), ncol=max(c(IND1,IND2)) ) # could use higher numbers
M[ cbind(IND1, IND2) ] <- VAL 
```

# copy - 使用 Javascript 将文本从一个文件复制到另一个文件

> ID：10334299
> 
> 赞同：1
> 
> 时间：2012-04-26T13:20:55.297
> 
> 标签：copy, jscript, fso

我写了一个脚本（.js），它应该将所有文本从一个文件复制到另一个文件，但它不起作用（我在硬盘上运行它）：

```
var fso = new ActiveXObject("Scripting.FileSystemObject");
var myInputTextStream = fso.OpenTextFile("C:\\FILE\\back_log.log", 1, true);
var log = "C:\\Temp\\26_04_2012_16_22_49\\ext.txt";     
    var myOutputTextStream = fso.OpenTextFile(log, 8, true);
    while(myInputTextStream.AtEndOfStream)
        {
      myOutputTextStream.Write(myInputTextStream.ReadAll());
    }
      //myInputTextStream.Close();
      //myOutputTextStream.Close(); 
    WScript.Echo("FINISH!!!"); 
```

有人可以纠正我（或代码=））吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:30:52.423

`myInputTextStream.AtEndOfStream`是`false`直到读数达到`EOF`. 因此，您的`while`-loop 永远不会执行。

如果使用`ReadAll()`，则根本不需要`while`-loop。

你也不应该注释掉你的`Close()`-methods，你可能会遇到麻烦，尤其是在使用 SDI 卡等便携式存储设备时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:32:07.930

您可以像这样复制文件：

```
var fso, f;
fso = new ActiveXObject("Scripting.FileSystemObject");
f = fso.CreateTextFile("c:\\testfile.txt", true);
f.WriteLine("This is a test.");
f.Close();
f = fso.GetFile("c:\\testfile.txt");
f.Copy("c:\\windows\\desktop\\test2.txt"); 
```

（这会创建一个文件然后复制它，所以只需使用最后两行中包含的有用部分。）

摘自这里：http: [//msdn.microsoft.com/en-us/library/6973t06a%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/6973t06a%28v=VS.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T11:37:57.887

由于 javascript 无法访问本地“C”驱动器，因此不确定您将在哪里使用它。既然您将在您的机器上本地运行它，为什么不直接使用 dos 命令、vbscript 或 wscript？javascript 太过分了。

# asp.net - 在 WCF 服务中返回值后如何继续处理

> ID：10334301
> 
> 赞同：4
> 
> 时间：2012-04-26T13:21:02.767
> 
> 标签：asp.net, multithreading, wcf, parallel.foreach, cancellationtokensource

我有一个 WCF 服务，它依次调用其他几个 Web 服务。这些服务按优先顺序排序，但并行调用。每个服务都会以 true 或 false 进行响应，当所有响应都收到后，最喜欢的肯定会返回给客户端。

但是，在此期间的任何时候，最喜欢的服务都可能会做出积极的回应。此时继续查询其他服务没有意义，所以我希望取消执行并将结果返回给客户端。

我能做的就这么多：

```
// Use parallelOptions to store the cancellation token
ParallelOptions po = new ParallelOptions();
po.CancellationToken = cts.Token;
Parallel.ForEach<IntegrationObj>(externalServices, po, x =>
{
    try
    {
        // Send requests
        SendExternalRequest(x);
        po.CancellationToken.ThrowIfCancellationRequested();
    }
    catch (OperationCanceledException e)
    {
        /// Don't throw an exception if the loop was cancelled
    }
    catch (Exception e)
    {
        LogError(e.Message);
    }
});
if (positiveResponses.Count > 0) {
    // Get the most preferred positive response and send it back to the client
    res = positiveResponses.Where(
        x => x.ID == PreferredServiceID)
        .FirstOrDefault();
}
return res; 
```

上面的代码是我的代码的一个非常简化的版本，但本质上它会检查每个响应以查看它是否是当前最受欢迎的服务。如果是这样，它会取消循环。

***但是...***以这种方式取消循环将等待已经调用的任何服务在终止循环之前完成。任何服务都有可能超时，这当然被视为否定。如果只是其中一个超时，它会在我的响应时间上增加 10 秒。

我想做的是以下之一：

1.  将首选服务返回给客户端，然后继续处理来自已经启动的服务的响应（这纯粹是为了记录目的，以便我知道这些服务的正/负率）。
2.  立即取消循环并忘记剩余的响应。理想情况下，我不想这样做，因为这意味着将不会记录本应积极响应的服务，这将影响他们的偏好评级。

**所以我的问题是：**

我想要实现的目标可能吗？我意识到 parallel.foreach 可能不是这项工作的最佳工具，或者我可能无法在响应客户端后记录响应。最重要的要求是当“赢家”已经被选中时，客户端无需等待服务响应即可收到快速响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:41:28.253

当前设置的方式是您的所有服务都并行启动，但您的检查仅编程为在所有服务完成后发生。
如果你想坚持你的 foreach 方法，你可以在 foreach 中编写你的 if 条件，这样如果服务首先完成，它将直接执行对积极响应的检查，你可以做出相应的反应（返回值/杀死其他人）。
请注意，这种方法有更多的线程不安全性，您必须小心处理（您从您的一个服务可能试图写入的列表中读取）。也有可能 2 个服务同时完成，因此您的 if 语句会触发两次。

foreach 方法的另一种方法是为每个服务创建一个线程，将所有线程放在一个列表中，并在启动所有线程后立即启动一个 while 循环以继续检查（当然是休眠）完成的服务。这样，您可以在其他线程仍在运行时通过中断 while 循环返回值。

# javascript - 一些图像在简单的 js 滑块中重复

> ID：10334303
> 
> 赞同：1
> 
> 时间：2012-04-26T13:21:07.157
> 
> 标签：javascript, jquery, image, slider

您好，我正在使用简单的 js 滑块进行图像滑动。我想每张幻灯片显示 3 张图片。这是我的js代码

```
 <?php
 $slide = true;
 $noOfItems = 3;
  //count($this->statSummary['top_products_data'] is having 5
 if (count($this->statSummary['top_products_data']) <= $noOfItems) {
   $slide = false;
 }
 ?>
$(document).ready(function(){   
    $("#slider").easySlider({
        hoverStop:false,
        auto: false,
        hoverStop:false,
        continuous: false,
        controlsFade:true,
       <?php if ($slide) { ?>
            controlsShow: true,
       <?php } else { ?>
            controlsShow: false,
       <?php } ?>
        verticalHeight: 150
    });

}); 
```

现在发生了什么，它显示了三张带有下一个箭头的图片，当我单击下一个按钮时，一个图像幻灯片和其他图像出现，它还显示上一个按钮。但它再次显示前 2 张图像（重复这些图像），然后下一个箭头消失。我不知道为什么会这样。谁能告诉我如何停止前两张图像的重复？

这是我的html

```
 <li class="rate sliderli">
     <div id="slider">
       <ul>
         <?php
            if (isset($this->statSummary['top_products_data']))
            {
              foreach ($this->statSummary['top_products_data'] as $top_product)
              {
                ?><li><img src="<?php echo $top_product['image_small']; ?>" alt="<?php echo $top_product['product_name']; ?>"/></li><?php
               }
              }
             ?>
           </ul>
        </div>
      </li> 
```

我的 CSS 看起来像

```
 #slider{
 width: 474px;
 margin:10px auto;
}
#slider li{
width: 150px;
height: 150px;
}
#summaryBox ul li.sliderli{
position: relative;
width: 650px;
} 
```

# apache - SOA 套件比较 - Jboss、Apache、WSO2 还是……其他？

> ID：10334306
> 
> 赞同：15
> 
> 时间：2012-04-26T13:21:11.477
> 
> 标签：apache, jboss, comparison, soa, wso2

大家好，stackoverflow 世界，很高兴认识大家。

我的第一个问题是关于我最近正在做的一项研究：我必须在开源软件导向架构中进行选择，在我看来，三个完整的平台（它们拥有我需要的所有部分）是：

*   ***Jboss SOA 套件***--> [http://www.redhat.com/products/jbossenterprisemiddleware/soa/](http://www.redhat.com/products/jbossenterprisemiddleware/soa/)
*   ***Apache***（它不是一个套件，但它们拥有所有基本部分）
*   ***WSO2 SOA 套件***--> [http://wso2.com/products/platforms](http://wso2.com/products/platforms)

我对这些平台的结论是：

*   ***JBoss***得到了一个**庞大而活跃的社区**的支持，这是我听说的第一个。缺点是它的**ESB 无法匹配服务的多个端点**——换句话说，它只匹配每个服务的一个端点；
*   ***Apache***也有一个**很棒的社区**，并且有**Tuscany SCA（服务组件架构）** [ [http://tuscany.apache.org/]](http://tuscany.apache.org/]) - WSO2 和 JBoss 没有 SCA 中间件（如果我错了，请告诉我）；
*   ***WSO2***有一个**完整的套件**（它似乎包含所有 SOA 的中间件），除了 SCA。这里的缺点是**社区只有 350 名成员**——他们宣称他们已经加入了 Apache 项目，但我不认为 Apache 社区直接支持他们的产品。

如果我的研究让我得出错误的结论，请告诉我我在哪里误解了某些东西，如果您认为它不完整并且需要考虑其他替代方案，那么了解它们是非常有用的。我没有提到单个部分（例如 Bonita 的 BPM [ [http://www.bonitasoft.com/]](http://www.bonitasoft.com/])），因为我认为如果我从一个套件开始，然后更改一些部分，那么构建 SOA 会更容易。

如果您认为这不是正确的方法，我很乐意考虑您将向我展示的任何替代方法。

* * *

编辑

以下是我在平台上没有找到的作品：

*   ***Jboss***：业务活动监控（BAM）、服务组件架构（SCA） WSO2：SCA；
*   ***Apache***：开发工具（也许应该使用 Eclipse）、业务流程管理（BPM）、业务规则、注册表
*   ***WSO2***：SCA。

* * *

提前感谢大家，

*还在学习的人*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-28T06:55:34.467

正如您所提到的，如果您正在寻找一个完整的 SOA 套件，那么 WSO2 可能是最合适的解决方案。主要是因为：

*   具有基于 OSGi 的碳运行时的完整 SOA 平台。
*   涵盖典型 SOA 中的大多数组件。（并不是说您需要所有这些组件，但如果您在某些时候需要它们，它就在那里。WSO2 通过使用 P2 功能管理来促进 SOA 中各种产品的功能管理。即类似于 Eclipse 功能管理）
*   堆栈中的每个组件都可以作为 PaaS 使用。（WSO2 斯特拉托斯）
*   在高端用例中得到证明[1](http://wso2.com/casestudies/ebay-uses-100-open-source-wso2-esb-to-process-more-than-1-billion-transactions-per-day/)．
*   毕竟它 100% 开源（Apache 许可证 2.0）和基于标准的。

然而，关于 Apache 和 WSO2 交互的评论，大多数 WSO2 产品都基于一个或多个 Apache 项目（ESB：Apache Synapse、Axis2、Axiom、AS：Axis2、Axiom、BPS：Apache ODE 等）。这些项目的大部分 PMC 和 Committer 都参与了 WSO2 的工作。所以，底线是 wso2 和 apache 之间有紧密的联系。有关详细信息，请参阅[2](http://wso2.com/apache/)。

![http://b.content.wso2.com/wp-content/themes/wso2ng-v3/images/wso2_new_platform_diagram.jpg](../Images/a1132423fafae5e1f1f33da1f203d2d2.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T22:41:22.567

小心。apache 部分并没有那么紧密地联系在一起。我总是建议，如果您选择开源，请组装一个真正适合您需求的套件。

所以，apache 有一个很好的服务/集成堆栈：[http](http://servicemix.apache.org/) ://servicemix.apache.org/ 。[这将包括一个服务容器、一个路由引擎（Camel）、一个消息传递层（ActiveMQ）等，最重要的是，只需为规则Drools](http://www.jboss.org/drools)和 BPM、[Activiti](http://activiti.org)添加漂亮的高级开源组件。或者用于 BPM 的[Apache ODE](http://ode.apache.org/)，是的，Apache 有一个 BPM 解决方案。虽然，我会推荐使用 jBPM 或 Activiti。

另外，想想你真正的商业案例是什么，以及你的要求。建立一个完整的 SOA 堆栈并使其产生业务价值将需要相当大的努力（技术、业务和流程方面）。

最后一句话，不要过多考虑 SOA 开源中单个部分之间的互操作性。互操作性是这些东西的用途:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:49:58.497

在开源方面，您还应该看看 Fuse ESB，它基于一组 Apache 产品，包括 ServiceMix： http: [//fusesource.com/products/enterprise-servicemix/](http://fusesource.com/products/enterprise-servicemix/)，现在由 Redhat 支持。WS02 和 Fuse ESB 似乎都是非常强大的 ESB 解决方案，具体取决于您的具体要求。您可以通过将托斯卡纳与这些结合使用来获得 SCA。

# php - 以下代码中的错误是什么（php）

> ID：10334308
> 
> 赞同：0
> 
> 时间：2012-04-26T13:21:11.957
> 
> 标签：php, foreach

```
<?php
foreach($menu_names as $menu_name){
$i=0;
echo "<li><a href='?subj=" .$subjects_ids[$i]. " '>".$menu_name."</a></li>";
$i++;
}
?> 
```

`$subjects_ids``1`是一个数组，其中包含`2`和的三个值`3`。但此处以 HTML 格式创建的链接仅包含`?subj=3`所有三个`$menu_name`. 第一个`$menu_name`应该有`subj=1`，第二个应该有`2`，第三个应该有`3`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:23:25.200

```
$i=0;
foreach($menu_names as $menu_name){
    echo "<li><a href='?subj=" .$subjects_ids[$i]. " '>".$menu_name."</a></li>";
    $i++;
} 
```

放置`$i=0;`在循环之外。

解释：

当您将`$i`变量放在 foreach 循环中并将其值设置为`0`. 每次循环数据的值`$i`将设置为 $i=0; 因此你应该把它放在 foreach 循环之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:23:38.180

您每次都在循环中设置 $i = 0 。

```
$i=0;
foreach($menu_names as $menu_name){
  echo "<li><a href='?subj=" .$subjects_ids[$i]. " '>".$menu_name."</a></li>";
  $i++;
} 
```

是更好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:32:37.990

```
<?php
$i=0;
foreach($menu_names as $menu_name){
echo "<li><a href='?subj=" .$subjects_ids[$i]. " '>".$menu_name."</a></li>";
$i++;
}
?> 
```

您已经在循环内初始化了 $i 变量，它应该在循环开始之前初始化，因此它的值保持不变并在所有 a 标签中添加 id 3

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:23:21.083

您在每次迭代时初始化 $i var，使其始终指向索引为 0 的元素。只需删除

```
$i=0; 
```

# common-lisp - 如何使用 lispbuilder 绘制曲面

> ID：10334309
> 
> 赞同：1
> 
> 时间：2012-04-26T13:21:14.690
> 
> 标签：common-lisp

我想使用[lispbuilder](http://code.google.com/p/lispbuilder/wiki/UsingLispbuilderSDL#User_Events)绘制表面，但我无法将用户指南/api 转换为工作示例。

这是我目前拥有的：

```
(defun func (version)
  (sdl:with-init ()
    (sdl:window 1023 768 :title-caption "Move a rectangle using the mouse")
    (setf (sdl:frame-rate) 60)
    (setf *map-surface* (sdl:load-image "...src/resources/map.jpg"))
    (sdl:with-events ()
      (:quit-event () t)
      (:key-down-event ()
               (sdl:push-quit-event))
      (:idle ()
         (sdl:draw-surface *map-surface*) 

         ;; Change the color of the box if the left mouse button is depressed
         (when (sdl:mouse-left-p)
           (setf *random-color* (sdl:color :r (random 255) :g (random 255) :b (random 255))))

          ;; Clear the display each game loop
          (sdl:clear-display sdl:*black*)

          ;; Draw the box having a center at the mouse x/y coordinates.
          (sdl:draw-box (sdl:rectangle-from-midpoint-* (sdl:mouse-x) (sdl:mouse-y) 20 20)
                 :color *random-color*)

          ;; Redraw the display
          (sdl:update-display)))))) 
```

但它根本不绘制表面。我已经检查了表面是否加载成功。我也很感激推荐一个涵盖该库的教程/论文，因为实际的“用户指南”并不是真正适合初学者的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:44:36.107

实际上，一切正常。但是当您每次都重绘屏幕时（`(sdl:clear-display sdl:*black*)`），您看不到图片。尝试注释掉这一行...

# python - Python 包和导入 - 需要说明

> ID：10334310
> 
> 赞同：2
> 
> 时间：2012-04-26T13:21:16.047
> 
> 标签：python, python-3.x, package

Python 的导入功能有时仍然让我感到困惑。这是一个例子：

我的项目具有以下包结构：

```
Project/
    src/
        example/
            __init__.py
            an_example.py
        top/
            __init__.py
            lin/
                __init__.py
                factory.py 
```

在`an_example.py`，我想写

```
from top import lin
if __name__ == '__main__':
    a = lin.factory.AClass() 
```

但是，这失败了：

```
 a = lin.factory.AClass()
AttributeError: 'module' object has no attribute 'factory' 
```

`an_example.py`像这样写的时候工作：

```
from top.lin import factory
if __name__ == '__main__':
    a = factory.AClass() 
```

你能解释一下为什么像第一个版本那样写导入语句是错误的吗？我更喜欢一个完全限定的名称`lin.factory.AClass`，例如`factory.AClass`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:22:42.853

这是因为，除非您告诉`lin`import `factory`in `__init__.py`，否则 then`factory`不在`lin`命名空间中。

例如：

假设您现有的项目结构，其中 an_example.py 包含：

```
from top import lin

lin.factory.AClass() 
```

用`top/lin/__init__.py`空白，我们得到`ImportError: No module named factory`.

使用`top/lin/__init__.py`包含`import top.lin.factory`，我们不会出错。

当您要求使用`factory.AClass()`时，它可以工作，因为它是在那里定义的。同样，`lin`如果要从那里使用工厂，则需要在其中定义工厂。

# java - 如何在 JTextPane 中编写状态栏？

> ID：10334314
> 
> 赞同：1
> 
> 时间：2012-04-26T13:21:20.493
> 
> 标签：java, swing, jakarta-ee, statusbar, jtextpane

当我单击`JTextPane`html 内容时，该 html 元素名称应该在状态栏中。我怎样才能写 stausbar `JTextPane`？如果您有任何示例代码，请提供给我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:34:15.430

使用示例[http://java-sl.com/JEditorPaneStructureTool.html](http://java-sl.com/JEditorPaneStructureTool.html) 作为状态条代码的基础。

# svn - 无法使用乌龟 SVN 提交

> ID：10334321
> 
> 赞同：0
> 
> 时间：2012-04-26T13:21:38.167
> 
> 标签：svn, tortoisesvn

我遇到了一个问题，每次我尝试提交。错误是：

**错误：工作副本“C:\SVN Checkout\Branch\Message Center Issue”已锁定**

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:27:59.347

`svn cleanup`在提交之前尝试。它将递归地清理工作副本，移除锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:58:49.767

如果清理不起作用，您应该使用 TortoiseSVN 中的“释放锁定”选项。如果这不起作用，您需要检查一个新的工作副本。

# php - 在 PHP 中以 JSON 形式接收 jQuery JSON 数据

> ID：10334322
> 
> 赞同：0
> 
> 时间：2012-04-26T13:21:39.947
> 
> 标签：php, jquery

我想这与正常情况相反。我希望将 PHP 中的数据作为带有 JSON 的字符串接收，并且希望 jQuery 对数据进行编码。

目前 PHP 会自动将数据解码为数组。

PHP 5.3.10（托管）。

```
<?php
if( isset( $_REQUEST['arr']))
{
    $arr = $_REQUEST['arr'];
    $obj = $_REQUEST['obj'];   
    $res = "arr is of type ".gettype( $arr).", var_export (".var_export( $arr, true).")\n" 
         . "obj is of type ".gettype( $obj).", var_export (".var_export( $obj, true).")\n";  
    die( json_encode( $res ));
    exit;
} 
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>test</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>
<script>

$(document).ready(function(){
    $("#csubmit").click( function() {
        var arr = new Array("one","two");
        var obj = { "one":1, "two":2 };
        var data ={ "arr" :arr, "obj" : obj };
        $.ajax({
            type: "POST",
            cache: false,
            data: data,
            dataType : "json",
                complete : function( jqXHR, textStatus ) {
                    if( textStatus != 'success' )
                        alert("Network error ("+textStatus+"/"+jqXHR.responseText+")");
                }
        }).done( function( data ) {
            alert("Got back:("+data+")");
        });
        return false;
    });
});

</script>
</head>
<body>
<form><input type="submit" value="click" id="csubmit"></form>
</body>
</html> 
```

结果总是

```
Got back:(arr is of type array, var_export (array (
  0 => 'one',
  1 => 'two',
))
obj is of type array, var_export (array (
  'one' => '1',
  'two' => '2',
))
) 
```

即使我希望它是一些字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:26:38.630

您可以在将 JavaScript 对象发送到服务器之前将其编码为 JSON。然后您必须手动解码 json 以将其用作数组。在您的 ajax 方法中执行以下操作。

```
 data : JSON.stringify(data), 
```

编辑：

较新的浏览器原生支持 JSON 对象。对于那些不支持它的人，您仍然可以通过包含来自[http://json.org](http://json.org)的 json2.js 来实现该功能。

有关 JSON 的更多信息，请访问[https://developer.mozilla.org/En/Using_native_JSON](https://developer.mozilla.org/En/Using_native_JSON)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:28:03.263

在 AJAX 请求中省略`dataType: 'json'`，将数据编码为 jQuery 中的 JSON 并将其传递给 PHP。

那应该行得通。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:42:43.807

当您接受返回 JSON 时，您正在发送正常的表单编码数据 ( `application/x-www-form-urlencoded`)：

```
arr%5B%5D=one&arr%5B%5D=two&obj%5Bone%5D=1&obj%5Btwo%5D=2 
```

又名

```
arr[]=one&arr[]=two&obj[one]=1&obj[two]=2 
```

您可以通过执行从 PHP 确认这一点

```
$raw_input = file_get_contents("php://input");
echo urldecode($raw_input); 
```

正如其他人所指出的，除非您在 JavaScript 中显式转换，否则您不会**发送**。`{"arr":["one","two"],"obj":{"one":1,"two":2}}`

# java - TeamCity 自定义通知程序未运行

> ID：10334324
> 
> 赞同：0
> 
> 时间：2012-04-26T13:21:44.347
> 
> 标签：java, build, teamcity

因此，我创建了一个简单的团队城市通知程序，此时它只会将一些信息记录到我的 C 盘，但是每当在 TeamCity 上触发构建时，通知程序就不会运行。我不确定我错过了什么。这是我到目前为止所拥有的。MyLogger 类只获取一个简单的 java.util.logging.Logger 对象，该对象在 C 驱动器上创建一个日志。

这是我对 Notificator 接口的实现：

```
import java.util.Collection;
import java.util.Set;
import java.util.logging.Logger;

import jetbrains.buildServer.Build;
import jetbrains.buildServer.notification.Notificator;
import jetbrains.buildServer.notification.NotificatorRegistry;
import jetbrains.buildServer.responsibility.ResponsibilityEntry;
import jetbrains.buildServer.responsibility.TestNameResponsibilityEntry;
import jetbrains.buildServer.serverSide.SBuildType;
import jetbrains.buildServer.serverSide.SProject;
import jetbrains.buildServer.serverSide.SRunningBuild;
import jetbrains.buildServer.serverSide.STest;
import jetbrains.buildServer.serverSide.mute.MuteInfo;
import jetbrains.buildServer.tests.TestName;
import jetbrains.buildServer.users.SUser;
import jetbrains.buildServer.vcs.VcsRoot;

public class TestNotificator implements Notificator {

    private Logger log;

    public TestNotificator(NotificatorRegistry nR) {
        log = MyLogger.getLogger();
        log.info("Registering the Notificator");
        nR.register(this);
    }

    public void doNotifications(SRunningBuild arg0) {
        log.info("Do Notifications has been called");
    }

    @Override
    public String getDisplayName() {
        return "Test Notificator";
    }

    @Override
    public String getNotificatorType() {
        return "testNotificator";
    }

    @Override
    public void notifyBuildFailed(SRunningBuild arg0, Set<SUser> arg1) {
        log.info("Build has failed");
        doNotifications(arg0);

    }

    @Override
    public void notifyBuildFailedToStart(SRunningBuild arg0, Set<SUser> arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public void notifyBuildFailing(SRunningBuild arg0, Set<SUser> arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public void notifyBuildProbablyHanging(SRunningBuild arg0, Set<SUser> arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public void notifyBuildStarted(SRunningBuild arg0, Set<SUser> arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public void notifyBuildSuccessful(SRunningBuild arg0, Set<SUser> arg1) {
        log.info("Build was Successfull");
        doNotifications(arg0);
    }

    @Override
    public void notifyLabelingFailed(Build arg0, VcsRoot arg1, Throwable arg2,
            Set<SUser> arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public void notifyResponsibleAssigned(SBuildType arg0, Set<SUser> arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public void notifyResponsibleAssigned(TestNameResponsibilityEntry arg0,
            TestNameResponsibilityEntry arg1, SProject arg2, Set<SUser> arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public void notifyResponsibleAssigned(Collection<TestName> arg0,
            ResponsibilityEntry arg1, SProject arg2, Set<SUser> arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public void notifyResponsibleChanged(SBuildType arg0, Set<SUser> arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public void notifyResponsibleChanged(TestNameResponsibilityEntry arg0,
            TestNameResponsibilityEntry arg1, SProject arg2, Set<SUser> arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public void notifyResponsibleChanged(Collection<TestName> arg0,
            ResponsibilityEntry arg1, SProject arg2, Set<SUser> arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public void notifyTestsMuted(Collection<STest> arg0, MuteInfo arg1,
            Set<SUser> arg2) {
        // TODO Auto-generated method stub

    }

    @Override
    public void notifyTestsUnmuted(Collection<STest> arg0, MuteInfo arg1,
            SUser arg2, Set<SUser> arg3) {
        // TODO Auto-generated method stub

    }

} 
```

这是 build-server-plugin.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans default-autowire="constructor">
  <bean id="testNotifier" class="com.testnot.TestNotificator"/>
</beans> 
```

我将类和 build-server-plugin.xml 打包在同一个 jar 中。在 jar 中有两个单独的目录，分别是 com.testnot 和 META-INF。也许我没有正确包装它们。我不完全确定我做错了什么。任何帮助将不胜感激。我一直在使用[此处找到的示例。](http://code.google.com/p/buildbunny/wiki/CreateTeamcityNotifier)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:59:13.327

所以在终于找到日志后，我发现你必须用Java 6编译插件，它与Java 7不兼容。经过这个更改，插件现在正在运行。

# cuda - NVIDIA GPU (sm_13) 上的 IEEE-754 标准

> ID：10334334
> 
> 赞同：3
> 
> 时间：2012-04-26T13:22:07.857
> 
> 标签：cuda, floating-point, gpgpu, ieee-754

如果我在主机和设备（GPU arch sm_13）上执行浮点（单精度）操作，那么值会不同吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T14:01:55.423

NVIDIA的[白皮书](http://developer.nvidia.com/content/precision-performance-floating-point-and-ieee-754-compliance-nvidia-gpus)对此进行了很好的讨论。基本上：

*   目前几乎所有东西都实现了 IEEE-754；
*   即使在忠实实施该标准之间，您仍然可以看到结果的差异（众所周知，英特尔在内部为双精度执行 80 位），或者编译器的高优化设置可能会改变结果
*   计算能力 2.0 和更高版本的 NVIDIA 卡支持单精度和双精度的 IEEE-754，只有非常小的警告
    *   某些操作不支持某些舍入模式 - 仅当您在代码中明确更改舍入模式时才相关
    *   有一些涉及融合乘法和加法的微妙之处
    *   CUDA 还提供了（稍微）较低的精度但更快的几个操作的实现，当然，如果您显式或隐式使用这些操作（带有编译器选项），您自然不会得到完整的 ieee-754 结果
*   计算能力 1.3 卡支持 ieee-754 双精度但不支持单精度；（单精度不支持非正规 - 例如非常小 - 数字、无 FMA、平方根和除法并不完全准确）
*   计算能力 1.2 卡只有单精度，并且不是完整的 ieee-754 如上所述。

# python - 将两段代码放在一起使其起作用

> ID：10334335
> 
> 赞同：1
> 
> 时间：2012-04-26T13:22:11.480
> 
> 标签：python, command-line

我在这里有多段代码，并且在将它们放在一起时遇到问题，因此我的函数将实际运行。

我有一个功能：

```
def getGenes(spliced, infile, outfile): 
```

它有一个可选的第一个参数“-s”，当用户输入时，它表示一个“开关”，需要“拼接基因序列”。因此，我跟着它（另外，运行时。sys.agrv[1] = spliced sys.argv[2] = infile 和 sys.argv[3] = outfile）：

```
import sys
spliced = False
if '-s' in sys.argv:
    spliced = True
    infile, outfile = sys.argv[2:] 
```

现在，无论文件是否包含我想将以下内容从 infile 写入 outfile 的开关：

```
fp = open(infile, 'r')
for line in fp:
    line = line.replace(',',' ')
    tokens = line.split()
    if '-s' in sys.argv and r:
        wp.write('>'+tokens[0]+'|'+tokens[1]+'('+tokens[2]+')'+':'+int(tokens[3])+'-'+int(tokens[4])+'|'+int(tokens[5])+'-'+int(tokens[10])+','+int(tokens[8])+'-'+int(tokens[11]))
    else:
        wp.write('>'+tokens[0]+'|'+tokens[1]+'('+tokens[2]+')'+':'+int(tokens[3])+'-'+int(tokens[4])) 
```

第一个语句应该在给定拼接参数时编写，第二个（其他部分）应该在没有给出拼接参数时编写）。上面的代码为输出文件下一行的序列创建信息行。

在此之后，根据文件中的一行在特定位置是否包含“+”或“-”，访问另一个文件以在特定坐标处提取字符串。取出来的这部分应该直接写在上面对应的行下面。所以，我应该为拼接和未拼接的参数都有一个“+”和“-”部分。我有以下代码：

```
fp2 = open('chr22.fa', 'r')
for line in fp2:
    newstring = ''
    z = line.strip()
    newstring += z
for line in fp:
    fields = line.split('\t')
    gene_ID, chr, strand = fields[:2]
    start = int(fields[3])
    end = int(fields[4])
    bc = {'A': 'T', 'C': 'G', 'G': 'C', 'T': 'A', 'N':'N'}       
    if strand == '+':
        wp.write(newstring[start:end]) 
    if strand == '-':
        newstart, newend = -(start + 1), -(end + 1)
        wp.write(bc[base.upper()] for base in newstring[newstart:newend]) 
```

如您所见，我让它根据是否存在“+”或“-”从文件中选择不同的部分。也就是说，我需要将它用于拼接和未拼接选项。但是从该文件中提取的每一行（或字符串）都应与其相应的信息行（在最后一段代码中创建）一起放置。这里的代码是从另一个文件中提取一个序列并翻译它。

我需要以某种方式将这两段代码放在一起，以便我的输出文件的格式具有：

一条信息

对应序列

另一条信息线

对应序列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:53:47.317

你不能只做一个，然后另一个，像这样：

```
for line in fp:
  # Info line
  line = line.replace(',',' ')
  tokens = line.split()
  if '-s' in sys.argv and r:
    wp.write('>'+tokens[0]+'|'+tokens[1]+'('+tokens[2]+')'+':'+int(tokens[3])+'-'+int(tokens[4])+'|'+int(tokens[5])+'-'+int(tokens[10])+','+int(tokens[8])+'-'+int(tokens[11]))
  else:
    wp.write('>'+tokens[0]+'|'+tokens[1]+'('+tokens[2]+')'+':'+int(tokens[3])+'-'+int(tokens[4]))

  # Sequence line
  fields = line.split('\t')
  gene_ID, chr, strand = fields[:2]
  start = int(fields[3])
  end = int(fields[4])
  bc = {'A': 'T', 'C': 'G', 'G': 'C', 'T': 'A', 'N':'N'}       
  if strand == '+':
    wp.write(newstring[start:end]) 
  if strand == '-':
    newstart, newend = -(start + 1), -(end + 1)
    wp.write(bc[base.upper()] for base in newstring[newstart:newend]) 
```

或者我在这里错过了什么？

# grails - 在 grails 中保存一对多域关联对象的最佳实践是什么？

> ID：10334345
> 
> 赞同：2
> 
> 时间：2012-04-26T13:22:37.387
> 
> 标签：grails

在 grail 中保存一对多域关联对象的最佳实践是什么？让我们考虑一个场景。

如果您有两个类 A 和 B 并且 A 具有许多 B 关系并且 B 属于 A ，那么创建/保存/删除 B 域对象的最佳实践是什么。在许多情况下，创建 As 时不可能创建 B 对象.

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:29:48.140

> 创建 As 时无法创建 B 对象。

我很确定那不是真的。Grails 使用 Hibernate，而 Hibernate 有传递持久性的概念，基本上就是级联设置。默认情况下，Grails 有一个级联设置`save-update`，这意味着如果您创建一个新的父级和一个新的子级，并将子级添加到父级，当您保存父级时，应该保存子级。

没有“最佳实践”。您需要完全理解 hibernate 中的持久化语义，并选择对您有意义的配置。你想让孩子有自己的生命周期吗？您想要级联哪些操作？您是否希望关系是双向的，关系应该走向何方？开发一个好的领域层需要理解这些问题（以及其他类似的问题），以及答案相对于您需要的功能的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:58:16.167

您需要在域的约束部分中赋予可为空的 true 。即静态约束{一个可为空的：真}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:31:08.570

我不太确定你到底在问什么，但如果你问如何实例化和保存 As 和 B，我会这样做：

```
class B {
    String name
    static belongsTo=[a:A]
}

class A {
    static hasMany=[manyBs:B]
} 
```

然后：

```
def a=new A()
a.addToManyBs(name:'someB')
a.save() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:37:46.553

我们称对象为 Owner 和 Pet。初始化一个没有宠物的所有者对象并继续保存，只是为了证明不必同时创建宠物。

```
Owner owner = new Owner(pets: []).save() 
```

现在我们可以将宠物添加到所有者。我们可以用一只宠物来做到这一点：

```
owner.pets.add(new Pet(name: "fido")) 
```

或者我们可以使用一组宠物：

```
def petCollection = [
    new Pet(name: "Pete"),
    new Pet(name: "meow")
]
owner.pets.addAll(petCollection)
owner.save() 
```

通过保存 Owner 对象，您会看到新创建的 Pet 对象也被持久化了。

# jquery - jQuery将内容获取到最近的H3标签

> ID：10334349
> 
> 赞同：0
> 
> 时间：2012-04-26T13:22:52.253
> 
> 标签：jquery, html, dom

我正在尝试获取最接近所选元素的 H3 标记的内容。

```
$(this).closest('h3').html(); 
```

上面的代码运行时包含null，“this”肯定是h3同父元素中另一个元素的选择器。

有人可以提供一个关于为什么它不起作用的想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T13:24:51.083

> “this”绝对是**同一个父元素中另一个元素的选择器**

那是你的问题。`closest`查找DOM 树，*而*不是沿着它的兄弟姐妹。改用[`siblings`](http://api.jquery.com/siblings/)：

```
$(this).siblings('h3').html(); 
```

请注意，这将返回第一个`h3`兄弟的 HTML。如果还有更多，您可能需要指定正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:30:09.910

jQuery 也有方法`.next()`和`.prev()`，以防万一你知道 与哪个方向`h3`有关`$(this)`。

例如：

```
$(this).click(function(){
    $(this).next('h3').html('a string');
}); 
```

# python - 由于警告和 ValueError，无法在 Windows 的 virtualenv 中安装 PIL

> ID：10334355
> 
> 赞同：4
> 
> 时间：2012-04-26T13:23:13.040
> 
> 标签：python, windows, python-imaging-library, virtualenv, pip

我正在尝试`PIL`在 virtualenv 中安装但失败了。我创建了一个全新的 virtualenv 并做`pip install PIL`了并得到了以下

```
C:\Users\s3z\Desktop\My Dropbox\pythons\ham>Scripts\activate
(ham) C:\Users\s3z\Desktop\My Dropbox\pythons\ham>pip install PIL
Downloading/unpacking PIL
  Downloading PIL-1.1.7.tar.gz (506Kb): 506Kb downloaded
  Running setup.py egg_info for package PIL
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py

Installing collected packages: PIL
  Running setup.py install for PIL
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py
    building '_imaging' extension
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "C:\Users\s3z\Desktop\My Dropbox\pythons\ham\build\PIL\setup.py", line 486, in <module>
        version=VERSION,
      File "C:\Python27\Lib\distutils\core.py", line 152, in setup
        dist.run_commands()
      File "C:\Python27\Lib\distutils\dist.py", line 953, in run_commands
        self.run_command(cmd)
      File "C:\Python27\Lib\distutils\dist.py", line 972, in run_command
        cmd_obj.run()
      File "C:\Users\s3z\Desktop\My Dropbox\pythons\ham\lib\site-packages\distribute-0.6.24-py2.7.egg\setuptools\command\install.py", line 53, in
run
        return _install.run(self)
      File "C:\Python27\Lib\distutils\command\install.py", line 563, in run
        self.run_command('build')
      File "C:\Python27\Lib\distutils\cmd.py", line 326, in run_command
        self.distribution.run_command(command)
      File "C:\Python27\Lib\distutils\dist.py", line 972, in run_command
        cmd_obj.run()
      File "C:\Python27\Lib\distutils\command\build.py", line 127, in run
        self.run_command(cmd_name)
      File "C:\Python27\Lib\distutils\cmd.py", line 326, in run_command
        self.distribution.run_command(command)
      File "C:\Python27\Lib\distutils\dist.py", line 972, in run_command
        cmd_obj.run()
      File "C:\Python27\Lib\distutils\command\build_ext.py", line 340, in run
        self.build_extensions()
      File "C:\Users\s3z\Desktop\My Dropbox\pythons\ham\build\PIL\setup.py", line 368, in build_extensions
        build_ext.build_extensions(self)
      File "C:\Python27\Lib\distutils\command\build_ext.py", line 449, in build_extensions
        self.build_extension(ext)
      File "C:\Python27\Lib\distutils\command\build_ext.py", line 499, in build_extension
        depends=ext.depends)
      File "C:\Python27\Lib\distutils\msvc9compiler.py", line 469, in compile
        self.initialize()
      File "C:\Python27\Lib\distutils\msvc9compiler.py", line 379, in initialize
        vc_env = query_vcvarsall(VERSION, plat_spec)
      File "C:\Python27\Lib\distutils\msvc9compiler.py", line 295, in query_vcvarsall
        raise ValueError(str(list(result.keys())))
    ValueError: [u'path']
    Complete output from command "C:\Users\s3z\Desktop\My Dropbox\pythons\ham\Scripts\python.exe" -c "import setuptools;__file__='C:\\Users\\s3z
\\Desktop\\My Dropbox\\pythons\\ham\\build\\PIL\\setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --s
ingle-version-externally-managed --record c:\users\s3z\appdata\local\temp\pip-f7ttlx-record\install-record.txt --install-headers "C:\Users\s3z
\Desktop\My Dropbox\pythons\ham\include\site\python2.7":
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py

running install

running build

running build_py

creating build

creating build\lib.win-amd64-2.7

copying PIL\ArgImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\BdfFontFile.py -> build\lib.win-amd64-2.7

copying PIL\BmpImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\BufrStubImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\ContainerIO.py -> build\lib.win-amd64-2.7

copying PIL\CurImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\DcxImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\EpsImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\ExifTags.py -> build\lib.win-amd64-2.7

copying PIL\FitsStubImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\FliImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\FontFile.py -> build\lib.win-amd64-2.7

copying PIL\FpxImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\GbrImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\GdImageFile.py -> build\lib.win-amd64-2.7

copying PIL\GifImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\GimpGradientFile.py -> build\lib.win-amd64-2.7

copying PIL\GimpPaletteFile.py -> build\lib.win-amd64-2.7

copying PIL\GribStubImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\Hdf5StubImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\IcnsImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\IcoImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\Image.py -> build\lib.win-amd64-2.7

copying PIL\ImageChops.py -> build\lib.win-amd64-2.7

copying PIL\ImageCms.py -> build\lib.win-amd64-2.7

copying PIL\ImageColor.py -> build\lib.win-amd64-2.7

copying PIL\ImageDraw.py -> build\lib.win-amd64-2.7

copying PIL\ImageDraw2.py -> build\lib.win-amd64-2.7

copying PIL\ImageEnhance.py -> build\lib.win-amd64-2.7

copying PIL\ImageFile.py -> build\lib.win-amd64-2.7

copying PIL\ImageFileIO.py -> build\lib.win-amd64-2.7

copying PIL\ImageFilter.py -> build\lib.win-amd64-2.7

copying PIL\ImageFont.py -> build\lib.win-amd64-2.7

copying PIL\ImageGL.py -> build\lib.win-amd64-2.7

copying PIL\ImageGrab.py -> build\lib.win-amd64-2.7

copying PIL\ImageMath.py -> build\lib.win-amd64-2.7

copying PIL\ImageMode.py -> build\lib.win-amd64-2.7

copying PIL\ImageOps.py -> build\lib.win-amd64-2.7

copying PIL\ImagePalette.py -> build\lib.win-amd64-2.7

copying PIL\ImagePath.py -> build\lib.win-amd64-2.7

copying PIL\ImageQt.py -> build\lib.win-amd64-2.7

copying PIL\ImageSequence.py -> build\lib.win-amd64-2.7

copying PIL\ImageShow.py -> build\lib.win-amd64-2.7

copying PIL\ImageStat.py -> build\lib.win-amd64-2.7

copying PIL\ImageTk.py -> build\lib.win-amd64-2.7

copying PIL\ImageTransform.py -> build\lib.win-amd64-2.7

copying PIL\ImageWin.py -> build\lib.win-amd64-2.7

copying PIL\ImImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\ImtImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\IptcImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\JpegImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\McIdasImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\MicImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\MpegImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\MspImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\OleFileIO.py -> build\lib.win-amd64-2.7

copying PIL\PaletteFile.py -> build\lib.win-amd64-2.7

copying PIL\PalmImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PcdImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PcfFontFile.py -> build\lib.win-amd64-2.7

copying PIL\PcxImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PdfImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PixarImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PngImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PpmImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PsdImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\PSDraw.py -> build\lib.win-amd64-2.7

copying PIL\SgiImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\SpiderImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\SunImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\TarIO.py -> build\lib.win-amd64-2.7

copying PIL\TgaImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\TiffImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\TiffTags.py -> build\lib.win-amd64-2.7

copying PIL\WalImageFile.py -> build\lib.win-amd64-2.7

copying PIL\WmfImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\XbmImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\XpmImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\XVThumbImagePlugin.py -> build\lib.win-amd64-2.7

copying PIL\__init__.py -> build\lib.win-amd64-2.7

running build_ext

building '_imaging' extension

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\s3z\Desktop\My Dropbox\pythons\ham\build\PIL\setup.py", line 486, in <module>

    version=VERSION,

  File "C:\Python27\Lib\distutils\core.py", line 152, in setup

    dist.run_commands()

  File "C:\Python27\Lib\distutils\dist.py", line 953, in run_commands

    self.run_command(cmd)

  File "C:\Python27\Lib\distutils\dist.py", line 972, in run_command

    cmd_obj.run()

  File "C:\Users\s3z\Desktop\My Dropbox\pythons\ham\lib\site-packages\distribute-0.6.24-py2.7.egg\setuptools\command\install.py", line 53, in run

    return _install.run(self)

  File "C:\Python27\Lib\distutils\command\install.py", line 563, in run

    self.run_command('build')

  File "C:\Python27\Lib\distutils\cmd.py", line 326, in run_command

    self.distribution.run_command(command)

  File "C:\Python27\Lib\distutils\dist.py", line 972, in run_command

    cmd_obj.run()

  File "C:\Python27\Lib\distutils\command\build.py", line 127, in run

    self.run_command(cmd_name)

  File "C:\Python27\Lib\distutils\cmd.py", line 326, in run_command

    self.distribution.run_command(command)

  File "C:\Python27\Lib\distutils\dist.py", line 972, in run_command

    cmd_obj.run()

  File "C:\Python27\Lib\distutils\command\build_ext.py", line 340, in run

    self.build_extensions()

  File "C:\Users\s3z\Desktop\My Dropbox\pythons\ham\build\PIL\setup.py", line 368, in build_extensions

    build_ext.build_extensions(self)

  File "C:\Python27\Lib\distutils\command\build_ext.py", line 449, in build_extensions

    self.build_extension(ext)

  File "C:\Python27\Lib\distutils\command\build_ext.py", line 499, in build_extension

    depends=ext.depends)

  File "C:\Python27\Lib\distutils\msvc9compiler.py", line 469, in compile

    self.initialize()

  File "C:\Python27\Lib\distutils\msvc9compiler.py", line 379, in initialize

    vc_env = query_vcvarsall(VERSION, plat_spec)

  File "C:\Python27\Lib\distutils\msvc9compiler.py", line 295, in query_vcvarsall

    raise ValueError(str(list(result.keys())))

ValueError: [u'path']

----------------------------------------
Command "C:\Users\s3z\Desktop\My Dropbox\pythons\ham\Scripts\python.exe" -c "import setuptools;__file__='C:\\Users\\s3z\\Desktop\\My Dropbox\\
pythons\\ham\\build\\PIL\\setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-
managed --record c:\users\s3z\appdata\local\temp\pip-f7ttlx-record\install-record.txt --install-headers "C:\Users\s3z\Desktop\My Dropbox\pytho
ns\ham\include\site\python2.7" failed with error code 1 in C:\Users\s3z\Desktop\My Dropbox\pythons\ham\build\PIL
Storing complete log in C:\Users\s3z\AppData\Roaming\pip\pip.log 
```

**这里出了什么问题？以及如何在 virtualenv 中成功安装 PIL？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T14:19:38.517

使用 PIP 在 Windows 上安装 PIL 会给我带来问题，但使用 easy_install 可以正常工作。

“c:\VirtualENV\easy_install PIL”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T17:18:06.613

PIL 是一个库，其中有一些部分是用 C 编写的，并且需要 Microsoft Visual C++ 来编译和构建一个完整的包。从错误消息中，它找不到 Microsoft Visual C++ 的路径。

如果您想从源代码安装（通过 PIP），您可以按照[此博客中的说明进行操作](http://blog.victorjabur.com/2011/06/05/compiling-python-2-7-modules-on-windows-32-and-64-using-msvc-2008-express/)

[在 virtualenv 中使用 PIL 的一种更简单的方法是将PythonWare](http://www.pythonware.com/products/pil/#pil117)中的预编译二进制文件安装到 Python 站点包目录中。

然后使用选项重新创建您的 virtualenv`virtualenv --system-site-packages ENV` 您的 virtualenv 将从全局站点包继承包。

# ajax - 如何从谷歌翻译中获取和解析 json 答案

> ID：10334358
> 
> 赞同：7
> 
> 时间：2012-04-26T13:23:16.213
> 
> 标签：ajax, json, iframe, google-translate

我想将带有ajax请求的单词翻译成谷歌翻译如果我使用curl，它会像：

```
curl_init("http://translate.google.com/translate_a/t?client=t&text=hello&sl=en&tl=ru"); 
```

但我不能使用带有查询的服务器端脚本，因为它们将来自同一个 IP
但我也不能使用 JSONP 请求，因为我认为这是不允许的。这是服务器响应：

> [[["привет","hello","privet",""]],[["",["Алло","Здравствуйте."]],["имя существительное",["приветствие","приветственный возглас","возглас удивления"]],["глагол",["здороваться","звать","окликать"]],["междометие",["привет","здравствуйте","алло"]]] ,"en",,[["привет",[5],1,0,1000,0,1,0]],[["hello",4,,,""],["hello",5 ,[["привет",1000,1,0],["Здравствуй",0,1,0],["Здравствуйте",0,1,0],["Hello",0,1,0]] ,[[0,5]],"你好"]],,,[["en"]],13]

而且我无法将内容加载到 iframe

```
<iframe src="http://translate.google.com/translate_a/t?client=t&text=hello&sl=en&tl=ru"></iframe> 
```

因为响应内容类型是“text/javascript”并且浏览器[下载了一个文件](http://jsfiddle.net/YnZ2u/)

PS。我无法使用 php 函数 json_decode() 或 jquery.ajax 解码内容，因为响应 json 已损坏。你可以在这里测试它[http://json.parser.online.fr/](http://json.parser.online.fr/)

请给我一个建议

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T03:45:04.280

尝试：

```
http://translate.google.com/translate_a/t?client=p 
```

如果客户端参数不是“t”，则返回有效的 JSON 数据。当然，您始终可以将“t”返回变量转换为有效的数组或 JSON，但这更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-02T22:12:13.963

确保添加标题参数“User-Agent”=“Mozilla/4.0”。如果您不这样做，Google 会添加验证码

# java - 使用 hbm.xml 在 Hibernate 中强制设置主键

> ID：10334364
> 
> 赞同：3
> 
> 时间：2012-04-26T13:23:22.113
> 
> 标签：java, xml, hibernate, jpa, hbm

是否可以使用 Hibernate XML 映射配置避免主键设置器？使用注释时，您不必声明 setter 方法。见例子。我正在使用休眠版本 4.1.2。

1.  基于 XML 的配置

    ```
    public class Entity {
        private Integer id;

        public Integer getId() {
            return id;
        }
    }

    <class name="Language" table="language">
        <id name="id" column="id">
            <generator class="native" />
        </id>
    </class> 
    ```

    初始化 Hibernate 时抛出异常

    ```
    Caused by: org.hibernate.PropertyNotFoundException: Could not find a setter for property id in class net.kreuzman.eshop.core.domain.l10n.Language
        at org.hibernate.property.BasicPropertyAccessor.createSetter(BasicPropertyAccessor.java:252)
        at org.hibernate.property.BasicPropertyAccessor.getSetter(BasicPropertyAccessor.java:245)
        at org.hibernate.mapping.Property.getSetter(Property.java:325)
        at org.hibernate.tuple.entity.PojoEntityTuplizer.buildPropertySetter(PojoEntityTuplizer.java:444)
        at org.hibernate.tuple.entity.AbstractEntityTuplizer.<init>(AbstractEntityTuplizer.java:182)
        at org.hibernate.tuple.entity.PojoEntityTuplizer.<init>(PojoEntityTuplizer.java:82)
    ... 49 more 
    ```

2.  基于注释的配置

    ```
    @Entity
    @Table(name="entity")
    public class Entity {
        @Id
        @Column(name="id")
        @GeneratedValue(strategy=GenerationType.AUTO)
        private Integer id;

            public Integer getId() {
                 return id;
            }
    } 
    ```

这很好用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:39:56.673

您可以将访问类型设置为字段，这将实现与将注释放在字段上相同的效果。

```
<class name="Language" table="language">
    <id name="id" column="id" access="field">
        <generator class="native" />
    </id>
</class> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:34:22.363

我认为hibernate通过反射（Class.newInstance（））创建对象，这就是它需要无参数构造函数的原因。那样 - 我不明白如何为使用过的属性省去一个设置器。您可以将*未使用*的字段标记为@Transient，仅此而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T03:36:18.947

```
@GeneratedValue(strategy = GenerationType.IDENTITY) 
```

而不是自动

# winapi - 使用 win32 API 创建新的 gui 组件

> ID：10334369
> 
> 赞同：1
> 
> 时间：2012-04-26T13:23:47.903
> 
> 标签：winapi, win32gui

大家，
你能告诉我有什么方法可以在win32 api中创建新的gui控件（例如手风琴栏等）。如果你知道，请告诉我书籍或阅读链接。
谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:45:03.850

您可以通过注册您自己的窗口类并`WindowProc`为该类提供处理绘图、用户交互和组成控件（如果有的话）的自定义来创建您自己的“控件”。如果您想让这些可用于不同的项目，您可以将它们添加到一个 DLL 中，该 DLL 具有`Init`应用程序在创建您自己的类的窗口之前调用的函数。

[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ff657751%28v=vs.85%29.aspx)将是开始了解的最佳场所。

根据预期用途，也有使用 ATL、MFC、.NET、QT 或其他框架的选项，但其中大多数只是上述方法的简单包装。

# c# - 这段代码可以简化吗？

> ID：10334371
> 
> 赞同：4
> 
> 时间：2012-04-26T13:23:49.493
> 
> 标签：c#

这段代码很多`if/else`，我想知道它是否可以简化为几行。代码工作得很好，但我更喜欢更有效和更清洁的方式。

```
if (textBox_naam.Text.Length < 3)
{
   textBox_naam.BackColor = Color.FromArgb(205, 92, 92);
}
else
{
   textBox_naam.BackColor = Color.White;
}

if (textBox_email.Text.Length < 5)
{
   textBox_email.BackColor = Color.FromArgb(205, 92, 92);
}
else
{
   textBox_email.BackColor = Color.White;
}

if (textBox_body.Text.Length < 20)
{
   textBox_body.BackColor = Color.FromArgb(205, 92, 92);
}
else
{
   textBox_body.BackColor = Color.White;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-26T13:26:03.923

您最简单的赌注（不涉及任何技巧！）将是：

```
SetBackColor(textBox_naam, 3, GOOD_COLOR, BAD_COLOR);
SetBackColor(textBox_email, 5, GOOD_COLOR, BAD_COLOR);
SetBackColor(textBox_body, 20, GOOD_COLOR, BAD_COLOR); 
```

使用如下定义的方法`SetBackColor`：

```
public void SetBackColor(TextBox tb, int minLength, Color goodColor, Color badColor)
{
    tb.BackColor = tb.Text.Length < minLength ? badColor : goodColor;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:25:45.450

您可以使用三元 if then else 运算符

```
textBox_naam.BackColor = textBox_naam.Text.Length < 3 ? Color.FromArgb(205, 92, 92) : Color.White; 
```

这不会更有效，但会使用更少的代码行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T13:28:31.423

好吧，您可以使用速记 if 语句...

```
Color other=Color.FromArgb(205,92,92);
textBox_naam.BackColor=(textBox_naam.Text.Length<3?other:Color.White);
textBox_email.BackColor=(textBox_email.Text.Length<5?other:Color.White);
textBox_body.BackColor=(textBox_body.Text.Length<20?other:Color.White); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T14:18:57.970

有没有安装**Reshaper**？我认为通过使用 JetBrain 的 VS 重塑器扩展，您会找到一个很好的（未来）**帮助**。依赖它，它是.NET 开发人员*必备的*绝佳工具。

# .net - 如何防止 HttpClient.PostAsync 在大量使用时耗尽所有临时端口？

> ID：10334373
> 
> 赞同：0
> 
> 时间：2012-04-26T13:23:52.487
> 
> 标签：.net, rest, .net-4.0, dotnet-httpclient

我有一个 .NET 控制台应用程序，可以批量上传到 RESTful 服务。我正在使用[`HttpClient`](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28v=vs.110%29.aspx)与服务进行通信。默认情况下，`HttpClient`使用 a`HttpWebRequest`进行连接。我一次只建立一个连接。当我达到接近 4000 个请求时，它们开始失败，给出一个错误解释 -

> ..系统缺少足够的缓冲区空间或因为队列已满。

我相信这是由于 XP 在我发出 4000 个请求之前耗尽了临时端口。

在运行应用程序时查看 netstat，我可以看到大约 300 个与服务的连接为“已建立”。我一次只建立一个连接。连接显然最终会被关闭，但我应该做些什么来确保这些连接尽快关闭吗？

查看活动连接，我可以看到每个请求都使用了新的临时端口。为避免该错误，有没有办法`HttpClient.PostAsync()`重用相同的临时端口？我提出这么多请求的正确方法是什么？

我一次只建立 1 个连接时使用的原因`HttpClient.PostAsync()`是我打算将其增加到 2 或 3。我在解决这个问题时将它降低到 1。

编辑：我已经能够通过增加 Windows 注册表中的临时端口范围来解决这个问题，但是我更愿意找到一个基于代码的解决方案，因为将来请求的数量可能会急剧增加。

# php - 如何在 Drupal 的“预览”中添加消息？

> ID：10334374
> 
> 赞同：0
> 
> 时间：2012-04-26T13:23:57.837
> 
> 标签：php, drupal

对于任何用户都可以访问的 CCK 表单，底部有一个“预览”按钮，允许用户预览他们所做的更改，并在预览下方向下滚动显示他们可以编辑的表单/字段。

对于带有输入的大型表单，没有明确的消息表明他们填写的原始表单位于预览下方...如何在预览顶部添加一条消息，显示“向下滚动预览下方以编辑你提交的表格？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:24:33.167

我假设您使用的 FORM 是`BLOCK`or `PAGE`or`CUSTOM CONTENT`类型。您需要做的就是检查`.tpl.php`文件。在那里，您可以轻松修改和显示您想要的任何类型的内容。

只需查看打印表单和`echo`您的消息的功能即可。

# c# - 空不为空？

> ID：10334375
> 
> 赞同：1
> 
> 时间：2012-04-26T13:23:59.630
> 
> 标签：c#, .net

以下代码

```
 if (_LastMouseClickArea != null)
        {
            if (_LastMouseClickArea.GridItem == GridItem.DataCell)
            {... 
```

失败，因为`_LastMouseClickArea`为空。我知道这听起来很傻，所以我来到了这里。

从即时窗口：

```
_LastMouseClickArea != null
true
_LastMouseClickArea 
null
_LastMouseClickArea == null
false
_LastMouseClickArea.GetType()
'((object)(this._LastMouseClickArea))' is null 
```

什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:27:22.163

你有可能有比赛条件吗？因为在您检查时它不为空，但随后一个线程在您能够使用它之前将其设置为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:33:17.973

**解决方案：**提交之前，我记得做一些橡皮鸭调试。这让我检查了`==`它是如何实现的，而且，果然，有一些奇怪的 P/Invoke 调用`null != null`等于 equals `true`。

因此，如果有人遇到相同的问题，请在此处参考，以供将来参考。

# javascript - 如何在带有多个事件处理程序的 jquery 中使用 .on()？

> ID：10334378
> 
> 赞同：-1
> 
> 时间：2012-04-26T13:24:15.043
> 
> 标签：javascript, jquery

这是我当前的功能：

```
$('.EmailAddresses').on('keypress', 'focusout', $('input:text[name^="Customers[0].EmailAddresses"]'), function (e) {
    emailRadioBtns(e);
}); 
```

但这不起作用。有谁知道如何使用 .on() 调用具有多个事件的相同函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T13:26:01.783

改为使用

```
$('.EmailAddresses').on('keypress focusout', ... 
```

所有事件名称必须包含在相同的字符串中并用空格分隔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:48:21.093

```
$('.EmailAddresses').on('keypress focusout', 'input:text[name^="Customers[0].EmailAddresses"]', function (e) {
    emailRadioBtns(e);
}); 
```

或用于不同的功能：

```
$('.EmailAddresses').on({
   keypress: function(e) {
       emailRadioBtns(e);
   },
   focusout: function(e) {
       //do something else
   }
}, 'input:text[name^="Customers[0].EmailAddresses"]' ); 
```

# google-maps - 谷歌地图上的箭头键导航，无需点击地图

> ID：10334380
> 
> 赞同：11
> 
> 时间：2012-04-26T13:24:18.000
> 
> 标签：google-maps, google-maps-api-3

我尝试在 Google Maps API 文档和此处搜索，但我找不到如何执行此操作。

我试图在我的地图上默认设置箭头键导航，而无需单击地图区域来启用它。

我尝试了以下解决方案但没有成功：

```
map.getDiv().focus();
document.getElementById("map_canvas").focus();
google.maps.event.trigger(map, 'rightclick'); 
```

任何人都知道如何做到这一点？

谢谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T01:55:57.920

这里需要注意几件事，简单地使用`.focus()`或触发`#map`div 元素上的点击操作不会起到作用，因为这些操作发生在地图实际在 DOM 上呈现之前。所以，首先要承认的是`tilesloaded`谷歌地图库提供的事件的使用。

```
google.maps.event.addListener(map, 'tilesloaded', function() {
    //do actions
}); 
```

我发现的第二件事是您不能只`$('#map').click()`在事件侦听器中添加。这是因为尽管它`#map`是容器 div - 谷歌地图脚本实际上在它上面渲染了一大堆其他 div（它们具有更高的 z 索引并且也是实际保存地图图块的内容）。通过一些黑客攻击和 jquery，您可以缩小到包含图块的 div 并触发该 div 上的点击事件......结果代码是：

```
google.maps.event.addListener(map, 'tilesloaded', function() {    
    $("#map").children().children().first().children().trigger('click');
}); 
```

我使用 Chrome 的开发工具缩小到包含图块的 div，并使用 jquery 的`children()`方法从`#map`. 如果您将该代码粘贴到您的 init 函数中，那么您应该很高兴。这是一个带有解决方案工作示例的[JSfiddle 。](http://jsfiddle.net/svigna/kfDsd/embedded/result/)

# php - 将其转换为作为 cron 运行？

> ID：10334383
> 
> 赞同：-3
> 
> 时间：2012-04-26T13:24:20.723
> 
> 标签：php, mysql, cron

有没有办法可以将此函数转换为从 cron 作业运行，然后将它返回的数据插入数据库？

```
public function ping($host, $port=25565, $timeout=0.1) {
//Set up our socket
    $beginning_time = microtime(true);
    $fp = fsockopen($host, $port, $errno, $errstr, $timeout);
    if (!$fp) return false;
    $end_time = microtime(true);

//Send 0xFE: Server list ping
    fwrite($fp, "\xFE");

//Read as much data as we can (max packet size: 241 bytes)
    $d = fread($fp, 256);

//Check we've got a 0xFF Disconnect
    if ($d[0] != "\xFF") return false;

//Remove the packet ident (0xFF) and the short containing the length of the string
    $d = substr($d, 3);

//Decode UCS-2 string
    $d = mb_convert_encoding($d, 'auto', 'UCS-2');

//Split into array
    $d = explode("\xA7", $d);

//Return an associative array of values
    return array(
        'motd'        =>        $d[0],
        'players'     => intval($d[1]),
        'max_players' => intval($d[2]),
        'latency'     => ($end_time - $beginning_time) * 1000);
} 
```

它返回的数据是最后数组中的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:29:48.937

您可以从命令行运行任何 PHP 文件。因此，可以在 cron 中使用相同的命令。无需转换任何东西。

```
/usr/local/bin/php /home/test.php 
```

路径`/usr/local/bin/php`应该是您的 php 二进制文件的位置。

# java - JSON 异常：org.json.JSONException：未终止的数组

> ID：10334385
> 
> 赞同：4
> 
> 时间：2012-04-26T13:24:25.333
> 
> 标签：java, android, json

我正在开发一个 android 应用程序 - 它从服务器请求一些数据，服务器以 JSON 格式返回数据。一切正常，除了 API。调试后，我发现了这个异常：

```
org.json.JSONException: Unterminated array at character 152 of

{
    "total": "2",
    "result": [
        {
            "id": "15",
            "ename": "Horror movies based on true stories",
            "vname": "Những phim kinh dị dựa trên chuyện có thật",
            "movies": "16"
        }{
            "id": "14",
            "ename": "IMDB Top 250",
            "vname": "250 bộ phim hay nhất mọi thời đại",
            "movies": "127"
        }{
            "id": "13",
            "ename": "10 good movies for women",
            "vname": "10 bộ phim hay dành cho phái đẹp",
            "movies": "10"
        }{
            "id": "12",
            "ename": "The 84th Annual Academy Awards",
            "vname": "Giải Oscars lần thứ 84 (2012)",
            "movies": "37"
        }{
            "id": "11",
            "ename": "Charlie Chaplin collection",
            "vname": "Tuyển tập hề Sác lô",
            "movies": "7"
        }{
            "id": "10",
            "ename": "Tuyển tập điệp viên 007",
            "vname": "007 collection",
            "movies": "23"
        }{
            "id": "9",
            "ename": "Donnie Yen movies collection",
            "vname": "Tuyển tập phim Chung Tử Đơn",
            "movies": "24"
        }{
            "id": "8",
            "ename": "Back to the Future trilogy",
            "vname": "Tuyển tập "Trởlạitươnglai"",
            "movies": "3"
        }{
            "id": "7",
            "ename": "Stieg Larssons Millennium trilogy",
            "vname": "Bộ tiểu thuyết Millenium của nhà văn Stieg Larsson",
            "movies": "3"
        }{
            "id": "6",
            "ename": "Chan Wook Parks vengeance trilogy",
            "vname": "Bộ ba phim Báo thù của đạo diễn Park Chan Wook",
            "movies": "3"
        }
    ]
} 
```

我在互联网上搜索过，但没有运气。我也数到第 152 个字符，但没有错！请帮我 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T13:27:28.053

我看到了一些错误：

数组中的元素应该用逗号分隔：

```
{
    "total":"2",
    "result":  [
        {
            "id":"15",
            "ename":"Horror movies based on true stories",
            "vname":"Nh?ng phim kinh d? du?a tren chuye?n co? tha?t",
            "movies":"16"
        }**,COMMA**
        {
            "id":"14",
            "ename":"IMDB Top 250","vname":"250 b? phim hay nh?t m?i th?i d?i",
            "movies":"127"
        }
    ]
} 
```

请注意，我放置字符串`COMMA`只是为了在该位置下划线。您只需要添加`,`没有`COMMA`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-25T23:27:58.053

当您想在 json 中使用引号时，您必须使用转义引号。像这样：

```
[{"vname": "Tuyển tập \"Trởlạitươnglai\""}] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T13:28:49.723

你的回复一定是这样的

```
{
    "total": "2",
    "result": [
        {
            "id": "15",
            "ename": "Horror movies based on true stories",
            "vname": "Những phim kinh dị dựa trên chuyện có thật",
            "movies": "16"
        },
        {
            "id": "14",
            "ename": "IMDB Top 250",
            "vname": "250 bộ phim hay nhất mọi thời đại",
            "movies": "127"
        },
        {
            "id": "13",
            "ename": "10 good movies for women",
            "vname": "10 bộ phim hay dành cho phái đẹp",
            "movies": "10"
        },
        {
            "id": "12",
            "ename": "The 84th Annual Academy Awards",
            "vname": "Giải Oscars lần thứ 84 (2012)",
            "movies": "37"
        },
        {
            "id": "11",
            "ename": "Charlie Chaplin collection",
            "vname": "Tuyển tập hề Sác lô",
            "movies": "7"
        },
        {
            "id": "10",
            "ename": "Tuyển tập điệp viên 007",
            "vname": "007 collection",
            "movies": "23"
        },
        {
            "id": "9",
            "ename": "Donnie Yen movies collection",
            "vname": "Tuyển tập phim Chung Tử Đơn",
            "movies": "24"
        },
        {
            "id": "8",
            "ename": "Back to the Future trilogy",
            "vname": "Tuyển tập Trởlạitươnglai",
            "movies": "3"
        },
        {
            "id": "7",
            "ename": "StiegLarssonsMillenniumtrilogy",
            "vname": "BộtiểuthuyếtMilleniumcủanhàvănStiegLarsson",
            "movies": "3"
        },
        {
            "id": "6",
            "ename": "ChanWookParksvengeancetrilogy",
            "vname": "BộbaphimBáothùcủađạodiễnParkChanWook",
            "movies": "3"
        }
    ]
} 
```

而且你的一个值包含`"`额外的 `Trở lại tương lai`，所以只需删除它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T13:30:27.680

这有帮助吗？ [Android：带空格的 Json 字符串给出“未终止的对象”异常](https://stackoverflow.com/questions/7327069/android-json-string-with-spaces-gives-unterminated-object-at-exception)

似乎您需要查找一些有关如何形成 JSON 数组的示例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-26T13:39:42.730

这是您的 json 数组，您在 Jsonarray 中的每个元素之后都缺少逗号`result`

[您可以在此处](http://jsonviewer.stack.hu/)或[此处](http://jsonlint.com/)检查 JSON 是否有效

```
{
  "total": "2",
  "result": [
    {
      "id": "15",
      "ename": "Horror movies based on true stories",
      "vname": "Những phim kinh dị dựa trên chuyện có thật",
      "movies": "16"
    }{
      "id": "14",
      "ename": "IMDB Top 250",
      "vname": "250 bộ phim hay nhất mọi thời đại",
      "movies": "127"
    }{
      "id": "13",
      "ename": "10 good movies for women",
      "vname": "10 bộ phim hay dành cho phái đẹp",
      "movies": "10"
    }{
      "id": "12",
      "ename": "The 84th Annual Academy Awards",
      "vname": "Giải Oscars lần thứ 84 (2012)",
      "movies": "37"
    }{
      "id": "11",
      "ename": "Charlie Chaplin collection",
      "vname": "Tuyển tập hề Sác lô",
      "movies": "7"
    }{
      "id": "10",
      "ename": "Tuyển tập điệp viên 007",
      "vname": "007 collection",
      "movies": "23"
    }{
      "id": "9",
      "ename": "Donnie Yen movies collection",
      "vname": "Tuyển tập phim Chung Tử Đơn",
      "movies": "24"
    }{
      "id": "8",
      "ename": "Back to the Future trilogy",
      "vname": "Tuyển tập "Trởlạitươnglai"",
      "movies": "3"
    }{
      "id": "7",
      "ename": "Stieg Larssons Millennium trilogy",
      "vname": "Bộ tiểu thuyết Millenium của nhà văn Stieg Larsson",
      "movies": "3"
    }{
      "id": "6",
      "ename": "Chan Wook Parks vengeance trilogy",
      "vname": "Bộ ba phim Báo thù của đạo diễn Park Chan Wook",
      "movies": "3"
    }
  ]
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-19T13:25:13.617

我刚刚解决了同样的问题。该代码正在创建一个简单的 json 文件，然后读取相同的 json 文件。Read 抛出了同样的异常。在字节转换为字符串中，我添加了编码，它解决了这个问题。

```
private void PlayWithJson() {
    File dir = new File(Environment.getExternalStorageDirectory() + "/folder");
    if (!dir.exists()) {
        dir.mkdirs();
    }
    if (dir.exists()) {
    {
        File textfile = new File(Environment.getExternalStorageDirectory() + "/folder/file.json");
        try {
            JSONObject jsonRoot = new JSONObject();
            jsonRoot.put("MagicNumber","8461684368431684684186464");
            jsonRoot.put("Note","develop android is lame");
            FileOutputStream stream = new FileOutputStream(textfile);
            byte[] jsonBytes = jsonRoot.toString().getBytes(Charset.forName("UTF8"));
            stream.write(jsonBytes);
            stream.close();
        } catch (Exception e) {
            Log.d("Write Throw Up",e.getMessage());
        }
    }
    {
        File textfile = new File(Environment.getExternalStorageDirectory() + "/folder/file.json");
        try {
            int length = (int) textfile.length();
            byte[] bytes = new byte[length];
            FileInputStream in = new FileInputStream(textfile);
            in.read(bytes);
            in.close();
            String jsonStr = new String(bytes, Charset.forName("UTF8"));
            JSONObject readJson = new JSONObject(jsonStr);
            String MagicNumber = "";
            String Note = "";
            if (!readJson.optString("MagicNumber").isEmpty()) {
                MagicNumber = readJson.optString("MagicNumber");
            }
            if (!readJson.optString("Note").isEmpty()) {
                Note = readJson.optString("Note");
            }
            String contents = new String(MagicNumber+"\n"+Note);
            Toast.makeText(getApplicationContext(), contents, Toast.LENGTH_LONG).show();
        } catch (Exception e) {
            Log.d("Read Throw Up",e.getMessage());
        }
    }
} 
```

我希望它有用。

# mysql - MySQL：规范化，这是一个有效的例外吗？

> ID：10334387
> 
> 赞同：0
> 
> 时间：2012-04-26T13:24:39.367
> 
> 标签：mysql, performance, use-case, denormalization

我们有 10 年的存档体育数据，分布在不同的数据库中。

试图将所有数据整合到一个数据库中。由于我们将处理 10 倍的记录数量，因此我现在正尝试重新设计架构以避免潜在的性能损失。

一项更改需要将团队名册表拆分为 2 个表；一个是存储固定数据的球员表：playerID、firstName、lastName、birthDate 等，另一个是存储有关球员可变数据的新花名册表：yearInSchool、jerseyNumber、位置、身高、体重等。这将除其他外，允许我们创建球员统计数据的职业生涯 4 年汇总视图。

很公平，有道理，但话又说回来，当我查看统计查询时，例如，球员汇总得分统计数据时，除了得分和日程表之外，我还必须加入球员*和*名单表，才能获得所有需要的信息。

我正在考虑非规范化的地方是玩家的名字和姓氏。如果我将球员的名字和姓氏存储在名册表中，那么我可以在统计查询等式中省略球员表，我假设这将是一个巨大的性能提升，因为每个表的总记录数将超过 100K（即大多数查询连接将跨表，每个表至少包含 100K 记录，目前最多为 300K）。

那么，在这种情况下，在哪里与非规范化划清界限呢？我假设复制名字，姓氏是可以的。一般来说，我喜欢数据的非重复/完整性，但我怀疑网站访问者更喜欢性能！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:30:35.027

首先想到的是，你确定你已经用尽了调整选项来获得良好的 SELECT 性能而不在这里进行非规范化吗？

在“没有神圣的奶牛”的意义上，我非常赞同你，并在必要时进行非规范化，但这听起来像是一个不应该*太难*获得体面性能的情况。

当然你们已经做了自己的探索，如果你已经排除了，那么个人意见是可以接受的，是的。

一个问题——如果玩家的名字改变了怎么办？它可以在您的系统中这样做吗？您会在一次 COMMIT 操作中使用事务来更新所有名册详细信息吗？对于历史记录 Db，这可能与您完全无关。

# database - XWiki - 数据库（如何创建 XWO_ID？）

> ID：10334390
> 
> 赞同：0
> 
> 时间：2012-04-26T13:24:52.797
> 
> 标签：database, xwiki

我知道 XWD_ID (xwikidoc) 是如何创建的，但我不知道 XWO_ID (xwikiobject) 是如何创建的。我知道这与表 xwikidates、xwikiintegers、xwikilargestrings 的 ID 相同……但我不知道它是如何创建的。你能帮助我吗 ？

谢谢，

卡罗琳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:23:30.127

到目前为止，所有 ID 都是手动分配的，它们是从实体的 getId() 方法中获取的。对于对象，这是[BaseElement.getId()](https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/objects/BaseElement.java#L186)，它是计算 ID 的新方法（在 4.0 中引入）。到3.5以前是[BaseCollection.getId()](https://github.com/xwiki/xwiki-platform/blob/xwiki-platform-3.5/xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/objects/BaseCollection.java#L132)，其实就是对象的[hashCode](https://github.com/xwiki/xwiki-platform/blob/xwiki-platform-3.5/xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/objects/BaseObject.java#L146)，就是文档名、XClass名、对象号拼接得到的字符串的hashcode。

# c# - 多线程，通用锁

> ID：10334394
> 
> 赞同：3
> 
> 时间：2012-04-26T13:24:59.663
> 
> 标签：c#, multithreading, locking

我有一个看起来很像这样的单例类，

```
public class CfgHandler
{
    private static readonly string ConfigDir = "Config";

    public T Get<T>() where T : class, new()
    {
        string cfgFile = Path.Combine(ConfigDir, typeof(T).FullName + ".json");

        if (File.Exists(cfgFile))
        {
            var reader = new JsonReader();
            return reader.Read<T>(File.ReadAllText(cfgFile));
        }

        return null;
    }

    public void Set<T>(T instance) where T : class, new()
    {
        string cfgFile = Path.Combine(ConfigDir, typeof(T).FullName + ".json");

        var writer = new JsonWriter();
        string json = writer.Write(instance);

        File.WriteAllText(cfgFile, json);
    }
} 
```

该类用于多线程环境，我想添加锁。但不是全班都有一把锁，因为我不希望它们之间存在竞争条件`cfg.Set<Foo>();`，`cfg.Set<Bar>()`因为它们处理不同的数据。

我考虑过将以下课程添加到`CfgHandler`，

```
private static class Locks<T>
{
    private static object _lock = new object();
    public static object Lock { get { return _lock; } }
} 
```

然后像这样锁定（用于获取和设置），

```
public void Set<T>(T instance) where T : class, new()
{
    lock(Locks<T>.Lock)
    {
        // save to disk
    }
} 
```

我错过了一些微不足道的事情吗？有没有更好的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T13:31:42.837

每个实例锁定还是每个类型锁定？

您这样做的方式（使用 static `Locks<T>.Lock`）意味着`Set<Foo>`即使在 CfgHandler 的不同实例上的每个调用都将共享相同的锁。那是你要的吗？我猜你最好只锁定每个实例 - 它会为你节省`Locks<T>`. 只需声明一个私有实例成员 ( `private object _lock = new object();`) 并使用它 ( `lock(this._lock)`)

**编辑**如果您使用的是单例实例`CfgHandler`并且想要锁定每种类型，那么我想您的方法非常好。如果您不使用单个实例，但仍想锁定每种类型，那么只需确保使用实例`Locks<T>`而不是使其成为静态实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:34:06.003

请在此处查看我的问题以获取更多详细信息：[泛型类的静态成员是否在类型之间共享](https://stackoverflow.com/questions/3438032/are-static-members-of-generic-classes-shared-between-types)

您拥有的实现简单但有效，它将阻止对`Set<T>(T Instance)`调用的并发访问正确。我唯一的建议是，如果您对该 API 进行多次并发调用，则应该限制锁定持续时间。例如，您可以完成所有工作，但只锁定对调用的`writer.write(instance)`调用，这是您在调用中似乎正在做的唯一非线程安全工作。

顺便说一句，您有可能在 Get 调用中改进您的代码，请在此处查看我的答案[有没有办法检查文件是否正在使用？](https://stackoverflow.com/questions/876473/is-there-a-way-to-check-if-a-file-is-in-use/876513#876513)关于您对现有文件的检查。

# sql-server - 是否有一些名为 SQLOS 的操作系统？？？我最近遇到过这个行话

> ID：10334395
> 
> 赞同：0
> 
> 时间：2012-04-26T13:25:00.037
> 
> 标签：sql-server, operating-system

我最近遇到了一个行话 SQLOS littel bit 谷歌搜索带我到 [http://aureus-salah.com/2011/07/09/sql-server-operating-system/](http://aureus-salah.com/2011/07/09/sql-server-operating-system/)

我想知道 SQL Server 只是 Windows 上的一个程序。它本身是操作系统吗？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:07:31.867

[在 Slava Oks 文章SQLOS - unleashed](http://blogs.msdn.com/b/slavao/archive/2005/02/05/367816.aspx)中对 SQLOS 进行了最好的描述：

> 在育空地区，我们进一步了解了非抢占式调度的概念，并创建了新的组件、库、SQLOS，有时也称为 SOS。SQLOS 是一种用户模式操作系统。它包括操作系统部分，例如非抢占式调度、内存管理、资源监控、异常处理、I/O、同步和托管子系统。请记住，SQLOS 不向 SQL Server 提供操作系统抽象层。出于可移植性目的，它不会扭曲任何 Windows API。相反，它通过利用操作系统的可扩展性和性能特征继续进一步将 SQL Server 绑定到 Windows。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:26:13.543

不，没有名为“SQLOS???”的操作系统。但是有一种叫做“SQLOS”。

它是 SQL Server 内部的一个架构层。这是一个实现细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:36:13.963

SQLOS 不是传统意义上的“操作系统”。SQLOS 是指 SQL Server 的运行方式。您可以在此处查看 Microsoft 认证主模块：http: [//bit.ly/JBIprI](http://bit.ly/JBIprI)

# objective-c - 滚动图片

> ID：10334398
> 
> 赞同：-1
> 
> 时间：2012-04-26T13:25:13.580
> 
> 标签：objective-c, ios, uiscrollview

我在objective-c上编程。如何像这样启用分页创建滚动。

![在此处输入图像描述](../Images/18d861937099e894d511b6f03dbf1fea.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-26T14:56:38.243

你可以试试这个实现 [https://github.com/100grams/HGPageScrollView](https://github.com/100grams/HGPageScrollView)

还有一个不错的自定义可可控件网站[http://cocoacontrols.com/](http://cocoacontrols.com/)，在那里你可以找到非常好的东西，所以你不需要发明轮子 =)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-26T13:46:01.587

首先检查滚动视图的属性是否启用了分页。然后根据您想要的页面设置滚动视图内容大小。

# ruby - Ruby 数组 group_by 嵌套哈希和字段

> ID：10334402
> 
> 赞同：0
> 
> 时间：2012-04-26T13:25:18.773
> 
> 标签：ruby, arrays, ruby-on-rails-3, hash

Ruby on Rails 3.2.2、Ruby 1.9.3

我有来自 Siz.requirements.all (model) 模型字段 (siz,heigth,wigth,kol) 的数组数据

```
[{:siz=>10, :heigth = 30, :wigth = 20, :kol = 24},
 {:siz=>10, :heigth = 30, :wigth = 10, :kol = 24},
 {:siz=>10, :heigth = 30, :wigth = 20, :kol = 33},
 {:siz=>10, :heigth = 20, :wigth = 20, :kol = 3},
 {:siz=>10, :heigth = 20, :wigth = 20, :kol = 5},... 
```

如何使用 group by 字段创建数组或哈希，例如：

```
[{:siz=>10 => {:heigth=>"30" => {:wigth=>"20" => {:sum_kol => sum(kol)}}},         
{:siz=>10 => {:heigth=>"30" => {:wigth=>"10" => {:sum_kol => sum(kol)}}},
{:siz=>10 => {:heigth=>"20" => {:wigth=>"20" => {:sum_kol => sum(kol)}}}] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T16:48:06.007

如果这是来自数据库，我会考虑使用数据库为您进行分组和汇总。但这是在 Ruby 中执行此操作的一种方法：

```
raw_data = [ {:siz=>10, :heigth => 30, :wigth =>20, :kol =>24},
             {:siz=>10, :heigth =>30, :wigth =>10, :kol =>24},
             {:siz=>10, :heigth =>30, :wigth =>20, :kol =>33},
             {:siz=>10, :heigth =>20, :wigth =>20, :kol =>3},
             {:siz=>10, :heigth =>20, :wigth =>20, :kol =>5} ]

# create a hash that defaults to three levels of nested hash values,
# with 0s at the leaves
summary = Hash.new do Hash.new do Hash.new do 0 end end end    

# populate it
raw_data.each do |rec|
  size, height, width, col = rec.values_at(:siz,:heigth,:wigth,:kol)
  summary[size][height][width] += col
end

summary # => {10=>{30=>{20=>57, 10=>24}, 20=>{20=>8}}} 
```

`inject`通常在 Ruby 中使用/`reduce`而不是初始化 + 更新循环会更惯用：

```
summary = raw_data.reduce(Hash.new do Hash.new do Hash.new do 0 end end end)
 do |summary,rec|
   size, height, width, col = rec.values_at(:siz,:heigth,:wigth,:kol)
   summary[size][height][width] += col
   summary
end 
```

但是由于默认的散列和在 reduce 块末尾返回散列的需要，我认为原始版本在这里更干净。

# c# - wpf中的多列自动搜索用户控件

> ID：10334404
> 
> 赞同：2
> 
> 时间：2012-04-26T13:25:22.330
> 
> 标签：c#, wpf, vb.net, user-controls, wpf-controls

我需要创建一个自动搜索控件，它将结果显示为这样的行[http://www.devexpress.com/Products/NET/Controls/WPF/Editors/lookup-editor.xml](http://www.devexpress.com/Products/NET/Controls/WPF/Editors/lookup-editor.xml)。但是，我不需要这里的图形和复选框。像外观这样的简单列表视图将起作用。

请建议如何使用 WPF 创建用户控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:05:30.820

[这里](http://weblogs.asp.net/monikadyrda/archive/2009/08/31/wpf-listcollectionview-for-sorting-filtering-and-grouping.aspx)有一篇关于排序、过滤和分组 ListView 的好文章。

基本上你将[CollectionViewSource](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.aspx)设置为 ListCollectionView。然后，您可以使用[Filter 属性](http://msdn.microsoft.com/en-us/library/cc452341.aspx)来过滤 ListView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:00:42.220

如果您使用的是 MVVM 方法，则可以执行以下操作：

*   将您的搜索文本框文本成员、ListView 的 ItemsSource 和 SelectedItem 绑定到 ViewModel
*   在 TextBox 的绑定上设置“UpdateSourceTrigger=PropertyChanged”
*   在 TextBox 绑定的属性的设置器中，添加搜索 ItemsSource 集合并设置 SelectedItem 绑定属性的逻辑。

像这样的东西：

XAML：

```
<TextBox Text="{Binding Path=SearchTerm, UpdateSourceTrigger=PropertyChanged}"/>

<ListView ItemsSource="{Binding Path=SourceCollection}" SelectedItem="{Binding Path=SelectedSearchItem, Mode=TwoWay}" /> 
```

代码：

```
public class ViewModel : INotifyPropertyChanged
{
     public string SearchTerm 
     {
          get { return searchTerm; }
          set {
                searchTerm = value;
                SelectedSearchItem = SourceCollection.FirstOrDefault(foo => foo.Name.Contains(searchTerm));
          }
     }

     public Foo SelectedSearchItem 
     { 
           get { return selecedSearchItem; } 
           set {
                 selectedSearchItem = value;
                 // Raise PropertyChanged 
           }
     }

     public ObservableCollection<Foo> SourceCollection { get; set;}
} 
```

# session - 使用 Sinatra for Facebook Canvas Application 的未定义方法“会话”

> ID：10334407
> 
> 赞同：0
> 
> 时间：2012-04-26T13:25:31.010
> 
> 标签：session, sinatra, rack

我正在使用 Sinatra 和 Rack 在我的 Facebook Canvas 应用程序中使用会话。

Facebook Canvas 中发生的错误是：

```
NoMethodError - undefined method `session' for #<Hash:0xa3ed0a0>:
    /home/apoorv/.rvm/gems/ruby-1.9.2-p320/gems/sinatra-1.3.2/lib/sinatra/base.rb:170:in `session' 
```

问题肯定出在 Rack 上，因为当我按如下方式运行我的应用程序时：

> 红宝石应用程序.rb -p 3000

它不显示任何错误。我尝试安装机架版本：1.3.6 和 1.4.1，但错误仍然存​​在。

我也尝试过使用以下代码而不是`enable :sessions`

```
use Rack::Session::Cookie, :key => 'rack.session',
                           :domain => 'static.ak.facebook.com',
                           :path => '/',
                           :secret => 'change_me' 
```

我是否需要升级/降级到较低版本的 Rack 或添加一些代码来使这个东西工作？

**已编辑**

同样在遇到这个问题之前，我在将我的应用程序集成到 Facebook Canvas 中时遇到了问题，通过在 config.ru 中添加这一行来解决这个问题：

```
set :protection, :except => [:remote_token, :frame_options] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:44:39.923

在从 Facebook 收到的 POST 请求中使用`env['rack.session']`而不是`session[]`解决了这个问题。希望这有助于解决此类问题

虽然它还**没有完全**解决并发症，因为现在`redirect to`在同一个 POST 回调中添加代码会显示：`undefined method secure?`错误。

我无法解决这个问题，尽管我所做的是避免重定向事情，而是向控制器添加一个功能来处理不同的请求。

# java - 关于 JSON 数组的问题

> ID：10334408
> 
> 赞同：1
> 
> 时间：2012-04-26T13:25:31.380
> 
> 标签：java, json, jakarta-ee, cxf

我在 JSON 对象中有一个数组属性。当数据在数组中有多个元素时，这些数组显示方括号'[]'。但是如果数据数组中有一个元素，它会在 JSON 中显示大括号'{}'。那么有没有更好的解决方案来使用方括号'[ ]'当只有单个元素时？我正在使用 CXF 框架。

或者

当只有单个元素存在时，大括号“{}”和没有方括号的原因是什么？我正在使用 CXF 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:39:54.367

将 json 对象中的数组视为 json 对象中的第二个 json 对象。你得到的是例如这个单一的 json-'array'

```
{
    "this": "is a single object",
    "another" : "object in a json array"
} 
```

请参阅填充了第二个 json 对象的“另一个”部分。

```
{
    "this": "is a single object",
    "although": [
        {
            "this": "is an object",
            "and this": "another object in a second object",
            "and this": "another object in a second object"
        }
    ]
} 
```

在第二种情况下，“虽然”是这个 json 对象。

```
{
      "this": "is an object",
      "and this": "another object in a second object",
      "and this": "another object in a second object"
} 
```

只是为了让 json 知道它是一个数组（另一个 json 对象），有`[`and `]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:28:34.090

即使你有单个元素仍然使用这样的方括号：

```
[{"somename":"somevalue"}] 
```

方括号用于分隔元素，因此如果只有一个元素，您可以使用大括号

# asp.net - 在 App_Start 中编辑 MiniProfiler.cs 后更新 MiniProfiler.MVC3 NuGet 包

> ID：10334420
> 
> 赞同：5
> 
> 时间：2012-04-26T13:26:19.997
> 
> 标签：asp.net, asp.net-mvc, nuget, mvc-mini-profiler, nuget-package

在[MiniProfiler.MVC3](http://nuget.org/packages/MiniProfiler.MVC3) NuGet 包中，它在 App_Start 中创建一个文件，用于控制 MiniProfiler 设置（要使用的 SqlFormatter、对 ViewEngines 的修改、何时启动 MiniProfiler 等）。

该文件中有很多 TODO 注释，讨论如何更改代码以执行您想要的操作。这很好，但是当更新 NuGet 包时，它会看到我已经更改了文件并且没有拉下更新的版本。这里的问题是我丢失了对该文件的任何更新，并且取决于包中的其他更新，使其无法使用（例如，在 App_Start 中修改 MiniProfiler.cs 后将 MiniProfiler.MVC3 从版本 1.9 升级到版本 2.0.1 时，该项目将不再构建，因为在 2.0.1 版本中对该文件进行了必要的更改）。

处理这个问题的最佳方法是什么？我是否应该在 App_Start 中创建自己的文件而不修改 NuGet 包中的文件，以确保在升级到最新版本的 NuGet 包时始终获得完整更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:41:35.133

您可以在 App_Start 中备份文件，更新它，然后手动合并文件，或使用合并工具。如果您使用源代码管理，您可能最终还是会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:34:36.253

Quick-and-dirty：创建你想要的文件。然后在每次使用 nugget 升级时复制/合并。或者每次编译。增加的构建时间可以忽略不计。

稍微好一点：使用 Visual Studio 中的预编译事件并比较文件。如果它们不同 - 复制或告诉用户。我想不出一种方法来在我的头顶上显示一个消息框或类似的东西，但总是可以创建一个带有编译错误的新文件，并且在“xxx 文件中的差异”附近有一些文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:53:16.447

尝试使用 mercurial 队列。你可以把你的代码拿到你想要的位置（不包括你引用的文件），然后提交。对您的文件进行更改，并将其推送到队列中。确保将其从任何未来的更新中排除（手动），然后当你想更新你的包时，将它从你的代码库中弹出。这将使它看起来像以前一样，并运行 nuget 更新。然后您可以将队列推送回代码，您的更改将重新应用。这可能需要一些摆弄，但值得一看。

以供参考：

*   [https://www.mercurial-scm.org/wiki/MqExtension](https://www.mercurial-scm.org/wiki/MqExtension)
*   [https://www.mercurial-scm.org/wiki/MqTutorial](https://www.mercurial-scm.org/wiki/MqTutorial)
*   [https://developer.mozilla.org/en/Mercurial_Queues](https://developer.mozilla.org/en/Mercurial_Queues)

# java - 使用 java（Eclipse Axis 客户端）调用 WCF Web 服务时出错

> ID：10334423
> 
> 赞同：1
> 
> 时间：2012-04-26T13:26:27.007
> 
> 标签：java, eclipse, wcf, axis, webservice-client

我在调用 Web 服务时遇到问题。我使用eclipse创建了一个Webservice客户端（新的other->web service->web service client。

客户端生成良好，我使用以下代码启动客户端：

该服务称为[http://server/Servicename.svc?wdsl](http://server/Servicename.svc?wdsl)

```
IServicenameProxy ws = new IServicenameProxy();
try 
{
    String = "testid";
    String test = ws.getName(id);
    System.out.println(test);
} 
catch (RemoteException e) { e.printStackTrace(); } 
```

在第一行我收到此错误消息：

> 2012-04-26 14:59:58,221 错误 [logforj] Turbine.handleException: null 2012-04-26 14:59:58,221 错误 [logforj] java.lang.ExceptionInInitializerError at org.apache.axis.handlers.BasicHandler.( BasicHandler.java:43) 在 org.apache.axis.client.Service.getAxisClient(Service.java:104) 在 org.apache.axis.client.Service.(Service.java:197) 在 org.tempuri.MaskinorderLocator。 （服务名称定位器.java:21）......

有任何想法吗？

# javascript - javascript在DOM中存储全局变量

> ID：10334424
> 
> 赞同：1
> 
> 时间：2012-04-26T13:26:30.440
> 
> 标签：javascript

我有一个相当大的脚本，其中包含大约 60 个全局变量。我正在考虑使用命名空间模式来封装我的脚本，并且只有一个引用一个对象的全局变量。

尽管这种模式被认为是最佳实践，但我也在考虑另一种选择：将全局变量存储在 DOM 中，隐藏在 div 中，并使用`$('#MyGlobalVar1').text()`. 这是个好主意吗？

感谢您的建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T13:28:17.257

不，这不是一个好主意。

它用非语义数据污染了 DOM，而且效率也较低。这比污染全局 JS 命名空间更*糟糕*，更糟糕的是，它只允许您存储字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T13:30:23.103

即使我建议您使用*命名空间对象*来保存和引用您的数据，您也可以简单地在代码周围放置一个外部自调用函数，以防止破坏全局对象。

所以你从

```
var global1 = true,
    global2 = true; 
```

进入

```
(function() {
    var global1 = true,
        global2 = true;

    // rest of all app logic
}()); 
```

除此之外，由于您使用的是 jQuery，您也可以使用 jQuerys[`.data()`](http://api.jquery.com/category/data/)方法。它旨在引用特定节点的数据，但它也在内部存储到 ECMAscript 对象中。

# sql - 在 sql server 中修改 HOST_NAME()

> ID：10334425
> 
> 赞同：1
> 
> 时间：2012-04-26T13:26:34.297
> 
> 标签：sql, triggers

我在表上删除了触发器，在其中我使用函数 HOST_NAME() 来检索执行操作的用户，然后我检查用户表中是否存在用户，如果不存在则我抛出 Raiserror。操作是从 ASP.NET Web 应用程序执行的，在该应用程序中，我将“工作站 ID”动态添加到连接字符串，以便在删除触发器中具有当前记录的用户名。

问题是我有时必须从 SSMS 手动运行一些脚本，并且 Host_Name() 包含 sql server 中当前登录用户的名称，但是该用户在 User 表中没有相应的行，然后发生 Raiserror。问题是如何从 SSMS 运行删除脚本并且没有 Rairserror？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:55:48.387

答案很简单，创建覆盖 Host_Name() 的自定义函数，如果 Host_Name() 包含名称为 XYZ 的用户，那么我返回在 User 表中具有相应行的系统用户的常量名称。

# windows-ce - 使用本机代码更改 Windows CE 6.0 LOCALE

> ID：10334429
> 
> 赞同：1
> 
> 时间：2012-04-26T13:26:38.740
> 
> 标签：windows-ce, locale

我正在为 WinCE 6.0 编写一个 C/C++ 应用程序，它应该让用户选择其区域设置，如日期、时间等。根据实际用户的 LOCALE，GetDateFormat() 和 GetTimeFormat() 函数会产生格式良好的字符串。这就是为什么我想以编程方式更改 Windows CE 6.0 LOCALE。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:33:54.760

使用[NLS API](http://msdn.microsoft.com/en-us/library/ee491575%28v=WinEmbedded.60%29.aspx) - 可能从[`SetUserDefaultLCID`](http://msdn.microsoft.com/en-US/library/ee491343%28v=winembedded.60%29.aspx).

# regex - 正则表达式转换成图表

> ID：10334431
> 
> 赞同：11
> 
> 时间：2012-04-26T13:26:43.647
> 
> 标签：regex, diagram

是否有任何软件可以将正则表达式转换为图表以显示有限状态机将起作用。我发现有一些图片有助于修复错误并确保正则表达式是正确的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T22:09:04.963

我真的很喜欢[http://www.regexper.com/](http://www.regexper.com/)它看起来像使用[Parcon](http://blog.parcon.opengroove.org/2011/07/generating-syntax-diagrams-from-parcon.html)。

示例（[实时链接](http://www.regexper.com/#%28hello|good%28bye%29%3F%29%5Cs[Ww]orld%5C.%3F)）：

![正则表达式可视化示例](../Images/6b240cea382b9d306402313e52451ccd.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T16:11:46.843

您应该尝试[RegexBuddy](http://www.regexbuddy.com/) - 恕我直言，它是创建、验证、高级可视化和调试的最佳工具。它还具有模拟所有流行正则表达式风格的特性和限制的独特能力，如 PCRE、Perl、JavaScript、Java 等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T22:18:20.123

我跑了一个谷歌搜索`"regex visualization" graphvis`，我发现了这个：

[http://osteele.com/archives/2006/02/reanimator](http://osteele.com/archives/2006/02/reanimator)

该工具是基于网络的。我实际上希望我能找到一个命令行工具，因为这样更容易编写脚本。尽管如此，该实现似乎有据可查，并且可以作为其他工具的起点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T08:23:15.630

如果你不介意使用 eclipse... [http://crotonresearch.com/graphrex/](http://crotonresearch.com/graphrex/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T08:19:28.023

[http://www.strfriend.com](http://www.strfriend.com)曾经有一个很好的在线工具。不幸的是，它目前似乎不可用。

![Strfriend 截图](../Images/aad5203c4775fa4310744bf21bce5f66.png)

# apache - OS X Apache 错误日志条目 - crls（Macports 到 Homebrew？）

> ID：10334433
> 
> 赞同：1
> 
> 时间：2012-04-26T13:26:45.900
> 
> 标签：apache, macports, homebrew, error-log

昨天我将本地开发环境从 MacPorts 转移到 Homebrew，一切运行良好。但是，我遇到了一些以前从未遇到过的奇怪的 apache 日志错误，想知道是否有人可以帮助诊断。

在跟踪 error_log 时，在 chrome 中进行一般网页浏览时，它们似乎每 10-15 秒发生一次：

```
[Thu Apr 26 14:19:41 2012] [error] [client 127.0.0.1] File does not exist: /Users/username/Sites/pca3.crl
[Thu Apr 26 14:20:04 2012] [error] [client 127.0.0.1] File does not exist: /Users/username/Sites/ThawtePremiumServerCA.crl
[Thu Apr 26 14:22:02 2012] [error] [client 127.0.0.1] File does not exist: /Users/username/Sites/crls
[Thu Apr 26 14:23:48 2012] [error] [client 127.0.0.1] File does not exist: /Users/username/Sites/SVRSecureG3.cer
[Thu Apr 26 14:23:49 2012] [error] [client 127.0.0.1] File does not exist: /Users/username/Sites/SVRSecureG3.crl 
```

感谢您的任何意见。

# java - Icefaces / JSF 页面不更新

When navigating from one page to another the doesn't update in my pages. Can anyone tell me why?

The setup:

Page a.xhtml:

```
&

ID：10334436

赞同：-2

时间：2012-04-26T13:26:55.440

标签：java, jakarta-ee, jsf-2, jboss, icefaces

            回答 #1

赞同：0

时间：2012-05-10T12:06:41.907

我们现在改变了导航到页面的方式。现在我们正在使用：

```
FacesContext.getCurrentInstance().getExternalContext().redirect(getViewId()); 
```

```

# regex - 如何编写一个单独识别每个表达式的正则表达式？

> ID：10334437
> 
> 赞同：0
> 
> 时间：2012-04-26T13:26:56.823
> 
> 标签：regex, jsp

我正在尝试编写一个与 JSP 中的以下代码匹配的 reg exp：

```
="<%= "Index: " + index %>" 
```

但是，如果我以通用方式将其写在与此匹配的同一行上的表达式最终会被组合：

```
value="<%= "items[" + Index + "].selected" %>" id="<%= "Checkbox" + Index %>" 
```

有人可以帮我找出 reg exp 来分别识别 value 和 id 标签，以便我可以放入搜索替换以用单引号替换外部双引号吗？

谢谢，阿列克谢蓝。

Ps 到目前为止，我有这个还不够具体：

```
"=<%=.*".*".*%>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:30:08.257

你可以试试这个：

`<%=\s*"(.+?)"(.+?)\s*%>`

之后使匹配尽可能少`?`。`+``+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:41:51.217

如果你想匹配包括引号在内的整个“<% %>”元素，无论标签内有什么（除了 %）我都会使用这个正则表达式：

```
"<%=[^%]+%>" 
```

您可能需要像这样转义代码中的引号：`\"`

它说的是：

*   匹配“<%
*   匹配所有不是 % 的东西
*   匹配 %>"

**编辑：**

如果您只对内部有双引号的元素特别感兴趣 - 使用这个：

```
"<%=([^%]*"){2}[^%]+%>" 
```

*   `([^%]*"){2}`: 匹配所有不是 % （可选）和双引号的东西 - 重复两次
*   `[^%]+`: 匹配任何剩余的字符

# jquery - 两次引用 Jquery 时 JQuery 'Object' 未定义

> ID：10334439
> 
> 赞同：3
> 
> 时间：2012-04-26T13:27:05.047
> 
> 标签：jquery, iframe

我有一个 asp.net 页面，在其标题部分我有以下内容：

```
<script type="text/javascript" src="scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="scripts/jquery-ui-1.8.19.custom.min.js"></script> 
```

而且我还有：

```
<div id="dialog" title="Dialog Title">
    <iframe src="frameDemo.aspx" scrolling="no" style="border:0px" width="500"></iframe>
</div> 
```

在 frameDemo.aspx 标头部分，我还有：

```
<script type="text/javascript" src="scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="scripts/jquery-ui-1.8.19.custom.min.js"></script> 
```

每次我按下调试按钮时，它都会打开 IE 并给我一个错误，上面写着：

> Microsoft JScript 运行时错误：“对象”未定义

我按继续，对于相同的错误消息，它一次又一次地弹出大约 5 到 6 次。最后它显示页面并且工作正常。

但是如果我复制 URL 并在另一个浏览器中打开它，它不会显示任何错误消息。或者，如果我将 Safari/Firefox 设置为调试浏览器，错误消息也不会显示。看起来只使用IE作为调试浏览器会产生错误。

此外，如果我从 frameDemo.aspx 页面中删除以下内容，该错误也不会出现：

```
<script type="text/javascript" src="scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="scripts/jquery-ui-1.8.19.custom.min.js"></script> 
```

所以看起来如果我在子 iframe 页面中引用 JQuery 两次，并在 IE 浏览器中调试，我会收到该错误消息。

有没有人遇到过这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:32:03.617

如果您无法控制 jQuery 的其他实例，请考虑使用

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

# sql - 选择最近插入的记录然后回滚

> ID：10334445
> 
> 赞同：1
> 
> 时间：2012-04-26T13:27:25.510
> 
> 标签：sql, oracle, transactions, plsql, toad

我回到了过于复杂的甲骨文世界，我想做以下事情：

*   在数据库中插入一条记录
*   再次选择记录
*   回滚一切

我创建了以下失败的代码

```
BEGIN

insert into sometable values (1, 1, 'test', 'test', 1, 'a', 1, 1, 1, 'test', 'test', 'test', 'test', 1);

select *
from sometable
where id = 1;

ROLLBACK;

END; 
```

错误信息：

```
ORA-06550: line 5, column 1:
PLS-00428: an INTO clause is expected in this SELECT statement 
```

我确信问题很明显，但我已经检查了文档并且无法从中获得任何智慧。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:32:20.153

您必须将选定的值放入变量中，例如

```
DECLARE 
  V_COUNT NUMBER;
BEGIN

insert into sometable values (1, 1, 'test', 'test', 1, 'a', 1, 1, 1, 'test', 'test', 'test', 'test', 1);

select COUNT(1) INTO V_COUNT 
from sometable
where id = 1;

ROLLBACK;

END; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T13:55:09.697

只需从 SQL*Plus 执行您的代码，无需 BEGIN..END；

```
insert into sometable values (1, 1, 'test', 'test', 1, 'a', 1, 1, 1, 'test', 'test', 'test', 'test', 1);

select *
from sometable
where id = 1;

ROLLBACK; 
```

# java - 如何从 JAVA FX 2.0 的 TableView 中删除空行

> ID：10334448
> 
> 赞同：2
> 
> 时间：2012-04-26T13:27:29.193
> 
> 标签：java, css, tableview, javafx-2

我一直在尝试从表格视图中删除空行，但我无法使用我在一些博客中阅读的 css 来做到这一点

这是我正在应用的css /---------------------------------------- ----------

```
.table-row-cell:empty {
    -fx-background-color: white;
}

.table-row-cell:empty .table-cell {
    -fx-border-width: 0px;
} 
```

/----------------------------------------------------

但我得到了错误

/------------------------------------

```
SEVERE: javafx.scene.control.Control loadSkinClass Failed to load skin 'com.sun.javafx.scene.control.skin.TableRowSkin' for control TableView@125ff34[styleClass=table-view table-row-cell]
java.lang.IllegalArgumentException: argument type mismatch
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at javafx.scene.control.Control.loadSkinClass(Unknown Source)
    at javafx.scene.control.Control.impl_cssSet(Unknown Source)
    at javafx.scene.Node.impl_cssSet(Unknown Source)
    at com.sun.javafx.css.StyleHelper.transitionToState(Unknown Source)
    at javafx.scene.Node.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.control.Control.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Node.processCSS(Unknown Source)
    at javafx.scene.Node.processCSS(Unknown Source)
    at javafx.scene.Scene.doCSSPass(Unknown Source)
    at javafx.scene.Scene.access$2900(Unknown Source)
    at javafx.scene.Scene$ScenePulseListener.pulse(Unknown Source)
    at com.sun.javafx.tk.Toolkit.firePulse(Unknown Source)
    at com.sun.javafx.tk.quantum.QuantumToolkit.pulse(Unknown Source)
    at com.sun.javafx.tk.quantum.QuantumToolkit$8.run(Unknown Source)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(Unknown Source)
    at com.sun.glass.ui.win.WinApplication$2$1.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:722)

SEVERE: javafx.scene.control.Control impl_processCSS The -fx-skin property has not been defined in CSS for TableView@125ff34[styleClass=table-view table-row-cell] 
```

/---------------------------------------------------- ------------

有人知道如何解决吗？或任何其他方式来删除空行。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:00:03.393

您的 css 适用于 JavaFX 2.1。接下来试试：

*   更新到 JavaFX 2.1
*   从您的 css 文件中删除除这些类之外的所有内容

![在此处输入图像描述](../Images/77dc4a314eda2d888049c6177af112d7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-23T21:41:40.367

这是解决方案：在您的 css 文件中添加以下内容：

```
.table-row-cell:empty:odd, .table-row-cell:empty:even {
    -fx-background-color: transparent;
} 
```

测试并为我工作

[点击显示我的表格视图](https://i.stack.imgur.com/0nYz7.png)

# php - PHP 我的类加载器，当有多个依赖项时自动加载依赖项错误

> ID：10334450
> 
> 赞同：0
> 
> 时间：2012-04-26T13:27:47.430
> 
> 标签：php, oop, frameworks, recursion, classloader

我正在制作自己的框架，它具有创建类的功能。如果 classA 有一个名为 classes 的属性，则意味着 classA 需要 classes 属性中的任何类，该属性是 key=className 和 value=classInstance 的数组。

即，如果加载了此类，它将创建 foo 和 biz 实例并用它们替换 null

```
class foo
{
    public $classes=array('bar'=>null, 'biz'=>null);
} 
```

如果只有一个依赖项，我的框架可以正常工作，但是当有更多依赖项时，只有数组中的最后一个能成功加载。其余的都设置为 false =/ 这令人费解，因为它应该设置一条消息到带有错误的属性，但它不是......

无论如何，这里是处理加载和错误的主类，创建类的方法是 create()。

```
<?php
session_start();
class yamiko 
{
    public $paths=array
            (
        'php'=>'_php/',
        'js'=>'_js/',
        'css'=>'_style/',
        'template'=>'_template/'
            );
    public $url=null;#defined in constructor
    public $classes=array();
    private $errors=array();
    private $warnings=array();

    /*
     * define $this->url
     * @RETURN: none
     */
    public function __construct() 
    {
        $this->url=urlencode($_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"]);
    }

    ###################
    ##### CLASSES #####
    ###################

    /*
     * create a class instance
     * @RETURN OBJECT||false: returns reference to object of false if failed 
     * @PARAM $class STRING: path and class name.
     */
    public function &create($class, $php=false, $c=0)
    {
        #check if php class
        if($php)
        {
            #make instance
            if(!$this->get_class($class))
            {
                $this->classes[$class]=new $class;
            }
            return $this->classes[$class];
        }else#non php class
        {
            $path=$class;
            $pos=strrpos($path, '/');
            $class=substr($path, $pos+1);
            $path=substr($path, 0, $pos+1);
            if($this->get_class($class))
                return $this->classes[$class];#return existing class
            if(file_exists($path.$class.'.php'))
            {
                include_once($path.$class.'.php');
            }  else
            {
                $this->set_error("unable to include $path$class");
                return false;
            }
            $this->classes[$class]=new $class;
            #get required classes for class
            if(property_exists($this->classes[$class], 'classes'))#if class has a classes property
            {
                foreach($this->classes[$class]->classes as $k=>$v)
                {
                    $required_class=$this->get_class($k);#check if it already exist
                    if(!$required_class)
                    {
                        $required_class=&$this->create($path.$k, false, $c+1);
                        if(!$required_class)
                        {
                            $this->set_error("Class $class requires class $k");
                            return FALSE;
                        }
                    }
                    $this->classes[$class]->classes[$k]=&$required_class;
                }
            }
            return $this->classes[$class];
        }
    }

    /*
     * gets a references to a class or returns false
     * @RETURN OBJECT||false: returns reference to class or false if not found
     */
    public function &get_class($class)
    {
        if($this->classes[$class] instanceof $class)
            return $this->classes[$class];
        $this->set_warn("$class does not exist");
        return false;
    }

    ###################
    ##### ERRORS ######
    ###################

    public function set_error($e)
    {
        $this->errors[]=$e;
    }

    public function get_error($r)
    {
        if(empty($this->errors))
            return false;
        switch ($r)
        {
            case 'html':
                $html='<ul>';
                foreach($this->errors as $k=>$v)
                {
                    $html.="<li><b>ERROR $k:</b> $v </li>";
                }
                $html.='</ul>';
                return $html;
            break;
            default:#array
                return $this->errors;
                break;
        }
    }

    ####################
    ##### WARNINGS #####
    ####################

    public function set_warn($w)
    {
        $this->warnings[]=$w;
    }

    public function get_warn($r)
    {
        if(!empty($this->warnings))
            return false;
        switch ($r)
        {
            case 'html':
                $html='<ul>';
                foreach($this->warnings as $k=>$v)
                {
                    $html.="<li><b>WARNING $k:</b> $v </li>";
                }
                $html.='</ul>';
                return $html;
            break;
            default:#array
                return $this->warnings;
                break;
        }
    }

    ################
    ##### DEBUG ####
    ################

    public function debug($msg, $r)
    {
        if(!is_string($msg))
        {
            $this->set_error('yamiko->debug msg is not a string');
            return false;
        }
        if($msg!='li'&&$msg!='br'&&$msg!='h1'&&$msg!='h2'&&$msg!='h3')
        {
            $this->set_error('yamiko->debug PARAM $r must be li, br, h1, h2, or h3');
            return false;
        }   
        switch($r)
        {
            case 'li':
                echo "<li>$msg</li>";
                break;
            case 'br':
                echo "$msg<br />";
                break;
            case 'h1':
                echo "<h1>$msg</h1>";
                break;
            case 'h2':
                echo "<h2>$msg</h2>";
                break;
            case 'h3':
                echo "<h3>$msg</h3>";
                break;
        }
    }
}
global $yamiko;
$yamiko=new yamiko;
$GLOBALS['yamiko']=&$yamiko;
?> 
```

我试图加载的类设置如下，只有第一个类加载。我切换了顺序，再次只加载第一类。

```
<?php
class account
{
    public $classes=array
    (
'yamiko_mysqli'=>NULL,
'yamiko_encrypt'=>NULL
    );
}
?> 
```

# java - 从 Tomcat 下的 Web 应用程序中读取 conf.properties 文件

> ID：10334456
> 
> 赞同：2
> 
> 时间：2012-04-26T13:28:08.317
> 
> 标签：java, tomcat

我将带有属性的文件放入 *tomcat_folder*/conf 并尝试读取它：

```
InputStream input = this.getClass().getClassLoader().getResourceAsStream("conf.properties");
properties.load(input); 
```

但实际上我收到'null'。我试图打印出当前文件夹，它显示“home/username”文件夹（我想从当前文件夹进入 conf 文件夹）。

“catalina.properties”包含“shared.loader=”，所以理论上这个文件应该从那里读取，但它不是......

有没有关于如何做到这一点的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T22:45:17.827

我找到了解决方案。我将 ${catalina.home}/conf 添加到 catalina.properties -> shared.loader

```
shared.loader=${catalina.home}/conf 
```

和

```
this.getClass().getClassLoader().getResourceAsStream("conf.properties"); 
```

开始正确打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:32:53.247

我认为调用 this.getClass().getClassloader() 时获得的类加载器不是共享的。实际上，这取决于“this”在哪里。

我不确定您是否能够通过类加载器获取此文件，即使我认为当前的类加载器应该委托。您也许可以通过一些 tomcat api 获取共享类加载器。

您可以尝试 CATALINA_HOME/BASE 属性以通过文件系统访问文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:35:38.847

尝试

```
properties.load(Thread.currentThread().getContextClassLoader().
        getResource("filename.properties").openStream());` 
```

在 JBoss 6 上为我工作。

# c - 使用信号处理程序捕获 ctrl-c 但由于回调线程中的无限循环而无法退出应用程序

> ID：10334457
> 
> 赞同：0
> 
> 时间：2012-04-26T13:28:09.600
> 
> 标签：c, linux, pthreads, signals

使用信号处理程序捕获 ctrl-c 但由于回调线程中的无限循环而无法退出应用程序。

我有一个信号处理程序来捕获 ctrl-c 并在处理程序中执行一些操作并执行 exit(0); 但是在我的应用程序中，如果任何回调线程正在运行无限循环，即使在 ctrl-c 之后我也无法退出应用程序。

我尝试了 pthread_kill、pthread_exit、pthread_cancel 但没有任何效果。

仅供参考，我没有标记 while(1) 循环的灵活性，因为我有太多。我只是想退出应用程序，请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:36:38.627

试试[`_exit(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/exit.2.html)吧，它不会运行退出钩子。

# actionscript-3 - MACOS 上的本机菜单：如何实现“隐藏”和隐藏其他

> ID：10334459
> 
> 赞同：0
> 
> 时间：2012-04-26T13:28:11.467
> 
> 标签：actionscript-3, apache-flex, air, flash-builder

我使用 Flash buider 4.6，我喜欢为我的 AIR 应用程序模仿 Mac Os 应用程序菜单。
在这个菜单中，我想添加：关于我的应用程序、隐藏我的应用程序和隐藏其他。

对于第一个命令，没问题，但我不知道如何继续使用 AS3 命令进行隐藏和隐藏其他命令。

你能帮我解决这个问题吗？

谢谢

请参阅下面的示例

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<fx:Script>

    <![CDATA[
        import mx.controls.Alert;

        // Preserve the original menus for the purposes of this demo (MacOS)
        private var oldMenu:NativeMenu = NativeApplication.nativeApplication.menu;
        private var newWindow:NativeWindow;

        private function showMenus():void
        {
            //For Windows
            if (NativeWindow.supportsMenu)
            {
                // On Windows, we need to create a window so we can add a menu (Tour de Flex has no Chrome)
                var options:NativeWindowInitOptions = new NativeWindowInitOptions(); 
                options.systemChrome = NativeWindowSystemChrome.STANDARD; 
                options.transparent = false; 
                newWindow = new NativeWindow(options); 
                newWindow.width = 500; 
                newWindow.height = 100; 
                newWindow.title = "Demonstration of Native Menus for Windows applications";
                newWindow.menu = createMenu();
                newWindow.alwaysInFront = true; 
                newWindow.activate();    

                msg.text = "Window Menu (Windows) - A NativeWindow has been created to demonstrate the menu";
            }

            // On MacOS, replace the current app menu with our new menu
            if (NativeApplication.supportsMenu)
            {
                // In 
                NativeApplication.nativeApplication.menu = createMenu();
                msg.text = "Application Menu (MacOS) - The Application menu has been replaced with demo menu";
            }
        }

        private function createMenu():NativeMenu
        {
            var menu:NativeMenu = new NativeMenu();
            var menuItem1:NativeMenuItem = new NativeMenuItem("Takeoff");
            menuItem1.submenu = createTakeoffMenu();
            menuItem1.addEventListener(Event.SELECT, selectHandler);
            menu.addItem(menuItem1);

            var menuItem2:NativeMenuItem = new NativeMenuItem("Landing");
            menuItem2.submenu = createLandingMenu();
            menuItem2.addEventListener(Event.SELECT, selectHandler);
            menu.addItem(menuItem2);
            return menu;
        }

        private function createTakeoffMenu():NativeMenu
        {
            var menu:NativeMenu = new NativeMenu();
            var takeoffItem1:NativeMenuItem = new NativeMenuItem("Gear Up");
            takeoffItem1.checked = true;
            takeoffItem1.addEventListener(Event.SELECT, selectHandler);
            menu.addItem(takeoffItem1);
            var takeoffItem2:NativeMenuItem = new NativeMenuItem("Retract Flaps");
            takeoffItem2.checked = true;
            takeoffItem2.addEventListener(Event.SELECT, selectHandler);
            menu.addItem(takeoffItem2);
            return menu;
        }

        private function createLandingMenu():NativeMenu
        {
            var menu:NativeMenu = new NativeMenu();
            var landingItem1:NativeMenuItem = new NativeMenuItem("Gear Down");
            landingItem1.addEventListener(Event.SELECT, selectHandler);
            menu.addItem(landingItem1);
            var landingItem2:NativeMenuItem = new NativeMenuItem("Extend Flaps");
            landingItem2.addEventListener(Event.SELECT, selectHandler);
            menu.addItem(landingItem2);
            var landingItem3:NativeMenuItem = new NativeMenuItem("Shutdown");
            landingItem3.addEventListener(Event.SELECT, selectHandler);

            var shutdownMenu:NativeMenu = new NativeMenu();

            // Create submenu
            var shutdownItem1:NativeMenuItem = new NativeMenuItem("Turn off avionics");
            shutdownItem1.addEventListener(Event.SELECT, selectHandler);
            shutdownMenu.addItem(shutdownItem1);

            var shutdownItem2:NativeMenuItem = new NativeMenuItem("Pull Mixture");
            shutdownItem2.addEventListener(Event.SELECT, selectHandler);                
            shutdownMenu.addItem(shutdownItem2);            

            var shutdownItem3:NativeMenuItem = new NativeMenuItem("Turn off Mags");
            shutdownItem3.addEventListener(Event.SELECT, selectHandler);                
            shutdownMenu.addItem(shutdownItem3);

            // Add submenu to parent menu
            landingItem3.submenu = shutdownMenu;

            menu.addItem(landingItem3);
            return menu;
        }

        private function selectHandler(event:Event):void 
        {
            // Put code here to handle the selection
            Alert.show(event.target.label);
        }

        // Cleanup when we leave
        private function revertMenus():void {
            if (NativeApplication.supportsMenu) {
                NativeApplication.nativeApplication.menu = oldMenu;
            }
            if (NativeWindow.supportsMenu) {
                newWindow.close();
            }
        }
    ]]>
</fx:Script>
<s:VGroup horizontalCenter="0" top="10">
    <s:Label id="msg" width="100%" color="#FFFFFF" textAlign="center"/>
    <s:Button label="Show Menus" click="showMenus()"/>
    <s:Button label="Reset" click="revertMenus()"/>    
</s:VGroup> 
```

还有截图

![在此处输入图像描述](../Images/992fb8867cc8d6abee69d9d0d8e2b9b9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:52:50.740

我找到了解决方案

```
 // Assign application menu (Mac OS X)

        if(NativeApplication.supportsMenu){
            var appMenu:NativeMenu = NativeApplication.nativeApplication.menu;
            while (appMenu.items.length > 1)
            {
                appMenu.removeItemAt(appMenu.items.length - 1);
            }

            appMenu.addSubmenu(creerMenuFichier(),"Fichier");
            appMenu.addSubmenu(creerMenuEdition(),"Edition");
            appMenu.addSubmenu(creerMenuModule(),"Modules");
            appMenu.addSubmenu(creerMenuActions(),"Actions");
            appMenu.addSubmenu(creerMenuHelp(),"Aide");

            // Attach event listener routine to root menu
            appMenu.addEventListener(Event.SELECT, dispatchMenuCommand);

        } 
```

代替

```
 NativeApplication.nativeApplication.menu = createMenu(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:06:10.957

这些选项由 OS X 提供，您无需执行任何操作即可获得这些选项。

# sencha-touch - 使用 sencha touch 2 表单在 textfiend 中启用掩码？

> ID：10334471
> 
> 赞同：1
> 
> 时间：2012-04-26T13:28:41.067
> 
> 标签：sencha-touch, sencha-touch-2

是否可以在 ST2 中的文本字段上设置掩码？

```
{
    xtype: 'textfield',
    name: 'phonenumber',
    label: 'Your phone number',
    mask: '(999) 999-9999'
}, 
```

在 Ext 中工作但不在 ST 中，我“认为”ST 是建立在 Ext 之上的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:43:55.100

Sencha Touch 中没有直接属性可以完成这项工作。

所以，你可能需要做这样的事情..

```
{
    xtype: 'textfield',
    name: 'phonenumber',
    label: 'Your phone number',
    placeHolder: '(999) 999-9999',
    listeners : {
      keyup : function( ) {
        // Code that checks the i/p value according to placeHolder goes here ...
      } 
    }
}, 
```

顺便说一句，Sencha Touch 论坛上有一篇[**帖子**](http://www.sencha.com/forum/showthread.php?190303-Mask-or-format-TextField)。

希望对你有帮助！

# windows-phone-7 - 我如何知道我的列表框已完全填充并显示在 WP7 的页面上

> ID：10334473
> 
> 赞同：3
> 
> 时间：2012-04-26T13:28:44.323
> 
> 标签：windows-phone-7, listbox, progress-bar, populate

我如何知道列表框何时完全填充并在 WP7 中显示给用户。这是因为根据数据显示列表框文本通常需要 1 到 2 秒，直到我需要向用户显示进度条而不是空白屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:45:30.580

不确定这是否是您想要的，但您始终可以监视[LayoutUpdated](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.layoutupdated%28v=vs.95%29.aspx)事件：每次 ListBox 可见内容更改时它都会更改！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T16:14:23.853

您所要做的就是使用一个自定义操作 ( `Action<T>`)，只要在后端完成加载，就会触发该操作。我假设您有一个执行加载的方法，因此将该操作作为参数传递 - 每当它被触发时，这意味着该方法已完成数据处理。

# mysql - mysql：涉及日历表的RIGHT JOIN查询速度问题

> ID：10334483
> 
> 赞同：0
> 
> 时间：2012-04-26T13:29:17.913
> 
> 标签：mysql, database-design, join

更新：似乎问题（如各种人所述）是将日期时间字段更改为查询中的日期字段。

使用`DATE( all_griefs_tbl.actioned_date`太慢，有没有更快的方法，既不将 actioned_date 更改为日期字段，也不将其拆分为日期和时间字段？

我有 2 个表，一个包含大量记录，其中包含状态和日期时间字段，另一个是日期从 2008 年到 2015 年的日历表。

我想得到的是一个时间段内的每个日期以及每天“接受”的记录数 - 即使该计数为零 - 这看起来像这样：

```
| Date      | number_accepted |
 ----------------------------
 2012-03-01     723
 2012-03-02     723
 2012-03-03     1055
 2012-03-04     1069
 2012-03-05     0
 2012-03-06     615
 2012-03-07     0
 2012-03-08     1072
 2012-03-09     664
 2012-03-10     859
 2012-03-11     0
 2012-03-12     778
 2012-03-13     987 
```

我尝试了以下方法，但它仅在少量数据样本（-1000 行）上足够快。我需要在至少 600k 行上运行良好的东西

```
SELECT calendar.datefield AS Date, 
       COUNT( all_griefs_tbl.actioned_status ) AS total_griefs
FROM all_griefs_tbl
RIGHT JOIN calendar 
   ON ( DATE( all_griefs_tbl.actioned_date ) = calendar.datefield )
   AND all_griefs_tbl.actioned_status = 'accepted'
WHERE calendar.datefield < CURDATE( )
GROUP BY calendar.datefield 
```

谢谢

编辑：按要求执行计划

```
 id select_type     table           type    possible_keys     key               key_len     ref     rows    Extra
 1  SIMPLE          calendar        range   PRIMARY           PRIMARY           3           NULL    1576    Using where; Using index
 1  SIMPLE          all_griefs_tbl  ref     actioned_status   actioned_status   153         const   294975 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:58:45.560

一些想法...

首先，尽管您声明希望在 db 查询中没有返回任何值的天数，但实际上我会在处理结果集的任何地方进行此检查。每当您进行连接时，您的查询都会变得更加复杂，并且需要更多的内存来处理它们。在这种情况下，我不会认为您使用日历表是对关系数据库的特别好的使用。

编辑：澄清一下，查询是如何被调用的？即是否有一些程序（您正在开发）访问数据库、运行查询并显示结果？如果是这样，我建议让这个程序在演示之前处理结果。

其次，如果您致力于“加入”，那么您确实应该有一个索引，`all_griefs_tbl.actioned_date`因为这是您进行联接的列。或者，您可以在`calendar.datefield`.

第三，你需要使用该功能`DATE(all_griefs_tbl.actioned_date)`吗？这不是已经约会了吗？（不确定您的数据类型，但如果这和`calendar.datefield`不同的数据类型，这看起来像糟糕的数据库设计。）

编辑：根据您所说的，您可能希望将`all_griefs_tbl.actioned_date`日期列`all_griefs_tbl.actioned_date`和时间戳列分成两列`all_griefs_tbl.actioned_time`。目前，您`DATE()`在每一行上运行此函数`all_griefs_tbl`以进行连接 - 这将很快使查询变得迟缓。这也将允许您在*日期*和*时间*列上添加索引，这也将提高连接的性能（鉴于您当前的数据库设计，我对索引`actioned_date`没有帮助并不感到惊讶 - 我宁愿期待那，由于该`DATE()`功能，如果您使用当前列`EXPLAIN`上的索引重新运行`actioned_date`，它不会使用此索引显示它`all_griefs_tbl`。）

第四，您可能需要考虑存储在`all_griefs_tbl.actioned_status`. 这可以用布尔值代替吗？这将更有效地存储和处理数据。（虽然同样，这取决于您的数据库设计。）

编辑：您可以考虑更改`all_griefs_tbl.action_status`为较小的数据类型 - 我希望它当前是 varchar，但您可以轻松地将其更改为单个（或小）char 数据类型，甚至更改为多个布尔值。但是，我不认为这会成为主要的性能开销，并且实际上是一个更复杂的数据库设计决策，具体取决于您的项目需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T16:41:55.137

我建议将您的`actioned_date`from datetime 拆分为 2 个单独的日期和时间列，可以这样说`actioned_date`，`actioned_time`这样您就可以将您的第一个加入条件从

```
ON ( DATE( all_griefs_tbl.actioned_date ) = calendar.datefield ) 
```

到

```
ON ( all_griefs_tbl.actioned_date = calendar.datefield ) 
```

并添加索引

```
ALTER TABLE all_griefs_tbl ADD INDEX g_status_date( actioned_status, actioned_date, actioned_time ); 
```

它可能会使您对具有 600k 行的表立即进行查询。

# image - 如何在 JSF + Primefaces 3.2 中渲染图像

> ID：10334485
> 
> 赞同：4
> 
> 时间：2012-04-26T13:29:29.473
> 
> 标签：image, jsf, primefaces, rendering

我一直在尝试在 Primefaces 应用程序中渲染图像。这在手风琴面板外工作正常：

```
<h:graphicImage library="images" name="testi.JPG" /> 
```

但是当我尝试在手风琴面板中使用它时，它不再工作了：

```
<p:accordionPanel>
    <p:tab title="Godfather Part I">
        <h:panelGrid columns="2" cellpadding="10">
            <h:graphicImage  library="images" value="testi.JPG" /> 
```

Primefaces中有一个图像标签，但根本没有库标签，所以我也尝试了：

```
<p:tab title="Godfather Part II">
        <h:panelGrid columns="2" cellpadding="10">
                    <p:graphicImage url="/resources/images/testi.jpg" /> 
```

那么有人可以告诉我如何做到这一点以及正确的方法是什么，因为有很多不同的选择，但在我的情况下没有任何效果？如何将通用图像文件夹添加到我的应用程序中，根本没有路径等？

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><link type="text/css" rel="stylesheet" href="/temp/faces/javax.faces.resource/theme.css?ln=primefaces-flick" /><link type="text/css" rel="stylesheet" href="/temp/faces/javax.faces.resource/primefaces.css?ln=primefaces&amp;v=3.2" /><link type="text/css" rel="stylesheet" href="/temp/faces/javax.faces.resource/layout/layout.css?ln=primefaces&amp;v=3.2" /><script type="text/javascript" src="/temp/faces/javax.faces.resource/jquery/jquery.js?ln=primefaces&amp;v=3.2"></script><script type="text/javascript" src="/temp/faces/javax.faces.resource/primefaces.js?ln=primefaces&amp;v=3.2"></script><script type="text/javascript" src="/temp/faces/javax.faces.resource/layout/layout.js?ln=primefaces&amp;v=3.2"></script>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Primefaces Template</title></head><body> 
```

* * *

查看源代码给出：这是在手风琴面板之外，它正在工作：

```
<h:graphicImage library="images" name="testi.JPG" /> 
```

------------------->HTML:

```
<img src="/temp/faces/javax.faces.resource/testi.JPG?ln=images" /> 
```

* * *

在 Accordion 面板中，使用在面板外工作的同一行代码：

```
<p:tab title="Godfather Part I">
        <h:panelGrid columns="2" cellpadding="10">
            <h:graphicImage  library="images" value="testi.JPG" />
            <h:outputText value="The story begins as Don Vito Corleone, 
```

------------------>HTML:

```
<td><img src="testi.JPG" /></td>
<td>The story begins as Don Vito Corleone, 
```

* * *

使用 Primefaces 标签：

```
<p:tab title="Godfather Part II">
        <h:panelGrid columns="2" cellpadding="10">
                    <p:graphicImage url="/resources/images/testi.jpg" /> 
```

----------------->HTML：

```
<td><img id="j_idt29:j_idt32" src="/temp/resources/images/testi.jpg" alt="" /></td> 
```

* * *

编辑：这是有效的，但为什么？

```
<h:graphicImage value="#{resource['images:testi.JPG']}"/> 
```

没有S的资源！！

谢谢！萨米人

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T16:34:16.027

您的错误是您使用`value`了属性而不是`name`属性：

```
<h:graphicImage library="images" value="testi.JPG" /> 
```

引用资源时，**必须**改用`name`属性。

```
<h:graphicImage library="images" name="testi.JPG" /> 
```

该`value`属性即指向 URL，而不是资源名称。

* * *

**与具体问题无关**，您并不完全了解如何`library`正确使用属性。它不打算将图像、CSS 和 JS 文件彼此分开。在那里，您已经有了`<h:graphicImage>`,`<h:outputStylesheet>`和`<h:outputScript>`标签的唯一标记名。该`library`属性应该用于模块化 Web 应用程序，其中图像/CSS/JS 文件存储在外部 JAR 文件中。该`library`属性允许您对它们进行版本控制并由主 web 应用程序覆盖它们。另请参阅[JSF 资源库的用途是什么以及应该如何使用它？](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)

修复您`<h:graphicImage>`以**删除**错误的`library`属性用法：

```
<h:graphicImage name="images/testi.JPG" /> 
```

或者引入一个完全值得的特定于 webapp 的库，您可以在其中放置所有资源：

```
<h:graphicImage library="default" name="images/testi.JPG" /> 
```

# java - 复制数据的有效方法

> ID：10334486
> 
> 赞同：0
> 
> 时间：2012-04-26T13:29:37.487
> 
> 标签：java, cassandra, replication

我们正在编写高负载订单处理引擎。每个集群节点处理一组合约并将操作日志写入本地文件。这个文件应该分布在一些其他节点上（为了容错）。如果节点发生故障，应该有办法尽快在其中一个复制节点上恢复它的状态。目前我们使用 cassandra，但分区器存在一些问题：无法指定特定表应使用哪些节点。

所以我们需要复制文件。有解决办法吗？

**编辑**：峰值负载约为每秒 20 万条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:44:31.200

关于您的 Cassandra 问题：虽然每个表/列族不能有不同的复制布局，但每个键空间*可以*有不同的布局。这包括像您这样的案例，听起来您希望某些节点集 S1 完全负责数据的某些部分，而其他一些节点集 S2 负责另一部分。

如果您将 S1 和 S2 表示为 Cassandra 的不同数据中心（通过 PropertyFileSnitch 或其他方式），那么您可以将键空间 K1 配置为在 S1 上有 X 个副本，而在 S2 上没有副本，反之亦然。

# objective-c - UIView 的 drawRect 在后台调用时

> ID：10334488
> 
> 赞同：0
> 
> 时间：2012-04-26T13:29:44.263
> 
> 标签：objective-c, xcode, uiview, multitasking, drawrect

我正在开发一个多任务应用程序，该应用程序在被发送到后台后会持续一段时间。我注意到当应用程序在后台时，UIView 之一中的 drawRect 方法会不断被调用。这个 drawRect 方法负责在应用程序运行时更新用户界面。

对此的最佳做法是什么？我不想浪费 CPU 周期来绘制用户看不到的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:38:09.093

也许这个问题的答案可能会帮助你： [检查 iOS 应用程序是否在后台](https://stackoverflow.com/questions/5835806/check-if-ios-app-is-in-background)

检查应用程序是否在后台运行，如果是...不要绘制任何东西。

# c# - 图像 src 不显示处理程序提供的外部图像

> ID：10334495
> 
> 赞同：2
> 
> 时间：2012-04-26T13:30:10.497
> 
> 标签：c#, asp.net

我有一个处理程序，它提供来自外部网站的图像。这本身就可以正常工作。

但是当我在图像 src 属性中使用处理程序时，它不起作用。

这是我对处理程序的调用：

```
<img src="myhandler.ashx?image=http://nssdc.gsfc.nasa.gov/image/planetary/venus/gal_venus_37218.jpg" / > 
```

这是处理程序的代码：

```
using System;
using System.Collections;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Xml.Linq;
using System.Drawing;
using System.Net;
using System.IO;
using System.Drawing.Imaging;

namespace MumsChoice.Portal.UI.Handlers
{
    /// <summary>
    /// Summary description for $codebehindclassname$
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    public class ExternalImageHandler : IHttpHandler
    {

        public void ProcessRequest(HttpContext context)
        {
            Bitmap bitOutput = null;
            Stream stream = null;
            string contentType = string.Empty;
            try
            {
                WebRequest req = WebRequest.Create(context.Request.QueryString["image"]);
                WebResponse response = req.GetResponse();
                contentType = response.ContentType;
                stream = response.GetResponseStream();
                bitOutput = new Bitmap(stream);
            }
            catch
            {
                bitOutput.Dispose();
            }
            finally
            {
                stream.Close();
                stream.Dispose();
                stream = null;
            }

            ImageFormat format;
            switch (contentType)
            {
                case "image/png":
                    format = ImageFormat.Png;
                    break;
                case "image/gif":
                    format = ImageFormat.Gif;
                    break;
                default:
                    format = ImageFormat.Jpeg;
                    break;
            }

            context.Response.ContentType = contentType;
            bitOutput.Save(context.Response.OutputStream, format);
            bitOutput.Dispose();
            return;  
        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    }
} 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-26T13:37:13.150

尝试在最后添加：

```
Response.Flush();
Response.End(); 
```

# wpf - 调度程序：中止调度程序操作

> ID：10334497
> 
> 赞同：1
> 
> 时间：2012-04-26T13:30:23.473
> 
> 标签：wpf, multithreading, datagrid, observablecollection, dispatcher

我想在线程中将项目添加到 DataGrid。

我的用户控件有视图模型：

```
public class Contact
{
    public string Name { get; set; }
    public string Phone { get; set; }
}

public class ContactGridViewModel
{
    public ContactGridViewModel()
    {
        Items = new ObservableCollection<Contact>();
    }

    public ObservableCollection<Contact> Items { get; private set; }

    public Dispatcher Dispatcher
    {
        get { return Dispatcher.CurrentDispatcher); }
    }
    private DispatcherOperation LastOperation { get; set; }

    public void Update(IEnumerable<Contact> contacts)
    {
        if (LastOperation != null) LastOperation.Abort();

        Items.Clear();
        foreach (var item in contacts)
            LastOperation = Dispatcher.BeginInvoke(
                    DispatcherPriority.Background,
                    new ParameterizedThreadStart(o => Items.Add(o))),
                    item);
    }
} 
```

有标记示例：

```
<!--DataContext="{Binding ContactGridViewModel}-->

<DataGrid ItemsSource="{Binding Items, Mode=OneWay}">
  <DataGrid.Columns>
    <DataGridTextColumn Header="Name" Binding="{Binding Path=Name}" />
    <DataGridTextColumn Header="Phone" Binding="{Binding Path=Phone}" />
  </DataGrid.Columns>
</DataGrid> 
```

在第二次执行 Update 方法后，如果第一个集合没有完全添加，DataGrid 将包含第一个集合的一部分和完整的第二个集合。

```
// contactList1 and contactList2 are IEnumerable<Contact> objects
Model.Update(contactList1);
Model.Update(contactList2); 
```

我尝试中止 DispatcherOperation，但它并没有停止将联系人添加到 Items 属性中。

您能告诉我将对象添加到 DataGrid ItemsSource 的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:35:26.247

在您的`Update(contactList1)`方法中，您`Dispatcher.BeginInvoke()`为contactList1 中的每个项目启动一个，但如果您输入`Update(contactList2)`您只中止一次LastOperation，这不是完整的foreach，而是单个`Items.Add()`。

尝试这样的事情（未经测试）：

```
public void Update(IEnumerable<Contact> contacts)
{
    if (LastOperation != null) LastOperation.Abort();

    Items.Clear();
    LastOperation = Dispatcher.BeginInvoke(
        DispatcherPriority.Background,
        new ParameterizedThreadStart(o => { foreach (var item in o) Items.Add(item); }),
        contacts);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:55:30.837

您应该收集列表中的所有 DispatcherOpretations，然后将它们全部中止。

```
public class ContactGridViewModel
{
    public ContactGridViewModel()
    {
        Items = new ObservableCollection<Contact>();
        LastOperations = new List<DispatcherOperation>();
    }

    public ObservableCollection<Contact> Items { get; private set; }
    private ICollection<DispatcherOperation> LastOperations { get; set; }

    public Dispatcher Dispatcher
    {
        get { return Dispatcher.CurrentDispatcher); }
    }

    private void StopUpdating()
    {
        foreach (var operation in LastOperations)
        {
            operation.Abort();
        }
        LastOperations.Clear();
    }

    public void Update(IEnumerable<Contact> contacts)
    {
        StopUpdating();

        Items.Clear();
        foreach (var item in contacts)
            LastOperations.Add(Dispatcher.BeginInvoke(
                    DispatcherPriority.Background,
                    new ParameterizedThreadStart(o => Items.Add(item))),
                    item));
    }
} 
```

# vba - VBA - 搜索和删除重复项

> ID：10334498
> 
> 赞同：0
> 
> 时间：2012-04-26T13:30:24.820
> 
> 标签：vba, excel, excel-2011

我正在寻找一种我没有 VBA 知识来编写自己脚本的算法。所以我被困住了。这不是因为缺乏努力尝试，因为我已经尝试过了（另外，这段代码是我更大的 VBA 代码的最后一部分）我只是缺乏知识/经验/技能......

基本上，我有一个 Excel 文件。在这个文件中有一个工作表，“sheet1”。Sheet1 包含多行数据。sheet1 中包含的行数可以在 1 到 n 之间变化。有时，我可能有 50 个，而有时我可能有 30 个，等等。一致的是本书的布局，即我在 A 列中有代码，用于标识数据库中的产品。

我想做的是：

**1.**扫描工作表中的空行（由于工作簿的生成方式，我有时会有空行）并将其删除。这些空白行有时位于数据行之间，而有时可能位于工作表末尾。

**2.**删除空白行后找到最后使用的行。将其存储到变量中。我发现这段代码对这样做很有用：

`mylastrow = myBook.Sheets("Results").Cells.Find(what:="*", SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row`

**3.**从 (2) 中确定的行开始，我想取 A(x where x = mylastrow) 中的产品代码并找到它的任何其他出现（在 A 列中）。如果找到，则删除与其对应的整行。重要的是，这个循环必须反向。例如`mylastrow = 40`，假设循环需要从 A40 开始，并且在下一次迭代中执行 A39（或者如果一行已被删除，则为 38？）。这是因为对于任何产品编号，行中的相应数据都包含更多的数据（由于工作表的生成方式）。本质上，最接近最后一行的条目是最新的。

希望我能够正确解释现场。但如果不是，并且您愿意接受挑战（我的负担？），我将非常感激。

资历架构

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:34:34.703

发展这些知识和技能的唯一方法是进入那里并编写代码！我相信有人可能会进来并为您编写整个过程，但与此同时，这些资源应该为您提供自己完成的工具。

首先，查看[这里](http://www.ozgrid.com/VBA/VBACode.htm)删除空白行的方法。它依赖于范围的“选择”，因此您可以手动选择工作表的所有单元格，然后运行宏，或将其替换为以下内容：

```
Dim r as range
set r = Sheet1.Cells 'now use r instead of Selection 
```

或者（甚至更好）使用您的代码查找最后使用的行并将范围从第 1 行设置为“mylastrow”。

接下来，从“mylastrow”开始，开始将 A 列中的值添加到 Dictionary 对象（[此处](https://stackoverflow.com/questions/9663200/excel-vba-to-count-and-print-distinct-values)为示例）。您可以使用行计数器从“mylastrow”递减到 1。这是它如何工作的示例。假设密钥位于第一列（“A”）。

```
Dim dict As Object
Dim rowCount As Long
Dim strVal As String

Set dict = CreateObject("Scripting.Dictionary")

rowCount = Sheet1.Range("A1").CurrentRegion.Rows.Count

Do While rowCount > 1
  strVal = Sheet1.Cells(rowCount, 1).Value2

  If dict.exists(strVal) Then
    Sheet1.Rows(rowCount).EntireRow.Delete
  Else
    dict.Add strVal, 0
  End If

  rowCount = rowCount - 1
Loop

Set dict = Nothing 
```

之前： ![前](../Images/1baeddf5aac0bb95fbb50c233ac86b3c.png) 之后： ![后](../Images/4efe034f5e382f7e99af78a2d8cb2c9c.png)

请注意，自从我们在 1 时停止以来，第一行没有被触及`rowCount`（假设有一个标题）。

# javascript - 菜单栏，如 Wordpress 管理菜单

> ID：10334503
> 
> 赞同：0
> 
> 时间：2012-04-26T13:30:49.410
> 
> 标签：javascript, wordpress

我正在尝试找到一个 javascript 库（如果可以使用 jquery 更好），以便在您登录后或多或少地复制 wordpress 顶部菜单栏的功能。您可以在左侧、右侧或两侧添加图像/链接。

我发现的大多数 javascript 菜单库都没有这个好，其中一些只在一侧或居中添加按钮/链接......

见附图。

谢谢

![在此处输入图像描述](../Images/e829e454a728afa14c32df9996a5affe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:33:52.547

**编辑：** [Bootstrap](http://twitter.github.com/bootstrap/javascript.html#dropdowns "引导程序")开箱即用地提供了这个功能。即使您不需要整个 Bootstrap 框架，也很容易将您需要的内容与其他内容区分开来。

对于快速简单的粘性导航栏（没有更多涉及的附加功能，例如下拉菜单等），您可以使用以下 CSS：

```
#bar {
    position:fixed;
    top:0;
    left:0;
    right:0;
    height:36px;
    background: black;
} 
```

...然后添加您需要的任何内容，例如

```
<div id=bar>
    <img class=bar-left src=logo.png />
    <div class=bar-right>Login button!</div>
</div> 
```

和CSS：

```
.bar-left {
    float:left;
}

.bar-right {
    float:right;
} 
```

这工作得很好。至于 jQuery，您可以使用它通过其`.append()`和`.prepend()`方法将元素动态添加到导航栏。

# iphone - Objective-c：计时器结束前的动画按钮

> ID：10334508
> 
> 赞同：0
> 
> 时间：2012-04-26T13:31:05.860
> 
> 标签：iphone, objective-c, ios

我正在开发一款非常简单的 iPhone 游戏，该游戏涉及根据随机语音提示连续多次选择正确的彩色按钮。我已经设置好了，如果按钮是一种颜色并被点击，它总是每次都变成硬编码的颜色（例如，如果你点击红色，它总是变成蓝色）。颜色更改方法在 IBOutlet 中设置。我在 while 循环中设置了一个计时器，当计时器结束时，它会检查玩家是否做出了正确的选择。问题是直到计时器用完后按钮颜色才会发生变化，这会导致用于检查正确答案的方法出现问题。有没有办法让这种颜色变化立即发生？根据我的搜索，我知道这与故事板动作有关，直到代码执行后才发生，但我没有 使用计时器找不到任何东西。如果答案正确，这是调用计时器的方法的一部分：

```
BOOL rightChoice = true;
int colorNum;
NSDate *startTime;
NSTimeInterval elapsed;
colorNum = [self randomizeNum:middle];
[self setTextLabel:colorNum];
while (rightChoice){
    elapsed = 0.0;
    startTime = [NSDate date];
    while (elapsed < 2.0){
        elapsed = [startTime timeIntervalSinceNow] * -1.0;
        NSLog(@"elapsed time%f", elapsed);
    }
    rightChoice = [self correctChoice:middleStatus :colorNum];
    colorNum = [self randomizeNum:middle];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:54:08.457

两件事中的一件脱颖而出

*   您正在使用 while 循环作为计时器，不要这样做 - 操作是同步的。
*   如果这是在主线程上运行的，并且您的代码没有返回，您的 UI 将更新。口头禅是：“当你不回来时，你就是在阻止。”
*   Cocoa 有`NSTimer`异步运行的——这里是理想的。

因此，让我们[掌握 NSTimer](https://stackoverflow.com/questions/1449035/how-do-i-use-nstimer)（或者您可以使用 GCD 并将队列保存到 ivar，但 NSTimer 似乎是正确的方法）。

制作一个名为 timer_ 的 ivar：

```
// Top of the .m file or in the .h
@interface ViewController () {
  NSTimer *timer_;
}
@end 
```

做一些启动和停止功能。如何称呼这些取决于您。

```
- (void)startTimer {
  // If there's an existing timer, let's cancel it
  if (timer_)
    [timer_ invalidate];

  // Start the timer
  timer_ = [NSTimer scheduledTimerWithTimeInterval:5.0
                                            target:self
                                          selector:@selector(onTimerFinish:)
                                          userInfo:nil
                                           repeats:NO];
}

- (void)onTimerFinish:(id)sender {
  NSLog(@"Timer finished!");

  // Clean up the timer
  [timer_ invalidate];
  timer_ = nil;
}

- (void)stopTimer {
  if (!timer_)
    return;

  // Clean up the timer
  [timer_ invalidate];
  timer_ = nil;
} 
```

现在

*   将您的计时器测试代码放在 onTimerFinish 函数中。
*   创建一个存储当前选择的 ivar。做出选择时更新此 ivar 并对 UI 进行相关更改。如果满足停止条件，则调用 stopTimer。
*   在 onTimerFinished 中，您可以根据需要有条件地再次调用和 startTimer。

希望这可以帮助！

# cocoa - 是否有像 Excel 中的“间接”可可函数？

> ID：10334510
> 
> 赞同：0
> 
> 时间：2012-04-26T13:31:09.780
> 
> 标签：cocoa, excel-indirect

我正在 Xcode 中构建一个应用程序，其中 NIB 中有 81 个文本视图，每个都有一个顺序名称，所以 box1、box2、box3、box4 等。

例如，在进行数据操作时，我希望能够使用每个框中的数据添加到数组中。我想做的就是把它放在一个循环中，例如：

```
NSMutableArray *array = [[NSMutableArray alloc] init];
for (int i=1; i<82; i++) {
    [array addObject: [Indirect("box" & i).text];
} 
```

同样，当输出回文本视图时，我希望能够从数组中循环，而不是独立地引用每个文本视图。所以像：

```
for (int i=1; i<82; i++) {
    indirect("box" & i).text = [array objectAtIndex:i];
} 
```

有任何想法吗？对不起，如果这很明显 - 对游戏来说相当新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:53:15.290

在 Cocoa 中，有两种方法可以做到这一点：

1.  将所有字段添加到`awakeFromNib`. 享受写 82`addObject:`条消息。
2.  从 nib 中删除字段并在代码循环中创建它们，将每个字段添加到数组中。（这就是我要做的。）

一旦它们在一个数组中，你可以通过索引来引用它们，就像你处理字符串一样。

但是您提到您正在访问字段的`text`属性。这仅存在于 Cocoa Touch 中，不存在于 Cocoa 中。如果您使用的是 Cocoa Touch，那么您还有第三种选择：

*   用奥特莱斯系列替换您的 82 个奥特莱斯。

出口集合属性的值是一个数组，因此您可以在 nib 中创建字段，但仍通过代码中的数组索引来引用它们。

另一方面，我可能仍然会在代码中创建它们，即使我比大多数 Cocoa Touch 开发人员更亲笔尖。部分原因是习惯（我仍然几乎完全是 Mac 开发人员），但部分原因是 DRY 原则。如果我在代码中循环创建字段，我可以只描述一次*所有*字段，以及它们的不同之处。我不会有更改一个字段而忘记（甚至只是*有*）更新其他字段的风险，或者会更改所有字段（*再次*）并忘记更改一个字段的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T02:53:11.600

我会使用标签来处理这个问题：您可以在笔尖中将它们设置为 1 到 81（查找**Control**下的字段）。

然后`-awakeFromNib`你可以`[self viewWithTag:i]`在一个`for`循环中调用。

这绝对比单个网点的工作量要少，而且我认为甚至比一个网点集合更简单——填写数字意味着您不必为所有文本字段连接网点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:09:05.047

考虑 MVC 设计模式。您的计算不应直接基于视图（UI），而应基于控制器中的某些状态，该状态由视图*设置。*每次编辑字段时，它都会通过目标/动作或 Cocoa 绑定通知您的控制器。发生这种情况时，控制器会更新您的数据模型（在您的情况下，这意味着它会更新计算并可能将结果反映在 UI 的另一部分 - “总计”字段）。

# c++ - 为什么 C++ 库和框架从不使用智能指针？

> ID：10334511
> 
> 赞同：160
> 
> 时间：2012-04-26T13:31:10.677
> 
> 标签：c++, pointers, smart-pointers

我在几篇文章中读到几乎不应该使用原始指针。相反，它们应该始终包装在智能指针中，无论是作用域指针还是共享指针。

然而，我注意到像 Qt、wxWidgets 这样的框架和像 Boost 这样的库永远不会返回也不期望智能指针，就好像它们根本没有使用它们一样。相反，它们返回或期望原始指针。有什么理由吗？在编写公共 API 时是否应该远离智能指针，为什么？

只是想知道为什么在许多主要项目似乎避免使用智能指针时推荐使用智能指针。

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-04-26T22:28:32.333

除了许多库是在标准智能指针出现之前编写的之外，最大的原因可能是缺乏标准的 C++ 应用程序二进制接口 (ABI)。

如果您正在编写仅包含标头的库，则可以将智能指针和标准容器传递给您的核心内容。它们的源代码在编译时可供您的库使用，因此您仅依赖于它们接口的稳定性，而不是它们的实现。

但由于缺乏标准 ABI，您通常*无法*安全地跨模块边界传递这些对象。GCC`shared_ptr`可能与 MSVC 不同`shared_ptr`，后者也可能与 Intel 不同`shared_ptr`。即使使用*相同*的编译器，也不能保证这些类在版本之间是二进制兼容的。

底线是，如果您想分发库的*预构建*版本，您需要一个可以依赖的标准 ABI。C 没有，但编译器供应商非常擅长针对给定平台的 C 库之间的互操作性——存在事实上的标准。

这种情况对于 C++ 来说不是那么好。各个编译器可以处理它们自己的二进制文件之间的互操作，因此您可以选择为每个受支持的编译器分发一个版本，通常是 GCC 和 MSVC。但鉴于此，大多数库只导出一个 C 接口——这意味着原始指针。

然而，非库代码通常更喜欢智能指针而不是原始代码。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-04-26T13:37:54.163

可能有很多原因。列出其中的几个：

1.  智能指针最近才成为标准的一部分。在那之前，它们是其他图书馆的一部分
2.  它们的主要用途是避免内存泄漏；许多库没有自己的内存管理；通常，它们提供实用程序和 API
3.  它们被实现为包装器，因为它们实际上是对象而不是指针。与原始指针相比，它具有额外的时间/空间成本；图书馆的用户可能不希望有这样的开销

**编辑**：使用智能指针完全是开发人员的选择。这取决于各种因素。

1.  在性能关键系统中，您可能不想使用会产生开销的智能指针

2.  需要向后兼容的项目，您可能不想使用具有 C++11 特定功能的智能指针

**Edit2**由于以下段落，在 24 小时内有一连串的反对票。我不明白为什么答案被否决，即使下面只是一个附加建议而不是答案。
但是，C++ 总是帮助您打开选项。:) 例如

```
template<typename T>
struct Pointer {
#ifdef <Cpp11>
  typedef std::unique_ptr<T> type;
#else
  typedef T* type;
#endif
}; 
```

并在您的代码中将其用作：

```
Pointer<int>::type p; 
```

对于那些说智能指针和原始指针不同的人，我同意这一点。上面的代码只是一个*想法*，人们可以编写一个可以与 a 互换的代码`#define`，这不是*强制*的；

例如，`T*`必须显式删除，但智能指针不需要。我们可以有一个模板`Destroy()`来处理它。

```
template<typename T>
void Destroy (T* p)
{
  delete p;
}
template<typename T>
void Destroy (std::unique_ptr<T> p)
{
  // do nothing
} 
```

并将其用作：

```
Destroy(p); 
```

同样，对于原始指针，我们可以直接复制它，对于智能指针，我们可以使用特殊操作。

```
Pointer<X>::type p = new X;
Pointer<X>::type p2(Assign(p)); 
```

哪里`Assign()`是：

```
template<typename T>
T* Assign (T *p)
{
  return p;
}
template<typename T>
... Assign (SmartPointer<T> &p)
{
  // use move sematics or whateve appropriate
} 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-04-26T13:50:42.643

智能指针（C++ 11 之前）有两个问题：

*   非标准，因此每个库都倾向于重新发明自己的（NIH 综合症和依赖问题）
*   潜在成本

*默认*的智能指针，因为它是免费的，是`unique_ptr`. 不幸的是，它需要最近才出现的 C++11 移动语义。所有其他智能指针都有一个成本（`shared_ptr`, `intrusive_ptr`）或具有不理想的语义（`auto_ptr`）。

随着 C++11 指日可待，带来一个`std::unique_ptr`，人们会忍不住认为它终于结束了......我并不那么乐观。

只有少数主要编译器实现了 C++11 的大部分内容，并且仅在其最新版本中实现。我们可以期待 QT 和 Boost 等主要库愿意在一段时间内保持与 C++03 的兼容性，这在某种程度上阻碍了新的闪亮智能指针的广泛采用。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-04-26T13:59:05.810

您不应该远离智能指针，它们尤其适用于您必须传递对象的应用程序。

库往往要么只返回一个值，要么填充一个对象。它们通常没有需要在很多地方使用的对象，因此它们不需要使用智能指针（至少不在它们的接口中，它们可能在内部使用它们）。

我可以举一个我们一直在开发的库为例，经过几个月的开发，我意识到我们只在几个类中使用了指针和智能指针（占所有类的 3-5%）。

**在大多数情况下，通过引用**传递变量就足够了，只要我们有一个可以为空的对象，我们就使用智能指针，而当我们使用的库迫使我们这样做时，我们就使用原始指针。

**编辑**（由于我的声誉，我无法发表评论）：通过引用传递变量非常灵活：如果你希望对象是只读的，你可以使用 const 引用（你仍然可以做一些讨厌的转换来编写对象) 但您可以获得最大的保护（与智能指针相同）。但我确实同意只返回对象要好得多。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-04-26T13:41:53.853

Qt 毫无意义地重新发明了标准库的许多部分，试图成为 Java。我相信它现在确实有自己的智能指针，但总的来说，它还算不上设计的巅峰之作。据我所知，wxWidgets 早在编写可用的智能指针之前就已经设计好了。

至于 Boost，我完全希望他们在适当的地方使用智能指针。您可能必须更具体。

此外，不要忘记智能指针的存在是为了强制所有权。如果 API 没有所有权语义，那么为什么要使用智能指针呢？

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-26T13:39:47.347

好问题。我不知道你提到的具体文章，但我不时读到类似的东西。我怀疑此类文章的作者倾向于对 C++ 风格的编程抱有偏见。如果作者只在必要时才使用 C++ 编程，然后尽快返回 Java 或类似的语言，那么他并没有真正分享 C++ 的思维方式。

人们怀疑某些或大多数相同的作者更喜欢垃圾收集内存管理器。我不知道，但我的想法与他们不同。

智能指针很棒，但它们必须保持引用计数。保持引用计数会在运行时承担成本——通常是适度的成本，但仍然是成本。通过使用裸指针来节省这些成本并没有错，尤其是在指针由析构函数管理的情况下。

C++ 的一大优点是它支持嵌入式系统编程。裸指针的使用是其中的一部分。

*更新：* 评论者正确地观察到 C++ 的新`unique_ptr`（自 TR1 起可用）不计算引用。评论者对“智能指针”的定义也与我想象的不同。他的定义可能是对的。

*进一步更新：* 下面的评论线程很有启发性。全部推荐阅读。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-06T06:51:58.647

还有其他类型的智能指针。您可能需要一个专门的智能指针，用于网络复制（检测它是否被访问并将任何修改发送到服务器或类似的东西），保留更改历史记录，标记它被访问的事实，以便可以在何时进行调查您将数据保存到磁盘等。不确定在指针中这样做是否是最好的解决方案，但在库中使用内置的智能指针类型可能会导致人们被锁定并失去灵活性。

除了智能指针之外，人们还可以有各种不同的内存管理需求和解决方案。我可能想自己管理内存，我可以为内存池中的东西分配空间，所以它是提前分配的，而不是在运行时分配的（对游戏很有用）。我可能正在使用 C++ 的垃圾收集实现（C++11 使这成为可能，尽管尚不存在）。或者也许我只是没有做任何足够先进的事情来担心打扰他们，我知道我不会忘记未初始化的对象等等。也许我只是对自己在没有指针拐杖的情况下管理内存的能力有信心。

与 C 的集成也是另一个问题。

另一个问题是智能指针是 STL 的一部分。C++ 被设计为在没有 STL 的情况下也可以使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-08T02:06:43.040

这也取决于你在哪个领域工作。我以编写游戏引擎为生，我们避免像瘟疫一样的提升，在游戏中提升的开销是不可接受的。在我们的核心引擎中，我们最终编写了自己的 stl 版本（很像 ea stl）。

如果我要编写表单应用程序，我可能会考虑使用智能指针；但是一旦内存管理成为第二天性，没有对内存进行精细控制就会变得非常烦人。

# c++ - 在 C++ 中使用 DLL 时？

> ID：10334514
> 
> 赞同：-1
> 
> 时间：2012-04-26T13:31:22.573
> 
> 标签：c++, qt, plugins, dll

在过去的 3 周里，我一直在尝试创建一个代码生成器，我的老板告诉我放入一个插件 DLL，以便我们下次想要重用它时可以调用它！

所以我在网上搜索了一个Dll的含义，但它仍然有点模糊，所以如果你对初学者有更好的简单定义或关于C++中DLL的清晰概念，请赐教。

另一件事：我注意到有些人使用 QT 来创建插件，那么 QT 中的什么让我们有可能做到在任何其他 IDE 中都找不到？

PS：我没用过QT！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:39:31.810

DLL-动态链接库是将类、方法和程序打包成一个编译文件以与其他程序一起使用。它类似于可执行的 .exe 文件，但您不需要 main 方法。

# android - 虽然 Edit Text 是重点，但相对布局在 android 中居于首位

> ID：10334515
> 
> 赞同：1
> 
> 时间：2012-04-26T13:31:26.897
> 
> 标签：android

在我的应用程序中，我使用 3relative 布局。第一个用于页眉，第二个用于内容部分，在这部分它有微调器和一个编辑文本，第三个用于页脚，它有一个微调器。当我选择第三个相对布局微调器移动到屏幕顶部时的编辑文本时，Android 键盘弹出。如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:36:54.230

有很多选择..

```
android:windowSoftInputMode="adjustPan" 
```

在清单中的 Activity 标签下应该可以完成这项工作..

# javascript - 如何在没有 jQuery 的情况下序列化表单？

> ID：10334519
> 
> 赞同：15
> 
> 时间：2012-04-26T13:31:52.400
> 
> 标签：javascript, json, forms, serialization

由于很多原因（首先：学习 javascript），我需要在没有 jQuery 的情况下序列化表单，并将生成的序列化数据结构发送到带有 ajax 的 php 页面。序列化数据必须是 JSON 格式。

我怎样才能做到这一点？

- 编辑 -

这就是我的表单的样子：http: [//jsfiddle.net/XGD4X/](http://jsfiddle.net/XGD4X/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:54:22.447

我正在研究一个类似的问题，我同意在不使用框架的情况下首先学习如何编程是值得的。我正在使用数据对象（BP.reading）来保存信息，在我的例子中是血压读数。然后 JSON.stringify(dataObj) 为您完成工作。

这是“保存”按钮单击的处理程序，它是 dataObj 上的一个方法。注意我使用表单而不是表格来输入数据，但同样的想法应该适用。

```
update: function () {
            var arr = document.getElementById("BP_input_form").firstChild.elements,
                request = JDK.makeAjaxPost();  // simple cross-browser httpxmlrequest with post headings preset

            // gather the data and store in this data obj
            this.name = arr[0].value.trim();
            ...
            this.systolic = arr[3].value;
            this.diastolic = arr[4].value;

            // still testing so just put server message on page
            request.callback = function (text) {
                msgDiv.innerHTML += 'server said ' + text;
            };
            // 
            request.call("BP_update_server.php", JSON.stringify(this));
        } 
```

我希望这是有帮助的

*** 编辑以显示通用版本 ***

在我的程序中，我使用对象来发送、接收、显示和输入相同类型的数据，因此我已经准备好对象。要获得更快的解决方案，您可以只使用一个空对象并将数据添加到其中。如果数据是一组相同类型的数据，则只需使用数组。但是，对于一个对象，您在服务器端有有用的名称。这是一个更通用的版本，未经测试，但通过了 jslint。

```
function postUsingJSON() {
    // collect elements that hold data on the page, here I have an array
    var elms = document.getElementById('parent_id').elements,
        // create a post request object
        // JDK is a namespace I use for helper function I intend to use in other
        //  programs or that i use over and over
        // makeAjaxPost returns a request object with post header prefilled
        req = JDK.makeAjaxPost(),
        // create object to hold the data, or use one you have already
        dataObj = {},   // empty object or use array dataArray = []
        n = elms.length - 1;     // last field in form

    // next add the data to the object, trim whitespace
    // use meaningful names here to make it easy on the server side
    dataObj.dataFromField0 = elms[0].value.trim();  // dataArray[0] =
    //        ....
    dataObj.dataFromFieldn = elms[n].value;

    // define a callback method on post to use the server response
    req.callback = function (text) {
        // ...
    };

    // JDK.makeAjaxPost.call(ULR, data)
    req.call('handle_post_on_server.php', JSON.stringify(dataObj));
} 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-18T20:37:42.270

CoffeeScript 实现返回一个 GET 查询字符串：

```
serialize = (form) ->
  enabled = [].filter.call form.elements, (node) -> not node.disabled
  pairs = [].map.call enabled, (node) ->
    encoded = [node.name, node.value].map(encodeURIComponent)
    encoded.join '='
  pairs.join '&' 
```

或者，如果您更喜欢键值映射：

```
serialize = (form) ->
  data = {}
  for node in form.elements when not node.disabled and node.name
    data[node.name] = node.value
  data 
```

我没有看过 jQuery 的实现，所以不能保证 100% 的兼容性。

# java - Java File.renameTo 失败

> ID：10334524
> 
> 赞同：-3
> 
> 时间：2012-04-26T13:32:02.047
> 
> 标签：java

在 Java File.renameTo 中失败。

```
File file = new File("a.txt");
File loadedFile = new File("a.txt.loaded");

if (file.renameTo(loadedFile)) {
     // task 
} else {
    // Throw Exception 
} 
```

知道为什么会失败。请提供任何替代解决方案来重命名文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:34:22.203

它可能会失败，如果

*   您要重命名的文件已经存在（我认为仅限Windows）在这种情况下，只需先删除目标文件，然后重命名即可。
*   您要重命名的文件已锁定
*   您要重命名的文件当前已打开（我认为也仅限于 Windows）
*   其他东西...

# php - 什么是 PHP 代码生成器？

> ID：10334529
> 
> 赞同：1
> 
> 时间：2012-04-26T13:32:15.843
> 
> 标签：php, code-generation

我正在考虑使用 php cms、php 框架或 php 代码生成器。php cms 以某种方式受到限制，使用 php 框架和 php 代码生成器我有更多的自由。但是框架和代码生成器之间究竟有什么区别，或者框架与代码生成器共享什么？我还计划将 Scriptcase 5 用于一个项目，因为我已经拥有许可证并且我不想使用 cms 或类似的东西来限制我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:43:26.027

使用 Scriptcase 等代码生成器，您无需编写 PHP/HTML 代码即可创建数据驱动的 Web 应用程序。

但是，如果您想扩展由代码生成器生成的 Web 应用程序的默认功能，这将是一件很痛苦的事情，您必须对 PHP 和生成的代码的工作方式有足够的时间和深入的了解。

*   如果您想创建一个网站/博客/出版物网络应用程序 => 使用现有的 CMS（不要重新发明轮子）

除此以外：

*   如果您没有时间和/或您不知道如何开发 Web 应用程序 => 使用代码生成器
*   如果您想创建复杂的 Web 应用程序 => 学习如何开发（如果需要）和使用框架

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T04:45:35.167

CMS、框架和 PHP 代码生成器是三种不同的野兽。

CMS 是一种软件工具，可轻松进行网站编辑/维护。尽管也有基于文件的数据库，但大多数 CMS 都使用数据库。流行的 CMS 在某种程度上是 Joomla、Drupal、CMSMS 和 Wordpress。您可以使用 CMS 来维护您的网站，但是无法构建像 Twitter 或 Facebook 这样的 Web 应用程序。CMS 不是工具，这是一个 Web 应用程序。

框架和 PHP 代码生成器都允许您构建 Web 应用程序。使用框架，您仍然需要编写实际代码。PHP 代码生成器将为您生成 50-90% 的代码。

让我们打个比方。你需要造一辆汽车。手动编写代码意味着从头开始制造汽车：制造发动机、变速箱、为车载计算机编写软件等。制造一辆汽车需要很多年。

使用框架类似于购买 DIY 套件。你得到引擎，车身，车轮，只需要组装它。根据您的技能，这可能需要几个月的时间。

使用 PHP 代码生成器类似于在 3D 打印机上打印您的汽车。您选择程序，选择品牌/型号/选项，然后单击“打印”。一段时间后，你有你的车。您也许可以在某种程度上对其进行自定义。您甚至可以购买另一台发动机并更换库存发动机。

CMS就是汽车。你可以给它涂上不同的颜色，换轮子等。如果你需要另一辆车，你必须得到另一个 CMS。

如果你读了这么多，你应该知道市场上最好的 PHP 代码生成器是[PHPRunner](http://xlinesoft.com/phprunner/index.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T18:20:53.413

代码生成器最适合开发数据库管理系统。它们节省了您为几乎相似的任务编写冗长代码的大量精力。一些代码生成器只需单击几下即可为您完成惊人的工作。使用这些生成器满足日常客户需求，维护项目也变得非常容易

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-01T18:53:51.510

如果你想用 cruds 等制作简单的项目，我推荐 Scriptcase。对于复杂的项目，您将需要更大的灵活性，而 Scriptcase 并不灵活。我与 Scriptcase 合作了 7 年，这太棒了。

# python - 使用 Python / Boto 更新 DynamoDB 原子计数器

> ID：10334533
> 
> 赞同：9
> 
> 时间：2012-04-26T13:32:28.153
> 
> 标签：python, counter, atomic, boto, amazon-dynamodb

我正在尝试使用 Python Boto 2.3.0 更新原子计数计数器，但找不到该操作的文档。

似乎没有直接接口，所以我尝试使用 layer1 接口进行“原始”更新，但即使是简单的更新也无法完成。

我尝试了以下变体，但都没有运气

```
dynoConn.update_item(INFLUENCER_DATA_TABLE, 
                     {'HashKeyElement': "9f08b4f5-d25a-4950-a948-0381c34aed1c"}, 
                     {'new': {'Value': {'N':"1"}, 'Action': "ADD"}})    

dynoConn.update_item('influencer_data', 
                     {'HashKeyElement': "9f08b4f5-d25a-4950-a948-0381c34aed1c"}, 
                     {'new': {'S' :'hello'}})                                 

dynoConn.update_item("influencer_data", 
                     {"HashKeyElement": "9f08b4f5-d25a-4950-a948-0381c34aed1c"},
                     {"AttributesToPut" : {"new": {"S" :"hello"}}}) 
```

它们都产生相同的错误：

```
 File "/usr/local/lib/python2.6/dist-packages/boto-2.3.0-py2.6.egg/boto/dynamodb/layer1.py", line 164, in _retry_handler
    data)
boto.exception.DynamoDBResponseError: DynamoDBResponseError: 400 Bad Request
{u'Message': u'Expected null', u'__type': u'com.amazon.coral.service#SerializationException'} 
```

[我还研究了这里](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API.html)的 API 文档，但它们非常简陋。

我已经做了很多搜索和摆弄，唯一剩下的就是使用 PHP API 并深入研究代码以找到它“格式化”JSON 主体的位置，但这有点痛苦。请把我从痛苦中拯救出来！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T11:25:41.983

对不起，我误解了你在找什么。尽管有一个小错误需要解决，但您可以通过 layer2 完成此操作。这是一些 Layer2 代码：

```
>>> import boto
>>> c = boto.connect_dynamodb()
>>> t = c.get_table('counter')
>>> item = t.get_item('counter')
>>> item
{u'id': 'counter', u'n': 1}
>>> item.add_attribute('n', 20)
>>> item.save()
{u'ConsumedCapacityUnits': 1.0}
>>> item  # Here's the bug, local Item is not updated
{u'id': 'counter', u'n': 1}
>>> item = t.get_item('counter')  # Refetch item just to verify change occurred
>>> item
{u'id': 'counter', u'n': 21} 
```

这会产生与您在第 1 层代码中执行的相同的在线请求，如以下调试输出所示。

```
2012-04-27 04:17:59,170 foo [DEBUG]:StringToSign:
POST
/

host:dynamodb.us-east-1.amazonaws.com
x-amz-date:Fri, 27 Apr 2012 11:17:59 GMT
x-amz-security-    token:<removed> ==
x-amz-target:DynamoDB_20111205.UpdateItem

{"AttributeUpdates": {"n": {"Action": "ADD", "Value": {"N": "20"}}}, "TableName": "counter", "Key": {"HashKeyElement": {"S": "counter"}}} 
```

如果你想避免最初的 GetItem 调用，你可以这样做：

```
>>> import boto
>>> c = boto.connect_dynamodb()
>>> t = c.get_table('counter')
>>> item = t.new_item('counter')
>>> item.add_attribute('n', 20)
>>> item.save()
{u'ConsumedCapacityUnits': 1.0} 
```

如果它已经存在，它将更新该项目，如果它尚不存在，则创建它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T05:06:33.697

对于那些寻找答案的人，我已经找到了。首先重要说明，我目前不知道发生了什么，但目前，要获得 layer1 实例，我必须执行以下操作：

```
import boto
AWS_ACCESS_KEY=XXXXX
AWS_SECRET_KEY=YYYYY
dynoConn = boto.connect_dynamodb(AWS_ACCESS_KEY, AWS_SECRET_KEY)
dynoConnLayer1 = boto.dynamodb.layer1.Layer1(AWS_ACCESS_KEY, AWS_SECRET_KEY) 
```

本质上是先实例化第 2 层，然后再实例化第 1 层。也许我在做一些愚蠢的事情，但此时我很高兴让它工作......我稍后会整理细节。那么...实际执行原子更新调用：

```
dynoConnLayer1.update_item("influencer_data", 
                    {"HashKeyElement":{"S":"9f08b4f5-d25a-4950-a948-0381c34aed1c"}},
                    {"direct_influence":
                        {"Action":"ADD","Value":{"N":"20"}}
                    }
                ); 
```

请注意，在上面的示例中，Dynamo 将对当前值加 20，并且此操作将是原子操作，这意味着在“同时”发生的其他操作将被正确“调度”在新值被确定为 +20 后发生OR 在执行此操作之前。无论哪种方式，都会达到预期的效果。

一定要在 layer1 连接的实例上执行此操作，因为 layer2 会抛出错误，因为它需要一组不同的参数类型。

这里的所有都是它的！！！！众所周知，我使用 PHP SDK 解决了这个问题。安装和设置需要很短的时间，然后当您进行调用时，调试数据实际上会向您显示 HTTP 请求正文的格式，因此您将能够在示例之后复制/建模您的 layer1 参数。这是我用来在 PHP 中进行原子更新的代码：

```
<?php 
    // Instantiate the class
    $dynamodb = new AmazonDynamoDB();

    $update_response = $dynamodb->update_item(array(
        'TableName' => 'influencer_data',
            'Key' => array(
                'HashKeyElement' => array(
                    AmazonDynamoDB::TYPE_STRING=> '9f08b4f5-d25a-4950-a948-0381c34aed1c'
                )
            ),
            'AttributeUpdates' => array(
                'direct_influence' => array(
                    'Action' => AmazonDynamoDB::ACTION_ADD,
                    'Value' => array(
                        AmazonDynamoDB::TYPE_NUMBER => '20'
                    )
                )
            )
    ));

    // status code 200 indicates success
    print_r($update_response);

?> 
```

希望这将有助于其他人，直到 Boto layer2 接口赶上......或者有人只是想出如何在 level2 中做到这一点:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-17T16:30:57.663

我不确定这是否真的是一个原子计数器，因为当您增加 1 的值时，另一个调用调用可能会将数字增加 1，因此当您“获取”该值时，它不是您期望的值.

例如，将代码通过 garnaat 标记为已接受的答案，我看到当您将其放入线程时，它不起作用：

```
class ThreadClass(threading.Thread):
    def run(self):
        conn = boto.dynamodb.connect_to_region(aws_access_key_id=os.environ['AWS_ACCESS_KEY'], aws_secret_access_key=os.environ['AWS_SECRET_KEY'], region_name='us-east-1')
        t = conn.get_table('zoo_keeper_ids')
        item = t.new_item('counter')
        item.add_attribute('n', 1)
        r = item.save() #- Item has been atomically updated!
        # Uh-Oh! The value may have changed by the time "get_item" is called!
        item = t.get_item('counter') 
        self.counter = item['n']
        logging.critical('Thread has counter: ' + str(self.counter))

tcount = 3
threads = []
for i in range(tcount):
    threads.append(ThreadClass())

# Start running the threads:
for t in threads:
    t.start()

# Wait for all threads to complete:
for t in threads:
    t.join()

#- Now verify all threads have unique numbers:
results = set()
for t in threads:
    results.add(t.counter)

print len(results)
print tcount
if len(results) != tcount:
    print '***Error: All threads do not have unique values!'
else:
    print 'Success!  All threads have unique values!' 
```

注意：如果您希望它真正起作用，请将代码更改为：

```
def run(self):
    conn = boto.dynamodb.connect_to_region(aws_access_key_id=os.environ['AWS_ACCESS_KEY'], aws_secret_access_key=os.environ['AWS_SECRET_KEY'], region_name='us-east-1')
    t = conn.get_table('zoo_keeper_ids')
    item = t.new_item('counter')
    item.add_attribute('n', 1)
    r = item.save(return_values='ALL_NEW') #- Item has been atomically updated, and you have the correct value without having to do a "get"!
    self.counter = str(r['Attributes']['n'])
    logging.critical('Thread has counter: ' + str(self.counter)) 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T17:13:27.650

DynamoDB 中没有用于原子计数器的高级函数。但是，您可以使用条件写入功能实现原子计数器。例如，假设您的表具有这样的字符串哈希键。

```
>>> import boto
>>> c = boto.connect_dynamodb()
>>> schema = s.create_schema('id', 's')
>>> counter_table = c.create_table('counter', schema, 5, 5) 
```

您现在将一个项目写入该表，其中包含一个名为“n”的属性，其值为 0。

```
>>> n = 0
>>> item = counter_table.new_item('counter', {'n': n})
>>> item.put() 
```

现在，如果我想更新我的计数器的值，我将执行一个条件写入操作，如果它的当前值与我对它的当前值的想法一致，它将把“n”的值增加到 1。

```
>>> n += 1
>>> item['n'] = n
>>> item.put(expected_value={'n': n-1}) 
```

这会将项目中的“n”值设置为 1，但前提是 DynamoDB 中的当前值为零。如果该值已被其他人递增，则写入将失败，然后我需要按本地计数器递增并重试。

这有点复杂，但所有这些都可以包含在一些代码中，以使其更易于使用。我为 SimpleDB 做了类似的事情，你可以在这里找到：

[http://www.elastician.com/2010/02/stupid-boto-tricks-2-reliable-counters.html](http://www.elastician.com/2010/02/stupid-boto-tricks-2-reliable-counters.html)

我可能应该尝试更新该示例以使用 DynamoDB

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-04T10:30:47.507

您想在 dynamodb 中增加一个值，那么您可以使用以下方法来实现：

```
import boto3
import json
import decimal

class DecimalEncoder(json.JSONEncoder):
    def default(self, o):
        if isinstance(o, decimal.Decimal):
            if o % 1 > 0:
                return float(o)
            else:
                return int(o)
        return super(DecimalEncoder, self).default(o)

ddb = boto3.resource('dynamodb') 
def get_counter():
    table = ddb.Table(TableName)
    try:
            response = table.update_item(                                                             
            Key={
                'haskey' : 'counterName'
            },
            UpdateExpression="set currentValue = currentValue +  :val",
            ExpressionAttributeValues={
                ':val': decimal.Decimal(1)
            }, 
            ReturnValues="UPDATED_NEW"
        )
        print("UpdateItem succeeded:")
    except Exception as e:
        raise e
    print(response["Attributes"]["currentValue" ]) 
```

这个实现需要一个额外的计数器表，它只会为您保留最后使用的值。

# c# - 是否可以在 linq to sql 中定义指向行的指针？

> ID：10334537
> 
> 赞同：1
> 
> 时间：2012-04-26T13:32:48.080
> 
> 标签：c#, database, linq-to-sql

是否可以在数据库中定义一个指向行的指针，这样我就可以在不查询数据库的情况下检索该行、下一行和上一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:36:09.370

不可以。您需要在一个查询中查询所有三行并将它们放入一个列表中。然后，您可以在不执行其他查询的情况下为列表编制索引。

# tfs - 如何从捕获的 WorkItemChangedEvent 中获取 TFS 集合？

> ID：10334539
> 
> 赞同：4
> 
> 时间：2012-04-26T13:32:54.367
> 
> 标签：tfs

我编写了一个捕获 WorkItemChangedEvent 的 TFS 插件，但我看不到如何获取此事件适用的集合？任何线索？我可以看到“DisplayUrl”，它告诉我 TPC 所在的主机，而不是 TPC 本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:32:46.053

看起来你可以从处理程序中获取它：requestContext.ServiceHost.Name

```
public EventNotificationStatus ProcessEvent(TeamFoundationRequestContext requestContext 
```

# php - 将 JSON 作为表单的一部分发送到 PHP

> ID：10334546
> 
> 赞同：0
> 
> 时间：2012-04-26T13:33:24.040
> 
> 标签：php, jquery, json

我有一个复杂的表单，其中包含一些输入和文本区域，允许用户创建日历项。我还有一个弹出窗口，让他们将活动链接到项目和另一个弹出窗口，让他们将预定义的目标链接到活动。

只有在保存日历项时才应保存活动以及目标和活动之间的链接

我正在考虑通过将数据保存在 JSON 对象中来处理所有弹出内容。然后应该将该对象发送到处理表单提交的 PHP 文件。

我*不想*使用 Ajax 发送 JSON，我需要它成为表单的一部分。我正在考虑简单地添加一个带有 json 数据的隐藏文本区域并`json_decode()`在我的页面中使用，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:03:00.550

我猜这些弹出窗口是由 javascript (jQuery?) 处理的，因此您可以使用来自这些弹出窗口的 JSON 编码数据（由 javascript 完成）填充隐藏的输入，然后在准备好后简单地发布表单。

然后在 PHP 中你只需解码 JSON 数据并管理它们。

# c# - 从没有反射的c#源代码中提取属性

> ID：10334547
> 
> 赞同：6
> 
> 时间：2012-04-26T13:33:24.277
> 
> 标签：c#, reflection, attributes, roslyn

我想`custom attributes`从不同`.CS`文件的源代码中提取。我有文件列表。

场景是我有`Project A`读取`Project B`. 它必须提取`Project B`.

我的问题是，我怎么能不使用`Reflection`. 反射处理程序集，但我有源代码。

使用 Roslyn 会过分杀戮吗？

有哪些方法？

我有另一个编译选项，`MSBuild`但对于大型项目，由于严重的依赖关系，它是不可行的。这似乎不是构建应用程序然后去其程序集的好方法

我只是想要一些东西来告诉我什么属性是什么类以及可能的这些类关系的 UML 图。

请提出你的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:39:23.370

您可以使用 NRefactory：[https](https://github.com/icsharpcode/nrefactory) ://github.com/icsharpcode/nrefactory （也可作为 NuGet 包使用）

# wordpress - 使用 wordpress 永久链接忽略 url 前缀

> ID：10334548
> 
> 赞同：1
> 
> 时间：2012-04-26T13:33:26.070
> 
> 标签：wordpress, mod-rewrite, permalinks

我正在尝试设置一个 htaccess 规则，该规则将与我拥有的当前永久链接结构一起使用。

我目前的永久链接结构是这样的

```
/%category%/%postname%/ 
```

而我的htaccess如下

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blog/index.php [L]
</IfModule> 
```

一个典型的网址是

/blog/post_category_name/post_name/

这一切都很好。我面临的问题是用户能够更改他们的语言环境，这反过来又在 URL 前面加上区域代码，如下所示。

/uk/blog/post_category_name/post_name/

现在的问题是 WP 将 blog 作为类别，将 post_category_name 作为帖子名称，然后在 WP 中引发 404。

本质上我想完全忽略区域代码，这可能吗？

我还应该补充一点，英国（或任何其他地区）目录不存在，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:58:09.103

如果要捕获该`uk/`文件夹，则必须在根目录中进行。把它放在根目录中`.htaccess`（如果你想确保它不是目录/文件，你可以检查！-f 和！-d）。这将允许你从查询字符串中获取国家代码。

```
<IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /
 RewriteRule ^([a-zA-Z]{2})/blog/(.*) /blog/$2?ccode=$1 [L,QSA]
</IfModule> 
```

您也可以忽略国家代码：

```
<IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /
 RewriteRule ^([a-zA-Z]{2})/blog/(.*) /blog/$2 [L]
</IfModule> 
```

不确定这是否会改变 WP 中的某些内容（不确定他们如何处理 url）。你必须检查一下。

# c++ - Boost 螺纹插座

> ID：10334549
> 
> 赞同：0
> 
> 时间：2012-04-26T13:33:30.410
> 
> 标签：c++, multithreading, boost, boost-asio

只是想知道是否有人可以指出一些简单的代码，它显示多线程 boost::tcp::socket 是多线程的，不能在父 IE 创建的同一个套接字上工作

```
while (TRUE){
    create server
    create shared_ptr io_service
    create shared_ptr socket
    create acceptor 
    create endpoint

    bind to ip and port
    listen
    accept(bind etc)
    create thread pool with function passing the ONE socket

    //do work in thread close the socket
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:03:10.330

我找到了问题的根本原因是我没有意识到多个套接字可以使用 boost 绑定到同一个端口

```
acceptor->set_option( boost::asio::ip::tcp::acceptor::reuse_address( true ) ); 
```

这对我帮助很大。

# jquery - 使用 jquery ajax setInterval 单独加载

> ID：10334551
> 
> 赞同：0
> 
> 时间：2012-04-26T13:33:40.200
> 
> 标签：jquery, ajax, post, load, while-loop

我正在编写一个脚本，它每秒都在数据库中查找一些配置以在站点上显示特定信息。

我的想法是，设置一个带有 setInterval 函数的页面，从这样的 php 文件中获取信息：

```
$(document).ready(function(){

  var check1 = '';
  var check2 = '';
  var refreshId = setInterval(function(){

    $.post('check.php', function(data) {
      var check1 = data;
    });

    while(check1 != check2){
      if(check1 == 'score'){
        $('#ajax').load('score.php');
      }
      if(check1 == 'stats'){
        $('#ajax').load('stats.php');
      }
      var check1 = check2;
    } 

  }, 1000);

}); 
```

我的问题是，仅在 var 测试将更改为其他值时重新加载 div #ajax。如果值仍然相同，则不应重新加载 div。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:38:05.227

你的s太多了`var`。

```
var check1 = data;
*** 
```

这些将创建全新的 check1 变量，而不是引用代码顶部的变量。删除这个`var`以及底部的那个：

```
var check1 = check2;
*** 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:54:57.697

```
if(check1 != check2){
  if(check1 == 'score'){
    $('#ajax').load('score.php');
  }
  if(check1 == 'stats'){
    $('#ajax').load('stats.php');
  }
  check2 = check1 ;
} 
```

将 while 替换为 'if' 和 var check2=check1; 从 var check1=check2;

# delphi - ProcessMessages和应用程序的使用

> ID：10334553
> 
> 赞同：1
> 
> 时间：2012-04-26T13:33:46.677
> 
> 标签：delphi

我需要知道使用允许我使用整个应用程序的 ProcessMessages 是否合法。

伪代码：

主线程按钮调用 - 搜索。

```
procedure ButtonOnClick;
begin
    var1 = ExecuteSearch();
end;    

function ExecuteSearch:Something;
begin
 thread.StartThread;
 while thread.Finished do
 Application.ProcessMessages;
 result := something;
end; 
```

当我使用这种结构时，我可以单击软件的其他部分并使用它。但我不知道这是如何工作的。如果它是安全的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T21:28:02.503

虽然这可以确保安全，但您是在玩火。你冒着重新进入的风险。您必须确保用户不能再次按下该按钮。我相信您在搜索运行时已禁用它。在第一次调用之前，您必须确保它已被禁用`ProcessMessages`。

我的建议始终是避免使用`ProcessMessages`. 最好是启动线程并安排它在完成时通知主线程。当然，您仍然需要在线程运行时禁用该按钮。

但是，如果您真的必须使用`ProcessMessages`，请不要使用这样的繁忙循环。使用整个处理器等待长时间运行的搜索操作完成没有多大意义。使用更智能的阻塞循环，如下所示：

```
while MsgWaitForMultipleObjects(1, Thread.Handle, False, 
    INFINITE, QS_ALLEVENTS)=WAIT_OBJECT_0+1 do
  Application.ProcessMessages; 
```

该`MsgWaitForMultipleObjects`函数将阻塞，直到：

1.  一条消息被放置在队列中，或者
2.  线程发出信号。线程完成时会发出信号。

当线程发出信号时循环终止，但也处理任何排队的消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:46:37.000

尽管代码是安全的，但您还可以在您正在启动的线程上使用 OnTerminate 事件。这样你就可以让 Delphi 控制如何从后台线程回发到主线程。在内部它使用线程的 Synchronize 方法，您可以自己使用该方法让线程将中间进度信息发布到主线程。

# oop - 复合图案电脑游戏

> ID：10334554
> 
> 赞同：0
> 
> 时间：2012-04-26T13:33:47.340
> 
> 标签：oop, composite

对于电脑游戏，玩家在游戏过程中获得的奖励是：

入门级：n分灯中级：魔法垫m分高级：可以装灯或垫子的宝箱

这里我们应用复合模式

客户：电脑游戏

我相信组件是级别（入门，中级和高级） 复合：奖励叶子：灯，魔术垫，胸部操作：getPoints（），fillChest（）

这些是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:54:52.023

组合通常是对象的树/集合。您可以对单个对象执行的相同操作也可以在集合上执行。此外，对象通常可以是独立的或包含更多对象，并且对包含对象的操作将在包含的对象上执行。

因此，如果这就是您计划使用 Composite 对象的方式，那么是的，这听起来是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T06:51:25.300

我同意布雷迪的观点。一切都取决于您计划如何使用您的复合对象。我将复合设计模式用于 RPG 属性系统。您需要做的就是创建不同的属性并为每个属性分配一个 Attribute 实例。之后，就是通过已经创建的方法为其添加和删除奖金。

# loops - 防止片段着色器中的循环展开

> ID：10334555
> 
> 赞同：6
> 
> 时间：2012-04-26T13:33:51.823
> 
> 标签：loops, glsl, webgl

我正在使用最新版本的 Chrome（和 Firefox）为 WebGL（GLSL ES 1.0）编写片段着色器，并编写了一个迭代算法。

所以首先，我发现循环的长度非常有限（文档说它在编译时必须是可猜测的，这意味着它必须是一个常数或非常接近）。

此外，我必须编写一个 ( `for`，因为它是唯一一个*必须*根据标准实现的) 循环，该循环可能很长，但几乎每次在结束前都会中断。

现在，我注意到如果我设置更高的最大数量，着色器的编译和链接会花费更多时间。所以，除非我错了，否则编译器会循环展开。

我不确定是否可以做任何事情，但我尝试了一些事情，编译器似乎也内联函数，即使在循环中调用也是如此。

我不觉得着色器花费整整一分钟来编译大约一百次循环迭代是不正常的。还是我做错了？对于 GPU 来说，片段着色器中的一百次迭代是否太多了？因为它编译后似乎运行得很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T18:35:05.803

这是 GLSL 的不幸现实之一。如果我们可以进行离线编译并发送字节码，或者我们能够在编译时指定标志等等，那就太好了，但这不是规范的工作方式。您完全受驱动程序制造商的摆布。如果 NVIDIA/ATI 认为循环展开对您有好处，那么您的循环就会展开。

不过，我确实质疑你在做什么需要如此多的循环。着色器并不是真正适合进行超复杂循环或分支计算的地方。你肯定会因此而受到打击。如果您不担心实时性能，那么程序开始时的大量编译命中可能还不错。如果您担心应用程序的渲染速度，那么您可能需要重新评估着色器的复杂性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T19:23:11.803

你提到着色器需要一分钟多的时间来编译一个最多只有大约 100 次迭代的循环，这让我认为你的问题可能与[ANGLE](http://code.google.com/p/angleproject/)有关。

ANGLE 是一款嵌入在 Windows 操作系统上支持 WebGL 的浏览器中的软件，它采用您的 GLSL 着色器并在运行时将其转换为 Direct3D HLSL 着色器。想法是大多数 Windows 机器与它们的 OpenGL 驱动程序相比具有更新的 Direct3D 驱动程序，因此默认行为是将所有内容转换为 D3D。以我的经验，这可能会很慢，尤其是在您描述的长循环中，尽管许多 Windows 用户都需要它，尤其是那些使用基于 Intel 的图形的用户。

如果您运行的是 Windows 并且您拥有高质量的 OpenGL 驱动程序，例如来自 nVidia 或 AMD 的相当新的驱动程序，您可以尝试禁用 ANGLE 以查看它是否能解决您的问题。在 Google Chrome 上，这是通过编辑您的 Chrome 图标以添加`--use-gl=desktop`为命令行参数（在图标的“目标”字段中）并重新启动浏览器来完成的。对于 Firefox，您可以访问`about:config`并`webgl`在搜索框中输入内容，然后查找`webgl.prefer-native-gl`并将其设置为 true。

在禁用 ANGLE 的情况下再次尝试您的着色器，编译时间可能会得到改善。请记住，这只是一个 Windows 问题，因此在其他平台上编辑这些设置没有效果，但我相信所有其他平台都直接使用原生 OpenGL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-21T05:39:33.653

遗憾的是 AMD*可能*不支持这一点，但我认为 NVidia 有一个不错的 pragma unroll 指令。对于遇到相反问题的人，您可以在 GLSL 中将其调用为“#pragma optionNV (unroll all)”，但我认为以下内容会阻止展开。我[在 NVidia 论坛上引用了 DenisR 2008 年的帖子](https://devtalk.nvidia.com/default/topic/387988/-pragma-unroll-/)：

> 默认情况下，编译器展开具有已知行程计数的小循环。然而，#pragma unroll 指令可用于控制任何给定循环的展开。它必须放在紧接在循环之前，并且仅适用于该循环。可选地后跟一个数字，指定循环必须展开多少次。
> 
> 例如，在此代码示例中：
> 
> ```
> #pragma unroll 5
> 
> for (int i = 0; i < n; ++i) 
> ```
> 
> 循环将展开 5 次。程序员有责任确保展开不会影响程序的正确性（在上面的示例中，如果 n 小于 5，它可能会影响程序的正确性）。
> 
> ```
> #pragma unroll 1 
> ```
> 
> 将阻止编译器展开循环。
> 
> 如果在#pragma unroll 之后没有指定数字，则如果其行程计数恒定，则循环完全展开，否则根本不展开。

所以我会想象

```
#pragma optionNV (unroll 1) 
```

可能在 GLSL（和 WebGL？）中工作。（例如，[StackOverflow 问题 selected-nvidia-pragma-optionnvunroll-all](https://stackoverflow.com/questions/20415815/selective-nvidia-pragma-optionnvunroll-all)似乎暗示这可能在 GLSL 中有效，至少在某些平台下是这样。）

似乎暗示近年来，AMD 可能支持展开 pragma（虽然可能不在 GLSL 中），但我不熟悉也没有尝试过：[unroll loops in an AMD OpenCL kernel](https://stackoverflow.com/q/19785731/711085)

（如果在 Chrome/Firefox 甚至其他场景中通过 WebGL 使用 GLSL，请记住，GLSL 编译可能通过[ANGLE](https://en.wikipedia.org/wiki/ANGLE_(software))进行管道传输，这可能会渲染到 Windows 上的 HLSL 后端。我对此了解非常有限，请不要'不想传播信息，所以绝对不要引用；我只是觉得有必要分享到目前为止我收集到的关于这个问题的信息，并且很乐意编辑这个答案（或者人们应该随时编辑这个答案）随着更多确认信息的出现。）

# git - git pull 后修改了 Git 子模块，我应该推送吗？

> ID：10334558
> 
> 赞同：2
> 
> 时间：2012-04-26T13:33:55.603
> 
> 标签：git, git-submodules

我有两个裸仓库`super`，`a`一个是 - 的克隆，一个是`super`-的`clone_super`克隆。我已将 repo 添加为.`a``clone_a``a``clone_super`

如果我现在在 in 中进行一些更改`clone_a`，推送这些并执行 a `git pull origin master`in `~/clone_super/a`，它将在`modify status`for中呈现，在in`~/clone_super/a`之后显示。`git status``~/clone_super`

如果我这样做`git submodule update`，`~/clone_super/a`将恢复到以前的提交。那么，是否意味着我每次更新它们时都需要提交和推送子模块以获取它们存在的存储库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:40:28.423

简短的回答是肯定的，您必须在更新后提交并推送子模块。

想想如果目录不是子模块，它将如何工作，每次更改文件时都必须提交并推送它。子模块完全相同，只是**super**不直接跟踪文件更改。相反，子模块内的存储库跟踪文件更改，**超级存储库通过跟踪子模块中的***提交*来跟踪这些更改。

这样做的好处是它允许以不同的粒度进行跟踪。**您可以在不更改超级**存储库的情况下在子模块中进行数十次跟踪更改，然后对**超级**存储库进行一次提交以反映子模块中的更改。成本是提交两次的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:41:43.307

是的，这是有意的，它可以让您在历史记录中保留哪个版本的 repo`a`正在使用每个版本的 repo`super`

# cakephp - CakePHP 2.1 hasAndBleongsToMany 还是 hasMany 通过？

> ID：10334559
> 
> 赞同：0
> 
> 时间：2012-04-26T13:34:05.397
> 
> 标签：cakephp, has-and-belongs-to-many, has-many-through

我是 CakePHP 中 hasAndBelongsToMany 关系的新手。我试图找出实现以下场景的最佳方法。我使用 hasAndBelongsToMany 还是 hasMany through？

在我的应用程序中，我正在创建维修订单。维修订单具有分配给员工的操作码。每个维修订单可以有多个操作码。所以，我很可能会有类似于以下的内容：

RepairOrder1 - OpCode1 由 Employee1 完成，OpCode2 由 Employee2 完成

从我在手册中阅读的内容来看，您不能在这种情况下使用 HABTM 关系的原因是，在保存数据时，会首先删除原始信息。但是，在 2.1 中，您可以设置一个“唯一”键，让它首先保留现有信息。那么我是通过创建一个 HABTM 还是一个 hasMany 呢？

**编辑**

这是我的架构：

```
/* repair_orders */
CREATE TABLE repair_orders (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    number VARCHAR(16),  //Auto-generated repair order number 
    created DATETIME DEFAULT NULL,
    modified DATETIME DEFAULT NULL
);

/* Employees */
CREATE TABLE employees (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(16), 
    created DATETIME DEFAULT NULL,
    modified DATETIME DEFAULT NULL
);

/* op_codes */
CREATE TABLE op_codes (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(16),
    sale_material DECIMAL(10,2),
    cost_material DECIMAL(10,2), 
    created DATETIME DEFAULT NULL,
    modified DATETIME DEFAULT NULL
); 
```

我正在尝试为维修订单分配多个操作代码，并跟踪哪个员工执行了该特定操作代码。所以我可以有一个带有 3 个操作码的维修订单，每个操作码都有不同的员工。所以我认为这需要另一个表，例如：

```
/* repair_order_assignments */
CREATE TABLE repair_order_assignments (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    repair_order_id INT(16),
    op_code_id INT(16),
    employee_id INT(16)
); 
```

所以我的联想是：

```
Repair_Order_Assignment hasMany Employee, Op_Code
Employee belongsTo Repair_Order_Assignment
Op_Code belongsTo Repair_Order_Assignment

Repair_Order_Assignment hasAndBelongsToMany Repair_Order
Repair_Order hasAndBelongsToMany Repair_Order_Assignment 
```

然后按照手册，当hasAndBelongsToMany关联保存时，先删除关联。您将丢失列中的额外数据，因为它不会在新插入中被替换。然而，它继续注意到在 2.1 中有一个可以设置的唯一变量来保存额外的数据。此设置将与唯一键一起使用还是我应该使用 hasMany through 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:23:03.760

我认为您在这种情况下都不会使用：

```
OpCode belongsTo RepairOrder
OpCode belongsTo Employee
RepairOrder hasMany OpCode
Employee hasMany OpCode 
```

检索数据时，请使用[CakePHP 的 Containable 行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)：

```
$this->RepairOrder->find('all',
    'contain' => array(
        'OpCode' => array(
            'Employee'
        )
    )
); 
```

# java - 如何使用通配符将泛型传递给函数而不进行强制转换？

> ID：10334563
> 
> 赞同：0
> 
> 时间：2012-04-26T13:34:10.703
> 
> 标签：java, generics, bounded-wildcard

这是我的问题：我在 A 类中的函数：

```
public void setData(Map<String,? extends ArrayList<? extends SomeInterface>>){...} 
```

我的电话：

```
Map<String, ArrayList<ImplementsSomeInterface>> a=...;
instanceOfA.setData(a); //does not compile
instanceOfA.setData((Map<String,? extends ArrayList<? extends SomeInterface>>) a); // works thanks to the Casting. 
```

我不认为这很干净。有没有办法在不放弃函数中使用通配符的情况下避免强制转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:44:52.633

首先你的`setData`方法应该是：

```
public void setData(Map<String,? extends List<? extends SomeInterface>>) 
```

您的地图声明应为：

```
Map<String, List<ImplementsSomeInterface>> a = ...; 
```

这几乎就是您对原始问题进行编辑后得到的结果。我对 to 所做的更改`ArrayList`不会`List`影响代码的行为。

**以下评论：**

```
public static void main() 
{
    Map<String, List<Double>> map = new HashMap<String, List<Double>>();
    map.put("prices", new ArrayList<Double>(Arrays.asList(1.1, 2.2, 3.3)));

    setData(map);
}

public static void setData(Map<String,? extends List<? extends Serializable>> map)      
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:43:07.897

问题是 setData 将 Map> 作为参数， `Map<String,? extends ArrayList<? extends SomeClass>>`而在您的第一次调用（未编译的调用）中，您试图将其传递给`Map<String,? extends SomeClass>`

Java 不能自动将子类 `SomeClass` 转换为子类， `ArrayList<? extends SomeClass>` 因为它不一定是 ArrayList 的实例。

# html5-video - Spotify 应用程序中不允许视频吗？

> ID：10334570
> 
> 赞同：0
> 
> 时间：2012-04-26T13:34:23.957
> 
> 标签：html5-video, spotify

我已经尝试过了（使用 html 5 标签），但得到了意想不到的结果。我没有找到任何明确的文档表明它*不受支持*，但到目前为止我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:45:06.380

Spotify 客户端不支持 HTML5 视频标签。

有关受支持内容的详细概述，请从 Spotify 的“开发”菜单中选择“显示 HTML5 支持”。

# javascript - 未找到 AjaxManager...null

> ID：10334571
> 
> 赞同：0
> 
> 时间：2012-04-26T13:34:24.430
> 
> 标签：javascript, jquery, asp.net, telerik

我有一个`User Control`和一个`Content Page`。在 中`Content Page`，我有一个如下所示的`RadDockLayout control`内部。`Update panel`我有一个`Image button`，一旦用户交换了`RadDock`by的位置`Drag Drop`。用户按下保存按钮将订单保存在数据库中。

```
<asp:updatepanel id="UpdatePanel1" runat="server">
    <ContentTemplate>
        <telerik:RadDockLayout runat="server" OnLoadDockLayout="RadDockLayout1_LoadDockLayout"
            ID="RadDockLayout1" OnSaveDockLayout="RadDockLayout1_SaveDockLayout">

                        <telerik:RadDockZone runat="server" Orientation="Horizontal" ID="HealthZone" Visible="false"
                            BorderStyle="None" Style="margin: 0;">
                        </telerik:RadDockZone>
                        <telerik:RadDockZone runat="server" Orientation="Horizontal" ID="RadDockZone1" BorderStyle="None"
                            Style="margin: 0; width:540px;">
                        </telerik:RadDockZone>
                        <telerik:RadDockZone runat="server" Orientation="Horizontal" ID="AdZone" Visible="false"
                            BorderStyle="None" Style="margin: 0;" Width="324px">
                        </telerik:RadDockZone>

        </telerik:RadDockLayout>

    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="imgsave" EventName="Click" />
    </Triggers>
</asp:updatepanel> 
```

在保存过程中，我调用了另一个函数。这也在`User Control`.

```
public void RePopulateOverview(UserControl overviewuc)
{
    RePopulated = true;
    CurrentDockStates.Clear();
    RadAjaxManager AjaxManager = RadAjaxManager.GetCurrent(this.Page);
    AjaxManager.AjaxSettings.Clear();
    AjaxManager.AjaxSettings.AddAjaxSetting(AjaxManager, overviewuc);
    //InitiateAjaxRequest
    RadScriptManager.RegisterStartupScript(this.UpdatePanel1, 
    this.GetType(), "OverviewReLoadScript" + 
    Guid.NewGuid().ToString().Replace("-", "a"), 
    "javascript:InitiateAjaxRequest();", true);
} 
```

下面是相应的javascript函数，如下所示。

```
<script type="text/javascript">
    function InitiateAjaxRequest() {
        if ($find("<%= Telerik.Web.UI.RadAjaxManager.GetCurrent(this.Page).ClientID %>") != null)
            $find("<%= Telerik.Web.UI.RadAjaxManager.GetCurrent(this.Page).ClientID %>").ajaxRequest();
        else {
            alert("AjaxManager not found..." + $find("<%= Telerik.Web.UI.RadAjaxManager.GetCurrent(this.Page).ClientID %>"));
        }
    } 
</script> 
```

我的问题是当我在`presses Save Button second time`下面。`crashes``Error Message`

## 未找到 AjaxManager...null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:33:17.103

试试这个作为一种解决方法：

```
<script type="text/javascript">
    var ajaxMgrInstance = null;
    function InitiateAjaxRequest() {
        if (ajaxMgrInstance == null) {
            ajaxMgrInstance == $find("<%= myRadAjaxManager.ClientID %>");
        }
        if (ajaxMgrInstance != null) {
            ajaxMgrInstance.ajaxRequest();
        }
        else {
            alert("AjaxManager not found..." + "<%= myRadAjaxManager.ClientID %>");
        }
    } 
</script> 
```

同时，我将尝试更好地定位问题的根本原因。

**编辑：**更新`$find`调用以匹配 Telerik 的 API 文档的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:58:05.713

应该是这样的。

```
var ID;
function InitiateAjaxRequest() {
    if (ID == null) {
        ID = $find("<%= Telerik.Web.UI.RadAjaxManager.GetCurrent(this.Page).ClientID %>");
        ID.ajaxRequest();
    }
    else
        ID.ajaxRequest();
} 
```

# mediawiki - 未找到 LocalSettings.php - mediawiki 安装

> ID：10334572
> 
> 赞同：4
> 
> 时间：2012-04-26T13:34:27.407
> 
> 标签：mediawiki, bluespice

当我想安装 mediawiki 1.18.2 时，在安装过程开始时它会告诉“找不到 LocalSettings.php”。单击下一步后，会出现一个空白页。它试图在我的服务器上找到 LocalSettings.php，但不存在这样的文件。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T02:24:03.780

从[MediaWiki](http://mediawiki.org/wiki/mediawiki)网站[安装说明](http://www.mediawiki.org/wiki/Manual%3aConfiguration_settings)：

```
This is an index of all supported configuration options based on the DefaultSettings.php file.

Never edit DefaultSettings.php; copy appropriate lines to LocalSettings.php instead and amend them as appropriate. 
```

通过复制 DefaultSettings.php 创建您自己的 LocalSettings.php，然后检查并删除您不需要/不需要的内容。

# php - php OOps 文件上传工作脚本

> ID：10334573
> 
> 赞同：-2
> 
> 时间：2012-04-26T13:34:31.447
> 
> 标签：php, file, upload

这是我从 devshed 获得的脚本。它在 Opera 和其他（而不是 IE）中运行良好。我的问题是：这个脚本如何在没有 的情况下工作`$_FILES['userfile']['name'] & $_FILES['userfile']['tmp_name']`？

```
<?php
    class FileUploader
    {
    private $uploadFile;
    private $name;
    private $tmp_name;
    private $type;
    private $size;
    private $error;
    private $allowedTypes=array
    ('image/jpeg','image/gif','image/png','text/plain','application/ms-word');

    public function __construct($uploadDir="./uploadfl/")
    {
    if(!is_dir($uploadDir)){
    throw new Exception('Invalid upload directory.');
    }

    if(!count($_FILES))
    {
    throw new Exception('Invalid number of file upload parameters.');
    }

    foreach($_FILES['userfile'] as $key=>$value)
    {
    $this->{$key}=$value;
    }

    if(!in_array($this->type,$this->allowedTypes))
    {
    throw new Exception('Invalid MIME type of target file.');
    }

    $this->uploadFile=$uploadDir.basename($this->name); 

    }
    // upload target file to specified location

    public function upload(){
    if(move_uploaded_file($this->tmp_name,$this->uploadFile)){
    return true;
    }

    }
    }
    ?>

    <?php
      if($_POST['send']){
    //require_once 'fileuploader.php';
    $fileUploader=new FileUploader();
    if($fileUploader->upload()){
    echo 'Target file uploaded successfully!';
    }
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:42:59.390

回答你的问题（这个脚本如何在没有 $_FILEs['userfile']['name'] & $_FILEs['userfile']['tmp_name'] 的情况下工作）：没有它它确实可以工作，因为数组键被分配为属性这里：

```
$this->{$key}=$value; 
```

因此，现在可以将其称为 $_FILES['userfile']['tmp_name'] 而不是

```
$this->tmp_name 
```

您已经得到了关于为什么它可能不适用于所有浏览器的回复。

希望有帮助，斯特凡

# javascript - 如何忽略触发器内部兄弟触发的鼠标事件（图像区域）

> ID：10334574
> 
> 赞同：0
> 
> 时间：2012-04-26T13:34:51.170
> 
> 标签：javascript, jquery, html, image, mouse

好的，让我向您解释这个非常奇怪的问题，我现在正在第二周工作，但没有任何解决方案。

想象一下，我有一张 100x100 像素的图像。在整个图像周围，我有一个 100x100 的图像区域（我们将图像区域称为 ALPHA）。我在图像上还有第二个图像区域，但这次不是在整个图像周围，而是在图像中间（10x10）的内部（我们称第二个图像区域为 BETA）。

这意味着图像区域 BETA 在图像区域 ALPHA 内。

现在，当我将鼠标悬停在图像区域 ALPHA 上时，我想为图像添加边框，并使用以下代码（通过 jQuery）将鼠标移出图像区域 ALPHA 时删除边框：

```
$("area.ALPHA").hover(
  function () {
    $('img').css('border','1px solid #000');
  }, 
  function () {
    $('img').css('border','none');
  }
); 
```

这段代码运行良好。

但我也希望当我将鼠标悬停在我的第二个图像区域 BETA 上时，上面的代码将被执行。但它不起作用。

我知道它为什么不起作用，因为当我将鼠标悬停在图像区域 BETA 上时，我也将鼠标移出图像区域 ALPHA。

我试图解决这个怪异的问题，但不幸的是我意识到我自己无法解决这个问题，所以请帮助我。例如有没有可能做这样的事情？：

```
if ($("area#ALPHA").mouseout === false && $("area#BETA").mouseenter === true) {
   // ignore the first event (or something like this)...
} 
```

我的第一个想法是 event.stopPropagation()，但它不起作用。也许我只是用错了方法......

PS：我知道我可以只使用 CSS 或不使用图像区域来做同样的事情。但我必须这样做......

如果你不明白我的解释，我准备再更准确地解释一遍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:43:28.753

您可能会更好地使用 CSS：

```
area#ALPHA {
    border:none;
}

area#ALPHA:hover {
    border: 1px solid #000;
} 
```

当鼠标处于 alpha 状态时，这将添加一个边框，但会在鼠标处于 BETA 时将其视为不在 ALPHA 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:45:04.193

您需要将图像修改代码放在事件之外，即。另一个功能。绑定hover handler，调用alpha的外部事件函数，反之亦然。

让我闭嘴，代码说话：

```
function insideAlpha(){
    $('.result').text("inside alpha");
}

function outsideAlpha(){
    $('.result').text("outside alpha");
}

$(function(){
    $("div.alpha").hover(
      function () {
          insideAlpha();
      }, 
      function () {
          outsideAlpha();
      }
    );
    $("div.beta").hover(
        function(e){
            e.stopPropagation();
            outsideAlpha();
        },
        function(e){
            e.stopPropagation();
            insideAlpha();
        }
     );
});​ 
```

这是工作[小提琴](http://jsfiddle.net/fBKUw/)：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:59:13.377

这是我对您的要求[示例的解释](http://jsfiddle.net/nEdQ8/3/)

```
 $(document).ready(function(){

      $("#ALPHA, #BETA").hover(
        function () {
          $(this).css('border','1px solid #000');
        }, 
        function () {
          $(this).css('border','none');
        }
     );
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T14:04:25.417

这也有效，[http://jsfiddle.net/uurBc/](http://jsfiddle.net/uurBc/)

```
 $(".hover").mouseenter(function(e){
       result = $(this).attr('id')
       $(".result").html(result)
       e.stopPropagation();
     })

   $(".hover").mouseleave(function(e){
       $(".result").html("")
       $(this).parents(".hover").trigger('mouseenter')
       e.stopPropagation();
   })​ 
```

诀窍是在您离开孩子（测试版）时手动触发父级（alpha）的 mouseenter 事件。

# iphone - 如何使用 UIImageView 和 UILabel 创建 UIBarButtonItem

> ID：10334576
> 
> 赞同：3
> 
> 时间：2012-04-26T13:34:55.350
> 
> 标签：iphone, objective-c, ios, uitoolbaritem

![在此处输入图像描述](../Images/f62d004beb610ad411bd057b5c3fbfcb.png)

如上所示，我想在工具栏上创建一个带有 UIImageView 和 UILabel 的 UIBarButtonItem。我试过了

```
UIButton *likecommButton = [UIButton buttonWithType:UIButtonTypeCustom];
    likecommButton.backgroundColor = [UIColor clearColor];
    [likecommButton addTarget:self action:@selector(likecommButtonClicked:) forControlEvents:UIControlEventTouchDown];

    UIImageView *likeImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"like.png"]];
    likeImageView.frame = CGRectMake(0.0, 0.0, LikeCommentImageEdge, LikeCommentImageEdge);
    likeImageView.backgroundColor = [UIColor clearColor];
    [likecommButton addSubview:likeImageView];
    [likeImageView release];

    CGSize numberSize = [@"99" sizeWithFont:[UIFont fontWithName:@"Verdana-Bold" size:12] 
                                     constrainedToSize:CGSizeMake(20.0, 20.0)  
                                         lineBreakMode:UILineBreakModeTailTruncation];

    _likeNumberLabel = [[UILabel alloc] initWithFrame: CGRectMake(likeImageView.frame.size.width, 0.0, numberSize.width, numberSize.width)];
    _likeNumberLabel.backgroundColor = [UIColor clearColor];
    _likeNumberLabel.textColor = [UIColor whiteColor];
    _likeNumberLabel.font = [UIFont fontWithName:@"Verdana-Bold" size:12];
    _likeNumberLabel.textAlignment = UITextAlignmentRight;
    _likeNumberLabel.lineBreakMode = UILineBreakModeClip;
    [likecommButton addSubview:_likeNumberLabel];

    UIImageView *commentImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"comment.png"]];
    commentImageView.frame = CGRectMake(_likeNumberLabel.frame.origin.x + _likeNumberLabel.frame.size.width, 0.0, LikeCommentImageEdge, LikeCommentImageEdge);
    commentImageView.backgroundColor = [UIColor clearColor];
    [likecommButton addSubview:commentImageView];
    [commentImageView release];

    _commentNumberLabel = [[UILabel alloc] initWithFrame: CGRectMake(toolBarButtonWidth - numberSize.width, 0.0, numberSize.width, numberSize.width)];
    _commentNumberLabel.backgroundColor = [UIColor clearColor];
    _commentNumberLabel.textColor = [UIColor whiteColor];
    _commentNumberLabel.font = [UIFont fontWithName:@"Verdana-Bold" size:12];
    _commentNumberLabel.textAlignment = UITextAlignmentRight;
    _commentNumberLabel.lineBreakMode = UILineBreakModeClip;
    [likecommButton addSubview:_commentNumberLabel];

    likecommButton.frame = CGRectMake(0.0, 0.0, toolBarButtonWidth, numberSize.height);

    _likeCommCountButton = [[UIBarButtonItem alloc] initWithCustomView:likecommButton];
    _likeCommCountButton.width = toolBarButtonWidth;
    _likeCommCountButton.enabled = NO; 
```

但只能得到这个

![在此处输入图像描述](../Images/e66e4d469fcc0ab4d9ad31861b657778.png)

如何像第一张图片一样创建 UIBarButtonItem，包括 UIImageView 和 UILabel 也有 UIBarButtonItemStyleBordered 样式？

谢谢

* * *

更新 20120506

这是遵循@RA 的想法——小工具栏

![在此处输入图像描述](../Images/a9b7252ab93db2c2c7a2c5e021da2c87.png)

这个问题我知道如何将框架设置为工具栏，但无法获得其他两个 UIBarButtonItems“Like”和“Comment”的高度。那么我无法设置小工具栏的高度。

然后我尝试将所有控制器、两个图像视图和两个标签添加到 UISegmentControl

![在此处输入图像描述](../Images/b4dfd0f5171decbdd0341013ca897a10.png)

如您所见，第三个 uibarbuttonitem（UISegmentControl 之一）与其他两个不同。我设置

```
segmentControl.tintColor = [UIColor clearColor]; 
    segmentControl.backgroundColor = [UIColor clearColor]; 
```

不行。

我更喜欢@RA 的那个，但需要一种方法来获取另外两个 UIBarButtonItem 的高度来设置第三个小工具栏的高度。

* * *

更新 20120509

我花了太多时间，我必须继续前进，我现在正在使用 UISegmentControl 解决方案（哪种风格略有不同）。我不会结束这个问题。以后我会继续研究它。非常感谢下面朋友的帮助，尤其是@RA @vishiphone 你们给了我不同的想法。希望我们仍然可以团结起来挖掘更多的问题。我稍后会继续这个话题。希望你们还在这里！非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T21:15:44.617

尝试将这些作为 UIButton 的普通/突出显示图像 - 作为 customView`UIBarButtonItem`

（可伸缩宽度）

1.  BarButtonPressed;
2.  BarButtonPressed@2x
3.  条形按钮普通
4.  BarButtonNormal@2x

![BarButtonPressed](../Images/55eb081c3b0cacc8d77ce71fdc5db780.png) ![BarButtonPressed@2x](../Images/6bb8b6303d703e90278c4da585e5ef2e.png) ![条形按钮普通](../Images/5e647dc1ef8f7bc62990ce4bfc4b1301.png) ![BarButtonNormal@2x](../Images/b899004b1f377aacc7320f436e8b2907.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:45:30.827

我明白了，他们在做什么。

在该图像中，他们创建了`UIToolBar`一个小尺寸的，并在其中添加了三个`UIBarButtonItem's`，其中`toolbar`包含 2 个图像和 1 个标签 name `respectively`。

之后，将其添加`UIToolBar`为`BarButtonItem with Bordered style`.

但是，`trick`在添加这三个按钮时，`UIToolbar`它们是`not having any border style`针对那个 Barbuttons 的（`UIBarButtonStyleNone`-> 像这样但不完全是）。

所以只有看起来它有 2 个图像和一个标签。我已经做过这样的事情了。但没有这么棘手..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T04:19:23.367

![在此处输入图像描述](../Images/5453c8442fdca929da1173cf9c4922bf.png)试试这行代码，我认为这会对你有所帮助。

```
UIView *BtnView = [[UIView alloc] initWithFrame:CGRectMake(0,0,70,35)];
UIButton *myButton = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
[myButton setFrame:CGRectMake(0,3,70,32)];
[myButton setImage:[UIImage imageNamed:@"firstImage.png"] forState:UIControlStateNormal];
[myButton addTarget:self action:@selector(compete) forControlEvents:UIControlEventTouchUpInside];

UIImageView *imageView=[[UIImageView alloc]initWithFrame:CGRectMake(52, -4, 21, 21)];
[imageView setImage:[UIImage imageNamed:@"Secongimage.png"]];
UILabel *badge_Label=[[UILabel alloc]initWithFrame:CGRectMake(5,3, 15, 15)];
badge_Label.backgroundColor=[UIColor clearColor];
badge_Label.font=[UIFont systemFontOfSize:12];
[badge_Label setText:@"20"];
[imageView addSubview:badge_Label];

[BtnView addSubview:myButton];
[BtnView addSubview:imageView];
[myButton release];

UIBarButtonItem *CompeteButton = [[UIBarButtonItem alloc]initWithCustomView:BtnView]; 

self.navigationItem.rightBarButtonItem = CompeteButton;

UIView *leftBtnView = [[UIView alloc] initWithFrame:CGRectMake(0,0,40,40)];
UIButton *menu_Button = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
[menu_Button setFrame:CGRectMake(0,3,37,37)];
[menu_Button setImage:[UIImage imageNamed:@"menubut.png"] forState:UIControlStateNormal];
[menu_Button addTarget:self action:@selector(list) forControlEvents:UIControlEventTouchUpInside];

[leftBtnView addSubview:menu_Button];

UIBarButtonItem *menuButton = [[UIBarButtonItem alloc]initWithCustomView:leftBtnView]; 
self.navigationItem.leftBarButtonItem = menuButton; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:42:35.783

我认为您错过了为每个子视图设置框架。尝试使用 Frames 添加，然后您将得到您想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T13:43:20.690

您应该创建一个`UIView`which 将成为 the`UILabel`和 the的包装器`UiImageView`，将它们添加为 this 的子视图`UiView`，然后像上面一样使用：

`_likeCommCountButton = [[UIBarButtonItem alloc] initWithCustomView:_wrapper_view_];`

并且不要忘记正确设置子视图的框架。

# java - 条码 EAN-13 转二进制

> ID：10334577
> 
> 赞同：0
> 
> 时间：2012-04-26T13:34:57.770
> 
> 标签：java, barcode

我需要从 EAN-13 位创建字节数组。我如何理解，这里是描述：[http ://en.wikipedia.org/wiki/International_Article_Number_%28EAN%29#Binary_encoding_of_data_digits_into_EAN-13_barcode](http://en.wikipedia.org/wiki/International_Article_Number_%28EAN%29#Binary_encoding_of_data_digits_into_EAN-13_barcode)

也许有人已经创建了这个算法？请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:20:04.350

以下代码可以编码 EAN-13 条形码。该`funnyEncode`方法是您似乎需要的特殊版本。

```
public class EAN13Encoder {

    public static void main(String[] args) {
        byte[] result = encode(4821111111111L);
        result = funnyEncode(4821111111111L);
    }

    public static byte[] encode(long ean) {
        EAN13Encoder encoder = new EAN13Encoder(12);
        encoder.buildBars(getDigitArray(ean));
        return encoder.getByteArray();
    }

    public static byte[] funnyEncode(long ean) {
        EAN13Encoder encoder = new EAN13Encoder(16);
        encoder.moveBitPos(9);
        encoder.buildBars(getDigitArray(ean));
        byte[] byteArray = encoder.getByteArray();
        return hexEncode(byteArray);
    }

    private byte[] byteArray;
    private int bitPos = 0;

    private EAN13Encoder(int byteArrayLength) {
        byteArray = new byte[byteArrayLength];
    }

    private byte[] getByteArray() {
        return byteArray;
    }

    private void moveBitPos(int diff) {
        bitPos += diff;
    }

    public static int[] getDigitArray(long ean) {
        int[] digitArray = new int[13];
        int index = 12;
        while (ean > 0) {
            digitArray[index] = (int)(ean % 10);
            ean = ean / 10;
            index--;
        }
        return digitArray;
    }

    private void buildBars(int[] digitArray) {
        // left synchronization bars
        addBits(3, 0x05);

        // left half
        int firstDigit = digitArray[0];
        int lg_switch = LG_SWITCH[firstDigit];
        for (int i = 0; i < 6; i++) {
            int digit = digitArray[i + 1];
            int pattern = (lg_switch & (0x20 >> i)) == 0 ? L_BARS[digit] : G_BARS[digit];
            addBits(7, pattern);
        }

        // middle synchronization bars
        addBits(5, 0x0a);

        // right half
        for (int i = 0; i < 6; i++) {
            int digit = digitArray[i + 7];
            int pattern = R_BARS[digit];
            addBits(7, pattern);
        }

        // right synchronization bars
        addBits(3, 0x05);
    }

    private void addBits(int numBits, int pattern) {
        int currentBytePos = bitPos >> 3;
        int remainingBits = 8 - (bitPos & 0x07);
        byte currentByte = byteArray[currentBytePos];
        if (numBits <= remainingBits) {
            currentByte = (byte)(currentByte | (pattern << (remainingBits - numBits)));
        } else {
            currentByte = (byte)(currentByte | (pattern >> (numBits - remainingBits)));
            byteArray[currentBytePos] = currentByte;
            currentBytePos++;
            currentByte = (byte)(pattern << (8 - (numBits - remainingBits)));
        }
        byteArray[currentBytePos] = currentByte;
        bitPos += numBits;
    }

    private static byte[] hexEncode(byte[] src) {
        byte[] dest = new byte[src.length * 2];
        for (int i = 0; i < src.length; i++) {
            dest[i * 2] = HEX_DIGITS[(src[i] & 0xff) >>> 4];
            dest[i * 2 + 1] = HEX_DIGITS[src[i] & 0x0f];
        }
        return dest;
    }

    private static final int[] LG_SWITCH = { 0x00, 0x0b, 0x0d, 0x0e, 0x13, 0x19, 0x1c, 0x15, 0x16, 0x1a };    
    private static final int[] L_BARS = { 0x0d, 0x19, 0x13, 0x3d, 0x23, 0x31, 0x2f, 0x3b, 0x37, 0x0b };
    private static final int[] G_BARS = { 0x27, 0x33, 0x1b, 0x21, 0x1d, 0x39, 0x05, 0x11, 0x09, 0x17 };
    private static final int[] R_BARS = { 0x72, 0x66, 0x6c, 0x42, 0x5c, 0x4e, 0x50, 0x44, 0x48, 0x74 };
    private static final byte[] HEX_DIGITS = { 0x30, 0x31, 032, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x41, 0x42, 0x43, 0x44, 0x45, 0x46 };
} 
```

# ios - 调整图像大小 Objective-C

> ID：10334581
> 
> 赞同：4
> 
> 时间：2012-04-26T13:35:13.790
> 
> 标签：ios, objective-c, uiimage, uikit

我正在尝试缩小使用 iPhone 4 及更高版本拍摄的 Objective-C 中的图像，以便我可以尽快将其发送到服务器。目前，全尺寸图像需要很长时间。

我正在尝试的缩小规模的电流是：

```
CGSize imageSize;

imageSize = CGSizeMake(484, 888);

UIImage *img = [UIImage imageWithContentsOfFile:path];

UIGraphicsBeginImageContext( imageSize );
[img drawInRect:CGRectMake(0,0,imageSize.width,imageSize.height)];
UIImage* realfrontImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
NSData *frontImageData = UIImageJPEGRepresentation(realfrontImage, 1.0); 
```

这给了我一个 320x460 的图像，如何获得我想要的 484x888 大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T13:44:35.643

```
-(UIImage*)imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize {
    UIGraphicsBeginImageContext(newSize);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();
    return newImage;
} 
```

使用此方法缩小图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:39:16.630

// 用你的调整比例调用这个函数...

```
 -(UIImage*)scaleByRatio:(float) scaleRatio
{ 
  CGSize scaledSize = CGSizeMake(self.size.width * scaleRatio, self.size.height * scaleRatio);
   CGColorSpaceRef colorSpace;
   int   bitmapBytesPerRow;
   bitmapBytesPerRow   = (size.width * 4);

    //The output context.   
   UIGraphicsBeginImageContext(scaledSize);
   CGContextRef context = context = CGBitmapContextCreate (NULL,
                             scaledSize .width,
                             scaledSize .height,
                             8,      // bits per component
                             bitmapBytesPerRow,
                             colorSpace,
                             kCGImageAlphaPremultipliedLast);

 //Percent (101%)    
 #define SCALE_OVER_A_BIT 1.01

//Scale.
CGContextScaleCTM(context, scaleRatio * SCALE_OVER_A_BIT, scaleRatio *      SCALE_OVER_A_BIT);
[self drawAtPoint:CGPointZero];

  //End?
  UIImage *scaledImage = UIGraphicsGetImageFromCurrentImageContext();
 UIGraphicsEndImageContext();
 return scaledImage;
} 
```

希望对你有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:40:14.600

也许这篇文章可以帮助你：[如何在 iPhone 的 Objective-C 中以编程方式调整图像大小](https://stackoverflow.com/questions/4712329/how-to-resize-the-image-programatically-in-objective-c-in-iphone)

当心...您在 Objective-C 中执行此操作，...而不是 XCode。XCode 是您在其中开发 Objective-c 的应用程序。就像 Netbeans 或 Eclipse 通常用于 Java 和 PHP。

# c# - 传递空参数

> ID：10334582
> 
> 赞同：0
> 
> 时间：2012-04-26T13:35:14.960
> 
> 标签：c#, asp.net-mvc, parameter-passing

我目前在解决这个问题时遇到了一些麻烦。我有一个不需要任何参数的方法，现在我需要添加一个参数，但我不想在调用该方法的所有不同位置添加参数。这是我目前的方法：

```
private IEnumerable<SearchItems> GetItems(ItemDescriptionFormViewModel viewModel = null)
    {
        IOrderedQueryable<ItemDescription> items= _itemDescriptionRepository.FindAll().OrderBy(
            c => c.Sort == null).ThenBy(
                c => c.Sort).ThenBy(c => c.Description);

        if(items.Count()==0)
            ModelState.AddModelError("", string.Format("No active {0} entered.", Kids.Resources.Entities.ItemDescription.EntityNamePlural));
       return
            _itemDescriptionRepository.FindAll().OrderBy(c => c.Description).Where(a=>a.IsActive == true || viewModel == null || a.ItemDescriptionId == viewModel.ItemDescriptionId).Select(
                c => new SearchItems {Text = c.Description, Value = c.ItemDescriptionId.ToString()});
    } 
```

我尝试将 null 作为参数传递给正在调用此方法的其他地方，但出现错误。什么是超载这个问题的方法？

目的：添加 viewModel 的目的是因为我有一个下拉列表，其中包含可供选择的活动项目。一旦用户选择了一个活动项目，然后由于某种原因该项目变得不活动，用户就去编辑他们的选择。在下拉列表中应该有活动项目的列表以及它们之前选择的现在不活动的项目。我正在使用 ViewModel 来检查先前选择的项目的 id。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:48:49.643

您可以将默认值分配给`viewModel`：

```
private IEnumerable<SearchItems> GetItems(
    ItemDescriptionFormViewModel viewModel = null)
{
    if (viewModel == null) 
        viewModel = new ItemDescriptionFormViewModel(); 
```

这样，如果您只是调用`GetItems()`，它将被`viewModel`视为`new ItemDescriptionFormViewModel()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:42:50.373

像这样声明它：

```
private IEnumerable<SearchItems> GetItems(ItemDescriptionFormViewModel viewModel = null) 
```

并确保`null`检查您的方法，如下所示：

```
return
        _itemDescriptionRepository.FindAll().OrderBy(c => c.Description).Where(a=> viewModel == null || (a.IsActive == true || a.ItemDescriptionId == viewModel.ItemDescriptionId)).Select(
            c => new SearchItems {Text = c.Description, Value = c.ItemDescriptionId.ToString()}); 
```

这将允许您使用`GetItems()`和调用该方法`GetItems(ItemDescriptionFormViewModel viewModel)`

编辑：无视？因为 ItemDescriptionFormViewModel 是一个类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:43:39.287

您在此处取消引用空引用：

```
_itemDescriptionRepository.FindAll()
    .OrderBy(c => c.Description)
    .Where(a=>a.IsActive == true || 
        a.ItemDescriptionId == viewModel.ItemDescriptionId) // if viewModel null, this throws
    .Select(c => new SearchItems 
    {
        Text = c.Description, Value = c.ItemDescriptionId.ToString()
    }); 
```

`Where()`因此，如果视图模型为空，您可以更新您的子句以添加 pass：

```
...
.Where(a => a.IsActive || viewModel == null || viewModel.ItemDescriptionId == a.ItemDescriptionId) 
```

然后你可以`null`安全地作为参数传递，你甚至可以设置一个默认参数值，所以如果没有传递参数，它假定`null`.

当然，这是假设`ItemDescriptionFormViewModel`是一个类，如果它是一个结构，那么你必须让它可以为空`ItemDescriptionFormViewModel?`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:45:38.933

如果您想保留这两种方法（我的意思是 GetItems() 和 GetItems(viewModel)），它们将自动重载。

如果你想要第二种方法，你可以像这样传递参数

```
 private IEnumerable<SearchItems> GetItems(ItemDescriptionFormViewModel? viewModel) 
```

现在您可以将 null 作为其参数传递。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T12:48:47.923

大家...感谢您在尝试解决此问题时的所有帮助和努力。我终于能够解决它，这是我解决问题的人：[检查列表项 ID](https://stackoverflow.com/questions/10340156/checking-list-item-id)

# installation - Wix：应用属性发布

> ID：10334585
> 
> 赞同：1
> 
> 时间：2012-04-26T13:35:21.500
> 
> 标签：installation, wix, windows-installer, wix3.5

我的 Wix 项目包含 3 个文件：

1) **Product.wsx** - 主 wxs 文件

2) **MyDlg.wxs** - 我的带有复选框的自定义对话框

3) **1.txt** - 任何文件

**产品.wxs**：

```
 <Media Id="1" Cabinet="media.cab" EmbedCab="yes" />      
    <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />

  <Directory Id="TARGETDIR" Name="SourceDir">
     <Directory Id="ProgramFilesFolder">
        <Directory Id="INSTALLFOLDER" Name="My" />
     </Directory>
  </Directory>

  <DirectoryRef Id="INSTALLFOLDER">
     <Component Id="ProductComponent" Guid="{FC9CE1FD-9BF6-4746-9918-5B2DFA312A2B}">
        <File Id="img" Source="$(sys.CURRENTDIR)1.txt" Name="1.txt" KeyPath="yes" Vital="yes" DiskId="1" />
     </Component>
  </DirectoryRef>

    <Feature Id="ProductFeature" Title="My" Level="1" Absent="allow">
        <ComponentRef Id="ProductComponent" />
     <Condition Level="0">RECOGVERSION = 0</Condition>
  </Feature>

  <UI>
     <UIRef Id="WixUI_Mondo" />
     <UIRef Id="WixUI_ErrorProgressText"/>

     <Publish Dialog="LicenseAgreementDlg" Control="Next" Event="NewDialog" Value="MyDlg" Order="10" >LicenseAccepted = "1"</Publish>
     <Publish Dialog="MyDlg" Control="Back" Event="NewDialog" Value="LicenseAgreementDlg" Order="10">NOT Installed</Publish>
     <Publish Dialog="CustomizeDlg" Control="Back" Event="NewDialog" Value="MyDlg" Order="10">NOT Installed</Publish>
  </UI> 
```

**MyDlg.wxs**：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
   <Fragment>
      <UI>
         <Property Id="RECOGVERSION" Value="0" Secure="yes" /><br/>

         <Dialog Id="MyDlg" Width="370" Height="270" Title="My empty dialog">

            <Control Id="RecognitionServerText" Type="Text" X="25" Y="53" Width="340" Height="15" Transparent="yes" NoPrefix="yes" Text="Select version:" />
            <Control Id="RecognitionServerRadioButtonGroup" Type="RadioButtonGroup" X="16" Y="70" Width="120" Height="73" Property="RECOGVERSION" >
               <RadioButtonGroup Property="RECOGVERSION">
                  <RadioButton Height="15" Text="version 1 (old)" Value="0" Width="120" X="0" Y="0" />
                  <RadioButton Height="15" Text="version 2 (new)" Value="1" Width="120" X="0" Y="18" />
               </RadioButtonGroup>
            </Control>

            <Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="!(loc.WixUINext)">
               <Publish Property="RECOGVERSION" Value="0">RECOGVERSION = "0"</Publish>
               <Publish Property="RECOGVERSION" Value="1">RECOGVERSION = "1"</Publish>
               <Publish Event="NewDialog" Value="CustomizeDlg" Order="10" />
            </Control>
            <Control Id="Back" Type="PushButton" X="180" Y="243" Width="56" Height="17" Text="!(loc.WixUIBack)">
               <Publish Event="NewDialog" Value="LicenseAgreementDlg" Order="10" />
            </Control>
            <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="!(loc.WixUICancel)">
               <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
            </Control>

         </Dialog>
      </UI>
   </Fragment>
</Wix> 
```

当我尝试单击自定义对话框中的“下一步”按钮时，**什么也没有发生**。我无法进入下一个对话框。

我尝试从 MyDlg.wxs 中删除这些行：

```
<Publish Property="RECOGVERSION" Value="0">RECOGVERSION = "0"</Publish>
<Publish Property="RECOGVERSION" Value="1">RECOGVERSION = "1"</Publish> 
```

它有效但在新窗口中但“RECOGVERSION”属性的**值没有更新。**

问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T03:13:32.690

**解决方案**

```
<Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="!(loc.WixUINext)">
   <Publish Event="NewDialog" Value="CustomizeDlg" Order="10">1</Publish>
   <Publish Property="RECOGVERSION" Value="[RECOGVERSION]" Order="11">1</Publish>
</Control> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:43:15.037

使用 ORCA 查看您的 MSI 的 ControlEvent 表。我猜是因为您没有指定 Order 属性，所以您的订单全错了，并且在您的增强 ControlEvents 有机会运行之前正在处理 NewDialog [NEXTDIALOG]。

# forms - 编辑对象时如何选择多个symfony复选框

> ID：10334586
> 
> 赞同：3
> 
> 时间：2012-04-26T13:35:24.663
> 
> 标签：forms, symfony1, symfony-1.4, symfony-forms

我有一个 symfony 1.4 应用程序，并以我`sfWidgetFormChoice`用来创建多个复选框的形式。

我可以毫无问题地设置默认值，但是在保存对象并查看编辑表单后，我无法检查复选框。

“选中”复选框中的值被内爆并保存到单个字段中。

例如：

![默认复选框设置](../Images/a3ba64644aa96089f38dcdeec07f3a32.png)

这是默认设置。这将保存到数据库中`Full-Time;Hourly`。这很好用。

当我编辑这个对象时，表单如下所示：

![编辑复选框设置](../Images/60c5481e51dddf221f8a3698facec568.png)

该`setDefault`功能在编辑对象时不起作用（因为那里有“数据”，所以我们不需要默认值）。

我如何创建字段对象：

```
$choices    = array(
    'Full-Time' => 'Full-Time',
    'Part-Time' => 'Part-Time',
    'Hourly'    => 'Hourly',
    'Contract'  => 'Contract'
);

$this->widgetSchema['emp_type'] = new sfWidgetFormChoice(
    array(
        'choices'   => $choices, 
        'multiple'  => true, 
        'expanded'  => true
        ),
    array()
);

$this->setDefault('emp_type', array('Full-Time', 'Hourly')); 
```

如何在编辑对象时设置要检查的适当复选框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:29:16.053

[sfWidgetFormChoice::render()](http://trac.symfony-project.org/browser/branches/1.4/lib/widget/sfWidgetFormChoice.class.php#L77)期望 $value 参数是一个数组。所以我认为有两种方法可以实现你想要的：

创建一个继承自 sfWidgetFormChoice 的新 Widget 类。只实现 render 方法：

```
 public function render($name, $value = null, $attributes = array(), $errors = array())    {
  $value = explode(';', $value);
  return parent::render($name, $value, $attributes, $errors);
} 
```

或者您可以调整渲染方法的调用者或您的模型，以便使用 $value 作为数组调用 sfWidgetFormChoice::render()（将爆炸放在其他地方）。

# html - 这个文件存储在哪里？

> ID：10334587
> 
> 赞同：-2
> 
> 时间：2012-04-26T13:35:25.977
> 
> 标签：html, favicon

我如何找到一个网站的`favicon`？例如，[Stack Overflow](http://www.stackoverflow.com/)`favicon`的位置在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:36:27.713

目前，`favicon`for Stack Overflow 位于：

*   [http://cdn.sstatic.net/stackoverflow/img/favicon.ico](http://cdn.sstatic.net/stackoverflow/img/favicon.ico)

要查找：

1.  [查看页面来源](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=75129)
2.  搜索`rel="shortcut icon"`和`rel="icon"`
    *   如果找到，以下`href`属性将包含`favicon`' 位置
    *   如果不存在，则`favicon`（如果存在）可以在`DOMAINNAME.COM/favicon.ico`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:36:34.650

[http://cdn.sstatic.net/stackoverflow/img/favicon.ico](http://cdn.sstatic.net/stackoverflow/img/favicon.ico)

# c# - 如何在c#中评估由字符串传递的函数

> ID：10334588
> 
> 赞同：2
> 
> 时间：2012-04-26T13:35:29.067
> 
> 标签：c#, methods, eval

我想知道 C# 中是否有一种方法可以执行方法，如果我们只有它的名称在字符串中？

```
string methodname="method"
this.RunMethod(methodname) 
```

类似的东西？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:38:39.280

尝试这个：

```
Type t = Type.GetType(typeName);
t.InvokeMember("method", BindingFlags.InvokeMethod | BindingFlags.Public, null, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:38:01.257

就像是

```
Type type = GetType("MyType");
MethodInfo methodInfo = type.GetMethod(methodName);
methodInfo.Invoke() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:38:31.623

我用了这样的东西：

```
typeof(StringValidator<T>).GetMethod(restriction.Operacion.Nombre).Invoke(null, param) as IList<T>; 
```

基于包含方法（StringValidator）的类的类型，然后我通过它的名称restriction.Operacion.Nombre 获取方法，然后调用它。

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:38:38.150

[这个例子](http://www.codeproject.com/Articles/19911/Dynamically-Invoke-A-Method-Given-Strings-with-Met)有你正在寻找的东西，即：

```
String s = (String)calledType.InvokeMember(
                methodName,
                BindingFlags.InvokeMethod | BindingFlags.Public | 
                    BindingFlags.Static,
                null,
                null,
                null); 
```

（显然，这可能会根据返回类型等而改变。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T13:38:50.327

如果方法不是静态的，则需要类型、方法名称和实例

检查[反射：如何使用参数调用方法](https://stackoverflow.com/questions/2202381/reflection-how-to-invoke-method-with-parameters)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T13:44:14.120

您可以创建一个泛型方法，以在您想要的任何实例上按名称调用方法：

```
public void RunMethodOn(object obj, String methodName,params Object[] args)
        {
            if(obj != null)
            {
                System.Reflection.MethodInfo method = null;
                method = obj.GetType().GetMethod(methodName);
                if (method != null)
                    method.Invoke(obj, args);
            }
        } 
```

并根据您的要求使用它来调用您自己的实例上的方法：

```
public void RunMethod(String methodName,params Object[] args)
            {
                   ExecuteOn(this, methodName, args);
            } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T13:50:01.210

您可以使用扩展方法很好地做到这一点：

```
public static class MethodEx
{
    public static void RunMethod(
         this object target,
         string methodName,
         params object[] values)
    {
        var type=target.GetType();
        var mi = 
          type.GetMethod(methodName,values.Select(v=>v.GetType()).ToArray());
        mi.Invoke(target,values);
    }
} 
```

...并按如下方式使用它：

```
void Main()
{
    var m=new Monkey();
    m.RunMethod("A",1);
    m.RunMethod("A","frog");
}

class Monkey
{
    public void A(int a)
    {
        Console.WriteLine("int A called");
    }
    public void A(string s)
    {
        Console.WriteLine("string A called");
    }
} 
```

它将根据提供的参数选择正确的重载，因此上面的代码给出了输出：

> int A 调用
> 
> 字符串 A 调用

我将更好的错误处理留给 OP。

# android - Android - 在底部向下滚动 listView

> ID：10334595
> 
> 赞同：0
> 
> 时间：2012-04-26T13:36:00.547
> 
> 标签：android, listview

我在android中使用自定义ListView来显示一些数据......默认情况下，我将ListView的大小设置为25。我希望当用户在listView的底部向下滑动时，除了显示另外25个视图上一个（列表现在应该显示 50 个元素）

如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:43:06.480

尝试使用这个

```
ListView lv = (ListView)findViewById(R.id.list_view);
lv.setOnScrollListener(new OnScrollListener() {
    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, 
        int visibleItemCount, int totalItemCount) {

            //load more content

    }
}); 
```

# linux - 获取linux中每个设备的内存映射

> ID：10334596
> 
> 赞同：6
> 
> 时间：2012-04-26T13:36:02.700
> 
> 标签：linux, memory, linux-kernel, device

如何获取 Linux 识别的所有物理设备的内存映射。我已经查看了 /proc/iomem 和 /proc/ioports。但是，我无法找到每个设备的内存映射。关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T02:15:08.877

据我所知，唯一通用的方法是`/proc/iomem`. 这向您显示了分配给谁的内存范围的内核视图。

如果您想了解更多详细信息，则需要查看每个单独的驱动程序。

`/proc/vmallocinfo`您可能会从因为`ioremap()`使用`vmalloc`（尽管可能不是在所有架构上）获得更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T23:00:50.147

您机器的外围设备寄存器位于何处？我相信以前的答案已经为您提供了宝贵的意见。结合`/proc/iomem`并`/proc/vmallocinfo`为您提供大量信息。请注意，使用`vmalloc`，您需要深入研究内核源代码以将函数名称与设备的驱动程序相关联。

但真正的问题是你想确切地知道什么？您想要这些信息的目的是什么？

在我看来，您正在尝试直接访问设备的物理内存，您应该依赖 ioctl、sysfs 或驱动程序提供的现有服务与设备“对话”。

不要忘记这一点：如果 Linux 没有向您显示您想要的信息，那可能是因为您*没有*寻找正确的信息，或者您正试图绕过现有的服务。从用户空间的角度来看，即应用程序，您永远不应该关心物理内存位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T13:42:37.207

当我记得我的内核编码时间正确时，iomem/ports 的输出只是列出了驱动程序在那里注册的内容。所以它更多的是每个驱动程序而不是每个设备的输出。

由于当今大多数设备都是 pci 设备，`lspci -v`因此可能是您能得到的最好的设备，它显示了已使用的内存和 io 端口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-15T11:37:39.047

这个问题已经很老了，但是我在尝试安装 Linux 时已经为这个问题苦苦挣扎了几天（仍然是新手）。

根据我收集到的信息，每个设备都通过它是块设备还是字符设备以及主要：次要编号来唯一标识。

在 /sys/dev, 文件夹中，每个块/字符设备都有符号链接，位于它们各自的文件夹中。这些是指向 /sys 文件夹中物理设备信息的链接。

/dev 文件夹中有并行的 block/char 文件夹，每个文件夹都有对应的符号链接。这些符号链接指向 /dev 文件夹中的实际设备文件。

所以如果你能得到一个设备的major:minor，你可以将/dev中的设备映射到/sys中的设备。对于驱动器，您可以使用 lsblk 获取主要：次要。

# jsf-2 - MyFaces 是因为重复的 id 不重复

> ID：10334599
> 
> 赞同：3
> 
> 时间：2012-04-26T13:36:07.550
> 
> 标签：jsf-2, myfaces

将 Mojarra 更改为 MyFaces 后，我的 Web 应用程序中发生了一个奇怪的问题......我有一个从外部加载的 xhtml 文件，换句话说，这个 xhtml 被重用了很多：

```
<ui:composition template="../templates/popup.xhtml">
<ui:param name="titulo" value="#{modeloPopup.rotulo}"/>
<ui:param name="popup" value="#{modeloPopup}"/>
<ui:param name="controladorPopup" value="#{controladorPopup}"/>
<ui:define name="conteudo">
    <h:panelGroup id="painelPopup" layout="block" styleClass="hrgi-div-form clearfix" style="width: 400px">
        <p:focus for="inputValor"/>
        <h:panelGroup layout="block" styleClass="clearfix" style="margin-bottom: 5px;">
            <p:fieldset styleClass="fieldset-novo-registro" legend="#{msgGerais['gerais.novo_registro']}">
                <h:outputLabel for="inputValor" value="#{modeloPopup.tituloNome}" styleClass="hrgi-label-form"/>
                <p:inputText id="inputValor" value="#{modeloPopup.elemento.valor}" maxlength="50" style="width: 210px"/>
            </p:fieldset>
            <p:commandButton value="#{msgGerais['gerais.adicionar']}" action="#{controladorPopup.adicionarValor}"
                             update="painelPopup alerta" style="margin-top: 10px;"/>
        </h:panelGroup>
        <h:panelGroup id="painelLista" binding="#{bindingPainel}" layout="block" styleClass="clearfix">
            <p:dataTable id="lista" var="bean" value="#{modeloPopup.lista}" scrollable="#{modeloPopup.lista.size()>5}"
                         height="145" rowEditListener="#{controladorPopup.editarValor}" onRowEditUpdate="alerta">
                <p:column headerText="Nome" sortBy="#{bean.valor}" style="width:80%">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{bean.valor}"/>
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{bean.valor}"/>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="#{msgGerais['gerais.acoes']}" style="width:20%">
                    <p:rowEditor/>
                    <p:commandLink action="#{controladorPopup.removerValor(bean)}"
                                   style="text-align: center;margin: auto;"
                                   update="#{bindingPainel.clientId} alerta confirmacao" immediate="true">
                        <h:graphicImage library="img" name="remover.png"/>
                    </p:commandLink>
                </p:column>
            </p:dataTable>
        </h:panelGroup>
    </h:panelGroup>
</ui:define>
</ui:composition> 
```

这个 xhtml 是这样使用的：

```
<h:form id="cadastroRamoAtividade">
<ui:include src="resources/components/popups/modulo_cadastro/popupCadastroString.xhtml">
    <ui:param name="modeloPopup" value="#{modeloPopupCadastroRamoAtividade}"/>
    <ui:param name="controladorPopup" value="#{controladorPopupCadastroRamoAtividade}"/>
    <ui:param name="idPopup" value="popupNovoCadastroRamoAtividade"/>
    <ui:param name="bindingPainel" value="#{painelListaRamoAtividade}"/>
</ui:include>
</h:form> 
```

我收到此错误：

```
[#|2012-04-26T10:25:14.527-0300|SEVERE|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=18;_ThreadName=Thread-2;|java.lang.IllegalStateException: component with duplicate id "cadastroRamoAtividade:popupNovoCadastroRamoAtividade:lista" found
at org.apache.myfaces.view.facelets.compiler.CheckDuplicateIdFaceletUtils.checkIdsStatefulComponents(CheckDuplicateIdFaceletUtils.java:54)
at org.apache.myfaces.view.facelets.compiler.CheckDuplicateIdFaceletUtils.checkIdsStatefulComponents(CheckDuplicateIdFaceletUtils.java:75)
at org.apache.myfaces.view.facelets.compiler.CheckDuplicateIdFaceletUtils.checkIdsStatefulComponents(CheckDuplicateIdFaceletUtils.java:75)
at org.apache.myfaces.view.facelets.compiler.CheckDuplicateIdFaceletUtils.checkIdsStatefulComponents(CheckDuplicateIdFaceletUtils.java:75)
at org.apache.myfaces.view.facelets.compiler.CheckDuplicateIdFaceletUtils.checkIdsStatefulComponents(CheckDuplicateIdFaceletUtils.java:66)
at org.apache.myfaces.view.facelets.compiler.CheckDuplicateIdFaceletUtils.checkIdsStatefulComponents(CheckDuplicateIdFaceletUtils.java:75)
at org.apache.myfaces.view.facelets.compiler.CheckDuplicateIdFaceletUtils.checkIdsStatefulComponents(CheckDuplicateIdFaceletUtils.java:75)
at org.apache.myfaces.view.facelets.compiler.CheckDuplicateIdFaceletUtils.checkIdsStatefulComponents(CheckDuplicateIdFaceletUtils.java:75)
at org.apache.myfaces.view.facelets.compiler.CheckDuplicateIdFaceletUtils.checkIdsStatefulComponents(CheckDuplicateIdFaceletUtils.java:75)
at org.apache.myfaces.view.facelets.compiler.CheckDuplicateIdFaceletUtils.checkIdsStatefulComponents(CheckDuplicateIdFaceletUtils.java:35)
at org.apache.myfaces.view.facelets.DefaultFaceletsStateManagementStrategy.saveView(DefaultFaceletsStateManagementStrategy.java:489)
at org.apache.myfaces.application.StateManagerImpl.saveView(StateManagerImpl.java:189)
at javax.faces.application.StateManager.getViewState(StateManager.java:253)
at org.apache.myfaces.context.servlet.PartialViewContextImpl.processPartialRendering(PartialViewContextImpl.java:550)
at org.apache.myfaces.context.servlet.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:388)
at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:88)
at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:402)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:755)
at org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.renderView(FaceletViewDeclarationLanguage.java:1900)
at org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:285)
at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:115)
at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:241)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:199)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at fr.xebia.servlet.filter.ExpiresFilter.doFilter(ExpiresFilter.java:1243)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:109)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:109)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(De|#]
[#|2012-04-26T10:25:14.529-0300|SEVERE|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=18;_ThreadName=Thread-2;|faultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:662) 
```

|#]

我在 chrome 上查看了 html 源代码，没有发现任何重复的 id ......有人知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:40:02.093

我*想*这`<h:panelGroup binding="#{bindingPainel}">`就是这个问题的根本原因。如果您在同一个视图中有多个相同的组件`binding`，那么您将收到此异常。该`binding`属性必须指向一个唯一且基于请求的变量。

# syntax - AHK 脚本行开头的星号是什么意思？

> ID：10334603
> 
> 赞同：13
> 
> 时间：2012-04-26T13:36:16.683
> 
> 标签：syntax, autohotkey

我正在尝试修改我喜欢但不太完全理解的 AHK 脚本。

这行脚本开头的星号是什么意思？

`*capslock::`

最后的一对冒号是否意味着这一行只是语句的一部分？它是否继续到下一行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T17:57:10.487

无论修饰符是否被按下，都会触发热键。

[http://www.autohotkey.com/docs/Hotkeys.htm](http://www.autohotkey.com/docs/Hotkeys.htm)

> 通配符：即使按下了额外的修饰符，也会触发热键。这通常与重新映射键或按钮一起使用。例如：
> 
> Win+C、Shift+Win+C、Ctrl+Win+C等都会触发这个热键。
> 
> ```
> *#c::运行 Calc.exe  
> ```
> 
> 即使修改键按下，按下 Scrolllock 也会触发此热键。
> 
> ```
> *ScrollLock::运行记事本
> ```

编辑：嗯，没有看到第二部分。

如果您只有一个语句，则将其全部放在上面的一行中。如果您有多个语句，则必须在 the 之后添加一个换行符，`::`并`return`在末尾添加 a。

```
#w:: MsgBox "Windows+W FTW"
#q::
  MsgBox "Windows+Q FTW"
  MsgBox "Another annoying message box!"
  return 
```

我有一种使用`capslock`键作为我更喜欢的修饰符的方法：

```
;; make capslock a modifier, make shift-capslock a true capslock
setcapslockstate, OFF ;SetCapsLockState, alwaysoff

$*Capslock::   ; $ means that the hotkey code shouldn't trigger its own hotkey
  Gui, 99:+ToolWindow 
  Gui, 99:Show, x-1 w1 +NoActivate, Capslock Is Down 
  keywait, Capslock 
  Gui, 99:Destroy 
  return 

; Made a window show up when the capslock is pressed.

; Now, if that hidden windown is there, do anything you like
#IfWinExist, Capslock Is Down 
   j::Left 
   k::Right 
   i::Up 
   m::Down 
#IfWinExist 

; Oh, by the way, right-alt and capslock works like real capslock
ralt & Capslock::
  GetKeyState, capstate, Capslock, T
  if capstate = U
  {
    SetCapsLockState, on
  } else {
    SetCapsLockState, off
  }
  return 
```

# mysql - Nested INNER JOIN vs INNER JOIN vs WHERE：特定情况下的正确性、性能、清晰度（不是典型的 JOIN vs WHERE 问题）

> ID：10334608
> 
> 赞同：18
> 
> 时间：2012-04-26T13:36:39.830
> 
> 标签：mysql, sql, ms-access, join, nested

我正在研究内部连接，我是 WHERE SQL-92 的老男人。我想知道其中的含义并了解它是如何工作的。所以这只是一个关于 SQL 连接的理论问题。这是...

```
 SELECT * FROM   -- Query 1
 tbl1
 INNER JOIN (
          tbl2 
          INNER JOIN (
             tbl3 INNER JOIN tbl4 ON tbl3.Col1 = tbl4.Col1 
          ) 
          ON tbl2.col1 = tbl3.col2
 ) 
 ON tbl1.col1 = tbl3.col3 
```

……和这个一样吗？

```
 SELECT * FROM   -- Query 2
 tbl3 
 INNER JOIN tbl4 ON tbl3.col1 = tbl4.col1
 INNER JOIN tbl2 ON tbl2.col1 = tbl3.col2
 INNER JOIN tbl1 ON tbl1.col1 = tbl3.col3 
```

...或者这个（不按逻辑分辨率排序）？

```
 SELECT * FROM   -- Query 3
  tbl3 
  INNER JOIN tbl1 ON tbl1.col1 = tbl3.col3
  INNER JOIN tbl2 ON tbl2.col1 = tbl3.col2
  INNER JOIN tbl4 ON tbl3.col1 = tbl4.col1 
```

..or this（参考节点已更改；请参阅在引用之前引用了一个表，但笛卡尔积应该是相同的）

```
 SELECT * FROM   -- Query 4
  tbl4 
  INNER JOIN tbl1 ON tbl1.col1 = tbl3.col3
  INNER JOIN tbl2 ON tbl2.col1 = tbl3.col2
  INNER JOIN tbl3 ON tbl4.col1 = tbl3.col1 
```

..或这个？

```
 SELECT * FROM   -- Query 5 
  tbl1,tbl2,tbl3,tbl4
  WHERE 
  tbl3.col1 = tbl4.col1
  tbl2.col1 = tbl3.col2
  tbl1.col1 = tbl3.col3 
```

...从美学、句法、最佳实践和功能的角度来看？

这是一个非常开放的问题，但我认为社区提供一些启发非常有趣！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T13:53:07.160

我一直密切合作的所有数据库引擎（即`SQL Server`, `Oracle`, `PostgreSQL`, `MySQL`, `Sybase`, `SQLite`,`Informix`和`Firebird`）都会将其优化为相同的计划。

然而，第四个查询不会在所有引擎上解析（在`ON`子句中使用表之前，您不能在子句中引用表`JOIN`）

`MySQL`提供`STRAIGHT_JOIN`影响计划中使用的连接顺序的子句。

在`Oracle`，有一个提示`/*+ ORDERED */`，在`SQL Server`有一个类似的提示`FORCE ORDER`。如果查询使用这些提示，则计划顺序也会受到连接顺序的影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T13:39:15.547

从正确性的角度来看，它们可能是相等的。从性能的角度来看，它取决于 RDBMS（我只能说 SQL Server，所有变体都会产生相同的执行计划）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:49:55.677

在 Sybase 中，它们也将具有相同的执行计划！查询优化器足够聪明，可以为所有这些构建相同的执行计划:)

他可能会在内部更改查询以首先选择最小的表并与该表进行内部连接。

关于使用内部连接或嵌套连接（最后一个），我更喜欢第一个。将内部连接与表之间的连接进行连接更具可读性，然后，如果需要，还有一个带有限制的 where 子句（在您的示例中，您没有这些限制）。

# java - 休眠映射在离线模式下不起作用

> ID：10334610
> 
> 赞同：7
> 
> 时间：2012-04-26T13:36:50.330
> 
> 标签：java, spring, hibernate

我们正在进行灾难恢复练习，几个 Hibernate+Spring 应用程序没有以以下错误开始

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.InvalidMappingException: Could not parse mapping document from input stream
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1337)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
                at java.security.AccessController.doPrivileged(AccessController.java:214)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
                at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
                at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:221)
                at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
                at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
                at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByName(AbstractAutowireCapableBeanFactory.java:1029)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:977)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)
                ... 55 more
Caused by: org.hibernate.InvalidMappingException: Could not parse mapping document from input stream
                at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:541)
                at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:638)
                at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1368)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1334)
                ... 67 more
**Caused by: org.dom4j.DocumentException: Server returned HTTP response code: 504 for URL: http://www.jboss.org/dtd/hibernate/hibernate-mapping-3.0.dtd Nested exception: Server returned HTTP response code: 504 for URL: http://www.jboss.org/dtd/hibernate/hibernate-mapping-3.0.dtd**
                at org.dom4j.io.SAXReader.read(SAXReader.java:484)
                at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:532)
                ... 71 more 
```

hbm 映射 XML 文件有

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"> 
```

在 SO 和 Hibernate 论坛上搜索，修复看起来像我们需要将 doctype 中的 DTD 设置为 SYSTEM 以便它从本地系统读取，而不是从 sourceforge.net 上托管的公共 dtd

```
<!DOCTYPE hibernate-mapping SYSTEM "hibernate-mapping-3.0.dtd"> 
```

但是有了这个 Hibernate 正在寻找 appserver 根文件夹上的文件

```
Caused by: org.hibernate.InvalidMappingException: Could not parse mapping document from input stream
                at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:541)
                at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:638)
                at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1368)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1334)
                ... 72 more
Caused by: org.dom4j.DocumentException: C:\IBMSOA\SDP70\runtimes\base_v61\profiles\AppSrvWSFP01\hibernate-mapping-3.0.dtd (The system cannot find the file specified.) Nested exception: C:\IBMSOA\SDP70\runtimes\base_v61\profiles\AppSrvWSFP01\hibernate-mapping-3.0.dtd (The system cannot find the file specified.)
                at org.dom4j.io.SAXReader.read(SAXReader.java:484)
                at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:532)
                ... 76 more 
```

应该如何指定 SYSTEM DTD 引用，以便 Hibernate 从 hibernate.jar 读取 DTD 而不是在文件系统中查找它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:38:18.503

查看 DTDEntityResolver的休眠源[http://grepcode.com/file/repo1.maven.org/maven2/org.hibernate/hibernate-core/3.3.1.GA/org/hibernate/util/DTDEntityResolver.java#DTDEntityResolver](http://grepcode.com/file/repo1.maven.org/maven2/org.hibernate/hibernate-core/3.3.1.GA/org/hibernate/util/DTDEntityResolver.java#DTDEntityResolver)下面为我​​们工作

```
<!DOCTYPE hibernate-mapping SYSTEM "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"> 
```

支持开源！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-19T06:05:44.933

下载 dtd 文件并在本地使用它就可以了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-04T11:15:53.643

[http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd](http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd) "

下载此文件并在本地使用

配置文件相同

# java - JAVA中的“线程安全”修饰符？

> ID：10334612
> 
> 赞同：0
> 
> 时间：2012-04-26T13:36:55.897
> 
> 标签：java, thread-safety, grammar, bnf, modifier

我刚刚遇到了一个[BNF Grammar for JAVA](http://cui.unige.ch/isi/bnf/JAVA/AJAVA.html)。其中，“修饰符”有一个称为“线程安全”的终端符号。但是，我以前从未见过它，也无法在 Java 语言规范 Java SE 7 版 (docs.oracle.com/javase/specs/jls/se7/jls7.pdf) 中找到该修饰符。然而，我在[这里](http://www.csci.csusb.edu/dick/samples/java.glossary.html)找到了它，在第 16 条中将其描述为：

> 如果同时执行此代码的另一个线程无法更改变量的值，则该变量是线程安全的，编译器可能会对其进行巧妙的处理以使代码更快或更小。

这是真正的修饰符吗？它应该在即将发布的 JAVA 版本中引入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:43:29.623

尝试在[这里](http://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html)找到它，在 Java BNF 的官方来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:39:12.800

不，不是，private_protected 也不在同一个列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-27T13:26:48.970

Java 和 Groovy 在编译器中都有像“threadsafe”和“goto”这样的关键字作为“保留标记”，但它们现在在语言中没有任何意义。

# ruby-on-rails - 设计的路由错误

> ID：10334613
> 
> 赞同：1
> 
> 时间：2012-04-26T13:36:57.427
> 
> 标签：ruby-on-rails, devise, routes

我的应用程序包含标记的物品。它使用 Devise 进行用户身份验证。

链接到“忘记密码？”时出现以下路由错误 设计链接：

```
 No routes matches {:controller => "devise/belongings", :action => "with_tag", :tag_id => 1} 
```

发出此错误的链接是

```
 <%= link_to "tagname", {:controller => :belongings, :action => :with_tag, :tag_id => t.id} %> 
```

我的路由文件包含：

```
 resources :belongings do
   get 'with_tag', :on => :collection
   get 'remove_tag', :on => :collection
 end 
```

和

```
 devise_scope :user do
     get "sign_in", :to => "sessions#new"
     get "sign_out", :to => "devise/session#destroy"
     get "sign_up", :to => "devise/registration#new"
 end 
```

就像路由正在设计范围内寻找它必须遵循的路由。

一个简单的解决方法是将链接编码为：

```
 <%= link_to "tagname", {:controller => "/belongings", :action => :with_tag, :tag_id => t.id} %> 
```

强制控制器在根目录下而不添加设计范围。

我觉得这个解决方案完全丑陋。

你能推荐一个更好的吗？例如在 route.rb 上的更好配置？

谢谢！

# javascript - 更改哈希时防止页面滚动

> ID：10334618
> 
> 赞同：1
> 
> 时间：2012-04-26T13:37:35.757
> 
> 标签：javascript, jquery, scroll, hashtag

以下代码导致页面向下滚动到页面底部。在这种情况下如何防止页面滚动？

```
// If note is clicked, then append id as hashtag at end of url
$("span.note").click(function(e){
    e.preventDefault();
    window.location.hash = $(this).attr('id');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:41:13.110

此外，您可以尝试添加：`e.stopPropagation();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-30T14:32:19.130

禁用滚动而不删除 window.location 中的哈希

您可以在更改**location.hash之前****暂时** **删除节点的**id然后在节点上再次 设置**id**

 ****```
// Prevent default on anchor link click
$("a[href^='#']").click(function(e) {
    e.preventDefault();
    changeHashWithoutScrolling($(this).attr('href'));
});

// Prevent instant scroll of browser
function changeHashWithoutScrolling(hash){
    if($(hash).length > 0){
        var $el = $(hash);
        var elId = $el.attr('id');
        $el.removeAttr('id');

        window.location.hash = hash;

        $el.attr('id', elId);
    }
} 
```****

# c++ - 将 C++ 变量自动绑定到 boost 的属性树值的标准方法

> ID：10334619
> 
> 赞同：1
> 
> 时间：2012-04-26T13:37:39.970
> 
> 标签：c++, boost, properties

我刚刚发现了 bost::property_tree，我真的很喜欢我可以让用户通过编辑配置文件以及在应用程序运行时通过选项更改变量来配置应用程序，并且我能够将更改的配置保存回文件。

我可以简单地加载变量：

```
int foo = boost::property_tree::get<int>("foo", 5); 
```

并将变量保存回属性树

```
boost::property_tree::put<int>("foo", foo); 
```

这在简单项目中简单而整洁，但在大型项目中我想：

*   根据程序中变量的当前值保存所有配置
*   当某个绑定变量的生命周期结束时，自动（或者）更新 property_tree 对象。
*   根据要求重新加载属性文件并更新我的程序中的所有值。

不需要一些全局加载/保存函数，这些函数必须包含程序所有需要使用属性值的部分的自定义保存/加载函数（出于明显的原因）。

我可以想象像

```
class ExtendedPropertyTree : public boost::property_tree
{
    .. (some container of bindings) ... binded variables;
    void saveAll();
    void reload();
    ...
};

template <class T>
class PropertyBinding
{
    ...
    std::string propertyIdentification;
    T& value;
    ExtendedPropertyTree& propertyTree;
    ... // alternatively pointer to before/after update function
    ... // alternatively default value
   ... // Constructor/Destructor would register/unregister this instance in the ExtendedProperted Tree automatically
}; 
```

还必须定义一些合并冲突的方法（当属性文件重新加载的值在程序和配置文件中发生更改时）。

在这一点上，我觉得，就像我在重新发明轮子一样，有没有办法在不制作这样的自定义类的情况下做到这一点？

# java - GC运行后是否可以使用Sun JVM向系统释放内存？

> ID：10334630
> 
> 赞同：0
> 
> 时间：2012-04-26T13:38:02.573
> 
> 标签：java, garbage-collection, jvm, jvm-hotspot

操作系统运行 10 个虚拟机 JVM。事实上，大多数人什么都不做——有时只是做一份工作。每个进程分配 600MB 的系统内存。我知道实际上最多可以使用 100 MB。每个进程的剩余 500 MB 是由 JVM（OldGen 等）管理的内存。不幸的是，我的系统只有 2GB 的 RAM，因此大部分内存分配到了交换区。这意味着当时间到了其中一台机器——第一台机器上，swap 会被读取到系统内存数十秒。

有没有什么办法可以强制JVM在完成任务后向操作系统释放内存？例如，GC 将每 1-5 分钟运行一次，因此进程内存已被释放给系统。

我正在使用：Linux x86_64 SMP、Java HotSpot (TM) 64-Bit Server VM 1.6.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:44:14.100

> 这意味着当时间到了其中一台机器——第一台机器上，swap 会被读取到系统内存数十秒。

内存页面仅在被访问时才被交换。如果您所说的 500MB 从 JVM 的角度来看真的是“免费的”，那么它们最终不会被换入。JVM 接触该内存一定是有原因的。一种可能性是它不是真正免费的，而是包含活动对象。

我会推荐：

1.  使用内存分析器（YourKit 或 VisualVM）查看 JVM 的实际内存使用情况。
2.  可能使用`-Xmx`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:49:44.427

我不是性能问题方面的专家，但让我尝试帮助您解决这个问题。

有一个对垃圾收集系统的调用是 System.gc()。如果您查阅 System 类的官方文档（[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html)），它会告诉您此方法运行垃圾收集.

不过，如果您查阅 Internet（例如[System.gc() 何时执行任何操作](https://stackoverflow.com/questions/66540/system-gc-in-java)），您会看到此调用可能会调用垃圾收集系统。我的个人经历与那篇文章一致。

由于内存管理是自动化的，垃圾收集系统将竭尽全力为您做好内存管理工作。管理算法非常有效，试图超越它们通常不会给你带来很好的结果。

您说大多数机器什么都不做 - 因此，为什么不“杀死”它们并在您有工作时开始新的机器？那不是更有效率吗？

# powershell - 将 Exchange 邮箱 2007 移动到另一台 Exchange 服务器

> ID：10334632
> 
> 赞同：1
> 
> 时间：2012-04-26T13:38:05.773
> 
> 标签：powershell, exchange-server

我们有几百个用户正在迁移到一个新域。用户帐户将在新域上新创建，但我们需要将邮箱移动到新的 Exchange 服务器。

我们发现[了这个](http://www.exchangedictionary.com/index.php/Exchange-Dictionary/connectmailbox-linkedmailbox-ex2007.html)，但这并不是我们所追求的。这不会将邮箱移动到新服务器..

**关于将邮箱移动到新的 Exchange 服务器（最好使用 Powershell）的任何提示？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:25:54.847

查找跨林邮箱移动。您可以使用 Exchange 2007/2010 本机执行此操作。这是一个很好的开端：

[http://blogs.technet.com/b/exchange/archive/2010/08/10/3410619.aspx](http://blogs.technet.com/b/exchange/archive/2010/08/10/3410619.aspx)

# php - 正则表达式：匹配较晚出现的字符或较早返回？

> ID：10334639
> 
> 赞同：0
> 
> 时间：2012-04-26T13:38:29.913
> 
> 标签：php, regex, pattern-matching

捕捉模式的正则表达式是什么，如果它后面跟着一些东西？否则，捕获模式的第一次出现。

例子

*   在以下位置找到“FL”：CA 和 FL（较小）州位于沿海地区。
*   在以下位置找到“CA”：CA 和 FL 州位于沿海地区。

编辑例如：

*   查找 FL 后跟 '(smaller)'
*   查找 CA，因为 FL 后面没有 '(smaller)'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:35:46.390

这对我来说并不完全清楚，但这里有一个尝试，有`perl`味道：

内容`script.pl`：

```
use warnings;
use strict;

while ( <DATA> ) { 
    chomp;
    if ( m/
            (?(?=.*\(smaller\))                 # Positive look-ahead conditional expression.
                \b([[:upper:]]+)\s+\(smaller\)  # If succeed, match previous word only in uppercase.
                    |                           # Or
                \b([[:upper:]]+)\b)             # If failed, match first word in uppercase found.
        /x ) {    
        printf qq[%s -> %s\n], $_, $1 || $2;    # $1 has first conditional, $2 the second one.
    }   
}

__DATA__
The states of CA and FL (smaller) are along coasts.
The states of CA and FL are along coasts. 
```

像这样运行它：

```
perl script.pl 
```

具有以下输出：

```
The states of CA and FL (smaller) are along coasts. -> FL
The states of CA and FL are along coasts. -> CA 
```

* * *

**用单线更新**（输出相同）：

```
perl -lne '
    printf qq[%s -> %s\n], $_, $1 || $2 
        if m/(?(?=.*\(smaller\))\b([[:upper:]]+)\s+\(smaller\)|\b([[:upper:]]+)\b)/
' infile 
```

# facebook - 从 iframe 画布应用程序中的 javascript 重定向，但浏览器中的 URL 不会改变

> ID：10334641
> 
> 赞同：0
> 
> 时间：2012-04-26T13:38:34.493
> 
> 标签：facebook, browser

我可以在我的画布应用程序中重定向并使用以下链接显示不同的页面：

```
window.location.href = "/Create/StartTime?mid=" + mid; 
```

我的问题是在浏览器 URL 栏中我们看不到地址的任何变化。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:40:56.207

您需要重定向 iframe 的父级。看一下这个：

[从 iframe 操作重定向父窗口](https://stackoverflow.com/questions/580669/redirect-parent-window-from-an-iframe-action-using-javascript)

# objective-c - TTPostController 不会旋转

> ID：10334647
> 
> 赞同：1
> 
> 时间：2012-04-26T13:38:49.657
> 
> 标签：objective-c, ios, xcode, three20, autorotate

首先，很抱歉，因为我的英语不好 :) 这是我创建新 TTPostController 的代码

```
postController = [[TTPostController alloc] init];
postController.delegate = self;
self.popupViewController = postController;
postController.superController = self;
[postController showInView:self.view animated:YES]; 
```

如果我不旋转设备，它运行正常

[http://i.stack.imgur.com/HBmpn.png](http://i.stack.imgur.com/HBmpn.png)

但是当我旋转设备时，它看起来像这样：

[http://i.stack.imgur.com/Nt7lq.png](http://i.stack.imgur.com/Nt7lq.png)

（对不起，我没有足够的声誉来发布图片）

有谁知道如何解决它？

**编辑：** 问题已解决，我已经编写了自己的库，例如 TTPostController：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:53:03.783

您应该继承 TTPostController 并覆盖 should autorotate 方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
    return YES;
} 
```

# html - 单击时输入字段/文本框不会保持选中状态

> ID：10334651
> 
> 赞同：2
> 
> 时间：2012-04-26T13:39:06.713
> 
> 标签：html, css, forms, input

我是 HTML 新手。这可能是非常基本的，但无论我做什么，我都无法让我的表单工作。每当我单击输入字段（文本区域）时，只要我按住鼠标，输入字段就会保持选中状态，但每当我释放它时，焦点就会回到表单的第一个字段。这是 HTML/CSS 吗？我不知道如何解决它。

这是我正在处理的表单的 URL ( [http://www.seanmccully.com/apps/langham/tea.html](http://www.seanmccully.com/apps/langham/tea.html) ) — 但它现在可能已修复。可以看到不能选择名字、姓氏、城市、邮箱（只能通过tab输入数据）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T13:42:41.183

这是因为您已将所有表单元素包装在一个`label`元素中。摆脱它，它会正常工作。

一个`label`元素只能与单个表单控件相关联，单击 a`label`会将焦点放在其关联的控件上。由于您的 中有多个控件`label`，因此它与第一个控件相关联，并且随着单击事件在 DOM 中传播，单击任何其他表单控件将到达标签并使其将焦点放在其关联控件（第一个）上。

如果要使用`label`元素，则每个控件都需要一个。您可以将`span`元素更改为`label`元素，并使用该`for`属性将该标签与控件相关联，或者您可以将每个控件包装在标签中：

```
<label class="labelstyle" for="fname">First Name</label>
<input name="fname" type="text" class="fieldstyle" id="fname" size="25" maxlength="50"/>

<!-- or -->

<label class="labelstyle">
    First Name <input name="fname" type="text" class="fieldstyle" id="fname" size="25" maxlength="50"/>
</label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:21:09.327

看来我找到了哪里出错了：

1.  将原始代码复制到记事本中（编写 HTML 时总是需要它）。
2.  删除不必要的代码以更清楚地看到您的问题（例如 CSS 代码甚至脚本代码）。
3.  然后仔细检查代码树！我在这里和那里看到标签！

你知道，你不应该把这个家伙到处放。你让他总是集中注意力，而不是输入名为文本的家伙。所以尝试删除标签；你会检查出来的。

# html - 将搜索框和社交图标对齐到标题标签的底部

> ID：10334660
> 
> 赞同：1
> 
> 时间：2012-04-26T13:39:33.720
> 
> 标签：html, css

前几天我问了这个问题，但无法得到我需要的解决方案......

我想将徽标区域两侧的搜索框和社交媒体图标与标题底部（灰色部分）对齐。因此，当网站的用户/客户想要将徽标换成自己的徽标时，无论其高度如何，搜索框和社交媒体区域都会将自己推到标题的底部。

这是我想要了解的一个简单示例：http: [//jsfiddle.net/AeRc8/](http://jsfiddle.net/AeRc8/)

如果有人可以通过说明如何在 jsfiddle 中完成此操作来提供帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:45:38.093

这是您的 jsfiddle 示例的编辑版本：

[http://jsfiddle.net/Shedal/AeRc8/1/](http://jsfiddle.net/Shedal/AeRc8/1/)

我应用于`position: relative`元素`<header>`以及`position: absolute`#search 和#social 元素，定位规则对应于左下角和右下角。

当然，去掉`float: left`and `float: right`，因为这个效果现在是通过绝对定位来实现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:48:33.737

没有这样的东西`float:center;`，有关更多信息，请参阅[MDN 文档](https://developer.mozilla.org/en/CSS/float)

`vertical-align`仅适用于内联上下文[MDN Doku](https://developer.mozilla.org/de/CSS/vertical-align)

您可以做的是将这两个元素绝对定位，如下所示：

```
#search{
   position:absolute;
   left:0;bottom:0;
}

#search{
   position:absolute;
   right:0;bottom:0;
} 
```

因为`position:absolute;`取决于位置不是 的第一个祖先元素`static`，所以您需要`position:relative;`在容器元素（在您的情况下为`header`）上应用才能使其工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:48:47.270

您可以将所有要下推的元素放入容器中，然后将其绝对定位到标题的底部，如下所示：

```
header {
    margin: 0px 29px 29px 29px;
    background: #CCC;
    display:block;
    position:relative;
}

.section {
    position:absolute;
    bottom:0;
    left:0;
    right:0;
} 
```

这样，您将可以更好地控制放置在该部分中的元素。

演示：http: [//jsfiddle.net/AeRc8/2/](http://jsfiddle.net/AeRc8/2/)

# ssis - 如何从平面文件中读取数百万条记录？

> ID：10334662
> 
> 赞同：1
> 
> 时间：2012-04-26T13:39:41.200
> 
> 标签：ssis

在我的数据流中，我从平面文件中读取数据并插入到 oledb 目的地。在这两个步骤之间，我使用了一些其他组件，例如（lookp、派生、脚本组件）。我在从平面文件读取到 oledb 目的地的 3500 条记录时执行了我的包。所以我的问题是如何将这个读数提高到 3500 到 100000 这个计数。还有一个问题是任何可用于在 ssis 中分配 ram 使用的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:10:30.747

我无法理解您所说的“所以我的问题是如何将这个读数从 3500 提高到 100000 这个计数”。你能更清楚一点吗？

关于内存，您可以（并且应该）配置缓存在查找组件上的工作方式。您可以将其设置为无、全部或部分。

*   完整：运行一次查找查询
*   部分：每个 ID 运行一次查找查询并保留该值
*   无：每次都运行查找查询。它将最后一个值保留在内存中，因此如果两个相等的值存在于 2 个后续行中，它将不会再次运行

在全部和部分上，您可以配置用于缓存的内存量

# asp.net - 安装 Visual Studio WEB Express 不安装 SQL Server

> ID：10334675
> 
> 赞同：0
> 
> 时间：2012-04-26T13:40:18.353
> 
> 标签：asp.net, .net

我想安装 Visual Studio .NET WEB Express，我不得不安装 SQL Server Express。但我的计算机中安装了 SQL Server Professional。如何在安装中摆脱它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:42:45.573

你不能，你必须安装它。但是你可以在之后删除它。您的主机上有两个 SQL Server 实例（默认为 MSSQLSERVER 和 SQLEXPRESS）。

# web-services - 在 Restful Web 服务中传递参数

> ID：10334676
> 
> 赞同：0
> 
> 时间：2012-04-26T13:40:26.100
> 
> 标签：web-services, rest, soap

在 SOAP 中，我使用以下代码将参数传递给 webmethod 函数

```
@WebMethod(operationName = "replacinginstrumentname")
    public String replacinginstrumentname(@WebParam(name = "interface1_name") String interface1_name) 
```

其中 interface1_name 是我传递的参数。为此，SOAP 具有@webparam。

但是我怎么能在 Restful GET 方法中做同样的事情。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:04:44.390

有几种方法可以走：

(1) [http://your.service.com/service/interface?interface1_name=YOUR_VALUE](http://your.service.com/service/interface?interface1_name=YOUR_VALUE)

或者

(2) [http://your.service.com/service/interface/YOUR_VALUE](http://your.service.com/service/interface/YOUR_VALUE)

那么你的资源方法将是

对于案例 (1)

```
@Path("/service")
public class YourResource{

    @GET("/interface")
    public Response method(@QueryParam(name="interface1_name") String param){
        //do the job
    }
} 
```

对于案例 (2)

```
@Path("/service")
public class YourResource{
    @GET("/interface/{iname}")
    public Response method(@PathParam(name="iname") String param){
        //do the job
    }
} 
```

# mysql - 优化mysql慢查询

> ID：10334679
> 
> 赞同：0
> 
> 时间：2012-04-26T13:40:51.013
> 
> 标签：mysql, optimization

下面的查询从 20lacs 记录中运行超过 2.5 秒；

```
选择 lid,nid ,sum(nview) as view_cnt
来自 nv
盖子 = 1
分组
ORDER BY view_cnt desc
限制 20；

```

我更新了可能的键作为索引，请帮我优化这个查询

```
id select_type table type possible_keys key key_len ref rows Extra
1 SIMPLE nv ref lid lid 4 const 406282 “使用位置；使用临时；使用文件排序”

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:52:30.820

您可以尝试在查询中使用的所有列上添加索引：

```
ALTER TABLE nv ADD INDEX lnv(lid,nid,nview) 
```

以便 mysql 使用索引中的列值，而不是仅将索引用于行查找。您应该`using index`在解释额外列中看到更多内容。它可能会加快您的查询速度，但不要期望太多，在这种情况下，文件排序在不更改表模式的情况下是不可避免的。

如果您决定使用此索引，则可以安全地删除单个`lid`列上的索引，因为复合索引也可以用于盖子查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:07:26.700

您只索引了 lid 列，您可以将索引添加到 nid 列并验证查询执行时间

# android - SQLite 如果不存在（选择...）等效

> ID：10334680
> 
> 赞同：0
> 
> 时间：2012-04-26T13:40:55.223
> 
> 标签：android, sqlite

我的 Android 应用程序中的两个 SQLite 表：

*   PoweredEquip，其中包含所有动力设备单元及其相关拖车
*   包含当前未绑定到动力单元的所有拖车的拖车

填充这两个表时，如果 PoweredEquip 表中不存在 VIN，我只需要插入 Trailers 表。所以在 T-SQL 中，我会做类似的事情

```
If Not Exists (Select VIN From PoweredEquip Where VIN = _VIN)
    Insert Into Trailers Values (.....) 
```

无需在 PoweredEquip 上进行 Select，打开 DataReader 并检查 HasRows 是否为 False 即可进行插入，我希望 SQLite 中有一个 If Not Exists (Select...) 等效项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:54:54.313

SQLite 中没有直接的等价物。插入不支持任何条件（除非您通过 INSERT INTO TABLE SELECT..' 执行此操作。可以使用`INSTEAD OF INSERT`执行插入或不基于 的触发器构建类似的东西`CASE`。或者使用`AFTER INSERT`删除行的触发器不属于表。

未经测试：

```
CREATE TRIGGER remove_bad AFTER INSERT ON Trailers BEGIN
    DELETE FROM Trailers WHERE NEW._VIN IN (SELECT VIN FROM PoweredEquip);
END; 
```

编辑另一个答案中提到的方式也应该有效：

```
INSERT INTO Trailers(columns, ..) SELECT 'values',.. WHERE NOT EXISTS 
    (SELECT 1 FROM PoweredEquip WHERE VIN = '_VIN-value'); 
```

# facebook - 从 iframe 中的应用程序自动登录

> ID：10334682
> 
> 赞同：2
> 
> 时间：2012-04-26T13:40:58.813
> 
> 标签：facebook, facebook-graph-api

我有一个网站，用户使用他的 Facebook 帐户登录。然后，他可以通过向他的朋友发送邀请来邀请他们。

当朋友在 Facebook 打开他的邀请时，他会在 Facebook 画布 (iframe) 中看到一个网站。

因为这个朋友已经登录了真正的 Facebook，我希望他也会自动登录到我的网站。但事实并非如此。

如何自动登录从 Facebook iframe 打开我的应用程序的朋友？

（我正在使用 C# MVC3 和 JS 库）

笔记;

我已经阅读了很多关于这个问题的主题。答案是使用 getLoginStatus()。但这对我不起作用，因为我仍处于沙盒模式......有没有像样的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:17:43.133

用户登录 Facebook，然后进入您的网站（画布或 Web 应用程序）无法自动登录，因为此“新”访问者从未授权您的应用程序访问他的 Facebook 数据。

您可以为您拥有此用户的有效身份验证会话密钥的人进行自动登录，为此，他们需要首先连接您的 Facebook 应用程序。

# c# - 生产和开发 log4net 配置？

> ID：10334685
> 
> 赞同：1
> 
> 时间：2012-04-26T13:41:08.847
> 
> 标签：c#, log4net

我目前正在开发一些可以在两种环境中运行的应用程序：开发或生产。我希望每个都有不同的日志记录基础设施。

环境在运行时传递给我的 .exe。如何通过代码启用/禁用相应的附加程序？下面的配置中也有什么需要调整的吗？

[我在此 app.config 文件中有其他内容用于应用程序设置，这些内容基于this](http://www.codeproject.com/Articles/20548/Creating-a-Custom-Configuration-Section-in-C)为每个键提供一个“prod”值和一个“dev”值，因此我不想要多个配置文件。

```
<log4net>

    <root>
      <level value="debug" />
      <appender-ref ref="Dev" />
      <appender-ref ref="Prod" />
    </root>

    <appender name="Dev" type="log4net.Appender.FileAppender">
      <file type="log4net.Util.PatternString" value="blabla 1" />
      <layout type="log4net.Layout.PatternLayout">
        <Header value="[Application Start]&#13;&#10;" />
        <Footer value="[Application Exit]&#13;&#10;"  />
        <ConversionPattern value="%date (%property{ActiveStatus}) %-5level [%2thread] %-20.20logger{1} %message%newline" />
      </layout>
    </appender>

    <appender name="Prod" type="log4net.Appender.FileAppender">
      <file type="log4net.Util.PatternString" value="blabla 2" />
      <layout type="log4net.Layout.PatternLayout">
        <Header value="[Application Start]&#13;&#10;" />
        <Footer value="[Application Exit]&#13;&#10;"  />
        <ConversionPattern value="%date (%property{ActiveStatus}) %-5level [%2thread] %-20.20logger{1} %message%newline" />
      </layout>
    </appender>

</log4net> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T13:53:08.677

您可能需要考虑`app.config`根据要发布到的环境对文件进行转换。这在 Web 应用程序中很常见，但是有一个 SO 解释了如何将其扩展到其他项目类型：

[不是 Visual Studio 2010 中的 Web 项目的项目的 App.Config 转换？](https://stackoverflow.com/questions/3004210/app-config-transformation-for-projects-which-are-not-web-projects-in-visual-stud)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T13:52:49.757

我建议每个环境使用一个单独的配置文件，并在运行时加载适当的配置文件。以这种方式，它会更容易维护并避免偶尔出现的错误，例如将开发特定设置应用于生产附加程序等。

```
if (environment == "Production")
{
   log4net.Config.Configure(Path.Combine(productionFolder, "log4net.config"));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:35:31.477

我投票赞成 sll 的建议。但是，如果您坚持禁用其中一个附加程序：

```
ILoggerRepository repository = log4net.LogManager.GetRepository();
var appender = repository.GetAppenders()
    .Where(a => a.Name == "dev")
    .Single();
appender.Close(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-26T13:48:47.937

也许使用标签`<threshold value="OFF"/>` 并进行修改？

以这种方式注释掉

```
<!-- <threshold value="OFF"/> --> 
```

当您需要启用日志记录时

# data-mining - 数据挖掘项目我需要知道多少数学知识

> ID：10334686
> 
> 赞同：0
> 
> 时间：2012-04-26T13:41:10.893
> 
> 标签：data-mining, data-warehouse

我想从事数据仓库和数据分析师的工作。我正在阅读有关数据挖掘和仓储的书籍。但我被概率、傅立叶变换和小波函数等技术数学东西弄疯了。

我不太擅长那些统计数学细节。

我想知道，如果我在 DW 工作行业工作，那么我是否需要学习那些已经建立在这些之上的东西，而我不需要那些数学东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T17:58:12.000

数据挖掘是一个很大的领域。存在许多不同的数据挖掘技术和问题。

有一些来自统计和数学背景的人会使用很多数学。

但也有来自算法、计算机科学或数据库背景的人。他们中的一些人会使用更少的数学。

所以这取决于你想在数据挖掘中做什么。

另外，如果你只是想应用一些算法，你可以使用一些其他人已经编程的数据挖掘工具，这样你就不需要自己设计它们了。

但是，总的来说，数学与计算机科学密切相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T18:15:34.900

数据挖掘是由计算机科学家发明的，因为统计学家忙于思考数学。他们肯定在那个人身上丢球了。

统计方面的书籍侧重于数学，而计算机科学方面的书籍侧重于过程。

我将从编程集体智能（O'Reilly）开始，它没有太多的数学知识。

我还会查看 Kardi Teknomo 的工作，他表明可以使用 Excel 完成大量数据挖掘：

[http://people.revoledu.com/kardi/](http://people.revoledu.com/kardi/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-25T15:11:16.110

要从事任何与计算机相关的高薪工作，您需要具备统计数学的工作知识。我在 50 岁时学习数学，并在 53 岁时获得了硕士学位。在 You Tube 的帮助下，我学会了自己编程。我在“数据仓库”找到了第一份工作，现在有两年的工作经验，我正在积极招聘这个领域的高薪工作。数学需要大量的练习和工作。但它确实有回报

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T06:38:35.420

数据挖掘对统计数据很重要。为了让它真正发挥作用，你需要对你在做什么有一个很好的理解。很容易得到一个起初看起来不错的结果，但在实践中根本不起作用，因为它例如过度拟合，或者以任何其他方式在统计上无效。

不要*从*数据仓库方面接近它。他们不知道什么是数据挖掘。对于 DW 人来说，甚至计算预测平均值通常也是“数据挖掘”。

# ios - 如何创建自定义 UITabBar

> ID：10334687
> 
> 赞同：0
> 
> 时间：2012-04-26T13:41:12.033
> 
> 标签：ios, uitabbar

我想`UITabBar`用自定义`UITabBar`图像和自定义`UITabBarItem`选择图像和未选择图像创建自定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:53:21.633

这是你正在研究的吗？您可以对其进行大量自定义。此外，该代码还有许多演示和示例供您查看。

[Monotouch中的自定义UITabBar](https://stackoverflow.com/questions/10218593/custom-uitabbar-in-monotouch)

[更改 UITabBar 上的图像](https://stackoverflow.com/questions/10127869/change-the-image-on-uitabbar)

这是一个很好的自定义 UI 的[外部](http://www.rumex.it/2010/07/how-to-customise-the-tab-bar-uitabbar-in-an-iphone-application-part-1-of-2/)源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T14:39:10.057

你可以看看我的例子。

我确实编写了一个兼容 iOS 7+ 的简单 UITabBar+UITabBarController 替代品，它可以支持任意数量的选项卡并使用自动布局来构建它的视图层次结构。查看[NGTabBar](http://www.github.com/goles/ngtabbar)。

# objective-c - 比较浮点值有多危险？

> ID：10334688
> 
> 赞同：413
> 
> 时间：2012-04-26T13:41:12.947
> 
> 标签：objective-c, ios, c, floating-point, floating-accuracy

由于分辨率独立的坐标系，我知道`UIKit`用途。`CGFloat`

但是每次我想检查例如`frame.origin.x`是否`0`让我感到恶心：

```
if (theView.frame.origin.x == 0) {
    // do important operation
} 
```

与, , ,比较时是否`CGFloat`不易出现误报？它是一个浮点数，它们有不精确的问题：例如。`==``<=``>=``<``>``0.0000000000041`

比较时是`Objective-C`在内部处理这个问题，还是会发生`origin.x`读取为零的 a 不比较`0`为真的情况？

* * *

## 回答 #1

> 赞同：499
> 
> 时间：2012-04-26T14:33:33.470

首先，浮点值的行为不是“随机的”。精确比较在大量实际应用中可以而且确实是有意义的。但是如果你要使用浮点，你需要知道它是如何工作的。错误地假设浮点数像实数一样工作会让你的代码快速中断。错误地假设浮点结果具有与之相关的大量随机模糊（就像这里建议的大多数答案一样）将使您的代码起初看起来可以工作，但最终会出现大量错误和破坏的极端情况。

首先，如果你想用浮点编程，你应该阅读这个：

[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

是的，阅读所有内容。如果这负担太大，您应该使用整数/定点进行计算，直到您有时间阅读它。:-)

现在，话虽如此，精确浮点比较的最大问题归结为：

1.  `scanf`事实上，您可以在源代码中写入或使用or读取的许多值`strtod`不*作为*浮点值存在，而是默默地转换为最接近的近似值。这就是demon9733的回答所说的。

2.  由于没有足够的精度来表示实际结果，许多结果会被四舍五入。一个简单的例子，你可以看到这是添加`x = 0x1fffffe`和`y = 1`作为浮点数。在这里，`x`尾数（ok）有 24 位精度，`y`只有 1 位，但是当你添加它们时，它们的位不在重叠的位置，结果需要 25 位精度。相反，它会被舍入（`0x2000000`在默认舍入模式下）。

3.  事实上，由于需要无数个位置来获得正确的值，许多结果都会被四舍五入。这包括像 1/3 这样的有理结果（你从十进制中熟悉它，它占据了无限多的位置），也包括 1/10（它在二进制中也占据了无限多的位置，因为 5 不是 2 的幂），以及不合理的结果，例如任何不是完美平方的平方根。

4.  双圆。在某些系统（尤其是 x86）上，浮点表达式的计算精度高于其标称类型。这意味着当发生上述其中一种舍入时，您将获得两个舍入步骤，首先将结果舍入为更高精度类型，然后舍入为最终类型。例如，考虑将 1.49 四舍五入为整数 (1) 时会发生什么，与先将其四舍五入到小数点后一位 (1.5) 然后将该结果四舍五入为整数 (2) 会发生什么情况。这实际上是浮点处理中最讨厌的领域之一，因为编译器的行为（尤其是对于像 GCC 这样的有缺陷、不符合标准的编译器）的行为是不可预测的。

5.  超越函数（`trig`、`exp`、`log`等）未指定具有正确舍入的结果；结果只是在精度的最后一位（通常称为**1ulp**）的一个单位内指定为正确的。

在编写浮点代码时，您需要记住您对可能导致结果不精确的数字所做的操作，并相应地进行比较。通常，与“epsilon”进行比较是有意义的，但该 epsilon 应该基于*您要比较的数字的大小*，而不是绝对常数。（在绝对常数 epsilon 可以工作的情况下，这强烈表明定点而不是浮点是这项工作的正确工具！）

**编辑：**特别是，相对于幅度的 epsilon 检查应该类似于：

```
if (fabs(x-y) < K * FLT_EPSILON * fabs(x+y)) 
```

`FLT_EPSILON`常数从哪里来（`float.h`将其替换`DBL_EPSILON`为 for `double`s 或`LDBL_EPSILON`for `long double`s）并且`K`是您选择的常数，这样您的计算的累积误差肯定会受到`K`最后一个单位的限制（如果您不确定是否得到了错误限制计算正确，`K`比你的计算应该大几倍）。

最后，请注意，如果您使用它，在接近零时可能需要特别小心，因为`FLT_EPSILON`对于非正规化没有意义。一个快速的解决方法是：

```
if (fabs(x-y) < K * FLT_EPSILON * fabs(x+y) || fabs(x-y) < FLT_MIN) 
```

`DBL_MIN`如果使用双打，同样替换。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-04-26T13:55:23.000

由于 0 完全可以表示为 IEEE754 浮点数（或使用我曾经使用过的任何其他 fp 数实现），因此与 0 进行比较可能是安全的。`theView.frame.origin.x`但是，如果您的程序计算一个您有理由相信应该为 0 但您的计算不能保证为 0的值（例如 ），您可能会被咬。

为了澄清一点，计算如下：

```
areal = 0.0 
```

将（除非您的语言或系统损坏）创建一个值，使得 (areal==0.0) 返回 true 但另一个计算，例如

```
areal = 1.386 - 2.1*(0.66) 
```

不得。

如果您可以确保您的计算产生的值是 0（而不仅仅是它们产生的值应该是 0），那么您可以继续将 fp 值与 0 进行比较。如果您不能保证自己达到所需的程度，最好坚持“容忍平等”的惯用方法。

在最坏的情况下，fp 值的粗心比较可能是极其危险的：想想航空电子设备、武器制导、发电厂操作、车辆导航，几乎所有计算与现实世界相遇的应用。

对于愤怒的小鸟来说，没有那么危险。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-05-14T04:19:50.783

我想给出一些与其他人不同的答案。它们非常适合回答您所说的问题，但可能不适用于您需要了解的内容或您的真正问题。

图形中的浮点数很好！但几乎没有必要直接比较浮点数。为什么你需要这样做？Graphics 使用浮点数来定义间隔。并且比较浮点数是否在也由浮点数定义的区间内总是定义明确的，只需要保持一致，而不是准确或精确！只要可以分配一个像素（这也是一个间隔！），这就是所有图形所需的。

因此，如果您想测试您的点是否超出 [0..width[ 范围，这很好。只要确保您始终如一地定义包容。例如总是在里面定义是 (x>=0 && x < width)。相交或命中测试也是如此。

但是，如果您将图形坐标用作某种标志，例如查看窗口是否停靠，则不应这样做。改为使用与图形表示层分离的布尔标志。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-05-14T03:48:20.597

与零比较*可以*是一种安全操作，只要零不是计算值（如上述答案中所述）。这样做的原因是零是一个完美的浮点数。

谈到完全可表示的值，您将获得 24 位范围的二次幂概念（单精度）。所以 1、2、4 是完全可表示的，0.5、0.25 和 0.125 也是如此。只要你所有重要的位都是 24 位的，你就是黄金。所以 10.625 可以精确地表示。

这很好，但在压力下会很快分崩离析。我想到了两种情况：1）涉及计算时。不要相信 sqrt(3)*sqrt(3) == 3。它不会是那样的。正如其他一些答案所暗示的那样，它可能不会在一个 epsilon 之内。2) 当涉及任何非 2 次幂 (NPOT) 时。所以这听起来可能很奇怪，但 0.1 是二进制的无限级数，因此任何涉及此类数字的计算从一开始都是不精确的。

（哦，原来的问题提到了与零的比较。不要忘记 -0.0 也是一个完全有效的浮点值。）

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-04-26T13:51:15.253

[“正确答案”掩盖了选择`K`。选择`K`最终与选择一样临时，`VISIBLE_SHIFT`但选择`K`不太明显，因为`VISIBLE_SHIFT`它不基于任何显示属性。因此选择你的毒物选择`K`或选择`VISIBLE_SHIFT`。这个答案主张选择`VISIBLE_SHIFT`然后证明选择的困难`K`]

正是由于舍入错误，您不应该对逻辑运算使用“精确”值的比较。在视觉显示器上位置的特定情况下，位置是 0.0 还是 0.0000000003 可能无关紧要 - 眼睛看不到差异。所以你的逻辑应该是这样的：

```
#define VISIBLE_SHIFT    0.0001        // for example
if (fabs(theView.frame.origin.x) < VISIBLE_SHIFT) { /* ... */ } 
```

但是，最终，“肉眼不可见”将取决于您的显示属性。如果您可以设置显示上限（您应该可以）；然后选择`VISIBLE_SHIFT`成为该上限的一小部分。

现在，“正确答案”取决于`K`所以让我们探索picking `K`。上面的“正确答案”说：

> K 是您选择的常数，这样您的计算的累积误差肯定会在最后一个位置受到 K 个单位的限制（如果您不确定错误限制计算是否正确，请使 K 比您的计算大几倍说应该是）

所以我们需要`K`. 如果获取`K`比选择我更困难、更不直观，`VISIBLE_SHIFT`那么您将决定什么对您有用。为了找到`K`，我们将编写一个查看一堆`K`值的测试程序，这样我们就可以看到它的行为方式。`K`如果“正确答案”可用，如何选择应该很明显。不？

我们将使用，作为“正确答案”的详细信息：

```
if (fabs(x-y) < K * DBL_EPSILON * fabs(x+y) || fabs(x-y) < DBL_MIN) 
```

让我们尝试 K 的所有值：

```
#include <math.h>
#include <float.h>
#include <stdio.h>

void main (void)
{
  double x = 1e-13;
  double y = 0.0;

  double K = 1e22;
  int i = 0;

  for (; i < 32; i++, K = K/10.0)
    {
      printf ("K:%40.16lf -> ", K);

      if (fabs(x-y) < K * DBL_EPSILON * fabs(x+y) || fabs(x-y) < DBL_MIN)
        printf ("YES\n");
      else
        printf ("NO\n");
    }
}
ebg@ebg$ gcc -o test test.c
ebg@ebg$ ./test
K:10000000000000000000000.0000000000000000 -> YES
K: 1000000000000000000000.0000000000000000 -> YES
K:  100000000000000000000.0000000000000000 -> YES
K:   10000000000000000000.0000000000000000 -> YES
K:    1000000000000000000.0000000000000000 -> YES
K:     100000000000000000.0000000000000000 -> YES
K:      10000000000000000.0000000000000000 -> YES
K:       1000000000000000.0000000000000000 -> NO
K:        100000000000000.0000000000000000 -> NO
K:         10000000000000.0000000000000000 -> NO
K:          1000000000000.0000000000000000 -> NO
K:           100000000000.0000000000000000 -> NO
K:            10000000000.0000000000000000 -> NO
K:             1000000000.0000000000000000 -> NO
K:              100000000.0000000000000000 -> NO
K:               10000000.0000000000000000 -> NO
K:                1000000.0000000000000000 -> NO
K:                 100000.0000000000000000 -> NO
K:                  10000.0000000000000000 -> NO
K:                   1000.0000000000000000 -> NO
K:                    100.0000000000000000 -> NO
K:                     10.0000000000000000 -> NO
K:                      1.0000000000000000 -> NO
K:                      0.1000000000000000 -> NO
K:                      0.0100000000000000 -> NO
K:                      0.0010000000000000 -> NO
K:                      0.0001000000000000 -> NO
K:                      0.0000100000000000 -> NO
K:                      0.0000010000000000 -> NO
K:                      0.0000001000000000 -> NO
K:                      0.0000000100000000 -> NO
K:                      0.0000000010000000 -> NO 
```

啊，所以如果我希望 1e-13 为“零”，K 应该是 1e16 或更大。

所以，我会说你有两个选择：

1.  正如我所建议的，使用您对“epsilon”值的***工程判断进行简单的 epsilon 计算。***如果您正在做图形并且“零”意味着是“可见的变化”，而不是检查您的视觉资产（图像等）并判断 epsilon 可以是什么。
2.  在您阅读非货物崇拜答案的参考（并在此过程中获得博士学位）之前，不要尝试任何浮点计算，然后使用您的非直觉判断来选择`K`.

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-05-07T12:09:19.483

正确的问题：如何在 Cocoa Touch 中比较分数？

正确答案：CGPointEqualToPoint()。

另一个问题：两个计算值是否相同？

答案在这里发布：他们不是。

如何检查它们是否接近？如果要检查它们是否接近，请不要使用 CGPointEqualToPoint()。但是，不要检查它们是否接近。做一些在现实世界中有意义的事情，比如检查一个点是否超出了一条线，或者一个点是否在一个球体内。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-05-14T01:41:29.187

上次我检查 C 标准时，没有要求对双精度数（总共 64 位，53 位尾数）进行浮点运算的精度要超过该精度。但是，某些硬件可能会在更高精度的寄存器中执行操作，并且该要求被解释为不需要清除低位（超出加载到寄存器中的数字的精度）。所以你可能会得到意想不到的比较结果，这取决于最后睡在那里的人在寄存器中剩下的内容。

也就是说，尽管我每次看到它都努力删除它，但我工作的机构有很多使用 gcc 编译并在 linux 上运行的 C 代码，我们很长时间没有注意到这些意外结果. 我不知道这是否是因为 gcc 正在为我们清除低位，现代计算机上的这些操作没有使用 80 位寄存器，标准已经改变，或者什么。我想知道是否有人可以引用章节和经文。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-22T18:43:13.443

您可以使用此类代码将浮点数与零进行比较：

```
if ((int)(theView.frame.origin.x * 100) == 0) {
    // do important operation
} 
```

这将与 0.1 的准确度进行比较，在这种情况下对于 CGFloat 来说已经足够了。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-03-12T16:43:16.593

```
-(BOOL)isFloatEqual:(CGFloat)firstValue secondValue:(CGFloat)secondValue{

BOOL isEqual = NO;

NSNumber *firstValueNumber = [NSNumber numberWithDouble:firstValue];
NSNumber *secondValueNumber = [NSNumber numberWithDouble:secondValue];

isEqual = [firstValueNumber isEqualToNumber:secondValueNumber];

return isEqual; 
```

}

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-03-23T10:17:00.530

我正在使用以下比较函数来比较小数位数：

```
bool compare(const double value1, const double value2, const int precision)
{
    int64_t magnitude = static_cast<int64_t>(std::pow(10, precision));
    int64_t intValue1 = static_cast<int64_t>(value1 * magnitude);
    int64_t intValue2 = static_cast<int64_t>(value2 * magnitude);
    return intValue1 == intValue2;
}

// Compare 9 decimal places:
if (compare(theView.frame.origin.x, 0, 9)) {
    // do important operation
} 
```

* * *

## 回答 #11

> 赞同：-6
> 
> 时间：2012-05-02T22:52:19.720

我想说正确的做法是将每个数字声明为一个对象，然后在该对象中定义三件事：1）一个相等运算符。2) 一个 setAcceptableDifference 方法。3）价值本身。如果两个值的绝对差小于设置为可接受的值，则相等运算符返回 true。

您可以对对象进行子类化以适应问题。例如，如果直径相差小于 0.0001 英寸，则 1 到 2 英寸之间的金属圆棒可能被认为具有相同的直径。因此，您可以使用参数 0.0001 调用 setAcceptableDifference，然后放心地使用相等运算符。

# .net - 实体框架 ObjectDisposedException

> ID：10334694
> 
> 赞同：0
> 
> 时间：2012-04-26T13:41:34.977
> 
> 标签：.net, entity-framework, repository, objectdisposedexception

再会！我使用 EF 5 Beta 2 CodeFirst。对于我的实体，我首先创建了运行良好的 ConsoleApplication 和 Repository，但是当我创建 dll 并使用此 Repository 时，我在尝试使用 Repository 时遇到了 ObjectDisposedException。
样品（中`var user = (new Repository().GetElementById<ReposirotyEF.User>(resultTesting.Users.Id) as ReposirotyEF.User);`）：

```
public static ResultModel PopulateResultModel(ResultTesting resultTesting)
{
        string name = string.Empty;

        var user = (new Repository().GetElementById<ReposirotyEF.User>(resultTesting.Users.Id) as ReposirotyEF.User);
        name = user.Name;

        return new ResultModel()
                   {
                       Id = resultTesting.Id,
                       Name = name,
                       Result = resultTesting.Result,
                       Answers = resultTesting.Answers,
                       Data = resultTesting.TimeEnd,
                       RightAnswers = resultTesting.RightAnswers,
                       Time = resultTesting.Time
                   };
    } 
```

或者：

```
public void SaveOrUpdate<T>(T obj)
    {
        using (var context = new ContextTest1())
        {
            switch (typeof(T).Name)
            {
                case "User":
                    User user = context.Users.ToList().Find(u => u.Id == (obj as User).Id);
                    User newUser = obj as User;
                    if (user != null)
                    {
                        user = newUser;
                    }
                    else
                    {
                        context.Users.Add(newUser);
                    }

                    break;
                case "ResultTesting":
                    var resultTesting = context.ResultTestings.ToList().Find(u => u.Id == (obj as ResultTesting).Id);
                    var newRes = obj as ResultTesting;
                    if (resultTesting != null)
                    {
                        resultTesting = newRes;
                    }
                    else
                    {
                        context.ResultTestings.Add(newRes);
                    }

                    break;
                case "Question":
                    var question = context.Questions.ToList().Find(u => u.Id == (obj as Question).Id);
                    var newQue = obj as Question;
                    if (question != null)
                    {
                        question = newQue;
                    }
                    else
                    {
                        context.Questions.Add(newQue);
                    }

                    break;
                default:
                    //context.CurrentTestings.ToList().Remove(obj as CurrentTesting);
                    var currentTesting = context.CurrentTestings.ToList().Find(u => u.Id == (obj as CurrentTesting).Id);
                    var newCur = obj as CurrentTesting;
                    if (currentTesting != null)
                    {
                        currentTesting = newCur;
                    }
                    else
                    {
                        context.CurrentTestings.Add(newCur);
                    }

                    break;
            }
            context.SaveChanges();
        }
    } 
```

在`context.CurrentTestings.Add(newCur);`

和我的`GetElementById`（不好）：

```
public IId GetElementById<T>(int id)
        where T : IId
    {
        using (var context = new ContextTest1())
        {
            switch (typeof(T).Name)
            {
                case "User":
                    return context.Users.ToList().Find(u => u.Id == id);
                case "ResultTesting":
                    return context.ResultTestings.ToList().Find(u => u.Id == id);
                case "Question":
                    return context.Questions.ToList().Find(u => u.Id == id);
            }

            return context.CurrentTestings.ToList().Find(u => u.Id == id);
        }
    } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:55:31.283

礼貌地说——这段代码太可怕了。

只是几个主要问题：

1.  该代码从不保存修改过的数据——`user = newUser;`不会使您的数据持久化。您必须`context.Entry(user).CurrentValues.SetValues(newUser)`改用
2.  你了解泛型的目的吗？为什么要按类型使用 switch 语句？DbContext 允许您通过使用以下方法以通用方式处理集合：`context.Set<T>()`
3.  这`context.Users.ToList()`会将数据库表的全部内容加载到您搜索单个记录的应用程序中。这是你能做到的最好的性能问题之一。采用`context.Set<T>().SingleOrDefault(x => x.Id == id)`

要了解您的异常，您必须首先找到它发生的位置以及处理了什么对象。例如，您是否在实体上使用导航属性？您希望它们被加载吗？在这种情况下，您必须在处理上下文之前执行此操作。

# ruby-on-rails - 在使用设计 gem 进行用户注册时，在同一模型中运行另一个操作

> ID：10334701
> 
> 赞同：0
> 
> 时间：2012-04-26T13:42:01.640
> 
> 标签：ruby-on-rails, devise

我有一个动作

```
class User < ActiveRecord::Base
  def follow_user(following_id)
      Friendship.create(:following_id => following_id, :follower_id => self.id)
  end
end 
```

我需要运行这个操作，这样我就可以让用户在注册时默认关注用户......希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:35:37.567

您应该能够`after_create`在您的 User 模型上使用回调，一种在对象生命周期中的某个特定时间点调用的方法，例如 ，以实现此目的。

[您可以在Rails Guides](http://guides.rubyonrails.org/active_record_validations_callbacks.html#callbacks-overview)上阅读有关回调的更多信息。基本上，你想在你的`User`模型中说这样的话。

```
after_create: :follow_user 
```

然后编写你的`follow_user`方法来实现你想要的。每次`User`创建 a 时，`follow_user`都会运行。根据您的代码，我假设`follow_user`是一种在一个用户跟随另一个用户时使用的方法，而不仅仅是在创建时（因此传递参数）。为了绕过在验证中传递参数，我将设置一个默认参数，以便如果在不传递参数的情况下调用该方法，则会遵循“默认”用户。像这样的东西：

```
def follow_user(following_id = 1)
  code
end 
```

# java - IntelliJ IDEA 中单个 JUnit 测试用例的执行失败

> ID：10334704
> 
> 赞同：1
> 
> 时间：2012-04-26T13:42:07.470
> 
> 标签：java, unit-testing, junit, intellij-idea

我在 Windows XP 上使用 IntelliJ Idea 11.1.1（据我所知的最新版本），由于某种原因，我无法在 Idea 中运行一个 JUnit 测试用例（方法）。

当我运行整个单元测试类时，每个测试都显示为“通过”。

[http://zone8.dk/stackoverflow/ideajunit1.png](http://zone8.dk/stackoverflow/ideajunit1.png)

但是.. 当我将光标放在其中一个测试用例方法中并按 CTRL+SHIFT+F10 单独运行此特定测试用例时，测试无法执行。

[http://zone8.dk/stackoverflow/ideajunit2.png](http://zone8.dk/stackoverflow/ideajunit2.png)

这是整个 IDEA 控制台输出：

```
"C:\Program Files\Java\jdk1.6.0_31\bin\java" -ea -Didea.launcher.port=7548 "-Didea.launcher.bin.path=C:\Program Files\JetBrains\IntelliJ IDEA 11.1.1\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\JetBrains\IntelliJ IDEA 11.1.1\lib\idea_rt.jar;C:\Program Files\JetBrains\IntelliJ IDEA 11.1.1\plugins\junit\lib\junit-rt.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\jce.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\resources.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\rt.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.6.0_31\jre\lib\ext\sunpkcs11.jar;C:\cygwin\home\jot\netbutikken\model\target\test-classes;C:\cygwin\home\jot\netbutikken\model\target\classes;C:\maven-repository\tapestry\tapestry\4.0.2\tapestry-4.0.2.jar;C:\maven-repository\jboss\javassist\3.0\javassist-3.0.jar;C:\maven-repository\commons-codec\commons-codec\1.3\commons-codec-1.3.jar;C:\maven-repository\commons-fileupload\commons-fileupload\1.1\commons-fileupload-1.1.jar;C:\maven-repository\commons-io\commons-io\1.4\commons-io-1.4.jar;C:\maven-repository\commons-logging\commons-logging\1.1.1\commons-logging-1.1.1.jar;C:\maven-repository\ognl\ognl\2.6.7\ognl-2.6.7.jar;C:\maven-repository\oro\oro\2.0.8\oro-2.0.8.jar;C:\maven-repository\hivemind\hivemind\1.1.1\hivemind-1.1.1.jar;C:\maven-repository\hivemind\hivemind-lib\1.1.1\hivemind-lib-1.1.1.jar;C:\maven-repository\org\apache\axis2\axis2\1.5.1\axis2-1.5.1.jar;C:\maven-repository\org\apache\axis2\axis2-transport-local\1.5.1\axis2-transport-local-1.5.1.jar;C:\maven-repository\org\apache\axis2\axis2-kernel\1.5.1\axis2-kernel-1.5.1.jar;C:\maven-repository\org\apache\ws\commons\axiom\axiom-api\1.2.8\axiom-api-1.2.8.jar;C:\maven-repository\org\apache\geronimo\specs\geronimo-activation_1.1_spec\1.0.1\geronimo-activation_1.1_spec-1.0.1.jar;C:\maven-repository\org\apache\geronimo\specs\geronimo-javamail_1.4_spec\1.2\geronimo-javamail_1.4_spec-1.2.jar;C:\maven-repository\jaxen\jaxen\1.1.1\jaxen-1.1.1.jar;C:\maven-repository\org\apache\geronimo\specs\geronimo-stax-api_1.0_spec\1.0.1\geronimo-stax-api_1.0_spec-1.0.1.jar;C:\maven-repository\org\apache\ws\commons\axiom\axiom-impl\1.2.8\axiom-impl-1.2.8.jar;C:\maven-repository\org\codehaus\woodstox\wstx-asl\3.2.4\wstx-asl-3.2.4.jar;C:\maven-repository\org\apache\ws\commons\axiom\axiom-dom\1.2.8\axiom-dom-1.2.8.jar;C:\maven-repository\org\apache\geronimo\specs\geronimo-ws-metadata_2.0_spec\1.1.2\geronimo-ws-metadata_2.0_spec-1.1.2.jar;C:\maven-repository\org\apache\geronimo\specs\geronimo-jta_1.1_spec\1.1\geronimo-jta_1.1_spec-1.1.jar;C:\maven-repository\javax\servlet\servlet-api\2.4\servlet-api-2.4.jar;C:\maven-repository\commons-httpclient\commons-httpclient\3.1\commons-httpclient-3.1.jar;C:\maven-repository\wsdl4j\wsdl4j\1.6.2\wsdl4j-1.6.2.jar;C:\maven-repository\org\apache\ws\commons\schema\XmlSchema\1.4.3\XmlSchema-1.4.3.jar;C:\maven-repository\org\apache\neethi\neethi\2.0.4\neethi-2.0.4.jar;C:\maven-repository\org\apache\woden\woden-api\1.0M8\woden-api-1.0M8.jar;C:\maven-repository\org\apache\ant\ant\1.7.0\ant-1.7.0.jar;C:\maven-repository\org\apache\ant\ant-launcher\1.7.0\ant-launcher-1.7.0.jar;C:\maven-repository\xerces\xmlParserAPIs\2.6.0\xmlParserAPIs-2.6.0.jar;C:\maven-repository\org\apache\woden\woden-impl-dom\1.0M8\woden-impl-dom-1.0M8.jar;C:\maven-repository\javax\mail\mail\1.4\mail-1.4.jar;C:\maven-repository\javax\activation\activation\1.1\activation-1.1.jar;C:\maven-repository\xalan\xalan\2.7.0\xalan-2.7.0.jar;C:\maven-repository\xerces\xercesImpl\2.8.1\xercesImpl-2.8.1.jar;C:\maven-repository\xml-apis\xml-apis\1.3.03\xml-apis-1.3.03.jar;C:\maven-repository\org\apache\axis2\axis2-transport-http\1.5.1\axis2-transport-http-1.5.1.jar;C:\maven-repository\org\apache\httpcomponents\httpcore\4.0\httpcore-4.0.jar;C:\maven-repository\axis\axis\1.4\axis-1.4.jar;C:\maven-repository\axis\axis-jaxrpc\1.4\axis-jaxrpc-1.4.jar;C:\maven-repository\axis\axis-saaj\1.4\axis-saaj-1.4.jar;C:\maven-repository\axis\axis-wsdl4j\1.5.1\axis-wsdl4j-1.5.1.jar;C:\maven-repository\commons-discovery\commons-discovery\0.2\commons-discovery-0.2.jar;C:\maven-repository\org\apache\xmlbeans\xmlbeans\2.4.0\xmlbeans-2.4.0.jar;C:\maven-repository\stax\stax-api\1.0.1\stax-api-1.0.1.jar;C:\maven-repository\org\apache\xmlbeans\xmlbeans-xpath\2.4.0\xmlbeans-xpath-2.4.0.jar;C:\maven-repository\net\sf\saxon\saxon\9\saxon-9.jar;C:\maven-repository\net\sf\saxon\saxon-dom\9\saxon-dom-9.jar;C:\maven-repository\net\sf\saxon\saxon-xpath\9\saxon-xpath-9.jar;C:\maven-repository\net\sf\saxon\saxon-s9api\9\saxon-s9api-9.jar;C:\maven-repository\org\hibernate\hibernate\3.2.7.ga\hibernate-3.2.7.ga.jar;C:\maven-repository\net\sf\ehcache\ehcache\1.2.3\ehcache-1.2.3.jar;C:\maven-repository\commons-collections\commons-collections\2.1.1\commons-collections-2.1.1.jar;C:\maven-repository\javax\transaction\jta\1.0.1B\jta-1.0.1B.jar;C:\maven-repository\asm\asm-attrs\1.5.3\asm-attrs-1.5.3.jar;C:\maven-repository\dom4j\dom4j\1.6.1\dom4j-1.6.1.jar;C:\maven-repository\antlr\antlr\2.7.6\antlr-2.7.6.jar;C:\maven-repository\cglib\cglib\2.1_3\cglib-2.1_3.jar;C:\maven-repository\asm\asm\1.5.3\asm-1.5.3.jar;C:\maven-repository\dk\test\rosa\rosa-netbutikken\4.25.22\rosa-netbutikken-4.25.22.jar;C:\maven-repository\joda-time\joda-time\1.6\joda-time-1.6.jar;C:\maven-repository\com\thoughtworks\xstream\xstream\1.2.2\xstream-1.2.2.jar;C:\maven-repository\xpp3\xpp3_min\1.1.3.4.O\xpp3_min-1.1.3.4.O.jar;C:\maven-repository\commons-lang\commons-lang\2.4\commons-lang-2.4.jar;C:\maven-repository\velocity\velocity\1.4\velocity-1.4.jar;C:\maven-repository\velocity\velocity-dep\1.4\velocity-dep-1.4.jar;C:\maven-repository\commons-pool\commons-pool\1.5.4\commons-pool-1.5.4.jar;C:\maven-repository\org\apache\xmlgraphics\fop\0.95\fop-0.95.jar;C:\maven-repository\org\apache\xmlgraphics\xmlgraphics-commons\1.3.1\xmlgraphics-commons-1.3.1.jar;C:\maven-repository\org\apache\xmlgraphics\batik-svg-dom\1.7\batik-svg-dom-1.7.jar;C:\maven-repository\org\apache\xmlgraphics\batik-anim\1.7\batik-anim-1.7.jar;C:\maven-repository\org\apache\xmlgraphics\batik-awt-util\1.7\batik-awt-util-1.7.jar;C:\maven-repository\org\apache\xmlgraphics\batik-util\1.7\batik-util-1.7.jar;C:\maven-repository\org\apache\xmlgraphics\batik-dom\1.7\batik-dom-1.7.jar;C:\maven-repository\org\apache\xmlgraphics\batik-css\1.7\batik-css-1.7.jar;C:\maven-repository\org\apache\xmlgraphics\batik-ext\1.7\batik-ext-1.7.jar;C:\maven-repository\xml-apis\xml-apis-ext\1.3.04\xml-apis-ext-1.3.04.jar;C:\maven-repository\org\apache\xmlgraphics\batik-xml\1.7\batik-xml-1.7.jar;C:\maven-repository\org\apache\xmlgraphics\batik-parser\1.7\batik-parser-1.7.jar;C:\maven-repository\org\apache\xmlgraphics\batik-bridge\1.7\batik-bridge-1.7.jar;C:\maven-repository\org\apache\xmlgraphics\batik-gvt\1.7\batik-gvt-1.7.jar;C:\maven-repository\org\apache\xmlgraphics\batik-script\1.7\batik-script-1.7.jar;C:\maven-repository\org\apache\xmlgraphics\batik-transcoder\1.7\batik-transcoder-1.7.jar;C:\maven-repository\org\apache\xmlgraphics\batik-svggen\1.7\batik-svggen-1.7.jar;C:\maven-repository\org\apache\xmlgraphics\batik-extension\1.7\batik-extension-1.7.jar;C:\maven-repository\org\apache\avalon\framework\avalon-framework-api\4.3.1\avalon-framework-api-4.3.1.jar;C:\maven-repository\org\apache\avalon\framework\avalon-framework-impl\4.3.1\avalon-framework-impl-4.3.1.jar;C:\maven-repository\com\java4less\raztec\1.0\raztec-1.0.jar;C:\maven-repository\com\java4less\rbarcode\1.0\rbarcode-1.0.jar;C:\maven-repository\com\google\inject\guice\3.0\guice-3.0.jar;C:\maven-repository\javax\inject\javax.inject\1\javax.inject-1.jar;C:\maven-repository\aopalliance\aopalliance\1.0\aopalliance-1.0.jar;C:\maven-repository\org\easymock\easymock\3.0\easymock-3.0.jar;C:\maven-repository\cglib\cglib-nodep\2.2\cglib-nodep-2.2.jar;C:\maven-repository\org\objenesis\objenesis\1.2\objenesis-1.2.jar;C:\maven-repository\org\jmock\jmock-legacy\2.2.0\jmock-legacy-2.2.0.jar;C:\maven-repository\org\jmock\jmock\2.2.0\jmock-2.2.0.jar;C:\maven-repository\org\hamcrest\hamcrest-core\1.1\hamcrest-core-1.1.jar;C:\maven-repository\org\hamcrest\hamcrest-library\1.1\hamcrest-library-1.1.jar;C:\maven-repository\com\googlecode\juniversalchardet\juniversalchardet\1.0.3\juniversalchardet-1.0.3.jar;C:\maven-repository\ojdbc\ojdbc\14\ojdbc-14.jar;C:\maven-repository\hsqldb\hsqldb\1.8.0.7\hsqldb-1.8.0.7.jar;C:\maven-repository\com\lowagie\itext\2.1.7\itext-2.1.7.jar;C:\maven-repository\bouncycastle\bcmail-jdk14\138\bcmail-jdk14-138.jar;C:\maven-repository\bouncycastle\bcprov-jdk14\138\bcprov-jdk14-138.jar;C:\maven-repository\org\bouncycastle\bctsp-jdk14\1.38\bctsp-jdk14-1.38.jar;C:\maven-repository\org\bouncycastle\bcprov-jdk14\1.38\bcprov-jdk14-1.38.jar;C:\maven-repository\org\bouncycastle\bcmail-jdk14\1.38\bcmail-jdk14-1.38.jar;C:\maven-repository\info\cukes\cucumber-java\1.0.0\cucumber-java-1.0.0.jar;C:\maven-repository\info\cukes\cucumber-core\1.0.0\cucumber-core-1.0.0.jar;C:\maven-repository\info\cukes\gherkin\2.9.3\gherkin-2.9.3.jar;C:\maven-repository\info\cukes\cucumber-html\0.2.1\cucumber-html-0.2.1.jar;C:\maven-repository\info\cukes\cucumber-junit\1.0.0\cucumber-junit-1.0.0.jar;C:\maven-repository\info\cukes\cucumber-guice\1.0.0\cucumber-guice-1.0.0.jar;C:\maven-repository\junit\junit\4.7\junit-4.7.jar;C:\maven-repository\org\slf4j\jcl-over-slf4j\1.6.1\jcl-over-slf4j-1.6.1.jar;C:\maven-repository\org\slf4j\slf4j-api\1.6.1\slf4j-api-1.6.1.jar;C:\maven-repository\org\slf4j\slf4j-log4j12\1.6.1\slf4j-log4j12-1.6.1.jar;C:\maven-repository\log4j\log4j\1.2.16\log4j-1.2.16.jar;C:\maven-repository\dk\test\log4j\testLog4jSetup\0.1\testLog4jSetup-0.1.jar" com.intellij.rt.execution.application.AppMain com.intellij.rt.execution.junit.JUnitStarter -ideVersion5 dk.test.salg.netbutikken.model.handlers.TestRejseSoegningEventHandler,testPerformMedEnkeltRejse

Process finished with exit code 0 
```

任何IDEA的任何人？:) 我觉得我已经在整个网络上搜索了答案。非常感谢您！

我可能应该强调，测试内容根本不重要。我尝试在不同的模块和项目中以这种方式运行许多不同的测试用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:39:35.273

它看起来像一个已知问题：[IDEA-84031](http://youtrack.jetbrains.com/issue/IDEA-84031)。该修复程序将在 IDEA 11.1.2 版本中提供。

# php - 文件上传 - 目录结构的最佳实践？

> ID：10334707
> 
> 赞同：2
> 
> 时间：2012-04-26T13:42:26.083
> 
> 标签：php, file-upload, file-io, directory

**语境：**

我刚刚编写了一个 PHP 文件上传处理程序，它将任何传入文件保存到我网站的上传目录。上传目录可通过网络公开访问，目前每个文件在使用数据库生成的唯一 ID 重命名后直接转储到其中。处理程序将允许除 JS 和 PHP 之外的任何文件类型，而不仅仅是图像。最终文件的数量可能会达到数千个，但这需要几年的时间。

**我的问题：**

将所有上传的文件放在服务器上的同一目录中是个好主意还是坏主意，如果不是，请解释原因，以及更好的方法？

我注意到 wordpress 将它们存储在以日期命名的目录中。

我能看到的唯一真正的缺点是，`ls`一旦目录中有几千个文件，目录上的 a 可能会占用大量资源。还是对一个目录中的文件数量或一个目录的总大小（运行 Linux）有限制？

**关于安全性的稍微先发制人的说明：**

上传处理程序可以防止任何人登录管理员级别的用户上传文件，并且它也不会保存 PHP 或 JS 文件（至少在我可以使用数组`type`中的属性可靠地测试它们的情况下），因为这些文件可能会被执行`$_FILES`由服务器。我计划实施的另一个保护措施是`.htaccess`阻止对某些文件类型的请求的文件，以防万一。任何关于这方面的说明也将受到欢迎，但这不是这个问题的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:10:31.320

在组织文件方面没有固定的标准。但是，将所有文件放在一个目录中并不是一个好主意。它最终会开始影响系统的性能，尤其是在索引方面。

您可以做 WordPress 所做的事情，按年、月和日期进行组织。您也可以按文件类型（扩展名）进行组织，因此有一个 PDF 目录、一个 ZIP 目录等，其中可能包含年/月/日目录以便进一步分类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:04:30.870

如果是我，我会按天或某个时间值分解它。您正在谈论（可能）数千个未知大小的文件。您最终将不得不围绕此构建存储，并且可能希望将部分移动到其他卷、档案等。

我还会确保每个文件都是 chmod -x 并给出一些中性的后缀。

编辑：我也同意@NADH 关于索引的看法。当文件夹中有数千个文件时，许多操作系统会变得很挑剔。

# ruby-on-rails - Cancan Create/New 突然停止工作

> ID：10334712
> 
> 赞同：0
> 
> 时间：2012-04-26T13:42:33.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

我意识到我在这里发布的代码非常少，但我发布是希望有人能够帮助我指出正确的方向。

基本上 create/new 已随机停止为我的标签角色工作....显示和编辑仍然可以正常工作！？！

我猜我已经改变了一些会产生连锁反应的东西，但我找不到导致它的原因。有没有更多经验的人对我应该去哪里有任何想法？

这是我的能力模型。

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user

    if user.role? :administrator
      can :manage, :all  
    elsif user.role? :label
      can :manage, Release, :label_id => user.label_id
      can :manage , Product, :release => { :label_id => user.label_id }
    elsif user.role? :sales
      can :manage, Label
      can :manage, Release
      can :manage, Product  
    else
      can :read, Release
      can :read, Product
    end
  end
end 
```

提前致谢！！！！

编辑：

我的用户、标签、发布和产品控制器顶部有“load_and_authorize_resource”。从产品控制器中删除它似乎已经修复了它，但我觉得这是不对的，所以我仍然欢迎任何指导.

# java - 如何将Java中的String转换为Json

> ID：10334716
> 
> 赞同：-1
> 
> 时间：2012-04-26T13:42:40.170
> 
> 标签：java, string, json

如何在java中将这样的字符串转换为json？

```
String mycode = "{
      "name": "Test",
      "Status": {
        "code": 200,
        "request": "get"
      }  
    }"; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:44:56.167

使用[org.json](http://www.json.org/java/)库：

```
JSONObject jsonObj = new JSONObject(mycode); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:46:02.187

我发现 Google gson 非常方便并且（不是那么频繁）非常轻巧并且不会在您的代码中留下痕迹，除非您制作 json 产品（如果您不需要特定的转换）。

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:45:31.277

GSON 是一个很好的开源库，适合您的用例。这是链接 - [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

# couchdb - 使用弹性搜索索引 couchdb

> ID：10334725
> 
> 赞同：4
> 
> 时间：2012-04-26T13:42:59.333
> 
> 标签：couchdb, elasticsearch

嗨，我已经安装了 elasticsearch 版本 0.18.7 并根据[这些说明](http://www.elasticsearch.org/tutorials/2010/08/01/couchb-integration.html)配置了 couchdb 。我正在尝试通过以下方式创建索引：

```
curl -XPUT '10.50.10.86:9200/_river/tasks/_meta' -d '{
  "type": "couchdb",
  "couchdb": {
    "host": "10.50.10.86",
    "port": 5984,
    "db": "tasks",
    "filter": null
  },
  "index": {
    "index": "tasks",
    "type": "tasks",
    "bulk_size": "100",
    "bulk_timeout": "10ms"
  }
}' 
```

并收到这样的消息，

```
{
  "ok": true,
  "_index": "_river",
  "_type": "tasks",
  "_id": "_meta",
  "_version": 2
} 
```

尝试访问网址时

```
curl -GET 'http://10.50.10.86:9200/tasks/tasks?q=*&pretty=true' 
```

然后

```
{
  "error": "IndexMissingException[[tasks] missing]",
  "status": 404
} 
```

请指导我如何使用 elasticsearch 索引 couchdb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:49:07.047

我不确定`es_test_db2`是从哪里来的。这个的输出是什么？

```
curl 10.50.10.86:9200/_river/tasks/_status\?pretty=1 
```

# ruby-on-rails - 如何将压缩的回形针文件发送到客户端浏览器？

> ID：10334732
> 
> 赞同：1
> 
> 时间：2012-04-26T13:43:11.157
> 
> 标签：ruby-on-rails, paperclip, gzip, content-type

我有一个应用程序，它允许用户上传文档并使用回形针处理器对其进行转换。不幸的是，处理器将文件转换成多个文件（即file、file01、file02）。然后，我使用 gzip 创建文件的存档以供回形针使用（即 file.gz）。

我想在显示页面中显示 gzip 文件，我尝试了许多不同的方法，但无法使其正常工作。我想将 gzip 文件发送到客户端并让浏览器对其进行放气。

`<%= render :file => @asset.document.url(:gzip), :type => "application/x-gzip" %>`

以上产生了标准的“缺少模板/链接/到/文件”。

有什么建议么？？

# tycho - Eclipse 无法解析 maven-bundle-plugin 生成的依赖项

> ID：10334745
> 
> 赞同：0
> 
> 时间：2012-04-26T13:44:09.157
> 
> 标签：tycho

我使用 maven-bundle-plugin 为第三方库制作了一个捆绑包，如下所述：http: [//git.eclipse.org/c/tycho/org.eclipse.tycho-demo.git/tree/itp02/build01 /pomfirst-thirdparty/pom.xml](http://git.eclipse.org/c/tycho/org.eclipse.tycho-demo.git/tree/itp02/build01/pomfirst-thirdparty/pom.xml)。

我可以构建我的第三方库并在另一个 eclipse-plugin 项目中使用它，该项目由 tycho-maven-plugin 构建，其依赖关系由 target-platform-configuration 插件解决。到目前为止，一切都很好。

但是我的 Eclipse 无法解决这种依赖关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T09:13:37.840

我认为您正面临在**[Eclipse 对 pomDependencies=consider](http://dev.eclipse.org/mhonarc/lists/tycho-user/msg00554.html)**的线程支持中解释的问题。

建议的解决方案是：

> 您需要将 pom-first 项目导入工作区，PDE 工作区目标平台和 Tycho pomDependencies=consider 功能之间没有集成。

# java - 将内容推送到 facebook、twitterlinkedin、youtube 和 vimeo 等社交网站

> ID：10334746
> 
> 赞同：0
> 
> 时间：2012-04-26T13:44:12.133
> 
> 标签：java, spring, spring-mvc, spring-security, spring-social

我有自定义构建 cms，我想让内容编辑器能够将内容推送到社交媒体网站。

思路如下：内容编辑器在 cms 中创建文章，并选中一些复选框来指示内容应该推送到哪里。例如脸书和推特。

我的控制器处理请求并根据用户选择将内容推送到相关社交网站。

我知道 spring social 提供了与社交媒体网站交互的功能，但所有示例都是基于将这些社交媒体网站的一些未来集成到您自己的网站中。就像与朋友和事物联系一样。我不是在寻找这个。我只想将内容推送到媒体网站。

如果有人能指出如何实现这一目标的正确方向，我将不胜感激。我目前正在使用spring、spring mvc、spring data jpa和hibernate。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:48:37.267

您需要一个帐户才能将内容推送到。您需要对这些帐户进行身份验证（使用 OAuth），然后使用 spring-social API（以及 youtube 和 vimeo API）来推送内容。

您不能在目标站点上没有用户的情况下仅发送它。

# c# - 绑定 ListView 不绑定

> ID：10334750
> 
> 赞同：2
> 
> 时间：2012-04-26T13:44:16.520
> 
> 标签：c#, wpf, listview, binding

我在尝试将列表绑定到列表视图时遇到问题，我得到一个空列表视图。我已经尝试将我的列表更改为一个属性，因为我看到这解决了其他人的问题，但没有运气，任何帮助表示赞赏。

这是 XAML

```
<Window x:Class="key_stage_level_2_app.Window7"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 DataContext="{Binding RelativeSource={RelativeSource Self}}"
 Title="Window7" Height="600" Width="800" Loaded="Window_Loaded">

<Grid>
    <TabControl Height="536" HorizontalAlignment="Left" Name="tabControl1"      VerticalAlignment="Top" Width="778">
        <TabItem Header="Results2" Name="tabItem2">
            <Grid>
                <ListView Height="323" HorizontalAlignment="Left" Margin="107,96,0,0" Name="listView2" VerticalAlignment="Top" Width="186" ItemsSource="{Binding Path=someList}" >
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Width="80"  Header="Name" DisplayMemberBinding="{Binding Path=Name}"/>
                            <GridViewColumn Width="80 " Header="Result" DisplayMemberBinding="{Binding Path=Result}"/>    
                        </GridView>   
                    </ListView.View>
                </ListView> 
```

这是后面的代码

```
namespace key_stage_level_2_app
{
/// <summary>
/// Interaction logic for Window7.xaml
/// </summary>
public partial class Window7 : Window
{

    App app = (App)App.Current;
    private List<Pupil> someList { get; set; }

    public Window7()
    {
        someList = new List<Pupil>();

        foreach (Pupil pupil in app.PupilList)
        {
            someList.Add(pupil);

        }
        someList.Add(new Pupil
        {
            Name = "Simon",
            Result = 100,
            Grade = 100.00,
            ExtensionWork = true,
            TakenTest = true

        });
        Console.WriteLine("someList size = " + someList.Count);

        InitializeComponent();

    } 
```

和班级

```
class Pupil
{

    public String name;
    int result;
    double grade;
    bool extensionWork;
    bool takenTest;

    public Pupil(String Pname, int Presult, double Pgrade, bool PextensionWork, bool PtakenTest)
    {
        Name = Pname;
        Result = Presult;
        Grade = Pgrade;
        ExtensionWork = PextensionWork;
        TakenTest = PtakenTest;

    }
    public Pupil()
    {

    }

    public String Name
    {
        get { return name; }
        set { name = value; }
    }

    public int Result
    {
        get { return result; }
        set { result = value; }
    }

    public double Grade
    {
        get { return grade; }
        set { grade = value; }
    }

    public bool ExtensionWork
    {
        get { return extensionWork; }
        set { extensionWork = value; }
    }

    public bool TakenTest
    {
        get { return takenTest; }
        set { takenTest = value; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:49:36.890

您什么也得不到，因为您正在创建新列表，但您的列表为空，请执行以下操作：

```
someList = new List<Pupil>();

someList.Add(new Pupil
        {
            Name = "Simon",
            Result = 100,
            Grade = 100.00,
            ExtensionWork = true,
            TakenTest = true

        });

        foreach (Pupil pupil in app.PupilList)
        {
            someList.Add(pupil);

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:49:38.317

在初始化组件（）之后；添加以下行：

```
DataContext = this; 
```

以便 View 知道从哪里获取 someList。

此外，Window7 和 Pupil 都应实现 INotifyPropertyChanged 接口以允许更新并避免内存泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T14:29:31.787

将您的类访问修饰符更改为：

```
public class Pupil 
```

并使 someList 属性公开：

```
public List<Pupil> SomeList { get; set; } 
```

所以视图实际上可以看到它。

# php - 如何从字符串发送带有 CSV 附件的电子邮件

> ID：10334753
> 
> 赞同：3
> 
> 时间：2012-04-26T13:44:24.197
> 
> 标签：php, email

这是我的尝试，你能告诉我我做错了什么吗？

allputcsv 将数组转换为 csv 格式的字符串。然后是 base64 编码和块拆分，这似乎适用于普通文件，但是我应该做些什么不同的事情，因为我使用的是字符串？

```
<?php

function sputcsv($row, $delimiter = ',', $enclosure = '"', $eol = "\n")
{
    static $fp = false;
    if ($fp === false)
    {
        $fp = fopen('php://temp', 'r+');
    }
    else
    {
        rewind($fp);
    }

    if (fputcsv($fp, $row, $delimiter, $enclosure) === false)
    {
        return false;
    }

    rewind($fp);
    $csv = fgets($fp);

    if ($eol != PHP_EOL)
    {
        $csv = substr($csv, 0, (0 - strlen(PHP_EOL))) . $eol;
    }
    return $csv;
}

function allputcsv($arr) {
    $str = "";
    foreach($arr as $val) {
        $str .= sputcsv($val);
    }
    return $str;
}

function send_mail($arr) {
    $to = 'youraddress@example.com'; 
    $subject = 'Test email with attachment'; 
    $random_hash = md5(date('r', time())); 
    $headers = "From: webmaster@example.com\r\nReply-To: webmaster@example.com"; 
    $headers .= "\r\nContent-Type: multipart/mixed; boundary=\"--".$random_hash."\""; 
    $attachment = chunk_split(base64_encode(allputcsv($arr))); 
    ob_start();
    ?> 
    --<?php echo $random_hash; ?>  
    Content-Type: text/plain; charset=ISO-8859-1; format=flowed
    Content-Transfer-Encoding: 7bit

    Hello World!!! 
    This is simple text email message. 

    --<?php echo $random_hash; ?>  
    Content-Type: application/vnd.ms-excel;
     name="test.csv"
    Content-Transfer-Encoding: base64
    Content-Disposition: attachment;
     filename="test.csv"

    <?php echo $attachment; ?> 
    --<?php echo $random_hash; ?>-- 

    <?php 
    $message = ob_get_clean(); 
    $mail_sent = @mail( $to, $subject, $message, $headers ); 
}

$array = array(array(1,2,3,4,5,6,7),array(1,2,3,4,5,6,7),array(1,2,3,4,5,6,7));

send_mail($array);
?> 
```

注意：我必须使用我没有选择的邮件功能（我可以使用包装器，但我不想这样做）并且我无法将文件保存在服务器端。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-26T14:11:53.963

您可以以更短、更高效的方式轻松地将 CSV 创建代码包装到单个函数中。

CSV 文件的正确 MIME 类型是`text/csv`. 此外，您应该使用字符串连接和显式`\r\n`序列，因为 RFC 需要 CRLF 行分隔，并且通过使用带有文字新行的 heredoc/nowdoc/output 缓冲，最终会遇到两个问题：

1.  您的缩进可能会破坏消息格式
2.  通过 FTP 以 ASCII 模式复制文件可能会破坏行尾

试试这个：

```
function create_csv_string($data) {

  // Open temp file pointer
  if (!$fp = fopen('php://temp', 'w+')) return FALSE;

  // Loop data and write to file pointer
  foreach ($data as $line) fputcsv($fp, $line);

  // Place stream pointer at beginning
  rewind($fp);

  // Return the data
  return stream_get_contents($fp);

}

function send_csv_mail ($csvData, $body, $to = 'youraddress@example.com', $subject = 'Test email with attachment', $from = 'webmaster@example.com') {

  // This will provide plenty adequate entropy
  $multipartSep = '-----'.md5(time()).'-----';

  // Arrays are much more readable
  $headers = array(
    "From: $from",
    "Reply-To: $from",
    "Content-Type: multipart/mixed; boundary=\"$multipartSep\""
  );

  // Make the attachment
  $attachment = chunk_split(base64_encode(create_csv_string($csvData))); 

  // Make the body of the message
  $body = "--$multipartSep\r\n"
        . "Content-Type: text/plain; charset=ISO-8859-1; format=flowed\r\n"
        . "Content-Transfer-Encoding: 7bit\r\n"
        . "\r\n"
        . "$body\r\n"
        . "--$multipartSep\r\n"
        . "Content-Type: text/csv\r\n"
        . "Content-Transfer-Encoding: base64\r\n"
        . "Content-Disposition: attachment; filename=\"file.csv\"\r\n"
        . "\r\n"
        . "$attachment\r\n"
        . "--$multipartSep--";

   // Send the email, return the result
   return @mail($to, $subject, $body, implode("\r\n", $headers)); 

}

$array = array(array(1,2,3,4,5,6,7), array(1,2,3,4,5,6,7), array(1,2,3,4,5,6,7));

send_csv_mail($array, "Hello World!!!\r\n This is simple text email message."); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-24T20:30:41.050

这是一个更简单的解决方案，用于创建我使用 phpmailer 发送电子邮件附件的 csv。

```
$csvinfo .= "$row[0],$row[1],$row[2],$row[3]\n";
$attachment = "details.csv";  
file_put_contents($attachment, $csvinfo, LOCK_EX); 
```

和相关的 phpmailer 行发送带有附件的电子邮件

```
$mail = new PHPMailer;
$mail->isSMTP();             // Set mailer to use SMTP
$mail->Host = 'x';           // Specify main and backup SMTP servers
$mail->SMTPAuth = true;       // Enable SMTP     authentication
$mail->Username = 'xx';       // SMTP username
$mail->Password = 'xx';         // SMTP password
$mail->SMTPSecure = 'tls';     // Enable TLS or SSL also accepted
$mail->Port = 587;               // TCP port to connect to
$mail->setFrom('me@madein.us', 'Lily');
$mail->AddAddress("you@madein.us");
$mail->addAttachment($attachment);         // Add attachments
$mail->isHTML(true);             // Set email format to HTML
$mail->Subject = "Report";
$mail->Body    = $message;

if(!$mail->send()) {
    echo 'Message could not be sent.';
    echo 'Mailer Error: ' . $mail->ErrorInfo;
} else {
    echo 'Message has been sent';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-28T09:50:30.410

**你可以试试这段代码。它工作完美。**

```
<?php
$con = mysqli_connect('localhost', 'username', 'password', 'databasename');
if (!$con)
{
    die("error" . mysqli_connect_error());
}

error_reporting(E_ERROR);
$filename = "menu_list";
$sql = mysqli_query($con, "SELECT * FROM menu_list");
$row = mysqli_fetch_assoc($sql);
$filename2='datas/'.$filename.'.csv';
$fp = fopen($filename2, "w");
$seperator = "";
$comma = "";
foreach ($row as $name => $value){$seperator .= $comma . '' . str_replace('', '""', $name);$comma = ",";}
$seperator .= "\n";
$seperator;
fputs($fp, $seperator);
mysqli_data_seek($sql, 0);
while ($row = mysqli_fetch_assoc($sql))
{
    $seperator = "";
    $comma = "";
    foreach ($row as $name => $value){$seperator .= $comma . '' . str_replace('', '""', $value);$comma = ",";}
    $seperator .= "\n";
    fputs($fp, $seperator);
}

fclose($fp);

$my_file = $filename2;
$path = "datas/";
$from_name = "solomon";
$from_mail = "pss@gmail.com";
$mailto = "pssworkcse@gmail.com";
$subject = "This is a mail with attachment.";
$message = "Hi,\r\n do you got attachment?\r\n\r\Solomon";
$replyto = "pssworkcse@gmail.com";
$file = $my_file;
$file_size = filesize($file);
$handle = fopen($file, "r");
$content = fread($handle, $file_size);
fclose($handle);
$content = chunk_split(base64_encode($content));
$uid = md5(uniqid(time()));
$name = basename($file);
$header = "From: " . $from_name . " <" . $from_mail . ">\r\n";
$header .= "Reply-To: " . $replyto . "\r\n";
$header .= "MIME-Version: 1.0\r\n";
$header .= "Content-Type: multipart/mixed; boundary=\"" . $uid . "\"\r\n\r\n";
$header .= "This is a multi-part message in MIME format.\r\n";
$header .= "--" . $uid . "\r\n";
$header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
$header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$header .= $message . "\r\n\r\n";
$header .= "--" . $uid . "\r\n";
$header .= "Content-Type: application/octet-stream; name=\"" . $filename2 . "\"\r\n"; 
$header .= "Content-Transfer-Encoding: base64\r\n";
$header .= "Content-Disposition: attachment; filename=\"" . $filename2 . "\"\r\n\r\n";
$header .= $content . "\r\n\r\n";
$header .= "--" . $uid . "--";
mail($mailto, $subject, "", $header)

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-24T20:21:16.973

**就我而言，我正在使用 laravel (v7) swift mailer 发送邮件。**

```
public function build(): SendMonthlyAbsenceReportToEmployee
{
    $body = "\r\n{$this->prepareFile()}\r\n";

    return $this->view('admin.mail.monthly-absence-report')
        ->with('employee', $this->employee)
        ->attachData($body, 'report.csv', [
            'mime' => 'text/csv'
        ])
        ;
}

private function prepareFile()
{
    $data = $this->service->sendEachEmployeeMonthlyAbsenceReport();

    $header = ['Date', 'Other Info'];

    $df = fopen('php://memory','rw');

    fputcsv($df, ["Name: Sohag", 'Designation: abc', 'Department: new department']);

    fputcsv($df, []);

    fputcsv($df, $header);

    foreach ($data as $row) {
        fputcsv($df, $row);
    }

    rewind($df);

    return stream_get_contents($df);
} 
```

# php - preg_match() 在缺少子模式主题时抓取下一行

> ID：10334756
> 
> 赞同：0
> 
> 时间：2012-04-26T13:44:33.117
> 
> 标签：php, regex, preg-match

有这个模式：

```
preg_match('/Artist:\s+(.*?)\n/i', $mp3info, $artist); 
```

$mp3info 中的这个主题：

```
Format:  MPEG 1 Layer 3, Stereo
Details: 44100 Hz Stereo, 227 kbps, playtime 03:14
Tag:     ID3v2
Title:   
Artist:  
Album:   Latest
Year:    
Track:   
Genre:   
Comment: 
Encoder= 
```

当 Artist 不为空时工作。为空时 - $artist[1] 返回整个下一行（专辑）。

主题包含所有空格和 \n（换行符）。不能使用 [AZ]，因为信息可以是任何语言。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:46:36.587

切换到[多行模式](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)( `m`) 并使用[锚点](http://php.net/manual/en/regexp.reference.anchors.php)( `^`, `$`)：

```
preg_match('/^Artist:[ \t]+(.*)$/mi', $mp3info, $artist); 
```

```
$artist = $artist[1]; 
```

您还需要更改`\s`为字符类 ( `[ \t]`)，因为换行符正在被吃掉。

# extjs3 - 如何将数据加载到 Ext.tree.TreePanel（不通过 ajax）

> ID：10334769
> 
> 赞同：0
> 
> 时间：2012-04-26T13:45:04.963
> 
> 标签：extjs3

例如这里 [http://docs.sencha.com/ext-js/3-4/#!/api/Ext.tree.TreePanel](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.tree.TreePanel)

我可以看到财产`dataUrl: 'get-nodes.php',`

但是我如何从我的代码中更改数据？没有`store`属性或`setSource`方法

`EDIT:`

正如我发现的那样，一种可能性是创建我自己的`Ext.tree.TreeLoader`方法`setSource`并使用它而不是默认方法

也许还有更多变种？

`EDIT:`

似乎已经有解决方案

[http://www.sencha.com/forum/showthread.php?4595-Creating-Ext.tree.TreePanel-from-static-JSON-data-in-one-shot](http://www.sencha.com/forum/showthread.php?4595-Creating-Ext.tree.TreePanel-from-static-JSON-data-in-one-shot)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:21:11.790

似乎已经有解决方案

[http://www.sencha.com/forum/showthread.php?4595-Creating-Ext.tree.TreePanel-from-static-JSON-data-in-one-shot](http://www.sencha.com/forum/showthread.php?4595-Creating-Ext.tree.TreePanel-from-static-JSON-data-in-one-shot)

# java - 如何用数据库信息填充微调器

> ID：10334773
> 
> 赞同：-1
> 
> 时间：2012-04-26T13:45:25.597
> 
> 标签：java, android, android-spinner, sqliteopenhelper

我有一个微调器，需要从数据库中填充信息，但我发现的示例不起作用。

这是我的代码：

```
public void consulta() {
    AdminSQLiteOpenHelper admin = 
        new AdminSQLiteOpenHelper(this, "administracion", null, 1);
    SQLiteDatabase bd=admin.getWritableDatabase();

    Cursor c = bd.rawQuery("select name  from category",null);

    startManagingCursor(c);

    // create an array to specify which fields we want to display
    String[] from = new String[]{"name"};

    // create an array of the display item we want to bind our data to
    int[] to = new int[]{android.R.id.text1};

    // create simple cursor adapter
    SimpleCursorAdapter adapter =
      new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c, from, to );

    adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );

    // get reference to our spinner
    spinner1.setAdapter(adapter);

    bd.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:44:50.850

我就是这样做的：

```
db = SQLiteDatabase.openDatabase("/data/data/packagename/databases/mydata.db", null, SQLiteDatabase.OPEN_READONLY);
Cursor c_cat = db.rawQuery("select _id, column_desc from your_table", null);
startManagingCursor(c_cat);
spinner = (Spinner) findViewById(R.id.spinnername);
String[] from = new String[]{"column_desc"};
int[] to = new int[]{android.R.id.text1};
SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c_cat, from, to);
mAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(mAdapter);
db.close(); 
```

我在 onCreate 中完成了所有这些操作。我在方法之外声明了所有变量，以便它们对整个类都是公共的。我过去犯的一件事是在填充微调器后关闭光标。如果要查看微调器中的数据，光标必须保持打开状态。

我希望这可以为您解决。

**编辑：**我注意到您没有在 rawQuery 中查询 _id。如果您希望填充微调器，则必须包括它。分析我提供的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:02:33.683

假设您没有遗漏任何代码，您需要找到/定义 spinner1，以便框架知道将您的信息从适配器放在哪里。

```
private Spinner spinner1;

spinner1 = (Spinner) view.findViewById(R.id.yourspinnerid);

// rest of your code 
```

# iphone - UIView 不显示子视图

> ID：10334774
> 
> 赞同：0
> 
> 时间：2012-04-26T13:45:29.840
> 
> 标签：iphone, ios, uiview, drawing, subview

我们在 ViewController 中创建了一个 UIView 作为分组机制。现在事实证明，由于未绘制其中的子视图，它不起作用（并且没有设置任何其他隐藏设置等）。

我查看了文档和堆栈，但找不到任何相关信息。我在抽奖周期中缺少一些基本的东西吗？

见下图： ![隐藏的子视图](../Images/cabe36716b73fdae53c591598cd8a2ec.png) 蓝色的东西根本不显示，是View的子视图。我将黄色从其子视图中移出，通常在 ViewController 中，现在确实显示了。

# java - 会话失效后 request.getUserPrincipal() 仍然不为空

> ID：10334777
> 
> 赞同：3
> 
> 时间：2012-04-26T13:45:36.063
> 
> 标签：java, websphere, session-timeout, principal

我在 websphere 应用程序服务器 7.0 上部署了 web 应用程序。用户使用 /j_security_check 登录。当会话超时发生会话 ivnvalidates 但 request.getUserPrincipal() 仍然不为空。我希望它应该为空。如何清理用户主体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:09:18.027

我在 sphere 文档中找到了解决方案。

1.  在管理控制台中，单击安全性 > 全局安全性。
2.  在自定义属性下，单击新建。
3.  在名称字段中，输入 com.ibm.ws.security.web.logoutOnHTTPSessionExpire。
4.  在值字段中，输入 true。
5.  单击应用并保存以保存对配置的更改。
6.  重新同步并重新启动服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T15:15:32.957

除了 Vadim 提供的解决方案之外，我还想分享两个链接，这些链接描述了几种替代解决方法，并解释了导致这种看似违反直觉的操作模式的机制。

如果您在不同的应用程序之间使用 SSO（单点登录），使用 com.ibm.ws.security.web.logoutOnHTTPSessionExpire=true 设置可能会有一点缺点。此设置实质上使 LTPA 令牌无效。由于服务器上的安全缓存在超时时会从 LTPA 令牌刷新，因此无效的 LTPA 将导致用户重新验证（登录）其余应用程序 [1]。

对 [2] 中的问题 9（似乎与我们的问题相同）的回答提供了针对此问题的两种替代解决方法的想法，您可以使用基于生存期和不活动的 servlet 过滤器来超时身份验证。

[1]：[安全缓存、LTPA 令牌和会话超时](https://www-304.ibm.com/support/entdocview.wss?rs=180&context=SSEQTP&uid=swg21078845)（需要登录）

[2]：[问答：关于 WebSphere Application Server 安全性的常见问题](http://www.ibm.com/developerworks/websphere/techjournal/1003_botzum/1003_botzum.html#sec2c)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T23:46:34.620

***要记住的关键是有效/无效的 HTTPSession 与 security 不同***。

它们完全不同。

一旦你通过了服务器的身份验证，如果你愿意，你仍然可以在没有任何 HTTPSession 的情况下让应用程序工作。

一旦您被服务器验证，您将获得一个 LTPA 令牌返回到您的浏览器，并且 LTPA 令牌在 2 小时内处于活动状态（这是默认设置）。

如果您的 HTTP 会话过期，如果您不做任何额外的事情，这不会影响 LTPA 令牌。

您可以尝试： ibm_security_logout 这会使 LTPA 令牌无效。

我猜想对于更高版本的 Servlet API，我们确实有一个适当的注销操作可用，这将消除对此的需要。

高温高压

芒鲁

# javascript - Javascript中浮点数的精度可以成为不确定性的来源吗？

> ID：10334782
> 
> 赞同：14
> 
> 时间：2012-04-26T13:45:43.403
> 
> 标签：javascript, math, non-deterministic

相同的数学运算能否在不同的架构或浏览器中返回不同的结果？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T17:14:10.080

其他答案不正确。根据[ECMAScript 5.1 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)（第 15.8.2 节）

> 注意这里没有精确指定函数 acos、asin、atan、atan2、cos、exp、log、pow、sin、sqrt 和 tan 的行为，除非需要对表示感兴趣的边界情况的某些参数值的特定结果。
> 
> ...
> 
> 尽管算法的选择留给实现，但建议（但本标准未指定）实现使用 fdlibm 中包含的 IEEE 754 算法的近似算法，fdlibm 是 Sun Microsystems 的可免费分发的数学库

* * *

但是，即使指定了实现*，***所有**浮点运算的确切结果*仍将*取决于浏览器/架构。 **这包括简单的操作，如乘法和除法！！**

[原因是 IEEE-754 允许系统以比结果更高的精度](http://en.wikipedia.org/wiki/Extended_precision#IEEE_754_extended_precision_formats)进行 64 位浮点计算，导致舍入结果与使用与结果相同精度的系统不同。这正是[x86（英特尔）架构所做](http://en.wikipedia.org/wiki/Extended_precision#x86_Extended_Precision_Format)的，这就是为什么在 C（和 javascript）中我们有时[`cos(x) != cos(y)`甚至`x == y`](http://www.parashift.com/c%2B%2B-faq-lite/newbie.html#faq-29.18)可以在同一台机器上拥有！

这[对于联网的点对点游戏来说是一个大问题](https://stackoverflow.com/questions/6683059/are-floating-point-numbers-consistent-in-c-can-they-be)，因为这意味着，如果不能禁用更高精度的计算*（如 C# 的情况）*，这些游戏几乎*不能使用浮点计算一点也不。* 但是，这对于 Javascript 游戏通常不是问题，因为它们通常是客户端-服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T13:48:34.563

如果我们假设每个浏览器供应商都遵循*IEEE*标准 + ECMA 规范，并且在实施时没有人为错误，那么不会有任何区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:52:15.657

尽管 ECMAScript 语言规范 5.1 版声明数字是对应于 IEEE 754 浮点数的原始值，这意味着计算*应该是*一致的：

[http://www.ecma-international.org/publications/files/ecma-st/ECMA-262.pdf](http://www.ecma-international.org/publications/files/ecma-st/ECMA-262.pdf)

> 4.3.19 数值
> 
> 对应于双精度 64 位二进制格式 IEEE 754 值的原始值
> 
> 注意 Number 值是 Number 类型的成员，是数字的直接表示。

正如[BlueRaja](https://stackoverflow.com/a/10338202/1151724)指出的那样，第 15.8.2 节中有一种警告：

> 函数 acos、asin、atan、atan2、cos、exp、log、pow、sin、sqrt 和 tan 的行为在这里没有精确说明......

这意味着，至少在某些情况下，*数字操作*的结果取决于实现，因此可能不一致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T22:33:17.913

我的两分钱 - @goldilocks 笔记和其他人暗示你不应该在浮点数上使用 == 或 != 。那么“确定性”是什么意思？不同机器上的行为总是相同的吗？显然，这取决于您所说的“相同行为”是什么意思。

好吧，在一个愚蠢的“相同”字面上，当然不是，物理位在例如 32 位和 64 位机器上会有所不同。所以这个解释出来了。

好的，那么任何程序都会在两台不同的机器上以相同的输出运行吗？在一般语言中没有，因为 C 程序可以用未定义的内存做一些事情，比如从未初始化的位读取。

好的，那么任何*有效*的程序都会在不同的机器上做同样的事情吗？好吧，我想说在浮点数上使用 == 和 != 的程序与读取未初始化内存的程序一样无效。我个人不知道 Javascript 标准是否将 == 和 != 在浮点数上的行为确定为即使不古怪也可以定义明确的程度，因此，如果这是您的确切问题，则必须查看其他答案. 你能写出与标准相关的未定义输出的 javascript 代码吗？永远不要阅读标准（其他答案在某种程度上涵盖了这一点），但出于我的兴趣，这是没有实际意义的，因为会产生你所谓的不确定行为的程序一开始是无效的。

# c - C中字符串和整数之间的处理时间

> ID：10334787
> 
> 赞同：0
> 
> 时间：2012-04-26T13:46:04.247
> 
> 标签：c, performance, file

我们知道整数存储长度是 4 个字节，字符存储是 1 个字节。我的问题来了，我有一个巨大的数据，我需要将它们写入一个文件。

例如。我的数据就像

```
 Integers - 123456789 (of length 9) (Total 9! factorial records)
    Character - abcdefghi (of length 9) (Total 9! factorial records) 
```

哪一个会花费更少的处理时间？有什么想法吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:52:50.727

与文件的访问时间相比，它微不足道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:51:00.273

看起来处理时间是一样的，因为你有相同的字节！文件存储在硬盘驱动器中，而不是存储在 RAM 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:53:24.237

如果您的整数存储在单独的 32 位整数中并将它们保存为二进制，则每个整数有 4 个字节，并且没有转换开销。如果您的字符串存储在 9 个字符的数组中并按原样保存，则每个字符串有 9 个字节，并且没有转换开销。在这种情况下，字符串将比整数花费更多的 I/O 时间。

如果将整数转换为可读的 9 字符字符串并以与其他字符串相同的方式保存它们，则 I/O 时间将相同，但将整数转换为文本所需的处理时间会额外增加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:56:28.553

使用整数将为您节省一些空间，也可能会节省一些时间，但它会太小以至于您不会注意到。因为整数需要 4 个字节，9 个字符需要 9 个字节。因此，对于每个值，您将使用 5 个额外字节。因为你的数据集的长度是**9！= 362880**，因此您将浪费**362880*5**字节，即 1.73 MB。这是非常小的块，将其写入磁盘不会引起注意。因此，请根据更适合您的内容来选择整数或字符，而不是根据哪个更快，因为您不会注意到这种大小的数据集的差异。

# android - 包括稍作改动的布局

> ID：10334790
> 
> 赞同：0
> 
> 时间：2012-04-26T13:46:14.870
> 
> 标签：android, android-layout, android-xml

我想在整个应用程序中重用标题栏布局，但我想更改每个`Activity`.

包含的布局仅向我显示布局相关参数的自动完成选项。

是否可以在 XML 中执行此操作，或者我是否需要在每个代码中执行此操作`Activity`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:51:36.817

这样您就可以为每个活动的标题栏动态设置标题。

编辑：用于自定义标题栏。

```
public class TitleBar extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);

       final boolean iscustomTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

       setContentView(R.layout.main);

       if ( iscustomTitleSupported ) {
           getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.titlebar);//the xml for custom titlebar is called here
           }

       final TextView TitleText = (TextView) findViewById(R.id.myTitle);
       if ( TitleText != null ) {
           TitleText.setText("NEW TITLE");

           // user can also set color using "Color" and then "Color value constant"
          // TitleText.setBackgroundColor(Color.GREEN);
       }
   }
} 
```

# android - 滚动时出现空白 GridView

> ID：10334800
> 
> 赞同：1
> 
> 时间：2012-04-26T13:46:37.693
> 
> 标签：android

我遇到了这种非常奇怪的行为：

我有一个`GridView`，每个项目都有一个`RatingBar`和`ImageView`。它显示得很好。即使我向下滚动，它也会按预期显示。但是，如果我快速连续上下滚动（..），一切都会变白，我什么也看不到（`GridView`消失）。

*有什么*线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:55:22.033

尝试`cacheColorHint = #00000000`在 XML 或代码中设置。

# excel - Excel VBA数组长度超过一行并抛出错误

> ID：10334801
> 
> 赞同：1
> 
> 时间：2012-04-26T13:46:39.307
> 
> 标签：excel

我在 excel VBA 中声明了以下变量

```
>  Dim arrayCollabName as variant 
>  arrayCollabName = Array("Name1","Name2", ....."Name62") 
```

但数组内的名称在 VBA 表中超过 1 行并抛出错误

关于如何做到这一点没有错误的任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:50:47.037

```
arrayCollabName = Array("Name1","Name2",..., _
"Name N","Name n+1",...,_
...) 
```

下划线是分隔线的技巧。

# css - sass --watch 在初始启动后不更新（sass 3.1.16）

> ID：10334803
> 
> 赞同：10
> 
> 时间：2012-04-26T13:46:42.010
> 
> 标签：css, ruby, sass

我正在与 sass 一起为我正在开发的一个简单的静态网站编写 css。我已经运行`sass --watch custom.scss:custom.css`它在启动时编译得很好，并带有以下消息：

> Sass 正在观察变化。按 Ctrl-C 停止。
> 
> 覆盖custom.css

但是，每当我更新`.scss`文件时，什么都没有发生。我以前没有在 Rails 应用程序的上下文之外使用过 SASS，所以我想知道我是否遗漏了什么？

我的 scss 文件也非常简单，所以我怀疑它是否会阻塞任何东西，尤其是因为它在第一次运行时就可以工作。

`sass -v`报告`Sass 3.1.16 (Brainy Betty)`，关于 Lion 10.7.2

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T23:39:31.933

这已在[最新的提交](https://github.com/nex3/sass/commit/0a2eafd83ad162a7c878da8fbde4f28f3a00168e)中得到修复。

更新的稳定版 gem (3.1.17) 尚未发布，但您等待时有几个选择：

1.  坚持使用 3.1.16 并在加载手表时使用绝对路径，例如：

    ```
    sass --watch /User/name/project/scss:/User/name/project/css 
    ```

    该错误应该只发生在相对路径中，因此可以解决它。

2.  使用更新的 (alpha) 版本

    ```
    gem install sass --pre 
    ```

3.  按照@Marco Lazzeri 的建议暂时回滚到 3.1.15

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:55:25.017

这里同样的问题。

我不知道到底是什么问题，但回滚到以前的版本是一种临时解决方法：

```
gem uninstall sass -v=3.1.16
gem install sass -v=3.1.15 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T07:48:49.177

正如**pjumble**所提到的，这是一个已知的过程中的错误。在新版本发布之前，您可以使用绝对路径来解决此问题。

这是我通常会避免输入完整路径的方法：

```
cd work-directory
sass --watch `pwd`/sass:`pwd`/css 
```

希望这对你有用:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-05T10:22:24.940

我也有同样的问题。只需更新我的宝石，它就起作用了。

```
gem update sass 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-04T11:19:48.990

此时我的最新 SASS 版本也遇到了这个问题。在 2 台不同的 Windows 8 计算机上，降级到 3.2.9 版对我有用。

```
gem uninstall sass
gem install sass -v 3.2.9 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-03T18:22:59.667

我有一个类似的问题：“检测到更改”，但是尽管它在几天前编译并覆盖了 .css 文件，但没有写入。

**笔记：**

*   在 Ruby 中重新安装 sass 不起作用。

*   我将 sass --watch 指向了其他一些项目，它们奏效了。

*   造成这个问题的原因似乎是我在观看一个项目时复制了它，然后开始观看第二个项目。

*   我不能肯定地说，但这似乎“绊倒”了 Ruby，可能是缓存或有关文件位置的一些存储信息。

**解决方案：**

我刚刚创建了一个新命名的项目文件夹，将第二个项目中的所有 scss 文件拖入其中，将主 scss 文件重命名（例如“uikit-main.scss”为“uikit.scss”），--watch 它，它再次开始正确覆盖。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-12T10:30:22.477

我还坚持使用 sass (v3.4.23) 在第一次运行后不重新编译，但它是用 scss 的文件夹结构实现的 - ***Sass****无法观察通过指向观看文件的路径定位的文件的变化。* [链接了解详情](https://stackoverflow.com/a/43935240/5016432)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-10T23:50:03.710

就我而言，问题是因为我在带有 ubuntu 的流浪机器中使用 sass。我直接从我的主机操作系统 (Mac) 安装和运行 sass，并且手表模式开始工作。

# c# - MailAddress：在邮件标头中发现无效字符

> ID：10334804
> 
> 赞同：6
> 
> 时间：2012-04-26T13:46:45.287
> 
> 标签：c#, .net, email, exception-handling, mailaddress

我正在使用 MailAddress 创建传真电子邮件。我们正在使用名为 SatisFAXtion v 8.6 的系统。要为传真提供封面，我可以将模板位置添加到 mail.TO 地址。

格式如下所示：

```
12125551234^template=cp\\FAXReportCover.rtf@fax.ourcompanymail.com 
```

编译时它工作正常，但我需要两个反斜杠，所以我添加了两个作为转义字符。

当我运行程序时，我得到一个异常：

```
Message: An invalid character was found in the mail header:
StackTrace: at System.Net.Mail.MailAddressParser.ParseLocalPart(String data, Int32& index, Boolean expectAngleBracket, Boolean expectMultipleAddresses)
   at System.Net.Mail.MailAddressParser.ParseAddress(String data, Boolean expectMultipleAddresses, Int32& index)
   at System.Net.Mail.MailAddressParser.ParseMultipleAddresses(String data)
   at System.Net.Mail.MailAddressCollection.ParseValue(String addresses)
   at System.Net.Mail.MailAddressCollection.Add(String addresses)
   at System.Net.Mail.Message..ctor(String from, String to)
   at System.Net.Mail.MailMessage..ctor(String from, String to) 
```

有没有办法在 MailAddress 对象的电子邮件地址中插入反斜杠？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:54:58.310

来自[维基百科](http://en.wikipedia.org/wiki/Email_address#Local_part)：

> 特殊字符的限制是它们只能*在包含在引号之间时*使用，并且其中的 3 个（空格、反斜杠 \ 和引号 " (ASCII: 32, 92, 34)）也必须以反斜杠开头\（例如“\ \\”“）。

因此，我认为您的电子邮件地址无效，因为引号之间不包含反斜杠。

如果您可以将地址更改为`12125551234^template="cp\\"FAXReportCover.rtf@fax.ourcompanymail.com`我认为可以的地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T13:55:51.367

几年前，我找到了解决类似问题的方法。问题出在 MailAddress 的构造函数中的 DisplayName 参数中。

也许它也会帮助你：

[http://netpl.blogspot.com/2008/09/smtpclient-exception-invalid-character.html](http://netpl.blogspot.com/2008/09/smtpclient-exception-invalid-character.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T13:51:46.827

如果将其修改为“网络”，我会收到此错误 --- 然后错误得到解决。（我的理解是 - 如果指定pickingdirectory 选项，标头-encoding utf-8 (base64) 给出错误）

希望能帮助到你

# sql - 根据 SQL 查询的集合生成成员的“散点图”结果

> ID：10334806
> 
> 赞同：2
> 
> 时间：2012-04-26T13:46:57.483
> 
> 标签：sql

我有一个`staff`包含工作人员的数据库表，其中包含`user_no`和`user_name`列。我有另一个`department`表，其中包含员工可以成为成员的部门，`dept_no`并`dept_name`作为列。

因为员工可以是多个部门的成员，所以我有第三个`staff_dept`表，其中有一`user_no`列和一`dept_no`列，它们是其他两个表的主键。此表显示每个员工所属的部门，并包含每个用户/部门交叉点的一行。

我想有一个电子表格形式的输出（CSV文件，无论如何；我会很好地将结果整理成可用的形式），每个部门一列，每个部门一行用户，`X`在每个交叉点出现 ，如 中所定义`staff_dept`。

我可以编写一个 SQL 查询来实现这个结果吗？还是我必须做一些“真正的”编程（因为它不是一个“真正的”程序，除非你嵌套了三个或四个`for`循环，显然）来收集和格式化这些数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T13:59:19.280

这可以通过 PIVOT 表（使用 SQL Server）来完成：

```
SELECT user_name, [dept1name], [dept2name], [dept3name], ...
FROM
    (SELECT s.user_name, d.dept_name,
     case when sd.user_no is not null then 'X' else '' end as matches
     from staff s
     cross join department d
     left join staff_dept sd on s.user_no = sd.user_no and d.dept_no = sd.dept_no
    ) AS s
PIVOT
(
    min(matches)
    FOR dept_name IN ([dept1name], [dept2name], [dept3name], ...)
) AS pvt
order by user_name 
```

演示：[http ://www.sqlfiddle.com/#!3/c136d/5](http://www.sqlfiddle.com/#!3/c136d/5)

**编辑**：要从表中的部门列表动态生成 PIVOT 查询，您将使用动态 SQL，即将代码生成到变量中并使用`sp_executesql`辅助存储过程。这是一个例子：[http ://www.sqlfiddle.com/#!3/c136d/14](http://www.sqlfiddle.com/#!3/c136d/14)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:01:08.867

在 SQL Server 中（如果您使用的是 SQL Server），我将从完全外部联接开始（包括*所有*员工和部门，而不仅仅是关系中涉及的人员），将其放入数据透视语句中，以将所有部门转换为列，然后构建一个简短的脚本来生成并动态执行该 SELECT 语句（因为枢轴语句创建的列必须是硬编码的，它们不能在运行时动态生成）。

[这是一个示例](https://stackoverflow.com/questions/7555968/dynamic-sql-server-2005-pivot/7556220#7556220)——这是一个不重要的陈述，但概念几乎相同。

# c# - 通用处理程序未触发

> ID：10334812
> 
> 赞同：0
> 
> 时间：2012-04-26T13:47:23.867
> 
> 标签：c#, asp.net, handler

我有一个通用处理程序，所以我可以使用 jquery.ui 自动完成，但处理程序没有触发。

这是我的代码：ASPX

```
<%--------- -------- Autocomplete ----------- --%>
<link type="text/css" href="../css/ui-lightness/jquery.ui.all.css" rel="stylesheet" />
<script type="text/javascript" src="../js/jquery.ui.widget.js"></script>
<script type="text/javascript" src="../js/jquery.ui.position.js"></script>
<script type="text/javascript" src="../js/jquery.ui.autocomplete.js"></script>
<link href="../css/demos.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">

    function jqueryUI_autocomplete_update_backgroundColor(textbox) {
        var loginId = $(textbox).next().val();

        if (!textbox.disabled && loginId == "")
            textbox.style.backgroundColor = "#ff9999";
        else
            textbox.style.backgroundColor = "";
    }

    $(function () {
        $("#user").autocomplete({
            source: "Handler1.ashx",
            minLength: 1,
            select: function (event, ui) {
                $(this).next().val(ui.item.id);
                $("input[id=UserId]")[0].value = ui.item.id;
                $("input[id=DisplayName]")[0].value = ui.item.value;
                jqueryUI_autocomplete_update_backgroundColor(this);
            },

            search: function (event, ui) {
                $(this).next().val('');
                $("input[id=UserId]")[0].value = '';
                $("input[id=DisplayName]")[0].value = '';
                jqueryUI_autocomplete_update_backgroundColor(this);
            }
        })

            $("#user").data("autocomplete")._renderItem = function (ul, item) 
            {
                item.label = item.label.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + $.ui.autocomplete.escapeRegex(this.term) + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>");
                return $("<li></li>")
                .data("item.autocomplete", item)
                .append("<a>" + item.label + "</a>")
                .appendTo(ul);
            };

    });
</script> 
```

Handler1.ashx

```
/// <summary>
/// Summary description for Handler1
/// </summary>
/// 
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]

public class Handler1 : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        IList<Project_Data.User> usersList = Project_BLL.Users.ListUsers();
        var data = new List<Project_BLL.Users>();

        foreach (Project_Data.User user in usersList)
        {
            data = new List<Project_BLL.Users>{
                new Project_BLL.Users {UserId = user.Id.ToString(), DisplayName = user.Name}
            };
        }

        int limit = 10;
        if (HttpContext.Current.Request.QueryString["limit"] != null)
            limit = Convert.ToInt32(HttpContext.Current.Request.QueryString["limit"]);

        string q = "";
        if (HttpContext.Current.Request.QueryString["term"] != null)
            q = HttpContext.Current.Request.QueryString["term"];

        List<Project_BLL.Users> result = null;
        var sb = new StringBuilder();
        if (q.Trim() != "")
        {
            var query = data.Where(p => p.DisplayName.ToLower().Contains(q.ToLower()))
                .OrderBy(p => p.DisplayName);
            result = query.Take(limit).ToList();

            foreach (var item in result)
                sb.AppendFormat("{0}{1}|{2}", (sb.Length > 0 ? "\n" : ""), item.DisplayName, item.UserId);
        }

        context.Response.ContentType = "text/plan";
        context.Response.Write(JsonConvert.SerializeObject(result.Select(u => new { id = u.UserId, value = u.DisplayName }).ToList()));

    } 
```

网络配置

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/>

    <authentication mode="Forms">
      <forms name="TestAuthCookie" loginUrl="login.aspx" timeout="1500">
      </forms>
    </authentication>

    <authorization>
      <deny users="?"/>
    </authorization>
  </system.web>

  <location path="images">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>

  <location path="App_Themes">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>

  <location path="js">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>

  <location path="css">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:44:14.570

这个 web.config 中的 httpHandlers 部分在哪里？如果您希望您的处理程序工作，您必须在 web.config 中定义它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:34:35.420

尝试更改 Source ：

```
 $(function () {
        $("#user").autocomplete({
            source: function(request, response) {
                $.ajax({
                    url: "handler1.ashx",
                    data: {
                        foo: request.term
                    },
                });
            },

            minLength: 1,
            select: function (event, ui) {
                $(this).next().val(ui.item.id);
                $("input[id=UserId]")[0].value = ui.item.id;
                $("input[id=DisplayName]")[0].value = ui.item.value;
                jqueryUI_autocomplete_update_backgroundColor(this);
            }, 
```

[在这里](http://jqueryui.com/demos/autocomplete/remote-jsonp.html)您可以找到一个工作示例（查看源代码）

来自 JQuery 网站：

只需指定源选项，即可自定义自动完成以使用各种数据源。数据源可以是：

*   包含本地数据的数组
*   一个字符串，指定一个 URL
*   **回调**_

 **您必须指定一个回调，使 Post / Get 到您的 ashx。

[这里](http://api.jquery.com/jQuery.ajax/)是 $.ajax 的完整参考

回调**

# windows-phone-7 - 为什么 WP7 网页浏览器不能显示视频？

> ID：10334819
> 
> 赞同：0
> 
> 时间：2012-04-26T13:48:04.020
> 
> 标签：windows-phone-7

我有一个应用程序，我希望 webview ( WebBrowser ) 打开一个站点，我认为这是 webbrowser 的功能之一，如果不是专有功能的话。但它不显示视频，并且其他一些媒体也被打乱了。有什么想法吗？PS 我不是在谈论 webbrowser 应用程序，我是在谈论 webview，在无法正常工作的应用程序中实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:13:00.093

通常，媒体由适当的媒体处理程序拾取。如果视频没有在`WebBrowser`控件中播放，很可能意味着它的格式根本不受支持。

# git - Git - 忘记切换分支

> ID：10334820
> 
> 赞同：7
> 
> 时间：2012-04-26T13:48:06.593
> 
> 标签：git, windows-7, tortoisegit

在开始我的项目之前我忘记切换到一个新分支，现在我需要将我的更改推送到一个新分支（不是主分支），以便另一个人审查我的工作。我的工作已经完成，但保存在我当地的主人那里。

我怎样才能将我的更改移动到一个新的分支中，所以当我推送它时不会与主分支混淆，而是创建一个新的远程分支？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T13:59:31.393

首先，既然您已经完成了本地 master 分支的所有工作，请创建一个指向 tip 或本地 master 的新功能分支。

```
$ git checkout -b newfeature master 
```

然后将主服务器留在服务器中（远程）

```
$ git checkout master
$ git reset --hard origin/master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:50:31.267

在与 master 相同的位置创建一个新分支。

签出 master，并将您当前的分支硬重置为您想要回退到的提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:36:59.260

我不确定发生了什么，但是当我遵循 KurzedMetal 的 git 命令时，它并没有给我想要的结果。

*因此，尽管在将硬重置回远程主机*以及导出更改的文件之前进行了备份，但除了重新进行更改外，我没有其他选择。导出和备份都毫无价值，因为它们包含与我的本地存储库完全相同的内容，因此我的更改**丢失了**。我原以为**两者都**不会改变。

幸运的是，在我开始处理推送问题之前，我已经隐藏了我的更改。
***注意***：硬重置后新创建的文件不会被删除。

以下是我的修复步骤：

1.  完成您的更改（仍在*master*中）
2.  从*远程主机*中提取新更改并修复任何冲突
3.  `TortoiseGit -> Stash save`. 输入一条消息以将其与其他存储区分开 -> 好的
4.  `TortoiseGit -> Show log`. 选择最新的master，然后右键单击并选择`Reset`，然后`Hard option`->确定
5.  `TortoiseGit -> Create Branch`. 输入名称并选中复选框`Switch to new branch`-> 确定
6.  `TortoiseGit -> Stash list`. 选择您保存的存储 -> 确定
7.  现在您会看到不同文件的列表。对于每个文件，比较差异并将更改再次应用于新重置的文件
8.  完成后，右键单击本地文件夹。你应该看到`Git Commit -> "BranchName" ...`上面`TortoiseGit`，选择第一个
9.  确认要提交的文件，然后输入合适的描述 -> 确定
10.  现在你准备好了`push`。`TortoiseGit -> Push`，检查本地分支是否是您选择的名称。如果不是，那么您忘记在 5 中切换分支，并且必须从 6 继续。

我希望这对其他人有帮助。要记住的事情：当你开始一个新功能/非小改动时切换到一个新分支

# e-commerce - os-commerce 如何添加交易/手续费？

> ID：10334827
> 
> 赞同：0
> 
> 时间：2012-04-26T13:48:37.717
> 
> 标签：e-commerce, oscommerce

我有一个拥有活跃 oscommerce 网站的客户。他们要求我们为每个订单添加 2.00 美元的交易或手续费，没有任何限制。我以前从未使用过 oscommerce，只有 Magento。

如何使用插件或手动编码来完成此操作？客户使用 Paypal 网站付款标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:07:12.470

我实际上可以通过调整[这个模块](http://addons.oscommerce.com/info/7003)来完成这项工作。然后简单地覆盖`includes/modules/order_total/ot_handling.php`文件以始终收取 2.00 美元的费用。

# gwt - 移除 Click Handler-GWT

> ID：10334828
> 
> 赞同：8
> 
> 时间：2012-04-26T13:48:43.863
> 
> 标签：gwt, gwt2

如何删除 GWT 中的 ClickHandler 事件？我为按钮添加了 addClickHandler() 事件，我想删除 ClickHandler 事件。我尝试了 HandlerRegistration 方法但它未能删除处理程序，这是一个片段：

```
notification.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) {
            // TODO Auto-generated method stub
        }

    }); 
```

我想通过通知删除处理程序！

```
Note:
Notification is the button instance that calls the handler! 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-26T16:20:44.703

每个`add...Handler`方法都返回`HandlerRegistration`接口。该接口包含`removeHandler()`方法。如果要删除处理程序，只需将返回的接口存储在变量中，并在要删除处理程序时调用 removeHandler。

```
HandlerRegistration handler;

handler = button.addClickHandler(new ClickHandler() {
            @Override
            public void onClick(ClickEvent event) {
                // ...

            }
        });
handler.removeHandler(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T09:06:55.983

这对我有用，我在绑定事件时获得了处理程序注册，

```
closeIconHandlerRegistration = closeImg.addClickHandler( new ClickHandler()
        {
            @Override
            public void onClick( ClickEvent event )
            {
                addCloseClickHanlder();
            }
        } ); 
```

之后当我需要删除处理程序时......

```
if ( this.getCloseButtonHandlerRegistration() != null )
        {
            this.getCloseButtonHandlerRegistration().removeHandler();
            this.getCloseImg().addClickHandler( new ClickHandler()
            {

                @Override
                public void onClick( ClickEvent event )
                {
                    SaveCancelCommissionChangeEvent saveEvt = new SaveCancelCommissionChangeEvent();
                    saveEvt.setSave( false );
                    tabEventBus.fireEvent( saveEvt );
                }
            } );
        } 
```

# php - 从 MySQL 中删除时出现 SQL 错误

> ID：10334832
> 
> 赞同：0
> 
> 时间：2012-04-26T13:48:54.643
> 
> 标签：php, sql, syntax, pdo

从我的 SQL 数据中删除数据时遇到问题。我尝试了各种版本的声明，但无济于事。以下是我遇到的错误和我正在使用的语句。

```
$sql = "DELETE FROM `saved_holidays` WHERE (subscriberID= $user AND title= $check_value)";

//connect to database then execute the SQL statement.
$db->exec($sql); 
```

错误信息是：

> ```
> SQLSTATE[42000]: Syntax error or access violation: 1064 You have an
> error in your SQL syntax; check the manual that corresponds to your
> MySQL server version for the right syntax to use near '@xml119.com AND
> title= Luxurious Jamaican holidays | 40% Discount On Accommodati' at
> line 1 
> ```

我可以看到正在传递正确的数据，但语法错误。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:56:31.393

`$check_value`是一个字符串，因此您必须将其包含在`'`查询中，如下所示：

```
title = '$check_value' 
```

出于安全目的，您还应该使用`mysql_real_escape_string`您拥有的所有字符串参数。或者更好的是，使用准备好的语句： http: [//php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:59:51.660

您需要在变量周围加上引号。它不喜欢空格。

根据您使用的服务器（MySQL 或 MSSQL），您必须使用反引号、单引号或双引号：

`DELETE FROM saved_holidays WHERE (subscriberID="$user" AND title="$check_value")`

此外，如果您使用 PDO，则应考虑使用准备好的语句：

```
$statment = $conn->prepare("DELETE FORM saved_holidays WHERE (subscriberID=? AND title=?)"); //$conn has to be your connection ceated by doing new PDO(...connection string...)
$statment->execute(array($user, $check_value)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:58:03.017

阿米特是正确的，你的陈述应该是这样的；

```
$sql = "DELETE FROM `saved_holidays` WHERE (subscriberID= '$user' AND title= '$check_value')"; 
```

变量是一个字符串，所以必须用单引号括起来。这应该对你有用。

# php - 使用 PHP 发送 html 邮件

> ID：10334834
> 
> 赞同：4
> 
> 时间：2012-04-26T13:49:03.537
> 
> 标签：php, email

所以我正在使用 xmail php 类来发送我的邮件。

现在我的网站上有很多用户，一些用户的邮件没有为他们的电子邮件启用 html。如果他们将其视为文本/纯文本，有什么方法可以在电子邮件顶部写一条消息，甚至显示另一个电子邮件内容？

如果没有，我有什么选择，我该怎么办？我知道一个选项，那就是发送文本/普通邮件，但这些甚至不允许 html 锚链接，我需要它来发送激活邮件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:51:56.187

您可以发送多部分电子邮件。一部分是 HTML，然后是非 HTML 电子邮件客户端的纯文本后备。[PHPMailer](http://phpmailer.worxware.com/)使这很容易做到。

# javascript - 是否可以允许我的页面被框起来，但只能由指定的来源？

> ID：10334835
> 
> 赞同：1
> 
> 时间：2012-04-26T13:49:11.630
> 
> 标签：javascript, security, iframe, browser, frame

我对这个问题很感兴趣[IFrame 究竟可以对 top.Location 对象（跨域）做什么？](https://stackoverflow.com/questions/1113902/what-exactly-can-an-iframe-do-with-the-top-location-object-cross-domain).

最近想想办法防御[Clickjacking](https://www.owasp.org/index.php/Clickjacking)，找到了这个[解决方案](https://www.codemagi.com/blog/post/194)。

但是，此解决方案将禁止任何页面对我的页面进行 iframe，而我想要的是允许**白名单**中的某些站点可以对我的页面进行 iframe。

我知道[X-Frame-Options](http://blog.mozilla.org/security/2010/09/08/x-frame-options/)的**Allow-From**可以达到我的目的，但是 IE 6 和 IE 7 不支持这个功能。

是否可以允许我的页面被框起来，但只能由指定的来源？

**更新** @Padrig 感谢您回答我的问题。我现在无法评论你的答案，所以我必须编辑我的问题。

我已经尝试了您的解决方案，但它无法正常工作。

[http://www.b.com/poc/beframed.html](http://www.b.com/poc/beframed.html)

```
<script>
    if (self === top) || (top.location.hostname == 'www.a.com')) {
        alert(1);
    } 
</script> 
```

[http://www.a.com/poc/framer.html](http://www.a.com/poc/framer.html)

```
<iframe src="http://www.b.com/poc/beframed.html"></iframe> 
```

我的主机文件：

> ```
> 127.0.0.1 www.a.com
> 127.0.0.1 www.b.com 
> ```

我的 Chrome 浏览器中没有警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:55:25.793

出于安全原因，Javascript 不允许一个框架访问不同域中另一个框架的属性。

是的，这是可能的，但是使用 document.referrer。

# android - Android中的可编辑画布

> ID：10334837
> 
> 赞同：-3
> 
> 时间：2012-04-26T13:49:15.987
> 
> 标签：android, android-canvas

我想制作一个屏幕，我可以在其中放置图像，键入文本并通过单击它们来移动图像和文本！我可以使用什么样的控件来实现此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:46:54.333

也许你应该更深入一点并使用 andEngine 来处理这些东西？

-> [http://www.andengine.org/](http://www.andengine.org/)

# javascript - 等到 HTML 元素得到一个类然后做一些事情

> ID：10334838
> 
> 赞同：9
> 
> 时间：2012-04-26T13:49:16.533
> 
> 标签：javascript, jquery, html

我正在等待 document.ready 事件以便在我的页面上执行某些操作。

唉，其他一些我无法更改的脚本在调用我的脚本后还没有发挥它的魔力。因此，类名上的 jquery 选择失败，因为 DOM 中尚不存在该类。

这就是为什么我想告诉我的函数监听直到一个元素获得某个类，然后用它做一些事情。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T13:52:23.400

像这样的东西（伪代码）：

```
var timer = setInterval(function() {
   if (element.className=='someclass') {
       //run some other function 
       goDoMyStuff();
       clearInterval(timer);
   }
}, 200); 
```

或监听要插入的元素：

```
function flagInsertedElement(event) {
   var el=event.target;
}
document.addEventListener('DOMNodeInserted', flagInsertedElement, false); 
```

jQuery版本：

```
$(document).on('DOMNodeInserted', function(e) {
    if (e.target.className=='someclass') { 
        goDoMyStuff();
    }
}); 
```

还有[liveQuery](http://brandonaaron.net/code/livequery/docs)插件：

```
$("#future_element").livequery(function(){
    //element created
}); 
```

或者，如果这是一个常规事件处理程序，则使用 jQuery 的 on() 委托事件；

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T13:55:09.713

添加课程后，您可以触发一些事件。

例子：

```
$('#ele').addClass('theClass');
$(document).trigger('classGiven')

$(document).bind('classGiven',function(){
    //do what you need
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:57:36.010

如果我把你的问题弄错了，我很抱歉，但为什么不在 document.ready 上做一些简单的事情呢？：

```
$("#myelement").addClass('myclass');

if($("#myelement").hasClass('myclass')) {
    alert('do stuff here');
} 
```

# java - 由于单引号转义，Oracle PreparedStatement 抛出 Value Too Large

> ID：10334839
> 
> 赞同：2
> 
> 时间：2012-04-26T13:49:29.480
> 
> 标签：java, oracle, prepared-statement, quotes

我似乎对 Java 批量插入有问题。它所做的是将带有单引号的值插入到 Oracle 表中。

```
java.sql.BatchUpdateException: ORA-12899: value too large for column "P40_001_CM"."PRODUCTDATA"."P_NAME" (actual: 76, maximum: 75) 
```

事实是我需要作为 P_NAME 插入的值是：

```
Best of Hollywood 2 Movie Collector's Pack: Todeszug nach Yuma / Recue Dawn 
```

如您所见（如果您愿意，也可以数数）；这正好是 75 个字符的长度，包括单引号。

我用来处理单引号的代码片段：

```
case Types.VARCHAR:
pstmt.setString(paramIndex, param.getValue().replace("'", "''"));
break; 
```

这种方法有效，它适用于我的大多数插入，但在这种特殊情况下，它将计算添加的单引号导致整个字符串的长度为 76。从而导致异常。

问题是当我在 Squirrel 中运行插入语句时，它只是插入而没有任何问题。它应该，实际值仍然是 75 长，只添加了一个引号来转义另一个。

不知何故，内部使用的 OraclePreparedStatement 对传递的字符串的长度进行了某种检查（显然不是一个很好的检查），并在它实际到达 Oracle 本身之前将其解除，或者看起来如此。

我怎样才能解决这个问题 ？我不能是唯一遇到这种行为的人吗？

啊，顺便说一句，在任何人建议之前，是的，我已经尝试过：

```
`insert into GERMANSTUFF values('Best of Hollywood 2 Movie Collector'||chr(39)||'s Pack: Todeszug nach Zuma / Recue Dawn');` 
```

和 `insert into GERMANSTUFF values(translate('Best of Hollywood 2 Movie Collector^s Pack: Todeszug nach Puma / Recue Dawn','^',chr(39)));`

尽管这在 Squirrel 中作为直接 SQL 语句起作用，但它只会使 OraclePreparedStatement 引发错误的字符串值变大。我猜这似乎是合乎逻辑的。

我知道我可以用`'`a替换`^`或只是扩大我的目标列，但我不认为这些“解决方案”是解决这个问题的正确方法。也许这是我还没见过的简单的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T13:51:30.220

AFAIK，我认为您不需要自己处理转义，特别是如果您使用`PreparedStatement`. 只需执行以下操作即可处理内部转义。

```
pstmt.setString(paramIndex, param.getValue()); 
```

# asp.net-mvc - ASP.NET MVC 可重用控件

> ID：10334845
> 
> 赞同：1
> 
> 时间：2012-04-26T13:49:46.500
> 
> 标签：asp.net-mvc, jquery

我对 ASP.NET MVC 3 中的可重用控件有疑问。

在我们的应用程序中，我们在不同的页面上有很多故事。这些表具有所有相同的逻辑，所以我们将一个表放在它自己的控制器和视图中。数据源和某些单独的属性作为参数提交给 tablecontroller。控制器将参数存储在 tempdata 中以保存它们以供 tableview 自行请求。

该表在排序或分页时引发 AJAX 请求，因此只有部分表被更新。请求直接发送到表控制器。tablecontroller 需要我们存储在 tempdata 中的参数。所以表可以调用自己，而不会丢失数据源和属性。

我的问题是是否有更好的解决方案？

当前的方法不是很好，因为 TempData 被数据占用到会话结束。页面和表格是链接的，用户可以在它们之间切换。因此很难确定何时不再需要某些参数。

在 MVC 中构建自己的参数化控件的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:09:25.653

正确的在 MVC 中使用[Declarative Helpers](http://weblogs.asp.net/jgalloway/archive/2011/03/23/comparing-mvc-3-helpers-using-extension-methods-and-declarative-razor-helper.aspx)构建您自己的参数化控件。但是，对于异步客户端-服务器交互，此解决方案可能不够灵活。对于这样的交互控件，最好的实现可能是[javascript模板引擎](https://github.com/BorisMoore/jsrender)。

# xml - 从 URL 解析 XML

> ID：10334847
> 
> 赞同：1
> 
> 时间：2012-04-26T13:49:59.700
> 
> 标签：xml, web-services, axapta, x++

我正在尝试使用谷歌地图来计算 2 点之间的距离。我有以下网址：

`http://maps.google.com/maps/api/directions/xml?language=fr&origin="+parm1+"&destination="+parm2+"&sensor=false`

我是使用 x++ 管理 xml 的新手，所以如何获取我的 url 返回的 xml 代码并解析它以提取我需要的数据（距离节点值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T06:32:07.603

首先，看到这个[答案](https://stackoverflow.com/a/8257066/4509)。

然后看看这里：

[http://www.axaptapedia.com/Webservice](http://www.axaptapedia.com/Webservice)

[http://www.axaptapedia.com/XML](http://www.axaptapedia.com/XML)

你如何做可能部分取决于你的 AX 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:33:46.127

我正在玩弄 Jan 发布的两个链接，得到了一些你应该可以使用的东西。我注意到“node.hasChildNodes()”有些奇怪，它会说有一个孩子，但没有，但它有可用的文本。看看你能不能用这个。

```
static void XML_WebService_CodeGoogle(Args _args)
{
    System.Net.WebClient webClient = new System.Net.WebClient();
    str google = "http://maps.google.com/maps/api/directions/xml?language=en&origin=85251&destination=46220&sensor=false";
    str retVal = webClient.DownloadString(google);
    XMLDocument doc=XMLDocument::newXml(retVal);

    XmlNamedNodemap     attributes;
    XmlElement          root = doc.root();
    XmlNode             node = root.firstChild();

    str numOfSpaces(int _depth)
    {
        str spc;
        int n;
        ;

        for (n=0; n<=_depth; n++)
            spc+='  ';

        return spc;
    }

    void dig(XmlNode _node, int _depth = 0)
    {
        XmlNode sib;
        ;

        if (_node == null)
            return;

        if (_node.hasChildNodes())
            info(strfmt("%1%2", numOfSpaces(_depth), _node.name()));

        if (_node.hasChildNodes())
            dig(_node.firstChild(), (_depth+1));
        else
            info(strfmt("%1[%2]", numOfSpaces(_depth), _node.innerText()));

        sib = _node.nextSibling();

        if (sib)
            dig(sib);
    }
    ;

    dig(node);
} 
```

# xpages - Dojo 1.7.2 作为 OSGI 包

> ID：10334849
> 
> 赞同：2
> 
> 时间：2012-04-26T13:50:02.727
> 
> 标签：xpages

对于我们想要使用 dojo 1.7.2 的项目。我下载了版本并将所有内容解压缩到一个目录中。我从我的 8.5.3 多米诺服务器的 js\dojo.1.5.1 目录中添加了 ibm 目录。并将所有文件打包为可执行jar文件。

在 Domino 8.5.3 中，dojo 1.6.1 作为 OSGi 包加载，位于 \osgi\shared\eclipse\plugins

有没有办法使用最新版本的 Dojo 作为 OSGi 捆绑包，与部署 dojo 1.6.1 的方式相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:04:38.217

您的插件是否定义了 Dojo 版本。我正在查看有关 Domino 8.5.3 插件如何在 XPages Portable Command Guide 的第 40 页上定义 Dojo 版本的解释，该部分标题为“安装多个 Dojo 版本并确定使用的版本”。

它使用插件“/resource/dojo.properties”中的内部文本文件和属性行：

DojoVersion.versionStr=1.6.1

如果您在插件中定义了更高的版本号，我相信应该默认使用它。或者，您应该能够定义不同的版本号并使用 xsp.properties 中的 xsp.client.dojo.script.version 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:00:23.523

你试过 xsp.client.script.dojo.version 吗？

# plsql - 创建并插入嵌套表

> ID：10334851
> 
> 赞同：1
> 
> 时间：2012-04-26T13:50:09.513
> 
> 标签：plsql, nested

请原谅我，我班上的其他人问过这个问题，但答案并不完全符合我的需要。这是课程作业，所以我不想用勺子喂答案，但朝正确的方向轻推会有所帮助。我也知道其他班的朋友正在使用这个论坛来协助他们的工作，所以这个答案真的很有用。

这是被问到的问题：

> (a) 一个名为 INIT_ACTOR_QUOTES 的 PL/SQL 过程，没有以下参数：
> 
> 一世。从 ACTOR 表中读取所有 ACTORID，并将它们插入到 ACTOR_QUOTES 表的每一行的 ACTORID 属性中（这些表具有相同的基数），同时将以下初始值插入到 QUOTES 嵌套表的第一行中ACTOR_QUOTES 表的每一行；
> 
> `(Movie_Title, Year, Role, Quote)`分别设置为`(' ',NULL ,' ', ' ')`
> 
> 同时，在每次 INSERT 之后立即使用 DELETE 从嵌套表中删除属于 ACTOR_QUOTES 表中每个 ACTORID 的每一行中的所有行。（注意：这可能看起来很奇怪，但这是必要的，因为嵌套表不能被填充（因为它是原子的 null），除非它被初始化，之后这个初始数据可能会被删除）。

这就是我想出的和得到的回应：

```
CREATE OR REPLACE PROCEDURE INIT_ACTOR_QUOTES
AS
CURSOR actorID_cursor IS
SELECT actorID FROM Actor;
BEGIN 

FOR row IN actorID_cursor LOOP
INSERT INTO actor VALUES (
'00001',

actor_quotes_NT (
quote ('', NULL, ' ', '')
);

DELETE (*) FROM Quotes_NT ('', NULL, ' ', ''); 
END LOOP; 
END INIT_ACTOR_QUOTES ; 
```

```
/

LINE/COL ERROR
-------- -----------------------------------------------------------------
8/1      PL/SQL: SQL Statement ignored
13/2     PL/SQL: ORA-00917: missing comma
16/1     PL/SQL: SQL Statement ignored
16/9     PL/SQL: ORA-00928: missing SELECT keyword
20/1     PLS-00103: Encountered the symbol "/" 
```

我有点明白我的讲师所要求的原则，但这让我头疼不已。请帮忙。

您需要更多信息吗？

# c++ - C++ 指针将值传递给函数并忽略 cin 操作

> ID：10334852
> 
> 赞同：-1
> 
> 时间：2012-04-26T13:50:13.030
> 
> 标签：c++, function, pointers, cin

我正在尝试使用指针并创建了这个示例，但我不明白为什么这不起作用。有人可以解释为什么当我在不引用的情况下传递值时该函数不执行 cin 操作吗？

```
#included proper headers and stuff
...
int main()
{
    int a, b;
    swap(a,b);

    cout << "A: " << a << endl;
    cout << "B: " << b << endl;
    return 0;
}

void swap(int * p1, int *p2)
{
    cin >> *p1;
    cin >> *p2;
    int temp = *p1;
    *p1 = *p2;
    *p2 = temp;
} 
```

结果 cin 被跳过 A: 0 B: 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:53:30.167

啊。您正在传递需要指针的整数。该`swap()`函数使用那些未初始化整数中的（随机垃圾）值作为机器地址，并将数据写入这些地址。当然，这不会改变您传递的整数中的值——它会改变内存中的其他一些随机位置。通常这种程序会因分段违规而崩溃；你只是幸运（或不幸）。

如果你将指针传递给整数，它会起作用——即`swap(&a, &b)`——但我认为你已经理解了这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:52:17.127

您应该传递变量的地址，而不是变量本身。

```
int a, b;
swap(&a,&b); 
```

注意与号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:55:12.443

实际上应该是`swap(&a,&b)`。始终有指针的引用，您的指针 p1 和 p2 实际上并不引用任何有效位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:28:57.900

您跳过的程序部分可能有这一行：

```
using namespace std; 
```

它也可能有这一行，这将是必需的：

```
extern void swap(int * p1, int *p2); 
```

该`using`声明将**所有**符号都`std`带入范围。具体来说，它引入了`std::swap`. `swap`您`main`调用中的行`std::swap(int&, int&)`而不是您想要的。

由于您错误地调用了自己的交换，这一错误更加严重。如果要调用您的交换，您必须 a) 在使用它之前声明它，并且 b) 正确调用它。

试试这个程序：

```
#include <iostream>
extern void swap(int*, int*);

int main()
{
    int a, b;
    swap(&a,&b);

    std::cout << "A: " << a << "\n";
    std::cout << "B: " << b << "\n";
    return 0;
}

void swap(int * p1, int *p2)
{
    std::cin >> *p1;
    std::cin >> *p2;
    int temp = *p1;
    *p1 = *p2;
    *p2 = temp;
} 
```

# php - 从变量名创建数组

> ID：10334857
> 
> 赞同：0
> 
> 时间：2012-04-26T13:50:36.210
> 
> 标签：php, arrays, model-view-controller, symfony

在为 Symfony 2 编写控制器时，我经常需要将很多变量传递给模板，例如`return array('param1' => $param1, 'anotherBigParam' => $anotherBigParam, 'yetAnotherParam' => $yetAnotherParam);`

由于有很多参数，这最终会变得又长又丑，所以我考虑为它创建一个辅助函数：

```
public function indexAction()
{
    $param1 = 'fee';
    $anotherBigParam = 'foe';
    $yetAnotherParam = 'fum';
    return $this->vars('param1', 'anotherBigParam', 'yetAnotherParam');
}

private function vars() {
    $arr = array();
    foreach(func_get_args() as $arg) {
        $arr[$arg] = $$arg;
    }
    return $arr;
} 
```

这样做有什么缺点或风险吗？PHP 或 Symfony 2 是否已经提供了更好或更简洁的方法来实现相同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:56:02.243

有一种原生方式：[紧凑](http://php.net/manual/en/function.compact.php)

```
$one = 'ONE';
$two = 'TWO';
$a = compact( 'one', 'two' );
print_r( $a );
/*
Array
(
    [one] => ONE
    [two] => TWO
)
*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:55:04.207

你正在寻找[`compact`](http://php.net/compact).

```
public function indexAction()
{
    $param1 = 'fee';
    $anotherBigParam = 'foe';
    $yetAnotherParam = 'fum';
    return compact('param1', 'anotherBigParam', 'yetAnotherParam');
} 
```

# git - Git log - 如何列出所有不以特定单词开头的提交

> ID：10334858
> 
> 赞同：4
> 
> 时间：2012-04-26T13:50:42.523
> 
> 标签：git, git-bash

我的主要目标是过滤掉所有拉取请求合并，因此理论上我希望以下工作（它没有）

```
git log --grep="^!(Merge)" 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T14:05:39.660

首先，您不能简单地通过在正则表达式中的单词前面加上一个 bang 来否定它（您在哪里找到的？）。您可能为此使用了[环视](http://www.regular-expressions.info/lookaround.html)，但常规 grep 正则表达式不支持它们。直接使用 grep 可以传递`-P`选项以使用更强大的 Perl 正则表达式，但我没有找到 git log 的类似选项。

不过，有一个`--no-merges`选项可以过滤掉日志中的所有合并提交：

```
git log --no-merges 
```

手册页说这`--no-merges`意味着：

> 不要打印多个父级的提交

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T22:55:12.320

这是不正确的，你蚂蚁使用像这样的正则表达式会更好：

`git log | grep -o '^(Merge)'`

这将提供更多信息：

`git log --pretty=format:'%h by %an, %ar, %s' | grep -o '^((?!Merge).)*$'`

我想你用过！要反转它，但我知道的唯一已知的反向 revex 搜索方式就像上面一样。仍然 --no-merge 会提供更好的信息，只是为了将来参考而写作

# php - 如何在php中限制和重定向某些页面

> ID：10334860
> 
> 赞同：2
> 
> 时间：2012-04-26T13:50:44.017
> 
> 标签：php, apache, .htaccess, redirect, restrict

我有一个包含 php 模板和函数的包含文件夹的网站。如果用户尝试访问该文件夹。它可能不会损害网站，但我不希望我的用户以联合国组织的方式看到这些模板。相反，如果用户尝试直接访问包含文件夹中的这些文件并将他重定向到主页，我想限制用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:52:12.140

将其放在该目录中的`.htaccess`文件中：

```
Deny from all 
```

这是假设您使用 Apache 或其他知道如何读取和处理 .htaccess 文件的 Web 服务器。

对于重定向，`Deny from all`您可以尝试以下方法：

```
RedirectMatch 301 ^/includes/$ http://www.yoursite.com/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:53:05.293

您可以配置服务器，使该文件夹对公众不可用。或者，构建站点，使该文件夹位于站点根目录下方 - 这使其对公众完全不可见。只需调整包含路径即可。我更喜欢这个解决方案，因为除非您登录并有权访问文件系统，否则这些文件完全不在雷达范围内。

# java - Eclipse 中的 Java 编译输出

> ID：10334861
> 
> 赞同：3
> 
> 时间：2012-04-26T13:50:45.010
> 
> 标签：java, eclipse

我想向某人发送一个文件，其中包含我在 Eclipse 中拥有的 Java 项目的编译警告和错误，但我不知道该怎么做。

我知道 Eclipse 使用它自己的 Java 编译器。例如，有没有办法将“问题”选项卡中的信息导出到文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:53:05.547

右键单击>全选>复制和粘贴。

当你粘贴时，你会得到一串这样的文本......

```
Description Resource    Path    Location    Type
The import android.app.Activity is never used   GetPhotos.java  /PhotoUp/src/com/photoup    line 10 Java Problem
The import android.os.Bundle is never used  GetPhotos.java  /PhotoUp/src/com/photoup    line 15 Java Problem 
```

# javascript - 只读文本字段可通过插入的 javascript 编辑？

> ID：10334869
> 
> 赞同：0
> 
> 时间：2012-04-26T13:51:18.470
> 
> 标签：javascript, html, forms, google-chrome, readonly

我有一个带有只读字段的表单，用于显示/提交到下一页。

但是，我注意到在 Chrome 中使用开发人员工具时，我能够向**元素添加 id，使用 javascript 控制台选择该元素，并更改其 value**。我提交了表单，你知道什么 - 下一页对其进行操作，就好像它是原始值一样。

现在，使用我正在构建的网站的人应该没有任何问题，但这对我来说似乎是一个巨大的安全漏洞。只读的目的不是保持不变吗？如果一个精明的用户改变它，那不是一个大问题吗？事实上，我什至不认为您可以在 chrome 中添加和更改属性。

请在下面发表您的想法，如果有解决方案，请告诉我（“禁用”文本字段，但设置禁用属性不会将数据发送到下一页）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:54:27.293

***永远不要**相信来自网络表单的输入。*

用户可以很容易地删除`readonly`属性并编辑值。该`readonly`属性只是在填写表单时*帮助*用户，因此当您的服务器实际上不允许更改时，他们不会编辑期望它更改的值。因此，请始终记住首先在您的服务器上对行为进行编码，并让 HTML 表单成为用户的有用指南，以使表单更易于填写（无需多次提交表单以获得相关的错误消息）。

为了克服这个问题，如果`readonly`您不想编辑某些内容，您可以将值存储在数据库中。此外，应*始终*检查（和清理）用户提供的值，因为再多的 JavaScript、HTML 或 CSS 都不会阻止知道自己在做什么的人添加新值或更改/删除现有值。

# directx - 在 directx 地形上移动凹面

> ID：10334870
> 
> 赞同：0
> 
> 时间：2012-04-26T13:51:23.607
> 
> 标签：directx, directx-11

我需要 Directx 的一些帮助。

我正在 Nvidia Directx SDK 的 TerraTessellation 示例之上构建我的项目。

基本上我所做的是更改我感兴趣的地形文件的 .dds 文件。

```
V_RETURN(loadTextureFromFile(L"TerrainTessellation/color.dds",     "g_TerrainColourTexture1", pd3dDevice, g_pTerrainEffect));
V_RETURN(loadTextureFromFile(L"TerrainTessellation/normal.dds", "g_TerrainColourTexture2", pd3dDevice, g_pTerrainEffect));
V_RETURN(loadTextureFromFile(L"TerrainTessellation/GabaritoPBT.dds",      "g_DetailNoiseTexture",     pd3dDevice, g_pTerrainEffect)); 
```

问题是：

当我在 X、Y 和 Z 位置上移动相机时，地图的凹面也会移动，因此关于纹理，它不在应有的正确位置。怎么了？什么可以帮助解决问题？谢谢！检查下面的图片。

![颠簸应该在红色区域](../Images/bd9bf3cacd7b73384c81c32b634a7639.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:40:03.523

好吧，高度图上的 0 值和 MIP 级别存在问题，它们使凹面根据距离移动。我去掉了 MIP 水平，它保持得很好。

# html - 选择里面没有img的a-element

> ID：10334873
> 
> 赞同：1
> 
> 时间：2012-04-26T13:51:31.880
> 
> 标签：html, css

在 html5 网页上，我有悬停效果。像这样：

```
a:hover {
   background: #EFEFEF;
} 
```

我还有一个带有链接的图像列表：

```
<a href="x">
    <img src="images/y.png" />
</a> 
```

将鼠标悬停在这些链接上时，图像下方会出现一条#EFEFEF 彩色线。我该如何删除它？

这不是文本装饰：下划线，摆弄填充也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:57:34.187

您可能会在图像下方看到锚点的背景。将图像的显示设置为阻止：

```
a img {
  display: block;
} 
```

演示前后：http: [//jsbin.com/enikoz/edit#preview](http://jsbin.com/enikoz/edit#preview)

请记住，将内联图像转换为块元素会影响我们的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:51:42.400

作为对乔纳森回答的增强，如果您不希望元素的布局发生变化，我建议您将a`a`变成 a`inline-block`并制作`img`a `block`。

```
a {display:inline-block}
a img {display:block} 
```

这样，`a`将保持内联，并且文本将保持其完整性。请参阅[jsFiddle](http://jsfiddle.net/akk9y/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:22:17.360

如果您的图像链接指向一个公共目录或网站，您实际上可以通过使用带有正则表达式技巧的属性选择器来选择它们。

```
a[href*="foo"]:hover {
   background:transparent;
} 
```

所以基本上，这将选择所有在其 href 属性中带有“foo”的 a 元素。等号前的星号充当通配符。否则，它只会选择恰好具有“foo”href 的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T14:04:54.090

您在图像下方的空白处看到背景颜色；如果删除图像后的空格，它应该会消失：

```
<a href="x">
    <img src="images/y.png" /></a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T15:56:21.497

我的猜测是，您看到的线条是图像下方的下降空间（位于文本基线上），填充有背景颜色。尝试`text-align: bottom`应用于图像本身，看看线条是否消失或移动到图像的顶部。如果没有，请尝试`text-bottom`。

如果其中任何一个有效，那么垂直对齐就是问题所在，您可以通过向图像添加页面彩色背景并为其提供一些底部填充（例如，`0.15em`）同时将其对齐到文本行的底部来解决它（使用`bottom`或`text-bottom`像以前一样）。

# exception-handling - Labview 中的优雅故障（在设备打开失败后 - 在本例中为相机）

> ID：10334875
> 
> 赞同：0
> 
> 时间：2012-04-26T13:51:37.030
> 
> 标签：exception-handling, error-handling, labview

我想知道如何做到这一点，以便当一个组件出现故障时程序的其余部分运行（因此依赖于该组件的其余路径也无法运行）。在其他语言中，这相当于“捕获异常”，但这里增加的问题是，我担心即使存在这样的功能（找不到是否存在），那么程序的其余部分仍然会尝试运行...任何建议将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T06:39:21.123

LabVIEW没有异常处理，但以不同的方式处理错误：（几乎）所有VI都接受错误簇作为输入（[你的也应该如此](http://labviewinsights.blogspot.fr/2008/09/put-error-handling-in-every-subvi.html)）；如果为正（发生错误），VI 将立即返回，将错误作为输出传递，然后将其作为输入，等等。这称为错误。

由于所有这些 VI 在彼此之间传输该集群，您将在顶层 VI 中获得它，因此如果发生错误，您只需正确清理并退出即可。

# c++ - 从C ++中的2个不同线程访问属于同一对象的不同数据成员

> ID：10334879
> 
> 赞同：6
> 
> 时间：2012-04-26T13:51:48.390
> 
> 标签：c++, multithreading, class, datamember

我有一些对象需要从 C++ 中的不同线程执行操作。我知道有必要锁定可能被多个线程同时使用的任何变量，但是如果每个线程都访问（写入）同一对象的不同数据成员怎么办？例如，每个线程调用对象的不同方法，并且调用的方法都没有修改相同的数据成员。只要我不访问相同的数据成员或者我需要锁定整个对象是否安全？

我四处寻找有关此主题的解释和详细信息，但每个示例似乎都集中在单个变量或非成员函数上。

总结一下：我可以安全地从 2 个不同的线程访问同一个对象的 2 个不同的数据成员，而不用锁定整个对象吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:54:25.017

它实际上是安全的，但如果您经常这样做，会大大降低代码的性能。计算机使用称为“缓存线”的东西，如果两个处理器在同一个缓存线上工作，他们将不得不一直来回传递它，从而减慢您的工作速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:54:30.987

是的，通过不同的线程访问一个对象的不同成员是安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:55:57.383

我认为你可以做到这一点。但是您最好确保方法内部永远不会更改以访问相同的数据，或者调用程序不会决定调用另一个线程已经在使用的另一个方法等。

如此可能，但有潜在危险。但是它也会更快，因为您将避免调用获取互斥锁。选择你的毒药。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T14:04:01.093

好吧，是的，你可以这样做，但是正如其他人所指出的，你不应该这样做。恕我直言，对数据成员的访问应该通过 getter/setter 方法，以便任何必要的互斥/关键部分/信号/任何东西都封装在对象中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T14:30:05.017

你可能要小心。参见例如[http://gcc.gnu.org/ml/gcc/2012-02/msg00032.html](http://gcc.gnu.org/ml/gcc/2012-02/msg00032.html) 根据访问字段的方式，您可能会遇到类似的难以发现的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T13:58:34.857

***只要我不访问相同的数据成员或者我需要锁定整个对象是否安全？***

答案完全取决于类的设计，但是我仍然建议在允许多个线程访问同一个对象之前考虑 100 次。鉴于这一事实，如果您确定数据**确实是独立**的，则**无需**锁定整个对象。

然后出现了一个不同的问题，*“如果变量确实是独立的，为什么它们在同一类中？”* 如果弄错了，小心穿线会导致死亡。

# php - 调整图像大小和旋转图像 - Codeigniter

> ID：10334884
> 
> 赞同：1
> 
> 时间：2012-04-26T13:52:13.923
> 
> 标签：php, codeigniter, rotation, image-resizing

我正在尝试调整图像大小和旋转图像。

目前它只是调整图像大小，而不是旋转它。

这是代码，希望有人有解决方案或其他东西:-)

```
$config['image_library']   = 'gd2';
$config['source_image']    = $data['full_path'];
$config['new_image']       = $data['file_path'].'thumbs/'.$data['file_name'];
$config['create_thumb']    = FALSE;
$config['maintain_ratio']  = TRUE;
$config['width']           = 235;
$config['height']          = 235;

$this->load->library('image_lib', $config); 

$this->image_lib->resize();

$this->image_lib->clear();

$config['create_thumb'] = FALSE; //No thumbnail
$config['source_image'] = $data['file_path'].'thumbs/'.$data['file_name']; //full path for the source image
$config['rotation_angle'] = '180';// 

$this->load->library('image_lib',$config);

//Rotate the image
$this->image_lib->rotate(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-17T19:10:46.777

清除配置后，不要重新加载库，重新初始化：

```
$this->image_lib->clear();
$config=array();
$config['image_library']   = 'gd2';
$config['source_image'] = $data['file_path'].'thumbs/'.$data['file_name'];
$config['rotation_angle'] = '180';
$this->image_lib->initialize($config); // reinitialize it instead of reloading
$this->image_lib->rotate(); 
```

这是最终对我有用的唯一解决方案。只是重新初始化 $config 在 CodeIgniter 2.2.0 中不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T17:07:20.390

后

`$this->image_lib->clear();`

添加：

`$config = array()`重新初始化您的配置数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:56:02.540

确保在再次发送之前重新创建 $config。

否则，您最终可能会发送您不想发送的值。

目前 rotate() 得到一个像这样的 $config ：

```
$config['image_library']   = 'gd2';
$config['new_image']       = $data['file_path'].'thumbs/'.$data['file_name'];
$config['maintain_ratio']  = TRUE;
$config['width']           = 235;
$config['height']          = 235;
$config['create_thumb'] = FALSE; //No thumbnail
$config['source_image'] = $data['file_path'].'thumbs/'.$data['file_name']; //full path for the source image
$config['rotation_angle'] = '180'; // 
```

# c# - 实体框架代码优先：迁移仅在运行时已知的数据库

> ID：10334885
> 
> 赞同：5
> 
> 时间：2012-04-26T13:52:14.307
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

我正在尝试迁移仅在运行时才知道的数据库，这意味着我无法使用包管理器控制台来更新数据库。此外，它不仅仅是一个，而是许多数据库，但它们都是相同的模式:)

我正在使用 Ninject 在`DbContext`对象上生成和注入连接字符串。上下文构造函数如下所示：

```
public class MyEntities : DbContext
{
    public MyEntities(string database) : base(database) { }
    /* Properties code omitted. */
} 
```

实例化上下文的方法如下：

```
public MyEntities GetDatabase(string databaseName, string connectionString)
{
    SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder(connectionString);
    builder.InitialCatalog = databaseName;

    MyEntities context = this._kernel.Get<MyEntities>(new ConstructorArgument(
        "database", builder.ConnectionString));

    Database.SetInitializer<MyEntities>(
        new MigrateDatabaseToLatestVersion<MyEntities, MyEntitiesMigrationConfiguration>("MyEntities"));

    return context;
} 
```

当检索到上下文时，该方法会创建一个连接字符串并将其作为参数传递给`MyEntities`. 我还在方法中指定了我想要的迁移类型（在这种情况下`MigrateDatabaseToLatestVersion`）。

迁移代码如下：

```
public partial class MyAccountInMonth : DbMigration
{
    public override void Up()
    {
        AlterColumn("AccountsInMonths", "MovementDebtMonth", c => c.Long(nullable: false));
        AlterColumn("AccountsInMonths", "MovementCreditMonth", c => c.Long(nullable: false));
        AlterColumn("AccountsInMonths", "BalanceMonth", c => c.Long(nullable: false));
        AlterColumn("AccountsInMonths", "MovementDebtAccumulated", c => c.Long(nullable: false));
        AlterColumn("AccountsInMonths", "MovementCreditAccumulated", c => c.Long(nullable: false));
        AlterColumn("AccountsInMonths", "BalanceAccumulated", c => c.Long(nullable: false));
    }

    public override void Down() { /* Code omitted */ }
} 
```

当我运行应用程序时，出现以下错误：

```
Cannot find the object "AccountsInMonths" because it does not exist or you do not have permissions. 
```

迁移所做的是将列的类型`AccountsInMonths`从更改`int`为`long`。

这是一个迁移错误，因为堆栈跟踪有对其的调用。此时我只能认为问题可能是权限，因为表存在。其他可能性是连接字符串上的某种问题。请问，有人有这方面的线索吗？提前致谢！

PS：如果不清楚，我可以在问题中添加更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-04T09:17:36.000

我有几个问题。这是解决方案：

1）让你`Configuration`的公开课：

```
public sealed class Configuration : DbMigrationsConfiguration<YourContextClassHere> 
```

2) 将您的 Seed() 方法设为公开

2）在任何地方添加下面的代码，这将应用最新的迁移并更新您的数据库：

```
Configuration configuration = new Configuration();
configuration.ContextType = typeof(YourContextClassHere);
var migrator = new DbMigrator(configuration);

// This will update the schema of the DB
migrator.Update();
// This will run Seed() method
configuration.Seed(new YourContextClassHere()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:55:03.550

若要在 Visual Studio 和包管理器控制台之外迁移数据库，请使用位于 EntityFramework nuget 包中的随附 migrate.exe 工具**。**它基本上让您可以从命令行进行相同的迁移。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T10:04:05.600

您可以将包管理器控制台与`Update-Database`. 它有一个开关来指定连接字符串 - 连接字符串本身（`$ConnectionString`和`$ConnectionProviderName`）或从配置（）命名的一个`$ConnectionStringName`。

或者您可以使用`DbMigrator`类在代码中自己处理它（类似于实际`migrate.exe`执行的操作）。

# android - 更改 ListView 中的文本颜色

> ID：10334889
> 
> 赞同：0
> 
> 时间：2012-04-26T13:52:16.980
> 
> 标签：android, listview, textview, textcolor

我正在创建一个游戏，这是我用来显示包含用户名、分数、日期等的游戏列表的代码。但是如何获取 TextViews tv_playerScore 和 tv_opponentScore 的值，以便我可以比较它们并更改他们的文本颜色？因为我想要的是 parseInt 并查看哪个具有最高值并将其 textcolor 设置为绿色，而将其他 textcolor 设置为红色。

```
private void showGames(JSONArray games) throws JSONException {
    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
    HashMap<String, String> map = new HashMap<String, String>();
    for (int i = 0; i < games.length(); i++) {

        map.put("challenger", games.getJSONObject(i).getString("challengerName"));
        map.put("active", games.getJSONObject(i).getString("active"));
        map.put("opponent", games.getJSONObject(i).getString("opponentName"));
        map.put("date", games.getJSONObject(i).getString("date"));
        map.put("gameID", games.getJSONObject(i).getString("gameID"));
        map.put("amount", games.getJSONObject(i).getString("amount"));
        map.put("playerScore", games.getJSONObject(i).getString("challengerScore"));
        map.put("opponentScore", games.getJSONObject(i).getString("opponentScore"));

        if (Integer.parseInt(games.getJSONObject(i).getString("active")) == 2) {

            mylist.add(map);
        }

        map = new HashMap<String, String>();
    }

    SimpleAdapter sadapter = new SimpleAdapter(this, mylist, R.layout.list, new String[] 
            {"amount", "active", "gameID", "challenger", "opponent", "date", "playerScore", "opponentScore"},
            new int[] {R.id.tv_amount, R.id.tv_activte, R.id.tv_gameID, R.id.tv_player, R.id.tv_opponent, R.id.tv_date, R.id.tv_playerScore, R.id.tv_opponentScore}); 

    listView.setAdapter(sadapter); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:01:00.163

如果要获取一个textview的值，必须使用Activity中的findViewById函数。

```
TextView tv_playerScore = (TextView) findViewById (R.id.tv_playerScore); 
```

如果 showGames() 方法不是继承自 Activity（或类似）的类，您应该将视线元素的 setter 注入给那些想要访问的人。

比较：

```
tv_playerScore.getText().toString().compareTo(tv_opponentScore.getText().toString()); 
```

最后，改变颜色：

```
tv_playerScore.setTextColor(Color.CYAN); 
```

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:11:17.223

我认为你应该仔细看看 ListViews 是如何工作的（[http://developer.android.com/resources/tutorials/views/hello-listview.html](http://developer.android.com/resources/tutorials/views/hello-listview.html)）

简而言之，我猜你必须编写自己的 Adpater 类（例如扩展 SimpleAdapater）并重写它的 getView 方法。在这里，您可以根据相应的值设置文本视图的颜色。（我认为在每次绘制列表元素时对它们进行排序而不是检查它们是有意义的......

# sencha-touch - 在 Sencha Touch 2 中加载外部 javascript 的正确方法是什么

> ID：10334893
> 
> 赞同：15
> 
> 时间：2012-04-26T13:52:34.033
> 
> 标签：sencha-touch, sencha-touch-2

在我的开发中，我需要包含第三方 javascripts；像money.js (http://josscrowcroft.github.com/money.js/)

实现它的最佳“干净”/“正确”方法是什么？只需将其包含在 index.html 中？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-26T14:05:24.840

不，不要直接在文件中添加额外的 javascript`index.html`文件。这不是**推荐**的方式（*尽管它可能有效*）。

相反，这样做，

*   在您的`index.html`. microloader 是 sencha sdk 附带的文件夹，主要包含三个文件`development.js`，`production.js`和`testing.js`，每个文件都有自己的用途。

> <script id="microloader" type="text/javascript" src="../../microloader/development.js"> </script>

*   然后，在您的`<appname>`文件夹中，您需要有一个名为`app.json`. 它看起来像这样..

> ```
> {
>     "name": "Sencha",
> 
>      // All javascript files go here ...
>     "js": [
>         {
>             "path": "../../sencha-touch-all-debug.js"
>         },
>         {
>             "path": "app.js",
>             "update": "delta"
>         },
>         { 
>             "path": "http://josscrowcroft.github.com/money.js/",
>             "update": "delta"  
>         }
>     ],
>     "css": [
>         {
>             "path": "../../resources/css/sencha-touch.css",
>             "update": "delta"
>         },
>         {
>             "path": "resources/css/app.css",
>             "update": "delta"
>         }
>     ],
> 
>     .....
>     .....
>     .....
>  } 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-12T14:51:31.170

如果您使用 Sencha Cmd，您的 index.html 可能如下所示：

```
<!-- The line below must be kept intact for Sencha Command to build your application -->
<script id="microloader" type="text/javascript" src=".sencha/app/microloader/development.js"></script> 
```

因此，在更改 app.json 之后，您需要刷新您的应用程序：

```
sencha app refresh 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-30T04:58:46.183

纯 javascript 为我做了诀窍。我刚刚在启动函数中包含了这段代码：

```
var scriptTag = document.createElement('script');
scriptTag.src = 'specify the path here...';
document.body.appendChild(scriptTag); 
```

scriptTag 被附加到索引文件的正文中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-14T01:54:10.337

如果外部 JavaScript 库是本地的，则以下内容适用于 Ext JS 5.0.0。编辑完成后，运行“sencha app build”

对 app.json 中的三个 JSON elememtns 进行更改。(1) js (2) css (3) 资源

> ```
> {
>     "name": "Sencha",
> 
>      // All javascript files go here ...
> "js": [
>     {
>         "path": "app.js",
>         "bundle": true
>     },
>     {
>         "path": "leaflet/leaflet.js",
>         "bundle": true
>     }
> ],
> "css": [
>     {
>         "path": "bootstrap.css",
>         "bootstrap": true
>     },
>     {
>         "path": "leaflet/leaflet.css",
>         "bootstrap": true
>     }
> ],
> 
>     .....
> /**
>  * Extra resources to be copied along when build
>  */
> "resources": [""leaflet/leaflet.js","leaflet/leaflet.css" 
> ```
> 
> ]，............ }

# unit-testing - JUnit 测试统计和指定测试执行顺序

> ID：10334894
> 
> 赞同：1
> 
> 时间：2012-04-26T13:52:35.110
> 
> 标签：unit-testing, testing, junit, continuous-integration, automated-tests

我有很多测试套件和测试，这些测试的执行时间很**长**。

我有一个关于**自适应测试**的想法，以修改一个 TestUnit 框架（例如 JUnit）来运行那些在开始时花费较少时间的测试和那些在结束时花费很长时间的测试。

另外，我正在考虑定义像“@RunFirst”这样的**注释**来声明并通知测试单元框架在开始时运行该测试，以便开发人员可以测试开始时正在运行的功能，从而节省大量时间得到答案。

我的问题是

1.  我们是否有任何*程序*化的方式来命令执行测试？（我已经检查过[这个页面](https://stackoverflow.com/questions/9528581/specifying-order-of-execution-in-junit-test-case)，但它看起来对我来说不是一个吸引人的解决方案）
2.  我们可以访问每个测试的统计信息吗？比如每个需要多长时间？
3.  每次测试执行完毕后，我们能否得到每个测试的结果，并展示给用户？还是我们必须等到所有测试都执行完？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:52:42.903

> 运行那些一开始需要更少时间的测试

如果您真的对此感兴趣，那么您有一些需要很长时间的测试用例。这些几乎可以肯定不是*真正*的单元测试，而是集成测试。相反，我建议将这些测试用例移动到单独的“集成测试”目录中。在单元测试之后运行所有集成测试。

* * *

**编辑**

请参阅以下相关问题：

*   [如何组织集成测试和单元测试](https://stackoverflow.com/questions/3922548/how-to-organize-integration-tests-and-unit-tests)
*   [Maven - 将集成测试与单元测试分开](https://stackoverflow.com/questions/8185936/maven-separate-integration-tests-from-unit-tests)
*   [您是否将单元测试与集成测试分开？](https://stackoverflow.com/questions/406826/do-you-separate-your-unit-tests-from-your-integration-tests)

# vb6-migration - VB6 EXE 和 VB.NET DLL 之间的 IProgressCallBack

> ID：10334895
> 
> 赞同：1
> 
> 时间：2012-04-26T13:52:48.760
> 
> 标签：vb6-migration

我目前正在将我们的软件从 VB6 升级到 VB.NET，并且一次只升级一个 DLL。EXE 将是最后一个，因为它有很多第三方 UI 控件。

我发现的一个问题是 DLL 的 VB6 版本包含一个 IProgressCallBack 类，该类充当接口类（在 VB6 中不正式存在）并允许 EXE 从 DLL 获取进度报告并将其显示在屏幕上为用户。

迁移此 DLL 时，可以将 IProgressCallBack 类设置为接口类，但不能将其“设置”到使用它的表单实例。但是如果我将它创建为一个普通类，它仍然不会让我将它“设置”到使用它的表单实例，因为它们是两种不同的对象类型。

我需要知道如何让 IProgressCallBack 类在 VB6 和 VB.NET 之间工作，或者什么是让 VB6 UI 了解 .NET DLL 进度的替代解决方案？

以下是两者的 VB6 版本及其工作方式的示例：

**VB6 DLL: IProgressCallBack**

```
Option Explicit
Public Function NotifyProgress(ByVal Progress As Single, ByRef isCancel As Boolean) As Boolean
End Function 
```

**VB6 DLL：MainFunctions 类**

```
Public ProgressNotify As IProgressCallBack
Public Sub DoWork()
    Dim l As Long
    For l = 1 to 100
        Sleep 10 'sleep for 1/100 of a second
        ProgressNotify.NotifyProgress 1, False
    Next
End Sub 
```

**VB6 可执行文件**

```
Implements IProgressCallBack
Dim m_oMainFunc As MainFunctions

Private Sub cmdStart_Click()
    Set m_oMainFunc = New MainFunctions
    Set m_oMainFunc.ProgressNotify = Me
    m_oMainFunc.DoWork
    Set m_oMainFunc = Nothing
End Sub

Public Function IProgressCallBack_NotifyProgress(ByVal Progress As Single, isCancel As Boolean) As Boolean
    lblStatus.Caption = CStr(Round(Progress)) & "%"
    pbStatus.Value = Round(Progress)
    Me.Refresh
End Function 
```

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:53:18.473

我还没有完全找到我上面发布的问题的答案，但我找到了一个很好的解决方法。本质上，我将表单作为对象传递给伪装成接口的类，并直接调用驻留在表单上的接口方法来更新屏幕。这是我如何执行此操作的代码示例：

**VB.NET DLL: IProgressCallBack 类**

```
Dim m_oForm As Object

Public Sub New(ByRef oForm As Object)
    m_oForm = oForm
End Sub

Public Function NotifyProgress(ByVal Progress As Single, ByRef isCancel As Boolean) As Boolean
m_oForm.IProgressCallBack_NotifyProgress(Progress, isCancel)
End Function 
```

**VB.NET DLL：MainFunctions 类**

```
Public ProgressNotify As IProgressCallBack

Public Sub New()
    'Need Public Sub New() with no parameters for all Com Classes
    MyBase.New()
End Sub

Public Sub Initialize(ByRef oForm As Object)
    ProgressNotify = New IProgressCallBack(oForm)
End Sub

Public Sub DoWork()
    For l As Long = 1 to 100
        Threading.Thread.Sleep(10) 'sleep for 1/100 of a second
        ProgressNotify.NotifyProgress(l,False)
    Next
End Sub 
```

**VB6 可执行文件**

```
Dim m_oMainFunc As TestDLL_Net.MainFunctions
Private cmdStart_Click()
    Set m_oMainFunc = New TestDLL_Net.MainFunctions
    m_oMainFunc.Initialize Me
    m_oMainFunc.DoWork
    Set m_oMainFunc = Nothing
End Sub

Public Function IProgressCallBack_NotifyProgress(ByVal Progress As Single, isCancel As Boolean) As Boolean
    DoEvents
    lblStatus.Caption = CStr(Round(Progress)) & "%"
    Me.Refresh
    pbStatus.Value = Round(Progress)
End Function 
```

这提供了与上面发布的 VB6 DLL 到 VB6 EXE 示例相同的结果，并且 EXE 中的更改很少使其工作。

谢谢，克里斯

# android - 如何将 IntentService 的结果返回到 Activity？

> ID：10334901
> 
> 赞同：43
> 
> 时间：2012-04-26T13:53:05.313
> 
> 标签：android, android-intent

我正在使用 IntentService 通过 JSON 处理与服务器的网络通信。JSON/服务器部分工作正常，但我无法将结果返回到需要的地方。以下代码显示了我如何从 onClick() 内部启动意图服务，然后让服务更新全局变量以将结果传递回主活动。

```
public class GXActivity extends Activity {

    private static final String TAG = "GXActivity";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // === called when the activity is first created

        Log.i(TAG, "GXActivity Created");

        super.onCreate(savedInstanceState);
        setContentView(R.layout.start);

        View.OnClickListener handler = new View.OnClickListener() {
            public void onClick(View v) {

                // === set up an application context to hold a global variable
                // === called user, to contain results from the intent service
                GXApp appState = ((GXApp) getApplicationContext());
                User user = new User(-1); // initialize user id to -1
                appState.setUser(user);

                // === next start an intent service to get JSON from the server;
                // === this service updates the user global variable with
                // === results from the JSON transaction
                Intent intent = new Intent(this, GXIntentService.class);
                startService(intent);

                // === check app context for results from intent service
                appState = ((GXApp) getApplicationContext());
                if (appState.getUser().getId() != -1)...

            }
        }
    }
} 
```

我遇到的问题是解析 JSON 的意图服务直到 onCreate() 完成后才会被调用，因此我正在寻找结果的代码在查看未初始化的结果时卡住了。

我应该做些什么不同的事情，以便在我检查结果之前调用意图服务？如果我将点击监听器从 onCreate() 函数中拉出来，它会起作用吗？是否有另一个/更好的方式来构建此代码？非常感谢。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-04-26T14:11:12.090

您应该考虑在活动中创建自己的[`ResultReceiver`](http://developer.android.com/reference/android/os/ResultReceiver.html)子类。`ResultReceiver`实现，`Parcelable`因此可以作为.`Activity``Service``Intent`

你需要做这样的事情：

1.  `ResultReceiver`在您的活动类中实现一个子类。实现的关键方法是`onReceiveResult()`. 此方法为您提供了一个`Bundle`结果数据，可用于传递您在`Service`. 只需解压缩您需要的数据并使用它来更新您的活动。

2.  在您的活动中，创建自定义的新实例`ResultReceiver`并将其添加到`Intent`您用于启动服务的实例中。

3.  在您`Service`的`onStartCommand()`方法中，检索`ResultReceiver`传入的`Intent`并将其存储在本地成员变量中。

4.  一旦你`Service`完成了它的工作，让它调用`send()`ResultReceiver 传递你想要发送回活动的任何数据`Bundle`。

这是一种非常有效的模式，意味着您不会将数据存储在讨厌的静态变量中。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-20T15:07:04.843

有很多方法可以在后台做一些事情来取回结果（AsyncTask，将活动绑定到服务......），但如果你想维护你的 IntentService 的代码，你可以简单地：

1- 在 IntentService 工作结束时发送广播意图（包含其扩展数据中的状态）

2- 在您的 Activity 中实现一个 LocalBroadcastReceiver ，它使用来自 Intent 的数据

这也是官方文档中推荐的方式（如果你想维护你的 IntentService）：

[https://developer.android.com/training/run-background-service/report-status.html](https://developer.android.com/training/run-background-service/report-status.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-26T14:18:09.013

如果您需要做的只是从服务器获取 JSON 而不锁定 UI 线程，那么只使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)可能会更简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-07T07:18:46.187

您可以使用[Otto](http://square.github.io/otto/)库。Otto 是一个开源项目，旨在提供事件总线实现，以便组件可以发布和订阅事件。

# javascript - 将自定义用户代理关联到特定的 Google Chrome 页面/标签

> ID：10334909
> 
> 赞同：7
> 
> 时间：2012-04-26T13:53:41.367
> 
> 标签：javascript, google-chrome, google-chrome-extension, http-headers, user-agent

我正在开发一个 Google Chrome 扩展程序，我想将特定的用户代理设置到选项卡/页面或弹出窗口（iframe 显示为“气泡弹出窗口”），而不影响其他页面或选项卡。

是否可以？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-26T19:17:12.263

该[`webRequest`API](http://code.google.com/chrome/extensions/webRequest.html)可用于修改用户代理标头。
注意：开发人员工具中的网络选项卡显示**旧**标题。[我已经使用netcat](http://en.wikipedia.org/wiki/Netcat) ( `nc -l 127.0.0.1 -p 6789`)验证了标题设置是否正确。

**在下面的示例中，代码在所有**选项卡上激活。调整[请求过滤器](http://code.google.com/chrome/extensions/webRequest.html#type-RequestFilter)以满足您的要求。添加`tabId`以限制此过滤器的功能，使用选项卡的 tabId（[`chrome.tabs`](http://code.google.com/chrome/extensions/tabs.html)特别是可通过各种 API 获得）。

## `background.js`

```
chrome.webRequest.onBeforeSendHeaders.addListener(
    function(info) {
        // Replace the User-Agent header
        var headers = info.requestHeaders;
        headers.forEach(function(header, i) {
            if (header.name.toLowerCase() == 'user-agent') { 
                header.value = 'Spoofed UA';
            }
        });  
        return {requestHeaders: headers};
    },
    // Request filter
    {
        // Modify the headers for these pages
        urls: [
            "http://stackoverflow.com/*",
            "http://127.0.0.1:6789/*"
        ],
        // In the main window and frames
        types: ["main_frame", "sub_frame"]
    },
    ["blocking", "requestHeaders"]
); 
```

## `manifest.json`

```
{
  "name": "WebRequest UA test",
  "version": "1.0",
  "permissions": ["webRequest", "webRequestBlocking", "http://*/*"],
  "background": {
    "scripts": ["background.js"]
  },
  "manifest_version": 2
} 
```

## 文档

*   [`chrome.webRequest.onbeforeSendHeaders`](http://code.google.com/chrome/extensions/webRequest.html#event-onBeforeSendHeaders)事件
*   [请求过滤](http://code.google.com/chrome/extensions/webRequest.html#type-RequestFilter)器

# backbone.js - Backbone - 如何防止在服务器端验证失败时将模型添加到集合中或从集合中删除

> ID：10334911
> 
> 赞同：1
> 
> 时间：2012-04-26T13:53:50.763
> 
> 标签：backbone.js

例如，如果我对模型进行销毁并且服务器返回 4xx/5xx，则会调用错误回调处理程序，但无论如何都会从集合中删除模型。我如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T14:36:56.367

从 v0.9 开始，Backbone 对此持乐观态度。[来自http://backbonejs.org/#upgrading](http://backbonejs.org/#upgrading)的文档

> 创建和销毁模型现在是乐观的。如果您需要前面的等待服务器确认成功的行为，则传递 {wait: true}。您现在还可以通过 {wait: true} 来保存呼叫。

所以你所要做的就是`{wait: true}`在你的保存中设置标志：

`myModel.save(null, {wait: true});`

或在您的删除中：

`myModel.destroy({wait: true})`

# c# - 使用 CollectionAssert

> ID：10334912
> 
> 赞同：1
> 
> 时间：2012-04-26T13:53:54.767
> 
> 标签：c#, asp.net, visual-studio-2010, unit-testing

如果我有一个从 Collection 继承的自定义类，称为`LookUpValueCollection`仅处理类的类型`LookUpValueCollection`，要使用`CollectionAssert`Visual Studio 测试的方法，我是否需要实现方法 IEqual 来处理比较？因为我用过，尽管两个集合相似，但仍然说里面的对象是不同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:57:02.770

是的，集合的元素需要覆盖`Equals`（和`GetHashCode`）。否则，元素将通过引用进行比较，因此如果它们不是同一个实例，它们将不会被视为相等。

# javascript - Spotify 本地服务器 API

> ID：10334913
> 
> 赞同：0
> 
> 时间：2012-04-26T13:54:07.793
> 
> 标签：javascript, api, oauth, spotify

因此，我正在利用在 spotify 下运行的 spotilocal.com:4380 服务器，以及 facebook 用来更新/与客户端桌面应用程序交互的服务器。

通过网络面板中的一些嗅探，我发现了如何取回 JSON 字符串

```
http://8440.spotilocal.com:4380/remote/status.json?cors=&csrf=____&oauth=____ 
```

我的问题是——如何在 Facebook 上不手动检查我的网络面板的情况下获得 csrf 和 oauth 令牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:48:54.357

对于 oAuth，您必须从 Facebook 或 Spotify 获取它们。

至于 CSRF 令牌，您必须向“spotilocal:xxxx/simplecsrf/token.json”发出请求，这将返回一个 {token:...}。

但是，只有当它来自一组特定的引用者时，才能返回此令牌。这样做显然是为了防止人们在任何人的计算机上启动任何音乐。

你可以看看我在网上找到的这个东西： [http ://code.google.com/p/spotify-local-api/source/browse/trunk/SpotifyLocalAPI/SpotifyAPI.cs?r=2](http://code.google.com/p/spotify-local-api/source/browse/trunk/SpotifyLocalAPI/SpotifyAPI.cs?r=2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T01:08:43.520

如果您从客户端向[https://open.spotify.com/token](https://open.spotify.com/token)发出 GET，则响应 JSON 对象中将包含一个 oAuth 令牌。

# openldap - LDAP 添加用户（身份验证）

> ID：10334914
> 
> 赞同：0
> 
> 时间：2012-04-26T13:54:13.223
> 
> 标签：openldap

我已经安装了 OpenLDAP 服务器。

如何在 LDAP 服务器中添加用户（条目）。以及如何打开该服务器的命令窗口，以便我可以在其上运行 ldap 命令：

：我的要求是：在我的应用程序中，我想对添加到 Openldap 服务器中的用户进行身份验证，但我只能在 Windows 操作系统上安装 OpenLDAP 服务器，但是如何添加用户我无法解决。在 Windows 7 操作系统上安装的 openLDAP 中添加用户的方法是什么？这就是我想问的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:40:22.837

您可以通过多种方式将条目添加到 LDAP 数据库。在 slapd 运行时，您可以使用 ldapadd/ldapmodify 添加条目。您也可以将 slapadd 与 ldif 文件一起使用。

阅读这些工具的使用情况，然后再回来回答您可能遇到的任何问题。

您还需要了解如何构建目录信息树，以便为存储在 LDAP 数据库中的数据提供某种结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T04:24:36.337

您可以使用 LDAPAdmin 轻松完成

# c++ - 界面与组合

> ID：10334915
> 
> 赞同：4
> 
> 时间：2012-04-26T13:54:15.173
> 
> 标签：c++, interface, abstract-class, composition

我想我理解接口和抽象之间的区别。抽象设置默认行为，在纯抽象的情况下，行为需要由派生类设置。接口是你所需要的，没有基类的开销。那么接口相对于组合的优势是什么？我能想到的唯一优点是在基类中使用受保护的字段。我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T15:26:30.027

您的标题没有意义，并且您的解释有点模糊，所以让我们定义术语（并介绍缺少的关键）。

这里有两件不同的事情：

*   抽象类与接口
*   继承与组合

* * *

让我们从接口和抽象类开始。

*   *抽象类*（在 C++ 中）是一个无法实例化的类，因为它的至少一个方法是纯虚方法。
*   *接口*，在类 Java 语言中，是一组没有实现的方法，在 C++ 中，它是用只有纯虚拟方法的*抽象类来模拟的。*

因此，在 C++ 的上下文中，两者之间没有太大区别。特别是因为这种区别从未考虑到自由功能。

例如，考虑以下“接口”：

```
class LessThanComparable {
public:
    virtual ~LessThanComparable() {}

    virtual bool less(LessThanComparable const& other) const = 0;
}; 
```

即使使用免费功能，您也可以轻松地扩充它：

```
inline bool operator<(LessThanComparable const& left, LessThanComparable const& right) {
    return left.less(right);
}

inline bool operator>(LessThanComparable const& left, LessThanComparable const& right) {
    return right.less(left);
}

inline bool operator<=(LessThanComparable const& left, LessThanComparable const& right) {
    return not right.less(left);
}

inline bool operator>=(LessThanComparable const& left, LessThanComparable const& right) {
    return not left.less(right);
} 
```

在这种情况下，我们提供行为......但类本身仍然是一个接口......哦，好吧。

* * *

因此，真正的争论是在**继承**和**组合**之间。

继承经常被滥用来继承行为。这是不好的。应该使用继承来建模*is-a*关系。否则，您可能需要组合。

考虑一个简单的用例：

```
class DieselEngine { public: void start(); }; 
```

现在，我们如何`Car`用这个构建一个？

如果您继承，它将起作用。然而，突然你得到这样的代码：

```
void start(DieselEngine& e) { e.start(); }

int main() {
    Car car;
    start(car);
} 
```

现在，如果您决定替换`DieselEngine`为`WaterEngine`，则上述功能不起作用。编译失败。并且`WaterEngine`继承自`DieselEngine`肯定感觉很恶心......

那么解决方案是什么？**组成**。

```
class Car {
public:
    void start() { engine.start(); }

private:
    DieselEngine engine;
}; 
```

这样，没有人可以编写假设*汽车是发动机*的荒谬代码（doh！）。因此，更换发动机很**容易**，绝对**不会影响客户**。

这意味着您的实现和使用它的代码之间的一致性较低；或者通常所说的：**少耦合**。

* * *

经验法则是，一般来说，从具有数据或实现行为的类继承应该不被接受。它可以是合法的，但通常有更好的方法。当然，就像所有的经验法则一样，它是带着一粒盐的。小心过度工程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T14:05:32.520

界面定义了您将如何使用。

你继承是为了被重用。这意味着您想适应某个框架。如果您不需要适应框架，即使是您自己制作的框架，也不要继承。

组合是一个实现细节。不要为了得到基类的实现而继承，组合它。仅当它允许您适应框架时才继承。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-26T14:18:58.297

接口**定义**行为。抽象类有助于**实现**行为。

**理论上，完全没有实现的纯**抽象类和接口之间没有太大区别。两者都定义了一个未实现的 API。但是，纯抽象类通常用于不支持接口的语言中以提供类似语义的接口（例如 C++）。

当您有选择时，通常抽象基础将提供某种级别的功能，即使它不完整。它有助于实现常见行为。缺点是你被迫从中获得。当您只是定义用法时，请使用接口。（没有什么能阻止你创建一个实现接口的抽象基础）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T19:43:01.480

如果类型 Y 继承自类型 X，那么知道如何处理类型 X 的对象的代码在大多数情况下将自动能够处理类型 Y 的对象。同样，如果类型 Z 实现接口 I，那么知道如何处理类型 X 的代码如何使用关于哪些实现的对象 我无需了解它们，就可以自动使用 Z 类型的对象。继承和接口的主要目的是允许这样的替换。

相反，如果 P 类型的对象包含 Q 类型的对象，那么期望与 Q 类型的对象一起工作的代码将无法在 P 类型之一上工作（除非 P 除了持有 Q 的对象之外还继承自 Q那种）。期望操作 Q 类型对象的代码将能够对包含在 P 中的 Q 实例进行操作，但前提是 P 的代码直接将其提供给该代码，或使其可供外部代码使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T14:23:39.670

接口很薄，在 C++ 中，它们可以被描述为只有纯虚函数的类。薄是好的，因为

*   它减少了使用或实现界面的学习曲线
*   它减少了用户和接口实现者之间的耦合（依赖）。因此，用户可以很好地避免他们正在使用的接口的实现发生变化。

这与动态库链接相结合，有助于促进**即插即用**，这是最近不为人知但伟大的软件创新之一。这导致更大的软件互操作性、可扩展性等。

接口可以做更多的工作来落实。当你有一个重要的子系统，有一天可能有多个可能的实现时，证明它们的采用是合理的。在这种情况下，应通过接口使用子系统。

通过继承重用需要更多地了解您正在覆盖的实现的行为，因此存在更大的“耦合”。也就是说，在接口过度使用的情况下，这也是一种有效的方法。

# java - 在电子表格中搜索不适用于创建的新文件

> ID：10334919
> 
> 赞同：1
> 
> 时间：2012-04-26T13:54:28.120
> 
> 标签：java, google-app-engine, google-docs, google-docs-api, google-spreadsheet-api

我使用文档列表 api 在 google docs 上创建了我的电子表格模板的副本，我意识到：

```
1\. title queries works fine
2\. content queries are not working(*) or partially working(**)
(*)for majority of spreadsheets: I searched every word from the content of a spreadsheet and I get no results
(**) for a few spreadsheets I find results for some words that are copied from template; the particular words queries are not working
3\. If I update the spreadsheet after a few minutes all queries work fine.
(I make this searches from UI) 
```

这是创建此文件的步骤：

```
1\. Copy spreadsheet template to root

private String sendPostCopyRequest(String authorizationToken, String resourceID, String title, int noRetries) throws IOException{ 
    /*
    resourceId = resource id for the template that i want to copy
    title = the title of the new file created
    */      
    String urlStr = "https://docs.google.com/feeds/default/private/full";
    URL url = new URL(urlStr); 
    HttpURLConnection copyHttpUrlConn = (HttpURLConnection) url.openConnection(); 
    copyHttpUrlConn.setDoOutput(true); 
    copyHttpUrlConn.setRequestMethod("POST"); 

    String outputString = "<?xml version='1.0' encoding='UTF-8'?>" +
            "<entry xmlns=\"http://www.w3.org/2005/Atom\"> " +
            "<id>https://docs.google.com/feeds/default/private/full/" + resourceID +"</id>" +
            " <title>" + title + "</title></entry>";

    copyHttpUrlConn.setRequestProperty("GData-Version", "3.0");
    copyHttpUrlConn.setRequestProperty("Content-Type","application/atom+xml");

    copyHttpUrlConn.setRequestProperty("Content-Length", outputString.length() + "");
    copyHttpUrlConn.setRequestProperty("Authorization", "GoogleLogin auth=" + authorizationToken);

    OutputStream outputStream = copyHttpUrlConn.getOutputStream(); 

    outputStream.write(outputString.getBytes()); 
    copyHttpUrlConn.getResponseCode(); 

    return readIdFromResponse(copyHttpUrlConn.getInputStream()); 
}

2\. I update some cells using this method:

public boolean setCellValue(SpreadsheetService spreadSheetService, SpreadsheetEntry entry, int worksheetNumber, String position, String value) throws IOException, ServiceException {

    List<WorksheetEntry> worksheets = entry.getWorksheets();
    WorksheetEntry worksheet = worksheets.get(worksheetNumber);
    URL cellFeedUrl = worksheet.getCellFeedUrl();
    CellQuery query = new CellQuery(cellFeedUrl);
    query.setReturnEmpty(true);
    query.setRange(position);
    CellFeed cellFeed = spreadSheetService.query(query, CellFeed.class);
    CellEntry cell = cellFeed.getEntries().get(0);

    cell.changeInputValueLocal(value);
    cell.update();
    return true;

}

3\. I move the created file to a new folder (collection)

    public DocumentListEntry moveSpreadSheet(DocsService docsService, String entryId, String destinationFolderDocId) throws MalformedURLException, IOException, ServiceException {

    DocumentListEntry newEntry = null;
    newEntry = new com.google.gdata.data.docs.SpreadsheetEntry();
    newEntry.setId(entryId);
    String destFolderUri = "https://docs.google.com/feeds/default/private/full/folder%3A"+ destinationFolderDocId + "/contents";

    return docsService.insert(new URL(destFolderUri), newEntry);

}

(the same results with gdata java sdk api 1.4.5, 1.4.6, 1.4.7) 
```

这发生在 2011 年 12 月 23 日（近似值）。对于在此日期之前使用相同代码创建的所有电子表格，所有查询都可以正常工作。

我可以根据要求提供任何其他信息。

更新：

1.  这个问题似乎也出现在上传带有转换的电子表格时。
2.  如果我在创建/上传后一段时间（约 2 小时）后更新文件，查询会在结果中返回它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:07:10.013

您的问题可能与 Google 对电子表格内容的索引速度较慢有关。

[https://groups.google.com/a/googleproductforums.com/d/msg/docs/vEhI_HkKX3I/MGKqkryrx90J](https://groups.google.com/a/googleproductforums.com/d/msg/docs/vEhI_HkKX3I/MGKqkryrx90J)

“目前，将您写入电子表格的内容编入索引可能需要大约 10 分钟。因此，如果您输入一些内容，然后立即搜索，它可能尚未显示在您的文档结果列表中。再等几分钟（我们正在努力让它更快）”

# heroku - Heroku buildpacks - 安装 Python 包使用的可执行文件

> ID：10334920
> 
> 赞同：8
> 
> 时间：2012-04-26T13:54:29.437
> 
> 标签：heroku, swig

我正在尝试在 Heroku 上安装 M2Crypto。这依赖于安装 SWIG。

我创建了一个[自定义编译的`swig`可执行文件](https://s3.amazonaws.com/guybowden/swig.tar.gz)和一个[自定义 buildpack](https://github.com/guybowden/heroku-buildpack-python-paybox)。

然后`git push`我将代码上传到 Heroku，自定义 buildpack 安装 SWIG 然后尝试安装 M2Crypto 但失败，因为它找不到`swig`.

这是 buildpack 自定义：

```
# Install SWIG
if [ ! -d $CACHE_DIR/swig ]; then
  cd $BUILD_DIR
  echo "-----> Fetching and installing SWIG 2"
  curl -O https://s3.amazonaws.com/guybowden/swig.tar.gz >/dev/null 2>&1
  echo "-----> Installing ..."
  tar xzvf swig.tar.gz >/dev/null 2>&1
  mv swig $CACHE_DIR/swig
  rm swig.tar.gz
  echo "SWIG installed" | indent
fi

mkdir -p .paybox
cp -R $CACHE_DIR/swig .paybox

echo "updating path..." | indent
PATH=$PATH:/app/.paybox/swig/bin/
export PATH
echo $PATH | indent
echo "setting SWIG_LIB environment var"
export SWIG_LIB=/app/.paybox/swig/share/swig/2.0.5/ 
```

这发生在任何`pip install`命令运行之前。

如果我`heroku run bash`然后手动运行`source .heroku/venv/bin/activate && pip install M2Crypto`它安装没有问题，并且我的应用程序在该实例的生命周期内在 bash 提示符内工作。

我认为初始`pip install -r requirements`运行时 PATH 设置存在问题......有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:22:31.250

答案是..

```
PATH=$PATH:$BUILD_DIR/.paybox/swig/bin/
export PATH
echo $PATH | indent
echo "setting SWIG_LIB environment var"
export SWIG_LIB=$BUILD_DIR/.paybox/swig/share/swig/2.0.5/ 
```

$BUILD_DIR 是执行 buildpack 时构建内容的位置 - 而不是 /app/ （这是应用程序运行时它所在的位置！

# javascript - 骨干模型验证标准（这样做有错吗？）

> ID：10334923
> 
> 赞同：2
> 
> 时间：2012-04-26T13:54:37.940
> 
> 标签：javascript, model-view-controller, backbone.js

我正在使用主干创建一个验证视图，该主干将处理在给定输入上的样式气球中验证消息的显示。我创建了一个处理此功能的新视图。为了执行验证和渲染视图，我在我的模型中设置了以下函数。

```
 Dashboard.Models.EventModel = Backbone.Model.extend({
    idAttribute: "Id",

    // Model Service Url
    url: function () {
        var base = 'apps/dashboard/EventsDetails';
        return (this.isNew()) ? base : base + "/" + this.id;
    },

    validate: function (attrs) {
        var validTime = (attrs.Time) ? attrs.Time.match(/^(0?[1-9]|1[012])(:[0-5]\d) [APap][mM]$/) : true;

        if (!validTime) {
            new Dashboard.Views.ValidationMessageView({
                $container: $('#txtNewEventTime'),
                message: 'Invalid Time'
            }).render();

                    return 'error';
        };

    }

}); 
```

我的问题：创建新视图（ValidationMessageView）并从模型中渲染它是否违反标准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:04:49.703

恕我直言：是的！.. 它看起来不太好。

您应该实例化`View`外部的`Model`.

您应该在模型中*绑定**事件* `error`，从外部捕获它并在`ErrorView`那里实例化。

检查[文档](http://documentcloud.github.com/backbone/#Model-validate)[中的示例`Model.validate`](http://documentcloud.github.com/backbone/#Model-validate)

很快你就可以有`AllErrorsView`这样的：

```
// code simplfied and not tested
var AllErrorsView = Backbone.View.extend({
  initialize: function(){
    this.model.on( "error", this.showError, this );
  },

  showError: function( model, error ){
    if( error == "txt_new_event_time" ) {
      new Dashboard.Views.ValidationMessageView({
        el:         "#txtNewEventTime",
        message:    "Invalid Time"
      }).render();
    }

    // ... more errors
  }

});

var myAllErrorsView = new AllErrorsView({ model: myModel }); 
```

我不得不说这不是我在你的代码中看到的唯一奇怪的东西。例如我不明白你的`Model.url`实现的含义，我认为你可以用[Model.urlRoot 属性](http://documentcloud.github.com/backbone/#Model-urlRoot)解决它。

# jquery - 更改 highchart 中的 onclick 事件，饼图

> ID：10334924
> 
> 赞同：0
> 
> 时间：2012-04-26T13:54:44.727
> 
> 标签：jquery, highcharts

我正在为系统使用 highchart 图表 API。我正在使用的 HighChart 库的饼图，在饼图上有一个鼠标单击事件，在单击事件时，饼图移动了一点点。我需要什么要做的是，将事件绑定到单击事件，将鼠标悬停在事件上。鼠标移出时，馅饼应该再次排在第一位。谁能帮助我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:00:34.053

您可以使用“slicedOffset: 0”（在“pie”对象内）来防止切片移动。

然后，您可以使用点击事件。看看 API： [http ://api.highcharts.com/highcharts#series.data.events.click](http://api.highcharts.com/highcharts#series.data.events.click)

从事件处理程序中，您可以使用“this.name”获取字符串，甚至可以使用“this.options.somevariable”获取某种标识符

“somevariable”表示您在系列数据中创建的任何变量名称。例如，在我的例子中，我将标识符简单地命名为“id”：

```
{
   name: "Slice 6",
   id: 6,
   events: { 
      click: function()
      {
         alert(
            'The name is ' + this.name +
            ' and the identifier is ' + this.options.id
         );
      }
   }
} 
```

# html - indexedDB XML 模式？

> ID：10334925
> 
> 赞同：0
> 
> 时间：2012-04-26T13:54:45.093
> 
> 标签：html, xsd, web-sql, offline-mode, indexeddb

我正在编写一个小而简单的 API 来抽象出 Web SQL、indexedDB，甚至可能是 localStorage/JSON。API 将允许程序员将数据库视为小型关系数据库，即使实际使用的数据库是 indexedDB 或 localStorage/JSON 数据结构。

我不知道是否有这样做的“标准”方式，但我将数据库的结构表示为在 XML 模式中定义的关系数据库。我认为最终产品将如下所示：xsd --> xml（遵循模式，定义 db）--> javascript api --> (indexeddb/wwebsql/localStorage-JSON)。好主意？请注意，该性能可以在 api 中进行调整。也就是说，我知道 indexedDB 不是一个关系数据库，并且对于某些代表它的人来说是一个邪恶的 UNION，但 API 本身将以 indexedDB 方式与 indexedDB 一起使用，并以 Web SQL 方式与 Web SQL 一起使用。

话虽如此，我向您展示了我的架构。我想保持非常简单。尽可能简单。你能对此做些改进吗？我想添加的一件事是为字段定义类型。这样一个字段可以具有属性类型，但它只能是某些值（字符串、数字、blob、w/e）。

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <!-- DATABASE -->
  <xs:element name="database">
    <xs:complexType>
      <xs:choice>
          <!-- TABLE-->
              <xs:element name="table" minOccurs="0" maxOccurs="unbounded">
                <xs:complexType>
                  <xs:choice>
                      <!-- FIELD -->
                      <xs:element name="field" minOccurs="0" maxOccurs="unbounded">
                        <xs:complexType>
                          <xs:attribute name="name" type="xs:string" use="required"/>
                          <xs:attribute name="pk" type="xs:boolean"/>
                          <xs:attribute name="fk" type="xs:string"/>
                          <xs:attribute name="unique" type="xs:boolean"/>
                          <xs:attribute name="index" type="xs:boolean"/>
                          <xs:attribute name="indentity" type="xs:boolean"/>
                          <xs:attribute name="maxSize" type="xs:long"/>
                        </xs:complexType>
                      </xs:element>
                      <!-- END FIELD -->
                  </xs:choice>
                  <xs:attribute name="name" type="xs:string" use="required"/>
                </xs:complexType>
              </xs:element>
          <!-- END TABLE -->
      </xs:choice>
      <xs:attribute name="version" type="xs:double" use="required"/>
    </xs:complexType>
  </xs:element>
  <!-- END DATABASE -->
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:12:02.127

IndexedDB 更像是一种面向文档（实际上是面向对象）的存储，而不是关系型存储。虽然可以在 IndexedDB 中实现[多对多关系](https://stackoverflow.com/questions/7408241/indexeddb-and-many-to-many-relationships)，但这并不完全自然。

因此，虽然我认为将所有 Web 存储简化为一个简单的 XML 模式会很棒，但我认为它不会具有令人难以置信的表现力。

# iphone - 如何让 iOS 应用在 iPad 上仅使用 960 x 640 分辨率？

> ID：10334932
> 
> 赞同：0
> 
> 时间：2012-04-26T13:54:57.870
> 
> 标签：iphone, ios, ipad, cocos2d-iphone

我有 ios 游戏，专为 iPod 4、iPhone 4 设计。

我没有 320 x 460 分辨率的图形，但我希望我的应用程序能够在 iPad 上启动。

有没有办法在 iPad 上以 960 x 640 分辨率启动应用程序，在屏幕中心自动坐标转换？

注意：我使用 cocos2d。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:46:47.283

它可能比你想象的要复杂。

如果您的应用程序不是通用应用程序，而只是 iPhone/iPod 应用程序，则在 iPad/iPad 2 上为 320 * 480。在支持 Retina Display 的新 iPad 上，应用程序将自动为 640 * 960。请参阅：

*   [https://apple.stackexchange.com/questions/42978/retina-iphone-app-on-the-new-ipad](https://apple.stackexchange.com/questions/42978/retina-iphone-app-on-the-new-ipad)
*   [http://www.macrumors.com/2012/03/20/new-ipad-uses-retina-graphics-when-running-iphone-apps/](http://www.macrumors.com/2012/03/20/new-ipad-uses-retina-graphics-when-running-iphone-apps/)

对于越狱的 iPad/iPad 2，Cydia Store 中提供了一个应用程序“RetinaPad”，使他们能够在 Retina 模式下运行 iPhone 应用程序。

我想到的一个可能的解决方案是：

1.  使您的应用程序通用。
2.  在方法中，在`+ (id)scene`中创建一个“包装器” ，并将您自己的添加到“包装器”层而不是场景中。`CCLayer``CCScene``CCLayer`
3.  根据设备的实际分辨率设置`positionInPixel`自己的层`[[CCDirector sharedDirector] winSizeInPixels]`（可能的值为320*480、640*960、768*1024或1536*2048）。
4.  如果设备为 320*480，则将您自己的层设置`scale`为 0.5。

我在您的问题中没有要求，所以很可能我不会验证这种方法......如果它真的是您想要的，您可以尝试一下。

# performance - 防止某些文件夹在请求标头中附加 cookie

> ID：10334937
> 
> 赞同：0
> 
> 时间：2012-04-26T13:55:06.217
> 
> 标签：performance, .htaccess, codeigniter

我有一个使用 codeigniter 构建的应用程序，并且正在运行渲染时间等测试，我注意到某些静态文件附加了 cookie，这增加了不必要的加载时间。我想知道是否可以阻止对文件夹的请求将 cookie 附加到标头。我的网站结构如下所示；

*   应用
*   系统
*   资产
*   资产/js
*   资产/CSS
*   资产/图片
*   简介

我不希望对资产和配置文件文件夹的请求在其标题中包含 cookie

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:28:04.110

如果您在根目录设置 cookie，则需要一个单独的主机名来执行此操作。

不过，我不会从单独的主机名中提供 CSS...

在 HTML 之后，CSS 是网页上下一个最重要的资源，因为浏览器在拥有 CSS 之前无法开始渲染页面。

如果您从一个单独的域提供 CSS，那么会听到解析该域的声音，并且在某些浏览器中会产生 TCP 连接设置的开销（Chrome、IE9 和可能的其他浏览器会推测性地打开与 HTML 之前来自的主机的第二个 TCP 连接他们知道他们需要它）

CSS 上仍会设置 cookie，但如果您为其设置了较长的缓存时间，则每个会话只能请求一次 CSS。

# c++ - 如何将一个函数返回的 TCHAR* 传递给（托管）C++ 中的另一个函数

> ID：10334946
> 
> 赞同：0
> 
> 时间：2012-04-26T13:55:25.063
> 
> 标签：c++

我有一个名为 ReversedIPAddressString 的函数，它将 IPAddress 作为 TCHAR*，然后将反向 IPAddress 作为 TCHAR* 返回。我能够很好地获得反向 IP，但是当我将此 TCHAR* 指针（reversedIP）传递给其他一些函数（比如说 dns.query(TCHAR*)）时，IP 值总是垃圾。我想知道我错过了什么？

我在这里粘贴我的代码供您参考...

### 调用方法：

```
bool DNSService::DoesPtrRecordExixts(System::String^ ipAddress)
{
    IntPtr ipAddressPtr = Marshal::StringToHGlobalAuto(ipAddress);
    TCHAR* ipAddressString = (TCHAR*)ipAddressPtr.ToPointer();
    bool bRecordExists = 0;

    WSAInitializer initializer;
    Locale locale;

    // Initialize the identity object with the provided credentials
    SecurityAuthIdentity identity(userString,passwordString,domainString);
    // Initialize the context
    DnsContext context;
    // Setup the identity object
    context.acquire(identity);

    DnsRecordQueryT<DNS_PTR_DATA> dns(DNS_TYPE_PTR, serverString);
    try
    {
        bRecordExists = dns.query(ReversedIPAddressString(ipAddressString)) > 0;
    }
    catch(SOL::Exception& ex)
    {
        // Free up the pointers to the resources given to this method
        Marshal::FreeHGlobal(ipAddressPtr);

        if(ex.getErrorCode() == DNS_ERROR_RCODE_NAME_ERROR)
            return bRecordExists;
        else
            throw SOL::Exception(ex.getErrorMessage());
    }

    // Free up the pointers to the resources given to this method
    Marshal::FreeHGlobal(ipAddressPtr);

    return bRecordExists;
} 
```

### 调用方法：

```
TCHAR* DNSService::ReversedIPAddressString(TCHAR* ipAddressString)
{
    TCHAR* sep = _T(".");
    TCHAR ipArray[4][4];
    TCHAR reversedIP[30];
    int i = 0;

    TCHAR* token = strtok(ipAddressString, sep);
    while(token != NULL)
    {
        _stprintf(ipArray[i], _T("%s"), token);
        token = strtok((TCHAR*)NULL, sep);
        i++;
    }
    _stprintf(reversedIP, _T("%s.%s.%s.%s.%s"), ipArray[3], ipArray[2], ipArray[1], ipArray[0],_T("IN-ADDR.ARPA"));

    return reversedIP;
} 
```

### DNS.Query 方法声明：

```
int query(__in const TCHAR* hostDomain, __in DWORD options=DNS_QUERY_STANDARD) 
```

希望能得到你的帮助。

提前致谢！

拉玛尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:01:59.837

您正在返回一个指向与 `TCHAR reversedIP[30];`您的函数一起分配的本地数组的指针`ReversedIPAddressString`。当此函数退出时，您的数组将超出范围 - 它不再存在。这是未定义的行为。

您应该返回一个字符串对象，例如`std::basic_string<TCHAR>`

看到这个问题：[pointer-to-local-variable](https://stackoverflow.com/questions/4570366/pointer-to-local-variable)

# struts2 - Spring 与 Struts 的集成 .. 为什么？

> ID：10334947
> 
> 赞同：0
> 
> 时间：2012-04-26T13:55:31.117
> 
> 标签：struts2

谁能告诉我们为什么我们需要将弹簧与支柱集成在一起。Wat 这样做有什么用？有些人提到“对任何框架都有用的依赖注入”这到底是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:04:39.933

[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)允许轻松替换实现。测试期间最大的好处之一是：我可以注入具有已知行为的实现并绕过其他系统组件。

DI 已经在 S2 中通过 XWork 可用——但考虑到 Spring 的功能有多少通常是有用的，我几乎总是将 Spring 用于我所有的 DI/IoC。

# c# - Windows 窗体保存到 XML

> ID：10334949
> 
> 赞同：0
> 
> 时间：2012-04-26T13:55:33.830
> 
> 标签：c#, xml, windows, forms, save

我有一个表单，其中包含用户输入的信息，我想将其保存到 XML 中……我对编程很陌生，但阅读过 XML 是最好的选择。我该怎么办？如果它有助于我使用 Sharp Develop 作为 IDE。当前它有 10 个文本框和 10 个日期时间选择器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T14:05:07.557

最简单的方法是创建一个将这 10 个值存储为属性的类，并使用 xml 序列化将其转换为 XML，然后将其存储到文件系统中。

这是一个教程：[http ://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization](http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization)

更多详情：

这是超级基本的面向对象/Windows 窗体的东西。

创建一个存储每个值的类：

```
public class Values{
    public string YourFirstValue { get; set;}
    public DateTime YourSecondValue { get; set;}
    ...
} 
```

当然，您希望名称能够映射到它们的实际含义，但现在这些就足够了。

然后，当单击表单上的按钮时，将值存储在该类中：

```
void Button1_OnClick(object sender, EventArgs args){
    Values v = new Values();
    v.YourFirstValue = this.FirstField.Text;
    v.YourSecondValue = this.YourSecondField.Value
    ...
    SaveValues(v);
} 
```

然后实现使用[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)进行序列化和[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)将结果存储到文件的`SaveValues`方法来序列化 xml 。

```
public void SaveValues(Values v){
    XmlSerializer serializer = new XmlSerializer(typeof(Values));
    using(TextWriter textWriter = new StreamWriter(@"C:\TheFileYouWantToStore.xml")){
        serializer.Serialize(textWriter, movie);
    }
} 
```

# testing - Facebook Credits - 测试用户

> ID：10334952
> 
> 赞同：0
> 
> 时间：2012-04-26T13:55:37.777
> 
> 标签：testing, facebook-credits, facebook-test-users

我遇到了测试用户和 Facebook Credits 的问题。我创建了一个测试用户并将其添加到“应用程序”>“我的应用程序”>“信用”中的“信用测试人员”，但无法使用该测试用户完成“购买信用”对话框过程。输入付款信息后，我被重定向回 facebook 错误页面，并出现以下错误：

'处理此请求时发生错误。请稍后再试。'

我没有在 Apps > MyApp > Credits 下为 Facebook Credits 注册公司。我必须这样做才能将 Facebook Credits 用于测试用户吗？Facebook 说它是可选的并且是支付所必需的——我不需要它来进行测试/开发。

有任何想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:04:20.380

我会查看请求和响应中的 json，也许那些格式错误。

# symfony - 学说 2 日期/日期时间作为 ID

> ID：10334954
> 
> 赞同：0
> 
> 时间：2012-04-26T13:55:44.097
> 
> 标签：symfony, doctrine-orm

当列是日期或日期时间时，是否可以将属性设置为 id？`

这是我在实体中的属性：

```
/**
 * @var date $statisticdate
 *
 * @ORM\Column(name="statisticdate", type="date", nullable=false, unique=true)
 * @Id
 * @Assert\DateTime()
 */
private $statisticdate; 
```

当我持久化一个新对象时，我有一个错误，即对象 Datetime 无法转换为字符串。现在我创建了一个普通的 id 属性，一切正常。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:18:55.380

据我所知，它只允许在复合键中使用，即使这样也有一些已知问题。我认为简单的解决方案是将其设为字符串并让 setStaticdate($datetime) 检查它是否为有效日期。

# php - 花式盒子画廊

> ID：10334956
> 
> 赞同：0
> 
> 时间：2012-04-26T13:55:48.797
> 
> 标签：php, fancybox

我想知道是否有人可以帮助我。

首先，我为大多数人可能认为是一个非常简单的问题表示歉意。但这是我的第一次尝试，所以请多多包涵。

我正在使用下面的脚本来创建一个带有 Fancybox 的图片库。

**更新代码**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head>  
  <title>Gallery</title>  
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />  
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>   
  <script type="text/javascript" src="fancybox/jquery.fancybox-1.3.4.pack.js"></script> 
  <script type="text/javascript" src="fancybox/jquery.easing-1.4.pack.js"></script> 
  <script type="text/javascript" src="fancybox/jquery.easing-1.4.pack.js"></script>  
  <script type="text/javascript" src="fancybox/jquery.mousewheel-3.0.4.pack.js"></script>  
  <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>  
  <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.0"></script>  
  <script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=2.0.6"></script>  
  <link rel="stylesheet" href="fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.2" type="text/css" media="screen" />  
  <link rel="stylesheet" href="fancybox/jquery.fancybox-1.3.4.css" type="text/css" media="screen" />  
  <link rel="stylesheet" href="fancybox/source/helpers/jquery.fancybox-thumbs.css?v=2.0.6" type="text/css" media="screen" />  

  <script type="text/javascript">  

$(document).ready(function() { 
    $("a.fancybox-thumb").fancybox({

        'transitionIn'  :   'elastic',
        'transitionOut' :   'elastic',
        'speedIn'       :   600, 
        'speedOut'      :   200, 
        'overlayShow'   :   false
    });

});

</script>  

</head> 
<body style="font-family: Calibri; color:  #505050; font-size: 9px; border-bottom-width: thin; margin-top: 5px; margin-left: 100px; margin-right: 100px; margin-bottom: -10px; float: left; position: absolute;"> 
<div align="right" class="style1"> <a href = "javascript:document.gallery.submit()"/> Add Images <a/> &larr; View Uploaded Images </div> 
  <form id="gallery" name="gallery" class="page" action="index.php" method="post">   

                  <?php for ($i = 0; $i < $descriptions->documentElement->childNodes->length; $i++) :  
                          $xmlFile = $descriptions->documentElement->childNodes->item($i);  
                          $name = htmlentities($xmlFile->getAttribute('originalname'), ENT_COMPAT, 'UTF-8');  
                          $description = htmlentities($xmlFile->getAttribute('description'), ENT_COMPAT, 'UTF-8');  
                          $source = $galleryPath . rawurlencode($xmlFile->getAttribute('source'));  
                          $thumbnail = $thumbnailsPath . rawurlencode($xmlFile->getAttribute('thumbnail'));  
                  ?> 
        <a class="fancybox-thumb" rel="allimages" href="<?php echo $source; ?>"><img src="<?php echo $thumbnail; ?>" alt="<?php echo $name; ?>"/></a><?php endfor; ?> 
  </form>  
</body>  
</html> 
```

我可以查看图像，但似乎无法使图库功能正常工作。我一直在研究“fancyBox”和“fancyApps”网站上的示例，但显然我在此过程中误解了一些东西。

我觉得一旦开始，我就可以根据需要对页面进行格式化，我将通过教程进行操作。但我只是想知道是否有人可以告诉我在创建初始画廊时我哪里出错了。

非常感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:03:03.683

我将您的fancybox 附加到一个名为“.fancybox-thumb”的类中，但页面上没有这样的类。相反，您的链接带有名为“.images”的类

所以尝试替换这条线

```
<a class="images" rel="allimages" href="<?php echo $source; ?>"><img src="<?php echo $thumbnail; ?>" alt="<?php echo $name; ?>"/></a><?php endfor; ?> 
```

和

```
<a class="fancybox-thumb" rel="allimages" href="<?php echo $source; ?>"><img src="<?php echo $thumbnail; ?>" alt="<?php echo $name; ?>"/></a><?php endfor; ?> 
```

我尚未测试您的代码，但这是我迄今为止发现的一个明显错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:31:08.190

在@kernelpanic、@ryan 和@Mr_DeLeTeD 提出的最初问题得到纠正后，通过进一步测试并查看了文档，“灰色垂直条纹”是不透明度设置而不是错误。

# jquery - 如何使用 jQuery 通过 id 动态添加日期选择器

> ID：10334959
> 
> 赞同：0
> 
> 时间：2012-04-26T13:55:52.410
> 
> 标签：jquery, datepicker

我正在使用 jQuery 1.4.4，但我一直在尝试通过 id 动态添加日期选择器。这是代码：

```
$(function () {
    $('#ListTableBody').find('input[id^="PickDate."]').each(function () {
        alert(this.id);
        $(this.id).datepicker();
    });
}); 
```

我正在使用一个动态生成 id 的表。上面的代码找到了每个 id，我使用警报对其进行了验证。当我遍历时，this.id 显示我有正确的 id 和输入，但 datepicker 出于某种原因不能工作？另外，我不会抛出任何错误。

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:59:46.747

尝试这个 ：

```
$('#ListTableBody').find('input[id^="PickDate."]').each(function() {                 
    $(this).datepicker();
}); 
```

无需获取`id`属性 - 您可以`this`立即创建一个 jQuery 对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:08:57.723

我会改用一个类。ID 应该只在每个文档中使用一次，而您应用`each()`到 ID 选择器的事实表明您的页面上可能有多个实例。

相反，请选择描述性的类名，例如`.datepicker`. 优点是您可以在页面上拥有多个，并且还可以使用如下表达式在它们上初始化日期选择器：

```
$(document).ready(function() {
    $('input.datepicker').datepicker();
}); 
```

`each()`如果您不做任何其他事情，则不需要循环。如果您想将日期选择器限制为特定区域内的输入，例如`#ListTableBody`（我再次建议使用类名，以便您可以在页面上拥有多个），那么只需更改选择器：

```
$(document).ready(function() {
    $('#ListTableBody').find('input.datepicker').datepicker();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:58:05.560

如果你想使用它的 ID，你需要做这样的事情：

```
$("#"+this.id).datepicker(); 
```

但这样做要容易得多：

```
$(this).datepicker(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:59:51.177

可以为您需要用作日期选择器的每个控件放置相同的类。

```
 <script>
       $(function() {   
            $('.class').datepicker();
      });

    </script> 
```

# asp.net-mvc-3 - mvc 3 部分和用法

> ID：10334962
> 
> 赞同：0
> 
> 时间：2012-04-26T13:55:58.127
> 
> 标签：asp.net-mvc-3, asp.net-mvc-partialview

我们又见到了stackpeople！过去 2 天我一直在寻找我需要的答案。我似乎找不到关于何时使用部分视图的直接答案我知道你可以将 em 用于类似登录组件和所有其他花哨的东西。

但是导航栏呢？我尝试使用部分和 Ajax.htmlactionlink 制作导航栏，但问题来了，我知道因为它只是部分我的 URL 不会被重写，这意味着在 f5 上它总是会更新我的主页/索引，因为没有给出 URL。这是因为我不能让我的导航像那样，还是因为我很愚蠢？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:21:32.443

应该使用部分来避免代码重复。如果您发现自己一遍又一遍地编写相同的视图代码，请创建一个。

导航栏听起来更像是应该在布局中的东西。如果要让页面自定义布局，可以将 Razor 中的 Sections 和 ContentPlaceHolder 用于 webforms 视图引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:18:08.497

我不认为部分与它有任何关系（它不应该，部分只是分割源文件的一种方式，以便您以后可以重用它们）。
我猜问题在于 AjaxhtmlActionlinks 的使用，为什么要进行 Ajax 调用来重定向用户？
尝试使用普通的 @Html.ActionLink()

# java - 将输出重定向到滚动文件

> ID：10334966
> 
> 赞同：4
> 
> 时间：2012-04-26T13:56:11.007
> 
> 标签：java, linux, bash, log4j

有很多示例如何将程序输出重定向到文件。
我需要设置文件的最大大小并滚动文件（消失旧消息）或备份旧文件并开始记录到新文件。

有没有办法使用操作系统核心的东西来做到这一点？

我的客户对我为*每个应用程序*创建日志文件并在那里记录所有标准感到困惑。
该应用程序是长时间运行的应用程序，包含多个模块，这些模块在不同的 JVM 中启动（换句话说，这些是多个应用程序）并使用相同的 log4j.properties 文件。
我正在使用 java 和 log4j，但 log4j*每个包*而不是每个应用程序的日志。它不适合我，因为两个模块可以有相同的包（记录器类别），但应该指向不同的文件。
应用程序模块使用 .sh 脚本启动。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:20:59.667

log4j 不基于包登录。您可以为其提供任何您喜欢的名称。

在您的 log4j.xml 中，添加以下内容：

```
<appender name="USERACTION" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="File" value="/var/logs/useraction.log" />
    <param name="DatePattern" value="'.'yyyy-MM-dd" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d%m%n" />
    </layout>
</appender>

<logger name="UserAction" additivity="false">
    <level value="INFO" />
    <appender-ref ref="USERACTION" />
</logger> 
```

现在像这样实例化您的记录器：

```
private final static Logger LOG = Logger.getLogger("UserAction"); 
```

然后，记录到该记录器的所有内容都将进入文件 useraction.log。你看到相关性了吗？

在当前类之后命名记录器只是方便，但绝不是强制性的。

我经常使用它来区分日志条目。我的一些类有多个记录器实例，比如一个用于用户操作，一个用于低级内容，一个用于服务调用等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:09:12.050

如果您的应用程序可以登录到`stdout`，则有许多工具可以提供帮助，例如：

*   [rotatelogs](http://httpd.apache.org/docs/2.2/programs/rotatelogs.html)，Apache 的一部分。这会根据时间读取`stdin`和写入日志文件；它负责根据需要更改日志文件。您可以使用简单的工具清理旧的日志文件，例如`find -mtime ...`.

*   [svlogd](http://smarden.org/runit/svlogd.8.html)的一部分`runit`。这类似于`rotatelogs`，但会根据需要自动删除旧文件，并且更多地处理大小限制而不是基于时间的轮换。

*   如果您在诸如[supervisor](http://smarden.org/runit/svlogd.8.html)之类的进程管理器下运行程序，则进程管理器可以处理日志输出、滚动日志文件等。

还有许多其他类似的解决方案……我相信也有许多特定于 Java 的想法，但我会把它留给其他人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T14:15:06.657

您可以让 log4j 在您的情况下使用不同的文件，具体取决于日志记录配置中的系统属性。（这个 appender 可以在*[log4j extras](http://logging.apache.org/log4j/companions/extras/index.html)*项目中找到）例如

```
 <appender name="R2" class="org.apache.log4j.rolling.RollingFileAppender">
    <rollingPolicy class="org.apache.log4j.rolling.TimeBasedRollingPolicy">
      <param name="FileNamePattern" value="logs/log_${appName}.log.%d" />
      <param name="ActiveFileName" value="logs/log_${appName}.log" />
    </rollingPolicy>
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d [%t] %c -\n  %-5p: %m%n" />
    </layout>
  </appender> 
```

请参阅`${appName}`：您可以将其作为启动参数传递给 vm，使用`-DappName=MyApp`. 您也可以在运行时使用 设置它`System.setProperty(.., ..)`，但这必须在 log4j 初始化之前发生。您的启动器进程决定了该属性的价值。

您将拥有看起来像`log_MyApp.log`.

编辑：对不起，我错过了您正在使用属性文件并想要基于大小的滚动策略的事实。在这个文件中你可以写（但实际的技巧是一样的）：

```
log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File={myApp}.log
log4j.appender.R.MaxFileSize=100KB
log4j.appender.R.MaxBackupIndex=1 
```

这是更完整的：http: [//logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html) :)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T15:57:34.083

[这](https://stackoverflow.com/questions/9189504/how-to-redirect-the-stdout-and-stderr-in-rolling-file-with-unix-redirection)最适合我（将 System.err 和 System.out 重定向到同一个日志文件，按大小拆分文件）：

```
java MyApp 2>&1 | split -b500k - out.log 
```

谢谢，大家投票赞成；）

# php - PHP：用户选择适当的单选按钮后，如何将该单选按钮的数据插入到我的数据库中？

> ID：10334972
> 
> 赞同：0
> 
> 时间：2012-04-26T13:56:32.100
> 
> 标签：php, mysql, html, sql

如何为用户选择的单选按钮插入数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:09:21.170

你的问题对我来说不是 100% 清楚，你想知道如何将单选按钮输入保存到数据库或如何设置用户单击单选按钮并根据选择他必须填写表格的内容吗？

假设您的单选按钮的 HTML 是这样的：

```
<input type="radio" name="choice" value="1"> Choice 1
<input type="radio" name="choice" value="2"> Choice 2 
```

您可以通过以下方式将其保存到数据库中：

```
mysql_query("INSERT INTO TABLE (choice) VALUES ('".mysql_real_escape_string($_POST['choice'])."')") or die(mysql_error()); 
```

如果您根据选择的单选按钮提交不同的字段，您可以使用：

```
if ($_POST['choice'] == 1) {
 // Do something with the input fields connected to choice1
} else {
// Do something with the input fields connected to choice2 (Assuming you only use 2 radio selects)
} 
```

编辑 //

根据您的 HTML FORM，您可以使用以下代码将值插入数据库：

```
if (isset ($_POST['Submit'])) {

    if (empty ($_POST['CID'])) {

        echo 'You must fill out your Course ID, <a href="javascript:history.back(1)">Go back</a>.';

    } elseif (empty ($_POST['Time'])) {

        echo 'You must fill out the Time field, <a href="javascript:history.back(1)">Go back</a>.';

    } else {

        // Insert into mysql database
        mysql_query("INSERT INTO TABLE (CID, Time) VALUES ('".mysql_real_escape_string($_POST['CID'])."', '".mysql_real_escape_string($_POST['Time'])."')") or die (mysql_error());

        echo 'Thank you, your request has been submitted.';
    }

} else {

    echo 'Error : No Submit action has been placed.';

}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:16:01.963

我建议你多学习一点。

*   [XHTML/HTML 表单和输入](http://www.webstandards.org/learn/tutorials/accessible-forms/beginner/)
*   [在 PHP 中访问外部输入](http://www.php.net/manual/en/language.variables.external.php)
*   [避免 PHP 中的 SQL 注入](http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php)

在阅读了一些内容之后，您可以将这些内容拼凑起来并提出一个更精确的问题。

对于访问不同的页面，我建议您考虑通过 JavaScript 操作 DOM（最好由 jQuery 等工具辅助）或在 PHP 中制作多个页面。

您的项目*在任何意义上都不是可扩展*的，这使得为您编写的每一行代码维护您的项目变得越来越困难。请查看[函数](http://php.net/manual/en/language.functions.php)和[面向对象的编程](http://se.php.net/manual/en/language.oop5.php)。

# javascript - 内容更改后强制页面刷新

> ID：10334974
> 
> 赞同：1
> 
> 时间：2012-04-26T13:56:37.170
> 
> 标签：javascript, jquery, button, refresh

我有一个用作指示器的按钮，因此有两种状态；按下它会切换状态，然后转到下一页。

按下按钮会调用处理此问题的 JavaScript 函数。

使用 jQuery 更改按钮的“src”图像后，我希望用户看到图像更改，暂停片刻，然后才能看到显示的下一页。

我发现图像在 JavaScript 函数返回之前没有明显变化，但这是在暂停之后和页面更改之后。即浏览器不显示页面更改，直到按钮的功能退出。

所以我希望在暂停之前让页面在浏览器中重新绘制。我尝试过的所有解决方案都将页面刷新到服务器上的状态，并且我在 jQuery 中对其所做的任何更改都将丢失。

有没有办法强制重新绘制页面或按钮，这将尊重我在 JavaScript/jQuery 中对其所做的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:05:47.393

```
$("#YourButtonWhichTriggersChanges").click(function() {
    // page repaint code, image change, etc.

    setTimeout(function(){
        window.location.reload();
        // use window.location.href = "my/new/url.html";
        // or window.location.replace("my/new/url.html");  
        // to change the page instead of just reloading.
    }, 1000);
}); 
```

在`1000`刷新页面之前要等待的毫秒数是多少。

* * *

编辑：我认为您想要此代码：

```
$("#ApproveButton").css('backgroundImage', 'url(\'img/but/proof/ApprovePageButton.png\')'); 
```

额外的反斜杠用于转义 url 参数中的单引号。

* * *

另一个编辑：这是我提供的两种解决方案的组合，它们应该可以工作：

```
$("#ApproveButton").click(function() {
        // actually repaint the button's background image
        $(this).css('backgroundImage', 'url(\'img/but/proof/ApprovePageButton.png\')');

        // change the page after 1000 milliseconds have gone by.
        setTimeout(function(){
            window.location.reload();
            /* use window.location.href = "my/new/url.html";
             * or window.location.replace("my/new/url.html");  
             * to change the page instead of just reloading.
             */
        }, 1000);
    }); 
```

# c# - 有多少个时区？

> ID：10334976
> 
> 赞同：10
> 
> 时间：2012-04-26T13:56:44.217
> 
> 标签：c#, .net, timezone

我不确定这是否是一个 SO 问题，但仍然想知道答案。

[维基百科](http://en.wikipedia.org/wiki/Time_zone)说大约有 40 个时区，但是当我`TimeZoneInfo.GetSystemTimeZones()`在 c# 中调用该方法时，它会返回一个包含 101 个元素的列表。

wiki 文章是否已过时（尽管“上次修改时间为 2012 年 4 月 26 日 05:11”）还是有其他时区？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T13:58:45.207

没有一个答案 - 这取决于您感兴趣的时区数据库。使用`TimeZoneInfo.GetSystemTimeZones`将使用 Windows 时区......如果您使用[tzdb](http://www.iana.org/time-zones)，您可能会看到更多。

（例如，当前的[Noda Time](http://noda-time.googlecode.com)版本返回 575 个时区 ID，尽管其中包括 Etc/GMT+9、Etc/GMT+10 等）

# c# - 在 ASP.net 中获取 div 的图像

> ID：10334977
> 
> 赞同：4
> 
> 时间：2012-04-26T13:56:51.257
> 
> 标签：c#, jquery, asp.net

我正在尝试制作 T 恤设计网站。用户通过将不同的 div 和图像放在背景中有 t 恤的 t 恤 div 上来自定义其 t 恤，现在在最终自定义之后，我想保存 t 恤/div 的图片，以便保存自定义。

如何将自定义 div 保存到图像中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:06:42.590

您可以使用 html2canvas 库，它可以渲染到“画布”您的 div，然后将其图像发送回给您。

您可以获取代码，并在此处查看示例。

[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)

这是从画布到图像的转换以将其取回： [http ://www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)

我的担忧。如果出现 javascript 错误并且用户丢失了什么是什么？如果用户不使用可以处理“画布”的新现代浏览器怎么办，以便可以将 div 内的内容呈现为图像。

另一种方法是使用闪存和在闪存上进行一些编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:18:43.407

理想情况下，您将希望使用服务器端处理来生成图像，而不是基于 DOM 的方法。您可能需要考虑使用 GDI+。这些方面的内容应该可以帮助您入门（假设是 ASP.NET 页面的上下文）：

**tshirt.aspx**

```
var imagePath1 = @"C:\path\to\tshirt.jpg";
var imagePath2 = @"C:\path\to\graphic.jpg";

var bg = new Bitmap(imagePath1); 
var overlay = new Bitmap(imagePath2);

var gfx = Graphics.FromImage(bg);

gfx.DrawImage(overlay, new Point(50, 50));

Response.ContentType="image/jpeg"

bg.Save(Response.OutputStream, ImageFormat.Jpeg); 
```

然后在需要图片的页面上：

```
<img src="tshirt.aspx" /> 
```

对“tshirt.aspx”使用上面相同的代码，您可以将调用替换为`bg.Save(Stream, ImageFormat)`以`bg.Save(filePath, ImageFormat)`将生成的图像写入磁盘。

# sas - 为“切换”创建一个虚拟变量

> ID：10334979
> 
> 赞同：1
> 
> 时间：2012-04-25T16:11:38.123
> 
> 标签：sas

我正在 SAS 中进行一个项目，我想创建一个虚拟变量来解释“医学偏好”。我有一个很长的数据集，按时间段，个人服用 1 类药物或 2 类药物。对于我的研究，我想创建一个变量来表示服用 1 类药物的人，然后切换到 2 类药物，但是回到类型 1。我不关心个人服药的时间间隔，只是他们遵循这种模式。

```
 id  month  type
      1    1       2
      1    2       2
      1    3       2
      2    1       1
      2    2       2
      2    3       1      
             ... 
```

我还有几个月的时间，但只是想提供一些东西来阐明我想要得到的东西。基本上，我想统计那些像主题 2 的主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:29:50.500

好吧，没什么特别的，但它对我有用：

```
DATA LONG1;
input id  month  type;
cards;
1    1       2
1    2       2
1    3       2
1    4       2
1    5       2
1    6       2
1    7       2
1    8       2
1    9       2
1   10       2
2    1       1
2    2       1
2    3       1
2    4       1
2    5       1
2    6       1
2    7       1
2    8       1
2    9       1
2   10       1
3    1       1
3    2       1
3    3       1
3    4       2
3    5       1
3    6       1
3    7       1
3    8       1
3    9       1
3   10       1
;

Proc Print; run;
* 1) make a wide dataset by deconstructing the initial long data by month & rejoining by id
2) then use if/then statements to create your dummy variable, 
3) then merge the dummy variable back into your long dataset using ID;

DATA month1; set long1; where month=1; rename month=month_1 type=type_1; Proc Sort; by ID; run;
DATA month2; set long1; where month=2; rename month=month_2 type=type_2; Proc Sort; by ID; run;
DATA month3; set long1; where month=3; rename month=month_3 type=type_3; Proc Sort; by ID; run;
DATA month4; set long1; where month=4; rename month=month_4 type=type_4; Proc Sort; by ID; run;
DATA month5; set long1; where month=5; rename month=month_5 type=type_5; Proc Sort; by ID; run;
DATA month6; set long1; where month=6; rename month=month_6 type=type_6; Proc Sort; by ID; run;
DATA month7; set long1; where month=7; rename month=month_7 type=type_7; Proc Sort; by ID; run;
DATA month8; set long1; where month=8; rename month=month_8 type=type_8; Proc Sort; by ID; run;
DATA month9; set long1; where month=9; rename month=month_9 type=type_9; Proc Sort; by ID; run;
DATA month10; set long1; where month=10; rename month=month_10 type=type_10; Proc Sort; by ID; run;

DATA WIDE;
merge month1 month2 month3 month4 month5 month6 month7 month8 month9 month10; by ID; 
if (type_1=1 and type_2=1 and type_3=1 and type_4=1 and type_5=1 
and type_6=1 and type_7=1 and type_8=1 and type_9=1 and type_10=1) or 
(type_1=2 and type_2=2 and type_3=2 and type_4=2 and type_5=2 
and type_6=2 and type_7=2 and type_8=2 and type_9=2 and type_10=2) 
then switch='no '; else switch='yes '; keep ID switch; run;

DATA LONG2;
merge wide long1; by ID;
Proc Print; run; 
```

顺便说一句：也去 SAS listserv，他们喜欢这样的东西： [http ://www.listserv.uga.edu/archives/sas-l.html](http://www.listserv.uga.edu/archives/sas-l.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:28:52.313

我更喜欢@CarolinaJay65 方法，它更干净，只涉及一次数据传递。如果您感兴趣的只是开始和结束使用 Type1 的患者，但在某些时候使用 Type2，那么可以稍微简化代码。以下代码（使用@CarolinaJay65 源数据）将仅输出匹配此条件的患者 ID。

```
data switch_id (keep=id);
set have;
by id month;
retain switch;
if first.id then do;
    call missing(switch);
    if type=1 then switch=0;
    end;
else if not missing(switch) and type=2 then switch=1;
if last.id and type=1 and switch=1 then output;
run; 
```

如果您只想要符合标准的患者数量，那么您可以进一步调整此代码。

```
data switch (keep=count);
set have end=final;
by id month;
retain switch count 0;
if first.id then do;
    call missing(switch);
    if type=1 then switch=0;
    end;
else if not missing(switch) and type=2 then switch=1;
if last.id and type=1 and switch=1 then count+1;
if final then output;
run; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:35:26.447

这适用于我使用的有限数据：

```
DATA Have; 
 input id month type; 
 datalines;
 1 1 1
 1 2 1
 1 3 1
 1 4 1
 1 5 1
 2 1 1
 2 2 2
 2 3 1
 2 4 1
 2 5 1
 3 1 1
 3 2 1
 3 3 2
 3 4 2
 3 5 1
 4 1 2
 4 2 2
 4 3 2
 4 4 2
 4 5 2
 ;

Data Temp(keep=id dummy);
 length dummy $15;
 retain Start Type2 dummy;
 set Have;
 by id;

 if first.id then Do;
  Start=0;
  Type2=0;
  Dummy="";
 end;

 If Type=1 then do;
  If Start=0 then Start=1;
  else if Start=1 and Type2=1 then Dummy="Switch-er-Roo";
 end;
 else do;
  if Start=1 then Type2=1;
 end;

 if last.id then output;
run;

Data Want;
 merge temp(in=a) have(in=b);
 by id;
run; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T23:52:21.090

我认为以下应该有效：

```
 DATA Have; 
 input id month type; 
 if _n_ ^= 1 and id ^= lag(id) then diftype = .;
 else diftype = dif(type);
 datalines;
 1 1 1
 1 2 1
 1 3 1
 1 4 1
 1 5 1
 2 1 1
 2 2 2
 2 3 1
 2 4 1
 2 5 1
 3 1 1
 3 2 1
 3 3 2
 3 4 2
 3 5 1
 4 1 2
 4 2 2
 4 3 2
 4 4 2
 4 5 2
 ;

proc sql;
     select case when max(diftype) = 1 and min(diftype) = -1 then 1 else 0 end as flag, * from have
  group by id
  ;

quit; 
```

# batch-file - 计划任务以从文件夹中删除内容

> ID：10334982
> 
> 赞同：2
> 
> 时间：2012-04-26T13:57:05.740
> 
> 标签：batch-file, directory, delete-file, subdirectory

我想运行一项每晚删除文件夹内容的作业。该文件夹包含 5/6 个子文件夹。是否可以从每个子文件夹中删除但不能删除实际文件夹？还是我必须为每个文件夹运行一个任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T14:00:44.593

创建一个 delete.bat 文件，将其放入您要从中删除的每个文件夹中：

```
del "C:\your_folder_name\*.*" 
```

然后安排一个任务来运行 delete.bat。或者要循环某个文件夹下的文件夹并删除所有这些文件，您可以使用：

```
C:\> CD \your_folder_name
C:\> FOR /D /r %G in ("*") DO del "%G" /s /Q 
```

`/s`从所有子文件夹中删除
`/q`它会悄悄地（不提示每个文件）
`%G`是子文件夹 var

**延伸阅读**：

*   [SS64 -`DEL`](https://ss64.com/nt/del.html)
*   [如何制作批处理文件以删除特定文件夹中的所有文件和文件夹？](https://www.answers.com/Q/How_do_you_make_a_batch_file_to_delete_all_files_and_folders_in_a_particular_folder)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:36:04.800

DEL 命令有一个 /S（子文件夹）选项，可以删除子文件夹，但保留目录结构。您可以将此功能与 AT 命令结合使用，以安排该命令每天运行。假设要删除文件的文件夹是`C:\tmp`，并且您想在每天 23:59 运行清理，您可以发出以下命令。

```
AT 23:59 /EVERY:m,t,w,th,f,s,su "del C:\tmp\* /S /Q >> C:\cleanup.log" 
```

它还将删除的文件名写入`C:\cleanup.log`，因为没有其他方法可以计算出命令的结果。

如需完整参考，请参阅[DEL](http://ss64.com/nt/del.html)和[AT](http://ss64.com/nt/at.html)。

# c# - 使用网页 2 找不到方法

> ID：10334983
> 
> 赞同：0
> 
> 时间：2012-04-26T13:57:09.070
> 
> 标签：c#, asp.net-webpages

我正在尝试使用 Microsoft Web Helpers，以便可以使用该`@Video`帮助程序。我的代码如下所示：

```
@using Microsoft.Web.Helpers;

@{
    Layout = "~/_SiteLayout.cshtml";
    Page.Title = "Home";
}

@Video.Flash(path: "my_flash_video.swf", width: "400", height: "600",
             play: true, loop: true, menu:  false, bgColor: "red", 
             quality: "medium", scale: "exactfit", windowMode: "transparent") 
```

每次我运行这个我都会收到以下错误：

> 找不到方法：'System.Web.WebPages.HelperResult Microsoft.Web.Helpers.Video.Flash(System.String, System.String, System.String, Boolean, Boolean, Boolean, System.String, System.String, System.字符串，System.String，System.String，System.String，System.Object，System.Object，System.String）'。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:49:01.783

您是否从 NuGet 包管理器安装了 Web Helpers 库？如果没有，请转到您的 NuGet 包管理器并安装 ASP.NET Web Helpers Library。

# .net - 通过 .NET DateTime.Parse 文化的所有字符串的正则表达式 en-US

> ID：10334984
> 
> 赞同：4
> 
> 时间：2012-04-26T13:57:12.500
> 
> 标签：.net, regex, datetime

在你告诉我这是很多正则表达式之前 - 我知道。不要求任何人写任何正则表达式！你知道是否有人已经做过那个正则表达式吗？

这将返回所有模式： CultureInfo.CurrentCulture.DateTimeFormat.GetAllDateTimePatterns() 但此列表并非 100% 准确。有一些不解析的模式 (yy/mm/dd) 和一些未列出的解析模式。引用 en-US 通用 DateTime.Parse

我所做的是分解模式并尝试为每个模式编写正则表达式。

```
(^|\s)(3[01]|[12]\d|0?[1-9])\s+(January|February|March|April|May|June|July|August|September|October|November|December),\s?(19|20)?\d\d(\s+(0?\d|1\d|2[0-4]):[0-6]\d(:[0-6]\d)?(\s+([AP]M|GMT|[+-]\d\d:?\d\d))?)?
        //dd MMMM, yyyy                dddd, dd MMMM, yyyy
        //dd MMMM, yyyy h:mm tt        dddd, dd MMMM, yyyy h:mm tt
        //dd MMMM, yyyy hh:mm tt       dddd, dd MMMM, yyyy h:mm:ss tt
        //dd MMMM, yyyy h:mm:ss tt     dddd, dd MMMM, yyyy hh:mm tt
        //dd MMMM, yyyy hh:mm:ss tt    dddd, dd MMMM, yyyy hh:mm:ss tt
        //dd MMMM, yyyy H:mm           dddd, dd MMMM, yyyy H:mm
        //dd MMMM, yyyy HH:mm          dddd, dd MMMM, yyyy HH:mm
        //dd MMMM, yyyy H:mm:ss        dddd, dd MMMM, yyyy H:mm:ss
        //dd MMMM, yyyy HH:mm:ss       dddd, dd MMMM, yyyy HH:mm:ss

(^|\s)(3[01]|[12]\d|0?[1-9])(/|-)(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)(/|-)\d\d(\s+(0?\d|1\d|2[0-4]):[0-6]\d(:[0-6]\d)?(\s+([AP]M|GMT|[+-]\d\d:?\d\d))?)?
        //dd-MMM-yy 
        //dd-MMM-yy h:mm tt 
        //dd-MMM-yy h:mm:ss tt  
        //dd-MMM-yy hh:mm tt    
        //dd-MMM-yy hh:mm:ss tt 
        //dd-MMM-yy H:mm    
        //dd-MMM-yy HH:mm   
        //dd-MMM-yy H:mm:ss 
        //dd-MMM-yy HH:mm:ss

(^|\s)(January|February|March|April|May|June|July|August|September|October|November|December)\s(3[01]|[12]\d|0?[1-9])(,\s?|\s)(19|20)?\d\d(\s+(0?\d|1\d|2[0-4]):[0-6]\d(:[0-6]\d)?(\s+([AP]M|GMT|[+-]\d\d:?\d\d))?)?
        //MMMM dd, yyyy             dddd, MMMM dd, yyyy
        //MMMM dd, yyyy h:mm tt     dddd, MMMM dd, yyyy h:mm tt
        //MMMM dd, yyyy h:mm:ss tt  dddd, MMMM dd, yyyy h:mm:ss tt
        //MMMM dd, yyyy hh:mm tt    dddd, MMMM dd, yyyy hh:mm tt
        //MMMM dd, yyyy hh:mm:ss tt dddd, MMMM dd, yyyy hh:mm:ss tt
        //MMMM dd, yyyy H:mm        dddd, MMMM dd, yyyy HH:mm       
        //MMMM dd, yyyy H:mm:ss     dddd, MMMM dd, yyyy H:mm:ss     
        //MMMM dd, yyyy HH:mm       dddd, MMMM dd, yyyy HH:mm:ss        
        //MMMM dd, yyyy HH:mm:ss

(^|\s)(19|20)\d\d(/|-)(1[0-2]|0?\d)(/|-)(3[01]|[12]\d|0?[1-9])(\s+(0?\d|1\d|2[0-4]):[0-6]\d(:[0-6]\d)?(\s+([AP]M|GMT|[+-]\d\d:?\d\d))?)?
        /yy/MM/dd   yyyy-MM-dd      
        //yy/MM/dd h:mm tt      yyyy-MM-dd h:mm tt      
        //yy/MM/dd hh:mm tt     yyyy-MM-dd hh:mm tt     
        //yy/MM/dd h:mm:ss tt   yyyy-MM-dd h:mm:ss tt       
        //yy/MM/dd hh:mm:ss tt  yyyy-MM-dd hh:mm:ss tt      
        //yy/MM/dd H:mm         yyyy-MM-dd H:mm     
        //yy/MM/dd HH:mm        yyyy-MM-dd HH:mm        
        //yy/MM/dd H:mm:ss      yyyy-MM-dd H:mm:ss      
        //yy/MM/dd HH:mm:ss     yyyy-MM-dd HH:mm:ss 

(^|\s)(3[01]|[12]\d|0?[1-9])(/|-|/.)(1[0-2]|0?\d)(/|-|/.)(19|20)?\d\d(\s+(0?\d|1\d|2[0-4]):[0-6]\d(:[0-6]\d)?(\s+([AP]M|GMT|[+-]\d\d:?\d\d))?)?
        //fr-FR         
        //dd.MM.yy              dd/MM/yy            dd-MM-yy            dd/MM/yyyy
        //dd.MM.yy H:mm         dd/MM/yy H:mm       dd-MM-yy H:mm       dd/MM/yyyy H:mm
        //dd.MM.yy H:mm:ss      dd/MM/yy H:mm:ss    dd-MM-yy H:mm:ss    dd/MM/yyyy H:mm:ss
        //dd.MM.yy HH' h 'mm    dd/MM/yy HH' h 'mm  dd-MM-yy HH' h 'mm  dd/MM/yyyy HH' h 'mm
        //dd.MM.yy HH.mm        dd/MM/yy HH.mm      dd-MM-yy HH.mm      dd/MM/yyyy HH.mm
        //dd.MM.yy HH:mm        dd/MM/yy HH:mm      dd-MM-yy HH:mm      dd/MM/yyyy HH:mm
        //dd.MM.yy HH:mm:ss     dd/MM/yy HH:mm:ss   dd-MM-yy HH:mm:ss   dd/MM/yyyy HH:mm:ss 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:59:15.180

我要冒个险，假设您不解析当天的名称就可以了，只要日期和时间的其余部分匹配……毕竟，一旦解析了日期，可以重新生成当天的名称（这将需要额外的表达式复杂性，因此我决定将其排除。也就是说，我有一个表达式似乎在查找由 返回的所有日期格式方面做得很好`GetAllDateTimePatterns`，还有其他几个可能也出现（不确定你是否想要这些......）：

```
Tuesday 20 February 2010
mon, jun 12, 1999
tue, december 9 1901
Friday, February 03, 1900
January 12, 2012 
```

（请注意，它与日期名称不匹配，但与日期匹配）

这是表达式：

```
(?i)((3[01]|[12]\d|0?[1-9]|\d{4})([\s/.-]))?\b(1[0-2]|0?\d|(jan|febr?)(uary)?|ma(r(ch)?|y)|a(pr(il)?|ug(ust)?)|(sept?|oct|nov|dec)((em|o)ber)?|ju(ne?|ly?))\b(\3|\s)(((?(2)|3[01])|[12]\d|0?[1-9])(?(2)\d\d\b|\b,?\s+(20|19)?\d\d))?\s+(\d+([:.]\d+)+)? 
```

我相信它*相当*好（我认为它与人类快速浏览文本一样准确），但显然远非完美，因此需要在找到软匹配后进行真正的解析。如果可能的话，可以通过从搜索中排除部分消息来提高整体搜索的效率 - 如果您要查找的日期都在标题中，那么只针对标题运行表达式！

让我知道它是否工作得很好，或者你是否发现了任何边缘情况，我会看看我是否可以修改它。

# post - Struts 2 参数验证

> ID：10334988
> 
> 赞同：0
> 
> 时间：2012-04-26T13:57:25.567
> 
> 标签：post, parameters, struts2, get

我想知道如何处理 struts2 操作中缺少的请求参数：假设您有一个操作来查看用户配置文件。该操作将根据 userId 参数显示给定用户的个人资料。

您如何处理可能缺少此参数的事实（如果用户直接从 url 栏加载操作，或者他使用篡改数据插件...）？

我看到了几个选项，但我想知道是否还有其他选项，哪一个是最好的：

1.  在每个动作中，在 prepare() 上，检查是否给出了预期的参数，如果没有则重定向
2.  在每个动作中，在处理请求的方法上，检查参数，如果没有则重定向

我还认为我可以使用验证器来确保参数存在，但它只适用于表单，不是吗？

如果您对这个问题有任何想法或观点，我很想听听

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:08:17.860

验证对请求参数进行操作——不管是通过表单还是请求参数。

只要一个动作有适当的设置器，在这种情况下，默认验证就可以正常工作。确定用户是否有权访问相关配置文件也可以使用自定义验证器来处理，可能是使用现有业务逻辑来确定访问权限的验证器。

然而，所有这些都可以使用 Spring Security 进行封装，并且无需编写自己的拦截器和/或验证器。哪种解决方案最合适取决于您的实际需求。

# sql - SQL 在表的两个副本之间留下了带有 WHERE 子句依赖关系的自连接

> ID：10334993
> 
> 赞同：10
> 
> 时间：2012-04-26T13:57:31.160
> 
> 标签：sql, outer-join

以下两句：

```
hello there
bye! 
```

在表 sentence_words 中表示为：

```
WORD_ID  SENTENCE_ID    WORD    WORD_NUMBER
10       1              hello   1
11       1              there   2
12       2              bye!    1 
```

我想做一个给我结果的外连接查询：

```
WORD1      WORD2
hello      there
bye!       NULL 
```

请注意，我可能想从句子中间开始，所以我不能假设 word2 的 word_number = 2。如果我选​​择 my_start_number = 2，那么查询应该给我：

```
WORD1   WORD2
there   NULL 
```

我试过：

```
(my_start_number = 1)

select  s1.word word1, s2.word word2
from sentence_words s1
left join sentence_words s2
on s1.sentence_id = s2.sentence_id
where s1.word_number = my_start_number
 and (s2.word_number = s1.word_number +1 or s2.word_number is null); 
```

如果句子中有两个词，那只会给我一个结果。我不确定该怎么做这并不复杂。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T14:01:10.910

将`word_number + 1`需求移入`LEFT JOIN`.

```
SELECT
  s1.word word1, s2.word word2
FROM
  sentence_words s1
LEFT JOIN
  sentence_words s2
    ON  s2.sentence_id = s1.sentence_id
    AND s2.word_number = s1.word_number + 1
WHERE
  s1.word_number = my_start_number 
```

***死神编辑：***

虽然上面修复了 LEFT JOIN 的使用，但我建议根本不要使用连接......

```
SELECT
  sentence_id,
  MAX(CASE WHEN pos = 0 THEN word END)   AS word1,
  MAX(CASE WHEN pos = 1 THEN word END)   AS word2
FROM
(
  SELECT
    sentence_id,
    word_number - MY_START_NUMBER   AS pos,
    word
  FROM
    sentence_words
)
  AS offset_sentence_words
WHERE
  pos IN (0, 1)
GROUP BY
  sentence_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:12:25.210

Dems的答案绝对是正确的。我决定写这个答案来解释你原来的解决方案不起作用的原因。这是因为您正在尝试过滤左外连接的以下结果集（显示所有列，一些名称被缩写以适应）：

```
s1.WORD_ID s1.SENT_ID s1.WORD  s1.WORD_NUM s2.WORD_ID s2.SENT_ID s2.WORD  s2.WORD_NUM
10         1          hello    1           10         1          hello    1
10         1          hello    1           11         1          there    2
11         1          there    2           10         1          hello    1
11         1          there    2           11         1          there    2
12         2          bye!     1           12         2          bye!     1 
```

现在，看看你的 where 子句：

```
where s1.word_number = my_start_number  
 and (s2.word_number = s1.word_number +1 or s2.word_number is null); 
```

...而且应该相对容易看出它为什么不起作用。例如，`s2.word_number`从不`NULL`。

# jquery - Jquery如何计算父级的索引号？

> ID：10334997
> 
> 赞同：1
> 
> 时间：2012-04-26T13:57:47.853
> 
> 标签：jquery

我有一个这个函数来计算索引号，但我需要从它的父级计算它，所以我的索引结果将是 0,1,2。

我怎样才能做到这一点？

我的功能：//

​html:

```
<div id="parent">
    <div class="child1">
        <h3>title one</h3>
    </div>
    <div class="child1">
        <h3>title one</h3>
    </div>
    <div class="child1">
        <h3>title one</h3>
    </div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

查询：

```
​$('h3','#parent')​​​​​​​​​.click(function(){
    alert($(this).index('#parent'))            
})​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:01:28.693

改变你的功能

```
var h3p = $('h3','#parent');
h3p.click(function(){
    alert(h3p.index($(this)));           
}); 
```

小提琴示例：http: [//jsfiddle.net/HwySz/](http://jsfiddle.net/HwySz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:03:12.263

从[文档](http://api.jquery.com/index/)：

> 如果在元素集合上调用 .index() 并传入 DOM 元素或 jQuery 对象，则 .index() 返回一个整数，指示传递的元素相对于原​​始集合的位置。

考虑到这一点，你想要这个：

```
var $h3s = ​$('#parent h3')​​​​​​​​​
$h3s.click(function(){
    alert($h3s.index($(this)));        
})​; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:05:36.937

这是一个有效的 jsFiddle：http: [//jsfiddle.net/ZcBBY/](http://jsfiddle.net/ZcBBY/)

我已经删除了 #parent 的 eventListener 并仅在 h3 上绑定它。查找包含 div 的索引是通过`$(this).parent().index()`

整个区块：

```
$('h3').click(function(){
    alert($(this).parent().index())            
})​ 
```

# sql - WCF 服务将数据从 XML 动态存储到数据库

> ID：10334998
> 
> 赞同：0
> 
> 时间：2012-04-26T13:57:52.307
> 
> 标签：sql, xml, wcf

我正在尝试构建一个通过 XML 从另一个服务获取信息的 WCF 服务。XML 通常有 4 个元素，从 int、string 到 DateTime。我想动态构建服务，以便在获取 XML 时将其存储在数据库中。我不想硬编码代码中的类型和元素名称。如果有变化，我希望它动态地将它添加到数据库中这样做的最佳方法是什么？这是一个好习惯吗？还是我应该坚持只使用实体框架并为数据库设置一个模型并对元素名称和类型进行硬编码？

谢谢

:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:06:53.550

像往常一样，“这取决于......”。

如果您收到的数据的性质是它没有固定的模式，或者作为其业务逻辑/域逻辑的一部分经常更改的模式，那么设计一个解决方案来管理它是一个好主意。存储您在设计时不知道其架构的数据是 StackOverflow 上长期存在的争论 - 查找“属性包”、“实体属性值”或 EAV 以查看各种问题和答案。

您放弃这种方法的是——在 Web 服务层——检查您接收的数据是否符合约定的接口合同的能力；这反过来又有助于避免各种令人兴奋的错误——如果您的系统收到无效的 XML，应该怎么办？如果没有约定的 schema/dtd，您必须在代码中构建各种其他检查。

在数据库级别，您通常最终会放弃关系模型的某些方面（以及 SQL 的强大功能）来存储您的数据，而无需“传统”的行列关系。这通常会使查询变得更加困难，并且可能会牺牲标准合规性（例如，通过使用供应商特定的扩展）。

如果数据因为技术原因而改变——即不是数据的性质改变，只是技术链让你担心这个——我建议你改为建立版本控制的概念，并有“强类型" 不同版本的服务/数据。虽然这似乎更有效，但依赖模式验证、关系数据库模型和简单性的好处通常使它成为一个很好的权衡......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:33:27.710

将 xml 作为 xml 放入数据库。许多现代数据库直接支持 XML。如果没有，请将其存储为文本。

# visual-studio-2010 - 如何在 VS 2010 中禁用 javascript 编译警告？

> ID：10334999
> 
> 赞同：6
> 
> 时间：2012-04-26T13:57:56.557
> 
> 标签：visual-studio-2010

Visual Studio 似乎有意认为我的 javascript 代码不好，主要是因为它不了解 jquery 或我正在使用的某些插件。因此，每次我编译我的产品时，它都会给我很多警告，其中大部分是不正确的（$ 未定义，window 未定义等...）。

我`/// <reference path="" />`在我的 javascript 中设置了标签，智能感知工作正常，所以我知道这些不是真正的问题。

如何禁用这些警告？

*编辑*要清楚，我需要禁用这些，因为它会导致 100 多个警告让我看不到真正的 c# 警告。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T12:47:09.337

我遇到了与您完全相同的问题：每次保存都有 100 多个不正确的错误。对我来说，问题在于 Chirpy，这是另一个扩展的先决条件。不管出于什么原因，Chirpy 不在我的扩展管理器中，所以我花了一段时间才找到。

检查并查看您是否安装了它。如果是这样，请禁用 JSHint。

1.  工具 -> 选项
2.  叽叽喳喳 -> JSHint
3.  取消选中：运行 JS 提示

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T21:05:46.720

试试这个，让我知道它是否有效。

通过工具 > 选项输入选项。

在左侧的树中，选择 Text Editor > JScript > Miscellaneous。取消选中“显示语法错误”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T14:47:33.077

我目前正在使用的计算机上没有 javascript 源文件来对此进行测试，但您可以使用 #pragma 命令禁用特定警告：

`#pragma warning disable`将禁用所有警告，并`#pragma warning restore`在代码块末尾恢复所有警告。您还可以告诉它仅禁用特定警告，例如`#pragma warning disable 0219,0168`.

[http://abhijitjana.net/2010/08/27/how-to-suppress-complier-warning-using-pragma-warning-directives-in-visual-studio/](http://abhijitjana.net/2010/08/27/how-to-suppress-complier-warning-using-pragma-warning-directives-in-visual-studio/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:15:45.077

这个如何？

> 禁用单个编译器警告

```
With a project selected in Solution Explorer, on the Project menu, click Properties.

Click the Compile tab.

In the Warning configurations table, set the Notification value for the warning to None. 
```

或者这个

> 工具 > 选项 > 文本编辑器 > JScript > 杂项 > 将错误显示为警告（仅取消选中此项）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T13:45:35.437

有趣的是，我无法在 VS2010“网站”项目和 vs2010“Web 应用程序”项目中重现您的问题。它与您安装的附加组件有关。可能您可能在该附加组件中设置了禁用警告的设置（导致此问题的人）。

对我来说，警告听起来像是附加组件（谁是造成这种情况的）不够智能。尝试以下更改，看看是否有帮助。

1.  如果您有母版页，请尝试将 jquery*.js 脚本引用从母版页移动到您的实际页面
2.  将所有 javascript 代码移动到 js 文件中，而不是将它们写在 script 标签下

谢谢，

埃森