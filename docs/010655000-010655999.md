# StackOverflow 问答 10655000-10655999

# c# - 在我的 WCF 服务中访问方法

> ID：10655009
> 
> 赞同：0
> 
> 时间：2012-05-18T15:00:07.837
> 
> 标签：c#, .net, wcf

如果我有 WCF 服务并且我正在尝试访问该服务中的方法。

例如：

```
TestObject test = new TestObject("Test Title");
MyService myNewService = new MyService();
myNewService.SaveObjectToDataBase(test); 
```

为什么我得到一个错误，说参数列表需要一个数据类型`MyConsoleApplication.MyService.TestObject`而不是`TestObject`？

在我更新我的服务参考之前，它没有这样做。我认为我没有更改任何会导致此问题的相关属性。

有没有人知道为什么会发生这种情况？

**编辑**

只需要一个类型的`SaveObjectToDataBase()`参数`TestObject`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:03:24.437

创建服务引用时，可以选择重用生成的代理中的现有类。如果您不这样做，它会为接口创建自定义类，虽然它们可能与您的名称和属性相匹配，但它们并不相同。再次尝试更新服务参考，并留意此选项。您可以通过单击“**高级...”**按钮来获得它——这里是勾选的：

![在此处输入图像描述](../Images/b6bd96519b6a738c87cc2d3db533c512.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:26:24.423

你可以尝试几件事。您可以检查服务类型 dll 和您添加的项目是否具有兼容的 .NET 版本。在创建服务引用的项目中，将 Target framework 设置为 non Client Profile。

# java - Java KeyListener：按下两个键时如何执行操作？

> ID：10655010
> 
> 赞同：3
> 
> 时间：2012-05-18T15:00:07.920
> 
> 标签：java, swing, keylistener, key-events

请看下面的代码

```
import java.awt.event.*;
import javax.swing.*;
import java.awt.*;

public class KeyCheck extends JFrame
{
    private JButton check;
    private JPanel panel;
    private FlowLayout flow;

    public KeyCheck()
    {
        check = new JButton("Check");
        check.addKeyListener(new KeyWork());

        panel = new JPanel();
        panel.setLayout(new FlowLayout());
        panel.add(check);

        getContentPane().add(panel);

    }

    private class KeyWork extends KeyAdapter
    {
        public void keyPressed(KeyEvent k)
        {
            if(k.getKeyCode()==KeyEvent.VK_CONTROL && KeyEvent.VK_A)
            {
                JOptionPane.showMessageDialog(null, "OK");
            }
        }
    }
    public static void main(String[]args)
    {
        KeyCheck k = new KeyCheck();
        k.setVisible(true);
        k.setSize(200,200);
        k.validate();
        k.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

在这种情况下，我向按钮添加了一个按键列表，当同时按下 CTRL + A（控制键和“A”键）时，我需要它来显示消息“OK”。但是上面的代码是错误的。所以，当两个键同时按下时，请帮我收到消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T15:08:02.540

您正在混合[关键代码和修饰符](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)：

```
 if(k.getKeyCode()==KeyEvent.VK_A 
     && (k.getModifiers & KeyEvent.CTRL_MASK==KeyEvent.CTRL_MASK)) 
```

但更一般地说，最好使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)而不是 KeyListener。它会让你的生活更轻松，避免你必须进行这些测试。

1.创建一个这样的动作：

```
 public class MyAction extends AbstractAction {

     public void actionPerformed(ActionEvent e) {
          JOptionPane.showMessageDialog(null, "OK");
     }
 } 
```

2.将动作绑定到按键：

```
check.getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_A, InputEvent.CTRL_MASK), "doSomething");
check.getActionMap().put("doSomething", new MyAction()); 
```

警告：我没有测试过这段代码，所以可能需要修复一些小故障。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:07:11.903

您应该在事件中使用方法`k`：

```
if(k.isControlDown() && k.getKeyCode() == KeyEvent.VK_A) { 
```

但请记住，这仅在您的按钮获得焦点时才有效。例如，当您添加`JTextField`到您的`frame`内容并在其中写一些东西时 -因为专注`Ctrl+A`而无法工作。`JTextField`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:07:50.810

```
 public void keyPressed(KeyEvent k)
        {
            if(k.getKeyCode() == KeyEvent.VK_A && (k.getModifiers & KeyEvent.CTRL_MASK) != 0)
            {
                JOptionPane.showMessageDialog(null, "OK");
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-16T14:54:15.590

您还可以使用非常简单的按键助记符或加速器： 1\. 助记符将打开一个菜单 2\. 加速器将按下相应的菜单按钮

```
JMenuItem combination = new JMenuItem("Save File");
combination.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_S, ActionEvent.CTRL_MASK));
        combination.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (e.getSource() == find) {
                System.out.println("Ctrl+S pressed");
savefile();//depending on what your saving code is                    
                }

            }
        }); 
```

# list - 如何在prolog中创建全局变量

> ID：10655013
> 
> 赞同：5
> 
> 时间：2012-05-18T15:00:13.493
> 
> 标签：list, variables, prolog, global, reusability

我有一个创建如下的列表：

```
tab([(top,left),(top,middle),(top,right),(center,left),(center,middle),
     (center,right),(bottom,left),(bottom,middle),(bottom,right)]). 
```

我希望创建一个作为选项卡的全局变量 AllPosition。所以我做了以下事情：

```
tab(AllPos). 
```

这是正确的吗？

然后我必须关注问题：我有一个函数可以接收选项卡中的一对。我想删除。所以我这样做了：

```
place(Line, Column, Tab) :-
AllPos \== [_,_] /*while AllPos isn't empty - not sur if this is done this way*/ -> (member((Line,Column), AllPos) -> (erase(AllPos, (Line,Column), AllPos)). 
```

where`erase(List, Element, NewList)`从 List 中删除元素 Element 并创建一个新列表 NewList 等于 List 但没有 Element。两个功能`member`都`erase`在工作。

问题是......你可能已经注意到我`AllPos`到处都在使用。那是因为我想，我想修改它，以便以后可以在另一个函数中使用它（在从中删除一些元素之后）。我的逻辑对吗？我可以在另一个函数中使用修改后的 AllPos 吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T16:06:24.493

在 SWI-Prolog 中，您可以使用:`b_setval(name, value)`和`b_getval(name, value)`. 如果您不希望在回溯的情况下更改回值，您可以使用:`nb_setval(name, value)`和`nb_getval(name, value)`.

因此，例如，如果您有一个程序并且想要检查它通过某个路径的频率，您可以使用：

```
recursive(100).
recursive(X) :- add, Y is X + 1, recursive(Y).

add :- nb_getval(counter, C), CNew is C + 1, nb_setval(counter, CNew).

testRecursion
:-
    % Set counter to zero
    nb_setval(counter, 0),

    % Run some code with 'add'
    recursive(0), !,

    % Print the results
    nb_getval(counter, CounterValue),
    write('Steps: '), writeln(CounterValue). 
```

这对于一些实验案例来说是好的，但通常你会希望避免在 Prolog 中使用全局变量，因为 Prolog 意味着在逻辑中编程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:37:54.620

添加到伊恩的答案：

通常使用 assert/retract 很慢。许多 prolog 实现对可变全局变量有更有效的方法（例如检查 swi-prolog's [lib](http://www.swi-prolog.org/pldoc/man?section=gvar)）

现在，如果您想要一个几乎可以像您一样编码的**不可变全局变量；**您将“声明”它为，`myvar(42).`但要使用它，您必须这样做：

```
foo:-
   myvar(Var),
   do_something(Var). 
```

再一次，使用可变全局变量并不是真正的建议，并且由于回溯可能导致非常非常糟糕且难以检测到的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T15:16:13.510

简而言之：不，您的逻辑不正确。您的代码存在各种小问题和错误，但更大的问题是基本前提。听起来好像您以错误的方式思考问题。一般来说，如果您尝试在 Prolog 程序中更新全局状态，您需要重新考虑您的设计。状态通常由谓词的参数携带，因此我希望将当前集合作为参数传入，而不是统一`AllTabs`在 的主体中。如果您*真的*想更新程序的全局状态，那么您需要查看and谓词。`place/4``Tabs`*`assert``retract`*

 *一些具体点：

```
tab(AllPos). 
```

这在头部声明了一个带有未绑定变量的谓词。它或多或少是没有意义的（你可以读到“它是`tab`真实的，但我们没有关于它真实的信息”）。

```
AllPos \== [_,_] 
```

的这种用法与`AllPos`的作用域不同`tab/1`，所以除了在变量名中共享相同的字符序列外，这两种用法`AllPos`完全没有关系。*

# aptana - aptana - 有没有办法在 pyDev 的 aptana 内有一个命令行？

> ID：10655016
> 
> 赞同：1
> 
> 时间：2012-05-18T15:00:27.517
> 
> 标签：aptana

当我在 web 透视图中 - 我打开了一个 shell 视图。现在，我主要使用 pyDev，并且我想要在其中包含一个 windows cmd 行。它是否具有此功能（或外部 plaugin）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:54:47.220

如果您在 Aptana Studio 3 中，您是否已经检查过终端视图？

另一种选择可能是安装 IPython 并使用 PyDev 交互式控制台（因为 IPython 应该能够处理 windows 命令...参见： http: [//pydev.org/manual_adv_interactive_console.html](http://pydev.org/manual_adv_interactive_console.html)和[http://ipython.org/](http://ipython.org/)）

# c# - StructureMap 和开放的泛型类型

> ID：10655024
> 
> 赞同：1
> 
> 时间：2012-05-18T15:00:49.957
> 
> 标签：c#, structuremap

我无法使用 StructureMap`IAssemblyScanner.ConnectImplementationsToTypesClosing`方法来获取我的实现。

具体来说，给定以下定义（从公共交通中提取），

```
public class Consumes<TMessage> where TMessage : class
{
    public Consumes();

    public static Consumes<TMessage>.Selected Null { get; }

    public interface All : IConsumer
    {
        void Consume(TMessage message);
    }
  } 
```

我有多个实现`Consumes<TMessage>.All`声明如下，

```
class TrendReportRequestConsumer : Consumes<TrendReportRequest>.All
{ ...

class CountReportRequestConsumer : Consumes<CountReportRequest>.All
{ ... 
```

如果我使用设置结构图，

```
Scan(scan =>
        {
            scan.TheCallingAssembly();                
            scan.IncludeNamespaceContainingType<TrendReportRequestConsumer>();
            scan.ConnectImplementationsToTypesClosing(typeof(Consumes<>.All));
            scan.WithDefaultConventions();
        }); 
```

如果我明确添加实现，它不起作用但

```
 For<Consumes<TrendReportRequest>.All>().Use<TrendReportRequestConsumer>();
        For<Consumes<CountReportRequest>.All>().Use<CountReportRequestConsumer>(); 
```

有用。

我对开放泛型类型的理解有问题吗？？？IE。`Consumes<TMessage>.All`是泛型类中的接口定义，所以这是否使其成为开放的泛型类型？

# encryption - GCM乘法实现

> ID：10655026
> 
> 赞同：5
> 
> 时间：2012-05-18T15:00:51.207
> 
> 标签：encryption, cryptography, multiplication, aes-gcm, galois-field

[我在此处](http://www.google.com.ng/url?sa=t&rct=j&q=GCM%20sp%20800%2038d&source=web&cd=1&ved=0CFYQFjAA&url=http://csrc.nist.gov/publications/nistpubs/800-38D/SP-800-38D.pdf&ei=n162T4bRDsnL0QXjiqW0Cg&usg=AFQjCNEElGcj_hAkPTB-5voW5YxfN7iocg&cad=rja)的 GCM SP-800-38D 文档中为块乘法（算法 1）提供了 C 代码。第 11-12 页。

完成代码后，我想看看是否有任何方法可以测试代码。您可以在我提供的代码下方找到附件。请注意，我使用 24 位块代替了 128 位块，仅用于测试目的。如有必要，我将不胜感激。

```
void BLK_MUL (u8 *val_1,u8 *val_2, u8 *out_val)
{ 

    u8 xdata R_val = 0xE1;     
    u8 xdata Z_val[3],V_val[3];
    u8 mask_b   = 0x80;        
    u16 i;  u8 j;           
    bit rnd;                

    for(j=0;j<3;j++,++val_2)    
    {
        Z_val[j]=0x00;      
        V_val[j]=*val_2;    
    }       

    for(i=0;i<24;i++)
    { 
        if (*val_1 & mask_b)
        {
            for(j=0;j<3;j++)    
                Z_val[j]^=V_val[j]; 
        }
        if (!(V_val[2] & 0x01))
        {//if LSB of V_val is 0
            for(j=0;j<3;j++)
            { //V_val = rightshift(V_val)
                if (j!=0)
                    if (V_val[2-j] & 0x01)
                        V_val[3-j] |= 0x80;
                V_val[2-j]>>=1;          
            }
        }
        else
        {//if LSB of V_val is 1
            for(j=0;j<3;j++)
            {//V_val = rightshift(V_val)
                if (j!=0)
                    if (V_val[2-j] & 0x01)
                        V_val[3-j] |= 0x80;
                V_val[2-j]>>=1;          
            }
            V_val[0]^=R_val; //V_val = rightshift(V_val) ^ R                
        }
        if(mask_b & 0x01)   { val_1++; rnd=1;}  
        mask_b >>= 1;                       
        if (rnd)    { mask_b=0x80; rnd=0; } 
    }

    STR_CPY(out_val,Z_val,3);   

    return ;        
}

void main()
{

    code unsigned char val_1[3] ={  0x2b,0x7e,0x15  };
    code unsigned char val_2[3] ={  0x39,0x25,0x84  };
    unsigned char out[3];

    BLK_MUL (val_1,val_2,out);

    return;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T15:32:20.877

在某些时候，您当然必须根据测试向量检查您的代码。但是您可以执行很多测试，而无需知道或计算任何测试向量。

首先，GF(2^128) 中的乘法是可交换的。因此，您可以使用任何输入计算 BLK_MUL(val_1, val_2, out1) 和 BLK_MUL(val_2, val_1, out2) 并且应该得到相同的结果。由于您的代码以不同的方式使用 val_1 和 val_2 这已经是一个很好的测试。

然后您可以使用该乘法是可分配的，即您可以测试 (x+y)*z = (x*z)+(y*z)，（其中 GF(2^128) 中的加法是通过异或对应的两个值的字节一起）。

最后，一旦你实现了整个字段 GF(2^128)，你也可以利用它的顺序是 2^128-1。即，如果您从值 x 开始，然后将其平方 128 次，那么您应该得到 x。

* * *

一些额外的评论：

使用方程式进行测试（仅使用测试向量）的优点是您可以轻松运行大量测试。因为以这种方式添加测试相当容易，所以我经常首先使用稀疏输入（例如，仅在输入中设置单个位）进行一些简单的测试。如果出现问题，这有助于快速识别错误。

您当前的代码使用临时变量作为结果。这确实是一个好主意，因为它确保了复制安全。我认为一个好的单元测试也应该涵盖这种情况。即，您可能想要两次计算相同的结果：一次输入和输出指向不同的内存位置，一次输出与输入的内存相同。

此外，其他答案中至少有一个谈到了优化。我认为如果你重构代码，那么你应该寻找有意义的组件来重用，而不是盲目地寻找看起来很像的代码片段。由于 GF(2^128) 是一个域，当然域中的加法和乘法是有意义的分量。另一个有意义的组件是多项式 x 的乘法（这是在加密中非常常用的东西）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T22:56:45.440

GCM 模式的测试向量可以在这里找到[，](http://csrc.nist.gov/groups/STM/cavp/documents/mac/gcmtestvectors.zip)[这里](http://csrc.nist.gov/groups/ST/toolkit/BCM/documents/proposedmodes/gcm/gcm-spec.pdf)有一堆 NIST 测试向量。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-09T13:09:38.073

A test example for GF(2^128) can be found at: [PCLMULQDQ CPU instruction](http://download-software.intel.com/sites/default/files/article/165685/clmul-wp-rev-2.01-2012-09-21.pdf), page 78

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-19T03:12:44.570

谢谢@jack 和@emboss。根据杰克的建议，我对该功能进行了测试，结果证明是正确的。希望这对其他人有用，但仍然会感谢任何建议和更正。:) 见下面的主要代码：

```
void main()
{

u8 j;
u8 val_1[3] ={  0x2b,0x7e,0x15  };
u8 val_2[3] ={  0x39,0x25,0x84  };
u8 val_3[3] ={  0x23,0x71,0x25  };
u8 val_3_2[3]={ 0x23,0x71,0x25  };
u8 val_4[3] ={  0x33,0x35,0x44  };
u8 val_5[3] ={  0x2e,0x77,0x11  };

u8 out[3];
u8 out_1[3];
u8 out_2[3];
u8 out_3[3];
u8 out_4[3];
u8 out_5[3];

     //PROOF X*Y = Y*X
BLK_MUL (val_1,val_2,out);      //X*Y
BLK_MUL (val_2,val_1,out_1);    //Y*X
            //N.B: out == out_1
     //PROOF (X+Y)*Z = (X*Z)+(Y*Z) 
for(j=0;j<3;j++)    
    val_3[j]^=val_4[j];         //X = X+Y
BLK_MUL (val_3,val_5,out_2);    //(X+Y)*Z
BLK_MUL (val_5,val_3,out_3);    //Z*(X+Y)
            //N.B: out_2 == out_3

BLK_MUL (val_3_2,val_5,out_4);      //X*Z
BLK_MUL (val_4,val_5,out_5);        //Y*Z
for(j=0;j<3;j++)    
    out_4[j]^=out_5[j];         //(X*Z)+(Y*Z)
            //N.B: out_3=out_2=out_4
return;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-19T16:20:46.547

我不会评论它是否有效或如何测试它，但我可以给你一些编码提示：

*   函数名通常是小写的
*   输入数组应该是`const`...
*   或者如果您不介意破坏第二个输入数组，那么 V_val 是多余的。
*   你的变量应该被重命名。调用输入`x`和`y`输出`z`；`R_val`应该是简单的常数`R`，`mask_b`简单`mask`，`v_val`简单`v`。进行这些更改，您的代码将突然变得可读。
*   删除您添加的评论，它们是多余的
*   类型`u8`应该是 uint8_t（来自 stdint.h）或简单的无符号字符。
*   `Z_val`是多余的；只需使用输出参数`z`（out_val）
*   我不知道“xdata”是什么意思
*   `i`并且`j`应该是`int`
*   `rnd`是多余的
*   `0x01`与`1`- 后者更具可读性。

*   这些`if (!(V_val[2] & 0x01))`条款可以简化为：

    ```
    v[2]>>=1;  /* EDIT --- missed this out before */
    for (j=1; j<3; j++)
    {
        if (v[2-j] & 1)
            v[3-j] |= 0x80;
        v[2-j] >>= 1;
    }
    if (v[2] & 1)
        v[0] ^= R; 
    ```

*   这东西：

    ```
    if(mask_b & 0x01)   { val_1++; rnd=1;}
    mask_b >>= 1;
    if (rnd)    { mask_b=0x80; rnd=0; } 
    ```

    可以简化为（重命名后）

    ```
    if ((mask >>= 1) == 0)
    {
        x++;
        mask = 0x80;
    } 
    ```

    *   当您直接输出到 z 时，STR_CPY 调用是多余的。而且它的名字看起来像一个字符串副本，这绝对不是需要的。

EDIT2（第一次编辑在上面的for循环之前添加了缺失的行）

您有两个相同循环的副本，一个在`if (!(v[2] & 1))`子句中，一个在`else`子句中。后者（else 子句）也有一个`v[0] ^= R;`. 一份可以省略。循环还特别对待 j==0 ，这就是我从循环中提取它的原因（但在帖子中省略了它）。然后循环仅超过 2 个项目，j==1 和 2。

您可以并且可能应该展开剩余的循环以获得：

```
 v[2] >>= 1;

    if (v[1] & 1) v[2] |= 0x80;
    v[1] >>= 1;

    if (v[0] & 1) v[1] |= 0x80;
    v[0] >>= 1;

    if (v[2] & 1) v[0] ^= R; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-17T06:23:39.667

您还有一个数学考虑，试图将 GF(2^128) 代码用于 GF(2^24)

常数“R_val=0xE1”特定于 GF(2^128)，反映了不可约多项式的低阶指数

```
 x^128 + x^7 + x^2 + x^1 + 1 
```

它是 GF(2^128) 的流行同构的生成器，通常在密码学中使用。

这等效于位向量 (1 || 120"0" || 10000111)。（每个位反映多项式中出现的“x”的幂。）

低位（高位 128 被消耗以平衡溢出的位）以大端方式写入 x87 或以小端方式表示时写入 xE1。

**然而**对于 GF(2^24)，似乎不太可能，先验，

```
 x^24 + x^7 + x^2 + x^1 + 1 
```

是不可约的（但我没有测试过）。
那么，在 G(2^24) 中使用什么是已知的良好、有效的不可约多项式？
根据表[http://www.hpl.hp.com/techreports/98/HPL-98-135.pdf](http://www.hpl.hp.com/techreports/98/HPL-98-135.pdf) GF(2^24) 的最低/最简单的不可约多项式似乎是

```
 x^24 + x^4 + x^3 + x^1 + 1 
```

它对应于位向量 (1 || 16 "0" || 00011011)。

因此，再次因为高位被消耗以平衡溢出，正确的校正因子，您的 R_val，以小端方式编写将是 R_val = 0xD8

希望您觉得这个有帮助。

# jquery - 如何知道 slideToggle() 是向上还是向下移动？

> ID：10655036
> 
> 赞同：4
> 
> 时间：2012-05-18T15:01:20.450
> 
> 标签：jquery, jquery-ui

此代码如何确定向上切换或向下切换？请帮忙。谢谢。

```
<html>
    <head>    
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript"> 
            $(document).ready(function(){
                $(".flip").click(function(){
                    $(".panel").slideToggle();
                });
            });
        </script>

        <style type="text/css"> 
            div.panel,p.flip {
                margin:0px;
                padding:5px;
                text-align:center;
                background:#e5eecc;
                border:solid 1px #c3c3c3;
            }
            div.panel {
                height:120px;
                display:none;
            }
        </style>
    </head>

    <body>
        <div class="panel">
            <p>Crap.</p>
        </div>
        <p class="flip">Show/Hide Panel</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:03:35.960

您可以检查元素是否可见。如果它是可见的，`slideToggle()`将向上移动。如果它不可见，它将向下移动。

```
// Want to know if it's visible?
$(this).is(":visible"); 
```

您还可以确定*事后的*发展方向：

```
$(".panel").slideToggle("slow", function(){
  alert( "I moved " + $(this).is(":visible") ? "Down" : "Up" );
}) 
```

当然，这是假设您没有任何定位元素，看起来好像没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T15:03:32.893

如果元素当前设置为显示：无；或以其他方式隐藏。以高度 0 为例。然后它会向下滑动，否则它会向上滑动。

现在，该代码将向下滑动，因为您的 CSS 具有 display:none; 在里面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T15:03:22.707

它检查要切换的内容是否可见

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T15:04:48.317

直接从这里的 jQuery 站点 (http://api.jquery.com/slideToggle/)

如果元素最初被显示，它将被隐藏；如果隐藏，它将显示。根据需要保存和恢复显示属性。如果一个元素的显示值为 inline，然后被隐藏并显示，它将再次被显示为 inline。当隐藏动画后高度达到 0 时，显示样式属性设置为 none，以确保元素不再影响页面的布局。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T15:08:20.327

您可以使用 jquery css 函数，我在这里编写 javaScript 代码，并在代码中进行了一些更改，

```
$(document).ready(function(){
    $(".flip").click(function(){
       if($(".panel").css("display") == 'block') {
          alert('Visible');
       } else {
          alert('Not visible');
       }
    $(".panel").slideToggle();
  });
});​ 
```

请参考完整的工作[示例](http://jsfiddle.net/mbSmH/)

# android - 如何在钛金属中为安卓使用光主题

> ID：10655041
> 
> 赞同：2
> 
> 时间：2012-05-18T15:01:55.200
> 
> 标签：android, titanium

如何更改它以使 android 使用浅色主题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T15:22:23.400

构建您的项目，然后复制`<app>/build/android/AndroidManifest.xml`并`<app>/platform/android/AndroidManifest.xml`添加主题。

[http://developer.android.com/guide/topics/ui/themes.html#ApplyATheme](http://developer.android.com/guide/topics/ui/themes.html#ApplyATheme)

恰恰：

```
<application android:theme="@android:style/Theme.Light"> 
```

# php - 基于 Yii（关系）数据库表动态创建 html 表？

> ID：10655048
> 
> 赞同：1
> 
> 时间：2012-05-18T15:02:22.483
> 
> 标签：php, html, yii, styling

我正在尝试创建“视图”或一个函数，该函数将通过给定表中的列和表数据本身来构建 HTML 表。这将是 Yii 中的 renderPartial 方法调用的页面。我想象做这样的事情（将使用伪代码进行演示）：

```
 void view(array $cols, array $tabledata) 
    {
    //$tabledata will be an array of CActiveRecord objects. $cols is an array of strings from getColumnNames().
    <table><thead><tr>
    foreach($cols as $col)
    {
        <th>$col</th>
    }
    </tr></thead><tbody>
    foreach($tabledata as $data)
    {
        <tr>
        foreach($cols as $col)
        {
            <td>$data->$col</td>
        }
        </tr>
    }
    </tbody></table>
    } 
```

但是我遇到的问题是我无法获得关系的列。我找到了[http://www.yiiframework.com/doc/api/1.1/CDbTableSchema](http://www.yiiframework.com/doc/api/1.1/CDbTableSchema)但这似乎只为您提供特定表的列名。我需要一种方法来获取使用关系生成 HTML 表时使用的所有列。或者，如果有人有更好的方法，请告诉我。谢谢！

编辑：作为说明，我不使用 CGridView 的原因包括我在下面列出的那个，是我不想知道列是什么或数据。我希望能够只使用代码来构建表格。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T15:35:29.300

没有必要创建这样的函数。[CGridView](http://www.yiiframework.com/doc/api/1.1/CGridView)是您正在寻找的。它将数据呈现为 html 表格。下面是示例代码。

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
        'dataProvider' => new CArrayDataProvider($tabledata),
        'columns' => array(
         //specify the colums you wanted here
        ),
    ));
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T16:31:14.830

对于其他想要学习如何做到这一点的人来说，这就是我想出解决方案的方式：

```
--Model--
//Attributes:
$name;
$age;
$data;

--Controller--
//Controller stuff
public function actionShow()
{
  $this->render('show',array('model'=>loadModel(1)));
}

--view--
//traditonal way
echo CHtml::encode($model->getAttributeLabel('name');
echo CHtml::encode($model->name);
echo CHtml::encode($model->getAttributeLabel('age');
echo CHtml::encode($model->age);
echo CHtml::encode($model->getAttributeLabel('data');
echo CHtml::encode($model->data);

//one function way
foreach ($model->attributes as $col=>$val)
{
  CHtml::encode($model->getAttributeLabel($col);
  CHtml::encode($val);
} 
```

这就是我一直在寻找的，以防其他人想尝试。

# c# - c# ASP.NET Datalist 和 HTML 单选按钮

> ID：10655059
> 
> 赞同：0
> 
> 时间：2012-05-18T15:03:17.057
> 
> 标签：c#, asp.net, radio-button, datalist, datalistitem

我的网站具有语言更改控制，因此当单击一种语言时，我会重新加载相同的页面但使用不同的语言文本，如果用户已经在表单中输入了字段，我必须重新加载数据。

我设法将数据重新加载到复选框、文本框中，但没有使用单选按钮

请看我的代码

我有一个数据列表和一个单选按钮。

```
<asp:DataList runat="server" ID="dlRole">
                <ItemTemplate>
                    <input type="radio" id="rblRole" name="rblRole" value='<%# Eval("RoleCode") %>' />                      
                    <asp:Label ID="lbRole" runat="server" Text='<%# Eval("Description")%>'></asp:Label>
                </ItemTemplate>
            </asp:DataList> 
```

我加载数据列表，单选按钮

```
dlRole.DataSource = ...
dlRole.DataBind(); 
```

我将单选按钮值保存到用户会话对象中

```
 user.Role = Request["rblRole"]; 
```

但是当我将保存的对象重新加载到单选按钮时，它找不到单选按钮对象控件....单选按钮始终为 NULL。我不知道为什么

```
 foreach (DataListItem item in dlRole.Items)
        {
            HtmlInputRadioButton radio = (item.FindControl("rblRole") as HtmlInputRadioButton);                
            if (radio != null) <--- always nulll
            {
                if (radio.Value == user.Role.ToString())
                {
                  radio.Checked = true;
                }
                else
                  radio.Checked = false;
            }
        } 
```

请让我知道如何解决这个问题谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:11:22.177

You need to add

```
runat="server" 
```

on you radio button otherwise it will not be accessible from the Code Behind.

# c# - XElement/LinQ 代码失败

> ID：10655068
> 
> 赞同：0
> 
> 时间：2012-05-18T15:03:26.073
> 
> 标签：c#, linq, xelement

所以我有以下代码：

```
public static void Replace(filepath)
{
    try
    {
        XElement xD = XElement.Load(filePath);
        foreach (XElement xE in xD.Elements())
        {
            Console.WriteLine(xE.Attribute("attr").Value);
            if (tuv.Attribute("attr") != null)
            {
                Console.WriteLine(xE.Attribute("attr").Value);
                if (Regex.IsMatch(xE.Attribute("attr").EndsWith("AA"))
                {
                    Console.WriteLine("match");
                    tuv.Attribute("attr").Value.Replace("AA", "");
                }
                Console.WriteLine(xE.Attribute("attr").Value);
            }
        }
    }
    catch (Exception e)
    {
        Console.WriteLine("Failure in Replace: {0}", e.ToString());
    }
} 
```

我得到的错误是：Replace失败：System.NullReferenceException：对象引用未设置为对象的引用。在 Application.Program.Replace(string filepath) 中：第 21 行（第一个 Console.WriteLine）

该程序的目的是编辑 XML 文件中满足特定条件的任何属性名称......因此，例如，假设我们有：

```
<element attr="brAA"></element> 
```

这将被编辑为：

```
<element attr="br"></element> 
```

据我所知，我正在创建一个变量 xE，它代表元素集合 xD.Elements() 的内容……我已经为此头疼了一个小时！有没有人知道我为什么会收到这个错误？

非常感谢！

***这是 XML 的片段***

```
<body>
    <par>
    <prop type="Doc">1</prop>
    <elem attr="aaaa">
        <child>REDACTED</child>
    </elem>
    <elem attr="aaAA">
        <child>REDACTED</child>
    </elem>
    <elem lang="abaa">
        <child>REDACTED</child>
    </elem>
    <elem attr="abAA">
        <child>REDACTED</child>
    </elem>
    <elem attr="acaa">
        <child>REDACTED</child>
    </elem>
    </par>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:20:03.223

您正在遍历所有元素，并显示“attr”属性的值。但有些节点没有“attr”属性，因此出现错误。移除块的`Console.WriteLine`外部，`if`它应该可以工作：

```
public static void Replace(filepath)
{
    try
    {
        XElement xD = XElement.Load(filePath);
        foreach (XElement xE in xD.Descendants())
        {
            if (xE.Attribute("attr") != null)
            {
                Console.WriteLine(xE.Attribute("attr").Value);
                if (Regex.IsMatch(xE.Attribute("attr").Value))
                {
                    Console.WriteLine("match");
                    xE.Attribute("attr").Value.Replace("AA", "");
                }
                Console.WriteLine(xE.Attribute("attr").Value);
            }
        }
    }
    catch (Exception e)
    {
        Console.WriteLine("Failure in Replace: {0}", e.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:26:14.093

`<elem>`您只需要处理实际需要替换属性值的元素。您的 .Replace() 没有这样做。

下面的代码遍历`<elem>`元素，并具有正确的替换：`xE.Attribute("attr").Value = xE.Attribute("attr").Value.Replace("AA", "");`

我还更改了您的 .EndsWith 以摆脱正则表达式匹配。最后，这里*没有*针对缺失属性的错误处理。你也应该检查一下。

```
 foreach (XElement xE in xD.Descendants("elem"))
    {
        //Console.WriteLine(xE.Attribute("attr").Value);
        if (xE.Attribute("attr") != null)
        {
            Console.WriteLine(xE.Attribute("attr").Value);
            if (xE.Attribute("attr").Value.EndsWith("AA"))
            {
                Console.WriteLine("match");
                xE.Attribute("attr").Value = xE.Attribute("attr").Value.Replace("AA", "");
            }
            Console.WriteLine(xE.Attribute("attr").Value);
        }
    } 
```

**编辑*- 你问如何写出文件。这将覆盖它。

```
 using(var sw = new StreamWriter(filepath, false))
    {
        sw.Write(xD.ToString());
        sw.Close();
    } 
```

# git - github添加<<<<<<<头

> ID：10655069
> 
> 赞同：3
> 
> 时间：2012-05-18T15:03:28.713
> 
> 标签：git, github

嗨，我对 github 还很陌生，当我对代码进行了一些更改然后合并到上游时，如果有任何冲突，它将执行以下操作。

```
Auto-merging Global.asax.cs CONFLICT (content): Merge conflict in Global.asax.cs

<<<< HEAD
======
>>>> UPSTREA/MASTER 
```

进入我的代码。有谁知道为什么？以及如何摆脱它们？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:04:43.090

您的远程和本地之间存在合并冲突。小于和提交名称（`HEAD`在您的示例中）由 Git 插入。

有一些有用的工具可以帮助解决冲突。我使用的内置在 JetBrains IDEA 中，显示 LHS 上的本地更改、RHS 上的远程更改以及中间的合并结果。它对我来说效果很好，所以如果你不习惯使用 Git 的工具，试着找一个能做同样事情的`diff`工具。

修复冲突，`add`然后`commit`和`push`。

# ruby-on-rails-3 - 嵌套形式的批量分配失败

> ID：10655076
> 
> 赞同：1
> 
> 时间：2012-05-18T15:03:40.163
> 
> 标签：ruby-on-rails-3

我面临一个新手在使用 Rails 3.2.3 时遇到的常见问题。我收到错误

无法批量分配受保护的属性：user_impl、util_location

```
class User < ActiveRecord::Base

  has_one :user_impl, :dependent => :destroy
  has_one :util_location, :as => :locatable, :dependent => :destroy

  attr_accessible ..., :user_impl_attributes, :util_location_attributes 
```

我尝试将 Accept_nested_attributes_for :user_impl, :util_location 添加到代码中，但这也不起作用并给出了完全不同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:22:40.670

基本结构应如下所示：

```
class User < ActiveRecord::Base
    attr_accessible :user_impl_attributes

    has_one :user_impl, :dependent => :destroy
    accepts_nested_attributes_for :user_impl 
```

# c# - Skype4Com如何登录？

> ID：10655078
> 
> 赞同：1
> 
> 时间：2012-05-18T15:03:43.933
> 
> 标签：c#, skype4com

嗨，我使用 Skype4COM 创建了一个小项目，它可以工作，但首先我需要打开我的 Skype 并登录。我的问题是是否可以使用这个库登录到Skype？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:21:16.963

根据您的开发内容，您可以全力以赴，开发一个集成了 Skype 的整个 UI。

有关更多信息，请参阅 skypekit：http: [//developer.skype.com/public/skypekit](http://developer.skype.com/public/skypekit)

Allen smith 我为 Skype 开发人员工作，并且是 Microsoft 员工。

# xml - 使用 GWT XMLParser 解析后，UTF-8 字符已损坏

> ID：10655081
> 
> 赞同：1
> 
> 时间：2012-05-18T15:03:59.160
> 
> 标签：xml, parsing, gwt, utf-8

我现在只是看不透自己。这应该是标准的：我得到一个带有一些 UTF-8 字符的 XML，我想对其进行解析。

这是一个例子： `<person><name>Nguyển Thị Ngân</name></person>`

当我使用 GWTs XMLParser 解析它并打印出名称节点值时，字符已损坏：

```
String xml = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><person><name>Nguyển Thị Ngân</name></person>";

Document doc= XMLParser.parse(xml);

NodeList list = doc.getElementsByTagName("name");
for(int i = 0; i < list.getLength(); i++){
    System.out.println("XMLParser: " + list.item(i).getFirstChild().getNodeValue());
}
System.out.println("System.out: " + xml); 
```

输出是：

`XMLParser: Nguyá»n Thá» NgÃ¢n`

`System.out: <?xml version="1.0" encoding="UTF-8"?><person><name>Nguyển Thị Ngân</name></person>`

我解释说，字符混乱与通过 System.out 打印无关。

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:42:42.000

我认为这个问题正如 Thomas Broyer 所描述的那样。这不可能是 chooban 所说的，因为打印原始 XML 可以按预期工作。您可以尝试用它们的 XML 转义码替换 unicode：

```
StringBuilder xmlEscaped = new StringBuilder();
for(int i = 0; i < xml.length(); i++) {
   char c = xml.charAt(i);
   if (c < 127) {
     xmlEscaped.append(c);
   } else {
     xmlEscaped.append("&#" + ((int) c) + ";");
   }
}
Document doc = XMLParser.parse(xmlEscaped.toString()); 
```

# html - HTML5 画布滚动混乱与鼠标位置

> ID：10655084
> 
> 赞同：6
> 
> 时间：2012-05-18T15:04:22.303
> 
> 标签：html, canvas, scrollbar, mouse-position

我现在正在搞乱 HTML5，我想编写一些浏览器游戏——只是为了好玩。我创建了一个画布，其中加载了背景图像 - 它是一种六边形网格。为了找出点击了哪个六边形，我使用圆圈和它们的中心/半径。我解释一下，因为这样你可以更快地理解我发布的代码。

在我使用滚动条之前，这一切都很好 - 然后一切都搞砸了。似乎我没有得到正确的坐标。因为网格有点大，所以我必须使用滚动条，尤其是在较小的屏幕上。

所以这里是代码

网站

```
<html>
<head>
    <script type="text/javascript" src="worldmap.js"></script>
    <script type="text/javascript" src="worldmapMouseEvents.js"></script>
</head>
<body onload="draw()">

    Xcoord: <div id="xcoord">0</div>&nbsp;
Ycoord: <div id="ycoord">0</div><br>
Spalte: <div id="column">0</div><br>
Reihe: <div id="row">0</div><br>  

   <canvas id="canvas" 
    width="1100" 
    height="1100"
    style="border: 1px solid black;" 
    onmousemove="getMousePosition()"
    onmousedown="getCell()">
   </canvas>

</body>
</html> 
```

显示网格的文件 worldmap.js

```
function draw(){
  var c=document.getElementById("canvas");
  var ctx=c.getContext("2d");
  var img = new Image();

  img.onload = function(){ 
      ctx.drawImage(img,0,0);
      ctx.stroke();
  };
  img.src = './pics/grid.jpg';
} 
```

这里还有更多的源文件 worldmapMouseEvents.js，它在滚动后表现得很奇怪

```
function getMousePosition() {
 var x = new Number();
 var y = new Number();
 var canvas = document.getElementById("canvas");

 if (event.x != undefined && event.y != undefined) {
    x = event.x;
    y = event.y;
 } else 
 {
    x = event.clientX + document.body.scrollLeft
            + document.documentElement.scrollLeft;
    y = event.clientY + document.body.scrollTop
            + document.documentElement.scrollTop;
 }

 x -= canvas.offsetLeft;
 y -= canvas.offsetTop;

return [x,y];
} 
```

这里计算使用圆圈单击哪个六边形的函数（数学是正确的，它非常简单为 (xCoord - xCenter)^2 + (yCoord -yCenter)^2。如果半径^2 等于或小于它的点在圆圈内。开始的那些数组只是网格的中心坐标。）

```
function getCell(){

var xOddRows = new Array(25, 65, 105, 145, 185, 225, 265, 305, 345, 385, 425, 465, 505, 545, 585, 625, 665, 705, 745, 785, 825, 865, 905, 945, 985);
var yOddRows = new Array(35, 115, 195, 275, 355, 435, 515, 595, 675, 755, 835, 915, 995);

var xEvenRows = new Array(45, 84, 125, 165, 205, 245, 285, 325, 365, 405, 445, 485, 525, 565, 605, 645, 685, 725, 765, 805, 845, 885, 925, 965, 1005);
var yEvenRows = new Array(75, 155, 235, 315, 395, 475, 555, 635, 715, 795, 875, 955);

var position = getMousePosition();
var x = position[0];
var y = position[1];

for(var yOddRowsRunner = 0; yOddRowsRunner < 13; yOddRowsRunner++){
    for( var xOddRowsRunner = 0; xOddRowsRunner < 25; xOddRowsRunner++){
        var circle = (x - xOddRows[xOddRowsRunner])*(x - xOddRows[xOddRowsRunner]) + (y - yOddRows[yOddRowsRunner])*(y - yOddRows[yOddRowsRunner]);
        var radius = (20 * 20);

        if(radius >= circle){
            yPos = (2 * yOddRowsRunner) +1 ;//This is just for nicer output
            return [yPos, xOddRowsRunner];
        }
    }
}

for(var yEvenRowsRunner = 0; yEvenRowsRunner < 12; yEvenRowsRunner++){
    for( var xEvenRowsRunner = 0; xEvenRowsRunner < 25; xEvenRowsRunner++){
        var circle = (x - xEvenRows[xEvenRowsRunner])*(x - xEvenRows[xEvenRowsRunner]) + (y -  yEvenRows[yEvenRowsRunner])*(y -  yEvenRows[yEvenRowsRunner]);
        var radius = (20 * 20);

        if(radius >= circle){
                        yPos = (2 * yEvenRowsRunner) +2; //This is just for nicer output
                return [yPos, xEvenRowsRunner];
        }
    }
}

return null;    
} 
```

所以这是完整的代码，就像我说的，只要你不使用滚动条，它就可以正常工作。我真的很感谢你的帮助——这整件事让我抓狂。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T21:13:58.117

我以前经历过这样的事情；我最终通过使用类似于您尝试过的东西来解决这个问题。我用 .pageX 和 .pageY 替换了 .x 和 .y

```
if (e.pageX || e.pageY) { 
    x = e.pageX;
    y = e.pageY;
} 
```

据我所知，这是因为 .x 和 .y 不获取相对于元素的坐标，而是相对于身体的坐标；换句话说，它们不考虑滚动，而 pageX 和 pageY 可以。

[带有 .x 和 .y 的测试用例](http://jsfiddle.net/jy5yQ/2/)

[带有 .pageX 和 .pageY 的测试用例](http://jsfiddle.net/jy5yQ/1/)

# java - 打印目录树

> ID：10655085
> 
> 赞同：14
> 
> 时间：2012-05-18T15:04:25.883
> 
> 标签：java, algorithm

我必须打印一个目录树（如树命令），例如：

```
 .
 +---A
 |   +---IMAGES
 |       +---BACKUP
 +---ADOKS
 |   +---ROZDZIAL_2
 |   +---ROZDZIAL_3
 |   +---ROZDZIAL_4
 +---AMSC2005
 |   +---AMSC2004
 +---FCCS2005
 |   +---source
 |   +---TMP
 +---LODZ2004
 +---ZAKOPANE2004
 +---DYDAKTYKA
 |   +---DYDAKTYKA_ISI
 |   |   +---COLLS
 |   |   |   +---Q1
 |   |   |   +---Q2
 |   |   |   +---RAZEM
 |   |   |       +---RYSUNKI_COLL1
 |   |   |       +---RYSUNKI_COLL2
 |   |   +---IMAGES
 |   |   +---src
 |   |   +---WYKLAD5
 |   +---DYDAKTYKA_PRG
 |       +---images
 |       +---POMOC
 +---DYDAKTYKA_KST
 |   +---images
 |   +---src
 +---DYDAKTYKA_WPR
     +---images
     +---src 
```

我尝试使用以下代码：

```
private static void getInto(String p, int n) {
    File path = new File(p);
    File[] list = path.listFiles();

    for (int i = 0; i < list.length; i++) {
        if (list[i].isDirectorhowny()) {
            for (int j = 0; j < n; j++)
                if (WHAT HERE?)
                    System.out.print("|  ");
                else
                    System.out.print("   ");

            System.out.println("+--" + list[i].getName().toString());

            getInto(list[i].getPath(), n + 1);
        }
    }
} 
```

我尝试了几个版本，但它仍然无法正常工作。这个怎么做？If应该放在什么条件下？我知道这很简单，但我不能这样做。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-29T23:08:45.393

我就是这样做的。

编码

```
import java.io.File;
public class FileAssert {

/**
 * Pretty print the directory tree and its file names.
 * 
 * @param folder
 *            must be a folder.
 * @return
 */
public static String printDirectoryTree(File folder) {
    if (!folder.isDirectory()) {
        throw new IllegalArgumentException("folder is not a Directory");
    }
    int indent = 0;
    StringBuilder sb = new StringBuilder();
    printDirectoryTree(folder, indent, sb);
    return sb.toString();
}

private static void printDirectoryTree(File folder, int indent,
        StringBuilder sb) {
    if (!folder.isDirectory()) {
        throw new IllegalArgumentException("folder is not a Directory");
    }
    sb.append(getIndentString(indent));
    sb.append("+--");
    sb.append(folder.getName());
    sb.append("/");
    sb.append("\n");
    for (File file : folder.listFiles()) {
        if (file.isDirectory()) {
            printDirectoryTree(file, indent + 1, sb);
        } else {
            printFile(file, indent + 1, sb);
        }
    }

}

private static void printFile(File file, int indent, StringBuilder sb) {
    sb.append(getIndentString(indent));
    sb.append("+--");
    sb.append(file.getName());
    sb.append("\n");
}

private static String getIndentString(int indent) {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < indent; i++) {
        sb.append("|  ");
    }
    return sb.toString();
}
} 
```

结果

```
+--folder1/
|  +--a.txt
|  +--folder2/
|  |  +--b1.txt
|  |  +--b2.txt
|  |  +--b3.txt
|  |  +--folder3/
|  +--folder4/ 
```

单元测试

```
import static org.junit.Assert.*;

import java.io.File;

import org.junit.Before;
import org.junit.Rule;
import org.junit.Test;
import org.junit.rules.TemporaryFolder;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

@RunWith(JUnit4.class)
public class FileAssertTest {

@Rule
public TemporaryFolder temporaryFolder = new TemporaryFolder();
private File folder1;

@Before
public void setUp() {
    folder1 = temporaryFolder.newFolder("folder1");
}

@Test
public void testPrintDirectoryTreeWhenFolderIsEmpty() {
    // Invoke
    String actual = FileAssert.printDirectoryTree(folder1);
    // Verify
    assertEquals("+--folder1/\n", actual);
}

private static final String EXPECTED_FCOF = "" + "+--folder1/\n"
        + "|  +--a.txt\n";

@Test
public void testPrintDirectoryTreeWhenFolderContainsOneFile()
        throws Exception {
    // Setup
    File aFile = new File(folder1, "a.txt");
    assertTrue(aFile.createNewFile());
    // Invoke
    String actual = FileAssert.printDirectoryTree(folder1);
    // Verify
    assertEquals(EXPECTED_FCOF, actual);
}

private static final String EXPECTED_COMPLEX = "+--folder1/\n"
        + "|  +--a.txt\n" + "|  +--folder2/\n" + "|  |  +--b1.txt\n"
        + "|  |  +--b2.txt\n" + "|  |  +--b3.txt\n" + "|  |  +--folder3/\n"
        + "|  +--folder4/\n";

@Test
public void testPrintDirectoryTreeComplex() throws Exception {
    // Setup
    File aFile = new File(folder1, "a.txt");
    assertTrue(aFile.createNewFile());
    File folder2 = new File(folder1, "folder2");
    assertTrue(folder2.mkdir());
    File b1File = new File(folder2, "b1.txt");
    assertTrue(b1File.createNewFile());
    File b2File = new File(folder2, "b2.txt");
    assertTrue(b2File.createNewFile());
    File folder3 = new File(folder2, "folder3");
    assertTrue(folder3.mkdir());
    File b3File = new File(folder2, "b3.txt");
    assertTrue(b3File.createNewFile());
    File folder4 = new File(folder1, "folder4");
    assertTrue(folder4.mkdir());

    // Invoke
    String actual = FileAssert.printDirectoryTree(folder1);
    // Verify
    assertEquals(EXPECTED_COMPLEX, actual);
}

} 
```

[文件](/questions/tagged/file "显示标记为“文件”的问题") [目录](/questions/tagged/directory "显示标记为“目录”的问题") [打印](/questions/tagged/printing "显示标记为“打印”的问题") [漂亮打印](/questions/tagged/pretty-printing "显示标记为“漂亮印刷”的问题")

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-11T16:33:09.297

这是我的解决方案：

（该类是从[那里](https://stackoverflow.com/questions/3522454/java-tree-data-structure#17490124)`TreeNode`复制的。）

```
public static String renderDirectoryTree(TreeNode<FileInformation> tree) {
    List<StringBuilder> lines = renderDirectoryTreeLines(tree);
    String newline = System.getProperty("line.separator");
    StringBuilder sb = new StringBuilder(lines.size() * 20);
    for (StringBuilder line : lines) {
        sb.append(line);
        sb.append(newline);
    }
    return sb.toString();
}

public static List<StringBuilder> renderDirectoryTreeLines(TreeNode<FileInformation> tree) {
    List<StringBuilder> result = new LinkedList<>();
    result.add(new StringBuilder().append(tree.getData().getPath().getFileName()));
    Iterator<TreeNode<FileInformation>> iterator = tree.getChildren().iterator();
    while (iterator.hasNext()) {
        List<StringBuilder> subtree = renderDirectoryTreeLines(iterator.next());
        if (iterator.hasNext()) {
            addSubtree(result, subtree);
        } else {
            addLastSubtree(result, subtree);
        }
    }
    return result;
}

private static void addSubtree(List<StringBuilder> result, List<StringBuilder> subtree) {
    Iterator<StringBuilder> iterator = subtree.iterator();
    //subtree generated by renderDirectoryTreeLines has at least one line which is tree.getData()
    result.add(iterator.next().insert(0, "├── "));
    while (iterator.hasNext()) {
        result.add(iterator.next().insert(0, "│   "));
    }
}

private static void addLastSubtree(List<StringBuilder> result, List<StringBuilder> subtree) {
    Iterator<StringBuilder> iterator = subtree.iterator();
    //subtree generated by renderDirectoryTreeLines has at least one line which is tree.getData()
    result.add(iterator.next().insert(0, "└── "));
    while (iterator.hasNext()) {
        result.add(iterator.next().insert(0, "    "));
    }
} 
```

使用此输出：

```
DirectoryCatalog
├── .git
│   ├── COMMIT_EDITMSG
│   ├── config
│   ├── description
│   ├── HEAD
│   ├── hooks
│   │   ├── applypatch-msg.sample
│   │   ├── commit-msg.sample
│   │   ├── post-commit.sample
│   │   ├── post-receive.sample
│   │   ├── post-update.sample
│   │   ├── pre-applypatch.sample
│   │   ├── pre-commit.sample
│   │   ├── pre-push.sample
│   │   ├── pre-rebase.sample
│   │   ├── prepare-commit-msg.sample
│   │   └── update.sample
│   ├── index
│   ├── info
│   │   └── exclude
│   ├── logs
│   │   ├── HEAD
│   │   └── refs
│   │       ├── heads
│   │       │   └── master
│   │       └── remotes
│   │           └── origin
│   │               └── master
│   ├── objects
│   │   ├── 0b
│   │   │   └── b3fb0a15268c9770220938b1048305429527c7
│   │   ├── 0d
│   │   │   └── e508f20f1cb44ff543cec54ea93a71e5e40d1d
│   │   ├── 10
│   │   │   └── 9c753f3aab08f167f8409e6c9abec27cad6548
│   │   ├── 15
│   │   │   └── 7602556ebd120e656ae8dcd00cb361bfb3ef79
│   │   ├── 16
│   │   │   └── 952a5d1f5f3d15199f3e85b3d895a81990024e
│   │   ├── 1c
│   │   │   └── 5b36cd4d41b9b7d0df46d4184512098186c904
│   │   ├── 20
│   │   │   └── ae5cc82ebbb85f9161d8fd9783905e4cbee72c
│   │   ├── 21
│   │   │   └── e42add0fb2205a75ff621dbeb6d76455816b79
│   │   ├── 23
│   │   │   └── af4eaa4007ca941e562406b7b329c6ba4b395e
│   │   ├── 28
│   │   │   └── 6caf4b7be3ac85a476f3782220fe167a040971
│   │   ├── 2b
│   │   │   └── f6743fb97162e999fb6429510bb8a52114bc31
│   │   ├── 35
│   │   │   └── acd4ab6acb599d4e3244be2a8dc3a0161bcb3c
│   │   ├── 46
│   │   │   └── 1ef7c4db86e0466bb8f1f81dc25f12e3598db6
│   │   ├── 47
│   │   │   └── 4ce7f18330e5295ab1ef2eea66505235819e22
│   │   ├── 4b
│   │   │   └── 825dc642cb6eb9a060e54bf8d69288fbee4904
│   │   ├── 4e
│   │   │   └── 4e047c077c7825a845deebda7f97832cee847b
│   │   ├── 4f
│   │   │   └── 20b118269d71535e469966fdb5fe8a78ae6c9a
│   │   ├── 51
│   │   │   └── 677b295b4cd9931354dd52fb6050015d524fea
│   │   ├── 52
│   │   │   └── 9c34997d8262bd207037f0373703d68d4e1a4e
│   │   ├── 5b
│   │   │   └── 928f45816cc51609861f0930251accbe7de7f9
│   │   ├── 5d
│   │   │   └── 7cdbe029c6eff99c72d09b0a81347b605e77d7
│   │   ├── 61
│   │   │   └── 2b9d86f6ac365ede894e13a6273fd13833f44f
│   │   ├── 67
│   │   │   └── 2209cb240eac0303d6e3b6c7eb04242d661fad
│   │   ├── 6b
│   │   │   ├── c84e19913908f16141677b9d66abdb620350a0
│   │   │   └── d278b63be854ccd3c02b9038ee43366021b1a1
│   │   ├── 6c
│   │   │   └── 9d10e91679988caaee6759d48daf336f28a9a3
│   │   ├── 70
│   │   │   └── 4284c78f1c664c1348af5a784cca55c51fd66a
│   │   ├── 72
│   │   │   └── 1ab5fe4e4226930668048d97331103a92751be
│   │   ├── 78
│   │   │   └── 64a41eaf50f32ae8d2cab1acd200c405215c1a
│   │   ├── 82
│   │   │   └── 36f772feca12b3e301eea50774458a7e77c7fb
│   │   ├── 83
│   │   │   └── bc1e2a1f3187f28d63d7fa334744810d80c20d
│   │   ├── 87
│   │   │   └── 3ce97f624e9a1ae4a1bbf41218d50dc3503d6f
│   │   ├── 8a
│   │   │   └── 0b282aa6885fb573c106b3551f7275c5f17e8e
│   │   ├── 91
│   │   │   └── a7e269e19dfc62e27137a0b57ef3e430cee4fd
│   │   ├── 94
│   │   │   ├── 065a39b0dd7ce05604b96aff84d984493553e2
│   │   │   └── 5cbc994fb2d251437e71edf3a6eb289c5836ec
│   │   ├── 95
│   │   │   └── f481326b62c9adff2a0dad47480e279adb518f
│   │   ├── 9e
│   │   │   └── 1f7de67de38e67479cb8e38ad92d6354838393
│   │   ├── a1
│   │   │   └── e385dff1fb08b7a45ea52af43b22d240f0adab
│   │   ├── a7
│   │   │   └── 8934a5a81d95a85b9c97a3e1c1429186feb83d
│   │   ├── ab
│   │   │   └── 855c3379bdb3e4a22605de58f3438148d6ffe7
│   │   ├── b7
│   │   │   └── 64eafa2ba4e7f8f52a4e96da61b3d77f262d16
│   │   ├── bd
│   │   │   └── 9374662b409bb364779212874e7cf611541c38
│   │   ├── c1
│   │   │   └── f858c163f9c8cb89a145a60e87c9e35c97fb93
│   │   ├── c3
│   │   │   └── 35d07a1078656646ca6e980b468b938106d357
│   │   ├── c5
│   │   │   └── ac562c59d6a0430fa0ccd1fa6318fa5d48604f
│   │   ├── c8
│   │   │   └── f3d9284a65afbff6640da7970664ee2134c85b
│   │   ├── c9
│   │   │   └── 7a8bdb9088d370da7e88784a7a093b971aa23a
│   │   ├── cc
│   │   │   └── a6a5141b614b5e351c7e5b6b677ef09a931786
│   │   ├── d1
│   │   │   └── 76229a9e1d0172f84d060904d171be51f9d0f6
│   │   ├── d3
│   │   │   ├── 2f0a1ba59a0c52d3acc62de1d624fb68423ee3
│   │   │   └── b9dfcb3216a2feab03b1ae96280e3c1c963953
│   │   ├── e0
│   │   │   └── 6d2081865a766a8668acc12878f98b27fc9ea0
│   │   ├── e5
│   │   │   └── 3106578cd8adcd085c5c63c05fc49d5a5a3dbb
│   │   ├── info
│   │   └── pack
│   └── refs
│       ├── heads
│       │   └── master
│       ├── remotes
│       │   └── origin
│       │       └── master
│       └── tags
├── .gitattributes
├── .gitignore
├── .gradle
│   └── 2.2.1
│       └── taskArtifacts
│           ├── cache.properties
│           ├── cache.properties.lock
│           ├── fileHashes.bin
│           ├── fileSnapshots.bin
│           ├── outputFileStates.bin
│           └── taskArtifacts.bin
├── .idea
│   ├── .name
│   ├── compiler.xml
│   ├── copyright
│   │   └── profiles_settings.xml
│   ├── encodings.xml
│   ├── gradle.xml
│   ├── libraries
│   │   ├── Gradle__commons_io_commons_io_2_4.xml
│   │   ├── Gradle__junit_junit_4_11.xml
│   │   └── Gradle__org_hamcrest_hamcrest_core_1_3.xml
│   ├── misc.xml
│   ├── modules.xml
│   ├── scopes
│   │   └── scope_settings.xml
│   ├── uiDesigner.xml
│   ├── vcs.xml
│   └── workspace.xml
├── app
│   ├── app.iml
│   ├── build
│   │   ├── classes
│   │   │   └── main
│   │   │       └── gq
│   │   │           └── baijie
│   │   │               └── catalog
│   │   │                   ├── controllor
│   │   │                   │   ├── FilesScanner$MyFileVisitor.class
│   │   │                   │   └── FilesScanner.class
│   │   │                   ├── entity
│   │   │                   │   └── FileInformation.class
│   │   │                   ├── Main.class
│   │   │                   └── util
│   │   │                       ├── FileAssert.class
│   │   │                       ├── Hash.class
│   │   │                       ├── HEX.class
│   │   │                       ├── Printer$1.class
│   │   │                       ├── Printer$DirectoryTreeRender.class
│   │   │                       ├── Printer.class
│   │   │                       └── TreeNode.class
│   │   ├── dependency-cache
│   │   ├── resources
│   │   │   └── main
│   │   └── tmp
│   │       └── compileJava
│   ├── build.gradle
│   └── src
│       ├── main
│       │   └── java
│       │       └── gq
│       │           └── baijie
│       │               └── catalog
│       │                   ├── controllor
│       │                   │   └── FilesScanner.java
│       │                   ├── entity
│       │                   │   └── FileInformation.java
│       │                   ├── Main.java
│       │                   └── util
│       │                       ├── FileAssert.java
│       │                       ├── Hash.java
│       │                       ├── HEX.java
│       │                       ├── Printer.java
│       │                       └── TreeNode.java
│       └── test
│           └── java
├── DirectoryCatalog.iml
├── gradle
│   └── wrapper
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
├── gradlew
├── gradlew.bat
├── LICENSE
├── README.md
├── settings.gradle
└── temp
    ├── 150110161006.txt
    ├── 150110173453.txt
    ├── 150110175353.txt
    ├── 150111111311.txt
    ├── 150111112500.txt
    ├── 150111113411.txt
    ├── 150111155619.txt
    ├── 150111161958.txt
    ├── 150111162230.txt
    ├── 150111162632.txt
    ├── 150111163225.txt
    ├── 150111163330.txt
    ├── 150111164526.txt
    ├── 150111205412.txt
    ├── 150111210322.txt
    ├── 150111210506.txt
    ├── 150111210927.txt
    ├── 150111211249.txt
    ├── 150111211321.txt
    ├── 150111220750.txt
    ├── 150111220822.txt
    ├── 150111221437.txt
    ├── 150111221842.txt
    ├── 150111222437.txt
    ├── 150111234344.txt
    ├── 150111234433.txt
    └── 150112000034.txt 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-18T15:09:59.407

You need to print out "|" whenever on the corresponding level you are *not* processing the last entry, but one of the entries before the last. You need to know this for every level separately, so you could add a bit mask or a string (say) as an extra argument to 'getInto'.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T15:23:58.593

```
import java.io.File;

public class MainEntry {
public static void main(String[] args) {
    walkin(new File("/home/user")); //Replace this with a suitable directory
}

/**
 * Recursive function to descend into the directory tree and find all the files 
  @param dir A file object defining the top directory
 **/
public static void walkin(File dir) {

    File listFile[] = dir.listFiles();
    if (listFile != null) {
        for (int i=0; i<listFile.length; i++) {
            if (listFile[i].isDirectory()) {
              System.out.println("|\t\t");  
              walkin(listFile[i]);
            } else {

                System.out.println("+---"+listFile[i].getName().toString());

            }
        }
    }
} 
```

}

可以正常工作..逻辑是正确的

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-24T02:08:12.393

[从这里](https://github.com/gt4dev/yet-another-tree-structure/tree/master/java/src/com/tree)引用和修改树结构的功能：

```
import org.apache.commons.io.FileUtils;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;

public class TreeNode<T> implements Iterable<TreeNode<T>> {

    public T data;
    public TreeNode<T> parent;
    public List<TreeNode<T>> children;

    public boolean isRoot() {
        return parent == null;
    }

    public boolean isLeaf() {
        return children.size() == 0;
    }

    private List<TreeNode<T>> elementsIndex;

    public TreeNode(T data) {
        this.data = data;
        this.children = new LinkedList<TreeNode<T>>();
        this.elementsIndex = new LinkedList<TreeNode<T>>();
        this.elementsIndex.add(this);
    }

    public TreeNode<T> addChild(T child) {
        TreeNode<T> childNode = new TreeNode<T>(child);
        childNode.parent = this;
        this.children.add(childNode);
        this.registerChildForSearch(childNode);
        return childNode;
    }

    public int getLevel() {
        if (this.isRoot())
            return 0;
        else
            return parent.getLevel() + 1;
    }

    private void registerChildForSearch(TreeNode<T> node) {
        elementsIndex.add(node);
        if (parent != null)
            parent.registerChildForSearch(node);
    }

    public TreeNode<T> findTreeNode(Comparable<T> cmp) {
        for (TreeNode<T> element : this.elementsIndex) {
            T elData = element.data;
            if (cmp.compareTo(elData) == 0)
                return element;
        }

        return null;
    }

    @Override
    public String toString() {
        return data != null ? data.toString() : "[data null]";
    }

    @Override
    public Iterator<TreeNode<T>> iterator() {
        TreeNodeIter<T> iter = new TreeNodeIter<T>(this);
        return iter;
    }

    public static TreeNode<File> createDirTree(File folder) {
        if (!folder.isDirectory()) {
            throw new IllegalArgumentException("folder is not a
                    Directory");
        }
        TreeNode<File> DirRoot = new TreeNode<File>(folder);
        for (File file : folder.listFiles()) {
            if (file.isDirectory()) {
                appendDirTree(file, DirRoot);
            } else {
                appendFile(file, DirRoot);
            }
        }
        return DirRoot;
    }

    public static void appendDirTree(File folder, TreeNode<File> DirRoot)
    {
        DirRoot.addChild(folder);
        for (File file : folder.listFiles()) {
            if (file.isDirectory()) {
                appendDirTree(file,
                        DirRoot.children.get(DirRoot.children.size() - 1));
            } else {
                appendFile(file,
                        DirRoot.children.get(DirRoot.children.size() - 1));
            }
        }
    }

    public static void appendFile(File file, TreeNode<File> filenode) {
        filenode.addChild(file);
    }

    public static String renderDirectoryTree(TreeNode<File> tree) {
        List<StringBuilder> lines = renderDirectoryTreeLines(tree);
        String newline = System.getProperty("line.separator");
        StringBuilder sb = new StringBuilder(lines.size() * 20);
        for (StringBuilder line : lines) {
            sb.append(line);
            sb.append(newline);
        }
        return sb.toString();
    }

    public static List<StringBuilder>
        renderDirectoryTreeLines(TreeNode<File>
                tree) {
            List<StringBuilder> result = new LinkedList<>();
            result.add(new StringBuilder().append(tree.data.getName()));
            Iterator<TreeNode<File>> iterator = tree.children.iterator();
            while (iterator.hasNext()) {
                List<StringBuilder> subtree =
                    renderDirectoryTreeLines(iterator.next());
                if (iterator.hasNext()) {
                    addSubtree(result, subtree);
                } else {
                    addLastSubtree(result, subtree);
                }
            }
            return result;
                }

    private static void addSubtree(List<StringBuilder> result,
            List<StringBuilder> subtree) {
        Iterator<StringBuilder> iterator = subtree.iterator();
        //subtree generated by renderDirectoryTreeLines has at least one
        line which is tree.getData()
            result.add(iterator.next().insert(0, "├── "));
        while (iterator.hasNext()) {
            result.add(iterator.next().insert(0, "│   "));
        }
    }

    private static void addLastSubtree(List<StringBuilder> result,
            List<StringBuilder> subtree) {
        Iterator<StringBuilder> iterator = subtree.iterator();
        //subtree generated by renderDirectoryTreeLines has at least
        one
            line which is tree.getData()
            result.add(iterator.next().insert(0, "└── "));
        while (iterator.hasNext()) {
            result.add(iterator.next().insert(0, "    "));
        }
    }

    public static void main(String[] args) {
        File file = new File("./");
        TreeNode<File> DirTree = createDirTree(file);
        String result = renderDirectoryTree(DirTree);
        System.out.println(result);
        try {
            File newTextFile = new File("./DirectoryTree.txt");

            FileWriter fw = new FileWriter(newTextFile);
            fw.write(result);
            fw.close();

        } catch (IOException iox) {
            iox.printStackTrace();
        }

    }
} 
```

使用此输出：

```
.
├── .DS_Store
├── .idea
│   ├── compiler.xml
│   ├── dictionaries
│   │   └── yankai01.xml
│   ├── encodings.xml
│   ├── misc.xml
│   └── workspace.xml
├── data_exploring.iml
├── pom.xml
├── src
│   ├── .DS_Store
│   ├── main
│   │   ├── .DS_Store
│   │   ├── java
│   │   │   ├── FileAssert.java
│   │   │   ├── HttpUtils.java
│   │   │   ├── QuerySaveToCsv.java
│   │   │   ├── SampleData.java
│   │   │   ├── SampleIterating.java
│   │   │   ├── SampleSearching.java
│   │   │   ├── TreeNode.java
│   │   │   └── TreeNodeIter.java
│   │   └── resources
│   └── test
│       └── java
└── target
    ├── classes
    │   ├── FileAssert.class
    │   ├── HttpUtils.class
    │   ├── QuerySaveToCsv.class
    │   ├── SampleData.class
    │   ├── SampleIterating.class
    │   ├── SampleSearching$1.class
    │   ├── SampleSearching.class
    │   ├── TreeNode.class
    │   ├── TreeNodeIter$ProcessStages.class
    │   └── TreeNodeIter.class
    └── generated-sources
        └── annotations 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-22T13:07:21.620

这是我的代码。这是工作

```
package DIRS;

import java.io.File;

public class LISTDIR
{
    public static void main(String[] args)
    {
        String path = System.getProperty("user.dir")+File.separator;

        File file[] = new File(path).listFiles();

        for(int i = 0 ; i < file.length ; i++)
        {
            if(file[i].isDirectory())
            {
                System.out.println("->"+file[i].getName());
                new LISTDIR().listfiles(file[i],"--");
            }
            else
            {
                System.out.println("-> "+file[i].getName());
            }
        }
    }

    public void listfiles(File f,String sprtr)
    {
        File file[] = f.listFiles();
        for(int i = 0 ; i < file.length ; i++)
        {
            if(file[i].isDirectory())
            {
                System.out.println(sprtr+file[i].getName());

                new LISTDIR().listfiles(file[i],"--"+sprtr);
            }
            else
            {
                System.out.println(sprtr+file[i].getName());
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-18T15:19:40.983

这样想——

```
procedure printOutput(file, depth):
    print "|   " depth times;
    print "+---" + file name;
    print new line
    if(file is a directory):
        for(each file inside file, say innerFile):
            call printOutput(innerFile, depth + 1); 
```

希望有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-21T07:01:05.797

```
 import java.io.File;

  public class Tree
  {
    public static void main(String[] args) throws Exception
    {
      File folder = new File((args.length >= 1 && args[0].length() > 0)
        ? args[0]
        : ".");

      if (!folder.isDirectory())
      {
        throw new IllegalArgumentException("Invalid directory: " + folder.getName());
      }

      int level = 0;
      System.out.println(renderFolder(folder, level, new StringBuilder(), false));
    }

    private static StringBuilder renderFolder(File folder, int level, StringBuilder sb, boolean isLast)
    {
      indent(sb, level, isLast).append("[D] ").append(folder.getName()).append("\n");

      File[] objects = folder.listFiles();

      for (int i = 0; i < objects.length; i++)
      {
        boolean last = ((i + 1) == objects.length);

        if (objects[i].isDirectory())
        {
          renderFolder(objects[i], level + 1, sb, last);
        }
        else
        {
          renderFile(objects[i], level + 1, sb, last);
        }
      }

      return sb;
    }

    private static StringBuilder renderFile(File file, int level, StringBuilder sb, boolean isLast)
    {
      return indent(sb, level, isLast).append("--- ").append(file.getName()).append("\n");
    }

    private static StringBuilder indent(StringBuilder sb, int level, boolean isLast)
    {
      for (int i = 1; i < level; i++)
      {
        sb.append("|  ");
      }

      if (level > 0)
      {
        sb.append(isLast
          ? "`-"
          : "|-");
      }

      return sb;
    }

  }

  [D] .
  |-[D] classes
  |  |-[D] .data
  |  |  `---- Play.cdi_javac
  |  |---- ArrayListTest$Pair.class
  |  |---- ArrayListTest.class
  |  |---- ArrayTest.class
  |  |-[D] fruit
  |  |  |---- Apple.class
  |  |  `---- GrannySmith.class
  |  |---- IfTest.class
  |  |-[D] interview
  |  |  |---- Q1.class
  |  |  |---- Q2.class
  |  |  |---- Q3.class
  |  |  |---- Q3Sub.class
  |  |  |---- Q9Sub.class
  |  |  `---- Q9Super.class
  |  |---- IntOverflowTest.class
  |  |---- LinkedMapTest.class
  |  |-[D] log
  |  |  `---- Logger.class
  |  |---- log.properties
  |  |---- StringCaseTest.class
  |  |-[D] test
  |  |  |-[D] cache
  |  |  |  |-[D] test1
  |  |  |  |  |---- Cache.class
  |  |  |  |  |---- CacheEntry.class
  |  |  |  |  `---- RevisedCacheTest.class
  |  |  |  |-[D] test2
  |  |  |  |  |---- Cache.class
  |  |  |  |  |---- Log.class
  |  |  |  |  `---- RevisedCacheTest.class
  |  |  |  `-[D] test3
  |  |  |  |  |---- ConcurrentCache.class
  |  |  |  |  `---- ConcurrentCacheTest.class
  |  |  |---- Test.class
  |  |  `---- Test2.class
  |  |---- Test.class
  |  |---- Test2.class
  |  `---- ZipTest.class
  `---- Play.jpr 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-16T00:00:31.797

这是我的解决方案：

```
import java.io.File;

public class MostrarArbol {

    public static void main(String args[]) {
        File carpeta = new File(args[0]);
        // File carpeta = new File(".");
        if (!carpeta.exists()) {
            System.out.println(args[0] + " NO existe.");
            return;
        }
        imprimeArbol(carpeta, "");
    }

    public static void imprimeArbol(File carpeta, String tabulador) {
        File contenido[] = carpeta.listFiles();
        if (contenido != null) {
            for (int i = 0; i < contenido.length; i++) 
                if (contenido[i].isDirectory()) {
                    System.out.println(tabulador + "|-" + contenido[i].getName());
                    imprimeArbol(contenido[i], tabulador + "|  ");
                } else {
                    System.out.println(tabulador + "+-" + contenido[i].getName().toString());
                }
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-23T11:58:13.627

我正在用@tan70 编写的最多更新的解决方案测试解决方案，但是它在打印我的主目录时导致空指针异常。我做了一些调查，发现 listFiles() 可以返回 null。

公共文件[] listFiles()

返回一个抽象路径名数组，表示此抽象路径名表示的目录中的文件。

如果此抽象路径名不表示目录，则此方法返回**null**。否则返回一个 File 对象数组，一个对应于目录中的每个文件或目录

```
/**
 * Pretty print the directory tree and its file names.
 *
 * @param path
 * @return
 */
public static String printDirectoryTree(String path) {
    File folder = new File(path);
    if (!folder.isDirectory()) {
        throw new IllegalArgumentException("folder is not a Directory");
    }
    int indent = 0;
    StringBuilder sb = new StringBuilder();
    printDirectoryTree(folder, indent, sb);
    return sb.toString();
}

private static void printDirectoryTree(File folder, int indent, StringBuilder sb) {

    if (folder != null && folder.isDirectory() && folder.listFiles() != null) {
        sb.append(getIndentString(indent));
        sb.append("+--");
        sb.append(folder.getName());
        sb.append("/");
        sb.append("\n");

        for (File file : folder.listFiles()) {
            if (file.isDirectory()) {
                printDirectoryTree(file, indent + 1, sb);
            } else {
                printFile(file, indent + 1, sb);
            }
        }
    }
}

private static void printFile(File file, int indent, StringBuilder sb) {
    sb.append(getIndentString(indent));
    sb.append("+--");
    if (file != null) {
        sb.append(file.getName());
    } else {
        sb.append("null file name");
    }
    sb.append("\n");
}

private static String getIndentString(int indent) {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < indent; i++) {
        sb.append("|  ");
    }
    return sb.toString();
} 
```

# asp.net-mvc-3 - asp.net mvc 3 视图通过 foreach 循环模型

> ID：10655091
> 
> 赞同：1
> 
> 时间：2012-05-18T15:04:41.687
> 
> 标签：asp.net-mvc-3, foreach

我有一个与模型相关的视图：

```
@model IEnumerable<AJA.Models.DB.Article> 
```

我想做的就是遍历模型来做一些逻辑：

```
@foreach (var item in Model)
{
    var article = item.article1;
    if (article.Length > 500)
    {
        article = article.Substring(0, 500) + "...";
    } 
```

但是，当我执行视图时，错误：

```
exception: System.NullReferenceException: The reference of the object is not defined 
to an instance of the object. 
```

如果我`@Html.DisplayFor(modelItem => item.article1)`一个人做，我可以得到文章，但我想事先做业务逻辑。

它出什么问题了 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:08:32.003

首先在您的视图中，**三重检查**以确保您正确使用您的视图模型。

像这样的东西应该在你的视图的顶部：

```
@model IEnumerable<AJA.Models.DB.Article> 
```

在您的控制器中设置断点并使用 F10 一直向下钻取到您的视图，您将能够检查视图的 foreach 循环中的对象。

沿着这条线的某个地方，一个对象是空的，你希望它有一些东西。弄清楚那个对象是什么。

```
@foreach (var item in Model)
{
    var article = item.article1; //article1 may be null. Check it!
    if (article.Length > 500)
    {
        article = article.Substring(0, 500) + "...";
    }
} 
```

# javascript - 如何在 Smart Mobile Studio 的设计时使用事件？

> ID：10655097
> 
> 赞同：6
> 
> 时间：2012-05-18T15:05:10.993
> 
> 标签：javascript, delphi, smart-mobile-studio

我在这里错过了什么吗？两天前我购买了 Smart Mobile Studio，并尝试了它的功能。我希望它至少会模仿德尔福的事件模型。不？

我是否应该能够单击控件并访问事件选项卡（就像我们对属性所做的那样），并添加一个 delphi 样式的事件，例如按钮的 OnClick （然后将其转换为 javascript 事件） . 我不仅希望在我的表单单元中看到 OnClick 事件，而且还希望看到按钮。似乎也没有对按钮的引用。

我错过了什么？

我知道如何在运行时做到这一点，但我仍然无法在设计时弄清楚如何做到这一点。有人可以帮帮我吗？

运行...

```
unit Form1;

interface

uses w3system, w3ctrls, w3forms, w3application;

type
 TForm1=class(TW3form)
 private
 { Private methods }
 FButton : TW3Button;
 protected
 { Protected methods }
 Procedure InitializeObject;override;
 Procedure FinalizeObject;override;
 Procedure StyleTagObject;override;
 end;

Implementation

Procedure TForm1.InitializeObject;
 Begin
 inherited;
 FButton:=TW3Button.Create(Self);
 FButton.Caption:=’Load’;
FButton.OnClick:=procedure (Sender : TObject)
 begin
 //do something
 end;
 End;

Procedure TForm1.FinalizeObject;
 Begin
 inherited;
 End;

Procedure TForm1.StyleTagObject;
 Begin
 inherited;
 StyleClass:=’TW3CustomForm’;
 End;

end. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T08:59:24.897

在撰写本文时，智能 IDE 不支持委托（或事件对象）的代码生成。但这是计划添加的。

重要的是要了解 smart 不会试图成为另一个 delphi。这将通过施加限制来破坏对象 pascal 和 javascript 的丰富性。相反，该产品的核心功能是用 object pascal 替换 javascript - 这反过来又增加了 javascript（接口、继承等内容）。

目前，编写移动应用程序有点像一门黑艺术。Freepascal 用户仅通过代码完成工作，C# 开发人员（尽管我们曾经连接到 xcode 设计器 .nib 文件）和 JavaScript 开发人员自然也是如此。智能手机虽然确实需要您编写更多代码，但仍然远远领先于普通的 javascript 开发人员。

节省时间的因素是您不必全部使用 javascript 编写，而是使用您已经了解和喜爱的语言编写。

# java - 添加到 ListModel 后如何更改 JList 中元素的视图？

> ID：10655101
> 
> 赞同：0
> 
> 时间：2012-05-18T15:05:29.893
> 
> 标签：java, arrays, swing, jlist

将`JList`数组（-s）添加到`ListModel`. 需要：

```
2.0 11.0 1.0 
```

有：

```
[D@198dfaf 
```

我真的不想在添加之前和之后使用“数组到字符串”转换`JList`..有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:23:16.763

您可以为此目的使用[ListCellRenderer 。](http://docs.oracle.com/javase/7/docs/api/javax/swing/ListCellRenderer.html)它允许您返回一个组件，该组件代表您在 JList 模型中放入的值。

默认的 CellRenderer 是[DefaultListCellRenderer](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultListCellRenderer.html)，它基本上是 JLabel 的扩展，并且已经设置了所有正确的外观设置。因此，您可以扩展 DefaultListCellRenderer 并在返回值上设置数组文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:49:13.227

作为更改渲染器或覆盖的替代方法，`toString()`您可以考虑为添加到列表中的对象添加视图适配器。类似于此简化示例的内容：

```
class ArrayListViewAdapter {
    Object[] list;

    public ArrayListViewAdapter(Object[] list){
        this.list = list;
    }

    @Override
    public String toString(){
        return StringUtils.join(list, " ");
    }
} 
```

然后将项目添加到模型中：

```
model.addElement(new ArrayListViewAdapter(new Integer[]{1, 2, 3})); 
```

# html - 如何在主要内容之后有一个左右侧边栏？

> ID：10655104
> 
> 赞同：2
> 
> 时间：2012-05-18T15:05:45.190
> 
> 标签：html, css

我发现使用大量负百分比边距可以实现在 DOM 中的主要内容*之后*有左侧和侧边栏，但仍然让它们出现在正确的位置：

（DOM 顺序固定如下）

```
<div id="content">The main content</div>
<div id="left">Leftist</div>
<div id="right">Rightist</div>
<div id="footer">Footer</div> 
```

只有我能想到的提供左右侧边栏的 CSS 如下：

```
#content { 
    background: green; 
    float: right; width: 60%; margin-right: 20%; margin-left: -80%;
}
#right { 
    background: blue;
    width: 20%; float: right;
}
#left {
    background: red;
    width: 20%; float: left;
}
#footer {
    background: gray;
    clear: both;
} 
```

但我不完全确定这是实现这一目标的首选方式，但它确实有效，那么它有什么问题吗？（以上[可在 jsfiddle.net 中查看](http://jsfiddle.net/DryJE/6/)）

那么有没有其他方法可以在带有CSS的主要#content之后有一个#left和#right侧边栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:24:40.407

如果您使用绝对定位，它将允许您将它们放置在您需要的任何地方，而不会产生负边距。只需使用`left: X;`和`right: X;`设置页面上的位置，其中 X 是您的值和测量单位。但是，这样做需要您声明内容的高度，以便您知道放置页脚的高度。

# sql - 查询数据，尽量避免使用Union

> ID：10655105
> 
> 赞同：1
> 
> 时间：2012-05-18T15:05:48.080
> 
> 标签：sql, sql-server, tsql

我有 3 张桌子：

```
organiz: pk = org_id
individu: pk = ind_id
address: pk = address_id 
```

两者都`organiz`包含`individu`一个`address_id`. 中的每一行都`individu`包含一个`org_id`. 基本上，“个人”属于“组织”。我想要一个查询，让我知道`address_id`每个人都有特定的`org_id`.

这是我以前尝试过的，但它只给了我`address_id`所有个人的。

```
select
    a.Address_id,
    a.Address_Line_1,
    a.Address_Line_2,
    a.Address_City,
    a.Address_State_Code,
    a.Address_Zip,
    o.Phone_Number

from
    address a inner join individu i on a.address_id = i.address_id
    inner join organiz o on o.org_id = i.org_id
where
    a.Address_Line_1 is not null
    and o.org_id = 808474 
```

为了让它工作，我使用了一个联合来查询组织的地址 ID：

```
select
    a.Address_id,
    a.Address_Line_1,
    a.Address_Line_2,
    a.Address_City,
    a.Address_State_Code,
    a.Address_Zip,
    o.Phone_Number

from
    address a inner join individu i on a.address_id = i.address_id
    inner join organiz o on o.org_id = i.org_id
where
    a.Address_Line_1 is not null
    and o.org_id = 808474
UNION
select
    a.Address_id,
    a.Address_Line_1,
    a.Address_Line_2,
    a.Address_City,
    a.Address_State_Code,
    a.Address_Zip,
    o.Phone_Number
from 
    address a inner join organiz o on a.address_id = o.address_id
where
    o.org_id = 808474
    and a.Address_Line_1 is not null 
```

是否有另一种方法可以避免使用 UNION？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:09:32.057

是的，你可以。

```
Select StuffYouWant 
From Address 
WHERE EXISTS (SELECT * 
                FROM organiz 
                WHERE Address.address_id = organiz.address_id 
                    AND SEARCH_CRITERIA) 
    OR EXISTS (SELECT * 
                FROM individu
                WHERE Address.address_id = individu.address_id 
                AND SEARCH_CRITERIA) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:11:20.630

您可以将其推`UNION`送到内部查询中：

```
SELECT  a.*
FROM    address
WHERE   id IN
        (
        SELECT  ad.address_id
        FROM    organiz o
        CROSS APPLY
                (
                SELECT  address_id
                UNION ALL
                SELECT  i.address_id
                FROM    individu i
                WHERE   i.org_id = o.org_id
                ) ad
        WHERE   o.org_id = @myorgid
        ) 
```

# php - 通过将参数传递给codeigniter中的构造函数来加载库

> ID：10655107
> 
> 赞同：18
> 
> 时间：2012-05-18T15:05:59.733
> 
> 标签：php, codeigniter

我正在使用代码点火器。我在代码点火器中定义了一个库，并在其构造函数中期望一个参数。这是我的库代码 -

```
################# [My Library Code Test_lib.php ] ########################
<?php
class Test_lib
{
var $params;
public function __construct($params)
{
    $this->params = $params;
    echo $this->params;
}
} 
```

在 codeigniter 文档中，提到您可以在第二个参数中传递参数。所以，我从控制器初始化它如下 -

```
<?php
class Test_cont extends CI_Controller {
function __construct()
{
    parent::__construct();
}

function test()
{
    $params = "abc";
    $this->load->library("test_lib",$params);
}
} 
```

我收到以下错误 -

遇到 PHP 错误 严重性：警告消息：缺少参数.....

请协助。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-18T15:15:26.273

`$params`必须是一个数组。[从文档中](http://codeigniter.com/user_guide/general/creating_libraries.html)：

> 在库加载函数中，您可以通过第二个参数将数据作为数组动态传递，并将其传递给您的类构造函数：
> 
> ```
> $params = array('type' => 'large', 'color' => 'red');
> 
> $this->load->library('Someclass', $params); 
> ```

在你的情况下，你想做这样的事情：

```
function test()
{
    $params[] = "abc"; // $params is an array
    $this->load->library("test_lib",$params);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T16:19:37.093

您只需要将**$params**从变量修改为数组。希望这会奏效

```
function test()
{
    $params = array(1=>'abc');
    $this->load->library('test_lib',$params);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-08-23T01:56:39.737

类 Test_lib

```
################# [My Library Code Test_lib.php ] ########################
<?php

class Test_lib {

  var $parameter1;
  var $parameter2;
  var $parameter3;

  public function __construct($parameters) {

    /* array assoc */
    $this->parameter1 = $parameters['argument1'];
    $this->parameter2 = $parameters['argument2'];
    $this->parameter3 = $parameters['argument3'];

    /* object */
    $oParameters = (object) $parameters;

    $this->parameter1 = $oParameters->argument1;
    $this->parameter2 = $oParameters->argument2;
    $this->parameter3 = $oParameters->argument3;

  }

} 
```

类控制器

```
<?php

  class Test_cont extends CI_Controller {

    function __construct() {
      parent::__construct();
    }

    function test() {

      $data = array( // array assoc
        'argument1' => 'String 1',
        'argument2' => 'String 2',
        'argument3' => 'String 3'
      );

      $this->load->library("Test_lib", $data);

      return $this->Test_lib->parameter1;

    }

    echo $this->test(); // String 1

  } 
```

# visual-studio-2010 - 如何持久设置源代码管理插件（VS2P4）？

> ID：10655108
> 
> 赞同：0
> 
> 时间：2012-05-18T15:06:01.280
> 
> 标签：visual-studio-2010

*我在Options->Source Control->Plug-in Selection*列表中有以下 Source Control 插件：
* None
* Visual Studio Team Foundation Server
* VS2P4

**它适用于当前会话**以选择*VS2P4*并将其连接设置为*Use P4Config*。
但在 VisualStudio 重新启动后，选择将恢复为*None*。

如何**持久**设置*VS2P4*并*改用 P4Config*？
我不需要*Visual Studio Team Foundation Server*，所以如果可以从列表中删除它，我可以做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:00:44.153

这是 VS2P4 中的一个错误，已在以后的版本中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:56:39.080

您可能在解决方案中有绑定。如果“文件”菜单中有“源代码管理”项，请尝试“更改源代码管理”选项

# java - 简单的树查看器库

> ID：10655111
> 
> 赞同：0
> 
> 时间：2012-05-18T15:06:10.817
> 
> 标签：java, image, treeview

我正在寻找一个简单的树查看器。它应该生成带有节点和关系的树的图像（如 png）。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:10:21.613

Build a [JTree](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTree.html) with your data. Then search for how to get an image from Swing components like [here](https://stackoverflow.com/questions/5853879/java-swing-obtain-image-of-jframe).

![](../Images/91927bfcd7050fcdc55570419e2d194a.png)

# c# - 如何将波斯日历日期字符串转换为 DateTime？

> ID：10655116
> 
> 赞同：17
> 
> 时间：2012-05-18T15:06:44.133
> 
> 标签：c#, datetime

我使用这些代码来转换当前日期时间并减去用户在文本框中键入的日期时间。但是在转换时会出错。

```
PersianCalendar p = new System.Globalization.PersianCalendar();
DateTime date = new DateTime();
date = DateTime.Parse(DateTime.Now.ToShortDateString());
int year = p.GetYear(date);
int month = p.GetMonth(date);
int day = p.GetDayOfMonth(date);
string str = string.Format("{0}/{1}/{2}", year, month, day);
DateTime d1 = DateTime.Parse(str);
DateTime d2 = DateTime.Parse(textBox9.Text);
string s = (d2 - d1).ToString().Replace(".00:00:00", "");
textBox10.Text = (d2 - d1).ToString().Replace(".00:00:00",""); 
```

在将 datetime 从 string 转换为 date time 时，此行将报错：`DateTime d1 = DateTime.Parse(str);`

请帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T15:16:30.213

无需在这里解析日期。

**编辑：**

最初我只想用这个答案指出 OP 处理中的错误。但我认为完整的答案会更好（尽管有延迟:)）而且是的，我知道中间日期表示看起来不像波斯日期。但这不是所需要的。此代码在当前日期和用户输入的日期之间给出了适当的差异。

```
string userInput = "1394/02/31";
System.DateTime date = System.DateTime.Today;
System.Globalization.PersianCalendar p = new System.Globalization.PersianCalendar();

int year = p.GetYear(date);
int month = p.GetMonth(date);
int day = p.GetDayOfMonth(date);
System.DateTime currentDate = new System.DateTime(year, month, 1);
currentDate = currentDate.AddDays(day - 1);

// validation omitted
System.String[] userDateParts = userInput.Split(new[] { "/" }, System.StringSplitOptions.None);
int userYear = int.Parse(userDateParts[0]);
int userMonth = int.Parse(userDateParts[1]);
int userDay = int.Parse(userDateParts[2]);
System.DateTime userDate = new System.DateTime(userYear, userMonth, 1);
userDate = userDate.AddDays(userDay - 1);

System.TimeSpan difference = currentDate.Subtract(userDate); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-19T09:34:53.313

您的实际问题似乎在于解析用户以波斯日历格式输入的日期。因此，如果用户输入`1391/2/31`您希望能够解析它。今天（2012 年 5 月 19 日）是`1391/2/30`你终于想要显示类似`1 day remaining`.

这个问题以前[有人问过](https://stackoverflow.com/questions/5811170)。但是，那里接受的答案只是尝试使用

```
string persianDate = "1390/02/07";
CultureInfo persianCulture = new CultureInfo("fa-IR");
DateTime persianDateTime = DateTime.ParseExact(persianDate, 
    "yyyy/MM/dd", persianCulture); 
```

这不适用于像`1391/2/31`. 所以我认为你必须自己实现解析。

在不实施任何错误检查的情况下，并假设用户始终使用`yyyy/mm/dd`您可以使用的格式：

```
// Convert Persian Calendar date to regular DateTime
var persianDateMatch = System.Text.RegularExpressions.Regex.Match(
    persianTargetTextBox.Text, @"^(\d+)/(\d+)/(\d+)$");
var year = int.Parse(persianDateMatch.Groups[1].Value);
var month = int.Parse(persianDateMatch.Groups[2].Value);
var day = int.Parse(persianDateMatch.Groups[3].Value);
var pc = new System.Globalization.PersianCalendar();
var target = pc.ToDateTime(year, month, day, 0, 0, 0, 0);

var difference = target - DateTime.Today;
differenceLabel.Text = difference.TotalDays.ToString("0"); 
```

您需要检查正则表达式是否真的找到了任何匹配项。您还必须检查是否`pc.ToDateTime`不会引发错误。不幸的是，似乎没有像`DateTime.TryParse`波斯历那样的东西。

无论如何，您不需要将今天解析为波斯日历，您只需要解析用户输入即可。

您可能还对[Farsi Library - Working with Dates, Calendars, and DatePickers](http://www.codeproject.com/Articles/13664/Farsi-Library-Working-with-Dates-Calendars-and-Dat)感兴趣，尽管这篇文章已经很老了（2007 年）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-18T15:17:39.963

只需使用类`ToDateTime`上的方法`PersianCalendar`：

```
PersianCalendar p = new PersianCalendar();
DateTime now = DateTime.Now;
DateTime dateT = p.ToDateTime(now.Year, now.Month, now.Day, 0, 0, 0, 0); 
```

然后以该格式获取您的字符串，只需执行以下操作：

```
string str = dateT.ToShortDateString(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-10T20:10:25.293

我解决了那个问题。这是因为某些月份的异常，所以如果你想减去两个日期时间，你应该将两者都转换为公历，然后你可以减去它们并查看结果。

这是代码：

```
PersianCalendar p = new PersianCalendar();
        string PersianDate1 = textBox1.Text;
        string[] parts = PersianDate1.Split('/', '-');
        DateTime dta1 = p.ToDateTime(Convert.ToInt32(parts[0]), Convert.ToInt32(parts[1]), Convert.ToInt32(parts[2]), 0, 0, 0, 0);
        string PersianDate2 = textBox2.Text;
        string[] parts2 = PersianDate2.Split('/', '-');
        DateTime dta2 = p.ToDateTime(Convert.ToInt32(parts2[0]), Convert.ToInt32(parts2[1]), Convert.ToInt32(parts2[2]), 0, 0, 0, 0);
        string s = (dta2 - dta1).ToString().Replace(".00:00:00", "");
        textBox3.Text = s; // Show the result into the textbox 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-18T15:29:19.477

这里是文档是你的朋友的地方：

[波斯日历类](https://msdn.microsoft.com/en-us/library/system.globalization.persiancalendar.aspx)

[DateTime 构造函数（Int32、Int32、Int32、日历）](https://msdn.microsoft.com/en-us/library/sk65c9c1.aspx)

这是您需要的确切代码：

```
PersianCalendar p = new System.Globalization.PersianCalendar();
DateTime today = DateTime.Today;
DateTime pDate = new DateTime(p.GetYear(today), p.GetMonth(today), p.GetDayOfMonth(today), p);
DateTime d2 = DateTime.Parse(textBox9.Text);
// THIS NEEDS TO BE EXPLAINED
textBox10.Text = (d2 - pDate).ToString().Replace(".00:00:00",""); 
```

最终，你想做什么？你期望的结果是`textBox10`什么？如果您想要两个日期之间的天数，那么只需执行此操作`(d2 - pDate).ToString("d")`，您就会得到天数的差异。也许如果您进一步解释您要做什么，而不是您要如何做，我们可能会进一步帮助您。

编辑：刚刚意识到comecme在说什么。会导致问题的行在这里：

```
DateTime d2 = DateTime.Parse(textBox9.Text); 
```

相反，我们需要将其更改为也使用文化信息：

```
CultureInfo persianCulture = new CultureInfo("fa-IR");
DateTime d2 = DateTime.Parse(textBox9.Text, persianCulture) 
```

编辑：你是对的，它只允许解析波斯格式的日期，但不根据特定的日历进行验证。为了使其正常工作，您将不得不手动解析日期并使用提供的 PersianCalendar 实例化一个新的 DateTime：

```
DateTime d2;
if(Regex.IsMatch(textBox9.Text, "^dddd/dd/dd$"))
{
    d2 = new DateTime(
        int.Parse(textBox9.Substring(0,4)), 
        int.Parse(textBox9.Substring(5, 2)), 
        int.Parse(textBox9.Substring(8, 2)),
        p);
} 
```

您只需确保输入与您指定的格式绝对匹配，否则无法始终准确地解析出 DateTime。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-27T09:58:13.753

您还可以使用以下 .net 库像使用 DateTime 一样简单地使用 PersianCalendar：

[C# 中的波斯日历（PersianDateTime）](https://github.com/Mds92/MD.PersianDateTime)

```
var persianDateTime = PersianDateTime.Now;
persianDateTime.EnglishNumber = true;
Console.Write(persianDateTime.ToString()); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-18T15:30:00.300

您可以使用以下代码：

```
 DateTime today = DateTime.Today; // excludes h/m/s

  DateTime userdate = DateTime.Parse(textBox9.Text); 
```

如果你从另一个中减去一个，你会得到一个 TimeSpan。

```
 TimeSpan diff = today - userDate; 
```

您可以使用此时间跨度的属性以您喜欢的方式显示它们。

要管理转换表/到波斯历，您有一个很好的解决方案：

[.NET 如何将波斯语（Jalali 日历）的日期字符串解析为 DateTime 对象？](https://stackoverflow.com/questions/5811170/net-how-to-parse-a-date-string-for-persian-jalali-calendar-into-a-datetime-ob)

参考：

[日期时间.今天](http://msdn.microsoft.com/en-us/library/system.datetime.today.aspx)

[时间跨度](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-07-02T18:30:30.393

这是我正在使用的代码：

```
 public DateTime ConvertPersianToEnglish(string persianDate)
        {
            string[] formats = { "yyyy/MM/dd", "yyyy/M/d", "yyyy/MM/d", "yyyy/M/dd" };
            DateTime d1 = DateTime.ParseExact(persianDate, formats,
                                              CultureInfo.CurrentCulture, DateTimeStyles.None);
            PersianCalendar persian_date = new PersianCalendar();
            DateTime dt = persian_date.ToDateTime(d1.Year, d1.Month, d1.Day, 0, 0, 0, 0, 0);
            return dt;
        } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-20T19:47:50.693

[使用Noda Time](http://nodatime.org)可以更轻松地完成此操作：

```
using System.Globalization;
using NodaTime;
using NodaTime.Text;

...

CultureInfo culture = CultureInfo.CreateSpecificCulture("fa-IR");
CalendarSystem calendar = CalendarSystem.GetPersianCalendar();
LocalDate template = new LocalDate(1, 1, 1, calendar);
LocalDatePattern pattern = LocalDatePattern.Create("yyyy/M/d", culture, template);
LocalDate result = pattern.Parse("1391/2/30").Value;

// if you need a DateTime, then:
DateTime dt = result.AtMidnight().ToDateTimeUnspecified(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-21T09:23:49.393

试试这个代码：这个代码是由“grzegorz W”发布的编辑代码，但是他的代码会产生错误，例如当用户输入日期=“1394/06/31”并且错误是“年、月和日参数描述一个un-可表示的日期时间"

下面的代码是好的：

```
string userInput = "1394/02/31";
System.DateTime date = System.DateTime.Today;
System.Globalization.PersianCalendar p = new System.Globalization.PersianCalendar();

int year = p.GetYear(date);
int month = p.GetMonth(date);
int day = p.GetDayOfMonth(date);
System.DateTime currentDate = new System.DateTime(year, month, day,p);

System.String[] userDateParts = userInput.Split(new[] { "/" },      System.StringSplitOptions.None);
int userYear = int.Parse(userDateParts[0]);
int userMonth = int.Parse(userDateParts[1]);
int userDay = int.Parse(userDateParts[2]);
System.DateTime userDate = new System.DateTime(userYear, userMonth, userDay,p);

System.TimeSpan difference = currentDate.Subtract(userDate); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-19T07:49:39.560

您可以使用这个简单的代码将***波斯日历值***转换为 C# 中的 Datetime 对象并进行计算。

```
DateTime dateTime 
      = new DateTime(persianYear, persianMonth, persianDay, new PersianCalendar()); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-11-12T07:35:09.333

你好你可以使用这个扩展方法：

```
public static class PersainDateTime
{

    public static DateTime PersianDateToMiladi(this string value)
        {
            string[] d = value.Split('/');
            return new DateTime(int.Parse(d[0]), int.Parse(d[1]), int.Parse(d[2]), new System.Globalization.PersianCalendar());
        }
} 
```

现在，您可以在任何地方使用它：

```
var date=("1395/10/5").PersianDateToMiladi(); 
```

或者

```
var date= textbox1.text.PersianDateToMiladi(); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-06T07:36:43.627

```
private void timer1_Tick(object sender, EventArgs e)
{
    labelDataAD.Text = DateTime.Now.ToString("dd/MM/yyyy");
    PersianCalendar persianCalendar = new PersianCalendar();
    string Full = persianCalendar.GetYear(DateTime.Now) + "/" + 
    persianCalendar.GetMonth(DateTime.Now)+"/"+ 
    persianCalendar.GetDayOfMonth(DateTime.Now);
    labelDataSolar.Text = string.Format("{0:yyyy\\:MM\\:dd}", Full);
}

private void FormCalendar_Load(object sender, EventArgs e)
{           
    timer1.Start();
} 
```

输出是：

![日期输出](../Images/83fc2eda0cffd3a368453bad51ccd340.png)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-14T07:12:41.920

对于我的情况，这个解决方案对我有帮助：我在我的项目中创建工具文件夹然后我把类 ExtensionsHelper.cs 和 HijriDateTime.cs 和 PersianDateTime.cs 和 PersianDayOfWeek.cs 放在这个链接中你可以找到上面的类：< [https:// github.com/Mds92/MD.PersianDateTime](https://github.com/Mds92/MD.PersianDateTime) > 然后我使用 PersianDateTime 而不是 DateTime：

```
DateTime datetime = new DateTime(PersianDateTime.Now.Year, PersianDateTime.Now.Month, PersianDateTime.Now.Day, 0, 0, 0); 
```

# html - 在 Firefox 和 IE9 中可见大约 2 个像素的表格高度差异

> ID：10655120
> 
> 赞同：0
> 
> 时间：2012-05-18T15:07:09.617
> 
> 标签：html, css, internet-explorer, firefox

我遇到了 Mozilla/IE 的布局问题。我做了两个表格，作为一个表格。使用浮动/左右，它们彼此相邻显示，效果很好。现在唯一的问题是：右表在 IE9 中比在 Firefox 中高出大约两个像素。可能是什么问题？

在我的 CSS 底部，您可以看到除了现有的 table / td 配置之外，我将表放在两个不同的类中。

谢谢和问候，埃里克

我的 CSS：

```
 body {font-family: Century Gothic, Arial; text-align:center; margin: 0 auto; background-color: #CCCCCC;}

table {display:table; margin:0px 0; padding:0; border:1px solid #000000; font-size:100%;}
tr {display:table-row;}
th, td {display: table-cell; border:0px solid #000000; margin:0; padding:5px; vertical-align:top; text-align:left;}
th {background:#E7ECFD; text-align:center; color:#192666; font-weight:bold;}

hr { border: 0; color: #000000; background-color: #000000; height: 1px; width: 100%; text-align: left;} 

a {color: #0B0080;}
a:hover {color: #ffffff;}

img {border:0;}

#header {font-size: 60px;color: #333333;}

#menu {width:1000px; padding-top:10px; padding-bottom:10px; text-align:left; margin-top:10px; margin-bottom:10px; }
#menu_left {text-align:left; float:left; font-weight: bold;}
#menu_right {text-align:right; font-size:75%;}

#content {width: 1000px; margin: 20px auto 0px auto; text-align:center;}

#main { float: left; height:650px; width:1000px; background-color: #CCCCCC; font-size: 14px; color: #000000; text-align:left;}

.sidebar {width:300px; height: 600px; float: right; background-color: #CCCCCC; font-size: 18px; color: #000000; margin-top:10px; padding-top:20px;}

.footer {font-size: 14px; color:#333333; text-align:center;}

table.table_register {  border:1px solid #000000; padding:10px; float:left; width:50%; font-size:100%;
border-top-left-radius: 15px; border-bottom-left-radius: 15px; border-right:0px;
-moz-border-radius: 15px 0px 0px 15px;
-webkit-border-radius: 15px 0px 0px 15px;}

table.table_register2 { border:1px solid #000000; padding:10px; float:right; width:50%; font-size:100%;
border-top-right-radius: 15px; border-bottom-right-radius: 15px;
-moz-border-radius: 0px 15px 15px 0px;
-webkit-border-radius: 0px 15px 15px 0px;}

td.submit {display: table-cell; border:0px solid #000000; margin:0; padding:10px; 
 text-align:right; vertical-align:top; }

tr.test { height: 182px;} 
```

我的标题：

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="stylesheet" href="http://localhost/webwinkel/assets/css/style.css">

</head>
<body>

<div id="content">

    <div id="header">
    </div>

    <div id="menu">

        <div id="menu_left">
            <a href="http://localhost/webwinkel/public/index">Home</a> |  
            <a href="http://localhost/webwinkel/public/games">Games</a> | 
            <a href="http://localhost/webwinkel/public/movies">Movies</a>
        </div>  
        <div id="menu_right">   
            {if !isset($smarty.session.logged_in)}      
            <a href="http://localhost/webwinkel/public/member/login">Login</a> |
            <a href="http://localhost/webwinkel/public/member/register">Registratie</a>
            {/if}

            {if isset($smarty.session.logged_in)}
            Welkom {$smarty.session.name}! <a href = http://Localhost/webwinkel/public/member/logout>Uitloggen</a>
            {/if}           
        </div> 
    </div>

    <hr>

    <div id="main"> 
```

我的表格：

```
<form action="" method="post">
<table class="table_register">
    <tr>
        <td colspan="2"><strong>Persoonlijke gegevens</strong><br>
        Velden met een * zijn verplicht.
        </td>
    </tr>
    <tr>  
        <td>Titel:</td>
        <td><input type="radio" name="title" value="m">Dhr.
            <input type="radio" name="title" value="f">Mevr. *
        </td>
    </tr>
    <tr>
        <td>Voornaam:</td>
        <td><input type="text" name="name"> *</td>
    </tr>
    <tr>    
        <td>Tussenvoegsel</td>
        <td><input type="text" name="name_connection"></td>
    </tr>
    <tr>
        <td>Achternaam:</td>
        <td><input type="text" name="surname"> *</td>
    </tr>
    <tr>
        <td>Postcode:</td>
        <td><input type="text" name="postal_code"> *</td>
    </tr>
    <tr>
        <td>Straatnaam</td>
        <td><input type="text" name="street"> *</td>
    </tr>
    <tr>
        <td>Huisnummer:</td>
        <td><input type="text" name="house_number"> *</td>
    </tr>  
    <tr>
        <td>Woonplaats:</td>
        <td><input type="text" name="city"> *</td>
    </tr>
    <tr>
        <td>Telefoonnummer:</td>
        <td><input type="text" name="phone_home"> *</td>
    </tr>
    <tr>
        <td>Telefoon mobiel:</td>
        <td><input type="text" name="phone_mobile"> *</td>
    </tr>
    <tr height="30">
        <td colspan="2">&nbsp;</td>
    </tr>
</table>

<table class="table_register2">
    <tr>
        <td colspan="2"><strong>inloggegevens</strong> <br>
        Uw e-mailadres en wachtwoord heeft u nodig om toegang te krijgen tot uw gegevens. 
        Tevens zullen we u via dit e-mailadres op de hoogte houden van de status van uw bestellingen. 
        </td>
    </tr>
    <tr>
        <td>E-mailadres:</td> 
        <td><input type="text" name="email"></td> 
    </tr>
    <tr>
        <td>Wachtwoord:</td> 
        <td><input type="password" name="password"></td> 
    </tr>
    <tr>
        <td>Wachtwoord herhalen:</td> 
        <td><input type="password" name="retype_password"></td>
    </tr>
    <tr class="test">
        <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td class="submit"><input type="submit" name="register" value="Verzenden"></td> 
    </tr>
</table>
</form> 
```

和页脚：

```
 </div>

    <div class="sidebar">
    </div>

<div class="footer">

&copy;2012 by Eric Versteeg.
</div>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:33:43.347

首先，这两个浏览器对默认元素有不同的内部样式表。您应该首先应用 CSS 重置。这里有几个选项供您选择： [http ://www.cssreset.com/](http://www.cssreset.com/)

另外，请确保您拥有有效的文档类型。如果这没有帮助，我们可以更深入地研究您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:31:26.170

对不起，我没有在周末入住。你能修好它吗？我尝试了代码，每个浏览器都为您的 TR 设置了不同的高度。为什么不尝试自己设置高度？工作量很大……如果我是你，我会改用无桌子的设计。这是一个很好的做法，当您需要像素完美时，DIV 更容易处理。如果您要做的只是让两个表格的高度相同，则使用 478px 作为两者的高度将为 Chrome 和 IE 修复它，FF 也应该可以工作。

# c++ - 这个向量类中的这个参数是什么？

> ID：10655122
> 
> 赞同：0
> 
> 时间：2012-05-18T15:07:13.180
> 
> 标签：c++, vector, parameters, namespaces

```
typedef helper::vector<core::collision::DetectionOutput> ContactVector; 
```

[http://www.sofa-framework.org/api](http://www.sofa-framework.org/api)（链接到 doxygen api 文档） - 我找不到命名空间 core::collision

```
sofa::core::collision::DetectionOutput 
```

我知道 typedef 意味着给它一个昵称。***helper***是框架内的命名空间，vector***是命名空间******helper***下的一个类。但是我不明白的是 vector 特别采用***core::collision::DetectionOutput***的参数。什么是检测输出；是一门课吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:10:53.543

`DetectionOutput`是一类。（参考：[链接](http://www.sofa-framework.org/api)）所以基本上这是DetectionOutput实例向量的typedef。希望这是有道理的。

从他们的文档中引用：

> 接触点的一般描述，用于大多数碰撞模型，但特殊情况除外，例如基于 GPU 的碰撞。每个接触点描述为：
> 
> elem：一对碰撞元素。id：给定碰撞模型对的联系人的唯一 ID。point：每个模型表面上的接触点。normal：触点的法线，从第一个模型向外指向。值：有符号距离（如果对象是互穿的，则为负数）。deltaT：估计的接触时间。
> 
> 联系人 id 用于过滤冗余联系人（仅保留距离最小的联系人），并随着时间的推移存储持久数据以进行响应。

# php - 声明的对象在 include 中不起作用

> ID：10655123
> 
> 赞同：0
> 
> 时间：2012-05-18T15:07:16.013
> 
> 标签：php, oop

我正在尝试使用专有 mvc 处理项目，我们有一个名为 global.php 的文件，其中包含与此类似的代码...

```
<?php
session_start();

require('config/config.php');
require('classes/pdo_extender.php');
require('classes/mainClass.php');
require('classes/utilities.php');

$mainClass = new mainClass;
?> 
```

然后我们在根目录中有一个页面，其中有以下代码

```
<?php 
require_once($_SERVER['DOCUMENT_ROOT'].'/globals/global.php');
$mainClass->init();
?> 
```

init 函数中的代码仅包含一个基于当前查看页面名称的文件...

```
public function init() {
    $section=explode("/",$_SERVER['SCRIPT_NAME']);
    $section=explode(".",$section[count($section)-1]);
    include("controllers/".$section[0].".php");
} 
```

假设我们在根 login.php 中，它包含 global.php 并调用 init 函数，而我不必重新声明 $mainClass，因此它包含 controllers/login.php 但现在在此页面上我必须重新声明 $mainClass = 新主类；

有没有办法让init函数中包含的文件仍然可以访问global.php中设置的初始$mainClass？

编辑：除了接受之外，我发现的另一个解决方案如下：

```
public function init() {
    $section=explode("/",$_SERVER['SCRIPT_NAME']);
    $section=explode(".",$section[count($section)-1]);
    $mainClass= $this;
    include("controllers/".$section[0].".php");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:20:29.903

我以前也有过这样的事情。现在的问题是该函数中包含的文件继承了该函数的范围，因此它们将无法按照您的意愿在全局范围内访问。一个可能的解决方案是使用 te 函数来确定文件名和路径，然后将它们返回为一个排序数组或一个字符串（如果它只有一个）。然后在全局范围内执行函数之外的包含。

```
public function init() {
    $section=explode("/",$_SERVER['SCRIPT_NAME']);
    $section=explode(".",$section[count($section)-1]);
    return "controllers/".$section[0].".php";
}

<?php 
require_once($_SERVER['DOCUMENT_ROOT'].'/globals/global.php');
$file = $mainClass->init();
include($file);

// now the file is in the global include tree along with global.php 
// allowing the file to have access to w/e it is you have in there.
?> 
```

# objective-c - 定义重复本地通知的结束日期

> ID：10655125
> 
> 赞同：0
> 
> 时间：2012-05-18T15:07:33.673
> 
> 标签：objective-c, ios

我正在开发一个简单的应用程序，该应用程序设置一些`NSLocalNotification`重复间隔。

我陷入了一个奇怪的境地：

*   如果我的用户不打开应用程序，我该如何停止这些通知？
*   有没有其他方法来定义和结束**日期**`fireDate`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:38:58.387

如果您正在执行设定的时间间隔，您可以通过为直到您希望它停止的日期的时间间隔设置单独的通知来解决这个问题。当他们的用户重新打开应用程序时，您可以清除它们并重置它们。这可能太多也可能不会太多，但这实际上是我自己做的。

# jquery-ui - jQuery UI 自定义构建 - 我如何找出包含哪些组件？

> ID：10655126
> 
> 赞同：4
> 
> 时间：2012-05-18T15:07:34.353
> 
> 标签：jquery-ui

我有两个 jQuery UI 自定义版本；它们是由不同版本的代码（1.8.9 vs. 1.8.11）的不同人制作的。文件大小相差 50k，因此显然每个文件都包含不同的组件。我可以运行一个命令/脚本来列出每个包含的组件吗？我正在尝试创建一个新版本来替换两者。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T15:11:28.420

有点儿。您可以获取 $.ui 下的名称并将它们一起比较。

```
var names = [];
for(name in $.ui)
   names.push(name); 
```

它还会获取许多其他方法，但它会为您提供已安装插件的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:35:47.150

这很容易在不使用命令行工具或脚本的情况下手动确定。构建中使用的所有小部件在输出文件中都有一个大块注释。这是 1.8.9 版的 Draggable：

```
;/*
* jQuery UI Draggable 1.8.9 
* 
* Copyright 2011, AUTHORS.txt (http://jqueryui.com/about) 
* Dual licensed under the MIT or GPL Version 2 licenses. 
* http://jquery.org/license 
* 
* http://docs.jquery.com/UI/Draggables 
* 
* Depends: 
*    jquery.ui.core.js 
*    jquery.ui.mouse.js 
*    jquery.ui.widget.js 
*/ 
```

应该像浏览每个文件一样简单，注意您有哪些评论并比较差异。

# php - 使用 PHP 修改 HTML 标签元素

> ID：10655127
> 
> 赞同：2
> 
> 时间：2012-05-18T15:07:40.287
> 
> 标签：php, html

我一直在尝试修改 HTML 标记元素，我有大量需要修改的 HTML 文件。

我需要删除图像和以下文本之间的线条。我正在使用 PHP。我正在使用 DOMDocument 访问所有节点，并且还能够获取节点路径。但我无法从节点路径修改该特定的 HTML 标记。有人可以告诉我这是否可能吗？这就是我现在所拥有的..非常感谢ppl..

```
$dom = new DOMDocument();
$dom->loadHTMLFile($pathname);
$i=0;
$allNodes = $dom->getElementsByTagName('*');
$tagNamesArray = array();
foreach($allNodes as $node) {
$tagNodePath = $node->getNodePath();
$tagName = end(explode('/',$node->getNodePath()));
$tagNamesArray[$i][1] = $tagName;
$tagNamesArray[$i][2] = $tagNodePath;
$i++;
}

checkForLines($tagNamesArray, $dom);

function checkForLines($tagsArray, $dom) {
$xPath = new DOMXpath($dom);
for($i=0 ; $i<(count($tagsArray)-1) ; $i++) {
    if($tagsArray[$i][1] == 'img' && $tagsArray[$i+1][1] == 'br') {
        echo $tagsArray[$i+1][2].'<br>';
        $lineTag = $xPath->query($tagsArray[$i+1][2]);
        $domElement = $dom->removeChild($lineTag);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:33:54.480

> ...考虑任何图像，然后在图像和文本之间的一些后续文本（无论是它`<p>`还是等...）之后，有一些我想要删除的标签...`<h1>``<br>`

如果这就是你想做的全部：

```
$dom = new DOMDocument;
$dom->loadHTML( "<img src='foo.png' /><br/><p>Hello World</p>" );

$img = $dom->getElementsByTagName("img");

foreach ( $img as $current ) {
    $sibling = $current->nextSibling;
    if ( $sibling->nodeName === "br" )
        $current->parentNode->removeChild( $sibling );
}

echo $dom->saveHTML(); 
```

这导致以下输出：

```
<img src="foo.png"><p>Hello World</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-02T15:15:33.017

从字符串创建 DOM

```
$html = str_get_html('<div id="hello">Hello</div><div id="world">World</div>');

$html->find('div', 1)->class = 'bar';

$html->find('div[id=hello]', 0)->innertext = 'foo';

echo $html; 
```

# ms-access - 调用存储过程时出现“无法在集合中找到项目”

> ID：10655128
> 
> 赞同：1
> 
> 时间：2012-05-18T15:07:40.897
> 
> 标签：ms-access, vba

这是我的过程：

```
 ALTER PROCEDURE [dbo].[insert_user]
        @username varchar(50)
     AS
     BEGIN
        IF EXISTS(SELECT userid FROM users WHERE username = @username)
            SELECT userid FROM users WHERE username = @username
        ELSE
            BEGIN
                INSERT INTO users (username) VALUES (@username)
                SELECT userid FROM users WHERE username = @username
            END
     END 
```

这是我的 VBA

```
Public userid As Integer
    Public dbconn As ADODB.Connection

Public Function Startup()
    Dim cmd As New ADODB.Command
    Dim rs As New ADODB.Recordset
    Dim param As New ADODB.Parameter

    Set dbconn = New ADODB.Connection
    dbconn.ConnectionString = "[redacted]"
    dbconn.Open dbconn.ConnectionString

    Set cmd = New ADODB.Command
    cmd.ActiveConnection = dbconn
    cmd.CommandType = adCmdStoredProc
    cmd.CommandText = "insert_user"

    Set param = cmd.CreateParameter("username", adVarChar, adParamInput, 50, Environ("UserDomain") & "dddddddd\" & Environ("Username"))
    cmd.Parameters.Append param

    rs.CursorType = adOpenStatic
    rs.CursorLocation = adUseClient
    rs.LockType = adLockOptimistic
    rs.Open cmd

    MsgBox (rs("userid"))
End Function 
```

每当 proc 添加新用户时它会失败，但在现有用户返回时工作正常。知道为什么在我进行插入时它没有返回任何记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:36:54.227

也许这篇文章可以帮助你：[http ://www.sqlteam.com/forums/topic.asp?TOPIC_ID=62936](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=62936)

所以，实际上，它是在你的存储过程中添加一行：

```
...
SET NOCOUNT ON
... 
```

# php - memcache php 缓存 js css 和图像

> ID：10655129
> 
> 赞同：0
> 
> 时间：2012-05-18T15:07:41.083
> 
> 标签：php, javascript, css, memcached

如果可能的话，在一些建议/反馈之后。

我正在做一个大型项目，开发团队要求我们合并所有 JS/CSS 并将其与 memcache 一起缓存为一个文件，以加快速度。

我担心这不是我习惯的工作方式，我只想加载每个页面所需的 JS 和 CSS，我认为这是一个明显的原因。

我也一直在寻找其他一些高流量网站，但似乎没有其他人这样做。

谁能给我一些这种方法的优缺点？

提前致谢

理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:28:07.110

“我一直在寻找其他一些高流量的网站，但似乎没有其他人这样做”

真的吗？这让我有点吃惊……这被认为是减少页面加载时间的第一步。见这里：http: [//developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)。如果您想测试对加载时间最佳实践的遵守情况，您可能还想尝试他们的性能测试工具 YSlow：http: [//developer.yahoo.com/yslow/](http://developer.yahoo.com/yslow/)。

这就是为什么这被认为是最佳实践的原因：浏览器限制为大约 8 个同时连接，每个特定服务器限制为 2 个（对于不合格的浏览器更多）。因此，如果您为给定页面生成多个文件，那么它们将在某种程度上连续加载，因为您的浏览器将与您的服务器进行 15 次往返，一次两次。

那么让我们看看这是如何进行的。假设您有 15 个文件，每个文件大小为 10k，或者您可以将它们组合成一个 150k 的文件。假设服务器的延迟为 65 毫秒，下载速率仅为 25k/秒。让我们算一下......这是等式：

```
$page_load_time = ( ($simultaneous_connections * $load_time_per_file) 
                       + $latency_per_request ) 
                  * ($number_of_files/$request_cycles) 
```

在哪里：

```
$request_cycles = max(1, ($number_of_files/$simultaneous_connections)) 
```

因此，有 15 个文件，每个文件 10k：

```
((2 * .4 seconds) + .065 seconds) * 7.5 =  6.4875 seconds 
```

或使用单个 150k 文件：

```
((1 * 6 seconds) + 0.065 seconds) * 1 = 6.065 seconds 
```

差别不大，但用户等待时间仍然接近半秒！

现在 - 当他们在 3g 连接时会发生什么？还是有一点 wi-fi 问题？让我们尝试更多的带宽（100k/sec）和更多的延迟（250ms）：

```
((2 * .1 seconds) + 0.250 seconds) * 7.5 = 3.375 seconds 
```

或者

```
((1 * 1.5 seconds) + 0.250 seconds) * 1 = 1.750 seconds 
```

哇！现在所有这些单独的小文件几乎使页面加载时间增加了一倍！

添加一大堆其他文件，你喜欢的 TypeKit 负载、广告服务器负载、Facebook 插件等等等等，这些东西开始变得更加重要。

# java - 如果封装太低，如何获得不必要的紧密耦合

> ID：10655131
> 
> 赞同：0
> 
> 时间：2012-05-18T15:07:48.847
> 
> 标签：java, encapsulation, tightly-coupled-code

如果我的代码封装程度低，我似乎无法理解“紧耦合”的概念。

有人会展示一些“之前”和“之后”的代码来说明这个概念吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:14:07.943

如果您不封装您的字段和其他应该是私有成员，则可以直接从其他类访问它们。如果访问的项目依赖于实现，则更改实现会触发在引用它的任何地方更改代码的需要。

例如，如果您有一个表示日期的类，并且您从年、月、日表示切换到毫秒表示（以及将其实际转换为人类可读格式的方法），如果字段被公开，那么这将导致麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T15:14:18.157

低封装*允许*紧密耦合。

封装保护类的实现细节不被外部访问。外部访问是耦合的。与实现细节的耦合比与公共 API 的耦合更紧密——要编写、理解和管理的代码部分之间有更多的联系。

# delphi - 如何获得具有相同类名的不同控件的句柄？

> ID：10655133
> 
> 赞同：3
> 
> 时间：2012-05-18T15:07:58.877
> 
> 标签：delphi, delphi-xe2, delphi-xe

我正在尝试使用 delphi 编程访问第三方应用程序的“文本框”，因此我需要使用 FindWindowEx(...) 函数找到每个“文本框”的句柄。

问题是，由于所有文本框都具有相同的类名和“无窗口名称”，所以这个函数可以给我第一个 TextBOx 句柄！

如何在没有名称的情况下获取其余的文本框句柄？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T15:31:12.670

您可以使用`EnumChildWindows`枚举第三方应用程序窗口的所有子窗口，并测试每个枚举窗口的类名，看它是否是“文本框”类。例子：

```
function EnumChildren(hwnd: HWND; lParam: LPARAM): BOOL; stdcall;
const
  TextBoxClass = 'EDIT'; (?)
var
  ClassName: array[0..259] of Char;
begin
  Result := True;
  GetClassName(hwnd, ClassName, Length(ClassName));
  if ClassName = TextBoxClass then
    TStrings(lParam).Add(IntToHex(hwnd, 8));
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  Memo1.Clear;
  EnumChildWindows(OtherAppWnd, @EnumChildren, UINT_PTR(Memo1.Lines));
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T19:16:04.427

为了`FindWindowEx()`有效使用，您需要提前了解窗口 UI 的结构，例如通过 Spy++、Winspector 或其他类似工具。这样您就可以知道有多少控件具有相同的类类型、它们的父/子关系彼此之间的关系等，以便您可以进行`FindWindowEx()`相应的编码。或者，如果目标 UI 使用 Dialog ID（VCL 不使用，但 Microsoft 通常使用），那么您可以直接使用`GetDlgItem()`来获取所需控件的句柄，而无需在代码中寻找它们（同样，Spy++ 和类似的工具可以向您显示这些 ID 是什么，以便您对其进行编码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-14T19:40:45.440

基于 @Sertac Akyus 我的 Delphi 7 (2002) 32 位代码，用于 Windows 10 64 位 Pro 远程（本地桌面）应用程序：（注意：我不知道为什么，但是这里所有带有 @s 的代码都不起作用！）：
| Win32API | 描述 | |:-------- | ----- | | GetClassName(winHandle, @s, 长度(s)+1); | **这似乎行不通！**| | GetClassName(winHandle, PChar(s), Length(s)+1); | **这行得通！**|

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ComCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    ListBox1: TListBox;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
    winHandle: HWND;
    winTitle : string;
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

var
  s: String;

function EnumChildren(hwnd: HWND; lParam: LPARAM): BOOL; stdcall;
var
  ClassName: array[0..259] of Char;
begin
  Result := True;
  GetClassName(hwnd, ClassName, Length(ClassName));
  Form1.ListBox1.Items.Add(IntToHex(hwnd,8) + ' ' + ClassName);
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  ListBox1.Items.Clear;

  // ---------------------------------
  // 1\. try to find main window hwnd:
  // ---------------------------------
  winHandle := FindWindow('TwinMain', nil);
  if winHandle < 1 then begin
  ListBox1.Items.Add('Error: 1.'); exit; end else
  ListBox1.Items.Add('win: 0x' + IntToHex(winHandle,8));

  // ---------------------------------
  // 2\. try to find window title:
  // ---------------------------------
  SetLength(winTitle, GetWindowTextLength(winHandle));
  GetWindowText(winHandle, PChar(winTitle), Length(winTitle)+1);
  if Length(Trim(winTitle)) < 2 then begin
  ListBox1.Items.Add('Error: 2.'); exit; end else
  ListBox1.Items.Add('title: ' + winTitle);

  // ---------------------------------
  // 3\. cross check: try to get class:
  // ---------------------------------
  SetLength(s, 100);
  GetClassName(winHandle, PChar(s), Length(s)+1);
  if Length(Trim(s)) < 2 then begin
  ListBox1.Items.Add('Error: 3.'); exit; end else
  ListBox1.Items.Add('class: ' + s);

  EnumChildWindows(winHandle, @EnumChildren, 0);
end;

(* here comes the form1.dfm file: *)
object Form1: TForm1
  Left = 192
  Top = 125
  Width = 389
  Height = 328
  Caption = 'Form1'
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'MS Sans Serif'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
  object Button1: TButton
    Left = 56
    Top = 48
    Width = 75
    Height = 25
    Caption = 'Button1'
    TabOrder = 0
    OnClick = Button1Click
  end
  object ListBox1: TListBox
    Left = 24
    Top = 112
    Width = 305
    Height = 145
    ItemHeight = 13
    TabOrder = 1
  end
end 
```

希望这比其他许多关于 SO 的文章更有帮助。乔，延斯

# php - 基于 twitter 提及和 facebook 喜欢的趋势

> ID：10655135
> 
> 赞同：0
> 
> 时间：2012-05-18T15:08:00.227
> 
> 标签：php, facebook, api, twitter, trending

我们的网站允许人们上传图片，然后在 twitter 上分享和/或在 facebook 上点赞。有一个趋势页面，其中包含基于特定页面的 twitter 提及和 facebook 喜欢的总数的前 X 图像。

目前我能看到的唯一方法是通过（至少）对每张图片进行 2 次 API 调用以获取每个社交网站的计数，然后计算总数以最终按最“趋势”排序图片“ 第一的。我不认为这是应该的方式，因为如果我们有 3000 张图像要订购，可能需要很长时间才能做到这一点。

我不知道如何实现我们想要的（如果可能的话），这就是为什么我现在能想到的唯一解决方案是拥有我们自己的“喜欢”系统或每小时获取计数并创建一个一种缓存（但这仍然意味着每小时都会调用大量 API）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:22:00.490

也许您可以根据服务器上的查看次数对图像进行排名。如果您愿意，您可以获取 10% 的最佳观看图像，并根据提及/喜欢（以及）对这些图像进行排名。这需要减少 90% 的 API 调用，但结果令人满意（我认为）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:55:16.137

几点建议：

1.  将其限制在某个时间范围内（例如上周上传的图像）
2.  将数据缓存一段时间，每个图像大约每小时执行一次 API 调用（甚至更长）
3.  即使人们不在此页面上，也为此执行 API 调用，任何其他时间在站点的其他位置加载图像时，如果在过去一个小时内没有完成，请执行 API 调用。这将使一页加载时的请求数量错开。
4.  限制一页加载中的请求数量。这意味着有人可能会加载一个页面，它只会发送 100 个请求（对于最长时间未请求的 100 个图像），其余图像将使用它们之前的值（即缓存值）。这完全取决于您的站点的活跃程度，您可能还需要每天/每周对所有站点进行查找，以确保缓存不会过时。

# android - 确定通过 Intent 过滤器接收的内容类型

> ID：10655138
> 
> 赞同：0
> 
> 时间：2012-05-18T15:08:09.687
> 
> 标签：android, facebook, intentfilter

我正在开发一个我想在“共享”列表中注册的应用程序。该部分已经在清单文件中使用以下标签进行了处理：

```
<intent-filter>
    <action android:name="android.intent.action.SEND"   />
    <category android:name="android.intent.category.DEFAULT"/>
    <data android:mimeType="text/*"/>
    <data android:mimeType="image/*"/>
</intent-filter> 
```

在查看了一些关于 SO 的示例并使用每个相关问题的片段后，我整理了一个简单（但很笨拙）的代码片段，截至目前，它接收从画廊共享的图像。我还能够成功地将收到的图像上传到 Facebook。

我的问题是，我希望我的应用程序能够共享来自各种应用程序的各种内容。例如，来自 Twitter 的推文、来自浏览器的 URL 等。如何确定从另一个应用程序共享到我的应用程序的数据/内容的确切性质？我可以适当地处理接收到的数据。但我对如何弄清楚共享了哪些内容感到困惑。

我为共享图像而编写的代码是：

*注意：我目前在`onCreate()`方法中运行这段代码，没有任何错误检查。当我对所关注的问题有所了解时，我会将它们放在适当的位置。*

```
ImageView imgSelectedPhoto = (ImageView)findViewById(R.id.imgDisplaySelectedImage);

Uri imageURI = (Uri) getIntent().getExtras().get(Intent.EXTRA_STREAM);
Bitmap bitmap = null;
try {
    bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(imageURI));
        try {
        Utility.scaleImage(getApplicationContext(), imageURI);
        imgSelectedPhoto.setImageBitmap(bitmap);
        } catch (IOException e) {
            e.printStackTrace();
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
} 
```

非常感谢任何帮助/建议/建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:17:23.887

您可以获得应用程序接收到的 MIME 类型的数据，如下所示：

```
String type = getIntent().getType(); 
```

# java - 检票口 - 失去与目标 _blank 的会话

> ID：10655139
> 
> 赞同：0
> 
> 时间：2012-05-18T15:08:17.823
> 
> 标签：java, wicket

我有一个快速的问题。在我的检票口应用程序中，我必须从带有 target="_blank" 链接的表中打开一个信息表。该表是复杂 FORM 的结果，因此我想保留结果表并允许用户在新页面中打开详细结果。不幸的是，如果链接的目标页面是同一个应用程序，Wicket 似乎会从起始页面失去会话。当我返回原始页面尝试做任何事情时，页面返回登录屏幕。

有没有办法在我打开的每个页面中保持会话？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T18:06:07.713

看起来会话尚未绑定。如果您有一个页面，但它不是有状态的（Wicket 力求页面尽可能长时间地无状态），则 HttpSession 将不会被绑定，并且您将在每个请求中获得一个新会话。

在您的 form.onSubmit 处理程序中，您可能需要调用：

```
getSession().bind(); 
```

这将为您修复会话。

# python - python：奇怪的列表元素组合

> ID：10655141
> 
> 赞同：9
> 
> 时间：2012-05-18T15:08:23.010
> 
> 标签：python, list, combinations

我有以下两个列表：

```
l1 = [1, 2, ,3]  
l2 = [x, y] 
```

并希望所有 5 个元素的列表`l1`仅保持顺序。说：

```
[x, y, 1, 2, 3],  
[x, 1, y, 2, 3],  
[x, 1, 2, y, 3],  
[x, 1, 2, 3, y],  
[y, x, 1, 2, 3],  
[y, 1, x, 2, 3],  
[y, 1, 2, x, 3],  
[y, 1, 2, 3, x],  
[1, x, y, 2, 3],  
[1, x, 2, y, 3],  
[1, x, 2, 3, y],  
[1, y, x, 2, 3],  
[1, y, 2, x, 3],  
[1, y, 2, 3, x],  
...  
[1, 2, 3, y, x],  
...  
[1, 2, 3, x, y] 
```

请注意，顺序`l1`很重要，但不重要`l2`。`l2`元素在 l1+l2 位置上运行，但只有顺序`l1`很重要。我正在为此苦苦挣扎。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T15:48:52.057

我称之为散布 l1 与（l2 的排列）。您可以分两步执行此操作：选择位置，然后排列位置。对于插入点，您可以使用基于掩码的方法 ( `permutations([True,True,False,False,False])`) 或基于索引的方法 ( `product(*[range(5)]*2)`)。还没有使后一种技术起作用。

```
from itertools import *

def interspersings(l1,l2):
    for mask in set(permutations([0]*len(l1) + [1]*len(l2))):  # sadly inefficient
        iters = [iter(l1), iter(l2)]
        yield [next(iters[which]) for which in mask]

for perm in permutations(l2):
    for interspersing in interspersings(l1,perm):
        print(interspersing) 
```

演示：

```
[1, 2, 'x', 'y', 3]
['x', 'y', 1, 2, 3]
[1, 2, 'x', 3, 'y']
[1, 2, 3, 'x', 'y']
['x', 1, 'y', 2, 3]
[1, 'x', 'y', 2, 3]
[1, 'x', 2, 'y', 3]
['x', 1, 2, 'y', 3]
[1, 'x', 2, 3, 'y']
['x', 1, 2, 3, 'y']
[1, 2, 'y', 'x', 3]
['y', 'x', 1, 2, 3]
[1, 2, 'y', 3, 'x']
[1, 2, 3, 'y', 'x']
['y', 1, 'x', 2, 3]
[1, 'y', 'x', 2, 3]
[1, 'y', 2, 'x', 3]
['y', 1, 2, 'x', 3]
[1, 'y', 2, 3, 'x']
['y', 1, 2, 3, 'x'] 
```

**编辑**：啊，我提到的后一种技术是由 Mark Longair 在[https://stackoverflow.com/a/10655695/711085](https://stackoverflow.com/a/10655695/711085)正确实现的（它比这种技术效率更高）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T15:41:40.583

这样做的一种方法是使用`itertools.combinations`选择最终列表的索引，您将在其中放入`l1`. 然后，对于这些选择中的每一个，使用`itertools.permutations`来查找第二个列表中项目的所有排列。然后遍历这两个列表，根据索引是否应该是用于元素的索引，从前面的任何一个中挑选`l1`出来`l2`。

```
from itertools import combinations, permutations

l1 = [1, 2, 3]
l2 = ["x", "y"]

n = len(l1) + len(l2)

for c in combinations(range(0, n), len(l1)):
    cs = set(c)
    for p in permutations(l2):
        l1i = iter(l1)
        l2i = iter(p)
        print [ l1i.next() if i in cs else l2i.next() for i in range(0,n) ] 
```

输出将是：

```
[1, 2, 3, 'x', 'y']
[1, 2, 3, 'y', 'x']
[1, 2, 'x', 3, 'y']
[1, 2, 'y', 3, 'x']
[1, 2, 'x', 'y', 3]
[1, 2, 'y', 'x', 3]
[1, 'x', 2, 3, 'y']
[1, 'y', 2, 3, 'x']
[1, 'x', 2, 'y', 3]
[1, 'y', 2, 'x', 3]
[1, 'x', 'y', 2, 3]
[1, 'y', 'x', 2, 3]
['x', 1, 2, 3, 'y']
['y', 1, 2, 3, 'x']
['x', 1, 2, 'y', 3]
['y', 1, 2, 'x', 3]
['x', 1, 'y', 2, 3]
['y', 1, 'x', 2, 3]
['x', 'y', 1, 2, 3]
['y', 'x', 1, 2, 3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T15:32:25.790

我认为解决这个问题的更好方法之一是保持 [1,2,3] 原样，然后对于“x”，认识到可以插入四个位置（在“1”之前，之前'2', ... 在 '3' 之后）。然后，一旦插入了“x”，现在有 5 个位置可以插入“y”（未插入“x”的三个位置，加上“x”之前和“x”之后）。使用嵌套循环在每个可能的位置插入“x”和“y”。作为奖励，将嵌套循环提炼成理解......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T16:23:12.717

```
>>> import itertools
>>> l1 = [1, 2, 3]
>>> l2 = ['x', 'y', 0, 0, 0]
>>> l4 = []
>>> cyc = itertools.cycle(l1)
>>> for el in set(itertools.permutations(l2, 5)):
...     l4.append([cyc.next() if j==0 else j for j in el]) 
```

产生：

```
>>> l4
[[1, 2, 'x', 3, 'y'], 
 ['y', 'x', 1, 2, 3], 
 ['x', 1, 'y', 2, 3], 
 ['x', 1, 2, 'y', 3], 
 [1, 2, 3, 'y', 'x'], 
 [1, 'y', 2, 3, 'x'], 
 [1, 2, 3, 'x', 'y'], 
 [1, 'x', 2, 3, 'y'], 
 [1, 'y', 'x', 2, 3], 
 [1, 2, 'x', 'y', 3], 
 [1, 2, 'y', 'x', 3], 
 [1, 'x', 2, 'y', 3], 
 ['y', 1, 2, 'x', 3], 
 ['x', 1, 2, 3, 'y'], 
 [1, 'y', 2, 'x', 3], 
 [1, 'x', 'y', 2, 3], 
 ['y', 1, 2, 3, 'x'], 
 ['x', 'y', 1, 2, 3], 
 [1, 2, 'y', 3, 'x'], 
 ['y', 1, 'x', 2, 3]] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T15:27:58.547

我尝试使用 l1 的类占位符进行一些操作，`itertools.permutations`但其中有重复项。

所以，再试一次，这是我能得到的最简单的：

```
from itertools import combinations, permutations

l1 = [1, 2, 3]
l2 = ["x", "y"]
r = range(len(l1)+len(l2))
for combo in combinations(r,len(l2)):
  for permu in permutations(l2):
    i1 = iter(l1).next
    i2 = iter(permu).next
    row = [ i2() if i in combo else i1() for i in r ]
    print row 
```

产量：

```
['x', 'y', 1, 2, 3]
['y', 'x', 1, 2, 3]
['x', 1, 'y', 2, 3]
['y', 1, 'x', 2, 3]
['x', 1, 2, 'y', 3]
['y', 1, 2, 'x', 3]
['x', 1, 2, 3, 'y']
['y', 1, 2, 3, 'x']
[1, 'x', 'y', 2, 3]
[1, 'y', 'x', 2, 3]
[1, 'x', 2, 'y', 3]
[1, 'y', 2, 'x', 3]
[1, 'x', 2, 3, 'y']
[1, 'y', 2, 3, 'x']
[1, 2, 'x', 'y', 3]
[1, 2, 'y', 'x', 3]
[1, 2, 'x', 3, 'y']
[1, 2, 'y', 3, 'x']
[1, 2, 3, 'x', 'y']
[1, 2, 3, 'y', 'x'] 
```

# python - 更快的附加价值的方法

> ID：10655142
> 
> 赞同：4
> 
> 时间：2012-05-18T15:08:25.570
> 
> 标签：python, optimization, numpy, append

假设我有一个很大的浮点值列表，我只想选择其中一些查看另一个数组：

```
result = []
for x,s in zip(xlist, slist):
    if f(s): result.append(x) 
```

在循环开始时，我可以粗略估计有多少条目将通过`f`选择

现在这很慢，我试图改变`list`，`array`但只看追加我变慢了

```
def f(v):
    for ii in a: v.append(ii)
a = range(int(1E7))
v = []
t = time(); f(v); print time()-t # -> 1.3
v = array.array('i')
t = time(); f(v); print time()-t # -> 3.4 
```

我需要更快，因为这个循环在我的程序中真的很慢。可以`numpy.array`帮助我吗？没有`append`方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:24:37.563

对此可能有更好的 numpy 解决方案，但在纯 python 中，您可以尝试迭代器：

```
from itertools import izip

xlist = [1,2,3,4,5,6,7,8]
slist = [0,1,0,1,0,0,0,1]

def f(n):
    return n

results = (x for x,s in izip(xlist, slist) if f(s))

# results is an iterator--you don't have values yet
# and no extra memory is consumed
# you can retrieve results one by one with iteration
# or you can exhaust all values and store in a list

assert list(results)==[2,4,8]

# you can use an array too
# import array
# a = array.array('i', results) 
```

您还可以将此方法与 numpy 数组结合使用，看看它是否更快。请参阅[`fromiter`构造函数](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromiter.htm)。

但是，如果您可以重组代码以使用迭代器，则可以避免生成完整列表，从而完全避免使用`append`。

不言而喻，您应该看看是否可以加快您的`f()`过滤功能，因为它会为每个元素调用一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T21:20:01.810

根据您问题中的第一句话，您希望根据另一个列表或数组中的值来选择值。

在 numpy 中，您可以使用索引从数组中获取选定的值。我在示例中使用[布尔索引。](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#boolean)这避免了将值附加到现有数组的需要，但会为您提供所选值的副本作为数组。`&`您可以使用or`|`运算符、numpy中的[逻辑函数](http://docs.scipy.org/doc/numpy/reference/routines.logic.html)或您自己的函数来组合多个条件。

```
In [1]: import numpy as np

In [2]: size = int(1E7)

In [3]: ar = np.arange(size)

In [4]: ar2 = np.random.randint(100, size=size)

In [5]: %timeit ar[(ar2 > 50) & (ar2 < 70) | (ar2 == 42)]
10 loops, best of 3: 249 ms per loop 
```

如果您需要根据不同的条件（或评论中给出的范围）在单独的数组中进行每个选择，您可以执行以下操作：

```
conditions = [(10, 20), (20, 50)] # min, max as tuples in a list
results = {}
for condition in conditions:
    selection = ar[(ar2 > condition[0]) & (ar2 < condition[1])]
    # do something with the selection ?
    results[condition] = selection
print results 
```

会给你类似的东西

```
{(20, 50): array([      2,       6,       7, ..., 9999993, 9999997, 9999998]),
 (10, 20): array([      1,       3,      66, ..., 9999961, 9999980, 9999999])} 
```

一般来说，您应该避免循环遍历一个 numpy 数组，而是使用矢量化函数来操作您的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T15:33:07.543

尝试双端队列：[http ://docs.python.org/library/collections.html#collections.deque](http://docs.python.org/library/collections.html#collections.deque)

来自 python 文档：

> 双端队列是堆栈和队列的概括（名称发音为“deck”，是“双端队列”的缩写）。双端队列支持从双端队列的任一侧进行线程安全、内存高效的追加和弹出操作，在任一方向上的 O(1) 性能大致相同。
> 
> 尽管列表对象支持类似的操作，但它们针对快速固定长度操作进行了优化，并且会为 pop(0) 和 insert(0, v) 操作带来 O(n) 内存移动成本，这些操作会改变底层数据表示的大小和位置.

在我的系统上（由于内存有限，我使用 1e6 的范围）：

```
def f(v):
    for ii in a: v.append(ii)
a = range(int(1E6))
v = []
t = time(); f(v); print time()-t # -> .12
v = array.array('i')
t = time(); f(v); print time()-t # -> .25
v = collections.deque()
t = time(); f(v); print time()-t # -> .11 
```

# php - Javascript中的重复单选按钮组

> ID：10655143
> 
> 赞同：1
> 
> 时间：2012-05-18T15:08:28.917
> 
> 标签：php, javascript, jquery

我遇到了一些 javascript 代码的问题，想知道是否有人可以提供帮助。我正在处理注册表，特别是“注册其他人”部分。我的代码工作得很好，除了当我尝试在 javascript 中复制单选按钮组时，它似乎不想更改组名属性。

这是javascript：

```
<script type="text/javascript">
$(document).ready(function(){

    $('#add').click(function() {
    $('<div class="container_add_registrant" >
    <p class="text_content">First name:<br /><input type="text" name="add_registrant[][fname]" id="add_registrant[][fname]" /></p>
    <p class="text_content">Last name:<br /><input type="text" name="add_registrant[][lname]" id="add_registrant[][lname]" /></p>
    <p class="text_content">Workout option: <?php get_event_options_additional($event_id); ?></p>

    <p class="text_content">Shirt size:<input type="radio" name="add_registrant[][shirtsize]" value="S" id="S" />S&nbsp;&nbsp;<input type="radio" name="add_registrant[][shirtsize]" value="M" id="M" />M&nbsp;&nbsp;<input type="radio" name="add_registrant[][shirtsize]" value="L" id="L" />L&nbsp;&nbsp;<input type="radio" name="add_registrant[][shirtsize]" value="XL" id="XL" />XL</p>

    <p class="text_content">Is this person a cancer survivor?:<input type="radio" name="add_registrant[][survivor]" value="Y" id="Y" />Yes <input type="radio" name="add_registrant[][survivor]" value="N" id="N" />No </p></div>')
    .fadeIn('slow').appendTo('.add_registrant');

    i++;
    });

    $('#remove').click(function() {
        if(i > 0) {
            $('.container_add_registrant:last').remove();
            i--;
        }
    });

});

 </script> 
```

这部分代码似乎是问题所在：

```
<p class="text_content">Shirt size:
   <input type="radio" name="add_registrant[][shirtsize]" value="S" id="S" />S&nbsp;&nbsp;
   <input type="radio" name="add_registrant[][shirtsize]" value="M" id="M" />M&nbsp;&nbsp;
   <input type="radio" name="add_registrant[][shirtsize]" value="L" id="L" />L&nbsp;&nbsp;
   <input type="radio" name="add_registrant[][shirtsize]" value="XL" id="XL" />XL
</p> 
```

这是小提琴网址（对不起，第一次使用这个网站）

[http://jsfiddle.net/4qaaN/1/](http://jsfiddle.net/4qaaN/1/)

单击“注册其他人”至少 2 次，您会看到我在使用单选按钮时遇到的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:34:29.760

由于您已经在计算 有多少新注册人`i`，您可以在运行时将其放入名称中以将它们分开。这是一个[例子](http://jsfiddle.net/4qaaN/2/)。

本质上，它只是

```
'<input type="radio" name="add_registrant[][shirtsize]' + i + '" value="S" id="S" />' 
```

`i`可以在任一侧，无论您喜欢将其解析出服务器端。

# .net - 如何在 VB.NET 中获取小数点后的数字

> ID：10655152
> 
> 赞同：0
> 
> 时间：2012-05-18T15:08:43.590
> 
> 标签：.net, vb.net, math

谁能给我一个简单的方法来找出双精度小数点后的数字？
我需要做的就是找出数字是否以 0 结尾，如 1.0 或 10.0 或 323.0 ？

你对此有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:11:45.887

你的意思是这样的：

```
if (x == Math.Floor(x)) 
```

? 请注意，通常使用二进制浮点运算，您希望有某种容差，因此 10.000001 被视为“非常接近 10”。例如：

```
if (x - Math.Floor(x) < Tolerance)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T15:12:50.280

只需使用`Mod`运算符，如下所示：

```
If (x Mod 1) = 0 Then
    ' Do some stuff
End If 
```

（参见[http://en.wikibooks.org/wiki/Visual_Basic_.NET/Arithmetic_operators](http://en.wikibooks.org/wiki/Visual_Basic_.NET/Arithmetic_operators)）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T15:33:13.217

您需要做的是乘以 10，然后再乘以 10。

例如。假设 x = 10.2

temp = x * 10 ' 温度等于 102

temp = temp % 10 ' 应该返回 2。 Temp 现在是您需要的小数点的值。

这也适用于负值。

如果您需要比较它是否为 0，您只需将您的 temp var 与 0 进行比较。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T15:40:32.763

如果您使用任何数字数据类型（例如双精度、单精度、整数、小数），则不能将 10.0 和 10 表示为两个不同且不同的值。没有办法做到这一点。如果您需要保留数字的尾数，即使它为零，您也必须将值存储为其他数据类型，例如字符串。

要验证已输入的字符串，您可以执行以下操作：

```
Public Function MantissaIsZero(ByVal value As String) As Boolean
    Dim result As Boolean = False
    Dim parts() As String = value.Split("."c)
    If parts.Length = 2 Then
        Dim mantissa As Integer = 0
        If Integer.TryParse(parts(1), mantissa) Then
            result = (mantissa = 0)
        End If
    End If
    Return result
End Function 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T15:14:59.217

试试这个功能：

```
Function CalculateDecimals(input As Double)
  Dim positiveInput As Double
  positiveInput = Math.Abs(input)
  Return positiveInput - Math.Floor(positiveInput)
End Function 
```

它会给你你正在寻找的小数。

以这种方式使用它：

```
If (Math.Abs(CalculateDecimals(yourNumber))<0.00001) Then ... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-18T16:08:16.257

如果您的输入是一个字符串，并且您想要识别具有小数的字符串，但这些小数位全为零，那么您可以使用正则表达式：

```
var regex = new Regex("^-?\\d+\\.0+$");
if (new Regex.IsMatch(input))
{
    // it's in the format you want
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-18T15:05:04.050

这是您可以尝试的方法。将 double 转换为 int 会删除小数位。然后您可以对相同的数字进行 Mod 运算，得到与小数位相同的余数。

```
(double)(4.9 % (int)(4.9)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-11T15:45:55.743

已经有一段时间了，但是我的解决方案：

我也使用了 mod 函数，但你必须小心，因为数据类型“Double”存在精度“问题”：

```
Dim numberDbl As Double = 1.2
Dim modValDbl As Double = 1.0
Dim remValDbl As Double = numberDbl Mod modValDbl
'remValDbl = 0.19999999999999996 -> not 100% precise

Dim numberDec As Decimal = 1.2D
Dim modValDec As Decimal = 1D
Dim remValDec As Decimal = numberDec Mod modValDec
'remValDec = 0.2 -> correct 
```

因此我写了这个函数：（例如：number = 1.25）

*   我首先取参数编号并用它自己的整数对其进行修改（1.25 mod 1 **）**
*   所以我得到我的数字的十进制值并将其存储到 remVal = 0.25
*   在循环中，我不断将**remVal**乘以10，并将该值与相同的**截断值**（即：2.5 <> 2）进行比较，直到它们相同
*   对于每个循环，我将**乘数**增加 10
*   只要两个值匹配（即：25 = 25），我就可以使用**remVal**和**multiplier返回我的十进制值**

    ```
    Public Shared Function getDecimalPlaces(number As Double) As Double
    Dim modVal As Integer = CInt(If(Math.Truncate(number) = 0, 1, Math.Truncate(number)))
    Dim remVal As Decimal = CDec(number) Mod modVal
    Dim retVal As Double = 0

    Debug.WriteLine("modVal: " + modVal.ToString)
    Debug.WriteLine("remVal: " + remVal.ToString)
    Dim multiplier As Decimal = 1

    While remVal * multiplier <> Math.Truncate(remVal * multiplier)
        Debug.WriteLine("remVal * multiplier <> Math.Truncate(remVal * multiplier): " + (remVal * multiplier).ToString + " <> " + (Math.Truncate(remVal * multiplier)).ToString)
        multiplier *= 10
        Debug.WriteLine("remVal * multiplier <> Math.Truncate(remVal * multiplier): " + (remVal * multiplier).ToString + " <> " + (Math.Truncate(remVal * multiplier)).ToString)
    End While

    retVal = CDbl(remVal * multiplier)

    Debug.WriteLine("remVal: " + remVal.ToString)
    Debug.WriteLine("multiplier: " + multiplier.ToString)
    Debug.WriteLine("retVal: " + retVal.ToString)
    Return retVal
    End Function

    'Output with number = 1.25
    'modVal: 1
    'remVal: 0,25
    'remVal * multiplier <> Math.Truncate(remVal * multiplier): 0,25 <> 0 -> true
    'remVal * multiplier <> Math.Truncate(remVal * multiplier): 2,50 <> 2 -> true
    'remVal * multiplier <> Math.Truncate(remVal * multiplier): 2,50 <> 2 -> true
    'remVal * multiplier <> Math.Truncate(remVal * multiplier): 25,00 <> 25 -> false: exit while
    'remVal: 0,25
    'multiplier: 100
    'retVal: 25 
    ```

# percentage - 从 SASS 中的百分比中减去像素？

> ID：10655153
> 
> 赞同：5
> 
> 时间：2012-05-18T15:08:58.337
> 
> 标签：percentage, sass, pixels

我知道你可以在 Sass/Scss 中做一些简单的数学运算。但是有没有办法从百分比中减去像素？例如：

```
$image-size: 200px;

.bio {
    width: 100% - $image-size;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-08-19T15:18:18.363

你可以使用**[calc()](https://developer.mozilla.org/en-US/docs/Web/CSS/calc)**函数来得到你想要的。它是实验性的，但仍然受到不同浏览器的[良好支持。](http://caniuse.com/#feat=calc)

使用*Sass*，您可以创建一个`calc mixin`以使其在具有`-webkit`和`-moz`前缀的更多浏览器版本上运行（不需要*Opera*版本）：

```
@mixin calc($key, $value) {
  #{$key}: -webkit-calc(#{$value});
  #{$key}: -moz-calc(#{$value});
  #{$key}: calc(#{$value});
} 
```

并用以下方式调用它：

```
.bio {
  @include calc("width", "100% - #{$image-size}");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T23:42:16.027

我不知道这会如何工作，事实上 SASS 不能神奇地知道你的盒子的大小。

现在，如果我得到您想要做的事情，最好的解决方案是将 .box 的父宽度包装到一个变量中，然后将您的图像宽度减去该变量 - 考虑到 100% 的宽度意味着它将获得某个宽度的 100%。

# javascript - Gmaps4Rails Gmaps.triggerOldOnload 方法未找到 javascript 错误

> ID：10655155
> 
> 赞同：2
> 
> 时间：2012-05-18T15:09:00.047
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, gmaps4rails

我在 Rails 项目中使用了令人惊叹的 gem gmaps4rails。它在我的本地机器上工作得很好，但是一旦部署在 Heroku 的 Cedar 堆栈上，javascript 就会在 处引发错误`window.onload = function() { Gmaps.triggerOldOnload(); Gmaps.loadMaps(); };`，抱怨 triggerOldOnload 在 Gmaps 上不存在。同样，它在本地运行良好。

这是出现错误的整个脚本块：

```
<SCRIPT type="text/javascript" charset="utf-8">
Gmaps.map = new Gmaps4RailsGoogle();
Gmaps.load_map = function() {
Gmaps.map.map_options.auto_adjust = true;
Gmaps.map.initialize();
Gmaps.map.markers = [{"title":"Project 1","lat":18.71381,"lng":-72.35581},    {"title":"Project 2","lat":18.71567,"lng":-72.35603}];
Gmaps.map.markers_conf.do_clustering = true;
Gmaps.map.create_markers();
Gmaps.map.adjustMapToBounds();
Gmaps.map.callback();
};
Gmaps.oldOnload = window.onload;
 window.onload = function() { Gmaps.triggerOldOnload(); Gmaps.loadMaps(); };
</SCRIPT> 
```

提前感谢您查看此内容！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T07:06:21.043

我猜你更新了 gem，但没有重新运行命令来复制应用程序中的资产。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T16:21:36.093

升级 gmaps4rails 后我遇到了类似的问题。

问题是生成的 js 文件的文件名和结构发生了变化。

在 application.js 中

现在有一个 gmaps4rails.base.js 需要包含在捆绑的资产中。这就是找不到方法的地方。

```
//= require gmaps4rails/gmaps4rails.base.js 
```

还

```
//= require gmaps4rails/googlemaps.js 
```

就是现在

```
//= require gmaps4rails/gmaps4rails.googlemaps.js 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T19:45:41.773

您的里程可能会有所不同 - 我不知道您使用的是什么版本的 Rails 或 GMaps4Rails，但是当我遇到 Rails 3.2.16/Gmaps4Rails v2 的这个问题时（提交 52d7161409a060ddeabc87aa3c10049adc5edd4d，按照[此处](https://github.com/JonKernPA/gmaps)的说明，在**添加地图部分Javascript**：

```
<script src="//maps.google.com/maps/api/js?v=3.13&sensor=false&libraries=geometry" type="text/javascript"></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script> 
```

# android - Android FileInputStream 代码导致崩溃

> ID：10655156
> 
> 赞同：0
> 
> 时间：2012-05-18T15:09:01.980
> 
> 标签：android, bufferedreader, fileinputstream

我已经解决了自己的问题，但我不知道为什么我的第一次尝试没有奏效，我希望有人能告诉我原因。我还希望是否有人能告诉我我的最终解决方案是否是“好”的解决方案（我的意思是，它是否有效）？

这是我第一次尝试读取之前创建的输入文件：

```
private byte[] mInputData;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second_view);

    Intent myIntent = getIntent();

    mFilename = myIntent.getStringExtra("FILENAME");
    mSplitSeq = myIntent.getStringExtra("SPLIT_SEQ");

    try {
        fis = openFileInput(mFilename);
        fis.read(mInputData);
        fis.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

这是我在网上找到的确实有效的东西：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second_view);

    Intent myIntent = getIntent();

    mFilename = myIntent.getStringExtra("FILENAME");
    mSplitSeq = myIntent.getStringExtra("SPLIT_SEQ");

    try {
        fis = openFileInput(mFilename);
        BufferedReader reader = new BufferedReader(new InputStreamReader(fis));
        String line = null, input="";
        while ((line = reader.readLine()) != null)
            mTimeStr += line;
        reader.close();
        fis.close();
        //fis.read(mInputData);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

我在第一个实现中收到的错误是调用 fis.read(mInputData) 函数时出现 NullPointerException。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:15:42.260

我很确定这是因为 mInputData 从未初始化。您需要在其中设置一条线，例如`mInputData = new byte[1000];`. 相反，您告诉`read()`将数据提供给等于 null 的引用，即 NullPointerException。

# asp.net - (ASP.NET) 母版页有 BG 图像，无法在内容页面中加载该 BG 图像

> ID：10655158
> 
> 赞同：0
> 
> 时间：2012-05-18T15:09:22.167
> 
> 标签：asp.net, web-config, master-pages

`.Master`页面组织为

**根/masters/xyz.master**

`.aspx`内容页面组织为

**根/folder1/sub_folder/xyzw.aspx**

如您所见，由于文件夹层次结构而出现问题

有什么方法可以让我在所有内容页面上的 .master 之一中看到我的 BG 图像集？

请举例说明

向我推荐具有更好组织的可能解决方案（即文件夹中的某些级别

我没有与基本母版页配置相关的错误/警告。甚至尝试设置 MasterPageFile`web.config`但没有运气

[新信息]

上次，我忘记告诉图片文件夹的位置，我不在站，所以我无法回复

你来了，

```
**Master Page:**

 - root -> Master Pages ->Default.master
 - root -> Images -> BG_purp_patt_2.jpg

     <%@ Master Language="C#" AutoEventWireup="true"
     CodeFile="Default.master.cs" Inherits="Master_Pages_Default" %>

ContentPlaceHolder(head)

     <body style="background-image: url('../Images/BG_purp_patt_2.jpg');
     background-repeat: no-repeat;">

ContentPlaceHolder(a)

ContentPlaceHolder(b)

ContentPlaceHolder(c)

**Start Page:** 

(Note. This page displays BG image )

 - root -> Home ->Home.aspx

    <%@ Page Title="" Language="C#" MasterPageFile="~/Master Pages/Default.master" AutoEventWireup="true"
        CodeFile="Home.aspx.cs" Inherits="Home_Home" %>

ContentPlaceHolder(head)

ContentPlaceHolder(a)

ContentPlaceHolder(b)

ContentPlaceHolder(c)

**Another Content Page:**

(Note. There is no display of BG image in this and rest of 20 or 30 pages inside subfolders organised in this pattern(root ->folder ->folder ->page.aspx))

 - root -> Jobs & Tenders -> 1_Faculty Position -> Default.aspx

    <%@ Page Title="" Language="C#" MasterPageFile="~/Master Pages/Default.master" AutoEventWireup="true"    CodeFile="Default.aspx.cs" Inherits="Jobs___Tenders_1_Faculty_Position_Default" %>

...ContentPlaceHolder(head)

..ContentPlaceHolder(a)

..ContentPlaceHolder(b)

..ContentPlaceHolder(c) 
```

我希望它清楚。

我认为这已经绰绰有余了，问题是 BG 在主页以外的内容页面中不可见（为什么？）

在你发帖之前，我尝试过使用“~”“../”连接但没有运气

我认为stackoverflow的作曲功能必须更容易：p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:18:59.323

与您指定图像的位置无关，ASP 应该解析正确的路径（使用 a`~`和`runat`属性）：

```
<img src="~/path/to/image.png" runat="server" /> 
```

如果您在 CSS 中指定背景图像，请尝试以下操作：

```
body { background-image: url(~/path/to/image.png); } 
```

每当您包含 CSS 文件时，请使用标签`runat`中的属性：`head`

```
<head runat="server">
...
</head> 
```

# php - regex to replace filepath to just filename in a string using php

> ID：10655162
> 
> 赞同：0
> 
> 时间：2012-05-18T15:09:35.897
> 
> 标签：php, regex, dom

I've got a css string like this :

```
$string = "div#test {background: url(images/test.gif); width:100px; } div#test2 {background: url(../images/test2.gif); } "; 
```

Basically I want to able to replace everything between url () to just the filename. So that it eventually looks like :

```
$string = "div#test {background: url(test.gif); width:100px; } div#test2 {background: url(test2.gif); } "; 
```

Sort of like applying basename but for relative urls and for all such instances.

Any ideas ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:12:22.720

尝试这个：

编辑：我修复了正则表达式

```
<?php 

$string = "div#test {background: url(images/test.gif); width:100px; } div#test2 {background: url(../images/test2.gif); } ";
$output = preg_replace('/([\.\w\/]*\/)/', '', $string);

var_dump($output);
string(93) "div#test {background: url(test.gif); width:100px; } div#test2 {background: url(test2.gif); } "
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:16:57.690

理所当然地认为您将文件名存储在变量中，您可以使用

```
$string = preg_replace('~url(.+)~', 'url(' . $filename . ')', $string); 
```

如果您想学习正则表达式，www.regular-expressions.info 是一个很好的来源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:24:59.573

假设您不必在一个字符串中匹配多个 div，您可以执行以下操作：

```
preg_replace(
    '@(.+url\()/?([^/]+/)*([^)]+)(\).+)@',
    '\\1\\3\\4',
    'div#test {background: url(images/test.gif); width:100px; }'
); 
```

这也允许您传递一个包含多个字符串的数组来替换

# javascript - Updating css within div not working

> ID：10655163
> 
> 赞同：0
> 
> 时间：2012-05-18T15:09:39.663
> 
> 标签：javascript, jquery

I'm attempting to update the css within a div using its id via :

```
$(this.id).removeClass("myCss"); 
```

Should'nt this work ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T15:10:12.073

Your selector is wrong:

```
$(this).removeClass("myCss"); 
```

Or, if you want to use the `id`, you'd need to concatenate it in:

```
$( "#" + this.id ).removeClass("myCss"); 
```

But that's really not necessary if `this` references your element to begin with.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T15:10:03.783

To select object by ID you should use `#` prefix:

```
$("#" + this.id).removeClass("myCss"); 
```

Otherwise, use just:

```
$(this).removeClass("myCss"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T15:10:16.463

No, it shouldn't :-) Just do

```
$(this).removeClass('myCss'); 
```

When selecting elements by "id" value, you have to include a leading "#" before the string. There's no point to doing that, however, if you've already got a reference to the DOM node.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T15:10:46.697

you should do:

```
$(this).removeClass("myCss"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T15:11:12.547

Here is the right code:

```
$(this).removeClass('myCss') 
```

# linux - How To Show Which Process Owns Disk Space In Linux

> ID：10655164
> 
> 赞同：3
> 
> 时间：2012-05-18T15:09:49.880
> 
> 标签：linux, file, handle, space, disk

I have run these commands to determine disk space usage on my Linux system.

`Filesystem Size Used Avail Use% Mounted on /dev/mapper/foovg-foo 326G 202G 108G 66% /export/data/foo`

`du -sk * | awk '{sum += $1}END{print sum}'` 132161064 ~ 126GB

So, 202G - 126G = 76G difference.

Where is the 76G disk space? How can I find out which process holding the file handle?
What is the file name deleted?

In Linux, the file descriptors under `/proc/pid/fd/` are soft link to the actual file.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:22:57.620

您在 du 命令中使用了`*`通配符，因此它不会拾取（隐藏）以 . 开头的目录`.`。例如，可能有`.nfs`文件占用空间，而您的命令不会占用这些空间。

您还可以使用该`-c`选项来告诉`du`生成总数，而不是使用`awk`.

请改用以下命令：

```
# cd /export/data/foo
# du -ch . 
```

此命令还将为您提供所有子目录的大小，以便您可以找到哪个使用更多空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T15:21:24.270

无论是否是原因，您都可以使用`lsof`. 这样的事情可能会有所帮助：

```
lsof | grep '(deleted)$' | sort -rnk 7 
```

换句话说，抓取所有已删除的文件并按大小降序对它们进行排序。

# facebook - Friend Requests

> ID：10655165
> 
> 赞同：0
> 
> 时间：2012-05-18T15:09:50.357
> 
> 标签：facebook, facebook-requests, facebook-friends

In the following example: [http://developers.facebook.com/docs/reference/dialogs/requests/](http://developers.facebook.com/docs/reference/dialogs/requests/) how can I fill the friend lists drop down with the users custom lists?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:05:07.437

One way would be to prompt the user for the extended "read_friendlists" permission, pull the friendlists data from the user when they authorize your application, then use the same lists to build the custom filters parameter:

"Additionally, an application can suggest custom filters as dictionaries with a name key and a user_ids key, which respectively have values that are a string and a list of user IDs. name is the name of the custom filter that will show in the selector. user_ids is the list of friends to include, in the order they are to appear."

# ios - 如何在 iPhone SDK 中显示完整大小的标签栏图标？

> ID：10655167
> 
> 赞同：0
> 
> 时间：2012-05-18T15:09:54.890
> 
> 标签：ios, iphone, uitabbarcontroller, uitabbar, uitabbaritem

如何以全尺寸显示标签栏的图像图标，如您可以看到的这张图片。![看到这张图片](../Images/b3564da5772067603eacc7cc55c78b2a.png)

这是我的图片，你看不到图片不完美![这是我的形象](../Images/7810c8b63a9f719cea27f0748125d4ce.png)

如何显示我的图像看起来像上面的图像显示我用来显示图像这个代码`navigationController2.tabBarItem.image = [UIImage imageNamed:@"camera_btn"];`

嘿，我已经找到了解决方案，但我不知道如何更改标签栏控制器视图，我不能像他们在这里那样制作我的相机按钮我正在从`AppDelegate.m`这样的文件创建标签栏控制器

```
self.tabbarController = [[[UITabBarController alloc] init] autorelease];
self.tabbarController.viewControllers = [NSArray arrayWithObjects:navigationController1,     navigationController2, navigationController3, nil]; 
```

这给了我输出，就像我展示的第二张图片一样，但是来自示例和我从[这里看到的代码提升了标签栏图标](http://idevrecipes.com/2010/12/16/raised-center-tab-bar-button/)

我必须使用这段代码，但它没有给我想要的确切结果，我认为它不会改变观点也请帮助我。

```
self.tabbarController.viewControllers = [NSArray arrayWithObjects:
                    [self viewControllerWithTabTitle:@"Feed" image:[UIImage imageNamed:@"112-group.png"]],
                    [self viewControllerWithTabTitle:@"Popular" image:[UIImage imageNamed:@"29-heart.png"]],
                    [self viewControllerWithTabTitle:@"Share" image:nil],
                    [self viewControllerWithTabTitle:@"News" image:[UIImage imageNamed:@"news.png"]],
                    [self viewControllerWithTabTitle:@"@user" image:[UIImage imageNamed:@"123-id-card.png"]], nil]; 
```

![这是我的形象。！](../Images/d548028649111e7c89f237de0a31ec4f.png)

我还添加了此代码以在 appdelegate.m 中创建中心按钮

```
-(void)willAppearIn:(UIWindow *)navigationController
{
    [self addCenterButtonWithImage:[UIImage imageNamed:@"cameraTabBarItem.png"] highlightImage:nil];
} 
```

![凸起的标签栏按钮的示例图像](../Images/ba345ef5803099399e096c9335b9147d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:51:26.113

您必须构建自己的 uitabbar 版本（或使用开源）。因为普通的 UITabbar 为文本标签留出了空间，即使它是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:50:40.050

使您的图像[正确大小为](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html)30x30，例如 tab1icon.png 和 60x60 tab1icon@2x.png

# vb.net - 用VB将文本内容存储为数组

> ID：10655173
> 
> 赞同：-1
> 
> 时间：2012-05-18T15:10:09.617
> 
> 标签：vb.net, arrays

我正在尝试做一些非常简单的事情。我需要获取一个以竖线分隔的文本文件并将文件的内容存储在一个数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:13:44.043

看看这个 - File.ReadAllText (http://msdn.microsoft.com/en-us/library/ms143368.aspx)

然后，您可以在分隔符（管道）上使用 .Split() 来获取字符串数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T15:15:13.973

我至少有一年没有做过 vb.net，但我会试一试：

首先读入你拥有的所有文件

```
var fileContent = System.IO.File.ReadAllText("myFile.txt") 
```

然后通过管道字符分割文件：

```
var fileSplit = fileContent.Split("|") 
```

`fileSplit`将是由管道字符分隔的文件的字符串数组。

我还没有测试过这个，语法是靠记忆的，但我相信你能弄明白:-)

# php - Ruby gems not seen within system call

> ID：10655177
> 
> 赞同：0
> 
> 时间：2012-05-18T15:10:24.123
> 
> 标签：php, ruby, gem, system

I have a problem where I can run a script with `require 'mysql2'` in it on the console fine, however within a php system call on the same machine it won't work.

Does anyone have any ideas how to fix this please?

Gareth

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:16:31.433

听起来您可能已经`GEM_HOME`在自己的环境中设置了，但是运行 PHP 的用户没有相同的设置。

[http://docs.rubygems.org/read/chapter/3#page83](http://docs.rubygems.org/read/chapter/3#page83)

# html - 在CSS中水平调整页面大小时如何停止图像缩小

> ID：10655181
> 
> 赞同：18
> 
> 时间：2012-05-18T15:10:36.667
> 
> 标签：html, css, alignment, centering

我有一个 1920x100 的图像，它插入到我的页面顶部：

```
<img src="./Resources/Images/banner.jpeg" style="position:absolute; top:0px; left:0px; height:100px; width:100%;" name="top"> 
```

我想要它，这样当页面水平调整大小时，图像不会随页面缩小，而是保持在屏幕的中心，如下所示：

![在此处输入图像描述](../Images/54d2f87517576583165e8859e0efe1c7.png)

这似乎是一件可以轻松实现的简单事情，但我还没有找到解决方案。

我可以将图像放在一个 div 中，并将 div 的左侧位置设置为 -(1920-pageWidth) / 2，但这将依赖于 JavaScript。我正在寻找一种更清洁的解决方案（如果有的话），只是为了尽量减少页面的复杂性，并最大限度地提高浏览器的兼容性。

是否有任何 CSS 属性可以用来实现这一点，或者我是否采用了完全错误的方式来实现这一点？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T15:12:14.403

您可以将此 css 属性添加到您的图像中：`min-width: 1280px`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T15:19:57.627

使用 CSS

```
div {
  background: url(./Resources/Images/banner.jpeg) no-repeat scroll center top transparent;
  height: 100px;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T15:29:53.843

只需将图像用作 a`background-image`并使用该`background-position` `center 0`值将其放置在元素的中心顶部。

看到这个[jsFiddle](http://jsfiddle.net/avwMT/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T15:20:04.423

这样的事情怎么办。（使用图像宽度的一半`margin-left`）

HTML：

```
<div id='wrapper'>
  <img src='./Resources/Images/banner.jpeg' id='banner'>
</div> 
```

CSS：

```
#wrapper{overflow:hidden;position:relative;}
#banner{position:absolute;top:0;left:50%;margin-left:-960px;} 
```

这是一个使用 div 演示它的小提琴（更改 的宽度`#wrapper`）：http: [//jsfiddle.net/mestekweb/mDkrE/](http://jsfiddle.net/mestekweb/mDkrE/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T15:19:56.037

不要使用`img`元素，而是使用与背景图像相同的图像，并定位到中心。它将始终居中，但当元素小于图像时可能会被剪裁。您还应该将 background-repeat 设置为 no-repeat，以防元素变大。

```
div { 
  background: url(/to/img) no-repeat 50% 0;
  margin: 0 auto;
} 
```

# xcode - 移动到不同的 Mac 时，XCode 中的 Git 子模块文件显示为红色

> ID：10655187
> 
> 赞同：5
> 
> 时间：2012-05-18T15:11:03.620
> 
> 标签：xcode, git, git-submodules

以下是我的问题的详细信息：

我有一个看起来像这样的目录结构：

![在此处输入图像描述](../Images/7ad285ae3f01ff868f18e74d1b337e30.png)

`ios-src`我所有的项目和源文件在哪里`ios-libs`，我的所有 git 子模块都在哪里。

当我将项目克隆到另一台机器时，ios-libs 目录中的所有文件在 XCode（v4.3.2）中显示为红色（或丢失），但是这些文件存在于磁盘上。

如果我从 XCode 中删除文件并重新添加它们，它不会解决问题，它们仍然是红色的并且项目无法编译。

目录都标记为`Relative to Group`.

如果我在检查器中选择文件，我会得到：

![在此处输入图像描述](../Images/c481502813835abbc56a963616ff162c.png)

这揭示了错误的相对路径。如果我选择浏览按钮（在路径右侧）并更正它，我会得到正确的相对路径：

![在此处输入图像描述](../Images/fa60dc7e5d4bf245a283e360d0ca72cf.png)

在我回到原来的（我家）机器之前，它会修复它。另外，如果我将`ios-lib`目录移动到它下面`ios-src`，它可以解决问题，但这是一种解决方法，我想知道解决方案。

似乎我在家用计算机上设置了错误，因为它似乎只在我在那里创建项目时发生。如果我在我的任何其他计算机上创建项目，这些项目可以在我的每一台机器上运行，包括我家的机器。它们都在运行 Lion 和相同的 XCode 版本。

非常感谢我能做些什么来解决这个问题的任何想法。我花了很多时间试图弄清楚它无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T15:18:12.570

将相对于组更改为相对于项目。

组不一定是物理目录。它们只是对项目中文件的引用的集合。

# jenkins - 将 Jenkins nightly build 的测试结果发布到 QC

> ID：10655197
> 
> 赞同：0
> 
> 时间：2012-05-18T15:11:38.987
> 
> 标签：jenkins

首先让我说我对詹金斯并不熟悉。我们目前有 jenkins 设置来运行一组夜间构建的 QTP 测试并收集结果。

我的问题是如何将这些结果导出到 QC？请注意：我不希望通过 jenkins 运行测试，只需导出结果。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:52:59.730

我不确定你的问题是什么，所以我将从一个建议开始，然后你可以澄清你的意思：

让您的测试生成 jUnit 测试报告（如果他们还没有这样做的话）。使用 Jenkins *Publish JUnit test result report* post-build 步骤发布这些报告。然后 QC 可以通过构建页面上的链接（“测试结果”）查看任何构建的结果，或者通过作业页面（“最新测试结果”）查看最新的成功构建。

您还可以在每次构建后通过电子邮件通知他们有可用的新结果，甚至可以在该电子邮件中为他们提供指向这些结果的链接（可以通过[Email-ext 插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)完成）。

# c# - C# - 下载 Excel 2010 时出错

> ID：10655201
> 
> 赞同：1
> 
> 时间：2012-05-18T15:11:48.360
> 
> 标签：c#, excel

我已经将使用 SOAP 工具箱（不再受支持）对 Web 服务进行一些调用的 Excel 2003 电子表格转换为使用 VSTO 的 Excel 2010。

电子表格工作得很好，并且（主要）做了它应该做的事情，现在我想从网站上向用户提供它。

我原以为它应该与提供仍然可用的 2003 版本相同，所以我基本上复制了 Excel 2003 电子表格的下载按钮，它应该可以正常工作。

当我为 2010 电子表格尝试此操作时，我收到一个 Excel 错误说明

“Excel 在“SpreadSheet_name.xlsx”中发现了不可读的内容。是否要恢复此工作簿的内容？如果您信任此工作簿的来源，请单击“是”。

Excel 然后修复了问题，电子表格可以正常使用。

当我从完成下载的源文件夹中打开电子表格时，它会毫无错误地打开，就像修复上述错误并保存文件一样。

这是用于当前 Excel 2003 下载按钮的代码 -

```
Response.WriteFileAsAttachment("application/ms-excel", Server.MapPath("~/pathname/Spreadsheet_2003.xls"), 8192);
Response.End(); 
```

这就是我为 2010 下载按钮单击所拥有的，上面是 Excel 2010 的更新 MIME 信息 -

```
Response.WriteFileAsAttachment("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", Server.MapPath("~/pathname/Spreadsheet_2010.xls"), 8192);
Response.End(); 
```

我已经尝试了各种论坛上建议的几件事，并且都得到了相同的结果。

我正在使用通过 VS 2010 运行的 C# 和 ASP.Net 来测试这个，所以有人建议 VS 中受限的 IIS 可能是个问题？

任何帮助或建议将不胜感激。

谢谢，乔治。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:23:58.553

我们使用的远程访问通信存在问题，导致下载出现此问题。这不是公司会解决的问题，所以我们必须忍受它并解决它。:(

# javascript - 在jQuery中检测单个按键事件上的多个键

> ID：10655202
> 
> 赞同：43
> 
> 时间：2012-05-18T15:12:10.497
> 
> 标签：javascript, jquery, keypress, jquery-events

是否有可能结合组合按键'来触发单个事件？

```
$(document).keyup(function(e){
    if (e.keyCode == 68 && e.keyCode == 69 && e.keyCode == 86) {
        alert('oh hai');
    }
}); 
```

我已经在 Chrome 中尝试过，但事件没有触发。

说我疯了，但我正在编写一个 Chrome 扩展程序，并希望将`D`+ `E`+`V`键一起推以强制它进入隐藏的开发人员模式。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-05-18T15:16:31.203

如果您想检测`d`、`e`和`v`键同时全部关闭，您必须同时观察`keydown`并`keyup`保留已关闭的地图。当他们都失败时，触发你的事件。

例如：[Live Copy](http://jsbin.com/ujuruv) | [来源](http://jsbin.com/ujuruv/edit)

```
var map = {68: false, 69: false, 86: false};
$(document).keydown(function(e) {
    if (e.keyCode in map) {
        map[e.keyCode] = true;
        if (map[68] && map[69] && map[86]) {
            // FIRE EVENT
        }
    }
}).keyup(function(e) {
    if (e.keyCode in map) {
        map[e.keyCode] = false;
    }
}); 
```

我假设您不在乎它们按什么顺序按下（因为可靠地按下会很痛苦），只要它们在某个时间点同时全部按下即可。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-18T15:18:48.847

类似于 Vega 的...但更简单

```
var down = {};
$(document).keydown(function(e) {
    down[e.keyCode] = true;
}).keyup(function(e) {
    if (down[68] && down[69] && down[86]) {
        alert('oh hai');
    }
    down[e.keyCode] = false;
});​ 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-18T15:30:41.937

也许更简单的组合键会更容易？

像 Shift + Alt + D 这样的东西怎么样？（您可能不应该使用 Control 键，因为大多数浏览器已经以一种或另一种方式解释 Ctrl+D）

代码是这样的：

```
if(e.shiftKey && e.altKey && e.keyCode == 68)
{
  alert('l33t!');
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-04-30T16:10:40.283

对于想要**避免使用 Jquery**的人，我有来自**TJ Crowder**的纯 javascript 答案。

 **```
//A W S D simultaneously
var map = {65: false, 87: false, 83: false, 68: false};
document.body.addEventListener('keydown', function (e) {
    var e = e || event; //to deal with old IE
    if (e.keyCode in map) {
        map[e.keyCode] = true;
        if (map[65] && map[87]) {
            console.log('up left');
        }else if (map[83] && map[68]) {
            console.log('down right');
        }else if (map[87] && map[68]) {
            console.log('up right');
        }else if (map[83] && map[65]) {
            console.log('down left');
        }
    }
});
document.body.addEventListener('keyup', function (e) {
    if (e.keyCode in map) {
        map[e.keyCode] = false;
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T15:14:42.010

您需要分别捕获三个关键事件并仅在第三个事件之后触发您的操作。

```
var keys = {
        d: { code: 100, pressed: false, next: 'e' },
        e: { code: 101, pressed: false, next: 'v' },
        v: { code: 118, pressed: false, next: 'd' }
    },
    nextKey = 'd';

$(document).keypress(function(e) {
    if (e.keyCode === keys[nextKey].code) {
        keys[nextKey].pressed = true;
        nextKey = keys[nextKey].next;
    } else {
        keys.d.pressed = false;
        keys.e.pressed = false;
        keys.v.pressed = false;
        nextKey = 'd';
    }

    if (keys.d.pressed && keys.e.pressed && keys.v.pressed) {
        alert('Entering dev mode...');
    }
});​ 
```

当然，有很多方法可以做到这一点。此示例不需要您同时按住按键，只需按顺序键入它们：`d` `e` `v`.

如果您使用它，您可能希望`pressed`在一段时间间隔后对其进行扩充以清除标志。

这是一个[工作示例](http://jsfiddle.net/6eCx2/)。

* * *

[免责声明：我意识到最初的问题是按键应该“一起按下”。这只是一种替代方案，因为其他回答者已经为一起按下的键提供了足够的解决方案。]

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-14T09:29:03.357

我尝试了三个最佳答案（截至这篇文章），但没有一个对我有用。**他们没有重置钥匙**。

如果需要 3 个键来触发脚本，则在触发一次后 - 按下 3 个键中的任何一个都会再次触发它。

我刚写了这个脚本，它运行得很好。它使用 Shift+S 触发，但您可以轻松更改它。按下组合后它会重置。

```
var saveArray = new Array();
saveArray[0] = false;
saveArray[1] = false;

$(document).ready(function(){

    $(document).keydown(function (f){
        if (f.keyCode == 16) {
            saveArray[0] = true;
        }
    });

    $(document).keyup(function (g){
        if(g.which == 16){
            saveArray[0] = false;
        }
    });

    $(document).keydown(function (h){
        if (h.keyCode == 83) {
            saveArray[1] = true;
            if(saveArray[0] == true && saveArray[1] == true){
                saveArray[0] = false;
                saveArray[1] = false;
                keypressSaveFunction();
            }
        }
    });

    $(document).keyup(function (i){
        if (i.which == 83) {
            saveArray[1] = false;
        }
    });
});

    function keypressSaveFunction(){
        alert("You pressed Shift+S");
    } 
```

小提琴：http: [//jsfiddle.net/9m8yswwo/13/](http://jsfiddle.net/9m8yswwo/13/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-07T04:09:05.300

一个更现代的解决方案，利用[箭头函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)和[休息参数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters)：

```
const multipleKeypress = (function($document) {
  // Map of keys which are currently down.
  const keymap = {}
  // Update keymap on keydown and keyup events.
  $document.on(
    "keydown keyup"
    // If the key is down, assign true to the corresponding
    // propery of keymap, otherwise assign false.
   ,event => keymap[event.keyCode] = event.type === "keydown"
  )
  // The actual function.
  // Takes listener as the first argument,
  // rest of the arguments are key codes.
  return (listener, ...keys) =>
    $document.keydown(() => {
      // Check if every of the specified keys is down.
      if (keys.every(key => keymap[key]))
        listener(event)
    })
// Pass a jQuery document object to cache it.
}($(document)))

// Example usage:
multipleKeypress(() => console.log("pressed"), 68, 69, 86)

// Automatically focus the snippet result
window.focus()
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<p>Try pressing <kbd>d</kbd>, <kbd>e</kbd> and <kbd>v</kbd> at once.</p>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-18T15:15:00.183

如果我很好理解：例如小提琴， http: [//jsfiddle.net/gAtTk/](http://jsfiddle.net/gAtTk/)（看看你的js控制台）

此代码将让您输入单词“ `dev`”（在此示例中，最后`keyup`删除事件）

```
(function(seq) {
    var tmp = seq.slice();
    $(document).on("keyup.entersequence", function(e){
        if (!(e.keyCode === tmp.pop())) {
           tmp = seq.slice();
        }
        else {
           console.log(e.keyCode);  
            if (!tmp.length) {
               console.log('end');
               $(document).off("keyup.entersequence");
            }
        }
    });
}([68,69,86].reverse())); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-18T15:15:16.613

您应该使用 keydown 和 keyup 事件来“同时”处理多个键。

```
input.on("keydown", function (e) {
                        if (e.which == 17) {
                            isCtrl = true; // Ctrl
                            return;
                        }

                        /* Ctrl and "c" */
                        if (isCtrl && e.which == 67) {
                            //some code 
                        }
                    }).keyup(function (e) {
                        if (e.which == 17) {
                            isCtrl = false; // no Ctrl
                        }
                    }); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-16T15:34:46.707

使用此代码可在 100 毫秒后通过多次按键 + 超时触发事件，以防止输入错误。在这个例子中：如果在 100ms 的时间内按下 A,Z,E，就会触发事件。

```
var map = {65:false,90:false,69:false}; //Modify keyCodes here
$(document).keydown(function(e){
    console.log(e.keyCode);
    map[e.keyCode] = e.keyCode in map ? true : map[e.keyCode] || false;
    var result = Object.keys(map).filter(function(key){
        return map[key];
    }).length === Object.keys(map).length ? true : false;
    if(result){
        //Your event here
        Object.keys(map).forEach(function(key){
            map[key] = false;
        });
    }
    setTimeout(function(){
        map[e.keyCode] = false;
    },100);
}); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-10-12T18:14:31.883

如果您关心订单并且还需要按住一个键并点击另一个键（例如：Shift + DEL、DEL、DEL ...），而无需抬起第一个键以再次触发事件...我修改了 @BlakePlumm 的 [fiddle] 评论，扩展了 @lu1s 对 @ParthThakkar 的回答的评论。

此外，使用 jQuery 的 .on() 允许您仅在某些元素上侦听键序列。将“body”更改为“input.selector”或其他任何内容。

```
var map = [];
var down = [];
$(document).on('keydown','body', function(e) {
    if(!map[e.which]){
        down.push(e.which);
        if(down[0] === 68 && down[1] === 69 && down[2] === 86) {
            console.log('D + E + V');
        } else if(down[0] === 16 && down[1] === 46) {
            console.log('SHIFT + DEL');
        }
        /* more conditions here */
    }
    map[e.which] = true;
}).keyup(function(e) {
    map[e.which] = false;

    /* important for detecting repeat presses of
       last key while holding first key(s)
       (can be shortened. see fiddle) */
    var len = down.length;
    while (len--) {
        if(down[len] === e.which) down.splice(len,1); //removes only the keyup'd key
    }        
    $('.alert').html('');
}); 
```

额外的想法：如果你只关心顺序 - 也就是说，只要你的主要事件触发键最后按下（像CTRL + SHIFT + TAB，TAB，TAB之类的东西），第一个键只需要按下，添加这个条件：

```
else if(down.length>2) {
    if($.inArray(68,down)!=-1 && $.inArray(69,down)!=-1 && down[2] === 86) {
        $('.alert').html('A hacky D+E+V was pressed');
    }
} 
```

摆弄更多精彩的选项和现场演示：- [http://jsfiddle.net/kstarr/4ftL1p3k/](http://jsfiddle.net/kstarr/4ftL1p3k/)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-10-23T11:29:36.077

[https://github.com/JesseBuesking/jquery.hotkeys.extended](https://github.com/JesseBuesking/jquery.hotkeys.extended)

看一下这个。你可能正在寻找这个。

我们可以在多次按键时触发一个功能。例如：p+t+k

```
 $(document).hotkeys('p', 't', 'k', function (){
        //show blurbox
        $('#popup').blurbox({
            blur: 10, animateBlur: true, bgColor: 'rgba(255,255,0,0.2)'
        })bb.show();
    }); 
```

也许你正在寻找这个。**

# perl - perl：扩展代码以从网站获取特定信息

> ID：10655207
> 
> 赞同：1
> 
> 时间：2012-05-18T15:12:32.333
> 
> 标签：perl

我有一个代表蛋白质的 ID 代码。有一个名为 InterPro 的网站用于处理蛋白质相关信息。该网站的 URL 包含该特定代码。通过更改该 URL 中的代码，我可以获得有关任何蛋白质的信息。我在 perl 中开发了一个脚本来直接从 web 获取信息。我使用了以下代码

```
 my $uniprot= "P15700";
    my $resp= '';
    my $url= "http://wwwdev.ebi.ac.uk/interpro/ISearch?query=$uniprot+";
    my $file = "$uniprot";
    $resp = getstore( $url, $file ); 

exit;
} 
```

在此示例中，P15700 是蛋白质的唯一 ID，网址是[http://wwwdev.ebi.ac.uk/interpro/ISearch?query=P15700+](http://wwwdev.ebi.ac.uk/interpro/ISearch?query=P15700+)。现在这将检​​索整个 html 页面。但是，我需要该页面上的“蛋白质家族成员”标题下的特定信息。就像在这个例子中如果你打开这个链接，你可以在蛋白质家族成员的标题下找到“腺苷酸激酶”。我只需要在另一个输出文本文件中显示该信息，该文件显示一个表格，其中一列表示 ID，另一列表示蛋白质家族成员资格下的信息。我是 perl 新手，没有计算机科学背景。相反，我是一名生物学家。所以，我想知道上面提到的任务是否可以使用 perl 来完成。如果是，如何？如果有人能解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T16:08:23.510

```
use strictures;
use Web::Query 'wq';
my $w = wq 'http://wwwdev.ebi.ac.uk/interpro/ISearch?query=P15700+';
$w->find('.prot_fam a')->text;
# expression returns:
# (
#     'Adenylate kinase',
#     'UMP-CMP kinase',
# ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T15:53:15.657

这与解析网页 HTML 有关，IMO 很少是一个好主意。该页面可能随时更改，这将导致您的脚本停止正常工作。如果您仍然对这里的解决方案感兴趣：

```
use Mojo::DOM;    
my $dom = Mojo::DOM->new($resp);
my $name = $dom->find('div.prot_fam a')->[0]->text; 
```

现在`$name`变量将保存`Adenylate kinase`字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:53:14.790

[一切都可以使用 Perl 完成 :)](http://xkcd.com/224/)至于这个特殊问题，看看[我的这个关于递归 Web 下载和 DOM 代码的问题](https://stackoverflow.com/q/10075244/269126)。

由于您不是程序员，因此其中大部分内容对您来说都是新闻。

让我们先了解一下 DOM。它是浏览网页时在浏览器中构建的 HTML 树。您可以对使用[Firebug](https://addons.mozilla.org/de/firefox/addon/firebug/)或 Chrome、IE 和 Opera 的等效插件或内置插件（无论您使用的是哪一个）进行适当的了解。

因此，您必须访问此页面并分析其 DOM。看起来您要查找的信息在一个`<div class="prot_fam">`元素中。这就是编写代码所需的所有信息：

```
D:\ :: more /t2 prot.pl
use strict;
use warnings;
use LWP::UserAgent;
use HTML::TreeBuilder::XPath;

my $url  = shift || die 'pass URL as argument!';
my $file = shift || die 'pass output filename as argument!';

my $ua = LWP::UserAgent->new;
my $rsp = $ua->mirror( $url, $file );
if ( ! $rsp->is_success ) {
  die $rsp->status_line;
}

my $tree = HTML::TreeBuilder::XPath->new;
$tree->parse_file( $file ) or die;

print $_, "\n" for map $_->as_XML_indented,
$tree->findnodes(q( //div[@class='prot_fam'] ));

D:\ :: perl prot.pl http://wwwdev.ebi.ac.uk/interpro/ISearch?query=P15700 P15700.html
<div class="prot_fam">
  <div class="entry-parent">
    <div class="entry-parent">
     <a href="IEntrySummary?ac=IPR000850&amp;query=P15700">Adenylate kinase</a>
      <div class="entry-child-prot">
        <div class="entry-parent">
         <a href="IEntrySummary?ac=IPR006266&amp;query=P15700">UMP-CMP kinase</a>
        </div>
      </div>
    </div>
  </div>
</div> 
```

**使用添加另一个样本`Mojo::DOM`**

```
use strict;
use warnings;
use LWP::UserAgent;
use Mojo::DOM;
my $url = shift || die 'URL!';
my $ua  = LWP::UserAgent->new;
my $rsp = $ua->get( $url );
my $dom = Mojo::DOM->new($rsp->content);
for ( $dom->find('div[class="prot_fam"]')->each ) {
    print $_->find('a'), "\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T15:54:32.740

甚至不性感，但它可以工作（基于 HTML::Treebuilder 模块）——你必须解析 HTML 并提取信息。在此示例中，结果将作为 csv 存储在文件“result.txt”中

```
use LWP::Simple;
use HTML::TreeBuilder;

my $uniprot= "P15700";
my $url= "http://wwwdev.ebi.ac.uk/interpro/ISearch?query=$uniprot+";
my $resp = get( $url );

my $tree = HTML::TreeBuilder->new_from_content($resp);
my $first=$tree->look_down(_tag => 'div',class => 'prot_fam') ;
$first=$first->look_down(_tag => 'div',class => 'entry-parent');
$first=$first->look_down(_tag => 'div',class => 'entry-parent');
$first=$first->look_down(_tag => 'a');
open (FH,">>result.txt");
print FH $uniprot.";";
print FH $first->content_list;
print FH "\n";
close(FH); 
```

**编辑：** 这是检查“uniprots”批次的变体。玩弄睡眠延迟

```
use LWP::Simple;
use HTML::TreeBuilder;

my @ports=qw(Q9H4B7 Q96RI1 P04150 P35354 P23219 P61073 P0A3M6 Q8DR59 Q7CRA4 Q27738 P35367 P35367 P35367 P08172 P35367 P10275 P25021 P07550 P08588 P13945);

for (my $i=0;$i < scalar(@ports);$i++) {
my $url= "http://wwwdev.ebi.ac.uk/interpro/ISearch?query=".$ports[$i]."+";
my $resp = get( $url );

my $tree = HTML::TreeBuilder->new_from_content($resp);
my $first=$tree->look_down(_tag => 'div',class => 'prot_fam') ;
$first=$first->look_down(_tag => 'div',class => 'entry-parent');
$first=$first->look_down(_tag => 'div',class => 'entry-parent');
$first=$first->look_down(_tag => 'a');
open (FH,">>result.txt");
print FH $ports[$i].";";
print FH $first->content_list;
print FH "\n";
close(FH);
sleep 10;
} 
```

# android - 如何将相机图像从一个意图传递到android中的另一个意图？

> ID：10655213
> 
> 赞同：0
> 
> 时间：2012-05-18T15:12:52.770
> 
> 标签：android, android-intent, bitmap, stack-overflow, android-camera-intent

我正在尝试将相机图像从一个意图发送到另一个意图来显示。目前我正在尝试使用以下方法，

一旦图像被捕获

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {  

     super.onActivityResult(requestCode, resultCode, data);  
     switch(requestCode)
     {
         case CAMERA_RECEIPTREQUEST:  
         if(resultCode== Activity.RESULT_OK)
         {
         BitmapFactory.Options options = new BitmapFactory.Options();
         options.inSampleSize = 8;
         //ImageView jpgView = (ImageView)findViewById(R.id.imageView1);
         Bitmap receipt = BitmapFactory.decodeFile(photo.toString(),options);  

         Intent imagepass = new Intent(Activity1.this,Activity2.class);
         imagepass.putExtra("imagepass", imagepass);
         startActivity(imagepass); 
```

在第二个活动

```
 @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.receiptreview);   
        //creating view ids
        createViewIds();  

        Bitmap receiptimage = (Bitmap) getIntent().getExtras().getParcelable("imagepass");
        receipt.setImageBitmap(receiptimage); 
    } 
```

但它显示 StackOverFlow 错误，

```
 at java.util.HashMap$EntrySet.iterator(HashMap.java:944)
        at android.os.Parcel.writeMapInternal(Parcel.java:486)
        at android.os.Bundle.writeToParcel(Bundle.java:1552)
        at android.os.Parcel.writeBundle(Parcel.java:502)
        at android.content.Intent.writeToParcel(Intent.java:5477) 
```

我不确定我是否尝试了错误的方法。我正在寻找一些样本或解决方案。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:20:49.580

利用

```
 Bitmap receipt = BitmapFactory.decodeFile(photo.toString(),options);  

         Intent imagepass = new Intent(Activity1.this,Activity2.class);
         imagepass.putExtra("imagepass", receipt );
         startActivity(imagepass); 
```

代替

```
 Bitmap receipt = BitmapFactory.decodeFile(photo.toString(),options);  

         Intent imagepass = new Intent(Activity1.this,Activity2.class);
         imagepass.putExtra("imagepass", imagepass);
         startActivity(imagepass); 
```

您正在传入 Intent 实例 imagepass，`imagepass.putExtra("imagepass", imagepass);`因此传入`Bitmap`实例`imagepass.putExtra("imagepass", receipt );`

**编辑：**

要在 android 中的活动之间传递图像（位图），请参阅这些帖子：

[您如何使用捆绑包在 android 活动之间传递图像（位图）？](https://stackoverflow.com/questions/4352172/how-do-you-pass-images-bitmaps-between-android-activities-using-bundles)

[如何将 Bitmap 对象从一个活动传递到另一个活动](https://stackoverflow.com/questions/2459524/how-can-i-pass-a-bitmap-object-from-one-activity-to-another)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:22:00.827

从我可以看到您传递要发送的意图本身。尝试：

```
imagepass.putExtra("imagepass", receipt); 
```

可能有效，我自己对 android 还是新手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:53:05.163

我们可以尝试另一种方法将图像转换为字节数组，然后通过意图传递字节数组，在被调用的活动中我们可以将字节数组转换为位图

# asp.net - 如何在 ASP.NET (VB) 中更改下拉列表值

> ID：10655215
> 
> 赞同：2
> 
> 时间：2012-05-18T15:13:00.467
> 
> 标签：asp.net, vb.net

我想知道在选择第一个下拉列表值后如何更改第二个下拉列表值。

最好的例子是国家和州。用户选择国家后，国家值应相应改变。

我还是 ASP.NET 的新手，我知道在 PHP 中可以使用 javascript 轻松完成。

我可以知道如何使用 VB 语言在 ASP.NET 中做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:26:54.827

您需要处理国家下拉列表的[SelectedIndexChanged事件。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedindexchanged.aspx)下拉菜单应`autopostback`设置为 true。

捕获选定的索引（可能是国家 ID）并根据 countryid 填充州

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:14:48.577

这在 asp.net 中称为级联下拉菜单

[http://www.asp.net/web-forms/videos/aspnet-ajax/use-aspnet-ajax-cascading-drop-down-control-to-access-a-database](http://www.asp.net/web-forms/videos/aspnet-ajax/use-aspnet-ajax-cascading-drop-down-control-to-access-a-database)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:17:01.993

[您可以像在 ASP.NET (VB) 中实现国家/州/城市下拉列表的简单方法中](http://www.codeproject.com/Articles/38231/Simple-Way-to-Implement-Country-State-City-Dropdow)所做的那样执行此操作

# ios - WiFi 连接通知 (CaptiveNetwork)

> ID：10655216
> 
> 赞同：4
> 
> 时间：2012-05-18T15:13:06.207
> 
> 标签：ios, captivenetwork

尽管我的应用当前未运行，但我试图在用户连接到特定 WiFi 网络时收到通知。在我看来这是不可能的，但有一个 API 似乎让我*几乎*可以做到：CaptiveNetwork。理想情况下，我希望在用户连接到特定 SSID 时唤醒我的应用程序，以便我可以采取行动（例如，有点像重大的位置变化）。

我可以使用“CNSetSupportedSSIDs”注册一个 SSID 列表，但似乎没有任何方法可以连接到实际的用户连接。CaptiveNetwork 上的文档非常少（实际上，只有一页 Apple 的官方文档，没有示例）。

谁能确认没有办法做到这一点？无论如何，您应该如何使用 CaptiveNetwork 进行身份验证？用户是否应该知道您的应用程序是可以连接到此特定网络的唯一方式，然后启动它进行身份验证？这是我能想到的唯一用例......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:05:21.450

我使用了一个解决方案。苹果为此提供了一些演示代码：Reachability [http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)这将有所帮助。我将它用于所有连接的应用程序，以处理拥有或失去网络连接的问题。

查看头文件有 StartNotifier 和 stopNotifier 方法。这似乎可以满足您的要求。

我没有使用 CaptiveNetwork API。

# python - ipython notebook --pylab inline：缩放绘图

> ID：10655217
> 
> 赞同：87
> 
> 时间：2012-05-18T15:13:07.577
> 
> 标签：python, matplotlib, ipython

如果激活内联，是否可以放大绘图？特别是对于 3d 绘图，旋转和缩放是必要的功能。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2016-12-13T16:20:27.093

您现在可以使用`%matplotlib notebook`代替，`%matplotlib inline`并且您将能够与您的绘图进行交互。

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2014-04-08T21:57:26.470

现在多亏了[mpld3](http://mpld3.github.io/)，启用放大内联图变得非常容易！

您所要做的就是安装 mpld3 ( `pip install mpld3`)，然后将其添加到您的笔记本中：

```
%matplotlib inline
import mpld3
mpld3.enable_notebook() 
```

现在您的绘图将在左下角获得一个工具栏菜单，您可以在其中启用鼠标缩放:)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-18T23:06:11.940

目前，最接近的方法是使用该`figsize`功能以更大的尺寸重新绘制它。它需要以英寸为单位的尺寸，这在我第一次尝试使用它时让我很吃惊。

有一些用于丰富后端的工厂，可以使用 HTML5 实时操作绘图，但我认为这还需要几个月的时间才能准备好。

如果您在本地计算机上使用笔记本，目前最简单的选择可能是不使用内联模式，因此绘图会作为单独的窗口弹出。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-03-17T19:50:53.563

*mpld3*减慢了我的笔记本的执行速度。我发现最好使用[nbagg](http://matplotlib.org/users/whats_new.html#the-nbagg-backend)后端，它提供相同的交互式工具，但也允许通过右键菜单保存图形：

```
import matplotlib
matplotlib.use('nbagg')
import matplotlib.pyplot as plt 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-03-19T02:39:06.713

最近出现的另一个很好的例子是将工作外包给 plotly：

> [https://plot.ly/python/3d-plots-tutorial/](https://plot.ly/python/3d-plots-tutorial/)

让他们为您处理渲染、平移和缩放！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-26T18:52:26.817

`matplotlib.use('nbagg')`也没有为我工作。我确实发现`mdplt3`很慢。我最终没有缩放，而是调整了我的身材（让它变大），使用这篇文章：[ipython notebook 中的绘图宽度设置](https://stackoverflow.com/questions/29589119/plot-width-settings-in-ipython-notebook)

# iphone - Facebook Connect - 安装 GIT，#import "Facebook.h" "找不到文件"

> ID：10655219
> 
> 赞同：2
> 
> 时间：2012-05-18T15:13:13.857
> 
> 标签：iphone, xcode, facebook, fbconnect

我正在**尝试**按照[https://developers.facebook.com/docs/mobile/ios/build/](https://developers.facebook.com/docs/mobile/ios/build/)上的教程进行操作， 并且遇到大量错误和问题。什么是 GIT，我按照教程中的说明安装了它，但我没用。我也有代码行

```
#import "Facebook.h" 
```

这给了我错误“找不到文件”

请帮助我已经在 Facebook 工作了几个月

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:21:51.053

我认为您的 SDK 错过了 FBBundle，因此可能会发生这种情况......所以如果您想要演示，请使用最新的 SDK 并使用其 API 密钥实现，那么这里是链接......

[https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)

但是此链接使用另一个 SDK...希望这对您有所帮助.... :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T03:01:34.087

SDK 中似乎不再存在 Facebook.h 文件。我下载了 3.1 SDK，搜索了 Facebook.h，但什么也没有。此外，查看 SDK 的 Headers 文件夹，我看不到任何不是以 FB 开头的内容。我希望有一本关于这些东西的教科书。网上的FB教程似乎没有太大帮助。

# c# - DropdownListFor所选值未在呈现的html中选择

> ID：10655220
> 
> 赞同：3
> 
> 时间：2012-05-18T15:13:31.900
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有一个我正在尝试使用的扩展方法，您可以在其中使用枚举属性创建下拉列表，并设置所选项目：

```
public enum DefaultEnumSelectItemOptions
{
    AddDefaultItemIfEnumIsZero,
    ZeroEnumIsDefaultItem
}
public static SelectList ToSelectList(this object enumObj, DefaultEnumSelectItemOptions option = DefaultEnumSelectItemOptions.AddDefaultItemIfEnumIsZero)
{
    var asEnum = Enum.Parse(enumObj.GetType(), enumObj.ToString());
    var values = Enum.GetValues(enumObj.GetType());
    var dataItems = new List<Tuple<string, int>>();
    dataItems.Add(new Tuple<string, int>("Select One", -1));
    for (int i = 0; i < values.Length; i++)
    {
        int enumValue = (int)values.GetValue(i);
        if (enumValue == 0)
        {
            if (option != DefaultEnumSelectItemOptions.AddDefaultItemIfEnumIsZero)
            {
                dataItems.Add(new Tuple<string, int>(values.GetValue(i).ToString(), enumValue));
            }
        }
        else
        {
            dataItems.Add(new Tuple<string, int>(values.GetValue(i).ToString(), enumValue));
        }
    }
    var selectedItemValue = (int)enumObj;
    if (selectedItemValue == 0 && option == DefaultEnumSelectItemOptions.AddDefaultItemIfEnumIsZero)
    {
        selectedItemValue = -1;
    }
    return new SelectList(dataItems, "Item2", "Item1", selectedItemValue);
} 
```

模型如下所示：

```
public enum PropertyTypes
{
    Unknown=0,
    Vehicle,
    Other
}

[DataContract]
public class Property : ClaimEntity
{
    [DataMember]
    public PropertyTypes PropertyType { get; set; }

    public Property()
    {
        this.PropertyType = PropertyTypes.Vehicle;
    }
} 
```

最后，视图如下所示：

```
@Html.DropDownListFor(m => m.PropertyType, Model.PropertyType.ToSelectList()) 
```

当我在扩展方法中设置断点时，它似乎是正确的，但选定的选项没有出现在 html 中。

![下拉问题](../Images/3bf6ed8ac9a7cf41c9043e26f9e1f7ed.png)

我究竟做错了什么？

**编辑**我将其更改为`SelectListItem`按照建议使用，但是我仍然没有看到选择的值：

![在此处输入图像描述](../Images/d3ebb06eb64a799aff6ee9cdd0b5add8.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T15:28:02.173

实际上，我自己也遇到了这个确切的问题，并发现 DropDownListFor（和 DropDownList）助手对于他们自己的利益来说有点太聪明了。

*即使*你传入了其中一个的集合`SelectListItem`，`Selected = true`帮助程序实际上会评估你的模型，对其执行 a`Convert.ToString()`并尝试匹配该值。如果它没有找到该值，它将不选择任何内容。

我个人认为这是 MVC 中的一个重大错误，他们似乎没有在 MVC4 中纠正这个错误。他们认为`ToString()`对象的方法将匹配下拉列表中的值（而不是显示文本）是完全错误的假设。

编辑：至于解决这个问题的方法......

1.  更改您的`ToString()`方法以返回值并找出另一种获取显示文本的方法。
2.  由于您使用的是枚举，因此您可以只为您的值和显示文本提供字符串版本。它仍然会很好地绑定。
3.  建立自己的下拉菜单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:27:21.857

如果有人感兴趣，我已经使用这种方法来创建我的下拉列表，它可以工作，但可能不是一个聪明的方法，因为我是 MVC 的新手。您需要检查 firstelement 的枚举值是否对应于任何有效的枚举并将其推送到选择列表方法重载中，但我很着急所以不这样做。

```
using System;
using System.Collections.Generic;
using System.Linq.Expressions;
using System.Web.Mvc;
using System.Web.Mvc.Html;

    public static class Extensions
    {
        public static MvcHtmlString EnumDropDownListFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> modelExpression, string firstElement)
        {
            var typeOfProperty = modelExpression.ReturnType;
            if (!typeOfProperty.IsEnum)
            {
                throw new ArgumentException(string.Format("Type {0} is not an enum", typeOfProperty));
            }

            Dictionary<int, string> KeyValuePair = new Dictionary<int, string>();
            Array EnumValues = Enum.GetValues(typeOfProperty);
            foreach (var item in EnumValues)
            {
                KeyValuePair.Add((int)item, item.ToString());
            }

            var selectList = new SelectList(KeyValuePair, "Key", "Value");
            return htmlHelper.DropDownListFor(modelExpression, selectList, firstElement);
        }
    } 
```

并在我的页面中使用它作为

```
Html.EnumDropDownListFor(m => m.AccountType, ContextConstants.defaultSelectionString) 
```

# css - 多个匹配的子串选择器

> ID：10655221
> 
> 赞同：8
> 
> 时间：2012-05-18T15:13:33.647
> 
> 标签：css, css-selectors

我正在尝试创建一个规则来匹配所有以该类开头`icon-`的`btn`类。`[class^="icon-"] {`匹配第一个条件，但我如何添加“也有 .btn 类？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T15:16:42.850

这有效：

```
.btn[class*="icon-"] 
```

所以将，

```
[class*="icon-"][class~="btn"] 
```

看看我的小提琴：http: [//jsfiddle.net/VaACP/1/](http://jsfiddle.net/VaACP/1/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T15:15:13.037

### `icon-`一开始就寻找

您可以尝试以下操作 - 图标类需要在属性中排在第一位：

```
[class^='icon-'].btn 
```

到这个 HTML

```
<div class="icon-1 btn">Foo</div>  <!-- Matched -->
<div class="icon-2 btn">Bar</div>  <!-- Matched -->
<div class="btn icon-3">Fizz</div> <!-- Not Matched -->
<div class="icon btn">Buzz</div>   <!-- Not Matched --> 
```

### 在内部寻找`icon-`（小心！）

您可以修改查询以基于子字符串进行类搜索：

```
[class*='icon-'].btn 
```

但请注意，这对于*类似于* `icon-`、喜欢`myicon-1`或的类会产生积极影响`noicon-2`。

### 寻找`icon-`内在的任何地方

如果您不确定`icon-`该类将在属性中显示的位置，您可以查找这两个示例：

```
[class^='icon-'].btn, [class*=' icon-'].btn 
```

这将`icon-`在开头或内部的任何位置（前面有空格）找到类。

```
<div class="icon-1 btn">Foo</div>  <!-- Matched -->
<div class="icon-2 btn">Bar</div>  <!-- Matched -->
<div class="btn icon-3">Fizz</div> <!-- Matched -->
<div class="icon btn">Buzz</div>   <!-- Not Matched --> 
```

# session - 会话变量和 cffileupload 的问题

> ID：10655225
> 
> 赞同：0
> 
> 时间：2012-05-18T15:13:45.753
> 
> 标签：session, coldfusion, upload

由于我在共享主机上，因此我无权对 Coldfusion 管理员进行任何更改。但我正在运行 cf9 并尝试使用该标签进行多张图片上传。一切看起来都很好，直到我单击上传按钮并返回 302 错误。经过一番研究，我发现这是因为我的这部分代码在管理员登录之后，并且会话变量没有通过带有标签的闪存传递，然后重定向到登录页面。根据我所见，解决方案是确保`SESSIONMANAGEMENT="Yes"`在 Application.cfm 文件中并附`?#urlEncodedFormat(session.urltoken)#`加到应该进行上传的 url。我看到的唯一另一件事是进入 Coldfusion 管理员并更改会话管理的类型。要么，`Java EE servlet session management`要么`ColdFusion session management`我做不到。

我希望还有其他选择可以让它发挥作用，或者我做错了一些人可以指出的事情。

这是我的代码示例：

test.cfm

```
<script> 
var foo = function(result) 
{ 
    alert(ColdFusion.JSON.encode(result)); 
} 
</script> 
<cffileupload url="uploadFiles.cfm?#urlEncodedFormat(session.urltoken)#" width=600 height=400/> 
```

上传文件.cfm：

```
<cffile action="uploadAll" destination="#Application.filePath#Gallery\" nameconflict="makeunique"> 
<cfset str.STATUS = 200>
<cfset str.MESSAGE = "passed">
<cfoutput>#serializeJSON(str)#</cfoutput> 
```

目标路径是正确的绝对路径。

编辑：这个问题是我两次发布的吗？如果是这样，这就是我被否决的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:54:29.647

在 CF9.0.1 之后不需要将会话令牌附加到 URL 解决方法

> **ColdFusion 9.0.1 中的增强功能**
> 
> 在 ColdFusion 9.0.1 中，如果在 Application.cfc 或 Application.cfm 中打开了会话管理，则文件上传控件会将会话信息隐式传递到目标页面。

[http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec18238-7fd0.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec18238-7fd0.html)

# java - 类似 Google 的动态搜索

> ID：10655231
> 
> 赞同：3
> 
> 时间：2012-05-18T15:14:11.510
> 
> 标签：java, android, multithreading, search

我想实现一个类似谷歌的自动建议功能。最好的方法是什么？是否有任何已经实现的组件可以提供帮助？

我真的很困扰应该多久发送一次请求。我的猜测是应该在一段时间后发送请求。因此，例如，当用户在一个新角色中写入时，必须触发某种计时器，到最后，它将触发一个函数，比较计时器开始和结束时的输入。根据比较判断是否发送。我应该为此使用线程吗？这不是资源密集型的执行吗？

另一种选择：创建一个 while(true) 线程，它获取文本、发送请求和更新主线程结果视图。不过，我不确定它在 Android 方面是如何完成的。

感谢您的任何建议。

UPD：我想出了一个使用 AsyncTasks 的简单解决方案。每次启动新的 SearchInBackgroundTask 时，它都会设置一个标志，以防止启动任何其他 SearchInBackgroundTask 实例，除非原始实例完成它的工作。设置标志后，它允许另一个 SearchInBackgroundTask 执行，如果最后一个输入字符串不为空且不等于先前处理的，则在条件下处理它。

所以，提出任何想法 - 这是一个很好的解决方案吗？

```
public class AsyncTaskForSearchActivity extends Activity {

    protected boolean _threadIsWorking = false;
    protected String _searchResult;
    protected String _searchString;
    protected String _processedSearchString;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TextView searchbox = (TextView) findViewById(R.id.searchbox);
        searchbox.addTextChangedListener(_searchboxWatcher);
    }

    protected TextWatcher _searchboxWatcher = new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {}
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

        @Override
        public void afterTextChanged(Editable s) {
            _searchString = s.toString();
            if(_threadIsWorking == false){
                _performSearchTask();
            }
        }
    };

    protected Handler _onRetrieveResult = new Handler(){
        public void dispatchMessage(android.os.Message msg) {
            if(_threadIsWorking == false && _searchString.length() > 0 && _processedSearchString != _searchString){ // what's the difference bet equeals and ==
                _performSearchTask();
            }
        };
    };

    protected class SearchInBackgroundTask extends AsyncTask<String, Void, Void>{
        protected String _s;

        @Override
        protected Void doInBackground(String... params) {
            _s = params[0];
            try {
                // httpProvider -> retrieve
                Thread.sleep(6000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            _searchResult = "xxx";
            _threadIsWorking = false;
            _onRetrieveResult.sendEmptyMessage(0);
        }
    }

    protected void _performSearchTask(){
        _threadIsWorking = true;
        _processedSearchString = _searchString;
        Toast.makeText(AsyncTaskForSearchActivity.this, _processedSearchString, 1).show();
        (new SearchInBackgroundTask()).execute(_processedSearchString);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:16:29.280

事件驱动编程，加上“常见”搜索短语的 n 元树，是解决此问题的一种方法。

# sql-server - SQL Server CLR - SqlDataRecord.SetValue InvalidCastException

> ID：10655235
> 
> 赞同：0
> 
> 时间：2012-05-18T15:14:16.783
> 
> 标签：sql-server, vb.net, casting, sqlclr

我正在使用 SQL CLR 设置大量存储过程。我目前处于调试模式。

我正在尝试使用`SqlPipe`.

这是我的代码：

```
Dim metaData() As SqlMetaData = {New SqlMetaData("USERNAME", SqlDbType.VarChar, -1), _
                                 New SqlMetaData("CASEID", SqlDbType.BigInt), _
                                 New SqlMetaData("Reason", SqlDbType.VarChar, -1)}
Dim record As New SqlDataRecord(metaData)
Dim pipe As SqlPipe = SqlContext.Pipe
pipe.SendResultsStart(record)
Dim username = iDataRow.Item("USERNAME")
Dim caseId = Convert.ToInt32(identifier.CASEID)
Dim message = "Message"
record.SetValue(0, username)
record.SetValue(1, caseId)
record.SetValue(2, message)
pipe.SendResultsRow(record)
pipe.SendResultsEnd() 
```

`identifier.CASEID`是一个存储在数据库中的值 a `numeric(21)`，但它实际上是一个六位数的数字，这就是我选择`SqlDbType.BigInt`作为`SqlMetaData`容器的原因。在我设置记录的“CASEID”（`record.SetValue(1, caseId)`）的那一行，我不断得到一个`InvalidCastException`.

我是整个 SQL CLR 的新手，但在我看来 a`System.Int32`应该与`SqlDbType.BigInt`. 我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:38:03.007

你是对的，它抛出 System.InvalidCastException。更换

```
Dim caseId = Convert.ToInt32(identifier.CASEID) 
```

和

```
Dim caseId = Convert.ToInt64(identifier.CASEID) 
```

必须解决这个问题。具有 SqlDbType.BigInt 的 SqlMetaData 的 SqlDataRecord.SetValue 方法期望输入值应该是 Int64 或 SqlInt64

# java - hashmap 或 hashtable 中的重新散列过程

> ID：10655239
> 
> 赞同：19
> 
> 时间：2012-05-18T15:14:48.300
> 
> 标签：java, algorithm, hash, hashmap, hashtable

当大小超过 maxthreshold 值时，如何在 hashmap 或 hashtable 中完成重新散列过程？

所有对都只是复制到一个新的存储桶数组中吗？

**编辑：**

重新散列后同一个桶（链表中）的元素会发生什么？我的意思是他们会在重新散列后留在同一个桶中吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-23T13:23:13.463

问题中的最大阈值称为负载因子。

建议负载因子在 0.75 左右。负载因子定义为 (m/n)，其中 n 是哈希表的总大小，m 是在需要增加基础数据结构大小之前可以插入的条目的首选数量。

重新散列可以在两种情况下完成：

1.  当当前 m'/n 比增加超过负载系数时

2.  M'/n 比率下降到非常低的值，例如 0.1

在这两种情况下，m' 都是当前条目数。此外，这两种情况都要求将当前条目转移到更大或更小的哈希表中。

在问题的上下文中，重新散列是将散列函数应用于条目以将它们移动到另一个散列表的过程。可以使用之前使用的散列函数或完全使用新函数。

请注意：当发生碰撞时，也会进行重新散列。（这也是一种处理碰撞的方法。）

要添加更多上下文和详细讨论，请访问我的博客[Hashing Basics](http://techieme.in/category/algorithms/hashing/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-03-02T14:03:00.747

当映射中的元素数量达到最大阈值时，就会对哈希映射进行重新散列。

通常负载因子值为 0.75，默认初始容量值为 16。一旦元素数量达到或超过容量的 0.75 倍，就会发生 map 的重新散列。在这种情况下，当元素数量为 12 时，就会发生重新散列。(0.75 * 16 = 12)

当重新散列发生时，可以使用新的散列函数，甚至可以使用相同的散列函数，但存在值的存储桶可能会发生变化。基本上，当重新散列发生时，桶的数量大约翻了一番，因此必须放置值的新索引会发生变化。

在重新散列时，每个桶的链表按顺序颠倒。发生这种情况是因为 HashMap 没有在尾部附加新元素，而是在头部附加新元素。因此，当重新散列发生时，它会读取每个元素并将其插入到头部的新存储桶中，然后继续从旧映射中添加下一个元素到新映射的头部，从而导致链表反转。

如果有多个线程处理相同的哈希映射，则可能导致无限循环。

可以在此处找到说明在上述情况下如何发生无限循环的详细说明：http: [//mailinator.blogspot.hu/2009/06/beautiful-race-condition.html](http://mailinator.blogspot.hu/2009/06/beautiful-race-condition.html)

如果必须根据键对插入到地图中的元素进行排序，则可以使用 TreeMap。但是如果键的顺序无关紧要，HashMap 会更有效。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-08T19:44:28.173

### [散列 - 重新散列和竞争条件](http://manjul.wordpress.com/2011/)

基本上，在创建哈希映射时，集合会为其分配一个默认容量（2^4，即 16）。在地图中添加元素的后期阶段以及在接近初始定义容量的某个阶段之后，需要 ReHashing 来保持性能。

为集合定义了 LoadFactor（据说可以达到 0.75），这指定了时间和空间的良好索引。

*   更大的负载因子 => 更低的空间消耗但更高的查找
*   更小的负载系数 => 与所需的元素数量相比，空间消耗更大。

Java 规范建议良好的负载因子值为 .75

因此，假设您最大要求在哈希中存储 10 个元素，然后考虑到 Good Loadfactor .75 = 在集合中添加 7 个元素后会发生重新哈希。如果您的要求（在这种情况下）不符合 7，那么 Rehashing 将永远不会发生。

如果没有大量元素要存储在 hashmap 中，那么创建具有足够容量的 HashMap 总是好的；这比让它执行自动重新散列更有效。

RACE 条件：在对存储在给定存储桶的链表中的内部元素进行重新哈希处理时。他们的顺序相反。假设有两个线程同时遇到竞争条件，那么由于顺序已更改，因此在遍历时有可能第二个线程进入无限循环。

# android - 我怎么知道我的实际错误是什么？

> ID：10655245
> 
> 赞同：-2
> 
> 时间：2012-05-18T15:15:08.120
> 
> 标签：android, titanium

我在 Android 和 iphone 中构建了一个应用程序，它都可以正常工作。但有时会在 Android 中崩溃并闪现消息

> 应用程序 ABC (com.abc.abc) 已意外停止。请再试一次。

我怎么知道我的实际错误发生了什么任何建议表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:27:06.403

您可以使用 java 异常处理调试应用程序并记录运行时异常。发生异常时，可以在 DDMS 中查看。

```
try{

    // Code comes here

}
   catch(Exception e){
    Log.e("Exception: ", e.toString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:38:39.800

如果您在模拟器上进行测试，您可以在 LogCat 中查看错误。如果它只发生在手机上，您可以：

**通过 USB 调试**

阅读有关如何设置设备和环境以通过 USB 连接启用调试的 android 指南。

[http://developer.android.com/guide/developing/device.html](http://developer.android.com/guide/developing/device.html)

或者

**安装一个工具来捕获错误**

有一些工具可以在发生错误时在他们的网站（在您的帐户下）捕获并保存错误。BugSense 是我使用的工具，但也有 ACRA（Android 应用程序崩溃报告），它几乎可以实现相同的目标。

前提很简单。下载您要使用的工具的库，将 jar 添加到您的构建路径并配置您的应用程序以*允许*这些工具拦截任何错误。

如果您向用户发布应用程序，我个人发现这些工具非常宝贵，因为它使您的用户能够发送错误日志。我发现我自己对我的应用程序进行的个人测试只发现了大约 50% 的错误，其余的来自用户发送的崩溃报告以及我从未想过测试的一些模糊场景。（是的，我知道，我是个糟糕的测试人员）

[阿克拉](http://code.google.com/p/acra/)

[错误感知](http://www.bugsense.com/docs)

# android - 在 Android 中更改 Spinner 的外观

> ID：10655248
> 
> 赞同：0
> 
> 时间：2012-05-18T15:15:12.997
> 
> 标签：android, styles, spinner

我想更改微调器的外观，使其在外部看起来像一个文本视图。我目前的做法是这样的：

```
 <Spinner 
     android:id="@+id/spinner"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     style="@style/spinner_style"/> 
```

和样式资源：

```
 <style name="spinner_style" parent ="@android:attr/textViewStyle">
     <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:textAppearance">@style/MyText</item>

 </style>

<style name="MyText" parent="@android:style/TextAppearance">
    <item name="android:textColor">#00ffff</item>
</style> 
```

它不会抛出任何错误，但对外观也没有影响。或者我可能会在 Textview 上绑定一个微调器，但不知道如何:)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:26:00.103

我相信您需要更改微调器的背景，因为这就是赋予它“微调器”外观（textarea + 箭头）的原因。

```
<item name="android:background">@android:color/transparent</item> 
```

最好使用 9-Patch 绘图来替换背景，这样您就可以正确地表示任何文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:43:00.513

您必须将背景设置为空：

```
<item name="android:background">@null</item> 
```

# java - BigDecimal 是如何实现的？

> ID：10655254
> 
> 赞同：24
> 
> 时间：2012-05-18T15:15:28.267
> 
> 标签：java, bigdecimal

我正在阅读[BigDecimal 类](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)，但我无法找到`BigDecimal`类如何在计算机内存中存储值的任何信息。

您知道任何可以提供此信息的可靠来源吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-05-19T04:11:00.707

[BigDecimal](http://www.docjar.com/html/api/java/math/BigDecimal.java.html)的未缩放值存储在[BigInteger](http://www.docjar.com/html/api/java/math/BigInteger.java.html)中。[精度和比例](http://en.wikipedia.org/wiki/Significant_figures)分别存储在整数字段中：

```
BigInteger intVal
int scale
int precision 
```

[BigInteger](http://www.docjar.com/html/api/java/math/BigInteger.java.html)将整数存储为32 位整数[的大端](http://en.wikipedia.org/wiki/Endianness#Big-endian)数组，并将符号单独存储为另一个 32 位整数。

```
int signum
int[] mag 
```

但正如 Muhd 所说，如果该数字可以放入 64 位整数，则使用它而不是 BigInteger。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-01T21:56:36.160

如果数字的数量足以适合长整数，则数字的有效数字存储在长整数中，否则将它们存储在 BigInteger 中。此外，BigDecimal 有 int 原语来表示[比例和精度](https://stackoverflow.com/questions/2377174/how-do-i-interpret-precision-and-scale-of-a-number-in-a-database)，比例表示小数点右侧的有效位数，精度表示数字中有效位数的总数。

# vba - 主动控制更改事件 - MS Access

> ID：10655262
> 
> 赞同：3
> 
> 时间：2012-05-18T15:15:49.700
> 
> 标签：vba, ms-access

我正在寻找一个 MS-Access 表单事件，它可以检查表单上的活动控件是否已更改为另一个控件；当它运行一个小脚本时。

该功能必须是仅在表单处于活动状态（例如单击表单等）时运行的功能。但是，Form_Click() 不起作用，因为它在某种程度上不是同一个窗口。我不知道那里发生了什么。Form_Click() 也仅在您单击表单片段而不是控件（例如记录选择器）时才有效。此方法应适用于所有具有一种方法的控件，而不是每个控件一种方法。

我的代码：

```
Private Sub <<Form_ActiveHasChanged()>>
  desc = Forms(Me.Form.Name).Controls(Me.ActiveControl.Name).StatusBarText
  Me.txtInfo.Caption = desc
End Sub 
```

我的活动在哪里`<<Form_ActiveHasChanged()>>`..有没有办法做到这一点？我不能使用计时器，就好像用户离开表单一样，Me.ActiveControl 不再在窗口中并引发错误。或者，如果有人知道检查方法：

```
If (Me.Form IS IN ACTIVE WINDOW) Then .... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:23:02.873

您可以通过使用`WithEvents`. 不幸的是，没有附加到通用`Control`对象的事件，因此您必须为每种不同类型的控件指定一个处理程序。我已经包含了三个常用控件来帮助您入门。

创建一个名为的新类模块`weControlChange`并将以下代码粘贴到其中。然后按照类模块顶部的用法注释来实现。

```
' Usage: 1\. Add the following to the declaration section of the form module:
'               Dim ControlChange As New weControlChange
'        2\. Add the following to the Form_Load OR Form_Open event:
'               ControlChange.Setup Me.Form
Option Compare Database
Option Explicit

Private WithEvents weTextBox As TextBox
Private WithEvents weComboBox As ComboBox
Private WithEvents weCheckBox As CheckBox

Private CtlColl As Collection

Public Sub Setup(Frm As Form)
Dim Ctl As Control, CtlChng As weControlChange
    Set CtlColl = New Collection
    For Each Ctl In Frm.Section(acDetail).Controls 
   'For Each Ctl In Frm.Controls    ''to include controls from all sections'
        Select Case Ctl.ControlType
        Case acTextBox, acComboBox, acCheckBox
            If Ctl.Enabled And Ctl.Visible Then
                Set CtlChng = New weControlChange
                Set CtlChng.Control = Ctl
                CtlColl.Add CtlChng
            End If
        End Select
    Next Ctl
End Sub

Public Property Set Control(ByVal Ctl As Control)
    Select Case Ctl.ControlType
    Case acTextBox
        Set weTextBox = Ctl
        weTextBox.OnEnter = "[Event Procedure]"
    Case acComboBox
        Set weComboBox = Ctl
        weComboBox.OnEnter = "[Event Procedure]"
    Case acCheckBox
        Set weCheckBox = Ctl
        weCheckBox.OnEnter = "[Event Procedure]"
    End Select
End Property

Private Sub weCheckBox_Enter()
    MyScript weCheckBox
End Sub

Private Sub weComboBox_Enter()
    MyScript weComboBox
End Sub

Private Sub weTextBox_Enter()
    MyScript weTextBox
End Sub

Private Sub MyScript(Ctl As Control)
    'Your code goes here
End Function

Private Sub Class_Terminate()
Dim Ctl As Object
On Error Resume Next
    If Not CtlColl Is Nothing Then
        For Each Ctl In CtlColl
            Set Ctl = Nothing
        Next Ctl
        Set CtlColl = Nothing
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T21:04:30.337

您可以创建单个事件处理程序，将其存储在模块中，然后简单地将其设置为每个控件的 OnExit 事件。只需 Ctrl-A 将它们全部选中，打开“属性”对话框，然后设置 OnExit 事件。大约需要 20 秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T07:27:02.310

最简单的方法是对每个控件使用 OnEnter 事件处理程序。

# c# - 在 C# 中设置风扇速度

> ID：10655263
> 
> 赞同：7
> 
> 时间：2012-05-18T15:16:07.887
> 
> 标签：c#, pinvoke

我知道以前有人问过这个问题，但我似乎无法让它发挥作用。我已经调用了以下内容：

```
using System.Management;
using System.Management.Instrumentation;
using System.Runtime.InteropServices; 
```

我已经尝试过了（我知道这很可悲，但它是我发现的最好的）：

```
 [DllImport("Cimwin32.dll")]
        private void button1_Click(object sender, EventArgs e)
        {
            uint32 SetSpeed( //???
              [in]  uint64 300
            );
        } 
```

如何通过c#设置电脑的风扇速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:40:05.470

您的 PInvoke 不应该是这样的：

```
[DllImport("Cimwin32.dll")]
static extern uint32 SetSpeed(in uint64 sp);

private void button1_Click(object sender, EventArgs e)
{
           SetSpeed(300);
} 
```

这里还有一个 C++ 方法可以做到这一点。你可以把它放在一个 DLL 中并从你的 C# 代码中调用它

[如何在 Vista 中使用 C++ 控制 PC 的风扇速度？](https://stackoverflow.com/questions/786984/how-can-i-control-my-pcs-fan-speed-using-c-in-vista)

# java - java中的线程初始化为null

> ID：10655265
> 
> 赞同：3
> 
> 时间：2012-05-18T15:16:11.477
> 
> 标签：java, multithreading

```
public class ThreadState {

    public static void main(String[] args){
            Thread t = new Thread(){
            public void run(){
                       // infinite loop
                       while (true) {
                        try {

                         Thread.sleep(1000);
                        }
                        catch (InterruptedException e) {
                        }

                        System.out.println("thread is running..."+Thread.currentThread().toString());
                       }

            }
        };
        t.start() ; 
        t = null ;
        while (true) {
              try {

              Thread.sleep(3000);
              }
              catch (InterruptedException e) {
              }
              System.out.println("thread is running..."+Thread.currentThread().toString());
        }   

    }
} 
```

线程实例 t 被初始化为 null .. 它仍然能够运行并在控制台上打印其详细信息。需要对此作出解释

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T15:17:54.197

> 线程实例 t 初始化为 null

不，`Thread` *变量*设置为空值。变量不是实例——*绝对*确保你理解这一点是值得的。

更改变量的值根本不会影响现有`Thread`对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T15:17:48.347

`t = null;`只是删除对`Thread`实例的引用。
它不会影响线程本身。

特别是，执行`Thread`实例永远不会被 GC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T15:17:38.093

您将 t 设置为 null，这对线程本身没有任何作用，它只是将 null 分配给您存储对实例的引用的变量。

也许这会有所帮助：

如果你这样做怎么办

```
Object t = new Thread() {...}
t.start
Thread t2= (Thread)t;
t="Orange"; 
```

你会期待神奇的事情发生吗？如果您将 t 传递给另一个方法而不是在 t2 中存储另一个引用怎么办？

t 只是对线程的引用的占位符，将某些内容分配给 t 对线程的影响与将 null 分配给下面的 a 对数字 2 的影响一样大。

```
Integer a = 2;
a=null; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T15:26:24.997

@JonSkeet 和其他人已经很好地解释了，然后你设置`t = null`你根本没有改变运行`Thread`，你只是在改变变量`t`。一旦线程启动，JVM 就会管理线程，因此即使没有对它的引用，它仍然会运行并且不会被 GC 处理。

需要指出的另一件事是，在接下来的循环中，您正在执行以下操作：

```
System.out.println("thread is running..."+Thread.currentThread().toString()); 
```

这*不是*打印出您刚刚分叉的线程的状态，而是打印出*当前线程*——进行分叉的线程。这是运行该`main()`方法的“主线程”。主线程可以完成，并且您分叉的线程将继续运行——阻止 JVM 退出。只有当您分叉的线程被标记为守护线程时，JVM 才会在主线程完成时完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T16:23:16.223

我认为 Jon 是正确的，即“更改变量的值根本不会影响现有的 Thread 对象。”

但你需要的实际解释是

> 在使用线程本地的静态或全局内存的编程方法中。因为通常一个进程中的所有线程共享相同的地址空间，这有时是不可取的。换句话说，当来自同一进程的线程引用时，静态或全局变量中的数据通常总是位于相同的内存位置。每个线程都有自己的堆栈。

希望给出的概念解释是有帮助的。

# java - Spring 3.0 MVC 错误：Bean 名称“登录”的 BindingResult 和普通目标对象都不能用作请求属性

> ID：10655269
> 
> 赞同：1
> 
> 时间：2012-05-18T15:16:22.573
> 
> 标签：java, spring-mvc

我参考了 netbeans.org 上的示例 spring 应用程序并尝试创建一个简单的登录应用程序。当我运行时，我收到此错误：

`javax.servlet.ServletException: javax.servlet.jsp.JspTagException: Neither BindingResult nor plain target object for bean name 'login' available as request attribute`

这是我的 login.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<%@taglib uri="http://www.springframework.org/tags" prefix="spring" %>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Business SMS Login</title>            
</head>

<body>
    <div id="mainContainer">
        <spring:nestedPath path="login">
        <form name="frmBSMSLogin" action="" method="post">
        <div id="controls">
            <div id="lgnUsername">
                <label for="txtUsername">Username</label>                     
                <spring:bind path="login.username">
                    <input type="text" name="${status.expression}" value="${status.value}" id="txtUsername" maxlength="20" class="textInput"/>
                </spring:bind>
            </div>
            <br/>
            <div id="lgnPassword">
                <label for="txtPassword">Password:</label>
                <spring:bind path="login.password">
                    <input type="password" id="txtPassword" maxlength="20" name="${status.expression}" value="${status.value}" class="textInput"/>
                </spring:bind>
            </div>
        </div>

        <div id="submitSection">
            <input type="button" value="Submit" class="buttonInput"/>
            <input type="reset" value="Reset" class="buttonInput"/>
        </div>
        </form>
        </spring:nestedPath>
    </div>
</body> 
```

这是 LoginController.java

```
package controller;

import org.springframework.web.servlet.mvc.SimpleFormController;
import java.net.*;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;   
import org.springframework.web.portlet.ModelAndView;
import service.Login;

public class LoginController extends SimpleFormController {
private Login login;
public LoginController() {
    setCommandClass(GetLoginDetails.class);
    setCommandName("login");
    setSuccessView("dashboard");
    setFormView("index");
}

public void setLogin(Login login){
    this.login = login;
}

protected ModelAndView onSubmit( HttpServletRequest request, HttpServletResponse response, Object command, BindException errors)throws Exception {           
    //System.out.println("are we here?");
    GetLoginDetails l = (GetLoginDetails) command;
    ModelAndView mv = new ModelAndView(getSuccessView());
    mv.addObject("helloMessage", login.authenticate(l.getUsername(),l.getPassword()));
    return mv;
} 
```

}

这是 applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<bean name="login" class="service.Login"/>

</beans> 
```

我想我从上周开始就一直在做这件事。我通过参考 netbeans 的例子来做到这一点。这是链接[http://netbeans.org/kb/docs/web/quickstart-webapps-spring.html](http://netbeans.org/kb/docs/web/quickstart-webapps-spring.html)。我还没有找到任何解决方案。从 PHP 背景开始，我已经发现 spring 框架太难了，但是我正在全力以赴。我使用 Netbeans 作为我的 IDE。这是一个好的选择还是 Eclipse 是标准的？另外请给我一些关于如何调试应用程序的建议。php 中的简单 echo 或 print_r 在这里看起来太奢侈了 :)

Ps 我之前发布过类似的问题，附近有人抱怨这是一个代码转储，并对我投了反对票。有很多问题存在大量代码转储，但人们很友善地提供了帮助。因此，任何认为这是代码转储或有些粗鲁语言的人请不要浪费您宝贵的时间来否决这个问题。我是一个真正的学习者在这里寻求帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:31:10.463

尝试删除

```
<spring:nestedPath path="login"> 
```

后

```
<body>
    <div id="mainContainer"> 
```

spring:nestedPath - 设置绑定标签路径使用的嵌套路径。

升级版：

[在此处](http://static.springsource.org/spring/docs/1.1.5/taglib/tag/NestedPathTag.html)阅读有关此标签的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:06:09.453

使用spring的表单标签有同样的错误。通过添加modelAttribute解决：

```
<form:form modelAttribute="hall" method="post" action="saveChanges"> 
```

希望这会有所帮助

# java - NetBeans 平台：工具栏和操作

> ID：10655281
> 
> 赞同：4
> 
> 时间：2012-05-18T15:17:10.570
> 
> 标签：java, swing, action, netbeans-7, jtoolbar

在过去的两天里，我一直在尝试解决这个问题，但没有成功。我浏览了一页又一页的解决方案，这些解决方案看起来都正确，但要么我的实现是错误的，要么它们不是正确的解决方案。

我创建了一个名为 AddEditDelete 的新工具栏。然后我继续向它添加操作：

这是 AddAction.java

```
@ActionID(category = "Edit",
id = "com.waudware.toolbar.AddAction")
@ActionRegistration(iconBase = "com/demo/toolbar/icons/add.png",
displayName = "#CTL_AddAction")
@ActionReferences({
@ActionReference(path = "Toolbars/AddEditDelete", position = 1),
@ActionReference(path = "Shortcuts", name = "D-A")
})
@Messages("CTL_AddAction=Add")

public final class AddAction implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        //TODO: Code here
    }
} 
```

我也有 EditAction.java 和 DeleteAction.java - 它们都被创建为“始终启用”。

我一直在尝试做的是：当您单击工具栏上的“添加”按钮时，它将执行 AddAction.java 中的代码并禁用 EditAction.java（将操作按钮变灰，使其不可点击）。

在试图弄清楚如何做到这一点 2 天后，我完全迷失了，几乎可以肯定这是不可能的。到目前为止，NetBeans 开发论坛一直没有帮助。

**编辑：**我的问题非常具体和简单：从 AddAction.java 禁用 EditAction.java 的正确方法是什么（即使这是一种不好的做法）-到目前为止，我已经尝试使用 Lookup、CookieSet、直接调用、Action 实例化，而我唯一得到的就是我想要的

```
ToolbarPool.getDefault().findToolbar("AddEditDelete").setEnabled(false); 
```

它隐藏了整个工具栏，但不隐藏其上的单个操作（图标）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:47:33.567

[`Toolbar.getComponents()`](http://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/awt/Toolbar.html#getComponents%28%29)改为查看。

```
Component components = ToolbarPool.getDefault().
    findToolbar("AddEditDelete").getComponents();
for (Component component : components) {
    component.setEnabled(false);
} 
```

# actionscript-3 - 使用 AS3 在库中选择项目

> ID：10655282
> 
> 赞同：0
> 
> 时间：2012-05-18T15:17:12.130
> 
> 标签：actionscript-3, flash

我想从 AS3 的库中获取所有名为“itemX”（其中 X 是数字）的项目。我该怎么做？如果不可能，有没有办法做类似的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:22:42.303

```
for (var i = 0; i < 3; i++) {
    var myItem:Class = getDefinitionByName("item" + i.toString()) as Class;
    addChild(new myItem);
} 
```

退货：

```
var mc:MovieClip = new myItem();
return mc; 
```

# r - R，深拷贝与浅拷贝，按引用传递

> ID：10655287
> 
> 赞同：22
> 
> 时间：2012-05-18T15:17:18.060
> 
> 标签：r, reference, copy, deep-copy, data.table

我想了解 R 在将参数传递给函数、创建变量副本等关于内存使用情况时使用的逻辑。它何时实际创建变量的副本而不是仅传递对该变量的引用？特别是我很好奇的情况是：

```
f <- function(x) {x+1}
a <- 1
f(a) 
```

是`a`从字面上传递还是对传递的引用？

```
x <- 1
y <- x 
```

副本参考？什么时候不是这种情况？

如果有人可以向我解释这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T15:41:30.360

当它传递变量时，总是通过复制而不是通过引用。但是，有时，在实际发生分配之前，您不会得到副本。该过程的真实描述是pass-by-promise。看看文档

```
?force
?delayedAssign 
```

一个实际的含义是，即使不是不可能，也很难避免需要至少两倍于对象名义占用的 RAM。修改大对象通常需要制作临时副本。

更新：2015 年：我确实（并且确实）同意 Matt Dowle 的观点，即他的 data.table 包提供了另一种分配途径，可以避免复制问题。如果那是请求的更新，那么在提出建议时我不明白。

`apply`R 3.2.1 最近对和的评估规则进行了更改`Reduce`。这是参考新闻在这里宣布的：[从 lapply 返回匿名函数 - 出了什么问题？](https://stackoverflow.com/questions/15742177/returning-anonymous-functions-from-lapply-what-is-going-wrong/29786817#29786817)

jhetzel 在评论中引用的[有趣论文现在在这里](http://r.cs.purdue.edu/pub/ecoop12.pdf)：

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-10-15T10:29:12.937

迟到的答案，但语言设计的一个非常重要的方面，在网络上没有得到足够的覆盖（或至少是通常的来源）。

```
x <- c(0,4,2)
lobstr::obj_addr(x)
# [1] "0x7ff25e82b0f8"
y <- x
lobstr::obj_addr(y)
# [1] "0x7ff25e82b0f8" 
```

注意相同的“内存地址”，即存储对象的内存位置。因此，您可以确认`x`并且`y`两者都指向相同的标识符。

Hadley Wickham 的 Advanced R 书涉及到这一点：

> **考虑这段代码**：
> 
> `x <- c(1, 2, 3)`
> 
> 很容易理解为：“创建一个名为 'x' 的对象，其中包含值 1、2 和 3”。不幸的是，这种简化会导致对 R 在幕后实际所做的事情的不准确预测。更准确地说，这段代码做了两件事：
> 
> 它正在创建一个对象，一个值向量，`c(1, 2, 3)`. 它将该对象绑定到一个名称，`x`. 换句话说，对象或值没有名称。它实际上是具有价值的名称。

请注意，它们的内存地址是短暂的，并且随着每个新的 R 会话而变化。

现在这是重要的部分。

> 在 R 语义中，对象是按值复制的。这意味着修改副本会使原始对象保持不变。由于在内存中复制数据是一项昂贵的操作，因此 R 中的副本尽可能地懒惰。它们仅在实际修改新对象时发生。来源：[R 语言文档][1]

因此，如果我们现在通过将值`y`附加到向量来修改的值，`y`现在指向不同的“对象”。这与文档所说的“仅在修改新对象时”（惰性）发生的复制操作一致。`y`指向与以前不同的地址。

```
y <- c(y, -3)
print(lobstr::obj_addr(y))
# [1] "0x7ff25e825b48" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-31T04:31:52.043

@onlyphantom 这非常有帮助！并且对象可以在不被复制的情况下从函数中往返：这就是把我带到这里的原因：

```
tmp <- function(x, create) {
    if(!create){
        x
    }else{
        "new"
    }
}

x = c(0,4,2)

y = tmp(x, F)
lobstr::obj_addr(x) == lobstr::obj_addr(y) # y points to x! 
```

这在用自身“替换” x 时有效 - 没有副本！

```
oldAddr = lobstr::obj_addr(x) 
x = tmp(x, F)
lobstr::obj_addr(x) == oldAddr # TRUE! 
```

手册中的这个示例（稍作修改）也提供了有关触发惰性评估的信息

```
tmp = function(x, label = deparse(x), force=TRUE) {
    if(force){
        label
    }
    x <- x + 1
    print(label); return(x)
}
tmp(2)
[1] "2"
[1] 3

tmp(2, force=F)
[1] "3"
[1] 3 
```

R 版本 3.6.3

# android - 测试 Admob url 到 android 市场

> ID：10655288
> 
> 赞同：0
> 
> 时间：2012-05-18T15:17:21.000
> 
> 标签：android, admob

我刚开始使用 Admob 来推广我的应用程序，并注意到它将我的 play.google.com 链接更改为 market:// 链接。

如何测试链接是否有效？我没有安卓，但有朋友尝试过，但它似乎不起作用（当他们在浏览器中输入链接时，它会将他们带到谷歌搜索页面）。我知道 play.google.com 链接有效，但 Admob 不断将其更改为 market://

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:37:32.357

这是我使用的一种策略 - 转到[生成器](http://zxing.appspot.com/generator/)`URL`并作为`URL`条形码进入市场。让使用 Android 的人扫描条形码 - 如果它有效，它将直接将您带到商店中的应用程序。

我尝试过的任何其他方法都会调用不理解的浏览器`market:// protocol`

# c++ - “(i+=10)+=10”在哪个版本的 C++ 标准中具有未定义的行为？

> ID：10655290
> 
> 赞同：32
> 
> 时间：2012-05-18T15:17:26.733
> 
> 标签：c++, c++11, undefined-behavior, language-lawyer, c++03

在 C++ 中，以下是否具有未定义的行为：

```
int i = 0;
(i+=10)+=10; 
```

在对我对[C 和 C++ 中 += 的结果是什么的](https://stackoverflow.com/questions/10653903/whats-the-result-of-in-c-and-c)[回答](https://stackoverflow.com/a/10653994/367273)的评论中对此进行了一些辩论？这里的微妙之处在于默认响应似乎是“是”，而正确的答案似乎是“它取决于 C++ 标准的版本”。

如果它确实取决于标准的版本，请说明它在哪里是 UB，在哪里不是。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-18T15:55:48.673

**tl;dr**：在 C++98 和 C++11中执行的修改和读取的*顺序*`(i+=10)+=10`在 C++98 和 C++11 中都有很好的定义，但是在 C++98 中，这不足以定义行为。

在 C++98 中，对同一个对象进行多次修改而没有插入*序列点*会导致未定义的行为，即使这些修改的顺序已明确指定。该表达式不包含任何序列点，因此它由两个修改组成的事实足以使其行为未定义。

C++11 没有序列点，只要求对象的修改相对于彼此进行排序，并且读取同一对象以产生定义的行为。

因此，该行为在 C++98 中未定义，但在 C++11 中定义良好。

* * *

### C++98

C++98 子句 [expr] 5 p4

> 除非另有说明，单个运算符的操作数和单个表达式的子表达式的求值顺序以及副作用发生的顺序是未指定的。

C++98 子句 [expr.ass] 5.17 p1

> 赋值操作的结果是赋值后存储在左操作数中的值；结果是一个左值

所以我相信顺序是指定的，但是我认为仅凭这一点不足以在表达式中间创建一个序列点。继续引用 [expr] 5 p4：

> 在前一个和下一个序列点之间，一个标量对象的存储值最多只能通过表达式的评估修改一次。

因此，即使指定了顺序，在我看来这对于 C++98 中定义的行为来说还是不够的。

* * *

### C++11

C++11 取消了序列点，以便更清晰地了解*sequence-before*和*sequenced-after*。C++98 中的语言被替换为

C++11 [intro.execution] 1.9 p15

> 除非另有说明，否则单个运算符的操作数和单个表达式的子表达式的求值是无序的。[...]
> 
> 如果标量对象上的副作用相对于同一标量对象上的另一个副作用或使用同一标量对象的值的值计算是未排序的，则行为未定义。

C++11 [expr.ass] 5.17 p1

> 在所有情况下，赋值都在左右操作数的值计算之后和赋值表达式的值计算之前进行排序。

因此，虽然有序不足以实现 C++98 中定义的行为，但 C++11 改变了要求，使得有序（即有序）就足够了。

（在我看来，'sequence before' 和 'sequenced after' 提供的额外灵活性导致了更清晰、一致和明确的语言。）

* * *

在我看来，任何 C++98 实现实际上都不太可能在操作序列被明确指定时做出任何令人惊讶的事情，即使这不足以产生技术上定义良好的行为。例如，Clang 在 C++98 模式下生成的这个表达式的内部表示具有明确定义的行为并执行预期的操作。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-18T15:20:25.003

在 C++11 中，表达式定义明确，将导致`i == 20`.

来自`[expr.ass]/1`：

> 在所有情况下，赋值都在左右操作数的值计算之后和赋值表达式的值计算之前进行排序。

这意味着赋值`i+=1`在 的左侧的值计算之前`(i+=10)+=10`排序，而在最终赋值之前依次排序`i`。

* * *

在 C++03 中，表达式具有未定义的行为，因为它导致`i`被修改两次而没有中间序列点。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-18T15:28:03.393

也许。这取决于 C++ 版本。

在 C++03 中，这是一个明显的 UB，分配之间没有干预序列点。

正如 Mankarse 解释的那样，在 C++11 中，它不再是未定义的——括号中的复合赋值在外部赋值之前排序，所以没关系。

# jquery - 我如何使用 jQuery .closest() 来确定最近的图像并将路径传递给 PHP 函数

> ID：10655292
> 
> 赞同：0
> 
> 时间：2012-05-18T15:17:28.387
> 
> 标签：jquery, wordpress, pinterest

我正在尝试编写一个 Wordpress 短代码，它足够聪明，可以在 HTML 视图中找到最接近短代码位置的图像。

我想使用 jQuery 来确定最近的图像是什么，然后将其传递给下面的函数。我应该提到，短代码可以在帖子中多次使用。

我已经研究过使用`.closest()`来实现这一点，但我不确定如何将此信息传递给我的函数。

```
function pinterest_post() {

global $post;
$icon_url = urlencode(site_url().'/wp-content/themes/Kin/images/pinterest.png');
$posturl = urlencode(get_permalink());
$pinurl = 'http://pinterest.com/pin/create/button/?url='.$posturl.'&media='.$icon_url;
$pinurl .= '&description='.urlencode(get_the_title());

return '
    <div class="pinterest_post">
        <a href="'.$pinurl.'"><img src="/wp-content/themes/Kin/images/pinterest.png"/></a>
    </div>';
}

add_shortcode('pin', 'pinterest_post'); 
```

任何实现这一目标的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:56:55.793

您可以使用该[`offset()`](http://api.jquery.com/offset/)函数来确定元素相对于文档的偏移量。

然后使用简单的数学距离公式，您可以计算任意两个元素之间的距离：`sqrt((x1-x2)^2 + (y1-y2)^2)`

所以，总结一下：

1.  确定*pin*元素的偏移量
2.  查找文档中的所有图像
3.  根据偏移量确定到 pin 元素距离最小的图像
4.  随心所欲

检查这个[jsFiddle](http://jsfiddle.net/danmana/u3zGR/)在行动:)

如果不是你想要的最接近 的*数学定义*

*   `img`在与 相同的 DOM 父级中找到的元素`pin`，并且在同一级别，那么您应该检查[`$('.pin').siblings('img')`](http://api.jquery.com/siblings/)选择器
*   或者如果你想在任何级别，你可以做类似的事情[`$('.pin').parent().find('img')`](http://api.jquery.com/parent/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:31:14.607

在重新考虑我的方法后，我发现允许用户将图像的 URL 指定为简码的参数是最简单的。这最终将使他们能够更好地控制显示哪个图像，并避免必须为帖子中的每个 [pin] 实例多次遍历 DOM。

我修改的功能和示例用法：

```
function pinterest_post($atts = '') {

    global $post;

    $image_fallback = get_bloginfo(template_url).'/images/logo-green-for-website.gif';
    $icon_url = get_bloginfo(template_url).'/images/pinterest.png';

    extract(shortcode_atts(array('path' => $image_fallback,), $atts));
    $image_url = $path;

    $posturl = urlencode(get_permalink());

    $pinurl = 'http://pinterest.com/pin/create/button/?url='.$posturl;
    $pinurl .= '&description='.urlencode(get_the_title());
    $pinurl .= '&media='.$image_url;

    return '
        <div class="pinterest_post">
            <a href="'.$pinurl.'"><img src="'.$icon_url.'"/></a>
        </div>';
}

add_shortcode('pin', 'pinterest_post'); 
```

在 Wordpress 帖子中的用法：

[pin path="http://www.site.com/image.jpg"]

# php - Php - 删除字符串中的重复单词

> ID：10655293
> 
> 赞同：1
> 
> 时间：2012-05-18T15:17:34.050
> 
> 标签：php, regex, string

输入：球球代码

输出应该是：球码

输入：awycodeawy

输出应该是：awycode

我尝试了这些，但没有奏效：

```
$q = preg_replace("/\s(\w+\s)\1/i", "$1", $q);
$q = preg_replace("/s(w+s)1/i", "$1", $q); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T15:59:20.117

这是针对 OP 问题的基于正则表达式的解决方案的积极前瞻基础尝试。

```
$arr = array('ball ball code', 'abcabc bde bde', 'awycodeawy');
foreach($arr as $str)
   echo "'$str' => '" . preg_replace('/(\w{2,})(?=.*?\\1)\W*/', '', $str) ."'\n"; 
```

### 输出

```
'ball ball code' => 'ball code'
'abcabc bde bde' => 'abc bde'
'awycodeawy' => 'codeawy' 
```

正如您可以输入的那样`'awycodeawy'`，它可以`'codeawy'`代替`'awycode'`. 原因是有可能找到一个不可能的`variable length lookahead`东西`lookbehind`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T15:19:27.580

```
$q = preg_replace("/\b(\w+)\s+\\1\b/i", "$1", $q); 
```

# qt - 如何在另一个小部件更新qt中的相同内容后更新小部件内容

> ID：10655302
> 
> 赞同：0
> 
> 时间：2012-05-18T15:18:11.833
> 
> 标签：qt, pyside

我在 qt/pyside 中开发桌面应用程序，它在多台计算机上使用，它有一个公共数据库服务器。我有两个问题：

1.  问题1：当用户有一个打开的小部件让我们说w1（例如小部件显示数据库中的城市列表）。现在假设同一个用户打开新的小部件（w2）（添加/更新城市的小部件），现在如果他/她在数据库中添加新城市，那么如何在 w1 小部件中反映这种变化（即更新 w1 的内容）

2.  问题 2：场景与问题 1 非常相似，唯一的区别是用户 1 有一个打开的小部件/选项卡 w1 显示城市列表。另一台机器上的用户 2（但数据库相同）添加了新城市，然后如何更新或更改用户 1 的小部件（这里可能用户 1 正在使用 w1 小部件）

他们有什么方法可以使用一些常用功能来做到这一点吗？

我已经为问题 1 找到了 2 个解决方案：

1.  定期检查数据库更改并更新小部件，但这可能会导致应用程序变慢，因为有多个小部件。

2.  来自 w1 和 w2 的发射信号将有插槽来接收信号，然后 w2 将被更新。

这两个问题的任何其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:28:59.557

```
case:1 
```

连接(w2,SIGNAL(On_Widgetchange),SLOT(this),SignaltoW1anddatabase());

`this`是您的父应用程序。我的意思是小部件 W2在`On_Widgetchange()`更新它时发出的信号。将插槽声明`SignaltoW1anddatabase()`为私有。

在您`SignaltoW1anddatabase()`编写的代码中，根据 w2 更改更新数据库，并向 w1 添加/删除详细信息并更新 w1。这不会减慢您的应用程序。

```
case:2 
```

您将需要在更新数据库时广播消息，但无需轮询数据库仍然可行。就像您可以使用相同的信号槽机制在特定 PC 上更新小部件时将包含城市名称的消息广播到网络。

```
connect(w1,SIGNAL(On_update()),this,SLOT(sendmessage())); 
```

在 sendmessage() 中编写代码以发送添加的详细信息。并让 netwatcher 在另一边运行。

# matlab - Matlab xlsread在第1048576行后切断文件

> ID：10655303
> 
> 赞同：1
> 
> 时间：2012-05-18T15:18:11.653
> 
> 标签：matlab, csv, import, xls

除了 xlsread(file.csv); 还有其他方法可以将 Excel 格式的 .csv 导入 Matlab 吗？

我拥有的文件包含 2830082 行，并且 xlsread 在读取它时似乎有 1048576 行的限制 - 其余的被切断。

该文件如下所示：

```
Time, Value
12:07:29, -1.13
12:07:29, -7.54
... 
```

因此，由于日期格式，使用 csvread(..) 是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:48:58.423

我发现将 BIG csv 文件读入 Matlab 的最快方法是对它们进行内存映射并将内容解析为单个字符串。尝试使用此示例代码：

```
fname = 'file.csv';
fstats = dir(fname);
% Map the file as one long character string
m = memmapfile(fname, 'Format', {'uint8' [ 1 fstats.bytes] 'asUint8'});
textdata = char(m.Data(1).asUint8);

% Find the end of each line, and use the line ends to form an index array
row = strfind(textdata, sprintf('\r\n'));
row = [[1; row(1:end-1)'+2] row' - 1];
% Fix-up if there is no \r\n at the end of the last line
if (row(end) < fstats.bytes - 2)
    row = [row; [row(end) + 2, fstats.bytes]];
end
numrows = size(row, 1);
% Create output variables
Time = zeros(numrows, 1);
Value = zeros(numrows, 1);

% Parse each line of the data (I'm ignoring the first line for simplicity)
for RowNum = 2:numrows
    data = textscan(textdata(row(RowNum,1):row(RowNum,2)), '%[^,]%f', 'delimiter', ',');
    Time(RowNum) = datenum(data{:});
    Value(RowNum) = data{2};
end

% Remove the file mapping
clear('m'); 
```

# python - 使用多处理和 ssdeep Python 对类似文件进行分组时遇到问题

> ID：10655306
> 
> 赞同：4
> 
> 时间：2012-05-18T15:18:17.110
> 
> 标签：python, multithreading, multiprocessing, hash, similarity

我正在尝试使用 deephashes (SSDEEP) [http://code.google.com/p/pyssdeep处理超过 130 万个文件](http://code.google.com/p/pyssdeep)

它的作用是，。它生成哈希（在 3-6 分钟内生成 130 万），然后相互比较以获得相似性结果。比较非常快，但仅运行单个进程不会完成。所以我们放入 Python 多处理模块来完成任务。

结果是在 30 分钟内完成了 130 万个文本文件。使用 18 个内核（四核至强处理器，共 24 个 CPU）

以下是每个过程的工作原理：

*   生成 SSDEEP 和。
*   将这些总和列表拆分为 5000 组块。
*   在 18 个过程中比较每个块 1 与 5000：每次迭代比较 18 个总和。
*   根据相似度得分对结果进行分组（默认值为 75）
*   删除了已经检查过下一次迭代的文件。
*   从下一个文件开始，下一个组的分数 < 75%
*   重复直到所有组都完成。
*   如果有未包含的文件（与任何文件不相似），则将它们添加到剩余列表中。

当所有处理完成后，剩余的文件被合并并递归地相互比较，直到没有结果。

问题是，当文件列表被分块成更小的 (5000) 文件时。有些文件包含在前 5000 个块中，但未包含在另一个组中，使组不完整。

如果我在没有分块的情况下运行，则循环完成需要很长时间。超过 18 小时未完成，。不知道过了多久。

请给我建议。

使用的模块：multiprocessing.Pool，ssdeep python

```
def ssdpComparer(lst, threshold):
    s = ssdeep()
    check_file = []
    result_data = []
    lst1 = lst
    set_lst = set(lst)

    print '>>>START'
    for tup1 in lst1:
        if tup1 in check_file:
            continue
        for tup2 in set_lst:
            score = s.compare(tup1[0], tup2[0])
            if score >= threshold:
                result_data.append((score, tup1[2], tup2[2])) #Score, GroupID, FileID
                check_file.append(tup2)
        set_lst = set_lst.difference(check_file)
    print """####### DONE #######"""
    remain_lst = set(lst).difference(check_file)

    return (result_data, remain_lst)

def parallelProcessing(tochunk_list, total_processes, threshold, source_path, mode, REMAINING_LEN = 0):
    result = []
    remainining = []
    pooled_lst = []
    pair = []
    chunks_toprocess = []

    print 'Total Files:', len(tochunk_list)

    if mode == MODE_INTENSIVE:
        chunks_toprocess = groupWithBlockID(tochunk_list) #blockID chunks
    elif mode == MODE_THOROUGH:
        chunks_toprocess = groupSafeLimit(tochunk_list, TOTAL_PROCESSES) #Chunks by processes
    elif mode == MODE_FAST:
        chunks_toprocess = groupSafeLimit(tochunk_list) #5000 chunks

    print 'No. of files group to process: %d' % (len(chunks_toprocess))
    pool_obj = Pool(processes = total_processes, initializer = poolInitializer, initargs = [None, threshold, source_path, mode])
    pooled_lst = pool_obj.map(matchingProcess, chunks_toprocess) #chunks_toprocess
    tmp_rs, tmp_rm = getResultAndRemainingLists(pooled_lst)
    result += tmp_rs
    remainining += tmp_rm

    print 'RESULT LEN: %s, REMAINING LEN: %s, P.R.L: %s' % (len(result), len(remainining), REMAINING_LEN)
    tmp_r_len = len(remainining)

    if tmp_r_len != REMAINING_LEN and len(result) > 0 :
        result += parallelProcessing(remainining, total_processes, threshold, source_path, mode, tmp_r_len)
    else:
        result += [('','', rf[2]) for rf in remainining]

    return result

def getResultAndRemainingLists(pooled_lst):
    g_result = []
    g_remaining = []

    for tup_result in pooled_lst:
        tmp_result, tmp_remaining = tup_result
        g_result += tmp_result
        if tmp_remaining:
            g_remaining += tmp_remaining

    return (g_result, g_remaining) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:53:47.227

第一个建议：在您的情况下，不需要将*check_file*作为 list => 将其更改为*set()* - 那么它应该会更好（最后有解释）。

如果你需要有块，也许这样的过程就足够了：

```
def split_to_chunks(wholeFileList):
    s = ssdeep()
    calculated_chunks = []
    for someFileId in wholeFileList:
        for chunk in calculated_chunks:
            if s.compare(chunk[0], someFileId) > threshold:
                chunk.append(someFileId)
                break
        else: # important: this else is on 'for ' level
            # so if there was no 'break' so someFileId is a base for new chunk:
            calculated_chunks.append( [someFileId] )
    return calculated_chunks 
```

之后您可以过滤结果： groups = filter(lambda x: len(x) > 1, result) 仍然 = filter(lambda x: len(x) == 1, result)

注意：这个算法假设块的第一个元素是一种“基础”。结果的好坏很大程度上取决于 ssdeep 的行为（我可以想象一个奇怪的问题：多少 ssdeep 是可传递的？）如果这种相似性那么它应该是......

最坏的情况是，如果任何对 s.compare(fileId1, fileId2) 的分数不满足阈值条件（那么复杂度为 n^2，因此在您的情况下为 130 万 * 130 万）。

没有简单的方法来优化这种情况。让我们想象一下情况，其中 s.compare(file1, file2) 总是接近 0 然后（据我所知）即使你知道 s.compare(A, B) 非常低而 s.compare(B, C) 非常低那么你仍然不能说任何关于 s.compare(A, C) => 所以你需要有 n*n 操作。

另一个注意事项：假设您使用了太多的结构和列表，例如：

```
set_lst = set_lst.difference(check_file) 
```

该指令创建新的 set() 并且 set_lst 和 check_file 中的所有元素必须至少被触摸一次，因为 check_file 是一个列表，因此无法优化“差异”函数并且它变得复杂：len(check_file) * log( len(set_lst))

基本上：如果这些结构在增长（130 万个，差不多），那么你的计算机需要执行更多的计算。如果您使用 check_file = set() 而不是 [] (list) 那么它的复杂性应该是： len(set_lst) + len(check_file)

与检查元素是否在 python 的列表（数组）中相同：

```
if tup1 in check_file: 
```

因为*check_file*是列表 -> 如果 tup1 不在列表中，您的 cpu 需要将 tup1 与所有元素进行比较，因此其复杂性为 len(check_file) 如果您将 check_file 更改为 set 则其复杂性约为 log2(len (check_file)) 让差异更直观，假设 len(*check_file*) = 1mln，你需要多少比较？

设置：log2(1m) = log2(1000000) ~ 20

列表：len(check_file) = 100 万

# css - -webkit-overflow-scrolling：在 iPad 上切换 div 的可见性时，iPad 上的触摸中断

> ID：10655307
> 
> 赞同：2
> 
> 时间：2012-05-18T15:18:20.807
> 
> 标签：css, ipad, webkit, overflow

我有一个选项卡部分，其中每个选项卡部分都是可滚动的。当我使用或更改时`display:none`，webkit 滚动不再起作用。`visibility:hidden``z-index`

我可以保留滚动但隐藏选项卡部分的唯一方法是将顶部位置设置为-786px，因此它高于 ipad 页面折叠。

知道这里发生了什么吗？

在 UIWebView 中的 iPad 2 iOs5 上测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T21:16:33.047

这里同样的问题。使用负 y 偏移是我发现的唯一解决方法。

# php - 多个 jquery .ajax 函数调用的问题

> ID：10655309
> 
> 赞同：0
> 
> 时间：2012-05-18T15:18:23.677
> 
> 标签：php, jquery, ajax

我有一个我正在调用的函数来验证一个recaptcha，然后根据验证是否成功，发送一封电子邮件。我正在使用 jquery .ajax 函数验证 recaptcha，并在成功验证后使用另一个 jquery .ajax 函数发送电子邮件。

这是javascript：

```
function validateCaptcha(){
var isValid = $('#es_contact_form').valid();
var esform = $('#es_contact_form').serialize();
var html = $.ajax({
type: "POST",
url: "scripts/ajax.recaptcha.php",
data: esform,
async: false
}).responseText;

if(isValid)
{
   if(html == "success")
   {
        //alert("Captcha and form are valid");
    //return true;
    var esform2 = $('#es_contact_form').serialize();
    var response = $.ajax({
    type: "POST",
    url: "scripts/ajax.email.php",
    data: esform2,
    async: false
    }).responseText2;
    if(response=="success")
    {
    alert('mail successfully sent');
                    return true;
                }else{
                    alert('mail not sent, please try again');
                    Recaptcha.reload();
                    return false;
                }
            }
            else
            {
                alert('Form valid, captcha bogus');
                $("#captchaStatus").html("Your captcha is incorrect. Please try again");
                Recaptcha.reload();
                return false;
            }
        }else{
            if(html == "success")
            {
                //alert("Captcha's good, but the form aint!");
                Recaptcha.reload();
                return false;
            }
            else
            {
                //alert('Form invalid, captcha bogus...can you do anything right?');
                $("#captchaStatus").html("Your captcha is incorrect. Please try again");
                Recaptcha.reload();
                return false;
            }
        }
    } 
```

这是我收到 500 服务器错误的脚本的服务器端代码：

```
<?php

$yourName = 'ES';
$yourEmail = 'rob@domain.com';
$yourSubject = 'ES: contact form';
$referringPage = 'es.domain.com';

function cleanPosUrl ($str) {
$nStr = $str;
$nStr = str_replace("**am**","&",$nStr);
$nStr = str_replace("**pl**","+",$nStr);
$nStr = str_replace("**eq**","=",$nStr);
return stripslashes($nStr);
}
if ( isset($_POST) ) {
$to = $yourEmail;
$subject = $yourSubject;
$message = cleanPosUrl($_POST['name'])."\r\n\n";
$message .= cleanPosUrl($_POST['remail'])."\r\n\n";
$message .= cleanPosUrl($_POST['phone'])."\r\n\n";
$message .= cleanPosUrl($_POST['comments']);
$headers = "From: ".cleanPosUrl($_POST['name'])." <".cleanPosUrl($_POST['remail']).">\r\n";
$headers .= 'To: '.$yourName.' <'.$yourEmail.'>'."\r\n";
$mailit = mail($to,$subject,$message,$headers);
}

    if ( $mailit )
    { ?>success<? }
    else
    { die ("The mail wasn't sent"); }
}
?> 
```

ajax.recaptcha.php 和 ajax.email.php 都从帖子中提取，如果成功则返回“成功”。

ajax.recaptcha.php 工作正常。但是当它到达 ajax.email.php 脚本时，我在 Firebug 中不断收到 500 服务器错误。

有没有人知道为什么一个会工作而不是另一个？这些脚本都在同一台服务器上的同一个文件夹中，所以我不明白为什么这不起作用。

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:35:59.080

在你的 php 脚本中，

如果您在检查参数的条件下尝试 var_dum($_POST)，则可能因此导致错误，

看看你在 var_dump 之后看到的，如果你看到任何问题，然后用**$_GET**或**$_REQUEST改变你的条件**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:45:06.367

代码中有一个额外的 } .. 你应该在之后去掉 }

```
$mailit = mail($to,$subject,$message,$headers); 
```

我完全同意 jugnu，为了在这种情况下进行更好的调试，您应该尝试使用静态值来发送电子邮件。（而不是 POST[]）。

# c# - 如何在页面上显示友好的错误消息并取消控制器操作

> ID：10655311
> 
> 赞同：0
> 
> 时间：2012-05-18T15:18:29.340
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, controller

从视图“x”来看，当用户单击“编辑项目”时，呈现“编辑”页面的控制器操作也在检查用户对该页面的权限。

我要做的是检查这些权限，如果用户没有这些权限，我想在那个“X”视图上显示一条错误消息并取消控制器操作。

现在，我的代码如下所示：

```
 [HttpPost]
    public virtual ActionResult EditPage(int? itemId)
    {
        var model = new EditPageModel();
        if (itemId.HasValue)
        {
            var obj = new Item(itemId.Value);

   // Check for user's edit permission before we do anything else.

     var request = SecurityRequest.Create(obj, Item_Edit);
     Request.Execute(() => SecurityManager.ValidatePermissions(request));
            if (!request.IsValid(Item_Edit))
            {
                //skip the rest and return error
                Response.StatusCode = (int)HttpStatusCode.Forbidden;
                // Need Help Here!!!
            }

      // Mode code executes      
      return View(model);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:27:41.550

你可以做到这一点的一种方法（这是我在当前项目中使用的一个例子）是创建你自己的[`ActionFilter`](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs). 这是我的例子：

```
public class UserAuthenticatedAction : FilterAttribute, IAuthorizationFilter
{
    public void OnAuthorization(AuthorizationContext filterContext)
    {
        if (IsContextFromLoginController(filterContext))
        {
            return;
        }

        //...Do whatever you need to check.

        if (userNotAllowed){
            SetRedirectToLoginErrorPageForContext(filterContext);
        }

        return;
    }

    private static void SetRedirectToLoginErrorPageForContext(AuthorizationContext filterContext)
    {
        filterContext.Result = new RedirectToRouteResult(
            new RouteValueDictionary
                {
                    { "controller", "Login" },
                    { "action", "LoginError" },
                    { "targeturl" , filterContext.RequestContext.HttpContext.Request.Url.ToString()} }
                });
    }

    private static bool IsContextFromLoginController(AuthorizationContext filterContext)
    {
        var controllerName = GetCurrentControllerName(filterContext);

        return controllerName.Equals("Login");
    }

    private static string GetCurrentControllerName(AuthorizationContext filterContext)
    {
        return filterContext.ActionDescriptor.ControllerDescriptor.ControllerName;
    }
} 
```

要使用此过滤器，在 global.asax.cs 文件中，我有以下行`Application_Start()`：

`GlobalFilters.Filters.Add(new UserAuthenticatedAction(excludeActions, allowedRoles));`

这意味着每当调用 ActionMethod 时都会执行该属性。基本上，它检查用户是否被允许访问特定的 url，如果不允许该用户，则`filterContext`设置为将他们重定向回登录页面。

我还检查了当前url是否已经是登录页面；如果是这种情况，那么不要费心进行安全检查。

我想有更多奇特的方法可以做到这一点，具体取决于您的要求，但上述方法可以很好地满足我们的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:18:13.523

您始终可以重定向到错误页面并显示适当的消息。

```
if (!request.IsValid(Item_Edit))
{
     //skip the rest and return error
     Response.StatusCode = (int)HttpStatusCode.Forbidden;
     ViewBag.errorMessage = "Sorry you do not have access to this page";
     return View("Error")
     // Need Help Here!!!
} 
```

在您的错误页面中（应该在共享视图文件夹中有一个），您可以添加以下行

```
@ViewBag.errorMessage 
```

**编辑**

如果您不想重定向到错误页面并停留在第 x 页上，您可以执行以下操作

```
if (!request.IsValid(Item_Edit))
{
     //skip the rest and return error
     Response.StatusCode = (int)HttpStatusCode.Forbidden;
     ModelState.AddModelError("", "Sorry you do not have access to this page");
     ModelForPageX modelX = new ModelForPageX();
     // do any other setup you need to in order to render page X
     return View("X",modelX)

} 
```

如果没有添加以下行，这假设您`@Html.ValidationSummary`在页面 X 的视图上

```
@Html.ValidationSummary(true, "Unable to process the requested action:") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:23:58.780

您可以使用 AJAX 请求来调用该`EditPage`操作。如果授予权限，它可以返回回调以重定向到完整的编辑页面（到类似的操作`EditPageView`）。否则，可能会返回对错误消息的回调。

# javascript - 拖动时调用的可放置代码

> ID：10655315
> 
> 赞同：0
> 
> 时间：2012-05-18T15:18:48.517
> 
> 标签：javascript, jquery

我不知道为什么当我将项目拖到可放置区域上时会触发以下警报？

```
$(".all").droppable({ 
    drop: function(event, ui) { 
       alert('should just fire when a item is dropped');
    }
}); 

$("li").draggable({
            connectToSortable : ".mySortable",
            helper : "clone",
            revert : "invalid",
            scroll: true,
            cursor: 'move'//,   
}
        }); 
```

这是调用堆栈中被调用的最靠前的行：

```
jQuery.event.dispatch.apply( eventHandle.elem, arguments ) : 
```

包含在 jquery-1.7.2.js 中

那行代码在：

```
if ( !eventHandle ) {
            elemData.handle = eventHandle = function( e ) {
                // Discard the second event of a jQuery.event.trigger() and
                // when an event is called after a page has unloaded
                return typeof jQuery !== "undefined" && (!e || jQuery.event.triggered !== e.type) ?

jQuery.event.dispatch.apply( eventHandle.elem, arguments ) :

                    undefined;
            }; 
```

如果您将此代码粘贴到小提琴中 - jsfiddle.net/Xz3u2 它应该重新创建错误：

```
$(".all2").sortable({
            revert : true
        });
$(".all").droppable({ 
    drop: function(event, ui) { 
       alert('should just fire when a item is dropped');
    }
}); 

$(".all2").draggable({
            connectToSortable : ".all2",
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:42:09.853

试试这样：http: [//jsfiddle.net/Xz3u2/2/](http://jsfiddle.net/Xz3u2/2/)

```
$(".all2").sortable({
            revert : true
        }).draggable();
$(".all").droppable({
    accept: '.all2',
    drop: function(event, ui) {
       alert('should just fire when a item is dropped');
    }
}); 
```

# unit-testing - 酱实验室替代品

> ID：10655324
> 
> 赞同：4
> 
> 时间：2012-05-18T15:19:03.533
> 
> 标签：unit-testing, selenium, automated-tests

我们正在研究使用 Microsoft 的编码 UI 测试或 Telerik TestStudio 框架来自动化我们的 Web UI。我很想使用像 Sauce Labs 这样的服务来运行我们的测试，但是，Sauce Labs 需要 Selenium 测试。有没有人知道一些类似于 Sauce Labs 的服务来运行 Selenium 以外的 Web 测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:27:44.297

云中的 TFS 看起来很有前景[http://tfspreview.com/](http://tfspreview.com/)

无论是 TFS 服务还是 Sauce Lab，请注意，服务只会让您免于在内部维护 CI/Test 服务器的负担。它不会神奇地为您生成测试。设计和编码许多测试仍然是您的责任。这就是需要付出巨大努力和学习曲线的地方。

（说到学习曲线，Selenium 比 Ms 编码的 ui 测试更易于管理。等待机会影响公司决策......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-23T19:16:29.920

Sauce Labs 实际上能够运行其他（非 Selenium 和 Appium）框架。有一个超级好用的测试运行器，叫做 saucectl。您可以使用 CYpress、Test Cafe、Espresso、XCUITest 等进行测试。[您可以在文档中查看信息。](https://docs.saucelabs.com/testrunner-toolkit/)

TLDR

*   使用 cURL 在您的项目中安装 saucectl 或`npm install -g saucectl`
*   使用 .在您的测试项目中设置运行器`saucectl init`。选择你的框架风格和偏好
*   使用命令运行测试`saucectl run`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-15T21:27:57.720

TFS 不是 Sauce 的替代品。事实上，它们现在是从 Visual Studio Online 以前的 TFS 运行 Sauce 测试的集成。Sauce 是一个测试网格。最接近的竞争解决方案是 BrowserStack。但它们并没有被广泛采用。但它也是基于硒的。Telerik TestStudio 很好，但它也不是您运行的云。维护自己的网格是基于云的解决方案价值的重要组成部分。selenium 确实是最好的和最受支持的语言。

# c# - 如何使用 LINQ 同时对 2 个列表进行排序？

> ID：10655327
> 
> 赞同：24
> 
> 时间：2012-05-18T15:19:18.670
> 
> 标签：c#, linq

我有两个列表`{ 7 3 5 }`和`{9 8 1}`.

我想对我的第一个列表进行排序，并且我希望第二个列表具有与第一个列表相同的索引排列。

`{3 5 7}`=>`{8 1 9}`

是否可以在单个 LINQ 语句中执行此操作？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-18T15:21:24.783

听起来你可能想要：

```
var list1 = new List<int> { 7, 3, 5 };
var list2 = new List<int> { 9, 8, 1 };

var orderedZip = list1.Zip(list2, (x, y) => new { x, y } )
                      .OrderBy(pair => pair.x)
                      .ToList();
list1 = orderedZip.Select(pair => pair.x).ToList();
list2 = orderedZip.Select(pair => pair.y).ToList(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-18T15:23:49.467

您可以尝试使用以下[`Zip`](http://msdn.microsoft.com/en-us/library/dd267698.aspx)方法：

```
var sortedPairs = list1
    .Zip(list2, (item1, item2) => new KeyValuePair<int, int>(item1, item2))
    .OrderBy(pair => pair.Key); 
```

然后你可以通过以下方式获得第一个排序列表：

```
var sortedList1 = sortedPairs.Select(pair => pair.Key); 
```

第二个列表是：

```
var sortedList2 = sortedPairs.Select(pair => pair.Value); 
```

# java - 战舰-java游戏

> ID：10655328
> 
> 赞同：0
> 
> 时间：2012-05-18T15:19:18.980
> 
> 标签：java

我正在学习创建一个java游戏，对java还是很陌生。现在我想创建一个战舰游戏。但现在我被困在这里。现在，当我将船随机放置为电脑板时，有时它会与之前的船重叠，因此在接下来的游戏中变得不平衡。其次，在我得到玩家的输入后，我如何将输入值放入板中。这是我的代码：

```
import javax.swing.JOptionPane;
import java.util.Random;
import java.util.Scanner;

public class Battleship
{
    public static void main (String args[]){
        String map [][][]=new String [10][10][2];
        int row =0,col=0;

        //initPlayerMap(map);
        //printMap(map,true);// true to printout the map
        placeShips(map); // place the shipe at computer map
        initMap(map,"~", true);
        initMap(map,"#",false);
        placeShips(map); // place the shipe at computer map
        printMap(map,true);
        System.out.println("Now enter your coordinate of the boom");
        row = getInput("Please enter row: ");
        col = getInput("Please enter col: ");
        printMap(map,false); // computer map
        hitShip(row,col);

    }

    private static void hitShip (int row, int col){
        if (map[startFrom++][colOrRow][1]== map[row][col][1]){
            System.out.println("abc");
        }
        else
        {
            System.out.println("darn!");
        }
    }
    private static void initMap(String map[][][] , String initChar, boolean player){
        //the 0 in 3rd dimension is representing player map and 1 for computer
        int mapNo= (player?0:1);
        for (int i = 0 ; i < 10; i ++)
            for (int j=0; j<10; j++)
                map [i][j][mapNo]= initChar;
    }

    private static void printMap(String map[][][], boolean player){
        int whichMap=0;
        if (!player)
            whichMap=1;

        System.out.println(" 0\t1\t2\t3\t4\t5\t6\t7\t8\t9 ");
        for (int i = 0 ; i < 10; i ++){
            System.out.print(i+" ");
            for (int j=0; j<10; j++){
                System.out.print(map [i][j][whichMap]+ "\t");
            }
            System.out.print("\n");
        }
    }// end of printMap method

    public static int getInput(String message){
        Scanner sc = new Scanner (System.in);
        System.out.print(message);
        return sc.nextInt();
    }

    private static void placeShips(String[][][] grid)
    {
        char[] shipType = { 'B' , 'C' , 'F' , 'M' };
        int[] shipSize = { 5 , 4 , 3 , 2 };
        int[] shipNums = { 1 , 2 , 4 , 4 };

        for (int x = 0 ; x < shipType.length ; x++)
            for (int y = 1 ; y <= shipNums[x] ; y++)
            {

                String shipName = shipType[x]+""+y;
                placeShip(grid,shipName,shipSize[x]);
            }
    }

    private static void placeShip(String[][][] map, String shipName, int size){
        int direction = (int)(Math.random()*2);// 0 or 1
        int colOrRow = (int)(Math.random()*map.length); // pick
        int startFrom =(int)(Math.random()*(map.length-size)); // which cell?

        // placing the ship
        for(int i=0; i < size; i++){
            // weather is vertical or horizontal
            // vertical
            if (direction == 0 ){
            map[startFrom++][colOrRow][1] = shipName;

            }
            else {
                map[colOrRow][startFrom++][1] = shipName;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T15:27:14.577

首先，您没有正确建模（IMO）

我会更多地使用 java.awt.Rectangle。我会先把板子做成一个矩形，然后把每艘船也做成一个矩形。因为 Rectangle （实际上来自 Shape ）有方法 contains(...) 你应该能够快速测试你的矩形是否重叠。

至于在板上标记镜头，也许您的船需要被定义为不仅仅是矩形 - 为它们提供已击中点的功能。您可以使用 java.awt.Point 进行命中/未命中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:24:19.793

我想你在这里问了两个问题，我会同时回答它们。

1.  要将一艘船放在场地上并确保它们不重叠，请检查您尝试将新船放入的任何方格中是否有船。制作一个二维布尔数组，在其中保存哪个方格是船。
2.  对于用户输入，您尝试了什么，您遇到了哪些问题？没有任何东西可以坚持，我不能给你任何东西来工作。我建议让用户给出两个坐标：船的起点和终点。处理该数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:26:40.443

您似乎没有使用数据结构来跟踪地图中“已填充”的位置。这样您就可以比较或“验证”地图中未填写的位置。

# sql-server - 访问在不同范围内创建的 SQL Server 临时表

> ID：10655330
> 
> 赞同：3
> 
> 时间：2012-05-18T15:19:20.510
> 
> 标签：sql-server, tsql, scope, temp-tables, sp-executesql

我正在为 SQL Server 2008 编写一个存储过程，我需要从一组表中提取信息。我不知道这些表的结构。同一数据库中还有另一个表，它告诉我该表中字段的名称和类型。

我正在这样做：

```
declare @sql nvarchar(max)

set @sql = 'select ... into #new_temporary_table ...'
exec sp_executesql @sql

Then I iterate doing:

set @sql = 'insert into #another_temporary_table ... select ... from #new_temporary_table'
exec sp_executesql @sql 
```

之后我删除了临时表。这发生在一个循环中，因此该表被创建、填充和删除多次，每次都有不同的列。

这失败并出现错误：

> 对象名称无效：#new_temporary_table。

经过一番谷歌搜索后，我发现：

1.  该表`#new_temporary_table`是在`exec sp_executesql`与我的存储过程不同的调用范围内创建的。这就是下一个`exec sp_executesql`找不到表的原因。这篇文章对此进行了解释： [http ://social.msdn.microsoft.com/forums/en-US/transactsql/thread/1dd6a408-4ac5-4193-9284-4fee8880d18a](http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/1dd6a408-4ac5-4193-9284-4fee8880d18a)

2.  我可以使用以 . 开头的全局临时表`##`。我不能这样做，因为多个存储过程可以同时运行并且它们会影响彼此的状态

3.  在这篇文章中，它说如果我发现自己处于这种情况，我应该改变数据库的结构。这对我来说不是一个选择：http: [//www.sommarskog.se/dynamic_sql.html](http://www.sommarskog.se/dynamic_sql.html)

我发现的一种解决方法是将所有`select into #new_temporary_table..`和所有`insert into ...`脚本组合成一个巨大的语句。这工作正常，但它有一些缺点。

例如，如果我打印@sql 进行故障排除，文本会被截断。

我还有其他选择吗？欢迎所有想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:45:39.300

您可以使用**全局临时**表，但使用**上下文 ID**（*例如 newid()*）作为全局临时表名称的一部分。

```
declare @sql varchar(2000)
declare @contextid varchar(50) = convert(varchar(20), convert(bigint, substring(convert(binary(16), newid()), 1, 4)))
set @sql = 'select getdate() as stuff into ##new_temporary_table_' + @contextid
exec (@sql) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:41:46.083

#temp 表（非全局）在它们创建的范围内及以下可用。所以你可以做类似的事情......

```
while (your_condition = 1) begin
    set @sql = 'select ... into #temp1 ...from blah
        exec sp_do_the_inserts'
    exec(@sql)
end 
```

sp_do_the_inserts 可能看起来像...

```
select * into #temp2 from #temp1
....your special logic here.... 
```

当然，这假定您事先创建 sp_do_the_inserts。不知道这是否满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T17:30:58.910

我认为最好使用一个脚本。

您可以在“工具”>“选项”>“查询结果”>“SQL Server”>“结果为文本”中更改将打印的字符数 - 将“最大字符数...”从 256 更改为最大值 (8192)。

如果它大于8192，那么是的，打印很困难。但在这种情况下，您可以尝试不同的选择。而`PRINT @sql;`不是使用以下内容（使用结果到网格）：

```
SELECT sql FROM (SELECT @sql) AS x(sql) FOR XML PATH; 
```

现在您可以单击结果，它会在新的查询窗口中打开。好吧，它是一个 XML 文件窗口，您无法执行它或查看颜色编码，并且您必须忽略它的更改，例如`>`以`&gt;`使其作为 XML 数据有效，但是从这里很容易看到，如果您是只是想看看它。您可以将其复制并粘贴到真正的查询编辑器窗口，并根据需要对实体化字符进行搜索和替换。FWIW 我要求他们制作这样的 XML 窗口真正的查询窗口，但这被拒绝了：

[http://connect.microsoft.com/SQLServer/feedback/details/425990/ssms-allow-same-semantics-for-xml-docs-as-query-windows](http://connect.microsoft.com/SQLServer/feedback/details/425990/ssms-allow-same-semantics-for-xml-docs-as-query-windows)

# html - css语法仅获取另一个元素内的元素

> ID：10655333
> 
> 赞同：0
> 
> 时间：2012-05-18T15:19:29.187
> 
> 标签：html, css

我需要创建一个仅适用于持有人内部的持有人的类，而不适用于持有人之外的人。

```
 <div class="holder">
            <div class="holder-left">
            </div>
            <div class="holder-right">
            </div>
    </div>

    <div class="holder-left">
    </div>

    div.holder {
            margin: 10px 10px 0 10px;
            width: 1002px;
    } 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T15:21:05.300

试试这个：

```
div.holder .holder-left
{
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T15:21:41.900

使用[子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)：

```
div.holder > .holder-left 
```

或[后代选择器](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)：

```
div.holder .holder-left 
```

子选择器将匹配`.holder-left`元素的直接子`div.holder`元素。后代选择器将匹配`.holder-left`元素的后代元素（例如，它们可能是孙子`div.holder`元素）。

# java - 在 Java 中分配默认值的标准方法

> ID：10655341
> 
> 赞同：2
> 
> 时间：2012-05-18T15:19:59.580
> 
> 标签：java

我经常调用可能返回空值的外星方法。为了避免简单的空检查，如

```
if (myVariable != null) {
     // do something
} 
```

我有时会分配一个默认值，如下所示：

```
myVariable = (myVariable == null) ? defaultValue : myVariable; 
```

例如，这在 Ruby 中似乎有点多余，有`||=`运算符

我不是在要求这样的运算符，但我使用三元运算符的标准方法似乎有点多余，或者也可能令人困惑？

有什么更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T15:22:24.193

试试这个：

```
if (myVariable == null) {
    myVariable = defaultValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:26:14.423

如果外星人方法可能返回 null 值，则应注意方法的 Java 文档中的 null 返回值。客户端使用那个外星人方法必须检查，但没办法，返回值。

执行此操作的简单方法：

```
retVal = alienMethod();
if (retVal == null) {
    retVal = defaultVal;
} 
```

如果您仍然想避免检查空值，则返回值的方法必须负责返回默认值。但是你的默认值是多少？根据您的返回类型，您可以创建一个虚拟类来表示您的默认值，而不是返回空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:33:45.213

没有更好/更短/更好的方法来做到这一点......

有人谈论引入“？” Java 7 中的 null 值运算符，但这个概念已经从版本中移出....也许适用于 Java 8 ？

[https://blogs.oracle.com/darcy/entry/project_coin_final_five](https://blogs.oracle.com/darcy/entry/project_coin_final_five)

[http://viralpatel.net/blogs/2009/10/null-safe-type-java-7-nullpointerexception.html](http://viralpatel.net/blogs/2009/10/null-safe-type-java-7-nullpointerexception.html)

[http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html](http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T15:38:46.457

一般来说，没有“优雅”的方式。如果变量是你的类的一个字段，你可以在 setter 或 getter 中做。但是正确的 javadocs（我没有在下面显示！）对于解释 null 会发生什么很重要。例如

```
 public void setFoo(Foo foo) {
      this.foo = foo != null ? foo : DEFAULT_FOO;
   }

   public Foo getFoo() {
      return foo != null ? foo : DEFAULT_FOO;
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T17:05:47.353

您可以将默认值的分配包装到一个小的实用程序函数中，并将其放入帮助程序类中。对于 type 的变量`String`，这看起来像这样：

```
public static String unNull(String val,String defVal) {
    return (val==null ? defVal : val);
} 
```

然后，在您的代码中，您可以编写

```
myVariable = unNull(alienMethod(),defaultValue); 
```

使用静态导入，您可以不用在静态方法的名称前加上类名前缀。

您还可以创建一个通用方法来处理这个问题（以模板化参数的类型和返回类型），但我不确定如果没有额外的 type 参数它会起作用`Class`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-29T06:02:42.690

终于有一种更好的方法来做到这一点：[`Optional`](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html)在 Java 8 中。而不是

```
Foo myVariable = bar();
myVariable = (myVariable == null) ? defaultValue : myVariable; 
```

哪里`bar()`可以回来`null`，现在你做

```
Foo myVariable = Optional.ofNullable(bar()).orElse(defaultValue).get() 
```

# jsf - JSF-2 f:selectItems with Map 不显示 itemLabel

> ID：10655349
> 
> 赞同：17
> 
> 时间：2012-05-18T15:20:35.547
> 
> 标签：jsf, jsf-2, map, el

当我使用 f:selectItems 在 Map 中显示项目时，我无法显示 Map 项目的值，只能显示键。f:selectItems 根本不使用 itemLabel。当我使用 List 代替时，一切正常。

以下确实使用 itemLabel 来显示列表中项目的“描述”：

```
<h:selectOneMenu>
  <f:selectItems value="#{testBB.testList}" var="s"
    itemLabel="TEST #{s.description}" itemValue="#{TEST s.name}" />
</h:
selectOneMenu> 
```

以下尝试在 Map 中显示项目的值不起作用。它显示项目的键，但不使用 itemLabel 属性，这可以通过缺少“TEST”文本的输出来识别。

```
<rich:select>
  <f:selectItems value="#{testBB.testMap}" var="s"
    itemLabel="TEST #{s.value}" itemValue="TEST #{s.key}" />
</rich:select> 
```

使用的简单支持 bean 如下：

```
public class TestBB {
  private Map<String, String> testMap;
  private List<TestItem> testList;

  public TestBB() {
    testMap = new HashMap<String, String>();
    testMap.put("1_key", "Item One");
    testMap.put("2_key", "Item Two");
    testMap.put("3_key", "Item Three");

    testList = new ArrayList<TestItem>();
    testList.add( new TestItem("name_1", "description_1") );
    testList.add( new TestItem("name_2", "description_2") );
    testList.add( new TestItem("name_3", "description_3") );
  }

  public Map<String, String> getTestMap() {
    return testMap;
  }

  public List<TestItem> getTestList() {
    return testList;
  }

} 
```

那么，关于如何使其工作的任何想法，即如何有效地使用带有 selectItems 的 Map？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-18T17:09:30.347

您的问题是合理的，但代码使它令人困惑和模棱两可。我将在此答案中忽略您的代码。

至于具体问题*“如何使用`Map`” `<f:selectItems>`，*您需要意识到映射键默认用作项目标签，映射值默认用作项目值。您似乎希望它是相反的（老实说，我直觉上也希望如此，但这只是一个设计决定 - 地图键强制唯一性和选项标签在 UI 角度肯定应该是唯一的，但选项值不一定需要是唯一的）。

所以，这应该可以（请注意，我[`LinkedHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)在这里使用它是因为它维护了插入顺序）：

```
map = new LinkedHashMap<String, String>();
map.put("Label 1", "value1");
map.put("Label 2", "value2");
map.put("Label 3", "value3"); 
```

和

```
<f:selectItems value="#{bean.map}" /> 
```

如果你想交换键和值，那么你应该迭代[`Map#entrySet()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet%28%29). 这仅在您的环境支持 EL 2.2 时有效，因为您必须通过直接方法调用来调用它，因为没有 getter。

例如

```
map = new LinkedHashMap<String, String>();
map.put("value1", "Label 1");
map.put("value2", "Label 2");
map.put("value3", "Label 3"); 
```

和

```
<f:selectItems value="#{bean.map.entrySet()}" var="entry" 
    itemValue="#{entry.key}" itemLabel="#{entry.value}" /> 
```

### 也可以看看：

*   [我们的`selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)

# c# - 从 Web Api 控制器返回 http 状态码

> ID：10655350
> 
> 赞同：245
> 
> 时间：2012-05-18T15:20:39.933
> 
> 标签：c#, asp.net-web-api, httpresponse, http-status-codes

我正在尝试为 Web api 控制器中的 GET 方法返回未修改的状态代码 304。

我成功的唯一方法是这样的：

```
public class TryController : ApiController
{
    public User GetUser(int userId, DateTime lastModifiedAtClient)
    {
        var user = new DataEntities().Users.First(p => p.Id == userId);
        if (user.LastModified <= lastModifiedAtClient)
        {
             throw new HttpResponseException(HttpStatusCode.NotModified);
        }
        return user;
    }
} 
```

这里的问题是它不是一个例外，它只是没有被修改所以客户端缓存是好的。我还希望返回类型是用户（正如所有 web api 示例都使用 GET 所示）而不返回 HttpResponseMessage 或类似的东西。

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2012-05-18T19:25:14.750

我不知道答案，所以在[这里](http://aspnetwebstack.codeplex.com/discussions/356306)问了 ASP.NET 团队。

所以诀窍是将签名更改为`HttpResponseMessage`并使用`Request.CreateResponse`.

```
[ResponseType(typeof(User))]
public HttpResponseMessage GetUser(HttpRequestMessage request, int userId, DateTime lastModifiedAtClient)
{
    var user = new DataEntities().Users.First(p => p.Id == userId);
    if (user.LastModified <= lastModifiedAtClient)
    {
         return new HttpResponseMessage(HttpStatusCode.NotModified);
    }
    return request.CreateResponse(HttpStatusCode.OK, user);
} 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-06-15T20:41:04.023

如果要将操作签名保留为返回用户，还可以执行以下操作：

```
public User GetUser(int userId, DateTime lastModifiedAtClient) 
```

如果您想返回其他内容，`200`那么您将在您的操作中抛出一个`HttpResponseException`并传递`HttpResponseMessage`您想要发送给客户端的内容。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-07-04T11:31:51.810

更改 GetXxx API 方法以返回 HttpResponseMessage，然后返回完整响应的类型化版本和 NotModified 响应的非类型化版本。

```
 public HttpResponseMessage GetComputingDevice(string id)
    {
        ComputingDevice computingDevice =
            _db.Devices.OfType<ComputingDevice>()
                .SingleOrDefault(c => c.AssetId == id);

        if (computingDevice == null)
        {
            return this.Request.CreateResponse(HttpStatusCode.NotFound);
        }

        if (this.Request.ClientHasStaleData(computingDevice.ModifiedDate))
        {
            return this.Request.CreateResponse<ComputingDevice>(
                HttpStatusCode.OK, computingDevice);
        }
        else
        {
            return this.Request.CreateResponse(HttpStatusCode.NotModified);
        }
    } 
```

*ClientHasStale 数据是我检查 ETag 和 IfModifiedSince 标头的扩展。

MVC 框架仍应序列化并返回您的对象。

**笔记**

我认为通用版本将在 Web API 的某些未来版本中被删除。

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2015-04-01T10:57:31.893

在 MVC 5 中，事情变得更容易了：

```
return new StatusCodeResult(HttpStatusCode.NotModified, this); 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-08-15T15:38:01.820

我讨厌撞旧文章，但这是谷歌搜索中的第一个结果，我有一段时间解决这个问题（即使在你们的支持下）。所以这里什么都没有...

希望我的解决方案能帮助那些也感到困惑的人。

```
namespace MyApplication.WebAPI.Controllers
{
    public class BaseController : ApiController
    {
        public T SendResponse<T>(T response, HttpStatusCode statusCode = HttpStatusCode.OK)
        {
            if (statusCode != HttpStatusCode.OK)
            {
                // leave it up to microsoft to make this way more complicated than it needs to be
                // seriously i used to be able to just set the status and leave it at that but nooo... now 
                // i need to throw an exception 
                var badResponse =
                    new HttpResponseMessage(statusCode)
                    {
                        Content =  new StringContent(JsonConvert.SerializeObject(response), Encoding.UTF8, "application/json")
                    };

                throw new HttpResponseException(badResponse);
            }
            return response;
        }
    }
} 
```

然后从 BaseController 继承

```
[RoutePrefix("api/devicemanagement")]
public class DeviceManagementController : BaseController
{... 
```

然后使用它

```
[HttpGet]
[Route("device/search/{property}/{value}")]
public SearchForDeviceResponse SearchForDevice(string property, string value)
{
    //todo: limit search property here?
    var response = new SearchForDeviceResponse();

    var results = _deviceManagementBusiness.SearchForDevices(property, value);

    response.Success = true;
    response.Data = results;

    var statusCode = results == null || !results.Any() ? HttpStatusCode.NoContent : HttpStatusCode.OK;

    return SendResponse(response, statusCode);
} 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2019-04-26T18:39:44.197

对于 ASP.NET Web Api 2，[MS 的这篇文章](https://docs.microsoft.com/en-us/aspnet/web-api/overview/getting-started-with-aspnet-web-api/action-results)建议将方法的返回类型更改为`IHttpActionResult`. 然后，您可以返回一个内置的`IHttpActionResult`实现，如`Ok`,`BadRequest`等（[参见此处](https://docs.microsoft.com/en-us/dotnet/api/system.web.http.apicontroller.internalservererror?view=aspnetcore-2.2)）或返回您自己的实现。

对于您的代码，可以这样做：

```
public IHttpActionResult GetUser(int userId, DateTime lastModifiedAtClient)
{
    var user = new DataEntities().Users.First(p => p.Id == userId);
    if (user.LastModified <= lastModifiedAtClient)
    {
        return StatusCode(HttpStatusCode.NotModified);
    }
    return Ok(user);
} 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2019-01-02T11:10:22.127

.net core 2.2 返回 304 状态码。这是使用 ApiController。

```
 [HttpGet]
    public ActionResult<YOUROBJECT> Get()
    {
        return StatusCode(304);
    } 
```

您可以选择返回一个带有响应的对象

```
 [HttpGet]
    public ActionResult<YOUROBJECT> Get()
    {
        return StatusCode(304, YOUROBJECT); 
    } 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-01-26T20:01:18.060

我不喜欢更改我的签名来使用 HttpCreateResponse 类型，所以我想出了一些扩展的解决方案来隐藏它。

```
public class HttpActionResult : IHttpActionResult
{
    public HttpActionResult(HttpRequestMessage request) : this(request, HttpStatusCode.OK)
    {
    }

    public HttpActionResult(HttpRequestMessage request, HttpStatusCode code) : this(request, code, null)
    {
    }

    public HttpActionResult(HttpRequestMessage request, HttpStatusCode code, object result)
    {
        Request = request;
        Code = code;
        Result = result;
    }

    public HttpRequestMessage Request { get; }
    public HttpStatusCode Code { get; }
    public object Result { get; }

    public Task<HttpResponseMessage> ExecuteAsync(CancellationToken cancellationToken)
    {
        return Task.FromResult(Request.CreateResponse(Code, Result));
    }
} 
```

然后，您可以向您的 ApiController（或更好的基本控制器）添加一个方法，如下所示：

```
protected IHttpActionResult CustomResult(HttpStatusCode code, object data) 
{
    // Request here is the property on the controller.
    return new HttpActionResult(Request, code, data);
} 
```

然后你可以像任何内置方法一样返回它：

```
[HttpPost]
public IHttpActionResult Post(Model model)
{
    return model.Id == 1 ?
                Ok() :
                CustomResult(HttpStatusCode.NotAcceptable, new { 
                    data = model, 
                    error = "The ID needs to be 1." 
                });
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-11-15T13:56:13.013

另外一个选项：

```
return new NotModified(); 
```

* * *

```
public class NotModified : IHttpActionResult
{
    public Task<HttpResponseMessage> ExecuteAsync(CancellationToken cancellationToken)
    {
        var response = new HttpResponseMessage(HttpStatusCode.NotModified);
        return Task.FromResult(response);
    }
} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-10-04T19:28:11.870

试试这个 ：

```
return new ContentResult() { 
    StatusCode = 404, 
    Content = "Not found" 
}; 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-07-29T05:55:11.307

如果您需要返回 IHttpActionResult 并希望返回错误代码和消息，请使用：

```
return ResponseMessage(Request.CreateErrorResponse(HttpStatusCode.NotModified, "Error message here")); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-07-08T21:32:56.330

```
public HttpResponseMessage Post(Article article)
{
    HttpResponseMessage response = Request.CreateResponse<Article>(HttpStatusCode.Created, article);

    string uriToTheCreatedItem = Url.Route(null, new { id = article.Id });
    response.Headers.Location = new Uri(Request.RequestUri, uriToTheCreatedItem);

    return response;
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-04-24T09:36:57.973

`IHttpActionResult`使用Web API 2 中引入的更现代的更新 @Aliostads 答案。

[https://docs.microsoft.com/en-us/aspnet/web-api/overview/getting-started-with-aspnet-web-api/action-results#ihttpactionresult](https://docs.microsoft.com/en-us/aspnet/web-api/overview/getting-started-with-aspnet-web-api/action-results#ihttpactionresult)

```
public class TryController : ApiController
{
    public IHttpActionResult GetUser(int userId, DateTime lastModifiedAtClient)
    {
        var user = new DataEntities().Users.First(p => p.Id == userId);
        if (user.LastModified <= lastModifiedAtClient)
        {
            return StatusCode(HttpStatusCode.NotModified);
            // If you would like to return a Http Status code with any object instead:
            // return Content(HttpStatusCode.InternalServerError, "My Message");
        }
        return Ok(user);
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-01-04T21:14:22.010

我知道这里有几个很好的答案，但这是我需要的，所以我想我会添加此代码，以防其他人需要使用 webAPI 在 4.7.x 中返回他们想要的任何状态代码和响应正文。

```
public class DuplicateResponseResult<TResponse> : IHttpActionResult
{
    private TResponse _response;
    private HttpStatusCode _statusCode;
    private HttpRequestMessage _httpRequestMessage;
    public DuplicateResponseResult(HttpRequestMessage httpRequestMessage, TResponse response, HttpStatusCode statusCode)
    {
        _httpRequestMessage = httpRequestMessage;
        _response = response;
        _statusCode = statusCode;
    }

    public Task<HttpResponseMessage> ExecuteAsync(CancellationToken cancellationToken)
    {
        var response = new HttpResponseMessage(_statusCode);
        return Task.FromResult(_httpRequestMessage.CreateResponse(_statusCode, _response));
    }
} 
```

# iphone - 使用图形 API 获取好友状态更新

> ID：10655351
> 
> 赞同：2
> 
> 时间：2012-05-18T15:20:41.200
> 
> 标签：iphone, facebook, facebook-graph-api

我想在我的 iPhone 应用程序中使用图形 API 获取朋友状态更新。为此，我正在使用：

```
https://graph.facebook.com/id/statuses?access_token=... 
```

但我无法得到回应：

```
{
   "data": [

   ]
} 
```

有人可以告诉我这是否可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:27:06.247

您可以使用它来获取状态消息

[https://graph.facebook.com/367501354973?access_token=AAAAAAITEghMBAM0UcHwz8aXjdZA0arkzqgG21Qv7xJxuZCDKySWf0aXkgByCLVDJZB0sxyYEn1aAMLVaLSxAvwO3EjBtKc57y5QPQGmPbmLVf1dHMDR](https://graph.facebook.com/367501354973?access_token=AAAAAAITEghMBAM0UcHwz8aXjdZA0arkzqgG21Qv7xJxuZCDKySWf0aXkgByCLVDJZB0sxyYEn1aAMLVaLSxAvwO3EjBtKc57y5QPQGmPbmLVf1dHMDR)

并读取消息属性。那是[https://graph.facebook.com/id?access_token=token_here](https://graph.facebook.com/id?access_token=token_here)

顺便说一句，可见性基于隐私设置。

**替代**
[Facebook Graph API 获取所有用户及其状态](https://stackoverflow.com/questions/5479819/facebook-graph-api-get-all-users-and-their-status)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:43:26.237

是的。这是可能的。您提供的 URL 格式正确。

对您来说，这一定是因为没有来自用户的状态消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-22T09:35:17.410

我遇到过同样的问题。基本上，生成的访问令牌是根据分配的权限完成的。对于帖子，您需要启用一个名为 read_stream 的扩展权限。除非并且直到您的 access_token 没有使用上述权限生成，否则您无法阅读帖子。

尝试从此处生成访问令牌并查看

[https://developers.facebook.com/tools/explorer/145634995501895/?method=GET&path=622206695%3Ffields%3Did%2Cname](https://developers.facebook.com/tools/explorer/145634995501895/?method=GET&path=622206695%3Ffields%3Did%2Cname)

# php - 从 POST 获取复选框数组值

> ID：10655355
> 
> 赞同：11
> 
> 时间：2012-05-18T15:20:57.827
> 
> 标签：php, html, arrays, forms, post

我发布了一系列复选框。我不能让它工作。我没有在 foreach 循环中包含正确的语法以保持简单。但它正在工作。我通过尝试对文本字段而不是复选框执行相同的操作来进行测试，并且它与文本字段一起使用。

```
<form method="post">
<?php 
foreach{
echo'
<input id="'.$userid.'" value="'.$userid.'"  name="invite[]" type="checkbox">
<input type="submit">';
}
?>
</form> 
```

这是不起作用的部分。它正在回显“邀请”而不是数组。

```
<?php
    if(isset($_POST['invite'])){
$invite = $_POST['invite'];
echo $invite;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-18T15:29:31.300

您的 $_POST 数组包含邀请数组，因此将其读取为

```
<?php
if(isset($_POST['invite'])){
  $invite = $_POST['invite'];
  echo $invite;
}
?> 
```

行不通，因为它是一个数组。您必须遍历数组以获取所有值。

```
<?php
if(isset($_POST['invite'])){
  if (is_array($_POST['invite'])) {
    foreach($_POST['invite'] as $value){
      echo $value;
    }
  } else {
    $value = $_POST['invite'];
    echo $value;
  }
}
?> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-18T15:41:45.817

我刚刚使用了以下代码：

```
<form method="post">
    <input id="user1" value="user1"  name="invite[]" type="checkbox">
    <input id="user2" value="user2"  name="invite[]" type="checkbox">
    <input type="submit">
</form>

<?php
    if(isset($_POST['invite'])){
        $invite = $_POST['invite'];
        print_r($invite);
    }
?> 
```

当我选中两个框时，输出是：

```
Array ( [0] => user1 [1] => user2 ) 
```

我知道这并不能直接回答您的问题，但它为您提供了一个可供参考的工作示例，并希望能帮助您解决问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-02T21:05:45.653

查看 implode() 函数作为替代方法。这会将数组转换为列表。第一个参数是您希望如何分隔项目。在这里，我使用了一个逗号，后面有一个空格。

```
$invite = implode(', ', $_POST['invite']);
echo $invite; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T15:24:52.567

```
// if you do the input like this
<input id="'.$userid.'" value="'.$userid.'"  name="invite['.$userid.']" type="checkbox">

// you can access the value directly like this:
$invite = $_POST['invite'][$userid]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T15:25:55.407

因为您的`<form>`元素在 foreach 循环内，所以您正在生成多个表单。我假设您想要一种形式的多个复选框。

试试这个...

```
<form method="post">
foreach{
<?php echo'
<input id="'.$userid.'" value="'.$userid.'"  name="invite[]" type="checkbox">
<input type="submit">';
?>
}
</form> 
```

# php - jQuery中延迟的后台进程和结果？

> ID：10655359
> 
> 赞同：0
> 
> 时间：2012-05-18T15:21:11.380
> 
> 标签：php, jquery

我有一个相当广泛的 PHP 页面，它为我们的产品许可进行了大量的 IP 地址验证。其中一个验证例程可能需要 20-30 秒，而其中大部分是在本地进行的，因此会很快出现。我想在一个单独的 jQuery GET 中启动那个更长的，并在他们查看更快的结果时显示它的结果。

这是我正在使用的“fastchecks”的伪代码 - 如何/在哪里启动“slowchecks”？

```
$.ajax(
{
    type: "GET",
    dataType: "json",
    url: "license/fastchecks/" + $("#ipblocks").val(),
    error:function (xhr, ajaxOptions, thrownError){
        alert("IP Checking Error: " + xhr.status + ": " + thrownError);
    },
    success: function(fastresults)
    {
        /* Do stuff with my fast check results while I wait for my slow check results */
    }
}); 
```

这可能吗？我一直回到一个定时事件，但这个过程本身就是一个延迟，所以这对我来说似乎没有意义——我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:41:51.997

你的代码是好的。您不需要使用任何计时器或类似的东西。您的“slowchecks”将与您的“fastchecks”完全相同。这里的关键字是异步的。直到 ajax 调用完成后，该`success`函数才会被调用。因此，无论您想对从 ajax 调用中获得的数据做什么，都将其放入您的`success`函数中，在返回结果之前实际上不会做任何事情。

此外，您将同时运行两个 Ajax 调用。每个完成后都会运行它自己的成功函数。

# iphone - 母语国家列表

> ID：10655361
> 
> 赞同：1
> 
> 时间：2012-05-18T15:21:14.257
> 
> 标签：iphone, ios, locale, country

我正在使用一个网络服务，它为我提供了一个国家列表，可以从 2 个字母中选择（“us”代表美国，“es”代表西班牙等）。

我需要将其呈现给用户并将选择发回。

iOS 上是否有 API 可以根据当前语言将国家代码转换为国家名称？我知道我可以将代码静态映射到国家，但我想支持英语以外的其他语言。

例如，我想在使用英语语言环境时为“es”显示“西班牙”，在使用西班牙语语言环境时显示“西班牙”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:31:50.667

我用过这个，也许它也适合你的需要：

```
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
NSString *countryCode = [locale objectForKey: NSLocaleCountryCode];
NSString *countryName = [locale displayNameForKey: NSLocaleCountryCode value: countryCode];
[locale release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:28:45.083

我找到了这个，但我建议您构建自己的解决方案。免费 API 为您提供限制，可能会限制您的应用使用[链接](http://www.geognos.com/geo/en/world-countries-API.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:33:18.083

好的，显然它比我更容易：如果其他人有同样的问题，我会发布答案：

```
NSString* name=[[NSLocale currentLocale] displayNameForKey:NSLocaleCountryCode value:@"ca"]; 
```

就是这样 ：）

# jquery - 移动应用程序中的 CSS/jQuery 问题

> ID：10655371
> 
> 赞同：0
> 
> 时间：2012-05-18T15:21:45.020
> 
> 标签：jquery, css, mobile-application, mobile-website

我有一个顶栏和一个底栏，它们固定在视口的顶部和底部。在它们之间是一个地图 div，一个 javascript 变成了一个占据屏幕其余部分的谷歌地图。

然而，底栏上方是一个 display:none 元素，其中包含一堆换行符和水平线。这是我显示列表的临时方法，其中没有任何内容，直到我找到更好的方法来模拟 iOS 样式列表。（这就是我所指的： [http](http://www.technipages.com/wp-content/uploads/2011/12/iOS-list-of-music-not-on-device.png) ://www.technipages.com/wp-content/uploads/2011/12/iOS-list-of-music-not-on-device.png ）如果有人有建议在那，那很好，但这不是这里的主要问题。javascript 用项目填充该列表并清除空行，并且 jQuery 函数通过触摸底部栏上的按钮将列表滑动到视图中。这一切都很好。

当您按下底部的按钮时，列表应在地图上向上滑动并停在顶部栏，然后您可以滚动浏览它。两个条形图仍在视野中。再次按下按钮使其滑开。

所有这一切的问题在于，打开列表后，当您滚动列表时，顶部和底部栏神奇地*成为列表的一部分，*并与所有其他项目一起滚动。这让我很困惑，因为它们都是固定的，但显然我犯了一个错误。

这是我的代码。所有 CSS 都是内联的。我还展示了显示列表的 jQuery 函数；这很简单。我应该注意到，在 XCode 模拟器中这可以完美运行，但是当我在 itouch 上对其进行测试时，我得到了上述结果。非常混乱。

```
<head>
<script type="text/javascript">
$("#bottombar").click(function(){
      //alert("Trigger!");
      $("#resultsList").slideToggle("fast");
                  });
</script>
<head>
 <body>

        <div style="position:fixed; top:0px; width:100%; border-bottom: 3px solid; z-index: 19; background:#FFFFFF; padding:5px;"> 
            <a style="text-decoration:none; z-index:20;" href="index.html">Home</a>
        </div>
        <br />

        <div id="map_canvas" style="width:100%; margin-top:10px; height:400px;"></div>

        <div style="position:relative">

            <div id="resultsList" style="background: #FFFFFF; width:100%; margin-top:15px; height: 400px; z-index:1; position:absolute; bottom:0; left:0; display:none">

                <br id="top"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/> 

            </div>

        </div>

        <div style="position:fixed; bottom:0px; width:100%; border-top: 3px solid; z-index: 19; background:#FFFFFF; padding:5px;"> 
            <button id="bottombar" type="button" style="z-index:20; padding-bottom:5px;">Show as List</button>
        </div>

    </body> 
```

# wpf - DataGrid SelectedItem 绑定到错误的 DataContext MVVM 模式

> ID：10655375
> 
> 赞同：0
> 
> 时间：2012-05-18T15:22:00.133
> 
> 标签：wpf, data-binding, binding, mvvm

我正在尝试获取已绑定到 CollectionViewSource 的数据网格的当前选定项。但是，似乎 SelectedItem 属性没有正确绑定到我在 ViewModel 中设置的属性。

```
 <Grid DataContext="{Binding CollectionView}">
        <DataGrid ItemsSource="{Binding}" Margin="0,30,0,0" SelectedItem="{Binding SelectedRow}" />
      </Grid> 
```

运行项目时，在VS2010的输出框中看到了这个错误信息。

```
System.Windows.Data Error: 40 : BindingExpression path error: 'SelectedRow' property not found on 'object' ''BindingListCollectionView' (HashCode=56718381)'. BindingExpression:Path=SelectedRow; DataItem='BindingListCollectionView' (HashCode=56718381); target element is 'DataGrid' (Name=''); target property is 'SelectedItem' (type 'Object') 
```

我知道数据网格的 SelectedItem 属性正在尝试绑定到 CollectionViewSource，但我不太确定如何告诉 SelectedItem 绑定到我的 ViewModel 的 SelectedRow 属性。任何帮助，将不胜感激。另外，如果您需要有关我的设置的更多信息，请随时询问。

这是我的 ViewModel 中的属性，以防万一：

```
 public DataRow SelectedRow
    {
        get
        {
            return _selectedRow;
        }

        set
        {
            _selectedRow = value;
            OnPropertyChanged("SelectedRow");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:24:45.627

将 DataRow 更改为您要绑定的任何实际对象类型。

```
public **Object each row represents in view model** SelectedRow
{
    get
    {
        return _selectedRow;
    }

    set
    {
        _selectedRow = value;
        OnPropertyChanged("SelectedRow");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:12:38.217

我做了更多的挖掘，并能够想出一个解决方案。本质上，我需要告诉 SelectedItem 属性回头查看 MainWindow 的 DataContext。

我将 XAML 更改为：

```
 <Grid DataContext="{Binding CollectionView}">
        <DataGrid ItemsSource="{Binding}" Margin="0,30,0,0" SelectedItem="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=DataContext.SelectedRow}">
        </DataGrid>
    </Grid> 
```

然后将我的 ViewModel 中的属性更改为 DataRowView 而不是 DataRow

```
public DataRowView SelectedRow
{
    get
    {
        return _selectedRow;
    }

    set
    {
        _selectedRow = value;
        OnPropertyChanged("SelectedRow");
    }
} 
```

谢谢大家！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:53:41.397

`SelectedRow`不是 的属性`CollectionView`。我假设两者都是您的 ViewModel 的属性：

```
<Grid DataContext="{Binding}">
    <DataGrid ItemsSource="{Binding CollectionView}"
              SelectedItem="{Binding SelectedRow}" />
</Grid> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T16:57:29.620

你有`SelectedItem`你的绑定，你的财产的名字是`SelectedRow`- 确保这些是相同的。

# c# - 从 MemoryStream 生成 XML 和 HTML

> ID：10655379
> 
> 赞同：1
> 
> 时间：2012-05-18T15:22:07.547
> 
> 标签：c#, asp.net, html, xml, xslt

需要从**XML**和相应的**XSL生成****html 报告**，但我必须在服务器目录上使用 memorystream 而不是 IO 文件写入。在大多数情况下，我设法创建了一个 xml

 ****```
MemoryStream ms = new MemoryStream();
XmlWriterSettings wSettings = new XmlWriterSettings();
wSettings.Indent = true;
using(XmlWriter writer = XmlWriter.Create(ms,wSettings))
{
      /**
          creating xml here
      **/
      writer.Flush();
      writer.Close();
}
return ms; // returning the memory stream to another function
           // to create html

// This Function creates 
protected string ConvertToHtml(MemoryStream xmlOutput)
{
        XPathDocument document = new XPathDocument(xmlOutput);
        XmlDocument xDoc = new XmlDocument();
        xDoc.Load(xmlOutput);
        StringWriter writer = new StringWriter();
        XslCompiledTransform transform = new XslCompiledTransform();
        transform.Load(reportDir + "MyXslFile.xsl");
        transform.Transform(xDoc, null, writer);
        xmlOutput.Position = 1;
        StreamReader sr = new StreamReader(xmlOutput);
        return sr.RearToEnd();
} 
```

在某个地方，我搞砸了创建**HTML 报告**，无法弄清楚如何将该文件发送到客户端。我没有太多使用内存流的经验。因此，任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:32:57.950

您在这里完全绕过了您的转换：

```
// This Function creates 
protected string ConvertToHtml(MemoryStream xmlOutput)
{
        XPathDocument document = new XPathDocument(xmlOutput);
        XmlDocument xDoc = new XmlDocument();
        xDoc.Load(xmlOutput);

        StringWriter writer = new StringWriter();
        XslCompiledTransform transform = new XslCompiledTransform();
        transform.Load(reportDir + "MyXslFile.xsl");
        transform.Transform(xDoc, null, writer);

        // These lines are the problem
        //xmlOutput.Position = 1;
        //StreamReader sr = new StreamReader(xmlOutput);
        //return sr.RearToEnd();

        return writer.ToString()
} 
```

此外，在编写器上调用 Close 之前调用 Flush 是多余的，因为 Close 意味着刷新操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:41:32.590

我不清楚你想要实现什么，但我认为同时使用 XmlDocument 和 XPathDocument 从同一个内存流加载没有意义。我会在从中加载之前将 MemoryStream 设置为位置 0，因此要么让函数创建并写入内存流，以确保它将位置设置为零，或者在调用 XmlDocument 上的 Load 或创建 XPathDocument 之前执行此操作，取决于您要使用的输入树模型。****

# c# - 限制异步请求而不阻塞

> ID：10655391
> 
> 赞同：1
> 
> 时间：2012-05-18T15:23:15.797
> 
> 标签：c#, multithreading, http, asynchronous

在使用多个 Web 服务时，我正在寻求一些关于限制 http 请求的建议/策略。我觉得如果请求是同步发生的，我可以这样做，但它们是异步的，我认为我应该尝试以一种我不会阻塞的方式执行限制逻辑。

由于 Web 应用程序使用多个 Web 服务，因此对于不同的请求会有不同的限制。我在想这样的事情，但不确定如何以无阻塞的方式进行：

请求方法：

```
public static Task<string> AsyncRequest(string url, enum webService)
{
    using(LimitingClass limiter = new LimitingClass(webService))
    {
       //Perform async request
    }
} 
```

在 LimitingClass 中，它将具有检查给定 Web 服务的最后一个请求的逻辑，如果它违反了限制，那么它将等待一定的时间。但与此同时，如果另一个请求进入不同的 Web 服务，那么我不希望在 LimitingClass 等待时阻止该请求。上述方法有什么根本错误吗？我应该为每个 LimitingClass 实例打开一个新线程吗？

如果可能的话，一些伪代码会很棒。

非常感谢

更新：

这是我当前请求方法的简化版本：

```
public static Task<string> MakeAsyncRequest(string url, string contentType)
{
    HttpWebRequest request = //set up my request

    Task<WebResponse> task = Task.Factory.FromAsync(
        request.BeginGetResponse,
        asyncResult => request.EndGetResponse(asyncResult),
        (object)null);

    return task.ContinueWith(t => ReadCallback(t.Result));
} 
```

我只想将它包装在一个使用中以检查限制并且不会阻止其他请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:33:19.923

那么，您如何在不阻塞的情况下限制对资源的访问呢？

我认为您需要查看[信号量](http://msdn.microsoft.com/en-us/library/system.threading.semaphoreslim.aspx)-它们允许限制可以同时访问资源或资源池的线程数。

# matlab - 在 Matlab 中可视化环形曲面

> ID：10655393
> 
> 赞同：6
> 
> 时间：2012-05-18T15:23:23.243
> 
> 标签：matlab, 3d, plot

我有一个双重问题：

1.  *给定大半径R*和小半径*a*，如何在 MATLAB 中绘制环形曲面？为避免混淆，我说的是[环形/极向坐标系](http://en.wikipedia.org/wiki/Toroidal_and_poloidal)，如下图所示。![环形坐​​标系](../Images/8c9710a4b1130ca2aa331e6f51362411.png)

2.  现在，在这个表面上的任何点*（phi，theta）*，小半径都会被我存储在矩阵中的某个值扭曲。如何绘制这个扭曲的表面？一旦我得到了第 1 部分的答案，这可能很容易，但这是我的实际目标，因此任何无法处理第 1 部分的解决方案对我来说都是毫无用处的。

[如果有人可以告诉我如何使图像在这里显得更小，请执行 =)]

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T16:09:36.023

解决您的第一个问题：首先您需要在环形坐标中定义圆环的坐标（看起来很自然！），然后转换为笛卡尔坐标，这是 MATLAB 期望构建所有图的方式（除非您正在制作极坐标图，当然）。所以我们首先定义我们的环形坐标：

```
aminor = 1.; % Torus minor radius
Rmajor = 3.; % Torus major radius

theta  = linspace(-pi, pi, 64)   ; % Poloidal angle
phi    = linspace(0., 2.*pi, 64) ; % Toroidal angle 
```

我们只想要一个圆环面，所以小半径是一个标量。我们现在制作这些坐标的二维网格：

```
[t, p] = meshgrid(phi, theta); 
```

并使用问题中链接到的维基百科页面上给出的公式转换为 3D 笛卡尔坐标：

```
x = (Rmajor + aminor.*cos(p)) .* cos(t);
y = (Rmajor + aminor.*cos(p)) .* sin(t);
z = aminor.*sin(p); 
```

现在我们在 3D 中定义了圆环，我们可以使用以下方法绘制它[`surf`](http://www.mathworks.co.uk/help/techdoc/ref/surf.html)：

```
surf(x, y, z)
axis equal 
```

![证明！](../Images/b6e6316a2f5dd0ba1143cb613f4e07cd.png)

**编辑**：要解决您的第二个问题，这取决于您如何存储失真，但假设您在每个环形和极向点定义了一个矩阵，您只需将小半径的常数乘以失真。在下面，我创建了一个失真矩阵，它与我的环形和极向角坐标矩阵的维度相同，并且正态分布在平均值为 1 和 FWHM 为 0.1 的附近：

```
distortion = 1\. + 0.1 * randn(64, 64);

x = (Rmajor + aminor .* distortion .*cos(p)) .* cos(t);
y = (Rmajor + aminor .* distortion .* cos(p)) .* sin(t);
z = aminor.* distortion .* sin(p);

surf(x, y, z) 
```

结果是：

![在此处输入图像描述](../Images/78aecb34ab0833b7522d014de5f9b152.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:07:34.587

您可以这样做`surf`- 只需使用 x、y、z 坐标创建矩阵。您链接到的页面具有执行此操作的三角方程（它们正是您自己想出的 - 我在检查您的链接之前编写了下面的代码）。

```
R = 10;
a = 3;
tx=nan(41,21);
ty=nan(41,21);
tz=nan(41,21);
for j=1:21
  for i=1:41
    phi = (i-1)*2*pi/40;
    theta = (j-1)*2*pi/20;
    tx(i,j)= cos(phi) * (R+cos(theta)*a);
    ty(i,j)= sin(phi) * (R+cos(theta)*a);
    tz(i,j)= sin(theta)*a;
  end
end
figure
surf(tx,ty,tz)
axis equal 
```

要扭曲表面，请将常数替换`a`为所需小半径值的矩阵，并索引到该矩阵 - 即`tz(i,j) = sin(theta)*distortion(i,j)`（但显然在所有维度上）。

# cakephp - 嵌套文件夹中的 CakePHP 路径错误

> ID：10655394
> 
> 赞同：-1
> 
> 时间：2012-05-18T15:23:23.503
> 
> 标签：cakephp, url-rewriting, routes

我安装了 cakePHP`localhost/domains/mydomain/`和 .htaccess 文件，`localhost/`其中包含以下内容：

```
RewriteEngine On
RewriteRule ^$ /domains/mydomain/app/webroot/ [L]
RewriteRule (.*) /domains/mydomain/app/webroot/$1 [L] 
```

所以我的网站可以通过`localhost/`地址访问。问题是我网站上的所有链接都指向`localhost/domains/mydomain/`. 有没有一种方法可以让 Cake 认为它在`localhost/`文件夹中，这样我就可以摆脱`domains/mydomain/`URL 中的丑陋了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:39:02.797

不幸的是，没有人能回答我的问题，所以我不得不使用一种解决方法。为了帮助其他几代人，我做了以下事情：

我将我的 webroot 文件夹移动到 webserver 的根文件夹：

```
webhost_root(localhost)
|- domains
|  |- mydomain
|     |- app
|     |- cake
|     |- plugins
|     |- vendors
|-webroot 
```

然后我不得不调整 webroot/index.php 以查看我的蛋糕应用程序的 domain/mydomain/app ：

```
if (!defined('ROOT')) {
    define('ROOT', (dirname(dirname(__FILE__))).'/domains/mydomain/');
}

if (!defined('APP_DIR')) {
    define('APP_DIR', 'app/');
} 
```

只剩下 webhost_root 中的 .htaccess：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain(.*)$
RewriteRule ^$ webroot/    [L]
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain(.*)$
RewriteRule (.*) webroot/$1    [L] 
```

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T20:30:42.970

One year later I have found the right solution. Simply put this into core or bootstrap file and you are done.

```
Configure::write('App', array('base' => '')); 
```

# java - 生成的 JAR 文件未执行

> ID：10655395
> 
> 赞同：0
> 
> 时间：2012-05-18T15:23:24.253
> 
> 标签：java, jar, text-files, executable-jar

我有一个 java 项目，它从 excel 表（由用户指定）读取数据，执行一些过滤并创建一些文本文件，然后将修改后的数据写入文本文件。

该项目运行良好，现在我想为它创建一个 jar 文件。我创建了 jar 文件，但它没有运行。就代码而言，它运行时没有任何错误。我已将 Netbeans 用于 GUI。我还看到了相关问题，说不可能从正在运行的 jar 创建文本文件。

有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T01:11:21.787

您需要在 jar 文件的清单中指定主类。

> 如果您将应用程序捆绑在 JAR 文件中，则需要某种方式来指示 JAR 文件中的哪个类是您的应用程序的入口点。您在清单中使用 Main-Class 标头提供此信息，该标头具有一般形式： Main-Class: classname

[http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html)

# java - 如何避免 MySQLSyntaxErrorException

> ID：10655397
> 
> 赞同：3
> 
> 时间：2012-05-18T15:23:25.887
> 
> 标签：java, mysql, exception

我正在使用 Java 将一些数据插入 mysql 。但是在数据中加入撇号（标点符号）（接近每周跟踪器表明工作增长）它给了我 MySQLSyntaxErrorException。请给我适当的解决方案来处理它

代码我有 isa

```
void insert(String a1,String a2, String a3) {
  String nt = a2;
  String pt = a3;
  String tb = a1; 
  query = "insert into "+tb+"(head,des) values('"+nt+"','"+pt+"')"; 
  try {
    stmt.executeUpdate(query);
    System.out.println("inserted"); //con.close();
  } catch (SQLException ex) {
    // Logger.getLogger(conec.class.getName()).log(Level.SEVERE, null, ex);
    ex.printStackTrace();
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T15:35:01.840

[使用查询参数](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)，而不是字符串连接。这将允许数据库驱动程序格式化您发送到数据库服务器的值，而不是自己重新发明这个轮子。

```
String sql = "insert into ... values (?, ?)";
PreparedStatement stmt = conn.prepareStatement(sql);
stmt.setString(1, nt);
stmt.setString(2, pt);
stmt.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:34:29.843

```
query = "insert into "+tb+"(head,des) values('"+nt+"','"+pt+"')"; 
```

应该

```
query = "insert into "+tb+" (head, des) values ('"+nt+"','"+pt+"')"; 
```

请进行这些更改，如果仍有问题，请告诉我....

# maven - 创建用于大型 Java 应用程序的 JRuby 库 jar

> ID：10655398
> 
> 赞同：3
> 
> 时间：2012-05-18T15:23:29.353
> 
> 标签：maven, build, jar, jruby

什么是创建 JRuby JAR 文件的最佳方法，该文件包含已编译的 JRuby 代码以用于更大的 Java 应用程序，尤其是与 Maven 一起使用。似乎 JRuby 的大多数用例都是在堆栈顶部构建应用程序并集成遗留 Java 代码。因此，大多数文档和资源都围绕构建 WAR 文件和独立 JAR。两者都`warbler`构建`rawr`独立的 JAR。

我们必须采取稍微不同的方法将 JRuby 放在堆栈的中间，所以我想构建可重用的 JAR，可以上传到内部 Maven 存储库，并将它们用作依赖项，就像我处理任何 Java 代码一样。关于如何做到这一点的文档不多，我只提出了：

*   编写一个 Rake 任务来`jrubyc`编译 JRuby 文件并将它们填充到 JAR 文件中
*   尝试类似`buildr`或`gradle`做包装

有没有人这样做过？关于我应该采取哪种方法或更好的方法有什么建议吗？谢谢你。

# java - Vaadin - 动态生成表

> ID：10655401
> 
> 赞同：1
> 
> 时间：2012-05-18T15:23:35.627
> 
> 标签：java, user-interface, vaadin

我有一个 Vaadin 应用程序。它的一个组件是一张桌子。我需要一种可能性，可以根据用户的需要向该表添加任意数量的列（好吧，假设目前最多 20 个）。一开始有5列，所以实际上用户可以添加第6-20列。但是，在执行“layout.addComponent(...)”之后，这个表就不能再编辑了。

我尝试了两件事：

1.  有一个变量存储当前的行数，每次单击“添加”按钮都会增加 1。每次单击都会向表格中添加 1 列。

2.  另一个想法是将列号保存在变量中（如想法 1）和集合中某处的单元格的值（无论如何）。单击“添加”按钮后，整个表格被删除，然后所有列都被添加（所有已经存在的列 + 一个新列）并添加到布局中。

然而，这些想法都不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:36:18.423

如果 MyContainer 扩展了 IndexedContainer，你就拥有完全的自由；作为一个示例，我有统计信息，它只是在 ZooKeeper 中序列化的（动态）Map，并且 MyContainer 监听 ZooKeeper 的更改：

```
public class MyContainer extends IndexedContainer {
    ...
    public void process(final ModelChangeEvent event) {
        ...
        for (Map.Entry<String, Long> entry : newTask.getCounters().entrySet()) {
            addContainerProperty(entry.getKey(), Long.class, 0L);
            Property property = getContainerProperty(taskName, entry.getKey());
            property.setValue(entry.getValue());
        }
        fireContainerPropertySetChange();
        ...
    } 
```

当我们向 Map 添加新的 (key, value) 对时，我们会自动获取新的列，其中“key”是列标题，“value”是单元格值。不用叫“火”；它将由 IndexedContainer 实现自动调用（检查源）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T22:54:06.767

我认为调用`addContainerProperty`与`Container`您的`Table`. 这样做应该`PropertySetChangeEvent`会触发表。

当然，除非您使用`Table.setVisibleColumns`.

如果这对您没有帮助，一段代码可以帮助解决问题。

# c# - 来自普通 SQL 的 Oracle sys_refcursor

> ID：10655403
> 
> 赞同：3
> 
> 时间：2012-05-18T15:23:44.867
> 
> 标签：c#, .net, oracle, plsql, sys-refcursor

我有一个（简化的）Oracle SQL，如下所示：

```
declare
  xd number;
  xm number;
  DataOut sys_refcursor;
begin
  xd := to_number(to_char(sysdate, 'dd'));
  xm := to_number(to_char(sysdate, 'mm'));

  open DataOut for
  select * from dual;  
end; 
```

我希望能够从 DataOut 参数中返回的数据中填充 .Net 中的 DataTable。

我一直在尝试各种事情，但似乎无法访问 DataOut 游标。我怎么称呼这个？

```
OracleCommand c = new OracleCommand();
c.CommandType = CommandType.Text;
c.CommandText = SQL;

OracleParameter param = new OracleParameter();
param.Direction = ParameterDirection.Output;
param.OracleType = OracleType.Cursor;
param.ParameterName = "DataOut";
c.Parameters.Add(param);

c.Connection = (OracleConnection) this.GetConnection();

OracleString rowNum = "";
c.ExecuteOracleNonQuery(out rowNum);
// or c.ExecuteReader()
// or use OracleDataAdapter

DataTable returnTable = /* magic goes here */ 
```

我可以编辑 SQL，但无法创建函数或过程。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T21:32:02.993

匿名 PL/SQL 块不返回任何内容，因此您将无法使用在客户端应用程序的匿名 PL/SQL 块中打开的游标。为了将数据返回给客户端应用程序，您需要使用命名的 PL/SQL 块（即存储过程或存储函数）。如果您不允许创建命名的 PL/SQL 块，您将无法将您在 PL/SQL 中打开的游标返回给您的客户端应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:30:58.050

```
select cursor(select * from dual) from dual; 
```

# vba - 如何在我的 VBA 项目名称中添加空格？

> ID：10655406
> 
> 赞同：1
> 
> 时间：2012-05-18T15:23:51.543
> 
> 标签：vba, excel-addins

我有一个用 VBA 编写的 Excel 插件，我们称之为`MyAddin.xlam`.
我已将项目名称设置为`MyAddin`.

当我打开第二个项目并选择`Tools->References...`时，MyAddIn 显示得很好。一切正常。那太棒了。

但是.. 出于纯粹的审美原因，我希望列表显示`My Addin`在参考列表中。潜在参考列表中几乎所有可用的内容在名称中都有空格。
但是如果我尝试重命名我的项目以在名称中包含一个空格，VBA 不允许我这样做。

所以，这个问题听起来很愚蠢，有什么办法可以在“参考”列表中的 VBA 加载项的显示名称中添加空格？

我非常愿意接受“这在 VBA 中是不可能的；如果您使用另一种语言构建加载项，您只能在参考名称中添加空格”的答案，但我想知道我是否遗漏了一些简单的东西.

谢谢！

**编辑，附录：**本质上，我的问题是：有没有办法让“显示名称”与项目名称不同，它不关心文件命名/对象命名限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:07:26.040

是的，你是对的。VBA 不允许您在“属性”窗口的“项目名称”中插入空格。

如果你尝试，它会给你一个错误（见快照）

![在此处输入图像描述](../Images/99c06e927ed93e3aa4e27e8eb0006fdf.png)

VB.net 也没有运气。我添加了空格并将其转换为 Excel 中的下划线。让我进行更多测试并回复您...

**快照**

![在此处输入图像描述](../Images/a311c049ba6bbbb0a309eb0555270b8a.png)

**跟进**

呸终于！是的，在 VB.Net 中是可能的。如果您想了解更多详情，请告诉我？

![在此处输入图像描述](../Images/1047d937e6c4aa2011a0f27d1f913fc0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-18T03:43:19.670

You can vary the display name as it appears in the Add-ins window by editing the `Title` Built-in Document Property, but that doesn't help you with the name in the References window

The VBE won't let you use illegal characters in a project name of module name, but that doesn't mean it can't be done.

For example, the Analysis Toolpak - VBA add-in `ATPVBAEN.XLAM` has a project name of `atpvbaen.xls` which includes the *supposedly* illegal character `.`

Likewise, the same project has a module called `VBA Functions and Subs` which includes the illegal (space) character.

But the public procedures in Analysis Toolpak are still callable by using square brackets.

```
Sub test()

  'Run the auto_open macro in Analysis Toolpak
  [atpvbaen.xls].[VBA Functions and Subs].auto_open

End Sub 
```

So Microsoft knows how to use illegal characters in project and module names, which is presumably done in the binary or with a special build of VBE.

**EDIT**

I just edited the binary of a VBA project and was able to put spaces in the VBA project name!

Interestingly, you can't export and then reimport the modules from Analysis Toolpak, as VBE still enforces the naming rules on import. Good luck getting that to work with Source Control.

**EDIT: 3 FEB 2017** From the VBA file format spec: [MS-OVBA]

> [module name] **SHOULD** be an identifier... **MAY** be any string of characters... **MUST** be less than or equal to 31 characters long.
> 
> [project name] **SHOULD** be an identifier... **MAY** be any string of characters... **MUST** be less than or equal to 128 characters long.

So it seems the VBE is imposing the *SHOULD* rule, but VBA is actually more permissive, if you are able to edit the project binary.

# php - 在 PHP 正则表达式中使用 ^ 和 $ 出现意外结果？

> ID：10655412
> 
> 赞同：2
> 
> 时间：2012-05-18T15:24:02.883
> 
> 标签：php, regex, preg-match

> **可能重复：**
> [正则表达式中的 ^ 和 $ 是什么意思？](https://stackoverflow.com/questions/6908725/what-do-and-mean-in-a-regular-expression)

我一点也不擅长正则表达式，我知道它们非常重要，但一直没有时间研究它们。无论如何，我只是想确保在这些字符串中：

```
MAX_AGE_60
MAX_AGE_80
...
MAX_AGE_X 
```

其中更一般`X`的是 a `integer`，**至少找到一个匹配项**并获取该数字`X`。因此，按照 PHP 文档中的示例，我写了这个：

```
// Starts and ends with the literal 'MAX_AGE_' followed by a group that is a 
// number with at least one digit. Case insensitive
$pattern = '/^MAX_AGE_(?P<max>\d+)$/i';

$test    = 'MAX_AGE_80';
$matches = array();

preg_match($pattern, $test, $matches);
var_dump($matches); 
```

结果是错误的（惊喜......）：

```
array (size=0)
  empty 
```

删除开始/结束分隔符（`^`和`$`）我得到正确的结果：

```
array (size=3)
  0     => string 'MAX_AGE_80' (length=10)
  'max' => string '80' (length=2)
  1     => string '80' (length=2) 
```

那么为什么我不能强制字符串必须以该模式开始和结束呢？以及应该如何解释结果数组？我的意思是索引`0`和？`1``max`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:35:16.443

我不确定你在括号之间做什么。试试这个：

```
$pattern = '/^MAX_AGE_[\p{N}]+$/iu'; 
```

^$ 和 not 之间的区别在于，它们仅标记 LINE 开头和/或结尾的匹配项

您可以使用此站点来测试您的表达式（非 unicode）： [http ://www.gskinner.com/RegExr/](http://www.gskinner.com/RegExr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:52:28.430

尝试使用

```
$pattern = '/^MAX_AGE_(?P<max>\d+)\s*$/i'; 
```

因为在行结束之前可能有空格。

# javascript - PhoneGap Device Ready 在设备未就绪时触发

> ID：10655417
> 
> 赞同：1
> 
> 时间：2012-05-18T15:24:23.597
> 
> 标签：javascript, cordova

我从 PhoneGap 看到了一些奇怪的行为。OnDeviceReady 会触发，但是当我使用“设备”变量时，它仍然是未定义的。我找到了一些与此相关的代码，并说使用 setTimeout 等待一秒钟（再次，在它说准备好之后）以实际使用变量（如下）：

```
setTimeout(function () {
    MobileDevice = new MobiDevice(device);
}, 1000); 
```

最初这似乎可行，但现在看来时间不确定。我最近不得不将超时设置为 5000。这是我们当前的代码：

```
setTimeout(function () {
    console.log("starting setup");
    try {
            MobileDevice = new MobiDevice(device);

        console.log("created MobiDevice from a real device");
    }
    catch (error) {
        console.log("no device reference - mocking device");
        var d = {
            platform: "Android",
            version: 5
        };

        MobileDevice = new MobiDevice(d);
    }

    console.log("device setup complete");
}, 5000); 
```

如果确实是时间不确定的情况，那么其他人使用了哪些策略来解决这个问题。如果它不应该是不确定的，我可以在哪里寻找修复。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:30:04.270

我建议你使用轮询。

```
setTimeout(function () {
    if(device !== undefined)
        MobileDevice = new MobiDevice(device);
    else
        setTimeout( arguments.callee, 1000 );
}, 1000); 
```

如果您愿意，您可以调整超时限制（此处为 1000 毫秒），使其在每次通话后减少……您明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T19:33:50.903

所以，这里的答案是两方面的。一，PhoneGap 就是这样，即使在 PhoneGap 认为设备已准备好之后，您也必须等待设备变量被初始化。我使用了 setInterval 并等到可以使用“设备”后再将其传递给我的包装器。

另一部分是网络。在我们的测试期间，我们希望能够模拟设备并放弃设备初始化，因为它不会发生。

```
if (navigator.platform.match(/(mac|win)/i)) {
        console.log("on a browser, mocking the device");
        // we are on the browser
        // you can manually set properties here to test for different devices
        var d = {
            platform: "Android",
            version: 5
        };

        MobileDevice = new MobiDevice(d);
    }
    else { 
```

目前，我们只关心 iPhone 和 Android，因此如果我们只关心 navigator.platform，我们就可以知道浏览器运行在什么平台上。这在 Windows、iPhone、Android 和 Mac 之间会有所不同。足够不同，我们可以区分。如果我们决定支持 WP，那么很可能必须改变这一点

# c# - 如何删除xml“&”符号

> ID：10655421
> 
> 赞同：1
> 
> 时间：2012-05-18T15:24:39.950
> 
> 标签：c#, xml, escaping, xml-parsing

我正在将 xml 文件解析到数据集。如果 xml 数据包含“&”或一些特殊字符，我会收到错误如何删除它？

如何从下面的标签中删除“&”？

xml

```
 < department departmentid=1 name="pen & Note" > 
```

$

```

 `string departmentpath = HostingEnvironment.MapPath("~/App_Data/Department.xml");
    DataSet departmentDS = new DataSet();

    System.IO.FileStream dpReadXml = new System.IO.FileStream(departmentpath, System.IO.FileMode.Open);

    try
    {
        departmentDS.ReadXml(dpReadXml);

    }
    catch (Exception ex)
    {
        //logg
    }` 

            回答 #1

赞同：2

时间：2012-05-18T15:25:46.910

您可以将其替换为`&amp;`

            回答 #2

赞同：2

时间：2012-05-18T17:13:52.240

XML 的文化是创建 XML 的人负责交付符合规范的格式良好的 XML；如果收件人弄错了，他们应该拒绝它。因此，通过尝试修复不良 XML 并将其转变为良好的 XML，您将违反规定。这就像在餐馆里吃到劣质食物：你应该抱怨，而不是问邻桌的人如何让它变得容易消化。

您提供的输入比与号有更多的错误。它根本无法识别为 XML。您永远不会将这种混乱变成强大的数据流。

            回答 #3

赞同：1

时间：2012-05-18T15:34:42.420

代码似乎是 C#。但是请添加正确的语言标签！

在 XML 文档中通常需要转义五个特殊字符。你可以阅读[这个](https://stackoverflow.com/questions/1091945/where-can-i-get-a-list-of-the-xml-document-escape-characters)SO question。

有两种可能：

*   让您的`DataSet::ReadXML`方法处理这些特殊字符*[推荐]*
*   更改输入文件中的所有特殊字符  *[不推荐]*

不推荐使用第二种方法，因为您不可能总是控制传入的数据（如果您愿意，您可能会浪费时间对它们进行预处理）。为了`ReadXML`正确解析特殊字符，您还需要在输入 XML 中定义正确的编码。

```

# php - 创建 HTML（PHP 或 Jquery）的最佳实践？

> ID：10655424
> 
> 赞同：2
> 
> 时间：2012-05-18T15:24:46.420
> 
> 标签：php, jquery, html, ajax

我有一个 JavaScript 对象，其中包含一些信息。

我有 2 个可以想到的选项来从这个对象创建 HTML。我想知道哪一种是正确的做事方式，这只是所有偏好吗？

1) 用 Ja​​vaScript 循环遍历这个数组并用 Jquery 创建 HTML？

2）Ajax 将对象发布/获取到 PHP 并循环通过该对象（php 数组）并以这种方式创建 HMTL？然后返回一个带有 HMTL 的 json 编码对象并将其附加到 div？

**我目前所做的构建**

```
 var OutterDiv = $(document.createElement('div'));

    for loop{
        OutterDiv.append("<span>SOME INFO</span>");

        var InnerDiv = $(document.createElement('div'));
        for loop{
            InnerDiv.append("<span>SOME INFO</span>");
            InnerDiv.append("<span>SOME INFO</span>");
        }

        OutterDiv.append(InnerDiv);
    }

    $("#content").append(OutterDiv); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:28:34.827

为什么不遍历对象并从 JavaScript 创建一个 HTML 字符串？然后在需要的地方插入该字符串？我相信这是您完成您想做的事情的最快方式。主要思想是连接字符串比插入 DOM 元素更快，并且可能比 Http 请求引起的延迟更快。

****编辑****

显然，IE 在字符串连接方面速度较慢（大吃一惊），使用[数组更好](https://stackoverflow.com/questions/3667469/javascript-jquery-best-way-to-insert-a-big-piece-of-code-into-dom)。例子 ：

```
var html = [];
for (...) {
   html.push( <some html content from your object here> );
}
$(selector).html(html.join(''));

// find the elements you need to handle and perform bindings here
// ex: $('#someelment').click(...); 
```

这可能是你能得到的最快的。

****更新****

虽然使用 JavaScript 执行构建 HTML 的任务通常仍然更快，但经过一些测试，似乎连接字符串或构建数组并不比创建文本节点快。该测试可以在[jsfiddle.net](http://jsfiddle.net/FTj7Q/4/)上查看和分叉，或者在这里用于存档目的：

```
function runTest(testFn, duration) {

    var endTime = +new Date() + duration;
    var runs = 0;
    var charCount = 0;

    while (+new Date() < endTime) {
        charCount += testFn();
        ++runs;
    }        
    teardown();

    //console.log(testFn.title, 'ran', runs, 'times.');
    $('#log').append($('<div></div>').text(testFn.title + ' ran ' + runs + ' times (' + (charCount/1000) + ' cps).'));
}

///

function teardown() {
    while (targetDiv.firstChild) {
        targetDiv.removeChild(targetDiv.firstChild);
    }
}

///

var testData;
var sample, sampleData;
function generateTestData() {
    testData = {};
    for (var i=0; i < (Math.random() * (sample[1]-sample[0])) + sample[0]; i++) {
        testData['item'+i] = randomString();
    }
}

function randomString()
{
    var text = "";
    var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz 0123456789";

    for( var i=0; i < (Math.random() * (sampleData[1]-sampleData[0])) + sampleData[0]; i++ )
        text += possible.charAt(Math.floor(Math.random() * possible.length));

    return text;
}

function shuffle(arr) {
    var len = arr.length;
    var i = len;
    while (i--) {
        var p = parseInt(Math.random()*len);
        var t = arr[i];
        arr[i] = arr[p];
        arr[p] = t;
    }
    return arr;
};

///

var $targetDiv = $('#targetDiv');
var targetDiv = document.getElementById('targetDiv');

///

function jq() {

    var html = [];
    var count = 0;

    for (var key in testData) {
        count += testData[key].length;
        html.push('<div>' + testData[key] + '</div>');
    }

    $targetDiv.html(html.join(''));

    return count;
}

function inner() {

    var html = [];
    var count = 0;

    for (var key in testData) {
        count += testData[key].length;
        html.push('<div>' + testData[key] + '</div>');
    }

    targetDiv.innerHTML = html.join('');

    return count;
}

function dom() {

    var root = document.createElement('div');
    var node;
    var count = 0;

    for (var key in testData) {
        count += testData[key].length;
        node = document.createElement('div');
        node.appendChild(document.createTextNode(testData[key]));
        root.appendChild(node);
    }
    targetDiv.appendChild(root);

    return count;            
}

///

jq.title = 'jQuery .html';
inner.title = 'innerHTML';
dom.title = 'DOM';

///

sample = [10, 100];
sampleData = [100, 1000];
generateTestData();

var duration = 1000;
var testFn = shuffle([jq, inner, dom]);

$.each(testFn, function(k, fn) {
    setTimeout(function() { runTest(fn, duration); }, 0);
});
​ 
```

总的来说，虽然每种方法在某些情况下（大量*或*少量数据、长字符串*或*短字符串等）都更有效，但 DOM 方法似乎在所有情况下都更快。

所以你有它。感谢[GGG](https://stackoverflow.com/users/886931/ggg)提供的初始测试用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:29:47.620

用javascript做。如果您已经拥有 javascript 中的数据，那么额外前往服务器让 PHP 执行此操作（让 javascript 代理该连接）是一种浪费。如果这是一个密集的计算，由于速度的原因让 PHP 来做它可能是有意义的，但否则，似乎是一种浪费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:28:11.470

您可以使用 JSON.stringify(array) 在 JavaScript 中对数组进行编码，然后使用 $array=json_decode($_POST['jsondata']); 在您的 PHP 脚本中检索它。

# algorithm - 如何在欧几里德算法中找到 s 和 t

> ID：10655427
> 
> 赞同：0
> 
> 时间：2012-05-18T15:24:59.163
> 
> 标签：algorithm, visual-c++, c++-cli

Euclid 算法的扩展

我们已经知道，对于任意两个整数 a 和 b，存在整数 s 和 t，使得 + bt = gcd(a,b)。换句话说，gcd(a,b) 是 a 和 b 的线性组合。gcd(a,b) 是两个整数的最小正数组合。a 和 b 本身表示为平凡的组合：a = 1·+ 0·b 和 b = 0·a + 1·b。从这两个开始，欧几里得算法的一个扩展发现了 s 和 t，它们的存在迄今为止只是以一种形式化的方式确定的。

将两个线性组合写在一列中，并将欧几里得算法的一个步骤应用于左侧。假设 a = bp + r。将第二个方程乘以 p 并从第一个方程中减去： a = 1·a + 0·b b = 0·a + 1·b r = 1·a + (-p)·b

对最后两个方程应用相同的过程。以这种方式继续，直到左边的欧几里得算法停止。在右边，会有我们所追求的线性组合。让我们用一个例子来检查一下：让 a = 2322, b = 654。我采用求解线性方程的通常惯例，并省略了线性组合中的所有项，但左侧​​和右侧的两个系数除外。结果被放入一个表格中，第四列等于 p（来自 a = bp + r，每一步都会改变。将 p 左侧的三个数字乘以 p，然后从它们正上方的数字中减去它们。记录下一行的结果。

```
int algoritmoeuclides(int a,int b)
if (a%b==0)
return b;
return algoritmoeuclides(b,a%b);
}

int main(array<System::String ^> ^args)
{
int a=525;
int b=231;
printf("%d",algoritmoeuclides(a,b));
getch();
} 
```

到目前为止，这是我的代码，它完美无缺。问题是当我试图找到 s 和 t 时。我不知道如何找到它，我在论坛上搜索过，但我知道编程这个算法以找到 S 和 T 的最佳方法是什么。我已经把所有的解释都给了你们一个想法。PD：对不起我的英语我不是说英语的。任何想法都会受到赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T15:33:23.370

干得好

[http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm](http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:34:39.657

[http://en.literateprograms.org/Extended_Euclidean_algorithm_%28C_Plus_Plus%29](http://en.literateprograms.org/Extended_Euclidean_algorithm_%28C_Plus_Plus%29)

# c# - 如何防止使用 Moq 调用基类构造函数？

> ID：10655431
> 
> 赞同：5
> 
> 时间：2012-05-18T15:25:04.413
> 
> 标签：c#, unit-testing, moq

如何防止使用 Moq 调用基类构造函数？

我无法使用 Moq 模拟对象，因为正在调用基类构造函数并且它需要真实对象，因此我想停止调用基类构造函数。

```
var parametersMoq = new Mock<MyDerivedClass>(null, "Params", null){ CallBase = false, };
_storedProcedureAccessor._parameters = parametersMoq.Object; 
```

MyDerivedClass 的基类构造函数引起了我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T17:27:05.460

没有办法阻止基类构造函数被调用。

如果你可以编辑基类，你应该用抽象（例如接口、抽象类或委托）替换固定的依赖关系。

如果你不能编辑基类，并且你真的需要能够用测试友好的假货替换依赖项来编写你的单元测试，你需要做更多的工作（例如，将有问题的基类包装在一个抽象中，然后使用组合而不是继承，并依赖于新的抽象）。

# vb.net - 使用 FindControl 在 Gridview EditItemTemplate 中查找 DropDownList

> ID：10655432
> 
> 赞同：1
> 
> 时间：2012-05-18T15:25:05.020
> 
> 标签：vb.net, gridview, itemtemplate

当我尝试将项目添加到 DropDownList 的新实例时，我在 editPriorityDropDown 上收到“对象引用未设置为对象实例”。我最好的猜测是 FindControl 找不到 DropDownList。我想我已经以某种方式逃脱了 FindControl 的范围，但我对另一个 DropDown 做了完全相同的事情，但是在 Page_Load 中，它工作正常。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then

    End If

    Dim PriorityDropDown As DropDownList = TryCast(gvProduct.HeaderRow.FindControl("ddlOrderPriorityHeader"), DropDownList)

    Dim index As Integer = 1
    While index <= gvProduct.Rows.Count
        Dim newItem As New ListItem
        newItem.Value = index
        newItem.Text = index.ToString

        PriorityDropDown.Items.Add(newItem)

        index = index + 1
    End While

    '' check login seesion
    'Functions.authentication_check()

End Sub 
```

但是当我稍后在不同的子程序中尝试做同样的事情时，它会出错。

```
Protected Sub PopulateOrderPriority()
    If ViewState("SelectedRowIndex") > -1 Then
        'Response.Write(" Index: " & ViewState("SelectedRowIndex"))
        Dim editPriorityDropDown As DropDownList = TryCast(Me.gvProduct.Rows(ViewState("SelectedRowIndex")).FindControl("ddlOrderPriorityEdit"), DropDownList)

        Dim index As Integer = 1
        While index <= gvProduct.Rows.Count
            Dim newItem As New ListItem
            newItem.Value = index
            newItem.Text = index.ToString

            editPriorityDropDown.Items.Add(index)

            index = index + 1
        End While
    End If
End Sub 
```

这只是相关标记的一部分。

```
<asp:GridView ID="gvProduct" runat="server" AutoGenerateColumns="False" DataKeyNames="Product_ID"
    DataSourceID="sdsProduct" Caption="Products" CaptionAlign="Left" EnableModelValidation="True">
    <Columns>
        <asp:TemplateField ShowHeader="False">
            <EditItemTemplate>
                <asp:LinkButton ID="lnkbtnUpdate" runat="server" CausesValidation="True" CommandName="UpdateProd"
                    Text="Update" ValidationGroup="vgUpdateProduct"></asp:LinkButton>
                &#160;<asp:LinkButton ID="lnkbtnCancel" runat="server" CausesValidation="False" CommandName="Cancel"
                    Text="Cancel"></asp:LinkButton>
            </EditItemTemplate>
            <HeaderTemplate>
                <asp:Button ID="lnkbtnInsertHeader" runat="server" CommandName="InsertHeader" Text="Insert"
                    ValidationGroup="vgHeaderProduct" />
            </HeaderTemplate>
            <ItemTemplate>
                <asp:LinkButton ID="lnkbtnEdit" runat="server" CausesValidation="False" CommandName="Edit"
                    Text="Edit"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Order Priority" SortExpression="Order_Priority">
            <EditItemTemplate>
                <asp:DropDownList ID="ddlOrderPriorityEdit" runat="server">
                </asp:DropDownList>
                <%--<asp:DropDownList ID="ddlOrderPriorityEdit" runat="server" SelectedValue='<%# Bind("Product_Priority") %>'
                    DataSourceID="sdsProductActive" DataTextField="Product_Priority"
                    DataValueField="Product_ID">
                </asp:DropDownList>--%>
            </EditItemTemplate>
            <HeaderTemplate>
                Order Priority<br />
                <asp:DropDownList ID="ddlOrderPriorityHeader" runat="server">
                </asp:DropDownList>
            </HeaderTemplate>
            <ItemTemplate>
                <asp:DropDownList ID="ddlOrderPriorityRead" runat="server" Enabled="false">
                </asp:DropDownList>
                <%--<asp:DropDownList ID="ddlOrderPriorityRead" runat="server" Enabled="false" SelectedValue='<%# Bind("Product_Type") %>'
                    DataSourceID="sdsProductActive" DataTextField="Product_Priority"
                    DataValueField="Product_ID">
                </asp:DropDownList>--%>
            </ItemTemplate>
        </asp:TemplateField> 
```

让我知道我在这里做错了什么，并提前感谢您的回答！

# python - 按金融机构拆分我的清单

> ID：10655435
> 
> 赞同：0
> 
> 时间：2012-05-18T15:25:46.340
> 
> 标签：python, django, django-templates, django-views

我需要一些帮助来解决我的问题。我已经创建了我所有投资的清单，但现在我需要按金融机构将它们分开。我正在尝试打印一份报告，该报告将在单独的页面上包含每个金融机构的所有投资，但我无法将它们分开。

例如我想要的是：

TD Bank - 来自我的查询的 TD 的所有投资

*   下一页 -

Scotia Bank - 我的查询中对 Scotia 的所有投资

ETC

以下是我的views.py，其中包含查询并将所有信息添加到我的列表中。

谁能帮我找到一种方法来拆分它，以便我可以让它们被金融机构分开？

```
def confirmations_report(request, *args, **kwargs):
from investments.models import Investment, InvestmentManager
from reports.forms import ConfirmationsForm
import ho.pisa as pisa
import cStringIO as StringIO
import os.path
confirm_letter_list = []
context = {}

if request.POST:
    form = ConfirmationsForm(request.POST)
    if form.is_valid():
        start_date = form.cleaned_data['start_date']
        end_date = form.cleaned_data['end_date']
        investments = Investment.objects.all().filter(contract_no = "",maturity_date__range=(start_date, end_date)).order_by('financial_institution')
        for i in investments:
            confirm_letter_list.append({
                'fi':i.financial_institution,
                'fi_address1': i.financial_institution.address1,
                'fi_address2': i.financial_institution.address2,
                'fi_city': i.financial_institution.city,
                'fi_prov': i.financial_institution.state_prov,
                'fi_country': i.financial_institution.country,
                'fi_postal': i.financial_institution.postal,
                'primary_owner': i.plan.get_primary_owner().member,
                'sin': i.plan.get_primary_owner().member.client.sin,
                'type': i.product.code,
                'purchase_amount': i.amount,
                'purchase_date': i.start_date,
            })
            context['confirmlist'] = confirm_letter_list
        context['inv'] = investments
    if request.POST.has_key('print_report_submit'):
        context['show_report'] = True
        context['mb_logo'] = os.path.join(os.path.dirname(__file__), "../../../media/images/mb_logo.jpg")
        html = render_to_string('reports/admin/confirm_report_print.html', RequestContext(request,context))
        result = StringIO.StringIO()
        pdf = pisa.pisaDocument(StringIO.StringIO(html.encode("ISO-8859-1")), result)
        response = HttpResponse(result.getvalue(), mimetype='application/pdf')
        response['Content-Disposition'] = 'attachment; filename=unreceived-confirmations.pdf'
        return response

else:
    form = ConfirmationsForm()

context['form'] = form
return render_to_response('reports/admin/confirm_report.html', RequestContext(request, context)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:35:34.680

将 a[`defaultdict`](http://docs.python.org/release/2.5.2/lib/defaultdict-examples.html)与列表一起使用。

```
from collections import defaultdict
my_list = defaultdict(list)
for i in investments:
   my_list[i.financial_institution].append({ ... }) 
```

以下是您将如何使用它：

```
{% for i in my_list.iteritems %}
   Institution : {{ i.0 }}
   {% for z in i|slice:"1:" %}
     Total Items for {{ i.0 }} : {{ z|length }}
     {% for d in z }}
        {{ d.fi_address1 }}
        ....
     {% endfor %}
   {% endfor %}
{% endfor %} 
```

这是一个简化的示例：

```
>>> from collections import defaultdict
>>> d = defaultdict(list)
>>> d['hello'].append({1:'One', 2:'Two'})
>>> for i in d.iteritems():
...    print i[0]
...    for z in i[1:]:
...     print z
... 
hello
[{1: 'One', 2: 'Two'}] 
```

如您所见，内部循环包含您添加的字典列表，因此您需要相应地调整循环逻辑。

# java - 如何在struts2中显示选择标签的值

> ID：10655437
> 
> 赞同：1
> 
> 时间：2012-05-18T15:25:48.763
> 
> 标签：java, struts2

如何在struts2中向select标签显示值，我使用值列表作为Map

我的代码

第一种：

动作课，

```
private Map<Integer, String> mapForSelect;

    mapForSelect.put(1, "map 1");
    mapForSelect.put(2, "map 2");
    mapForSelect.put(3, "map 3");
    mapForSelect.put(4, "map 4");
    mapForSelect.put(5, "map 5");
    mapForSelect.put(6, "map 6");
      ..........
         .........

settres and getters for "mapForSelect" 
```

jsp页面，

```
<s:select label="Map Demo" list="mapForSelect" value= "3" /> 
```

它将选择默认值显示为“map 3”

第二种：

```
private Map<String, String> mapForSelect;

    mapForSelect.put("one", "map 1");
    mapForSelect.put("second", "map 2");
    mapForSelect.put("three", "map 3");
    mapForSelect.put("four", "map 4");
    mapForSelect.put("five", "map 5");
    mapForSelect.put("six", "map 6");
      ..........
         .........

settres and getters for "mapForSelect" 
```

jsp页面，

```
<s:select label="Map Demo" list="mapForSelect" value= "three" /> 
```

这次选择不显示任何默认值，我想以这种方式显示默认值。

请为此提供解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:34:04.893

改为使用`value="'three'"`，因此该值将是一个字符串。

# r - 重命名R中的一个命名列

> ID：10655438
> 
> 赞同：17
> 
> 时间：2012-05-18T15:25:52.533
> 
> 标签：r, dataframe

我想更新数据框的一列，使用其原始名称引用它，这可能吗？例如说我有表“数据”

```
a b c  
1 2 2  
3 2 3  
4 1 2 
```

我想将 b 列的名称更新为“d”。我知道我可以使用

```
colnames(data)[2] <- 'd' 
```

但是我可以通过专门引用 b 来进行更改吗，例如

```
colnames(data)['b'] <- 'd' 
```

因此，如果数据框的列顺序发生更改，正确的列名仍将更新。

提前致谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-18T16:02:52.817

`setnames`包中内置了一个功能[`data.table`](http://datatable.r-forge.r-project.org/)。

```
setnames(DT, "b", "d") 
```

它通过引用更改名称，根本没有副本。`names(data)<-`使用或类似的任何其他方法`names(data)[i]<-`将复制*整个*对象，通常是多次。即使您所做的只是更改列名。

`DT`但是，必须是类型`data.table`才能`setnames`工作。因此，您需要`data.table`使用 , 切换或转换`as.data.table`才能使用它。

以下是 的摘录`?setnames`。其目的是您`example(setnames)`在提示符下运行，然后评论与您看到的由 报告的副本相关`tracemem`。

```
DF = data.frame(a=1:2,b=3:4)       # base data.frame to demo copies
tracemem(DF)
colnames(DF)[1] <- "A"             # 4 copies of entire object
names(DF)[1] <- "A"                # 3 copies of entire object
names(DF) <- c("A", "b")           # 2 copies of entire object
`names<-`(DF,c("A","b"))           # 1 copy of entire object
x=`names<-`(DF,c("A","b"))         # still 1 copy (so not print method)

# What if DF is large, say 10GB in RAM. Copy 10GB just to change a column name?

DT = data.table(a=1:2,b=3:4,c=5:6)
tracemem(DT)
setnames(DT,"b","B")               # by name; no match() needed. No copy.
setnames(DT,3,"C")                 # by position. No copy.
setnames(DT,2:3,c("D","E"))        # multiple. No copy.
setnames(DT,c("a","E"),c("A","F")) # multiple by name. No copy.
setnames(DT,c("X","Y","Z"))        # replace all. No copy. 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-01-19T14:20:25.937

截至 2014 年 10 月，这现在可以在[dplyr](http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html)包中轻松完成：

```
rename(data, d = b) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-18T15:36:02.433

这似乎是一种 hack，但首先想到的是使用`grepl()`足够详细的搜索字符串来仅获取您想要的列。我确信有更好的选择：

```
dat <- data.frame(a = 1:3, b = 1:3, c = 1:3)
colnames(dat)[grepl("b", colnames(dat))] <- "foo"
dat
#------
  a foo c
1 1   1 1
2 2   2 2
3 3   3 3 
```

正如 Joran 在下面指出的那样，我把事情复杂化了……根本不需要正则表达式。这也节省了打字时的几个字符。

```
colnames(dat)[colnames(dat) == "foo"] <- "bar"
#------
  a bar c
1 1   1 1
2 2   2 2
3 3   3 3 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T15:34:28.893

是的，但它比数字索引更困难（据我所知）。我将提供一个脏函数来执行此操作，如果您想了解如何执行此操作，只需逐行撕开该函数：

```
rename <- function(df, column, new){
    x <- names(df)                               #Did this to avoid typing twice
    if (is.numeric(column)) column <- x[column]  #Take numeric input by indexing
    names(df)[x %in% column] <- new              #What you're interested in
    return(df)
}

#try it out
rename(mtcars, 'mpg', 'NEW')
rename(mtcars, 1, 'NEW') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T15:59:43.477

我不同意@Chase -`grepl`解决方案不是最幸运的。我会说：选择简单的`==`. 原因如下：

```
d <- data.frame(matrix(rnorm(100), 10))
colnames(d) <- replicate(10, paste(sample(letters[1:5], size = 5, replace=TRUE, prob=c(.1, .6, .1, .1, .1)), collapse = "")) 
```

现在尝试做`grepl("b", colnames(d))`. 要么 pass `fixed = TRUE`，要么更好地`colnames(d) == "b"`像@joran 建议的那样做简单的事情。正则表达式匹配**总是**比它慢`==`，所以对于像这样的简单任务，您可能需要使用 simple `==`。

# java - TCP 客户端无法从服务器读取数据

> ID：10655445
> 
> 赞同：3
> 
> 时间：2012-05-18T15:26:02.353
> 
> 标签：java, android, tcp, network-programming

所以我有一个在 Androidt 平板电脑上运行的 TCP 客户端，我有一个在 PC 上运行的 c++ 服务器。

我将数据从平板电脑发送到 PC，PC 可以很好地读取它们，但是当 PC 尝试向平板电脑发送回消息时，平板电脑什么也没有收到。它卡在`readLine()`试图阅读某些内容的通话中。

所以这里是发送然后等待响应的java方法

```
@Override
protected Void doInBackground(Void... arg0)
{   
    String msg = "";
    Socket socket = null;
    DataOutputStream outToServer = null;
    BufferedReader msgFromServer = null;
    try 
    {
        // Socket used for I/O with the server
        socket = new Socket("192.168.20.100", 48501);

        // Writing to the server
        outToServer = new DataOutputStream( socket.getOutputStream() );

        // Reading from the server
        msgFromServer = new BufferedReader( new InputStreamReader( socket.getInputStream() ) );
        DataInputStream iStrReader = new DataInputStream( socket.getInputStream() );

        // Initial comm
        outToServer.writeBytes( "MainCamConnect" );

        msg = msgFromServer.readLine(); // Get stuck here
        Log.d( "NETWORK", msg );

        socket.close();

    } 
    catch( UnknownHostException e ) 
    {
        e.printStackTrace();
    } 
    catch( IOException e ) 
    {
        e.printStackTrace();
    }

    return( null );
} 
```

我从 PC 发送的消息是这样的：“StartDelayTest\n”

我知道服务器可以很好地发送消息，因为我用一个简单的 c++ TCP 客户端对其进行了测试，它工作得很好，但是当我在平板电脑上运行它时，平板电脑什么也得不到

编辑：

操作系统：Windows 7 64 位专业版

编辑2：

我已经在我的电脑上运行了wireshark，我可以确认数据包被发送到正确的地址IP，所以问题确实出在接收端（android应用程序）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:43:16.637

您正在阅读台词，但不是在编写它们。writeBytes() 只写入这些字节。行以换行符结束。readLine() 将阻塞，直到它收到一个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T15:30:38.947

我会尝试使用 public`int read(char[] cbuf, int off, int len)`代替，所以您的代码将类似于：

```
char[] buffer = new char[256];
int count = read(buffer, 0, 256); 
```

网络缓冲区的 readline 在典型的客户端服务器应用程序中不经常使用。

# c# - WF 中的转换错误

> ID：10655446
> 
> 赞同：1
> 
> 时间：2012-05-18T15:26:04.863
> 
> 标签：c#, wpf, visual-studio-2010, workflow-foundation-4

我在一个 WF 项目中工作......这是我的 StatusDesigner.xaml.cs 文件的一部分：

```
 ............
 <sap:ActivityDesigner.Resources>
    <ResourceDictionary>
        <sapc:ArgumentToExpressionConverter x:Key="ArgumentToExpressionConverter" />
    </ResourceDictionary>
  </sap:ActivityDesigner.Resources>
 .......... 
 <sapv:ExpressionTextBox
      HintText="Add Description"
      Expression="{Binding Path=ModelItem.description, Mode=TwoWay, Converter={StaticResource ArgumentToExpressionConverter}}"
      OwnerActivity="{Binding Path=ModelItem}"
      UseLocationExpression="True" Margin="107,157,7,17" MaxLines="1" FontWeight="Normal" />
 ................ 
```

这是我用来获取例如 issuer.DESCRIPTION 的 ExpressionTextBox...

这是我的 StatusActivity.cs：

```
 public String description { get; set; }
........
  SqlCommand proc = new SqlCommand("Add_Workflow_Status", conn);
                    conn.Open();
                    proc.CommandType = CommandType.StoredProcedure;
 .......
  proc.Parameters.AddWithValue("@RESULT_CHAR", description); 
```

现在，当我执行 issuer.DESCRIPTION 时，会显示一条错误消息：

*ArgumentException：“Microsoft.VisualBasic.Activities.VisualBasicReference”类型的对象`1 [System.Double]`无法转换为“System.Double”类型。*

这很奇怪......将 System.Double 转换为 System.Double 时出错？

# wordpress - WordPress meta_value_num 不工作

> ID：10655447
> 
> 赞同：1
> 
> 时间：2012-05-18T15:26:08.703
> 
> 标签：wordpress

我试图通过自定义字段中设置的数值简单地对帖子进行排序。我已经搜索了在线资源，但仍然无法确定为什么这不起作用。有任何想法吗？

```
<?php 
    $args = array(
        'post_type' => 'calendar',
        'meta_key' => 'event_date_new',
        'orderby' => 'meta_value_num',
        'order' => 'DESC'
    );
    $loop = new WP_Query($args);
    while ( $loop->have_posts() ) : $loop->the_post(); ?>
        <h3><?php the_title(); ?></h3>
        <?php echo the_field('event_date_new'); ?>
    <?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T12:54:57.800

此查询有效

```
$wp_query_args['post_type'] = 'event';
$wp_query_args['paged']     = $paged;
$wp_query_args['posts_per_page'] = 10;
$wp_query_args['orderby']   = 'meta_value_num';
$wp_query_args['order']     = 'DESC';
$wp_query_args['meta_key']  = 'event_end_date';
$wp_query_args['meta_query']= array(
                                array(
                                    'key' => 'event_end_date',
                                    'compare' => '<',
                                    'value' => date('Ymd'),
                                )
                            ); 
```

此查询不起作用。

```
$wp_query_args['post_type'] = 'event';
$wp_query_args['paged']     = $paged;
$wp_query_args['posts_per_page'] = 10;
$wp_query_args['orderby']   = 'meta_value_num';
$wp_query_args['order']     = 'ASC';
$wp_query_args['meta_key']  = 'event_start_date';
$wp_query_args['meta_query']= array(
                                'relation' => 'OR',
                                array(
                                    'key' => 'event_start_date',
                                    'compare' => '>=',
                                    'value' => date('Ymd'),
                                ),
                            array(
                                'key' => 'event_end_date',
                                'compare' => '>=',
                                'value' => date('Ymd'),
                            )
                        ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T02:50:18.677

你试过 `'orderby' => 'meta_value_num meta_value'`or`'orderby' => 'meta_value meta_value_num'`吗？

# git - 是否可以为每个遥控器设置单独的 git ignore 规则？

> ID：10655453
> 
> 赞同：3
> 
> 时间：2012-05-18T15:26:20.023
> 
> 标签：git, .htaccess, .htpasswd

这是我的情况。我正在 PHP Fog 上设置开发服务器和生产服务器。我的本地机器上有一组文件，我希望能够处理这些文件并将其推送到 PHP Fog 上的两台服务器中的每台。

不过，我希望使用传统的 htpasswd/htaccess 方法保护我的开发服务器。这意味着生产服务器需要忽略我的工作副本中的这两个文件。

有没有办法告诉生产服务器在提交时忽略这两个文件，但在推送到开发服务器时让它们通过？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:28:14.960

不久前我也在研究这个问题，我使用了这篇文章，它应该解释如何将单个 htaccess 用于多个站点，而不是担心 git。

博客文章：[Mark Alan Evans撰写的“](http://www.markalanevans.com/resume/)[用于开发和生产服务器的 git 存储库中的](http://www.markalanevans.com/2010/07/30/single-htaccess-file-for-both-your-dev-and-production-code/)[单个`.htaccess`](http://www.markalanevans.com/2010/07/30/single-htaccess-file-for-both-your-dev-and-production-code/)文件”

他是这样描述问题的：

> ### 问题：
> 
> 你想拥有`dev.yoursite.com`，`www.yoursite.com`但又不想让`dev.yoursite.com`公众看到。
> 
> ### 解决方案：
> 
> 如果您使用 apache（我们中的许多人都是这样），那就`.htaccess`来`.htpasswd`救援。
> 在您的`.htaccess`文件中添加：

```
SetEnvIf Host yourstagingserver.com passreq 
AuthType Basic 
AuthName “Staging Server” 
AuthUserFile /path/to/.htpasswd 
Require valid-user 
Order allow,deny 
Allow from all 
Deny from env=passreq 
Satisfy any 
```

> ### 在开发和生产中配置您的密码文件
> 
> 无论您在何处指定`/path/to/.htpasswd`文件，从控制台导航到该文件夹​​并键入“<code>htpasswd -c .htpasswd mark”，其中 mark 是您要为其创建登录的第一个用户。
> 对于每个其他人，键入“<code>htpasswd .htpasswd linda”，其中`linda`是您要添加到`.htpasswd`文件中的下一个用户名。
> 每次它都会提示您输入两次密码（您的密码将存储在`.htpasswd`文件中），并在您创建的用户名旁边加密。
> 
> 笔记：

`AuthUserFile`需要一个绝对路径，但如果您不以正斜杠开头路径，则默认为您在`httpd.conf`文件中指定为`ServerRoot`.

# sql-server - 如何确定哪个 SQLDependency 触发了更改函数？

> ID：10655458
> 
> 赞同：2
> 
> 时间：2012-05-18T15:26:41.167
> 
> 标签：sql-server, ado.net, sql-server-2008-r2, sqldependency, query-notifications

我正在与`SQLDependency`班级一起探索查询通知。构建一个简单的工作示例很容易，但我觉得我错过了一些东西。一旦我跳过一个简单的单表/单依赖示例，我就想知道 *如何确定哪个依赖触发了我的回调？*

我在解释时遇到了一些麻烦，所以我在下面提供了一个简单的示例。当`AChange()`被调用时，我无法查看依赖项中的 sql，并且我没有对关联缓存对象的引用。

那么男孩该怎么办呢？

*   **选项 1** - 为我要跟踪的每个对象创建一个不同的函数，并在回调中硬编码缓存键（或相关信息）。这感觉很脏，并且消除了在不部署新代码的情况下添加新缓存项的可能性——ewww。
*   **选项 2** - 使用 Dependency`Id`属性和并行跟踪结构

我只是错过了什么吗？这是`SQLDependency`结构上的缺陷吗？我已经查看了 20 篇关于该主题的不同文章，所有文章似乎都有相同的漏洞。建议？

**代码示例**

```
public class DependencyCache{
   public static  string       cacheName  = "Client1";
   public static  MemoryCache  memCache   = new MemoryCache(cacheName);

   public DependencyCache() {
      SqlDependency.Start(connString);
   }

   private static string GetSQL() {
      return "select  someString FROM dbo.TestTable";
   }

   public void DoTest() {
      if (memCache["TEST_KEY"] != null ) {
         Debug.WriteLine("resources found in cache");
         return;
      }
      Cache_GetData();
   }

   private void Cache_GetData() {
      SqlConnection         oConn;
      SqlCommand            oCmd;
      SqlDependency         oDep;
      SqlDataReader         oRS;
      List<string>          stuff    = new List<string>();
      CacheItemPolicy       policy   = new CacheItemPolicy();

      SqlDependency.Start(connString);
      using (oConn = new SqlConnection(connString) ) {
         using (oCmd = new SqlCommand(GetSQL(), oConn) ) {
            oDep = new SqlDependency(oCmd);
            oConn.Open();
            oRS = oCmd.ExecuteReader();

            while(oRS.Read() ) {
                  resources.Add( oRS.GetString(0) );
            }

            oDep.OnChange += new OnChangeEventHandler (AChange);
         }
      }
      memCache.Set("TEST_KEY", stuff, policy);
   }

   private void AChange(  object sender, SqlNotificationEventArgs e) {
      string msg= "Dependency Change \nINFO: {0} : SOURCE {1} :TYPE: {2}";
      Debug.WriteLine(String.Format(msg, e.Info, e.Source, e.Type));

      // If multiple queries use this as a callback how can i figure 
      // out WHAT QUERY TRIGGERED the change?
      // I can't figure out how to tell multiple dependency objects apart

      ((SqlDependency)sender).OnChange -= Cache_SqlDependency_OnChange; 
      Cache_GetData(); //reload data
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:16:52.690

首先也是最重要的：必须在执行命令**之前**设置处理程序：

```
 oDep = new SqlDependency(oCmd);
 oConn.Open();
 oDep.OnChange += new OnChangeEventHandler (AChange);
 oRS = oCmd.ExecuteReader();
 while(oRS.Read() ) {
     resources.Add( oRS.GetString(0) );
 } 
```

否则，当通知可能丢失并且您的回调永远不会被调用时，您会有一个窗口。

现在关于您的问题：您应该为每个查询使用单独的回调。虽然这可能看起来很麻烦，但使用 lambda 实际上是微不足道的。类似于以下内容：

```
oDep = new SqlDependency(oCmd);
oConn.Open();
oDep.OnChange += (sender, e) =>
{
   string msg = "Dependency Change \nINFO: {0} : SOURCE {1} :TYPE: {2}";
   Debug.WriteLine(String.Format(msg, e.Info, e.Source, e.Type));

   // The command that trigger the notification is captured in the context:
   //  is oCmd
   //
   // You can now call a handler passing in the relevant info:
   //
   Reload_Data(oCmd, ...);
};
oRS = oCmd.ExecuteReader();
... 
```

并记住*始终*检查通知来源、信息和类型。*否则，当您因数据更改以外*的原因（例如无效查询）而收到通知时，您可能会冒着令人作呕的风险。作为旁注，我要补充一点，一个好的缓存设计不会在失效时刷新缓存，而只是使缓存的项目无效并让*下一个请求*实际获取一个新的项目。使用您的“主动”方法，即使不需要，您也可以刷新缓存的项目，在访问它们之前多次刷新等等。我忽略了示例错误处理和正确的线程同步（两者都是必需的）。

最后，看看[LinqtoCache](http://code.google.com/p/linqtocache/)，它几乎可以完成您想要做的事情，但用于 LINQ 查询。

# javascript - 如何为单页应用程序实现 isDirty 标志 onLeave？

> ID：10655460
> 
> 赞同：0
> 
> 时间：2012-05-18T15:26:44.107
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, singlepage

我有一个用 MVC4 编写的单页应用程序，它使用[pjax()](https://github.com/defunkt/jquery-pjax)将 html 推送到我页面中的各种 s 中。我有一个允许用户编辑数据的子表单，如果用户更改数据，则在 javascript 中设置 isDirty 标志以触发页面底部存在未保存更新的警报。当用户尝试离开页面而不保存时，我还想实施额外的警告。如果我使用这样的传统 onbeforeunload 函数

```
window.onbeforeunload = function() {
    if (isDirty) {
        return 'You have unsaved changes!';
    }
    return null;
}; 
```

如果我尝试关闭页面或完全离开该站点，它会调用警报，但是如果用户单击我的一个链接，该链接重新填充了一些不同的信息，它不会触发，因为您实际上并没有离开页面。我如何构建它，以便这些 pjax() 链接之一引起类似于如果我关闭页面的警报？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:52:22.430

您可以订阅在 pjax 请求之前触发的全局事件：

```
$(document).on('pjax:beforeSend', function() { 
    if (isDirty) {
        return confirm('You have unsaved changes! Are you sure you want to continue?');
    }
    return true;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T01:10:58.667

您可以将委托的事件处理程序添加到页面中的链接上。您只需确保处理程序绑定到可能加载“新页面”的链接。

# sql - 将数据从一列拆分为多列

> ID：10655461
> 
> 赞同：0
> 
> 时间：2012-05-18T15:26:45.327
> 
> 标签：sql, tsql, etl

我有一个完整的学生出勤数据表，我们正在迁移到另一个学生信息系统，他们希望平面文件的方式是每个学生每天一行，列出所有 7 个时段。现在，我们的数据存储为每个期间每天一条记录（请参阅附件架构）格式化此数据以匹配我上面列出的内容的最佳方法是什么。我还附上了他们想要的屏幕截图（每一行都是一列）。

**添加了数据的屏幕截图。**

![我们当前的数据库模式](../Images/2f651f39af46ef6caa67c9394ab655e9.png)

![它需要是什么](../Images/52229d2092a94358a2383f627be2c93a.png)

![在此处输入图像描述](../Images/98d95b844a71369ac6055261175efa16.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:36:30.453

看看 PIVOT 和 UNPIVOT。

[这](http://www.sql-programmers.com/using-pivot-and-unpivot.aspx)是一个例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:28:08.077

好的，所以枢轴不是我需要的。我最终与一位大学讨论了我的问题，他告诉我使用子查询。所以这就是我解决它的方法！

```
select distinct student_id,school_year,school_number,absent_date,
(select absent_code from attend_student_detail a2 where a2.student_id=a.student_id and a2.absent_date=a.absent_date and a2.absent_period='H') as daily_code,
(select absent_code from attend_student_detail a2 where a2.student_id=a.student_id and a2.absent_date=a.absent_date and a2.absent_period='1') as per_1,
(select absent_code from attend_student_detail a2 where a2.student_id=a.student_id and a2.absent_date=a.absent_date and a2.absent_period='2') as per_2,
(select absent_code from attend_student_detail a2 where a2.student_id=a.student_id and a2.absent_date=a.absent_date and a2.absent_period='3') as per_3,
(select absent_code from attend_student_detail a2 where a2.student_id=a.student_id and a2.absent_date=a.absent_date and a2.absent_period='4') as per_4,
(select absent_code from attend_student_detail a2 where a2.student_id=a.student_id and a2.absent_date=a.absent_date and a2.absent_period='5') as per_5,
(select absent_code from attend_student_detail a2 where a2.student_id=a.student_id and a2.absent_date=a.absent_date and a2.absent_period='6') as per_6,
(select absent_code from attend_student_detail a2 where a2.student_id=a.student_id and a2.absent_date=a.absent_date and a2.absent_period='7') as per_7 

FROM attend_student_detail a

Order By Absent_Date, Student_ID 
```

# scala - 如何在 Scala 中找到时间转换隐式的包？

> ID：10655463
> 
> 赞同：1
> 
> 时间：2012-05-18T15:26:50.430
> 
> 标签：scala, implicit-conversion

在官方 API 页面上，我搜索了“时间”，但找不到该类。我查看了[RichLong](http://www.scala-lang.org/api/current/index.html#scala.runtime.RichLong)和[RichInt](http://www.scala-lang.org/api/current/index.html#scala.runtime.RichInt)上的所有方法，但找不到这些方法。

我专门谈论将 int/long 转换为某种富对象的方法：

```
2 hours + 12 seconds 
```

注意我不是在问包裹是*什么*，我想知道如何找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:48:41.243

这些不在标准的 Scala API 中。你在使用 JodaTime 的 scala-time 包装器吗？如果是这样，那会告诉你在哪里看。一般来说，如果您知道哪个导入启用了该功能，那么在尝试查找文档时会有很大帮助！

如果您知道方法名称，您可以单击左侧面板顶部的小字母，就在 ScalaDoc 中的搜索文本字段下方 - 这将显示文档中具有该名称的所有内容的列表，包括方法（并告诉你如何找到它）。

如果一个类本身没有方法，你可以使用 Scala 告诉你它被转换成什么类：

```
def whoHasSize[A](a: A)(implicit ev: A => { def size: Int }) = ev(a).getClass.getName

scala> whoHasSize("fish")
res1: java.lang.String = scala.collection.immutable.StringOps 
```

所以在这里你看到字符串`"fish"`本身没有`size`方法；相反，这是由该`scala.collection.immutable.StringOps`方法授予的。你可以做同样的事情来了解`seconds`.

最后，stew 的答案可能就是你真正想要的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T15:29:36.477

您可以使用该`-Xlog-implicits`标志让编译器向您显示它在哪里找到隐式转换。

# java - 在查询结果中显示对象的内容

> ID：10655465
> 
> 赞同：0
> 
> 时间：2012-05-18T15:27:01.863
> 
> 标签：java, hibernate

我在java中有以下代码：

```
 try {
        SessionFactory sessionFactory=new Configuration().configure().buildSessionFactory();
        session=sessionFactory.openSession();
        Query userQuery=session.createQuery("select u.userId, u.username,p.profileContent from User as u inner join u.profiles as p");//, p.profileContent 

        List userList=userQuery.list();
        for(int i=0;i<userList.size();i++){
            System.out.println(userList.get(i));
        }
    }
    catch(Exception e){
        System.out.println(e.getMessage());
    }
    finally{
        session.flush();
        session.close();
    } 
```

我正在尝试显示查询结果，但只显示对象。你能建议我显示对象内容的方式吗？目前我得到的结果如下：

> [Ljava.lang.Object;@64bef361

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T15:31:50.877

```
for (Object o : userList) {
    Object[] row = (Object[]) o;
    System.out.println(Arrays.toString(row));
} 
```

但是您可能应该使用调试器，而不是用这样的循环使您的代码混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:02:01.970

每当您尝试打印任何对象引用时，都会调用它的 toString() 方法。现在，假设您的 userList 是 User 类型。您尚未在 User 类中覆盖 toString() 方法。所以，目前发生的事情是调用对象类的 toString() 方法。对象类已经实现了这个方法，它打印出它的完全限定的包名和它的哈希码。

因此，只需在您的 User 类中覆盖此 toString() 方法，它将开始打印您在此方法中配置的整个数据。您可以手动覆盖此方法，或者如果您有 IDE 行 netbeans 或 eclipse，只需右键单击 java 文件中的任意位置并选择生成 ToString 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T21:02:57.757

我解决了这个问题。我不知道查询连接多个表的结果会将结果存储为 Objects 类的数组。

```
Query userQuery=session.createQuery("select u.userId, u.username,p.profileContent from User as u inner join u.profiles as p");//, p.profileContent 

Iterator ite = userQuery.list().iterator();
while ( ite.hasNext() ) {    
    Object[] pair = (Object[]) ite.next();
    Integer user = (Integer) pair[0];
    String userName=(String) pair[1];
    String profileContent=(String) pair[2];

    System.out.println(user+" "+userName+" "+profileContent);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T11:11:26.463

在 Java 中，良好的编程习惯是重写`Object.toString()`，这样就可以避免这个问题。如果您想要比所获得的更有意义的输出，那么请遵守 API 鼓励的标准。[如有疑问，请参阅文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)

# xml - WP7文件预打包/OTA下载到isostore

> ID：10655469
> 
> 赞同：0
> 
> 时间：2012-05-18T15:27:07.673
> 
> 标签：xml, windows-phone-7, pre-packaged

我正在制作一个使用基于 xml 的数据的 windows phone 7 应用程序。我知道我可以将 xml 文件与应用程序一起预打包（作为应用程序内容的一部分）并将它们与 XAP 一起部署。

将来，如果我必须因更新/更改的数据而更新 XML，我有哪些选择？

我可以建立一种方法让用户下载文件吗？它会覆盖现有文件吗？

如果不是，如果我选择让用户单独下载更新的 XML 文件而不是要求用户更新整个应用程序，我还有哪些其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:33:00.127

我过去遇到过类似的问题，这是我的解决方案：

*   将 XML 文件与应用程序捆绑为内容（因此它进入 .xap 文件）
*   每次运行应用程序时，我都会做两件事：
    *   检查 XML 文件是否在 IsolatedStorage 上；如果不是（第一次运行），请将它们从应用数据源文件夹复制到 IsolateStorage
    *   检查IsolatedStorage中的文件是否需要更新；如果是这样，请下载新版本并更新独立存储。
*   仅使用 IsolatedStorage 上的 XML 文件

# c# - 如何在 WPF 控件内的类库中使用 .resx 文件？

> ID：10655471
> 
> 赞同：2
> 
> 时间：2012-05-18T15:27:17.120
> 
> 标签：c#, wpf, winforms, class-library

所以我有一个库来存放我所有的图像。这适用于我的 WinForms 控件；但是，我很难在 WPF 中使用同一个类库的资源。

```
MyApp.Resources //Is my control library project.
Resources //Is the folder that contains all my images at the root of the project. 
```

如何从我的类库中引用 WPF 控件中的图像？

**我试过的：**

```
<ImageBrush ImageSource="/MyApp.Resources;Resources/manage.png" /> 
```

**--UserControl 属性**

```
Resources="pack://application:,,,/MyApp.Resources;Resources.resx"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:36:12.117

1.  添加一个新的 RESX 文件。
2.  在这个文件中添加你的文件。
3.  在 VS 的解决方案资源管理器中检查您的 RESX 文件，并将构建操作从 Embedded Resource 更改为 Resource。
4.  打开 RESX 文件并将访问修饰符从 Internal 更改为 Public。
5.  创建一个新的资源字典文件（例如 Files.xaml）：

> ```
> <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
>                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">  
>    <BitmapImage x:Key="someImage" 
>                 UriSource="/YourAppNamespace;component/Resources/image.png" />
> </ResourceDictionary> 
> ```

6.  在您的窗口或应用程序资源中导入字典：

> ```
> <ResourceDictionary>
>    <ResourceDictionary.MergedDictionaries>
>       <ResourceDictionary Source="Files.xaml" />
>    </ResourceDictionary.MergedDictionaries>
> </ResourceDictionary> 
> ```

7.  在 WPF 应用程序中使用您的图像：

> ```
> <Image Source="{StaticResource someImage}" /> 
> ```

# objective-c - 核心数据：多对多关系中的属性

> ID：10655472
> 
> 赞同：2
> 
> 时间：2012-05-18T15:27:19.677
> 
> 标签：objective-c, ios, core-data, many-to-many, entity-relationship

我正在开发一个基于核心数据的应用程序（我以前使用 sqlite，但这次我想学习一些新东西）并且我被困在这个关系问题上：

我有歌曲和播放列表，我想将它们与订单号相关联，所以播放列表可以是这样的：

```
 - "Playlist A"   
       1\. Song A  
       2\. Song C  
       3\. Song B
 - "Playlist B" 
       1\. Song C  
       2\. Song A  
       3\. Song B
       4\. Song F
       5\. Song E 
```

这是一个明显的多2多情况，（我知道这不是标准的）存储在相关表中的订单号；在 sql 我会做

```
 Table  "Songs"  (id, name, ecc..)
  Table  "Playlists" (id,name, ecc..)
  Table  "PlaylistSongs" (playlist_id,song_id,position)

In Core Data i did:
      Entity "Song"
      Entity "Playlist"
      Entity "SongInPlaylist"

with this relation:
  Song <---->> SongInPlaylist
  Playlist <----->> SongInPlaylist 
```

但现在我不知道如何：

a）将歌曲放入播放列表中的某个索引 b）以正确的顺序在播放列表中获取歌曲 c）修改播放列表顺序。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:33:57.213

似乎 SongInPlaylist 需要一个`position`属性。然后，您可以为 PlayList 提供一些方法以在索引处插入、从一个索引移动到另一个索引，或者在可以修复其他 SongInPlaylist 实体的位置值的索引处移除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:25:56.467

```
Song *song = yourSong;
Playlist *playlist = yourPlaylist;
NSNumber *position = songsPositionInPlaylist;

// add song to playlist
SongInPlaylist *sip = [NSEntityDescription insertNewObjectForEntityForName:@"SongInPlaylist" inManagedObjectContext:yourContext];
sip.song = yourSong;
sip.playlist = yourPlaylist;
sip.position = songsPositionInPlaylist;

[yourContext save:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:33:15.350

在中间添加一个项目，例如“PlaylistEntry”，它指向一首歌曲并有一个订单字段。直接使用 PlaylistEntries 而不是歌曲来构建播放列表。然后，您可以对 order 字段进行排序并对其进行操作以更改 Playlist 的排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T16:59:16.357

这似乎是有序关系的理想用途。只需选中数据模型编辑器中的“Ordered”框，每个播放列表都会按照您指定的顺序保存对其歌曲的引用。

# google-maps - 导航到保存的谷歌地图上的标记

> ID：10655478
> 
> 赞同：0
> 
> 时间：2012-05-18T15:27:49.920
> 
> 标签：google-maps

我一直在浏览 google api，但一直无法找到有关如何进行标记导航的信息。例如[http://maps.google.com/maps/ms?msid=214364913744716823698.00046c8f8a60625db2c21&msa=0&ll=48.068903,-91.109619&spn=0.537763,0.883026](http://maps.google.com/maps/ms?msid=214364913744716823698.00046c8f8a60625db2c21&msa=0&ll=48.068903,-91.109619&spn=0.537763,0.883026)

我用三个标记制作了这张地图，我想把它嵌入到我的网站中，然后有三个与标记匹配的链接，当你点击链接时，它会将地图平移到那个制造商。是否可以使用保存的谷歌地图来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:33:58.403

Here is a complete example. Basically, the map.setCenter command will allow you to move from one point to another

```
<!DOCTYPE html>
<html> 
<head> 
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
  <title>Demo</title> 
  <script src="http://maps.google.com/maps/api/js?sensor=false" 
          type="text/javascript"></script>
</head> 
<body>
  <div> 
     <a href="#" onclick="map.setCenter(a);">Point A</a> 
     <a href="#" onclick="map.setCenter(b);">Point B</a>
     <a href="#" onclick="map.setCenter(c);">Point C</a>
  </div>
  <div id="map" style="width: 640px; height: 480px;"></div>

  <script type="text/javascript">
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 9,
      center: new google.maps.LatLng(40.00, -104.00),
      mapTypeId: google.maps.MapTypeId.TERRAIN
    });

    var a = new google.maps.LatLng(40.00, -104.00);
    var b = new google.maps.LatLng(41.00, -105.00);
    var c = new google.maps.LatLng(39.00, -103.00);

    new google.maps.Marker({
        position: a,
        map: map
    });

    new google.maps.Marker({
        position: b,
        map: map
    });

    new google.maps.Marker({
        position: c,
        map: map
    });  
  </script>
</body>
</html> 
```

# image - Sencha 触摸在选项卡面板中显示图像

> ID：10655479
> 
> 赞同：1
> 
> 时间：2012-05-18T15:27:54.273
> 
> 标签：image, model-view-controller, view, sencha-touch-2, tabpanel

我正在尝试在 view.js 中显示没有标签面板的图像但是，尽管遵循了文档，但它似乎无法正常工作。谁能帮忙指出我做错了什么？

谢谢

应用程序.js

```
Ext.application({
    name: 'hoodhelp1a',

    requires: [
        'Ext.MessageBox'
    ],

    views: ['Main'],

    isIconPrecomposed: true,

    launch: function() {
        // Destroy the #appLoadingIndicator element
        Ext.fly('appLoadingIndicator').destroy();

        // Initialize the main view
        Ext.Viewport.add(Ext.create('hoodhelp1a.view.Main'));
    },

    onUpdated: function() {
        Ext.Msg.confirm(
            "Application Update",
            "This application has just successfully been updated to the latest version. Reload now?",
            function(buttonId) {
                if (buttonId === 'yes') {
                    window.location.reload();
                }
            }
        );
    }
}); 
```

查看/Main.js

```
Ext.define("hoodhelp1a.view.Main", {
    extend: 'Ext.tab.Panel',
    requires: [
        'Ext.TitleBar',
        'Ext.Video',
        'Ext.Img',   
    ],
    config: {
        tabBarPosition: 'bottom',

        items: [
            {
                title: 'Home',
                iconCls: 'home',
                xtype: 'container',
                layout: 'hbox',
                items: [
                {
                    docked: 'top',
                    xtype: 'titlebar',
                    title: 'Welcome to Sencha Touch 2'
                },
                {
                        xtype: 'image',
                        src: 'http://www.sencha.com/assets/images/sencha-avatar-64x64.png'
                }
            ]
            },
            {
                title: 'Get Started',
                iconCls: 'action',

                items: [
                    {
                        docked: 'top',
                        xtype: 'titlebar',
                        title: 'Getting Started'
                    },
                    {
                        xtype: 'video',
                        url: 'http://av.vimeo.com/64284/137/87347327.mp4?token=1330978144_f9b698fea38cd408d52a2393240c896c',
                        posterUrl: 'http://b.vimeocdn.com/ts/261/062/261062119_640.jpg'
                    }
                ]
            }
        ]
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:56:39.883

由于您在第一个选项卡中为“容器”使用“hbox”布局，因此必须指定“flex”配置。（例如，在你的 'image' 配置中设置 'flex:1'）。

另一种选择是将此“容器”的布局设置为“适合”。

顺便说一句，'xtype:container' 不是必需的。

请参阅此小提琴以进行说明： [http ://www.senchafiddle.com/#X0Ejm](http://www.senchafiddle.com/#X0Ejm)

# iphone - iPhone应用程序的财务图表

> ID：10655482
> 
> 赞同：7
> 
> 时间：2012-05-18T15:28:01.487
> 
> 标签：iphone, ios, xcode, charts, core-plot

我正在调查大约一周的 iPhone 应用程序的交互式和高性能金融股票图表“类似于股票市场的烛台/OHLC 图表”，我发现[CorePlot](http://code.google.com/p/core-plot/)是开源和免费的，而[ShinobiControls](http://www.shinobicontrols.com/)是非常轻量级的并且完美且付费，我想知道是否应该考虑其他建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:14:58.073

Infragistics 已进入 iOS 组件市场。检查[http://www.infragistics.com/iOS](http://www.infragistics.com/iOS)。Infragistics 也比 Shinobi 便宜很多。它确实支持烛台和 OHLC 财务系列，并且还内置了财务指标和趋势线。

他们有一个网格和图表。它目前处于公开测试阶段，但您现在可以免费下载。

您还可以在[http://community.infragistics.com/blogs/nick-landry/archive/2012/06/11/netadvantage-for-ios-public-beta-now-available-for-download-with阅读常见问题解答-bonus-faq.aspx](http://community.infragistics.com/blogs/nick-landry/archive/2012/06/11/netadvantage-for-ios-public-beta-now-available-for-download-with-bonus-faq.aspx)。

免责声明：我是 Infragistics 所有移动产品的产品经理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:56:53.537

你可以试试，[https://github.com/honcheng/iOSPlot/tree/master/iOSPlot](https://github.com/honcheng/iOSPlot/tree/master/iOSPlot)。另外，如果你不了解 JS，想弄脏你的手，你可以试试[http://g.raphaeljs.com/](http://g.raphaeljs.com/)，它有一些很棒的图表。如果您觉得它满足您的需求，请接受此答案，谢谢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T10:18:53.757

你试过融合图表吗？

这是我见过的最好的图表库。我也将它们用于 Web 项目和 iOS 项目，因为它们现在拥有所有内容的 JS 版本。

非常复杂的图形、范围广泛的图表，甚至可以满足您对该项目的特定需求的实时小部件。

它们不是免费的，但完全值得考虑。我已经使用试用版完成了与试点和演示项目相关的所有工作。

[在http://www.fusioncharts.com/demos/gallery/](http://www.fusioncharts.com/demos/gallery/)上查看它们

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-03T21:47:00.160

SciChart 已发布 iOS 股票图表作为[SciChart iOS SDK](http://www.scichart.com/ios-stock-charts/)的一部分。

[![在此处输入图像描述](../Images/7db5c5147d376d6e602f77a88f50fee2.png)](https://i.stack.imgur.com/smBTu.png)

SciChart iOS 是一个付费组件，支持：

*   [实时图表的极端性能](http://www.scichart.com/ios-chart-performance-comparison)在测试中击败所有竞争对手。
*   跨平台到[Android](http://www.scichart.com/android-chart-features) , [Xamarin](http://www.scichart.com/xamarin-chart-examples) , [WPF](http://www.scichart.com/wpf-chart-features)
*   图表之间的多窗格同步（共享图表事件和缩放）
*   CategoryDateTimeAxis（折叠交易图表的周末/隔夜缺口）
*   许多系列类型能够渲染烛台、OHLC、山脉、柱、带、散点。
*   开箱即用的缩放、平移、缩放
*   Axis Textformatting，自定义轴标签和轴频率输出
*   光标，工具提示
*   简单的注释，例如线条、文本、轴标记
*   开箱即用的时尚深色主题！

您现在可以[在 Github 上克隆 iOS 图表示例](https://github.com/ABTSoftware/SciChart.iOS.Examples)并尝试使用控件，看看我们是如何创建上述示例应用程序的！很快我们也希望在 Apple Store 上也能提供演示。

*披露：我是 SciChart 的 MD！*

# python - 如何使用 Python 在 Mac OS X 的前台启动应用程序？

> ID：10655484
> 
> 赞同：3
> 
> 时间：2012-05-18T15:28:03.067
> 
> 标签：python, macos, foreground

当我在 Mac OS X 上使用 subprocess.Popen 启动应用程序时，它会在后台启动，您必须单击 Dock 中的图标才能将其带到前面。我怎样才能让它在前台开始？

我曾尝试使用“打开”，但这会创建和不需要的终端窗口。

注意：该应用程序是从使用 wxPython 编写的 GUI 应用程序启动的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:54:23.110

我认为您将需要使用本机 API 和一些 python 绑定。

[NSRunningApplication](https://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSRunningApplication_Class/Reference/Reference.html)和它的方法[activateWithOptions](https://developer.apple.com/library/mac/documentation/AppKit/Reference/NSRunningApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSRunningApplication/activateWithOptions:)是你所需要的。这是一个如何使用它的示例：[如何使用 Cocoa api 启动应用程序并将其置于前面？](https://stackoverflow.com/questions/2333078/how-to-launch-application-and-bring-it-to-front-using-cocoa-api)

查看[PyObjC](http://pyobjc.sourceforge.net/)的绑定。

```
from Foundation import *
from Cocoa import *
import objc

pid = 1456 
x = NSRunningApplication.runningApplicationWithProcessIdentifier_(pid)
x.activateWithOptions_(NSApplicationActivateAllWindows) 
```

**更新：**

以下行在激活应用程序时更具侵略性。

```
x.activateWithOptions_(NSApplicationActivateIgnoringOtherApps) 
```

此外，您可能需要先`.unhide()`使用该应用程序。

```
x.hide()     
x.unhide() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-28T23:16:00.043

Snies' answer worked for me. However, since you only need NSRunningApplication and NSApplicationActivateIgnoringOtherApps, you might as well not import everything else. The following worked for me and was considerably faster:

```
from Cocoa import NSRunningApplication, NSApplicationActivateIgnoringOtherApps
pid = 1456 
x = NSRunningApplication.runningApplicationWithProcessIdentifier_(pid)
x.activateWithOptions_(NSApplicationActivateIgnoringOtherApps) 
```

# ognl - OGNL 中的通配符？

> ID：10655490
> 
> 赞同：0
> 
> 时间：2012-05-18T15:28:32.603
> 
> 标签：ognl

我必须编写一些 OGNL 才能在表格中查找某些内容，有点像使用 C# 字典。这很容易：

```
#mapping=#{"XYZ":"1234","YZX":"5678"},
#mapping.get(this.A.toString()) 
```

但现在我的要求发生了变化。现在我需要制定一些更复杂的规则，我不确定OGNL是否可以做到。我对更新的表达式有几个要求。我现在有两个不同的值及其组合需要担心。我们将值称为 A 和 B。规则如下所示：

1.  如果出现 A 的特定值，则始终返回相同的值。
2.  如果出现 A 和 B 值的某些组合，则返回另一个值。
3.  如果 A 的任何值出现在我们特别关心的值之外，则返回另一个值。

如果我有 A 和 B 的所有可能值的列表，我可以制作一个非常大的哈希表，其中包含它们的每个连接以及为每种情况返回的正确值。如果我可以使用通配符，这似乎会容易得多。有没有人想过如何实现这一点，或者是否可以使用 OGNL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:03:11.793

老实说，我可能会将这个逻辑移到 java 方法中。您最终可能会弄清楚如何在 ognl-like 中做您想做的事？也支持样式空处理程序 - 但为什么要麻烦呢？

它支持投影和与 java 语言支持的一样多的递归评估，但我不知道。. 我会选择将其移至其他地方，并且我对 ognl 本身做出了重大贡献/错误修复/更改并且非常了解它。

# maven - 插件中本地 .m2 存储库中的路径 pom.xml

> ID：10655491
> 
> 赞同：1
> 
> 时间：2012-05-18T15:28:33.343
> 
> 标签：maven, plugins, artifacts

我尝试制作一些 Maven 插件。我需要在安装阶段之后获取工件和 pom.xml 的路径。我有这样的工件路径：

D:\Work\test\mvn\moduleFirst\target\first-1.0-SNAPSHOT.jar

pom.xml 路径如下：

D:\Work\test\mvn\moduleFirst\pom.xml

但是如果在 pom.xml 包中设置了“pom”，那么我会得到这样的工件路径：

C:\Users\user.m2\repository\com\test\mvn\1.0-SNAPSHOT\mvn-1.0-SNAPSHOT.pom

和 pom.xml：

D:\工作\测试\mvn\pom.xml

我想从 .m2 本地仓库获取所有路径。怎么可能？

我制作以下代码：

```
...
    /**
     * @parameter default-value="${project.file}"
     */
    private File pomFile;
...
    /**
     * @parameter default-value="${project.artifact}"
     */
    private Artifact artifact;
...
    public void execute() throws MojoExecutionException {
...
        getLog().info("POM file " + pomFile.getAbsolutePath());
        getLog().info("Artifact " + artifact.getFile().getAbsolutePath());
...
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T15:38:41.333

我找到了解决方案。

```
...
    /**
     * @parameter expression="${localRepository}"
     * @required
     * @readonly
     */
    protected ArtifactRepository localRepository;
...
    protected String getLocalRepoFile(Artifact artifact) {
        File file = new File(localRepository.getBasedir(), localRepository.pathOf(artifact));
        return file.getAbsolutePath();
    }
...
    public void execute() throws MojoExecutionException {
...
getLog().info("Artifact " + getLocalRepoFile(artifact));
...
    } 
```

感谢 maven-install-plugin :)

# google-tv - Google TV 无法通过 https 播放，但可以播放 http

> ID：10655494
> 
> 赞同：1
> 
> 时间：2012-05-18T15:28:51.760
> 
> 标签：google-tv

当我在 Google TV 3.2 上使用带有[http://example.com/video.mp4](http://example.com/video.mp4)之类的 URL 的 VideoView 时，视频会播放，但如果我将 URL 更改为[https://example.com/video.mp4，VideoView](https://example.com/video.mp4)会弹出一条消息说“抱歉，无法播放此视频。”

我需要在 Google TV 上做些什么才能通过 https 播放视频吗？

这就是我播放视频的方式：

```
String mPath = "https://example.com/video.mp4";
mVideoView = (VideoView) this.findViewById(R.id.videoView1);
mVideoView.setVideoURI(Uri.parse(mPath));
mVideoView.setMediaController(new MediaController(this));
mVideoView.requestFocus();
mVideoView.start(); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-24T14:29:46.807

确保您尝试从中流式传输的服务器支持 https。

# java - HttpClient 获取状态代码并遵循重定向以获取结束页面状态代码

> ID：10655496
> 
> 赞同：0
> 
> 时间：2012-05-18T15:29:03.470
> 
> 标签：java, apache-httpclient-4.x

我要疯了，试图让 HttpClient 以我想要的方式工作。这一切都超出了我的想象。

我想要做的就是提供一个 URL，该 URL 可以指向网页、.zip 文件、.doc 文件和最终以上述任何一个结尾的重定向。然后我可以将最终状态代码打印到控制台。

任何人都可以在这里帮助我吗？到目前为止，我有（把所有东西都扔给它之后的代码一团糟）：

```
DefaultHttpClient client = new DefaultHttpClient();

    client.setRedirectStrategy(new DefaultRedirectStrategy(){
        public boolean isRedirected(HttpRequest request, HttpResponse response, HttpContext context)  {
            boolean isRedirect=false;
            try {
                isRedirect = super.isRedirected(request, response, context );
            } catch (org.apache.http.ProtocolException e) {
                System.out.println("what?");
                e.printStackTrace();
            }
            if (!isRedirect) {
                int responseCode = response.getStatusLine().getStatusCode();
                System.out.println(responseCode);
                if (responseCode == 301 || responseCode == 302) {
                    System.out.println("redirect");
                    return true;
                }
            }
            return isRedirect;
        }
    });

    HttpHead test = new HttpHead("http://support.xbox.com/en-US/xbox-live/troubleshoot/game-play");
    HttpEntity httpEntity = null;
    try {
        HttpResponse response = client.execute(test);
        System.out.println(response.getStatusLine().getStatusCode());
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        System.out.println(e);
        System.out.println("400");
    } catch (IOException e) {
        System.out.println("404");
        System.out.println(e);
    } 
```

编辑：

对于这个 url： http: [//support.xbox.com/en-US/xbox-live/troubleshoot/game-play](http://support.xbox.com/en-US/xbox-live/troubleshoot/game-play)我得到 404。我本来期望 200。

对于[http://www.google.com](http://www.google.com)我按预期得到 200。

对于[http://tinyurl.com/2tx，tinyurl](http://tinyurl.com/2tx)重定向到 google.com 我得到 200。

我不确定我的结果是什么。我只是希望能够从最终用户的角度测试链接以查看它们是否正常工作或损坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:08:21.803

问题是您发送的是 HEAD 请求而不是 GET 请求，xbox 站点只返回 404。

使用：

```
HttpGet test = new HttpGet("http://support.xbox.com/en-US/xbox-live/troubleshoot/game-play"); 
```

没有任何重定向的东西对我来说很好。

# c# - 以编程方式将用户登录到 asp.net 成员资格和角色？

> ID：10655497
> 
> 赞同：6
> 
> 时间：2012-05-18T15:29:05.717
> 
> 标签：c#, asp.net, asp.net-membership, asp.net-roles

我正在开发一个使用 Asp.Net 的成员资格和角色功能的 Asp.Net 4.0 Web 应用程序。

在应用程序中，将有三个角色可以访问登录页面，一个角色没有。

它应该工作的方式如下。

后端用户（具有三个特权角色之一）创建一个用户。在代码中，这是以编程方式完成的，而不是使用注册用户页面。创建用户时，他们会被添加到非特权角色中，为了清楚起见，该角色称为访问者角色。

然后，后端用户为新用户创建一个链接，格式为[https://www.example.com?link=cc82ae24-df47-4dbf-9440-1a6923945cf2](https://www.example.com?link=cc82ae24-df47-4dbf-9440-1a6923945cf2)

当链接被访问时，应用程序将定位与查询字符串关联的用户，获取用户名和密码（经过适当的散列和加盐处理）并登录用户。

这就是我要撤消的地方。到目前为止，用户创建工作正常，基于查询字符串值的数据库查询正在完成它的工作并返回相关的信息位，这一切似乎都很好，除了实际登录。似乎没有一种以编程方式登录用户的明确方法，而无需经历让用户自己登录的繁琐工作，我已被明确告知要避免这种情况。

这是我的代码，“pers”对象是一个类，当它们登陆链接的默认页面时从数据库中填充：

```
protected void LogUserIn(string p)
{
    SqlConnection conn = UtilityMethods.GetConnection();
    Guid par = Guid.Parse(p);
    BioProspect pers= new BioProspect(conn);
    pers.FillDetailsFromDb(par);

    testlable.Text = pers.ToString();
    Response.Cookies.Remove(FormsAuthentication.FormsCookieName);

    try
    {
        if (Membership.ValidateUser(pers.Email, pers.Pword))
        {

            FormsAuthentication.SetAuthCookie(pers.Email, true);

            Response.Redirect(Request.Url.Scheme + "://" + Request.Url.Host + "/About.aspx");
            testlable.Text = "Logged in!";
        }
        else
        {
            throw new Exception("Something went wrong");
        }
    }
    catch (Exception ex)
    {
        StringBuilder sb = new StringBuilder();
        foreach (DictionaryEntry d in ex.Data)
        {
            sb.Append(d.Key.ToString());
            sb.Append(": ");
            sb.Append(d.Value.ToString());
            sb.Append("\r\n");
        }

        AMessage(sb.ToString());
    }
} 
```

现在，我已经根据数据库表本身检查了用户名和密码的值，一切都是正确的。我知道存储在 aspnet 表中的密码已经过加盐和散列，所以我正在检查我创建的临时表中的值以保存明文。这是正确的。此外，在上面的代码中，FormsAuthentication.SetAuthCookie 方法要求输入用户名和密码——在本例中，用户名是电子邮件地址。在调试期间检查时，此信息也是正确的。

我应该指出，我们发送的链接几乎是一次性链接。每次更改与该特定用户相关时，链接参数的值都会更改，旧链接将完全无用。他们将被重定向到的页面将包含与该特定用户直接相关而不与其他用户直接相关的文档。

但是，我们仍然需要 Asp.Net Membership、Profiles 和 Roles 框架的好处，因为“访问者”很可能有几个链接发送给他们，随着时间的推移，不同的文档和文档版本会被添加和更改。

谁能想到更好的方法？到目前为止，我已经在[这里](https://stackoverflow.com/search?q=[asp.net]+auto+login)和[这里](https://stackoverflow.com/search?q=[asp.net]+automated+login)查看了大多数相关条目，但它们似乎都有些不完整。

**编辑**

[使用从此处](https://stackoverflow.com/questions/2730020/membership-validateuser-always-returns-false-after-upgrade-to-vs-2010-net-4-0)接受的答案中收集的信息，我似乎至少部分解决了这个问题

本质上，问题是我的 web.config 成员资格部分需要被告知要使用哪种散列算法。目前，我不知道默认的是什么，如果有的话，但是添加

```
<membership hashAlgorithmType="SHA1"> 
```

到 web.config 至少允许我登录添加上述行后创建的用户。下一步是让我了解为什么我无法让其他用户登录。

但是，我仍然收到 Joe 建议的 ThreadAbortException，我现在正忙于解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T15:38:47.113

我不确定我是否完全理解您的问题，但调用`FormsAuthentication.SetAuthCookie`本质上会以编程方式登录用户。

> 此外，在上面的代码中，FormsAuthentication.SetAuthCookie 方法要求输入用户名和密码

不，SetAuthCookie 需要用户名，但不需要密码。

在您的示例代码中，调用`Response.Redirect`将抛出一个`ThreadAbortException`，以便您的 catch 块将执行。也许这让你感到困惑。

回应评论：

> 本质上，我遇到的问题是用户似乎没有登录。FormsAuthenticate 方法返回 false

上面的代码中没有`FormsAuthenticate`方法。

话虽如此，我不明白您为什么要`Membership.ValidateUser`在这种情况下尝试对用户 ( ) 进行身份验证。我原以为您想找到与查询字符串关联的用户名，然后简单地打电话`FormsAuthentication.SetAuthCookie`让他登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:14:11.213

> 我知道存储在 aspnet 表中的密码已经过加盐和散列，所以我正在检查我创建的临时表中的值以保存明文。这是正确的。此外，在上面的代码中，FormsAuthentication.SetAuthCookie 方法要求输入用户名和密码——在本例中，用户名是电子邮件地址。在调试期间检查时，此信息也是正确的。

请不要以纯文本形式存储密码或任何密码。

> 本质上，我遇到的问题是用户似乎没有登录。FormsAuthenticate 方法返回 false。

您是否 100% 确定这根本不是 cookie 问题？

您似乎应该能够提供存储的密码哈希和用户名并登录到所述用户帐户。只需覆盖散列“密码”的方法，而是将受保护的密码转发到身份验证系统。

# notepad++ - 如何在 NP++ 中保持我的风格主题？

> ID：10655501
> 
> 赞同：24
> 
> 时间：2012-05-18T15:29:21.020
> 
> 标签：notepad++

我使用 Notepad++ 已经有一段时间了，我真的很喜欢 Monokai 主题，它对字体进行了一些自定义调整。但是由于某种原因，每次我关闭 NP++ 并关闭计算机时；下次我打开我的 NP++ 时，它已恢复为原始主题。每次上班时都必须重新设置我喜欢的风格，这有点过时了。

有谁知道为什么会发生这种情况以及我该如何解决？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-02T15:43:28.420

发生这种情况是因为您没有以管理员身份运行该程序。在 Windows 7 上，右键单击快捷方式并选择“以管理员身份运行”。对样式进行更改，照常保存并关闭程序。更改将在下一次开始时出现。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-21T12:36:52.067

**这是一个简单的问题。保存配置需要文件夹写入许可。**

> 更改 c:\program files(x86)\notepad++ 许可
> 
> 或者
> 
> 以管理员身份运行 Notepad++

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-15T12:45:28.210

我遇到了同样的问题。

我发现：**以管理员身份运行记事本++，**它将保留更改。之后，您可以作为普通用户运行（所做的更改将重新加载）。

我认为这可能是文件权限问题。这些配置保存为 .xml 文件，只有管理员有权修改。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-24T02:24:31.717

您是否尝试过将更改直接保存在 NotePad++ 配置文件中？我没有保存我的自定义文件扩展名时遇到了同样的问题。每次我重新启动时，“样式配置器”中的自定义扩展都会消失。在我将它们添加到 styles.xml 文件后，它们成为默认值。

在您的情况下，您必须编辑 stylers.xml 文件的相关部分，更改要更改的颜色的颜色值。

Test that. If after the reboot the file was reset, then I think your operating system is restoring the files to the original state at every boot (wich just seems weird), but I've seen it before :/

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-30T04:12:50.927

好的，经过 35 分钟的小提琴，你实际上必须应用全局效果，然后

1.  选择 HTML 或 CSS 或（无论你在做什么）
2.  编辑 HTML 或 CSS ，然后
3.  保存之前，向左看并添加您的“用户分机：”

节省。

注意*要保存为原始主题，请转到保存主题的位置，然后复制粘贴第二个副本，编辑第二个副本，请按照上述步骤操作！分享财富！！[在此处输入图片描述][1]

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-06-05T15:47:07.187

我相当确信我遇到的问题是 Notepad++ 中的一个功能/错误，当您使用不同的凭据运行它时，它与保存设置有关，具体取决于具体情况。仅以“管理员”身份运行可能是一种解决方法，但它故意绕过安全性，并且它还摆脱了例如使用不同颜色来指示您在哪些权限下运行应用程序的能力第一名。

与大多数日子不同，我在以普通用户身份使用 Notepad++（单击其图标，或从以`cmd.exe`普通用户身份执行的快捷方式执行它）和以管理员身份运行它（单击我创建的快捷方式勾选“以管理员身份运行”选项，或从`cmd.exe`类似创建的快捷方式中），今天我使用的是我创建的专用 Visual Studio 命令提示符，它以*本地*管理员的身份在单独的凭据下运行。我所有的设置都消失了。

我尝试了各种方法，但似乎都没有多大帮助，但这似乎（到目前为止）对我有帮助：在`Settings > Style Configurator`窗口中，除了所有颜色设置外，还有一个标有“选择主题：”的下拉菜单。在玩了一下之后，我终于注意到主题已更改为默认主题，而我一直在使用其中一个深色主题。所以，我又回到了它，（耶！！！）我的设置似乎仍然保存在它下面。

现在，公平地说，UAC 的工作方式是，当您“以管理员身份”运行时，您的凭据仍将显示为`DOMAIN_OR_PC_NAME\USER_NAME`（例如，`whoami`在命令提示符下），并且我相信您的环境仍然显示相同。因此，在这种情况下，我看到 Notepad++ 的参数要么表现得像它那样（通过使用您的个人 AppData 目录）。

然而——<em>这就是为什么我认为它**可能**是一个错误，尽管我还没有完成足够的故障排除来 100% 自信地说它是，所以我不会——今天，我实际上是在一个`cmd.exe`直接在本地管理员帐户下运行的快捷方式。实际上，我只是能够通过`shift`单击`cmd.exe`快捷方式、选择`Run as a different user`并以本地管理员身份登录来验证行为。现在，`whoami`显示“MY_COMPUTER_NAME\LOCAL_ADMIN_USER_NAME”，%USERPROFILE% 显示为“C:\USERS\LOCAL_ADMIN_USER_NAME”，但是，当我加载 Notepad++ 时，它似乎正在从我的用户帐户中提取/推送设置。

所以，这就是我将要做的事情，直到我可以确定并希望修复： 1\. 将 Notepad++`AppData`目录重新置于修订控制之下，所以如果它被冲洗，我可以恢复更改。（我也可以尝试将其设为只读。） 2\. 在`Settings > Preferences`页面`Multi-Instance`上，在`Multi-instance settings`我已选择`Always in multi-instance mode`. 我已经验证，当我选择此模式时，我原来的 Notepad++ 将保持原来的设置，即使我从另一个用户打开。这样，如果我首先在不同的帐户下运行，我有机会 (a) 退出该帐户加载的设置错误的帐户，(b) 在样式配置器中进行微不足道的更改，以及 ( c) 再次保存设置。而且，3\. 我将在配置器中选择一个不同的主题，同时在每个不同的帐户中加载 Notepad++，这样希望我对每个帐户所做的更改都会坚持下去，而我要做的最多就是更改那个下拉列表解决问题。

还有一些问题，例如，当我这样做时，前三次我在本地管理员帐户下打开 Notepad++，它打开了三组完全不同的文件，或者更准确地说，第一次没有文件组，并且然后是两个不同的集合，我不确定它们是从哪里得到的，因为它似乎与从用户模式或正常`Run as administrator`模式下运行的集合不同；但我没有仔细看，因为我没想到会出现这种行为。一旦我有机会进行更多故障排除，并假设我能找到重现所有问题的好方法，我打算在 Notepad++ 错误跟踪器中提交一张票；这是一个很棒的产品，从我读过的错误报告来看，他们似乎更愿意在出现真正问题时尝试解决问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-07T15:08:46.533

我有同样的问题，没有看到我在这里应用的解决方案，它有效。出于某种原因，`Start In`Notepad++.exe 属性上的框指向一个`AppData\Temp\2\nppLocalization`文件夹，但这是在另一个用户帐户的配置文件中，而不是我的。此文件夹也不存在。

所以我清理了`Start In`盒子，这为我解决了这个问题。

*   右键单击资源管理器中的`NotePad++.exe`文件
*   选择`Shortcut`选项卡
*   清除该`Start In`框。
*   重启记事本++

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-08T00:19:44.247

很长一段时间以来，我一直在处理 N++ 的这种令人讨厌的行为。

最后，帮助我立即设置（不修复错误）的只是手动覆盖设置。

**您所要做的就是**用您想要的样式`C:\Program Files (x86)\Notepad++\user.manual\Notepad++\stylers.xml`的xml代码或XML替换其中的内容。`C:\Program Files (x86)\Notepad++\themes\Black board.xml`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-03T16:55:10.103

在 Windows 7 Pro 上以标准用户身份登录时，我遇到了类似的问题。作为标准用户，没有可用的主题。如果我以管理员身份运行或以管理员身份登录，则主题可用并且可以保存更改。我发现在我的标准用户帐户下，我的帐户的 AppData 目录中没有“主题”文件夹（C:\Users\myusername\AppData\Roaming\Notepad++）。我登录到我的管理员帐户，发现主题文件夹在那里。我将它从我的 Admin AppData 目录复制到我的标准用户之一。主题现在可用并保存设置。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-07T14:33:54.960

由于我没有安装文件夹的管理员权限，为了让它工作，我手动编辑了位于 C:\Users\username\AppData\Roaming\Notepad++ 目录中的“langs.xml”文件......这需要被打开和编辑。在 xml 中手动添加扩展名。保存，重新打开 NP++ ...瞧。

我想要与 C++ 语言风格相关的 inc、int、mdl...

改变这个… 语言名称="cpp" ext="h hpp hxx cpp cxx cc" commentLine="//" commentStart="/ *"* commentEnd=" /"

……到这个……（带有你的扩展）

```
 Language name="cpp" ext="h hpp hxx cpp cxx cc int inc mdl" commentLine="//" commentStart="/*" commentEnd="*/" 
```

扩展名应显示在您的“默认分机”中。现在在样式配置器中列出您想要与扩展关联的语言。

希望有帮助！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-20T12:28:46.650

尝试从以下位置复制 XML 文件：c:\Users\USER_NAME\appdata\Roaming\Notepad++\

它适用于我的情况。记事本将所有样式更改和配置保存在那里。享受。

# perl - How do you determine if a column has UNIQUE constraint set in an SQLite database?

> ID：10655506
> 
> 赞同：0
> 
> 时间：2012-05-18T15:29:36.480
> 
> 标签：perl, sqlite, constraints, unique

I am writing a Perl based application that converts an SQLite database into an Excel workbook and back again. It works as is, but is missing one small piece. I do not know how to determine if the UNIQUE constraint has been set for a specific column.

To get a list of tables in a database, I use:

```
select name from sqlite_master 
  where type = 'table' 
  and name <> 'sqlite_sequence' order by name; 
```

Then to get column and constraint information for each table, I do:

```
PRAGMA table_info($TableName); 
```

This tells me everything I need to know except if a column has the UNIQUE constraint enabled.

In case this is not clear, here is a trivial example. Suppose I create a database table by doing this:

```
CREATE TABLE DATA 
(
    ID integer primary key, 
    Invoice integer unique, 
    Product varchar, 
    Comment varchar
); 
```

I want to know how I can subsequently interrogate the SQLite database table created in this manner to determine which columns have the UNIQUE constraint set. In this case, it would be the Invoice column.

Any suggestions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:09:40.453

You need to use a the `PRAGMA index_list` statement.

This subroutine determines the value of the `unique` attribute, given a database handle and a table and column name.

```
sub column_unique {
  my ($dbh, $table, $column) = @_;
  my $sth = $dbh->prepare("PRAGMA index_list($table)");
  $sth->execute;
  my $rec = $sth->fetchall_hashref('name');
  return $rec->{$column} && $rec->{$column}{unique};
} 
```

If the column appears in the `index_list` pragma for the table, the value of the `unique` attribute (either `'0'` or `'1'`) is returned. If not then `undef` is returned. This allows calls like

```
if (column_unique($dbh, 'DATA', 'Invoice')) { ... } 
```

* * *

**Edit**

My apologies, my first answer was wrong. SQLite allows only *indexes* to be declared unique, and those indexes can be multi-column combinations. This revised subroutine looks at the composition of each *unique* index for the table and checks whether the given column is all or part of it.

This isn't very satisfactory, as being a part of a unique index doesn't say much about the column itself, but any improvement would depend on what you want to use the information for.

```
sub column_unique {

  my ($dbh, $table, $column) = @_;

  my $sth = $dbh->prepare("PRAGMA index_list($table)");
  $sth->execute;
  my $list = $sth->fetchall_hashref('name');

  foreach my $index (keys %$list) {

    next unless $list->{$index}{unique};

    my $sth = $dbh->prepare("PRAGMA index_info($index)");
    $sth->execute;
    my $info = $sth->fetchall_hashref('name');

    return 1 if $info->{$column};
  }

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-22T13:07:00.243

Run this query:

```
SELECT
  m.tbl_name AS table_name,
  il.name AS key_name,
  ii.name AS column_name
FROM 
  sqlite_master AS m, 
  pragma_index_list(m.name) AS il, 
  pragma_index_info(il.name) AS ii 
WHERE 
  m.type = 'table' AND 
  il.origin = 'u' 
ORDER BY table_name, key_name, ii.seqno; 
```

This should produce something like:

```
table_name | key_name                | column_name
-----------+-------------------------+------------
data       | sqlite_autoindex_data_1 | Invoice 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-16T14:46:04.963

I needed the same and I thinks this is the easiest solution:

> SELECT (SELECT name FROM pragma_index_info(pmi.name)) AS UniqueColumn
> 
> FROM pragma_index_list(tablename) AS pmi

It works for both the unique constraint and the primary key constraint, which is also an implicit unique constraint.

# eclipse - 如何让 eclipse 使用安装在应用程序服务器上的 jars

> ID：10655508
> 
> 赞同：0
> 
> 时间：2012-05-18T15:29:41.010
> 
> 标签：eclipse, jar, buildpath, geronimo

嗨，我使用 eclipse 和 geronimo 应用服务器 2.1

我已经将 EAR 的 lib 文件夹中保存的一些 Jars 安装到服务器并从 EAR 中删除了它们。但是eclipse不会承认它们的存在。我已经添加了此处描述的依赖项： [https ://cwiki.apache.org/GMOxDOC22/adding-jars-to-the-geronimo-repository.html](https://cwiki.apache.org/GMOxDOC22/adding-jars-to-the-geronimo-repository.html)

我认为它可能与java构建路径中的服务器运行时环境下没有出现的jar有关。

谁能帮我让eclipse识别服务器上的那些罐子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-22T17:13:46.140

用更多的知识回顾这个问题，我会手动将这些添加到eclipse中的构建路径中。

# java - 使用缓冲文件读取器读取特定数据

> ID：10655512
> 
> 赞同：0
> 
> 时间：2012-05-18T15:29:57.573
> 
> 标签：java, filereader, buffered

我试图从一个文本文件中连续获取第三组数据（类型=双），然后将其相加得到总数。我的问题是我无法弄清楚如何使用缓冲文件阅读器从一行中获取特定的数据。我知道如何得到这条线，但解析数据是个谜。我将我的代码放在下面，以防它可能有助于提供更多上下文。谢谢！

编辑：请耐心等待。从字面上看，我在学习 Java 的第一个月内。我必须使用缓冲阅读器。这是一个学校项目。我应该使用“拆分”吗？如果是这样，我可以将“下一个拆分”或其他内容存储到数组中吗？

## 清单.txt

```
Int           string(?) double   int

PropertyID    Type    Cost     AgentID --(Not in the file. The file only has the data)

100000       Farm    500000.00   101

100001       Land    700000.00   104 
```

## 代码

```
 package overview;

    import java.io.*;
    import java.util.*;
    import java.lang.*;
    import java.nio.*;

    public class Overview {

        public static void main(String[] args) throws FileNotFoundException {

            // TODO code application logic here
            int count = 0;  
            double totalCost=0.00;
            ArrayList<Double> propertyID = new ArrayList();

            //Get file name
            Scanner console = new Scanner(System.in);
            System.out.print ("Please enter file name: ");
            String inputFileName = console.next();
            File inputFile = new File(inputFileName);

            // Get the object of DataInputStream
            FileInputStream fstream = new FileInputStream(inputFile);
            DataInputStream in = new DataInputStream(fstream);

            BufferedReader reader = new BufferedReader(new InputStreamReader(in));
            String line;

            try {
                while ((line = reader.readLine()) != null) 
                {
                    double x = Double.parseDouble(line.split(" ")[]);
                    propertyID.add(x);;
                    totalCost = Double.parseDouble(line.split(" ")[8]);
                    count++;
                }
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        finally {

            System.out.println("Total properties in list: " + count + "\n"+ "The total cost is: " +totalCost);}
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:47:51.260

这是一个有效的示例（没有文件）：

```
private static final String data = "100000    Farm    500000.00    101\n100001    Land    700000.00    104";

public static void main(String[] args) throws FileNotFoundException {
    int count = 0;
    double totalCost = 0;

    BufferedReader reader = new BufferedReader(new StringReader(data));
    String line;

    try {
        while ((line = reader.readLine()) != null) {
            StringTokenizer stok = new StringTokenizer(line);
            int propertyId = Integer.parseInt(stok.nextToken());
            String type = stok.nextToken();
            double cost = Double.parseDouble(stok.nextToken());
            int agentId = Integer.parseInt(stok.nextToken());

            totalCost += cost;
            count++;
        }
        // close input stream
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    finally {
        System.out.println("Total properties in list: " + count + "\nTotal cost is: " + totalCost);
    }
} 
```

# batch-file - 我想将 ASCII 文件的行设置为等于批处理文件中的变量

> ID：10655516
> 
> 赞同：0
> 
> 时间：2012-05-18T15:30:18.563
> 
> 标签：batch-file

在我的名为 inputfile.txt 的 ascii 文件的第五行，在我的第 5 行，我有以下文本

```
Filename example_file.txt 
```

我想要做的是打开 inputfile.txt 并读取第 5 行，以便我使用文件名设置一个变量。相当于以下行：

```
Set "FILENAME=example_file.txt" 
```

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:32:54.790

您可以使用以下内容（未经测试，但总体思路很清楚）：

```
for /f "tokens=1*" %%a in ('more +5 inputfile.txt') do set "FILENAME=%%b"&goto afterfor
:afterfor 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:36:44.617

```
@echo off
for /f "skip=4 tokens=1*" %%A in (inputfile.txt) do (
  set "%%A=%%B"
  goto :break
)
:break 
```

# android - 如何在 OpenGL ES 1.1 游戏中创建酷炫的 gui 效果？

> ID：10655523
> 
> 赞同：-3
> 
> 时间：2012-05-18T15:30:55.307
> 
> 标签：android, user-interface, opengl-es

我正在使用 OpenGL ES 1.1 创建一个 2d android 游戏，但我没有使用游戏引擎。我使用的是我自己的框架。

我想知道人们如何为他们的游戏创建很酷的 gui？它的所有部分都只是绘图吗？

另外，我如何在屏幕之间创建很酷的过渡？它的方法是什么？也许有任何库或方法可以做到这一点？

编辑：看那个视频，当他接触到演职员表时，屏幕之间会有一个过渡。这就是我的意思是屏幕之间的过渡。

[http://youtu.be/JdfgGMBvqTk?t=4m54s](http://youtu.be/JdfgGMBvqTk?t=4m54s)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:47:37.157

如果你想要一个很酷的 GUI，如果你的 GIMP 或 PS 技能不够，我建议你与图形设计师联系。转换是代码和图形的组合。你必须玩弄它。例如。过渡的制作方式与制作游戏的方式相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T19:16:46.133

当人们谈论游戏“GUI”时，他们通常会谈论 HUD 或游戏图形。HUD是覆盖游戏的界面（按钮、菜单、计数器等）；游戏图形是用于绘制地形、游戏角色、武器等的图像。两者都由艺术家绘制并提供给需要弄清楚如何将它们放入游戏中的程序员。我建议你听从 Artur 的建议，学习一个开源游戏引擎。您将学习如何设计您的游戏，并且您将学习如何更快地对其进行编程。这里列出了数十种适用于 Android 的免费游戏引擎：[http ://www.mobilegameengines.com/android](http://www.mobilegameengines.com/android)

# sql - 对表进行分片以分发 ORACLE SQL

> ID：10655524
> 
> 赞同：0
> 
> 时间：2012-05-18T15:31:01.980
> 
> 标签：sql, oracle, fragmentation

是否有任何 sql 子集专门处理水平分割表以进行分发？

我必须分割要在商店之间分发的库存表。我不是在寻找一个完整的解决方案，只是朝着正确的方向点头。

我找到了一个与我想要的类似的 IBM 示例（我认为）

```
CREATE TABLE Tab1 (Col1 INT...)
   FRAGMENT BY RANGE (Col1 MIN 100 MAX 200)
      IN db1, db2, db3, db4; 
```

但我需要一个 Oracle 示例（最高 11g2）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:02:39.243

如果您希望将数据分布在不同的 Oracle 数据库之间（即每个商店都安装一个 Oracle 数据库实例），您通常可以通过在每个商店的数据库中创建物化视图来实现这一点，其中包括关于该商店的任何数据的谓词需要访问。

如果您希望数据分布在同一数据库中的多个段中，您可以使用@tbone 在他的评论中建议的分区。例如，从[CREATE TABLE](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_7002.htm#i2146287)文档中，您可以创建一个`SALES`按季度分区的表。

```
CREATE TABLE range_sales
    ( prod_id        NUMBER(6)
    , cust_id        NUMBER
    , time_id        DATE
    , channel_id     CHAR(1)
    , promo_id       NUMBER(6)
    , quantity_sold  NUMBER(3)
    , amount_sold         NUMBER(10,2)
    ) 
PARTITION BY RANGE (time_id)
  (PARTITION SALES_Q1_1998 VALUES LESS THAN (TO_DATE('01-APR-1998','DD-MON-YYYY')),
   PARTITION SALES_Q2_1998 VALUES LESS THAN (TO_DATE('01-JUL-1998','DD-MON-YYYY')),
   PARTITION SALES_Q3_1998 VALUES LESS THAN (TO_DATE('01-OCT-1998','DD-MON-YYYY')),
   PARTITION SALES_Q4_1998 VALUES LESS THAN (TO_DATE('01-JAN-1999','DD-MON-YYYY')),
   PARTITION SALES_Q1_1999 VALUES LESS THAN (TO_DATE('01-APR-1999','DD-MON-YYYY')),
   PARTITION SALES_Q2_1999 VALUES LESS THAN (TO_DATE('01-JUL-1999','DD-MON-YYYY')),
   PARTITION SALES_Q3_1999 VALUES LESS THAN (TO_DATE('01-OCT-1999','DD-MON-YYYY')),
   PARTITION SALES_Q4_1999 VALUES LESS THAN (TO_DATE('01-JAN-2000','DD-MON-YYYY')),
   PARTITION SALES_Q1_2000 VALUES LESS THAN (TO_DATE('01-APR-2000','DD-MON-YYYY')),
   PARTITION SALES_Q2_2000 VALUES LESS THAN (TO_DATE('01-JUL-2000','DD-MON-YYYY')),
   PARTITION SALES_Q3_2000 VALUES LESS THAN (TO_DATE('01-OCT-2000','DD-MON-YYYY')),
   PARTITION SALES_Q4_2000 VALUES LESS THAN (MAXVALUE))
; 
```

# javascript - 检测 img src 更改

> ID：10655531
> 
> 赞同：17
> 
> 时间：2012-05-18T15:31:24.273
> 
> 标签：javascript, image, onchange, src

我正在尝试检测图像的来源是否已更改。

在我的情况下，src 是从 jquery 更改的，我无权更改 jquery 文件。所以我试图检测来自 img 元素的 src 变化。

如果更改了src，我想查看源代码，仅用于测试

这是我当前的代码：

```
var divimg = document.getElementById("img_div");
divimg.onchange = alert(divimg.getElementsByTagName('img')[0].src); 
```

在页面上加载警报反应并向我显示 src，但不是从 jquery 更改 src

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-08-13T20:01:35.183

```
var img = document.querySelector("#img_div img"),
observer = new MutationObserver((changes) => {
  changes.forEach(change => {
      if(change.attributeName.includes('src')){
        console.dir(img.src);
      }
  });
});
observer.observe(img, {attributes : true}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-18T15:35:01.827

[你可以这样做，但是只有实现DOM 突变事件](https://developer.mozilla.org/en/DOM/Mutation_events)的新浏览器才会支持它......

```
divimg.addEventListener("DOMAttrModified", function(event) {
    if (event.attrName == "src") {
       // The `src` attribute changed!
    }
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-18T15:48:20.160

每次`src`更改属性时，浏览器都会立即关闭并获取图像。一旦图像返回到浏览器，浏览器将触发`loaded`图像元素上的事件。因此，您可以通过在此事件上设置回调来有效地监控`src`变化。您可以执行类似于以下代码示例的操作。

```
var img = $("<img />");
img.load(function() { console.log("loaded"); });
img.attr("src", "http://static.adzerk.net/Advertisers/ecc536e9e1204b7faccb15621f27d7bc.jpg"); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-18T15:37:11.630

`DOMAttrModified`可能会起作用，对此我一无所知……但 onload 对我来说绝对没问题。这是演示的小提琴。[http://jsfiddle.net/QVqhz/](http://jsfiddle.net/QVqhz/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-02T23:35:09.043

**分析**

1.  `load`更改或设置`src`的属性时触发事件`<img />`

2.  如果用户没有在 中写入`src`属性`<img />`，浏览器会自动填写`src`属性（*例如 data:image/png;base64,...*）以防止 204 错误。这也会触发`load`事件。

**结论**

1.  基本上使用`load`事件，但检查它是否是默认图像。（*可能，默认图像为 1 x 1 像素*）

    *   假设 - 您的图像大于 1 x 1 像素

**解决方案**

```
$('img').load(function() {
    var imageObj = $(this);
    if (!(imageObj.width() == 1 && imageObj.height() == 1)) {
        console.log('Image source changed');
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T15:37:59.703

我认为没有事件，您可以创建自己的“事件”：

```
var divimg = document.getElementById("img_div"),
    prevSrc;
setInterval(function() {
    if (divimg.src != prevSrc) {
        prevSrc = divimg.src;
        onSrcChange();
    }
}, 1000); // 1000ms = 1s

function onSrcChange() {
    // do something
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-29T18:45:28.030

我相信 jQuery 应该永远是要走的路，因为它支持跨浏览器。然而，“.load()”函数自[jQuery 1.8](https://api.jquery.com/category/deprecated/deprecated-1.8/)起已被弃用。

今天我们应该像下面的例子一样使用“.on()”函数：

```
$('img.my-image-class-name').on('load', function(){
  console.log('Hello, world');
}); 
```

如果您尝试使用“.load()”函数，您的代码将无法正常工作。您将收到以下错误消息：

> **未捕获的 TypeError：a.indexOf 不是函数**

# nunit - mstest XML 文件数据源的 nUnit 等效项是什么？

> ID：10655535
> 
> 赞同：1
> 
> 时间：2012-05-18T15:31:44.710
> 
> 标签：nunit, mstest

我正在将一些测试从 mstest 转移到 nUnit。MsTest 允许指定一个 XML 文件作为测试的输入数据：

```
[TestMethod()]
[DeploymentItem("ProjectName\\TestData\\file.xml")]
[DataSource("Microsoft.VisualStudio.TestTools.DataSource.XML",
       "|DataDirectory|\\TestData\\file.xml",
       "Row", 
       DataAccessMethod.Sequential)]
public void Test() {} 
```

如何在 nUnit 中进行类似的测试设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:47:08.923

NUnit 不直接支持读取自定义 xml 文件。但是，它确实支持指定一种方法（有关示例，请参阅[TestCaseSource 属性](http://nunit.org/index.php?p=testCaseSource&r=2.6)的文档），该方法将为参数化测试计算测试用例输入。

您可以实现此方法以从 XML/CSV 或您选择的任何自定义逻辑中读取输入。

# python - 关闭 django mysql 连接

> ID：10655536
> 
> 赞同：2
> 
> 时间：2012-05-18T15:31:46.957
> 
> 标签：python, mysql, django

我有一个连接到多个数据库（超过 400 个）的 django 应用程序。数据库凭据经常更改。我不能使用 django 数据库支持，因为它需要静态设置。

所以我在加载返回游标的页面时创建了动态数据库连接。

我有以下问题：

*   这是释放游标的适当方式吗（使用析构函数**__ *del* _** ）
*   如果我直接使用 close() 方法，我的析构函数是否安全
*   我应该为连接对象做类似的事情，还是只关闭光标就足够了？
*   有没有建议的标准解决方案？

    ```
    class MyDatabaseManager(object):
        def __init__(self, database_name):
            self.cursor = None
            #for safety in case next command return an exception
            self.cursor = some_object.get_cursor(database_name)

        def close(self):
            self.cursor.close()
            self.cursor = None

        def __del__(self):
            if not (self.cursor is None):
                self.close()

        def execute_query(self, sql_query, parameter_list):
            return self.cursor.execute(sql_query, parameter_list) 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:45:55.030

普遍的共识似乎是不使用**__del__**。回顾[以前的](https://stackoverflow.com/questions/6104535/i-dont-understand-this-python-del-behaviour) [答案](https://stackoverflow.com/questions/1935153/del-method-being-called-in-python-when-it-is-not-expected)：

1.  不能假定它会被调用或何时调用。
2.  **del**关键字不会导致调用 __del__ 。
3.  它可能会导致垃圾收集无法正常工作（内存泄漏）。
4.  改用显式方法（手动调用清理函数）或弱引用。

那应该回答您的问题 1、2 和 4。至于 3\. 问题：如果您使用的数据库适配器符合 python [dbapi2](http://www.python.org/dev/peps/pep-0249/)（dbms 适配器的流行形式），那么关闭游标并不意味着应该关闭连接. 因此，即使所有创建的游标都已关闭，连接仍保持打开状态，这是正确的，我会说。

# iphone - 线程1：MFMailComposeViewController 的dismissModalViewController 上的EXEC_BAD_ACCESS（试过iOS 5.1、5、4.3）

> ID：10655540
> 
> 赞同：1
> 
> 时间：2012-05-18T15:31:52.920
> 
> 标签：iphone, ios, mfmailcomposeviewcontroller, exc-bad-access

好吧，这已经困扰我一段时间了......

我已经检查过了，所有其他问题/答案都与非 ARC 项目有关。

每当我展示 MFMCvc 并快速取消消息时，我都会在 iPhone 上收到 Thread1:EXEC_BAD_ACCESS 错误消息。在 iPad 上运行良好，或者如果我让它静置一会儿（比如 30 秒或更长时间）

有什么建议吗？（除了设置一个计时器并且在计时器结束之前不解雇？）

顺便说一句，我对 MFMessageComposeViewController 做同样的事情，它在 iPhone 和 iPad 上都可以正常工作。

这是我展示它的代码

```
if (([action isEqualToString:@"EMail"]) && contact.length>0)
{
    MFMailComposeViewController *mailViewController = [[MFMailComposeViewController alloc] init];
    if([MFMailComposeViewController canSendMail]) {
        [mailViewController setSubject:@""];
        [mailViewController setMessageBody:@"" isHTML:NO];
        [mailViewController setToRecipients:[NSArray arrayWithObject:contact]];
        [mailViewController setMailComposeDelegate:self];
        [self presentModalViewController:mailViewController animated:NO];
    }
} 
```

这就是我忽略它的地方

```
-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
    {
        switch (result)
        {
            case MFMailComposeResultCancelled:
            {
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Send EMail" message:@"EMail Has Been Cancelled"
                                                               delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
                [alert show];
            }
                break;
            case MFMailComposeResultFailed:
            {
                NSLog(@"Error");
            }
                break;
            case MFMailComposeResultSent:
            {
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Send EMail" message:@"EMail Has Been Sent"
                                                               delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
                [alert show];
            }
                break;
            case MFMailComposeResultSaved:
            {
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Send EMail" message:@"EMail Has Been Saved"
                                                               delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
                [alert show];
            }
                break;
            default:
                break;
        }
        [self dismissModalViewControllerAnimated:NO];
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T18:20:23.533

1) 行：`[self dismissModalViewControllerAnimated:NO];`- 是否需要：`[controller dismissModalViewControllerAnimated:NO];`？您想要关闭 MFMailComposeViewController。

2) MFMailComposeViewController 未保留也可能存在问题。当我使用这个类时，我为控制器创建了一个属性。这可能值得一试。

```
// in the interface definition
 @property (nonatomic, strong) MFMailComposeViewController* mailComposer; 
```

接着

```
// at creation time
if (([action isEqualToString:@"EMail"]) && contact.length>0)

if(![MFMailComposeViewController canSendMail]) return; // bail early if can't send mail

MFMailComposeViewController *mailViewController = [[MFMailComposeViewController alloc] init];
[mailViewController setSubject:@""];
[mailViewController setMessageBody:@"" isHTML:NO];
[mailViewController setToRecipients:[NSArray arrayWithObject:contact]];
[mailViewController setMailComposeDelegate:self];
[self presentModalViewController:mailViewController animated:NO];

[self setMailComposer: mailViewController];
// if not using ARC then:  [mailViewController release]; 
```

然后在 didFinish

```
 [[self mailComposer] dismissModalViewControllerAnimated:YES];
 [self setMailComposer: nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:39:18.833

将**[self dismissModalViewControllerAnimated:NO]**移动到 didFinishWithResult 函数的顶部。换句话说，在显示警报视图之前关闭邮件视图。我不确定这是否会消除您的崩溃，但无论如何，您应该这样做。

# windows - Chrome 进程的 Chrome 任务管理器信息与 Windows 任务管理器信息不一致的原因是什么？

> ID：10655545
> 
> 赞同：2
> 
> 时间：2012-05-18T15:32:15.260
> 
> 标签：windows, multithreading, google-chrome, process

我注意到 google chrome 任务管理器显示的进程的 mem 使用与 windows 任务管理器中 chrome 进程的 mem 使用不一致。例如，在下图中，Chrome 任务管理器显示最大的内存消耗进程（chrome 将其称为页面）是“Plug-in:Showkwave Flash”，容量为 70,600K。在 Windows 任务管理器中，最大的 mem 吃 chrome 进程显示有 79,364K。还有一个在 77K 范围内。为什么以及如何出现这种不一致。是否与 Windows 任务管理器计算每个进程的内存使用量所需的某种开销有关？或者它与chrome本身有关。

另一个问题：Windows 任务管理器中总是列出了一个额外的“Chrome”进程。即在下图中，Chrome 任务管理器列出了 15 个“页面”，而 Windows 任务管理器列出了 16 个 chrome“进程”（我在这里不包括 chrome_frame_helper.exe。我猜它不是本机 chrome 进程。）这背后的原因是什么。

![在此处输入图像描述](../Images/6fa6afd36d40375a44e7424388d07b8f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:36:04.353

Chrome 可能会查询自己的进程以获取更准确的内部数据结构信息，而不是仅使用进程使用的外部可见内存（这也包括运行时的开销）。

至于为什么有一个额外的过程：作业是选项卡和插件容器的渲染过程。另外一个是选项卡周围的窗口框架。

# java - android.content.res.Resources$NotFoundException

> ID：10655546
> 
> 赞同：4
> 
> 时间：2012-05-18T15:32:17.693
> 
> 标签：java, android, error-handling

```
@Override
public void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    setContentView(R.layout.screenlocked);

    //Retrieve stored ID
    final String STORAGE = "Storage";  
    SharedPreferences unique = getSharedPreferences(STORAGE, 0);
    LoginID = unique.getString("identifier", "");

    //Retrieve stored phone number
    final String phoneNumber = unique.getString("PhoneNumber", "");
    phoneView = (TextView) findViewById(R.id.phone);
    phoneView.setText(phoneNumber.toString());

    //Retrieve user input
    input = (EditText) findViewById(R.id.editText1);
    userInput = input.getText().toString();

    //Set login button
    login = (Button) findViewById(R.id.login);
    login.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            compareID();
        }
    });
}

public void compareID(){

    if (userInput.equals(LoginID)){
        //phone screen unlocked
        //continue
        Toast.makeText(ScreenLockActivity.this, "Success!", Toast.LENGTH_SHORT).show();
    }
    else{
        count += 1;
        input.setText("");
        Toast.makeText(ScreenLockActivity.this, count, Toast.LENGTH_SHORT).show();
    }
} 
```

我正在开发一个登录`activity`，我想记录用户尝试登录的次数，所以每次登录尝试计数都会增加一......但是当我运行活动时，这个错误出现在我的日志猫：

`android.content.res.Resources$NotFoundException: String resource ID #0x1`,

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T15:40:05.690

这是你的错误：

```
Toast.makeText(ScreenLockActivity.this, count, Toast.LENGTH_SHORT).show(); 
```

`makeText`您试图在这里调用的是作为`makeText`第二个参数的 a `resId`。请参阅[此处](http://developer.android.com/reference/android/widget/Toast.html#makeText%28android.content.Context,%20int,%20int%29)了解更多信息。由于要打印计数值，因此必须将其转换为字符串。

```
String value = String.valueOf(count);
Toast.makeText(ScreenLockActivity.this, value, Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:44:19.390

这条线应该在里面`onClick()`or `compareID()`：

```
userInput = input.getText().toString(); 
```

# asp-classic - 我如何接收 Response.Write？

> ID：10655552
> 
> 赞同：0
> 
> 时间：2012-05-18T15:32:45.713
> 
> 标签：asp-classic

这是一个非常基础的问题。。

我发现我需要使用 MSXML2.ServerXMLHTTP 来执行 GET 服务器端并且需要在 <% %> 之间进行调用。我相信向客户端返回信息的唯一方法是使用 Response.Write

如果我 Response.Write 一个 JSON 块，我如何在客户端“接收”它并处理它？抱歉这个密集的问题，我只是习惯了 ASP.NET！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:07:39.090

您可以写入要使用的客户端脚本块。

```
<%
'Make request
'Get response, assign a variable ( strResponse )
'e.g
strResponse = "{""key"":""value""}"
%>
<script type="text/javascript">
var JSONOBJ = <%=strResponse%> // an object created could be used on client-side
alert(JSONOBJ.key);
</script> 
```

# erlang - ejabberdctl dump errors with "Too short cookie string"

> ID：10655556
> 
> 赞同：0
> 
> 时间：2012-05-18T15:32:57.117
> 
> 标签：erlang, ejabberd

When trying to run this command on Ejabberd 2.1.5-3 with Erlang R14A

`ejabberdctl dump /tmp/ejabberd1.text`

to dump the registered users from ejabberd I receive

`{error_logger,{{2012,5,17},{17,9,48}},"Too short cookie string",[]} {error_logger,{{2012,5,17},{17,9,48}},crash_report,[[{initial_call,{auth,init,['Argument__1']}},{pid,<0.19.0>},{registered_name,[]},{error_info,{exit,{"Too short cookie string",[{auth,init_cookie,0},{auth,init,1},{gen_server,init_it,6},{proc_lib,init_p_do_apply,3}]},[{gen_server,init_it,6},{proc_lib,init_p_do_apply,3}]}},{ancestors,[net_sup,kernel_sup,<0.9.0>]},{messages,[]},{links,[<0.17.0>]},{dictionary,[]},{trap_exit,true},{status,running},{heap_size,987},{stack_size,24},{reductions,871}],[]]} {error_logger,{{2012,5,17},{17,9,48}},supervisor_report,[{supervisor,{local,net_sup}},{errorContext,start_error},{reason,{"Too short cookie string",[{auth,init_cookie,0},{auth,init,1},{gen_server,init_it,6},{proc_lib,init_p_do_apply,3}]}},{offender,[{pid,undefined},{name,auth},{mfargs,{auth,start_link,[]}},{restart_type,permanent},{shutdown,2000},{child_type,worker}]}]} {error_logger,{{2012,5,17},{17,9,48}},supervisor_report,[{supervisor,{local,kernel_sup}},{errorContext,start_error},{reason,shutdown},{offender,[{pid,undefined},{name,net_sup},{mfargs,{erl_distribution,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]}]} {error_logger,{{2012,5,17},{17,9,48}},std_info,[{application,kernel},{exited,{shutdown,{kernel,start,[normal,[]]}}},{type,permanent}]} {"Kernel pid terminated",application_controller,"{application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}}"}`

I tried removing the cookie file and restarting but this didn't help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:14:32.657

Check that the cookie file has some content, you'll get this error if it is empty.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:43:14.067

Please post your cookie file content here. May the cookie's length is really too short.

Or you can grep the source code of `erlang` for finding "too short cookie string" to check what's the problem.

# 2012/5/22, the following content added.

I have greped the my erlang source code (R15B) and found the string "Too short cookie string", only in the file "auth.erl". The related codes as follows. From the source code, your file's cookie file is empty, so the error will appear.

I think there are two way to check it.

1.  You can check this by using `erlang:get_cookie() -> Cookie | nocookie` in the erlang shell.
2.  You can modify the following read_cookie file by adding debugging expression for writing the detailed cookie's directory, and compile it into *.beam file and replace the old one.

**Maybe Ejabberd has used another os's user and use another's home directory's erlang's cookie file and the other cookie file content is empty. I haven't used Ejabberd before, but have faced similar problem before in rabbitmq 2 months ago.**

```
check_cookie([Letter|Rest], Result) when $\s =< Letter, Letter =< $~ ->
    check_cookie(Rest, [Letter|Result]);
check_cookie([X|Rest], Result) ->
    check_cookie1([X|Rest], Result);
check_cookie([], Result) ->
    check_cookie1([], Result).

check_cookie1([$\n|Rest], Result) ->
    check_cookie1(Rest, Result);
check_cookie1([$\r|Rest], Result) ->
    check_cookie1(Rest, Result);
check_cookie1([$\s|Rest], Result) ->
    check_cookie1(Rest, Result);
check_cookie1([_|_], _Result) ->
    {error, "Bad characters in cookie"};
check_cookie1([], []) ->
    {error, "Too short cookie string"};
check_cookie1([], Result) ->
    {ok, lists:reverse(Result)}.

read_cookie(Name, Size) ->
    case file:open(Name, [raw, read]) of
    {ok, File} ->
        case file:read(File, Size) of
        {ok, List} ->
            file:close(File),
            check_cookie(List, []);
        {error, Reason} ->
            make_error(Name, Reason)
        end;
    {error, Reason} ->
        make_error(Name, Reason)
    end. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T22:52:14.340

The problem ended up being the version of Erlang and the version of Ejabberd were not compatible. Once I corrected the Erlang version the problem went away. Lesson here is to make sure you are running the recommended version of erlang for your ejabberd version.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-06T08:52:00.873

For me the issue was that the file: `/var/lib/rabbitmq/.erlang.cookie` was with more than 1 line:

```
LOBGMGERILECQBFOFTLL
#DGBDSDFTGLECQAFDCDR 
```

After Remove the line with the remark i could start the service

```
cat /var/lib/rabbitmq/.erlang.cookie
LOBGMGERILECQBFOFTLL 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-27T08:41:56.957

Cookie string must have some minimum length content and also the permission of `400`. In my case these were the issues once fixed those it worked.

# rspec - 为什么这个规范在它应该通过的时候却失败了？

> ID：10655559
> 
> 赞同：3
> 
> 时间：2012-05-18T15:32:59.870
> 
> 标签：rspec

我在使用 rspec 时遇到了这个错误。但是，代码应该可以通过。Rspec 抱怨的所有选择器都存在。

```
FF.FFFFFF

Failures:

  1) StaticPages Home page should have the h1 'Sample App'
     Failure/Error: page.should have_selector('h1', text:  'Sample App')
       expected css "h1" with text "Sample App" to return something
     # ./spec/requests/static_pages_spec.rb:9:in `block (3 levels) in <top (required)>'

  2) StaticPages Home page should have the base title
     Failure/Error: page.should have_selector('title', text:  "Ruby on Rails Tutorial Sample App")
       expected css "title" with text "Ruby on Rails Tutorial Sample App" to return something
     # ./spec/requests/static_pages_spec.rb:14:in `block (3 levels) in <top (required)>'

  3) StaticPages Help page should have the h1  'Help'
     Failure/Error: page.should have_selector('h1',text:  "Help")
       expected css "h1" with text "Help" to return something
     # ./spec/requests/static_pages_spec.rb:28:in `block (3 levels) in <top (required)>'

  4) StaticPages Help page should have the title 'Help'
     Failure/Error: page.should have_selector('title', text:  "Ruby on Rails Tutorial Sample App | Help")
       expected css "title" with text "Ruby on Rails Tutorial Sample App | Help" to return something
     # ./spec/requests/static_pages_spec.rb:33:in `block (3 levels) in <top (required)>'

  5) StaticPages About page should have the h1 'About us' 
     Failure/Error: page.should have_selector('h1', text:  'About Us')
       expected css "h1" with text "About Us" to return something
     # ./spec/requests/static_pages_spec.rb:41:in `block (3 levels) in <top (required)>'

  6) StaticPages About page should have the title 'About Us'
     Failure/Error: page.should have_selector('title', text:  "Ruby on Rails Tutorial Sample App | About Us")
       expected css "title" with text "Ruby on Rails Tutorial Sample App | About Us" to return something
     # ./spec/requests/static_pages_spec.rb:46:in `block (3 levels) in <top (required)>'

  7) StaticPages Contact pages should have the h1 'Contact'
     Failure/Error: page.should have_selector('h1', text:  'Contact')
       expected css "h1" with text "Contact" to return something
     # ./spec/requests/static_pages_spec.rb:53:in `block (3 levels) in <top (required)>'

  8) StaticPages Contact pages Should have the title page 'Contact'
     Failure/Error: page.should have_selector('title',
       expected css "title" with text "Ruby on Rails Tutorial Sample App | Contact" to return something
     # ./spec/requests/static_pages_spec.rb:59:in `block (3 levels) in <top (required)>'

Finished in 0.31051 seconds
9 examples, 8 failures

Failed examples:

rspec ./spec/requests/static_pages_spec.rb:7 # StaticPages Home page should have the h1 'Sample App'
rspec ./spec/requests/static_pages_spec.rb:12 # StaticPages Home page should have the base title
rspec ./spec/requests/static_pages_spec.rb:26 # StaticPages Help page should have the h1  'Help'
rspec ./spec/requests/static_pages_spec.rb:31 # StaticPages Help page should have the title 'Help'
rspec ./spec/requests/static_pages_spec.rb:39 # StaticPages About page should have the h1 'About us' 
rspec ./spec/requests/static_pages_spec.rb:44 # StaticPages About page should have the title 'About Us'
rspec ./spec/requests/static_pages_spec.rb:51 # StaticPages Contact pages should have the h1 'Contact'
rspec ./spec/requests/static_pages_spec.rb:56 # StaticPages Contact pages Should have the title page 'Contact' 
```

这是规格

```
require 'spec_helper'

describe "StaticPages" do

  describe "Home page" do

    it "should have the h1 'Sample App'" do
     get '/static_pages/home'
      page.should have_selector('h1', text:  'Sample App')
    end

    it "should have the base title" do
      get '/static_pages/home'
      page.should have_selector('title', text:  "Ruby on Rails Tutorial Sample App")
    end

    it "should not havea custom page title " do
      get '/static_pages/home'
      page.should_not have_selector('title', text:  '| Home')
    end
  end
  #end home page spec

  describe "Help page" do

    it "should have the h1  'Help'" do
      get '/static_pages/help'
      page.should have_selector('h1',text:  "Help")
    end

    it "should have the title 'Help'" do
      get 'static_pages/help'
      page.should have_selector('title', text:  "Ruby on Rails Tutorial Sample App | Help")
    end
  end

  describe "About page" do

    it "should have the h1 'About us' " do
      get '/static_pages/about'
      page.should have_selector('h1', text:  'About Us')
    end

    it "should have the title 'About Us'" do
      get '/static_pages/about'
      page.should have_selector('title', text:  "Ruby on Rails Tutorial Sample App | About Us")
    end
  end

  describe "Contact pages" do
    it "should have the h1 'Contact'" do
      get '/static_pages/contact'
      page.should have_selector('h1', text:  'Contact')
    end

    it "Should have the title page 'Contact'" do
      get '/static_pages/contact'
      #this test is passing but the code in the book is not the same as what is below
      page.should have_selector('title',
                                    text:  "Ruby on Rails Tutorial Sample App | Contact")
    end
  end
end 
```

home.html.erb 视图

```
<div> 
  <h1>Welcome to the Sample App</h1>
    <h2>This is the home page for the
      <a href="http://railstutorial.org">Ruby on Rails Tutorial</a>
      sample application
    <h2>
      <%= link_to "Sign up now!", '#', class: "btn btn-large btn-primary"%>
 </div> 

 <%= link_to image_tag("rails.png", alt:  "Rails"), 'http://rubyonrails.org' %> 
```

contact.html.erb

```
<% provide(:title, 'Contact' ) %>
<h1>Contact</h1>
<p>
  Contact Ruby on rails tutorial about he sample app at the 
  <a href="http://railstutorial.org/contact">contact page</a>
</p> 
```

about.html.erb

```
<% provide(:title,'About Us') %>
  <h1>About Us</h1>
  <p>
    <a href="http://railstutorial.orb">Ruby on Rails Tutorial</a>
    is a project to make a book and screencasts to teach web development 
    <a href="http://rubyonrails.org">Ruby on Rails</a> This
    is the sampel app for the tutorial
  </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:41:37.617

而是`get`在测试中尝试使用`visit`方法：[http ://rubydoc.info/github/jnicklas/capybara/master/Capybara/Session#visit-instance_method](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Session#visit-instance_method)

# html - 绝对元素宽度 100% 忽略填充内容框

> ID：10655561
> 
> 赞同：1
> 
> 时间：2012-05-18T15:33:01.563
> 
> 标签：html, css

我在相对容器中有一个绝对元素。绝对元素有它`width:100%`，它给出了相对容器元素的宽度。

我的目标是让绝对元素延伸到容器的 100% 之外，从左右各 40 像素。

我试图通过设置`pading left & right to 40px`相关容器以及`box-sizing: content-box;`. 问题是绝对元素不会拉伸到相对容器的 100%。相反，它仅在内容空间内延伸，不包括填充。

**编辑** 原来这仅在 Chrome 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:47:59.110

只需添加`width:132%;`和`left:0px;`

[小提琴](http://jsfiddle.net/HBGTt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:57:51.617

您需要在这里使用 jQuery 来计算带有填充的 DIV 的宽度。基本上我们需要应用 . `outerWidth()`表的DIV -

演示 - [http://jsfiddle.net/GDU7Q/](http://jsfiddle.net/GDU7Q/)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:17:26.050

如果您将每一边的填充设置为 40px，它希望相信绝对 div 的开始是从相对 div 的左侧开始，您需要设置负边距

```
<div class="outer">
    <div class="inner">
    </div>
</div>

.outer {
    position:relative;
}

.inner {
    position:absolute;
    width:100%;
    padding:0 40px;
    margin-left:-40px;
} 
```

[小提琴](http://jsfiddle.net/dQuD4/11/)

# javascript - 功能无法按 ios5 iPad 的正确顺序运行

> ID：10655564
> 
> 赞同：1
> 
> 时间：2012-05-18T15:33:12.937
> 
> 标签：javascript, jquery, css, translation

我有一组应该在 onclick 上工作的函数，然后还有一些绑定到 html5 视频事件的函数。当我在 Chrome 中测试它时它工作正常，但当我在 ios 中尝试它时，它没有。它会在将视频从屏幕上删除之前加载视频。

**JS：**

```
$(document).ready(function () {
    $('#MyT').fadeOut();
    <!--$('#myVid').addClass('move');

    $('li, .thumbs').bind('click', function() {
        $("#bigPic").removeClass('move');

        var numb = $(this).index(),
            videos = ['images/talking1.m4v', 'images/talking2.m4v', 'images/talking1.m4v', 'images/talking2.m4v', 'images/talking1.m4v', 'images/talking2.m4v'],
            myVideo = document.getElementById('myVid');
            myVideo.src = videos[numb];
            myVideo.load();
        setTimeout(function(){
            myVideo.play();
        }, 200);
    });

    $('#myVid').bind("loadeddata", function() {
        $('#bigPic').addClass('move').delay(200);
    });

    $('#myVid').bind("playing", function() {
        ("#myVid").removeClass('move');

    });

    $('#myVid').bind("ended", function () {
        $("#bigPic").removeClass('move');
    });
});
}); 
```

**CSS：**

```
#bigPic {
    position:absolute;
 /* margin-left:-8px;   
    margin-top:-16px; */
    height:768px;   
    width:1024px;
    left:1200px;
    oveflow: hidden;    
}

.move {
    -webkit-transform: translateX(-1200px);
} 
```

*编辑*我发现`removeClass`一`.bind('click')`开始实际上并没有做任何事情......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:11:59.713

jQuery.click() 在 iOS 上无法正常运行。我怀疑您在使用 bind() 时遇到了同样的问题。

您可能可以使用[jQuery.on()](http://api.jquery.com/on/)或使用其他事件，如 touchstart

我看到[这篇文章](https://stackoverflow.com/questions/9200100/ios-bind-javascript-function-to-clicking-on-html)似乎与您的问题相似

# eclipse - 在 Notepad++/Eclipse 中查看 svn diff 结果？

> ID：10655573
> 
> 赞同：1
> 
> 时间：2012-05-18T15:33:53.103
> 
> 标签：eclipse, svn, diff, notepad++

我运行 svn diff 并将内容差异结果生成一个文本文件。由于操作很慢，我不想再次使用 Eclipse 进行比较。

我需要以更好的方式查看结果以进行比较，而我发现的是 Colordiff。我想问一下 Notepad++ 中是否有任何用于相同目的的插件，或者 Eclipse 中是否有任何插件可以查看带有格式的差异结果？

（场景是我在一个有一些核心更改和一些全局替换的分支上。我需要将此分支与原始分支进行比较。在脚本的帮助下，我过滤掉了一些全局替换，但仍然有许多人在没有工具帮助的情况下进行检查。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:30:06.803

您可以`git diff ... > foo.diff`在 N++ 中运行并打开 foo.diff。`git diff --color`这为您提供了与shell 中类似的输出。当您想要并排查看时，您需要[设置一个外部差异工具](https://stackoverflow.com/questions/7669963/how-can-i-get-a-side-by-side-diff-when-i-do-git-diff)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:01:46.387

如果您已经在使用 Eclipse，您应该使用 Subversion 的 Eclipse 插件来设置它，例如 Subversive 或 Subclipse。两者都不能很好地为差异着色，所以如果这是重点，你应该在定义中添加一个外部差异工具（这里是 Subversive）：

*   打开`Window > Preferences > Team > SVN > Diff Viewer` ![在此处输入图像描述](../Images/aded0ac0f74c120dc0cc817516edc023.png)
*   定义一个新的差异条目![在此处输入图像描述](../Images/a143c498683d5aff99d4c0702f2e1a7c.png)

请参阅我过去提出的关于将合并工具集成到 Eclipse 中的问题的类似答案：[https ://stackoverflow.com/a/7749442/41540](https://stackoverflow.com/a/7749442/41540)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T13:13:47.997

您没有提到您是否为您使用的 SCM 使用任何特定的 GUI 工具？如果您使用的是 TortoiseSVN 或类似软件，那么这里有一种方法可以让您在 Notepad++ 中显示差异：

[如何使用 Notepad++ 作为 TortoiseSVN（和类似工具）的差异查看器。](http://sourceforge.net/projects/sourcecookifier/files/other%20plugins/NppCompareLoader.v0.1.zip)

# java - 在 java 类中克隆 1 个成员变量

> ID：10655590
> 
> 赞同：0
> 
> 时间：2012-05-18T15:34:48.613
> 
> 标签：java, clone

我有一个包含多个成员变量的类，其中一个是 DefaultTableModel。我的类构造函数使用 MySQL ResultSet 来填充 DefaultTableModel。我想生成 DefaultTableModel 的精确副本并将其作为另一个成员变量存储在我的类中，因此我可以在我的类中编辑变量的副本，同时保留原始变量的副本。

下面是我的课堂大纲。

```
public class MyClass() {

    int i;
    Boolean b;
    DefaultTableModel model;
    DefaultTableModel model2;

    MyClass(ResultSet myRS) {
        //code to initialize i,b,model;
        //code to clone model and save as model2;
        //code to modify model2;
    }

    public DefaultTableModel getModels(String s) {
        //code that returns model or model2;
    }

} 
```

我一直在阅读，但还没有弄清楚如何在类中制作变量的精确副本。我知道我不能这样做，`model2 = model;`因为这只是复制变量的引用。我犯了这个错误，发现编辑model2也会编辑model。我读到的所有关于 clone 的东西都让人觉得它只是用来为整个类创建一个新的、相同的实例。任何关于如何在类中克隆单个变量的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:56:01.803

使用`clone()`创建您想要克隆**的对象的精确副本的方法。**要允许克隆你的类必须实现 interface `Cloneable`。然后，您必须从您实现的接口**覆盖**克隆方法。

**小例子：**

```
public class TableClass implements Cloneable {

    private DefaultTableModel model;

    @Override
    public Object clone() {
        DefaultTableModel cloned = null;
        try {
            cloned = (DefaultTableModel) super.clone();
        }
        catch (CloneNotSupportedException ex) {
            Logger.getLogger(TableClass.class.getName()).log(Level.SEVERE, null, ex);
        }
        return cloned;
    } 
```

由于`clone()`方法返回实例`Object`，您必须转换为对象的类型：`cloned = (DefaultTableModel) super.clone()`

所以这是如何工作的`clone()`。现在您可以实现自己的 tableMode。

**基本示例：**

```
public class YourTableModel extends AbstractTableModel implements Cloneable {

    private static final String[] columnNames = {"URL", "Progress", "Size", "Status"};
    private static final Class[] columnClasses = {String.class, String.class, String.class, String.class};

    private List<T> yourData;

    @Override
        public Object clone() {
            YourTableModel cloned = null;
            try {
                cloned = (YourTableModel) super.clone();
            }
            catch (CloneNotSupportedException ex) {
                Logger.getLogger(TableClass.class.getName()).log(Level.SEVERE, null, ex);
            }
            return cloned;
        }

    @Override
    public Object getValueAt(int row, int col) {
        switch (col) {
            case 0:
                return yourData.getName();
            case 1:
                return yourData.getAge();
            case 2:
                return yourData.getAddress();
            case 3:
                return yourData.getSomethingElse();
        }
        return "";
    }

    @Override
    public int getColumnCount() {
        return columnNames.length;
    }

    @Override
    public int getRowCount() {
        return downloadList.size();
    }

    @Override
    public String getColumnName(int col) {
        return columnNames[col];
    }

    public Class getClassName(int col) {
        return columnClasses[col];
    }
} 
```

这样，您还可以实现自己的模型 clone() 方法，然后您可以克隆此对象。但是还有其他方法，例如**@vizier 所写**

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:47:42.140

通常，如果它是您自己的 TableModel 子类，而不是`DefaultTableModel`您可以通过制作`TableModel`实现并通过调用该方法`Clonable`获取副本来实现这一目标。`clone()`

当您使用`DefaultTableModel`实例时，您必须反其道而行之：

不要创建一个`Object[][]`or`Vector`实例来将数据传递给 的构造函数，而是创建or的`DefaultTableModel`两个副本。使用这些，您可以创建具有相同内容的两个实例。`Object[][]``Vector``DefaultTableModel`

# iphone - 为什么 Core Data 插入需要越来越长的时间？

> ID：10655591
> 
> 赞同：2
> 
> 时间：2012-05-18T15:34:55.357
> 
> 标签：iphone, core-data, ios5

在我的核心数据应用程序中插入 2000 条记录时，我遇到了性能问题。

数据作为一个大的 JSON 文件从服务器下载，并解析成一个 JSON 字典，这一切都很好，传递字典的时间也没什么……

问题是每次插入我的数据库需要的时间越来越长？

在我的导入过程中，我保存了每 100 个文档的上下文以减少内存，第一个文档需要 0.005434 毫秒来保存，最后一个文档需要 0.039297 毫秒来保存..

我在一个单独的线程中执行所有这些导入，其中包含一个全新的 ManagedContext，其中 undomanager 设置为 nil ..

这是遍历字典中所有文档的循环

```
 NSArray *docs = [docsData objectForKey:@"docs"];
    for(NSDictionary *doc in docs){
        if(counter++ % 100){
            [context save:nil];
        }
        NSDate *start = [NSDate date];
        [Document documentWithDictionary:doc lastModifiedDate:[NSDate date] inLevels:nil inManagedObjectContext:context];
        NSDate *end = [NSDate date];

        NSLog(@"time used pr doc = %f",[end timeIntervalSinceDate:start]);
    }
    [context save:nil]; 
```

这是插入文档的代码

```
 NSFetchRequest *req = [NSFetchRequest fetchRequestWithEntityName:@"Document"];
    req.predicate = [NSPredicate predicateWithFormat:@"id = %@", [data valueForKey:@"id"]];
    NSArray *matches = [context executeFetchRequest:req error:&error];

    if(matches){    
        if([matches count]){
            document = [matches lastObject];
        }else {
            document = [NSEntityDescription insertNewObjectForEntityForName:@"Document" inManagedObjectContext:context];
        }
   } 
```

有人可以解释为什么插入时间越来越长吗？

在模拟器中，pr doc 的使用时间几乎是恒定的，但在手机上却不是？

这可能是一个小问题，但由于我可以在数据库中有 2000 到 30000 条记录，这实际上成为大量导入的一个因素。

非常感谢 ：）

/雅各布

更新 - - -

在数据库中只进行插入之后，即不获取现有记录，这些是时间..

带取：

1100 个文档 - 54.6 秒

2349 个文档 - 194.9 秒

1872 个文档 - 222.1 秒

没有获取。

1100 个文档 - 34.4 秒

2349 个文档 - 74.19s

1872 个文档 - 59.1 秒

所以，结论是我的 fetch 请求随着文档数量的增加而花费的时间越来越长.. 但这也是有道理的 :) 不知道为什么我之前没有想到这一点......所以现在解决方案是检查同步是否是第一个，然后在不获取任何现有文档的情况下导入文档。

/雅各布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:59:33.437

Based on your code, the issue has nothing to do with inserting anything. Nothing actually gets persisted to the database until you call the save method. I'm assuming the "...code that inserts the doc" is the code in the documentsWithDictionary:lastModifiedDate:inLevels:inManagedObjectContext: method. You are not actually inserting anything here, but creating a new ManagedObject in memory. However, you ARE querying the database every time you do this. As the number of records in the database grows, the query could take slightly longer to find a record of the given id.

Apple has outlined some good practices for efficiently importing large data sets: [http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coredata/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174-SW1](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coredata/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174-SW1)

特别是，您将需要阅读“高效实施查找或创建”。按照他们的指南，您可以将数据库读取限制为每批记录一次，或者对您要导入的整个数据集只读取一次。

# javascript - Javascript 组合框

> ID：10655592
> 
> 赞同：0
> 
> 时间：2012-05-18T15:34:56.687
> 
> 标签：javascript, html, combobox

我有一个组合框，它给了我 3 个选项，当你转到选项时，如果给我一个选项框之外的图像。我想要做的是能够显示 html 而不是图像。

```
function display_map(mapid) {
    println(mapid);
    if (mapid == "ireland_map") {
        document.getElementById('ireland_map').style.display = "block";
        document.getElementById('africa_map').style.display = "none";
        document.getElementById('america_map').style.display = "none";
    }
    else if (mapid == "africa_map") {
        document.getElementById('ireland_map').style.display = "none";
        document.getElementById('africa_map').style.display = "block";
        document.getElementById('america_map').style.display = "none";
    } else if (mapid == "america_map") {
        document.getElementById('ireland_map').style.display = "none";
        document.getElementById('africa_map').style.display = "none";
        document.getElementById('america_map').style.display = "block";
    }
    else {
        document.getElementById('ireland_map').style.display = "none";
        document.getElementById('africa_map').style.display = "none";
        document.getElementById('america_map').style.display = "none";
    }
}​

<select name="#" id="map_select" onChange="display_map('freddy');">
      <option selected="selected"></option>
      <option id="ireland_map">ireland</option>
      <option id="africa_map">africa</option>
      <option id="america_map">america</option>
</select>

<div id="ireland_map" style="display:none;"> hey, 1 works </div>
<div id="africa_map" style="display:none;"> hey, 2 works </div>
<div id="america_map" style="display:none;"> hey, 3 works </div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:42:39.070

您的 div 和选项具有相同的 ID。这就是它不起作用的原因。

[http://jsfiddle.net/jbabey/z9Jct/](http://jsfiddle.net/jbabey/z9Jct/)

# coldfusion - Coldfusion 8 中如何执行 CFX 标签？

> ID：10655598
> 
> 赞同：1
> 
> 时间：2012-05-18T15:35:04.057
> 
> 标签：coldfusion, coldfusion-8, jrun

在我的公司，我们最近遇到了一些内存问题。我们所做的一件事是增加了 JRUN 中的堆大小，但现在我们注意到了一些副作用。

其中之一是处理图像的 CFX 标签。当我们使用它时，它有时无法加载我们给它的文件。我们目前的想法是，为了处理图像，必须将整个图像加载到内存中。它似乎只会在大文件上引发错误，这需要 200+ MB 的内存来存储整个文件。

我想知道的是 Coldfusion 如何处理 CFX 标签加载和执行。由于特别是 CFX 标签是用 C++ 编写的，我认为它不一定会使用 Coldfusion 堆（因为它只存储 Java 数据），并且在处理某些内容时我们不会看到堆峰值。

我想主要的问题是 CFX 是如何执行的：它是作为 JRUN 下的线程运行，还是创建了一个在自己的用户空间中运行的本机 Windows 进程？而且，如果它确实在JRUN下运行，那么它在执行时占用了多少内存空间，有没有办法对其进行监控？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:07:56.843

I think that if you're running a 32-bit process, it can only access 2gig. If the heap is 1gig, then non-heap memory will be 60-200+ meg, then add in memory for each thread the process is running (and the number of threads goes even higher when you're clustered) then there sometimes isn't that much memory space left in your process. Plus, as I understand it, various DLLs are mapped into your memory space somewhere in the upper part of the memory range, meaning that when your image processing tag attempts to allocate a very large block of contigous memory (outside of heap is my guess), there's no single block left for it. This answer is somewhat speculative, so don't take it as gospel, but it may be worth looking at programs which can visualise a processes' memory map.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:25:19.233

CFX 绝对作为 JRUN 下的线程运行，并且数据通过 JNI 层从 Java 编组到 C++。所以是的，它将使用默认文件打开/读取（在幕后）将整个图像加载到堆中，然后将二进制文件传递给您的 C++ 标记。在我看来，处理大图像文件（或一般的大文件）一直是 CF 的一个问题。有一些用于图像处理的“纯 Java”解决方案可以提供更好的性能 - 或者您可以使用诸如“imagemagik”之类的东西，它将文件名和路径传递给 shell 并*单独*执行。这是我的看法。

# java - Java 负数 indexOf （从末尾计数 [length()] ）

> ID：10655611
> 
> 赞同：24
> 
> 时间：2012-05-18T15:35:58.703
> 
> 标签：java, string, reverse, indexof

在 Java 中有什么方法可以找到从末尾开始的 char 的 indexOf 并像其他语言一样将 length() 作为参考？

```
 new String("abcd").reverseIndexOf("d"(,[4 or -0]))
or new String("abcd").indexOf("d",-0) // Should return a (-)1 
```

...而不是显而易见的

```
 new String("abcd").indexOf("d") - newString("abcd").length() 
```

谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-18T21:49:34.290

[`lastIndexOf(int ch)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#lastIndexOf%28int%29)将从末尾开始并向后搜索，返回最后一次出现的绝对索引。然后你可以从字符串的长度中减去那个数字并否定它，如果那是你真正想要的。

[`lastIndexOf(int ch, int fromIndex)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#lastIndexOf%28int,%20int%29)如果要从特定索引向后搜索，也可以使用。

要回答有关传递负数时会发生什么的问题，您可以深入研究 String 类的源代码。事实证明，`indexOf`最终调用的实现将负值重置`fromIndex`为零：

```
static int indexOf(char[] source, int sourceOffset, int sourceCount,
                   char[] target, int targetOffset, int targetCount,
                   int fromIndex) {
if (fromIndex >= sourceCount) {
        return (targetCount == 0 ? sourceCount : -1);
}
    if (fromIndex < 0) {
        fromIndex = 0;
    }
    ... 
```

回到你的第二个例子：

```
"abcd".indexOf("d",-0) 
```

...实现一个接受负索引并返回适当负索引（如果有的话）的通用 indexOf 更复杂，因为 Java 不区分`int` `0`和`int` `-0`（两者都将表示为 0），并且因为 String.indexOf 通常返回-1 如果未找到搜索字符串。但是，您可以接近您想要的。请注意，有一些注意事项：

1.  `String.indexOf``-1`如果未找到搜索字符串，则通常返回。但是因为`-1`在我们的新实现中是一个有效的索引，我们需要定义一个新的合约。 `Integer.MIN_VALUE`如果未找到搜索字符串，则现在返回。
2.  因为我们无法测试`int` `-0`，所以我们不能将最后一个字符的索引称为`-0`。出于这个原因，我们使用`-1`引用最后一个字符的索引，并从那里继续倒数。
3.  `-1`为了与第 2 项保持一致，负返回值也从最后一个字符的索引开始倒计时。

代码可以简化，但我故意让它变得冗长，这样您就可以在调试器中轻松地单步执行它。

```
package com.example.string;

public class StringExample {

    public static int indexOf(String str, String search, int fromIndex) {
        if (fromIndex < 0) {
            fromIndex = str.length() + fromIndex; // convert the negative index to a positive index, treating the negative index -1 as the index of the last character
            int index = str.lastIndexOf(search, fromIndex);
            if (index == -1) {
                index = Integer.MIN_VALUE; // String.indexOf normally returns -1 if the character is not found, but we need to define a new contract since -1 is a valid index for our new implementation
            }
            else {
                index = -(str.length() - index); // convert the result to a negative index--again, -1 is the index of the last character 
            }
            return index;
        }
        else {
            return str.indexOf(str, fromIndex);
        }
    }

    public static void main(String[] args) {
        System.out.println(indexOf("abcd", "d", -1)); // returns -1
        System.out.println(indexOf("adbcd", "d", -2)); // returns -4
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T15:41:13.107

只需使用`String.lastIndexOf()`方法：

```
String s = "abcd";
int rindex = s.lastIndexof('d');
System.out.println(rindex); // print 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:08:26.780

顺便说一句，您可以轻松地反转字符串：

```
String s="abcd";
StringBuilder reverseS = new StringBuilder(s).reverse();
System.out.println(reverseS.indexOf("d")); //print 0
System.out.println(reverseS.indexOf("a")); //print 3
System.out.println(reverseS.indexOf("d",1)); //print -1 
```

# sql-server-2008 - 如何定义非聚集索引的列顺序

> ID：10655616
> 
> 赞同：1
> 
> 时间：2012-05-18T15:36:07.400
> 
> 标签：sql-server-2008, non-clustered-index

我写了一个像这样的子查询：

```
select top 1 A
from my_table
where B = some_joined_value_from_outer_query
order by C desc 
```

我想创建一个非聚集索引来提高这部分的性能。

这里有3个问题：

1.  索引列的正确顺序是什么？
2.  此外，A 列应该是索引列还是仅包含在索引中？
3.  这可以在没有子查询的情况下重写（注意`top 1`and `order by desc`）并且可以提高性能吗？

* * *

**编辑：** 这是查询（数据同步过程的一部分）：

```
SELECT ProductId, (
    SELECT Id 
    FROM [Order]
    WHERE Number = (
        SELECT TOP 1 OrderNumber
        FROM OtherDatabase..ReferenceTable
        WHERE ProductNumber = Product.Number
        ORDER BY [Date] DESC)
    ) AS OrderId
FROM Product 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T15:37:04.790

（一种）

```
CREATE NONCLUSTERED INDEX foo ON dbo.my_table(B, C DESC) INCLUDE (A); 
```

(乙)

由于 A 不在`WHERE`or`ORDER BY`中，因此在 d 列的列表中可能就足够了`INCLUDE`，因为它只是“顺路”而不需要成为键的一部分。

（C）

没有更多上下文无法回答。为什么只包含子查询然后询问我们看不到的外部查询？

**编辑**关于与@Quassnoi 正在进行的对话，我只是想快速证明非聚集索引中尾随列的排序方向*可以*对特定查询使用的计划产生很大影响。让我们举一个人为的例子：

```
CREATE TABLE dbo.foo1(A INT, B INT, C INT);
CREATE NONCLUSTERED INDEX foo1x ON dbo.foo1(B, C) INCLUDE(A);

CREATE TABLE dbo.foo2(A INT, B INT, C INT);
CREATE NONCLUSTERED INDEX foo2x ON dbo.foo2(B, C DESC) INCLUDE(A);

INSERT dbo.foo1 SELECT TOP (500000) c.[object_id], c.[object_id], -1*c.[object_id]
FROM sys.all_columns AS c CROSS JOIN sys.all_objects
ORDER BY c.[object_id];

INSERT dbo.foo2 SELECT TOP (500000) c.[object_id], c.[object_id], -1*c.[object_id]
FROM sys.all_columns AS c CROSS JOIN sys.all_objects
ORDER BY c.[object_id]; 
```

现在，让我们运行这两个提议的查询并检查计划：

```
SELECT  A
FROM    (
        SELECT  A, ROW_NUMBER() OVER (PARTITION BY B ORDER BY C DESC) RN
        FROM    dbo.foo1
        ) q
WHERE   rn = 1;

SELECT  A
FROM    (
        SELECT  A, ROW_NUMBER() OVER (PARTITION BY B ORDER BY C DESC) RN
        FROM    dbo.foo2
        ) q
WHERE   rn = 1; 
```

* * *

这是针对 dbo.foo1（其中 C 是 ASC）的查询计划：

![在此处输入图像描述](../Images/73e8804c5a132f6104182aba7a22d5a8.png)

![在此处输入图像描述](../Images/32e0663b66eb35e70d387cb03164ba8b.png)

还有我提到的那种：

![在此处输入图像描述](../Images/73b2f2ec907b5f815b2f6f70d645e2eb.png)

* * *

这是针对 dbo.foo2（其中 C 是 DESC）的查询计划：

![在此处输入图像描述](../Images/08461e7fa943e346115b761c5fc95060.png)

![在此处输入图像描述](../Images/169531e6ee1e62cee1faf975c17e9de3.png)

* * *

现在，如果您向内部查询添加 WHERE 子句（例如 WHERE B = -1024577103），则计划更加相似。但这也意味着 PARTITION BY 是不必要的，并且需要涉及一些匹配以将外部查询也限制为 B 的值。但是我的观点仍然是，虽然对于问题中的特定查询，索引中每一列的排序方向可能对计划影响不大，但对于所有可以使用相同索引的查询来说，情况并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:38:57.533

顺序很重要。一阶的列是最重要的。

索引的选择完全基于第一列。仅当索引中列出的第一列在查询中使用时，才考虑使用索引。因此，如果第一列没有匹配，并且在查询的 JOIN、ORDER BY 或 WHERE 子句中使用了该列，则完全忽略索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:41:55.230

你可以这样重写它：

```
SELECT  m.a
FROM    (
        SELECT  m.a, ROW_NUMBER() OVER (PARTITION BY m.b ORDER BY m.c DESC) RN
        FROM    outer_table o
        JOIN    my_table m
        ON      m.b = o.b
        ) q
WHERE   rn = 1 
```

但子查询实际上可能更快（或可能不会）。

在我的博客中查看此条目：

*   [**SQL Server：选择保持分组最大值的记录**](http://explainextended.com/2009/11/30/sql-server-selecting-records-holding-group-wise-maximum/)

# ruby-on-rails - Rails：验证一个大于另一个的日期

> ID：10655619
> 
> 赞同：12
> 
> 时间：2012-05-18T15:36:16.950
> 
> 标签：ruby-on-rails, ruby, validation, date

我正在 ActiveRecord 中编写一个自定义验证器，以便截止日期有意义：

```
 validate :deadline_is_possible?

  def deadline_is_possible?
    if deadline > begins_at
      errors.add(:deadline, 'must be possible')
    end
  end 
```

然而，这会生成一个“NoMethodError: undefined method `>' for nil:NilClass”。我试图将日期转换为字符串，例如：

```
 def deadline_is_possible?
    if deadline.to_s > begins_at.to_s
      errors.add(:deadline, 'must be possible')
    end
  end 
```

尽管它不会产生错误，但也不起作用。

我还声明了其他验证器（例如

```
 def begins_at_is_date?
    if !begins_at.is_a?(Date)
      errors.add(:begins_at, 'must be a date')
    end
  end 
```

那行得通。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T16:34:29.230

如果其中一个日期为零，您可能需要处理。您可以将这些设置为在截止日期数据库中具有默认值，或者执行以下操作：

```
 validate :deadline_is_possible?

  def deadline_is_possible?
    return if [deadline.blank?, begins_at.blank?].any?
    if deadline > begins_at
      errors.add(:deadline, 'must be possible')
    end
  end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-07-17T16:47:41.550

您可以添加自己的验证器：

```
class AfterDateValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    return if value.blank?

    other_date = record.public_send(options.fetch(:with))

    return if other_date.blank?

    if value < other_date
      record.errors.add(attribute, (options[:message] || "must be after #{options[:with].to_s.humanize}"))
    end
  end
end 
```

并在模型中使用它：

```
validates :invited_on, presence: true
validates :selected_on, presence: true, after_date: :invited_on 
```

# reference - .Net 中的参考程序集是什么？它们是如何创建的？我们可以自己创造一个吗？

> ID：10655634
> 
> 赞同：2
> 
> 时间：2012-05-18T15:37:24.563
> 
> 标签：reference, assemblies, clr

我不理解参考程序集的概念，例如用于 WP7 配置文件的 Silverlight、Metro Style Apps Profile 等。当他们说这些程序集不是真正的程序集而是引用实际程序集的元数据程序集时，它们是什么意思。

我知道这是一个非常笼统的问题，因此您分享的任何信息都会非常有用。

# c++ - 为所有断点运行“断点命令列表”/迭代断点 [GDB]

> ID：10655637
> 
> 赞同：2
> 
> 时间：2012-05-18T15:37:50.483
> 
> 标签：c++, gdb

有没有办法遍历我在 GDB 中的所有断点并设置“命令列表”[ [http://www.ofb.net/gnu/gdb/gdb_35.html](http://www.ofb.net/gnu/gdb/gdb_35.html) ]？我有大约 100 个断点，我想为每个断点运行一组命令。有谁知道如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:42:08.087

`cond <break-point#> <statement to execute>`

你看起来像上面的东西吗？

编辑：

你可以试试断点范围。从上面的链接： -

> > 一些 gdb 命令接受一系列断点来操作。断点范围是单个断点编号，例如`5', or two such numbers, in increasing order, separated by a hyphen, like`5-7'。当给命令一个断点范围时

# objective-c - switch 语句中的字符类型

> ID：10655638
> 
> 赞同：2
> 
> 时间：2012-05-18T15:37:54.697
> 
> 标签：objective-c, macos, char, switch-statement

我正在查看我早期的一个实验，其中您的输入是一个字符，输出将显示“二进制代码”，但是出了点问题，我似乎无法找到问题的开始。

这是代码：

```
char myNothing = 0;

        scanf("%c", myNothing);
        switch (myNothing)
        {
            case 'a':
                NSLog(@"01100001");
                break;
            case 'b':
                NSLog(@"01100010");
                break;
            case 'c':
                NSLog(@"01100011");
                break;
            case 'd':
                NSLog(@"01100100");
                break;
            default:
                NSLog(@"Unknow character");
                break;
        }

        return 0; 
```

这是在输入中插入任何字符时的输出：

```
Run Command: line 1:   607 Segmentation fault: 11  ./"$2" "${@:3}" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T15:41:08.797

改变：

```
 scanf("%c", myNothing); 
```

到：

```
 scanf("%c", &myNothing); 
```

或者更好：

```
 myNothing = getchar(); 
```

另外，请确保您启用了编译器警告。

# javascript - 使用 GWT 将双精度的 JS 数组（可能包含空条目）集成到 Java 对象的适当方法

> ID：10655640
> 
> 赞同：0
> 
> 时间：2012-05-18T15:38:01.200
> 
> 标签：javascript, gwt, overlays

我正在使用 GWT 和覆盖、JavaScript 覆盖类型（而不是 UI）来读取 JSON 输入中的双精度数组并将其发送到 Highcharts。只要没有数据点为空，以下就可以正常工作。

```
public final native JsArrayNumber getPoints() /*-{
    return this.points;
}-*/; 
```

但是，null 表示 Highcharts 中的缺失值。不幸的是，没有办法知道哪个索引为空，get() 方法将抛出 HostedModeException 说明

> 从 JSNI 方法“@com.google.gwt.core.client.JsArrayNumber::get(I)”返回了非双精度值：未定义类型的 JS 值，预期双精度

有趣的是，我自己可能会产生空值，而 toString() 方法工作得很好。

```
JsArrayNumber test = jsSeries.getPoints();
test.set(test.length()+2, 24.2);
System.out.println(test.toString());
System.out.println(test.length());
for (int i = 0; i < test.length(); i++) {
    System.out.println(test.get(i));            
}

Output:
163,1,276,0,547,0,628,,,24.2
10
163.0
1.0
276.0
0.0
547.0
0.0
628.0
(and here comes the exception at the first null entry). 
```

令我感到奇怪的是，我无法查询空值，但我能够生成它们。我确信这是有正当理由的，而且我对 GWT 很陌生。

当某些条目可能为空时，使用覆盖来读取双值数组的适当方法是什么？

（现在我刚刚添加了另一个函数 isNull(index) 以便我可以自己检查）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:44:58.737

在 Java 中，`double`是一种值类型，不能包含 null，而在 JavaScript 中，类型的管理更加灵活，因为您将所有内容都称为`var`. 诸如此类的事件`null + null`是合法的，因为 JavaScript 会强制类型使其有意义。

对象类型`java.lang.Double`可以分配一个空值，但 JSNI 方法不能返回`Double`。您的`isNull`检查可能是最好的方法，但您可能会考虑添加一个`Double`检查 null 的方法，否则返回实际值：

```
public Double getWithNull(int i) {
  if (isNull(i)) {
    return null;
  } else {
    return get(i);
  }
} 
```

[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#passing-javascript](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#passing-javascript)讨论了可以从 JSNI 返回的类型。

# css - 如何让浮动 div 在其父级中注册为内容？

> ID：10655642
> 
> 赞同：0
> 
> 时间：2012-05-18T15:38:07.020
> 
> 标签：css

更多细节：我有两个 div，一个`float:left`，另一个`float:right`，而 parent 是`clear:both`这样我可以在页面上向下订购容器父母。具体的CSS在这里：

```
#content {
    margin-left:auto;
    margin-right:auto;
    width: 750px;
    margin-top:50px;
    position:relative;
}
.container-div {
    padding-top:7px;
    padding-bottom:10px;
    clear:both;
    background-color:#b0c4de;
}
.left-side {
    float:left;
}
.right-side
    float:right;
} 
```

问题是`background-color`父级只覆盖了容器顶部的一小部分，而 chrome 检查器显示内容显然只是那部分。是什么赋予了？如何让 div 将浮动的 div 视为内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:35:38.757

你的 DOM 结构或多或少看起来像这样

```
<div class="container-div">
    <div class="left-side"></div>
    <div class="right-side"></div>
</div> 
```

具有类容器的父 div 的宽度为 100%。现在您尝试在父 div 中浮动两个子 div，而不给它们任何宽度，默认情况下，子 div 将采用 100% 的宽度。因此，您必须将子 div 的宽度定义为最多 50%，然后只有您的浮动有效。

现在尝试以下代码

```
.clear{clear:both}

.container-div {
    padding-top:7px;
    padding-bottom:10px;
    background-color:#b0c4de;
}
.left-side {
    float:left;
    width=50%;
}
.right-side
    float:right;
    width=50%;
} 
```

你的 DOM 应该是这样的

```
<div class="container-div">
        <div class="left-side">your left divs content</div>
        <div class="right-side">your right divs content</div>
        <div class="clear"></div>
</div> 
```

现在您将看到一切都在正确的位置，并且 chrome 检查器将完美地显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:40:23.243

尝试添加`overflow: auto`父

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T15:45:19.053

父级`.container-div`应设置为`display: inline-block;`以吸收其子级的全部高度。

# android - 背景颜色（列表视图？）

> ID：10655646
> 
> 赞同：1
> 
> 时间：2012-05-18T15:38:14.303
> 
> 标签：android, android-layout, android-widget

下图中是我的列表视图下方和按钮上方的灰色区域。我希望该区域具有与列表相同的背景颜色（黑色）。

对我来说奇怪的是，在模拟器中它是黑色的，但在我的手机上，它是灰色的。

![在此处输入图像描述](../Images/dd8944278076e0a6f33f519185991185.png)

我尝试设置布局、列表和缓存颜色提示的背景颜色......无论如何，它都保持灰色。

当前布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:background="#000000" >
    <TextView
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="27dp"
        android:layout_alignParentTop="true"
        android:layout_gravity="center|center_vertical"
        android:gravity="center"
        android:textColor="#00ccff"
        android:textSize="20dp" />
     <TextView
        android:id="@+id/horizontalline"
        android:layout_width="match_parent"
        android:layout_height="2dip"
        android:layout_below="@id/header"
        android:background="#8b8b8b"
        android:paddingBottom="2dip"
        android:paddingTop="2dip" />
    <Button
        android:id="@+id/AddButton"
        android:layout_width="match_parent"
        android:layout_height="35dp"
        android:layout_alignParentBottom="true"
        android:layout_gravity="center"
        android:gravity="center|top"
        android:textSize="12dp" >
    </Button>
    <ListView
        android:id="@id/android:list"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_below="@id/horizontalline"
        android:background="#000000" 
        android:cacheColorHint="#000000" 
        android:layout_above="@id/AddButton"
        android:drawSelectorOnTop="false"
        android:listSelector="@android:color/transparent" />
    <TextView
        android:id="@android:id/empty"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/header"
        android:gravity="center" />
</RelativeLayout> 
```

任何帮助表示赞赏。

**编辑**

需要明确的是，当列表填满屏幕时，我对列表没有任何问题，当只有少数项目没有填满屏幕时，我会得到这个灰色背景......我更希望它是相同的黑色背景名单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T14:48:00.723

查看您的屏幕截图，您的手机看起来像是运行 2.3+（Droid 3？）的摩托罗拉。我在一些摩托罗拉手机上看到了相同的“功能”。

查看[摩托罗拉博客上](http://community.developer.motorola.com/t5/MOTODEV-Blog/Why-Does-My-ListView-Look-Different/ba-p/17462)的这篇文章以获得完整的答案。基本上，添加您的`ListView`XML 属性`android:overScrollFooter="#000000"`。

它仅适用于 2.3+ 设备，因此您宁愿将其置于以下样式中`res/values-v10/styles.xml`：

```
<style name="MyListView" parent="@android:style/Widget.ListView">
    <item name="android:listSelector">@drawable/list_selector</item>
    <item name="android:overScrollFooter">#000000</item>
</style> 
```

然后将此添加到您的`theme.xml`：

```
<style name="MyTheme" parent="android:Theme">
    <item name="android:windowBackground">@null</item>
    <item name="android:listViewStyle">@style/MyListView</item>
</style> 
```

最后，将您的自定义主题应用到您的 AndroidManifest 中的活动：

```
<activity android:name="com.listtest.MainActivity"
    android:label="@string/app_name" 
    android:theme="@style/MyTheme"> 
```

我想您可以直接将样式应用到列表中，而无需传递主题，但是一旦您将其应用于清单中的所有活动，此解决方案将适用于您的应用程序中的所有 ListView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:50:20.743

// 这对我来说看起来不错

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:background="#000000" >
    <TextView
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="27dp"
        android:layout_alignParentTop="true"
        android:layout_gravity="center|center_vertical"
        android:gravity="center"
        android:textColor="#00ccff"
        android:textSize="20dp" />
     <TextView
        android:id="@+id/horizontalline"
        android:layout_width="match_parent"
        android:layout_height="2dip"
        android:layout_below="@id/header"
        android:background="#8b8b8b"
        android:paddingBottom="2dip"
        android:paddingTop="2dip" />
    <TextView

        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/header"
        android:gravity="center" 
        android:background="#000" 
        />
    <Button
        android:id="@+id/AddButton"
        android:layout_width="match_parent"
        android:layout_height="35dp"
        android:layout_alignParentBottom="true"
        android:layout_gravity="center"
        android:gravity="center|top"
        android:textSize="12dp" >
    </Button>
    <ListView
        android:id="@id/android:list"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_below="@id/horizontalline"
        android:background="#000000" 
        android:cacheColorHint="#000000" 
        android:layout_above="@id/AddButton"
        android:drawSelectorOnTop="false"
        android:listSelector="@android:color/transparent" />
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:47:18.003

嗯，*看起来*列表没有扩大剩余空间？这是故意的吗？

另外，要更改灰色，您是否不需要设置“空”文本视图的背景颜色，因为它似乎跨越了整个高度，我猜这是显示为灰色的文本视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T15:54:25.797

试试这个（我不确定这是否能解决你的问题......）：

```
<ListView
    android:id="@+id/my_list"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_below="@id/horizontalline"
    android:background="#000000" 
    android:cacheColorHint="#000000" 
    android:layout_above="@id/AddButton"
    android:drawSelectorOnTop="false"
    android:listSelector="@android:color/transparent" /> 
```

（列表视图的高度应始终为 fill_parent）

# ios - 使用 tabBar 在视图之间传递数据

> ID：10655649
> 
> 赞同：0
> 
> 时间：2012-05-18T15:38:24.953
> 
> 标签：ios, xcode, uiviewcontroller, expression, uitabbar

好的，所以我有一部分应用程序正在处理视图之间的浮点变量传递，一切都很好，但是所有的按钮看起来有点乱。并且这样我就快完成了，我想看看是否可以在现有视图中添加一个 tabBar 并清理它。我找到了一个很棒的教程，并让它链接起来并报告我在 NSLog 中选择的选项卡，所以继续粘贴我用于相同功能的按钮的代码。一切都变得有点好笑，我不得不做一些新的变量，我遇到了最后一个我无法弄清楚的错误。这是我第一次调用 patternRafter 时需要一个预期的表达式

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {
NSLog(@"didSelectItem: %d", item.tag);

[self activateTab:item.tag];
}

- (void)activateTab:(int)index {
switch (index) {
    case 1:

        patternRafter *patternRafter1 = [[patternRafter  alloc]initWithNibName:nil bundle:nil];

        BuildNavAppDelegate *buildNavDelegate = (BuildNavAppDelegate *)[[UIApplication sharedApplication]delegate];

        buildNavDelegate.TLPMR = [TLMR text];
        buildNavDelegate.comRaftBirdPassed = [comBird text];
        buildNavDelegate.comRaftLengthPassed = [comRafter text];
        buildNavDelegate.raftThicknessPassed = [rafterWidth text];

        [self presentModalViewController:patternRafter1 animated:YES]; 
        break;
    /*case 2:

        buildersSquare *square1 = [[buildersSquare alloc]initWithNibName:nil bundle:nil];

        BuildNavAppDelegate *buildNavDelegate = (BuildNavAppDelegate *)[[UIApplication sharedApplication]delegate];

        buildNavDelegate.TLPMR = [TLMR text];
        buildNavDelegate.comRaftBirdPassed = [comBird text];
        buildNavDelegate.comRaftLengthPassed = [comRafter text];
        buildNavDelegate.raftThicknessPassed = [rafterWidth text];

        [self presentModalViewController:square1 animated:YES];         
        break;
    case 3:

        self.tab2ViewController =[[tab2 alloc] initWithNibName:@"tab2" bundle:nil];
        [self.view insertSubview:tab2ViewController.view belowSubview:tabbar1];
        if (currentViewController != nil)
            [currentViewController.view removeFromSuperview];
        currentViewController = tab2ViewController;         
        break;*/
    default:
        break;
} 
```

}

任何帮助，将不胜感激。谢谢，我刚刚意识到我不能发布图片，因为我还是一个新用户。所以如果有人想检查一下，这里有一个链接。 [http://dl.dropbox.com/u/72193343/Screen%20shot%202012-05-18%20at%209.22.48%20AM.png](http://dl.dropbox.com/u/72193343/Screen%20shot%202012-05-18%20at%209.22.48%20AM.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:05:55.397

```
- (void)activateTab:(int)index {
switch (index) {
case 1://igot it to work by opening brackets here{

    patternRafter *patternRafter1 = [[patternRafter  alloc]initWithNibName:nil bundle:nil];

    BuildNavAppDelegate *buildNavDelegate = (BuildNavAppDelegate *)[[UIApplication sharedApplication]delegate];

    buildNavDelegate.TLPMR = [TLMR text];
    buildNavDelegate.comRaftBirdPassed = [comBird text];
    buildNavDelegate.comRaftLengthPassed = [comRafter text];
    buildNavDelegate.raftThicknessPassed = [rafterWidth text];

    [self presentModalViewController:patternRafter1 animated:YES]; //local declaration of 'patternRafter1' hides instance variable
    break;//and closing here} 
case 2: 
```

它工作正常，但我收到警告 - 'patternRafter1' 的本地声明隐藏实例变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:40:22.653

我想patternRafter 是一个名为PatternRafter 的类的实例？如果是这样，该行需要如下所示：

```
PatternRafter *patternRafter1 = [[PatternRafter alloc] initWithNibName:nil bundle:nil]; 
```

Obj-C 区分大小写，命名约定要求 ivars 以小写字母开头，类以大写字母开头。

# html - 检查 iframe 是从批准的域调用的吗？

> ID：10655665
> 
> 赞同：4
> 
> 时间：2012-05-18T15:39:19.673
> 
> 标签：html, iframe, execute

> **可能重复：**
> [如何将 iframe 从外部站点的显示限制为仅特定域](https://stackoverflow.com/questions/5224286/how-to-limit-display-of-iframe-from-an-external-site-to-specific-domains-only)

我想要的很简单。我想防止我的网站被我不批准的域调用。假设只有 a.com 和 b.com 可以有一个带有 iframe 的页面，该页面调用我的 web 应用程序 wwww.mydomain.com/myapp.php。我怎样才能做到这一点？

第一次我在考虑我的网络应用程序检查 iframe 父级的域。也许这是可能的，但肯定不容易，因为跨域限制。

第二，我正在考虑让 a.com 和 b.com 上的请求页面首先执行一个小的 PHP 脚本，它将一些信息写入文件或我的数据库，所以我知道请求页面位于批准的域之一上。问题是如何调用以及何时执行脚本？

放置带有 src 属性的脚本标签或图像标签是个好主意吗？这对我来说似乎是一个相当简单的解决方案，不需要 PHP。请求页面可以是纯 HTML。

它应该看起来像这样：

```
<img src="http://wwww.mydomain.com/myapp.php" style="width: 0px; height: 0px;" alt="Not an image"  title="Not an image"/> 
```

你有什么建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T09:02:06.207

我就是这样做的，它就像一个魅力。普通用户将无法访问我的 Web 应用程序。

无需对已批准的域进行任何操作。甜的！

感谢 dda 和 jackJoe（[如何将 iframe 从外部站点的显示限制到特定域](https://stackoverflow.com/questions/5224286/how-to-limit-display-of-iframe-from-an-external-site-to-specific-domains-only)）

```
<?php

  define('MSG_NO_ACCESS', 'No access');

  $acceptedDomains = array('mydomain.com', 'a.com', 'b.com');
  $referer=get_domain($_SERVER['HTTP_REFERER']);

  if(!$referer || !in_array($referer,$acceptedDomains))
  {
     header('HTTP/1.0 403 Forbidden');
     exit(MSG_NO_ACCESS);
  }

function get_domain($url)
{
  $pieces = parse_url($url);
  $domain = isset($pieces['host']) ? $pieces['host'] : '';
  if (preg_match('/(?P<domain>[a-z0-9][a-z0-9\-]{1,63}\.[a-z\.]{2,6})$/i', $domain, $regs)) 
  {
     return $regs['domain'];
  }
  return false;
} 
```

?>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:03:57.917

这个问题已经被问过了。 [如何将 iframe 从外部站点仅显示到特定域](https://stackoverflow.com/q/5224286/1403437)

基本上你可以，根据你的网络服务器，你需要限制访问。

使用 Apache，这可以在 .htaccess 文件中完成

使用 IIS，这可以在“IP 地址和域限制”中完成

如果您在某个共享托管平台上，您可能没有那么多控制权。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:22:51.223

注入一些 JS 的一点 PHP 可以走很长的路。

```
<?php
if(array_key_exists('HTTP_REFERER',$_SERVER)){
  $referer=$_SERVER['HTTP_REFERER'];
} else {
  $referer='';
}
echo "<script type='text/javascript'>
var referer='".$referer."';
</script>
";
?> 
```

这会将 HTTP_REFERER 注入到“referer”JS 变量中。现在有了它和下面的 JS 代码，你就可以开始了：

```
if (top === self) {
// not in a frame, no worries
} else {
// in a frame, decide whether referer is one of the guys allowed to display your web site...
// nuke the content, redirect, display a goatsee pic, etc
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T15:45:22.747

您无法采取任何措施来防止这种情况发生。任何拥有服务器代理的人都可以获取您的 HTML 并将其重新作为自己的。

规则 #1：如果您不希望人们在互联网上窃取您的东西，请不要将其放到网上。

# c - C 枚举类型名称范围

> ID：10655671
> 
> 赞同：4
> 
> 时间：2012-05-18T15:40:14.153
> 
> 标签：c, enums

GCC 告诉我你不能对单独的枚举类型值使用相同的名称，例如

```
enum flag_one {
    SUCCESS,
    FAIL
}

enum flag_two {
    SUCCESS,
    FAIL
} 
```

编译器不允许。那么范围界定不是“在”枚举定义中吗？

是做类似的事情的方法：

```
enum flag_one {
    FLAG_ONE_SUCCESS,
    FLAG_ONE_FAIL
}

enum flag_two {
    FLAG_TWO_SUCCESS,
    FLAG_TWO_FAIL
} 
```

有点困惑，因为我喜欢使用枚举作为返回整数代码，因为它更具可读性/描述性，但我已经开始遇到名称冲突

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T15:51:57.437

> 那么范围界定不是“在”枚举定义中吗？

不，这是不允许的。枚举器列表定义常量。你`enum`的 s 恰好在同一个范围内——*文件范围*。*在同一个范围内*不能有两个同名的常量。

来自 CX 的草案：

> **6.7.2.2 枚举说明符**
> 
> **语义**
> 
> **3**枚举器列表中的标识符被声明为具有 int 类型的常量，并且可以出现在任何允许的地方。127) [...]

此外，来自脚注 127（这在技术上是非规范性的，仅供参考）：

> 127) 因此，在同一范围内声明的枚举常量的标识符应彼此不同，并且与在普通声明符中声明的其他标识符不同。

.

> 有点困惑，因为我喜欢使用枚举来返回整数代码 [...]

使用`EXIT_SUCCESS`和`EXIT_FAILURE`定义在`stdlib.h`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T15:52:46.490

枚举值在枚举类型的范围内可见。这意味着它们必须在该范围内是独一无二的。

其他一些语言，如 C++11，添加了一种新的 emum `enum class`，其中值在封闭范围内不直接可见。

然后您必须编写`flag_one::SUCCESS`并`flag_two::SUCCESS`获取值，因此它与您的第二个选项没有太大区别。

# r - R中依赖结果的for循环优化？

> ID：10655672
> 
> 赞同：0
> 
> 时间：2012-05-18T15:40:19.437
> 
> 标签：r

我知道向量化以及如何应用它来加速 R 中的 for 循环，但我无法找到一种使用向量加速代码的方法，其中每次迭代都依赖于前一次迭代的结果，或者依赖于迭代随机区间计算。

例如：

乔什——对此感到抱歉。所以，这里有更多细节：

```
m <- c(1, 1)
w.r <- c(0.33592935393, 0.63825353030, 0.15335253356 ) 
```

rlistl 是 3 个 2x2 矩阵的列表。所以，为了谈话，

```
r0 <- matrix(0, 2, 2) 
r1 <- matrix(1, 2, 2)
r2 <- matrix(2, 2, 2)
rlist <- list(r0, r1, r2)

N <- 500
E <- matrix(0, N, 2)

for(i in 1:N) {
    r <- c(c(1:3) %*% rmultinom(1, 1, w.r))
    E[i, ] <- mvrnorm(1, m, rlist[[r]])
} 
```

我已经尝试在循环之外进行“r <- multinom()”计算，并且 rprof 显示花费的大部分时间显然是在 mvnorm 中。任何人都可以在 R 中找到一种使用向量来加快速度的方法吗？

这是另一个例子

```
for(i in 1:N) {
    if(d$V[i, 1] & d$V[i, 2]) QQ <- 1
    else if(! d$V[i, 1] & d$V[i, 2]) QQ <- 2
    else if(! d$V[i, 1] & ! d$V[i, 2]) QQ <- 3
    else if(d$V[i, 1] & ! d$V[i, 2]) QQ <- 4

    U[i, ] <- r1bvtruncnorm(mux=mu.U[i, ]/sd.r[r1], rho=rho, q=QQ) 
```

}

想不出办法让它运行得更快。我的部分问题是我是一名 C/C++ 程序员，但我一直在尝试阅读 R 并希望确保我不会遗漏一些简单的东西。

谢谢。

编辑：

贾斯汀：

好的——所以我尝试了你的建议，但正如我所担心的那样，rep() 的行为并不像我希望的那样。我每次都需要一个单独的随机数，但使用 rep() 只需调用 rmultinom 一次并将结果复制 100 次。

```
>rep(c(c(1:3) %*% rmultinom(1, 1, ww.r)), 100)
  [1] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
 [38] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
 [75] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2

> rep(c(c(1:3) %*% rmultinom(1, 1, ww.r)), 100)
  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
 [38] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
 [75] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:39:30.377

对于我猜错的任何内容，请参阅 Josh 的评论。

但是假设您没有遗漏任何其他内容，`w.r`这是恒定的，应该从循环中删除。 `m`也是常数。'r' 和 rlist[[r]] 是随机生成的，但具有恒定参数。所以你正在做的是`N`从相同的参数生成分布时间，对吗？如果是这样的话，有很多比 for 循环更好的选择。例如

```
E <- matrix(rep(mvrnorm(1, 
                       m, 
                       rlist[[c(1:3 %*% rmultinom(1, 1, w.r))]]), 
                N),  
            N, 
            2) 
```

这应该给你与你的第一个 for 循环相同的结果。

您的第二个示例可以成为一个函数并使用`apply`. 然而，如果不知道`d`对象的实际结构，就很难知道如何最好地接近它。我假设它类似于 data.frames 的 data.frame 或列表的命名列表。`d$V`一些二维数据结构在哪里：

```
my.fun <- function(vec) {
    if(vec[1] & vec[2]) return(1)
    else if(! vec[1] & vec[2]) return(2)
    else if(! vec[1] & ! vec[2]) return(3)
    else if(vec[1] & ! vec[2]) return(4)
}

QQ <- apply(d$V, 1, my.fun) 
```

根据评论编辑：

```
r  <- 1:3 %*% rmultinom(N, 1, w.r)
E <- t(sapply(r, function(x) mvrnorm(1, m, rlist[[x]]))) 
```

或者在一条凌乱的线上：

```
t(sapply(1:3 %*% rmultinom(N, 1, w.r), function(x) mvrnorm(1, m, rlist[[x]]))) 
```

# java - 在 Java 正则表达式中验证价格

> ID：10655673
> 
> 赞同：4
> 
> 时间：2012-05-18T15:40:22.763
> 
> 标签：java, regex

我正在尝试验证价格范围格式。以下是字符串的顺序：

```
"MSRP $250.00 - Event Price $129.00" 
```

我试过这样：

```
String t=price1.replace("$","T");
t= t.replace(" ", "");
MSRPT([0-9]+).([0-9]+)-EventPriceT([0-9]+).([0-9]+) 
```

但它没有被匹配。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:43:13.837

利用：

```
MSRP\s\$([0-9]+)\.([0-9]+).*?\$([0-9]+)\.([0-9]+) 
```

请注意，您需要转义`$`并且`.`- 点是“任何”字符

但我会写：

```
MSRP\s+\$([\d\.]+).*?Event\sPrice\s+\$([\d\.]+) 
```

您将拥有 1 美元和 2 美元的价格值字符串

# f# - 将多个枚举值分配给 F# 中的属性的语法是什么？

> ID：10655679
> 
> 赞同：13
> 
> 时间：2012-05-18T15:40:43.777
> 
> 标签：f#, enums, servicestack

我正在用 F# 编写 ServiceStack webservice，需要限制一些功能（例如删除 SOAP 支持）。

在 C# 中，我使用管道操作将多个枚举 (ServiceStack.ServiceHost.Feature) 分配给 EnableFeatures 属性，如下所示：

```
SetConfig(new EndpointHostConfig
{
    DebugMode = true, //Show StackTraces in responses in development
    EnableFeatures = Feature.Json | Feature.Xml | Feature.Html | Feature.Metadata | Feature.Jsv
}); 
```

但是在 F# 中，您不能使用管道来完成此操作，而我尝试的所有其他操作都是尝试对枚举进行函数应用。在这种情况下，我该如何分配多个枚举？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-18T15:44:46.627

使用三管：

```
EnableFeatures = Feature.Json ||| Feature.Xml ||| Feature.Html ||| Feature.Metadata ||| Feature.Jsv 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-18T16:04:36.793

如果你有一堆，你可以节省一些击键`reduce`：

```
List.reduce (|||) [Feature.Json; Feature.Xml; Feature.Html; Feature.Metadata] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T15:43:24.443

您将根据基础值的构造创建值：

```
EnabledFeatures = enum<Feature>(16); // or whatever the full flag value would be for Json + Xml + Html + Metadata, etc 
```

# php - php oop 有没有办法自动设置这个变量

> ID：10655680
> 
> 赞同：0
> 
> 时间：2012-05-18T15:40:45.923
> 
> 标签：php, oop

```
class User extends DatabaseObject {

    protected static $table_name='users';
    protected static $db_fields = array();

public  function __construct() {

    // Get columns from table
    global $database;
    $result_set = $database->query("SELECT * FROM ".self::$table_name." LIMIT 1");
    $num_fields = mysql_num_fields($result_set);
    for($i=0; $i<$num_fields; $i++) {
        $column_name = mysql_field_name($result_set, $i);
        // Set column names as variables
        self::$db_fields[] = $column_name; // THIS WORKS
    $this->{$column_name}; // THIS IS PROBLEMATIC!

  }

} 
```

例如这个`$name = pulic $wherever;` ，所以我可以打电话，例如，`wherever->wherever`;

这样我就不必每次添加变量时都输入这个名称

```
public $md5;
public $credit;
public $pontaria_time;
public $Credits;
public $airoplayne;
public $city_id;
public $prisao_time;
public $crime2;
public $banck_time; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:46:27.490

```
 $this->{$column_name}; // THIS IS PROBLEMATIC! 
```

你需要使用

```
$this->$column_name = $column_value 
```

或者您可以在 $db_fields 字段中写入所有列并添加

```
public function __get($name) {} 
```

（阅读[魔术方法](http://ua.php.net/manual/en/language.oop5.magic.php)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:46:12.570

我想我不明白你的问题，但我认为你想使用[引用运算符](http://nl.php.net/manual/en/language.references.php)：

```
class MyClass {
    protected $name;

    public myfunction() {
        $foo = $this->name;
        $this->name = &$foo;
        // now $foo is a reference to $this->name
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:48:56.627

嗯...我想您是在问如何不必显式声明属性。在这种情况下，请执行以下操作：

```
for($i=0; $i<$num_fields; $i++) {
    $column_name = mysql_field_name($result_set, $i);   
    $this->$column_name =  "";
  } 
```

这会将所有列名作为属性添加到您的类中，默认情况下为公共。然后您可以使用 $this->md5、$this->credit 等访问它们...

You should probably look at PDO and returning rows and object and applying a cast to it... PDO has fetch methods where you specify a classname and does this sort of thing automagically. I highly recommend NOT creating your own database abstraction library or ORM as there are already very good ones.

# joomla - 将 github 代码显示到文章中的 Joomla 插件

> ID：10655681
> 
> 赞同：0
> 
> 时间：2012-05-18T15:40:47.923
> 
> 标签：joomla, github, embed, code-view

是否有任何可用于 joomla 2.5 的插件来嵌入来自 github 存储库的代码。对于 word press，有一个插件可以实现相同的功能（http://wordpress.org/extend/plugins/github-code-viewer-2/）。我想使用类似的东西将我的 github 存储库中的代码包含到我的 joomla/k2 文章中

```
{github url='https://github.com/jamescarr/spring-integration/blob/master/spring-integration-file/src/main/java/org/springframework/integration/file/filters/AbstractFileListFilter.java'} 
```

通过查看 wp 插件，我想编写自己的 joomla 插件，但 WP 插件使用***wp_remote_fopen***函数，我在 joomla 中没有找到相同类型的函数，并阅读了一些关于使用此类 remote_open 函数的漏洞的文章。这是 WP 插件在做什么

```
function getGitHubFile($url, $ttl = null){
        self::__loadCache($url, $ttl);

        if (isset(self::$cache[$url])) {
            $code = self::$cache[$url];
        } else {
            $code = wp_remote_fopen($url . '?raw=true');
            if ($code == '') {
                return 'You need cURL installed to use GitHub_Code_Viewer';
            }
            $code = str_replace('<', '&lt;', $code);
            self::__setCache($url, $code);
        }

        return $code;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-14T17:13:38.013

**编辑：我已经解决了下面提到的问题并** [在 github 上为 Joomla 2.5 和 3.0 发布了一个新插件](https://github.com/itoffshore/plg_githubrepo/releases)- 插件作者应该很快更新[JED 。](http://extensions.joomla.org/extensions/extension/social-web/social-display/github-repo)

* * *

~~**Joomla 2.5**有一个[Github Repo](http://www.escope.cz/en/extensions/github-repo/github-repo-documentation)插件，它使用了@Jean-Marie Favre 提到的内容。**`repojs`**~~

 **要使其在**Joomla 3**上运行，您需要编辑`githubrepo.php`和更改：

```
 if ( version_compare( JVERSION, '3.0', '<' ) == 1) { 
        if($jquery){
                $document->addScript('//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js');
        }
   } else {
        JHtml::_('jquery.framework');
   } 
```

只是`JHtml::_('jquery.framework');`

根据您的服务器设置，您可能还会看到以下错误`firebug`：

```
Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://raw.github.com/darcyclarke/Repo.js/master/fonts/repo.woff.
Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://raw.github.com/darcyclarke/Repo.js/master/fonts/repo.ttf. 
```

[启用跨域请求](https://stackoverflow.com/questions/5008944/how-to-add-an-access-control-allow-origin-header/5009126#5009126)对我不起作用，所以我通过将[repo.js](https://github.com/darcyclarke/Repo.js)中的所有字体上传到我的网络服务器并编辑`repo.js`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:59:24.990

您可能想尝试一下[http://darcyclarke.me/dev/repojs/](http://darcyclarke.me/dev/repojs/) 我已经设法将它包含在一篇 joomla 文章中（通过直接在页面中包含 javascript 代码），以便可以浏览 github 存储库从 joomla 文章中。**

# android - 在 Android、iOS 和 Blackberry 上嵌入字体 - 是否有防弹解决方案？

> ID：10655692
> 
> 赞同：2
> 
> 时间：2012-05-18T15:41:28.237
> 
> 标签：android, ios, blackberry, mobile, css

我一直在做一个测试嵌入式字体支持的*移动网络*项目，我已经尝试了谷歌字体 API 和 EOT 到目前为止结果是零星的。

到目前为止的 EOT 结果：-

*   黑莓：完全不支持（9700，粗体）
*   Android：2.1< 不支持 3.0> 部分支持，但呈现错误。
*   iOS：4> 完美运行。

谷歌字体 API 也有类似的结果。

那么，在移动网络上嵌入字体是否有任何防弹解决方案或替代方案？到目前为止，研究几乎没有产生有用的信息，因为大多数在线工作似乎都与应用程序有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:27:37.847

你可以试试[font-squirrel 的字体生成器](http://www.fontsquirrel.com/fontface/generator)——虽然我还没有用 Blackberry 测试过它，但它甚至可以在 IE7（也许是 IE6？）中工作，并且通常会输出一个非常可靠的解决方案。

# android - Android 的 MediaRecorder 的 getMaxAmplitude() 函数实际上给了我什么？

> ID：10655703
> 
> 赞同：30
> 
> 时间：2012-05-18T15:42:15.080
> 
> 标签：android, mediarecorder, decibel

Android MediaRecorder 有一个功能

```
.getMaxAmplitude();
```

正如[API](http://developer.android.com/reference/android/media/MediaRecorder.html#getMaxAmplitude%28%29)告诉我的那样，*“返回自上次调用此方法以来采样的最大绝对幅度。”* 但我找不到这是什么幅度？是帕斯卡还是瓦特？

[我在网上的几个页面上发现，您可以使用（如此处建议的](https://stackoverflow.com/questions/7189275/how-to-calculate-microphone-audio-input-power-in-decibell-unit)）计算与分贝密切相关的值。

```
double db = (20 * Math.log10(amplitude / REFERENCE)); 
```

这会让我假设返回的值是某种线性比例（可能类似于 milipascal ......）

REFERENCE=0.1（我知道这应该类似于 2*10^(-5) Pascal ((20 uPascal))，但它返回奇怪的值...... 0.1 奇怪地工作得更好。）

现在我测量 MaxAmplitude() 使用

```
获取最大振幅（）
```

并将其放入可变*幅值*中。

这是方法：

```
public double getNoiseLevel() 
{
    //Log.d("SPLService", "getNoiseLevel() ");
    int x = mRecorder.getMaxAmplitude();
    double x2 = x;
    Log.d("SPLService", "x="+x);
    double db = (20 * Math.log10(x2 / REFERENCE));
    //Log.d("SPLService", "db="+db);
    if(db>0)
    {
        return db;
    }
    else
    {
        return 0;
    }
} 
```

这是在半秒内完成 5 次，这是平均的

```
for(int i=0; i<5; i++)
{
    try 
    {
            Thread.sleep(100);
    } 
    catch (InterruptedException e) 
    {
            e.printStackTrace();
            return 0;
    }
    level = level+getNoiseLevel();
    if(level>0)
    {
        counter++;
    }
}
level=level/counter;
Log.d(LOG_TAG, "level="+level); 
```

我得到的东西看起来有点像分贝，但我根本不确定它的实际分贝......

那么，有人可以帮我解决这个问题吗？API根本没有指定返回的内容似乎很奇怪......

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-17T10:28:41.260

我可以找到这个问题的答案，我会在这里分享给关心的人：该`MediaRecorder.getMaxAmplitude()`函数返回无符号的 16 位整数值 (0-32767)。这可能只是范围从 -32768 到 32767 的 CD 质量样本值的 abs()。这意味着它们可能代表麦克风构建的 0-100% 最大电压范围的电输出的 16 位数字化进那部手机。由于即使在一个品牌的手机中，这些麦克风的精确范围有时也会有所不同，即使是类似的手机，在与相同声源的距离相同的情况下也不一定会返回相同的值。

然而，这个值与帕斯卡中的声压相关，因为它也是声压的线性量化，在可以用给定麦克风测量声音的区域（由于手机的限制，它不会覆盖整个频谱）。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-14T08:16:28.793

在这方面又做了一些工作。使用经过校准的 SPL 计和具有不同纯频率、白噪声和粉红噪声的智能手机进行的一些测试，我现在知道手机麦克风不适用于任何应在 90 到 100 dB（SPL）以上的地方注册的任何东西，具体取决于手机.

假设 90 dB(SPL) 是最大值，可以计算出这将对应于麦克风处 0.6325 Pa 的压力。现在假设 p0=0.0002 Pa 是参考最小值，并假设这将在 getMaxAmplitude() 中注册为 0（实际上永远不会发生），我们可以将 getMaxAmplitude() 函数的值与麦克风的最大压力相关联。这意味着来自 getMaxAmplitude() 的 16375 的结果将对应于 0.3165 Pa 的最大压力。这当然不是很科学，因为最大值和最小值纯属猜想，但它为我们提供了一个起点。我们现在可以计算 p

p=getMaxAmplitude()/51805.5336

知道麦克风的压力后，我们可以使用众所周知的公式计算 dB(SPL) 值

X = 20 log_10 (p/p0)

这仍然会给出一个很高的值，因为在计算中只使用了最大幅度。要解决这个问题，一定不要使用 getMaxAmplitude() ，虽然这稍微超出了这个问题的重点，但无论如何我都会把代码放进去，希望它会有所帮助

```
public class NoiseRecorder 
{

private final String TAG = SoundOfTheCityConstants.TAG;
public static double REFERENCE = 0.00002;

public double getNoiseLevel() throws NoValidNoiseLevelException
{
    Logging.e(TAG, "start new recording process");
    int bufferSize = AudioRecord.getMinBufferSize(44100,AudioFormat.CHANNEL_IN_DEFAULT,AudioFormat.ENCODING_PCM_16BIT);
    //making the buffer bigger....
    bufferSize=bufferSize*4;
    AudioRecord recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
            44100, AudioFormat.CHANNEL_IN_DEFAULT, AudioFormat.ENCODING_PCM_16BIT, bufferSize);

    short data [] = new short[bufferSize];
    double average = 0.0;
    recorder.startRecording();
    //recording data;
    recorder.read(data, 0, bufferSize);

    recorder.stop();
    Logging.e(TAG, "stop");
    for (short s : data)
    {
        if(s>0)
        {
            average += Math.abs(s);
        }
        else
        {
            bufferSize--;
        }
    }
    //x=max;
    double x = average/bufferSize;
    Logging.e(TAG, ""+x);
    recorder.release();
    Logging.d(TAG, "getNoiseLevel() ");
    double db=0;
    if (x==0){
        NoValidNoiseLevelException e = new NoValidNoiseLevelException(x);
        throw e;
    }
    // calculating the pascal pressure based on the idea that the max amplitude (between 0 and 32767) is 
    // relative to the pressure
    double pressure = x/51805.5336; //the value 51805.5336 can be derived from asuming that x=32767=0.6325 Pa and x=1 = 0.00002 Pa (the reference value)
    Logging.d(TAG, "x="+pressure +" Pa");
    db = (20 * Math.log10(pressure/REFERENCE));
    Logging.d(TAG, "db="+db);
    if(db>0)
    {
        return db;
    }
    NoValidNoiseLevelException e = new NoValidNoiseLevelException(x);
    throw e;
}
} 
```

这些值现在来自 4 秒样本中所有幅度的平均值，因此更准确。之后完成上述计算。这将给出更现实的分贝值。请注意，手机麦克风仍然很糟糕，并且该算法不会产生实际的 dB(SPL)，而只会产生比之前更好的近似值。

要获得某些应用程序的性能，还需要做更多工作。这些应用程序中的大多数都使用滑动窗口，这意味着持续录制并滑动 x 秒的窗口以持续评估声音级别。此外，我将进行一些评估，什么 db Value 最适合用作最大值，现在它是 90 dB(SPL)/0.6325 Pa，这只是一个合理的猜测，它可能会略高于该值。

一旦我有更多我会更新信息。

# extjs - 带有 JSON 读取的 EXTJS 4 表单填充

> ID：10655704
> 
> 赞同：1
> 
> 时间：2012-05-18T15:42:30.983
> 
> 标签：extjs, extjs4.1

我是 EXTJS 的新手，目前正在使用 EXTJS-4.1。我有一个基本表单，我需要在页面加载时填充数据。服务器 url 将返回一个 JSON。

```
[{"countryid":1,"countrycode":"US","countryname":"United States"}] 
```

我的表单代码是

```
Ext.require([
    'Ext.form.*'
    //'Ext.layout.container.Column',
    //'Ext.tab.Panel'
    //'*'
]);

Ext.onReady(function() {
    Ext.QuickTips.init();

    var bd = Ext.getBody();

    /*
     * ================  Simple form  =======================
     */
    bd.createChild({tag: 'h2', html: 'Form 1 - Very Simple'});

    var required = '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>';

Ext.define('app.formStore', {
extend: 'Ext.data.Model',
fields: [
   {name: 'countryid'},
   {name: 'countrycode'},
   {name: 'countryname'}
]
});

var myStore = Ext.create('Ext.data.Store', {
model: 'app.formStore',
proxy: {
    type: 'ajax',
    url : 'http://localhost/milestone_1/web/app_dev.php/md/country/show/1',
    reader:{ 
        type:'json'                     
    }
},
autoLoad:true,
    listeners: {
        load: function() {
            var form = Ext.getCmp('formJobSummary'); 
            form.loadRecord(myStore.data.first());
        }
    }
});

var testForm = Ext.create('Ext.form.Panel', {
                    width: 500,
                    renderTo: Ext.getBody(),
                    title: 'Country Form',
                    waitMsgTarget: true,
                    fieldDefaults: {
                        labelAlign: 'right',
                        labelWidth: 85,
                        msgTarget: 'side'
                    },
                    items: [{
                        xtype: 'fieldset',
                        items: [{
                                xtype:'textfield',
                                fieldLabel: 'ID',
                                name: 'countryid'
                            }, {
                                xtype:'textfield',
                                fieldLabel: 'CODE',
                                name: 'countrycode'
                            }, {
                                xtype:'textfield',
                                fieldLabel: 'COUNTRY',
                                name: 'countryname'
                        }]
                    }]

            });

    this.testForm.getForm().loadRecord(app.formStore);
}); 
```

我能够将相同的 JSON 填充到网格中。你能帮我解决吗...我在网上找到了很多例子并尝试过，但仍然没有运气。上面给出的也是我在浏览时得到的修改后的代码片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:20:11.923

`load()`函数是异步的。所以你做了一件正确的事——为加载事件创建一个处理程序并将逻辑放在那里。但是你犯了几个错误：

1.  在负载处理程序中，您将有一些函数参数。第一个参数将被存储 - 所以你不需要使用全局变量。

2.  你不需要`this.testForm.getForm().loadRecord(app.formStore);`- 因为它不是一个有效的命令，并且在那一刻你不知道你的商店是否真的被加载了。去掉它。您已经在存储处理程序中有 loadRecords。

3.  表单渲染和存储自动加载是两个不同的事件，您无法控制它们的时间。因此，我建议您禁用`autoLoad`商店并`store.load()`在您知道表格准备好后手动调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:45:52.027

`var form = Ext.getCmp('formJobSummary');console.log(form)`可能会回来`undefined`。为表格指定一个名称，然后就可以了。或者更好...

```
// Ext.require([
// 'Ext.form.*'
//'Ext.layout.container.Column',
//'Ext.tab.Panel'
//'*'
// ]); // you dont need ext.require for ext integrated stuff

Ext.onReady(function () {
    Ext.QuickTips.init();

    //var bd = Ext.getBody(); 

    /*
     * ================  Simple form  =======================
     */
    //bd.createChild({
    //  tag: 'h2',
    //  html: 'Form 1 - Very Simple'
    //}); // over written by the form anyway

    // var required = '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'; // never used

    Ext.define('app.formStore', {
        extend: 'Ext.data.Model',
        fields: [{
            name: 'countryid'
        }, {
            name: 'countrycode'
        }, {
            name: 'countryname'
        }]
    });

    var testForm = Ext.create('Ext.form.Panel', {
        width: 500,
        renderTo: Ext.getBody(),
        name:'formJobSummary', //why your orignal bit wasn't working
        title: 'Country Form',
        waitMsgTarget: true,
        fieldDefaults: {
            labelAlign: 'right',
            labelWidth: 85,
            msgTarget: 'side'
        },
        items: [{
            xtype: 'fieldset',
            items: [{
                xtype: 'textfield',
                fieldLabel: 'ID',
                name: 'countryid'
            }, {
                xtype: 'textfield',
                fieldLabel: 'CODE',
                name: 'countrycode'
            }, {
                xtype: 'textfield',
                fieldLabel: 'COUNTRY',
                name: 'countryname'
            }]
        }]

    });

    var myStore = Ext.create('Ext.data.Store', {
        model: 'app.formStore',
        proxy: {
            type: 'ajax',
            url: 'http://localhost/milestone_1/web/app_dev.php/md/country/show/1',
            reader: {
                type: 'json'
            }
        },
        autoLoad: true,
        listeners: {
            load: function (store,record,e) {
                testForm.loadRecord(store.first());
            }
        }
    });

}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-19T08:02:56.087

几件事要尝试：

1）如果你在 localhost 上寻找你的文件，不要把 localhost 放在 url 上，只写

网址：'/milestone_1/web/app_dev.php/md/country/show/1'

你的 php 文件是做什么的？你可以发布代码吗？

3) 将代理配置放在模型上而不是存储上。

4）你有没有尝试测试商店是否在加载时读取了记录？有一个console.log？

# java - 添加检查以验证该字段未收到某种类型的字符

> ID：10655708
> 
> 赞同：1
> 
> 时间：2012-05-18T15:42:54.230
> 
> 标签：java, mysql, validation, jsp

我正在编写一个 java web 应用程序，其中 jsp 中的某些字段需要特定字符（删除变音符号）。这个任务对于 javascript 和 servlet 端的验证方法并不难，但如果有人（可能是同事）忘记了，仍然可以添加字符验证。

所以我不知道是否可以在没有人会像数据库这样经常修改的区域添加验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:45:39.933

根据您的要求，您也许可以创建一个触发器来监视这个

# asp.net - 自定义角色提供程序无法在 IIS 上运行，但在 VS 开发服务器中运行良好

> ID：10655709
> 
> 赞同：0
> 
> 时间：2012-05-18T15:42:59.653
> 
> 标签：asp.net, iis, roleprovider

在深入谷歌搜索后，我没有找到任何解决我的问题的解决方案或方法，所以在这里问。在 web.config 的第一部分

```
......
   <location path="DevReg.aspx">
    <system.web>
      <authorization>
        <allow roles="C,csvImportExport"/>
        <deny users="*,?"/>
      </authorization>
    </system.web>
  </location>
.......
  <system.web>
    <roleManager enabled="true" defaultProvider="MyRoleProvider">
      <providers>
        <clear />
        <add name="MyRoleProvider" type="DataAccess.Common.MyRoleProvider, DataAccess" applicationName="myapp" />
      </providers>
    </roleManager>
  </system.web>
....... 
```

同一解决方案中其他项目中的主要 WebApp。当我在 Visual Studio 提供程序中运行应用程序时运行良好——授权工作必须进行，我也可以从代码中调用我的提供程序（例如 IsUserInRole 返回正确的结果）。但是在部署到本地 IIS (Win 7/ IIS 7.5) 之后。我尝试使用 VirtualDirectory 和使用 WebApp，但没有成功。

当我在 IIS 中运行的应用程序看起来像服务器从不使用角色提供程序时，只在启动时调用 Initialize 方法和更新更多。

请给我正确的方向来解决这个问题，如果需要我会显示更多细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:18:14.730

创建一个新`Application Pool`的，`Managed Pipeline Mode`设置为`Integrated`。将`Identity`值设置为`NetworkService`。在此设置新创建`Application Pool`的`Application Pool`站点之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:39:10.203

换个角度后，我发现了问题。在项目中，我们还使用了一个丑陋的 HttpHandler 一行：`Context.SkipAuthorization = true;`这让我很烦恼。

# jquery - 在异步事件之后提交表单和调用排队事件时遇到问题

> ID：10655710
> 
> 赞同：1
> 
> 时间：2012-05-18T15:43:01.510
> 
> 标签：jquery, preventdefault, stoppropagation, jquery-1.3

我在本地设置（使用 jquery.1.6.4）上工作，但它不适用于开发设置（jquery.1.3.2）。

考虑以下形式 -

```
<form onsubmit="return validateMacros();">
     <input id="formsubmitbutton" type="submit" name="formsubmitbutton" value="Submit" />
</form> 
```

注意`validateMacros();`上面的调用。

以及以下 javascript -

```
jQuery(document).ready(function()
{

$("input#formsubmitbutton").click(preValidateUrls); 

        function preValidateUrls(evt)
        {
                evt.preventDefault(); //to prevent form submission until completion of async event

                $.ajax({
                    ...
                    ...
                    success: function(res)
                    {
                         $("form#frmBanners").submit();  //This submits the form in case of both versions but in 1.3.2 case, the validateMacros() function is not called
                    }
               });
       }

});

function validateMacros()
{
   //some logic here - which is not executing in case of jquery.1.3.2
} 
```

加载 jquery.1.6.4 时，该函数`validateMacros()`在执行完成后执行`preValidateUrls()`，这是所需的。

但是当 jquery.1.3.2 加载时，`validateMacros()`根本不执行并且表单只是提交。

我如何使它在两个版本上都工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:46:44.490

不显眼！

```
$('form#frmBanners').on('submit', validateMacros); 
```

我们在这里所做的是将函数**订阅**`submit`到表单的事件，在你给它一个 id 之后（我刚刚注意到你用作`frmBanners`示例）。Unobtrusive 意味着您没有在 HTML 中添加任何 Javascript，这是 jQuery 等库的主要目的。所以，在你的外部 Javascript 文件的任何地方，包括我上面提供的行。任何时候*提交*表单，而**不仅仅是**单击提交按钮时，都会调用该函数。

因此，当您调用 时`$("form#frmBanners").submit();`，会触发事件并调用函数。就触发此类事件而言，这更接近于遵循惯例。

# c# - FileInfo.Length 并不总是给我正确的文件大小

> ID：10655715
> 
> 赞同：1
> 
> 时间：2012-05-18T15:43:19.553
> 
> 标签：c#, client-server

我面临着一个非常奇怪的问题`FileInfo`和`Length`财产。我正在编写一个服务器来响应向客户端发送文件（主要是图像）的调用。我想在发送实际文件之前将文件大小发送给客户端。我`FileInfo`用来查找文件大小，但奇怪的是它每次都没有给我正确的大小。换句话说，对于同一个文件，我收到不同的大小，有时小于实际大小，有时是正确的（但从不超过实际大小）。是什么让问题更加奇怪，如果我将相同的代码复制到一个新项目（不是服务器，只是一个测试项目），它可以正常工作并给出正确的答案。服务器使用线程，因此多个客户端可以连接（测试项目没有），但我认为这与`FileInfo`. 这是我的代码：

```
String fullFilePath = Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + "\\" + imageName;
FileInfo file1 = new FileInfo(fullFilePath);
Console.Writeline("File Size: {0}", file1.Length); 
```

非常基本的代码！我的图像很小，仅在 4 到 10 KB 范围内。难道我做错了什么？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:23:25.087

毕竟我明白了！问题不在`FileInfo`课堂上，问题是我的客户端服务器通信中的概念问题。图像最初不在服务器上，它们来自其他客户端。发生的事情是客户端正在向服务器发送图像，并且获取该图像的请求正在从另一个客户端到达服务器，但**在**服务器实际完成将图像保存在磁盘上之前。因此，`FileInfo`获取的`Length`是当前保存的字节数，而不是文件的总字节数。

解决方案如下：当一个文件被发送到服务器时，等待一段时间（例如1秒）让服务器完成保存过程，然后该文件可以准备好被其他客户端下载。

# html - 布局在 iPad/Safari 中显示不正确

> ID：10655719
> 
> 赞同：2
> 
> 时间：2012-05-18T15:43:37.610
> 
> 标签：html, css, ipad, safari

我一直在建立网站[http://orion.viperdmc.com](http://orion.viperdmc.com)。除了在 iPad 上运行的 Safari 之外，该布局似乎在所有浏览器上都能正常工作。

在该浏览器上，如果我调整页面大小以使顶部的大图像适合 iPad 显示器，则下面的内容将显示为左对齐而不是居中。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:01:16.267

好的，我认为您可以通过将标记中第一个容器的宽度与图像 ( `#feature-image-inner`) 匹配来修复它：

因此，在标记`.first`中的第一个类中添加一个类：`.container`

```
<div class="container first"> 
```

然后使用下面的 CSS 定位它。

```
.container.first{
    width: 1280px;
} 
```

# java - 将对象序列化为 XML 并附加 1 天

> ID：10655724
> 
> 赞同：1
> 
> 时间：2012-05-18T15:43:57.510
> 
> 标签：java, xml, parsing, serialization, sax

所以，我提出了另一个问题“[将对象数据保存到文件](https://stackoverflow.com/questions/10654236/java-save-object-data-to-a-file)”，我意识到我不够具体。

我正在编写的程序可以很好地保存文件的历史数据，所以我的目标是这样的：

```
if timePolled > midnight
   if fileExists(fileName)
       appendData()
   else
       createFile(data_dd_mm_yy) // in xml
endif 
```

看我上面都是VB... ick

无论如何，对象本身看起来像这样：

```
public class IHandler{
    public double currentLoad;
    public String currentPrice;
    public String configArgs[];
} 
```

我不确定我将如何去做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:00:28.010

如果我理解正确，您想知道如何安排重复任务。这是如何做到的。首先，您需要一个可运行类，其中包含要在 run() 函数中执行的逻辑（即 VB 代码中顶层 if 语句中的内容）。假设有一个名为“task”的类的实例。然后，您需要执行以下操作：

```
ScheduledExecutorService exService = Executors.newScheduledThreadPool(CORE_POOL_SIZE);
exService.scheduleAtFixedRate(task, numberOfSecondsTilMidnight, 
                                        twentyFourHoursInSeconds, TimeUnit.SECONDS); 
```

其中 numberOfSecondsTilMidnight 是根据当前系统时间计算的，而 twoFourHoursInSeconds 仅为 24*60*60（这是运行它的频率。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:53:27.483

对于序列化，Xstream ( [http://x-stream.github.io/](http://x-stream.github.io/) ) 可以解决问题。然后剩下的你可以用简单的 Java 文件 IO 来处理。

# php - PHP 类中的会话

> ID：10655725
> 
> 赞同：0
> 
> 时间：2012-05-18T15:44:01.297
> 
> 标签：php, oop, session

> **可能重复：**
> [检查 PHP 类中的会话变量](https://stackoverflow.com/questions/10654809/checking-a-session-variable-in-a-php-class)

```
public function __construct(){
        $this->languages     = get_option('test_trans');
        $this->default_lang  = $this->default_language();
        $this->taxonomies   = get_taxonomies(array(),'names');

        add_action('init', array($this, 'webchanics_e_translations_session_master'), 1);
        session_start();
        $this->current_language = $_SESSION['language'];

    }

    function webchanics_e_translations_session_master(){    
        if(!$this->languages){
            unset($_SESSION['language']);
        }else{
            $check_lang_by_session = $this->check_language($_SESSION['language']);
            if(!$check_lang_by_session){
                $_SESSION['language'] = $this->default_lang;
            }

            $check_lang_by_url = $this->check_language($_GET['lang']);
            if($check_lang_by_url){
                $_SESSION['language']=$_GET['lang'];
            }
        }  
    } 
```

此代码根据某些条件设置会话，并调用此会话中存储的值。在类外，会话的新值立即可用，但在类内 $this->current_language 的值保持旧值，直到我再次刷新页面。这有什么解释？以及如何使类内的值立即改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:47:54.193

您正在按值进行分配，而不是按引用进行分配。
参考做：`$this->current_language = &$_SESSION['language'];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:46:29.420

您正在分配to的**值**，这意味着当您访问时，您正在让 PHP 复制（PHP 仅在需要时复制），而不是对同一内存位置的引用。`$_SESSION['language']``$this->current_language``$this->current_language``$_SESSION['language']`

您可以改为处理`$this->current_language`，并在块的末尾，将其同步回`$_SESSION['language']`或完全省略`$this->current_language`并仅访问`$_SESSION`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:47:30.263

您必须存储参考，而不仅仅是值。

```
$this->current_language = &$_SESSION['language']; 
```

请参阅这篇关于PHP.net 上的[PHP 参考的文章。](http://php.net/manual/en/language.references.php)

# c - 如何实现无限循环

> ID：10655726
> 
> 赞同：0
> 
> 时间：2012-05-18T15:44:02.187
> 
> 标签：c, sockets, infinite-loop, irc, pooling

实现 IRC 客户端（仍然）。我几乎拥有一切，但今天我注意到，有一个主要问题。
我得到了服务器发送给我的所有数据，但如果我什么都不做，只是在显示发送给我的数据后等待，我的`while(1)`循环只检查一次是否有更多数据要接收然后停止。仅当我键入并发送某些内容时才重新开始，而不是在发送我键入的内容后检查是否有任何数据在套接字上等待并最终显示它。
这显然是错误的，因为在这种情况下，我看到之前收到的消息，只有当我发送一些东西时。
这是我的代码：

```
while(1){    
  if((readReady = readReadiness(sockfd))==0){    //nothing to recv
          if(((writeReady = writeReadiness(sockfd))>0) && (readReady = readReadiness(sockfd))==0){  //sending is possible  
                (data sending part...)  
          }
          else
                continue; //if there s no data to read and cant send
          }
  else{         //if there s some data to recv() on the socket buffer 
          (parsing and receiving data part...)  
   } 
    continue;
} 
```

`readReadiness()`并`writeReadiness()`用于`select()`检查是否有任何数据要接收或可能发送一些。

问题是：如何制作无限循环，即使我什么都不做，也会重复检查是否有任何数据要接收。? （`while(1)`在我再次发送之前停止检查）
我尝试使用`fork()`，但我不知道如何让它工作并汇集数据，同时仍然让我有可能发送/接收和显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:52:35.243

在您的 while(1) 循环中，您可以定期“戳”服务器以获取新内容。响应将更新您的套接字的内容。这将触发套接字缓冲区上有数据要接收到 recv() ......

# ruby-on-rails - 用于 nil:NilClass 的 Rails 未定义方法“类别”

> ID：10655727
> 
> 赞同：1
> 
> 时间：2012-05-18T15:44:05.790
> 
> 标签：ruby-on-rails, haml

我有一个非常奇怪的问题，我有这个文件用于 User#show 视图：

```
%h1 My Appliances
.floatright= link_to "Add appliance", new_appliance_profile_path
%table
  %tr
    %th Category
    %th Manufacturer
    %th Model
    %th Room
    %th Hours On
    %th Hours Sleeping
    %th
  - @user.appliance_profiles.each do |ap|
    %tr{:class => cycle('list_line_odd', 'list_line_even')}
      %td= ap.appliance.category
      %td= ap.appliance.manufacturer
      %td= ap.appliance.model
      %td= ap.room.name
      %td= ap.hours_on
      %td= ap.hours_sleep
      %td= link_to "edit", edit_appliance_profile_path(ap) 
```

并收到错误：`undefined method 'category' for nil:NilClass`

我的模型确实有一个类别字符串属性。这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:47:47.873

在`ap.appliance.category`, `ap.appliance`为零

您可以尝试根据它是否为 nil 来初始化它/打印

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T15:48:36.957

这意味着在此调用中：

```
%td= ap.appliance.category 
```

`appliance`是`nil`。如果不是所有人`appliance_profiles`都有一个没关系`appliance`，你可以这样做：

```
%td= ap.appliance.try(:category) 
```

如果所有的`appliance_profiles` *都应该有*一个`appliance`，你必须检查你的数据库是否有丢失的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T15:48:38.577

该错误意味着正在调用“类别”方法的变量为零。在这种情况下，该行是

```
%td= ap.appliance.category 
```

因此，它`ap.appliance`解析为 nil。为什么，鉴于提供的信息，我无法判断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T17:32:48.910

这可能意味着您的一项操作没有保存记录，因此返回 nil。检查您的控制台。

# django - 量化结果对于当前上下文有太多数字

> ID：10655730
> 
> 赞同：16
> 
> 时间：2012-05-18T15:44:16.560
> 
> 标签：django, django-models, django-admin

我试图将操作结果保存在我的 admin.py 中，但出现此错误：

> 量化结果对于当前上下文有太多数字

```
....
def save_model(self, request, obj, form, change):

    usuario_libra   = obj.consignee.membresia.libra
    valores         = Valores.objects.get(pk=1)
    vtasa           = valores.tasa
    vaduana         = valores.aduana
    vgestion        = valores.gestion
    vfee            = valores.fee
    vcombustible    = valores.combustible

    trans_aereo     = obj.peso * usuario_libra * vtasa
    aduana          = (obj.peso * vaduana )*vtasa
    fee_airpot      = (obj.peso * vfee)*vtasa
    combustible     = (obj.peso * vcombustible)*vtasa
    itbis           = (trans_aereo+vgestion)*Decimal(0.16)
    total           = trans_aereo + vgestion + aduana + fee_airpot + combustible + itbis

    if not obj.id:
        obj.total = total
        ... 
```

这是什么意思？，我所有的模型字段都是十进制任何帮助请

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-26T19:03:17.377

我能够通过增加“max_digits”字段选项来解决这个问题。

```
class Myclass(models.Model):
  my_field = models.DecimalField(max_digits=11, decimal_places=2, blank=True, null=True) 
```

请务必使其足够大以容纳您希望保存的最长数字。

如果这不起作用，可能还需要通过以下方式将精度设置得更大：

```
from decimal import getcontext
  ...
  getcontext().prec = 11 
```

有关完整的上下文参数，请参阅 python 十进制文档。

# visual-studio-2010 - 用于启动 Visual Studio 并禁用该实例的插件/扩展的命令行

> ID：10655732
> 
> 赞同：11
> 
> 时间：2012-05-18T15:44:21.140
> 
> 标签：visual-studio-2010, visual-studio, command-line, add-in

我正在编写一个 Visual Studio 模板向导。为了调试它，我让它启动了一个新的 Visual Studio 2010 实例。

我的 Visual Studio 2010 需要很长时间才能启动。我相信这是由于我为 Visual Studio 安装的加载项和扩展。

我宁愿不去禁用它们（我真的很喜欢它们）。所以我希望有一种方法可以通过命令行禁用它们。

只需运行一个干净的 Visual Studio 实例。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-27T12:47:07.510

试试安全模式

```
devenv.exe /safemode 
```

哪一个

> 以安全模式启动 Visual Studio，并仅加载默认环境和服务，以及第三方包的随附版本。

请参阅[http://msdn.microsoft.com/en-us/library/xee0c8y7.aspx](http://msdn.microsoft.com/en-us/library/xee0c8y7.aspx)

# r - R中的cbc.read.table函数的问题

> ID：10655734
> 
> 赞同：1
> 
> 时间：2012-05-18T15:44:31.483
> 
> 标签：r

> **可能重复：**
> [在读取文件时尝试在 R + 中使用过滤器读取具有 cbc.read.table 函数的文件的一些问题](https://stackoverflow.com/questions/10626070/some-issues-trying-to-read-a-file-with-cbc-read-table-function-in-r-using-filt)

a）我正在尝试使用R`cbc.read.table`中的`colbycol`包中的函数读取一个相对较大的 .txt 文件。根据我一直在阅读的内容，当我们有大文件（要读取超过 GB 的文件）时，这个包使工作更容易R）并且我们不需要所有的列/变量来进行分析。另外，我读到该函数`cbc.read.table`可以支持相同`read.table`的参数。但是，如果我传递参数`nrows`（为了在 R 中预览我的文件），我会收到以下错误：

```
#My line code. I'm just reading columns 5,6,7,8 out of 27
i.can <- cbc.read.table( "xxx.txt", header = T, sep = "\t",just.read=5:8, nrows=20)
#error message
Error in read.table(file, nrows = 50, sep = sep, header = header, ...) : 
formal argument "nrows" matched by multiple actual arguments 
```

所以，我的问题是：你能告诉我如何解决这个问题吗？

b) 之后，我尝试使用以下代码读取所有实例：

```
i.can.b <- cbc.read.table( "xxx.txt", header = T, sep = "\t",just.read=4:8) #done perfectly
my.df <- as.data.frame(i.can.b) #getting error in this line
Error in readSingleKey(con, map, key) : unable to obtain value for key 'Company' #Company is a string column in my data set 
```

所以，我的问题又是：我该如何解决这个问题？

c）您知道在读取文件时我可以过滤（按实例条件）的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:16:21.057

# c# - 数组类型声明 C#

> ID：10655737
> 
> 赞同：1
> 
> 时间：2012-05-18T15:44:49.797
> 
> 标签：c#

我声明了一个 16 位有符号整数数组，其元素可能达到数百万。我一直在将数组声明为 Long 类型，因为我一直在考虑元素长度而不是每个单独元素的限制。根据元素类型声明数组的类型是否正确？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T15:45:44.297

数组的元素类型与索引的类型无关。
C# 数组仅支持 32 位`int`索引。

您应该使用`short[]`.

# iphone - Xcode 工具生成大量 __CFCachedURLResponse 内存泄漏

> ID：10655738
> 
> 赞同：1
> 
> 时间：2012-05-18T15:45:01.043
> 
> 标签：iphone, xcode

我没有`NSURL`在我的代码中使用任何 API，但 Xcode Instruments 说我的代码有很多`__CFCachedURLResponse`内存泄漏。

例如，

```
Leaked Object # Address Size Responsible Library Responsible Frame
__CFCachedURLResponse,10 < multiple > 320 Bytes IPhoneUIBase    
-[InterestGroupStockTR_RTS composeRTSData:] 
```

代码是在创建添加几个对象到数组之后，然后调用自定义类。

```
NSMutableArray *arrCodes = [[NSMutableArray alloc] init];

for(int j = 0; j < countCode; j++ )
{
    NSDictionary *pData = [listData objectAtIndex:j];       
    NSString *stockCode = [ NSString stringWithFormat:@"%@", pData ];
            NSMutableDictionary *codeData2 = [[NSMutableDictionary alloc] initWithObjectsAndKeys:stockCode , @"acCode" , NULL ];
    [arrCodes addObject:codeData2];
    [codeData2 release];
}   
[trData.dict setObject:arrCodes forKey:@"MULTI_SBR_ARRAYRP"];               
[self requestWithData:trData];
    [arrCodes removeAllObjects];
[arrCodes release]; 
```

*   `__CFCachedURLResponse`另一个问题是和之间有什么区别`__CFURLCacheNode`？`__CFURLCacheNode`根据仪器，某些类存在内存泄漏。

谢谢

# c# - 使用泛型列表对象 C# 反序列化复杂对象

> ID：10655748
> 
> 赞同：0
> 
> 时间：2012-05-18T15:45:59.503
> 
> 标签：c#, xml-serialization, xml-deserialization

我有以下几行代码和问题。

```
[Serializable, XmlRoot(Namespace = "http://www.asd.com", ElementName = "DalClassObject", IsNullable = true)]
[XmlType(AnonymousType = true)]
public class DalClassObject<T> 
{
    public DalClassObject()
    { }

    [XmlElement(ElementName = "objeto", IsNullable = true)] 
    public T Objeto { get; set; }
    [XmlElement(ElementName = "indicador")] 
    public Int32 Indicador { get; set; }
    [XmlElement(ElementName = "validador")] 
    public Boolean Validador { get; set; }
    [XmlElement(ElementName = "mensaje")] 
    public String Mensaje { get; set; }
    //[XmlElement(ElementName = "coleccion")] 
    [XmlArray("colecciones")]
    [XmlArrayItem] 
    public List<T> Colecciones { get; set; }

} 
```

和

```
[Serializable, XmlRoot("botblpacientes")] 
public class BoTblPacientes
{
    [XmlElement(ElementName = "tblPacientesID")] 
    public String tblPacientesID { get; set; }

    [XmlElement(ElementName = "tblPacientesApellidos")] 
    public String tblPacientesApellidos { get; set; }

    [XmlElement(ElementName = "tblPacientesNombres")] 
    public String tblPacientesNombres { get; set; }

    [XmlElement(ElementName = "tblPacientesDocumento")] 
    public String tblPacientesDocumento { get; set; }

    [XmlElement(ElementName = "tblPacientesCorreo")] 
    public String tblPacientesCorreo { get; set; }

    [XmlElement(ElementName = "tblPacientesFoto")] 
    public byte[] tblPacientesFoto { get; set; }

    [XmlElement(ElementName = "tblPacientesDireccion")] 
    public String tblPacientesDireccion { get; set; }

    [XmlElement(ElementName = "tblPacientesEstadoCivil")] 
    public Int32 tblPacientesEstadoCivil { get; set; }

    [XmlElement(ElementName = "tblPacientesFechaNacimiento")] 
    public DateTime tblPacientesFechaNacimiento { get; set; }

    [XmlElement(ElementName = "tblPacientesSexo")] 
    public Int32 tblPacientesSexo { get; set; }

    [XmlElement(ElementName = "tblPacientesTlfCasa")] 
    public String tblPacientesTlfCasa { get; set; }

    [XmlElement(ElementName = "tblPacientesTlfCelular")] 
    public String tblPacientesTlfCelular { get; set; }

    [XmlElement(ElementName = "tblPacientesTlfOficina")] 
    public String tblPacientesTlfOficina { get; set; }

    [XmlElement(ElementName = "tblPacientesLugarNacimiento")] 
    public String tblPacientesLugarNacimiento { get; set; }

    [XmlElement(ElementName = "tblPacientesMotivoConsulta")] 
    public String tblPacientesMotivoConsulta { get; set; }

    [XmlElement(ElementName = "tblPacientesFechaRegistro")] 
    public DateTime tblPacientesFechaRegistro { get; set; }

    [XmlElement(ElementName = "tblPacientesIDMaster")] 
    public Int32 tblPacientesIDMaster { get; set; }
}

    public static T DeserializeObject<T>(string xml)
    {
        XmlSerializer xs = new XmlSerializer(typeof(T));
        MemoryStream memoryStream = new MemoryStream(StringToUTF8ByteArray(xml));
        XmlTextWriter xmlTextWriter = new XmlTextWriter(memoryStream, Encoding.UTF8);
        return (T)xs.Deserialize(memoryStream);
    }

    private static Byte[] StringToUTF8ByteArray(string pXmlString)
    {
        UTF8Encoding encoding = new UTF8Encoding();
        byte[] byteArray = encoding.GetBytes(pXmlString);
        return byteArray;
    } 
```

我在简历中使用以下内容进行反序列化

```
 DalClassObject<BoTblPacientes> objeto = new DalClassObject<BoTblPacientes>();
    objeto.Objeto = new BoTblPacientes();
    objeto.Colecciones = new List<BoTblPacientes>();
    String valor = String.Empty;

    objeto = UtilClassSerializacion.DeserializeObject<DalClassObject<BoTblPacientes>>(reader[0].ToString()); 
```

当我检查 objeto.Collecciones 的值时，我看到的值都是空的。如果这返回一个 2 值都变为空。我的序列化有什么问题？？我尝试使用 xmlelement、xmlarray、xmlarrayitem。

我的 xml 对象是

```
 <?xml version="1.0" ?>
    <DalClassObject xmlns="http://www.asd.com"><objeto class="BoTblPacientes"></objeto>
    <validador>true</validador><mensaje>El paciente  existe en el sistema .</mensaje>
    <colecciones>
    <BoTblPacientes>
    <tblpacientesmotivoconsulta>5</tblpacientesmotivoconsulta><tblpacientestlfcasa>5</tblpacientestlfcasa>
    <tblpacientescelular>5</tblpacientescelular><tblpacientesoficina>5</tblpacientesoficina>
    <tblpacientescorreo>5</tblpacientescorreo><tblpacientesdireccion>5</tblpacientesdireccion>
    <tblpacientesapellidos>5</tblpacientesapellidos><tblpacientesdocumento>5</tblpacientesdocumento>
    <tblpacientessexoid>0</tblpacientessexoid><tblpacientesfechanacimiento class="sql-date">2012-05-13</tblpacientesfechanacimiento>
    <tblpacientesnombres>5</tblpacientesnombres><tblpacientesid>2</tblpacientesid><tblpacientesestadocivil>0</tblpacientesestadocivil>
    <tblpacientesfecharegistro class="sql-date">2012-05-13</tblpacientesfecharegistro><tblpacienteidmaster>0</tblpacienteidmaster>
    </BoTblPacientes>
    <BoTblPacientes>
    <tblpacientesmotivoconsulta>23232</tblpacientesmotivoconsulta><tblpacientestlfcasa>2332</tblpacientestlfcasa>
    <tblpacientescelular>23</tblpacientescelular><tblpacientesoficina>23</tblpacientesoficina><tblpacientescorreo>23</tblpacientescorreo>
    <tblpacientesdireccion>2323</tblpacientesdireccion><tblpacientesapellidos>ewr</tblpacientesapellidos>
    <tblpacientesdocumento>5</tblpacientesdocumento><tblpacientessexoid>0</tblpacientessexoid>
    <tblpacientesfechanacimiento class="sql-date">2012-03-29</tblpacientesfechanacimiento><tblpacientesnombres>wer</tblpacientesnombres>
    <tblpacientesid>3</tblpacientesid><tblpacientesestadocivil>0</tblpacientesestadocivil>
    <tblpacientesfecharegistro class="sql-date">2012-05-13</tblpacientesfecharegistro>
    <tblpacienteidmaster>0</tblpacienteidmaster>
    </BoTblPacientes></colecciones>
    </DalClassObject> 
```

我测试但我的课是通用的，我该怎么说

```
 [XmlArray("colecciones")]
    [XmlArrayItem(Type=typeof(T))] // is this was possible my problem become solved but dont support Parameter as variable.
    public List<T> Colecciones { get; set; } 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:26:26.607

我通过以下方式解决了我的问题。

```
[Serializable, XmlRoot(Namespace = "http://www.asd.com", ElementName = "botblpacientes", IsNullable = true)]
public class BoTblPacientes
{
   [XmlElement(ElementName = "tblpacientesid")]
    public Int32 tblpacientesid { get; set; }
       ...
    all the properties in lower case, due a xml has all in lower case. 
} 
```

并在 DalClassObject 中，在 xmlarrayitem 中设置命名空间

```
[XmlArray(ElementName = "colecciones", IsNullable = true)]
[XmlArrayItem(Namespace = "http://www.asd.com", IsNullable = true)]            
public List<T> Colecciones { get; set; } 
```

工作完成了。

# asp.net - 缺少页面/项目计数

> ID：10655749
> 
> 赞同：0
> 
> 时间：2012-05-18T15:45:59.623
> 
> 标签：asp.net, .net-3.5, telerik, radgrid

*[我在Telerik 论坛](http://www.telerik.com/community/forums/aspnet-ajax/grid/missing-page-item-counts.aspx)上发布了这个，但我觉得我会在这里得到更快的回复，如果交叉发帖不受欢迎，我深表歉意。*

我的 RadGrid 用于在每个网格的右下角显示页面和项目计数。我最近将 Telerik 从 v2011.3.1305 升级到 v2012.1.411。

我的一个网格的典型标记：

```
<telerik:RadGrid ID="AssetGrid" runat="server" AllowFilteringByColumn="True" AllowPaging="True"
    AllowSorting="True" GridLines="None" GroupingSettings-CaseSensitive="false" Skin="Web20"
    AutoGenerateColumns="False" OnPageIndexChanged="AssetGrid_PageIndexChanged" OnItemCreated="AssetGrid_ItemCreated"
    OnItemDataBound="AssetGrid_ItemDataBound"
    OnPreRender="AssetGrid_PreRender" OnSortCommand="AssetGrid_SortCommand" OnNeedDataSource="AssetGrid_NeedDataSource"
    EnableLinqExpressions="false">
    <ClientSettings EnableRowHoverStyle="true">
        <Selecting AllowRowSelect="true" />
        <ClientEvents OnRowDblClick="RowAssetSelected" />
    </ClientSettings>
    <MasterTableView EditMode="InPlace" AllowFilteringByColumn="true" ShowFooter="false"
        EnableColumnsViewState="true" AutoGenerateColumns="false" CellSpacing="-1" DataKeyNames="AsId"
        Font-Size="90%" AllowCustomSorting="true" AllowCustomPaging="true" Width="100%">
        <PagerStyle Mode="NextPrevAndNumeric" Visible="true" AlwaysVisible="true" />
        <!-- RowIndicatorColumn, ExpandCollapseColumn, Columns, etc -->
    </MasterTableView>
</telerik:RadGrid> 
```

我只在 NeedDataSource 的代码下面包含了，但如果其他任何人有帮助，请告诉我，我会发布它们：

```
protected void AssetGrid_NeedDataSource(object source, GridNeedDataSourceEventArgs e)
{
    var collection = getAssets();
    AssetGrid.VirtualItemCount = collection.Count;
    AssetGrid.DataSource = collection.Skip(AssetGrid.PageSize * 
        AssetGrid.CurrentPageIndex).Take(AssetGrid.PageSize);
} 
```

然而，网格正在显示寻呼机行，如下所示：

![寻呼机显示](../Images/1e67c75f4f09f74f3ac44cb2fe8b34ef.png)

是否有我错过的设置来启用右下角的页面/项目计数，如几乎所有[Telerik Pager 示例](http://www.telerik.com/help/aspnet-ajax/grid-pageritem.html)中所示？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-23T09:39:37.720

尝试将此代码用于您的 PagerStyle：

```
 <PagerStyle PagerTextFormat="Page: {4} &amp;nbsp;Count: {5}" 
                Font-Names="Arial"
                ForeColor="#bebebe"
                Font-Size="12px"
                Mode="NextPrevAndNumeric"
                PageSizeLabelText="your lable for page size"
                AlwaysVisible="true"/> 
```

你也可以试试这些属性：

```
 <telerik:RadGrid ... 
                    OnItemCreated="RadGrid_ItemCreated"                                        
                    PagerStyle-ShowPagerText="true"> 
```

您的 ItemCreated 事件的委托方法应如下所示：

```
protected void RadGrid_ItemCreated(object sender, GridItemEventArgs e)
{
    if (e.Item is GridPagerItem)
    {
        var dropDown = (RadComboBox)e.Item.FindControl("PageSizeComboBox");
        var totalCount = ((GridPagerItem)e.Item).Paging.DataSourceCount;
        var sizes = new Dictionary<string, string>() {
            {"10", "10"},
            {"20", "20"},
            {"50", "50"}
        };
        if (totalCount > 100)
        {
            sizes.Add("100", "100");
        }
        if (totalCount > 200)
        {
            sizes.Add("200", "200");
        }
        sizes.Add("All", totalCount.ToString());

        dropDown.Items.Clear();
        foreach (var size in sizes)
        {
            var cboItem = new RadComboBoxItem() { Text = size.Key, Value = size.Value };
            cboItem.Attributes.Add("ownerTableViewId", e.Item.OwnerTableView.ClientID);
            dropDown.Items.Add(cboItem);
        }
        dropDown.FindItemByValue(e.Item.OwnerTableView.PageSize.ToString()).Selected = true;
    }
} 
```

# java - XPath、Java 和序列化的 xml

> ID：10655750
> 
> 赞同：0
> 
> 时间：2012-05-18T15:46:01.683
> 
> 标签：java, xpath

假设一些像

```
<foo>
  <bar>test</bar>
</foo> 
```

使用 returnType = String 评估表达式

```
/foo/bar 
```

将返回“测试”。但是，我想获取序列化的 xml，所以类似于

```
<bar>test</bar> 
```

应该返回。由于我无法检查 java 的 xpath 实现 (xerces) 中的 returnType，因此我不能简单地获取一个对象作为结果，如果它确实是一个节点，则将其转换为序列化的 xml。

**注意：我不知道表达式是否会实际返回节点、字符串、数字或其他任何内容，因此我无法为 eval 函数提供适当的返回类型，除了字符串，正如我的问题所述，返回文本内容而不是序列化的xml。**

所以我很好奇->是否有java-或（首选）xpath-way（函数？）来获取类型字符串的序列化xml而不是所选节点的文本子节点？

谢谢！亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:51:34.683

使用 xpath 返回类型 XPathConstants.NODE 然后您可以自己序列化返回的节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:09:12.693

现在，您发现很难发现结果的返回类型是对的；这是 JAXP 真正的设计弱点。

如果这对您有问题，请考虑使用 Saxon 的 s9api 接口，该接口返回您可以查询其类型的 XdmValue 对象；作为奖励，您还可以获得 XPath 2.0 访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T14:07:31.680

正如 Michael Kay 所回答的，这在 JAXP（本机 Java 接口）中很困难。

在 Kay 先生的 Saxon 库的 s9api API 中（请参阅[*使用 s9api 评估 XPath 表达式*](http://www.saxonica.com/html/documentation/xpath-api/s9api-xpath.html)），一旦你调用了[`XPathSelector.evaluate()`](http://www.saxonica.com/html/documentation/javadoc/net/sf/saxon/s9api/XPathSelector.html#evaluate())或者[`XPathSelector.evaluateSingle()`](http://www.saxonica.com/html/documentation/javadoc/net/sf/saxon/s9api/XPathSelector.html#evaluateSingle())你可以通过调用 [`XdmValue.toString()`](http://www.saxonica.com/html/documentation/javadoc/net/sf/saxon/s9api/XdmValue.html#toString()).

但是，如果 XPath 选择了一个属性（例如`//@name`），您仍然会得到 XML 序列化，例如`name="value"`. 您可以调用[`XdmItem.getStringValue()`](http://www.saxonica.com/html/documentation/javadoc/net/sf/saxon/s9api/XdmItem.html#getStringValue())，但对于元素，该方法将返回您已经看到的相同值 - 元素的文本内容，而不是序列化。我已经单独发布了关于如何[区分从 Saxon s9api 返回的属性和元素的文章](https://stackoverflow.com/questions/37971101/how-to-distinguish-between-attribute-and-element-nodes-returned-from-a-saxon-xpa/37971102#37971102)。

# powershell - Powershell - 搜索字符串，删除多余的空格，打印第二个字段

> ID：10655754
> 
> 赞同：1
> 
> 时间：2012-05-18T15:46:19.377
> 
> 标签：powershell, replace, split

我在解析 powershell 中的一些字符串数据时遇到问题，需要一些帮助。基本上我有一个不输出对象的应用程序命令，而是字符串数据。

```
a = is the item I'm searching for
b = is the actual ouput from the command
c = replaces all the excess whitespace with a single space
d = is supposed to take $c "hostOSVersion 8.0.2 7-Mode" and just print "8.0.2 7-Mode" 
```

但是，$d 不起作用，它只打印与 $c 相同的值。我是一个 UNIX 人，这在一个 awk 语句中很容易。如果您知道如何在一个命令中执行此操作会很好，或者只是告诉我下面的 $d 语法有什么问题。

```
$a = "hostOSVersion"
$b = "hostOSVersion                           8.0.2 7-Mode"
$c = ($a -replace "\s+", " ").Split(" ")
$d = ($y -replace "$a ", "") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:54:07.180

好吧，您可能不得不使用确切的模式，但一种方法是使用正则表达式：

```
$b = "hostOSVersion                           8.0.2 7-Mode"
$b -match '(\d.*)'
$c = $matches[1] 
```

如果你真的想用 -replace 把它连起来：

```
$($($b -replace $a, '') -replace '\s{2}', '').trim() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:34:45.347

你的线

```
$c = ($a -replace "\s+", " ").Split(" ") 
```

应该引用 $b 变量而不是 $a

```
$c = ($b -replace "\s+", " ").Split(" ") 
```

然后，您会注意到 $d 的输出变为

```
hostOSVersion
8.0.2
7-Mode 
```

和一个像`$d[1..2] -join ' '`会产生的声明`8.0.2 7-Mode`

# cookies - 任何符合欧盟 Cookie 指令的体面的选择退出解决方案？

> ID：10655756
> 
> 赞同：1
> 
> 时间：2012-05-18T15:46:27.833
> 
> 标签：cookies

因此，欧盟 cookie 法将于下周生效，我们需要使我们的网站合规。我遇到的问题是，如果我们每个月只失去 1 个客户，我们每个客户的平均订单价值意义重大，因为他们认为我们的网站在显示下拉选择加入警告栏时看起来像“垃圾邮件”，这可能会让我们损失大约 50,000 英镑商业价值。

有谁知道我们可以用来使我们的网站合法的任何不显眼但合规的解决方案？

我们目前仅使用几个 3rd 方跟踪 cookie 以及 Google Analytics

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:31:44.830

许多人将 cookie 指令的 bt.com 实施视为指导性的，并且试图平衡更好的用户披露需求与对用户体验的影响。您可以通过清除 bt.com cookie 并以新用户身份访问其网站来查看其运行方式：

[http://bt.com](http://bt.com)

不清楚它是否严格遵守指令，所以你需要小心。

# sql - Truncating leading zeros in sql server

> ID：10655758
> 
> 赞同：2
> 
> 时间：2012-05-18T15:46:31.010
> 
> 标签：sql, sql-server

I need to represent the following records

```
DATA
000200AA
00000200AA
000020BCD
00000020BCD
000020ABC 
```

AS

```
DATA    CNT
200AA   1
20BCD   2
20ABC   2 
```

ANY IDEAS?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T15:51:40.320

USE patindex

```
select count(test) as cnt,
 substring(test, patindex('%[^0]%',test),len(test)) from (

  select ('000200AA') as test
  union
  select '00000200AA' as test
  union
  select ('000020BCD') as test
  union
  select ('00000020BCD') as test
  union
  select ('000020ABC') as test

  )ty
 group by substring(test, patindex('%[^0]%',test),len(test)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T15:50:52.990

How about a nice recursive user-defined function?

```
CREATE FUNCTION dbo.StripLeadingZeros (
        @input varchar(MAX)
) RETURNS varchar(MAX)
BEGIN

    IF LEN(@input) = 0
        RETURN @input

    IF SUBSTRING(@input, 1, 1) = '0'
        RETURN dbo.StripLeadingZeros(SUBSTRING(@input, 2, LEN(@input) - 1))

    RETURN @input

END
GO 
```

Then:

```
SELECT dbo.StripLeadingZeros(DATA) DATA, COUNT(DATA) CNT
FROM YourTable GROUP BY dbo.StripLeadingZeros(DATA) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T15:52:03.893

```
DECLARE @String VARCHAR(32) = N'000200AA'

SELECT  SUBSTRING ( @String ,CHARINDEX(N'2', @String),LEN(@String)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T15:52:12.520

Depending on the what you need to get the values this code may differ:

Assuming a simple right 5 chars as Barry suggested, you can use RIGHT(data, 5) and GROUP BY and COUNT to get your results

[http://sqlfiddle.com/#!3/19ecd/2](http://sqlfiddle.com/#!3/19ecd/2)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T15:53:55.093

take a look at the [STUFF](http://msdn.microsoft.com/en-us/library/ms188043.aspx) function

It inserts data into a string on a range

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T15:55:06.837

You can do this query:

```
SELECT RIGHT([DATA],LEN[DATA])-PATINDEX('%[1-9]%',[DATA])+1) [DATA], COUNT(*) CNT
FROM YourTable
GROUP BY RIGHT([DATA],LEN[DATA])-PATINDEX('%[1-9]%',[DATA])+1) 
```

# c# - 将字符串转换为函数

> ID：10655761
> 
> 赞同：6
> 
> 时间：2012-05-18T15:46:49.917
> 
> 标签：c#, linq

我有简单的 lambda 作为字符串：

```
var str = "f => f.Substring(0, f.IndexOf(' '))"; 
```

最终从传递的字符串中获取第一个单词。

将这种和平的字符串编译/转换为 Func 并使以下代码工作的最简单方法是什么。

```
Func<string, string> func = ...
var firstWord = func("Hello World"); 
```

表达会帮助我吗？将欣赏工作样品，

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T17:06:05.623

问题是这里没有强大的类型支持，所以你甚至不能使用表达式树。但是，[DynamicLinq](http://msdn.microsoft.com/en-us/vstudio//bb894665.aspx "动态链接")已经做到了这一点，因此您可以通过一些修改轻松地使其工作。只需在 DynamicExpression 类中创建一些您自己的静态方法来添加此功能：

```
public static Expression<Func<T, S>> ParseLambda<T, S>(string expression)
{
    string paramString = expression.Substring(0, expression.IndexOf("=>")).Trim();
    string lambdaString = expression.Substring(expression.IndexOf("=>") + 2).Trim();
    ParameterExpression param = Expression.Parameter(typeof(T), paramString);
    return (Expression<Func<T,S>>)ParseLambda(new[] { param }, typeof(S), lambdaString, null);
}

public static LambdaExpression ParseLambda(string expression, Type returnType, params Type[] paramTypes)
{
    string paramString = expression.Substring(0, expression.IndexOf("=>")).Trim("() ".ToCharArray());
    string lambdaString = expression.Substring(expression.IndexOf("=>") + 2).Trim();
    var paramList = paramString.Split(',');
    if (paramList.Length != paramTypes.Length)
        throw new ArgumentException("Specified number of lambda parameters do not match the number of parameter types!", "expression");

    List<ParameterExpression> parameters = new List<ParameterExpression>();
    for (int i = 0; i < paramList.Length; i++)
        parameters.Add(Expression.Parameter(paramTypes[i], paramList[i].Trim()));

    return ParseLambda(parameters.ToArray(), returnType, lambdaString, null);
} 
```

两者的用法：

```
Func<string, string> func = DynamicExpression.ParseLambda<string, string>("f => f.Substring(0, f.IndexOf(\" \"))").Compile();

Func<string, int, string> otherFunc = ((Expression<Func<string, int, string>>)DynamicExpression.ParseLambda("(str, ind) => (ind * 100).ToString() + str")).Compile(); 
```

编辑：这还没有经过彻底的测试，所以你可能想通过一些单元测试来确保这些产生正确的结果。我没有做任何过于复杂的事情，只是明确声明要在`public static LambdaExpression ParseLambda(ParameterExpression[] parameters, Type resultType, string expression, params object[] values)`方法中使用的参数。
还修复了@Mauro Destro 指出的错误，方法是`paramList`在创建`ParameterExpression`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-16T22:34:43.017

您可以使用 Roslyn 脚本来执行此操作。例如：

```
var str = "f => f.Substring(0, f.IndexOf(' '))";
var func = await CSharpScript.EvaluateAsync<Func<string, string>>(str);
var firstWord = func("Hello World"); 
```

这需要`Microsoft.CodeAnalysis.CSharp.Scripting`包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T15:48:56.890

您将需要检查字符串并从提供的字符串构造一个表达式。没有*简单*的或*内置的方法*可以从这样的字符串中获取方法。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T15:52:20.273

您可能对 CodeDom 技术感兴趣。[关联](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)

但是，那里没有现成的解析器。

# xml - XSLT：CSV（或平面文件，或纯文本）到 XML

> ID：10655762
> 
> 赞同：3
> 
> 时间：2012-05-18T15:46:56.817
> 
> 标签：xml, xslt, csv, saxon, plaintext

我正在尝试使用 XSLT 将纯文本文件转换为 XML 文件。我从 CSV 文件开始，因为这是一种众所周知的文件格式，我可以开始使用谷歌搜索示例。

我偶然发现了这个：[http](http://ajwelch.blogspot.com/2007/02/csv-to-xml-converter-in-xslt-20.html) ://ajwelch.blogspot.com/2007/02/csv-to-xml-converter-in-xslt-20.html ，它也指向[http://andrewjwelch.com/code/xslt /csv/csv-to-xml_v2.html](http://andrewjwelch.com/code/xslt/csv/csv-to-xml_v2.html)。

这些链接包含一个 XSLT (2.0)，可以获取 CSV 文件并将其转换为 XML 文件。

...除非它实际上不起作用。

我在我的 Maven Eclipse 项目中设置了它，下载了最新的 Saxon 依赖项（9.4 HE）并尝试使用它。我遇到了这个错误：

> csv.csv 的第 1 行第 1 列错误：
> 
> SXXP0003：XML 解析器报告的错误：prolog 中不允许内容。

这似乎向我表明，当它开始解析文件时，它击中了第一个字符，发现它不是一个`<`字符，它对自己惊呼“这不是 XML 文件！Double yew tee eff，伙计！” 并炸毁了。哪种运行方式与此 XSLT 应该适用于非 XML 文件（即 CSV 文件）的想法相反。强迫您将非 XML 包装在 XML 标记中以使其工作完全违背了目的。

起初我认为问题可能是我没有像示例那样直接在命令行上使用 Saxon jar。所以我就这么做了。结果很熟悉：

> csv.csv 的第 1 行第 1 列错误：
> 
> SXXP0003：XML 解析器报告的错误：prolog 中不允许内容。

我想也许是因为我使用的是较新的版本，所以我需要返回并使用最初编写示例的版本。所以我回到 SaxonB 9.1.0.8 并在 Eclipse 和命令行中都进行了尝试。想知道发生了什么吗？

> csv.csv 的第 1 行第 1 列错误：
> 
> SXXP0003：XML 解析器报告的错误：prolog 中不允许内容。

我发现如果我将 CSV 文件的全部内容包装在一个虚拟 xml 标记（例如`<whatever>item1,item2,item3</whatever>`）中，它几乎可以开始工作（它至少使它超过了第一个字符，并且我开始在这个过程中更进一步地得到一个不同的错误） .

那么为什么这个 XSLT 不工作呢？为什么它发布的博客（以及所附评论部分中的所有伴随评论）似乎表明它确实如此？我还发现它[在 Ubuntu 帮助文档中被引用，并且作为](https://help.ubuntu.com/community/Converting%20CSV%20to%20XML#XSLT)[这个 StackOverflow 问题](https://stackoverflow.com/questions/315074/transforming-flat-file-to-xml-using-xslt-like-technology)的公认答案。这怎么可能？它不起作用！

因此，要么整个 Internet 上的每个人都在相互欺骗和/或他们自己陷入了一个旨在激怒我的巨大阴谋中，要么我只是缺少一些非常简单的、不可或缺的步骤，这是让 Saxon 使用 XSLT 转换CSV 文件转换为 XML 文件。

那么，有人知道是哪一个吗？

**编辑：**接受 pgfearo 的回答。这个“编辑”部分的原始内容现在是它自己的问题：[Java 中的撒克逊人：XSLT for CSV to XML](https://stackoverflow.com/questions/10658681/saxon-in-java-xslt-for-csv-to-xml)

**编辑 2：**如果有人对我的 XSLT 最终看起来像什么感到好奇，那么这里会出现一个不同的问题：[XSLT remove() function](https://stackoverflow.com/questions/10721453/xslt-remove-function)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:26:45.320

我不认为这是一个阴谋 - 你没有包括你使用的 Saxon 命令行，但我怀疑你是在调用 csv.csv 作为转换源的转换。因为这不是一个 XML 文件，所以您将收到一个 XML 解析器错误，如您所示。

您引用的 XSLT 样式表有一个名为“main”的条目模板，使用命令行上的*-it选项将“main”设置为初始模板。*有了这个集合，您现在不需要为转换提供源。Saxon 命令行选项在[此处](http://saxonica.com/documentation/using-xsl/commandline.xml)记录。

# javascript - 文件的最后修改 - 循环

> ID：10655763
> 
> 赞同：0
> 
> 时间：2012-05-18T15:46:58.307
> 
> 标签：javascript, jquery, ajax

我有以下网页，其中包含加载的每个文件的“最后修改”日期：

[http://f150.atwebpages.com/list.html](http://f150.atwebpages.com/list.html)

现在，您是否看到它在调用标头时如何按 1 加载日期？如果它不适合您，请按 F5 重新加载页面。

有什么方法可以调用全局函数、ajax/jquery 调用或一次发送所有请求的东西，这样就不会导致页面加载缓慢？

（我的一些页面上有大约 300 个文档）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:52:40.293

不，您一次可以执行多少个请求是有限制的，并且拥有这样一个需要您锤击 Web 服务器的实现是没有意义的。

而是使用您喜欢的语言在后端创建一个处理程序，您可以在一个请求中请求日期列表

# ruby - 是什么导致我的 Ruby `trap` 块出现这种死锁？

> ID：10655764
> 
> 赞同：8
> 
> 时间：2012-05-18T15:47:07.983
> 
> 标签：ruby, multithreading, signals, deadlock, fork

我正在阅读 Jesse Storimer 的优秀书籍[Working with Unix Processes](http://workingwithunixprocesses.com/)。在关于从已退出的子进程捕获信号的部分中，他给出了一个代码示例。

我已经稍微修改了该代码（见下文），以便对正在发生的事情有更多的了解：

*   父母在信号之间恢复自己的执行（我可以用它看到`puts`），
*   在`wait`一个语句中为多个孩子执行`trap`（有时我得到“收到一个 CHLD 信号”，然后是多个“孩子 pid 退出”）。

## 预期产出

通常，下面代码的输出类似于：

```
parent is working hard
Received a CHLD signal
child pid 73408 exited
parent is working hard
parent is working hard
parent is working hard
Received a CHLD signal
child pid 73410 exited
child pid 73409 exited
All children exited - parent exiting too. 
```

## 偶尔的错误

但有时我会收到这样的错误：

```
trapping_signals.rb:17:in `write': deadlock; recursive locking (ThreadError)
    from trapping_signals.rb:17:in `puts'
    from trapping_signals.rb:17:in `puts'
    from trapping_signals.rb:17:in `block in <main>'
    from trapping_signals.rb:17:in `call'
    from trapping_signals.rb:17:in `write'
    from trapping_signals.rb:17:in `puts'
    from trapping_signals.rb:17:in `puts'
    from trapping_signals.rb:17:in `block in <main>'
    from trapping_signals.rb:40:in `call'
    from trapping_signals.rb:40:in `sleep'
    from trapping_signals.rb:40:in `block in <main>'
    from trapping_signals.rb:38:in `loop'
    from trapping_signals.rb:38:in `<main> 
```

谁能向我解释这里出了什么问题？

## 编码

```
child_processes = 3
dead_processes = 0

# We fork 3 child processes.
child_processes.times do
  fork do
    # Each sleeps between 0 and 5 seconds
    sleep rand(5)
  end
end

# Our parent process will be busy doing some work.
# But still wants to know when one of its children exits.

# By trapping the :CHLD signal our process will be notified by the kernel
# when one of its children exits.
trap(:CHLD) do
  puts "Received a CHLD signal"
  # Since Process.wait queues up any data that it has for us we can ask for it
  # here, since we know that one of our child processes has exited.

  # We loop over a non-blocking Process.wait to ensure that any dead child
  # processes are accounted for.
  # Here we wait without blocking.
  while pid = Process.wait(-1, Process::WNOHANG)
    puts "child pid #{pid} exited"
    dead_processes += 1

    # We exit ourselves once all the child processes are accounted for.
    if dead_processes == child_processes
      puts "All children exited - parent exiting too."
      exit
    end
  end
end

# Work it.
loop do
  puts "parent is working hard"
  sleep 1
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T22:30:30.833

我查看了[Ruby 源代码](https://github.com/ruby/ruby/blob/trunk/thread.c#L3482)以查看该特定错误是在哪里引发的，并且它仅在当前线程尝试获取锁时引发，但当前线程已经获取了相同的锁。这意味着锁定是不可重入的：

```
m = Mutex.new
m.lock
m.lock #=> same error as yours 
```

现在至少我们知道会发生什么，但还不知道为什么和在哪里。错误消息表明它发生在调用`puts`. 当它被调用时，它最终以[io_binwrite](https://github.com/ruby/ruby/blob/trunk/io.c#L1117-L1188)结束。`stdout`不是同步的，但它是缓冲的，因此第一次调用时满足[if 条件](https://github.com/ruby/ruby/blob/trunk/io.c#L1123-L1129)，并且将为该缓冲区设置一个缓冲区和一个写锁。写锁对于保证写入标准输出的原子性很重要，不应该发生两个线程同时写入以`stdout`混淆彼此的输出。为了证明我的意思：

```
t1 = Thread.new { 100.times { print "aaaaa" } }
t2 = Thread.new { 100.times { print "bbbbb" } }
t1.join
t2.join 
```

尽管两个线程轮流写入`stdout`，但绝不会发生单个写入中断的情况 - 您将始终按顺序拥有完整的 5 个 a 或 b。这就是写锁[的用途](https://github.com/ruby/ruby/blob/trunk/io.c#L1158-L1160)。

现在，在您的情况下出现问题的是该写锁的竞争条件。父进程循环并每秒写入`stdout`一次（“父进程正在努力工作”）。但是同一个线程最终也会执行该`trap`块并再次尝试写入`stdout`（“接收到 CHLD 信号”）。`#{Thread.current}`您可以通过添加`puts`语句来验证它是否真的是同一个线程。如果这两个事件发生得足够近，那么您将遇到与第一个示例相同的情况：同一个线程试图两次获得相同的锁，这最终会触发错误。

# c# - 前 Microsoft SLP 代码保护器是否仍然可用和可用？

> ID：10655765
> 
> 赞同：-1
> 
> 时间：2012-05-18T15:47:11.330
> 
> 标签：c#, .net, source-code-protection

我想使用 SLP Code Protector 使 .NET 应用程序的反编译更加困难。我不想要许可功能，只想要它提供的离线代码保护。

我知道它现在归[InishTech](http://inishtech.com)所有，但我希望按照[Visual Studio 杂志的这篇文章中的建议通过 Microsoft 获得 Code Protector](http://visualstudiomagazine.com/articles/2007/11/01/protect-and-authenticate-your-apps.aspx)

> 代码保护器只是 Microsoft SLP 愿景的一部分。代码保护器可免费使用，并将包含在 Visual Studio 中。

Microsoft 的 SLP Code Protector 是否仍然可用，如果可以，我将如何在 Visual Studio 中使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T15:52:56.243

[http://www.microsoft.com/slps/](http://www.microsoft.com/slps/) -->

```
InishTech has assumed full responsibility for the existing customer base, 
and acquired the rights to SLP Services. To ensure a smooth transition 
for SLP Services customers, Microsoft will continue to offer SLP Services 
support until   September 24, 2009. 
```

现在是 InishTech。您可以在此处了解有关他们提供的解决方案的更多信息：http: [//www.inishtech.com/](http://www.inishtech.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T10:31:51.053

免责声明：我为[InishTech](http://inishtech.com)工作。

不幸的是，正如@Nathan Tornquist 的回答（+1'd）所述，微软于 2008 年停止发布该软件。请注意，如果您确实从那时起隐藏了一个版本，那么它会及时冻结，这意味着所有这些。因此，您会发现大量已解决的问题：

*   包含的“通用”排列不是针对每个客户的，因此仅推荐用于评估 SLPS。*正常推荐使用 Code Protector 需要特定于客户的许可“排列”，这需要订阅该服务 - 即使 Microsoft 提供该产品，情况也一直如此 - 它只是“免费”，因为 MSDN订阅包括基本的 SLPS 订阅。*
*   大约 2008 年的安装过程很难正确完成（如果您没有提升的安装过程以写入注册表，则无法运行您的代码。鉴于您只想要代码保护，这将是一个重大的障碍)
*   没有任何类型的 Visual Studio 集成
*   在要保护的代码中使用泛型的限制、在 x64 进程中运行、在 CLR v4 下运行的限制迟早会成为您的问题
*   对诊断运行时问题的能力进行了大量非标题性改进

最重要的是，即使它在技术上和/或法律上可能是可行的，但考虑到增强的数量、性能调整（在运行时和时间方面），尝试这样做确实是一项糟糕的投资。转换代码）和自那时以来添加的错误修正。

当前流程（不再涉及 SDK 安装，而是依赖于 InishTech 提供的 NuGet 提要/包，并与 Visual Studio 或 Build Server 驱动的构建完全集成）在[http://docs.softwarepotential.com](http://docs.softwarepotential.com)的[Getting从代码保护文章开始](http://docs.softwarepotential.com/Getting-Started-With-Code-Protection.html)。

# asp.net - 查找未关闭 SqlConnection 的最快方法

> ID：10655775
> 
> 赞同：3
> 
> 时间：2012-05-18T15:47:48.153
> 
> 标签：asp.net, timeout, connection-timeout

我有一个 ASP.NET Web 应用程序，它偶尔会返回以下令人讨厌的错误：

> 超时已过。在从池中获取连接之前超时时间已过。这可能是因为所有池连接都在使用中并且达到了最大池大小。

我的经理怀疑这是因为`SqlConnection`应用程序中未关闭。因此，我目前正在手动检查应用程序中的每个代码文件，以查看是否有任何连接处于打开状态。

是否有更快的解决方案来找到此错误的根源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:41:36.857

一堆不同的选择：

*   使用 Resharper 及其“模式搜索”（也称为“结构搜索”）：http: [//blogs.jetbrains.com/dotnet/2010/04/introducing-resharper-50-structural-search-and-replace/](http://blogs.jetbrains.com/dotnet/2010/04/introducing-resharper-50-structural-search-and-replace/)

*   为 FxCop 或 Roslyn 编写一个微型语法树遍历器来执行相同的搜索（基本上，一个新的 SqlConnection 没有被释放）

*   为 SqlConnection 编写一个包装类（比您想象的更常见），并在其中跟踪打开/关闭的连接。

*   将 WinDbg 附加到“实时”或理想的错误应用程序，然后将堆对象返回到它们的根。

*   找一个合适的分析器（SciTech 是一个很好的分析器），它会为您提供用于创建对象的调用堆栈。

# security - 您如何掩盖公开发布的代码？

> ID：10655782
> 
> 赞同：1
> 
> 时间：2012-05-18T15:48:10.690
> 
> 标签：security

或者如果我误解了我所看到的内容，请告诉我，但请查看此链接。

[http://code.jquery.com/mobile/1.0a1/jquery.mobile-1.0a1.min.js](http://code.jquery.com/mobile/1.0a1/jquery.mobile-1.0a1.min.js)

看看所有变量都像 a、b、c 一样，并且所有代码都被压缩到没有空间吗？使它完全不可读，难以理解。我经常看到。如果您查看代码，则谷歌搜索页面是相同的方式。

我猜这是一种混淆策略，我想知道它是如何完成的。显然，他们在编写时并没有真正的代码——它必须经过某种转换。这是怎么做到的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T15:50:24.130

这主要不是一种混淆策略。JQuery 的完整可读源是公开的。

那是缩小的代码。主要目的是使其加载更快，并更快地通过网络传输。

有多种缩小工具。我使用 Google Closure Compiler，它的功能远不止缩小，它还进行了一些优化，并且在查找编码错误方面做得很好，而且还生成了非常紧凑的代码。

缩小或编译的 js 很难阅读，因此可能会作为一种混淆方法。大多数人可能不会出于这个原因使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T15:53:46.000

这种方法（缩小）的真正价值是减少代码的大小，从而减少下载时间，从而使用户页面更快地可用。

谷歌搜索会发现有很多为此目的而设计的工具。

安全性结果是最小的，因为还有一些工具旨在美化 JavaScript 代码，这些工具会将缩小的代码重新变成可读的东西。众所周知，通过默默无闻的安全几乎等同于根本没有安全。如果您将代码放在公开可用的地方，人们可以阅读它。诀窍是确保这无关紧要。

# javascript - Javascript禁用输入字段

> ID：10655784
> 
> 赞同：-3
> 
> 时间：2012-05-18T15:48:14.643
> 
> 标签：javascript, forms

我正在寻找一个javascript函数。这将禁用提交时输入（填充）的文本字段。因此，当用户重新登录时，填充的文本框必须保持禁用状态。我尝试了一个代码，但这里发生的是单击 sumbit 文本字段中的内容被删除。

```
 <html> 
    <head> 
    <script> 
    function enableDisable(){ 
    var disable = true; 
    var arglen = arguments.length; 
    var startIndex = 0; 
    var frm = document.example1;//change appropriate form name 
    if (arglen>0){ 
    if (typeof arguments[0]=="boolean") { 
    disable=arguments[0]; 
    if (arglen>1) startIndex=1; 
    } 
    for (var i=startIndex;i<arglen;i++){ 
    obj = eval("frm."+arguments[i]); 
    if (typeof obj=="object"){ 
     if (document.layers) { 
    if (disable){ 
    obj.onfocus=new Function("this.blur()"); 
    if (obj.type=="text") obj.onchange=new Function("this.value=this.defaultValue"); 
    } 
     else { 
     obj.onfocus=new Function("return"); 
    if (obj.type=="text") obj.onchange=new Function("return"); 
     } 
    } 
    else obj.disabled=disable; 
     } 
     } 
    } 
     } 
     </script> 
     </head> 
      <body> 
       <form name="example1"> 

      Text Field: <input type="text" name="text1"> 
      <br> 
      <input type="submit" name="control1" onclick="enableDisable(this.submit,'text1','submit','select1')"> 

      </form> 
      </body> 
      </html> 
```

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:50:11.640

`submit`如果您不想刷新页面，请确保您的函数返回 false。您正在寻找的代码是`document.getElementById('insertIdOfTextFieldHere').style.readonly = "readonly";`

# c# - 制作 Telerik Grid 以显示记录数，但一次只显示几条

> ID：10655787
> 
> 赞同：0
> 
> 时间：2012-05-18T15:48:29.653
> 
> 标签：c#, asp.net-mvc-3, telerik

我有一个带有 Telerik 网格控件的 MVC3 应用程序。当我调用我的 Web 服务时，我一次只返回 10 条记录，但我的用户总共有 1100 条记录。当然，我不想提取所有 1100 条记录，我只想提取 10 条，当用户单击其中一个分页按钮以显示更多时，我会转到 web 服务并获取该组的下 10 条记录。

```
 @(Html.Telerik().Grid(Model)
  .Columns(columns =>
   {
       columns.Bound(o => o.number).Width(100).Title("File #");
    })
     .Pageable(paging => paging.PageSize(10))
     .Sortable()
     .Scrollable(s => s.Height(275))
     .Name("Grid")
     .Selectable()
  ) 
```

我的问题是我的 Telerik 控件仅显示 10 条记录，最多 10 条，因此底部没有分页按钮。那么如何设置 Telerik 网格的最大记录但一次只显示 10 个（分页大小）？

# powershell - PowerShell Set-Content 和 Out-File - 有什么区别？

> ID：10655788
> 
> 赞同：96
> 
> 时间：2012-05-18T15:48:32.357
> 
> 标签：powershell

[`Out-File`](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.utility/Out-File)在 PowerShell 中，和有什么区别[`Set-Content`](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/set-content)？或者[`Add-Content`](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/add-content)和`Out-File -append`？

我发现如果我对同一个文件使用两者，则文本完全是[*mojibaked*](http://en.wikipedia.org/wiki/Mojibake)。

（第二个小问题：`>`是 的别名`Out-File`，对吗？）

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-11-24T18:10:54.630

这是我在使用 PowerShell 几个月的经验和一些科学实验后得出的结论的摘要。我从未在文档中找到任何这些:(

*[**更新：**现在大部分内容似乎都有更好的记录。]*

## 读写锁定

在`Out-File`运行时，另一个应用程序可以读取日志文件。

在`Set-Content`运行时，其他应用程序无法读取日志文件。因此**永远不要`Set-Content`**用来记录长时间运行的命令。

## 编码

[`Out-File`](https://technet.microsoft.com/library/13d09dc8-2398-4d73-9449-1d01eb4e7808.aspx)默认保存为[`Unicode`](https://msdn.microsoft.com/en-us/library/system.text.encoding.unicode.aspx)( `UTF-16LE`) 编码（尽管可以指定），而在 PowerShell 3+ 中[`Set-Content`](https://technet.microsoft.com/en-us/library/hh847827.aspx)默认为[`ASCII`](https://msdn.microsoft.com/en-us/library/system.text.encoding.ascii.aspx)( `US-ASCII`) （也可以指定）。在早期的 PowerShell 版本中，以(ANSI) 编码`Set-Content`写入内容。[`Default`](https://msdn.microsoft.com/en-us/library/system.text.encoding.default.aspx)

^(*编者注*：从 5.1 版开始，PowerShell*仍*默认为特定于文化的`Default`（“ANSI”）编码，尽管文档声称如此。如果 ASCII 是默认值，则非 ASCII 字符（例如，`ü`将转换为*literal* `?`），但情况*并非*如此：`'ü' | Set-Content tmp.txt; (Get-Content tmp.txt) -eq '?'`yield `$False`。)

```
PS > $null | out-file outed.txt
PS > $null | set-content set.txt
PS > md5sum *
f3b25701fe362ec84616a93a45ce9998 *outed.txt
d41d8cd98f00b204e9800998ecf8427e *set.txt 
```

这意味着两个命令的默认值是不兼容的，混合它们会破坏文本，所以总是指定一个编码。

## 格式化

正如 Bartek 解释的那样，`Out-File`保存输出的精美格式，如终端所示。因此，在一个包含两个文件的文件夹中，该命令`dir | out-file out.txt`会创建一个包含 11 行的文件。

而`Set-Content`节省了更简单的表示。在包含两个文件的那个文件夹中，该命令`dir | set-content sc.txt`创建一个包含两行的文件。要模拟终端中的输出：

```
PS > dir | ForEach-Object {$_.ToString()}
out.txt
sc.txt 
```

我相信这种格式会导致换行符，但我还不能描述它。

## 文件创建

`Set-Content`不会在以下情况下可靠地创建空文件`Out-File`：

在一个空文件夹中，该命令`dir | out-file out.txt`会创建一个文件，而`dir | set-content sc.txt`不会。

## 管道变量

`Set-Content`从管道中获取文件名；允许您将多个文件的内容设置为某个固定值。

`Out-File`从管道中获取数据；更新单个文件的内容。

## 参数

`Set-Content`包括以下附加参数：

*   排除
*   筛选
*   包括
*   直通
*   溪流
*   使用事务

`Out-File`包括以下附加参数：

*   附加
*   没有破坏者
*   宽度

有关这些参数是什么的更多信息，请参阅帮助；例如`get-help out-file -parameter append`。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-18T16:04:02.023

`Out-File``-NoClobber`除非设置了和/或`-Append`标志，否则具有覆盖输出路径的行为。`Add-Content`如果默认情况下输出路径已经存在（如果可以），将附加内容。如果一个文件尚不存在，两者都将创建该文件。

另一个有趣的区别是`Add-Content`默认情况下会创建一个 ASCII 编码文件，默认情况下`Out-File`会创建一个小端 unicode 编码文件。

`>`是.~~的别名~~语法糖`Out-File`。它`Out-File`带有一些预定义的参数设置。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-18T18:43:48.650

好吧，我不同意... :)

1.  Out-File 有 -Append （-NoClober 是为了避免覆盖），它将添加内容。但这不是同一只野兽。
2.  命令 | Add-Content 将在输入上使用 .ToString() 方法。Out-File 将使用默认格式。

所以：

```
ls | Add-Content test.txt 
```

和

```
ls | Out-File test.txt 
```

会给你完全不同的结果。

不，'>' 不是别名，它是重定向运算符（与其他 shell 相同）。并且有非常严重的限制......它会以相同的方式切割线条。Out-File 具有 -Width 参数，可帮助您避免这种情况。此外，使用重定向运算符，您无法决定使用什么编码。

HTH 巴特克

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-30T15:17:17.943

`Set-Content`支持`-Encoding Byte`，而不支持`Out-File`。

因此，当您想将二进制数据或结果写入`Text.Encoding#GetBytes()`文件时，您应该使用`Set-Content`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-11T00:41:52.943

Out-file -append 或“>>”实际上可以在同一个文件中混合两种编码。即使文件最初是ascii或ansi，它也会默认添加unicode到它的底部。添加内容将在附加之前检查编码并匹配它。顺便说一句，export-csv 默认为 ascii（无重音符号），并将 set-content/add-content 设置为 ansi。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-20T11:14:54.203

想补充一下编码的区别：

带有 PowerShell 5.1 的 Windows：

*   Out-File - 默认编码为 utf-16le
*   Set-Content - 默认编码是 us-ascii

带有 PowerShell 7.1 的 Linux：

*   Out-File - 默认编码是 us-ascii
*   Set-Content - 默认编码是 us-ascii

# sencha-touch - 水平滚动列表

> ID：10655790
> 
> 赞同：2
> 
> 时间：2012-05-18T15:48:38.450
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我想让图像显示在水平列表中。

这是我到目前为止所做的：

```
var list = Ext.create('Ext.List',{
  store: store,
  itemTpl: new Ext.XTemplate('<img src="{icon}" />'),
  inline:true,
  scrollable: {
    direction: 'horizontal',
    directionLock: true
  }
}); 
```

我的商店有 5 个项目，但列表只显示两个（因为屏幕不够大，无法显示两个以上的图像）。

我试图通过将列表的宽度设置为 1000px 来解决这个问题，如下所示：

```
style:'width: 1000px', 
```

现在显示了所有项目，但现在问题是列表不再可滚动。我不能超过屏幕的宽度。

**[更新]**

我尝试过使用 hbox 面板，但没有显示任何内容。知道为什么吗？

```
var hbox = Ext.create('Ext.Panel',{
  layout:'hbox',
  style:'background-color:red;',
  data: [
              {name: 'Jamie',  age: 100},
              {name: 'Rob',   age: 21},
              {name: 'Tommy', age: 24},
              {name: 'Jacky', age: 24},
              {name: 'Ed',   age: 26}
          ],
  tpl: new Ext.XTemplate('{name}')
});

this.setItems([hbox]); 
```

我只看到红色背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:03:44.497

您是否尝试为“内联”配置传递一个对象而不是只传递一个对象：

```
var list = Ext.create('Ext.List',{
   store: store,
   itemTpl: new Ext.XTemplate('<img src="{icon}" />'),
   inline: { wrap: false },
   scrollable: {
     direction: 'horizontal',
     directionLock: true
   }
}); 
```

在文档中，他们提到这可以避免您的换行问题并启用水平滚动： [http](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.DataView-cfg-inline) ://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.DataView-cfg-inline 。

我没有尝试过。

希望这对你有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T16:32:21.253

好的，我终于找到了这个很有帮助的工作示例：

[http://dev.sencha.com/deploy/touch/examples/production/list-horizo​​ntal/index.html](http://dev.sencha.com/deploy/touch/examples/production/list-horizontal/index.html)

您也可以在`examples/production/list-horizontal`下载 Sencha Touch 2 时找到它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:01:35.597

创建一个水平的不是一个好主意（或者可能是不可能的）`Ext.List`

如果您倾向于制作“图像滑块”或“轮播”之类的东西，那么最好创建一个`Ext.Carousel`或更多可定制的东西，`hbox`. `Ext.Carousel`很容易而且有据可查，所以我将多谈一点`hbox`.

`hbox`这个想法是，首先你用 fixed创建一个空的`height`。然后，你最终可以将`add`物品交给它。每个项目都是**你喜欢**的，例如：`Ext.Image`在你的情况下。您的每个`hbox`项目都是一个组件，然后您可以轻松地以您想要的方式对其进行自定义。

希望这个想法有所帮助。

# php - 如何在 Mac OS X Lion 上使用参数编译 PHP？

> ID：10655793
> 
> 赞同：0
> 
> 时间：2012-05-18T15:48:49.153
> 
> 标签：php, apache, parameters, compilation, osx-lion

我只是想这样做：[http](http://www.php.net/manual/en/mcrypt.installation.php) ://www.php.net/manual/en/mcrypt.installation.php ，但我不知道如何将这些参数添加到我的 Mac OS X Lion 上的本地标准 PHP5 安装中。

谁能告诉我？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:28:12.743

*   [http://www.coolestguyplanettech.com/how-to-install-mcrypt-for-php-on-mac-osx-lion-10-7-development-server/](http://www.coolestguyplanettech.com/how-to-install-mcrypt-for-php-on-mac-osx-lion-10-7-development-server/)
*   [http://remonpel.nl/2012/01/adding-mcrypt-to-your-osx-lion-php-install/](http://remonpel.nl/2012/01/adding-mcrypt-to-your-osx-lion-php-install/)

# css - LESS 样式表（当 A 类悬停时更新 B 类）

> ID：10655799
> 
> 赞同：0
> 
> 时间：2012-05-18T15:49:00.267
> 
> 标签：css, web, less

我有一个 div “classA”，其中包含 classB 的一个精灵元素。当我悬停classA时，我需要开发更改classB属性的LESS代码。CSS就像：

类A：悬停类B {等}

但不知道如何在 LESS 中建立这种联系。

蒿属

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T15:56:07.703

您可以使用缩进 LESS 功能：

```
.classA:hover {
    /* Style for "hovered" classA */
    .classB {
        /* Style for .classB when classA is "hovered" */
    }
} 
```

如果你想使用另一个很棒的 LESS 功能：

```
.classA {
    /* Style for "normal" classA */
    &:hover {
        /* Style for "hovered" classA */
        .classB {
            /* Style for classB when classA is "hovered" */
            /* classB elements are contained within the classA */
        }
    }
} 
```

# android - LayoutInflater NullPointerException

> ID：10655802
> 
> 赞同：0
> 
> 时间：2012-05-18T15:49:35.867
> 
> 标签：android, nullpointerexception, layout-inflater

我正在尝试刷新我的自定义 ListViewAdapter；

**编辑 ：**

**当我单击 Listview 中的一个项目时，它正在调用 GoruntuleActivity 的屏幕并创建 oncreate 方法（我假设它正在创建..），然后我调用 GoruntuleActivity 的方法，layputInflater 进入此 Activity。**

**ListeleActivity.java**

```
lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View item,
                    int position, long id) {

                onClickPosition = position;

                final Intent intent = new Intent(ListeleActivity.this,
                        GoruntuleActivity.class);
                startActivity(intent);

                goruntuleNesnesi.isSetListRefresh(onClickPosition , issetlist);
            }
        }); 
```

**它正在调用 GoruntuleActivity.java 的方法**

```
 public void isSetListRefresh(int onClickPosition, ArrayList<String> issetlist )
    {
        issetlist.set(onClickPosition, "false");
        setRecentOrSeen(issetlist);
        ListviewRefresh();
    }

    public void ListviewRefresh() 
    {
        LayoutInflater mLInflater = LayoutInflater.from(this);

        ListViewAdapter adapter = new ListViewAdapter(
                getApplicationContext(), getKimdenList(), getKonuList(), getRecentOrSeen() ,
                mLInflater);
        adapter.Remove();

    } 
```

**现在它给了我另一个例外..**

```
05-18 16:25:22.073: E/AndroidRuntime(807): FATAL EXCEPTION: main
05-18 16:25:22.073: E/AndroidRuntime(807): java.lang.IllegalStateException: System services not available to Activities before onCreate()
05-18 16:25:22.073: E/AndroidRuntime(807):  at android.app.Activity.getSystemService(Activity.java:3526)
05-18 16:25:22.073: E/AndroidRuntime(807):  at android.view.LayoutInflater.from(LayoutInflater.java:171)
05-18 16:25:22.073: E/AndroidRuntime(807):  at com.mobil.eposta.GoruntuleActivity.ListviewRefresh(GoruntuleActivity.java:160)
05-18 16:25:22.073: E/AndroidRuntime(807):  at com.mobil.eposta.GoruntuleActivity.isSetListRefresh(GoruntuleActivity.java:155)
05-18 16:25:22.073: E/AndroidRuntime(807):  at com.mobil.eposta.ListeleActivity$1.onItemClick(ListeleActivity.java:137)
05-18 16:25:22.073: E/AndroidRuntime(807):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
05-18 16:25:22.073: E/AndroidRuntime(807):  at android.widget.ListView.performItemClick(ListView.java:3382)
05-18 16:25:22.073: E/AndroidRuntime(807):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
05-18 16:25:22.073: E/AndroidRuntime(807):  at android.os.Handler.handleCallback(Handler.java:587)
05-18 16:25:22.073: E/AndroidRuntime(807):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-18 16:25:22.073: E/AndroidRuntime(807):  at android.os.Looper.loop(Looper.java:123)
05-18 16:25:22.073: E/AndroidRuntime(807):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-18 16:25:22.073: E/AndroidRuntime(807):  at java.lang.reflect.Method.invokeNative(Native Method)
05-18 16:25:22.073: E/AndroidRuntime(807):  at java.lang.reflect.Method.invoke(Method.java:521)
05-18 16:25:22.073: E/AndroidRuntime(807):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-18 16:25:22.073: E/AndroidRuntime(807):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-18 16:25:22.073: E/AndroidRuntime(807):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:11:19.067

从错误日志中，看起来 getApplicationContext() 正在返回 null。你什么时候打电话`goruntuleNesnesi.ListviewRefresh();`？它在 onCreate(...) 中吗？如果是这样，那可能是您的问题，因为在完成初始化`getApplicationContext(...)`之前将返回 null 。`onCreate(...)`

**编辑**：我仔细查看了堆栈跟踪，看起来您在单击按钮时调用 ListviewRefresh。您是否尝试过使用`this`而不是 getApplicationContext(...)？

**编辑2**：试试这个：

```
ListViewAdapter adapter = new ListViewAdapter(this, getKimdenList(), getKonuList(), getRecentOrSeen() ,mLInflater); 
```

虽然，我认为它*可能会*遇到同样的问题，因为活动尚未在屏幕上绘制并且尚未初始化，但您不能在其上膨胀视图。试试看，我们将从那里开始。

# core-plot - 隐藏我的情节的核心情节注释

> ID：10655809
> 
> 赞同：0
> 
> 时间：2012-05-18T15:50:20.760
> 
> 标签：core-plot

我已经设置了一个以时间为 x 轴的散点图。我在中午的时候在背景中画了一个小太阳图像：

```
CGRect imageRect = CGRectMake(0, 0 , 50, 50);
CPTBorderedLayer * imageLayer = [[CPTBorderedLayer alloc] initWithFrame:imageRect];
imageLayer.fill = [CPTFill fillWithImage:[CPTImage imageWithCGImage:[[UIImage imageNamed:@"SunIcon.png"] CGImage]]];
NSArray *anchorPoint = [NSArray arrayWithObjects:
                        [NSNumber numberWithInt:12*60*60], [NSNumber numberWithInt:100],
                        nil];
CPTPlotSpaceAnnotation *imageAnnotation1 = [[CPTPlotSpaceAnnotation alloc] initWithPlotSpace:(CPTXYPlotSpace *)graph.defaultPlotSpace anchorPlotPoint:anchorPoint];
imageAnnotation.contentLayer = imageLayer;
[graph addAnnotation:imageAnnotation];
[graph addSublayer:imageLayer]; 
```

问题是太阳现在隐藏了我的阴谋。如何将图像发送到所有情节后面的背景？

**编辑**：相反的情况是我的右对齐 y 轴被图隐藏了。我可以把这层放在前面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:32:44.737

将注释添加到绘图区域，然后将图像层移动到子层顺序的前面。

```
[graph.plotAreaFrame.plotArea addAnnotation:imageAnnotation];
[imageLayer removeFromSuperlayer];
[graph.plotAreaFrame.plotArea insertSublayer:imageLayer atIndex:0]; 
```

# ruby - Sinatra 将反斜杠转换为正斜杠

> ID：10655812
> 
> 赞同：0
> 
> 时间：2012-05-18T15:50:30.790
> 
> 标签：ruby, json, sinatra, backslash

我发布到我的网络服务器的 JSON 如下所示：

```
"qry_when":["date_is_in(\"X:\\Finqueries\\Dates\\earnings files\\earnings.wmt.txt\")"] 
```

但在我的 sinatra 代码中，

```
apost '/parsequery/*' do 
  data = params[:captures][0] 
```

`data`好像

```
"qry_when":["date_is_in(/"X:/Finqueries/Dates/earnings files/earnings.wmt.txt/")"] 
```

因为`\"`正在变成`/"`，所以当我稍后调用 时`JSON.parse(data)`，出现解析错误：

> 'X:/Finqueries/Dates/earnings files/earnings.wmt.txt/")" 处的意外令牌]

有没有办法让 Sinatra*不*将反斜杠转换为正斜杠？

`EDIT:`作为一种解决方案，我在发送 json 之前将我的所有`"\"`to`%5C`和单引号和双引号更改为`%27`，现在它在 chrome 和 opera 中都可以使用。

# ruby-on-rails - 如何在 Rails 模型中更新 Twitter

> ID：10655813
> 
> 赞同：1
> 
> 时间：2012-05-18T15:50:34.330
> 
> 标签：ruby-on-rails, twitter, view, model

我有一个（缩减的）模型，如下所示：

```
class MyModel < ActiveRecord::Base
    def self.update_status
        event_time = time_ago_in_words 30.minutes.from_now
        Twitter.update("Event is starting in #{event_time}")
    end
end 
```

正如预期的那样，由于尝试使用来自 DateHelper 的方法“time_ago_in_words”，我收到了 NoMethodError 异常。我应该如何做到这一点，也许更重要的是，我是否以正确的方式进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:58:42.083

1.  `extend ActionView::Helpers::DateHelper`在你的模型中
2.  更改`30.mins.from_now`为`30.minutes.from_now`

我只是自己尝试过，执行以下操作没有问题：

```
class MyModel < ActiveRecord::Base
  extend ActionView::Helpers::DateHelper

  def self.update_status
    event_time = time_ago_in_words(30.minutes.from_now)
    Twitter.update("Event is starting in #{event_time}")
  end
end 
```

您必须使用`extend`而不是`include`. 请参阅[这篇文章](http://railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/)以获得解释。

# javascript - 禁用电话锚

> ID：10655815
> 
> 赞同：4
> 
> 时间：2012-05-18T15:50:38.880
> 
> 标签：javascript, jquery, jquery-mobile, cordova, anchor

我正在使用 PhoneGap 开发一个 Web 应用程序，该应用程序将分发到包括 iOS 在内的多个移动操作系统。

当我将应用程序生成到 iOS 时，至少 7 位的数值被修改为电话锚点，为了“修复”这个问题，我附加了以下事件处理程序：

```
$( 'a[href^="tel"]' ).live( 'click', function() {
    return false;
}); 
```

这段代码工作正常，除非我使用 jQuery Mobile，知道为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T15:52:55.920

尝试将此添加到您的标题中

```
<meta name="format-detection" content="telephone=no"> 
```

请参阅[如何在 Mobile Safari 中禁用电话号码链接？](https://stackoverflow.com/questions/226131/how-to-disable-phone-number-linking-in-mobile-safari)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T16:22:35.737

它实际上对我在 PhoneGap 上也很有效。

# android - Android：如何查找服务是否调用了活动

> ID：10655817
> 
> 赞同：1
> 
> 时间：2012-05-18T15:50:43.910
> 
> 标签：android, service, android-activity

我正在使用 Activity 来启动服务。在服务中，我根据 locationListener 发送通知。发送通知时，用户单击通知并调用 MainActivity。

当服务调用 MainActivity 时，我想显示一个警报框。

这是Service类中的代码

```
public class NotificationService extends Service implements LocationListener{
     private NotificationManager mNM;
     private Notification notification;
     private int NOTIFICATION = 123;
.
.
.
        private void showNotification(String msg) {
            long[] pattern = { 0, 1000, 1000 };//pattern for the vibration
            String ns = Context.NOTIFICATION_SERVICE;
            CharSequence text ="EasyTransit notification";
            notification = new Notification(R.drawable.arrow, text, System.currentTimeMillis());
            Intent contentIntent = new Intent(this, MainActivity.class);
           // PendingIntent contentIntent = PendingIntent.getActivity(this, 0, new Intent(this, MainActivity.class), 0);
            contentIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
            notification.setLatestEventInfo(this, "EastTransit.Prepare to get off", msg, PendingIntent.getActivity(this.getBaseContext(), 0, contentIntent, PendingIntent.FLAG_CANCEL_CURRENT));

            notification.flags |= Notification.FLAG_AUTO_CANCEL;     
            //notification.flags |= Notification.FLAG_ONGOING_EVENT;
            mNM.notify(NOTIFICATION, notification);
            Vibrator vibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
            vibrator.vibrate(pattern , -1);
             try {
                    Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
                    Ringtone r = RingtoneManager.getRingtone(getApplicationContext(), notification);
                    r.play();
                } catch (Exception e) {}
        }

.. 
```

我还想知道如何将字符串 msg 发送到服务调用的 Activity

我怎样才能实现这些？

# math - 当涉及多个向量时计算期望

> ID：10655826
> 
> 赞同：0
> 
> 时间：2012-05-18T15:51:36.597
> 
> 标签：math, statistics, linear-algebra

根据我的理解，向量的期望（比如说 nx1）相当于找到平均值。但是，如果我们有两个向量`x`和`y`，它们都是 (nx1)，那么尝试找到这些向量乘积的期望意味着什么？

例如：

```
E[x * y] = ? 
```

这里我们取的是内积还是外积？如果我使用 Matlab，我会这样做：

```
E[x' * y] 
```

或者

```
E[x * y'] 
```

或者

```
E[x .* y] 
```

我并没有真正理解应用于向量乘积的期望背后的直觉（我的背景不是数学），所以如果有人能为我阐明这一点，我将不胜感激。谢谢！

== 编辑 ==

你说得对，我不是很清楚。我遇到了协方差的定义，其中给出的公式是：

```
Cov[X; Y] = E[X * Y] - E[X] * E[Y] 
```

出现的部分让`E[X * Y]`我感到困惑。我应该把它放在数学网站上，下次会。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:12:39.983

尽管我相信这属于数学或统计网站，但我现在感到很无聊，所以我会说几句话。

你需要定义你什么时候在做，并理解你想看到什么。数字、向量本身就是数字。没有上下文就没有意义。我会争辩这是你的问题。

例如，您可以将向量视为数字列表，因此样本来自某个分布，但样本是标量值参数。因此，我的向量可能是我家一天中的温度列表，或者是上周降雨量的列表。因此，我们可以谈论这些测量的平均值。如果我们有一个分布，我们可以讨论那个分布的期望值。

您也可以将向量视为一条信息。它可能代表我在地球表面的位置，所以可能是 [纬度、经度、海拔]。因此，取这三个信息的平均值是没有意义的。但是，我可能对平均位置感兴趣，在一段时间内进行了许多这样的位置测量。

至于担心内部产品和外部产品，它们会让您感到困惑。相反，想想这些数字代表什么以及你需要用它们做什么，然后才担心如何计算你需要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:42:09.960

继@woodchips 的回答之后 - 当将两个随机变量相乘并找到乘积的期望确实有意义时，在离散情况下，它取决于您是否具有彼此对应的值，`X`即`Y`是否每个事件你有一个`x`和一个`y`。在这种情况下，要找到产品的期望值，只需将每对相乘，`x`然后`y`找到均值。如果它们是独立的，并且您只有两个样本向量并且没有共现，则产品的期望只是它们各自期望的乘积。

# ms-word - 如何为 Microsoft Word 2010 创建自己的 XML 架构

> ID：10655828
> 
> 赞同：0
> 
> 时间：2012-05-18T15:51:51.250
> 
> 标签：ms-word, xsd, openxml, openxml-sdk

您好，我希望为 word 2010 创建一个 XML 模式并将其指定到一个 word 文档，以便 word doc 现在基于我自己的自定义 XML 模式，以便我可以将自己的 XML 元素应用于该 word 文件？MS word 2010 的开发人员选项卡中有一个选项可以应用您的 XML 元素，但为此您必须指定 XML 模式。我已经用谷歌搜索了为 word 2010 创建自定义 xml 架构，但没有运气！任何想法都是示例代码会很有帮助提前谢谢！

亲切的问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:05:06.060

这个博客可能会有所帮助。

[http://blogs.msdn.com/b/brian_jones/archive/2005/07/05/intro-to-word-xml-part-1-simple-word-document.aspx](http://blogs.msdn.com/b/brian_jones/archive/2005/07/05/intro-to-word-xml-part-1-simple-word-document.aspx)

# c# - .NET 对象的内存开销是多少

> ID：10655829
> 
> 赞同：45
> 
> 时间：2012-05-18T15:51:55.290
> 
> 标签：c#, .net

.NET 中对象的内存开销是多少？我说的是一个任意的基本对象......内部.NET工作或引用的开销：

```
var obj = new System.Object(); 
```

obj 在堆中占用多少空间？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-18T15:54:35.443

我在一篇博文[“Of memory and strings”](http://codeblog.jonskeet.uk/2011/04/05/of-memory-and-strings/)中谈到了这一点。它是特定于实现的，但对于 Microsoft .NET CLR v4，x86 CLR 的每个对象开销为 8 个字节，而 x64 CLR 的每个对象开销为 16 个字节。

但是，*最小*大小分别为 12 和 24 字节 - 只是当您开始存储有用信息时，您会“免费”获得前 4 或 8 个字节 :)

（有关更多信息，请参阅博客文章。）

# ruby-on-rails-3 - 你需要通过belongs_to 吗？

> ID：10655834
> 
> 赞同：0
> 
> 时间：2012-05-18T15:52:13.447
> 
> 标签：ruby-on-rails-3

如果您有以下型号：

```
client has_many :projects
project has_many :tasks
tasks has_many :timeentries 
```

和

```
timeentries belongs_to :task
task belongs_to :project
project belongs_to :client 
```

那么您是否需要模型语句，例如：

```
timeentries belongs_to project :through => :tasks
client has_many :tasks, :through => :projects 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:10:07.393

简单的答案是您不必这样做，但您可能想要这样做。这在一定程度上取决于您将如何使用您的模型——如果您希望能够从另一端访问关系的每一端，那么您可能需要它。因此，如果您希望能够直接从那里访问 Project，`TimeEntries.Project`那么您可能想要它，如果您愿意通过，`TimeEntries.Task.Project`那么您不需要显式关系，这会使事情进一步复杂化。

请注意 Has_and_belongs_to_many :through 这适用于您有多对多关系的情况，使用中介表*纯粹表示关系*，因此中介不需要它自己的模型。

这在双向多对多关系中很常见——假设你有某种标签云，你可能会有这样的东西：

```
 Article               ArticleTag       Tag
    Id                    ArticleId        Id         
    Title                 TagId            Text
    Text 
```

一篇文章可以有多个标签，一个标签可以应用于多个文章，所以你不想在表格中绑定任何一个。所以文章通过 ArticleTag 有_many 标签。

[这给出了](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)Rails 中关联的方便总结。

# c# - 从 Azure ACS 识别角色

> ID：10655844
> 
> 赞同：1
> 
> 时间：2012-05-18T15:52:49.957
> 
> 标签：c#, azure, identity, claims-based-identity, acs

正如我们在 Web 上所知道的，有很多关于 Azure ACS 的教程，但其中大部分都停留在将简单 ACS 插入网站或应用程序中。现在，我想知道是否可以识别并链接所有著名的用户 oauth 提供者，并在数据库中添加一个新用户，然后为他们分配角色？完成此过程后，他们只需单击任何提供商即可将他们带回同一帐户？你有这样的教程可以分享吗？这是我想要制作的流程：Window live + google + Yahoo + Facebook，一个人可能拥有所有四个帐户，但我也需要他们的信息，然后我创建我的 cuatom 数据输入页面，问题是我怎么能衔接 ？怎样才能取出唯一的id来识别？所以我可以识别它..并为其分配角色..

问题1：如何连接？

问题2：如何在系统中识别？

问题3：如何赋予角色？不是从 azure 管理页面而是通过代码提供

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T10:39:35.340

在使用 ACS（以及一般的索赔）时，您应该注意一件事 - 您应该了解[索赔](http://blogs.staykov.net/2012/05/introduction-to-claims.html)。

现在，针对 ACS 的具体问题。Windows Azure 访问控制服务不是自动执行您想要的操作的魔杖。ACS 是处理声明的最简单方法，并且只处理一组特定声明，并且不必为不同协议的所有不同实现而烦恼。事实上，在创建基于浏览器的应用程序时，您使用的是[WS-Federation 协议](http://en.wikipedia.org/wiki/WS-Federation)（默认情况下和[SAML 令牌](http://en.wikipedia.org/wiki/Security_Assertion_Markup_Language)，但您也可以使用 SWT 令牌），而不是 OAuth 协议。当有人使用 ACS 登录您的站点时，您获得的用户唯一性是以下两个因素的严格组合：

*   用户身份
*   [ACS 命名空间](http://msdn.microsoft.com/en-us/library/windowsazure/gg185908.aspx)

您获得的唯一性是[NameIdentifier 声明](http://msdn.microsoft.com/en-us/library/system.identitymodel.claims.claimtypes.nameidentifier.aspx)（由： http: [//schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier](http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier)表示）。

第一个问题是，假设我是通过[http://yourcompany.accesscontrol.windows.net](http://yourcompany.accesscontrol.windows.net)识别到您的站点的“john.doe@gmail.com”，您将获得名称标识符“X”。[当我通过http://yourcompany-live.accesscontrol.windows.net/](http://yourcompany-live.accesscontrol.windows.net/)向您的网站标识自己的“john.doe@gmail.com”时，您将获得名称标识符“Y”！这适用于所有身份提供者，您通过访问控制服务链接它们。

第二个问题是：通过 ACS 配置的 Live ID 身份提供者只会给您一个 NameIdentifier 声明。仅此而已。

现在的问题：

> 问题1：如何连接？

链接身份的唯一可行方法是在应用程序中构建自己的链接逻辑。我要做的是停止使用所有自动生成的代码和被动重定向到 ACS，而是手动处理一些被动联合。这意味着 - 我会注意用户是否登录。如果未登录，我会将用户重定向到我自己的自定义登录页面，我将从 ACS 获取配置的登录选项。当用户登录时，我将在我自己的用户数据库中为该用户创建一个条目。我将为我想链接到单个用户的所有可能的身份提供者提供字段（或链接表）。了解，我将存储用户可能拥有的所有 NameIdentifiers。现在，我将如何链接用户帐户。可能有不同的方法。第一的，您必须识别用户以允许他/她链接帐户。然后创建一个带有一些唯一 ID（不是 GUID，以便用户轻松记住）的“联动票证”。向用户显示此 ID，并为他提供使用其他提供商登录的选项（从 ACS 检索 privers 列表）。当用户与另一个提供商一起来时 - 显示可以输入票证的字段。检查票证，如果有效 - 链接到现有帐户。

> 问题2：如何在系统中识别？

如答案一所述 - 您将需要拥有自己的自定义用户数据库，其中每个用户将拥有一个帐户，但该帐户将包含由不同机构发布的所有 NameIdentifier 声明。因此，您将能够唯一地识别具有链接帐户的用户。

> 问题3：如何赋予角色？不是从 azure 管理页面而是通过代码提供

在您的体系结构中，维护 ACS 中的角色将非常困难，因为您在需要链接多个帐户时输入的复杂性。我建议您在应用程序数据库中保留用户角色分配。您拥有本地用户帐户的部分，您将为每个帐户分配角色。

请注意，当我说本地用户帐户时，我并不是指支持本地登录凭据，而只是支持用户配置文件！

# javascript - Creating a changeset for SlickGrid to save data

> ID：10655847
> 
> 赞同：0
> 
> 时间：2012-05-18T15:53:05.297
> 
> 标签：javascript, jquery, jquery-plugins, slickgrid

I am aware that SlickGrid will modify the array that is assigned to the dataset. What I'm wondering is is whether there exists any extension libraries that can be used with SlickGrid in order to keep track of a changeset to send to the server when persisting. My application will have a large amount of data, so I only want to submit modifications. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:24:05.287

I'm not aware of any extensions/libraries, but it's really easy to do that using the `onCellChange` event or, if you need more control, the `editCommandHandler`. See [https://github.com/mleibman/SlickGrid/wiki/Writing-custom-cell-editors](https://github.com/mleibman/SlickGrid/wiki/Writing-custom-cell-editors) (Intercepting cell edits) for more info.

# python - python在没有正则表达式的多个分隔符上拆分字符串

> ID：10655850
> 
> 赞同：4
> 
> 时间：2012-05-18T15:53:19.290
> 
> 标签：python, string, split

我有一个字符串，我需要在**不**使用正则表达式的情况下拆分多个字符。例如，我需要以下内容：

```
>>>string="hello there[my]friend"
>>>string.split(' []')
['hello','there','my','friend'] 
```

python中有这样的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T15:55:08.790

如果您需要多个分隔符，`re.split`这是要走的路。

如果不使用正则表达式，除非您为其编写自定义函数，否则这是不可能的。

这是一个这样的功能 - 它可能会或可能不会做你想要的（连续的分隔符导致空元素）：

```
>>> def multisplit(s, delims):
...     pos = 0
...     for i, c in enumerate(s):
...         if c in delims:
...             yield s[pos:i]
...             pos = i + 1
...     yield s[pos:]
...
>>> list(multisplit('hello there[my]friend', ' []'))
['hello', 'there', 'my', 'friend'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-06T17:37:43.003

没有正则表达式的解决方案：

```
from itertools import groupby
sep = ' []'
s = 'hello there[my]friend'
print [''.join(g) for k, g in groupby(s, sep.__contains__) if not k] 
```

我刚刚在这里发布了一个解释[https://stackoverflow.com/a/19211729/2468006](https://stackoverflow.com/a/19211729/2468006)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-06T17:45:22.007

不使用正则表达式的递归解决方案。与其他答案相比，仅使用基本 python。

```
def split_on_multiple_chars(string_to_split, set_of_chars_as_string):
    # Recursive splitting
    # Returns a list of strings

    s = string_to_split
    chars = set_of_chars_as_string

    # If no more characters to split on, return input
    if len(chars) == 0:
        return([s])

    # Split on the first of the delimiter characters
    ss = s.split(chars[0])

    # Recursive call without the first splitting character
    bb = []
    for e in ss:
        aa = split_on_multiple_chars(e, chars[1:])
        bb.extend(aa)
    return(bb) 
```

工作原理与 pythons regular 非常相似`string.split(...)`，但接受多个分隔符。

示例使用：

```
print(split_on_multiple_chars('my"example_string.with:funny?delimiters', '_.:;')) 
```

输出：

```
['my"example', 'string', 'with', 'funny?delimiters'] 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-18T19:10:24.867

[`re.split`](http://docs.python.org/library/re.html#re.split)是正确的工具。

```
>>> string="hello there[my]friend"
>>> import re
>>> re.split('[] []', string)
['hello', 'there', 'my', 'friend'] 
```

在正则表达式中，`[...]`定义一个字符类。括号内的任何字符都将匹配。我分隔括号的方式避免了需要转义它们，但该模式`[\[\] ]`也有效。

```
>>> re.split('[\[\] ]', string)
['hello', 'there', 'my', 'friend'] 
```

re.compile的`re.DEBUG`标志也很有用，因为它打印出模式将匹配的内容：

```
>>> re.compile('[] []', re.DEBUG)
in 
  literal 93
  literal 32
  literal 91
<_sre.SRE_Pattern object at 0x16b0850> 
```

（其中 32、91、93 是分配给`、`[`、的 ascii 值`]`）`

# ember.js - 将 TextArea 换行符绑定到 html

> ID：10655852
> 
> 赞同：1
> 
> 时间：2012-05-18T15:53:42.603
> 
> 标签：ember.js

我有一个绑定到 div 的 textarea，这样您在 textarea 中键入的任何内容都会更新 div。

绑定唯一不尊重的是 textarea 中的换行符，因此如果您在 textarea 中点击“输入”，则 div 不会中断。

小提琴：http: [//jsfiddle.net/lifeinafolder/Ajkyw/19/](http://jsfiddle.net/lifeinafolder/Ajkyw/19/)

我正在使用助手，但它不起作用。

根据此链接上的第 4 点： http: [//codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/](http://codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/)，它不应该工作。但即使使用该链接上的解决方案，我也无法使其正常工作。

关于如何使用文`<br/>`本区域内换行符上的标签更新 div 的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T23:06:53.703

使用计算属性来格式化位置的换行符。

HTML：

```
<script type="text/x-handlebars">
    {{#with App.obj}}
        {{view Ember.TextArea valueBinding="location"}}  
        <div>{{{formattedLocation}}}</div>
    {{/with}}
</script> 
```

JavaScript：

```
App.obj = Ember.Object.create({
    location:'Palo Alto',

    formattedLocation: function() {
        return this.get('location').replace(/\n\r?/g, '<br />');
    }.property('location').cacheable()
}); 
```

[http://jsfiddle.net/e8G2j/](http://jsfiddle.net/e8G2j/)

在示例中，我删除了您的助手，因此更容易准确地了解正在发生的事情。如果您需要使用助手并且无法弄清楚，请告诉我，我会重新添加助手。

# c# - 如何使用 C#、Entity Framework 和 SQL Server 2008 读取/写入地理数据？

> ID：10655857
> 
> 赞同：16
> 
> 时间：2012-05-18T15:54:01.693
> 
> 标签：c#, sql-server-2008, entity-framework, gis, geography

我有一个表格，用户可以从中输入地图上某个点的纬度和经度。数据将作为字符串值输入。我做了一些研究，从各种来源发现实体框架不支持地理数据类型。

*   如何解析和/或将字符串数据保存到数据库中的地理列？
*   存储后如何访问它并将其重新解析为字符串？

提前致谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-18T17:32:04.457

事实上，.NET Framework 4.5 附带的 Entity Framework 5 组件确实支持空间类型。看看这个[演练](http://msdn.microsoft.com/en-US/data/hh859721)。

**编辑**使用 EF6，您可以在 .NET Framework 4 和 .NET Framework 4.5 上使用空间类型

# android - 更好地理解 SimpleAdapter 的 ViewBinder

> ID：10655867
> 
> 赞同：5
> 
> 时间：2012-05-18T15:54:52.317
> 
> 标签：android, simpleadapter, android-viewbinder

我有 4 `TextViews`、 2 `ImageViews`、 2`Buttons`和 2 个小部件，它们是 a 中行定义的一部分`ListView`。数据来自 XML 和`SimpleAdapter`. 要访问这些`TextViews`，我`ViewBinde`在自定义类中实现 r 并覆盖`setViewValue`. 这有效，`TextViews`我想动态更改的两个在`setViewValue`. 令我困惑的是为什么我的另外两个 TextViews 没有通过`setViewValue`。我这样说是基于设置一个执行线程只进入两次的断点。我期待看到它 4 次或更多次？

这是`setViewValue`我设置断点的地方。

```
@Override     
public boolean setViewValue(View view, Object data, String text)
{
    if(view.getId() == R.id.txtvw1)
    {             
//blah do some stuff
    }
    else if (view.getId() == R.id.txtvw2)
    {
//Blah do some stuff
    }

    return true;
} 
```

的 xml 声明`TextViews`（1 显示，4 不显示）：

```
<TextView
        android:id="@+id/txtvw1"
        android:layout_centerHorizontal="true"
        android:layout_width="185dp"
        android:layout_height="25dp"
        android:textSize="20sp"
        android:layout_marginTop="60dp"
        android:gravity="center"
        android:inputType="none"
        android:text="@string/str_StaticA"
        android:textColor="#C0F700" />

    <TextView
        android:id="@+id/txtvw4"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="35dp"
        android:layout_width="95dp"
        android:layout_height="50dp"
        android:textSize="18dp"
        android:layout_marginTop="110dp"
        android:gravity="center"
        android:inputType="none"
        android:text="IMHO:"
        android:textColor="#FFBA19" /> 
```

所以总而言之，为什么执行只输入了两次覆盖，而它恰好是我想要更新的那两次？

好吧，通过额外的阅读和演绎推理，更多的信息已经浮出水面。在我看来，`ListView`行中的视图 XML 会通过，`ViewBinder`但那是错误的！据我`ViewBinder`所知，您可以通过`setViewBinder`. 好吧，因为 DataAdapter 被告知使用什么视图来填充其中的数据，所以只有两个视图显示是有道理的。我只透露了两个。

这是一个片段，我在其中指定填充过程中涉及的视图并将它们传递给 DataAdapter 的构造函数：

```
String[] from = new String[] {"txtvw_PrevLift", "txtvw_PrevReps", "ActuLiftPikr", "ActulRepsPikr" };
int[] to = {R.id.txtvw_PrevLift, R.id.txtvw_PrevReps, R.id.ActuLiftPikr, R.id.ActulRepsPikr };

LiftDataAdapter LiftDataAdapter = new LiftDataAdapter(this, LiftDataMaps, R.layout.liftdatalayout, from, to); 
```

虽然这似乎有道理，但我不知道我的演绎推理是否准确。当我找到更多信息时会更新。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T07:38:33.670

如果您`ViewBinder`在`SimpleAdapter` **所有**`Views`声明的（在您`to`的情况下为数组）设置 a ，无论如何都将传递给`ViewBinder`'`setViewValue()`方法。如果该`setViewValue`方法没有返回`true`意味着该数据绑定`View`失败（无论出于何种原因），那么您将获得默认操作（对于 a `TextView`），从 data 设置文本`Hashmap`。现在，您声明`setViewValue`只为两个人做某事`TextViews`（通过他们的 id 检查）并且`true` **无论如何**都要返回。当您在行布局中输入`setViewValue`另一个`Views`时，您将再次输入`setViewValue`，不匹配 id（因此没有更新那些`Views`）并返回`true`（这将告诉适配器绑定**成功**，这`View`不需要任何更多的工作）。查看该方法[的源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/SimpleAdapter.java#SimpleAdapter.bindView%28int,android.view.View%29)`SimpleAdapter.bindView`将向您展示如何`ViewBinder`使用它。

另外，我看到你使用自定义适配器，你确定你不干扰正常`SimpleAdapter`逻辑吗？（也不要为类和变量名使用相同的名称）

# linux - Strace 多线程程序

> ID：10655868
> 
> 赞同：8
> 
> 时间：2012-05-18T15:23:24.180
> 
> 标签：linux, strace

在多线程程序上运行 strace 时，我得到如下结果：

```
[pid 14778] futex(0x7fd8082f266c, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x7fd8082f2668, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1} <unfinished ...>
[pid 14780] <... futex resumed> )       = 0 
```

请注意，参数在一行中，`<unfinished...>`而结果在另一行中`<...resumed>`。没有与结果相关的参数会降低 strace 的效用。跟踪多线程程序时，是否可以让 strace 在同一行打印结果和参数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T15:30:29.727

利用`strace -ff cmd 2> log.out`

# python - 将试用输出转换为junit xml

> ID：10655872
> 
> 赞同：4
> 
> 时间：2012-05-18T15:55:07.653
> 
> 标签：python, junit, report

如何将`trial`输出转换为 JUnit xml 格式？中没有这种可能的报告格式`trial`。

```
$> trial --help-reporters
Trial's output can be customized using plugins called Reporters. You can
select any of the following reporters using --reporter=<foo>

    subunit     subunit output
    bwverbose   Colorless verbose output
    text    terse text output
    verbose     verbose color output (default reporter)
    timing  Timing output
    summary     minimal summary output 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-31T21:24:39.447

我很难受。原来 subunit 有一个新版本的协议 2，这就是 subunit2junitxml 的版本所期望的。见[https://pypi.python.org/pypi/python-subunit](https://pypi.python.org/pypi/python-subunit)

在管道传输到 subunit2junitxml 之前，我必须通过 subunit-1to2 过滤器传输试验结果。所以我最终得到的命令是：

```
trial --reporter=subunit <mypackage> | subunit-1to2 | subunit2junitxml --no-passthrough --output-to=$WORKSPACE/temp/output.xml 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:59:08.530

最简单的方法是将试验的报告者设置为子单元，然后通过子单元中的找到（在主干`subunit2junitxml`的过滤器[文件夹下）将输出转换为 JUnit。](http://bazaar.launchpad.net/~subunit/subunit/trunk/files/head:/filters/)

例如我们这样做：

```
trial --reporter=subunit | subunit2junitxml --forward --output-to=junitxml-result.xml 
```

# git - Git - 如何验证 git-rebase --interactive 没有改变项目的最终状态

> ID：10655873
> 
> 赞同：1
> 
> 时间：2012-05-18T15:55:08.813
> 
> 标签：git, git-rebase

我经常使用 git rebase --interactive 来清理历史记录。它发生了合并冲突，或者即使没有冲突，仍然存在合并。即使我只更改了提交的顺序，压缩了它们等，我总是有点害怕某些事情发生了变化。

我曾经保留我的工作树的备份副本以粘贴到新的树上。然后我查看了 gitg 中的提交窗口，看看是否一切都一样。不过这很痛苦，我停止制作备份副本。

接下来我做了一个备份分支，我发现它`git diff backup-branch`有效。

现在我尝试了：（因为我也想停止制作备份分支）

```
git --diff HEAD ORIG_HEAD 
```

但这表明我发生了变化，当我查看工作目录中的文件时，它看起来并没有改变。

这种情况下正确的命令是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:36:07.583

*在这种情况下，交互式变基从结帐开始，出于某种原因，在结帐后*设置了 ORIG_HEAD 。您实际上想在 rebase 进行结帐之前与作为 HEAD 的提交进行比较。您可以在 reflog 中找到它：

```
git reflog 
```

查找最靠近顶部的结帐并与下一行中的提交进行比较。如果您的 reflog 如下所示：

```
ec4bd97 HEAD@{0}: rebase -i (finish): returning to refs/heads/big_cat_branch
ec4bd97 HEAD@{1}: rebase -i (fixup): Divide the bug class into modules
5d62142 HEAD@{2}: rebase -i (fixup): updating HEAD
c28c562 HEAD@{3}: checkout: moving from big_cat_branch to c28c562
7f6bc0e HEAD@{4}: commit: Fix bug related to big cats. 
```

那么你想像这样区分：

```
git diff HEAD 7f6bc0e 
```

或者

```
git diff HEAD HEAD@{4} 
```

除非交互式变基实际上更改了代码中的某些内容，否则您不会期望任何输出。

如果您可以从 reflog 中提取该条目，那就太好了，但是除了获取 ORIG_HEAD 指向的提交（`git rev-parse ORIG_HEAD`带线。您可以编写一个脚本来执行此操作，但手动找到它并不难。

（你可能认为 ORIG_HEAD^ 会给你你想要的，但这会给你*提交历史中 ORIG_HEAD 之前的提交*，而不是在你的本地 reflog 中。你想要后者。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:37:23.763

我个人喜欢`git log -p`。我展示了每个提交的差异，包括合并。

# iphone - 使用块的 iOS 视图转换

> ID：10655876
> 
> 赞同：0
> 
> 时间：2012-05-18T15:55:11.837
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我需要从同一个视图控制器的 3 个视图切换。我正确地达到了它，但我总是得到一个淡入淡出的过渡。我不明白究竟是如何工作的。哪个参数定义了转换的类型？setType 或层 forKey:? 我都试过了，但我总是得到同样的效果！谢谢

```
CATransition *trans =[CATransition animation];
            trans.delegate = self;
            [trans setDuration:2];
            [trans setType:kCATransitionFromTop];
            [trans setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];

        CALayer *layer = self.view.layer;

        [layer addAnimation:trans forKey:kCATransitionMoveIn];

        [self.view addSubview:vistaSocial]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:11:20.483

要在多个视图之间转换，您可以简单地使用 UIView 的 +transitionFromView:toView:duration:options:completion: 方法。这些选项允许您指定您想要的过渡类型。

例如：

```
[UIView transitionFromView:view1 toView:view2 duration:0.35 options:UIViewAnimationOptionTransitionFlipFromRight completion:nil]; 
```

[http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

# php - 现在 preg_match 函数似乎支持递归，可以用来解析 HTML 吗？

> ID：10655878
> 
> 赞同：2
> 
> 时间：2012-05-18T15:55:24.490
> 
> 标签：php, html, parsing, preg-match, pcre

我最近偶然发现了这个：

[PCRE 正则表达式语法 - 递归模式](http://www.php.net/manual/en/regexp.reference.recursive.php)

它似乎开辟了“匹配” html 标签的可能性，这是常规表达式所不擅长的。无论如何，这个实验性功能可以用来解析 HTML 片段吗？或文件，如果可能的话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:43:31.563

强烈建议不要将正则表达式用于 HTML 解析、递归或不使用。人们经常使用它，因为当你有一把锤子时，世界看起来就像一颗钉子。正确的工具应该更像 PHP 的 DOMDocument 类，它完全是为解决这类问题而设计的。

[http://php.net/manual/en/class.domdocument.php](http://php.net/manual/en/class.domdocument.php)

# html - 标签在 Firefox 中不起作用，仅在 IE 中起作用

> ID：10655880
> 
> 赞同：1
> 
> 时间：2012-05-18T15:55:40.460
> 
> 标签：html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:57:53.487

放入`<a>`表格单元格的内部。

```
<td id="myHeader_td0_a" class="Tab_White" width="61" align="center" valign="middle"><a href="../homepage.aspx" id="aHomepage">Home</a></td> 
```

如果您希望整个单元格成为链接，请使用 CSS`<a>`填充单元格或使用 JavaScript 使整个单元格响应 onclick 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:01:34.657

它在 FF 中不起作用，因为那是不好的标记。永远不要用锚包裹 td。浏览器会尽量解释你的 html。你很幸运，IE这次决定玩得很好。而是这样做：

```
 <td id="myHeader_td0_a" class="Tab_White" width="61" align="center" valign="middle">
     <a href="../homepage.aspx" id="aHomepage">Home</a>
  </td> 
```

要使锚的大小与`<TD>`使用一些 css 类似：

```
td a{
  display:inline-block;
  height: 100%;
  width: 100%;
} 
```

锚点是内联元素，没有高度。为了使其尊重高度，`display: inline-block`使其保持内联但尊重`height`并`width`喜欢块级元素。

编辑：传递该深度变量的一种方法是在锚点上设置一个属性并通过点击事件获取该属性：

```
<a href="../homepage.aspx" id="aHomepage" depth='100'>Home</a> 
```

然后你可以使用 js 来获取值（大致是这样，因为我不知道你的事件是如何设置的）：

```
$("a").click(function(){
   this.getAttribute("depth");
}); 
```

抱歉，我没有将它添加到锚点的 VB 代码。

# javascript - 什么结束括号（）和分号；

> ID：10655883
> 
> 赞同：4
> 
> 时间：2012-05-18T15:55:45.520
> 
> 标签：javascript

**在这样**的代码创建对象方法中：

```
var tiny.show=function(){  

}(); 
```

什么结束括号（）和分号；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T15:57:00.130

括号调用该函数，并将该函数的返回值分配给`tiny.show`（在那里使用 a`var`没有意义）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T16:01:05.357

`;`是 Javascript 中可选的语句结束标记。如果您跳过它，解释器会将行尾视为语句结束标记。但是，`;`许多人认为使用 a 来分隔语句可以提高可读性。

首字母`()`表示您将要定义一个匿名函数并将其分配给`tiny.show`. 最后的`()`标记和调用，即函数调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:10:00.163

这是 JavaScript 中一个常见的编程习惯，用于实现模块模式和对象工厂模式。你可以把它想象成一种在 JavaScript 中创建私有作用域的方法

以下是有关该主题的一些不错的读物：

*   [http://howtonode.org/object-graphs](http://howtonode.org/object-graphs)
*   [http://howtonode.org/object-graphs-2](http://howtonode.org/object-graphs-2)

# php - 从字符串中删除空行，但每行之间允许一个空行

> ID：10655890
> 
> 赞同：6
> 
> 时间：2012-05-18T15:56:07.830
> 
> 标签：php, regex

我想从字符串中删除过多的空行，但允许每行之间有一个空行。喜欢：

```
line1

line2 
```

应该变成：

```
line1

line2 
```

我确实找到了以下正则表达式（忘记在哪里找到它）：

```
preg_replace('/^\n+|^[\t\s]*\n+/m','',$message); 
```

这可行，但会删除所有空行，而不会在每行之间留下空行。

编辑：我刚刚在[http://jsfiddle.net/RAqSS/创建了一个快速示例](http://jsfiddle.net/RAqSS/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T16:01:27.563

尝试更换：

```
\n(\s*\n){2,} 
```

和：

```
\n\n 
```

像这样：

```
preg_replace('/\n(\s*\n){2,}/', "\n\n", $message); // Quotes are important here. 
```

如果您不想要一个空行，您可以将 更改`{2,}`为 a`+`并使用单个`\n`. 它实际上可以使用 a`+`而不是`{2,}`. 是`{2,}`一种优化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T16:00:23.983

尝试以下操作：

```
preg_replace('/\n(\s*\n)+/', "\n\n", $message); 
```

这将用一个换行符替换一个换行符，然后是任意数量的空白行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:07:05.057

根据您的 jsFiddle，试试这个：

```
$result = preg_replace('/\n(\n*\s)+/', "\n\n", $message); 
```

# php - 如何使用ajax从另一个页面加载内容

> ID：10655891
> 
> 赞同：3
> 
> 时间：2012-05-18T15:56:11.613
> 
> 标签：php, jquery, html, ajax

**嗨，我是一名新程序员** ，我想使用**ajax**从**另一个 php 页面替换****当前 php 页面**的内容，而无需刷新页面。

 ****要替换的内容在**div 中**。

两个页面（当前页面和另一个页面）具有相同的 div

**HTML Div 是：**

```
 <div class="category-container">
    <div class="category-image"></div>
    <div class="category-desc"><a href="#">#</a><p>text</p></div>
    <div class="rating5" >Editors' rating: </div>
    <div class="category-download-btn"><a href="#">Download</a></div>
    <div class="category-buy-btn"><a href="#">Buy</a></div>
  </div> 
```

谁能告诉我我该怎么做。这将是一个很大的帮助。你也能给我提供ajax代码而不是jquery吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T16:08:50.407

看看 jQuery 的[`load`](http://api.jquery.com/load/)，关于加载页面片段的部分：

> .load() 方法与 $.get() 不同，它允许我们指定要插入的远程文档的一部分。

要将另一个页面上的 div 内容放入当前页面上的类似 div，请使用以下内容：

```
$('#content').load('other-page.php #content');
// ^ target div                    ^ same div on the other page 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:05:57.850

这是通常的 jquery.ajax 调用

```
function getVotes(id){
$.ajax({
    type: 'get',
    url: 'ay/templates/backend/_votes_partial.tpl.php',
    data: 'charity_id=' + id,
    success: function(data) {
        $('#shadow').fadeIn('slow');
        $('#popupContact').fadeIn('slow');
        $('#content').html(data);

    }
}); 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:06:11.880

最简单的方法是：

```
$.get("pageurl",function(data){
    $("yourdiv").html(data);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T16:02:06.167

使用 jquery.ajax 很简单......旧的 ajax 调用方法太复杂了，jquery 让它变得简单，

您需要安装 jquery 库，将其包含在您的 head 标记中，并通过以下链接进行彻底的理解，这很容易

[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T16:08:32.657

您假设 jquery 是正确的方法是正确的。我远非专家，但这应该会有所帮助。文档很简单。

一般来说，jQuery 遵循*find something* then *do something*的方法。

*   查找某些东西 ---> 观察某些元素上的某些操作（例如更改选择框或单击链接）
*   做一些事情--->对你想要用新的div替换当前div的php页面进行ajax调用

jQuery 文档在此处，底部有一个示例，该示例*准确*显示了您要执行的操作[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

此任务的其他一些有用的 jQuery 命令可能是...

*   [http://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/)
*   [http://api.jquery.com/remove/](http://api.jquery.com/remove/)
*   [http://api.jquery.com/clone/](http://api.jquery.com/clone/)

希望这可以帮助。****

# unix - 'cd' 命令后返回上一个位置？

> ID：10655896
> 
> 赞同：26
> 
> 时间：2012-05-18T15:56:30.527
> 
> 标签：unix, cd

我正在编写一个需要`cd`到某个位置的 shell 脚本。有什么办法可以回到之前的位置，也就是`cd`执行之前的位置吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-18T15:57:11.527

你可以简单地做

```
cd - 
```

这将带您回到以前的位置。

一些 shell 允许您使用 pushdir/popdir 命令，[请查看此站点](http://www.dzone.com/snippets/bash-shell-directory-shortcuts)。您可能还会发现这个[SO question](https://superuser.com/questions/231881/push-pop-current-directory)很有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T16:16:04.193

如果您在脚本中运行，您还可以在子进程中运行部分脚本，该子进程将具有 $PWD 的私有值。

```
# do some work in the base directory, eg. echoing $PWD
echo $PWD

# Run some other command inside subshell
( cd ./new_directory; echo $PWD )

# You are back in the original directory here:
echo $PWD 
```

这有其优点和缺点......它确实很好地隔离了目录，但是如果你经常这样做，产生子进程可能会很昂贵。（编辑：正如@Norman Gray 在下面指出的那样，相对于脚本其余部分发生的任何事情，产生子进程的性能损失可能并不是很昂贵）

为了可维护性，我通常使用这种方法，除非我能证明脚本因此而运行缓慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:05:49.057

您可以将 PWD 回显到变量中，然后将 cd 返回到该变量。可能会比较安静。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-03T13:47:19.930

另一种选择是您可以添加到 .bashrc 中的一小组函数，这些函数允许您转到命名目录：

```
# cd /some/horribly/long/path
# save spud
# cd /some/other/horrible/path
# save green
...
# go spud
/some/horribly/long/path 
```

这在[目录导航生产力工具](http://www.krten.com/~rk/coding/gosave.html)中有记录，但基本上涉及在上述情况下将“pwd”的输出保存到命名的助记符（“spud”和“green”）中，然后 cd'ing 到文件的内容。

# javascript - 如何将 $.extend() 与变量一起使用

> ID：10655900
> 
> 赞同：0
> 
> 时间：2012-05-18T15:56:38.900
> 
> 标签：javascript, jquery, hash

我正在尝试制作一个脚本以在 window.location.hash 中使用多个值，但我遇到了 jquery 的 $.extend() 函数的问题

我尝试了两种方法，但都没有成功。

```
var MultiHash = {
    params: {},

    getHash: function () {
        var hashString = document.location.hash.replace('#', '').split('&');

        for (var i=0; i < hashString.length; i++) {
            var key = hashString[i].split('=')[0];
            var value = decodeURIComponent(hashString[i].split('=')[1]);

            // First way
            var a = {key: value};

            // Second way
            var a = {};
            a[key] = value;

            $.extend(params, a);
        }

        return params;
    },

    ...
} 
```

有没有人看到问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:00:56.323

首先你应该写：

```
 $.extend(this.params, a); or you cant access param 
```

可能还有其他问题。

**编辑**

在我看来，你返回 a 而不是 this.params 是有道理的。

```
$.extend(a,this.params);

return a 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T16:04:08.403

您尝试做的事情有两个问题。第一个是引用问题，因为该对象的 params 变量应引用为`this.params`. 第二个问题是您没有保存对象扩展的结果。所有这些都发生在以下行中：

```
$.extend(params, a); 
```

它应该改为：

```
this.params = $.extend(this.params, a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:04:28.777

试试这个：

```
var MultiHash = {
    params: {},

    getHash: function () {
        var hashString = document.location.hash.replace('#', '').split('&');

        var a = [];
        for (var i=0; i < hashString.length; i++) {
            var key = hashString[i].split('=')[0];
            var value = decodeURIComponent(hashString[i].split('=')[1]);
            a.push(key + ":'" + value + "'");           
        }

        $.extend(this.params,(new Function("return {" + a.Join(",") + "}"))());

        return this.params;
    },

    ...
} 
```

# jquery - yepnope.js ie7/ie8 jquery

> ID：10655906
> 
> 赞同：1
> 
> 时间：2012-05-18T15:57:03.797
> 
> 标签：jquery, internet-explorer, slider, yepnope

我创建了一个滑块，它在 ie7 中看起来很糟糕，在 ie8 中也好不了多少。其余的浏览器可以很好地渲染动画。我想在 ie7 和 8 中用简单的淡入淡出替换侧面。

我可以使用 yepnope.js 来执行此操作吗？如果可以，如何操作？

# perl - 如何在 perl 中在远程服务器上创建 Zip 文件

> ID：10655909
> 
> 赞同：0
> 
> 时间：2012-05-18T15:57:16.723
> 
> 标签：perl

实际上我使用 Net::FTP::Recursive 来下载目录结构，它适用于所需的内容。但由于某些文件夹有超过 100/ 个文件，因此下载可能需要很长时间。由于 zip 文件下载速度更快，我怎么能使用 perl 通过 ftp 连接到远程服务器并从远程服务器/文件夹创建一个 zip 文件以进行下载？

```
use Net::Config;
use Net::FTP::Recursive;

$ftp = Net::FTP::Recursive->new("$hostname:$ftp_port",  Debug => 0)
or die "Cannot connect to $hostname: $@";
$ftp->login($iLogin,$iPass)
or die "failed ", $ftp->message;
$ftp->binary()
or die "Cannot set to Binary";
$ftp->cwd("/admin/packages/$fileName")
or die "Cannot change working directory ", $ftp->message;
$ftp->rget( $fileName );
#or die "Download Failed ", $ftp->message;
$ftp->quit; 
```

谢谢大家的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:01:46.543

我认为您需要通过 SSH 访问系统才能运行 ZIP 命令。但如果是这种情况，您也可以使用 SCP 更安全地传输文件。FTP 做所有事情都是公开的。

谢谢，

F。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:28:04.173

**site(ARGS)**方法就是为此而设计的。您可以发送 shell 命令并使其在远程服务器上运行。 [http://perldoc.perl.org/Net/FTP.html#METHODS](http://perldoc.perl.org/Net/FTP.html#METHODS)

但是，我知道的大多数 FTP 服务器都禁用了该权限，所以，祝你好运

# mysql - 如果我在我的 mysql 数据库中增加 char 值，它会爆炸吗？

> ID：10655910
> 
> 赞同：3
> 
> 时间：2012-05-18T15:57:21.113
> 
> 标签：mysql

我有一个专栏，char(9)。我想将它增加到 char(10)。这会占用我的数据库吗？您可以像这样增加它而不会在数据库中出现问题吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:01:38.070

如果将列从 更改为`char(9)`，`char(10)`那么 MySQL 将重建整个表，用一个空格右填充现有值。由于重建，执行时间将取决于表的大小，因此请适当计划。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T15:59:41.673

只要没有什么取决于 char 列是 9 个字符。大多数情况下这应该没问题（就数据库继续运行而言应该没问题），但是您需要仔细考虑是否有任何软件正在使用列宽来做任何事情。

例如，如果软件期望所有值都是 9 个字符（并且它不会修剪字符串），您可能会发现自己遇到了问题。

我建议为可变长度数据使用 varchar

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:00:59.660

刚试过这个，不需要打电话给炸弹小队，哈哈：

```
ALTER TABLE `mytable` CHANGE `myfield` `myfield` CHAR(10) CHARSET latin1 COLLATE latin1_swedish_ci NULL; 
```

# c# - 在Window OS / VS中每5分钟运行一次命令的最简单方法是什么？

> ID：10655914
> 
> 赞同：0
> 
> 时间：2012-05-18T15:57:45.670
> 
> 标签：c#, windows, visual-studio-2010

在 Linux 世界中，最简单的方法是使用 Cron 作业。Windows 中没有 Cron。然而，有服务，但这似乎是很多工作。让一组命令每 5 分钟左右运行一次的最简单方法是什么？

更具体地说，我需要运行的命令包括移动一些文件和更新数据库。可能是用 C# 编写的，因此它比 BAT 脚本稍微复杂一些。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T16:01:28.493

任务计划程序可能是最好的方法，尽管替代方法是[http://cronw.sourceforge.net/](http://cronw.sourceforge.net/) 它作为系统服务运行并且只需要 perl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:02:35.140

您当然可以从批处理文件甚至直接从任务计划程序运行 C# 可执行文件。打开任务计划程序并输入可执行文件的路径并将其配置为每 5 分钟运行一次。确保安装了适当版本的 .NET 框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:06:46.227

*   Quartz.NET – 这是一个非常完整的 cron 作业库。到目前为止，它具有最多的功能。

*   NCrontab - 这是一个更简单的库，它实现了一个 cron 调度程序（没有 cron 作业）。

有关详细信息，请参阅链接。
[http://blog.bobcravens.com/2009/10/an-event-based-cron-scheduled-job-in-c/](http://blog.bobcravens.com/2009/10/an-event-based-cron-scheduled-job-in-c/)
这个问题也对你有帮助。
[ASP.NET 中 CRON 作业的等价物是什么 - C#](https://stackoverflow.com/questions/8226986/what-is-equivelant-of-cron-jobs-in-asp-net)

# c++ - MinGW 可移植性

> ID：10655918
> 
> 赞同：0
> 
> 时间：2012-05-18T15:57:56.043
> 
> 标签：c++, mingw

我对 C++ 完全陌生，但我创建了一个小程序，希望将该程序移植到其他计算机，但是当我“安装”该程序时，我收到此错误...-static-libgcc -static-libstdc++ 丢失，是否有我应该在程序本身中包含的文件，或者这是我必须在每台计算机上安装的库？我希望运行该程序的计算机将是 windows xp。该文件的源代码如下：

```
#include <stdlib.h>
#include <windows.h>
#include <direct.h>
#include <string.h>
#include <string>
#include <iostream>
using namespace std;

int main(int argc, const char *argv[])
{
    _chdir("C:\\Program Files\\NCHSoftware\\Talk\\");
    string number = "start talk.exe -dial " + std::string(argv[1]+4);
    system(number.c_str());
    exit;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:38:18.590

它们是需要在主机上的共享库。

学习如何编译静态版本；
请参阅此处：[http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)
阅读“-static-libgcc”和“-static-libstdc++”部分。

# jquery - jQuery Datatables 重新排序来自 ajax 源的列

> ID：10655920
> 
> 赞同：3
> 
> 时间：2012-05-18T15:58:15.217
> 
> 标签：jquery, datatables

我正在使用 jQuery 插件[Datatables](http://datatables.net/)，是否可以在不更改源数据的情况下更改列的顺序？

这是我现在拥有的[示例。](http://jsfiddle.net/tVa4k/)

目前它是 LicenseNumber、FirstName、LastName
我希望它是 FirstName、LastName、LicenseNumber

是否有可以添加到数据表设置的参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T12:35:32.757

不完全确定我是否理解了这个问题，但这可能有用：

(1) DataTables 有一个 ColReorder 插件。

[http://datatables.net/extensions/colreorder/](http://datatables.net/extensions/colreorder/)

在上面的链接中，您可以用鼠标选择一列，然后将该列拖动到表格中的不同位置。

在使用 ColReorder 插件的另一个示例中，您可以预定义列顺序，如数据表网站上所述：

[http://datatables.net/release-datatables/extensions/ColReorder/examples/predefined.html](http://datatables.net/release-datatables/extensions/ColReorder/examples/predefined.html)

> ColReorder 提供了通过参数 oColReorder.aiOrder 指定与 HTML 不同的列排序的能力（通常是您想要的）。这是一个整数数组，具有您想要的列顺序。

* * *

(2)如果您的数据是对象数组，我相信您也可以使用**aoColumnDefs**和**[mDataProp 。](http://datatables.net/ref#mDataProp)**（另见[http://datatables.net/usage/columns](http://datatables.net/usage/columns)）

```
...
"aoColumnDefs": [
    { "mDataProp": "FirstName", "aTargets": [ 0 ] },
    { "mDataProp": "LastName", "aTargets": [ 1 ] },
    { "mDataProp": "LicenseNumber", "aTargets": [ 2 ] }
],
... 
```

# c# - 在 Crystal Reports 中更新数据集

> ID：10655921
> 
> 赞同：3
> 
> 时间：2012-05-18T15:58:16.747
> 
> 标签：c#, .net, crystal-reports, dataset

我几乎没有使用 Datasets 和 Crystal Reports 的经验，所以如果答案真的很明显，请不要抨击我，我没有设法在线找到答案。

我有一个 C# Winforms 应用程序，其中包含一个从 DataSet 获取数据的 Crystal Report。我从应用程序内部动态填充 DataSet。

过去，如果我在 DataSet 中添加另一列，我可以在 Crystal Report 中右键单击 DataSet，然后单击“验证数据库”以使新列在 Report 中可用。

现在，如果我这样做，会弹出以下窗口：

![在此处输入图像描述](../Images/9b9650c7826e67d49bb95ca60f6e3017.png)

Class Name 组合框中没有可用的项目，如果我选中该复选框，则会出现另一个也是空的组合框。

请注意，我从程序内部填充数据集，因此没有连接。

如何更新 Crystal Reports 中的数据集，以使新列可用？

谢谢你。

PS：我尝试了以下解决方案，但没有成功：[Update DataSet Schema On Crystal Reports for VS2008](https://stackoverflow.com/questions/4959814/update-dataset-schema-on-crystal-reports-for-vs2008)，因为我看到了与上面相同的窗口。

另外，这就是我所看到的，可能有用：

![在此处输入图像描述](../Images/bff5e6f66238575ecd100b8f842cd5fb.png)

Edit1：字段出现在数据源中，但未出现在字段资源管理器中。

我已经有一些与新添加的列同名的公式字段，但删除它们也没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T00:01:27.523

我终于设法自己解决了。我做了三件事，我不太确定哪一件事成功了，因为我似乎无法重现问题。

1.  我重命名了与我添加的 DataTable 列同名的公式字段。
2.  我单击“...”框并重新选择了同一个文件。
3.  我在类名文本框中添加了内部连接 ​​ID {294de39c-3e3c-4748-9138-53d4be2a74a6}。

前两个可能没有帮助，因为他们以前没有工作过。当我添加字符串时它确实有效，所以这可能是解决方案，但这也不是第一次。

希望我浪费的时间可以节省别人的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T04:41:37.813

这是我的解决方案。以下是步骤：

1.  创建新数据集并从 SQL Server ObjectExplorer 中拖动表
2.  右键单击数据库字段
3.  选择数据源位置
4.  单击在步骤 1 中创建的新 DataSet 上的表
5.  点击更新

希望它可以帮助

# c# - ASP.NET 图表轴显示离散而不是点图的连续

> ID：10655926
> 
> 赞同：0
> 
> 时间：2012-05-18T15:58:44.577
> 
> 标签：c#, asp.net

我正在使用标准 ASP.NET 图表控件从以下数据创建点图：

```
X         Y 
32.6768,  1
32.6768,  2
32.6768,  3
32.6768,  4
32.678,   5
32.678,   6
187.862,  1
187.862,  2 
```

数据被读入一个`DataTable`解析为`Double`图表数据绑定的类型。控件找到数据并进行绘制，但与预期不符，如下图：

![ASP.NET 图表](../Images/e1dfea1b86e35999981f33bb256fa6e2.png)

如图所示，轴是离散的而不是连续的。标签显示良好，包括单个数据点。代码中设置了以下设置：

ASP.NET：

```
<asp:Series Name="DataSeries" XValueType="Double" YValuesPerPoint="25">
// 25 used in case other data sets are larger 
```

C# 后端：

```
chtData.Series["DataSeries"].ChartType = SeriesChartType.Point;

DataView dv = new DataView(/* DataTable Instance */);
chtData.Series["DataSeries"].Points.DataBind(dv, /* X-axis column title */, */ Y-axis column title */, ""); 
```

我应该设置任何其他属性来更正图表显示吗？这是一个`ChartArea`问题而不是一个`Series`问题吗？

根据要求，这里是填充`DataTable`实例的代码。来自传入字符串的数据被分成单独的行（按`\n`字符）。然后每行由值之间的空格分隔：

```
string[] row = line.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
if (!columnsFound)
{
    // columns: int to hold number of columns required in DataTable
    columns = row.GetLength(0);
    columnsFound = true;
    if (columns == 4) this.DataPoints.Columns.Add("Label");    // Labels for data points
    this.DataPoints.Columns.Add(this.XAxis);    // string with X-axis label
    this.DataPoints.Columns.Add(this.YAxis);    // string with Y-axis label
    if (columns >= 3) this.DataPoints.Columns.Add(this.ColumnThree);    // string with label for a third data column - not used in the graph
}
if (columns == 4) this.DataPoints.Rows.Add(row[0], double.Parse(row[1]), double.Parse(row[2]), double.Parse(row[3]));
else if (columns == 3) this.DataPoints.Rows.Add(double.Parse(row[0]), double.Parse(row[1]), double.Parse(row[2]));
else this.DataPoints.Rows.Add(double.Parse(row[0]), double.Parse(row[1])); 
```

# android - Android：活动转换

> ID：10655927
> 
> 赞同：0
> 
> 时间：2012-05-18T15:58:45.403
> 
> 标签：android, webview

我有一个`ListView`，单击时会启动一个`Activity`包含`WebView`. 我的应用程序的背景颜色始终为黑色，但是当用户点击某个`ListView`项目时，背景颜色会暂时变为白色，然后再次变为黑色，因为我已将和 设置为 news 的`#000000`背景颜色。有没有办法避免“白色过渡”？`WebView``Activity`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:03:09.947

//为此，您需要设置

缓存颜色为透明 `android:cacheColorHint="#00000000"`

```
<ListView
    android:id="@+id/my_list"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_below="@id/horizontalline"
    android:background="#000000" 
    android:cacheColorHint="#00000000" 
    android:layout_above="@id/AddButton"
    android:drawSelectorOnTop="false"
     /> 
```

# asp.net-mvc - json post期间发生异常时如何阻止asp.net mvc重定向到错误控制器

> ID：10655928
> 
> 赞同：4
> 
> 时间：2012-05-18T15:58:55.403
> 
> 标签：asp.net-mvc

当它是 json 帖子时，如何阻止 asp.net mvc 重定向到错误页面？当发生异常并且我需要它返回异常时，它会一直尝试重定向到我的配置文件中的错误路径......而且它甚至没有尝试将它们引导到正确的路径 - 它一直在寻找错误。当它们都位于设置的错误文件夹/控制器下时（视图的主文件夹，好像它正在尝试使用我的主控制器）下的 cshtml 视图，这在我的配置文件中明确列出：

```
<customErrors mode="On" defaultRedirect="~/Error/Error">
  <error statusCode="404" redirect="~/Error/NotFound" />
  <error statusCode="403" redirect="~/Error/Forbidden" />
</customErrors> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:28:09.947

您可以通过在 Global.asax 中注册 Application_Error 事件来做到这一点，然后以这种方式将其重定向到带有数据的错误控制器，或者您可以根据错误代码执行您想要的任何功能

```
protected void Application_Error()
        {
            var exception = Server.GetLastError();
            var httpException = exception as HttpException;
            Response.Clear();
            Server.ClearError();
            var routeData = new RouteData();
            routeData.Values["controller"] = "Error";
            routeData.Values["action"] = "oops";
            routeData.Values["exception"] = exception;
            Response.StatusCode = 500;
            if (httpException != null)
            {
                Response.StatusCode = httpException.GetHttpCode();
                switch (Response.StatusCode)
                {
                    case 403:
                        routeData.Values["action"] = "NoAccess";
                        break;
                    case 404:
                        routeData.Values["action"] = "NotFound";
                        break;
                }
            }

            IController errorsController = new ErrorController();
            var rc = new RequestContext(new HttpContextWrapper(Context), routeData);
            errorsController.Execute(rc);
        } 
```

然后用 oops / NotAccess / NotFound 之类的动作制作一个控制器

```
public ActionResult oops(Exception exception)
        {
            //return Content("General failure", "text/plain");

           // return View();

        }

        public ActionResult NotFound()
        {
           // return Content("Not found", "text/plain");
          //  return View("oops");
        }

        public ActionResult NoAccess()
        {
            //return Content("Forbidden", "text/plain");
            //return View("oops");
        } 
```

并用适当的信息返回您自己的观点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:05:25.280

解决方案 1：您可以为所有控制器使用 BASE 控制器（拥有它是个好主意），并且在此控制器中，您可以像这样覆盖 OnException 方法：

```
 protected override void OnException(ExceptionContext filterContext)
    {
        if (Request.IsAjaxRequest())
        {
            // TODO
        }
        else
        {
            base.OnException(filterContext);
        }
    } 
```

解决方案 2：您可以创建自定义操作过滤器来完成上述工作和使用方法。你可以在 global.asax 中注册这个过滤器，或者只装饰你需要的那些控制器/动作。

一般的想法是使用：

```
Request.IsAjaxRequest() 
```

希望能帮助到你。祝好运并玩得开心点 ：）

# wix - WiX 次要升级删除 Windows 7 任务栏固定快捷方式

> ID：10655931
> 
> 赞同：3
> 
> 时间：2012-05-18T15:58:59.037
> 
> 标签：wix

出于某种原因，每次更新到新版本的 WiX 都会从任务栏中删除固定的开始菜单快捷方式。我怎样才能解决这个问题？

快捷方式是使用以下命令创建的：

```
 <DirectoryRef Id="ProgramMenuFolder">
      <Component Id="GitExtensions.newstartmenu" Guid="*">
        <Shortcut
          Id="GitExtensions.newstartmenu"
          Name="$(var.ProductName)"
          Description="$(var.ProductName)"
          Icon="gitextensions.ico"
          Target="[INSTALLDIR]GitExtensions.exe"
          WorkingDirectory="INSTALLDIR"/>
        <RegistryValue
          Root="HKCU" Key="$(var.InstalledRegKey)"
          Name="GitExtensions.newstartmenu" Value="" Type="string"
          KeyPath="yes"/>
      </Component>
    </DirectoryRef> 
```

WiX 代码：[https ://github.com/gitextensions/gitextensions/blob/f9490e3e6e34cc2f6770fd9e1d6132cf5cfd0b0b/Setup/Product.wxs#L385-L399](https://github.com/gitextensions/gitextensions/blob/f9490e3e6e34cc2f6770fd9e1d6132cf5cfd0b0b/Setup/Product.wxs#L385-L399)

安装程序已在 VS2010 + WiX 3.5 中构建。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T17:57:01.423

它实际上是在进行[重大升级](https://github.com/spdr870/gitextensions/blob/master/Setup/EnableUpgrades.wxi)，并通过提前安排 RemoveExistingProducts，升级是在安装新版本之前删除旧版本。当旧的快捷方式被移除时，shell 会移除 pi​​n。您可以尝试稍后安排 RemoveExistingProducts，但请注意，这会产生[相关成本](http://www.joyofsetup.com/2008/12/30/paying-for-upgrades/)。

# javascript - 这是 jquery/javascript 中的正确语法吗？

> ID：10655942
> 
> 赞同：2
> 
> 时间：2012-05-18T15:59:56.277
> 
> 标签：javascript, jquery, if-statement

在下面的jquery中，“点”之前是否应该有一个结束括号“）”：

“ `.test($`……”？

`(/^\s*$/.test($(this).val()))`

```
$(document).ready(function () {
    $('#userlogin').css('color', '#cccccc').val('LOGINNAME');   

    $('#userlogin').blur(function () {
        if (/^\s*$/.test($(this).val())) {
            $(this).val('LOGINNAME');
            $(this).css('color', '#cccccc');
            $(this).valid();
        }
    }).focus(function () {
        if ($(this).val() === 'LOGINNAME') {
            $(this).val('');
            $(this).css('color', '#000000');
        }
    }); 
```

如果不是，为什么不呢？这段代码对我来说有点奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T16:02:03.920

代码是正确的：

```
/^\s*$/  // create a regex
  .test( // call the test method on it
    $(this) // create a jquery object
      .val() // call the val method on it
  ) 
```

但是，可以缓存该值：`var val = $(this).val();`. 那么这条线可能不会让你感到困惑：`/yourregex/.test(val)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:02:26.420

`/^\s*$/`是一个正则表达式文字，它有一个正在调用的测试方法。括号来自较大的 if 条件。

由于 javascript 是完全面向对象的，即使是文字也可以有方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T16:03:17.507

```
/^\s*$/.test( $(this).val() ) 
```

第一部分是正则表达式——不是字符串或其他任何东西。`/`因此，它以分隔符和.开头和结尾`/`。

使用`.match`有时更清晰，因为它似乎没有一些奇怪的未绑定项目在源中浮动：

```
$(this).val().match(/^\s*$/); 
```

这个特定的表达式，分解后，如下所示：

```
/^   // Beginning of String
\s*  // Space, zero or more times
$/   // End of String 
```

因此，如果从头到尾有零个或多个空格，它将测试为阳性，仅此而已。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T16:04:03.170

代码很好。如果您认为它不可读，为什么不先创建正则表达式

```
var regex = /^\s*$/;
if(regex.test($(this).val())
    ... 
```

# validation - 如何在 wtforms 中删除 id 字段上的验证器

> ID：10655943
> 
> 赞同：1
> 
> 时间：2012-05-18T16:00:10.587
> 
> 标签：validation, sqlalchemy, wtforms

我已经从类中创建了 sqlalchemy 类和 wtform Form。

```
from wtforms.ext.sqlalchemy.orm import model_form
class ClientGroup(Base, BaseModel):
    __tablename__ = 'client_groups'

    id = Column(Integer, primary_key=True)
    name = Column(String(255))
    sale = Column(Integer)

    def __unicode__(self):
        return self.name

ClientGroupForm = model_form(ClientGroup, Form, field_args={
    'name': {'validators' : [validators.Required(), validators.Length(min=5)]},
}) 
```

在应用程序中，我有以下代码：

```
form = ClientGroupForm(request.form)
if form.validate():
    .. save data 
```

当我向应用程序发送新数据时，它会返回验证错误。ID 必须是整数字段。但是一个新数据没有任何ID。

请给我建议如何在 sqlalchemy 中使用 wtforms？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:00:47.287

通过将以下内容添加到以下内容，使其显式可选`field_args`：

```
'id': {'validators' : [validators.Optional()], 
```

但是，我认为您应该从表单中完全排除该`id`字段：

```
ClientGroupForm = model_form(ClientGroup, Form, field_args={
    'name': {'validators' : [validators.Required(), validators.Length(min=5)]},
    exclude=['id'],
}) 
```

# watir - 如何通过非标准 html 属性访问元素？

> ID：10655944
> 
> 赞同：2
> 
> 时间：2012-05-18T16:00:12.423
> 
> 标签：watir, watir-webdriver

我正在尝试使用 watir-webdriver 实现测试自动化。顺便说一句，我是 watir-webdriver、ruby 和 co 的大一新生。

我们所有的 HTML 实体都有一个独特的 HTML 属性，名为“wicketpath”。也可以使用“name”、“id”访问元素，但不能使用属性“wicketpath”。所以我用 XPATH 进行了尝试，但没有成功。

任何人都可以通过代码片段帮助我如何通过属性“wicketpath”访问元素吗？

提前致谢。

R。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:38:03.607

您应该能够使用 xpath。

例如，考虑以下 HTML

```
<ul class="ui-autocomplete" role="listbox">
    <li class="ui-menu-item" role="menuitem" wicketpath="false">Value 1</li>
    <li class="ui-menu-item" role="menuitem" wicketpath="false">Value 2</li>
    <li class="ui-menu-item" role="menuitem" wicketpath="true">Value 3</li>
</ul> 
```

以下 xpath 将给出 wicketpath = true 的 li 文本：

```
puts browser.li(:xpath, "//li[@wicketpath='true']").text
#=>Value 3 
```

**更新 - 替代解决方案 - 添加到定位器：**

如果您使用大量 wicketpath，您可以将其添加到定位器中。

在需要 watir-webdriver 之后，添加以下内容：

```
# This allows using :wicketpath in locators
Watir::HTMLElement.attributes << :wicketpath

# This allows accessing the wicketpath attribute
class Watir::Element
  attribute(String, :wicketpath, 'wicketpath')
end 
```

这将让您使用 'wicketpath' 作为定位器：

```
p browser.li(:wicketpath, 'true').text
#=> "Value 3"

p browser.li(:text, 'Value 3').wicketpath
#=> true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T10:27:34.843

尝试这个

puts browser.li(:css, ".ui-autocomplete > .ui-menu-item[wicketpath='true']").text

请让我知道上述脚本是否有效。

# javascript - 浏览器关闭时会话 cookie 过期但仍发送到服务器

> ID：10655945
> 
> 赞同：1
> 
> 时间：2012-05-18T16:00:13.207
> 
> 标签：javascript, cookies, session-cookies

我对饼干感到困惑。如果我写这样的cookie

```
 document.cookie = "userName=" + me.name + ";"; 
```

然后它通过 Ajax 调用和页面加载（我在其中读取和使用该值）传递给服务器。然而，cookie 在两次访问之间仍然存在，即如果浏览器关闭并重新打开，它仍然存在。我不想要那个。但是，如果我将它设置为这样的会话 cookie

```
 document.cookie = "userName=" + me.name + "; expires=;"; 
```

然后在浏览器关闭时正确删除它，但不会通过 Ajax 调用和页面加载将其发送到服务器。

（注意，浏览器会话之间的持续存在可能是 IE10 测试版错误，其他帖子建议我的第一行应该生成一个 cookie，该 cookie 在浏览器关闭时过期。）

这两行在创建的 cookie 类型方面有什么区别，如果我想要一个在浏览器关闭时死掉但传递给服务器的 cookie，那么设置它的正确 JavaScript 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:21:42.180

如果您没有为 cookie 指定过期时间，它通常会在会话结束/浏览器关闭时过期。

我不确定在下面的代码末尾会导致什么样的副作用**+ " （打开双引号）。没有语法错误？**

```
document.cookie = "userName=" + me.name + "; 
```

你的意思是？

```
document.cookie = "userName=" + me.name; 
```

此外，您是否有可能已经设置了持久性 cookie，在这种情况下，只有第二个代码会将其更改为会话 cookie？

# dynamics-crm - 在 3 种环境中配置 Microsoft Dynamics CRM 2011 E-mail Router 转发邮箱

> ID：10655951
> 
> 赞同：1
> 
> 时间：2012-05-18T16:00:31.503
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm

我们有 3 个 CRM 环境（开发、测试、生产），每个环境都有一个单独的电子邮件路由器。我试图找出在每个环境中都有一个单独的电子邮件路由器是否正确，或者最好让一个电子邮件路由器为所有 3 个环境处理电子邮件。我还想知道为每个电子邮件路由器（即 crmdevmail、crmtestmail、crmprodmail）配置单独的转发邮箱是否正确。

我们有 3 个独立的 CRM 环境（开发、测试、生产），每个环境都配置了一个单独的电子邮件路由器，如下所示：

开发
- CRMDBDev1
- CRMAPPDev1
- CRMAPPDev2
- CRMSRSDev1
- CRMMRDev1 <-- 开发中的电子邮件路由器

测试
- CRMDBTest1
- CRMAPPTest1
- CRMAPPTest2
- CRMSRSTest1
- CRMMRTest1 <-- 测试中的电子邮件路由器

生产
- CRMDB1
- CRMAPP1
- CRMAPP2
- CRMSRS1
- CRMMR1 <-- 产品中的电子邮件路由器

每个电子邮件路由器都配置为处理来自单独转发邮箱的传入电子邮件。
- CRMMRDev1：crmdevmail@domain.org
- CRMMRTest1：crmtestmail@domain.org
- CRMMR1：crmprodmail@domain.org

**问题 1：**通常使用单独的电子邮件路由器配置每个 CRM 环境（开发、测试、生产）吗？

**问题 2：**让一个电子邮件路由器为所有 3 个环境处理电子邮件是否更好？

**问题 3：**在每个 CRM 环境中使用单独的电子邮件路由器可能会遇到哪些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:42:41.547

在开发 CRM 时，一台服务器就足够了，不同的组织在同一台服务器上。

但是，由于每次使用（开发、测试、生产）都有更多的 CRM 服务器，所以使用单独的电子邮件路由器应该没有问题。

这很好，但你不应该在这个开发、测试、产品之间使用相同的电子邮件地址，一切都会正常工作。

# java - Java 泛型和数组类型

> ID：10655957
> 
> 赞同：3
> 
> 时间：2012-05-18T16:01:03.347
> 
> 标签：java, arrays, generics

遇到了我无法解决的泛型和数组类型问题。归结为这一点。在以下代码中，如何将泛型 List 转换为相同泛型类型的 Array，同时使用工厂方法（“T convert(String value)”）转换输入泛型 List 的每个单独元素：

```
@Test
public void test(){
    List<String> integers = Arrays.asList("1", "2", "3", "4");

    Integer[] integerArray = new TypeConverter<Integer[]>(Integer[].class).convert(integers);

    assertEquals(4, integerArray.length);
    assertEquals(1, integerArray[0].intValue());
    assertEquals(2, integerArray[1].intValue());
    assertEquals(3, integerArray[2].intValue());
    assertEquals(4, integerArray[3].intValue());
}

public class TypeConverter<T>{
    Class<T> type;

    public TypeConverter(Class<T> type) {
        this.type = type;
    }

    T convert(List<String> values){

        List output = new ArrayList();

        for (String value : values) {
            //have to use Object.class here since I cant get the non-array type of T:
            output.add(new TypeConverter(type.getComponentType()).convert(value));
        }

        return (T) output.toArray();
    }

    T convert(String value){
        //convert to an int;
        if(type == Integer.class){
            return (T) new Integer(Integer.parseInt(value));
        }
        return null;
    }
} 
```

正如你所看到的，我天真的方法是简单地使用 toArray 方法，然后像这样转换结果：

```
(T) value.toArray() 
```

但这会导致 ClassCastException：

> java.lang.ClassCastException：[Ljava.lang.Object；不能转换为 [Ljava.lang.Integer

有没有办法解决我没有看到的这个问题，或者我应该采取另一种方法？

**编辑**

这是我要修复的具体代码。特别是 visitArray() 方法：

[https://github.com/johncarl81/transfuse/blob/master/transfuse/src/main/java/org/androidtransfuse/analysis/adapter/AnnotationTypeValueConverterVisitor.java](https://github.com/johncarl81/transfuse/blob/master/transfuse/src/main/java/org/androidtransfuse/analysis/adapter/AnnotationTypeValueConverterVisitor.java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:05:09.397

`List.toArray`您可以使用将要获取的数组类型作为参数的替代版本。

[toArray 方法](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#toArray%28T%5B%5D%29)

`Array`您可以使用该类的某些方法创建一个空数组。

[Array.newInstance](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Array.html#newInstance%28java.lang.Class,%20int...%29)

因此，您只需使用预期的类型`Array.newInstance(type, 0);`并将结果传递给`toArray`方法。

编辑：由于您的泛型类型是数组，因此您需要获取组件的类型，请尝试以下操作：

```
Object[] array = (Object[]) Array.newInstance(type.getComponentType(), 0);
return (T) output.toArray(array); 
```

你的价值转换方法有点东西我会让你弄清楚如何解决:)

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:05:17.200

不要尝试转换为`T`，尝试转换为`T[]`，因为您正在处理一组 T。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T16:20:10.047

我建议放弃反射和参考数组。

稍微滥用继承：

```
public abstract class StringConverter<T> {

    public List<T> convert(List<String> values) {
        List<T> output = new ArrayList<>();
        for (String value : values) {
            output.add(convert(value));
        }
        return output;
    }

    public abstract T convert(String value);
}

public static StringConverter<Integer> toInteger() {
    return new StringConverter<>() {
        public Integer convert(String value) {
             return Integer.parseInt(value);
        }
    };
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T16:19:55.753

这对我有用：

```
import java.util.*;
import java.lang.reflect.*;

public class Foo {
    public static void main(String[] args) {
        new Foo().test();
    }

    public void test(){
        List<String> integers = Arrays.asList("1", "2", "3", "4");

        Integer[] integerArray = new TypeConverter<Integer>(Integer.class).convert(integers);

        System.out.println(Arrays.deepToString(integerArray));

    }

    public class TypeConverter<T>{
        Class<T> type;

        public TypeConverter(Class<T> type) {
            this.type = type;
        }

        T[] convert(List<String> values){

            List<T> output = new ArrayList<>();

            for (String value : values) {
                output.add(convert(value));
            }

            return output.toArray((T[]) Array.newInstance(type, output.size()));
        }

        T convert(String value){
            if(type == Integer.class){
                return (T) new Integer(Integer.parseInt(value));
            }
            else if(type == Long.class){
                return (T) new Long(Long.parseLong(value));
            }
            return null;
        }

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T16:06:18.850

`return (T) values.toArray();`应该`return (T)output.toArray( new Integer[0])`

不，你必须硬编码`new Integer[0]`

# internationalization - Concrete5 国际化 - 如何复制包含内容的页面

> ID：10655961
> 
> 赞同：1
> 
> 时间：2012-05-18T16:01:18.727
> 
> 标签：internationalization, concrete5

我已经完成了用英文建立我的网站。
我把网站复制成俄语，我想翻译它。
重复的页面没有内容。
如何复制包含内容的页面？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:06:14.817

安装“国际化”插件后，您应该转到仪表板区域中的“完整站点地图”链接。在根目录下直接创建一个新页面（这将是稍后成为您的新语言主页的那个页面）。

获得新页面后，请访问仪表板的“多语言”部分。在“多语言内容设置”页面上，您将选择您的语言，即。“俄语”，对于“选择父页面”，选择您在站点顶层下创建的页面。然后单击“添加内容部分”。

拥有新的“内容部分”后，您可以将默认内容部分复制到新创建的俄语内容部分中。在“多语言内容设置”页面的“复制语言树”部分中，选择从例如“家庭 - 英语”复制到“家庭 - 俄语”。单击“复制树”，这应该将内容复制到新的俄语“内容部分”中。

您可以使用此视频查看我上面描述的步骤：[https ://www.youtube.com/watch?v=Hd936iaDLqw&feature=player_embedded](https://www.youtube.com/watch?v=Hd936iaDLqw&feature=player_embedded)

# c# - .net 非字符串本地化

> ID：10655962
> 
> 赞同：8
> 
> 时间：2012-05-18T16:01:20.380
> 
> 标签：c#, .net, wpf, localization

我正在使用 .resx 文件本地化 WPF 应用程序。我创建了主要资源文件的副本，例如 Resources.en-US.resx 或 Resources.cs-CZ.resx。适用于字符串。但是，我不知道如何本地化资源文件中的图像或文档等其他文件。

当我将新图像添加到资源文件（Resources.en-US.resx 或 Resources.cs-CZ.resx）时，文件的副本始终复制到 /Resources 目录。所以一个文件不能有多个版本用于多种语言，因为在一个目录中只能有一个同名文件。

理想的解决方案是，如果将来自本地化资源的图像复制到 /Resources/en-Us 等子目录中。在当前情况下，我无法使用 .resx 文件本地化图像和文档。有什么想法可以实现这一目标吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T16:32:41.987

以下 MSDN 发布[ASP.NET 2.0 中的资源和本地化 - 显示本地化图像](http://msdn.microsoft.com/en-us/magazine/cc163566.aspx#S6)状态：

> 虽然 ASP.NET 2.0 不直接支持本地化图像文件，但它不需要太多的自定义代码即可达到预期的效果。

并提供以下解决方法：

> 您可以首先将图像文件的本地化版本添加到全局资源文件的本地化版本。例如，英文版的 LitwareSlogan.png 已添加到名为 Litware.resx 的全局资源文件中，而法文版的 LitwareSlogan.fr.png 已添加到 Litware.fr.resx 中。两个资源文件中的资源都被赋予了相同的名称 LitwareSlogan。

网站上提供了完整的示例代码。

# delphi - 释放动态变量数组的最佳/首选方法是什么？

> ID：10655972
> 
> 赞同：1
> 
> 时间：2012-05-18T16:01:41.517
> 
> 标签：delphi, dynamic-arrays, variant

例如，如果我有以下内容：

```
type
  TVArray = array of array of Variant;
var
  MyArray : TVArray; 
```

然后我将一堆元素添加到 MyArray 中，这样它就有 1000 个数组，每个数组有 30 个变体。

如果我想立即释放内存，最好或首选的方法是什么？

```
MyArray := nil; 
```

或者

```
SetLength(MyArray, 0); 
```

或者

```
Finalize(MyArray); 
```

还是我需要先对子数组做些什么？各个变体包含什么重要吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T16:03:13.517

这三个都是等价的。你选择哪一个是风格问题。我更喜欢第一个（赋值`nil`），因为它非常简洁。

编译器知道如何释放`Variant`值。在释放数组之前，您不需要做任何额外的事情——如果您根本不打算释放数组，因为编译器最终会为您销毁它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T16:05:49.160

变体是托管类型。这意味着当变量超出范围时，编译器将处理与变量关联的任何资源。像对待字符串、动态数组、接口等一样对待变体的生命周期。

这意味着所有三个变体在含义上都是相同的，并且正确地处理了数组及其内容。您可以选择使用您喜欢的任何一种。

# jquery - 如果值为空，则转到 url

> ID：10655975
> 
> 赞同：0
> 
> 时间：2012-05-18T16:01:48.543
> 
> 标签：jquery, forms, submit, attr

我有一个表格、一个输入和一个链接。如果输入没有值，单击链接将指向某个 url。如果输入不为空，则单击必须提交表单。这是链接的样子：

```
<li class="youtube"><a href="#">YouTube</a></li> 
```

这是我到目前为止在 Jquery 中所拥有的：

```
$('.youtube').bind('click', function() {
    if($(input).val() == ''){
        $(".youtube a").attr("href", "http://www.youtube.com/")
    }else{
      $(form).attr("action","http://www.youtube.com/results?search_query=");
      $(form).submit();
    }

}); 
```

这不起作用，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:08:01.983

你想定位链接而不是 li

IE

`$('.youtube a').bind('click')`ETC..

你也有多个输入字段吗？您的输入字段需要用引号引起来，否则您的目标是一个变量，即“输入”

要检查一个[空字符串](https://stackoverflow.com/questions/154059/what-is-the-best-way-to-check-for-an-empty-string-in-javascript)，我会这样做：

```
if(!$('input').val())
{
    // Rest of code here
} 
```

所以你的完整代码是：

```
$('.youtube a').bind('click', function() {
    if(!$('input').val()){
        $(".youtube a").attr("href", "http://www.youtube.com/")
    }else{
      $('form').attr("action","http://www.youtube.com/results?search_query=");
      $('form').submit();
    }

}); 
```

# java - 约束两个作业不要在 Quartz-Scheduler 中同时运行

> ID：10655979
> 
> 赞同：5
> 
> 时间：2012-05-18T16:01:57.447
> 
> 标签：java, quartz-scheduler

**是否可以在 Quartz-Scheduler 中定义关于作业的执行约束？**

事实上，我有两个实现接口 Job 的类：JobA 和 JobB。

JobA 将每分钟安排一次。JobB 将每小时安排一次。

我不希望 JobA 和 JobB 同时运行。

注意： JobA 和 JobB 不做同样的事情。

感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T16:07:58.253

没有直接的支持。如果它是同一个作业，您可以将其定义为有状态的 - 此类作业不能同时运行定义。

否则，您可以将 Quartz 工作线程的数量限制为 1，此外，您可以定义线程优先级以选择首先运行的作业。不幸的是，当涉及更多工作时，此解决方案将无法扩展。

最后，您可以在不涉及 Quartz 的情况下手动实现。我猜您不希望同时访问某些操作或某些资源。考虑锁定该方法/资源，以便两个作业同时运行，但一个阻塞并等待另一个完成。

# wcf - 使用 XmlSerializer 对基于 WCF REST 的应用程序中的自定义错误进行序列化

> ID：10655983
> 
> 赞同：0
> 
> 时间：2012-05-18T16:02:09.277
> 
> 标签：wcf, rest, xmlserializer, faultexception

在我的基于休息的 WCF 服务中，我想抛出一个自定义错误异常并使用 XML 序列化器来序列化结果，因为我有一个特定的 XML 输出格式要使用。

我完全按照在线示例进行操作，但是在代码引发异常后，我没有得到 xml 格式的响应。取而代之的是，我得到了一个带有大量 html 的 XML 标记，这似乎是来自服务器的标准响应，标题为请求错误。我得到的文本是（html标签）：

```
The server encountered an error processing the request. The exception message is 'Error 123'. See server logs for more details. The exception stack trace is:
at CSW.Services.CheckForCatalogueFaults(String request, String service) in C:\netDev\CatalogueService\CatalogueService\Services.svc.cs:line 64
at CSW.Services.GetCapabilities(String request, String version, String service) in C:\netDev\CatalogueService\CatalogueService\Services.svc.cs:line 69
at SyncInvokeGetCapabilities(Object , Object[] , Object[] ) at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs)
at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc)
at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

我有以下设置和课程。

服务：

```
[OperationContract]
        [XmlSerializerFormat(SupportFaults = true)]
        [FaultContract(typeof(CatalogueFaultContract))]
        [WebGet(BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/csw?REQUEST={request}&VERSION={version}&SERVICE={service}")]
        Capability GetCapabilities(string request,string version, string service); 
```

..我在服务实现中的错误检查条件之一...

```
 if (string.IsNullOrEmpty(request))
            {
                cswFault.Exception = new CswException("MissingParameterValue", "request");
                cswFault.ErrorMsg = "Error";
                     throw new FaultException<CatalogueFaultContract>(cswFault);
            } 
```

我的自定义 FaultException 类：

```
[XmlRoot(ElementName = "ExceptionReport",Namespace="http://www.opengis.net/ows")]
    public class CatalogueFaultContract 
    {
        [XmlNamespaceDeclarations]
        public XmlSerializerNamespaces Ns;

        [XmlAttribute(AttributeName = "Version")]
        public string Version = "1.0.0";

        [XmlElement(Namespace = "http://www.opengis.net/ows")]
        public CswException Exception { get; set; }

        [XmlAttribute(Namespace = XmlSchema.Namespace, AttributeName = "schemaLocation")]
        public string xsiSchemaLocation = "http://www.opengis.net/ows http://schemas.opengis.net/ows/1.0.0/owsExceptionReport.xsd";

        [XmlIgnore]
        public string ErrorCode { get; set; }
        [XmlIgnore]
        public string ErrorMsg { get; set; }

        public CatalogueFaultContract()
        {}

        public CatalogueFaultContract(string errorCode,string locator)
        {

            Ns = new XmlSerializerNamespaces();
            Ns.Add("", "");
            Ns.Add("ows", "http://www.opengis.net/ows");

            Exception=new CswException(errorCode,locator);

        }
    } 
```

我不知道为什么它不显示序列化的故障类......除非它不能正确地序列化它？尝试了一个非常简单的课程，但得到了相同的响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:02:15.950

答案：改用 WebFaultException 类............

# html - html标签和链接

> ID：10655984
> 
> 赞同：0
> 
> 时间：2012-05-18T16:02:10.917
> 
> 标签：html, hyperlink, tabs

大家好，我已经购买了这个模板，我正在尝试获取一个侧边栏的链接（在标签的链接下）

```
 <ul class="nav2 nav">
            <li class="selected"><a href="#tab1">Seniors - Studies</a>     </li>

            <br><div align="center"><img src="images/seniorbrochure.jpg" width="200" class="foo"><br><a href="pdf.pdf">Download PDF</a><br><br><div class="heading">We Support</div></div></ul> 
```

这是代码的一部分，正如您所见，我有一个将 PDF 下载到 pdf.pdf 的链接（就像测试一样），但是每当我单击它时，它实际上会加载一个空白选项卡并且不会尝试转到 pdf.pdf所有，我不能把链接放在 ul 选项卡之外，否则整个布局会搞砸，有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:56:43.577

文件路径是否正确？“您的网站/文件夹/pdf.pdf”。或者，也许您可​​以尝试在侧边栏中放置一个按钮来下载它 - `<input type="button" value="Download PDF" onClick="window.location.href='/folder/pdf.pdf'">`.

# php - PHP重命名目录失败

> ID：10655985
> 
> 赞同：2
> 
> 时间：2012-05-18T16:02:20.227
> 
> 标签：php, rename

好吧，我的 PHP 脚本生成了一个带有超链接的错误。
有谁知道出了什么问题？

> `PHP Warning: rename(./uploads/temp/00013/,./uploads/orders/39/) [<a href='function.rename'>function.rename</a>]: No such file or directory`

更新：

PHP中的实际代码

> ```
>  if(!file_exists('uploads/orders/')) {
>                 mkdir('uploads/orders/'); // ensuring the orders folder exist
>             }
>             rename('uploads/temp/' . $u . '/', 'uploads/orders/' . $i . '/'); 
> ```

更新：

对不起，我的错。我编码以在执行此代码之前删除以前的临时文件夹。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:05:52.937

似乎这些目录中的一个（或两个）不存在：

*   上传/临时/00013
*   上传/订单/39

您是否检查过：

*   这些目录存在吗？
*   Apache/PHP 有权在这些目录中读/写？
*   您的当前目录真的是“上传”目录的父目录吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:11:59.203

当电脑告诉你

> 没有这样的文件或目录

您应该检查的第一件事是文件/目录是否存在。这不是随机错误消息，它仅在您尝试使用的文件或目录不存在时的特定情况下给出。

特别是在这种情况下，两者`./uploads/temp/00013/`和`./uploads/orders/`都必须存在。如果`orders`不存在，则不是为您创建的。

# javascript - 如何制作整页的 JS 和 CSS 菜单

> ID：10655986
> 
> 赞同：1
> 
> 时间：2012-05-18T16:02:20.353
> 
> 标签：javascript, css, html, menu

更具体地说，我们如何使用 CSS 样式创建一个占据整个页面的 JavaScript 菜单，但会显示菜单栏。左上角会有一个图标。单击该图标或符号后，应出现菜单并且该图像应发光。再次单击后，菜单消失。我尝试了很多但失败了。我才14岁。请帮我。

如果已经有类似的东西是开源的，请发布一个链接，以便我可以使用它。

**更新：**我自己做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:53:52.273

[在这里](http://apycom.com/)试试这个网站，它为您提供不同的菜单栏供您选择。您需要做的就是下载一个菜单并更改脚本中的菜单详细信息，以便您可以更改菜单名称、添加更多或更少的菜单选项卡等。它使用 jquery 并包含自己的 css 页面，您可以对其进行操作。

为了隐藏和显示菜单，使用 html 工具提示之类的东西怎么样，除了将鼠标悬停在按钮上以打开/隐藏菜单之外，您可以设置它以便在单击按钮时打开/隐藏按钮？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:26:42.043

试试这个它的开源

[http://www.interspire.com/content/2005/12/07/building-an-expanding-dhtml-menu-with-css-and-javascript/](http://www.interspire.com/content/2005/12/07/building-an-expanding-dhtml-menu-with-css-and-javascript/)

[http://www.noupe.com/css/13-awesome-java-script-css-menu.html](http://www.noupe.com/css/13-awesome-java-script-css-menu.html)

# android - Android 中的 XML 解析:: 使用 DOM

> ID：10655988
> 
> 赞同：0
> 
> 时间：2012-05-18T16:02:27.887
> 
> 标签：android, dom, xml-parsing, using

我是 android 新手，我之前尝试过使用 SAX 进行 XML 解析，但我在网络中遇到异常，我尝试了很多，但无法获得，很多人建议使用 AsyncTask，我尝试过，但再次失败，所以我现在尝试使用 DOM，同样在 android.os.NetworkOnMainThreadException 和 gralloc_goldfish 错误中出现了一些异常（即）没有检测到 GPU 仿真的模拟器....帮我解决这个问题。我用这个程序 2 天

程序::XMLParsingDOMExample.java

```
package com.androidpeople.xml.parsing;
import java.net.URL;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import android.app.Activity;
import android.os.Bundle;
import android.widget.LinearLayout;
import android.widget.TextView;
public class XMLParsingDOMExample extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
/** Create a new layout to display the view */
LinearLayout layout = new LinearLayout(this);
layout.setOrientation(1);
/** Create a new textview array to display the results */
TextView name[];
TextView website[];
TextView category[];
try {
URL url = new URL(
"http://www.androidpeople.com/wp-content/uploads/2010/06/example.xml");
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(new InputSource(url.openStream()));
doc.getDocumentElement().normalize();
NodeList nodeList = doc.getElementsByTagName("item");
/** Assign textview array lenght by arraylist size */
name = new TextView[nodeList.getLength()];
website = new TextView[nodeList.getLength()];
category = new TextView[nodeList.getLength()];
for (int i = 0; i < nodeList.getLength(); i++) {
Node node = nodeList.item(i);
name[i] = new TextView(this);
website[i] = new TextView(this);
category[i] = new TextView(this);
Element fstElmnt = (Element) node;
NodeList nameList = fstElmnt.getElementsByTagName("name");
Element nameElement = (Element) nameList.item(0);
nameList = nameElement.getChildNodes();
name[i].setText("Name = "
+ ((Node) nameList.item(0)).getNodeValue());
NodeList websiteList = fstElmnt.getElementsByTagName("website");
Element websiteElement = (Element) websiteList.item(0);
websiteList = websiteElement.getChildNodes();
website[i].setText("Website = "
+ ((Node) websiteList.item(0)).getNodeValue());
category[i].setText("Website Category = "
+ websiteElement.getAttribute("category"));
layout.addView(name[i]);
layout.addView(website[i]);
layout.addView(category[i]);
}
} catch (Exception e) {
System.out.println("XML Pasing Excpetion = " + e);
}
/** Set the layout view to display */
setContentView(layout);
}
} 
```

例子.xml

```
<maintag>
<item>
<name>AndroidPeople</name>
<website category="android">www.androidpeople.com</website>
</item>
<item>
<name>iPhoneAppDeveloper</name>
<website category="iPhone">www.iphone-app-developer.com</website>
</item>
</maintag> 
```

我无法获得上述代码的输出.. 在 android.os.NetworkOnMainThreadException 和 gralloc_goldfish 错误中出现了一些异常（即）没有检测到 GPU 仿真的模拟器....帮我解决这个问题。我 gng 这个程序 2 天.. 在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:20:09.293

在后台线程上执行此操作（可能使用`AsyncTask`）。

A`NetworkOnMainThreadException`就是这个意思——你正在主 UI 线程上运行网络调用。这是为了鼓励我们不要进行阻止 UI 交互的调用。

`url.openStream()`是什么触发了这个。

# atk4 - 使用 addCondition() 将 where 'id IN' 子句添加到模型

> ID：10655989
> 
> 赞同：0
> 
> 时间：2012-05-18T16:02:30.823
> 
> 标签：atk4

我想知道是否可以使用 addCondition() 将类型为“id IN (1,2,3,4)”的 where 子句添加到现有模型？根据 Model_Tabel 中的评论，如果我给它一个 DB_dsql 实例，则需要有可能：

```
function addCondition($field,$cond=undefined,$value=undefined)
{
    // You may pass plain "dsql" expressions as a first argument
    if($field instanceof DB_dsql && $cond==undefined && $value==undefined){
        $this->_dsql()->where($field);
    return $this;
} 
```

但如果我尝试这样做：

```
$conflicto=$this->add('Model_Conflicto');
$conflicto->addCondition($this->api->db->dsql()->where('id IN'.$str)); 
```

我得到一个无效的 SQL 语句，其中包括新 where 子句中的整个 select：

选择 SQL_CALC_FOUND_ROWS *, `conflicto`。`id`from `conflicto`where (select * where id IN(14, 60, 37, 39, 41, 43, 52, 57, 141, 144, 145, 183, 187, 14) )

我可能在这里做错了什么？包含“where id IN”以使其与我的模型一起使用的正确方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:36:55.387

你试过了吗

```
$model->addCondition('id',array(14,60,37,....)); 
```

# ruby-on-rails - rake 资产：在 1.9.2 上预编译需要 28 分钟

> ID：10655994
> 
> 赞同：3
> 
> 时间：2012-05-18T16:02:44.110
> 
> 标签：ruby-on-rails, ruby, asset-pipeline, ruby-1.9.2, ruby-1.8.7

我有一个相当大的 Rails 应用程序（Rails 3.2.3），使用资产管道。assets 文件夹中有很多文件。

在 1.8.7 下，运行`rake assets:precompile`需要 4 分钟。这很长，但由于资产数量庞大，我愿意容忍它。

问题是应用升级到 1.9.2 后，运行`rake assets:precompile`需要**28 分钟**。

以下是相关的 gem 版本：

```
rails (= 3.2.3)
uglifier (1.2.3)
  execjs (~> 1.3.0)
therubyracer (~> 0.9.9)
  libv8 (~> 3.3.10)
sprockets (2.1.2)
  hike (~> 1.2)
  rack (~> 1.0)
  tilt (~> 1.1, != 1.3.0) 
```

当我`tail -f log/production.log`看到正在编译的资产时，我无法确定单个资产的长时间延迟（尽管我确实在日志中多次看到相同的资产——大概是因为每个资产都有多个步骤？ )

我应该尝试哪些其他步骤来帮助诊断问题所在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:34:40.043

Ruby 1.9.2 在加载时间上有严重的回归，我相信随着加载的文件数量呈指数增长。这对 Rails 应用程序造成了很大的打击，我怀疑这是您所看到的资产编译时间大大增加的原因。

这已在 1.9.3 中修复，因此请尝试升级到该版本或[将加载补丁向后移植到 1.9.2](http://www.rubyinside.com/get-edge-ruby-faster-loading-ruby-1-9-2-now-4973.html)。

# oracle - 如何查看一段时间内对 Oracle 的总查询数？

> ID：10655999
> 
> 赞同：1
> 
> 时间：2012-05-18T16:03:00.057
> 
> 标签：oracle, statistics, oracle11g

我有一个简单的需求：我需要查看供应商的应用程序针对我们的 Oracle (11g r2) 数据库运行了多少查询。有没有办法查询系统表（例如`v$...`）来查看这些信息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:46:25.600

你看过[V$SQLSTATS](http://docs.oracle.com/cd/E14072_01/server.112/e10820/dynviews_3065.htm)吗？我不确定您将如何区分供应商特定的 SQL 与可能已经运行的其他 SQL，但这可以让您对正在运行的内容有所了解。

如果您感兴趣的只是现在发生的事情，那么也许[V$SQLAREA](http://docs.oracle.com/cd/B28359_01/server.111/b28320/dynviews_3060.htm)就是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:13:44.670

v$SQL 有一些统计信息，可以告诉您模块和操作（参见 dbms_application_info） v$SQLSTATS 有更多统计信息，但确定应用程序来源的能力较弱。

DBA 可能会过度保护并采取简单的方法来禁止访问真正有用的东西。看看是否可以创建一个视图（屏蔽敏感信息）并将其授予您，以便您可以访问真正有用的东西，而不是敏感的东西。