# StackOverflow 问答 11652000-11652999

# jquery - jquery mobile获取上一页URL

> ID：11652000
> 
> 赞同：0
> 
> 时间：2012-07-25T14:25:51.670
> 
> 标签：jquery, html, jquery-mobile

有没有办法在 Jquery Mobile 中找到上一页的 url？

我使用**了 data.prevPage.attr("href")**但它不起作用。

有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:18:01.450

事件`pagechange`处理程序接收第二个参数`fromPage`，您可以从中提取您来自的页面的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:37:05.677

您可以使用纯 JavaScript 并尝试：

```
document.referrer 
```

如果有的话，这个变量将包含上一页的 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:45:30.523

我有一个简单的方法可以返回上一页：

**历史.back()**

或**history.go(-1)**

这对我来说很好！

谢谢您的帮助。

# php - PHP / OOP - 在类中初始化类

> ID：11652005
> 
> 赞同：1
> 
> 时间：2012-07-25T14:26:08.540
> 
> 标签：php, oop

我对 OOP 相当陌生，但对 PHP 并不陌生。我正在尝试从另一个类中初始化一个类。

索引.php

```
<?
error_reporting(E_ALL);
require("classes/memcache.php");
require("classes/video_test.php");
$videos = new video;
?> 
```

video_test.php

```
<?php
    class video {

            private $mcache;

            public function __construct() {
            $this->mcache = new MCACHE();
            }

            public static function get_scene($scene_id) {
            $info = $this->$mcache->get_item("mykey");
            }

    }
?> 
```

产生：PHP致命错误：不在对象上下文中使用$this

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T14:27:19.517

> 不在对象上下文中时使用 $this

您不能在声明为静态的方法中使用 $this。只需删除 static 关键字并通过对象句柄使用您的方法：

```
$vid = new video()
$vid->get_scene(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:37:33.597

静态方法属于类，而不是您使用**new**创建的对象。$this 伪变量指的是对象而不是类。这就是您的代码中断的原因。您只需删除函数前的 static 关键字即可修复这段代码。或者您可以静态地重新定义整个事物（您可以使用**self::**而不是 $this，声明 $mcache 静态并创建一个静态方法来初始化该变量）

您犯的另一个错误是：**$this->$mcache**。要正确访问属性，请编写**$this->mcache**。您的代码试图访问以 $mcache 变量中未在函数中定义的内容命名的属性（因此您试图访问**$this->null**）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T19:10:55.627

补充一点，类和实例之间存在关键区别。当我们说一个静态方法或属性属于一个类时，这意味着该类的所有实例都共享这个属性。相反，一个对象实例有它自己的一组单独的属性。要掌握 OOP，这种理解非常重要。

# gwt - GWT Cell 导致排序问题

> ID：11652008
> 
> 赞同：0
> 
> 时间：2012-07-25T14:26:16.400
> 
> 标签：gwt, sorting, cell

我创建了一个“ColorCell”，它只显示一个颜色块。但是，如果我将它放在一列中，则排序是“逐一”排序的，这意味着 ColorCell 之后的任何列都会对其*之前*的列进行排序。移除 ColorCell 可解决问题。怎么了？这是单元格的代码并添加到表格中。

```
colorColumn.setSortable(false);
table.addColumn(colorColumn);
table.setColumnWidth(colorColumn, "16px");

ColumnSortEvent.ListHandler<HasMeasures> columnSortHandler = new ColumnSortEvent.ListHandler<HasMeasures>(
        resultsDataProvider.getList());
table.addColumnSortHandler(columnSortHandler);
... code that adds other columns to sortHandler

public class ColorCell<C> implements Cell<C> {

  interface Template extends SafeHtmlTemplates {
    @Template("<div></div><div>{0}</div>")
    SafeHtml noColorCell(SafeHtml cellContents);

    /**
     * The wrapper around the image vertically aligned to the bottom.
     */
    @Template("<div style=\"width:14px;height:14px;float:left;background-color:{0};\"></div>")
    SafeHtml colorBlockCell(String color);

  }

  /**
   * The default spacing between the icon and the text in pixels.
   */
  private static final int DEFAULT_SPACING = 4;

  private static Template template;

  public ColorCell() {
    this(DEFAULT_SPACING);
  }

  public ColorCell(int spacing) {
    if (template == null) {
      template = GWT.create(Template.class);
    }
  }

  public boolean dependsOnSelection() {
    return false;
  }

  public Set<String> getConsumedEvents() {
    return null;
  }

  public boolean handlesSelection() {
    return false;
  }

  public boolean isEditing(Context context, Element parent, C value) {
    return false;
  }

  public void onBrowserEvent(Context context, Element parent, C value,
      NativeEvent event, ValueUpdater<C> valueUpdater) {
  }

  public void render(Context context, C value, SafeHtmlBuilder sb) {
    String color = getColorUsed(context, value);
    if (color != null) {
      sb.append(template.colorBlockCell(color));
    }

  }

  public boolean resetFocus(Context context, Element parent, C value) {
    return true;
  }

  public void setValue(Context context, Element parent, C value) {
  }

  /**
   * Check if the icon should be used for the value. If the icon should not be
   * used, a placeholder of the same size will be used instead. The default
   * implementations returns true.
   *
   * @param value the value being rendered
   * @return true to use the icon, false to use a placeholder
   */
  protected String getColorUsed(Context context, C value) {
    return null;
  }

  /**
   * Get the parent element of the decorated cell.
   *
   * @param parent the parent of this cell
   * @return the decorated cell's parent
   */
  private Element getCellParent(Element parent) {
    return parent; //.getChild(1).cast();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:01:46.683

您是否添加与下一个/上一个标题具有相同标题的 ColorCell？这将合并 ColorCell 的标题并添加一个 colspan。我的猜测是它可能会导致以下列的列索引不正确。

# sql-server-2008 - 如何使用具有多行的 SSIS 将固定宽度文件读入 SQL Server 2008 数据库表

> ID：11652010
> 
> 赞同：0
> 
> 时间：2012-07-25T14:26:18.900
> 
> 标签：sql-server-2008, ssis

我尝试了多种方法，并且我还在 Internet 上研究了该主题，只是为了找到使用平面文件连接读取的单行固定宽度文件。当你有三个或更多不同的行时，你如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:34:27.530

配置平面文件连接管理器编辑器时，请确保从“格式”下拉列表中选择“右对齐”。固定宽度选项令人困惑，它不适合在每行末尾带有回车/换行的文件。选择 Ragged right 后，前往 Advanced 部分并将文本文件中包含的每一列添加到列表中，并设置其 InputColumnWidth 和 OutputColumnWidth。这些值表示文本文件中每一列的长度。

# perl - Perl 在句柄关闭时终止命令

> ID：11652011
> 
> 赞同：4
> 
> 时间：2012-07-25T14:26:20.410
> 
> 标签：perl, command

我有以下代码读取命令“some_command”的输出。“some_command”是一个持续的过程，它会保持打印输出，直到它被杀死。我想知道如果我关闭文件句柄或最后调用，它是否也会终止“some_command”进程，或者“some_command”可能会继续作为孤立进程运行。我基本上想从命令中读取输出，直到找到 /Output/ 的行然后终止。

```
my $mycommand = 'some_command';
open IN, "$mycommand 123456 |" or die("Failed: $!");
while(my $line = <IN> && !$stop) {
    if($line =~ /Output/) {
       # work is done
       last;
       $stop = 1;
    }
}
close IN; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T14:30:57.427

`close`这种类型的句柄将首先关闭管道，然后等待子进程退出。下一次尝试写入管道时，孩子将死于 SIGPIPE。如果您不想等待那么久，您可以加快速度并自行终止。

```
my $pid = open ...;
while (<IN>) {
    if (/Output/) {
       # work is done
       kill TERM => $pid;
       last;
    }

    print;  # Or whatever
}

close IN; 
```

`$stop`（因为你没有使用它，所以摆脱了它。）

# visual-c++ - WebBrowser 控件中的脚本错误

> ID：11652016
> 
> 赞同：0
> 
> 时间：2012-07-25T14:26:34.093
> 
> 标签：visual-c++, mfc

在 MFC VC++ 应用程序中实现 Webbrowser 控件。当页面上有脚本错误时，即使我在 Internet Explorer 中取消选择“显示有关每个脚本错误的通知”，它也会一直显示。此控件从 IE 继承其他选项，如“显示图像”，但不继承脚本错误。

我尝试调试“OnNavigateError()”和“OnNewBrowserWindow()”事件，但它仍然没有出现。我知道在 C# 中有一个名为“ScriptErrorsSuppressed”的属性可以禁用 webbrowser 控件中的脚本错误，但如何在 VC++ 中执行此操作。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-17T17:29:12.767

请注意，您永远无法捕获所有错误，您还应该考虑显示这些烦人的消息。毕竟，WebBrowser 控件不是浏览器，并且多次用于有限的目的（例如：我将此类用于映射项目）。所以你可以通过调用来关闭这些消息：

```
m_Browser.put_Silent(TRUE); 
```

需要阅读 MSDN 文章：[How to handle script errors as a WebBrowser control host](https://support.microsoft.com/en-us/help/261003/how-to-handle-script-errors-as-a-webbrowser-control-host) and add several include files

```
#include <Docobj.h>
#include <Mshtml.h> 
```

最后定义：

```
DEFINE_GUID(CGID_DocHostCommandHandler,0xf38bc242,0xb950,0x11d1,0x89,0x18,0x00,0xc0,0x4f,0xc2,0xc8,0x36); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T00:58:23.060

MSDN 提供了有关[如何将脚本错误作为 WebBrowser 控件主机处理的](http://support.microsoft.com/kb/261003)一些信息。这些信息对我有用。

# mysql - MySQL 奇怪的 FK 错误

> ID：11652019
> 
> 赞同：0
> 
> 时间：2012-07-25T14:26:37.013
> 
> 标签：mysql, sql, foreign-keys

这里有2张桌子。

[全尺寸图片](http://content.screencast.com/users/TT13/folders/Jing/media/440e92fb-b2d1-44cf-9738-02a6f9bd8dd8/2012-07-25_1914.png)

![在此处输入图像描述](../Images/33fd520aabd83f5669655bd3d335076a.png)

我试图通过创建外键`courses:parent<->child.parent_cid`<=>`courses.id`和 `courses:parent<->child.child_cid`<=>来创建它们之间的关系`courses.id`

SQL看起来像这样

```
ALTER TABLE `courses: parent<->child` ADD CONSTRAINT `cpc.parent_cid_courses.id` FOREIGN KEY (`parent_cid`) REFERENCES `courses` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `courses: parent<->child` ADD CONSTRAINT `cpc.child_cid_courses.id` FOREIGN KEY (`child_cid`) REFERENCES `courses` (`id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

收到此错误消息

![在此处输入图像描述](../Images/bb9f9f137d7b822d44ab103d95828039.png)

我究竟做错了什么？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:34:47.520

我的第一个建议：仅使用字母数字字符和下划线重命名子表和外键约束。

该错误消息暗示子表中有无效的外键值。`ALTER TABLE`您可以告诉 MySQL 服务器在运行语句之前忽略这些值：

```
set foreign_key_checks = 0; 
```

或者，您可以通过在添加约束之前添加缺少的父行或删除无效的子行来修复数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:35:43.093

您正在尝试添加外键。该错误意味着子表具有父表中不存在的数据。

在你的情况下`cpc.parent_cid_courses.id`。`parent_cid`有错误的值，父字段中没有对应的值`courses`。`id`.

# iphone - UIButton 永远不会在 UIImageView 的框架区域内响应

> ID：11652023
> 
> 赞同：1
> 
> 时间：2012-07-25T14:26:44.950
> 
> 标签：iphone, ios, ipad, uiimageview, uibutton

这是我的视图层次结构： parentView (UIView) 有一个 UIImageView 作为它的子视图，而它又有一个 UIButton 作为它的子视图。

```
left = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"left.png"]];
left.userInteractionEnabled = YES;
[parentView addSubview:left];

back = [UIButton buttonWithType:UIButtonTypeCustom];
[back setImage:[UIImage imageNamed:@"Arrow-left.png"] forState:UIControlStateNormal];
[back addTarget:self action:@selector(back:) forControlEvents:UIControlEventTouchUpInside];
back.showsTouchWhenHighlighted = YES;
[left addSubview:back]; 
```

一切正常显示，但按钮不响应触摸。如果我将其框架从 UIImageView 的框架移到其他地方并将其设置为父视图（UIView）的子视图，它会做出响应。但事情就是这样。

**即使我设置为 parentView 的子视图，如果它在 UIImageView 的框架区域内，按钮也不会响应**。图像视图的 userInteractionEnabled 属性已设置为 YES。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:29:34.230

UIImageView 关闭 userInteraction - 打开它，按钮将起作用。

编辑：

因此，我几乎完全按照所写的方式使用了您的代码-一个红鲱鱼是您说一切看起来都很好。对我来说，自定义按钮的框架为 0,0,0,0，所以我什么也没看到。当我设置框架时，一切都很完美：

```
 UIButton *back = [UIButton buttonWithType:UIButtonTypeCustom];
    UIImage *image = [UIImage imageNamed:@"46-truck.png"];
    assert(image);

    [back setImage:image forState:UIControlStateNormal];
    [back addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside];
    back.showsTouchWhenHighlighted = YES;
    back.frame = (CGRect){ {0,0}, image.size};

NSLog(@"FRAME: %@", NSStringFromCGRect(back.frame) );
    [imageView addSubview:back]; 
```

因此，如果您需要在运行时探测超级视图以找出是什么，您可以使用下面的代码。[UIView dumpSuperviews:back msg:@"Darn Bark Button"];

```
@interface UIView (Utilities_Private)

+ (void)appendView:(UIView *)v toStr:(NSMutableString *)str;

@end

@implementation UIView (Utilities_Private)

+ (void)appendView:(UIView *)a toStr:(NSMutableString *)str
{
    [str appendFormat:@"  %@: frame=%@ bounds=%@ layerFrame=%@ tag=%d userInteraction=%d alpha=%f hidden=%d\n", 
        NSStringFromClass([a class]),
        NSStringFromCGRect(a.frame),
        NSStringFromCGRect(a.bounds),
        NSStringFromCGRect(a.layer.frame),
        a.tag, 
        a.userInteractionEnabled,
        a.alpha,
        a.isHidden
        ];
}

@end

@implementation UIView (Utilities)

+ (void)dumpSuperviews:(UIView *)v msg:(NSString *)msg
{
    NSMutableString *str = [NSMutableString stringWithCapacity:256];

    while(v) {
        [self appendView:v toStr:str];
        v = v.superview;
    }
    [str appendString:@"\n"];

    NSLog(@"%@:\n%@", msg, str);
}

+ (void)dumpSubviews:(UIView *)v msg:(NSString *)msg
{
    NSMutableString *str = [NSMutableString stringWithCapacity:256];

    if(v) [self appendView:v toStr:str];
    for(UIView *a in v.subviews) {
        [self appendView:a toStr:str];
    }
    [str appendString:@"\n"];

    NSLog(@"%@:\n%@", msg, str);
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:36:33.387

您实际上需要设置`userInteractionEnabled = NO`以允许触摸通过。

取自[这里](https://stackoverflow.com/questions/7060410/touch-through-uiimageview)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:05:47.330

我以前也发生过这种情况。我认为这是一个吞噬事件的超级观点。

我知道您已经说过将其添加到 parentView 仅在它不与图像视图重叠时才有效。如果禁用图像视图上的用户交互，按钮事件是否会在添加到父视图时一致触发？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T15:05:10.677

也许

```
parentView.userInteractionEnabled = YES; 
```

或父视图框架太小，无法按住按钮或图像视图。检查父视图的大小；

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-25T14:50:23.313

```
left.userInteractionEnabled = YES; 
```

把这条线放在最后。

# php - 规避通过 cURL 连接到 IPv6 主机的问题

> ID：11652025
> 
> 赞同：2
> 
> 时间：2012-07-25T14:26:53.140
> 
> 标签：php, curl, ipv6

我有一个为基于 PHP 的 CMS 分发的应用程序，它通过 cURL 连接到 Google 服务。最近（自从 Google 在 6 月份迁移到 IPv6 以来），我收到了一些关于连接时间极慢（一种情况下为 150 秒）或完全缺乏连接的报告（示例 curl 错误：无法连接到 2001:4860:b007： :5F: 网络不可达）。

我发现，通过 SO 和其他资源，强制 curl 使用 IPv4 解决了这些问题：

```
if(defined('CURLOPT_IPRESOLVE') && defined('CURL_IPRESOLVE_V4'))
{
    curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4);
} 
```

我的猜测是发出这些请求的服务器配置错误（也许说它们支持 IPv6 而实际上不支持？）。但我对 IPv6 对 DNS 查找的响应的复杂性一无所知。

通过强制 IPv4，我在正确配置的服务器上设置*错误*？

有没有一种可靠的方法可以用来检查兼容性，并相应地设置我的 cURL 选项？

# javascript - 是否可以使用 JavaScript 编写后端？

> ID：11652026
> 
> 赞同：16
> 
> 时间：2012-07-25T14:26:55.047
> 
> 标签：javascript, backend

众所周知，JavaScript 在网络上很普遍。对于客户端脚本，它做得很好。

但是是否可以将 JavaScript 带出浏览器？例如，写一个流式套接字或写数据库，做调度工作？后端有这样的事情吗？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-25T14:48:30.447

是的，你可以用 Javascript 做很多后端的事情。

有很多框架和应用程序将 Javascript 作为后端运行，它们各有利弊。

## [节点](http://nodejs.org/)

> Node.js 是一个基于 Chrome 的 JavaScript 运行时构建的平台，用于轻松构建快速、可扩展的网络应用程序。Node.js 使用事件驱动的非阻塞 I/O 模型，使其轻量且高效，非常适合跨分布式设备运行的数据密集型实时应用程序。

## [OPA](http://opalang.org/)

> Opa 是一个用于 JavaScript 的高级应用程序框架。所有方面都直接用 Opa 编写：前端代码、后端代码、数据库查询和配置。一切都是强静态类型的。

## [CommonJs](http://www.commonjs.org/)

> CommonJS API 将通过定义处理许多常见应用程序需求的 API 来填补这一空白，最终提供与 Python、Ruby 和 Java 一样丰富的标准库。目的是应用程序开发人员将能够使用 CommonJS API 编写应用程序，然后跨不同的 JavaScript 解释器和主机环境运行该应用程序。

## [Vertx.io](http://vertx.io/)

> Vert.x 是下一代异步、轻松可扩展的并发应用程序的框架。Vert.x 是一个在 JVM 上运行的事件驱动应用程序框架 - 具有真正的并发性和无与伦比的性能的运行时。Vert.x 然后在 Ruby、Java、Groovy、JavaScript 和 Python 中公开 API。因此，您可以选择要使用的语言。Scala 和 Clojure 支持也在路线图上。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-25T14:28:50.813

看看[node.js](http://nodejs.org/)。它在某些方面做得很好，但可能并不适合所有用途。

如果您正在寻找涉及大量并行进程的事情和/或您希望保持与用户浏览器之间的持久连接，那么它可能是完美的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T14:33:02.537

与 node.js 一起，看看[vert.x](http://vertx.io/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-07T02:45:45.440

本站由 node.js[编写](http://icalc.cn)

使用[websvr](https://github.com/newghost/websvr)，它的 Java 风格有过滤器和处理程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T14:39:46.987

是的，您可以在浏览器之外使用 JavaScript。两者都用于服务器端脚本（类似于 JSP 或 ASP）。这可以使用 Node.js ( [http://www.commonjs.org/](http://www.commonjs.org/) ) 来完成，但是还有其他可用的选项。同样，您可以使用 CommonJS API ( [http://www.commonjs.org/](http://www.commonjs.org/) ) 在网络空间之外完全创建应用程序。

查看有关 JavaScript 的 Wikipedia 文章 (http://en.wikipedia.org/wiki/JavaScript#Server-side_JavaScript)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T14:30:37.803

从来没有用过，但是对于服务器端 JS，最流行的框架是 nodejs [http://nodejs.org](http://nodejs.org)

# javascript - 在非陆地上拖动谷歌地图地标

> ID：11652030
> 
> 赞同：0
> 
> 时间：2012-07-25T14:27:07.070
> 
> 标签：javascript, google-maps-api-3

在我正在工作的网站中，我需要用户在地图上找到他/她的财产。我通过使用谷歌地图 v3 中的可拖动地标来做到这一点。

我怎么能限制用户只在陆地上拖动地标，而不是在海上。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:34:05.243

该信息在 Google Maps API v3 中不可用。如果您知道感兴趣的区域，您可以创建包含允许区域或不允许区域的多边形，并编写代码来防止这种情况。可能对用户最友好的是等到拖动结束事件，然后将标记移出不允许的区域或让用户知道他们需要移动它。

# cakephp - 在 CakePHP 分页中获取当前页面

> ID：11652033
> 
> 赞同：0
> 
> 时间：2012-07-25T14:27:14.717
> 
> 标签：cakephp

在我的一个网页上，我显示了带有默认分页 [Paginator helper] 的客户详细信息列表。每个客户行都有一个相应的“编辑”按钮，单击该按钮会显示一个填充了该客户信息的 DIV。[此 DIV 有文本框等，我可以在其中更改客户信息] 重新输入/修改客户详细信息后，当我单击“保存”按钮时，会进行 2 个 ajax 调用。

1.  第一个保存编辑的记录
2.  第二个用修改后的信息更新同一页面上的客户列表

我的问题：如果我在第 3 页并编辑一条客户记录，则第二次 ajax 调用会刷新列表但不会转到第 3 页。它从第 1 页开始。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:42:04.943

您可以在此处获取当前页面：

```
<?php echo $this->Paginator->counter(array(
    'format' => ('{:page}')
      )); ?> 
```

这是解决方案的一部分。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-21T05:43:24.397

您可以在此处获取当前页面：

```
$this->request->params['named']['page'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:42:49.423

您是否尝试使用 Paginator 的链接？它维护页面#到控制器。

就像是

```
// same parameters as $this->Html->link
<?php echo $this->Paginator->link( ... ) ?> 
```

还要检查[Paginator Helper 的参考文档](http://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-08T19:44:19.223

我使用 jquery / javascript 将页面存储在 cookie 上，然后从控制器读取它。

//------------------------------------------------ -------------------------

// 在动作点击记住当前页面

```
$('td.actions').click( function( event )
{
    var page = $('li.active a').html();
    var name = window.location.href.split('-').join('_').split('/').pop();

    $.cookie.raw = true;
    $.cookie( 'CakeCookie[' + name + '_page]', page, { expires: 365, path: '/' } );

}); 
```

# c++ - 在 Linux 中以 UTF-8 字符串形式获取环境变量

> ID：11652038
> 
> 赞同：1
> 
> 时间：2012-07-25T14:27:39.633
> 
> 标签：c++, linux, unicode, environment-variables

我正在尝试将应用程序从 Windows 移植到 linux。在 windows 中，我在 windows.h 中有一个`GetEnvironmentStrings()`函数，它以 NAME=VALUE 的形式为我提供当前进程中的环境变量及其值。对于 Linux，我使用这样的环境变量

```
for (char **en=environ; *en; en++)   {
    std::string str(*en)
    env.push_back(str);      //env is a vector of strings
} 
```

该应用程序似乎仍然无法正常工作。在 Windows 中，当我打印传递给 env 向量（字符串向量）的字符串大小时，它会将所有字符串的大小打印为 48 个字节。而在 Linux 上大小为 8。原始应用程序使用 Unicode 版本 ( `GetEnvironmentStringsW`) 并使用转换函数将返回的宽字符串转换为 8 位字符串`WideCharToMultiByte`。

我对字符编码没有足够的知识，但我想这与字符串的编码方式有关。知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:55:56.787

在 Windows 上，每个环境变量的大小都相同，这一事实非常可疑。我怀疑您没有正确打印尺寸，这与任何编码无关。

```
#include <iostream>
#include <string>
#include <vector>

int main()
{
    std::vector<std::string> env;
    for (char **en=environ; *en; en++)   {
        std::string str(*en);
        std::cout << str.size() << '\n';
        env.push_back(str);
    }
} 
```

[http://ideone.com/If9ut](http://ideone.com/If9ut)

```
18
33
16
16
17
7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:41:24.517

这似乎是相关的：

[Linux：环境变量存储在哪里？](https://stackoverflow.com/questions/532155/linux-where-are-environment-variables-stored)

> 为了给现有的环境变量设置一个值，我们使用赋值表达式。例如，要将“LANG”变量的值设置为“he_IL.UTF-8”，我们使用以下命令：

```
LANG=he_IL.UTF-8 
```

[https://help.ubuntu.com/community/EnvironmentVariables](https://help.ubuntu.com/community/EnvironmentVariables)

或者，您可以执行终端命令以使用[system()](http://linux.die.net/man/3/system)获取环境变量。该页面会告诉您要包​​含哪些库以及正确的使用信息。

# javascript - D3中的小提琴图

> ID：11652039
> 
> 赞同：4
> 
> 时间：2012-07-25T14:27:41.397
> 
> 标签：javascript, graph, charts, ggplot2, d3.js

关于从哪里开始使用 d3 制作小提琴图的任何想法？它已经存在了吗？

我环顾四周，想出了如何使用 ggplot2 来做到这一点，并希望有一个现成的例子可供我学习，但还没有找到。

我想我可以做一个非常痛苦的过程，将各种尺寸的条相互叠加，或者进行分布、旋转和镜像。但肯定有更好的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T15:44:59.760

我自己需要它，所以这里是：[小提琴情节](http://bl.ocks.org/z-m-k/5014368)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:52:48.843

据我所知，以前没有人这样做过，但应该不会太难。我会开始就好像我正在为小提琴的一半制作折线图（或用盒装而不是线）。也就是说，创建适当的 x 和 y 比例并添加数据。结果我将旋转并平移到正确的位置。然后再次做同样的事情并镜像它以获得另一半小提琴。

这听起来可能很复杂，但 SVG 内置了对这些操作（旋转和镜像）的支持。您应该能够像绘制分布的折线图一样使用 2-3 个简单的操作来处理此问题。将所有内容包装在一个函数中，您就可以调用一些东西来创建小提琴。

当然，这也取决于您拥有绘制绘图的数据的形式。由于数据点太少，线图可能不可行，但您可以轻松地使用条形图代替。

# jquery-selectors - live() 和 on() 方法，以及 FF 浏览器

> ID：11652044
> 
> 赞同：0
> 
> 时间：2012-07-25T14:28:12.937
> 
> 标签：jquery-selectors, jquery, jquery-on

我有这个使用 live 方法的代码，它适用于 Opera 和 Chrome：

```
 $(".dynamicaly_created_div").live("click",function(){
    $(event.target).parent().remove();
 }); 
```

但不是在FF。所以我试图用“on”替换“live”（我在不推荐使用live的地方读到了）。但是，这在任何浏览器中都不起作用。

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T14:30:17.243

您是否尝试过将事件传递给函数？

```
$(".dynamicaly_created_div").live("click",function(e){
    $(e.target).parent().remove();
}); 
```

# c++ - 为什么预分配函数指针的性能比分支差？

> ID：11652048
> 
> 赞同：4
> 
> 时间：2012-07-25T14:28:22.107
> 
> 标签：c++, performance, optimization, function-pointers

我有一个带有`enum`成员变量的类。其中一个成员函数将其行为基于此`enum`，因此作为“可能的”优化，我将两种不同的行为作为两个不同的函数，并且我给类一个在构造时设置的成员函数指针。我模拟了这样的情况：

```
enum catMode {MODE_A, MODE_B};

struct cat
{
    cat(catMode mode) : stamp_(0), mode_(mode) {}

    void
    update()
    {
        stamp_ = (mode_ == MODE_A) ? funcA() : funcB();
    }

    uint64_t stamp_;
    catMode  mode_;
};

struct cat2
{
    cat2(catMode mode) : stamp_(0), mode_(mode)
    {
        if (mode_ = MODE_A)
            func_ = funcA;
        else
            func_ = funcB;
    }

    void
    update()
    {
        stamp_ = func_();
    }

    uint64_t stamp_;
    catMode  mode_;
    uint64_t (*func_)(void);
}; 
```

然后我创建一个 cat 对象和一个长度数组`32`。我遍历数组将其放入缓存中，然后调用猫更新方法`32`时间并将延迟使用存储`rdtsc`在数组中......

`rand()`然后我使用,`ulseep()`和一些任意的 ..调用一个循环数百次的函数，然后我再次`strcmp()`执行此操作`32`。

结果是带有分支的方法似乎总是在`44`+/-`10`循环左右，而带有函数指针的方法往往在`130`. 我很好奇为什么会出现这种情况？

如果有的话，我会期待类似的表现。此外，模板化几乎不是一种选择，因为真正的 cat 类针对该功能的完全专业化将是矫枉过正的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:31:28.000

如果没有完整的 SSCCE，我将无法像通常处理此类问题那样处理这个问题。
所以我能做的最好的就是推测：

您的两种情况之间的核心区别在于您有一个分支与一个函数指针。您完全看到差异的事实强烈暗示`funcA()`并且`funcB()`是非常小的功能。

**可能性 #1：**

在代码的分支版本中，`funcA()`并且`funcB()`正在被编译器内联。这不仅跳过了函数调用开销，而且如果函数足够简单，分支也可以完全优化。

另一方面，函数指针不能被内联，除非编译器可以在编译时解析它们。

**可能性 #2：**

通过将分支与函数指针进行比较，您将[分支预测器](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)与[分支目标预测](http://en.wikipedia.org/wiki/Branch_target_predictor)器放在一起。

分支目标预测与分支预测不同。在分支情况下，处理器需要预测分支的方式。在函数指针的情况下，它需要预测分支到哪里。

您的处理器的分支预测器很可能比其分支目标预测器准确得多。但话又说回来，这都是猜测......

# javascript - 在 Ruby on Rails 中向下拉列表（选择）添加值？

> ID：11652051
> 
> 赞同：0
> 
> 时间：2012-07-25T14:28:36.777
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, jquery, drop-down-menu

我正在寻找一个很好的解决方案来为下拉（选择）菜单添加一个值。

我在想某种“+”链接，它会在单击时显示一个文本字段，然后您输入一个值，将其保存为 ajax 样式并以某种方式重新加载下拉菜单的选项。这似乎是一项相当多的工作。

有什么建议或想法吗？

# objective-c - XCode 控制台中方括号中的数字是多少？

> ID：11652052
> 
> 赞同：4
> 
> 时间：2012-07-25T14:28:37.660
> 
> 标签：objective-c, xcode, cocoa, nsapplication

> **可能重复：**
> [iphone nslog 输出格式](https://stackoverflow.com/questions/3968679/iphone-nslog-output-format)

> 2012-07-25 16:25:08:491 MyProject[ **2488:403** ] 应用程序完成启动。

这可能是一个简单的问题，但这些数字是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:46:00.353

它是进程ID，后跟线程ID。[在这里](http://www.idevgames.com/forums/thread-561.html)解释。

# java - 如何用 jetty.port 覆盖 jetty.xml

> ID：11652058
> 
> 赞同：11
> 
> 时间：2012-07-25T14:29:04.260
> 
> 标签：java, maven, jetty, embedded-jetty, maven-jetty-plugin

我正在使用 maven-jetty-plugin 并尝试使用 -Djetty.port=8090 覆盖我的 jetty.xml 设置，但它不起作用。只有当我从 jetty.xml 文件中删除连接器部分时，我才能将端口设为 8090。

所以：

```
 mvn jetty:run -Djetty.port=8090 
```

连接器从端口 8080 开始

没有连接器从端口 8090 开始

问题是我需要配置接受器、统计信息和其他东西。我尝试仅从连接器中移除端口，但它不起作用。

我在用着：

```
JAVA 1.7_05
MAVEN 3.0.4
Jetty 8.1.4
Linux Ubuntu 12.04 64bits 
```

这是我的 pom.xml 插件配置：

```
<plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>8.1.4.v20120524</version>
            <configuration>
                <stopKey>foo</stopKey>
                <stopPort>9990</stopPort>
                <jettyXml>src/main/webapp/WEB-INF/jetty.xml</jettyXml>
            </configuration>
            <executions>
                <execution>
                    <id>start-jetty</id>
                    <!-- <phase>pre-integration-test</phase> -->
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <scanIntervalSeconds>0</scanIntervalSeconds>
                    </configuration>
                </execution>
                <execution>
                    <id>stop-jetty</id>
                    <!-- <phase>post-integration-test</phase> -->
                    <goals>
                        <goal>stop</goal>
                    </goals>
                </execution>
            </executions>
</plugin> 
```

Jetty.xml 连接器配置：

```
<Call name="addConnector">
  <Arg>
      <New class="org.eclipse.jetty.server.nio.SelectChannelConnector">
        <Set name="host"><Property name="jetty.host" /></Set>
        <Set name="port"><Property name="jetty.port" default="8080"/></Set>
        <Set name="maxIdleTime">300000</Set>
        <Set name="Acceptors">4</Set>
        <Set name="statsOn">false</Set>
        <Set name="confidentialPort">8443</Set>
    <Set name="lowResourcesConnections">20000</Set>
    <Set name="lowResourcesMaxIdleTime">5000</Set>
      </New>
  </Arg>
</Call> 
```

提前致谢！

更新 1：还尝试在 jetty.xml 中使用 SystemProperty 而不是 Property。不工作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T17:05:35.280

更新1：确实有效。不知道为什么，但我也在主机上尝试了它作为 SystemProperty 并且它有效。然后我删除了主机并开始工作。

所以最终修复工作jetty.xml连接器conf：

```
<Call name="addConnector">
  <Arg>
      <New class="org.eclipse.jetty.server.nio.SelectChannelConnector">
        <Set name="host"><SystemProperty name="jetty.host" /></Set>
        <Set name="port"><SystemProperty name="jetty.port" default="8080"/></Set>
        <Set name="maxIdleTime">300000</Set>
        <Set name="Acceptors">4</Set>
        <Set name="statsOn">false</Set>
        <Set name="confidentialPort">8443</Set>
    <Set name="lowResourcesConnections">20000</Set>
    <Set name="lowResourcesMaxIdleTime">5000</Set>
      </New>
  </Arg>
</Call> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T14:49:14.250

我有同样的问题。使固定：

在 pom 的属性部分，定义 jetty.port：

```
<properties>
    <jetty.port>8888</jetty.port>
            ....
</properties> 
```

在插件配置中：

```
<connectors>
    <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
        <maxIdleTime>3600000</maxIdleTime>
        <port>${jetty.port}</port>
    </connector> 
```

这可以覆盖命令行上的端口

```
mvn -D jetty.port=9999 jetty:run 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T09:12:26.227

if you are using ./jetty.sh start command to start the server, it read configure from start.ini or start.d in base folder, please try to change port (jetty.port) in that and restart the server.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-28T10:27:28.307

只需删除“port”内的 SystemProperty 标记，并将新的端口值放入“port”标记内：

![在此处输入图像描述](../Images/f1d04aa0523a6805ad7733eea1f626da.png)

# ruby-on-rails - 即使在 rails 3.2 中定义，也没有路线匹配

> ID：11652064
> 
> 赞同：0
> 
> 时间：2012-07-25T14:29:27.910
> 
> 标签：ruby-on-rails, routes

我正在尝试在邮件视图中使用 url_for 来定义路由：

```
<%= url_for(
    :controller => 'scribe_requests', 
    :action => 'accept', 
    :id => @match.acceptance_token, 
    :only_path => false) %> 
```

我在我的 routes.rb 中定义了路线：

```
resources :scribe_requests do
  member do
    match 'accept' => 'scribe_requests#accept', :as => :accept
  end
end 
```

我的控制器：

```
class ScribeRequestsController < ApplicationController
  respond_to :html

  def accept
    ..
  end
  ..
end 
```

我不确定这里出了什么问题？我延迟的工作失败了，但有例外

> "{没有路由匹配 {:controller=>"scribe_requests", :action=>"accept", :id=>"nv4Nl8wWXLX2zFDm3s3t7w"} /home/syed/.rvm/gems/ruby-1.9.2-p0/gems/ actionpack-3.2.5/lib/action_dispatch/routing/route_set.rb:532:in `raise_routing_error' /home/syed/.rvm/gems/ruby-1.9.2-p0/gems/actionpack-3.2.5/lib/action_dispatch/routing/route_set.rb:528:in` rescue in generate' /home/syed/.rvm/gems/ruby-1.9.2-p0/gems/actionpack-3.2.5/lib /action_dispatch/routing/route_set.rb:520 :在`generate' /home/syed/.rvm/gems/ruby-1.9.2-p0/gems/actionpack-3.2.5/lib/action_dispatch/routing/route_set.rb:561:in` 生成'/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/actionpack-3.2.5/lib/action_dispatch/routing/route_set.rb: 586:in `url_for' /home/syed/.rvm/gems/ruby-1.9.2-p0/gems/actionpack-3.2.5/lib/action_dispatch/routing/url_for.rb:148:in` url_for' /home/syed/.rvm/gems/ruby-1.9.2-p0/gems/actionpack-3.2.5/lib/action_view/helpers/url_helper.rb:107:in `url_for' /home/syed/work/projects/mapunity/retina-india/app/views/notifier/scribe_service_needed_email.html.erb:47:in` _app_views_notifier_scribe_service_needed_email_html_erb___981003510_106966530' /home/syed /.rvm/gems/ruby-1.9.2-p0/gems/actionpack-3.2.5/lib/action_view/template.rb:145：在“渲染中的块”中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:49:12.777

必须在路由定义中添加`:via`选项并且它起作用了。奇怪的是，我这样做没有任何影响。可能是一些缓存问题。所以改变之后，我的路线定义变成了，

```
resources :scribe_requests do
  member do
    match 'accept' => 'scribe_requests#accept', :via => :get, :as => :accept
  end
end 
```

测试运行：

```
ruby-1.9.2-p0 > app.url_for :controller => 'scribe_requests', :action => 'accept', :id => 'test'
 => "http://www.example.com/scribe_requests/test/accept" 
```

谢谢您的帮助。

# android - 如何在 Android 运行时检测到 Activity 泄漏？

> ID：11652067
> 
> 赞同：0
> 
> 时间：2012-07-25T14:29:37.303
> 
> 标签：android, android-activity, memory-leaks

有时，我可以看到报告活动泄漏的 logcat 消息。例如：

```
Activity com.android.internal.app.ChooserActivity has leaked IntentReceiver com.android.internal.app.ResolverActivity$1@4144d6e8 that was originally registered here. Are you missing a call to unregisterReceiver()?

android.app.IntentReceiverLeaked: Activity com.android.internal.app.ChooserActivity has leaked IntentReceiver com.android.internal.app.ResolverActivity$1@4144d6e8 that was originally registered here. Are you missing a call to unregisterReceiver()?
     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:763)
     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:567)
     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1081)
     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1068)
     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1062)
     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:341)
     at com.android.internal.content.PackageMonitor.register(PackageMonitor.java:65)
     at com.android.internal.app.ResolverActivity.onCreate(ResolverActivity.java:99)
     at com.android.internal.app.ChooserActivity.onCreate(ChooserActivity.java:53)
     at android.app.Activity.performCreate(Activity.java:4465)
     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2033)
     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
     at android.app.ActivityThread.access$600(ActivityThread.java:132)
     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
     at android.os.Handler.dispatchMessage(Handler.java:99)
     at android.os.Looper.loop(Looper.java:137)
     at android.app.ActivityThread.main(ActivityThread.java:4575)
     at java.lang.reflect.Method.invokeNative(Native Method)
     at java.lang.reflect.Method.invoke(Method.java:511)
     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
     at dalvik.system.NativeStart.main(Native Method) 
```

我的问题是：如何检测到此活动泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:36:41.700

要检测代码中的内存泄漏，您需要为 eclipse 安装[Memory Analyzer Tool](http://www.eclipse.org/mat/downloads.php)插件。

要了解如何使用 MAT，请查看以下链接：[http ://android-developers.blogspot.in/2011/03/memory-analysis-for-android.html](http://android-developers.blogspot.in/2011/03/memory-analysis-for-android.html)

这是一个非常有用的插件，虽然一开始有点难以理解，但随着您的使用，您将立即检测到内存泄漏。

如果您遇到任何困难，请随时问我。

谢谢 ：）

# c++ - 将 Z3 整数表达式转换为 C/C++ int

> ID：11652069
> 
> 赞同：10
> 
> 时间：2012-07-25T14:29:39.797
> 
> 标签：c++, api, model, z3

我是 Z3 的新手，并在此处和 Google 上搜索了我的问题的答案。不幸的是，我没有成功。

我正在使用 Z3 4.0 C/C++ API。我声明了一个未定义的函数*d: (Int Int) Int*，添加了一些断言，并计算了一个模型。到目前为止，效果很好。

现在，我想提取模型定义的函数*d*的某些值，比如*d(0,0)*。以下语句有效，但返回一个表达式而不是函数值，即*d(0,0)*的整数。

```
z3::expr args[] = {c.int_val(0), c.int_val(0)};
z3::expr result = m.eval(d(2, args)); 
```

支票

```
result.is_int(); 
```

返回*true*。

我（希望不是太愚蠢）的问题是如何将返回的表达式转换为 C/C++ int？

非常感谢帮助。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T15:07:48.197

[Z3_get_numeral_int](http://research.microsoft.com/en-us/um/redmond/projects/z3/group__capi.html#ga620c6d7e5f7992451bb97743d53afc63)是您正在寻找的。

以下是文档的摘录：

> ```
> Z3_bool Z3_get_numeral_int(__in Z3_context c, __in Z3_ast v, __out int * i)
> 
> Similar to Z3_get_numeral_string, but only succeeds if the value can fit in a 
> machine int. Return Z3_TRUE if the call succeeded. 
> ```

不过你应该小心。Z3 的整数是数学整数，很容易超出 32 位 int 的范围。从这个意义上说，使用[Z3_get_numeral_string](http://research.microsoft.com/en-us/um/redmond/projects/z3/group__capi.html#ga94617ef18fa7157e1a3f85db625d2f4b)并将字符串解析为大整数是一个更好的选择。

# javascript - 在字段旁边显示图像

> ID：11652071
> 
> 赞同：0
> 
> 时间：2012-07-25T14:29:47.177
> 
> 标签：javascript, jquery, css

我需要验证一个字段，如果它有一个值，则该字段旁边会显示一个“勾号”符号。

我有以下用于验证的 javascript 函数

```
function validate_this_field(field_value, field_id)
{
   if($j('#' + field_id).val() ) {   
   $j('#' + field_id ).addClass('mandatory_field_completed');
   }
} 
```

**CSS代码**

```
.mandatory_field_completed{
    border-style: solid;
    border-width: 1px;
    border-color: green;
    background:url(../images/tick.png) right no-repeat;
   padding: 4px 4px 4px 34px;
} 
```

上述css的问题是图像显示在字段内。我想在正在验证的字段之外和旁边显示“勾号”图像。

任何建议都非常感谢。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:33:17.943

将图像放在带有样式的 div 旁边`display:none`，然后显示它：

```
function validate_this_field(field_value, field_id)
{
   if($j('#' + field_id).val() ) {   
       $j('#' + field_id ).addClass('mandatory_field_completed')
           .next().show(); // show next element after div
   }
} 
```

或者，您可以拥有一些控制容器 div 并在背景中使用图像为其设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:38:10.003

如果您希望它在字段之外，则必须将图像应用于包装元素的背景：

```
<div class="tick"><input class="txtInput" type="test"></div> 
```

CSS：

```
 .txtInput {
        width:200px;
    }

   .tick {
       background-image:url(http://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Check_mark_23x20_02.svg/19px-Check_mark_23x20_02.svg.png);
       padding-right:20px;
       background-repeat:no-repeat;
       background-position:205px 0px;
   } 
```

验证时将类添加到包装器。

# zend-studio - Zend Studio 9 - 代码折叠

> ID：11652073
> 
> 赞同：0
> 
> 时间：2012-07-25T14:29:53.077
> 
> 标签：zend-studio, code-folding

Zend Studio 9中有什么技巧可以折叠一部分代码吗？我可以折叠函数和/或类，但不支持“if 语句”折叠或选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:18:34.957

Zend Studio 9 没有办法做到这一点。我继续使用 Komodo IDE。

# php - 代码中的 JavaScript 和 PHP - 有什么区别？

> ID：11652076
> 
> 赞同：0
> 
> 时间：2012-07-25T14:30:06.880
> 
> 标签：php, javascript

我的 JavaScript 部分中有这段代码：

```
var opConfig = new Product.Options(<?php echo $this->getJsonConfig(); ?>); 
```

PHP 调用返回了一些字符串，为了方便起见，假设字符串是*abcd*。所以这段代码导致：

```
var opConfig = new Product.Options(abcd); 
```

现在，几行之后，我有这个代码：

```
this.opConfig = new Product.Options(opconfig); 
```

该`opconfig`变量具有相同的字符串`abcd`，但结果不同，`this.opConfig`看起来不像以前那样。那么我如何将字符串用作参数有区别吗？我错过了什么？对我来说，它应该始终是同一个电话，即：

```
new Product.Options(abcd) 
```

想法？

**补充：** JS代码中的完整调用如下所示：

```
var opConfig = new Product.Options({"16":{"26":{"price":5,"oldPrice":5,"priceValue":"5.0000","type":"fixed","excludeTax":5,"includeTax":5},"28":{"price":8,"oldPrice":8,"priceValue":"8.0000","type":"fixed","excludeTax":8,"includeTax":8},"27":{"price":10,"oldPrice":10,"priceValue":"10.0000","type":"fixed","excludeTax":10,"includeTax":10}},"14":{"price":0,"oldPrice":0,"priceValue":"0.0000","type":"fixed","excludeTax":0,"includeTax":0},"15":{"price":0,"oldPrice":0,"priceValue":"0.0000","type":"fixed","excludeTax":0,"includeTax":0}}); 
```

参数作为对象到达被调用的函数，不知道为什么。以另一种方式调用它，相同的字符串似乎作为字符串到达​​它。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:31:36.883

改成：

```
var opConfig = new Product.Options('<?php echo $this->getJsonConfig(); ?>'); 
```

`opconfig`是一个字符串变量，因此可以将其作为参数传递。

而您的 PHP 代码将呈现：

```
var opConfig = new Product.Options(abcd); 
```

`abcd`不是字符串变量。因此，您需要将其放入语音标记中，使其成为字符串对象。你的输出现在是：

```
var opConfig = new Product.Options('abcd'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:32:26.410

如果你有`new Product.Options(abcd)`then`abcd`是一个变量名，而不是一个字符串。您需要添加引号，使其最终为`new Product.Options('abcd')`：

```
var opConfig = new Product.Options('<?php echo $this->getJsonConfig(); ?>');
// OR
var opConfig = new Product.Options("<?php echo $this->getJsonConfig(); ?>"); 
```

无论哪种方式，您都需要确保您的 PHP 输出转义任何可能“破坏”字符串文字的字符，例如，单引号（在第一个中）或双引号（在第二个中）或换行符（在任何一个中） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:32:46.303

我可以看到您缺少引号：

```
var opConfig = new Product.Options('<?php echo $this->getJsonConfig(); ?>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:32:53.810

更改以下行

```
var opConfig = new Product.Options(<?php echo $this->getJsonConfig(); ?>); 
```

至

```
var opConfig = new Product.Options('<?php echo $this->getJsonConfig(); ?>'); 
```

# javascript - 自定义 jQuery 插件：事件未按预期运行

> ID：11652080
> 
> 赞同：1
> 
> 时间：2012-07-25T14:30:19.723
> 
> 标签：javascript, events

我正在编写一个轻量级的 jQuery 插件来检测脏表单，但在处理事件时遇到了一些问题。正如您在下面的代码中看到的那样，该插件将一个事件侦听器附加到“beforeunload”，以测试表单是否脏并生成一个弹出窗口。

还有另一个事件监听器附加到该表单的“提交”，理论上应该删除该特定表单的“beforeunload”监听器（即我提交的当前表单不应该测试污垢，但页面上的其他表单应该是）。

我插入了一堆 console.log 语句来尝试调试它，但没有运气。想法？

```
 // Checks if any forms are dirty if leaving page or submitting another forms
  // Usage:
  // $(document).ready(function(){
  //    $("form.dirty").dirtyforms({
  //      excluded: $('#name, #number'),
  //      message: "please don't leave dirty forms around"
  //    });
  // });

  (function($) {

    ////// private variables //////

    var instances = [];

    ////// general private functions //////

    function _includes(obj, arr) {
        return (arr._indexOf(obj) != -1);
    }

    function _indexOf(obj) {
      if (!Array.prototype.indexOf) {
        Array.prototype.indexOf = function (obj, fromIndex) {
          if (fromIndex == null) {
            fromIndex = 0;
          } else if (fromIndex < 0) {
            fromIndex = Math.max(0, this.length + fromIndex);
          }
          for (var i = fromIndex, j = this.length; i < j; i++) {
            if (this[i] === obj)
            return i;
          }
          return -1;
        };
      }
    }

    ////// the meat of the matter //////

    // DirtyForm initialization
    var DirtyForm = function(form, options) {

      // unique name for testing purposes
      this.name = "instance_" + instances.length

      this.form = form;

      this.settings = $.extend({
        'excluded'  : [],
        'message'   : 'You will lose all unsaved changes.'
        }, options);

        // remember intial state of form
        this.memorize_current();

        // activate dirty tracking, but disable it if this form is submitted
        this.enable();
        $(this.form).on('submit', $.proxy(this.disable, this));

        // remember all trackable forms
        instances.push(this);
      }

      // DirtyForm methods
      DirtyForm.prototype = {

        memorize_current: function() {
          this.originalForm = this.serializeForm();
        },

        isDirty: function() {
          var currentForm = this.serializeForm();
          console.log("isDirty called...")
          return (currentForm != this.originalForm);
        },

        enable: function() {
          $(window).on('beforeunload', $.proxy(this.beforeUnloadListener, this));
          console.log("enable called on " + this.name)
        },

        disable: function(e) {
          $(window).off('beforeunload', $.proxy(this.beforeUnloadListener, this));
          console.log("disable called on " + this.name)
        },

        disableAll: function() {
          $.each(instances, function(index, instance) {
            $.proxy(instance.disable, instance)
          });
        },

        beforeUnloadListener: function(e) {
          console.log("beforeUnloadListener called on " + this.name)
          console.log("... and it is " + this.isDirty())
          if (this.isDirty()) {
            e.returnValue = this.settings.message;
            return this.settings.message;
          }
        },

        setExcludedFields: function(excluded) {
          this.settings.excluded = excluded;
          this.memorize_current();
          this.enable();
        },

        serializeForm: function() {
          var blacklist = this.settings.excludes
          var filtered = [];
          var form_elements = $(this.form).children();

          // if element is not in the excluded list
          // then let's add it to the list of filtered form elements
          if(blacklist) {
            $.each(form_elements, function(index, element) {
              if(!_includes(element, blacklist)) {
                filtered.push(element);
              }
            });
            return $(filtered).serialize(); 
          } else {
            return $(this.form).serialize();
          } 
        }
      };

      ////// the jquery plugin part //////

      $.fn.dirtyForms = function(options) {
        return this.each(function() {
          new DirtyForm(this, options);
        });
      };

    })(jQuery); 
```

[编辑]

我最终通过使用 jQuery 的 .on() 新命名空间功能来识别处理程序来解决这个问题。问题是我将新的匿名函数作为处理程序参数传递给 .off()。感谢@FelixKling 的解决方案！

```
 this.id = instances.length

    [...]

    enable: function () {
        $(window).on('beforeunload.' + this.id, $.proxy(this.beforeUnloadListener, this));
    },

    disable: function () {
        $(window).off('beforeunload.' + this.id);
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:36:05.950

每当您调用`$.proxy()`它时，它都会返回一个**新**函数。因此，

```
$(window).off('beforeunload', $.proxy(this.beforeUnloadListener, this)); 
```

不会有任何效果，因为您正在尝试取消绑定未绑定的函数。

您必须存储对使用 创建的函数的引用`$.proxy`，以便以后可以取消绑定：

```
enable: function() {
    this.beforeUnloadListener = $.proxy(DirtyForm.prototype.beforeUnloadListener, this);
    $(window).on('beforeunload', this.beforeUnloadListener);
    console.log("enable called on " + this.name)
},

disable: function(e) {
    $(window).off('beforeunload', this.beforeUnloadListener);
    console.log("disable called on " + this.name)
}, 
```

# sql-server - SQL：从另一个表中获取每一行的最后（最高）记录（GROUP BY？）

> ID：11652091
> 
> 赞同：1
> 
> 时间：2012-07-25T14:30:41.713
> 
> 标签：sql-server, select, join, group-by

以下是我的表的以下记录：（我目前使用的是 SQL Server 2008）

**年级**

```
YearLevelID     YearLevelName
1               Freshman       
2               Sophomore       
3               Junior       
4               Senior 
```

**学生**

```
StudentID     FirstName     LastName
1             John          Doe
2             Peter         Pan
3             Mark          Twain 
```

**达到的水平**

```
SSID     StudentID  YearLevelID
1        1          2
2        1          1
3        1          3
4        2          2
5        3          1
6        2          1 
```

输出应该是：

```
FullName     YearLevelName
John Doe     Junior
Peter Pan    Sophomore
Mark Twain   Freshman 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T14:35:11.467

```
SELECT FirstName + ' ' + LastName AS FullName, YearLevelName
FROM Students S
INNER JOIN (
    SELECT StudentID, MAX(YearLevelID) AS MaxLevel
    FROM LevelsAttained
    GROUP BY StudentID
) MaxLevels ON MaxLevels.StudentID = S.StudentID
INNER JOIN YearLevels Y ON Y.YearLevelID = MaxLevels.MaxLevel 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:56:07.450

```
select s.firstname + ' ' + s.lastname, y.yearlevelname from
students s
inner join (select max(yearlevelid) yearlevelid, studentid from levelsattained group by studentid) l on s.studentid = l.studentid
inner join YearLevels y on l.yearlevelid = y.yearlevelid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:37:25.690

试试这个：

```
SELECT FirstName || ' ' || LastName AS FullName, l.YearLevelName AS YearLevelName
FROM  Students s
JOIN (SELECT StudentID, MAX(YearLevelID) AS LevelID FROM LevelsAttained GROUP BY StudentID) g0
ON g0.StudentID = s.StudentID 
JOIN YearLevels ON g0.LevelID = l.YearLevelID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T14:43:40.520

您可以使用带有`ROW_NUMBER`窗口函数的公共表表达式：

```
WITH CTE AS(
   SELECT RN = 
       ROW_NUMBER()OVER(PARTITION BY la.StudentID ORDER BY la.YearLevelID DESC)
   ,   FirstName + ' ' + LastName AS FullName
   ,   YearLevelName
   FROM Students s 
   INNER JOIN LevelsAttained la ON s.StudentID = la.StudentID 
   INNER JOIN YearLevels yl ON la.YearLevelID = yl.YearLevelID
)
SELECT FullName, YearLevelName FROM CTE WHERE RN = 1 
```

# git - GIT在企业界的使用

> ID：11652093
> 
> 赞同：1
> 
> 时间：2012-07-25T14:30:45.603
> 
> 标签：git, corporate, corporate-policy

> **可能的重复：**
> [分布式版本控制系统和企业 - 一个好的组合？](https://stackoverflow.com/questions/5683253/distributed-version-control-systems-and-the-enterprise-a-good-mix)

大约六个月前，我遇到了 git。很好，花了我从 SVN 切换到 GIT 的时间。关于 git，您会很容易注意到的一件事是速度，如果您将它与 SVN 进行比较，它会快如闪电。现在非常适合开源世界，但它在企业世界中的用途呢？

尽管有所有优势，但在企业界，我看到了一个主要缺点。

Git 快照/工作区包含源代码和回购历史。我知道即使使用 SVN 也可以复制整个存储库，但是要查看其历史记录，您仍然需要连接到 SVN 集中式服务器。在 git 情况下，由于源存储库是快照的一部分，您可以查看历史记录/及时更改为任何状态。

企业行业如何使用 git 保护他们的源代码（安全性是指源历史和在 SVN 等修订之间切换），有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:47:10.267

实际上，我看不出背后的逻辑：**为什么保护遗留代码比保护你的实际工作更重要？**这是一个常见的错觉，即中央存储库使您可以更好地控制源代码。一旦第一个`checkout`完成，控制就结束了。

但：

*   您可以通过使用受保护的 VPN 进行网络连接来防止代码泄露到外部；
*   您可以通过让几组开发人员在单独的部分上工作而无需访问每个人的工作来保护它的组织性；
*   您可以通过让开发人员签署 NDA 和行为准则来合法地保护它；
*   您可以通过 IT 基础架构对其进行保护，从而使您难以将信息从办公室中带走。

Git 是一个不错的工具，它确实让开发人员的工作变得愉快。用它。

# jquery - JQuery 动画，未按预期工作

> ID：11652098
> 
> 赞同：1
> 
> 时间：2012-07-25T14:30:58.000
> 
> 标签：jquery, jquery-animate

这是我尝试过的两个示例，但都没有按预期工作。

[http://jsfiddle.net/AndyMP/atyWW/1/](http://jsfiddle.net/AndyMP/atyWW/1/)和[http://jsfiddle.net/AndyMP/atyWW/4/](http://jsfiddle.net/AndyMP/atyWW/4/)

我想要做的是淡出顶部块并动画/滑动下部块。在第一个示例中，它在顶部块被隐藏后跳转到位，在第二个示例中，它在容器 DIV 的底部留下一个空间（可能是因为我没有隐藏顶部 DIV）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:37:14.497

问题是你的 top 已经是 0 了，所以动画它没有做任何事情，它跳过的原因是因为你正在调用 hide。

您可以在顶部元素的不透明度更改为 0 后修改顶部元素的高度，如下所示。我还建议使用回调而不是延迟，除非你当然需要在第一个动画结束之前开始第二个动画，在这种情况下坚持延迟，但下面的代码应该给你一个例子，你应该从这里开始。

```
$(".disappear").click(function(){
    $(".top").fadeTo(250,0, function() {
        $(".top").animate({height:0},600);
    });
}); 
```

[jsFiddle附加](http://jsfiddle.net/atyWW/20/)

*或者，您可以为底部元素的 margin-top 设置动画，而不是隐藏顶部元素并为顶部元素的高度设置动画。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:40:13.477

试试看：

```
$(function(){ 
    $(".disappear").click(function(){
        $(".top").fadeOut(250,function(){
            $(".middle").animate({top:0}, 600);
        });

    });
}); 
```

用那个CSS：

```
.top {
    position: absolute;
    top: 0;
    left: 0;
    height: 40px;
    width: 400px;
    background: green;
}
.middle {
    position: absolute;
    left: 0;
    top: 40px;
    height: 200px;
    width: 400px;
    background: red;
} 
```

现场演示：http: [//jsfiddle.net/atyWW/19/](http://jsfiddle.net/atyWW/19/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:45:26.487

添加此代码以调整容器的高度 -`$(".container").animate({height:$(".middle").height()},600);`

[http://jsfiddle.net/atyWW/26/](http://jsfiddle.net/atyWW/26/)

**编辑：一些解释**-@Jon Taylor 的回答解释了到底发生了什么。我提供的代码设置了容器的高度，但是，顶部 DIV 仍然在中间 div 后面。请注意，如果您将溢出属性设置为自动而不是隐藏，并且如果顶部高于中间，则会出现滚动条（无论如何都可以使用 jQuery 删除）。检查这个[例子](http://jsfiddle.net/atyWW/27/)。

请注意最后一个示例中的代码 - 它用于`$top.height()`获取值而不是将其硬编码为 40px。您不必为 CSS 中的任何更改而不断更新它。

# php - 在 OpenCart 中禁用一页结帐

> ID：11652099
> 
> 赞同：2
> 
> 时间：2012-07-25T14:30:58.753
> 
> 标签：php, checkout, opencart

如何在 OpenCart 中禁用 OnePage Checkout？

1.5.x 版本在默认模板中附带它，我宁愿不使用它，因为我们希望有分步页面并且不为我们的客户使用 Ajax（速度/页面视图和流程更好地满足我们的需求）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:02:37.067

可以删除单页设置，但您必须在模板上做非常好的工作（结帐文件夹包含所有步骤）。您还需要个性化的控制器。内置结帐页面使用 jQuery 和 Ajax 将所有必要的信息收集在一个页面中，当客户单击“确认”时将所有信息一起发送。

一旦您不想使用 ajax，您将不得不使用 post 请求将信息从一个页面发送到下一个页面，然后将其放入 hidden`<input>`和/或`$_SESSION`变量中。无论如何，由于 OpenCart 是通过 ajax 检索的，因此国家和地点会出现一些问题。

实际上，前段时间我在 ThemeForest 和其他网站上找到了一些模板，它们实现了你想要的，但我不知道它们是否可用了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T15:49:18.713

我实际上建议您使用像[Uber Checkout](http://opencartguru.com/uber-checkout)这样的东西，虽然它仍然是一个简短的结帐过程，但在视觉上会更好，因为您没有 1.5.X 中的标准面板。如果您想完全重写它以像旧的结帐系统一样工作，理论上它已经存在，您只需要重写控制器以输出完整页面而不是 JSON 并通过每个步骤进行验证即可确保之前的步骤已完成

# php - 如何在 PHP 中调整图像资源的大小？

> ID：11652100
> 
> 赞同：0
> 
> 时间：2012-07-25T14:31:06.663
> 
> 标签：php

我有一个脚本可以创建一个高度取决于递归树深度的图像。预先计算图像的高度会很痛苦，因为我需要运行两次递归函数。因此，我想知道是否可以从我唯一的递归函数内部调整图像大小。长话短说，我需要调整图像资源的大小，可以吗？例如，我怎样才能使下面的代码工作？谢谢！

```
//Create the image
$image = imagecreatetruecolor(800, 100);

//Change the image height from 100 to 1000 pixels
imagecopyresized($image, $image, 0, 0, 0, 0, 800, 1000, 800, 100);

//Set the header
header('Content-Type: image/png');

//Output the image
imagepng($image);

//Destroy the image
imagedestroy($image); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:33:03.200

你的代码几乎是完美的，只是你没有给它提供源图像。您需要`$source = imagecreatefrompng("someimage.png");`，然后在您`imagecopyresize`的源图像参数中设置为`$source`.

# php - 来自 REST 客户端的 NetBeans 调试会话

> ID：11652101
> 
> 赞同：2
> 
> 时间：2012-07-25T14:31:11.517
> 
> 标签：php, api, debugging, rest, netbeans

我经常使用 NetBeans 调试器来单步调试我的 PHP 应用程序。但是，我也想在处理不能在 Web 浏览器中运行的东西（特别是 REST API）时使用调试器。

有人知道如何启动允许我将 REST 客户端用作“浏览器”的 NetBeans 调试器会话吗？

杂项。信息：Mac OS X、CocoaRestClient、NetBeans 7.1.2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T14:39:25.310

你需要几样东西：

*   在服务器配置中激活远程调试（php.ini 中的 xdebug.remote_enable = 1 然后重新启动服务器）
*   从 netbeans 生成 Xdebug IDE 密钥（我不知道如何使用 netbeans 执行此操作，但不难找到）
*   确保 Neatbeans 正在监听 DBGP 端口（通常为 9000）
*   在与您的客户一起发送的每个请求中添加一个请求参数：

名称：XDEBUG_SESSION_START

值：[您的 IDE 密钥]

对我来说，使用 PHPStorm 就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:45:18.880

为了帮助 PHPStorm 最近的 REST 客户端 - 这是适当设置的屏幕截图。如果尚未设置，请确保在设置中将 DBGP 侦听端口从 9001 更改为 9000。感谢你的回答！

[http://screencast.com/t/WsZzApBORssx](http://screencast.com/t/WsZzApBORssx)

# php - 格式化日期 (PHP)

> ID：11652105
> 
> 赞同：1
> 
> 时间：2012-07-25T14:31:35.540
> 
> 标签：php, mysql, date, format

我在使用 date() 函数格式化日期时遇到问题。我的代码是：

```
<?
        $vysledek=mysql_query("select * from akce order by datum limit 1");

        while ($zaznam=MySQL_Fetch_Array($vysledek))
            echo 
                "<b>".$zaznam["nadpis"]."</b>"."<br />\n".
                "<i>", 

                date("j.n.Y h:i", $zaznam["datum"]), 

                "</i>"."<br />\n"."<br />\n".
                $zaznam["text"]."<br />\n"."<br />\n"."<br />\n";
?> 
```

除了返回 1.1.1970 01:33 的日期外，从数据库加载的整个数据都正确显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:32:53.730

`$zaznam["datum"]`可能不是时间戳，它是第二个参数所`date()`期望的格式。用于[`strtotime()`](http://us2.php.net/manual/en/function.strtotime.php)执行此操作：

```
 date("j.n.Y h:i", strtotime($zaznam["datum"])) 
```

# c# - 为什么 c# 编译器仍然从未使用的方法中读取编译代码？

> ID：11652109
> 
> 赞同：1
> 
> 时间：2012-07-25T14:31:38.590
> 
> 标签：c#, compiler-construction

假设我有两种方法，一种调用另一种。第二种方法的代码会产生编译时错误。既然没有被调用，为什么编译器还要费心去处理呢？

```
void method1()
{
    var i = 1;
    //method2();
}

void method2()
{
    int i = "2";
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T14:33:20.610

您不能确定其他人不会在运行时使用反射调用该方法。你的代码必须编译，否则它不是有效的代码——如果它从未使用过......把它注释掉！

要对此进行扩展：

基本上在编译时你是强类型的 - .NET 将检查所有内容以确保你尝试做的事情是合法的，但是，由于空引用、错误类型转换等，你仍然可以在运行时抛出异常。

反射是 .NET 框架的一个组件，它允许开发人员通过程序集元数据检查程序集类型的属性/字段/方法等

反射允许发现和检查这些类型的运行时类型，它还允许调用方法/属性和修改字段等（您甚至可以在运行时创建新的泛型类型或完全新的类型）。

换句话说，你不能保证你**认为**不会被调用的代码，不会在某个时候在其他地方被调用。为了使反射成为可能，每一位代码都需要有效且可编译

该代码是否会在运行时成功是另一回事——但这就是我们进行异常处理的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:34:28.667

然后，如果其他人稍后使用您的编译代码并决定使用它怎么办？

即使使用私有方法，反射也会使事情复杂化。

如果你不使用它，就失去它。（或至少将其注释掉）

# ruby-on-rails - Can I reuse part of a controller action across all http verb/method actions in RoR?

> ID：11652112
> 
> 赞同：0
> 
> 时间：2012-07-25T14:31:46.817
> 
> 标签：ruby-on-rails, rest, httpverbs

Imagine a resource: `/users/14/notifications`. It implements several HTTP verbs/methods: GET, GET/edit, POST, DELETE.

All 4 actions share a small part of logic: retrieve all notifications, create some hash for easy access, fetch some specific user access from somewhere else to do something special etc. Just a few loc (let's say 7).

How can I reuse those 7 loc to keep the logic DRY? I've heard about Rails' ANY verb, but I have no idea how to use it. Also no idea how to use its result (a few vars) in the 4 actual actions.

I would expect something like:

```
def any
  @notifications = Notification.find_by etc...
  // do something here to create
  @reverse_notifications_hash = ...
  // and something else
  @super_special_access = ...
end

def show
  // Only specific logic here
  // Render using @notifications
end

def edit
  // Only specific logic here
  // Render form using @notifications,
  // @reverse_notifications_hash and
  // @super_special_access
end

def update 
  // Only specific logic here
  // Fetch something else special to not override stuff or be extra efficient
  more_special = ...
  // Do update stuff with @notifications, @super_special_access and more_special
end 
```

As you might have noticed, I'm not a pro Ruby/Railser. (The syntax might even be wrong.) I am very curious though.

How would it actually work in RoR?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:38:41.850

Try using a before filter to execute the common code. In your example you could add this line to your controller `before_filter :any`.

EDIT:

Also changed the visibility of `any` to private or protected so that it can't be exposed as controller action.

# c# - 将委托附加到 webBrowser html 元素

> ID：11652115
> 
> 赞同：1
> 
> 时间：2012-07-25T14:31:55.883
> 
> 标签：c#, winforms, user-controls, lambda

我正在开发一个 Windows 窗体 UserControl，以使用 webBrowser 控件呈现一些 HTML 并与之交互。部分内容是一些单选按钮，我需要从我的控件中捕获点击事件。因此，在 webBrowser 的 DocumentCompleted 事件中，我将 onClick 事件附加到单选按钮。在我单击其中一个单选按钮之前，所有这些似乎都有效，似乎只有最后一个单选按钮实际上附加了事件，即使我已经单步执行了代码并且每个单选按钮都附加了委托。

这是我用来将委托附加到 HtmlElement 的 lambda。

```
void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
     foreach (HtmlElement el in webBrowser1.Document.GetElementsByTagName("input"))
     {
         el.AttachEventHandler("onclick", (sender1, e1) => clickEventHandler(el, EventArgs.Empty));
     }
}

public void clickEventHandler(object sender, EventArgs e)
{
    Guid answerId;
    var he = (HtmlElement)sender;
    if (Guid.TryParse(he.Id, out answerId))
        if (AnswerSelected != null)
            AnswerSelected(answerId);
 } 
```

AnswerSelected 的委托和事件

```
public delegate void HtmlControlAnswerEventHandler(Guid answerId);
public event HtmlControlAnswerEventHandler AnswerSelected; 
```

输入按钮字符串。

```
<input type=radio id="{0}" name="answer" value="{1}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:24:04.290

似乎当使用像这样的 lambdas 时，用于引用对象的变量丢失了。如果我以这种方式附加事件

```
void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
     foreach (HtmlElement el in webBrowser1.Document.GetElementsByTagName("input"))
     {
         el.AttachEventHandler("onclick", (sender1, e1) => clickEventHandler(el, EventArgs.Empty));
     }
} 
```

那么只有最后一个附加的事件是有效的。

当我以这种方式附加事件时

```
private void AttachClickEventToInputs()
{
      var htmlElements = webBrowser1.Document.GetElementsByTagName("input");
      for (int i = 0; i < htmlElements.Count; i++)
      {
          htmlElements[i].AttachEventHandler("onclick", (sender1, e1) => clickEventHandler(htmlElements[i], EventArgs.Empty));
      }
 } 
```

inder i 变得大于元素数量存在问题（这让我很难过。）

但是，如果我以这种方式附加事件

```
private void AttachClickEventToInputs()
{
     var htmlElements = webBrowser1.Document.GetElementsByTagName("input");
     for (int i = 0; i < htmlElements.Count; i++)
     {
          HtmlElement el = htmlElements[i];
          el.AttachEventHandler("onclick", (sender1, e1) => clickEventHandler(el, EventArgs.Empty));
     }
} 
```

然后一切都按预期工作。我不完全确定为什么会这样，否则在附加委托时我们可能需要对对象的硬引用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-14T18:45:27.777

`el`变量范围的问题。在评估委托时，循环已完成并`el`保存最后一个列表项的值。您可以通过分配`el`给循环内的变量来解决此问题。

```
void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
     foreach (HtmlElement _el in webBrowser1.Document.GetElementsByTagName("input"))
     {
         HtmlElement el = _el;
         el.AttachEventHandler("onclick", (sender1, e1) => clickEventHandler(el, EventArgs.Empty));
     }
} 
```

# php - 在不使用 foreach 的情况下从查询中获取一个值

> ID：11652116
> 
> 赞同：0
> 
> 时间：2012-07-25T14:31:56.163
> 
> 标签：php, pdo

我需要对数据库表执行多个查询，基本上我的 PHP 脚本必须：

1.  在表中插入一个新用户，存储他的 ID、姓名、电子邮件；
2.  使用他的电子邮件获取新创建用户的 ID；
3.  将 id 与键和时间戳相关联。

我对 PDO 很陌生，我的问题是我无法找到一种`id`不使用 a的聪明方法来获得它`foreach`，所以基本上我的代码是：

```
$query = "INSERT INTO users(name, surname, email) VALUES('" . $name . "', '" . $surname . "', '" . $email . "')";
$this->dbconn->query($query);

$query = "SELECT id FROM users WHERE email='" . $email . "'";
$data = $this->dbconn->query($query);
$id = $data['id']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:33:49.597

```
$query = "INSERT INTO users(name, surname, email) VALUES('" . $name . "', '" . $surname . "', '" . $email . "')";
$this->dbconn->query($query);
$id = $this->dbconn->lastInsertId(); 
```

# sharepoint - Sharepoint 2010 ClientContext 与 kerberos 和未经授权的 401

> ID：11652118
> 
> 赞同：0
> 
> 时间：2012-07-25T14:32:01.453
> 
> 标签：sharepoint, kerberos

我可以让远程控制台应用程序使用 ClientContext 与 NTLM Sharepoint 站点对话，并且我可以使用 HttpWebRequest.GetResponse(); 与远程 Kerberos Sharepoint 框对话；

但我无法让它与带有 CientContext 的 Kerberos Sharepoint 框交谈。任何额外的指针将不胜感激。

```
string siteURL = "http://my.remote.sharepoint";             
ClientContext ctx = new ClientContext(siteURL);           
CredentialCache cc = new CredentialCache();           
cc.Add(new Uri(siteURL), "Kerberos", CredentialCache.DefaultNetworkCredentials);            
ctx.AuthenticationMode = ClientAuthenticationMode.Default;         
ctx.Credentials =cc;

/////////////////////////////////////////////////////////////////////////////////
// This code confirms that I can access "my.remote.sharepoint" with KRB
//       HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create(siteURL);
//       myHttpWebRequest.Credentials = cc;
//       myHttpWebRequest.UseDefaultCredentials = true;              
//       HttpWebResponse myResponse = (HttpWebResponse)myRequest.GetResponse();
/////////////////////////////////////////////////////////////////////////////////
Web remoteWeb = ctx.Web;
ctx.Load(remoteWeb);
ctx.ExecuteQuery();

//401 unauthorised returned from here 
```

Wireshark 建议它返回最初的 401 然后放弃！有任何想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:32:30.277

请检查是否`SPN`为该主机注册了 a 并且是否存在反向 DNS 条目。

# actionscript-3 - 如何减少flex 3中平铺列表的水平滚动条的厚度

> ID：11652121
> 
> 赞同：0
> 
> 时间：2012-07-25T14:32:05.270
> 
> 标签：actionscript-3, apache-flex, flex3

我有一个水平磁贴列表，我想自定义这个磁贴列表的水平滚动条的样式。我想减少滚动条的厚度，使它看起来像一条粗线或其他东西。即使我不想要滚动条两侧的箭头。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:35:37.883

在 flex 3 中，可以在 CSS 中对滚动条进行蒙皮：

```
mx|ScrollBar 
{
    up-arrow-skin: ClassReference(null); //removes up arrow
    down-arrow-skin: ClassReference(null); // removes down arrow
    trackSkin: Embed(source="assets/ScrollBarTrack.png", scaleGridLeft="1", scaleGridTop="4", scaleGridRight="5", scaleGridBottom="16");
    thumbUpSkin: Embed(source="assets/ScrollBarThumb_up.png", scaleGridLeft="1", scaleGridTop="4", scaleGridRight="5", scaleGridBottom="16");
    thumbOverSkin: Embed(source="assets/ScrollBarThumb_over.png", scaleGridLeft="1", scaleGridTop="4", scaleGridRight="5", scaleGridBottom="16");
    thumbDownSkin: Embed(source="assets/ScrollBarThumb_down.png", scaleGridLeft="1", scaleGridTop="4", scaleGridRight="5", scaleGridBottom="16");
} 
```

在 flex 4 中，您需要编写自定义皮肤。

# java - 用于将在线数据导入 Android 设备上的 SQLite 数据库的推荐文件/文件类型

> ID：11652122
> 
> 赞同：1
> 
> 时间：2012-07-25T14:32:12.937
> 
> 标签：java, android, import

我使用 PHP 访问我的数据库并在线生成 XML 文件。然后，我的 android 应用程序获取该 XML 文件，对其进行解析，并将数据插入 SQLite 数据库。

这工作得很好，但速度非常慢。我们有一个 iOS 应用程序和一个 Android 应用程序都在做同样的事情......每次用户想要刷新数据时，android 应用程序需要 7-10 秒，而 iOS 应用程序最多只需要 2-3 秒。

记录不多——平均30-50条。有很多内容 - 一些大文章，每篇都有 2-10 张照片（我没有下载照片 - 只是导入它们的 url，大小......等）

我遵循了一个关于如何使用 Sax 导入我的 XML 的示例（据说是最快的方法）。

**TLDR：**
有没有更好的方法可以格式化我的数据，使其比我现在做的更快？CSV？使用 PHP 生成 SQLite 插入语句？什么是“规范”和/或“最佳”？

* * *

**编辑：** 我读的越多，听起来 JSON 和 XML 之间的区别就越小，如果它是大数据（如文章）而不是 JSON，使用 XML 甚至可以更快。不确定这是否正确，只是进一步阅读的细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:48:05.360

不要使用**XML**或**JSON**，而是查看 Google 的**Protobuf**：

[https://developers.google.com/protocol-buffers/docs/overview](https://developers.google.com/protocol-buffers/docs/overview)

[http://code.google.com/p/protobuf/](http://code.google.com/p/protobuf/)

由于您使用的是 PHP，因此您需要找到适合您的实现，这里有一个列表：

[http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)

展望未来，这将是一种非常好的传输和编组数据的方式。请让我们知道这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:48:31.197

我曾经创建一个 SQLite db 文件并 gzip 它，然后在设备上解压缩并直接使用它。（肯定不是一个好方法）

对于以后的数据更新，我使用 json 来传输数据。JSON 确实可以处理大型文章，但如果您愿意，您可以将文章的 URL 放在 JSON 中，然后在后续传输中获取它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:36:43.987

您应该尝试使用`JSON`而不是`XML`我认为使用它可能会更快。它在 Android 上受支持，据我所知 iOS 也可以处理它。

# java - JaxB 解组自定义 xml

> ID：11652127
> 
> 赞同：1
> 
> 时间：2012-07-25T14:32:25.650
> 
> 标签：java, jaxb, resteasy, unmarshalling

我目前正在尝试将一些现有的 XML 解组为我手动创建的几个类。问题是，我总是收到一个错误，告诉我，JaxB 需要一个天气元素，但找到了一个天气元素。（？）

> javax.xml.bind.UnmarshalException：意外元素（uri：“http://www.aws.com/aws”，本地：“天气”）。预期元素是 <{}api>、<{}location>、<{}weather>

我尝试在元素名称中使用和不使用“aws:”。

这是我的天气课：

```
@XmlRootElement(name = "aws:weather")
public class WeatherBugWeather
{
    private WeatherBugApi api;
    private List<WeatherBugLocation> locations;
    private String uri;

    @XmlElement(name="aws:api")
    public WeatherBugApi getApi()
    {
        return this.api;
    }

    @XmlElementWrapper(name = "aws:locations")
    @XmlElement(name = "aws:location")
    public List<WeatherBugLocation> getLocations()
    {
        return this.locations;
    }

    public void setApi(WeatherBugApi api)
    {
        this.api = api;
    }

    public void setLocations(List<WeatherBugLocation> locations)
    {
        this.locations = locations;
    }

    @XmlAttribute(name="xmlns:aws")
    public String getUri()
    {
        return this.uri;
    }

    public void setUri(String uri)
    {
        this.uri = uri;
    }
} 
```

这就是我尝试解析的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<aws:weather xmlns:aws="http://www.aws.com/aws">
    <aws:api version="2.0" />
    <aws:locations>
        <aws:location cityname="Jena" statename="" countryname="Germany" zipcode="" citycode="59047" citytype="1" />
    </aws:locations>
</aws:weather> 
```

我不太确定我做错了什么。有什么提示吗？我怀疑问题出在 xmlns 定义上，但我不知道该怎么做。（您可以通过查看 uri 属性看到这一点。这是一个不成功的想法。^^）是的，我确实尝试设置命名空间，但设置的是命名空间的 uri 而不是它的...名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:13:05.990

我建议`package-info`在您的域模型中添加一个带有`@XmlSchema`注释的类以指定命名空间限定：

**包信息**

```
@XmlSchema(
    namespace = "http://www.aws.com/aws",
    elementFormDefault = XmlNsForm.QUALIFIED)
package com.example.foo;

import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

**笔记**

您的`XmlRootElement`and`@XmlElement`注释不应包含命名空间前缀。你应该有`@XmlRootElement(name = "weather")`而不是`@XmlRootElement(name = "aws:weather")`

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:38:10.580

您的代码中需要命名空间。命名空间前缀没有意义，您需要*实际*的命名空间（即“http://www.aws.com/aws”）。

```
@XmlRootElement(name = "weather", namespace="http://www.aws.com/aws") 
```

# c++ - 在没有调试符号的情况下，如何确定从外部库抛出的异常？

> ID：11652128
> 
> 赞同：2
> 
> 时间：2012-07-25T14:32:26.087
> 
> 标签：c++, gdb, try-catch

我在使用类似于以下代码的 C++ 代码时遇到了一些问题：

```
try {

        /* some code here */

} catch(...) {

        /* ... */
} 
```

我正在使用 gdb 单步执行包含在 try 块中的代码，并且在某些时候会抛出一些东西。我真的不知道它是什么，因为抛出的函数调用来自库并且没有与之关联的调试符号。

gdb 有没有办法确定在 catch 块中捕获了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:49:57.683

您可以尝试`call current_exception()`，如果您的平台支持，它将`exception_ptr`为当前异常返回一个。然而，它并没有具体说明 exception_ptr 中包含的内容，但您可以检查它`x`以查看是否可以解决问题。

某些寄存器也可能包含当前的异常数据，但您没有指定您正在使用的架构。

# filesystems - 在 NTFS 中读取 MFT

> ID：11652135
> 
> 赞同：3
> 
> 时间：2012-07-25T14:32:52.263
> 
> 标签：filesystems, ntfs, ntfs-mft

在网上徘徊寻找如何读/写 MFT 的解释时，我发现了以下部分：( [http://www.installsetupconfig.com/win32programming/1996%20AppE_apnilife.pdf](http://www.installsetupconfig.com/win32programming/1996%20AppE_apnilife.pdf) )

> 如果 NtfsProtectSystemFiles 设置为 FALSE，则可以打开特殊文件。然而，尝试这样做有一些缺点：因为许多特殊文件在挂载卷时以特殊方式打开，它们不准备处理调用 ZwReadFile 产生的 IRP_MJ_READ 请求，并且系统如果收到这样的请求就会崩溃。这些特殊文件可以通过用 ZwCreateSection 和 ZwMapViewOfSection 映射特殊文件，然后读取映射的数据来读取。另一个问题是一些特殊文件没有准备好处理在关闭文件对象的最后一个句柄时生成的 IRP_MJ_CLEANUP 请求，如果收到这样的请求，系统就会崩溃。

1.  “他们没有准备好处理 IRP_MJ_READ 请求”是什么意思，需要什么样的准备？什么是 IRP_MJ_READ？
2.  “用 ZwCreateSection 和 ZwMapViewOfSection 映射特殊文件，然后读取映射的数据” 那如何解决问题？
3.  这是什么意思“文件没有准备好处理在文件对象的最后一个句柄关闭时生成的 IRP_MJ_CLEANUP 请求”又是什么准备？什么是 IRP_MJ_CLEANUP？
4.  “将特殊文件的打开句柄复制到一个永不终止的进程中”这是如何解决问题的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:24:18.683

那是旧数据（从 1996 年开始）。而且有点不正确。从那时起，世界一直在前进。

您可以尝试打开 \$MFT 来读取 MFT，但获取正确的访问位可能会有问题。你也可以写它们，但这真的是在玩火。文件系统不希望在没有它参与的情况下修改它的数据结构。

最好打开原始分区并直接遍历磁盘结构。

# c# - public {get; 之间的区别 set} 和编程 getter 和 setter

> ID：11652138
> 
> 赞同：4
> 
> 时间：2012-07-25T14:32:56.950
> 
> 标签：c#, encapsulation

> **可能重复：**
> [C# 中的属性和变量有什​​么区别](https://stackoverflow.com/questions/4142867/what-is-difference-between-property-and-variable-in-c-sharp)

几周前我开始使用 C#，这确实困扰着我。C# 允许这些所谓的“神奇”getter 和 setter，也称为“语法糖”。所以，我可以做这样的事情：

`public int myInt { get; set; }`

但从封装的角度来看，这是没有意义的。一方面，数据成员是**public**，我可以使用点运算符获取/设置它。但是，如果我这样做：

`private int myInt { get; set; }`

我根本无法访问它，因为`myInt is inaccessible due to protection level`. 这*实际上*在做什么？我认为这应该是完成数据封装的一种简单方法，所以我不必这样做：

```
private int myInt;
public void setMyInt(int i) { myInt = i; }
public int getMyInt() { return myInt; } 
```

但事实并非如此。据我所知，我只是将这些变量公开。我想也许我可以做类似的事情

`public int myInt { get; }`

所以客户可以`get`，但不能`set`，但不，仍然允许公共访问。那么给了什么？

**编辑** 我不想做任何具体的事情，我只是想了解这实际上是如何工作的。澄清：

制作变量`public`不会完成封装，尤其是当我可以使用点运算符访问它时。为变量编写 getter 和 setter`private`可以让您对变量进行更改，但可以更好地控制实际发生的方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T14:36:36.880

目的是您通过将来的修改来维护封装。

如果您最初使用自动 getter 和 setter 编写类：

```
public int Count { get; set; } 
```

然后，如果您将其更改为，它将保持完全相同的外部接口

```
public int Count {
    get { /* very complicated logic */ }
    set { /* even more complicated logic */ }
} 
```

自动的最初只是为了帮助您处理简单的属性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T14:34:18.900

你正在尝试写

```
public int MyInt { get; private set; } 
```

**编辑**：自动实现属性的重点不是提供额外的封装，而是避免字段。
如果您创建一个具有公共字段 ( `publit int MyInt;`) 的类，并且有人使用该字段，则以后不能将其更改为属性，否则您将破坏任何使用它的已编译程序集。

使用自动属性为您提供与字段相同的简单性和简洁性，但允许您稍后用成熟的属性（包含附加逻辑）替换它而不会破坏任何内容。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-25T14:35:33.650

这种“神奇”的 getter 和 setter 就像您在 Java 中所做的那样，实际上最终会创建方法。因此`is`，IMO 以更简洁的外观保持了这一点。

属性本身，即使声明`public int Property {get;set;}`为例如，实际上也有一个支持字段和`getter`一个`setter`方法。

看这个人为的例子：

```
class A
{
   public int ID {get;set;}
} 
```

现在，当您执行以下操作时：

```
A a = new A();
a.ID=5; 
```

生成的 IL 代码如下所示：

```
A.get_ID:    //getter method
IL_0000:  ldarg.0     
IL_0001:  ldfld       UserQuery+A.<ID>k__BackingField 
IL_0006:  ret         

A.set_ID:   //setter method
IL_0000:  ldarg.0     
IL_0001:  ldarg.1     
IL_0002:  stfld       UserQuery+A.<ID>k__BackingField
IL_0007:  ret 
```

所以是的，做`a.ID=5`; *看起来*它是直接访问一个成员变量，但它实际上是在调用一个方法；在这种情况下，`set_ID`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:35:05.230

您只是将其公开 - 如果您想指定私有集，您可以执行以下操作：

```
 int myInt { get; private set; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T14:35:48.970

你可以这样做，这非常有用：

公共 int myInt { 获取；私人套装；}

# android - 标签栏未显示在活动中

> ID：11652139
> 
> 赞同：0
> 
> 时间：2012-07-25T14:33:01.723
> 
> 标签：android, android-tabhost

我有一个标签栏，我想添加到多个活动中。我有一个`TabController.java`看起来像这样的

```
import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class TabController extends TabActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabcontroller);

    TabHost tabHost = getTabHost();           
    Intent intent;  

    intent = new Intent().setClass(this, Help.class);  
    TabSpec specHelp = tabHost.newTabSpec("Help").setIndicator("Help")  
                  .setContent(intent);  

    intent = new Intent().setClass(this, Services.class);  
    TabSpec specServices = tabHost.newTabSpec("Services").setIndicator("Services")  
                  .setContent(intent);  

    intent = new Intent().setClass(this, Inbox.class);  
    TabSpec specInbox = tabHost.newTabSpec("Inbox").setIndicator("Inbox")  
                  .setContent(intent);  

    intent = new Intent().setClass(this, About.class);  
    TabSpec specAbout = tabHost.newTabSpec("About").setIndicator("About")  
                  .setContent(intent);  

    intent = new Intent().setClass(this, More.class);  
    TabSpec specMore = tabHost.newTabSpec("More").setIndicator("More")  
                  .setContent(intent);  

    tabHost.addTab(specHelp); 
    tabHost.addTab(specServices); 
    tabHost.addTab(specInbox);
    tabHost.addTab(specAbout);        
    tabHost.addTab(specMore);
} 
```

和一个`tabcontroller.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<TabHost android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:id="@android:id/tabhost" >

   <RelativeLayout
       android:layout_width="fill_parent"
       android:layout_height="fill_parent">

       <TabWidget android:id="@android:id/tabs"
           android:layout_width="fill_parent"
           android:layout_alignParentBottom = "true" 
           android:layout_height="wrap_content" />

       <FrameLayout android:id="@android:id/tabcontent"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent">
       </FrameLayout>

   </RelativeLayout>

   </TabHost>
</merge> 
```

我想要做的是将该布局添加到多个活动中。当我尝试添加我使用的布局时`<include layout="@layout/tabcontroller"/>`。当我运行项目时，我的标签栏不会出现在屏幕上。

如何将此标签栏添加到我的活动中？PS。`TabController.java`不是我的主要活动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:24:46.983

尝试查看本教程： http: [//www.codeproject.com/Articles/107693/Tabbed-Applications-in-Android](http://www.codeproject.com/Articles/107693/Tabbed-Applications-in-Android)

我知道的一件事，也许我错了，是 Root Activity 类必须继承 TAbActivity 而对你来说，你的 TabController.java 不是主要活动。

编辑：这就是我获取不是我的根活动的选项卡的方式：

公共类 ListFragment 扩展 Fragment 实现 OnTabChangeListener{

```
View v;
TabHost tabHost;    

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

     v =  inflater.inflate(R.layout.main_menu_libraries, container, false);

     tabHost=(TabHost) v.findViewById(R.id.tabHost);
     tabHost.setup();

     TabSpec spec1=tabHost.newTabSpec("Tab 1");
     spec1.setContent(R.id.tab1);
     spec1.setIndicator("About",getResources().getDrawable(R.drawable.android));

     TabSpec spec2=tabHost.newTabSpec("Tab 2");
     spec2.setContent(R.id.tab2);
     spec2.setIndicator("Blog",getResources().getDrawable(R.drawable.android));

     TabSpec spec3=tabHost.newTabSpec("Tab 3");
     spec3.setIndicator("Donate",getResources().getDrawable(R.drawable.android));
     spec3.setContent(R.id.tab3);

     TabSpec spec4=tabHost.newTabSpec("Tab 4");
     spec4.setIndicator("Explore",getResources().getDrawable(R.drawable.android));
     spec4.setContent(R.id.tab4);

     tabHost.addTab(spec1);
     tabHost.addTab(spec2);
     tabHost.addTab(spec3);
     tabHost.addTab(spec4);

     return v;
} 
```

在上面的代码中，我正在使用片段。所以我用包含选项卡和选项卡小部件的 menu_libraries.xml 来扩充我的视图。在 OncreateView 函数中，我也在定义和扩展选项卡。不是最好的答案，但我想你可以试试。

# ajax - AJAX jQuery 表单提交与表单中的 HTML

> ID：11652142
> 
> 赞同：0
> 
> 时间：2012-07-25T14:33:09.517
> 
> 标签：ajax, jquery-forms-plugin

我对 AJAX 的经验并不丰富，因此我正在使用一些工具并尝试集成和自定义它们。首先，这是一个使用 AJAX 表单提交帖子的 wordpress 网站。这一切都很好！现在，当然，我必须添加一个所见即所得的编辑器，并且需要弄清楚如何让 html 内容正确提交。

这是提交代码：

```
jQuery("form.pfs").submit(function() {
  // vvv I ADDED THIS LINE!!! vvv
  jQuery('textarea#postcontent').val(jQuery('div.workzone iframe').contents().find('body').html());
  jQuery(this).ajaxSubmit({
    type: "POST",
    url: jQuery(this).attr('action'),
    dataType:'json',
    beforeSend: function() {
      jQuery('.pfs-post-form #post').val('posting...');
    },
    complete: function(request,textStatus,error) {
      data = jQuery.parseJSON(request.responseText);
      if (data && data.error) {
        jQuery('#pfs-alert').addClass('error').html('<p>'+data.error+'</p>').show();
        jQuery('.pfs-post-form #post').val('Post');
      } else {
        jQuery('form.pfs').reset();
        location.reload();
      }
    }
  });
  return false;
}); 
```

如您所见，我添加了第一行，我在 WYSIWYG (http://elrte.org/) 中获取 HTML 的内容并将其设置为原始文本区域 (#postcontent ）。

如果出现错误，AJAX 可以完美运行，因此只有例程的“else”部分会引发错误：

```
Uncaught SyntaxError: Unexpected token < jquery.js:2
e.extend.parseJSON jquery.js:2
jQuery.submit.jQuery.ajaxSubmit.complete pfs-script.js:31
F 
```

如您所见，我需要验证恶意代码（不是此帮助请求的一部分！！）但更重要的是，我只想能够在我的表单帖子中接受 HTML。想法？我不是 100% 确定我明白什么是失败的以及在哪里......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:46:58.240

原来与另一个插件有冲突。追踪 request.responseText 揭示了它。这段代码工作得很好。

# matlab - ginput 到合适的

> ID：11652146
> 
> 赞同：0
> 
> 时间：2012-07-25T14:33:19.813
> 
> 标签：matlab, user-interface, matlab-guide, matlab-uitable

这似乎是一个相对简单的问题。我想让我的 ginput 函数中的数据打印到我的 GUI 中的一个 uitable（或文本框，更简单的）。我似乎无法弄清楚这一点。ginput 是用一个按钮激活的，所以我猜我需要以某种方式将数据设置到 uitable 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:01:36.777

好的，我解决了我的问题

```
set(handles.uitable, 'Data', ginputData) 
```

新手错误...

# linux - 会话变量被破坏

> ID：11652156
> 
> 赞同：0
> 
> 时间：2012-07-25T14:33:37.437
> 
> 标签：linux, session, session-variables, sessionid

我的登录会话有问题。基本上流程是这样的：

*   用户创建帐户并定义用户名；
*   用户使用 url 'http://[username].website.com' 登录
*   （用 php & mysql 编码，使用会话 cookie）

我的问题是：尝试从索引页面“www.website.com”直接登录时，我无法让我的用户登录到他的 URL [http://username.website.com](http://username.website.com)

假设我打开了网址“www.example.com”并在此网址中创建了一个会话变量。现在我想访问 url“test.example.com”中的会话变量。怎么做？欢迎任何解决方案

注意：在每个 php 文件的顶部，我使用了以下代码，但我的会话变量被破坏了，我无法在另一个页面中访问会话变量。我还在“php.ini”文件上设置了 session.cookie_domain =“.website.com”。

```
ini_set('session.cookie_domain', '.website.com');

session_name("sessionid"); session_start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:37:54.237

尝试将 session_start() 放在开头？删除所有其他行，看看会发生什么。没有看到实际代码就很难诊断。

# android - m3u8 格式未在 google tv android 3.1 上流式传输

> ID：11652161
> 
> 赞同：1
> 
> 时间：2012-07-25T14:34:02.683
> 
> 标签：android

我试图在谷歌电视设备 android 版本 3.1 中播放 m3u8。是否可以在不使用第三方工具的情况下在 google tv 中播放 m3u8？

提前致谢

# intellij-idea - 如何在 IntelliJ IDEA 中将简单文件夹转换为 Web 文件夹？

> ID：11652162
> 
> 赞同：3
> 
> 时间：2012-07-25T14:34:02.233
> 
> 标签：intellij-idea

如何在 IntelliJ IDEA 项目中创建 Web 文件夹？

![在此处输入图像描述](../Images/542584d88caf76c09f0c788483017538.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T15:24:28.257

前往菜单

> 文件 -> 项目结构 -> 模块 -> 选择您的 Web 构面 -> 加号按钮

在这里你可以选择你的文件夹并设置你的网络应用程序中应该是文件夹内容的相对 url。

![在此处输入图像描述](../Images/971b9599c342becac23e3ae7b4094876.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:21:10.743

您需要在[模块 Web facet settings](http://www.jetbrains.com/idea/webhelp/web-resource-directory-path-dialog.html)中配置一个 Web 资源目录。

# html - 如何在不跳行的情况下编写我的 erb 文件

> ID：11652163
> 
> 赞同：0
> 
> 时间：2012-07-25T14:34:04.027
> 
> 标签：html, ruby-on-rails, ruby, erb

我有 t 函数女巫返回一些文本。

所以在我的 erb 文件上我有这样的东西：

```
<%= t 'content1' %> 
<%= t 'content2' %> 
```

html输出是这样的：

```
"text of the content 1"
"text of the content 2" 
```

我想输出类似的东西：

```
"text of the content 1" "text of the content 2" 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:50:53.723

ERB 在结束标记中有一个选项是否在其后有换行符。只需添加一个破折号：

```
<%= t 'content1' -%> 
<%= t 'content2' %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:00:11.123

与其他模板语言相比，Erb 有点被高估了。但是，好处是它允许您控制输出。正如@DMG 指出的那样，在您的标签中添加一个“-”，但我还想说明另一点。

```
<%- method(...) -%> 
```

不会在输出中显示任何行。虽然这将创建一个空行：

```
<% method(...) -%> 
```

如果您为脚本、单元测试、rake 任务或 Rails/ActionView 之外的任何其他内容编写模板，请记住一些事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:42:38.843

做就是了：

```
<%= "#{t('content1')}#{t('content2')}" %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:44:37.390

```
<%= "#{t('content1')} #{t('content2')}" %> 
```

# extjs - 单击网格中的一行加载一个窗口

> ID：11652171
> 
> 赞同：0
> 
> 时间：2012-07-25T14:34:40.447
> 
> 标签：extjs

嗨，我有一个带有值的网格，当我单击网格中的行时，我需要打开一个包含该行中所有值的窗口。我已经完成了加载网格并在网格中填充值。过去两周我在 ext js 工作，谁能告诉我如何进一步进行

我的代码：

```
function loadcolleaguesVal(jsonContent){
    var localJson = Ext.util.JSON.decode(jsonContent);

   colleagueGridJS=Ext.util.JSON.decode(localJson.ColleagueInfo);
   colleagueGridDataJS=Ext.util.JSON.decode(localJson.colData);

   var caseReGridData= new Ext.data.JsonStore({ 
        autoLoad :true,
        fields: ["NAME", 
                 "TOTAL_CASES_ALLOWED", 
                 "TOTAL_OPEN_CASES", 
                 "CLIENT_TEAM_CASES_ALLOWED",
                 "CLIENT_TEAM_TOTAL_CASES",
                 "PAY_AUTH_MAX",
                 "DAYS_MAX",
                 "LUMP_SUM_MAX",
                 "DENIAL_ADMIN",
                 "DENIAL_CLINICAL"],
        storeId :'ColleagueInfo',
        data : colleagueGridDataJS,
        root : 'data',
        listeners : {
        load : colleagueGridListerner
        }

  });
}

  function colleagueGridListerner(){
  nucleus.tools.master(colleagueGridJS,"NonEditableGrid","colleagueGrid",caseReGridData,"twoFields");
  panelForPage.addButton({
        text:'Add new colleague',
        type:'Submit',
        name:'btnGo',
        handler:function()
        {
            showColleagueSetup();
        }
});
  Ext.getCmp('colleagueCenter').add(panelForPage);
  Ext.getCmp('colleagueGrid_Grid').setHeight(145);
  Ext.getCmp('colleagueGrid_Grid').doLayout();
  tabPanel.doLayout(); 
  Ext.getCmp("colleagueGrid_Grid").collapse();
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:33:20.663

我在您的代码中看不到网格，但您可以将选择模型添加到网格中：

```
var grid = new Ext.grid.GridPanel({
  .
  .
  .
  sm:new Ext.grid.RowSelectionModel({singleSelect:true}),
  .
  .
}); 
```

并添加事件：

```
grid.getSelectionModel().on('rowselect', function (selModel, rowIndex, record ) {
  //Your row selected data is:
  var data = record.data;

  //Open window code
  ...
}); 
```

# c++ - C++ 风格的转换运算符是否会更改它转换的指针？

> ID：11652172
> 
> 赞同：15
> 
> 时间：2012-07-25T14:34:45.313
> 
> 标签：c++, inheritance, pointers, casting, type-conversion

我很高兴在我的代码中使用 C++ 风格的转换运算符，但我不能说我**真正**了解幕后发生的事情。我基本上想知道在以下简短过程中指针实际发生了什么：

```
class A {};
class B : public A {};
class C : public B {};

A* pC = new C();

B* b = static_cast<B*>(pC);    // Is the value of pC changed by the cast?
C* c = static_cast<B*>(pC);    // Is the value of pC changed by the cast?
B* b2 = static_cast<B*>(c)     // Is the value of c now equal to the value of b2? 
```

我意识到 指向的对象`pC`始终是类型`C`，但是在进行第一次强制转换后，我假设存储在其中的地址`b`不再等于`pC`. 但是如果演员表改变了`pC`我的假设的价值是错误的。简而言之，强制转换操作符真的可以改变他们强制转换的指针的地址吗？这似乎是一个非常简单的问题，但在我看来，图片只是不清楚具有继承层次结构的对象如何存储在内存中，以及指针如何通过强制转换进行操作。

在我的脑海中，`pC`无论对其进行多少次强制转换，它的值都保持不变，但这种想法是否正确？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-25T14:37:23.347

转换后的指针可以指向另一个位置。例如，在多重继承的情况下。[好读](http://hacksoflife.blogspot.com/2007/02/c-objects-part-3-multiple-inheritance.html)

原始指针将被保留

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T14:36:43.020

在任何情况下，强制转换都不会改变它的操作数。它所做的只是改变编译器如何*看待*操作数。

的值`pC`不会改变；强制转换的*结果*可能是相同的值但类型不同（例如，在 a`const_cast`或 a的情况下`reinterpret_cast`），或者它实际上可能既是不同的类型*又*是不同的值（例如，`static_cast`在 a 的情况下，在多重继承的情况下） ，见安德鲁的回答）。

要真正了解在哪些情况下会发生不同的结果值，您必须阅读 C++ ABI，即对象如何*准确地*存储在内存中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-25T14:39:36.437

在您的情况下，它不会更改指针。

但是对于多重继承，它必须改变指针。

您可以编写一个示例程序来确认这一点。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-25T14:40:48.307

简短的回答：

使用强制转换，您只需告诉编译器如何解释一个对象，即我应该认为该对象是什么类型。

强制转换不会改变对象的值。

# java - 带有 Spring 3.1 和 Hibernate 4 注释的 EHCache - 使其工作

> ID：11652176
> 
> 赞同：0
> 
> 时间：2012-07-25T14:35:02.903
> 
> 标签：java, spring, hibernate, spring-mvc, ehcache

我试图让 EHCache 在我的应用程序中工作。我做的第一件事是添加 Maven 依赖项：

**pom.xml**

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-ehcache</artifactId>
        <version>${hibernate-version}</version>
    </dependency> 
```

到目前为止一切顺利，现在在我的应用程序 root-context.xml 中（由于`OpenSessionInView`过滤器，SessionFactory 在 roout 中被拒绝）我为来自 jConsole 的 Hibernate 统计信息添加了 MBean，并完整定义了我的 sessionFactory：

**根上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<!-- Root Context: defines shared resources visible to all other web components -->
<bean id="jmxExporter"
      class="org.springframework.jmx.export.MBeanExporter">
    <property name="beans">
        <map>
            <entry key="Hibernate:type=statistics">
                <ref local="statisticsBean"/>
            </entry>
        </map>
    </property>
</bean>
<bean id="statisticsBean" class="org.hibernate.jmx.StatisticsService">
    <property name="statisticsEnabled" value="true"/>
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<bean id="namingStrategy" class="com.execon.OracleNamingStrategy"/>

<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="oracle.jdbc.OracleDriver"/>
    <property name="jdbcUrl" value="jdbc:oracle:thin:@127.0.0.1:1521:orcl"/>
    <property name="user" value="xxx"/>
    <property name="password" value="xxx"/>
    <property name="maxPoolSize" value="10"/>
    <property name="maxStatements" value="0"/>
    <property name="minPoolSize" value="5"/>
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="namingStrategy" ref="namingStrategy"/>
    <property name="dataSource" ref="dataSource"/>
    <property name="configLocation" value="classpath:hibernate.cfg.xml"/>
    <property name="packagesToScan" value="com.execon.models"/>
</bean>
</beans> 
```

是时候定义 hibernate.cfg.xml 和 ehcache 文件了，它们是：

**休眠.cfg.xml**

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD//EN"
    "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>
    <property name="show_sql">true</property>
    <property name="format_sql">true</property>
    <property name="hibernate.cache.region.factory_class">org.hibernate.cache.ehcache.EhCacheRegionFactory</property>
    <property name="hibernate.cache.use_query_cache">true</property>
    <property name="hibernate.cache.use_second_level_cache">true</property>
    <property name="hibernate.cache.provider_configuration_file_resource_path">ehcache.xml</property>
    <property name="hibernate.generate_statistics">true</property>
</session-factory>
</hibernate-configuration> 
```

**ehcache.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd">

<diskStore path="java.io.tmpdir"/>
<defaultCache
        eternal="false"
        maxElementsInMemory="1000"
        maxElementsOnDisk="10000"
        overflowToDisk="true"
        diskPersistent="true"
        timeToLiveSeconds="300"
        />
</ehcache> 
```

一切都很好，所以现在是时候定义一些`Service`来测试缓存了，所以我做了：

```
@Service
@Scope(value = "prototype", proxyMode = ScopedProxyMode.TARGET_CLASS)
@Transactional(readOnly = true)
public class MyService
{
    @Autowired
    private SessionFactory sessionFactory;

    @SuppressWarnings("unchecked")
    @Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL)
    public List<SettlementModelGroup> getModelGroups()
    {
        List<SettlementModelGroup> list = new ArrayList<SettlementModelGroup>();
        Session session = sessionFactory.getCurrentSession();
        Query query = session.createQuery( "from SettlementModelGroup" );

        list.addAll( query.list() );

        return list;
    }
} 
```

如您所见，这个基本方法总是返回相同的列表。所以我正在检查休眠统计信息并且：

```
secondLevelCacheHitCount 0
secondLevelCacheMissCount 0
secondLevelCachePutCount 0 
```

屏幕上的其余统计信息：

[![图表](../Images/17b6213960b622a1e947ad0d4583b97e.png)](https://i.stack.imgur.com/VgRDG.jpg) 链接太小：[http ://s11.postimage.org/yfg9h6m83/image.jpg](http://s11.postimage.org/yfg9h6m83/image.jpg)

那么怎么了，我错过了什么（很明显）？还是我走错了路？

**编辑**

**SettlementModelGroup**实体（也尝试过 CacheConcurrencyStrategy.READ_WRITE）

```
@Entity
@Table(name = "MODEL_GROUP")
@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL)
public class SettlementModelGroup implements Serializable
{
@Id
@GeneratedValue(generator = "MODEL_GROUP_SEQ", strategy = GenerationType.SEQUENCE)
@SequenceGenerator(name = "MODEL_GROUP_SEQ", sequenceName = "SEQ_MODEL_GROUP_MODEL_GROUP_ID")
@Column(name = "MODEL_GROUP_ID", nullable = false)
private Integer modelId;

@Column(name = "NAME", nullable = false)
private String modelGroupName;

@Column(name = "DESCRIPTION", nullable = false)
private String modelGroupDescription;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "MODEL_GROUP_TYPE_ID", nullable = false)
private SettlementModelGroupType settlementModelGroupType;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "PERIOD_TYPE_ID", nullable = false)
private PeriodType periodType;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "DOMAIN_ID")
private Domain domain;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "OWNER_ID", nullable = false)
private User user;

@OneToMany(fetch = FetchType.LAZY, mappedBy = "modelId")
@Cascade(CascadeType.ALL)
private List<SettlementModel> settlementModels;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "STATUS_ID")
private Status status;

//getters and setters here
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T02:26:49.373

穿上（您`@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL)`的`SettlementModelGroup`域实体）而不是服务方法。

另请参阅此[链接](https://community.jboss.org/wiki/ConfigureEhcacheAsASecondLevelCache)。根据您的 EhCache 版本（2.4.3.?），您可能必须使用 CacheConcurrencyStrategy.READ_WRITE。

# javascript - 带有标签容器的弹出窗口

> ID：11652182
> 
> 赞同：0
> 
> 时间：2012-07-25T14:35:30.633
> 
> 标签：javascript, dojo, popup, gis, tabcontainer

我正在尝试在 ESRI 弹出窗口中调用 dojo 选项卡容器。我拥有的代码（见下文）能够创建一个带有选项卡容器和内容的弹出窗口，而且还创建了三个“死”下拉菜单。有没有办法在没有下拉菜单的情况下创建弹出窗口？

```
var map;
var resizeTimer;
var identifyTask,identifyParams;

function init() {        
  //setup the popup window 
  var popup = new esri.dijit.Popup({
    fillSymbol: new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID, new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID, new dojo.Color([255,0,0]), 2), new dojo.Color([255,255,0,0.25]))
  }, dojo.create("div"));
  map = new esri.Map("map",{
    infoWindow:popup,
  });
  dojo.connect(map,"onLoad",mapReady);
  //Add the imagery layer to the map. View the ArcGIS Online site for services
  //http://arcgisonline/home/search.html?t=content&f=typekeywords:service    
  var basemap = new esri.layers.ArcGISTiledMapServiceLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer");
  map.addLayer(basemap);
  var landBaseLayer = new esri.layers.ArcGISDynamicMapServiceLayer("http://<someServer>/ArcGIS/rest/services/test/MapServer");
  map.addLayer(landBaseLayer)
}

function mapReady(map) {
  dojo.connect(map,"onClick",executeIdentifyTask);
  //create identify tasks and setup parameters 
  identifyTask = new esri.tasks.IdentifyTask("http://<someServer>/ArcGIS/rest/services/test/MapServer");
  identifyParams = new esri.tasks.IdentifyParameters();
  identifyParams.tolerance = 3;
  identifyParams.returnGeometry = true;
  identifyParams.layerIds = [0];
  identifyParams.layerOption = esri.tasks.IdentifyParameters.LAYER_OPTION_ALL;
  identifyParams.width  = map.width;
  identifyParams.height = map.height;
  //resize the map when the browser resizes
  dojo.connect(dijit.byId('map'), 'resize', map,map.resize);
}

function executeIdentifyTask(evt) {
  identifyParams.geometry = evt.mapPoint;
  identifyParams.mapExtent = map.extent;
  var deferred = identifyTask.execute(identifyParams);
  deferred.addCallback(function(response) {     
    // response is an array of identify result objects    
    // Let's return an array of features.
    return dojo.map(response, function(result) {
      var feature = result.feature;
      feature.attributes.layerName = result.layerName;
      console.log(feature.attributes.OBJECTID);
      var template = new esri.InfoTemplate();
      template.setTitle("</b>Hello World</b>");
      template.setContent(getWindowContent);
      feature.setInfoTemplate(template);
      return feature;
    });
  });

  // InfoWindow expects an array of features from each deferred
  // object that you pass. If the response from the task execution 
  // above is not an array of features, then you need to add a callback
  // like the one above to post-process the response and return an
  // array of features.
  map.infoWindow.setFeatures([ deferred ]);
  map.infoWindow.show(evt.mapPoint);
}

function getWindowContent(graphic) {
  //make a tab container 
  var tc = new dijit.layout.TabContainer({ });
  return tc.domNode;
}

dojo.addOnLoad(init); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:28:05.957

似乎将 TabContainer 代码更改为以下内容将解决此问题：

```
var tc = new dijit.layout.TabContainer({
            style: "width:100%;height:100%;",
            useMenu: false,
            useSlider: false,
        }, dojo.create('div')); 
```

# sql-server - 在 SQL Server 2008 中将 XML 变量转换为结果集

> ID：11652187
> 
> 赞同：1
> 
> 时间：2012-07-25T14:35:39.677
> 
> 标签：sql-server, xml, sql-server-2008

想象一下，我有一些如下所示的 XML：

```
DECLARE @xml XML
SET @xml = CAST(N'<row><id>1</id><a>b</a></row><row><id>2</id><a>x</a></row>' AS XML) 
```

那是：

```
<row>
    <id>1</id>
    <a>b</a>
</row>
<row>
    <id>2</id>
    <a>x</a>
</row> 
```

id 元素是每一行的键，它可能是动态的，所以我将它存储在一个变量中：

```
DECLARE @idname NVARCHAR(MAX)
SET @idname = N'id' 
```

我想要一个包含两列的结果集，即 id 值和行的内容。我试过这个：

```
SELECT node.value(N'xxx', N'NVARCHAR(MAX)') AS key, CAST(node.query(N'.') AS NVARCHAR(MAX)) AS value
FROM @xml.nodes(N'/row') AS roots(node) 
```

问题是，我不知道在里面放什么值，而不是 xxx。我希望能够做类似的事情：

```
node.value(@idname, N'VARCHAR(MAX)) 
```

这样我的变量将被评估为 XPath 表达式，但我知道这是不可能的。如果我改用：

```
node.value(N'sql:variable("@idname")', N'NVARCHAR(MAX)') 
```

它将返回 @idname 变量中的值，而不是评估它。

我想要的是：

```
--------------------------------------

key           |value

--------------------------------------

1             |<id>1</id><a>b</a>

2             |<id>2</id><a>x</a> 
```

那么，这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:42:30.573

```
select T.N.value('(*[local-name(.)=sql:variable("@idname")])[1]', 'int') as [key],
       T.N.query('*') as value
from @xml.nodes('/row') as T(N) 
```

# jquery - jQuery 航点

> ID：11652193
> 
> 赞同：2
> 
> 时间：2012-07-25T14:36:06.857
> 
> 标签：jquery, jquery-waypoints

当用户开始向下滚动页面时，我正在使用 jQuery 航点来更改标题的样式。但是，当我试图让标题返回到屏幕顶部时返回其自然样式时，我很挣扎，即：用户滚动回顶部。

```
$(document).ready(function(){
       $('.slide-wrap').waypoint(function() {
           $("#header").animate({backgroundColor: 'black'},2000,function(){
               bgColor = 'black';
           }) 
        });             
}); 
```

到目前为止，我目前有这个，在向下滚动页面时可以正常工作。

任何帮助表示赞赏。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:57:03.210

为了建立@jimy 的答案，航点回调被赋予了事件对象和一个指示方向的字符串。使用该方向字符串来确定您应该向哪种颜色设置动画：

```
$('.slide-wrap').waypoint(function(event, direction) {
  var color = direction === 'down' ? 'black' : 'yourOriginalColor';
  $('#header').stop().animate({ backgroundColor: color }, 2000);
}); 
```

**更新**：Waypoints 2.0 不传递事件对象，只传递方向字符串：

```
$('.slide-wrap').waypoint(function(direction) {
  var color = direction === 'down' ? 'black' : 'yourOriginalColor';
  $('#header').stop().animate({ backgroundColor: color }, 2000);
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T14:47:24.530

你可以试试这个

```
var headercolor = $("#header").css("background-color");
$('.slide-wrap').waypoint(function(event, direction) {
   if (direction === 'down') {
      $("#header").animate({backgroundColor: 'black'},2000,function(){
          bgColor = 'black';
      });
   }
   else {
       $("#header").animate({backgroundColor: headercolor},2000,function(){
          //bgColor = 'black';
      });
   }
}); 
```

# css - 标题文本不换行 JQM

> ID：11652194
> 
> 赞同：0
> 
> 时间：2012-07-25T14:36:10.280
> 
> 标签：css, jquery-mobile

我的标题文本如下所示：

```
My Hea.... 
```

我想让它读

```
My HeaderHereTodayAndIsTooLong 
```

我必须在 jquery 移动框架/css 中进行哪些更改才能正确渲染？

```
 <div data-role="header"  data-position="fixed" data-tap-toggle="false">
     <h2>My HeaderHereTodayAndIsTooLong</h2>
      <a href="@Url.Action("Index","Home", new { partnumber = ViewBag.PartNumber })" class="ui-btn-right" data-icon="info">Home</a>
     </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:54:07.373

将 h2 标签包装在 div 中，如果您希望文本仍显示在中心，则向刚刚创建的容器 div 添加 text-align 样式：

```
<div data-role="header" data-position="fixed" data-tap-toggle="false">
    <div style="text-align:center;">
        <h2>My HeaderHereTodayAndIsTooLong</h2>
    </div>
</div> 
```

编辑：要让您的按钮出现在右侧，请删除文本对齐并将一些样式应用于您的标题以将其定位到所需的位置，粗略的示例：

```
<div data-role="header"  data-position="fixed" data-tap-toggle="false">
    <div>
        <h2 style="font-size:0.8em;margin-left:10px;width:70%;">My Header Here Today And Is Too Long</h2>
    </div>
    <a href="@Url.Action("Index","Home", new { partnumber = ViewBag.PartNumber })" class="ui-btn-right" data-icon="info">Home</a>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:33:09.440

您可以尝试仅覆盖 JQM 添加到的边距样式，`hx`当然这只会给您带来更多空间，最终如果您的标题文本太长它仍然会溢出（您当然可以覆盖这些样式）。例如

```
.lrMarg0
    {
        margin-left:0px !important;
        margin-right:0px !important;
    }

     <div data-role="header" data-position="fixed" data-tap-toggle="false">
        <h2 class="lrMarg0">My HeaderHereTodayAndIsTooLong</h2>
        <a href="#"  class="ui-btn-right" data-icon="gear" data-role="button">Next</a>
      </div> 
```

# mercurial - Mercurial：拉入其他合并+分支

> ID：11652195
> 
> 赞同：0
> 
> 时间：2012-07-25T14:36:16.820
> 
> 标签：mercurial, tortoisehg, branching-and-merging

我对 Mercurial 还是很陌生，所以请让我知道我做错了什么。

我们为每个开发人员提供了一个 hg 存储库。我正在开发一个新功能 branch `x`。从那时起，其他人对该项目进行了重大更改，我已将其纳入我的存储库。但是，当我在分支上工作时，`x`我的工作副本仍然有旧的东西，这导致它不能很好地与我们共享的 MySQL 数据库一起使用。

问：我如何更新我的分支以让其他开发人员获得新东西，同时将我自己的代码保留在`x`分支中；我还没有准备好让他们拥有它，我绝对不想合并`x`...`default`我不确定在这里做什么...

还是我会以完全错误的方式解决这个问题？如果是这样，我应该怎么做？

[编辑] 另外，我正在使用 TortoiseHG，所以如果您有任何具体的说明，将不胜感激。[/编辑]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:39:46.370

你做的一切都是正确的。为了“跟上”其他开发人员的工作，您必须将默认分支合并到您的`x`分支中。不是反过来。

当你在你的`x`分支时，它就像做一样简单`hg merge default`。

**编辑**：我删除了关于`hg merge`等同于的声明`hg merge default`，这是错误的。我误读了文档。

# c# - 显示进行中标签，直到操作完成

> ID：11652196
> 
> 赞同：0
> 
> 时间：2012-07-25T14:36:17.247
> 
> 标签：c#, wpf, multithreading

我的 UI 上有一个按钮和一个标签。当我单击按钮时，我想在标签上显示“进行中”，直到 for 循环完成，然后相同的标签再次显示集合的结果。

```
private void button1_Click(object sender, RoutedEventArgs e)
{
  label1.Content = "In progress..";          
  List<string> intList = new List<string>();
  for (long i = 0; i <= 50000000; i++)
  {
    intList.Add("Test");
  }
  label1.Content = intList.ToString();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:40:43.437

您需要将[工作分配给后台线程](http://msdn.microsoft.com/en-us/magazine/ff959203.aspx)，否则您的循环会在 UI 线程上继续，因此您看不到“进度”。

您可以使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)或[Task](http://msdn.microsoft.com/en-us/library/dd235608)来完成此操作：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    label1.Content = "In progress..";
    Task.Factory.StartNew<List<string>>(
    () =>
    {
        List<string> intList = new List<string>();
        for (long i = 0; i <= 50000000; i++)
        {
            intList.Add("Test");
        }

        return intList;
    })
    .ContinueWith(
        (t) => label1.Content = t.Result.ToString(),
        TaskScheduler.FromCurrentSynchronizationContext());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:41:26.683

使用[后台工作人员](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)执行您的实际工作（for 循环）并订阅他在函数完成时引发的事件。您还可以检查进度等以获得更有价值的进度表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:45:59.460

你应该用 BackgroundWorker 来做这件事。这似乎是如何做到这一点的好例子。 [http://elegantcode.com/2009/07/03/wpf-multithreading-using-the-backgroundworker-and-reporting-the-progress-to-the-ui/](http://elegantcode.com/2009/07/03/wpf-multithreading-using-the-backgroundworker-and-reporting-the-progress-to-the-ui/)

# javascript - 同时播放多个声音

> ID：11652197
> 
> 赞同：22
> 
> 时间：2012-07-25T14:36:18.193
> 
> 标签：javascript, html, html5-audio

使用 HTML 5，我想同时播放多个声音。我该怎么做？

这是我目前拥有的：

```
<audio controls="controls">
    <source src="audio/(TESBIHAT).mp3" type="audio/mpeg" />
    <source src="audio/Dombra.mp3" type="audio/mpeg" />

    <embed height="50px" width="100px" src="audio/(TESBIHAT).mp3" />
    <embed height="50px" width="100px" src="audio/Dombra.mp3" />
</audio> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-25T21:57:04.137

使用 JavaScript 和 HTML5 音频 API，您可以执行以下操作：

```
var snd1  = new Audio();
var src1  = document.createElement("source");
src1.type = "audio/mpeg";
src1.src  = "audio/Dombra.mp3";
snd1.appendChild(src1);

var snd2  = new Audio();
var src2  = document.createElement("source");
src2.type = "audio/mpeg";
src2.src  = "audio/(TESBIHAT).mp3";
snd2.appendChild(src2);

snd1.play(); snd2.play(); // Now both will play at the same time 
```

我已经在 Chrome v. 20 中对此进行了测试，它似乎可以工作:)

该`<source>`标签用于指定同一文件的不同格式 - 这样浏览器可以选择另一种格式作为备用格式，以防第一种格式不受支持。这就是为什么您自己建议的解决方案不起作用的原因。

# r - R：read.table 问题

> ID：11652201
> 
> 赞同：0
> 
> 时间：2012-07-25T14:36:38.970
> 
> 标签：r, read.table

我可能只是疯了，但我真的看不出我的简单 R 程序哪里出错了。我正在尝试从文件中读取表，但每次尝试时都会返回此错误：

```
./tmp.r: line 1: syntax error near unexpected token `('
./tmp.r: line 1: `tmp <- read.table("/home/Data/run1.DOC.sample_summary",header=FALSE)' 
```

我试图读取的文件如下所示：

```
Aim  A_%_above_20  A_%_above_30  A_%_above_40  
28         0.0          0.0          0.0     
99         50           100.0        82.9  
34         62.1         0.0          0.0 
```

这是我的代码：

```
tmp <- read.table("/home/Data/run1.DOC.sample_summary",header=FALSE)
names(tmp)
max_num <- max(tmp)
hist(tmp$'*_%_above_30',col=heat.colors(max_num), main='Percent in Test', xlab='Percent Covered') 
```

有谁看到我在这里做错了什么？我只是没有看到它。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:46:39.090

这些`tmp$'*_%_above_30'`真的在你的最后一行有效吗？

此外，尝试在代码的不同部分添加注释，看看是哪一个导致代码崩溃。

最后，也许这只是代码中某些字符的错误编码。尝试从头开始重写它。

你如何启动你的脚本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:41:28.007

这是因为您使用了错误的路径名吗？例如，尝试将“home...”更改为“/home...”

# uitableview - 我需要第二个 NSFetchedResultsController

> ID：11652208
> 
> 赞同：0
> 
> 时间：2012-07-25T14:37:00.640
> 
> 标签：uitableview, ios5, core-data

我的应用程序的一个功能使用核心数据来存储用户的费用作为一个属性。我试图在我的表格视图控制器的第一部分显示所有这些费用的总和。

当总和显示在表格的第 1 部分时，我已经让它完美地工作了。但是，当我使用第 0 节时，它就会中断。我已经调试了该应用程序以找出它在哪里以及为什么会中断。我发现在调用 fetchedResultsController 两次时会出现问题。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        // Return the number of rows in the section.
        if (section == 1) {
            return 1;       
        }
        if (section == 0){
            return [self.fetchedResultsController.fetchedObjects count]; 
        }
        else return 0;
    }

- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController != nil) {

        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Gastos" inManagedObjectContext:self.managedObjectContext];

    [fetchRequest setEntity:entity];
    [fetchRequest setFetchBatchSize:20];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"nombre" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    _fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![_fetchedResultsController performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _fetchedResultsController;
} 
```

以下代码将不起作用，因为 _fetchedResultsController 已为总和创建，并且不会通过 if (_fetchedResultsController != nil)。

我是否需要使用另一个 NSFetchedResultsController 来计算总和？不管是不是这样，你会怎么做？谢谢

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        if (section == 0) {
            return 1;
        } else {
            return [[self.fetchedResultsController fetchedObjects] count];
            //id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
        }   
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        if (indexPath.section == 0) {
            static NSString *ct = @"CellSum";      
            UITableViewCell *cell = (UITableViewCell *)[self.tableView dequeueReusableCellWithIdentifier:ct];
            [self configureCell:cell atIndexPath:indexPath];
            return cell;
        } else {
            static NSString *ci = @"Cell";      
            UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:ci];
            [self configureCell:cell atIndexPath:indexPath]; 
            return cell;       
        }

    }
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath{

        //Gastos *g = (Gastos *)[self.fetchedResultsController objectAtIndexPath:indexPath];
    if (indexPath.section == 0) {
        NSNumber *sum = [self.fetchedResultsController.fetchedObjects
                         valueForKeyPath:@"@sum.precio"];
        NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
        [f setNumberStyle:NSNumberFormatterCurrencyStyle];
        [f setMinimumFractionDigits:2];
        [f setMaximumFractionDigits:2];

        NSString *precio = [f stringFromNumber: sum];

        cell.detailTextLabel.text = [NSString stringWithString:precio];
        cell.textLabel.text = @"Suma Total:";
    } else{
        Gastos *g = (Gastos *)[self.fetchedResultsController objectAtIndexPath:[NSIndexPath indexPathForRow:indexPath.row inSection:0]];
        cell.textLabel.text = g.categoria.nombre;
        NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
        [f setNumberStyle:NSNumberFormatterCurrencyStyle];
        [f setMinimumFractionDigits:2];
        [f setMaximumFractionDigits:2];

        NSString *precio = [f stringFromNumber: g.precio];

        cell.detailTextLabel.text = [NSString stringWithString:precio];
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:39:49.943

原因是获取的结果控制器没有任何节，因此所有行都是零节。你将不得不修改你`cellForRowAtIndexPath`的工作在第 1 部分而不是 0。

你会在你的`cellForRowAtIndexPath`：

```
NSManagedObject *object = [self.fetchedResultsController 
   objectAtIndexPath:indexPath]; 
```

在第 1 节中，这将简单地返回任何内容。而不是`indexPath`在上面的行中使用表达式

```
[NSIndexPath indexPathForRow:indexPath.row inSection:0] 
```

它应该`fetchedObjects`在第 1 节中显示您的。

至于总和，您可以简单地使用现有的 fetch 生成它：

```
NSNumber *sum = [self.fetchedResultsController.fetchedObjects
   valueForKeyPath:@"@sum.nombre"] 
```

# java - Wicket - 使用 AjaxLink 更新 WebMarkupContainer

> ID：11652215
> 
> 赞同：0
> 
> 时间：2012-07-25T14:37:21.550
> 
> 标签：java, wicket

在我通过 Ajax 删除一个条目后，我试图在 PropertyListView 进行更新，但由于某种原因它不起作用。

我已将 PropertyListView 添加到 WebMarkupContainer 并将列表添加到此视图。

有人可以帮忙吗

```
import java.util.ArrayList;
import java.util.List;

import org.apache.wicket.ajax.AjaxEventBehavior;
import org.apache.wicket.ajax.AjaxRequestTarget;
import org.apache.wicket.ajax.markup.html.AjaxLink;
import org.apache.wicket.ajax.markup.html.form.AjaxButton;
import org.apache.wicket.markup.html.WebMarkupContainer;
import org.apache.wicket.markup.html.basic.Label;
import org.apache.wicket.markup.html.form.Button;
import org.apache.wicket.markup.html.list.ListItem;
import org.apache.wicket.markup.html.list.PropertyListView;
import org.apache.wicket.markup.html.panel.Panel;
import org.apache.wicket.model.IModel;
import org.apache.wicket.model.LoadableDetachableModel;

@SuppressWarnings("serial")
public class StockViewPanel extends Panel{

    private WebMarkupContainer listContainer;
    @SuppressWarnings("rawtypes")
    private PropertyListView plw; 

    @SuppressWarnings({ "rawtypes", "unchecked" })
    public StockViewPanel(String id) {
        super(id);

        IModel model = new LoadableDetachableModel() { 
            @Override 
            protected Object load() { 
                return WicketApplication.getStockEntrys();
            }};     

            plw = new PropertyListView("stockEntrys", model ) 
            { 
                @Override
                protected void populateItem(final ListItem item) 
                { 

                    //StockEntry stockEntry = (StockEntry) item.getModelObject(); 
                    item.add(new Label("name"));
                    //SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
                    item.add(new Label("date"/*, formatter.format(stockEntry.getDate())*/)); 
                    //NumberFormat nf = NumberFormat.getInstance(new Locale("da", "dk"));
                    item.add(new Label("number"/*, nf.format(stockEntry.getNumber())*/)); 
                    item.add(new Label("price"/*, nf.format(stockEntry.getPrice())*/));
                    item.add(new AjaxLink("deleteEntryLink"){

                        @Override
                        public void onClick( AjaxRequestTarget target ) 
                        {
                            List list = new ArrayList(WicketApplication.getStockEntrys());
                            Object ob = item.getModelObject();
                            list.remove(ob);
                            WicketApplication.setEntrys(list);
                            target.add(listContainer);
                        }
                    });
                }

            };
            listContainer = new WebMarkupContainer("listContainer");
            listContainer.setOutputMarkupId(true);
            listContainer.add(plw);
            add(listContainer);
    }
}

<html>
<body>
    <wicket:panel>
        <table wicket:id="listContainer">
            <thead>
                <th>Navn</th>
                <th>Dato</th>
                <th>Antal</th>
                <th>Pris</th>
                <th></th>
            </thead>
            <tbody>
                <tr wicket:id="stockEntrys" class="stockEntry">
                    <td wicket:id="name">name</td>
                    <td wicket:id="date">date</td>
                    <td wicket:id="number">number</td>
                    <td wicket:id="price">price</td>
                    <td> <a href="#" wicket:id="deleteEntryLink">DELETE</a> </td> 
                </tr>
            </tbody>
        </table>
    </wicket:panel>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:00:15.047

您正在使用`LoadableDetachableModel`，此模型`load()`在每个 RequestCycle 调用一次方法并保留`transient`它的副本。当您使用 a 更新条目列表时，`WicketApplication.setEntrys(list);`您不会更新`transient`模型的实例。

直接使用 an`IModel`而不是`LoadableDetachableModel`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:07:00.033

更改数据后，将 #detach() 放在可拆卸模型上。

# javascript - 布局div

> ID：11652219
> 
> 赞同：2
> 
> 时间：2012-07-25T14:37:30.587
> 
> 标签：javascript, html, css, layout

截至目前的基本结构：http: [//jsfiddle.net/sv_in/wbhr8/](http://jsfiddle.net/sv_in/wbhr8/)

我想要的最终结构如下（修改后的图像）：

![我想要的布局](../Images/b15ea0627a2b6d88e46204509cb67688.png)

*   我**必须**支持 IE7+，所以如果至少也可以通过 polyfill 实现，我很高兴。
*   我对将它们定位在**绝对位置的解决方案不感兴趣**
*   我对使用主要**DOM 操作**的解决方案不感兴趣，因为“li”的顺序对我的需要很重要。

自己解不了谜，有高手吗？？？

PS：即使这是不可能的，也请给我学习的理由。

**更新：**

*   我不能使用一个表或多个 UL，比如[http://jsfiddle.net/wbhr8/31/](http://jsfiddle.net/wbhr8/31/)因为会有很多像这样的 'li's (20+)，我可能需要删除第一个或两个，仍然是这个布局应该保持。
*   项目的数量将是动态的，所以....希望这种布局适用于所有项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:40:06.880

我的感觉是，如果不求助于一些愚蠢的定位是不可能的，就像这样：

[http://jsfiddle.net/wbhr8/95/](http://jsfiddle.net/wbhr8/95/)

```
<ul class="container">
   <li class="box">1</li>
   <li class="box even">2</li>
   <li class="box">3</li>
   <li class="box even">4</li>
   <li class="box">5</li>
   <li class="box even">6</li>
</ul>

.container {
   height: 205px;
   width: 1000px;
   border: 1px solid black;
   overflow:hidden;
}

.box {
   width: 100px;
   height: 100px;
   background-color:yellow;
   border: 1px solid red;
   color: black;
   float:left;
}

.even{
   position: relative;
   top: 102px;
   margin-left: -102px;
} 
```

原因是它目前不在工具包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:40:57.440

[http://jsfiddle.net/wbhr8/3/](http://jsfiddle.net/wbhr8/3/)

你去吧:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:05:02.220

这个怎么样：**[jsFiddle示例](http://jsfiddle.net/j08691/wbhr8/29/)**。

未修改的 HTML。CSS：

```
.container {
    height: 205px;
    width: 1000px;
    border: 1px solid black;
    vertical-align:top;
}
.box {
    width: 100px;
    height: 100px;
    background-color:yellow;
    border: 1px solid red;
    color: black;
    display:inline-block;
}

​.box1,.box2 {
    float:left;
}
.box2 {
    clear:left;
}
​ 
```

我将`.box`元素设置为具有内联块显示，然后浮动前两个，同时清除第二个。请注意，我只有在 IE7 模式下运行的 IE8 来测试，而不是实际的 IE7。

# java - Hibernate SessionFactory 不保存更改

> ID：11652221
> 
> 赞同：0
> 
> 时间：2012-07-25T14:37:38.477
> 
> 标签：java, spring, hibernate

下面的代码静默无法更新数据库。这里没有要报告的错误消息。好像行“sessionFactory.getCurrentSession().saveOrUpdate(sn);” （朝向片段的底部）被忽略。我究竟做错了什么？

```
 public String getSerialNumber(String id) {
    log.debug("--------------------------------------------------------------------------------------------Looking for Serial number counter named: " + id);
    SerialNumber sn = (SerialNumber) sessionFactory.getCurrentSession().get(SerialNumber.class, id);
    if (sn == null) {
        //TODO Throw an error (maybe). The code below creates a new Serial number counter
        log.debug("NO Serial Number for: " + id + " was found.");

        sn = new SerialNumber();
        sn.setSerialNumberId(id);
        sn.setName("Unspecified");
        sn.setValue(1);
        log.debug("-----------------------------------------" + sn.toString());
        sessionFactory.getCurrentSession().save(sn);
        log.debug("--------------------------------------------------------------------------------------------Right after SAVE call. This is id --> " + id);
        return "1";
    }

    sn.setValue(sn.getValue()+1);
    log.debug("--update---------------------------------" + sn.toString());
    log.debug("--update---------------------------------" + sn.getValue());
    sessionFactory.getCurrentSession().saveOrUpdate(sn);

    log.debug("--update---------------------------------" + sn.getValue());
    log.debug("--update------------------------------------------------------------------------------------Right after SAVE call. This is id --> " + id);
    return sn.getValue().toString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:07:10.027

我认为您应该制作一个新对象。从旧对象复制字段并执行 saveorupdate(new object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:18:55.883

我认为您的问题是您的更改没有提交到数据库。您需要提交事务或关闭会话。

这是一个简单的事务提交

```
 Session session = sessionFactory.getCurrentSession();
 Transaction tx = session.beginTransaction();

 // your changes

 tx.commit();  // or you can rollback on exceptions 
```

# windows - 从 ftp 批量下载 zip

> ID：11652222
> 
> 赞同：0
> 
> 时间：2012-07-25T14:37:44.727
> 
> 标签：windows, for-loop, batch-file, ftp

晚上好。你能帮我一些批处理文件吗？我有一个 ftp，在根目录中，有几个随机命名的 zip 档案。所以我需要将该档案下载到本地 D:\temp 我知道，如何通过 ftp.exe 进行，但仅限于一个文件，我知道女巫名称：

**文件：save.bat**

```
ftp -s:1.txt 
```

**文件：1.txt**

```
open myftp.com
123login
321pass
prompt
binary
hash
get file.zip D:\test\12.zip
bye 
```

也许你可以告诉我如何在 ftp 上循环下载所有 * zip 档案？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:07:43.823

您可以使用该`mget`命令通过`ftp`. 这也支持通配符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:35:35.853

您可以简单地使用：

```
mget *.zip 
```

# mocking - 为什么要麻烦模拟存储库？

> ID：11652223
> 
> 赞同：4
> 
> 时间：2012-07-25T14:37:52.393
> 
> 标签：mocking, moq

这可能是一个非常蹩脚的问题，但我需要问。为什么要模拟一个存储库？

如果您正在创建具有硬编码值的对象，然后使用 Moq 将它们作为值从接口上的方法调用中返回（即没有实现）您到底在测试什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:41:32.047

就像其他答案所说的那样，您这样做是为了测试客户端，*而不是*存储库（或数据库，或外部服务或其他），但我们这样做有两个关键*原因*：

1.  **确保可重复性并创建例外情况**：您希望能够知道您正在测试的内容不会随着时间的推移而退化。如果您的存储库正在更改，您无法确定现在有效的方法以前是否也有效。此外，您可以识别现在可能不会出现在存储库中的异常情况（可能是没有社会安全号码的用户，或者类似的模糊但可能的东西）并将它们包含在您的测试中，从而确保未来的兼容性。

2.  **删除依赖项**：您想让测试尽可能简单和快速。测试依赖的每一个外部资源都是常规测试的另一个障碍。如果您模拟您的存储库，那么即使存储库不存在或丢失，也可以针对您的客户端运行测试。

    例如，如果一个程序连接到一个“真实”数据库，他们的测试套件可能会使用本地（甚至在内存中）SQLite 数据库来测试他们的 DB 行为，这样运行测试的人就不需要配置或连接到实际数据库，发生的任何更改或错误都不会影响共享数据库资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:40:43.550

您将测试使用该存储库的客户端。

IE 是使用存储库对已知对象集做正确事情的服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:41:11.180

在这种情况下，或者通常在模拟时，您*不*测试您的存储库，而是测试给定的类，您的 SUT（被测[系统](http://en.wikipedia.org/wiki/System_under_test)）是否正确使用存储库，例如通过调用方法（可能以正确的顺序）。

模拟使用行为验证，而不是状态验证。

这意味着您使用模拟来测试您的 SUT 是否行为正确，而不是在测试用例结束时具有正确的状态。

Jeremy Miller 有一些关于这个主题[的不错的](http://codebetter.com/jeremymiller/2005/12/19/mock-objects-and-stubs-the-bottle-brush-of-tdd/) [博客文章。](http://codebetter.com/jeremymiller/2005/12/20/why-and-when-to-use-mock-objects/)

# ios - NSURL withString 添加乱码

> ID：11652226
> 
> 赞同：0
> 
> 时间：2012-07-25T14:37:59.980
> 
> 标签：ios, encoding, nsurl

我正在尝试使用路径字符串构建 NSURL。该字符串看起来不错，但是当我尝试将其放入 NSURL 时，它会得到一堆乱码。这是我用来构建 url 的代码：

```
NSString* path = [[AppSettings instance].contentRootPath stringByAppendingPathComponent: item.fileName];
NSLog(path);
item.contentPath = [NSURL URLWithString:[path stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSLog(item.contentPath.absoluteString); 
```

这是日志：

> 2012-07-25 10:28:39.983 mxHub[44036:207] /Users/casey.borders/Library/Application Support/iPhone Simulator/5.0/Applications/C2C1975D-7FAB-4E6C-A091-DC389223CC57/Documents/.content/ Prezista-PI.pdf
> 
> 2012-07-25 10:28:41.654 mxHub[44036:207] /Users/casey.borders/Library/Application扡潳畲整瑓楲杮䄀䅖獳瑥慃档e獡敳䍴捡敨楗桴剕㩌猀稳佥䕦瑮祲潆䭲：ㅱ䀲㨰䀴祥卸敲潭敶湅牴䙹牯敋㩹挀敲敲瑮枫驱猀瑥愠愠䕸瑮祲枫驱：慭䕸瑮祲稳枫驱猀瑥愠㩥洀桡枫驱䀀䄢䅖獳瑥慱档䥥瑮牥虑≬䄀䅖獳瑥慃档䥥瑮牥虑l湩楗桴楄獩楗桴楄獯虑祲：慤驱獕湩䕧据挚湩㩧污潬䍷獯祳潃瘾牥楳汤:惯䉮䍥汤敶玱摥洁湅潣楤莹杮:湩楗桴岸防攺据挚湩㩧攀瑸湥敤䱤杯栗防瑓楲杮湅潣椤杮攀瑸湥敤䱤杯栗惊䄀偖慬敹䥲整䅭捣獥䱳杯开捡散獳潌䅧牲祡攀敶瑮的灟慬敹䥲整䅭捣獥䱳杯䀀䄢偖慬敹䥲杯整䅭捣獥义《整湲污》恶祡牥瑉浥捁散獳潌䥧瑮牥虑l潬䅧灯数祡䄀偖慬敹䥲整䅭捣獥䱳杯癅湥t畮捻牥晏牡墙噤摩潥浡墙卥碗敢浮捩瑡瑕摕楬牴牴瑡e扯摕摕極牴牴瑡瑡慲牥晴晴整扬慲狝敦味摥測慲狝敦味摥測極牴牴瑡摕摕楬極獴敨泷湷潬湥獴敨湷潬湥獴扴湴潬摡摥畄慲楴汤瀀慬批捡卫防玱晏獦獦瑥瀀慬批捡卫獥楳汤䑉渀浵敢佲贾牥敶䅲摤敲獥敶䅲摤敲獳桃湡敧s敳牥摁牤獥剕我祡正慢獥剕我瑓牡摴瑡e畮扭牥晏敓浧湥獴摴湷潬摡摥开祡牥瑉浥捁散獳潌䕧敶瑮䀀䄢偖慬敹䥲整䅬獥䱳杯捣癒湥䥀瑮牥␥␥␥恶祡牥瑉浥捁散獳潌䕧敶瑮湉整湲污搀捩t┊@恶祡牥瑉浥牅潲䱲杯牥潲䱲杯牁慲y灟慬敹䥲整䕭牲牯潌开≀恶祡祡瑉浥牅潲䱲杯湉整湲污”恶祡牥瑉浥牅潲䱲杯湉整湲污䄀偖慬敹䥲整䕭牲牯潌䕧敶瑑攀牲牯潃浭湥t牉潲䑲浯楡n牲潲卲惊吓䍳挚灟慬敹䥲整䕭牲潌䕧敶瑮䀀䄢偖慬敹䥲整䕭牲牯潌䕧敶瑮湉整湲污；瑉浥牅潲䱲杯癅湥䥴瑮牥虑l碗剳捥牯楤杮攀牲牯楗桴漱慭湩挺杯挚㩥猎牥湉潦:潶捩䍥汤牴汯敬䕲摮汐祡正慢湉整牲灵楴汤：潶捩䍥汤牴汯敬䕲摮敒潣摲湉整牲灵楴汤：潶捩䍥汤牴毯敬偲慬捡批䉫晵敦䅲庆汩扡敬戺晵庆敦汩扡楯散潃瑮潲汱牥楄Ǭ卤玱祡湩㩧捣獥可畜畬畬：支持/iPhone 〪ᶀЀꀠ/Āࠀ쵠޴imulator/5。0/应用程序/C2C1975D-7FAB-4E6C-A091-DC389223CC57/Documents/.content/Demo.pdf

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:51:43.097

这与 NSLog 有关，与您的网址无关 :)

尝试这个 ：

```
NSString* path = [[AppSettings instance].contentRootPath stringByAppendingPathComponent: item.fileName];
NSLog(@"%@", path);
item.contentPath = [NSURL URLWithString:[path stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSLog(@"%@", item.contentPath.absoluteString); 
```

for的第一个参数`NSLog`是一个格式字符串 - 这告诉 NSLog 可能有其他值要插入到输出中（这些是 NSLog 采用的其他可选参数 - 例如`NSLog(@"%i", 5);`将 %i 替换为 5）。

这`NSLog(path);`很好，因为路径中没有任何特殊的格式字符，因此它会按照您的预期输出。

第二个`NSLog`有 % 字符 - 当您要求 % 转义路径时添加它们 :) 例如，您将“应用程序支持”中的空格替换为`%20`.

这意味着您的 url 现在包含格式代码`%20S`（S 是空格后的下一个字符，“支持”一词中的第一个字符）。

`%S`被解释`NSLog`为“获取给定的下一个参数并将其视为空终止的 c 字符串”。

不幸的是，您没有提供`NSLog`另一个参数 :) 但是，`NSLog`它不知道 - 它只是尽职尽责地按照告知的方式执行并获取堆栈中的下一个值并将其添加到输出字符串中。

堆栈上的下一个值是垃圾，这就是为什么你的输出是垃圾！

您可以看到损坏的值而不是路径中的空格出现 - 两个空格恰好后面跟着一个 S，所以`NSLog`在两个地方倾倒垃圾。这就是为什么在第一次加载垃圾之后你可以看到“支持/iPhone”和第二个“模拟器/5.0”之后:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:51:35.857

当您使用 NSLog(string) 时，该字符串被视为格式语句，并且任何 '%' 字符都将被解释。

尝试使用以下形式打印字符串：NSLog(@"%@", string)。作为一般性声明，您应该始终使用上述表格，而不是您正在使用的表格。

# authentication - 如何检查用户是否登录到 facebook - php sdk

> ID：11652228
> 
> 赞同：0
> 
> 时间：2012-07-25T14:38:03.967
> 
> 标签：authentication, facebook-php-sdk, facebook-login

如何确定用户已登录 facebook 但未使用 php sdk 对我的 facebook Web 应用程序进行身份验证。我知道我们有**$user = $facebook->getUser();** 但这仅检查用户是否对应用程序进行了身份验证。我想要类似**FB.getLoginStatus 的东西**

1.  用户已登录 Facebook 并已验证您的应用程序（已连接）
2.  用户已登录 Facebook，但尚未验证您的应用程序 (not_authorized)
3.  用户此时未登录 Facebook，因此我们不知道他们是否已验证您的应用程序（未知）

想使用 php sdk 即 not_authorized 确定第二个条件，但登录到 facebook

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:43:25.143

PHP SDK 本身无法知道这一点。

JS SDK 可以进行跨域调用，让 Facebook 检查其域下是否存在活动会话。仅从服务器端没有办法做类似的事情。

> 我想要类似 FB.getLoginStatus 的东西

为什么不只使用它，并将信息传递给服务器？（Cookie、AJAX、……）

# c# - 如何在不安装证书的情况下在 SharpSvn 中使用自定义证书颁发机构

> ID：11652229
> 
> 赞同：0
> 
> 时间：2012-07-25T14:38:07.123
> 
> 标签：c#, ssl, sharpsvn, certificate-authority

我正在尝试使用 SharpSvn 访问颠覆存储库。该存储库只能通过 https 获得，并且机器使用自己的私有证书颁发机构（不要担心这里的安全性，我信任该机构）。

我有证书颁发机构的公共根证书，但是由于用户访问权限，我无法将证书安装到证书存储中。

如果我直接使用颠覆，我可以添加：

```
servers:global:ssl-authority-files=/path/to/cacert.crt
servers:groups:myhost=myhostsdns.com 
```

作为命令行对象或配置文件。

如何在 SharpSvn 中设置这些选项，以便我可以使用 cacert.crt 文件，这样当我尝试访问我的存储库时就不会出现“证书验证失败”，而且我不必忽略错误？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:20:55.287

怎么只有问了问题才知道答案？

我通过在 SvnClient 对象上设置配置选项来解决这个问题：

```
SvnClient _svnClient = new SvnClient();
_svnClient.Configuration.SetOption("servers", "global", "ssl-authority-files", "/path/to/cacert.crt");
_svnClient.Configuration.SetOption("servers", "groups", "myhost", "myhostsdns.com"); 
```

对自助表示歉意，希望它可以帮助下一个人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T12:12:36.577

扩展 Bert Huijben 的评论（上图）：

```
client.Authentication.SslServerTrustHandlers += new EventHandler<SharpSvn.Security.SvnSslServerTrustEventArgs>(Authentication_SslServerTrustHandlers);
void Authentication_SslServerTrustHandlers(object sender, SharpSvn.Security.SvnSslServerTrustEventArgs e)
{
    // Look at the rest of the arguments of E, whether you wish to accept

    // If accept:
    e.AcceptedFailures = e.Failures;
    e.Save = true; // Save acceptance to authentication store
} 
```

# php - 在 IMAP 邮件服务器上的 Web 应用程序中传递 NTLM 身份验证

> ID：11652234
> 
> 赞同：0
> 
> 时间：2012-07-25T14:38:21.607
> 
> 标签：php, asp.net, authentication, imap, ntlm

我需要在我的 Web 应用程序中针对 IMAP 邮件服务器使用 NTLM 身份验证。Web 应用程序本身的身份验证也是 NTLM。因此，用户打开 Web 应用程序界面，Web 服务器端在通过 NTLM 进行身份验证的邮件服务器上抓取该用户的收件箱。如果我从不存储（我也无权访问）用户的密码，这可能吗？

有没有办法通过我的 Web 应用程序链接客户端的浏览器和 IMAP 服务器，以便它们之间发生令牌交换，而我只是充当它们之间的网关。或者，有没有其他方法可以在不知道密码的情况下完成此任务？

Web 应用程序可以是 asp.net/iis 或 php/apache。任何一个选项都对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:48:02.967

看来我昨天过得不好，否则不知道为什么我当时想不通，因为它是如此简单！

如果启用了 Windows 身份验证，则 Web 应用程序已获取访问该应用程序的交互式用户的上下文。然后，我可以通过集成 Windows 身份验证对启用 NTLM 的 IMAP 服务器进行身份验证，就像在桌面应用程序中一样。

即他们的关键点是网络应用程序中不需要以某种方式将 NTLM 令牌从浏览器传递到 IMAP 服务器。这只是一个两个阶段的过程： - 首先，浏览器（在交互式用户下运行）通过 winapi 函数创建 NTLM 令牌并将其发送到 Web 应用程序，以便最终应用程序获取该交互式用户上下文 - 然后，Web 应用程序在交互式用户上下文通过相同的 winapi 函数创建一个新令牌并将其发送到 IMAP 服务器。

# sql - 使用另一个表更新表

> ID：11652236
> 
> 赞同：0
> 
> 时间：2012-07-25T14:38:29.883
> 
> 标签：sql, oracle, join

我必须将客户列的总订单更新为等于客户下的所有订单的总数（在 cust_order 中）![在此处输入图像描述](../Images/8ed18bcacf1cb1a830468e06c7113b49.png)

这是我尝试过的

```
update (select * 
        from atish_customer a 
        inner join 
        (
            select cust_nbr,count(cust_nbr) as count_orders
            from atish_cust_order 
            group by cust_nbr
        )c
        on c.cust_nbr=a.cust_nbr) 
set tot_orders=count_orders; 
```

但这是我得到的错误

```
ORA-01779: cannot modify a column which maps to a non key-preserved table 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:47:10.203

这个怎么样：

```
UPDATE customer SET total_orders = (
    SELECT COUNT(*) FROM cust_order 
    WHERE cust_order.cust_nbr = customer.cust_nbr
) 
```

[我不确定你的`atish_customer`和在哪里`atish_customer_order`发挥作用......它们没有显示在你的图表中]

解释：基本上内部选择只是计算来自 cust_order 表的每个 cust_nbr 的订单数。通过将外部连接`customer.cust_nbr`到内部`cust_order.cust_nbr`，每个 [外部] 行都将更新为正确的总数。这称为相关子查询（参见[此处](http://oracle-database-tips.com/oracle_subquery.html)的简短教程）。

# android - 防止 HOME 按钮关闭活动

> ID：11652238
> 
> 赞同：0
> 
> 时间：2012-07-25T14:38:35.380
> 
> 标签：android, android-alertdialog, android-homebutton

我目前正在使用自定义 AlertDialog，它在 Activity 中具有 Theme.Dialog 主题，需要用户输入当前密码才能继续。

根据[Android - 是否可以禁用单击主页按钮](https://stackoverflow.com/questions/2162182/android-is-it-possible-to-disable-the-click-of-home-button)我已经尝试了大多数方法，但它不起作用。

活动 - onCreate

```
 SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(PhysicalTheftDialog.this);

        boolean isServerRunning = sp.getBoolean("isServerRunning", false);
            if (isServerRunning == false) {
                startService(new Intent(PhysicalTheftDialog.this, MyService.class));

            }
            else {
                sp.getBoolean("isServerRunning", true);
            } 
```

服务

```
 @Override
    public void onCreate() {
/*      //Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onCreate");

        player = MediaPlayer.create(this, R.raw.braincandy);
        player.setOnPreparedListener(this);
        try {
            player.prepareAsync();

        } catch (Exception e) {
            Log.e(TAG, "", e);
        }
        player.setLooping(true); // Set looping*/
        this.context = getApplicationContext();
        //Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
        SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
        boolean isServerRunning = sp.getBoolean("isServerRunning", true);

        while (!isServerRunning) {
            // THAT CODE: check if activity is on the top
            Handler handler = new Handler(); 

            handler.postDelayed(new Runnable() { 
                 public void run() { 

                        // get a list of running processes and iterate through them
                        ActivityManager activityManager = (ActivityManager)context.getSystemService(Activity.ACTIVITY_SERVICE);

                        // get the info from the currently running task
                        List<ActivityManager.RunningTaskInfo> taskInfo = activityManager.getRunningTasks(1);
                        ComponentName componentInfo = taskInfo.get(0).topActivity;

                        // if top activity is not "MyActivity" activity, then launch it
                        if("nyp.android.project".equals(componentInfo.getClassName()) == false) {
                            Intent intent = new Intent(MyService.this, PhysicalTheftDialog.class);
                            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                            startActivity(intent);
}
                 } 
            }, 2000); 

            boolean serviceStatus = sp.getBoolean("isServerRunning", false);
        }
    } 
```

日志猫

```
E/AndroidRuntime( 9799): FATAL EXCEPTION: main
E/AndroidRuntime( 9799): java.lang.RuntimeException: Unable to start service nyp.android.project.MyService@41b29ff0 with Intent { cmp=xxxx }: java.lang.NullPointerException
E/AndroidRuntime( 9799):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2387)
E/AndroidRuntime( 9799):    at android.app.ActivityThread.access$1900(ActivityThread.java:127)
E/AndroidRuntime( 9799):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1221)
E/AndroidRuntime( 9799):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 9799):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 9799):    at android.app.ActivityThread.main(ActivityThread.java:4511)
E/AndroidRuntime( 9799):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 9799):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 9799):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
E/AndroidRuntime( 9799):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
E/AndroidRuntime( 9799):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 9799): Caused by: java.lang.NullPointerException
E/AndroidRuntime( 9799):    at nyp.android.project.MyService.onStart(MyService.java:95)
E/AndroidRuntime( 9799):    at android.app.Service.onStartCommand(Service.java:438)
E/AndroidRuntime( 9799):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2370)
E/AndroidRuntime( 9799):    ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:48:00.787

McAfee Wave Secure 通过以下方式做到这一点：他们运行一个后台服务，每隔几秒钟检查一次您的屏幕是否处于活动状态。如果不是服务重新启动您的活动或将其带到前面（使其处于活动状态）。在 onPause 中，您可以保存输入数据以在活动重新启动时重新加载它。

我的例子：

```
// get a list of running processes and iterate through them
ActivityManager activityManager = (ActivityManager)_context
        .getSystemService(Activity.ACTIVITY_SERVICE);

// get the info from the currently running task
List<ActivityManager.RunningTaskInfo> taskInfo = activityManager.getRunningTasks(1);
ComponentName componentInfo = taskInfo.get(0).topActivity;

// if top activity is not "MyActivity" activity, then launch it
if(componentInfo.getClassName().equals("com.namespace.MyActivity") == false) {
    Intent intent = new Intent(context, MyActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intent);
} 
```

我做“FLAG_ACTIVITY_NEW_TASK”是因为我已经获得了许多相同活动的实例。也许有一种方法可以让它活跃起来。

示例“伪”

```
{
    Activity:
    preference isServerRunning = getPreference("isServerRunning");
    if (serviceIsRunning == false) {
        runService();
    }
    // othervise, service is running and will do the job
    Onclick.UserLogged() {
        setPreference("isUserLoged", true);
    }

    Service:
    while (!userIsLogged) {
        // THAT CODE: check if activity is on the top

        sleepFor2seconds();
        userIsLogger = getPreference("isUserLogged");
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:42:11.353

尝试覆盖 onPause() 方法，以便当按下主页按钮调用它时，活动不会停止

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:48:49.460

尝试覆盖要禁用 HOME 按钮的 Activity 类的 onKeyDown 方法。在此方法中，检查用户是否按下了 HOME 按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-30T09:23:11.453

***也许我迟到了但是***

**这是唯一可能的方法**

首先你必须检测到家被按下

看到这个答案来检测它

[检测主页按钮按下](https://stackoverflow.com/a/27956263/15597511)

对以上答案的这一部分进行更改

```
 HomeWatcher homeWatcher=new HomeWatcher(this);
    homeWatcher.setOnHomePressedListener(new OnHomePressedListener() {
        @Override
        public void onHomePressed() {
            //So Here The Main Thing Is..

            //You Will Have To Figure Out A Condition On When You Do You Want The Home Button Not To Close The Activity

            //In The Condition You Have To Restart The Activity 

            Intent intent = getIntent();
            overridePendingTransition(0, 0);
            intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
            finish();
            overridePendingTransition(0, 0);
            startActivity(intent);
           }
        }); 
```

所以这段代码将禁用主页按钮（不完全是一种）

我希望你理解它并且工作正常......如果没有，请随时与我联系（与此相关的任何其他类型的其他问题**或**对此的解释）

# javascript - 检查 Chrome 扩展程序中加载的页面

> ID：11652241
> 
> 赞同：0
> 
> 时间：2012-07-25T14:38:42.777
> 
> 标签：javascript, google-chrome-extension

我的 background.js 中有这段代码：

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    if (changeInfo.status == 'complete') {
        chrome.tabs.executeScript(null, {code:"alert('Loaded');"});
    }
}); 
```

这应该在每次加载页面时给我一个警报，但它没有..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:50:56.653

检查`tabs`清单文件的权限。还使用 tabId `executeScript`：

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    if (changeInfo.status == 'complete') {
        chrome.tabs.executeScript(tabId, {code:"alert('Loaded');"});
    }
}); 
```

如果这不能解决您的问题，请给我更多详细信息。

# php - 无法在 php 中打开流

> ID：11652242
> 
> 赞同：0
> 
> 时间：2012-07-25T14:38:47.187
> 
> 标签：php, path, include

我在一个简单的`include`方法上得到了这个错误：

```
Warning:  include(/home/content/70/8352870/html/sites/mysite.com/preview/wp-content/themes/site-theme/mail/class.phpmailer.php)
[<a href='function.include'>function.include</a>]: failed to open stream: No such file or directory in /home/content/70/8352870/html/sites/mysite.com/preview/wp-content/themes/site-theme/mail/send-message.php on line 5 
```

我已经使用这个包含了文件：

```
<?php
    $path = getcwd();
    include $path.'/class.phpmailer.php';
?> 
```

我在不使用方法的情况下得到了同样的错误，`getcwd`但是这个：

```
include 'class.phpmailer.php';

Warning:  include(class.phpmailer.php)
[<a href='function.include'>function.include</a>]: failed to open stream: No such file or directory in /home/content/70/8352870/html/sites/mysite.com/preview/wp-content/themes/site-theme/mail/send-message.php on line 10 
```

Obiouvsly 我检查了文件位于此处：

```
mysite.com/preview/wp-content/themes/site-theme/mail/
class.phpmailer.php
class.pop3.php
class.smtp.php
send-message.php 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:42:17.533

这与您尝试获得的行为相同，但更受信任：

（我想 class.phpmailer 与包含它的脚本在同一路径上）

```
<?php
$path = dirname( __FILE__ );
include $path.'/class.phpmailer.php';
?> 
```

# .net - 将 Xml 加载到数据集中

> ID：11652243
> 
> 赞同：0
> 
> 时间：2012-07-25T14:38:52.167
> 
> 标签：.net, xml, vb.net, dataset, readxml

我正在尝试将 xml（来自 web 服务）加载到数据集中。我的问题是 xml 并不总是具有相同的结构。

它看起来像这样

```
<Articles> 
   <Article>
      <id>7156</id>
      <name>FirstArticle</name>
      <pic>zaea.jpg </pic>
   </Article>
   <Article>
      <id>7157</id>
      <name>Second</name>
   </Article>
<Articles> 
```

如您所见，第一个节点有一个“图片”，而第二个节点没有。我的问题是它只会将第一个节点加载到数据集中，因为“它具有所有属性”。如果一个节点缺少一个属性，它不会将其加载到数据集中......

这就是我所做的

```
Dim dataSet As New DataSet()
Dim httpResponse As String
httpResponse = HttpRequest.WRequest("WEBSERVICE URL")
Dim xmlSR As System.IO.StringReader = New System.IO.StringReader(httpResponse)
dataSet.ReadXml(xmlSR) 
```

我已经尝试在加载数据之前添加数据集的列，但它并没有改变任何东西......

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:43:41.753

在我看来，XML 结构是无效的。属性不应该在没有值的时候回避，应该考虑写在`</pic>`甚至`<pic></pic>`是在第二条元素中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:49:00.163

尝试

```
dataSet.ReadXml(xmlSR,XmlReadMode.IgnoreSchema) 
```

如果有这样的模式，它就必须使用`<xsl:choose>`条件。

# android - eclipse android logcat显示一切

> ID：11652246
> 
> 赞同：6
> 
> 时间：2012-07-25T14:39:18.360
> 
> 标签：android, eclipse

有时，当我在处理我的 android 项目并连接我的手机时，Eclipse 中的 logcat 开始报告我手机上发生的一切，而不仅仅是与我正在处理的项目相关的内容。它只是有时这样做。

如何阻止它显示所有内容而只显示与我的项目相关的内容？

编辑：我忘了说我已经知道过滤器了，对不起。我只是想知道为什么有时 eclipses logcat 会显示我的手机正在做的所有事情，而其他时候它只显示与我当前在手机上运行的项目相关的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:44:23.610

> 我忘了说我已经知道过滤器了，对不起。

那是因为您选择了一个过滤器和/或 Eclipse 遇到了一个错误，只是没有显示它应该显示的所有内容。

* * *

**第一个答案**

在您的 logcat 窗口旁边应该是一个过滤器窗口。在那里创建一个过滤器。然后通过单击您已创建或由 eclipse 自动放置的过滤器来选择过滤器。

您可以过滤几件事。

`static string`大多数人会在他们的 Main `Activity`/中创建一个`Service`包含应用程序名称的名称。将其`static string`用作您`TAG`所有的`Logs`. 然后你可以过滤你为`static string`.

此外，在 logcat 窗口中单击鼠标右键会弹出一个过滤器对话框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:49:26.043

您可以单击会话过滤器（左）

![会话过滤器](../Images/4d3c1181dcc2ffa2ce4add453716af16.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-06T06:56:26.100

采用

1.  Log.d("键","值");
2.  Log.d("key1","value");
3.  Log.d("key2","value");
4.  Log.d("key2","value");

如果您只想查看 key1 消息，请转到 Logcat
单击左上角的添加新 logcat 过滤器（绿色 + 符号） ![见图片](../Images/57eaa201f1b2a729ba148c2de9fe7f40.png) ，然后将显示一个对话框

![见图片](../Images/affd7ae989a5a1ac4c7b5b8ca47b258d.png)

然后将显示一个对话框，在该对话框中写入过滤器名称，即任何名称
，然后在日志标签中写入 key1 并单击确定按钮。现在您将在 logcat 的左侧看到一个新过滤器单击它，您将只得到key1 消息

![见图片](../Images/88135c2639cbc18cd807c1c0e3458cee.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-09T22:45:21.960

我可以通过在 DDMS 视图中选择我的应用来解决此问题。

选择应用程序而不仅仅是设备很重要。后者只会创建这个无用的“（Session-Filter）”

这就像作者要求的那样“有时”发生，我想如果您更换手机或只是断开连接。

![在此处输入图像描述](../Images/4e5096764bc99cfe46726ff93940caea.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T14:42:34.070

[http://developer.android.com/tools/debugging/ddms.html#logcat](http://developer.android.com/tools/debugging/ddms.html#logcat)

> 您还可以设置自己的自定义过滤器以指定更多详细信息，例如使用日志标签或生成日志消息的进程 ID 过滤消息。添加过滤器、编辑过滤器和删除过滤器按钮可让您管理自定义过滤器。

使用过滤器来定义您想要查看的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T14:42:59.833

如果您使用的是 Eclipse，在查看 LogCat 视图时，右上角有一个绿色的“+”小按钮。这将允许您创建过滤器。只需为您的过滤器命名并输入它应该过滤的标签。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-25T14:45:57.500

如果您正在使用 Eclipse 进行开发，那么您正在寻找创建[日志过滤器的内容。](http://jmlinnik.blogspot.com/2011/11/android-logcat-filter-in-eclipse.html)

如果您从命令行通过 adb 使用 logcat：[过滤 LogCat 以仅从 Android 中的 My Application 获取消息？](https://stackoverflow.com/questions/6854127/filter-logcat-to-get-only-the-messages-from-my-application-in-android)

# java - 当 WAR 文件中包含 JAXB impl jar 时，JAXB 的解组器无法在 WebSphere Application Server 7 上工作？

> ID：11652247
> 
> 赞同：5
> 
> 时间：2012-07-25T14:39:19.890
> 
> 标签：java, web-applications, jaxb, websphere, websphere-7

我们有一个连接到 Web 服务的 Web 应用程序。我们使用 JAXB 来编组和解组soap 请求和响应。由于我们使用的是 JDK 1.5，因此我们在 WAR 文件中包含了 JAXB jar。我们能够在 Tomcat 上顺利运行它。但是，当我们在 WAS 7 上部署它时，解组器突然不起作用。尽管我们没有从解组中收到任何异常/错误，但我们无法从生成的 bean 中检索任何内容。解组后 bean 的内容为空。请注意，JAXB 编组器正在工作，我们能够成功收到响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-04T18:41:11.167

在 websphere 请检查类加载策略？它应该是最后的父母。

# xpath - C# htmlagilitypack XPath 除了包含 html 标记

> ID：11652253
> 
> 赞同：0
> 
> 时间：2012-07-25T14:39:37.400
> 
> 标签：xpath, html-agility-pack

```
<div id="Dossuuu11Plus" style="display: block; ">
Text need
<br/>
  Not need
  <a class="bot_link" href="http://abc.com" target="_self">http://abc.com</a>
  <br/>
</div> 
```

这是html代码。我使用： //td[@class='textdetaildrgI 但它获取所有内容，我只需要“文本需要”。请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:11:41.247

你可以使用

```
//div[@id='Dossuuu11Plus']/text()[1][normalize-space()] 
```

**说明：** 它将选择找到的第一个文本节点`DIV`，在这种情况下`Text need`，`normalize-space()`将修剪前导和尾随空格（如果有）。

# php - 将 PHP error_log 文件保存在 Web 根目录之外

> ID：11652254
> 
> 赞同：0
> 
> 时间：2012-07-25T14:39:43.093
> 
> 标签：php, security, error-handling, web, error-logging

目前，当发生 PHP 错误时，它会将其记录到发生错误的同一目录中名为 error_log 的文件中。

为了安全起见，如何将 error_log 文件保存在 Web 根目录之外，以便用户无法查看它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:42:50.480

编辑您的 php.ini 文件。找到 error_log 设置并将其更改为您希望写入 error_log 文件的完整路径。

# java - 在不同目录中播放框架自定义模块

> ID：11652258
> 
> 赞同：0
> 
> 时间：2012-07-25T14:39:50.277
> 
> 标签：java, model-view-controller, module, playframework, playframework-1.x

我正在尝试了解有关游戏框架中自定义模块的更多信息。我使用命令行创建了一个播放应用程序（v1.2.5）。

> 玩新的 myApp

然后我在同一个目录中创建了三个模块

> 播放新模块 myModule1
> 
> 播放新模块 myModule2
> 
> 播放新模块 myModule3

目录处于以下状态

> /myApplicationDirectory
> 
> > > /myApp
> > > 
> > > /myModule1
> > > 
> > > /myModule2
> > > 
> > > /myModule3

以下是我的“dependencies.yml”文件

```
 require:
        - play
        - customModules -> myModule1
        - customModules -> myModule2
        - customModules -> myModule3

    # Custom repository
    repositories:
        - customModules:
            type:       local
            artifact:   "/path/to/app/modules/"
            contains:
                - myModule1
                - myModule2
                - myModule3 
```

在 myApp 下的模块目录中，有三个名为“myModule1”、“myModule2”和“myModule3”的文件。在这些文件中，仅写入这些模块的绝对路径。

现在，当我从命令行运行“myApp”时，它说这三个模块可用。我可以从 Finder 手动将 java 文件等添加到这些模块中。但是，我想在 IntelliJ 中打开这些模块。但是模块不是 IntelliJ 项目。它们也没有被命令行理想化或黯然失色。我也想把它们放到 IntelliJ 中。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:18:47.930

当您说模块没有从命令行理想化/黯然失色时，究竟是什么问题？`play idealize`命令对他们不起作用吗？如果没有，请尝试将（空）`application.conf`文件添加到模块的`conf`文件夹中。然后将以下行放入该文件中：

```
application.name=[your_module_name] 
```

我似乎记得 eclipsify / Idealize 命令和模块的一个错误，这可能是解决方法。

# xslt - 如何在xsl中将全局变量添加到自身（a = a + b）

> ID：11652259
> 
> 赞同：1
> 
> 时间：2012-07-25T14:39:59.810
> 
> 标签：xslt

我想在循环中增加我的全局变量`tmp_balance_virt`，`for-each`但在每个循环中`tmp_balance_virt`（a = **a** + b）正在重置为其初始值，如何使其工作？

```
<xsl:variable name="tmp_balance_virt" select="/doc/plot/@st_balance_virt" /> //first value  
...
<xsl:if ...>
...
<xsl:for-each
    select="/doc/plot/cfc/pl.cashflow.rabean.TransactionsData[type=0]">
                <xsl:variable name="tmp_balance_virt" select="value + $tmp_balance_virt" />
                [
                <xsl:value-of select="date_ms" />
                ,
                <xsl:value-of select="$tmp_balance_virt" />
                ],
</xsl:for-each> 
```

编辑：这对我有用。

```
 <xsl:for-each
            select="/doc/plot/cfc/pl.cashflow.rabean.TransactionsData[type=1]">
            <xsl:variable name="PREC"
                select="count(preceding-sibling::pl.cashflow.rabean.TransactionsData[type=1])+2" />
            [
            <xsl:value-of select="date_ms" />
            ,
            <xsl:value-of
                select="sum(/doc/plot/cfc/pl.cashflow.rabean.TransactionsData[type=1][position() &lt; $PREC]/value) + $tmp_balance_real" />
            ],
        </xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:46:49.740

这里有一个答案：

[在 XSLT 中，如何从不同的范围增加全局变量？](https://stackoverflow.com/questions/833118/in-xslt-how-do-i-increment-a-global-variable-from-a-different-scope)

不完全是你所追求的，但它有一些很好的建议可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:23:42.833

XSLT 是一种函数式语言，这意味着变量是不可变的。一旦设置，就无法更改。这意味着您将需要改变您的方法，并以更实用的方式思考。

在这种情况下，您可能可以使用**sum**函数，并执行类似的操作来初始化变量

```
<xsl:variable 
   name="tmp_balance_virt" 
   select="/doc/plot/@st_balance_virt
     + sum(/doc/plot/cfc/pl.cashflow.rabean.TransactionsData[type=0]/value)" /> 
```

# mysql - SQL查询：选择特定项目之后的所有引用

> ID：11652265
> 
> 赞同：0
> 
> 时间：2012-07-25T14:40:20.373
> 
> 标签：mysql, sql

我有以下数据库表，其中包含有关公共交通系统的信息：

*   车站（ID、名称）
*   骑行（id，lineName）
*   RideStop（rideId，stationId，sequenceNumber，到达时间，离开时间）

RideStop 引用了 Ride 和 Station。通过 sequenceNumber 对 RideStops 进行排序时，您将获得此特定骑行的路径。

我需要从特定车站出发的所有游乐设施中获取路径。我可以通过执行获得完整的路径

```
select * 
from ridestop rs 
where rs.ride in (
  SELECT ride FROM ttm.ridestop where stationid = 8503000
) 
```

但是，我不在乎乘车从哪里来，只在乎它去哪里。

**问题：** 如何将结果限制为仅从 8503000 站开始的游乐设施的剩余部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:46:39.243

以下查询使用子查询来查询骑行中每个站点的序列号。然后，它会将其连接回停靠站，以从该序列号上或之后的骑行中选择所有内容。

```
select rs.*
from ridestop rs join
      (SELECT ride, rs.sequenceNumber
       FROM ride r join
            ridestop rs
            on r.ride = rs.ride
       where stationid = 8503000
      ) r
      on rs.ride = r.ride and
         rs.sequenceNumber >= r.sequenceNumber
order by rs.ride, rs.sequenceNumber 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:48:37.497

如果 StationId 处于递增序列中.. 以下查询有效

```
SELECT *
FROM   ridestop rs
WHERE  rs.ride IN (SELECT ride
                   FROM   ttm.ridestop
                   WHERE  ( stationid = 8503000
                            AND stationid > 8503000 )) 
```

# oop - Matlab 中的相关可观察属性。它有效吗？

> ID：11652266
> 
> 赞同：6
> 
> 时间：2012-07-25T14:40:22.853
> 
> 标签：oop, events, matlab, properties, event-handling

在 Matlab 类中，同时声明*依赖*（计算而不存储）和 *Observable的**属性*似乎在语法上是正确的。考虑代码

 **```
properties (Access = private)
    instanceOfAnotherClass
end
properties (SetAccess = private, Dependent, SetObservable)
    propertyTwo
end
methods
    function val = get.propertyTwo(this)
        val = this.instanceOfAnotherClass.propertyOne;   
    end
end 
```

这是否按预期工作？也就是说，如果`propertyOne`存储的对象的`instanceOfAnotherClass`属性发生更改，是否会触发属性更改事件`propertyTwo`？请注意，这`propertyOne`不是*Observable*。

**编辑：** 它不起作用（如我所料）。'PostSet' 事件未触发。那么我该如何处理这种情况呢？是否有更好的解决方案创建`propertyTwo`为非*依赖项*并将其设置为每次“propertyOne”更改时与“propertyOne”相同的值？

**Edit2：** 针对[Amro](https://stackoverflow.com/users/97160/amro) [对其答案的编辑，](https://stackoverflow.com/a/11653138/311865)我将解释更复杂的情况。考虑这两个类：

```
 classdef AClass < handle
     properties
         a
     end
 end
 classdef BClass < handle
     properties (Access = private)
         aClassInst
     end
     properties (Dependent, SetObservable, SetAccess = private)
         b
     end
     methods
         function this = BClass(aClass)
             this.aClassInst = aClass;
         end
         function val = get.b(this)
             val = this.aClassInst.a;
         end
     end
 end 
```

使用所有这些代码的类不应访问`AClass`. 它只与实例交互`BClass`并想监听属性的变化`b`。但是，如果我使 observable 的属性`a`无法解决`AClass`我的问题，会吗？'PostSet' 事件不会传播到 property `b`，是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:23:18.460

它可能在语法上是正确的，但侦听器回调永远不会执行。例子：

```
classdef MyClass < handle
    properties (Access = public)
        a
    end
    properties (SetAccess = private, Dependent, SetObservable)
        b
    end
    methods
        function val = get.b(this)
            val = this.a;
        end
    end
end 
```

现在尝试：

```
c = MyClass();
lh = addlistener(c, 'b', 'PostSet',@(o,e)disp(e.EventName));
c.a = 1;
disp(c.b) 
```

正如你所看到的，'PostSet' 回调永远不会被执行。

* * *

## 编辑

在我看来，`SetObservable`真的应该设置为`a`not `b`。因为它`b`是只读的，只有在更改时才能`a`更改。现在该`PostSet`事件将通知我们两个属性都已更改。

使用我上面使用的相同示例，只需`SetObservable`从移动`b`到`a`。当然，现在您可以这样收听该事件：

```
lh = addlistener(c, 'a', 'PostSet',@(o,e)disp(e.EventName)); 
```

* * *

## 编辑#2

对不起，我没有注意到你有组合（BClass 有一个 AClass 的实例作为私有属性）。

考虑这个可能的解决方案：

### A类.m

```
classdef AClass < handle
    properties (SetObservable)
        a                        %# observable property
    end
end 
```

### B类.m

```
classdef BClass < handle
    properties (Access = private)
        aClassInst               %# instance of AClass
        lh                       %# event listener on aClassInst.a
    end
    properties (Dependent, SetAccess = private)
        b                        %# dependent property, read-only
    end
    events (ListenAccess = public, NotifyAccess = private)
        bPostSet                 %# custom event raised on b PostSet
    end
    methods
        function this = BClass(aClass)
            %# store AClass instance handle
            this.aClassInst = aClass;
            %# listen on PostSet event for property a of AClass instance
            this.lh = addlistener(this.aClassInst, 'a',  ...
                'PostSet', @this.aPostSet_EventHandler);
        end
        function val = get.b(this)
            val = this.aClassInst.a;
        end
    end
    methods (Access = private)
        function aPostSet_EventHandler(this, src, evt)
            %# raise bPostSet event, notifying all registered listeners
            notify(this, 'bPostSet')
        end
    end
end 
```

基本上我们将`a`AClass 的属性设置为可观察的。

接下来在 BClass 的构造函数中，我们为传递的 AClass 实例注册一个侦听器，以侦听属性`a`更改。在回调中，我们通知监听器这个对象`b`也发生了变化

由于我们无法真正`PostSet`手动引发，我创建了一个自定义事件`bPostSet`，我们在之前的回调函数中引发了该事件。您始终可以自定义传递的事件数据，请参阅[文档](http://www.mathworks.com/help/techdoc/matlab_oop/brb6gnc.html#brb6i_k)以了解如何。

这是一个测试用例：

```
%# create the objects
a = AClass();
b = BClass(a);

%# change property a. We will not recieve any notification
disp('a.a = 1')
a.a = 1;

%# now lets listen for the 'bChanged' event on b
lh = addlistener(b, 'bPostSet',@(o,e) disp('-- changed'));

%# try to change the property a again. We shall see notification
disp('a.a = 2')
a.a = 2;

%# remove event handler
delete(lh)

%# no more notifications
disp('a.a = 3')
a.a = 3; 
```

输出是：

```
a.a = 1
a.a = 2
-- changed
a.a = 3 
```

请注意，当我们注册我们的侦听器时，我们只与 BClass 实例交互。当然，由于所有类都派生自`handle`类，因此实例`a`和私有属性`aClassInst`都引用同一个对象。因此，任何更改都会`a.a`立即反映在 上`b.aClassInst.a`，这会导致内部`aPostSet_EventHandler`执行，进而通知所有注册的侦听器到我们的自定义事件。**

# ios - iOS：如何让 IAP 沙箱忘记错误的登录名？

> ID：11652269
> 
> 赞同：1
> 
> 时间：2012-07-25T14:40:25.393
> 
> 标签：ios, sandbox, in-app-purchase

在设置 IAP 沙箱以测试我的应用程序时，我遵循了创建新沙箱登录的冗长过程，但在过程结束时我犯了一个错误。一个屏幕要求我确认我的登录名/密码，但没有说明它想要什么登录名，我（错误地）提供了我正常的 Apple 登录名和密码。它拒绝了它说“不是沙盒登录”之类的东西。但是现在每次我的应用程序登录到沙箱时，它都会弹出一个登录对话框，其中用户名已经填写，密码字段为空白。但它填写了错误的用户名。我不知道它是从哪里获得该用户名的。我确保我已经退出了我能想到的所有内容（iCloud、商店和游戏中心），但它仍然知道那个用户名。我重新启动了手机，但这并没有帮助。

如何让 IAP 沙盒忘记错误的用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:45:25.803

您需要进入设备上的**设置**，然后进入**商店**，然后点击显示**Apple ID 的位置：your@email.com**。然后，您应该会看到**Sign Out**选项。

# sql - 以 SQL 中的日期参数为中心以实现 WoW 增长

> ID：11652276
> 
> 赞同：3
> 
> 时间：2012-07-25T14:40:46.737
> 
> 标签：sql, reporting-services, parameters, pivot

我正在尝试在 SSRS 报告中衡量和显示每周的增长。

我正在尝试结合使用 SQL 中的数据透视函数和参数来轻松检索我在 SQL 中需要的数据，而无需在 SSRS 中添加过于复杂的公式和矩阵。

我试过的公式是：

```
SELECT     category, COALESCE (sum([@wedate]), 0) AS currentweek, COALESCE (sum([@wedate-7]), 0) AS previousweek
FROM OfficeProduction 
PIVOT (sum(amount) FOR wedate IN ([@wedate], [@wedate-7])) AS p
WHERE     category = 'Revenue'
GROUP BY category 
```

当我尝试将其保存为存储过程时，我收到错误，以及当我将其直接插入 SSRS 中的数据集框时。

我已经测试了参数的插入值

```
SELECT     category, COALESCE (sum([7/7/12]), 0) AS currentweek, COALESCE (sum([6/30/12]), 0) AS previousweek

FROM OfficeProduction 

PIVOT (sum(amount) FOR wedate IN ([7/7/12], [6/30/12])) AS p
WHERE     category = 'Revenue'
GROUP BY category 
```

我得到了适当的结果......所以我感觉很接近，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:57:03.343

听起来您需要动态 SQL 来传递参数并使用参数值执行最终语句。这是一个应该可以工作的简短快速脚本：

```
create table t
(
    id int,
    wedate datetime,
    amount int
)

insert into t values (1, '2012-07-07', 50)
insert into t values (2, '2012-06-30', 25)
insert into t values (3, '2012-07-07', 75)
insert into t values (4, '2012-06-30', 25)

DECLARE @wedate datetime
DECLARE @wedateP datetime
declare @sql varchar(max)

DECLARE @wedateCol varchar(10)
DECLARE @wedatePCol varchar(10)

set @wedate = '2012-07-07'
set @wedateP = DateAdd(d, -7, @wedate)

set @wedateCol = Convert(char(10), @wedate, 101)
set @wedatePCol = Convert(char(10), @wedateP, 101)

set @sql = 'select * FROM t
            PIVOT
            (
                sum(amount)
                for wedate in ([' + @wedateCol + '], [' + @wedatePCol +' ])
            )p '

exec(@sql)

drop table t 
```

它在一个单独的参数中创建前一周的值，然后将这些值转换为 PIVOT 的文本值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:57:53.143

我认为问题出在@wedate-7。第二列名称是 [7/7/12-7]。

计算 @wedate_prev 并在查询中使用它。

计算看起来像：

```
select convert(varchar(255), dateadd(d, -7, @wedate), 101) 
```

或者，更好的是：

```
select cast(month(dateadd(d, -7, @wedate)) as varchar(2))+'/' +
       cast(day(dateadd(d, -7, @wedate)) as varchar(2))+'/'+
       cast(year(dateadd(d, -7, @wedate))%100 as varchar(2)) 
```

# sql-server - 在 Visual Studio 中将架构对象部署到两个不同数据库的最佳方法是什么？

> ID：11652281
> 
> 赞同：0
> 
> 时间：2012-07-25T14:40:59.557
> 
> 标签：sql-server, visual-studio

我们有两个数据库，A 和 B。A 包含也应该部署到 B 的表；但是，应始终将 A 视为这些表的主控表。我们不想复制模式对象脚本。我们不想简单地从 B 中引用 A 的表——它们需要是单独的、重复的表。

据我所知，有两种方法可以实现这一点：

1.  部分项目：将共享模式对象导出到部分项目（.files）文件中，并将其导入到 B 的数据库项目中

2.  将共享模式对象文件作为链接添加到 B 的数据库项目中。

这些都有一个缺点，您需要显式指定文件 - 您不能指定文件夹，这意味着任何时候需要共享的模式对象被添加到 A 的数据库项目中，然后需要再次运行部分项目导出，或者新文件添加为 B 项目的链接。

这些技术的优点和缺点是什么？有没有更好的方法来实现我可能错过的目标？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:33:53.683

[VS2012 RC 版本不支持](http://msdn.microsoft.com/en-us/library/hh266747%28v=vs.110%29.aspx)部分项目，这让我觉得我不应该使用它们。此外，似乎[SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx) (SSDT)中的[复合项目](http://feedproxy.google.com/~r/ssdtblog/~3/4AsOHVQJekA/composite-projects-and-schema-compare.aspx)可能是长期解决方案。

我发现可以通过手动编辑 dbproj 文件来链接到整个文件夹。例如：

```
<Build Include="..\SourceDatabase\Schema Objects\Tables\*.sql">
  <SubType>Code</SubType>
  <Link>Schema Objects\Tables\%(FileName).sql</Link>
</Build> 
```

这非常有效，因此在我们评估 SSDT 之前，它将是我们的首选解决方案。到目前为止，我发现它的主要缺点是它将包含源数据库文件夹中的所有文件，包括源数据库项目中未包含的文件。

# python - 有没有办法使用 python 附加一个转储的字典或一个转储的对象？

> ID：11652285
> 
> 赞同：0
> 
> 时间：2012-07-25T14:41:09.910
> 
> 标签：python, list, dictionary, append, dump

我有一本字典，可以说：

```
d = {"a": 1, "b": 2, "c": 3 } 
```

我想做的就是把这个字典转储到一个文件中，然后一点一点地附加我的程序生成的数据。我不想在程序运行期间将字典数据放在内存中。最后，我希望能够将此文件从另一个程序加载到 python 结构中。

有没有使用或其他 python 模块的解决`pickle`方案`json`？我知道您不能附加到泡菜文件中的转储对象。

我知道我可以做这样的事情：

```
d = pickle.load(open(fileName, 'rb'))
d.update(dictWithNewValues)
pickle.dump(d, open(fileName, 'wb')) 
```

[如此处](http://www.python-forum.org/pythonforum/viewtopic.php?f=3&t=20779)所述。但我想逐步做到这一点。我知道这样做可能很困难，因为字典有唯一的键，所以要附加它，应该知道当前键以避免冲突（具有相同键的条目..）。

那么，有没有办法在一个`list`或另一个 python 对象中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:44:16.430

假设您的字典的键都是字符串，我看到的最简单的选项是 Python 的[`shelve`](http://docs.python.org/library/shelve.html)模块。搁置的行为类似于持久字典，并且可以更新任何键。

另一个选项是[`anydbm`](http://docs.python.org/library/anydbm.html)模块，它还要求所有*值*都是字符串。

# python - 使用 Python 多处理降低执行速度

> ID：11652288
> 
> 赞同：3
> 
> 时间：2012-07-25T14:41:14.327
> 
> 标签：python, python-3.x

我在这里可能有点过头了，但我正在用 python 做一个小的生物信息学项目。我正在尝试并行化一个分析大量字符串集的程序（RAM 中约 2-3GB）。我发现当我有较小的字典时，多处理版本更快，但几乎没有什么好处，而且对于大字典来说通常更慢。我的第一个理论是内存不足只会减慢一切，而瓶颈在于交换到虚拟内存。但是，我在具有 4*48GB RAM 的集群上运行该程序，并且发生了同样的减速。我的第二个理论是对某些数据的访问被锁定。如果一个线程试图访问当前正在另一个线程中访问的引用，该线程是否必须等待？我已经尝试创建我想要操作的字典的副本，但这似乎非常低效。还有什么可能导致我的问题？

我的多处理方法如下：

```
def worker(seqDict, oQueue):
     #do stuff with the given partial dictionary
     oQueue.put(seqDict)
oQueue = multiprocessing.Queue()
chunksize = int(math.ceil(len(sdict)/4)) # 4 cores
inDict = {}
i=0
dicts = list() 
for key in sdict.keys():
    i+=1
    if len(sdict[key]) > 0:
        inDict[key] = sdict[key]
    if i%chunksize==0 or i==len(sdict.keys()):
        print(str(len(inDict.keys())) + ", size")
        dicts.append(copy(inDict))
        inDict.clear()

for pdict in dicts:
    p =multiprocessing.Process(target = worker,args = (pdict, oQueue)) 
    p.start()
finalDict = {}

for i in range(4):
    finalDict.update(oQueue.get())
return finalDict 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:25:08.660

正如我在评论中所说，正如 Kinch 在他的回答中所说，传递给子进程的所有内容都必须经过腌制和解除腌制才能在衍生过程的本地上下文中复制它。如果您使用`multiprocess.Manager.dict`for `sDict`（从而允许进程通过代理在其上创建的对象的服务器共享相同的数据）并在该 shared 中生成带有切片索引的进程`sDict`，则应该减少生成中涉及的序列化/反序列化序列子进程。尽管在使用共享对象的服务器通信步骤中，您仍然可能会遇到瓶颈。如果是这样，您将不得不考虑简化数据，以便您可以使用真正的共享内存`multiprocess.Array`或`multiprocess.Value`或查看`multiprocess.sharedctypes`创建自定义数据结构以在您的进程之间共享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:39:30.017

似乎“大型字符串集字典”中的数据可以重新格式化为可以存储在文件或字符串中的内容，从而允许您使用该`mmap`模块在所有进程之间共享它。如果每个进程需要将数据转换回其他更优选的形式，它可能会产生一些启动开销，但是可以通过向每个进程传递一些指示它们应该在共享内存中的整个数据集的哪个子集上进行工作的信息来最小化，并且只重构该过程所需的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:02:20.143

通过队列传递的每个数据都将使用 pickle 进行序列化和反序列化。如果您传递大量数据，我想这可能是一个瓶颈。

您可以减少数据量，利用共享内存，在 ac 扩展中编写多线程版本，或者尝试使用 python 的多线程安全实现（可能是 jython 或 pypy；我不知道）的多线程版本。

哦，顺便说一句：您使用的是多处理而不是多线程。

# entity-framework - 为什么“DbContext.SaveChanges()”不抛出“DbUpdateConcurrencyException”

> ID：11652290
> 
> 赞同：3
> 
> 时间：2012-07-25T14:41:19.607
> 
> 标签：entity-framework

我正在尝试使用 POCO `DbContext`，但不明白如何触发乐观并发异常。当我`DbContext.SaveChanges()`在它应该并发失败的时候调用时，它返回零而不是抛出`DbUpdateConcurrencyException`或`OptimisticConcurrencyException`就此而言。

目前还不清楚应该扔哪个（大概是前者），但我已经详细阅读过

*   [在 EF 4.1 第 9 部分中使用 DbContext：乐观并发模式](http://blogs.msdn.com/b/adonet/archive/2011/02/03/using-dbcontext-in-ef-feature-ctp5-part-9-optimistic-concurrency-patterns.aspx)

以及许多文章，找不到任何可以解决这种情况的东西。我需要明确做些什么来生成异常吗？

请注意，我的 POCO 类和`DBContext`派生类是由“EF 4.x DBContext Generator”自动生成的，并且正在更新的字段的“并发模式”设置为“固定”（尽管我认为这对 POCO 没有任何影响环境）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:52:57.950

如果您在不同的线程中或在另一个线程中创建上下文的两个实例，那么您可能会获得 DbUpdateConcurrencyException。IE

```
using (var db = new myContext())
{
    db.PocoClass.Add(someNewOrUpdatedObj);

    using (var db2 = new myContext())
    {
        db2.PocoClass.Add(someNewOrUpdatedObj);
        db2.SaveChanges();
    }

    db.SaveChanges(); //DbUpdateConcurrencyException thrown here
} 
```

# javascript - 插入查询中的问题——sqlite Phonegap

> ID：11652299
> 
> 赞同：0
> 
> 时间：2012-07-25T14:41:32.377
> 
> 标签：javascript, android, cordova

我正在使用 Javascript 在 Android/Phonegap 中开发应用程序。我已经在 sqlite 中尝试了插入查询`Not Exists`。

这是我的代码：

```
var name='aaaaa';
tx.executeSql('INSERT INTO Demo(Id,Name) SELECT ('1','+name+') WHERE
  NOT EXISTS (SELECT 1 FROM Demo WHERE Id='1')'); 
```

当我给一个列名时，它工作正常。但是当我给出两列或更多列（例如：id、name、address）时，它就不起作用了。请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:47:47.967

当您提供更多列时，您还需要提供更多值。这些值来自 SQL 语句中的 Select 子句。您需要与插入中的列相同数量的值：

```
INSERT INTO Demo(Id,Name, Address) SELECT ('1','+name+', '+address+') WHERE NOT EXISTS (SELECT 1 FROM Demo WHERE Id='1') 
```

如果这不能解决您的问题，请发布不起作用的 SQL。

# apache - mod_rewrite 两个方向？

> ID：11652303
> 
> 赞同：0
> 
> 时间：2012-07-25T14:41:56.030
> 
> 标签：apache, .htaccess, mod-rewrite, apache2

现有页面称为`/foo/bar.php`。我所做的是重写，以便当用户键入时`/foobar`，它会加载`/foo/bar.php`（同时保留`/foobar`在 url 栏中）的内容

但我也想要相反的 - 当用户点击链接或类型`/foo/bar.php`时，我希望`/foobar`在 url 中有。原因是避免手动更改所有链接。

我怎么能做到这一点（如果可能没有http重定向，但通过一些重写魔法）？这两个规则有可能共存吗？

**编辑**- 在第一次回复之后，我意识到我对问题的描述不正确。`/foobar`不应该是 , of 的串联`foo`，`bar`而是`/foo/bar.php`任意字符串 ( `/whatever`)。

**编辑2：**

我现在`RewriteRule ^whetever/?$ /foo/bar.php [L]`在`/ .htaccess`. 然后我`RewriteRule bar\.php$ /whetever [R=302,L]`在`/foo .htaccess`. 问题是它是一个循环引用并且失败了。

谢谢，

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:18:32.740

```
RewriteEngine On

RewriteCond %{REQUEST_URI} ^/foo/[^/]+\.php$
RewriteCond %{IS_SUBREQ} !true
RewriteRule ^/foo/([^/]+)\.php$ /foo$1 [R,L]

RewriteCond %{REQUEST_URI} ^/foo[^/]
RewriteRule ^/foo(.*) /foo/$1.php [L] 
```

第一部分匹配`/foo/something.php`并将它们转换为`/foosomething`，但**前提是它不是子请求**。

第二部分接受 any`/foosometing`并将其转换为`/foo/something.php`, 通过**子请求**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:42:27.603

您可以尝试匹配`%{THE_REQUEST}`并仅在实际请求针对 php 文件时才进行重定向：

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /foo/bar\.php
RewriteRule bar\.php$ /whatever [R=302,L]

RewriteRule ^whatever/?$ /foo/bar.php [L] 
```

# php - AJAX 更新为表单后缺少 POST 参数

> ID：11652306
> 
> 赞同：0
> 
> 时间：2012-07-25T14:42:04.170
> 
> 标签：php, ajax, forms, prototypejs

我有一个使用 PHP & Prototype JS 构建的应用程序。我有两个链接的选择框，它们构成更大表单的一部分。当用户更改第一个选择框中的值时，会触发 Prototype Ajax Updater 请求以获取要在第二个选择框中显示的值列表：

```
landlordId = $F('landlord_id');
branchId = $F('branch_id');
new Ajax.Updater('landlord_branches_div', baseUrl+"/landlord/getLandlordBranches", {
    method:'post', postBody:'landlord_id='+landlordId +'&branch_id='+ branchId,
}); 
```

这将返回一个填充到第二个选择框中的 HTML 块，例如（甚至可以看到这是通过 Firebug 返回的内容）：

```
<select name="branch_id" id="branch_id" >
    <option value="all" selected="selected">All Branches</option>
    <option value="99" selected>HORDEN</option>
</select> 
```

但是，当在上面的 ajax 请求之后提交表单（通过常规表单提交）时，帖子中缺少 branch_id（在第二个选择框中设置）。如果刚刚提交了加载的初始页面而没有在第二个选择框上触发任何 ajax 更新，则它出现在帖子 OK 中。

具有讽刺意味的是，它在 IE 中运行良好，但在 Chrome 或 Firefox 中无法运行。

如果有人能对此有所了解，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:07:20.157

尝试：

```
 landlordId = $F('landlord_id');
branchId = $F('branch_id');
new Ajax.Updater('landlord_branches_div', baseUrl+"/landlord/getLandlordBranches", {
    method:'post',
    parameters:{ landlord_id: landlordId, branch_id: branchId}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:28:56.117

如果我没有弄错，那么你有 2 个选择框，第二个选择框选项将由 ajax 更新程序填充，对吗？尝试这个 ：

这是 html 结构（您的可能与此不同）：

```
<form id="form_id">
   <div id="landlord_div">
       <select id="landlord_id" name="landlord_id" onchange="ajaxcall()">
           <option value=1></option>
           <option value=2></option>
       </select>
   </div>
   <div id="landlord_branches_div">
   </div>
</form> 
```

只需确保您的元素位于 Form 元素下。接下来是 ajax 更新脚本：

```
<script type="text/javascript">
    var ajaxcall = function() {
       new Ajax.updater('landlord_branches_div', 'your_ajax_url', {
            method:'post',
            parameters:'landlord_id='+$F('landlord_id'),
       });
    }
</script> 
```

由于此 ajax 调用用于显示第二个选择框（分支选择器），因此您无需在此处发布 branch_id。让我知道这是否适合您。

# java - Junit 4 套件被忽略（Eclipse 和 Maven）

> ID：11652308
> 
> 赞同：2
> 
> 时间：2012-07-25T14:42:07.110
> 
> 标签：java, eclipse, maven, junit

我有 2 个测试类和一个初始化一些公共资源的套件。所有类中都有用注释的方法`@BeforeClass`- 套件和两个测试类，并且`@AfterClass`仅在套件中。

当我将西装作为 Eclipse 的单独测试类运行时，它工作正常，但是当我尝试运行项目中的所有测试时，顺序无效。Eclipse 出于某种原因首先尝试运行测试（由于资源尚未初始化而失败），然后才运行套装本身。Maven 似乎也忽略了这套西装。如何配置 Maven 和 Eclipse 以正确的顺序运行测试（首先是套件），而不是从套件外部运行这些测试？

这不是代码重复的问题。问题在于无法快速连续初始化和销毁​​的资源。这就是为什么我需要一个只初始化资源一次的套件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:00:07.590

将带有@BeforeClass 和@AfterClass 的代码放在每个测试类中。

如果您有许多类要测试，请将测试套件抽象化，并确保所有需要 tre 逻辑的类都继承自测试套件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:16:55.163

由于多种原因，您使用套件进行拆解会导致您出现问题，但特别是您无法预测 Eclipse（或 Maven）执行测试的顺序这一事实。有关更全面的解释，请参阅我对[Has JUnit4 是否开始支持测试排序的回答？是故意的吗？](https://stackoverflow.com/questions/7845929/has-junit4-begun-supporting-ordering-of-test-is-it-intentional/7846712#7846712)，但是由于 Eclipse 和 maven 是通过反射（注释）来查找类的，所以您不能保证以什么顺序找到这些类。[* 你可以使用 maven 和 runOrder，见下面的第 3 点]

Eclipse（和 Maven）像对待测试一样对待套件，它是通过相同的机制找到和运行的，并且它们的执行顺序高度依赖于 JVM。

因此，如果您有套件 A（包含测试 B 和 C）和测试 D，那么您将执行以下操作（以不可预知的顺序）：

```
A (which will execute B & C)
B
C
D 
```

一般来说，您应该尝试保持对称，在同一个地方进行设置/拆卸。

因此，您有以下选择：

1.  仅使用@BeforeClass/@AfterClass（或更好的@ClassRule、ExternalResource），并删除您的测试套件。这是您最干净的选择，因为您正在为每个测试类进行设置。
2.  仅从 Eclipse 运行测试套件，并使用[Maven Surefire Includes/Excludes](http://maven.apache.org/plugins/maven-surefire-plugin/examples/inclusion-exclusion.html)在 Maven 中执行相同操作。请注意，如果您只运行过测试套件，那么设置最好在套件中完成，而不是在每个类中完成。但是，这在从 Eclipse 运行单个测试时会出现问题。
3.  按特定顺序运行测试。这不能在 Eclipse 中完成，但可以在 Maven 中完成，请参见 [surefire:test runOrder](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#runOrder)。你必须有一些命名约定。
4.  使用[TestNG](http://testng.org/doc/documentation-main.html)，它明确支持类的排序，并且可能更容易使用要运行的类列表进行设置，但您的设置/拆卸仍然会遇到同样的问题。

# java - '.' 时跳到 Eclipse JFace 对话框中的下一个字段 按下

> ID：11652312
> 
> 赞同：1
> 
> 时间：2012-07-25T14:42:19.200
> 
> 标签：java, swt, jface

我有一个 Eclipse JFace ，里面`Dialog`有几个`Text`字段。当用户`.`在文本字段中按下键时，我希望它表现得好像已按下 Tab 键并将焦点发送到下一个文本字段并`.`丢弃（想想输入 IP 地址）。

这如何最好地实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:55:37.340

以下做你想要的。基本上它会在按下时添加`KeyListener`和`FocusListener`到`Text`小部件并通过它们`.`循环：

```
public class TestClass
{
    private static int counter = 0;

    public static void main(String[] args)
    {
        Display display = Display.getDefault();
        Shell shell = new Shell(display);

        shell.setLayout(new FillLayout());

        /* These are the text fields */
        final Text textOne = new Text(shell, SWT.BORDER);
        final Text textTwo = new Text(shell, SWT.BORDER);
        final Text textThree = new Text(shell, SWT.BORDER);

        /* Save them in an arraylist */
        final ArrayList<Text> textFields = new ArrayList<Text>();
        textFields.add(textOne);
        textFields.add(textTwo);
        textFields.add(textThree);

        /* save their position as well (not optimal, you can think of an easier method) */
        final HashMap<Text, Integer> textFieldsMapping = new HashMap<Text, Integer>();
        textFieldsMapping.put(textOne, 0);
        textFieldsMapping.put(textTwo, 1);
        textFieldsMapping.put(textThree, 2);

        /* Define keylistener which takes care of using . as tab */
        KeyListener keyListener = new KeyListener() {

            @Override
            public void keyReleased(KeyEvent arg0) {
            }

            @Override
            public void keyPressed(KeyEvent arg0) {
                /* if '.' pressed */
                if(arg0.character == '.')
                {
                    /* ignore this action */
                    arg0.doit = false;

                    /* get next text field */
                    Text next = textFields.get(counter);

                    /* force focus on this text field */
                    next.setFocus();
                    next.forceFocus();
                }
            }
        };

        /* Define focuslistener which sets current position */
        FocusListener focusListener = new FocusListener() {

            @Override
            public void focusLost(FocusEvent arg0) {
            }

            @Override
            public void focusGained(FocusEvent arg0) {
                /* get current text field */
                Text current = (Text)arg0.getSource();

                /* get current position */
                int currentPosition = textFieldsMapping.get(current);

                /* set counter to next text field */
                counter = (currentPosition + 1) % textFields.size();
            }
        };

        /* add keylistener to text fields */
        textOne.addKeyListener(keyListener);
        textTwo.addKeyListener(keyListener);
        textThree.addKeyListener(keyListener);

        /* add focuslistener to text fields */
        textOne.addFocusListener(focusListener);
        textTwo.addFocusListener(focusListener);
        textThree.addFocusListener(focusListener);

        shell.pack();
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
    }
} 
```

# php - 使用 PHP 从 PDF 中提取签名

> ID：11652315
> 
> 赞同：4
> 
> 时间：2012-07-25T14:42:23.390
> 
> 标签：php, pdf, digital-signature

假设我有一个数字签名的 PDF 文档（已填写表格）。我需要找到一种使用 PHP 验证 PDF 文件的方法。

我知道我必须使用 function `openssl_verify($data, $signature, $pub_key_id)`。我需要 3 个参数（我有公共证书）。

如何从 PDF 文件中提取签名数据和签名本身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:48:26.683

您需要解析 PDF - 理论上，您可以编写自己的解析函数。但是，使用现成的东西可以节省大量时间。

[Apache 的 PDFBox](http://pdfbox.apache.org/)怎么样？您可以像任何其他 shell 脚本一样执行它，或者使用一些[PHP/Java 桥接器](http://php-java-bridge.sourceforge.net/pjb/)。

如果您决定采用手动方式，请参阅[PDF 规范](http://www.adobe.com/devnet/pdf/pdf_reference.html)以了解实现解析器的方法 - 您应该能够忽略任何复杂的部分并通过查找 startxref 来找出签名。

还有像[VersyPDF.PHP](http://www.sybrex.com/products/development/versypdf/versypdf_php/)这样的专有解决方案，但这些对你的工作来说可能有点矫枉过正（但从好的方面来说，你可能会使用评估版本，因为你不关心水印输出）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T17:25:39.720

要提取数据和签名，您可以在 PDF 的 /ByteRange 字段中使用数字。它有 4 个数字作为 /ByteRange[abcd]。签名是从 b(th) 字节到 c(th) 字节，剩下的是数据。在 PHP 中，您可以使用 stream_get_contents() 函数按流获取内容。

# parsing - Scala PacktRat 解析器将运算符限制为一个

> ID：11652317
> 
> 赞同：2
> 
> 时间：2012-07-25T14:42:29.747
> 
> 标签：parsing, scala

目前我在 Scala 2.9.2 中使用 Scala PackratParsers 产品如下所示：

```
 lazy val andExpression: PackratParser[Expression] = equalityExpression | expression ~ "&" ~ expression ^^ {
      case x ~"&"~y => AndExpr(x,y)
    }

  lazy val orExpression: PackratParser[Expression] = andExpression | ( expression ~ "|" ~ expression ) ^^ {
      case x ~"|"~y => OrExpr(x,y)
    } 
```

它适用于以下输入

```
"a & b", "a | c", "(a & b) | c" 
```

但是，我刚刚发现我的解析器太贪婪了。

```
"a && b", "a &&& b", "a ||||| b" 
```

它解析得很好。我相信我只是错过了组合器上的显式匹配器计数。确切地说是什么`e ~ "&".{1} ~ e`？如何只匹配一个运算符的出现，仅此而已？

我正在编写的解析器将 Expression 类似于 XPath

```
lazy val absolutePath: PackratParser[NodePath] = "/" ~ relativePath ^^ {
    case "/" ~ rel => NodePath( rel.nodeExpr, true );

  }  

  lazy val relativePath: PackratParser[NodePath] = repsep( nodeExpression , "/" ) ^^ {
    case x => 
        if ( debug) printf("x=%s NodePath\n",x ); 
        NodePath( x , false ) 
```

你是对的。

```
 lazy val nodeExpression: PackratParser[Token] = qname | variable | step 

   lazy val expression = orExpression | nodeExpression | variable | literal | function | ... 
```

既然你可以有空`NodePath( List[QName]() )`，那么“是的！” 表达式是空的，因此“x &”和“& x”被成功解析。因此我的解析器显得贪婪。

让我重新表述这个问题，我如何确保`relativeExpression`至少包含一个`QName`？

本质上，字符串集`( "x" , "/x", "x/y", "/x/y", ... )`应该是有效的 XPath 类表达式，但不是`""`？;-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T22:33:31.417

`"&"`并且`"|"`只匹配一个字符。我能想到的唯一解释是它`expression`可以是空的，也可以是，它本身`&`或`|`.

# powershell - 调用 Powershell 函数

> ID：11652318
> 
> 赞同：1
> 
> 时间：2012-07-25T14:42:33.297
> 
> 标签：powershell

我是 Powershell 新手，无法调用脚本文件中包含的函数。

谁能告诉我如何做到这一点。

我有一个定义如下的函数：

```
 function Install-BizTalkApplicationTest
{

 param(
  [Parameter(Position=0,Mandatory=$true,HelpMessage="Msi file should be existing")]
  [ValidateScript({Test-Path $_})]
  [Alias("msi")]
  [string]$MsiFile,

  [Parameter(Position=1,HelpMessage="Path wherein the resource file will be installed")]
  [Alias("path")]
  [string]$ApplicationInstallPath,

  [Parameter(Position=2,Mandatory=$true,HelpMessage="Only valid parameters are Local,Dev,Test and Prod")]
  [Alias("env")]
  [ValidateSet("Local","Dev","Prod","Test")]
  [string]$Environment,

  [bool]$BTDeployMgmtDB=$true,
  [bool]$SkipUndeploy=$true
  )

  Write-Host "param MsiFile = {0}" -f $MsiFile

 } 
```

此函数包含在名为 TestScript.ps1 的文件中

我打开一个 Powershell 命令窗口并输入 .\Testscript1.ps1。我没有得到任何反馈，只是转到下一个 PS> 行。

所以我尝试通过输入函数名Install-BizTalkApplicationTest来执行。然后我收到错误“术语 '.\Install-BizTalkApplicationTest' 未被识别为 cmdlet、函数、sxript 文件或可运行程序的名称”

谁能建议如何调用脚本文件中包含的函数（带参数）？

谢谢，罗伯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:47:59.230

要加载脚本文件，您必须在前面加上`.`. 所以，全面来说，`. .\Testscript1.ps1`。

# java - MySQL Java 国际字符（UTF-8）编码

> ID：11652323
> 
> 赞同：2
> 
> 时间：2012-07-25T14:42:43.250
> 
> 标签：java, mysql, jdbc, character-encoding, utf

我正在尝试通过包含一些国际字符的 Java JDBC 将一些数据插入 mysql DB。

```
INSERT INTO my_table (`name`, `lat`, `long`, `label`) VALUES('Ädelfors folkhögskola', '57.43611145019531', '15.19722175598145', 'Ädelfors folkhögskola') 
```

如果我直接从 mysqlworkbench、phpmyadmin 等使用它，这个查询工作得很好，但是当我尝试使用 java JDBC 时，国际字符完全乱码

```
Ädelfors folkhögskola =>  ?��delfors folkh??gskola 
```

到目前为止我尝试过的解决方案包括

```
jdbc:mysql://server/database?characterEncoding=UTF-8

Setting - Dfile.encoding=UTF-8
Both my database and table are encoded as utf8 - default collation 
```

这是转储`"show variables like '%char%'"`

```
character_set_client - utf8 
```

`character_set_connection - utf8`

`character_set_database - utf8`

`character_set_filesystem - binary`

`character_set_results - utf8`

`character_set_server - latin1`

`character_set_system - utf8`

`character_sets_dir - /usr/share/mysql/charsets/`

我尝试过同时使用 preparesStatements 和普通 Statement

我知道有很多类似的问题，我已经提到了其中的大部分，但可以找到解决方案。

有关环境的一些信息... OS - Mac osx 10.6.8 IDE - netbeans

在 ubuntu 上运行的 mysql 5.5.23

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:43:12.000

如果您在 java 源文件或属性文件中键入查询，则您使用的是 utf-8 编辑器。
如果您使用的是 eclipse（Preferences>General>Workspaces 并设置文本编码）

# php - 为什么我的 curl 请求永远不会停止？

> ID：11652324
> 
> 赞同：0
> 
> 时间：2012-07-25T14:42:43.787
> 
> 标签：php, curl

我想在执行 php 文件时获得 2 年的数据。但问题是，curl 请求永远不会因为一次发生而停止，如果我把它结束：

```
curl_setopt($ch, CURLOPT_TIMEOUT, 30); 
```

它的工作，但我等待 30 秒，在我的导航器中，我等待几秒来执行文件，为什么我的脚本永远不会停止？

编码 ：

```
<?php
  $dateDeb = '2010-07-23';
  $dateFin = '2012-07-23';

  $debut_mois = 07;
  $debut_jour = 23;
  $debut_annee = 2010;
  $fin_mois = 07;
  $fin_jour = 23;
  $fin_annee = 2012;
$dates=array();
   $debut_date = mktime(0, 0, 0, $debut_mois, $debut_jour, $debut_annee);
   $fin_date = mktime(0, 0, 0, $fin_mois, $fin_jour, $fin_annee);

    for($i = $debut_date; $i <= $fin_date; $i+=86400)
    {
            $dates[]=date("Y-m-d",$i);
    }

foreach($dates as $date){

    $cron1='http://ndd.com/admin/api/xiti/bot-lien_sponsorisees/'.$date;
    $cron2='http://ndd.com/admin/api/xiti/bot-affiliation/'.$date;
    $cron3='http://ndd.com/admin/api/xiti/bot-analytics/'.$date;

    echo $date." : EN COURS ... ";

    $ch = curl_init(); 
    curl_setopt($ch, CURLOPT_URL, $cron1); 
    curl_setopt($ch, CURLOPT_USERPWD, 'user:pass');
   // curl_setopt($ch, CURLOPT_TIMEOUT, 30);
    curl_exec($ch); 
    curl_close($ch);

    $ch = curl_init(); 
    curl_setopt($ch, CURLOPT_URL, $cron2); 
    curl_setopt($ch, CURLOPT_USERPWD, 'user:pass');
    //curl_setopt($ch, CURLOPT_TIMEOUT, 30);
    curl_exec($ch); 
    curl_close($ch);

    echo $date." : OK \n";

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:46:16.393

它永远不会停止，因为您循环了 2 年的日期，即 730 天。

因此，您发出 730 个 CURL 命令，并且超时可等于 730 * 30 = 21900 最大处理秒数。

实际上，我看到您正在发出两个 CURL 命令，因此 21900 * 2 = 43800 最大处理秒数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:46:38.087

你有两年的日子。其中每一个都会发出一个*新*请求，而新请求不知道旧请求或这些请求花费了多长时间。如果要在一定时间后停止执行，可以使用[`set_time_limit`](http://php.net/manual/en/function.set-time-limit.php)：

```
set_time_limit(30); 
```

# ruby-on-rails - 如何使用 capistrano 将多个应用程序部署到同一台服务器？

> ID：11652334
> 
> 赞同：1
> 
> 时间：2012-07-25T14:43:02.360
> 
> 标签：ruby-on-rails, nginx, capistrano, passenger

我刚刚用 phusion 乘客和 nginx 完成了我的服务器的设置，并配有 ruby​​ on rails，它们都在流畅地运行。现在我可以了，而且我已经使用 capistrano 部署了一个应用程序，并且我可以正常工作。

我的问题是我想在不同的域上托管多个应用程序，并在同一台服务器上使用 capistrano 部署它们。这甚至可能还是我只是希望太多？我似乎在这方面找不到任何东西，因此感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:15:51.173

如果您的应用程序只是相互不依赖的独立应用程序（即您单独部署它们），那么只需像往常一样使用 capistrano 部署它们。

默认情况下，capistrano 将部署到一个文件夹，例如，`/var/www/app_name`只要所有应用程序都配置了不同的名称，`app_name.rb`它们就会幸福地不知道彼此。

您可能需要对您可能使用的某些服务更加小心，例如，您可能希望命名您的内存缓存键（或运行单独的内存缓存实例）以避免应用程序之间的冲突。

# php - CakePHP – Database structure and models

> ID：11652336
> 
> 赞同：0
> 
> 时间：2012-07-25T14:43:06.447
> 
> 标签：php, cakephp

I'm building my very first and simple app, but because I'm new to web-development I have some questions on how to properly organize my DB structure (and models).

One of my pages is an actor filmography so I need to display:

Year, director, description etc. And also I need to display a few pictures related to current film.

As far as I know I need to make 2 tables in my database. First one with ID and all other fields (Year, director, description). And second table with film ID and some fields for images file names. It is a right way?

But I don't understand how to link this tables together and when retrieve my data from this two tables and send it to the View. I read a cookbook but it's not simple for a newbie.

Can someone please provide me an example related to my requirements?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:24:47.727

Man, search and learn about Entity–Relationship models. This question has nothing to do with PHP or CakePHP.

Answering your question, You represent your data depending on what you want to achieve

## 1\. Actor has many pictures

As you said, there could be two tables: each one with an unique id also known as primary key (PK). And the second table with a "one to many" relationship (or 1:n), this table has also a foreign key (FK) that relates to the first one. So for example, actor with id=4 could have four pictures (id=1,2,5,9) but all of them with the foreign key (actor_id=4)

The structure would look like this:

```
Actors                        Pictures
----------------              -------------------
id (PK)                       id (PK)
name                          actor_id (FK)
address                       file_name
birth_date
... 
```

With this setup you have pictures related to the actor. But you talked about films, so you may need the second option.

## 2\. Actor has many films and these films have many pictures

Adding another table in between, called for example 'Film', you can relate the pictures to this table.

So you would have for example the same actor with id=4 and two films (id=2,6) both with the same relationship to the actor (actor_id=4) and the first film having two pictures (id=1,2 film_id=2) and the second film with four more pictures (id=3,4,5,6 film_id=6)

```
Actors                        Films                         Pictures
----------------              -------------------           -------------------
id (PK)                       id (PK)                       id (PK)
name                          actor_id (FK)                 film_id (FK)
address                       name                          file_name
birth_date                    year
... 
```

Did it help you?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T15:29:13.783

You're correct in assuming you'll need 2 tables. For easiest configuration, follow Cake's conventions. Tables are plural. We'll also use the automatically updated `created` and `modified` fields. Your tables will look something like this (add extra columns as needed):

**actors**

```
id
year
director
description
created # automatically filled in by cake
modified # automatically filled in by cake 
```

**images**

```
id
actor_id
path
created
modified 
```

Now, update your models to reflect the relationships. You have Actor hasMany Image here, and Image belongsTo Actor.

**/app/Model/Actor.php**

```
<?php
class Actor extends AppModel {
  public $hasMany = array('Image');
} 
```

**/app/Model/Image.php**

```
<?php
class Image extends AppModel {
  public $belongsTo = array('Actor');
} 
```

Since we've used Cake's conventions, it will automatically know the table, foreign keys, and pull the relationships when you do a `find()`.

We'll make a quick index action for your actors.

**/app/Controller/ActorsController.php**

```
<?php
App::uses('AppController', 'Controller');
class ActorsController extends AppController {
  public function index() {
    // get all actors and their images
    $this->Actor->recursive = 1;
    $actors = $this->Actor->find('all');
    // send to view as a variable named '$actors'
    $this->set('actors', $actors);
  }
} 
```

In your view, iterate through the actors and display information as you like! Here's an example of a very simple view that shows the actors name and first image in a table.

**/app/View/Actors/index.ctp**

```
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Image</th>
    </tr>
  </thead>
  <tbody>
<?php
foreach ($actors as $actor) {
  $name = $this->Html->tag('td', $actor['Actor']['name']);
  // show first image
  $img = $this->Html->image($actor['Image'][0]['path']);
  $image = $this->Html->tag('td', $img);
  echo $this->Html->tag('tr', $name.$image);
}
?>
  </tbody>
</table> 
```

99% of this work can be done by using Cake's `bake` shell. It will generate models, controllers, and views for you. Then you can go in and customize them as you like. I really recommend getting bake working as it will make your life easier and even provide you with best practices hints.

# design-patterns - 允许最多 K 个不匹配的模式匹配袋鼠方法

> ID：11652340
> 
> 赞同：3
> 
> 时间：2012-07-25T14:43:31.930
> 
> 标签：design-patterns, matching

我到处搜索，但没有找到关于袋鼠方法的良好、清晰的解释。只是我找到了一些ppts，但对我来说没用，因为我以前没有读过袋鼠方法。那些ppts是为了修改袋鼠方法。

如果有人可以提供有关袋鼠方法的阅读材料或视频教程链接，这将是一个很大的帮助。

提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T14:16:02.027

**令 T=t1t2...tn, P=p1p2...pm**

**k=# 允许的错误**

预处理 T$1P$2 的后缀树 [时间：O(nlog|Sigma| 通过 Weiner 算法构造后缀树) Sigma 是语言。

在我们刚刚创建的树上预处理 LCA。[时间：O(n)]

在所有节点上运行并在每个节点上写入它距根的高度。[时间：我们有 O(n) 个节点]

遍历所有后缀（=leaves）并为每个后缀 Si 初始化一个错误计数器并查询 h1=height(LCA(Si,P))，如果 h>=m 我们将 i 添加到解决方案中，否则：err++ 并且如果err<=k 继续检查 h2=height(LCA(Si[h1+1,n],P[h1+1,m]))。

[时间：遍历所有后缀 => O(n)，对于每个后缀运行最多 k+1 次 => O(kn)]

希望这会有所帮助...

衬套

# android - Galaxy Nexus 上 JellyBean 或 ICS 中的 Camera.Face 支持

> ID：11652341
> 
> 赞同：1
> 
> 时间：2012-07-25T14:43:39.293
> 
> 标签：android, face-detection

我一直在使用 API 14+ 的人脸检测功能。在 Galaxy Nexus 上的我的 4.1 (JellyBean) 上，似乎`Camera.Face.id, leftEye, rightEye, mouth`并不像`id`往常一样支持`-1`，所有其他的都是`null`. ICS 也是这样吗？我假设 GTalk 效果是在面部组件 API 的支持下完成的，也许它们会处理应用程序中面部组件的检测？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:22:37.093

根据[文档](http://developer.android.com/reference/android/hardware/Camera.Face.html#inhmethods)，Camera.Face.id 是一个可选字段，如果您的设备不支持，则返回 -1。返回 null 的其他字段也是如此。

**编辑：**

不，在 Galaxy Nexus 上构建的 ICS 不支持这些字段。我刚刚测试了它：

```
 08-01 11:31:13.102: D/CameraActivity(13786): Camera.Face.id: -1
 08-01 11:31:13.102: D/CameraActivity(13786): Camera.Face.rightEye: null
 08-01 11:31:13.102: D/CameraActivity(13786): Camera.Face.leftEye: null
 08-01 11:31:13.102: D/CameraActivity(13786): Camera.Face.mouth: null
 08-01 11:31:13.102: D/CameraActivity(13786): Camera.Face.score: 100 
```

# iphone - 使用 UISlider 将 UIImage 更改回原始图像的问题

> ID：11652345
> 
> 赞同：0
> 
> 时间：2012-07-25T14:43:46.013
> 
> 标签：iphone, xcode, uiimageview, uiimage, uislider

我有一个 UISlider，它会随着 UIImage 值的增加而增加其亮度。但是当我想降低亮度并将 UISlider 恢复到保存原始图像的值时，图像的亮度不会降低，并且它与 UISlider 的最后一个值保持相同。

代码如下

```
Slider1 = [[UISlider alloc]initWithFrame:CGRectMake(100, 350, 100, 100)];
[Slider1 addTarget:self action:@selector(Slider1Action:) forControlEvents:UIControlEventValueChanged];
Slider1.minimumValue = 0.0;
//slider.maximumValue = 50.0;
Slider1.continuous = YES;
[self.view addSubview:Slider1];

-(void)Slider1Action:(id)sender{
CGImageRef inImage = imageCollage.image.CGImage;
CFDataRef ref = CGDataProviderCopyData(CGImageGetDataProvider(inImage)); 
UInt8 * buf = (UInt8 *) CFDataGetBytePtr(ref); 
int length = CFDataGetLength(ref);

float value2 =  (1+Slider1.value);

for(int i=0; i<length; i+=4)
{
    int r = i;
    int g = i+1;
    int b = i+2;

    int red = buf[r];
    int green = buf[g];
    int blue = buf[b];

    buf[r] = SAFECOLOR(red*value2);
    buf[g] = SAFECOLOR(green*value2);
    buf[b] = SAFECOLOR(blue*value2);

}

CGContextRef ctx = CGBitmapContextCreate(buf,
                                         CGImageGetWidth(inImage), 
                                         CGImageGetHeight(inImage), 
                                         CGImageGetBitsPerComponent(inImage),
                                         CGImageGetBytesPerRow(inImage), 
                                         CGImageGetColorSpace(inImage),
                                         CGImageGetAlphaInfo(inImage));

CGImageRef img = CGBitmapContextCreateImage(ctx);

[imageCollage setImage:[UIImage imageWithCGImage:img]];
CFRelease(ref);
CGContextRelease(ctx);
CGImageRelease(img);} 
```

如何使用 UISlider 降低 UIImage 的亮度，以便再次获取原始图像？非常感谢您的帮助。PS-我不想为此使用 Apple 的 OpenGL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:01:48.217

您正在破坏性地设置图像中像素的值。您正在获取输入图像，更改像素亮度，然后下次使用该输出作为新输入。一旦你把它变亮，当你把它滑下来时，你就不能再取回这些信息了。

您需要将原始图像保留为源并将更改应用于该图像的副本，然后显示该副本。

# html - 换行符没有出现在 在 IE8 中

> ID：11652346
> 
> 赞同：0
> 
> 时间：2012-07-25T14:43:46.907
> 
> 标签：html, internet-explorer-8

这是我的html

```
<div style="width:100%;clear:both;"/> 
```

上面的空**div**在 IE6 和 IE7 中创建了一个换行符。在 IE8 中，它不会创建任何换行符。我不认为这个 div 的风格是问题。我找不到与此 Stackoverflow 相关的帖子。请澄清或指出我正确的帖子。

编辑：这是小提琴[http://jsfiddle.net/spsaravanaselvan/RuvHg/](http://jsfiddle.net/spsaravanaselvan/RuvHg/)的链接。我有两个文本框作为示例。在 IE7 标准文档模式下，文本框之间有一个小空间，但在 IE8 中没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:50:05.767

```
<br/> 
```

是您通常如何创建换行符，关闭这样的 div 也可能无效。'clear:both' 通常用于确保新元素低于浮动元素，不知道为什么将其用作新行。

# tinymce - 从 TinyMCE 弹出窗口插入/替换文本后，如何防止 WP 添加额外的行？

> ID：11652348
> 
> 赞同：1
> 
> 时间：2012-07-25T14:43:53.657
> 
> 标签：tinymce, wordpress

我正在构建一个在 TinyMCE 弹出窗口中有一个短代码管理员的 WP 插件。每当我完成时，它都会正确插入所有内容，但每次都会添加一个新行。

我的脚本与此非常相似：http: [//pastebin.com/RVXfrQL9](http://pastebin.com/RVXfrQL9)

`tinyMCEPopup.execCommand('mceReplaceContent', false, output);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:19:35.010

你是说[autop](http://codex.wordpress.org/Function_Reference/wpautop)吗？？

尝试 -

```
remove_filter( 'the_content', 'wpautop' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:18:01.357

我将引用的行更改为：

```
myeditorName.selection.setContent(output); 
```

它有效！

# math - 如何使用带有数学公式的对数似然相似度度量来计算相似度？

> ID：11652361
> 
> 赞同：4
> 
> 时间：2012-07-25T14:44:43.190
> 
> 标签：math, similarity

```
Item   101 102 103 104 105 106 107     Similarity to User1
user1   x   x   x                             0.9
user2   x   x   x   x                         0.84 
```

`x`表示该项目被选中

我想知道如何计算对数似然相似度？我知道 Mahout 可以解决它，但是我不知道它里面的代码，仍然对它的数学过程感到困惑。
我怎样才能得到 0.9 和 0.84？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:00:15.813

[https://builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/cf/taste/impl/similarity/package-summary.html](https://builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/cf/taste/impl/similarity/package-summary.html)

这提供了 2 个关于 LogLikelihoodSimilarity 的链接。如果这些没有帮助，那么您可以尝试反编译这些类并检查它的代码。

# php - INSERT .. 从多个表中选择多行

> ID：11652364
> 
> 赞同：0
> 
> 时间：2012-07-25T14:44:53.127
> 
> 标签：php, mysql, sql

我需要记录每天针对每个项目请求和发出的项目数量。`purchase_doc`表格是：

![purchase_doc 表](../Images/f2f82d83f51fc30642d33d6f9a73f511.png)

该`requested_items`表包含以下要求的项目：

![请求的项目](../Images/f01f890e73c3f64b176f135ac85c5ea2.png)

该`movement`表包含以下要求的项目：

![移动](../Images/5a335def1c0c0714533e649e4675443d.png)

需要的输出（要插入的数据）是：

![data_to_insert](../Images/65f686acc2984b58bcc3846f198f0e9f.png)

这样做的一种方法是从前 2 个查询中获取发布和请求的项目，然后针对每个项目 id 构建一个发布和请求的项目数组，然后将这些值插入 daily_movement 表中，如下所示：

```
SELECT n.item_id AS n__item_id, SUM(n.qty) AS qty
FROM requested_items n LEFT JOIN purchase_doc doc ON n.doc_id = doc.id 
WHERE (doc.type = 'Item Request' AND doc.created_at > DATE_SUB(NOW(), INTERVAL 24 HOUR)) 
GROUP BY n.item_id

SELECT n.item_id AS item_id, SUM(n.qty) AS qty
FROM movement n LEFT JOIN purchase_doc doc ON n.doc_id = doc.id 
WHERE (doc.type = 'Store Issue' AND doc.created_at > DATE_SUB(NOW(), INTERVAL 24 HOUR)) 
GROUP BY n.item_id 
```

从这些和其他选择中，我需要每天为每个项目插入一行，其中包含该项目的请求、问题等数量，以这种方式：

```
INSERT INTO daily_movement date, item_id, requested_qty, issued_qty VALUES ( NOW(), 23, 4, 5), ( NOW(), 25, 5, 5), ( NOW(), 113, 6, 8); 
```

但是会有太多的选择（因为我还需要每个项目执行其他活动），然后是插入。

我的问题是：是否可以通过单个 SELECT ... INSERT 语句来做到这一点。如果没有，有人可以建议一种更优雅的方式来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:14:48.110

我在想这个，但它可能过于简单：

```
INSERT INTO `daily_movement`
  (`date`, `item_id`, `requested_qty`, `issued_qty`)
SELECT NOW(), `r`.`item_id`, SUM(`r`.`qty`), SUM(`m`.`qty`)
  FROM `purchase_doc` `d`
  JOIN `requested_items` `r`
    ON `r`.`doc_id` = `d`.`id`
  LEFT JOIN `movement` `m`
    ON `m`.`doc_id` = `d`.`id`
WHERE
    (`d`.`type` = 'Item Request' OR `d`.`type` = 'Store Issue')
  AND
    `d`.`created_at` > DATE_SUB(NOW(), INTERVAL 24 HOUR)
GROUP BY `r`.`item_id` 
```

**编辑**

这是我的最终答案，`UNION`很难解决 MySQL 的不足`FULL OUTER JOIN`：

```
INSERT INTO `daily_movement`
  (`date`, `item_id`, `week_no`, `requested_qty`, `issued_qty`)
SELECT *
FROM (
  (
    SELECT COALESCE(`r`.`item_id`, `a`.`item_id`) AS `item_id`, CURDATE() AS `date`, NULL AS `week_no`, SUM(`r`.`qty`) AS `requests`, COALESCE(`a`.`issued`, 0) AS `issued`
    FROM `purchase_doc` `d`
    LEFT JOIN `requested_items` `r`
      ON `r`.`doc_id` = `d`.`id` 
    LEFT JOIN (
      SELECT `m`.`item_id`, SUM(`m`.`qty`) AS `issued`
      FROM `purchase_doc` `d`
      JOIN `movement` `m`
        ON `m`.`doc_id` = `d`.`id` 
      WHERE `d`.`type` = 'Store Issue'
        AND `d`.`created_at` > DATE_SUB(NOW(), INTERVAL 24 HOUR)
      GROUP BY `m`.`item_id`
    ) `a`
      ON `a`.`item_id` = `r`.`item_id`
    WHERE `d`.`type` = 'Material Requisition'
      AND `d`.`created_at` > DATE_SUB(NOW(), INTERVAL 24 HOUR)
    GROUP BY `r`.`item_id`
  ) UNION DISTINCT (
    SELECT COALESCE(`m`.`item_id`, `a`.`item_id`) AS `item_id`, CURDATE() AS `date`, NULL AS `week_no`, COALESCE(`a`.`requests`, 0) AS `requests`, SUM(`m`.`qty`) AS `issued`
    FROM `purchase_doc` `d`
    LEFT JOIN `movement` `m`
      ON `m`.`doc_id` = `d`.`id` 
    LEFT JOIN (
      SELECT `r`.`item_id`, SUM(`r`.`qty`) AS `requests`
      FROM `purchase_doc` `d`
      JOIN `requested_items` `r`
        ON `r`.`doc_id` = `d`.`id` 
      WHERE `d`.`type` = 'Material Requisition'
        AND `d`.`created_at` > DATE_SUB(NOW(), INTERVAL 24 HOUR)
      GROUP BY `r`.`item_id`
    ) `a`
      ON `a`.`item_id` = `m`.`item_id`
    WHERE `d`.`type` = 'Store Issue'
      AND `d`.`created_at` > DATE_SUB(NOW(), INTERVAL 24 HOUR)
    GROUP BY `m`.`item_id`
  )
  ORDER BY `item_id`
) `u` 
```

[http://sqlfiddle.com/#!2/3923d/13](http://sqlfiddle.com/#!2/3923d/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:49:34.160

[您可以在此处](http://www.w3schools.com/sql/sql_union.asp)或[此处](http://blog.sqlauthority.com/2007/06/08/sql-server-insert-multiple-records-using-one-insert-statement-use-of-union-all/)使用联合运算符在一次选择中获取所有结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:58:02.303

您可以使用这样的查询 -

*编辑：*

```
INSERT INTO daily_movement(date, item_id, requested_qty, issued_qty)
SELECT i.item_id, SUM(ri.qty) requested_qty, SUM(m.qty) issued_qty FROM
  (SELECT item_id FROM requested_items UNION SELECT item_id FROM movement) i
  LEFT JOIN (
    SELECT n.item_id, n.qty
    FROM requested_items n LEFT JOIN purchase_doc doc ON n.doc_id = doc.id 
    WHERE doc.type = 'Item Request' AND doc.created_at > DATE_SUB(NOW(), INTERVAL 24 HOUR)
  ) ri
  ON ri.item_id = i.item_id
  LEFT JOIN (
    SELECT n.item_id, n.qty
    FROM movement n LEFT JOIN purchase_doc doc ON n.doc_id = doc.id 
    WHERE doc.type = 'Store Issue' AND doc.created_at > DATE_SUB(NOW(), INTERVAL 24 HOUR)
  ) m
  ON m.item_id = i.item_id
GROUP BY
  i.item_id; 
```

# javascript - 让用户手动裁剪具有特定尺寸的图像作为输出

> ID：11652367
> 
> 赞同：0
> 
> 时间：2012-07-25T14:44:56.417
> 
> 标签：javascript, html, image, thumbnails, crop

我正在尝试在以下教程中找到一些插件：我希望我网站上的用户可以上传图像，该图像将用作缩略图，尽管缩略图具有特定的高度/宽度，因此应该裁剪图像。

虽然因为这些图像将是人自己的图像，但我不能简单地自动裁剪它。我需要一些东西，让用户可以选择使用图像的哪一部分。这样他们就可以选择他们的头部作为个人资料图像。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:10:39.177

在 php & [imagejpg](http://nl.php.net/imagejpeg)（使用 GD）中，你可以这样做：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $targ_w = $targ_h = 150;
    $jpeg_quality = 80;

    $src = 'upload/test.jpg';
    $img_r = imagecreatefromjpeg($src);
    $dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

    imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
            $targ_w,$targ_h,$_POST['w'],$_POST['h']);

    imagejpeg($dst_r, 'path/to/output.jpg', $jpeg_quality);

    exit;
} 
```

除了 GD，您还可以使用 ImageMagick 根据您发送回服务器的画布坐标进行服务器端处理。

但是......您也可以从画布发送原始数据..画布可以将jpg（客户端）渲染到，然后您对其进行base64编码并上传（再次，但这次是在画布中创建的缩略图）。

希望这可以帮助！

# java - RabbitMQ 获取消息发送确认

> ID：11652368
> 
> 赞同：0
> 
> 时间：2012-07-25T14:44:56.370
> 
> 标签：java, spring, rabbitmq, amqp

当我发送到队列时，是否可以在 RabbitMQ 中获取确认消息？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:18:12.077

您可能希望在[基本发布上使用](http://www.rabbitmq.com/releases/rabbitmq-java-client/v2.8.4/rabbitmq-java-client-javadoc-2.8.4/com/rabbitmq/client/Channel.html#basicPublish%28java.lang.String,%20java.lang.String,%20boolean,%20boolean,%20com.rabbitmq.client.AMQP.BasicProperties,%20byte%5B%5D%29)[返回侦听](http://www.rabbitmq.com/releases/rabbitmq-java-client/v2.8.4/rabbitmq-java-client-javadoc-2.8.4/com/rabbitmq/client/ReturnListener.html)器和强制标志

# jenkins - Email-ext Pre 脚本使用

> ID：11652369
> 
> 赞同：0
> 
> 时间：2012-07-25T14:45:03.193
> 
> 标签：jenkins, hudson, jenkins-plugins, hudson-plugins, email-ext

我如何编写一个指令来检查是否会因为上游项目原因（提交作业 A）而触发电子邮件。

如果确实触发了，我想取消在作业 B 中触发的电子邮件。我看到了一个取消变量。我想知道如何使用它进行检查和取消？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T23:46:06.620

您需要做的是找出当前构建的原因。构建通过“构建”变量提供给预发送脚本。

```
build.causes.each() { cause ->
  if(cause instanceof Cause.UpstreamCause) {
      cancel = cause.upstreamProject == 'commit-job A'
  }    
} 
```

如果上游项目是您感兴趣的项目，这应该将 cancel 变量设置为 true。cancel 变量由 email-ext 检索，如果为 true，则停止发送电子邮件。

# c# - C# 数据表到多维数组

> ID：11652370
> 
> 赞同：0
> 
> 时间：2012-07-25T14:45:03.537
> 
> 标签：c#, arrays, datatable

我有一个如下所示的数据表。我很难创建一种简单的方法来对我列出的行进行分组。我需要能够执行各种计算，例如对一个 id 的所有年份求和、对一年的所有 id 求和或类似的计算。我还需要系统地将一个 id 的所有年份和值分配给一组文本框、变量，或者以某种方式我可以逻辑地访问它们。我想我遇到的最大问题是确定如何转换数据表以及处理我需要做的事情的最佳方法是什么。

当前的

```
ID      Year        Value

1       2010        25
1       2010        25  
1       2009        30
1       2008        5   
1       2008        5       
1       2008        5       
2       2010        1
2       2010        4
2       2009        0
2       2008        25  
2       2008        25      
2       2008        25 
```

我想要的是

```
ID      Year        Value

1       2010        50
        2009        30  
        2008        15

2       2010        5
        2009        0
        2008        75 
```

我还不能提交答案，但这就是我想要的更多感谢大家的帮助。

```
 var Groups =
            from DataRow row in dataset1.datatable1.Rows
            group row by row["id"] into newGroup1
            from newGroup2 in
                (from row in newGroup1
                 group row by row["year"]).Distinct()
            group newGroup2 by newGroup1.Key;

        foreach (var outerGroup in Groups)
        {
           Console.WriteLine("Level = {0}", outerGroup.Key);
            foreach (var innerGroup in outerGroup)
            {
                Console.WriteLine("Data = {0}", innerGroup.Key);
                foreach (var innerGroupElement in innerGroup)
                {
                    Console.WriteLine("\t\t{0}", innerGroupElement["Value"]);
                }
            }
        } 
```

这给了我类似的东西：

```
ID:1
    Year:2008
        Value:15
    Year:2009
        Value:30
    Year:2010
        Value:50
ID:2
    Year:2008
        Value:75
    Year:2009
        Value:0
    Year:2010
        Value:5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:09:47.110

您可以使用`Linq-To-DataSet`和`Enumerable.GroupBy`：

```
var yearGroups = tbl.AsEnumerable()
    .GroupBy(r => new
    {
        ID = r.Field<int>("ID"),
        Year = r.Field<int>("Year")
    });

foreach (var yg in yearGroups)
{
    Console.WriteLine("ID:{0} Year:{1} Sum:{2}"
        , yg.Key.ID
        , yg.Key.Year
        , yg.Sum(r => r.Field<int>("Value")));
} 
```

输出：

```
ID:1 Year:2010 Sum:50
ID:1 Year:2009 Sum:30
ID:1 Year:2008 Sum:15
ID:2 Year:2010 Sum:5
ID:2 Year:2009 Sum:0
ID:2 Year:2008 Sum:75 
```

# c++ - 如何在结构/类中获取有关“当前类型”的信息？

> ID：11652371
> 
> 赞同：5
> 
> 时间：2012-07-25T14:45:07.110
> 
> 标签：c++, macros

是否有可能在`struct`内部获得“电流类型” `struct`？例如，我想做这样的事情：

```
struct foobar {
  int x, y;

  bool operator==(const THIS_TYPE& other) const  /*  What should I put here instead of THIS_TYPE? */
  {
    return x==other.x && y==other.y;
  }
} 
```

我试着这样做：

```
struct foobar {
  int x, y;

  template<typename T>
  bool operator==(const T& t) const
  {
    decltype (*this)& other = t; /* We can use `this` here, so we can get "current type"*/
    return x==other.x && y==other.y;
  }
} 
```

但它看起来很丑，需要支持最新的 C++ 标准，并且 MSVC 无法编译它（它因“内部错误”而崩溃）。

实际上，我只想编写一些预处理器宏来自动生成函数，例如`operator==`：

```
struct foobar {
  int x, y;
  GEN_COMPARE_FUNC(x, y);
}

struct some_info {
  double len;
  double age;
  int rank;
  GEN_COMPARE_FUNC(len, age, rank);
} 
```

但我需要知道宏内部的“当前类型”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:27:07.463

这个堆栈溢出 URL 指出 boost 库可以计算表达式的类型，但 C/C++ 本身不能：

[从对象中获取结构字段的名称和类型](https://stackoverflow.com/questions/2514401/getting-name-and-type-of-a-struct-field-from-its-object)

也有人问过类似的问题：

[如何向 C++ 应用程序添加反射？](https://stackoverflow.com/questions/41453/how-can-i-add-reflection-to-a-c-application)

要开始使用 typeof，请包含 typeof 标头：

```
#include <boost/typeof/typeof.hpp> 
```

要在编译时推断表达式的类型，请使用 BOOST_TYPEOF 宏：

```
namespace ex1
{
    typedef BOOST_TYPEOF(1 + 0.5) type;

    BOOST_STATIC_ASSERT((is_same<type, double>::value));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:27:22.340

实际上，您可以像这样使用 somethink 。

```
#define GEN_COMPARE_FUNC(type, x, y)\
template<typename type>\
bool operator ==(const type& t) const\
{\
    return this->x == t.x && this->y == t.y;\
}

struct Foo
{
    int x, y;
    GEN_COMPARE_FUNC(Foo, x, y);
}; 
```

我不知道如何使用var。以这种方式宏pars（我们需要抛出参数并比较this和t中的每个par，我不知道如何在宏中扩展参数）。

# android - 如何将活动中的共享应用程序按钮添加到 google+ 和 facebook？

> ID：11652372
> 
> 赞同：0
> 
> 时间：2012-07-25T14:45:15.263
> 
> 标签：android

我正在构建 android 应用程序，现在我已经完成了，但我想在 root 活动中添加共享按钮，用户可以将我的应用程序（从谷歌市场下载的链接）共享到 google+、facebook、twitter 和 linkin。

我该怎么做？

# 我的代码：

```
ImageButton sharingButton = (ImageButton) findViewById(R.id.share);
    sharingButton.setLayoutParams(new ViewGroup.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    sharingButton.setImageResource(R.drawable.ic_share);

sharingButton.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            { 
                shareIt();
            }
        });

private void shareIt()
{
    Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
    sharingIntent.setType("text/plain");
    String shareBody = "Here is the share content body";
    sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Subject Here");
    sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody);
    startActivity(Intent.createChooser(sharingIntent, "Share via"));
} 
```

我试过了，但没有给我结果。你能帮我么？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:57:07.387

这几行对我有用，也许你可以试试：

```
 Intent sharingIntent = new Intent(Intent.ACTION_SEND);
    sharingIntent.setType("text/plain");
    sharingIntent.putExtra(Intent.EXTRA_TEXT, "http://www.google.com/");

    sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Subjecttest");

    startActivity(Intent.createChooser(sharingIntent, "Choose option")); 
```

我还猜测您拥有的按钮正在被点击，但 shareintent 不起作用，如果在该部分之前有错误，那么它可能不是 shareintent，而是按钮声明和 xml 问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:53:32.053

如果您更喜欢自己使用库，则应使用 addThis ：http: [//support.addthis.com/customer/portal/articles/381271-addthis-for-android-quickstart-guide](http://support.addthis.com/customer/portal/articles/381271-addthis-for-android-quickstart-guide)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T02:14:44.213

在菜单中试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_share"
          android:title="@string/share"
          android:showAsAction="ifRoom"
          android:actionProviderClass="android.widget.ShareActionProvider" />
    ...
</menu> 
```

阅读：http: [//developer.android.com/reference/android/widget/ShareActionProvider.html](http://developer.android.com/reference/android/widget/ShareActionProvider.html)

# android - SlidingMenu 的初学者问题 #jfeinstein10_sliding_menu #ActionBarSherlock

> ID：11652373
> 
> 赞同：1
> 
> 时间：2012-07-25T14:45:17.177
> 
> 标签：android, android-layout, actionbarsherlock

我在 [jfeinstein10] 的 github 上尝试了slidingMenu：[https](https://github.com/jfeinstein10/SlidingMenu) ://github.com/jfeinstein10/SlidingMenu 。

我在我的android上编译并运行它。它运行良好。我可以在视图中滑动。屏幕截图在这里。

[![http://i.imm.io/xUZL.png](../Images/2acf5b76a5451ee834984bc47dd339c7.png)](https://i.stack.imgur.com/L8on5.png)
[（来源：[i.imm.io](http://i.imm.io/xUZL.png)）]

问题是我看不到视频中演示的视图（即 Spotify 外观和切换返回按钮）[此处的视频链接]：[http ://www.youtube.com/watch?v=8vNaANLHw-c&feature =youtu.be](http://www.youtube.com/watch?v=8vNaANLHw-c&feature=youtu.be) [http://i.imm.io/xUSu.png http://i.imm.io/xUSu.png](http://i.imm.io/xUSu.png)

我错过了什么吗？有没有教程可以帮助我继续这个例子？

谢谢，德克斯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:34:34.380

我不确定您要做什么，您可以发布一些代码吗？

要使 SwipingMenu 从左侧或右侧显示，您需要做的所有事情如下：

使用设置模式来声明是否希望在从左侧或右侧滑动时显示视图。

使用 SetTouchModeAbove 声明您是否希望滑动菜单响应屏幕上任何位置的滑动 (SlidingMenu.TOUCHMODE_FULLSCREEN) 或仅从屏幕边缘 (SlidingMenu.TOUCHMODE_MARGIN)。

```
private void initSlidingMenu() {
    menu = new SlidingMenu(this);
    menu.setMode(SlidingMenu.LEFT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
    menu.setShadowWidthRes(R.dimen.shadow_width);
    menu.setShadowDrawable(R.drawable.shadow);
    menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    menu.setFadeDegree(0.35f);
    menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
    menu.setMenu(R.layout.sliding_queue);        
} 
```

# c# - 将实体绑定到多个数据库上下文时出现实体框架错误

> ID：11652377
> 
> 赞同：1
> 
> 时间：2012-07-25T14:45:29.560
> 
> 标签：c#, asp.net-mvc, entity-framework-4, ninject, repository-pattern

我在我的 MVC 应用程序中找不到正确的方法来绑定存储库和所有 EF 相关数据。下面的示例为每个 IRepository 创建新的 DbContext，这给了我错误

> 一个实体对象不能被多个 IEntityChangeTracker 实例引用

出现此错误是因为我的实体在不同的上下文中。例如代码（它在实体中）将给出错误

```
var user = new User();
_userRepository.Insert(user) 

var order = new Order();
order.User = user;
_orderRepository.Insert(order) 
_unitOfWork.Commit(); 
```

如果我改变

```
kernel.Bind(typeof(DbContext)).ToMethod(context => new DbContext(connectionString)); 
```

到

```
kernel.Bind(typeof(DbContext)).ToMethod(context => new DbContext(connectionString)).InRequestScope(); 
```

我收到错误

```
The ObjectContext instance has been disposed and can no longer be used for operations that require a connection. 
```

如果我在单独的线程中使用 ServiceRepository。

也许有人知道解决方案？

```
var connectionString = ConfigurationManager.ConnectionStrings["Entities"].ConnectionString;            
kernel.Bind(typeof(DbContext)).ToMethod(context => new DbContext(connectionString));            
kernel.Bind<IObjectSetFactory>().ToMethod(c => kernel.Get<DbContextAdapter>());
kernel.Bind<IObjectContext>().ToMethod(c => kernel.Get<DbContextAdapter>());  
kernel.Bind(typeof(IUnitOfWork)).To(typeof(UnitOfWork));
kernel.Bind(typeof(IRepository<>)).To(typeof(Repository<>));
kernel.Bind<IServiceRepository>().To<ServiceRepository>();

 public interface IServiceRepository
    {
        UserDetail GetUser(int id);
        User GetUser(string email);
        User GetUser(string email, string password);
        OrderDetail GetOrder(string id);
        IEnumerable<OrderDetail> GetOrders(int userId);
        IEnumerable<Product> GetProducts();
        UserDetail GetParentUser(string partialEmail);
        IEnumerable<UserDetail> GetChildUsers(int parentId);
        IEnumerable<Statistic> GetStatisticForCurrentMonth(string ip);
        void InsertStatistic(QueueItem queueItem);
        void InsertStatistic();
        void Commit();
        void AddUser(User model);
        User AddUser(string firstName, string lastName, string email, string password, string country, int? parentId = null, DateTime? dateStamp = null);
        void AddOrder(Order order);
        void DeleteUser(int id);
        void DeleteUser(string email);
        bool OrderManager(PaymentProcessorOrder order, out User newUser, out Order newOrder);
        User AuthenticatedUser();
        string AuthenticatedUserEmail();
        bool ValidateUser(string email, string password);
        string GetPassword(string email);
    }

 public class ServiceRepository : IServiceRepository
    {
        private readonly IRepository<User> _userRepository;
        private readonly IRepository<Order> _orderRepository;
        private readonly IRepository<UserDetail> _userDetailRepository;
        private readonly IRepository<Statistic> _statisticRepository;
        private readonly IRepository<Product> _productRepository;
        private readonly IRepository<OrderDetail> _orderDetailRepository;
        private readonly IUnitOfWork _unitOfWork;
        private static readonly object Locker = new object();

  public ServiceRepository(IRepository<User> userRepository, IRepository<Statistic> statisticRepository, IRepository<UserDetail> userDetailRepository, IRepository<Order> orderRepository, IUnitOfWork unitOfWork, IRepository<OrderDetail> orderDetailRepository, IRepository<Product> productRepository)
        {
            _unitOfWork = unitOfWork;
            _userRepository = userRepository;
            _statisticRepository = statisticRepository;
            _userDetailRepository = userDetailRepository;
            _orderRepository = orderRepository;
            _orderDetailRepository = orderDetailRepository;
            _productRepository = productRepository;
        }

//Skip code
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:29:58.023

您不应该在 ASP.NET 应用程序中使用线程，因为它会给您带来很多问题。例如，当 IIS 回收您的应用程序池或暂停应用程序时，您的线程将被终止，使您的应用程序处于不一致的状态。或者线程中未捕获的异常可能会破坏整个应用程序。

通常，您应该在单独的服务应用程序中实现异步事物，以便 IIS 只需发送一些消息，这些消息将被此服务异步处理。这也将解决您的问题，因为您可以为每条消息使用其他 DbContext。

如果您真的想使用后台线程，那么您必须为您的请求和线程使用不同的 DbContext 绑定。例如

```
kernel.Bind(typeof(DbContext)).ToMethod(context => new DbContext(connectionString)).InRequestScope();
kernel.Bind(typeof(DbContext)).ToMethod(context => new DbContext(connectionString)).WhenInjectedInto<MyTask>(); 
```

但这意味着您不能将实体从请求 DbContext 传递到后台线程上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:53:44.190

您不应该将对象从一个 DbContext 传递到另一个。这在 EF 中不受支持（除非您分离和附加）。

我建议在每个存储库中使用相同的 DbContext，并将存储库保持在同一个线程上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:11:45.803

您在这里遇到的问题是在处理一个存储库时使用多个存储库，它也在处理 DbContext。您认为可以使用 DbContext 的单例实例（或每个会话）是正确的

[Ninject：单例绑定语法？](https://stackoverflow.com/questions/2581521/ninject-singleton-binding-syntax)

但是，在您处理存储库时，您需要以下内容：

```
public void Dispose(bool AllResources)
{
     if(AllResources)
     {
          _context.Dispose();
     }
     //Clean-up other resources
} 
```

您可以使用的其他方法之一是将 Disposable 放在您的工厂中，因此当您执行多个存储库时，您将拥有：

```
using(var RepoFactory = new RepositoryContextFactory())
{
     var repo1 = RepositoryOne(RepoFactory.FetchContext());
     var repo2 = RepositoryTwo(RepoFactory.FetchContext());
     //Do work
}  //Your context would then be disposed of in the closure of the using across all Repositories instead of per repository which will allow you to reuse the same context across multiple repositories. 
```

希望这在某种程度上有所帮助。

# xpages - XPages 删除服务器上的文档并触发部分刷新

> ID：11652378
> 
> 赞同：0
> 
> 时间：2012-07-25T14:45:29.403
> 
> 标签：xpages

我正在努力解决以下问题。

在我的 XPage 上，我有一个 viewpanel 组件，但它没有绑定到 notesview 数据源，而是绑定到存储在 viewScope 中的 hashmap。原因超出了我的问题范围。

由于我视图中的行实际上并未链接到文档，因此我无法使用标准复选框和相关的 getSelectedDocIds。但是，我确实想要一种删除所选文档的方法。我有一列带有复选框，其中包含相应行的unid。

长话短说。我有一个 unid 数组，并且想要执行执行以下操作的操作：

*   显示一个 dijit.Dialog 要求确认
*   如果单击确定，则调用执行以下操作的函数：
    *   删除基于unid的文档
    *   刷新视面板

我正在考虑以下两种解决方案，但怀疑什么是最好的（也许是第三种，甚至更简单的解决方案？）

1.  让 dojo 对话框的 OK 按钮调用一个对 XAgent 或普通旧 LS 代理执行 XmlHttpRequest 的函数

2.  如 JeremyHodge 所述，让 OK 按钮触发在服务器上运行的事件处理[程序](http://xpagesblog.com/XPagesHome.nsf/Entry.xsp?documentId=88065536729EA065852578CB0066ADEC)。但是我将如何将 unids 作为参数传递并在之后刷新视图？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:32:15.547

你不能只使用带有对话框按钮控件的扩展库对话框。在此按钮控件中，您可以

第三种选择是在包含复选框的数据表/视图中添加一列。在这些框的 onchange 事件中，您添加一个事件处理程序，它将值添加到 viewScope 变量。

页面底部（或顶部）的一个按钮，您添加从哈希图中删除所选项目所需的代码，删除与所选 ID 关联的文档。这个按钮可以是一个普通的按钮，在视图面板上进行部分刷新。当您遇到无法在对话框中使用按钮的错误时，请使用扩展库对话框控件，因为这可以为您解决该问题。

如果当前用户没有正确的访问级别来删除文档，您可以使用 sessionAsSigner 全局（假设设计元素的签名者具有正确的访问级别）。

这样您就不需要通过 xmlthttprequest 调用 xAgent 并且可以使用默认的 xpage 方法。

我希望这在某种程度上有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:16:58.920

我会第二个@jjbsomhorst 使用对话框的扩展库 - 如果你使用一个的话。通常用户不会阅读对话框。因此，该方法将添加带有复选框的列，但不要打扰事件处理程序，而是将它们全部绑定到 ONE scopeVariable。在提交时，该变量将保存一个具有所选 UNID 的数组。然后呈现一个列出这些文档并有一个确认按钮的页面。虽然新页面提供了服务器往返的可能性，但用户实际关注的可能性要高得多。你可以做什么：

拥有呈现带有可编辑复选框的对话框的普通页面，当用户单击“删除”时，您设置类似的内容`viewScope.confirmDeleteMode=true;`并将其用作复选框的条件并将它们设置为只读并将所选行的类设置为“morituri”在你的 CSS 中会有类似的东西`.morituri { color: white; background-color : red; font-weight: bold }` 和一个新按钮“确认删除”（并隐藏删除按钮）。

这样，您只需处理一页。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T08:46:57.483

我选择了选项 2，它可以提供部分刷新 id。我将unids作为提交值传递，例如：

```
function doRemove(unids){

     XSP.executeOnServer(ISP.UI.removeEventID, ISP.UI.removeRefreshID, {

        params: {
            '$$xspsubmitvalue': unids
        },
        onComplete : function() {
            //alert('test')
        }
    });

} 
```

ISP.UI.removeEventID 执行以下代码：

```
var unids = context.getSubmittedValue();
removeDocuments(unids); //SSJS function performing the actual delete
viewScope.reload = 'reload' //triggers the hashmap to be rebuild based on new documentcollection 
```

# java - 如何在swing中调用某个时间段的方法？

> ID：11652379
> 
> 赞同：0
> 
> 时间：2012-07-25T14:45:29.867
> 
> 标签：java, swing, timer

我有一个带有 a`JTextField`和 a的框架`JButton`。当我按下时，我想调用一个方法，该方法每 4/5/8 秒更新一次 JTextField 的文本。谁能帮我写代码？？（谢谢你）

```
The code:    

import javax.swing.*;
public class Gui{
JFrame frame = new JFrame();
public Gui(){

frame.setLayout(new FlowLayout());

JTextField tf = new JTextField(10);
JButton    bu = new JButton("Button");

  bu.addActionListener(new ActionListener(){

        public void actionPerformed(ActionEvent event){

               for(int i=0;;i++){
               tf.setText("" + i);
               }
        }
  });
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:21:55.650

就个人而言，正如@trashgod 所指出的，我会使用[java.swing.Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)，主要原因是它支持在 中调用通知`EDT`，以及一些（通常是次要的）管理方法来帮助让生活更轻松

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:49:47.950

您可以尝试使用计时器：[http ://docs.oracle.com/javase/7/docs/api/java/util/Timer.html](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)

您可能希望在`actionPerformed`调用该方法时启动计时器。

尽管 Swing 的最佳选择是使用[javax.swing.Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)，因为它允许您在事件调度线程上更新您的 GUI。

# php - 无法在php中调用类

> ID：11652381
> 
> 赞同：0
> 
> 时间：2012-07-25T14:45:43.530
> 
> 标签：php

```
<?php
try{

    $test = new TestAccessModifiers("2345","xyz","vfd","a0001","99","67"); /*invoking the class*/

    var_dump($test->calculate());
}
catch(Exception $e){

    echo $e->getMessage();
}
?>

<?php 
class TestAccessModifiers {

    function TestAccessModifiers($user_p,$user_fn,$user_ln,$user_id,$marks1,$marks2) {
        echo "hello1";
        $this->user_phone=$user_p;
        $this->user_fname=$user_fn;
        $this->user_lname=$user_ln;
        $this->user_id=$user_id;
        $this->marks1=$marks1;
        $this->marks2=$marks2;

        echo $this->marks1;
    }
    private  $additional_marks = 10;
    public static function calculate(){

        return $this->marks1+$this->marks2+$this->getAdditionalmarks();

    }

    public function getAdditionalmarks(){

        return $this->additional_marks;
    }

}
?> 
```

以上是我试图运行的简单代码......但我无法调用我也尝试使用 _constructor 的 TestAccessModifiers

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:47:10.587

将您的*TestAccessModifiers* **函数**重命名为`__construct`.

```
public function __construct($user_p,$user_fn,$user_ln,$user_id,$marks1,$marks2) {
    echo "hello1";
    $this->user_phone = $user_p;
    $this->user_fname = $user_fn;
    $this->user_lname = $user_ln;
    $this->user_id = $user_id;
    $this->marks1 = $marks1;
    $this->marks2 = $marks2;
    echo $this->marks1;
} 
```

然后，`static`从`calculate`函数中删除。

然后它应该可以工作..

参考： http: [//php.net/manual/en/language.oop5.decon.php](http://php.net/manual/en/language.oop5.decon.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:51:26.967

如果您在另一个 php 页面中调用该类，请确保您像这样包含它。

```
include('/path/to/your/class.php');
$test = new TestAccessModifiers("2345", "xyz", "vfd", "a0001", "99", "67"); 
```

或者，如果您在同一个文件中实例化对象，则将实例化代码放在您的类下方。

```
class TestAccessModifiers {
    public function __construct($user_p, $user_fn, $user_ln, $user_id, $marks1, $marks2) {
        echo "hello1";
        $this->user_phone = $user_p;
        $this->user_fname = $user_fn;
        $this->user_lname = $user_ln;
        $this->user_id = $user_id;
        $this->marks1 = $marks1;
        $this->marks2 = $marks2;
        echo $this->marks1;
    }
    private $additional_marks = 10;

    public function calculate() {
        return $this->marks1 + $this->marks2 + $this->getAdditionalmarks();
    }
    public function getAdditionalmarks() {
        return $this->additional_marks;
    }
}

try {
    $test = new TestAccessModifiers("2345", "xyz", "vfd", "a0001", "99", "67"); /*invoking the class*/
    var_dump($test->calculate());
} catch (Exception $e) {
    echo $e->getMessage();
} 
```

您在类中定义了一个静态方法，并在静态方法中使用了伪变量`$this`，这是 PHP 不允许的。因为静态方法在 PHP 中被排除在对象上下文之外。您需要删除静态方法才能使用`$this`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:53:16.903

```
public static function calculate() {
    return $this - > marks1 + $this - > marks2 + $this - > getAdditionalmarks();
} 
```

您不能`$this`从静态上下文进行操作。将此方法设为非静态，或将其他变量调整为静态，以适合您的上下文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:51:18.403

第一：你有哪个 PHP 版本？第二：您是否在您正在实例化的文件中包含类文件？第三：您的“计算”函数是静态的，那么，您无法从实例访问它，也无法读取或写入非静态属性。

试试 TestAccessModifiers::calculate(); 并输入一个简单的返回“Hello World”

问候。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T14:52:45.227

我们在谈论什么版本的 PHP？首先想到的是：您是否将其添加到 autoload ？我会使用 __constructor 方法作为类的启动程序。

# ruby-on-rails - 如何在 Active Record 中的某个日期之后或之前搜索日期字段

> ID：11652387
> 
> 赞同：2
> 
> 时间：2012-07-25T14:46:00.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我知道我可以使用范围来搜索日期位于两个日期之间的位置。例如：

```
User.where(:created_at => start_date..end_date ) 
```

但是，我将如何对日期之前或之后的所有日期进行开放式搜索？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T14:55:15.937

你可以简单地这样做：

```
User.where("created_at >= ?", start_date ) 
```

或这个

```
User.where("created_at <= ?", end_date ) 
```

# c# - 模态对话框弹出后开始漫长的过程

> ID：11652388
> 
> 赞同：1
> 
> 时间：2012-07-25T14:46:03.313
> 
> 标签：c#, winforms

我有一个带有取消按钮的模式对话框，仅当用户单击按钮时才会弹出。弹出模态对话框后，我想开始一个监视外部事件的长过程。如果事件发生，则对话框将自动关闭。用户可以通过单击取消按钮来取消监控过程。

我将流程开始分配给 Shown 事件

```
private void ProceedForm_Shown(object sender, System.EventArgs e)
{
    controller.StartSwiping();
} 
```

过程本身就是一个循环

```
public void StartSwiping()
{           
    Status status;
    do
    {
        status = CallForFeedback();
    } while (status == Status.Pending);           

    form.DialogResult = DialogResult.OK;
    form.Close();
} 
```

该过程开始正常，但没有弹出对话框，因此用户不能取消该过程。我还尝试将开始分配给 Load 事件，但没有任何改变。有什么方法可以显示对话框，然后开始该过程？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:50:55.233

您的问题是您正在 UI 线程中执行所有操作。您需要将状态监控循环放在一个单独的线程中，以便 UI 线程可以保持响应。

有几种方法可以做到这一点，但一个简单的起点是使用[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:53:03.567

使用 a`Task`来做你的`LongRunning`事件：

```
CancellationTokenSource _cancelationTokenSource = new CancellationTokenSource();
new Task(() => 
{ 
  //Do LongRunning task
}, _cancelationTokenSource.Token, TaskCreationOptions.LongRunning).Start(); 
```

需要时使用`_cancelationTokenSource`取消任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:03:14.717

其他人建议使用 BackgroundWorker 或其他类型的后台线程。虽然在许多情况下这在这里是合适的，但可能有更好的解决方案。你不只是在做一些长期运行的任务，你在等待某事发生。而不是不断地轮询......不管它是什么，你应该使用事件。完成后应该会触发一个事件，并且当满足正确条件时，您应该订阅该事件以执行您需要执行的任何操作（即关闭对话框）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T14:54:42.283

当您阻塞 UI 线程时，我会将长时间运行的代码移动到后台线程，这就是 UI 从不显示的原因。

为控制器功能使用后台工作者类[http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx)

当后台工作人员完成工作（即收到事件）时，您可以使用以下机制回调到 UI 线程：

[http://msdn.microsoft.com/en-us/library/ms171728(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms171728(v=vs.80).aspx)

注意：文章说您可以关闭 crossthreadexception 这将被认为是不好的做法，而是使用 InvokeRequired 检查以正确的方式处理它，然后在 windows 窗体上调用方法。

# java - Android错误将字符串解析为json

> ID：11652389
> 
> 赞同：0
> 
> 时间：2012-07-25T14:46:05.847
> 
> 标签：java, php, android, json, parsing

在android上需要帮助=（多年来一直被困在这个问题上！我的代码如图所示。

```
public class AllUsersActivity extends ListActivity {

// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> usersList;

// url to get all users list
private static String url_all_users = "http://10.0.2.2/android_connect/get_all_users.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_USERS = "users";
private static final String TAG_UID = "UserID";
private static final String TAG_FIRSTNAME = "FirstName";

// users JSONArray
JSONArray users = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_users);

    // Hashmap for ListView
    usersList = new ArrayList<HashMap<String, String>>();

    // Loading users in Background Thread
    new LoadAllusers().execute();

    // Get listview
    ListView lv = getListView();

    // on seleting single product
    // launching Edit Product Screen
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String uid = ((TextView) view.findViewById(R.id.uid)).getText()
                    .toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    UserDetailsActivity.class);
            // sending uid to next activity
            in.putExtra(TAG_UID, uid);

            // starting new activity and expecting some response back
            startActivityForResult(in, 100);
        }
    });

}

// Response from Edit Product Activity
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // if result code 100
    if (resultCode == 100) {
        // if result code 100 is received
        // means user edited/deleted product
        // reload this screen again
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }

}

/**
 * Background Async Task to Load all product by making HTTP Request
 * */
class LoadAllusers extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(AllUsersActivity.this);
        pDialog.setMessage("Loading users. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All users from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_users, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All users: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // users found
                // Getting Array of users
                users = json.getJSONArray(TAG_USERS);

                // looping through All users
                for (int i = 0; i < users.length(); i++) {
                    JSONObject c = users.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_UID);
                    String name = c.getString(TAG_FIRSTNAME);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_UID, id);
                    map.put(TAG_FIRSTNAME, name);

                    // adding HashList to ArrayList
                    usersList.add(map);
                }
            } 
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all users
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        AllUsersActivity.this, usersList,
                        R.layout.list_item, new String[] { TAG_UID,
                                TAG_FIRSTNAME},
                        new int[] { R.id.uid, R.id.name });
                // updating listview
                setListAdapter(adapter);
            }
        });

    }

} 
```

谁能帮帮我吗！我得到的错误是***Error Parsing Data Org.json.JSONException: Value cannot be convert to JSONObject***

这是 JSON 字符串

```
Array{"Users":[{"UserID":"1","FirstName":"lalawee","Email":"12345","Password":null},{"UserID":"2","FirstName":"shadowblade721","Email":"12345","Password":null},{"UserID":"3","FirstName":"dingdang","Email":"12345","Password":null},{"UserID":"4","FirstName":"solidsnake0328","Email":"12345","Password":null}],"success":1} 
```

错误是否存在于 JSON 解析器类中？

编辑：这里是输出上述数组的 php 脚本的代码。谁能告诉我在 json 字符串之前输出单词数组的 php 脚本有什么问题？抱歉，添麻烦了。我是编码新手。一直在关注在线教程，但现在坚持了几天。

```
<?php
/*
* Following code will list all the Users
*/
// array for JSON response
$response = array();
// include db connect class
require_once __DIR__ . '/db_connect.php';
// connecting to db
$db = new DB_CONNECT();
// get all Users from Users table
$result = mysql_query("SELECT * FROM Users") or die(mysql_error());
// check for empty result
if (mysql_num_rows($result) > 0) {
// looping through all results
// Users node
$response["Users"] = array();

while ($row = mysql_fetch_array($result)) {
    // temp user array
    $user[] = array();
    $user["UserID"] = $row["UserID"];
    $user["FirstName"] = $row["FirstName"];
    $user["Email"] = $row["Email"];
    $user["Password"] = $row["Password"];

    // push single User into final response array
    array_push($response["Users"], $user);
}
// success
$response["success"] = 1;
echo $response;

// echoing JSON response
echo json_encode($response);
}
else {
// no Users found
$response["success"] = 0;
$response["message"] = "No Users found";

// echo no users JSON
echo json_encode($response);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:52:21.133

请改用 GSON 库，它是 Google 的官方库，工作起来就像一个魅力。没有 HashMaps 等，直接对象。

看看[这里](http://code.google.com/p/google-gson/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:49:49.533

正如错误所暗示的，您的`JSON`字符串不代表有效的`JSON`对象。

试试这样（没有`Array`开始）：

```
{"Users":[{"UserID":"1","FirstName":"lalawee","Email":"12345","Password":null},{"UserID":"2","FirstName":"shadowblade721","Email":"12345","Password":null},{"UserID":"3","FirstName":"dingdang","Email":"12345","Password":null},{"UserID":"4","FirstName":"solidsnake0328","Email":"12345","Password":null}],"success":1}Array{"Users":[{"UserID":"1","FirstName":"lalawee","Email":"12345","Password":null},{"UserID":"2","FirstName":"shadowblade721","Email":"12345","Password":null},{"UserID":"3","FirstName":"dingdang","Email":"12345","Password":null},{"UserID":"4","FirstName":"solidsnake0328","Email":"12345","Password":null}],"success":1} 
```

你可以在这里检查你的有效性：http `JSON` `String`: [//jsonlint.com/](http://jsonlint.com/)

# ruby-on-rails - 为什么之前的过滤器给我一个错误

> ID：11652392
> 
> 赞同：0
> 
> 时间：2012-07-25T14:46:15.507
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这是我的数据结构

```
class User < ActiveRecord::Base
  has_many :companies, :through => :positions
  has_many :positions

class Company < ActiveRecord::Base
  has_many :positions
  has_many :users, :through => :positions

class Position < ActiveRecord::Base
  belongs_to :company
  belongs_to :user
  attr_accessible :company_id, :user_id, :regular_user
end

class Position < ActiveRecord::Base
  belongs_to :company
  belongs_to :user
  attr_accessible :company_id, :user_id, :regular_user
  before_save :set_regular_user

  def set_regular_user
    if self.user.is_admin?
      self.regular_user = false
    else
      self.regular_user = true
    end
  end
end 
```

每次我跑步

```
@user.companies << Company.last 
```

我明白了`ActiveRecord::RecordNotSaved: ActiveRecord::RecordNotSaved`

但是如果我删除我之前的过滤器，一切都会完美，它会按预期保存

```
 @user.companies << Company.last
     Company Load (0.2ms)  SELECT `companies`.* FROM `companies` ORDER BY `companies`.`id` DESC LIMIT 1
      (0.1ms)  BEGIN
     SQL (0.2ms)  INSERT INTO `positions` (`company_id`, `created_at`, `regular_user`, `updated_at`, `user_id`)
      VALUES 
      (263, '2012-07-25 14:44:15', NULL, '2012-07-25 14:44:15', 757) 
```

任何我想念的想法......这个问题是基于这个早先的[问题](https://stackoverflow.com/questions/11651489/is-there-a-way-to-stop-this-default-insert-in-rails/11651629#11651629)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:49:11.710

回调需要返回true才能继续，false取消操作。在您的函数中，if 语句的值可能为 false：`self.regular_user = false` ruby 函数的返回值是最后一条语句。

只需在末尾添加一个 return true 即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:54:03.690

正如@DGM 所说，回调总是在最后返回true（如果它们应该阻止代码继续，则在流程中的某个点返回false）是一种很好的做法。否则，它可能是一些非常奇怪的错误的根源（根据经验：））。

我怀疑这是 if 分支返回错误。希望如果您只是添加 true 作为回调中的最后一条语句，它应该可以工作。

# mysql - MySQL 查询 - 求和一个相关表 - 计算另一个相关表

> ID：11652394
> 
> 赞同：0
> 
> 时间：2012-07-25T14:46:25.227
> 
> 标签：mysql

Count 与一个相关表一起工作得很好，但是当我添加 Sum 时，我在 Count 中得到了过度膨胀的结果。

```
SELECT Orders.kp_OrderID AS `Order #`, 
    Orders.t_ServiceLevel AS `Service Level`, 
    Customers.t_CustCompany AS Company, 
    Orders.t_JobName AS `Job Name`, 
    Orders.t_JobStatus AS `Status`, 
    Orders.d_JobDue AS Due, 
    Orders.ti_JobDue AS Time, 
    COUNT(OrderItems.kf_OrderID) AS `Line Item`, 
    SUM(
        `OrderItemComponents`.`n_QuantityPrintMaterial` * (
        `OrderItemComponents`.`n_WidthInInches` * `OrderItemComponents`.`n_HeightInInches` / 144
            )
        ) AS SqFt, 
    Orders.nb_JobFinished AS Finished
FROM Orders 
     INNER JOIN OrderItems ON Orders.kp_OrderID = OrderItems.kf_OrderID
     INNER JOIN Customers ON Orders.kf_CustomerID = Customers.kp_CustomerID
     INNER JOIN OrderItemComponents ON OrderItemComponents.kf_OrderID = Orders.kp_OrderID
    WHERE Orders.d_JobDue > (
        DATE_SUB(CURDATE(), INTERVAL 60 DAY)
         )
    GROUP BY Orders.kp_OrderID
    ORDER BY `Line Item` DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:54:25.157

将您的 COUNT 行切换为：

```
COUNT(DISTINCT OrderItems.kf_OrderID) AS `Line Item` 
```

添加行时

```
INNER JOIN OrderItemComponents 
  ON OrderItemComponents.kf_OrderID = Orders.kp_OrderID 
```

您返回了更多行，因为我假设 OrderItem 可以包含多个组件。

**更新**

如果您的 COUNT 语句：

```
(SELECT COUNT(OrderItems.kf_OrderID) 
 FROM OrderItems.kf_OrderID 
 WHERE OrderItems.kf_OrderID=Order.kf_OrderID) AS `Line Item`, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:55:26.653

我假设您为每个订单项目组件重复每个订单项目。一种解决方案可能是`COUNT(DISTINCT OrderItems.kf_OrderID)`这样您就不会重复计算同一项目。

# jmeter - 如何在 Mac 上使用 Jar Bundler 打包 JMeter

> ID：11652401
> 
> 赞同：0
> 
> 时间：2012-07-25T14:46:42.783
> 
> 标签：jmeter, jarbundler

我无法在 mac 上使用“Jar Bundler”从 ApacheJMeter.jar 创建 JMeter.app，我想知道是否有其他人有配置此工具的经验？对我来说，问题似乎是正在搜索的 lib 文件夹设置为不正确的基本路径：

```
org.apache.jmeter.NewDriver: JMeter home directory was detected as: /Users/username/Applications/JMeter.app/Contents/Resources 
```

我看这里：http: [//developer.apple.com/library/mac/#documentation/Java/Reference/Java_InfoplistRef/Articles/JavaDictionaryInfo.plistKeys.html](http://developer.apple.com/library/mac/#documentation/Java/Reference/Java_InfoplistRef/Articles/JavaDictionaryInfo.plistKeys.html)

但无论我如何配置任何上述属性，日志看起来都是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:35:46.270

真正的诀窍是确保可以找到 bin 和 lib 文件夹。您需要添加的唯一 jar 文件是 ApacheJMeter.jar。在 bin/jmeter 脚本中查找要放入 Jar Bundler 的属性选项卡的其他属性。bin/jmeter 脚本中的 java 参数应复制到 VM 选项字段中。选中将工作目录设置为内部应用程序包。现在创建应用程序。打开刚刚创建的 .app 文件夹，将 bin 和 lib 文件夹复制到 Resources 目录中。完毕。

# python - 导入下一个（）python 2.5

> ID：11652404
> 
> 赞同：7
> 
> 时间：2012-07-25T14:46:50.287
> 
> 标签：python, next

我正在使用来自 itertools 的成对配方的略微修改版本，看起来像这样

```
def pairwise(iterable):
    "s -> (s0,s1), (s1,s2), (s2, s3), ..."
    a, b = tee(iterable)
    next(b, None)
    return zip(a, b) 
```

现在事实证明，我需要使用**python 2.5**运行代码，其中 next() 函数会引发以下异常：

`<type 'exceptions.NameError'>: global name 'next' is not defined`

有没有办法在 python 2.5 中使用 next() ？或者我需要如何修改函数以使其正常工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T14:48:48.190

您可以自己轻松地提供此函数的定义：

```
_sentinel = object()
def next(it, default=_sentinel):
    try:
        return it.next()
    except StopIteration:
        if default is _sentinel:
            raise
        return default 
```

# c++ - 从数据文件中选择某些行

> ID：11652405
> 
> 赞同：0
> 
> 时间：2012-07-25T14:46:58.793
> 
> 标签：c++, text-files

我有一个这种形式的数据文件：

```
B123 1 3 4
f
g=1
B123 3 4 4
t
z=2
.
.
. 
```

我想做的是从 B123 开始的行中挑选数据；

这是我的尝试：

```
ifstream in("Data");
ofstream out("output");

string x1, x2, x3, x4;
char z[] = "B123";
const char *p;
p=x1.c_str();

while(1)
{
    in>> x1;
    if(!(strcmp(z,p)))
    {
        if((in>>x1>>x2>>x3>>x4))
        {
             output<<x1<<x2<<x3<<x4;
        }
        else
             break;
     }
}

return 0; 
```

但是，这样，我只得到一个空的输出文件。我想得到：

```
B123 1 3 4
B123 3 4 4 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:49:16.187

读取文件的行，找到匹配`B123`项，如果找到，保存。伪代码：

```
while !eof():
   line = file.readlines()
   if "B123" in line:
        cout <<< line << endl 
```

另外，我建议您使用`strstr()`而不是`strcmp()`. 我想您只需要`B123`在该行中找到子字符串：

```
// string::substr
#include <iostream>
#include <string>
using namespace std;

int main ()
{
  string str="We think in generalities, but we live in details.";
                             // quoting Alfred N. Whitehead
  string str2, str3;
  size_t pos;

  str2 = str.substr (12,12); // "generalities"

  pos = str.find("live");    // position of "live" in str
  str3 = str.substr (pos);   // get from "live" to the end

  cout << str2 << ' ' << str3 << endl;

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:04:48.990

您可以尝试这样的事情：

```
while(1)
{
    getline(in, x1);
    if (in.eof()) break;
    if (x1.find(z) != string::npos) {
        out << x1 << endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:51:36.903

您的问题是您在定义`p`之前`x1`定义。 `p`只是等于一个空白字符串，因为`x1`也一样。相反，您需要这样做：

```
ifstream in("Data");
ofstream out("output");

string x1, x2, x3, x4;
char z[] = "B123";
const char *p;

while(1)
{
    in>> x1;
    p=x1.c_str();
    if(!(strcmp(z,p)))
    {
        if((in>>x1>>x2>>x3>>x4))
        {
             output<<x1<<x2<<x3<<x4;
        }
        else
             break;
     }
}

return 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:55:30.400

你有两个问题。

首先是你在字符串存在之前得到一个指向字符串的指针。每次读取字符串时，内部存储都可能更改并使先前的指针无效。您需要在`.c_str()`读取字符串后将调用移动到某个点。

第二个问题是您正在使用`strcmp`which 比较*整个*字符串。尝试使用`strncmp`来比较有限数量的字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T15:01:47.610

如果您在 B123 之后读取数据只是为了输出它们，那么下面的代码片段就可以了

```
ifstream in("data");
ofstream out("out");
string line;
while (getline(in, line)) {
    if (line.length() >= 4 && line.substr(0, 4) == "B123") {
        out << line << "\n";
    }
} 
```

如果您真的需要 x1、x2 ... 进行进一步处理，则必须添加一些行 ...

# google-static-maps - 更改 Google 静态地图中的标签颜色

> ID：11652412
> 
> 赞同：1
> 
> 时间：2012-07-25T14:47:21.007
> 
> 标签：google-static-maps

我有定制的彩色别针，它们的颜色都很深。标签默认为黑色文本，有什么方法可以使它成为白色文本，以便它显示在深色针脚上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T13:06:44.440

在当前版本的 Google 静态地图 API (V2) 中，这是不可能的。黑色是唯一可用的颜色。

更新：一个解决方法，虽然非常hacky，是上传你想要的彩色文本作为图像并将它们用作自定义图标。请参阅[https://developers.google.com/maps/documentation/staticmaps/#CustomIcons](https://developers.google.com/maps/documentation/staticmaps/#CustomIcons)

# php - 停止mysql中的递归乱伦子父关系

> ID：11652413
> 
> 赞同：10
> 
> 时间：2012-07-25T14:47:23.287
> 
> 标签：php, mysql, recursion, parent

我正在用 PHP / MySQL / Javascript 编程。我有一个我们想要在子/父关系中链接的部分列表，对层数没有限制。

当我从零件列表中挑选以将孩子添加到父母时，我会限制零件列表以排除父母本身以及已经是该父母的孩子的任何零件。

我发现我还想排除父母的祖父母，否则我们会得到乱伦关系，当我显示零件树时会产生无限循环。

不仅如此，我不能让孩子成为父母的曾祖父母或曾曾祖父母等

这是我目前使用的 SQL 语句，我认为也可以通过使用来改进，`LEFT JOIN`但我目前对 SQL 不够熟练。

```
SELECT * 
FROM sch_part_general 
WHERE (sch_part_general.part_id <> $parentId) 
AND (sch_part_general.part_id NOT IN 
  (SELECT part_id FROM sch_part_mapping WHERE parent_id = $parentId)
) 
```

sch_part_general 是一个包含所有部分的多列表，以 part_id 作为主键。sch_part_mapping 是一个带有part_id (child) || 的两列映射表 parent_id（父母）。

有人可以通过 SQL 查询为我指明正确的方向吗？我不热衷于使用 while 循环来创建 SQL 语句，因为我认为这将非常低效，但这是我认为迄今为止唯一可行的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T14:55:31.597

`MySQL`对分层查询没有太多*（如果有的话）*支持。如果您想坚持所谓的`Adjacency List Model`，您所能做的就是`JOIN`为您想要包含的每个级别添加一个。不用说，这不能很好地扩展。

另一方面，如果您可以**更改数据库架构**，我建议您实施`Nested Set Model`.

[Mike Hillyer 的博客](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)`Nested Set Model`中提供了一个很好的解释

> 邻接表模型的局限性
> 
> 在纯 SQL 中使用邻接表模型可能很困难。在能够看到一个类别的完整路径之前，我们必须知道它所在的级别。
> 
> 嵌套集模型
> 
> SQL 中嵌套集的概念已经存在了十多年，并且在书籍和 Internet 上提供了很多附加信息。在我看来，关于管理分层信息的最全面的信息来源是一本书，名为 Joe Celko 为 Smarties 编写的 SQL 中的树和层次结构，由高级 SQL 领域的一位非常受人尊敬的作者 Joe Celko 撰写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:17:36.973

如果你不能改变模式，那么就像 Lieven 的回答所暗示的那样，没有逃避循环的可能。

如果您可以更改架构，那么对于您的情况，以下内容可能就足够了：向 sch_part_mapping 添加一个新列，我们将其称为“hierarchy_id”。它是一个在您第一次开始一个全新的层次结构时构造为唯一 int 的值（具有任何层次结构中的第一个 Grand Grand Grandest Grandmost 父级 - 但是它用英语表示）并插入到属于单个层次结构的所有行中 否不管在什么水平。

然后，很容易跳过在同一层次结构中找到的父母和祖父母：然后您可以在上面的 sql 中添加：

```
SELECT * 
FROM sch_part_general 
WHERE (sch_part_general.part_id <> $parentId) 
AND (sch_part_general.part_id NOT IN 
  (SELECT part_id FROM sch_part_mapping WHERE parent_id = $parentId)

//addition here 
and not exists (select * from sch_part_mapping where hierarchy_id= ? and parent_id = sch_part_general.part_id)

) 
```

问号应替换为您需要计算的相关层次结构 ID。

**编辑：**我错过了您有一个特定父 ID 的变量，因此可以在同一个查询中计算 hierarchy_id：

```
SELECT * 
    FROM sch_part_general 
    WHERE (sch_part_general.part_id <> $parentId) 
    AND (sch_part_general.part_id NOT IN 
      (SELECT part_id FROM sch_part_mapping WHERE parent_id = $parentId)

    //addition here 
    and not exists (select * from sch_part_mapping where hierarchy_id= (select hierarchy_id from sch_part_mapping where parent_id = $parentId limit 1) and parent_id = sch_part_general.part_id)

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:02:02.707

使用 MySql/MariaDB，您可以使用 Open Query Graph 引擎 ( [http://openquery.com/graph/doc](http://openquery.com/graph/doc) )，它是一个 mysql 插件，可让您创建一个特殊的表来放置关系，基本上是 parentId 和 childId。

神奇的是，您使用特殊的列锁存器查询此表，具体取决于查询中传递的值，它将告诉 OQGRAPH 引擎执行哪个命令。有关详细信息，请参阅文档。

它不仅处理树（递归 1-n 关系），而且处理带有权重的图形数据结构（递归 nm 关系）（例如，您想存储公司所有权，公司可以有多个子公司，也可以有多个股东）。

# android - Android 图形 UI 构建器 - 连接事件

> ID：11652417
> 
> 赞同：0
> 
> 时间：2012-07-25T14:47:28.330
> 
> 标签：android, user-interface, sdk

也许这个问题已经被问过了，但是在网上搜索了将近 2 个小时都找不到任何答案。

有一个图形 UI 设计器将与最后一个 android SDK 一起出现。

看起来很酷，做得很好。

尽管如此，我*****无法找到如何通过图形编辑器将事件附加到控件。

当然我可以手动将它添加到 xml 中，但在这种情况下，没有该功能的工具的目的是什么？

我的意思是我在其他语言中拥有的所有其他 SDK 总是包含该功能。

我也找不到有关如何使用此工具的文档。好难过...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:57:54.123

如果要添加单击事件处理程序，请在 GUI 中选择要侦听的按钮（小部件），然后查找属性 onClick。输入用户单击该小部件时要调用的方法的名称，例如.. onMyButtonClick

然后将该方法添加到您的活动中

public void onMyButtonClick(View v) { // 我听到按钮点击 }

GUI builder 已经到了那里，它还不如 XCode 中的那个那么容易使用，但是当你习惯它时并不难。

# aptana3 - 关闭 Aptana Studio 3 (Mac) 自动完成

> ID：11652419
> 
> 赞同：1
> 
> 时间：2012-07-25T14:47:46.287
> 
> 标签：aptana3

正如问题所述 - 有人知道如何关闭 Aptana 3 for Mac 的自动完成功能吗？我引用了 javascript、css、html、php 等。自动结束引号、标签等 - 这非常烦人，我无法在网上找到任何明确引用的内容。感谢您的任何帮助。

# c - 如何确定为什么这个可执行文件在启动时崩溃？（*nix 上的 C）

> ID：11652420
> 
> 赞同：0
> 
> 时间：2012-07-25T14:47:46.387
> 
> 标签：c, compiler-construction, linker, segmentation-fault, shared-libraries

所以我有一个构建和运行良好的应用程序。我开始在它链接到的 20 多个静态和动态库上使用一些编译器设置，并且应用程序在特定点启动时始终崩溃。

我恢复了我的构建系统模块，并且该应用程序再次正常。（但是，我忘记记下我实际所做的更改......）

纯粹出于兴趣，因为我仍然有一个坏二进制文件的副本（在调试模式下构建），我想尝试对我所做的事情进行逆向工程以搞砸事情。:-)

附加一个调试器，我可以看到 a 中的一个函数`.so`通过函数调用传递给主应用程序，主应用程序的函数指针用作回调。

在调用者的框架中（在 中`.so`），函数指针有一个值。在被调用者的框架中（在主应用程序中），函数指针神奇地具有不同的值。

当主应用程序尝试调用存储的函数指针时，程序会因段错误（映射器错误）而崩溃。函数指针似乎仍然有第二个值，这可能是错误的。

关于如何挑选这个有什么建议吗？

* * *

**更新：**根据要求提供更多详细信息。

崩溃发生在：

```
 0xfffffffffffeac58 ???????? ()
 0x000000000063a040 app_exec_callbacks()
 0xfffffd7ffea14514 dynlib_stuff ()
 0x000000000063a15e other_app_stuff () 
 0x00000000004d10a3 app_stuff ()
 0x0000000000499f20 main () 
```

在此之前，该函数`dynlib_do_setup()`通过对 的调用将函数指针 ( of `dynlib_callback_handler()`) 传递给应用程序`app_register_callback()`。

使用调试器，我可以看到`dynlib_do_setup()`函数指针内的值为`0xfffffd7ffea13fa0`. 参数的函数体内`app_register_callback()`突然有一个值`0xfffffffffffeac58`

因此，垃圾值`0xfffffffffffeac58`存储在应用程序的回调表中，正如您在上面的堆栈跟踪中看到的那样，当调用该回调地址时应用程序崩溃也就不足为奇了。

同样，纯粹出于教育兴趣，这种神奇的腐败如何/为什么会发生？恢复我的构建系统更改如何/为什么突然解决了这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:35:17.997

看起来你已经弄清楚发生了什么。也许链接时发生了一些奇怪的事情（可能与[重定位](http://en.wikipedia.org/wiki/Relocation_%28computing%29)有关？）导致 main() 没有函数指针的正确地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:37:27.073

找到了答案：

**编译器错误**导致某些优化标志组合。过去 3 年已知但未修复。:(

# java - 在 unix 中运行 java 控制台程序

> ID：11652422
> 
> 赞同：1
> 
> 时间：2012-07-25T14:47:49.497
> 
> 标签：java

我有一些使用 Eclipse 的 Java 代码，我想将它部署到 unix 环境中。该程序是一个简单的控制台程序，它只在运行时接受一些参数，读取文件并打印出一些结果。

我的问题是什么是在 unix 环境中部署和运行它的最佳方法。我只是想将所有类文件复制到 unix 环境并创建一个批处理文件来运行主类文件。这听起来好吗？或者，我应该创建一个可运行的 jar 文件吗？

另外，我应该把 prgram 引用的 jar 文件放在哪里（在类路径中）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:51:53.030

在我看来，易于部署的设计很重要。在我们的例子中，有一些组件：

1.  将项目存储在源代码管理系统 (git) 中。我们将源代码分解为

    1.  开发分支的开发源代码
    2.  发布分支的稳定源代码
2.  使用构建工具，例如 ant 或 maven，并在项目中提供部署脚本。（我们将在 3 中讨论部署脚本。）。

3.  提供部署脚本：

    1.  在构建服务器中获取最新的稳定源代码
    2.  在构建服务器中构建可执行文件（无论您做什么）
    3.  将包发送到目标服务器
    4.  目标服务器中的启动器（关闭旧应用程序并运行新应用程序）（通过远程 ssh 命令）

目前，您认为如何打包java，但它只是构建和运行是一件简单的事情。当您谈论**部署**时，请使其尽可能简单。每次我们部署只是为了调用发布脚本。

* * *

PS。我不喜欢*可执行的 jar*。使用解包 jars 和编译类可以非常有效地通过 rsync 发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:51:58.683

我认为一个可执行的 jar 文件将在这里解决您的目的。

你应该能够执行它

```
java -jar <jarfilename> <arguement1> <arguement2> .... <arguementN> 
```

您可以从当前目录本身执行 jar 文件，只需确保您的 jar 文件具有可执行权限。

```
chmod +x <jarfilename>
ls -la 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:50:45.703

听起来不错，对你有用。只有一个解决方法：您将为 unix 编写 shell 脚本，而不是批处理文件。

但你可以做得更好。通常将 java 类打包到 jar 文件中。Jar 文件只是一个 zip 文件，其中包含可选的`META-INF`、目录`MANIFEST.MF`和其他内容。所以最好把你的应用打包成jar，然后运行为：`java -cp yourjar.jar YourMainClass`.

要创建 jar 文件，您可以使用任何可以创建`jar`作为 JDK 一部分的 zip 或实用程序的工具。您还可以使用 ant、maven、gradle、bildr 等创建自动构建，这将帮助您打包您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:58:43.640

我发现这是最快的：

首先，创建一个jar，复制到unix服务器并更改文件权限，就像下面提到的dopplesoldner一样。

您可以将库类和/或 jar 依赖项放在`lib`文件夹中

然后执行jar

```
 java -Djava.ext.dirs=lib/ -classpath yourJar.jar com.yourPackage.yourClass 
```

`yourClass`将是具有`main(String args[])`您想要执行的方法的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T14:54:19.917

我会做以下事情：

1.  为此程序创建一个专用目录。将依赖的 .jar 文件复制到该目录
2.  编写一个（短）脚本，将类路径设置为指向这些 jar，然后执行主类

鉴于上述情况，您是否创建可运行的 .jar 在很大程度上是一个风格问题。它将对用户隐藏。

我建议一个脚本，因为：

1.  您可以轻松设置常用的 JVM 参数（内存选项等）
2.  `java -jar {pathtojar}`打字等很痛苦（而且几乎不直观） 。

通过将 jar 复制到专用目录，您可以为不同的脚本使用不同版本的 jar（例如，您可能有 2 个程序使用两个不同版本的 commons-lang）

您还应该（可能）使用此脚本来明确确定您使用哪个版本的 Java 来运行程序。当您安装/升级时，您不想破坏您的程序，并且可以将脚本配置为明确绑定此信息。

# bash - 防止 bash vi 多行崩溃

> ID：11652425
> 
> 赞同：1
> 
> 时间：2012-07-25T14:47:56.110
> 
> 标签：bash, ubuntu, command-line, vi, multiline

在 Ubuntu Precise bash 中进行命令行编辑时，如何防止 vi 转换

```
for ii in `ls -a`
do
    echo $ii
done 
```

对这个...

```
for ii in `ls -a`; do echo $ii; done 
```

即使我 gsub ';' 对于 '^M'，当我 :wq 退出 tmp 文件时，它会恢复为分号。

我的 .bashrc 文件中有“set -o vi”和“EDITOR=vi”。否则香草安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:25:41.110

此行为由`cmdhist`和`lithist`shell 选项控制。尝试以下命令：

```
shopt -s lithist 
```

# android - 获取自定义叠加层的中心点

> ID：11652429
> 
> 赞同：0
> 
> 时间：2012-07-25T14:48:06.137
> 
> 标签：android, overlay

因此，我编写了一个自定义叠加项，用于填充基于地理点数组的透明蓝色叠加层

```
@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    Projection projection = mapView.getProjection();

    Paint fill = new Paint();
    fill.setColor(Color.BLUE);
    fill.setAlpha(50);
    fill.setStyle(Paint.Style.FILL_AND_STROKE);

    Path path = new Path();
    Point firstPoint = new Point();
    projection.toPixels(geoPoints.get(0), firstPoint);
    path.moveTo(firstPoint.x, firstPoint.y);

    for (int i = 1; i < geoPoints.size(); ++i) {
        Point nextPoint = new Point();
        projection.toPixels(geoPoints.get(i), nextPoint);
        path.lineTo(nextPoint.x, nextPoint.y);
    }

    path.lineTo(firstPoint.x, firstPoint.y);
    path.setLastPoint(firstPoint.x, firstPoint.y);

    canvas.drawPath(path, fill);

    super.draw(canvas, mapView, shadow);
} 
```

我需要的是一种方法来获得这个叠加层的中心点，这样我就可以在上面放置一个标记，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:09:51.567

虽然我不熟悉 android 框架，但我假设你用 java 编写并使用某种 google maps api。但我确实熟悉图形和地理开发。我对您的建议首先是检查标准 api 是否有某种 getBounds(path) 返回给您的 RectangularBounds 对象或类似对象。然后，您可以从矩形边界请求 bounds.getCenter() ，它将边界中心作为地理点或其他度量返回。如果您使用像素，只需像您一样转换地理点...

如果 api 中不存在 getBounds（难以置信），只需实现一个简单的接口，您可以在网上找到很多示例。

用于查找地理点的地理形状边界的简单伪代码，如果您需要像素分别使用 x，y：

```
bounds = { topLeft: new GeoPoint(path[0]), bottomRight: new GeoPoint(path[0])};
for( point in path ){
    bounds.topLeft.lat = max( bounds.topLeft.lat,point.lat );
    bounds.topLeft.lng = min( bounds.topLeft.lng,point.lng );
    bounds.bottomRight.lat = min( bounds.bottomRight.lat,point.lat );
    bounds.bottomRight.lng = max( bounds.bottomRight.lng,point.lng );
}

bounds.getCenter(){
    return new GeoPoint(rectangle center point); 
    // i am sure you will able to manage the code here )))
} 
```

希望这会有所帮助

# java - Eclipse - 将 .jar 添加到动态 Web 项目

> ID：11652431
> 
> 赞同：25
> 
> 时间：2012-07-25T14:48:16.263
> 
> 标签：java, mysql, servlets, jar

当我在eclipse`Dynamic Web Project`里面使用下面的代码时`servlet`，像这样：

```
@WebServlet("/CreateCustomerServlet")
public class CreateCustomerServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    private void test() throws SQLException, ClassNotFoundException {
        // use the JAR ...
        Class.forName("com.mysql.jdbc.Driver");//here the exception
    }
} 
```

它抛出异常：

`java.lang.ClassNotFoundException: com.mysql.jdbc.Driver`

在行中：

`Class.forName("com.mysql.jdbc.Driver");`

在动态 Web 项目的构建路径中，我添加了 jar：

`mysql-connector-java-5.1.21-bin.jar`

我添加了文件夹的快照，你可以看到它在哪里需要 jar -

![在此处输入图像描述](../Images/50bf7c2e8edbf569a70becd02b825d29.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-25T14:53:01.320

如您的屏幕截图所示，mysql jar 没有出现在*Web App Libraries*节点下。将 jar 粘贴到 中`WebContent/WEB-INF/lib`，它会自动添加到`and`webapp 的运行时类路径的构建路径中（它会出现在*Web App Libraries*下）。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-02T11:04:29.030

刚才我解决了这个问题。

*   只是去`properties`你的项目。
*   选择`Deployment Assembly`-> `add`-> `Java Build Path Entries`。

你完成了！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T09:51:56.023

尝试这样做：

在项目的根目录中创建一个名为 lib 的目录并将 .jar 放入其中。

在 WEB-INF 目录中，创建一个指向 lib 的链接。

现在，jar 将出现在 WebbApp Libraries 下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T14:50:28.043

编译时间和运行时间是两个不同的东西。您现在添加的内容仅用于编译时间和构建目的。运行时服务器尝试加载该类。也将相同的 jar 添加到项目 lib 文件夹（它将与 WAR 一起打包并在运行时可用于服务器）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-19T06:52:34.317

解决方案非常简单：

```
 1\. Right click on the your web project and choose PROPERTIES

 2\. Choose the J2EE Module Dependencies

 3\. Click on the Add External JARs… and then point on your library file (ZIP or JAR)

 4\. Click on Apply then OK.

 5\. Restart your Apache Tomcat 
```

添加的库应在以下位置看到：ProjectName > Java Resources: src > Libraries > WebApp Libraries。

# ios - ARC下将对象多次赋值给变量

> ID：11652432
> 
> 赞同：1
> 
> 时间：2012-07-25T14:48:20.697
> 
> 标签：ios

内存管理有一点我不是 100% 清楚，假设有以下代码：

```
{
NSString *string = [[NSString alloc] init];
string = [[NSString alloc] init];
} 
```

这会导致第一次分配的内存泄漏吗？如果不是为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:53:22.213

在 ARC 下，这不会泄漏内存。这是因为任何时候强对象指针发生变化，编译器都会自动向`release`旧对象发送一个。局部变量，如`NSString *string`，默认情况下是强变量。

所以你上面的代码被编译成更像这样的东西：

```
{
NSString *string = [[NSString alloc] init];

// Oh, we're changing what `string` points to. Gotta release the old value.
[string release];
string = [[NSString alloc] init];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:53:20.990

不，它不会导致泄漏。ARC 将在设置第二个字符串之前释放第一个字符串。这就是ARC真正惊人的力量！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:21:03.397

从概念上讲，BJ 是正确的，但生成的代码略有不同。它是这样的：

```
NSString *string = [[NSString alloc] init];

// Oh, we're changing what `string` points to. Gotta release the old value.
NSString *tmpString = string;
string = [[NSString alloc] init];
[tmpString release];
[string release]; // string goes out of scope at this point in your code 
```

这个操作顺序通常不是那么重要（如果你*太*在意它，你可能编码不正确）。但是理解它可以解释为什么物体在它们被摧毁的时候就被摧毁了。

# excel - 如何清除其中一列中包含空单元格的行，而不删除整行？

> ID：11652445
> 
> 赞同：1
> 
> 时间：2012-07-25T14:48:52.467
> 
> 标签：excel, vba, row, shift

一个看似简单的问题：

我在 A:E 列中有数据。E 列在某些行中有一些空白单元格。

我想删除 E 中包含空白单元格的所有行。**但是，这是**问题所在，后续列中还有其他数据。如果我删除整行，这些数据也将被删除，这是我不想要的。

更具体地说，我需要：（1）检查E列是否有空白单元格（2）如果找到空白单元格，请清除包含该单元格的行，但只有A：E列（3）移动列中的数据A:E 向上

我试过了：

```
Range("E2:E100").SpecialCells(xlCellTypeBlanks).Delete Shift:=xlUp 
```

但是这个只移动 E 列中的数据，而不是整行。

当然，我可以使用：

```
Range("E2:E100").SpecialCells(xlCellTypeBlanks).EntireRow.Delete 
```

但就像我说的，这将删除后续列中的数据，这是我不想要的。

有小费吗？

谢谢，

铝

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:54:30.320

你不能改变整体并留下一些行，这是一个矛盾。听起来你想这样做：

```
Range("A" & row & ":E" & row).Delete Shift:=xlUp 
```

其中 row 是您要删除的行号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:37:24.280

要删除“块”中的 A:E 但保留其他列完整，完整的解决方案是这样

```
Sub PartKill2()
Dim rng1 As Range
Dim rng2 As Range
ActiveSheet.UsedRange
On Error Resume Next
Set rng1 = Columns("E").SpecialCells(xlBlanks)
On Error GoTo 0
If rng1 Is Nothing Then Exit Sub
For Each rng2 In rng1.Areas
rng2.Cells(1).Offset(0, -4).Resize(rng2.Rows.Count, 5).Delete xlUp
Next
End Sub 
```

如果您想删除 E 为空白的整行，并且列 F:End 为空白（否则保留该行），则可以使用这个更复杂的版本

```
Sub PartKill1()
Dim rng1 As Range
Dim lngCell As Long
Dim lngArea As Long
ActiveSheet.UsedRange
On Error Resume Next
Set rng1 = Columns("E").SpecialCells(xlBlanks)
On Error GoTo 0
If rng1 Is Nothing Then Exit Sub
For lngArea = rng1.Areas.Count To 1 Step -1
For lngCell = rng1.Areas(lngArea).Cells.Count To 1 Step -1
If Application.CountA(Range(rng1.Areas(lngArea).Cells(lngCell).Offset(0, 1), Cells(rng1.Areas(lngArea).Cells(lngCell).Row, Columns.Count))) = 0 Then
rng1.Areas(lngArea).Cells(lngCell).EntireRow.Delete
End If
Next
Next
End Sub 
```

# php - 是否可以在 FuelPHP 中使用破折号路由所有 URL？

> ID：11652447
> 
> 赞同：4
> 
> 时间：2012-07-25T14:48:53.630
> 
> 标签：php, fuelphp, fuelphp-routing

`thisisatest`在以下配置中，除了在 URL 为 时指定要使用控制器的每个路由之外，是否可以使用正则表达式或任何其他方法`this-is-a-test/action`？我必须建立/扩展我自己的路由器类吗？

```
<?php
return array(
    '_root_'  => 'home/index',  // The default route
    '_404_'   => 'error/404',    // The main 404 route

    //'hello(/:name)?' => array('welcome/hello', 'name' => 'hello')
);

/* end of config/routes.php */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:53:14.357

我实现这一点的方式是`\Fuel\Core\Router`使用以下内容进行扩展。路由器类使用已通过方法传递的 URI，`security.uri_filter`而`config.php`不是修改路由器类方法，我让路由器扩展向该数组添加回调。

```
class Router extends \Fuel\Core\Router
{
    public static function _init()
    {   
        \Config::set('security.uri_filter', array_merge(
            \Config::get('security.uri_filter'),
            array('\Router::hyphens_to_underscores')
        ));
    }

    public static function hyphens_to_underscores($uri)
    {
        return str_replace('-', '_', $uri);
    }
} 
```

您可以`app/config/config.php`通过闭包或调用类方法或函数将其直接添加到配置数组中。

这样做的缺点是 /path_to_controller/action 和 /path-to-controller/action 都可以工作，并且可能会导致一些重复的内容 SEO 问题，除非您向搜索蜘蛛表明这一点。这是假设两个路径都在某处引用，即站点地图或`<a href="">`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:54:39.143

我相信路由器类默认没有该功能。您确实需要扩展或创建自己的路由器类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:34:10.090

您可以为此使用 security.uri_filter 配置设置。

创建一个将连字符转换为下划线的函数，您就完成了。您不需要为它扩展路由器类。只需向配置提供函数名称（无论是在类中还是在引导程序中定义的函数），就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T22:03:10.533

我知道这是在活动之后，但这是给其他任何想要在未来...

In order to avoid confusion between underscores and sub-folders I preferred to convert hyphens to camel-case, so routing URL `this-is-a-test` to class `Controller_ThisIsATest`.

I did this (in FuelPHP 1.4) by adding an anonymous function to the ‘uri_filter’ in the ‘security’ settings in `fuel/app/config/config.php`:

```
'security' => array(
    'uri_filter' => array('htmlentities',
        function($uri) { 
            return str_replace(' ', '', ucwords(str_replace('-', ' ', $uri))); 
        }),
), 
```

# jquery - 修复了使用同位素时网格中的项目

> ID：11652451
> 
> 赞同：4
> 
> 时间：2012-07-25T14:49:06.547
> 
> 标签：jquery, jquery-isotope

**案例：** 我有一个带有图像和两个文本框的网格。我正在使用[Isotope](http://isotope.metafizzy.co/index.html)来布局网格并对其进行洗牌。

**问题：** 文本框在网格中应该有一个固定的位置（没有随机播放）。图像可以随机播放。

**问题：** 如何让网格中的元素得到修复？我找到了一个已经完成的网站，我只是不知道如何......（[http://www.facesofnyfw.com/](http://www.facesofnyfw.com/)）在这里，第一个框（带有标题和过滤器，......）是固定的并且不要移动。

提前致谢，

伊部

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-27T16:35:10.187

之前的答案是正确的，但是 Isotope 发布了一个新版本，它使用“stamps”而不是“corner-stamps”。[在此处](http://isotope.metafizzy.co/options.html#stamp)查看文档。它允许您指定页面上某些元素的位置，然后 isotope 将在下面/（周围？）它们排列所有其他项目。我用它来修复容器 div 左上角的一个元素，它就像一个魅力。我想在其他地方定位可能会更困难，但我相信这是可能的！

HTML：

```
<div class="grid">
  <div class="stamp stamp1"></div>
  <div class="stamp stamp2"></div>
  <div class="grid-item"></div>
  <div class="grid-item"></div>
  ....
</div> 
```

JS：

```
// specify itemSelector so stamps do get laid out
itemSelector: '.grid-item',
// stamp elements
stamp: '.stamp' 
```

CSS：

```
/* position stamp elements with CSS */
.grid {
  position: relative;
}
.stamp {
  position: absolute;
  background: orange;
  border: 4px dotted black;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:50:52.943

你想让图像像湖中石头周围的水一样流动吗？除非您自己自定义插件，否则不要认为这是可以实现的。Shuffle 一次随机化所有元素位置。[你可以有一个角落印章。](http://jsfiddle.net/desandro/xaE7F/)如插件创建者所示。角戳 - 第一项，未过滤掉。

# php - 如何在 PHP 中定位数据库连接文件一次？

> ID：11652452
> 
> 赞同：0
> 
> 时间：2012-07-25T14:49:09.410
> 
> 标签：php, filepath

我的 PHP 应用程序具有不同的配置文件，它们具有不同的设置和不同的路径。但他们都只需要访问一个数据库连接文件。我想避免用许多`../`和`../../`. 如何编写相同的代码并在所有代码中使用它？
想象一下，我的 PHP 应用程序的配置文件有这个层次结构：

> root
> root/config/db.php （这个文件是我想从所有配置文件中提到的。）
> root/admin/config/conf.php
> root/users/conf.php

实际上我需要的是检测我的项目的根路径并通常创建相同的目录路径的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:53:14.707

使用`$_SERVER['DOCUMENT_ROOT']`然后路径到您的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:52:16.153

使用 PHP 的类自动加载，然后你需要将配置信息包装在一个类中，但它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:55:31.597

通过编辑您的 php.ini 文件或通过在每个页面上调用来设置[`include_path`](http://www.php.net/manual/en/ini.core.php#ini.include-path)指令。这样，您就可以在每个页面上。`root/``root/config/`[`set_include_path`](http://php.net/manual/en/function.set-include-path.php)`include/require "db.php"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:52:29.243

```
require_once("../../config/db.php"); 
```

将此文件包含在“conf.php”文件中

# javascript - 在 nodejs 中，“检查”就像一个保留字

> ID：11652454
> 
> 赞同：4
> 
> 时间：2012-07-25T14:49:13.690
> 
> 标签：javascript, node.js

在 node.js 中，在一个对象上调用 console.log，该对象具有一个名为`inspect`prints的元素，`undefined`即使它仍然作为一个对象工作。我认为这是因为节点在内部使用检查来打印内容。

```
var thingTwo = {
  num: 1,
  func: function (x) { 2; },
  inspect: function (x) { "hi"; },
};

console.log(thingTwo);  // undefined 
```

为了避免将来出现这个陷阱，是否有其他破坏标准功能的单词列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:10:52.013

酷，这激起了我的好奇心，事实上，有一个未记录的特性，一个对象可以提供它自己的`inspect`方法。[util.js](https://github.com/joyent/node/blob/ff140075738dc29392165b5bdfe8f011dca97f1e/lib/util.js#L189-L198)中的相关代码：

```
function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (value && typeof value.inspect === 'function' &&
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &&
      // Also filter out any prototype objects using the circular check.
      !(value.constructor && value.constructor.prototype === value)) {
    return String(value.inspect(recurseTimes));
  } 
```

即，它仅在`inspect`存在并且是触发行为的函数时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:10:07.530

如果一个对象有一个`inspect`属性**并且**它是一个函数，则`console.log`打印它的返回值。

```
$ node
> console.log({ inspect: function() { return 'hi'; } });
hi 
```

如果我们查看[source](https://github.com/joyent/node/blob/v0.6.20/lib/util.js#L154-162)，我们会发现没有办法避免这种行为。如果一个对象`inspect`是一个函数，`console.log`将打印它的返回值。

* * *

请注意，在 Node 0.6.x 及之前的版本中，`console.log`实际上并没有 print `undefined`，它只是打印一个空行。你只会看到`undefined`你是否在[REPL](http://nodejs.org/api/repl.html)中这样做。

# python - 循环指示器的进度

> ID：11652457
> 
> 赞同：5
> 
> 时间：2012-07-25T14:49:26.113
> 
> 标签：python, progress-bar

> **可能重复：**
> [Python 进度条](https://stackoverflow.com/questions/3160699/python-progress-bar)

我正在运行一个 for 循环 10,000 次，但在循环内部有很多计算正在进行。我想向控制台打印一条进度消息，通知我程序在循环中的距离可能需要等待多长时间。

基本循环是

```
n = 10000 
for i in range(n):
   do_stuff_method()
   if(i%100 == 0):
      print (float(i)/n)*100, 
```

这会在同一行打印出百分比消息，但问题是我打印出的下一件事也打印在同一屏幕上。那，由于有 99 个打印输出，控制台变得相当宽，并且有很多滚动。

我真正想要的是让控制台打印出当前完成的百分比，并且在一行上完成的估计时间替换之前打印的内容，因此不必进行大量滚动。

这可以做到吗？

干杯，戴维

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T15:01:17.950

在您的情况下，您只需将打印行更改为：

```
print "\r{0}".format((float(i)/n)*100), 
```

或者您可以像这样尝试而不是打印：

```
sys.stdout.write("\r{0}".format((float(i)/n)*100))
sys.stdout.flush() 
```

# silverlight - silverlight：在内存中创建一个文件并提供它以在本地保存它

> ID：11652458
> 
> 赞同：1
> 
> 时间：2012-07-25T14:49:25.720
> 
> 标签：silverlight, filesystems

我需要在内存中创建一个文件（不将其任何副本保存在文件系统中），然后将其提供给用户，以便他/她可以将其保存在他的文件系统中。如何在 Silverlight 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:54:27.357

在 Silverlight 中，对文件的访问只能由用户发起。这意味着，使用[SaveFileDialog](http://msdn.microsoft.com/en-us/library/system.windows.controls.savefiledialog%28VS.95%29.aspx)类保存文件。按照链接，那里有一个例子。

# jquery - 使用 jQuery 和验证提交表单

> ID：11652465
> 
> 赞同：0
> 
> 时间：2012-07-25T14:50:01.953
> 
> 标签：jquery, forms, validation, submit

我正在使用 validate.js 来验证表单。如果表单未通过验证，当用户尝试提交表单时会显示一条消息，显示错误。如果用户通过验证，则会弹出一条成功消息。问题是，表单实际上并没有发送/采取行动，因为 validate.js 阻止了默认行为。

阻止表单发送的代码是：

```
if (event && event.preventDefault) {
    event.preventDefault();
} else if (event) {
    event.returnValue = false;
} 
```

你可以在这里看到完整的 js：http: [//jsfiddle.net/DBfks/](http://jsfiddle.net/DBfks/)

在我看来，如果表单没有通过验证，上面的代码会阻止表单提交的默认行为，但如果通过了，那么表单应该提交。这个对吗？关于如何使表单提交而不是显示成功消息的任何想法（请参阅 jsfiddle 以了解成功和错误消息是如何工作的）

提前致谢。[你可以在这里](http://bajdesign.com/fstesting/contact-us/contact/)看到一个工作演示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:53:02.270

添加

```
 $("#myForm").submit(); 
```

您要提交表单的位置。

在你的 jsFiddle 你得到了这个 if/else：

```
if (errors.length > 0) {
                        SELECTOR_ERRORS.empty();

                        for (var i = 0, errorLength = errors.length; i < errorLength; i++) {
                            SELECTOR_ERRORS.append(errors[i].message + '<br />');
                        }

                        SELECTOR_SUCCESS.css({ display: 'none' });
                        SELECTOR_ERRORS.fadeIn(200);

                    } else {
                        SELECTOR_ERRORS.css({ display: 'none' });
                        SELECTOR_SUCCESS.fadeIn(200);

                    } 
```

（好吧，复制粘贴有点搞砸了！）

因此，如果有任何错误，请将所有错误添加到错误框中并显示出来。否则显示您验证了它。但这不是你想要的，你应该在那里提交表格：

```
else {
    $("#yourform").submit();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T19:44:03.753

代码不能使用 jQuery submit 的原因是 preventDefault 方法阻止了 jQuery 提交表单。解决方法是简单地删除这些行：

```
if (event && event.preventDefault) {
    event.preventDefault();
} else if (event) {
    event.returnValue = false;
} 
```

# django - Django中/admin/的ValueError

> ID：11652466
> 
> 赞同：1
> 
> 时间：2012-07-25T14:50:03.430
> 
> 标签：django, openldap, python-ldap

感谢您查看这个。我对 Django 和 LDAP Config 很陌生......所以非常感谢任何帮助！

ActivePython 2.6、Django-1.2.7、openldap-2.4.23、python-ldap

所以我安装了 Django。我正在尝试按照此说明[http://djangosnippets.org/snippets/901/](http://djangosnippets.org/snippets/901/)为其配置 LDAP 。

在按照上述文档中所述进行更改后，当我运行“python manage.py runserver”时，我遇到了这个错误。知道为什么会这样吗？一直在看这个大约一个星期，不知道如何解决这个问题。

```
Error:
ValueError at /admin/

option error

Request Method:     POST 
Request URL:    http://0.0.0.0:8080/admin/ 
Django Version:     1.2.7
Exception Type:     ValueError
Exception Value:    

option error

Exception Location:     /apps/essw/python/lib/python2.6/site-packages/python_ldap-2.4.10-py2.6-linux-x86_64.egg/ldap/functions.py in _ldap_function_call, line 63
Python Executable:  /apps/essw/python/bin/python
Python Version:     2.6.7
Python Path:    ['/apps/essw/mysite', '/apps/essw/python/lib/python2.6/site-packages/python_ldap-2.4.10-py2.6-linux-x86_64.egg', '/apps/essw/python/lib/python2.6/site-packages/elementtree-1.2.7_20070827_preview-py2.6.egg', '/apps/essw/python/lib/python2.6/site-packages/Markdown-2.2.0-py2.6.egg', '/apps/essw/python/lib/python2.6/site-packages/html5lib-0.95-py2.6.egg', '/apps/essw/python/lib/python26.zip', '/apps/essw/python/lib/python2.6', '/apps/essw/python/lib/python2.6/plat-linux2', '/apps/essw/python/lib/python2.6/lib-tk', '/apps/essw/python/lib/python2.6/lib-old', '/apps/essw/python/lib/python2.6/lib-dynload', '/apps/essw/python/lib/python2.6/site-packages', '/apps/essw/python/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info']
Server time:    Wed, 25 Jul 2012 09:06:41 -0500 
```

@ChrisPratt 感谢克里斯的回复！看看这是否有帮助

```
Environment:

Request Method: POST
Request URL: http://x.x.x.x:8080/admin/
Django Version: 1.2.7
Python Version: 2.6.7
Installed Applications:
['django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.admin',
'django.contrib.admindocs']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/apps/essw/python/lib/python2.6/site-packages/django/core/handlers/base.py" in     get_response
  100\.                     response = callback(request, *callback_args,        **callback_kwargs)
File "/apps/essw/python/lib/python2.6/site-packages/django/contrib/admin/sites.py" in     wrapper
  208\.                 return self.admin_view(view, cacheable)(*args, **kwargs)
File "/apps/essw/python/lib/python2.6/site-packages/django/utils/decorators.py" in     _wrapped_view
  76\.                     response = view_func(request, *args, **kwargs)
File "/apps/essw/python/lib/python2.6/site-packages/django/views/decorators/cache.py"     in _wrapped_view_func
  78\.         response = view_func(request, *args, **kwargs)
File "/apps/essw/python/lib/python2.6/site-packages/django/contrib/admin/sites.py" in     inner
  190\.                 return self.login(request)
File "/apps/essw/python/lib/python2.6/site-packages/django/views/decorators/cache.py"     in _wrapped_view_func
  78\.         response = view_func(request, *args, **kwargs)
File "/apps/essw/python/lib/python2.6/site-packages/django/contrib/admin/sites.py" in     login
  323\.         user = authenticate(username=username, password=password)
File "/apps/essw/python/lib/python2.6/site-packages/django/contrib/auth/__init__.py"     in authenticate
  52\.             user = backend.authenticate(**credentials)
File "/apps/essw/mysite/django_auth_ldap/backend.py" in authenticate
  824\.          ldap.set_option(ldap.OPT_X_TLS_CACERTFILE,settings.AD_CERT_FILE)
File "/apps/essw/python/lib/python2.6/site-packages/python_ldap-2.4.10-py2.6-linux-    x86_64.egg/ldap/functions.py" in set_option
  132\.   return _ldap_function_call(None,_ldap.set_option,option,invalue)
File "/apps/essw/python/lib/python2.6/site-packages/python_ldap-2.4.10-py2.6-linux-    x86_64.egg/ldap/functions.py" in _ldap_function_call
  63\.       result = func(*args,**kwargs)

Exception Type: ValueError at /admin/
Exception Value: option error 
```

# admin - Git Bash- 尝试删除目录时权限被拒绝。Git bash 有类似 sudo 的命令吗？

> ID：11652474
> 
> 赞同：2
> 
> 时间：2012-07-25T14:50:25.793
> 
> 标签：admin, bitbucket, git-bash

我创建了一个 bitbucket 存储库并从本教程开始： [https ://confluence.atlassian.com/display/BITBUCKET/Clone+Your+Git+Repo+and+Add+Source+Files](https://confluence.atlassian.com/display/BITBUCKET/Clone+Your+Git+Repo+and+Add+Source+Files)

一切都很顺利，直到我克隆了空存储库，它创建了一个名为 bb101repo 的文件夹，就像教程要求的那样。然后，本教程继续解释这个文件夹的名称不够精确，以及我们应该如何使用不同的名称创建一个新文件夹。

因此，当我尝试使用命令 rm -irf "bb101repo/" 删除文件夹时，终端会显示此消息："rm:cannot remove directory 'bb101repo': Permission denied。

有没有办法去sudo？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T16:43:37.740

我遇到了同样的问题，发现当我关闭 IDE（在我的情况下为 Aptana）时，我可以删除 .git 文件夹。IDE 锁定了目录，不让操作系统删除文件。希望这可以帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-25T14:53:17.420

sudo rm -rf 文件名应该可以解决问题

（可能会要求您输入密码）

要查看文件有哪些权限，您可以在存储地图的目录中使用 ls -l

您可以使用以下方法更改文件权限： chmod 755 在您想要更改的文件夹中，如果您想要递归，只需添加 -R

chmod -R 755 (r-rw-rwx)

# php - PHP 数组正在被消耗

> ID：11652476
> 
> 赞同：0
> 
> 时间：2012-07-25T14:50:29.080
> 
> 标签：php, arrays, generics, garbage-collection

我在 PHP 中使用数组时遇到了奇怪的事情。

```
$items = array();
$tools = json_decode($_GET['tools'],true);
foreach($tools as $key => $value)
{
   $items[$somevar][$anothervar] = $value;
} 
```

然后我可以迭代`$items`

```
foreach($items as $key => $value)
{
  //Do Something
} 
```

但奇怪的是，当我再次尝试迭代`$tools`with 时`foreach`，它返回`NULL`.

```
//Never Happens    
foreach($tools as $key => $value)
{
  //Do Something
} 
```

这可能是由垃圾收集器引起的吗？

我的应用程序使用 PHP 5.2.3、Linux CentOS、Apache 2.2 运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:59:44.300

不，我怀疑这与垃圾收集有关。

如果是零，垃圾收集器只会删除一个`zval`（PHP 变量容器） 。`refcount`这意味着，只有当没有变量引用指向数据时，它才会被删除。

只要您不执行`unset( $tools );`，该变量就应该可用。

有关详细信息，请参阅[http://php.net/features.gc.refcounting-basics.php](http://php.net/features.gc.refcounting-basics.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:53:30.667

`$tools`不是一个数组，它是一个对象。

将其更改为：

```
$tools = json_decode($_GET['tools'], true); 
```

该`true`参数将 json 解码为数组而不是对象。

更多信息：[PHP 文档](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:00:52.423

是的，它不是一个数组，所以它是这样工作的：

```
$tools->key // Return the value of your occurence 
```

# c# - 如何复制一个对象，然后将其与原始对象进行比较，看看它是否发生了变化？

> ID：11652477
> 
> 赞同：3
> 
> 时间：2012-07-25T14:50:33.263
> 
> 标签：c#, c#-4.0

我需要执行功能，如果用户要关闭窗口（或执行一些其他操作）而不保存他们的更改，他们将收到一个消息框通知。

为了能够做到这一点，我需要能够知道自从窗口打开以来是否对相关对象进行了更改。

我正在考虑的一种方法是在窗口加载时创建对象的副本并将其保持不变`_original`，然后在窗口关闭之前我可以将其与可能已更改或未更改的对象进行比较。

将对象复制到 中的最佳方法是什么`_original`，而不是它们都只是引用内存中的同一位置？

另外，之后比较两个对象的最佳方法是什么，看看对象是否不同`_original`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:53:12.830

[您可以使用BinaryFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)序列化对象，然后将其反序列化：

```
public static string Serialize<T>(T instance)
{
    var formatter = new BinaryFormatter();
    using (var stream = new MemoryStream())
    {
        formatter.Serialize(stream, instance);
        return Convert.ToBase64String(stream.ToArray());
    }
}

public static T Deserialize<T>(string serialized)
{
    var formatter = new BinaryFormatter();
    using (var stream = new MemoryStream(Convert.FromBase64String(serialized)))
    {
        return (T)formatter.Deserialize(stream);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T14:55:29.633

您可以以保持`modified`状态的方式实现您的对象，例如

```
public class StatefulObject
{
    private string _propertyOne;

    public StatefulObject()
    {
        this.Modified = false;
    }

    public string PropertyOne
    {
        get { return this._propertyOne; }
        set
        {
            if (this._propertyOne != value)
            {
                this._propertyOne = value;
                this.Modified = true;
            }
        }
    }

    public bool Modified { get; private set; }
} 
```

这将需要一些额外的工作，例如确定何时初始化对象（除非您仅将其限制为构造函数），但是，您明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:55:42.363

实现[ICloneable](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)它是一种简单的方法来进行浅拷贝（假设您的对象不是太复杂）然后您可以使用[IComparable](http://msdn.microsoft.com/en-us/library/System.IComparable.aspx)或[IEquatable](http://msdn.microsoft.com/en-us/library/ms131187.aspx)，具体取决于您要如何检查它们是否不同或只是它们不同。

如果你想要一个更好的答案，那么你需要更具体一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:55:37.433

我认为比较对象不是最好的解决方案。我建议观察窗户本身。如果您在窗口逻辑中使用属性，NotifyPropertyChanged 将是最好的。

[http://www.dreamincode.net/forums/topic/208833-using-the-inotifypropertychanged-functionality/](http://www.dreamincode.net/forums/topic/208833-using-the-inotifypropertychanged-functionality/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T14:57:35.777

这可能有点矫枉过正，但我​​会实现[icloneable](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)和[icomparable](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)。至于创建副本，如果对象是简单的[memberwiseclone](http://msdn.microsoft.com/en-us/library/system.object.memberwiseclone.aspx)始终是一个选项。如果对象是嵌套的 udt，您将不得不将 idom 继续简化为简单类型，但我发现单元测试无论如何都会有所帮助。

# javascript - 创建从一个地方到另一个地方的路径动画

> ID：11652479
> 
> 赞同：0
> 
> 时间：2012-07-25T14:50:37.797
> 
> 标签：javascript, jquery, jquery-ui

我目前正在创建一个拼写游戏，目前是**拖放**。游戏的目的是将字母拖到网格中相应的单词上。拼写旁边的网格中的单词被突出显示，以向用户显示放置字母的位置。

问题是我现在想更改它，以便您**单击字母**并将它们**动画**到**指定位置**

我知道我必须使用 JQuery**路径动画**来执行此操作，但我需要使用坐标还是可以这样做，以便它链接到网格中突出显示的区域？

这是处理**拖放的****脚本**部分以及显示**正确单词、错误单词和要拼写的单词**的**样式。**

 ******```
$('#pickNext').click(function() {
// remove the class from all td's
$('td').removeClass('spellword');
// pick a random word
rndWord = shuffledWords.sort(function() {
    return 0.8 - Math.random();
})[0];
// apply class to all cells containing a letter from that word
$('td[data-word="' + rndWord + '"]').addClass('spellword');
});

$('.drag').draggable({

helper: 'clone',
snap: '.drop',
grid: [60, 60],
revert: function(droppable) {
    if (droppable === false) {
        return true;
    }

    else {

        return false;
    }
}
});

$(".drop").droppable({
drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));
    console.log($(event));
    console.log($(ui.draggable).text());

    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    if ($(this).text() == $(ui.draggable).text().trim()) {

        $(this).addClass('wordglow3');
    } else {
        $(this).addClass('wordglow');
    }
    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + ']').addClass('wordglow2');

        } else {
            $('td[data-word=' + word + ']').addClass("wordglow4");
            guesses[word].splice(0, guesses[word].length);
        }
    }

},

activate: function(event, ui) {
    word = $(this).data('word');

    // try to remove the class
    $('td[data-word=' + word + ']').removeClass('wordglow').removeClass('wordglow4').removeClass('wordglow3');
}

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:19:49.323

愿这把[小提琴](http://jsfiddle.net/3MgT3/1)帮助你。只需为移动动画添加一个 css 过渡，然后使用 jquery 设置单击右字母时的位置...******

# php - php快速递归目录过滤器

> ID：11652481
> 
> 赞同：1
> 
> 时间：2012-07-25T14:50:40.390
> 
> 标签：php, performance, optimization, directory, spl

我必须在一个大目录中递归搜索 xml 文件，并且必须测试它们是否包含特定标记“<运行>”。目前我将 RecursiveDirectoryIterator 与 RecursiveFilterIterator 一起使用，因为我认为新的 PHP SPL 将是最快的解决方案，但事实并非如此（不可能在 30 秒内计算出结果）——最快的方法是什么？递归全局？我没有足够的时间来测试/分析所有可能的方法来获取所有 xml 文件并测试它们是否包含此标记。

过滤器实现：

```
class MyRecursiveFilterIterator extends RecursiveFilterIterator {

public function accept() {

    if ($this->current()->isDir())
        return true;

    if (Utils::endsWith($this->current(), "xml")){

        $content = file_get_contents($this->current());

        if(strpos($content, "<run>") !== false)
            return true;

        return false;
    }

    return false;

}

} 
```

捕获所有数组：

```
[..]
$result = array();

    try  {

        $dirItr    = new RecursiveDirectoryIterator($root);
        $filterItr = new MyRecursiveFilterIterator($dirItr);
        $itr       = new RecursiveIteratorIterator($filterItr, RecursiveIteratorIterator::SELF_FIRST);

        foreach ($itr as $filePath => $fileInfo) {
            if($fileInfo->isDir())
                continue;

            array_push($result, $filePath);

        }

    } catch (Exception $e) {
        die($e);
    }
[..] 
```

有什么建议么？

**编辑：**

*硬核*linux版本只需要大约1或2秒！难道不能在php中实现类似的结果吗？！

```
$output = `find $root -type f -iname "*.xml" | xargs grep "<run>" --files-with-matches`;
$output = explode("\n", $output); 
```

**编辑 2：** 找到了一个更快的 bash 版本：

```
 find path/to/files \( -name ".*" -prune -or \( -type f -and -name "*.xml" \) \) -and -not -name ".*" -exec grep -lsm 10 "^<" {} \+ 
```

# java - java.lang.Class.getEnclosureMethod0(Native Method) 中有很多 RUNNABLE 线程

> ID：11652482
> 
> 赞同：2
> 
> 时间：2012-07-25T14:50:42.147
> 
> 标签：java, jvm

我一直在使用我们系统的线程转储来解决各种问题，我注意到的一件事是，无论好坏，我们在线程转储中有很多这样的事情：

```
"TP-Processor59" - Thread t@915
   java.lang.Thread.State: RUNNABLE
    at java.lang.Class.getEnclosingMethod0(Native Method)
    at java.lang.Class.getEnclosingMethodInfo(Class.java:929)
    at java.lang.Class.getEnclosingClass(Class.java:1081)
    at java.lang.Class.getSimpleBinaryName(Class.java:1220)
    at java.lang.Class.getSimpleName(Class.java:1112) 
```

现在，我们确实对我们的配置系统所依赖的 getSimpleName() 进行了很多调用。但我的问题是为什么他们总是陷入这种特殊的方法？这是一个 Windows JVM，1.6.0_29，64 位。

我觉得 getSimpleName() 通常应该是一个非常快速的调用。这很可能是 getEnclosureMethod0() 在某种程度上非常慢，还是该本机方法可能会以某种方式阻塞某些东西（当然，这不会出现在 JVM 线程转储中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:58:05.373

今天我们遇到了一个无限循环的问题。在对问题进行故障排除时，我们看到大多数情况下线程堆栈都以这个方法调用结束。

当我们发现问题时，它与 getEnclosureMethod0 无关，而是更高级别的无限循环。尽管在循环中做了一些相当昂贵的事情，但 getEnclosureMethod0 调用似乎是迄今为止完成的最慢的事情。

我的结论是 getEnclosureMethod0 有时会非常慢，即使它没有阻塞（在我们的案例中它没有阻塞 AFAIK）。

# android - 使用返回按钮呼叫无线设置屏幕

> ID：11652483
> 
> 赞同：0
> 
> 时间：2012-07-25T14:50:44.267
> 
> 标签：android, settings, android-4.0-ice-cream-sandwich, android-wireless

如果当您打开 Play Market 并选择新帐户或现有帐户时没有无线连接且没有登录 google 帐户，它会打开特定的无线设置屏幕，底部有返回按钮。 ![带返回按钮的无线设置](../Images/ce43c32a5851049bd21199360c67fa01.png)

如何从我的应用程序打开同一个屏幕？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T12:41:12.070

```
 Intent intent = new Intent(WifiManager.ACTION_PICK_WIFI_NETWORK);       
    intent.putExtra("only_access_points", true);
    intent.putExtra("extra_prefs_show_button_bar", true);
    intent.putExtra("wifi_enable_next_on_connect", true);
    startActivityForResult(intent, 1); 
```

这应该这样做。从谷歌代码逆向工程。

复制自[如何在“选择 wifi 网络”窗口上叠加“返回”和“下一步”按钮？](https://stackoverflow.com/questions/11215473/how-can-i-overlay-a-back-and-next-button-on-a-pick-wifi-network-window).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:53:34.767

我不确定，但也许有偏好。我知道您可以使用该设置调用其他设置。

# android - AndEngine 支持的设备

> ID：11652485
> 
> 赞同：1
> 
> 时间：2012-07-25T14:50:48.137
> 
> 标签：android, opengl-es, andengine

我开始使用 AndEngine 并尝试加载纹理以在屏幕中制作精灵。在我的活动课上，我有

```
public EngineOptions onCreateEngineOptions() {

     DisplayMetrics dm = new DisplayMetrics();
     getWindowManager().getDefaultDisplay().getMetrics(dm);

     CAMERA_WIDTH = dm.widthPixels;
     CAMERA_HEIGHT =  dm.heightPixels;

     float screenResolutionRatio = ((float)CAMERA_WIDTH/(float)CAMERA_HEIGHT);

    this.mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    final EngineOptions options = new EngineOptions(true,
                                                    ScreenOrientation.PORTRAIT_FIXED, 
                                                    new RatioResolutionPolicy(screenResolutionRatio),
                                                    this.mCamera);
        return options;
    }

public void onCreateResources(OnCreateResourcesCallback arg0)
            throws Exception {
      mTextures = new NTTextures(this);     

    } 
```

NTTexture 是一个加载纹理的类。

这是代码中有意义的部分：

```
public NTTextures(final BaseGameActivity activity) {
    try
    {
        BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");
          this.spritesheetTexturePack = new TexturePackLoader(activity.getAssets(), activity.getTextureManager()).loadFromAsset("gfx/baseAtlas.xml", "gfx/");
        this.mSpritesheetTexture = spritesheetTexturePack.getTexture();
        this.mSpritesheetTexturePackTextureRegionLibrary = spritesheetTexturePack.getTexturePackTextureRegionLibrary();
        this.ping= this.mSpritesheetTexturePackTextureRegionLibrary.get(baseAtlas.PING_ID);

       activity.getEngine().getTextureManager().loadTexture(this.mSpritesheetTexture);

    } catch (final TexturePackParseException e) {
            Log.e("Error", String.valueOf(e));
        }

      } 
```

所以，所有这一切都完成了，我有一个错误日志和崩溃。

```
07-25 18:44:23.880: D/AndEngine(32659): NTGameActivity.onCreate @(Thread: 'main')
07-25 18:44:23.930: W/dalvikvm(32659): VFY: unable to resolve static method 391: Landroid/opengl/GLES20;.glVertexAttribPointer (IIIZII)V
07-25 18:44:24.100: D/AndEngine(32659): NTGameActivity.onResume @(Thread: 'main')
07-25 18:44:24.290: D/AndEngine(32659): VERSION: OpenGL ES 2.0 1309647
07-25 18:44:24.290: D/AndEngine(32659): RENDERER: Adreno 200
07-25 18:44:24.290: D/AndEngine(32659): EGLCONFIG: EGLConfig(Red=5, Green=6, Blue=5, Alpha=0, Depth=0, Stencil=0)
07-25 18:44:24.290: D/AndEngine(32659): EXTENSIONS: GL_AMD_compressed_3DC_texture GL_AMD_compressed_ATC_texture GL_AMD_performance_monitor GL_AMD_program_binary_Z400 GL_EXT_texture_filter_anisotropic GL_EXT_texture_format_BGRA8888 GL_EXT_texture_type_2_10_10_10_REV GL_OES_compressed_ETC1_RGB8_texture GL_OES_depth_texture GL_OES_depth24 GL_OES_EGL_image GL_OES_element_index_uint GL_OES_fbo_render_mipmap GL_OES_fragment_precision_high GL_OES_get_program_binary GL_OES_packed_depth_stencil GL_OES_rgb8_rgba8 GL_OES_standard_derivatives GL_OES_texture_3D GL_OES_texture_float GL_OES_texture_half_float GL_OES_texture_half_float_linear GL_OES_texture_npot GL_OES_vertex_half_float GL_OES_vertex_type_10_10_10_2 GL_NV_fence GL_QCOM_driver_control GL_QCOM_perfmon_global_mode GL_QCOM_extended_get GL_QCOM_extended_get2 GL_QCOM_tiled_rendering GL_QCOM_writeonly_rendering GL_QCOM_memory_monitor 
07-25 18:44:24.290: D/AndEngine(32659): MAX_VERTEX_ATTRIBS: 16
07-25 18:44:24.290: D/AndEngine(32659): MAX_VERTEX_UNIFORM_VECTORS: 251
07-25 18:44:24.290: D/AndEngine(32659): MAX_FRAGMENT_UNIFORM_VECTORS: 222
07-25 18:44:24.300: D/AndEngine(32659): MAX_TEXTURE_IMAGE_UNITS: 16
07-25 18:44:24.300: D/AndEngine(32659): MAX_TEXTURE_SIZE: 4096
07-25 18:44:24.300: D/AndEngine(32659): NTGameActivity.onSurfaceCreated @(Thread: 'GLThread 9')
07-25 18:44:24.300: D/AndEngine(32659): NTGameActivity.onCreateGame @(Thread: 'GLThread 9')
07-25 18:44:24.310: D/AndEngine(32659): NTGameActivity.onCreateResources @(Thread: 'GLThread 9')
07-25 18:44:30.310: I/global(32659): Default buffer size used in BufferedInputStream constructor. It would be better to be explicit if an 8k buffer is required.
07-25 18:44:30.420: D/AndEngine(32659): NTGameActivity.onSurfaceChanged(Width=320,  Height=480) @(Thread: 'GLThread 9')
07-25 18:44:31.000: W/dalvikvm(32659): VFY: unable to resolve static method 353: Landroid/opengl/GLES20;.glDrawElements (IIII)V
07-25 18:44:31.000: W/dalvikvm(32659): VFY: unable to resolve static method 391: Landroid/opengl/GLES20;.glVertexAttribPointer (IIIZII)V
07-25 18:44:31.030: W/dalvikvm(32659): Exception Lorg/andengine/util/exception/AndEngineRuntimeException; thrown during Lorg/andengine/opengl/GLES20Fix;.<clinit> 
```

我用 Android 2.2 测试 LG Optimus One，所以我认为我的设备不需要 GLES 库。这是错误的原因还是我的代码中有错误？另外，是否有 AndEngine 支持的设备列表？

**另外：** 我检查了测试过的手机规格——它具有支持 OpenGLES 2.0 的 Adreno 200。所以，它一定需要库，但它不需要。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:56:09.327

为确保部署因设备上错误的 OpenGL 版本而失败，您可以在 Manifest 文件中插入以下行：

```
<uses-feature android:glEsVersion="0x00020000" /> 
```

Eclipse 不允许您在不支持 OpenGL ES 2.0 的设备上部署应用程序。这也将阻止使用旧设备的用户从 Google Play 下载您的应用程序。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T11:58:55.643

你可以试试这个方法：`AndEngine.isDeviceSupported()`

# asp.net - 使用拖放合并图像 - asp.NET

> ID：11652486
> 
> 赞同：-1
> 
> 时间：2012-07-25T14:50:48.650
> 
> 标签：asp.net, c#-4.0, drag-and-drop, gdi

我想构建一个页面，用户可以将图像拖放到彼此之上，然后将它们合并到一个图像中。

Somthig 像这样[http://tympanus.net/Tutorials/ImageVampUp/](http://tympanus.net/Tutorials/ImageVampUp/)但在服务器端使用 c#/asp.net。

有谁知道我可以从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:19:46.213

C# 后端确实应该相当简单。System.Drawing 类很好地支持 alpha。如果您将支持 alpha 的图像（例如 PNG）加载到 Image 类中，那么当您调用 Graphics.DrawImage 方法时，将保留透明度，显示您刚刚在其上绘制的图像后面的底层图像。您可以通过其他方式控制 Alpha，例如通过 ImageAttributes 为图像添加透明度。这是我能提供的最佳答案，没有更具体的问题。

对于前端，像您链接到的示例这样的动态 html 的 javascript 可能是一个不错的选择，特别是如果您使用一个很好的 js 框架来照顾您的浏览器兼容性。

编辑：我应该提到 System.Drawing 被记录为不适用于 ASP.NET。但事实上，这是 .NET 中所有与绘图相关的 API 所在的命名空间，并且绘图是 Web 服务的一个非常有效的用例。您可以查找 Windows Imaging Components，如果您愿意，这是他们推荐的替代方案，但您将离开 C# 领域。当您不尝试成为超高吞吐量服务时，我没有发现在 ASP.NET 应用程序中使用简单的图像相关调用有任何问题。

# asp.net - Updatepanel 使用用户控件自定义事件导致完全回发

> ID：11652487
> 
> 赞同：0
> 
> 时间：2012-07-25T14:50:49.977
> 
> 标签：asp.net, ajax, vb.net, updatepanel

我以前见过这个问题，但似乎没有一个答案对我有用。这是我的 updatePanel 部分（在 hi.ascx 中）：

```
<asp:UpdatePanel runat="server" ID="upUL" UpdateMode="Conditional" >
<ContentTemplate> 
```

...

```
 <Angel:Pager id="pager" runat="server" OnPageClicked="Pager_PageSelected" />
        <!--End of control div-->
</ContentTemplate>
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="lbBlock" />
    <asp:AsyncPostBackTrigger ControlID="lbUnblock" />
    <asp:AsyncPostBackTrigger ControlID="pager" EventName="PageClicked" />
</Triggers>
</asp:UpdatePanel> 
```

现在这是 Pager.ascx.vb 中的代码：

```
Public Delegate Sub ClickPage(sender As Object, e As PageClickedEventArgs)
Public Event PageClicked As ClickPage

Public Class PageClickedEventArgs
    Inherits EventArgs
    Public Property PageNumber() As Integer
End Class 
```

……

```
Protected Sub rpPaging_Click(ByVal sender As Object, ByVal e As CommandEventArgs)
    Dim pageNum As Integer
    Integer.TryParse(e.CommandArgument.ToString(), pageNum)
    If (pageNum <> 0) Then
        Dim args As New PageClickedEventArgs
        args.PageNumber = pageNum
        RaiseEvent PageClicked(sender, args)
    End If
    'SelectNewPage(pageNum)
End Sub 
```

最后，这是我在 hi.ascx.vb 页面上的代码：

```
 Public Sub Pager_PageSelected(sender As Object, ByVal e As    Paging.PageClickedEventArgs)
        BindData(False, e.PageNumber)
    End Sub 
```

正如我在标题中所说。当我从 pager.ascx 引发一个事件时，它会导致一个完整的回发（并且效果很好，但我希望它在 Ajax 中）。
此更新面板中的其他控件（链接按钮），如 lbBlock 和 lbUnblock ，运行良好，不会导致完全回发！

请帮帮我。我花了太多时间在上面，似乎没有任何效果！

谢谢，
冉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:02:08.500

这解决了问题：

```
 Protected Sub rpPaging_onItemCreated(ByVal sender As Object, ByVal e As RepeaterItemEventArgs)

    Dim lb = e.Item.FindControl("lbPage")
    If lb IsNot Nothing Then _
        ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(lb)

End Sub 
```

显然，中继器中的控件不会自动注册...所以我需要将它们中的每一个都添加到脚本管理器中！

希望它会对那里的人有所帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:14:39.177

asp.net 不知道如何`PageClicked`在客户端跟踪您的事件。所以触发条件触发器不会发生。

如果此事件对应于自定义控件中的按钮或链接按钮的事件，则公开该事件，更新面板将使用它来跟踪客户端的事件。

不太习惯 VB，这是您在 c# 中公开事件的方式

```
public event EventHandler PageChanged
{
    add { grd.PageChanged += value; }
    remove { grd.PageChanged -= value; }
} 
```

# jquery - 如何将 Rails 合并到 jqPlot 中？

> ID：11652492
> 
> 赞同：0
> 
> 时间：2012-07-25T14:50:57.170
> 
> 标签：jquery, ruby-on-rails, ruby, sqlite, jqplot

我在通过 Rails 使用的 SQLite3 数据库中有一些数据。我正在尝试以图形方式显示此数据。使用条形图、饼图等。决定使用 jQuery 框架来帮助我完成这项任务，所以我决定使用 jqPlot 来制作实际图表。

如何从我的表中获取动态数据？我可以使用手动数据弹出图表，但这显然从长远来看没有帮助。我将我的大部分代码放在我的视图中（之后我会将逻辑移动到模型中，为你们 Rails Purists），这是一个 .html.erb 文件（嵌入 Ruby）。如果不使用 <% 和 %>，我无法访问我的表，但是 html 本身不理解 Ruby。我目前的代码如下：

```
<% foo = [] %>

<% Book.all.each do |book| %>
  <% foo.push([book.isbn]) %>
<% end %>

$.jqplot('chartdiv',  [foo],
{
  title: {
    text: 'Test Message',
  },
}); 
```

但是 jqplot 函数不知道是什么`foo`。如何获取图表以使用存储在数据库中的数据？

Ruby 1.9.3、Rails 3.2.6、SQLite3 3.6.20、jquery-rails 2.0.2 (RubyGem)、JQuery 1.7.2、jqplot 1.0.0_r1012。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:02:24.683

你有没有试过这个：

```
$.jqplot('chartdiv',  [ <%= foo %> ],
{
    title: {
        text: 'Test Message',
    },
}); 
```

也许你将不得不做类似 foo.join(",") 的事情来将你的数组转换为一个逗号分隔的值列表......

# java - 即时编译 - 存储与始终执行

> ID：11652499
> 
> 赞同：3
> 
> 时间：2012-07-25T14:51:09.407
> 
> 标签：java, performance, jvm, jit, jvm-hotspot

> **可能重复：**
> [为什么 JVM 不缓存 JIT 编译代码？](https://stackoverflow.com/questions/1992486/why-doesnt-the-jvm-cache-jit-compiled-code)

我知道 JIT 编译是使用热点机制编译为本机代码，它可以非常非常快，因为它是对 OS、Hardwards 等的优化。

我的问题是，为什么 Java 不将 JIT 编译的代码存储在文件中的某个位置并为将来的目的使用相同的代码？这也可以减少“初始预热”时间。

请让我知道我在这里缺少什么。

补充一下我的问题：为什么 Java 不将完整的代码编译为本地代码并始终使用它（对于特定的 JVM、操作系统、平台）？为什么选择 JIT？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:02:37.417

虽然可以保证您将始终使用 JVM，但不能保证您将始终使用相同的 JVM。热点优化代码仅对您的机器有效。

使用 Java，不能保证代码是 JVM 的本地代码。小程序就是一个很好的例子，Webstart 也说明了这一点。通用的“保持优化”只会在很少运行的代码中弄乱缓存，并在何处保留优化的扩展时产生问题。

在知道磁盘缓存保留多长时间方面也会产生相当大的难题，并且您是否不必重新编译“类”文件以验证缓存是否用于类文件的正确“释放”？Java 没有相同类文件指示符的“此版本”，但可选的串行版本 uid 除外。

通过检查类文件的总和并将其放置在已编译类的字段中，也许有一种解决方法，但我不想考虑 JVM 的启动时间，该 JVM 的任务是扫描所有缓存的机器特定代码、构建表、干预类加载器，并使用优化代码检查加载类的校验和。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:56:55.357

我自己也问过这个问题。我得到的印象是很难做到正确并避免拥有包含过时代码的商店。

解决此问题的一种方法是`-XX:+PrintCompilation`编写一个简短的预热程序来预热这些方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T16:55:17.487

它存在于.Net（在许多方面类似于java），它被称为NGEN。所以我不明白为什么它不能在java中存在。

我可以看到没有完成的两个原因：

*   Java 没有像 .net 那样用于其程序集的良好 ID 机制。但是确实可以使用散列（在 jar 或类级别）。
*   它主要（仅？）在应用程序启动时受益。从 JRE6 开始，启动速度变得更快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T15:29:00.877

如果我没记错的话，已经尝试过缓存和共享 JIT 编译的代码，发现不是一个好主意。

一方面，现代 HotSpot JIT 编译器在当前 CPU 模型的上下文中生成和优化代码，以及当前执行的使用模式。如果要缓存已编译的代码，那么代码很可能不是最优的。

另一方面，显然存在各种欺骗性的技术问题。例如，缓存的代码成为潜在的安全漏洞，例如，代码区域需要由共享它的所有应用程序/用户写入。但这意味着一个用户可能会干扰另一个用户的应用程序的运行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-26T03:15:46.647

一些 JVM（比如 IBM 的）确实有“[提前共享 JIT 代码](http://publib.boulder.ibm.com/infocenter/java7sdk/v7r0/index.jsp?topic=/com.ibm.java.win.70.doc/diag/understanding/aot.html)”。这很难做到（正如其他答案所指出的那样），因为一个 JVM 一次使用的类文件可能与下次使用的类文件不同，即使它们具有相同的名称。因此，需要大量的逻辑来证明“之前看到的 AI 类与现在的 AI 类是一样的”。

另一个问题是 JIT 代码通常包含地址空间特定值（例如：给定静态变量的地址，或另一个 JIT 方法的入口点），并且这些值可以（而且肯定会！）在每次 JVM 调用时发生变化，所以同样，在处理这些问题时必须小心。

AOT 代码提供的性能优势是真实的，该功能非常值得根据情况使用。（特别是：事情不会改变运行，等等 - 比如调用相同版本的应用服务器或 Eclipse，例如）

# cocoa - 可可：nsarraycontroller添加对象错误

> ID：11652501
> 
> 赞同：0
> 
> 时间：2012-07-25T14:51:13.300
> 
> 标签：cocoa

在我的 MainController 中，有一个 people 数组，它绑定到一个 NSArrayController。人员的姓名显示在表格`name`列中。如果我将一个按钮绑定到 NSArrayController add 方法，我可以添加按钮来添加一个新人，但是如果在方法中添加新人，表格不会显示新人，我不知道为什么。

![在此处输入图像描述](../Images/def7a81ea36da55c83c270ad7cda093d.png)

我添加新人的代码

```
Person *p =[[Person alloc]init];
[self.persons addObject:p]; 
```

更新：我知道[http://chanson.livejournal.com/85659.html](http://chanson.livejournal.com/85659.html)的答案， 因为 NSMutableArray addObject 不是 KVC，所以我需要使用

```
 [[self mutableArrayValueForKey:@"persons"] addObject:person]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:31:05.217

如果 [self.persons addObject:p] 行中的 self.persons 指的是数组，那么您需要添加行 self.persons = persons; 在它更新表格之后。我一直不太清楚为什么这是必要的，大概是与 KVO 有关。

另一方面，如果 self.persons 指的是数组控制器，那么它应该像您编写的那样工作，因为将对象添加到数组控制器就是将其添加到其排列的对象中，表列绑定到该对象。这样做也会更新数组，因为它绑定到数组控制器。

# r - 从 .dat 和 .sps 文件将数据输入到 R

> ID：11652502
> 
> 赞同：9
> 
> 时间：2012-07-25T14:51:14.440
> 
> 标签：r, data-import

我一直在尝试使用 .dat 和 .sps 文件将数据导入 R。.dat 文件没有标题和不同长度的列，这些列当然包含在 .sps 文件中。它还包含缺失值。我尝试使用`spss.fixed.file`from package **memisc**但是当我将其指定为：

```
x=spss.fixed.file(file=data.dat,columns.file=input.sps,varlab.file=input.sps) 
```

我收到以下错误：

> spss.parse.variable.labels(varlab.file) 中的错误：“变量标签”语句过多

以前有人用过这个命令/包吗？鉴于所有这些信息都包含在同一个 .sps 文件中，我无法理解 column.file 和 varla.file 是否可以作为同一个文件。任何帮助将不胜感激！

# events - 无法在nodejs中使用互联网电话获得socket-IO连接

> ID：11652506
> 
> 赞同：0
> 
> 时间：2012-07-25T14:51:23.160
> 
> 标签：events, node.js, socket.io

我正在尝试制作互联网电话交换机。基本上，当有人按下手机上的特定按钮时，它会向我的网站发出 GET 调用，并且该 GET 调用会通过 socket.IO 触发一个事件，连接到该网站的每个人都可以看到该事件。

我得到了 GET 调用就好了，我的服务器注意到它就好了。但由于手机无法呈现网页，我无法让它触发事件。如果我只有两台不同的计算机和两个浏览器，那么一切都会按照我想要的方式运行。

当我在我的“layout.jade”上呈现一个页面时，如果你在正确的页面中，这个代码会触发一个事件。

```
var socket = io.connect('http://MYWEBPAGE.org:3000');
    socket.on('connect', function () {
        if ($('title')[0].text == "IMC_log") {
            socket.emit('server_call');
        }
    });
    socket.on('call', function () {
        console.log("CALL HERE");
    }); 
```

在 server.js 我有

```
io.sockets.on('connection', function (socket) {
    socket.on('server_call', function () {
        socket.broadcast.emit('call');
    });
}); 
```

仅使用浏览器即可。但是现在当我使用手机时，它不会触发“server_call”事件，因为（可能）它无法呈现页面，所以它实际上从未使用过“layout.jade”。但是由于它的 GET 调用很好，我希望能够从我的 server.js 文件（或 index.js，两者都很好）中触发该事件，唉，我不知道该怎么做。如果我尝试这样关闭它：

```
app.get ("/log_get", function () {
    socket.broadcast.emit('call');
}); 
```

它只是抱怨未定义套接字。问题似乎是它需要 io.sockets.on('connection', function (socket) {... 为了能够识别“套接字”，但我不能这样做，因为我那里已经有一个“连接中”。

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:43:53.720

Npm 模块 socket.io-client 完成了这项工作。

# actionscript-3 - 在 Flash 11.3 中加载 ATF 纹理有效，但内存使用率很高

> ID：11652507
> 
> 赞同：2
> 
> 时间：2012-07-25T14:51:23.893
> 
> 标签：actionscript-3, stage3d

我知道目前还没有完全得到官方支持，但我正在尝试使用开源项目[ATF-Encoder](https://github.com/plepers/ATF-Encoder)生成 ATF 纹理。然后，我尝试将其上传到 Stage3D 纹理`uploadCompressedTextureFromByteArray`，它本身自 FP11 以来就受支持。

这在纹理正确上传和显示的意义上是有效的。我还可以验证生成的纹理上是否存在压缩伪影，特别是如果我在编码期间增加量化因子，并且生成的 ByteArray 比“原始”纹理小得多（大约小 20 倍）。

但是，使用 Process Explorer 测量 GPU 使用率时，我仍然在每个纹理消耗完全相同数量的 VRAM（即每个像素 5.333 字节），而不是预期的小得多的值。

纹理是使用 BGRA 模式而不是压缩模式创建的 - 如果我尝试压缩，它会在尝试上传时给我“不兼容的格式”。据我所知，ATF 格式支持“压缩模式”纹理，但 ATF 编码器不输出带有该标志集的纹理？（我尝试在压缩完成后强制打开标志，不出所料，这只会使 Flash 崩溃）

有没有人有关于这个问题的更多信息？编码正确的 ATF 并使用 Compressed 标志上传可以解决问题吗？或者这是一个实现错误，它接受压缩的有效负载，但在上传时解压缩？这里的任何信息都是有价值的，真的。

这是在硬件模式下，在 AMD Radeon 6450、Windows 7 64 位、Flash Player 11.3 上（同样的事情发生在 11.4 beta 中）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T15:57:28.780

为了澄清 renaun 的意思，ATF 中有多种类型的压缩在起作用：

块压缩（PVRTC、DXT5 和 ETC1）是反映 GPU 内存节省的压缩类型。如果您不使用块压缩，您的纹理将作为 RGBA 上传，并使用与 PNG 一样多的 GPU 内存。

除此之外，JPEG XR 也可以应用于 ATF 文件，无论您是否使用块压缩。这将减少 ATF 的文件大小，但不会减少所需的 GPU 内存量。请注意，量化级别 0 是无损的，因此不会引入更多伪影，但使用 Adob​​e 的 png2atf 实用程序，您可以设置量化因子（压缩级别）。

**底线：**由于您引用的开源 ATF 编码器不支持块级压缩（引用缺乏开源压缩代码），因此它无法创建导致 GPU 内存使用量减少的纹理。

此外，ATF 是一种容器格式。这意味着它可以保存图像的一种或多种编码（块压缩类型）。您可以创建包含 PVRTC、ETC1 和/或 DXT5 的任意组合的 ATF 文件，具体取决于您希望 ATF 在哪些平台上工作。例如，您可以让构建过程仅在打包 .ipa 文件时为 iOS 打包 .atf 文件，而仅在打包 .apk 文件时为 Android 打包。

IMO，最佳点是块压缩 + 无损 JPEG XR 压缩。这代表 GPU 内存节省 + 小文件大小。命令行（同样，使用 Adob​​e 的 png2atf）是：

PVRTC (iOS):

```
png2atf -cp -r -i image.png -o image.atf
```

ETC1（安卓）：

```
png2atf -ce -r -i image.png -o image.atf
```

DXT5（桌面）：

```
png2atf -cd -r -i image.png -o image.atf
```

一个 .atf 文件中的所有 3 种格式：

```
png2atf -c -r -i image.png -o image.atf
```

另请注意，块压缩可能会导致一些非常难看的伪影。如果您需要节省 GPU 内存，我只会使用它。

**更新**- 关于 Dave Walker 的评论 - 是的，[PVRTexTool](http://community.imgtec.com/developers/powervr/installers/)在创造高质量结果方面做得更好。它有一个 GUI 和一个命令行，您可以使用 GUI 自己探索所有选项，但我最喜欢的命令行选项（用于具有卡通精灵的半透明 PNG 的最高质量）是：

`PVRTexToolCL -i image.png -o image.pvr -m -l -f PVRTC1_4 -q pvrtcbest -mfilter cubic`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T21:22:36.683

ATF 只是一种文件容器格式，可帮助将不同格式打包到一个文件中。您不需要将多种文件类型放入 ATF 文件中，但您可以。桌面和移动设备有各种压缩纹理，包括 dxt1/5、pvrtc 等。ATF 还支持包含 RGBA 数据，因此您会看到相同的纹理内存大小。如果您有压缩纹理，它可能会有所不同。

Adobe 将在某个时候推出一些 ATF 工具。请参阅 Thibault 在此论坛中的评论 - [http://forum.starling-framework.org/topic/atf-adobe-texture-format/page/2](http://forum.starling-framework.org/topic/atf-adobe-texture-format/page/2)

我没有使用 ATF-Encoder 源代码来了解它的压缩是否适用于 dxt。

# .htaccess - url 的 htaccess 掩码

> ID：11652509
> 
> 赞同：0
> 
> 时间：2012-07-25T14:51:25.897
> 
> 标签：.htaccess, url, mod-rewrite, mask

我的主机名-ftp 上有几个文件夹，其中包含博客和论坛。所以链接是 name.com/blog/ 和 name.com/forum/ 我不想做的是，默认访问屏蔽 /blog/ url，所以当你默认输入 name.com 时，它会从文件夹 name.com 加载/blog/ 带有面具，整个东西看起来就像 name.com。论坛访问保持原样，name.com/forum 没有掩码。

我已经尝试过使用这种 htaccess 代码：但它完全重定向到 /blog/ 文件夹，我无法访问主主机目录上的任何其他文件夹。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^name\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.name\.com$
RewriteCond %{REQUEST_URI} !^/blog/
RewriteRule (.*) /blog/$1 
```

你能帮我弄清楚如何解决这个问题吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:11:49.717

您没有以任何方式在您的规则中指定您希望保持 /forum/ 不变..

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^name\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.name\.com$
RewriteCond %{REQUEST_URI} !^/(blog|forum)/
RewriteRule (.*) /blog/$1 
```

注意最后的区别`RewriteCond`

# sql - SQL - 对 SQL 查询执行 SQL 查询

> ID：11652514
> 
> 赞同：3
> 
> 时间：2012-07-25T14:51:38.020
> 
> 标签：sql

是否可以在另一个 SQL 查询上运行 SQL 查询？我有一个 SQL 查询，它使用 Union All 子句将许多列编译为一个。我需要使用 group 子句，但您会发现这是不可能的。有没有办法在这个上运行另一个 SQL 查询？

询问：

```
Select Ins1 as Insurance

From InsAuth2
WHERE Ins1 IS NOT NULL
Group By Ins1
Union All
Select Ins2 as Insurance
From InsAuth2
WHERE Ins2 IS NOT NULL
Group By Ins2
Union All
Select Ins3 as Insurance
From InsAuth2
WHERE Ins3 IS NOT NULL
Union All
Select Ins4 as Insurance
From InsAuth2
WHERE Ins4 IS NOT NULL
Union All
Select Ins5 as Insurance
From InsAuth2
WHERE Ins5 IS NOT NULL 
```

我需要能够从这个编译列中选择唯一值。我可以在每个语句中使用 group by，但这只会从原始列返回唯一值。如果一个列的唯一值对另一列也是唯一的，则编译的列可能不具有所有唯一值。因此，我必须在这个查询上运行另一个 SQL 查询。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T14:54:53.127

使用内部查询，即

```
SELECT *
FROM
(
    YourQueryHere
) Inn
GROUP BY YourColumnHere 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T14:54:12.783

使用派生表和 distinct：

```
select distinct Insurance
from
(
  Select Ins1 as Insurance
  From InsAuth2
  WHERE Ins1 IS NOT NULL
  Union All
  Select Ins2 as Insurance
  From InsAuth2
  WHERE Ins2 IS NOT NULL
  ...
) table_alias 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T14:59:45.403

如果您使用`UNION`而不是`UNION ALL`它将过滤掉重复项

```
Select Ins1 as Insurance
From InsAuth2
WHERE Ins1 IS NOT NULL
Group By Ins1
Union
Select Ins2 as Insurance
From InsAuth2
WHERE Ins2 IS NOT NULL
Group By Ins2
Union
Select Ins3 as Insurance
From InsAuth2
WHERE Ins3 IS NOT NULL
Union
Select Ins4 as Insurance
From InsAuth2
WHERE Ins4 IS NOT NULL
Union
Select Ins5 as Insurance
From InsAuth2
WHERE Ins5 IS NOT NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-10T08:54:28.147

尝试使用 UNION 而不是 UNION ALL

谢谢

# qt - 静态构建 Qt - 库很大

> ID：11652515
> 
> 赞同：2
> 
> 时间：2012-07-25T14:51:39.017
> 
> 标签：qt, compilation

我正在遵循此网页的建议：[http](http://www.formortals.com/build-qt-static-small-microsoft-intel-gcc-compiler) ://www.formortals.com/build-qt-static-small-microsoft-intel-gcc-compiler尝试静态构建库，但正在创建的库确实是大的。其中一些大约为 200 - 300MB。非静态链接正在创建与脱机安装程序中提供的文件大小相似的文件。

我正在使用 Visual Studio 2008 进行编译。

在 qmake.conf 我设置了这些：

```
QMAKE_CFLAGS_RELEASE = -O1 -GL -MT -MP2
QMAKE_LFLAGS_RELEASE = /INCREMENTAL:NO /NODEFAULTLIB:"MSVCRT" 
```

然后我用这个：

```
> configure -opensource -release -static -qt-libjpeg -qt-zlib -qt-libpng -nomake examples 
    -nomake demos -no-qt3support -no-scripttools -no-openssl -no-opengl -no-webkit 
    -no-phonon -no-style-motif -no-style-cde -no-style-cleanlooks -no-style-plastique 
    -no-sql-sqlite -platform win32-msvc2008
> nmake 
```

我做错了什么还是可以预期这种大小的文件？我试过没有，`/NODEFAULTLIB`但大小是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:54:30.770

这完全可以预料。现在所有功能都包含在静态库中，否则它将位于非静态链接的 DLL 中。这些库只是导入库，因此数量要小得多。

# ios - 尽管我已将其设置为清除，但仍然存在持久的白色背景

> ID：11652516
> 
> 赞同：0
> 
> 时间：2012-07-25T14:51:41.567
> 
> 标签：ios, background, transparent

我有一个 GridViewCell 并将其背景设置为 clearColor ，如下所示：

```
UIView* mainView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 160, 123)];
[mainView setBackgroundColor:[UIColor clearColor]]; 
```

虽然由于某种原因，背景仍然是白色的。

这就是我所看到的：

![在此处输入图像描述](../Images/a7d58d7e0a31d6672e10a5d65a0796b1.png)

如果有任何帮助，我正在关注[本教程](http://mobile.tutsplus.com/tutorials/iphone/design-build-a-small-business-app-aqgridview/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:58:24.690

我很确定你看到的是`window`.

在您的应用程序委托中：

`[self.window setBackgroundColor:[UIColor redColor]];`

你应该看到所有的红色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:29:49.410

经过多次试验和错误，我发现在我的 cellForItemAtIndex 方法中，我需要将该*单元格*的背景颜色设置为如下所示：

```
[cell setBackgroundColor:[UIColor clearColor]]; 
```

# c# - ServiceStack 和 Sitefinity V3.7 网络服务同步还是异步？

> ID：11652518
> 
> 赞同：1
> 
> 时间：2012-07-25T14:51:43.533
> 
> 标签：c#, servicestack, sitefinity, sitefinity-3x

我尝试使用 ServiceStack 和 Sitefinity V3.7sp3 net35 实现一个简单的 web 服务。[我使用此 Web配置](https://github.com/ServiceStack/ServiceStack/wiki/Run-servicestack-side-by-side-with-another-web-framework)将 ServiceStack 添加为 localhost/api 。使用 IService 实现服务类后，获取完整的项目 News 内容并注册 Global asax 用于路由。结果总是零项。它与Sf 论坛中的其他[帖子](http://www.sitefinity.com/devnet/forums/sitefinity-3-x/developing-with-sitefinity/exposing-odata.aspx)非常相似。更改 ContentManager 或提供程序始终返回零项和零作为计数。我的 Sf 允许多语言 en,fr..使用路径。许多需要异步？当然，有人可以帮助我使用 servicestack 来解决这个问题。

问候。

```
[Description("Find items by baseclass, or all default if no genre is provided")]
[RestService("/api/items")]
[RestService("/api/items/news")]
[RestService("/api/items/news/{provider}")]
[RestService("/api/items/news/{provider}/{language}")]
[AspNetCompatibilityRequirements(RequirementsMode =      AspNetCompatibilityRequirementsMode.Allowed)] 
public class Items
{
  public string provider { get; set; }
  public string language { get;set; }
  IList ItemsList{ get; set;  }  
}

/// <summary>
/// Summary description for NewsResponse
/// </summary>
public class ItemsResponse
{
   public ItemsResponse()
   {
   }
   public ResponseStatus ResponseStatus { get; set; } //Automatic exception handling
   public IList Items { get; set; }//return a list of objects
}

/// <summary>
/// Summary description for NewsServices
/// </summary>
public class ItemsService : ServiceStack.ServiceHost.IAsyncService<Items>
{
   //public object Execute(Items request)// with IService
   //{
   //    ItemsResponse response = new ItemsResponse();
   //    response.Items = ItemsList(request.provider,  request.language);//request.provider
   //    return response;
   //  ALWAYS ZERO AS RESPONSE
   //}

   //ERROR ON HANDLER ?    
   object IAsyncService<Items>.ExecuteAsync(Items request)
   {
      ItemsResponse response = new ItemsResponse();
      //if (request.provider != null)
      response.Items = ItemsList(request.baseclass, request.provider, request.language);//request.provider
      return response;    
    }

    public IList ItemsList(string provider, string language)
    {          
        if(provider==string.Empty)
            provider = NewsManager.DefaultContentProvider;
        if (language == string.Empty)
            language = "es";
        System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(language);
        NewsManager manager = new NewsManager(provider);
        //Get items from this language
        IList data = manager.Content.GetContent();
        return data;                    
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:11:18.737

`/api`从你的`RestService()'s.` So like中删除：

```
[RestService("/items")]
[RestService("/items/news")]
[RestService("/items/news/{provider}")]
[RestService("/items/news/{provider}/{language}")] 
```

或者你的网址必须是`domain.com/api/api/items...`

您已经用 ? 测试了您的网站`domain.com/api/metadata`？

# c++ - 使用 Xerces-C++ 生成 XML

> ID：11652519
> 
> 赞同：2
> 
> 时间：2012-07-25T14:51:49.430
> 
> 标签：c++, xerces, xerces-c

我正在尝试使用[`xerces`](http://xerces.apache.org/xerces-c/)库生成类似于下面的 XML。我找不到合适的例子来效仿；有这方面经验的人可以请教吗？

```
<ad xsi:noNamespaceSchemaLocation="smaato_ad_v0.9.xsd" modelVersion="0.9">
    <richmediaAd>
        <content>
            <script>yadda...yadda... richmedia content ...yadda</script>
        </content>
        <width>728</width>
        <height>90</height>
        <beacons>
            <beacon>http://mysite.com/beacons/mybeacon1</beacon>
            <beacon>http://mysite.com/beacons/mybeacon2</beacon>
        </beacons>
    </richmediaAd>
 </ad> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T12:34:18.693

将 Codeproject 示例代码中文档的创建替换为

```
p_DOMDocument = p_DOMImplementation->createDocument(0, L"ad", 0); 
```

创建一个以 ad 元素为根节点的文档。

访问文档中的根元素

```
DOMElement* pRoot = p_DOMDocument->getDocumentElement(); 
```

使用如下调用创建单个元素：

```
DOMElement* pEle = p_DOMDocument->createElement(L"richmediaAd");
pRoot->appendChild(pEle); 
```

通过调用设置属性

```
pEle->setAttribute(L"modelVersion", L"0.9"); 
```

像这样设置文本内容：

```
DOMText* pText = p_DOMDocument->createTextNode(L"yadda...yadda...");
pEle->appendChild(pText); 
```

希望这可以帮助

# c#-4.0 - C# 从 BindingSource 扩展方法中获取父控件（UserControl 或 Form）

> ID：11652525
> 
> 赞同：0
> 
> 时间：2012-07-25T14:52:07.950
> 
> 标签：c#-4.0, dynamic, controls, parent, bindingsource

我正在为 .net对象创建一个`Extension`方法。`BindingSource`目前该方法需要`Control`传入（这`Control`是“main” `Control`，通常是 a`UserControl`或 a `Form`）。

我希望不必传递这个“父母” `Control`。有没有办法找到`BindingSource`父母`Control`？我知道有一个`Container`，但这对我没有帮助，或者至少我认为没有。

目前你调用这个方法如下（C# `UserControl`）：

```
//'new Object()' would be the data source
BindingSourceControlName.ExtMethodName(This, new Object()); 
```

我想从 动态获取父级`Control`，`BindingSource`以便可以调用如下方法（C# `UserControl`）：

```
//'new Object()' would be the data source
BindingSourceControlName.ExtMethodName(new Object()); 
```

这甚至可能吗，也许使用反射？感谢您的阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:02:23.300

`BindingSource`没有“父”控件。事实上，`BindingSource`不绑定到任何东西，比如控件。它是数据的来源，用于数据绑定。它可以被*许多*目标绑定。绑定到 a的内容在绑定控件属性中包含的对象中`BindingSource`定义。`Binding``DataBindings`

即你看错了方向。您可以找到特定控件的数据绑定，但无法从`BindingSource`.

也许如果你描述你想要做什么，有人可以提供一些细节。

# java - 从方法开始活动

> ID：11652529
> 
> 赞同：0
> 
> 时间：2012-07-25T14:52:29.960
> 
> 标签：java, android, android-intent

这更像是一个 Java 问题，因为它与 Android 相关。

我的代码包含一个包含 30 个案例的 switch 语句。每个案例的正文具有相同的格式来启动与该案例相关的意图。我试图将主体编码为以类名作为参数的方法，但该代码无法编译，因为类名必须在意图中进行硬编码。

下面是开关的一部分（很长的路）

```
 switch(mState) {
    case 0:
               Intent myIntent = new Intent();
               myIntent.setClass(Home_ASM.this, Home_AS0.class);
               startActivityForResult(myIntent, 0);
               break;

    case 1:
              Intent myIntent1 = new Intent(); 
              myIntent1.setClass(Home_ASM.this, Home_AS1.class);
              startActivityForResult(myIntent1, 2);
              break; 
```

我想编写这样的代码：

```
 switch(mState) {
            case 0:
               myStart(Home_AS0.class,1);
               break;
            case 1:
               myStart(Home_AS1.class,2);
               break; 
```

和方法

```
private void myStart(String state, int value) {
            Intent myIntent = new Intent();
            myIntent.setClass(Home_ASM.this, state);
            startAcivityForResult(myIntent, value);
            } 
```

关于如何完成这项工作的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:55:47.887

你可以试试`Class.forName("nameofClass");`

编辑：编辑后，乔恩·泰勒的回答比我的回答更合适。请参阅：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#forName%28java.lang.String%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#forName%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:54:56.810

为什么没有方法

```
private void myStart(Class class, int value) 
```

只是传递一个类而不是一个字符串？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:02:48.940

我们做类似的事情。我们的代码看起来有点像这样：

切换语句：

```
case 0:
      {
         launchActivity(ActivityOne.class, value);
         break;
      } 
```

发起活动的方法：

```
private void launchActivity(Class<?> aClass, int value) {
        Intent intent = new Intent();
        intent.setClass(this, aClass);
        startActivityForResult(intent, value);
    } 
```

您可以轻松地对其进行调整以获取您的特定`int`价值。希望这可以帮助！

# node.js - Node.js vm：如何取消 Script.runInNewContext()？

> ID：11652530
> 
> 赞同：13
> 
> 时间：2012-07-25T14:52:37.857
> 
> 标签：node.js, v8

我想使用该`vm`模块作为运行外部代码的安全方式。它工作得很好，但还有一个问题：

```
var UNKNOWN_CODE = "while(true){}";

var vm = require("vm");

var obj = {};
var ctx = vm.createContext(obj);

var script = vm.createScript(UNKNOWN_CODE);

script.runInNewContext(ctx);

console.log("finished"); //never executed 
```

有什么方法可以取消执行（例如，如果它持续超过 5 秒）？

提前致谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-29T21:24:57.753

您需要在单独的进程中运行它，例如：

master.js：

```
var cluster = require('cluster');

cluster.setupMaster({
  exec : "runner.js",
  args : process.argv.slice(2),
  silent : false
});
//This will be fired when the forked process becomes online
cluster.on( "online", function(worker) {
    var timer = 0;

    worker.on( "message", function(msg) {
        clearTimeout(timer); //The worker responded in under 5 seconds, clear the timeout
        console.log(msg);
        worker.destroy(); //Don't leave him hanging 

    });
    timer = setTimeout( function() {
        worker.destroy(); //Give it 5 seconds to run, then abort it
        console.log("worker timed out");
    }, 5000);

    worker.send( 'while(true){}' ); //Send the code to run for the worker
});
cluster.fork(); 
```

亚军.js：

```
//The runner.js is ran in a separate process and just listens for the message which contains code to be executed
process.on('message', function( UNKNOWN_CODE ) {

    var vm = require("vm");

    var obj = {};
    var ctx = vm.createContext(obj);

    var script = vm.createScript(UNKNOWN_CODE);

    script.runInNewContext(ctx);

    process.send( "finished" ); //Send the finished message to the parent process
}); 
```

要运行此示例，请将这些文件放在同一文件夹和目录中并运行

```
node master.js 
```

您应该会在 5 秒后看到“工作人员超时”消息。如果您将其更改为`'while(false){}'`worker 将立即执行代码，您应该会看到`"finished"`。

[集群文档](http://nodejs.org/api/cluster.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-18T22:19:43.653

~~您可以将“脚本断路器”嵌入 UNKNOWN_CODE。就像是：~~

 ~~```
;setTimeout(function() { throw new Error("Execution time limit reached!") }, 2000); 
```~~ 

所以，整个事情看起来像这样：

```
var UNKNOWN_CODE = "while(true){}";

var scriptBreaker = ';setTimeout(function() { throw new Error("Execution time limit reached!") }, 2000);';

var vm = require("vm");

var obj = {};
var ctx = vm.createContext(obj);

var script = vm.createScript(scriptBreaker + UNKNOWN_CODE);

try {
  script.runInNewContext(ctx);
  console.log("Finished");
}
catch (err) { 
  console.log("Timeout!"); 
  // Handle Timeout Error...
} 
```

 ~~**更新：**

经过更多测试后，我得出结论，可靠的方法是使用指向 Esailija 的过程。但是，我的做法有点不同。

在主应用程序中，我有这样的代码：

```
var cp = require('child_process');

function runUnsafeScript(script, callback) {
 var worker = cp.fork('./script-runner', [script]);

 worker.on('message', function(data) {
  worker.kill();
  callback(false, data);
 });

 worker.on('exit', function (code, signal) {
  callback(new Error(code), false);
 });

 worker.on('error', function (err) {
  callback(err, false);
 });

 setTimeout(function killOnTimeOut() {
  worker.kill();
  callback(new Error("Timeout"), false);
 }, 5000);
} 
```

在 script-runner.js 中，它如下所示：

```
var vm = require("vm");
var script = vm.createScript( process.argv[2] );
var obj = { sendResult:function (result) { process.send(result); process.exit(0); } };
var context = vm.createContext(obj);

script.runInNewContext(context);

process.on('uncaughtException', function(err) {
 process.exit(1);
}); 
```

这种方法可以实现以下目标：

*   在有限的上下文中运行脚本
*   避免死循环和异常问题
*   同时运行许多（受硬件限制）不安全的脚本，这样它们就不会相互中断
*   将脚本执行结果传递给主应用程序进行进一步处理

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-02T17:54:39.580

是的，这现在是可能的，因为我在 Node模块中添加了`timeout`参数支持。`vm`您可以简单地将毫秒超时值传递给`runInNewContext()`，如果代码未在指定的时间内完成执行，它将引发异常。

请注意，这并不意味着运行不受信任代码的任何类型的安全模型。这只是允许您超时您信任或以其他方式安全的代码。

```
var vm = require("vm");

try {
    vm.runInNewContext("while(true) {}", {}, "loop", 1000);
} catch (e) {
    // Exception thrown after 1000ms
}

console.log("finished"); // Will now be executed 
```

正是您所期望的：

```
$ time ./node test.js
finished

real    0m1.069s
user    0m1.047s
sys     0m0.017s 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T00:35:05.127

您可能想检查[Threads a Gogo](https://github.com/xk/node-threads-a-gogo/)。不幸的是，它还没有更新到 0.8.x。

但是，正如@Esailija 所提到的，**除非它在另一个进程中，否则无法安全地运行外部代码**。

```
var Threads = require('threads_a_gogo');

var t = Threads.create();
t.eval("while(true) { console.log('.'); }");

setTimeout(function() {
  t.destroy();
  console.log('finished');
}, 1000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-12T03:23:08.877

在较新版本的 Node.js（`v0.12`及更高版本）中，您将能够将超时选项传递给`vm.runInNewContext`.

这还没有在任何稳定的节点版本中，但是如果您希望使用最新的不稳定版本（`v0.11.13`），您可以像这样传递一个超时参数：

```
vm.runInNewContext('while(1) {}', {}, {timeout: '1000'}); 
```

现在，在 1000 毫秒后，脚本将抛出超时错误。你可以像这样抓住它：

```
try {
    vm.runInNewContext('while(1) {}', {}, {timeout: '1000'});
}
catch(e) {
    console.log(e); // Script execution timed out.
} 
```~~

# php - PHP 初始化日期

> ID：11652532
> 
> 赞同：0
> 
> 时间：2012-07-25T14:52:39.277
> 
> 标签：php, datetime, date

我有日期的日、月和年。我发现 php 有关于日期的日期类。如何用 dd-mm-和 yyyy 初始化日期类对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:01:22.423

php.net 是你的朋友！ [http://www.php.net/manual/en/datetime.construct.php](http://www.php.net/manual/en/datetime.construct.php)

所以它会想要——

```
$date = new DateTime('2000-01-01'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:54:23.270

该类在其构造函数中[`DateTime`](http://php.net/DateTime)接受格式：`DD-MM-YYYY`

```
$date_str = '7-25-2012';
$datetime = new DateTime($date_str); 
```

# php - mysql 根据 LEAST 值返回正确的链接

> ID：11652536
> 
> 赞同：1
> 
> 时间：2012-07-25T14:52:46.123
> 
> 标签：php, mysql, sql

好的，这有点棘手，但基本上在我的 SQL 语句中，我比较每行中的字段之间的价格以获得返回的最低值，现在问题是每个值都有一个链接。

有没有办法根据 SQL 语句中的最小值返回正确的链接？

下面是我的 SQL 语句。

```
SELECT 
   title, 
   my_value, 
   my_ink,

   LEAST(site_a_value, site_b_value, site_c_value) AS lowest_value, 

   site_a_link,
   site_b_link,
   site_c_link

   FROM STOCK 
```

因此，例如，如果 site_b 具有最低值，我只希望返回 site_b_link。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:00:07.803

尝试

```
SELECT     title,
            my_value,
            my_ink,
            LEAST(site_a_value, site_b_value, site_c_value) AS lowest_value,     
            case LEAST(site_a_value, site_b_value, site_c_value)
            when site_a_value then site_a_link
            when site_b_value then site_b_link
            when site_c_value then site_c_link end AS lowest_value_link,
FROM STOCK 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:00:55.793

尝试这个：

```
SELECT 
  title, my_value, my_ink,

  LEAST(site_a_value, site_b_value, site_c_value) AS lowest_value, 

  (
  CASE site_a_value = LEAST(site_a_value, site_b_value, site_c_value)
    THEN site_a_link
  ELSE CASE site_b_value = LEAST(site_a_value, site_b_value, site_c_value)
    THEN site_b_link
  ELSE
    site_c_link
  ) AS site_link

FROM STOCK 
```

# glassfish - 如何让 EntityManager 可注入？

> ID：11652544
> 
> 赞同：0
> 
> 时间：2012-07-25T14:53:02.683
> 
> 标签：glassfish, nosql, java-ee-6, code-injection, entitymanager

**我有以下代码：**

**MonsterEJB.java:**

```
package model;

import java.util.List;

import javax.ejb.LocalBean;
import javax.ejb.Stateless;
import javax.inject.Inject;
import javax.inject.Named;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.PersistenceContext;
import javax.persistence.PersistenceUnit;
import javax.persistence.Query;

@Stateless
@LocalBean
@Named
public class MonsterEJB 
{
    @PersistenceUnit(unitName="mongo")
    private EntityManager em;

    @Inject
    private Monster injectableMonster;

    public MonsterEJB() 
    {

    }

    public void create() 
    {
        em.getTransaction().begin();
        Monster en = new Monster();
        en.setDescription(injectableMonster.getDescription());
        em.persist(en);
        em.getTransaction().commit();
    }

    public List<Monster> getList() 
    {
        Query query = em.createQuery("Select m from Monster m");
        List<Monster> Monsters = query.getResultList();

        return Monsters;
    }

    public void remove()
    {
        em.getTransaction().begin();
        Monster en = em.find(Monster.class, injectableMonster.getId());
        em.remove(en);
        em.getTransaction().commit();
    }

    public void update() 
    {
        em.getTransaction().begin();
        Monster en = em.find(Monster.class, injectableMonster.getId());
        en.setDescription(injectableMonster.getDescription());
        em.getTransaction().commit();
    }
} 
```

**怪物.java：**

```
package model;

import java.io.Serializable;

import javax.enterprise.context.RequestScoped;
import javax.inject.Named;
import javax.persistence.*;

import org.eclipse.persistence.nosql.annotations.*;

@Entity
@Named
@RequestScoped
@NoSql(dataFormat = DataFormatType.MAPPED)
public class Monster implements Serializable 
{
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue
    @Field(name = "_id")
    private String id;

    @Version
    private long version;

    @Basic
    private String description;

    public Monster() 
    {

    }

    public String getId() 
    {
        return id;
    }

    public void setId(String id) 
    {
        this.id = id;
    }

    public String getDescription() 
    {
        return description;
    }

    public void setDescription(String description) 
    {
        this.description = description;
    }

    @Override
    public String toString() 
    {
        return "Monster [id=" + id + ", version=" + version + ", description="+ description;
    }
} 
```

**持久性.xml：**

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
        version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
    <persistence-unit name="mongo" transaction-type="RESOURCE_LOCAL">
        <class>model.Monster</class>
        <properties>
            <property name="eclipselink.target-database" value="org.eclipse.persistence.nosql.adapters.mongo.MongoPlatform"/>
            <property name="eclipselink.nosql.connection-spec" value="org.eclipse.persistence.nosql.adapters.mongo.MongoConnectionSpec"/>
            <property name="eclipselink.nosql.property.mongo.port" value="27017"/>
            <property name="eclipselink.nosql.property.mongo.host" value="localhost"/>
            <property name="eclipselink.nosql.property.mongo.db" value="MonsterDatabase"/>
            <property name="eclipselink.logging.level" value="FINEST"/>
        </properties>
    </persistence-unit>
</persistence> 
```

**显示.xhtml**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="WEB-INF/templates/BasicTemplate.xhtml">

    <ui:define name="header">
        <div style="width:100%;font-size:36px;line-height:48px;background-color:navy;color:white">Showing Monsters</div>
    </ui:define>

    <ui:define name="content">
        <h:dataTable var="f2" value="#{MonsterEJB.list}">
            <h:column>#{f2.id}, #{f2.description}</h:column>
        </h:dataTable>
    </ui:define>

</ui:composition>
</html> 
```

**网页显示的错误**

```
type Exception report

message

descriptionThe server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: javax.ejb.EJBException: javax.ejb.CreateException: Could not create stateless EJB
root cause

javax.ejb.EJBException: javax.ejb.EJBException: javax.ejb.CreateException: Could not create stateless EJB
root cause

javax.ejb.EJBException: javax.ejb.CreateException: Could not create stateless EJB
root cause

javax.ejb.CreateException: Could not create stateless EJB
root cause

java.lang.IllegalStateException: Exception attempting to inject Env-Prop: model.MonsterEJB/em@Field-Injectable Resource. Class name = model.MonsterEJB Field name=em@java.lang.String@@@ into class model.MonsterEJB
root cause

com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to inject Env-Prop: model.MonsterEJB/em@Field-Injectable Resource. Class name = model.ElnotEJB Field name=em@java.lang.String@@@ into class model.MonsterEJB
root cause

java.lang.IllegalArgumentException: Can not set javax.persistence.EntityManager field model.MonsterEJB.em to com.sun.enterprise.container.common.impl.EntityManagerFactoryWrapper 
```

**问题：** 如何让我的 MonsterEJB.java 使用 NoSQL 注入 EntityManager？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-14T14:57:05.467

尝试使用 @PersistenceContext 而不是 @PersistenceUnit

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:19:10.380

我不确定这是否正是您的异常的原因，但是您的`MonsterEJB`课程同时被注释为`@Named`和`@Stateless`。`@Named`用于定义 a`JSF Managed Bean`和`@Stateless`for `Enterprise Java Beans`，它们是不同的东西。

使用一个或另一个注释。

而且，`Monster`class同时被定义为：an `Entity`，作为一个`ManagedBean`直通`@Named`注解，以及作为一个CDI bean直通`javax.enterprise.context.RequestScoped`注解。这也没有任何意义。

我建议学习一些 Java EE 6 教程（像[这样](http://docs.oracle.com/javaee/6/tutorial/doc/)）以阐明这些概念。

# html - JSF：自定义属性不适用于 EL 表达式？

> ID：11652554
> 
> 赞同：2
> 
> 时间：2012-07-25T14:53:27.293
> 
> 标签：html, jsf, jakarta-ee

我想在标准 JSF 组件中使用自定义属性。使用或者更确切地说引入 ResponseWriterWrapper，如下所述：[Adding custom attribute (HTML5) support to JSF 2.0 UIInput component](https://stackoverflow.com/questions/6859520/adding-custom-attribute-html5-support-to-jsf-2-0-uiinput-component#answer-7886942)，当自定义属性的值是 EL 表达式时不起作用。

我为组件 t:div 引入了一个自定义渲染器类，并使用我的 ResponseWriterWrapper 来渲染自定义属性。所以写的时候

```
<t:div data-role="collapsible" data-collapsed="false">
    ...
</t:div> 
```

一切正常！

但是下面的代码不起作用：

```
<t:div data-role="collapsible" data-collapsed="#{false}">
    ...
</t:div> 
```

更详细地说，属性“data-collapsed”没有被渲染，因为它不是组件属性列表的一部分。当组件传递给 encodeBegin 方法时，我可以看到这一点。

有人知道这是什么原因以及如何通过解决方法或其他方法解决此问题？

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-01-23T13:27:06.387

对于要在 JSF 中呈现的自定义属性，它们应该作为 Passthrough 属性传递，这在 JSF2.2 中是可能的，而不是在 2.0 中，据我所知。

**如果您包含以下命名空间（jsf 2.2）：**

```
 xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" 
```

并定义`<t:div data-role="collapsible" data-collapsed="#{false}">`它将呈现 JSF 组件中的数据折叠属性。

如果可以升级 jsf，它是您的一个选择。

# google-app-engine - 从压缩的 CSV 文件将数据上传到数据存储？

> ID：11652561
> 
> 赞同：0
> 
> 时间：2012-07-25T14:53:52.540
> 
> 标签：google-app-engine, bulkloader

我有一个非常大的 gzip csv 文件（大约 500GB），我需要使用批量加载工具将其导入数据存储区。是否可以不必先解压缩？如果是，我必须如何配置我的 bulkload.yaml 文件？

```
transformers:

- kind: Client
    connector: csv
    connector_options:
      encoding: zip? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:27:13.060

使用命名管道怎么样。

```
mkfifo --mode=0666 /tmp/namedPipe
gzip --stdout -d file.gz > /tmp/namedPipe 
```

然后在另一个终端中，或者如果您使用 & 分离 gzip 命令

```
appcfg.py upload_data --config_file=bulkloader.yaml --filename=/tmp/namedPipe --kind=YOUR_DATA_KIND 
```

示例取自[http://en.wikipedia.org/wiki/Named_pipe](http://en.wikipedia.org/wiki/Named_pipe)

# perl - 如何在 Windows 上安装 perl 模块？

> ID：11652562
> 
> 赞同：0
> 
> 时间：2012-07-25T14:53:56.860
> 
> 标签：perl

我从 CPAN 下载了一些 perl 模块。通常，我们采取以下两个步骤来安装它。

```
perl Makefile.PL
make install 
```

但这在 Windows 上不起作用。

我正在使用 ActivePerl，我应该如何安装 3rd 方模块？

我设法运行以下 2 个命令：

```
perl Makefile.PL
nmake install 
```

我看到**FAQ.pod**和**XXX.pm**被复制到某个文件夹。但问题是，我在运行任何命令之前就看到了这两个文件。它们只是在下载的 zip 文件中。那么为什么我还需要运行 make 命令呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:44:58.877

> 那么为什么我还需要运行 make 命令呢？

安装程序所做的大部分工作（对于 Perl 模块或其他）都是复制文件。这并不意味着它就是它所做的一切。仅举几例：

*   从用户那里获得安装选项。
*   检查缺少的依赖项。
*   安装缺少的依赖项。
*   确定安装文件的正确目录。
*   为特定系统或 Perl 构建配置模块。
*   生成派生文件。
    *   编译 C (XS) 组件。
    *   生成文档。
    *   使捆绑的 Perl 脚本自动执行。
*   运行测试。
*   设置权限。
*   ETC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:05:28.100

有时您需要到 Microsoft 下载 nmake 可执行文件，这样您就可以运行“make”。但我记得一个 GUI PPM 客户端也应该对您有所帮助。

以前用activestate的时候，我用PPM，当PPM没有我需要的模块的时候用CPAN。通过这种方式，我能够在 Windows 机器上安装 Catalyst 和 DBIx::Class，并在本地使用 Mysql 和 SQL Server 进行远程数据仓库查询，大约在 2007 年。

它比 Unix 安装需要更多的努力，但有时我们无法选择我们的操作系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:22:00.567

```
 make install 
```

还运行测试，这很好，因为并非每个 CPAN 模块都由其作者针对 Windows 进行测试。我知道我没有。

其次 make install updates perllocal.pod，它跟踪 CPAN 包的安装。你可以进去看看：

```
 perldoc perllocal 
```

并通过 CPAN 查看已安装在您机器上的所有软件包。

如果您不需要包管理器，并且您使用的是纯 perl 模块，那么请务必将其复制到位。这次我们将把黑色直升机留在机库中。

# javascript - 通过单击隐藏一个 DIV 并通过 JavaScript 使另一个可见？

> ID：11652565
> 
> 赞同：0
> 
> 时间：2012-07-25T14:54:05.310
> 
> 标签：javascript, jquery, video, html, embed

好的，很难说（对不起我的英语不好）......我想为我的嵌入式媒体（youtube 和其他东西）创建一个自定义预览图像......

这是我认为它可以工作的方式：

1.  我有一个带有视频预览图像和自定义播放按钮的 DIV
2.  在单击该图像/按钮后，DIV 隐藏并...
3.  ...出现另一个 DIV 而不是原始 iframe-embed-code
4.  视频自动开始

这是一个小例子（但我不知道这是怎么做到的……通过fancybox？）： [http ://www.crackajack.de/2012/07/25/the-mayor-of-london-introduces-the -奥运会/](http://www.crackajack.de/2012/07/25/the-mayor-of-london-introduces-the-olympic-games/)

有什么想法我可以“轻松”做到这一点吗？

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:00:30.600

这样的事情应该让你开始：

[http://jsfiddle.net/lbstr/YdwEF/](http://jsfiddle.net/lbstr/YdwEF/)

由于您没有显示任何标记，因此这是我对如何执行此操作的想法：

```
<div class="container">
    <div class="preview">
        <!-- Some preview image here -->
    </div>
    <div class="media">
        <!-- Some embed code here -->
    </div>
</div>​ 
```

使用这个 CSS：

```
.container { position: relative; }
.container .preview, 
.container .media { width: 500px; height: 350px; position: absolute; top: 0; left: 0; }
.container .preview { background-color: blue; z-index: 2; }
.container .media { background-color: red; z-index: 1; } 
```

而这个JS（jQuery）：

```
$('.container .preview').click(function(){
    $(this).siblings('.media').css("z-index", 3);
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:03:47.117

如果这只是出于显示原因而不是性能，那么加载两个 div 可能最容易，加载 div 绝对位于视频上方并且隐藏视频。然后，一旦您单击，您就可以使用 youtube api 自动播放。

隐藏和显示部分在这里[http://jsfiddle.net/TUMcm/](http://jsfiddle.net/TUMcm/)和 youtube api 在这里[https://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)

更多信息

所以如果你的播放器是这个

```
<embed id="playerid" width="100%" height="100%" allowfullscreen="true" allowscriptaccess="always" quality="high" bgcolor="#000000" name="playerid" style="" src="http://www.youtube.com/apiplayerbeta?enablejsapi=1&playerapiid=normalplayer" type="application/x-shockwave-flash"> 
```

在点击功能中，你会放一些类似的东西

```
var myPlayer = document.getElementById('playerid');
myPlayer.playVideo(); 
```

# pip - dotcloud push 上的 pip 升级

> ID：11652570
> 
> 赞同：0
> 
> 时间：2012-07-25T14:54:10.460
> 
> 标签：pip, dotcloud

`--upgrade`执行推送时是否可以强制构建器使用 pip标志？

我似乎有一个问题，即存在未升级的依赖项。我已经更改了我的 requirements.txt 文件中的依赖项以使用包含错误修复而不是 pypi 的 git 存储库，但它似乎没有在服务器上更新它，因为它仍然出现错误。

或者有没有办法在需求文件中指定？我已经检查了 pip 文档，但在那里找不到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:58:08.197

您的需求文件中的依赖行是什么样的？您是否将#egg 值更改为不同的值以查看是否有帮助？

如果这不起作用，您可以尝试以下方法之一：

*   您可以在`postinstall`脚本中执行 pip install --upgrade 以便升级坏包，然后升级后可以从`postinstall`.

*   另一种选择是直接 ssh 进入服务，删除旧的依赖项，然后安装新的依赖项。

# asp.net - knockout.js - 在 foreach 循环中设置一个布尔标志

> ID：11652573
> 
> 赞同：2
> 
> 时间：2012-07-25T14:54:21.257
> 
> 标签：asp.net, knockout.js

使用以下 knockout.js 代码，我想在内部循环中设置一个标志，然后在循环外使用该标志。最好的方法是什么？

```
<!-- there is an ASP.NET outer loop here -->

<!-- initialize variable 'myFlag = true' here -->
<div data-bind="foreach: jobs">                             
  <!-- ko if: industry == 'tech' --> 
    <!-- set myFlag to false here -->
    <!-- display job info here -->
  <!-- /ko -->                

  <!-- ko if: myFlag == true -->
    <!-- display 'no jobs for industry' message here -->
  <!-- /ko -->
</div>   

<!-- end outer ASP.NET outer loop --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:21:15.723

这个怎么样：

[http://jsfiddle.net/5e3UL/3/](http://jsfiddle.net/5e3UL/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:06:42.590

您可以尝试 foreach 绑定的 afterRender 属性：

```
<div data-bind="foreach: { data: jobs, afterRender: doSomething }"> 
```

这将为作业的每次迭代调用 doSomething。

# mysql - 是使用临时表还是在具有临时状态的表中记录购物车购买更好？

> ID：11652581
> 
> 赞同：0
> 
> 时间：2012-07-25T14:54:46.310
> 
> 标签：mysql, database

我正在尝试创建购物车购买数据模型。用户可以购买各种东西，例如信用和产品（每个都有一组单独的属性）。成功完成交易后，每次购买的商品都将存储在一个表中（例如分别为积分和购买）。

我想知道的是，当用户进行交易时，我应该遵循哪种方法（列出利弊的方法）

将用户为项目选择的属性存储在临时表中（例如 temp_credit_purchases 和 temp_product_purchases），然后将记录插入到实际表中（信用和购买）

优点

*   所有不成功的事务都可以删除，实际表中不会有很多丢失的自增id

缺点

*   2 个插入和 1 个选择 - 插入比更新更重（在第二种情况下会发生）

在具有临时状态的实际表中插入数据

优点

*   更优化（只有 1 次插入和 1 次更新）

缺点

*   表中会有很多不必要的行，这些行有时会用于在其他面向用户的模块中进行查询（这可能会使查询变慢）。

尽管我能够列出每种方法的优缺点，但我无法做出明确的决定。请帮我考虑一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:02:25.340

我会将数据存储在实际表中，链接到具有临时状态的订单。如果订单和链接的购买超过 X 小时且订单未完成，则可以定期清除它们。

在索引表中有额外的行不会使查询显着变慢，无论如何您都会定期清理它们。当然，除非订单未完成这一事实很重要，并且您希望保留这些行并提供有关它们的指标，例如“人们最常改变主意的产品”。

记住：

*   自动递增 id 中的间隙不是您应该担心的，因为它们只是为了确保您的行是唯一的并且实际上不是数据。
*   通常，当您可以在某处添加字段时，您不希望通过将包含相似事物的表一分为二来表示实体的质量（订单是否已完成）。

# c# - 将导出的 c++ 成员函数中的名称修改为 C# (Unity)

> ID：11652585
> 
> 赞同：-4
> 
> 时间：2012-07-25T14:55:03.750
> 
> 标签：c#, c++, plugins, unity3d, name-mangling

> **可能重复：**
> [Unity 的 C++ 插件“EntryPointNotFoundExeption”](https://stackoverflow.com/questions/11619986/c-plugin-for-unity-entrypointnotfoundexeption)

我了解如何防止在 c++ 中的单个函数上使用 extern "C" 进行名称修改，但是在导出成员函数时有什么方法可以防止它？

**WMIWrapper.cpp**

```
namespace WMIWrapper
{

    extern "C" {

        WMIWrapper::WMIWrapper()
        {
            _locator = NULL;
            _service = NULL;
            _monitors = NULL;
        }

        WMIWrapper::~WMIWrapper()
        {
            if(_service != NULL)
                _service->Release();
            if(_locator != NULL)
                _locator->Release();
        }

        void WMIWrapper::CreateCOM(wchar_t* err, int errLength)
        {
            wstringstream ERRStream (wstringstream::in | wstringstream::out);
            HRESULT hRes = CoInitializeEx(NULL, COINIT_MULTITHREADED);  
            if(FAILED(hRes))  
            {  
                ERRStream << "Unable to launch COM: 0x" << std::hex << hRes << endl; 
            } 

            hRes = CoInitializeSecurity(NULL, -1, NULL, NULL, RPC_C_AUTHN_LEVEL_CONNECT, RPC_C_IMP_LEVEL_IMPERSONATE, NULL, EOAC_NONE, 0);
            if(FAILED(hRes))
            {
                ERRStream << "Unable to set security level for COM: " << std::hex << hRes << endl;
            } 

            if(FAILED(hRes = CoCreateInstance(CLSID_WbemLocator, NULL, CLSCTX_ALL, IID_PPV_ARGS(&_locator))))  
            {  
                ERRStream << "Unable to create a WbemLocator: " << std::hex << hRes << endl;   
            }

            if(ERRStream != NULL)
                wcscpy_s(err, errLength, ERRStream.str().c_str());
        }

        void WMIWrapper::CreateService(wchar_t* err, int errLength)
        {
            wstringstream ERRStream (wstringstream::in | wstringstream::out);
            HRESULT hRes;
            if(_locator == NULL || FAILED(hRes = _locator->ConnectServer(L"root\\CIMV2", NULL, NULL, NULL, WBEM_FLAG_CONNECT_USE_MAX_WAIT, NULL, NULL, &_service)))  
            {  
                ERRStream << "Unable to connect to \"CIMV2\": " << std::hex << hRes << endl; 
            }  

            if(ERRStream != NULL)
                wcscpy_s(err, errLength, ERRStream.str().c_str());
        }

        void WMIWrapper::GetMonitors(wchar_t* err, int errLength)
        {
            HRESULT hRes;
            wstringstream ssMonitorDescription;
            if(_locator == NULL 
                || _service == NULL
                || FAILED(hRes = _service->ExecQuery(L"WQL", L"SELECT * FROM Win32_DesktopMonitor", WBEM_FLAG_FORWARD_ONLY, NULL, &_monitors)))
            {
                ssMonitorDescription << "Unable to retrieve desktop monitors: " << std::hex << hRes << endl;
                wcscpy_s(err, errLength, ssMonitorDescription.str().c_str());
                return;
            }

            IWbemClassObject* clsObj = NULL;
            int numElems;
            while((hRes = _monitors->Next(WBEM_INFINITE, 1, &clsObj, (ULONG*)&numElems)) != WBEM_S_FALSE)
            {
                if(FAILED(hRes))
                    break;

                VARIANT vRet;
                VariantInit(&vRet);
                if(SUCCEEDED(clsObj->Get(L"Description", 0, &vRet, NULL, NULL)) && vRet.vt == VT_BSTR)
                {
                    ssMonitorDescription << "Description: " << vRet.bstrVal << endl;
                    VariantClear(&vRet);
                }
            }

            clsObj->Release();

            wcscpy_s(err, errLength, ssMonitorDescription.str().c_str());
        }

        void WMIWrapper::HelloWorld(wchar_t* testString, int length)
        {
            wstring hello = L"Hello World";
            wcscpy_s(testString, length, hello.c_str());
        }
    }
} 
```

**WMIWrapper.h**

```
#ifndef _WMIWRAPPER_H_
#define _WMIWRAPPER_H_

#include <Windows.h>  
#include <sstream>  
#include <iostream>
#include <WbemCli.h>  

using std::endl;
using std::wstring;
using std::wstringstream;

#pragma comment(lib, "wbemuuid.lib")  

namespace WMIWrapper
{
    extern "C" {

        class WMIWrapper 
        {  
        public:
            WMIWrapper();
            ~WMIWrapper();

            __declspec(dllexport) void CreateCOM(wchar_t*, int);
            __declspec(dllexport) void CreateService(wchar_t*, int);
            __declspec(dllexport) void GetMonitors(wchar_t*, int);
            __declspec(dllexport) void HelloWorld(wchar_t*, int);

        private:
            IWbemLocator* _locator;
            IWbemServices* _service;
            IEnumWbemClassObject* _monitors;
        };
    }
}

#endif 
```

现在，当我想在 Unity 中使用这些函数时，我需要反编译 dll 以找出函数名称的 EntryPoints 是什么。我不想这样做。

我知道我对外部“C”有点过分热情......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:29:56.407

更新：正如@peechykeen 在评论中指出的那样，如果你要使用 .def 那么你可以直接重命名你的重命名。我将留下原始答案，尽管它对于隐藏导出的名称而不是重命名它们更有用。

原答案：

一种方法是将导出的名称“隐藏”在序号后面。为此，您需要定义一个 .def 文件，然后在其 EXPORTS 部分中放置所有要隐藏的导出名称。例如，要将序数 1 分配给 Boost 序列化导出的函数，您可以这样做：

```
EXPORTS
??0?$oserializer@Vportable_binary_oarchive@@U?$pair@$$CBHH@std@@@detail@archive@boost@@QEAA@XZ  @1  NONAME 
```

等等所有功能。现在，手动执行此操作既乏味又容易出错。每次更改导出界面的任何部分时，都会出现链接错误。为了使其半自动化，我使用了[Dependency Walker](http://www.dependencywalker.com/)和 Perl 脚本。它是这样工作的：

1.  在 EXPORTS 部分的 .def 文件中放置标记：

    ```
    EXPORTS
    ;BEGIN_RENAMING_TAG
    ;END_RENAMING_TAG 
    ```

2.  将二进制文件加载到 Dependency Walker，转到导出函数窗口，选择所有导出函数并将它们复制到剪贴板。

3.  在 .def 文件中的 BEGIN/END 标记之间经过复制的文本。
4.  在 .def 文件上运行以下 Perl 脚本：

    ```
    #perl -w
    print $ARGC;
    die "ERROR: Provide name of one DEF file to process\n" if @ARGV != 1;

    my $renaming = 0;
    my $counter = 1;
    my $fileName = $ARGV[0];
    my @lines;
    open(FILE, $fileName) or die $!;
    while(<FILE>)
    {
        if(/;END_RENAMING_TAG/)
        {
            $renaming = 0;
        }

        if($renaming == 1)
        {
            chomp;
            my $line = $_."\t@".$counter."\tNONAME";
            push(@lines, $line);
            ++$counter;
        }
        else
        {
            chomp;
            push(@lines, $_);
        }

        if(/;BEGIN_RENAMING_TAG/)
        {
            $renaming = 1;
        }
    }

    close FILE;
    open(FILE, ">$fileName") or die $!;
    print FILE join("\n", @lines);
    close FILE; 
    ```

5.  .def 文件中的条目现在都是`<entry> @<ordinal> NONAME`格式。

现在，我不使用这些序数来访问函数，我只是重命名它们，因为它让我暴露了数百个我不需要的导出函数（我反过来使用 Boost 序列化`dllexport`来强制链接其函数） . 所以你需要在 Perl 脚本中做更多的事情，比如导出一个带有函数名和序数的枚举。如果你想正确地做到这一点，你必须在 Perl 脚本中实现一个解构算法，它会给你准确的名称，注意重载（相同的名称，不同的参数）并保持枚举名称常量。

为了访问序数后面的函数，您使用[`GetProcAddress`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)但将序数转换为 LPCSTR。有关更多详细信息，请参阅该函数的文档。

# binary - 通过附加到消息来匹配 CRC 码

> ID：11652597
> 
> 赞同：1
> 
> 时间：2012-07-25T14:55:33.923
> 
> 标签：binary, embedded, checksum, crc, error-detection

我有一个二进制字符串（如下面的十六进制所示）并且正在使用 CRC-16-CCITT。我希望我所有的 CRC 都达到一个设定值 0x1D0F。我知道可以通过将 2 个字节附加到原始消息的末尾来使 CRC 与该值匹配，但我不确定如何找出附加值需要是什么。

前任。

0x01 0000 0000 0000 0000 0000 0000 0000 0000 13D8

附加值为 0x13D8

通过将此 13D8 添加到消息中，CRC 为我提供了所需的 0x1D0F。

任何有关如何计算此 0x13D8 值的帮助将不胜感激。

如果它可以在代码中巧妙地完成，那将是一个奖励！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:13:09.783

理论很简单，但是正确实施当然需要一些小心。

您可以选择消息中任何位置的任何 16 位（包括末尾的两个字节或散布在您喜欢的任何位置的 16 个单独的位）来未定义。称他们为*xi* for *i = 0..15*。然后使用逐位CRC算法对报文进行处理，但是生成并更新*xi*中16个线性方程的系数，代表CRC的16位。

然后你有一个简单的矩阵方程*Ax + b = c*。*Ax + b = c*的运算不是通常的乘法和加法，而是一位*与*和*异或*运算。

现在您使用通常的方法来反转矩阵*A*，实际上使用*and*和*xor*更容易（加法和减法现在都是同一个东西，只是异或），计算*b ^ c*并将其乘以逆。现在您可以将值放入*xi*位以获得所需的 crc。

另一个简化是您不需要实际的消息，只需要*xi*的长度和位置，然后在消息的所有其他位设置为零的情况下执行上述操作。这是因为如果您有两条长度相同的消息*P*和*Q*，则*crc(P) ^ crc(Q) = crc(P ^ Q)*。（这适用于核心 crc 算法，忽略 crc 的预处理和后处理。）

**更新：**

您可以下载[spoof.c](https://github.com/madler/spoof)，它解决了修改消息以产生特定 CRC 的问题。

# java - 如何在Java中动态实例化和调用类成员的方法？

> ID：11652598
> 
> 赞同：1
> 
> 时间：2012-07-25T14:55:34.953
> 
> 标签：java, reflection, dynamic

我对 Java 反射有疑问。这是我的代码非常简化。

假设我们有这个类：

```
public class MyClassA {
    private MyClassB myPropertyB_1;
    private MyClassB myPropertyB_2;

    ...
} 
```

还有这个类（用作 MyClassA 的属性：

```
public class MyClassB {

    private int myProperty;

    public MyClassB(){
    }

    ...
} 
```

我想使用 Java Reflection 来做这样的事情，在`MyClassA`：

```
 public void methodThatUsesReflectionOnProperty(int id){
        // 1\. Get the field using id
        // 2\. Instantiate this field dynamically (i.e. new MyClassB() )
        // 3\. Invoke some methods on this field dynamically (setters, addlisteners...)
} 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:01:22.507

您可以使用以下方法获取字段：

```
classObject.getDeclaredField(String fieldName); 
```

您可以使用以下方法获取方法：

```
classObject.getDeclaredMethod(String methodName, Class<?> ... parameterTypes); 
```

`newInstance()`如果有默认构造函数，你当然可以实例化它。

例如：

```
ClassA aObj = new ClassA();

// field access
Field field = ClassA.class.getDeclaredField("objectB");
Object bObj = field.getType().newInstance();
field.setAccessible(true); // as it is private it needs to be accessible first
field.set(aObj, bObj); // set bObj into field from aObj

// invoking method
Method method = bObj.getClass().getDeclaredMethod("methodB", String.class);
method.invoke(bObj, "reflection test!"); 
```

这将打印：

```
B wrote: reflection test! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:05:11.890

因此，如果我说得对，您是否希望获取字段 myPropertyB_1 以防您使用 '1' 作为 id 调用 methodThatUsesReflectionOnProperty？

在这种情况下，只需使用 Map 而不是反射。这可能看起来像：

```
public class MyClassA {
   private Map<Integer,MyClassB> myProperty;

   public void initMethod(Integer i) {
       if(this.myProperty.get(i)!=null)return;
       MyClassB myClassB = new MyClassB();
       this.myProperty.set(i, myClassB);
   }
} 
```

# c# - 如何在处理列表时使用@Html.CheckBoxFor()

> ID：11652606
> 
> 赞同：6
> 
> 时间：2012-07-25T14:56:00.723
> 
> 标签：c#, asp.net-mvc-3, razor, html-helper

这是我的观点。如何使用 CheckboxFor()：

```
@using eMCViewModels;
@model eMCViewModels.RolesViewModel
@{
    ViewBag.Title = "CreateNew";
}
<h2>
    CreateNew<
/h2>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>RolesViewModel</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>
        <div>
            @foreach (RoleAccessViewModel mnu in Model.RoleAccess)
            {
                 // How to use checkboxfor here?
            }
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

`Model.RoleAccess`是一个`List<RoleAccessViewModel>`，我想使用创建复选框`@Html.CheckBoxFor()`。

这是我的`RoleAccessViewModel`

```
public class RoleAccessViewModel
{
    public int RoleID { get; set; }
    public string RoleName { get; set; }
    public int MenuID { get; set; }
    public string MenuDisplayName { get; set; }
    public string MenuDiscription { get; set; }
    public string IsEnabled { get; set; } // changed to bool
} 
```

假设我在列表中有 5 个项目，那么我需要 5 个 ID=menuID 和 Text = menuDisplayName 的复选框。我怎样才能做到这一点？

编辑

我的尝试

```
@Html.CheckBoxFor(x=>x.RoleAccess.SingleOrDefault(r=>r.MenuID==mnu.MenuID).IsEnabled )
@Html.LabelFor(x=>x.RoleAccess.SingleOrDefault(r=>r.MenuID==mnu.MenuID ).MenuDisplayName ) 
```

但是在将`IsEnabled`from的类型更改`string`为之后`bool`。复选框有效。但是 Label 只打印`MenuDisplayName`而不是 values 。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-25T15:01:05.263

如果我没听错，你是说这个吗？并且`IsEnabled`应该是布尔类型

模型

```
public class RoleAccessViewModel
{
    public int RoleID { get; set; }
    public string RoleName { get; set; }
    public int MenuID { get; set; }
    public string MenuDisplayName { get; set; }
    public string MenuDiscription { get; set; }
    public bool IsEnabled { get; set; }
} 
```

看法

```
@foreach (RoleAccessViewModel mnu in Model.RoleAccess)
{
    @Html.CheckBoxFor(m => mnu.IsEnabled )
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-25T15:05:53.433

用 for 改变 foreach

```
@for(int i = 0; i < Model.RoleAccess.Count; i++)
{
    Html.CheckBoxFor(Model.RoleAccess[i].IsEnabled, new { id = Model.RoleAccess[i].MenuID });
    Html.DisplayFor(Model.RoleAccess[i].MenuDisplayName); // or just Model.RoleAccess[i].MenuDisplayName
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-25T15:08:15.327

`CheckBoxFor`仅适用于布尔属性。所以你需要做的第一件事是修改你的视图模型，以便包含一个布尔属性，指示是否选择了记录：

```
public class RoleAccessViewModel
{
    public int RoleID { get; set; }
    public string RoleName { get; set; }
    public int MenuID { get; set; }
    public string MenuDisplayName { get; set; }
    public string MenuDiscription { get; set; }
    public bool IsEnabled { get; set; }
} 
```

然后我建议用`foreach`编辑器模板替换你的循环：

```
<div>
    @Html.EditorFor(x => x.RoleAccess)
</div> 
```

最后编写相应的编辑器模板，该模板将自动为 RolesAccess 集合（`~/Views/Shared/EditorTemplates/RoleAccessViewModel.cshtml`）的每个元素呈现：

```
@model RoleAccessViewModel
@Html.HiddenFor(x => x.RoleID)
... might want to include additional hidden fields
... for the other properties that you want to be bound back

@Html.LabelFor(x => x.IsEnabled, Model.RoleName)
@Html.CheckBoxFor(x => x.IsEnabled) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-30T20:34:45.707

我知道它很旧，但是

在您的模型中使用[DataAnotations 显示属性](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayattribute.name(v=vs.110).aspx)

```
public class MyModel
   int ID{get; set;};
   [Display(Name = "Last Name")]
   string LastName {get; set;};
end class 
```

# c# - HTTP 套接字：响应标头

> ID：11652607
> 
> 赞同：0
> 
> 时间：2012-07-25T14:56:03.393
> 
> 标签：c#, http, sockets, header

我正在使用 C# 中的 Sockets 练习 HTTP，并且可以使用以下代码获取响应正文：

```
int bytes = 0;
while (bytes > 0)
{
    bytes = HttpSocket.Receive(RecieveBytes, RecieveBytes.Length, 0);
    Response.Body = Response.Body + Encoding.ASCII.GetString(RecieveBytes, 0, bytes);
} 
```

当我阅读 Response.Body 时，它只包含 HTML 代码。（身体）。

我将如何获得更多信息？像响应标头一样？我已经做了一些谷歌搜索，但没有明确的答案。

注意：我知道在 C# 中为 HTTP 创建类或框架没有意义，因为我们有 HttpWebRequest。但是，我这样做是出于学习目的。

斯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:02:00.353

您不可能只接收 HTTP 响应正文，`Socket.Receive()`将接收服务器已发送的所有可用字节，因此响应标头也必须存在（如果您正在与通用 Web 服务器通信并已发出有效请求）。使用[Fiddler](http://www.fiddler2.com/fiddler2/version.asp)之类的工具来监控请求-响应对并检查响应是否以`HTTP/1.1 200 OK`.

您可以调用`Receive()`，直到收到一个 double `\r\n`，这表明所有标头都已发送。从那里开始，您必须实施[RFC 2616 第 4.4 节](https://www.rfc-editor.org/rfc/rfc2616#section-4.4)以确定要读取多少（如果有）消息正文数据。

最常见的是`Content-length`响应标头，它指示您应该在 double 之后读取多少字节`\r\n`。如果该标头不存在（或者如果您的请求方法是`HEAD`，在这种情况下您应该停止阅读，因为不会有消息正文）并且其他[消息长度情况](https://www.rfc-editor.org/rfc/rfc2616#section-4.4)都不适用，那么您已经完成了读取数据点，你不应该尝试`Receive()`更多的数据。

但如果是出于学习目的，您应该已经找到了 RFC 并实现了它。你不能只是去读取数据并希望它会很好，这就是协议的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:16:07.907

您的 while 循环将永远不会执行，因为 'bytes' 最初为零并且它仅在它为正时循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T03:42:20.090

这不是处理 HTTP 的最佳方式。该类`Socket`对原始字节进行操作，但 HTTP 标头对文本行进行操作。您需要在循环中读取文本行，直到遇到空行，然后处理标题以决定如何完成读取剩余的原始字节（如果有）。看看`NetworkStream`和`StreamReader`类。更好的选择是改用`HttpClient`客户端类，让它为您处理所有这些细节。

# android - 将外部应用程序配置集中在 Android 中

> ID：11652608
> 
> 赞同：0
> 
> 时间：2012-07-25T14:56:06.387
> 
> 标签：android

(Android-Noob)

我找不到封装配置资源的最佳方法。

基本上我想保留这样的配置值：

```
<string name="environment">dev</string> 
<integer name="lookup_timeout">750</integer> 
<boolean name="use_cache">true</boolean> 
```

*   都在一个地方，
*   在单个 xml 文件中
*   通过某种统一的方法从 Java 访问 ( `R.config.environment`)

有什么我想念的吗？

**更新**：什么是配置资源？

一组通常是特定于环境的值，并且很可能会在应用程序开发期间由开发人员更改/微调。它当然不是用户可修改的，尽管与用户偏好无关。

典型的例子是：

*   一般日志级别
*   写入日志的地方
*   服务器的网址（开发/集成/生产）

来吧，你一定知道我的意思;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:09:24.243

> 一组通常是特定于环境的值，并且很可能会在应用程序开发期间更改/被微调。

您的 XML 几乎是您可以在值资源文件中放入的内容。在您的项目`res/values/`目录中，创建一个`configuration_resource_that_is_environment_specific.xml`文件（或任何您想命名的文件——名称无关紧要）。在那里，您可以拥有[string](http://developer.android.com/guide/topics/resources/string-resource.html)、[integer](http://developer.android.com/guide/topics/resources/more-resources.html#Integer)和[boolean](http://developer.android.com/guide/topics/resources/more-resources.html#Bool)资源。您将在运行时通过一个对象检索这些`Resources`对象，您可以通过调用`getResources()`any来获取该对象`Context`，例如您的`Activity`.

然后，您还可以通过其他资源集覆盖这些资源值（例如，`res/values-v11/`对于那些应该与 API 级别 11+ 不同的值的版本）。

话虽如此，我认为大多数人只是为了简单起见将这些东西存储在 Java 中的静态数据成员中。

> 来吧，你一定知道我的意思;-)

不仅“配置资源”不清楚，“环境特定”也不清楚，因为我们不知道您认为您的“环境”是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:00:31.367

也许试试

[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# wcf - AWS 上的自动升级/更新服务

> ID：11652611
> 
> 赞同：1
> 
> 时间：2012-07-25T14:56:10.573
> 
> 标签：wcf, upgrade, automated-deploy, amazon-cloudformation

我有一堆部署在 AWS 上的服务。

每次我必须更改服务中的某些内容时，我都必须从我的构建服务器（由 Jenkins 创建的构建）手动下载我的 WCF 文件。修改 web.configs，创建一个 zip 文件，然后从我的实例拉取的位置上传到 S3启动期间的文件 (CloudFormation)。

自动化此过程的最佳方法是什么？詹金斯可以帮忙吗？还是我应该研究另一种工具？还是我应该使用 AWS SDK 编写一个简单的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:00:14.393

您可以使用 Jenkins 部署到 S3。您只需确保在 Jenkins 服务器上安装了适当的 AWS 命令​​行工具。然后，您可以制作一个构建脚本，将完成的构建文件部署到 S3 中（可能仅在成功构建时）。

# c# - 在使用 ItemsSource 之前，项目集合必须为空

> ID：11652623
> 
> 赞同：1
> 
> 时间：2012-07-25T14:57:03.377
> 
> 标签：c#, wpf, xaml, listbox, datatrigger

如果我将 DataTrigger 放在一个简单的列表框中，我会得到这个运行时异常：

> 在使用 ItemsSource 之前，项目集合必须为空

我的没有数据触发器的列表框（也不例外）：

```
<ListBox ItemsSource="{Binding EdgedBoards}" SelectedItem="{Binding SelEdgedBoard, Mode=TwoWay}" DisplayMemberPath="Name">
    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}" 
               BasedOn="{StaticResource {x:Type ListBoxItem}}">

            <Setter Property="IsSelected"
                    Value="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

我的列表框`DataTrigger`：

```
<ListBox ItemsSource="{Binding EdgedBoards}" SelectedItem="{Binding SelEdgedBoard, Mode=TwoWay}" DisplayMemberPath="Name">
    <Style TargetType="{x:Type ListBox}" BasedOn="{StaticResource {x:Type ListBox}}">
        <Setter Property="Focusable" Value="True" />

        <Style.Triggers>
            <DataTrigger Binding="{Binding ElementName=EdgedBoardsAdd_UC, Path=Visibility}" Value="Visible">
                <Setter Property="Focusable" Value="False" />
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource {x:Type ListBoxItem}}">
            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

后面的代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T14:59:34.780

您没有正确声明样式，因此它被设置为列表框的*内容*- 您正在手动声明一个包含单个样式的列表。

您应该用元素包装现有`Style`元素`<ListBox.Style>`以解决此问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T14:59:13.220

您添加了`Style` *作为项目*，您忘记了`ListBox.Style`标签。由于您还尝试绑定，因此`ItemsSource`您会收到错误消息。

# objective-c - 任何等效的c ++“删除这个”？

> ID：11652624
> 
> 赞同：0
> 
> 时间：2012-07-25T14:57:05.280
> 
> 标签：objective-c

在 C++ 中，对象可以删除自己，在 Objective-C 中调用 Dealloc 是不允许的，在 ARC 中，该类甚至可能没有 dealloc。

在 Objective-C 中是否会像有时在 C++ 中那样删除自己的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:00:48.787

释放内存并删除它？

```
[xyz release];
xyz=nil; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:01:42.597

“删除这个”没有直接的等价物，因为 Objective-C 使用引用计数，当对象的引用数达到零时，系统将删除您的对象。如果你想实现某种“一次性”对象，即做某事然后删除自己，那么你最好的选择是在开始操作时增加对 self 的引用计数，`[self retain]`并在结束时减少它`[self release]`。如果没有其他人持有对您的对象的引用，则稍后将导致该对象自行删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:03:14.463

将你的对象设置为 nil

```
obj = nil 
```

# php - 用预赛测试

> ID：11652626
> 
> 赞同：0
> 
> 时间：2012-07-25T14:57:14.670
> 
> 标签：php, preg-match

我有这个来源：

```
preg_match('/([-\w]+).facebook.divisiondesproduitsprofessionnels.com/', $_SERVER["SERVER_NAME"]) 
```

我的脚本位于`https://facebook.divisiondesproduitsprofessionnels.com/France/steampod/html/`.

我很惊讶这个预赛没有返回 TRUE。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:05:39.943

卓悦蒂姆。

\w 任何单词字符（字母、数字、下划线） 所以你想要多个单词字符或破折号，然后是 facebook...删除 ([-\w]+) 就可以了。

rubular.com 是一个很好的工具。

希望它有所帮助，Sincérement。

# java - SWIG - 为具有四个传递字节数组的参数的函数创建类型映射

> ID：11652628
> 
> 赞同：1
> 
> 时间：2012-07-25T14:57:15.033
> 
> 标签：java, c++, byte, swig

[这是如何使用从 C++ 到 Java 的 ByteBuffer 返回](https://stackoverflow.com/questions/11618267/how-to-use-a-bytebuffer-return-from-c-to-java)问题的后续行动——我将感谢 Flexo 迄今为止的不懈支持——我想我只是还没有掌握类型映射...... :-(

我有一个带有如下四个参数的 C 函数，其中第三个和第四个参数通过引用传递

```
extern "C" int foo(const char* passByValText, const int passbyValLen, 
             unsigned char* retTextByRef, int *retTextLen) 
```

Calling Java Wrapper 函数需要看起来像这样

```
int foo(String passByValText, int passbyValLen, byte[] retBuf, SWIGTYPE_p_int retTextLen); 
```

或者它可以是

```
int foo(String passByValText, int passbyValLen, ByteBuffer retBuf, SWIGTYPE_p_int retTextLen); 
```

我可以为我写的类型图道歉 - 但基本上这可能会使事情更加混乱......所以我保持这个干净......

下面是c端的示例代码

```
extern "C" int foo (const char* passByValText, const int passbyValLen, char *retTextByRef, int *retTextLen){
    // binary value stuffed in the retTextByRef. In real program I compute this
    unsigned char someText[10]={0x30,0x31,0x32,0x33,0x34,0x35,0x36,0x37,0x00};    
    memcpy(cipherText,someText,9);
    // I set the length of the value I stuffed into the buffer in c program
    *cipherLen=9;
return 0; 
```

}

以及调用这个 c 函数的 Java 程序

```
class Caller{
    public static void main(String[] args) {

    //Define the parameter to pass by reference!!
    SWIGTYPE_p_int retTextLen=MYMODULE.new_intp();

    //Create a Java Wrapper Instance 
    JavaWrapClass myWrap=new JavaWrapClass();

    StringBuffer sBuf = new StringBuffer(50);
    int retTextLenVal=0;
    myWrap.foo("PASSED-STRING-BY-VALUE", 24, sBuf, retTextLen);
    retTextLenVal= MYMODULE.intp_value(retTextLen);
    System.out.println("JAVA :: got length "+ retTextLenVal);
    System.out.println("JAVA :: got BUFFER "+ sBuf);
    }
} 
```

万分感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:06:22.643

我使用以下标头进行测试：

```
static int foo(const char *passByValText, const int passByValLen,
               unsigned char *retTextByRef, int *retTextLen) {
  *retTextLen = passByValLen;
  if (retTextByRef) {
    memcpy(retTextByRef, passByValText, passByValLen);
  }
  return NULL == retTextByRef;
} 
```

然后，我将最简单的（例如最少自定义类型映射）SWIG 接口放在一起，以合理地包装这个函数：

```
%module test

%{
#include "test.h"
%}

%apply (char *STRING, size_t LENGTH) { (const char *passByValText, const int passByValLen) };
// Use String instead of byte[] for input as requested in Q:
%typemap(jstype) (const char *passByValText, const int passByValLen) "String"
%typemap(javain) (const char *passByValText, const int passByValLen) "$javainput.getBytes()"

%include <arrays_java.i>

// Force unsigned char array to be byte[] in Java:
%apply signed char[]  { unsigned char *retTextByRef };

%include <typemaps.i>

// Use the OUTPUT typemap - it passes an array with only one element
// could also use cpointers.i if you prefer
%apply int *OUTPUT { int *retTextLen };

%include "test.h" 
```

最终将函数公开`foo`为一个接受三个输入的函数 - a `String`，`byte[]`用于输出数组的 a 和`int[]`用于输出的a `int`。

这让我可以写：

```
public class run {
  public static void main(String[] argv) {
    System.loadLibrary("test");
    byte arr[] = new byte[100];
    int sz[] = {100};
    test.foo("Hello world", arr, sz);
    System.out.println(new String(arr, 0 , sz[0]));    
  }
} 
```

测试时按预期工作。arrays_java.i 中的类型映射拒绝`null`数组，因此`if`我编写的示例中的 不能用于查询输出大小。

如果要使用 a`StringBuffer`而不是`byte[]`最简单的解决方案是使用`%pragma`在 Java 中生成重载：

```
%pragma(java) modulecode = %{
  public static int foo(String in, StringBuffer out) {
    int sz[] = {out.capacity()};
    byte ret[] = new byte[out.capacity()];
    final int v = test.foo(in, ret, sz);
    // Or whatever your preferred semantics are: 
    out.replace(0, sz[0], new String(ret, 0, sz[0]));
    return v;
  }
%} 
```

# php - 将链接列表类别包含为 css 类

> ID：11652630
> 
> 赞同：0
> 
> 时间：2012-07-25T14:57:22.523
> 
> 标签：php, wordpress, hyperlink, categories

我想在我的 wordpress 链接列表中呈现一些额外的 css 类，特别是 id 喜欢将链接类别呈现为 css 类，例如：

```
link       : http://www.foobar.com/
gategories : friends, colleagues
name       : Foo Bar 
```

当前呈现为：

```
<a href="http://www.foobar.com/" target="_blank">Foo Bar</a> 
```

但我希望它呈现为：

```
<a href="http://www.foobar.com/" target="_blank" class="friends colleagues">Foo Bar</a> 
```

我知道您使用以下函数来构建链接列表，但我无法弄清楚如何修改它来满足我的需要：

```
function wp_list_bookmarks($args = '') {
    $defaults = array(
        'orderby' => 'name', 'order' => 'ASC',
        'limit' => -1, 'category' => '', 'exclude_category' => '',
        'category_name' => '', 'hide_invisible' => 1,
        'show_updated' => 0, 'echo' => 1,
        'categorize' => 1, 'title_li' => __('Bookmarks'),
        'title_before' => '<h2>', 'title_after' => '</h2>',
        'category_orderby' => 'name', 'category_order' => 'ASC',
        'class' => 'linkcat', 'category_before' => '<li id="%id" class="%class">',
        'category_after' => '</li>'
    );

    $r = wp_parse_args( $args, $defaults );
    extract( $r, EXTR_SKIP );

    $output = '';

    if(1) {
        //output one single list using title_li for the title
        $bookmarks = get_bookmarks($r);

        if ( !empty($bookmarks) ) {
            if ( !empty( $title_li ) ){
                $output .= str_replace(array('%id', '%class'), array("linkcat-$category", $class), $category_before);
                $output .= "$title_before$title_li$title_after\n\t<ul class=\"xoxo blogroll $category\">\n";
                $output .= _walk_bookmarks($bookmarks, $r);
                $output .= "\n\t</ul>\n$category_after\n";
            } else {
                $output .= _walk_bookmarks($bookmarks, $r);
            }
        }
    }

    $output = apply_filters( 'wp_list_bookmarks', $output );

    if ( !$echo )
        return $output;
    echo $output;
}

?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:20:07.177

首先，您永远不应该修改 Wordpress 核心功能。然而，在书签的情况下，我并不真的责怪你想要这样做。他们有点痛苦。

我会使用 get_bookmarks() 从头开始​​构建它。这是一个工作示例：

```
foreach(get_bookmarks() as $bm)
{
    $terms = get_the_terms($bm->link_id, 'link_category');
    $classes = array('wp_link');

    if($terms)
    foreach($terms as $term)
        $classes[] = $term->slug;

    echo '<a class="'.implode(' ', $classes).'" href="'.$bm->link_url.'"'.($bm->link_target ? 'target="'.$bm->link_target.'"' : '').'>'.$bm->link_name.'</a><br/>';
} 
```

只需将其放置在模板中要生成书签的任何位置即可。或者您可以将其包装在自定义函数调用中，然后从模板中调用该函数。

# android - 保存黑白照片

> ID：11652634
> 
> 赞同：1
> 
> 时间：2012-07-25T14:57:38.620
> 
> 标签：android

是否可以将使用相机在彩色模式下拍摄的照片保存为黑白照片，或者必须更改相机参数以使取景器在拍摄照片时看到黑白照片？这是我用来保存彩色图像的代码，我想将其保存为黑白以节省空间。

```
 PictureCallback jpegCallback = new PictureCallback() {
    @Override
        public void onPictureTaken(byte[] data, Camera camera) { 
        Log.e("Pic Taken","Callback");
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = 1;

        options.inDither = false; // Disable Dithering mode
        options.inPurgeable = true; // Tell to gc that whether it needs free
                                    // memory, the Bitmap can be cleared
        options.inInputShareable = true; // Which kind of reference will be
                                            // used to recover the Bitmap
                                            // data after being clear, when
                                            // it will be used in the future
        options.inTempStorage = new byte[32 * 1024];
        options.inPreferredConfig = Bitmap.Config.RGB_565;
        Bitmap bMap = BitmapFactory.decodeByteArray(data, 0, data.length, options);

        int orientation;
        // others devices
        if(bMap.getHeight() < bMap.getWidth()){
            orientation = 90;
        } else {
            orientation = 0;
        }

        Bitmap bMapRotate;
        if (orientation != 0) {
            Matrix matrix = new Matrix();
            matrix.postRotate(orientation);
            bMapRotate = Bitmap.createBitmap(bMap, 0, 0, bMap.getWidth(),
                    bMap.getHeight(), matrix, true);
        } else
            bMapRotate = Bitmap.createScaledBitmap(bMap, bMap.getWidth(),
                    bMap.getHeight(), true);

        FileOutputStream out;
    boolean mExternalStorageAvailable = false;
    boolean mExternalStorageWriteable = false;
        try {
              Log.e("Saving","Pic");
        String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
        String fileName = "/" + System.currentTimeMillis() + ".jpg";

            out = new FileOutputStream(baseDir + fileName);

            bMapRotate.compress(Bitmap.CompressFormat.JPEG, 25, out);
            if (bMapRotate != null) {
                bMapRotate.recycle();
                bMapRotate = null;
            }

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:05:50.443

您可以转换位图：

```
public Bitmap convertToGrayScale(Bitmap original) {        
    Bitmap result = Bitmap.createBitmap(original.getWidth(), original.getHeight(), Bitmap.Config.RGB_565);
    Canvas canvas = new Canvas(result);
    Paint paint = new Paint();
    ColorMatrix matrix = new ColorMatrix();
    matrix.setSaturation(0);
    ColorMatrixColorFilter f = new ColorMatrixColorFilter(matrix);
    paint.setColorFilter(f);
    canvas.drawBitmap(original, 0, 0, paint);
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:07:03.557

您可以将现有照片转换为黑白照片。后：

```
else
        bMapRotate = Bitmap.createScaledBitmap(bMap, bMap.getWidth(),
                bMap.getHeight(), true); 
```

添加这个：

```
Bitmap newBitmap = Bitmap.createBitmap(bMapRotate.getWidth(), bMapRotate.getHeight(), Bitmap.Config.RGB_565);
Canvas canvas = new Canvas(newBitmap);
Paint paint = new Paint();
ColorMatrix colorMatrix = new ColorMatrix();
colorMatrix.setSaturation(0);
ColorMatrixColorFilter cmFilter = new ColorMatrixColorFilter(colorMatrix);
paint.setColorFilter(cmFilter);
canvas.drawBitmap(bMapRotate, 0, 0, paint); 
```

并且不要忘记在 bMapRotate 上调用 .recycle()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:01:41.237

它应该在`Camera.parameters`.

根据设备的相机是否支持它，您可以使用它。

使用此代码检索它们：

```
Camera.Parameters params = cam.getParameters();
try {           
    for (String e : params.getSupportedColorEffects()) {
        Log.d(TAG, "Effect: " + e);
    }
}
catch (NullPointerException npe) {
    Log.d(TAG, "No color effects supported by this camera.");           
} 
```

并阅读文档：

[http://developer.android.com/reference/android/hardware/Camera.Parameters.html](http://developer.android.com/reference/android/hardware/Camera.Parameters.html)

# html - html 网站在 Internet Explorer 中不起作用

> ID：11652636
> 
> 赞同：-1
> 
> 时间：2012-07-25T14:57:41.753
> 
> 标签：html, internet-explorer

我刚刚做了一个网站，主要是在 chrome 和 firefox 中进行测试。

我今天把这个网站放到网上，发现它在 Internet Explorer 上完全不起作用！我去了 wc3 验证器，但我看不到任何会导致这种灾难性故障的东西。

我对此感到恐慌。任何人都可以帮忙吗？

它发生在以下站点上：http: [//msc32.cmsmotion.com](http://msc32.cmsmotion.com)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:42:45.420

问题是因为您正在尝试使用 IE 中图像的宽度和/或高度来做一些时髦的事情。IE 不喜欢这样。您会看到，如果您将高度和宽度设置为“真实”值，例如将两者都设置为 400，它将起作用。

不是答案的一部分，但使用内联样式属性被认为是不好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:00:37.367

将图像尺寸设置为自动是您的问题。检查一下：[高度：Internet Explorer 8 及更低版本中的自动](https://stackoverflow.com/q/8610077/1315694)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-25T15:07:44.397

好吧，太可惜了。。我建议你再做一次，只在 IE 中测试，这样可以节省时间。一般来说，如果它在 IE 中工作，那么它在其他浏览器中也可以工作。另外，不要使用表格。 . 除非您非常熟悉它的性质.. 表格通常在每个浏览器中的工作方式都不同

# jquery - 滚动到无高度动态 div 的底部

> ID：11652645
> 
> 赞同：1
> 
> 时间：2012-07-25T14:58:13.007
> 
> 标签：jquery, html, scroll

我有一个包含一些日志的 div

```
<div id="log">
   <div class="logitem"></div>
   <div class="logitem"></div>
   <div id="containerbottom"></div> 
</div> 
```

在日志中，在运行时，我附加了更多未知数量的`<div class="logitem"></div>`.

我想在添加项目后立即滚动到容器底部

我试过使用：

```
$('#log').animate({
     scrollTop: $('#containerbottom').offset().top
}); 
```

但它似乎表现不佳。

我还有什么其他选择可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:50:15.763

尝试使用每隔一段时间调用的函数向下滚动：

```
function scrollDown()
{
    $("html, body").animate({ scrollTop: $(document).height() },'slow');
}

setInterval(scrollDown,1000); // Executes function every 1,000 milliseconds. 
```

**编辑：**

我最近发现使用递归`setTimeout`而不是`setInterval`尽可能避免阻塞事件队列并在出现错误时导致大量重复错误消息是一种很好的做法。此方法仅适用于不需要精确计时的应用。如果您仍然需要每 1,000 毫秒*准确*调用一次函数（例如秒表），请继续使用`setInterval`.

例子：

```
(function scrollDown(){
    $("html, body").animate({ scrollTop: $(document).height() },'slow');
    setTimeout(scrollDown,1000);
})(); 
```

如果您的 jQuery 动画堆积在 jQuery 的动画队列中，您可能需要使用`.stop().animate(...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:25:00.097

问题是您正在尝试为#log 设置动画，而实际上它是 html 和正文（我同时使用这两种方法来修复一些不喜欢其中一种的浏览器）。

这是我在我的 JS 库中使用的一个快速小函数，除了任何#id 之外都是动态的，但基本上它会滚动 $('html, body').animate();

[jsFiddle 示例](http://jsfiddle.net/NEYye/)

```
jNamespace._goToByScroll = function(id) {
    //NOTE: Scroll to specific #ID in html
    //Useage: jNamespace.goToByScroll('top') - ommit #, added inside function
    //ENDNOTE

    $('html,body').animate({ scrollTop: $("#" + id).offset().top }, 'slow');
}; 
```

# php - 使用 PHP 确定 html 请求是否来自办公室内部

> ID：11652647
> 
> 赞同：1
> 
> 时间：2012-07-25T14:58:20.007
> 
> 标签：php, webserver, httprequest

我想知道某个服务器设置。

假设我有一个在我的本地网络上运行的 Web 服务器，可以使用诸如 www.example.com 之类的 URL 从网络内部和外部访问它。

我希望我的 PHP 网站能够确定请求是来自内部 LAN 还是来自外部。我怀疑使用 IP 地址是否有可能，因为请求看起来好像来自公共 IP 地址，而不是内部 IP 地址 192.168.xx 并且公共 IP 可能会不时更改。

这可能吗，我如何在 PHP 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:01:09.613

如果您的请求来自局域网内部，则 $_SERVER['REMOTE_ADDR'] 将来自私有 IP 地址组，如果来自局域网外部，则不会。除非您的内部网络配置不佳，否则情况可能并非如此。

在此处查找正确的地址组 [http://en.wikipedia.org/wiki/Private_network](http://en.wikipedia.org/wiki/Private_network)

如果您的内部 dns 服务器将 example.com 解析为公共 ip，那么请求似乎也来自公共 ip，因此如果是这种情况，您也知道请求来自内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:01:46.890

只要您知道办公室的外部 NAT IP 范围，您应该能够通过访问 $_SERVER['REMOTE_ADDR'] 值轻松地做到这一点。

# java - Jar 文件没有从 MSSQL 存储过程运行？

> ID：11652649
> 
> 赞同：1
> 
> 时间：2012-07-25T14:58:34.310
> 
> 标签：java, sql-server, stored-procedures

大家好，我正在尝试从 MSSQL 存储过程中运行一个 jar 文件。但是我收到错误“'java'不被识别为内部或外部命令”，我正在使用存储过程中的以下命令

```
EXEC master..xp_cmdshell 'java -jar C:\admin\yyyyy\xxxx.jar' 
```

我已经安装了 JRE 并将其添加到环境变量中。我能够从命令提示符执行相同的 jar 文件。如果我遗漏了什么，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:04:05.727

您是否尝试过包含 java 可执行文件的完整路径（即：c:\java\jre\bin\java.exe -jar C:\admin\yyyyy\xxxx.jar）？

# r - 计算周日、周一、...、周六的数量

> ID：11652651
> 
> 赞同：1
> 
> 时间：2012-07-25T14:58:41.863
> 
> 标签：r

我喜欢计算 2001 年的星期日、星期一、星期二、...、星期六的数量。将以下日期 { 1 月 1 日、4 月 5 日、4 月 13 日、12 月 25 日和 12 月 26 日} 视为公共假期，并将其视为星期日. 我怎样才能在 R 中做到这一点？- 谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T15:15:12.543

这是立陶宛语版本：

```
dates <- as.Date("2001-01-01") + 0:364
wd <- weekdays(dates)
idx <- which(dates %in% as.Date(c("2001-01-01", "2001-04-05", 
             "2001-04-13", "2001-12-25", "2001-12-26")))
wd[idx] <- "sekmadienis"
table(wd)
wd
   antradienis ketvirtadienis   penktadienis    pirmadienis    sekmadienis    šeštadienis   trečiadienis 
            51             51             51             52             57             52             51 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T15:24:48.877

尝试以下操作：

```
# get all the dates you need
dates <- seq(from=as.Date("2001-01-01"), to=as.Date("2001-12-31"), by="day")

# makes sure the dates are in POSIXlt format
dates <- strptime(dates, "%Y-%m-%d")

# get rid of the public holidays
pub <- strptime(c(as.Date("2001-01-01"), 
                 as.Date("2001-04-05"), 
                 as.Date("2001-04-13"), 
                 as.Date("2001-12-25"), 
                 as.Date("2001-12-26")), "%Y-%m-%d")
dates <- dates[which(!dates%in%pub)]

# To see the day of the week
weekdays <- dates$wday

# Now, count the number of Mondays for example:
length(which(weekdays == 1)) 
```

有关详细信息，请参阅[DateTimeClasses 的文档](http://stat.ethz.ch/R-manual/R-devel/library/base/html/DateTimeClasses.html)。请记住将 5 添加到您的星期日计数。

# php - PHP Cron Job json_encode 错误

> ID：11652659
> 
> 赞同：0
> 
> 时间：2012-07-25T14:59:19.117
> 
> 标签：php, crontab, json

我有一个 PHP 文件，它正在运行一个简单的货币转换检查。当我通过浏览器运行它时它可以完美运行，但我的目标是构建一个 cron。当我通过 SSH 运行脚本时：

```
php /path/to/file.php 
```

我得到以下信息：

```
PHP Warning:  json_encode(): Invalid UTF-8 sequence in argument in /path/to/file.php on line 36 
```

第 36 行是：

```
fwrite($fh, json_encode($conversions)); 
```

...其中 $conversions 是一个简单的一维数组

这是文件：

```
$conversions = array();

$currencies = json_decode(file_get_contents("/path/to/currencies.json"), true);

foreach($currencies as $cur=>$data){

    //make string to be put in API
    $string = "1USD=?".$data['code'];
    //Call Google API
    $google_url = "http://www.google.com/ig/calculator?hl=en&q=".$string;

    $ch = curl_init();  
    // set URL and other appropriate options  
    curl_setopt($ch, CURLOPT_URL, $google_url);  
    curl_setopt($ch, CURLOPT_HEADER, 0);  
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);     
    // grab URL and pass it to the browser    
    $result = curl_exec($ch);
    //Explode result to convert into an array
    $result = explode('"', $result);

    $converted_amount = explode(' ', $result[3]);
    $conversion = $converted_amount[0];
    //$conversion = $conversion * $amount;
    $conversions[$cur] = $conversion;
    if($conversion==0){ exit('0 Return Error'); }

    curl_close($ch);

}

$fh = fopen("/path/to/currency_conversions.json", 'w') or die("can't open file");
fwrite($fh, json_encode($conversions));
fclose($fh); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:07:52.090

好吧，我搜索了你，我发现 json_encode 只接受 UTF-8 所以这里是解决方案：

```
for($i=0;$i<count($conversions);$i++)
    $conversions[$i] = utf8_encode($conversions[$i]);
fwrite($fh, json_encode($conversions)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:07:48.393

尝试将您的 PHP 版本更新到高于 5.2.7 的版本 旧版本有 UTF-8 错误。

# python - 在 Windows 上运行 wexpect

> ID：11652660
> 
> 赞同：1
> 
> 时间：2012-07-25T14:59:28.373
> 
> 标签：python, pexpect, wexpect

我已经在 Windows 7 上安装了 wexpect。现在，当我尝试运行任何命令时，我收到以下错误。我正在使用 MKS 工具包，所以`ls`是一个有效的命令。

```
>>> import pexpect
>>> pexpect.run('ls ')
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "C:\Python27\lib\site-packages\winpexpect-1.5-py2.7.egg\pexpect.py", line
219, in run
child = spawn(command, maxread=2000, logfile=logfile, cwd=cwd, env=env)
File "C:\Python27\lib\site-packages\winpexpect-1.5-py2.7.egg\pexpect.py", line
429, in __init__
self._spawn (command, args)
File "C:\Python27\lib\site-packages\winpexpect-1.5-py2.7.egg\pexpect.py", line
516, in _spawn
raise ExceptionPexpect ('The command was not found or was not executable: %s
.' % self.command)
pexpect.ExceptionPexpect: The command was not found or was not executable: ls. 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-29T12:50:40.547

**更新**

该问题已在[v2.3.4](https://pypi.org/project/wexpect/#history)中解决。

* * *

**简短的：**

`.exe`在可执行文件末尾添加：

```
>>> import pexpect
>>> pexpect.run('ls.exe') 
```

* * *

**细节：**

问题的根源在于枚举的`which`命令（方法）。此方法在文件系统中搜索可执行文件。这是我的[wexpect](https://github.com/raczben/wexpect)的关键片段：

```
# ...
for path in pathlist:
    f = os.path.join(path, filename)
    if os.access(f, os.X_OK):
        return f
return None
# ... 
```

此代码附加`run()`as的参数，`filename`如果它是有效且可执行的路径，则返回它。请注意，Windows（与 Linux 不同）可执行文件以`*.exe`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-24T04:57:36.540

回复很晚，但我最近也遇到了这个问题。

失败或可能的许多原因，wexpect.py 需要修改（至少对我而言）

请检查在 wexpect.py 文件的同一目录中生成的 pexpect_error.txt 文件。

它派生了“python.exe”，因此“python.exe”必须在路径中（不允许使用其他 exe 名称）。

执行 py 脚本时，您必须在 wexpect.py 的同一目录中（lib 文件名必须是 wexpect.py 而不是 pexpect.py）。

cmd（扩展名为 .exe/.com/.bat）必须在您的 windows/shell 命令提示符下运行。检查（例如，实际上在 Windows 中，当我们运行“ls”时，它实际上正在运行 ls.exe/com，在 py 脚本中，称为“ls.exe”）

最后但并非最不重要的一点：在我的情况下，用于创建 Window OS 的控制台窗口失败（从 pexpect_error.txt 中找到），因此我在下面进行了更改

第 2397 行，使矩形的 Y 坐标变小而不是 70，例如 24 对我有用

# javascript - jQuery：将类添加到 HTML5 DOM

> ID：11652665
> 
> 赞同：1
> 
> 时间：2012-07-25T14:59:37.933
> 
> 标签：javascript, jquery, html

我今天在向 HTML5 DOM 对象添加类时遇到问题。对不起，如果这是一个新手问题。:P 例如：

```
<!DOCTYPE html>
<html>
    <head>
        <title>stackoverflow example</title>
        <style>
        .centercontent {
            width:100%;
            max-width:1080px;
            margin:0 auto;
        }
        </style>
    </head>
    <body>
        <header>
            <!-- All direct children of BODY should be centered on the page; however, children should not be added to .centercontent -->
            <h1>Site Name</h1>
        </header>
        <section>
            <p>Hello World</p>
        </section>
        <footer>
            &copy; no one 2012
        </footer>
    </body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.j"></script>
    <script>
        $("body > *").addClass("centercontent");
    </script>
</html> 
```

我相信是我的JS；但是，我以前从未使用过 addClass。非常感谢大家的时间。：） 祝你有美好的一天！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:03:22.313

简单地写

```
body > * {
    width:100%;
    max-width:1080px;
    margin:0 auto;
} 
```

作为 head 部分中的直接 CSS 规则：查看您的示例 jQuery 似乎对于此任务并不是真正必要的。

此选择器在 CSS 块中也有效，并且工作正常（不适用于 IE<=6）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:03:20.813

您没有`$(document).ready(function() {...});`在 jquery 中使用 a 。尝试这个：

```
$(document).ready(function() {
    $("body > *").addClass("centercontent");
}); 
```

此外，您在脚本参考的末尾缺少一个 s

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.j"></script>     // original
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>    // fixed 
```

# eclipse-rap - 如何使用工具栏按钮作为下载链接

> ID：11652666
> 
> 赞同：1
> 
> 时间：2012-07-25T14:59:42.687
> 
> 标签：eclipse-rap

我正在编写一个以 rap 1.4 作为 rap 部分的目标平台的 RCP/RAP-App。在 rcp 中，我通过 plugin.xml 中的 menuContribution 配置了一个保存按钮，并为保存命令配置了一个相应的 SaveHandler。现在我喜欢将此按钮用作我的说唱应用程序中的下载按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:29:03.603

我懂了。
我编写了一个 DownloadServiceHandler 并在我的保存命令处理程序中创建了一个带有下载 URL 的不可见浏览器。
所有的工作一步一步：
工具栏中的保存按钮在plugin.xml中配置：

```
 <extension
         point="org.eclipse.ui.commands">
      <command
            id="pgui.rcp.command.save"
            name="Save">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar">
         <toolbar
               id="pgui.rcp.toolbar1">
            <command
                  commandId="pgui.rcp.command.save"
                  icon="icons/filesave_16.png"
                  id="pgui.rcp.button.save"
                  style="push"
            </command>
         </toolbar>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="pgui.handler.SaveHandler"
            commandId="pgui.rcp.command.save">
      </handler>
   </extension> 
```

我创建了一个 DownloadServiceHandler：

```
public class DownloadServiceHandler implements IServiceHandler
{
  public void service() throws IOException, ServletException
  {
    final String fileName = RWT.getRequest().getParameter("filename");
    final byte[] download = getYourFileContent().getBytes();
    // Send the file in the response
    final HttpServletResponse response = RWT.getResponse();
    response.setContentType("application/octet-stream");
    response.setContentLength(download.length);
    final String contentDisposition = "attachment; filename=\"" + fileName + "\"";
    response.setHeader("Content-Disposition", contentDisposition);
    response.getOutputStream().write(download);
  }
} 
```

在 ApplicationWorkbenchWindowAdvisor 的 postWindowCreate 方法中，我注册了 DownloadServiceHandler：

```
private void registerDownloadHandler()
  {
    final IServiceManager manager = RWT.getServiceManager();
    final IServiceHandler handler = new DownloadServiceHandler();
    manager.registerServiceHandler("downloadServiceHandler", handler);
  } 
```

在 SaveHandler 的执行方法中，我创建了一个不可见的浏览器，并使用文件名和注册的 DownloadServiceHandler 设置 url。

```
 final Browser browser = new Browser(shell, SWT.NONE);
    browser.setSize(0, 0);
    browser.setUrl(createDownloadUrl(fileName));
       .
       .
  private String createDownloadUrl(final String fileName)
  {
    final StringBuilder url = new StringBuilder();
    url.append(RWT.getRequest().getContextPath());
    url.append(RWT.getRequest().getServletPath());
    url.append("?");
    url.append(IServiceHandler.REQUEST_PARAM);
    url.append("=downloadServiceHandler");
    url.append("&filename=");
    url.append(fileName);
    return RWT.getResponse().encodeURL(url.toString());
  } 
```

# c# - WPF DataGrid SelectedCellsChanged 事件触发两次

> ID：11652671
> 
> 赞同：1
> 
> 时间：2012-07-25T14:59:58.977
> 
> 标签：c#, wpf, datagrid

我已通过订阅

```
_itemsGrid.SelectedCellsChanged += Handle_SelectedCellsChangedEvent; 
```

到 WPF DataGrid SelectedCellsChanged 事件和通过

```
private void Handle_SelectedCellsChangedEvent (object sender, SelectedCellsChangedEventArgs args)
{
    Logger.DoLogging("args.AddedCells.Count={0}, args.RemovedCells.Count={1}.", args.AddedCells.Count, args.RemovedCells.Count);
    ...
} 
```

我看到有时对于一行选择更改有两个调用：

现在这种行为可能不方便或出乎意料，但它本身没有问题。我真正的问题是，在某些情况下，数据网格忘记取消选择已删除的单元格。这意味着在事件处理程序被调用和处理之后，之前选择的单元格仍然被视觉选择。

我的假设是这种遗忘与我向用户显示的对话框有关。

有没有其他人看到数据网格“忘记”取消选择单元格？

谢谢弗兰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:30:39.587

该事件不仅封装了通知单元格被添加到选择中的动作（即[SelectedCells](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.selectedcells.aspx)），而且它还通知单元格从选择中删除。这允许您对两种或其中一种选择更改类型采取操作。

[我相信这与NotifyCollectionChangedEventArgs](http://msdn.microsoft.com/en-us/library/system.collections.specialized.notifycollectionchangedeventargs.aspx)有一个 Action的事实相对应。因此，要显示网格的 SelectedCells 集合中的更改，需要添加和删除项目。由于事件不支持将它们显示为一个，因此添加和删除的通知被分成不同的通知。

# bash - tr 命令在 cygwin bash.exe shell 中导致问题，但在 mintty.exe 中有效

> ID：11652672
> 
> 赞同：0
> 
> 时间：2012-07-25T14:59:59.240
> 
> 标签：bash, shell, cygwin, sh, tr

我将 Windows 与 cygwin 一起使用。以下命令应输出字符串“./bootstrp3.cab”中“/”的出现次数。当我使用 mintty.exe shell 并输出“1”时它可以工作：

```
echo ./bootstrp3.cab | tr -cd / | wc -c 
```

不幸的是，它使用 bash.exe shell 输出以下消息

```
Usage:
tr [-cs] string1 string2
tr -s[-c] string1
tr -d[-c] string1
tr -ds[-c] string1 string2 
```

看起来这两个 shell 的行为不同，但它们似乎都是同一种 shell，因为当 I 时`echo $0`， bash.exe 输出`bash`和 mintty.exe 输出`-bash`。

我还尝试了使用 bourne shell (sh.exe) 的命令，但它输出的消息与使用 bash.exe shell 的消息相同。

有谁知道我如何让命令与 sh.exe 或 bash.exe shell 一起工作？有人知道为什么两个 bash shell 的行为不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:10:19.507

`sed`你可以使用and来做同样的事情`wc`：

```
echo -n ./bootstrp3.cab | sed 's![^/]!!g' | wc -c 
```

# sql - CTE 查询的结果未按级别排序，为什么？

> ID：11652673
> 
> 赞同：-1
> 
> 时间：2012-07-25T14:59:59.587
> 
> 标签：sql, sql-server, common-table-expression, recursive-query

更新：我问了这个问题，因为结果看起来不像它是如何执行的......这在这里解释：http: [//msdn.microsoft.com/en-us/library/ms186243(v=sql.105)。 aspx](http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx)

好吧，我还有另一个问题...如果我不需要相同的父母和级别，是否可以使用 CTE（而不是之后的选择）或其他一些 sql 只返回一次父母？

============================ 期望的结果是这样的：

```
......
    54          4           
    **** the above is anchor member, the numbers are correct  
    4           1          
    1           0           
    2           1           
    36          35          
    35          8           
    8           1           
    54          12          
    12          1           
    11          1           
    3           1 
```

============================

我正在使用递归查询从 Hierarchy 表中查找所有父项，以获取 Items 表中的项目；我认为结果应该是 Level，但它不是......我知道我可以使用 order by 对其进行排序，我只是认为输出本身应该按 Level 排序，因为 Recursive Memeber 是由 Level 运行的，对吗？

```
 WITH Result(ItemID, ParentID, Level)
            AS
            (
                --get the anchor member from tbItems
                SELECT itemID, itemParentID, 0 AS Level
                FROM   tbItems  WHERE
                    approved = 0 
                UNION ALL
                --recursive member from tbHierarchy
                SELECT h.hierarchyItemID, h.parentItemID, Level + 1
                FROM tbHierarchy AS h
                INNER JOIN
                    Result AS r
                        ON
                        h.hierarchyItemID = r.ParentID          

            )
            SELECT *
            FROM Result 
```

结果是：

```
 ItemID      ParentID    Level
    ----------- ----------- -----------
    7           3           0
    11          2           0
    18          11          0
    19          11          0
    21          54          0
    31          2           0
    33          36          0
    34          36          0
    35          36          0
    36          36          0
    38          2           0
    39          2           0
    40          2           0
    54          4           0
    **** the above is anchor member, the numbers are correct  
    4           1           1
    1           0           2
    2           1           1
    1           0           2
    2           1           1
    1           0           2
    2           1           1
    1           0           2
    36          35          1
    35          8           2
    8           1           3
    1           0           4
    36          35          1
    35          8           2
    8           1           3
    1           0           4
    36          35          1
    35          8           2
    8           1           3
    1           0           4
    36          35          1
    35          8           2
    8           1           3
    1           0           4
    2           1           1
    1           0           2
    54          12          1
    12          1           2
    1           0           3
    11          1           1
    1           0           2
    11          1           1
    1           0           2
    2           1           1
    1           0           2
    3           1           1
    1           0           2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:11:05.320

数据库中的数据没有排序。如果不放`order by`，则无法确定输出的顺序。

永远不要认为数据库会按照你的想法做事，90% 的时候，这是错误的。数据库的目标是了解您的查询并找到找到解决方案的最快方法，而这往往不是您想的那样。

取决于您的编辑器，但有时您可以要求它解释用于寻找解决方案的计划，它可能会为您提供一些关于如何获得结果的解释。

# delphi - Delphi - 在共享环境中写入/读取文件

> ID：11652677
> 
> 赞同：5
> 
> 时间：2012-07-25T15:00:08.337
> 
> 标签：delphi, file, process, share

我对放置在 LAN 中的文件有一些问题：有一个 Delphi 程序（服务器）应该写入一些文件，这些文件只能由多个 Deplhi 程序（客户端）读取。我在服务器中使用这些简单的指令进行编写（DataList 是一个 TStrings）：

```
Stream:=TFileStream.Create(filePath,fmOpenWrite or fmShareDenyWrite);
try
 DataList.SaveToStream(Stream);
finally
 Stream.Free;
end; 
```

客户端每 5 秒检查一次上述文件是否被修改（仅通过检查 FileAge），如果发生修改，则以以下方式加载 DataList：

```
try
 Stream:=TFileStream.Create(filePath,fmOpenRead or fmShareDenyNone);
 DataList.LoadFromStream(Stream);
finally
 Stream.Free;
end; 
```

通常一切正常，但有时会发生服务器或客户端引发异常，因为“文件正在被其他进程使用”。我不明白问题出在哪里：我尝试了很多替代方案，但这也可能发生在服务器和客户端运行的一个 istance 中。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:23:11.057

按照设计，网络文件系统是不可信的。至少，NFS（Linux 中）和 SMB（Windows 中）没有经过验证的锁定功能：并发访问并不安全。

您需要使用客户端-服务器协议来确保共享数据是安全的。您可以使用 TCP/IP、HTTP 或任何其他方式。

我建议使用真正的服务实现，例如 DataSnap、RemObjects 或我们的[开源 mORMot](http://blog.synopse.info/tag/SOA)。

# python - Python 3.2 中的外来字符

> ID：11652679
> 
> 赞同：1
> 
> 时间：2012-07-25T15:00:09.803
> 
> 标签：python, string, python-3.x

我正在用 Python 3.2 编写一个程序，该程序需要能够检测字符串是否包含外来字符“å、ä、ö”。我编写了以下代码：

```
# This Python file uses the following encoding: utf-8

name = input('Give your name: ')

if ('å' in name) or ('ä' in name) or ('ö' in name):
   print('Foreign characters found') 
```

但是，如果我输入例如“Åke”，程序仍然不执行打印命令。为什么会这样？或者您对如何检测给定字符串中的字符“å、ä、ö”有任何其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:21:58.257

您现在只是检查这三个字符，虽然这不能回答您的问题，但这可能是检查外来字符的更好方法：

```
try:
    name.encode('ascii')
except UnicodeError:
    print('Foreign characters found') 
```

注意：在 python 2.7 中测试，但我认为它也应该在 3.2 中工作。

# php - PHP 函数 ereg_replace() 已弃用

> ID：11652680
> 
> 赞同：-3
> 
> 时间：2012-07-25T15:00:10.760
> 
> 标签：php, mysql

> **可能重复：**
> [将 ereg 表达式转换为 preg](https://stackoverflow.com/questions/6270004/converting-ereg-expressions-to-preg)

我有这个功能用于过滤 wrod（坏词）形式的标题/描述。现在我在我的页面中看到了`ereg_replace() is deprecated`php 错误`Deprecated: Function ereg_replace() is deprecated in C:\xampp\htdocs\share\configs\functions.php on line 2750`和这个。`Warning: Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\share\configs\functions.php:2747) in C:\xampp\htdocs\share\modules\signup\signup.php on line 31`什么问题？如何解决这个问题？

这是我的功能：

```
 function filter_title($str)
{
    global $config;

    if ( $config['word_filters'] == '1' ) { $str = filterBadWords ( $str ); }
    if ( $config['word_filters'] == '0' ) { $str=mysql_real_escape_string($str); }
    //if ( $config['word_filters'] == '1' ) { $str = filterBadWords ( urlencode($str) ); }

    //$newstr=str_replace('"',"'",$str);
    $pats1 ='\'';  $repls1 ="";
    $pat[] ='\"';  $repl[] ="";
    $pat[] ='\&';  $repl[] =" and ";
    $pat[] ='\~';  $repl[] ="";
    $pat[] ='\@';  $repl[] ="";
    $pat[] ='\#';  $repl[] ="";
    $pat[] ='\$';  $repl[] ="";
    $pat[] ='\%';  $repl[] ="";
    $pat[] ='\^';  $repl[] ="";
    $pat[]='\*';  $repl[]="";
    $pat[]='\(';  $repl[]="";
    $pat[]='\)';  $repl[]="";
    $pat[]='\+';  $repl[]=" ";
    $pat[]='\`';  $repl[]="";
    $pat[]='\=';  $repl[]="";
    $pat[]='\!';  $repl[]="";
    $pat[]='\[';  $repl[]="";
    $pat[]='\]';  $repl[]="";
    $pat[]='\{';  $repl[]="";
    $pat[]='\}';  $repl[]="";
    $pat[]='\;';  $repl[]="";
    $pat[]='\:';  $repl[]="";
    $pat[]='\.';  $repl[]="";
    $pat[]='\/';  $repl[]="";
    $pat[]='\?';  $repl[]="";
    $pat[]='\<';  $repl[]="";
    $pat[]='\>';  $repl[]="";
    //$pat[]='\_';  $repl[]=" ";
    $pat[]="\\\\"; $repl[]="";
    $pat[]='\|';  $repl[]="";
    $pat[]='\,';  $repl[]="";
    $pat[]='\0x';  $repl[]="";

    $newstr = ereg_replace($pats1, $repls1, $str);    // ---> 2747 <---     
    for($i=0;$pat[$i];$i++) {
    $newstr = ereg_replace($pat[$i], $repl[$i], $newstr); // ---> 2750 <---
    }

    $newstr = preg_replace('/\s\s+/', ' ', $newstr); 

    return trim ( $newstr );
} 
```

这个我的 filter_descr 函数：

```
function filter_descr($str)
    {
        //$str=mysql_real_escape_string($str);
        global $config;

        if ( $config['word_filters'] == '1' ) { $str = filterBadWords ( $str ); }
        if ( $config['word_filters'] == '0' ) { $str = mysql_real_escape_string($str); }
        //if ( $config['word_filters'] == '1' ) { $str = filterBadWords ( urlencode ( $str ) ); }

        //$newstr=str_replace('"',"'",$str);
        $pats1 = "\'";  $repls1 ="&#39;";
        $pat[] = '\"';  $repl[] ="&#34;";
        $pat[] = '\&';  $repl[] ="&amp;";
        //$pat[] ='\~';  $repl[] ="";
        //$pat[] ='\@';  $repl[] ="";
        //$pat[] ='\#';  $repl[] ="";
        $pat[] = '\$';  $repl[] ="";
        $pat[] = '\%';  $repl[] ="";
        $pat[] = '\{';  $repl[] ="";
        $pat[] = '\}';  $repl[]="";
        $pat[] = '\`';  $repl[]="";
        //$pat[]='\/';  $repl[]="";
        $pat[] = '\<';  $repl[]="";
        $pat[] = '\>';  $repl[]="";
        //$pat[]="\\\\"; $repl[]="";
        $pat[] = '\|';  $repl[]="";
        //$pat[]="\n";  $repl[]="<br>";
        //$pat[]='\r';  $repl[]="<br>";
        $pat[] = '\0x';  $repl[]="";

        $newstr = ereg_replace($pats1, $repls1, $str);

        for($i=0;$pat[$i];$i++) {
        $newstr=ereg_replace($pat[$i], $repl[$i], $newstr);
        }

        $newstr = preg_replace('/\s\s+/', ' ', $newstr);

        return trim ( $newstr );
    } 
```

PHP 注册（第 31 行评论）：

```
session_start();
include('../../configs/config.php');

$smarty->assign('country', set_country_box(filter_title($_REQUEST['fcountry'])));
//if somebody is logged in and active, we don't need to see the registration page
if ($_SESSION["USERNAME"]!="" && $_SESSION["IS_ACTIVE"]=="1")
{
    header("Location: $config[base_url]/main");
    exit;
}

//if Cancel is pressed
if (filter_descr($_REQUEST[scancel])!="")
{
    header("Location: $config[base_url]/main"); // ----> LINE 31 <----
    exit;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:01:41.533

不要使用`ereg_replace()`，因为它已被弃用。使用[`preg_replace()`](http://php.net/preg_replace). 快速浏览一下您的函数，您*应该*能够简单地转换函数。

至于*标头已经发送*错误。这可能是由于在您调用之前输出了*已弃用的警告消息*`header()`。

尽管更正上述内容应该可以解决问题。如果这是生产，您应该强烈考虑禁用[display_errors](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:06:59.687

每当您使用标头功能时，即使在发送实际输出之前发送了一个空格作为响应，您也会收到错误消息

```
Warning: Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\share\configs\functions.php:2747) 
```

最好不要关闭 php 结束标记。检查你有没有空格和其他错误@Json 已经给出了答案`preg_replace()`。

# javascript - 替换 JS 中的变音符号

> ID：11652681
> 
> 赞同：22
> 
> 时间：2012-07-25T15:00:12.040
> 
> 标签：javascript, encoding, replace

我正在比较字符串，必须替换 JS 中的变音符号，但似乎 JS 无法识别字符串中的变音符号。文本来自数据库，在浏览器中，变音符号确实显示得很好。

```
function replaceUmlauts(string)
{
    value = string.toLowerCase();
    value = value.replace(/ä/g, 'ae');
    value = value.replace(/ö/g, 'oe');
    value = value.replace(/ü/g, 'ue');
    return value;
} 
```

作为我尝试的搜索模式：

*   “ä”、“ö”、“ü”
*   /ä/, /ö/, /ü/
*   “ `&auml;`”，“ `&ouml;`”，“ `&uuml;`”（完全绝望;-)）

可以肯定的是，这与我尝试使用 indexOf 的替换功能无关：

```
console.log(value.indexOf('ä')); 
```

但是所有模式的输出是：`-1`

所以我想这是编码的某种问题，但正如我在页面上所说的那样，变音符号看起来不错。

有任何想法吗？这看起来很简单……

编辑：即使我找到了答案，问题并没有真正“从根本上”解决（编码）。这是我的页面编码：

```
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> 
```

数据库有：utf8_general_ci

对我来说似乎完全没问题。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-25T15:18:04.847

要么确保正确指定脚本的编码（在`<script>`标签中或页面的标题/元数据中，如果它是嵌入的），要么指定具有`\uNNNN`始终明确解析为某些特定 Unicode 代码点的语法的符号。

例如：

```
str.replace(/\u00e4/g, "ae") 
```

无论为您的页面/脚本设置什么编码，即使它不正确，总是将 ä 替换为 ae。

以下是日耳曼语言所需的代码：

```
// Ü, ü     \u00dc, \u00fc
// Ä, ä     \u00c4, \u00e4
// Ö, ö     \u00d6, \u00f6
// ß        \u00df 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2019-01-24T11:51:42.007

如果您希望通过巧妙地尊重案例来替换德语变音符号，请使用此（开源，乐于分享，全部由我）：

```
const umlautMap = {
  '\u00dc': 'UE',
  '\u00c4': 'AE',
  '\u00d6': 'OE',
  '\u00fc': 'ue',
  '\u00e4': 'ae',
  '\u00f6': 'oe',
  '\u00df': 'ss',
}

function replaceUmlaute(str) {
  return str
    .replace(/[\u00dc|\u00c4|\u00d6][a-z]/g, (a) => {
      const big = umlautMap[a.slice(0, 1)];
      return big.charAt(0) + big.charAt(1).toLowerCase() + a.slice(1);
    })
    .replace(new RegExp('['+Object.keys(umlautMap).join('|')+']',"g"),
      (a) => umlautMap[a]
    );
}

const test = ['Übung', 'ÜBUNG', 'üben', 'einüben', 'EINÜBEN', 'Öde ätzende scheiß Übung']
test.forEach((str) => console.log(str + " -> " + replaceUmlaute(str)))
```

它会：

*   乌邦 -> 乌邦
*   乌邦 -> 乌邦
*   üben -> ueben
*   艾努本 -> 艾努本
*   艾努本 -> 艾努本
*   Ä, Ö 也一样
*   和简单的 ß -> ss

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-10-13T07:48:15.490

这是一个替换最常见字符以生成 Google 友好 SEO url 的函数：

```
function deUmlaut(value){
  value = value.toLowerCase();
  value = value.replace(/ä/g, 'ae');
  value = value.replace(/ö/g, 'oe');
  value = value.replace(/ü/g, 'ue');
  value = value.replace(/ß/g, 'ss');
  value = value.replace(/ /g, '-');
  value = value.replace(/\./g, '');
  value = value.replace(/,/g, '');
  value = value.replace(/\(/g, '');
  value = value.replace(/\)/g, '');
  return value;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T15:13:40.790

您需要首先弄清楚您要替换的字符代码是什么。例如，根据字符编码，字符可能是 8859、UTF-8 或其他格式。它们也可以是字符符号，例如“ä”

与其猜测，不如打印出来。

请注意，您的传入数据可能不会始终使用相同的字符集/字符编码——您需要检查数据的来源。

所以通过使用字符串来查看传入的数据。[charCodeAt](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/charCodeAt)

检查之前的字符代码`toLowerCase`以确保它不会改变你的东西。您需要逐步调试。

最后，检查编辑器中的字符集设置，确保输入的 ä 是应有的。您可能希望通过 UTF8 值指定它，而不是键入 ä、ö 等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-15T17:44:25.950

如果您需要一个小片段将德语变音符号转换为 html 特殊字符，请执行以下操作：

```
function fixUmlauts(value) {
    value = value.replace(/ä/g, '&auml;');
    value = value.replace(/ö/g, '&ouml;');
    value = value.replace(/ü/g, '&uuml;');
    value = value.replace(/ß/g, '&szlig;');
    value = value.replace(/Ä/g, '&Auml;');
    value = value.replace(/Ö/g, '&Ouml;');
    value = value.replace(/Ü/g, '&Uuml;');
    return value;
}
```

# c++ - 在向量中找到最长的“连续数字”条纹的最快方法是什么？

> ID：11652686
> 
> 赞同：4
> 
> 时间：2012-07-25T15:00:24.717
> 
> 标签：c++, algorithm, vector, find

我有一个排序`std::vector<int>`，我想在这个向量中找到最长的“连续数字条纹”，然后返回它的长度和条纹中的最小数字。

为您可视化它：假设我们有： `1 3 4 5 6 8 9`

我希望它返回：`maxStreakLength = 4`和`streakBase = 3`

有时可能会有 2 个条纹，我们必须选择哪一个更长。

最好（最快）的方法是什么？我试图实现这一点，但我在处理向量中的多个条纹时遇到了问题。我应该使用临时向量然后比较它们的长度吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T15:06:46.193

不，您可以一次通过向量执行此操作，并且只存储迄今为止找到的最长起点和长度。您还需要比“N”个比较少得多。*

提示：如果您已经说在第 5 位 (=6) 结束的 4 长比赛，那么您接下来必须检查哪个位置？

[*] 留给读者作为练习，以计算出可能的 O( ) 复杂度；-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T16:54:28.690

看看是否可以利用数组已排序的事实来改进算法会很有趣。首先想到的是：**如果您知道输入数组中的所有数字都是唯一的**，那么对于数组中的一系列元素`[i, j]`，您可以立即判断该范围内的元素是否连续，而无需实际查看通过范围。如果这个关系成立

```
array[j] - array[i]  ==  j - i 
```

那么您可以立即说该范围内的元素是连续的。显然，此标准使用了数组已排序且数字不重复的事实。

现在，我们只需要开发一种利用该标准的算法。这是一种可能的递归方法：

1.  递归步骤的输入是元素的范围`[i, j]`。最初它是`[0, n-1]`- 整个数组。
2.  将上述标准应用于 range `[i, j]`。如果范围是连续的，则无需进一步细分。将范围发送到输出（有关详细信息，请参见下文）。
3.  否则（如果范围不连续），将其分成两个相等的部分`[i, m]`和`[m+1, j]`。
4.  递归调用下部 ( `[i, m]`) 上的算法，然后在上部 ( `[m+1, j]`) 上调用算法。

上述算法将使用左优先方法执行数组的二进制分区和分区树的递归下降。这意味着该算法将以从左到右的顺序找到具有连续元素的相邻子范围。您需要做的就是将相邻的子范围连接在一起。当您收到`[i, j]`在步骤 2 中“发送到输出”的子范围时，如果它们确实是连续的，则必须将其与先前收到的子范围连接起来。或者你必须开始一个新的范围，如果它们不是连续的。一直以来，您一直在跟踪迄今为止发现的“最长连续范围”。

而已。

该算法的好处是它“早期”检测到连续元素的子范围，而无需查看这些子范围内。显然，最坏情况下的性能（如果根本没有连续的子范围）仍然是`O(n)`. 在最好的情况下，当整个输入数组是连续的时，这个算法会立即检测到它。（我仍在为此算法进行有意义的 O 估计。）

该算法的可用性再次受到唯一性要求的破坏。我不知道在您的情况下这是否是“给定的”。

无论如何，这是一个可能的 C++ 实现

```
typedef std::vector<int> vint;
typedef std::pair<vint::size_type, vint::size_type> range;

class longest_sequence
{
public:
  const range& operator ()(const vint &v)
  { 
    current = max = range(0, 0);

    process_subrange(v, 0, v.size() - 1);
    check_record();

    return max;
  }

private:
  range current, max;

  void process_subrange(const vint &v, vint::size_type i, vint::size_type j);
  void check_record();
};

void longest_sequence::process_subrange(const vint &v, 
                                        vint::size_type i, vint::size_type j)
{
  assert(i <= j && v[i] <= v[j]);
  assert(i == 0 || i == current.second + 1);

  if (v[j] - v[i] == j - i)
  { // Consecutive subrange found
    assert(v[current.second] <= v[i]);
    if (i == 0 || v[i] == v[current.second] + 1)
      // Append to the current range
      current.second = j;
    else
    { // Range finished
      // Check against the record 
      check_record();
      // Start a new range
      current = range(i, j);
    }
  }
  else
  { // Subdivision and recursive calls
    assert(i < j);
    vint::size_type m = (i + j) / 2;
    process_subrange(v, i, m);
    process_subrange(v, m + 1, j);
  }
}

void longest_sequence::check_record()
{
  assert(current.second >= current.first);
  if (current.second - current.first > max.second - max.first)
    // We have a new record
    max = current;
}

int main()
{
  int a[] = { 1, 3, 4, 5, 6, 8, 9 };
  std::vector<int> v(a, a + sizeof a / sizeof *a);
  range r = longest_sequence()(v);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T05:11:44.673

你不可能在短时间内解决这个问题`O(N)`。想象一下，您的列表是第一个`N-1`偶数，加上一个奇数（从第一个`N-1`奇数中选择）。然后在列表中的某处有一条长度为 3 的单条，但最坏的情况是您需要扫描整个列表才能找到它。即使平均而言，您也需要检查至少一半的列表才能找到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T15:06:58.347

我相信这应该做吗？

```
size_t beginStreak = 0;
size_t streakLen = 1;
size_t longest = 0;
size_t longestStart = 0;
for (size_t i=1; i < len.size(); i++) {
    if (vec[i] == vec[i-1] + 1) {
        streakLen++;
    }
    else {
        if (streakLen > longest) {
            longest = streakLen;
            longestStart = beginStreak;
        }
        beginStreak = i;
        streakLen = 1;
    }
}
if (streakLen > longest) {
    longest = streakLen;
    longestStart = beginStreak;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T15:36:32.267

类似于 Rodrigo 的解决方案，但也解决了您的示例：

```
#include <vector>
#include <cstdio>

#define len(x) sizeof(x) / sizeof(x[0])

using namespace std;

int nums[] = {1,3,4,5,6,8,9};
int streakBase = nums[0];
int maxStreakLength = 1;

void updateStreak(int currentStreakLength, int currentStreakBase) {
  if (currentStreakLength > maxStreakLength) {
    maxStreakLength = currentStreakLength;
    streakBase = currentStreakBase;
  }
}

int main(void) {
  vector<int> v;
  for(size_t i=0; i < len(nums); ++i)
    v.push_back(nums[i]);

  int lastBase = v[0], currentStreakBase = v[0], currentStreakLength = 1;

  for(size_t i=1; i < v.size(); ++i) {
    if (v[i] == lastBase + 1) {
      currentStreakLength++;
      lastBase = v[i];
    } else {
      updateStreak(currentStreakLength, currentStreakBase);
      currentStreakBase = v[i];
      lastBase = v[i];
      currentStreakLength = 1;
    }
  }
  updateStreak(currentStreakLength, currentStreakBase);
  printf("maxStreakLength = %d and streakBase = %d\n", maxStreakLength, streakBase);

  return 0;
} 
```

# asp.net - 超链接控件（在 TemplateField 标签内）不像锚标签？

> ID：11652687
> 
> 赞同：1
> 
> 时间：2012-07-25T15:00:27.603
> 
> 标签：asp.net, gridview

我在网格视图的某个地方有这个 murkup。gridview 正在显示该列的数据，但它不像锚标记那样显示，即没有下划线并且无法单击它（就像 plain-tex 一样）。

```
<asp:TemplateField HeaderText="Status" Visible="True">                      <ItemTemplate>
         <asp:HyperLink ID="statusHpLink" runat="server"  Text='<%#DataBinder.Eval(Container.DataItem, "Status") %>' />                            </ItemTemplate>
         <ItemStyle CssClass="itemstyle" />
</asp:TemplateField> 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T18:24:39.493

您需要在标记中设置 NavigateUrl 属性。

```
<asp:HyperLink runat="server" ID="link" Text="Click Me"
    NavigateUrl="http://stackoverflow.com"/> 
```

# html - CSS3 动画气泡背景

> ID：11652688
> 
> 赞同：1
> 
> 时间：2012-07-25T15:00:28.900
> 
> 标签：html, css

我在将本教程更改为可用于我想要完成的任务时遇到问题。[http://thecodeplayer.com/walkthrough/pure-css3-animated-clouds-background](http://thecodeplayer.com/walkthrough/pure-css3-animated-clouds-background)

我想把云变成气泡，让它从下到上而不是从左到右。

虽然它对背景做了一些非常奇怪的事情......谁能帮我查明为什么它会随着气泡移动 BG 渐变我只希望它移动气泡并让我的 BG 静止

这是我的 CSS

```
 body {
                /*To hide the horizontal scroller appearing during the animation*/
                overflow: hidden;
                background-image: linear-gradient(bottom, #14C3F4 21%, #FCFCFC 90%);
            background-image: -o-linear-gradient(bottom, #14C3F4 21%, #FCFCFC 90%);
            background-image: -moz-linear-gradient(bottom, #14C3F4 21%, #FCFCFC 90%);
            background-image: -webkit-linear-gradient(bottom, #14C3F4 21%, #FCFCFC 90%);
            background-image: -ms-linear-gradient(bottom, #14C3F4 21%, #FCFCFC 90%);

            background-image: -webkit-gradient(
              linear,
              left bottom,
              left top,
              color-stop(0.21, #14C3F4),
              color-stop(0.9, #FCFCFC));
            }

            #clouds{
                padding: 100px 0;
            /*  background: #c9dbe9;
                background: -webkit-linear-gradient(top, #c9dbe9 0%, #fff 100%);
                background: -linear-gradient(top, #c9dbe9 0%, #fff 100%);
                background: -moz-linear-gradient(top, #c9dbe9 0%, #fff 100%);*/
            }

            /*Time to finalise the cloud shape*/
            .cloud {
                width: 60px; height: 60px;
                background: #fff;

                border-radius: 200px;
                -moz-border-radius: 200px;
                -webkit-border-radius: 200px;

                position: relative; 
            }

            /*Time to animate*/
            .x1 {
                -webkit-animation: moveclouds 15s linear infinite;
                -moz-animation: moveclouds 15s linear infinite;
                -o-animation: moveclouds 15s linear infinite;
            }

            /*variable speed, opacity, and position of clouds for realistic effect*/
            .x2 {
                left: 200px;

                -webkit-transform: scale(0.6);
                -moz-transform: scale(0.6);
                transform: scale(0.6);
                opacity: 0.6; /*opacity proportional to the size*/

                /*Speed will also be proportional to the size and opacity*/
                /*More the speed. Less the time in 's' = seconds*/
                -webkit-animation: moveclouds 25s linear infinite;
                -moz-animation: moveclouds 25s linear infinite;
                -o-animation: moveclouds 25s linear infinite;
            }

            .x3 {
                left: 350px; 

                -webkit-transform: scale(0.8);
                -moz-transform: scale(0.8);
                transform: scale(0.8);
                opacity: 0.8; /*opacity proportional to the size*/

                -webkit-animation: moveclouds 20s linear infinite;
                -moz-animation: moveclouds 20s linear infinite;
                -o-animation: moveclouds 20s linear infinite;
            }

            .x4 {
                left: 470px; 

                -webkit-transform: scale(0.75);
                -moz-transform: scale(0.75);
                transform: scale(0.75);
                opacity: 0.75; /*opacity proportional to the size*/

                -webkit-animation: moveclouds 18s linear infinite;
                -moz-animation: moveclouds 18s linear infinite;
                -o-animation: moveclouds 18s linear infinite;
            }

            .x5 {
                left: 150px; 

                -webkit-transform: scale(0.8);
                -moz-transform: scale(0.8);
                transform: scale(0.8);
                opacity: 0.8; /*opacity proportional to the size*/

                -webkit-animation: moveclouds 20s linear infinite;
                -moz-animation: moveclouds 20s linear infinite;
                -o-animation: moveclouds 20s linear infinite;
            }

            @-webkit-keyframes moveclouds {
                0% {margin-bottom: 1000px;}
                100% {margin-bottom: -1000px;}
            }
            @-moz-keyframes moveclouds {
                0% {margin-bottom: 1000px;}
                100% {margin-bottom: -1000px;}
            }
            @-o-keyframes moveclouds {
                0% {margin-bottom: 1000px;}
                100% {margin-bottom: -1000px;}
            } 
```

还有我的 HTML

```
 <div id="clouds">
                <div class="cloud x1"></div>
                <!-- Time for multiple clouds to dance around -->
                <div class="cloud x2"></div>
                <div class="cloud x3"></div>
                <div class="cloud x4"></div>
                <div class="cloud x5"></div>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:39:43.607

随着气泡向上移动，#clouds 正在崩溃。这使锁链中的身体坍塌。这导致背景重复，因此出现了奇怪的背景错误。

为 html、body 和 #clouds 添加 100% 高度可解决问题

这是一个演示：http: [//jsfiddle.net/Fmy7F/1/](http://jsfiddle.net/Fmy7F/1/)

# javascript - jQuery中链接悬停上的模糊文本？

> ID：11652691
> 
> 赞同：0
> 
> 时间：2012-07-25T15:00:33.517
> 
> 标签：javascript, jquery

我想创建一个模糊效果，持续时间为 500 毫秒，然后在某些动画中恢复正常，持续时间为 250 毫秒。因此，如果用户将鼠标悬停在链接上，它将对该链接文本产生模糊/模糊效果，然后恢复正常。

假设我有这个代码：

```
<a class="link-to-blurry" href="http://example.com">Text to blurry on hover</a> 
```

这可以使用 jQuery 或一些额外的 JavaScript 插件来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:20:44.137

你可以尝试这样的事情：

CSS：

```
a, a:hover {
    color: black;
    font-size: 1.5em;
    text-decoration: none;      
}

.on {
    transition: text-shadow 500ms;
    -webkit-transition: text-shadow 500ms;
    -moz-transition: text-shadow 500ms;
    -ms-transition: text-shadow 500ms;
    -o-transition: text-shadow 500ms;
    text-shadow: 0 0 10px #000;
}

.off {
    transition: text-shadow 250ms;
    -webkit-transition: text-shadow 250ms;
    -moz-transition: text-shadow 250ms;
    -ms-transition: text-shadow 250ms;
    -o-transition: text-shadow 250ms;
    text-shadow: 0;
} 
```

JS：

```
$('a').hover(function(){
    $(this).removeClass('off').addClass('on');
}, function(){
    $(this).removeClass('on').addClass('off');
}); 
```

# ios - 如何使用核心蓝牙框架获取数据？

> ID：11652693
> 
> 赞同：6
> 
> 时间：2012-07-25T15:00:42.407
> 
> 标签：ios, core-bluetooth

我正在开发一个 iOS 核心蓝牙应用程序，我可以使用 iphone4S 连接蓝牙设备，但我不知道如何与设备通信。我想从设备中读取信息。

我也看到了这个源代码[https://github.com/sergiomtzlosa/CoreBluetooth-Demo/](https://github.com/sergiomtzlosa/CoreBluetooth-Demo/)

和这篇文章[如何从核心蓝牙设备读取信息](https://stackoverflow.com/questions/11540812/how-to-read-information-from-core-bluetooth-device)

但我不明白如何传输数据。

有人能帮我吗？谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T17:57:35.090

要使用 CoreBluetooth，首先您的设备必须支持蓝牙 4.0 中的低功耗蓝牙。您无法通过 iOS 的 LE 用户界面连接到设备，您必须为其开发自己的 UI，因为您的应用程序只需要连接到具有您感兴趣的服务的设备。

之后，您可以在更新特征值时订阅设备通知，然后使用 CoreBluetooth API 读取该值。如果设备具有可写入的特征，则您的应用程序可以使用 CoreBluetooth API 写入该特征。

大致思路，希望能回答你的问题。

编辑：查看这些示例：

1.  [心率监测器](http://developer.apple.com/library/mac/#samplecode/HeartRateMonitor/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011322-Intro-DontLinkElementID_2)
2.  [温度感应器](http://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Introduction/Intro.html#/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:31:36.260

已经提出并[回答](https://stackoverflow.com/questions/11540812/how-to-read-information-from-core-bluetooth-device/11596504#11596504)了一个非常相似的问题。

通读框架并找到具有非常描述性名称的方法和回调，例如：

```
- (void) centralManagerDidUpdateState:central
- (void) centralManager:central didDiscoverPeripheral

- (void) peripheral:peripheral didDiscoverServices:error 
```

# android - 摆脱耳机和扬声器的不同音量

> ID：11652697
> 
> 赞同：1
> 
> 时间：2012-07-25T15:00:51.503
> 
> 标签：android, volume

默认情况下，android 会为耳机和扬声器保存并设置不同的音量。在 andorid 2.1 上它没有发生，但我从 android 2.3 开始注意到它。我需要以某种方式摆脱这种行为。有什么想法吗？

我正在开发一个卷管理应用程序，这弄乱了我的应用程序中用户设置的卷。Andorid 2.1 及更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:23:36.950

好的，既然没有人回答，我至少会分享我最终为解决这个问题所做的事情。

我做了两个服务（我已经有了，只是修改了他们的行为）。为 Intent.ACTION_HEADSET_PLUG a 注册广播接收器的一种，当拔出的广播到达时，它会设置存储在应用程序共享首选项中的音量 - 因此它会覆盖 android 自动执行的音量更改。第二个服务注册观察者以更改设置，如下所示：

```
 getContentResolver().registerContentObserver( 
            android.provider.Settings.System.CONTENT_URI, true, observer); 
```

除其他外，此观察者将当前音量级别存储到应用程序的共享首选项中（在第一个服务中使用）。另外，当 android 进行上述自动更改音量时，似乎不会调用此观察者，这很好。

# c# - 使用 C# .net 客户端调用 spring RestFul (Jersey) 文件上传 Web 服务

> ID：11652703
> 
> 赞同：0
> 
> 时间：2012-07-25T15:00:58.780
> 
> 标签：c#, .net, spring, rest, upload

任何人都可以建议 c# .net 中客户端 RESTful 的分步教程，用于调用 spring mvc RESTful Web 服务（球衣）文件上传。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:24:07.273

看看 Spring.NET REST 客户端：

[http://www.springframework.net/rest/](http://www.springframework.net/rest/)

# objective-c - 倾斜和角度之间的关系 - CGAffineTransform

> ID：11652706
> 
> 赞同：0
> 
> 时间：2012-07-25T15:01:10.023
> 
> 标签：objective-c, ios5, trigonometry, quartz-2d, cgaffinetransform

我正在开发一个 iPad 应用程序，该应用程序允许用户用手指画一条线，然后使用该线的起点和终点计算该线相对于 iPad 的 x/y 平面的角度。

我的问题是我想使用绘制线的角度来设置我正在绘制到当前上下文中的图像的倾斜。

这是我的 drawRect 方法的相关代码：

```
 CGSize size =  CGSizeMake(1024, 768);
         UIGraphicsBeginImageContext(size);
         CGContextRef ctx = UIGraphicsGetCurrentContext();
         CGAffineTransform skewIt = CGAffineTransformMake(1, 0, skewValue, 1, 0, 0);
         CGContextConcatCTM(ctx, skewIt);

         CGContextDrawImage(UIGraphicsGetCurrentContext(),
                            CGRectMake(0,0,size.width, size.height),
                            theImage.CGImage);

        UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext(); 
```

我在 touchEnded 方法中计算线的角度，绘制线的点值存储在名为 skewArray 的数组中：

```
- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    if (stepThree){
        CGContextClearRect(skewContext, CGRectMake(0, 0, 1024, 668));

        CGPoint pt1 = CGPointMake([[skewArray objectAtIndex:1]point3].x, [[skewArray objectAtIndex:1]point3].y);
        CGPoint pt2 = CGPointMake([[skewArray objectAtIndex:[skewArray count]-1]point3].x, [[skewArray objectAtIndex:[skewArray count]-1]point3].y);
        CGPoint pt3 = CGPointMake([[skewArray objectAtIndex:[skewArray count]-1]point3].x, [[skewArray objectAtIndex:1]point3].y);

        CGFloat dis1 = sqrt((pow((pt2.x - pt1.x), 2) + pow((pt2.y - pt1.y), 2)));
        CGFloat dis2 = sqrt((pow((pt3.x - pt2.x), 2) + pow((pt3.y - pt2.y), 2)));
        CGFloat dis3 = sqrt((pow((pt1.x - pt3.x), 2) + pow((pt1.y - pt3.y), 2)));

        angle = acos(((-1*pow(dis2, 2))+pow(dis1, 2)+pow(dis3, 2))/(2*dis1*dis3)) * 180/3.14;

        //Do something with the angle to produce the appropriate skew value

        [self setNeedsDisplay];
       }
   } 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:16:11.057

查看有关剪切映射的这篇[Wikipedia 文章。](http://en.wikipedia.org/wiki/Shear_mapping)看起来你最好得到斜率并使用 1.0 / m 来倾斜值。

# android - 在另一个linearLayout中插入一个linearLayout

> ID：11652714
> 
> 赞同：1
> 
> 时间：2012-07-25T15:01:32.127
> 
> 标签：android, view, tags, add, android-linearlayout

我正在尝试将 a 插入`LinearLayout`另一个`LinearLayout`. 我不知道我所做的是否正确。**我需要以这种方式尝试，而不使用通货膨胀**。

```
 LinearLayout address2;
      address2 = new LinearLayout(this);
      address2 = (LinearLayout)findViewById(R.id.sfsp2_layout);

      LinearLayout teste3 = (LinearLayout)findViewById(R.id.se_contentAdressPostal);

      LinearLayout teste4 = (LinearLayout)teste3.findViewWithTag("teste");
      teste4.addView(address2); 
```

* * *

**线性布局 teste3**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/se_contentAdressPostal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="2dp"
    android:background="@drawable/background_tile_address_postal"
    android:orientation="vertical" >

    <include
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        layout="@layout/socio_form_structured_postal" /> 
```

* * *

**线性布局 teste4**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/sfsp_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/background_tile"
    android:orientation="vertical"
    android:tag="teste" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/sfsp_layout_horizontal"
        android:layout_width="wrap_content"
        android:layout_height="49dp"
        android:layout_gravity="right"
        android:background="@drawable/background_tile"
        android:orientation="horizontal"
        android:tag="teste" >
        <Button
            android:id="@+id/sfsp_btStructuredPostal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_marginBottom="2dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="2dp"
            android:hint="@string/sfsp_btStructuredPostal" /> ....... 
```

* * *

**LinearLayour address2（我需要在 layout4 中插入的布局）**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/sfsp2_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/background_tile"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/sfsp2_etStructuredPostalApartado"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="2dp"
        android:layout_marginLeft="65dp"
        android:layout_marginRight="55dp"
        android:layout_marginTop="2dp"
        android:layout_weight="0.14"
        android:ems="10"
        android:hint="@string/sfsp2_etStructuredPostalApartado"
        android:inputType="textMultiLine"
        android:scrollHorizontally="false" > 
```

“ `LinearLayout`teste4”在“teste3”内。我需要`LinearLayout`在“teste4”中插入“address2”。你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:37:29.990

我认为这里对`findViewById`工作原理存在一些误解。我将在下面尝试解释它。希望这会有所帮助，如果没有，请告诉我。

有两种可能`findViewById()`可以使用。

1.  [`Activity.findViewById()`](http://developer.android.com/reference/android/app/Activity.html#findViewById%28int%29): 这可用于在当前活动的主要内容视图中查找视图——即使用 . 设置的视图[`setContentView()`](http://developer.android.com/reference/android/app/Activity.html#setContentView%28int%29)。它不能用于任何其他目的。例如，它无法从任何其他布局文件中找到视图——该函数根本无法知道如何找到它。据我所知，这是您尝试使用的功能。如果您拥有的最后一个 XML 文件不是主布局，则该行将`address2 = (LinearLayout)findViewById(R.id.sfsp2_layout)`失败。

2.  [`View.findViewById()`](http://developer.android.com/reference/android/view/View.html#findViewById%28int%29)：此函数可用于查找包含在其他视图中的视图。例如，如果你有`view1`那个 contains `view2`，并且`view2`有 ID `some_id`，那么你可以`view2`通过调用找到`view1.findViewById(R.id.some_id)`。为了使其工作，`view1`必须完全初始化。例如，如果`view1`' 的描述是在 XML 中，它必须首先完全膨胀。

本质上，如果您想使用在单独的 XML 文件中描述的视图，您必须首先对其进行扩充。我认为没有办法解决它。

# python - 按标准验证文件名

> ID：11652728
> 
> 赞同：2
> 
> 时间：2012-07-25T15:01:59.660
> 
> 标签：python

我对 python 脚本相当陌生，我想验证目录和子目录中的文件名。验证应该区分大小写。我正在使用 python 2.6.5 操作系统：win7 和 xp

我提示输入以下用户输入：

```
prompt = "year"
year = raw_input(prompt)
prompt = "number"
number = raw_input(prompt) 
```

从这里我想搜索/验证以下文件和文件夹是否存在并且它们的文件名是正确的。

文件夹结构：

```
..\foobar_(number)_version1\music 
```

子文件夹“音乐”中的文件

```
(year)_foobar_(number)_isnice.txt
(year)_itis(number)hot_today.txt
(year)_anything_is(number)possible.txt
(year)_something_{idont_want_to_check_this_part}_(number)_canbe_anything.txt 
```

请注意，包括下划线在内的所有文本始终相同，因此应该始终正确，除了 () 或 {} 之间的内容。我想将结果输出到一个 txt 文件，该文件报告文件名是否正确。

归档这个最合乎逻辑的方法是什么？我已经阅读了 lib 文档 fnmatch(.fnmatchcase)、RE 和 os(.path.isfile) 并在此处搜索示例，但我不知道从哪里开始以及如何开始。

谁能指出我正确的方向？

[编辑] 一旦我的脚本具备工作基础，我就会发布我的代码以供参考或帮助他人。

[edit2] 我的第一个非 hello world 脚本

```
import os
import re

#output :
file_out = "H:\\output.txt"
f_out = open(file_out, 'w')

print "-------start-script----------"

#input
prompt = "enter 4 digit year: "
year = raw_input(prompt)
prompt = "enter 2 digit number: "
number = raw_input(prompt)

print "the chosen year is %s" % (year)
print "the chosen number is %s" % (number)

f_out.write ("start log!\n")
f_out.write ("------------------------------------------\n")
f_out.write ("the chosen year is %s\n" % (year))
f_out.write ("the chosen number is %s\n" % (number))

#part i'm working on

print "end script"
f_out.write ("------------------------------------------\n")
f_out.write ("end script\n")

#close file
f_out.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:17:54.617

查看 glob 模块 - 这将帮助您获取当前目录中的文件列表：

```
import glob

year = raw_input('Year: ')        # Example: Year: 2009
number = raw_input('Number: ')    # Example: Number: 12
filenames = glob.glob('{year}_*{number}*'.format(year=year, number=number)) 
```

文件名将是当前目录中满足以下条件的任何内容：

1.  开始于`2009_`
2.  任意数量的字符，直到匹配`12`
3.  后面的任意数量的字符`12`。

`os.path.exists`是检查文件是否存在的好方法，或者`os.path.isfile`如果您想确保它确实是一个文件而不是一个像文件一样命名的目录。对于 Python3，请查看[这些文档](http://docs.python.org/dev/library/os.path.html)，并且就像[提到的 ghostbust555 链接所说](https://stackoverflow.com/questions/82831/how-do-i-check-if-a-file-exists-using-python)的那样，如果您除了验证它们的存在之外还打算做任何事情，请注意竞争条件。

* * *

根据您的评论，看起来这是正则表达式的工作。您需要编写的伪代码如下所示：

```
for filename in list of filenames:
    if filename is not valid:
        print "<filename> is not valid!" 
```

除了实际的模式，实际的 Python 代码可能如下所示：

```
import os
import re

pattern = 'Put your actual pattern here'

# For a different directory, change the . to whatever the directory should be
for filename in os.listdir('.'):
    if not re.match(pattern, filename):
        print("Bad filename: ", filename) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:58:03.227

这并不是一个完整的答案，而是@Wayne Werner 答案的延伸。我还没有足够的声望点来发表评论。;0

我认为 Wayne 使用格式的方法指向你应该做什么，因为它在文件构建之前而不是之后验证文件名。看来这就是你正在做的并且可以控制的事情？

1.  我会在用户输入级别做尽可能多的验证。
2.  验证从任何地方获得的其他部分。
3.  用零件建立一个字典。
4.  建立你的文件名。

例如，在用户输入级别，类似：

```
yourDict = dict() 

year_input = raw_input('What is the year'?)

if not year_input.isdigit():  
    year_input = raw_input('Only digits please in the format YYYY, example: 2012'):

yourDict[year] = year_input 
```

然后继续将 key:values 添加到 yourDict，方法是根据您拥有的任何标准验证其他值。（使用 re 模块或提到的其他方法）。

然后，正如韦恩所做的那样，使用 .format() 和传入的字典来映射到正确的部分。

```
format1 = "{year}{part1}{number}{part2}.txt".format(**yourDict) 
```

该方法还允许您快速构建具有相同部分的新格式，并且您可以选择字典中每种格式需要或不需要的键。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T15:10:12.637

```
import os.path

year = 2009
file1 = year + "_foobar_" + number + "_isnice.txt"

os.path.exists(file1) 
```

# xslt - 如何在运行时从调用模板引用由 XSLT 中的一个模板创建的节点？

> ID：11652729
> 
> 赞同：0
> 
> 时间：2012-07-25T15:02:14.903
> 
> 标签：xslt

我通过一个`key6='||1-LIW-3324|1-LIW-3325|1-LIW-3326|1-LIW-3327|1-LIW-4232'`名为. 我从另一个模板中调用了这个模板。所以每个拆分值都存储在. 现在我想在调用模板中引用每个拆分节点（），并希望将每个分离/拆分节点与另一个变量进行比较。我该怎么做。`'|'``StringSplit``StringSplit``SeparatedLineItems``SeparatedLineItems`

这是代码。

```
<xsl:template match="/">
    <xsl:variable name="check3">
        <xsl:value-of select="1-LIW-3"/>
    </xsl:variable>

    <myProj>
    <xsl:call-template name="StringSplit">
            <xsl:with-param name="val" select="$key6"/>
    </xsl:call-template>

    <!--here I want to compare "SeperatedLineItems" with $check3 -->                   
    <!--<xsl:variable name="con"> 
        <xsl:value-of select="contains($key6,$check3)"/> 
    </xsl:variable>-->        
    </myProj>

</xsl:template>

<xsl:template name="StringSplit">
    <xsl:param name="val" select="$key6"/>
    <!-- do a check to see if the input string (still) has a "|" in it -->
    <xsl:choose>
        <xsl:when test="contains($val, '|')">
            <!-- pull out the value of the string before the "|" delimiter -->
            <SeperatedLineItems>
                <xsl:value-of select="substring-before($val, '|')"/>
            </SeperatedLineItems> 
            <!-- recursively call this template and pass in value AFTER the "|" delimiter -->
            <xsl:call-template name="StringSplit">
                <xsl:with-param name="val" select="substring-after($val, '|')"/> 
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <!-- if there is no more delimiter values, print out the whole string -->
            <SeperatedLineItems>
                <xsl:value-of select="$val"/>
            </SeperatedLineItems>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:52:24.810

这个 XSLT 1.0 样式表演示了如何访问通过调用模板返回的元素......

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt"
  exclude-result-prefixes="xsl msxsl">
<xsl:output method="text"/>

<xsl:variable name="key6" select="'||1-LIW-3324|1-LIW-3325|1-LIW-3326|1-LIW-3327|1-LIW-4232'" />  

<xsl:template match="/">
Does my $key6 variable contain precisely '1-LIW-3'?
 <xsl:variable name="keys"> 
  <xsl:call-template name="StringSplit">
    <xsl:with-param name="val" select="$key6"/>
  </xsl:call-template>
 </xsl:variable>
 <xsl:choose> 
   <xsl:when test="msxsl:node-set($keys)/*[. = '1-LIW-3']">
    YES
  </xsl:when>
  <xsl:otherwise> 
    NO
  </xsl:otherwise> 
 </xsl:choose> 
</xsl:template>

<xsl:template name="StringSplit">
  <xsl:param name="val" />
  <xsl:choose>
   <xsl:when test="contains($val,'|')">
    <SeperatedLineItems>
      <xsl:value-of select="substring-before($val,'|')" />
    </SeperatedLineItems>
    <xsl:variable name="remainder"> 
     <xsl:call-template name="StringSplit">
       <xsl:with-param name="val" select="substring-after($val,'|')" />
     </xsl:call-template>
    </xsl:variable>
    <xsl:copy-of select="msxsl:node-set($remainder)/*" /> 
   </xsl:when>
   <xsl:when test="$val != ''">
    <SeperatedLineItems>
      <xsl:value-of select="$val" />
    </SeperatedLineItems>
  </xsl:when>
  <xsl:otherwise> 
  </xsl:otherwise> 
  </xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

**结果是……**

```
Does my $key6 variable contain '1-LIW-3'?

    NO 
```

**这是 XSLT 2.0 等价物...**

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  exclude-result-prefixes="xsl xs">
<xsl:output method="text"/>

<xsl:variable name="key6" select="'||1-LIW-3324|1-LIW-3325|1-LIW-3326|1-LIW-3327|1-LIW-4232'" />  

<xsl:template match="/">
Does my $key6 variable contain precisely '1-LIW-3'?
 <xsl:variable name="keys" select="tokenize($key6,'\|')" as="xs:string*" /> 
 <xsl:choose> 
   <xsl:when test="some $key in $keys satisfies ($key = '1-LIW-3')">
    YES
  </xsl:when>
  <xsl:otherwise> 
    NO
  </xsl:otherwise> 
 </xsl:choose> 
</xsl:template>

</xsl:stylesheet> 
```

以上使 $keys 变量成为字符串序列，而不是包含字符串的元素。如果您更喜欢元素，那么您可以使用以下替代方法。尽管此替代方案的缺点是它不包括空字符串项。

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  exclude-result-prefixes="xsl xs">
<xsl:output method="text"/>

<xsl:variable name="key6" select="'||1-LIW-3324|1-LIW-3325|1-LIW-3326|1-LIW-3327|1-LIW-4232'" />  

<xsl:template match="/">
Does my $key6 variable contain precisely '1-LIW-3'?
 <xsl:variable name="keys" as="element()*" > 
  <xsl:analyze-string select="concat($key6,'|')" regex="([^\|]*)\|">
   <xsl:matching-substring>  
    <SeperatedLineItems>
     <xsl:value-of select="regex-group(1)" />
    </SeperatedLineItems>
   </xsl:matching-substring>  
  </xsl:analyze-string> 
 </xsl:variable> 
 <xsl:choose> 
   <xsl:when test="$keys[. = '1-LIW-3']">
    YES
  </xsl:when>
  <xsl:otherwise> 
    NO
  </xsl:otherwise> 
 </xsl:choose> 
</xsl:template>

</xsl:stylesheet> 
```

# javascript - Firefox 14 更新，谷歌广告未加载页面

> ID：11652733
> 
> 赞同：0
> 
> 时间：2012-07-25T15:02:28.490
> 
> 标签：javascript, html, firefox, browser, adsense

我们的网页上有 3 个 google adsense 广告以及一个自定义的 dojo 构建。在我更新到 Firefox 14 之前，一切都运行良好。现在页面没有加载我猜是由于一些 javascript 错误？

我一直在尝试反复试验这个问题。我发现最好的是，当您将 adsense 代码粘贴到您的页面时，会有一个脚本：

```
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script> 
```

如果你使用 openX：

```
<script type='text/javascript' src='http://d1.openx.org/ag.php'></script> 
```

据我所知，如果在页面上多次定义此脚本，页面将无法正确加载。这在旧版本的 FireFox 中一直有效。它在 chrome 和 IE 中也可以正常工作。

有没有人知道发生了什么或发生了什么变化？

谢谢

**编辑**

我认为这个问题与 dojo 的自定义构建和广告脚本标签有关。如果我从我的页面中删除所有广告，dojo 可以正常工作并且我的页面很好。我还可以在dojo未加载时查看页面上的所有广告。有谁知道我如何调试这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:51:28.677

[这似乎是 FireFox 14 中的一个错误。我在http://bugzilla.mozilla.org](http://bugzilla.mozilla.org)上找不到错误报告，但我用 Aurora 和边缘版本的 FireFox 对其进行了测试，这意味着它应该在一个中修复下两个版本的 FireFox。

Aurora 于 8 月 27 日进入 Beta 版，FireFox 15th 于次日发布。如果您想确保它可以与 FireFox 15 一起使用，请尝试下载该版本并在该版本下运行它。

[发布日期时间表在这里](https://wiki.mozilla.org/Releases#Upcoming_Releases)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:57:50.613

从 FireFox 14 开始，缓存的内容发生了变化。如果您编辑首选项（url 栏中的 about:config）并将参数更改`network.http.use-cache`为 false，则网站将正常工作。

我验证了这个参数在firefox 13中并且默认设置为true。我们的网站在 ff 13 中运行，因此随着 Firefox 缓存资源的方式发生了一些变化。

**编辑**

我还意识到尝试在 dojo 的同时加载我的 3 个 google adsense 广告会导致问题。

我`dojo/domReady!`在加载任何 dojo 模块之前使用过，这解决了我遇到的任何问题。它也可以在不更改 firefox network.http.use-cache 参数的情况下工作。

# magento - 删除 core_resource 条目后 Magento addAttribute 重复

> ID：11652737
> 
> 赞同：0
> 
> 时间：2012-07-25T15:02:33.717
> 
> 标签：magento, adminhtml

如果我删除 core_resource.code='my_setup_module' 并重新运行 magento，我的 sql/ 文件中的所有内容都会重复。有没有办法防止这种情况？（就是这样。剩下的就是缓冲材料，所以stackoverflow让我提交。）

示例 sql 文件

```
$installer->addAttribute('catalog_product', 'googlemerchant_category', array(
    'label'         => 'Google Merchant category',
    'type'          => 'varchar',
    'input'         => 'multiselect',
    'backend'       => 'eav/entity_attribute_backend_array',
    'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
    'group'         => 'Google Merchant',
    'visible'       => 1,
    'required'      => 0,
    'position'      => 2,
    'option' =>
        array (
            'value' =>
                array(
                    'option1' => array('Apparel & Accessories > Clothing'),
                    'option2' => array('Apparel & Accessories > Clothing > Activewear > Sweatshirts'),
                    'option3' => array('Apparel & Accessories > Clothing > Underwear & Socks > Socks'),
                    'option4' => array('Apparel & Accessories > Clothing Accessories'),
                    'option5' => array('Apparel & Accessories > Shoes'),
                    'option6' => array('Apparel & Accessories > Shoes > Athletic Shoes'),
                    'option7' => array('Apparel & Accessories > Shoes > Sneakers'),
                    'option8' => array('Apparel & Accessories > Clothing > Hats'),
                    'option9' => array('Apparel & Accessories > Clothing > Shorts'),
                    'option10' => array('Apparel & Accessories > Handbags'),
                    'option11' => array('Food, Beverages & Tobacco > Food Items'),
                    'option12' => array('Hardware > Flooring'),
                    'option13' => array('Health & Beauty > Health Care > Physical Therapy Equipment'),
                    'option14' => array('Media'),
                    'option15' => array('Media > Books'),
                    'option16' => array('Media > Books > Non-Fiction'),
                    'option17' => array('Media > Books > Non-Fiction > Body, Mind & Spirit Books'),
                    'option18' => array('Media > Books > Non-Fiction > Health & Fitness Books'),
                    'option19' => array('Media > DVDs & Videos'),
                    'option20' => array('Sporting Goods > Exercise & Fitness'),
                    'option21' => array('Sporting Goods > Exercise & Fitness > Abdominal Equipment'),
                    'option22' => array('Sporting Goods > Exercise & Fitness > Exercise Balls'),
                    'option23' => array('Sporting Goods > Exercise & Fitness > Exercise Bands'),
                    'option24' => array('Sporting Goods > Exercise & Fitness > Foam Rollers'),
                    'option25' => array('Sporting Goods > Exercise & Fitness > Free Weight Bars'),
                    'option26' => array('Sporting Goods > Exercise & Fitness > Gym Mats'),
                    'option27' => array('Sporting Goods > Exercise & Fitness > Jump Ropes'),
                    'option28' => array('Sporting Goods > Exercise & Fitness > Medicine Balls'),
                    'option29' => array('Sporting Goods > Exercise & Fitness > Stopwatches'),
                    'option30' => array('Sporting Goods > Exercise & Fitness > Weight Benches'),
                    'option31' => array('Sporting Goods > Exercise & Fitness > Weightlifting Belts'),
                    'option32' => array('Sporting Goods > Exercise & Fitness > Weightlifting Gloves'),
                    'option33' => array('Sporting Goods > Exercise & Fitness > Weightlifting Machine Accessories'),
                    'option34' => array('Sporting Goods > Gymnastics > Gymnastics Bars'),
                    'option35' => array('Sporting Goods > Gymnastics > Gymnastics Mats'),
                    'option36' => array('Sporting Goods > Gymnastics > Gymnastics Rings'),
                    'option37' => array('Sporting Goods > Jumping')
                )
        )
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:20:13.880

它显然会重复，因为当您删除模块的 core_resource 条目时，它将重新运行整个设置并再次找到您的设置文件以执行。

请记住，Magento 只知道模块的设置是否通过 core_resource 表运行。因此，如果它在那里找不到您的模块条目，它只会运行您的设置文件，而不管它是否已经运行。

# mysql - 捆绑安装：无法构建 gem 原生扩展

> ID：11652741
> 
> 赞同：3
> 
> 时间：2012-07-25T15:02:41.033
> 
> 标签：mysql, ruby-on-rails-3.1, rubygems, mysql2, bundle-install

我有 git clone git://github.com/jalagrange/excel_test_app.git 安装包时出现以下错误，这不会发生在我的其他应用程序中。

跟随错误

```
Installing mysql2 (0.3.6) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb
checking for rb_thread_blocking_region()... yes
checking for main() in -llibmysql... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers. Check the mkmf.log file for more
details. You may need configuration options. 
```

宝石文件

```
 source 'http://rubygems.org'

gem 'rails', '3.1.0'

# Bundle edge Rails instead:
# gem 'rails',     :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'
gem "spreadsheet"
gem "carrierwave"
gem "mini_magick"
gem 'flash_cookie_session'
gem "pry"
gem "haml"
gem 'fog'

# To use Delayed_job
gem 'daemons'
gem 'delayed_job_active_record'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails', "  ~> 3.1.0"
  gem 'coffee-rails', "~> 3.1.0"
  gem 'uglifier'
end

gem 'jquery-rails'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug'

group :test do
  # Pretty printed test output
  gem 'turn', :require => false
end

group :development, :test do
  gem "mysql2", "0.3.6"
  gem "letter_opener"
  gem "pry"
end 
```

这个问题和答案不适用于我的问题.. [gem install: Failed to build gem native extension (can't find header files)](https://stackoverflow.com/questions/4304438/mysql-failed-to-build-gem-native-extension)

问题解决了，我已经运行了捆绑更新.. thx all..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:25:19.180

运行以下命令并再次安装捆绑包

`sudo apt-get install libmysql-ruby libmysqlclient-dev`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T02:35:12.470

```
sudo apt-get install libmysqlclient-dev 
```

然后

```
gem install mysql2 -v=X.X.x 
```

其中 xxx 是您需要的版本，
然后捆绑安装

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-05T09:44:03.223

2018.11.05 =>**折旧。**

之后`apt search libmysqlclient-dev`您将获得新软件包，您将需要继续安装 mysql2。

在我的情况下，它会导致**default-libmysqlclient-dev**

```
apt install default-libmysqlclient-dev

gem install mysql2 -v 0.4.6 
```

=> 然后您可以重新启动捆绑安装`enter code here`cmd。

# jquery - hovercard 快速进出问题

> ID：11652745
> 
> 赞同：0
> 
> 时间：2012-07-25T15:02:48.490
> 
> 标签：jquery, hover

我发现了“用 PC 设计”的悬停卡片脚本。它非常好，我已经在网站上很好地应用了它。

但是，我发现如果一个人连续快速地悬停，脚本就不能正常工作。它也发生在项目网站上的演示中。它的一个问题是“标题”（悬停使用的链接）从“弹出窗口”中消失了。其他更成问题的（至少对我而言）是它丢失了 z-index 信息。在我的网站主页上，我使用 nivo-slider 和 hovercard 弹出窗口，打开时会部分覆盖滑块。当我慢慢地盘旋进出时，一切都很好。但是当我快速完成时，部分 nivo-slider 内容会出现在悬停卡弹出窗口的“上方”

我打算在脚本作者的页面上评论这个问题，但他可能需要一点时间才能回复。有什么快速修复的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:22:05.047

我发现使用“延迟”设置似乎可以缓解这个问题。我已将我的设置为 400 毫秒。

# javascript - 视差'背景图像/位置/附件'jQuery动画很紧张

> ID：11652746
> 
> 赞同：0
> 
> 时间：2012-07-25T15:02:48.990
> 
> 标签：javascript, jquery, css, animation, parallax

这是分解...

*   包装器（位置：相对；溢出：隐藏；）
    *   部分容器（位置：绝对）
        *   多个子部分

我附加了一个鼠标滚轮事件侦听器并为“section-container”的“顶部”位置设置动画（缓动）。随着该位置的变化，每个部分的“背景位置”会根据“部分容器”的“顶部”属性的位置垂直移动（通过 setTimeout() 持续更新）。

所有这些都可以正常工作，除了“背景位置”发生变化外，图像有点抖动。如果“背景附件”设置为“固定”，则不会发生这种情况……但我不希望这样。

Can anyone explain this, with a possible fix? I continually refer to the [https://victoriabeckham.landrover.com/](https://victoriabeckham.landrover.com/) site and can't figure out what they're doing differently to get theirs operating so efficiently.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:12:32.740

你可以看看这个，我相信他们做大部分动画的地方： [https ://victoriabeckham.landrover.com/js/ScrollAnimator.js?v=471](https://victoriabeckham.landrover.com/js/ScrollAnimator.js?v=471)

我不得不说他们有某种框架来实现这一点。

编辑：抱歉没有看到我上面的新答案，似乎是一个很好的起点。

-肯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:09:52.793

如果您仔细检查[本网站](http://www.ianlunn.co.uk/plugins/jquery-parallax/)，您将能够像陆虎网站一样使用它。

需要用到：[scrollTo插件](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)和[视差插件](http://www.ianlunn.co.uk/plugins/jquery-parallax/scripts/jquery.parallax-1.1.3.js)

并且文档 jQuery 应该是这样的：

```
$(document).ready(function(){
    $('#nav').localScroll(800);

    //.parallax(xPosition, speedFactor, outerHeight) options:
    //xPosition - Horizontal position of the element
    //inertia - speed to move relative to vertical scroll. Example: 0.1 is one tenth the speed of scrolling, 2 is twice the speed of scrolling
    //outerHeight (true/false) - Whether or not jQuery should use it's outerHeight option to determine when a section is in the viewport
    $('#intro').parallax("50%", 0.1);
    $('#second').parallax("50%", 0.1);
    $('.bg').parallax("50%", 0.4);
    $('#third').parallax("50%", 0.3);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:33:18.453

好的。所以我发现我的问题是在尝试对“top”属性上的“section-container”进行动画处理时。我使用“+=”来允许它从当前位置递增。使用“鼠标滚轮”事件时不是一个好主意。我将其更改为一个不断增加/减少的硬设置变量。

# css - :first-child 选择器或等价物

> ID：11652747
> 
> 赞同：0
> 
> 时间：2012-07-25T15:02:53.043
> 
> 标签：css, css-selectors

我想为 UL 的第一个列表项设置样式，该列表项包含在`<a>`标签中。

我原以为这很简单，就是这样：http: [//jsfiddle.net/PHhFX/](http://jsfiddle.net/PHhFX/)但这不起作用。

任何人有任何线索？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T15:04:39.660

您不应该将 a 包含`<li>`在一个`<a>`- 在您的 HTML 中，您只能将您的`<li>`元素作为`<ul>`.

您可能打算以另一种方式（`<a>`在`<li>`）内进行操作，然后选择

```
ul li:first-child 
```

[jsFiddle 预览](http://jsfiddle.net/BoltClock/PHhFX/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:05:42.717

它应该像这样工作：http: [//jsfiddle.net/PHhFX/11/](http://jsfiddle.net/PHhFX/11/)

**CSS**标记：

```
ul li:first-child {
    border: 1px solid #000;
} 
```

**HTML**标记：

```
<ul>
    <li><a href="a">AAA</a></li>
    <li><a href="b">BBB</a></li>
    <li><a href="c">CCC</a></li>
</ul> 
```

*ps：*`<li>`你不应该用元素包装`<a>`元素。记住，一个之后`<ul>`是一个`<li>`

希望能帮助到你！​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:07:56.460

给你，修复你的 html 和 css：

html:

```
<ul>
    <li><a href="a">AAA</a></li>
    <li><a href="b">AAA</a></li>
    <li><a href="c">AAA</a></li>
</ul>​ 
```

和CSS：

```
ul li:first-child {
  border: 1px solid #000;
}    ​ 
```

这是[jsFiddle中的实时示例](http://jsfiddle.net/PHhFX/16/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T15:08:10.910

[HTML5 规范](http://dev.w3.org/html5/html-author/#the-li-element)详细说明了该`li`元素可能包含在以下元素中：

*   `ol`
*   `ul`
*   `menu`

你会注意到那`a`不在其中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T15:08:34.653

链接标签不是列表 (`<ul>`或`<ol>`) 的有效子代，请参阅：[UL 中是否允许除 LI 之外的任何内容？](https://stackoverflow.com/questions/6056142/is-anything-except-lis-allowed-in-a-ul)

您必须在列表项中有链接：

```
<li><a href="a">AAA</a></li> 
```

所以：

```
ul li:first-child a{
  border: 1px solid #000;
} 
```

见：http: [//jsfiddle.net/PHhFX/17/](http://jsfiddle.net/PHhFX/17/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T15:09:04.910

# c++ - 在构造函数和析构函数中锁定共享资源

> ID：11652748
> 
> 赞同：8
> 
> 时间：2012-07-25T15:02:52.920
> 
> 标签：c++, multithreading

我相信我至少对 C++ 中的多线程基础知识有很好的了解，但是我从来没有能够在构造函数或析构函数中围绕共享资源锁定互斥锁得到明确的答案。我的印象是你应该锁定两个地方，但最近同事不同意。假设以下类被多个线程访问：

```
class TestClass
{
public:

   TestClass(const float input) :
      mMutex(),
      mValueOne(1),
      mValueTwo("Text")
   {
      //**Does the mutex need to be locked here?
      mValueTwo.Set(input);
      mValueOne = mValueTwo.Get();
   }

   ~TestClass() 
   { 
     //Lock Here?
   }

   int GetValueOne() const
   {
      Lock(mMutex);
      return mValueOne;
   }

   void SetValueOne(const int value)
   {
      Lock(mMutex);
      mValueOne = value;
   }

   CustomType GetValueTwo() const
   {
      Lock(mMutex);
      return mValueOne;
   }

   void SetValueTwo(const CustomType type)
   {
      Lock(mMutex);
      mValueTwo = type;
   }

private:

   Mutex mMutex;
   int mValueOne;
   CustomType mValueTwo;
}; 
```

当然，通过初始化列表，一切都应该是安全的，但是构造函数中的语句呢？在析构函数中，做一个非作用域的锁，从不解锁（本质上只是调用 pthread_mutex_destroy）会有好处吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T15:13:23.173

多个线程不能构造同一个对象，也不应允许任何线程在对象完全构造之前使用它。因此，在健全的代码中，没有锁定的构造是安全的。

破坏是一个稍微困难的情况。但同样，对对象进行适当的生命周期管理可以确保当某些线程可能仍使用它时，该对象永远不会被破坏。

共享指针可以帮助实现这一点，例如。：

*   在某个线程中构造对象
*   将共享指针传递给需要访问对象的每个线程（如果需要，包括构造它的线程）
*   当所有线程释放共享指针时，对象将被销毁

但显然，存在其他有效的方法。关键是在对象生命周期的三个主要阶段之间保持适当的界限：构造、使用和销毁。绝不允许任何这些阶段之间发生重叠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:13:35.023

它们不必被锁定在构造函数中，因为外部任何人都可以访问该数据的唯一方法是从构造函数本身传递它们（或执行一些未定义的行为，例如调用虚拟方法） .

[编辑：删除了关于析构函数的部分，因为正如评论正确断言的那样，如果您尝试从可能已死的对象访问资源，您会遇到更大的问题]

# mysql - SQL 请求无法正常工作

> ID：11652749
> 
> 赞同：0
> 
> 时间：2012-07-25T15:02:58.790
> 
> 标签：mysql, cakephp, request

我的问题很简单。我有一个名为“文章”的表，我想获得前三篇最近的文章订单 DESC。但如果这些文章的发布日期早于或等于今天，我也希望显示这些文章。所以我的请求中有另一个条件。我的 cakephp 代码如下：

```
$this->set('lastArticles', $this->Article->find('all', array(
            'conditions' => array('Article.visible' => true),
            'Article.publication_date <= ' => date('Y-m-d'),
            'order' => array('Article.creation_date DESC', 'Article.id DESC'),
            'limit' => 3
        ))); 
```

但问题是即使发布日期>日期（'Ymd'）的文章也会显示！有人有想法吗？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:11:48.300

看起来您的 publication_date 条件不在条件数组中。您的代码应如下所示：

```
$this->set('lastArticles', $this->Article->find('all', 
     array(
        'conditions' => array(
            'Article.visible' => true, 
            'Article.publication_date <= ' => date('Y-m-d')
        ),
        'order' => array(
            'Article.creation_date DESC', 
            'Article.id DESC'
        ),
        'limit' => 3
    ))); 
```

一点额外的缩进和空格是你的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:25:42.757

```
See this

$conditions = array(
                'Article.visible' => true,
                'Article.publication_date <= ' => date('Y-m-d')
            );

$order = array('Article.creation_date DESC', 'Article.id DESC');

$lastArticles = $this->Article->find('all', array(
            'conditions' => $conditions,
            'order' => $order,
            'limit' => 3
        );

$this->set('lastArticles', $lastArticles); 
```

# java - 在将对象传递给 ORM 助手类以持久化之前验证对象的最佳实践是什么

> ID：11652750
> 
> 赞同：1
> 
> 时间：2012-07-25T15:02:58.770
> 
> 标签：java, orm

假设您有一个 DB 实体类 MyClass 的实例。您在此实体中有 3 个字段都标记为“不能为空”填充 3 个字段。在这种情况下，最佳做法是什么。MyClass 中的构造函数、setter 方法是否应验证所有字段是否正确，如果没有抱怨。或者您是否允许创建无效对象并让 DB 层进行抱怨？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:05:34.107

1）您应该防止客户端提交无效数据

2）即使你做了1，你仍然需要在服务器上验证——人们会用curl和wget尝试古怪的东西......

3）我会在服务层检查传入的数据是否有效。如果不是，我会向客户端返回某种错误代码，甚至不进行保存。对于简单的情况，我会`validate`在我的域类上有一个方法。对于复杂的情况，我会创建一个服务方法来进行验证，例如，在我需要根据数据库中的数据检查提交的数据的情况下。没有一种正确的方法可以进行涵盖所有情况的验证。

保存和捕获异常的问题是很难将此错误与可能发生的其他错误区分开来。另外，测试验证代码很容易，并且服务在验证失败时会做正确的事情。另外，验证逻辑是业务规则，能够轻松测试您的业务规则总是好的。

# html5-video - 视频内具有无缝循环的 HTML5 视频

> ID：11652753
> 
> 赞同：2
> 
> 时间：2012-07-25T15:03:12.983
> 
> 标签：html5-video, video.js

我正在编写一个交互式视频（一种游戏），用户在侧面板上进行操作并在视频中发生操作。

对于一部分，视频正在等待面板上的用户操作，因此它必须循环直到用户启动操作。

所以在 15 秒时，只要用户没有做出动作，我就会回到 11 秒，视频被设计成一个完美的循环。

我的循环正在工作，但问题是它不是无缝的。在 15 秒时，它会停止大约一秒，然后在 11 秒时重新开始。有没有办法让它无缝工作？

我正在使用 VideoJS。这是我的代码：

```
var video_decor = _V_("video_decor");
video_decor.addEvent("timeupdate", function(){
    var whereYouAt = video_decor.currentTime();
    console.log(whereYouAt);
    if(whereYouAt > 15){
        video_decor.currentTime(11);
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:21:43.243

进行无缝循环的最简单方法是使用完整长度的视频并等待“结束”事件回到开头。这往往是相当顺利的，所以如果你能做到这一点，那就最好了。

取一段视频并循环播放是很困难的，因为浏览器不会每毫秒触发 'timeupdate' 事件，这样做效率非常低。相反，它们每 15 (Chrome/Safari) 或 250 (Firefox) 毫秒触发一次 timeupdate，因此这是您的误差范围。您可能会创建自己的计时器 (setInterval) 以设置更小的间隔并手动检查时间，但这可能会给浏览器带来沉重的负担。

# perl - 电子表格问题::阅读

> ID：11652757
> 
> 赞同：1
> 
> 时间：2012-07-25T15:03:18.577
> 
> 标签：perl, spreadsheet

在我的应用程序中，我们使用 Spreadsheet::Read 来读取 excel 并对行执行一些任务，最后将其添加到数据库中。

我们正在导入的文件是 Excel 文件 (.XLSX)。这个 excel 文件实际上是一个词汇表，它支持不同的用户语言。

问题是，我在这个过程中面临的问题是我们在某些行/列中有特殊字符单元格，这些单元格没有被正确解码。

例如，如果我有一个西班牙语 Excel 文件：

* * *

## *在 EXCEL 表*中 =>*从日志中提取*

* * *

Información de cuenta => Informaci\x{f3}n de cuenta

Página de consola de administración de curso => P\x{e1}gina de consola de administraci\x{f3}n de curso

Informaci\x{f3}n de cuenta 被添加到 Db 中，并且在获取时它会在 UI 中显示无关字符。

我尝试了这个解决方案，但它不起作用。这基本上是电子表格的黑客攻击::Read

```
use Text::Iconv;
package Spreadsheet::XLSX;

sub new {
    my $converter = Text::Iconv->new("ASCII","utf-8");
    return __PACKAGE__->SUPER::new(@_, $converter);
} 
```

请建议我有什么问题或任何更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:41:02.213

Spreadsheet::Read returns strings as octets encoded in Latin1\. To make Perl characters, use the [Encode](http://p3rl.org/Encode) module. Read the [introduction to the topic of encoding in Perl](http://p3rl.org/UNI).

```
use Encode qw(decode);
use Spreadsheet::Read qw(ReadData);
my $ref = ReadData 'spanish.xls';
my $characters = decode 'Latin-1', $ref->[1]{A1}; 
```

# php - &, <, >, ", ' 符号的验证

> ID：11652769
> 
> 赞同：0
> 
> 时间：2012-07-25T15:04:13.310
> 
> 标签：php, xml, dom, xsd, simplexml

我经常得到具有非法字符的 XML 文件，例如**&、<、>、"**和**'**。因此，我无法使用**simple_xml**和**DOM读取它们，也无法根据下面的****XSD**验证用户的**XML**文件以在 PHP 中进行进一步处理。

 **有没有办法解决这个问题？

我正在从远程主机读取 XML 文件，因此它可以在 10KB 和 10MB 之间。

提前致谢

*注意：*我只在下面放了无效的 XML 元素，因为某些原因整个 XML 文件在这里显示为纯文本。

**XML**

```
<url>http://www.amazon.co.uk/gp/product/B005MG8O96/ref=olp_product_details?ie=UTF8&me=&seller=</url>
<description>iPhone 4\. The "fastest", <b>highest-resolution</b> iPhone.</description> 
```

**XSD**

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<xs:element name="store">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="item" minOccurs="1" maxOccurs="unbounded">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="title" type="title_type" />
                        <xs:element name="description" type="description_type" />
                        <xs:element name="price" type="xs:decimal" />
                        <xs:element name="url" type="url_type" />
                        <xs:element name="images">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="image" minOccurs="1" maxOccurs="unbounded">
                                        <xs:complexType>
                                            <xs:attribute name="url" type="url_type" />
                                        </xs:complexType>
                                    </xs:element>
                                </xs:sequence>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                    <xs:attribute name="id" type="id_type" />
                    <xs:attribute name="available" type="available_type" />
                </xs:complexType>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="id" type="id_type" />
        <xs:attribute name="date" type="xs:date" />
        <xs:attribute name="time" type="xs:time" />
    </xs:complexType>
</xs:element>

<xs:simpleType name="title_type">
    <xs:restriction base="xs:string">
        <xs:minLength value="1" />
        <xs:maxLength value="100" />
    </xs:restriction>
</xs:simpleType>

<xs:simpleType name="description_type">
    <xs:restriction base="xs:string">
        <xs:minLength value="1" />
        <xs:maxLength value="255" />
    </xs:restriction>
</xs:simpleType>

<xs:simpleType name="url_type">
    <xs:restriction base="xs:anyURI">
        <xs:minLength value="10" />
        <xs:maxLength value="2000" />
    </xs:restriction>
</xs:simpleType>

<xs:simpleType name="id_type">
    <xs:restriction base="xs:string">
        <xs:minLength value="1" />
        <xs:maxLength value="100" />
    </xs:restriction>
</xs:simpleType>

<xs:simpleType name="available_type">
    <xs:restriction base="xs:string">
        <xs:enumeration value="Yes" />
        <xs:enumeration value="No" />
    </xs:restriction>
</xs:simpleType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:25:51.907

正如评论者所说，您应该让他们向您发送正确的 XML。如果您无法做到，您可以执行以下操作：

对于每个可能包含无效字符的元素，如果类型是 xs:string 并且元素名称在您的架构中是唯一的，则对打开和关闭标签进行多行搜索。在这些标签之间，替换`&`为`&amp;`、替换`<`为`&lt;`和替换`>`为`&gt;`。单引号和双引号不是标签之外的元字符，因此一旦您进行了这些替换，您应该拥有有效的 XML。它可能不是发件人想要的 XML，但这是我能想到的将他们的非 XML 转换为有效 XML 的唯一明确方式。

我提到的替代方法的替代方法是始终将这些字符串元素的文本内容包装在 CDATA 部分中。但实际上，只要求生成这些文件的人为您执行此操作有多难？**

# twitter-bootstrap - 在引导模式中使用 slickgrid

> ID：11652774
> 
> 赞同：2
> 
> 时间：2012-07-25T15:04:44.543
> 
> 标签：twitter-bootstrap, slickgrid

是否可以在引导模式中使用 slickgrid？

我试过了，slick-viewport div 高度设置为 2px 而不是正确的大小。我也在使用展开和折叠按钮，但是当我展开时，只显示当前行数，添加一个滚动但有额外的空行而不是展开节点的子行。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T17:56:52.497

在模式完成加载**后**尝试手动初始化网格。您可以按照[http://mleibman.github.com/SlickGrid/examples/example-explicit-initialization.html](http://mleibman.github.com/SlickGrid/examples/example-explicit-initialization.html)`explicitInitialization: true`中的说明执行此操作

PS - 添加这个作为答案，所以如果你愿意，你可以接受这个。

* * *

凯文B编辑：

要添加，您可以绑定到模式的`shown`事件以在适当的时间执行初始化。

```
$("#modal").on("shown",function(){
    grid.init();
}); 
```

# android - Android滚动表格布局导致图形噪音

> ID：11652775
> 
> 赞同：-1
> 
> 时间：2012-07-25T15:04:45.210
> 
> 标签：android, tablelayout

在三星 I9003 上，当我滚动视图时，会导致图形噪音。可能是什么问题呢？

首先，我读取包含特定结构的 XML 文件，然后将该结构放入 arrayList。

对于 arrayList i Do 中的每个元素：

//这里有一个小图像，如 5px * 10px

```
tr = new TableRow(this);
ImageView triangle = new ImageView(this);

params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
                params.gravity = 0x11;
                params.span = 8;

triangle.setBackgroundResource(R.drawable.complex_grey_down);
                triangle.setLayoutParams(params);
                tr.addView(triangle);
                tl.addView(tr, params);
                // here goes main title of the row
                tr = new TableRow(this);
                child = new TextView(this);
                child.setText(sn.getName());
                params = new LayoutParams(LayoutParams.FILL_PARENT,
                    LayoutParams.FILL_PARENT);
                params.gravity = 0x11;
                params.span = 8;
                child.setTypeface(null, Typeface.BOLD);
                child.setTextColor(res.getColor(R.color.text));
                child.setLayoutParams(params);
                tr.addView(child);
                tl.addView(tr, params);
                // here goes short note under the title
                if (sn.getNote().length() > 0) {
                    tr = new TableRow(this);
                    child = new TextView(this);
                    child.setText(sn.getNote());
                    child.setTextSize(12);
                    child.setPadding(30, 5, 30, 10);
                    child.setTextColor(res.getColor(R.color.text));
                    child.setGravity(Gravity.CENTER);
                    params = new LayoutParams(LayoutParams.FILL_PARENT,
                        LayoutParams.FILL_PARENT);
                    params.gravity = 0x11;
                    params.span = 8;
                    child.setLayoutParams(params);
                    tr.addView(child);
                    }
                    tl.addView(tr, params);
                } 
```

添加 10 多行后，该手机无法处理它。对于某些手机来说，这种结构是否过于复杂。并且使用具有多个文本视图和少量图像视图的表格布局和复杂行是此类内容的正确解决方案

* * *

好吧，我实现了 sackOfViewsAdapter，但它没有帮助。在同一三星手机应用程序无法正常工作。我注意到一件事，如果您在安装后第一次启动应用程序，一切正常，屏幕上没有延迟和图形“噪音”，但是当应用程序被强制关闭并重新启动时，所有这些奇怪的事情都会发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:33:25.230

> 并且使用具有多个文本视图和少量图像视图的表格布局和复杂行是此类内容的正确解决方案

不，因为正如您所描述的，当列表变得太大时，您会同时将太多视图膨胀到内存中。最终，如果您的列表变得足够大，任何设备都会简单地以`OutOfMemoryException`.

实现这样的滚动列表的正确模式是使用`ListView`自定义的`ListAdapter`. 这种模式在视图在屏幕上滚动时回收视图，最大限度地减少内存使用，适配器的工作是提供必要的数据结构，以便在每个视图滚动进入视图时填充它。

# javascript - Windows 8 Metro 和谷歌分析

> ID：11652776
> 
> 赞同：4
> 
> 时间：2012-07-25T15:04:48.363
> 
> 标签：javascript, google-analytics, windows-8, microsoft-metro

是否可以为基于 Windows Metro JavaScript 的应用程序使用 Google Analytics JavaScript 库 (https://developers.google.com/analytics/devguides/collection/gajs/) 来跟踪用户访问的视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T22:20:17.837

一般来说，如果您要使用的 JavaScript 库位于应用程序外部的 CDN 或服务器上，答案是否定的，因为使用 HTML/JavaScript 编写的 Windows 应用程序无法加载外部 JavaScript 库...如果您尝试，安全会发生异常。

如果将 JS 文件复制到项目中并在本地运行，许多库都可以正常工作。例如，jQuery 以这种方式工作得很好。我没有尝试过 Google Analytics 库，所以您可能只想测试一下，看看它是否适用于本地副本。

然而，需要考虑的其他一点是，与网站不同，用 HTML/JavaScript 编写的 Windows 应用程序有时可能会脱机，在这种情况下，假设网络连接性编写的库可能无法工作。因此，在这种特殊情况下，您可能无法获得您希望的数据。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T14:58:00.430

我们在我们的应用程序中使用了免费版本的[标记](https://markedup.com/winrtanalytics)，并取得了巨大成功。除了简单的页面视图之外，它还会向您显示一些特定于应用程序的数字，例如安装次数、异常详细信息等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:54:16.150

我们尝试[http://w8ga.codeplex.com/](http://w8ga.codeplex.com/) (w8ga) 在我们的 win8 js 应用程序中使用 GA。目前 W8GA 似乎不支持 html/js。另外我不知道为什么开发人员没有提及它（它只支持 c#/xaml Metro 应用程序）

所以，我们找到了另一种方法来做到这一点；在本页底部查找 cobra Tab 的答案：http: [//social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/f81ebbb9-d711-40f1-8a82-9aed44e2d8fe/](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/f81ebbb9-d711-40f1-8a82-9aed44e2d8fe/)

最后，我们正在等待 Adob​​e 的 Omniture sdk： [http ://microsite.omniture.com/t2/help/en_US/sc/appmeasurement/winrt/index.html#Developer_Quick_Start](http://microsite.omniture.com/t2/help/en_US/sc/appmeasurement/winrt/index.html#Developer_Quick_Start)

希望这些答案能帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T00:26:58.240

我建议使用[适用于 Windows 8 和 Windows Phone 的 Google Analytics SDK](http://googleanalyticssdk.codeplex.com)。它是作为 WinRT 组件构建的，因此支持 JS 和 Xaml Win8 应用程序。

全面披露：我是这个 SDK 的作者；我为自己的应用程序构建了它并决定开源它。除了 AFAIK 之外，还有其他框架，它们都不支持新的 GA 通用分析协议，因此它们仅适用于较旧的 GA 属性，并且不支持 GA 最近仅为应用程序添加的所有酷新功能。

# css - Twitter 引导程序：嵌套字段集？

> ID：11652778
> 
> 赞同：2
> 
> 时间：2012-07-25T15:04:58.493
> 
> 标签：css, twitter-bootstrap, fieldset

我需要以一种我可以使用 twitter 引导程序的方式完成这样的事情。

```
<fieldset>
    <legend>Main Section</legend>
    <div class="left-column">
        some stuff here
    </div>
    <div class="right->column">
        <fieldset>
            <legend>A form inside</legend>
            form here
        </fieldset>
    </div>
</fieldset> 
```

出于某种原因，Bootstrap 对字段集的样式设置与平时不同，没有边框。如果我添加边框和一些填充，我将无法再正常使用网格。结果对我来说总是搞砸了。我需要字段集看起来像带有边框的模型，一些填充和边框内的标签（这很容易；））。

那么通过使用引导程序并遵循其原则来完成这项工作的最佳方法是什么？

![例子](../Images/9d8fa90d0bc3f1126dca0618b76c23fe.png)

编辑：更好，但由于某种原因我不喜欢这个解决方案......

```
 <fieldset class="row fieldset">
            <legend>Main Section</legend>
            <div class="span6">
                some stuff here
            </div>
            <div class="span6">
                <fieldset class="fieldset">
                    <legend>A form inside</legend>
                    form here
                </fieldset>
            </div>
        </fieldset>

.fieldset {
    border: 1px solid #ccc;
    padding: 10px;
}

.fieldset .span6 {
    width: 560px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:44:52.993

```
<div class='container'>
  <fieldset class="fieldset">
    <legend>Main Section</legend>
    <div class="row-fluid">
      <div class="span6">
        some stuff here
      </div>
      <div class="span6">
        <fieldset class="fieldset">
          <legend>A form inside</legend>
            form here
        </fieldset>
       </div>
  </fieldset>
</div>

.fieldset {
    border: 1px solid #ccc;
    padding: 10px;
} 
```

[http://jsfiddle.net/baptme/ppxGG/](http://jsfiddle.net/baptme/ppxGG/)

# php - 包括 $book->author 在 echo ""

> ID：11652779
> 
> 赞同：0
> 
> 时间：2012-07-25T15:05:01.030
> 
> 标签：php, echo

我正在尝试在 echo 语句中打印 $book->author。现在我正在使用连接。

```
echo "book author: " . $book->author . "<br />"; 
```

如何将整个内容包含在双引号中？如果我执行以下操作，则假定我正在尝试回显该`$book`对象并且这`->author`是一个常规字符串。

```
echo "book author: $book->author<br />"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T15:06:26.070

用花括号把它包起来。

```
echo "book author: {$book->author}<br />"; 
```

顺便说一句，我是以下内容的倡导者。我发现它读起来更好，克服了花括号方法的限制，并且~~是对字符串连接的*微*、*微*~~优化（见评论）。

```
echo "book author: ", $book->author, "<br />"; 
```

# c# - MonoDroid C# 翻译

> ID：11652781
> 
> 赞同：0
> 
> 时间：2012-07-25T15:05:04.193
> 
> 标签：c#, java, mono, xamarin.android

我正在将一个 java 类翻译成 C#，但是，我不确定我是否正确地完成了它。在我下面的代码中，应该调用 RewardRequestListener 的 OnFinishedEvent，但是，它永远不会遇到断点或记录任何内容。

这是我的Java：

```
private RequestListener<Resource> mRequestListener = new RequestListener<Resource>() {
    @Override
    public void onFinished(Kiip manager, Resource response) {
        if (response != null) {
            if (mRewardActionToggle.isChecked()) {
                manager.showResource(response);
            } else {
                toast("Reward Queued");
                mResources.add(response);
            }
        } else {
           toast("No Reward");
        }
    }

    @Override
    public void onError(Kiip manager, KiipException error) {
        toast("error (" + error.getCode() + ") " + error.getMessage());
    }
}; 
```

这是我的 C#：

```
 private static readonly string TAG = "example";

    private Button mUnlockAchievement, mSaveLeaderboard, mShowNotification, mShowFullscreen, mGetActivePromos, mNewActivity;

    private EditText mAchievementId, mLeaderboardId;

    private static ToggleButton mPositionToggle, mRewardActionToggle;

    private List<ME.Kiip.Api.Resource> mResources = new List<ME.Kiip.Api.Resource>();

    private RewardRequestListener mRewardsListener;
    private ActivePromosRequestListener mActivePromosListener;

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        mRewardsListener = new RewardRequestListener(this);
    }

    class RewardRequestListener : Kiip.IRequestListener
    {
        ExampleActivity example = new ExampleActivity();

        public RewardRequestListener(ExampleActivity example)
        {
            this.example = example;
        }

        public void OnError(Kiip p0, KiipException p1)
        {
            example.toast("error (" + p1.Code + ") " + p1.Message);
        }

        public void OnFinished(Kiip p0, Java.Lang.Object p1)
        {
            ME.Kiip.Api.Resource response = p1 as ME.Kiip.Api.Resource;
            if (response != null)
            {
                if (mRewardActionToggle.Checked)
                {
                    p0.ShowResource(response);
                }
                else
                {
                    example.mResources.Add(response);
                }
            }
            else
            {
                example.toast("No Reward");
            }
        }

        public IntPtr Handle { get; set; }

        public void Dispose()
        {

        }
    }

    public void OnClick(View v)
    {
        Kiip manager = Kiip.Instance;

        switch (v.Id)
        {

            case Resource.Id.unlockAchievement:
                manager.UnlockAchievement(mAchievementId.Text, mRewardsListener);
                break;  
        }      
     } 
```

# javascript - 带 Iframe 目标的异步表单——OnLoad 在 FF、Chrome、IE9 中有效，在 IE7 中没有响应

> ID：11652783
> 
> 赞同：1
> 
> 时间：2012-07-25T15:05:06.027
> 
> 标签：javascript, jquery, iframe

我的应用程序的弹出窗口中有一个 ajax 样式的表单。我使用带有目标 iframe 的表单，然后在 iframe.load() 函数上，获取内容并将它们显示回我的弹出窗口。

这适用于 IE9、Chrome、Firefox：

```
 $("iframe[name=addpart-iframe]").load(function () {
            //FF and IE fire the load when the popup first load, chrome does not. This kips the first onload where no submit has happened yet
               if (firstLoad == true) {
                   firstLoad = false;
                   return;
               }

               var response = this.contentDocument.body.innerHTML;
               $("#AddForm").html(response);

           }); 
```

这很好用，除了在 IE7 中。当我查看 this.contentDocument.body 时——调试器说 body 不是一个有效的属性。我看外面的html，我的iframe此时也是空的。不知道为什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:14:44.943

> 该`contentDocument`属性指的是 iframe 内的文档元素（相当于`contentWindow.document`），但 IE8 之前的 Internet Explorer 版本不支持该属性。

对于 IE 8 之前的早期版本，可以使用`contentWindow`属性。

```
var response;

if (this.contentDocument) {
    response = this.contentDocument.body.innerHTML;
} else {
    response = this.contentWindow.document.body.innerHTML;
} 
```

# iphone - 如何在没有objective-c代码的情况下显示ios应用程序版本号

> ID：11652784
> 
> 赞同：0
> 
> 时间：2012-07-25T15:05:07.943
> 
> 标签：iphone, ios, version

这不是重复的。引用的`duplicate`问题具体要求

> “Objective-C 中有没有办法找出我的应用程序的版本？”

而当前的问题是如何在不编写任何代码的情况下找到它。

> **可能重复：**
> [我的 iphone 应用程序如何检测自己的版本号？](https://stackoverflow.com/questions/458632/how-can-my-iphone-app-detect-its-own-version-number)

我正在编写一个 ios 应用程序，并希望我的试用用户能够告诉我他们正在使用什么版本。

我知道您可以通过以下两篇文章以编程方式向用户显示您的应用程序的安装版本： [如何以编程方式检查我们应用程序的捆绑版本？](https://stackoverflow.com/questions/2657477/how-to-check-bundle-version-for-our-application-by-programming)以及[如何向用户显示我的应用程序的当前项目版本？](https://stackoverflow.com/questions/1492351/how-to-display-the-current-project-version-of-my-app-to-the-user)

但是我*必须*以编程方式进行吗？如何在没有objective-c代码的情况下显示ios应用程序版本号？在 android 上，该版本在“管理应用程序”下自动可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:09:18.290

以下代码将为您提供您在 plist 中定义的版本。您可以使用它来填充 UILabel。

`NSString *appVersion = [[NSBundle mainBundle] objectForInfoDictionaryKey:(NSString*)kCFBundleVersionKey];`

您可以使用该信息来填充设置包，以便它显示在手机的主 settings.app 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:11:01.900

没有内置支持向用户显示捆绑版本。您应该使用找到的链接自己获取和显示值。

如果这是一个找出已经分发的应用程序版本号的问题，有一些方法可以读取 plist，但这不使用内置支持。您可能想查看 iFile（如果已越狱）或[iExplorer](http://www.macroplant.com/iexplorer/) （如果未越狱）。这些允许您查看 ios 设备文件系统并直接读取文件。（iExplorer 仅限于您可以阅读的文件，但您可以阅读 Info plists）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:14:43.633

我认为您想在设置包中显示您的当前版本，并使用您的 Info.plist 来了解版本，如您问题中的链接中所述。

这是一个小教程： [http ://www.slideshare.net/livatlantis/iphone-dev-application-settings-and-defaults](http://www.slideshare.net/livatlantis/iphone-dev-application-settings-and-defaults)

希望有用！

# svn - 如何针对需要提交问题参考的 JIRA 设置 TeamCity 自动标签？

> ID：11652797
> 
> 赞同：1
> 
> 时间：2012-07-25T15:05:43.780
> 
> 标签：svn, teamcity, jira

我们使用 TeamCity 进行自动化构建，使用 JIRA (Atlassian OnDemand) 进行问题跟踪。作为 OnDemand 服务的一部分，我们的 Subversion 存储库也由 Atlassian 托管，并且我们启用了预提交挂钩以要求每次签入时都需要一个问题。我想将我们的 TeamCity 实例设置为在每次成功构建后自动标记项目存储库。不过，预提交挂钩正在阻止标签提交。有没有办法在 TeamCity 中指定要包含在提交中以标记构建的问题？

我宁愿保持预提交钩子处于活动状态，以便我们强制执行与问题相关的代码更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T19:28:15.567

听起来您正在寻找指定 TeamCity 在标记时使用的 SVN 提交消息。这可以在 VCS 根、**标签消息**设置中进行配置。

但是，与其提供一个可能是通用的问题 ID 来满足预提交挂钩，我建议更新预提交脚本以在 TeamCity 进行提交时不强制执行问题 ID 要求，而是将其保留在其他提交的地方。例如，您可以使用**svnlook author**检查提交用户名。

# hsqldb - HSQL 为什么在使用 GET DIAGNOTICS 时出现错误 = ROW_COUNT

> ID：11652802
> 
> 赞同：0
> 
> 时间：2012-07-25T15:05:48.050
> 
> 标签：hsqldb

我想`@@rowcount`在存储过程中从 hsqldb 获取 rowcount 的值（就像其他 dbms 提供的一样），但是我对通知我的异常感到困惑

> 意外令牌：GET，必需：END

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:53:41.090

此语法适用于最新的 HSQLDB 2.2.9 快照：

```
create procedure del_stuff(inout n int) modifies sql data
 begin atomic
 delete from t_temp where t_temp.i > n;
 get diagnostics n = row_count;
 end 
```

# python - csv.write 写入 csv 时跳过行

> ID：11652806
> 
> 赞同：26
> 
> 时间：2012-07-25T15:06:00.293
> 
> 标签：python, csv

我正在尝试通过以下方式写入 csv 文件

```
file = open('P:\test.csv', 'a') 

fieldnames = ('ItemID', 'Factor', 'FixedAmount')
wr = csv.DictWriter(file, fieldnames=fieldnames)
headers = dict((n, n) for n in fieldnames)

wr.writerow(headers)
wr.writerow({'ItemID':1, 'Factor': 2, 'FixedAmount':3}) 
```

但是，当我查看 csv 文件时，第一行是空的，第二行是我的标题，第三行又是空的，第四行显示条目 1,2 和 3。为什么它 > 在之前跳过一行它进入了吗？

编辑：使用 python 3.2

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-25T15:14:29.373

解决方案是在构造函数中指定“lineterminator”参数：

```
file = open('P:\test.csv', 'w')

fields = ('ItemID', 'Factor', 'FixedAmount')
wr = csv.DictWriter(file, fieldnames=fields, lineterminator = '\n')

wr.writeheader()
wr.writerow({'ItemID':1, 'Factor': 2, 'FixedAmount':3})
file.close() 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-25T15:25:24.487

二十个 quatloos 说你在 windows 下运行（好吧，一百个，因为你的文件被称为`P:\test.csv`）。你可能会得到额外`\r`的 s。

[编辑]

好的，既然使用二进制模式会导致其他问题，那么这个怎么样：

```
file = open('P:\test.csv', 'w', newline='') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:11:41.497

可能是您以附加模式打开输出文件吗？

```
file = open('P:\test.csv', 'a') 
#                           ^ 
```

而不是写模式？如果您多次运行该程序，则每次运行的输出都将在该文件中...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-08T20:50:05.070

您需要向“open()”函数传递一个附加参数：

```
file = open('P:\test.csv', 'a', newline='') 
```

这将防止它跳线。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-01-31T19:41:35.277

我遇到了这个问题，这是因为我使用的是\n\r。我更改为 \n，它现在正在工作。

# xml - XSLT 将 XML 转换为 XHTML

> ID：11652808
> 
> 赞同：-1
> 
> 时间：2012-07-25T15:06:11.110
> 
> 标签：xml, xslt, xhtml, xslt-1.0

绝对不会在 XSLT 中找到成功的思考......

这是我所拥有的：

```
 <par font="Arial" size="24">text 24</par>
   <par font="Arial" size="12">text 12</par>
   <par font="Times New Roman" size="12">text times 12</par> 
```

这就是我想要的：

```
 <font style="font-family:Arial"><font style="font-size:24">text 24</font></font>
   <font style="font-family:Arial"><font style="font-size:12">text 12</font></font>
   <font style="font-family:Times New Roman"><font style="font-size:12">text times 12</font></font> 
```

当然，这样的事情也很好，但对我来说，这个解决方案似乎更复杂：

```
<font style="font-family:Arial;font-size:24">text 24</font>
<font style="font-family:Arial;font-size:12">text 12</font>
<font style="font-family:Times New Roman;font-size:12">text times 12</font> 
```

我认为（但我可能错了）我必须为每种尺寸和每种字体指定一些代码。这不是问题，因为我的 xml 中只有很少的尺寸和字体可用。

非常感谢您的帮助，我开始失去头发试图自己做......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:22:02.047

你可以这样做：

**XML 输入**（修改为格式良好）

```
<doc>
    <par font="Arial" size="24">text 24</par>
    <par font="Arial" size="12">text 12</par>
    <par font="Times New Roman" size="12">text times 12</par>   
</doc> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="doc">
        <html>
            <xsl:apply-templates/>
        </html>
    </xsl:template>

    <xsl:template match="par">
        <font>
            <xsl:attribute name="style">
                <xsl:apply-templates select="@*"/>
            </xsl:attribute>
            <xsl:apply-templates select="node()"/>
        </font>
    </xsl:template>

    <xsl:template match="par/@size">
        <xsl:value-of select="concat('font-size: ',.,';')"/>
    </xsl:template>
    <xsl:template match="par/@font">
        <xsl:value-of select="concat('font-family: ',.,';')"/>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<html>
   <font style="font-family: Arial;font-size: 24;">text 24</font>
   <font style="font-family: Arial;font-size: 12;">text 12</font>
   <font style="font-family: Times New Roman;font-size: 12;">text times 12</font>
</html> 
```

此外，如果您只想在具有or属性的情况下输出，则可以将其更改`match="par"`为。`match="par[@font or @size]"``<font>``font``size`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:34:54.933

恭喜 DevNull。他是第一个正确答案。詹姆斯的回答是错误的。

我只是在这里非常迂腐，但实际上最简单最严格的解决方案是.... <drumroll/> ....

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

<xsl:template match="/">
 <xsl:for-each select="*/par">
  <font style="{ string-join(
   for $a in (@size|@font) return
     concat('font-', if ($a except @font) then 'size' else 'family', ':', $a),
     ';')}">
   <xsl:copy-of select="node()"/>
  </font>
 </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

上面的 XSLT 2.0 样式表将转换这个输入......

```
<doc>
    <par font="Arial" size="24">text 24</par>
    <par font="Arial" size="12">text 12</par>
    <par font="Times New Roman" size="12">text times 12</par>   
    <par font="Courier">No size specified!</par>   
    <par size="16">No font specified!</par>   
</doc> 
```

...进入此输出...

```
<font style="font-family:Arial;font-size:24">text 24</font>
<font style="font-family:Arial;font-size:12">text 12</font>
<font style="font-family:Times New Roman;font-size:12">text times 12</font>
<font style="font-family:Courier">No size specified!</font>
<font style="font-size:16">No font specified!</font> 
```

**一个小模板，样式属性值中没有多余的分号！**

没有提到需要什么 XSLT 版本。因此，如果 OP 在 XSLT 1.0 上，那么这个解决方案可能对 OP 没有用。

# haskell - 如何实现mapAccumM？

> ID：11652809
> 
> 赞同：3
> 
> 时间：2012-07-25T15:06:11.233
> 
> 标签：haskell

我想要`mapM`在传递累加器时可以遍历的东西。我想出了：

```
import Control.Applicative
import Data.Traversable
import Control.Monad.State

mapAccumM :: (Applicative m, Traversable t, MonadState s m)
             => (s -> a -> m (s, b)) -> s -> t a -> m (t b)
mapAccumM f acc0 xs = put acc0 >> traverse g xs
  where
    g x = do
      oldAcc <- get
      (newAcc, y) <- f oldAcc x
      put newAcc
      return y 
```

没有`State`monad怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:20:45.283

roconnor 在#haskell 上为我回答了这个问题

这解决了我的问题，但请注意累加器在元组的第二个元素而不是第一个元素中返回

```
mapAccumM :: (Monad m, Functor m, Traversable t) => (a -> b -> m (c, a)) -> a -> t b -> m (t c)
mapAccumM f = flip (evalStateT . (Data.Traversable.traverse (StateT . (flip f)))) 
```

或者也返回累加器：

```
mapAccumM' :: (Monad m, Functor m, Traversable t) => (a -> b -> m (c, a)) -> a -> t b -> m (t c, a)
mapAccumM' f = flip (runStateT . (Data.Traversable.traverse (StateT . (flip f)))) 
```

# google-ad-manager - 适用于发布商的 Google 广告管理器 DoubleClick > 每个广告位有多种尺寸

> ID：11652810
> 
> 赞同：1
> 
> 时间：2012-07-25T15:06:12.150
> 
> 标签：google-ad-manager

我知道我会展示广告：

```
GA_googleFillSlot(AD_UNIT_NAME_300x250); 
```

但是，如果我想在同一位置显示 300x250 或 300x600 但不是同时显示它们怎么办？

干杯，卡灵顿！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T22:36:04.197

Google 是这样定义广告单元的：

```
googletag.cmd.push(function () {
    googletag.defineSlot('/1111111/BLAH_ROS_Island', [300, 250], 'div-gpt-ad-1111110-0').addService(googletag.pubads());
    googletag.pubads().enableSingleRequest();
    googletag.pubads().collapseEmptyDivs();
    googletag.enableServices();
}); 
```

你可以在同一个定义中提供两个单位，试试看

```
googletag.cmd.push(function () {
    googletag.defineSlot('/1111111/BLAH_ROS_Island', [[300, 600], [300, 250]], 'div-gpt-ad-1111110-0').addService(googletag.pubads());
    googletag.pubads().enableSingleRequest();
    googletag.pubads().collapseEmptyDivs();
    googletag.enableServices();
}); 
```

所以从 **[300, 250]** 到 **[[300, 600], [300, 250]]**

# security - 如何防止我的网络代理网站被报告为钓鱼网站

> ID：11652813
> 
> 赞同：0
> 
> 时间：2012-07-25T15:06:20.580
> 
> 标签：security, web, seo

我有一个网络代理网站来帮助中国人，他们可以通过修改后的网址查看被政府封锁的网页，例如[http://www.google.com.mywebproxy.domain/](http://www.google.com.mywebproxy.domain/)。

但有些网站已被 google 和其他网站报告为钓鱼网站。我需要知道搜索引擎如何检测钓鱼网站的规则，并且我可以阻止一些我永远不应该代理的页面。

例如，如何检测一个网站有一个表单输入信用卡信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:31:53.370

> 如何检测一个网站有一个表格输入信用卡信息？

我知道这有点简单，但是在页面/表格中查找信用卡相关条款的简单规则呢？

想想看，为了使网络钓鱼攻击起作用，攻击者需要以一种或另一种方式说服访问者提供他/她的 CC 信息。因此，您可以列出与支付相关的术语，如“信用卡、付款、抄送、账单”等，并使用它们来阻止页面意图。

话说回来：

a: images/flash 会提供漏洞

b：您需要涵盖所有术语的不同翻译

c：在您的情况下，一些“合法”网站将被阻止

这当然不描述谷歌（或其他）过滤算法的工作，这些算法使用基于多个验证向量和现有数据池的更复杂的规则集进行交叉引用。

这些的精确组合是一个严密保护的秘密，我同意 Rob 的观点，联系某人进行手动检查可能是最好的解决方案。

# android - android：列表视图中的列表视图

> ID：11652814
> 
> 赞同：35
> 
> 时间：2012-07-25T15:06:24.590
> 
> 标签：android, listview

我正在尝试在 listviewitem 中放置一个 listview。内部列表视图不应该是可滚动的，而是采用显示所有行所需的所有大小。有更好的方法吗？表，网格，...？我现在面临的问题是内部列表视图没有占用它需要的空间，所以它在第一个列表项的末尾被切断了。如果我尝试滚动，只是外部列表视图正在滚动，这正是我想要的。

![How_it_should_look_like](../Images/133678c1454a043eb427f40024e9b504.png) 谢谢，我的最终解决方案是

```
LinearLayout layout = (LinearLayout) row.findViewById(R.id.LLBroadcasts);
layout.removeAllViews();

for (Item b : bs.getItems()) {

  View child = _inflater.inflate(R.layout.item_row, null);

  TextView tvTitle = (TextView) child.findViewById(R.id.TVItemTitle);
  tvTitle.setText(b.getTitle());

  TextView tvDesc = (TextView) child.findViewById(R.id.TVItemDescription);
  tvDesc.setText(b.getDescription());
  layout.addView(child);
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-25T15:23:51.187

来自 Android 文档 - [Listview](http://developer.android.com/guide/topics/ui/layout/listview.html)：*ListView 是一个视图组，显示可滚动项目的列表*

您真的不想滚动该内部列表视图，而是想要滚动外部列表视图。但是我认为内部列表视图可能会因其包含的元素数量而异。

而不是内部列表视图，您可以使用

*   [线性布局](http://developer.android.com/reference/android/widget/LinearLayout.html)，请参阅本 [教程](http://www.dreamincode.net/forums/topic/130521-android-part-iii-dynamic-layouts/)或查看[动态添加内容到线性布局？](https://stackoverflow.com/questions/6661261/how-to-add-dynamic-content-to-lineary-layout-programmatically-in-my-case)
*   [表布局](http://developer.android.com/reference/android/widget/TableLayout.html)

对于线性布局（一些示例代码）：

```
// access your linear layout
LinearLayout layout = (LinearLayout)findViewById(R.id.layout);
// load the xml structure of your row
View child = getLayoutInflater().inflate(R.layout.row);
// now fill the row as you would do with listview
//e.g. (TextView) child.findViewById(...
...
// and than add it
layout.addView(child); 
```

您应该将线性布局保存在视图支架中（请参阅[视图支架模式](http://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder)）。我认为`removeAllViews()`只有当当前行的内部行少于重复使用的行时才需要，因此我还将保存视图持有者中的行数。

如果内部行的最大数量不是很高，您还可以考虑将它们缓存在视图持有者中以避免膨胀和 findByViewId（比如说在 ArrayList 中）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-23T12:14:07.910

我在我的应用程序中遇到了同样的问题，但我需要使用 ListView 因为它是一个共享项目，我不想复制相同的组件。所以..我只是以编程方式修复了内部 ListView 的大小以显示所有行和..瞧！问题解决了：

```
ViewGroup.LayoutParams layoutParams = innerListView.getLayoutParams();
layoutParams.height = (int) context.getResources().getDimension(R.dimen.rowheight) * innerListView.getCount();
innerListView.setLayoutParams(layoutParams);
CustomAdapter adapter = new CustomAdapter(context, blabla..);
innerListView.setAdapter(adapter);

rowListView.invalidate(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-15T10:38:51.883

也许有人会发现我的解决方案很有用。它基于@ChrLipp 答案并使用LinearLayout。

```
public class NotScrollableListView extends LinearLayout {

private ListAdapter adapter;
private DataChangeObserver dataChangeObserver;
private Drawable divider;
private int dividerHeight;

private List<View> reusableViews = new ArrayList<>();

public NotScrollableListView(Context context) {
    super(context);
}

public NotScrollableListView(Context context, AttributeSet attrs) {
    super(context, attrs);

    setAttributes(attrs);
}

public NotScrollableListView(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);

    setAttributes(attrs);
}

public ListAdapter getAdapter() {
    return adapter;
}

public void setAdapter(ListAdapter adapter) {
    if (this.adapter != null && dataChangeObserver != null) {
        this.adapter.unregisterDataSetObserver(dataChangeObserver);
    }

    this.adapter = adapter;
}

@Override
protected void onAttachedToWindow() {
    super.onAttachedToWindow();

    if (adapter != null) {
        dataChangeObserver = new DataChangeObserver();
        adapter.registerDataSetObserver(dataChangeObserver);

        fillContents();
    }
}

@Override
protected void onDetachedFromWindow() {
    super.onDetachedFromWindow();

    if (adapter != null) {
        adapter.unregisterDataSetObserver(dataChangeObserver);
        dataChangeObserver = null;
    }
}

private void fillContents() {

    // clearing contents
    this.removeAllViews();

    final int count = adapter.getCount();   // item count
    final int reusableCount = reusableViews.size(); // count of cached reusable views

    // calculating of divider properties
    ViewGroup.LayoutParams dividerLayoutParams = null;
    if (divider != null && dividerHeight > 0) {
        dividerLayoutParams = new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, dividerHeight);
    }

    // adding items
    for (int i = 0; i < count; i++) {
        // adding item
        View converView = null;
        if (i < reusableCount) {    // we have cached view
            converView = reusableViews.get(i);
        }
        View view = adapter.getView(i, converView, this);

        if (i >= reusableCount) {   // caching view
            reusableViews.add(view);
        }

        addView(view);

        // adding divider
        if (divider != null && dividerHeight > 0) {
            if (i < count - 1) {
                ImageView dividerView = new ImageView(getContext());
                dividerView.setImageDrawable(divider);
                dividerView.setLayoutParams(dividerLayoutParams);
                addView(dividerView);
            }
        }
    }
}

private void setAttributes(AttributeSet attributes) {
    int[] dividerAttrs = new int[]{android.R.attr.divider, android.R.attr.dividerHeight};

    TypedArray a = getContext().obtainStyledAttributes(attributes, dividerAttrs);
    try {
        divider = a.getDrawable(0);
        dividerHeight = a.getDimensionPixelSize(1, 0);
    } finally {
        a.recycle();
    }

    setOrientation(VERTICAL);
}

private class DataChangeObserver extends DataSetObserver {
    @Override
    public void onChanged() {
        super.onChanged();

        fillContents();
    }

    @Override
    public void onInvalidated() {
        super.onInvalidated();

        fillContents();
    }
}
    }

    <com.sample.ui.view.NotScrollableListView
    android:id="@+id/internalList"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:divider="@color/list_divider_color"
    android:dividerHeight="@dimen/list_divider_width"
    /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-10T21:59:49.470

I tried making this exact structure (a `ListView` inside of a `ListView`) and had the same problem of it only showing the first item of the inner `ListView`. I fixed it by changing the `layout_height` of the inner list from `match_parent` to a set `dp`.

It seemed to work exactly as I wanted it to.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-17T10:23:52.587

## @试试这个嵌套类

### 这适用于在相同的Or 2 s`listView`内滚动`listView``listview``activity`

```
 <com.example.taskgrptaskslistview.NestedListView
            android:id="@+id/listviewTasks"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_marginBottom="2dp"
            android:layout_weight="1"
            android:cacheColorHint="#00000000" >
        </com.example.taskgrptaskslistview.NestedListView>
    </LinearLayout> 
```

嵌套列表视图：

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.ListAdapter;
import android.widget.ListView;

public class NestedListView extends ListView implements OnTouchListener, OnScrollListener {

private int listViewTouchAction;
private static final int MAXIMUM_LIST_ITEMS_VIEWABLE = 99;

public NestedListView(Context context, AttributeSet attrs) {
    super(context, attrs);
    listViewTouchAction = -1;
    setOnScrollListener(this);
    setOnTouchListener(this);
}

@Override
public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) {
    if (getAdapter() != null && getAdapter().getCount() > MAXIMUM_LIST_ITEMS_VIEWABLE) {
        if (listViewTouchAction == MotionEvent.ACTION_MOVE) {
            scrollBy(0, -1);
        }
    }
}

@Override
public void onScrollStateChanged(AbsListView view, int scrollState) {
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    int newHeight = 0;
    final int heightMode = MeasureSpec.getMode(heightMeasureSpec);
    int heightSize = MeasureSpec.getSize(heightMeasureSpec);
    if (heightMode != MeasureSpec.EXACTLY) {
        ListAdapter listAdapter = getAdapter();
        if (listAdapter != null && !listAdapter.isEmpty()) {
            int listPosition = 0;
            for (listPosition = 0; listPosition < listAdapter.getCount()
                    && listPosition < MAXIMUM_LIST_ITEMS_VIEWABLE; listPosition++) {
                View listItem = listAdapter.getView(listPosition, null, this);
                //now it will not throw a NPE if listItem is a ViewGroup instance
                if (listItem instanceof ViewGroup) {
                    listItem.setLayoutParams(new LayoutParams(
                            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
                }
                listItem.measure(widthMeasureSpec, heightMeasureSpec);
                newHeight += listItem.getMeasuredHeight();
            }
            newHeight += getDividerHeight() * listPosition;
        }
        if ((heightMode == MeasureSpec.AT_MOST) && (newHeight > heightSize)) {
            if (newHeight > heightSize) {
                newHeight = heightSize;
            }
        }
    } else {
        newHeight = getMeasuredHeight();
    }
    setMeasuredDimension(getMeasuredWidth(), newHeight);
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    if (getAdapter() != null && getAdapter().getCount() > MAXIMUM_LIST_ITEMS_VIEWABLE) {
        if (listViewTouchAction == MotionEvent.ACTION_MOVE) {
            scrollBy(0, 1);
        }
    }
    return false;
}
} 
```

# html - Opera 无法识别正文 CSS 类

> ID：11652815
> 
> 赞同：0
> 
> 时间：2012-07-25T15:06:25.030
> 
> 标签：html, css, opera

我有一个奇怪的问题。我正在构建一个站点，其中 HTML 正文标记中有类。所有其他浏览器都按预期工作。但是，Opera simple 无法识别这些类。在源代码中，甚至在 Opera 中，它们都在那里。但是当我查看“检查元素”时，唯一的类主体是“yui-sam-skin”。我正在使用 Wordpress，所以模板是“`<body <?php body_class(); ?>>`

但是，我什至尝试过`<body class="<?php if(is_front_page() ) echo "home"; ?>">`. 同样，所有浏览器都希望 Opera 能够识别它，并且 Opera 在源代码中包含它，但在 Inspect Element 中没有。知道这里发生了什么吗？并非每个站点都会发生这种情况。我不久前建立的一个网站由于某种原因没有这个问题。即使在没有 PHP 的情况下添加类也行不通。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:29:20.080

查看您的源代码，您的标记中似乎有两个 body 元素......一个带有 home 类，另一个带有 yui 类。Opera Dragonfly 的检查工具显示实际的 DOM 表示，在浏览器的解析器清理了您损坏的标记之后。查看源代码并查找“body”，您会发现问题所在。或者，通过验证器运行页面。我建议首先解决这个问题。

# ibatis - ibatis动态sql使用两个条件

> ID：11652817
> 
> 赞同：0
> 
> 时间：2012-07-25T15:06:30.437
> 
> 标签：ibatis, mybatis

我想使用仅当变量不为空且大于零时才执行的动态 sql 语句。像这样：

```
<isNotNull prepend="AND" property="ProprietaryId">
    <isGreaterThan prepend="AND" property="ProprietaryId" compareValue="0">
        G.PROPRIETARY_ID = #ProprietaryId#
    </isGreaterThan>
</isNotNull> 
```

但没有前置两个'AND'。

我已阅读文档，但没有找到好的示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T14:18:15.673

为了解决这个问题，我几乎从不使用“前置”功能，而是编写这样的 sql：

```
WHERE 1=1
<isNotNull property="ProprietaryId">
    <isGreaterThan property="ProprietaryId" compareValue="0">
    AND G.PROPRIETARY_ID = #ProprietaryId#
    </isGreaterThan>
</isNotNull> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-02T17:16:37.540

我只是在寻找相同的答案时遇到了这个问题。虽然有效，但这种解决方案让我有些烦恼，所以我更多地研究了 iBATIS 文档并注意到了这个例子：

```
 <dynamic prepend="where">
    <isGreaterThan prepend="and" property="id" compareValue="0">
      ACC_ID = #id#
    </isGreaterThan>
    <isNotNull prepend="and" property="lastName">
      ACC_LAST_NAME = #lastName#
    </isNotNull>
  </dynamic> 
```

如果只有一个条件为真，您可能会认为这可能会导致在 WHERE 子句中包含多余的“和”，但显然 iBATIS 足够聪明，可以在使用动态标签时防止这种情况发生。它对我有用（在这种情况下使用 iBATIS 2.3.0）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-13T15:50:36.907

是来自未来的我。父元素覆盖其第一个子元素的前置，因此您的代码将正常工作，因为`isGreaterThan`前置将被父`isNotNull`前置覆盖。

从文档：

*prepend 属性是代码的一部分，如果需要，它可以被父元素的 prepend 覆盖。在上面的示例中，“where”前置将覆盖第一个真正的条件前置。这是确保正确构建 SQL 语句所必需的。例如，在第一个为真条件的情况下，不需要 AND，实际上它会破坏语句。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-25T09:44:31.800

```
<isNotNull property="ProprietaryId">
    <isGreaterThan prepend="AND" property="ProprietaryId" compareValue="0">
        G.PROPRIETARY_ID = #ProprietaryId#
    </isGreaterThan>
</isNotNull> 
```

只需删除第一个前置即可

# wso2 - 输出序列 - 丰富调解器未按预期工作

> ID：11652819
> 
> 赞同：0
> 
> 时间：2012-07-25T15:06:36.620
> 
> 标签：wso2, wso2esb

我试图构建一个包含服务链的应用程序。当我尝试合并响应并对合并的响应进行额外的转换时..我看到了意外的响应。我看到了我合并的响应以及我的 xslt 转换结果

例如：

如果我使用丰富 -> 兄弟到正文选项将“abc”添加到现有结果中，在我进行转换后，我仍然会看到“abc”被附加。

请在下面查看我的代码

```
<enrich>
                        <source clone="false" type="custom" xpath="get-property('poecResp')"/>
                        <target action="sibling" type="body"/>
                    </enrich>
                    <log category="INFO" level="full" separator=","/>
                    <xslt key="conf:Response_V1.xslt"/>
                    <log category="INFO" level="full" separator=","/> 
```

在我打印的最后一个日志中，我看到我添加的兄弟姐妹仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:05:17.890

我看到问题出在 xslt 上。我应该选择“源 XPATH”。但仍然不确定为什么我的 Enrich 组件不起作用。

# pdf-generation - DOMPDF 文本比正常粗体

> ID：11652821
> 
> 赞同：-1
> 
> 时间：2012-07-25T15:06:39.397
> 
> 标签：pdf-generation, dompdf

我不明白为什么 DOMPDF 中的字体颜色比正常颜色更粗。

[jsfiddle 与 html](http://jsfiddle.net/cuZvL/)

将 HTML 与 DOMPDF 进行比较的图像： ![在此处输入图像描述](../Images/74c85b33622b9ed31f22dc5b04fc4541.png)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:32:48.043

正如BrianS所说，问题的原因是PNG 8位。

我做了一个将所有PNG转换为JPG的函数，解决了这个问题。
如果您不知道它是哪种格式 > PNG 或 JPG，这很好。

谢谢布赖恩。

# vb.net - 如何将sql查询值存储到数组中

> ID：11652823
> 
> 赞同：1
> 
> 时间：2012-07-25T15:06:44.913
> 
> 标签：vb.net

```
Dim sql As String = "Select ProductID From OrderDetail Order By ProductID Desc"
    Dim command As New SqlCommand(sql, connection)
    Dim reader1 As SqlDataReader = command.ExecuteReader() 
```

如何将我检索到的所有 productid 存储到数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:11:23.337

```
Dim list As New List(Of Integer)

Using reader As SqlDataReader = command .ExecuteReader()
    While reader.Read()
        list.Add(reader.GetInt32(reader.GetOrdinal("ProductID")))
    End While
End Using
'check  list.ToArray() now 
```

**编辑：**但是，我不会返回一个数组，而是返回一个**通用**整数列表（如果您只想返回 ProductId）或`ProductClass`对象列表

```
Private Function GetProductIDs() As IList(Of Integer)

    Dim list As New List(Of Integer)
    Dim conStr = "write your connection string here"

    Using connection As New SqlConnection(conStr )
        Dim sql As String = "Select ProductID From OrderDetail Order By ProductID Desc"
        Dim command As New SqlCommand(sql, connection)
        Using reader As SqlDataReader = command.ExecuteReader()
            While reader.Read()
                list.Add(reader.GetInt32(reader.GetOrdinal("ProductID")))
            End While
        End Using
    End Using

    Return list

End Function 
```

**编辑 2**：*根据评论，* 要检索放入标签的文本，您可以这样做

```
Dim str As String
str = String.Join(",", GetProductIDs())
Label1.Text=str; 
```

假设`Label1`是您的标签控件的ID。`String.Join`该方法将返回一个由逗号分隔的ProductId字符串，例如`"1,2,6,7"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:11:40.053

```
SQLdr = SQLCmd.ExecuteReader 'Gets Data

While dr.Read() 'While Data is Present        
      MsgBox(dr("Column Name")) 'Show data in a Message Box
End While

Loop While SQLdr.NextResult() 'Move to the Next Record 
```

[http://www.daniweb.com/software-development/vbnet/code/216920/sql-in-vb.net](http://www.daniweb.com/software-development/vbnet/code/216920/sql-in-vb.net)

# playframework-2.0 - 为 RedHat 播放 Framework 2 新贵

> ID：11652825
> 
> 赞同：0
> 
> 时间：2012-07-25T15:06:46.207
> 
> 标签：playframework-2.0

这是 Ubuntu 的新贵配置。我怎样才能使它适应 RedHat？

问题是：

1.  RedHat 上没有启动-停止-守护进程。
2.  在运行级别启动/停止 - RedHat 的值是否正常？
3.  还有其他更正吗？

谢谢！

```
# /etc/init/linka.conf
description "Linka"

env USER=linka
env GROUP=nogroup
env HOME=/home/backlink/web2
env JAVA_OPTS="-Xms128M -Xmx512m -server -Dhttp.port=9002 -Dhttp.address=127.0.0.1 -Dconfig.file=/home/backlink/application.conf -Dlogger.file=/home/backlink/logger.xml"

start on runlevel [2345]
stop on runlevel [016]

respawn
expect daemon

pre-start script
  rm -f ${HOME}/RUNNING_PID
end script

exec start-stop-daemon \
  --pidfile ${HOME}/RUNNING_PID --chuid $USER:$GROUP \
  --exec ${HOME}/start --background --start \
  -- $JAVA_OPTS > /dev/null 2>&1 
```

**更新**

目前通过这样的新贵工作解决了这个问题：http: [//pastie.org/4335691](http://pastie.org/4335691) 但我不确定在 java 调用结束时使用 & 是否是个好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:31:05.083

这是 Play1 的示例，应该很容易适应 Play2：[https ://gist.github.com/993459](https://gist.github.com/993459)

在上面的示例中，启动运行级别为 345。您必须使用[chkconfig](http://linuxcommand.org/man_pages/chkconfig8.html)来安装此脚本。

# ios - ios 5.0 中的 CBPeripheral writeValue 线程安全吗？

> ID：11652827
> 
> 赞同：2
> 
> 时间：2012-07-25T15:06:51.230
> 
> 标签：ios, core-bluetooth

我想同时将多个蓝牙 LE 外围设备连接到我的 iPad 应用程序，并且我想收到特性更改通知并使用修改其特性

> [CBPeripheral writeValue:forCharacteristic:type:](http://developer.apple.com/library/mac/#documentation/CoreBluetooth/Reference/CBPeripheral_Class/translated_content/CBPeripheral.html#//apple_ref/occ/instm/CBPeripheral/writeValue%3aforCharacteristic%3atype%3a)

可能吗？

我应该为不同的线程处理每个外围设备吗？

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:26:25.610

您可以为委托设置调度队列。writeValue 正在写入远程外围设备的值。如果您在同一个远程外围设备上进行多次写入，则底层协议层 (ATT) 调用将在框架 (CoreBluetooth) 级别同步。如果您正在写入不同的外围设备，那么每个外围设备都在不同的通信通道上运行。无论哪种方式，都没有线程安全问题。

但是当然，如​​果您的委托从不同的线程访问本地对象，那么如果它们不是线程安全的，您将需要保护这些对象。

# objective-c - iOS 在后台在您的代码中运行计时器

> ID：11652834
> 
> 赞同：1
> 
> 时间：2012-07-25T15:07:05.683
> 
> 标签：objective-c, ios, background, scheduled-tasks, task

所以我在 iOS 中读到过，当您的应用在后台运行时，所有计时器都会暂停。我还读到您可以使用`beginBackgroundTaskWithExpirationHandler`（[像这样](https://stackoverflow.com/a/3942127/143979)）在 bg 中运行任务。

我想要实现的是每 3 分钟调用一次方法，然后在第一个方法之前的固定时间调用另一个方法。我已经设法在一个`NSTimer`重复的方式中做到这一点，让我做到这一点。它工作正常，但当应用程序在后台时显然被禁用（或暂停） - 由于上述原因，我只能假设。

有谁知道是否有办法运行计时器或至少在特定时间后调用某些东西以便我可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:48:23.417

基本上，如果您想继续在后台运行，则必须满足以下要求之一。来自苹果文档：

> **实现长时间运行的后台任务**
> 
> 对于需要更多执行时间来实现的任务，您必须请求特定权限才能在后台运行它们而不会被挂起。在 iOS 中，只允许特定类型的应用程序在后台运行：
> 
> *   在后台向用户播放有声内容的应用程序，例如音乐播放器应用程序
> *   让用户随时了解其位置的应用程序，例如导航应用程序
> *   支持互联网协议语音 (VoIP) 的应用程序
> *   需要下载和处理新内容的报亭应用
> *   从外部配件接收定期更新的应用程序
> 
> 实现这些服务的应用程序必须声明它们支持的服务并使用系统框架来实现这些服务的相关方面。声明服务让系统知道您使用了哪些服务，但在某些情况下，实际上是系统框架阻止了您的应用程序被挂起。

[http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW24](http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW24)

# c# - 解析视频字幕文件的 idx 和 sub 格式？

> ID：11652839
> 
> 赞同：0
> 
> 时间：2012-07-25T15:07:13.930
> 
> 标签：c#, file-format

我用 c# 编写了一个可以很好地读取*srd*文件的应用程序，但是现在我还需要添加对*idx*和*子*文件的支持。如何解析这些格式？

*我将srt*文件解析为此[代码项目：Subtitle Synchronization with C#](http://www.codeproject.com/Articles/32834/Subtitle-Synchronization-with-C)文章所述。我不知道正则表达式，现在想解析*idx*和*子*文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:14:30.180

1.  谷歌的“idx 格式规范”
2.  找到[http://www.filesuffix.com/extension/idx.html](http://www.filesuffix.com/extension/idx.html)
3.  [指向http://en.wikipedia.org/wiki/VSFilter](http://en.wikipedia.org/wiki/VSFilter)的页面链接
4.  Wiki 文章链接到[http://sourceforge.net/projects/guliverkli2/files/DirectShow%20Filters/DirectVobSub%202.39/](http://sourceforge.net/projects/guliverkli2/files/DirectShow%20Filters/DirectVobSub%202.39/)，您可以在其中下载源代码。在源代码中，您很可能会找到有关读取 idx/sub 文件的信息。

# c++ - OpenMP 和 C++ 并行 for 循环：为什么我的代码在使用 OpenMP 时会变慢？

> ID：11652840
> 
> 赞同：4
> 
> 时间：2012-07-25T15:07:20.497
> 
> 标签：c++, performance, parallel-processing, openmp

我有一个关于使用 OpenMP（使用 C++）的简单问题，希望有人能帮助我。我在下面提供了一个小示例来说明我的问题。

```
#include<iostream>
#include<vector>
#include<ctime>
#include<omp.h>

using namespace std;

int main(){
  srand(time(NULL));//Seed random number generator                                                                               

  vector<int>v;//Create vector to hold random numbers in interval [0,9]                                                                                   
  vector<int>d(10,0);//Vector to hold counts of each integer initialized to 0                                                                    

  for(int i=0;i<1e9;++i)
    v.push_back(rand()%10);//Push back random numbers [0,9]                                                                      

  clock_t c=clock();

  #pragma omp parallel for
  for(int i=0;i<v.size();++i)
    d[v[i]]+=1;//Count number stored at v[i]                                                                                     

  cout<<"Seconds: "<<(clock()-c)/CLOCKS_PER_SEC<<endl;

  for(vector<int>::iterator i=d.begin();i!=d.end();++i)
  cout<<*i<<endl;

  return 0;
} 
```

上面的代码创建了一个向量`v`，其中包含 10 亿个随机整数 range `[0,9]`。然后，代码循环`v`计算每个不同整数有多少个实例（即，在**v**中找到多少个，有多少个二等）

每次遇到特定整数时，都会通过增加 vector 的适当元素来对其进行计数`d`。所以，`d[0]`计算有多少个零，`d[6]`有多少个六，等等。到目前为止有意义吗？

我的问题是当我尝试使计数循环并行时。没有该`#pragma OpenMP`语句，我的代码需要20**秒**，而使用**60 多**秒。`pragma`

 **显然，我误解了一些与 OpenMP 相关的概念（也许数据是如何共享/访问的？）。有人可以解释我的错误，或者用适当的关键字为我指明一些有见地的文献的方向来帮助我的搜索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T17:39:29.367

您的代码显示：

*   由于对共享变量的非同步访问而导致的竞争条件
*   false 和 true 共享缓存问题
*   错误的运行时间测量

竞争条件的出现是因为您`d`在多个线程中同时更新 vector 的相同元素。注释掉该`srand()`行并使用相同数量的线程（但使用多个线程）多次运行您的代码。比较不同运行的输出。

当两个线程写入彼此靠近的内存位置以导致在同一高速缓存行上时，就会发生错误共享。这导致缓存线在多插槽系统中不断地从内核跳到内核或 CPU 到 CPU，并导致缓存一致性消息过多。每个缓存行 32 个字节，向量的 8 个元素可以放在一个缓存行中。每个缓存行有 64 个字节，整个向量`d`适合一个缓存行。这使得代码在 Core 2 处理器上变慢，而在 Nehalem 和 post-Nehalem（例如 Sandy Bridge）处理器上稍慢（但不如 Core 2 慢）。真正的共享发生在两个或多个线程同时访问的那些元素上。您应该将增量放在 OpenMP`atomic`构造中（慢），使用 OpenMP 锁数组来保护对`d`（更快或更慢，取决于您的 OpenMP 运行时）或累积本地值，然后执行最终同步归约（最快）。第一个是这样实现的：

```
#pragma omp parallel for
for(int i=0;i<v.size();++i)
  #pragma omp atomic
  d[v[i]]+=1;//Count number stored at v[i] 
```

第二个是这样实现的：

```
omp_lock_t locks[10];
for (int i = 0; i < 10; i++)
  omp_init_lock(&locks[i]);

#pragma omp parallel for
for(int i=0;i<v.size();++i)
{
  int vv = v[i];
  omp_set_lock(&locks[vv]);
  d[vv]+=1;//Count number stored at v[i]
  omp_unset_lock(&locks[vv]);
}

for (int i = 0; i < 10; i++)
  omp_destroy_lock(&locks[i]); 
```

（包括`omp.h`访问`omp_*`功能）

我让你来想出第三个选项的实现。

您正在使用测量经过的时间，`clock()`但**它测量的是 CPU 时间，而不是运行时间。**如果您有一个线程以 100% 的 CPU 使用率运行 1 秒，则`clock()`表明 CPU 时间增加了 1 秒。如果您有 8 个线程以 100% CPU 使用率运行 1 秒，`clock()`则表明 CPU 时间为 8 秒（即每个线程 8 个线程乘以 1 个 CPU 秒）。改用`omp_get_wtime()`or `gettimeofday()`（或其他一些高分辨率计时器 API）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:57:32.350

**编辑** 一旦通过正确的同步解决了您的竞争条件，则适用以下段落，在此之前，您的数据竞争条件不幸地使速度比较静音：

您的程序正在变慢，因为您在 pragma 部分有 10 个可能的输出，这些输出是随机访问的。因此，OpenMP 无法在没有锁定（您需要通过同步提供）的情况下访问任何这些元素，并且锁定将导致您的线程具有比并行计数更高的开销。

加快此速度的一种解决方案是为每个 OpenMP 线程创建一个局部变量，该变量计算特定线程看到的所有 0-10 值。然后将它们加到主计数向量中。这将很容易并行化并且速度更快，因为线程不需要锁定共享写入向量。我希望接近 Nx 的加速，其中 N 是来自 OpenMP 的线程数，因为应该需要非常有限的锁定。此解决方案还避免了当前代码中的许多竞争条件。

有关线程本地 OpenMP 的更多详细信息，请参阅[http://software.intel.com/en-us/articles/use-thread-local-storage-to-reduce-synchronization/](http://software.intel.com/en-us/articles/use-thread-local-storage-to-reduce-synchronization/)**

# php - ImageMagick 等价于 Box-shadow CSS 属性

> ID：11652841
> 
> 赞同：2
> 
> 时间：2012-07-25T15:07:26.773
> 
> 标签：php, css, imagemagick

我想为图像模仿 ImageMagick 中的 box-shadow CSS 属性。我希望它的行为完全相同。是否有任何功能或等效映射？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:14:34.380

```
<?php
  /* Read the image into the object */
  $im = new Imagick( 'a.jpg' );
  $im->setImageFormat("png");

  /* Make the image a little smaller, maintain aspect ratio */
  $im->thumbnailImage( 200, null );

  /* Clone the current object */
  $shadow = $im->clone();

  /* Set image background color to black (this is the color of the shadow) */
  $shadow->setImageBackgroundColor( new ImagickPixel( 'black' ) );

  /* Create the shadow */
  $shadow->shadowImage( 80, 3, 5, 5 );

  /* Imagick::shadowImage only creates the shadow. That is why the original image is composited over it */
  $shadow->compositeImage( $im, Imagick::COMPOSITE_OVER, 0, 0 );

 /* Display the image */
 header( "Content-Type: image/jpeg" );
 echo $shadow;
?> 
```

[你也可以看到 bash 脚本的 imagemagick](http://blog.bemoko.com/2009/07/01/add-shadow-and-border-to-images-with-imagemagick/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:13:05.753

我认为您正在寻找的是[Imagick::shadowImage](http://www.php.net/manual/en/imagick.shadowimage.php)（CLI 的-shadow 开关）

# .net - Team Foundation Server 事件所有集合

> ID：11652842
> 
> 赞同：0
> 
> 时间：2012-07-25T15:07:28.067
> 
> 标签：.net, wcf, events, tfs, workitem

我正在尝试将 Team Foundation Server 与 BizTalk 连接。

BizTalk 应该在工作项更改时执行某些操作。为了做到这一点，我需要制作一个 WCF 来监听来自 TFS 服务器的事件警报。

我的问题是订阅功能只听一个 TFS 项目集合。该公司有很多项目集合。

如何制作 WCF，以便它监听来自所有项目集合的事件警报？是否有中央事件管理器或类似的东西？

先感谢您。

阿比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:20:31.067

试试这个论坛，他了解如何订阅 tfs 通知

[http://www.ewaldhofman.nl/post/2010/08/02/How-to-use-WCF-to-subscribe-to-the-TFS-2010-Event-Service-rolling-up-hours.aspx](http://www.ewaldhofman.nl/post/2010/08/02/How-to-use-WCF-to-subscribe-to-the-TFS-2010-Event-Service-rolling-up-hours.aspx)

# javascript - Windows 8 Metro 和 HLS/MPEG-DASH

> ID：11652843
> 
> 赞同：3
> 
> 时间：2012-07-25T15:07:31.887
> 
> 标签：javascript, video-streaming, windows-8, microsoft-metro, http-live-streaming

有谁知道基于 Windows 8 Metro JavaScript 的应用程序支持的流格式是什么？

他们会坚持使用 Microsoft Smooth Streaming，还是会朝着 HLS 和/或 MPEG-DASH 迈进？

BR 斯坦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:18:18.543

以下是 Metro 应用程序支持的格式列表：

[![支持的音频和视频格式 Windows 运行时应用 - Windows 应用开发](../Images/0487e5e0ed685b0ef1c5f89da03389d7.png)](https://i.stack.imgur.com/0uAsK.png)

资料来源：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh986969.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh986969.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:21:05.983

你去：

![在此处输入图像描述](../Images/0e5dfe5546b9cda56d9983639d160673.png)

希望这可以帮助。

至于您的评论，您应该检查这些链接。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa965244(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965244(v=vs.85).aspx)

[http://social.msdn.microsoft.com/Forums/en-GB/winappswithcsharp/thread/2a17f46a-4ff4-40dd-a6b5-92480c9d2293](http://social.msdn.microsoft.com/Forums/en-GB/winappswithcsharp/thread/2a17f46a-4ff4-40dd-a6b5-92480c9d2293)

[http://social.msdn.microsoft.com/Forums/en-SG/winappswithcsharp/thread/ba82f293-c245-4198-9a8e-316bf78413c3](http://social.msdn.microsoft.com/Forums/en-SG/winappswithcsharp/thread/ba82f293-c245-4198-9a8e-316bf78413c3)

# jquery - Twitter API 的变化？推文用户列表停止工作

> ID：11652844
> 
> 赞同：2
> 
> 时间：2012-07-25T15:07:40.393
> 
> 标签：jquery, twitter

我有以下代码用于显示来自选定用户的推文列表。今天它停止在此处显示用户列表的推文，并显示来自任何用户推文的推文，其中包括我在参数中设置的查询。是否有我不知道的 Twitter API 更新？

```
jQuery(function ($) {
    $(".tweet").tweet({
        username: ['user1', 'user2', 'user3'],
        page: 1,
        avatar_size: 32,
        count: 9000,
        query: "@mysearchterm OR #mysearchterm",
        loading_text: "loading ..."
    }).bind("loaded", function () {
        var ul = $(this).find(".tweet_list");
        var ticker = function () {
            setTimeout(function () {
                ul.find('li:first').fadeIn("fast").animate({
                    marginTop: '70px'
                }, 500, function () {
                    $(this).detach().hide().appendTo(ul).fadeIn("fast").removeAttr('style');
                });
                ticker();
            }, 5500);
        };
        ticker();
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T22:40:46.177

既不可信也不官方，但因为你根本没有答案......
我假设你正在使用来自 seaofclouds 的插件 jquery.tweet.js （[tweet.seaofclouds.com/](http://tweet.seaofclouds.com/)或[https://github.com/seaofclouds/tweet](https://github.com/seaofclouds/tweet)）。
由于一个非常古老的提交（2010 年 2 月 6 日），如果您设置查询选项，则用户名选项将被忽略（请参阅 jquery.tweet.js 中的函数[build_api_url](https://github.com/seaofclouds/tweet/blob/master/tweet/jquery.tweet.js#L145)）。要执行您想要的操作，您需要将用户附加到查询字符串，例如

```
query: "@mysearchterm OR #mysearchterm OR from:user1 OR from:user2 OR from:user3" 
```

请参阅此[JSFiddle](http://jsfiddle.net/aalmeida/pDz5P/2/)。

# c# - MVC.NET C#：获取 JSON http 请求发出的空值？

> ID：11652847
> 
> 赞同：1
> 
> 时间：2012-07-25T15:07:46.847
> 
> 标签：c#, json, asp.net-mvc-3, extjs4

我有一个 WebService，它需要通过 Json 定义类型的列表。

班级：

```
public class myType
{
    public int id { get; set;}
    public int? varA { get; set;}
    public string varB { get; set;}
    public float? varC { get; set;}
} 
```

逻辑：

```
//Passed JSON --> Data:{'id':'1','varA':''}
[HttpPost]
public JsonResult Update(myType Data)
{
    //Data ends up with value's id = 1; varA = null; varB = null; varC = null;
    //So how can I find that valueA was actually passed with a null value, and all the 
    //others are just nulling by default?
    if (Data.varA.HasValue) dbItem.varA = Data.varA
    ...
} 
```

让我们假设 myType 有几个值，例如 {id, varA, varB, varC} 除了 id 之外的所有值都可以为空。

现在，我故意只想清空 1 个值

`Data:{'id':'1','valueA':''}`问题是，为了节省带宽，我只发送 id，以及 JSON 中已更新的任何值，例如`id`：对象的所有其他变量的空值。

那么，我该怎么做才能知道哪些发出的变量是通过 json 发送到 webmethod 的呢？所以我可以分辨出我真正想要为空的变量是什么？

更多信息：使用 ExtJS 4 作为前端。这个问题与 Ext.Store 的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:18:47.597

MVC 尝试根据名称解析您发送给它的值（通过正常的反序列化）。因此，如果您不指定该值，它将按预期发送 null，因为您具有可为空的属性。为什么不在 valueA 中传递实际值，例如 -1。如果您不为可空属性指定值，它们将为空...

# java - 空休眠析取的条件检查

> ID：11652855
> 
> 赞同：1
> 
> 时间：2012-07-25T15:08:00.937
> 
> 标签：java, hibernate

有人知道如何对空析取进行条件检查吗？

> Disjunction dis = Restrictions.disjunction();
> 
> 如果（dis）{
> 
> }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:13:52.697

你可以试试：

```
if(dis == null || dis.getTypedValues().length == 0) 
```

# xml - 在 Indesign 中解析 XML

> ID：11652856
> 
> 赞同：0
> 
> 时间：2012-07-25T15:08:02.180
> 
> 标签：xml, adobe-indesign

我有以下 XML 文件内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<dataroot xmlns:od="urn:schemas-microsoft-com:officedata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:noNamespaceSchemaLocation="Vini.xsd" generated="2012-07-24T17:35:00">
<Vini>
<ID>1</ID>
<Provincia>BG</Provincia>
<Produttore>ANGELO PECIS</Produttore>
<Nome>VALCALEPIO MOSCATO PASSITO ARGO</Nome>
</Vini>
<Vini>
<ID>2</ID>
<Provincia>BG</Provincia>
<Produttore>ANGELO PECIS</Produttore>
<Nome>VALCALEPIO ROSSO RISERVA ROSSO DELLA PEZIA</Nome>
</Vini>
...
<dataroot> 
```

当我试图解析 XML

```
...
var xmlStr = new XML ( fileContents);
var str = xmlStr.xpath("//Vini");
len = str.length() 
```

Vinis (len) 的数量为 0。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:47:52.147

xpath 表达式看起来不错。我也在这里做了一个结论性的测试。问题是，你确定你的 xml 实例化得很好吗？

我会查看文件内容对象，然后查看 XML 对象本身。也许两者之一未能初始化。我不知道上下文，但如果您使用 ExtendScript ToolKit，它会在大 xml 文件上失败并且无法加载 XML 对象。

如果是这样，请尝试使用较小的 XML 块，看看它是否更好。

# geolocation - 地理位置计算：计算点是否在半径内

> ID：11652857
> 
> 赞同：4
> 
> 时间：2012-07-25T15:08:07.223
> 
> 标签：geolocation

好的，问题来了：我想向我的用户展示他附近最近的地理点。

我有大约 55.000 个可以显示的固定地理点。（我有所有的长/纬度）取决于用户位置（长/纬度）我想显示最近的 20 个地理点。

所以当然我可以计算所有 55.000 个地理点，看看在用户 lang/lat 的某个半径内是否有 20 个，然后对它们进行排名，但这在某种程度上是计算总是 55tsd 地理点的开销。

是否有可能将 5 英里/公里范围“添加”到用户的经纬度，并仅计算该半径内的距离？

我希望你明白我的意思。:) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T13:16:10.447

如果计算所有点之间的距离需要太多时间，您可以仅通过纬度/经度（source_lat - target_lat）（source_lon - target_lon）之间的简单差异来缩小可能的点，并只取最近的点来计算距离。您可以使用公式来计算距离。

```
D = 60* 1.1515 * acos (sin(pi*y/180) * sin(pi*Y/180) +
                   cos(pi*y/180) * cos(pi*Y/180) * cos((z-Z) *pi / 180) 
                     )  * 180 / pi) 
```

但是计算效率也取决于使用的数据库技术。

# java - 检测linux机器上运行的java程序

> ID：11652859
> 
> 赞同：1
> 
> 时间：2012-07-25T15:08:12.603
> 
> 标签：java, linux

好的，所以我有几个 Java 程序正在使用 linux 服务器上的 chron 作业运行。这些作业每十分钟左右运行一次，实际上需要两分钟才能运行，然后退出。我需要为程序添加一种方法来检测，当它们启动时，是否已经有一个自己在运行的实例，如果是，则退出而不进行任何进一步的操作。我真的不确定处理这个问题的最佳方法，希望有人能提供一些建议。

我考虑过的一种方法是从执行某种 PS 命令的 java 代码中运行命令行参数，并查看它们是否正在运行。尽管对于这么小的东西来说，这似乎非常挑剔和复杂。另外，我对 linux 的了解并不多，甚至不确定最好的方法。如果有人有更好的想法，请告诉我。或者，如果这是最好的方法，如果你能提供我需要的 linux 命令，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:14:46.033

如果你有一个可写的 /tmp 目录，你可以使用一个锁文件。

当您的Java 程序启动时，在/tmp 目录中检查一个名称对您的应用程序唯一的文件（例如“my-lock-file.lock”）。如果不存在，请创建一个，并在完成后将其删除。如果存在，就退出。

您可以使用 java.io.File 类的 .exists() 方法检查文件是否存在。

如果您的代码需要可移植，您可以使用`System.getProperty("java.io.tmpdir"));`为您的代码运行的平台获取适当的临时目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:14:45.877

您可以查看 JMX 和 Attach API 来查询正在运行的 JVM。

或者，正如 Andrew logvinov 提到的，通过使用锁定文件。

如果您使用的是 Java WebStart，则已经有对此的本机支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:16:39.953

许多程序通过创建一个指向其 PID 的临时文件（通常称为**“锁定”文件**）来解决这个问题。文件名应该对所有相关信息进行编码，以将此进程与可以合法并行运行的其他进程区分开来。

例如，如果进程绑定到一个用户，它应该包含用户名。如果进程绑定到一台机器，它应该（也）包含主机名（如果你把它放在机器绑定的临时目录中，这是有争议的。如果你把它放在主目录中，考虑多台机器的情况通过 NFS 共享家庭）。

这些文件的位置通常是 /tmp。这是一个很好的位置，因为 /tmp 通常在系统启动期间被擦除，因此在系统崩溃的情况下不会留下孤立文件。一些程序采用的另一种解决方案是将锁定文件放在用户设置目录中，如果它与设置相关。例如，Mozilla 雷鸟有一个名为`/home/<username>/.thunderbird/<profilename>.default/lock`.

该文件应包含进程的 PID。这个想法很简单：如果文件包含 PID，则很容易检查该进程是否确实仍在运行。因此，如果进程崩溃，文件就会成为孤立文件。新的流程实例将检查文件中的 PID，发现它不再运行，然后忽略该文件（覆盖）。

把它们放在一起，你可以创建一个像这样的文件：

```
/tmp/myawesomeservice-username-hostname-lock 
```

随着内容：

```
12345 
```

# java - Java：确保 Web 应用程序仅在一个浏览器选项卡中打开

> ID：11652861
> 
> 赞同：4
> 
> 时间：2012-07-25T15:08:20.667
> 
> 标签：java, session, servlets, servlet-filters

确保特定页面（假设是单页 Web 应用程序）仅在一个浏览器选项卡中打开的最佳方法是什么？

假设 Java Web 应用程序具有身份验证，即用户必须登录（因此我们可以通过 Java Session API 识别哪个用户正在查看哪个页面）。

目的是，如果为同一 URL 打开另一个选项卡，用户将被重定向到一个静态页面，告诉他他在其他地方打开了应用程序（另一个选项卡）。

我当前的方法不适用于同一浏览器中的选项卡，因为`JSESSIONID`它存储在 cookie 中，可用于所有浏览器的选项卡。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T00:24:49.573

我假设您当前的用例是这样的：

1.  用户打开浏览器选项卡，加载您的应用程序页面并登录。

然后用户打开第二个浏览器选项卡，加载您的应用程序页面并已登录（因为浏览器对所有选项卡或窗口都有相同的会话 cookie）。

并且您想限制用户，以便当他们加载第二个选项卡时，会看到一条警告消息：您已在其他地方登录此站点，请使用该窗口，或者如果您不再打开该窗口，请单击在这里注销并重新登录。

大多数解决方案将涉及为应用程序实例与会话一起保留一次性令牌。如果您的应用程序在单个页面中加载并向用户显示登录框，那么当用户登录时，您可以发送一次性令牌，将其存储在 javascript 变量中并与所有服务器请求一起发送。如果用户随后在新选项卡中加载应用程序，他们会请求他们的初始数据，并且服务器可以生成一个响应，说明令牌不存在并且他们需要注销、关闭窗口或切换到已经登录的窗口。

所以答案基本上是你想在服务器上的会话中存储一个随机字符串，在登录时将其提供给用户，并检查每个请求是否都有它，否则会将它们反弹到注销页面。在 Web 客户端的 javascript 中，存储该令牌并将其与每个请求一起发送到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:14:13.650

您可以创建对后端的异步调用（关键字：长时间轮询）并通过它发送单个字节以使其保持活动状态。只要它还活着，标签就会打开。如果有第二个电话打进来，您可以对此进行测试。

# c# - Ninject 和 ASP.NET Web API

> ID：11652862
> 
> 赞同：11
> 
> 时间：2012-07-25T15:08:29.627
> 
> 标签：c#, asp.net-mvc, ninject

在我设置问题之前，您应该知道我从这个页面获得了我当前的代码：http: [//www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api -资源/](http://www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api-source/)

我正在尝试通过使用上面网站上的 IDependencyResolver 适配器在我的应用程序中使用 ASP.NET Web API 和 Ninject。

我创建了所有代码，就像它在网站上显示的那样，它可以工作，但是当我加载我的应用程序时，我的常规控制器失败并显示此错误：

`[MissingMethodException: No parameterless constructor defined for this object.]`
`[InvalidOperationException: An error occurred when trying to create a controller of type 'AccountManager.Controllers.HomeController'...`

因此，似乎我可以将 Ninject 与常规控制器或 Web API 控制器一起使用，但不能同时使用两者。:(

这是我的代码：

**NinjectResolver.cs**

```
public class NinjectResolver : NinjectScope, IDependencyResolver
{
    private IKernel _kernel;

    public NinjectResolver(IKernel kernel)
        : base(kernel)
    {
        _kernel = kernel;
    }

    public IDependencyScope BeginScope()
    {
        return new NinjectScope(_kernel.BeginBlock());
    }
} 
```

**NinjectScope.cs**

```
public class NinjectScope : IDependencyScope
{
    protected IResolutionRoot resolutionRoot;

    public NinjectScope(IResolutionRoot kernel)
    {
        resolutionRoot = kernel;
    }

    public object GetService(Type serviceType)
    {
        IRequest request = resolutionRoot.CreateRequest(serviceType, null, new Parameter[0], true, true);
        return resolutionRoot.Resolve(request).SingleOrDefault();
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        IRequest request = resolutionRoot.CreateRequest(serviceType, null, new Parameter[0], true, true);
        return resolutionRoot.Resolve(request).ToList();
    }

    public void Dispose()
    {
        IDisposable disposable = (IDisposable)resolutionRoot;
        if (disposable != null) disposable.Dispose();
        resolutionRoot = null;
    }
} 
```

**全球.asax.cs**

```
public class MvcApplication : System.Web.HttpApplication
{
    private void SetupDependencyInjection()
    {
        //create Ninject DI Kernel
        IKernel kernel = new StandardKernel();

        //register services with Ninject DI container
        RegisterServices(kernel);

        //tell asp.net mvc to use our Ninject DI Container
        GlobalConfiguration.Configuration.DependencyResolver = new NinjectResolver(kernel);
    }
} 
```

**会计控制器.cs**

```
public class AccountingController : ApiController
{
    private ICustomerService _customerService;

    public AccountingController(ICustomerService service)
    {
        _customerService = service;
    }

    // GET /api/<controller>/5
    public string Get(int id)
    {
        return "value";
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-01T16:04:36.790

`CreateKernel()`在调用 之前将以下代码行插入到方法`RegisterServices(kernel);`中。

```
GlobalConfiguration.Configuration.DependencyResolver = new NinjectResolver(kernel); 
```

您还需要使用下面的代码，我更喜欢在同一个类中定义它。

```
public class NinjectResolver : NinjectScope, IDependencyResolver
{
    private IKernel _kernel;
    public NinjectResolver(IKernel kernel)  : base(kernel)
    {
        _kernel = kernel;
    }
    public IDependencyScope BeginScope()
    {
        return new NinjectScope(_kernel.BeginBlock());
    }
}

public class NinjectScope : IDependencyScope
{
    protected IResolutionRoot resolutionRoot;
    public NinjectScope(IResolutionRoot kernel)
    {
        resolutionRoot = kernel;
    }
    public object GetService(Type serviceType)
    {
        IRequest request = resolutionRoot.CreateRequest(serviceType, null, new Parameter[0], true, true);
        return resolutionRoot.Resolve(request).SingleOrDefault();
    }
    public IEnumerable<object> GetServices(Type serviceType)
    {
        IRequest request = resolutionRoot.CreateRequest(serviceType, null, new Parameter[0], true, true);
        return resolutionRoot.Resolve(request).ToList();
    }
    public void Dispose()
    {
        IDisposable disposable = (IDisposable)resolutionRoot;
        if (disposable != null) disposable.Dispose();
        resolutionRoot = null;
    }
} 
```

运行它，它应该可以工作。这对我有用，我希望它也对你有用。

**延伸阅读：**

[使用 Ninject – 使用 ASP.NET Web API 控制器进行依赖注入](http://yassershaikh.com/using-ninject-dependency-injection-with-asp-net-web-api-controllers/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T13:43:55.843

我有一个 Web API 项目，它使用与你在 strathweb 中完全相同的解决方案工作，所以我只是在项目中添加了一个普通控制器，它确实可以工作。它本身对你没有很大的帮助，所以我将详细说明我的设置：

我安装了以下软件包（在 IOC 方面）：

*   忍者 3.0.1.10
*   Ninject MVC 3.0.0.6
*   Ninject.Web.Common 3.0.0.7
*   网络激活器 1.5.1

我的 Global.asax.cs 文件中没有关于 Ninject 的任何内容，而是使用安装 Ninject 时在 App_Start 中自动创建的 NinjectWebCommon.cs 文件。我不知道你的全局文件中有代码是否意味着 Ninject 没有在你的项目中正确设置自己？

这是 NinjectWebCommon.cs 中的代码：

```
 public static class NinjectWebCommon 
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);

        GlobalConfiguration.Configuration.DependencyResolver = new NinjectResolver(kernel);

        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IUserRepository>().To<UserRepository>().InSingletonScope();
        kernel.Bind<IUserManager>().To<UserManager>();
    }        
} 
```

这是我可以在我们的代码之间看到的另一个区别，我在其中创建内核，我的代码声明了到内核的两个绑定。

这是我的测试控制器的代码，我可以在构造函数中设置断点并得到它：

```
public class TestController : Controller
{
    IUserManager _userManager;

    public TestController(IUserManager userManager)
    {
        _userManager = userManager;
    }

    //
    // GET: /Test/
    public ActionResult Index()
    {
        return View();
    }
} 
```

这适用于我的控制器和我的 APIControllers。

# c# - 使用 c# 窗口服务根据日期时间参数计算来工作服务

> ID：11652863
> 
> 赞同：1
> 
> 时间：2012-07-25T15:08:30.350
> 
> 标签：c#, windows-services

下面是我在当前窗口服务解决方案中使用的粘贴代码，这将每天上午 10 点定期运行作业，我将使用 App.configuaration 文件传递​​参数

应用程序配置

```
<add key ="FIREHOST_TIME" value ="10" ></add>
<add key ="SETDAYS" value ="1" ></add> 
```

代码隐藏页面

```
protected override void OnStart(string[] args)
{

     DateTime tenAM = DateTime.Today.AddHours(FIREHOST_TIME);

      if (DateTime.Now > tenAM)
          tenAM = tenAM.AddDays(SETDAYS);

      // calculate milliseconds until the next 10:00 AM.  
      int timeToFirstExecution = (int)tenAM.Subtract(DateTime.Now).TotalMilliseconds;

      // calculate the number of milliseconds in 24 hours.   
      int timeBetweenCalls = (int)new TimeSpan(24, 0, 0).TotalMilliseconds;

      TimerCallback methodToExecute = kickstart;

      // start the timer.  The timer will execute "ProcessFile" when the number of seconds between now and   
      // the next 10:00 AM elapse.  After that, it will execute every 24 hours.   
      System.Threading.Timer timer = new System.Threading.Timer(methodToExecute, null, timeToFirstExecution, timeBetweenCalls);

} 
```

现在我正在尝试根据以下提到的条件运行我的服务：

我想启动我的服务，但它应该根据我将在 app.config 中新添加的这个新标签来执行工作

```
BY based on above four tags

if RUN_NOW == 1

    has to perform service based on FIREHOST_TIME and SETDAYS normal thing

else 

    service have to perform the Job doing by after 5 days(because WAIT_DAYS = 5) 
    then it have to use the FIREHOST_TIME and SETDAYS value 
```

注意：服务不应该停止，它应该只处于启动状态

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:40:12.097

我不确切知道您希望如何实现整个程序逻辑，我可以尝试帮助您的部分是关于在不重新启动服务的情况下对配置文件修改做出反应，这可以通过以下方式完成：

```
ConfigurationManager.RefreshSection("thesectiontorefresh"); 
```

为了更好的工作，您可以使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)来调用它，以侦听修改 app.config 文件的人，并在调用刷新后做出正确反应，如上所示。您可以通过以下方式获取配置文件路径：

```
AppDomain.CurrentDomain.SetupInformation.ConfigurationFile 
```

作为一般信息，请考虑通过使用系统计划任务而不是编写自己的服务来重新设计解决问题的方式。

# asp.net - 为什么会有一个带有 google.com 引荐来源的 POST 请求？

> ID：11652867
> 
> 赞同：0
> 
> 时间：2012-07-25T15:08:44.677
> 
> 标签：asp.net, security

我注意到我的 ASP.NET Web 应用程序有时会收到 REFERER 是 google.com URL 的 POST 请求。这怎么可能？这是某种黑客攻击吗？

以下是一些更有趣的 HTTP 值（我已将我的真实站点替换为“example.com”）：

```
HTTP_REFERER = http://www.google.com/gwt/x/e?wsc=bf&wsi=d9f494c200f04c82&u=http%3A%2F%2Fwww.example.com&ei=65oLUNikApHoxAKykMHqBA&whp=1view_unadapted%3B2http%3A%2F%2Fwww.mysite.com     
REQUEST_METHOD = POST     
HTTP_COOKIE = ASP.NET_SessionId=eakdubyv3bfj33l0adtyhamc 
HTTP_USER_AGENT = KWC-Buckle/ABO1107 UP.Browser/7.2.7.2.551 (GUI) MMP/2.0     
CONTENT_LENGTH = 195 
CONTENT_TYPE = application/x-www-form-urlencoded 
SCRIPT_NAME = /cgi/webloginscript.aspx 
SERVER_PORT = 443 
SERVER_PORT_SECURE = 1 
HTTP_X_WAP_PROFILE = "mms.mycricket.com" 
HTTPS = on 
```

**编辑：**当我使用“wget”测试引荐来源网址时，我看到谷歌以 302 重定向响应[http://www.example.com](http://www.example.com)。那么移动浏览器是否正在执行重定向但没有将引用者重置为[http://www.example.com](http://www.example.com)？那么当用户填写表单并尝试提交时，referer 还是 google.com？有问题的手机浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:12:24.320

赠品是用户代理。

有人在移动设备上点击搜索结果，而谷歌正在呈现您页面的移动友好版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:13:13.940

通常网络爬虫会先注册 HEAD 类型的 http 请求。这看起来像是点击搜索结果后的 Google 重定向链接，但不知道为什么它是 POST 与 GET。我注意到用户代理似乎是 Cricket（无线运营商）上的移动浏览器，因此它可能是内置的搜索和重定向，它们内置在他们的操作系统中。

# ios - MKMapView - 如何加载所有默认 Apple 注释

> ID：11652869
> 
> 赞同：0
> 
> 时间：2012-07-25T15:08:53.777
> 
> 标签：ios, map, mkmapview

我正在开发一个将使用地图的应用程序。我想知道如何加载已经出现在默认 Apple 地图应用程序上的所有 POI？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:58:59.680

MapKit 中至少没有内置功能。您必须使用 Google 的网络服务来获取这些 POI（例如 Places API）。您应该看看[Google Places API 网络服务](https://developers.google.com/places/documentation/?hl=en)！

我不确定为什么您的问题被否决，我想您需要在发布任何问题之前进行一些自我研究。很多时候，有人问过类似的问题。你只需要看看。

希望这可以帮助。

# c# - CF 3.5 C#中的套接字连接

> ID：11652872
> 
> 赞同：0
> 
> 时间：2012-07-25T15:09:11.017
> 
> 标签：c#, sockets, compact-framework, windows-ce

我正在尝试在手持设备和 PC 之间建立通信。

*对于客户端*，我有以下代码：

```
 public void connect(string IPAddress, int port)
    {
                // Connect to a remote device.
        try
        {
           IPAddress ipAddress = new IPAddress(new byte[] { 192, 168, 1, 10 });
           IPEndPoint remoteEP = new IPEndPoint(ipAddress, port);
           // Create a TCP/IP socket.
           client = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
           // Connect to the remote endpoint.
           client.BeginConnect(remoteEP, new AsyncCallback(ConnectCallback), client);
           if (connectDone.WaitOne()){
                 //do something..
           }
           else{
                 MessageBox.Show("TIMEOUT on WaitOne");
           }
        }
        catch(Exception e){
                 MessageBox.Show(e.Message);
        }
      } 
```

我的问题是，当我在 PC 上运行它们时，它们可以正常通信，但是 SmartDevice 项目中的相同代码无法连接到 PC 上运行的服务器，这给了我这个错误：

```
System.Net.Sockets.SocketException: A connection attempt failed because the connected party did not properly respond after a period of time, or stablished connection failed 
because connected host has failed to respond 
```

我错过了什么？

注意：IPAddress 是硬编码在代码中的

* * *

**编辑**： 这是我[从 MSDN 示例](http://msdn.microsoft.com/en-us/library/bb397809.aspx)中获取的另一个代码。这也不起作用，它说它无法阅读。本例的服务端代码与示例相同，客户端代码有一个修改：

```
private void button1_Click(object sender, EventArgs e)
{
    // In this code example, use a hard-coded
    // IP address and message.
    string serverIP = "192.168.1.10";//HERE IS THE DIFERENCE
    string message = "Hello";
    Connect(serverIP, message);
} 
```

* * *

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:42:49.460

对于我的“移动设备”客户端，我使用以下命令将数据发送到“PC”主机：

```
private void Send(string value) {
  byte[] data = Encoding.ASCII.GetBytes(value);
  try {
    using (TcpClient client = new TcpClient(txtIPAddress.Text, 8000)) {
      NetworkStream stream = client.GetStream();
      stream.Write(data, 0, data.Length);
    }
  } catch (Exception err) {
    // Log the error
  }
} 
```

对于主机，您最好使用线程或[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)，您可以让[TcpListener](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)对象坐下来等待：

```
private void Worker_TcpListener(object sender, DoWorkEventArgs e) {
  BackgroundWorker worker = (BackgroundWorker)sender;
  do {
    string eMsg = null;
    int port = 8000;
    try {
      _listener = new TcpListener(IPAddress.Any, port);
      _listener.Start();
      TcpClient client = _listener.AcceptTcpClient(); // waits until data is avaiable
      int MAX = client.ReceiveBufferSize;
      NetworkStream stream = client.GetStream();
      Byte[] buffer = new Byte[MAX];
      int len = stream.Read(buffer, 0, MAX);
      if (0 < len) {
        string data = Encoding.UTF8.GetString(buffer);
        worker.ReportProgress(len, data.Substring(0, len));
      }
      stream.Close();
      client.Close();
    } catch (Exception err) {
      // Log your error
    }
    if (!String.IsNullOrEmpty(eMsg)) {
      worker.ReportProgress(0, eMsg);
    }
  } while (!worker.CancellationPending);
} 
```

# sql - 在 Excel 宏中运行 SQL 脚本

> ID：11652877
> 
> 赞同：0
> 
> 时间：2012-07-25T15:09:26.223
> 
> 标签：sql, excel, vba

我对 Excel 中的宏以及如何使用它们有疑问。我最近创建了一个 SQL 查询，它将访问多个 TFS 数据库以提取数据。我只是想从 excel 运行这个脚本，这样脚本的输出就会自动在 excel 中发布，并带有各个列标题。我以前在 excel 中通过使用 VB 宏看到过此操作。

作为一种解决方法，我创建了一个小 bat 文件来运行 sqlcmd，检查包含脚本的 sql 文件，最后将输出推送到 csv 文件。唯一的问题是 CSV 的输出将结果推送到单行中，并且没有将它们与标题分开。

batfile 的当前代码：

`sqlcmd -E -S TFSServer\TFS2010 -i C:\test\testquery.sql -o C:\test\test.csv`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:18:52.653

为什么不使用 ssis 包或 ssrs 报告进行数据提取？宏是如此......上个世纪。

如果你坚持使用宏，这里有一个例子：

```
Dim con As ADODB.Connection, _
cmd As ADODB.Command, _
rs As ADODB.Recordset, _
strSQL As String, _
i As Integer

strSQL = "EXEC SP_StoredProcedureToGetData"

Set con = New ADODB.Connection
con.Open "Provider=SQLOLEDB;Data Source=SQLSERVER;" & _
    "Initial Catalog=DATABASE;User ID=USERNAME;Password=PASSWORD"

Set cmd = New ADODB.Command
With cmd
    .ActiveConnection = con
    .CommandText = strSQL
    .CommandType = adCmdStoredProc
End With

Set rs = New ADODB.Recordset
With rs
    .CursorLocation = adUseClient
    .CursorType = adOpenKeyset
    .LockType = adLockBatchOptimistic
End With
Set rs = cmd.Execute

Cells(1, 1) = "Column1"
Cells(1, 2) = "Column2"
Cells(1, 3) = "Column3"
Cells(1, 4) = "Column4"
Cells(1, 5) = "Column5"
Cells(2, 1).CopyFromRecordset rs

Set con = Nothing
Set cmd = Nothing
Set rs = Nothing 
```

# web-services - 来自 socket.io 和 coffeescript 的错误消息

> ID：11652878
> 
> 赞同：0
> 
> 时间：2012-07-25T15:09:31.660
> 
> 标签：web-services, node.js, web-applications, coffeescript, socket.io

我从这里的第二个示例创建了一个咖啡脚本版本：

[http://socket.io/#how-to-use](http://socket.io/#how-to-use)

在示例中，socket.io 使用了一个快速服务器，并且在客户端和服务器之间传递了两条消息。

您可以在 pastebin 上查看 coffeescript 及其生成的 javascript：

*   [服务器.coffee](http://pastebin.com/cdR0Axx4)
*   [前端.coffee](http://pastebin.com/va9qJZJ9)
*   [服务器.js](http://pastebin.com/6MXLLPJD)
*   [前端.js](http://pastebin.com/H2MR3yhG)

虽然我无法在代码中发现错误，但程序崩溃了。这是错误消息：

*   [错误信息](http://pastebin.com/r1ZasEHu)

如果没有 socket.io，应用程序运行良好。我确定错误与快递或玉无关。我的机器运行 Windows 7 32 位。浏览器是最新版本的 chrome。

**更新：**

我更改了快速服务器侦听的端口，现在程序执行没有错误。但是 socket.io 仍然无法按预期工作。我更改了客户端脚本并在收到消息时添加了警报。永远不会执行此警报语句。我猜客户端和服务器之间没有传递任何消息，但为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T03:45:22.073

Express 服务器未正确路由套接字请求。至少 id 在我尝试的示例中没有:-)

我遇到了类似的问题，当我从使用 express 服务器切换到开始使用 Apache 甚至 nginx 时，一切都正常工作。相同的代码在 nginx 中运行，而不是在 express 服务器中运行。

所以总而言之，它可能是快速服务器，只需尝试将您的文件移动到您拥有的任何“适当的”网络服务器并从那里进行测试。

# r - R选择至少一个值满足条件的整个列

> ID：11652879
> 
> 赞同：2
> 
> 时间：2012-07-25T15:09:40.450
> 
> 标签：r, matrix

我有一个大矩阵，约 300 行和 200000 列。我想通过选择至少具有一个大于 0.5 或小于 -0.5 的值（不仅仅是那个特定值）的整个列来缩小它。我想保留行名和列名。我能够通过做得到一个真假矩阵`tmp<-mymat > 0.5 | mymat < -0.5`。我想提取其中至少有一个`TRUE`的所有列。我只是简单地尝试过`mymat[tmp]`，但这只是返回满足该条件的值的向量。如何获得原始矩阵的实际列？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T15:37:10.313

试试这个：

```
> set.seed(007) # for the example being reproducible
> X <- matrix(rnorm(100), 20) # generating some data
> X <- cbind(X, runif(20, max=.48)) # generating a column with all values < 0.5
> colnames(X) <- paste('col', 1:ncol(X), sep='') # some column names
> X # this is how the matrix looks like
              col1        col2         col3        col4         col5        col6
 [1,]  2.287247161  0.83975036  1.218550535  0.07637147  0.342585350 0.335107187
 [2,] -1.196771682  0.70534183 -0.699317079  0.15915528  0.004248236 0.419502015
 [3,] -0.694292510  1.30596472 -0.285432752  0.54367418  0.029219842 0.346358090
 [4,] -0.412292951 -1.38799622 -1.311552673  0.70480735 -0.393423429 0.212185020
 [5,] -0.970673341  1.27291686 -0.391012431  0.31896914 -0.792704563 0.224824248
 [6,] -0.947279945  0.18419277 -0.401526613  1.10924979 -0.311701865 0.415837389
 [7,]  0.748139340  0.75227990  1.350517581  0.76915419 -0.346068592 0.057660111
 [8,] -0.116955226  0.59174505  0.591190027  1.15347367 -0.304607588 0.007812921
 [9,]  0.152657626 -0.98305260  0.100525456  1.26068350 -1.785893487 0.298192099
[10,]  2.189978107 -0.27606396  0.931071996  0.70062351  0.587274672 0.216225091
[11,]  0.356986230 -0.87085102 -0.262742349  0.43262716  1.635794434 0.026097800
[12,]  2.716751783  0.71871055 -0.007668105 -0.92260172 -0.645423474 0.190567072
[13,]  2.281451926  0.11065288  0.367153007 -0.61558421  0.618992169 0.402829397
[14,]  0.324020540 -0.07846677  1.707162545 -0.86665969  0.236393598 0.248196976
[15,]  1.896067067 -0.42049046  0.723740263 -1.63951709  0.846500899 0.406511129
[16,]  0.467680511 -0.56212588  0.481036049 -1.32583924 -0.573645739 0.162457572
[17,] -0.893800723  0.99751344 -1.567868244 -0.88903673  1.117993204 0.383801555
[18,] -0.307328300 -1.10513006  0.318250283 -0.55760233 -1.540001132 0.347037954
[19,] -0.004822422 -0.14228783  0.165991451 -0.06240231 -0.438123899 0.262938992
[20,]  0.988164149  0.31499490 -0.899907630  2.42269298 -0.150672971 0.139233120
> 
> # defining a index for selecting if the condition is met
> ind <- apply(X, 2, function(X) any(abs(X)>0.5))  
> X[,ind] # since col6 only has values less than 0.5 it is not taken
              col1        col2         col3        col4         col5
 [1,]  2.287247161  0.83975036  1.218550535  0.07637147  0.342585350
 [2,] -1.196771682  0.70534183 -0.699317079  0.15915528  0.004248236
 [3,] -0.694292510  1.30596472 -0.285432752  0.54367418  0.029219842
 [4,] -0.412292951 -1.38799622 -1.311552673  0.70480735 -0.393423429
 [5,] -0.970673341  1.27291686 -0.391012431  0.31896914 -0.792704563
 [6,] -0.947279945  0.18419277 -0.401526613  1.10924979 -0.311701865
 [7,]  0.748139340  0.75227990  1.350517581  0.76915419 -0.346068592
 [8,] -0.116955226  0.59174505  0.591190027  1.15347367 -0.304607588
 [9,]  0.152657626 -0.98305260  0.100525456  1.26068350 -1.785893487
[10,]  2.189978107 -0.27606396  0.931071996  0.70062351  0.587274672
[11,]  0.356986230 -0.87085102 -0.262742349  0.43262716  1.635794434
[12,]  2.716751783  0.71871055 -0.007668105 -0.92260172 -0.645423474
[13,]  2.281451926  0.11065288  0.367153007 -0.61558421  0.618992169
[14,]  0.324020540 -0.07846677  1.707162545 -0.86665969  0.236393598
[15,]  1.896067067 -0.42049046  0.723740263 -1.63951709  0.846500899
[16,]  0.467680511 -0.56212588  0.481036049 -1.32583924 -0.573645739
[17,] -0.893800723  0.99751344 -1.567868244 -0.88903673  1.117993204
[18,] -0.307328300 -1.10513006  0.318250283 -0.55760233 -1.540001132
[19,] -0.004822422 -0.14228783  0.165991451 -0.06240231 -0.438123899
[20,]  0.988164149  0.31499490 -0.899907630  2.42269298 -0.150672971

# It could be done just in one step avoiding 'ind'
X[, apply(X, 2, function(X) any(abs(X)>0.5))] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T23:25:52.160

对于过滤后只剩下一列的情况，Jilber 的回答是：

```
X[, apply(X, 2, function(X) any(abs(X)>0.5)), drop=FALSE] 
```

如果没有 drop=FLASE 参数，剩余的列将被转换为向量，您将丢失列名信息。

# asp.net - 在整个 ASP.NET 应用程序中自动保存？

> ID：11652881
> 
> 赞同：0
> 
> 时间：2012-07-25T15:09:43.040
> 
> 标签：asp.net, ajax, autosave

> **可能重复：**
> [ASP.NET 表单自动保存](https://stackoverflow.com/questions/875834/asp-net-forms-autosave)

我正在寻找有关如何在 ASP.NET 4.0 中实现“自动保存”功能的一般指导。我有一个带有选项卡式界面（AJAX 控制工具包）的应用程序，用户可以在任何给定时间对各种字段和选项卡进行更改。我需要为（1）每次对字段进行更改时创建一个自动保存，（2）每 3 秒保存一次（或者不保存）。

我从来没有实施过这样的事情，我正在寻找指导。显然，我假设涉及到一些 AJAX，我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:48:00.150

通过 ASP.NET AJAX 使用 Web 服务：

*   [http://msdn.microsoft.com/en-us/magazine/cc163499.aspx](http://msdn.microsoft.com/en-us/magazine/cc163499.aspx)
*   [http://www.asp.net/ajax/documentation/live/tutorials/ConsumingWebServicesWithAJAXTutorial.aspx](http://www.asp.net/ajax/documentation/live/tutorials/ConsumingWebServicesWithAJAXTutorial.aspx)
*   [http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)

您使用 Web 服务将数据发送到服务器。您可以附加到输入控件的更改事件（或 lostfocus 事件），当它触发时，调用 Web 服务。每隔 X 秒，使用 window.setTimeout 或 window.setInterval，并调用将所有页面数据发送到服务器。

我不知道通过频繁发送数据是否会表现良好；你确定你需要两者都做吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:22:03.943

一个简单的方法是

1.  在更新面板中包装自动完成表单
2.  将 .change() 侦听器附加到所有文本框等
3.  向页面添加 javascript 计时器
4.  在更改事件和计时器中，单击隐藏按钮以返回表单。
5.  也许有一些可爱的页面已经保存了您在回发期间更新的文本
6.  全部完成

# c# - 如何在不下载所有页面源的情况下获取网页标题

> ID：11652883
> 
> 赞同：7
> 
> 时间：2012-07-25T15:09:46.933
> 
> 标签：c#, httpwebrequest

我正在寻找一种允许我获取网页标题并将其存储为字符串的方法。

然而，到目前为止我发现的所有解决方案都涉及下载页面的源代码，这对于大量网页来说并不实用。

我能看到的唯一方法是限制字符串的长度，或者它只下载一定数量的字符或在到达标签后停止，但这显然仍然会很大？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-25T15:29:19.213

由于`<title>`标签位于 HTML 本身中，因此*无法不*下载文件以查找“仅标题”。您应该能够下载文件的一部分，直到您读入`<title>`标签，或者`</head>`标签然后停止，但您仍然需要下载（至少一部分）文件。

这可以通过`HttpWebRequest`/`HttpWebResponse`和从响应流中读取数据来完成，直到我们读入一个`<title></title>`块或`</head>`标签。我添加了`</head>`标签检查，因为在有效的 HTML 中，标题块必须出现在头块内 - 因此，通过此检查，我们在任何情况下都不会解析整个文件（当然，除非没有头块）。

以下应该能够完成这项任务：

```
string title = "";
try {
    HttpWebRequest request = (HttpWebRequest.Create(url) as HttpWebRequest);
    HttpWebResponse response = (request.GetResponse() as HttpWebResponse);

    using (Stream stream = response.GetResponseStream()) {
        // compiled regex to check for <title></title> block
        Regex titleCheck = new Regex(@"<title>\s*(.+?)\s*</title>", RegexOptions.Compiled | RegexOptions.IgnoreCase);
        int bytesToRead = 8092;
        byte[] buffer = new byte[bytesToRead];
        string contents = "";
        int length = 0;
        while ((length = stream.Read(buffer, 0, bytesToRead)) > 0) {
            // convert the byte-array to a string and add it to the rest of the
            // contents that have been downloaded so far
            contents += Encoding.UTF8.GetString(buffer, 0, length);

            Match m = titleCheck.Match(contents);
            if (m.Success) {
                // we found a <title></title> match =]
                title = m.Groups[1].Value.ToString();
                break;
            } else if (contents.Contains("</head>")) {
                // reached end of head-block; no title found =[
                break;
            }
        }
    }
} catch (Exception e) {
    Console.WriteLine(e);
} 
```

**更新：**更新了原始源示例以使用编译`Regex`和`using`语句来`Stream`提高效率和可维护性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T01:43:52.507

一种更简单的处理方法是下载它，然后拆分：

```
 using System;
    using System.Net.Http;

    private async void getSite(string url)
    {
        HttpClient hc = new HttpClient();
        HttpResponseMessage response = await hc.GetAsync(new Uri(url, UriKind.Absolute));
        string source = await response.Content.ReadAsStringAsync();

        //process the source here

    } 
```

要处理源代码，可以使用[Getting Content From Between HTML Tags一文中描述的方法](http://windows8devs.blogspot.com/2012/10/getting-content-from-between-html-tags.html)

# javascript - 使用 Adob e ExtendScript (Ext JS) 读取变量并旋转形状

> ID：11652886
> 
> 赞同：0
> 
> 时间：2012-07-25T15:09:59.860
> 
> 标签：javascript, vb.net, extjs, adobe-illustrator, extendscript

我正在使用 Illustrator 中的变量面板来提取我拥有的数据集。

例如，有 2 个文本变量和 1 个从 0 到 359 的数字。我正在寻找一个脚本，它查看变量名称并提取数字，然后使用该数字将形状旋转那么多度。

我在 ExtJS 方面没有经验，但这看起来可以做到吗？

有人有这方面的经验吗？

谢谢你的帮助。戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:59:03.533

我没有在 UI 中使用变量，但我可以读取 pageItem 上的变量对象和旋转方法，因此该配方似乎可行。

在 Illustrator 脚本论坛上留言。一个人可能已经研究过那种东西；）

# internet-explorer - VBA 与 Internet Explorer 的交互

> ID：11652890
> 
> 赞同：7
> 
> 时间：2012-07-25T15:10:22.527
> 
> 标签：internet-explorer, vba, excel, automation, sendkeys

我正在构建的宏从 Excel 电子表格中获取名称，打开 Internet Explorer，然后搜索在线目录。搜索目录后，它会拉出一个 Java 表单，其中包含经理的姓名。我可以手动选择经理名称，右键单击，复制快捷方式，然后将其发布回电子表格。但是，我在使用一致的选项卡和复制快捷方式时遇到了问题。

1.  有没有一种简单的方法可以让焦点回到 IE 窗口？
2.  如何在不手动单击的情况下复制快捷方式？

代码：

```
Sub Macro1()
'
Dim ie As Object
Set ie = CreateObject("internetexplorer.application")

ie.Visible = True
ie.navigate "****url****"

While ie.busy
    DoEvents
Wend

ie.document.getElementById("SSOID").Value = "Z19516732"
ie.document.getElementById("Advanced").Checked = False
ie.document.all("Search").Click

'this loop is to slow the macro as the java form is filled from the search
For i = 1 To 400000000  
    i = i + 1
Next i

'ie.Object.Activate
ie.document.getElementById("Advanced").Checked = False
ie.document.getElementById("SSOID").Focus
Application.SendKeys "{TAB 6}" ', True

'bring up the control menu/right click
Application.SendKeys "+{F10}"

'copy shortcut is 8 items down on the list
Application.SendKeys "{DOWN}"
Application.SendKeys "{DOWN}"
Application.SendKeys "{DOWN}"
Application.SendKeys "{DOWN}"
Application.SendKeys "{DOWN}"
Application.SendKeys "{DOWN}"
Application.SendKeys "{DOWN}"
Application.SendKeys "{DOWN}"

'enter was not working so the shortcut for the menu is 't'
'SendKeys "{ENTER}"
Application.SendKeys "{t}"

Windows("Book21").Activate
Range("A1").Select
ActiveSheet.Paste

End Sub 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T15:43:02.010

在你的模块的开头，放这行代码：

```
Public Declare Function SetForegroundWindow Lib "user32" (ByVal HWND As Long) As Long 
```

这称为 a[`Declare Statement`](http://bit.ly/14jX6qD)并将允许您访问`SetForegroundWindow`Windows 中内置的功能。该函数位于`user32`Windows 系统的 DLL 中。实际上，VBA 可以通过这种方式访问​​多个 DLL 中的许多其他函数（有关更多示例，请参见链接）。

在您的代码中，在与您的 IE 对象交互时，记录`HWND`（该窗口的[句柄），如下所示：](http://bit.ly/17pFC0k)

```
Dim HWNDSrc As Long
HWNDSrc = ie.HWND 
```

然后，在您与 Java 交互后，使用它继续：

```
SetForegroundWindow HWNDSrc 
```

这告诉 Windows 系统将由 标识的窗口设置`HWND`为前景窗口（顾名思义）。

但是，这可能不是必需的，具体取决于您与 IE 交互的方式。换句话说，如果您不需要查看/触摸窗口，您仍然可以使用代码中已有的对象进行交互。

`GetElementById()`有一些方法可以使用和`GetElementsByTagName()`（[有关更多信息，请参阅此处](http://bit.ly/1dyoXsm)）之类的代码来获取您正在寻找的快捷方式，但这取决于源代码的创建方式。例如`<a href="...>`，如果您知道 HTML 源代码，链接应该相对容易拉出。

* * *

在第二次查看您的代码后，我注意到您使用循环来“减慢”宏。我有一个函数，我一直在使用我自己的类似方法。希望这将有助于您完成所需的工作。我已经从我自己的原始代码修改了下面的代码，因为我有其他不适用于您的案例的细节。如果有任何错误，我可以根据需要进行调整。

```
Public Sub WaitForIE(myIEwindow As InternetExplorer, HWND As Long, WaitTime As Integer)

    ' Add pauses/waits so that window action can actually
    ' begin AND finish before trying to read from myIEWindow.

    ' myIEWindow is the IE object currently in use
    ' HWND is the HWND for myIEWindow
    ' The above two variables are both used for redundancy/failsafe purposes.
    ' WaitTime is the amount of time (in seconds) to wait at each step below. 
    ' This is variablized because some pages are known to take longer than 
    ' others to load, and some pages with frames may be partially loaded,
    ' which can incorrectly return an READYSTATE_COMPLETE status, etc.

    Dim OpenIETitle As SHDocVw.InternetExplorer

    Application.Wait DateAdd("s", WaitTime, Now())

    Do Until myIEwindow.ReadyState = READYSTATE_COMPLETE
        ' Wait until IE is done loading page and/or user actions are done.
    Loop

    Application.Wait DateAdd("s", WaitTime, Now())

    While myIEwindow.Busy
        DoEvents  ' Wait until IE is done loading page and/or user actions are done.
    Wend

    On Error Resume Next
    ' Make sure our window still exists and was not closed for some reason...
    For Each OpenIETitle In objShellWindows
        If OpenIETitle.HWND = HWND Then
            If Err.Number = 0 Then
                Set myIEwindow = OpenIETitle
                Exit For
            Else
                Err.Clear
            End If
        End If
    Next OpenIETitle
    On Error GoTo 0

End Sub 
```

# sql - 在 Jdeveloper ORA-00904 中运行 Jasper 报告被抛出

> ID：11652892
> 
> 赞同：0
> 
> 时间：2012-07-25T15:10:32.747
> 
> 标签：sql, jdeveloper

我有一个很简单的问题让我发疯......

我正在运行 JDeveloper 11.1.2.1.0，我也在运行 Jasper Reports 4.5。我有一个包含几种方法的类。每个都运行一个用 iReport 制作的单独的 Jasper 报告。

我也在集成 WLS 中对此进行测试。

当用户单击一个按钮时，它会运行所述报告，如果只调用一个报告，效果会很好。一旦我尝试调用 2 个或更多报告，第一个报告就会起作用，但所有其他报告都会抛出此错误：

java.sql.SQLSyntaxErrorException ORA-00904：“ID”：无效的标识符

* * *

例子

```
public String button () thorws ClassNotFoundException, Exception
{
   Reports runReport = new Reports ();
   runReport.FirstReport;
   runReport.SecondReport;
   ...
   ...
} 
```

不确定在哪里跟踪此错误，因为 Reports 类中的每个方法仅在单独运行时运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:54:00.027

好吧，您的代码示例没有显示您的工作。它甚至不是正确的 java 语法。您获得的堆栈跟踪应该包含更多信息（例如，while 查询），您应该了解这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:00:45.507

谷歌错误信息，你会发现这样的提示：

[间歇性 ORA-00904: : 无效标识符](https://stackoverflow.com/questions/4885108/intermittent-ora-00904-invalid-identifier)

指出可能的 RDBMS 问题。查找线程中提到的错误，如果您重新连接到具有相似对象的不同模式，则似乎早于 10.2 的数据库版本会受到影响。由于您的问题中缺乏信息，因此不确定这是您的情况。

坦率

# java - 如何使用 JAXB 仅解组子元素？

> ID：11652893
> 
> 赞同：0
> 
> 时间：2012-07-25T15:10:32.090
> 
> 标签：java, jaxb, unmarshalling

我只想使用 JaxB 解组大型 XML 的少数子级。XML 结构是这样的：

```
<root>
  <child1>
    <child1.1>
       <child1.1.1/>
       <child2.1.1/>
       <child2.1.1/>
       <child3.1.1/>
       <child3.1.1/>
    </child1.1>
   </child1>
</root> 
```

在这里我想解组到`child1.1.1, child2.1.1 and child3.1.1`. 我不想创建根元素的 java 类，只想编组孩子。
现在我正在解组根元素并从中取出子对象。

```
JAXBContext jc = JAXBContextFactory.createContext(new Class[] {RootType.class}, null);
Unmarshaller unmarshaller = jc.createUnmarshaller();
File xml = new File("D:/Projects/test.xml");
RootType root = (RootType)unmarshaller.unmarshal(xml);
Child1.1.1[] child1.1.1 = root.getChild1().getChild1.1[0].getChild1.1.1() 
```

另一个问题是处理多个孩子。在解组单个子元素
时我将如何处理？`child2.1.1 and child3.1.1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:41:56.573

您可以使用 a 自己解析文件，`DocumentBuilder`然后提取您感兴趣的节点，例如使用 XPath，而不是让 JAXB 解析文件。然后，您可以使用[Unmarshaller.unmarshal(Node node)](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html#unmarshal%28org.w3c.dom.Node%29)单独解组每个节点。

# c# - 如何等待外部程序在c#中创建一个rtf文件

> ID：11652895
> 
> 赞同：1
> 
> 时间：2012-07-25T15:10:43.430
> 
> 标签：c#

我正在编写 ac# 程序，它等待 rtf 文件由外部程序创建，然后对其进行操作。我需要一种方法来等待 rtf 文件。我试过 while 循环，但它降低了外部程序的速度我认为我应该使用 FileSystemWatcher 类，有点我不知道如何将它用于 rtf 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:13:58.883

```
var fsw = new FileSystemWatcher(yourDirectory, "*.rtf"); 
```

[MSDN FileSystemWatcher 构造函数](http://msdn.microsoft.com/en-us/library/0b30akzf.aspx)

这应该让你开始。 *我不知道如何使用它*有点太模糊了。如果您发布一些关于您尝试过的内容以及为什么它没有像您期望的那样工作的代码，社区可以为您提供更好的答案。如果没有，这里是[FileSystemWatcher 的 MSDN 页面，](http://msdn.microsoft.com/en-us/library/x7t1d0ky)其中包含您可以试验的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:13:16.020

FileSystemWatcher 似乎很合适。只需按照此处的说明使用它[http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)并过滤您的确切文件名而不是“* .txt”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:27:10.223

```
System.IO.FileSystemWatcher watcher = new System.IO.FileSystemWatcher(directory, file_name);
System.IO.WaitForChangedResult result;    
result = watcher.WaitForChanged(System.IO.WatcherChangeTypes.Created); 
```

# jquery - JQuery Mobile IPad：点击更高 z-index div 上的墨迹也会导致点击底层内容

> ID：11652904
> 
> 赞同：2
> 
> 时间：2012-07-25T15:11:19.903
> 
> 标签：jquery, ipad, html, mobile, z-index

我为我的 jquery 移动网站创建了一个下拉菜单栏，它使用更高的 z 索引来显示导航链接。一切都很好，直到我遇到了这个障碍。这只发生在 ipad 上。当我在页面上有 jquery mobile 样式的复选框并滚动页面时。之后，单击下拉菜单栏实际上会导致单击实际上隐藏在该菜单项下方的复选框。有人遇到过这样的问题吗？我可以尝试哪些不同的东西？提前致谢！

# php - 将 PHP 脚本的结果从带有 JQuery 的链接加载到 div 中

> ID：11652906
> 
> 赞同：1
> 
> 时间：2012-07-25T15:11:28.003
> 
> 标签：php, javascript, jquery

我一直在尝试将链接的内容加载到 div 元素而不重新加载页面。我找到了这个解决方案“http://wecodesign.com/demos/stackoverflow-7071545.htm”并尝试过，但我无法让它工作。

我正在做的完全一样，但由于某种原因它不起作用。

这是 Jquery 部分：

```
<script type="text/javascript">

    function updateContainer( url ){
        dynamicCon = '#mainContent';    
        ObjTag = $( dynamicCon );
        ObjTag.load( url );
    }
    $( document ).ready( function() {
        $( 'a[rel="dynamicLoad"]' ).bind( "click", function( event ) {
            url = $( this ).attr( 'href' );
            updateContainer( url );
            event.preventDefault();
            event.stopPropagation();
        });
    });
</script> 
```

这是我用来输出 HTML 的 PHP 位：

```
echo '<li><a href = "/getPost.php?q='. $row['id'] .' " rel="dynamicLoad" >'. $row['title'] .'</a> </li> <br>'; 
```

但这会将我发送到链接而不是将其加载到 div 中。我希望内容加载到的 div 称为“mainContent”。现在，我不能说我知道 JQuery，但对我来说一切看起来都不错，但显然我错过了一些东西。

更新：我尝试链接到以后的库，重新启动服务器，清除浏览器缓存并将 Javascript 更改为：

```
 function updateContainer( url ){
            dynamicCon = '#mainContent';    
            ObjTag = $( dynamicCon );
            $("#mainContent").load(url)
        }
        $( document ).ready( function() {
            $( 'a[rel="dynamicLoad"]' ).bind( "click", function( event ) {
                url = $( this ).attr( 'href' );
                updateContainer( url );
                event.preventDefault();
                event.stopPropagation();
            });
        }); 
```

现在，当我尝试加载链接时，mainContent div 变为空（考虑到这种情况肯定是一种改进）

更新2：如果您想四处逛逛，我将其上传到网上。电动布朗尼网

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:29:02.007

答案很简单。在您生成的网址中删除尾随空格，它将起作用:)

```
echo '<li><a href = "/getPost.php?q='. $row['id'] .'" rel="dynamicLoad" >'. $row['title'] .'</a> </li> <br>'; 
```

应该`<a href = "/getPost.php?q='. $row['id'] .' "`是`<a href = "/getPost.php?q='. $row['id'] .'"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:22:12.723

我很确定这是因为`<a>`元素的默认功能是将您发送到`href`属性。试试这个看看它是否有效：

```
<script type="text/javascript">

    $( document ).ready( function() {
        $( 'a[rel="dynamicLoad"]' ).each(function(index){
            $(this).click(function(){
                url = '/getPost.php?q='+$(this).attr('id');
                $('#mainContent').load(url);
            });
        });
    });
</script>

<?php
...
    echo '<li><a id="'.$row['id'].'" href = "#" rel="dynamicLoad" >'. $row['title'] .'</a> </li> <br>';
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:28:35.920

```
 $( 'a[rel="dynamicLoad"]' ).bind( "click", function( event ) {
        var url = $( this ).attr( 'href' );
        $.get(url, function(data) {
            $('#mainContent').html( data);             
        }):
        event.preventDefault();
    }); 
```

# android - android MediaRecorder.onInfoListener 错误代码

> ID：11652907
> 
> 赞同：0
> 
> 时间：2012-07-25T15:11:30.307
> 
> 标签：android, mediarecorder

我正在使用`MediaRecorder.onInfoListener()`并且经常收到`802`包含不同`extra`信息的错误号（在三星 Galaxy 1 上），但我不知道如何处理它，因为它没有记录在[文档](http://developer.android.com/reference/android/media/MediaRecorder.OnInfoListener.html)中。它的意义是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:27:28.400

我没有找到列出错误代码 802 的文档。以下页面列出了错误代码 1、800、801 和 1。我不知道 1 的第二个条目是否是拼写错误。那可能是您的错误802 ...

[http://developer.android.com/reference/android/media/MediaRecorder.html](http://developer.android.com/reference/android/media/MediaRecorder.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:16:05.513

从更多的环顾四周，它似乎是一个无证价值。最好不要依赖它，

# uitableview - 具有不同子级别数的 UINavigationController 和 UITableviewController

> ID：11652923
> 
> 赞同：1
> 
> 时间：2012-07-25T15:12:09.203
> 
> 标签：uitableview, ios5, uinavigationcontroller, storyboard

我正在使用具有 1 个主表视图的应用程序。

根据某些参数（例如sub）`detailview`，在经过 1、2 或 3 个级别后，有一些单元格会导致 a 。`tableview``BOOL`

应用行为如下：

`UINavigationController`-> `UITableViewController`(sub == YES) -> `UITableViewController`(sub == NO)->`DetailViewController`

`UINavigationController`-> `UITableViewController`(sub == YES) -> `UITableViewController`(sub == YES) -> `UITableViewController`(sub == NO) ->`DetailViewController`

依此类推（最多 3 个级别）。

有人知道如何只用 1 来做到这一点（使用`storyboard`）`UITableViewController`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:32:38.203

首先，在您的表格视图控制器中定义两个“通用”segue ，并在故事板中调用`"toDetail"`和。`"toNextLevel"`一个 segue 应该导致细节控制器；另一个应该返回到表视图控制器。然后，`tableView:didSelectRowAtIndexPath:`使用一个条件实现该方法，当有一个级别时将您移动到下一个级别，或者当没有下一个级别时将您移动到详细信息屏幕：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if ([myModel rowHasNextLevel:indexPath.row]) {
        [self performSegueWithIdentifier:@"toNextLevel" sender:self];
    } else {
        [self performSegueWithIdentifier:@"toDetail" sender:self];
    }
} 
```

# c# - 特殊（或外国）字符

> ID：11652928
> 
> 赞同：4
> 
> 时间：2012-07-25T15:12:25.070
> 
> 标签：c#, asp.net, gridview, textbox, special-characters

我是 C# 新手，正在试验 ASP.Net GridView（框架 3.5），当 gridView 文本包含以下内容时，我发现了一个大问题：

> ñ/Ñ/á/Á/é/É/í/Í/ó/Ó/ú/Ú 或 â, ê, î, ô, û, ë, ï, ü 甚至 ç

结果最终显示如下：`&+#+237`

我做了一个表，数据集等，让数据库中的数据像字母本身一样干净，这让我感到很痛苦。我还尝试制作一种清理变量的方法，但这是一个糟糕的 IF。

我想知道在从gridview 提取数据而不直接从数据库中获取数据并且不做大量代码的情况下，是否有一种方法可以使字母显示为它们本身（ñ as ñ 不是&+#+237）。如果没有，有没有办法有效地清理它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T15:51:52.817

您的字符正在被 HTML 编码，无论是在您的数据访问层中的某处，还是在 gridview 控件中。`HttpUtility.HtmlDecode()`在绑定网格之前尝试运行文本。

如果这不起作用，那么它可能是在控制级别进行编码的。我看到你用“文本框”标记了这个问题。标准 ASP.NET TextBox 控件将自动对分配给其 Text 属性的任何内容进行编码。相反，您可以使用通用`System.Web.UI.HtmlControls.HtmlTextArea`控件或`new HtmlGenericControl("input")`.

# java - applicationContext.xml 正在从 src/main/resources 复制到 /WEB-INF/classes

> ID：11652931
> 
> 赞同：0
> 
> 时间：2012-07-25T15:12:37.577
> 
> 标签：java, spring

但是tomcat抛出错误：

```
 IOException parsing XML document from ServletContext resource [/WEB-INF/applicationContext.xml]; 
```

这表明 tomcat 期望 applicationContext.xml 是它被复制到的目录之上的一个目录。它被复制到**/WEB-INF/ *classes***目录，而不仅仅是普通的旧**/WEB-INF**

我正在使用 Maven。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T15:19:45.097

如果你把它放在 src/main/resources 下，你应该把资源称为`classpath:/applicationContext.xml`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T15:16:29.653

在你的`web.xml`你可以说明你所在的`applicationContext.xml`位置。如果它在，`/WEB-INF/classes`那么您必须声明`/WEB-INF/classes/applicationContext.xml`（而不仅仅是`/WEB-INF/applicationContext.xml`）。

尝试这个：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/classes/applicationContext.xml
    </param-value>
</context-param>
<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener> 
```

要包含多个上下文文件，您可以使用该`import`函数。为此，请在`applicationContext.xml`每个文件中写入一行，如下所示：

```
<import resource="myOtherSpringContext.xml"/> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T15:21:13.843

[在 web.xml ( http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/context/ContextLoader.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/context/ContextLoader.html) )中使用以下语法：

```
<!-- list of the configuration files to load -->
<context-param>
    <!-- Spring -->
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:applicationContext.xml</param-value>
</context-param> 
```

它将从 classes/* 目录加载它。顺便说一句，如果你想将 applicationContext.xml 直接复制到你的 WEB-INF 目录中，请将其移动到 /src/main/webapp

顺便说一句，这里是弹簧文档推荐的方式：http: [//static.springsource.org/spring/docs/3.0.x/reference/beans.html#context-create](http://static.springsource.org/spring/docs/3.0.x/reference/beans.html#context-create)

HIH

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T15:22:21.903

这是标准的 Maven 行为，并且是很多人毫无异议地使用的。为什么你更喜欢 WEB-INF 中的它？

无论如何，如果你想要它，你可以把它放进去`src/main/webapp/WEB-INF`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T15:20:58.477

标准方法是创建新的源目录`src/main/webapp`。该目录中的所有文件都将与 WEB-INF 放在同一文件夹中，从而导致战争。因此，在这个新的源目录中，您可以创建`WEB-INF`并将您放置`applicationcontext.xml`在其中。

所以你的结构看起来很像

```
+src
+---main
+---+---java
+---+---webapp
+---+------WEB-INF 
```

检查[maven-war-plugin](http://maven.apache.org/plugins/maven-war-plugin/usage.html)文档

# node.js - 自定义错误未在 throw 语句或 next() 调用上正确传播

> ID：11652932
> 
> 赞同：3
> 
> 时间：2012-07-25T15:12:40.607
> 
> 标签：node.js, coffeescript, mongoose

我正在开发一个 Node.js/CoffeeScript 应用程序，我在其中使用类层次结构来解决错误。当我`throw`在路由处理程序的根目录中使用语句时，一切都很好：

```
class APIError extends Error
    constructor: ->

app.error (err, req, res, next) ->
    if err instance of APIError
       console.log 'APIError captured'

app.get '/', (req, res, next) ->
    throw new APIError 
```

但是，对于 Mongoose，使用`throw`回调函数中的语句：

```
app.get '/', (req, res, next) ->
    UserModel.where('name', 'Joe').findOne (err, doc) ->
        throw new APIError 
```

结果是

```
/usr/local/lib/node_modules/mongoose/lib/utils.js:413
    throw err;
          ^
Error: 
```

当我打电话时`next()`，如

```
app.get '/', (req, res, next) ->
    UserModel.where('name', 'Joe').findOne (err, doc) ->
        return next new APIError 
```

甚至在处理程序的主体中使用它：

```
app.get '/', (req, res, next) ->
    next new APIError 
```

我`undefined`在控制台中被打印出来。

将最后一条语句更改为`return next Error`按预期工作，即在控制台中打印出异常堆栈跟踪：

```
app.get '/', (req, res, next) ->
    return next Error 'This works as expected' 
```

是 Node.js 问题还是我在 CoffeeScript 中定义类的方式？任何想法如何使这种错误层次结构起作用？

## 更新 1

我可以确认这是 CoffeeScript 类的实现方式。使用标准的 JS 原型链定义可以解决问题，但感觉不对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:16:52.980

在其构造函数中设置`name`类的属性可以解决问题（第 3 行）：

```
class APIError extends Error
    constructor: ->
        @name = 'APIError'

app.use (err, req, res, next) ->
    if err instance of APIError
        console.log 'Error captured'

app.get '/', (req, res, next) ->
    #This will work: captured by error handler
    throw new APIError

app.get '/in-mongoose-callback', (req, res, next) ->
    UserModel.where('name', 'Joe').findOne (err, doc) ->
        #This one works as expected: captured by error handler
        return next new APIError 
```

这是由于CoffeeScript 1.3.3（2012 年 5 月 15 日）中[的一项更改：](https://github.com/jashkenas/coffee-script/issues/2052)

> 由于 JavaScript 严格模式的新语义，CoffeeScript 不再保证构造函数在所有运行时都有名称。参见#2052 进行讨论。

请注意，使用`throw`语句而不是`next()`在 Mongoose 查询回调**中将不起作用**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-21T23:02:21.470

在使用 express 时，我扩展了 Error，将名称设置为原型属性，并执行堆栈跟踪。

```
class RequestError extends Error
    name: 'RequestError'
    constructor:(@status, message)->
        super message
        Error.captureStackTrace @, @constructor 
```

我可以`new RequestError 403, 'Invalid username/password.'`为错误的用户登录或`new RequestError 404, 'Page not found.'`错误的页面请求做。当我发现错误时

```
require 'colors'
console.error error.stack.red  # logs where any error occured
if error instanceof RequestError
    # proper response for user errors
    response.status(error.status).send(error.message)
else response.status(500).send('Internal Server Error') # for 'other' errors the user only gets back a 500 'Internal Server Error' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:19:04.917

很难说，但是在我们将它们移到服务器脚本的末尾之前，我们遇到了错误问题，即使在启动服务器之后也是如此。这是使用 Express 和 Node，但可以给你一个提示。在我们在服务器文件的开头附近假设没有问题但在我们将所有错误处理移至结束后开始工作之前。不确定路由器或框架操作顺序的中间件是否有问题，但似乎解决了我们的问题。

* * *

```
/////////////////////////////
// Start Server
/////////////////////////////

app.listen(siteConf.port);

//////////////////////////
// Error Handling
//////////////////////////  
function NotFoundError(req, message){
    this.name = "NotFoundError";
    this.status = 404;
    this.message = message || (req.method + " " + req.url + " could not be found");
    Error.captureStackTrace(this, NotFoundError);
}
NotFoundError.prototype.__proto__ = Error.prototype;

function ProtectedResourceError(req, message){
    this.name = "ProtectedResourceError";
    this.status = 401;
    this.message = message || (req.url + " is protected");
}
ProtectedResourceError.prototype.__proto__ = Error.prototype;

function ValidationError(req, message, errors){
    this.name = "ValidationError";
    this.status = 400;
    this.message = message || ("Error when validating input for " + req.url);
    this.errors = errors;
}
ValidationError.prototype.__proto__ = Error.prototype;

function SearchError(req, message){
    this.name = "SearchError";
    this.status = 400;
    this.message = message || ("Error when searching");
}
SearchError.prototype.__proto__ = Error.prototype;

// If no route matches, throw NotFoundError
app.use(function(req, res, next) {
    console.log("No matching route for " + req.url);
    next(new NotFoundError(req));        
});

// General error handler
app.use(function(err, req, res, next) {
    //console.log("Trapped error : " + err);

    // handle exceptions
    if (err instanceof ValidationError) {
        standardResponse(req, res, {error: err.message, fields: err.errors}, err.status, err.message);
    } else if (err instanceof ProtectedResourceError) {
        standardResponse(req, res, {error: err.message}, err.status, err.message);
    } else if (err instanceof NotFoundError) {
        standardResponse(req, res, {error: err.message}, err.status, err.message);
    } else if (err instanceof SearchError) {
        standardResponse(req, res, {error: err.message}, err.status, err.message);
    } else {
        standardResponse(req, res, {error: err.message}, 500, err.message);
    }
}); 
```

# javascript - 通过 HTTP 请求将二进制数据上传到 AppEngine Blobstore

> ID：11652938
> 
> 赞同：1
> 
> 时间：2012-07-25T15:12:59.890
> 
> 标签：javascript, google-app-engine, upload, binary, blobstore

我试图找出从 JavaScript 发起的 HTTP 请求上传/下载二进制数据到 Google AppEngine 的 Blobstore 的最低数据开销方式。理想情况下，我想直接提交二进制数据，即未编码的 8 位值；也许在一个看起来像这样的 POST 请求中：

```
...
Content-Type: multipart/form-data; boundary=boundary;

--boundary
Content-Disposition: form-data; name="a"; filename="b"
Content-Type: application/octet-stream

@#^%(^Qtr...
--boundary-- 
```

这里，`@#^%(^Qtr...`理想地表示任意 8 位二进制数据。

具体来说，我试图了解以下内容：

*   是否可以直接上传 8 位二进制数据，或者我需要以某种方式对数据进行编码，例如 base-64 MIME 编码？
*   如果我使用不同的编码，Blobstore 会将数据保存为内部的 8 位二进制还是编码格式？也就是说，base-64 编码会增加 33% 的存储成本吗？
*   同理：编码开销会增加传出带宽成本吗？
*   有没有更好的方法来格式化 POST 请求，所以我不需要想出一个`boundary`没有出现在我的二进制数据中的内容？例如，有没有办法指定 Content-Length 而不是边界？
*   在检索数据的 GET 请求中，我是否可以简单地期望二进制数据以返回字符串结尾，或者服务器是否会以某种方式自动编码数据？
*   如果我需要使用某种编码，在支持的基本上随机 8 位数据的选项中，哪一种是最佳选择？（base-64，UTF-8，其他？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:22:58.663

尽管我因这个问题收到了[Tumbleweed 徽章](https://stackoverflow.com/help/badges/63/tumbleweed)，但还是让我报告一下我的进度，以防有人在乎：

这个问题原来提出了 3 个独立的问题：

1.  高效地将数据上传到 BlobStore
2.  确保 BlobStore 以尽可能小的格式保存它
3.  寻找可靠下载数据的方法

**让我们从 (3) 开始，因为这最终会带来最大的问题：**

到目前为止，我还没有找到通过 XHR 将真正的 8 位数据下载到浏览器的方法。使用诸如 application/octet-stream 之类的 mime 类型会导致只有 7 位可靠地到达客户端，除非将数据下载到文件中。我找到的最佳解决方案是对数据使用以下 mime 类型：

```
text/plain; charset=ISO-8859-1 
```

我测试过的所有浏览器似乎都支持这一点：IE 8、Chrome 21、FF 12.0、Opera 11.61、Windows 下的 Safari 5.1.2 和 Android 2.3.3。

有了这个，几乎可以传输任何 8 位值，但有以下限制/警告：

*   字符 0x00 在 IE8 中被解释为输入字符串的结尾，因此必须避免。
*   大多数浏览器将字符集 ISO-8859-1 解释为 Windows-1252，从而导致字符 0x80 到 0x9F 相应更改。但是，这可以修复，因为更改是明确的。（见[http://en.wikipedia.org/wiki/Windows-1252#Codepage_layout](http://en.wikipedia.org/wiki/Windows-1252#Codepage_layout)）
*   字符 0x81、0x8D、0x8F、0x90、0x9D 在 Windows-1252 字符集中保留，Opera 会为这些字符返回错误代码，因此也需要避免这些字符。

总的来说，我们可以使用 256 个字符中的 250 个。对于数据所需的基础更改，这意味着传出数据开销低于 0.5%，我想我可以接受。

**所以，现在到问题（1）和（2）：**

由于传入带宽是免费的，我决定降低解决问题 (1) 的优先级以支持问题 (2) 和 (3)。事实证明，使用以下 POST 请求可以解决问题：

```
...
Content-Type: multipart/form-data; boundary=-

---
Content-Disposition: form-data; name="a"; filename="b"
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: base64

abcd==
----- 
```

这里，`abcd==`是由上述 250 个允许字符组成的 base64-MIME 编码数据（参见[http://en.wikipedia.org/wiki/Base64#Examples，GAE](http://en.wikipedia.org/wiki/Base64#Examples)使用 + 和 / 作为最后 2 个字符）。编码是必要的（如果我错了，请纠正我），因为使用字符串数据调用 XHR send() 函数将导致字符串的 UTF-8 编码，这会破坏服务器接收到的数据。不幸的是，并非所有浏览器都可以将 ArrayBuffers 和 Blobs 传递给 send() 函数，从而更优雅地规避这个问题。

现在好消息：AppEngine BlobStore 会自动正确地解码这些数据，并在没有开销的情况下存储它！因此，使用 base64 编码只会导致客户端的数据上传速度变慢，但不会导致额外的托管成本（除非可能需要几个 CPU 周期进行解码）。

*另外：AppEngine 开发服务器将在管理控制台和检索到的 BlobInfo 记录中报告存储的 blob 的编码大小（即大 33%）。但是，生产服务器没有这个问题，并且报告了正确的 blob 大小。*

**结论**：

使用 Content-Transfer-Encoding`base64`上传 Content-Type 的二进制数据`text/plain; charset=ISO-8859-1`，其中可能不包含字符 0x00、0x81、0x8D、0x8F、0x90 和 0x9D，这会导致许多经过测试的浏览器的可靠数据传输具有存储/传出带宽开销不到半个百分点。base64 编码数据的上传开销为 33%，好于 UTF-8（对于随机 8 位数据）的预期 50%，但仍远非理想。

我不知道的是：这是最佳解决方案，还是可以做得更好？有人愿意挑战吗？

# php - 登录页面上的 Codeigniter 重定向更改

> ID：11652940
> 
> 赞同：0
> 
> 时间：2012-07-25T15:13:04.100
> 
> 标签：php, codeigniter, redirect

我试图在尝试登录之前将用户重定向到他们正在查看的页面。例如，如果他们正在查看 baseurl/people/abraham_lincoln，然后决定登录，那么在他们登录后，他们将被重定向到 baseurl/people/abraham_lincoln。奇怪的是它适用于某些 URL 而不是其他 URL。对于某些 URL，我将“javascript/jsFunctions.js”附加为 URL，而不是它们之前所在的 URL。

在每个控制器的顶部，我设置了一个会话变量来进行重定向：

```
$this->session->set_userdata('Redirect', current_url()); 
```

我将此会话变量打印到控制器顶部和登录视图顶部以进行测试。这是我在登录时收到的一些结果。

**一个有效的 URL 示例：**

我尝试从以下网址登录：

```
baseURL/people 
```

在我的控制器顶部打印的内容作为我的重定向会话变量：

```
baseURL/people 
```

在我的登录视图顶部打印的内容作为我的重定向会话变量：

```
baseURL/people 
```

**无效的 URL 示例：**

我尝试从以下网址登录：

```
baseURL/people/abraham_lincoln 
```

在我的控制器顶部打印的内容作为我的重定向会话变量：

```
baseURL/people/abraham_lincoln 
```

在我的登录视图顶部打印的内容作为我的重定向会话变量：

```
baseURL/people/javascript/jsFunctions.js 
```

我不确定这是否重要，但我也在从 routes.php 文件中路由其中一些 URL：

```
$route['people/(:any)'] = "people/index/$1";
$route['people/(:any)/(:num)'] = "people/index/$1/$2"; 
```

我尝试了许多不同的方式来构建我的会话变量，包括：

```
current_url()
base_url().uri_string()
base_url().$this->uri->segment(1)....
base_url().$this->uri->rsegment(1).... 
```

如果有人能想到我为什么要获取这些 javascript 变量而不是我正在寻找的 URL，我将不胜感激。

谢谢！

PS 我忘了提到，如果我刷新一个不起作用的页面，例如 abraham_lincoln 页面，然后去登录，我会收到正确的重定向会话变量。几乎就像第一次没有正确设置一样，但不知道如何解决这个问题，因为我尝试在视图加载之前和顶部设置会话变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:33:28.023

用例应该只适用于登录过程。因此将它放在每个控制器的顶部可能不是我们想要的。

而不是在开始时将 current_url 放入会话中，您应该将其附加到登录链接

```
<?php echo anchor('/home/login/' . url_encode(current_url()), 'login');?> 
```

在登录功能中

```
<?php
    public function login($redirecturl) {
        $this->form_validation->set_rules('username', 'Username', 'required');
        // etc.
        if($this->form_validation->run()) {
            $query = "select id from users where username=? and password=sha(?)";
            // etc.
            $this->session->set_userdata('userid', $row->id);
            redirect($redirecturl);
        } else {
            $data['redirecturl']=$redirecturl;
            $data['content']='loginview';
            $this->load->view('template', $data);
        }
    }
?> 
```

在登录视图中

```
<?php
    echo form_open('/home/login/' . url_encode($redirecturl));
    // etc.
?> 
```

# c# - VS 调试器不会进入 XML 反序列化器构造函数

> ID：11652949
> 
> 赞同：1
> 
> 时间：2012-07-25T15:13:34.877
> 
> 标签：c#, visual-studio-2010, debugging, xml-deserialization, step-into

**背景**

我有一个序列化为 XML 文件的类，因此用户可以更改一些启动设置。该类有一个枚举，我希望反序列化程序接受名称或 int 值作为有效值。

```
protected MyClass(SerializationInfo info, StreamingContext context) {
  // want to Step Into  right here
  try {
    logLevel = (Logger.Level)info.GetValue("LogLevel", typeof(Logger.Level));
  }
  catch(Exception) {
    logLevel = (Logger.Level)info.GetValue("LogLevel", typeof(Int32));
  }
  … 
```

它不起作用，XML deserialize() 仍然抛出一个异常，抱怨“0”或“1”等不是该类型的有效值。所以很自然地我尝试通过*Step Into* (F11) 调试该行`MyClass mc = (MyClass)xmlSerializer.Deserialize(filepath);`

***步入*** **不去预期的代码**

但是 Visual Studio 跳转到的下一行是类的*默认*构造函数 MyClass() 的开头，而不是 MyClass(SerializationInfo, StreamingContext) ！！

所以我通过那个构造函数 F11（它分配的默认值与 XML 文件无关，据我所知根本不应该被调用），当它跳出构造函数时，我像以前一样陷入异常 -显然没有运行过我编写的反序列化代码。

我什至尝试在要调试的代码的开头放置一个`System.Diagnostics.Debugger.Launch()`或，而 Visual Studio 2010 只是忽略它。`.Break()`

Visual Studio 不能或不会跟踪反序列化构造函数，或者有什么问题？

# visual-studio-2010 - 下载离线 HelpContentSetup.msha

> ID：11652950
> 
> 赞同：2
> 
> 时间：2012-07-25T15:13:35.277
> 
> 标签：visual-studio-2010, visual-studio

是否可以在离线时下载`HelpContentSetup.msha`VS2010？因为我`HelpContentSetup.msha`的已损坏，我无法再安装它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T13:24:04.057

查看此链接中的答案：http: [//tntcube.in/msdn-offline-visual-studio-2010/](http://tntcube.in/msdn-offline-visual-studio-2010/) 或者简单地搜索并下载“VS 2010 Help Downloader”（它是一个工具），这是一个允许您可以自行下载帮助文件包。

# linux - 相同的文件，但不同的文件大小和 sha1_file 哈希？

> ID：11652954
> 
> 赞同：-1
> 
> 时间：2012-07-25T15:13:50.820
> 
> 标签：linux, file, ftp, filesystems, sha1

在不同路径的同一台服务器上存储完全相同的文件，但文件大小不同并且 sha1_file 哈希也是？为什么

我从第一个路径下载文件，然后将其上传到第二个路径.. 仍然不同的文件大小和不同的 sha1_file 哈希？

我不明白？！：-/

相同的服务器，但不同的路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:28:46.167

我不相信。你可以自己仔细检查。比如说，你有文件 a.pdf 和 b.pdf，请执行以下操作：

```
od a.pdf>a.txt
od b.pdf>b.txt
diff a.txt b.txt 
```

你可能会发现不同之处。我认为哈希码独立于文件的属性，例如修改日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:35:19.880

如果您使用`ftp`了其中一个或两个传输，并且涉及 Windows 和 Linux/Unix 系统的混合，`ftp`则可能在其中一个传输上为您“有用”转换行结尾......

# ruby - Capybara：如何检查一个元素在许多相似元素中是否有内容？

> ID：11652957
> 
> 赞同：14
> 
> 时间：2012-07-25T15:14:08.250
> 
> 标签：ruby, rspec, capybara

我需要检查页面上是否存在特定类型的选择器中的某些内容。例如，假设我有以下 HTML：

```
<h2>HEADLINE ONE</h2>
<h2>HEADLINE TWO</h2> 
```

我知道如何只选择页面上的第一个：

```
find('h2').should have_content('Headline Two')  # have_content is also case insensitive 
```

如何检查`h2`页面上所有 s 中是否存在内容？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-25T16:00:48.650

显然，您可以选择具有给定文本的元素：

```
page.should have_selector('h2', text: /#{headline}/i) 
```

注意：我使用正则表达式使文本搜索不区分大小写。

# jquery - 使用 Twitter Bootstrap 自动启动和停止 YouTube 视频

> ID：11652958
> 
> 赞同：3
> 
> 时间：2012-07-25T15:14:10.527
> 
> 标签：jquery, youtube, twitter-bootstrap, modal-dialog

`lightbox`当用户单击视频缩略图时，我正在使用 Twitter Bootstrap 的模式框弹出视频（例如： [http](http://seniorshomecare.harmonyapp.com/how-we-can-help) ://seniorshomecare.harmonyapp.com/how-we-can-help，使用密码：shc）。如果可能的话，我希望视频在`lightbox`弹出时自动播放，并在用户关闭时自动停止`lightbox`。有一些类似的问题，但没有一个对我有太大帮助。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T15:31:44.467

添加`&autoplay=1`到 youtube 视频网址。

[http://support.google.com/youtube/bin/answer.py?hl=en&answer=1181821](http://support.google.com/youtube/bin/answer.py?hl=en&answer=1181821)

* * *

**编辑：**

您可以使用事件显示来触发将代码添加到模式中的功能

```
$('#myModal').on('show', function () {
  $('div.modal-body').html('<iframe src="http://www.youtube.com/v/itTskyFLSS8&amp;rel=0&amp;autohide=1&amp;showinfo=0&amp;autoplay=1" width="500" height="281" frameborder="0" allowfullscreen=""></iframe>'); 
}); 
```

**演示：http:** [//jsfiddle.net/baptme/WrrM3/](http://jsfiddle.net/baptme/WrrM3/)

解决方案不完整，您必须在关闭模式时删除 iframe。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T00:54:06.720

这将在模态关闭时删除 iFrame：

```
$('#myModal').on('hide', function () {
$('div.modal-body').html('&nbsp;');  
}); 
```

[http://jsfiddle.net/WrrM3/82/](http://jsfiddle.net/WrrM3/82/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-29T22:14:19.630

**如果您的页面上只有一个模式**，上述答案会很好地工作。如果您有多个，您的视频将被加载到所有其他模式中，并开始在某些浏览器中同时播放。

要解决该问题，请更具体地使用通过添加`#myModal`before来插入和删除视频的 javascript，`div.modal-body`如下所示：

```
$('#myModal').on('show', function () {
  $('#myModal div.modal-body').html('<iframe src="http://www.youtube.com/v/itTskyFLSS8&amp;rel=0&amp;autohide=1&amp;showinfo=0&amp;autoplay=1" width="500" height="281" frameborder="0" allowfullscreen=""></iframe>'); 
});

$('#myModal').on('hide', function () {
  $('#myModal div.modal-body').html('&nbsp;');  
}); 
```

# c# - Telerik MVC Grid Ajax 删除操作

> ID：11652961
> 
> 赞同：0
> 
> 时间：2012-07-25T15:14:16.490
> 
> 标签：c#, asp.net-mvc, telerik-grid

我有一个网格，我希望能够删除行，而不必从控制器操作返回新的结果集。

**这在我看来：**

```
@(Html.Telerik().Grid<InterestTopicViewModel>()
          .Name("Grid")
          .DataKeys(keys => keys.Add(x => x.Id))
          .ToolBar(commands => commands.Insert().ButtonType(GridButtonType.Image).ImageHtmlAttributes(new {style="margin-left:0"}))
          .DataBinding(dataBinding => dataBinding.Ajax()
                                         .Select("Select", "InterestTopic")
                                         .Insert("Insert", "InterestTopic")
                                         .Update("Update", "InterestTopic")
                                         .Delete("Delete", "InterestTopic"))
          .Columns(columns =>
                      {
                         columns.Bound(x => x.Name);
                         columns.Command(commands =>
                                            {
                                               commands.Edit().ButtonType(GridButtonType.Image);
                                               commands.Delete().ButtonType(GridButtonType.Image);
                                            }).Title("Actions");
                      })
          .Editable(editing => editing.Mode(GridEditMode.InLine))
        ) 
```

**这是在我的控制器中：**

```
 [AcceptVerbs(HttpVerbs.Post)]
  [GridAction]
  public ActionResult Delete(int id)
  {
     InterestTopicViewModel interestTopicViewModel = this.InterestTopicPresenter.GetInterestTopic(id);

     if (this.InterestTopicPresenter.DeleteInterestTopic(id))
        base.LogUserAction(UserActionLoggingType.DeleteInterest, interestTopicViewModel.Name);

     return this.View(new GridModel(this.InterestTopicPresenter.GetList()));
  } 
```

如您所见，在我的控制器中，我必须在函数末尾返回 GridModel 对象中的整个列表。如果我不这样做，视图将不会刷新。

是否可以在控制器的帮助下删除记录并让 Telerik 在 javascript 中删除相应行的 div？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:19:24.413

如果你不怕 javascript 和 jQuery，那也不是什么难事。我通常不使用网格命令列和绑定，而是自己使用模板将其连接起来，如下所示（使用 Razor 语法）：

```
.Columns(columns =>
{
    columns.Bound(x => x.Name);
    columns.Template
    (
        @<text>
            <a href="#" onclick="delete(this, @item.Id);">Delete</a>
        </text>
    );
}) 
```

item 是 Telerik 在键入到模型的列模板绑定中提供的字段。您的删除功能不需要返回数据。您可以执行以下操作：

```
[AcceptVerbs(HttpVerbs.Post)] 
public ActionResult Delete(int id)
{
    // call your code to delete the item here
    return Json(new { resultCode = "success" });
} 
```

然后创建一个 javascript 函数以 POST 到您的删除函数。

```
function delete(sender, id)
{
    $.ajax({
        type: "POST", // important, only perform deletes on a post
        url: '/delete',
        data: { id: id },
        success: function (result)
        {
            if (result.resultCode == "success")
            {
                var row = $(sender).closest("tr");
                row.remove();
            }
        }
    });
} 
```

类似的东西。我不知道确切的语法，但希望这足以让您入门。

# javascript - 在不损失质量的情况下调整图像大小 JavaScript/jQuery

> ID：11652962
> 
> 赞同：0
> 
> 时间：2012-07-25T15:14:19.810
> 
> 标签：javascript, jquery

我正在寻找一种在不损失图像质量的情况下使用 JavaScript 或 jQuery 调整图像大小的方法。我找到了使用 PHP 的解决方案，但我不是服务器端程序员。

我正在尝试为我和一个朋友开发一个投资组合网站，并创建了一个灯箱效果。当网站示例被点击时，问题就出现了；它们的原始尺寸缩小到 55% 的宽度和 90% 的高度，因此它们在所有分辨率下都有一个不错的视图。

在 1366x768 的显示器上，照片开始看起来非常像素化，但在更大的分辨率上它们还可以。

这是我的网站：

[Foxteam.net](http://www.foxteam.net/portfolio.php)

那么任何人都可以告诉这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:20:34.837

最好的方法是使用适当的图像处理工具在服务器端渲染不同版本的图像。根据用户的屏幕尺寸提供适当的尺寸。

取决于浏览器大小的图像永远不会有一致和高质量的结果。

# mysql - INNER JOIN，重复删除

> ID：11652963
> 
> 赞同：0
> 
> 时间：2012-07-25T15:14:22.603
> 
> 标签：mysql, date, duplicates, inner-join, duplicate-removal

我有两张桌子

```
Product table
productid   int
productname varchar(32) 
```

和

```
productprice table
productid    int
effectiviedt date
inactivedt   date
price        decimal (10,2) 
```

我有一堆记录有些产品有重复的有效dt 我想要做的是为每条记录找到重复的有效dt 并且只保留运行时间最长的无效dt 也是一个日期所以长度将从有效dt 到无效dt

我一直在尝试这样做一段时间，但一直没有运气。

我开始尝试找到最早的日期，但意识到这不起作用，因为重复的日期可能不是最早的日期

我找不到一种方法来区分 Effectivedt 和 inactivedt，因为我无法在 where 或 have 或 on 子句中使用它

所以你们我已经尝试了很长时间，但无济于事任何帮助都会让我感激不尽

提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:38:00.300

谢谢你的作品或多或少正是我想要的，唯一的问题是我只想保留一个记录，例如两个是相同的，所以如果我有

```
2012-07-05 | 2012-07-10 
2012-07-07 | 2012-07-25 
2012-07-07 | 2012-07-27
2012-07-27 | 2012-07-32 
```

它应该只保留一个 2012-07-07 | 2012-07-27

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:05:44.107

具有完全相同的开始日期的简单删除，但被删除的具有更早的停止日期。

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;
CREATE TABLE productprice
        ( id INTEGER NOT NULL
        , startdate date
        , stopdate date
        , price        decimal (10,2)
        );

INSERT INTO productprice(id,startdate,stopdate,price) VALUES
 ( 1, '2012-07-01', '2012-07-10', 10.0 )
,( 1, '2012-07-01', '2012-07-01', 20.0 )
,( 2, '2012-07-05', '2012-07-06', 30.0 )
,( 2, '2012-07-05', '2012-07-10', 40.0 )
        ;

DELETE FROM productprice de
WHERE EXISTS ( SELECT *
        FROM productprice ex
        WHERE ex.id=de.id
        AND ex.startdate = de.startdate
        AND ex.stopdate > de.stopdate
        )
        ;

SELECT * FROM productprice; 
```

结果：

```
CREATE TABLE
INSERT 0 4
DELETE 2
 id | startdate  |  stopdate  | price 
----+------------+------------+-------
  1 | 2012-07-01 | 2012-07-10 | 10.00
  2 | 2012-07-05 | 2012-07-10 | 40.00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:20:34.493

您可以像这样计算 SELECT 语句中的日期差异：

```
SELECT ..., DATEDIFF(effectivedt, inactivedt) as active_length, ... 
```

然后，您可以在 WHERE、ORDER BY 等中使用结果。

# sql - 在不同的存储过程中删除和选择并发

> ID：11652968
> 
> 赞同：2
> 
> 时间：2012-07-25T15:14:41.020
> 
> 标签：sql, concurrency

这可能是一个愚蠢的问题，但我不确定我创建这些存储过程的方式是否会导致任何问题。

我的选择存储过程如下所示：

```
ALTER PROCEDURE [dbo].[GetSRPsToProcess]
    @CurrentTime DateTime
AS
BEGIN
    BEGIN TRAN Tran1
        Select TOP 20 *
        From SRPQueue WITH (updlock, ROWLOCK, readpast)
        WHERE SRPQueue.TimeToDequeue <= @CurrentTime AND SRPQueue.Status = 'Pending'
        ORDER BY SRPQueue_Index 
    COMMIT
END 
```

我的删除过程看起来像这样（最终还将包含对日志表的插入）：

```
ALTER PROCEDURE [dbo].[DequeueRelevantSRPs]
    -- Add the parameters for the stored procedure here
    @SRPQueue_Index int,
    -- @TimeDeleted datetime
AS
BEGIN
    BEGIN TRAN Tran1
        Delete
        FROM SRPQueue
        WHERE SRPQueue.SRPQueue_Index = @SRPQueue_Index
    COMMIT
END 
```

避免我的 DequeueRelevantSRPs 存储过程尝试删除已选择的锁定行（并且失败）的最佳实践是使用 SRPQueue.Status 变量吗？

这会很好，因为我可以有几个不同的状态（待处理、处理、准备好、失败），我只需要一个额外的 AND SRPQueue.Status = 'Ready' 检查。尽管有潜在的锁定，是否有另一种方法可以确保删除成功？

编辑：调用这些存储过程的应用程序将在多个服务器上的多个实例中运行。一个重要的细节>.>。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:21:49.027

插入、更新和删除指令锁定事务中的表，选择等待表解锁...

我将在没有 TRAN 的情况下制作第一个 SP

```
ALTER PROCEDURE [dbo].[GetSRPsToProcess]
    @CurrentTime DateTime
AS
BEGIN

        Select TOP 20 *
        From SRPQueue WITH (updlock, ROWLOCK, readpast)
        WHERE SRPQueue.TimeToDequeue <= @CurrentTime AND SRPQueue.Status = 'Pending'
        ORDER BY SRPQueue_Index 

END 
```

# symfony1 - Symfony 1.4 表单小部件 ID 生成无法正常工作

> ID：11652971
> 
> 赞同：0
> 
> 时间：2012-07-25T15:14:43.837
> 
> 标签：symfony1, symfony-1.4

Symfony Widgets 的 id 生成有问题。
（我是 symfony 的新手，所以我可能犯了一些错误。）

我们在工作中使用

```
$form->render(); 
```

渲染一个表单，但这给了我们对表格布局的足够控制。
所以我不得不打破渲染过程并手动构建表格。
我现在正在使用

```
$Form['<cellname>']->render(); 
```

用于渲染单个小部件。

但是对于新的渲染，我的小部件的 ID 是错误的。

该表格用于跟踪单个用户每年完成项目的份额。

旧方法的 id 都采用以下形式

```
project_<CustomIdforDifferentYears>_<UserId>_share 
```

但现在我明白了

```
project_year_member_share 
```

适用于所有领域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:28:11.730

Symfony 会根据一些事情自动生成小部件的 id。

首先是可以如下指定的表单名称：

```
$this->widgetSchema->setNameFormat('my_form[%s]'); 
```

现在，该表单中的每个小部件的 id 都将以“my_form”为前缀。

其余的来自小部件名称。因此，如果小部件名称是“电子邮件”，则您的小部件的 id 将生成为“my_form_email”。

如果要在模板中指定小部件的 id。您也可以将其作为 render 方法的一部分来执行，该方法接受如下选项数组：

```
echo $form['email']->render(array('id' => 'my_different_id')); 
```

# java - Scala，不喜欢 java 集合 API？

> ID：11652978
> 
> 赞同：7
> 
> 时间：2012-07-25T15:14:54.080
> 
> 标签：java, scala, covariance, scala-java-interop

我正在使用异步httpclient。构建参数时，将 java.util.Map 传递给 setParameters 方法。

(Java) 签名如下所示：

```
setParameters(Map<String,Collection<String>); 
```

真正的第一天的东西。但是哇，我正试图从 Scala 中调用它，但我一生都无法创建一个与该签名相匹配的集合。

这是我到目前为止造成的混乱。

```
var m:java.util.Map[java.lang.String,java.util.Collection[java.lang.String]] = new java.util.HashMap[java.lang.String,java.util.HashSet[java.lang.String]]()
val req = new RequestBuilder().setUrl("http://localhost:1234/").setParameters(m).build 
```

这是错误消息，

> ```
> Multiple markers at this line
> - type mismatch; found : java.util.HashMap[java.lang.String,java.util.HashSet[java.lang.String]] required: 
>  java.util.Map[java.lang.String,java.util.Collection[java.lang.String]] Note: java.util.HashSet[java.lang.String] <: java.util.Collection[java.lang.String], but Java-defined 
>  **trait Map is invariant in type V. You may wish to investigate a wildcard type such as `_ <: java.util.Collection[java.lang.String]`. (SLS 3.2.10)**
> - type mismatch; found : 
> ```

很公平，我不会认为我在做一些特别复杂的事情，但是让我们尝试一下编译器的建议......

所以我将其更改为以下

```
 var m:java.util.Map[java.lang.String,_ <: java.util.Collection[java.lang.String]] = new java.util.HashMap[java.lang.String,java.util.HashSet[java.lang.String]]()
 val req = new RequestBuilder().setUrl("http://localhost:1234/").setParameters(m).build 
```

并收到以下可爱的错误消息作为响应。

> ```
> Multiple markers at this line
>     - overloaded method value setParameters with alternatives: (com.ning.http.client.FluentStringsMap)com.ning.http.client.RequestBuilder <and> 
>      (java.util.Map[java.lang.String,java.util.Collection[java.lang.String]])com.ning.http.client.RequestBuilder cannot be applied to (java.util.Map[java.lang.String,_$1]) 
> ```

回到基本的，我还想提一下，我的第一次尝试如下。

```
 import scala.collection.JavaConverters._
   var m = Map[String,Set[String]]()
   val req = new RequestBuilder().setUrl("http://localhost:1234/").setParameters(m.asJava).build 
```

但这产生了以下

> 此行的多个标记 - 具有替代方法的重载方法值 setParameters： (com.ning.http.client.FluentStringsMap)com.ning.http.client.RequestBuilder (java.util.Map[java.lang.String,java.util. Collection[java.lang.String]])com.ning.http.client.RequestBuilder 不能应用于 (java.util.Map[String,Set[String]])

编辑，感谢 __0，现在可以正常工作了。这是我的最终代码：

```
 def buildReqMap(in: Map[String, String]) = {
   import java.util.{ Map => JMap, Collection => JColl, HashMap => JHashM, HashSet => JHashS }
   val m: JMap[String, JColl[String]] =
     new JHashM[String, JColl[String]]()
   in.fold(m) { (a, b) =>
     {
       val s = new JHashS[String]()
       s.add(b.asInstanceOf[String])
       m.put(a.asInstanceOf[String], s)
       m
     }
   }
   m
 }

 def main(args: Array[String]): Unit = {
   val m = buildReqMap(
     Map(
       ("delimited" -> "length"),
       ("track" -> "binarytemple,music,kittens")))

   val req = new RequestBuilder().setUrl("http://localhost:1234/").setParameters(m).build
   val fut = asyncHttpClient.executeRequest(req, handler).get 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T15:22:58.600

嗯，第一条错误信息就很清楚了——因为它`java.util.Map`是可变的，所以它不能处理方差。因此，您不能将 a`Map[_,Set[_]]`转换为 a `Map[_,Collection[_]]`。

```
val m: java.util.Map[String, java.util.Collection[String]] = 
   new java.util.HashMap[String,java.util.Collection[String]]()
val s = new java.util.HashSet[String]()
s.add("welt")
m.put("hallo", s) 
```

# file-upload - 在我的服务器上构建文件夹以上传用户数据

> ID：11652979
> 
> 赞同：0
> 
> 时间：2012-07-25T15:14:56.550
> 
> 标签：file-upload, directory, image-uploading

对，这就是我想要做的，

用户将访问我的网站以上传媒体内容、IE、图片库的图片或视频。我会将此媒体存储到我的网站上，然后将访问代码返回给用户，以便他们可以通过访问代码访问媒体。

这是我的问题，

我正在研究尽可能有效地构建文件夹以存储上传的内容，他们可以上传两种类型的媒体，视频和图像，所以我有两个父文件夹，

*   视频
*   图片

我担心的是，将所有视频/图像内容放在一个文件夹中是个好主意，还是应该有子文件夹？

此外，用户通常会上传多个图像，例如 5-10，当请求查看这些图像时，它们将以图像库格式返回，所以我想有一个子文件夹，其中包含图像库的 ID 存储所有该图像库的图像，这有效吗？

是否有任何文件夹结构可用于存储上传的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:32:10.850

我在工作的地方遇到了这种结构。从那以后，我一直在尽可能地使用它。

（假设您的用户看不到这些文件夹）为每个用户（图库）提供一个 guid。然后使用 guid 的前 3 个字符创建一个目录路径，如下所示：

```
//root/9/1/8/91894963-0075-4b4c-b2a3-ce99f9780035/<user [ABC1]'s folder>
//root/6/5/6/656744e6-19e1-49aa-9ae6-156e4be61282/<user [ABC2]'s folder>
//root/6/5/b/65ba9120-93a9-4d28-ba4e-ca8a2a53d4e6/<user [ABC3]'s folder> 
```

这将每个父级中的文件夹总数限制为 16 个，并确保您在“目标”文件夹中永远不会有很多文件夹，并且还允许在已知 guid 时快速检索路径。

# javascript - 更改 CSS3 透视动画的轴

> ID：11652981
> 
> 赞同：1
> 
> 时间：2012-07-25T15:15:01.760
> 
> 标签：javascript, css, css-animations

我正在尝试构建 css3 折叠效果。这是一个效果示例，但内置于 Objective-C：http: [//vimeo.com/41495357](http://vimeo.com/41495357)

当前版本：http: [//jsfiddle.net/ctdNE/2/](http://jsfiddle.net/ctdNE/2/)

我的问题是动画的轴。目前，动画的轴是垂直居中的。是否可以将其移至动画容器的左侧？中心轴的原因，动画期间容器的高度变大。如果轴可以在最左边，高度就不会改变。

附上一张解释我的问题的图片：

[动画 http://gopeter.de/animation.png](http://gopeter.de/animation.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:20:36.160

我想到了：

使用 (-webkit-)transform-origin 移动轴。

# python - 将输出列表写入文件

> ID：11652987
> 
> 赞同：1
> 
> 时间：2012-07-25T15:15:29.450
> 
> 标签：python, io

我正在尝试将输出列表写入文件，但仅从列表中获取最后一行以实际写入文件。如何更改我的代码以捕获所有内容？

```
import os

slices = [(0,3), (12,28), (29,31), (32,33), (34,38), (130,144), (39,41), (32,33), (42,55), (58,64), (65,72), (73,74), (75,78), (79,84), (99,102)]
File = r"E:\file.txt"
outfile = r"E:\file_output.txt"

with open(File) as sourcefile:

for line in sourcefile: 
    result = [line[slice(*slc)] for slc in slices]

myfile = open(outfile, 'w')

for lines in result:
    myfile.write("%s\t" % lines)

myfile.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:26:12.223

您的 for 循环正在重新分配`result`每次迭代。因此，在循环结束时`result`仍然只有一个列表。在循环之前赋值`myfile`，并将`myfile.write`语句放在循环内。

```
myfile = open(outfile, 'w')
for line in sourcefile: 
    result = [line[slice(*slc)] for slc in slices]
    myfile.write("%s\t" % result) 
```

或者，如果您想获得所有结果的列表，您可以使用`+=`获取列表列表，如

```
result += [line[slice(*slc)] for slc in slices] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:26:07.560

每次在“for line in sourcefile”块中迭代时，都会覆盖“result”列表。这就是为什么您最终只将最后一行存储在“结果”中

为了解决这个问题，您可以扩展列表理解并完全删除 for 循环：

```
result = [line[slice(*slc) for slc in slices for line in sourcefile] 
```

# android - 了解语音识别服务

> ID：11652988
> 
> 赞同：5
> 
> 时间：2012-07-25T15:15:33.663
> 
> 标签：android, android-service, voice-recognition

我试图了解[RecognitionService](http://developer.android.com/reference/android/speech/RecognizerIntent.html)和[RecognitionService.Callback](http://developer.android.com/reference/android/speech/RecognitionService.Callback.html)的功能。我对这个框架很陌生，想知道如何在 RecognitionService 中调用 onStartListening() 函数。我看到帖子[如何注册自定义语音识别服务？](https://stackoverflow.com/questions/9997720/how-to-register-a-custom-speech-recognition-service/11633783#11633783)但是我在所有主要函数中都插入了日志消息，以查看何时调用了哪个函数。

我还查看了 sdk 中的示例应用程序，但它在解释事情如何发生方面做得非常糟糕。我想从活动中调用 startService。

我使用以下意图

```
Intent startServiceIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    startServiceIntent.setClass(this, SimpleVoiceService.class);

    startService(startServiceIntent); 
```

有人可以帮我完成这项工作。如果有人能指点我这方面的教程，或者描述如何做到这一点的一般流程，那就太好了。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:44:27.080

基本思想是用于`SpeechRecognizer`连接到`RecognitionService`用户在一般 Android 设置中选择的。

```
SpeechRecognizer sr = SpeechRecognizer.createSpeechRecognizer(context);
sr.setRecognitionListener(new RecognitionListener() {
    @Override
    public void onResults(Bundle b) { /* ... */ }

    // other required methods
});

Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, "");
sr.startListening(intent); 
```

您必须提供`RecognitionListener`-methods 的实现，允许您更新 UI 以响应语音识别事件（用户开始说话、部分结果可用、用户停止说话、转录仍在进行、发生错误等）。

请参阅某些键盘应用程序的源代码中的完整实现，例如[Hacker's Keyboard 中的 VoiceInput 类](http://code.google.com/p/hackerskeyboard/source/browse/java/src/com/android/inputmethod/voice/VoiceInput.java)。

# python - 更快的图结构生成

> ID：11652989
> 
> 赞同：0
> 
> 时间：2012-07-25T15:15:36.127
> 
> 标签：python, graph, dictionary, numpy

我从一组独特的点开始，然后找到这些点`Nx2`的 Delaunay ，这是一个由索引组成的数组。还有一个与每条边相对应的权重数组。`edges``Mx2``points``Mx1`

我正在尝试将数据放入 Hetland 的“Python 算法 - 掌握 Python 语言中的基本算法”一书的清单 2.3 中描述的结构中。结构是：

```
a, b, c, d, e, f, g, h = range(8)
G = [
    {b:2, c:1, d:3, e:9, f:4}, # a
    {c:4, e:3}, # b
    {d:8}, # c
    {e:7}, # d
    {f:5}, # e
    {c:2, g:2, h:2}, # f
    {f:1, h:6}, # g
    {f:9, g:8} # h
] 
```

其中`G[a]`返回与点相关的边`a`并`G[a][b]`返回 和 之间的边的权`a`重`b`。

转换的目标是能够使用书中也介绍的一些快速遍历等算法。为了在我现有的数据结构和这个结构之间进行转换，我这样做：

```
def make_graph(points, edges, weights):
    G = []
    for i in range(len(points)):
        w = numpy.where(edges == i)
        d = {}
        for ind,j in enumerate(edges[w[0],~w[1]]):
            d[j] = weights[w[0][ind]]
        G.append(d)
    return G 
```

这在大型集合上相当耗时（即在 > 15,000 个顶点上大约需要 40 秒）并且成为代码中的瓶颈。如何`G`更快地转换为数据结构？

编辑：

仅供参考，使用`matplotlib.delaunay.delaunay()`输出中心、边、三角形和邻居，这可能很有用。但是，我还没有想出如何将它们用于此目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:41:31.230

您的代码中有很多不必要的操作。您可以在边缘的一次迭代中完成整个操作：

```
G = [{} for i in range(len(points))]
for i,e in enumerate(edges):
  G[e[0]][e[1]] = weights[i]
return G 
```

这应该会将运行时间从`O(P*E)`to减少`O(E)`，因此我希望您会看到相当大的加速。

# php - 使用 'mail' 或 'sendmail' 使用 CodeIgniter 发送电子邮件

> ID：11652991
> 
> 赞同：3
> 
> 时间：2012-07-25T15:15:44.913
> 
> 标签：php, codeigniter, email, smtp, sendmail

我构建了一个需要发送电子邮件的 Intranet 应用程序（低音量）。我将无法使用我组织的 SMTP 服务器，因此我需要通过`sendmail`或发送这些电子邮件`mail`。

但是，当我将电子邮件配置为：

```
$config['protocol'] = 'sendmail'; 
```

我得到：

```
Exit status code: 127
Unable to open a socket to Sendmail. Please check settings.
Unable to send email using PHP Sendmail. Your server might not be configured to send mail using this method. 
```

当我使用时：

```
$config['protocol'] = 'mail'; 
```

我得到：

```
Unable to send email using PHP mail(). Your server might not be configured to send mail using this method. 
```

有什么我应该在 PHP 中设置或检查`phpinfo()`以弄清楚如何让它工作的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T15:31:14.653

好的 - 这很简单。

对于任何面临此问题的人：

1.  首先检查是否安装了 sendmail（实际上是 Postfix）。我正在使用 Ubuntu 11.x。

> cd usr/sbin/

1.  如果找不到sendmail，则需要安装

> ```
> sudo apt-get install postfix 
> ```

1.  我接受了对话框中的默认选项，安装完成后，电子邮件发送没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T15:43:25.543

在 windows os 中，我尝试过 sendmail 类。
你必须把sendmail.exe，sendmail.ini，和另外两个.dll文件放进去，

> C:\wamp\发送邮件

为 gmail 服务器配置 sendmail.ini 文件如下：

```
[sendmail]

smtp_server=smtp.gmail.com
smtp_port=587
smtp_ssl=tls
error_logfile=error.log
debug_logfile=debug.log
auth_username=mymail@gmail.com
auth_password=mypassword
hostname=smtp.gmail.com 
```

然后编辑你的 php.ini 文件，里面有

> C:\wamp\bin\apache\Apache2.2.17\bin

```
sendmail_path="C:\wamp\sendmail\sendmail.exe -t -i" 
```

现在运行你的项目，查看日志文件：

> C:\wamp\sendmail\error.log C:\wamp\sendmail\debug.log

我认为这篇文章可以帮助你..

# installation - 在安装应用程序之前检查先决条件

> ID：11652993
> 
> 赞同：1
> 
> 时间：2012-07-25T15:15:50.273
> 
> 标签：installation, clickonce, setup-deployment, bootstrapper

我正在开发一个应用程序。我正在使用 Microsoft 的 ClickOnce 在用户的计算机上安装我的应用程序。现在我想检查 prerequsites 是否已安装并准备好使用。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:21:10.510

请参阅有关[如何：使用 ClickOnce 应用程序安装先决条件](http://msdn.microsoft.com/en-us/library/8st7th1x%28v=vs.100%29.aspx)的文档，特别是引用：

> 发布 ClickOnce 应用程序时，您可以选择一组必备组件与您的应用程序一起打包。在安装时，将对每个先决条件进行检查，以确定它是否已经存在；如果不是，它将在安装 ClickOnce 应用程序之前安装。

# jquery - optgroup 上的 jQuery 过滤器

> ID：11652995
> 
> 赞同：2
> 
> 时间：2012-07-25T15:15:51.480
> 
> 标签：jquery

我有两个选择框。第一个是第二个的 optgroup 列表。我的查询需要两者，但我想过滤第二个选择以仅显示从第一个选择的区域 optgroup 及其校园。

这是我的代码：

```
<html>
<body>
<select name="region">
    <option value="%">All</option>
    <option value="A">Northwest</option>
    <option value="B">North Central</option>
</select>
<select name="campus">
    <option value="%">All</option>
    <optgroup label="Northwest">
        <option value="1">Gary</option>
        <option value="2">Valparaiso</option>
        <option value="3">East Chicago</option>
    </optgroup>
    <optgroup label="North Central">
        <option value="4">South Bend</option>
        <option value="5">Elkhart</option>
        <option value="6">Warsaw</option>
    </optgroup>
</select>
</body>
</html> 
```

因此，如果有人从第一个中选择 Northwest，我想使用 jQuery 过滤第二个，所以它现在看起来像这样：

```
<select name="campus">
    <optgroup label="Northwest">
        <option value="1">Gary</option>
        <option value="2">Valparaiso</option>
        <option value="3">East Chicago</option>
    </optgroup>
</select> 
```

甚至不确定这是否可能，这是我第一次尝试 jQuery，所以我迷路了。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T15:24:28.347

尝试`.hide()`其他`<optgroup>`的和`.show()`你想要的。

像这样的东西：

```
$('select[name="region"]').change(function() {
    var $sel = $('select[name="campus"]'),
        val = $(this).val(),
        campus = $('option:selected', this).text();
    if (val === '%') {
        $('option,optgroup', $sel).show();
    }
    else {
        $('optgroup, optgroup > option', $sel).hide();
        $('optgroup[label="' + campus + '"]', $sel).children().andSelf().show();
    }
});​ 
```

你不能只隐藏s `<optgroup>`，你也需要隐藏它的孩子`<option>`s。

演示：http: [//jsfiddle.net/rffwW/](http://jsfiddle.net/rffwW/)

**编辑**：似乎在 IE 中不起作用（显然是 Safari）。 [另一个答案](https://stackoverflow.com/a/5414366)建议将 s 包装在`<option>`s 中`<span>`，让我们尝试一下：

```
$('select[name="region"]').change(function() {
    var $sel = $('select[name="campus"]'),
        val = $(this).val(),
        campus = $('option:selected', this).text();
    $('span > optgroup', $sel).unwrap();
    if (val !== '%') {
        $('optgroup:not([label="' + campus + '"])', $sel).wrap('<span/>');
    }
});​ 
```

演示：http: [//jsfiddle.net/rffwW/1/](http://jsfiddle.net/rffwW/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T15:07:15.183

我在这里遇到了类似的解决方案：[https ://gist.github.com/robcowie/2267793](https://gist.github.com/robcowie/2267793)

这是适用于选择文本而不是值的插件：

```
$.fn.filterGroups = function( options ) {
    var settings = $.extend( {filterByText: true}, options);

    return this.each(function(){
        var $select = $(this);
        $select.data('fg-original-groups', $select.find('optgroup').clone()).children('optgroup').remove();

        $(settings.groupSelector).change(function(){
            var $this = $(this);

            var optgroup_label = $.trim($this.val().toUpperCase());
            if(settings.filterByText)
                optgroup_label = $.trim($('option:selected', $this).text());

            var $optgroup =  $select.data('fg-original-groups').filter("optgroup[label='" + optgroup_label + "']").clone();
            $select.children('optgroup').remove();
            $select.append($optgroup);
        }).change();

    });
}; 
```

要使用该插件，请添加您的选择器（我更喜欢使用 ID）：

`$('select[name="campus"]').filterGroups({groupSelector: 'select[name="region"]' });`

# django - 为什么 Django 代码检测不到空字段

> ID：11652996
> 
> 赞同：0
> 
> 时间：2012-07-25T15:16:01.340
> 
> 标签：django

我的表中有一个完全空的列。

我想实现一些逻辑，如果该字段为空，则从 API 链接获取图像。如果它不为空，则使用可用的图像。

当我打开我的数据库时，该字段为空。

但是当我实现这段代码时：

```
if unipart.coverart is None:
     print "yes"
else:
   print "no" 
```

它说“否”，表示该字段已满。

为什么这不起作用，是否有更好的方法来验证这些信息？

编辑：好的，刚试过

```
if not unipart.coverart: 
```

相反，这就成功了。有人可以解释为什么第一种方法不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:34:12.680

空白`CharField`s 和`TextField`s 是空字符串 ( `''`)，*而不是* `None`。所以，你需要测试`unipart.coverart == ''`.

# javascript - Spring - 登录页面有条款和条件页面（使用 Javascript）

> ID：11652997
> 
> 赞同：0
> 
> 时间：2012-07-25T15:16:21.043
> 
> 标签：javascript, jsp, spring-mvc, checkbox, jspx

在我的 Web 应用程序中，我使用的是 Spring MVC。我有 spring MVC 使用的默认登录页面。在我的登录页面中，我需要一个复选框。登录时，用户必须启用复选框，然后单击“登录”按钮。
如果他没有选中“复选框”，则应显示一个弹出窗口（带有一些错误消息）。

我想用javascript来实现这个。

谁能告诉我如何实现这个？

这是我的 JSPX 文件。对不起，它很大

```
<div xmlns:spring="http://www.springframework.org/tags" xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:util="urn:jsptagdir:/WEB-INF/tags/util" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0">
  <jsp:directive.page contentType="text/html;charset=UTF-8" />
  <jsp:output omit-xml-declaration="yes" />
  <spring:message code="security_login_title" var="title" htmlEscape="false" />
  <util:panel id="title" title="${title}">
    <c:if test="${not empty param.login_error}">
      <div class="errors">
        <p>
          <spring:message code="security_login_unsuccessful" />
          <c:out value="${SPRING_SECURITY_LAST_EXCEPTION.message}" />
          .
        </p>
      </div>
    </c:if>
    <c:if test="${empty param.login_error}">
      <p>
        <spring:message code="security_login_message" />
      </p>
    </c:if>
    <spring:url value="/resources/j_spring_security_check" var="form_url" />
    <form name="f" action="${fn:escapeXml(form_url)}" method="POST">
      <div>
        <label for="j_username">
          <spring:message code="security_login_form_name" />
        </label>
        <input id="j_username" type='text' name='j_username' style="width:150px" />
        <spring:message code="security_login_form_name_message" var="name_msg" htmlEscape="false" />
        <script type="text/javascript">
          <c:set var="sec_name_msg">
            <spring:escapeBody javaScriptEscape="true">${name_msg}</spring:escapeBody>
          </c:set>
          Spring.addDecoration(new Spring.ElementDecoration({elementId : "j_username", widgetType : "dijit.form.ValidationTextBox", widgetAttrs : {promptMessage: "${sec_name_msg}", required : true}})); 
        </script>
      </div>
      <br />
      <div>
        <label for="j_password">
          <spring:message code="security_login_form_password" />
        </label>
        <input id="j_password" type='password' name='j_password' style="width:150px" />
        <spring:message code="security_login_form_password_message" var="pwd_msg" htmlEscape="false" />
        <script type="text/javascript">
          <c:set var="sec_pwd_msg">
            <spring:escapeBody javaScriptEscape="true">${pwd_msg}</spring:escapeBody>
          </c:set>
          Spring.addDecoration(new Spring.ElementDecoration({elementId : "j_password", widgetType : "dijit.form.ValidationTextBox", widgetAttrs : {promptMessage: "${sec_pwd_msg}", required : true}})); 
        </script>
      </div>
      <br />
      <div class="submit">
        <script type="text/javascript">Spring.addDecoration(new Spring.ValidateAllDecoration({elementId:'proceed', event:'onclick'}));</script>
        <spring:message code="button_submit" var="submit_label" htmlEscape="false" />
        <input id="proceed" type="submit" value="${fn:escapeXml(submit_label)}" />
        <spring:message code="button_reset" var="reset_label" htmlEscape="false" />
        <input id="reset" type="reset" value="${fn:escapeXml(reset_label)}" />
      </div>
    </form>
  </util:panel>
</div> 
```

我有以下 input.tagx 文件

```
<jsp:root xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:spring="http://www.springframework.org/tags" xmlns:form="http://www.springframework.org/tags/form" xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0">
  <jsp:output omit-xml-declaration="yes" />

  <jsp:directive.attribute name="id" type="java.lang.String" required="true" rtexprvalue="true" description="The identifier for this tag (do not change!)" />
  <jsp:directive.attribute name="field" type="java.lang.String" required="true" rtexprvalue="true" description="The field exposed from the form backing object" />
  <jsp:directive.attribute name="label" type="java.lang.String" required="false" rtexprvalue="true" description="The label used for this field, will default to a message bundle if not supplied" />
  <jsp:directive.attribute name="labelCode" type="java.lang.String" required="false" rtexprvalue="true" description="Key for label message bundle if label is not supplied" />
  <jsp:directive.attribute name="required" type="java.lang.Boolean" required="false" rtexprvalue="true" description="Indicates if this field is required (default false)" />
  <jsp:directive.attribute name="disabled" type="java.lang.Boolean" required="false" rtexprvalue="true" description="Specify if this field should be enabled" />
  <jsp:directive.attribute name="validationRegex" type="java.lang.String" required="false" rtexprvalue="true" description="Specify regular expression to be used for the validation of the input contents" />
  <jsp:directive.attribute name="validationMessageCode" type="java.lang.String" required="false" rtexprvalue="true" description="Specify the message (message property code) to be displayed if the regular expression validation fails" />
  <jsp:directive.attribute name="validationMessage" type="java.lang.String" required="false" rtexprvalue="true" description="Specify the message to be displayed if the regular expression validation fails" />
  <jsp:directive.attribute name="min" type="java.lang.String" required="false" rtexprvalue="true" description="Specify the minimum length of the input contents" />
  <jsp:directive.attribute name="max" type="java.lang.String" required="false" rtexprvalue="true" description="Specify the maximum length of the input contents" />
  <jsp:directive.attribute name="decimalMin" type="java.lang.String" required="false" rtexprvalue="true" description="Specify the minimum size of the input contents" />
  <jsp:directive.attribute name="decimalMax" type="java.lang.String" required="false" rtexprvalue="true" description="Specify the maximum size of the input contents" />
  <jsp:directive.attribute name="disableFormBinding" type="java.lang.Boolean" required="false" rtexprvalue="true" description="Set to true to disable Spring form binding" />
  <jsp:directive.attribute name="type" type="java.lang.String" required="false" rtexprvalue="true" description="Set field type (default 'text', or 'password')" />
  <jsp:directive.attribute name="render" type="java.lang.Boolean" required="false" rtexprvalue="true" description="Indicate if the contents of this tag and all enclosed tags should be rendered (default 'true')" />
  <jsp:directive.attribute name="z" type="java.lang.String" required="false" description="Used for checking if element has been modified (to recalculate simply provide empty string value)" />

  <c:if test="${empty render or render}">

    <c:if test="${empty type}">
      <c:set value="text" var="type" />
    </c:if>

    <c:if test="${empty disabled}">
      <c:set value="false" var="disabled" />
    </c:if>

    <c:if test="${empty label}">
      <c:if test="${empty labelCode}">
        <c:set var="labelCode" value="${fn:substringAfter(id,'_')}" />
      </c:if>
      <spring:message code="label_${fn:toLowerCase(labelCode)}" var="label" htmlEscape="false" />
    </c:if>

    <c:if test="${empty validationMessage}">
      <c:choose>
        <c:when test="${empty validationMessageCode}">
          <spring:message arguments="${fn:escapeXml(label)}" code="field_invalid" var="field_invalid" htmlEscape="false" />
        </c:when>
        <c:otherwise>
          <spring:message arguments="${fn:escapeXml(label)}" code="${validationMessageCode}" var="field_invalid" htmlEscape="false" />
        </c:otherwise>
      </c:choose>
    </c:if>

    <c:if test="${empty required}">
      <c:set value="false" var="required" />
    </c:if>

    <c:set var="sec_field">
      <spring:escapeBody javaScriptEscape="true" >${field}</spring:escapeBody>
    </c:set>

    <div id="_${fn:escapeXml(id)}_id">
      <label for="_${sec_field}_id">
        <c:out value="${fn:escapeXml(label)}" />
        :
      </label>
      <c:choose>
        <c:when test="${disableFormBinding}">
          <input id="_${sec_field}_id" name="${sec_field}" type="${fn:escapeXml(type)}" />
        </c:when>
        <c:otherwise>
          <c:choose>
            <c:when test="${type eq 'password'}">
              <form:password id="_${sec_field}_id" path="${sec_field}" disabled="${disabled}" />
            </c:when>
            <c:otherwise>
              <form:input id="_${sec_field}_id" path="${sec_field}" disabled="${disabled}" />
            </c:otherwise>
          </c:choose>
          <br />
          <form:errors cssClass="errors" id="_${sec_field}_error_id" path="${sec_field}" />
        </c:otherwise>
      </c:choose>
      <c:choose>
        <c:when test="${required}">
          <spring:message code="field_required" var="field_required" htmlEscape="false" />
          <spring:message argumentSeparator="," arguments="${label},(${field_required})" code="field_simple_validation" var="field_validation" htmlEscape="false" />
        </c:when>
        <c:otherwise>
          <spring:message argumentSeparator="," arguments="${label}, " code="field_simple_validation" var="field_validation" htmlEscape="false" />
        </c:otherwise>
      </c:choose>
      <c:set var="sec_field_validation">
        <spring:escapeBody javaScriptEscape="true">${field_validation}</spring:escapeBody>
      </c:set>
      <c:set var="sec_field_invalid">
        <spring:escapeBody javaScriptEscape="true" htmlEscape="true">${field_invalid}</spring:escapeBody>
      </c:set>
      <c:set var="sec_field_required">
        <spring:escapeBody javaScriptEscape="true">${field_required}</spring:escapeBody>
      </c:set>
      <c:set var="sec_validation_regex" value="" />
      <c:if test="${!empty validationRegex}">
        <c:set var="sec_validation_regex" value="regExp : '${validationRegex}', " />
      </c:if>
      <script type="text/javascript">
        Spring.addDecoration(new Spring.ElementDecoration({elementId : '_${sec_field}_id', widgetType : 'dijit.form.ValidationTextBox', widgetAttrs : {promptMessage: '${sec_field_validation}', invalidMessage: '${sec_field_invalid}', required : ${required}, ${sec_validation_regex} missingMessage : '${sec_field_required}' }})); 
      </script>
    </div>
    <br />
  </c:if>
</jsp:root> 
```

我有以下 checkbox.tagx 文件

```
<jsp:root xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:spring="http://www.springframework.org/tags" xmlns:form="http://www.springframework.org/tags/form" xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0">
  <jsp:output omit-xml-declaration="yes" />

  <jsp:directive.attribute name="id" type="java.lang.String" required="true" rtexprvalue="true" description="The identifier for this tag (do not change!)" />
  <jsp:directive.attribute name="field" type="java.lang.String" required="true" rtexprvalue="true" description="The field exposed from the form backing object" />
  <jsp:directive.attribute name="label" type="java.lang.String" required="false" rtexprvalue="true" description="The label used for this field, will default to a message bundle if not supplied" />
  <jsp:directive.attribute name="disableFormBinding" type="java.lang.Boolean" required="false" rtexprvalue="true" description="Set to true to disable Spring form binding" />
  <jsp:directive.attribute name="render" type="java.lang.Boolean" required="false" rtexprvalue="true" description="Indicate if the contents of this tag and all enclosed tags should be rendered (default 'true')" />
  <jsp:directive.attribute name="z" type="java.lang.String" required="false" description="Used for checking if element has been modified (to recalculate simply provide empty string value)" />

  <c:if test="${empty render or render}">
    <c:if test="${empty label}">
      <spring:message code="label_${fn:toLowerCase(fn:substringAfter(id,'_'))}" var="label" htmlEscape="false" />
    </c:if>
    <c:set var="sec_field">
      <spring:escapeBody javaScriptEscape="true">${field}</spring:escapeBody>
    </c:set>

    <script type="text/javascript">dojo.require("dijit.form.CheckBox");</script>
    <div id="_${sec_id}_id">
      <label for="_${sec_field}_id">
        <c:out value="${fn:escapeXml(label)}" />:
      </label>
      <c:choose>
        <c:when test="${disableFormBinding}">
          <input id="_${sec_field}_id" name="${sec_field}" type="checkbox"/>
        </c:when>
        <c:otherwise>
          <form:checkbox id="_${sec_field}_id" path="${sec_field}"/>
        </c:otherwise>
      </c:choose>
      <script type="text/javascript">
        Spring.addDecoration(new Spring.ElementDecoration({elementId : '_${sec_field}_id', widgetType : 'dijit.form.CheckBox', widgetAttrs : {}}));
      </script>
    </div>
    <br />
  </c:if>
</jsp:root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:33:57.553

也许[这个样本](http://jsfiddle.net/rDjJH/1/)有帮助。

在您的代码中：

```
<!-- add the id attribute to your form, to get it with JS -->
<form id="f" name="f" action="${fn:escapeXml(form_url)}" method="POST">
    ...
    <!-- add an input checkbox -->
    <input type="checkbox" id="terms" />
    ....
    <!-- in your input button add onclick attribute calling the JS function -->
    <input id="proceed" onclick="doSubmit()" type="submit" value="${fn:escapeXml(submit_label)}" />
    ...
</form> 
```

这就是你需要的 JS 函数：

```
function doSubmit() {
    var checkbox = document.getElementById("terms");
    if (!checkbox.checked) {
        alert("error message here!");
        return;
    }
    document.getElementById("f").submit();
}​ 
```

希望能帮助到你。