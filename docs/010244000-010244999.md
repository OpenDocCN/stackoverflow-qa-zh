# StackOverflow 问答 10244000-10244999

# jquery - 由于 !important 在 CSS 中无法动画展开折叠

> ID：10244001
> 
> 赞同：1
> 
> 时间：2012-04-20T09:56:55.427
> 
> 标签：jquery, css, slidetoggle

我正在尝试使用 jquery 的 slideToggle 在菜单中实现简单的展开/折叠。我在一个怪物公司网站上工作，它有一些我们无法触摸的 CSS 文件（在服务器中调用），有几个 !important 声明的 CSS 文件，特别是可见性：可见！重要；并显示：块！重要；. 这些声明会干扰 slideToggle 的机制，虽然有动画，但在它结束菜单的那一刻会跳回到“展开”状态。**在jsfiddle**中很清楚：http : [//jsfiddle.net/h2PVT/](http://jsfiddle.net/h2PVT/)。这也是内联代码：

```
<div class="AspNet-Menu-Vertical" id="zz1_CurrentNav">
        <ul class="AspNet-Menu">
            <li class="AspNet-Menu-Leaf">
                <a href="/dg/ias/whoweare/Pages/whoweare.aspx" class="AspNet-Menu-Link">
                    Who we are</a>
            </li>
            <li class="AspNet-Menu-WithChildren  AspNet-Menu-Selected">
                <a href="/dg/ias/whatwedo/Pages/Whatwedo.aspx" class="AspNet-Menu-Link  AspNet-Menu-Selected">
                    What we do</a>
                <ul>
                    <li class="AspNet-Menu-Leaf">
                        <a href="/dg/ias/whatwedo/Pages/Agencies.aspx" class="AspNet-Menu-Link" title="Agencies">
                            Audit in Agencies</a>
                    </li>
                    <li class="AspNet-Menu-Leaf">
                        <a href="/dg/ias/whatwedo/Pages/Commission.aspx" class="AspNet-Menu-Link" title="Audit in the Commission">
                            Audit in the Commission</a>
                    </li>
                    <li class="AspNet-Menu-Leaf">
                        <a href="/dg/ias/whatwedo/reports/Pages/Home.aspx" class="AspNet-Menu-Link" title="IAS reports">
                            Our Reports</a>
                    </li>
                    <li class="AspNet-Menu-Leaf">
                        <a href="/dg/ias/whatwedo/Pages/Listofportfolios.aspx" class="AspNet-Menu-Link" title="List of portfolios">
                            List of portfolios</a>
                    </li>
                    <li class="AspNet-Menu-Leaf">
                        <a href="/dg/ias/whatwedo/Pages/ITAudit.aspx" class="AspNet-Menu-Link" title="IT Audit">
                            IT Audit</a>
                    </li>
                    <li class="AspNet-Menu-Leaf">
                        <a href="/dg/ias/whatwedo/Pages/GRC.aspx" class="AspNet-Menu-Link" title="Description of the audit tool GRC">
                            Our Audit Tool: GRC</a>
                    </li>
                </ul>
            </li>
            <li class="AspNet-Menu-Leaf">
                <a href="/dg/ias/knowledgesharing/Pages/Home.aspx" class="AspNet-Menu-Link">
                    Knowledge Sharing</a>
            </li>
            <li class="AspNet-Menu-Leaf">
                <a href="/dg/ias/tools/Pages/Home.aspx" class="AspNet-Menu-Link" title="Tools and procedures">
                    Tools &amp; Procedures</a>
            </li>
        </ul>

</div> 
```

我使用的 JS：

```
$('.AspNet-Menu-WithChildren a').click(function(e) { e.preventDefault();
    $('.AspNet-Menu-WithChildren ul').slideToggle('slow', function() {
    });
}); 
```

干扰的 CSS（我认为还有更多，但是.. 我想这就足够了）

```
ul.AspNet-Menu ul {
visibility: visible !important;
}

ul.AspNet-Menu ul {
display: block !important;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:08:31.393

我打赌你可以包含一些你自己的 CSS。找到一种方法来做到这一点并制作风格：

```
html body .importantHide { display:none!important;} 
```

像这样制作javascript：

```
$('.AspNet-Menu-WithChildren a').click(function(e) { 
    e.preventDefault();
    $('.AspNet-Menu-WithChildren ul').slideToggle('slow', function() {
        $(this).toggleClass('importantHide');
    });
});​ 
```

这将添加一个类以使其保持隐藏状态。您可能需要更改一些内容才能使其看起来不错。你可以自己做。如果没有，请问！

这是jsfiddle：http: [//jsfiddle.net/Allan/h2PVT/2/](http://jsfiddle.net/Allan/h2PVT/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:09:02.243

[浏览器根据许多标准](http://reference.sitepoint.com/css/cascade)来确定要应用于元素的 CSS 规则集，其中两个是`!important`选择器特异性。我不完全确定，但我认为您可以`!important`通过使用更具体的选择器（例如`ul.AspNet-Menu ul.someClass`）来击败。

除此之外，您可能想尝试通过放置同样重要的规则集来覆盖 CSS。这必须是在您的静态服务器 CSS 之后解释的规则集。

```
ul.AspNet-Menu ul { 
    visibility : inherit !important;
    display : inherit !important;
} 
```

现在这一切都未经测试，我只是在这里进行理论制作，所以你可能想自己检查一下。:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T10:11:47.967

你在这里使用 !important 有什么原因吗？如果您将其取出并从选择器中删除可见性规则：它工作正常

[http://jsfiddle.net/ollie/8MRA5/](http://jsfiddle.net/ollie/8MRA5/)

# jquery - 为什么我的简单 jquery UI 日期脚本 setDate 不正确？

> ID：10244005
> 
> 赞同：1
> 
> 时间：2012-04-20T09:57:20.337
> 
> 标签：jquery, jquery-ui

我为付款时间表制作了一个小脚本。

单击按钮时，会生成一个输入。此输入是来自 jquery ui 框架的日期选择器输入。

在为第一个输入选择日期时，如果生成另一个输入，则开始日期将是前一个日期加上 1 天。

到目前为止，我已经完成了大约一半的工作，但似乎我的 setDate 选项没有按计划工作。

如果您查看[**下面的 jsfiddle，您可以看到到目前为止哪些是有效的，哪些是无效的**](http://jsfiddle.net/rXrYy/1/)。

这是 jquery 代码一目了然：

```
$('#add_payment_schedule_button').live('click',function(){

    // get number of schedule date inputs already...
    var schedule_count = $('.payment_schedule_date_wrap').length;

    // get previous date if there is more than 1 date box already
    if(schedule_count > 0) 
    {
        var previous_date = $('#payment_schedules input.date:last').val();
        alert(previous_date);
    }

    // the new input var for insertion
    var payment_schedule = '<div class="payment_schedule_date_wrap"><input type="text" name="date['+schedule_count+']" class="date date_'+schedule_count+'" placeholder="..." /></div>';

    // insert the new input into the scope
    $('#payment_schedules').append(payment_schedule);

    // load the date picker...
    $('input.date_'+schedule_count).datepicker({ dateFormat: 'dd-mm-yy', setDate: previous_date});

}); 
```

从示例中可以看出，如果您选择日期选择器，选择一个日期，然后添加另一个计划输入，则警报功能会显示您刚刚选择的日期。但它不会将其插入到新的日期选择器中。

我做错了选择器吗？我没看到什么？

我怎样才能简单地将 1 天添加到 previous_date 变量？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:10:17.467

实际上 'setDate' 是一个日期选择器方法，而不是一个选项。

```
 $('input.date_'+schedule_count).datepicker({ 
     dateFormat: 'dd-mm-yy'
 }).datepicker ('setDate', previous_date); 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:02:50.233

据我所知，问题在于您在 if 语句中设置了 previous_date 变量。如果变量在 if 语句中，则只能从该语句中访问它。这应该有效。

如果没有日期，它还将创建一个没有 val 的日期（只是一个验证检查）

```
$('#add_payment_schedule_button').live('click',function(){

    // get number of schedule date inputs already...
    var schedule_count = $('.payment_schedule_date_wrap').length;

    // get previous date if there is more than 1 date box already
var previous_date = "";
if(schedule_count > 0) 
{
    previous_date = $('#payment_schedules input.date:last').val();
    alert(previous_date);
}

// the new input var for insertion
var payment_schedule = '<div class="payment_schedule_date_wrap"><input type="text" name="date['+schedule_count+']" class="date date_'+schedule_count+'" placeholder="..." /></div>';

// insert the new input into the scope
$('#payment_schedules').append(payment_schedule);

// load the date picker...
if(previous_date == "")
{
    $('input.date_'+schedule_count).datepicker({ dateFormat: 'dd-mm-yy' });
}
else
{
    $('input.date_'+schedule_count).val(previous_date).datepicker({ dateFormat: 'dd-mm-yy' });
}

});
}); 
```

编辑：刚刚修复了重复的变量声明问题

编辑：我想我刚刚修好了

# vb.net - 非托管语言或库来编写 shell 扩展？

> ID：10244006
> 
> 赞同：1
> 
> 时间：2012-04-20T09:57:21.033
> 
> 标签：vb.net, com, windows-shell

我需要编写一个级联外壳扩展[à la 7Zip](http://cdn.ghacks.net/wp-content/uploads/2010/03/7-zip_windows_explorer-500x384.jpg)。似乎只有 .Net 4 框架支持这一点，但即使在 2012 年 3 月，[MS 仍然建议不要](http://msdn.microsoft.com/en-us/library/windows/desktop/dd758089%28v=vs.85%29.aspx)为此目的使用托管语言。

那么有哪些非托管语言可用于为 Windows（XP、Vista、7）编写 shell 扩展？

我读到即使对于经验丰富的 C++ 开发人员来说，编写 COM DLL 也不容易，所以对于非专业人士来说，这可能是一条死胡同。十年来，VB6 一直是死软件。我查看了 PureBasic 和 PowerBasic，但它们似乎也不是很好的候选者。

那么是不是就没有相当简单的语言来编写级联 shell 扩展？

作为一种解决方法，是否有一个我可以从 VB.Net 调用的库来处理困难的部分？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:26:42.293

如果您不愿意进入无人管理的世界，您将无能为力。有一系列关于 codeproject 的文章。[这](http://www.codeproject.com/Articles/441/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens)是此类文章中的第一篇。他们对我帮助很大。它是使用 Visual Studios ATL 项目以非托管 C++ 编写的，该项目负责处理您原本必须处理的其他一些类。

COM 对象可能不是最容易理解的东西，但是一旦它们开始工作，它们就相当可靠了。如果有的话，就把它当作一种学习经历。

# netty - 使用 ClientBootstrap 连接到具有显式本地地址的 LocalChannel

> ID：10244015
> 
> 赞同：0
> 
> 时间：2012-04-20T09:58:02.537
> 
> 标签：netty

我希望能够在连接到使用 DefaultLocalServerChannelFactory 创建的 LocalChannel 服务器时指定一个明确的本地地址，而不是依赖于“Ephemeral”。

（这样做的原因是我希望能够建立多个连接并让服务器使用远程地址对相关连接进行分组）。

如果我调整提供的 LocalExample 类，只需更改：

```
ChannelFuture channelFuture = cb.connect(socketAddress); 
```

至：

```
ChannelFuture channelFuture = cb.connect(socketAddress, new LocalAddress("C1")); 
```

抛出通道异常（已经绑定），因为通道首先由 ClientBootstrap 绑定，然后再次由 LocalClientChannelSink 绑定，后者在连接时始终绑定通道：

```
 bind(channel, succeededFuture(channel), new LocalAddress(LocalAddress.EPHEMERAL)); 
```

如果我忽略该异常，一切似乎都正常，并且通道的端点确实具有非默认本地地址。

但是，如果可能的话，我更愿意找到一种避免异常的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:05:31.777

这听起来像一个“错误”。你能在 netty 的 bugtracker 中打开一个问题吗？

# node.js - 带有嵌入式数据库和脚本的完整的小型 Web/应用程序服务器

> ID：10244022
> 
> 赞同：1
> 
> 时间：2012-04-20T09:58:28.483
> 
> 标签：node.js, mongodb, embedded-database, appserver

我什至不知道要问什么问题，但无论如何我都会尝试我需要一个占用空间小的“应用程序服务器”，它将托管一个数据库、脚本语言和一个 Web 服务器——所有这些都在一个进程中。不需要像 Java、.Net 或 Ruby 这样的外部 SDK/框架的东西——只是一个带有一堆脚本文件和我的自定义代码的 exe。

该功能应包括：http 服务器、用于常见任务的脚本编程 API（数据库访问、http 通信、系统 API 接口）和嵌入式数据库/键值存储。它应该适用于 windows 和 unix。

例如 MongoDB 没有外部依赖，有一个内置的数据库，内部也有 javascript 解释器。但它不能运行自定义脚本或加载扩展库（afaik）——它不是为应用服务器而设计的。但如果是的话，这将是我正在寻找的。

有什么建议/想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:12:17.000

大多数脚本语言都适用于此，例如 Python 或 Tcl，因为它们可以加载 SQLite3 绑定并在单个进程中运行 Web 应用程序服务器。其中许多语言还具有以其母语实现的更简单的数据库。

如果您对 Lua 感到满意，它可能是一个特别好的选择，因为它很容易将其剥离为相对较少的文件。

# sqlite - 如何在 SQLite Manager 上编写 TRIGGER

> ID：10244027
> 
> 赞同：0
> 
> 时间：2012-04-20T09:58:39.727
> 
> 标签：sqlite, firefox, triggers

我想触发一个触发器，当在我的名为“tickets”的表中，名为“summary”的列是一个特异性短语时，它会将名为“id”的列（在同一个表中）更新为我想要的数字

这是我有的语法，但它不起作用

```
CREATE TRIGGER IF NOT EXISTS paulo  AFTER  INSERT ON tickets  
FOR EACH ROW  BEGIN 
if (summary) ='quero mudar o ano'
 update id  set id='2013000000';
END IF;
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:23:59.430

此语法错误是因为 SQLite 不允许在触发器中使用 IF 子句。这是规范**[http://sqlite.org/lang_createtrigger.html](http://sqlite.org/lang_createtrigger.html)**

```
 CREATE TRIGGER IF NOT EXISTS paulo  AFTER  INSERT ON tickets  
FOR EACH ROW  
WHEN (summary) ='quero mudar o ano'
BEGIN 
 update id  set id='2013000000';

END; 
```

O Problema é que se você quiser comparar um outro valor será preciso criar uma outra trigger, ja que não é possivel usar o ELSE IF。:(

# symfony - Symfony 2.0 KnpMenu 自定义模板

> ID：10244030
> 
> 赞同：4
> 
> 时间：2012-04-20T09:58:47.147
> 
> 标签：symfony, menu, icons, knpmenu

我试图从**knpMenu**修改模板。我将其重命名为`knp_main_menu.html.twig`

**配置.yml：**

```
knp_menu:
    twig:
        template: knp_main_menu.html.twig
    templating: true
    default_renderer: twig 
```

`knp_menu.html.twig`有效，但我的文件（原件的精确副本）无效。有没有办法做到这一点？

我的最终目标是制作适用于图标的模板：

例如：

```
$menu->addChild('Grupy', array(
            'route' => 'group',
            'attributes' => array(
                'title' => 'Dodaj nową grupę',
                'data-icon' => 'group',
                'data-id' => 'groups_list',
            )
        )); 
```

应该产生这样的东西：

```
<ul>
    <li title="Dodaj nową grupę" data-id="groups_list" data-icon="group">
        <a href="...">
            <img src="somedir/group.png" /> Grupy 
        </a>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T08:43:28.930

这很简单：

```
{{ knp_menu_render('AlefDemoBundle:Builder:mainMenu', { 'template': 'AlefDemoBundle:Menu:knp_main_menu.html.twig' }) }} 
```

里面的树枝模板。

# android - Android 弹出箭头

> ID：10244032
> 
> 赞同：5
> 
> 时间：2012-04-20T09:58:54.180
> 
> 标签：android, popup

单击按钮时，我需要创建一个弹出菜单。弹出窗口应该集中在我点击的内容上（我曾经将这种类型的弹出窗口称为箭头弹出窗口）。

这是示例图像的链接：

![示例图像](../Images/c2d8be26d4ae86570708f837dc89fc5d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:07:04.070

据我了解，您正在尝试创建`Quick Actions bar`. 以下链接应该可以帮助您：

[http://web.archive.org/web/20170710025043/http://www.xoriant.com/blog/android/android-ui-design-pattern-quick-action-bar.html](http://web.archive.org/web/20170710025043/http://www.xoriant.com/blog/android/android-ui-design-pattern-quick-action-bar.html)

[http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

# c# - 如何为电子邮件中的占位符编码？

> ID：10244034
> 
> 赞同：3
> 
> 时间：2012-04-20T09:59:04.590
> 
> 标签：c#, asp.net-mvc, algorithm, design-patterns

要求是在我正在工作的应用程序中，我使所有电子邮件都可以编辑。

显而易见的解决方案是将所有消息存储在数据库中，并使用文本编辑器供用户编辑消息。

但是，我想知道如何设计电子邮件中的占位符。

消息的占位符也必须存储在数据库中。一条消息可以有许多占位符。占位符可以在许多消息中。

我可以允许用户在插入占位符时从占位符列表中选择一个占位符。

电子邮件消息需要包含占位符标记，通常是 {0}、{1} 等，但出于显示目的，这需要更加用户友好，例如 $WebsiteLink$。一些占位符是直截了当的，例如仅根据部署或登录用户的名称更改的网站链接。

其他占位符更复杂。它们依赖于在特定时间从数据库中获取信息，例如选定的团队成员姓名。所以对于这个占位符而不是保存一些静态文本，我可能需要调用一个方法或事件来获取该信息。

我不清楚如何做到这一点。你能帮我吗？

我希望规格清楚，如果没有，请告诉我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:11:43.753

如需简单的`String.Format`替换，请查看Phil Haack 的[这篇博](http://haacked.com/archive/2009/01/04/fun-with-named-formats-string-parsing-and-edge-cases.aspx)文（以及后续文章）。

那里的解决方案意味着您可以使用命名占位符，例如`{name}`or`{date}`而不是`{0}`.

这并不能解决整个 UI 问题，但至少占位符更清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:23:17.667

要么你可以按照哥特人的建议去做（或者甚至看看[这个](http://razorengine.codeplex.com/)，我没用过，但看起来很可爱），或者有另一种方式：

1.你建立一个HTML模板，我们称之为`mailTemplate.html`：

（当心，桌子......）

```
<table>
    <tr>
        <td> 
            <%MY_PLACEHOLDER%>
        </td>
    </tr>
</table> 
```

2.然后你可以简单地在一个方法中使用它，假设这`templatePath`是你的模板文件的物理路径：

```
var mailDefinition = new MailDefinition
                         {
                              BodyFileName = templatePath,
                              IsBodyHtml = true,
                              From = ... // you'll have to fill that
                         };
string replacementForPlaceholder = "Look at me!";
var replacements = new ListDictionary { { "<%MY_PLACEHOLDER%>", replacementForPlaceholder }};

string recipients = ... // well, specify recipients
var message = mailDefinition.CreateMailMessage(recipients, replacements, new LiteralControl()); 
```

您的消息已准备好发送。如果您没有对 HTML 表格和诸如此类的东西过于疯狂，那么如果收件人禁用了 HTML，邮件就会优雅地降级为文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:06:24.337

上个月，我实现了以下使用 Razor 语法的基于模板的 EmailModule。它应该适用于您的情况。它很容易实现。

[http://kazimanzurrashid.com/posts/use-razor-for-email-template-outside-asp-dot-net-mvc](http://kazimanzurrashid.com/posts/use-razor-for-email-template-outside-asp-dot-net-mvc)

感谢 Kazi Manzur Ra​​shid。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-13T06:04:53.347

C# now supports interpolation. For anyone still worrying about this, take a look [here](https://msdn.microsoft.com/en-us/library/dn961160.aspx).

# c# - 将优化算法与应用程序分离

> ID：10244035
> 
> 赞同：2
> 
> 时间：2012-04-20T09:59:06.087
> 
> 标签：c#, windows, architecture, service, n-tier-architecture

我刚刚开始做我的硕士论文。我的任务是创建一个优化公寓供暖的系统。公寓配有测量当前温度的传感器。

通过使用这些温度和其他一些措施，可以完成优化，并将信号发送回调节温度的公寓。优化将以循环方式 24/7 循环通过所有公寓进行。

因此，系统必须与传感器通信、进行优化并记录数据。此外，应为公寓提供基于 webb 的用户界面，以便他们可以看到当前的电力/水消耗量。

该系统将使用 C#/.Net 编写。

我没有构建大型系统的必备经验，对.Net 的经验也很有限。我最初的想法是建立一个 N 层架构，其中在最高级别提供两个接口。为用户提供一个 Web 界面，然后为传感器提供某种界面（在架构中具有以下优化算法）。

![初步架构](../Images/90ce926734133e6160cd70404622a0de.png)

我想在架构中尽可能多地重用组件，但有一个限制，我想尽可能地将优化算法与其余部分分开。也就是说，算法中的崩溃不应影响系统的其余部分（可能传感器接口除外）。

所以，我的问题是。我应该以什么方式实现优化部分？我应该创建一个 Windows 服务还是让它在自己的线程中运行？

如果 Windows 服务是一个不错的选择，是否可以在层次结构中进一步使用组件？也就是说，数据库存储库、所有对象等。

是建筑的选择好。如果不是，为什么？

在设计/实施系统时我应该考虑什么特别的事情吗？

笔记。目前尚不清楚传感器与系统之间的通信将如何进行。

祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:53:08.473

首先，关于您的方法的一些评论。我对您的建议是尽可能简单地构建系统。避免 n 层思维、服务和其他复杂的事物——直到你需要它。然后当你发现你需要它时，你可以创建它。

在构建系统时专注于增值。不要开始创建可重用的组件和算法（您后来发现它们不像您最初想象的那样可重用或可用）。相反，首先要为最终用户解决问题。用最简单的方法解决它。然后解决下一个问题。然后分析您的代码，看看您是否可以找到可以提取到可重用部分的通用部分。然后通过解决另一个问题重复。

每次都尽量解决小问题。当你解决了 10 或 20 个问题时，你会发现你已经或可以以某种方式创建某种分层或组件化。

通过创建多个传感器来为传感器创建接口。当只有一个传感器时，您只能猜测界面应该是什么样子。有了更多的传感器，你就会知道。

关于鲁棒性（调用传感器时不会崩溃），这取决于您想要它的鲁棒性。在传感器上调用方法并因此在同一进程中执行传感器代码时的包罗万象，将捕获大多数问题并且是最简单的解决方案。我肯定会从这个开始。除非您需要它（例如创建响应式 UI），否则我什至不会在不同的线程中执行它。

将传感器移动到它自己的进程（服务）将使操作系统处理诸如写入坏内存之类的问题。但是，如果传感器是用 C# 编写的，您通常不会遇到此类问题。

如果您选择将传感器代码放在服务中，仍然可以重用代码。只需将公共代码放在两个进程都可以访问的程序集中。

# vb.net - 从richtextbox中删除没有背景颜色的字符串

> ID：10244037
> 
> 赞同：0
> 
> 时间：2012-04-20T09:59:35.010
> 
> 标签：vb.net, richtextbox

我有一个richtextbox，其中包含我从网页获得的一些文本。我需要删除所有没有背景颜色的文本，但我也想将市场词保持在与删除行之前相同的行中。这是文本的示例：

[打印屏幕](http://imageshack.us/photo/my-images/834/98428801.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:13:29.503

一种巧妙的方法是反过来并逐个检查每个字符。

```
For i As Integer = RichTextBox1.TextLength - 1 To 0 Step -1
  RichTextBox1.Select(i, 1)
  If Not (RichTextBox1.SelectedText = Chr(10) Or _
          RichTextBox1.SelectedText = Chr(13)) Then
    If RichTextBox1.SelectionBackColor.R = 255 AndAlso _
       RichTextBox1.SelectionBackColor.G = 255 AndAlso _
       RichTextBox1.SelectionBackColor.B = 255 Then
      RichTextBox1.SelectedText = String.Empty
    End If
  End If
Next 
```

这可能非常不稳定，在这种情况下，尝试在代码中创建一个新的 RichTextBox 控件，传输内容，然后在那里完成工作。然后将结果传输回现有的 RichTextBox 控件。

# excel - 如何使用 VBA 在 Excel 工作表中的现有形状之后粘贴形状？

> ID：10244040
> 
> 赞同：2
> 
> 时间：2012-04-20T09:59:53.693
> 
> 标签：excel, vba, copy-paste, shape

我想复制一个形状并将其粘贴到一个已经包含一个或多个形状的工作表中。我尝试使用以下简单代码：

```
myShape.Select
Selection.Copy
ActiveWorkbook.Sheets(mySheet).Paste 
```

但它会将其粘贴在工作表中现有形状的上方......

是否有解决方案来检测现有形状的结尾或直接粘贴在之后？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T10:12:35.970

这是你正在尝试的吗？

```
Sub Sample()
    Dim myShape As Shape

    Set myShape = ActiveSheet.Shapes("Rectangle 1")

    myShape.Copy

    ActiveSheet.Paste

    With Selection
        .Top = myShape.Height + 10
        .Left = myShape.Left
    End With
End Sub 
```

如果有更多形状，那么您将不得不遍历所有形状，然后找到最后一个形状并考虑该`.Top`形状`.Height`。

看这个例子

```
Option Explicit

Sub Sample()
    Dim myShape As Shape, shp As Shape
    Dim sHeight As Double, sTopp As Double

    For Each shp In ActiveSheet.Shapes
        If shp.Top > sTopp Then
            sTopp = shp.Top
            sHeight = shp.Height
        End If
    Next

    Set myShape = ActiveSheet.Shapes("Rectangle 1")

    myShape.Copy

    ActiveSheet.Paste

    With Selection
        .Top = sTopp + sHeight + 10
        .Left = myShape.Left
    End With
End Sub 
```

# visual-c++ - 忽略特定 .lib 文件中的“defaultlib”指令

> ID：10244041
> 
> 赞同：1
> 
> 时间：2012-04-20T09:59:54.480
> 
> 标签：visual-c++, static-linking

我正在尝试构建一个 Win32 应用程序，该应用程序将使用第 3 方 .lib。我收到找不到“LIBC”的错误（我使用的是 Visual C++ 2010 express），并且我已经跟踪了对 3rd 方库的引用。添加“/NODEFAULTLIB”解决了对 LIBC 的引用，但反过来提供了过多的缺失符号（当然）。我知道 LIBC 是单线程的，并且会让人头疼，但现在我只是想获得一个成功的链接。

最好的问候，索伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:24:26.523

这只是对链接器的提示，注入了#pragma comment(lib, "libc.lib")。`/NODEFAULTLIB:libc.lib`链接器选项再次将其熄灭。如果您现在遇到链接器错误，那么您实际上*确实*需要显式链接到 libc.lib。

否则不太可能有一个好的结局，该图书馆可以追溯到上个世纪。现代版本的 VS 使用 libcmt.lib，不再有 CRT 的单线程版本。因此，如果此 libc.lib 引用来自上个世纪编译的 .lib 或 .obj，那么您将遇到更大的问题。编译器头文件已经改变太多，仍然允许它工作。

不发布链接器错误会阻止更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:55:21.707

在那里，我修好了！

看来我只需要睁开眼睛，转到：Project->Properties->Linker->Input

我只需要将“libc”添加到“忽略特定默认库”，而不是只启用“忽略所有默认库”。

这件事甚至可以工作（只是快速运行）。由于使用了标准 C 库的多线程版本，当然可能存在隐藏错误，但到目前为止还不错！

# floating-point - 计算以 2、10 和 16 为底的浮点数

> ID：10244044
> 
> 赞同：4
> 
> 时间：2012-04-20T10:00:11.150
> 
> 标签：floating-point

我正在阅读我的笔记并发现以下内容：

```
For every real number there are various ways of representing
it in such a way. Therefore, computers fix two parameters (so
they do not need to be stored, and arithmetic is more
convenient):

- the base b (normally, it is 2, 10 or 16) and
- the position of the decimal (or binary) point (by normalising
the mantissa such that it satisfies 1/b ≤ m < 1)

Example: Normalised representations for r := 12.25 are,
- for b = 2, r = 1 × 0.110001 × 2^4,
- for b = 10, r = 1 × 0.1225 × 10^2 and,
- for b = 16, r = 1 × 0.C4 × 16^1. 
```

对于值 12.25，您如何计算以 2、10 和 16 为底的浮点数。我不太确定讲师是如何得出 b = 2、b = 10 和 b = 16 的答案的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T13:48:24.083

从示例中，您的讲师对“标准化”的定义似乎是将数字表示为 +1 或 -1 乘以某个 x 乘以底数的整数幂，其中 x 是小于 1 的最大值乘积等于表示的数字。此外，x 以底数表示。

例如，考虑以 2 为底的 12.25。暂时以 10 为底，我们可以将 12.25 表示为 1×12.25×2 ⁰或 1×6.125×2 ¹或 1×3.0625×2 ²或 1×1.53125×2 ³或 1 ×.765625×2 ⁴或 1×.3828125×2 ⁵，以此类推。其中，我们可以看到 .765625 是适合该表格的小于 1 的最大值。因此，我们将 12.25 表示为 1×.765625×2 ⁴。然后我们需要将 .765625 转换为基数 2。

您可能在之前的课程中已经介绍过，但我们可以这样做：将 .765625 乘以 2（得到 1.53125）并将整数部分 (1) 与分数 (.53125) 分开。将分数乘以 2 (1.0625) 并再次分离（1 和 .0625）。重复新的分数（0 和 .125）。继续重复直到分数为零或者你有任意数量的数字：0 和 .25、0 和 .5、1 和 0。列出你得到的整数：1 1 0 0 0 1。现在是基数为二的数字你想要的是一个句点，后面跟着这些数字：.110001。因此，以 2 为底的 12.25，根据您的讲师的定义进行归一化，是 1×.110001×2 ⁴。

找到 x 的正确值的规则可能是：从指数 0 开始。如果 x 大于 1，则将其除以底数并在指数上加一。如果 x 小于 1/base，则将其乘以基数并从指数中减去 1。重复此操作，直到 x 介于 1/base 和 1 之间（包括 1/base 但不包括 1，所以如果 x 等于 1/base 则停止）。

对于 12.25 和十进制：从指数 0 开始。将 12.25 除以 10（得到 1.225）并将指数增加到 1。再次除以 (.1225) 并将指数增加到 2。现在我们停止，因为 .1225 介于 1/10 和1.

对于 12.25 和基数 16：从指数 0 开始。将 12.25 除以 16（得到 .765625）并将指数增加到 1。现在停止，因为 .765625 在 1/16 和 1 之间。

要将 .765625 转换为基数 16：将 .765625 乘以 16 得到整数 12（数字 C）和小数 0.25。将 0.25 乘以 16 得到整数 4 和小数 0。小数为 0，所以停止。基数为 16 的数字是 .C4，所以整个形式是 1×.C4×2 ¹。

有时，将使用“标准化”的其他定义。通常，我们不是将 x 调整到 1/base 和 1 之间，而是将 x 调整到 1 和 b 之间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T10:16:55.843

我们试图以各种基数表示数字 12.25。所以没有标准化。

对于二进制：

```
 12    - > 1100
   0.25  - > .01  (1 * (1/2)^2)
so 12.25   = 1100.01 
```

对于十六进制：

```
 12    - > C
   0.25  - > .4   (4 * (1/16)^1)
so 12.25   = C.4 
```

然后小数点与指数项一起移动。

希望有帮助。

我想这不是答案，因为我没有描述任何方法。因此，这里有一些指向 MathForums 上有关该主题的讨论的链接。

[带二进制数的长除法](http://mathforum.org/library/drmath/view/55951.html)

[浮点二进制分数](http://mathforum.org/library/drmath/view/55917.html)

[Math 博士关于基础的常见问题解答](http://mathforum.org/dr.math/faq/faq.bases.html)

我仍在寻找 Base 16 浮点除法的好指南

[Base Convert](http://baseconvert.com/)和[Digit Convert](http://www.digitconvert.com/)是可以处理浮点数的在线基础转换器。

这些站点使用 Javascript，因此可以访问正在使用的算法。

# java - 有什么方法可以知道 C++ 的模板中有什么样的函数？

> ID：10244045
> 
> 赞同：1
> 
> 时间：2012-04-20T10:00:11.907
> 
> 标签：java, c++, templates

我正在尝试使用模板将用 Java 编写的代码重写为 C++。这是一个例子。

代码如下所示：

```
class IBookUpdatedHandler {
public:
    virtual ~IBookUpdatedHandler() {}
    virtual void updateBook(int bookIndex)=0;
};

class IBookFiredHandler {
public:
    virtual ~IBookUpdatedHandler() {}
    virtual void fireBook(int bookIndex)=0;
};

template <typename T>
class Dispatcher {
private:
    list<T> listeners;
    const char* methodName;

public:
    Dispatcher(const char* name) {
        this->methodName = name;
    }

    void add(T listener) {
        listeners.push_back(listener);
    }

    void dispatch() {
        // listeners loop
        for(typename list<T>::iterator pos = listeners.begin(); pos != listeners.end(); pos++)
        {
            // i don't know what is in the box .. (list<T>)..
            // call ..
            // listener could have (*pos)->do_somethig() ?
        }
    }
};

Dispatcher<IBookUpdatedHandler*> *dispatcher = new Dispatcher<IBookUpdatedHandler*>("updateBook");
Dispatcher<IBookFiredHandler*> *dispatcher = new Dispatcher<IBookFiredHandler*>("fireBook"); 
```

我想在函数中调用 a `updateBook`or但是，在 C++ 中，我认为没有办法知道类型名中有什么。`fireBook``dispatch()`

**是否有与 Java 等效的 C++ `getMethod`？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:06:37.447

您不能像在 Java 中那样在运行时选择函数。您可以使用`dynamic_cast<>`来确定对象的类型，然后调用适当的函数。

我认为更好的解决方案是让两个类共享相同的功能：

```
class IBookGenericHandler {
public:
    virtual void genericBook(int bookIndex)=0;
};

class IBookUpdatedHandler:public IBookGenericHandler {
public:
    virtual ~IBookUpdatedHandler() {}
    virtual void updateBook(int bookIndex)=0;
    virtual void genericBook(int bookIndex) { updateBook(bookIndex) }
};

class IBookFiredHandler:public IBookGenericHandler {
public:
    virtual ~IBookUpdatedHandler() {}
    virtual void fireBook(int bookIndex)=0;
    virtual void genericBook(int bookIndex) { fireBook(bookIndex) }
}; 
```

然后你可以调用`genericBook`你的`for`循环，它会处理这两个函数中的哪一个需要被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:03:37.623

您可以尝试使用[dynamic_cast](http://en.cppreference.com/w/cpp/language/dynamic_cast)检查类型。
但是 C++ 中不存在与 Java 中相同的强大反射，您可以查看特定于实现。

无论如何，不​​确定我是否正确理解了您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:04:36.927

[这个问题与C++ Get name of type in template](https://stackoverflow.com/questions/1055452/c-get-name-of-type-in-template)有点相关，接受的答案应该足够了，即在代码中定义一种解析器。或者你可以使用[`type_info`](http://www.cplusplus.com/reference/std/typeinfo/type_info/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:18:32.583

如果您使用最新标准（C++11，以前称为 C++0x）的功能，我建议您使用 lambda 表达式和通用函数指针：

```
template <typename T> 
class Dispatcher { 
private: 
    std::list<T> listeners; 
    std::function<void(T)> caller;

public: 
    Dispatcher(function<void(T)> caller) : caller(caller) {} 

    void add(T listener) { 
        listeners.push_back(listener); 
    } 

    void dispatch() { 
        // listeners loop 
        for(typename std::list<T>::iterator pos = listeners.begin(); pos != listeners.end(); pos++) 
        {
            caller(*pos);
        }
    } 
}; 

Dispatcher<IBookUpdatedHandler*> *dispatcher1 = new Dispatcher<IBookUpdatedHandler*>( 
    [](IBookUpdatedHandler* p) { p->updateBook(0); } 
); 

Dispatcher<IBookFiredHandler*> *dispatcher2 = new Dispatcher<IBookFiredHandler*>( 
    [](IBookFiredHandler* p) { p->fireBook(0); } 
); 
```

如果你不能使用 C++11，那么你可以使用[Boost::function](http://www.boost.org/doc/libs/1_49_0/doc/html/function/tutorial.html#id1529542)来代替，但它会不太清楚。

作为旁注，在大多数情况下，您应该使用`std::vector`而不是`std::list`.

# command-line - 如何删除 Drush 安装

> ID：10244050
> 
> 赞同：4
> 
> 时间：2012-04-20T10:00:29.253
> 
> 标签：command-line, command, drush

我用 sudo apt-get install drush 安装了 Drush。

我现在怎样才能删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:32:39.080

只是有同样的问题，以这种方式安装 drush 会让你得到一些根本不起作用的东西......

尝试这个：

> sudo apt-get 删除 drush

然后像这样安装它：

```
sudo wget --quiet -O - http://ftp.drupal.org/files/projects/drush-7.x-5.1.tar.gz | sudo tar -zxf - -C /usr/local/share
sudo ln -s /usr/local/share/drush/drush /usr/local/bin/drush
sudo drush 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T20:07:05.053

也许你可以输入它：

```
sudo apt-get autoremove drush 
```

我建议使用PEAR chanel 安装，如官网所述，更易于更新和管理：

```
sudo pear channel-discover pear.drush.org
sudo pear install drush/drush 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-07T05:47:15.473

要手动删除它：

```
rm /var/lib/dpkg/info/drush.*
dpkg --remove --force-remove-reinstreq drush 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T14:06:49.273

尝试 >**[这个技巧](http://www.hackido.com/2009/11/force-uninstall-package-in-debianubuntu.html)**< 以强制卸载 Debian/Ubuntu 中的应用程序。然后，“删除” drush 的其余部分只是删除您安装它的位置。如果您完全不知道/不记得，请像这样搜索“drush”：

```
find / -type d -name 'drush' #to find any directories named drush 
find / -type f -name 'drush' #to find any folders named drush 
```

这将帮助您找到 Drush 安装文件夹的残余，以便在重新安装 Drush 之前清理它们。

不过老实说，我会按照[lfx](https://stackoverflow.com/users/1370659/lfx)在他的评论中注释的方式**手动安装 Drush 。**Drush 主要版本之间的语法更改，如果您让 apt 管理它，您可能会无意中升级您的 Drush 安装。此外，通过控制您的 Drush 安装，您可以通过将每个 Drush 版本安装到不同的位置并为用户的 shell 环境使用符号链接来为不同的站点/用户安装不同的 Drush 版本。

# mysql - 查询帮助获取准确的日期时差

> ID：10244055
> 
> 赞同：-1
> 
> 时间：2012-04-20T10:00:58.683
> 
> 标签：mysql

我有一个查询，它获取插入记录与当前日期的时间和日期差异。

这是示例。

```
select
datediff(date(now()),'2012-04-15 16:14:59') as DateDifference,
timediff(now(), '2012-04-15 16:14:59') as TimeDifference 
```

但是这个给了我以下结果：

> 日差时差5 112:26:22

我真的很想知道两者之间的确切区别。

例子：

> 5 8:24:22

其中 5 是日期，8:24:22 是时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:24:28.600

尝试这个

```
SELECT floor((date1-date2)*24) || ' HOURS ' ||
mod(floor((date1-date2)*24*60),60) || ' MINUTES ' ||
mod(floor((date1-date2)*24*60*60),60) || ' SECS ' as time_difference
FROM dates; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:34:29.973

```
DateTime startTime = DateTime.Now;
DateTime endTime = DateTime.Now.AddSeconds( 75 );
TimeSpan span = endTime.Subtract ( startTime );
Console.WriteLine( "Time Difference (seconds): " + span.Seconds );
Console.WriteLine( "Time Difference (minutes): " + span.Minutes );
Console.WriteLine( "Time Difference (hours): " + span.Hours );
Console.WriteLine( "Time Difference (days): " + span.Days ); 
```

输出将是：

```
Time Difference (seconds): 15
Time Difference (minutes): 1
Time Difference (hours): 0
Time Difference (days): 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:37:00.267

试试这个查询：

```
select 
date(now()) date1, 
date('2012-04-15 16:14:59') date2,
datediff(date(now()),'2012-04-15 16:14:59') as DateDifference,
TIME(now()) time1, 
TIME('2012-04-15 16:14:59') time2, 
timediff(TIME(now()), TIME('2012-04-15 16:14:59')) as TimeDifference 
```

这将为您提供确切的差异和比较。

希望这可以帮助。

# c# - 数据库和 SQL C#

> ID：10244057
> 
> 赞同：0
> 
> 时间：2012-04-20T10:01:11.403
> 
> 标签：c#, sql-server, visual-studio-2010

我知道我以前问过类似的问题，但我仍然无法让它工作。

我在 VS2010 中使用 C#

我正在做的是创建一个应用程序，该应用程序在`textbox1`单击按钮时接受用户输入的单词，并且`"*"`在它们前面的所有单词都打印在`textbox2`

我正在使用 SQL Server 数据库来执行此操作，因为我希望将`"*"`单词存储在数据库中，以便稍后添加一个计数器来显示该单词已输入了多少次。

例如：

*   用户进入`the cat is *brown`，`textbox1`按下按钮，然后`*brown`出现在`textbox2`

我的 SQL Server 代码是这样的：

```
SqlConnection con = new SqlConnection(@"Server=.\SQLEXPRESS;Database=StoreList;Integrated Security=sspi");

con.Open();
String queryStr = "SELECT item FROM StoreList WHERE item LIKE '*%'";
SqlCommand com = new SqlCommand(queryStr, con);
SqlDataReader sdr = com.ExecuteReader();

while (sdr.Read())
{
   this.textbox2.Text = sdr.GetValue(0).ToString();
}

sdr.Close(); 
```

我需要帮助的是如何进一步开发该代码以使应用程序正常工作。所以我不知道如何让它从 textbox1 中获取单词。

有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:21:24.027

忽略您的代码示例，在我看来，这里发生了几件事。

1.  你想建立一个输入到 textbox1 中的加星词列表
2.  您想将加星标的单词列表输出到 textbox2
3.  存储加注字的频率列表

第 1 点和第 2 点可以在不与数据库交互的情况下完成。也许使用正则表达式来匹配带有 * 的单词。

第 3 点应该是执行 sql 语句的情况，该语句要么插入计数为 1 的新单词，要么将已知单词的计数更新 1。

**编辑以下评论**

第 1 点 - 建立一个单词列表

```
var matches = new System.Text.RegularExpressions.Regex("\\*[^ \t]+").Matches(textbox1);

foreach (Match match in matches)
    Console.WriteLine(match.Value); 
```

第 3 点 - 存储频率列表的单词

```
//using statement to ensure connection is cleaned up correctly
using (SqlConnection connection = new SqlConnection(@"Server=.\SQLEXPRESS;Database=StoreList;Integrated Security=sspi"))
{
    connection.Open();

    foreach (Match match in matches)
    {
        var command = new SqlCommand("UpdateWordFrequency", connection);

        command.CommandType = System.Data.CommandType.StoredProcedure;
        command.Parameters.Add(new SqlParameter("@word", match.Value));

        command.ExecuteNonQuery();
    }
} 
```

程序看起来像这样

```
create procedure UpdateWordFrequency
    @word varchar(50)
as
if not exists (select 1 from WordList where word = @word)
    insert into WordList (word, frequency) values (@word, 0)

update WordList set frequency = frequency + 1 where word = @word 
```

WordList 表有 2 个字段**word** (varchar) 和**frequency** (int)

第 2 点 - 输出加星标的单词

好吧，现在应该是从 WordList 表中选择的情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:14:56.280

为此使用存储过程可能会更好。

通过使用存储过程，您可以执行以下操作：

```
create procedure Insert_StoreList
@Word nvarchar(50)
AS

insert StoreList (
item )
values (
@Word )

SELECT item FROM StoreList WHERE item LIKE '*%' 
```

然后您可以在 C# 中使用以下内容

```
SqlCommand com = new SqlCommand("Insert_StoreList", con);
com.CommandType = CommandType.StoredProcedure;
com.Parameters.Add(new SqlParameter("@Word", Textbox1.Text));
SqlDataReader sdr = com.ExecuteReader(); 
```

编辑 - 如果您不喜欢使用存储过程，您也可以使用 2 行 SQL 来执行此操作，第一个是 ExecuteNonQuery 将值放入表中，第二个是从桌子。

第一个 sql 将是：

```
String queryStr = "insert StoreList (item) values (" + Textbox1.Text + ")"; 
```

第二个 sql 将是：

```
String queryStr = "SELECT item FROM StoreList WHERE item LIKE '*%'"; 
```

# c# - 有没有办法知道一个 sql server 列是否是通过 EF 索引的全文？

> ID：10244059
> 
> 赞同：3
> 
> 时间：2012-04-20T10:01:16.407
> 
> 标签：c#, sql-server, entity-framework

我正在构建一个基于 EF 和 Linq.Expression 的请求生成器。我想知道是否有办法通过 EF 中的某处获取列信息。

我正在寻找有关全文索引的信息，您可以在 SQl Server 的属性窗口中看到这些信息。

有人可以帮忙吗？

有关信息，这里是检索表 PitMingTable 的此信息的 T-SQL 请求：

```
select sc.name, columnproperty(OBJECT_ID('PitMingTable'),sc.name,'IsFulltextIndexed')
from sysobjects so
inner join syscolumns sc on so.id = sc.id
where so.name like 'PitMingTable' and so.xtype ='u' 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:53:32.510

我假设这超出了实体框架的范围，因为它在编译时生成实体数据模型。DBA 可以修改数据库以索引列，而数据模型将无法更新自身以反映这一点。此外，实体框架设计为与数据库无关，并且没有约定在不同的数据库平台之间一致地公开此类元数据。

如果你不介意用一些 SQL 弄脏你的手，你总是可以编写一个存储过程来找出这种事情。这个答案：假设您使用的是 SQL Server [，SQL Server DB 中所有索引和索引列的列表应该给您一个良好的开端。](https://stackoverflow.com/questions/765867/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:47:33.017

不。EF 对查询数据库元数据没有任何本机支持，但您可以获取 SQL 并通过 EF ( `ExecuteStoreQuery`) 执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:31:18.270

您可以使用您的上下文执行查询。要获取全文索引列表，请使用以下命令：

```
SELECT * FROM sys.fulltext_indexes 
```

这是描述：[sys.fulltext_indexes](http://msdn.microsoft.com/en-us/library/ms186903.aspx)

如果您不想使用 sql 查询，我认为您可以`sys.fulltext_indexes`向模型添加视图并使用 EF 使用它。

# javascript - 使用 getScript 加载的调试脚本

> ID：10244060
> 
> 赞同：3
> 
> 时间：2012-04-20T10:01:20.023
> 
> 标签：javascript, jquery

您如何调试使用 jquery getScript() 加载的脚本，它没有显示在 google chrome 脚本列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:10:52.193

你在找什么？`getScript`使用 GET 并且应该出现在***网络选项卡***中。然后从 jQuery 中安全地执行它（afaik，有一个替代方法`eval`）。还`getScript`允许回调，您可以使用它来确定脚本是否已加载，例如添加一个`console.log`？

检查你的那部分代码是否被执行。您的代码可能没有到达脚本的那部分。

* * *

`getScript`这是加载另一个脚本（kernelJS）[的演示。](http://jsfiddle.net/zWsn2/)我可以从资源中看到它。 ![在此处输入图像描述](../Images/c71d2d305c817cc6f5c9f417e484dfa2.png)

# file - 如果它正在备份的文件在此过程中更新，rsync 会如何表现？

> ID：10244061
> 
> 赞同：2
> 
> 时间：2012-04-20T10:01:22.217
> 
> 标签：file, concurrency, synchronization, rsync, race-condition

目前在做一些关于文件同步的研发，我最终偶然发现了 rsync（谁不会呢？）。

上下文：有一个服务器用作中央文件存储库，仅由管理员更新。几个用户从中央仓库同步他们的文件系统。这是单向同步，这意味着用户永远不会更新存储库。使用**rsync**进行更新。

让我们考虑一个小场景：

1.  用户开始从服务器更新文件并下载文件 A
2.  管理员更新服务器上的文件 A 和 B，创建 A' 和 B'

问题：**第三步是什么？**

*   用户下载 B'。他有A和B'，导致文件之间的状态不一致
*   用户下载B，他有A和B，导致状态一致但过时
*   用户下载 B' 和 A'，从而获得一致且最新的状态
*   还要别的吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:46:35.390

据我所知，这是您的第一个选择：用户将拥有 A 和 B'。避免这种情况的唯一方法是在 rsync 之前对您的文件系统进行快照，但不知何故，这感觉有点过头了。

其他解决方案可能是

*   将 A 和 B 放在一个 zip/tar 文件中（管理员/更新者必须这样做；否则在添加第一个和第二个文件之间仍然可以更新文件
*   使用 git（或其他 VCS）作为中央存储库

# asp.net - 我的图片没有显示

> ID：10244067
> 
> 赞同：0
> 
> 时间：2012-04-20T10:01:54.660
> 
> 标签：asp.net, sql-server, vb.net

我将图像保存在 sql server 数据库中。现在我通过以下代码从 sql server 数据库获取图像，但我的图像显示在图像控件中。但在此代码中，我将此图像保存在项目目录中。我想要这个图像而不保存，直接来自我的 sql server 数据库我应该在代码中更改什么。

```
 Dim result As Image = Nothing
    Dim da As SqlDataAdapter = New SqlDataAdapter("select * from infoimage", con)
    Dim dt As DataTable = New DataTable("TABLE")
    da.Fill(dt)
    result = Image.FromStream(New MemoryStream(DirectCast(dt.Rows(0)(0), Byte())))
    result.Save("C:\Documents and Settings\Administrator\Desktop\GridViewExport   \img.jpg")
    Image1.ImageUrl = "~/img.jpg" 
```

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:05:36.530

哦，你不应该像这样粘贴图像。首先，Image 对象本身已经是图像，而不是 url。所以，一旦你从字符串中得到了一个图像，你应该在 response.write() 中返回它。但更好的解决方案是图像处理程序。这是[示例](http://www.codeproject.com/Articles/34084/Generic-Image-Handler-Using-IHttpHandler)。

# vb.net - 在 VB2010 windows 窗体的开头播放 .wav/.mp3 文件？

> ID：10244068
> 
> 赞同：1
> 
> 时间：2012-04-20T10:01:55.847
> 
> 标签：vb.net, winforms, audio

做 VB2010 大约一年了，最近开始推动边界，我可以将哪种媒体合并到我的表单中。不过，我无法播放 .wav 或 .mp3 文件。我试图按照微软和其他编码网站上的教程进行操作，但没有成功。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T15:54:34.680

要播放波形文件，您可以简单地使用：

```
 My.Computer.Audio.Play("c:\temp\temp.wav") 
```

如果您想播放 mp3、wav、midi，您可以进行一些 WIN32 API 调用。这是我几年前创建的一个类，可以让你轻松玩它们。在你的项目中创建一个名为 AudioFile.vb 的类并将其粘贴进去。不过我已经很多年没有看过这段代码了，呵呵，它可能会被清理掉。

```
''' <summary>
''' This class is a wrapper for the Windows API calls to play wave, midi or mp3 files.
''' </summary>
''' <remarks>
''' </remarks>
Public Class AudioFile
'***********************************************************************************************************
'        Class:  PlayFile
'   Written By:  Blake Pell (bpell@indiana.edu)
' Initial Date:  03/31/2007
' Last Updated:  02/04/2009
'***********************************************************************************************************

' Windows API Declarations
Private Declare Function mciSendString Lib "winmm.dll" Alias "mciSendStringA" (ByVal lpstrCommand As String, ByVal lpstrReturnString As String, ByVal uReturnLength As Int32, ByVal hwndCallback As Int32) As Int32

''' <summary>
''' Constructor:  Location is the filename of the media to play.  Wave files and Mp3 files are the supported formats.
''' </summary>
''' <param name="Location"></param>
''' <remarks></remarks>
Public Sub New(ByVal location As String)
    Me.Filename = location
End Sub

''' <summary>
''' Plays the file that is specified as the filename.
''' </summary>
''' <remarks></remarks>
Public Sub Play()

    If _filename = "" Or Filename.Length <= 4 Then Exit Sub

    Select Case Right(Filename, 3).ToLower
        Case "mp3"
            mciSendString("open """ & _filename & """ type mpegvideo alias audiofile", Nothing, 0, IntPtr.Zero)

            Dim playCommand As String = "play audiofile from 0"

            If _wait = True Then playCommand += " wait"

            mciSendString(playCommand, Nothing, 0, IntPtr.Zero)
        Case "wav"
            mciSendString("open """ & _filename & """ type waveaudio alias audiofile", Nothing, 0, IntPtr.Zero)
            mciSendString("play audiofile from 0", Nothing, 0, IntPtr.Zero)
        Case "mid", "idi"
            mciSendString("stop midi", "", 0, 0)
            mciSendString("close midi", "", 0, 0)
            mciSendString("open sequencer!" & _filename & " alias midi", "", 0, 0)
            mciSendString("play midi", "", 0, 0)
        Case Else
            Throw New Exception("File type not supported.")
            Call Close()
    End Select

    IsPaused = False

End Sub

''' <summary>
''' Pause the current play back.
''' </summary>
''' <remarks></remarks>
Public Sub Pause()
    mciSendString("pause audiofile", Nothing, 0, IntPtr.Zero)
    IsPaused = True
End Sub

''' <summary>
''' Resume the current play back if it is currently paused.
''' </summary>
''' <remarks></remarks>
Public Sub [Resume]()
    mciSendString("resume audiofile", Nothing, 0, IntPtr.Zero)
    IsPaused = False
End Sub

''' <summary>
''' Stop the current file if it's playing.
''' </summary>
''' <remarks></remarks>
Public Sub [Stop]()
    mciSendString("stop audiofile", Nothing, 0, IntPtr.Zero)
End Sub

''' <summary>
''' Close the file.
''' </summary>
''' <remarks></remarks>
Public Sub Close()
    mciSendString("close audiofile", Nothing, 0, IntPtr.Zero)
End Sub

Private _wait As Boolean = False
''' <summary>
''' Halt the program until the .wav file is done playing.  Be careful, this will lock the entire program up until the
''' file is done playing.  It behaves as if the Windows Sleep API is called while the file is playing (and maybe it is, I don't
''' actually know, I'm just theorizing).  :P
''' </summary>
''' <value></value>
''' <returns></returns>
''' <remarks></remarks>
Public Property Wait() As Boolean
    Get
        Return _wait
    End Get
    Set(ByVal value As Boolean)
        _wait = value
    End Set
End Property

''' <summary>
''' Sets the audio file's time format via the mciSendString API.
''' </summary>
''' <value></value>
''' <returns></returns>
''' <remarks></remarks>
ReadOnly Property Milleseconds() As Integer
    Get
        Dim buf As String = Space(255)
        mciSendString("set audiofile time format milliseconds", Nothing, 0, IntPtr.Zero)
        mciSendString("status audiofile length", buf, 255, IntPtr.Zero)

        buf = Replace(buf, Chr(0), "") ' Get rid of the nulls, they muck things up

        If buf = "" Then
            Return 0
        Else
            Return CInt(buf)
        End If
    End Get
End Property

''' <summary>
''' Gets the status of the current playback file via the mciSendString API.
''' </summary>
''' <value></value>
''' <returns></returns>
''' <remarks></remarks>
ReadOnly Property Status() As String
    Get
        Dim buf As String = Space(255)
        mciSendString("status audiofile mode", buf, 255, IntPtr.Zero)
        buf = Replace(buf, Chr(0), "")  ' Get rid of the nulls, they muck things up
        Return buf
    End Get
End Property

''' <summary>
''' Gets the file size of the current audio file.
''' </summary>
''' <value></value>
''' <returns></returns>
''' <remarks></remarks>
ReadOnly Property FileSize() As Integer
    Get
        Try
            Return My.Computer.FileSystem.GetFileInfo(_filename).Length
        Catch ex As Exception
            Return 0
        End Try
    End Get
End Property

''' <summary>
''' Gets the channels of the file via the mciSendString API.
''' </summary>
''' <value></value>
''' <returns></returns>
''' <remarks></remarks>
ReadOnly Property Channels() As Integer
    Get
        Dim buf As String = Space(255)
        mciSendString("status audiofile channels", buf, 255, IntPtr.Zero)

        If IsNumeric(buf) = True Then
            Return CInt(buf)
        Else
            Return -1
        End If
    End Get
End Property

''' <summary>
''' Used for debugging purposes.
''' </summary>
''' <value></value>
''' <returns></returns>
''' <remarks></remarks>
ReadOnly Property Debug() As String
    Get
        Dim buf As String = Space(255)
        mciSendString("status audiofile channels", buf, 255, IntPtr.Zero)

        Return Str(buf)
    End Get
End Property

Private _isPaused As Boolean = False
''' <summary>
''' Whether or not the current playback is paused.
''' </summary>
''' <value></value>
''' <returns></returns>
''' <remarks></remarks>
Public Property IsPaused() As Boolean
    Get
        Return _isPaused
    End Get
    Set(ByVal value As Boolean)
        _isPaused = value
    End Set
End Property

Private _filename As String
''' <summary>
''' The current filename of the file that is to be played back.
''' </summary>
''' <value></value>
''' <returns></returns>
''' <remarks></remarks>
Public Property Filename() As String
    Get
        Return _filename
    End Get
    Set(ByVal value As String)

        If My.Computer.FileSystem.FileExists(value) = False Then
            Throw New System.IO.FileNotFoundException
            Exit Property
        End If

        _filename = value
    End Set
End Property 
```

结束类

以下是上述类的一些示例用法：

```
 Dim audio As New AudioFile("C:\Temp\YourMP3File.mp3")
    audio.Play() 
```

# mysql - 难以计数一个简单的查询

> ID：10244069
> 
> 赞同：0
> 
> 时间：2012-04-20T10:01:56.253
> 
> 标签：mysql, count

我有一张有 1118 条记录的表。在这些记录中，有一个字段`flag`默认为 NULL。其中 556 条记录的字段`flag`标记为 true，而其余记录为 NULL。当我运行以下查询时：

```
select count(*) from table_name where flag!='true' 
```

我得到的结果为 0。实际结果应该是 1118-556 即 562。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:04:12.803

NULL 从不与任何东西比较，甚至不是另一个 NULL

```
select count(*) from table_name where flag!='true' OR flag IS NULL 
```

或者

```
select count(*) from table_name where flag IS NULL 
```

这取决于您是否有除`true`( `false`?) 以及 NULL之外的其他值

```
select
    count(CASE WHEN flag = 'true' THEN flag END) AS truecount,
    count(CASE WHEN flag = 'false' THEN flag END) AS falsecount
    count(*) - count(flag) AS NULLCount
from 
    table_name 
```

最后，查看这些以了解 COUNT 和 null/not null 值

*   [https://dba.stackexchange.com/a/2512/630](https://dba.stackexchange.com/a/2512/630)
*   [https://stackoverflow.com/a/1221649/27535](https://stackoverflow.com/a/1221649/27535)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:04:22.307

在查询中，除非明确提及，否则任何布尔表达式都不会匹配 NULL：

```
SELECT COUNT(*) FROM TABLE_NAME WHERE flag IS NULL 
```

# ios - 使用谓词获取核心数据对象

> ID：10244070
> 
> 赞同：0
> 
> 时间：2012-04-20T10:02:27.520
> 
> 标签：ios, nspredicate

我有一个像这个产品这样的模型--->选项（一对多关系，没有-invers）

选项 -------> 大小（一对一关系，无反转）

选项-------> sold_out（属性，布尔值）

现在我想获取 option.sold_out 为 NO 的所有产品的所有选项的所有尺寸的数组。

如何使用谓词从核心数据中获取它，而不是遍历产品数组和选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:59:40.487

首先永远不要在 Core Data 中**使用单向关系。**您可能不会自己使用它，但 Core Data 需要它来实现引用完整性。

[为什么实体需要逆？](https://stackoverflow.com/questions/7779464/why-does-an-entity-need-an-inverse)

现在，关于你的要求。你可以使用这样的东西。

```
request.entity = [NSEntityDescription entityForName:@"Product" inManagedObjectContext:managedObjectContext];
request.prdicate = [NSPredicate predicateWithFormat:@"ANY option.sold_out == %@",[NSNumber numberWithBool: YES]]; 
```

# 更新

现在，需要相反的是你——因为如果没有**Size---->Option**关系，你就没有足够的方法来完成这个请求。如果你有一个，我们称之为**选项**，你可以像这样提出你的要求：

```
request.entity = [NSEntityDescription entityForName:@"Size" inManagedObjectContext:managedObjectContext];
request.prdicate = [NSPredicate predicateWithFormat:@"option.sold_out == %@",[NSNumber numberWithBool: YES]]; 
```

# iphone - 将字符串作为 JSON 对象发送

> ID：10244074
> 
> 赞同：3
> 
> 时间：2012-04-20T10:02:32.673
> 
> 标签：iphone, objective-c, ios5

我有一个任务要求我将字符串作为 json 对象，在发送对象之前，我必须将此 json 对象放入 http 标头中。这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *nid = @"";
    NSString *vocab = @"";
    NSString *inturl = @"testoverview";
    NSString *mail = @"chh@fbr.dk";
    NSString *md5pw = @"4d57e7ef1b7c3f431aca424764e9d786";

    NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                    nid, @"nid", 
                                    vocab, @"vocab",
                                    inturl, @"inturl",
                                    mail, @"mail",
                                    md5pw, @"md5pw",nil];

    NSString *json = @"{nid:"",vocab:"",inturl:testoverview, mail:chh@fbr.dk, md5pw:4d57e7ef1b7c3f431aca424764e9d786}";

    NSError *error;

    NSString *url = @"http://udv.taenk.dk/chh/drupal-taenk/services/mobile";

    NSData *data = [json dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];

    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:NSJSONWritingPrettyPrinted error:&error];

    NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLCacheStorageAllowed timeoutInterval:30.0];

     NSURLConnection *connction = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    FSRemoteExecutor *remote = [[FSRemoteExecutor alloc] init];
    [remote execute:url andHandler:[FSProductTestHandler alloc] JSONString:jsonString JSONData:jsonData Connection:connction];
    [remote connection:connction didReceiveData:jsonData];
    [remote connectionFinishedLoading:connction]; 
```

我的问题是我不能将 jsonDictionary 与对象一起使用并发送它，因为服务必须接收的字符串格式是这样的：

"{"nid":"","vocab":"", "inturl":"testoverview", "mail":"", "md5pw":""}"

字典会在字符串中插入 =，这不会给我服务的响应。

我想将字符串（代码中的 json）作为 dataWithJSONObject:jso 发送，如下所示：

```
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:json options:NSJSONWritingPrettyPrinted error:&error]; 
```

但我收到一个错误：

**由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** + **[NSJSONSerialization dataWithJSONObject:options:error:]: JSON 写入中的顶级类型无效”**

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T10:23:53.017

但是为什么要使用 use`NSJSONSerialization`呢？您制作了自己的 JSON 字符串 ( `NSString *json = @"{nid:"",vocab:"",inturl:testoverview, mail:chh@fbr.dk, md5pw:4d57e7ef1b7c3f431aca424764e9d786}";`)。然后你不需要再次运行`NSJSONSerialization`.

只需从您的 NSData 中制作一个`*json (NSString)`，然后将其发送到服务器。

让你的 NSData 像这样：

```
NSData *jsonPayload = [json dataUsingEncoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T10:24:08.773

首先，您的字符串`json`不包含您认为的引号字符。您必须使用反斜杠“转义”字符串中的引号，以免终止字符串。您的线路：

```
NSString *json = @"{nid:"",vocab:"",inturl:testoverview, mail:chh@fbr.dk, md5pw:4d57e7ef1b7c3f431aca424764e9d786}"; 
```

正在被这样解析：

```
NSString *json = @"{nid:"
                 ",vocab:"
                 ",inturl:testoverview, mail:chh@fbr.dk, md5pw:4d57e7ef1b7c3f431aca424764e9d786}"; 
```

也就是说，它是按顺序引用的三个字符串。编译器连接相邻的字符串文字。所以，效果是这样的：

```
NSString *json = @"{nid:,vocab:,inturl:testoverview, mail:chh@fbr.dk, md5pw:4d57e7ef1b7c3f431aca424764e9d786}"; 
```

没有嵌入的引号字符。

你想写的是：

```
NSString *json = @"{nid:\"\",vocab:\"\",inturl:testoverview, mail:chh@fbr.dk, md5pw:4d57e7ef1b7c3f431aca424764e9d786}"; 
```

你能显示以下输出：

```
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:NSJSONWritingPrettyPrinted error:&error]; 
```

我看不出你会在哪里得到一个“=”字符。

* * *

更新：

此代码（根据您的问题修改）：

```
NSString *nid = @"";
NSString *vocab = @"";
NSString *inturl = @"testoverview";
NSString *mail = @"chh@fbr.dk";
NSString *md5pw = @"4d57e7ef1b7c3f431aca424764e9d786";

NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                nid, @"nid", 
                                vocab, @"vocab",
                                inturl, @"inturl",
                                mail, @"mail",
                                md5pw, @"md5pw",nil];

NSError *error;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:NSJSONWritingPrettyPrinted error:&error];
NSString *resultAsString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSLog(@"jsonData as string:\n%@", resultAsString); 
```

给出这个输出：

```
jsonData as string:
{
  "md5pw" : "4d57e7ef1b7c3f431aca424764e9d786",
  "nid" : "",
  "inturl" : "testoverview",
  "mail" : "chh@fbr.dk",
  "vocab" : ""
} 
```

如果您使用`0`而不是`NSJSONWritingPrettyPrinted`，它会给出：

```
jsonData as string:
{"md5pw":"4d57e7ef1b7c3f431aca424764e9d786","nid":"","inturl":"testoverview","mail":"chh@fbr.dk","vocab":""} 
```

# c# - 我如何读取 SP 返回的值

> ID：10244082
> 
> 赞同：-2
> 
> 时间：2012-04-20T10:02:55.393
> 
> 标签：c#, sql

在我的一个项目中，我必须使用 C# 在 TextBox 中读取以下过程返回的值。

任何人都可以编写代码以在使用 c# 的以下过程返回的 TextBox 中读取 @a 吗？

```
create procedure [dbo].[Test]    
as    
declare    
@a numeric(5)    
begin    
set @a = (select COUNT(*) from Emp);    
return @a   
end 
```

我试过这个

```
SqlConnection cn = new SqlConnection("data source=localhost;initial catalog=acc;uid=sa;pwd=fantastic");
cn.Open();
SqlCommand cmd = cn.CreateCommand();
cmd.CommandType = CommandType.StoredProcedure;
cmd.CommandText = "Test";
Int32 i = Convert.ToInt32(cmd.ExecuteScalar());
textBox1.Text = i.ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:10:00.153

- 部分复制粘贴，大部分内容超出了头脑，但试试看：

```
SqlConnection con = new SqlConnection(connectionstring);
SqlCommand com = new SqlCommand("test", con);
com.CommandType = CommandType.StoredProcedure;
SqlParamter returnVal = new SqlParameter("RETURN_VALUE", SqlDbType.Int);
returnVal.Direction = ParameterDirection.ReturnValue;
com.Parameters.Add(returnVal);
com.Connection.Open();
com.ExecuteNonQuery();
int A = returnVal.value;
con.Close(); 
```

ExecuteScalar：“执行查询，并返回查询返回的结果集中第一行的第一列。” 您正在返回一个返回值，而不是一个字段。如果要使用标量，则需要编辑存储过程以实际返回如下字段：

```
create procedure [dbo].[Test] 
as 
begin 

select (select COUNT(*) from Emp)

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:22:12.733

您可以使用返回参数（请参阅[riffnl 的答案](https://stackoverflow.com/a/10244199/121309)）或将 sp 中的“返回”更改为“选择”。

ExecuteScalar 不捕获返回值，只捕获第一个`select`ed 值。

# c# - 确定哪个线程触发事件

> ID：10244083
> 
> 赞同：1
> 
> 时间：2012-04-20T10:02:59.463
> 
> 标签：c#, multithreading, process

我目前正在处理 ac# 项目，该项目使用 System.Diagnostic.Process 方法在配置文件中启动几个脚本。

我有一个 foreach 循环，它通过创建一个新线程、设置进程信息和启动进程并将该脚本的输出重定向到 c# 程序来循环它需要启动的每个脚本。然后我使用 Process.OutputDataReceived 事件在程序接收到输出时触发。

OutputDataReceived 事件处理程序中是否有办法确定触发事件的线程的名称。

下面的代码创建线程并启动线程。

```
 public void prepareProductStart()
    {
        foreach ( ConfigManagement.ProductSettings product in configManagement.productSettings )
        {
            worker = new Thread(() => startProducts(product.startScript));
            worker.IsBackground = false;
            worker.Name = product.productName;
            worker.Start();
        } 
```

当线程启动时，它会调用此方法，该方法将触发输出事件

```
 private void startProducts(string startScript)
    {
        //Thread productThread = new Thread();
        Process startProductProcess = new Process();
        startProductProcess.StartInfo.FileName = startScript;

        startProductProcess.StartInfo.UseShellExecute = false;
        startProductProcess.StartInfo.RedirectStandardOutput = true;
        StringBuilder processOutput = new StringBuilder("");
        startProductProcess.OutputDataReceived += new DataReceivedEventHandler(startProductProcess_OutputDataReceived);
        startProductProcess.Start();
        startProductProcess.BeginOutputReadLine();
    } 
```

输出事件如下所示，该事件需要确定线程的名称，以便知道如何处理输出。

```
 private void startProductProcess_OutputDataReceived(object sender, DataReceivedEventArgs e)
    {
        //Find thread name and perform event based on thread name
    } 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:22:05.577

由于 IO 回调是在属于 CLR ThreadPool 而不是您的线程上调用的，因此它们没有名称。因此，实际上，您希望将线程名称与您的进程相关联。

远非优雅，但很好，我想它有效：

`Dictionnary<Process, string> _processTags;`在您的班级属性中添加一个

然后`startProducts`改为：

```
private void startProducts(string startScript)
{
    //Thread productThread = new Thread();
    Process startProductProcess = new Process();

    // Save tag
    _processTags.Add(startProductProcess, Thread.CurrentThread.Name);

    startProductProcess.StartInfo.FileName = startScript;
    startProductProcess.StartInfo.UseShellExecute = false;
    startProductProcess.StartInfo.RedirectStandardOutput = true;
    StringBuilder processOutput = new StringBuilder("");
    startProductProcess.OutputDataReceived += new DataReceivedEventHandler(startProductProcess_OutputDataReceived);
    startProductProcess.Start();
    startProductProcess.BeginOutputReadLine();
} 
```

并且`startProductProcess_OutputDataReceived`：

```
private void startProductProcess_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    string threadName = _processTags[sender as Process];
    // stuff...
} 
```

# bash - 使用 bash shell 重命名多个文件名

> ID：10244085
> 
> 赞同：0
> 
> 时间：2012-04-20T10:03:02.837
> 
> 标签：bash, shell

我们有错误的文件名，比如 file1@x2.png ，应该是 file1@2x~ipad.png。

不确定这是否适合我提出这个问题。如何编写简单的 bash shell 脚本以将此类文件名从错误转换为预期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:07:36.190

使用**bash**，虽然这可以很容易地翻译成 sh/POSIX

```
for file in *; do
    [[ "$file" =~ @2x~ipad\.png$ ]] || mv "$file" "${file%@*}@2x~ipad.png"
done 
```

* * *

如果文件不只是`png`s 则使用它（扩展名不可知），假设扩展名为 3 个字符。

```
for file in *; do
    [[ "$file" =~ @2x~ipad\.[[:alpha:]]{3}$ ]] || mv "$file" "${file%@*}@2x~ipad.${file##*.}"
done 
```

* * *

如果这些文件未分组在某个目录下，则尝试`find`在指定的根目录下递归

```
while read -r file; do
    [[ "$file" =~ @2x~ipad\.[[:alpha:]]{3}$ ]] || mv "$file" "${file%@*}@2x~ipad.${file##*.}"
done < <(find /path/to/root/dir/to/look/under -type -f -name "*.png") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:22:04.357

您不需要脚本；尝试`mmv`：

```
mmv "*.png" "#1~ipad.png" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T16:57:27.637

您可以使用`prename`（附带`perl`）轻松地为大量文件执行此操作：

```
prename 's/x2\.png/2x~ipad.png/' *.png 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:06:08.890

`mv file1@x2.png file1@2x~ipad.png` 您可以使用`man mv`寻求帮助。

# xcode - CIFilter 在为 32 位构建时有效，但在为 64 位构建时不出现？

> ID：10244088
> 
> 赞同：1
> 
> 时间：2012-04-20T10:03:08.480
> 
> 标签：xcode, macos, cocoa, 32bit-64bit

我有一个最初设置为构建为 32 位或 64 位的 XCode 项目。部分代码创建一个带边框的图层，然后添加一个“bloom”滤镜以在边框周围创建发光效果：

```
// Create a layer with just a border
CGColorRef yellowColour = CGColorCreateGenericRGB(1.0f, 1.0f, 0.0f, 1.0f);
CALayer *selectionLayer = [CALayer layer];
selectionLayer.bounds = CGRectMake(0.0f, 0.0f, size.width, size.height);
selectionLayer.borderWidth = 3.0f;
selectionLayer.borderColor = yellowColour;
selectionLayer.position = CGPointMake(100, 50);
selectionLayer.zPosition = CGFLOAT_MAX; // stay on top

// Add a bloom filter to add a glow to the border
CIFilter *filter = [CIFilter filterWithName:@"CIBloom"];
[filter setDefaults];
[filter setValue:[NSNumber numberWithFloat:5.0f] forKey:@"inputRadius"];
[selectionLayer setFilters:[NSArray arrayWithObject:filter]]; 
```

当我将此项目构建为 32 位应用程序时，会出现图层，并且黄色边框正确应用了发光效果。

如果我随后以 64 位构建并运行，则该图层根本不会出现（我尝试更改背景颜色以确保图层可见）

如果我注释掉添加过滤器的行，该层会重新出现，并带有黄色边框（但没有应用过滤器）。

一旦我再次切换回 32 位，一切正常。

我在这里想念什么？我是否需要更改框架或更改其他一些构建标志，以便过滤器在 64 位模式下工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T11:54:18.653

这已经很老了，但是对于发生在这件事上的人来说：我发现这`zPosition = CGFLOAT_MAX`可能是罪魁祸首。64 位`CGFLOAT_MAX`比 32 位大得多，而且它以某种方式完全阻止了图层可见。如果我想确保某些东西总是在最前面，我只需使用一个自定义的大数，比如`zPosition = 1000.0f`.

# jquery - 如何将简单的淡入淡出过渡应用到 jQuery Validate？

> ID：10244091
> 
> 赞同：1
> 
> 时间：2012-04-20T10:03:21.273
> 
> 标签：jquery, validation, plugins

我一直在尝试对[jQuery Validation 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)`fadeToggle();`应用一个简单的淡入淡出过渡（例如），但没有运气。这是我的代码：

```
$.validator.setDefaults({

    // Add fadeToggle(); to showErrors
});

$("#login_form").validate();

$("#login_form").submit(function(event) {
    event.preventDefault();

    if($("#login_form").valid()) {

        $.post("/user/ajax_login", $('#login_form').serialize(), function(data) {
            if(data.redirect != null) {
                window.location.replace(data.redirect);
            }
        },'json');
    }
}); 
```

有没有添加这种淡入淡出过渡的简单方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T17:42:30.047

对于一个非常简单的答案：

您已经在使用该`valid()`方法来检查是否有错误......为什么不使用它呢？

例如：

```
if($('#login_form').valid()) {
  // everything seams fine, lets submit the form

  $.post("/user/ajax_login", $('#login_form').serialize(), function(data) {
        if(data.redirect != null) {
            window.location.replace(data.redirect);
        }
    },'json');
}
else {
  // there is some kind of validation error

  $('label.error')
    .hide() // by this time all .error classes are shown, let's hide them
    .fadeIn('slow'); // and show them gently...

} 
```

[JsBin 上的实时示例](http://jsbin.com/agihom/edit#javascript,html)

# iphone - 如何在xcode中动态更改字体

> ID：10244093
> 
> 赞同：0
> 
> 时间：2012-04-20T10:03:35.913
> 
> 标签：iphone, ios, ipad

我想动态更改我的字体。我想在文本字段上应用 Ghost 字体。为此，我在 Resources 文件夹中导入**the_hungry_ghost.ttf**文件。并在`Info.plist`文件中编写此代码。

```
<key>UIAppFonts</key>
<array>
    <string>the_hungry_ghost.ttf</string>
</array> 
```

要应用此字体，

```
textmemo.font = [UIFont fontWithName:@"The Hungry Ghost" size:16.0]; 
```

但问题是当我在模拟器中运行此代码时它可以工作但在设备中它没有响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:24:06.603

你可以试试 textmemo.font = [UIFont fontWithName:@"the_hungry_ghost" size:16.0];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:12:05.023

```
[UIFont fontWithName:@"Helvetica" size:15]; 
```

首先清理删除并清理所有目标并运行你的应用程序

清理所有目标**`shift + Command + K`**

# html - 图像对齐问题

> ID：10244095
> 
> 赞同：0
> 
> 时间：2012-04-20T10:03:37.660
> 
> 标签：html, css

我使用了不同宽度和高度的不同品牌图像。我想以水平和垂直居中显示图像。请看下面的小提琴。

[http://jsfiddle.net/FXQhv/](http://jsfiddle.net/FXQhv/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:08:03.727

Give与 DIV`line-height`相同`height`。像这样写：

```
.ngg-gallery-thumbnail-box {
    float: left;
    line-height: 100px;
} 
```

检查这个[http://jsfiddle.net/FXQhv/1/](http://jsfiddle.net/FXQhv/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:39:28.967

看来你忘了定义 line-height 所以现在你只需要在你的 css 中添加 line-height ：

```
 .ngg-gallery-thumbnail {
    border: 1px solid #CCCCCC;
    display: inline;
    float: left;
    height: 100px;
    margin-bottom: 5px;
    margin-left: 5px;
    text-align: center;
    width: 120px;
    line-height:100px;
} 
```

演示：- [http://jsfiddle.net/FXQhv/3/](http://jsfiddle.net/FXQhv/3/)

[阅读更多关于在框中居中（水平和垂直）图像](http://www.brunildo.org/test/img_center.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:11:55.210

添加以下内容

```
.ngg-gallery-thumbnail-box a { display:table-cell; width:120px; height:100px; vertical-align:middle; } 
```

# asp.net - 无法从 ASP.NET 中的缓存中检索数据

> ID：10244098
> 
> 赞同：1
> 
> 时间：2012-04-20T10:03:47.267
> 
> 标签：asp.net, xml, caching, drop-down-menu, bind

我是 ASP.NET 的新手，

我正在制作国家，州下拉列表。

例如：对于特定国家，我将从缓存文件中读取该国家的状态。

***逻辑：***当用户第一次访问时，缓存将为空，因此将从缓存中获取相应`XMLFile`的状态并将其状态插入缓存，下次当用户访问同一国家/地区时，应从缓存中获取其状态，而不是从`XMLFile`.

**我无法在我的下拉列表中获取所需国家/地区的状态...**

这是我的代码片段，

```
protected void DropDownListCountry_SelectedIndexChanged(object sender, EventArgs e)
    {
           string  SelectedCountry = DropDownListCountry.SelectedItem.Text;

           XDocument doc = XDocument.Load(Server.MapPath("XMLFile.xml"));

           var query = from country in doc.Descendants("country")
                       where country.Attribute("name").Value == SelectedCountry
                       select new
                       {
                           states = from state in country.Elements("state")
                                    select new{
                                        Name = state.Attribute("name").Value
                                    }
                       };

           DataTable dt = new DataTable();
           dt.Columns.Add(new DataColumn("Name"));

            if (Cache["key"]==null)
            {
                foreach (var st in query)
                {
                    foreach (var StateName in st.states)
                    {
                        DataRow dr = dt.NewRow();
                        dr["Name"] = StateName.Name;
                        dt.Rows.Add(dr);
                        Cache.Insert("key", dr);

                    }
                }
                DropDownListState.DataSource = dt;
                DropDownListState.DataTextField = "Name";
                DropDownListState.DataBind();

            }
            else
            {
                      object obj = Cache["key"];
                      dt.Rows.Add(obj);

                DropDownListState.DataSource = dt;
                DropDownListState.DataTextField = "Name";
                DropDownListState.DataBind();
            }        
    } 
```

***提前致谢 ！！***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:26:17.563

这段代码几乎没有问题，比如处理数据和 UI 的方式，使用缓存，加上一个错误，每个对象的缓存键应该是唯一的。

因此，让我们重构一下代码并创建一个方法，该方法返回一个 DataTable，其中包含按国家/地区名称显示的州。如果状态已经在缓存中，则将返回缓存中的 DataTable。

```
private static DataTable GetStates(string countryName)
{
   DataTable dt = HttpContext.Current.Cache[countryName] as DataTable;
   if (dt != null)
       return dt;

   // the datatable is not in cache, let's create it then and add it to cache, next call will pick it from cache and won't read and parse the xml again
   var doc = XDocument.Load(HttpContext.Current.Server.MapPath("XMLFile.xml"));
   var query = from country in doc.Descendants("country")
                 where country.Attribute("name").Value == countryName
                 select new
                 {
                     states = from state in country.Elements("state")
                              select new
                              {
                                  Name = state.Attribute("name").Value
                              }
                 };

  dt = new DataTable();
  dt.Columns.Add(new DataColumn("Name"));

 foreach (var st in query)
            {
                foreach (var StateName in st.states)
                {
                    DataRow dr = dt.NewRow();
                    dr["Name"] = StateName.Name;
                    dt.Rows.Add(dr);

                }
            }
 // add the data table in the cache (not a row and don't use the same key)
 HttpContext.Current.Cache.Insert(countryName, dt);   
 // return this table
 return dt;
} 
```

现在是事件处理程序

```
protected void DropDownListCountry_SelectedIndexChanged(object sender, EventArgs e)
    {
       var countryName = DropDownListCountry.SelectedItem.Text;
       var dt = GetStates(countryName);

       DropDownListState.DataSource = dt;
       DropDownListState.DataTextField = "Name"; // you can set it in markup also
       DropDownListState.DataBind();
    } 
```

缓存由所有用户共享，所以如果这是您的意图，那么可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:28:29.233

这样的事情可能会有所帮助：

```
private DataTable PopulateCountryList()
{
  DataTable dt = (DataTable)Cache["countries"];

  if (dt == null)
  {
    dt.Columns.Add(new DataColumn("Name"));

    XDocument doc = XDocument.Load(Server.MapPath("XMLFile.xml"));

    var query = from country in doc.Descendants("country")
    where country.Attribute("name").Value == SelectedCountry
    select new
    {
        states = from state in country.Elements("state")
        select new {
        Name = state.Attribute("name").Value
        }
    };

    foreach (var st in query)
    {
        foreach (var StateName in st.states)
        {
          DataRow dr = dt.NewRow();
          dr["Name"] = StateName.Name;
          dt.Rows.Add(dr);    
        }
    }

    Cache.Insert("countries", dt, null, DateTime.Today.AddDays(1), TimeSpan.Zero);
  }

  return = dt;
} 
```

当您要填充他的下拉列表时：

```
DropDownListState.DataSource = PopulateCountryList();
DropDownListState.DataTextField = "Name"; 
DropDownListState.DataBind(); 
```

# php - 显示名称中带有特殊字符“$”或“-”的变量

> ID：10244099
> 
> 赞同：0
> 
> 时间：2012-04-20T10:03:48.313
> 
> 标签：php, mysql, xml, ascii, utf

```
stdClass Object
(
    [campaign-ID] => 1
    [campaign_name] => Sample Campaign
    [start_duration] => 2012-04-17
    [end_duration] => 2012-04-17
    [activity$] => 
    [survey_settings] => Ordering K-Cup Packs
    [$limit] => sample
    [$goal] => 
) 
```

如何删除 - 和 $ ？使用 php？因为`-`and `$`符号在 mysql 中是有效的，但是当我尝试使用 foreach 显示它时，它就不起作用了。那么我应该怎么做才能在不编辑数据库表中的字段名称的情况下删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:12:27.007

我不确定你在哪里得到这个类，但这里有很多无效的命名

例子

`$goal` `campaign-ID`等等

我不得不重建你的班级，它看起来像这样

```
$st= new stdClass();
$st->{"campaign-ID"} = 1 ;
$st->campaign_name = "Sample Campaign" ;
$st->start_duration = "2012-04-17" ;
$st->start_duration = "2012-04-17" ;
$st->{'activity$'} = null ;
$st->survey_settings = "Ordering K-Cup Packs" ;
$st->{'$limit'}  = "sample" ;
$st->{'$goal'} = null ;

$std = new stdClass();
foreach($st as $key => $value)
{
    $key = str_replace(array('$',"-"),array('',"_"),$key);
    $std->{$key} = $value ;
}

echo "<pre>" ;
print_r($std); 
```

输出

```
stdClass Object
(
    [campaign_ID] => 1
    [campaign_name] => Sample Campaign
    [start_duration] => 2012-04-17
    [activity] => 
    [survey_settings] => Ordering K-Cup Packs
    [limit] => sample
    [goal] => 
) 
```

我建议您创建更有效的变量名称而不是此类转换

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:06:52.353

像这样？

```
$cleaned = new stdClass();
foreach($obj as $key => $val) {
  $newKey = str_replace(array('$','-'), '', $key);
  $cleaned->$newKey = $val;
}
print_r($cleaned); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:16:41.273

删除无效的 PHP 字符就像 rm *.php 一样简单。

# jquery - 如何编写轻量级 Jquery 文本循环

> ID：10244101
> 
> 赞同：0
> 
> 时间：2012-04-20T10:04:00.993
> 
> 标签：jquery, loops, text, scroll

我编写了一个 jquery 脚本，当鼠标指针悬停时，它会在 span 内滚动链接，并在 mouseout 处停止。

[http://jsfiddle.net/trustweb/Xvqfr/](http://jsfiddle.net/trustweb/Xvqfr/)

这是一个可行的解决方案，但如果您检查 CPU 性能，您会注意到它的重量。

是否存在更轻的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:15:54.250

将 selector $elmt.find('.subcolumn-left-tab-title-slide a') 的结果缓存到 var 中，避免 selector 频繁遍历 DOM

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:18:22.400

首先缓存 jQuery 集合。无需`.find('.subcolumn-left-tab-title-slide a')`多次调用。使用普通的 javascript 设置样式也`style.left = left + 'px'`可以提高性能。

见演示[http://jsfiddle.net/Xvqfr/1/](http://jsfiddle.net/Xvqfr/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:26:03.137

[http://jsfiddle.net/Xvqfr/15/](http://jsfiddle.net/Xvqfr/15/) try 你可以通过时间来控制速度，只要记住 t=s/v, s = width(), v=number of pixel :) 玩得开心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:46:20.307

如果您减少计时器间隔（8ms），您的性能会更好。同时你应该避免在scrollText()方法中多次使用find方法。

见演示：http: [//jsfiddle.net/f8sap/2/](http://jsfiddle.net/f8sap/2/)

# silex - 作曲家需要silex.phar

> ID：10244102
> 
> 赞同：1
> 
> 时间：2012-04-20T10:04:04.913
> 
> 标签：silex, composer-php

是否可以从作曲家中要求最新的稳定 silex.phar？

我在 packagist 上找到了 silex/silex dev-master / 1.0.x-dev ，但这似乎是最新展开的 silex 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:18:39.857

在这一点上是不可能的。也许/可能有一天会，但我不能说什么时候。也就是说，我认为“展开”代码并不是一个大问题？

# java - Java 按钮：添加 ActionListener

> ID：10244105
> 
> 赞同：2
> 
> 时间：2012-04-20T10:04:10.500
> 
> 标签：java, swing, awt, jbutton

我有一个超类`Car`和两个扩展的类`Car`(`CarToRent`和`CarToSell`) 在类`CarCompany`中，我在构造函数中实现了一个 GUI。

我有一个按钮：

```
addCarToRentButton = new JButton("Add Car To Rent");
contentPane.add(addCarToRentButton);
addCarToRentButton.addActionListener(this); 
```

如何添加一个动作来监听这个，以便在单击按钮时，它将来自 3 个文本字段的数据输入到`Car`类数组中？（文本字段是`dailyRateTextField`,`descriptionTextField`和`downPaymentTextField`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:08:08.250

查看本教程： [http ://www.javamex.com/tutorials/swing/jbutton.shtml](http://www.javamex.com/tutorials/swing/jbutton.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:12:59.857

要首先浏览 Java 桌面应用程序，您需要执行以下操作：

1.  阅读[面向对象编程的一般知识](http://docs.oracle.com/javase/tutorial/java/concepts/)
2.  阅读有关[事件驱动编程的一般知识](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)
3.  阅读[匿名类的一般知识](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)
4.  阅读有关[GUI 设计的一般知识](http://docs.oracle.com/javase/tutorial/uiswing/)

以上所有内容都牢记一些Java知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:15:15.147

```
btn1.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {

            //action (someCar.setSomeValue(textField1.getText());

    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:18:10.143

大概你的`CarCompany`类实现`ActionListener`了，因此有一个方法；

```
@Override
public void actionPerformed(ActionEvent evt) {

} 
```

单击按钮时，将调用此方法。您可能想要检查事件的来源是否是`addCarToRentButton`，如果是，您可以从字段中获取文本，创建一个`Car`并将其放入您的数组中。

```
String rate = dailyRateTextField.getText();
String desc = descriptionTextField.getText();
String payment = downPaymentTextField.getText();

//Instantiate car

//add to array 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T10:34:15.170

**要编写动作侦听器，请按照以下步骤操作：**

**1.**声明一个事件处理程序类并指定该类要么实现ActionListener 接口，要么扩展一个实现ActionListener 接口的类。例如：

```
public class CarCompany implements ActionListener { 
```

**2.**将事件处理程序类的实例注册为一个或多个组件的侦听器。例如：

```
addCarToRentButton.addActionListener(this); 
```

**3.**在监听器接口中包含实现方法的代码。例如：

```
public void actionPerformed(ActionEvent e) { 
    ...//code that reacts to the action... 
} 
```

# c# - 将 XAML 存储在数据库中是否设计不佳？

> ID：10244116
> 
> 赞同：3
> 
> 时间：2012-04-20T10:04:46.903
> 
> 标签：c#, xaml, database-design

例如，假设我正在编写一个允许用户设计自己的名片的应用程序，允许他们将视觉对象添加到他们当前正在设计的“模板”中，这些对象中的每一个都绑定到不同的用户位-数据。

例如。他们拖动一个“地址框”，它会自动输入用户的地址，然后是一个“名称文本”，它再次自动使用用户定义的名称。

这样做的原因是客户可以创建 15 个模板，所有模板都有自己的“外观”，但是如果他们想更改地址，他们只需要在一个地方进行修改。

所有这些可视对象和模板本身都是用 XAML 编写的。我需要将这些用户创建的模板存储到数据库中，以便他们可以检索它们并在以后进行编辑。在我看来，我有两个选择：

1.  将整个模板作为 XAML 存储在名为“模板”的数据库表中，并带有 ID 和 OwnerID。

2.  为抽象类型的“视觉对象”创建一个表。为每个具体类型的可视对象（即“地址框”）创建一个表，该表将从抽象类型继承，并具有每个用户可配置属性（字体大小、x/y 坐标等）的字段。最后，创建一个名为模板的表，其中包含视觉对象的集合。

应该注意的是，我一直在使用实体框架来设计它，所以如果我在其中抛出了一些 EF 关键字，我们深表歉意！

就个人而言，目前 XAML 存储可能足以满足我们的要求，但是我所看到的一切似乎表明这是在数据库中存储数据的一种非常糟糕的方式.. 即。跳到 35 分钟：http://youtu.be/uFLRc6y_O3s 这[不](http://youtu.be/uFLRc6y_O3s)正是他建议不要做的吗？

使用 XAML 存储，我获得了属性值继承，这可能会使事情变得稍微容易一些，尽管我不确定用户是否会理解值如何沿链“流动”。显然 XAML 还允许我存储我喜欢的任何属性值；我不必先将其添加到数据库中。

缺点是我认为如果都是 XAML，管理数据可能会困难得多。最坏的情况可能不得不检索每一块 XAML，解析所有这些，找到我需要更改/查看的值，重新解析，保存更新的 XAML 的“blob”。这显然会导致更大的读/写操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T10:23:51.927

我会直接存储 XAML。原因是您从存储抽象布局中获得的唯一优势是您可以替换 UI 框架，并且您可以保护自己免受 XAML 中潜在的重大更改的影响。但是，由于 Microsoft 引入的重大更改会破坏所有控件，因此您很可能也可以使用一些升级可能性。

对我来说，选项 2 肯定是更好的版本，但我倾向于成为“YAGNI”的人。所以当你需要的时候开发一些东西，如果你在 WPF 上就去吧。

hth，马丁

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T04:04:06.507

我会投票支持选项 2，但我想知道，如果您需要为每个具体对象使用单独的表，而不是为每个“用户可配置属性”设置一个字段，您可以将所有用户可配置属性放在另一个链接的表中到具体对象表之类的东西。

**具体对象表**

对象 ID | 对象名 | 对象模板

* * *

**具体对象属性表**

物业编号 | 对象 ID | 物业名称 | 适当的价值

* * *

这样，您只需为配置选项担心 2-3 个表

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T06:11:30.183

我也会投票给选项 2。通过以这种方式存储它，您可以非常灵活地使用数据。

不利的一面是，选项 2 将迫使您编写某种解析器，它将数据解析为 XAML 代码。但是，当您想要 2 个相同数据的 GUI（例如 HTML）时，您唯一需要做的就是编写一个 HTML 解析器，一切顺利。您将保存到数据库的数据也会减少。

总结一下（对于选项2）：

**优点**

*   灵活的数据解释
*   减少数据存储所需的数据库空间

**缺点**

*   您需要为每个 GUI 实现编写一个解析器

# python - 如何使用 mdns 找到主机的 IP 地址？

> ID：10244117
> 
> 赞同：14
> 
> 时间：2012-04-20T10:04:55.980
> 
> 标签：python, zeroconf

我的目标是从 Windows 计算机中发现本地网络中 Linux 计算机“服务器”的 IP 地址。从另一台 Linux 计算机“客户端”我可以：

```
ping -c1 server.local 
```

并得到答复。“服务器”和“客户端”都运行 Avahi，所以这很容易。但是，我想从我的 Python 应用程序中发现“服务器”的 IP 地址，该应用程序在 MS Windows 和 Linux 计算机上运行。注意：在**不**运行 mDNS 软件的 MS Windows 计算机上，没有主机名解析（显然`ping`不适用于上述 Windows 系统）。

我知道[pyzeroconf](http://sourceforge.net/projects/pyzeroconf)的存在，这是我尝试使用的模块；但是，文档很少，对我帮助不大。使用类似的工具`avahi-discover`，我发现计算机发布`_workstation._tcp.local.`的 mDNS 类型的服务类型（显然是虚拟端口 9，丢弃服务）的`PTR`记录可能相当于 DNS A 记录。或者我可能完全误解了 mDNS 机制。

如何通过 Python 的 mDNS 发现计算机的 IP 地址（或获取计算机的 IP 地址列表）？

### 澄清（基于评论）

`socket.gethostbyname`在运行并配置为使用 mDNS 软件（如 Avahi）的计算机上明显有效：

```
Python 2.6.5 (r265:79063, Apr 16 2010, 13:09:56)
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import socket
>>> socket.gethostbyname('server.local')
'192.168.42.42' 
```

但是，在没有运行 mDNS 软件（默认）的 Windows 计算机上，我得到：

```
Python 2.7.1 (r271:86832, Nov 27 2010, 18:30:46) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import socket
>>> socket.gethostbyname('server.local')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
socket.gaierror: [Errno 11001] getaddrinfo failed 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-07T20:25:51.767

如果有人仍然对此感兴趣，可以在 Windows 和 Linux 上使用[dnspython](http://www.dnspython.org/ "dnspython")完成任务，如下所示：

```
import dns.resolver
myRes=dns.resolver.Resolver()
myRes.nameservers=['224.0.0.251'] #mdns multicast address
myRes.port=5353 #mdns port
a=myRes.query('microknoppix.local','A')
print a[0].to_text()
#'10.0.0.7'
a=myRes.query('7.0.0.10.in-addr.arpa','PTR')
print a[0].to_text()
#'Microknoppix.local.' 
```

此代码在目标计算机运行 avahi 时有效，但在目标计算机运行 python zeroconf 或 esp8266 mdns 实现时**失败。**有趣的是，运行 avahi 的 Linux 系统成功地解决了这些目标（avahi 显然实现了 nssswitch.conf mdns 插件并且是 mdns 协议的更完整的实现）
如果一个天真的 mdns 响应者，与 rfc 相反，通过 mdns 端口发送其响应，以下代码（在 linux 和 windows 上运行并解析 linux avahi、hp 打印机和 esp8266 目标）对我有用：（并且也是**不合规**的，因为它使用 MDNS 端口发送查询，而它显然**不是**一个完整的实现）

```
import socket
import struct
import dpkt, dpkt.dns
UDP_IP="0.0.0.0"
UDP_PORT=5353
MCAST_GRP = '224.0.0.251'
sock = socket.socket( socket.AF_INET, socket.SOCK_DGRAM )
sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
sock.bind( (UDP_IP,UDP_PORT) )
#join the multicast group
mreq = struct.pack("4sl", socket.inet_aton(MCAST_GRP), socket.INADDR_ANY)
sock.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, mreq)
for host in ['esp01','microknoppix','pvknoppix','hprinter'][::-1]:
#    the string in the following statement is an empty query packet
     dns = dpkt.dns.DNS('\x00\x00\x01\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x01')
     dns.qd[0].name=host+'.local'
     sock.sendto(dns.pack(),(MCAST_GRP,UDP_PORT))
sock.settimeout(5)
while True:
  try:
     m=sock.recvfrom( 1024 );#print '%r'%m[0],m[1]
     dns = dpkt.dns.DNS(m[0])
     if len(dns.qd)>0:print dns.__repr__(),dns.qd[0].name
     if len(dns.an)>0 and dns.an[0].type == dpkt.dns.DNS_A:print dns.__repr__(),dns.an[0].name,socket.inet_ntoa(dns.an[0].rdata)
  except socket.timeout:
     break
#DNS(qd=[Q(name='hprinter.local')]) hprinter.local
#DNS(qd=[Q(name='pvknoppix.local')]) pvknoppix.local
#DNS(qd=[Q(name='microknoppix.local')]) microknoppix.local
#DNS(qd=[Q(name='esp01.local')]) esp01.local
#DNS(an=[RR(name='esp01.local', rdata='\n\x00\x00\x04', ttl=120, cls=32769)], op=33792) esp01.local 10.0.0.4
#DNS(an=[RR(name='PVknoppix.local', rdata='\n\x00\x00\xc2', ttl=120, cls=32769)], op=33792) PVknoppix.local 10.0.0.194 
```

空的 dns 对象是在上面的代码中通过向构造函数传递一个从网络收集的字符串来创建的

```
m0=sock.recvfrom( 1024 );print '%r'%m0[0]
#'\xf6\xe8\x01\x00\x00\x01\x00\x00\x00\x00\x00\x00\x05esp01\x05local\x00\x00\x01\x00\x01' 
```

此查询由 nslookup 生成，因此其 id 不为零（在本例中为 \xf6\xe8），试图解析 esp01.local。然后通过以下方式创建了一个包含空查询的 dns 对象：

```
dns = dpkt.dns.DNS(m0[0])
dns.id=0
dns.qd[0].name=''
print '%r'%dns.pack()
#'\x00\x00\x01\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x01' 
```

也可以通过以下方式创建相同的结果：

```
dns=dpkt.dns.DNS(qd=[dpkt.dns.DNS.Q(name='')]) 
```

也可以使用非空查询创建 dns 对象：

```
dns=dpkt.dns.DNS(qd=[dpkt.dns.DNS.Q(name='esp01.local')]) 
```

甚至有多个查询：

```
dns=dpkt.dns.DNS(qd=[dpkt.dns.DNS.Q(name='esp01.local'),dpkt.dns.DNS.Q(name='esp02.local')]) 
```

但最少的响应者可能无法处理包含多个查询的 dns 消息

我也对 python zeroconf 文档不满意。从使用 tcpdump 的代码和数据包监控的随意阅读来看，似乎（当注册示例运行时）zeroconf 将响应地址查询，但 nslookup 忽略（或不接收）答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-28T06:47:06.997

坚持原始问题的字母，答案是合格的。可以使用 python zeroconf 发现运行 avahi 的目标，前提是它们宣传某些服务。默认情况下，avahi-deamon 会通告该`_workstation._tcp.local`服务。为了发现此类服务器，请修改 zeroconf 附带的 browser.py 示例，以便它查找此服务（或感兴趣的目标所宣传的任何其他服务）而不是（或除此之外）`_http._tcp.local`。browser.py 还将使用 zeroconf 的 registration.py 示例来发现目标以宣传其服务，但不会发现 esp8266 目标（esp8266 以格式错误的消息响应 TXT (16) 查询）。

```
#!/usr/bin/env python
from __future__ import absolute_import, division, print_function, unicode_literals
""" Example of resolving local hosts"""
# a stripped down verssion of browser.py example
# zeroconf may have issues with ipv6 addresses and mixed case hostnames
from time import sleep

from zeroconf import ServiceBrowser, ServiceStateChange, Zeroconf,DNSAddress

def on_service_state_change(zeroconf, service_type, name, state_change):
    if state_change is ServiceStateChange.Added:
        zeroconf.get_service_info(service_type, name)

zeroconf = Zeroconf()
ServiceBrowser(zeroconf, "_workstation._tcp.local.", handlers=[on_service_state_change])
ServiceBrowser(zeroconf, "_telnet._tcp.local.", handlers=[on_service_state_change])
ServiceBrowser(zeroconf, "_http._tcp.local.", handlers=[on_service_state_change])
ServiceBrowser(zeroconf, "_printer._tcp.local.", handlers=[on_service_state_change])
sleep(2)
#lookup specific hosts
print(zeroconf.cache.entries_with_name('esp01.local.'))
print(zeroconf.cache.entries_with_name('microknoppix.local.'))
print(zeroconf.cache.entries_with_name('pvknoppix.local.'))
print(zeroconf.cache.entries_with_name('debian.local.'))
cache=zeroconf.cache.cache
zeroconf.close()
# list all known hosts in .local
for key in cache.keys():
    if isinstance(cache[key][0],DNSAddress):
       print(key,cache[key])
sleep(1)
#output follows
#[10.0.0.4]
#[10.0.0.7]
#[]
#[3ffe:501:ffff:100:a00:27ff:fe6f:1bfb, 10.0.0.6]
#debian.local. [3ffe:501:ffff:100:a00:27ff:fe6f:1bfb, 10.0.0.6]
#esp01.local. [10.0.0.4]
#microknoppix.local. [10.0.0.7] 
```

但老实说，我不会为此使用 zeroconf。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-02-25T16:38:22.177

如果您只想要一个用于 Linux 中 bash 的衬里：

```
getent hosts HOSTNAME.local | awk '{ print $1 }' 
```

确保将**HOSTNAME**替换为您要查找的主机名。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-05-08T22:35:35.970

如果您可以 ping 系统，为什么不使用子进程，将输出重定向到文件，读取文件，瞧！这是一个粗略的草图：

```
import subprocess
server = 'localhost'
cmd = 'ping -c 5 %s &> hostname_ping.txt' % server
proc = subprocess.Popen(cmd, shell=True, stderr=subprocess.PIPE, stdout=subprocess.PIPE)
ret = proc.wait()
if ret != 0:
    # Things went horribly wrong!
    #NOTE: You could also do some type of retry.
    sys.exit(ret)
f = open('hostname_ping.txt')
ip = f.next().split(' ')[3][:-1] 
```

注意：在我的情况下，ip 将是 127.0.0.1，但那是因为我使用了 localhost。您也可以将 ping 计数设为 1，但我将其设为 5，以防万一出现任何网络问题。您必须更聪明地解析文件。为此，您可以使用 re 模块。

无论如何，这里描述的方法是粗略的，但是如果您知道要 ping 的系统的名称，它应该可以工作。

# php - PHP 在同一类的实例之间共享受保护的属性

> ID：10244120
> 
> 赞同：2
> 
> 时间：2012-04-20T10:05:12.430
> 
> 标签：php, oop, static

我想实现一个类，它缓存一些内部结果。这些结果对于类的所有实例都是相同的，即在所有实例之间共享此缓存可能是明智的。

然而，子类的这些结果可能不同，即缓存不应与子类共享。由于缓存对于所有子类也是一个好主意，因此该机制仍应被继承。但是每个子类都必须使用不同的静态数组。

我可以想到各种技巧和复杂的模式来实现这个目标，但没有一个看起来真的很正常。有人知道 PHP 中的有效模式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T10:08:37.360

一个`private static`变量的组合来保存*所有*子类和`protected`访问器函数的缓存数据听起来很有效，而且它并不太复杂：

```
class Base {
    private static $cache = array();

    protected getCacheItem($key) {
        $type = get_class($this);
        if (!isset(self::$cache[$type])) {
            self::$cache[$type] = array();
        }

        // add checks to taste
        return self::$cache[$type][$key];
    }

    protected function setCacheItem($key, $value) {
        // similar to the above
    }
} 
```

从这里开始，您可以花点时间访问缓存非常方便，但代价是变得有些邪恶：

```
class Base {
    private static $cache = array();

    // WARNING! QUESTIONABLE PRACTICE: __get returns by reference
    // Also, overriding __get ONLY might not lead to an intuitive experience
    // As always, documenting non-standard behavior is paramount!
    public function &__get($name) {
        if ($name != 'cache') {
            // error handling
        }

        $type = get_class($this);
        if (!isset(self::$cache[$type])) {
            self::$cache[$type] = array();
        }

        return self::$cache[$type];
    }
} 
```

然后你就可以像这样使用它了

```
$b = new Base;
$b->cache['foo'] = 'bar'; 
```

**[看到它在行动](http://ideone.com/XREa7)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:01:00.357

根本不要使用静态 - 在大多数情况下，这不是一个正确的解决方案。创建一些存储对象（甚至可以是[ArrayObject](http://php.net/manual/en/class.arrayobject.php)）并将其传递给所有`MyClass`实例：

```
$sharedStorage = new ArrayObject();
$anotherStorage = new ArrayObject();

$instanceA = new MyClass($sharedStorage);
$instanceB = new MyClass($sharedStorage);

$instnceC = new MySubClass($anotherStorage); 
```

它更简单，更容易测试或维护，最重要的是，它不使用任何黑客，只使用常见的、众所周知的结构。

如果您担心它可能使用错误，例如：

```
$instanceA = new MyClass($sharedStroage);
$instanceB = new MyClass($anotherStroage); 
```

创建一个负责创建新对象的工厂类。

* * *

顺便说一句，你为什么需要这样一个奇怪的要求——给定类的所有实例的公共存储，而不是该类的子类型？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T19:19:43.877

这是我从这些答案中提炼出来的，我认为可能值得分享。对于评论来说太大了，我不想对乔恩的回答进行如此实质性的编辑。

该解决方案有一个使用计数器，当最后一个类实例未设置时，它甚至可以释放缓存。而且它似乎可以从基类开始工作，而不会给孩子带来任何麻烦。

```
class A {
  private static $aCacheAll = array();
  protected $aCache;

  function __construct(){
    $type = get_class($this);
    if(!isset(self::$aCacheAll[$type])){
      self::$aCacheAll[$type] = array(0,array());           
    }
    self::$aCacheAll[$type][0]++;
    $this->aCache =& self::$aCacheAll[$type][1];
  }

  function __destruct(){
    $type = get_class($this);
    if(!isset(self::$aCacheAll[$type])) return;
    self::$aCacheAll[$type][0]--;
    if(self::$aCacheAll[$type][0] <= 0){
       unset(self::$aCacheAll[$type]);
       // for testing
       print "Freed memory for $type cache\n";
    }
  }

  /**
   * Brain dead test functions
   */
  function set($x){
    $this->aCache[$x] = 1;
  }

  function get() {
    var_dump($this->aCache);
  }
}

class B extends A {}

/*
 * Test it
 */

$a1 = new A();
print "Empty on start: ";
$a1->get();
$a1->set('a');
print "Set a for A: ";
$a1->get();
$a2 = new A();
print "... and have it in \$a2, too: ";
$a2->get();
$b = new B();
print "But not in B: ";
$b->get();
$b->set('b');
print "Set b for B: ";
$b->get();
print "... is not in A: ";
$a2->get();
unset($a1);
print "Cache is retained, if \$a1 is freed, but vanishes when the final instance is unset: ";
unset($a2);
print "B cache still exists, until the program exits: "; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:06:46.923

静态类变量？

[http://php.net/manual/de/language.oop5.static.php](http://php.net/manual/de/language.oop5.static.php)

```
class Test {
  static protected $sharedInClassInstances = array();
  private $myOwnInstanceVariable = array();

  public function __construct() {}
} 
```

的所有实例都`Test`应该能够访问`Test::$sharedInClassInstances`与所有其他实例共享的。While`$this->myOwnInstanceVariable`仅适用于单个对象。

# javascript - 使用 jQuery 填充输入字段

> ID：10244128
> 
> 赞同：0
> 
> 时间：2012-04-20T10:05:48.030
> 
> 标签：javascript, jquery

我的页面上有一个包含文本的跨度，在页面加载时，是否可以使用 jQuery 用这个内部 html 填充输入字段？

我试图用我的尝试设置一个小提琴，但它不起作用......

[http://jsfiddle.net/tQkaZ/](http://jsfiddle.net/tQkaZ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:07:44.793

你刚刚错过了`.`你的头等舱选择器。这是一个[更新的工作小提琴](http://jsfiddle.net/tQkaZ/1/)。

```
$('hiddenfield').val( //Missing .
    $('.prodheader').html()
);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:08:26.627

您只是忘记了选择器中的类符号。这是修复：

[http://jsfiddle.net/tQkaZ/2/](http://jsfiddle.net/tQkaZ/2/)

```
$('.hiddenfield').val(
    $('.prodheader').html()
);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:09:58.157

你尝试的方式是正确的。您只是忘记在类名前添加点 [.]

```
$('.hiddenfield').val(
    $('.prodheader').html()
); 
```

[http://jsfiddle.net/tQkaZ/5/](http://jsfiddle.net/tQkaZ/5/)

# c# - 在一个有 13 个事件处理程序订阅的方法中，圈复杂度怎么可能是 27？

> ID：10244131
> 
> 赞同：8
> 
> 时间：2012-04-20T10:05:50.280
> 
> 标签：c#, code-analysis, fxcop, code-metrics, cyclomatic-complexity

我们有这个代码，排序：

```
private void InitializeEvents()
{
    this.Event1 += (s,e) => { };
    this.Event2 += (s,e) => { };
    this.Event3 += (s,e) => { };
    this.Event4 += (s,e) => { };
    this.Event5 += (s,e) => { };
    this.Event6 += (s,e) => { };
    this.Event7 += (s,e) => { };
    this.Event8 += (s,e) => { };
    this.Event9 += (s,e) => { };
    this.Event10 += (s,e) => { };
    this.Event11 += (s,e) => { };
    this.Event12 += (s,e) => { };
    this.Event13 += (s,e) => { };
} 
```

VS10 Ultimate 中的代码分析说“27 的圈复杂度”。删除其中一条线使圈复杂度为 25。

没有分支正在进行，所以这怎么可能？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-20T11:59:49.690

请记住，代码分析正在查看您的程序集中的 IL，而不是您的源代码。IL 中没有任何东西本身支持 lambda 表达式，因此它们是编译器的构造。您可以在[此处](http://geekswithblogs.net/EltonStoneman/archive/2009/09/21/ca1502avoidexcessivecomplexity-and-lambdas.aspx)找到输出的详细信息。但基本上你的 lambda 表达式变成了一个私有静态类，它是一个匿名委托。但是，与其在代码中每次引用匿名委托时都创建一个实例，不如将委托缓存起来。因此，每次您分配 lambda 表达式时，它都会检查是否已创建该 lambda 委托的实例，如果是，则它使用缓存的委托。这会在 IL 中生成 if/else，将复杂度增加 2。因此，在此函数中，复杂度为 1 + 2*(lambda express) = 1 + 2 *(13) = 27，这是正确的数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T12:05:28.250

C# 编译器实际上为匿名方法生成了一些相当“有趣”的 IL，包括 lambda。对于每一个，它都会创建一个私有字段，然后在消费方法中分配其值之前，它会检查该值是否为空，这会在编译的方法中添加一个 If 分支。代码度量工具应该忽略这一点（[http://social.msdn.microsoft.com/Forums/eu/vstscode/thread/8c17f569-5ee3-4d26-bf09-4ad4f9289705，https://connect.microsoft.com/VisualStudio /feedback/details/555560/method-using-many-lambda-expressions-causes-high-cyclomatic-complexity](https://connect.microsoft.com/VisualStudio/feedback/details/555560/method-using-many-lambda-expressions-causes-high-cyclomatic-complexity)），我们可以希望它最终会。目前，如果您认为这是误报，您几乎必须忽略该问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T10:11:11.420

最好的猜测是，这可能是由于上面的语句被转换为事件访问器格式，即

```
class MyClass
{
  private event EventHandler MyPrivateEvent;

  public event EventHandler MyEvent
  {
    add
    {
      MyPrivateEvent += value;
    }
    remove
    {
      MyPrivateEvent -= value;
    }
  }
} 
```

有关事件访问器格式的讨论，请参阅[http://msdn.microsoft.com/en-us/magazine/cc163533.aspx](http://msdn.microsoft.com/en-us/magazine/cc163533.aspx)和[http://www.switchonthecode.com/tutorials/csharp-tutorial-event-accessors 。](http://www.switchonthecode.com/tutorials/csharp-tutorial-event-accessors)

# google-app-engine - 谷歌应用引擎源码下载

> ID：10244132
> 
> 赞同：-1
> 
> 时间：2012-04-20T10:05:57.347
> 
> 标签：google-app-engine

我有一个使用谷歌应用引擎在 python 中创建的应用程序，它工作正常。现在我想对其进行一些自定义，但在将特定文件上传到应用程序引擎之前，我想制作该文件的副本，该文件部署在服务器上。我知道从应用程序引擎下载源代码的命令是：

```
appcfg.py download_app -A <your_app_id> -V <your_app_version> <output-dir> 
```

但是这个命令从应用程序引擎下载所有源代码，这对我来说是不可行的，因为我只想下载一个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:35:08.203

您不能只下载一个文件；选择是全有或全无。

相反，您应该在本地计算机上使用源代码控制。将源代码下载视为紧急功能，以防出现严重错误，而不是开发过程的正常部分。

# magento - 在 Magento 中以编程方式使用重量和税收百分比设置产品价格

> ID：10244133
> 
> 赞同：1
> 
> 时间：2012-04-20T10:06:08.730
> 
> 标签：magento, product

我有一个使用 magento 构建的在线珠宝店。产品将是金色的。由于黄金价格需要每天更改。我们计划有一个单独的部分来每天为黄金价格提供信息。现在我想用上一节中获得的全球黄金价格和产品的重量来设置任何产品的价格。价格计算中还涉及更多参数，例如浪费、制作费用等，我计划让这些参数具有此属性集的自定义属性。

任何人都可以建议一个想法来设置使用重量和全球黄金价格计算的产品价格

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:05:19.570

您可以使用`_afterLoad`产品模型的事件的事件。您基本上使用自定义模块覆盖标准产品模型并创建自己的产品模型类，例如：

```
<?php
class YourNamespace_YourModule_Model_Product extends Mage_Catalog_Model_Product
{
   protected function _afterLoad()
   {
       parent::_afterLoad();

       //you have access to the products data via $this->getData()
       $your_calculated_price = $this->getData('price') * 1.618; //or whatever your formula is
       $this->setData('my_calc_price', $my_calculated_price);
   }
} 
```

请记住，每次加载产品时都会执行此操作，因此这可能会占用大量资源，具体取决于您的计算。

lg,

弗洛

# php - 动态幻灯片：选择什么？

> ID：10244138
> 
> 赞同：1
> 
> 时间：2012-04-20T10:06:30.520
> 
> 标签：php, jquery, jsp, symfony, slideshow

我正在用 Symfony2 编写网页，此时我想做一些非常具体的事情。我需要一个幻灯片：

*   使用鼠标悬停暂停图像的呈现。
*   动态包含 MySQL 数据库中某个表的所有图片。
*   调整所有这些图像的大小以适合幻灯片的框架（不改变图片的比例，保持 1:1 并且不使图片变形）。
*   如果可能的话，这些图片是预先加载的，以避免运行缓慢。

对于这个任务，我一直在寻找已经编写好的 jQuery 幻灯片（那里有非常好的幻灯片）。现在：

=> 要动态包含数据库中的图像，我会使用 JSP 并编写一些简单的东西（例如循环）。

=>要调整图像大小，我的要求是减少图像重量。例如，原始图像大小为 1.2 MB，分辨率大小为 1000 x 1000 像素。想象一下在幻灯片中加载 10 张这样的图像。所以我寻找的是减少图像所有方面的东西（减少像素大小和文件的成对压缩）。为此，我想到了一种服务器端解决方案，而不是客户端解决方案，例如一些已经编写的 PHP 脚本来调整图像大小。（但是如何使所有这些图像都缩小呢？）

最后，我的问题是从你们那里收集信息，关于你们对这个问题的看法：我应该使用什么，我应该如何使用它......我的意思是，我从未遇到过具有这些特定规格的幻灯片，所以我需要一些专家意见来指导我。

欢迎所有想法。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:35:32.763

你可以看看[http://galleria.io/](http://galleria.io/)，这是一个非常有弹性的幻灯片，具有强大的主题能力和一堆可[配置的选项](http://galleria.io/docs/options/#list-of-options)。它也有几种方法来[声明图像数据](http://galleria.io/docs/references/data/)，因此您可以编写循环。当您设置尺寸时，它会自动使图像适合视口（根据您的设置进行裁剪或不裁剪）。是的，它可以[预加载图像](http://galleria.io/docs/options/preload/)。如果您愿意，可以使用[扩展方法](http://galleria.io/docs/options/extend/)或直接[在您的主题](http://galleria.io/docs/themes/creating_a_theme/)中实现悬停暂停。

我认为您不会找到任何自动调整图像大小的 jQuery 幻灯片（我的意思是调整大小 = 物理更改分辨率）。有时它们包括准备缩略图的脚本，但总是需要手动工作。

我第一次[在这里](http://heartart.pl)使用它，我很满意。

# c# - 工作进程、应用程序池和应用程序域有什么区别？

> ID：10244144
> 
> 赞同：5
> 
> 时间：2012-04-20T10:06:51.823
> 
> 标签：c#, vb.net, iis

谁能解释一下工作进程、应用程序池和应用程序域之间的区别？还是应用程序域和应用程序池相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:05:42.397

应用程序池将服务器上的 Web 应用程序分开，因此它的行为完全独立于其他 Web 应用程序，因此如果另一个 Web 应用程序失败，这个应用程序不会因为它是独立的。工作进程基本上处理 Web 应用程序的所有请求。我认为通常一个应用程序池默认使用一个工作进程，但它可以使用更多。在进程资源管理器中，它将显示为 W3wp.exe。至于应用程序域和应用程序池之间的区别，我不是 100% 确定，但这里的论坛已经回答了：

[应用程序域和应用程序池之间的区别？](https://stackoverflow.com/questions/8486335/difference-between-an-application-domain-and-an-application-pool)

# sql - SQL - 根据（第一个表的行值到第二个表的列值）将一个表与另一个表连接起来

> ID：10244148
> 
> 赞同：0
> 
> 时间：2012-04-20T10:07:06.847
> 
> 标签：sql, sql-server, join, left-join

我有两张表，如下所示

第一张表：

```
 DealNum      CurrencyValue      CurrencyCode       Date

    110             100                 AA         01/12/2011  
    111             200                 AB         01/11/2011
    112             120                 AC         01/10/2011  
    113             20                  AA         01/11/2011
    110             103                 AD         01/12/2011  
    115             200                 AD         01/11/2011
    119             120                 AG         01/10/2011  
    130             20                  AK         01/11/2011 
```

第二张表

```
 CurrencyCode     OCT       NOV      DEC     JAN   ..

      AA             0.91     0.88     0.9     0.94  
      AB             0.9      0.8      0.96    0.89
      AC             0.81     0.79     0.82    0.84  
      AD             0.4      0.41     0.42    0.39
      AE             0.9      0.92     0.91    0.94  
      AF             0.8      0.82     0.83    0.81 
```

现在我想将第二个表中的数据添加到具有以下条件的新列中的第一个表中

```
1.It has to do based on the CurrencyCode and month
2.If the deal is from DEC and currencyCode is AA , then it has to take the value 0.9,
  if the deal is from NOV and currencyCode is AA , then it has to take the value 0.88.. 
```

所以，结果应该是这样的

```
 DealNum      CurrencyValue      CurrencyCode       Date        NewColumn

    110             100                 AA         01/12/2011        0.9
    111             200                 AB         01/11/2011        0.8
    112             120                 AC         01/10/2011        0.81  
    113             20                  AA         01/11/2011        0.88
    110             103                 AD         01/12/2011        0.42
    115             200                 AD         01/11/2011        0.41
    119             120                 AG         01/10/2011         --
    130             20                  AK         01/11/2011         -- 
```

我不知道如何将第一个表中的月份行值与第二个表中月份的列值进行比较。请在这件事上给予我帮助..

提前致谢。

干杯，哈里什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:23:19.143

这应该可行，尽管您的第二张桌子设计得不好。

```
SELECT   DealNum      
       , CurrencyValue      
       , CurrencyCode       
       , Date
       , Deal = 
         CASE MONTH(t1.Date)
           WHEN 1 THEN t2.JAN
           WHEN 2 THEN t2.FEB
           WHEN 3 THEN t2.MAR
           -- .....
           WHEN 10 THEN t2.OCT
           WHEN 11 THEN t2.NOV
           WHEN 12 THEN t2.DEC
        END
FROM Table1 t1 
INNER JOIN Table2 t2 ON t1.CurrencyCode = t2.CurrencyCode 
```

*   [月](http://msdn.microsoft.com/en-us/library/ms187813.aspx)
*   [案子](http://msdn.microsoft.com/de-de/library/ms181765.aspx)

# c# - 计算分配次数的差距

> ID：10244150
> 
> 赞同：1
> 
> 时间：2012-04-20T10:07:19.857
> 
> 标签：c#, math

我的数据库中有数千条记录，其时间戳属于一个事件。

每次在事件期间发生某些事情时，都会将其添加到带有时间戳的数据库中。

在该事件的某个时间点，大约有 15 分钟的间隔。在此时间间隔内，不会添加任何时间戳。

对于其余的事件时间戳将几乎连续添加。我需要计算间隔时间。

我真的不知道从哪里开始..有人可以帮忙吗？

这是一些时间戳的示例。
（时间戳以秒为单位）

```
 ________________________________________
 | ID |   Start Time   |    End Time    |
 |____|________________|________________|
 |360 |2575.57470703125|2583.83935546875|
 |____|________________|________________|       
 |361 |2597.36279296875|2627.36279296875|
 |____|________________|________________|     
 |362 |2647.94311523438|2664.39819335938|
 |____|________________|________________|
 |364 |2647.94311523438|2664.39819335938|
 |____|________________|________________|
 |365 |2723.02221679688|2735.68798828125|
 |____|________________|________________|<-------------interval here
 |366 |3480.07690429688|3501.07690429688|
 |____|________________|________________|
 |367 |3485.58837890625|3499.46630859375|
 |____|________________|________________|
 |368 |3538.79541015625|3552.32763671875|
 |____|________________|________________|
 |369 |3561.81372070313|38.8323478698734|
 |____|________________|________________|
 |370 |27.3427867889404|3582.81372070313|
 |____|________________|________________|
 |371 |3567.33056640625|3676.15234375236|
 |____|________________|________________| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:52:25.713

试试这个查询

```
select T1.ID
from <yourable> T1
inner join <yourable> T2 on T1.ID = T2.ID-1
where (T1.StartTime - T2.StartTime) > <yourinterval> 
```

让我知道这是否对您有帮助

# android - android：没有PC连接就无法读取LogCat

> ID：10244152
> 
> 赞同：0
> 
> 时间：2012-04-20T10:07:21.507
> 
> 标签：android, android-logcat

我对我的应用程序的行为感到非常困惑。当我将手机连接到 eclipse 并且我的服务正在读取 logcat 的每一行以查找子字符串时 - 一切正常。当我将手机与 PC 断开连接时，“logcat 读取代码”立即不起作用。

```
Process process = Runtime.getRuntime().exec("logcat -d");
Runtime.getRuntime().exec("logcat -c");
BufferedReader bufferedReader = new BufferedReader(
new InputStreamReader(process.getInputStream()));                       

    while ((line = bufferedReader.readLine()) != null) {
        if (line.indexOf("some string") > 0)... 
```

我下载了一些 logcat 应用程序，它们能够显示与 ... eclipse 完全相同的 logCat 行。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:57:08.777

你什么都不说，也许你会这样做。但是，您是否在 Manifest 中添加了权限**android.permission.READ_LOGS ？**

`<uses-permission android:name="android.permission.READ_LOGS"></uses-permission>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:08:28.313

好吧，我失去了 5 个小时的生命。看起来就像当日志文件被导出到 PC 时，android 在那里添加了一些最初没有包含的附加信息（例如时间 + 标签......）。我有第二个条件 if (line.length()>= 120) 如果移动设备与 PC 连接，则为真（由于附加信息，线路更长）并且在未连接移动设备时为假！

问题是无法通过调试找到这个错误:(

# android - Android 想知道 Child 系统是如何工作的

> ID：10244154
> 
> 赞同：0
> 
> 时间：2012-04-20T10:07:28.577
> 
> 标签：android, listview

问题是：在列表视图中，列表视图的子元素是否在屏幕上可见？

我的意思是每次键盘弹出时都会尝试跟踪子列表并到达列表的最后一个元素，但它无法访问。即使我在追查孩子之前追根溯源`currentListView.setSelection(currentListView.getCount());`

我只是在寻找一些解释，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:18:48.227

您调用最后一个元素是`currentListView.setSelection(currentListView.getCount()-1);`因为列表中的索引从 0 开始。

例如，如果您的列表有 3 个元素，它们的编号为：0|1|2。当你打电话时`getCount()`，你得到 3，所以它超出了界限。

# c# - 使用 LINQ 减少 SQL 查询以进行“每条记录”查找

> ID：10244155
> 
> 赞同：1
> 
> 时间：2012-04-20T10:07:33.927
> 
> 标签：c#, sql, performance, linq, linq-to-sql

首先，抱歉，如果标题具有误导性，请随时更改。

我在 C# asp.net MVC 3 Web 应用程序中使用 LINQ to SQL，其中一个功能是查询“用户”的集合。在使用数据之前应用了过滤、排序和分页。这部分很好，所有这些都被组织起来，以便在这个阶段只执行一个 SQL 查询（为此向 LINQ 致敬）。

但是，我所拥有的是每个“用户”都有许多关联的表（即地址、电子邮件、数字），用户可以在其中拥有一个或多个。现在出于我的功能的目的，我需要收集每个关联表中的第一个条目（即“主”记录）。我对此进行编码的方式是，对于在“过滤”部分中找到的每条记录，都有一个单独的查询来提取每个主要详细记录。

我敢肯定，在这一点上你们都知道我要去哪里：**我可以在不影响代码结构的情况下减少查询的数量吗？**

那么，下一部分，我的代码是什么样的......

（请记住，这是对这个问题的总结，可能会也可能不会编译/运行）

```
IQueryable<Data.User> users = GetUsers();

users = ApplyFilterSortingPaging(users);//nothing actually executed yet, still building the IQueryable

List<Models.User> results = users.Select(x => x.ToModel()); 
```

现在您将希望看到 ToModel 扩展方法...

```
public static Models.User ToModel(this Data.User user)
{
    Models.User result = new Models.User()
    {
       Name = user.Name,
       PrimaryAddress = user.Addresses.First(),
       PrimaryEmail = user.Emails.First(),
       PrimaryNumber = user.Numbers.First()
    };
} 
```

如您所料，对于每个联系人记录，我现在运行了另外 3 个查询。总体而言，性能不是问题（至少目前如此）——一切都很快。**我可以做些什么来将其减少到每条记录只有一个查询？**甚至只是一个主要的“获取所有过滤记录+额外数据”查询？

也许这是更具可读性/可重用代码的成本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:58:40.060

您可以在数据库中创建所需数据的视图，然后使用 LINQ 进行查询。

# android - 如何使用 Openfire 向特定用户广播消息？

> ID：10244159
> 
> 赞同：2
> 
> 时间：2012-04-20T10:07:41.523
> 
> 标签：android, broadcast, openfire

[如何使用Openfire](http://www.igniterealtime.org/projects/openfire/)向特定用户广播消息。

**场景：**我只想向信用余额小于 100 的用户广播消息。我查看了[Openfire的](http://www.igniterealtime.org/projects/openfire/)[广播](http://www.igniterealtime.org/projects/openfire/plugins.jsp)和[每日消息（MOTD）](http://www.igniterealtime.org/projects/openfire/plugins.jsp)插件。

广播插件用于向所有人和特定群组发送广播消息。MOTD插件用于在用户上线时向所有人发送消息。

我在网上搜索但没有得到任何东西。

任何建议和意见将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:56:10.737

您可以在您的 openfire 服务器上注册一个特殊帐户来发送所有这些消息。并以普通方式发送。

如果您想在自定义插件中使用此功能，可以按如下方式进行：

```
packet.setTo(userJid); // packet - is the message you want to send
ComponentManagerFactory.getComponentManager().sendPacket(this, packet); 
```

# jsf-2 - Primefaces 日历组件和日期转换

> ID：10244164
> 
> 赞同：4
> 
> 时间：2012-04-20T10:08:06.510
> 
> 标签：jsf-2, primefaces

我正在使用 primefaces 的日历组件。我在 VO 中有一个相应的字符串。在数据库中保存时，我需要将字符串转换为 java.sql.date。

**html** :

```
<p:calendar value="#{articlePromo.startDate}"
    id="vendorStartDateInputTxt" pattern="dd/MM/yyyy" mode="popup" showOn="button">
    <f:convertDateTime type="date"  dateStyle="short" pattern="dd/MM/yyyy" />
</p:calendar> 
```

startDate (String) 的值是：Sat Apr 21 05:30:00 IST 2012

**Java获取sql日期的方法**

```
public static Date getSQLDate(String strDate) {
    java.sql.Date sqlDate = null;
    try {
        SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");
        java.util.Date dt = formatter.parse(strDate);
        sqlDate = new java.sql.Date(dt.getTime());
    } catch (Exception e) {
        e.printStackTrace();
    }

    return sqlDate;
} 
```

在转换日历的 java.util.date 时，我使用了模式 dd/MM/yyyy。但它转换为的日期是：Sat Apr 21 05:30:00 IST 2012。

1.  **上面写的f:convertDateTime**标记是否有任何不正确之处。
2.  如果没有，我怎样才能将此字符串转换为 sql 日期。无法理解应该给出什么格式。

谢谢， 希哈

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T10:53:53.053

尝试

```
<p:calendar value="#{articlePromo.startDate}"
    id="vendorStartDateInputTxt" pattern="dd/MM/yyyy" mode="popup" showOn="button">
</p:calendar> 
```

`startDate`对象`java.util.Date`在哪里

此外，如果要格式化 Date 对象，可以使用 SimpleDateFormat ：

```
DateFormat df=new SimpleDateFormat("dd/MM/yyyy");
String s=df.format(startDate); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-20T11:28:10.203

`f:convertDateTime`唯一将字符串*转换*为*对象*，反之亦然。需要的*对象*是`p:calendar`一个`java.util.Date`（它是`value`属性）。*字符串*是您在浏览器中看到的格式化日期！

Primefaces 日历会自动附加转换器。这就是为什么你`pattern`在`p:calendar`.

因此，您应该删除`f:convertDateTime`Daniel 已经提出的附加内容。

然后从`java.util.Date`to的转换`java.sql.Date`非常简单：

```
public java.sql.Date sqlDate(java.util.Date calendarDate) {
  return new java.sql.Date(calendarDate.getTime());
} 
```

# wpf - 网格列宽 - 混合*（星号）、自动并填充左侧空间

> ID：10244166
> 
> 赞同：0
> 
> 时间：2012-04-20T10:08:09.573
> 
> 标签：wpf, grid, width, alignment

我在列定义之后有一个网格宽度：

```
<Grid.ColumnDefinitions>
        <ColumnDefinition MinWidth="320" MaxWidth="450" Width=".32*"/>
        <ColumnDefinition MinWidth="200" Width="Auto"/>
        <ColumnDefinition MinWidth="200" Width="Auto"/>
        <ColumnDefinition Width="Auto"/> <- (4) should fill all available space
        <ColumnDefinition MinWidth="250" MaxWidth="300" Width=".20*"/>
</Grid.ColumnDefinitions> 
```

问题是在第 (4) 列上将宽度设置为 Auto 会将其宽度归零，最后一列紧邻第三列。我想让最后一列与应用程序的右边缘对齐，前三列在左侧。

我也无法将 (4) 宽度设置为 star(*) - 显然它相对于第一列和最后一列延伸。

我一直在尝试水平对齐，但结果是 - 内容没有填充列宽。我可以将内容宽度绑定到列宽或类似的东西，但我很好奇是否有一些简单的方法可以实现（4）列填充所有剩余空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:48:49.870

我认为您并没有完全理解代表加权平均值的 (*)。

所以对于你的情况。

```
<Grid.ColumnDefinitions>
     <ColumnDefinition MinWidth="320" MaxWidth="450" Width="3*"/>
     <ColumnDefinition MinWidth="200" Width="Auto"/>
     <ColumnDefinition MinWidth="200" Width="Auto"/>
     <ColumnDefinition Width="5*"/>
     <ColumnDefinition MinWidth="250" MaxWidth="300" Width="2*"/>
 </Grid.ColumnDefinitions> 
```

如果您希望第 (4) 列变小，请减少 * 权重并在您喜欢的地方增加。

希望能帮助到你...

# php - 使用 Google Search API 搜索多个站点，siteSearch 不起作用

> ID：10244169
> 
> 赞同：0
> 
> 时间：2012-04-20T10:08:17.720
> 
> 标签：php, search

这是我的要求：

[https://www.googleapis.com/customsearch/v1?key=MYKEY&q=flowers&alt=json&siteSearch=google.com|youtube.com&siteSearchFilter=i&cx=MYCXKEY](https://www.googleapis.com/customsearch/v1?key=MYKEY&q=flowers&alt=json&siteSearch=google.com|youtube.com&siteSearchFilter=i&cx=MYCXKEY)

当我创建 Google 搜索引擎时，我设置了一个页面，但我希望 siteSearch 覆盖该选项并让我搜索更多网站。

但它什么也没做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:06:04.043

你的问题能更清楚一点吗？“设置页面”是什么意思？

如果您尝试进行正常搜索，只需取出 siteSearch 和 siteSearchFilter 参数。

如果您尝试排除 google.com 和 youtube.com，请更改您的 | 到 && 并将 siteSearchFilter 从 i 更改为 e。

# maven - 第谷：通过多模块父级构建时“无法满足依赖关系......”

> ID：10244171
> 
> 赞同：8
> 
> 时间：2012-04-20T10:08:29.567
> 
> 标签：maven, tycho

我必须使用 Maven/Tycho 构建一个 Eclipse 插件，该插件依赖于其他第 3 方。由于 Tycho 尚不支持嵌入依赖项，因此我将项目分为以下两个：

*   `A-thirdparty`：带有打包“bundle”的项目，由**maven-bundle-plugin**构建，具有**“嵌入依赖”**指令，并导出插件**“A”所需的所有包**
*   `A`: 使用 tycho-maven-plugin 和 Tycho 的 target-platform-configuration 插件打包为 'eclipse-plugin' 的项目，`pomDependencies`设置为`consider`.

当我单独构建它们时（首先是第三方聚合器，然后是项目 A 本身），一切正常。但是，如果我聚合这两个项目（使用多模块 POM），我会收到以下 Maven 错误：

```
Caused by: java.lang.RuntimeException: "No solution found because the problem is unsatisfiable.": ["Unable to satisfy dependency from A 1.0.0.qualifier to package org.apache.axis2.transaction 0.0.0.", "Unable to satisfy dependency from A 1.0.0.qualifier to package org.apache.axis2.addressing.i18n 0.0.0.", ... 
```

为什么以聚合方式构建项目会导致此错误，如果这是第谷错误，可能会有什么样的解决方法？

但是，如果我在聚合 POM 中只留下一个模块（独立于哪个模块），则没有错误。

**编辑**

无法使用类似的小型多模块样本进行复制。这意味着我的 POM 层次结构有些问题。

**编辑2**

**在包含相同的依赖项集（几个axis2和axiom库）之后，能够使用一个小的、类似的多模块样本**进行重现。****

 ****EDIT3：简约示例**

现在我想知道问题是否与我包含的第三方库**所需的所有第三方有关。**如果是这样，那么为什么我能够在分别执行两个模块时成功构建，而只有在通过父多模块 pom.xml 完成时构建才会失败？下面的示例仅包含一个单一的 axis2-kernel JAR，捆绑在名为**first-thirdparty**的 pom-first 工件中。

而不是`A`， example 有 keyword `first`。文件夹结构如下：

```
./pom.xml
./first-thirdparty
    pom.xml
./first
    src/main/java/org/mydemo/Test.java // has just one method that simply returns AxisFault.class.getSimpleName(); to test import resolution
    META-INF/MANIFEST.MF
    build.properties
    pom.xml 
```

根pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
        http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.mydemo</groupId>
    <artifactId>first-aggregator</artifactId>

    <packaging>pom</packaging>
    <version>1.0.0-SNAPSHOT</version>

    <modules>
        <module>first-thirdparty</module>
        <module>first</module>
    </modules>

</project> 
```

的POM `first-thirdparty`。它只是嵌入了axis2-kernel JAR（没有其他库..）：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi=           "http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.mydemo</groupId>
        <artifactId>first-aggregator</artifactId>
        <version>1.0.0-SNAPSHOT</version>
        <relativePath>../pom.xml</relativePath>
    </parent>

    <properties>
        <manifest-location>META-INF</manifest-location>
    </properties>

    <packaging>bundle</packaging>

    <groupId>org.mydemo</groupId>
    <artifactId>first-thirdparty</artifactId>
    <version>1.0.0-SNAPSHOT</version>

    <dependencies>
        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-kernel</artifactId>
            <version>1.5.1</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <extensions>true</extensions>
                <configuration>
                    <instructions>
                        <Embed-Dependency>
                            axis2-kernel
                        </Embed-Dependency>
                        <_exportcontents>
                            org.apache.axis2.*;version="1.5.1"
                        </_exportcontents>
                        <Bundle-ClassPath>{maven-dependencies}</Bundle-ClassPath>
                        <Embed-Transitive>true</Embed-Transitive>
                        <Embed-Directory>jars</Embed-Directory>
                        <_failok>true</_failok>
                        <_nouses>true</_nouses>
                    </instructions>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

的 POM `first`，它是一个 eclipse 插件，并且依赖于`first-thirdparty`：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
        http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.mydemo</groupId>
        <artifactId>first-aggregator</artifactId>
        <version>1.0.0-SNAPSHOT</version>
        <relativePath>../pom.xml</relativePath>
    </parent>

    <groupId>org.mydemo</groupId>
    <artifactId>org.mydemo.first-bundle</artifactId>

    <packaging>eclipse-plugin</packaging>
    <version>1.0.0-SNAPSHOT</version>

    <properties>
        <tycho.ver>0.14.1</tycho.ver>
    </properties>

    <repositories>
        <repository>
            <id>helios</id>
            <layout>p2</layout>
            <url>http://download.eclipse.org/releases/indigo</url>
        </repository>
    </repositories>

    <dependencies>
        <dependency>
            <groupId>org.mydemo</groupId>
            <artifactId>first-thirdparty</artifactId>
            <version>1.0.0-SNAPSHOT</version>
        </dependency>
    </dependencies>

    <build> 
        <plugins>
            <plugin>
                <groupId>org.eclipse.tycho</groupId>
                <artifactId>tycho-maven-plugin</artifactId>
                <version>${tycho.ver}</version>
                <extensions>true</extensions>
            </plugin>
            <plugin>
                <groupId>org.eclipse.tycho</groupId>
                <artifactId>target-platform-configuration</artifactId>
                <version>${tycho.ver}</version>
                <configuration>
                    <pomDependencies>consider</pomDependencies>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

MANIFEST.MF 模块`first`；它显式导入axis2-kernel的所有包：

```
Manifest-Version: 1.0
Bundle-Version: 1.0.0.qualifier
Tool: Bnd-0.0.357
Bundle-Name: first-bundle
Bnd-LastModified: 1334819004300
Created-By: 1.6.0_25 (Sun Microsystems Inc.)
Bundle-ManifestVersion: 2
Bundle-SymbolicName: org.mydemo.first-bundle
Export-Package: org.mydemo
Import-Package: org.apache.axis2.clustering.context,
 org.apache.axis2.modules,
 org.apache.axis2.deployment.util,
 org.apache.axis2.dataretrieval.client,
 org.apache.axis2.clustering,
 org.apache.axis2.wsdl.util,
 org.apache.axis2.clustering.configuration,
 org.apache.axis2.java.security,
 org.apache.axis2.deployment.resolver,
 org.apache.axis2.util,
 org.apache.axis2.wsdl,
 org.apache.axis2.addressing.metadata,
 org.apache.axis2.i18n,
 org.apache.axis2.deployment.scheduler,
 org.apache.axis2.dataretrieval,
 org.apache.axis2.dispatchers,
 org.apache.axis2.transport,org.apache.axis2.service,
 org.apache.axis2.deployment.repository.util,
 org.apache.axis2.client,
 org.apache.axis2.context,
 org.apache.axis2.classloader,
 org.apache.axis2.receivers,
 org.apache.axis2.engine,
 org.apache.axis2.addressing,
 org.apache.axis2.deployment,
 org.apache.axis2.transport.http,
 org.apache.axis2.phaseresolver,
 org.apache.axis2.context.externalize,
 org.apache.axis2.transaction,
 org.apache.axis2.description,
 org.apache.axis2.addressing.wsdl,
 org.apache.axis2.transport.http.util,
 org.apache.axis2.util.threadpool,
 org.apache.axis2,
 org.apache.axis2.handlers,
 org.apache.axis2.addressing.i18n,
 org.apache.axis2.builder,
 org.apache.axis2.description.java2wsdl,
 org.apache.axis2.builder.unknowncontent,
 org.apache.axis2.namespace,
 org.apache.axis2.description.java2wsdl.bytecode,
 org.apache.axis2.client.async,
 org.osgi.framework;version="1.3.0"
Bundle-Localization: plugin 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T16:51:05.007

不可能在同一个反应器中构建“POM-first”包（即使用 maven-bundle-plugin 构建的包）和“MANIFEST-fist”包（即由 Tycho 构建的包）。这是[第谷的一个已知限制](https://bugs.eclipse.org/bugs/show_bug.cgi?id=393053)。

原因是当 maven-bundle-plugin 还没有机会生成 Manifest（Tycho 需要）时，Tycho 在 Maven 生命周期中过早地进行依赖解析。解决这个问题需要[相当大的改变](https://bugs.eclipse.org/bugs/show_bug.cgi?id=353889)，但我仍然希望能在中期完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-29T00:52:48.007

我刚刚遇到同样的问题。II以这种方式解决我的问题希望这对你有帮助

1您收到错误的原因是因为您缺少插件罐子。例如，在您的情况下“引起：java.lang.RuntimeException：“找不到解决方案，因为问题无法解决。”：[“无法满足从 A 1.0.0.qualifier 到包 org.apache.axis2.transaction 0.0 的依赖关系.0."," 看看第一个，你的 maven 存储库中没有“org.apache.axis2.transaction 0.0.0.”。老实说，我不确定 jar 用于什么以及如何获取它，我只是缺少其他版本的 eclipse 的一些插件依赖，所以我只需要 /eclipse/plugins 中的 jar 所以你要做的是创建一个 p2 存储库你自己。这是另一个人，他正确链接了如何使用脚本来创建 p2 存储库[http://maksim.sorokin。](http://maksim.sorokin.dk/it/2010/11/26/creating-a-p2-repository-from-features-and-plugins/)

2 将此存储库放入您的 maven pom 文件中

```
 <repository>
        <id>localP2resp</id>
        <url>file:///F:/P2Repository</url>
        <layout>p2</layout>
    </repository> 
```

3 到目前为止，如果您的 P2repository 中有所需的插件 jar，您应该解决问题

如果您有任何其他问题或对我的回答不满意，请继续询问 thx**

# powershell - 设置“恢复系统设置和以前版本的文件”选项

> ID：10244175
> 
> 赞同：0
> 
> 时间：2012-04-20T10:08:32.547
> 
> 标签：powershell, windows-7, setting, system-restore

使用 Windows 7 SP1 的命令提示符或 Windows Powershell，如何设置“还原系统设置和文件的先前版本”选项以创建还原点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:51:50.903

在 PowerShell 控制台中执行以下命令以获取与还原点相关的命令列表：

```
Get-Command -Noun *computer* | Format-Table Name, PSSnapin 
```

检查点-计算机

禁用-计算机恢复

启用-计算机恢复

获取计算机恢复点

# c++ - C++：类和回调问题

> ID：10244177
> 
> 赞同：2
> 
> 时间：2012-04-20T10:08:44.497
> 
> 标签：c++

这是我的代码和要求：

我有 2 个 A 和 B 类，它们没有任何继承。我用A类的一种方法调用B类的一种方法，那么B类的方法应该回调A类的方法之一来执行回调。

部分代码：

类A.h：

```
#include "classB.h"

class classA
{
  public:
  classA();
  classB *pClassB;
  void callClassB();
  void callBack();
}; 
```

类A.cpp：

```
#include "classA.h"
classA::classA()
{
  pClassB = new classB();
}

void classA::callBack()
{
  return;
}

void classA::callClassB()
{
  pClassB->callFunction();
} 
```

类B.h：

```
class classB
{
  public:
  classB();
  void callFunction();
} 
```

B类.cpp：

```
#include "classB.h"
classB::classB()
{
}

void classB::callFunction()
{
   // I should call classA's callback here!
} 
```

问题是，我不能在 classB.h 中包含 classA.h，因为它会在其他地方导致一些编译问题（我无法解决）。我不能将 classB 作为 classA 的子类（如果可以，我只需要这样做`classA::callBack()`）。那么有没有办法解决这种情况呢？

更新：这就是我修改的内容：

```
class classB
{
  public:
  classB(classA& pCallBack);
  void callFunction();
  void (classA::*m_callback)(void);
};

classA::classA()
{
  pClassB = new classB(*this);
}

classB::classB(classA& pCallBack)
{
  m_callback = pCallBack;
} 
```

我试图保存指针，但也失败了。它说“从不兼容的类型分配”......它有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T10:13:28.000

实际上，相互包含两个头文件是一种循环依赖，编译器无法解决。有不同的方法可以解决这个问题，我在下面描述其中的三种。

### 使用前向声明

打破循环依赖最直接的方法是使用*前向声明*。前向声明仅告诉编译器给定名称表示一个类。如果您只使用指向该类型的指针/引用就足够了，因为在这些情况下，编译器不需要该类型的完整定义。所以你可以像这样改变*classA.h*：

```
class classB;

class classA
{
  public:
  classA();
  classB *pClassB;
  void callClassB();
  void callBack();
}; 
```

这样，标头不再依赖于*classB.h*。当然，您现在需要*classA.cpp*`#include`中的该标头：

 *```
#include "classA.h"
#include "classB.h"
... 
```

### 介绍一个界面

另一种方法是向 引入一个超接口（或在 C++ 中，一个抽象超类）`classA`，然后让我们`classB`只看到：

回调.h：

```
class callback
{
  public:
  virtual void callBack() = 0;
}; 
```

类A.h：

```
#include "callback.h"

class classB;

class classA : public callback
{
  public:
  classA();
  classB *pClassB;
  void callClassB();
  void callBack();
}; 
```

类B.h：

```
#include "callback.h"

class classB
{
  callback& m_a;
public:
  classB(callback& a);
  void callFunction();
}; 
```

B类.cpp：

```
#include "classB.h"

classB::classB(callback& a) : m_a(a) {}

classB::callFunction()
{
  m_a.callBack();
} 
```

如您所见，这种方式`classB`不依赖`classA`于任何方式。这实际上允许您稍后`classA`用 的任何其他实现替换`callback`，而无需触及`classB`' 的定义。

### 引入函数指针

另一种可能性是定义/使用与 匹配的函数指针类型`classA::callBack()`，并且仅将指向回调函数的指针传递给`classB`，而不是整个`classA`对象。虽然，这只适用于`static`方法无缝 - 对于非静态函数，您仍然需要一个`classA`对象进行调用。

## 更新

您在修改后的代码中混合了两种方法（传递对象`classA`或仅传递函数指针）。最好一次坚持一个。第一种方法更简单，如下所示：

```
class classA;

class classB
{
  classA& m_a;
public:
  classB(classA& a);
  void callFunction();
};

classB::classB(classA& a) : m_a(a) {}

classB::callFunction()
{
  m_a.callBack();
} 
```

对于非静态成员函数，函数指针方法会更复杂，因为您需要函数指针*和*调用它的对象。@Tadeusz 的回答中显示了另一种方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T10:29:03.390

如果你只需要一个回调，那么B类就不需要知道A类的任何事情。只需传递一个回调。我将提供一个提升（C++ 11 之前）的解决方案：

类B.h：

```
#include <boost/function.hpp>

class classB
{
    void callFunction(boost::function<void()> callback);
} 
```

B类.cpp

```
void classB::callFunction(boost::function<void()> callback)
{
    callback();
} 
```

类A.cpp：

```
#include <boost/bind.hpp>

void classA::callBack()
{
  return;
}

void classA::callClassB()
{
  pClassB->callFunction(boost::bind(&classA::callBack, this));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T10:14:55.550

使用前向声明，例如：

类A.h：

```
class classB; // forward declaration
class classA
{
  public:
  classA();
  classB *pClassB;
  void callClassB();
  void callBack();
}; 
```

类B.h：

```
class classA; // forward declaration
class classB
{
  public:
  classB();
  void callFunction(classA& a);
  // could store pointer to classA instance here instead
} 
```

只要您仅在 classA.h 中使用指向 classB 的引用或指针，此方法就可以工作，反之亦然。

类A.cpp：

```
#include "classA.h"
#include "classB.h"
classA::classA()
{
  pClassB = new classB(); // could pass 'this' to classB here instead
}

void classA::callBack()
{
  return;
}

void classA::callClassB()
{
  pClassB->callFunction(*this);
} 
```

B类.cpp：

```
#include "classB.h"
#include "classA.h"
classB::classB()
{
}

void classB::callFunction(classA& a)
{
   a.callback();
} 
```*

# c - 如何检查变量是否包含字符串

> ID：10244179
> 
> 赞同：0
> 
> 时间：2012-04-20T10:08:55.627
> 
> 标签：c, string

我的 .c 程序在创建对象时给它一个“名称”。我需要能够根据该名称执行不同的任务。我对此很陌生，并且尝试了几种方法都没有成功。这是我想出的..

```
if (name ==  "james"){

    //Do a bunch of stuff
    } 
if (name ==  "tom"){

    //Do a bunch of stuff
    } 
```

这并不成功。有没有办法让如果“名字”是一件事，它不会执行其他的？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:12:21.233

如果 'name' 是 C++ 字符串，那么您编写的内容应该可以正常工作。如果是`char[]`or `char *`，请使用`strcmp`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:11:11.123

看看库函数[`strcmp`](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)。当您使用时，`==`您将只比较指针本身，而不是它们后面的实际字符串数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T10:11:33.550

您需要`strcmp`用作：

```
if (!strcmp(name,"james")){ 
```

使用`==`将 name 的内容（字符串的起始地址）与字符串文字“james”的起始地址进行比较，这肯定是您现在想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T10:19:07.777

假设这是一个标准的 .c 程序，并且您的“名称”实际上是 a，`char*`那么您将不得不使用该函数的[strings.h](http://pubs.opengroup.org/onlinepubs/7908799/xsh/string.h.html)标准 c 库`strcmp()`。

相等运算符`==`用于`std::string`和其他字符串类。

例如

```
if (strcmp(name,"james")==0){
  /* Do stuff */
} 
```

此外，您可能会考虑`switch`多个测试的条件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T10:20:48.947

在`C`中，字符串被定义为以 结尾的字符序列`\0`。字符串常量通常用 `" 表示，例如 char a[10] = "hello"。

为了比较两个字符串，您可以使用库函数`strcmp()`，如`string.h`. `man strcmp`阅读有关此功能的更多信息。

```
#include <stdio.h>
#include <string.h>

int main()
{
        char name[] = "tom";

        if (strcmp(name, "tom") == 0) {
            printf("name is tom! \n");
        } else if (strcmp(name, "bob") == 0) {
            printf("name is bob! \n");
        } else {
            printf("who is this?! \n");
        }

        return 0;
} 
```

strcmp 可以通过以下方式实现（供您参考的数组和指针版本）

```
int strcmp1(char a[], char b[])
{
        int i=0;
        while (a[i] == b[i]) {
                if (a[i] == '\0')
                        return 0;
                i++;
        }

        return a[i]-b[i];
}

int strcmp2(char *a, char *b)
{
        while (*a == *b) {
                if (*a == '\0')
                        return 0;
                a++; b++;
        }
        return *a-*b;
} 
```

# python - python：生成整数分区

> ID：10244180
> 
> 赞同：9
> 
> 时间：2012-04-20T10:08:58.933
> 
> 标签：python, combinatorics, performance, data-partitioning

我需要生成给定整数的所有[分区](https://en.wikipedia.org/wiki/Partition_%28number_theory%29)。
我发现 Jerome Kelleher 的这个算法据说是最有效的：

```
def accelAsc(n):
    a = [0 for i in range(n + 1)]
    k = 1
    a[0] = 0
    y = n - 1
    while k != 0:
        x = a[k - 1] + 1
        k -= 1
        while 2*x <= y:
            a[k] = x
            y -= x
            k += 1
        l = k + 1
        while x <= y:
            a[k] = x
            a[l] = y
            yield a[:k + 2]
            x += 1
            y -= 1
        a[k] = x + y
        y = x + y - 1
        yield a[:k + 1] 
```

*参考：[http ://homepages.ed.ac.uk/jkellehe/partitions.php](http://homepages.ed.ac.uk/jkellehe/partitions.php)*

顺便说一句，它不是很有效。对于像它这样的输入`40`，我的整个系统几乎冻结了几秒钟，然后才给出它的输出。

如果它是一个递归算法，我会尝试用缓存函数或其他东西来装饰它以提高它的效率，但是我不知道该怎么做。

你对如何加速这个算法有什么建议吗？或者你能建议我另一个，或者另一种从头开始制作另一个的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T14:21:09.647

要直接生成合成，您可以使用以下算法：

```
def ruleGen(n, m, sigma):
    """
    Generates all interpart restricted compositions of n with first part
    >= m using restriction function sigma. See Kelleher 2006, 'Encoding
    partitions as ascending compositions' chapters 3 and 4 for details.
    """
    a = [0 for i in range(n + 1)]
    k = 1
    a[0] = m - 1
    a[1] = n - m + 1
    while k != 0:
        x = a[k - 1] + 1
        y = a[k] - 1
        k -= 1
        while sigma(x) <= y:
            a[k] = x
            x = sigma(x)
            y -= x
            k += 1
        a[k] = x + y
        yield a[:k + 1] 
```

该算法非常通用，可以生成许多不同类型的分区和组合。对于您的情况，请使用

```
ruleGen(n, 1, lambda x: 1) 
```

生成所有不受限制的组合。第三个参数称为限制函数，描述了您需要的组合/分区类型。该方法是有效的，因为当您对所有生成的合成进行平均时，生成每个合成所需的工作量是恒定的。如果你想在 python 中让它稍微快一点，那么用 1 替换函数 sigma 很容易。

同样值得注意的是，对于任何恒定摊销时间算法，您对生成的对象所做的实际操作几乎肯定会主导生成它们的成本。例如，如果您将所有分区存储在一个列表中，那么为这个大列表管理内存所花费的时间将远远大于生成分区所花费的时间。

比如说，出于某种原因，您想取每个分区的乘积。如果您对此采取幼稚的方法，则所涉及的处理在零件数量上是线性的，而生成成本是恒定的。很难想象一个组合生成算法的应用，其中处理不支配生成成本。因此，在实践中，使用更简单和更通用的 ruleGen 与 sigma(x) = x 和专门的 accelAsc 之间没有可测量的差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T10:55:50.130

如果您要对相同的输入重复使用此函数，仍然值得缓存返回值（如果您要在不同的运行中使用它，您可以将结果存储在文件中）。

如果您找不到明显更快的算法，那么应该可以通过将代码移动到 C 扩展中（这可能是使用[cython](http://cython.org/)最简单的），或者使用[PyPy](http://pypy.org/)来将其加速一到两个数量级的 CPython （PyPy 有其缺点 - 它还不支持 Python 3，或一些常用的库，如 numpy 和 scipy）。

这样做的原因是，由于 python 是动态类型的，解释器可能大部分时间都在检查变量的类型——据解释器所知，其中一个操作可能会`x`变成一个字符串，在这种情况下，表达式`x + y`就像突然有了截然不同的含义。Cython 通过允许您将变量静态声明为整数来解决这个问题，而 PyPy 有一个[即时编译器](http://en.wikipedia.org/wiki/Just-in-time_compilation)，可以最大限度地减少冗余类型检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T11:33:11.387

使用 n=75 进行测试我得到：

PyPy 1.8：

```
w:\>c:\pypy-1.8\pypy.exe pstst.py
1.04800009727 secs. 
```

CPython 2.6：

```
w:\>python pstst.py
5.86199998856 secs. 
```

Cython + mingw + gcc 4.6.2：

```
w:\pstst> python -c "import pstst;pstst.run()"
4.06399989128 
```

我看不出与 Psyco 有什么不同（？）

运行函数：

```
def run():
    import time
    start = time.time()
    for p in accelAsc(75):
        pass
    print time.time() - start, 'secs.' 
```

如果我更改 Cython 的 accelAsc 定义以开始：

```
def accelAsc(int n):
    cdef int x, y, k
    # no more changes.. 
```

我将 Cython 时间缩短到 2.27 秒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:46:28.647

我会说您的性能问题在其他地方。

我没有将它与其他方法进行比较，但它对我来说似乎很有效：

```
import time

start = time.time()
partitions = list(accelAsc(40))
print('time: {:.5f} sec'.format(time.time() - start))
print('length:', len(partitions)) 
```

给：

```
time: 0.03636 sec
length: 37338 
```

# jboss - 'findstr' 未被识别为内部或外部命令，

> ID：10244181
> 
> 赞同：40
> 
> 时间：2012-04-20T10:09:01.403
> 
> 标签：jboss

今天从命令行提示符启动 JBoss 时出现以下错误：

```
'findstr' is not recognized as an internal or external command 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-20T13:08:11.970

请google一下，你可以找到很多答案。但请执行以下操作来修复它。将以下值添加到右键单击我的计算机 -> 高级 -> 环境变量 -> 系统变量 -> 选择路径变量 -> 附加以下值。

> C:\WINDOWS\system32

它应该适用于这种变化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-23T08:59:40.163

正如其他人指出的那样，问题在于 Windows 中 PATH 变量的错误设置。根据[文章](http://social.technet.microsoft.com/Forums/windows/en-US/63b84992-3814-4c00-acbf-fc09816570e5/problem-in-path-settings-windows7)，这很可能是因为一些愚蠢的安装程序错误地修改了 Windows 注册表中的 PATH 变量。注册表有 2 种不同的字符串值类型 -`REG_SZ`和`REG_EXPAND_SZ`. 只有第二个允许扩展`%SystemRoot%`.

`set path`因此，通过输入命令提示符检查您的路径。如果您`%SystemRoot%`在 Path 中看到未扩展的变量和其他变量，则会受到影响（PATH 应该只显示普通目录名称，而不是变量）。

您需要在注册表中编辑 Path 变量：`HKEY_CURRENT_USER\Environment`和`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment`. 由于无法更改键的类型，请将路径值保存在某处，删除键并使用 type 重新创建它`REG_EXPAND_SZ`。您需要注销才能使更改生效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-07T15:29:09.507

对我来说，当我处理 findstr（从 windows/system32）到 wildfly/bin 时，它可以工作

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T04:31:40.493

Please go throught the simplest steps:-

1.  go to `C:\Windows\system32\` and copy `findstr.exe` file.
2.  paste this file into the location `C:\Program Files\Java\jdk1.6.0_24\bin`
3.  Run your jboss again you will get out of this.....

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-15T16:51:03.313

检查您的 %SystemRoot% 是否正在评估（在命令提示符中键入 set path，您不应该看到 %SystemRoot%，而是看到实际路径）。如果您的路径变量（用户或系统）的第一个条目以 %（环境变量）开头，这可能会导致问题。

要解决此问题，只需将此第一个条目与路径中不以环境变量开头的任何其他内容交换即可。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-27T11:00:16.883

您还可以通过将“findstr”替换为“C:\Windows\system32\findstr”来对目录进行硬编码。这在使用具有受限用户权限的系统时很有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-24T11:52:42.640

请注意当前的 Windows 系统使用大写的“S”作为系统目录，因此：C:\WINDOWS\System32 %SystemRoot%\System32

省略大写 S 将导致忽略 %PATH% 中的行

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-22T15:15:16.697

就我而言（与 JBoss 无关），以下内容有助于修复此错误。

代替：

```
SET path="%path%;C:\some\additional\path" 
```

我用了：

```
SET "path=%path%;C:\some\additional\path" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-31T09:01:40.943

对于 IBM ACE 解决方案

'findstr' 未被识别为内部或外部命令，

1.  转到路径 C:\Windows\System32

2.  找到 findstr.exe，复制它，然后找到您的应用程序的 bin 文件所在的路径。例如 C:\Program Files\IBM\ACE\11.0.0.12\server\bin 然后将其粘贴到 bin 文件中

3.  取消ace的控制台并重新打开它。

4.  然后在 ace 控制台上运行 ACE toolkit 命令。

5.  然后回车，现在可以打开了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-09T12:41:01.470

我尝试使用播放框架，但坚持运行 activator.bat 文件，但解决方案相同，只需从 windows/system32/findsr 复制文件并将其粘贴到卡住的文件夹下，然后再次运行相应的文件。感谢 andrewsiand Suryaprakash

# php - 使用 PHP 跳过重复的 CSV 导入 MySQL

> ID：10244185
> 
> 赞同：2
> 
> 时间：2012-04-20T10:09:04.303
> 
> 标签：php, mysql, csv

我有一个将 csv 导入 MySQL 数据库的 PHP 脚本。使用这行代码导入工作正常

```
$query = "insert into $databasetable values('$linemysql');"; 
```

唯一的问题是当我尝试导入另一个带有重复脚本错误的 csv 文件时。如果存在重复项，如何调整此脚本以跳过重复项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T10:25:31.940

`INSERT IGNORE`如果这会导致重复键，则不会插入行。但是，它也会忽略（并且不会产生错误）一些其他情况，例如尝试插入`NULL`具有`NOT NULL`约束的列。

如果您只想忽略重复项但仍会遇到其他插入错误，请`INSERT ... ON DUPLICATE KEY UPDATE`改用。这将使用重复键更新行，尽管会带来一些性能成本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:12:30.570

如果您使用的是 mysql，请尝试：

```
$query = "insert ignore into $databasetable values('$linemysql');"; 
```

# zend-framework - 将我的 Zend Framework 应用程序从 Windows 移动到 Linux 并收到致命错误：未捕获的异常 'Zend_Loader_PluginLoader_Exception'

> ID：10244186
> 
> 赞同：1
> 
> 时间：2012-04-20T10:09:06.627
> 
> 标签：zend-framework

我已将一个相对简单的 ZF 应用程序从基于 Windows 的服务器移至 linux 服务器，并收到以下致命错误：

```
'Fatal error: Uncaught exception 'Zend_Loader_PluginLoader_Exception' with message 'Plugin by name 'SiteDetail' was not found in the registry; used paths: Zend_View_Helper_: Zend/View/Helper/:/home/yourfran/public_html/customcutout/application/views/helpers/' in /usr/etc/Zend/library/Zend/Loader/PluginLoader.php:412 Stack trace: #0 /usr/etc/Zend/library/Zend/View/Abstract.php(1182): Zend_Loader_PluginLoader->load('SiteDetail') #1 /usr/etc/Zend/library/Zend/View/Abstract.php(618): Zend_View_Abstract->_getPlugin('helper', 'siteDetail') #2 /usr/etc/Zend/library/Zend/View/Abstract.php(344): Zend_View_Abstract->getHelper('siteDetail') #3 /home/yourfran/public_html/customcutout/application/layouts/scripts/layout.phtml(28): Zend_View_Abstract->__call('siteDetail', Array) #4 /home/yourfran/public_html/customcutout/application/layouts/scripts/layout.phtml(28): Zend_View->siteDetail() #5 /usr/etc/Zend/library/Zend/View.php(108): include('/home/yourfran/...') #6 /usr/etc/Zend/library/Zend/View/Abstract.php(888): Zend_View->_run('/hom in /usr/etc/Zend/library/Zend/Controller/Plugin/Broker.php on line 336 
```

我有一个名为 Sitedetail （不是 SiteDetail）的视图助手，但在我的代码中，我没有将它称为*SiteDetail*，只有小写的*d*

任何帮助表示赞赏。

更新：

第 28 行，layout.phtml

```
<h1><?php echo $this->escape($this->siteDetail()->title); ?></h1> 
```

固定：[如何？像这样..]

在我看来助手（Sitedetail.php）我改变了

```
public function siteDetail() 
```

到

```
public function Sitedetail() 
```

然后在我的 layout.phtml

```
<h1><?php echo $this->escape($this->siteDetail()->title); ?></h1>
<p><?php echo $this->escape($this->siteDetail()->strapline); ?></p> 
```

到

```
<h1><?php echo $this->escape($this->Sitedetail()->title); ?></h1>
<p><?php echo $this->escape($this->Sitedetail()->strapline); ?></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:14:41.453

几个月前我遇到了类似的问题。正如您所指出的，问题可能是区分大小写。Windows 文件系统不区分大小写，但 Linux 绝对是。

检查帮助文件的文件名中的大小写，这可能是原因。

希望有帮助，

# c++ - 具有独特元素的列表

> ID：10244189
> 
> 赞同：4
> 
> 时间：2012-04-20T10:09:19.550
> 
> 标签：c++, collections

我需要一个容器，其中：

*   当我添加一个尚不存在的新元素时，它被添加到列表的顶部
*   当我添加一个已经存在的元素时，它不会被添加并且我会在列表中获取它的索引
*   插入元素后，它始终具有相同的索引，并且可以使用该索引进行访问

`std::set`单独是不够的，因为我无法使用`[index]`. `std::list`也不是，因为它不存储唯一的元素。

我使用了混合解决方案，`list`但`map`也许有一些标准的通用模板？

我不想使用升压。`list::unique`每次插入后调用都不是解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:25:21.263

如果您只使用 a `std::list`（或`std::vector`，就此而言），如果您不想避免重复，但您想保持原始顺序，您将不会绕过线性搜索。一个基于简单 `std::vector`的解决方案可能是：

```
int
createIndex( std::vector<T>& references, T const& newValue )
{
    int results = std::find( references.begin(), references.end(), newValue )
                                    - references.begin();
    if ( results == references.size() ) {
        references.push_back( newValue );
    }
    return results;
} 
```

或者，您可以使用`std::map`：

```
int
createIndex( std::map<T, int>& references, T const& newValue )
{
    st::map<T, int>::iterator results = references.find( newValue );
    if ( results == references.end() ) {
        results = references.insert(
                    std::make_pair( newValue, references.size() ) ).first;
    }
    return results->second;
} 
```

（这假设`T`支持`<`。如果不支持，则必须建立排序标准。或者使用`unordered_map`并为其定义哈希码。）

# user-interface - 轻量级maven依赖管理GUI工具

> ID：10244191
> 
> 赞同：2
> 
> 时间：2012-04-20T10:09:24.923
> 
> 标签：user-interface, maven, dependencies, dependency-management

我知道 eclipse 有点像给你一个 maven 依赖和依赖层次结构的 GUI 视图。是否有任何其他 GUI 工具我可以轻松地放入我的 pom.xml 文件中，它可以解决问题并让我很好地查看依赖关系树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:14:15.163

有一个[简洁的项目](http://code.google.com/p/maven-overview-plugin/)允许您为依赖项生成图表。

我个人使用[IntelliJ](http://blogs.jetbrains.com/idea/2010/05/maven-dependencies-diagram/)来获取我的依赖关系图，但那是因为 IntelliJ 作为我的 IDE。

如果您是 CLI 用户并且不介意必须在 CLI 中导航，您还可以使用[`mvn dependency:tree`](http://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html)which 还为您提供依赖关系图。

有关更多信息，请查看下面的链接。

* * *

**资源：**

*   [codehaus.org - 依赖关系图](http://docs.codehaus.org/display/MAVEN/Dependency+Graphing)

# sql - 在“上一行”和新列中显示列值

> ID：10244192
> 
> 赞同：0
> 
> 时间：2012-04-20T10:09:28.140
> 
> 标签：sql

我有一张有四列的桌子；Plant_Id、年、月和 MR。我希望能够计算 MR 的范围（2 个月的差异）。表示例（MaintenanceRatebepaen 是表名）如下所示：

```
Plant_ID  Year  Month  MR  
CCAR      2009    1    0,706452  
CCAR      2009    2    0,625899  
CCAR      2009    3    0,636678  
CCAR      2009    4    0,736544  
CCAR      2009    5    0,552023
CCAR      2009    6    0,418338  
CCAR      2009    7    0,502732  
CCAR      2009    8    0,64526  
CCAR      2009    9    0,743333  
CCAR      2009    10   0,555556  
CCAR      2009    11   0,297561  
CCAR      2009    12   0,338608  
CCAR      2010    1    0,380783  
Etc. 
```

我不确定这是否有趣，但 Plant_id 可以有 25 个不同的值，从 2008 年到 2012 年，1-12 个月，MR 是一个计算值。

查询如下所示：

```
SELECT  Plant_Id, Jaar, Maand
    ,   (SUM(Compl) + 0.000) / SUM(Total) AS MR  
FROM (
        SELECT  Plant_Id, Jaar, Late, EarlyJobs, OnTimeJobs, Maand
            ,   SUM(EarlyJobs + OnTimeJobs) AS Compl
            ,   SUM(EarlyJobs) + SUM(Late) + SUM(OnTimeJobs) AS Total 
        FROM    MaintenanceRatebepaen AS MaintenanceRatebepaen_1  
        GROUP BY Plant_Id, Jaar, Maand, Late, OnTimeJobs, EarlyJobs
    ) AS MaintenanceRatebepaen  
WHERE   (Jaar >= 2009) AND (Jaar <= 2011) AND (Plant_Id = 'CCAR')   
GROUP BY Jaar, Plant_Id, Maand  
ORDER BY Plant_Id, Jaar, Maand 
```

我是 SQL 新手，我设法从书籍和谷歌搜索中获得了上述内容。但我无法计算范围，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:15:15.990

你只是想要逐月的差异吗？

数据

```
declare @data table (PlantId nvarchar(5), [Year] nvarchar(4), [Month] int, MR decimal(10,10))

INSERT @data VALUES 
('CCAR','2009','1','0.706452'),('CCAR','2009','2','0.625899'),('CCAR','2009','3','0.636678'),('CCAR','2009','4','0.736544'),('CCAR','2009','5','0.552023'),('CCAR','2009','6','0.418338'),('CCAR','2009','7','0.502732'),('CCAR','2009','8','0.64526'),('CCAR','2009','9','0.743333'),('CCAR','2009','10','0.555556'),('CCAR','2009','11','0.297561'),('CCAR','2009','12','0.338608'),('CCAR','2010','1','0.380783') 
```

询问

```
;with cte as (
    SELECT *, ROW_NUMBER() OVER (ORDER BY Year DESC, Month DESC) AS RowNumber  FROM @data
)
select  d1.PlantId
    ,   d1.Year
    ,   d1.Month
    ,   d1.MR
    ,   d1.MR-d2.MR AS [ChangeMRFromPreviousMonth]
from    cte d1
LEFT OUTER JOIN cte d2
    on d2.RowNumber = (d1.RowNumber+1)
order by d1.RowNumber DESC 
```

结果：

```
PlantId Year Month       MR                                      ChangeMRFromPreviousMonth
------- ---- ----------- --------------------------------------- ---------------------------------------
CCAR    2009 1           0.7064520000                            NULL
CCAR    2009 2           0.6258990000                            -0.0805530000
CCAR    2009 3           0.6366780000                            0.0107790000
CCAR    2009 4           0.7365440000                            0.0998660000
CCAR    2009 5           0.5520230000                            -0.1845210000
CCAR    2009 6           0.4183380000                            -0.1336850000
CCAR    2009 7           0.5027320000                            0.0843940000
CCAR    2009 8           0.6452600000                            0.1425280000
CCAR    2009 9           0.7433330000                            0.0980730000
CCAR    2009 10          0.5555560000                            -0.1877770000
CCAR    2009 11          0.2975610000                            -0.2579950000
CCAR    2009 12          0.3386080000                            0.0410470000
CCAR    2010 1           0.3807830000                            0.0421750000 
```

那是你需要的吗？您的查询包含很多额外的列，所以我不知道您是否想要包括在内？

*** 编辑 *** 作为对您的评论的回应，您需要将您的查询放在 CTE 内，并带有额外的 RowNumber 列。d1 和 d2 只是该 CTE 的别名。我认为应该这样做：

```
;with cte as (
    SELECT  Plant_Id, Jaar, Maand
        ,   (SUM(Compl) + 0.000) / SUM(Total) AS MR  
        ,   ROW_NUMBER() OVER (ORDER BY Jaar DESC, Maand DESC) AS RowNumber
    FROM (
        SELECT  Plant_Id, Jaar, Late, EarlyJobs, OnTimeJobs, Maand
            ,   SUM(EarlyJobs + OnTimeJobs) AS Compl
            ,   SUM(EarlyJobs) + SUM(Late) + SUM(OnTimeJobs) AS Total 
        FROM    MaintenanceRatebepaen AS MaintenanceRatebepaen_1  
        GROUP BY Plant_Id, Jaar, Maand, Late, OnTimeJobs, EarlyJobs
    ) AS MaintenanceRatebepaen  
    WHERE   (Jaar >= 2009) AND (Jaar <= 2011) AND (Plant_Id = 'CCAR')   
    GROUP BY Jaar, Plant_Id, Maand  
    ORDER BY Plant_Id, Jaar, Maand
)
select  d1.PlantId
    ,   d1.Jaar
    ,   d1.Maand
    ,   d1.MR
    ,   d1.MR-d2.MR AS [ChangeMRFromPreviousMonth]
from    cte d1
LEFT OUTER JOIN cte d2
    on d2.RowNumber = (d1.RowNumber+1)
order by d1.RowNumber DESC 
```

# c# - 找到 x 个项目后中止 linq 查询？

> ID：10244194
> 
> 赞同：3
> 
> 时间：2012-04-20T10:09:36.317
> 
> 标签：c#, linq, take

如果我知道集合中只有一个匹配项，有没有办法告诉 Linq 这一点，以便它在找到它时中止搜索？

我假设这两个都在返回一个项目之前搜索完整的集合？

```
var fred = _people.Where((p) => p.Name == "Fred").First();
var bill = _people.Where((p) => p.Name == "Bill").Take(1); 
```

**编辑：**人们似乎对`FirstOrDefault`, 或`SingleOrDefault`. 这些与我的问题无关。如果集合为空，它们只是提供一个默认值。正如我所说，我知道我的收藏有一个匹配的项目。

AakashM 的评论是我最感兴趣的。我会出现我的假​​设是错误的，但我很感兴趣为什么。例如，当 linq to objects 在我的示例代码中运行 Where() 函数时，它如何知道对其返回值还有进一步的操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T10:43:54.363

你的假设是错误的。LINQ 大量使用延迟执行和[惰性求值](http://blogs.msdn.com/b/ericwhite/archive/2006/10/04/lazy-evaluation-_2800_and-in-contrast_2c00_-eager-evaluation_2900_.aspx)。这意味着，例如，当您调用 时`Where()`，它实际上并没有迭代集合。只有当你迭代它返回的对象时，它才会迭代原始集合。它会以一种懒惰的方式来做：只做必要的事情。

因此，在您的情况下，两个查询都不会迭代整个集合：两者都只会迭代它直到找到第一个元素，然后停止。

实际上，第二个查询（with `Take()`）甚至不会这样做，它只会在您迭代结果时迭代源集合。

这一切都适用于 LINQ to 对象。其他提供程序（LINQ to SQL 和其他）的行为可能有所不同，但至少延迟执行的原则通常仍然成立。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:15:42.083

我认为`First()`不会扫描整个集合。它将在第一场比赛后立即返回。但我建议`FirstOrDefault()`改用。

编辑：

`First()`和之间的区别`FirstOrDefault()`（来自 MSDN）：

如果 source 不包含任何元素，该`First()`方法将引发异常。要在源序列为空时返回默认值，请使用该`FirstOrDefault()`方法。

[可枚举的.First](http://msdn.microsoft.com/en-us/library/bb291976.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T10:15:10.263

替换`.Where(`为`.SingleorDefault(` 这将为您找到第一个也是唯一的项目。

但是您不能对任何给定的数字执行此操作。如果您需要 2 件物品，则需要获得整个收藏品。

但是，您不必担心时间。最大的努力用于打开数据库连接和建立查询。执行查询不会花费太多时间，因此没有真正的理由中途停止查询 :-)

# asp.net-mvc-3 - 如何从 MVC3/Razor 中的回发更新标签

> ID：10244195
> 
> 赞同：1
> 
> 时间：2012-04-20T10:09:46.987
> 
> 标签：asp.net-mvc-3, razor

MVC/Razor/Javascript 新手问题：

我有一个 MVC3/Razor 表单，用户可以从下拉列表中选择单个产品。

```
<div class="editor-label">
  Product
</div>
<div class="editor-field">
  @Html.DropDownList("ProductID", (IEnumerable<SelectListItem>)ViewBag.Products, "--Select One--")
  @Html.ValidationMessageFor(model => model.ProductID)
</div> 
```

然后我想要的是在下拉列表正下方的标签上显示所选产品的价格（模型属性名称为`Amount`）。

这应该很容易，但我在 Razor 还很新，对 Javascript 几乎一无所知，所以我会很感激任何关于如何做到这一点的详细解释，以及它们是如何结合在一起的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T23:13:10.560

在 Dropdown 下添加一个 div/span 。

```
@Html.DropDownList("ProductID", (IEnumerable<SelectListItem>)ViewBag.Products, "--Select One--")
<div id="itemPrice"></div> 
```

并在您的脚本中，对您返回价格的控制器操作之一进行 ajax 调用。

```
$(function(){
  $("#ProductId").change(function(){
    var val=$(this).val();        
    $("#itemPrice").load("@Url.Action("GetPrice","Product")", { itemId : val });
  });
}); 
```

并在您的产品控制器中有这样的控制器操作

```
public string GetPrice(int itemId)
{
  decimal itemPrice=0.0M;
   //using the Id, get the price of the product from your data layer and set that to itemPrice variable.

  return itemPrice.ToString();
} 
```

这就对了 ！确保您在页面中加载了 jQuery，这样可以正常工作。

**编辑：**在您的页面中包含此行以加载 jQuery 库（如果尚未加载），

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:06:26.897

当用户选择产品时，您的视图无法使用 Amount（请记住页面在服务器上呈现，但实际上在客户端上执行；您的模型在客户端的页面中不可用）。因此，您要么必须在一个 JavaScript 数组中呈现，其中包含基于传递给客户端的产品的金额查找（因此它可以通过客户端 JavaScript 获得），或者您必须对服务器来检索此信息。

我会使用 jQuery 来做到这一点。

这是一个简单的示例，说明如果您使用数组，jQuery/Javascript 代码可能会是什么样子。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
   $(document).ready(function() {  
       // This code can easily be built up server side as a string, then
       // embedded here using @Html.Raw(Model.NameOfPropertyWithString)
       var list = new Array();
       list[0] = "";
       list[1] = "$1.00";
       list[2] = "$1.25";

       $("#ProductID").change(displayAmount).keypress(displayAmount);

       function displayAmount() {
          var amount = list[($(this).prop('selectedIndex'))];
          $("#amount").html(amount);
       }
    });
</script>
<select id="ProductID" name="ProductID">
  <option value="" selected>-- Select --</option>
  <option value="1">First</option>
  <option value="2">Second</option>
</select>
<div id="amount"></div> 
```

您需要花一些时间查看[jQuery](http://jquery.com/)的文档。你最终会经常使用它。该代码基本上“选择”下拉菜单并将处理程序附加到更改和按键事件。当它们触发时，它会调用 displayAmount 函数。displayAmount() 检索选定的索引，然后从列表中获取值。最后，它将 HTML 设置为检索到的数量。

您可以调用您的控制器，而不是本地数组。您将在控制器上创建一个操作（方法），将值作为 JsonResult 返回。您将使用 jquery.ajax() 进行回调。在此处和 jQuery 站点进行一些搜索，我相信您会找到大量有关如何执行此操作的示例。

# c++ - Eclipse CDT：从 Windows 到 Linux

> ID：10244202
> 
> 赞同：0
> 
> 时间：2012-04-20T10:10:10.097
> 
> 标签：c++, cross-platform, eclipse-cdt

我在 windows 上安装了 eclipse 并使用 cygwin 为 linux 开发程序。我使用 cygwin 工具链进行编译，并在 cygwin 上进行了测试。

现在我想用原生的 linux 工具链编译我的程序，我也想从 windows 机器上调试它。

Indigo SR2 有什么可能吗？实现这一目标的最佳方法是什么？

我发现[了这一点](https://stackoverflow.com/questions/4216822/work-on-a-remote-project-with-eclipse-via-ssh)，但随后我将有两个项目，一个用于 Windows，一个用于 linux。我希望两个平台都只有一个项目，以避免来回同步源。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:37:27.783

我猜你想要一个跨平台的开发环境。

这项工作有多种工具，但我的选择是[CMake](http://cmake.org "制作")。基本上，您将编写 CMakelists.txt 文件而不是 Eclipse .classpath 和 .project 文件，并使用 cmake 可执行文件生成这些文件。但在细节上，您将需要克服跨平台开发中固有的[一些困难。](https://stackoverflow.com/questions/tagged/cmake)

我已经使用这些工具成功地创建了多个项目，并且它们目前处于繁重的负载之下。

# iphone - 存储大量图像和 MP3 歌曲 iOS Sdk 的最佳方式是什么

> ID：10244209
> 
> 赞同：0
> 
> 时间：2012-04-20T10:10:51.467
> 
> 标签：iphone, objective-c, xcode

我正在做一个 iphone 应用程序，因为我必须存储大量 MP3 歌曲和图像。

谁能告诉我在性能方面最好的存储方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T10:24:11.010

将图像和歌曲存储在应用程序目录中。这是最好和最容易处理的方法。试试下面的代码。它会帮助你。

```
//Store Image/Songs files to Application Directory
+(BOOL)writeToFile:(NSData *)data fileName:(NSString *)fileName {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    // the path to write file
    NSString *appFile = [documentsDirectory stringByAppendingPathComponent:fileName];

        return [data writeToFile:appFile atomically:YES];
}
//Image/songs -  Retrieve from Application Directory
+(NSData *)readFromFile:(NSString *)fileName {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:fileName];

    NSData *myData = [NSData dataWithContentsOfFile:filePath]; 
    if (myData) { 
        return myData;
    }
    return nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:16:12.823

将 MP3 歌曲和图像存储到应用项目的资源文件夹中，并在 sqlite 数据库中提供参考（因为在 sqlite 数据库中保存大文件不是一个好习惯）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:23:07.037

我建议您将所有大尺寸的项目存储在设备磁盘上，即 Documents 目录，并将它们的物理路径存储在核心数据或 sqlite 或至少在 plist 文件中，以便您可以根据自己的方便检索它们。

# iphone - valueForKeyPath 的返回类型：？

> ID：10244210
> 
> 赞同：1
> 
> 时间：2012-04-20T10:10:52.030
> 
> 标签：iphone, objective-c, kvc

这可能是我的试点错误，但我有点困惑为什么它不返回一个 int （因为那是由键路径标识的属性的类型）。valueForKeyPath: 是否返回一个对象，谁能解释一下。

```
// Simple Object
@interface Hopper : NSObject
@property(nonatomic, assign) int mass;
@end

// Test
Hopper *hopper = [[Hopper alloc] init];
[hopper setMass:67];
NSLog(@"HOPPER: %d", [hopper valueForKeyPath:@"mass"]); 
```

.

```
WARNING: Conversion specifies type 'int' but the argument has type 'id' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:12:27.730

是的，它返回一个 objc 对象：

```
- (id)valueForKeyPath:(NSString *)keyPath; 
```

有关从非 objc 对象自动转换为 objc 对象（例如`NSNumber`和`NSValue`）的详细信息，请参见[简单属性的访问器搜索模式](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/SearchImplementation.html)。

因此，您将使用 objc 对象格式说明符`%@`：

```
NSLog(@"HOPPER: %@", [hopper valueForKeyPath:@"mass"]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:12:19.297

valueForKeyPath 返回一个对象。int 和 char 类型不是对象。通过 访问该属性。运营商或类似的。

```
NSLog(@"HOPPER: %d", [hopper mass]);

NSLog(@"HOPPER: %d", hopper.mass); 
```

*编辑：没有完全阅读示例代码，更新了答案*

# objective-c - 带有单独标签的 NSXMLElement 。IE。

> ID：10244212
> 
> 赞同：4
> 
> 时间：2012-04-20T10:10:53.127
> 
> 标签：objective-c, macos, nsxml, nsxmldocument, nsxmlelement

我正在尝试创建一个应包含单独标签的 XML 字符串（即没有单独结束标签的标签）我能够创建普通的 xml 标签，例如

```
<tagname attribute=attributevalue></tagname> 
```

使用代码

```
NSXMLElement *childElement=[[NSXMLElement alloc] initWithName:childName];
childElement.stringValue=childValue;
[childElement addAttribute:[NSXMLNode attributeWithName:attributeName stringValue:attributeValue]];
[self.currentNode addChild:[childElement copy]]; 
```

但我需要这样

```
<tagname attributename=attributevalue /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T07:27:57.650

在保存文件之前，在创建 NSData 时，添加此选项：**NSXMLNodeCompactEmptyElement**

像这样 ：

```
NSData *xmlData =
  [xmlDoc XMLDataWithOptions:NSXMLNodePrettyPrint | NSXMLNodeCompactEmptyElement]; 
```

然后序列化你的文件：

```
 [xmlData writeToURL:theFile atomically:YES] 
```

参考：NSXMLNode 类参考
Section Constants

> NSXMLNodeExpandEmptyElement
>   请求一个元素在空时应该展开；例如，<标志></标志>。这是默认设置。
>   适用于 Mac OS X v10.4 及更高版本。在 NSXMLNodeOptions.h 中声明。
> 
> NSXMLNodeCompactEmptyElement
>   请求一个元素在空时应该收缩；例如，<标志/>。
>   适用于 Mac OS X v10.4 及更高版本。在 NSXMLNodeOptions.h 中声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:16:07.567

```
<tagname attribute=attributevalue></tagname> 
```

和

```
<tagname attributename=attributevalue /> 
```

在 XML 中是完全等价的，只是格式化如何编写它们的问题。如果您没有特定的理由来创建“格式精美”的 XML 源代码，我不会为此烦恼。

此外，上面的代码不会创建任何表示：它将数据存储在内部结构中，而不是 XML 源代码的形式。*仅当您要将 XML 树结构导出*到 XML 源文件中时，您的问题才可能有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:08:49.030

MrTJ 所说的一切都是正确的，但序列化程序可能会因为您设置了节点的文本内容而感到困惑。它可能会看到文本内容节点（即使它有一个零长度的字符串）并创建开始和结束标签，因为它根本存在。

尝试类似：

```
if ([childValue length] > 0)
{
    childElement.stringValue=childValue;
} 
```

# asp.net - MVC Razor 进入 javascript 问题

> ID：10244217
> 
> 赞同：0
> 
> 时间：2012-04-20T10:11:14.087
> 
> 标签：asp.net, asp.net-mvc, razor

我试图将模型的属性值插入到 javascript 变量中，但它不起作用。

我尝试了以下方法：

```
 <script type="text/javascript">
    var sample = "@(Model.MyProperty)";
 </script>

 <script type="text/javascript">
    var sample = "@Model.MyProperty";
 </script>

 <script type="text/javascript">
    var sample = @Model.MyProperty;
 </script>

 <script type="text/javascript">
 @{
    var sample = Model.MyProperty;
  }
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:19:11.630

这个应该工作

```
<script type="text/javascript">
    var sample = "@Model.MyProperty";
</script> 
```

你得到什么错误？

# wcf - 客户端中的 WCF 路由备份列表

> ID：10244221
> 
> 赞同：0
> 
> 时间：2012-04-20T10:11:22.047
> 
> 标签：wcf, wcf-routing

是否可以在客户端中定义 WCF 备份列表，从而不需要单点联系路由服务？

我有两个服务实现相同的联系人（接口）。如果第一个服务不可用，我希望客户知道要使用备份服务。

这是可能的还是我必须创建一个客户端将与之通信的路由服务（单点联系）？

```
 <client>
        <endpoint address="http://localhost:49192/OrdinaryCustomerService.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICustomer"
            contract="OrdinaryCustomerServiceReference.ICustomer" name="OrdinaryCustomerService" />
        <endpoint address="http://localhost:49860/PremiumCustomerService.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICustomer"
            contract="PremiumCustomerServiceReference.ICustomer" name="PremiumCustomerService" />
    </client>
    <routing>
        <backupLists>
            <backupList name="CustomerBackupList">
                <add endpointName="PremiumCustomerService"/>
            </backupList>
        </backupLists>
    </routing> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:21:45.000

只是一个想法，但我有一个类似的问题，我一直在考虑在客户端（在我的情况下为 IIS 网络服务器）上创建一个路由服务，以便网络服务器上的所有请求都可以故障转移到不同的网络服务。我们还有多个用于故障转移的网络服务器，所以我会在每个服务器上放置一个路由器。

不理想，但迄今为止我发现的最佳解决方案。如果 IIS 框上的路由器出现故障，很有可能 IIS 也会出现故障，因此我们的系统无论如何都会切换到其他网络服务器。

我们也有适当的 wfc 路由器，为我们的中间 teir 提供备份，但在手动更改 web 服务来处理这个之前。

# android - android.database.CursorIndexOutOfBoundsException: 请求索引 0，大小为 0

> ID：10244222
> 
> 赞同：55
> 
> 时间：2012-04-20T10:11:27.393
> 
> 标签：android, database-cursor

我正在使用自定义适配器扩展光标适配器在列表视图中显示数据，以显示特定的电话号码我已将 id 传递给数据库类中的方法，但它正在显示

```
errorandroid.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0 
```

在将调试器放置在方法中时，它不会在行之后

```
num = cursor.getString(cursor.getColumnIndex("ContactNumber")); 
```

任何人都可以帮我解决它。这是代码：

```
public String getNumberFromId(int id) 
{
    String num;
    db= this.getReadableDatabase();
    Cursor cursor = db.query(scheduletable, new String[] { "ContactNumber" },"_id="+id, null, null, null, null);
    cursor.moveToFirst();
    num = cursor.getString(cursor.getColumnIndex("ContactNumber")); 
    cursor.close();
    db.close();
    return num;
} 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-04-20T10:17:45.353

每当你处理游标时，总是检查 null 并且检查`moveToFirst()`没有失败。

```
if( cursor != null && cursor.moveToFirst() ){
    num = cursor.getString(cursor.getColumnIndex("ContactNumber"));
    cursor.close(); 
} 
```

适当放置日志以查看它是返回`null`还是空游标。根据该检查您的查询。

**更新**将两个检查放在一个声明中，正如 Jon 在下面的评论中提到的那样。

**更新 2**将`close()`调用置于有效游标范围内。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-20T10:13:44.083

试试这个..这将避免当光标为空时抛出异常..

```
if(cursor != null && cursor.moveToFirst()){
    num = cursor.getString(cursor.getColumnIndex("ContactNumber")); 
    cursor.close();
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-20T10:32:43.527

取数据前先检查这个Condition

```
if(cursor!=null && cursor.getCount()>0){
  cursor.moveToFirst();
  num = cursor.getString(cursor.getColumnIndex("ContactNumber")); 
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-20T10:13:09.970

`moveToFirst()`在尝试从光标读取任何内容之前，请检查 from 的返回值。看起来好像没有返回任何结果。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-20T10:17:57.277

`Cursor`查询s的保存模式是

```
// just one
Cursor cursor = db.query(...);
if (cursor != null) {
    if (cursor.moveToFirst()) {
        value = cursor.getSomething();
    }
    cursor.close();
}

// multiple columns
Cursor cursor = db.query(...);
if (cursor != null) {
    while (cursor.moveToNext()) {
        values.add(cursor.getSomething());
    }
    cursor.close();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-18T20:58:35.257

如果人们还在寻找：

而不是搜索`"ContactNumber"`尝试搜索`Phone.NUMBER`. 本教程包含更多详细信息的代码：http: [//developer.android.com/training/basics/intents/result.html](http://developer.android.com/training/basics/intents/result.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-21T07:16:55.407

尝试卸载应用程序，然后再次对其进行测试...实际上，当应用程序首次安装时，sqlite db 仅创建一次...因此，如果您认为您的逻辑是最新的，那么重新安装应用程序将为您解决问题。！！！！

# sql - SQL 查询表达式的优先顺序

> ID：10244229
> 
> 赞同：1
> 
> 时间：2012-04-20T10:11:48.197
> 
> 标签：sql, sql-server, database

我正在尝试弄清楚 SQL 查询是如何运行的，并且遇到了一些绊脚石。

如果使用类似于以下的 where 子句：

A 或 B 和 C

这可能意味着以下任何一种

（A 或 B）和 C

***或者***

一个或（B 和 C）

在大多数情况下，结果是相同的，但如果要查询的集合仅包含 {A}，则第一个变体将返回空结果集，而第二个变体将返回 {A}。SQL 实际上返回 1 结果。

有谁知道（或有链接）任何可以帮助我了解查询是如何构建的见解？

番茄酱

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:59:12.733

`AND`在优先级高于的知识（来自文档）中`OR`，您应该旨在以`WHERE`合取范式（“a seires of `AND`clauses”）为从句编写谓词。

如果意图是

```
( A OR B ) AND C 
```

然后这样写，一切都很好。

但是，如果意图是

```
A OR ( B AND C ) 
```

那么我建议你应用导致合取范式的[分配重写法则，即](http://en.wikipedia.org/wiki/Rewriting)

```
( P AND Q ) OR R   <=>  ( P OR R ) AND ( Q OR R ) 
```

在你的情况下：

```
A OR ( B AND C ) <=>  ( A OR B ) AND ( A OR C ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:16:59.703

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms190276.aspx)的顺序如下：

> 1.  ~（按位非）
>     
>     
> 2.  (*) (乘), / (除), % (模)
>     
>     
> 3.  (+) (正)​​, - (负), + (加), (+ 连接), - (减), & (按位与), ^ (按位异或), | （按位或）
>     
>     
> 4.  =、>、<、>=、<=、<>、!=、!>、!<（比较运算符）
>     
>     
> 5.  不是
>     
>     
> 6.  和
>     
>     
> 7.  所有，任何，之间，在，喜欢，或，一些
>     
>     
> 8.  =（作业）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:17:21.403

`AND`并且`OR`有不同的先例。

请参阅[优先级](http://msdn.microsoft.com/en-us/library/ms190276.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:17:32.770

对于 SQL-Server（这是您的标签），这里是优先级[http://msdn.microsoft.com/en-us/library/ms190276.aspx](http://msdn.microsoft.com/en-us/library/ms190276.aspx)但是.. 如果您担心给出的确切结果集，您确实应该开始使用 () 子集。

# android - 安卓平台专家系统

> ID：10244230
> 
> 赞同：2
> 
> 时间：2012-04-20T10:11:49.067
> 
> 标签：android, expert-system

我想知道为 android 开发具有相当大 KB 的专家系统的最佳解决方案是什么，我应该简单地使用数百个 if-else（假设用户应该在 YES 和 NO 之间选择）还是有任何引擎它生成的 KB 可以在 android 上使用。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:38:35.727

你可以为 Android 编写原生 C/C++ 代码吗？如果是，那么我建议您寻找 CLIPS。有一个免费的 .dll 可用[http://clipsinterface.sourceforge.net/](http://clipsinterface.sourceforge.net/)。如果需要，您可以制作某种本体`Protege 3`，然后将其导出到 CLIPS。唯一不好的想法是这个东西在十年前而且非常过时（至少网站已经过时并且有很多断开的链接）。所以..如果你想尝试 - 继续，如果不是 - 我不能给你任何保证这种方法。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T10:54:57.070

使用experience2go的[e2gDroid](http://www.expertise2go.com/) [Lite](https://play.google.com/store/apps/details?id=com.expertise2go.e2gdroidlite&hl=en)，它是 e2gRuleEngine Java 小程序的 Android 端口：一个基于规则的专家系统“外壳”，用于世界各地的决策支持和专家系统课程超过 10 年。e2gDroid 以基于规则的专家系统的形式在至少实施 2.2 版“Froyo”操作系统的 Android 设备上提供移动交互式决策工具。

[您还可以开发 Java 小程序，您可以使用knowledge2go](http://www.expertise2go.com/)将其嵌入到任何网站中。

您可以从 GooglePlay 免费下载它，该教程可在公司网站上找到。

# django - 迁移到亚马逊存储应考虑哪些因素？

> ID：10244231
> 
> 赞同：0
> 
> 时间：2012-04-20T10:11:50.067
> 
> 标签：django, amazon-s3

我们有一个在 Webfaction 上运行的 Django 应用程序。在这个应用程序中，用户上传了很多图像。所以，到目前为止，我们还没有遇到任何问题。很快，我们预计会有大约 10,000 个用户。但是，我想知道，我们是否应该决定迁移到像 S3 这样的云解决方案？此举将如何帮助我们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:08:43.497

迁移到 S3 等远程存储的一些优势包括：

1.  中央存储位置：当您启动新的网络服务器来处理额外的负载时，您无需担心管理共享的 NFS 挂载。
2.  卸载请求：您的服务器不会承担为媒体提供服务的负载。

一些缺点是：

1.  额外费用：您为存储和带宽付费。
2.  更多活动部分：文件系统相当容易理解、管理和测试。远程 API 并不完美，有些问题超出了您的控制范围。

# android - 单击列表视图项时如何更改按钮背景

> ID：10244237
> 
> 赞同：1
> 
> 时间：2012-04-20T10:12:12.687
> 
> 标签：android, listview, layout, button, inflate

我有一个列表视图，并使用包含 1 个 ImageView、2 个 TextView 和 1 个按钮的自定义布局对其进行了扩展。我想在单击 listview item 时更改按钮背景，但我无法执行它。有人能帮助我吗？非常感谢你。

![在此处输入图像描述](../Images/d8e7c8fa6570867161b5454e62e35773.png)

row_segnalibro.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/LinearLayout01"
     android:orientation="horizontal"
     android:layout_width="match_parent" android:layout_height="50dp" >

<ImageView android:id="@+id/ImageView01" android:src="@drawable/star" 
android:layout_height="40dp"
    android:layout_width="40dp"
    android:enabled="false"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:clickable="false"
    android:paddingLeft="10dp"  />

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout02"
    android:orientation="vertical"
    android:layout_width="220dp" android:layout_height="match_parent">

<TextView 
    android:id="@+id/tvRow1"
    android:layout_width="220dp"
    android:layout_height="wrap_content"   
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:clickable="false"
    android:paddingLeft="10dp"    
    android:paddingTop="5dp"
    android:textColor="#0967AD"
    android:textStyle="bold"
    />
<TextView 
    android:id="@+id/tvRow2"
    android:layout_below="@id/tvRow1"
    android:layout_width="220dp"
    android:layout_height="wrap_content"   
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:clickable="false"
    android:paddingLeft="10dp"    
    android:textColor="#0967AD"
    android:textStyle="bold"
 />
</RelativeLayout>
<Button 
    android:id="@+id/butt_segnalib"
    android:background="@drawable/freccia_o"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:layout_width="20dp"
    android:layout_height="20dp"
    android:layout_gravity="center" /> 
```

Segnalibro.java

```
 public class Segnalibro extends ListActivity{
            super.onCreate(savedInstanceState);
        setContentView(R.layout.segnalibro);

         lv = (ListView) getListView();         
 .....some code
      MySimpleCursorAdap myadap = new MySimpleCursorAdap(getApplicationContext(),R.layout.rowlayout_segnalibro,curr,campi, to);
         lv.setAdapter(myadap);
         lv.setClickable(true); 

          lv.setOnItemClickListener( new  OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View v,int position, long arg3) {
                    Log.i("","I have clicked on item "+position);   

            }        
        }); 
```

MySimpleCursorAdap.java

```
 public class MySimpleCursorAdap extends SimpleCursorAdapter{

        public MySimpleCursorAdap(Context context, int layout, Cursor c, String[] from, int[] to) {
            super(context, layout, c, from, to);
        this.mLayout = layout;
        this.curr = c;
                 this.cont = context;
          }

 public void bindView(View view, Context context, final Cursor cursor) {

   ....some code

 /*       Button butt = (Button) view.findViewById(R.id.butt_segnalib); 
          butt.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
     .....code to change the background
     }
        }); */
  } 
```

在 MySimpleCursorAdap 中，我可以使用 findViewById 方法获取 Button，我如何在 Segnalibro 类中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:21:34.657

好的..所以基本上你需要一个状态列表来实现它..看到[这个](https://stackoverflow.com/questions/1521640/standard-android-button-with-a-different-color)知道如何创建它..然后将它设置为你的按钮的背景..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:20:13.107

当您`ListActivity`用作基类时，您不必`onItemClickListener`自己创建，它已经存在。只需覆盖`protected void onListItemClick(ListView l, View v, int position, long id)`. 在里面你将能够通过它的 id 获取 Button。

[http://developer.android.com/reference/android/app/ListActivity.html](http://developer.android.com/reference/android/app/ListActivity.html)

```
protected void onListItemClick(ListView l, View v, int position, long id)
{
    Button bt = (Button) v.findViewById(R.id.button);

    //do something fancy with the button
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T10:31:15.633

尝试在 bindView 方法中为列表项视图添加一个 ClickListener：

```
public void bindView(View view, Context context, final Cursor cursor) {

   //some code

   view.setOnClickListener(new OnClickListener() {  
    @Override
    public void onClick(View v) {
        final ImageButton button = (ImageButton)v.findViewById(R.id.list_item_button);
        button.setBackgroundColor(...)
        }
   });
) 
```

# c# - MVC 3 - 将模型从不同的控制器传递给控制器

> ID：10244238
> 
> 赞同：1
> 
> 时间：2012-04-20T10:12:18.013
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

目前，这就是我的`HomeController`：

```
[HttpPost]
public ActionResult Index(HomeFormViewModel model)
{
    ...
    ...

    TempData["Suppliers"] = service.Suppliers(model.CategoryId, model.LocationId);

    return View("Suppliers");
} 
```

这就是我的`SupplierController`：

```
public ViewResult Index()
{
    SupplierFormViewModel model = new SupplierFormViewModel();
    model.Suppliers = TempData["Suppliers"] as IEnumerable<Supplier>;

    return View(model);
} 
```

这是我的`Supplier` `Index.cshtml`：

`@model MyProject.Web.FormViewModels.SupplierFormViewModel`

```
@foreach (var item in Model.Suppliers) {
  ...
  ...
} 
```

`TempData`是否有不同的方法将对象传递给不同的控制器及其视图，而不是使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T10:27:35.160

为什么不直接将这两个 ID 作为参数传入，然后从另一个控制器调用服务类？就像是：

有`SupplierController`这样的方法：

```
public ViewResult Index(int categoryId, int locationId)
{
    SupplierFormViewModel model = new SupplierFormViewModel();
    model.Suppliers = service.Suppliers(categoryId, locationId);

    return View(model);
} 
```

然后，我假设您`Supplier`通过某种链接从视图中调用您的视图？你可以做：

```
@foreach (var item in Model.Suppliers) 
{
    @Html.ActionLink(item.SupplierName, "Index", "Supplier", new { categoryId = item.CategoryId, locationId = item.LocationId})
    //The above assumes item has a SupplierName of course, replace with the
    //text you want to display in the link
} 
```

# linux - 如何为 dig 安装补丁

> ID：10244250
> 
> 赞同：0
> 
> 时间：2012-04-20T10:12:40.247
> 
> 标签：linux, diff, patch, dig

我有一个用于 dig 的 .diff edns-client-ip 补丁文件，但我不知道如何安装它。有小费吗？它的补丁可在此处获得 - [http://wilmer.gaa.st/edns-client-subnet/](http://wilmer.gaa.st/edns-client-subnet/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:15:13.463

试试`patch`bind-dig-edns的源码目录

```
$ cd /path/to/bind-xxx-dig-edns-client/src
$ patch -p1 < bind-xxx-dig-edns-client-subnet.diff 
```

# hibernate - Hibernate：在级联中更新具有唯一约束的元素

> ID：10244252
> 
> 赞同：0
> 
> 时间：2012-04-20T10:12:48.533
> 
> 标签：hibernate

在我的应用程序中，我有一个包含许多单元格的网格。这些单元格可以包含许多参数。

```
@Entity
@Table(name = "template")
public class Grid {

    private Set<Cells> cells = new HashSet<Cells>(0);

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "grid", orphanRemoval=true)
    @Cascade(value = {CascadeType.SAVE_UPDATE, CascadeType.DELETE})
    public Set<Cell> getCells() {
        return this.cells;
    }

}

@Entity
@Table(name = "cell", uniqueConstraints = { @UniqueConstraint(columnNames={"idcell", "row", "column" })} )
public class Cell {

    private Grid grid;
    private int row
    private int column;
    private Set<Parameter> parameters = new HashSet<Parameters>(0);

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "cellidgrid", nullable = false)
    @ForeignKey(name = "coref_cell_grid")
    @OnDelete(action = OnDeleteAction.CASCADE)
    public Grid getGrid() {
        return this.grid;
    }

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "cell", orphanRemoval=true)
    @Cascade(value = {CascadeType.SAVE_UPDATE, CascadeType.DELETE})
    public Set<Parameter> getParameters() {
        return this.parameters;
    }

}

@Entity
@Table(name = "parameter")
public class Parameter {

    private Cell cell;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "parametercell")
    @OnDelete(action = OnDeleteAction.CASCADE)
    @ForeignKey(name = "coref_parameter_cell")
    public Cell getCell() {
        return this.cell;
    }
} 
```

数据库中有一个独特的约束，它为 Grid 的每一行和每一列只限制一个 Cell。

如果我反转两个 Cell 的位置，则 Grid 的更新会因为违反唯一约束而失败。

示例：将位置为 1、2（第 1 行、第 2 列）的单元格 A 与位置为 3、4 的单元格 B 反转。

我尝试了很多东西，但没有任何效果。主要解决方案是：

*   从网格中删除这两个元素，刷新并再次添加它们或将它们的克隆添加到网格中。

请注意，问题也可能来自单元格的参数。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:45:04.443

当您提到“将它们的克隆添加到网格”时，您还没有发布您如何更新单元格以及您正在做什么代码明智。

根据更新时的描述，我假设您只是在考虑设置实例的属性行和列并更新 Grid。当 Grid 级联操作时，它将尝试将第一个更新条目更新 3,4，但该条目已经存在，因此出现异常。

当您说您同时删除并刷新时，这意味着您正在从数据库中删除条目并添加新条目，并且这两个条目都是新条目，因此也不例外。

这就是我能想到的必须发生的事情。希望有帮助！！！！

# c# - MVC3 - 回发后保留'returnUrl'？

> ID：10244259
> 
> 赞同：1
> 
> 时间：2012-04-20T10:13:24.407
> 
> 标签：c#, asp.net, asp.net-mvc-3

我正在为我的网站编写登录功能。当用户请求受我的`[CustomAuthorize]`属性限制的视图时，用户会被正确地重定向到`/Login/Index`附加了查询字符串 ( `?ReturnUrl=%2fRestricted%2fView`) 的视图。

**但问题来了……**

当用户尝试登录时，出现验证错误。发布请求导致回发（duh），并且附加的查询字符串从 Url 中消失。

*   回发后如何保留查询字符串？

**CustomAuthorize.cs：**

```
public class CustomAuthorizeAttribute : AuthorizeAttribute
{
        protected override bool AuthorizeCore(HttpContextBase httpContext)
        {
            if (httpContext.User.Identity.IsAuthenticated)
            {
                var customIdentity = (CustomIdentity)httpContext.User.Identity;
                var customPrincipal = new CustomPrincipal(customIdentity);

                if (customIdentity.IsAdmin)
                {
                    httpContext.User = customPrincipal;
                    Thread.CurrentPrincipal = customPrincipal;
                }
            }
            return base.AuthorizeCore(httpContext);
        }

        protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
        {
            var urlRequested = filterContext.HttpContext.Request.Path;
            //urlRequested contains "/Restricted/View"
            //Do something with 'urlRequested' here, or?
            base.HandleUnauthorizedRequest(filterContext);
        }
} 
```

**登录/索引视图：**

```
<body>
        @using (Html.BeginForm("Index", "Login"))
        {
            <div>
                @Html.LabelFor(model => model.UserName)
            </div>
            <div>
                @Html.EditorFor(model => model.UserName)
                @Html.ValidationMessageFor(model => model.UserName)
            </div>

            <div>
                @Html.LabelFor(model => model.Password)
            </div>
            <div>
                @Html.EditorFor(model => model.Password)
                @Html.ValidationMessageFor(model => model.Password)
            </div>

            <div>
                @Html.LabelFor(model => model.RememberMe)
            </div>
            <div>
                @Html.EditorFor(model => model.RememberMe)
                @Html.ValidationMessageFor(model => model.RememberMe)
            </div>

            <p>
                <input type="submit" value="Login!" />
            </p>
            @Html.ValidationSummary(true)
        }
</body> 
```

**登录/索引控制器操作：**

```
[HttpPost]
public ActionResult Index(LoginModelBinding login, string returnUrl)
{
            if (ModelState.IsValid)
            {
                if (Service.CheckUser(login.UserName, login.Password))
                {
                    String loginError;
                    CustomAuthorization.Login(login.UserName, login.Password, out loginError);

                    if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/") && !returnUrl.StartsWith("/\\"))
                    {
                        return Redirect(returnUrl);
                    }
                    return RedirectToAction("Index", "MitTeam");

                }
                ModelState.AddModelError("", "The entered user name or password is incorrect");
            }
            return View(login);
} 
```

**解决方案：** 根据 Naveen 的回答，我修改了如下代码：

```
public static void SaveReturnUrl(this Controller controller, string returnUrl, bool showAfterRedirect = true)
{
            if (showAfterRedirect)
            {
                controller.TempData["returnUrl"] = returnUrl;
            }
            else
            {
                controller.ViewData["returnUrl"] = returnUrl;
            }
}

public static string RetrieveReturnUrl(this Controller controller)
{
            var message = controller.ViewData.ContainsKey("returnUrl") ? controller.ViewData["returnUrl"] : controller.TempData.ContainsKey("returnUrl") ? controller.TempData["returnUrl"] : null;
            return message as string;
} 
```

使用这两种扩展方法，我可以在我的登录控制器方法/操作中保存和检索 returnurl。

**登录发帖方式：**

```
var previousReturnUrl = this.RetrieveReturnUrl();
if(!ModelState.IsValid)
{
    if(string.IsNullOrEmpty(previousReturnUrl))
    {
        this.SaveReturnUrl(returnUrl);
    }
    return View(login);
} 
```

如果模型状态有效，我只需调用`this.RetrieveReturnUrl`并解码它，这样我就可以在成功登录的情况下重定向用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:54:21.317

您可以使用[Martijn Boland](http://blogs.taiga.nl/martijn/)开发的代码模块-[让您的用户了解情况](http://blogs.taiga.nl/martijn/2011/05/03/keep-your-users-informed-with-asp-net-mvc/)。它可用于存储任何对象并在重定向后将其取回。它专门用于在 POST-REDIRECT 操作之后显示操作的消息或状态。这也适用于 AJAX 类型的请求。

在进行重定向后，您可以将其用于存储返回 URL 以及消息（以防身份验证失败）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:32:22.950

您可以将 returnURL 存储在视图中的隐藏字段中。只要您在发布回服务器的表单中包含该隐藏字段，您的 POST-Action 就可以根据操作的结果访问和使用它（登录成功 -> 重定向到 url，登录不成功 -> 返回再次使用隐藏字段登录视图）。

# clojure - 创建基于另一个序列返回新序列的 Clojure 函数的正确方法是什么？

> ID：10244262
> 
> 赞同：2
> 
> 时间：2012-04-20T10:13:30.983
> 
> 标签：clojure

为什么必须在 get-word-ids 中使用“first”，这样做的正确方法是什么？

```
(defn parts-of-speech []
  (lazy-seq (. POS values)))

(defn index-words [pos]
  (iterator-seq (. dict getIndexWordIterator pos)))

(defn word-ids [word]
  (lazy-seq (. word getWordIDs)))

(defn get-word [word-id]
  (. dict getWord word-id))

(defn get-index-words []
  (lazy-seq (map index-words (parts-of-speech))))

(defn get-word-ids []
  (lazy-seq (map word-ids (first (get-index-words)))))

;; this works, but why do you have to use "first" in get-word-ids?
(doseq [word-id (get-word-ids)]
  (println word-id)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T18:08:21.017

简短的回答：删除所有对`lazy-seq`.

至于您最初的问题，即使它不是惰性序列的惯用用法，也值得解释。您必须首先使用，因为 get-word-ids 函数返回一个带有一个条目的惰性序列。该条目是您正在寻找的惰性序列。

看起来像这样

```
( (word1 word2 word3) ) 
```

所以首先返回你想要的序列：

```
(word1 word2 word3) 
```

* * *

您将使用的唯一时间很可能是`lazy-seq`这种模式：

```
(lazy-seq (cons :something (function-call :produces :the :next :element))) 
```

我从未见过任何其他模式中使用过惰性序列。的目的`lazy-seq`是生成新的原始数据序列。如果存在生成数据的代码，那么使用类似的东西几乎总是更好`iterate` `map`，或者`for`生成你的惰性序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:21:36.637

这似乎是错误的：

```
(defn get-index-words []
  (lazy-seq (map index-words (parts-of-speech)))) 
```

(index-words pos) 返回一个序列。这就是为什么你需要一个（第一个）get-word-ids。

map 也已经是惰性的，因此无需将 (map ...) 包装在惰性序列中，如果 map*不是*惰性的，在 map 周围使用惰性序列几乎毫无意义。如果您在 clojure 中阅读更多（惰性）序列，它可能会很有用。

# wcf - MSMQ、WCF 和健壮性

> ID：10244263
> 
> 赞同：2
> 
> 时间：2012-04-20T10:13:37.663
> 
> 标签：wcf, design-patterns, msmq-wcf

不是 MSMQ 或 WCF 方面的专家，我已经阅读了一些关于它的内容，它听起来和看起来都很棒。我正在尝试开发一些东西，但首先是一些理论，它需要坚固耐用。

我猜 MSMQ 将托管在单独的服务器上。

将有 2 个 WCF 服务。一个用于传入消息，另一个用于传出消息（接收消息，进行一些内部处理/验证，然后将其放在传出消息队列中，或者可能发送电子邮件/短信/其他）

我理解通过正确的配置，我们可以让系统成为事务性的（永远不会丢失任何消息）并且可以只发送一次，因此没有重复消息的机会。

应用程序/服务将是多线程的以处理消息，其中将有成百上千的消息。

但是在处理消息或通过服务生命周期期间，如果服务器崩溃怎么办？如果服务器重启怎么办？如果服务出于某种原因抛出异常怎么办？怎么可能不丢失该消息，但如何将其放回队列等待再次处理？另外，如何确保该服务是健壮的，以使其再次产生自己？

我很感激这里的任何建议和细节。有很多东西可以吸收，WCF/MSMQ 提供了很多选项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T11:05:26.330

你的假设：

> 我猜 MSMQ 将托管在单独的服务器上。

是不正确的。MSMQ 安装在所有想要参与消息队列的机器上。

> 将有 2 个 WCF 服务。一个用于传入消息，另一个用于传出消息

在最典型的配置中，目标队列对于侦听服务是本地的。

例如，您的 ServiceA 将有一个从中读取的本地队列。ServiceB 也有一个本地队列，它可以从中读取。如果 ServiceA 想要调用 ServiceB，它会将消息放入 ServiceB 的本地队列中。

> 我理解通过正确的配置，我们可以拥有系统以便它可以是事务性的（永远不会丢失任何消息）

这是对的。这是因为 MSMQ 使用称为存储转发的消息传递模式。请参阅[此处](https://stackoverflow.com/a/9800758/569662)以获取解释。

本质上，假设没有消息丢失是安全的，因为从一台机器到另一台机器的消息传输实际上是在三个不同的事务下进行的。

1.  第一个事务：ServiceA 写入它自己的临时本地队列。如果失败，事务将回滚，ServiceA 可以处理异常。
2.  第二个事务：ServiceA 机器上的队列管理器将消息传输到 ServiceB 机器上的队列管理器。如果失败，则消息保留在临时队列中。
3.  第三个事务：ServiceB 从本地队列中读取消息。如果 ServiceB 消息处理方法抛出异常，则事务将消息回滚到本地队列。

> 应用程序/服务将是多线程的以处理消息

这很好，除非您需要在消息处理链中保留订单。如果您需要有序处理，那么如果不实现重新排序器以重新应用订单，您就不能拥有多个线程。

> 我认为 MSMQ 可以单独托管并让 x 服务器共享该队列？

所有想要参与消息交换的服务器都安装了 MSMQ。然后，每个服务器都可以写入任何其他服务器上的任何队列。

> 我之所以这么想，是因为如果服务器宕机了怎么办？那么消息将如何发送/接收到 MSMQ

如果队列是事务性的，那么这意味着它们上的消息将持久保存到磁盘。如果服务器出现故障，那么当它恢复时，消息仍然存在。当服务器关闭时，它显然无法参与消息交换。但是，消息仍然可以“发送”到该服务器——它们只是对发送者保持本地（在一个临时队列中），直到目标服务器重新联机。

> 因此，通过拥有一台中央 MSMQ 服务器（并对其进行镜像/故障转移），就可以保证正常运行时间

使用消息队列的全部意义在于它是一种容错传输，因此您不需要保证正常运行时间。如果您有 100% 的可用性，那么几乎没有理由使用消息队列。

> WCF 将如何收到传入消息的通知？

每个服务都将侦听自己的本地队列。当消息到达时，WCF 运行时会调用处理方法并处理消息。

> 发送消息失败如何通知服务

如果 ServiceA 未能向 ServiceB 发送消息，则永远不会通知 ServiceB 该失败。也不应该。ServiceA 将处理传输失败，而不是 ServiceB。在这种情况下，您的期望会在服务之间产生硬耦合，消息队列应该消除这种耦合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:42:35.253

即使临时关闭服务或重新启动计算机，MSMQ 也可以存储消息。
WCF 的主要目标是将消息从源传输到目标。不管是什么交通工具。在您的情况下，MSMQ 是 WCF 的传输，并且客户端和服务同时在线/可用并不明显。但是，当收到消息时，您有责任正确处理它，无论使用何种传输方式发送消息。

# php - 放大和缩小时的不同图像

> ID：10244269
> 
> 赞同：0
> 
> 时间：2012-04-20T10:14:06.653
> 
> 标签：php, jquery, frameworks, zooming

我想要一个缩放功能，当我双击图像时，它应该进入图像内部

例如：我有一张自行车的图像。如果我双击轮胎，它应该显示轮胎。如果我双击轮胎的内胎，它应该显示内胎。

我基本上是用它在我的网站上显示零件及其价格。目录之类的东西。

这只能在Flash中实现吗？或者有什么框架可以用来做这个吗？

我们可以使用 css3 做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:34:26.800

你可以这样做`jquery`

查看 28 个创建令人惊叹的图像效果的 jQuery Zoom 插件

[http://www.tripwiremagazine.com/2011/10/jquery-zoom.html](http://www.tripwiremagazine.com/2011/10/jquery-zoom.html)

[http://www.tripwiremagazine.com/2011/10/jquery-image-zoom.html](http://www.tripwiremagazine.com/2011/10/jquery-image-zoom.html)

你可以选择你喜欢的

# java - 将 Apache Camel 与基于 CXF 的 RESTful Web 服务集成：需要建议

> ID：10244270
> 
> 赞同：0
> 
> 时间：2012-04-20T10:14:11.623
> 
> 标签：java, spring, cxf, apache-camel, cxfrs

我正在尝试将我的 CXF RESTful Web 服务与 Apache Camel 集成。要求是当有人点击我的网络服务时，我获取请求参数并连接到谷歌或某些服务提供商以使用请求参数搜索结果。假设我的网络服务是 foo:bar 并且我想在这个 foo:bar 被命中后连接到谷歌。这意味着我的骆驼路线将是这样的：

```
 <camelContext>
            <route>
             <to uri:"cxf://bean://foo:bar/>
             <from uri="http://www.google.com"/>
            </route>
           </camelContext>

    is this understanding correct.. 
    i am pasting a section of my config xml for review ..

<jaxrs:server id="restContainer" address="/" staticSubresourceResolution="true">
<jaxrs:serviceBeans>
<ref bean="FooBar" />
</jaxrs:serviceBeans>
<jaxrs:providers>
<bean class="org.apache.cxf.jaxrs.provider.JSONProvider">
<property name="dropRootElement" value="true" />
<property name="supportUnwrapped" value="true" />
</jaxrs:providers>
<camelcxf:rsServer id="rsServer"
// this is the rest uri which is mapped to my resource class address="http://localhost:port/MyApplication/rest/foobar serviceClass="com.camel.example.FooBar" />
<camel:camelContext id="camelContext-1">
<camel:route>
<camel:from uri="cxfrs:bean:rsServer" />
<camel:to uri="http://www.google.com" />
</camel:route>
</camel:camelContext> 
```

除此之外，当我运行我的 web 服务时，我得到以下异常： java.lang.ClassNotFoundException: org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java 的 org.eclipse.jetty.util.component.Container$Listener :1666) at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1511) at java.lang.ClassLoader.loadClassInternal(Unknown Source) ... 58 更多 我不明白为什么我得到这个，因为我是使用tomcat进行部署。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:20:38.083

解决了这个问题，在我的构建路径中添加了所有的码头罐子。码头版本 8.0

# jquery - jquery动态id和rails 3

> ID：10244274
> 
> 赞同：0
> 
> 时间：2012-04-20T10:14:25.533
> 
> 标签：jquery, ruby-on-rails-3

单击具有动态 id 的按钮后，我想将其放入`dst.district`具有 id 的文本框中`district`。我已经编写了以下代码，但目前无法正常工作。

```
<input name="" type="text" class="dist1" id="district">
   <% @districts.each do |dst|%>                         
       <div id="dist_<%= dst.id%>" class="districtname"><%= dst.district %></div>                        
       <input id="select_<%= dst.id%>" type="button" value="Select" class="gbutton" />
   <script type="text/javascript">
    $("#select_<%= dst.id %>").click({
                $("#district").val("<%= dst.district %>");
    });
   </script>                        
   <%end%> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:43:25.000

只需按照以下代码：

```
<input name="" type="text" class="dist1" id="district">
<% @districts.each do |dst|%>
  <li>                    
   <div class="districtname"><%= dst.district %></div>                        
       <input name="select" id="select_<%= dst.id%>" type="button" value="Select" class="gbutton" />
  </li>                    
<%end%> 
```

和

```
$(".gbutton").click(function(){
        var getID = this.id.split("_");
        console.log(getID[1]);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:24:22.483

你可以使用类而不是id吗？它可能会起作用。试试看，让我知道。

```
<input name="select" id="select_<%= dst.id%>" type="button" value="Select" class="gbutton" />
<script type="text/javascript">
            $(".gbutton").click(function(){    
                  $("#district").val('the value you want into the textbox');                                      
            });
          </script> 
```

# python - 如何使用 AUIManager 让关闭事件在 wxPython 中工作？

> ID：10244275
> 
> 赞同：0
> 
> 时间：2012-04-20T10:14:25.680
> 
> 标签：python, events, wxpython

我如何将另一个事件添加到我们的 GUI 管理器类（下）中创建的窗格中。我想检测 x 按钮何时关闭窗格。我已经尝试对 wx.EVT_CLOSE 使用与 wx.EVT_MENU 相同的格式，但它没有用。

```
 def popup_panel(self, p):
    """
    Add a panel object to the AUI manager

    :param p: panel object to add to the AUI manager

    :return: ID of the event associated with the new panel [int]

    """
    ID = wx.NewId()
    self.panels[str(ID)] = p
    self.graph_num += 1
    if p.window_caption.split()[0] in NOT_SO_GRAPH_LIST:
        windowcaption = p.window_caption
    else:
        windowcaption = 'Graph'#p.window_caption
    windowname = p.window_name

    # Append nummber
    captions = self._get_plotpanel_captions()
    while (1):
        caption = windowcaption + '%s'% str(self.graph_num)
        if caption not in captions:
            break
        self.graph_num += 1
        # protection from forever-loop: max num = 1000
        if self.graph_num > 1000:
            break
    if p.window_caption.split()[0] not in NOT_SO_GRAPH_LIST:
        p.window_caption = caption 
    #p.window_caption = windowcaption+ str(self.graph_num)
    p.window_name = windowname + str(self.graph_num)

    style1 = self.__gui_style & GUIFRAME.FIXED_PANEL
    style2 = self.__gui_style & GUIFRAME.FLOATING_PANEL
    if style1 == GUIFRAME.FIXED_PANEL:
        self._mgr.AddPane(p, wx.aui.AuiPaneInfo().
                          Name(p.window_name).
                          Caption(p.window_caption).
                          Position(10).
                          Floatable().
                          Right().
                          Dock().
                          MinimizeButton().
                          Resizable(True).
                          # Use a large best size to make sure the AUI 
                          # manager takes all the available space
                          BestSize(wx.Size(PLOPANEL_WIDTH, 
                                           PLOPANEL_HEIGTH)))

        self._popup_fixed_panel(p)

    elif style2 == GUIFRAME.FLOATING_PANEL:
        self._mgr.AddPane(p, wx.aui.AuiPaneInfo().
                          Name(p.window_name).Caption(p.window_caption).
                          MinimizeButton().
                          Resizable(True).
                          # Use a large best size to make sure the AUI
                          #  manager takes all the available space
                          BestSize(wx.Size(PLOPANEL_WIDTH, 
                                           PLOPANEL_HEIGTH)))

        self._popup_floating_panel(p)

    # Register for showing/hiding the panel
    wx.EVT_MENU(self, ID, self.on_view)
    if p not in self.plot_panels.values() and p.group_id != None:
        self.plot_panels[ID] = p
        if len(self.plot_panels) == 1:
            self.panel_on_focus = p
            self.set_panel_on_focus(None)
        if self._data_panel is not None and \
            self._plotting_plugin is not None:
            ind = self._data_panel.cb_plotpanel.FindString('None')
            if ind != wx.NOT_FOUND:
                self._data_panel.cb_plotpanel.Delete(ind)
            if caption not in self._data_panel.cb_plotpanel.GetItems():
                self._data_panel.cb_plotpanel.Append(str(caption), p)
    return ID 
```

我希望能够在绘图子类中获取事件。

```
def create_panel_helper(self, new_panel, data, group_id, title=None):
    """
    """
    ## Set group ID if available
    ## Assign data properties to the new create panel
    new_panel.set_manager(self)
    new_panel.group_id = group_id
    if group_id not in data.list_group_id:
        data.list_group_id.append(group_id)
    if title is None:
        title = data.title
    new_panel.window_caption = title
    new_panel.window_name = data.title
    event_id = self.parent.popup_panel(new_panel)
    #remove the default item in the menu
    if len(self.plot_panels) == 0:
        pos = self.menu.FindItem(DEFAULT_MENU_ITEM_LABEL)
        if pos != -1:
            self.menu.Delete(DEFAULT_MENU_ITEM_ID)
    # Set UID to allow us to reference the panel later
    new_panel.uid = event_id
    # Ship the plottable to its panel
    wx.CallAfter(new_panel.plot_data, data) 
    self.plot_panels[new_panel.group_id] = new_panel

    # Set Graph menu and help string        
    helpString = 'Show/Hide Graph: '
    for plot in  new_panel.plots.itervalues():
        helpString += (' ' + plot.label + ';')
    self.menu.AppendCheckItem(event_id, new_panel.window_caption, 
                              helpString)
    self.menu.Check(event_id, IS_WIN)
    wx.EVT_MENU(self.parent, event_id, self._on_check_menu)
    wx.EVT_CLOSE(self.parent, event_id, self._on_close_panel)
    wx.EVT_SHOW(new_panel, self._on_show_panel) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:35:07.920

您是否尝试捕获 wx.aui.EVT_AUINOTEBOOK_PAGE_CLOSE 或 wx.aui.EVT_AUINOTEBOOK_PAGE_CLOSED？我认为那会做你想要的。我假设您使用的是 wx.aui 而不是 wx.agw.aui。我怀疑后者是相似的。

编辑：哎呀。我读错了。我以为 OP 想了解 AUINotebook。您可能正在寻找的事件是 wx.aui.EVT_AUI_PANE_CLOSE

# php - 调用的 iFrame PHP 页面检查源（引用者）

> ID：10244276
> 
> 赞同：1
> 
> 时间：2012-04-20T10:14:28.940
> 
> 标签：php, javascript, iframe

谁能告诉我 Facebook Like 如何识别 iFrame 所在的页面域？

我问的原因是说我在[http://www.firstdomain.com](http://www.firstdomain.com)中有一个 iFrame，它加载了一个[http://www.mysite.com/page.php?appid=111&userid=5](http://www.mysite.com/page.php?appid=111&userid=5) ”。我只想要[http:// /www.firstdomain.com](http://www.firstdomain.com)被允许查看该页面，但如果其他域名 (http://www.anotherwebsite.com) 尝试放置相同的 iFrame，它应该不起作用。

有什么想法吗？如何在 PHP/JavaScript 中做到这一点并同时保证安全。我试图避免在请求页面的服务器上使用代理页面.. 只是纯 Javascript 和 iFrame.. 非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:21:08.607

我认为您必须在客户端页面中放置一个 js，以在 dom 中生成 iframe，将“托管”页面的 url 作为参数传递给 src 页面，以及域。

像这样：

```
<script src="http://example.com/ilikeapp.js" /> 
```

ilikeapp 类似于（几乎是伪代码）：

```
 var hosting_page = window.location;
    $(body).append("<iframe src='http://example.com/apage.php?client="+hosting_page+"' .... />"); 
```

# php - Selenium 测试在执行 javascript 时随机崩溃

> ID：10244280
> 
> 赞同：1
> 
> 时间：2012-04-20T10:14:32.003
> 
> 标签：php, javascript, selenium, phpunit, webdriver

我正在为 Zend 应用程序编写功能测试。我使用 PHPUnit 和这个包装器运行它们：[https ://github.com/chibimagic/WebDriver-PHP](https://github.com/chibimagic/WebDriver-PHP)

我在本地（v2.19.0）从 jar 文件运行 selenium 独立服务器。我在这个应用程序中使用了很多 js 和 ajax，所以我在我的 FunctionalTestCase 类中创建了一个 waitForAjax 函数，这样我就可以等到所有数据都正确加载。它使用 $.active，因为我使用的是 jQuery ajax 函数。该函数如下所示：

```
public function waitForAjax($timeout = 10) {
  sleep(1);
  for($i = 0 ; $i < $timeout - 1 ; $i++) {
    $active = $this->getJsResult('return $.active;');

    if($active > 0) {
      sleep(1);
    }else {
      break;
    }
  }
} 
```

函数 getJsResult 从 WebDriver 包装器执行 execute_js_sync 并从 Selenium 响应中获取结果。

我的问题如下： selenium 在站点上执行 js 时随机挂起。有时它几乎立即返回，但大多数时候它只是停留在执行脚本上。这是服务器的唯一输出：

```
11:58:48.386 INFO - Executing: [execute script: return $.active;, []] at URL: /session/1334915841900/execute) 
```

最困扰我的是为什么会如此随机发生？

我真的可以在这里使用一些帮助。

干杯， Maciej

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:37:07.440

当我第一次使用 Selenium 时，我也遇到过它随机崩溃，我看到它正在消耗很多 RAM，并达到了应用程序可能拥有的最大 RAM，也许这就是我通过在每个请求上以编程方式启动和终止来解决的问题，

问候，

科尔内

# php - codeigniter 模板系统中的范围管理

> ID：10244291
> 
> 赞同：2
> 
> 时间：2012-04-20T10:15:22.153
> 
> 标签：php, codeigniter, include, scope

在 codeigniter 中，模板基本上是包含文件，并且模板输入由关联数组提供。我猜 codeigniter`extract()`用于魔法的那一部分，但它如何防止这些变量弄乱全局范围？还是我在包含文件中遗漏了具有可变范围的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:40:00.883

它确实使用[了 extract()](http://php.net/manual/en/function.extract.php)。虽然 extract 函数有一个不覆盖现有变量的选项，但默认情况下它会覆盖，并且 CodeIgniter 使用此默认值。

由于视图表面上是应用程序的最终端点，并且不应使用除通过视图传递的任何变量*之外*的任何变量，因此不应出现任何问题。但是，如果您希望捕获范围冲突，您可以执行以下操作：

```
$foo = 'bar';
$data = array('foo' => 'baz');

foreach($data as $key => $val)
    if(isset($$key)) { /* throw fatal error */ }

$this->load->view($data); 
```

为了以更技术性和不太实用的方式回答您的问题，上面的评论者是正确的：变量在**CI_loader类的****_ci_load**函数的方法范围内解析。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T13:40:00.877

与全局范围没有冲突，因为视图是在方法中加载的。

CodeIgniter 正在使用`extract()`： [https ://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Loader.php#L886](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Loader.php#L886)

包含视图的 CodeIgniter 代码： [https ://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Loader.php#L910](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Loader.php#L910)

包含在方法中不会与全局范围发生冲突： [如何在函数中使用包含？](https://stackoverflow.com/questions/2619573/how-to-use-include-within-a-function)**

# mysql - 递归更新触发器

> ID：10244296
> 
> 赞同：0
> 
> 时间：2012-04-20T10:15:42.357
> 
> 标签：mysql, triggers

我有这个mysql表：

```
CREATE TABLE IF NOT EXISTS `activities` (
`id`    INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
`name`  CHAR(255)   NOT NULL,
`status`    ENUM('open','progress','close'),
`date_begin`    DATE,
`date_finish`   DATE,
`progress` TINYINT,
`reliance` INTEGER,
`parent`    INTEGER,
FOREIGN KEY(owner) REFERENCES users(id) ON UPDATE CASCADE ON DELETE SET NULL,
FOREIGN KEY(reliance) REFERENCES activities(id) ON UPDATE CASCADE ON DELETE SET NULL,
FOREIGN KEY(parent) REFERENCES activities(id) ON UPDATE CASCADE ON DELETE SET NULL
)ENGINE = INNODB; 
```

我的问题是当我想更新一项活动的 date_begin 时。事实上，我想更新所有依赖或更新活动的子活动的开始日期。我可以强制mysql创建一个递归触发器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T08:32:00.017

虽然触发器可能工作......创建递归触发器不是一个**好习惯！**如果你觉得你必须......那么在申请之前不仅要考虑两次，而且要考虑 100 次！有时，它们可能弊大于利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T23:46:08.937

这样的事情应该可以工作，至少如果你使用的是最新版本的 MySQL：

```
delimiter |

CREATE TRIGGER activitiesUpdateReliantAndChildren BEFORE UPDATE ON 'activities'
FOR EACH ROW 
BEGIN 

update 'activities' 
set date_begin = NEW.date_begin 
where reliance = NEW.id;

update 'activities' 
set date_begin = NEW.date_begin 
where parent = NEW.id;

END;
|

delimiter ; 
```

# c# - 获取给定 UserPrincipal 的组列表

> ID：10244297
> 
> 赞同：9
> 
> 时间：2012-04-20T10:15:44.077
> 
> 标签：c#, active-directory, userprincipal

我想获取用户所在的组列表。

这是我的代码：

```
PrincipalContext ctx = new PrincipalContext(ContextType.Domain, "mydomain.ac.uk",   "DC=mydomain,DC=AC,DC=UK", "user", "password");

UserPrincipal user = UserPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, "MyUser");

PrincipalSearchResult<Principal> results = user.GetGroups();

foreach(Principal p in results)
{
   Response.Write(p.Name);
} 
```

当我运行时，我在该行收到以下错误`Response.Write(p.Name);`

> System.Runtime.InteropServices.COMException：指定的目录服务属性或值不存在。

当我检查结果的计数时，它返回 9 并且第一组是`DomainUsers`.

如何迭代列表中的所有 9 个组？谢谢。

以下是我得到的用户列表：

![在此处输入图像描述](../Images/eb2442bbd589b25e0e360b23d1b19698.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-05T13:13:56.160

当省略 PrincipalContext 类中描述的 LDAP 容器属性时，运行代码的用户必须对默认`User`Container (ie `CN=Users,DC=yourDomain,DC=COM`) 和`Computers`Container (ie `CN=Computers,DC=yourDomain,DC=COM`) 都具有读取权限。

如果用户没有所需的权限，您将收到以下错误消息：

> 指定的目录服务属性或值不存在
> 
> *   “context.Container”引发了“System.NullReferenceException”字符串 {System.NullReferenceException} 类型的异常
>     
>     
> *   ((new System.Linq.SystemCore_EnumerableDebugView(groups)).Items[5]).Description' 引发了“System.Runtime.InteropServices.COMException”字符串 {System.Runtime.InteropServices.COMException} 类型的异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:06:42.877

尝试类似的东西

```
foreach(Principal p in results)
{ 
   if (p is GroupPrincipal) 
      Response.Write(p.DisplayName); 
} 
```

我知道这听起来很愚蠢，但它在过去对我有用。您的结果看起来实际上只找到了 1 个安全组和 8 个“其他”类型的组。那些“其他”组可能不具备这些属性。

# java - 从文本文件中删除选定的单词？

> ID：10244308
> 
> 赞同：2
> 
> 时间：2012-04-20T10:16:13.370
> 
> 标签：java, parsing, lexical-analysis

我必须从文本文件中删除常用词，例如 (is,are,am,was 等)。在 java 中这样做的有效方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T10:18:11.297

您必须读入文件，跳过要删除的单词，然后再次将文件写回。

因此，您可能更愿意在每次阅读时跳过要忽略的单词 - 取决于您的用例。

要实际逐行删除单词（这可能不是您想要的方式），您可以这样做（使用[google guava](http://code.google.com/p/guava-libraries/)）：

```
 // the words you want to remove from the file:
    //
    Set<String> wordsToRemove = ImmutableSet.of("a", "for");

    // this code will run in a loop reading one line after another from the file
    //
    String line = "Some words read from a file for example";
    StringBuffer outputLine = new StringBuffer();
    for (String word : Splitter.on(Pattern.compile("\\s+")).trimResults().omitEmptyStrings().split(line)) {
        if (!wordsToRemove.contains(word)) {
            if (outputLine.length() > 0) {
                outputLine.append(' ');
            }
            outputLine.append(word);
        }
    }

    // here I'm just printing, but this line could now be written to the output file.
    //
    System.out.println(outputLine.toString()); 
```

运行此代码将输出：

```
Some words read from file example 
```

即，“a”和“for”被省略。

Notice that this makes for simple code, but, it will change the whitespace formatting in your file. If you had a line with doubled up spaces, tabs etc, then this all gets changed to a single space in this code. This is just an example of how you might do it, depending on your requirements, there will probably be better ways.

# android - 如何在 LoopEntityModifier 的开头随机设置 PathModifier 的坐标？

> ID：10244310
> 
> 赞同：1
> 
> 时间：2012-04-20T10:16:27.083
> 
> 标签：android, opengl-es, andengine

我使用 AndEngine 库创建了一个动态壁纸服务。屏幕上有一只鸟精灵从左到右反复飞行。我正在使用 LoopEntityModifier 和 PathModifier 作为解决方案。每次从左侧屏幕出现时，这只鸟都被编码为在 Y 位置随机开始。

代码是这样的：

```
public class MyLiveWallpaperService extends BaseLiveWallpaperService {
    private AnimatedSprite birdSprite;
    ...

    public Scene onLoadScene() {
        ...
        float[] coordY = generateRandomCoordY();  // my custom function to generate random array of Y-coordinates
        Path path = new Path(coordX, coordY);  // set the coordinate to Path object

        // register the modifiers (for the one who is curious, 1st argument of PathModifier is the duration, 
        // but it has nothing to do with the question)

        birdSprite.registerEntityModifier(new LoopEntityModifier(new PathModifier(10, path)));
        ...
    }
} 
```

问题是当 LoopEntityModifier 和 PathModifier 运行时，路径的 Y 坐标值不能再更改。我希望每次循环开始时，我都可以再次设置新路径的 Y 坐标值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:55:22.927

我认为您可以通过覆盖 onModifierFinished() 并使用更改后的路径创建一个新的 PathModifier 来解决这个问题。它看起来像这样：

```
public LoopEntityModifier createModifier(Path path) {
    return new LoopEntityModifier(new PathModifier(path)) {
        @Override
        public void onModifierFinished(final IModifier<IEntity> pEntityModifier, final IEntity pEntity) {
            birdSprite.registerEntityModifier(createModifier(path));
        }
    }
}

birdSprite.registerEntityModifier(createModifier()); 
```

这仅在每个循环结束时调用 onModifierFinished() 时才有效。

# apache - 使用 apache 从 S3（挂载到 EC2）访问文件

> ID：10244311
> 
> 赞同：2
> 
> 时间：2012-04-20T10:16:28.913
> 
> 标签：apache, amazon-s3, amazon-ec2, ubuntu-10.04

我观察到，与从 ubuntu EC2 本身（通过 apache）访问文件相比，访问挂载到 ubuntu EC2 的 s3 上的文件有点慢。

我的配置是

S3 存储桶 -> Ubuntu EC2（通过 s3fs 安装在这台机器上的 s3）。Apache 在 EC2 上运行，并且使用 Apache 访问文件。

我观察到的是，如果对服务器的请求是有效的（即正确的文件请求） - 服务器需要时间来回复，一些错误请求（例如找不到文件或拒绝访问请求）会立即得到满足。

我的问题是，当通过 apache 将 S3 存储桶安装到 EC2 时，是否有人在访问 S3 存储桶的文件时遇到问题（我知道我可以做云端，但这不符合我的目的，因为我需要保护文件免受不必要的访问 - 这就是为什么我有 apache 规则）。

任何指针都非常有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:30:59.443

不要为此使用 S3。使用 NAS！

# java - 是否可以从 java 类运行 maven 插件？

> ID：10244313
> 
> 赞同：4
> 
> 时间：2012-04-20T10:16:36.363
> 
> 标签：java, plugins, maven

需要在运行时从我的应用程序运行 maven jaxb2 插件。是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:15:01.750

也许我做了一些可以帮助你的事情：

```
/**
 * @author swoeste
 * 
 */
public class MavenExecutor {

private final File       configuration;
private final ClassWorld classWorld;

/**
 * Constructor for a new maven executor.
 * 
 * @param aConfiguration
 */
public MavenExecutor( final File aConfiguration ) {
    this.configuration = aConfiguration;
    this.classWorld = new ClassWorld( "plexus.core", this.getClass().getClassLoader() ); //$NON-NLS-1$
}

/**
 * This method is used to perform a mvn  command on the given pom. The original
 * command must be given, also the sub folder and the marker folder in the working directory. The working directory
 * and the configuration file will be added before execution.
 * 
 * @param cmd the mvn command to execute
 * @param pom the absolute path to a maven pom file
 * @param output the absolute path to the working directory
 * @param folder the output sub folder of the working directory
 * @param marker the marker sub folder of the working directory
 * @return
 */
public int unpack( final String cmd, final File pom, final File output, final String folder, final String marker ) {
    final List<String> commands = new ArrayList<String>( //
            Arrays.asList( cmd.split( ConfigurationConstants.MAVEN_DELIMITER ) ) );
    commands.add( "-DoutputDirectory=" + output.getAbsolutePath() + folder ); //$NON-NLS-1$
    commands.add( "-DmarkersDirectory=" + output.getAbsolutePath() + marker ); //$NON-NLS-1$
    commands.add( "-gs=\"" + this.configuration.getAbsolutePath() + "\"" ); //$NON-NLS-1$//$NON-NLS-2$
    commands.add( "-f=\"" + pom.getAbsolutePath() + "\"" ); //$NON-NLS-1$ //$NON-NLS-2$
    return MavenCli.doMain( commands.toArray( new String[commands.size()] ), this.classWorld );
} 
```

}

我不知道你到底想做什么，但如果你想在一个 Maven 项目上执行一个 Maven 插件，上面的代码就可以工作。就我而言，我在项目上执行 mvn dependency:unpack-dependencies 命令。

要使上述工作正常，您需要此依赖项：

```
 <dependency>
     <groupId>org.apache.maven</groupId>
     <artifactId>maven-embedder</artifactId>
     <version>3.0.3</version>
  </dependency> 
```

PS：有关如何从 java 执行 maven 的信息的一个很好的资源是 m2eclipse 插件的实现；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:02:16.987

我真的需要那个，当然可以。只需下载插件的源代码并查看里面发生了什么。您可以实例化一个适当的 Mojo（实现插件目标的类）并执行它。但是，通常插件的目标在很大程度上取决于 Maven 项目上下文，这可能很难提供（甚至以某种方式模拟），因此 Mojo 能够在没有错误的情况下执行。

我不知道你的具体情况，但我 99% 确信编写自己想要实现的东西的实现会更明智，可能基于你在插件源代码中找到的东西（而不是写所有东西靠自己）。

# charts - ExtJS 4中图表的轴标签不可见

> ID：10244314
> 
> 赞同：1
> 
> 时间：2012-04-20T10:16:38.957
> 
> 标签：charts, extjs4, ria, rich-internet-application

我正在尝试在面板内绘制图表。图表条绘制正确，但绘制图表时未显示 x 和 y 轴标签。绘制图表的代码如下：

```
Ext.require([
    'Ext.form.*',
    'Ext.chart.*',
    'Ext.layout.container.*'
]);

Ext.define('ilp.view.EmployeeCountControl', {
    extend : 'Ext.panel.Panel',
    alias : 'widget.employeeCountControl',

    require : [
        'ilp.store.Employees',
        'ilp.store.Dimensions'
    ],

    layout : {
        type : 'vbox',
        align : 'stretch',
        pack : 'start'
    },

    title : 'Select dimension to view chart',

    initComponent : function() {
        this.items = [
            {
                xtype : 'combobox',
                fieldLabel : 'Select Dimension',
                store : 'Dimensions',
                queryMode : 'local',
                displayField : 'name',
                valueField : 'dimension',
                flex : 1
            },
            {
                xtype : 'chart',
                title : 'selected dimension',
                store : 'Employees',
                flex : 2,
                width: 150,
                height: 200,
                legend : {
                    position : 'right'
                },
                axes : [
                    {
                        title : 'Emp Count',
                        type : 'Numeric',
                        position : 'left',
                        fields : ['hpCount', 'nonhpCount'],
                        minimum : 0,
                        grid : true
                    },
                    {
                        title : 'selected dimension',
                        type : 'Category',
                        position : 'bottom',
                        fields : ['dimension']
                    }
                ],
                series : [
                    {
                        type : 'bar',
                        column :true,
                        stacked : true,
                        highlight: true,
                        axis : 'left',
                        xField : ['dimension'],
                        yField : ['hpCount', 'nonhpCount'],
                        yPadding : 10
                    }
                ]
            }
        ];
        this.callParent(arguments);
    }
}); 
```

绘制的内容如下：

![在此处输入图像描述](../Images/b9d08884968169d2353f31ea4b8b40c7.png)

如您所见，标题和轴值未显示在图表上。

谁能告诉我为什么会这样？？

提前致谢 ！！

* * *

**编辑 1**

移到`legend`底部后，我得到了 x 轴值，但现在这些值被隐藏在图例后面，而且这些值也超出了面板。有谁知道如何减小实际图表和条形的大小以正确适合轴值？我的图表现在如下所示：

![在此处输入图像描述](../Images/d13af7262be90fe65902e314e8ba30a0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:28:22.477

将**宽度**和/或**填充**设置为您的布局和/或面板并查看更改。我认为这是关于图表父容器而不是图表本身。

# android - 使用 SQLiteDatabase 上的两个表执行选择

> ID：10244315
> 
> 赞同：0
> 
> 时间：2012-04-20T10:16:39.620
> 
> 标签：android, sqlite

我正在开发一个 Android 3.1 应用程序。

我有以下表格：

```
FormBlock
---------
FormId  (INTEGER) FOREIGN KEY TO Form.id
BlockId (INTEGER) FOREIGN KEY TO Block.id

Block
----------
id          (INTEGER) PRIMARY KEY
name        (TEXT)    NOT NULL
orderInForm (INTEGER) NOT NULL 
```

我想做以下选择：

```
SELECT block.blockId, block.name, block.orderInForm FROM Block, FormBlock WHERE FormBlock.FormId = 1 AND block.blockId = FormBlock.blockId; 
```

如何使用 SQLiteDatabase.query(...) 或 执行该选择语句`rawQuery()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:27:05.480

```
SELECT 
    block.blockId, block.name, block.orderInForm
FROM
    Block, FormBlock 
WHERE
    FormBlock.FormId = 1 AND block.blockId = FormBlock.blockId; 
```

原样`query`_

```
String table = "Block, FormBlock";
String[] columns = new String[] { "block.blockId", "block.name", "block.orderInForm" };
String where = "FormBlock.FormId = 1 AND block.blockId = FormBlock.blockId";
Cursor result = db.query(table, columns, where, null, null, null, null); 
```

如果`1`是动态的，那么

```
int formId = 1;
String table = "Block, FormBlock";
String[] columns = new String[] { "block.blockId", "block.name", "block.orderInForm" };
String where = "FormBlock.FormId = ? AND block.blockId = FormBlock.blockId";
String[] whereArgs = new String[] { String.valueOf(formId) };
Cursor result = db.query(table, columns, where, whereArgs, null, null, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:23:01.817

尝试这个：

```
String query = "SELECT * FROM Block WHERE id IN
                  (SELECT BlockId FROM FormBlock WHERE FormId = 1)";

Cursor c = database.rawQuery(query, null); 
```

# google-app-engine - 使用flyway迁移到Google Cloud SQL，应该复制哪些jar文件？

> ID：10244319
> 
> 赞同：0
> 
> 时间：2012-04-20T10:16:51.770
> 
> 标签：google-app-engine, flyway, google-cloud-sql

我正在尝试使用 flyway 命令行工具迁移我的数据库（MySQL）转储文件 Google Cloud SQL。我已将 google_sql.jar 复制到 flyway-commandline-1.6/jars/ 并在 flyway-commandline-1.6/conf/flyway.properties 中设置以下属性：

```
flyway.driver=com.google.appengine.api.rdbms.AppEngineDriver
flyway.url=jdbc:google:rdbms://myinstancename/devdb
flyway.user=myusername
flyway.password=mypassword 
```

但是，这不起作用并产生以下错误：

```
FlywayException: Error instantiating database driver: com.google.appengine.api.rdbms.AppEngineDriver
Occured in com.googlecode.flyway.core.Flyway in method configure, line number 789
Caused by java.lang.ClassNotFoundException: com.google.appengine.api.rdbms.AppEngineDriver
Occured in java.net.URLClassLoader$1 in method run, line number 217 
```

有人可以帮助我确定 flyway 使用 Google Cloud SQL 所需的 jar 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T02:48:37.780

这在 AppEngine 方面很奇怪且记录不充分，但您还必须将 MySQL Jdbc 驱动程序复制到`APPENGINE_HOME/lib/impl`

请参阅：[在本地开发服务器上运行的 Java Google App Engine 和 Google Cloud SQL](https://stackoverflow.com/questions/8952696/java-google-app-engine-and-google-cloud-sql-running-on-local-dev-server)

# ios - 将扫描的条形码值解码为 int 值

> ID：10244321
> 
> 赞同：1
> 
> 时间：2012-04-20T10:16:57.787
> 
> 标签：ios, nsstring, barcode-scanner, unsigned-integer, zbar-sdk

当我扫描条形码时，如果它是**Equal=2** ，我会得到一些值，那么我需要用**==**显示，如果它是**Equal=3**，那么我需要用**=**显示，如果该值为 4，则无效。

但是扫描条码是整数值——当使用`NSASCII`它解码时，它只显示直到值`127`，之后它显示无效结果。例如：如果我的条形码值 =`9699`结果值 =`jem`那么我添加的结果值 =`jem=` **实际字符串**值 = `%å`**asc**值 id 只显示`37`

这是我的代码：

```
- (void) readerView:(ZBarReaderView *)view didReadSymbols:(ZBarSymbolSet *)syms fromImage:(UIImage *)img
{
    // do something useful with results -- cool thing is that you get access to the image too
    for (ZBarSymbol *symbol in syms) {
        [resultsBox setText:symbol.data];
        if ([resultsBox.text length] == 2) {
            addedresult.text = [resultsBox.text stringByAppendingString:@"=="];
        } else if ([resultsBox.text length] == 3) {
           addedresult.text = [resultsBox.text stringByAppendingString:@"="];
        } if ([resultsBox.text length] >= 4) {
           addedresult.text = @"Invalid";
        }
        [Base64 initialize];
        NSString *myString = [[NSString alloc]initWithString:addedresult.text];
        NSData * data = [Base64 decode:myString];
        NSString * actualString = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
        NSLog(@"%@",actualString);
        labeltext.text= actualString;
        int asc = [actualString characterAtIndex:0];
        label.text = [NSString stringWithFormat:@"%d", asc];
        [actualString release];
        break;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T22:48:44.630

由于有人恢复了这个问题的评论，我将恢复整个帖子。

你不应该通过 NSData 从你已经拥有的东西中创建一个 NSString ，而且你可能会在这个过程中丢失一些东西。使用 stringWithFormat 直接转到 NSString。此外，ASCII 会在稍后返回并发送给您，如果您有选择，请使用 UTF8。

```
NSString *actualStringUTF8 = [NSString stringWithFormat:@"%@",[addedresult.text urlEncodeUsingEncoding:NSUTF8StringEncoding]];
NSString *actualStringASCII = [NSString stringWithFormat:@"%@",[addedresult.text urlEncodeUsingEncoding:NSUTF8StringEncoding]];

NSLog(@"%@",actualStringUTF8);
NSLog(@"%c",[actualStringUTF8 UTF8String]); //This is a const char* 
```

其次，我查看了 SDK，它说 symbol.data 已经是一个 NSString*。根据您的需要，您可能不需要做任何事情。如果您最终需要更改编码，请确保您了解为什么需要更改（一个很好的理由是“应用程序的其余部分使用 NS****StringEncoding”）。

还要确保以正确的“Objective-C”方式比较字符串：

```
[actualString isEqualToString: testString]; 
```

不是实际字符串 == 测试字符串；

# asp.net-mvc - 如何在 mvc 视图内的视图条件下隐藏/显示按钮？

> ID：10244322
> 
> 赞同：1
> 
> 时间：2012-04-20T10:16:58.290
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我想`hide/show`打开但不能在内部视图中进行`button`。`condition`

```
@{
    ViewBag.Title = "Mapping";
    WebGrid grid = null;
    if (ViewBag.Mappings != null)
    {
        grid = new WebGrid(source: ViewBag.Mappings,
                                defaultSort: "Id",
                                canPage: true,
                                canSort: true,
                                rowsPerPage: 10);
    }
}
<h3>@ViewData["Message"]</h3>
@if (grid != null)
{
    @grid.GetHtml(
                tableStyle: "grid",
                headerStyle: "head",
                alternatingRowStyle: "alt",
                columns: grid.Columns(
    grid.Column("", header: null, format: @<text>@Html.ActionLink("Edit", "Index", new { uid = (Guid)item.id, userAction = "Edit" }, new { @class = "edit" })
    @Html.ActionLink("Delete", "Index", new { uid = (Guid)item.id, userAction = "Delete" }, new { @class = "Delete" })</text>),
                                            grid.Column("PricingSecurityID"),
                                            grid.Column("CUSIP"),
                                            grid.Column("Calculation")
                                          )

                )
}

if(@ViewBag.Mappings != null)
  {    
@Html.ActionLink("Update", "Index", new { userAction = "Update" }, new { @class = "Update" })
} 
```

在上面的视图中，如果`ViewBag.Mappings != null`我正在填充 webgrid。如果填充了 webgrid，我需要`Update`在 webgrid 下显示一个按钮，但是在条件下我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:57:52.813

从底部移动第 4 行的“@”：

前：

```
if(@ViewBag.Mappings != null) 
```

后：

```
@if(ViewBag.Mappings != null) 
```

# php - 连接使用 php5 构建的 sqlite 数据库的问题

> ID：10244324
> 
> 赞同：1
> 
> 时间：2012-04-20T10:17:10.140
> 
> 标签：php, sqlite

我已经使用 php5 创建了一个 sqlite 数据库。使用 php 访问其数据时，数据库工作正常。

但是，当我尝试使用 firefox sqlite manager 连接到同一个 sqlite 文件时，出现以下错误....

> SQLiteManager：打开文件 jTest.sqlite 时出错 - 文件已加密或损坏异常名称：NS_ERROR_FILE_CORRUPTED 异常消息：组件返回失败代码：0x8052000b (NS_ERROR_FILE_CORRUPTED) [mozIStorageService.openUnsharedDatabase]

我的问题：您可以使用 php 创建 sqlite 数据库并让它们在其他应用程序中工作吗？

问候J

# django - Django - 身份验证 - 重定向

> ID：10244331
> 
> 赞同：4
> 
> 时间：2012-04-20T10:17:29.497
> 
> 标签：django

我正在使用 Django 标准身份验证。/ login 在我的 /urls.py 中具有以下位置。

```
(r'^$', 'django.contrib.auth.views.login', {'template_name': 'home.html', }), 
```

如果用户调用 www.myapp.com 并且登录重定向到 settings.py 中定义的 LOGIN_REDIRECT_URL = '/pm/po/my/' (www.myapp.com/pm/po/my/)，则登录工作正常。

如果用户关闭浏览器选项卡，则会话不会被终止（= 用户未注销），而浏览器则保持打开状态。这也很好。

但是，如果用户随后打开一个新选项卡并转到 www.myapp.com，登录视图将再次显示，而用户已经登录。这里我希望用户重定向到 www.myapp.com/pm/po/我的/ 。

我怎样才能做到这一点？

我尝试添加以下行：

```
(r'^$', 'myapp.project_management.views.projects'),
(r'^$', 'django.contrib.auth.views.login', {'template_name': 'home.html', }), 
```

但是，这会导致以下错误消息：“此网页具有重定向循环”

- 解决方案 -

网址.py：

```
(r'^$', 'myapp.project_management.views.my_projects'),
(r'^login/$', 'django.contrib.auth.views.login', {'template_name': 'home.html', }), 
```

设置.py

```
LOGIN_URL = '/login' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T10:23:32.550

不要让主页 URL 指向登录页面。相反，根据需要使用[`login_required`装饰器](https://docs.djangoproject.com/en/dev/_modules/django/contrib/auth/decorators/)将未登录的用户重定向到登录页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:24:43.983

实现您自己的登录 url 视图，并在您的用户登录（通常使用 request.method = 'POST'）或该用户已经授权时进行重定向。

# javascript - 使用 jQuery 动态加载脚本时，firebug 中没有换行符

> ID：10244334
> 
> 赞同：0
> 
> 时间：2012-04-20T10:17:47.480
> 
> 标签：javascript, jquery

当我用 jquery 动态加载脚本时

```
...
options = {
  dataType: "script",
  cache: true,
  url: "...appContr.js"
}
return jQuery.ajax(options);    
... 
```

我用萤火虫调试脚本，这个脚本的名字是“1”，一切都在一行（或几行）。我不能用它来调试。

我使用 Firefox 10.0.2 和 Firebug 1.9.1。

当我使用 LAB.js

```
$LAB.script("...appContr.js").wait(function() {
      ...
    }); 
```

或 require.js

该文件有其换行符，脚本的名称是“appContr”。

如何更改 jQuery 命令以获得相同的结果？

非常感谢提前

编辑：

谢谢你，Headshota，你的回答，但这无济于事。
此外，getscript 不会缓存内容，这对我来说很重要。

编辑：

谢谢你，马林，你的回答：

当我使用 lab.js 或 require.js 加载脚本时，整个事情都可以在没有 firebug 增强的情况下工作，问题仅在于 jquery 脚本加载。

在萤火虫中，我有选项卡控制台、html、css、脚本、dom 和网络。如果我在 jquery 脚本加载后去编写脚本并查看脚本，则代码中没有换行符。
但是当我转到“选项卡”控制台时，我有一个获取请求的条目。当我在此获取请求中单击“回答”时，脚本包含换行符。但这对我没有帮助，因为在“脚本”标签中缺少换行符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:48:55.093

`dataType: script`告诉[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)将响应解释为 JavaScript 并对其进行评估。

> “脚本”：将响应评估为 JavaScript，并将其作为纯文本返回。

评估的代码基本上没有文件、行号，也可能没有空格。如果您尝试在 FireBug 中对其进行调试，它可能会告诉您它是“eval()ed”代码。

JavaScript 加载器（例如 LABjs）通过`<script src>`在文档中注入标签来工作；FireBug 更容易调试，因为 JavaScript 文件名、文件内容和行号都可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:31:55.910

我不确定如何在 firebug 中正确获取脚本的名称，但至于您的其他困境，您应该考虑几个 Firebug 扩展

**Ben Murphy 的 JS Deminifier 1.0.7：**这会将您的 javascript 扩展为非常易读的代码（但如果 javascript 已被难以置信地缩小，但听起来不会在您的情况下发生）。只需确保打开显示在萤火虫下方的插件栏，并将 JSD 设置为打开（在左下角）。

在 Firebug 中进行 Javascript 调试的另一个好选择...

**BinaryAge 的 FireRainbow 1.5：**这为在 firebug 中查看的 javascript 提供了非常有用的语法突出显示。

希望这些工具可以缓解您的问题。

# android - 在 jquery mobile 中的应用程序本身中打开一个 Web 链接

> ID：10244335
> 
> 赞同：1
> 
> 时间：2012-04-20T10:17:48.207
> 
> 标签：android, jquery-mobile, cordova

我想在 jquery mobile android 应用程序中打开一个 url（例如 www.google.com）。我想在应用程序本身的上下文中打开它。我不想在单击链接或按钮时打开不同的浏览器来启动它。我想在应用程序中打开它。可能吗。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:24:25.187

[在这里](https://gist.github.com/1725083)找到解决方案：

```
function openInWebView(url)
{
    var anchor = document.createElement('a');
    anchor.setAttribute('href', url);

    var dispatch = document.createEvent('HTMLEvents')
    dispatch.initEvent('click', true, true);

    anchor.dispatchEvent(dispatch);
} 
```

然后在您的应用程序中调用这样的函数：

```
openInWebView('http://google.com') 
```

# wix - 如何检测我的软件是否在我的 Wix MSI 中运行？

> ID：10244338
> 
> 赞同：1
> 
> 时间：2012-04-20T10:17:57.230
> 
> 标签：wix, windows-installer

我有一个将安装/更新驱动程序的 MSI。但是我想检测驱动程序是否正在运行并在开始安装之前将其关闭。当客户使用 Active Directory 部署到计算机时，我需要静默执行此操作。

使用 WIX 安装脚本，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:50:41.400

不确定我是否在这里遗漏了一些东西，但如果您需要在安装之前关闭驱动程序，那么在我看来，自定义操作将是最好的方法。

您可以通过使用 VB 脚本或调用托管程序集来编写自定义操作。我更喜欢后者（个人偏好 C# 而不是 VB）。WiX 源文件中的自定义操作如下所示：

声明表示要调用的程序集的二进制元素：

```
<Binary Id="BIN_DriverManagement" SourceFile=".\DriverManagement.CA.dll /> 
```

然后定义自定义动作，调用程序集的方法：

```
<CustomAction Id="CACT_ShutDownDriverAction" BinaryKey="BIN_DriverManagement" DllEntry="ShutDownDriver" /> 
```

最后一步是将自定义操作安排到安装顺序中：

```
<InstallExecuteSequence>
    <Custom Action="CACT_ShutDownDriverAction" After="LaunchConditions" />
</InstallexecuteSequence> 
```

实际上，我不确定何时应该安排此类自定义操作，这取决于要求。

用 C# 实现的自定义操作函数应在 Microsoft.Deployment.WindowsInstaller 命名空间中添加 [CustomAction] 属性，因此它可能如下所示：

```
[Microsoft.Deployment.WindowsInstaller.CustomAction]
public static ActionResult ShutDownDriver(Session session)
{
    // Shut down the driver here.
} 
```

# iphone - 我必须根据那里的 id 下载个人资料图像并在 uitableview 单元格中显示

> ID：10244339
> 
> 赞同：0
> 
> 时间：2012-04-20T10:18:04.613
> 
> 标签：iphone, ios5

我需要能够将 id 作为参数与 URL 一起发送。然后程序需要异步下载图像并在 uitableview 单元格中显示图像。我怎样才能做到这一点？这是我到目前为止所拥有的：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:@"lisn"];

        cell=[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"lisn"] autorelease];

    [[cell textLabel] setFont:[UIFont systemFontOfSize:14.0]];
    switch([indexPath section]){
        case 0:
            cell.textLabel.text=[arryList objectAtIndex:indexPath.row];
            CGRect memberFrame=CGRectMake(240,18,10,30);
            UILabel *members=[[[UILabel alloc] initWithFrame:memberFrame ] autorelease];
            members.text=[arryList objectAtIndex:indexPath.row + 3];
            [cell.contentView addSubview:members];

            break;
        case 1:

            cell.textLabel.text=@"Start date:";
            CGRect dateFrame=CGRectMake(80,6,180,20);
            UILabel *sDate=[[[UILabel alloc] initWithFrame:dateFrame] autorelease];
            sDate.text=[arryList objectAtIndex:indexPath.row + 1 ];
            [cell.contentView addSubview:sDate];
            cell.detailTextLabel.text=@"End date:";
            CGRect enddateFrame=CGRectMake(80,22,180,50);
        UILabel *eDate=[[[UILabel alloc] initWithFrame:enddateFrame] autorelease];
            eDate.text=[arryList objectAtIndex:indexPath.row + 2];
            [cell.contentView addSubview:eDate];

            break;
        case 2:
            cell.textLabel.text=[arryList objectAtIndex:indexPath.row + 4];

            break;
        case 3:
            cell.imageView.image = [UIImage imageNamed:@"ic_place_holder_small.png"];
            break;
        break;
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:26:01.940

这是我用于类似问题的：（缩略图是要加载到单元格中的图片）

```
static NSString *CellIdentifier = @"FlickrPhotoCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

OFPhotoModel *photo = [self.photos objectAtIndex:indexPath.row];

cell.textLabel.text = photo.title;
if (photo.thumbnail)
    cell.imageView.image = photo.thumbnail;
else {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
        if (!photo.thumbnail) {
            photo.thumbnail = [OFManager thumbnailForPhoto:photo];
            dispatch_async(dispatch_get_main_queue(), ^{
                [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];
            });
        }
    });

    cell.imageView.image = [UIImage imageNamed:@"placeholder.png"];
}

return cell; 
```

考虑到这个实现除了两种情况外都有效： - 数组被清除并重新加载（嗯..它仍然可以通过一些修改来工作） - 无法重新排序行（在这种情况下，您必须跟踪新的 indexPath对象）

# ruby-on-rails - rails 3.2 将子域链接到控制器？

> ID：10244342
> 
> 赞同：2
> 
> 时间：2012-04-20T10:18:12.087
> 
> 标签：ruby-on-rails, saas, subdomain

更新：重写了一些问题。尝试像下面那样路由我的子域

*   登录应用程序有限公司
*   user1.app.ltd
*   user2.app.ltd
*   注册应用程序有限公司

使用

*   导轨 3.2
*   设计

尝试了几篇教程博客文章无济于事，有人知道这方面的工作示例吗？真的坚持这个:(

这是我现在的路线：

```
 match '', to: 'frontend#index', constraints: lambda { |r| r.subdomain.present? && ( r.subdomain != 'www') }
  #match '' => 'home#index', :constraints => { :subdomain => 'login' }

  constraints :subdomain => /^(?!signup\b)(\w+)/ do
    root :to => "frontend#index"
  end

  root :to => "frontend#index" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T23:18:11.693

我的[RailsApps 项目](http://railsapps.github.com/)提供了一个完整的示例应用程序，展示了如何使用子域：

[带有设计的子域的 Rails 教程](http://railsapps.github.com/tutorial-rails-subdomains.html)

你看了吗？

**配置/路由.rb**

```
devise_for :users
resources :users, :only => :show
constraints(Subdomain) do
  match '/' => 'profiles#show'
end
root :to => "home#index" 
```

**lib/子域.rb**

```
class Subdomain
  def self.matches?(request)
    case request.subdomain
    when 'www', '', nil
      false
    else
      true
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:50:02.803

好的，在一些帮助下设法让它工作

应该这样做：

```
 constraints subdomain: 'login' do
devise_scope :user do
  root to: 'sessions#new'
end 
```

结尾

# algorithm - 访问每个节点

> ID：10244343
> 
> 赞同：0
> 
> 时间：2012-04-20T10:18:15.113
> 
> 标签：algorithm, haskell, recursion

我有一个爱好项目，它是关于创建一棵树来存储标识号。我使用了数字，存储在节点上，即节点可以是 0 1 2 3 4 5 6 7 8 9。

创建树后，我想从树中撰写列表。但是，我找不到一种算法来管理我的目标。

我想要的是 ：

```
 "recompose tree"  will return list of numbers. For below tree it should be 

            [ 2, 21, 243, 245, 246, 78, 789 ]  

                               Root 
                           /          \         
                        2*               7
                      /      \             \                  
                   1*         4              8*    
                            / \  \            \         
                           3*  5* 6*           9*

       my data type :  data ID x = ID ( ( x, Mark ), [ ID x ] ) 
                       data Mark = Marked | Unmarked

       EDIT:

       for convenience : * shows it is marked
                         I have stored digit as char, actually not 1, 
                            it is stored as'1' 
```

你有什么建议我该怎么做？（建议最好是算法）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:35:17.723

关于什么

```
recompose :: Num a => ID a -> [a]
recompose = go 0
  where
    go acc (ID ((n, Marked), ids)) =
      let acc' = 10 * acc + n
      in  acc' : concatMap (go acc') ids
    go acc (ID ((n, Unmarked), ids)) =
      let acc' = 10 * acc + n
      in  concatMap (go acc') ids 
```

?

也就是说，我们遍历树，同时累积从根到节点的路径的值。在每个节点上，我们通过将路径的值乘以 10 并将节点的值添加到它来更新累加器。遍历生成标记节点的所有累加器值的列表：因此，在标记节点处，我们将累加器值添加到列表中，对于未标记节点，我们只是传播我们为节点的子节点收集的列表。

我们如何计算节点子节点的列表？`go`我们通过将遍历函数 ( ) 映射到子列表上来递归调用所有子函数。这给了我们一个列表列表，我们将这些列表连接起来以获得一个列表。（`concatMap f xs`只是`concat (map f xs))`或`concat . map f`。）

在属性语法术语中：累加器用作继承属性，而返回的列表是合成属性。

作为改进，我们可以引入一个辅助函数`isMarked`，

```
isMarked :: Mark -> Bool
isMarked Marked   = True
isMarked Unmarked = False 
```

这样我们就可以简洁地写

```
recompose :: Num a => ID a -> [a]
recompose = go 0
  where
    go acc (ID ((n, m), ids)) =
      let acc'   = 10 * acc + n
          prefix = if isMarked m then (acc' :) else id
      in  prefix (concatMap (go acc') ids) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:52:00.020

顺便说一句：这甚至可以在 sql 中完成：

```
DROP SCHEMA tmp CASCADE;

CREATE SCHEMA tmp ;
SET search_path='tmp';

CREATE TABLE the_tree
        ( id CHAR(1) NOT NULL PRIMARY KEY
        , parent_id CHAR(1) REFERENCES the_tree(id)
        );
INSERT INTO the_tree(id,parent_id) VALUES
 ( '@', NULL)
,( '2', '@')
,( '7', '@')
,( '1', '2')
,( '4', '2')
,( '3', '4')
,( '5', '4')
,( '6', '4')
,( '8', '7')
,( '9', '8')
        ;

WITH RECURSIVE sub AS (
        SELECT id, parent_id, ''::text AS path
        FROM the_tree t0
        WHERE id = '@'
        UNION
        SELECT t1.id, t1.parent_id, sub.path || t1.id::text
        FROM the_tree t1
        JOIN sub ON sub.id = t1.parent_id
        )
SELECT sub.id,sub.path
FROM sub
ORDER BY path
        ; 
```

结果：（postgresql）

```
NOTICE:  drop cascades to table tmp.the_tree
DROP SCHEMA
CREATE SCHEMA
SET
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "the_tree_pkey" for table "the_tree"
CREATE TABLE
INSERT 0 10
 id | path 
----+------
 @  | 
 2  | 2
 1  | 21
 4  | 24
 3  | 243
 5  | 245
 6  | 246
 7  | 7
 8  | 78
 9  | 789
(10 rows) 
```

# c# - 在复杂模型中公开（或为公开数据而创建）哪些类

> ID：10244347
> 
> 赞同：0
> 
> 时间：2012-04-20T10:18:34.813
> 
> 标签：c#, data-modeling, nested-class

我的数据访问层中有以下类（为简洁起见省略了详细信息）（可访问性可能不正确，具体取决于问题本身的答案，所有字段也可能表示为属性）：

```
public class Machine {
    MachineType Type;
    ...

    public ??? GetAlarms() { }
    public ??? GetWarnings() { }
    public void RegisterAlarm(short offset, bool active) { }
    public void RegisterWarning(short offset, bool active) { }
    ...

    class MachineType {
        ...

        public class AlarmMessage {
            MachineType MachineType; // machine type to which message applies
            public short Offset; // offset of alarm (error #)
            public string Text; // message
            ...

        }

        public class WarningMessage {
            MachineType MachineType; // machine type to which message applies
            public short Offset; // offset of warning (error #)
            public string Text; // message
            ...

        }

    }

    class MachineAlarm {
        Machine Machine;
        AlarmMessage Message;
        DateTime Timestamp;
        bool Active;
        ...
    }

    class MachineWarning {
        Machine Machine;
        WarningMessage Message;
        DateTime Timestamp;
        bool Active;
        ...
    }

} 
```

现在的问题是我应该如何根据选择的返回类型实现 GetAlarms() 和 GetWarnings()`Machine`的返回类型，我的嵌套是否正确（另请参见[https://stackoverflow.com/a/7402906/1085457](https://stackoverflow.com/a/7402906/1085457)） . 我需要在数据模型之外的实际响应是警报或警告的文本​​表示以及开始和结束（如果设置）时间。

我也不确定在警报中使用“活动”属性是否过于复杂，但现在它实际上用于对警告和警报进行时间线概览。

我希望你们中的一位大师能告诉我这种嵌套是否正确，是否可以通过添加两个与该类处于同一级别的`Machine`类来完成，或者我是否应该完全更改结构并返回带有警报的数据访问对象和警告。

# jquery - Webkit 中的 TinyMCE 编辑器高度（自动调整大小插件）

> ID：10244349
> 
> 赞同：1
> 
> 时间：2012-04-20T10:18:43.900
> 
> 标签：jquery, tinymce, text-editor

我在我的页面上使用 TinyMCE 脚本。我在页面上有几个编辑器，除了基于 webkit 的浏览器中实际文本容器的高度之外，一切都运行良好。基本上，高度设置为 34 像素，并且文本容器仅在我聚焦它并按下任何键时才会扩展（到它的假定高度）。

显然[之前 webkit](http://www.tinymce.com/develop/bugtracker_view.php?id=4620)的高度存在问题，但我仍然发现它有问题。

有谁知道在 webkit 上加载页面后如何获取文本容器的高度（基本上它应该像在 Firefox 下一样）？

PS：我使用的是 3.5b1 版本

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:23:51.460

我在使用 Chrome、tinyMCE 3.5.6 和 autoresize 插件时遇到了类似的问题。有帮助的是在[`init_instance_callback`](http://www.tinymce.com/wiki.php/Configuration:init_instance_callback).

您可以在我对类似问题的[回答](https://stackoverflow.com/a/12382834/1062304)中找到一个示例。

# objective-c - UITextField：从标签中设置文本

> ID：10244350
> 
> 赞同：1
> 
> 时间：2012-04-20T10:18:48.140
> 
> 标签：objective-c, xcode4, uitextfield, iboutlet

我正在尝试使用 Xcode 4 编写我的第一个 iPad 应用程序：它基于具有两个视图的“选项卡式应用程序”模板。在第一个视图中，用户选择了一个城市（标签显示选择），在第二个视图中，有一个 IBOutletCollection(UITextField) NSArray *playersData。我想将第一个视图中选择的城市设置为第二个视图中的默认城市。我检查了故事板连接，它们似乎没问题。

我什么都得不到。任何想法？

第一个视图：
#import

```
@interface pruebaF1FirstViewController : UIViewController
- (IBAction)selectCity:(UIButton *)sender;
@property (weak, nonatomic) IBOutlet UILabel *citySelected;
@end 
```

第一个视图实现：#import "pruebaF1FirstViewController.h" #import "pruebaF1SecondViewController.h"

```
@interface pruebaF1FirstViewController ()
@property pruebaF1SecondViewController *secondView;
@end

@implementation pruebaF1FirstViewController
@synthesize citySelected;
@synthesize secondView;

- (void)viewDidLoad
...

- (IBAction)selectCity:(UIButton *)sender {
    NSString *currentCity =[sender currentTitle];
    citySelected.text=@"";
    citySelected.text =[citySelected.text stringByAppendingString:currentCity];

    /*writes null*/
    secondView.defaultCity.text=[NSString stringWithFormat:@"%@" ,currentCity];
    NSLog(@"%@",secondView.defaultCity.text);
}
@end 
```

第二个视图标题

```
#import <UIKit/UIKit.h>
@interface pruebaF1SecondViewController : UIViewController <UITextFieldDelegate> 

@property (strong, nonatomic) IBOutletCollection(UITextField) NSArray *playersData;
@property (retain, nonatomic) IBOutlet UITextField *defaultCity;

- (IBAction)eraseData:(UIButton *)sender;
- (IBAction)savePlayersData:(UIButton *)sender;

- (IBAction)termsPopUp:(UIButton *)sender;

/*- (void)writeDefaultCity:(NSString *)currentCity;*/
@end 
```

第二个视图实现 #import "pruebaF1SecondViewController.h" #import "pruebaF1FirstViewController.h"

```
@interface pruebaF1SecondViewController ()
@property (nonatomic, strong)pruebaF1FirstViewController    *prueba;
@end

@implementation pruebaF1SecondViewController
@synthesize playersData;
@synthesize defaultCity;
@synthesize prueba;

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [self setPlayersData:nil];
    [self setDefaultCity:nil];
    [super viewDidUnload];
}

/* Return or Done button dismiss keyboard*/
-(BOOL)textFieldShouldReturn:(UITextField *)boxes
{
    for (UITextField *boxes in playersData) {
        [boxes resignFirstResponder];
    }
    return YES;
}

....

/*Trying to get city's name from first view in two ways*/

/*-(void)setDefaultCity
{ 
 NSString *defecto=prueba.citySelected.text;
 self.defaultCity.text = defecto;
}*/
- (IBAction)eraseData:(UIButton *)sender {

    for (UITextField *boxes in playersData) {
        boxes.text = @" ";
        }
}
/*
-(void)writeDefaultCity:(NSString *)currentCity
{       
    defaultCity.text =[NSString stringWithFormat:@"%@" ,currentCity]; 
    NSLog(@"Ciudad elegida: %@",currentCity);
}*/
....
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:23:58.523

视图通常在它们显示在设备上之前不会加载，并且可以在不可见时随时卸载以节省内存。这意味着当您设置“defaultCity”的“text”属性时，该标签尚未创建。

相反，您应该将 NSString * 属性添加到 pruebaF1SecondViewController 并在 viewDidLoad 中设置 defaultCity 标签的值：

在标题中：

```
@property (nonatomic, weak) UILabel *defaultCityLabel;
@property (nonatomic, strong) NSString *defaultCity; 
```

在实施中

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    defaultCityLabel.text = defaultCity;
} 
```

在第一个视图控制器中，分配字符串值而不是标签值。

# android - 从相机拍照会产生空指针异常

> ID：10244355
> 
> 赞同：0
> 
> 时间：2012-04-20T10:19:11.653
> 
> 标签：android, camera, android-camera

这是我的代码：

```
 String _path = Environment.getExternalStorageDirectory() + File.separator +  "temp.jpg";
                           File file = new File( _path );
                           Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);             
                           Uri pictureUri = Uri.fromFile(file);
                           cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, pictureUri);
                           startActivityForResult(cameraIntent, CAMERA_REQUEST);

protected void onActivityResult(int requestCode, int resultCode, Intent data) {       
            switch(requestCode){
                case CAMERA_REQUEST:{
                    Bitmap bmp = (Bitmap) data.getExtras().get("data"); 
```

我在清单中添加了：

```
<uses-permission android:name="android.permission.CAMERA" />
 <uses-feature android:name="android.hardware.camera" />
 <uses-feature android:name="android.hardware.camera.autofocus" /> 
```

我究竟做错了什么？我首先想要的是保存图像？

日志猫：

```
04-20 10:08:38.547: E/AndroidRuntime(219): Uncaught handler: thread main exiting due to uncaught exception
04-20 10:08:38.557: E/AndroidRuntime(219): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1888, result=-1, data=null} to activity {com.vimateam.android.bestgreekbeaches/com.vimateam.android.bestgreekbeaches.Gallery1}: java.lang.NullPointerException
04-20 10:08:38.557: E/AndroidRuntime(219):  at android.app.ActivityThread.deliverResults(ActivityThread.java:3329)
04-20 10:08:38.557: E/AndroidRuntime(219):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:3371)
04-20 10:08:38.557: E/AndroidRuntime(219):  at android.app.ActivityThread.access$2700(ActivityThread.java:119)
04-20 10:08:38.557: E/AndroidRuntime(219):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1893)
04-20 10:08:38.557: E/AndroidRuntime(219):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 10:08:38.557: E/AndroidRuntime(219):  at android.os.Looper.loop(Looper.java:123)
04-20 10:08:38.557: E/AndroidRuntime(219):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-20 10:08:38.557: E/AndroidRuntime(219):  at java.lang.reflect.Method.invokeNative(Native Method)
04-20 10:08:38.557: E/AndroidRuntime(219):  at java.lang.reflect.Method.invoke(Method.java:521)
04-20 10:08:38.557: E/AndroidRuntime(219):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-20 10:08:38.557: E/AndroidRuntime(219):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-20 10:08:38.557: E/AndroidRuntime(219):  at dalvik.system.NativeStart.main(Native Method)
04-20 10:08:38.557: E/AndroidRuntime(219): Caused by: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:51:30.333

当您启动 Acitivty 时，您正在获取数据部分 null bez 您未设置`intent.setDataAndType()`。如果您想获取数据，`Bitmap` 则启动 camra 活动：

```
public static final String IMAGE_UNSPECIFIED = "image/*"; 
    Intent intent = new Intent(Intent.ACTION_PICK, null);  
    intent.setDataAndType(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, IMAGE_UNSPECIFIED);  
    startActivityForResult(intent, 3);  

    protected void onActivityResult(int requestCode, int resultCode, Intent data) { 
    if (resultCode == 0)  
       return; 
    if (requestCode == 2) {  
       Uri uri=data.getData();  //YOU GET DATA HERE
        }  
//OR
if (requestCode == 3) {  
 Bundle extras = data.getExtras();  
 if (extras != null) {  
 Bitmap photo = extras.getParcelable("data");  
 ByteArrayOutputStream stream = new ByteArrayOutputStream();  
 photo.compress(Bitmap.CompressFormat.JPEG, 75, stream);// (0 - 100)????  
 imageView.setImageBitmap(photo);  
  }  
} 
```

或者在您的情况下获取图像路径使用：

```
if (requestCode == CAMERA_REQUEST) {  
     //pic path
      File picture = new File(Environment.getExternalStorageDirectory() + "/temp.jpg");  
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:13:41.900

这是相机的代码并将图像保存到 sdcard：

```
private static final int CAMERA_REQUEST = 1888;  
    buttonTakePicture.setOnClickListener(new Button.OnClickListener() {
                @Override
                public void onClick(View arg0) {
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    intent.putExtra(MediaStore.EXTRA_OUTPUT, getImageUri());

    startActivityForResult(intent, CAMERA_REQUEST);
                    }
            });

    @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);

            if (requestCode == CAMERA_REQUEST) {
                    photo = (Bitmap) data.getExtras().get("data");
                }
    }

    private Uri getImageUri() {

            File file1 = new File(Environment.getExternalStorageDirectory() + "/Camerafolder");
            if (!file1.exists())
            {
                file1.mkdirs();
            }

            File file = new File(Environment.getExternalStorageDirectory() + "/Camerafolder/"+"img"+".png");

    Uri imgUri = Uri.fromFile(file);

            return imgUri;
        } 
```

# php - 在 MySQL 数据库中处理地理数据/多边形

> ID：10244357
> 
> 赞同：1
> 
> 时间：2012-04-20T10:19:16.513
> 
> 标签：php, mysql, geospatial

我有一个包含`zoneShape`类型字段的表`Polygon`。

在此字段中插入一些几何图形时，在 phpmyadmin 中它说：影响 1 行。该行已添加，但几何字段显示其大小为 0B。

这是插入代码：

```
SET @g = 'POLYGON(50.866753 5.686455, 50.859819 5.708942, 50.851475 5.722675, 50.841611 5.720615, 50.834023 5.708427, 50.840744 5.689373, 50.858735 5.673923, 50.866753 5.686455)';
INSERT INTO zone SET zoneShape = PolygonFromText(@g) 
```

如你看到的; 第一个点和最后一个点相同，所以多边形是闭合的。

谁能帮我将此多边形添加到数据库中？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:09:55.257

事实证明，您需要在 Points 周围添加一些额外的括号；因为该标准使用外线和内线，即孔或岛。

所以：

```
SET @g = 'POLYGON((50.866753 5.686455, 50.859819 5.708942, 50.851475 5.722675, 50.841611 5.720615, 50.834023 5.708427, 50.840744 5.689373, 50.858735 5.673923, 50.866753 5.686455))';
                  ^                                                                                              outside                                                         ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:54:21.300

`INSERT INTO zone SET zoneShape = PolygonFromText(@g)`在我看来，这不是一个有效的 INSERT 语句。你的意思是`INSERT INTO zone (zoneShape) VALUES (PolygonFromText(@g));`？

# wpf - 组合框空引用异常上的 Selecteditem

> ID：10244358
> 
> 赞同：0
> 
> 时间：2012-04-20T10:19:20.283
> 
> 标签：wpf, binding, mvvm, selecteditem, selectionchanged

我想使用 SelectedItem 将选择设置为代码中的组合框。我只能通过使用 SelectedValue 让它工作。SelectedItem 将在堆栈跟踪的顶部抛出一个空引用异常：

*在 AttachedCommandBehavior.CommandBehaviorBinding.Execute()*

XAML：

```
<Window x:Class="MainWindowView"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:acb="clr-namespace:AttachedCommandBehavior;assembly=AttachedCommandBehavior"
Title="Window1" Height="300" Width="300">
<StackPanel>
    <ComboBox Name="ComboItems1"
              DisplayMemberPath="Value" 
              SelectedValuePath="Key"
              ItemsSource="{Binding Items}" 
              SelectedValue="{Binding SelectedValue}" 
              acb:CommandBehavior.Event="SelectionChanged" 
              acb:CommandBehavior.Command="{Binding Path=SelectionChangedCommand}" 
              acb:CommandBehavior.CommandParameter="{Binding ElementName=ComboItems1, Path=SelectedItem}" />

    <ComboBox Name="ComboItems2"
              DisplayMemberPath="Value" 
              SelectedValuePath="Key"
              ItemsSource="{Binding Items}" 
              SelectedItem="{Binding SelectedItem}" 
              acb:CommandBehavior.Event="SelectionChanged" 
              acb:CommandBehavior.Command="{Binding Path=SelectionChangedCommand}" 
              acb:CommandBehavior.CommandParameter="{Binding ElementName=ComboItems2, Path=SelectedItem}"/>
</StackPanel> 
```

编码：

```
Imports AttachedCommandBehavior 
```

公共类 MainWindowViewModel

```
Private _mainWindowView As MainWindowView

Public Property Items As New List(Of KeyValuePair(Of Integer, String))
Public Property SelectedItem As Nullable(Of KeyValuePair(Of Integer, String))
Public Property SelectedValue As Nullable(Of Integer)
Public Property SelectionChangedCommand As ICommand

Public Sub New()

    Items.Add(New KeyValuePair(Of Integer, String)(1, "first item"))
    Items.Add(New KeyValuePair(Of Integer, String)(2, "second item"))
    Items.Add(New KeyValuePair(Of Integer, String)(3, "third item"))

    Dim simpleCommand As SimpleCommand = New SimpleCommand()
    simpleCommand.ExecuteDelegate = Sub(selectedItem As Object)
                                        HandleSelectionChanged(selectedItem)
                                    End Sub
    SelectionChangedCommand = simpleCommand

    SelectedValue = 1
    'SelectedItem = Items(1) 'uncomment this to raise the null ref exception

End Sub

Private Sub HandleSelectionChanged(ByRef selectedItem As Object)
    If selectedItem IsNot Nothing Then
        'Do something
    End If
End Sub 
```

结束类

为什么选择项不起作用？

**更新：**

尼古拉：你的眼光很敏锐。那是由于最后一分钟的复制粘贴工作！

Blindmeis：当然，这是一个更大的程序的摘要，在该程序中我需要 selectionchanged 事件来执行一些操作。这些命令绑定必须保留（尽管它们可能需要一些修复）。

问候，

米歇尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:39:47.297

为什么你有这些命令绑定？

```
 <ComboBox 
          DisplayMemberPath="Value" 
          SelectedValuePath="Key"
          ItemsSource="{Binding Items}" 
          SelectedItem="{Binding SelectedItem}" /> 
```

视图模型

```
 //this select the "third item" in your combobox
    SelectedItem = Items[2];/dont know the vb indexer stuff ;) 
```

这行得通。

编辑：

视图模型

```
 public KeyValuePair<int, string> SelectedItem
     {
        get{return this._selectedItem;}
        set{

           if(this._selectedItem==value)
               return;//no selection change

           //if you got here then there was a selection change
           this._selectedItem=value;
           this.OnPropertyChanged("SelectedItem");
           //do all action you want here
           //and you do not need selection changed event commmandbinding stuff

         }
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:39:36.467

```
acb:CommandBehavior.CommandParameter="{Binding ElementName=ComboItems, Path=SelectedItem}" 
```

您没有名称为 ComboItems 的元素，您有 ComboItems1 和 ComboItems2。我认为这是问题所在。

# javascript - 第二个 TinyMCE 不可点击

> ID：10244359
> 
> 赞同：0
> 
> 时间：2012-04-20T10:19:30.990
> 
> 标签：javascript, django, tinymce

我的 Django 站点的模板中有 2 个 TinyMCE 文本框。然而，第一个 TinyMCE 编辑器工作正常，但第二个不允许我点击里面。当您查看 HTML 时，您可以看到其中的文本，并且您可以通过 HTML 进行编辑。它也适用于 FF3（尚未测试每个版本）

我在网上搜索过，似乎找不到任何东西。

# iphone - UIScrollView：如何一次滚动一页

> ID：10244360
> 
> 赞同：2
> 
> 时间：2012-04-20T10:19:32.043
> 
> 标签：iphone, objective-c, uiscrollview, scroll, paging

我制作了一个可以水平滚动的滚动视图。我面临的问题是我希望用户一次只滚动一页，但此刻用户并滚动模拟器上的滚动视图并滚动两页。

有谁知道如何让滚动视图一次只滚动一页？目前我启用了寻呼功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:46:29.117

假设您必须在数组中显示一些图像。

```
[yourScroll setContentSize CGSizeMake( [arrayImages count]*320 , 420)];
[yourScroll setPagingEnabled : YES];
int incX = 0 ;

for( int i = 0; i < [arrayImages count]; i++)
{
  UIImageView *imgView = [[UIImageView alloc]initWithFrame : CGRectMake(0,0,320,420)];
  UIView *myView = [UIView alloc]initWithFrame : CGRectMake (incX,0,320,420);
  imgView.image = [UIImage imageNamed:[NSString stringWithFormat:@"%@",[arrayImages objectAtIndex : i]]];
  [myView addSubView : imgView];  
  [yourScroll addSubView : myView];
   incX+= 320;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:26:25.627

例如：

```
- (IBAction)changePage:(id)sender 
{        
    NSInteger _currentPage = self.pageControl.currentPage;
    CGPoint offset = CGPointMake(_currentPage * self.scrollView.frame.size.width, 0);
    [self.scrollView setContentOffset:offset animated:YES];
    pageControlUsed = YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:27:06.223

你一定做错了什么。如果您启用了分页，它将自动与页面对齐（其中页面大小是滚动视图框架的大小）。也许您正在某处以编程方式分页（如果 pagingEnabled 为 true，则不需要）。

没有代码不能说更多

# php - 如何在最新消息 joomla 中添加图像

> ID：10244361
> 
> 赞同：0
> 
> 时间：2012-04-20T10:19:49.893
> 
> 标签：php, database, joomla, joomla1.7

我需要将文章的图像和文本分开，问题是它们在数据库的一个字段中，那么我怎样才能在视图中将图像与文本分开？因为我不能把图像和文字放在一起，一团糟

```
<? foreach ($list as $item) :  ?>

                    <?

                        $year = date('Y', strtotime($item->created));
                        $month = date('m', strtotime($item->created));
                        $day = date('d', strtotime($item->created));

                        $shortDescription = cutString($item->introtext, 100);

                    ?>
                    <div class="footerItem">
                    <?= $day; ?>-<?= $month; ?>-<?= $year; ?>
                    <p><a href="<?= $item->link; ?>"><?= $item->title; ?></a></p>
                    <p>
                    <?= $shortDescription; ?>
                    </p>
                    </div>
<?php endforeach; ?> 
```

所以我需要像这样 $item->image 放置图像 - 这就是我想要的，但是在 joomla latestnews_mod 中，没有图像字段，我不知道是否需要自己编写或编辑这个模块，或者我需要为此使用其他模块？而且我无法获得我需要的字段 $item->category，只有 CAT_ID，我怎样才能获得类别字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:49:44.523

我与 Joomla 有点失去联系，所以这完全有可能不是最简单的方法，但是如果没有特别给出，你可以使用正则表达式从介绍文本中提取图像吗？

你需要一个类似的模式： `<img\b[^>]+?src\s*=\s*['"]?([^\s'"?#>]+)`

这取自这个问题：[Regex to find the first image in an image tag in an HTML document](https://stackoverflow.com/questions/6613178/regex-to-find-the-first-image-in-an-image-tag-in-an-html-document)

编辑：使用示例`preg_match`：

```
<?php
  // This is the Regex pattern from above.
  $pattern = '/<img\b[^>]+?src\s*=\s*[\'"]?([^\s\'"?#>]+)/'; 

  // Perform the search, matches will be stored in $matches
  preg_match($pattern, $item->introtext, $matches ); 

  echo "Image src is: " . $matches[1] . "\n";
?> 
```

请注意，这是相对未经测试的，可能不起作用，如果起作用，可能会错过标记错误的案例！

# iphone - 隐藏按钮直到最后填充图像视图

> ID：10244365
> 
> 赞同：2
> 
> 时间：2012-04-20T10:20:04.020
> 
> 标签：iphone, ios, xcode, button, hide

您好，我想要一个隐藏按钮，直到我的最后一个图像视图被填满。

这是我的代码，但它不起作用有人可以告诉我为什么

```
if (imageview6.image == nil)

{
play.hidden=TRUE;
} 
```

如果我做

```
if (imageview6.image == nil)

{
[play.hidden=TRUE];
} 
```

它给了我“预期的标识符”

希望有人知道再见

**编辑我做了什么**：

我设置 play.enabled=YES; 在这段代码中：

```
- (void)setImage:(UIImage *)image {
if (imageview1.image == nil) {
    [imageview1 setImage:image];
} else if (imageview2.image == nil){
    [imageview2 setImage:image];
} else if (imageview3.image == nil){
    [imageview3 setImage:image];
} else if (imageview4.image == nil){
    [imageview4 setImage:image];
} else if (imageview5.image == nil){
    [imageview5 setImage:image];
} else if (imageview6.image == nil){
    play.enabled=YES;
    [imageview6 setImage:image];
} 
} 
```

在 ViewDidLoad 部分：

```
play.enabled=NO; 
```

希望我也帮助过其他人:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:23:28.977

```
[Play setHidden:YES];

//or

 Play.hidden=YES; 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:41:00.670

使用：[播放 setHidden:YES]；
//或
Play.hidden=YES;

**经验法则：** : BOOL - 是/否。布尔 - 真/假。希望它对你有帮助。
:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T10:23:39.720

```
play.hidden= YES; //to hide 
play.enabled= YES; // to prevent the action 
```

你需要设置隐藏是/否

# macos - OS X：.app 包中的 shell 脚本应该接受丢弃的文件或目录

> ID：10244368
> 
> 赞同：1
> 
> 时间：2012-04-20T10:20:19.460
> 
> 标签：macos, command-line-arguments

我正在使用一个 shell 脚本来启动我的 (Java) 应用程序包装在一个`.app`包中。当我尝试将文件或目录拖放到 Finder 中未运行的应用程序的应用程序图标上时，它们将被复制到此目录中，而不是使用这些作为命令行参数启动应用程序。

我必须添加一些“魔术”条目`Info.plist`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:56:10.627

我已经让应用程序接受删除的文件（.MOV），但我无法将文件名作为我的脚本的参数......（（

```
ffmpeg.app/Contents/Info.plist
ffmpeg.app/Contents/MacOS/ffmpeg
ffmpeg.app/Contents/Resources/ffmpeg.icns 
```

ffmpeg 是一个简单的脚本，以`#!/bin/sh`

信息列表：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleDevelopmentRegion</key>
    <string>Russian</string>
    <key>CFBundleExecutable</key>
    <string>ffmpeg</string>
    <key>CFBundleName</key>
    <string>ffmpeg</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>CFBundleIconFile</key>
    <string>ffmpeg.icns</string>
    <key>CFBundleDocumentTypes</key>
    <array>
        <dict>
            <key>CFBundleTypeExtensions</key>
            <array>
                <string>mov</string>
            </array>
            <key>CFBundleTypeRole</key>
            <string>Converter</string>
            <key>LSTypeIsPackage</key>
            <false/>
        </dict>
    </array>
    <key>CFBundleShortVersionString</key>
    <string>1.0.0</string>
</dict>
</plist> 
```

我对 CFBundleTypeRole 一无所知，但我的 ffmpeg.app 接受丢弃的 .MOVs

# php - PHP中的自动处理

> ID：10244369
> 
> 赞同：-1
> 
> 时间：2012-04-20T10:20:29.507
> 
> 标签：php, process

我正在使用 PHP。我有一个表格。每次用户提交该表单时，我想先将这些数据保存到数据库（为用户节省时间），然后再处理这些数据。但我不知道如何自动处理这些数据。每次在数据库中有新记录时，任何代码都可以在服务器中自动处理以自动处理这些数据？你明白我的问题了吗？有什么建议么？先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:26:32.110

您可以使用在数据更改时触发的“存储的例程”，请参阅：

[http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html](http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html)

或者，稍微不那么优雅，使用 cronjob 启动每个设定的时间量，并在数据库上有一个“已处理”标志，允许脚本知道它已经处理了哪些记录以及它没有处理哪些记录并采取相应的行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:36:15.717

您可能正在寻找触发器[http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

# linux - linux dlopen 在进程中调用 dlopen() 时，我可以在我的库中收到通知吗？

> ID：10244375
> 
> 赞同：1
> 
> 时间：2012-04-20T10:20:50.600
> 
> 标签：linux, process, wrapper, dlopen

每当任何新库从同一进程中的任何其他库加载时，我可以在进程中的库中获取通知吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:25:18.290

构建一个插入的[库插入](http://developers.sun.com/solaris/articles/lib_interposers.html)器`dlopen()`。

> 使用动态链接，您可以拦截应用程序对任何共享库进行的任何函数调用。一旦你拦截了它，你就可以在那个函数中做任何你想做的事情，以及调用应用程序最初打算调用的真实函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-19T12:34:12.093

查看 rtld-audit - 动态链接器的审核 API。

[http://man7.org/linux/man-pages/man7/rtld-audit.7.html](http://man7.org/linux/man-pages/man7/rtld-audit.7.html)

您应该构建一个具有特定功能的共享库，并且应该通知您不同的事件。拥有库后，您需要将 LD_AUDIT 设置为共享库。

# ios5 - 文本字段中的数据消失

> ID：10244380
> 
> 赞同：0
> 
> 时间：2012-04-20T10:21:09.367
> 
> 标签：ios5, uitextfield, xcode4.3

我有一个视图控制器，可以推送到同一类的另一个页面。一旦我离开新页面，输入到新页面文本字段中的所有数据都会消失。我假设我在某处错过了一步？

我是否必须将页面中的某些内容连接到我的原始视图控制器？

否则我将以这个速度有一页长。

代码 4.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:17:25.250

我想我明白你在说什么。您有一个调用另一个屏幕的屏幕。您调用新屏幕并在该新屏幕上输入数据，然后导航回原始屏幕。然后你再次调用第二个屏幕，数据现在丢失了。

每次调用屏幕时，您都会创建一个新的 UIViewController（或该类的子类）对象。它只知道你在创建它时和之后告诉它的内容。当您导航回原始屏幕时，新屏幕的视图控制器将被销毁并且其中的所有数据，除非您将数据存储回“模型”（MVC）或原始屏幕中。因此，如果您需要让新屏幕显示之前输入的数据，您需要将该信息存储在应用程序的“模型”或调用它的屏幕中。然后，当您调用新屏幕时，将存储的数据“推”回其中。

如果您不熟悉 Apple 的模型-视图-控制器模式中的“模型”，这里是一个很好的参考。 [苹果MVC](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW1)

希望这可以帮助

# xml - 仅具有不序列化为 XML 的 getter 的属性

> ID：10244382
> 
> 赞同：1
> 
> 时间：2012-04-20T10:21:25.870
> 
> 标签：xml, asp.net-mvc-3, xml-serialization, mvccontrib

我有一个类（称为 pubs），其中一些成员定义如下

```
public string Publisher { get { return PUBLISHER; } }
public string PublisherUrl { get { return PUBLISHER_URL; } }
public DateTime LastBuildDate { get; set; } 
```

现在，这个类的一个对象被序列化并作为 XMLResult 返回。但是，Publisher 和 PublisherUrl 属性不是 XML 的一部分。

这是在我的控制器的方法中完成的，它返回一个 XMLResult（我正在使用 MvcContrib），如下所示

```
return XMlResult(pubs) 
```

为什么 Publisher 和 PublisherUrl 属性不会出现在 XML 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T09:53:15.593

XmlSerializer 仅处理同时具有公共 getter 和公共 setter 的公共属性

# c# - SqlCommand.ExecuteScalar 取消

> ID：10244392
> 
> 赞同：0
> 
> 时间：2012-04-20T10:22:22.280
> 
> 标签：c#, .net, sql-server-2008, asynchronous, ado.net

有什么方法可以`SqlCommand.ExecuteScalar()`异步运行，然后在执行时取消它（在服务器端也是如此）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:48:42.240

.NET Framework 4.5 有一个 ExecuteScalarAsync() 方法。
见这里： http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalarasync (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalarasync(v=vs.110).aspx)

ExecuteScalarAsync() 还具有带有 CancellationToken 参数的重载，可用于在命令超时过去之前放弃操作。

# caching - 防止 IE8 的同意缓存

> ID：10244394
> 
> 赞同：1
> 
> 时间：2012-04-20T10:22:37.273
> 
> 标签：caching, internet-explorer-8

我对 IE8 及其缓存行为有疑问。

如果我点击页面 index.html 然后继续再次点击它，我会从服务器获得一个页面。

但是，如果我点击页面 index.html?ui=v2 然后 index.html 然后 index.html?ui=v2 我会从缓存中获得页面。

问题是查询字符串 ui=v2 用于设置一个 cookie，该 cookie 决定了要交付的视图。由于页面来自缓存，cookie 视图模式没有更新，并且我得到的内容与 index.html 显示的内容相同（没有查询字符串）。

这是IE8及以下，没有其他浏览器。

热衷于任何输入理想情况下，我不想更新元或响应标头。

在此先感谢

# ios - Objective-C 块和数据执行

> ID：10244395
> 
> 赞同：2
> 
> 时间：2012-04-20T10:22:41.547
> 
> 标签：ios, objective-c-blocks

当我阅读苹果 iOS 开发者指南时，它向我解释了一些关于使用 Blocks（与 GCD 一起使用）的信息。它应该将一些“代码片段”传递给一个objective-c对象，并将其传递给另一个线程，以便它可以在那里执行。不会利用这种极易感染病毒之类的东西吗？（数据执行）。还是我在这里遗漏了一些要点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:26:00.860

不——您可以将此“代码片段”视为在您的函数（方法……）中声明的已编译、私有、隐藏函数。IOW，它与二进制文件中的任何编译函数一样危险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T10:26:36.883

即使您使用`^blocks`，您的代码仍然是预编译的。我想说它并不比其他“弱链接”objective-c 的东西更脆弱。

更多的`^block`是在编译器/预编译器阶段。我会说生成的二进制文件看起来没有太大的不同（从安全角度来看）然后没有块。

# asp.net - ASP.Net 使用 Response.Write 在 excel 中创建多个工作表

> ID：10244396
> 
> 赞同：-1
> 
> 时间：2012-04-20T10:22:44.730
> 
> 标签：asp.net

我通常使用 Response.Write 将我的报告导出到 Excel 文件。

例如

```
Response.Clear();
Response.Buffer = true;
Response.AddHeader("content-disposition", "attachment; filename=MyFile.xls");
Response.ContentType = "application/vnd.ms-excel";
Response.Write("<meta http-equiv=Content-Type content=text/html;charset=UTF-8>");
Response.Write("<table>");
Response.Write("<tr>");
Response.Write("<td>");
Response.Write("Hello");
Response.Write("</td>");
Response.Write("</tr>");
Response.Write("</table>");
Response.End(); 
```

现在我想导出一个包含多张工作表的 excel 文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:32:15.443

从技术上讲，这不是导出到 excel，而是您发送带有错误标题的 html 以欺骗浏览器以使用 excel 打开此内容。

更好地使用[NPOI](http://npoi.codeplex.com/) (xls) 或/和[EPPlus](http://epplus.codeplex.com/) (xlsx) 并完全控制您的 Excel 导出，然后您可以创建新工作表等。

更新：在这个 SO 答案中，您可以看到 ashx 处理程序的示例，该处理程序返回从 DataTable 创建的 excel 文件：

[C# 创建/修改/读取 .xlsx 文件](https://stackoverflow.com/questions/9569401/c-sharp-create-modify-read-xlsx-files/9569827#9569827)

# mysql - MySQL 触发器更新其他表

> ID：10244400
> 
> 赞同：1
> 
> 时间：2012-04-20T10:22:55.893
> 
> 标签：mysql

请有人帮助我。

我正在尝试创建一个触发器，当 table1 更新时 table2 也将被更新。

请检查。

```
CREATE TRIGGER up_trig
AFTER UPDATE ON table1
FOR EACH ROW
begin
update table2
set name2 = name1
where name2 <> name1
and id2 = id1;

end 
```

我真的需要这个请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:24:58.473

不要忘记分隔符和`;`结尾之后：

```
delimiter |

CREATE TRIGGER up_trig
AFTER UPDATE ON table1
FOR EACH ROW
begin
   update table2
   set name2 = NEW.name1
   where name2 <> NEW.name1
   and id2 = NEW.id1;
end;

| 
```

# xml - 在未指定出现顺序时处理 XSLT 中的子标记

> ID：10244408
> 
> 赞同：2
> 
> 时间：2012-04-20T10:23:20.793
> 
> 标签：xml, xslt, xpath, xslt-grouping

我正在研究 XSLT 转换。我有一个源文件，其中有一些名为 tag 的标签。

考虑我的源 xml 是这样的。

```
<ABC>
    <Name>Some Name </Name>
    <ID>Some ID</ID>
    <Address>Some Address</Address>
    <Place>Some Place</Place>
    <ID>Some ID</ID>
    <Name>Some Name </Name>
    <Name>Some Name </Name>     

</ABC> 
```

规则：

```
 ABC is parent Tag which has 4 child tags. Name, ID, Address, Place. 
  These child tags can occur many times and in any ordrer.
  Upon reading the tag , I want to change the name of the tag, and do some processing on the value present in the tag.
  The input XML may have child tags in any order, and many times.
  I want to write a common XSLT which will read the child tags in the order in which they occur, and display them as given under. 
```

我想像这样显示输出。

```
 <Frame:Name>
                   <text>Some Name</text>
        </Frame:Name>
   <Frame:ID>
                   <text>Some ID</text>
        </Frame:ID>
        <Frame:ADdrress>
                   <text>Some Address</text>
        </Frame:Address>
        <Frame:Place>
                   <text>Some Place</text>
        </Frame:Place>
   <Frame:ID>
                   <text>Some ID</text>
        </Frame:ID>
       <Frame:Name>
                   <text>Some Name</text>
        </Frame:Name>
       <Frame:Name>
                   <text>Some Name</text>
        </Frame:Name> 
```

我完全震惊了它是如何做到的。

如果源 XML 中子元素的出现顺序发生变化，它也应该反映在输出 XML 中。

有人可以分享评论吗。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:33:15.827

**解决此类问题的 XSLT 方法是使用模板。结果是更简单、更短且易于理解的代码，通常没有任何`xsl:choose`, `xsl:when`, `xsl:otherwise`,`xsl:if`或`xsl:for-each`:**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:Frame="some:undefined namespace">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
   <t><xsl:apply-templates/></t>
 </xsl:template>

 <xsl:template match="*/*">
     <xsl:element name="Frame:{name()}" namespace="some:undefined namespace">
       <text><xsl:apply-templates /></text>
     </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<ABC>
    <Name>Some Name </Name>
    <ID>Some ID</ID>
    <Address>Some Address</Address>
    <Place>Some Place</Place>
    <ID>Some ID</ID>
    <Name>Some Name </Name>
    <Name>Some Name </Name>
</ABC> 
```

**产生了想要的正确结果**：

```
<t xmlns:Frame="some:undefined namespace">
   <Frame:Name>
      <text>Some Name </text>
   </Frame:Name>
   <Frame:ID>
      <text>Some ID</text>
   </Frame:ID>
   <Frame:Address>
      <text>Some Address</text>
   </Frame:Address>
   <Frame:Place>
      <text>Some Place</text>
   </Frame:Place>
   <Frame:ID>
      <text>Some ID</text>
   </Frame:ID>
   <Frame:Name>
      <text>Some Name </text>
   </Frame:Name>
   <Frame:Name>
      <text>Some Name </text>
   </Frame:Name>
</t> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:19:11.687

根据jeevan的建议。

```
 <xsl:template match="ABC" >
    <ABC>
        <xsl:for-each select ="child::*">
        <xsl:choose>
          <xsl:when test="name()='Name'">
            <xsl:element name="Frame:Name">
              <xsl:apply-templates  select="."/>
           </xsl:element>
          </xsl:when>

          <xsl:when test="name()='ID'">
            <Frame:ID>
              <xsl:apply-templates select="."/>
            </Frame:ID>
          </xsl:when>
            <xsl:when test="name()='Address'">
            <Frame:Address>
              <xsl:apply-templates select="."/>
            </Frame:Address>
          </xsl:when>

          <xsl:when test="name()='Place'">
            <Frame:Place>
              <xsl:apply-templates select="."/>
            </Frame:Place>
          </xsl:when>
     </xsl:choose>
      </xsl:for-each> 
```

# wpf - WPF DataGrid 自定义排序：重新排序 ItemsSource 中的项目

> ID：10244409
> 
> 赞同：0
> 
> 时间：2012-04-20T10:23:23.363
> 
> 标签：wpf, sorting, datagrid, datatable, dataview

我有我的自定义网格，它继承自`DataGrid`（来自 WPFToolkit），其中包含大约 10000 个项目。内置排序非常慢。因此，我编写了一个单独的类，该类保持`DataRowView`每列的所有项目的运行排序（这是有效的，因为从网格中添加和删除非常罕见，如果有的话）。

网格具有`AutoGenerateColumns='True'`并绑定到`DefaultView`a 的`DataTable`。

我覆盖`OnSorting`以知道何时单击列标题并尝试`ItemsSource`用我的 DataRowView 排序列表替换网格。下面是方法：

```
 private void RefreshItems()
    {
        if (_updating || _multiIndexer.Count == 0)
            return;

        try
        {
            _updating = true;
            this.AutoGenerateColumns = false;

            // replace the itemssource with my maintained and sorted list of 
            // DataRowView items
            this.ItemsSource = _multiIndexer.ToList();
        }
        finally
        {
            //this.AutoGenerateColumns = true;
            _updating = false;
        }
    } 
```

问题是我破坏了自动生成中存在的列。此外，我只剩下与`DataRowView`.

我相信最好的方法是`DataView`从我的排序列表中创建一个`DataRowView`并将其传递给，`ItemsSource`但我还没有取得任何成功。

任何想法如何在不破坏自动生成的列的情况下将新的行列表传递给 ItemsSource 或 Items？手动生成我的所有列不是一种选择。

干杯，肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:39:08.503

你说的“它很慢”是什么意思？

如果我采用数据网格并将具有 50000 行和 20 列的数据表绑定到它。对我来说似乎很快

视图模型

```
public class Viewmodel
{
    public DataTable MyData { get; set; }

    public Viewmodel()
    {
        this.MyData = new DataTable();

        for (int i = 0; i < 20; i++)
        {
            this.MyData.Columns.Add("Col" + i);
        }

        for (int i = 0; i < 50000; i++)
        {
            var row = MyData.NewRow();
            for (int j = 0; j < 20; j++)
            {

                row["Col" + j] = string.Format("{0} Row, Col {1}", i, j);
            }
            this.MyData.Rows.Add(row);

        }
    }
} 
```

窗户

```
 <DataGrid ItemsSource="{Binding MyData}" AutoGenerateColumns="True">

    </DataGrid> 
```

编辑：它的.net4.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:32:47.723

我不知道摆脱重新创建列的方法。我遇到了类似的问题，通常我使用 ICollectionView 和 DeferRefresh。因为您不必在实际模型对象中执行此操作。但我不确定它是否适用于 DataViews 和 List 一样好。

# unit-testing - 如何对 GWT+SmartGWT 进行单元测试？

> ID：10244410
> 
> 赞同：3
> 
> 时间：2012-04-20T10:23:24.323
> 
> 标签：unit-testing, gwt, maven, selenium, smartgwt

我在**GWT+SmartGWT**应用程序的客户端进行单元测试。

首先，我使用**GwtTestCase**进行了测试。对大型应用程序进行单元测试的时间太长。**GwtTestSuite**没有帮助。执行起来仍然需要太多时间。（更多，它要求我在测试时启动浏览器）

然后**gwt-test-utils**：很棒的框架。可悲的是，我的 javassist 版本是 3.5，至少需要 3.11。吉利德使用 Javassist，所以我不能碰这个。所以，没有 gwt-test-utils...

我看到了**硒**。那太好了。使用 htmlunit 驱动程序，它又快又好用。测试 web 应用程序的最简单方法。这里的问题是 SmartGWT 在生成网页时会生成它自己的 ID。所以我无法获取 TextItems 并填充它们，因为这些 ID 不断变化。我发现它可以通过在小部件初始化之前使用 setID() 来解决。但这是 scLocator 的 ID，而不是 HTML ID。Selenium 不想与 scLocator 一起工作。

**=> 有没有一种简单的方法来接受带有 Selenium 的 scLocator ？** （当我说简单时，它一定很简单......我不是Java专家......）

有人可以帮我对应用程序进行单元测试吗？它是用 Java 编码的，它很大，我必须覆盖大约 70% 的代码（25k 行代码）

更多规格：Maven 用于编译。我没有接触服务器端。测试必须比 GwtTestCase 和 Suite 快：/

我希望我的问题很清楚，我不是以英语为母语的，所以很抱歉我可能犯的错误：x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:51:30.690

我们在 SDK 的顶层“selenium”目录下提供 Selenium 扩展和用户指南。

如果您下载 3.1d（从 smartclient.com/builds），还有更多文档，包括一些 JUnit 示例。

不要使用 ensureDebugId() （根本没有效果）。永远不要尝试使用 DOM ID（不起作用）。

Selenium 用户指南中的最佳实践信息解释了何时应该使用 setID()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:29:20.530

> 我发现它可以通过在小部件初始化之前使用 setID() 来解决。但这是 scLocator 的 ID，而不是 HTML ID。

你为什么不试试：

```
widget.ensureDebugId("some-id"); 
```

*来自ensureDebugId()*的 Java 文档：

> 确保这个 UIObject 的主元素有一个 ID 属性集，允许它与第三方库和测试工具集成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:12:38.030

<defaultUserExtensionsEnabled>true</defaultUserExtensionsEnabled>
<userExtensions>[user-extensions.js 的路径]</userExtensions>

我们去吧。我设法使它工作。（使用 <configuration> 标签中的 selenium-maven-plugin）

不过感谢您的帮助。

# jquery - 如何在页面加载期间隐藏和防止显示网页内容并显示动画 gif 图像

> ID：10244411
> 
> 赞同：3
> 
> 时间：2012-04-20T10:23:25.727
> 
> 标签：jquery, css, plugins, preload

我为我的朋友设计了以下网站：http: [//noorjamali.info/](http://noorjamali.info/)

如何防止在网页加载期间显示网站内容？（在页面加载期间它的视图不好）。

**1** - 请您为此目的介绍一个 jquery 插件。正如您将在该网站上看到的那样，我的行为是这样的：

**css**

```
.Home_Page
{
    display: none;
} 
```

**jQuery**

```
var $j = jQuery.noConflict();
$j(document).ready(function () {
    $j('.Home_Page').fadeIn(2000);
}); 
```

但在页面加载期间仍会出现内容。

**2** - 我该如何解决这个问题？
**3** - 如何在页面加载期间显示动画 gif 而不是显示内容？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:28:15.880

使用内联样式，

```
<body style="display:none">
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:27:58.927

使用类页面加载或其他东西创建一个 div。给这个 div 样式：

```
.pageLoad{
    position: fixed; 
    left: 0; 
    top: 0; 
    z-index: 1337; 
    width: 100%; 
    height: 100%; 
    background: #FFF url(loader.gif) no-repeat center center;
} 
```

当页面加载完成时，你隐藏这个 div

```
$(window).load(function(){$(".pageLoad").fadeOut(2000);}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T10:28:33.560

试试 有一个新版本的 QueryLoader [http://www.gayadesign.com/diy/queryloader-preload-your-website-in-style/](http://www.gayadesign.com/diy/queryloader-preload-your-website-in-style/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T10:37:39.540

将所有控件放入 UpdatePanel 并为更新面板创建触发器。

不要在 Page_Load 或任何其他页面事件上加载任何数据/控件，而是创建一个函数来在页面上加载数据/控件。

让页面呈现为空。在客户端页面加载事件上编写一个 javascript 并在该 javascript 中调用更新面板触发器。在服务器端的触发器单击上编写数据/控制加载代码。还有一些更改请参见示例代码。

示例代码（aspx）：

```
<asp:UpdatePanel ID="upD" runat="server">
    <ContentTemplate>
        <asp:PlaceHolder ID="ph" EnableViewState="False" runat="server">
        </asp:PlaceHolder>
        <asp:HiddenField ID="hdnIsPostBack" Value="0" runat="server" />
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="btnLoadData" EventName="Click" />
    </Triggers>
</asp:UpdatePanel>
<asp:UpdateProgress ID="upr" runat="server" AssociatedUpdatePanelID="upD" DisplayAfter="50">
    <ProgressTemplate>
        <div id="Layer1" class="busy">
            <img alt="Loading Data" src="<%=PathPrefix %>/Images/loading.gif" /><br />
            Loading...
        </div>
    </ProgressTemplate>
</asp:UpdateProgress>

<script type="text/javascript" language="javascript">

  var flag = false;
    function pageLoad() {
      if (!flag) {
        document.getElementById('m_c_btnLoadData').click();
        flag = true;
      }
    }

    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_initializeRequest(InitializeRequest);
    prm.add_endRequest(EndRequest);
    var postBackElement;
    function InitializeRequest(sender, args) {
        $get('m_c_upr').style.display = 'block';
    }
    function EndRequest(sender, args) {
        $get('m_c_upr').style.display = 'none';
    }
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T10:41:03.800

你可以看看这个网站。。

即使加载未完成，这实际上也会显示页面。您可以做的是创建两个 DIV。一个包含主页，另一个包含准备时显示的图像。

您可以使用 jquery 隐藏和显示来做到这一点。

# c# - 执行涉及多个项目的业务规则

> ID：10244418
> 
> 赞同：0
> 
> 时间：2012-04-20T10:23:43.340
> 
> 标签：c#, architecture, domain-driven-design

假设我有一个简单的 todolist：

```
interface ITodoList
{
  ITodoItem Create(title);
  IEnumerable<ITodoItem> Items {get;}
}
interface ITodoITem
{
    void StartTrackTime();
    void StopTrackTime();
} 
```

现在我想强制执行，以便一次只跟踪一项（每个用户）的时间。

我是否应该创建一个这样的域`ItemTimeTrackingStarted`事件`StartTrackTime`。该事件将由 a`ITodoService`检查当前用户是否有任何其他时间跟踪项目（并停止它们）。还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:32:15.220

IMO我会这样做，我不知道上下文的所有细节，但是对于这个特定的功能来说

```
 public interface ITrackTime
 {

    void StartTrackTime();
    void StopTrackTime();
 }
 public interface ITodoItem
 {
    int Id {get;}  
    //other stuff
 }

 public TodoItem:ITodoITem, ITrackTime {}

 public class TodoList:ITodoList,ITrackItem
 {
    ITodoItem Create(title)
    { 
       //create item and add it to collection 
     }
      TodoItem _currentlyTracking;

     void StartTrackTime(int itemId)
     {

        if (_currentlyTracking == null)
        {
           // getItem and call method for item ..
          item.StartTrackTime();
          _currentlyTracking=item;
         }
        else{
           //get item and check to see if it is the same id
           //throw exception if it is not, ignore it if it is
          }
      }
 }

 var list = new TodoList();
 ITodoItem item= list.Create("titel");
 list.StartTrackingTime(item.Id);
 list.StartTrackingTime(otherId); //should throw or whatever handling 
```

一切都包含在 AR (TodoList) 中。再一次，这是一个粗略的草案，因为我并不完全了解上下文和领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:26:44.827

好吧，如果您在项目之间存在依赖关系，在这种情况下是检查，我的建议是将 track 方法移动到待办事项列表对象中，并远离项目。

因此，您请求对包含所有待办事项的对象进行更改，并在那里找到检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:24:45.483

如前所述，ToDoList 应该强制执行约束，因为约束是在 ToDoList 级别定义的。（除非它是在用户级别定义的，如您所指出的，在这种情况下，责任将转移到那里）。您可以将方法保留在项目上，但它可以引用父待办事项列表。代码可能如下所示：

```
public class ToDoList
{
  public IList<ToDoListItem> Items { get; private set; }

  // factory method creates items as required by ToDoList
  public ToDoListItem Create(string title)
  {
    var item = new ToDoListItem(this, title);
    this.Items.Add(item);
    return item;
  }

  ToDoListItem currentItem;

  public void StartTrackTimeFor(ToDoListItem item) 
  {
    if (this.currentItem != null)
      throw new Exception();
    // could also throw different exception if specified item is current item being tracked
    // start time tracking logic.
    this.currentItem = item;
  }

  public void StopTrackTimeFor(ToDoListItem item)
  {
    if (this.currentItem != item)
      throw new Exception();
    // stop time tracking logic.    
    this.currentItem = null;
  }
}

public class ToDoListItem
{
  public ToDoListItem(ToDoList list, string title) 
  {
    this.ToDoList = list;
    this.Title = title;
  }

  public ToDoList ToDoList { get; private set; }

  public string Title { get; private set; }

  public void StartTrackTime()
  {
    this.ToDoList.StartTrackTimeFor(this);
  } 

  public void StopTrackTime()
  {
    this.ToDoList.StopTrackTimeFor(this);
  }
} 
```

# assembly - 2 遍汇编器与单遍汇编器在解析未来符号方面有何不同？

> ID：10244422
> 
> 赞同：17
> 
> 时间：2012-04-20T10:24:03.247
> 
> 标签：assembly

这是我不明白的2个问题：

1.  One-Pass Assembler 如何解决未来的符号问题？

2.  在这方面，两遍汇编器与单遍汇编器有何不同？

    *它是在第一遍还是第二遍中解决？如果它在第二遍中完成，它与一次性汇编器实际上有什么不同？如果它在第二遍中完成，为什么它不在第一遍中执行？*

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-20T11:05:22.123

阅读此[PDF](http://solomon.ipv6.club.tw/~solomon/Course/SP/sp2-4.pdf)。它逐步解释了单遍和多遍汇编器的工作原理。它还解释了它们的优缺点以及两者之间的差异。

## 什么是单程汇编器？

它是一种*Load-and-go*类型的汇编程序，一般直接在内存中生成目标代码以便立即执行！它只解析一次你的源代码，你就完成了。弗鲁姆...

## 酷，如果它有这个魔力，为什么我们还需要多通道汇编器呢？

转发参考！即，当一次性汇编程序在您的源代码中运行时，它会遇到一些未定义的数据符号和未定义的标签（跳转地址）形式的***陌生人。***你的装配工问这些陌生人他们是谁？陌生人说“*我们稍后再告诉你！* ”（转发参考）你的汇编器很生气，告诉你完全消除这些陌生人。但是这些陌生人是你的朋友，你不能完全消除他们。***因此，您与汇编程序达成妥协***。您承诺在使用它们之前定义所有变量。汇编器不能对此妥协，因为它甚至不能为未定义的数据符号保留临时存储，因为它不知道它们的大小。数据可以有不同的大小

如果它像

```
PAVAN EQU SOMETHING

; Your code here
 mov register, PAVAN

; SOMETHING DB(or DW or DD) 80 ; varying size data, not known before 
```

就其本身而言，您的汇编程序同意在未定义的跳转标签上妥协。由于跳转标签只不过是地址和地址大小，因此可以先验地知道地址大小，以便汇编程序可以为未定义的符号保留一些确定的空间。

如果是这样

```
 jump AHEAD

 AHEAD add reg,#imm 
```

汇编程序翻译`jump AHEAD`为`0x45 **0x00 0x00**`. `0x45`是为地址`jump`保留的操作码和 4 个字节`AHEAD`

## 好的，现在告诉我一个 pass 汇编器是如何工作的

***很简单，如果汇编器在运行过程中遇到未定义的标号，它会在将来找到该符号时将其连同必须放置未定义符号值的地址一起放入符号表中***。它对所有未定义的标签执行相同的操作，并且当它看到这些未定义符号的定义时，它会将它们的值添加到表中（从而使该标签定义）和它之前保留临时存储的内存位置。

现在在解析结束时，如果还有更多的可怜的灵魂仍然处于未定义状态，汇编器会发出错误并出错:(如果没有任何未定义的标签，那么你就走吧！

![在此处输入图像描述](../Images/ae18c978155c909f24a8f2e363443996.png)

## 一秒钟，我忘记了为什么我们需要一个 2 或多通道汇编器？它们是如何工作的？

如前所述，**一次性汇编器无法解析数据符号的前向引用**。它要求在使用之前定义所有数据符号。两遍汇编器通过专门解析所有（数据/标签）前向引用，然后在下一遍中轻松生成目标代码，解决了这一难题。

如果一个数据符号依赖于另一个，而另一个又依赖于另一个，则汇编程序递归地解决这个问题。如果我尝试在这篇文章中解释这一点，这篇文章会变得太大。阅读此[ppt](http://www.csie.nctu.edu.tw/~shieyuan/course/spb/lectures/sp09.ppt)了解更多详情

## 嗯..有趣。两遍汇编器是否有更多优势？

是的。它可以检测重新定义和类似的东西。

**PS**：我在这里可能不是 100% 正确的。我很想听听任何建议，使它成为一个更好的帖子。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-04T14:09:59.547

A one pass assembler generates code and for any undefined symbols, leaves a slot to be filled in, and remembers it in a table or other data structure. Then where the symbol is defined, it fills in its value at the right place or places, using the information from the table.

The reason for using a two pass assembler traditionally has been that the target program doesn't fit in memory, leave alone the source. The gigantic source program is read, line by line, from the punch tape reader, and the table of labels is kept in internal memory. (I've actually done that, on ISIS, the first development system of Intel, with an 8080.) The second time around the source tape is again read from the beginning, but the value of all labels is known, and as each line is read, the target program is punched out to tape. On a memory starved 16 bit Intel 8086 system this was still a useful technique to have a heavily documented source file that can be much larger than 64 Kbyte, with hard disk or floppy substituted for paper tape.

Nowadays there is no need to do two passes, but this architecture is still in use. It is slightly simpler, at the expense of I/O.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-04T15:02:40.257

考虑汇编器的一种方法是想象它们计算分配给顺序增加的内存位置的一系列表达式的值。表达式通常由符号的值、对符号进行的一些算术运算、常量和特殊变量组成，例如“当前位置计数器”（通常用一个有趣的名字写成“$”），或者真正特殊的表达式语法是机器指令的语法。

请注意，一个表达式可能会产生一个填充多个连续内存位置的值；机器指令倾向于这样做，但为字符串文字、多精度数字、初始化结构等提供表达式很有用。这只会影响簿记细节，但不会改变汇编程序在抽象中所做的事情。

要计算每个表达式的最终值，汇编器必须知道可能涉及的任何符号的值。它仅以几种方式发现符号值。首先，符号值可能被定义为表达式的结果。其次，可以为符号值分配当前位置计数器的值；通常，当符号写在“标签”位置时，汇编程序会这样做。在这样的发现中，汇编器将符号名称及其值记录在符号表中以用于评估表达式。

汇编器面临的一个关键问题是生成表达式的值，但尚未遇到符号的所有定义。假设是，如果一个符号没有在某个特定的行中定义，它将在汇编器最终处理的稍后的行中定义。

两遍汇编器尝试在遇到每个表达式时计算它的值，分为两遍，称为“第一遍”和“第二遍”。在第一次传递期间，如果表达式中有未定义的符号（假定是前向引用），汇编器只需替换一个虚拟值（通常为零）；在任何情况下，它都会为表达式计算一个值。如果正在处理机器指令或数据常量，则忽略结果，但*大小*用于推进位置计数器以启用标签值分配。如果遇到标签，则将其值设置为当前位置计数器。如果遇到符号赋值“A EQU”，则将符号值设置为表达式的结果；如果表达式包含未定义的符号，汇编器将发出错误。如果找到一条原始语句“ORG”，则将其视为写有“$ EQU”。在第一遍结束时，所有标签都已被赋值；任何没有值的符号在符号表中都被标记为“未定义”。第二遍重复第一遍的表达式评估，但不（重新）定义任何符号；由于所有符号都（预计）已定义，因此表达式值是正确的并被发送到输出流。

一次性汇编器会在遇到表达式时尝试计算每个表达式的值。如果表达式仅包含已定义的符号，则汇编器可以对其求值并生成最终值，并将该信息写入其输出流。（这里的另一个答案建议一些通过汇编程序将他们的答案写到内存中。这只是一个特例）。如果表达式包含未定义的符号，则汇编器存储一对*(location,expression)*以便稍后在符号被定义时或在汇编结束时重新处理。一些表达式，例如那些设置位置计数器的表达式不能有未定义的符号；在这种情况下，汇编程序会抱怨。

所以棘手的部分是存储未解析的表达式，并决定何时重新评估它。存储表达式的一种方法是简单地保留文本；另一个是为表达式构建相当于（反向）波兰符号的内容。要确定表达式何时需要重新计算，可以将其与它包含的未定义符号相关联；然后当一个符号被定义时，相应的未解析表达式被重新评估，完成的表达式被发出，未解析的表达式再次被重新处理。或者，汇编器可以简单地保存所有表达式，直到遇到输入的结尾；此时，应该定义所有符号，因此它应该能够确定每个表达式的最终值。

在上个世纪，我构建了一个在 8k 字节计算机上运行的一次性汇编器，它使用波兰语表示的表达式。定义符号后，计算波兰表达式并计算任何可计算的子表达式，将生成的波兰表达式简化为最终值或仅涉及未定义符号上的运算符的较小波兰表达式。未定义值的符号表条目具有与未定义符号对应的所有波兰表达式槽的链表；当遇到符号定义时，链表的所有元素都被更新，波兰表达式在发生时被重新评估。这使波兰表达式的大小尽可能小，并在定义所有符号时将其删除。这个汇编程序在小机器上处理十万行程序就很好。在这么小的机器上进行一次通过汇编的原因是源代码来自纸带（一种电传打字机，对于那些年龄足够大的人来说）并且即使阅读一次纸带也是非常痛苦和缓慢的；第二次不是一个好主意，所以双通道汇编器不是一个合适的选择。

我的一个团队后来构建了一个有趣的两遍汇编器。*他没有对文本*进行两次处理，而是在第一遍对文本进行标记（将其存储在内存中）并收集符号值。通过两个处理标记化的文本。这是一个非常快速的汇编程序，可用于两遍。他有更多可用的内存。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-01-19T06:21:29.410

未来符号问题意味着符号在定义之前使用。

*   这是可能的，因为在汇编语言程序中，程序员可以随时定义符号，所以如果在定义之前使用符号，则称为“前向引用”

*   所以每次从将其转换为机器语言（二进制），汇编器得到 Opcode-Reg-X2-B2 但它没有在符号表中获得 D2（位移）条目，因此无法转换为机器语言（二进制） ) 它被称为“前向参考问题”。

*   解决这个 2 Pass 汇编程序是定义的。

**在第一次通过（第一次扫描）时，它将符号（标签）输入到符号表中。**并且在第二次通过（第二次扫描）时，汇编程序将其转换为机器语言（二进制）。这很简单:)

# java - 如何将 JLabel 放入 JLabel 中或将 JLabel 划分为正方形

> ID：10244428
> 
> 赞同：2
> 
> 时间：2012-04-20T10:24:19.340
> 
> 标签：java, swing, jlabel

我创建了一个蛇和梯子游戏，它运行良好，但现在我想对其进行一些修改。我希望每个玩家有两个棋子/玩家而不是一个。新规则现在变成了，同一玩家的两个棋子可以占据同一个方格，因此我需要一种方法将它们显示在同一个方格中。我使用 JLable 来识别每个方格，但现在我希望每个方格可以容纳多个。也就是说，如果一个方格被多个棋子占据，则用户必须能够单击一个棋子并仅选择该棋子。有没有办法将一个正方形/JLable 分成几个正方形/JLabel？我不确定 JLabel 是否最适合在这里使用...有什么建议吗？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T11:07:39.700

在这里尝试这个代码示例，这是否适合您的情况：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class LabelOverLabel
{
    public static final String HTML =
        "<html>" +
        "<style type'text/css'>" +
        "body, html { padding: 0px; margin: 0px; }" +
        "</style>" +
        "<body>" +
        "<img src='http://pscode.org/media/starzoom-thumb.gif'" +
        " width=320 height=240>" +
        "";

    private static final String PLAYERONE = 
        "<html>" +
        "<style type'text/css'>" +
        "body, html { padding: 0px; margin: 0px; }" +
        "</style>" +
        "<body>" +
        "<img src='http://pscode.org/media/citymorn2.jpg'" +
        " width=160 height=120>" +
        "";

    private static final String PLAYERTWO = 
        "<html>" +
        "<style type'text/css'>" +
        "body, html { padding: 0px; margin: 0px; }" +
        "</style>" +
        "<body>" +
        "<img src='http://pscode.org/media/citymorn1.jpg'" +
        " width=160 height=120>" +
        ""; 

    private JLabel playerOneLabel;
    private JLabel playerTwoLabel;

    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("JLabel Over JLabel");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        final JLabel bottomLabel = new JLabel(HTML);
        bottomLabel.setLayout(new FlowLayout(FlowLayout.LEFT, 2, 2));

        playerOneLabel = new JLabel(PLAYERONE);
        bottomLabel.add(playerOneLabel);

        JButton insertPlayer = new JButton("INSERT");
        insertPlayer.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                playerTwoLabel = new JLabel(PLAYERTWO);
                bottomLabel.add(playerTwoLabel);
                bottomLabel.revalidate();
                bottomLabel.repaint();
            }
        });

        frame.getContentPane().add(bottomLabel, BorderLayout.CENTER);
        frame.getContentPane().add(insertPlayer, BorderLayout.PAGE_END);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new LabelOverLabel().createAndDisplayGUI();
            }
        });
    }
} 
```

这是相同的输出：

![两名球员](../Images/32558086880d29d6bb4188071f9edc4a.png)

实现这一目标的另一种方法是：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class LabelOverLabel
{   
    private JLabel playerOneLabel;
    private JLabel playerTwoLabel;  
    private Icon[] icons = {UIManager.getIcon("OptionPane.informationIcon"),
                            UIManager.getIcon("OptionPane.errorIcon"),
                            UIManager.getIcon("OptionPane.warningIcon")};

    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("JLabel Over JLabel");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        final JLabel bottomLabel = new JLabel("I am a JLabel");
        bottomLabel.setBorder(BorderFactory.createLineBorder(Color.BLUE.darker(), 5));
        //bottomLabel.setIcon(icons[0]);
        bottomLabel.setLayout(new FlowLayout(FlowLayout.LEFT, 2, 2));

        playerOneLabel = new JLabel();
        playerOneLabel.setIcon(icons[1]);
        bottomLabel.add(playerOneLabel);

        JLabel secondLabel = new JLabel("1");
        bottomLabel.add(secondLabel);

        JButton insertPlayer = new JButton("INSERT");
        insertPlayer.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                playerTwoLabel = new JLabel();
                playerTwoLabel.setIcon(icons[2]);
                bottomLabel.add(playerTwoLabel);
                bottomLabel.revalidate();
                bottomLabel.repaint();
            }
        });

        frame.getContentPane().add(bottomLabel, BorderLayout.CENTER);
        frame.getContentPane().add(insertPlayer, BorderLayout.PAGE_END);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new LabelOverLabel().createAndDisplayGUI();
            }
        });
    }
} 
```

输出是：

![JLABEL 超过 JLABEL](../Images/1df6f24928c15578cdbfb12b804ad4db.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T10:46:37.157

您还可以创建自定义标签并将每个用户绘制为正方形。

# windows-phone-7 - 选择时如何使滚动查看器获得焦点

> ID：10244430
> 
> 赞同：0
> 
> 时间：2012-04-20T10:24:24.607
> 
> 标签：windows-phone-7

我有一个项目，其中我有多个滚动视图：我可以向上和向下滚动单个项目，也可以水平滚动多个项目。通常，webview 不是 hittestvisible。水平移动效果很好，但是当我向下滚动时，我将焦点和 hittestvisibility 赋予单个项目，但它不会向下滚动。只有当我第二次向下滚动时，它才会滚动，我认为是因为当 ManipulationStartedevent 被触发时，它被当时有焦点的滚动视图捕获，只有后来 webview 才获得焦点，因此，它没有开始的位置。有解决此问题的方法吗？

```
<ScrollViewer x:Name="Scroller" 
                  HorizontalScrollBarVisibility="Auto" 
                  VerticalScrollBarVisibility="Disabled"
                  ManipulationMode="Control"
                  Grid.Row="1" Grid.RowSpan="2" >
        <StackPanel Name="WebScrollView" Orientation="Horizontal" >
                <UserControl Name="LeftContentControl"   MinWidth="480" />
                <UserControl Name="MiddleContentControl" MinWidth="480" />
                <UserControl Name="RightContentControl"  MinWidth="480" />                
        </StackPanel>
    </ScrollViewer> 
```

因此，Left、Middle 和 Right 是将 webviews 作为其内容的三个控件。当向左滚动时（例如 ），左边的内容被放置在中间的内容之上，中间的内容又被设置为视图，所以看起来像是一个无穷无尽的 webview 列表，但实际上是三个。我使用调解器来实现 webviews 的动画。提前致谢。极客

# spring-mvc - 如何在 Spring MVC 应用程序中激活实际请求之外的请求范围？

> ID：10244431
> 
> 赞同：2
> 
> 时间：2012-04-20T10:24:25.717
> 
> 标签：spring-mvc

我有一个 spring mvc 应用程序，它大量使用在请求范围中定义的 bean。现在我必须在这个范围之外使用这个应用程序的一部分（在 Magnolia CMS 中的一个 qwertz 作业中）。这当然行不通：

> 创建名为“requestHelper”的 bean 时出错：范围“请求”对当前线程不活动

我无法更改 bean 的范围，也无法更改代码。所以我唯一的可能性似乎是将当前线程的范围更改为请求范围模型。

我尝试了类似的东西

```
XmlWebApplicationContext context = (XmlWebApplicationContext) ApplicationContextProvider.getApplicationContext() ;
   MockServletContext mockServletContext = new MockServletContext("/");
   context.setServletContext(mockServletContext);
   context.refresh(); 
```

但这仍然没有激活当前线程中的请求范围。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:21:11.157

可以按如下方式激活请求范围：

```
RequestContextHolder.setRequestAttributes(
    new ServletRequestAttributes(new MockHttpServletRequest()));     

...

((ServletRequestAttributes) RequestContextHolder.getRequestAttributes())
    .requestCompleted();
RequestContextHolder.resetRequestAttributes(); 
```

Thoguh 我认为在生产代码中使用这样的 hack 并不是一个好主意。

# c# - c# Photoshop CS5 脚本

> ID：10244433
> 
> 赞同：2
> 
> 时间：2012-04-20T10:24:27.473
> 
> 标签：c#, scripting, dialog, photoshop, flash-cs5

我创建了 ac# windows 服务，它可以自动执行 Photoshop 来执行图像处理，但即使我已经指定：

`psApp.DisplayDialogs = PsDialogModes.psDisplayNoDialogs;`

和

`psApp.NotifiersEnabled = false;`

一些对话框仍在显示！

例如，如果图像已损坏或在旧版本的 Photoshop 中创建，则会显示一个对话框，需要关闭该对话框才能继续。

任何人都可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:24:03.480

我以前遇到过这个问题（在 CS2 中）。您在打开图像之前尝试过吗？

```
app.displayDialogs = DialogModes.NO 
```

# java - 正则表达式用浮点数替换整数

> ID：10244448
> 
> 赞同：1
> 
> 时间：2012-04-20T10:25:32.810
> 
> 标签：java, regex, actionscript-3

我们正在尝试用字符串中的浮点值替换整数值，例如：

```
#var1 * #var2/ 1+100 - 2 + 1.5 - .5 
```

正则表达式应该匹配`1`,`100`和`2`，但不是已经是浮点数的数字，例如`1.5`和`.5`

我已经到了`/[^\w](\d+)/`，它自己找到数字。现在，如何从这个正则表达式中排除数字，然后是`\.?\d+`？

RegEx 应该在 Java 或 Actionscript 3 中工作。

[正则表达式测试](http://rubular.com/r/KRbeShId3W)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:34:43.923

这将在 Java 中工作：`/(?<![.\w])\d+(?![.\w])/`. 它使用前瞻和后瞻来停止匹配在点/字母之前或之后的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:31:41.677

为什么不尝试前瞻？我相信它适用于 Java，对 ActionScript 毫无头绪。

`[^\w](\d+)(?![.]\d+)/`

将仅匹配那些不紧跟点整数的数字序列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T10:33:23.757

您可以对此使用[消极的展望](http://www.regular-expressions.info/lookaround.html)

```
(?<!\.\d+) 
```

会排除这个，但你需要把它和一个锚结合起来，否则你会得到一个部分匹配。

```
/(?<!\B|\.)(\d+)(?!\.\d+)\b/ 
```

您还应该更改数字之前的非单词字符。我在这里使用了否定的lookbehind assertion `(?<!\B|\.)`。它确保数字之前没有点或没有非字边界（双重否定以匹配字边界。）

[在 Regexr 上](http://regexr.com?30n8f)查看

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:38:26.173

如果您的正则表达式语法支持前瞻，您可以使用它。Java可以；不确定AS3。

```
/[^\w.]\d+(?!\.)/ 
```

请注意，在这种情况下，您希望在替换中使用整个匹配的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T11:51:41.930

我的建议是

```
\b(?<!\.)\d+(?!\.)\b 
```

# function - 用函数区分函数

> ID：10244449
> 
> 赞同：1
> 
> 时间：2012-04-20T10:25:34.140
> 
> 标签：function, matlab, math, differentiation

我只是有点迷失在这里。我正在使用带有符号数学工具箱的最新 MATLAB 版本。目前我正在研究一个系统，该系统具有 x=theta(t)+2 之类的方程（当然要复杂得多，也更长）。现在我想用 theta(t) 来区分这个方程。因此，我应该得到 x=1。但是，如果我使用 diff(x,theta) 命令，我只会收到消息 Invalid variable。

我该怎么做？我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T08:03:08.877

我曾经有同样的问题，但使用**Maple**或**sympy**。尝试用等式右侧的 theta 代替 theta(t)，然后对 wrt 进行微分。θ。

# php - 使用 PHP curl 发送 UTF-16 编码的数据

> ID：10244454
> 
> 赞同：0
> 
> 时间：2012-04-20T10:26:04.110
> 
> 标签：php, post, unicode, curl, utf-16

我正在为需要将发布的数据编码为 UTF-16 的 Web 服务构建 php 客户端。如何配置 curl 以 UTF-16 编码我的数据并以 UTF-16 解码答案？

一些示例代码：

```
$s = curl_init($url);

curl_setopt($s,CURLOPT_POST,1); 
curl_setopt($s,CURLOPT_RETURNTRANSFER, 1 );
curl_setopt($s,CURLOPT_POSTFIELDS,$data);
curl_setopt($s,CURLOPT_TIMEOUT, 5);
curl_setopt($s,CURLOPT_HTTPHEADER,array('Content-Type: text/plain'));

$result = curl_exec($s);
curl_close($s); 
```

添加 Accept-Encoding 标头似乎不起作用。是否可以先在 UTF-16 中编码我的 $data 字符串，然后将字节数组传递给 curl 而不是字符串？

谢谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:30:46.260

首先，您需要找出*您的*数据编码是什么。然后，这是你的选择。[iconv()](http://es.php.net/manual/en/function.iconv.php)和mb_convert_encoding [()](http://php.net/mb_convert_encoding)都工作得很好。

另外，您应该告知 HTTP 标头中的编码：

```
curl_setopt($s,CURLOPT_HTTPHEADER,array('Content-Type: text/plain; charset=UTF-16')); 
```

# c - 在自己的库中取消引用指向不完整类型的指针

> ID：10244455
> 
> 赞同：0
> 
> 时间：2012-04-20T10:26:12.827
> 
> 标签：c, compiler-errors

我的库中有几个结构：边缘、顶点、图形。我想向用户隐藏该结构的主体（用户必须使用 API），所以在头文件（例如 edge.h）中我刚刚放了：

```
typedef struct edge edge_t; 
```

边缘结构的定义在 edge.c

```
struct edge {...}; 
```

这很好用，但我不想从我自己的代码中隐藏 struct 的主体。我想在 edge.c 中使用：

```
vertex_t v;
v.some_attribute = x; 
```

现在我得到了指向不完整类型错误的取消引用指针，是否可以解决这个问题？是否有任何其他选项对所有结构元素使用访问器（如用户）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T10:41:41.380

如果您需要使用来自其他源文件的结构，它们需要结构的完整定义。所以解决方案是也放入`struct edge { /* ... */ }`头文件，并在需要时包含头文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:45:36.447

Joachim Pileborg 是正确的。

编译器需要知道结构的大小才能使用它。防止这种情况的唯一方法是强制用户使用指针。

`typedef struct edge *edge_t;`

编译器知道指针的大小，因此它知道需要为其分配多少空间。

# android - 电子书阅读错误

> ID：10244462
> 
> 赞同：1
> 
> 时间：2012-04-20T10:26:36.883
> 
> 标签：android, noclassdeffounderror, epub

[我试图阅读我使用http://www.siegmann.nl/epublib/android](http://www.siegmann.nl/epublib/android)的 epub 文件。我正在尝试链接中给出的相同示例，但我得到了**java.lang.NoClassDefFoundError**。我尽我所能。即使通过 adt、eclipse 进行更改，但我无法解决此问题。请调查一下并给我一些建议。

```
04-20 15:08:47.735: E/AndroidRuntime(4329): FATAL EXCEPTION: main
04-20 15:08:47.735: E/AndroidRuntime(4329): java.lang.ExceptionInInitializerError
04-20 15:08:47.735: E/AndroidRuntime(4329):     at com.sample.pubreader.EPubReaderActivity.onCreate(EPubReaderActivity.java:30)
04-20 15:08:47.735: E/AndroidRuntime(4329):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
04-20 15:08:47.735: E/AndroidRuntime(4329):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1780)
04-20 15:08:47.735: E/AndroidRuntime(4329):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1837)
04-20 15:08:47.735: E/AndroidRuntime(4329):     at android.app.ActivityThread.access$1500(ActivityThread.java:132)
04-20 15:08:47.735: E/AndroidRuntime(4329):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1033)
04-20 15:08:47.735: E/AndroidRuntime(4329):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 15:08:47.735: E/AndroidRuntime(4329):     at android.os.Looper.loop(Looper.java:143)
04-20 15:08:47.735: E/AndroidRuntime(4329):     at android.app.ActivityThread.main(ActivityThread.java:4196)
04-20 15:08:47.735: E/AndroidRuntime(4329):     at java.lang.reflect.Method.invokeNative(Native Method)
04-20 15:08:47.735: E/AndroidRuntime(4329):     at java.lang.reflect.Method.invoke(Method.java:507)
04-20 15:08:47.735: E/AndroidRuntime(4329):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-20 15:08:47.735: E/AndroidRuntime(4329):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-20 15:08:47.735: E/AndroidRuntime(4329):     at dalvik.system.NativeStart.main(Native Method)
04-20 15:08:47.735: E/AndroidRuntime(4329): Caused by: java.lang.NoClassDefFoundError: org.slf4j.LoggerFactory
04-20 15:08:47.735: E/AndroidRuntime(4329):     at nl.siegmann.epublib.epub.EpubReader.<clinit>(EpubReader.java:33)
04-20 15:08:47.735: E/AndroidRuntime(4329):     ... 14 more 
```

尽管我的代码与上面的链接相似，但我也提供了代码。

```
public class EPubReaderActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        AssetManager assetManager = getAssets();
        try {
          // find InputStream for book
          InputStream epubInputStream = assetManager
              .open("sample.epub");

          // Load Book from inputStream
          Book book = (new EpubReader()).readEpub(epubInputStream);

          // Log the book's authors
          Log.i("epublib", "author(s): " + book.getMetadata().getAuthors());

          // Log the book's title
          Log.i("epublib", "title: " + book.getTitle());

          // Log the book's coverimage property
          Bitmap coverImage = BitmapFactory.decodeStream(book.getCoverImage()
              .getInputStream());
          Log.i("epublib", "Coverimage is " + coverImage.getWidth() + " by "
              + coverImage.getHeight() + " pixels");

          // Log the tale of contents
          logTableOfContents(book.getTableOfContents().getTocReferences(), 0);
        } catch (IOException e) {
          Log.e("epublib", e.getMessage());
        }
    }
    private void logTableOfContents(List<TOCReference> tocReferences, int depth) {
        if (tocReferences == null) {
          return;
        }
        for (TOCReference tocReference : tocReferences) {
          StringBuilder tocString = new StringBuilder();
          for (int i = 0; i < depth; i++) {
            tocString.append("\t");
          }
          tocString.append(tocReference.getTitle());
          Log.i("epublib", tocString.toString());

          logTableOfContents(tocReference.getChildren(), depth + 1);
        }
      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:04:35.130

我通过添加另外两个 jar 文件解决了这个问题

slf4j-api 和 slf4j-simple。slf4j-android 依赖于我提到的库。

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:07:24.337

我认为您忘记将 slf4j-android 库添加到您的项目中。如果您查看您提供的链接，它会说：

> **入门**
> 
> 1.  [从https://github.com/downloads/psiegman/epublib/epublib-core-latest.jar](https://github.com/downloads/psiegman/epublib/epublib-core-latest.jar)下载 epublib-core-latest.jar
> 2.  下载 slf4j-android
> 3.  将两者都添加到您的 android 项目中

确保这两个库都在您的构建路径上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-19T21:55:09.317

只需在 Libs 文件夹中添加这两个提到的 jar。如果 Libs 文件夹不在项目结构中，请创建一个并添加这些 jar。错误会消失。

# c - 为什么 strcpy 以相反的顺序接受它的参数

> ID：10244464
> 
> 赞同：3
> 
> 时间：2012-04-20T10:26:37.790
> 
> 标签：c, syntax, cstring, c-strings

几乎所有其他旨在将一个对象复制到另一个对象的程序或函数都使用基本约定

复制（源，目标）

即使是常见的逻辑也会得出这样的结论，即您正在将某些东西从这里复制到那里。为什么 strcpy 使用完全相反的约定？它只会使试图使用该功能的人感到困惑。strcpy 的作者在编写函数时肯定想到了这一点吗？还是 strcpy 函数早于这个现在无处不在的使用约定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T10:30:27.933

他们想匹配 memcpy 的语法。

`char * strcpy ( char * destination, const char * source );`

`void * memcpy ( void * destination, const void * source, size_t num );`

其他 C 函数也使用此命令。

一个基本的 strcpy(...) 实现将是（跳过强制转换）：

```
char * strcpy ( char * destination, const char * source ) {
    return memcpy(destination, source, strlen(source) + 1);
} 
```

# jquery - jQueryMobile 的数据标题未显示在搜索结果中

> ID：10244465
> 
> 赞同：0
> 
> 时间：2012-04-20T10:26:40.753
> 
> 标签：jquery, jquery-mobile, seo, web-crawler

我有一个多页的 jQueryMobile 站点，它使用该`data-title`属性来更新每个单独页面上的页面标题。这在大多数现代浏览器中都可以正常工作，但它不会反映在 Google 搜索结果中，因为爬虫可能不支持 jQueryMobile（或 JavaScript）。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:36:26.647

这是因为您正在使用通常**不**被搜索引擎解析的 JavaScript 更新页面。因此，如果您希望标题反映在搜索结果中，您必须在发送 HTML 之前在服务器上进行设置。

# php - 在 php 中上传大文件时出现内部服务器错误

> ID：10244474
> 
> 赞同：0
> 
> 时间：2012-04-20T10:27:38.943
> 
> 标签：php, mysql, apache

我正在使用 codeIgniter，尝试上传大文件（可能为 1Mb 及以上）时出现内部服务器错误 文件上传脚本正在工作，因为它上传到服务器中的文件夹。但是将文件保存到数据库中它不再起作用了。我已经尝试更改以下内容，但仍然无法正常工作：

**php.ini**

*   post_max_size = 50M
*   upload_max_filesize = 20M

**我的.ini**

*   max_allowed_pa​​cket = 2048M
*   最大执行时间 = 150

我还需要在哪里检查以确保文件上传到数据库有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:29:02.780

保存文件做目录，而不是数据库。您可能希望将路径保存在数据库中。

如果你想知道为什么，这里有一些你应该检查的以前的帖子。

1.  [将文档作为 Blob 存储在数据库中 - 有什么缺点吗？](https://stackoverflow.com/questions/211895/storing-documents-as-blobs-in-a-database-any-disadvantages)
2.  [在 DB 中存储图像 - 是还是不是？](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:31:59.223

重新启动您的 apache 服务器，然后重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:32:21.780

我认为您应该将文件保存到数据库..但是如果您坚持尝试`NoSQL`解决方案..例如`MongoDB`..它更快更好

# django - 芹菜和 Django，记录芹菜

> ID：10244475
> 
> 赞同：2
> 
> 时间：2012-04-20T10:27:47.493
> 
> 标签：django, nginx, virtualenv, celery, django-celery

我正在用 django 运行 celery，并且在开发中效果很好。但是现在我想让它在我的生产服务器上运行，我遇到了一些问题。

我的设置如下：

*   Ubuntu
*   Nginx
*   虚拟环境
*   暴发户
*   独角兽
*   姜戈

我不确定现在如何用 django 启动芹菜，当用暴发户启动它时，它在哪里登录？

我在这里开始 django：

```
~$ cd /var/www/webapps/minamobime_app
~$ source ../bin/activate 
```

> 执行 /var/www/webapps/bin/gunicorn_django -w $NUM_WORKERS \ --user=$USER --group=$GROUP --bind=$IP:$P​​ORT --log-level=debug \ --log-file =$LOGFILE 2>>$LOGFILE

我如何开始芹菜？

```
exec python manage.py celeryd -E -l info -c 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:33:54.290

考虑将 celery 配置为[daemon](http://ask.github.com/celery/cookbook/daemonizing.html)。对于日志记录：

> CELERYD_LOG_FILE="/var/log/celery/%n.log"

其中 %s 将替换为节点名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-09T17:40:38.913

您可以使用 apt-get 安装**主管**，然后您可以将以下内容添加到名为 celeryd.conf 的文件（或您希望的任何名称）到 etc/supervisor/conf.d 文件夹（如果不存在则创建 conf.d 文件夹)

```
; ==================================
;  celery worker supervisor example
; ==================================

[program:celery]
; Set full path to celery program if using virtualenv
command=/home/<path to env>/env/bin/celery -A <appname> worker -l info
;enter the directory in which you want to run the app
directory=/home/<path to the app> 
user=nobody
numprocs=1
stdout_logfile=/home/<path to the log file>/worker.log
stderr_logfile=/home/<path to the log file>/worker.log
autostart=true
autorestart=true
startsecs=10

; Need to wait for currently executing tasks to finish at shutdown.
; Increase this if you have very long running tasks.
stopwaitsecs = 1000

; When resorting to send SIGKILL to the program to terminate it
; send SIGKILL to its whole process group instead,
; taking care of its children as well.
killasgroup=true

; if rabbitmq is supervised, set its priority higher
; so it starts first
priority=998 
```

还将以下行添加到 etc/supervisor/supervisord.conf

```
[include]
files = /etc/supervisor/conf.d/*.conf 
```

现在通过在终端中输入 supervisord 来启动主管，celery 将根据您上面所做的设置自动启动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-10T20:17:20.787

你可以运行：

```
python manage.py celery worker 
```

如果你有`djcelery`你的`INSTALLED_APPS`

# c# - 构建时 Visual Studio 中出现奇怪的功能区错误

> ID：10244478
> 
> 赞同：1
> 
> 时间：2012-04-20T10:27:59.473
> 
> 标签：c#, wpf, ribbon

在 Visual Studio 11 中使用 .NET 4.5 构建我的 WPF 应用程序时，我在 Visual Studio 中收到一个奇怪的错误。

我的 WPF XAML 标记如下：

```
<RibbonWindow x:Class="Fablelane.DesktopApplication.CreateStory"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Create new story" Height="468" Width="526">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Ribbon>
            <Ribbon.ApplicationMenu>
                <RibbonApplicationMenu>
                </RibbonApplicationMenu>
            </Ribbon.ApplicationMenu>
            <RibbonTab Margin="0" Header="Format">
                <RibbonGroup Header="Font">
                    <StackPanel Orientation="Horizontal">
                        <RibbonComboBox>
                            <RibbonGallery SelectedValue="Heading 1"
                          SelectedValuePath="Content"
                          MaxColumnCount="1">
                                <RibbonGalleryCategory>
                                    <RibbonGalleryItem Content="Heading 1" Foreground="#16ea00" FontSize="20" />
                                    <RibbonGalleryItem Content="Heading 2" Foreground="#00c6ff" FontSize="18" />
                                    <RibbonGalleryItem Content="Heading 3" Foreground="#999999" FontSize="16" />
                                    <RibbonGalleryItem Content="Heading 3" Foreground="#707070" FontSize="14" />
                                    <RibbonGalleryItem Content="Content" Foreground="#FF606060" />
                                </RibbonGalleryCategory>
                            </RibbonGallery>
                        </RibbonComboBox>
                    </StackPanel>
                    <RibbonControlGroup Margin="2">
                        <RibbonToggleButton Label="B"
    FontWeight="Bold" FontFamily="Times New Roman" Padding="2" />
                        <RibbonToggleButton Label="I"
    FontStyle="Italic" FontFamily="Times New Roman" Padding="2" />
                        <RibbonToggleButton Label="U" FontFamily="Times New Roman" Padding="2,2,2,0" />
                    </RibbonControlGroup>
                </RibbonGroup>
            </RibbonTab>
            <RibbonTab Margin="0" Header="Options">
            </RibbonTab>
        </Ribbon>
        <RichTextBox Grid.Row="1">

        </RichTextBox>
    </Grid>
</RibbonWindow> 
```

现在，当我构建时，我收到错误：

未知的构建错误，来自程序集“System.Windows.Controls.Ribbon，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089”的“System.Windows.Controls.Ribbon.RibbonGallery”类型中的“方法“get_Command”没有一个实现。

当我从代码中删除 RibbonGallery 元素时，它编译并运行得很好。

应该注意的是，我可以很容易地在 Visual Studio 中看到设计器视图渲染得很好，其中包含 RibbonGallery 元素。它只是在构建过程中失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:35:22.140

对我来说它看起来像一个错误，你为什么不使用反射器并检查 ICommand 的吸气剂是否正确暴露？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:36:09.193

我看不出有什么问题。

*   我有最新更新的 VS 11 Beta。
*   [从http://www.microsoft.com/en-us/download/details.aspx?id=11877](http://www.microsoft.com/en-us/download/details.aspx?id=11877)下载功能区（2010 年 10 月）
*   创建新的 WPF .NET 4.5 应用
*   添加对 System.Windows.Controls.Ribbon 的引用
*   将问题中的代码粘贴到应用程序中
*   设计、建造、运行，没问题

如果我使用 DotPeek 查看功能区程序集，则可以看到 Command 属性

```
public ICommand Command
{
  get
  {
    return (ICommand) this.GetValue(RibbonGallery.CommandProperty);
  }
  set
  {
    this.SetValue(RibbonGallery.CommandProperty, (object) value);
  }
} 
```

但是你似乎没有使用它。

是否值得从头开始创建一个新的测试应用程序？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-09T23:21:26.540

我们从 4.0 到 4.8 也遇到了同样的问题，但我们必须删除并重新将正确的 system.dll 添加到引用中。

# ios - 方向改变后缩放 UIImageView

> ID：10244479
> 
> 赞同：0
> 
> 时间：2012-04-20T10:28:04.277
> 
> 标签：ios, cocoa, uiview, uiimageview, contentmode

在我的应用程序中，我在 UIView 中有 UIIMageView，在纵向模式下，imageview 填充了 UIView 的整个区域，但是在改变方向后 UIView 旋转但没有拉伸，虽然我已经将 UIView 的内容模式设置为缩放来填充，这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:31:12.203

设置自动调整大小掩码：

```
yourUIImageViewInstance.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin; 
```

也读[这个](https://stackoverflow.com/questions/8388508/how-does-autoresizing-mask-work)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:33:39.703

你可以尝试使用

```
 imageview.frame=CGMakeRect(x, y, width, height); 
```

在 setPositionForOrientation 函数中

# ruby-on-rails - 如何指定没有自动增量的默认主键

> ID：10244482
> 
> 赞同：1
> 
> 时间：2012-04-20T10:28:23.717
> 
> 标签：ruby-on-rails

```
class Sizes < ActiveRecord::Migration
      def self.up
        create_table :sizes do |t|
          t.integer  :size,     :null => false
        end
      end

      def self.down
        drop_table :sizes
      end
end    

class Sizes < ActiveRecord::Migration
      def self.up
        Size.create(:id => 1, :size => 5)
        Size.create(:id => 2, :size => 10)
      end

      def self.down
        Size.delete_all
      end
end 
```

尝试使用命令填充数据库时`rake db:migrate`，我得到以下输出

```
select * from sizes;
id          size
1           5
2           10 
```

在我使用名为`rake db:rollback`. 我再次重新填充了数据库，现在它似乎如下

```
select * from sizes;
id          size
3           5
4           10 
```

我不希望主键改变，如何停止指定自动递增功能或指定关联硬编码主键 id 的能力，使其保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:04:04.133

`rake db:rollback`会让您后退一步，在您的情况下，这将删除您创建的尺寸 (1 => 5, 2 => 10)

您可以再退一步，这将删除表，然后再次运行迁移，重新创建表和数据。

或者，如果您只想返回一步，那么您可以在`self.down`方法中执行一些自定义 sql

```
def self.down
  Size.delete_all
  execute <<-SQL 
    ALTER TABLE Sizes AUTO_INCREMENT=0 
  SQL
end 
```

你也可以试试

```
create_table :sizes, :options => "auto_increment = 0" do |t|
  ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:03:42.823

尝试这个

```
create_table(:id => false) do |t|
  t.integer :own_id, :options => 'PRIMARY KEY'
end 
```

希望这可以帮助

# apache-flex - 单行s：Datagrid中整行的两行itemeditor？

> ID：10244483
> 
> 赞同：0
> 
> 时间：2012-04-20T10:28:28.023
> 
> 标签：apache-flex, flex4, flex-spark

我有一些带有非常标准的单行 itemrenderers 的 DataGrid，但需要为整行使用自定义的两行 itemeditor。我想/必须这样做，因为我不能单独编辑每个单元格，但需要先编辑整个对象才能保存它。

到目前为止，我遇到了两个大问题：

1.  如何放置/显示 itemeditor 以便它实际上适用于整行？
2.  如何强制 DataGrid 更改已编辑条目的行高，以便两行 itemeditor 不会渗入下面的行？

* * *

**基本上，我想要的是：** ![DataGrid 项目翻转](../Images/1213e7fcdcf581346e92a870c6885dfd.png) ![DataGrid 项目编辑](../Images/93dd1fd9d938bc1662838f678bd709c6.png)

* * *

**我的数据网格：**

```
<s:DataGrid id="myDataGrid" height="100%" width="100%" sortableColumns="false" editable="true" variableRowHeight="true">
    <s:columns>
        <s:ArrayCollection>
            <s:GridColumn dataField="foo" itemEditor="myItemEditor"/>

            <s:GridColumn dataField="bar" itemEditor="myItemEditor"/>

            <s:GridColumn width="24" itemRenderer="myItemRenderer"/>
        </s:ArrayCollection>
    </s:columns>
</s:DataGrid> 
```

**我的项目编辑器：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:GridItemEditor xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" xmlns:mx="library://ns.adobe.com/flex/mx">
    <fx:Script>
        <![CDATA[
            override public function prepare():void {
                itemLongname.text = this.data["longName"];
                itemShortname.text = this.data["shortName"];
            }
        ]]>
    </fx:Script>

    <s:layout>
        <s:VerticalLayout/>
    </s:layout>

    <s:Group>
        <s:layout>
            <s:HorizontalLayout/>
        </s:layout>

        <s:TextInput id="itemLongname"/>

        <s:TextInput id="itemShortname"/>
    </s:Group>

    <s:Group>
        <s:layout>
            <s:HorizontalLayout/>
        </s:layout>

        <s:Rect width="100%"/>

        <s:Button id="itemSaveButton" label="Save"/>

        <s:Button id="itemCancelButton" label="Cancel"/>
    </s:Group>
</s:GridItemEditor> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:01:40.717

我认为这对你有帮助:)

[http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7bf2.html#WS2db454920e96a9e51e63e3d11c0bf65e9f-7fd4](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7bf2.html#WS2db454920e96a9e51e63e3d11c0bf65e9f-7fd4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T20:03:22.910

这是另一种选择：[http](http://blog.flexicious.com/post/Flexicious-30-Release-Grid-Edition.aspx) ://blog.flexicious.com/post/Flexicious-30-Release-Grid-Edition.aspx （项目编号 5）。

![在此处输入图像描述](../Images/7b2b9e70569dedcd67634f8a7925eaab.png)

# ruby-on-rails-3 - Rails 3.0：form_tag 如何将此 form_for 转换为 form_tag。

> ID：10244484
> 
> 赞同：0
> 
> 时间：2012-04-20T10:28:29.317
> 
> 标签：ruby-on-rails-3

这是我的应用程序的登录页面，但为用户选择的角色没有反映在数据库中，所以我想尝试将 form_for 更改为 form_tag 以查看数据是否被提交。

```
 <%= form_for(@user) do |f| %>
      <% if @user.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>
          <ul>
            <% @user.errors.full_messages.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
      <% end %>
      <div class="field">
        <%= f.label :email %><br />
        <%= f.text_field :email %>

      </div>
      <div class="field">
        <%= f.label :username %><br />
        <%= f.text_field :username %>
      </div>
      <% if @current_method == "new" %>
        <div class="field">
          <%= f.label :password %><br />
          <%= f.password_field :password %>
        </div>
        <div class="field">
          <%= f.label :password_confirmation %><br />
          <%= f.password_field :password_confirmation %>
        </div>
      <% end %>
      <% for role in Role.find(:all) %>
        <div>
          <%= check_box_tag "user[role_ids][]", role.id, @user.roles.include?(role) %>
          <%= role.name %>
        </div>
      <% end %>
      <div class="actions">
        <%= f.submit %>
      </div>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:42:37.380

```
<%= form_tag users_path, methods=> post:do %>
  <% if @user.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>
      <ul>
        <% @user.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="field">
    <%= label_tag 'email' %><br />
    <%= text_field_tag :email, params[:email], :placeholder => "Email" %>
  </div>
  <div class="field">
    <%= label_tag 'username' %><br />
    <%= text_field_tag :username, params[:username], :placeholder => "Username" %>
  </div>
  <% if @current_method == "new" %>
    <div class="field">
      <%= label_tag :password %><br />
      <%= password_field_tag 'password' %>
    </div>
    <div class="field">
      <%= label_tag :password_confirmation %><br />
      <%= f.password_field_tag 'password_confirmation' %>
    </div>
  <% end %>
  <% for role in Role.find(:all) %>
    <div>
      <%= check_box_tag "user[role_ids][]", role.id, @user.roles.include?(role) %>
      <%= role.name %>
    </div>
  <% end %>
  <div class="actions">
 <%= submit_tag 'submit' %>
  </div>
<% end %> 
```

# html - 添加内容后，容器 div 向左移动

> ID：10244485
> 
> 赞同：0
> 
> 时间：2012-04-20T10:28:30.037
> 
> 标签：html, css

嗨，我有一个 4 页的网站，分为以下页面：

*   指数
*   关于
*   我的工作
*   接触

在索引页面上，我`nivoslider`的高度为 350 像素。

在大约 7 个联系页面上，我还有一个高度为 350 像素的 div。

在我的工作页面上，我有一个没有高度的 div，因此它可以随内容垂直扩展。

出于某种原因，如果我添加的内容会使我的工作页面 div 超过 350 像素，它会导致主容器 div 稍微向左移动。每个页面上的容器都是相同的，并且只有导致它的内容。我尝试过文本、图像和其他 div，它们都会导致相同的问题。

的HTML：

```
body {
background-color: #efe0b5;
background-image: url(images/stripe.png);
background-repeat: repeat-x;
background-position: left top;
}
</style>
</head>
<body>
<div id="wrapper">
<div id="header"> 
<div id="logo">
<img src="images/logo.png" width="145" height="40" alt="Joanne Stansfield Logo" />
</div>
<div id="nav">
<ul class="nav-bar">
<li class="home"><a href="index.html">Home</a></li>
<li class="about"><a href="about.html">About Us</a></li>
<li class="mywork"><a href="mywork.html">My Work</a></li>
<li class="getintouch"><a href="getintouch.html">Get in Touch</a></li>     
</ul>
</div>         
</div>
<div id="main4">
<img src="images/mywork-header.png" width="920" height="70" alt="About Me" />    
</div>
<div id="footer"></div>
</div>
</div>
</body>
</html> 
```

CSS

```
* {
margin-top: 0px;
margin-right: auto;
margin-bottom: 0px;
margin-left: auto;
padding-top: 0px;
padding-right: 0px;
padding-bottom: 0px;
padding-left: 0px;
}

@font-face {
font-family: 'CoopLightRegular';
src: url(/cooplight-webfont.eot) format('embedded-opentype'),
     url(/cooplight-webfont.eot?#iefix) format('embedded-opentype'),
     url(/cooplight-webfont.woff) format('woff'),
     url(/cooplight-webfont.ttf) format('truetype'),
     url(/cooplight-webfont.svg#CoopLightRegular) format('svg');
font-weight: normal;
font-style: normal;
}
#wrapper {
width: 960px;
padding: 0px;
margin-top: 0;
margin-right: auto;
margin-bottom: 0;
margin-left: auto;
}
#wrapper #header {
height: 200px;
width: 100%;
margin-top: 25px;
float: left;
}
#wrapper #header #logo {
float: left;
height: 200px;
width: 560px;
}
#wrapper #header #logo img {
height: 40px;
width: 145px;
margin-top: 60px;
}

#wrapper #header #nav {
position:relative;
width: 400px;
height: 200px;
float:right;
overflow: hidden;
}
#wrapper #header .nav-bar li {
position: absolute;
list-style: none;
}
#wrapper #header .nav-bar li a { 
display: block;
width: 200px;
height: 200px;
text-indent: -9999px;
}
#wrapper #nav .nav-bar li.home { left: 70px; top: -30px; }
#wrapper #nav .nav-bar li.home a { background:url(../images/home.png) no-repeat; }
#wrapper #nav .nav-bar li.home a:hover { background:url(../images/home.png) no-repeat 0      -200px; }

#wrapper #nav .nav-bar li.about { left: 130px; top: -30px;}
#wrapper #nav .nav-bar li.about a { background:url(../images/aboutme.png) no-repeat; }
#wrapper #nav .nav-bar li.about a:hover { background:url(../images/aboutme.png) no-repeat 0 -200px; }

#wrapper #nav .nav-bar li.mywork { left: 190px; top: -30px; }
#wrapper #nav .nav-bar li.mywork a { background:url(../images/mywork.png) no-repeat; }
#wrapper #nav .nav-bar li.mywork a:hover { background:url(../images/mywork.png) no-repeat 0 -200px; }

#wrapper #nav .nav-bar li.getintouch { left: 250px; top: -30px; }
#wrapper #nav .nav-bar li.getintouch a { background:url(../images/getintouch.png) no-repeat; }
#wrapper #nav .nav-bar li.getintouch a:hover { background:url(../images/getintouch.png) no-repeat 0 -200px; }

#wrapper #main {
background-color: #FFF;
width: 100%;
height: 350px;
float: left;
}
#wrapper #main3 {
background-color
: #FFF;
width: 100%;
height: 350px;
float: left;
}
#container #wrapper #main3 #left {
background-color: #999;
float: left;
height: 200px;
width: 440px;
margin-right: 10px;
margin-left: 10px;
margin-top: 30px;
}
#container #wrapper #main3 #right {
background-color: #666;
float: right;
height: 200px;
width: 440px;
margin-right: 10px;
margin-left: 10px;
margin-top: 30px;
}
#container #wrapper #main3 #form {
background-color: #CCC;
height: 200px;
width: 920px;
margin-top: 30px;
}
#wrapper #main4 {
background-color: #FFF;
width: 100%;
min-height: 350px;
float:left;
}
#container #wrapper #main4 .gallery {
background-color: #03C;
height: 200px;
width: 960px;
margin-top: 30px;
margin-bottom: 30px;
float: left;
}
#wrapper .title {
height: 70px;
width: 100%;
float: left;
}
.nivoSlider {
position:relative;
width:960px; /* Change this to your images width */
height:350px; /* Change this to your images height */
background:url(images/loading.gif) no-repeat 50% 50%;
}
.nivoSlider img {
position:absolute;
top:0px;
left:0px;
display:none;
}
.nivoSlider a {
border:0;
display:block;
}
#wrapper #footer {
height: 70px;
width: 960px;
font-family: Trebuchet MS, Arial, Helvetica, sans-serif;
font-size: 12px;
color: #999;
text-align: center;
line-height: 20px;
margin-top: 50px;
margin-left: auto;
margin-right: auto;
float: left;
}
#wrapper #footer img {
height: 20px;
width: 55px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T15:13:36.567

我曾经遇到过同样的问题，这让我发疯了......这是出现在页面中的滚动条很长......

这里有一些解决方案... [浏览器滚动条](https://stackoverflow.com/questions/26879/browser-scrollbar)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:27:19.527

也许你可以给那个有问题的特定 div 一个类，并在左侧添加一些 css 填充 - 即 .class {padding:0px 0px 0px 10px} 或者问题有多大。

# java - java将hashmap发送到Freemarker模板不正确，未定义参数

> ID：10244488
> 
> 赞同：0
> 
> 时间：2012-04-20T10:28:37.087
> 
> 标签：java, spring, freemarker

```
Map<String, String> model = new HashMap<String, String>();
model.put("A", "1");
model.put("b", "2");
model.put("c", "3");
try{
 content.append(FreeMarkerTemplateUtils.processTemplateIntoString(configuration.getTemplate(ftlName), model));
... 
```

Ftl 文件如下所示：

```
<html><head></head><body>
${model["A"]}

<#list model?keys as prop>
    ${model[prop]}
</#list>
</body>
</html> 
```

无论我收到错误消息：

```
Expression model is undefined on line 6, column 3 in vslEmail.ftl.
The problematic instruction:
----------
==> ${model["A"]} [on line 6, column 1 in vslEmail.ftl]
----------

Java backtrace for programmers:
----------
freemarker.core.InvalidReferenceException: Expression model is undefined on line 6, column 3 in vslEmail.ftl. 
```

如果我删除尝试`model`仅使用列表指令访问，我会得到同样的错误......任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:52:17.690

万一其他人像我一样愚蠢地困惑，你必须在 FTL 中这样做：

```
<html><head></head><body>
${A}
</body>
</html> 
```

或使 A 成为哈希图而不是字符串并循环遍历它，而不是“顶部”模型对象。

# android - Android - 列表元素下方的菜单栏

> ID：10244496
> 
> 赞同：1
> 
> 时间：2012-04-20T10:29:09.707
> 
> 标签：android, show-hide, menubar

我有一个列表视图。我的观点是，在该视图上选择一个元素后，我想在该元素的正下方显示一个菜单栏。我尝试做的几乎是应用程序 Any.Do 之类的东西。

这是我打算做什么的[图片。](http://www.google.com/imgres?um=1&hl=pt-PT&sa=N&biw=1366&bih=643&tbm=isch&tbnid=9RPbcZMzBhS6RM:&imgrefurl=http://android.appstorm.net/reviews/productivity-reviews/any-do-helps-you-make-things-happen/&docid=lksoRGUDWLOCvM&imgurl=http://android.appstorm.net/wp-content/uploads/2011/11/AnyDO2.jpg&w=800&h=1280&ei=x56GT8TiF4SmhAf87cDRCA&zoom=1&iact=hc&vpx=402&vpy=107&dur=617&hovh=284&hovw=177&tx=106&ty=174&sig=111827409133443286618&page=1&tbnh=139&tbnw=100&start=0&ndsp=22&ved=1t:429,r:1,s:0,i:68)

我该怎么做 ？我宁愿不使用 GreenDroid。

为了填充数组，我使用了这段代码：

任务板类

```
setListAdapter(new SimpleAdapter(this, array_tasks, R.layout.dash_tasks,
  new String[] { "task", "project" , "date"}, new int[] { R.id.dashtask,
  R.id.taskproject, R.id.final_date})); 
```

R.layout.dash_tasks 是即时显示给用户的视图。这是一段代码，用于调用我要显示的菜单栏：

dash_tasks.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/menu_bar"
            style="@style/page"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:baselineAligned="true"
            android:gravity="center_vertical"
            android:orientation="horizontal" 
            android:visibility="gone">

            <include layout="@layout/menubar"></include>

        </RelativeLayout> 
```

**编辑：**

我想出了如何找到我点击的位置。问题是，它是一个相对位置。我的意思是，如果我单击数组上的第二个项目，菜单栏将每 7 个项目出现在第二个位置（这就是填充页面的项目数）。我猜这个位置是根据屏幕而不是 ListView..

```
 lv.setOnItemClickListener(new OnItemClickListener() { 
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

        View x= parent.getChildAt(position);
        View a= x.findViewById(R.id.mini_menu_bar);
        a.setVisibility(View.VISIBLE); 
```

我希望这可以帮助您理解问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:58:22.777

这取决于您要同时显示多少视图。如果只有一个，并且您希望它在没有太多编程的情况下脱颖而出，我会选择`QuickAction`. 如果您同时展开多个视图，我的建议是使用`RelativeLayout`and BeLow。你需要做的很简单。确保有一种方法可以让您找到被点击的项目下方的项目，在被点击的项目下方添加新视图，并添加将被点击项目下方的项目更改为新项目下方。类似于下面的代码

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
        LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.addRule(RelativeLayout.BELOW, view.getId()); 
```

另一种解决方案是使用`LinearLayout`，但需要一个循环来查找所点击项目的索引并在其下方添加新项目：

```
parent.addView(subItem, index+1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:33:21.267

您所做的是，在您的列表项布局 xml 中，您还有菜单（包装在垂直线性布局中），但将其设置为 android:visibility="gone"。按下该项目时，您只需显示隐藏的菜单视图。

# silverlight - 文本块在星宽的网格中错误地换行

> ID：10244497
> 
> 赞同：1
> 
> 时间：2012-04-20T10:29:10.920
> 
> 标签：silverlight, textblock, word-wrap

我正在使用 ListBox，项目模板是一个有两列的网格。每列需要占用一半的可用空间。

如果这些列之一中的文本变得太大，那么我需要它来换行。

我正在使用以下代码：

```
<ListBox.ItemContainerStyle>
    <Style TargetType="ListBoxItem">
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    </Style>
 </ListBox.ItemContainerStyle>
 <ListBox.ItemTemplate>
     <DataTemplate>
         <Grid>
             <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="1*"/>
                  <ColumnDefinition Width="1*"/>
             </Grid.ColumnDefinitions>
                    <Border Grid.Column="0" BorderBrush="HotPink" BorderThickness="2">
                        <TextBlock Text="{Binding Title}"
                                   FontFamily="Arial" 
                                   FontSize="16"/>
                    </Border>
                    <Border Grid.Column="1" BorderBrush="HotPink" BorderThickness="2">
                        <TextBlock Text="{Binding Description}" 
                                   FontFamily="Arial" 
                                   FontSize="16" 
                                   TextWrapping="Wrap"/>
                    </Border>

                    </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate> 
```

当文本不长时，这很好用。如果文本太长，则第二列开始占用尽可能多的空间，然后溢出屏幕。

我使用 Hot Pink 边框来显示下图中每列的轮廓。 ![文本换行的网格问题](../Images/1eca9d2b15fe91a82ab933aa90b48a5e.png)

反正有没有让文本换行以这种方式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:57:15.683

这是不可能的。您必须实现自己的面板，以确保可用空间始终在使用 Measure 和 Arrange 覆盖方法的控件之间均匀分布。

# android - Qt的非常奇怪的运行结果

> ID：10244500
> 
> 赞同：0
> 
> 时间：2012-04-20T10:29:21.953
> 
> 标签：android, qt, qt-creator

我遇到了一个非常奇怪的问题。

我有一个 Qt for Android 代码。它工作得很好。但是这周当我运行它时，它突然出现了一个奇怪的问题。

问题是：即使我评论或删除主函数中的所有代码。只剩下：

```
int main(int argc, char *argv[])
{
  return 0;
} 
```

但是运行结果和我之前删除主函数中的所有代码一样。似乎 Qt 创建者没有保存我的更改。

我试过：1）重新启动计算机2）更改Android设备3）清除项目并重新运行它。不管我做什么，程序的运行结果都是一样的。

你以前遇到过这个奇怪的问题吗？可能的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:23:27.070

这是因为之前生成的 moc 文件和 .o 文件仍然存在。

在终端中转到项目的构建路径，更改为超级用户，然后运行`make clean`以清理所有这些文件，然后从 QtCreator 构建项目并运行它。答对了！！

这是因为 qt-creator 尝试清理所有二进制文件，但它认为它没有清理所有这些文件的权限。通常在将源从一个位置复制到另一个位置时会发生这种情况。

# .net - 用于添加服务参考的 T4 模板

> ID：10244501
> 
> 赞同：0
> 
> 时间：2012-04-20T10:29:24.023
> 
> 标签：.net, wcf, visual-studio, wcf-data-services, t4

我想为我的自动生成的客户端代理创建接口，我想在我的库之外公开这些接口并保持内部实现 - 目前生成的类是公共的，即使我在添加服务引用对话框中将它们设置为内部。

我查看了 T4 模板，但无法找到有关如何执行此操作的任何信息。

有谁知道我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:57:10.620

也许 WCF 数据服务团队用来生成他们的代理类的 T4 模板可能会让您开始编写自己的 T4 模板来生成您的代码调整，在我的例子中是这样。

[http://blogs.msdn.com/b/astoriateam/archive/2012/01/19/announcing-odata-t4-for-c-preview-1.aspx](http://blogs.msdn.com/b/astoriateam/archive/2012/01/19/announcing-odata-t4-for-c-preview-1.aspx)

# report - 需要将参数设置为只读，

> ID：10244506
> 
> 赞同：1
> 
> 时间：2012-04-20T10:29:57.830
> 
> 标签：report, abap, sap-selection-screens

在选择屏幕中，我有一个名为“作者”的参数，我使用其他报告中的“提交”调用了该报告，并将值传递给“作者”。现在我需要将“作者”参数设为只读。我怎样才能做到这一点？

我使用了以下代码，

```
 LOOP AT SCREEN.
   IF SCREEN-NAME = 'author'.
     SCREEN-INPUT = '0'.
     MODIFY SCREEN.
     EXIT.
   ENDIF.
 ENDLOOP. 
```

但它不起作用。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:49:51.710

将您的代码放在`at selection-screen output`-event 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:07:28.410

免责声明：此答案不能完全回答您的问题，但也许它是满足您需要的更简单的解决方案。

如果您只需要一个参数，`SUBMIT`您可以使用

```
PARAMETERS AUTHOR NO-DISPLAY. 
```

该参数将在选择屏幕上不可见，但可以通过 使用`SUBMIT`。

这不是“只读”参数，而是“不显示”参数。

# android - 如何在 Android 上提高位图绘制的性能

> ID：10244509
> 
> 赞同：7
> 
> 时间：2012-04-20T10:30:13.323
> 
> 标签：android, opengl-es, android-ndk, ffmpeg

我创建了一个基于 FFmpeg 的电影播放器​​。它工作正常。解码速度非常快，在 LG P970（带有 Neon 的 Cortex A8）上，我的平均 70 fps 和 640 x 424 分辨率视频流包括 YUV2RGB 转换。但是，有一个瓶颈。它在画布上绘图。

我使用jnigraphics原生库将图片数据填充到原生端的位图中，然后我在SurfaceView的Canvas上绘制这个位图。这是一种非常简单和常见的方法，但是对于 640 x 424 分辨率的位图，绘制需要 44 毫秒，这会将 fps 降低到 23 并使该技术无法使用……它需要比整个 A/V 帧解码更多的时间！

有什么方法可以显着更快地绘制位图吗？我更喜欢使用 OpenGLES 2 在本机代码中完全渲染，但我读过它也可能很[慢](https://stackoverflow.com/questions/8867616/android-ffmpeg-opengl-es-render-movie)。所以现在怎么办？...

如何尽可能快地渲染位图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T17:31:45.400

在 GLES1.x 中绘制它们。您不需要使用 GLES2，因为您将没有用处，或者至少在您的问题的上下文中不会使用着色器，这将是使用 GLES2.x 的一般主要原因。因此，为简单起见，GLES1.x 将是理想的。您需要做的就是将字节缓冲区绘制到屏幕上。在我的 Galaxy S (Vibrant) 上，这大约需要 3 毫秒。我的壁纸中字节 [] 的大小是 800x480x3 或 1152000，这比您正在使用的要大得多。

我相信本指南应该为您指明正确的方向。

[http://qdevarena.blogspot.com/2009/02/how-to-load-texture-in-android-opengl.html](http://qdevarena.blogspot.com/2009/02/how-to-load-texture-in-android-opengl.html)

至于从本机代码访问画布的概念，我将完全避免这种情况，并通过尽可能将所有内容卸载到 GPU 来遵循 OpenGL 实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T17:44:33.683

我记得在 GoogleIO 期间的 Replica Island 演示中，设计师说使用 OpenGL 'draw_texture' 扩展`glDrawTexfOES`是最快的方式到屏幕上，并且比仅绘制带有纹理的常规四边形要快得多（我假设你正在使用OpenGL）。

你不能旋转纹理，但听起来你不需要那样。

# jquery - 在没有使用 AJAX、pushState、jQuery 的情况下循环浏览页面？

> ID：10244510
> 
> 赞同：1
> 
> 时间：2012-04-20T10:30:18.927
> 
> 标签：jquery, ajax, pushstate

我正在开发一个 Rails 项目，其中有许多简短的帖子，我想添加导航链接（下一个和上一个）以允许用户循环浏览帖子。

但是，我想**异步**执行此操作，这就是我遇到麻烦的地方-**我只是不知道从哪里开始**（我是菜鸟）。

我一直在研究 pushState、AJAX 和 jQuery 的各种组合，但都无济于事。我觉得这个问题必须有一个简单的解决方案，但我现在不确定。

**例如，您可以查看：[http](http://www.brotips.ru/76/)** ://www.brotips.ru/76/ - 左右导航箭头。

我不是要求一个完整的解决方案（当然这会很棒），而是朝着正确的方向前进。

提前非常感谢。

# javascript - 右键单击 div 时未打开上下文菜单

> ID：10244520
> 
> 赞同：1
> 
> 时间：2012-04-20T10:31:10.670
> 
> 标签：javascript, jquery, javascript-events

我正在使用 contextmenu.js（jQuery 上下文菜单插件）在右键单击 div 时打开上下文菜单。但不知何故，只有默认菜单正在打开。我无法找到确切的问题。

在调试时，它显示右键单击它会将上下文菜单附加到 div。但是当我右键单击 div 时，会打开默认菜单。

我知道我提供的信息非常有限，但任何建议和帮助都将是可观的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:01:54.180

I think you should do something like this, if that is your element that should get the menu

```
<div id="item-1">This should have a menu</div> 
```

Then your javascript should look like this:

```
$(document).ready( function() {
  $('#item-1').contextMenu({
    menue: 'menueName'
  },
  function(action, el, pos) {
    // do sth when the menu was clicked
    alert('Action ' + action + ' was clicked on ' + $(el).attr('id'));
  });
}); 
```

The menue itselfe should defined in a list like:

```
<ul id="#menueName" class="contextMenu">
  <li class="action1">
    <a href="#action1>Action 1</a>
  </li>
  <li class="action1">
    <a href="#action2>Action 2</a>
  </li>
</ul> 
```

Also make sure you have jQuery 1.3 or above included in your page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:05:07.350

我有同样的问题。`if(jQuery)( function() {`在 jquery.contextMenu.js 的开头替换为`(function($, undefined){`修复了问题。我希望这会有所帮助。

# json - MonoDroid下ServiceStack JSON处理出错

> ID：10244523
> 
> 赞同：1
> 
> 时间：2012-04-20T10:31:18.273
> 
> 标签：json, xamarin.android, servicestack

我正在尝试在 MonoDroid 项目中使用 ServiceStack 进行 Json 序列化/反序列化。

我已经构建了 ServiceStack 以在 MonoDroid 环境中运行它，但现在我遇到了 JSON 反序列化的问题。

示例代码：

```
public class Track
{
        public string Id { get; set; }
        public string Title { get; set; }
        public string Artist { get; set; }
        public string Hash { get; set; }
        public string Type { get; set; }
    }
}
...
var track = new Track { Id = "1", Artist = "artist name", Hash = "654874", Title = "song title", Type = "mp3", };
var json = ServiceStack.Text.JsonSerializer.SerializeToString(track);
var track1 = ServiceStack.Text.JsonSerializer.DeserializeFromString<Track>(json); 
```

在反序列化我有一个例外：未处理的异常：

```
System.ArgumentNullException: Argument cannot be null.
Parameter name: method 
```

堆栈跟踪：

```
[External Code] 
0x5E in ServiceStack.Text.Json.JsonReader.GetParseFn at [...]\Android\ServiceStack.Text\src\ServiceStack.Text\Json\JsonReader.Generic.cs:36 C#
0x2 in ServiceStack.Text.Json.JsonTypeSerializer.GetParseFn at [...]\Android\ServiceStack.Text\src\ServiceStack.Text\Json\JsonTypeSerializer.cs:283 C#
0xF in ServiceStack.Text.Common.TypeAccessor.Create at [...]\Android\ServiceStack.Text\src\ServiceStack.Text\Common\DeserializeType.cs:146  C#
0x142 in ServiceStack.Text.Common.DeserializeType`1[[ServiceStack.Text.Json.JsonTypeSerializer, ServiceStack.Text, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]].GetParseMethod at [...]\Android\ServiceStack.Text\src\ServiceStack.Text\Common\DeserializeType.cs:60 C#
0x43A in ServiceStack.Text.Common.JsReader`1[[ServiceStack.Text.Json.JsonTypeSerializer, ServiceStack.Text, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]].GetParseFn at [...]\Android\ServiceStack.Text\src\ServiceStack.Text\Common\JsReader.cs:100  C#
0x6 in ServiceStack.Text.Json.JsonReader`1[[Database.Models.Track, AssemblyName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]..cctor at [...]\Android\ServiceStack.Text\src\ServiceStack.Text\Json\JsonReader.Generic.cs:58  C#
0x1B in ServiceStack.Text.JsonSerializer.DeserializeFromString at [...]\Android\ServiceStack.Text\src\ServiceStack.Text\JsonSerializer.cs:33    C# 
```

正如我所见，有：

```
var genericType = typeof(JsonReader<>).MakeGenericType(type);
var mi = genericType.GetMethod("GetParseFn", BindingFlags.Public | BindingFlags.Static);
parseFactoryFn = (ParseFactoryDelegate)Delegate.CreateDelegate(typeof(ParseFactoryDelegate), mi); 
```

genericType 是“ServiceStack.Text.Json.JsonReader`1[System.String]”类型是“System.String”

所以，“mi”变量为空

有什么想法可以解决它，或者在哪里看？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:21:11.590

这里的问题是您在构建配置中启用了[链接](http://docs.xamarin.com/android/advanced_topics/linking)`GetParseFn()`，并且该方法被链接了，因为它没有被明确引用。

链接器是一个静态分析工具，包含在 Mono for Android 的构建过程中。它将扫描您已编译的应用程序并实际删除任何未明确引用的 .NET（或在本例中为已编译的 ServiceStack 类库）。这对减小应用程序的大小有很大帮助，但您可能会遇到问题，如此处所示。由于该`GetParseFn()`方法从未被显式引用（它是通过反射调用的），因此链接器不知道需要它并将其链接。

有几种方法可以处理这个问题。

1.  完全禁用链接：您可以在项目的属性中关闭链接。一般来说，调试版本更容易关闭它，而发布版本则打开它。当然，如果您打算进行发布构建，这显然不是一个完整的解决方案。
2.  仅链接 SDK 程序集：此选项将告诉链接器仅在 .NET BCL 和 Android SDK 上进行操作，并且不理会您的库。
3.  使用[`PreserveAttribute`](http://docs.mono-android.net/?link=T%3aAndroid.Runtime.PreserveAttribute)：使用此属性，您可以告诉链接器保留您知道需要的某些部分，即使它们没有明确引用。由于 ServiceStack 是一个外部库，而不是您自己的，因此在这种情况下，这可能不是最佳解决方案。
4.  使用[Linkskip](http://docs.xamarin.com/android/advanced_topics/build_process#Linking)：此选项允许您指定链接器不应触及的特定程序集，允许您保持链接器打开，但只需在需要时选择退出。

就个人而言，在您的情况下，我建议您选择 Linkskip 路线。它将允许您仍然获得链接器的所有好处，但让它忽略 ServiceStack 以避免此类问题。在您的项目文件中，您最终会得到类似以下内容的内容：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <AndroidLinkMode>Full</AndroidLinkMode>
    <AndroidLinkSkip>ServiceStack.Text</AndroidLinkSkip>
</PropertyGroup> 
```

# jsf-2 - Java EE 6 - JSF 控制器

> ID：10244525
> 
> 赞同：3
> 
> 时间：2012-04-20T10:31:20.243
> 
> 标签：jsf-2, java-ee-6

在多年没有接触 EE 之后，我开始使用 Java EE 6（我在 Spring 领域已经有一段时间了）。

在 JSF 2 中，我认为我们不再真正拥有控制器是否正确。那项工作是由托管 bean 完成的吗？

如果是这样，那么将“服务”类（带有 CDI）注入我的托管 bean 以处理业务逻辑（并随后调用 DAO）是否被认为是正常做法？

我买了一本书（PacktPub 的'EE 6 with Netbeans'）并阅读了很多教程，但我仍然不清楚如何正确地做。

作为一个额外的问题，是否有一个我可以下载的参考“PetStore”风格的应用程序，它以最佳实践的方式将所有内容链接在一起？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:07:14.090

> *在 JSF 2 中，我认为我们不再真正拥有控制器是否正确。那项工作是由托管 bean 完成的吗？*

这取决于您如何定义术语控制器。有些人将托管 bean 与控制器混淆，但它们宁愿属于 MVC 的模型部分，或者位于模型、视图和控制器“之间”（参见[Arjan Tijms](https://stackoverflow.com/a/10114158/620338)对类似问题的这个很好的回答）。

> *如果是这样，那么将“服务”类（带有 CDI）注入我的托管 bean 以处理业务逻辑（并随后调用 DAO）是否被认为是正常做法？*

这是可以做到的，并且是正常的做法（我在所有项目中都这样做）。但请注意，注入并不总是按预期工作，因此例如您不能将托管 bean 注入 CDI bean（请参阅[我](https://stackoverflow.com/a/9921449/620338)对类似问题的回答）。

> *作为一个额外的问题，是否有一个我可以下载的参考“PetStore”风格的应用程序，它以最佳实践的方式将所有内容链接在一起？*

您可以查看[Netbeans 教程](http://netbeans.org/kb/trails/java-ee.html)。在那里，您可以找到有关该主题的大量信息。强烈推荐访问[BalusC 的博客。](http://balusc.blogspot.de/)

# vb.net - 如何使用 WSDL 文件在 .NET 中创建代理类？

> ID：10244526
> 
> 赞同：1
> 
> 时间：2012-04-20T10:31:21.063
> 
> 标签：vb.net, soap, proxy, wsdl, axis

我一直在尝试使用 Apache Axis SOAP Web 服务的 WSDL 文件在 VB.NET 中生成代理类。

他们为我提供了 WSDL 文件，当我使用 WSDL.exe 命令（在 Visual Studio 08 中）并将其指向本地路径时出现错误。

```
wsdl /language:vb c:\Orders.wsdl 
```

（我正在尝试创建一个使用托管在 Apache Axis 2 上的 SOAP Web 服务的 .NET 客户端）

**错误**

```
Unable to import binding 'OrdersSoapBinding' from namespace 'urn:company:orders:schemas:OrderTypes:1.00'.

-Unable to import operation 'placeOrder'

-The element 'urn:company:remtp:schemas:PlaceOrderRequest:1.00:PlaceOrderRequest' is missing

if you would like more help, please type 'wsdl /?' 
```

如果我使用 svcutil.exe，我还会收到一条错误消息...

```
svcutil.exe C:\Orders.wsdl /t:code /l:VB /o:"C:\Orders.VB" 
```

是什么导致了问题？

您的帮助将不胜感激，谢谢。

**WSDL 代码**

```
 <?xml version="1.0" encoding="UTF-8"?>

<wsdl:definitions 
        targetNamespace="urn:company:orders:schemas:OrderTypes:1.00" 
        xmlns:impl="urn:company:orders:schemas:OrderTypes:1.00" 
        xmlns:apachesoap="http://xml.apache.org/xml-soap" 
        xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" 
        xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"

        xmlns:poreq="urn:company:remtp:schemas:PlaceOrderRequest:1.00"
        xmlns:poresp="urn:company:remtp:schemas:PlaceOrderResponse:1.00"
        xmlns:coreq="urn:company:remtp:schemas:CommitOrderRequest:1.00"
        xmlns:coresp="urn:company:remtp:schemas:CommitOrderResponse:1.00"
        xmlns="http://schemas.xmlsoap.org/wsdl/">

        <wsdl:types>
                <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:company:orders:schemas:OrderTypes:1.00">
        <import namespace="urn:company:remtp:schemas:PlaceOrderRequest:1.00" schemaLocation="../schemas/placeOrderRequest.xsd"/>

        <import namespace="urn:company:remtp:schemas:PlaceOrderResponse:1.00" schemaLocation="../schemas/placeOrderResponse.xsd"/>

        <import namespace="urn:company:remtp:schemas:CommitOrderRequest:1.00" schemaLocation="../schemas/commitOrderRequest.xsd"/>

        <import namespace="urn:company:remtp:schemas:CommitOrderResponse:1.00" schemaLocation="../schemas/commitOrderResponse.xsd"/>

        </schema>

        </wsdl:types>

        <wsdl:message name="placeOrderRequest">
        <wsdl:part element="poreq:PlaceOrderRequest" name="parameters"/>
        </wsdl:message>

        <wsdl:message name="placeOrderResponse">
                <wsdl:part element="poresp:PlaceOrderResponse" name="parameters"/>
        </wsdl:message>

        <wsdl:message name="commitOrderRequest">
                <wsdl:part element="coreq:CommitOrderRequest" name="parameters"/>
        </wsdl:message>

        <wsdl:message name="commitOrderResponse">
                <wsdl:part element="coresp:CommitOrderResponse" name="parameters"/>
        </wsdl:message>

        <wsdl:portType name="Orders">

                <wsdl:operation name="placeOrder">
                        <wsdl:input message="impl:placeOrderRequest"/>
                        <wsdl:output message="impl:placeOrderResponse"/> 
                </wsdl:operation>

                <wsdl:operation name="commitOrder">
                        <wsdl:input message="impl:commitOrderRequest"/>
                        <wsdl:output message="impl:commitOrderResponse"/>
                </wsdl:operation>

        </wsdl:portType>

        <wsdl:binding name="OrdersSoapBinding" type="impl:Orders">
                <wsdlsoap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>

                <wsdl:operation name="placeOrder">
                        <wsdlsoap:operation soapAction=""/>

                        <wsdl:input name="placeOrderRequest">
                                <wsdlsoap:body use="literal" />
                        </wsdl:input>

                        <wsdl:output name="placeOrderResponse">
                                <wsdlsoap:body use="literal" />
                        </wsdl:output>

                </wsdl:operation>

                <wsdl:operation name="commitOrder">
                        <wsdlsoap:operation soapAction=""/>

                        <wsdl:input name="commitOrderRequest">
                                <wsdlsoap:body use="literal" />
                        </wsdl:input>

                        <wsdl:output name="commitOrderResponse">
                                <wsdlsoap:body use="literal" />
                        </wsdl:output>

                </wsdl:operation>

        </wsdl:binding>

        <wsdl:service name="OrdersService">
                <wsdl:port name="Orders" binding="impl:OrdersSoapBinding">
                        <wsdlsoap:address location="https://companyorders.co.uk/endpoints/services/Orders"/>
                </wsdl:port>
        </wsdl:service>

</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:06:30.360

查看您提供的 wsdl 文件，您将看到对四个 xsd（xml xchema 文档）文件的引用：它们包含 svcutil 创建代理所需的类型定义和验证规则。

> ```
>  <import namespace="urn:company:remtp:schemas:PlaceOrderRequest:1.00" schemaLocation="../schemas/placeOrderRequest.xsd"/>
> 
>    <import namespace="urn:company:remtp:schemas:PlaceOrderResponse:1.00" schemaLocation="../schemas/placeOrderResponse.xsd"/>
> 
>    <import namespace="urn:company:remtp:schemas:CommitOrderRequest:1.00" schemaLocation="../schemas/commitOrderRequest.xsd"/>
> 
>    <import namespace="urn:company:remtp:schemas:CommitOrderResponse:1.00" schemaLocation="../schemas/commitOrderResponse.xsd"/> 
> ```

所以，你也需要那些 xsd 文件

# php - 使用 PHP 在 LiteSpeed 中设置自定义 HTTP 响应标头

> ID：10244528
> 
> 赞同：0
> 
> 时间：2012-04-20T10:31:31.547
> 
> 标签：php, apache, http-status-codes, litespeed

我正在尝试设置自定义 HTTP 1.0 状态代码，以便通过 AJAX（使用 jQuery）返回更多描述性错误消息。

在 PHP 中，我有类似的东西：

```
header( 'HTTP/1.0 909 Hello World' );
exit; 
```

这在我使用 Apache 2.2.15 的开发环境中按预期工作，但在运行 LiteSpeed 5.5 的生产网络服务器上不起作用。LiteSpeed 反而返回一个`200 OK`.

使用这个：

```
header( 'HTTP/1.0 404 Hello World' );
exit; 
```

Apache 返回`404`上面的文本。LiteSpeed 将自定义文本替换为默认的“未找到”。

知道如何在 LiteSpeed 中覆盖此功能以使其工作方式与 Apache 相同吗？我知道它们应该是可比较的网络服务器。

任何想法，请让我知道。

-P。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:12:57.243

首先，为什么是 HTTP 1.0 而不是 1.1？

其次，您正在尝试做未在 HTTP 规范中定义的事情。LiteSpeed 可能会检查它被要求发送的标头，并用一些默认值替换它无法识别的值。

您不应该试图强制 HTTP 以非标准方式运行，一旦您这样做，它就不再是 HTTP。规范的存在是为了确保不同人在不同时间实现的软件可以互操作，如果你不遵循规范，它应该如何表现是完全未定义的。

Apache 让一个它不知道的标头通过是完全可以接受的行为，LiteSpeed 拒绝让它通过的行为也是如此。在这种情况下，让恶魔飞出你的鼻子也是服务器做的一件有效的事情。客户端如何处理它无法识别的 HTTP 响应代码？

如果您需要在标头中发送附加信息，为什么不添加新标头？以下应该做。

```
header ('X-My-App-Header: Hello World!'); 
```

# php - Authorize.net SIM 集成中继 URL 不起作用

> ID：10244534
> 
> 赞同：0
> 
> 时间：2012-04-20T10:31:43.820
> 
> 标签：php, authorize.net

PHP Authorize.net SIM 中继 URL 不起作用。

有没有办法实现真正​​的 url SIM 集成？

我们需要通过将用户引导到 authorize.net 站点并在使用中继 url 付款后自动返回我们的站点来实现不使用 https SSL 的安全支付。

我google了很多，但没有得到任何答案，

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:38:00.670

这可能有多种原因。[我建议阅读 Authorize.Net 的名为Relay Response Basics and Troubleshooting](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Relay-Response-Basics-and-Troubleshooting/ba-p/9536)的博文。

# c# - 我可以在我的 asp.net 代码中访问 Javascript 数组吗？

> ID：10244538
> 
> 赞同：1
> 
> 时间：2012-04-20T10:31:56.187
> 
> 标签：c#, javascript, asp.net

我有一个 javascript 数组，并希望在页面发布到服务器时访问它。这可能吗？我应该能够使用 asp.net 代码访问数组。非常感谢您，祝您有愉快的一天！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:35:52.400

您可以使用 HiddenField(runat=server) 并将其以逗号分隔值存储在那里。然后在后面的代码中访问您的隐藏字段。

存储在隐藏字段中：

```
document.yourformname.Hidden1.value = test.join();

<input id="Hidden1" type="hidden" runat="server" /> 
```

代码背后：

```
test = document.yourformname.Hidden1.value.split(","); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:51:37.820

存储在隐藏字段中：

```
 document.getElementById("gGlobalArrayHidden").value = gGlobalArray.join(',');

<input id="Hidden1" type="hidden" runat="server" /> 
```

* * *

代码背后：

```
string[] arr = gGlobalArrayHidden.Value.Split(",".ToCharArray()); 
```

# spring - 我需要指导来学习 spring 和 hibernate

> ID：10244541
> 
> 赞同：0
> 
> 时间：2012-04-20T10:32:07.923
> 
> 标签：spring, hibernate, jakarta-ee, web-development-server

我一直在研究移动平台 j2me 、 android 等。我对核心 java 和 android 有很好的了解。但现在情况就像我需要在 spring 和 hibernate 框架上承担项目。

有人可以建议我如何开始我的准备工作。在开始 spring 和 hibernate 之前我需要了解哪些所有技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:29:38.477

这是一个[循序渐进的 Spring 教程](http://static.springsource.org/docs/Spring-MVC-step-by-step/)。它有点过时，但它应该可以帮助您开始使用 Spring。

这个[博客](http://krams915.blogspot.com/2011/01/spring-mvc-3-hibernate-annotations.html)有一些很好的 Spring/hibernate 例子，我发现它们很有帮助。

[这](http://www.javabeat.net/articles/42-integrating-spring-framework-with-hibernate-orm-framewo-1.html)是另一个教程/示例应用程序。在页面底部，您会发现更多可以帮助您的链接。

祝你好运！

# python - 在不同的默认位置安装 matplotlib

> ID：10244542
> 
> 赞同：1
> 
> 时间：2012-04-20T10:32:12.360
> 
> 标签：python, installation, matplotlib

为了将 matplotlib 安装到非默认位置，我更改了 setup.cfg 文件，设置了变量 basedirlist。

我愿意

```
python setup.py build 
```

进而

```
python setup.py install 
```

但最后一次失败是因为：

```
copying build/lib.linux-x86_64-2.6/mpl_toolkits/axes_grid1/colorbar.py -> /opt/python/2.6.4/lib/python2.6/site-packages/mpl_toolkits/axes_grid1
error: could not delete '/opt/python/2.6.4/lib/python2.6/site-packages/mpl_toolkits/axes_grid1/colorbar.py': Read-only file system 
```

我不是root，那么如何安装matplotlib？我还需要设置其他变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:17:55.777

尝试使用未修改的版本`setup.cfg`并运行`python setup.py install --help`有几个选项可用于控制文件的安装位置，帮助消息的重要部分是：

```
Options for 'install' command:
  --prefix            installation prefix
  --exec-prefix       (Unix only) prefix for platform-specific files
  --home              (Unix only) home directory to install under
  --user              install in user site-package
                      '/home/yannpaul/.local/lib/python2.6/site-packages'
  --install-base      base installation directory (instead of --prefix or --
                      home) 
```

阅读这些选项并选择最适合您的选项。

但是，我建议使用[`vertualenv`](http://pypi.python.org/pypi/virtualenv). 这会在您选择的目录中设置自定义库位置和 python 副本。在您在此 virtualenv 中安装您自己的库副本之前，所有其他库（例如由系统管理员安装）都可用。

例如，如果您想使用库的开发版本，Virtualenv 也是一个不错的选择`matplotlib`。为这些开发库设置一个 virtualenv，然后使用与该 virtualenv 关联的 python“可执行文件”来访问该库的开发版本。

查看[为 Python 安装 pip、virtualenv 和分发的正确方法是什么？](https://stackoverflow.com/questions/4324558/whats-the-proper-way-to-install-pip-virtualenv-and-distribute-for-python)使用 virtualenv 进行设置。

# sql - SQL 查询 - 需要建议

> ID：10244543
> 
> 赞同：0
> 
> 时间：2012-04-20T10:32:14.290
> 
> 标签：sql, sql-server-2005

我真的很困惑如何为以下语句编写查询。

如何显示销售额（总数）最高的前 5 名员工，并将职位显示为字段。请注意，如果两名员工的总销售额相同，他们应该获得相同的职位，换句话说，前 5 名员工可能会返回超过 5 名员工？

任何人都可以为此提出答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:01:47.957

Something like:

```
WITH cte AS (
    SELECT
        Rank() OVER (ORDER BY SUM(salary) DESC ) AS [Rank]
        , SUM(salary) as sum
        , Employee
    FROM 
        [table]
    GROUP BY
        Employee
)
SELECT  * 
FROM cte 
WHERE [RANK] < 5
ORDER BY sum DESC 
```

I re-read your question and it seems that you're looking for the top count of sales rather than sum of salary, but of course, in that case you can just use `COUNT(sales)` in the OVER statement.

# java - 合并多个集合 使用 GSON 转换成一个 JSON 字符串

> ID：10244547
> 
> 赞同：1
> 
> 时间：2012-04-20T10:32:25.943
> 
> 标签：java, json, collections, gson

有没有办法将不同的字符串集合合并到一个 JSON“字符串”中？我想要一个如下所示的 JSON 字符串：

```
{"vendor":[Sun, HP, IBM],"product":[bla, bla, bla],"availability":[high, mid, low],"capacity":[bla, bla, bla], ...} 
```

这是我的 Java 代码的一部分：

```
Collection<String> vendor = bh.getAllVendors();
Collection<String> product = bh.getProductsForVendor(vendor);
Collection<String> availability = bh.getAllAvailabilities();
Collection<String> capacity = bh.getCapacityForVendor(vendor);
Collection<String> signaling = bh.getSignalingForVendor(vendor);
Collection<String> backup = bh.getBackupForVendor(vendor);

Gson gson = new Gson(); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T10:44:32.770

如果您将它们添加到地图中，那将是最简单的：

```
 Gson gson = new Gson();

    Map<String, Collection<String>> map = new HashMap<>();
    map.put("vendor", vendor);
    map.put("product", product);
    //etc

    System.out.println(gson.toJson(map)); 
```

生产 `{"product":["bla","bla","bla"],"vendor":["Sun","IBM","HP"]}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:41:16.213

创建一个新类：

```
Class MyJSONObject
  {
    Collection<String> vendor;
    Collection<String> product;
    Collection<String> availability;
    //...
    //...
  } 
```

然后将您的数据分配给`MyJSONObject`.

然后序列化该实例：

```
gson.toJson (myJSONObjectInstance); 
```

[阅读此 GSON 文档](http://sites.google.com/site/gson/gson-user-guide#TOC-Object-Examples)的“对象示例”部分。

# c# - 带有 x509 证书和加密的数字签名

> ID：10244548
> 
> 赞同：0
> 
> 时间：2012-04-20T10:32:31.687
> 
> 标签：c#, java, digital-signature, x509, x509certificate2

我想签署将在服务器上验证的 xml 文档。我不知道如何使用 .cer 和 .pfx 文件等数字证书对 xml 文件进行签名和加密。我用谷歌搜索并找到了各种示例，但无法理解标准方式，即

> 对xml文件进行签名和加密的分步过程是什么

这里的一个问题是，

> 我想在客户端（.net c# 代码）上对文件进行签名和加密，以便可以在服务器（java 代码）上对其进行验证和解密

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:34:31.730

如果你想在 C# 和 Java 中都这样做，你可能想看看 BouncyCastle。这是一个流行的加密库，它支持 C# 和 Java。

资源： http: [//www.bouncycastle.org/](http://www.bouncycastle.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:53:44.593

您需要的是 XMLDSig 和 XMLEnc（这些是用于以 XML 方式签名和加密 XML 的相应标准的名称，与将数据加密和签名为不透明 blob 的 PKCS7/CMS 相反）。

Java 具有内置的 XMLDSig API（[在此处阅读文章](http://java.sun.com/developer/technicalArticles/xml/dig_signatures/)），但似乎没有 XMLEnc 的本地方式。

.NET Framework 4.0 还具有用于 XML 签名和加密的内置机制，但它们并不那么明显。[在此处查看操作方法](http://msdn.microsoft.com/en-us/library/ms229749.aspx)。

我们公司为名为 SecureBlackbox 的安全任务提供广泛的库，SecureBlackbox 包括对 XMLDSig、XMLEnc 和 XAdES 的灵活且易于使用的支持。.NET 和 Java 版本均可用。阅读[有关](http://www.eldos.com/sbb/desc-xml.php)SecureBlackbox 的 XMLBlackbox 包的详细信息。

更新：如果您不关心格式并且您的 XML 数据的唯一路径是从一个特定位置到另一个特定位置，那么您可以使用 PKCS#7/CMS 代替 XMLDSig 和 XMLEnc。如上所述，CMS 将您的数据视为不透明的 blob，并将其包装成二进制数据。[BouncyCastle](http://www.bouncycastle.org/)是其中一种选择，SecureBlackbox 也可以使用。

# java - 多次使用 class.forname 会导致内存泄漏吗？（在tomcat中运行）

> ID：10244553
> 
> 赞同：5
> 
> 时间：2012-04-20T10:32:47.490
> 
> 标签：java, memory-leaks, classloader

1）如果我使用下面的Class.forName()被多次调用，会不会导致内存泄漏？

```
Class.forName("MyClass") 
```

2）或者，tomcat的WebAppClassLoader是否会检查是否`"MyClass"`已经加载并使用缓存的实例。

3) 如果问题 (2) 的答案是“否”，那么如果我打开 PermGen 扫描并设置相关的 jvm 参数，之前加载的类是否会被垃圾收集。

如果我想避免重新加载类，使用类实例缓存的最佳方法是什么。我可以将类实例存储为 HashMap

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T10:38:55.070

1) 不，一个类定义只被任何给定的类加载器加载一次。之后，它被保存在内存中（在 PermGen 空间中）并在对该类的后续引用中重用，直到类加载器存在。这与类的引用方式无关： via`Class.forName`或`ClassLoader.loadClass`其他。

同一个类定义可以多次加载到不同的类加载器中（导致内存中有多个类令牌对象）。这些算作完全不同的类，它们不能相互转换，即使它们是从完全相同的类文件加载的。

2) 是的

3) 不适用

4) 引用的文章提到该类在不同的类加载器中重新加载，因此我在 1) 下的解释适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:37:53.943

从文档中：

返回与具有给定字符串名称的类或接口关联的 Class 对象。

我没有看到应该再次加载该类的迹象。它只是返回它，表明多次调用是安全的。

# css - 显示 2 个 div 彼此相邻，并且一起比屏幕大

> ID：10244558
> 
> 赞同：1
> 
> 时间：2012-04-20T10:33:06.540
> 
> 标签：css

我一直在寻找几个小时，但我找不到将 2 个 div 彼此相邻放置的方法。下面的示例在 div 小于屏幕时工作正常，但当它们大于屏幕时，它们彼此下方。我也想要 2 页的相同课程：

*   1 页它们都适合屏幕，我想将它们并排显示（不是一个在左边，一个在右边）
*   其他页面一起它们比屏幕大。（横向滚动没问题）

举个例子：

```
<style>
.wrapper
{
    border:1px solid Red;
    display: inline-block;
}

.left 
{
    float:left;
    color: Green;
    border:1px solid Green;
}

.right 
{
    float:right;
    color: Blue;
    border:1px solid Blue;
}
</style>
<div class="wrapper">
    <div class="left">
        ASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDF
    </div>
    <div class="right">
        ASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDF
    </div>
    <div class="clear" />
</div> 
```

在实际设计中，ASDF 被一个大的`<table>`. 正如我上面所说，我一直在寻找几个小时，但可以找到一个解决方案，所以如果之前有人问过这个问题，我很抱歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T10:59:30.037

1.  包装器 div 不是将两者对齐所必需的，但如果您出于其他原因（如边框、背景等）使用它，则不需要将其设置为`inline-block`.

2.  从技术上讲，没有什么需要浮动。`inline-block`具有相同的效果，更合适。话虽如此，需要一个浮动来使事情尽可能流畅，稍后会提到。

3.  使这个和其他涉及 inline-block 的 css 魔法变得棘手和容易出错的原因是元素在某些方面被视为内联元素，而在其他方面则被视为块。这不是跨浏览器一致的。通常，这意味着它可以具有块级样式（如边框和宽度）和内联样式。通常人们只是把它想象成水平下落的块，“在一条线上”。但是来自包装器 div 的内联元素属性（例如 font-size 和 white-space）也会生效（这很烦人）。

说了这么多，这里是超出浏览器窗口并且位于块级包装器内部的并排块元素的基本配方：

1.  内部块需要设置为`inline-block`.
2.  外包装需要`white-space`设置为`nowrap`，就像您希望一长行文本水平扩展超出浏览器窗口一样。
3.  外包装需要设置为`float: left; clear: both;`，否则包装的宽度不会超过窗口宽度。另一种方法是设置包装器的宽度，但如果您不知道它会扩展多远，浮动将强制包装器自动收缩或增长到其内容的宽度。这`clear:both`可以防止浮动影响任何周围的元素。

因此对于以下 HTML：

```
<div class="wrapper">
    <div class="left">ASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDF</div>
    <div class="right">ASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDF</div>
</div>​ 
```

您至少需要以下 CSS：

```
.wrapper {
         white-space: nowrap;
         float:left;
         clear: both;
}

.left, .right{
    display: inline-block;
} 
```

然后，对于您的示例，您将添加：

```
.wrapper {
         border: 1px solid red;
}

.left 
{
    color: Green;
    border:1px solid Green;

}

.right 
{
    color: Blue;
    border:1px solid Blue;
}​ 
```

演示：http: [//jsfiddle.net/crazytonyi/jTknm/](http://jsfiddle.net/crazytonyi/jTknm/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:40:02.323

这是一种可以使用的方法，将`white-space: nowrap`父`.wrapper`元素与`display: inline-block`子元素`.left`和`.right`元素耦合：

```
.wrapper
{
    /* other stuff */
    white-space: nowrap;
}

.left 
{
    display: inline-block;
    /* other stuff */
}

.right 
{
    display: inline-block;
    /* other stuff */
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/CEhqp/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:37:27.743

呃，你需要同时使用`float:left`它们。然后强制`overflow:show`包装或使用较新的 CSS 3 属性`overflow-x:scroll`。让我知道它是否仍然不起作用。

好的，我已经为您测试了。这不起作用的原因是您没有指定固定宽度和其他一些东西。这是工作代码：

```
<style>
.wrapper
{
    border:1px solid Red;
    width:100%;
    overflow-x:scroll;
}

.left 
{
    float:left;
    width:500px;
    color: Green;
    border:1px solid Green;
}

.right 
{
    float:left;
    width:500px;
    color: Blue;
    border:1px solid Blue;
}
</style>
<body>
<div class="wrapper">
    <div class="left">
        ASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDF
    </div>
    <div class="right">
        ASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDFASDF
    </div>
    <div class="clear" />
</div> 
```

然后，如果您想指定宽度，请使用 Javascript 在页面加载时确定它们或使用 CSS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:40:23.460

您可以通过将内部 div 设置为`display: inline-block`并让外部 div 具有`white-space: nowrap`：

```
<div class="wrapper">
    <div class="left">left</div><div class="right">right</div>
</div>

.wrapper { border: 1px red solid; white-space: nowrap }
.wrapper div { display: inline-block; width: 70% } /* 2*70% = 140% of .wrapper */ 
```

[**看到它在行动**](http://jsfiddle.net/zYCEW/)。

注意不要在关闭第一个 div 和打开第二个 div 之间留下任何空白，因为这将在渲染中显示为可见空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T11:01:37.347

您的 div 需要宽度，请尝试：

```
<div id="left"><p>Some content here...</p></div>
<div id="right"><p>Some content here...</p></div>

<style>
    #left, #right { float:left; color: Green; border:1px solid Green; width:49%; }
    #left { margin-right:1%; }
</style> 
```

# codeigniter - 我想在选择下拉列表值时显示页面

> ID：10244559
> 
> 赞同：0
> 
> 时间：2012-04-20T10:33:15.090
> 
> 标签：codeigniter

--选择-- admin/order/orderlist/paid" style="color:#000000; text-decoration:none">支付管理员/订单/订单列表/成功" style="color:#000000; text-decoration:none">成功？>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:51:35.297

也许您正在寻找`:selected`jQuery 中的选择器：http: [//api.jquery.com/selected-selector/](http://api.jquery.com/selected-selector/)？

简单来说，你可以做一些类似这样的 JS：

```
$("#mySelect").change(function () {
    var selected = $(this + "option:selected").text();
    if(selected == "someValue")
        window.location = "someUrl";
});​ 
```

...也就是说，当有人选择一个项目时，使用 jQuery 选择器捕获所选项目的文本。知道该值后，您可以决定要将用户发送到哪个 URL - 在这种情况下，通过使用`window.location`.

相应的 HTML 可能如下所示：

```
<select id="mySelect">
    <option>someValue</option>
    <option>someOtherValue</option>
</select> 
```

# java - 哪个 Java ORM 框架支持 MongoDB 中的文档多态性？

> ID：10244565
> 
> 赞同：2
> 
> 时间：2012-04-20T10:33:37.037
> 
> 标签：java, mongodb, orm

我正在尝试使用 MongoDB 来存储一系列文档。这些文档共享一些标准属性，但有几个变化。我们通过继承来实现 POJO。基类是 Document，它有几个子类，如 Invoice 和 Orders，与 Document 类相比，它有几个额外的字段。

```
class Document {
    DocTypeEnum type;
    String title;
}
class Invoice extends Document{
    Date dueDate;
}
class Order extends Document{
    List<LineItems> items;
} 
```

是否有 ORM 框架支持查询集合并根据其类型字段返回混合对象列表（发票、订单、基本文档等）？

```
List<Document> results = DocCollection.find(...); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:08:40.810

即使不需要类型枚举或任何东西，Morhia 也支持多态性。它将实际实例类名与其余数据一起存储。看看@Polymorphic 注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:44:40.043

您可以使用任何支持所需数据库方言的 ORM。hibernate 框架具有执行此操作的[对象/网格映射器](http://docs.jboss.org/hibernate/ogm/3.0/reference/en-US/html_single/)(OGM) 子项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T06:59:10.523

布古蒙戈？ [http://code.google.com/p/bugumongo](http://code.google.com/p/bugumongo)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-04T07:30:55.567

另一种选择是使用[Jongo](http://jongo.org/)将多态处理委托给[Jackson](http://jackson.codehaus.org/)。我写了[一篇](http://ingini.org/2013/04/03/mongodb-with-jongo-sleeves-up/)包含一些示例的博客文章，您可以在[GitHub 上](https://github.com/ihr/jongo-by-example)找到完整的代码库。

在您的特定场景中，您使用 Jackson 的解决方案将如下所示：

```
public enum DocTypeEnum {
    INVOICE(Constants.INVOICE), ORDER(Constants.ORDER);

    DocTypeEnum(String docTypeString) {
    }

    public static class Constants {
        public static final String INVOICE = "INVOICE";
        public static final String ORDER = "ORDER";
    }
}

@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, 
property = Document.TYPE)
@JsonSubTypes({
    @JsonSubTypes.Type(value = Invoice.class, name = DocTypeEnum.Constants.INVOICE),
    @JsonSubTypes.Type(value = Order.class, name = DocTypeEnum.Constants.ORDER)
})
public class Document {

    public static final String TYPE = "type";
    public static final String TITLE = "title";

    private final DocTypeEnum type;
    private final String title;

    public Document(DocTypeEnum type, String title) {
        this.type = type;
        this.title = title;
    }

    @JsonProperty(TYPE)
    public DocTypeEnum getType() {
        return type;
    }

    @JsonProperty(TITLE)
    public String getTitle() {
        return title;
    }
}

@JsonIgnoreProperties(ignoreUnknown = true)
public class Invoice extends Document {
    public static final String DUE_DATE = "due_date";
    private final Date dueDate;

    public Invoice(String title, Date dueDate) {
        super(DocTypeEnum.INVOICE, title);
        this.dueDate = dueDate;
    }

    @JsonProperty(DUE_DATE)
    public Date getDueDate() {
        return dueDate;
    }
}

@JsonIgnoreProperties(ignoreUnknown = true)
public class Order extends Document {

    public static final String ITEMS = "items";
    private final List<LineItems> items;

    public Order(String title, List<LineItems> items) {
        super(DocTypeEnum.ORDER, title);
        this.items = items;
    }

    @JsonProperty(ITEMS)
    public List<LineItems> getItems() {
        return items;
    }
} 
```

# php - 向 C 或 C++ 中的 PHP 代码发送 Http“发布”请求

> ID：10244569
> 
> 赞同：2
> 
> 时间：2012-04-20T10:33:45.630
> 
> 标签：php, c++, c, http, sockets

我正在尝试向我的 php 文件发送“发布”请求并取回信息，它工作正常，但是

它还会在打印我从 php 文件中的响应之前打印一些内容。这就是它打印的内容

第一的：

```
HTTP/1.1 200 正常
日期：格林威治标准时间 2012 年 4 月 20 日星期五 10:19:12
服务器：Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2 PHP/5.3.6
X-Powered-By: PHP/5.3.6
内容长度：12
连接：关闭
内容类型：文本/html

```

然后我的回应：

```
你好世界

```

我怎样才能只打印我从 myphp 代码中得到的东西，而不是：

```
HTTP/1.1 200 正常
日期：格林威治标准时间 2012 年 4 月 20 日星期五 10:19:12
服务器：Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2 PHP/5.3.6
X-Powered-By: PHP/5.3.6
内容长度：12
连接：关闭
内容类型：文本/html

```

我正在使用的代码是：

```
#include <arpa/inet.h>
#include <assert.h>
#include <errno.h>
#include <netinet/in.h>
#include <signal.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/wait.h>
#include <netdb.h>
#include <unistd.h>

#define SA      struct sockaddr
#define MAXLINE 4096
#define MAXSUB  200

#define LISTENQ         1024

extern int h_errno;

ssize_t process_http(int sockfd, char *host, char *page, char *poststr)
{
     char sendline[MAXLINE + 1], recvline[MAXLINE + 1];
    ssize_t n;
    snprintf(sendline, MAXSUB,
             "POST %s HTTP/1.0\r\n"
             "Host: %s\r\n"
             "Content-type: application/x-www-form-urlencoded\r\n"
             "Content-length: %d\r\n\r\n"
             "%s", page, host, strlen(poststr), poststr);

    write(sockfd, sendline, strlen(sendline));
    while ((n = read(sockfd, recvline, MAXLINE)) > 0) {
        recvline[n] = '\0';
        printf("%s", recvline);  // <-- this
    }
    return n;

}

int main(void)
{

    int sockfd;
    struct sockaddr_in servaddr;

    char **pptr;
    //********** You can change. Puy any values here *******
    char *hname = "localhost";
    char *page = "/mysql_update.php";
    char *poststr = "server=dd sd sdsdt\n";
    //*******************************************************

    char str[50];
    struct hostent *hptr;
    if ((hptr = gethostbyname(hname)) == NULL) {
        fprintf(stderr, " Server down error for host: %s: %s",
                hname, hstrerror(h_errno));
        exit(1);
    }
    printf("hostname: %s \n", hptr->h_name);
    if (hptr->h_addrtype == AF_INET
        && (pptr = hptr->h_addr_list) != NULL) {
        printf("address: %s\n",
               inet_ntop(hptr->h_addrtype, *pptr, str,
                         sizeof(str)));
    } else {
        fprintf(stderr, "Error call inet_ntop \n");
    }

    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_port = htons(80);
    inet_pton(AF_INET, str, &servaddr.sin_addr);

    connect(sockfd, (SA *) & servaddr, sizeof(servaddr));
    process_http(sockfd, hname, page, poststr);
    close(sockfd);
    exit(0);

} 
```

请帮助我逐步解决此问题，以便'我能理解它，给我信息，如果你能'请给我一个例子。（这将帮助我和其他人）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T10:42:43.533

您收到的响应的第一部分由 HTTP 版本、服务器响应状态代码和各种 HTTP 响应标头组成。

> HTTP/1.1 200 OK 日期：2012 年 4 月 20 日星期五 10:19:12 GMT 服务器：Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2 PHP/5.3.6 X-Powered-作者：PHP/5.3.6 内容长度：12 连接：关闭 内容类型：text/html

在标头之后跟随 HTTP 响应正文（您需要提取）：

> 你好世界

HTTP 标头和正文用以下字符序列分隔：`\r\n\r\n`. 所以你需要做的就是搜索它并提取它背后的所有内容。

您可以自己执行此操作（套接字、解析...），但我的建议是使用一些 HTTP 库：`WinInet`、`WinHttp`（都是 Microsoft 的）或`libCurl`（开源）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:38:14.500

响应标头位通过空行与内容分开。

需要考虑不同的行尾。基本上忽略`\r`s。

所以第一次读取行，直到你得到一个空白然后开始打印它们！

**编辑**

您的回复如下

```
HTTP/1.1 200 OK
Date: Fri, 20 Apr 2012 10:19:12 GMT
...
Content-Type: text/html

Hello World 
```

请注意，HTTP 标头和响应（在本例中为 HTML）之间有一个空行。

# search - 谷歌自定义搜索分页问题

> ID：10244571
> 
> 赞同：2
> 
> 时间：2012-04-20T10:33:50.533
> 
> 标签：search, google-custom-search

我已经为我的网站设置了谷歌自定义搜索，但它显示的结果分页是错误的或有问题的。它在分页中显示了 4 页，但是当我单击第 3 页时，第 4 个链接消失了。这是 Google CSE 的已知问题吗？有没有解决办法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:43:03.687

当我发现这是一个“功能”而不是错误时，我也遇到了这个问题并笑了：

[http://productforums.google.com/forum/#!category-topic/customsearch/troubleshooting-and-bugs/PngSBJW1Huk](http://productforums.google.com/forum/#!category-topic/customsearch/troubleshooting-and-bugs/PngSBJW1Huk)

无论如何，这应该解决它。

# mysql - 在 mysql 服务器上执行的查询列表

> ID：10244580
> 
> 赞同：1
> 
> 时间：2012-04-20T10:34:25.743
> 
> 标签：mysql, sql

mysql服务器是否保留在其上执行的查询的记录，如果这样做，是否可以检索这些查询。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:56:41.743

您可以使用[General Query Log](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)，它以纯文本形式记录所有查询。

我们仅在我们的开发环境中启用了此功能。在非高峰时间在生产服务器上临时打开它应该不是问题。

如果您正在寻找慢查询，您不妨使用[慢查询日志](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:39:40.020

如果要记录所有执行的查询，可以启用[常规查询日志](http://dev.mysql.com/doc/refman/5.5/en/query-log.html)或[慢速查询日志](http://dev.mysql.com/doc/refman/5.5/en/slow-query-log.html)，并将阈值设置为 0 秒（任何超过 0 秒的查询都将被记录）。

另一种选择是[二进制日志](http://dev.mysql.com/doc/refman/5.5/en/binary-log.html)。但是，二进制日志不会记录类似`SELECT`或`SHOW`不修改数据的查询。

请注意，这些日志在有流量的服务器中变得非常快。并且两者都可能包含密码，因此必须保护它们免受未经授权的眼睛的伤害。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T11:00:47.167

You can use MySQL Proxy which stands between client app and RDBMS itself.

[http://forge.mysql.com/wiki/MySQL_Proxy](http://forge.mysql.com/wiki/MySQL_Proxy)

You can see online queries and also it allows you to rewrite queries based on rules.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T11:02:16.663

There's another option - use a profiler.

For instance: [http://www.jetprofiler.com/](http://www.jetprofiler.com/)

# sql - 如何使用没有临时表的 SQL 查询为组中的每个元素添加序列号

> ID：10244594
> 
> 赞同：5
> 
> 时间：2012-04-20T10:36:05.943
> 
> 标签：sql, database, oracle, grouping

我的问题与此链接中发布的问题非常相似-How [to add sequence number for groups in a SQL query without temp tables](https://stackoverflow.com/questions/5253311/how-to-add-sequence-number-for-groups-in-a-sql-query-without-temp-tables)

但是，我需要列举组的发生。最终的输出是这样的：

```
Record  Group     GroupSequence
-------|---------|--------------
1       Chickens  1
2       Chickens  2
3       Cows      1
4       Horses    1
5       Horses    2
6       Horses    3 
```

另外，这必须在 Oracle SQL 中完成。有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T10:42:11.537

也许是这样的：

```
SELECT
    ROW_NUMBER() OVER(PARTITION BY [Group] ORDER BY Record) AS GroupSequence1,
    RANK() OVER(PARTITION BY [Group] ORDER BY Record) AS GroupSequence2,
    DENSE_RANK() OVER(PARTITION BY [Group] ORDER BY Record) AS GroupSequence3,
    Table1.Group,
    Table1.Record
FROM
    Table1 
```

`GroupSequence1`，`GroupSequence2`并`GroupSequence3`会得到你想要的输出。

# python - 在 rdf/n3 文件中按名称搜索

> ID：10244600
> 
> 赞同：1
> 
> 时间：2012-04-20T10:36:34.530
> 
> 标签：python, rdf, sparql, rdflib

我必须在一个 turtle/n3 文件中执行一些过滤，返回另一个相同类型的文件。我处理的基本数据元素（位置）是这样的：

```
:pt0001
     vcard:category "Poste e Telegrafi"
    ; vcard:fn "Ufficio Bologna 1"
    ; vcard:extended-address "Via Cairoli 9, Bologna BO, Italy"
    ; vcard:latitude "44.504192"
    ; vcard:longitude "11.338661"
    ; vcard:tel "051 243425"
    ; vcard:fax "051 244459"
    ; cs:opening "Mon, Tue, Wed, Thu, Fri: 0800-1330\. Sat: 0800-1230."
    ; cs:closing "01-01, 01-06, P, LA, 04-25, 05-01, 06-02, 08-15, 11-01, 12-08, 12-25, 12-26: .". 
```

例如，我想搜索具有特定名称或纬度或类别的元素 (ptxxxx)。我已经被建议在查询中使用构造从 rdf 中检索三元组，因此我可以将它们添加到我正在构建的新图形/rdf 中。事实是，如果我使用正则表达式过滤器功能过滤三元组以按（不区分大小写）名称进行搜索，我只会得到一个三元组，在这种情况下定义我正在寻找的名称。例如，是否可以搜索名称为（谓词）“Ufficio Bologna 1”（宾语）的主题（ptxxxx）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:33:21.483

如果您想获得具有该名称的主题的三元组，您可以做一个简单的描述：

```
describe ?s where { ?s vcard:fn "Ufficio Bologna 1". } 
```

否则，如果您想使用正则表达式，您可以稍微修改查询

```
describe ?s where { ?s vcard:fn ? name. filter (regex(?name, "regex goes here")). } 
```

需要注意的是，大型数据集上的正则表达式可能会很昂贵。许多系统提供对 SPARQL 的扩展，它将全文索引您的文字值，然后您可以使用更正常的搜索语法进行搜索。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T13:20:46.663

我这样解决：

```
CONSTRUCT {?s ?p ?o}
        WHERE {
                ?s ?p ?o;
                vcard:fn ?name.
                FILTER regex (?name ,"^ufficio bologna 1$", "i")
                } 
```

# c# - Microsoft.SqlServer.Management.smo.Column 的 XmlSerialization

> ID：10244601
> 
> 赞同：0
> 
> 时间：2012-04-20T10:36:37.307
> 
> 标签：c#, xml, serialization, xml-serialization

我在序列化 Column 类型的自定义 mylist 时遇到错误，即 Microsoft.SqlServer.Management.smo.Column。我不知道如何序列化这个。

我已经序列化了一个类，如下所示：

```
ValidationClass validation = new ValidationClass();
XmlSerializer serializer = new XmlSerializer(typeof(ValidationClass));
TextWriter writer = new StreamWriter(@"D:\xml doc\AspxGenerator.xml");
serializer.Serialize(writer, validation);
writer.Close(); 
```

为此编写的验证类如下：

```
[Serializable]
public class ValidationClass
{
    public bool IsNotNull { get; set; }
    public bool IsEmail { get; set; }

    public MyList<MyTable> MaxLimit { get; set; }
    public int MinLimit { get; set; }
    public bool IsValidDate { get; set; }

    public SerializableDictionary<int, string> PropertyNames;// { get; set; }

    public ValidationClass()
    {
        PropertyNames = new SerializableDictionary<int,string>();
        PropertyNames.Add(0, "A");
        PropertyNames.Add(1, "B");
        PropertyNames.Add(2, "C");

        MaxLimit = new MyList<MyTable>();
        MyTable a = new MyTable();
        MyTable b = new MyTable();
        MaxLimit.Add(a);
        MaxLimit.Add(b);

        //MaxLimit = new MyList<int>();
        //MaxLimit.Add(0);
        //MaxLimit.Add(2);
    }

} 
```

MyList 也实现为：

```
[XmlRoot("dictionary")]
public class MyList<Tkey> : List<Tkey>, IXmlSerializable
{

    #region IXmlSerializable Members
    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(System.Xml.XmlReader reader)
    {
        XmlSerializer keySerializer = new XmlSerializer(typeof(Tkey));

        bool wasEmpty = reader.IsEmptyElement;
        reader.Read();

        if (wasEmpty)
            return;

        while (reader.NodeType != System.Xml.XmlNodeType.EndElement)
        {
            reader.ReadStartElement("item");

            reader.ReadStartElement("key");
            Tkey key = (Tkey)keySerializer.Deserialize(reader);
            reader.ReadEndElement();

            this.Add(key);

            reader.ReadEndElement();
            reader.MoveToContent();
        }
        reader.ReadEndElement();
    }

    public void WriteXml(System.Xml.XmlWriter writer)
    {
        XmlSerializer keySerializer = new XmlSerializer(typeof(Tkey));

        foreach (Tkey key in this)
        {
            writer.WriteStartElement("item");

            writer.WriteStartElement("key");
            keySerializer.Serialize(writer, key);
            writer.WriteEndElement();

            writer.WriteEndElement();
        }
    }
    #endregion
} 
```

运行此程序后，我收到一个错误：“反映类型'Microsoft.SqlServer.Management.Smo.Column'的错误。”

内部异常是：“{”要成为 XML 可序列化的，从 ICollection 继承的类型必须在其继承层次结构的所有级别上都有 Add(Microsoft.SqlServer.Management.Smo.Property) 的实现。Microsoft.SqlServer.Management.Smo.SqlPropertyCollection 未实现 Add(Microsoft.SqlServer.Management.Smo.Property)。"}"

IXmlSerilzable 的实现是完美的，没有任何问题。问题在于我使用的类型是 Column，即 Microsoft.SqlServer.Management.smo.Column。我通过将“列”类型替换为“字符串”类型来检查此代码，然后它运行良好。类列也是密封类。

我想序列化 ValidationClass。请建议如何做。

谢谢和问候， Mayur

# php - PHP 最佳实践跟踪登录用户

> ID：10244604
> 
> 赞同：12
> 
> 时间：2012-04-20T10:36:44.697
> 
> 标签：php, session

我想向用户显示作为评论系统的一部分登录的其他用户。跟踪用户的最佳做法是什么？例如：

您是否跟踪所有会话，然后将它们标记为已关闭。或者您是否在注销时删除用户，只跟踪活动用户。

我在想我应该创建一个包含用户 ID、登录时间、注销时间和/或状态的表。这是要走的路还是有一些跟踪会话ID的替代方法。如果使用表，保留 sessionid 是否有价值。当会话不再活动时，我是否应该删除行，而不需要 whenloggedout 字段。

有一个登录很容易跟踪用户的登录。但是，跟踪用户的退出更难，因为他们的会话可能会因浏览器崩溃等而中断。

只要用户没有破坏会话，就考虑用户登录是否是最佳做法……例如，FB 和 Gmail 将让您几乎无限期地保持登录状态——或者自上次活动以来是否应该有时间限制？每次现场有活动时保存到此表的想法并不吸引人。

现在，我正在考虑以下内容：

```
create table loggedin (userid (int), whenloggedin (datetime), whenlogged out (datetime), loggedin(tinyint)) 
```

如果 whenloggedout 不为 null 或经过像 24 小时这样的长时间限制，则后者将变为 0。我想 FB 在让您长时间登录的同时，还会出于聊天等目的跟踪活动，但不确定。我也在考虑让表格扩展，而不是删除已关闭的会话，但也许这是一个错误。

这种方法是否被认为足够或有更好的方法。许多人对此提出建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T10:42:57.853

根据您希望它的工作方式，您基本上有两种选择：

*   定义一个超时时间，在此之后您认为用户已注销
*   使用 ajax/websockets/whatever 来轮询用户

## 1：超时

这是更简单的用例。每次用户请求页面时，您都会更新数据库中的时间戳。

要了解有多少用户在线，您可以对该数据库进行查询，并对过去 N 分钟内活跃的用户进行 COUNT 操作。

通过这种方式，您将相对准确地了解目前有多少人在积极使用该网站。

## 2：持续轮询

由于必须使用 Ajax 更新服务器，因此实现起来有点复杂。否则，它的工作方式与#1 类似。

每当用户在页面上时，您可以保持 websocket 打开或每 N 秒向服务器发出 ajax 请求。

通过这种方式，您可以很好地了解当前有多少人在您的网站上打开了页面，但是如果用户在浏览器中保持页面打开并且不执行任何操作，它仍然会将他们视为在线。

对这个想法的轻微修改是使用客户端上的脚本来监视鼠标移动。如果用户在 10 分钟内没有在您的页面上移动鼠标，您将停止轮询或断开 websocket。这将解决将空闲用户显示为在线的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T10:48:09.207

为了规避知道用户是否已注销或浏览器崩溃等问题，使用各种心跳/轮询这是一个精简的示例，说明如何使用 jQuery 做到这一点

```
function heartbeat(){
   setTimeout(function(){
      $.ajax({ url: "http://example.com/api/heartbeat", cache: false,
      success: function(data){
        //Next beat
        heartbeat();
      }, dataType: "json"});
  }, 10000);//10secs
}

$(document).ready(function(){
    heartbeat();
}); 
```

`http://example.com/api/heartbeat`将使会话保持活动状态并更新数据库中的时间戳，然后在每个页面加载时，您将检查当前时间等的时间戳，如果它低于 15 秒，那么您将它们注销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T02:48:48.543

恒定轮询和使用心跳是一个好主意，但在某些情况下，它们可能会在服务器上产生无用的负载。我认为您应该考虑跟踪用户并非常恰当地使用它的重要性，尤其是考虑到您的更改可能对加载时间产生的影响。

# c# - C# 中的月历

> ID：10244606
> 
> 赞同：1
> 
> 时间：2012-04-20T10:37:08.903
> 
> 标签：c#, sql, winforms, monthcalendar

我有数据库，我使用 SQL 查询从中获取数据到我的 C# 应用程序。

我的应用程序中有一个选项，可以从 MonthCalendar 中获取当天的数据：

```
"between '" + monthCalendar1.SelectionStart.Month.ToString() + "' and '" + monthCalendar1.SelectionStart.AddDays(1).ToString()+ 
```

因此，当我从日历表单中选择 2012-03-06 时，我的 sql 查询会得到类似的结果：

```
between '2012-03-06' and '2012-03-12' 
```

它正在工作。

现在我想获取整个月的数据 - 如何修改部分 sql 查询，所以当我选择四月的一天时，我得到了这个：

```
between '2012-04-01' and '2012-04-30' 
```

?

编辑：我取得了一些进展 - 我有一个月的第一天，但​​如何才能得到最后？

```
monthCalendar1.SelectionStart.Year.ToString()+"-"+monthCalendar1.SelectionStart.Month.ToString().PadLeft(2,'0')+"-"+"01" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:06:53.713

```
DateTime startDate = new DateTime(dt.Year, dt.Month, 1);
DateTime enddate = new DateTime(dt.Year, dt.Month, DateTime.DaysInMonth(dt.Year, dt.Month));

between '" + startDate.ToString("yyyy-MM-dd") + "' and '" + enddate.ToString("yyyy-MM-dd")+ 
```

使用它来获取所选月份的最后一天

```
DateTime.DaysInMonth(dt.Year, dt.Month); 
```

[http://social.msdn.microsoft.com/Forums/en/Vsexpressvcs/thread/218260ec-b610-4fa6-9d1b-f56f3438b721](http://social.msdn.microsoft.com/Forums/en/Vsexpressvcs/thread/218260ec-b610-4fa6-9d1b-f56f3438b721)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:12:47.530

*永远不要*把你的 SQL 语句作为字符串放在一起！[记住鲍比](http://bobby-tables.com/)桌...

除此之外：

```
DateTime someDay = ...;
DateTime firstOfMonth = new DateTime(someDay.Year, someDay.Month, 1);
DateTime lastOfMonth = firstOfMonth.AddMonths(1).AddDays(-1);

string sqlString = "SELECT ... FROM ... WHERE ... AND ... BETWEEN @d1 AND @d2";
using (SqlCommand cmd = new SqlCommand(sqlString, connection))
{
    cmd.Parameters.AddWithValue("@d1", firstOfMonth);
    cmd.Parameters.AddWithValue("@d2", lastOfMonth);
    ...
} 
```

**编辑**
想一想：您实际上会注意到您想要的内容不会返回介于`lastOfMonth 00:00:01`and之间的任何条目`lastOfMonth 23:59:59`。实际上，您应该从所选月份的第一天到下个月的第一天查询以获得所需的信息（减去一毫秒而不是一天将没有帮助，因为 SQL Server 无法准确存储毫秒）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T10:49:10.300

```
 DateTime startDate = DateTime.Parse("03.04.2012");

    DateTime firstofMonth = new DateTime(startDate.Year, startDate.Month, 1);

    DateTime endOfMonth = firstofMonth.AddMonths(1).AddDays(-1); 
```

# php - php不会更新更新查询

> ID：10244608
> 
> 赞同：0
> 
> 时间：2012-04-20T10:37:15.310
> 
> 标签：php, mysql, arrays, variables

错误说明

注意：未定义变量：第 9 行 E:\xampp\htdocs\Edit_Supp.php 中的行

注意：未定义的索引：第 12 行供应商更新的 E:\xampp\htdocs\Edit_Supp.php 中的 id

代码：Edit_Supp_Form.php

```
<?php   
$SupplierID = $_GET['id'];
//Connect and select a database
mysql_connect ("localhost", "root", "");
mysql_select_db("supplierdetails");
//Run query
$result1 = mysql_query("SELECT * FROM suppliers WHERE SupplierID=$SupplierID"); 
while($row = mysql_fetch_array($result1)){
$SupplierID = $_GET['id'] = $row['SupplierID']; 
$SupplierID = $row['SupplierID']; 
$SupplierName = $row['SupplierName'];
$Currency = $row['Currency'];
$Location = $row['Location'];
$ContactNumber = $row['ContactNumber'];
$Email = $row['Email'];
  }
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-    strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="description" content="" />
<meta name="keywords" content="" />
<meta name="author" content="" />
  <link rel="stylesheet" type="text/css" href="style.css" media="screen" />
 <form action="Edit_Supp.php" method="post">
 <br>
 </br>
 <input type="hidden" name="SupplierID" value="<?php echo $SupplierID;?>"/> 

Supplier Name: <input type="text" name="SupplierName" value="<?php echo $SupplierName ;?>" />
<br>
</br>
 Currency: <input type="text" name="Currency" value="<?php echo $Currency ;?>" />
 <br>
 </br>
 Location: <input type="text" name="Location" value="<?php echo $Location ;?>" />
 <br>
</br>
 Contact Number:<input type="text" name="ContactNumber" value="<?php echo $ContactNumber ;?>" /> 
<br>
</br>
Email:<input type="text" name="Email" value="<?php echo $Email ;?>" />
<br>
</br>
<input type="submit" value= "Edit Supplier Information"/>

 </form>
 </div>
 </body>
 </html> 
```

//加上Edit_Sup的代码，这是该页面背后的代码：

```
<?php
 $con = mysql_connect("localhost", "root", "");  
    mysql_select_db("supplierdetails");   
      if (!$con)     
          {       
        die('Could not connect: ' . mysql_error());        
         }    
 //Run a query        
$SupplierID= $_POST['id'] = $row ["SupplierID"];
 $result1 = mysql_query ("SELECT * FROM suppliers WHERE SupplierID= '".$SupplierID."'") or die    (mysql_error());     
$row = mysql_fetch_array($result1); 
$SupplierID = $_GET['id'];
$SupplierID = $_POST['id'];
$SupplierName = $_POST['SupplierName'];
$Currency = $_POST['Currency'];
$Location = $_POST['Location'];
$ContactNumber = $_POST['ContactNumber'];
$Email = $_POST['Email'];  
$SupplierID = $row['SupplierID'];         
$query = "UPDATE suppliers SET SupplierName = '".$SupplierName."', Currency     = '".$Currency."', Location = '".$Location."', ContactNumber = '".$ContactNumber."', Email = '".$Email."' WHERE SupplierID = '".$SupplierID."'";     
$result1 = mysql_query($query);           
 //Check whether the query was successful or not    
 if($result1) 
{          
 echo "Supplier Updated"; 

 }
else 
{        
 die ("Query failed");    
  }    
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:41:45.327

您已在 中引用`$_POST['id']`，`Edit_sup.php`但我没有看到任何名称为 的输入字段`id`。和第 9 行`Edit_sup.php`读取 -

```
$SupplierID= $_POST['id'] = $row ["SupplierID"]; 
```

我看不出你从哪里得到这个`$row`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:43:00.957

你想得到`$row['id']`，我想你想要的是`$_POST['SupplierID']`

# php - 图表未在 php 和 mysql 中使用融合图表生成

> ID：10244609
> 
> 赞同：0
> 
> 时间：2012-04-20T10:37:19.147
> 
> 标签：php, javascript, mysql, fusioncharts

我想根据数据库生成折线图。我第一次使用融合图表时，我按照融合图表文档中动态图表的程序进行操作。这是我的php页面代码：

```
<?php
include("Includes/FusionCharts.php");
include("Includes/DBconn.php");
?>
<html>
    <title> Blood Pressure</title>
    <head>
        <script language="javascript" src="FusionCharts/FusionChart.js"></script>

    </head>
    <body>
    <center>
        <?php

        //connect to the DB
        $link= connectToDB();
        //$strXML will be used to store the entire XML document generated
   //Generate the graph element
   $strXML = "<graph caption='Blood Pressure Reading' subCaption='By Patient'xaxisname='Months' yaxisname='Blood Pressure' hovercapbg='F5589A' hovercapborder='F5589A' rotateNames='1' yAxisMaxValue='200'>";

   //Fetch records from database
   $query= "select * from patient_health";
   $result = mysql_query($query) or die(mysql_error());
   echo $result;

   //Iterate through each patient blood pressure systole

       while($row= mysql_num_rows($result)){
           //Generate the setname and value
          // echo $row['Date'];
           //echo $row['Systole_reading'];
           $strXML.="<set name='".$row['Date']."'value='".  $row['Systole_reading']."'/>";
           mysql_free_result($result);
       }     

       //Finally, close <graph> element
   $strXML .= "</graph>";
   //Create the chart - Pie 3D Chart with data from $strXML
   echo renderChart("FusionCharts/FCF_Line.swf", "", $strXML, "BloodPressure", 650, 450);

       ?>

    </center>

    </body>

</html> 
```

我收到错误消息：警告：mysql_num_rows(): 6 is not a valid MySQL result resource in C:\xampp\htdocs\phpfusion\ramfusion\Chart.php on line 28 Chart。任何人都可以在这方面帮助我，提前谢谢你，Ramsai

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:28:57.553

因为您试图循环遍历行数（6）而不是行本身。尝试

```
while($row= mysql_fetch_assoc($result)){ 
```

而不是在你的循环上。这将返回行的关联数组，然后将循环遍历，将每一行放入`$row`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T07:37:02.707

再检查几件事：

a) SWF 的路径是正确的。
b) 页面中加载了 FusionCharts.js
c) 在 TEXTAREA 中打印 $strXML 以检查是否生成了正确的 XML。

# visual-studio-2010 - 带有 Visual Studio 2010 的 MFC-SDI 应用程序：新的键盘快捷键不起作用

> ID：10244613
> 
> 赞同：1
> 
> 时间：2012-04-20T10:37:33.273
> 
> 标签：visual-studio-2010, mfc

我想在 Visual Studio 2010 中为 MFC SDI 应用程序添加键盘快捷键。这是我所做的：

1.  将所需的密钥作为虚拟密钥添加到加速器资源（例如，ID 为 ID_NEWGAME 的 VK_SPACE）
2.  将 COMMAND 的事件处理程序连接到 CMyGameView 类中的 ID_NEWGAME
3.  通过尝试使用调试器在事件处理程序内停止来进行测试

结果：当我按下空格键时程序没有反应。

但是，在 Visual Studio 6.0 中，相同的过程按预期工作。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:02:08.870

I have a hunch you're experiencing a problem I've also come across - when you create an SDI application using the latest version of MFC, by default the application loads the accelerator table from the registry at runtime therefore overwriting anything that you've specified in the resource table. I posted a solution in a previous thread [here](https://stackoverflow.com/questions/1290752/why-is-cmfcmenubar-not-utilizing-the-accelerator-table/4186203#4186203) which I think is the same as what you're seeing. Hope that helps.

# java - 即使数据库关闭，如何使应用服务器启动？

> ID：10244618
> 
> 赞同：3
> 
> 时间：2012-04-20T10:37:48.217
> 
> 标签：java, spring, hibernate, tomcat, appserver

我正在使用弹簧和休眠。我的应用程序有 3 个模块。每个模块都有一个特定的数据库。因此，应用程序处理 3 个数据库。在服务器启动时，如果任何一个数据库关闭，则服务器不会启动。**我的要求是即使其中一个数据库关闭，服务器也应该在其他模块的数据库启动时启动**，用户可以在其他两个模块上工作。请建议我如何实现这一目标？我正在使用 spring 3.x 和 hibernate 3.x。我也在使用**c3p0 连接池**。应用服务器是**Tomcat**。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T16:05:23.307

我将使用 @Configuration 注释来创建一个对象，该对象的工作是构造 bean 并处理 DB down 场景。构建 bean 时，测试数据库连接是否正常，如果没有，则返回 bean 的虚拟版本。这将被注入到相关对象中。这个 dummy bean 的工作就是在调用时抛出一个不可用的异常。如果您的应用程序可以处理某些功能的这些不可用异常并向用户显示，同时在使用其他数据源时继续运行，那么您应该没问题。

```
@Configuration
public class DataAccessConfiguration {

  @Bean
  public DataSource dataSource() {
   try {
     //create data source to your database 
     ....
     return realDataSource;
   } catch (Exception) {
     //create dummy data source
     ....
     return dummyDataSource;
   }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T11:48:56.887

这原本是一条评论：

你试过了吗？在连接到数据库之前，您不会知道数据库是否已关闭，因此除非 c3p0 预先验证其所有连接，否则您在尝试使用特定数据库之前不会知道该数据库已关闭。到那时，您的应用程序将已经启动。

# cocoa - 为在 10.3.9 上支持 Xcode 4 框架/库而采取的预防措施

> ID：10244626
> 
> 赞同：1
> 
> 时间：2012-04-20T10:38:26.907
> 
> 标签：cocoa, frameworks, xcode4, osx-lion

我需要在 Xcode 4 中创建可可框架/库并在 10.3.9 上支持它。我知道它是 10 年前的 mac。但这是要求。

我浏览了苹果的 sdk 兼容性指南，文档说如果我们将部署目标设置为 10.4，则无条件它将适用于 10.3.9 版本。我不明白这里的“无条件”指的是什么。

如果我需要在 10.3.9 上获得支持，我需要采取哪些预防措施。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:59:42.343

如果您的 Xcode 版本没有 10.3 SDK，那么您将很难避免意外使用 10.3.9 上不可用的 API 和功能。设置部署目标使您的程序可以在 10.3.9 上*加载*- 可执行文件不会使用 10.3.9 上的加载程序未知的动态加载程序命令以及对 10.3.9 上不可用的符号的任何引用将是弱引用——但这并不意味着它会运行。

为了在不崩溃的情况下运行，您必须避免实际取消引用任何弱链接符号或调用任何不可用的方法。避免这种情况的唯一可靠方法是获得编译器的帮助，但这只有在您拥有适当的 SDK 时才有可能，这在 Xcode 4 中不可用。（老实说，我不知道 10.3 SDK 是什么时候最后可用的。 )

最后，如果您无法在该平台上进行测试，那么尝试支持部署目标是愚蠢的。您需要一台运行 10.3.9 的机器。如果你有，那么你可以使用该版本操作系统的原生 Xcode 版本。您可以使用条件编译在任一环境中构建代码库，尽管 Xcode 项目文件本身不兼容。

# search - Magento 在搜索中显示“单独不可见”的产品

> ID：10244629
> 
> 赞同：0
> 
> 时间：2012-04-20T10:38:49.740
> 
> 标签：search, magento, configurable-product

我有一些可配置的产品以及相关的简单产品。我已将简单的 prd 设置为 -> 单独不可见，但在搜索结果中我可以看到简单的！它是一个错误？我该如何解决这个问题？

谢谢。

# ios - 在地图标注气泡中加载远程图像时的性能问题

> ID：10244631
> 
> 赞同：0
> 
> 时间：2012-04-20T10:39:00.897
> 
> 标签：ios, xcode, image, map, callout

在我的应用程序中，我需要在用户位置周围显示商店。每家商店都有名称、标语和徽标，我们希望在我触摸大头针时在地图上出现的标注气泡上显示所有这些信息。考虑到我需要远程加载图像，并且触摸引脚后等待三秒钟才能看到标注是不可接受的，最好的解决方案是什么？大约 20 个商店的数组文件大约 10kb，但如果我们立即为所有商店加载徽标，可能会像 110kb（考虑到每张图片估计为 5kb），我不确定它是否是个好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:45:16.267

在我的一个项目中，这种情况很好。我正在使用[SDWebImage](https://github.com/rs/SDWebImage)进行图像的远程异步加载。

我做了：

子类化 MKPinAnnotationView：

。H

```
@interface TLStoreResultMapAnnotationView : MKPinAnnotationView

@property (assign)BOOL imageSet;

@end 
```

.m

```
#import "TLStoreResultMapAnnotationView.h"
#import "TLStoreResultMapAnnotation.h"
#import "UIImageView+WebCache.h"

@implementation TLStoreResultMapAnnotationView
@synthesize imageSet=_imageSet;

- (void)layoutSubviews {

    if(self.selected && (!self.imageSet)) {
        TLStoreResultMapAnnotation *annotation = (TLStoreResultMapAnnotation *)self.annotation;

        NSURL *url = [NSURL URLWithString:[annotation.store.imageURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

        UIImageView *storeImageView = (UIImageView *)self.leftCalloutAccessoryView;
        storeImageView.frame = CGRectMake(storeImageView.frame.origin.x,storeImageView.frame.origin.y,30.0,30.0);
        storeImageView.contentMode = UIViewContentModeScaleAspectFill;
        storeImageView.clipsToBounds = YES;
        [storeImageView setImageWithURL:url
                  placeholderImage:[UIImage imageNamed:@"webloading.png"] options:SDWebImageCacheMemoryOnly];

        self.imageSet = YES;
    }

    [super layoutSubviews];
    UIImageView *storeImageView = (UIImageView *)self.leftCalloutAccessoryView;
    storeImageView.frame = CGRectMake(storeImageView.frame.origin.x,storeImageView.frame.origin.y,30.0,30.0);
}

@end 
```

当然，您需要稍微调整代码。

# visual-studio-2010 - 服务器特定的 Web.config 替换

> ID：10244632
> 
> 赞同：0
> 
> 时间：2012-04-20T10:39:14.830
> 
> 标签：visual-studio-2010, web-config

我目前正在使用 Visual Studio 2010。我想为我的“测试”配置设置不同的连接字符串。我曾尝试通过使用配置转换来做到这一点，但它似乎不起作用。

在我的**Web.config**中，我的连接字符串如下：

```
<add name="MyDb" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=DevelopmentDb;Integrated Security=SSPI; MultipleActiveResultSets=True" providerName="System.Data.SqlClient" /> 
```

我发现您可以通过添加配置转换来替换 Web.config 中定义的连接字符串。我右键单击 Web.config 并单击“添加配置转换”。这创建了一个***Web.TEST.config***文件。然后我添加了一个连接字符串替换，但它似乎不起作用。它仍然使用**Web.config**中定义的连接字符串。

**Web.TEST.config**的文件内容为：

```
<?xml version="1.0"?>

<!-- For more information on using web.config transformation visit http://go.microsoft.com/fwlink/?LinkId=125889 -->

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <!--
    In the example below, the "SetAttributes" transform will change the value of 
    "connectionString" to use "ReleaseSQLServer" only when the "Match" locator 
    finds an atrribute "name" that has a value of "MyDB".
  -->

    <connectionStrings>
      <add name="MyDb" 
        connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=TestDb;Integrated Security=SSPI; MultipleActiveResultSets=True" 
        xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
    </connectionStrings>
  <system.web>
    <!--
      In the example below, the "Replace" transform will replace the entire 
      <customErrors> section of your web.config file.
      Note that because there is only one customErrors section under the 
      <system.web> node, there is no need to use the "xdt:Locator" attribute.

      <customErrors defaultRedirect="GenericError.htm"
        mode="RemoteOnly" xdt:Transform="Replace">
        <error statusCode="500" redirect="InternalError.htm"/>
      </customErrors>
    -->
  </system.web>
</configuration> 
```

对我可能遗漏的东西有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:43:31.177

*部署*项目时应用转换，而不是编译时应用。

如果您使用的是 IIS，则可以部署到配置的 Web 应用程序目录，这将导致应用转换。

# python - 在 pBuilder 环境中运行 Python 集成测试

> ID：10244633
> 
> 赞同：2
> 
> 时间：2012-04-20T10:39:23.457
> 
> 标签：python, debian, integration-testing, virtualenv, pbuilder

我已经从一个依赖于一堆 Debian 包工作的 Python 项目构建了一个 Debian 包。Python 项目还包含单元和集成测试（使用[py.test](http://pytest.org/latest/)）。

由于我的项目依赖于一些 Debian 包，我需要在测试环境中安装这些包，并且他们应该验证我的模块与这些包一起正常工作（我想确保我的模块不会因更新这些库而中断）。

我想把这些测试环境的配置和执行放到一个Makefile中。这些测试应该可以在开发人员工作站和 Jenkins 支持的集成服务器上运行。

我目前对我的包进行完整集成测试的方法是：

1.  创建 pBuilder 环境
2.  将 Debian-controlfile 中的依赖项安装到 pBuilder env 中
3.  在这个 pBuilder-environment 里面启动 py.test，同样使用[virtualenv](http://pypi.python.org/pypi/virtualenv) / [tox](http://tox.testrun.org/latest/index.html)来测试不同的 Python 解释器版本
4.  从测试环境收集测试结果（py.test 可以生成[类似 JUnit 的测试输出](http://pytest.org/latest/usage.html#creating-junitxml-format-files)，Jenkins 可以轻松发布）

不幸的是，我找不到任何提示如何实现这些东西——尤其是如何做 3）。我能找到的所有文档都只是关于构建包，而不是关于运行测试。

谁能给我一些提示我如何建立这样的测试设置？另外，我想知道做我想做的事情是否有意义。其他人如何测试（Python）模块与其他 Debian 软件包的集成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:54:03.573

我假设您想在构建包装时运行测试套件。

1) 将`check`目标添加到包的 Makefile 中，该文件运行您的实际测试套件，包括所有 virtualenv/tox 魔法；例如：

```
.PHONY: check
check:
    ./runtests.sh 
```

脚本运行解释器`runtests.sh`检查，然后启动 py.test

2）配置你`debian/rules`实际运行测试

2a) 如果您使用*CDBS*，请在您的 debian/rules 开头添加以下行

```
DEB_MAKE_CHECK_TARGET = check 
```

2b）如果你使用*debhelper*，那么`dh_auto_test`脚本应该自动为你运行测试（假设你的 Makefile 中*有*一个目标）`check`

2c）如果您有自定义`debian/rules`，请在成功构建后运行“检查”目标

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T23:34:52.783

> 其他人如何测试（Python）模块与其他 Debian 软件包的集成？

一种选择是提供一个全新的系统来运行您的测试，即在虚拟机或廉价的云服务器上。

如果您对 pBuilder 死心，您可以调用任意脚本`pbuilder execute`

[http://packaging.ubuntu.com/html/chroots.html](http://packaging.ubuntu.com/html/chroots.html)上的一些其他有用提示

# html - 如何在 HTML5 中做启动页面或 index.html 第一页动画

> ID：10244639
> 
> 赞同：-1
> 
> 时间：2012-04-20T10:39:50.883
> 
> 标签：html, ipad

有什么方法可以为 HTML5 中的 iPad 应用程序的启动画面制作类似 Flash 的动画。

我已经搜索了很多 javascript 但没有得到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:43:18.307

Flash 动画的常用替代品是[画布](http://caniuse.com/#search=canvas)（有自己的 API）和[SVG](http://caniuse.com/#search=svg)（受标准 DOM 操作），iOS Mobile Safari 都支持这两种动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:34:50.523

Adobe 正在开发一种基于 HTML/Javascript/CSS 的 Flash Builder 替代方案，称为[Adob​​e Edge](http://labs.adobe.com/technologies/edge/)，您可以在 Adob​​e Labs 限时免费下载。它没有 Flash 那么多的功能（至少现在还没有），但它提供了足够的基本功能来完成您的要求。

# c - 如何从 UART 正确接收字符串

> ID：10244643
> 
> 赞同：1
> 
> 时间：2012-04-20T10:40:08.777
> 
> 标签：c, string, buffer, pic, uart

我发送这样的字符串：$13,-14,283,4,-4,17,6,-240,-180#

但是由于缓冲区“过载”而没有显示出来，我怎样才能接收整个字符串，或者如何在读取每个字节后清除它？

```
// get a character string 
char *getsU2(char *s, int len) { 
    char *p = s; // copy the buffer pointer 
    do {
        *s = getU2(); // get a new character 
        if (( *s=='\r') || (*s=='\n')) // end of line... 
            break; // end the loop s++;

        // increment the buffer pointer 
        len--;
    } while (len>1); // until buffer is full 

    *s = '\0'; // null terminate the string 

    return p; // return buffer pointer
} 

// get a character string
char *getsU2(char *s, int len) { 
    char *p = s; // copy the buffer pointer 
    do {
        *s = getU2(); // get a new character 

        if (( *s=='\r') || (*s=='\n')) // end of line... 
            break; // end the loop 

        s++;     

        // increment the buffer pointer 
        len--; 
    } while (len>1); // until buffer is full

    *s = '\0'; // null terminate the string      

    return p;    // return buffer pointer
}

char getU2(void) { 
if(U2STAbits.OERR == 1) 
{     U2STAbits.OERR = 0; } 
while (!U2STAbits.URXDA);    // wait for new character to arrive return U2RXREG;
                             // read character from the receive buffer }

getsU2(buffer,sizeof(buffer)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:41:20.570

Try using the UART receive interrupt. Code below is for a PIC24H; modify appropriately.

In your init function:

```
IFS0bits.U1RXIF = 0;        // clear rx interrupt flag
IFS0bits.U1TXIF = 0;        // clear tx interrupt flag

IEC0bits.U1RXIE = 1;        // enable Rx interrupts
IPC2bits.U1RXIP = 1;
IEC0bits.U1TXIE = 1;        // enable tx interrupts
IPC3bits.U1TXIP = 1; 
```

Create an interrupt handler that places the bytes into a buffer or queue:

```
void __attribute__((__interrupt__, auto_psv)) _U1RXInterrupt(void)
{
    char bReceived;

    // Receive Data Ready
    // there is a 4 byte hardware Rx fifo, so we must be sure to get all read bytes    
    while (U1STAbits.URXDA)
    {
        bReceived = U1RXREG;

        // only usethe data if there was no error
        if ((U1STAbits.PERR == 0) && (U1STAbits.FERR == 0))
        {
             // Put your data into a queue
             FIFOPut(bReceived);

        }

    }    

    IFS0bits.U1RXIF = 0;        // clear rx interrupt flag 
} 
```

Your queue code is along these lines:

```
#define FIFO_SIZE 64

char pbBuffer[FIFO_SIZE];
char *pbPut;
char *pbGet;

void FIFOInit(void)
{
    pbPut = pbBuffer;
    pbGet = pbBuffer;
}

void FIFOPut(char bInput)
{
    *pbPut = bInput;
    pbPut++;

    if (pbPut >= (pbBuffer + FIFO_SIZE))
        pbPut = pbBuffer;
}

char FIFOGet(void)
{
    char bReturn;

    bReturn = *pbGet;
    pbGet++;

    if (pbGet>= (pbBuffer + FIFO_SIZE))
        pbGet= pbBuffer;
} 
```

Obviously, one should beef up the FIFO functions to prevent overflow, return errors on an empty queue, etc.

# c# - C# 中具有有限标签支持的 WebBrowser

> ID：10244645
> 
> 赞同：0
> 
> 时间：2012-04-20T10:40:19.857
> 
> 标签：c#, editbox

我需要一个 c# 中的编辑框，它只显示和编辑格式化文本（粗体、彩色、...）并支持 RTL，我可以从输入的文本中获取 Html 代码。

所以使用了 WebBrowser 并在其上启用了 designMod。它非常好，但如果用户粘贴或拖放到其中，它也会显示不需要的内容（图像、链接、表格……）。

我也使用了 RichTextBox，但它有上述问题并且它没有为我提供 html 代码。

如果有人可以帮助我实现 cat 不接受某些标签的 webbrowser 控件？抱歉英语不好！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:43:05.677

在将标签推送到您的网络浏览器之前，过滤掉您不想要的标签。我不相信对此存在一些预制控制。

# tfs - 任何人都可以在 Visual Studio 2012 中找到 TFS“Unshelve”选项吗？

> ID：10244648
> 
> 赞同：144
> 
> 时间：2012-04-20T10:40:24.950
> 
> 标签：tfs, visual-studio-2012

我可以找到搁置按钮没问题，并且今天早些时候搁置了更改，但现在我似乎找不到取消搁置它们的方法！这让我陷入了相当的困境！

如果 Visual Studio 11 Beta 中实际上缺少此按钮，也许我可以执行一个基于控制台的 TFS 命令来临时完成此操作？

谢谢大家，我实际上也无法在谷歌上找到答案。

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2012-04-20T12:43:14.493

转到团队资源管理器，然后是“Pending Changes”，然后是“Actions”，然后是“Find Shelvesets”，然后右键单击要取消搁置的搁置，最后是“Unshelve”。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-05-23T08:19:27.157

还 ：

```
File > Source Control > Find > Find Shelvesets 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-23T14:25:59.253

我总是习惯于右键单击解决方案并选择“取消搁置”。要重新添加此功能：

1.  单击菜单“工具 > 自定义”。这将打开“自定义”对话框。
2.  选择“命令”选项卡。
3.  在“选择要重新排列的菜单或工具栏”部分中选择“上下文菜单”单选按钮。
4.  从下拉列表中选择“项目和解决方案上下文菜单 | 解决方案 | 源代码管理”。
5.  单击“添加命令”按钮。这将打开“添加命令”对话框。
6.  在“类别”列表中选择“文件”。
7.  在“命令”列表中选择“TfsUnshelvePendingChanges”。
8.  单击“确定”按钮关闭“添加命令”对话框。
9.  使用“下移”按钮将新菜单项放置在适当的位置。
10.  单击“关闭”按钮关闭“自定义”对话框。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-29T19:19:50.677

通常，如果您在 Visual Studio 中的数千个可用选项中找不到一个选项，则有一个非常有用的“快速启动”(Ctrl-Q) 功能。在这种情况下，如果您键入“搁置”，它会告诉您在哪里可以找到搁置集。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-17T21:24:21.160

就像添加到 Nock 的答案一样，**如果您在 source control 下打开解决方案，您只能看到 unshelve 选项**。

如果您打开一个空白解决方案，无论您的 Visual Studio 工作区是否连接到 Team Foundation，您都不会看到该选项**。**

如果您尝试在空白解决方案中取消搁置搁置集（TFS 连接到您的 Visual Studio 工作区并且源代码控制全部连接），这就是它的样子，其中**没有**从源代码控制取消搁置的选项。

![连接 TFS 的空白解决方案](../Images/a6716e4b8c681a43f20192cd379b289c.png)

这是打开源代码控制下的解决方案后的样子。

![取消搁置选项](../Images/7387a3b4f73006f384355918017b3a25.png)

**答案的道德是**打开您可能拥有的*任何*解决方案/项目，这些解决方案/项目在源代码控制下，其中包含您想要取消搁置的搁置集。

# java - POST JSON 到 Jersey REST 服务的问题

> ID：10244650
> 
> 赞同：5
> 
> 时间：2012-04-20T10:40:28.890
> 
> 标签：java, ajax, json, rest, jersey

我在将 JSON 发布到 Jersey REST 服务时遇到问题 - GET 运行良好，但 POST 似乎很棘手。我一直在研究这个问题一段时间，到目前为止还没有解决方案。任何帮助深表感谢！

似乎找不到发送 json 的 URL？这是 FireBug 控制台显示的内容：

```
 POST http://localhost:9998/data 400 Bad Request
    Post source: name=Tony
    **Response Headers**
    Connection  close
    Content-Length  0
    Content-Type    text/html; charset=iso-8859-1
    Date    Fri, 20 Apr 2012 10:13:24 GMT
    **Request Headers**
    Accept  application/json, text/javascript, */*; q=0.01
    Accept-Encoding gzip, deflate
    Accept-Language sv-se,sv;q=0.8,en-us;q=0.5,en;q=0.3
    Connection  keep-alive
    Content-Length  9
    Content-Type    application/json; charset=UTF-8
    Host    localhost:9998
    Referer http://localhost:9998/static/page.html
    User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:11.0) Gecko/20100101 Firefox/11.0
    X-Requested-With    XMLHttpRequest 
```

我正在按如下方式进行 POST：

```
<button id='btn' value="knapp" name="knapp" />
    <script type="text/javascript">
    $('#btn').click(function(){
        $.ajax({
            url: '/data',
            type: 'POST',
            contentType: 'application/json',
            data: {name:"Tony"},
            dataType: 'json'
        });
    })
</script> 
```

带有@XmlRootElement 的Javabean 类：

```
@XmlRootElement
public class StatusBean {
    private String name;

    public StatusBean() {
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

资源方式：

```
@Path("/data")
public class PostData {
    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public StatusBean post(StatusBean sb) {
        System.out.println(sb);
        return sb;
    }
} 
```

使用 Grizzly 设置的服务器：

```
public class Main {
    public static final URI BASE_URI = getBaseURI();

    public static void main(String[] args) throws IOException {
        HttpServer httpServer = startServer();

        Map<String,String> initParams = new HashMap<String, String>();
        initParams.put("com.sun.jersey.config.property.packages", "server");
        SelectorThread selector = GrizzlyWebContainerFactory.create("http://localhost:9998/", initParams );

        System.out.println(String.format("Jersey app started with WADL available at "
                + "%sapplication.wadl\nTry out %shelloworld\nHit enter to stop it...",
                BASE_URI, BASE_URI));

        System.in.read();
        httpServer.stop();
    }

    protected static HttpServer startServer() throws IOException {
        System.out.println("Starting grizzly...");

        ClassNamesResourceConfig rc = new ClassNamesResourceConfig(PostData.class);

//        rc.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING, true);

        HttpServer server = GrizzlyServerFactory.createHttpServer(BASE_URI, rc);

        server.getServerConfiguration().addHttpHandler(new StaticHttpHandler(new File(".").getAbsolutePath()), "/static");

        return server;
    }

    private static int getPort(int defaultPort) {
        String port = System.getProperty("jersey.test.port");
        if (null != port) {
            try {
                return Integer.parseInt(port);
            } catch (NumberFormatException e) {
            }
        }
        return defaultPort;
    }

    private static URI getBaseURI() {
        return UriBuilder.fromUri("http://localhost/").port(getPort(9998)).build();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:17:43.477

1.  尝试使您的 bean 可序列化。

    ```
    @XmlRootElement

    public class StatusBean implements Serializable {
    ....
    } 
    ```

2.  检查您的 POST 网址。应该是`

    [http://localhost:9998/](http://localhost:9998/) {projectname}/{restservletmapping}/data

    例如，如果我的 web.xml 看起来像这样并且我的项目名称是 SampleProject

    ```
    <servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/rest/*</url-pattern>
    </servlet-mapping> 
    ```

    URL 将是：[http://localhost:9998/SampleProject/rest/data](http://localhost:9998/SampleProject/rest/data)

    您可以使用工具来测试[SOAP UI](http://www.eviware.com/%22SOAP%20UI%22)等 REST 服务或 POSTMAN、REST CONSOLE 等浏览器插件。

3.  如果上述情况正常并且 REST 服务正在使用测试工具给出响应。那么可能是ajax中的Cross Origin Policy的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-12T19:22:04.823

我有同样的问题。问题是您的数据不会自动转换为 JSON 字符串。因此，您只需要在发布数据之前调用 JSON.stringify(...) 即可：

```
<button id='btn' value="knapp" name="knapp" />
<script type="text/javascript">
$('#btn').click(function(){
    $.ajax({
        url: '/data',
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({name:"Tony"}),
        dataType: 'json'
    });
})
</script> 
```

这应该有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T12:26:22.930

从您的服务器配置中，我看到您尚未使用 Grizzly 配置 JAX-RS。在该[示例](http://viewfromthefringe.blogspot.com/2009/06/jax-rs-hello-world.html)的基础上，您应该以某种方式传递此类属性

```
Map<String,String> initParams = new HashMap<String, String>();
initParams.put( "com.sun.jersey.config.property.packages", "package.with.your.StatusBean.class" ); 
```

另一个配置选项是使用

```
ResourceConfig rc = new PackagesResourceConfig("your.package.with.resources"); 
```

并启动灰熊服务器：

```
GrizzlyServerFactory.createHttpServer(BASE_URI, rc); 
```

查看详细信息：http: [//jersey.java.net/nonav/documentation/latest/user-guide.html](http://jersey.java.net/nonav/documentation/latest/user-guide.html)（“部署根资源”一章）。尝试运行他们拥有的第一个示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T11:24:01.980

您确定要发布的路径是完整的吗？您应该在该方法上定义另一个`Path`注释`post`并在您发布到的 URL 中使用它：

```
@Path("/data")
public class PostData {
    @Path("/postStatus")
    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public StatusBean post(StatusBean sb) {
        System.out.println(sb);
        return sb;
    }
} 
```

然后使用`/data/postStatus`路径将您的请求发布到：

```
<button id='btn' value="knapp" name="knapp" />
<script type="text/javascript">
    $('#btn').click(function(){
        $.ajax({
            url: '/data/postStatus',

            type: 'POST',
            contentType: 'application/json',
            data: {name:"Tony"},
            dataType: 'json'
        });
    })
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-20T10:13:53.050

您可能忘记注册 JSON 映射器，即 Jackson（或您使用的任何映射器）。该功能不会自动启用，您必须在 ResourceConfig 中加载该类：

```
org.glassfish.jersey.jackson.JacksonFeature.class 
```

[样本](https://github.com/jersey/jersey/blob/2.26-b08/examples/json-jackson/src/main/java/org/glassfish/jersey/examples/jackson/MyApplication.java)

[另请参阅 JSON 如何](https://jersey.github.io/documentation/latest/media.html#json)

# iphone - 是否有任何 API 或示例代码可用于 iPhone 应用程序中的 Pinterest 集成？

> ID：10244651
> 
> 赞同：2
> 
> 时间：2012-04-20T10:40:30.850
> 
> 标签：iphone, ios, xcode, ipad, pinterest

我想将 Pinterest 集成到我的 iPhone 应用程序中，以便用户可以直接从 iPhone 应用程序设置 Pin 或喜欢。是否有任何可用的教程或示例代码。是否有任何官方网站获取 iOS 的 API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:52:28.183

到目前为止，还没有 Pinterest 的官方公共 API 可用。

[来源](http://www.itweb.co.za/index.php?option=com_content&view=article&id=52696)

**更新：** Pinterest 为开发人员引入了一个 API，可[在此处](https://developers.pinterest.com/docs/getting-started/introduction/?)获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T16:12:25.507

Pinterest 现在有一个 iOS SDK，但目前您仅限于共享图像：[https ://developers.pinterest.com/ios/](https://developers.pinterest.com/ios/)

# php - 防止在 XHR 调用中缓存链接资源

> ID：10244652
> 
> 赞同：1
> 
> 时间：2012-04-20T10:40:31.043
> 
> 标签：php, ajax, caching, http-headers, mootools

这个问题与 IE 缓存 XHR 调用**无关**，我已经解决了缓存问题，并且从我的 XHR 调用中得到了正确的结果（即改变了）。但是：在我的 XHR 响应（即 HTML）中，不仅 HTML 发生了变化，而且 HTML 所引用的图像也发生了变化。虽然 HTML 正确更改，但此图像不会更改，仅当我完全刷新页面时。

因此，XHR 调用本身没有被缓存，但链接的资源似乎被缓存了。这意味着任何专注于 XHR 调用的解决方案都不起作用（例如向 URL 添加额外参数或设置标头）。似乎浏览器（我尝试过 Safari 和 Firefox）决定使用它们的缓存来帮助 XHR 调用它的链接资源。事实上，开发工具只显示 XHR 的传输，没有其他文件。

如何强制浏览器正确加载（请求）XHR 调用中的图像？

我正在使用 PHP 服务器端（也提供标头）和 MooTools 来处理 XHR 调用。脚本永远不会被缓存，图像会检查“if-modified”标题（尽管我也尝试过从不缓存这些）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:44:19.180

您可以在响应上运行此 JavaScript 代码...

```
var container = document.createElement('div'),
    date = +new Date;

container.innerHTML = htmlReturnedFromXHR;

[].forEach.call(container.querySelectorAll('img[src]'), function(img) {
    img.src += '?' + date;
}); 
```

或者，如果您必须支持较旧的浏览器，请将上面的循环替换为...

```
var img = container.getElementsByTagName('img');

for (i = 0, length = img.length; i < length; i++) {
    img[i].src += '?' + date;
} 
```

执行上述操作的 MooTools 代码：

```
var container = document.createElement('div'),
    date = +new Date
    imgs = container.getElements('img');

imgs.each(function(img) {
    img.src = img.src + '?' + date;
} 
```

# c - 在 C 中嵌入 OCaml：链接错误

> ID：10244653
> 
> 赞同：8
> 
> 时间：2012-04-20T10:40:35.967
> 
> 标签：c, linker, ocaml

我正在尝试使用混合的 C 和 Ocaml 源代码编译程序，C 中的应用程序的主要部分调用 OCaml 代码。好吧，这里没问题，这似乎是一个常见的操作，有[完整的文档](http://caml.inria.fr/pub/docs/manual-ocaml/manual032.html#toc142)，使用标准的 Ocaml 工具很容易做到。

稍微解释一下，这种编译分为 4 个步骤：Caml 编译为 Caml 对象，然后将 Caml 编译为 C 对象，然后编译 C 文件，最后将所有 C 对象一起编译并获得可执行文件。

理论上，Ocaml 编译器会自动嵌入 Caml 运行时、GC 及其所有内容，我们只需要指明是使用 ocaml 字节码（引用`-lcamlrun`）还是本机二进制文件（引用`-lasmrun`）。

所以，看起来很简单，我们来做吧。第 1、2 和 3 步按预期进行，很好！只有第四步是有问题的。看看：

```
cc -o /home/thomas/Documents/projects/ocaml/GogoGame/bin/GogoPlayer.exe \
        -L/usr/lib/ocaml  -lcamlrun \
        /home/thomas/Documents/projects/ocaml/GogoGame/src/init_camlcode.o \
            /home/thomas/Documents/projects/ocaml/GogoGame/src/init.o \
            /home/thomas/Documents/projects/ocaml/GogoGame/src/interface.o \
            /home/thomas/Documents/projects/ocaml/GogoGame/src/caml_func.oo
/home/thomas/Documents/projects/ocaml/GogoGame/src/interface.o: In function `main':
interface.c:(.text+0x0): multiple definition of `main'
/usr/lib/ocaml/libcamlrun.a(main.o):(.text+0x0): first defined here
/usr/lib/ocaml/libcamlrun.a(floats.o): In function `caml_exp_float':
(.text+0x488): undefined reference to `exp'
/usr/lib/ocaml/libcamlrun.a(floats.o): In function `caml_fmod_float':
(.text+0x4f9): undefined reference to `fmod'
/usr/lib/ocaml/libcamlrun.a(floats.o): In function `caml_log_float':
(…)
/usr/lib/ocaml/libcamlrun.a(unix.o): In function `caml_dlopen':
(.text+0x2ed): undefined reference to `dlopen'
/usr/lib/ocaml/libcamlrun.a(unix.o): In function `caml_dlclose':
(.text+0x300): undefined reference to `dlclose'
/usr/lib/ocaml/libcamlrun.a(unix.o): In function `caml_dlsym':
(.text+0x31b): undefined reference to `dlsym'
/usr/lib/ocaml/libcamlrun.a(unix.o): In function `caml_dlerror':
(.text+0x342): undefined reference to `dlerror'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init_camlcode.o:(.data.rel+0xc): undefined reference to `caml_array_get_addr'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init_camlcode.o:(.data.rel+0x10): undefined reference to `caml_array_get_float'
(...)
/home/thomas/Documents/projects/ocaml/GogoGame/src/init_camlcode.o:(.data.rel+0x31c): undefined reference to `caml_lazy_make_forward'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init_camlcode.o:(.data.rel+0x320): undefined reference to `caml_get_public_method'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init_camlcode.o:(.data.rel+0x3ac): undefined reference to `caml_terminfo_setup'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init_camlcode.o:(.data.rel+0x3b0): undefined reference to `caml_terminfo_backup'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init_camlcode.o:(.data.rel+0x3b4): undefined reference to `caml_terminfo_standout'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init_camlcode.o:(.data.rel+0x3b8): undefined reference to `caml_terminfo_resume'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init.o: In function `camlInit__f_1030':
(.text+0xc): undefined reference to `camlPervasives'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init.o: In function `camlInit__f_1030':
(.text+0x11): undefined reference to `camlPervasives__output_string_1191'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init.o: In function `camlInit__f_1030':
(.text+0x19): undefined reference to `camlPervasives__string_of_int_1130'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init.o: In function `camlInit__f_1030':
(.text+0x20): undefined reference to `camlPervasives'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init.o: In function `camlInit__f_1030':
(.text+0x25): undefined reference to `camlPervasives__output_string_1191'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init.o: In function `camlInit__format_result_1034':
(.text+0x9c): undefined reference to `camlPrintf__sprintf_1414'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init.o: In function `camlInit__entry':
(.text+0xe1): undefined reference to `caml_c_call'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init.o: In function `camlInit__entry':
(.text+0xfb): undefined reference to `caml_c_call'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init.o: In function `camlInit__entry':
(.text+0x115): undefined reference to `caml_c_call'
/home/thomas/Documents/projects/ocaml/GogoGame/src/init.o: In function `camlInit__f_1030':
(.text+0x32): undefined reference to `camlPervasives__print_newline_1276'
collect2: ld returned 1 exit status
make: *** [GogoPlayer] Error 1 
```

恕我直言，似乎有两个错误：

*   多重定义`main`
*   链接器找不到模块`Pervasive`

我真的不知道如何解决这个问题，也许我必须链接另一个文件。有人有想法吗？

按照要求，我放置了给出这些错误的代码。这将非常简单，因为代码很少，大部分都在文档中的示例中给出。

**`init.ml`**

```
let f x = print_string "f is applied to "; print_int x; print_newline()
let rec fib n = if n < 2 then 1 else fib(n-1) + fib(n-2)
let format_result n = Printf.sprintf "Result is: %d\n"

let _ =
  Callback.register "Arbitrary Name" f;
  Callback.register "fib" fib;
  Callback.register "format_result" format_result 
```

**`caml_func.c`**

```
#include <stdio.h>
#include <string.h>
#include <caml/mlvalues.h>
#include <caml/callback.h>

void call_caml_f(int x)
{
    static value * closure_f = NULL;
    if (closure_f == NULL) /* First time around, look up by name */
        closure_f = caml_named_value("Arbitrary Name");

    caml_callback(*closure_f, Val_int(x));
}

int fib(int n)
{
    static value * fib_closure = NULL;
    if (fib_closure == NULL) fib_closure = caml_named_value("fib");
    return Int_val(caml_callback(*fib_closure, Val_int(n)));
}

char * format_result(int n)
{
   static value * format_result_closure = NULL;
   if (format_result_closure == NULL)
      format_result_closure = caml_named_value("format_result");
   return strdup(String_val(caml_callback(*format_result_closure, Val_int(n))));
   /* We copy the C string returned by String_val to the C heap
   so that it remains valid after garbage collection. */
} 
```

**`interface.c`**

```
#include <stdio.h>
#include "caml_func.c"

#define BYTECODE

int main(int argc, char **argv)
{
#ifdef BYTECODE
    caml_startup(argv);
#else
    caml_main(argv);
#endif

    /* Make sure that stdout is not block buffered. */
    setbuf(stdout, NULL);

    /* Process GTP commands. */
    //gtp_main_loop(commands, stdin, NULL);
    // CAML code here ?

    return 0;
} 
```

这就是全部。显然，我跳过了所有无意义的东西，因为这个简单的例子**应该**有效而无效。它必须是 my `Makefile`，然后是。

顺便说一句，它非常丑陋。如果您对这种应用程序（C 中的 Caml）有*建议*，或者重构建议，我会全部采纳。

**`Makefile.ocaml`**

```
.PHONY: all clean mrproper

# RULES and EXEC are magically set in Makefile.magic
all: depend $(RULES) $(EXE)
    @echo [DONE]

mli: $(CAML_ONLY:.ml=.mli)
ml-byte: $(CAML_ONLY:.ml=.cmo)
ml-called-byte: $(CAML_CALLED_BY_C:.ml=.$(OBJ))
ml-nativ: $(CAML_ONLY:.ml=.cmx)
ml-called-nativ: $(CAML_CALLED_BY_C:.ml=.$(OBJ))
c-wrapper: $(C_WRAPPERS:.c=.oo)
c-only: $(C_ONLY:.c=.o)

$(EXE):
    $(CC) -o $(BIN)/$(EXE).exe \
        $(FLAGS) \
        -L$(OCAMLLIB) $(LINKED) -l$(RUNLIB) \
        $(wildcard $(SRC)/*.$(OBJ)) $(wildcard $(SRC)/*.oo) # */

%.o: %.c
    $(CC) $(FLAGS_C) -c $< -o $(SRC)/$(*F).o
%.mli: %.ml
    $(OCAMLC) $(FLAGS_ML) -i $< > $(SRC)/$(*F).mli
%.cmi: %.mli
    $(OCAMLC) $(FLAGS_ML) -c $< -o $(SRC)/$(*F).cmi
%.cmo: %.ml
    $(CAMLC) $(FLAGS_ML) -c $< -o $(SRC)/$(*F).cmo
%.cmx: %.ml
    $(CAMLOPT) $(FLAGSOPT) -c $< -o $(SRC)/$(*F).cmx
# native
%.o: %.ml
    $(cd $(SRC))
    $(OCAMLC) -output-obj -o $(*F)_camlcode.o \
        $(FLAGS_MLC) \
        $<
# bytecode
%.ob: %.ml
    $(cd $(SRC))
    $(OCAMLOPT) -output-obj -o $(*F)_camlcode.ob \
        $(FLAGS_MLC) \
        $<
%.oo: %.c
    $(CC) $(FLAGS_WRAP) -c $< -o $(SRC)/$(*F).oo

clean_mli:
    rm -f $(SRC)/*.mli # */
clean:
    rm -f $(BIN)/*.{a,o,oo,cmi,cmo,cmx} # */
    rm -f $(SRC)/*.{a,o,oo,cmi,cmo,cmx} # */

mrproper: clean, clean_mli
    rm -f $(BIN)/$(EXE)

depend:
    $(OCAMLDEP) $(INCLUDES) $(SRC)/*.ml $(SRC)/*.mli > .depend # */

include .depend 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T19:18:41.037

您的链接命令在两个方面不正确：

1.  您需要链接`-ldl`for`dlopen`等。
2.  您必须将库放在引用它们的对象*之后*（即您的`-lcamlrun`参数在链接行的错误位置）。链接线上的参数顺序[很重要](http://webpages.charter.net/ppluzhnikov/linker.html)。

# vba - VBA - 从另一个工作簿中删除一行？

> ID：10244655
> 
> 赞同：2
> 
> 时间：2012-04-20T10:40:45.313
> 
> 标签：vba, excel, excel-2010

昨天我在以下方面寻求帮助：

1.  从 VBA 宏创建一个新工作簿，工作簿“B”
2.  将一行数据从工作簿“A”复制到工作簿“B”
3.  在关闭之前以适当的格式保存工作簿“B”

昨天的帖子（[VBA - 如何将 Excel 中的行从一个工作簿复制到另一个工作簿？](https://stackoverflow.com/questions/10230025/vba-how-to-copy-row-in-excel-from-one-workbook-to-another)）为我的问题提供了一个可靠的解决方案。

从那以后，我在代码方面取得了进一步的进展，并对它有了新的要求。我现在需要一段代码，根据工作簿'A' sheet1 的单元格 Ai 中的值是否与工作簿'B' sheet1 的单元格 Ai 中的值匹配（我是递增的整数变量）。这段代码在行中复制的代码部分之后运行很多，并且主行已经更新了新信息，因此这看起来有点落后。

我在下面的内容应该让您对我拥有的内容有所了解：

```
...
Do Until IsEmpty(newBk.Sheets("Bad Records").Range("A" & extFileRowCount))
     If newBk.Sheets("Bad Records").Range("A" & extFileRowCount) = _
        mainBk.Range("W" & sdRow).Value Then
        'then delete the row and reinsert
        '***** Stuck here. How do I remove the row? *****'    
         newBk.Sheets("Bad Records").Range _
            ("A" & extFileRowCount).remove '???
            newRowCount = newRowCount + 1
            mainBk.Rows(sdRow).Copy newBk.Sheets _                
                 ("Bad Records").Rows(newRowCount)
      Else
           extFileRowCount = extFileRowCount + 1
      Loop
... 
```

我认为我的算法是正确的，但我坚持如何删除该行。任何帮助将不胜感激。

资历架构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:59:51.627

我不太清楚为什么你在循环中有这条线

```
mainBk.Rows(sdRow).Copy newBk.Sheets _                
("Bad Records").Rows(newRowCount) 
```

但是要删除行，您可以使用此代码（**UNTESTED**）

```
Sub Sample()
    Dim i As Long
    Dim Delrange As Range

    Application.ScreenUpdating = False

    '
    '~~> Rest of the code
    '

    For i = extFileRowCount To 1 Step -1
        If newBk.Sheets("Bad Records").Range("A" & extFileRowCount) = _
           mainBk.Range("W" & sdRow).Value Then

            If Delrange Is Nothing Then
                Set Delrange = newBk.Sheets("Bad Records").Rows(i)
            Else
                Set Delrange = Union(Delrange, newBk.Sheets("Bad Records").Rows(i))
            End If
        End If
    Next i

    If Not Delrange Is Nothing Then Delrange.Delete

    '
    '~~> Rest of the code
    '

    Application.ScreenUpdating = True
End Sub 
```

高温高压

# c++ - C++ 中的 NV12 到 RGB24 转换代码

> ID：10244657
> 
> 赞同：2
> 
> 时间：2012-04-20T10:40:57.213
> 
> 标签：c++, winapi, intel, codec, color-codes

有谁知道如何将 Intel Media SDK（版本：Media SDK 2010）H.264 视频帧解码输出 NV12 格式转换为 RGB888（RGB24）位转换？

基本上媒体 SDK 解码器输出将是 NV12 格式，渲染需要 RGB24 位格式，所以如果有任何转换代码可用于转换 NV12-->RGB24 将对我们有很大帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T11:52:07.140

查看[YUV 到 RGB 转换](http://www.fourcc.org/fccyvrgb.php)，然后您可以使用有关[YUV 像素格式](http://www.fourcc.org/yuv.php#NV12)的信息（链接指向 NV12）作为第一个链接的输入并进行转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-15T14:53:29.087

查看此代码：[https](https://github.com/andrechen/yuv2rgb) ://github.com/andrechen/yuv2rgb 虽然它适用于 NV21，但唯一的区别是 UV (VU) 字节的顺序。您需要做的就是颠倒顺序（loadvu 函数）：

```
static void loadvu(int& U, int& V, unsigned char const* &uv) {
    U = (*uv++) - 128;
    V = (*uv++) - 128;
} 
```

# c# - 为什么我必须修改 web.config 才能启用调试？

> ID：10244659
> 
> 赞同：2
> 
> 时间：2012-04-20T10:41:00.857
> 
> 标签：c#, asp.net, visual-studio-2010, sharepoint-2010, web-config

为什么它不会自动启用？

即在配置文件中启用调试有什么缺点？必须有一些，否则它肯定会默认启用。

有关上下文，请参阅标签。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T10:45:30.723

> 为什么它不会自动启用？

安全和性能原因 - 很容易忘记在实时 Web 服务器上执行此操作，这不是一个好主意。

在调试模式下运行比在发布模式下运行要慢得多*。*它还在[YSOD](http://en.wikipedia.org/wiki/Screen_of_death)中公开了更多信息。[默认情况下安全](http://en.wikipedia.org/wiki/Secure_by_default)比替代方案更好......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:11:23.903

当 debug=false 时，它​​将省略许多在发布中不需要的调试信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T10:45:31.423

简短的回答 - 您不希望您的用户看到调试模式返回的自定义错误消息，因此调试模式应在开发时设置为 true，在发布时设置为 false。最佳实践是在发布后使​​用设计的“友好”错误屏幕。

# mysql - MYSQL 插入重复

> ID：10244661
> 
> 赞同：1
> 
> 时间：2012-04-20T10:41:08.663
> 
> 标签：mysql

我正在尝试运行以下语句：

```
INSERT INTO table (
    as,
    ad
    ,af,
    ag,
    ah,
    aj
)                                       
VALUES (
    'a',
    'b',
    'c',
    'd',
    'e',
    'f'
)
ON DUPLICATE KEY UPDATE (
    aj='dv',
    ah='ev',
    ag='fv'
); 
```

并收到以下错误：

```
You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for the 
right syntax to use near '(ag='dv',ah='ev',ah='fv')' 
at line 3 
```

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T10:42:56.590

跳过 ()..

```
 INSERT INTO site_domains_meta 
 (domainname,metatype,pagename,english,indonesian,japanese)
  VALUES ('a','b','c','d','e','f')
  ON DUPLICATE KEY UPDATE english='dv',indonesian='ev',japanese='fv'; 
```

[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

# iphone - 将 c 类型矩阵写入磁盘

> ID：10244662
> 
> 赞同：2
> 
> 时间：2012-04-20T10:41:14.313
> 
> 标签：iphone, objective-c

我的程序中有一个 C 类型的结构矩阵。我想将它写在一个文件中，供没有多任务处理的旧设备使用。

有什么简单的方法可以将它写入磁盘，还是我必须将它包装在自定义对象中并写入？

一个例子会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:46:45.687

您可以使用`NSData`'`dataWithBytes:length:`方法包装矩阵并将其写入文件。

```
MyStruct matrix[20][30];
NSData *data = [NSData dataWithBytes:matrix length:sizeof(matrix)];
[data writeToFile:myFile atomically:YES];

NSData *back = [NSData dataWithContentsOfFile:myFile];
MyStruct backMatrix[20][30];
[back getBytes:&backMatrix]; 
```

# ruby-on-rails - 模型验证错误消息未显示

> ID：10244664
> 
> 赞同：0
> 
> 时间：2012-04-20T10:41:17.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

当我单击登录链接时，它应该检查有效的用户名和密码并在登录部分页面上显示消息，我在颜色框中将其作为弹出窗口调用，但我无法显示错误消息。

这是我的登录控制器：

```
def login
  if request.post?
    @user = User.new(params[:user])
    user=User.authenticate(params[:username], params[:password])
    if user.nil?
    flash[:error] = 'Login unsuccessful'
        redirect_to :back
    else
        flash[:notice] = 'Login successful'
        session[:user] = user.id
        redirect_to :controller=>'users', :action => 'show',:username=>user.username
    end
  end    
end 
```

用户.rb：

```
def self.authenticate(username, pass)
  user = find(:first, :conditions=>["username = ?", username])
  return nil if user.nil?
  return user if User.hash_password(pass) == user.password && username == user.username
  nil
end 
```

在我的视图`page_sign_in.html.erb`页面中

```
<%= form_for @user, :url=>{:controller=>"logins",:action=>"login"},:remote=>true,:html=>{ :onSubmit => "return checkSignupValidation()",:id=>"signin_form", :multipart=>true}  do |f| %> 
```

`@user`给出错误：`undefined method`Nilclass`的model_name'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:00:15.477

您的问题是没有登录模型 - 不需要。您不想使用`form_for`，请改用`form_tag`：

```
<%= form_tag controller: "logins", action: "login", etc.. do %>
  <%= text_field_tag :username %>
  <%= password_field_tag :password %>
<% end %> 
```

然后我会向您的控制器推荐一些改进：

```
def login
  if request.post?
    user = User.authenticate(params[:username], params[:password])
    if user.nil?
        flash[:error] = 'Login unsuccessful'
        redirect_to :back #I try to avoid :back, it feels better to use a fixed path
    else
        flash[:notice] = 'Login successful'
        session[:user] = user.id
        redirect_to :controller=>'users', :action => 'show', :username=>user.username
    end
  end    
end 
```

您不需要 @user 变量，因此只需避免不必要的数据库查询。不知道用 :back 好不好用，我总是尝试使用固定路径。

# java - 如何使用水平滚动设置 ListView？

> ID：10244665
> 
> 赞同：0
> 
> 时间：2012-04-20T10:41:17.873
> 
> 标签：java, android, listview, android-listview

> **可能重复：**
> [Android 中的水平 ListView？](https://stackoverflow.com/questions/3240331/horizontal-listview-in-android)

我正在研究android，我想`ListView`滚动水平。有什么想法可以使用 android 属性来做到这一点`ListView`吗？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:51:40.300

在 dev-smart 上有一篇关于这个的优秀文章

[ListView 中的水平滚动](http://www.dev-smart.com/archives/34)

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:56:12.783

可能的重复：

[Android中的水平ListView？](https://stackoverflow.com/questions/3240331/horizontal-listview-in-android)

还有一个例子：

[http://nan-devblog.blogspot.in/2008/12/android-how-to-use-horizo​​ntal-scrolling.html](http://nan-devblog.blogspot.in/2008/12/android-how-to-use-horizontal-scrolling.html)

# apache - .htaccess "?" 登录文件名问题

> ID：10244671
> 
> 赞同：1
> 
> 时间：2012-04-20T10:42:08.243
> 
> 标签：apache, .htaccess, http-status-code-404, quote

有静态 html 文件称为`blahblah.html?somestring`. 我总是收到 404 错误。当我尝试时`blahblah.html%3fsomething`- 它半有效（将 html 源显示为文本），但 ` 需要 URL 与问题符号完全一致。

如何使 Apache 使用包含“？”的确切 URL 显示此文件。

我试图**将**文件重命名为“blahblah.html-somestring” **+ .htaccess 中的规则**

```
RewriteRule ^/(.*).html\?(.*)$ /$1.html-$2 [NE] 
```

它**没有帮助**

**这帮助了我：我将所有文件重命名为 blahblah.html-somestring.html + 将其添加到 .htaccess：**

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} !^$
RewriteRule ^[^.]+\.html/?$ %{REQUEST_URI}-%{QUERY_STRING}.html? [L,NC] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:15:59.853

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放入 DOCUMENT_ROOT 下的 .htaccess 中：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} !^$
RewriteRule ^[^.]+\.html/?$ %{REQUEST_URI}-%{QUERY_STRING}? [L,NC,R] 
```

这将重写`blahblah.html?somestring`为`blahblah.html-somestring`. 但是，如何从 中提供内容`blahblah.html-somestring`，您必须弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:37:50.850

实际上我可以在这里看到两个问题：

### 1）你想使用？作为文件名一部分的字符

我看不到这个问题的简单解决方案。问号是 HTTP 协议的一部分，您可以重写 URL，但使用这些工具无法实现所需的解决方案。如果您可以使用 %3f 方法，这将是解决此问题的最简单方法。

### 2) 您想在文件后缀之外设置正确的 MIME 类型

Apache 根据文件名检测正确的 MIME 类型（例如 text/html）。如果文件以 .htm 或 .html 结尾，Apache 会提供 MIME 类型为 text/html 的内容。由于您的文件名不以预期的后缀结尾，并且正则表达式确实适用于 MIME 表，因此使其工作的唯一方法是 mod_rewrite 模块中的一些正则表达式。在这里您可以检测到文件名中间的后缀并能够设置 MIME 类型：

```
RewriteEngine On
RewriteRule ^(.+\.html.*)$ $1 [T=text/html] 
```

### 整体解决方案：

您可以使用简单的 Web 应用程序解决 #1 和 #2，检查源请求字符串并提供匹配的文件（以及设置正确的 MIME 类型）。例如，您可以使用 PHP 执行此类操作。

# html - Tabindex 焦点样式

> ID：10244676
> 
> 赞同：9
> 
> 时间：2012-04-20T10:42:19.777
> 
> 标签：html, css, accessibility

我已经`div`使用该属性制作了一个 tabbable，`tabindex`以使隐藏的内容可以访问。

当前，当用鼠标单击时，`div`获取浏览器`:focus`样式。

有没有办法让可选项卡元素仅*在通过键盘访问*时才具有焦点样式？默认情况下，锚元素具有此功能。

*   `Div`with`tabindex='0'`获取鼠标和键盘交互的浏览器焦点样式
*   Anchor 仅在键盘交互上获得浏览器焦点样式

我希望 div 模拟锚。不幸的是，让它成为锚不是一种选择。

任何帮助都会很棒，我真的很茫然。

编辑->这是一个例子：http: [//jsfiddle.net/LvXyL/2/](http://jsfiddle.net/LvXyL/2/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T12:36:58.690

当然只需将 :focus 伪类添加到 div 和样式中。我建议使用轮廓与边框。我更新了小提琴。

```
div:focus {outline: blue solid 2px;} 
```

Kub 提出了一个 JS 解决方案，但是如果你真的不需要，为什么要使用 js 呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-06T17:45:16.097

我在使用 javascript 向正文中添加/删除一个类来指示用户是使用鼠标还是键盘时取得了巨大的成功。使用这些类来根据需要设置焦点状态的样式。

```
document.addEventListener("mousedown", () => {
  document.body.classList.add("using-mouse")
  document.body.classList.remove("using-keyboard")
})

document.addEventListener("keydown", () => {
  document.body.classList.add("using-keyboard")
  document.body.classList.remove("using-mouse")
}) 
```

在 css 中，您可以执行以下操作：

```
.using-mouse :focus {
  outline: none;
}

.using-keyboard :focus {
  outline: auto 5px blue;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-21T05:49:21.683

我建议**不要特别关注诸如`div`, `p`,之类的标签`span`**

让我们编写一个通用选择器来为所有元素实现此功能。

```
*:focus {
   outline: blue solid 2px;
} 
```

如果你想具体一点，我会推荐这个。

```
*[tabindex]:focus {
    outline: 2px green solid;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-20T12:32:45.467

如果您可以使用javascript，请尝试使用`onclick`属性。

`onclick="this.blur()"`失去焦点

`onclick="this.focus()"`用于设置焦点

`DIV`单击失去焦点并`A`设置焦点的示例[http://jsfiddle.net/LvXyL/6/](http://jsfiddle.net/LvXyL/6/)

如果您长时间按住鼠标键，缺点是可见的焦点样式。

# javascript - 如何使 jQuery 向上和向下箭头按钮逐步垂直滚动正文？

> ID：10244677
> 
> 赞同：2
> 
> 时间：2012-04-20T10:42:28.603
> 
> 标签：javascript, jquery, html

我正在创建一个单页网站，该网站在一个页面上包含 5 个部分。我需要两个按钮，滚动条附近的向上和向下箭头来帮助用户使用这些按钮进行滚动。这些按钮应分别依次滚动到上一个和下一个部分。基本上我们正在滚动整个身体。

例如，导航是 Home、About、Projects、Gallery & Contact。

在主页上并单击向下箭头时，正文应滚动到关于并停止。如果在关于，向上按钮应该将我们带到主页部分。

我是 jQuery n00b，所以请帮我提供代码示例。

到目前为止的代码：

```
<div id="arrows">
<a href="javascript:;" id="arrow-up">&uarr;</a>
<a href="javascript:;" id="arrow-down">&darr;</a>
</div> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:49:59.643

您可以使用 jquery animate 函数：

```
<div id="HomeSection">
   <h2>Home</h2>
   <input type="button" onclick="scollWin('AboutSection');" value="Scroll to Next" />     
</div>

<div id="AboutSection">
    <h2>About</h2>
    <p>About your page....</p>
    <input type="button" onclick="scollWin('HomeSection');" value="Scroll to Previous" />
    <input type="button" onclick="scollWin('ProjectSection');" value="Scroll to Next" />
 </div> 
```

查询：

```
function scrollWin(id){
   $('html,body').animate({
      scrollTop: $("#" + id ).offset().top
   }, 2000);
} 
```

源码和演示：[链接](http://blog.freelancer-id.com/2009/03/26/scroll-window-smoothly-in-jquery/)

# c# - 将空值与对象进行比较而不是将对象与空值进行比较有什么问题

> ID：10244682
> 
> 赞同：4
> 
> 时间：2012-04-20T10:42:50.320
> 
> 标签：c#, java, compiler-construction, null

我刚刚发现我可以`null`与`Object`这样的人进行比较，

`if(null != Object)`

而不是`Object`与`null`比较

```
Object != null 
```

如果使用前一种方法可能会出现什么问题？

那合法吗？如果不是，那么为什么编译器会接受它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-20T10:49:54.097

两者都是等价的，但这`null != object`是一种古老的语言实践，在这些语言中，写入`if (object = null)`并意外地将 null 分配给对象是有效的。阻止这起事故的发生是一个守卫。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T10:48:26.953

大多数人说`Object != null`因为这是他们习惯的，所以更容易阅读。

我听到的最好的论点`null != object`是避免不良表达。例如捡起一个错字`if (var == 1)`

```
if (var = 1) // this is valid C
if (1 = var) // this is not valid C 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-20T10:49:33.537

它有一个问题 - 可读性。如果你想写一个干净的代码，你应该关心它将来的阅读方式。它需要很明显，它做什么以及为什么它做某件事。如果您将“对象”放在评估的右侧，那么您真正在做什么就变得不那么明显了。好吧，至少在我看来……

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T10:51:00.063

这只是可读性的问题。如果你能大声朗读你的代码并且它是有意义的，那么它更容易理解。第二个版本就像 Yoda-talk.. “null is not the object..” 与“The object is not null”..

这同样适用于给你的变量和方法起个好名字。

编写可读代码的好参考站点：http: [//www.cleancoders.com/](http://www.cleancoders.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T10:45:07.210

这是相同的。这几乎就像说 if `1 != 2`。这是否意味着`2 != 1`？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T10:49:16.357

该`!=`运算符的行为与相等运算符的测试一样`==`。

忽略表达式中的任何副作用 then ( `expr1 != expr2`) 和 ( `expr2 != expr1`) 完全相同。

如果**Object**是一个变量（或常量），那么 ( `null != Object`) 也同样有效（尽管可读性稍差）。

# javascript - 如何跨来自同一站点的不同页面加载维护浏览器 JavaScript 中的状态？

> ID：10244695
> 
> 赞同：0
> 
> 时间：2012-04-20T10:43:52.803
> 
> 标签：javascript

我需要做一些非常简单的事情，即在不同的页面加载中维护突出显示的面板栏项目。我将其用作菜单，单击它时选定的菜单项突出显示它看起来不错，当该菜单项的链接（页面）返回时，重新加载菜单并且我丢失了它。

如果我可以保留在本地，我真的不想使用 ajax 调用来管理会话变量，但是我还能在哪里存储这个菜单状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T10:46:07.823

[Cookies](http://www.quirksmode.org/js/cookies.html)，[本地存储](http://caniuse.com/#search=storage)，或者您可以在链接到的 URI 中对数据进行编码（例如在片段标识符中）。

# c - Strtok recursive call pointer loss

> ID：10244701
> 
> 赞同：2
> 
> 时间：2012-04-20T10:44:08.777
> 
> 标签：c, strtok

I need in my program to call strtok twice, one inside the other. The problem I've got is that the first strtok cannot resume the loop after executing the inside strtok and it loses the pointer of the first char.

To explain more here is an example:

*main* :

```
 tokens = strtok (stmt, ":");
        while (tokens != NULL) {
            convert_field(tokens);
            tokens = strtok (NULL, ":");
        } 
```

in the `convert_field` function I do

```
tokens = strtok (sub_stmt, ".->//");
        while (tokens != NULL) {
            convert_field(tokens);
            tokens = strtok (NULL, ".->//");
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T10:47:41.710

`strtok` is not reentrant (which means you cannot call the function again before it finishes its previous execution), you have to use `strtok_r` (which is reentrant) instead.

# html - 如果父母也有，孩子不能有最小身高吗？尝试制作粘性页脚

> ID：10244704
> 
> 赞同：0
> 
> 时间：2012-04-20T10:44:20.537
> 
> 标签：html, footer, css

正如主题所说，当它的父级也设置了 min-height 时，我似乎无法让 min-height 在元素上工作。我编写了一个 jsfiddle 示例来向您展示我在说什么：

[http://jsfiddle.net/cE29B/5/](http://jsfiddle.net/cE29B/5/)

我这样做的目的当然是让页脚始终位于窗口或站点的底部，具体取决于站点大小。

会有人碰巧知道如何解决这个问题，并且在我想要的地方仍然有那个页脚吗？

谢谢！！

编辑：更清楚地说，这里的主要问题是#content（绿色背景）只有一行高，而 CSS 说它应该有 100% 的最小高度。如果它的父级的高度为 % 或 px，或者最小高度仅为 px，则此方法有效。% min-height 打破了孩子的 % min-height。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:56:57.477

嘿，你可以给你的页脚位置和底部 0；

删除 margin-top 就像这样检查住[http://jsfiddle.net/rohitazad/cE29B/8/](http://jsfiddle.net/rohitazad/cE29B/8/)

# android - Android 监听安装通知

> ID：10244705
> 
> 赞同：0
> 
> 时间：2012-04-20T10:44:20.897
> 
> 标签：android, installation, google-play

谷歌在通知菜单中显示安装过程的百分比。有没有可能听。我希望 fe 收到安装过程的开始和结束。我知道结局可以用`android.intent.action.PACKAGE_ADDED`. 但是我如何才能获得有关安装开始的信息，或者此时是否从 Play 商店下载了一些应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:11:08.020

> 有没有可能听。

不，您不能监视其他应用程序`Notifications`。

> 但是我如何才能获得有关安装开始的信息，或者此时是否从 Play 商店下载了一些应用程序？

您修改固件以添加此功能并将此固件安装在您自己的设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T11:16:12.803

这可能在 API 18（android 4.3 jelly bean）上是可能的：http: [//developer.android.com/reference/android/service/notification/NotificationListenerService.html](http://developer.android.com/reference/android/service/notification/NotificationListenerService.html)

[http://developer.android.com/about/versions/jelly-bean.html#43-beautiful-apps](http://developer.android.com/about/versions/jelly-bean.html#43-beautiful-apps)

[http://developer.android.com/about/versions/android-4.3.html#NotificationListener](http://developer.android.com/about/versions/android-4.3.html#NotificationListener)

[http://android-developers.blogspot.co.il/2013/07/android-43-and-updated-developer-tools.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20blogspot/hsDu%20%28Android% 20开发人员%20博客%29](http://android-developers.blogspot.co.il/2013/07/android-43-and-updated-developer-tools.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20blogspot/hsDu%20%28Android%20Developers%20Blog%29)

# php - 如何将身份验证从 ios 发送到远程服务器 php

> ID：10244708
> 
> 赞同：3
> 
> 时间：2012-04-20T10:44:36.243
> 
> 标签：php, ios

我正在构建一个 iOS 应用程序，我需要能够向 php 5 应用程序发出经过身份验证的请求以获取各种数据。php 5 应用程序正在使用 codeigniter 框架和 URL，例如[https://example.com/controller/function](https://example.com/controller/function)来通过 twitter 对用户进行身份验证……一旦通过身份验证，就会将身份验证存储在名为“auth”的安全 cookie 中。 "

我想知道的是如何从 iOS/iPhone 应用程序对我的用户进行身份验证，保留身份验证令牌并将其与将来的请求一起发送到 codeigniter 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:04:31.557

大局是您需要在代码点火器应用程序中实现类似 api 控制器的东西。这个控制器应该有一个“auth”方法。在某些时候，您会想要将 twitter cookie 的哈希值传递给 ios 应用程序。然后，对于对 api 控制器的每个后续调用，发送散列，您的代码点火器应用程序会将散列与经过适当身份验证的用户相关联并允许其访问。如果其他任何人尝试访问 api 调用，他们要么无法访问并被拒绝，要么他们将提供猜测并被拒绝。

因此，从您的 ios 应用程序的角度来看，其所有后续调用（身份验证后）将如下所示：

```
https://example.com/api/<function name>/<session hash> 
```

# android - Android：在 SearchView 中输入文本时防止弹出文本字段

> ID：10244710
> 
> 赞同：4
> 
> 时间：2012-04-20T10:44:40.820
> 
> 标签：android, listview, search, android-widget

您好 Android 开发者，

我遇到了 Android [SearchView](http://developer.android.com/reference/android/widget/SearchView.html)小部件的问题。我要做的是将“实时”文本过滤器附加到我的 ListView （文本输入会自动刷新过滤器结果）。它实际上工作得很好，用这些行让它在我的 ListActivity 上工作并不费力：

```
private SearchView listFilter;

this.listFilter = (SearchView) findViewById(R.id.listFilter);
this.listFilter.setOnQueryTextListener(this);
this.listFilter.setSubmitButtonEnabled(false);

this.getListView().setOnItemClickListener(this);
this.getListView().setTextFilterEnabled(true);

// from OnQueryTextListener
public boolean onQueryTextChange(String newText) {
    if (newText.isEmpty()) {
        this.getListView().clearTextFilter();
    } else {
        this.getListView().setFilterText(newText);
    }
    return true;
} 
```

这里是 xml 小部件声明

```
<SearchView
    android:id="@+id/listFilter"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:iconifiedByDefault="false"
    android:queryHint="enter text to filter" /> 
```

现在我的问题是，每次我在 SearchView 中输入文本时，都会立即弹出一个奇怪的文本字段，显示与我刚输入的文本相同的文本，这有点没用，因为我可以在 SearchView 本身中看到我的输入，并且它部分阻止了看到我的列表条目，这很烦人。

有什么方法可以防止在输入 SearchView 时弹出该文本字段？我在 xml 定义的小部件选项和 java 类引用上都找不到任何属性。

我知道还有另一种方法可以通过使用 EditText 和 TextWatcher 来提供过滤器功能，但是我必须自己处理过滤器，并且无法从 SearchView 为我处理它中获利。

任何建议表示赞赏。此致

菲利克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T20:05:09.117

我发现了如何摆脱那个丑陋的弹出窗口。诀窍是直接使用过滤器。下面的代码假设您已经在 customAdapter 中实现了可过滤。

```
public boolean onQueryTextChange(String newText) {
    if (TextUtils.isEmpty(newText)) {
       m_listView.clearTextFilter();
    } else {
       ContactsAdapter ca = (ContactsAdapter)lv.getAdapter();
       ca.getFilter().filter(newText);
       //following line was causing the ugly popup window.
       //m_listView.setFilterText(newText);
    }
   return true;
} 
```

# coldfusion - 我的coldfusion 8安装使用哪个oracle jdbc驱动程序

> ID：10244712
> 
> 赞同：0
> 
> 时间：2012-04-20T10:44:42.663
> 
> 标签：coldfusion, oracle10g, coldfusion-8

我正在尝试调试一个奇怪的问题，其中一个 Coldfusion 8 实例给了我一个错误（数字或值错误：字符到数字转换错误 ORA-06512：在第 1 行）但使用完全相同的代码另一个冷融合 8 实例是'不会抛出同样的错误。

它们都在 8,0,1,195765 Enterprise 上，都在 Windows 2003 上运行。我无法想象为什么它们可能使用不同的驱动程序，不幸的是我不能（没有巨大的 faf）让它们指向同一个数据库。

我可以（并且已经）修改了代码，因此错误不再发生，但我现在正试图弄清楚发生了什么。

那么如何找出 ColdFusion 使用的是什么 oracle jdbc 驱动程序，我找到了这篇博文： [http](http://rahulnarula.blogspot.co.uk/2009/04/getting-oracle-jdbc-driver-version-info.html) ://rahulnarula.blogspot.co.uk/2009/04/getting-oracle-jdbc-driver-version-info.html 但是那只是返回我没有找到驱动程序。如果它有助于两个数据库都使用 oracle 10g 并且两个数据库的设置方式似乎相同（尽管我没有排除那里可能存在某些东西）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:58:14.473

您可以尝试在 macromedia_drivers.jar 中查找此文件：\macromedia\jdbc\oracle\oracle.properties 它看起来包含 Oracle 驱动程序的构建 ID。

另一种方法是使用 Beyond-compare 或类似方法来区分 macromedia-drivers.jar。它可能不会告诉您驱动程序是什么版本，但会告诉您它们是否相同。

另外，链接文章中简短的初始代码块是否不起作用？这应该为 Macromedia 驱动程序返回一些东西。

巴尼

# c++ - 使用 Python 插件可扩展性编写跨平台应用程序的最简单方法？

> ID：10244713
> 
> 赞同：0
> 
> 时间：2012-04-20T10:44:48.140
> 
> 标签：c++, python, objective-c, plugins, cross-platform

我正在编写一个应用程序，它应该能够在 Linux、Mac OS X、Windows 和 BSD 上运行（不一定作为单个可执行文件，所以它不必是 Java）并且可以使用简单的插件进行扩展。

我希望我的插件实现的方式是作为一个简单的 Python 程序，它必须实现某个功能并简单地将字典返回到主程序。

插件安装应该只是将插件脚本文件复制到`./plugins`相对于主可执行文件的目录中。

主程序应该是在上述所有平台之间共享代码的独立可执行文件，但具有特定于平台的前端（因此 Linux 和 BSD 版本只是 CLI 工具，Windows 版本具有 C++ 和 MFC 前端，而 Mac OS X 版本将具有 Objecive-C 和 Cocoa 前端）。

所以我想这实际上是两个问题：

1.  在多个前端之间共享通用控制器代码的最简单方法是：

    一种。Mac上的Objective-C？

    湾。Windows 上的 C++？

    C。来自 Linux/BSD 的 C/Python？

2.  从我的通用控制器实现插件以执行自定义插件的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:25:30.413

1.  我和fontanini在这里；为控制器逻辑使用共享库 (DLL)。最好使用 C/C++，并小心使用 RTTI（需要 dynamic_cast<> 和异常处理），它可能无法跨 DLL 边界工作（例如，您可能无法从另一个 DLL 中捕获抛出的异常）。

    寻找像 Qt 这样的优秀跨平台库，它以与平台无关的方式提供了很多功能（例如文件系统、进程、网络——不仅仅是 GUI，无论如何你都想单独开发它们）。

2.  [Python/C API](http://docs.python.org/c-api/)是使Python 可以使用 C/C++ 功能的基础（反之亦然），扩展模块和为嵌入式 Python 解释器提供自己的功能的程序之间只有很小的区别。

    但是，您可能希望使用包装器生成器（所有这些都基于 Python API，但比直接使用它需要更少的代码），让您的生活更轻松。例子是：

    *   [boost::python](http://www.boost.org/libs/python/doc/)（非常方便和强大，但是有一个难以理解的硬核-C++ 实现;-)，并且由于过多的模板使用导致更大的目标代码），可能使用[pyplusplus](http://pypi.python.org/pypi/pyplusplus/)直接生成 boost::python 包装器代码从您的头文件中（不牺牲调整结果的可能性，例如排除或修改函数签名）
    *   [SIP](http://riverbankcomputing.co.uk/software/sip/intro)（特别是与 [Py]Qt 结合使用）
    *   [Swig](http://www.swig.org/)（适用于多种脚本语言，但会导致 API 反映 C API 被包装而不是“pythonic”）
    *   [PyBindGen](http://code.google.com/p/pybindgen/)基于与 pyplusplus 相同的 GCCXML 后端，但直接生成纯 Python/C API 代码，从而实现更精简的绑定（但可能无法立即了解所有代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:30:08.653

1.  共享应用程序的跨平台 Python 组件的最*简单*方法可能是将其实现为命令行程序，然后使用每个前端中的相关系统调用来调用它。这不是最强大的方法，但它可能就足够了。

2.  如果您希望插件只是一个包含 Python 代码的文件，我建议它们至少符合约定，例如通过扩展一个类，然后让您的代码使用“import plugin_name”将它们加载到 Python 运行时。这比将插件作为单独的程序存在要好，因为您将能够以 Python 类型访问输出，而不需要从标准输入中解析文本。

# wpf - 部署后组合框未在 wpf 中打开

> ID：10244716
> 
> 赞同：1
> 
> 时间：2012-04-20T10:44:58.653
> 
> 标签：wpf, combobox

我开发了一个应用程序，但是当我在客户端系统上部署它时，组合框没有打开

```
 <ComboBox Margin="5,0,0,0" Name="cbCOCountry" ItemsSource="{Binding Path=CountryCOCollection,Mode=TwoWay}" SelectedItem="{Binding Path=SelectedCOCountry,Mode=TwoWay}" VerticalAlignment="Center" Height="23" Grid.Row="1" Grid.Column="1">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Path=CountryName}" VerticalAlignment="Center" Grid.Column="1" Margin="5,0,0,0"/>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox> 
```

我在我的应用程序中使用了 Whistler Blue 主题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:50:27.310

我以前见过这个。您使用的是什么操作系统？Windows XP 机器上存在一个已知问题：http: [//social.msdn.microsoft.com/Forums/en-US/wpf/thread/333d3d93-8837-42b3-a0ea-1a577485daed/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/333d3d93-8837-42b3-a0ea-1a577485daed/)

# c++ - 如何使 Qt 子小部件高度相等？

> ID：10244717
> 
> 赞同：3
> 
> 时间：2012-04-20T10:45:03.617
> 
> 标签：c++, qt, user-interface, qt4, qdockwidget

我`QDockWidget`在单个`QWidget`. 我每个里面都有一些小部件`QDockWidget`- 它们的高度应该相等。这些内部小部件可以通过上下文菜单隐藏。

我的内部小部件应该具有相同的高度。我是这样做的：

```
void MyDocksPanel::redistributeSpace()
{
    QBoxLayout * lay = (QBoxLayout *)layout();
    for (int i = 0; i < lay->count(); i++)
    {
        QWidget * dock = lay->itemAt(i)->widget();
        if (dock == NULL)
            continue;

        int size = 0;
        foreach(QWidget * subWidget, dock->findChildren<QWidget*>())
            size += subWidget->isVisible() ? 1 : 0;

        if (dock->isVisible() && (size == 0))
            dock->hide();
        lay->setStretch(i, size);
    }
} 
```

一切正常，直到我向每个元素添加一些 const 元素`QDockWidget`：一些水平滚动条和一些标签......现在我的内部小部件有不同的大小。但我有必要将它们的高度设置为非常相等。

`QLayout`在小部件层次结构的一级上布置小部件尺寸。如何制作高度相等的子小部件？

3 个子小部件与 2 个子小部件

![第一张照片](../Images/9cc2dace56094d202d790063cd92983a.png)

我设置延伸 3 和 2 的第一个策略：

![在此处输入图像描述](../Images/f9b8ff95474cac1b10552f180b48ffc2.png)

但是，当我添加滚动条时：

![在此处输入图像描述](../Images/4ee7fbbf0ae4fe8505a97ab09e34e0fb.png)

我的 5 个小部件的高度等于 37、37、37、28、28 ......这就是问题所在

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:47:09.983

您在拉伸因子方面处于正确的轨道上，但要考虑像素值而不是小比例。尝试将每个停靠小部件的拉伸因子设置为：

```
dockWidgetStretch = numChildWidgets * childWidgetMinimumHeight + scrollBarHeight; 
```

其中`childWidgetMinimumHeight`和`scrollBarHeight`都以像素表示，并且都是常数。

编辑：这是一个工作示例。您可能需要进行一些试验才能使其与您的程序一起使用，但这应该是一个好的开始。

头文件.h

```
#include <QtGui>

class WidgetWith3Children : public QWidget
{
public:
    WidgetWith3Children()
    {
        QTextEdit *edit1 = new QTextEdit;
        QTextEdit *edit2 = new QTextEdit;
        QTextEdit *edit3 = new QTextEdit;
        QScrollBar *scrollBar = new QScrollBar(Qt::Horizontal);
        QVBoxLayout *layout = new QVBoxLayout;
        layout->addWidget(edit1);
        layout->addWidget(edit2);
        layout->addWidget(edit3);
        layout->addWidget(scrollBar);
        setLayout(layout);
    }
};

class WidgetWith2Children : public QWidget
{
public:
    WidgetWith2Children()
    {
        QTextEdit *edit1 = new QTextEdit;
        QTextEdit *edit2 = new QTextEdit;
        QScrollBar *scrollBar = new QScrollBar(Qt::Horizontal);
        QVBoxLayout *layout = new QVBoxLayout;
        layout->addWidget(edit1);
        layout->addWidget(edit2);
        layout->addWidget(scrollBar);
        setLayout(layout);
    }
};

class OuterWidget : public QWidget
{
public:
    OuterWidget()
    {
        QDockWidget *dockWidget1 = new QDockWidget;
        QDockWidget *dockWidget2 = new QDockWidget;
        dockWidget1->setWidget(new WidgetWith3Children);
        dockWidget2->setWidget(new WidgetWith2Children);
        QVBoxLayout *layout = new QVBoxLayout;

        // 71 is the height of the minimum size hint for QTextEdit
        // 30 is the height of a horizontal scrollbar (on my system)
        layout->addWidget(dockWidget1, 71 * 3 + 30);
        layout->addWidget(dockWidget2, 71 * 2 + 30);

        layout->setMargin(0);
        setLayout(layout);
    }
}; 
```

主文件

```
#include <QtGui/QApplication>
#include "header.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    OuterWidget w;
    w.show();

    return a.exec();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:00:31.507

只是为了检查我理解：你有一个`QDockWidget`包含多个孩子，以及一个标签和一个水平滚动条。标签和滚动条的高度应该是固定的，剩余的垂直空间应该在子小部件之间划分。

如果这是正确的，您需要做的就是在`QVBoxLayout`每个`QDockWidget`. 添加您的小部件，如下所示：

```
QDockWidget DockWidget;
QVBoxLayout Layout = new QVBoxLayout(DockWidget);

FixedHeightWidget.setFixedHeight(10)
Layout.addWidget(FixedHeightWidget, 0);
Layout.addWidget(FirstVariableHeightWidget, 1);
Layout.addWidget(SecondVariableHeightWidget, 1);
Layout.addWidget(ThirdVariableHeightWidget, 1); 
```

如果您要隐藏已添加到布局中的任何小部件，则布局将处理调整剩余可见子项的大小。

# facebook - 关于在 github 上分享活动的 Facebook 应用

> ID：10244721
> 
> 赞同：2
> 
> 时间：2012-04-20T10:45:08.567
> 
> 标签：facebook, github, facebook-apps, facebook-timeline

是否有 Facebook 应用程序可以在新闻提要中共享 github 活动并将其总结在时间线片段中？

用户应该能够选择要在 Facebook 新闻提要中发布的活动类型。

Twitter 集成很不错。

PS：Facebook 应用搜索目前仅返回 1 个似乎离线的应用“Github 存储库”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:59:18.057

Github 服务挂钩是您正在寻找的。你需要一个应用到 Github，而不是 Facebook。我最近在这方面做了一个研究，但从未尝试过这些模块： [https ://github.com/johanbrook/github-facebook-hook](https://github.com/johanbrook/github-facebook-hook)

我希望它会起作用或至少可以帮助您继续研究

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-10T13:52:58.203

现在我找到了我想要的工具：http: [//Geekli.st](http://Geekli.st)（他们想为极客/开发人员建立最大的社区）

您可以通过个人资料设置底部的按钮链接您的 github 帐户。

有关演示，请参阅相关博客文章和视频截屏：

[http://blog.geekli.st/post/26151413745/from-the-engineering-team-adding-the-post-commit](http://blog.geekli.st/post/26151413745/from-the-engineering-team-adding-the-post-commit)

# java - 客户端在 Android 上等待来自服务器的消息

> ID：10244732
> 
> 赞同：0
> 
> 时间：2012-04-20T10:46:11.867
> 
> 标签：java, android, multithreading, client

我只是想从 Java 上的服务器和 android 上的客户端建立连接。我的问题是我创建了一个线程等待消息在 EditText 上打印。我只收到从服务器发送的第一条消息，就像默认消息一样，说“连接成功”现在，当我发送第二条消息时，应用程序刚刚关闭，我必须强制关闭。我确定问题出在我拥有方法 leermensajes() 的线程上。我不知道该怎么做，现在我是 Android 的新手，而且我也没有太多的编程经验。

这是客户端代码

```
 public class ClienteActivity extends Activity {
            /** Called when the activity is first created. */
            private ObjectOutputStream salida;
            private ObjectInputStream entrada;
            private String mensaje = "";
            private String servidorChat;
            private int puerto;
            private Socket cliente;
            private CheckBox check;
            private Button boton;
            private EditText mensajeservidor;
            private AutoCompleteTextView text;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);

                // Componentes graficos
                //Intento dar una accion a un boton
                boton = (Button) findViewById(R.id.button1);
                check = (CheckBox) findViewById(R.id.checkBox1);
                text = (AutoCompleteTextView) findViewById(R.id.textBox);
                mensajeservidor = (EditText)findViewById(R.id.editText1);

                servidorChat = "151.57.15.160"; // servidor  
                puerto = 12345; // puerto

                try {
                    cliente = new Socket( servidorChat , puerto );
                    salida = new ObjectOutputStream( cliente.getOutputStream() );
                    salida.flush();
                    entrada = new ObjectInputStream( cliente.getInputStream() );
                    //entrada = new ObjectInputStream( cliente.getInputStream() );
                    leermensajes();
                    //mensaje = ( String ) entrada.readObject();
                    //CharSequence cs = mensaje;
                    //mensajeservidor.setText(cs); 

                    }

                catch ( EOFException excepcionEOF ) {
                    Toast.makeText(ClienteActivity.this,"El cliente termino la conexion",Toast.LENGTH_LONG).show();
                 }
                catch (UnknownHostException e) {
                        //Alert que avisa del error
                        Toast.makeText(ClienteActivity.this, R.string.UnkowHost,Toast.LENGTH_LONG).show();
                        android.util.Log.w("¡¡¡ERROR!!!", e.getMessage());
                } catch (IOException e) {
                        Toast.makeText(ClienteActivity.this, R.string.ConectionError,Toast.LENGTH_LONG).show();
                        android.util.Log.w("¡¡¡ERROR!!!", e.getMessage());
                } 

        }

        protected void onDestroy() {
                try {
                        salida.close();
                        cliente.close();
                } catch (IOException e) {
                        Toast.makeText(ClienteActivity.this, R.string.errorDesconexion,Toast.LENGTH_LONG).show();
                        android.util.Log.w("¡¡¡ERROR!!!", e.getMessage());
                }
                super.onDestroy();

        }

        public void onEnviarClick(View button1) {
                try {
                        if (cliente != null) {
                                salida.writeObject("CLIENTE>>>"+text.getText().toString());
                                salida.flush(); // vacíar búfer de salida para enviar
                                                                // información de encabezado
                        } else
                                Toast.makeText(ClienteActivity.this, R.string.ConectionError,Toast.LENGTH_LONG).show();

                } catch (UnknownHostException e) {
                        Toast.makeText(ClienteActivity.this, R.string.UnkowHost,Toast.LENGTH_LONG).show();
                        android.util.Log.w("¡¡¡ERROR!!!", e.getMessage());
                } catch (IOException e) {
                        Toast.makeText(ClienteActivity.this, R.string.ConectionError,Toast.LENGTH_LONG).show();
                        android.util.Log.w("¡¡¡ERROR!!!", e.getMessage());
                }

        }

        public void onConectarDesconectar(View checkBox) {
                if (!check.isChecked()) {
                        boton.setEnabled(false);
                        text.setEnabled(false);

                } else {
                        boton.setEnabled(true);
                        text.setEnabled(true);

                }

        }

        public void leermensajes(){
             new Thread(new Runnable(){

                 public synchronized void stop(){
                     cliente = null;
                     salida = null;
                     entrada = null;

             }
                public void run() {

                    try {
                        entrada = new ObjectInputStream( cliente.getInputStream() );
                        mensaje = ( String ) entrada.readObject();
                        while (true){

                        CharSequence cs = mensaje;
                        mensajeservidor.setText(cs);
                        }

                        }

                    catch ( EOFException excepcionEOF ) {
                        Toast.makeText(ClienteActivity.this,"El cliente termino la conexion",Toast.LENGTH_LONG).show();
                     }
                    catch (UnknownHostException e) {
                          //  //Alert que avisa del error
                            Toast.makeText(ClienteActivity.this, R.string.UnkowHost,Toast.LENGTH_LONG).show();
                            android.util.Log.w("¡¡¡ERROR!!!", e.getMessage());
                    } catch (IOException e) {
                            Toast.makeText(ClienteActivity.this, R.string.ConectionError,Toast.LENGTH_LONG).show();
                            android.util.Log.w("¡¡¡ERROR!!!", e.getMessage());
                    } catch (ClassNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    stop();
                }

            }).start();
        }
   } 
```

这是服务器代码，但效果很好

```
public Servidor()
   {
      super( "Servidor" );

      Container contenedor = getContentPane();

      // crear campoIntroducir y registrar componente de escucha
      campoIntroducir = new JTextField();
      campoIntroducir.setEditable( false );
      campoIntroducir.addActionListener(
         new ActionListener() {

            // enviar mensaje al cliente
            public void actionPerformed( ActionEvent evento )
            {
               enviarDatos( evento.getActionCommand() );
               campoIntroducir.setText( "" );
            }
         }
      ); 

      contenedor.add( campoIntroducir, BorderLayout.NORTH );

      // crear areaPantalla
      areaPantalla = new JTextArea();
      contenedor.add( new JScrollPane( areaPantalla ),
      BorderLayout.CENTER );

      setSize( 300, 150 );
      setVisible( true );

   } // fin del constructor de Servidor

   // configurar y ejecutar el servidor
   public void ejecutarServidor()
   {
      // configurar servidor para que reciba conexiones; procesar las conexiones
      try {

         // Paso 1: crear un objeto ServerSocket.
         servidor = new ServerSocket( 12345, 100 );

         while ( true ) {

            try {
               esperarConexion(); // Paso 2: esperar una conexión.
               obtenerFlujos();        // Paso 3: obtener flujos de entrada y salida.
               procesarConexion(); // Paso 4: procesar la conexión.
            }

            // procesar excepción EOFException cuando el cliente cierre la conexión
            catch ( EOFException excepcionEOF ) {
               System.err.println( "El servidor terminó la conexión" );
            }

            finally {
               cerrarConexion();   // Paso 5: cerrar la conexión.
               ++contador;
            }

         } // fin de instrucción while

      } // fin del bloque try

      // procesar problemas con E/S
      catch ( IOException excepcionES ) {
         excepcionES.printStackTrace();
      }

   } // fin del método ejecutarServidor

   // esperar que la conexión llegue, después mostrar información de la conexión
   private void esperarConexion() throws IOException
   {
      mostrarMensaje( "Esperando una conexión\n" );
      conexion = servidor.accept(); // permitir al servidor aceptar la conexión
      mostrarMensaje( "Conexión " + contador + " recibida de: " +
         conexion.getInetAddress().getHostName() );
   }

   // obtener flujos para enviar y recibir datos
   private void obtenerFlujos() throws IOException
   {
      // establecer flujo de salida para los objetos
      salida = new ObjectOutputStream( conexion.getOutputStream() );
      salida.flush(); // vaciar búfer de salida para enviar información de encabezado

      // establecer flujo de entrada para los objetos
      entrada = new ObjectInputStream( conexion.getInputStream() );

      mostrarMensaje( "\nSe recibieron los flujos de E/S\n" );
   }

   // procesar la conexión con el cliente
   private void procesarConexion() throws IOException
   {
      // enviar mensaje de conexión exitosa al cliente
      String mensaje = "Conexión exitosa";
      enviarDatos( mensaje );

      // habilitar campoIntroducir para que el usuario del servidor pueda enviar mensajes
      establecerCampoTextoEditable( true );

      do { // procesar los mensajes enviados por el cliente

         // leer el mensaje y mostrarlo en pantalla
         try {
            mensaje = ( String ) entrada.readObject();
            mostrarMensaje( "\n" + mensaje );
         }

         // atrapar problemas que pueden ocurrir al tratar de leer del cliente
         catch ( ClassNotFoundException excepcionClaseNoEncontrada ) {
            mostrarMensaje( "\nSe recibió un tipo de objeto desconocido" );
         }

      } while ( !mensaje.equals( "CLIENTE>>> TERMINAR" ) );

   } // fin del método procesarConexion

   // cerrar flujos y socket
   private void cerrarConexion()
   {
      mostrarMensaje( "\nFinalizando la conexión\n" );
      establecerCampoTextoEditable( false ); // deshabilitar campoIntroducir

      try {
         salida.close();
         entrada.close();
         conexion.close();
      }
      catch( IOException excepcionES ) {
         excepcionES.printStackTrace();
      }
   }

   // enviar mensaje al cliente
   private void enviarDatos( String mensaje )
   {
      // enviar objeto al cliente
      try {
         salida.writeObject( "SERVIDOR>>> " + mensaje );
         salida.flush();
         mostrarMensaje( "\nSERVIDOR>>> " + mensaje );
      }

      // procesar problemas que pueden ocurrir al enviar el objeto
      catch ( IOException excepcionES ) {
         areaPantalla.append( "\nError al escribir objeto" );
      }
   }

   // método utilitario que es llamado desde otros subprocesos para manipular a
   // areaPantalla en el subproceso despachador de eventos
   private void mostrarMensaje( final String mensajeAMostrar )
   {
      // mostrar mensaje del subproceso de ejecución despachador de eventos
      SwingUtilities.invokeLater(
         new Runnable() {  // clase interna para asegurar que la GUI se actualice apropiadamente

            public void run() // actualiza areaPantalla
            {
               areaPantalla.append( mensajeAMostrar );
               areaPantalla.setCaretPosition(
                  areaPantalla.getText().length() );
            }

         }  // fin de la clase interna

      ); // fin de la llamada a SwingUtilities.invokeLater
   }

   // método utilitario que es llamado desde otros subprocesos para manipular a
   // campoIntroducir en el subproceso despachador de eventos
   private void establecerCampoTextoEditable( final boolean editable )
   {
      // mostrar mensaje del subproceso de ejecución despachador de eventos
      SwingUtilities.invokeLater(
         new Runnable() {  // clase interna para asegurar que la GUI se actualice apropiadamente

            public void run()  // establece la capacidad de modificar a campoIntroducir
            {
               campoIntroducir.setEditable( editable );
            }

         }  // fin de la clase interna

      ); // fin de la llamada a SwingUtilities.invokeLater
   }

   public static void main( String args[] )
   {
      JFrame.setDefaultLookAndFeelDecorated(true);
      Servidor aplicacion = new Servidor();
      aplicacion.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
      aplicacion.ejecutarServidor();
   }

}  // fin de la clase Servidor 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T20:52:01.490

输入流应该在一个循环中，不断地监听传入的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:08:25.447

您为每条消息打开新流。这不是它在进行网络时应该工作的方式。您应该让流打开、发送和接收内容，然后在完成后关闭它。

# iphone - 附近场地到 iphone 成简单阵列

> ID：10244733
> 
> 赞同：2
> 
> 时间：2012-04-20T10:46:13.037
> 
> 标签：iphone, google-maps, core-location, foursquare, nsmutabledictionary

我真的很难弄清楚这一点。我已经阅读了一堆关于此的 PDFS 和 stackoverflow 问题，但我从未使用过 API 并且无法安静地得到它。我正在尝试获取我的经度和纬度坐标并使用那里的任何 API（foursquare、谷歌地图、您可以推荐的任何其他免费的？）来获取附近公园的列表并将其放入 NSMutableDictionary key=name 对象=@“距离”。无需获取其所有内容，只需获取距离和名称即可。但我一直坚持第一部分，获得我的经度和纬度坐标超过 4 小时。谁能告诉我代码明智**`how I would get my coordinates`**，无需解释如何解析 API，一旦我有了我的坐标，我觉得我可以弄清楚。我已经下载了苹果的 locateme 源代码，但仍然无法在我的上运行。是否有一组易于遵循的步骤或代码有人可以提供，我可以使用并解决这个问题？我已经导入了位置框架。有没有快速的 10-20 行代码来解决这个问题，而不是 3 个额外的视图控制器，我不太明白。非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:19:19.840

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
    [locationManager startUpdatingLocation];    
}

#pragma mark Current location methods
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
    latit = newLocation.coordinate.latitude;
    longit = newLocation.coordinate.longitude;
    NSLog(@"latitude = %f",latit);
    NSLog(@"longitude = %f",longit);

    [manager stopUpdatingLocation];
    [self getNearByList];
}

-(void)getNearByList
{    
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyyMMdd"];
    NSString *currentDate = [dateFormat stringFromDate:[NSDate date]];
    [dateFormat release];

    NSURL *url = [NSURL URLWithString:[[NSString stringWithFormat:@"https://api.foursquare.com/v2/venues/search?ll=%f,%f&client_id=YOUR_CLIENT_ID_HERE&client_secret=YOUR_CLIENT_SECRET_HERE&v=%@&limit=100&radius=2000&categoryId=4bf58dd8d48988d1e0931735,4bf58dd8d48988d176941735,4bf58dd8d48988d1ed941735,4bf58dd8d48988d119951735,4bf58dd8d48988d123941735,4d954afda243a5684865b473,4edd64a0c7ddd24ca188df1a,4bf58dd8d48988d1c9941735,4bf58dd8d48988d1bd941735,4bf58dd8d48988d124951735,4bf58dd8d48988d115951735,4bf58dd8d48988d11a951735,4bf58dd8d48988d10c951735,4bf58dd8d48988d11b951735,4bf58dd8d48988d11e951735,4bf58dd8d48988d1f9941735,4bf58dd8d48988d1f5941735,4bf58dd8d48988d113951735,4f04afc02fb6e1c99f3db0bc,4bf58dd8d48988d110951735,4bf58dd8d48988d1f2941735,4bf58dd8d48988d1fd941735,4bf58dd8d48988d103951735,4bf58dd8d48988d104941735,4f04aa0c2fb6e1c99f3db0b8,4d1cf8421a97d635ce361c31,4bf58dd8d48988d1f8941735,4d4b7105d754a06374d81259,4bf58dd8d48988d16d941735,4bf58dd8d48988d128941735,4bf58dd8d48988d111951735,4bf58dd8d48988d1ca941735,4bf58dd8d48988d117951735,4bf58dd8d48988d107951735,4bf58dd8d48988d1fa941735,4bf58dd8d48988d118951735,4bf58dd8d48988d17f941735,4bf58dd8d48988d1ac941735,4bf58dd8d48988d180941735",latit,longit,currentDate] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];  //YOU CAN FOUND MORE CATEGORY ID AT FOURSQURE WEBSITE..
        NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url cachePolicy: NSURLRequestReloadIgnoringCacheData timeoutInterval: 30.f];
    NSLog(@"url = %@",urlRequest);
    webData1 = [[NSMutableData data] retain];
    urlConnection = [[NSURLConnection alloc] initWithRequest: urlRequest delegate: self];
}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
        [webData1 setLength: 0];
}
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
        [webData1 appendData:data];
        //NSLog(@"webData1 = %@",webData1);
}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
        UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message : @"An error has occured."
                                                        delegate:nil
                                              cancelButtonTitle :@"OK"
                                              otherButtonTitles :nil];
        [alert1 show];
        [alert1 release];

        [webData1 release];
    [connection release];
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
        NSString *data = [[NSString alloc] initWithBytes: [webData1 mutableBytes] length:[webData1 length] encoding:NSUTF8StringEncoding];
        NSLog(@"data = %@",data);

        [connection release];
        [webData1 release];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:56:30.130

使用 Google Place Api。您只需要注册，然后您将获得 api 的密钥

//示例 api。此 api 将以 json 数据格式为您提供定义的经度和纬度半径内的食物

[https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere](https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere)

[谷歌地方 API](https://developers.google.com/maps/documentation/places/#PlaceSearches)

希望，这会帮助你..享受...

# android - SDK 管理器中缺少 Android 1.6 Google API

> ID：10244737
> 
> 赞同：1
> 
> 时间：2012-04-20T10:46:30.603
> 
> 标签：android, google-maps-api-3

我正在为使用 Google 的 MapActivity 的 Android 1.6 构建应用程序。但是，我似乎在 SDK 管理器中找不到 Google API 级别 4。我只有 13 和 14 级的 Google API。我该怎么办？

谢谢

# html - 全宽滑块所需的 CSS 解决方案

> ID：10244740
> 
> 赞同：0
> 
> 时间：2012-04-20T10:46:36.887
> 
> 标签：html, css

我的项目有一些问题，并且在最后期限内。

问题：对于一个 web 项目，标题由一个全角背景滑块和一个包含徽标和菜单项的菜单组成，请参见：( [http://d.pr/i/ln6N](http://d.pr/i/ln6N) )

我遇到的问题是它的划分方式，红色部分充当滑块。徽标在菜单栏之间有一些空间。

我将如何处理这个标志周围的透明空间？我现在拥有的是一个 100% 宽度的 div，上面包含列表项和徽标。

当菜单栏为 100% 宽度时，我无法弄清楚如何在徽标的左侧和右侧获得空白。

![在此处输入图像描述](../Images/8ffd591a91817fcded698d15c5286e02.png)

我希望图像（上图）能澄清一些，因为我只是不知道如何处理这个。

提前致谢，-V

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:50:40.760

我修好了，脏了。。

在图像中，灰色区域是一个大图像，中心被切掉，所以我可以将徽标和菜单放在其中，这样就剩下一些透明的空间。

# jquery - 使用 jquery 获取 url 状态

> ID：10244744
> 
> 赞同：1
> 
> 时间：2012-04-20T10:46:53.240
> 
> 标签：jquery, url, status

我正在尝试获取 403 禁止错误的状态，我可以使用 php curl 来完成，但需要使用 jquery 来完成。

这是我的代码。

```
 $.ajax({

    url: 'https://s3.amazonaws.com/isdukg/01-jaimeson-complete_2_step_mix-pulse.mp3',
    type: 'GET',
    crossDomain: true,
    dataType: 'jsonp',
    statusCode: {
      403: function() {
      alert("Forbidden");
      // or do something useful
      }
    }
});

$.ajax({

    url: 'https://s3-eu-west-1.amazonaws.com/fkcreate/Angles%2C%20Circles%20and%20Triangles..%20Instrumental.mp3',
    type: 'GET',
    crossDomain: true,
    dataType: 'jsonp',
    statusCode: {
      403: function() {
      alert("Forbidden");
      // or do something useful
      }
    }
}); 
```

如果您打开控制台窗口并加载页面，其中一个 url 将产生 403 禁止错误，您可以在此处看到 - [http://scaredem.users36.interdns.co.uk/](http://scaredem.users36.interdns.co.uk/)

我似乎无法抓住这个错误来做一些有用的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T10:52:35.440

使用 jQuery ajax，您可以使用 statusCode 属性将函数映射到 HTTP 响应状态代码。

```
$.ajax({
statusCode: {
  403: function() {
  alert("Forbidden");
  // or do something useful
  }
}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:03:44.727

`timeout`在这种情况下可能会对您有所帮助。如果请求在 500 毫秒内超时，则没有响应（我也尝试获取响应状态，但没有运气）。

[jsfiddle](http://jsfiddle.net/UnvVD/1/)

```
 $.ajax({
                url: "https://s3-eu-west-1.amazonaws.com/fkcreate/Angles%2C%20Circles%20and%20Triangles..%20Instrumental.mp3",
                type: "get",
                dataType: 'jsonp',
                crossDomain : true,
                timeout : 500, // it is milliseconds
                complete : function(xhr, responseText, thrownError) {
                    if(xhr.status == "200") {
                       alert(responseText); // yes response came
                    }
                    else{
                       alert("No response"); // no response came
                    }
                }
           });​ 
```

# c++ - Boost 构建致命错误 LNK1105

> ID：10244745
> 
> 赞同：1
> 
> 时间：2012-04-20T10:47:00.383
> 
> 标签：c++, visual-studio-2010, boost, build, installation

好的，我在构建 boost 时遇到了一些问题（我需要构建版本）

**问题是什么**

每次我尝试运行 bootstrap.bat 时，几秒钟后都会出现此错误：

```
LINK : fatal error LNK1105: Cannot close file "bin.ntx86\b2.exe".

"cl"  "/Fdbin.ntx86/" "/Fobin.ntx86/" /Febin.ntx86\b2.exe "-DNDEBUG" "- ...

...failed [COMPILE] bin.ntx86\b2.exe...
...skipped bjam.exe for lack of b2.exe...
...failed updating 1 target...
...skipped 1 target... 
```

**系统规格**

*   Windows 7的
*   Visual Studio 10 速成版
*   64位

**我已经尝试过的**

*   停用 Comodo Internet Security Premium
*   运行 vcvars32.bat
*   b2.exe 未运行（已重新启动以确保）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:31:44.780

我遇到了同样的错误。就我而言，这是 Comodo Antivirus 的行为阻止程序造成的麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T19:41:13.170

我最近遇到了同样的问题（Windows 8.1，Boost 1.57）。即使在退出 Comodo Internet Security 之后，COMODO Internet Security Helper Service (cmdagent.exe) 仍然处于活动状态。未能从服务管理单元中阻止它，我已将服务的启动类型从自动更改为手动，并使用 Sysinternals Suite 中的 Process Explorer 终止了该进程。之后，Boost bootstrap 起作用了。

# c# - 在asp.net中上传并证明个人资料图片的图像位置

> ID：10244746
> 
> 赞同：-3
> 
> 时间：2012-04-20T10:47:01.187
> 
> 标签：c#, asp.net, image, avatar

需要具有以下功能的上传配置文件功能：

1.  上传的图像验证。（类型、尺寸）
2.  将图像保存在不同的目录中。
3.  上传后用户应该能够正确地重新定位图像，以便头像看起来
    像用户想要的那样正确对齐。
4.  裁剪图像。

用 C# 在 ASP.Net 中实现这个的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:06:26.820

对于裁剪图像，请阅读这些文章

1.  [文章](http://weblogs.asp.net/gunnarpeipman/archive/2009/11/03/using-asp-net-and-jcrop-to-crop-images-online.aspx)

2.  [代码复合体](http://webcropimage.codeplex.com/)

如果您将图像保存到不同的文件夹会出现问题，即域名托管公司确实授予只读权限，如果您将其保存到另一个文件夹，则必须授予每个文件夹的权限。还有另一种方法可以创建具有读写权限的根文件夹，然后在该文件夹中保存您的用户名文件夹名称

如果你使用[valuem ，你可以得到大小和宽度和高度](http://valums.com/ajax-upload/)

# ruby-on-rails - 如何编辑accepts_nested_attributes_for？

> ID：10244752
> 
> 赞同：0
> 
> 时间：2012-04-20T10:47:44.810
> 
> 标签：ruby-on-rails, forms, nested-attributes

我有一个公司模型，其中包含`has_many`地址和许多电话。

地址`belong_to`公司和电话。

我的问题是我不明白如何知道`edit`公司的**特定**地址和电话。

在我的`edit`操作中，我调用特定记录并将其分配给一个实例变量（即@address = 一些范围搜索我想要的特定地址），然后在我`fields_for`引用这个孩子的属性，例如：

```
<%= f.fields_for :addresses, @address do |address| %> 
```

A）我不确定这是否是这样做的方法。关于如何访问父母的特定孩子进行编辑的文档很少。

B）虽然如果`update`成功，这可以正常工作，但当它失败时，我`render :edit`的视图会显示带有父母当前孩子的附加字段（我在我的`edit`操作中指定的那个 + 另一个孩子 - 似乎是下一条记录）。

所以基本上，我的表单在`render :edit`调用时扩展了两个孩子。奇怪的。

这有什么关系？嵌套属性如何工作？有没有更好的方法来管理具有多个关联模型的表单？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:48:13.227

听起来您在此处使用了 fields_for 帮助器超出了它的目的。根据您的描述，您想要编辑其父母关系之外的地址。如果是这种情况，您将使用 form_for 帮助程序以自己的形式（可能还有自己的控制器）编辑该地址。

如果您想以与父级相同的形式执行任何 CRUD 操作，则将使用 fields_for，从而利用 Accepts_nested_attributes_for 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T17:25:44.953

大胆地观看 dmarucco 发布的屏幕截图，以对嵌套表单有一个良好和一般的理解，然后查看我之前遇到的嵌套表单问题（我也有多对多的关系）：

[Rails 3.1+ 嵌套表单问题：无法批量分配受保护的属性](https://stackoverflow.com/q/10239285/1211936)

我在该页面的底部发布了我的解决方案。

我还使用[了nested_form](https://github.com/ryanb/nested_form)和[simple_form](https://github.com/plataformatec/simple_form) gem 来格式化我的嵌套表单，所以你可能想看看

希望这能让你走上正确的道路！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T13:36:45.393

这些**截屏视频**可以为您提供超过数千个单词的帮助。

*   [Railscast - 第 1 课](http://railscasts.com/episodes/196-nested-model-form-part-1)
*   [Railscast - 第 2 课](http://railscasts.com/episodes/197-nested-model-form-part-2)

# javascript - 滚动页面时的Jquery SlideUp

> ID：10244754
> 
> 赞同：0
> 
> 时间：2012-04-20T10:47:56.873
> 
> 标签：javascript, jquery, slideup

当用户在 Jquery中**滚动**页面时，有什么方法可以滑动一个元素。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:07:30.343

```
<script>
    $(function() {
        $(window).scroll(function(){
            $('#Your element id').slideUp('slow');
        });

    });     
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:23:38.663

[jsfiddle](http://jsfiddle.net/ryanwfiorini/ncjAt/)

试试这个。

```
<style>
#container {
    height:2000px;
    border:1px solid #000;
}

#imgContainer {
    position:relative;
}​
</style>

<script>
$(document).ready(function(){
    $(document).scroll(function() {
        var scrollTop = $(document).scrollTop();
        $("#imgContainer").animate({top:scrollTop+"px"},1000);
    });​
});​
</script>

<!-- making big to allow for scrolling -->
<div id="container">
    <div id="imgContainer"><img src="http://dummyimage.com/300x100/000000/ffffff&text=Watch+Me+Move">
    </div>
<div>​ 
```

# arrays - 在标量上下文中展平 Perl 数组的方法

> ID：10244756
> 
> 赞同：22
> 
> 时间：2012-04-20T10:48:06.360
> 
> 标签：arrays, perl

我最近开始学习 perl 并且有一个问题，我在 Internet 上找不到明确的答案。说我有这样的东西，

```
@arr = (1, 2, 3);
$scal = "@arr"
# $scal is now 123. 
```

使用引号是展平数组以便每个元素都存储在标量值中的唯一方法吗？这似乎不太可能，但我还没有找到任何其他方法来做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-20T10:53:04.997

该[`join`](http://perldoc.perl.org/functions/join.html)函数通常用于“展平”列表。允许您在结果字符串中的每个元素之间指定所需的内容。

```
$scal = join(",", @arr);
# $scal is no "1,2,3" 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-20T12:56:01.520

在您的示例中，您在双引号字符串中插入一个数组。在这种情况下发生的事情是由 Perl 的`$"`变量控制的。从[perldoc perlvar](http://perldoc.perl.org/perlvar.html)：

> $LIST_SEPARATOR
> 
> $"
> 
> 当数组或数组切片被插入到双引号字符串或类似的上下文（例如 /.../ ）中时，其元素由该值分隔。默认为空格。例如，这个：
> 
> `print "The array is: @array\n";`
> 
> 相当于：
> 
> `print "The array is: " . join($", @array) . "\n";`
> 
> 助记符：在双引号上下文中工作。

的默认值为`$"`空格。您显然可以更改 的值`$"`。

```
{
  local $" = ':',
  my @arr = (1, 2, 3);
  my $scalar = "@arr"; # $scalar contains '1:2:3'
} 
```

与 Perl 的任何特殊变量一样，最好将任何更改本地化在代码块中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-20T10:52:57.797

您也可以`join`在没有任何分隔符的情况下使用

```
my $scalar = join( '' , @array ) ; 
```

有不止一种方法可以做到这一点。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-20T10:58:01.873

本着 TIMTOWDI 的精神：

```
my $scal;
$scal .= $_ foreach @arr; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-20T10:54:36.623

阅读[中的](http://perldoc.perl.org/perldata.html#Context)[*上下文*](http://perldoc.perl.org/perldata.html#Context)[部分*`perldata`*](http://perldoc.perl.org/perldata.html#Context)*。Perl 有两个主要的上下文：标量和列表。*

 *例如：

```
@a = (1, 1, 1);   # list context
print @a;         # list context
$count = @a;      # scalar context, returns the number of elements in @a 
```

等等*

# android - 谁能在这里简要解释一下 Ext.ComponentQuery.query('what here come?')[0]？

> ID：10244760
> 
> 赞同：2
> 
> 时间：2012-04-20T10:48:21.297
> 
> 标签：android, checkbox, sencha-touch-2

你好朋友我在 sencha touch 2.0 中卡住了。我正在我的应用程序中创建一个屏幕，我需要在其中获取复选框值（选中或未选中）。我指的是 sencha 文档中的[这个](http://docs.sencha.com/touch/2-0/#!/api/Ext.field.Checkbox)例子，但我无法理解如何使用 Ext.ComponentQuery.query('what here come?')[0]。

**编辑**

这是我的代码：-

```
Ext.define('MyApp.view.groupList',{
    extend : 'Ext.navigation.View',
    requires: ['Ext.field.Search', 'Ext.TitleBar'],
    alias: "widget.groupList",
    itemId: "gList",
    initialize: function(){
        this.callParent(arguments),
        var checkBox = {
            xtype: 'checkboxfield',
              name : 'all',
            //  label: 'All',
              value: 'all',
              lableWidth: "0",
              width: 1,
              padding: '0 0 15 30',
              checked: false
        };

        var sendBtn = {
                itemId: 'sendBtn',
                xtype: 'button',
                text: 'Send',
                ui: 'action',
                handler: function() {
                    var check = Ext.ComponentQuery.query('navigationview')[0],
                        values = check.getValues();

                    Ext.Msg.alert(null,
                        "Selected All: " + ((values.all) ? "yes" : "no")

                    );
                }     
        };

        var topToolbar = {
            xtype : "toolbar",
            title : "Groups",
            docked : "top",
            items: [
                    checkBox,
                    {xtype: 'spacer'},      
                  //  searchBtn, 
                    sendBtn
            ],
        };
        var list = {
                xtype: "grlist",
                store: Ext.getStore("grStore")
        };

        this.add([list,topToolbar]);
    },

    config: {
        navigationBar: {
            hidden: true,
        },
    }
}); 
```

我收到以下错误：-

```
TypeError: Result of expression 'check.getValues' [undefined] is not a function. at
 file:///android_asset/www/app/view/group_list.js 
```

所以请让我了解 Ext.ComponentQuery 如何与一些示例代码或教程一起使用。

提前谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T11:34:21.813

`Ext.ComponentQuery`接受 3 种类型的参数：

*   `xtype`，例如：`Ext.ComponentQuery.query('navigationview')`
*   `id`，例如：`Ext.ComponentQuery.query('my-nav-view-id')`
*   `attributes`，例如：`Ext.ComponentQuery.query('navigationview[name="my nav view"]')`

无论参数是哪种类型，`Ext.ComponentQuery.query()`始终返回匹配组件的数组。在示例中，他们添加`[0]`是因为可以确保结果数组仅包含 1 个项目。

在您的代码中，您似乎试图查询 xtype 的组件`navigationview`，这种组件没有`getValues`方法（仅适用于`Ext.form.Panel`派生类）。因此，如果要检索值，则必须使用如下查询：

`Ext.ComponentQuery.query('checkboxfield')[0]`

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T11:27:54.003

Ext.ComponentQuery 文档在[这里](http://docs.sencha.com/extjs/5.1/5.1.1-apidocs/#!/api/Ext.ComponentQuery)...

在本例中不应使用它。由于不使用全局搜索方法，此代码将更具弹性且速度更快。

```
var sendBtn = {
            itemId: 'sendBtn',
            xtype: 'button',
            text: 'Send',
            ui: 'action',
            scope: this,
            handler: function() {
                var check = this.down('#checkboxfield'),
                values = check.getValue();
                Ext.Msg.alert(null,
                    "Selected All: " + ((values.all) ? "yes" : "no")
                );
            }     
    }; 
```

我也更正了代码示例，方法是 getValue()

**注意：** 我知道这个答案已经过时了，它无关紧要，但是接受的方法鼓励在不需要的地方使用 Ext.ComponentQuery，这只是糟糕的代码，并且具有假设 ui 将保持在同一个集合中的逻辑代码格式。

# iphone - 在 iphone 中将图像添加到 excelsheet

> ID：10244762
> 
> 赞同：10
> 
> 时间：2012-04-20T10:48:24.847
> 
> 标签：iphone, image, excel, ios4

在我的应用程序中，我想从数据库中检索数据并将其添加到 excelsheet 中。数据库的数据是字符串和 BLOB 格式。我已经使用框架检索数据并添加到 excel 表中： [https ://github.com/andreac/RSSheet](https://github.com/andreac/RSSheet)

问题是我也想将图像添加到工作表中。如果有人对此有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:57:14.773

RSSheet 库目前不支持向工作表添加图形。您需要在服务器端执行此操作，除非您扩展 RSCell 类以支持此操作。

根据您的后端，这可以轻松完成。在 PHP 中，我使用了[PHPExcel](http://phpexcel.codeplex.com/)库。

# javascript - 由于字符串中的 & ，无法使用 JSON 传递

> ID：10244764
> 
> 赞同：2
> 
> 时间：2012-04-20T10:48:29.630
> 
> 标签：javascript, json

我正在使用这种格式在 GET 请求中将数据传递给服务器。

```
var val = {
    name:"abcd",
    age="21"
}
var val2 = "test2" ;
http://server-name/getdata.htm?data=JSON.stringify(val)&data1=val2 
```

.

这很好，但是，当 val.name 像“abcd&def”时，请求的格式会因为这个“&”而失真

我该怎么办 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:50:47.123

> 我该怎么办 ？

您应该正确编码查询字符串的元素，使用[`encodeURIComponent`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)（这是 MDC 的链接，但该功能在所有浏览器中都可用，而不仅仅是 Firefox）。

您没有显示实际的代码，但沿着这些线路：

```
var link = "http://server-name/getdata.htm?data=" +
           encodeURIComponent(JSON.stringify(val)) +
           "&data1=" +
           encodeURIComponent(val2); 
```

从技术上讲，更正确的方法是对密钥`data`和进行编码`data1`，如下所示：

```
var link = "http://server-name/getdata.htm?" +
           encodeURIComponent("data") + "=" +
           encodeURIComponent(JSON.stringify(val)) +
           "&" + encodeURIComponent("data1") + "=" +
           encodeURIComponent(val2); 
```

...但是当您处理文字键（而不是来自您无法控制的字符串的键）时，当您知道编码形式与原始形式相同（它用于`data`and `data1`）时，您可以逃脱不编码密钥。

# c# - 如何转换为 linq 请求？

> ID：10244765
> 
> 赞同：1
> 
> 时间：2012-04-20T10:48:35.720
> 
> 标签：c#, .net, linq, entity-framework-4.1

```
var list = new List<ListCreaditInBankView>();
var banktemp = m_banksRepository.Banks;
foreach (Bank bank in banktemp)
{
    var bankbranchtemp = m_banksRepository.BankBranches.Where(x => x.BankId == bank.Id);
    foreach (BankBranch bankBranch in bankbranchtemp)
    {
        var creditortemp = m_creditorsRepository.Creditors.Where(x => x.BankBranchId == bankBranch.Id);
        list.Add(new ListCreaditInBankView(){Bank = bank, Creditors = creditortemp});

    }

} 
```

我需要得到`List<ListCreaditInBankView>`没有这些周期。

我试过了，但它只得到一个`Creditors`

```
var lists = (from bank in banksTemp
                         let creditorBank = m_creditorsRepository.GetCreditorBank(bank.BankBranches.Select(x => x.Id).ToList())
                         select new ListCreaditInBankView() {Bank = bank, Creditors = creditorBank}).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:55:20.137

尝试以下操作：

```
var lists = (from bank in m_banksRepository.Banks
             select new ListCreaditInBankView
             {
                 Bank = bank,
                 Creditors = creditorsRepository.GetCreditorBank(bank.BankBranches
                     .Select(x => x.Id).ToList())
             }).ToList(); 
```

或者，如果您更喜欢其他风格的 LINQ（`method chaining`它被称为，感谢 Numan :)）：

```
var lists = m_banksRepository.Banks
             .Select(bank => new ListCreaditInBankView
             {
                 Bank = bank,
                 Creditors = creditorsRepository.GetCreditorBank(bank.BankBranches
                     .Select(x => x.Id).ToList())
             }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:00:08.313

如果您使用的是 Linq 2 Entity 框架，您可以尝试另一种方法。

[http://msdn.microsoft.com/en-us/library/bb896272.aspx](http://msdn.microsoft.com/en-us/library/bb896272.aspx)

您只需要确保您已正确设置数据库中的表和键（或至少在生成的模型中进行映射），否则它将无法正常工作。

# c++ - 尝试从从 DLL 加载的驱动类实例访问基类向量成员时程序崩溃

> ID：10244770
> 
> 赞同：2
> 
> 时间：2012-04-20T10:48:52.997
> 
> 标签：c++, visual-c++, inheritance, dll

我遇到了奇怪的崩溃。我正在尝试将我的应用程序的各种模块（基于 MFC，在 VS2005 中开发）分离成 DLL。以下是我试图实现它的骨架代码：

在一个常见的头文件中（比如 base.h）：

```
class Base {
    vector<message> messages;
    ...
    ...
}; 
```

在 DLL 源代码的头文件中（比如 class.h）：

```
class Derived : public Base {
private:
    int hoo();
    ...
public:
    void foo();
    int goo();
    ...
};

extern "C" __declspec (dllexport) Derived* CreateDerived(); 
```

在类.cpp

```
 Derived* CreateDerived()
 {
    return new Derived;
 } 
```

在主应用程序代码的文件中：

```
#include "base.h"
#include "class.h"

typedef Derived* (*DerivedCreator)();
...
...

void LoadDll()
{
    //DLL Load Code...
    ...
    ...

    DerivedCreator creator = reinterpret_cast<DerivedCreator>(::GetProcAddress(dllHandle, "CreateDerived"));

    Derived* pDerived = creator();

    pDerived->messages.push_back(message("xyz"));//Crashes here...
} 
```

问题是当我尝试访问 Base 类的向量成员时，代码会出现问题。这仅在发布模式下发生。它在调试模式下工作正常。当我在发布模式下从 Visual Studio 执行它时收到的错误消息是：

“Microsoft Visual Studio C 运行时库在三星 SSD Magician.exe 中检测到一个致命错误。

按 Break 调试程序或按 Continue 终止程序。”

但是当我直接执行发布二进制文件并将调试器附加到它时，我得到了访问冲突。此时，如果我在调试器中检查向量，它会在其中显示 6 位条目，它们都不可读。我能够在派生指针中看到基类其余成员的正确值。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:22:28.210

跨 DLL 边界传递 stl 容器是很危险的。这里的原因是每个模块（主应用程序和 DLL）都有自己的堆实例。如果您在 DLL 的上下文中分配动态内存，然后将指针传递给应用程序并在应用程序的上下文中释放该内存，这会导致堆损坏。

这正是您的示例中发生的情况。

```
Derived* pDerived = creator(); 
```

`CreateDerived`叫做。

```
 Derived* CreateDerived()
 {
    return new Derived;
 } 
```

`new Derived`在 DLL 堆中分配内存。

```
pDerived->messages.push_back(message("xyz")); 
```

在 内部`push_back`，为 分配了额外的内存`Base::messages`，并且该分配是在应用程序堆上完成的。碰撞！

一个结论是，您需要重新考虑 DLL 接口，以便仅在 DLL 内部对向量执行所有操作。

# twitter-bootstrap - 如何从 Bootstrap CSS 的下拉列表中删除箭头？

> ID：10244773
> 
> 赞同：12
> 
> 时间：2012-04-20T10:49:01.170
> 
> 标签：twitter-bootstrap

我正在尝试删除出现在 Twitter Bootstrap 框架中的下拉菜单上的箭头。有没有人想出去除箭头的方法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-23T23:15:31.680

从链接中删除插入符号类会从导航栏中删除箭头，

```
.dropdown-menu::before, 
.dropdown-menu::after {
    border: none;
    content: none;
} 
```

将从下拉菜单中删除小标签。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-20T11:00:13.683

来自：[https ://getbootstrap.com/2.3.2/components.html#buttonDropdowns](https://getbootstrap.com/2.3.2/components.html#buttonDropdowns)

```
<div class="btn-group">
  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
    Action
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu">
    <!-- dropdown menu links -->
  </ul>
</div> 
```

如果删除`<span class="caret"></span>`箭头不显示。

用开发者试了一下。Chrome 中的控制台，并且似乎可以正常工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-30T00:05:32.270

如果您复制现有的 Bootstrap 下拉示例，则菜单按钮标记如下所示：

```
<button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Menu Name</button> 
```

删除`dropdown-toggle`类会删除箭头（或插入符号）：

```
<button class="btn btn-primary" type="button" data-toggle="dropdown">Menu Name</button> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-21T21:09:04.567

```
.dropdown-toggle::after{
    display: none;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-19T05:46:37.840

只需从下拉菜单中删除边框底部即可从导航栏中删除箭头。

```
.navbar .nav > li > .dropdown-menu:before, .navbar .nav > li > .dropdown-menu:after{
    border-bottom: none;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-22T08:06:23.470

我发现最好的解决方案是添加`overflow:hidden;`到`.dropdown-menu`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-08-02T19:20:55.907

`.dropdown-toggle-split`在标签中添加类

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-02-01T17:37:50.207

唯一对我有用的是，`class="caret"`如果您使用引导下拉菜单，我将其删除。希望这对你也有用。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-05-07T04:13:38.337

在 Bootstrap4 中，从“a”元素中删除“dropdown-toggle”类。

# android - 如何在android的sql lite中一起转义单引号和双引号？

> ID：10244776
> 
> 赞同：0
> 
> 时间：2012-04-20T10:49:06.717
> 
> 标签：android, sql, sqlite, escaping, quotes

如果字符串是，如何转义单引号和双引号

```
t"'e'"s""t'' 
```

换句话说，如何转义包含单引号和双引号的字符串中的引号。

这个例子是这样的：

```
 String whereClauseToTracks = MediaStore.Audio.Media.ARTIST + " = '" + artist + "' "; // t"'e'"s""t'' - instead of artist
    Cursor cursorToTracks = mResolver.query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI , new String[] { MediaStore.Audio.Media.ALBUM }, whereClauseToTracks, null, null); 
```

当字符串包含引号时，我得到 sql lite 异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:02:56.790

像这样使用`selectionArgs`和： `?``selection`

```
String selection= MediaStore.Audio.Media.ARTIST + " = ?";
Cursor cursorToTracks = mResolver.query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI , new String[] { MediaStore.Audio.Media.ALBUM }, selection, new String[] {artist}, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:52:35.213

采用 \' \”

```
String whereClauseToTracks = MediaStore.Audio.Media.ARTIST + " = '" + "t\"\'e\'\"s\"\"t\'\'" + "' "; 
```

# r - 函数参数作为输出名称的一部分

> ID：10244781
> 
> 赞同：0
> 
> 时间：2012-04-20T10:49:26.147
> 
> 标签：r, function, arguments

也许是一个愚蠢的问题，但我在任何地方都找不到任何答案（我看过：P）。我正在尝试创建一个具有两个参数的函数，这些参数将是向量（例如 x=c(a,b,c) 和 y=c(50,75,100)）。我将编写一个函数来计算这些的所有组合，并将参数用作输出名称的一部分。例如

函数(x,y)
df$output_a_50 = a*2+50^2
df$output_a_75 = a*2+75^2 .....

任何建议将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:42:30.623

正如@Spacedman 和其他人所讨论的，您的问题是，如果您传递`c(a, b, c)`给您的函数，名称将会丢失。在我看来，最好的选择是通过一个列表：

```
foo <- function(x, y) {
   df <- list()
   for (xx in names(x)) {
      for (yy in y) {
         varname <- paste("output", xx, yy, sep = "_")
         df[[varname]] <- x[[xx]]*2 + yy^2
      }
   }
   df
}

foo(x = list(a = NA, b = 1, c = 2:3),
    y = c(50, 75, 100))

# $output_a_50
# [1] NA
# 
# $output_a_75
# [1] NA
# 
# $output_a_100
# [1] NA
# 
# $output_b_50
# [1] 2502
# 
# $output_b_75
# [1] 5627
# 
# $output_b_100
# [1] 10002
# 
# $output_c_50
# [1] 2504 2506
# 
# $output_c_75
# [1] 5629 5631
# 
# $output_c_100
# [1] 10004 10006 
```

# objective-c - 在 iOS 应用程序中处理数据（选择什么？NSData、CoreData、sqlite、PList、NSUserDefaults）

> ID：10244782
> 
> 赞同：17
> 
> 时间：2012-04-20T10:49:32.250
> 
> 标签：objective-c, core-data, sqlite, plist, nsuserdefaults

当我开发 iPhone 应用程序（时间跟踪器、ToDoList 等）时，我永远不知道处理数据的最佳方式是什么。一旦我使用了 plist，下次使用 sqlite 或 CoreData。

你如何决定什么最适合你的项目？（只谈数据管理）

例如，如果您想开发：

*   Time Tracker App > PList 是您的选择吗？
*   RSS 阅读器应用程序 > CoreData？
*   照片应用 > sqlite?
*   电子邮件客户端 > ?

对于初学者，您能否大致指出正确的方向？（我知道这在很大程度上取决于应用程序以及您喜欢用它做什么，但任何想法都会有所帮助）

我离开发复杂的应用程序还很远，它们仍然很简单。

谢谢你的帮助，马克

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-20T11:09:34.383

您可以使用这些经验法则来决定哪种存储模型适用于您的应用程序。

*   如果数据完全适合内存并且相对非结构化，请使用 plist
*   如果数据完全适合内存并具有树状结构，请使用 XML
*   如果数据不适合内存并且具有图的结构，并且应用程序不需要非凡的查询能力，请使用 Core Data
*   如果数据不适合内存，结构复杂，或者应用程序受益于关系数据库提供的强大查询能力，请使用 sqlite
*   如果数据必须保密（例如密码），请使用[keychain](https://developer.apple.com/library/ios/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)。

请注意，这些选择经常重叠，因为多个存储模型将适合同一个应用程序。您的最终决定取决于您的个人喜好——您选择一种您更了解的技术。

在 Stack Overflow 上有一个[关于 sqlite vs. Core Data 的非常好的问题](https://stackoverflow.com/questions/523482/core-data-vs-sqlite-3)，您可能想通读该问题的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:22:33.730

我对每一个的经验法则是：

*   时间跟踪器应用程序 > 核心数据
*   RSS 阅读器应用程序 > 核心数据
*   照片应用 > 核心数据
*   电子邮件客户端 > 核心数据

尽管在每种情况下，您都会将某些内容存储在文件系统中。例如，照片应用程序显然会将实际照片放在文件系统上。电子邮件的文本将在文件系统等上。实际的 RSS 消息也可能是文本文件，但在核心数据对象中包含元数据。

在某些时候，您可能会发现您存储的数据超出了 Core Data 的可扩展性。那时你会考虑迁移到 SQLite。

关键是 Core Data 非常易于使用，并且优于所谓的轻量级替代品，您为什么不使用它呢？

# java - 覆盖时何时不调用 super() 方法？

> ID：10244785
> 
> 赞同：117
> 
> 时间：2012-04-20T10:49:37.057
> 
> 标签：java, android, overriding

当我制作自己的 Android 自定义类时，我`extend`是它的原生类。然后，当我想覆盖基本方法时，我总是调用`super()`方法，就像我总是在 , 等中所做的`onCreate`那样`onStop`。

我认为就是这样，因为从一开始 Android 团队就建议我们始终调用`super`每个方法覆盖。

但是，在**许多书中**，我可以看到比我更有经验的开发人员经常忽略调用`super`，我真的怀疑他们这样做是因为缺乏知识。例如，看看这个基本的[SAX](http://en.wikipedia.org/wiki/Simple_API_for_XML)解析器类，其中`super`省略了`startElement`,`characters`和`endElement`：

```
public class SAXParser extends DefaultHandler{
    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
        if(qName.equalsIgnoreCase("XXY")) {
            //do something
        }
    }

    public void characters(char[] ch, int start, int length) throws SAXException {
        //do something
    }

    public void endElement(String uri, String localName, String qName) throws SAXException {
        if(qName.equalsIgnoreCase("XXY")) {
            //do something
        }else () {
            //do something
        }
    }
} 
```

如果您尝试通过 Eclipse 或任何其他 IDE 创建任何覆盖方法，`super`将始终作为自动化过程的一部分创建。

这只是一个简单的例子。书上**到处都是类似的代码**。

他们怎么知道你什么时候必须打电话`super`，什么时候可以省略它？

PS。不要绑定到这个特定的例子。这只是从许多例子中随机挑选的一个例子。

（这听起来像是一个初学者的问题，但我真的很困惑。）

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-04-20T10:53:19.687

通过调用该`super`方法，您并没有*覆盖*该方法的行为，而是在*扩展*它。

调用`super`将执行您要扩展的类为该方法定义的任何逻辑。考虑到`super`在方法覆盖中调用 ' 实现的那一刻可能很重要。例如：

```
public class A { 
    public void save() { 
         // Perform save logic
    }
}

public class B extends A {
    private Object b;
    @Override
    public void save() { 
        super.save(); // Performs the save logic for A
        save(b); // Perform additional save logic
    }
} 
```

调用将按此特定顺序`B.save()`执行 和 的逻辑`save()`。如果你不在里面打电话，就不会被打电话。而如果你调用后，会有效地执行后。`A``B``super.save()``B.save()``A.save()``super.save()``save(b)``A.save()``B.save()`

如果你想*覆盖* .`super``super`

在`SAXParser`您提供的示例中，这些方法的[实现](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/org/xml/sax/helpers/DefaultHandler.java#271)`DefaultHandler`只是空的，因此子类可以覆盖它们并为这些方法提供行为。在此方法的[javadoc](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/helpers/DefaultHandler.html#startElement(java.lang.String,%20java.lang.String,%20java.lang.String,%20org.xml.sax.Attributes))中也指出了这一点。

```
public void startElement (String uri, String localName,
    String qName, Attributes attributes) throws SAXException {
    // no op
} 
```

关于`super()`IDE 生成的代码中的默认调用，正如`@barsju`他在评论中指出的那样，在每个构造函数中都有一个隐式调用`super()`（即使您没有在代码中编写它），这意味着在这种情况下，调用`super`' s 默认构造函数。只是为你写下来，`IDE`但如果你删除它也会被调用。另请注意，在实现构造函数时，`super()`或其任何带有参数的变体（即`super(x,y,z)`）只能*在方法的最开头*调用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-20T11:53:06.217

> 他们怎么知道何时必须调用 super 以及何时可以省略调用？

通常，如果一个特殊的 API 方法对底层框架上下文生命周期具有关键意义，它总是会在 API 文档中明确说明和突出显示，就像[`Activity.onCreate()`API 文档](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)一样。此外，如果 API 遵循稳健的设计，它应该在项目编译时抛出一些异常来提醒消费者开发人员，并确保它不会在运行时产生错误。

如果 API 文档中没有明确说明这一点，那么消费者开发人员可以非常安全地假设 API 方法在覆盖它时不需要调用。由消费者开发人员决定是使用默认行为（调用`super`方法）还是完全覆盖它。

如果条件允许（我喜欢开源软件），消费者开发人员可以随时查看 API 源代码，了解该方法实际上是如何编写的。例如查看[`Activity.onCreate()`源](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/app/Activity.java#Activity.onCreate%28android.os.Bundle%29)和[`DefaultHandler.startElement()`源](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/org/xml/sax/helpers/DefaultHandler.java#DefaultHandler.startElement%28java.lang.String%2Cjava.lang.String%2Cjava.lang.String%2Corg.xml.sax.Attributes%29)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-20T11:24:18.337

您应该在脑海中进行的测试是：

“我是否希望为我完成此方法的所有功能，然后再做一些事情？” 如果是，那么您想调用`super()`，然后完成您的方法。这对于“重要”方法来说是正确的，例如`onDraw()`，它在后台处理很多事情。

如果您只想要一些功能（就像您将覆盖的大多数方法一样），那么您可能不想调用`super()`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-20T11:01:27.850

Well **Xavi** gave a better answer.. but you probably might be knowing what does `super()` do when called in a overridden method... it ads what have you done with the default behaviour..

e.g:

```
onDraw() 
```

method in view class when overridden.. you draw something before saying super.onDraw() it appears once the view is fully drawn.. so here calling `super` is necessary since android has some critically important things to do (like onCreate())

but at the same time

```
onLongClick() 
```

when you override this you don't want to call super because it brings up a dialog with list of options for a EditText or any other similar view.. Thats the basic diff.. you have choice to leave it some times.. but for other methods like `onCreate() , onStop()` you should let the OS handle it..

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-24T18:31:45.620

我实现了一个约束数组列表，例如

```
public class ConstraintArrayList<T> extends ArrayList<T> {
  ConstraintArrayList(Constraint<T> cons) {this.cons = cons;}
  @Override
  public boolean add(T element) {
    if (cons.accept(element))
      return super.add(element);
    return false;
  }
} 
```

如果您查看代码，它只是在实际让超类执行将元素实际添加到列表之前进行一些预检查。这说明了方法覆盖的两个原因之一：

1.  您想要扩展超类可以做什么的可扩展性
2.  您希望通过多态性添加特定行为的特异性，例如在常见的动物界移动语义示例中，鸟类移动（飞行）和青蛙移动（跳跃）的方式特定于每个子类。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-20T11:07:33.013

我没有清楚地了解您的问题，但是如果您问为什么不调用该`super`方法：

调用该方法是有原因的`super`：如果父类中没有零参数构造函数，则无法为此创建子类，因此您需要在父类中保留无参数构造函数，或者您需要在子类构造函数的顶部定义`super()`调用语句。`argument(how much argument constructor you have used in super class)`

我希望这有帮助。如果没有，请告诉我。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-15T10:38:42.733

对于那些还想知道应该调用 Android 框架中哪些被覆盖的方法`super`并发现这个问题的人 - 这是 2019 年的当前提示 - **Android Studio 3+ 会在您需要它时告诉您**。

[![在此处输入图像描述](../Images/beff2ef321445283a7eccd5da1cc5f46.png)](https://i.stack.imgur.com/n5PhI.png)

# iphone - IOS 5 TWTweetComposeViewController 重复推文

> ID：10244787
> 
> 赞同：0
> 
> 时间：2012-04-20T10:49:39.463
> 
> 标签：iphone, ios, twitter, duplicates

我在我的应用程序中通过 TWTweetComposeViewController 使用 twitter 共享。当我尝试发送具有相同内容的推文时，我收到一条错误消息：“推文……是重复的，无法发送”。这种情况仅在我尝试发送与我之前发送的相同内容的推文时发生。

我使用的代码是：

```
if ([TWTweetComposeViewController canSendTweet])
        {
            TWTweetComposeViewController *tweetSheet = [[TWTweetComposeViewController alloc] init];
            [tweetSheet setInitialText:messageText];
            [self presentModalViewController:tweetSheet animated:YES];
        } 
```

这里有人见过这个案子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T10:51:47.707

Twitter 不允许您在短时间内发送相同的推文。这是不可能的。

您必须等待一段时间才能再次发送完全相同的推文。

# c# - 单独项目中的 MVC 4 管理区域

> ID：10244790
> 
> 赞同：4
> 
> 时间：2012-04-20T10:49:51.747
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我正在构建一个 ASP.NET MVC 4 应用程序，并希望将我的站点管理区域作为单独项目中的 MVC 区域。

我在我的解决方案中添加了一个新的 MVC 4 Web 应用程序项目，并添加了以下文件来注册我的区域：

```
public class AdminAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get { return "Admin"; }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Admin_default",
            "Admin/{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", area = "Admin", id = UrlParameter.Optional },
            new[] { "Future.Admin.Controllers" }
        );
    }
} 
```

但是，这会导致以下错误：

```
A route named 'Admin_default' is already in the route collection. Route names must be unique. 
```

我已将管理区域项目的构建输出路径更改为指向主站点项目。

有什么我遗漏或未配置的吗？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T12:39:23.510

如果此路由仅在您的代码库中声明一次，请清理并重建您的解决方案。如果您的 bin 文件夹中有“旧”dll（例如，如果您重命名了一个项目）并注册了此路由，则可能会发生这种情况。

# android - 如何在纵向和横向模式android的单个列表视图中显示不同的列数？

> ID：10244794
> 
> 赞同：0
> 
> 时间：2012-04-20T10:50:13.723
> 
> 标签：android, listview

谁能告诉我可以在列表视图中显示不同数量的列

例如：- 当我在纵向模式下看到列表视图时，它显示 3 列，当我在横向模式下看到列表视图时，它显示 4 列。我尝试这样做，但我的解决方案对我不起作用，我为布局文件夹中的 protrait 和 layout-land 文件夹中的横向定义了不同的布局，但它并不适合我。

```
Can any one tell me is it possible to achive this . 

And one More thing it possible to execute some code by checking 

For Example:-  if(this is android phone){

                  execute this code;
                 }

                if(this is android tablet){

                        execute this code;
                     }

 like iphone and ipad developer do 

                   if(this is iphone )
                   {
                    execute this code ;
                      }

                   if(this is ipad )
                   {
                    execute this code ;
                      } 
```

因为我在手机和平​​板电脑中都使用了相同的应用程序，并且有人想在手机和平​​板电脑中显示不同的东西。

```
Thanks in advance 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:54:01.837

试试下面的链接获取教程

[http://www.technotalkative.com/android-multi-column-listview/](http://www.technotalkative.com/android-multi-column-listview/)

谢谢..！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:56:07.360

```
 DisplayMetrics metrics = context.getResources().getDisplayMetrics();
 int width = metrics.widthPixels;
 int height = metrics.heightPixels; 
```

这给出了屏幕的尺寸，根据这些值，您可以确定它是否是平板电脑。 [请参阅此链接以了解如何获取设备的尺寸](https://stackoverflow.com/questions/6520718/how-to-get-screen-width-and-height)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:00:49.767

Create more layouts with same name in /res/layout

After selecting root element click "Next" and then choose one of the Available qualifiers (orientation) and define listView with its properties.

# image - 如何在 Octave 中裁剪图像？

> ID：10244796
> 
> 赞同：1
> 
> 时间：2012-04-20T10:50:18.073
> 
> 标签：image, image-processing, octave

Octave 中是否有内置功能可以从图像中裁剪特定区域？我已经安装了图像处理包，但我没有找到类似`imcrop`或类似的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-13T20:52:41.227

该`imcrop`功能现在存在：

```
imcrop(Image, [x y 20 20]) 
```

将从坐标`20x20`开始裁剪像素图像。`(x,y)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T22:23:37.447

如果您的图像（Octave 中的矩阵）是`I`，并且您想从`x,y`大小为 的块中裁剪`w,l`，那么`resize(circshift(I,-x,-y), w, l)`应该这样做。基本上，将矩阵移动到`x,y`现在`1,1`，然后将矩阵的其余部分截断过去`w,l`。

编辑：实际上，那是在我了解矩阵索引之前。相反，这就是你想要的：

`Croppedimage = Image(y:y+l-1, x:x+w-1)`

# mysql - NodeJS中mysql查询的计时问题

> ID：10244799
> 
> 赞同：2
> 
> 时间：2012-04-20T10:50:25.263
> 
> 标签：mysql, node.js, asynchronous, timing

我在nodejs中使用mysql模块。

我想做这样的事情，但问题是查询的回调是异步的，我无法正确填充结果数组。我该怎么办？谢谢！

```
function fn(callback) {
    client.query(
        'SELECT * FROM imbarcazioni',
        function select(err, ships) {
        if(err) {
            throw err;
        }

        ships.forEach(function(ship) {
            client.query(
                'SELECT * FROM storico_imbarcazioni WHERE id_imbarcazione=' + ship.id,
                function select(err, hist) {
                    ship.history = hist;
                }
            );
        });

        callback(hist);
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:34:14.253

像往常一样，我建议将[async](https://github.com/caolan/async)用于这类事情。在这里，您可以使用[async.map](https://github.com/caolan/async#map)：

```
function selectHistory(ship, callback) {
    client.query('SELECT * FROM storico_imbarcazioni WHERE id_imbarcazione = ?', [ship.id], function(err, history) {
        if(err) return callback(err);
        ship.history = history;
        callback(null, ship);
    });
}

client.query('SELECT * FROM imbarcazoni', function(err, ships) {
    async.map(ships, selectHistory, function(err, ships) {
        // ships is an array with each ship along with it's history
    });
}); 
```

也就是说，对于您的特定示例，我宁愿使用 a`JOIN`并在 SQL 中处理它：

```
SELECT * FROM imbarcazioni
LEFT JOIN storico_imbarcazoni ON storico_imbarcazoni.id_imbarcazione = imbarcazioni.id 
```

# ruby-on-rails - 使用 Datamapper 从 Rails 控制器返回关联对象

> ID：10244800
> 
> 赞同：0
> 
> 时间：2012-04-20T10:50:27.077
> 
> 标签：ruby-on-rails, datamapper

我有两个相互关联的模型（多对多），我想在我的 Rails 控制器操作的响应中返回它们。

这两个类是用户和位置。还有一个链接类 UserLocation。

User.rb 看起来像：

```
class User

  include DataMapper::Resource

  ...
  has n, :user_locations
  has n, :locations, :through => :user_locations

end 
```

用户位置.rb：

```
class UserLocation

  include DataMapper::Resource

  # attributes
  property :id, Serial

  # relationships
  belongs_to :user
  belongs_to :location

  # validation
  validates_presence_of :user, :location

end 
```

位置.rb：

```
class Location

  include DataMapper::Resource

  # attributes
  # no need to specify the user relation AFAIK

end 
```

当我执行 a`User.get(id)`时，它返回所有用户属性，但不返回位置。我可以通过代码进行调试并运行 a`user.locations`并且它可以正常工作。为什么没有从 rails 操作返回位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T06:14:21.237

这就是它应该如何工作的方式。关系是通过单独的 SQL 请求加载的，它可能既慢又复杂，您应该准确指定要加载的关系。想象一下在一次调用中加载所有关系`get`——这会让我一团糟。

# vba - excel公式的递归树评估

> ID：10244809
> 
> 赞同：2
> 
> 时间：2012-04-20T10:51:21.527
> 
> 标签：vba, excel, dependencies

我有一个顶部单元格，其中包含一个引用其他单元格的公式。这些单元格包含引用其他单元格的公式。

我想评估顶部单元格，同时在整个评估树中将每个单元格（例如 A4）替换为另一个单元格（例如 A5）。

我知道您可以浏览依赖树，但是您可以在执行替换后评估公式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:32:42.330

为什么不直接将 Calculation 设置为 Manual，对单元格进行更改，然后调用 Application.Calculate。
使用 Excel 的内置依赖项跟踪而不是尝试重新发明它似乎更简单、更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:06:10.610

是的 您可以使用`Application.Evaluate`来评估公式。看这个例子

```
Sub Sample()
    Dim frmla As String

    frmla = Range("E1").Formula

    frmla = Replace(frmla, "A2", "A1")

    MsgBox Application.Evaluate(frmla)
End Sub 
```

# grails - 拆分持久集

> ID：10244810
> 
> 赞同：1
> 
> 时间：2012-04-20T10:51:24.657
> 
> 标签：grails, split, set, persistent

我已经使用了代码

```
def a = Domain.list() 
```

当我写进去`log.info a.class`时，告诉我要成为一个持久的集合。我一直试图在索引处获取元素但无法使用

```
a.toArray()
log.info a[0] 
```

如何拆分返回的对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:59:21.727

`toArray()`返回新数组，它没有修改对象，尝试：

```
a = a.toArray()
log.info a[0] 
```

顺便说一句，您可以使用：

```
def a = Domain.list() as List
log.info a[0] 
```

PS你确定你得到`Set`而不是`List`？

# javascript - History.js 和页面的手动刷新

> ID：10244811
> 
> 赞同：0
> 
> 时间：2012-04-20T10:51:27.737
> 
> 标签：javascript, jquery, html, history.js

我正在使用 History.js，我正在尝试获取一个作为 Google Plus 网址的网址。

```
(function(window, undefined){

var History = window.History; // Note: We are using a capital H instead of a lower h
if ( !History.enabled ) {
     // History.js is disabled for this browser.
     // This is because we can optionally choose to support HTML4 browsers or not.
    return false;
}

History.Adapter.bind(window, 'statechange', function(){ // Note: We are using statechange instead of popstate

    var State = History.getState(); // Note: We are using History.getState() instead of event.state
    History.log(State.data, State.title, State.url);
    console.log(State.data.page);
});

$('.item').live('click', function(e){
    e.preventDefault();
    var url = $(this).children(1).attr('href');
    $(document).remove('#content');
    $('#loaded').load('/controlpanel' + url + '.php #content');
    History.pushState({page: url + '.php'}, "Prova Pagina", History.getRootUrl() + 'controlpanel' + url); // logs {state:1}, "State 1", "?state=1"
}); 
```

}）（窗户）;

这个脚本在我点击链接时有效，但是当我手动刷新页面时，我已经点击了一个链接并且 url 变为[http://www.mysite.com/something/page](http://www.mysite.com/something/page)，浏览器给了我一个404 错误。我该如何解决？

我想获得类似的东西：https: [//plus.google.com/explore](https://plus.google.com/explore)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:09:29.307

即使 JS 允许你不重新加载整个页面，URL 应该仍然可以在服务器端访问，以便直接访问链接的人会看到一些东西（更不用说优雅降级了）。

此外，您必须在锚链接上添加点击处理程序，以便您可以阻止默认操作（转到链接）并使用该`pushState`方法更改 URL。像这样的东西：

```
document.body.onclick = function( e ) {
    var evt = e || window.event,
        target = evt.target || evt.srcElement // Get the target cross-browser

    // If the element clicked is a link
    if ( target.nodeName === 'A' ) {

        // Use the History API to change the URL
        History.pushState() // Use the library correctly

        // Don't forget to return false so that the link doesn't make you reload the page
        return false
    }
} 
```

这绝对不是生产代码（您应该检查外部链接，而不是绑定到正文等），但您明白了。

# function - 创建函数 SQL Server 2000

> ID：10244814
> 
> 赞同：1
> 
> 时间：2012-04-20T10:51:38.323
> 
> 标签：function, sql-server-2000

我正在 SQL Server 2000 中创建一个 SQL Server 函数。我的语法大约是这样的：

```
ALTER FUNCTION dbo.test()
RETURNS TABLE
AS
RETURN 
(
  DECLARE @A VARCHAR(100)
  DECLARE @B VARCHAR(100)
  SELECT @A='abc', @B='bca'
  SELECT A=@A, B=@B  
) 
```

我正在尝试声明一个变量并将其选择为返回值，但我收到以下错误消息：

```
Msg 156, Level 15, State 1, Procedure test, Line 6
Incorrect syntax near the keyword 'DECLARE'.
Msg 170, Level 15, State 1, Procedure test, Line 10
Line 10: Incorrect syntax near ')'. 
```

似乎它不会接受变量声明。有什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:00:39.973

您的语法适用于内联表函数。使用多个语句，您需要一个多语句表函数。

```
CREATE FUNCTION dbo.test()
RETURNS @returntable TABLE 
(
    A VARCHAR(100),
    B VARCHAR(100)
)
AS
BEGIN
    DECLARE @A VARCHAR(100)
    DECLARE @B VARCHAR(100)
    SELECT @A='abc', @B='bca'
    INSERT INTO @returntable 
    VALUES(@A, @B)
    RETURN 
END 
```

[创建函数](http://msdn.microsoft.com/en-us/library/aa258261%28v=sql.80%29.aspx)

**更新：**
如果你想要一个内联表函数必须只有一个选择语句。

```
CREATE FUNCTION dbo.test2()
RETURNS TABLE AS RETURN
(
    SELECT 'abc' AS A, 'bca' AS B
) 
```

# jquery - asp.net mvc 3 客户端所需的验证随机工作

> ID：10244818
> 
> 赞同：1
> 
> 时间：2012-04-20T10:51:48.070
> 
> 标签：jquery, asp.net-mvc-3, validation

在执行第一个表单提交之前，jquery 不显眼的客户端验证是否正确？我在未提交表单时遇到问题，当我在必填字段中输入一些数据然后将其删除时，我随机应用了验证：有时是有时不是。这是一个常见问题，是否可以在表单提交之前初始化验证或禁用它，以免出现这种不可预测的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:21:27.760

如果是导致验证问题的动态内容，那么您可以使用它：

```
<script type="text/javascript">
 $.validate.unobtrusive.parse("#dynamicId");
</script> 
```

如果它是局部视图，那么您可以这样做：

```
@{
  if( ViewContext.FormContext == null ){
   ViewContext.FormContext = new FormContext();
  }
} 
```

# jsf - java.lang.UnsupportedOperationException 在

> ID：10244822
> 
> 赞同：1
> 
> 时间：2012-04-20T10:52:08.777
> 
> 标签：jsf, jakarta-ee, richfaces

我试图用这样的上传文件：

```
 <h:form>
            <rich:fileUpload fileUploadListener="#{bean.test}"
                id="upload" acceptedTypes="jpeg, jpg, gif, png, bmp">
                <a4j:ajax event="uploadcomplete" render="preview" />
            </rich:fileUpload>

        </h:form> 
```

但我总是得到错误：

```
 Servlet.service() for servlet [Faces Servlet] in context with path [/project] threw exception
java.lang.UnsupportedOperationException
at javax.faces.context.FacesContext.getExceptionHandler(FacesContext.java:280)
at javax.faces.context.FacesContextWrapper.getExceptionHandler(FacesContextWrapper.java:354)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119) 
at ...... 
```

我以前用过，效果很好。我只是看不到我的错误。

它的上传框显示，我可以添加一个文件。当我按下“上传”并且未调用侦听器方法（public void test（FileUploadEvent event）{..}）时出现错误。

知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T07:24:12.607

我有一个类似的问题，事实证明，在我的打包`war`文件中，除了**`myfaces-orchestra-core20`**我还**`myfaces-orchestra-core12`**从另一个依赖项中溜进来。

只有在我的`pom.xml`文件中声明：

```
<dependency>
      <groupId>org.apache.myfaces.orchestra</groupId>
      <artifactId>myfaces-orchestra-core20</artifactId>
      <version>1.5</version>
</dependency> 
```

和 Richfaces verison`4.3.7.Final`使它最终工作。

# java - 使用 2 次鼠标点击绘制一个圆

> ID：10244823
> 
> 赞同：0
> 
> 时间：2012-04-20T10:52:11.697
> 
> 标签：java, swing

我需要使用鼠标单击绘制一个简单的圆第一次单击将是中心第二次将是半径，圆将由 2 绘制。

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T10:59:08.890

好问题！下面的代码是一个自包含的示例（我使用拖动来定义半径）：

![截屏](../Images/c653cd667d4629ff79994ae488e252e8.png)

## 生成上面屏幕截图的代码：

```
public static void main(String[] args) throws IOException {
    JFrame frame = new JFrame("Test");
    frame.add(new JComponent() {
        Point p; int r; 
        {
            addMouseListener(new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent e) {
                    p = e.getPoint(); r = 0; repaint();
                }
                public void mouseReleased(MouseEvent e) {
                    r = (int) Math.round(e.getPoint().distance(p));
                    repaint();
                }
            });
            addMouseMotionListener(new MouseMotionAdapter() {
                public void mouseDragged(MouseEvent e) {
                    r = (int) Math.round(e.getPoint().distance(p));
                    repaint();
                }
            });
            setPreferredSize(new Dimension(400, 300));
        }
        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if(p != null) g.drawOval(p.x - r, p.y - r, 2 * r, 2 * r); 
        }
    });
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);
} 
```

* * *

## 使用 2 次点击的示例：

```
public static void main(String[] args) throws IOException {
    JFrame frame = new JFrame("Test");
    frame.add(new JComponent() {
        Point p1, p2;
        {
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    if (p1 == null || p2 != null) { 
                        p1 = e.getPoint();
                        p2 = null;
                    } else {
                        p2 = e.getPoint();
                    } 
                    repaint();
                }
            });
            setPreferredSize(new Dimension(400, 300));
        }
        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if(p1 != null && p2 != null) {
                int r = (int) Math.round(p1.distance(p2));
                g.drawOval(p1.x - r, p1.y - r, 2 * r, 2 * r);
            }
        }
    });
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);
} 
```

# algorithm - 最小化颜色：背包算法的变体？

> ID：10244833
> 
> 赞同：4
> 
> 时间：2012-04-20T10:52:53.847
> 
> 标签：algorithm, approximation, np, knapsack-problem, variation

在一个项目中我遇到了这个问题，我将在这里用问题的实际领域之外的术语重新表述（我想我可以谈论烟花的口径和形状，但这会使理解更加复杂）。我正在寻找一种（可能是近似的）算法来解决它。

我有*n个*大小不一的容器，*m*个不同大小职业*、*不同颜色的物件（物件可以是多色的，所以一个物件的颜色是真正的一套）。

我的目标是将所有对象放入容器中（我已经知道这是可能的），以便每个容器的颜色种类最小化。对于“颜色的种类被最小化”，我的意思是每个容器的不同颜色数量的总和是最小的。

一个例子。我有两个大小为 2 的容器和四个对象，它们的颜色是 {red}、{red,green}、{blue}、{blue,green}，每个大小为 1。最佳解决方案是 [{red} , {red, green}], [{blue}, {blue, green}]，其中总品种为 2+2=4。更糟糕的解决方案是 [{red}, {blue}], [{red, green}, {blue, green}]，其中总品种为 2+3=5。

我的猜测是这个问题是 NP 难题，因为它听起来比背包问题更难：对象的值被转换为负值，而且取决于同一容器内的其他对象。但是我不知道如何解决这个问题以获得一个近似的解决方案，无论如何这将是非常受欢迎的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T06:33:46.627

### 装箱还是背包？

这个问题似乎与[装箱问题](https://en.wikipedia.org/wiki/Bin_packing)比与背包问题有更多的共同点。在[背包问题](https://en.wikipedia.org/wiki/Knapsack_problem)中，你只有一个背包要装，但它有一个容量，你不能超过。而且您必须在最大化您选择放入的物品的总价值的同时这样做。在这里，您不必用完所有物品。

然而，在装箱问题中，您有多个箱，每个箱都有一个容量。您有兴趣在将每个项目装入某个 bin 的同时最小化 bin 的数量。您还必须尊重每个箱的容量限制。与背包不同，在这里您必须用完所有物品。

在您的情况下，您还试图最小化垃圾箱的数量，但它们不能少于两个。而且您还想用完所有对象。您对容量限制没有说太多，但我假设您也必须尊重这一点。到目前为止，它看起来很像装箱问题。您还有一个额外的限制：尽量减少每个容器中的颜色数量。

### NP难？

现在，我开始与您分享关于它是 NP-hard 的预感——它具有 bin-packing 的所有元素和一个额外的约束。通过使用带有所有红色对象的实例，应该很容易显示从装箱中的减少。我们只需要证明NP中的问题——即我们可以在多项式时间内验证结果。你去吧，我们在那里有一个非正式的证明！

### 贪婪启发式 I

这是一个可能会有所帮助的贪婪启发式方法。

表示：不使用集合，而是考虑长度为*k*的位序列，其中*k*是您拥有的不同颜色的数量。所以，假设你有 3 种颜色——红色、绿色、蓝色。您可以将 [blue] 001，[green, blue] 表示为 011，[red] 表示为 100，等等。

1.  使用比较函数按其颜色位序列对项目进行排序，该比较函数会产生诸如 001、010、100、011、110、111 之类的排序。您可以将此类比较函数设计为 位序列的[汉明权重](http://en.wikipedia.org/wiki/Hamming_weight)的加权函数及其实际数值。

2.  请注意，许多颜色模式（位序列）很可能会被许多对象共享。这些对象将在排序列表中显示为连续对象。

3.  遍历排序列表，将相同颜色模式的连续项目分配给相同的 bin。你会从单色到多色项目。

4.  您继续这种方式，直到用尽每个垃圾箱的容量。

### 贪婪启发式 II

另一种方法是开始以相反的顺序填充垃圾箱。从颜色数量最多的对象开始。如果可以的话，再次将连续的对象填充到同一个 bin 中。当您找到颜色较少的物品时，将它们放入已经覆盖该颜色的现有垃圾箱中。

### 结论

这两种方法都不是最优的，但是，嘿，我们不是已经知道了吗？我们刚刚草拟了一个非正式的证明，这个问题是 NP 难题。

祝你好运！

# ruby - Ruby：对于 2D 街机/平台游戏，哪个游戏库最好/最简单？

> ID：10244839
> 
> 赞同：-2
> 
> 时间：2012-04-20T10:53:06.810
> 
> 标签：ruby, libgosu

我想在**Ruby**上创建简单的街机。我用了一段时间**GOSU**，然后我找到了很多 ruby​​ 的游戏库：**RubyGame**，**Chingu** ....

哪个库最适合游戏开发，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T21:45:59.647

[Gosu](http://www.libgosu.org)是使用 Ruby 编写 2D 游戏的最流行（且维护积极）的库。它有一个底层 C++ 库，用于提高性能并与底层显示渲染库（如 OpenGL）进行交互。

我还在开发一个 gem，它可以让用 Ruby 编写真正的街机游戏变得更加容易。同时，您可能对使用兼容 MAME 的街机控制器感兴趣。我编写了一个 gem，它[为 Gosu 提供了常见的 MAME 键盘输入映射](https://github.com/ruby-rcade/rcade-controls)。

还有一个叫做 GameBox 的 gem [，](https://github.com/shawn42/gamebox)它在幕后使用了 Gosu。GameBox 尝试抽象出许多常见的游戏样板，以便您可以编写游戏的“业务逻辑”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:50:34.960

您可以根据您将实施的具体内容来决定[https://www.ruby-toolbox.com/categories/game_libraries](https://www.ruby-toolbox.com/categories/game_libraries)

# java - 在这种情况下，我应该使用什么类似 HashMap 的集合？

> ID：10244843
> 
> 赞同：1
> 
> 时间：2012-04-20T10:53:36.410
> 
> 标签：java, collections, hashmap

我有许多坐标空间，尺寸为 65,536 x 65,536，并由许多对象填充，其中没有两个可以共享相同的坐标。鉴于此，我可以通过将生成坐标的两条短裤组合成生成散列的 int 来保证每个对象的唯一散列。

为了存储对这些对象的引用，我目前正在使用带有自定义不可变 Point 类的 HashMap 作为键。然而，自从我开始一次使用大量这些坐标空间以来，我开始寻找减少内存使用的方法。

我对 java 的 HashMap 工作原理的理解是基本的，但考虑到我可以保证每个对象都有一个唯一的哈希，似乎我可以使用内存效率更高的版本：

*   不使用可以包含多个对象的存储桶
*   可以通过使用散列而不是使用键来放置和获取对象

是否存在这样一个类似 HashMap 的集合？

编辑：坐标空间是稀疏的，每个运行大约 2000-3000 个对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T10:59:06.290

您可以使用 trove4j 的 TIntObjectHashMap 或[TIntXxxxHashMap](http://trove.starlight-systems.com/)：

```
private final TIntIntHashMap map = ...

public void putInt(int x, int y, int value) {
   int index = (x << 16) + y;
   map.put(index, value); // only uses primitives.
}

public int getInt(int x, int y) {
   int index = (x << 16) + y;
   return map.get(index);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:58:25.547

你关于水桶的说法掩盖了一个误解。哈希桶不包含具有给定哈希码的所有项目；它们包含所有具有*一些共同哈希码功能的*项目。例如，这种函数的一个简单示例可能就是模运算符。您有 2^32 个不同的可能代码，但 a`HashMap`可能只有（例如）100 个左右的桶。使用单项存储桶意味着您可以有效地将对象放入以哈希码作为索引的数组中！

现在，仅使用 32 位整数作为键的专用映射的另一个想法实际上可以工作，并减少内存使用量。彼得劳里在他的回答中有一个很好的建议。

# list - 将带空格的文件行作为列表读入 NetLogo

> ID：10244850
> 
> 赞同：4
> 
> 时间：2012-04-20T10:54:26.460
> 
> 标签：list, file-io, netlogo

如何将由空格分隔的文件内容作为列表读入 NetLogo？例如，使用包含以下数据的文件：

```
 2321   23233  2  
  2321   3223   2
  2321   313    1
  213    321    1 
```

我想创建如下列表：

```
a[2321,2321,2321,213]

b[23233,3223,313,321]

c[2,2,1,1] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T16:16:08.930

好吧，这是一种天真的方法：

```
let a []
let b []
let c []
file-open "data.txt"
while [ not file-at-end? ] [
  set a lput file-read a
  set b lput file-read b
  set c lput file-read c
]
file-close 
```

它假定文件中的项目数是 3 的倍数。如果不是，您将遇到麻烦。

**编辑：**

...这是一种更长，但也更通用和更强大的方法：

```
to-report read-file-into-list [ filename ]
  file-open filename
  let xs []
  while [ not file-at-end? ] [
    set xs lput file-read xs
  ]
  file-close
  report xs
end

to-report split-into-n-lists [ n xs ]
  let lists n-values n [[]]
  while [not empty? xs] [
    let items []
    repeat n [
      if not empty? xs [
        set items lput (first xs) items
        set xs but-first xs
      ]
    ]
    foreach (n-values length items [ ? ]) [
      set lists replace-item ? lists (lput (item ? items) (item ? lists))
    ]
  ]
  report lists
end

to setup
  let lists split-into-n-lists 3 read-file-into-list "data.txt"
  let a item 0 lists
  let b item 1 lists
  let c item 2 lists
end 
```

# vb6 - IDocHostUIHandler 缺少 Visual Basic 6 参考

> ID：10244856
> 
> 赞同：2
> 
> 时间：2012-04-20T10:54:46.713
> 
> 标签：vb6, vb6-migration

我正在将代码从 Visual Basic 6 迁移到 Visual Basic.NET，但在我能做到之前，我需要构建它。目前，由于 IDocHostUIHandler 的 MSHTML 中缺少引用，我无法构建它。具体来说，我使用 DOCHOSTUIFLAG_DIALOG 在线得到错误。我尝试添加不同的引用，但错误保持不变。如果有什么不同的话，我正在用 IE8 运行 XP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:33:15.150

MSDN 说`IDocHostUIHandler`接口是`mshtmhst.idl`在 Platform SDK 中定义的。我在任何 DLL 或类型库中都找不到此定义，因此您可能需要将 IDL 编译到您自己的库中才能注册。

您还需要确保没有列为“(MISSING)”的引用，因为这些会导致随机对象引用问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:17:14.333

在模块中试试这个

```
Public Enum DOCHOSTUIFLAG
    DOCHOSTUIFLAG_DIALOG = 1
    DOCHOSTUIFLAG_DISABLE_HELP_MENU = 2
    DOCHOSTUIFLAG_NO3DBORDER = 4
    DOCHOSTUIFLAG_SCROLL_NO = 8
    DOCHOSTUIFLAG_DISABLE_SCRIPT_INACTIVE = &H10
    DOCHOSTUIFLAG_OPENNEWUI = &H20
    DOCHOSTUIFLAG_DISABLE_OFFSCREEN = &H40
    DOCHOSTUIFLAG_FLAT_SCROLLBAR = &H80
    DOCHOSTUIFLAG_DIV_BLOCKDEFAULT = &H100
    DOCHOSTUIFLAG_ACTIVATE_CLIENTHIT_ONLY = &H200
    DOCHOSTUIFLAG_OVERRIDEBEHAVIORFACTORY = &H400
    DOCHOSTUIFLAG_CODEPAGELINKEDFONTS = &H800
    DOCHOSTUIFLAG_URL_ENCODING_DISABLE_UTF8 = &H1000
    DOCHOSTUIFLAG_URL_ENCODING_ENABLE_UTF8 = &H2000
    DOCHOSTUIFLAG_ENABLE_FORMS_AUTOCOMPLETE = &H4000
    DOCHOSTUIFLAG_ENABLE_INPLACE_NAVIGATION = &H10000
    DOCHOSTUIFLAG_IME_ENABLE_RECONVERSION = &H20000
    DOCHOSTUIFLAG_BROWSER = &H12
    DOCHOSTUIFLAG_DESKTOP = &H2E
End Enum 
```

# hibernate - java中带有hibernate和sqlite的不规则stackoverflow

> ID：10244859
> 
> 赞同：0
> 
> 时间：2012-04-20T10:55:06.957
> 
> 标签：hibernate, sqlite, stack-overflow

我有一个带有 Hibernate 和 SQLite 方言的 java 项目。此外，我有一个模型元素之间有很多链接。当我想在数据库中存储大量数据时，会出现不规则的堆栈溢出。有时它会起作用。有时它不起作用。这是为什么？

例外：

> 在 sun.nio.cs.SingleByte.withResult（未知来源）

```
at sun.nio.cs.SingleByte.access$000(Unknown Source)
at sun.nio.cs.SingleByte$Encoder.encodeArrayLoop(Unknown Source)
at sun.nio.cs.SingleByte$Encoder.encodeLoop(Unknown Source)
at java.nio.charset.CharsetEncoder.encode(Unknown Source)
at sun.nio.cs.StreamEncoder.implWrite(Unknown Source)
at sun.nio.cs.StreamEncoder.write(Unknown Source)
at java.io.OutputStreamWriter.write(Unknown Source)
at java.io.BufferedWriter.flushBuffer(Unknown Source)
at java.io.BufferedWriter.write(Unknown Source)
at java.io.Writer.write(Unknown Source)
at java.io.PrintStream.write(Unknown Source)
at java.io.PrintStream.print(Unknown Source)
at java.io.PrintStream.println(Unknown Source)
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:03:22.687

在java中，堆栈只能容纳一定数量的嵌套方法调用。因此，例如，如果您有一个大型树状结构并且树的高度大于最大堆栈大小，您将获得堆栈溢出。尽管堆栈溢出的最常见原因是您是否具有递归或循环依赖关系。

所以我给你的建议是找出你的数据结构中是否有可能存在循环依赖。

如果您发现您没有，但您的结构实际上很大，您应该考虑重新设计或拆分您的数据以使其更易于管理。作为最后的手段，可以增加你的筹码量。

# jquery - 使用 jQuery 分页更改每页的默认项目数？

> ID：10244860
> 
> 赞同：2
> 
> 时间：2012-04-20T10:55:08.163
> 
> 标签：jquery, jquery-pagination

我`jquery.dataTables.min.js`用于分页。默认一页显示 10 个数据。我想对显示 20、30 个数据的页面进行排序。

如何更改单页显示的数据数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:12:10.860

尝试使用

```
"iDisplayLength" : yourValue 
```

假设您需要显示 25 条记录，然后使用：

```
$(document).ready(function() {
$('#example').dataTable( {
"sPaginationType": "full_numbers",
"iDisplayLength" : 25
} );
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:35:30.340

你可以使用这样的东西

```
$(document).ready(function() {
                $('#myTable').dataTable({
                                    "aLengthMenu": [
            [25, 50, 100, 200, -1],
            [25, 50, 100, 200, "All"]
        ], 
                                    "iDisplayLength" : 50 
                                });
            } ); 
```

# twitter - 访问 Twitter 近期历史数据

> ID：10244864
> 
> 赞同：-1
> 
> 时间：2012-04-20T10:55:41.800
> 
> 标签：twitter

是否可以访问历史 Twitter 数据？

我想编写一个函数来访问与某些关键字匹配的推文，例如 Twitter 流 API 中的 FilterStream，但可以访问历史上创建的推文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:16:44.657

不它不是。

您所能做的就是使用搜索方法来获取最近匹配的推文。（如果关键字不受欢迎，则很少）或连接到流式 API 并等待（不久你就会有历史推文）

# validation - Symfony 2.0 验证器，Blank() 不起作用

> ID：10244871
> 
> 赞同：0
> 
> 时间：2012-04-20T10:56:15.010
> 
> 标签：validation, symfony

我是 Symfony 的新手，我遇到了以下问题。我想生成一个没有类的表单。我想在一个字段上添加一个 Blank() 验证器。见下文。

```
class searchPropertyType extends AbstractType
{
    public function getDefaultOptions(array $options)
    {
        $collectionConstraint = new Collection(array(
            'keywords' => new blank()
        ));

        return array('validation_constraint' => $collectionConstraint);
    }

    public function buildForm(FormBuilder $builder, array $options)
    {       
        $builder
            ->add('keywords')
            ->add('neighborhood')
            ->add('price_min')
            ->add('price_max')
            ->add('type')
            ->add('date_from' , 'date')
            ->add('date_to' , 'date')
        ;

    }

    public function getName()
    {
        return 'searchProperty';
    }
} 
```

表单已正确显示，但我仍然无法发送表单，我收到 HTML5 警报，说我必须填写此字段。

任何的想法？我整天都在努力，这让我发疯。

非常感谢您有时间提供帮助 ;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:19:29.847

要禁用 HTML5 客户端验证`'required' => false`，请添加`getDefaultOptions`：

```
 public function getDefaultOptions(array $options)
    {
        $collectionConstraint = new Collection(array(
            'keywords' => new blank()
        ));

        return array(
            'validation_constraint' => $collectionConstraint,
            'required' => false
        );
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:03:25.183

```
public function buildForm(FormBuilder $builder, array $options) {
        $builder

                ->add('neighborhood','text',array('required' => false,))
                ->add('price_min','text',array('required' => false,))
               ->add('date_from', 'date', array('widget' => 'single_text', 'format' => 'dd MMM yyyy', 'required' => false))
              );
    } 
```

添加`required=>false`

希望这可以帮助。

# php - 从其他站点获取数据（php & GET）

> ID：10244872
> 
> 赞同：0
> 
> 时间：2012-04-20T10:56:16.270
> 
> 标签：php, curl, web-scraping

我正在尝试从站点获取数据并能够对其进行操作以将其显示在我自己的站点上。
该站点包含一个带有**刻度的****表格**，并且每隔几个小时更新一次。 这是一个例子：[http ://www.astynomia.gr/traffic-athens.php](http://www.astynomia.gr/traffic-athens.php)

 **每个人都可以使用这些数据，我会在我自己的网站上提到它们以确保安全。

我读过一些关于 php 的 cURL 但我不知道这是否是要走的路。
任何人都可以提供的任何指针/教程或代码，以便我可以从某个地方开始，这将非常有帮助。还有关于如何在网站更新后立即获得通知的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:58:42.677

如果要爬取页面，请使用[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/) for PHP 之类的东西。这将满足您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:12:15.770

首先，您的网络主机/本地主机应该启用 php_curl 扩展。

首先，您应该[在这里](http://php.net/manual/en/book.curl.php)阅读一些内容。如果你想直接跳进去，这里有一个简单的函数[Why I can't get website content using CURL](https://stackoverflow.com/questions/8697184/why-i-cant-get-website-content-using-curl)。您只需更改变量 $url,$timeout 的值

最后，要每 2 小时获取一次更新的数据，您必须将脚本作为 cronjob 运行。请参考这篇文章 [PHP - 好的 cronjob/crontab/cron 教程或书籍](https://stackoverflow.com/questions/3959099/php-good-cronjob-crontab-cron-tutorial-or-book)**

# coldfusion - 在一个会话中管理多个帐户并打开多个选项卡

> ID：10244874
> 
> 赞同：0
> 
> 时间：2012-04-20T10:56:30.247
> 
> 标签：coldfusion, session-variables, multi-user, browser-tab

**设想：**

我有一个管理应用程序，它管理另一个应用程序的用户帐户。现在我想`Click here to login with user1`在管理应用程序中放置一个用户特定链接（例如 ），允许管理员在单独的浏览器窗口或选项卡（`target="_blank"`）中直接与用户登录。

**问题：**

当管理员单击两个或更多链接并打开两个 tab1=user1 和 tab2=user2 的选项卡时，最后单击的选项卡会覆盖所有其他选项卡的会话变量。当然......这就是会话的工作方式，但我想知道是否有一种方法可以让管理员在多个选项卡中通过一个会话管理多个用户界面？但是我看不到在浏览器中识别特定选项卡的可能性，因此我可以说“在 tab1 中是 user1 而在 tab2 中是 user2 登录...

**问题：** 有没有人做过类似的事情并喜欢分享解决这个问题的基本想法？

* * *

**编辑：**

一种可能的解决方案是使用用户 ID 将参数添加到 URL 并将其传递到每个页面，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:37:47.580

正如您的编辑指出的那样，执行此操作的方法是使用指定用户应该是谁的 url 变量。

这种方法存在许多安全问题。

我假设您的初始链接正在进行某种安全检查，以确保用户的初始“登录”是授权请求。您需要为此方法执行类似的操作。如果您的初始请求类似于`http://example.com/page.cfm?userid={id}&authtoken={encryptedtoken}`我会将该用户标识作为管理员可以模拟的有效用户标识放入会话范围。他们点击的链接越多，他们可以模拟的用户就越多。在后续请求中，您`userid`根据会话中的允许列表检查请求，并允许或拒绝模拟。

您还需要更新站点上的所有链接，以便它们在其中包含用户 ID。更简单的方法是欺骗和使用 jQuery 或类似的东西来重写所有带有`userid`附加的内部 url。您将根据上述检查有条件地包含该 javascript。

`userid`最后，如果它不是一个完全锁定的站点，您可能希望阻止这些包含 的 url出现在搜索引擎中。您要么需要使用规范 url 来删除`userid`，要么设置 x-robots 标头以告诉搜索引擎不要索引`userid`已指定 的 url；或两者。

这是在同一浏览器中为多个用户获取不同“会话”的最原始方法。但是，如果您将会话范围用于任何有意义的事情，您就会遇到问题，因为每个选项卡都会尝试覆盖另一个选项卡。您需要在每个请求上覆盖正常的站点会话变量，或者您需要在会话范围内为使用的每个用户标识创建不同的结构。这有多少问题取决于您的应用程序。

这是一件可行的事情，但可能比你希望的要多得多。

另一种选择是让管理员使用[具有多个配置文件的 Google Chrome，](http://support.google.com/chrome/bin/answer.py?hl=en&answer=2364824)并将登录 URL 复制并粘贴到不同的配置文件窗口中。对他们来说有点不便，但对你来说却少了很多工作。

# html - 使用行跨度的 HTML 表头

> ID：10244877
> 
> 赞同：8
> 
> 时间：2012-04-20T10:56:42.720
> 
> 标签：html, html-table

```
<html>
<body>

<TABLE border="1" ">

<CAPTION><EM>A test table with merged cells</EM></CAPTION>

<TR><TH rowspan="2"><TH colspan="2"> Average
    <TH rowspan="2">Red<BR>eyes </TH>
</TR>
<TR>
  <TH>height</TH><TH>weight</TH>
</TR>
<TR> 
  <TD>1.9<TD>0.003<TD>40%</TD>
</TR>
<TR> 
  <TD>1.7<TD>0.002<TD>43%</TD>
</TR>

</TABLE>
</body>
</html> 
```

我得到的输出是标题的第一个元素为空白

```
 A test table with merged cells
/-----------------------------------------\
|          |      Average      |   Red    |
|          |-------------------|  eyes    |
|          |  height |  weight |          |
|-----------------------------------------|
|  1.9     | 0.003   |   40%    |         |
|-----------------------------------------|
|  1.7     | 0.002   |   43%    |         |
\-----------------------------------------/ 
```

预期产出

```
 A test table with merged cells
/----------------------------- \
|      Average      |   Red    |          
|-------------------|  eyes    |          
|  height |  weight |          |          
|------------------------------|
|  1.9     | 0.003   |   40%   |          
|------------------------------|
|  1.7     | 0.002   |   43%   |          
\------------------------------/ 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T11:03:51.467

删除代码中多余的 TH

[http://jsfiddle.net/yqQsP/](http://jsfiddle.net/yqQsP/)

```
<html>
<body>

<TABLE border="1" >

<CAPTION><EM>A test table with merged cells</EM></CAPTION>

<TR>
    <TH colspan="2"> Average</TH>
    <TH rowspan="2">Red<BR>eyes </TH>
</TR>
<TR>
  <TH>height</TH><TH>weight</TH>
</TR>
<TR> 
  <TD>1.9<TD>0.003<TD>40%</TD>
</TR>
<TR> 
  <TD>1.7<TD>0.002<TD>43%</TD>
</TR>

</TABLE>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-20T11:22:03.193

虽然[nauphal](https://stackoverflow.com/q/10244877/#answer-10245001)已经解决了您的问题，但我只是想就您的 HTML 结构提出一些建议。

首先，大写不是强制性的（HTML 不区分大小写），但如果您切换到 XHTML，小写***是***强制性的（坦率地说，看起来也更好一些）。

其次，因为一个`tbody`元素总是由浏览器插入（我不确定所有客户端，但肯定是可视 Web 客户端）如果还没有一个元素，通常最好包装那些代表“主体”的元素a 中的表格`tbody`，这样您就可以将`th`元素行分配给 a `thead`，这会稍微增加语义（我不确定这有多有用，但每一点都有帮助）。

第三，记得关闭你的标签：

```
<TR> 
  <TD>1.9<TD>0.003<TD>40%</TD>
</TR> 
```

真的应该是：

```
<TR> 
  <TD>1.9</TD><TD>0.003</TD><TD>40%</TD>
</TR> 
```

同样，它不是强制性的（我相信在 HTML 4 中），但它减少了由于在标记周围有额外的、未关闭的开始标签而引入的错误的范围。

第四，这只是挑剔，可能，如果您想设置整个`caption`强调文本的样式，则更容易避免插入额外的标记并直接设置样式`caption`。

也就是说，这是我的表格版本和一些 CSS：

```
<table>
    <caption>A test table with merged cells</caption>
    <theader>
        <tr>
            <th colspan="2">Average</th>
            <th rowspan="2">Red Eyes</th>
        </tr>
        <tr>
            <th>height</th>
            <th>weight</th>
        </tr>
    </theader>
    <tbody>
        <tr>
            <td>1.9</td>
            <td>0.003</td>
            <td>40%</td>
        </tr>
        <tr>
            <td>1.7</td>
            <td>0.002</td>
            <td>43%</td>
        </tr>
    </tbody>
</table>​ 
```

CSS：

```
caption {
    font-style: italic;
}

td,
th {
    border: 1px solid #000;
    padding: 0.2em;
}​ 
```

[JS小提琴](http://jsfiddle.net/davidThomas/2GThw/1/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T11:04:58.297

更改第一行

```
<TR>
    <TH colspan="2"> Average</TH>
    <TH rowspan="2">Red<BR>eyes </TH>
</TR> 
```

它会解决问题

# java - JPA 1 个关系表，2 个独立类，使用带有 @OneToMany 的公共类

> ID：10244878
> 
> 赞同：0
> 
> 时间：2012-04-20T10:56:50.153
> 
> 标签：java, hibernate, jpa

基本上，我想对公司和个人添加地址。地址是独立的实体。

公司可以有一个地址上下文，它使用与个人地址上下文相同的地址实体

AddressContext 给出与个人相关的地址含义，例如“我的家庭地址”

java类：

```
public class Address {
}

public class AddressContext {
    private Address address;
    private String name;
}

public class Individual {
   @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
   private Set<AddressContext> addresseContexts;
}

public class Company {
   @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
   private Set<AddressContext> addresseContexts;
} 
```

所需数据库 address_context 数据库表

```
CREATE TABLE `address_Context` (
   `ID` bigint(20) NOT NULL AUTO_INCREMENT,
   'address_id bigint(20) NOT NULL, 
   'RELATED_ITEM_ID bigint(20) NOT NULL,
   'RELATED_ITEM_TYPE varchar(50) NOT NULL,
   'NAME' varchar(5) 
); 
```

基本上有以下

```
1, 1, 1, Individual, 'John's House';
2, 2, 1, Company, 'Depoy'; 
```

实际发生的是正在创建单独的表

```
companies_address_contexts
individuals_address_contexts 
```

以上可能吗？我也不想继承 AddressContext

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:16:42.307

您不想将特定地址限制为实体类型（个人/公司）。想想个体经营者使用家庭地址*作为*公司地址的（边缘）案例。或者将多租户单元转换为办公综合体的情况。您得到要点地址应该是完全独立的实体，您系统中的其他实体然后通过*关联表*引用这些实体。

在您的情况下，无论如何都会生成关联表，您只需要进行一些小的重构即可在代码中使用它们（一种形式）。像这样的东西：

```
@Entity
public class Address {
    // address fields etc
}

@Entity
public class Individual {
   @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
   @JoinTable(name = "individual_addresses", 
       joinColumns = { @JoinColumn(name = "individual_id", unique = true) }, 
       inverseJoinColumns = { @JoinColumn(name = "address_id") })
   private Set<Address> addresses;
}

@Entity
public class Company {
   @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
   @JoinTable(name = "company_addresses", 
       joinColumns = { @JoinColumn(name = "company_id", unique = true) }, 
       inverseJoinColumns = { @JoinColumn(name = "address_id") })
   private Set<Address> addresses;
} 
```

# scala - Scala Lift - Mongodb int 字段值变为负数

> ID：10244879
> 
> 赞同：0
> 
> 时间：2012-04-20T10:56:53.807
> 
> 标签：scala, mongodb, lift

我有以下模型：

```
class Recording private() extends MongoRecord[Recording] with ObjectIdPk[Recording] {

    def meta = Recording

    object time extends IntField(this)
    object fulltime extends IntField(this)

} 
```

当我执行以下操作时：

```
var time = System.currentTimeMillis() / 1000
var fulltime = System.currentTimeMillis()

Recording.createRecord.
time(time.toInt).
fulltime(fulltime.toInt).
save 
```

“时间”字段正确存储为“1334919100”，但“全职”字段保存为“-815728745”，这是怎么回事？我需要做些什么来接受完整毫秒长度的时间戳吗？

非常感谢任何帮助，在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:59:59.297

`System.currentTimeMillis`返回一个`Long`。你很幸运，它适用于这种`time`情况。在`fulltime`您遇到整数溢出时。（这已经发生在`toInt`调用中。）`LongField`为两个对象选择。

# java - 代理服务器配置

> ID：10244881
> 
> 赞同：1
> 
> 时间：2012-04-20T10:56:57.860
> 
> 标签：java, apache, proxy, httpserver

我被指派实现（或更好地配置）一种 http 代理服务器。服务器应支持如下所述的进程：

- 用户在其浏览器中打开一个具有以下结构的 URL：http://:/resource_name

- 代理服务器验证传入 http 请求的 URL 中的资源名称，并确定它应该将来自客户端的原始请求转发到的 Web 资源的 URL

- 代理服务器转发原始请求，等待它从外部网络服务器获得答案，然后将其发送回用户

我在java中工作，但我不想自己玩套接字来实现代理服务器。相反，我想使用 apache http 服务器。有谁知道是否可以使用 apache http 服务器在配置级别完成这样的任务？如果是这样，怎么做？

预先感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:07:46.300

Apache 不是用 java 编写的。[使用Tomcat](http://tomcat.apache.org)或[Jetty](http://www.eclipse.org/jetty/)的机会很大。

您将需要实现一个带有 Servlet 拦截所有请求的 webapp，然后在 Servlet 中处理您的所有自定义逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:51:05.130

您可以在 Apache 中使用模块 mod_proxy（转发您的请求）和 mod_rewrite（将您的外部 URL 映射到应用程序服务器上的 URL）来执行此操作

[http://httpd.apache.org/docs/2.0/mod/mod_proxy.html](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html)

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# jquery - 如何使用 jquery jcarousel 正确显示图像

> ID：10244882
> 
> 赞同：0
> 
> 时间：2012-04-20T10:57:05.790
> 
> 标签：jquery, ruby-on-rails

嗨，我正在使用 jquery jCarousel 来显示图像，但问题是我已将其属性设置为可见：4

```
 {
    btnPrev: null,
    btnNext: null,
    btnGo: null,
    mouseWheel: false,
    auto: null,

    speed: 200,
    easing: null,

    vertical: false,
    circular: true,
    visible: 4,
    start: 0,
    scroll: 1,

    beforeStart: null,
    afterEnd: null
} 
```

它仅在存在 4 个图像时才显示图像。如果图像少于 4 个，则它什么也不显示，我如何实现此功能以显示小于 4 个的任意数量的图像而不设置其可见属性。

提前致谢........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:41:27.077

您是否正确包含了 JS 文件？

# c# - ExecuteQueryin linq：超时已过期。操作完成前超时时间已过或服务器无响应

> ID：10244888
> 
> 赞同：3
> 
> 时间：2012-04-20T10:57:18.380
> 
> 标签：c#, linq, sql-server-2008

执行 datacontext.ExecuteCommand(objectname) 时出错

错误：

System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。该语句已终止。示例代码：

```
Datacontext context = new Datacontext();
tablename tb=new tablename();

string DeleteQuery="delete from table A";
context.ExecuteCommand<tb>(DeleteQuery);
DeleteQuery=string.empty;

string InsertQuery="Insert into table B(a,b,c,d)Select table from C Union All Select Table from D";
context.ExecuteCommand<tb>(InsertQuery);
InsertQuery=string.empty; 
```

在这里执行插入查询时出现错误 System.Data.SqlClient.SqlException: Timeout expired。在操作完成之前超时时间已过或服务器没有响应。该语句已终止。

**错误页面如下**

## “/Portal”应用程序中的服务器错误。

超时已过。在操作完成之前超时时间已过或服务器没有响应。该语句已终止。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。该语句已终止。

源错误：

第 914 行：其中 ft.IsDeleted = 0 且 ym.IsDeleted = 0 且 ym.IsApproved = 1")；第 915 行：第 916 行：dc.ExecuteQuery(InsertCommand)；第 917 行：InsertCommand = string.Empty；第 918 行：

源文件：d:\Website\IDCCircle_Staging\Portal\Default.aspx.cs 行：916

堆栈跟踪：

[SqlException (0x80131904): 超时。在操作完成之前超时时间已过或服务器没有响应。语句已终止。] System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +2062078 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5050204 System.Data.SqlClient.TdsParser .ThrowExceptionAndWarning() +234 System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2275 System.Data.SqlClient.SqlDataReader.ConsumeMetaData() +33 System.Data。 SqlClient.SqlDataReader.get_MetaData() +86 System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds,

* * *

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-20T11:12:48.873

如果表 C 和 D 包含很多行，则运行插入可能需要比默认命令超时（30 秒）更长的时间。在插入命令之前添加这一行：

```
context.CommandTimeout = 240  // set timeout to 4 minutes 
```

顺便说一句，你应该在完成后处理上下文。最简单的方法是：

```
using (Datacontext context = new Datacontext())
{
    // your code goes here
} 
```

# visual-studio-2010 - VSIX：打开标准“添加参考”对话框

> ID：10244899
> 
> 赞同：2
> 
> 时间：2012-04-20T10:57:54.850
> 
> 标签：visual-studio-2010, vsix

我想从我的 VS 扩展中打开标准的“添加参考”对话框，激活“浏览”选项卡并设置为特定文件夹。这是可行的吗？

# c - CRT 与共享库和应用程序的链接

> ID：10244900
> 
> 赞同：1
> 
> 时间：2012-04-20T10:57:57.867
> 
> 标签：c, windows, dll, crt, linkage

Windows 应用程序动态链接 CRT。在应用程序执行其部分代码后，它会加载共享库。共享库与 CRT 静态链接。

**我的问题是：**

如果应用程序对“CRT 状态”进行了一些更改（例如在某个文件中重新打开标准输出），这些更改对 dll 代码是否有效？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:00:14.683

不，静态链接的 CRT 完全独立于动态加载的 CRT。文件表不同，堆不同，一切都不同。

# wcf - 在 X++ 中使用 WCF 通道

> ID：10244903
> 
> 赞同：0
> 
> 时间：2012-04-20T10:58:08.070
> 
> 标签：wcf, microsoft-dynamics

我正在用 X++ 开发一个类。在这个类中，我需要使用 C# 编写的 WCF 自定义通道向第三方应用程序发送消息。

所以我的问题是：1）是否可以创建和使用 WCF 自定义通道在 X++ 方法中发送消息？

2) 在 WCF 中，通道是使用通道工厂创建的。它们被声明为 `IChannelFactory<IOutputChannel> fact;`可以在 X++ 中完成吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:10:14.427

您可以通过在 C# 中编写 WCF 服务客户端，然后从 X++ 调用 C# WCF 客户端代码，在 Ax 中实现此功能。您可以拥有一个在 C# 中同时执行 #1 和 #2 的包装器，并公开一个简单的非泛型接口以供 X++ 使用。这也是[从 X++ 使用外部 WCF 服务的推荐方式](http://technet.microsoft.com/en-us/library/hh500185.aspx)

请注意，在 Ax2009 中，您可以选择从 Ax 内部创建服务引用。为了更轻松地从 Ax2009 升级到 Ax2012，最好用 C# 编写 WCF 客户端，然后添加对客户端 dll 的引用——这样升级时需要更改的代码就会更少。

此外，有关此主题的一些 MSDN 内容已过时。例如[，这个添加服务参考如何](http://msdn.microsoft.com/en-us/library/cc636424.aspx)是完全错误的，不适用于 Ax2012 - 您可以通过查看它提到的菜单项来验证这一点，甚至在 Ax2012 中都不存在。

# jquery-ui - Bootstrap 类似 jQuery UI 主题

> ID：10244909
> 
> 赞同：4
> 
> 时间：2012-04-20T10:58:46.720
> 
> 标签：jquery-ui, twitter-bootstrap

从长远来看，我想从 jQuery UI 迁移到 Twitter Bootstrap。

*   我没有使用 jQuery UI 的所有功能，只是其中的一部分。它太重了。

*   我将能够利用 jQUI 不提供的 Bootstrap 的响应式设计页面网格代码

*   我知道 jQuery UI 和 Twitter 不兼容（目前），但我不打算并行运行它们

但是，第一步是让网站样式看起来更像默认的 Twitter Bootstrap 样式。是否有任何类似于 jQuery UI 的 Bootstrap 主题或任何使用与 Bootstrap 相同的 LESS 文件的主题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T11:27:28.900

有一个正在进行的项目试图在 Bootstrap 样式下混搭这两个框架，尽管它仍在工作中，但我相信它应该在此期间完成。

这是[项目页面](https://github.com/jquery-ui-bootstrap/jquery-ui-bootstrap)

# wcf - 停止 WCF 将空 ICollection 反序列化为零容量数组

> ID：10244910
> 
> 赞同：5
> 
> 时间：2012-04-20T10:58:47.673
> 
> 标签：wcf, serialization, entity-framework-4.1

我在使用 WCF 和 Entity Framework 4.1 POCO 对象（使用 T4 模板生成）时遇到问题。我的基本问题是，当从我的客户端向服务发送 POCO 对象时，WCF 将 ICollection 类型的成员变量反序列化为固定大小的数组。

在客户端，我可以告诉 Visual Studio 使用 IList 而不是 T[] - 但我在服务器端看不到任何这样的选项。

这会导致一些问题没有尽头，例如将这些对象持久化回数据库。

有没有办法告诉 WCF 将 ICollection（或任何数组）反序列化为什么对象类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T08:33:50.733

我很惊讶更多的人没有遇到这个问题，因为当您尝试通过 WCF 使用 EF T4 生成的 POCO 对象时，它会让您大吃一惊。具体来说，我得到的错误是这样的：

> 异常：“无法在实体类型 Datalayer.Customers 上设置字段/属性订单。有关详细信息，请参阅 InnerException。”
> 
> InnerException：“无法将项目添加到 'Datalayer.Order[]' 类型的固定大小数组中。”

无论如何，我能想出的唯一解决方案就是您提到的那个，即修改 T4 模板以使用 HashSet 而不是 ICollection。没有让我觉得最干净，但它似乎有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T21:14:57.320

我正在使用 Entity Framework 6，我能够通过在我的 T4 模板中进行以下更改来解决此问题。

我更改了以下行，它在其中创建导航属性以使用 List 而不是来自的集合

```
navProp.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.Many ? ("ICollection<" + endType + ">") : endType, 
```

至

```
navProp.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.Many ? ("List<" + endType + ">") : endType, 
```

然后我更改了在构造函数中设置导航属性的代码，通过添加对 .ToList() 的调用将默认哈希集转换为列表。这条线

```
this.<#=code.Escape(navigationProperty)#> = new HashSet<<#=typeMapper.GetTypeName(navigationProperty.ToEndMember.GetEntityType())#>>(); 
```

改为

```
this.<#=code.Escape(navigationProperty)#> = new HashSet<<#=typeMapper.GetTypeName(navigationProperty.ToEndMember.GetEntityType())#>>().ToList(); 
```

HashSet<>.ToList() 方法是一个扩展，因此为了使该扩展方法可用，我通过修改 UsingDirectives 方法添加了 using System.Linq 语句：

```
 public string UsingDirectives(bool inHeader, bool includeCollections = true)
{
    return inHeader == string.IsNullOrEmpty(_code.VsNamespaceSuggestion())
        ? string.Format(
            CultureInfo.InvariantCulture,
            "{0}using System;{1}" + Environment.NewLine +
            "{0}using System.Linq;" + 
            "{2}",
            inHeader ? Environment.NewLine : "",
            includeCollections ? (Environment.NewLine + "using System.Collections.Generic;") : "",
            inHeader ? "" : Environment.NewLine,
            Environment.NewLine)
        : "";
} 
```

# jquery - jquery循环插件坏显示

> ID：10244912
> 
> 赞同：0
> 
> 时间：2012-04-20T10:58:51.950
> 
> 标签：jquery, jquery-plugins

我对循环插件有一些问题。

在 Firefox 中它第一次看起来不错，但是如果你刷新页面，动画就会越过 html 表。如果您进入地址栏并提示输入，则再次运行良好。

在 IE9 中，它在“Location avec chauffeur”选项卡上失败。

我使用的代码非常简单：

```
$('.animate').cycle({
            fx: 'all', 

        }); 
```

在页面中类似于：

```
<div class="animate">
  <img src="images/1.jpg" width="400" />                   
  <img src="images/2.jpg" width="400" />                   
  <img src="images/3.jpg" width="400" />                   
  <img src="images/4.jpg" width="400" />                   
  <img src="images/5.jpg" width="400" />                   
  <img src="images/6.jpg" width="400" />                   
</div> 
```

页面：[http ://www.portatout.net/Pro/Vitrines/Lift-Liege/](http://www.portatout.net/Pro/Vitrines/Lift-Liege/)

PS：我知道 HTML 有点脏，但有人要求我用动态的东西替换 GIF 动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:53:22.940

根据您的问题，您似乎只想使用淡入淡出动画。删除 fx:all 部分，插件将默认仅淡入和淡出您的图像，而不是使用不同的动画来为桌子上的对象设置动画。

所有动画列表：http: [//jquery.malsup.com/cycle/browser.html](http://jquery.malsup.com/cycle/browser.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:52:24.103

我发现了问题（之前可能是由错误的 HTML 代码引起的）：

当图像未全部加载时调用 cycle() 方法，因此加载时某些位置值是错误的。

# ruby-on-rails - 我想在 Rails 的 div 中渲染控制器/动作

> ID：10244922
> 
> 赞同：2
> 
> 时间：2012-04-20T10:59:28.157
> 
> 标签：ruby-on-rails, module

假设我有一个名为“Statistics”或“Friends”的 300X300px 块，该块需要一些数据库对象和逻辑操作，这些对象和逻辑操作通常应该放在控制器中，它准备了一些实例变量，这些变量将很好地显示在它的视图/部分中。

可以从我网站中的许多页面调用此块，跨越各种控制器和操作。

我怎样才能解决这个问题，而不需要在控制器中重复代码，也不在视图中放置逻辑。

一个糟糕的解决方案是将 SQL 查询放在视图中，或者使用 iframe，其中单个控制器/操作生成预期的 HTML。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:11:02.903

我认为这是你应该在辅助方法中做的事情。为您使用部分变量而不是实例变量可能是一个好主意，`locals`以免污染视图的命名空间：

```
module ApplicatonHelper

  def friends_block
    friends = Friend.where(...)
    # Assuming the 'friends_block' partial is in a directory 'app/views/shared'
    render :partial => "shared/friends_block", :locals => {:friends => friends}  
  end

end 
```

部分将`friends_block`使用局部变量：

```
<div id="friends_block">
  <% friends.each do |s| %>
    ...
  <% end %>
</div> 
```

其他视图将只使用辅助方法，而不必担心其他任何事情：

```
<%= friends_block %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T11:50:15.030

看看 Cells gem： [https ://github.com/apotonick/cells](https://github.com/apotonick/cells)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T11:17:28.270

我将块放入部分中，并确保该块所需的实例变量加载`before_filter`到相关控制器和操作上。

# html - 输入文本自动宽度填充 100% 其他元素浮动

> ID：10244927
> 
> 赞同：16
> 
> 时间：2012-04-20T10:59:48.697
> 
> 标签：html, css, css-float

我有以下搜索框布局：

```
<div id="emulating_variable_width">
  <form id="srxForm" method="post">
     <div id="qsrxSearchbar">            
         <div id="scope"> Person Name </div>
         <input type="text" id="theq" title="Search">
         <button id="btnSearch" type="button">Search</button>
      </div>
  </form>    
</div>​ 
```

（为了显示目的，它非常简化）

*   “范围”中的标题是长度可变的文本

我想要的是让输入文本元素填充所有可用空间（即黄色空间），同时将搜索按钮保持在右侧。

[CSS 的完整示例在小提琴中](http://jsfiddle.net/v7YTT/)

在 IE7+、FF、Safari 等中完成解决方案的最简单方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-20T11:34:26.547

像这样？

**演示：http: [//jsfiddle.net/v7YTT/19/](http://jsfiddle.net/v7YTT/19/)**

HTML：

```
<div id="emulating_variable_width">
   <form id="srxForm" method="post">
       <div id="qsrxSearchbar"> 
           <button id="btnSearch">Search</button>             
           <label id="scope"> Person Name </label>
           <span><input type="text" id="theq" title="Search" /></span>
      </div>
   </form> 
</div>​ 
```

CSS：

```
#qsrxSearchbar
{
    width: 500px;
    height: 100px;
    overflow: hidden;
    background-color: yellow;
}

#qsrxSearchbar input
{
    width: 100%
}

#qsrxSearchbar label
{
    float: left
}

#qsrxSearchbar span 
{
    display: block;
    overflow: hidden;
    padding: 0 5px
}

#qsrxSearchbar button 
{
    float: right
}

#qsrxSearchbar input, .formLine button
{ 
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:05:44.947

嘿，您可以像这样在输入字段中使用焦点属性

**CSS**

```
 #emulating_variable_width{
    width:500px;

    height:100px;
    background-color:yellow;
}
input {
    width:auto;
    /*width:100%;*/
    float:left;
    width:100px;
    font-size: 17px;
}
#scope{float:left;}
button{float:left;}

input:focus{
width:200px;
} 
```

**HTML**

```
 <div id="emulating_variable_width">
   <form id="srxForm" method="post">
         <div id="qsrxSearchbar">            
             <div id="scope"> Person Name </div>
             <input type="text" id="theq" title="Search">
             <button id="btnSearch" type="button">Search</button>
          </div>
    </form>    
</div> 
```

现场演示[http://jsfiddle.net/rohitazad/v7YTT/1/](http://jsfiddle.net/rohitazad/v7YTT/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T11:13:46.203

你需要这样的东西：

```
#emulating_variable_width{
    width:500px;

    height:100px;
    background-color:yellow;
}

input {
    width:320px;
    /*width:100%;*/
    float:left;
    font-size: 17px;
}
#scope{float:left;}
button{float:left;} 
```

# php - 链接提取脚本是 PHP 中的大小写问题

> ID：10244929
> 
> 赞同：0
> 
> 时间：2012-04-20T10:59:49.587
> 
> 标签：php, fopen

我创建了一个循环来从谷歌中提取特定链接。但最后，当我运行此脚本时，它会创建没有任何链接的空文件。

```
for ($n=0;$n<500;$n+=10) 
{
$country = $_GET['country']; 
    // Country Changing array to scan through different countries.
        $google = array (
            "default" => array("google.com" , "countryUS"),
            "NZ" => array("google.co.nz" , "countryNZ"),
            "UK" => array("google.co.uk" , "countryUK|countryGB"),
            "AU" => array("google.com.au" , "countryAU")        
        );
// Variables for fopen
    $URL = 'www.'.$google[$country][0];
    $PORT = "80";
    $TIMEOUT = 30;
    $Q = $_GET['query'];

// Google String
$GET = '/search?q='.urlencode($Q).'&hl=en&cr='.$google[$country][1].'&tbs=ctr:'.$google[$country][1].'&start='.$n.'&sa=N';
    $fp = fsockopen($URL, $PORT, $errno, $errstr, $TIMEOUT);
    if (!$fp) 
    {
        echo "Error connecting to {$URL}<br>\n";
    } else 
    {
        $out = "GET $GET HTTP/1.1\r\n";
        $out .= "Host: $URL\r\n";
        $out .= "Connection: Close\r\n\r\n";
        fwrite($fp, $out);
        $buffer = '';
        while (!feof($fp)) 
        {
            $buffer .= fgets($fp, 128);
        }
        fclose($fp);
        write($SITEs, filter($buffer));

    }
} 
```

如果我做错了什么，请告诉我。

注意：**fopen 在我的 PHP 中是开启的。**

添加：

```
 function write($A, $B) {
        @touch($A);
        $C = fopen($A, 'a');
        fwrite($C, $B);
        fclose($C);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:02:31.983

您还没有打开要写入的文件！

此外，没有 PHP 功能`write()`

# c - DLL 中的堆错误

> ID：10244931
> 
> 赞同：1
> 
> 时间：2012-04-20T10:59:56.863
> 
> 标签：c, dll, malloc

我正在寻找一些关于 C dll 编程的帮助。当我从 dll 中免费调用时，我在 Visual Studio 中遇到错误。该程序在 IDE 中的调试模式下运行良好，但是当我尝试将其作为“不调试启动”执行时，程序崩溃了。我通过调试读到，堆是共享的，这可能解释了为什么代码可以使用 F5 而不是 Ctrl-F5 运行良好。它是否正确？？

我四处搜索，我了解到通过 dll-exe 边界传递动态分配的内存是危险的，但是当我调用 malloc 并从同一个 dll 中释放时，这应该不是问题。我已经发布了下面的代码。任何帮助将不胜感激。请注意，此代码适用于我的 Linux 机器，我只是试图将其移植到 Windows 以获得在 Windows 中的编程经验。谢谢

```
#ifndef HASHTABLE_H
#define HASHTABLE_H

// The following ifdef block is the standard way of creating macros which make exporting 
// from a DLL simpler. All files within this DLL are compiled with the HASHTABLE_EXPORTS
// symbol defined on the command line. This symbol should not be defined on any project
// that uses this DLL. This way any other project whose source files include this file see 
// HASHTABLE_API functions as being imported from a DLL, whereas this DLL sees symbols
// defined with this macro as being exported.
#ifdef HASHTABLE_EXPORTS
#define HASHTABLE_API __declspec(dllexport)
#else
#define HASHTABLE_API __declspec(dllimport)
#endif

#ifdef __cplusplus
extern "C" {
#endif

/**
  * This is a naive implementation
  * of a hashtable
  */

typedef struct node {
    struct node *next;
    char *value;
    char *key;
} Node;

typedef struct hashtable {
    struct node **nodes;
    int num_elements;
    int size;
    int (*hash_function)(const char * const);
} Hashtable_str;

// Construction and destruction
HASHTABLE_API void tbl_construct(Hashtable_str **table);
HASHTABLE_API void tbl_destruct(Hashtable_str *table);

// Operations
HASHTABLE_API int tbl_insert (Hashtable_str *table, const char * const key, const char * const element); // return the key
HASHTABLE_API int tbl_remove(Hashtable_str *table, const char * const key);
HASHTABLE_API char * tbl_find(Hashtable_str *table, const char * const key); // return the element
HASHTABLE_API int size(Hashtable_str *table); // Return the size

// default hash function
int def_hash(const char * const key);

#ifdef __cplusplus
}
#endif

#endif 
```

这是实现代码

```
// hashtable.cpp : Defines the exported functions for the DLL application.
//

#include "stdafx.h"
#include "hashtable.h"
#include <stdlib.h> // for memcpy
#include <stdio.h>
#include <string.h>

#define SIZE 100

int def_hash(const char * const key)
{
    // simply sum the ascii
    // values and take modulo
    // 100
    //int i;
    //int sum;
    //sum = 0;
    //for (i=0; key[i] != '\0'; i++)
    //    sum += key[i];
    //return sum % SIZE;

    return 0;
}

// construct a hashtable and return a pointer
HASHTABLE_API void tbl_construct(Hashtable_str **tbl)
{
    int i;
    Hashtable_str *tbl_ptr;
    *tbl = (Hashtable_str*) malloc (sizeof(Hashtable_str*));
    tbl_ptr = *tbl;

    tbl_ptr->nodes = (Node**) malloc (SIZE * sizeof(Node*));
    for (i=0; i < SIZE; i++) tbl_ptr->nodes[i] = NULL;
    tbl_ptr->hash_function = &def_hash;
    tbl_ptr->num_elements = 0;
    tbl_ptr->size = SIZE;
}

HASHTABLE_API void tbl_destruct(Hashtable_str *tbl)
{
    void free_tbl_node(Node*); // declare the release function

    int i;
    for (i=0; i < tbl->size; i++)
    {
        if (tbl->nodes[i] != NULL)
            free_tbl_node(tbl->nodes[i]);
    }
}

void free_tbl_node(Node *curr_node)
{
    if (curr_node->next != NULL)
        free_tbl_node(curr_node->next);

    free(curr_node->value);
    curr_node->value = NULL;
    free(curr_node->key);
    curr_node->key = NULL;
    //free(curr_node);

    //Node *temp = NULL;
    //Node *temp2 = NULL;

    //temp = temp2 = curr_node;
    //while (temp->next != NULL)
    //{
    //    temp2=temp->next;
    //    free(temp->key);
    //    free(temp->value);
    //    free(temp);
    //    temp=temp2;
    //}
}

// table operations
HASHTABLE_API int count(Hashtable_str *tbl) { return tbl->num_elements; }
HASHTABLE_API int size(Hashtable_str *tbl) { return tbl->size; }

HASHTABLE_API int tbl_insert(Hashtable_str *table, const char * const key, const char * const element)
{
    int hash;
    Node *temp_ptr = NULL;
    hash = table->hash_function(key);

    //    printf("Placing into column %d\n", hash);

    if (table->nodes[hash] == NULL)
    {
        table->nodes[hash] = (Node*) malloc(sizeof(Node*));
        temp_ptr = table->nodes[hash];
        temp_ptr->next = NULL;
        temp_ptr->key = (char*) malloc (strlen(key) + 1 * sizeof(char));
        temp_ptr->value = (char*) malloc (strlen(element) + 1 * sizeof(char));
        strcpy_s(temp_ptr->key, strlen(key)+1, key);
        strcpy_s(temp_ptr->value, strlen(element)+1, element);
        table->num_elements += 1;
    }
    else
    {
        // Collision!!
        temp_ptr = table->nodes[hash];
        while (temp_ptr->next != NULL)
            temp_ptr = temp_ptr->next;

        temp_ptr->next = (Node*) malloc(sizeof(Node));
        temp_ptr->next->key = (char*) malloc (strlen(key)+1 * sizeof(char));
        temp_ptr->next->value = (char*) malloc (strlen(element)+1 * sizeof(char));
        temp_ptr->next->next = NULL;
        strcpy_s(temp_ptr->next->key, strlen(key)+1, key);
        strcpy_s(temp_ptr->next->value, strlen(element)+1, element);
        table->num_elements += 1;
    }

    // Return the hash value itself for hacking
    return hash;
}

HASHTABLE_API int tbl_remove(Hashtable_str *tbl, const char * const key)
{
    int hash;
    Node *temp_ptr = NULL;
    Node *chain = NULL;
    hash = tbl->hash_function(key);

    if (tbl->nodes[hash] == NULL)
        return 1;
    else
    {
        temp_ptr = tbl->nodes[hash];

        if (strcmp(key, temp_ptr->key) == 0)
        {
            // The next node is the node in question
            chain = temp_ptr->next;
            free(temp_ptr->value);
            printf("Deleted the value\n");
            free(temp_ptr->key);
            printf("Deleted the key\n");
            //printf("About to delete the node itself\n");
            //free(temp_ptr);
            tbl->nodes[hash] = chain;
            tbl->num_elements -= 1;
            return 0;
        }
        else
        {
            while (temp_ptr->next != NULL)
            {
                if (strcmp(key, temp_ptr->next->key) == 0)
                {
                    // The next node is the node in question
                    // So grab a pointer to the node after it
                    // and remove the next node
                    chain = temp_ptr->next->next;
                    free(temp_ptr->next->key);
                    free(temp_ptr->next->value);
                    //free(temp_ptr->next);
                    temp_ptr->next = chain;
                    tbl->num_elements -= 1;
                    return 0;
                }
                else
                    temp_ptr = temp_ptr->next;
            }
        }

        // Couldn't find the node, so declare not existent
        return 1;
    }
}

HASHTABLE_API char * tbl_find(Hashtable_str *tbl, const char * const key)
{
    // Compute the hash for the index
    int hash;
    Node *temp_ptr = NULL;
    hash = tbl->hash_function(key);

    if (tbl->nodes[hash] == NULL)
        return NULL;
    else
    {
        temp_ptr = tbl->nodes[hash];

        if (strcmp(key, temp_ptr->key) != 0)
        {
            while (temp_ptr->next != NULL)
            {
                temp_ptr = temp_ptr->next;
                if (strcmp(key, temp_ptr->key) == 0)
                    return temp_ptr->value;
            }
        }

        // Couldn't find the node, so declare not existent
        return NULL;
    }
} 
```

这是我的主要内容

```
#include <hashtable.h>
#include <utils.h>
#include <stdio.h>

int main(int argc, char **argv)
{
    int i=0;
    Hashtable_str *my_table = NULL;
    tbl_construct(&my_table);

    tbl_insert(my_table, "Daniel", "Student");
    tbl_insert(my_table, "Derek", "Lecturer");
    //tbl_insert(my_table, "Melvyn", "Lecturer");

    tbl_print(my_table);

    printf("\nRemoving Daniel...\n");
    tbl_remove(my_table, "Daniel");
    //tbl_print(my_table);

    tbl_destruct(my_table);
    my_table = NULL;

    scanf_s("%d", &i);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:13:03.007

这是不正确的，因为分配的是指针的大小，而不是 a `Hashtable_str`：

```
*tbl = (Hashtable_str*) malloc (sizeof(Hashtable_str*)); 
```

它应该是：

```
*tbl = malloc(sizeof(Hashtable_str)); 
```

同样的问题：

```
table->nodes[hash] = (Node*) malloc(sizeof(Node*)); 
```

* * *

[请参阅[是否强制转换 malloc 的结果？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)]

# iphone - prepareForSegue 不工作

> ID：10244935
> 
> 赞同：1
> 
> 时间：2012-04-20T11:00:09.113
> 
> 标签：iphone, storyboard, segue

我是 iOS 开发的新手。我在我的项目中使用 Storyboards & ARC。我尝试使用 prepareForSegue 方法从表格视图场景转移到另一个场景，但每次我尝试单击表格视图单元格时它似乎都不起作用并且崩溃。

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{
  UserTweetViewController *utvc = [segue destinationViewController];
  NSIndexPath *path =[self.tblTweets indexPathForSelectedRow];
  self.dictTweet = [tweets objectAtIndex:[path row]];
  [utvc setDictCelebrity:self.dictTweet];

} 
```

# javascript - 使用 AJAX 在 IE 8 中处理 http_request

> ID：10244936
> 
> 赞同：1
> 
> 时间：2012-04-20T11:00:12.700
> 
> 标签：javascript, ajax, file-io

一段时间以来，我一直在研究某种遥控器，并发现了一个让我感到困惑的问题：

遥控器应该控制某种机器。完整的基于硬件的代码是我自己用 c 编写的，但这对我的问题来说并不是很有趣。我使用网络服务器和网页来访问一些基本命令，就像前进、后退或打开/关闭电机（我使用机器板上的 wlan 接入点连接到它）。到目前为止一切正常，但是............：

我的问题是，有几个选项可以同时控制机器的功能（终端、有线连接的笔记本电脑、遥控器、“正常”工作循环）。这意味着，如果机器自己打开电机或工人使用终端，我也需要在我的遥控器上获得反馈（此时我将不同按钮边框的颜色从绿色切换为不活动到红色=活动）。

我这样做的方式很容易解释：例如，如果在 c 中打开电机，我会编写一个包含十进制数字的文件，该文件代表二进制代码。就像电机开启是 0001 意味着我写了一个 dec 1。电机关闭将是 0010，意味着我写了一个 dec 2。因为可能同时运行的函数不止一个，所以我只传递像 13 这样的值（电机开启：0001 = 1；前进：0100 = 4；灯开启：1000 = 8；=> 8+4+1=13)。我使用二进制 AND 比较来获取有关状态的实际信息。

尽管如此，我不能每两秒刷新一次页面来检查我写入的文件是否有更改，我使用 ajax 来获得一个简单而奇特的请求可能性：

```
var http_request = false;

    function RequestCommandStatus(url) {

    http_request = false;

    if (window.XMLHttpRequest) {
        http_request = new XMLHttpRequest();
    } else if (window.ActiveXObject) {
        try {
        http_request = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
        try {
            http_request = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {}
        }
    }

    if (!http_request) {
        alert('Ended due to an error!');
        return false;
    }
    http_request.open('GET', url, true);
    http_request.onreadystatechange = control4Commands;
    http_request.send(null);

    } 
```

然后我做比较的东西：

```
 function control4Commands() {
    if (http_request.readyState == 4) {
        var answer = http_request.responseText; 
        if ((answer & 0x1) == 0x1){
                                 //do something
        }
        if ((answer & 0x2) == 0x2){
                                 //do something
        }
        if ((answer & 0x4) == 0x4){
                                 //do something
        }
        if ((answer & 0x8) == 0x8){
                                 //do something
        }   
    }
    }                                                                   

    setInterval("RequestValveStatus('myfile.txt')", 1000); 
```

这在 Firefox 中效果很好，但由于某种原因，我在 IE8 中遇到了一个奇怪的问题（即使我启用了所有已知的脚本语言并允许几乎完全的访问和控制）：

由于某种原因，请求似乎被执行了一次，但之后页面和服务器之间就没有更多的交互了。文件的值会按预期更改。如果我手动重新加载页面，例如，电机仍在运行，它会将边框的颜色更改为红色。在我看来，这应该确保请求至少成功一次。通过使用开发人员工具的脚本调试器，我收到错误消息，http_request.open() 由于访问被拒绝而失败。我的第一个建议是它可能与我读取的文件的路径或类型有关，但我无法在 IE8 中使用 .html、.php、.txt 和“几种”其他类型修复它。更改路径/原点也没有解决问题。

我真的很想与您讨论这个问题，并随时向我发表您对这种获取函数实际状态的方法的想法。

问候，

欧姆吉

我很抱歉我的英语不好。随意问你是否不能听从我的解释:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:01:37.283

try to change

```
setInterval("RequestValveStatus('myfile.txt')", 1000); 
```

into

```
setInterval(function() { RequestValveStatus('myfile.txt'); }, 1000); 
```

# silverlight - 如何在 WP7 中的画布之外隐藏控件？

> ID：10244944
> 
> 赞同：6
> 
> 时间：2012-04-20T11:00:33.700
> 
> 标签：silverlight, windows-phone-7, canvas

我正在使用 WP7 silverlight 开发游戏。一些控件正在移动，并且在某些时候它们超出了它们所在的画布。

我想知道为什么他们不隐藏？

例如，当控件超出面板时，在 Windows 窗体中，即：

```
control.left > panel.width 
```

它消失了。这可以在silverlight中实现吗？

谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T11:25:20.453

您应该使用[Clip](http://msdn.microsoft.com/en-us/library/system.windows.uielement.clip%28v=vs.95%29.aspx)属性。

以下将显示一个按钮，该按钮将显示在 Canvas 之外，因为按钮宽度 > 画布宽度：

```
<Canvas Width="200" Height="200">
    <Button>My button with a lot of text</Button>
</Canvas> 
```

现在，如果我添加 Clip 属性，剪辑区域之外的内容将被隐藏：

```
<Canvas Width="200" Height="200">
    <Canvas.Clip>
        <RectangleGeometry Rect="0,0,200,200" />
    </Canvas.Clip>

    <Button>My button with a lot of text</Button>
</Canvas> 
```

# php - 如何使用 AJAX 从数据库中接收数据

> ID：10244949
> 
> 赞同：0
> 
> 时间：2012-04-20T11:00:49.703
> 
> 标签：php, html, ajax

我在我的网页中使用了一个评论框并保存了用户输入的评论。现在我想要的是使用 AJAX 显示它们。我设置了一个javascript计时器来一一获取评论。但我不知道如何使用 AJAX 来检索数据。这是php文件

```
<?php
$link = mysql_connect("localhost","root","");
mysql_select_db("continental_tourism");
$query = "SELECT comment_id from comment";
$result = mysql_query($query);
$counter = 0;
while ($row = mysql_fetch_assoc($result))
{
$counter++;
} 

$comment_number = rand(1,$counter);
$query_comment = mysql_query("SELECT * FROM comment WHERE comment_id = '$comment_number'");
if (!$query_comment) { 
die('Invalid query: ' . mysql_error());
}   
while($result_comment = mysql_fetch_array($query_comment)) {

echo $result_comment['comment'];

}
?> 
```

以下是主文件中的脚本部分。

```
function timeMsg()
{
var t=setTimeout("show_comment()",3000);
}

function show_comment(){

} 
```

我应该如何将 AJAX 代码写入？

> 函数 show_comment()

如果有人可以逐行解释 AJAX 代码，我会非常满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:13:34.680

您必须将所有 php 脚本移动到另一个 php 文件，例如 getdata.php，并在要显示数据的文件中使用 ajax 函数，例如 index.php。（这是为了易于使用的代码）。现在你的 index.php 文件应该看起来像

```
<html>
  <body>
    <div id="comments"></div>
  </body>
  <script src="include/jquery.js" type="text/javascript"></script>
  <script type="text/javascript>
    function show_comments() {
         $.ajax({
            url:getdata.php
            success:function(data){
               $("#comments").append(data);
            }
         }); 
  </script>
 </html> 
```

我正在使用 jquery 的 jquery.ajax 函数。这是一些提示，您可以如何做到这一点。我希望它能帮助你完成你的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:05:35.977

使用 jQuery 的[`.get()`](http://api.jquery.com/jQuery.get/)方法，将 PHP 脚本的链接用作 URL。那应该调用您的 PHP 脚本，并且您的脚本应该回显输出。

在回显它之前，您应该考虑`json_encode`从 php 脚本输出您的输出。

我认为，与其这样做——

```
$query = "SELECT comment_id from comment";
$result = mysql_query($query);
$counter = 0;
while ($row = mysql_fetch_assoc($result))
{
$counter++;
} 
```

您可以查询`SELECT COUNT(comment_id) from comment`并获取计数。

# php - Is it mandatory to map PHP SoapFault to WSDL fault element?

> ID：10244955
> 
> 赞同：1
> 
> 时间：2012-04-20T11:01:16.383
> 
> 标签：php, soap, wsdl, soapfault

Hello to the community,

I recently implemented a Web Service in native PHP (ie using SoapServer) by using classes in php code and comlex types in WSDL. The Web Service throws 3 type of SoapFaults (exceptions) at any case that something goes "wrong". In all cases, I use faultcode = Receiver to every exception that may come up and custom faultstring to distinct the cases among them.

The question is if it is mandatory to modify my WSDL by adding wsdl:fault elements? Do I have to create separate classes for the fault elements inside my PHP code?

Thanks a lot in advance guys

# cordova - PhoneGap：在 Safari 中打开外部 URL

> ID：10244965
> 
> 赞同：27
> 
> 时间：2012-04-20T11:01:58.663
> 
> 标签：cordova

我刚刚升级到 PhoneGap 1.6.1，我无法再获取外部 URL 以在 Safari 中打开。

在此版本之前，我对 AppDelegate.m 进行了如下修补：

```
- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL *url = [request URL];
    if ([[url scheme] isEqualToString:@"http"]) {
        [[UIApplication sharedApplication] openURL:url];
        return NO;
    } else {
        return [self.viewController webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
    }
} 
```

我注意到之前有人问过类似的问题： [如何在 Safari 中打开外部链接而不是应用程序的 UIWebView？](https://stackoverflow.com/questions/9746260/phonegap-open-an-external-link-in-safari-not-the-apps-uiwebview)

但在我看来，这个答案不再适用于 1.6.1 版。

我也尝试在 Cordova.plist 中设置 OpenAllWhitelistURLsInWebView，但没有一个设置给我 Safari。

提前致谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-06T06:25:30.563

在新 URL 中打开链接的最佳方式实际上是使用`window.open`. 只需将目标设置为“_system”：

```
window.open("http://stackoverflow.com", "_system"); 
```

在我在文档中找到这个之前，我实际上写了一个插件来做同样的事情。我将把这个答案留在这里，因为这会让你对链接的处理有更精细的控制。

使用 PhoneGap 2.3+，我无法以任何方式获取在 Mobile Safari 中打开的 URL。使用 _blank 不起作用，我尝试了 window.open(url, '_blank')，但这现在使用 InAppBrowser 插件打开了 URL（这非常糟糕）。我觉得那个使用插件很有趣，所以我决定编写一个插件来使用在 iOS 应用程序中打开 URL 的标准方法来打开 URL。您可以在此处查看/获取有关[此要点的代码：https://gist.github.com/typeoneerror/5097118](https://gist.github.com/typeoneerror/5097118)。

在我的示例中，我使用 jQuery 连接了具有名为“_blank”的类的链接，并使用插件调用打开了这些 URL：

```
// execute the plugin called OpenUrl, signature:
// exec(successCallback, errorCallback, pluginName, pluginMethod, params)
cordova.exec(success, error, "OpenUrl", "openUrl", [url]); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-22T11:15:59.730

我在 MainViewController.m 中使用过它

```
- (BOOL)webView:(UIWebView *)theWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL *url = [request URL];
    NSString *str = url.absoluteString;
    NSRange range = [str rangeOfString:@"http://"];
    //HACK to make url open in safari
    if (range.location != NSNotFound) {
        [[UIApplication sharedApplication] openURL:url];
        return NO;
    }
    else {
        return [ super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ];
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-25T04:48:15.870

在早期版本的 cordova 中，您可以通过将 target="_blank" 添加到链接来在浏览器中加载 url。但现在您可以使用 inApp 浏览器功能。

```
var ref = window.open(encodeURI('your url'), '_system', 'location=no'); 
```

这将在浏览器中打开 url。使用**cordova2.7.0**在**Android**和**iPhone中测试**

 *** * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-22T16:13:06.243

升级到 Cordova 1.6.1 后遇到同样的问题。

尝试添加 `target="_blank"` 到您的链接。

这对我有用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-04-16T12:02:44.927

我设法使它与这个设置一起工作：

**1：** 在config.xml中加入下面一行——PhoneGap 3.1及以上版本：

```
<gap:plugin name="org.apache.cordova.inappbrowser" /> 
```

**2：** 之后你可以这样做：

```
<a onclick="window.open("http://www.yoururl.com/", "_system");">Link</a> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-21T04:01:29.473

尝试简化解决方案，这就是我最终使用 PhoneGap/Cordova 2.5.0 和 jQuery 1.9.1

*   OpenAllWhitelistURLsInWebView 无关紧要。将其设置为 true、false 或忽略它似乎对结果没有任何影响。
*   URL 的目标是 _system，如下所示：`<a target="_system" href="https://rads.stackoverflow.com/amzn/click/com/B009CZICQ8" rel="nofollow noreferrer">`
*   然后我打电话给：

    ```
    $("a[target='_system']").click(function(event) {

        event.preventDefault();
        window.open($(this).attr("href"), "_system");
    }); 
    ```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-06-08T01:21:59.430

做这个：

```
<a href="http://www.google.com/" onclick="window.open(this.href,'_system'); return false;">Google</a> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-02-04T11:48:42.590

今天使用此设置解决了：

1.  安卓：4.4
2.  iOS：8.2
3.  科尔多瓦 CLI：5.1.1
4.  [在应用浏览器插件中](https://github.com/apache/cordova-plugin-inappbrowser)：1.2.2

然后按照以下步骤操作：

1.  如上所述添加 In App Browser 插件
2.  在您的 .html 文件中自定义此行：

```
<a href='http://www.arsdigitalia.it' target='_blank'>Go to my nice website</a>
```

3.  在您的 .js 文件中使用这些行：

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
    window.open = cordova.InAppBrowser.open;
}
window.addEventListener('load', function () {    
    $(document).on('click', 'a[target="_system"],a[target="_blank"]', function (e) {
            e.preventDefault();
            var url = this.href;
            window.open(url,"_system");                    
    });
  }
}, false);
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-21T15:44:19.687

使用 Phonegap / Cordova 1.7，我已经能够通过执行以下操作在 JavaScript 中的外部浏览器中打开 URL：

```
window.location.href = "http://www.google.com"; 
```

我还在 Cordova.plist 中将 OpenAllWhitelistURLsInWebView 设置为 NO

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-11-10T20:12:35.147

如果您使用的是 Phonegap（在 iOS 6 中测试），这是 100% 保证的解决方案。

要在 Safari 中打开外部 URL，请执行以下操作：

1.  *在外部主机*（白名单）中添加您的链接。例如：`http://google.com/`
2.  在`Cordova.plist`或`Phonegap.plist`中，`OpenAllWhitelistURLsInWebView`从`Yes`变为`No`。
3.  在您的应用程序中，添加`target="_blank"`到您的链接。例子：

    ```
    <a href="http://google.com" target="_blank">Google.com</a> 
    ```

谢谢你。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-05-02T22:13:18.267

我认为这个方法曾经在 /Classes/[yourAppName]AppDelegate.m 中，现在它位于 /Classes/MainViewController.m 只是将它移到那里看看它是否有效。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-03-27T05:04:23.933

在 Safari 中打开外部 URL 执行以下步骤。

1).Add your link in External Host (white list).with complete url if you want to google url 然后添加
例如：http: [//google.com/](http://google.com/)

2).在 Cordova.plist 或 Phonegap.plist 中，更改

> OpenAllWhitelistURLsInWebView 从是到否

对于 Android 真到假。

3）。编写此代码以打开 URL

```
window.location.href = "http://www.google.com"; 
```**

# javascript - Esc key acts like reset button in html

> ID：10244968
> 
> 赞同：2
> 
> 时间：2012-04-20T11:02:04.100
> 
> 标签：javascript, jquery, html

I am having two text boxes with a reset and a submit button. The reset button is working fine. But when i enter something in those two text boxes and press esc, the values gets disappeared. Event acts like a reset button. I am not sure how to control it. Much appreciate your help... Thanks...

```
<input type="text" name="" /> <input type="text" name="" /> 

<input type="button" value="Search" /> <input type="reset" value="Reset" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T05:34:29.590

它在所有浏览器中都可以正常工作[http://jsfiddle.net/xgTxK/2/](http://jsfiddle.net/xgTxK/2/)

```
$(document).keydown(function (e) {
    if(e.keyCode==27){
        e.preventDefault();
    }
}); 
```

在您的代码中添加上述脚本以防止默认功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:00:26.690

我不确定这是否在所有浏览器中都是一致的，但我注意到 esc 按钮通常会重置在文本输入中键入的文本，但仅在仍然集中在文本输入中时。或者换句话说，如果 onchange 事件尚未发生，esc 将重置文本。

我假设要防止这种情况发生，需要使用 JavaScript 来捕获输入中的关键事件并防止默认行为。

# php - rawurlencode for storing data

> ID：10244969
> 
> 赞同：1
> 
> 时间：2012-04-20T11:02:05.767
> 
> 标签：php, mysql

I have always used rawurlencode to store user entered data into my mysql databases. The main reason I do this is so that stroing foreign characters is very simple I find. I'd then use rawurldecode to retrieve and display the data.

I read somewhere that rawurlencode was not meant for this purpose. Are there any disadvantages to what I'm doing?

* * *

So let's say I have a German address with many characters like umlauts etc. What is the simplest way to store this in a mysql database with no risks of it coming out wrong and being searchable using a search script? So far rawurelencode has been excellent for our system. Perhaps the practise can be improved upon by only encoding foreign letters and not common characters like spaces etc, which is a waste of space I totally agree.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:03:30.610

当然有。

让我们从实际开始：对于一大类字符，您为每个数据字节花费 3 个字节的存储空间。（当然还有 RFC）的描述`rawurlencode`说这些字符是

> 除 -_.~ 之外的所有非字母数字字符

这意味着总共有 26 + 26 + 10（字母数字）+ 4（特殊例外）= 66 个字符，您*不会*为此浪费空间。

然后还有逻辑上的缺点：您不是存储数据本身，而是针对 URL 定制的数据表示。除非数据本身是 URL，否则您不应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:28:14.873

*   I am using a fork to eat a soup
*   I am using money bills to fire the coals for BBQ
*   I am using a kettle to boil eggs.
*   I am using a microscope to hammer the nails.

Are there any disadvantages to what I'm doing?

## YES

You are using a tool not on purpose. This is always a disadvantage.

A sane human being alway using a tool that is intended for the certain job. Not some randomly picked one. **Especially if there is no shortage in the right tool supply.**

**URL** encoding is not intended to be used with database, as one can tell from the name. That's alone reason enough for the sane developer. Take a look around: find the proper tool.

There is a thing called "common sense" - a thing widely used in the regular life but for some reason always absent in the php world.
A common sense can warn us: if we're using a wrong tool, it may spoil the work. Sooner or later it will spoil it. No need to ask for the certain details - it's a general rule. We are learning this rule at about age of 5.

Why not to use it while playing with some web thingies too?

Why not to ask yourself a question:

What's wrong with storing foreign characters at all?

> urlencode makes stroing foreign characters very simple

Any hardships you encountered without urlencode?

Although I feel that common sense should be enough to answer the question, people always look for the "omen", the proof. Here you are:

Database's job is not limited to just storing and retrieving data. A plain text file can handle such a primitive task as well.
*Data manipulations* is what we are using databases for.
Most widely used ones are *sorting* and *filtering*.

*   Such a quite intelligent thing as a database can sort and filter data *character-insensitive*, which is very handy feature. But of course it can be done only if characters being saved as is, not as some random codes.
*   Sorting texts also may use ordering other than just binary order in the character table. Some umlaut characters may be present at the other parts of the table but database *collation* will put them in the right place. Of course it can be done only if characters being saved as is, not as some random codes.
*   Sometimes we have to manipulate the data that already stored in the database. Say, cut some piece from the string and compare with the entered value. How it is supposed to be done with urlencoded data?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:19:53.910

我能想到的缺点：

*   浪费磁盘空间。
*   每次读取和每次写入都会浪费 CPU 周期编码和解码。
*   额外的复杂性（您甚至无法使用 MySQL 客户端检查数据）。
*   无法使用全文搜索。
*   URL 编码不一定是唯一的（至少有两个 RFC）。它可能不会导致数据丢失，但会导致重复数据（例如，两行实际上包含相同数据的唯一索引）。
*   您可能会不小心对非字符串数据（例如日期）进行编码：`2012-04-20%2013%3A23%3A00`

但主要考虑的是这种技术是完全任意的和不必要的，因为 MySQL 在存储完整的 Unicode 目录时没有任何问题。您还可以决定交换所有字符串中的 e 和 o `Holle, werdl!`：. 您的应用程序可以正常运行，但不会提供任何附加值。

**更新：**正如[你的常识所指出的](https://stackoverflow.com/a/10245336/13508)，一个基本的 SQL 子句`ORDER BY`不再可用。并不是说国际字符会被忽略；你基本上会得到一个基于 ASCII 码`%`和十六进制字符的任意排序顺序。如果你不能`SELECT * FROM city ORDER BY city_name`可靠，你已经使你的数据库无用。

# database-migration - EF 4.3 Database Migrations - Is there a way to ignore errors?

> ID：10244970
> 
> 赞同：0
> 
> 时间：2012-04-20T11:02:08.707
> 
> 标签：database-migration, entity-framework-4.3, entity-framework-migrations

Is there a way to ignore errors when running a manual migration?

We have client databases in different states and I need to get them all updated to the latest version.

The reason I ask about ignoring errors is because I just want to code my migration like this

```
 public override void Up()
    {   
        AddColumn("ClientUser", "LastSyncTime", c => c.Guid());
        AddColumn("ClientUser", "FileTransferToken", c => c.Guid());
        AddColumn("ClientUser", "DateFileTransferTokenIssued", c => c.DateTime());
    } 
```

but naturally and expectedly it will throw an exception where the column already exists.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:35:12.473

不，它不是 EF 迁移的假定用例。迁移将数据库从一个定义的状态驱动到另一个定义的状态。如果您有不同状态的数据库，则需要多次迁移，每个迁移仅涵盖过渡的一部分。

如果您想开始在具有多个数据库的现有项目中使用迁移，您应该首先将所有数据库移动到没有迁移的相同状态并开始将其用作初始状态，之后所有更改将仅通过迁移处理。否则你会遇到很多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:19:08.727

这不能回答您的具体问题，但它可能是您问题的答案。

使用 VS 2010 中的数据库项目来创建目标数据库的架构。

您可以使用此“黄金标准”模式来比较处于不同状态的其他数据库并生成增量脚本以将其从当前模式转移到目标模式。

一旦您在数据库中处于已知状态，然后切换到数据库迁移以向前推进模式。

基思

# c# - 如何按元素列表分组？

> ID：10244973
> 
> 赞同：8
> 
> 时间：2012-04-20T11:02:12.943
> 
> 标签：c#, .net, linq, group-by

我一次又一次地遇到这个问题：如何通过包含其他对象的列表对对象列表进行分组？

我有一个类型对象的列表，`A`每个对象都有一个属性（让我们称之为`ListProp`），它也是一个列表。`ListProp`具有类型的元素`B`。有多个类型元素`A`具有相同的`B`-objects in `ListProp`，但`ListProp`属性引用因元素而异。如何`A`以最快的方式对这些对象进行分组，其中的`B`对象`ListProp`是相同的？

示例代码：

```
class Program
{
    static void Main(string[] args)
    {
        var exampleList = new List<A>
        {
            // Should be in first group
            new A { ListProp = new List<B>
            {
                new B { Prop = new C { Number = 0 }},
                new B { Prop = new C { Number = 1 }}
            }},
            // Should be in first group
            new A { ListProp = new List<B>
            {
                new B { Prop = new C { Number = 0 }},
                new B { Prop = new C { Number = 1 }}
            }},
            // Should be in second group
            new A { ListProp = new List<B>
            {
                new B { Prop = new C { Number = 0 }},
                new B { Prop = new C { Number = 1 }},
                new B { Prop = new C { Number = 1 }}
            }},
            // Should be in third group
            new A { ListProp = new List<B>
            {
                new B { Prop = new C { Number = 0 }},
                new B { Prop = new C { Number = 0 }}
            }}
        };

        // Doesn't work because the reference of ListProp is always different
        var groupedExampleList = exampleList.GroupBy(x => x.ListProp);
    }
}

class C
{
    public int Number { get; set; }
    public override bool Equals(object o)
    {
        if (o is C)
            return Number.Equals(((C)o).Number);
        else
            return false;
    }
}

class B
{
    public C Prop { get; set; }
}

class A
{
    public IList<B> ListProp { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T11:09:31.840

您可以`IEqualityComparer<List<B>>`在其他 GroupBy 重载中实现和使用它。

```
public class ListOfBEqualityComparer : IEqualityComparer<List<B>>
{
    public bool Equals(List<B> x, List<B> y)
    {
        // you can also implement IEqualityComparer<B> and use the overload
        return x.SequenceEqual(y);
    }

    public int GetHashCode(List<B> obj)
    {
        //implementation of List<T> may not work for your situation
        return obj.GetHashCode();
    }
} 
```

然后你可以使用重载

```
var groupedExampleList = exampleList.GroupBy(x => x.ListProp, 
                                             new ListOfBEqualityComparer()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T11:09:30.043

试试这个：

```
GroupBy(x => String.Join(",", x.ListProp)); 
```

它将`0,1; 0,1; 0,1; 0,1,1; 0,1`相应地分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:23:11.113

我将通过以下方式解决此问题：

1.  将每个子元素（在 ListProp 属性中）与其父元素关联
2.  按孩子分组父母
3.  投影结果

* * *

```
var data = exampleList.SelectMany(a=>a.ListProp.Select(x=>new{Key = x.Prop.Number, Value = a}))
           .GroupBy(x=>x.Key)
           .Select(g=>new {Number = g.Key, Items = g.ToList()}); 
```

# select - ellipsis not working in select menu options

> ID：10244974
> 
> 赞同：3
> 
> 时间：2012-04-20T11:02:14.637
> 
> 标签：select, ellipsis

I have tried ellipsis in paragraph and div it works fine but not working in select menu options, I want fixed width in option of menu. Well i have tried something here but not getting the result.

[http://jsfiddle.net/t5eUe/48/](http://jsfiddle.net/t5eUe/48/)

# javascript - Can a set of classes be stored in memory, so I can do things to them before I display them on a page? (JQuery)

> ID：10244978
> 
> 赞同：1
> 
> 时间：2012-04-20T11:02:25.540
> 
> 标签：javascript, jquery, jquery-selectors

I'm implementing this: [http://jsfiddle.net/xkfqN/85/](http://jsfiddle.net/xkfqN/85/)

**html:**

```
<div id="posts">
    <div class="more">Show More</div>
    <div class="commentsContainer">
        <div class="comment">Comment 1</div>
        <div class="comment">Comment 2</div>
        <div class="comment">Comment 3</div>
        <div class="comment">Comment 4</div>
        <div class="comment">Comment 5</div>
        <div class="comment">Comment 6</div>
        <div class="comment">Comment 7</div>
        <div class="comment">Comment 8</div>
        <div class="comment">Comment 9</div>
        <div class="comment">Comment 10</div>
    </div>
</div> 
```

**css:**

```
.comment { 
    display: none;
    border:3px solid whiteSmoke;
    width:280px;
}

.more {
    cursor:pointer

}​ 
```

**JQuery:**

```
function toggleComment(index, hide) {
    //check the index to make sure it is in range
    if (index > -1 && $('.comment').length > index) {
        //get the comment at the given index and apply the animation
        $('.comment:eq(' + index + ')')
            .slideToggle(18, function() { 
                //if hiding then decrement
                var next = hide ? index + 1 : index - 1;
                //call toggle on the next index
                toggleComment(next , hide);
            });
            //set to display block so they show up on their own line
           // .css('display', 'block'); 
    }
}

$('.more').click(function() {

    //are the comments already open... returns true or false
    var hide = $(this).hasClass('open');

    //default to start at the begining... each click brings the index to 0
    var index = 0;
    //if the comments are not open then start at the end
    if (!hide) {
        index = $('.comment').length - 1
    }

    //toggle the comments
    toggleComment(index, hide);    

    //used to remember state.. adds class to more and takes it away hence toggle class
    $(this).toggleClass('open');
});
​ 
```

​</p>

The comments I intend to drop down aren't shown by default and hidden with css like the example link shows as it wouldn't be wise to load all comments by default for every user.

They'll only be loaded on click of a "show all" link/submit. Anyway in the code below, my comments are grabbed from a file "show_all_comments" after it has been rendered on a page. In that file is a loop that loops through each comment and displays the data along with it's html.

**What I want to do:**

I don't want to render this on the page but some how in memory then be able to access the classes as if I was trying to access them from an actual page. This way I'll be able to access each comments class and use with the JSFiddle code.

If that makes sense to you is this possible? If so how would I achieve this?

**JQuery:**

```
 var postContent = $(this).parents('.post_content'),
    commentContainer = postContent.find('.comment_container');

    commentContainer.slice(0, -2).remove();
    postContent.find('.comment_container:first')
    .before("<%= j render 'users/partials/show_all_comments', :comments => @comments %>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:11:23.947

听起来您想要断开 DOM 元素并通过它们进行搜索。你可以很容易地做到这一点：

```
var elements = $('<div><div class="one">one</div><div class="two">two</div></div>');
var divOne = elements.find('.one'); 
```

在那里，我创建了一个`div`包含所有其他结构的顶层结构，并在其周围包装了一个 jQuery 实例。元素不在 DOM 中，它们与它完全断开。然后我可以使用 jQuery 之类的方法`find`来提取我想要的位。

如果您想将提取的位实际放在页面上的某个位置，您可能想要`clone`它：

```
// Put "one" on the page
elements.find(".one").clone().appendTo(document.body); 
```

* * *

但是看看你对 Juhana 的评论：

> Juhana：想象一个用户有一个有 4000 条评论的微博。每次用户进入带有该微博的页面时，都会从数据库中加载所有 4000 条评论，然后将其隐藏。即使用户没有点击显示全部链接。那不是我想做的事。想象一下有 1000 名用户查看该微博。这将意味着 4000 条评论被加载然后隐藏 1000 次，无论用户是否点击全部显示。

*...我根本*不会加载其他评论（不在 HTML 中，也不在脚本中）。相反，我只会加载我要显示的评论，然后让“更多”链接在用户点击它时为其余的评论触发一个 ajax 请求。仅仅将它们从 HTML 移动到脚本中，您不会获得太多（如果有的话）。

这是一个例子 -[活生生的例子](http://jsbin.com/onafam)| [来源](http://jsbin.com/onafam/edit)：

HTML：

```
<div id="commentsContainer">
  <div class="comment">Comment 1</div>
  <div class="comment">Comment 2</div>
  <div class="comment">Comment 3</div>
  <div class="comment">Comment 4</div>
  <div class="comment">Comment 5</div>
  <div class="comment">Comment 6</div>
  <div class="comment">Comment 7</div>
  <div class="comment">Comment 8</div>
  <div class="comment">Comment 9</div>
  <div class="comment">Comment 10</div>
  <div><a href="fallback.php" id="moreComments">more</a></div>
</div> 
```

JavaScript：

```
jQuery(function($) {

  $("#moreComments").click(function(event) {
    var $this = $(this),
        moreDiv,
        container;

    event.preventDefault();
    moreDiv = $this.parent();
    container = moreDiv.parent();
    $this.replaceWith("<em>Loading...</em>");
    $.ajax({
      method: 'get',
      url:    'http://jsbin.com/ijarov',
      dataType: 'html',
      success: function(data) {
        moreDiv.remove();
        container.append(data);
      }
    });
  });

  function display(msg) {
    $("<p>").html(msg).appendTo(document.body);
  }
}); 
```

ajax 调用返回的内容：

```
<div class="comment">Comment 11</div>
<div class="comment">Comment 12</div>
<div class="comment">Comment 13</div>
<div class="comment">Comment 14</div>
<div class="comment">Comment 15</div>
<div class="comment">Comment 16</div>
<div class="comment">Comment 17</div>
<div class="comment">Comment 18</div>
<div class="comment">Comment 19</div>
<div class="comment">Comment 20</div> 
```

* * *

在下面回复您的评论：

> 假设您不想附加“数据”，但要访问该文件中的类。那可能吗？

我不知道您所说的*“...访问类...”*是什么意思，但是如果您的意思是与返回的元素进行交互而不附加它们，则只需实例化它们，就像我在上面所做的那样用文字字符串回答。例如，在`ajax`成功处理程序中执行此操作：

```
var elements = $(data); 
```

这是上面带有不同返回数据的示例（`div`元素的混合，一些与类`comment`和一些与类`other`），我在附加数据之前查看数据，然后只附加注释，而不是“其他” [：示例](http://jsbin.com/onafam/3)| [资源](http://jsbin.com/onafam/3/edit)

HTML：

```
<div id="commentsContainer">
  <div class="comment">Comment 1</div>
  <div class="comment">Comment 2</div>
  <div class="comment">Comment 3</div>
  <div class="comment">Comment 4</div>
  <div class="comment">Comment 5</div>
  <div class="comment">Comment 6</div>
  <div class="comment">Comment 7</div>
  <div class="comment">Comment 8</div>
  <div class="comment">Comment 9</div>
  <div class="comment">Comment 10</div>
  <div><a href="fallback.php" id="moreComments">more</a></div>
</div>
<hr> 
```

JavaScript *（仅在`success`函数中进行更改）*：

```
jQuery(function($) {

  $("#moreComments").click(function(event) {
    var $this = $(this),
        moreDiv,
        container;

    event.preventDefault();
    moreDiv = $this.parent();
    container = moreDiv.parent();
    $this.replaceWith("<em>Loading...</em>");
    $.ajax({
      method: 'get',
      url:    'http://jsbin.com/ijarov/2',
      dataType: 'html',
      success: function(data) {
        var elements = $(data);
        moreDiv.remove();
        display("Number of <code>.comment</code> elements: "+
                elements.filter('.comment').length);
        display("Number of <code>.other</code> elements: "+
                elements.filter('.other').length);
        display("Appending only the <code>.comment</code> ones.");
        elements.filter('.comment').appendTo(container);
      }
    });
  });

  function display(msg) {
    $("<p>").html(msg).appendTo(document.body);
  }
}); 
```

调用返回的数据`ajax`：

```
<div class="comment">Comment 11</div>
<div class="other">Other 11</div>
<div class="comment">Comment 12</div>
<div class="other">Other 12</div>
<div class="comment">Comment 13</div>
<div class="comment">Comment 14</div>
<div class="comment">Comment 15</div>
<div class="comment">Comment 16</div>
<div class="comment">Comment 17</div>
<div class="comment">Comment 18</div>
<div class="comment">Comment 19</div>
<div class="comment">Comment 20</div> 
```

# c++ - C++0x lambda + boost::function trouble

> ID：10244979
> 
> 赞同：1
> 
> 时间：2012-04-20T11:02:27.523
> 
> 标签：c++, visual-c++, c++11

I have a problem with lambdas in MSVC2010.

It is successful compiled:

```
auto f1 = []() { };
boost::function<void()> a = f1; 
```

But it brings an error C2440:

```
auto f2 = []()
{
    auto f3 = []() { };
    boost::function<void()> b = f3;
}; 
```

Error C2440:

```
'initializing' : cannot convert from 'int' to 'boost::function<Signature>'
    with
    [
        Signature=void (void)
    ]
    No constructor could take the source type, or constructor overload resolution was ambiguous 
```

Why? Does it work in GCC4.6?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:17:41.780

可能是 MSVC 中的一个错误（错误消息似乎非常可疑）。它适用于 GCC 4.7。

# php - Parse forwarded email body in PHP

> ID：10244980
> 
> 赞同：1
> 
> 时间：2012-04-20T11:02:29.753
> 
> 标签：php, regex, parsing, email

I need to parse email body(it can be both text and html), of forwarded email, to find original sender of email(both name and email).

So lets say that John send email to Steve, and Steve forward to Matt. So, in most clients message will look like:

```
From: John Smith [mailto:john@example.com]
Sent: 02 March 2012 AM 01:23
To: 'Steve'
Subject: Hello Steve 
```

Or

```
---------- Forwarded message ----------
From: John Smith <ejohn@example.com>
Date: 02 March 2012 AM 01:23
Subject: Hello Steve
To: Steve <steve@example.com> 
```

So, how can I extract from name and from email values in those two cases? Please note that I need to extract only first appearance of this text, because there can be multiple appearances of lines "From:...".

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:57:18.610

使用正则表达式

```
/^From:\s+(.*?)\s*(?:\[mailto:|<)(.*?)(?:[\]>])$/ 
```

您将获得第一个匹配*名称*和第二个匹配*电子邮件地址*

* * *

```
<?php
  $string = "...";
  $pattern = '/^From:\s+(.*?)\s*(?:\[mailto:|<)(.*?)(?:[\]>])$/mi';
  preg_match($pattern, $string, $matches);
  print_r($matches);
?> 
```

* * *

有时也有`'`或`"`在名字的开头和结尾处。要消除这种情况，请使用：

```
/^From:\s+["']?(.*?)["']?\s*(?:\[mailto:|<)(.*?)(?:[\]>])$/ 
```

# jquery - jQuery 没有正确计算其父元素中的元素

> ID：10244987
> 
> 赞同：0
> 
> 时间：2012-04-20T11:02:52.783
> 
> 标签：jquery

我正在创建一个手风琴菜单，当所有复选框都被选中时，它会显示下一个项目。

它适用于第一步，但一旦超过手风琴菜单中的第一项，它就不会正确计算复选框的数量。

这就是我迄今为止所拥有的[http://jsfiddle.net/EDYqs/](http://jsfiddle.net/EDYqs/) ...我已经留下了警报，所以你可以看到它找到的复选框的数量。

这真的很难解释，所以你必须自己看看问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:07:15.070

只需替换`parent("dd")`为父（）。

```
 available = $(this).parent().children('input[type=checkbox]').length;
        checked = $(this).parent().children('input[type=checkbox]:checked').length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:08:08.123

您需要使用`.closest()`，而不是`.parent()`，因为`<dd>`不是复选框的直接父级（`this`在单击处理程序中设置的内容）。

例如

```
$('input[type=checkbox]').on('change', function(){
      available = $(this).closest('dd').find('input[type=checkbox]').length;
      checked = $(this).closest('dd').find('input[type=checkbox]:checked').length;

      // ...
}); 
```

此外，请考虑将`<label>`s 用于复选框文本，并将其`for`属性设置为复选框的 ID（当然，您需要为每个复选框提供唯一的 ID）。这允许用户单击文本来切换复选框，并且还允许屏幕阅读器等可访问性技术知道该复选框的描述是什么。

# c++ - 二维 unordered_map

> ID：10244988
> 
> 赞同：3
> 
> 时间：2012-04-20T11:02:53.067
> 
> 标签：c++, 2d, unordered-map

```
typedef boost::unordered_map<int, void*> OneDimentionalNodes;
typedef boost::unordered_map<int, OneDimentionalNodes> TwoDimentionalNodes;

TwoDimentionalNodes nodes; 
```

这是有效的吗？

我不使用任何散列函数，因为 unordered_maps 的键是单个整数。它可以编译，但是当我像这样迭代它时，它在尝试访问 this->hash_function()(k) 时崩溃；

```
for (TwoDimentionalNodes::iterator it= nodes.begin(); it != nodes.end() ; ++it)
{
   for(OneDimentionalNodes::iterator it2 = nodes[it->first].begin(); it2 != nodes[it->first].end() ; ++it2)
    {
   // do stuff
    }
} 
```

我也对其他容器开放

*   O(1) 访问
*   O(n) 次迭代
*   疏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:30:54.010

If you just need to iterator over all elements, and it is not required to loop over a specific dimension, then you could use a simple pair as key for your unordered_map, like this:

```
typedef std::pair<int,int> Coordinates;
typedef std::unordered_map<Coordinates,void *> TwoDimensionalNodes; 
```

(notice I used STL instead of Boost, unordered_map is now also part of the standard STL).

Getting a specific value is simply writing:

```
twoDimensionalNodes[std::make_pair(x,y)] 
```

(or use find if you're not sure if that value is in your map).

To iterate, just iterate over the unordered map:

```
for (auto it=twoDimensionalNodes.begin();it!=twoDimensionalNodes.end();++it)
   {
   std::cout << "x=" << it->first.first;
   std::cout << "y=" << it->first.second;
   std::cout << "value=" << it->second;
   } 
```

To make it a bit more readable, I prefer getting the coordinates first from the iterator, like this:

```
for (auto it=twoDimensionalNodes.begin();it!=twoDimensionalNodes.end();++it)
   {
   Coordinates &coordinates = it->first;
   std::cout << "x=" << coordinates.first;
   std::cout << "y=" << coordinates.second;
   std::cout << "value=" << it->second;
   } 
```

If you have more than 2 dimensions, use std::tuple, or simply write your own Coordinates class to be used as key for the map.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:20:57.327

使用`std::unordered_map`从`<unordered_map>`. 尝试以这种方式专门化 std 哈希类：

```
namespace std
{
    template<typename T> 
    struct hash<void*>
    {
        std::size_t operator()(void * ptr) const
        {
            return (std::size_t)ptr;
        }
    };
} 
```

# wpf - 如何在 WPF 中将图形绘制到 DataGrid 中？

> ID：10244989
> 
> 赞同：2
> 
> 时间：2012-04-20T11:02:56.307
> 
> 标签：wpf, canvas, datagrid

我想在 DataGrid 上绘制折线图。这将在我的网格的第一列，并且图表很大并且跨越了数据网格上的所有行。

我将如何处理这种情况？我应该使用画布吗？如果是这样，我应该为每个 DataGridCell 放置一个小 Canvas，还是可以以某种方式在 DataGrid 顶部渲染一个大 Canvas？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:18:57.043

好吧，您可以按照您在问题中所说的去做，即在网格顶部覆盖另一个控件，等等。但是与滚动同步，列/行调整大小可能被证明是一场噩梦。根据我的经验，已经多次这样做了，其中一种更简单的方法（从长远来看，即使一开始看起来更难）是提取 DataGrid 模板（使用混合）并根据您的需要对其进行修改。

提取 DataGrid 的模板后，您会发现：

```
....
<ControlTemplate TargetType="{x:Type DataGrid}">
    <Border ...>
       <ScrollViewer Focusable="false" Name="DG_ScrollViewer" Background="{TemplateBinding Background}">
          <ScrollViewer.Template>
             <ControlTemplate TargetType="{x:Type ScrollViewer}">
                  <Grid x:Name="DG_MainGrid" Background="{TemplateBinding Background}"> 
```

那是放置“SelectAllButton”、滚动条等的网格。您可以在其中放置任何内容，使其与您获得的任何列对齐：

您可以放置​​一个边框并放置图形（其中包含图表控件），使用 Binding 控制边框的宽度、高度、边距等，如下所示：

```
<Border Grid.Row="2" Grid.ColumnSpan="2" BorderThickness="2"    
        Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Views:MyView}}, Path=ChartBorderWidth}"
        Height="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Views:MyView}}, Path=ChartBorderHeight}"
        Margin="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Views:MyView}}, Path=ChartBorderMargin}">
        <..your charting control>
</Border> 
```

无论如何，这只是一个建议，当您开始在 WPF 中做一些自定义的事情并且不仅仅是开箱即用的解决方案时，事情太复杂了，无法给您确切的答案。但我希望这会有所帮助..

# php - 脚本停止为加载的表单工作 - jquery load ajax

> ID：10244991
> 
> 赞同：0
> 
> 时间：2012-04-20T11:02:58.173
> 
> 标签：php, drupal, jquery

我正在使用**drupal**并且我已经使用jquery加载功能成功加载了节点创建表单

```
<div id='test'></div>
<a href='#' id='test2'>test</a> 
```

所以当点击链接时它会加载表单

```
var ajax_load = "loading...";
var loadUrl = "NODE_CREATE_PATH";
$("#test2").click(function(){           
   $("#test").html(ajax_load).load(loadUrl);                
}); 
```

现在我的问题是像日期弹出窗口这样的所有脚本都不适用于这个 loded 表单。有人建议我使用[http://api.jquery.com/live/](http://api.jquery.com/live/)，但我不知道如何使用。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:21:44.533

这是因为 DOM 正在使用新的 HTML 重新加载。因此，您在这些节点上的绑定将不再起作用。

您可以使用：[http](http://api.jquery.com/on/) ://api.jquery.com/on/ （不推荐使用实时事件）进行其他绑定，但据我所知，日期选择器不能使用。

你可以这样做：

```
function bindStuff(node) {
    node.find('.datepicker').datepicker();
    // Do some more bindings here
}

$("#test2").click(function(){
   $("#test").html(ajax_load).load(loadUrl, function() {
       bindStuff($("#test"));
   });
});

$("#example2").click(function(){
   $("#example").html(ajax_load).load(loadUrl, function() {
       bindStuff($("#example"));
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T08:56:57.337

使用 Drupal.attachBehaviors() 我们可以:)

例子

```
$(id).load(url, function(){
    Drupal.attachBehaviors(this);
}); 
```

# c++ - igraph_neighborhood "Valgrind 输出：块在丢失记录中间接丢失"

> ID：10244992
> 
> 赞同：0
> 
> 时间：2012-04-20T11:02:58.627
> 
> 标签：c++, igraph

下一个代码使用 igraph_neighborhood，它运行良好，我不知道为什么我得到

```
#include <igraph.h>
#include <fstream>
#include <iostream>
#include <stdlib.h>
#include <vector>
#include <algorithm>

void print_vector(igraph_vector_t *v, FILE *f) {
  long int i;
  for (i=0; i<igraph_vector_size(v); i++) {
    fprintf(f, " %li", (long int) VECTOR(*v)[i]);
  }
  fprintf(f, "\n");
}

using namespace std;

int main() {

  igraph_t g;
  igraph_vector_t v;

  igraph_vector_init(&v,32);
  VECTOR(v)[0]=0; VECTOR(v)[1]=1;
  VECTOR(v)[2]=0; VECTOR(v)[3]=4;
  VECTOR(v)[4]=0; VECTOR(v)[5]=9;
  VECTOR(v)[6]=1; VECTOR(v)[7]=7;
  VECTOR(v)[8]=1; VECTOR(v)[9]=9;
  VECTOR(v)[10]=2; VECTOR(v)[11]=9;
  VECTOR(v)[12]=2; VECTOR(v)[13]=3;
  VECTOR(v)[14]=2; VECTOR(v)[15]=5;
  VECTOR(v)[16]=3; VECTOR(v)[17]=6;
  VECTOR(v)[18]=3; VECTOR(v)[19]=9;
  VECTOR(v)[20]=4; VECTOR(v)[21]=5;
  VECTOR(v)[22]=4; VECTOR(v)[23]=8;
  VECTOR(v)[24]=5; VECTOR(v)[25]=8;
  VECTOR(v)[26]=6; VECTOR(v)[27]=7;
  VECTOR(v)[28]=6; VECTOR(v)[29]=8;
  VECTOR(v)[30]=7; VECTOR(v)[31]=8;

  igraph_create(&g, &v, 0,0);

  // Cycle 1
  igraph_vector_ptr_t vn1;
  igraph_vs_t vs;
  long int i;

  igraph_vector_ptr_init(&vn1, 10);
  for (i=0; i<igraph_vector_ptr_size(&vn1); i++) {
    VECTOR(vn1)[i] = calloc(1, sizeof(igraph_vector_t));
    igraph_vector_init((igraph_vector_t *)VECTOR(vn1)[i], 0);
  }

  igraph_vs_vector_small(&vs, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, -1);
  igraph_neighborhood(&g, &vn1,vs, 1, IGRAPH_OUT);

  for (i=0; i<igraph_vector_ptr_size(&vn1); i++) {
    print_vector((igraph_vector_t *)VECTOR(vn1)[i],stdout);
    igraph_vector_destroy((igraph_vector_t *)VECTOR(vn1)[i]);
    free((igraph_vector_t *)VECTOR(vn1)[i]);
  } 

  igraph_vector_ptr_destroy(&vn1);
  igraph_vs_destroy(&vs);
  igraph_destroy(&g);

  if (!IGRAPH_FINALLY_STACK_EMPTY) return 1;

  return 0;
} 
```

它运行良好，但我有下一个输出 Valgrind：它运行良好，但我有下一个输出 Valgrind：它运行良好，但我有下一个输出 Valgrind：

```
 ==13517== Memcheck, a memory error detector
==13517== Copyright (C) 2002-2009, and GNU GPL'd, by Julian Seward et al.
==13517== Using Valgrind-3.6.0.SVN-Debian and LibVEX; rerun with -h for copyright info
==13517== Command: ./example
==13517== 
--13517-- Valgrind options:
--13517--    --suppressions=/usr/lib/valgrind/debian-libc6-dbg.supp
--13517--    --leak-check=full
--13517--    -v
--13517-- Contents of /proc/version:
--13517--   Linux version 2.6.32-35-generic-pae (buildd@vernadsky) (gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5) ) #78-Ubuntu SMP Tue Oct 11 17:01:12 UTC 2011
--13517-- Arch and hwcaps: X86, x86-sse1-sse2
--13517-- Page sizes: currently 4096, max supported 4096
--13517-- Valgrind library directory: /usr/lib/valgrind
--13517-- Reading syms from /lib/ld-2.11.1.so (0x4000000)
--13517-- Reading debug info from /lib/ld-2.11.1.so ..
--13517-- .. CRC mismatch (computed 45f50ae1 wanted 137bc614)
--13517-- Reading debug info from /usr/lib/debug/lib/ld-2.11.1.so ..
--13517-- Reading syms from /home/rvaca/workSpalceIgraphCpp/proyIgraph/example (0x8048000)
--13517-- Reading syms from /usr/lib/valgrind/memcheck-x86-linux (0x38000000)
--13517--    object doesn't have a dynamic symbol table
--13517-- Reading suppressions file: /usr/lib/valgrind/debian-libc6-dbg.supp
--13517-- Reading suppressions file: /usr/lib/valgrind/default.supp
--13517-- REDIR: 0x40160b0 (index) redirected to 0x3803e9b3 (vgPlain_x86_linux_REDIR_FOR_index)
--13517-- Reading syms from /usr/lib/valgrind/vgpreload_core-x86-linux.so (0x401f000)
--13517-- Reading syms from /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so (0x4022000)
==13517== WARNING: new redirection conflicts with existing -- ignoring it
--13517--     new: 0x040160b0 (index               ) R-> 0x04025c30 index
--13517-- REDIR: 0x4016290 (strlen) redirected to 0x4026070 (strlen)
--13517-- Reading syms from /usr/local/lib/libigraph.so.0.0.0 (0x402b000)
--13517-- Reading syms from /usr/lib/libstdc++.so.6.0.13 (0x4213000)
--13517--    object doesn't have a symbol table
--13517-- Reading syms from /lib/tls/i686/cmov/libm-2.11.1.so (0x4308000)
--13517-- Reading debug info from /lib/tls/i686/cmov/libm-2.11.1.so ..
--13517-- .. CRC mismatch (computed a765a73c wanted 8d13be57)
--13517-- Reading debug info from /usr/lib/debug/lib/tls/i686/cmov/libm-2.11.1.so ..
--13517-- Reading syms from /lib/libgcc_s.so.1 (0x432e000)
--13517-- Reading debug info from /lib/libgcc_s.so.1 ..
--13517-- .. CRC mismatch (computed 338494ad wanted b1d69d39)
--13517--    object doesn't have a symbol table
--13517-- Reading syms from /lib/tls/i686/cmov/libc-2.11.1.so (0x434d000)
--13517-- Reading debug info from /lib/tls/i686/cmov/libc-2.11.1.so ..
--13517-- .. CRC mismatch (computed 2236eb0a wanted a071c0c3)
--13517-- Reading debug info from /usr/lib/debug/lib/tls/i686/cmov/libc-2.11.1.so ..
--13517-- Reading syms from /usr/lib/libxml2.so.2.7.6 (0x44a8000)
--13517-- Reading debug info from /usr/lib/libxml2.so.2.7.6 ..
--13517-- .. CRC mismatch (computed 8c0a5cb7 wanted d9f96831)
--13517--    object doesn't have a symbol table
--13517-- Reading syms from /usr/lib/libgmp.so.3.5.2 (0x45d3000)
--13517-- Reading debug info from /usr/lib/libgmp.so.3.5.2 ..
--13517-- .. CRC mismatch (computed b9cf7786 wanted 4db0a849)
--13517--    object doesn't have a symbol table
--13517-- Reading syms from /lib/tls/i686/cmov/libdl-2.11.1.so (0x4634000)
--13517-- Reading debug info from /lib/tls/i686/cmov/libdl-2.11.1.so ..
--13517-- .. CRC mismatch (computed 10f03463 wanted f15a6db6)
--13517-- Reading debug info from /usr/lib/debug/lib/tls/i686/cmov/libdl-2.11.1.so ..
--13517-- Reading syms from /lib/libz.so.1.2.3.3 (0x4638000)
--13517-- Reading debug info from /lib/libz.so.1.2.3.3 ..
--13517-- .. CRC mismatch (computed 53909dc3 wanted dc0e37c9)
--13517--    object doesn't have a symbol table
--13517-- REDIR: 0x43c0b10 (rindex) redirected to 0x4025ae0 (rindex)
--13517-- REDIR: 0x43c07f0 (__GI_strlen) redirected to 0x4026050 (__GI_strlen)
--13517-- REDIR: 0x43bc660 (calloc) redirected to 0x402417f (calloc)
--13517-- REDIR: 0x43bdec0 (realloc) redirected to 0x4024f4a (realloc)
--13517-- REDIR: 0x43c1930 (memset) redirected to 0x401f44c (_vgnU_ifunc_wrapper)
--13517-- REDIR: 0x445bef0 (__memset_sse2) redirected to 0x4027420 (memset)
--13517-- REDIR: 0x43bce60 (free) redirected to 0x4024ab5 (free)
--13517-- REDIR: 0x43c1f20 (memcpy) redirected to 0x401f44c (_vgnU_ifunc_wrapper)
--13517-- REDIR: 0x445d000 (__memcpy_ssse3) redirected to 0x40267f0 (memcpy)
--13517-- REDIR: 0x43c32b0 (strchrnul) redirected to 0x4027510 (strchrnul)
 0 1 4 9
 1 0 7 9
 2 3 5 9
 3 2 6 9
 4 0 5 8
 5 2 4 8
 6 3 7 8
 7 1 6 8
 8 4 5 6 7
 9 0 1 2 3
==13517== 
==13517== HEAP SUMMARY:
==13517==     in use at exit: 456 bytes in 21 blocks
==13517==   total heap usage: 73 allocs, 52 frees, 3,428 bytes allocated
==13517== 
==13517== Searching for pointers to 21 not-freed blocks
==13517== Checked 425,428 bytes
==13517== 
==13517== 200 (120 direct, 80 indirect) bytes in 10 blocks are definitely lost in loss record 2 of 3
==13517==    at 0x402425F: calloc (vg_replace_malloc.c:467)
==13517==    by 0x8048DF7: main (startdIII.cpp:76)
==13517== 
==13517== 256 bytes in 1 blocks are definitely lost in loss record 3 of 3
==13517==    at 0x402425F: calloc (vg_replace_malloc.c:467)
==13517==    by 0x40C9A78: igraph_vector_init (vector.pmt:123)
==13517==    by 0x8048B43: main (startdIII.cpp:49)
==13517== 
==13517== LEAK SUMMARY:
==13517==    definitely lost: 376 bytes in 11 blocks
==13517==    indirectly lost: 80 bytes in 10 blocks
==13517==      possibly lost: 0 bytes in 0 blocks
==13517==    still reachable: 0 bytes in 0 blocks
==13517==         suppressed: 0 bytes in 0 blocks
==13517== 
==13517== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 27 from 6)
--13517-- 
--13517-- used_suppression:     27 dl-hack3-cond-1
==13517== 
==13517== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 27 from 6) 
```

怎么了？我一直在尝试不同的方式，但它继续以相同的输出。

感谢提前

放假

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:57:37.153

1.  你的向量`v`永远不会被破坏——这就是你在 Valgrind 中得到第二个警告的原因。

2.  您必须将一个已初始化但为空的值传递`igraph_vector_ptr_t`给`igraph_neighborhood`，否则它将简单地删除已经存在的指针（和向量）并分配新的指针。这是因为`igraph_neighborhood`不知道 in 中的指针`igraph_vector_ptr_t`是如何分配的以及应该在它们上调用什么析构函数（如果有的话），所以它试图造成最小的损害并简单地忽略它们。因此，无需`igraph_vector_ptr_t`在第一个 for 循环中预加载向量。这消除了第一个警告。

# mysql - Mysql在发送数据时需要更多时间

> ID：10244994
> 
> 赞同：3
> 
> 时间：2012-04-20T11:03:18.313
> 
> 标签：mysql, sql, drupal-views, cpu-usage

我有这个需要很长时间才能执行的特定查询，同一张表上的其他查询执行得非常快。在 mysql 中启用了 Querycache，但以下查询仍然每次都需要超过 80 秒，并且 CPU 使用率超过 100%。

我无法修改查询，因为它是由 Drupal 生成的。我还能做些什么来提高性能吗？

**查询**是：

```
select count(*) 
from (
    SELECT slk.key_id AS key_id 
    FROM slk slk  
        LEFT JOIN users users ON    slk.uid = users.uid 
        LEFT JOIN node node_users ON users.uid = node_users.uid 
            AND   node_users.type = 'profile'
) count_alias; 
```

以下是**个人资料**信息：

```
+--------------------------------+-----------+
| Status                         | Duration  |
+--------------------------------+-----------+
| starting                       |  0.000029 | 
| checking query cache for query |  0.000093 | 
| Opening tables                 |  0.000210 | 
| System lock                    |  0.000007 | 
| Table lock                     |  0.000075 | 
| optimizing                     |  0.000008 | 
| statistics                     |  0.000113 | 
| preparing                      |  0.000027 | 
| executing                      |  0.000004 | 
| Sending data                   | 66.086903 | 
| init                           |  0.000027 | 
| optimizing                     |  0.000009 | 
| executing                      |  0.000018 | 
| end                            |  0.000003 | 
| query end                      |  0.000004 | 
| freeing items                  |  0.000049 | 
| storing result in query cache  |  0.000116 | 
| removing tmp table             |  0.033162 | 
| closing tables                 |  0.000106 | 
| logging slow query             |  0.000003 | 
| logging slow query             |  0.000085 | 
| cleaning up                    |  0.000007 | 
+--------------------------------+-----------+ 
```

**对查询的**解释给出：****

 **```
| id | select_type | table      | type   | possible_keys         | key     | key_len | ref             | rows  | Extra                        |
|  1 | PRIMARY     | NULL       | NULL   | NULL                  | NULL    | NULL    | NULL            |  NULL | Select tables optimized away | 
|  2 | DERIVED     | slk        | ALL    | NULL                  | NULL    | NULL    | NULL            | 55862 |                              | 
|  2 | DERIVED     | users      | eq_ref | PRIMARY               | PRIMARY | 4       | gscom.slk.uid   |     1 | Using index                  | 
|  2 | DERIVED     | node_users | ref    | node_type,uid,idx_ctp | uid     | 4       | gscom.users.uid |     3 |                              | 
```

`idx_ctp``uid`是 ( , `type`)上的索引。

查询缓存正在工作，下面是统计信息。

`show variables like '%query_cache%';`：

```
| Variable_name                | Value    |
| have_query_cache             | YES      | 
| query_cache_limit            | 2097152  | 
| query_cache_min_res_unit     | 4096     | 
| query_cache_size             | 52428800 | 
| query_cache_type             | ON       | 
| query_cache_wlock_invalidate | OFF      | 
```

`mysql> show status like '%Qcache%';`：

```
| Variable_name           | Value    |
| Qcache_free_blocks      | 1255     | 
| Qcache_free_memory      | 22902848 | 
| Qcache_hits             | 1484908  | 
| Qcache_inserts          | 1036344  | 
| Qcache_lowmem_prunes    | 95086    | 
| Qcache_not_cached       | 3975     | 
| Qcache_queries_in_cache | 14271    | 
| Qcache_total_blocks     | 30117    | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:25:14.803

您需要以下索引：

*   表`slk`： `(uid)`
*   表`node_users`：`(type, uid)`

* * *

查询可以在没有子查询的情况下重写，如：

```
SELECT COUNT(*) 
FROM slk 
    LEFT JOIN users 
        ON slk.uid = users.uid 
    LEFT JOIN node node_users 
        ON  users.uid = node_users.uid 
        AND node_users.type = 'profile' 
```

* * *

而且我真的不确定你为什么使用`LEFT JOIN`. 您可能可以使用`INNER JOIN`并获得相同的结果。或者只使用简单的：

```
SELECT COUNT(*) 
FROM slk 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T14:06:24.157

这是一个糟糕的查询。它从`slk`表中选择所有 55862 行并将所有 55862 行连接到另外两个表。

大型结果集上的 JOIN 是性能杀手，因为 MySQL 最多只能对主表中的每一行执行查找到详细表中的相应行。如果行太多，MySQL 将决定扫描整个明细表而不是执行如此多的查找更快。

正如 ypercube 建议的那样，在 上创建多列索引`node_users: (uid, type)`将有助于第二个连接（到 node_users）表。

理想情况下，如果这个查询使用的是 INNER JOINs 而不是 LEFT OUTER JOINs，我们可以通过允许 MySQL 向后遍历它来优化查询，从 ypercube 开始`AND node_users.type = 'profile'`并按照他建议的顺序给它提供 ypercube 建议的索引。但是，由于它们是左连接，MySQL 仍然希望获取`slk`表中的所有行，并将从那里开始。

要在不修改此查询的情况下提高此查询的性能，您唯一可以做的额外的事情是避免使用覆盖索引来访问表数据。

这将使用更多的内存，但希望它会更快，因为它可以从索引中读取所有值（在内存中）而不是访问磁盘。这意味着您有足够的 RAM 来支持内存中的所有索引，并且您已配置 MySQL 以使用它。

您已经有一个覆盖索引`users`（参见`Using index`EXPLAIN 结果）。您希望 DERIVED 查询的所有三行都显示`Using index`在 Extra 列中。

创建附加的以下覆盖索引：

```
slk: (key_id, uid) 
```

上面已经提到了这个，但我再次将它包括在这里，所以你不要忘记它：

```
node_users: (uid, type) 
```

你不会在这里获得突破性的表现，因为你仍然需要做所有的 JOIN，但你会得到一些改进。让我们知道它有多快。我猜快两倍。**