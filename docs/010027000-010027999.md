# StackOverflow 问答 10027000-10027999

# .net - .NET 音译库是否存在？

> ID：10027001
> 
> 赞同：8
> 
> 时间：2012-04-05T10:36:11.100
> 
> 标签：.net, transliteration

.NET[音译](http://en.wikipedia.org/wiki/Transliteration)库是否存在？请注意，这不是翻译，类似于 Perl lib ：

[http://www.lingua-systems.com/transliteration/Lingua-Translit-Perl-module/](http://www.lingua-systems.com/transliteration/Lingua-Translit-Perl-module/)

我只是发现：

[http://transliterator.codeplex.com/](http://transliterator.codeplex.com/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T21:27:34.597

检查我的**[UnidecodeSharpFork](https://bitbucket.org/DimaStefantsov/unidecodesharpfork)**。

它基于出色的[Python Unidecode](http://pypi.python.org/pypi/Unidecode)音译表，支持多种语言。

示例用法：

```
Assert.AreEqual("CZSczs", "ČŽŠčžš".Unidecode());
Assert.AreEqual("Hello, World!", "Hello, World!".Unidecode());
Assert.AreEqual("Rabota s kirillitsey", "Работа с кириллицей".Unidecode()); 
```

简单、快速、强大。如果您愿意，可以轻松扩展/修改音译表。

# qt - QGraphicsView 上的分离层之类的功能

> ID：10027008
> 
> 赞同：1
> 
> 时间：2012-04-05T10:36:47.353
> 
> 标签：qt, qgraphicsview, qgraphicsscene

在我的`QGraphicsView`中，我显示了一张地图。我需要在上边缘和左边缘分别显示水平标尺和垂直标尺。

地图需要滚动，但上述标尺应显示在其固定位置，但更改其比例值。

我试图实现这个使用`drawForeground`方法。由于地图尺寸较大，我只绘制可见区域。所以我需要`update()`每次滚动完成。但这个结果有时会闪烁。

我觉得最好有类似的方法。

解决问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T10:04:15.007

实现上下左右标尺的正确方法是从QGraphicsView派生出来，然后在构造函数中调用：

> ```
> // add two rulers on top and left.
> setViewportMargins(20, 20, 0, 0);
> 
> // add grid layout
> QGridLayout* gridLayout = new QGridLayout();
> gridLayout->setSpacing(0);
> gridLayout->setMargin(0);
> 
> // create rulers
> hRuler = new Ruler(Qt::Horizontal);
> vRuler = new Ruler(Qt::Vertical);
> 
> // add items to grid layout
> QWidget* corner = new QWidget();
> corner->setBackgroundRole(QPalette::Window);
> corner->setFixedSize(20, 20);
> gridLayout->addWidget(corner, 0, 0);
> gridLayout->addWidget(hRuler, 0, 1);
> gridLayout->addWidget(vRuler, 1, 0);
> gridLayout->addWidget(viewport(), 1, 1);
> 
> // finally set layout
> setLayout(gridLayout); 
> ```

该解决方案最初是[在此处介绍的](http://kernelcoder.wordpress.com/2010/08/25/how-to-insert-ruler-scale-type-widget-into-a-qabstractscrollarea-type-widget/)，并且效果很好。结果[看起来像这样](http://pix.academ.org/img/2011/11/30/3e80b64f1721810f923d312267402dcb.png)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T02:57:36.117

我只是将图形视图的 ViewportUpdateMode 更改为 FullViewportUpdate 以摆脱闪烁。

您也可以使用 SmartViewportUpdate 获得不错的结果。

缺点是，在动画期间，这需要更多的处理能力。

# python - 解决python中的循环导入错误

> ID：10027011
> 
> 赞同：8
> 
> 时间：2012-04-05T10:37:09.510
> 
> 标签：python, class, python-import

> **可能重复：**
> [Python 中的循环（或循环）导入](https://stackoverflow.com/questions/744373/circular-or-cyclic-imports-in-python)

我有 B 类，它导入并创建 A 类的实例。A 类需要在其构造函数中引用 B，因此包括 B。

```
from a import A
class B:
  def __init__(self):
    self.a = A() 
```

* * *

```
from b import B
class A:
  def __init__(self, ref):
    assert isinstance(ref, B)
    self.ref = ref 
```

这行不通。主文件导入 B 并使用它......不是。进口的东西是错误的。

来自文件 a **ImportError 的错误：无法导入名称 B**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-05T10:43:10.570

除了“不要那样做，你把自己画在一个角落里”，你还可以推迟 B 的导入，直到你需要它。文件`a.py`：

```
class A:
    def __init__(self, ref):
        from b import B
        assert isinstance(ref, B)
        self.ref = ref 
```

`B`在您实例化 class 之前，不会导入Class `A`，此时模块已经完全由 module 导入`b`。

您还可以使用通用基类并对其进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T10:43:00.643

只需在`__init__`方法中导入类

```
class A:
   def __init__(self, ref):
      from b import B
      assert isinstance(ref, B)
      self.ref = ref 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T11:26:50.783

该`__init__`方法在您创建类的实例时执行。在这种情况下，您应该通过简单地更改导入语句来使其工作，如下所示：

```
import a 
class B:
  def __init__(self):
    self.a = a.A(self) 
```

* * *

```
import b
class A:
  def __init__(self, ref):
    assert isinstance(ref, b.B)
    self.ref = ref 
```

# linux - 如何找到我的程序的系统调用的位置？

> ID：10027013
> 
> 赞同：1
> 
> 时间：2012-04-05T10:37:20.007
> 
> 标签：linux, debugging, strace

来自 strace 手册：

```
-i Print the instruction pointer at the time of the system call. 
```

我跟踪我的程序：

```
strace -i prog 
```

结果我得到了很多系统调用。其中之一：

```
[000da49c] open("./rabbit.o", O_RDONLY) = 3 
```

但是在这个 prog 地址的反汇编指令不会调用任何系统调用（hte 编辑器）：

```
da49c !   mov         r7, ip 
```

怎么了？如何找到我的程序的系统调用的位置？

我的设备的 PS 架构不支持 GDB 命令 catch 系统调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:25:30.857

引用“strace”手册页的 Bugs 部分：

```
The -i option is weakly supported. 
```

另一个可能对您有所帮助的提示：您是否查看过前面的代码？在系统调用之后，IP 已经指向 NEXT 指令。所以你应该检查之前的说明`da49c`。

# iphone - UIScrollView 在 iPhone 上滞后

> ID：10027017
> 
> 赞同：0
> 
> 时间：2012-04-05T10:37:28.460
> 
> 标签：iphone, uiscrollview, uibutton, lag

我正在尝试创建一个填字游戏应用程序。游戏在 UIScrollView 中运行，因为玩家应该能够缩放、滚动等。最大的填字游戏是 21x21，这意味着需要有 441 个可触摸的图块。到目前为止，我尝试的是创建一个 UIView 并将其作为子视图添加到 UIScrollView。然后我调用一个创建 441 个自定义 UIButtons 并设置 backgroundImage 的方法。

一些 UIButtons 需要有一个自定义标签覆盖，所以我添加了一个 UILabel 并将其设置在 UIButton 的顶部。

当我在模拟器中运行应用程序时，一切正常，但是当我在 iPhone 4 上测试它时，UIScrollView 滞后了很多。

不知道这个方法可以吗？您能否尝试指导我如何做到这一点的正确方向，以便 UIScrollView 不会在设备上滞后。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:53:52.200

如果`UIScrollView`没有某种缓存机制，比如`UITableView`.

但是，为了让渲染更轻松，您可以做的一件事是确保尽可能使用不透明背景。与其使视图透明，不如将其设置为与其底层视图相同的颜色。这确实有帮助。

此外，我使用`imageWithContentsOfFile:`而不是`imageNamed:`初始化要在`UIScrollView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:31:14.707

为了不将所有这些按钮保留在内存中，您应该使用可重用的表格视图单元格，这将真正提高滚动性能。这是一个可以让您的生活更轻松的组件：[DTGridView](https://github.com/danielctull/DTGridView)，还有其他组件（您可以查看[Cocoa Controls](http://cocoacontrols.com/)）

# java - 从多个线程写入文本文件？

> ID：10027020
> 
> 赞同：6
> 
> 时间：2012-04-05T10:37:36.853
> 
> 标签：java, multithreading

我有 20 个线程使用 println() 函数在名为 results.txt 的文件上写入。我怎样才能同步它们？

我注意到每次我的程序运行时，results.txt 中的文本行数都不同。

谢谢你。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-05T10:42:04.470

通过包含[同步方法](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)的类访问文件以写入文件。一次只有一个线程能够执行该方法。

我认为单例模式适合您的问题：

```
package com.test.singleton;

public class Singleton {
    private static final Singleton inst= new Singleton();

    private Singleton() {
        super();
    }

    public synchronized void writeToFile(String str) {
        // Do whatever
    }

    public static Singleton getInstance() {
        return inst;
    }

} 
```

每次您需要写入文件时，您只需调用：

```
Singleton.getInstance().writeToFile("Hello!!"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-05T15:09:16.327

重复的问题...重复的答案。[正如我在这里所说：](https://stackoverflow.com/a/9976133/823393)

如果您可以将文件保存为 a `FileOutputStream`，则可以像这样锁定它：

```
FileOutputStream file = ...
....
// Thread safe version.
void write(byte[] bytes) {
  try {
    boolean written = false;
    do {
      try {
        // Lock it!
        FileLock lock = file.getChannel().lock();
        try {
          // Write the bytes.
          file.write(bytes);
          written = true;
        } finally {
          // Release the lock.
          lock.release();
        }
      } catch ( OverlappingFileLockException ofle ) {
        try {
          // Wait a bit
          Thread.sleep(0);
        } catch (InterruptedException ex) {
          throw new InterruptedIOException ("Interrupted waiting for a file lock.");
        }
      }
    } while (!written);
  } catch (IOException ex) {
    log.warn("Failed to lock " + fileName, ex);
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T11:20:05.207

您打算将数据写入一个文件。因此，如果您尝试锁定整个文件，最好使用单个线程来完成这项工作。虽然你生成了 20 个线程，但是每次调用方法时只有一个在运行，其他的只是在等待锁。

我建议您使用`RandomAccessFile`将数据写入文件。然后每个线程可以在不锁定整个文件的情况下将一些唯一数据写入文件。

一些演示代码如下

```
try {
    final RandomAccessFile file = new RandomAccessFile("/path/to/your/result.txt", "rw");
    final int numberOfThread = 20;
    final int bufferSize = 512;
    ExecutorService pool = Executors.newFixedThreadPool(numberOfThread);
    final AtomicInteger byteCounter = new AtomicInteger(0);
    final byte[] yourText = "Your data".getBytes();
    for (int i = 0; i < yourText.length; i++) {
        pool.submit(new Runnable() {
            @Override
            public void run() {
                int start = byteCounter.getAndAdd(bufferSize);
                int chunkSize = bufferSize;
                if (start + bufferSize > yourText.length) {
                    chunkSize = yourText.length - start;
                }
                byte[] chunkData = new byte[chunkSize];
                System.arraycopy(yourText, start, chunkData, 0, chunkSize);
                try {
                    file.write(chunkData);
                } catch (IOException e) {
                    //exception handle
                }
            }
        });
    }
    file.close();
} catch (Exception e) {
    //clean up
} 
```

# c++ - 变换向量 > X 到 IplImage* 或 cv::Mat*

> ID：10027022
> 
> 赞同：1
> 
> 时间：2012-04-05T10:37:50.177
> 
> 标签：c++, opencv, vector

我有一个`vector<vector<Point> >`X 但我需要将它传递给`cvConvexityDefects`接受输入 a的函数`CvArr*`。

我已经阅读了[Convexity 缺陷 C++ OpenCv](https://stackoverflow.com/questions/6806637/convexity-defects-c-opencv)主题。它接受输入这些变量：

```
vector<Point>& contour, vector<int>& hull, vector<Point>& convexDefects 
```

我无法使解决方案正常工作，因为我有一个船体参数 a`vector<Point>`并且我不知道如何将其转换为 a `vector<int>`。

所以现在有两个问题！:)

如何将 a 转换`vector<vector<Point> >`为 a `vector<int>`？

提前谢谢，祝你有美好的一天！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:56:55.007

使用`std::for_each`和累积对象：

```
class AccumulatePoints
{
public:
    AccumulatePoints(std::vector<int>& accumulated)
    : m_accumulated(accumulated)
    {
    }

    void operator()(const std::vector<Point>& points)
    {
        std::for_each(points.begin(), points.end(), *this);
    }

    void operator()(const Point& point)
    {
        m_accumulated.push_back(point.x);
        m_accumulated.push_back(point.y);
    }
private:
    std::vector<int>& m_accumulated;
}; 
```

像这样使用：

```
int main()
{
    std::vector<int> accumulated;
    std::vector<std::vector<Point>> hull;

    std::for_each(hull.begin(), hull.end(), AccumulatePoints(accumulated));

    return 0;
} 
```

# cdn - CDN 是或否在这种情况下

> ID：10027027
> 
> 赞同：0
> 
> 时间：2012-04-05T10:38:15.840
> 
> 标签：cdn

访问次数/点击次数增加但访问次数增加的网站，在少数数据库上大量运行，平均服务时间为 0.6 秒/请求，大部分时间都花在“第一个字节”上（大约 30%/0.2 秒/平均），所以继续努力解决那个问题。

我考虑的另一种提高速度的方法是使用 CDN。在这种情况下，我不太确定 CDN 是否有帮助：-它都是动态内容-有很多图像-已经有内部缓存（前端），（如果重要的话，还可以在客户端缓存）

那么，请告诉我您的建议，我应该尝试使用 CDN 以及我可以期待多少改进？（交通主要是美国）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:00:00.137

正如@matthias 所说，接受你的其他一些答案......

CDN 是否会产生很大的影响取决于它们与服务器的距离以及延迟情况。

CDN 将为您提供更多连接，但您可以通过添加额外的主机名来做到这一点。

可能还有其他改进页面加载时间的方法，在webpagetest.org 上运行测试并发布结果。

# c# - .NET 任务并行库

> ID：10027029
> 
> 赞同：2
> 
> 时间：2012-04-05T10:38:35.533
> 
> 标签：c#, .net, multithreading, parallel-processing, task

我已经阅读了有关 TPL 的文档和许多教程，但没有一个涵盖我想要实现的模型。

某些算法总是有固定的迭代次数。

我需要不断运行线程（尽可能多）：

而（真）

*   从主线程获取数据
*   执行繁重的耗时任务（在单独的线程中）
*   更新主线程信息

另外，我需要能够设置闹钟（例如 5 秒）的机制。五秒钟后，所有工作必须暂停一段时间，然后再恢复。

我应该使用 Task.ContinueWith 相同的任务吗？但我不是在处理先前任务启动的结果，而是在主线程中更新数据结构，然后决定新任务迭代的输入是什么......

我如何让 TPL 决定应该创建多少任务以获得最佳效率？

不，我正在使用 BackgroundWorkers，因为它们有很好的 RunEventCompleted 事件 - 在它里面我在我的主线程上，所以我可以更新我的 MAIN 结构，检查时间限制，然后最终在完成的 BackgroundWorker 上再次调用 StartAsync。它很好很清晰，但可能非常无用。我需要让它在多处理器、多核服务器上高效。

一个问题是计算总是在线的，永远不会停止。还有一些网络，可以远程询问 MAIN 结构的当前状态。

第二个问题是关键时间控制（我必须有精确的计时器——当它停止时，没有线程可以重新启动）。然后是特殊的高优先级任务，结束后，所有工作都恢复了。

第三个问题是操作没有上限。

根据我的观察，这三个约束不能很好地遵循 TPL - 我不能使用像 Parallel.For 这样的东西，因为集合是由任务本身的结果实时修改的......我也不知道如何组合：

*   让 TPL 决定应该创建多少线程的能力
*   具有线程的生命周期运行（在连续重新启动之间具有暂停和同步点）
*   在开始时只创建一次线程（它们应该只用不断的新参数重新启动）

有人可以给我线索吗？我知道如何做坏事，效率低下。我描述了一些小要求，这使我无法做到这一点。我有点困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:41:59.620

您需要使用消息传递 + 演员 + 调度程序 imo。然后你需要使用一种能够胜任它的语言。查看从 Azure 服务总线异步接收、在共享队列中排队并通过参与者管理运行时状态的[代码。](http://%20https://github.com/mpsbroadband/MassTransit-AzureServiceBus/blob/master/src/MassTransit.Async/Receiver.fs)

排队：

> 我应该使用 Task.ContinueWith 相同的任务吗？

不，ContinueWith 将根据每个延续传递内部的异常处理来终止您的程序；TPL 中没有将失败状态编组到调用端/主线程的好方法。

> 但我不是在处理先前任务启动的结果，而是在主线程中更新数据结构，然后决定新任务迭代的输入是什么......

为此，您需要超越线程，除非您愿意在问题上花费大量时间。

> 我如何让 TPL 决定应该创建多少任务以获得最佳效率？

这由运行您的异步工作流的框架处理。

> 不，我正在使用 BackgroundWorkers，因为它们有很好的 RunEventCompleted 事件 - 在它里面我在我的主线程上，所以我可以更新我的 MAIN 结构，检查时间限制，然后最终在完成的 BackgroundWorker 上再次调用 StartAsync。它很好很清晰，但可能非常无用。我需要让它在多处理器、多核服务器上高效。
> 
> 一个问题是计算总是在线的，永远不会停止。还有一些网络，可以远程询问 MAIN 结构的当前状态。第二个问题是关键时间控制（我必须有精确的计时器——当它停止时，没有线程可以重新启动）。

如果您以异步方式运行所有内容，则可以将消息传递给暂停它的参与者。你的调度actor负责用他们的调度消息调用它的所有订阅者；查看`paused`链接代码中的状态。如果您有未完成的请求，您可以向他们传递取消令牌并以这种方式处理“硬”取消/套接字中止。

> 然后是特殊的高优先级任务，结束后，所有工作都恢复了。根据我的观察，这两个约束不能很好地遵循 TPL - 我不能使用类似 Parallel.For 之类的东西，因为集合是由任务本身的结果实时修改的......

您可能需要一种称为管道和过滤器的模式。您将输入输入到一系列工人（演员）中；每个工人从其他工人的产出中消费。使用控制通道（在我的情况下是参与者的收件箱）完成信号发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T08:38:06.053

我认为你应该阅读

[MSDN：如何实现生产者/消费者数据流模式](https://msdn.microsoft.com/en-us/library/hh228601(v=vs.110).aspx)

我遇到了同样的问题：一个生产者生产商品，而几个消费者消费了它们并决定将它们发送给其他消费者。每个消费者都在异步工作，并且独立于其他消费者。

你的主要任务是生产者。他生产您的其他任务应该处理的项目。带有主要任务代码的类有一个功能：

```
public async Task ProduceOutputAsync(...) 
```

您的主程序使用以下命令启动此任务：

```
var producerTask = Task.Run( () => MyProducer.ProduceOutputAsync(...) 
```

一旦这被调用，生产者任务开始产生输出。同时你的主程序可以继续做其他事情，比如启动消费者。

但让我们首先关注 Producer 任务。

生产者任务产生类型为 T 的项目以供其他任务处理。使用实现 ITargetBlock 的对象将它们转移到其他任务。

每次生产者任务完成创建类型 T 的对象时，它都会使用 ITargetBlock.Post 或最好是异步版本将其发送到目标块：

```
while (continueProducing())
{
    T product = await CreateProduct(...)
    bool accepted = await this.TargetBlock(product)
    // process the return value
}
// if here, nothing to produce anymore. Notify the consumers:
this.TargetBlock.Complete(); 
```

生产者需要一个 ITargetBlock `<T`>。在我的应用程序中，一个 BufferBlock `<T`> 就足够了。检查 MSDN 以了解其他可能的目标。

无论如何，数据流块也应该实现 ISourceBlock `<T`>。您的接收器等待输入到达源，获取并处理它。完成后，它可以将结果发送到自己的目标块，并等待下一个输入，直到不再有预期的输入。当然，如果您的消费者不产生输出，它就不必向目标发送任何内容。

等待输入的过程如下：

```
ISourceBlock`<T`> mySource = ...;
while (await mySource.ReceiveAsync())
{   // a object of type T is available at the source
    T objectToProcess = await mySource.ReceiveAsync();
    // keep in mind that someone else might have fetched your object
    // so only process it if you've got it.
    if (objectToProcess != null)
    {
        await ProcessAsync(objectToProcess);

        // if your processing produces output send the output to your target:
        var myOutput = await ProduceOutput(objectToprocess);
        await myTarget.SendAsync(myOutput);
    }
}
// if here, no input expected anymore, notify my consumers:
myTarget.Complete(); 
```

*   构建你的生产者
*   构建所有消费者
*   给生产者一个 BufferBlock 以将其输出发送到
*   启动生产者 MyProducer.ProduceOutputAsync(...)
*   当生产者产生输出并将其发送到缓冲区块时：
*   给消费者相同的 BufferBlock
*   将消费者作为单独的任务启动
*   await Task.WhenAll(...) 等待所有任务完成。

每个消费者将在听到不再需要输入时立即停止。完成所有任务后，您的 main 函数可以读取结果并返回

# javascript - memoize 延续传递风格函数

> ID：10027032
> 
> 赞同：5
> 
> 时间：2012-04-05T10:38:42.193
> 
> 标签：javascript, memoization, continuation-passing

我想知道是否有一种方法可以实现一个通用的“memoize”函数（如在一个函数作为输入和一个函数作为输出的函数中，作为 python 的装饰器），它也能够处理 cps 样式的函数。

对于普通函数（如“结果值通过返回返回，参数仅用于输入！”），memoize 函数可以像（在 javascript 中）一样简单

```
function memoize(fun) {
    var cache = {};
    return function () {
        var args = Array.prototype.slice.call(arguments);
        if (args in cache)
            return cache[args];
        var ret = fun.apply(this, arguments);
        cache[args] = ret;
        return ret;
    };
} 
```

但是我的简单函数无法记住 cps 风格的`memoize`函数，因为我需要“再次”评估函数类型的参数，还需要知道要传递给它们的参数。

例如，给定函数

```
function cps(param, next) {
    var ret = param + 1;

    // setTimeout for simulate async behaviour
    setTimeout(function () {
            next(ret);
    }, 0);
} 
```

也许我可以找到它`next`是一个函数，但它的签名（嗯......也许，但它很棘手），绝对不是函数中使用的参数！

有人可以告诉我我错了吗？:D

我有兴趣能够记住半打 cps 风格的函数，我不想弄乱在每个函数中插入“缓存”的逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T20:36:43.143

我是 CPS 的新手，但我认为您必须以特定方式构造函数。

您的 CPS 函数具有以下结构（从您的示例中概括）：

```
function cps(param, next) {
    var ret = someFunctionOfParam(param);

    // setTimeout for simulate async behaviour
    setTimeout(function () {
        next(ret);
    }, 0);
} 
```

因此，您可以使用标准记忆器，也可以构建 CPS 函数。首先是 CPS-maker（假设函数的最后一个参数始终是要传递给的函数）：

```
function cpsMaker(transformFunc) {
    return function() {
               var args = Array.prototype.slice.call(arguments);
               var next = args.pop(); // assume final arg is function to call
               var ret = transformFunc.apply(this,args);
               // setTimeout for simulate async behaviour
               setTimeout(function () {
                   next(ret);
               }, 0);
           }
} 
```

然后可以结合使用memoizer：

```
function plusOne(val) {
    return val+1;
}

var memoPlusOne = memoize(plusOne);
var cpsMemPlusOne = cpsMaker(memoPlusOne);

cpsMemPlusOne(3,function(n){console.log(n)}); 
```

关键是将变换的记忆与 CPS 构造分开。

感谢您介绍 memoized CPS 的概念；即使这个答案是垃圾，也让我大开眼界！

# java - Struts 2 checkbox：当fieldValue只能为true或false时，value属性有什么用？

> ID：10027033
> 
> 赞同：3
> 
> 时间：2012-04-05T10:38:42.907
> 
> 标签：java, checkbox, struts2, struts

*   为什么我们在标签中需要一个**value**属性和一个**fieldValue**属性，而不像只有**value**属性？`s:checkbox``s:textfield`

***   `s:checkbox`标签的属性是否允许“ **true** ”或“ **false**`fieldValue` ”以外的字符串？在 Struts2 in Action (Manning) 中，它谈到了属性****`fieldValue`****** 

 ******> 复选框将提交的实际值。也许是真的或假的

也就是说，如果我使用

`<s:checkbox name="wantMoreChocolates" fieldValue="true"/>`

那么**wantMoreChocolate**在java类中只能是布尔类型。在这种情况下，**为什么文档将 fieldValue 的类型指定为 String 而不是 Boolean**？

*   此外，关于价值属性，它说

> 与其他 UI 组件一样，value 属性指向组件绑定到的实际 Java 端属性，在本例中为布尔值。

如果通过“ **value** ”我们指定组件绑定的实际属性，**那么name属性的作用是什么**。既然 name 属性必须指向一个 Boolean 值，为什么它必须使用 value 属性将它绑定到另一个 boolean ？

*   为什么不能仅根据name属性对应的属性进行预填充

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-04T11:47:29.497

我想我可以谈谈这个，因为我在这个话题上挣扎了很多。

我们可以在[官方文档](https://struts.apache.org/docs/checkbox.html)中找到关于`fieldValue`of 的内容`<s:checkbox>`：

> ```
> Name           fieldValue
> Required       FALSE
> Default        TRUE
> Evaluated      FALSE
> Description    The actual HTML value attribute of the checkbox. 
> ```

但它什么也没说。我建议将其更改为：

> 有了`fieldValue`，我们可以将类型值提交`String`到动作类中。

它的意思是：

*   当字符串字面意思是`"true"`or `"false"`，并且 action 类中的变量是`boolean`type 时，字符串会被自动解析为 boolean 值，存储在`boolean`type 变量中。
*   如果我们根本不定义`fieldValue`，则字符串类型的默认值`"true"`总是提交给变量，如果在Action类中有定义来保存它。

请注意，**如果我们已`fieldValue`设置，但未选中复选框，则不会将任何内容发送到后端，这意味着`String`接收复选框值的类型字段将为`null`.**

但是，它可以做的还不止这些。`<s:checkbox />`让我们看一个结合Struts 2 Action 类字段的命名规则的真实示例。

想象一下，我有一个复选框列表，例如，要选择一个用户列表，每个复选框都包含`idUser`要处理的复选框。现在，如果我想解析多个`idUser`来完成我的任务，我可以定义：

```
<s:iterator value="listUsers">
    <s:checkbox name="userId" id="userId" fieldValue="%{idUser}"
    ....
</s:iterator> 
```

现在我们将在我的动作类中收到一个数字列表，但具有相同的`name`. 然后我们定义一个类型的字段`List<String>`或一个数组来接收所有这些用户的 ID：

```
private List<String> userId; 
```

用它的getter/setter。然后我们可以用这个列表做我们想做的事。**请记住，如果我们想用它们进行计算，这些数字必须被解析为 Integer/Long/Whatever you like。**

此外，如果我们想在一个复选框中提交“YES/NO”或“1/0”，或“radiant/dire”（你可以命名它，现在你知道我玩什么游戏了），我们可以放一个简单的 JavaScript 函数在`onchange`这个复选框的情况下监控它的状态，或者更简单地说，在动作类中解析它的值。

如果我们有：

```
<s:checkbox id="myCamp" name="myCamp" fieldValue="radiant"></s:checkbox> 
```

在行动课上，我们必须：

```
String myCampString = null;
if (StringUtils.isBlank(myCamp)){  //myCamp = null, means I am in Dire.
    myCampString = "dire";
} else if (myCamp.equalsIgnoreCase("radiant")){ //myCamp = "radiant", means I am in Radiant.
    myCampString = "radiant";
}
// then we process myCampString, now it cannot be null. 
```

******************************我是中江****************** *************

至于`value="true"/"false"`，我认为这是一个很好的例子，我们程序员无法正确命名事物并认为每个人都可以理解我们在说什么:)。它可以有一些更清晰的名称，例如`preselected`/`selectByDefault`等。

同样，参考 Struts 2 DOC，我们有：

> ```
> Name         value
> Required     FALSE
> Default  
> Evaluated    FALSE
> Type         String
> Description  Preset the value of input element. 
> ```

实际上，如果我们输入以下内容会更好：

> `value`在`<s:checkbox>`定义第一次渲染时是否应选中此复选框。(*)

(*) 请注意，如果`value`在页面加载完成后发生更改，Struts 2 将不会填充该值`<s:checkbox />`来更改其状态。JavaScript 函数负责这部分，例如 AngularJS。

例如，如果我想`User`用表单创建一个新用户，并且默认情况下每个用户都`active`在创建它时，我们可以这样写：

```
 <s:checkbox name="isActive" id="isActive" value="true"></s:checkbox> 
```

但是，当在编辑用户的形式中，我们想让它在用户活跃时被检查，而不是在用户不活跃时被检查，我们可以这样做：

```
<s:checkbox name="isActive" id="isActive" value="%{user.isActive}" 
```

所以这是一些使它更容易理解的提示，尽管 DOC 已经明确了（我认为是以作者的方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:54:46.320

简而言之`fieldValue`就是复选框的实际HTML值属性，将由复选框提交。一般我们不需要设置这个值，因为默认情况下这是真的。

另一方面`value`参数将用于预设输入元素的值。请通过 Struts2 表单标签文档了解其工作原理

*   [struts-2-form-tags](http://struts.apache.org/2.2.3/docs/struts-2-form-tags.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T19:55:40.927

查找复选框的“键”属性。这可能就是您所需要的。如果您不想使用“key”属性，请继续阅读。

我发现使用“值”属性会带来更好的运气。我自己对“fieldValue”有点困惑。我已经看到“fieldValue”可用于显示当前值，但如果您没有“value”属性，则该值（在表单上更改后）不会发送到操作方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-10T03:39:44.597

`fieldValue`是复选框将提交的复选框的值属性。

`fieldValue`可以是`String`，`boolean`（真/假）等，具体取决于您的要求。

有关更多信息，请查看此链接[http://www.mkyong.com/struts2/struts-2-scheckbox-checkbox-example/](http://www.mkyong.com/struts2/struts-2-scheckbox-checkbox-example/)******

# java - 指定属性 tag We have an applet, a jar file that is stored on the desktops and one of the pages of a portal site calls this applet. We have issues with the applet not initialising in some of the environments and the investiga 问问题 问问题 2012-04-05T10:38:49.463 346 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. We have an applet, a jar file that is stored on the desktops and one of the pages of a portal site calls this applet. We have issues with the applet not initialising in some of the environments and the investigation led to checking the tag where the jar is called. We are not sure whether we need to use the 'codebase' attribute in the tag. (And we can't just test it easily unfortunately.) What we have so far in the applet tag is the 'code' attribute that is specified and the 'Archive' attributes which refers to a file on the local machines like this: Archive='file:///WINDOWS/XYfolder/some.jar' W3C says that the 'codebase' attribute specifies the base path used to resolve relative URIs specified by the classid, data, and archive attributes. When absent, its default value is the base URI of the current document. (which means it would look for the jar file on the server I guess). For 'Archive' W3C says, this attribute may be used to specify a space-separated list of URIs for archives containing resources relevant to the object, which may include the resources specified by the classid and data attributes. Preloading archives will generally result in reduced load times for objects. Archives specified as relative URIs should be interpreted relative to the codebase attribute. - My question is how do you specify a relative URI in the archive attribute and how do you specify an absolute URI? - Is the Archive attribute specified above as relative or absolute URI? Many thanks ..how do you specify a relative URI in the archive attribute and how do you specify an absolute URI? E.G. Relative // icon.gif can be found in the docs directory that is a sibling to this directory "../docs/icon.gif" // icon.gif can be found in the docs directory that is a child to this directory "./docs/icon.gif" Absolute // a complete path to a web resource "http://pscode.org/media/stromlo2.jpg" // an absolute path to a local resource "file:///WINDOWS/XYfolder/some.jar" Is the Archive attribute specified above as relative or absolute URI? It is an absolute reference. Note that an applet should not typically be loading Jars off the computer of the end-user (unless they were cached locally by the JRE - but that is all 'invisible' to the app.). That is most likely the real problem here. javahtmlapplet 4 1 回答 1 This answer is useful 1 ..如何在存档属性中指定相对 URI 以及如何指定绝对 URI？ 例如 相对的 // icon.gif can be found in the docs directory that is a sibling to this directory "../docs/icon.gif" // icon.gif can be found in the docs directory that is a child to this directory "./docs/icon.gif" 绝对 // a complete path to a web resource "http://pscode.org/media/stromlo2.jpg" // an absolute path to a local resource "file:///WINDOWS/XYfolder/some.jar" 上面指定的 Archive 属性是相对 URI 还是绝对 URI？ 这是一个绝对的参考。 请注意，小程序通常不应从最终用户的计算机上加载 Jars（除非 JRE 在本地缓存它们 - 但这对应用程序来说都是“不可见的”。）。这很可能是这里真正的问题。 于 2012-04-05T20:09:48.110 回答 Related 1 c# - 如何使用我的 C# 应用程序重置我的 Arduino Mega2560？ 2 asp.net - 会话状态阻止并发处理的异步 ajax 调用 1 c++ - 使用 g++ 编译时如何禁用候选信息？ 1 javascript - 从站点根目录之外的目录动态加载图片 2 certificate - 如何解码自签名证书 4 php - 从 mysql 查询中回显字符串 - PHP 1 ios - iOS 应用程序和数据库服务器之间有哪些不同的通信方式？ 5 c# - C# 将不同类型的数据保存在列表中 1 c++ - 将 curses 库添加到 Visual Studio C++？ 2 coldfusion - 在 ColdFusion 中使用 QoQ 按长度对查询对象中的列进行排序？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10027034
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, html, applet

We have an applet, a jar file that is stored on the desktops and one of the pages of a portal site calls this applet.

We have issues with the applet not initialising in some of the environments and the investigation led to checking the tag where the jar is called.

We are not sure whether we need to use the 'codebase' attribute in the tag. (And we can't just test it easily unfortunately.)

What we have so far in the applet tag is the 'code' attribute that is specified and the 'Archive' attributes which refers to a file on the local machines like this:

```
Archive='file:///WINDOWS/XYfolder/some.jar' 
```

W3C says that the 'codebase' attribute specifies the base path used to resolve relative URIs specified by the classid, data, and **archive attributes**. **When absent, its default value is the base URI of the current document.** (which means it would look for the jar file on the server I guess).

For 'Archive' W3C says, this attribute may be used to specify a space-separated list of URIs for archives containing resources relevant to the object, which may include the resources specified by the classid and data attributes. Preloading archives will generally result in reduced load times for objects. **Archives specified as relative URIs should be interpreted relative to the codebase attribute.**

*- My question is how do you specify a relative URI in the archive attribute and how do you specify an absolute URI?*

*- Is the Archive attribute specified above as relative or absolute URI?*

Many thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:09:48.110

> ..如何在存档属性中指定相对 URI 以及如何指定绝对 URI？

## 例如

### 相对的

```
// icon.gif can be found in the docs directory that is a sibling to this directory
"../docs/icon.gif"  
// icon.gif can be found in the docs directory that is a child to this directory
"./docs/icon.gif" 
```

### 绝对

```
// a complete path to a web resource
"http://pscode.org/media/stromlo2.jpg"
// an absolute path to a local resource
"file:///WINDOWS/XYfolder/some.jar" 
```

> 上面指定的 Archive 属性是相对 URI 还是绝对 URI？

这是一个绝对的参考。

* * *

请注意，小程序通常不应从最终用户的计算机上加载 Jars（除非 JRE 在本地缓存它们 - 但这对应用程序来说都是“不可见的”。）。这很可能是这里真正的问题。

# php - Wordpress：使用ajax更改查询的循环？

> ID：10027038
> 
> 赞同：2
> 
> 时间：2012-04-05T10:38:54.067
> 
> 标签：php, jquery, ajax, wordpress

嗨 Stack Overflow 社区。

我正在为撒旦开发一个 wordpress 网站。首先，我是一名初级 Web 开发人员，所以假设我还有很多东西要学... :-) 这是我第一次使用 Ajax，我对 PHP 没有太多经验或 wordpress 之外的 SQL。

该网站具有基于复选框的搜索功能。我有 2 组 3 个复选框（所以，总共 6 个）。所以，我有 2 个分类法，每个复选框代表一个不同的术语。我想根据撒旦使用这些复选框选择的类别，使用 ajax 更改页面的内容。我能够做到这一点，但一次只能使用一个复选框组合。因为有几十种不同的组合，我不认为编写几十种不同的查询/参数（每个组合一个）是一个好策略。那么，我该怎么做呢？

让我们看一个例子，让你明白我的意思：

想象一下，撒旦想通过一个表格来检查地狱里的灵魂数量。有两组复选框，一组用于人，一组用于惩罚，如下所示：

人们

*   男士
*   女性
*   孩子们

惩罚

*   在火焰中
*   刺穿
*   被恶魔吃掉

现在，我有这个 jQuery Ajax 代码：

```
$('#searchsouls').click(function(){
    $.ajax({
        url:"<?php echo get_bloginfo('template_url'); ?>/evil-laugh.php",
        type:"POST",
        async:"false",
        data:$("#de-form").serialize(),
        success:function(data) {
            $('#666').empty().html(data);
        },
        error:function(e){
            console.log('Error: ' + e);
        }
  });
  return false;
}) 
```

这工作得很好。然后，我在 evil-laugh.php 中有这段代码：

```
<?php global $query_string;
$args = wp_parse_args($query_string);
$args = array(
'post_type' => 'souls',
'paged' => $paged, 
'orderby' => 'title',
'order' => 'ASC',
'posts_per_page' => -1,
'post_status' => 'publish',
);

?>

<!--  THE LOOP -->
<?php $wp_query = new WP_Query( $args ); ?>
<?php while ($wp_query->have_posts()) : $wp_query->the_post(); ?> 
```

当然，这显示了所有的灵魂和各种惩罚，没有什么花哨的。我知道我可以通过为每个类别组合定义一组不同的论点来实现撒旦想要的。类似于（假设“Impaled”术语的 ID 为 9，并且“cat9”是复选框的名称）：

```
if ($_POST['cat9']) {
$args = array(
'post_type' => 'souls',
'paged' => $paged, 
'orderby' => 'title',
'order' => 'ASC',
'posts_per_page' => -1,
'post_status' => 'publish',
'punishment' => 'impaled',
); 
```

但是，有几十种不同的组合。这里有几个例子：

*   男子被刺穿
*   被恶魔吃掉的妇女或儿童
*   男人或女人在火焰中或被刺穿
*   儿童在火焰中或被刺穿或被恶魔吃掉

我想我可以做某种“for循环”来完成这个，但我不知道如何做到这一点或如何将类别ID添加到wordpress查询中，定义相应的AND和OR。

我真的很感谢在这个问题上的一些帮助。但是，请记住，我不想要一个解决方案，我想了解我在做什么并尽可能学习一些新东西。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T09:31:12.950

好吧，我自己设法找到了解决方案。不确定它是否是解决此类问题的最强大的解决方案，但如果有人正在寻找同样的东西，那就去吧。出于实际原因，我将每个复选框的名称更改为关联类别的名称。因此，例如，对于我使用的“男性”复选框`name="Men"`，其他类别也是如此。这是代码：

```
if ($_POST['men']) {
    $args['people']='men';
}   

if ($_POST['women']) {
    if ($_POST['men']) {
        if ($_POST['children']) {
            $args['people']='men, women, children';
        } else {
            $args['people']='men, women';
        }   
    } else {
        $args['people']='women';
    }   
}

if ($_POST['children']) {
    if ($_POST['women']) {
        if ($_POST['men']) {
            $args['people']='men, women, children';
        } else {
            $args['people']='women, children';
        }   
    } elseif ($_POST['men']) {
        $args['people']='men, children';
    } else {
        $args['people']='children';
    }   
} 
```

我对惩罚类别有相同的代码，当然有不同的条款。我相信我的代码仍然存在某种冗余，但效果很好。我将不得不稍后检查。当然，这仅适用于 3 个类别，如果您有很多类别，您将不会有很多有趣的编程，所以最好考虑如何使用“for 循环”或类似的。干杯!

**更新：新的更好的解决方案**

最后我设法回到这个项目。我不仅设法了解了更多关于 PHP 的知识，而且代码现在更加健壮，我可以添加任意数量的类别术语。开始：

```
$people_args = array(
    'type' => 'souls',
    'taxonomy' => 'people',
    'orderby' => 'name',
    'order' => 'ASC',
);
$people = get_categories($people_args);
$arr_people = array();
foreach ($_POST as $key => $value) {
   foreach($people as $person){
        if($person->slug == $key){
            array_push($arr_people, $key);
        }
   }            
}
$values_people = implode(",", $arr_people);
$args['people']=$values_people;

$punishment_args = array(
    'type' => 'souls',
    'taxonomy' => 'punishment',
    'orderby' => 'name',
    'order' => 'ASC',
);
$punishments = get_categories($punishment_args);
$arr_punishment = array();
foreach ($_POST as $key => $value) {
   foreach($punishments as $punishment){
        if($punishment->slug == $key){
            array_push($arr_punishment, $key);
        }
   }            
}
$values_punishment = implode(",", $arr_punishment);
$args['punishment']=$values_punishment; 
```

不确定是否有人对此感兴趣，但这是我目前的解决方案。这是一种使用复选框按类别显示内容的全功能 AJAX 方式。网站完成后，我会将 URL 放在这里，以便您可以根据需要测试此代码。知识就是力量。

# java - 部署服务器 Jboss

> ID：10027039
> 
> 赞同：0
> 
> 时间：2012-04-05T10:38:57.777
> 
> 标签：java, jboss, web, jboss5.x

当我尝试运行我的服务器时，我收到了这个问题：

```
Deployment "vfsfile:/C:/Users/aroua/jbdevstudioo/jboss-eap/jboss-as/server/default/deploy/ProjetNew.war/" is in error due to the following reason(s): org.jboss.deployers.spi.DeploymentException: URL file:/C:/Users/aroua/jbdevstudioo/jboss-eap/jboss-as/server/default/tmp/aa02f-eoixe9-h0nnnr10-1-h0nnofam-v/ProjetNew.war/ deployment failed

11:23:29,691 INFO [Http11Protocol] D?marrage de Coyote HTTP/1.1 sur http-localhost%2F127.0.0.1-8080
11:23:29,719 INFO [AjpProtocol] Starting Coyote AJP/1.3 on ajp-localhost%2F127.0.0.1-8009
11:23:29,727 INFO [ServerImpl] JBoss (Microcontainer) [5.0.0.GA (build: SVNTag=JBPAPP_5_0_0_GA date=200910202128)] Started in 2m:39s:918ms 
```

我不明白这个故障的原因。

你们中的任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:04:30.100

您需要使 Jboss 可以使用带有库的 Jar。要么将它包含在你的战争中，要么将它粘贴在 jboss 的 lib 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:20:27.303

您是否尝试过删除 tmp 和工作目录中的所有文件和文件夹：

```
 C:/Users/aroua/jbdevstudioo/jboss-eap/jboss-as/server/default/tmp/
   C:/Users/aroua/jbdevstudioo/jboss-eap/jboss-as/server/default/work/ 
```

# jquery - 如何在jQuery中使用滚动条移动div

> ID：10027041
> 
> 赞同：1
> 
> 时间：2012-04-05T10:39:04.640
> 
> 标签：jquery

我有一个像这样的图像 div

```
<div class="bgCover">&nbsp;</div>
<div class="overlayBox" style="position: fixed; background-image: url(../images/header.jpg)"  >

    <div class="overlayContent">

        <a href="javascript:void()" class="closeLink">Close</a>

    </div>

</div> 
```

我正在使用 jQuery 打开这样的框

```
function getScrollTop() {

    if (typeof window.pageYOffset !== 'undefined' ) {
        // Most browsers
        return window.pageYOffset;
    }

    var d = document.documentElement; //IE with doctype

    if (d.clientHeight) {
        // IE in standards mode
        return d.scrollTop;
    }

    // IE in quirks mode
    return document.body.scrollTop;

} //end of getScrollTop()

function doOverlayOpen() {
    ...
    showOverlayBox();
}

function showOverlayBox() {

    var scroll = getScrollTop();
    var top;

    if (scroll <= 28) {
        top = "30";
    }
    else {         
      top = (scroll + 2) ;
    }

    // set the properties of the overlay box, the left and top positions
    $('.overlayBox').css({

        display:'block',
        position:'absolute',
        left:( $(window).width() - $('.overlayBox').width() )/2,          
        top:top

    });

    // set the window background for the overlay. i.e the body becomes darker
    $('.bgCover').css({

        display:'block',
        width: $(window).width(),
        height:$(window).height()

    });
} 
```

这将打开相对于滚动条的框。但问题是一旦overlayBox打开，然后我移动滚动条，然后这个div保持在它的位置。我希望如果用户移动滚动条，那么这个 div 也会上下移动。

我想我需要用滚动条顶部调整overlayBox div的顶部，左核心。需要定义一个函数来检查滚动条是否移动，然后相应地移动div。我在这里需要委托还是...我该怎么做？

这是图像，在图 2 中你可以看到，如果我移动滚动条，那么我的图像 div 不会移动

![在此处输入图像描述](../Images/58e06144ea703472b4b3184d9d7a4962.png) ![在此处输入图像描述](../Images/a75f5bb0335d863249f7b291654c6226.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:43:00.580

很简单：`position: fixed`改用。所以改成

```
function showOverlayBox() {

    var top;

    top = "30px";

    // set the properties of the overlay box, the left and top positions
    $('.overlayBox').css({

        display:'block',
        position:'fixed',
        left:( $(window).width() - $('.overlayBox').width() )/2,          
        top:top

    });

    // set the window background for the overlay. i.e the body becomes darker
    $('.bgCover').css({

        display:'block',
        width: $(window).width(),
        height:$(window).height()

    });
} 
```

您不再需要的其他功能（getScrollTop 和 doOverlayhappen）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:50:33.147

尝试使用`Position:fixed`，然后您可以使用滚动条移动 div 背景的内容。

这是给你的[演示](http://jsfiddle.net/Ey8zU/)。

# php - 使用 CloudFlare 时 PHP 输出中的额外字符

> ID：10027042
> 
> 赞同：0
> 
> 时间：2012-04-05T10:39:06.437
> 
> 标签：php, javascript, html

```
<div style="margin-left:100px;">
    <table>
        <?php for($i=0;$i<8;$i++)
        {
            echo "\n".'<tr><td>data1</td><td>data2</td></tr>';
        }?>
    </table>
</div> 
```

上面的脚本在运行时会在浏览器中反映以下内容：

```
<div style="margin-left:100px;">
    <table>
        <tr><td>data1</td><td>data2</td></tr>
        <tr><td>data1</td><td>data2</td></tr>
        .
        . (8 times)
        .
    </table>
</div> 
```

不出意外，这在意料之中。但是在浏览器上呈现的以下输出是出乎意料的。

> ```
>  >>>>>>>>
>                 data1   data2
>                 data1   data2
>                 .
>                 .(8 times)
>                 . 
> ```

我真的不知道多余的字符`>>>>>>>>`是从哪里来的。我在这里怀疑的一件事是[CloudFlare](http://www.cloudflare.com/)（我用来加速我的网站），它添加了 javascripts 来优化我的网站。但我真的不确定。请帮忙。

这是我通过萤火虫看到的：

```
<div style="margin-left:100px;">
     &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
    <table>
        <tr><td>data1</td><td>data2</td></tr>
        <tr><td>data1</td><td>data2</td></tr>
        .
        . (8 times)
        .
    </table>
</div> 
```

有一件事在这里更令人惊讶。表中有 8 行，正好有 8 `>`s

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:06:13.763

> 我真的不知道多余的字符 >>>>>>>> 是从哪里来的。

我们很可能不会是造成这种情况的原因。测试 CloudFlare 是否导致问题的一种简单方法是暂时停用 CloudFlare（设置 -> 暂停 CloudFlare）。如果我们关闭后问题仍然存在（在检查前等待大约 5 分钟），那么问题直接出在您的服务器上。

# cordova - PhoneGap BlackBerry 无法与远程站点一起使用

> ID：10027044
> 
> 赞同：1
> 
> 时间：2012-04-05T10:39:10.410
> 
> 标签：cordova, blackberry-webworks

用于挂钩“deviceready”事件的 PhoneGap[示例](http://docs.phonegap.com/en/1.5.0/phonegap_events_events.md.html#deviceready "样本")适用于我的 BlackBerry 和 Android 环境。

我现在希望这个示例在从*远程*网站加载 HTML 文件和支持脚本时工作。这适用于*Android*，但不适用于黑莓。

我正在使用 PhoneGap 1.5、WebWorks SDK 2.3.0.9 和一个 BB OS 7 模拟器。我将 config.xml 更改为使用 .xml 行指向远程 HTML 文件`<content src="http://192.168.2.128/comunity/index3.html" />`。我还通过添加该行将站点列入白名单`<access subdomains="true" uri="http://192.168.2.128/comunity" />`。

相关脚本如下所示：

```
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}
function onDeviceReady() {
    window.alert("deviceready");
} 
```

将配置指向本地文件会导致在模拟器上显示警报。指向远程文件只显示 HTML 内容。本地和远程文件是精确的副本。当我使用 Chrome 浏览到远程 HTML 文件时，在引用的 PhoneGap 脚本中出现脚本错误。这证明脚本引用是正确的。

任何帮助表示赞赏。

# c++ - 虚拟继承和可怕的钻石

> ID：10027053
> 
> 赞同：11
> 
> 时间：2012-04-05T10:39:44.287
> 
> 标签：c++, multiple-inheritance, virtual-inheritance, diamond-problem

我很难解决可怕的钻石问题。提醒一下，这里是这个问题的经典类层次结构：

```
 B
   / \
 C1   C2
   \ /
    D 
```

为了解决这个问题，标准的解决方案是让 C1 和 C2 使用虚拟继承从 B 继承。

**我的问题是 B 和 C1 来自我无法修改的 SDK。** 下面的示例我无法让**SubClassB**虚拟地从**Base**继承。类：PureVirtualBase、Base 和 SubClassB 来自我使用的 SDK。我无法修改它们。SubClassA 和 Leaf 是我的自定义类。我可以改变它们。

```
 PureVirtualBase(SDK)
           |
        Base(SDK)
       /        \
 SubClassA   SubClassB(SDK)
       \        /
          Leaf 
```

在这种情况下，无法将**SubClassB更改为使用来自****Base**的虚拟继承。应该怎么做：

*   **Leaf**实例只包含一个**Base**
*   在尝试访问在**PureVirtualBase**中定义的纯虚拟函数并在**Base中实现时避免歧义**

```
class PureVirtualBase
{
public:
    PureVirtualBase()
    {
        cout<<"<<PureVirtualBase::PureVirtualBase" << endl;
        cout<<">>PureVirtualBase::PureVirtualBase" << endl;
    }
    virtual int f_PureVirtualBase()=0;
};
class Base : public PureVirtualBase
{
public:
    Base(std::string id) {
        cout<<"<<Base::Base:"<<id << endl;
        m_id=id;
        cout<<">>Base::Base:"<<m_id << endl;
    }
    virtual int f_PureVirtualBase() {
       cout<<"Base::f_PureVirtualBase" << endl;
       return 1;
    }
private:
    std::string m_id;
};
class SubClassA:  public virtual Base
{
public:
    SubClassA(): Base("From SubClassA") {
        cout<<"<<SubClassA::SubClassA" << endl;
        cout<<">>SubClassA::SubClassA" << endl;
    }
};
class SubClassB:  public Base
{
public:
    SubClassB():Base("From SubClassB") {
        cout<<"<<SubClassB::SubClassB" << endl;
        cout<<">>SubClassB::SubClassB" << endl;
    }
};    
class Leaf:  public SubClassA, public SubClassB
{
public:
    Leaf():SubClassA(),  SubClassB(), Base("From Leaf") {
        cout << "<<Leaf::Leaf" << endl;
        cout << ">>Leaf::Leaf"<< endl;
    }
};
int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    Leaf myleaf;
    myleaf.f_PureVirtualBase();
    return a.exec();
} 
```

*   如果我评论对 f_PurevirtualBase 的调用，它会编译，但我有一个警告， *由于模棱两可，'Leaf' 中的虚拟基础'Base' 不可访问*如果我取消注释此调用：我收到此错误：*对成员'f_PureVirtualBase' 的请求不明确*
*   如果我在这个调用前面加上类名（myleaf.SubClassA::f_PureVirtualBase() 那么它可以工作，但显然有问题，因为**叶子** 对象中包含2 个**Base ）。**

 **有什么提示吗？

**更多信息以回答评论**

我的目标架构比我在原始问题中提供的示例稍微复杂一些：

```
 PureVirtualBase(SDK)
       |
     Base(SDK)
        |
        --SubClassA
        --SubClassB(SDK)
        --SubClassC(SDK)
        --SubClassD(SDK) 
```

LeafOne：继承自 SubClassA 和 SubClassB(SDK)

LeafTwo : 继承自 SubClassA 和 SubClassC(SDK)

LeafThree：继承自 SubClassA 和 SubClassD(SDK)

**SubClassA 是我自己的私有代码。它提供自定义功能。SDK 方法应该能够将其视为 Base 实例。** 此类不会被实例化，但它可以在执行某些处理时同时处理 LeafOne、LeafTwo 和 LeafThree。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:09:21.850

这表明您的设计存在问题，最简单的答案是首先*避免使用钻石*。您为示例代码选择的名称非常糟糕，以至于很难推断您可能真正想要做什么，但无论如何，请重新考虑您是否*需要*从父母双方继承，以及这是否有意义。

继承是 OO 语言中最常被滥用的结构之一，它确实解决了一个问题，但它在其他任何地方都被用作[金锤。](http://en.wikipedia.org/wiki/Law_of_the_instrument)很多时候，你手中的东西是[螺丝](http://blogs.msdn.com/b/ericlippert/archive/2009/03/30/every-problem-looks-like-a-nail.aspx)，而不是钉子，正确的工具也不是锤子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:34:14.023

如果您真的受制于这些设计约束，我肯定会直接使用将 C1 和 C2 作为复合组件的类从 B 子类化。不幸的是，这需要手动镜像他们的界面（希望它很小，或者您可以将其限制为您需要的内容）并代理到子组件。它并不漂亮，但除非您可以在其他地方强制执行一些设计，否则您实际上并没有太多选择。

当然，一个缺点是你没有你正在寻找的类型标识（子类不会满足 C1 或 C2 的“isa”），这可能足以让这种方法被淘汰。

这不漂亮。但我希望鉴于您的限制，它可能是“最不坏”的解决方案。**

# apache - 切换到 HTTPS 时出现 Grails + Tomcat + Apache 错误

> ID：10027056
> 
> 赞同：2
> 
> 时间：2012-04-05T10:39:48.230
> 
> 标签：apache, tomcat, grails, ajp

我们有一个 Grails Web 应用程序，在 Apache2 后面的 tomcat7 中运行。使用 ProxyPass 和 ajp 协议一切正常：

```
ProxyPass         / ajp://localhost:9013/
ProxyPassreverse  / ajp://localhost:9013/ 
```

其中 9013 是我们在 tomcat 中的 AJP 端口`server.xml`。

现在，我们的问题是这个。我们的 Grails 应用程序同时运行 HTTP 和 HTTPS。当转到应用程序中的某个区域时，Spring Security（Grails Spring Security Core 插件）会将您从使用 HTTP 的地址重定向到 HTTPS，例如当点击：

[http://www.example.com/secure/path](http://www.example.com/secure/path)

Spring Security 会将您重定向到：

[https://www.example.com/secure/path](https://www.example.com/secure/path)

但是现在，当它重定向到那里时，服务器挂起，最后 Firefox 给出*“Firefox 检测到服务器正在以永远不会完成的方式重定向该地址的请求”。*错误。

我是否正确假设使用 AJP 代理进行的某些重定向会变坏？谁能提供有关此设置如何工作的更多信息？

* * *

进一步看，我们发现了以下内容：

当直接（通过 IP 和端口）在 tomcat 中点击应用程序时，一切正常 100%。但是一旦我们通过 Apache，Spring Security 重定向就不起作用了。您在 Apache 日志中不断收到以下信息：

```
staging.server.com:80 41.133.194.248 - - [05/Apr/2012:14:03:41 +0200] "GET /user/signup HTTP/1.1" 302 223 "http://staging.server.com/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20100101 Firefox/11.0"
staging.server.com:80 41.133.194.248 - - [05/Apr/2012:14:03:42 +0200] "GET /user/signup HTTP/1.1" 302 223 "http://staging.server.com/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20100101 Firefox/11.0"
staging.server.com:80 41.133.194.248 - - [05/Apr/2012:14:03:42 +0200] "GET /user/signup HTTP/1.1" 302 223 "http://staging.server.com/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20100101 Firefox/11.0"
staging.server.com:80 41.133.194.248 - - [05/Apr/2012:14:03:42 +0200] "GET /user/signup HTTP/1.1" 302 223 "http://staging.server.com/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20100101 Firefox/11.0" 
```

...

而不是重定向到https，似乎apache神奇地让它再次尝试http。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:49:24.293

虽然我不能告诉你如何解决它，但我可以告诉你问题是什么。

它本质上与重写入口点有关。

因此，在这些情况下您应该做的部分事情是：

```
grails.plugins.springsecurity.secureChannel.useHeaderCheckChannelSecurity = true 
```

如果我们真的在 http/https 上，这将通过设置一个标头来查找，默认值为：

RequestHeader 设置 X-Forwarded-Proto "http"

现在我在 nginx 中可以正常工作。前面有 apache 的问题是重写规则 ARENT 拿起 apache 服务器。他们只是捡起自我。因此，当它运行时，它基本上会遇到无限重定向，因为它所知道的只是您所在的 9013 服务器。

现在我想我要编写自己的自定义 HttpsEntry 但我想有一些 apache 设置可以使这项工作正常进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:46:39.340

Grails/Spring-Security 具有以下属性：

```
grails {
   // redirect ports
   plugins {
      springsecurity {
         portMapper {
            httpPort = 80
            httpsPort = 443
         }
      }
   }
} 
```

您可以使用 hongo 的上述 httpd-config（端口 80/443，SSL 终止于 Apache）。您可能还想`server.url`适当地设置属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:36:11.280

不确定 spring-security-core 在切换到 HTTPS 时如何决定使用哪个端口，但默认的 Tomcat 配置为 AJP 连接器设置了 redirectPort="8443"，也许您需要更改为 443 以便重定向会命中 Apache 的 HTTPS 端口.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T15:09:06.210

免责声明，我不是 Grails 专家。

但是根据您的描述，配置可能如下：

SSL 被卸载到 apache httpd。因此，只需要在 Tomcat 中配置 ajp 连接器，或者可能需要额外的 http 连接器来进行测试。按照[http://httpd.apache.org/docs/2.0/ssl/ssl_howto.html](http://httpd.apache.org/docs/2.0/ssl/ssl_howto.html) 和

```
<VirtualHost _default_:80>

    RedirectPermanent /secure/path https://www.example.com/secure/path
    ProxyPass         / ajp://localhost:8009/
    ProxyPassreverse  / ajp://localhost:8009/
</VirtualHost>

<VirtualHost _default_:443>

    # SSL config
    ...
    ProxyPass         / ajp://localhost:8009/
    ProxyPassreverse  / ajp://localhost:8009/
</VirtualHost> 
```

应该管用。

另一个好处是，当 SSL 卸载到 apache httpd 时，您可能会看到性能提升。

此外，为什么不对所有内容强制使用 SSL：

```
<VirtualHost _default_:80>
RedirectPermanent / https://www.example.com/
</VirtualHost>

<VirtualHost _default_:443>

# SSL config
    ...

ProxyPass         / ajp://localhost:8009/
ProxyPassreverse  / ajp://localhost:8009/
</VirtualHost> 
```

至于为什么会有无限循环，可能与 Spring Security 的 sendRedirect 有关。如果您可以发布完整的 apache VirtualHost 和 tomcat ajp 连接器配置，它可能会给我们更多线索。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T02:07:05.413

顺便说一句......这是你的答案。

像我之前说的那样做端口映射器设置并使用通道安全。

该通道安全需要知道何时转发到 http/https

但是在重定向中，您需要保留代理设置，以便 request.getServerPort() 可以找到它们。您可以将其添加到您的 Apache httpd.conf：

ProxyPreserveHost 开启

# java - h:inputTextarea 不适用于富人脸

> ID：10027063
> 
> 赞同：0
> 
> 时间：2012-04-05T10:40:19.777
> 
> 标签：java, jsf, richfaces, jsf-1.2

输入 Textarea 值永远不会在 bean 端设置。JSF 1.2 和 RichaFaces 3.3.3。有下一个代码：

```
<h:form id="name" rendered="#{not empty controller}">
            <h:panelGrid columns="1" styleClass="medium" columnClasses="subtitle,medium" style="text-align: left;" cellspacing="3px">
                <f:facet name="header">
                    <h:outputText value="Comments"/>
                </f:facet>

                <h:inputTextarea value="#{controller.comments}" rows="10" cols="80"
                        immediate="true"></h:inputTextarea>

                <div align="right">
                    <a4j:commandButton value="#{msg['label.save']}" action="#{controller.saveData()}" reRender="name" />
                </div>
            </h:panelGrid>
        </h:form> 
```

在 bean 中：

```
public void saveData(){
    //logic
}

public String getComments(){
    return "comments";
}

public void setComments(String comments){
    //logic
} 
```

jsf 页面通过 ui:include 包含在另一个页面中，并获取所需的 bean 作为*控制器*参数。

注释是通过 get 方法读取的，但是，setter 永远不会被调用，*saveData*函数也不会被调用。相同的控制器用于另一个页面上的一些其他数据，并且从字面上看，相同的*saveData*方法效果很好。我想知道为什么永远不会设置 Textarea 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:40:08.340

你得到的错误是这一行：

```
<a4j:commandButton value="#{msg['label.save']}"
    action="#{controller.saveData()}" reRender="name" /> 
```

在 JSF1.2 中，您不应该在操作中使用括号。改变它

```
<a4j:commandButton value="#{msg['label.save']}"
    action="#{controller.saveData}" reRender="name" /> 
```

另外，当您调用它时，请检查您发布的页面是否不在另一个表单中。

更新：

根据您最后的评论，我想您的问题可能出在这句话中：

```
<h:form id="name" rendered="#{not empty controller}"> 
```

如果`controller`是请求 bean，那么它在请求中将为空，因此不会发送或激活表单中的值。您可以尝试将您的 bean 保留在请求范围内，并为您的 bean 类添加 @KeepAlive 注释：

```
@KeepAlive(ajaxOnly=false)
public class ControllerBean {
    //your bean logic...
    public void saveData(){
    //logic
    }

    public String getComments(){
        return "comments";
    }

    public void setComments(String comments){
        //logic
    }
} 
```

# java - 条形图问题（使用 JFreechart）

> ID：10027064
> 
> 赞同：1
> 
> 时间：2012-04-05T10:40:20.400
> 
> 标签：java, jfreechart

**我创建了一个应用程序，该应用程序根据使用JFreeChart**从输入文件读取的输入创建条形图，现在我希望当我将鼠标指向特定条形时，它会显示负责该条形的输入。这该怎么做 ？

我打印条形图的代码-

```
public BarChart(double val[],String title) {

      DefaultCategoryDataset dataset = new DefaultCategoryDataset();

      for(int i=1;i<=val.length;i++){
          dataset.setValue(val[i-1], "Execution Time(ms)",""+i);
      }

      JFreeChart chart = ChartFactory.createBarChart
      ("BarChart for "+title,"API calls", "Execution Time(ms)", dataset, 
       PlotOrientation.VERTICAL, false,true, false);
      CategoryPlot p = chart.getCategoryPlot(); 
      p.setRangeGridlinePaint(Color.red); 
      frame1=new ChartFrame("Bar Chart",chart);
      final Rectangle s = WindowBound.getMaximumWindowBounds();
      final Dimension f = frame1.getSize();
      final int w = Math.max(s.width - f.width, 0);
      final int h = Math.max(s.height - f.height, 0);
      final int x = (int) (0.5 * w) + s.x;
      final int y = (int) (0.5 * h) + s.y;
      frame1.setBounds(x-300, y-300, f.width, f.height);
      frame1.setIconImage(Toolkit.getDefaultToolkit().getImage("Images/Icon.jpg"));
      frame1.setSize(600,600);

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:56:58.253

`ChartFactory`片段中的 设置为`tooltips`，`true`因此当鼠标悬停在条上时，您应该会看到默认工具提示渲染器生成的结果。您可以更改外观，如本[示例](https://stackoverflow.com/a/8932920/230513)所示。

# php - 将购物车详细信息保存到数据库中

> ID：10027068
> 
> 赞同：1
> 
> 时间：2012-04-05T10:40:31.007
> 
> 标签：php, mysql, doctrine-orm

我有一个购物车表，它与我用来将用户的购物车详细信息保存到数据库的产品表有关。但我有一个问题，我怎样才能节省产品的数量？

我的意思是 298 的 2 倍（这是产品的 id）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:45:33.823

product_to_cart

```
+---------+------------+-----+
| cart_id | product_id | qty |
+---------+------------+-----+
| x       | x          | x   |

... 
```

使用包含`cart_id`和的复合主键`product_id`？

# javascript - 如何为 setAttribute 添加回调？

> ID：10027069
> 
> 赞同：3
> 
> 时间：2012-04-05T10:40:31.490
> 
> 标签：javascript, callback, prototype

`setAttribute`是否可以在 Prototype上添加回调？

对于此示例，我想显示`alert("done !")`何时`setAttribute()`完成。

```
img.setAttribute("src", "http://blabla.com/c.jpg"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:02:45.770

可能不是黄金解决方案，但

```
img.setAttribute("src", "http://blabla.com/c.jpg");
img.onload = imageCallback;

function imageCallback() { ... } 
```

如果您对 jQuery 感兴趣，有一个名为**[waitforimages](https://github.com/alexanderdickson/waitForImages)**的插件可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:44:07.367

可以，但我不推荐。

```
(function() {

    var elementSetAttribute = Element.prototype.setAttribute;

    Element.prototype.setAttribute = function() {
        whateverFunctionYouWant.call(this);

        return elementSetAttribute.apply(this, arguments);
    }

})(); 
```

[js小提琴](http://jsfiddle.net/zWVWn/)。

当`whateverFunctionYouWant()`您执行诸如`document.links[0].setAttribute('href', '/')`.

`src`当您更改元素的属性`img`并且新资源已加载时，您似乎希望它调用回调......

```
(function() {

    var HTMLImageElementSetAttribute = HTMLImageElement.prototype.setAttribute;

    HTMLImageElement.prototype.setAttribute = function(attribute, value) {
        var image;

        if (attribute == 'src') {
            image = new Image;
            image.addEventListener('load', loaded, false);
            image.src = value;
        }

        return HTMLImageElementSetAttribute.apply(this, arguments);
    }

})(); 
```

[js小提琴](http://jsfiddle.net/DgcSQ/)。

您可以在这里使用第三个参数重载`setAttribute()`，这将是回调。

根据我的观点和经验，我会为此创建一个不同的函数。修改原型是一回事，但是重载原生 DOM 方法来做额外的事情听起来像是在招惹麻烦，尤其是当一个不熟悉你所做的事情的开发人员查看代码时。

不用说，如果您希望后一个示例在 IE9 中工作，请使用`attachEvent()`后备来添加事件侦听器。

# wordpress - 每三个帖子从一个类别中拉出一个帖子

> ID：10027070
> 
> 赞同：0
> 
> 时间：2012-04-05T10:40:41.143
> 
> 标签：wordpress

我需要一些建议。我试图每隔显示的第三个帖子显示一个推文。我将所有推文帖子推入一个数组，并将普通帖子推入另一个数组。基本上我想要做的是如果计数器 = %3 然后从推文数组中拉出一个帖子，否则从正常的帖子数组中拉出它。有人可以告诉我怎么做吗？还是有其他更好的方法？

非常感激。

詹姆士

```
<?php 

$postarray = array ();
$tweetarray = array ();

while (have_posts()) : the_post();

if( in_category('tweets') ) {
    array_push($tweetarray, $post->ID);
} else {
    array_push($postarray, $post->ID);
}

++$counter;
if($counter %3) {

    //PULL AND DISPLAY TWEET POST FROM TWEETARRAY

} else {

    //PULL AND DISPLAY POST FROM POSTARRAY

}

endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T19:24:25.780

使用 wp 查询

```
WP_Query('category_name=abc'&orderby=date&posts_per_page=5'); 
```

# extjs - 如何在 ExtJS GridPanel 中显示超长字段

> ID：10027075
> 
> 赞同：2
> 
> 时间：2012-04-05T10:40:54.987
> 
> 标签：extjs

我已经根据我的需要调整了这个[带有详细面板示例的 ExtJS Grid](http://dev.sencha.com/deploy/ext-3.3.0/examples/grid/binding.html)。

它工作得很好，但现在我想添加这个功能：

在我的网格中，其中一个字段可能包含很长的文本（这是从我的商店中检索它的方式）。我只想显示该字段的前 N ​​个字符，并且仅当用户执行某些操作（悬停在该字段上/单击它/双击它/...）向他/她呈现完整值（也许在窗户或更整洁的地方）。

我设法定义了一个渲染器，它只显示前 N 个字符，如下所示：

```
var my_grid = new Ext.grid.GridPanel({
    store: my_store,
    columns: [
        {header: "description", width: 400, dataIndex: 'description', sortable: true, 
            renderer: function(val, meta, record) {
            var tpl;
            if (val.length > 400) 
            {
                val = val.substr(0, 400) + '...';
            }
            tpl = new Ext.Template('<div style="white-space:normal; word-wrap: break-word;">{val}</div>');

            return tpl.apply(
            {
                val: val
            });
        }},

        {header: "some_other_column_header", width: 100, dataIndex: 'blah-blah',     sortable: true}
        ],
    sm: new Ext.grid.RowSelectionModel({singleSelect: true}),
    height:200,
    split: true,
    region: 'north'
}); 
```

我的问题是当用户做某事时如何在整个文本中添加一个窗口/其他选项。我想我应该在网格中添加一个**监听**器，但我不知道如何编写这个监听器......

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T08:27:01.320

要在单元格中完全显示文本：

```
.x-grid-cell-inner{
    white-space: normal!important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T11:58:08.770

尝试添加“cellclick”侦听器

```
listeners : {   
    'cellclick' : function(grid, rowIndex, columnIndex, e) {
        var record = grid.getStore().getAt(rowIndex);  // Get the Record
        var fieldName = grid.getColumnModel().getDataIndex(columnIndex); // Get field name
        var data = record.get(fieldName);
        newWin(data);
    }
} 
```

或者也可以从渲染器完成

在渲染器中使用 ext 的省略号函数 参考[省略号](http://docs.sencha.com/air/source/Format.html#method-Ext.util.Format-ellipsis)

```
var rendererData = function(val,p,rec){
    return '<div onClick=javascript:newWin("'+escape(val)+'");>'+Ext.util.Format.ellipsis(val,50)+'</div>';
}

function newWin(val){
        new Ext.Window({
            height : 100,
            widht  : 100,
            title  : 'title',
            items  : [{xtye:'displayfield',html:val}]
        }).show();
    } 
```

# ios - 使用 iOS/Phonegap 存储数千条记录（可离线使用）的选项

> ID：10027076
> 
> 赞同：0
> 
> 时间：2012-04-05T10:40:58.337
> 
> 标签：ios, core-data, cordova

我需要一些指导来存储 600K-900K 记录，并使其离线可用（在应用程序内）。

据此，[它](https://developer.apple.com/technologies/ios/data-management.html)可能基于 Core Data，但我想知道 PhoneGap 或某些插件是否提供任何可行的解决方案。我试图避免在 Objective-C 中编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:36:37.227

最好的办法是创建一个预填充的 sqlite 数据库，并在您的应用程序第一次启动时将其复制到正确的位置。

[http://gauravstomar.blogspot.ca/2011/08/prepopulate-sqlite-in-phonegap.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:+GauravSTomarBootstrappingIntelligence+(Gaurav+S+Tomar+:+Bootstrapping+Intelligence](http://gauravstomar.blogspot.ca/2011/08/prepopulate-sqlite-in-phonegap.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:+GauravSTomarBootstrappingIntelligence+(Gaurav+S+Tomar+:+Bootstrapping+Intelligence) )

# sql-server - 如何在 Aqua Data Studio 中计算每月每周

> ID：10027077
> 
> 赞同：1
> 
> 时间：2012-04-05T10:41:03.237
> 
> 标签：sql-server, sql-server-2005

我想问关于每周的问题。如何计算每月每周。例如，一个月有 30 天和 4 周。如果我选择一月的第二周。它将显示每月每周的数量和月份的名称。我希望结果显示每月的周数（不是每年的所有周数）和月份的名称。谢谢。

我想知道每个月的每周计算。

例如。一月

```
1-7 days------------   1 week
8-14 days------------  2 week
15-21 days------------ 3 week
22-28 days------------ 4 week
29 days - other------- 5 week 
```

例如。二月

```
1-7 days------------   1 week
8-14 days------------  2 week
15-21 days------------ 3 week
22-28 days------------ 4 week 
```

等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T18:28:07.720

您可以在查询中使用此分组：

```
GROUP BY DATEADD(DAY, -(DAY(DateColumn) - 1) % 7, DateColumn) 
```

下图显示了上述表达式的工作原理：

```
DateColumn  DAY(DateColumn)  DAY(…) - 1  (DAY(…)-1) % 7  DATEADD(…)
----------  ---------------  ----------  --------------  ----------
2012-04-01  1                0           0               2012-04-01
2012-04-02  2                1           1               2012-04-01
2012-04-03  3                2           2               2012-04-01
2012-04-04  4                3           3               2012-04-01
2012-04-05  5                4           4               2012-04-01
2012-04-06  6                5           5               2012-04-01
2012-04-07  7                6           6               2012-04-01
2012-04-08  8                7           0               2012-04-08
2012-04-09  9                8           1               2012-04-08
…           …                …           …               …
2012-04-13  13               12          5               2012-04-08
2012-04-14  14               13          6               2012-04-08
2012-04-15  15               14          0               2012-04-15
…           …                …           …               …
2012-04-21  21               20          6               2012-04-15
2012-04-22  22               21          0               2012-04-22
…           …                …           …               …
2012-04-28  28               27          6               2012-04-22
2012-04-29  29               28          0               2012-04-29
2012-04-30  30               29          1               2012-04-29
2012-05-01  1                0           0               2012-05-01
2012-05-02  2                1           1               2012-05-01
…           …                …           …               … 
```

如您所见，结果是一周的开始（您定义的*周*）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:36:06.530

我已经得到了答案。你只是把：

```
select * from customer((DATEPART(day, [date_field] - 1) / 7 + 1 = :weeks) or (:weeks = ' ')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:50:19.853

您的问题相当不清楚（“每周”是什么意思？每周是什么？）我不确定我是否真的理解它。但是我猜对于给定的日期，您想知道该月的星期几吗？

如果是这样，最简单的解决方案是一个[日历表](https://stackoverflow.com/questions/2459260/calendar-table-week-number-of-month)，该表存储周数和一年中每个日期所需的任何其他有用信息。您可以根据需要提前填充它多年，然后您可以编写如下查询：

```
select WeekInTheMonth
from dbo.Calendar
where BaseDate = @SomeDate 
```

如果这没有帮助，您将需要准确显示您希望看到的输入参数和输出数据。

顺便说一句，我假设您正在使用 Aqua Data Studio 作为您的数据库客户端，但这与这个问题无关，因此您可能需要编辑标题。

# jquery - JQuery Ajax Firefox 错误

> ID：10027079
> 
> 赞同：2
> 
> 时间：2012-04-05T10:41:19.557
> 
> 标签：jquery, ajax, firefox

下面的代码在 Chrome 和 IE 中都可以正常工作

```
$.get("../ajax/BTBookAppointment.aspx?dsl=" + telNumberBox.value + "&date=" + requiredDate.value + "&timeslot=" + ddTimeslot.value, function (response, status, xhr) {
//DO some stuff
}); 
```

然而，在 Firefox（11.0 版）中，回调函数永远不会被命中。我已经使用带有断点的 firebug 并验证了从未输入过回调。页面似乎刷新了，之前由 JavaScript 显示的元素再次变得可见。

我不知道这个错误可能是什么，甚至不知道如何进一步调试它。任何意见，将不胜感激。

**编辑**：提琴手和萤火虫从不显示 HTTP 获取。我也尝试过明确写出 $.get （见下文）并获得相同的行为

**EDIT2：**我已经尝试了 Darin Dimitrov 提到的建议，但它仍然存在相同的行为（单击按钮时页面回发）。这是代码。

Javascript

```
function bookAppointment() {

    var url = "../ajax/BTBookAppointment.aspx";
    var dsl = "01753893530"
    var date = "20-04-2012";
    var timeslot = "PM";

    var data = { dsl: dsl, date: date, timeslot: timeslot };

    $.ajax({
        url: "../ajax/BTBookAppointment.aspx",
        data: data,
        success: function (response, status, xhr) {
       alert('into callback');
        },

    });

    return false;
} 
```

HTML

```
<button id="btnBookAppointment" onclick="bookAppointment();"> Book</button> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T12:12:03.147

从您的问题中提供的信息很难说问题可能是什么。您是说您从未在`Network`FireBug 的选项卡中看到发送的请求并且页面会刷新。这可能是由于在 AJAX 调用之前您的代码中存在一些 javascript 错误，这会阻止它触发。此外，如果您在某些 DOM 元素的单击或提交处理程序中调用此 AJAX 请求，您可能希望通过从此回调返回 false 来确保取消默认事件。另一点是您当前未执行的 GET 参数的正确 URL 编码。

所以这里有一个示例：

```
$('#someElement').click(function() {
    // TODO: adapt the selectors to match your input field ids
    var dsl = $('#telNumberBox').val();
    var date = $('#requiredDate').val();
    var timeslot = $('#ddTimeslot').val();

    var data = { dsl: dsl, date: date, timeslot: timeslot };
    $.get('../ajax/BTBookAppointment.aspx', data, function (response, status, xhr) {
        //DO some stuff
    }); 

    return false;
}); 
```

此外，不要忘记在发送 AJAX 请求之前查看 FireBug 控制台以了解可能发生的 javascript 错误。

如果这不起作用，我会尝试对请求值进行硬编码以尝试进一步缩小错误的可能性：

```
var dsl = '123456789';
var date = '2012-04-07';
var timeslot = '14:15';

var data = { dsl: dsl, date: date, timeslot: timeslot };
$.get('../ajax/BTBookAppointment.aspx', data, function (response, status, xhr) {
    //DO some stuff
}); 
```

您可以通过硬编码一些值（这消除了错误的可能性）将这种错误缩小技术应用于脚本的不同部分，直到找到不会杀死 IE 和 Chrome 但会杀死 FireFox 的确凿证据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T12:29:22.060

我不知道为什么，但即使 bookAppointment() 返回 false，按钮似乎仍在触发 FF 中的默认行为（回发）。为按钮添加一个 return false 固定的东西（见下文）。

```
<button id="btnBookAppointment" onclick="bookAppointment();return false;"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T12:39:58.540

好吧，大多数信息不可用，例如

jQuery 版本？

jQuery UI 版本？

什么时候调用ajax请求？

在这里，我将如何对此类问题进行调试：

a) 首先我会确保我的 jQuery 版本没有 RELATIVE urls [Google term "jquery ajax relative url"]

b) 检查加载 Jquery 后是否真的创建了 Ajax 对象

```
 $(document).ready(function(){
     //your ajax code
   }); 
```

c) 检查即使 ajax 对象是 CREATED ，你调用正确的方法或事件来启动事件

d) 编写一个静态 url 并在新选项卡中模拟请求，例如打开新选项卡并放置 url 之类的

```
 http://domain/../ajax/BTBookAppointment.aspx?dsl=xx&date=yy&timeslot=zz 
```

e) 创建一个新的 firefox 配置文件，不添加任何额外的插件。在那里测试您的应用程序

让我知道你在这方面走了多远。希望这会有所帮助:)

# c++ - 将数据从 qt 插入到 postgres 数据库错误

> ID：10027081
> 
> 赞同：0
> 
> 时间：2012-04-05T10:41:35.730
> 
> 标签：c++, qt, postgresql

在过去的 2-3 天里，我在将数据从我制作的 Qt 程序插入到 postgres 数据库时遇到问题。

我已经与数据库建立了连接，但是当我尝试插入数据时，程序向我发送了以下消息：

```
ERROR:  syntax error at or near "("
LINE 1: EXECUTE  ('thisIsSomeName', 4, '0000')
                 ^
QPSQL: Unable to create query 
```

这是来自 Qt 的插入值的代码。

```
QSqlQuery qsql;
qsql.prepare("INSERT INTO baza(Name, ID, Birth Date)"
                     "VALUES (?, ?, ?)");

        qsql.bindValue(0, "thisIsSomeName");
        qsql.bindValue(1, 4);
        qsql.bindValue(2, "0000");

        if (qsql.exec())
        {
            label->setText("all is good");
        } 
```

你能告诉我如何使这项工作。谢谢。巴扎脚本

```
CREATE TABLE baza
(
  "Name" name NOT NULL DEFAULT 50,
  "ID" integer NOT NULL,
  "Birth Date" text DEFAULT 0,
  CONSTRAINT baza_pkey PRIMARY KEY ("ID")
)
WITH (
  OIDS=FALSE
);
ALTER TABLE baza OWNER TO postgres; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:41:37.843

try this

```
 CREATE TABLE baza
      (
         Name  name NOT NULL DEFAULT 50,
         ID  integer NOT NULL,
         Birth_Date  text DEFAULT 0,
       CONSTRAINT baza_pkey PRIMARY KEY ("ID")
    )
     WITH (
        OIDS=FALSE
     );
       ALTER TABLE baza OWNER TO postgres; 
```

then try this

```
 QSqlQuery qsql;
  qsql.prepare("INSERT INTO baza(Name, ID, Birth_Date)"
                 "VALUES (?, ?, ?)");

    qsql.bindValue(0, "thisIsSomeName");
    qsql.bindValue(1, 4);
    qsql.bindValue(2, "0000");

    if (qsql.exec())
    {
        label->setText("all is good");
    } 
```

here are some examples [sql sqlstatements](http://library.maemodocs.nokia.com/fremantle/index.jsp?topic=/org.maemo.mica.maemosdk.help.api.cpp.qt46/html/sql-sqlstatements.html)

# android - android中的简单动画冲突

> ID：10027082
> 
> 赞同：1
> 
> 时间：2012-04-05T10:41:36.527
> 
> 标签：android, animation, android-view

我已经实现了一个自定义视图。这个视图非常简单，只有 2 个状态（有边框和无边框），它们通过 ontouch 事件切换（按下时有边框，按下时没有边框）。

这是没有问题的。当我想向用户显示序列时会出现问题（因此，禁用触摸事件并手动设置视图状态更改）。

我的布局中有 4 个该类型的视图，我想要的只是切换这些视图的状态，以便对用户可见。

```
MyView v1 = (MyView)findViewById(...)
MyView v2 = (MyView)findViewById(...)
MyView v3 = (MyView)findViewById(...)
MyView v4 = (MyView)findViewById(...)

v1.switchMode()
v2.switchMode()
v3.switchMode()
v4.switchMode() 
```

此开关应保持一段时间（1 秒）对用户可见。模式是通过一个布尔变量实现的。我的实现如下：

```
public void switchMode()
  this.mode = false;
  this.invalidate();
  try {
Thread.sleep(1000);
  } catch (InterruptedException e) {
e.printStackTrace();
  }
  this.mode = true;
  this.invalidate();
} 
```

看来我的睡眠是全线程睡眠，所以我的视图没有重绘，我保持4秒没有任何响应并改变视图。

关于如何实现这个简单的状态切换的任何线索？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:23:16.287

我找到了解决这个问题的好方法。CountDownTimer 按我的意愿行事：它提供了一个接口来为任意操作设置计时器，以及一个刻度控制器来在该操作中引入一些可变性（就我而言，我可以一直设置 2 个刻度，以在所需时间内更改模式）。

# php - CodeIgniter 上传图片然后调整大小

> ID：10027083
> 
> 赞同：6
> 
> 时间：2012-04-05T10:41:40.410
> 
> 标签：php, codeigniter, codeigniter-2

我正在尝试上传图像并调整它们的大小，到目前为止，上传工作正常，并且还创建了缩略图。但我无法调整原始图像的大小。所发生的只是文件以其原始大小直接上传到文件夹。我想我正在尝试将此图像调整大小然后覆盖最初上传的文件。

这是我的代码我缺少什么：

```
//Initialise the upload file class
    $config['upload_path'] = './image_uploads/';
    $config['allowed_types'] = 'jpg|jpeg|gif|png';
    $config['max_size'] = '6048';
    $this->load->library('upload', $config);

    $userfile = "_upload_image";
            //check if a file is being uploaded
            if(strlen($_FILES["_upload_image"]["name"])>0){

                if ( !$this->upload->do_upload($userfile))//Check if upload is unsuccessful
                {
                    $upload_errors = $this->upload->display_errors('', '');
                    $this->session->set_flashdata('errors', 'Error: '.$upload_errors);   
                    redirect('admin/view_food/'.$food->course_id);  
                }
                else
                {
                    //$image_data = $this->upload->data();

                     ////[ THUMB IMAGE ]
                    $config2['image_library'] = 'gd2';
                    $config2['source_image'] = $this->upload->upload_path.$this->upload->file_name;
                    $config2['new_image'] = './image_uploads/thumbs';
                    $config2['maintain_ratio'] = TRUE;
                    $config2['create_thumb'] = TRUE;
                    $config2['thumb_marker'] = '_thumb';
                    $config2['width'] = 75;
                    $config2['height'] = 50;
                    $this->load->library('image_lib',$config2); 

                    if ( !$this->image_lib->resize()){
                $this->session->set_flashdata('errors', $this->image_lib->display_errors('', ''));   
              }

                    //[ MAIN IMAGE ]
                    $config['image_library'] = 'gd2';
                    $config['source_image'] = $this->upload->upload_path.$this->upload->file_name;
                    //$config['new_image'] = './image_uploads/';
                    $config['maintain_ratio'] = TRUE;
                    $config['width'] = 250;
                    $config['height'] = 250;
                    $this->load->library('image_lib',$config); 

                    if ( !$this->image_lib->resize()){
                $this->session->set_flashdata('errors', $this->image_lib->display_errors('', ''));   
              }
               }      
           } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-17T13:37:04.097

在过去的 20 小时里，我一直在尝试创建缩略图，但直到我意识到我在哪里弄乱了代码，我才成功，我没有初始化我的配置数组！！！

只需在加载**image_lib后添加这行代码**

```
$this->image_lib->initialize($config); 
```

希望这对你有用............竖起大拇指！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T11:42:38.523

您是否尝试将其添加到配置选项中

```
$config['overwrite'] = TRUE; 
```

这应该可以解决问题。

根据文档

> 如果设置为 true，如果存在与您上传的文件同名的文件，则会覆盖该文件。如果设置为 false，如果存在另一个具有相同名称的数字，则将在文件名后附加一个数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-09T18:30:14.730

如果你喜欢用 CI 玩 Image，我强烈推荐 image_moo 库。

# android - 如何在android中显示图像/视频缩略图

> ID：10027084
> 
> 赞同：0
> 
> 时间：2012-04-05T10:41:46.887
> 
> 标签：android, image, thumbnails

大家好，我想在我的应用程序中显示图像/视频缩略图。我使用以下代码检索缩略图并在适配器中列出它们。以下是代码

```
public class ImageAdapter extends BaseAdapter {
        private Context context;

        private final String[] VideoValues;

        public ImageAdapter(Context context, String[] VideoValues) {
            this.context = context;
            this.VideoValues = VideoValues;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            System.out.println("***********In getView************");
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View gridView;

            if (convertView == null) {

                gridView = new View(context);

                // get layout from gridlayout.xml
                gridView = inflater.inflate(R.layout.gridlayout, null);

                // set value into textview
                TextView textView = (TextView) gridView
                        .findViewById(R.id.grid_item_label);
                textView.setText(fileList[position]);
                System.out.println("value of fileList[position]" + fileList[0]);
                // set image
                ImageView imageThumbnail = (ImageView) gridView
                        .findViewById(R.id.grid_item_image);

                Bitmap bmThumbnail;

                System.out
                        .println(">>>>>>>>>>>>>>>>>>>>>>>>>>>> file path>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"
                                + fileList[position]);

                bmThumbnail = ThumbnailUtils.createVideoThumbnail(FILE_PATH
                        + fileList[position],
                        MediaStore.Video.Thumbnails.MINI_KIND);
                if (bmThumbnail != null) {
                    System.out
                            .println(">>>>>>>>>>>>>>>>>>>>>>>>>>>> THUMB NAIL>>>>>>>>>>>>>>>>>>>>>>>>>>>>>");

                    imageThumbnail.setImageBitmap(bmThumbnail);
                } else {
                    System.out
                            .println(">>>>>>>>>>>>>>>>>>>>>>>>>>>>NO THUMB NAIL>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>");

                }

            } else {
                gridView = (View) convertView;
            }

            return gridView;
        }

        public int getCount() {
            // return 0;
            return VideoValues.length;
        }

        public Object getItem(int position) {
            return null;
        }

        public long getItemId(int position) {
            return 0;
        }

    }
} 
```

它适用于三星 Galaxy Tab 10.1 中的图像和视频，但它不适用于 acer iconia A501。对此有任何想法。

两者都在运行 HoneyComb。

Rgds,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-04T18:53:22.770

我希望这对你有帮助。只需将其调整为您的应用程序：

```
 View view = convertView;
        if (convertView == null)
            view = inflater.inflate(R.layout.grid_item_layout, null);

        ImageView image = (ImageView) view.findViewById(R.id.image);
        TextView textView = (TextView) view.findViewById(R.id.date);

        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = 8;

        String filePath = fileList.get(position).getFilePath();
        String dateTaken = fileList.get(position).getDateTaken();
        Long type = fileList.get(position).getType();
        Bitmap bitmap = null;
        if(type == MediaStore.Files.FileColumns.MEDIA_TYPE_IMAGE)
            bitmap = BitmapFactory.decodeFile(filePath, options);
        else if(type == MediaStore.Files.FileColumns.MEDIA_TYPE_VIDEO)
            bitmap = ThumbnailUtils.createVideoThumbnail(filePath, 0);
        image.setImageBitmap(bitmap);
        textView.setText(dateTaken); 
```

# objective-c - Cocos2d：创建没有内容的 Sprite

> ID：10027089
> 
> 赞同：0
> 
> 时间：2012-04-05T10:42:16.357
> 
> 标签：objective-c, cocos2d-iphone

我必须在 cocos2d 应用程序中绘制一些原语。为了封装绘图，我创建了一个自定义 CCSprite，并在其中覆盖了该`draw`方法。

```
@implementation EnergyBar

-(id) init {
    if(self=[super init]){
        [self setAnchorPoint:ccp(0,0)];
    }
    return self;
}

-(void) draw
{
    [super draw];

    glEnable(GL_LINE_SMOOTH);
    glColor4ub(80, 80, 80, ENERGY_ALPHA);
    glLineWidth(1);

    CGPoint vertices2[] = { ccp(0,0),
        ccp(ENERGY_WIDTH,0),
        ccp(ENERGY_WIDTH,ENERGY_HEIGHT),
        ccp(0,ENERGY_HEIGHT)
    };
    ccDrawPoly(vertices2, 4, YES);

} 
```

节点按预期绘制矩形。一旦我尝试将此节点添加为子节点，`CCSpriteBatchNode`就会出现异常`'NSInternalInconsistencyException', reason: 'CCSprite is not using the same texture id'`。在此节点中，我不想使用父精灵图中定义的任何图块。那么如何将此节点添加为`CCSpriteBatchNode`规避此异常的子节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:43:06.653

你不能这样做:)

的目标`CCSpriteBatchNode`是父母在批量调用中绘制所有孩子（所以你`draw`不会被调用）。您需要将精灵添加到另一个父级（不是`CCSpriteBatchNode`）。

# c++ - 快速排序算法（递归）

> ID：10027091
> 
> 赞同：1
> 
> 时间：2012-04-05T10:42:37.153
> 
> 标签：c++

我从我观看的 youtube 中算法的视觉呈现中制作了一个快速排序算法，但我的递归根本不起作用。:( 如果我注释掉这两行，

```
quicksort(array,0,start-1);
quicksort(array,start+1,temp); 
```

..程序没​​有崩溃，输出变为2,1,3,5,4，这部分正确..但是当它进入递归时它崩溃了。在整个while循环之后，开始与结束相同..

```
#include <stdio.h>
#include <conio.h>

void swap(int *a, int *b){

int temp = *a;
*a = *b;
*b = temp;
}

void quicksort(int *array, int start, int end){

int pivot = start;
int temp = end;     
while(start != end){

if(pivot==start){
    if(array[pivot] > array[end]){
    swap(&array[end],&array[pivot]);
    pivot = end;
    start++;
    }
    else
    end--;
}
else{
if(array[pivot] < array[start]){
    swap(&array[start],&array[pivot]);
    pivot = start;
    end--;
}  
else
start++;   

}               
}

quicksort(array,0,start-1);
quicksort(array,start+1,temp);
}

main(){

int x[5] = {3,1,5,2,4};
int i;
quicksort(x,0,4);
for(i=0;i<5;i++)
printf("%d ", x[i]);
getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:48:52.800

缺少的是取消算法的重点。如果您检查您的函数的控制流，您会看到在应用程序可以通过该函数的每条路径上，该`quicksort`函数都被再次调用。找出何时完成很简单。如果参数和相等，您只需要退出函数**而无需**再次调用。这应该够了吧。`quicksort``start``end`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:48:16.700

致崩溃者：您的代码缺少递归的终止条件。这意味着即使输入范围为空，您仍然可以输入递归调用（数组的负索引，这可能导致崩溃）。您应该添加条件，例如

```
if(there's at most 1 element in the input range)
  return; // already sorted 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:34:53.420

```
QuickSort Algorithm:

    - QuickSort( A[], l, r)
      - P = A[l] // Select pivot as the beginning element from array or you can do better //with good pivots.
      - i = l + 1 // index i to be next of pivot
      - for j = l + 1 to r
         - if A[j] < P
           - swap (A[j], A[i])
           - increment i
         - end if
     - end for
     - swap (A[i-1], A[l]);
     -- Call recursive on left partitioned array
     -- Call recursive on right partitioned array.

// QuickSort_2.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"

#define ARR_SIZE            200
#define PR_ARR_SIZE         200
unsigned int input_arr[ARR_SIZE];

void swap(unsigned int *a, unsigned int *b)
{
    unsigned int tmp;
    tmp = *a;
    *a = *b;
    *b = tmp;
}

void print_input(unsigned int input[], unsigned int l, unsigned  int n)
{
    unsigned int i;
    for (i = l; i < n; i++)
        printf("%d ", input[i]);
    printf("\n");
}

void QuickSort(unsigned int input[], unsigned int l, unsigned int r)
{
    unsigned int i = l + 1, j;
    unsigned int pivot = input[l];
    if (l + 1 < r) {
        for (j = l + 1; j < r; j++) {
            if (input[j] < pivot) {
                swap(&input[j], &input[i]);
                i++;
            }
        }
        swap(&input[i - 1], &input[l]);

        QuickSort(input, l, i);
        QuickSort(input, i, r);
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    unsigned int i = 0;
    unsigned int val;
    FILE *fp;

    errno_t err = fopen_s(&fp, "IntegerArray.txt", "r+");
    if (err) {
        printf("unable to open a file\n");
        return -1;
    }
    while (fscanf_s(fp, "%ld\n", &val) != EOF) {
        input_arr[n++] = val;
    }

    print_input(input_arr, 0, n);
    QuickSort(input_arr, 0, n);
    print_input(input_arr, 0, n);

    return 0;
}

Put these values in "IntegerArray.txt" file and 

2
3
4
5
6
10
11
12
1
17
18
19
20
7
8
9
13
14
15
16 
```

# mysql - 如何使用 mysql 查询从 where 子句中获取别名值？

> ID：10027092
> 
> 赞同：-1
> 
> 时间：2012-04-05T10:42:38.880
> 
> 标签：mysql

如何从 where 子句中获取别名值？

```
SELECT <DATA> FROM <TABLE> WHERE <CONDITION1> AS LABEL1,<CONDITION2> AS LABEL2; 
```

结果是，

```
<DATA>
<LABEL1> 
```

或者

```
<DATA>
<LABEL2> 
```

对我有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:46:55.867

您不能`ALIAS`在`WHERE`子句中使用，但可以在子句中使用它`HAVING`。

# php - 每 15 秒运行一次 PHP，并在数据库更改时通知用户

> ID：10027093
> 
> 赞同：2
> 
> 时间：2012-04-05T10:42:41.797
> 
> 标签：php, jquery, database, mobile

我正在使用 JQuery Mobile 构建一个应用程序。我有一个名为 list.php 的页面，它使用 PHP 从服务器获取数据。我需要脚本每 15 秒运行一次，并在数据库发生更改时通知用户。我是 PHP 和 Javascript 的初学者，所以我不知道如何做到这一点，甚至不知道它是否可能。

这是我目前正在使用的代码。

```
<?php
$number = $_GET['number'] ;

mysql_connect('localhost','username','password');
$link = mysql_connect('localhost', 'username', 'password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}

//specify database 
mysql_select_db("database") or die("Unable to select database"); 

// Build SQL Query 
$query = "select * from table where tablenumber = \"$number\" and state = 0  
  order by time";

 $result = mysql_query($query) or die("Couldn't execute query");

?>

<!DOCTYPE html> 
<html> 
    <head> 
    <title>title</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>

</head> 
<body> 

<div data-role="page">

    <div data-role="header" > 
    <h1>Transpanel</h1>
</div>
    <div data-role="content">   

        <div data-role="collapsible-set">

    <?php 
// display the results returned
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
?>
<div data-role="collapsible" data-theme="b" data-content-theme="d">
   <h3><?= $row["OSO"] ?></h3>
   <p><?=$row["AIKA"]?><p>
</div>
<?php } ?>

</div>

    </div><!-- /content -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:47:36.023

只需使用 AJAX，每 15 秒调用一次 AJAX 函数`setInterval('checkfornew()', 15000);`。所以：

```
function checkfornew() {
    var http = new XMLHttpRequest();
    var url = "get.php";

    http.open("GET", url, true);

    //Send the proper header information along with the request
    http.setRequestHeader("Content-type", "application/x-www-form-urlencoded; charset=UTF-8");
    http.setRequestHeader("Content-length", params.length);
    http.setRequestHeader("Connection", "close");

    http.onreadystatechange = function() {
        if(http.readyState == 4 && http.status == 200) {
            if(http.responseText != "") {
                alert(responseText);
            }
        }
    }
    http.send(params);
} 
```

并将 body-tag 更改为

```
<body OnLoad="setInterval('checkfornew()', 1500);"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:46:44.593

为什么不修改你的更新逻辑，让它启动一个通知线程来通知你的用户呢？以这种方式轮询是非常低效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:47:13.720

如果您在 linux 机器上，请将脚本添加到 cronjob

**评论后编辑**

```
# crontab -e
00 * * * * /usr/local/bin/php /home/john/myscript.php 
```

或者如果它在 url

```
 00 * * * * lynx -dump http://www.thegeekstuff.com/myscript.php 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T10:49:00.547

服务器上的代码不能自行运行并通知浏览器更改，它根本没有内置到 HTTP 协议中。

一个简单的解决方案是每 15 秒重新加载一次页面：

```
<body onload="window.setTimeout(function(){document.location.reload(true);},15000)"> 
```

如果您希望浏览器在不重新加载页面的情况下获得更新，您应该研究 AJAX。基本上，您设置了另一个可以返回更改的 PHP 页面，例如 JSON 格式。在页面中使用 Javascript（例如`ajax`jQuery 库中的方法），您可以获得更改并让脚本对它们做出反应。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T11:14:54.697

我认为您正在尝试创建一个移动网络应用程序。每 15 秒通过 setTimeout() 加载整个页面可能会给您的浏览器带来不必要的负载，就像每 15 秒点击浏览器刷新按钮一样烦人！！！相反，您需要做的就是使用 json web-services 并在[jquery.getJSON](http://api.jquery.com/jQuery.getJSON/)方法中解析[php-json](http://php.net/manual/en/function.json-encode.php)响应。使用 2 个不同的文件：jquery 的 list.html 和 json-web-services 的 list.php。下面是解析带有响应***结果的 json 的示例：{key1:OSO;key2:AIKA}***

 *```
$(document).ready(){ 
//always include jquery code in $(document).ready(){ your javascript here} loads faster
setInterval(function() {
    $.getJSON('list.php', function(json) {
    //assuming list.php resides with list.html directory
    //console.log(json)
      console.log(json.result.key1);
       console.log(json.result.key2);

    });
  }, 15000); //request list.php every 15 seconds
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T10:57:56.643

为了每 15 秒更新一次，您最好使用 cron 作业。为了在数据库更改时通知用户，这是我的解决方案：创建另一个表，其中包含用户所做操作的记录。另一种选择是在数据库上实现散列函数，但我不知道这会有多效率。*

# google-maps-api-3 - 多边形中的孔

> ID：10027094
> 
> 赞同：0
> 
> 时间：2012-04-05T10:42:46.717
> 
> 标签：google-maps-api-3, polygon

我从这个网站添加了这个多边形代码： [http ://www.geocodezip.com/v3_polygon_example_donut.html](http://www.geocodezip.com/v3_polygon_example_donut.html)

但是有一个问题，半径不准确。所以如果我测量两个城市之间的距离，然后画这个圆圈，它很遥远，而且圆圈越大越差。

有任何想法吗？

```
<script type="text/javascript"> 
function drawCircle(point, radius, dir) { 
var d2r = Math.PI / 180;   // degrees to radians 
var r2d = 180 / Math.PI;   // radians to degrees 
var earthsradius = 3959; // 3959 is the radius of the earth in SM

   var points = 1000; 

   // find the raidus in lat/lon 
   var rlat = (radius / earthsradius) * r2d; 
   var rlng = rlat / Math.cos(point.lat() * d2r); 

   var extp = new Array(); 
   if (dir==1)  {var start=0;var end=points+1} // one extra here makes sure we connect the
   else     {var start=points+1;var end=0}
   for (var i=start; (dir==1 ? i < end : i > end); i=i+dir)  
   { 
  var theta = Math.PI * (i / (points/2)); 
  ey = point.lng() + (rlng * Math.cos(theta)); // center a + radius x * cos(theta) 
  ex = point.lat() + (rlat * Math.sin(theta)); // center b + radius y * sin(theta) 
  extp.push(new google.maps.LatLng(ex, ey)); 
  bounds.extend(extp[extp.length-1]);
   } 
   // alert(extp.length);
   return extp;
   }

    var map = null;
    var bounds = null;

    function initialize() {
  var myOptions = {
    zoom: 10,
    center: new google.maps.LatLng(29.10860062, -95.46209717),
    mapTypeControl: true,
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  }
  map = new google.maps.Map(document.getElementById("map_canvas"),
                            myOptions);

  bounds = new google.maps.LatLngBounds();

  var donut = new google.maps.Polygon({
             paths: [triangleCoords = [
                        new google.maps.LatLng(-87, 120), 
                        new google.maps.LatLng(-87, -87), 
                        new google.maps.LatLng(-87, 0)],
                     drawCircle(new google.maps.LatLng(29.10860062, -95.46209717), 2000, -1)],";

             strokeColor: "#000000",
             strokeOpacity: 0.6,
             strokeWeight: 2,
             fillColor: "#999999",
             fillOpacity: 0.6
 });
 donut.setMap(map);

 map.fitBounds(bounds);

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:38:15.647

A better circle-drawing routine may be found by using the "point from bearing" calculations at [http://www.movable-type.co.uk/scripts/latlong.html#destPoint](http://www.movable-type.co.uk/scripts/latlong.html#destPoint)

θ is the bearing (in radians, clockwise from north); d/R is the angular distance (in radians), where d is the distance travelled and R is the earth’s radius

```
var lat2 = Math.asin( Math.sin(lat1)*Math.cos(d/R) + 
              Math.cos(lat1)*Math.sin(d/R)*Math.cos(brng) );
var lon2 = lon1 + Math.atan2(Math.sin(brng)*Math.sin(d/R)*Math.cos(lat1), 
                     Math.cos(d/R)-Math.sin(lat1)*Math.sin(lat2)); 
```

Converting everything to radians and making sure that d and R are both expressed in the same units, we get a circle-drawing routine like this

```
function drawCircle(point, radius, dir, addtoBounds) { 
var d2r = Math.PI / 180;   // degrees to radians 
var r2d = 180 / Math.PI;   // radians to degrees 
var earthsradius = 6371000; // 3959 is the radius of the earth in SM

   var points = 1000; 

   // find the raidus in lat/lon 
   var rlat = (radius / earthsradius) * r2d; 
   var rlng = rlat / Math.cos(point.lat() * d2r); 

   var extp = new Array(); 
   if (dir==1)  {var start=0;var end=points+1} // one extra here makes sure we connect the
   else     {var start=points+1;var end=0}
   for (var i=start; (dir==1 ? i < end : i > end); i=i+dir)  
   { 
      var theta = Math.PI * (i / (points/2)); 
    var lat1=point.lat()*d2r;
    var lon1=point.lng()*d2r;
    var d=radius;
    var R=earthsradius;

    var ex = Math.asin( Math.sin(lat1)*Math.cos(d/R) + 
              Math.cos(lat1)*Math.sin(d/R)*Math.cos(theta) );
    var ey = lon1 + Math.atan2(Math.sin(theta)*Math.sin(d/R)*Math.cos(lat1), 
                     Math.cos(d/R)-Math.sin(lat1)*Math.sin(ex));
      extp.push(new google.maps.LatLng(ex*r2d, ey*r2d)); 
      if (addtoBounds) bounds.extend(extp[extp.length-1]);
   } 
   // alert(extp.length);
   return extp;
   } 
```

I have an example at [http://www.acleach.me.uk/gmaps/v3/mapsearch.htm](http://www.acleach.me.uk/gmaps/v3/mapsearch.htm) where the centre is at CYQX and there's another marker at EINN and a circle of 1715NM radius (expressed as 3176180m). Other circles have been added at radii of 500, 1000, 1500, 2000 and 2500NM.

I've also added a geodesic line between the two points. This crosses the circles at right-angles as expected, which is a check on the accuracy of the circle calculation.

# database - 我的 h2 内存数据库进程崩溃，如何找到崩溃日志

> ID：10027100
> 
> 赞同：1
> 
> 时间：2012-04-05T10:43:10.117
> 
> 标签：database, memory, crash, h2

我启动 h2 服务器，并通过`jdbc:h2:tcp://localhost/mem:databaseName;DB_CLOSE_DELAY=-1`这个 jdbc 字符串创建一个内存数据库。

然后我启动我的服务器，它会创建很多到 h2 内存数据库的 db 连接。但不幸的是，我的 h2 服务器进程总是崩溃。我不知道为什么以及是否有此崩溃的崩溃日志。

# c++ - 在 C++ 中一次读取一个 int 文件

> ID：10027107
> 
> 赞同：2
> 
> 时间：2012-04-05T10:43:53.590
> 
> 标签：c++, file-io

我正在开发一个程序，该程序需要将文件中的整数读入二维数组。这个概念很简单，我通常对文件 I/O 没问题。我的问题是该文件包含 20 行 18 个数字。这些数字不被空格分隔。一个例子是：

123456789987654321
192837465564738291

我必须将每个单独的数字读入二维数组。我创建了一个 for 循环，但我没有从循环的文件 I/O 部分获得所需的输出。有没有办法做到这一点，或者我是否需要使用解决方法，例如将行读入字符串/数组并将其分割？它快把我逼疯了。在代码中，infile 已经打开并测试过了。GRIDSIZE 的大小为 9，grid 是二维数组

```
int n;

for(int i=0; i<GRIDSIZE; i++)
      {   
    for(int j=0; j<GRIDSIZE; j++)
      {
        infile.get()>>grid[i][j];//This is causing the problem
         // infile >> n //Also tried this, not working
         // grid[i][j] = n;
        cout<<grid[i][j]<<endl;
      }
      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:53:25.210

[在 ifstream 上](http://www.cplusplus.com/reference/iostream/istream/get/)调用get() 会返回一个转换为 int 的字符。所以尝试改变

```
infile.get()>>grid[i][j]; 
```

到

```
grid[i][j] = infile.get(); 
```

这将为您提供数字的 ASCII 值。然后，您可以使用[isdigit()](http://www.cplusplus.com/reference/clibrary/cctype/isdigit/)（如 stefaanv 所述）来确保您确实有一个数字，然后从它们中减去 0x30（= 48 或“0”）以获得整数值（从[ASCII 图表](http://www.antrak.org.tr/gazete/062006/cizimler/tolga-tastan/ascii_table.jpg)中可以看出，数字从 0x30 到 0x39）。例如：

```
int n = infile.get();
if(isdigit(n)) {
  grid[i][j] = n - '0';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T10:56:33.273

您可以使用[infile.get()](http://www.cplusplus.com/reference/iostream/istream/get/)来获取一个字符（如 sonicwave 的回答）并使用[isdigit()](http://www.cplusplus.com/reference/clibrary/cctype/isdigit/)检查您是否真的有一个整数数字。

**编辑**（来自 adohertyd
的评论后）：如果 ASCII 字符是数字，您可以从中减去 ASCII 字符“0”以获得实际数字。

# jquery - jQuery Validate - 成功事件？

> ID：10027110
> 
> 赞同：15
> 
> 时间：2012-04-05T10:44:05.920
> 
> 标签：jquery, validation, jquery-validate

我在我的网站上使用[jQuery Validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)插件，然后通过 ajax 提交表单。*当整个*表格有效时，我可以使用一个事件吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-05T10:52:03.223

没有事件。只需使用简单的 if 语句检查状态。

```
if($("form").valid()) {
 //go ahead
} 
```

但是，如果您尝试使用解决方法来捕获有效事件，则可以执行以下操作

```
$("form").submit(function() {
    if($(this).valid()) {
       //go ahead
    } else {
       //do some error handling
    }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-05T17:18:18.077

jQuery Validate 希望您处理此问题的方式是指定一个`submitHandler`又名“在表单提交且有效时运行此函数”。您将在该函数中通过 AJAX 提交表单的内容。

```
$('form').validate({
    //your normal options
    submitHandler: function(){
        $.ajax(...);
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T10:50:43.093

打电话

```
$("form").valid(); // returns true if valid 
```

并不是

```
$("form").validate(); //returns $.validate 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-21T07:11:45.263

你可以像这样实现类似的东西：

```
var validator = $("#signin_form").validate({
        rules: {
            Phone: {
                required: true,
                phone: true
            },
            VerifyCode: {
                required: true,
                verifyCode: true
            }
        },
        messages: {},
        success: function (label, element) {
            if (validator.numberOfInvalids() == 0) {
                console.log(true);
            }
        }
    }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T10:49:05.897

看到[这个](http://docs.jquery.com/Plugins/Validation)

`valid( )`检查所选表单是否有效或所有所选元素是否有效。

## 编辑

回报：`Boolean`

# sql - 多表连接与第二个表上的条件

> ID：10027113
> 
> 赞同：0
> 
> 时间：2012-04-05T10:44:09.573
> 
> 标签：sql, join, one-to-many

有两个表：人员和发票每个人都有很多发票行，我想选择所有人员信息以及他们最后的发票金额。

**人**

```
code  |  Name | ....
1     |  name1
2     |  name1
3     |  name1 
```

**发票**

```
ID    | person_code   |  amount   |  date 
1     |  2            |  30000    |  12
2     |  1            |  40000    |  10
3     |  3            |  50000    |  12
4     |  2            |  60000    |  14
5     |  3            |  70000    |  12
6     |  2            |  80000    |  12
7     |  1            |  90000    |  18 
```

我要选择

```
person code | person name  | last amount
1           |  name1       |  90000
2           |  name2       |  60000
3           |  name3       |  70000 
```

或者

```
 SELECT person.code , person.name , lastinvoice.amount 
 FROM person 
 LEFT JOIN
     (SELECT * FROM invoice where invoice.person_code=person.code order by date, ID) as
 lastinvoice ON lastinvoice.person_code = person.code 
```

此查询不适用于 ms 访问：

```
select * from invoice as i where id=(select max(id) from invoice where personCode=i.personcode and date=( select max(date) from invoice where personCode=i.PersonCode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:20:23.533

由于同一个人可以在同一日期进行多次付款，因此您需要一种打破平局以找到最新付款的方法。虽然不是很好..你可以使用`ID`列（自动编号）。但是，这需要一个额外的查询：一个获取最大日期，另一个获取该`ID`日期的最大值。

```
SELECT p.code, i.[Date], i.amount
FROM   Person p INNER  JOIN 
    (  Invoice i INNER JOIN
          (
              SELECT MAX(mxi.ID) AS MaxID, mxi.person_code, mxd.latestDate
              FROM  Invoice mxi INNER JOIN 
                       (
                          SELECT person_code, MAX([Date]) AS LatestDate
                          FROM   Invoice
                          GROUP BY person_code
                        ) mxd ON mxd.person_code = mxi.person_code AND mxd.latestDate = mxi.[Date]
              GROUP BY  mxi.person_code, mxd.latestDate
           )  lt ON lt.MaxID = i.ID
     ) ON p.code = i.person_code 
```

现在解决问题。上面的查询一直有效，直到您将第一个联接从 更改`INNER`为`LEFT`。然后 Access 抱怨它太复杂/模棱两可。（也许更熟悉 Access 的人可以重写它以满足其限制。）否则，您可能必须将部分 sql 拆分为视图/存储查询。然后加入视图/存储的查询。就像我说的......它经常变得令人费解。但这是我能想到的让 Access 开心的唯一方法。

**vLatestInvoice**（存储查询/查看）

```
SELECT i.ID, i.person_code,  i.[Date], i.amount
FROM   Invoice AS i INNER JOIN 
         (   SELECT MAX(mxi.ID) AS MaxID, mxi.person_code, mxd.latestDate
             FROM  Invoice mxi INNER JOIN 
                      (
                         SELECT person_code, MAX([Date]) AS LatestDate
                         FROM   Invoice
                         GROUP BY person_code
                      ) mxd ON mxd.person_code = mxi.person_code AND mxd.latestDate = mxi.[Date]
             GROUP BY  mxi.person_code, mxd.latestDate
         ) AS lt ON lt.MaxID = i.ID; 
```

**主要查询：**

```
SELECT p.code, l.[Date], l.amount
FROM Person p LEFT JOIN vLatestInvoice l ON l.person_code = p.code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:09:05.083

你可以做

```
SELECT p.code, p.name, i.amount
FROM person p
INNER JOIN invoice i on i.person_code = p.code AND i.date = 
  (SELECT MAX(date) FROM invoice WHERE person_code = p.code)
AND i.ID = (SELECT MAX(ID) FROM invoice where person_code = p.code AND ID = i.ID) 
```

我已经对此进行了测试，并且效果很好！

# facebook - 如何从多个社交网络的用户名派生个人资料页面 URL

> ID：10027115
> 
> 赞同：0
> 
> 时间：2012-04-05T10:44:20.460
> 
> 标签：facebook, flickr, google-plus

我正在编写一个应用程序，它要求用户提供多个社交网络的用户名。例如推特、脸书、谷歌+。

然后，我希望能够在电子邮件中向给定用户发送可点击的链接。链接应解析到给定用户的个人资料页面。

目前这是一个 iOS 应用程序。

对于像 Twitter 这样的服务，这非常简单：每个人都知道他们的用户名，这是一个简单的字符串连接案例来获取用户名。

对于 Google Plus，字符串操作是不可能的。

对于 Flickr 和 Facebook，有虚 URL，但不是直截了当的。

我不介意在服务器上做任何繁重的工作，但我问这个问题是为了确保我没有错过任何技巧。

我的问题是这样的：

*   给定一个用户名，有没有办法派生个人资料页面？
*   我应该寻找哪些 API 调用？
*   是否已经有服务可以做到这一点？
*   这是一个真正的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:35:18.193

Google+ 没有用户名的概念。旧的 Google Profiles 产品采用`https://profiles.google.com/{username}`. 对于拥有旧式个人资料并已激活 Google+ 的用户，这将重定向到他们的`https://plus.google.com/ID`个人资料。也就是说，绝大多数 Google+ 用户没有这些旧用户名，因此可能不值得尝试这条路线。

获取用户配置文件 URL 的推荐方法是通过具有`https://www.googleapis.com/auth/plus.me`范围的 OAuth 流发送用户，然后使用 userId 为“me”调用[people.get](https://developers.google.com/+/api/latest/people/get)，并拉取响应的配置文件 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:49:19.687

对于 facebook 获取 JSON`http://graph.facebook.com/<username>`并查看`link`值

Flickr 有一个 API 调用`flickr.people.findByUsername` [http://www.flickr.com/services/api/flickr.people.findByUsername.html](http://www.flickr.com/services/api/flickr.people.findByUsername.html)

Google Plus 也有 API，例如

`GET https://www.googleapis.com/plus/v1/people/userId`

[https://developers.google.com/+/api/](https://developers.google.com/+/api/)

# java - 如何使用消息传递编写生产者-消费者解决方案？

> ID：10027118
> 
> 赞同：0
> 
> 时间：2012-04-05T10:44:51.530
> 
> 标签：java

我找到了下一个代码：

```
public static void main(String args[]) {
        Producer producer = new Producer();
        producer.start();
        new Consumer(producer).start();
    }
}
class Producer extends Thread {
    static final int MAXQUEUE = 5;
    private Vector<String> messages = new Vector<String>();

    public void run() {
        try {
            while (true) {
                putMessage();
                sleep(1000);
            }
        } catch (InterruptedException e) {
        }
    }

    private synchronized void putMessage() throws InterruptedException {

        while (messages.size() == MAXQUEUE)
            wait();
        messages.addElement(new java.util.Date().toString());
        notify();
    }

    public synchronized String getMessage() throws InterruptedException {
        notify();
        while (messages.size() == 0)
            wait();
        String message = (String) messages.firstElement();
        messages.removeElement(message);
        return message;
    }
}

class Consumer extends Thread {
    Producer producer;

    Consumer(Producer p) {
        producer = p;
    }

    public void run() {
        try {
            while (true) {
                String message = producer.getMessage();
                System.out.println("Got message: " + message);
                sleep(2000);
            }
        } catch (InterruptedException e) {
        }
    } 
```

因此，据我了解消息传递 - 只是不使用共享资源，而是像上面的示例引用一样使用从一个对象到另一个对象进行通信。我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:54:18.300

如果您遵循[发布/订阅模式](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)，那么您需要某种消息[队列](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Queue.html)。生产者将消息放入队列，消费者读取队列中的消息。

消息传递的重点是您的生产者/消费者不必直接相互引用，而只需通过队列进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:46:10.553

为什么要自己写？您可以使用现有的 Java 消息服务 (JMS) 解决方案，例如[ActiveMQ](http://activemq.apache.org/)。它可以在进程中运行并在您的对象之间传递消息。

# prestashop - 各州的 Prestashop 运费

> ID：10027122
> 
> 赞同：3
> 
> 时间：2012-04-05T10:45:08.587
> 
> 标签：prestashop, shipping

有没有办法在 prestashop 的承运人中按州设置运费？

即，假设我希望在阿拉巴马州发送的运费不同于在阿拉斯加使用同一承运人发送的运费

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T20:49:23.210

有几种方法可以做到这一点。你可以购买一个外部模块，比如[这个，或者](http://www.presto-changeo.com/en/shipping-modules/83-localized-shipping.html)[像这样](http://www.prestashop.com/forums/topic/160695-solved-carrier-by-postcode-the-easy-way/)创建一个覆盖：

1) 将“classes/Address.php”复制到“override/classes/Address.php”。

2) 在第 28 行，将类名从 AddressCore 更改为 Address

3) 在函数 getZoneById 之前，粘贴这个新函数

```
/**
* Return postcode of address
*
* @param $id_address Address id
* @return integer postcode
*/
public static function getPostcodeByAddress($id_address){
    $row = Db::getInstance()->getRow('
    SELECT `postcode`
    FROM '._DB_PREFIX_.'address a
    WHERE a.`id_address` = '.(int)($id_address));
    return $row['postcode'];
} 
```

4) 在函数 getZoneById 的第一行之前添加：

```
$postcode=self::getPostcodeByAddress($id_address); 

if(in_array($postcode,array(your list of postcodes))){
    return id-of-your-zone;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-01T11:36:28.590

这对我有用：

1.  转到本地化-> 区域
2.  根据州创建新的不同区域。例如。区域名称 = “新南威尔士州”
3.  转到本地化-> 状态
4.  选择状态并将其更改为新区域。例如。“新南威尔士州”现在改为“新南威尔士州”区域。
5.  转到运输-> 承运人
6.  点击运输方式上的“编辑”。
7.  点击“运送地点和费用”
8.  现在按现在具有相关状态的每个区域更改运费。

# java - 使用方法而不返回结果是一件好事吗？

> ID：10027124
> 
> 赞同：1
> 
> 时间：2012-04-05T10:45:11.750
> 
> 标签：java

使用接收对象并在方法内设置该对象的属性而不是返回结果的方法是一件好事吗？

在某些情况下，返回结果需要两种类似的方法，但有一些区别。

从技术上讲，on way 不需要“代码重复”并且会更快地完成工作，但我认为当没有返回结果时代码不清楚。

**HTML 分析器示例**：

```
void parseLinks(Page page){
    //processing
    page.setLinks(links);
    page.setEmails(emails);
    //page.set...;
} 
```

**或者**

```
List<Link> getLinks(SomeParameter parameter){
    //same processing
    return links;
}

List<Email> getEmails(SomeParameter parameter){
    //same processing
    return emails;
}

page.setLinks(getLinks(parameter));
page.setEmails(getEmails(parameter));
//page.set... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:16:11.197

好的做法是明确区分以某种方式修改域对象的方法和不以任何方式修改它们的方法。当您知道您使用的某些方法不会产生副作用时，在复杂系统中工作会更容易（一般来说，在计算机科学中，所有改变某些对象状态的方法都是非无副作用的）。

> 将尽可能多的程序逻辑放入函数中，即返回结果且没有明显副作用的操作。将命令（导致修改可观察状态的方法）严格隔离为不返回域信息的非常简单的操作。当适合职责的概念出现时，通过将复杂的逻辑移入 VALUE OBJECTS 来进一步控制副作用。
> 
> （领域驱动设计：解决软件核心的复杂性，Eric Evans）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:56:24.023

> 一旦被调用者完成了一些工作，您是否强烈认为该方法的调用者需要一些信息？

如果是，那么你应该返回一些东西。

```
*unit testing will be easy if callee returns something* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:48:30.223

对象数据是封装的。在代码中与对象交互的位置无关紧要。

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:04:30.540

您的示例看起来像函数编程，而不是 OOP。parseLinks 应该是 Page Class on 的一个方法，应该在“this”实例上工作，此外-如果您在任何页面上以任何方式执行此操作-我建议在构造函数中执行此操作。完成之后 - getLinks 和 getEmails 看起来像该对象的常规 getter 方法。

这就是我在这个例子中看到的，但这真的取决于你想要做什么。

**好的，现在在您为问题添加一些上下文后，我更了解它：** 我会像这样实现它 - 在解析方法中我将返回一个**新**的Page 实例（使用克隆或将正确的参数添加到构建新的方法中)，并将其字段设置为 1。像这样的东西：

```
Page parse(String content){
    Page page = new Page()
    //processing
    page.setLinks(getLinks(content));
    page.setEmails(getEmails(content));
    //page.set...;
} 
```

# html - 在 CSS 中更改打印文本大小

> ID：10027125
> 
> 赞同：4
> 
> 时间：2012-04-05T10:45:18.630
> 
> 标签：html, css

我有一个包含日志报告的 HTML 文件。我想以较小的文本大小打印该报告。我尝试使用以下 css 样式，但文本大小没有改变。如何解决这个问题。

```
<HTML>
<HEAD>
<TITLE>Events</TITLE>

<STYLE type="text/css">
 table, th, td
 {
   border: 1px solid #cccccc;
   border-collapse:collapse;
   padding: 5px;
 }
</STYLE>

 <STYLE type="text/css" media="screen">
  #eventText { 
   display: block; overflow-y: auto; height: 600px; 
   width: auto; left: 0px; top: 50px; font-size: 0.25em;
  }
  #eventButtons { display: block; }
 </STYLE>

 <STYLE type="text/css" media="print">
body { margin: 0; background-image: none; font-size: 0.25em }
    #eventText { 
    display: block; 
    overflow-y: visible; 
    height: auto; 
    margin:0; 
    font-family: geneva, arial, helvetica, sans-serif;
    font-size: xx-small;
        }
        #eventButtons { display: none; }
      </STYLE>
 </HEAD>

 <BODY>
  <div id="eventButtons">
<INPUT TYPE="BUTTON" VALUE="View" onclick="javascript:loadValues();">
<INPUT TYPE="BUTTON" VALUE="Print" onclick="javascript:window.print();">
  </div>
  <div id="eventText"> </div>
  </BODY>
  </HTML> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-04T08:12:30.450

您的确切解决方案是在 CSS 中使用 @media 规则

您可以设置 CSS 以在网页尝试打印时更改元素的样式。下面的 CSS 将在打印时将所有 DIV 元素的背景颜色设置为白色。

```
@media print{    
    div{
        background-color: #FFFFFF;
    }
} 
```

您可以通过这种方式轻松设置您选择的元素的字体，尽管您可以使用它做更多的事情。

[您可以在此处](http://www.w3schools.com/cssref/css3_pr_mediaquery.asp)找到有关@media 规则的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T10:52:33.617

而不是声明`font-size:.25em`使用绝对值，如`font-size:xx-small`.

# c# - 在 CommitEditingStyle Monotouch 上插入

> ID：10027126
> 
> 赞同：0
> 
> 时间：2012-04-05T10:45:19.800
> 
> 标签：c#, ios, xamarin.ios

基本上我想要的是，如果单击编辑按钮，则会将“创建”单元格附加到我的列表中，该单元格将导航到要添加的单独屏幕控制器。我目前有删除工作以及插入工作（它只是将一个空白单元格插入到您的表格中）。有人能帮忙吗？谢谢。以下是我的代码...

```
private class UserAlertsTableViewSource : UITableViewSource

    {

        const string DEFAULT_CELL = "UserAlertsCell";

        private UserAlertsListController _useralertslistController;

        public UserAlertsTableViewSource( UserAlertsListController useralertslistController)
        {
            this._useralertslistController = useralertslistController;  
        }

        public override int RowsInSection(UITableView tableView, int section)
        {
            return _useralertslistController.Alerts.Count;

        }

        public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
        {
            int row = indexPath.Row;

            var cell = tableView.DequeueReusableCell(DEFAULT_CELL) as UserAlertsCell;   

            if (null == cell) {
                cell = new UserAlertsCell();
                var views = NSBundle.MainBundle.LoadNib("UserAlertsCell", cell, null);
                cell = Runtime.GetNSObject(views.ValueAt(0)) as UserAlertsCell;

            }

            cell.Name = _useralertslistController.Alerts[indexPath.Row].LakeName;
                cell.AlertLevel = _useralertslistController.Alerts[indexPath.Row].AlertLevel;
            cell.AlertVariance = _useralertslistController.Alerts[indexPath.Row].AlertVariance;

            return cell;
        }

        public override void RowSelected(UITableView tableView, NSIndexPath indexPath)
        {
            SelectItem (tableView, indexPath);
        }

        public override void AccessoryButtonTapped(UITableView tableView, NSIndexPath indexPath)
        {
            SelectItem(tableView, indexPath);
        }

        public override float GetHeightForRow(UITableView tableView, NSIndexPath indexPath)
        {
            return 60f;

        }

        public void SelectItem(UITableView tableView, NSIndexPath indexPath)
        {
        //  MapController mapController = new MapController();
        //  _lakelevelsController.NavigationController.PushViewController(mapController, true);
        }

    //  public override bool CanEditRow (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
    //  {
    //      return true;
    //  }

    public override UITableViewCellEditingStyle EditingStyleForRow (UITableView tableView, NSIndexPath indexPath)
        {

            var count = this._useralertslistController.Alerts.Count;
            if (indexPath.Row == count-1 )
            {
                return UITableViewCellEditingStyle.Insert;
            }else
            {
                return UITableViewCellEditingStyle.Delete;
            }

        }

        public override void CommitEditingStyle (UITableView tableView, UITableViewCellEditingStyle editingStyle, NSIndexPath indexPath)
        {

        switch (editingStyle)
            {
            case UITableViewCellEditingStyle.Delete:

            this._useralertslistController.Alerts.RemoveAt (indexPath.Row);
            tableView.DeleteRows (new NSIndexPath[] { indexPath } , UITableViewRowAnimation.Fade);
                break;

            case UITableViewCellEditingStyle.Insert:
            this._useralertslistController.Alerts.Insert ( indexPath.Row, new AlertSettings ());
                tableView.InsertRows (new NSIndexPath[] { indexPath }, UITableViewRowAnimation.Fade); 

                break;

            case UITableViewCellEditingStyle.None:
                Console.WriteLine ("CommitEditingStyle: None called");
                break;

        }
        }

        public override void MoveRow (UITableView tableView, NSIndexPath sourceIndexPath, NSIndexPath destinationIndexPath)
        {

            var item = this._useralertslistController.Alerts[sourceIndexPath.Row];
            int deleteAt = sourceIndexPath.Row;
            if (destinationIndexPath.Row < sourceIndexPath.Row)
            {
                deleteAt = sourceIndexPath.Row + 1;
            }
            this._useralertslistController.Alerts.Insert (destinationIndexPath.Row, item);
            this._useralertslistController.Alerts.RemoveAt (deleteAt);

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:25:48.833

在您的 GetCell() 和 RowSelected() 方法中，只需添加“创建”单元格的大小写。

```
if (indexPath.Row == _useralertscontroller.Alerts.Count)
{
  // this is the +1 cell, so do something special
} 
```

您还需要修改 RowsInSection() 以添加额外的行。

# iphone - 如何避免在 iPhone sdk 的 uitableview 中重新加载标签文本？

> ID：10027131
> 
> 赞同：0
> 
> 时间：2012-04-05T10:45:35.377
> 
> 标签：iphone, uitableview, uilabel

我的网络服务中有一些产品。我从中获取产品名称并使用标签文本在我的表格视图中显示它。我明白了。现在我的问题是，当我在我的表格视图中选择一些产品时，我的标签会重新加载并用我现有的标签文本覆盖，即使我的 didselectrowatindexpath 是空的。这个我用过

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:MyIdentifier] autorelease];
}
    bookName = [[UILabel alloc]initWithFrame:CGRectMake(100, 3, 180, 25)];
    NSString *text = [NSString stringWithFormat:@"%@",[[stories objectAtIndex:indexPath.row]    objectForKey: @"product_name"]];
    bookName.text = text;
    bookName.textAlignment = UITextAlignmentCenter;
    bookName.lineBreakMode = UILineBreakModeWordWrap;
    [bookName setTextColor:[UIColor blackColor]];

    CGSize expectedLabelSize = [text sizeWithFont:bookName.font constrainedToSize:bookName.frame.size lineBreakMode:UILineBreakModeWordWrap];
    CGRect newFrame = bookName.frame;
    newFrame.size.height = expectedLabelSize.height;
    bookName.frame = newFrame;
    bookName.numberOfLines = 0;
    [bookName sizeToFit];
    [cell.contentView addSubview:bookName];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:59:57.203

在 UILabel 代码上方添加以下代码。这可能会对您有所帮助。

```
for(UIView *view in cell.contentView.subviews) 
{
    [view removeFromSuperview]; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T11:02:50.917

使用以下`cellForRowAtIndexPath`方法。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] autorelease];
    }

    UILabel *bookName = (UILabel*)[cell.contentView viewWithTag:1001];
    if( !bookName )
    {
        bookName = [[UILabel alloc]initWithFrame:CGRectMake(100, 3, 180, 25)];
        [cell.contentView addSubview:bookName];
        bookName.tag = 1001;
        bookName.numberOfLines = 0;
        bookName.textAlignment = UITextAlignmentCenter;
        bookName.lineBreakMode = UILineBreakModeWordWrap;
        [bookName setTextColor:[UIColor blackColor]];
    }

    NSString *text = [NSString stringWithFormat:@"%@",[[stories objectAtIndex:indexPath.row]    objectForKey: @"product_name"]];
    bookName.text = text;

    CGSize expectedLabelSize = [text sizeWithFont:bookName.font constrainedToSize:bookName.frame.size lineBreakMode:UILineBreakModeWordWrap];
    CGRect newFrame = bookName.frame;
    newFrame.size.height = expectedLabelSize.height;
    bookName.frame = newFrame;
    [bookName sizeToFit];
} 
```

# c# - 如何在aspx页面内联显示所有类型的文件？

> ID：10027132
> 
> 赞同：0
> 
> 时间：2012-04-05T10:45:40.537
> 
> 标签：c#, asp.net, .net

我有一些上传的文件，它将是 .docx 或 .xl 或 .Png 或 .PDF 等等......一些文件类型，如 PDF 和 .GIF 正在打开 aspx 页面的内联，如果它是文档文件，它是在word文档中打开..如果它是exel文件，它正在exel中打开..我想显示所有类型的行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:39:13.410

文档或文件是在浏览器中呈现还是在单独的程序中呈现取决于是否安装了能够呈现该类型文档的浏览器插件，或者浏览器是否可以本地呈现该类型的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:59:46.503

你可以试试这个：

```
Response.AddHeader("content-disposition", "inline;filename=somefile.ext") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:56:03.673

我不确定是否可能，但您可以尝试在响应标头上设置“content-disposition”，以便就地打开文件，.

```
content-disposition :inline 
```

# objective-c - 在 iOS 4 上使用 ARC，在使用 unsafe_unretained 而不是 weak 时，我是否需要将我的 IBOutlet 属性归零？

> ID：10027133
> 
> 赞同：1
> 
> 时间：2012-04-05T10:45:42.720
> 
> 标签：objective-c, automatic-ref-counting, reference-counting

在 iOS 5 中使用 ARC 时，弱 IBOutlet 会创建一个归零引用，从而避免需要

```
self.< IBOutlet property > = nil; 
```

在*-(void)viewDidUnload*

如果我使用的是 iOS 4（**并使用 ARC**）并被迫使用***unsafe_unretained***，这是否意味着我必须覆盖*viewDidUnload*并将属性手动设置为 nil ？

编辑：这与我的情况有关：[IBOutlets 在 ARC 下应该强还是弱？](https://stackoverflow.com/questions/7678469/should-iboutlets-be-strong-or-weak-under-arc) 例外是：我不能使用创建归零参考的“弱”关键字。

希望我的问题更清楚。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:36:01.877

在使用 ARC 时，我相信您已经意识到，weak 属性不能在 iOS5 之前使用。硬币的另一面是使用 unsafe_unretained。弱属性会自动将你的属性设置为 nil。Unsafe_retained（在 iOS 5 之前的版本中也称为“assign”）不会，您需要自己执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:29:40.427

如果没有属性（在 iOS 中），IBOutlet 将是由 KVC 设置和保留的 ivar。通过`@property`设置属性来设置 ivar。

在 ARC 项目中，如果创建一个 nib 并将一个项目（例如`UILabel`）拖到 .h 文件中，`@property`则会添加一个 strong 以及在 .m 文件中将属性设置为 nil 的行将添加到`viewDidUnload`方法中，并且属性的@synthesize 语句。

还有其他方法可以处理保留`nib` `IBOutlets`该工作的方法，并且在某些指标上甚至可能更好。

从 Apple 文档[Resource Programming Guide -Managing the Lifetimes of Objects from Nib Files](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html)：

> 因为 outlet 的行为取决于平台，所以实际的声明有所不同：
> 
> 对于 iOS，您应该使用：
> @property (nonatomic, retain) IBOutlet UserInterfaceElementClass *anOutlet;
> 
> 对于 OS X，您应该使用：
> @property (assign) IBOutlet UserInterfaceElementClass *anOutlet;

我的信念是不要与苹果做事的方式作斗争，这样做往往会使事情变得更难。还要考虑到苹果拥有该平台未来的内幕消息。:-)

# java - 如何告诉 htmlunit 忽略某些错误

> ID：10027136
> 
> 赞同：5
> 
> 时间：2012-04-05T10:45:45.170
> 
> 标签：java, htmlunit

我目前正在尝试 HtmlUnit。我想填写表格然后提交。但这会导致错误，这似乎是由无法访问的文件引起的，从而导致抛出连接重置。我该如何抑制这种情况，因为考虑到整个网站的加载过程，这并不重要？不过，它似乎不会影响程序，我只是希望它被静音。

```
Apr 05, 2012 12:25:13 PM com.gargoylesoftware.htmlunit.html.HtmlPage loadExternalJavaScriptFile
Schwerwiegend(severe): Error loading JavaScript from [*link*].
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(Unknown Source)
    at java.net.SocketInputStream.read(Unknown Source)
    at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:149)
    at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:110)
    at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:264)
    at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:98)
    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:252)
    at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:281)
    at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:247)
    at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:219)
    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:298)
    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)
    at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:645)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:464)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:776)
    at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:152)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1439)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1358)
    at com.gargoylesoftware.htmlunit.html.HtmlPage.loadJavaScriptFromUrl(HtmlPage.java:1008)
    at com.gargoylesoftware.htmlunit.html.HtmlPage.loadExternalJavaScriptFile(HtmlPage.java:950)
    at com.gargoylesoftware.htmlunit.html.HtmlScript.executeScriptIfNeeded(HtmlScript.java:349)
    at com.gargoylesoftware.htmlunit.html.HtmlScript$1.execute(HtmlScript.java:230)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.doProcessPostponedActions(JavaScriptEngine.java:642)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.access$400(JavaScriptEngine.java:79)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:590)
    at net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:537)
    at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:538)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:499)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:474)
    at com.gargoylesoftware.htmlunit.html.HtmlPage.executeJavaScriptIfPossible(HtmlPage.java:870)
    at com.gargoylesoftware.htmlunit.html.HtmlScript.executeInlineScriptIfNeeded(HtmlScript.java:302)
    at com.gargoylesoftware.htmlunit.html.HtmlScript.executeScriptIfNeeded(HtmlScript.java:368)
    at com.gargoylesoftware.htmlunit.html.HtmlScript$1.execute(HtmlScript.java:230)
    at com.gargoylesoftware.htmlunit.html.HtmlScript.onAllChildrenAddedToPage(HtmlScript.java:240)
    at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.endElement(HTMLParser.java:598)
    at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)
    at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.endElement(HTMLParser.java:556)
    at org.cyberneko.html.HTMLTagBalancer.callEndElement(HTMLTagBalancer.java:1142)
    at org.cyberneko.html.HTMLTagBalancer.endElement(HTMLTagBalancer.java:1044)
    at org.cyberneko.html.filters.DefaultFilter.endElement(DefaultFilter.java:206)
    at org.cyberneko.html.filters.NamespaceBinder.endElement(NamespaceBinder.java:329)
    at org.cyberneko.html.HTMLScanner$ContentScanner.scanEndElement(HTMLScanner.java:3018)
    at org.cyberneko.html.HTMLScanner$ContentScanner.scan(HTMLScanner.java:2005)
    at org.cyberneko.html.HTMLScanner.scanDocument(HTMLScanner.java:908)
    at org.cyberneko.html.HTMLConfiguration.parse(HTMLConfiguration.java:499)
    at org.cyberneko.html.HTMLConfiguration.parse(HTMLConfiguration.java:452)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.parse(HTMLParser.java:789)
    at com.gargoylesoftware.htmlunit.html.HTMLParser.parse(HTMLParser.java:225)
    at com.gargoylesoftware.htmlunit.html.HTMLParser.parseHtml(HTMLParser.java:179)
    at com.gargoylesoftware.htmlunit.DefaultPageCreator.createHtmlPage(DefaultPageCreator.java:221)
    at com.gargoylesoftware.htmlunit.DefaultPageCreator.createPage(DefaultPageCreator.java:106)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient.java:433)
    at com.gargoylesoftware.htmlunit.WebClient.loadDownloadedResponses(WebClient.java:2187)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.doProcessPostponedActions(JavaScriptEngine.java:625)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.processPostponedActions(JavaScriptEngine.java:707)
    at com.gargoylesoftware.htmlunit.html.HtmlElement.click(HtmlElement.java:1246)
    at com.gargoylesoftware.htmlunit.html.HtmlElement.click(HtmlElement.java:1195)
    at com.gargoylesoftware.htmlunit.html.HtmlElement.click(HtmlElement.java:1158)
    at com.gargoylesoftware.htmlunit.html.HtmlImageInput.click(HtmlImageInput.java:138)
    at com.gargoylesoftware.htmlunit.html.HtmlImageInput.click(HtmlImageInput.java:99)
    at com.tronicguard.discovery.WebsiteManipulatorImplementation.<init>(WebsiteManipulatorImplementation.java:71)
    at Main.main(Main.java:10) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:23:21.580

尝试以下

```
webClient.setThrowExceptionOnFailingStatusCode(false); 
```

它应该处理 404（未找到）错误状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T08:46:31.243

在使用 jkd1.7.0_3 编译后运行 Jenkins 的测试工具时，我遇到了类似的错误。回到 JDK1.6.0_30 解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-12T17:53:47.060

实例化 htmlUnit 驱动程序如下：

driver = new SilentHtmlUnitDriver(capabilities);

将以下内容添加为嵌套类（在您实例化驱动程序的同一类中）：

```
 protected class SilentHtmlUnitDriver extends HtmlUnitDriver {
              SilentHtmlUnitDriver() {
                  super();
                  this.getWebClient().setCssErrorHandler(new SilentCssErrorHandler());
                  this.getWebClient().getOptions().setThrowExceptionOnFailingStatusCode(false);
                  this.getWebClient().getOptions().setThrowExceptionOnScriptError(false);

            }

            SilentHtmlUnitDriver(DesiredCapabilities capabilities) {
               super(capabilities);
               this.getWebClient().setCssErrorHandler(new SilentCssErrorHandler());
            }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-17T05:57:39.957

试试这个来禁用 HtmlUnit 中烦人的警告（对不起，如果代码不太正确 - 我从 Clojure “翻译”了它，但我希望你至少能明白主要思想）：

```
Import java.util.logging.Logger;
Import java.util.logging.Level;

Logger.getLogger("com.gargoylesoftware").setLevel(Level.OFF); 
```

查看[关闭 HtmlUnit 警告](https://stackoverflow.com/questions/3600557/turning-htmlunit-warnings-off)以获取更多信息。那里有一个更复杂的解决方案，但这个简单的解决方案对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T23:44:34.193

`HtmlPage.loadExternalJavaScriptFile()`将始终根据您的日志记录设置记录此错误。您需要禁用页面的日志记录，或更改阈值。

例如，如果你使用 log4j，你可以设置属性`log4j.logger.com.gargoylesoftware.htmlunit.html.HtmlPage = FATAL`

*但是，这将隐藏HtmlPage*中记录的所有错误的记录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-12T18:51:51.097

用这个：

```
LogFactory.getFactory().setAttribute("org.apache.commons.logging.Log", "org.apache.commons.logging.impl.NoOpLog");
        java.util.logging.Logger.getLogger("com.gargoylesoftware.htmlunit").setLevel(Level.OFF); 
        java.util.logging.Logger.getLogger("org.apache.commons.httpclient").setLevel(Level.OFF); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T12:04:08.167

您可以使用`HttpUnitOptions.setScriptingEnabled(true);`禁用*HttpUnit*中的 javascript 以及`HttpUnitOptions.setExceptionsThrownOnScriptError(false);`

# iphone - iPhone4是否支持蓝牙HealthDeviceProfile HDP？

> ID：10027138
> 
> 赞同：0
> 
> 时间：2012-04-05T10:46:01.717
> 
> 标签：iphone, core-bluetooth

谷歌提供的链接很少，一次又一次地导致混乱。所以，我总结了这些问题。如果问题重复，请裸露，并请提供链接以供参考。

1) iPhone4/higherversion/lowerversion/是否支持蓝牙HDP？

1a）如果支持，我在哪里可以看到示例代码？

1b) 我可以使用 Objective-C 与 HDP 设备进行交互吗？

2) 我注意到 iphone4 支持不需要 MFI 合规性的蓝牙低功耗设备？是这样吗 ？

3) 我有一些用 ANSI C++ 编写的库。可以移植到ios吗？还是我还必须考虑Objective-C？

4）你能提供一些可靠的链接来推进这个话题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:36:02.847

我认为 iPhone 支持的配置文件类型没有任何限制。

这是使用蓝牙的一个很好的链接：http: [//developer.bluetooth.org/gatt/profiles/Pages/ProfilesHome.aspx](http://developer.bluetooth.org/gatt/profiles/Pages/ProfilesHome.aspx)

*   这是所有蓝牙配置文件的列表，如果单击它们，您还可以查看它们的所有服务和特征。

这个网站也有一些关于BLE的很好的解释和一些示例代码： [http ://ble.stalliance.no/](http://ble.stalliance.no/)

这也是一些很好的示例代码：[https ://github.com/sergiomtzlosa/CoreBluetooth-Demo](https://github.com/sergiomtzlosa/CoreBluetooth-Demo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:30:22.280

HDP 是蓝牙 BR/EDR（基本速率）配置文件，并使用 IEEE 11073 作为其应用协议。

HDP profile不适用于BTLE（低能耗）设备，低能耗设备不使用11073；每个设备配置文件都有自己的一组特征。

低能耗的好处是每个配置文件都使用相同的构建块（特性），并且有一个单一的应用协议 (GATT)。此外，特性布局在 developer.bluetooth.org 网站上是公开的。

据我所知，BR/EDR 开发在 iOS 上非常受限，您只能使用 Apple 提供的配置文件（音频、Nike 运动设备和......还有什么？）。另一方面，有一个用于 GATT/low energy 的 API，因此理论上任何类型的低能耗设备都可以与 iPhone 一起使用。

# playframework-2.0 - 玩！框架有一个内置的（基本）Web 管理控制台吗？

> ID：10027139
> 
> 赞同：1
> 
> 时间：2012-04-05T10:46:01.630
> 
> 标签：playframework-2.0

一些 Web 框架具有一些用于跟踪请求统计信息、使用情况等的内置功能（例如，一些 Java 应用程序服务器具有 JMX 控制台）。有没有这样的东西融入 Play！2 框架？（通过 URL 或其他方式？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T19:34:00.263

在 Play 1.x 中，您可以执行以下操作。

当运行您的应用程序时，您可以使用`play start`而不是`play run`使用`play status`来获取有关您的应用程序的大量统计信息。

还有一个名为的模块，`infoplay`但我认为这已经有一段时间没有维护了，所以我不确定这会给你多少数据。不过可能值得一看。

我不知道目前 Play 2.0 中存在的模块，但我希望很快就会出现。

# scala - 使用 scala 不可变队列的最佳实践

> ID：10027140
> 
> 赞同：6
> 
> 时间：2012-04-05T10:46:02.100
> 
> 标签：scala, queue

我想知道如何以最佳功能方式使用队列。例如，我想将元素出列并使用递归函数打印它们。我想要最漂亮的功能。

例如，这是一个执行我想要的功能。但我不喜欢if。

他们是使用 Queue 的更好方法吗？

```
import scala.collection.immutable.Queue

def printQ[A](p:Queue[A]) {
  if(!p.isEmpty) {
    p.dequeue match { 
      case (x,xs) => 
        println(x.toString) 
        printQ(xs) 
      case _ => 
        println("End")    
    }
  }    
}

printQ(Queue(1,2,4,5)) 
```

感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:03:10.470

`Queue`没有`dequeueOption`方法，这会使它变得更好。但是，请注意，匹配中的第一个条目是详尽的；你永远无法到达`println("End")`代码。所以你可以改进你的版本：

```
def printQ[A](p: Queue[A]) {
  if (!p.isEmpty) p.dequeue match {
    case (x,xs) =>
      println(x.toString)
      printQ(xs)
  }
} 
```

当然，由于这只是按顺序遍历队列，所以总是可以

```
p.foreach(println) 
```

打印所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T11:02:42.810

您不需要测试`case _`：

```
scala> @annotation.tailrec def printQ[A](p:Queue[A]) {
     |   if(!p.isEmpty) {
     |     p.dequeue match {
     |       case (x,xs) =>
     |         println(x.toString)
     |         printQ(xs)
     |     }
     |   }
     | }
printQ: [A](p: scala.collection.immutable.Queue[A])Unit

scala> printQ(Queue(1,2,4,5))
1
2
4
5 
```

函数是否需要递归？

```
scala> for (i <- Queue(1, 2, 4, 5)) println(i)
1
2
4
5 
```

# objective-c - 报亭图标和独立图标？

> ID：10027143
> 
> 赞同：0
> 
> 时间：2012-04-05T10:46:16.960
> 
> 标签：objective-c, ios5, newsstand-kit

阅读了 Apple 关于图标指南的大量文档：http: [//developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14- SW2](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW2) [http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW1](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW1) [http:// /developer.apple.com/library/ios/#qa/qa1686/_index.html](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)

我想知道是否可以有一个报亭图标和一个独立图标。我在 info.plist（仅限 iOS 5 的应用程序的主图标和报亭图标）中设置了我的图标，但是，当我构建我的项目时，我只在报亭文件夹中看到我的封面图标。我看到 Guardian 应用程序两者都有，所以我还缺少其他东西吗？

编辑：添加截图 ![在此处输入图像描述](../Images/177f9d01d383ff30527adfa4caf18a53.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:41:06.660

这适用于我的报亭应用程序

![列表文件](../Images/015120025675d474a1888e0393dc016b.png)

确保您在 plist 文件中添加了相同的条目。

# c# - AsynFileUpload UploadedComplete 函数无法启用 Button 控件

> ID：10027147
> 
> 赞同：0
> 
> 时间：2012-04-05T10:46:48.737
> 
> 标签：c#, asp.net

**母版页表单标签：**

```
 <form runat="server" enctype="multipart/form-data" method="post"> 
```

* * *

**文件上传.aspx**

```
 <asp:UpdatePanel runat="server" ID="upnlFileUpload">     
  <ContentTemplate> 
  <asp:Button ID="Save" runat="server" Text="Save" 
        style="margin-left: 0px" Width="350px" onclick="Save_Click" />
    <ajaxToolkit:AsyncFileUpload
        ID="AsyncFileUpload1" runat="server" 
        onuploadedcomplete="AsyncFileUpload1_UploadedComplete" />
  </ContentTemplate>
  </asp:UpdatePanel> 
```

* * *

**文件上传.aspx.cs**

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
           btnSave.Enabled = false;
        }
    } 
```

* * *

```
protected void AsyncFileUpload1_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
    {
        btnSave.Enabled = true;
    } 
```

* * *

如果我上传文件，则 UploadedComplete 会被触发（我通过将文件保存在临时位置来测试它），但“保存”按钮未启用。甚至断点也能下线：

```
btnSave.Enabled = true; 
```

这段代码有什么问题？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:18:53.033

你需要做一点调整。

这是您需要做的使按钮禁用的操作：

在你`<head>`的标签中：

```
<script type = "text/javascript">
        function ClientUploadComplete(sender, e) {
            var btnSave = document.getElementById("<%=btnSave.ClientID %>");
            btnSave.disabled = true;
            btnSave.value = "Save";
        }
</script> 
```

在您的`<body>`标签中：

`<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>`先加后加：

```
 <asp:UpdatePanel runat="server" ID="upnlFileUpload">     
  <ContentTemplate> 
   <asp:AsyncFileUpload ID = "AsyncFileUpload1" runat = "server" OnClientUploadStarted = "" OnClientUploadComplete = "ClientUploadComplete" />
    <asp:Button ID="btnSave" runat="server" Text="Save" />
  </ContentTemplate>
  </asp:UpdatePanel> 
```

# visual-studio-2010 - 在 VS2010 编辑器中更改了字体大小

> ID：10027154
> 
> 赞同：0
> 
> 时间：2012-04-05T10:47:34.790
> 
> 标签：visual-studio-2010, editor

有时，当我在 VS2010 编辑器中使用 C/C++ 源文件时，窗口字体大小会发生变化。通常，当我按`CTRL`+`C`或`CTRL`+时`V`。要将字体大小恢复为原始值，我关闭并再次打开窗口。有没有更快的方法来做到这一点，例如，一些键盘快捷键？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T10:57:21.713

按住控制按钮并滚入或滚出是更改显示字体大小的快速方法。

# powershell - 如何自动导入系统模块？

> ID：10027156
> 
> 赞同：5
> 
> 时间：2012-04-05T10:47:36.070
> 
> 标签：powershell, powershell-2.0

我使用的是 Windows 2008 r2 64 位系统。

在测试我们的脚本时，我们确实右键单击了 powershell（它存在于任务栏中）并导入系统模块。

我们的脚本将在部署时使用。所以在目标机器上我们不确定是否所有的系统模块都被导入了？

如果尚未导入，如何导入所有已导入的系统模块？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T07:40:13.133

有一个隐藏的 powershell 开关来加载系统模块：

```
powershell.exe -ImportSystemModules 
```

系统模块位于 $pshome\modules 文件夹中。加载它们的等效命令是：

```
Get-Module -ListAvailable | Where-Object {$_.Path -like "$PSHOME*"} | Import-Module 
```

更新：

-ImportSystemModules 开关在 v3 中没有影响，看起来它正在消失。

# iphone - 以下功能的内存占用增加在哪里？

> ID：10027157
> 
> 赞同：1
> 
> 时间：2012-04-05T10:47:40.503
> 
> 标签：iphone, ios, multithreading, memory, cgbitmapcontextcreate

我正在使用以下功能。每当我调用它时，它都会增加我的内存使用量。我检查了所有泄漏。甚至，我在功能结束时立即释放对象。在这里，我提供我的代码供参考。请提供指导。

//函数开始时的内存 Memory in use (in bytes): 38936576

//函数结束时的内存（池耗尽后）正在使用的内存（以字节为单位）：39272448

//功能

```
-(void)parsing:(NSMutableData *)respose
{

NSAutoreleasePool *pool = [[NSAutoreleasePool alloc]init];
report_memory();
NSString *responseString = [[NSString alloc] initWithData:respose encoding:NSUTF8StringEncoding];

SBJSON *parser = [[SBJSON alloc] init];
//NSLog(@"statuses>>>>>");
statuses = [parser objectWithString:responseString
                              error:nil];

[parser release];
//report_memory();

refreshCounter = YES;
__block NSArray *segment =[[NSArray alloc]initWithArray:[statuses valueForKey:@"Segments"]];

int  mapzoomlevel = [self getZoomLevel];
int polylinewidth = 9;

if(mapzoomlevel == 7) {
    polylinewidth = 1.5;
}
else if(mapzoomlevel == 8) {
    polylinewidth = 2.5;
}
else if(mapzoomlevel ==9) {
    polylinewidth = 3;   
}    
else if(mapzoomlevel ==10) {
    polylinewidth = 3.4;   
}    
else if(mapzoomlevel == 11) {
    polylinewidth = 4;
}    
else if(mapzoomlevel <= 13) {
    polylinewidth = 4.3;
}
else if (mapzoomlevel == 14) {
    polylinewidth = 5.4;
}
else if(mapzoomlevel== 15) {
    polylinewidth = 8;
}

__block CGContextRef    context = NULL;
CGColorSpaceRef colorSpace;
//void *          bitmapData;
int             bitmapByteCount;
int             bitmapBytesPerRow;

bitmapBytesPerRow   = (self.mapView.frame.size.width * 4);
bitmapByteCount     = (bitmapBytesPerRow * self.mapView.frame.size.height);

colorSpace = CGColorSpaceCreateDeviceRGB();
// bitmapData = malloc( bitmapByteCount );

context = CGBitmapContextCreate (NULL,
                                 self.mapView.frame.size.width,
                                 self.mapView.frame.size.height,
                                 8,      // bits per component
                                 bitmapBytesPerRow,
                                 colorSpace,
                                 kCGImageAlphaPremultipliedLast);
CGContextSetAllowsAntialiasing (context,YES);
CGColorSpaceRelease( colorSpace );

CGContextTranslateCTM(context, 0, self.mapView.frame.size.height);
CGContextScaleCTM(context, 1.0, -1.0);
CGContextSetLineWidth(context, polylinewidth);

CGContextSetAlpha(context, 0.6);
UIColor *color;

for(NSDictionary *route in segment) {

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc]init];
    NSString *locations = [route valueForKey:@"Locations"];
    double speed = [[route valueForKey:@"Speed"] doubleValue];

    if (locations && ([locations length]/16 > 1)) {       

        if (speed <= 20) {
            color = [UIColor colorWithRed:222/255.0 green:0/255.0 blue:0/255.0 alpha:1.0];
        }
        else if (speed <= 40) {
            color = [UIColor colorWithRed:253/255.0 green:91/255.0 blue:2/255.0 alpha:1.0];
        }
        else if (speed <= 60) {
            color = [UIColor colorWithRed:253/255.0 green:145/255.0 blue:4/255.0 alpha:1.0];
        }
        else if (speed <=80) {
            color = [UIColor colorWithRed:255/255.0 green:212/255.0 blue:4/255.0 alpha:1.0];
        }
        else if (speed >80) {
            color = [UIColor colorWithRed:42/255.0 green:176/255.0 blue:39/255.0 alpha:1.0];
        }

        CGContextSetStrokeColorWithColor(context, color.CGColor);

        for (int i = 0; i <= locations.length - 32; i += 32) {
            NSAutoreleasePool *loc = [[NSAutoreleasePool alloc]init];
            CLLocationCoordinate2D coordinates;
            coordinates.latitude = hexDecode_iPhone([locations substringWithRange:NSMakeRange(i, 16)]);
            coordinates.longitude = hexDecode_iPhone([locations substringWithRange:NSMakeRange(i+16, 16)]);

            CGPoint point = [mapView convertCoordinate:coordinates toPointToView:self.mapView];

            if (i == 0)
                CGContextMoveToPoint(context, point.x, point.y);
            else
                CGContextAddLineToPoint(context, point.x, point.y);
            [loc drain];
        }

        CGContextStrokePath(context);

    } 
    [pool drain];
}       
[segment release];
[polyImage release];
CGImageRef ref = CGBitmapContextCreateImage(context);
polyImage = [UIImage imageWithCGImage:ref];
CGImageRelease(ref);
CGContextRelease(context);
[responseString release];
  __block NWAnotation *nannotation = [[NWAnotation alloc]initWithImage:polyImage
                                          mapView:mapView 
                                      zoomLevel:ZOOM_LEVEL 
                                      aRoadFlag:aRoadFlag
                                      nRoadFlag:nRoadFlag 
                                 othersRoadFlag:othersRoadFlag];

dispatch_queue_t queue1 = dispatch_queue_create("com.MyApp.AppTask",NULL);
dispatch_queue_t main = dispatch_get_main_queue();
dispatch_async(queue1, 
               ^{
                   dispatch_async(main, 
                                  ^{
                                      @try {
                                          //NSLog(@"%d",[queue operationCount]);
                                         [self showpolyline:nannotation];

                                      }
                                      @catch (NSException *exception) {
                                          NSLog(@"exception");
                                      }

                                  });

               });

dispatch_release(queue1);
dispatch_release(main);
[nwAnotation release];
[nannotation release];
report_memory();
[pool drain];
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T23:58:08.400

要确定哪些对象导致您的内存增长，请尝试使用 Instruments 中的 Allocations 工具执行 heapshot 分析。查看[此博客文章](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)了解更多详细信息。

作为旁注，您释放 __block 变量 nannotation 的方式是危险的，并且可能会在某些时候导致崩溃。原因是 dispatch_async 不会自动保留 __block 变量，因此在调用 [self showpolyline:nannotation] 时，nannotation 对象可能已经被释放。

# postgresql - PostgreSQL 检查约束

> ID：10027158
> 
> 赞同：1
> 
> 时间：2012-04-05T10:47:47.497
> 
> 标签：postgresql

```
CREATE TABLE my_table
(
    fk      INTEGER,
    field_1 INTEGER,
    field_2 INTEGER,
    field_3 INTEGER
)

VALID:

    fk    |    field_1    |    field_2    |    field_3              
----------+---------------+---------------+---------------
     1    |      1        |      null     |      null
     1    |      null     |      1        |      null
     1    |      null     |      null     |      1 
```

可以创建检查约束，它只允许 3 中的 1 个字段对于 1 fk 不能为空？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:55:40.533

想到直接的方法：

```
CHECK ((field_1 IS NOT NULL AND field_2 IS NULL AND field_3 IS NULL) OR
       (field_2 IS NOT NULL AND field_1 IS NULL AND field_3 IS NULL) OR
       (field_3 IS NOT NULL AND field_1 IS NULL AND field_2 IS NULL))
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:56:46.277

目前还不太清楚你想要实现什么。

如果您`NOT NULL`每行只需要一列，那么 Nitram 的答案就可以了，您也可以尝试：

```
CHECK ((sign(coalesce(field_1,0)) +
        sign(coalesce(field_2,0)) + sign(coalesce(field_3,0))) <= 1) 
```

否则，如果您需要给定 FK 的每行只有一`NOT NULL`列，您应该查看`CONSTRAINT TRIGGER`，如下所示：

```
CREATE OR REPLACE FUNCTION only_one() RETURNS trigger AS $only_one$
DECLARE
    cnt  int4;
BEGIN
    SELECT sign(coalesce(field_1,0)) +
           sign(coalesce(field_2,0)) +
           sign(coalesce(field_3,0)) +
           sign(coalesce(NEW.field_1,0)) +
           sign(coalesce(NEW.field_2,0))+
           sign(coalesce(NEW.field_3,0))
      INTO cnt
      FROM my_table WHERE fk = NEW.fk;

    IF cnt > 1 THEN
        RAISE EXCEPTION 'Sorry, too much NOT NULL values for FK=%', NEW.fk;
    END IF;

    RETURN NEW;
END;
$only_one$ LANGUAGE plpgsql;
CREATE CONSTRAINT TRIGGER my_table_only_one 
 AFTER INSERT OR UPDATE ON my_table
   FOR EACH ROW EXECUTE PROCEDURE only_one(); 
```

# emacs - 比较 markdown 或 org 模式

> ID：10027165
> 
> 赞同：55
> 
> 时间：2012-04-05T10:48:24.097
> 
> 标签：emacs, markdown, org-mode

我使用 Emacs 多年，现在，我在 org 模式下编写了很多文件，例如笔记、计划/结论或其他内容。但是，大多数网站都支持 markdown-style 而不是 org-style。StackOverflow 就是一个例子。:)

有人能告诉我这两者之间的确切区别吗？优点和缺点？你选择了哪个，为什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-06T06:24:31.647

我认为 markdown 和 org 源于不同的需求，而它们恰好具有相似的标记语法来编辑纯文本文档。

Markdown 仅旨在轻松读取/写入纯文本。参考其[理念](http://daringfireball.net/projects/markdown/syntax#philosophy)：

> Markdown 旨在尽可能地易于阅读和编写。

然而，org 更复杂，它也有更多的功能。您可以将 org 用于[GTD](https://en.wikipedia.org/wiki/Getting_Things_Done)，维护 TODO 列表、项目计划等。标记语法似乎只是整个 org 系统中的一个附件。

在我的选择中，如果只写一些普通的文档，你可以随意选择任何人。但是，如果 GTD 或打算将纯文档导出为更多格式（tex/pdf/docbook），则必须选择 org.

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-18T10:24:55.940

我从*markdown*开始，但在使用 markdown 几年后切换到*org-mode 。*

我认为*Markdown*比*org-mode*更具可读性- 特别是如果您不使用 Emacs。您有带有下划线的特殊标题，而 org-mode 使用以`#+title:`标题开头的行，而`*`, `**`, ... 用于章节/节/...标题。降价链接也`[text](link)`代替了`[[link][text]]`，脚注`[^footnote]`代替了`[fn:footnote]`.

另一方面，org-mode 可以用纯文本列表处理您可能想要做的所有事情 - 从计划您的工作和安排您的写作时间到包含实际上可以在导出时执行的代码片段，因此导出的文档始终自动包含最新版本代码的输出。

在开始将其仅用于待办事项列表后，我切换到了 org-mode。然后我意识到我也可以在里面写得很好。并且链接语法可能比降价更复杂，但`C-c C-l`会为我生成它。并且导出只是有效的。

如果你使用[emacs](http://gnu.org/s/emacs)，我肯定会推荐 org-mode。

我什至使用 org-mode 为我的基于 markdown 的网站编写了[markdown-export](http://orgmode.org/org.html#Markdown-export)，例如，它增加了对方便创建和编辑漂亮表格的支持。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-08-22T05:47:53.207

我喜欢组织模式。但我有时确实想知道“纯文本”的定义是否延伸了一点？特别是当您查看 emacs 之外的 org 文件时。你也可以说 HTML 也是纯文本的……？好的 org 并没有那么糟糕，但是如果没有 CSH 和折叠，它就很难辨认了。Markdown 在没有 CSH 的情况下当然和使用 CSH 一样可读。

除此之外，我更喜欢 org-mode，并且能够从 org 导出到 Markdown（或 HTML、PDF 或 ...）意味着它现在可以在整个 Web 上被使用（只读） ，而不仅仅是 Emacs 人。

我也更喜欢 org-mode 的链接样式`[[url][text]]`，因为它反映了 HTML 的`<a href=url>text</a>`；moin-moin's`[[url|text]]`和 MediaWiki's `[url text]`，而 Markdown 的语法`[text](url)`在我看来是错误的——而且我在使用它时总是会出错！我想这是因为在 reStructured Text 中，链接也是这样写的：（``text <url>_``并且用反引号包围，这在 Markdown 代码块中很难做到，我正在学习——感谢 @Demi 的编辑！）

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-04-05T21:14:43.487

我对markdown了解不多，但是org-mode确实可以做*很多*事情。您可以编写报告并将其导出到乳胶，您可以使用 beamer 类编写演示文稿。您可以使用 org-babel 进行文学编程，您可以使用议程、使用标签、管理任务……

[这个](https://www.youtube.com/watch?v=Ho6nMWGtepY)视频是一个很好的例子，展示了你可以用 org-mode 做什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-01T19:21:01.193

只是添加一个没有被提及的观点：人们提到的关于 org-mode 的几乎所有好处都与*emacs*相关，而不是 org-mode。上面提到的所有强大功能实际上都与 org-mode 作为纯文本文件格式无关。您可以围绕 Markdown 构建一个程序，为您提供使用 emacs + org-mode 获得的所有好处；就是没有。

*org-mode 和 markdown 的文件格式*的实际区别是有些表面的（例如，两者的表格格式几乎相同）；显然有很大程度的经验+个人偏好推动了讨论。但是对于 emacs+org-mode 的人：向我们推销您的工具，而不是格式（不要将两者混为一谈）。如果我不能在不放弃我已经喜欢使用的文本编辑软件的情况下获得 org-mode 的好处，那么在这个讨论中它对我来说几乎没有用处。

有关此问题的有趣讨论，请参见[此处。](https://news.ycombinator.com/item?id=16198623)

# c - 如何获取字符串切片？

> ID：10027172
> 
> 赞同：0
> 
> 时间：2012-04-05T10:48:43.323
> 
> 标签：c, string, glib

是否有任何函数可以在 GLib 中获取子字符串？

就像是

```
gchar *getSlice(const gchar *text, gint startIndex); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:52:57.833

你可以这样做：

```
 gchar *s = &text[start_index]; 
```

如果您想要子字符串的副本，请执行

```
 gchar *s = g_strdup(&text[start_index]); 
```

在后一种情况下，请记住在完成后释放字符串。

# eclipse - 如何在 Eclipse 中突出显示“ini 文件”

> ID：10027173
> 
> 赞同：13
> 
> 时间：2012-04-05T10:48:46.437
> 
> 标签：eclipse, eclipse-plugin, syntax-highlighting, ini

如何让 Eclipse 突出显示 .ini 文件？

在菜单窗口/首选项、常规/内容类型、测试/配置文件中，在“文件关联：”框中，我可以看到：

*.cfg（锁定） *.ini（锁定）

但我不知道这是否与此事有关，或者我能看到 ini 文件突出显示而不是纯黑色。

eclipse 是否原生支持 ini 高亮显示？如何激活它？或者也许我必须安装一个插件？哪一个？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-12T02:36:26.787

我刚刚发现这个插件似乎可以解决问题。它有点过分热心并将自己分配给所有已知的文件类型，但编辑`Preferences > General > Editors > File Associations`可以解决这个问题。

[http://colorer.sourceforge.net/eclipsecolorer/index.html](http://colorer.sourceforge.net/eclipsecolorer/index.html)

# html - 在表中的表上设置隐藏溢出

> ID：10027174
> 
> 赞同：1
> 
> 时间：2012-04-05T10:48:46.433
> 
> 标签：html, html-table, overflow

我有一个绘制日历视图的表（我们称之为日历表）。如果在显示的日期有约会，则在相关单元格中绘制一个表格（我们称之为约会表）（假设 1 行 = 30 分钟，如果约会持续 2 小时，它通过给单元格一个行跨度来覆盖 4 行4) 的日历表。约会表显示有关约会的一些详细信息。

我遇到的问题如下：约会表根据它包含的信息量进行缩放。这可能会导致信息很少的冗长约会比信息很多的短期约会显得更短。

我尝试在包含所有表行的约会表中创建一个 div，并给它一个样式元素“溢出：隐藏”。这没有结果。当我手动将 div 高度设置为 10 像素（行高至少为 50 像素）时，约会表会按原样显示（只有部分信息可用）。

一种解决方法可能是检索它所覆盖的行跨度，然后将约会表的最大高度设置为该数量 * 行高，但我想知道是否有更清洁的方法。

代码如下所示：

```
<table id = "calendartable">
    <tr>
        <td align = "left">10:00</td>
        <td>nothing here</td>
    </tr>
    <tr>
        <td align = "left">10:30</td>
        <td rowspan = "2">
            <table id = "appointmenttable">
                <tr><td>Here is the information</td></tr>
                <tr><td>Here is some more information</td></tr>
            </table>
        </td>
    </tr>
    <tr>
        <td align = "left">11:00</td>
    </tr>
    <tr>
        <td align = "left">11:30</td>
        <td>nothing here</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:19:09.080

这个怎么样？[http://jsfiddle.net/aramk/wHEm6/3/](http://jsfiddle.net/aramk/wHEm6/3/)

```
<table class="appointment-table">
    <tr>
        <td>10:00</td>
        <td>nothing here</td>
    </tr>
    <tr>
        <td>10:30</td>
        <td rowspan="3" class="appointment-slot-wrapper">
            <div class="appointment-slot">
            <div>Here is the information</div>
            <div>Here is some more information. Here is some more information. Here is some more information. Here is some more information. Here is some more information. Here is some more information. Here is some more information. Here is some more information. Here is some more information. Here is some more information. Here is some more information.</div>
            </div>
        </td>
    </tr>
    <tr>
        <td align = "left">11:00</td>
    </tr>
    <tr>
        <td align = "left">11:30</td>
    </tr>
    <tr>
        <td align = "left">12:00</td>
        <td>nothing here</td>
    </tr>
</table>​

/* CSS */
.appointment-table {
    width: 300px;
}
.appointment-table td {
    border: 1px solid black;
    padding: 4px;
    margin: 0;
    height: 20px;
    overflow: hidden;
}
.appointment-slot {
    background: red;
    padding: 4px;
    top: 0;
    left: 0;
    position: absolute;
}
.appointment-table .appointment-slot-wrapper {
    position: relative;
    background: blue;
    padding: 0;
    overflow: auto;
}
​ 
```

![在此处输入图像描述](../Images/6d47cb4714b9e06016dcd856377d10de.png)

红色位是可滚动的。此外，如果您的事件持续更多单元格，只需增加行跨度（并确保该`<td>`列的下一行中的不存在。

# c# - 尾随和前导零字符串格式

> ID：10027177
> 
> 赞同：-5
> 
> 时间：2012-04-05T10:48:53.733
> 
> 标签：c#, .net, string-formatting, tostring

生成此文件所需的 ToString 格式是什么

```
>     5  to 00000500
>     10 to 00001000
>     15 to 00001500
>     20 to 00002000 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:56:47.540

如果您只想使用`ToString`格式字符串执行此操作，而不是也涉及乘法，那么您可以使用以下内容：

```
string yourString = yourNumber.ToString("000000'00'"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T10:52:16.000

尝试做

```
(yourNum * 100).ToString("0000000"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T10:55:20.900

```
(number * 100).ToString("D8"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T11:20:23.393

您可以使用自定义格式提供程序来做到这一点。前提是输入是一个字符串。不过，它很容易更改为任何数据类型。只需将其更改`if (arg.GetType() == typeof(String))`为您想要格式化的任何内容。

用法：

```
 var five = "5";
            var ten = "10";
            var fiveteen = "15";
            var twenty = "20";

        var formatprovider = new CustomStringFormatProvider();
        var res1 = string.Format(formatprovider, "{0}", five);
        res1 = string.Format(formatprovider, "{0}", ten);
        res1 = string.Format(formatprovider, "{0}", fiveteen);
        res1 = string.Format(formatprovider, "{0}", twenty); 
```

这是格式提供程序

```
public sealed class CustomStringFormatProvider : IFormatProvider, ICustomFormatter
{
    public Object GetFormat(Type formatType)
    {
        if (formatType == typeof(ICustomFormatter)) return this;
        return Thread.CurrentThread.CurrentCulture.GetFormat(formatType);
    }
    public String Format(String format, Object arg, IFormatProvider formatProvider)
    {
        String s;

        IFormattable formattable = arg as IFormattable;

        if (formattable == null) s = arg.ToString();
        else s = formattable.ToString(format, formatProvider);

        if (arg.GetType() == typeof(String))
            return String.Join("",Enumerable.Repeat("0", 4).ToArray()) + s + String.Join("",Enumerable.Repeat("0", 4 - s.Length).ToArray());
        return s;
    }
} 
```

# jquery - jQuery 跨站调用 ASMX 服务返回值 null

> ID：10027180
> 
> 赞同：1
> 
> 时间：2012-04-05T10:49:01.950
> 
> 标签：jquery, html, ajax, asmx, cross-site

我正在尝试通过 JavaScript 和 jQuery 从 HTML 页面调用 asmx 服务。这是我的服务 HelloWorldTest.asmx 的代码：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[System.Web.Script.Services.ScriptService]
public class HelloWorldTest : System.Web.Services.WebService
{

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = true)]
    public string HelloWorld5()
    {
        string connetionString = null;
        SqlConnection connection;
        SqlDataAdapter adapter = new SqlDataAdapter();
        string sql = null;
        connetionString = System.Configuration.ConfigurationManager.ConnectionStrings["pollConString"].ToString();
        Random _rg = new Random();
        connection = new SqlConnection(connetionString);
        sql = "insert into Country (OID,country_name) values( 'Servicecalled-" + Convert.ToString(_rg.Next(0, 99999999)).PadLeft(8, '0') + "','"+System.DateTime.Now.ToString() +"')";

        connection.Open();
        adapter.InsertCommand = new SqlCommand(sql, connection);
        adapter.InsertCommand.ExecuteNonQuery();  
        return "Helloworld";
    }
} 
```

我已经在本地服务器上发布了该服务，该服务器在 192.168.0.124 和端口 80 中运行。

现在这是我用于客户端调用的 HTML 页面代码：

```
$.ajax({
    type: 'GET',
    url: http://192.168.0.124:80/pollservice/Services/HelloWorldTest.asmx/HelloWorld5',
    processData: true,
    data: {},               
    dataType: "json; charset=utf-8",
    responseType: "",
    success: function (data, textStatus, jqXHR) {
        processData(data, textStatus, jqXHR);
    }
});

function processData(data, textStatus, jqXHR) {                  
    alert(' data d = ' + data.d); 
} 
```

现在的问题：

当我遇到本地主机时，我会从服务中获得回报。这是一个简单的字符串。但是，当我将它发布到 LAN 中的服务器并从客户端计算机调用时，我得到空输出。

**但是，有趣的是，日志被写入服务器。所以 Helloworld5() 方法是通过 $.ajax(....) call 从 JavaScript 方法调用的。但是在发布服务器的情况下，JSON 返回数据是空的。**

为什么会这样？我正在以 Asp.Net 集成模式运行已发布的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:47:13.640

您将返回类型声明为 JSON，但实际上返回的是裸字符串。您可能希望在返回之前构建 JSON 数据，例如：

```
// ...

string responseData = "{ d : \"";
responseData += "Hello World!";
responseData += "\" }";

return responseData; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T11:27:37.370

如果 html 和 asmx 服务在不同的服务器上运行，这可能是因为同源[策略。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Same_origin_policy_for_JavaScript)要启用跨源 ajax 请求，您必须使用[JSONP](http://json-p.org/)或 CORS。

为确保这是一个跨源问题，您可以使用 chrome 开发人员工具，如果出现跨源问题，您将在其中收到消息“Access-Control-Allow-Origin 不允许源”。

我有一个类似的问题，我最终使用了 JSONP。

# c# - 如何在 WPF 中为所有窗口（整个应用程序）设置一个 evenHandler？

> ID：10027182
> 
> 赞同：7
> 
> 时间：2012-04-05T10:49:03.343
> 
> 标签：c#, wpf, event-handling, keydown

如何将事件处理程序（例如`keydown`）设置为整个解决方案，而不是单个窗口？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T11:05:42.443

在您的应用程序类 (App.cs) 中注册一个全局事件处理程序，如下所示：

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        EventManager.RegisterClassHandler(typeof(Window), Window.KeyDownEvent, new RoutedEventHandler(Window_KeyDown));
    }

    void Window_KeyDown(object sender, RoutedEventArgs e)
    {
        // your code here
    }
} 
```

这将处理您应用程序`KeyDown`中任何事件的事件。`Window`您可以投射`e`到`KeyEventArgs`以获取有关按下的键的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T11:09:09.937

这个怎么样：

```
 public partial class App : Application {
        protected override void OnStartup(StartupEventArgs e) {
            EventManager.RegisterClassHandler(typeof(Window), Window.KeyDownEvent, new RoutedEventHandler(KeyDown));
            base.OnStartup(e);
        }

        void KeyDown(object sender, RoutedEventArgs e) {

        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:54:23.843

您应该使用委托来连接事件（无论它在哪里）和您在事件跳转时愿意工作的功能。

您可以向委托加载任意数量的事件。

mzE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T10:54:34.413

好吧，`KeyDown`仅在当前窗口中有效，因为您需要将焦点放在`KeyDown`. 您可以做的是向所有窗口添加一个处理程序并在这些处理程序中调度另一个事件，然后使用这个新事件注册您需要的所有类。

或者，看看`Observer`模式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T10:54:44.980

您可以在所有窗口中注册事件并将其传递给全局函数/事件，或者（在 keydown 或类似情况下）您使用一些全局“事件捕获”（例如键盘的[THIS](http://www.codeproject.com/Articles/19004/A-Simple-C-Global-Low-Level-Keyboard-Hook)）。

# java - 如何使用java找出服务器响应代码

> ID：10027186
> 
> 赞同：-1
> 
> 时间：2012-04-05T10:49:13.393
> 
> 标签：java, jakarta-ee

我们如何通过java编码识别服务器响应代码。我的意思是，如果我们从服务器收到任何作为 HTTP 响应的响应，我们应该能够将其打印为字符串或其他任何内容。另外，我想知道我们如何在 java 中跟踪，如果某些特定请求被击到服务器并找出服务器响应代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:58:29.977

在 Java 中，如果您想访问 http 标头代码，可以使用：

```
URL url = new URL("http://www.google.com");
HttpURLConnection openConnection = (HttpURLConnection) url.openConnection();
openConnection.connect();
int rCode = openConnection.getResponseCode()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:15:30.237

如果您使用 URLConnection，那么此代码可以帮助您，您可以将 HTTP 响应打印为字符串。

```
String output = null;
output = getHttpResponseRabby("input url link");

public static String getHttpResponseRabby(String location) {

    String result = "";
    URL url = null;
    Log.d("http:", "balance information");

    try {
        url = new URL(location);
        Log.d("http:", "URL Link" + url);
    } catch (MalformedURLException e) {
        Log.e("http:", "URL Not found" + e.getMessage());
    }

    if (url != null) {
        try {
            BufferedReader in;
            HttpURLConnection urlConn = (HttpURLConnection) url.openConnection();
            urlConn.setConnectTimeout(1000);
            while(true)
            {
                try 
                    {
                     in = new BufferedReader(new InputStreamReader(urlConn.getInputStream()));
                    } 
                catch (IOException e) 
                    {
                        break;
                    }

                String inputLine;

                int lineCount = 0; // limit the lines for the example
                while ((lineCount < 5) && ((inputLine = in.readLine()) != null)) 
                    {
                        lineCount++;

                        result += inputLine;
                    }

                in.close();
                urlConn.disconnect();
                return result;
           }
        } catch (IOException e) {
            Log.e("http:", "Retrive data" + e.getMessage());
        }
    } else {
        Log.e("http:", "FAILED TO RETRIVE DATA" + " url NULL");
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:47:21.957

您可以调用[HttpResponse.getStatusLine().getStatusCode()](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/StatusLine.html#getStatusCode%28%29)来获取状态码：[http ://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpResponse.html](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpResponse.html)

为了获取响应实体，您调用[HttpResponse.getEntity()](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/message/BasicHttpResponse.html#getEntity%28%29)。

# android-layout - 如何设置布局的布局重力，例如 FrameLayout？

> ID：10027188
> 
> 赞同：1
> 
> 时间：2012-04-05T10:49:15.110
> 
> 标签：android-layout, gravity

如何以编程方式设置我的 FrameLayout 的布局重力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:23:11.800

您需要通过`LayoutParams`.

您不能设置布局的重力，您可以像这样设置布局成员的重力。

```
View view = new View(this);
FrameLayout.LayoutParams param = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT, FrameLayout.LayoutParams.WRAP_CONTENT, Gravity.CENTER);
view.setLayoutParams(param); 
```

# php - Facebook PHP SDK 3.1.1 无限循环

> ID：10027190
> 
> 赞同：2
> 
> 时间：2012-04-05T10:49:26.017
> 
> 标签：php, facebook, sdk

我有以下代码：

```
$facebook = new Facebook(array('appId' => $FB_APP_ID,
                             'secret' => $FB_APP_KEY,
                             'cookie' => true));
$fb_sess = $facebook->getUser();

if (empty($fb_sess)) {

  $url = $facebook->getLoginUrl(array('response_type'=>'token',
                                        'scope' => 'email'));
  header("Location: $url");

}

$me = $facebook->api('/me');
... 
```

问题是 $fb_sess 始终为 0，因此 empty($fb_sess) 始终为 true，因此重定向到登录 URL 会不断重复。我的应用程序似乎配置正确，并且我使用的是最新的 PHP SDK。有什么线索可以解决这个问题，或者至少知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T19:54:14.610

I realize this question is old, but I will answer it in case someone comes here from google (as I did).

First of all, comment out this line:

`header("Location: $url");`

and replace it with something like this:

`echo "the user appears to be empty try to <a href=".$url.">login</a>";`

This way you have the opportunity to see if there's a problem and the user won't get lost in an endless redirection loop. Most likely the error message will be appended to the URL, it'll look something like this:

`error_code=901&error_message=This+app+is+in+sandbox+mode.++Edit+the+app+configuration+at+http%3A%2F%2Fdevelopers.facebook.com%2Fapps+to+make+the+app+publicly+visible`

The problem in this example is the app is in sandbox mode.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:07:14.250

您缺少 redirect_uri 参数。添加redirect_uri

```
$params = array(
'scope' => 'email',
     'response_type'=>'token',
'redirect_uri' => 'http url after login',
); 
```

所以这将在登录后确认只有用户返回到页面。

# sql - SQL：在 OVER() 中使用 WHERE 子句？

> ID：10027192
> 
> 赞同：13
> 
> 时间：2012-04-05T10:49:57.873
> 
> 标签：sql, sql-server-2008

如何使用`WHERE`子句过滤`OVER`子句？

即从以下数据

```
LoanID | Principal | Tenor | AmortizingPrincipal 
----------------------------------------
1         20000       1       5000
1         20000       2       5000
1         20000       3       5000
1         20000       4       5000 
```

我需要在每个 Tenor 中使用 Balance Principal 的第四个虚拟列，如下所示：

```
LoanID | Principal | Tenor | AmortizingPrincipal | BalancePrinicpal 
-----------------------------------------------------------
1        20000       1       5000                  20000  
1        20000       2       5000                  15000  
1        20000       3       5000                  10000 
1        20000       4       5000                  5000 
```

像这样的东西：

```
SELECT 
    BalancePrincipal = Principal - SUM(AmortizingPrincipal) OVER(PARTITION BY LoanID WHERE Tenor < this row's tenor) 
```

更新：

以下查询给了我想要的结果：

```
选择
    L1.*    
    ,BalancePrincipal = AL1.Principal - ISNULL(Cumulative.AmortizingSum,0)
从
    贷款 L1
交叉申请
    (
        选择
            AmortizingSum = SUM(AmortizingPrincipal)
        从
            贷款 L2
        在哪里
            L1.LoanID = L2.LoanID
            和
            L1\. 男高音 > L2\. 男高音
    ) 累积

```

可以改善吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T10:57:23.897

如果您使用的是 SQL Server 2012，您可能希望在以下内容中指定`ROWS`/ ：`RANGE`[`OVER`](http://msdn.microsoft.com/en-us/library/ms189461.aspx)

> 通过指定分区内的起点和终点来进一步限制分区内的行。这是通过通过逻辑关联或物理关联指定相对于当前行的行范围来完成的。物理关联是通过使用 ROWS 子句实现的。

其他数据库系统可能具有类似的功能。此功能是 SQL Server 2012 版中的新增功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:43:29.403

对于发布的示例，看起来不需要过滤器：

```
SELECT LoanID, Principal, Tenor, AmortizingPrincipal
      ,SUM(AmortizingPrincipal) OVER(PARTITION BY LoanID ORDER BY Tenor Desc) AS BalancePrincipal
  FROM loan
  ORDER BY LoanID, Principal, Tenor 
```

更新：

似乎Sql Server 2008 没有windowing 子句？我什至不认为你可以创建一个没有窗口子句的分析函数。上面的 sql 在 Oracle 和 Postgres 上运行没有问题。默认情况下，window 子句是 UNBOUNDED PRECEDING AND CURRENT ROW (from - to)。但是您可以更改顺序并从 CURRENT ROW 转到 UNBOUNDED FOLLOWING。

更新2：

所以我很困惑：如果您无法对分区中的行进行排序，那么（累积）SUM 在分析函数中有什么意义？是否存在隐式排序？我可以更改窗口（如下）并获得相同的结果，但必须提供 ORDER BY（在 Oracle 和 Postgres 中）。如果没有 ORDER BY，我看不出分析 SUM 有什么意义。

```
SELECT LoanID, Principal, Tenor, AmortizingPrincipal
      ,SUM(AmortizingPrincipal) OVER(PARTITION BY LoanID ORDER BY tenor
                                     RANGE BETWEEN CURRENT ROW
                                       AND UNBOUNDED FOLLOWING) AS BalancePrincipal
  FROM loan
  ORDER BY LoanID, Principal, Tenor 
```

# javascript - 根据用户用于浏览的设备（android tab，iphone，ipad）动态更改zend中的布局和模板

> ID：10027193
> 
> 赞同：1
> 
> 时间：2012-04-05T10:50:07.550
> 
> 标签：javascript, css

我正在为 PC 开发一个应用程序，杂志商店，我已经完成了 PC 的大部分工作，但客户也希望在其他 android 设备中拥有相同的东西（加载为 web 视图）。

由于这些设备的高度和宽度与PC的不同，所以我需要以最简单的方式获取设备的大小和高度，以便我可以根据设备切换视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:14:48.623

我认为 Zend Framework/PHP 没有什么可看的（根据您的问题标签）。您的问题与 Javascript/CSS 更相关。

我向您推荐这篇很棒的文章：CSS-Tricks 上[不同大小的浏览器窗口的不同样式表。](http://css-tricks.com/resolution-specific-stylesheets/)你也可以参考这个网站，他们的技术对我来说确实是最好的方法，但它也需要大量的工作（和时间）。

# android - 如何从 FragmentActivity 更新 ListFragment 中的 ListView？

> ID：10027202
> 
> 赞同：10
> 
> 时间：2012-04-05T10:50:59.780
> 
> 标签：android, listview, android-fragments, simplecursoradapter, android-fragmentactivity

我在 FragmentActivity 中使用 ListFragment 以及 SimpleCursorAdapter 和修改后的 CursorLoader。修改后的 CursorLoader 仅发出 rawQueries - 没有其他更改。

在 FragmentActivity 的某个时刻，我需要重新获取为 ListFragment 中的 ListView 提供数据/游标。

我怎样才能做到这一点？

提前谢谢了。

这是在 ListFragment 中调用方法的 FragmentActivity：

```
public class ActivityList extends FragmentActivity {

    @Override
    protected void onActivityResult(final int requestCode, final int resultCode, final Intent intent) {
        ...
        processUpdateList();
    }

    ...

    private void processUpdateList() {
        Fragment fragment = getSupportFragmentManager().findFragmentById(R.id.fragmentlist);
        if (fragment != null) {
            ((FragmentList) fragment).requeryList();
        }
    }
} 
```

这里的 ListFragment 具有应该启动重新查询、重新加载或重新绘制 ListView 的方法。ListView.invalidate() 没有帮助 - 它没有更改显示的数据。

```
public class FragmentList extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor> {

    private SimpleCursorAdapter adapter;
    private Context             context;
    private ListView            listView;

    public void requeryList() {
    // listView.invalidate(); didn't re-query
        // TODO: How???
    }

    @Override
    public void onActivityCreated(final Bundle bundle) {
        super.onActivityCreated(bundle);

        context = getActivity().getApplicationContext();

        listView = getListView();

        getActivity().getSupportLoaderManager().initLoader(MyConstants.LDR_TABLE1LIST, null, this);

        adapter = new SimpleCursorAdapter(context,
                                          R.layout.fragmentlist_row,
                                          null,
                                          new String[] { Table1.DESCRIPTION },
                                          new int[] { R.id.fragmentlist_row_description },
                                          CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
        setListAdapter(adapter);
        setListShown(false);

        listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    }

    @Override
    public Loader<Cursor> onCreateLoader(final int id, final Bundle bundle) {
        MyCursorLoader loader = null;

        switch (id) {
            case MyConstants.LDR_TABLE1LIST:
                loader = new MyCursorLoader(context,
                                            MySQLiteOpenHelper.TABLE1_FETCH,
                                            null);
                break;
        }

        return loader;
    }

    @Override
    public void onLoaderReset(final Loader<Cursor> loader) {
        adapter.swapCursor(null);
    }

    @Override
    public void onLoadFinished(final Loader<Cursor> loader, final Cursor cursor) {
        adapter.swapCursor(cursor);

        setListShown(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:06:10.157

尝试调用**LoaderManager**刚刚在您的方法中提供的`restartLoader(MyConstants.LDR_TABLE1LIST, null, this);`方法。**`requeryList()`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T00:00:54.327

您不需要调用`notifyDataSetChanged()`：加载程序会为您处理。你的代码看起来不错；我没有立即看到任何问题。作为参考，我建议您将您的代码`com.example.android.apis.app/LoaderThrottle.java`与`API Demos`示例应用程序中的代码进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T20:29:36.317

加载程序将尽可能重用光标。如果你为一组没有变化的数据请求加载器，加载器是聪明的，通过 onLoadFinished 返回游标而不做*任何*额外的工作，甚至不将游标的位置设置为 -1。

尝试致电`Cursor.moveToPosition(-1)`解决`onLoadFinished()`此问题。**

# iis - 1and1 共 享服务器上的 Umbraco CMS - 无法保存 web.config 文件

> ID：10027205
> 
> 赞同：0
> 
> 时间：2012-04-05T10:51:16.763
> 
> 标签：iis, permissions, ftp, umbraco, shared-hosting

我已经安装了 Umbraco 4.0.4.2 的文件（因为 1and1 有新版本的问题，典型的废话）。

但是，当我加载此域[http://s399064010.websitehome.co.uk](http://s399064010.websitehome.co.uk)并尝试通过第 2 步时，会出现此错误：

无法保存 web.config 文件。请手动修改连接字符串。请求“System.Security.Permissions.FileIOPermission、mscorlib、Version=2.0.0.0、Culture=neutral、PublicKeyToken=b77a5c561934e089”类型的权限失败。

所以我需要一些帮助，请那些不只是重复在谷歌或关于 IIS 上找到的相同内容的人，因为 1and1 是共享的而不是专用的，所以没有 Windows 界面。有没有人让 Umbraco 在 1and1 上工作和/或我该怎么做/授予文件权限（尽管我尝试通过 FileZilla FTP 和 1and1 Webfiles 浏览器将其授予所有文件和文件夹。

谢谢伙计们，贾尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:57:49.107

我不会在您的网站的整个生命周期内建议这样做，但要完成设置，请尝试上传 web.config 并将[信任策略](http://msdn.microsoft.com/en-us/library/tkscy493%28VS.90%29.aspx)级别指定为`Full`：

```
<trust level="Full" /> 
```

启动并运行后降低信任级别。

您也可以尝试使用`Medium`，我不确定 4.5 之前的版本是否具有以下配置属性，但如果存在也设置`umbracoUseMediumTrust`为`true`：

```
<add key="umbracoUseMediumTrust" value="true" /> 
```

# php - 未初始化的字符串偏移量：0 codeigniter index.php

> ID：10027207
> 
> 赞同：0
> 
> 时间：2012-04-05T10:51:19.343
> 
> 标签：php, codeigniter

```
A PHP Error was encountered
Severity: Notice

Message: Uninitialized string offset: 0

Filename: index.php

Line Number: 154 
```

这是代码

```
if ( $stCurlHandle !== NULL )
{
    curl_setopt($stCurlHandle, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($stCurlHandle, CURLOPT_TIMEOUT, 12);
    $sResult = @curl_exec($stCurlHandle); 
    if ($sResult[0]=="O") //line number 154
     {$sResult[0]=" ";
     // echo $sResult; // Statistic code end
      }
    curl_close($stCurlHandle); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:56:32.383

`curl_exec`不返回数组，只返回字符串中的原始数据......如果您需要字符串的第一个字符，您可以使用

```
$sResult{0} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:55:11.867

$sResult 的偏移量不为零。试着做

```
print_r($sResult); 
```

在第 154 行之前，您将找出错误原因和解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:09:58.493

它很可能`false`从失败的请求中返回。在测试实际结果之前，您应该将其作为您的测试用例之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:51:52.487

如果 $sResult 有可能返回 false，这是一个布尔值，而不是字符串或数组。尝试将条件更改为：

if ($sResult !== FALSE && $sResult[0]=="O") {$sResult[0]=" ";}

# iphone - 检查是否填充了 UIimageview，然后取消隐藏按钮

> ID：10027228
> 
> 赞同：-1
> 
> 时间：2012-04-05T10:52:34.747
> 
> 标签：iphone, xcode, image, view

我想检查是否填充了 uiimageview，然后我有一个要隐藏的按钮。

我有这个代码，但它不起作用它似乎永久隐藏它......

```
 if (imageView.image == nil)
        upload.hidden = YES; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:55:33.037

试试这个：

```
 if (imageView.image)
    upload.hidden = YES;
 else
    upload.hidden = NO; 
```

# python - 如何为所有调用覆盖导入的 python 类

> ID：10027232
> 
> 赞同：14
> 
> 时间：2012-04-05T10:53:00.940
> 
> 标签：python, class

我创建了一个 python-packages /MyLibPackage，我将在我的项目中导入它。

`MyLibPackage.____init____.py`包括 mymodiciation.py。此外，MyLibPackage 文件夹包含另一个文件：base_classes.py(=external project)

mymodiciation.py 导入“ `from base_classes import *`”。

目标：我可以导入 MyLibPackage，它包含来自 base_classes 的所有类（=外部项目）。如果我需要修改一些类或函数，我可以在 mymodiciation.py 中覆盖它。它有效，但我遇到了问题。例如：

我在 mymodiciation.py 中覆盖了这些类：

```
class Bookcollection(Bookcollection):
   new_member = "lalala"

class user(user):
   def get_books(self):
      return Bookcollection() 
```

如果我做：

```
from MyLibPackage import *
x = user()
books = x.get_books() 
```

那么对象 Bookcollection 具有属性“new_member”。好的！但如果我这样做：

```
from MyLibPackage import *
x = shelf() #this class is not overwritten and used also the object "Bookcolelction"
books = x.get_books() 
```

那么对象 Bookcollection 没有属性“new_member”，因为他是用 MyLibPackage.base_classes.Bookcollection 而不是我覆盖的类 MyLibPackage.mymodiciation.Bookcollection 实例化的

我怎么说：如果我在 mymodiciation 中覆盖了一个类，那么 MyLibPackage 必须使用它，尽管当调用来自 MyLibPackage.base_classes.shelf (get_books) 时。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-05T12:41:34.083

您要做的称为“猴子补丁”，与面向对象无关。

Python 确实支持它，但是您可以控制所有类，您应该认真检查您的项目以检查您是否真的需要它。

也许使用像 Zope 组件架构这样的框架，它允许您使用接口标记类，并提供适配器对象，以便您可以干净地使用一个对象，因为它具有一些最初没有被设计为具有的接口，这将是一个更好的主意。

也就是说，您要求的是在另一个模块中更改类，它所在的位置 - 以便所有其他模块都可以看到更改。

你就是这样做的：更改它所属的模块中的类。在 Python 中，只需在源模块中将您的新类归因于所需的名称即可完成：

```
import base_classes

class Bookcollection(base_classes.Bookcollection):
   new_member = "lalala"

base_classes.Bookcollection = Bookcollection 
```

（要使这样的事情起作用，您必须避免在任何大于单个脚本的项目中使用“from x import *” - 在这种情况下，您有 2 个具有相同名称的变量，并且在整个代码中具有不同的含义：基类和例如，继承的类。Python 命名空间允许您避免这种情况）。

因此，这将更改 base_class 模块中的 Bookcollection 类 - 但仅适用于将从此时开始并在您的执行链上引用它的代码。如果示例中的“x”类在“base_classes”模块中定义，或者在“MyModule”导入之前定义，它将获得对旧“Bookcollection”类的引用。

如您所见，它很快就会变得一团糟，如果您真的选择了这种方法，那么保持项目可用的唯一方法就是进行单元测试来验证您想要修补的所有类是否都已实际修补。如您所见，即使是模块的导入顺序也会有所不同。如果你有测试地方，如果你按照破坏猴子补丁的顺序进行导入，它们就会中断。

如果您只需要在现有类中添加和替换内容，您可以修改类本身以替换其组件，而不是修改其所在的模块以替换类。这样，模块的导入顺序就无关紧要了——它甚至会影响该类的现有实例：

```
 import base_classes

 base_classes.Bookcollection.new_member = "lalala"

 def new_bookcol_method(self):
      pass

 # to replace or register a method in the other class:
 base_classes.Bookcollection.__dict__["old_bookcol_method"] = new_bookcol_method 
```

与尝试将新类（本身就是一个对象）分配给原始模块中的相同名称相比，这将为您提供更一致的行为。

总而言之，您应该按照@jamesj 在他的回答中建议的那样做，并使用不同的类，或者如果您需要动态行为，请为此使用可维护的框架，例如 Zope 组件架构。无论你采取什么方法，都要*编写*单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:54:33.297

当您遇到命名空间冲突时，拥有相同名称的类通常是一个坏主意。我建议将您的更改`MyLibPackage.base_classes.Bookcollection`为`MyLibPackage.base_classes.BaseBookcollection`或类似的。这应该可以按预期工作。

# mediaelement.js - 使 MediaElement.js 填充其容器并全屏显示

> ID：10027234
> 
> 赞同：7
> 
> 时间：2012-04-05T10:53:02.367
> 
> 标签：mediaelement.js

我有一个绝对定位的 div，我希望 MediaElement.js 用视频填充它。当用户调整窗口大小时，div 的大小会发生变化，我希望视频随之改变大小。

我尝试[了这个人的方法](http://webtonio.com/40/)，但是如果我在调整大小后全屏显示视频，全屏版本不会再在 Flash 或 html5 模式下填满整个屏幕。它显示在左上角。

事实上，即使我根本没有设置大小信息并在 Flash 中全屏显示，用户界面也会变得混乱：搜索栏与暂停/播放按钮重叠。

MediaElement.js 不一致且漏洞百出，但这是我能找到的最好的东西。与 Video.js 不同，它支持 flash 全屏。它比 JWPlayer 更容易定制和主题化，并且当我尝试像 JWPlayer 那样搜索时，它不会跳回到 Flash 视频的开头。如果我能克服它的缺点，那将非常有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-19T19:27:18.463

要配置 MediaElement.js 以使 HTML5 和 Flash 播放器填充它们的容器并响应地调整大小，您必须这样做：

```
$('video').mediaelementplayer({
  videoWidth: '100%',
  videoHeight: '100%',
  enableAutosize: true,
  plugins: ['flash'],
  pluginPath: '/swf/',
  flashName: 'flashmediaelement.swf'
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T02:48:17.253

经过大量测试，我发现视频属性的顺序对在 mediaelement 中正确播放视频有很大的影响。使用以下设置可让您在所有浏览器中播放 youtube 视频并调整其大小。myvids div 上 50% 的宽度看起来很奇怪，但没有它，视频在 IE 中的大小将不正确。在这一点上，我只有一个要解决的问题。在 iPad 上打开时，播放按钮会移动到视频的左上角。如果我在视频上设置宽度和高度而不是百分比，则播放按钮会正确显示，但播放器不会调整大小。

```
<div class="myvids" id="viddivap1" width="50%" style="width:100%;position:relative;">
  <video class="thevid" width="640"  height="360" style="max-width:100%;height:100%;" id="my_video_ap1" preload="auto"  autoplay controls="controls" >
    <source type="video/youtube" src="http://www.youtube.com/watch?v=FAGL9gxhdHM" />
    <span style="color:white;">Your browser does not support HTML5, Flash, or Silverlight.  Please update your browser.</span>
  </video>
</div> 
```

```
$('video').mediaelementplayer({

    // if set, overrides <video width>
    videoWidth: -1,
    // if set, overrides <video height>
    videoHeight: -1,
    // width of audio player
    audioWidth: 400,
    // height of audio player
    audioHeight: 30,
    // initial volume when the player starts
    startVolume: 0.8,
    // useful for <audio> player loops
    loop: false,
    // enables Flash and Silverlight to resize to content size
    enableAutosize: true,
    // the order of controls you want on the control bar (and other plugins below)
    features: ['playpause','progress','current','duration','tracks','volume','fullscreen'],
    // Hide controls when playing and mouse is not over the video
    alwaysShowControls: false,
    // force iPad's native controls
    iPadUseNativeControls: false,
    // force iPhone's native controls
    iPhoneUseNativeControls: false, 
    // force Android's native controls
    AndroidUseNativeControls: false,
    // forces the hour marker (##:00:00)
    alwaysShowHours: false,
    // show framecount in timecode (##:00:00:00)
    showTimecodeFrameCount: false,
    // used when showTimecodeFrameCount is set to true
    framesPerSecond: 25,
    // turns keyboard support on and off for this instance
    enableKeyboard: true,
    // when this player starts, it will pause other players
    pauseOtherPlayers: true,
    // array of keyboard commands
    keyActions: []
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T22:22:51.203

我正在挖掘 stackoverflow 线程，以解决与您类似的问题。MEJS 2.9.3 下载附带了一个 demo/mediaelementplayer-responsive.html 示例，该示例对我来说可以让视频在 div 内改变大小：

```
<div class="wrapper">
    <video width="640" height="360" style="width: 100%; height: 100%; z-index: 4001;" id="player1">
        <!-- Pseudo HTML5 -->
        <source type="video/youtube" src="http://www.youtube.com/watch?v=nOEw9iiopwI" />
    </video>
</div> 
```

从那里像往常一样初始化，然后调整包装器的大小！示例也可以完美地全屏显示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T21:03:54.460

我默认使用闪光灯

```
$('video,audio').mediaelementplayer( { mode: 'auto_plugin' } ); 
```

我嗅探了代码并阅读了以下内容

```
mejs.MediaElementDefaults = {
// allows testing on HTML5, flash, silverlight
// auto: attempts to detect what the browser can do
// auto_plugin: prefer plugins and then attempt native HTML5
// native: forces HTML5 playback
// shim: disallows HTML5, will attempt either Flash or Silverlight
// none: forces fallback view
mode: 'auto',
// remove or reorder to change plugin priority and availability
plugins: ['flash','silverlight','youtube','vimeo'],
// shows debug errors on screen
enablePluginDebug: false,
// overrides the type specified, useful for dynamic instantiation
type: '', 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-22T04:56:05.597

## 这对于 Flash 和 HTML5 都非常有效。

CSS：无缝全屏视频，可嵌入 iframe。

```
 body{width: 100%; height: 100%; margin: 0; padding: 0; overflow:hidden;}
    video{max-height:100%}
    .me-plugin {width: 100%; height: 100%;} 
```

* * *

HTML：

```
 <video style="width: 100%; height: 100%;"> 
```

* * *

JS：以防万一——我把这个加入了。

```
 var x = $(window).width();  
    var y = $(window).height(); 

    $(window).resize(function() {   
      var x = $(window).width();    
      var y = $(window).height();   
    });

    // Initialize your video
    $('video').mediaelementplayer({
        defaultVideoWidth: x, 
        defaultVideoHeight: y
    }); 
```

* * *

## 这花了我一些时间来弄清楚，所以一定要+1！

# sql - 计算 SQL 字符串值中字符的出现次数？

> ID：10027235
> 
> 赞同：3
> 
> 时间：2012-04-05T10:53:02.837
> 
> 标签：sql, sql-server-2008

如果您有电子邮件地址

```
you.late.you@asdf.com

you_late_you@asdf.com 
```

如果使用 sql 代码有 2 个点/下划线，如何启用计数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T11:00:19.717

```
select len('you.late.you@asdf.com') - len(replace('you.late.you@asdf.com', '.', '')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:57:08.840

这会给你想要的结果。

```
 DECLARE @str VARCHAR(1000)
SET @str = 'you.l_ate.you@as_df.com'
SELECT (LEN(@str)- LEN(REPLACE(@str ,'.' ,'')))+(LEN(@str)- LEN(REPLACE(@str ,'_' ,''))) 
```

答案：5

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T11:08:24.100

我想他想数@之前没有点的字母：

```
declare @myEmail varchar(50)
set @myEmail = 'you.late.you@asdf.com'

declare @mySearch varchar(50)
set @mySearch = SUBSTRING (@myEmail,0 , PATINDEX( '%@%',@myEmail))
select (LEN(REPLACE(@mySearch, '.', ''))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:08:10.090

如果要计算具有两个`.`or的行数`_`，可以执行以下操作：

```
select count(*) 
  from mytable 
 where left(email, charindex('@', email)) like '%[._]%[._]%' 
```

`left`and`charindex`用于忽略域名（将有）`.`。

参考：[LIKE（TSQL，SQL Server 2008）](http://msdn.microsoft.com/en-us/library/ms179859%28v=sql.100%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T15:07:36.217

```
select 
    length(substr('you.late.you@asdf.com',1,INSTR('you.late.you@asdf.com','@',1))) - 
    length(replace(substr('you.late.you@asdf.com',1,INSTR('you.late.you@asdf.com','@',1)), '.', '')) 
from dual 
```

# centos - iptables forward 和 nat 规则

> ID：10027240
> 
> 赞同：0
> 
> 时间：2012-04-05T10:53:22.097
> 
> 标签：centos, iptables, portforwarding, nat

任何人都知道如果一台计算机位于这 2 台计算机的中心，我们如何与 2 台计算机建立连接

在更好的情况下，我想一起连接到 linux pc，但是这 2 pc 不能互相看到所以有一个解决方案我有另一个 linux pc 这可以看到另外 2 pc！所以这台电脑可能有任何用于转发数据包的 iptables 规则

我想在端口 5050 上从 pc 1 连接到 pc 3 然后 pc1 可以连接到 pc2 并且 pc2 可以在端口 5050 上连接到 pc3 然后在重播步骤中 pc3 必须重播到 pc2 pc2 必须将收到的数据包转发到 pc1

为了更好地理解，请参阅：

```
1 --> 2 --> 3
1 <-- 2 <-- 3 
```

所有 pc 操作系统都是 Centos 5.7

我认为 iptables 可以做到，但我在谷歌中找不到任何参考或帮助，所以任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:45:35.387

如果您需要一个端口：

```
1 (addr 1.1.1.1)
2 (addr 1.1.1.2,3.3.3.2)
3 (addr 3.3.3.3) 
```

2：

```
iptables -t nat -A PREROUTING -s 1.1.1.1 -p tcp --dport 5050 -j DNAT --to-destination 3.3.3.3
iptables -t nat -A PREROUTING -s 3.3.3.3 -p tcp --dport 5050 -j DNAT --to-destination 1.1.1.1
iptables -t nat -A POSTROUTING -d 3.3.3.3 -p tcp --dport 5050 -j SNAT --to 3.3.3.2
iptables -t nat -A POSTROUTING -d 1.1.1.1 -p tcp --dport 5050 -j SNAT --to 1.1.1.2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T12:47:31.180

首先启用IP转发。然后输入以下命令：

> iptables -t nat -A POSTROUTING -o eth1 -j MASQUERADE
> 
> iptables -A FORWARD -i eth1 -o eth0 -m state --state RELATED,ESTABLISHED -j ACCEPT
> 
> iptables -A FORWARD -i eth0 -o eth1 -j 接受

# python - python argparse 处理任意数字选项（如 HEAD(1)）

> ID：10027242
> 
> 赞同：9
> 
> 时间：2012-04-05T10:53:41.720
> 
> 标签：python, command-line-arguments, optional-parameters, argparse

有没有办法欺骗`argparse`接受任意数字参数，例如`HEAD(1)`？

```
head -5 test.txt 
```

相当于

```
head -n 5 test.txt 
```

我目前的方法是使用`parse_known_args()`然后处理其余部分，但我希望有一些更优雅的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:22:03.837

agrparse 和 optparse 都不支持这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-05T11:04:58.367

是的，有可能：

```
#!/usr/bin/env python
# coding: utf-8

from argparse import ArgumentParser

parser = ArgumentParser(description='Argparse with numeric arguments')
parser.add_argument('-0', action='store_true', help='null separator')
args = parser.parse_args()
print vars(args)['0'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-21T17:28:35.057

实际上，您可以使用 Action 类在 argparse 中实现类似头的参数。这是一个示例程序，它将采用“-n ##”或“-##”参数并打印数字。

```
from argparse import ArgumentParser, Action, SUPPRESS
class UpdateCount(Action):
    def __call__(self, parser, namespace, values, option_string=None):
        digit = option_string[1]
        increment = int(digit)
        previous = getattr(namespace, self.dest)
        if previous is None:
            previous = 0
        else:
            previous *= 10
        setattr(namespace, self.dest, previous + increment)

parser = ArgumentParser(description='parse -## type options')
group = parser.add_mutually_exclusive_group()
group.add_argument('-n', type=int, default=10, metavar='#',
                   help='specify a number (-# also works) (default=10)')
group.add_argument('-0', '-1', '-2', '-3', '-4', '-5', '-6', '-7', '-8', '-9',
                   dest='count', default=None, nargs=0, action=UpdateCount, help=SUPPRESS)

def main():
    args = parser.parse_args()
    if args.count is None:
        count = args.n
    else:
        count = args.count
    print(count)

if __name__ == '__main__':
    main() 
```

这是一些示例输出

```
$ ./argparse_number_option -h
usage: argparse_number_option [-h] [-n #]

parse -## type options

optional arguments:
  -h, --help  show this help message and exit
  -n #        specify a number (-# also works) (default=10)
$ ./argparse_number_option -n 123
123
$ ./argparse_number_option -123
123
$ ./argparse_number_option -123 -n 34
usage: argparse_number_option [-h] [-n #]
argparse_number_option: error: argument -n: not allowed with argument -0/-1/-2/-3/-4/-5/-6/-7/-8/-9
$ 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-03-18T06:49:38.460

作为@vault's answer的替代方法，`vars(args)['0]`您还可以使用`args.__dict__['0']`

# php - 不在 Windows 上发送带有附件的邮件（phpmailer）

> ID：10027243
> 
> 赞同：0
> 
> 时间：2012-04-05T10:53:42.360
> 
> 标签：php, windows, localhost, sendmail, phpmailer

我想在 Windows 上简单地发送一封带有附件（带有表格）的邮件。我正在本地主机上进行测试。没关系，但是phpmailer不添加附件，邮件发送是空白的...

这是我的代码：

```
require_once('class.phpmailer.php');
$mail             = new PHPMailer(); 
$mail->IsMail();
$mail->SetFrom('contact@blabla.fr', 'H');
$mail->AddReplyTo("contact@blabla.fr",'H');         
$mail->AddAddress('contact@blabla.fr', "H"); 

if (isset($_FILES) && count($_FILES)>0) {                   
    foreach ($_FILES as $form) {
        if ($form['error']==0) {
            //$source = str_replace('\\','\\\\',$form["tmp_name"]);
            $source = $form["tmp_name"];
            $name = $form["name"];
            if (!$mail->AddAttachment($source,$name)) {
                echo "ERREUR D'ATTACHEMENT !! : "; var_dump($mail->ErrorInfo);
           }
        }
    }
}                   

$mail->CharSet = 'utf-8'; 

$subject = "...";
$message = ' ...' ;

$mail->Subject = $subject;
$mail->MsgHTML($message);

if($mail->Send()) {
    $back    = array('response'=>1, 'data'=>'1');
} else {
    $errors = $mail->ErrorInfo;
    $back    = array('response'=>0, 'errors'=>$errors, 'data'=>0);
} 
```

在添加附件的过程中我没有错误... bt 邮件是空白的，没有附加文件:(

谢谢，法布里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:34:00.607

我认为邮件功能不会在 localhost 上运行，除非您设置了邮件服务器。

所以第一个问题是......您是否有邮件服务器，或者如果没有......您将需要部署到具有邮件设置的服务器（即网络托管公司）

# javascript - Google AdWords 转换服务问题 - 异步转换代码

> ID：10027246
> 
> 赞同：2
> 
> 时间：2012-04-05T10:53:57.467
> 
> 标签：javascript, php, jquery, google-ads-api

我从来没有在网站上实施过 Google Adwords，所以如果我对“行话”有误，请随时纠正我。

我正在一个网站上工作，该网站有一个他们的 Google AdWord 广告系列的登录页面。在这个页面上有一个表格，当处理它时，它会带你到另一个页面说'谢谢你的请求......'。我已将其删除并用 PHP 和 Javascript 重写，以防止页面刷新或重定向。

我遇到的问题是，在“谢谢”页面上，Google 代码略有不同，并在页面加载时执行。**我的问题是，如何在不重新加载页面的情况下使用不同的变量重新执行转换代码？有谷歌脚本吗？**

**是否会删除脚本标签，然后再次放置它重新执​​行脚本？**

这是我目前拥有的代码（在表单提交之前）：

```
<!-- Google Code for Company Remarketing List Remarketing List -->
<script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = 000000;
    var google_conversion_language = "en";
    var google_conversion_format = "3";
    var google_conversion_color = "ffffff";
    var google_conversion_label = "abcdefg";
    var google_conversion_value = 0;
    /* ]]> */
</script>
<script type="text/javascript" src="http://www.googleadservices.com/pagead/conversion.js"></script>
<noscript>
    <div style="display:inline;">
        <img height="1" width="1" style="border-style:none;" alt="" src="http://www.googleadservices.com/pagead/conversion/000000/?label=abcdefg&amp;guid=ON&amp;script=0"/>
    </div>
</noscript> 
```

表单提交后需要更改的内容有：

```
var google_conversion_id = 111111;
var google_conversion_label = "gfedcba";
"http://www.googleadservices.com/pagead/conversion/gfedcba/?label=111111&amp;guid=ON&amp;script=0 
```

**改变变量很容易！困难的部分是让脚本使用新变量重新执行。**

非常感谢任何帮助！

**更新**

[此处](https://stackoverflow.com/questions/9664695/google-adwords-conversion-script)发布的答案可能解决了这个问题，但是，我想知道如何使用此答案中提到的变量提交其他变量。它们是不言自明的，但我不能确定它们是正确的！

**另外，有谁知道我在谷歌上的哪个地方可以看到这方面的说明？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:27:36.543

您不能只是重新执行脚本的原因——正如你可能已经注意到的——是它使用`document.write`了 ，在文档已经加载后不应该调用它。

正如您所提到的，一种可能的解决方案是自己触发 GIF 请求。如果您真的想重新执行脚本，则可以重定向`document.write`.

以下是如何做到这一点的总体思路——该片段将放置在您将新内容重新加载到页面中的某个位置。它假定您使用 jQuery 并且已经将新页面内容加载到`$newContent`并标记了所有需要在重新加载时执行的脚本标签`class="ajax-exec"`。它的作用是直接执行内联脚本并将 jQuery 的`$.ajax`函数与`dataType: script`. 然后它会等到所有外部脚本都执行完毕，然后将重定向的输出附加到隐藏的`div`.

这对我们有用，但没有保修（：

```
// Execute js from the new content (e.g. AdWords conversions tags).
// We redirect document.write to a string buffer as we're already
// done loading the page at this point.
var buf = '';
var writeMethSave = document.write;
$('div#lazyload-buf').remove();
var done = {};

document.write = function (string) {
        buf += string;
};

$newContent.filter('script.ajax-exec').each(function () {
    var url = $(this).attr('src');
    if (url) {
        // External script.
        done[url] = false;
        $.ajax({
            url: url,
            dataType: "script",
            success: function () {
                done[url] = true;
            }
        });
    } else {
        // Inline script.
        $.globalEval($(this).html());
    }
});

function checkForDone () {
    for (var url in done) {
        if (!done[url]) {
            setTimeout(checkForDone, 25);
            return;
        }
    }
    // All done, restore method and write output to div
    document.write = writeMethSave;
    var $container = $(document.createElement("div"));
    $container.attr('id', 'lazyload-buf');
    $container.hide();
    $(document.body).append($container);  
    $container.html(buf);
};

setTimeout(checkForDone, 25); 
```

# macos - Git、Tower 和 Sourcetree

> ID：10027257
> 
> 赞同：2
> 
> 时间：2012-04-05T10:54:59.870
> 
> 标签：macos, git, atlassian-sourcetree, git-tower

我正在我的 Mac 上试用 Tower 和 Sourcetree GUI，我有两个非常基本的问题：

*   这些 GUI 中的任何一个都安装了 Git 可执行文件，还是*使用*了我的 Mac 上安装的 Git？
*   Git 会安装在我的 Mac 上的什么位置？在命令提示符下，我输入了“which git”，但它显然不在 PATH 中，所以没有运气。这很奇怪，因为我发誓它*曾经*在 PATH 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T11:05:48.533

我不知道 Tower，但你可以在 Sourcetree 的设置中看到它可以使用系统 Git（我认为 Git 的一个版本已经嵌入在 Mac OS X 中）或嵌入在 Sourcetree 应用程序中的版本。

在我的系统`which git`上给了我：

```
/usr/bin/git 
```

如果您没有更改任何内容，它应该在路径中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T11:06:22.250

*   在[Tower FAQ](http://www.git-tower.com/support/faq.html)中找到：

> 由于 Tower 附带功能齐全的 Git 二进制文件，因此您无需在系统上安装 Git 即可使用 Tower。但是，如果您还想在命令行上使用 Git，我们建议您使用 OS X 安装程序或 MacPorts（如果您的系统上有）。

*   至于 Sourcetree，我相信它需要在你的机器上预装 Git。
*   如果您最近升级到[OS X v10.7](https://en.wikipedia.org/wiki/Mac_OS_X_Lion) (Lion)，请查看： *[Mac OS X v10.7 (Lion) 上的 Git](https://stackoverflow.com/questions/6810059/git-on-mac-os-x-lion)*

# java - 如何序列化 java.util.List 到 Json 使用 Gson 库？

> ID：10027268
> 
> 赞同：2
> 
> 时间：2012-04-05T10:56:01.837
> 
> 标签：java, javascript, json, gson

在我的 servlet 中，我有以下代码：

```
 response.setContentType("application/json");//set json content type
    PrintWriter out = response.getWriter();

   EntityManagerFactory emf=Persistence.createEntityManagerFactory("webPU");
   GpsJpaController gjc=new GpsJpaController(emf);    
   java.util.List<Gps> listGps=gjc.findGpsEntities();//retrieve the list of GPS from DB 

   Gson gson=new Gson();
   String json=gson.toJson(listGps); //convert List<Gps> to json
   out.println(json); 
```

使用以下代码从 ajax 返回响应：

```
$.ajax({ 
           type: "GET", 
           url: "getInfoGeoActive",
           dataType: 'json',
           error: function(xhr, ajaxOptions, thrownError){ $("#content").empty().append("* Error from server cause: "+thrownError).addClass("error"); } ,
           success:function(data){$("#content").empty().append(data);}
             }); 
```

当我运行代码时，我仍然收到以下错误（来自 ajax）：

```
 Error from server cause:Internal Servlet Error 
```

我还尝试`List<Gps>`在没有ajax的情况下在同一个java页面中显示序列化对象，如下：

```
EntityManagerFactory emf=Persistence.createEntityManagerFactory("JavaApplication21PU");
        GpsJpaController gjc=new GpsJpaController(emf);
        java.util.List<Gps> listGps=gjc.findGpsEntities();

        Gson gson=new Gson();
        String json=gson.toJson(listGps);

        System.out.println(json); 
```

我得到这个错误：

```
Exception in thread "main" java.lang.StackOverflowError
    at java.lang.StrictMath.floorOrCeil(StrictMath.java:355)
    at java.lang.StrictMath.floor(StrictMath.java:340)
    at java.lang.Math.floor(Math.java:424)
    at sun.misc.FloatingDecimal.dtoa(FloatingDecimal.java:620)
    at sun.misc.FloatingDecimal.<init>(FloatingDecimal.java:459)
    at java.lang.Double.toString(Double.java:196)
    at java.lang.Double.toString(Double.java:633)
    at com.google.gson.stream.JsonWriter.value(JsonWriter.java:441)
    at com.google.gson.Gson$4.write(Gson.java:270)
    at com.google.gson.Gson$4.write(Gson.java:255) 
```

请帮忙！

**编辑**： [这个问题的最终解决方案](https://stackoverflow.com/questions/10036958/the-easiest-way-to-remove-the-bidirectional-recursive-relationships)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:05:10.467

**StackOverflowException**由于无限递归而发生。您可能需要彻底检查代码是否有任何意外递归。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T11:07:15.950

看起来您的**Gps**对象包含对自身的引用。

# javascript - gwt - 从外部 javascript 调用静态 java 方法有效，但不影响 gwt 代码

> ID：10027273
> 
> 赞同：1
> 
> 时间：2012-04-05T10:56:25.283
> 
> 标签：javascript, gwt, jsni

我在 HTML 页面中有一个嵌入式 iframe。iframe 中的页面是使用 GWT 创建的。

GWT 程序有静态变量，这是我公开的一个静态方法，因此可以从外部调用它。在 GWT 程序中，有一个计时器每 10 秒检查一次静态变量。

外部 HTML 页面有一个按钮，当按下按钮时，javascript 代码会调用我的 gwt 程序中的静态方法（即在 HTML 中的 iframe 中）

我可以看到调用了GWT静态方法（里面有一个js警报调用）。但是每 10 秒运行一次并检查静态变量（在静态方法中更改）的函数报告其值没有更改。

HTML 片段

```
 <script type="text/javascript" src="/war/mygwtproject/mygwtproject.nocache.js">
<iframe id="feeds_frame" src="../root/war/mygwtproject.html" width="190" height="650" frameborder="1">

        </iframe>

function toggleDrawingFeeds()
        {
            myGwtStaticMethod();
        } 
```

GWT 代码

```
static boolean wasInitiated = false;

public static void myFunc()
{
    MyGwt.wasInitiated = true;
    alert(MyGwt.wasInitiated);
}

public void setTimer()
    {

        Timer t = new Timer()
        {
            public void run()
            {
                alert(MyGwt.wasInitiated);
                if (MyGwt.wasInitiated)
                {
                    //do something
                }
                else
                {
                    //do something else
                }
            }
        };

        // Schedule the timer to run once in 5 seconds.
        t.scheduleRepeating(10000);

    }

    public static native void exportStaticMethod() /*-{

    $wnd.myGwtStaticMethod = $entry(@myPackage.MyEntryPoint::myFunc());

}-*/; 
```

谢谢，约阿夫

# .net - 从 tfs 获取最新的批处理文件，包括排除的文件，并发布 ASP.NET 项目

> ID：10027276
> 
> 赞同：1
> 
> 时间：2012-04-05T10:56:33.163
> 
> 标签：.net, visual-studio-2010, tfs

我需要创建一个批处理文件，该文件将从 TFS 获取我最新的 ASP.NET 项目，编译并最终发布该项目。这已经实施。但是，这个批处理文件需要处理的事情很少，其中一个是如果项目中有任何处于排除模式的文件应该通过批处理文件自动包含在项目中。我使用了 Visual Studio msbuild 命令行工具来满足我的所有要求。如果有一些命令可以用来包含项目的排除文件，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T00:24:17.453

在编译中包含当前排除的文件需要更改项目文件。您必须扫描文件夹以找出排除了哪些文件，然后以编程方式更改项目文件以将它们包含在适当的项目中，然后触发编译。

没有命令可以执行此操作，我必须承认我很好奇您为什么要这样做，因为如果排除的文件之一中存在问题，则可能无法在开发人员机器上复制损坏的构建。

# opengl - OpenGL：实现变换矩阵栈

> ID：10027285
> 
> 赞同：6
> 
> 时间：2012-04-05T10:57:00.480
> 
> 标签：opengl

在较新的 OpenGL 中，没有矩阵堆栈。我正在开发一个简单的显示引擎，我将实现转换堆栈。

这里的常见策略是什么？我应该构建一个推送/弹出堆栈，并将它与代表我的模型的树一起使用吗？我想这是“旧”方法，在较新的 OpenGL 版本中已弃用。也许那时它不是最好的解决方案（由于某种原因它被删除了，我不知道）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T11:22:51.610

> （由于某种原因被删除了）

它被删除了，因为在现代 3D 应用程序中，整个 OpenGL 矩阵操作功能是高度冗余的。无论如何，任何现代 3D 应用程序都需要处理矩阵，并且由于 OpenGL 不是一个合适的矩阵数学库，因此您无论如何都会使用诸如 Eigen oder GSL 之类的东西或自制的东西。

堆栈仍然是一种非常可行的结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T11:24:55.403

我在这方面不是特别有经验，但我已经做了相当多的图形/游戏开发。我有更多的想法而不是答案。在我看来，`glPushMatrix`and的`glPopMatrix`东西已被弃用，因为许多开发人员希望完全控制转换，而不是 OpenGL 为他们处理这些。所以我的想法是它们不会被弃用，因为矩阵堆栈不是要走的路，而是因为 GL 开发人员应该自己处理矩阵，或者使用另一个库来为他们做这件事。

换句话说，矩阵堆栈可能仍然是要走的路，你只需要自己做，使用不推荐使用的功能，或者使用外部库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T11:25:11.813

固定管道功能已被弃用，因为本质上它是固定的。

为了支持新的技巧，通常需要新的 OpenGL 函数，而且很明显，持续支持请求的特性意味着增加 OpenGL API 的大小并使其越来越笨拙。

与此同时，硬件变得越来越复杂和强大，并且没有被 OpenGL 充分利用。因此，可编程流水线被构思出来。

对于 OpenGL3，Kronos 小组“弃用”了固定的管道功能。这引起了轩然大波，因为有如此多的代码和如此多的人才投资于完善的固定管道，所以他们部分地放弃了他们的决定，引入了“核心”和“兼容性”配置文件。内核配置文件包含新的可编程管道模型，兼容性配置文件包括内核以及大部分/所有固定功能，允许应用程序使用任一模型。

我们现在升级到 OpenGL 4.2，兼容性配置文件仍然存在，并且没有消失的迹象。

简而言之，弃用的原因不是因为旧模型不适合应用程序程序员；而是因为旧模型不适合应用程序员。*相反，这对实施者*来说是一个更重的负担。实际模型非常合理，许多使用可编程功能的应用程序/开发人员发现自己重新实现了固定功能的基本部分（glBegin、glEnd、矩阵堆栈、转换调用等）。

所以继续，实现你自己的矩阵堆栈。但是，如果您想出更好的主意，请与我们分享 :)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T14:44:22.507

不确定它是否对您有用，但我为此实现了两件事。第一个是具有所有常用方法的简单矩阵堆栈类，第二个是基于堆栈的 RAII 结构，它允许我使用大括号来确定矩阵变化的范围，即在构造时它存储对矩阵堆栈的引用，在销毁时它恢复矩阵堆栈回到之前的状态。所以你可以写：

```
MatrixStack stack;

stack.push(rotate...)
stack.push(translate...)

{
    MatrixScope(stack);

    stack.push(rotate...)    
}

... back to previous stack state. 
```

And to add to this, it's just for convenience with certain kinds of transforms. Generally for models composed of a tree structure of meshes, all transformed relative to one another, I will combine the matrices from the root node down before I do anything with the model. So each mesh has a local transform and a global transform, the global transform being the actual transform for that mesh relative to the root node. So no need to use a matrix stack there.

It's a bit different if you want to animate a part of the mesh independently of the rest, so that's why I also store the local transform rather than throwing it away.

# java - 如果目标将动态href即将到来，如何设置替换命令

> ID：10027287
> 
> 赞同：0
> 
> 时间：2012-04-05T10:57:07.890
> 
> 标签：java, android

这是我的 HTML：

```
desc=desc=<a target="_blank" href="http://www.taxmann.com/corporatelaws/fileopencontainer.aspx?Page=CIRNO&amp;id=27000000000000002519&amp;search=">A. P. (DIR Series) Circular No. 46 dated June 14, 2005</a> 
```

这里 id= 值变化和公司法或直接税法

```
String   k = replace ( desc, "<a target=\"_blank\" href=\"http://www.taxmann.com/corporatelaws/fileopencontainer.aspx?Page=RULES&amp;id=35000000000000001648&amp;search=\">", ""); 
```

在 desc 我得到 HTML 我有替换命令我必须删除链接所以我从锚标记中选择数据目标是动态的，其中 id 变化我能够替换链接到目标为的文本

[http://www.taxmann.com/corporatelaws/fileopencontainer.aspx?Page=RULES&id=35000000000000001648&search=](http://www.taxmann.com/corporatelaws/fileopencontainer.aspx?Page=RULES&id=35000000000000001648&search=) \

但是当目标发生变化时，我的意思是说如果 id 发生变化，它不会将链接替换为文本。

请告诉我如何获取和设置 id 值，以便如果目标是动态的，我们可以将链接替换为文本。我是android编程的新手。

```
String str = "http://www.taxmann.com/corporatelaws/fileopencontainer.aspx?Page=CIRNO&amp;id=27000000000000002519&amp;search=";
int indexoff = str.indexOf("id=");
int indexofl = str.indexOf("&amp;search=");

String strsub = str.substring(indexoff + 3, indexofl - indexoff - 3);
String strstaticstring = "http://www.taxmann.com/corporatelaws/fileopencontainer.aspx?Page=CIRNO&amp;id=" + strsub + "&amp;search=";
String k = desc.replace(strstaticstring, ""); 
```

我已经尝试过这个，但我不知道如何选择公司或直接税法会来..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:13:20.390

试试这种方式：

```
String str ="";
if(desc.contains("http://www.taxmann.com/corporatelaws/")==true)
{
 str = "http://www.taxmann.com/corporatelaws/fileopencontainer.aspx?Page=CIRNO&amp;id=27000000000000002519&amp;search=";
}

if(desc.contains("http://www.taxmann.com/directtaxlaws/")==true)
{
 str = "http://www.taxmann.com/directtaxlaws/fileopencontainer.aspx?Page=CIRNO&amp;id=27000000000000002519&amp;search=";
}

if(desc.contains("http://www.taxmann.com/corporte/")==true)
{
 str = "http://www.taxmann.com/corporte/fileopencontainer.aspx?Page=CIRNO&amp;id=27000000000000002519&amp;search=";
} 
```

或者你可以在“/”的基础上分割你的字符串，并检查它的单词 corporte、directtaxlaws 等。

```
String str = "http://www.taxmann.com/corporatelaws/fileopencontainer.aspx?Page=CIRNO&amp;id=27000000000000002519&amp;search=";      
 string[] strarr = str.Split('/'); 
```

在 strarr[3] 中，您将获得公司法价值 sa 字符串，使用它来收缩整个字符串以在 desc 中替换

# view - eclipse rcp 独立视图——如何在运行时显示隐藏的标题

> ID：10027290
> 
> 赞同：0
> 
> 时间：2012-04-05T10:57:17.187
> 
> 标签：view, show-hide, rcp, titlebar

使用 RCP 是否可以在运行时显示独立视图的标题？

我们在一个页面中有 4 个 stabdalone 视图，排列为 4 个象限，带有隐藏的标题栏。单击按钮时，我们希望显示所有这些视图的隐藏标题，以便我们可以根据需要移动和关闭它们。

我们有任何 api 来启用这些标题吗？如果不是，我们怎么可能得到同样的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:03:55.107

截至目前，我认为无法在运行时显示/隐藏视图标题：

[[RCP] [ViewMgmt] 能够以编程方式显示/隐藏视图标题](http://bugs.eclipse.org/bugs/show_bug.cgi?id=5684)

* * *

但也许您可以借助以下错误找到一些解决方法：

[[演示] 独立视图获取标题栏](http://bugs.eclipse.org/bugs/show_bug.cgi?id=75425)

> 独立视图被定义为没有标题栏，当透视图出现时，它确实没有标题栏。但是，在视图顶部和其上方的编辑器区域之间似乎有一个非常小的区域，如果您单击并向上拖动鼠标，则会出现一个标题栏。

# c# - 使用 C# for WP7 计算按钮上的点击次数

> ID：10027291
> 
> 赞同：-1
> 
> 时间：2012-04-05T10:57:17.423
> 
> 标签：c#, windows-phone-7, button

我想使用 C# 为 WP7 开发一个应用程序，用户在 10 秒内尽可能多地点击一个按钮，每次点击都会获得 2 分。在点击自身时，我希望总数的增量显示在文本框中。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:00:51.897

XAML：-

```
 <StackPanel>
                <Button Content="Tap Me"
                        Click="Button_Click" />
                <TextBox Name="MyTextBox" />
            </StackPanel> 
```

C#：-

```
 private int count = 0;

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        count++;

        this.MyTextBox.Text = count.ToString();
    } 
```

希望这可以帮助。

# php - 对 MYSQL 表的多个同时请求

> ID：10027292
> 
> 赞同：0
> 
> 时间：2012-04-05T10:57:19.823
> 
> 标签：php, mysql, ajax, database, locking

我有一个问题可能是你可以帮助我：

我对我的 PHP 函数使用 ajax 有多个请求，例如在 10-00。

我的 PHP 文件功能：

```
public function calculate(){
  $result = DB::query('SELECT * FROM `results` WHERE `time` > DATE_SUB(NOW(), INTERVAL "25" SECOND) ORDER BY `gameid` DESC LIMIT 1');
  if (intval($result->num_rows) > 0) {
     return json_decode($result->fetch_object()->data);
  } else {

      /*RESULT CALCULATION CODE /*SELECT FROM `players`....*/

      $publish_date = date("Y-m-d H:i:s");
  $result = DB::prepare("INSERT INTO `results` (`data`, `time`) VALUES (?,?) ON DUPLICATE KEY UPDATE `data` = VALUES(data), `time` = VALUES(time)");    
  $result->bind_param("ss", json_encode($arr), $publish_date);
  $result->execute();       
  $result->close();

  DB::query('TRUNCATE TABLE `players`'); /*WE CLEAN TABLE HERE*/
      return $arr;
   }
} 
```

所以我的一个客户请求应该首先计算结果并将其存储在表`results`中。

其他请求应从`results`表中获取信息而无需进行新计算。我该如何解决这个问题（LOCK TABLE???）？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:39:20.797

我会在您编写的 INSERT 语句中使用“INSERT IGNORE”。这意味着如果相同的结果已经可用，则不会再次插入。这可能偶尔会导致两个脚本几乎同时计算结果。但是，我认为这不会是一个真正的问题，因为这可能非常罕见，而且计算本身可能不会花费很长时间（会吗？）。任何用于执行计算的 MySQL 查询也将从查询缓存中得到答复。

或者，您可以保留已在共享内存中计算的结果列表：(http://php.net/manual/en/book.shmop.php) 并在您即将开始计算新的时参考此列表结果。我个人认为这将比仅仅依靠“INSERT IGNORE”做更多的工作，除非每个结果只计算一次对您的应用程序至关重要。

# python - 在 Python 中记录更高堆栈级别的模块名称/行

> ID：10027295
> 
> 赞同：3
> 
> 时间：2012-04-05T10:57:24.147
> 
> 标签：python, logging

我编写了一个包装记录器类，它将 的返回值保存`self.logger=getLogger(...)`在一个属性中，并相应地调用记录请求（`self.logger.info(...)`）。在处理程序格式中，我使用标签`%(module)s`并`%(lineno)d`打印模块名称和行号。不幸的是，我只在行号中获取包装模块名称，因为这是对日志系统的最终调用发生的地方。

你知道如何用它的模块名称和行号来报告调用包装器的函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:59:54.917

虽然我同意使用所描述的包装器有点傻，但我自己解决了这个问题，因为当使用 lambda 包装在“附加”中具有相似、长且烦人的参数的调用时。在其他地方没有找到好的答案，我想我会分享。

（这是一个 Python 3.2.3 解决方案。同样，它特定于 lambda 包装器而不是类包装器。）

第一步：查找 Python 源代码，找到 ..Lib\logging\__init__.py，
步骤 b：找到“Logger.findCaller”方法，将其复制到某个实用程序文件中，重命名为“find_caller_no_lambda”。
下一步：从方法签名中删除“self”，为任何模块级属性添加前缀，并进行以下更改，修改为口味：

```
#       if filename == _srcfile: # Original line
        if filename == logging._srcfile or f.f_code.co_name == "<lambda>": # New line
            f = f.f_back # Original line for context.
            continue # Original line for context. 
```

最后一步：在声明记录器的任何位置，插入以下行：

```
my_logger.findCaller = util.find_caller_no_lambda 
```

瞧。

（当然，如果你愿意的话，你可以将 Logger 子类化为一个小小的改变。）

附录：

相反，您可以重写 Logger.makeRecord 以删除对附加项中的键冲突的检查，并将行号、函数名称等添加到日志调用本身/在包装器中检测此类内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:04:06.193

它在 Python Frame 对象中。[http://docs.python.org/library/inspect.html](http://docs.python.org/library/inspect.html)

# django - Django DetailView 模板显示所有字段的显示值

> ID：10027298
> 
> 赞同：9
> 
> 时间：2012-04-05T10:57:39.913
> 
> 标签：django, templates, django-admin, django-templates, detailview

我制作了一个模板来显示模型中的所有字段和值，它看起来像这样：

```
## detail_template.html ##
{% for name, value in object.get_fields %}
    <p>
        <label>{% trans name %}:</label>
        <span>{{ value|default:"Not available" }}</span>
    </p>
{% endfor %} 
```

在该类中，您可以看到声明的 get_fields 函数：

```
## models.py ##
Class Object:
    ...many fields...

    def get_fields(self):
        return [(field.verbose_name, field._get_val_from_obj(self)) for field in self.__class__._meta.fields] 
```

问题是，例如，当我有一个带有选项的 CharField 时，例如：

```
## models.py ##
GENDER_CHOICES = (
    ('M', 'Male'),
    ('F', 'Female'),
)
        ...all other fields ...
    sex =   models.CharField(verbose_name=u"Sex", max_length=1, choices=GENDER_CHOICES) 
```

它显示 M 或 F，我想要做的是加载所有字段的 get_NAMEFIELD_display 而不手动执行所有字段：

```
<p>
    <label>{% trans 'Sex' %}:</label>
    <span>{{ object.get_sex_display|default:"Not available" }}</span>
</p> 
```

我有一个线索：Django Contrib Admin 在列出对象时会这样做，所以我确信有一种通用的方法可以做到这一点，我也感谢任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2019-12-08T16:58:43.170

**Django >= 2.0**

`field._get_val_from_obj()`在 Django 2.0 使用中删除`field.value_from_object()`。

添加`get_fields()`到您的`models.py`：

```
class Object(Model):
    field1 = CharField(max_length=150)
    field2 = CharField(max_length=150)

    def get_fields(self):
        return [(field.verbose_name, field.value_from_object(self)) for field in self.__class__._meta.fields] 
```

然后将其称为`object.get_fields`您的`template.html`：

```
<table>
    {% for label, value in object.get_fields %}
        <tr>
            <td>{{ label }}</td>
            <td>{{ value }}</td>
        </tr>
    {% endfor %}
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T06:01:30.003

我认为您应该添加另一种方法：

```
def get_field_value(self, field):
    try:
        return self._get_FIELD_display(field)
    except something:
        return field._get_val_from_obj(self) 
```

并在您的生成器中使用它。

# php - php 变量相等比较的捷径

> ID：10027299
> 
> 赞同：-4
> 
> 时间：2012-04-05T10:57:43.420
> 
> 标签：php, if-statement, comparison

我在我的 php 中有一个声明：

```
<? if(isset($_GET['mod']) && ($_GET['mod'] == "category" || $_GET['mod'] == "catalog")) echo 'id="active"'; ?> 
```

我想学习如何在第二部分（在&&之后）编写这种类型的双重比较，如下所示：

```
<? if(isset($_GET['mod']) && $_GET['mod'] == ("category" || "catalog")) echo 'id="active"';?> 
```

但它不起作用。

php 中有很多漂亮的 if-one-liners，我经常在我的网站中使用它们，我想再学习一个））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:01:01.743

你可以这样做：

```
if( isset($_GET['mod']) && in_array( $_GET['mod'], array( "category", "catalog") ) 
```

正如@RepWhoringPeeHaa 建议的那样，停止使用短标签，因为某些服务器可能不支持它们。

同样如下所示，您应该尝试将 PHP 代码分离到 html 之外，如下所示：

```
<?php

    $active = '';

    $mods = array( "category", "catalog" );
    if ( isset( $_GET['mod'] ) && in_array( $_GET['mod'], $mods ) ){
       $active = 'id="active"';
    }

?>

// html
<div <?php echo $active; ?>></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T11:00:50.560

```
<?php 
if(isset($_GET['mod']) && in_array($_GET['mod'], array("category", "catalog"))) {
    echo 'id="active"';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T11:02:14.367

第一：停止使用简短的 php 标签。用途：`<?php`。因为当您使用短语法时，您依赖于要启用的某些服务器设置（这是一件坏事）。

如果你想让你的代码更好的可读性和可维护性，你可以这样做：

```
<?php

$values = array('category',
                'catalog',
               );

if(isset($_GET['mod']) && in_array($_GET['mod'], $values)) {
    echo 'id="active"';
} 
```

这样它的可读性和可维护性都更好。如果您想检查另一个值，您只需将一个项目添加到数组中，它就会继续工作。

请记住，重要的不是编写最短的代码，重要的是最好的可维护代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:01:01.230

第二种比较类型不应该工作，因为语法错误。您不能“附加”两个对象，然后将它们与 if 语句中的另一个对象进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T12:14:19.880

PHP 5.4 默认支持短标签，不管 ini 配置如何。

此外，如果这不是可能分发到其他服务器的代码，则使用短标签是安全的，但是，如果您要更改不支持短标签的服务器，您将遇到麻烦。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-05T11:08:56.940

你可以使用数组，或者如果你不想你必须这样做：

```
if(isset($_GET['mod'])  AND  (($_GET['mod'] == "category" ) OR  ($_GET['mod'] == "catalog"))) echo 'id="active"'; 
```

# c# - .Net Framework 4 Full 和 Net Framework 4 Client Profile Targeting

> ID：10027301
> 
> 赞同：6
> 
> 时间：2012-04-05T10:57:54.717
> 
> 标签：c#, .net, user-controls, .net-client-profile

我想将我的 .net 应用程序定位到 .NetFramework 4（客户端配置文件），但后来我意识到第 3 方控件使用 System.Design 来实现自定义控件。

现在我很关心用户，因为大多数人会在他们的系统上安装 .Net Framework 4 Client Profile 而不是 .Net Framework 4 Full。用户会觉得下载和安装完整框架很烦人吗？但是客户端 41mb 和完整 48mb 只有一个微小的大小差异。

大多数 .net 应用程序是否只需要客户端配置文件？还有另一种方法可以在 c# 中将 ControlDesigner 类与客户端配置文件一起使用。

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:07:08.550

您只需选择完整的 .NET 4 框架作为目标框架。试图采取任何捷径都会在你的脸上炸毁。嗯，最重要的是你的用户的脸。

这不是问题。您的安装项目需要确保正确的配置文件在用户的机器上可用。*如果她已经拥有客户端配置文件，则不*涉及48 兆字节的下载，.NET 安装程序仅下载丢失的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:24:12.327

您始终可以将 System.Design 的副本设置为 true 并将其与您的应用程序一起分发。

除此之外，他们必须安装它。除非第 3 方控制放弃依赖，否则别无他法。

# jquery - 使用 setInterval 和触发器的 jQuery 幻灯片平滑过渡

> ID：10027304
> 
> 赞同：2
> 
> 时间：2012-04-05T10:58:13.333
> 
> 标签：jquery, triggers, slideshow, transition, setinterval

我想在我的小幻灯片中有一个平滑的过渡。我试图插入一个淡入淡出（），但它不起作用。我希望有人能解决我的问题。

```
$('#pause').hide();
$('#play').click( function(){
   t = setInterval( function(){
      $('#next').trigger('click'), 2000
   }, 4000 );
}); 
```

画廊看起来像这样

```
function loadSlide(index){
    $('#gallery li').hide().eq(index).show();
}

$('#gallery').data('index',0).find('li').hide();
loadSlide(0);

$('#next, #navnext').on('click',function(e){
   var index = $('#gallery').data('index'),
      numSlides = $('#gallery li').length;
   index = (index + 1) % numSlides;   
   loadSlide(index);
   $('#gallery').data('index',index);
   e.preventDefault();            
});

$('#previous, #navprev').on('click',function(e){
   var index = $('#gallery').data('index'),
       numSlides = $('#gallery li').length;
   index = (index + numSlides - 1) % numSlides;
   loadSlide(index);
   $('#gallery').data('index',index);
   e.preventDefault();
}); 
```

HTML

```
<body>
<div id="nav_img">
    <a href="#" id="previous" style="cursor: url('../prev.png'); z-index: 800;" ><img src="trans.png"/></a> 
    <a href="#" id="next" style="cursor: url('../next.png'); z-index: 800;"><img src="trans.png"/></a> 
</div>
<div id="control" style="z-index: 998;">
        <div id="navnext"><img src="next.png"/> </div>
        <div id="navprev"><img src="prev.png"/> </div>
        <div id="play"><img src="play.png"/></div>
        <div id="pause"><img src="pause.png"/></div>
    </div>

<div id="Logo">
        <a href="index_test.html"><b>lorem</b> ipsum</a>
    </div>

    <div class="fade" id="Navigation">
        <ul id="sliding-navigation" style="list-style-type:none;">  
            <li class="sliding-element"><a href="women.html">Women</a></li>  
            <li class="sliding-element"><a href="men.html">Men</a></li>  
            <li class="sliding-element"><a href="beauty.html">Beauty</a></li>  
            <li class="sliding-element"><a href="advertising.html">Advertising</a></li>  
            <li class="sliding-element"><a href="biography.html">Biography</a></li>  
             <li class="sliding-element" id="contactbutton"><a href="#">Contact</a></li>
    </ul> 
</div>
<ul id="gallery">
       <li> <img style="margin-left:-25%;" src="images/a1.jpg" title="Title #0"/> </li>
       <li> <img src="images/a2.jpg"/> </li>
       <li> <img src="images/a3.jpg" title="Title #3"/> </li>
       <li> <img src="images/a4.jpg" title="Title #4"/> </li>
       <li> <img src="images/a5.jpg" title="Title #5"/> </li>
   </ul> 
```

​</p>

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:58:09.237

要正确地为元素添加过渡，您必须像我一样`li`将它们彼此重叠放置。`position:absolute;`

## *[演示 jsBin](http://jsbin.com/iruyat/edit#javascript,html,live)*

jQuery

```
$('#pause').hide();

var numSlides = $('#gallery li').length;
var interv;

$('#play').click( function(){
    $(this).hide();
    $('#pause').show();
    interv = setInterval( function(){
         $('#next').trigger('click'); 
    }, 2000 );
});

// you forgot this?
$('#pause').click( function(){
     $('#pause').hide();
     $('#play').show();
     clearInterval(interv);
});

function loadSlide(index){
    $('#gallery li:not(:eq('+index+'))').fadeTo(400,0); // SMOOTH TRANSITION
    $('#gallery li').eq(index).fadeTo(400,1);           // SMOOTH TRANSITION
}

$('#gallery').data('index',0).find('li').hide();
loadSlide(0);

$('#next, #navnext').on('click',function(e){
   var index = $('#gallery').data('index');    
   index = (index + 1) % numSlides;   
   loadSlide(index);
   $('#gallery').data('index',index);
   e.preventDefault();            
});

$('#previous, #navprev').on('click',function(e){
   var index = $('#gallery').data('index');
   index = (index + numSlides - 1) % numSlides;
   loadSlide(index);
   $('#gallery').data('index',index);
   e.preventDefault();
}); 
```

我添加了过渡并修复了您的代码。

# c# - Windows 服务不执行 OnStart()

> ID：10027306
> 
> 赞同：2
> 
> 时间：2012-04-05T10:58:24.433
> 
> 标签：c#, .net, windows, windows-services

我遇到了一个非常简单的 Windows 服务的问题。我已经按照[演练：在组件设计器中创建 Windows 服务应用程序中的](http://msdn.microsoft.com/en-us/library/zt39148a%28v=vs.80%29.aspx)说明创建了服务。

我有：

*   应该在 c:\mylogs 中创建一个简单文件的服务
*   一个 serviceinstaller（serviceprocessinstaller 作为 LocalSystem 运行）
*   安装服务的安装项目

我可以通过 启动和停止服务`net start/stop <servicename>`。但是，即使我在服务的构造函数中执行操作，也没有任何反应。

我以本地管理员身份安装、启动和停止服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:39:41.647

您的服务初始化代码应该放在 OnStart 事件处理程序中，而不是构造函数中。您的服务清理和关闭代码应该在 OnStop 事件中。

在启动事件中您真正应该做的就是启动一个工作线程，只要您的服务处于活动状态并进行实际处理，该工作线程就会运行。您可以使用 BackgroundWorker 组件来简化此操作。当服务停止时，您进行任何必要的清理，并终止后台线程。

OnStart 和 OnStop 事件处理程序中的代码运行时间不应超过一两秒 - Windows 服务管理器正在等待服务报告它是否已成功启动或停止，如果您的服务没有，您将看到错误t 迅速向服务控制经理提供反馈。

# javascript - SSJS 中与 textContent 类似的功能？

> ID：10027310
> 
> 赞同：-1
> 
> 时间：2012-04-05T10:58:30.870
> 
> 标签：javascript, xpages

```
<p id="test"> Hello </p> 
```

如何`Hello`在 XPages 中使用 SSJS？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T11:40:08.210

你不能以你正在思考的方式做到这一点。XPages，更具体地说是 XSP，您在其中输入上面概述的 HTML 代码实际上是在后端创建的 java 代码的 XML 表示。事实上，Hello 文本实际上被转换为 UIPassThroughText 类型的组件。要获得它，您必须获得代表 p 标记的组件，然后遍历子节点，检查子节点的类型和内容，直到找到您想要的那个。但是，这真的不是你想要做的。如果要动态获取或设置节点的内部值，则需要使用 xp:text 标签之类的东西，并在该标签中引用作用域变量或其他形式的持久数据存储来设置值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T11:41:48.553

SSJS 与 XPages 控件结合使用，如果您输出的是原始 HTML 而不是 XPages 控件，我想如果可能的话，这将非常困难。

在 SSJS 中，您可以使用以下命令查询 XPages 控件：

```
getComponent(' <controlId> '); 
```

并通过以下方式获得其价值：

```
getComponent(' <controlId> ').getValue(); 
```

我建议尝试使用 XPages 控件，例如：

```
<xp:label></xp:label>   or   <xp:inputText></inputText> 
```

有一些方法可以在客户端执行相反的含义，例如：

```
var clientVariable = #{javascript:sessionScope.variable} 
```

# iphone - 电子邮件正文中的超链接在 iphone 中不起作用

> ID：10027317
> 
> 赞同：1
> 
> 时间：2012-04-05T10:59:11.730
> 
> 标签：iphone, html, email, html-email, mfmailcomposeviewcontroller

我已经使用以下代码在电子邮件正文中显示超链接。但它只在邮件正文中显示文本。当我点击它时。没有任何反应。

```
-(IBAction)emailToFriend:(id)sender
{
    NSLog(@"E-Mail...");
    MFMailComposeViewController *controller = [[MFMailComposeViewController alloc] init];
    controller.mailComposeDelegate = self;

    [controller setSubject:@"My Subject"];

    [controller setMessageBody:@"<a href=\"http://www.google.com\">http://www.google.com</a>" isHTML:YES]; 

    [self presentModalViewController:controller animated:YES];
    [controller release];

} 
```

谁能告诉这里出了什么问题？我检查了[MFMailComposeViewController 问题：如何将可点击的 URL 链接嵌入到电子邮件正文](https://stackoverflow.com/questions/2058447/mfmailcomposeviewcontroller-how-do-i-embed-a-clickable-url-link-into-the-email.But)中，但对我没有帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T11:15:02.313

在发送链接之前，它是不可点击的。这只是纯文本。但是，发送电子邮件后，接收者将能够单击链接（电子邮件程序使其可单击）。

# wpf - ContentPresenter 和 GridViewRowPresenter 不能相互包含或独占

> ID：10027321
> 
> 赞同：1
> 
> 时间：2012-04-05T10:59:36.610
> 
> 标签：wpf

如何在下面的代码中构建控件？

```
 <StackPanel>
                <!-- Принципиальные схемы -->
                <ContentPresenter Content="{Binding principlies}" Grid.Row="4" Grid.Column="1" 
                              ContentTemplate="{StaticResource ProjectContentExpander}">
                    <ContentPresenter.Resources>
                        <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource principlies}"/>
                    </ContentPresenter.Resources>
                </ContentPresenter>
            </StackPanel> 
```

错误：在 FrameworkTemplate 中，ContentPresenter 和 GridViewRowPresenter 不能相互包含或独占。如果您删除样式块，错误就会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:30:31.307

我假设*原则*是 xaml 中定义的 DataTemplate 的 ax:Key，但不能将 DataTemplate（继承 FrameworkTemplate）设置为内容。这就是为什么你会得到这个例外。此外，ContentPresenter.Content 属性是数据绑定的*原则*，它期望来自源的 DependencyObject 或数据项。

如果我误解了你的问题，请原谅。提供更多的 xaml 肯定会带来一些启示。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:10:23.100

```
 <StackPanel>
                <Border>
                    <ContentPresenter Content="{Binding principlies}" 
                                  ContentTemplate="{StaticResource ProjectContentExpander}">
                        <ContentPresenter.Resources>
                            <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource principlies}"/>
                        </ContentPresenter.Resources>
                    </ContentPresenter>
                 </Border> 
          </StackPanel> 
```

解决问题

# unit-testing - 你如何模拟一个内置类型的子类（例如TextBox）？

> ID：10027325
> 
> 赞同：0
> 
> 时间：2012-04-05T11:00:07.367
> 
> 标签：unit-testing, inheritance, mocking, polymorphism, nsubstitute

我们正在使用 NSubstitute，所以我认为我们需要一个单独的接口来模拟。我们还有引用超类并使用多态性的代码。

我的想法..

使用我添加的方法和现有方法（例如 Value 和 Text）创建一个接口，并更改现有代码中的引用以使用该接口而不是直接使用超类？

包装 TextBox 而不是子类化它（不确定 - 这是适配器/代理模式）。

**更新（细化）：**

我们创建了一个 ValueTextBox 类，它是 TextBox 的子类并添加了一个 Value 属性：

```
public class ValueTextBox : TextBox
{
    /* ... */

    public ValueTextBox(/* ... */)
    {
        /* ... */
    }

    public string Value
    {
        get
        {
            /* ... */
        }
        set 
        {
            /* ... */
        }
    }
} 
```

我们想要断言其他代码在预期的时间调用 get/set Text/Value。

笔记：

1.  我们还有另一个类 IntegerTextBox，类似于 ValueTextBox。
2.  我们的其他代码有时利用多态性将 ValueTextBox/IntegerTextBox 对象存储在 TextBox 类型的变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:21:39.417

一般的建议是不要模拟你不拥有的东西。（由于您没有编写/控制 TextBox 类，因此您不应该模拟它。）

但你的情况就是你的情况。所以，如果你能详细说明你为什么需要这个？我们可以找出替代方案。

更新：似乎您正在将所有控件降低到一个通用级别 - 一个名为 ValueProvider 的角色（接口）。在这种情况下，您可以编写一个通用测试夹具，它接受一个实现（作为输入）并验证 ValueProvider.Value 属性是否按预期工作。传入 ValueProvider 的不同实现。您是否有理由要模拟基本类型？您可以创建自定义派生的实例并调用 Value 属性以查看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-17T10:27:46.380

基于您自己创建界面的想法，以及[Gishu](https://stackoverflow.com/a/10028508/3419534)对 ValueProvider 的回答，创建您的界面，如下所示：

```
interface IValueProvider
{
    string Value {get; set; }
} 
```

然后`ValueTextBox`像这样：

```
public class ValueTextBox : TextBox, IValueProvider
{
    public string Value
    {
        get { /* ... */ }
        set { /* ... */ }
    }
} 
```

然后你可以模拟一个`IValueProvider`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T00:04:34.120

如果您可以在您尝试测试的代码上添加更多信息，那就太好了。根据您所写的内容，我可以猜到几个选项。

目前侵入性最小的可能是您在问题中建议的方法：为您想要伪造的成员添加一个接口或公共基类/适配器，`virtual`以便可以通过模拟使用动态代理的库（如 NSubstitute 、起订量、FakeItEasy 和 Rhino 模拟）。

如果您有类似的东西`IInputControl<T>`，`T Value { get; set;}`那么您可以在测试中替换该类型。您必须更新代码以将引用存储为`IInputControl<T>`而不是`TextBox`，但这可能不是一件坏事，因为它将代码与`TextBox`.

另一种选择（不确定您是否已经这样做了）是使用 Model-View-Presenter 样式，并且不要对视图如何将消息转换为`TextBox`其他控件的细节进行单元测试。（您可以使用验收测试进行端到端测试。）

例如，假设您有一个演示者和视图界面，​​如下所示：

```
public class PersonPresenter {
  public PersonPresenter(IPersonView view, IPersonQuery query) { ... }

  public void Load() {
    var person = query.Execute();
    view.Name = person.Name;
    view.Age = person.Age;
  }
}

public interface IPersonView {
  string Name { get; set; }
  int Age { get; set; }
} 
```

你可以用这样的东西进行测试：

```
[Test]
public void ShouldDisplayPersonOnLoad() {
  var view = Substitute.For<IPersonView>();
  var query = Substitute.For<IPersonQuery>();
  query.Execute().Returns(new Person("A", 20));

  var subject = new PersonPresenter(view, query);
  subject.Load();

  Assert.That(view.Name, "A");
  Assert.That(view.Age, 20);
} 
```

然后，您的实际视图可以委托给现有控件。这未经单元测试测试，但可能是可验收测试的，或者在视图更改时手动测试。理想情况下，这段代码应该足够简单，不会隐藏太多错误；这个想法是使视图尽可能简单，并且主要关注信息的外观，而不是逻辑。

```
public PersonView : IPersonView {
  // ...
  public string Name { 
    get { return nameTextBox.Value; } 
    set { nameTextBox.Value = value; }
  }
  public int Age { 
    get { return ageIntTextBox.Value; } 
    set { ageIntTextBox.Value = value; }
  }
} 
```

# c# - 如何解决 Autofac InstancePerHttpRequest

> ID：10027330
> 
> 赞同：14
> 
> 时间：2012-04-05T11:00:49.877
> 
> 标签：c#, asp.net-mvc-3, dependency-injection, autofac

我在 Global.asax.cs 中注册了这样的组件：

```
ContainerBuilder builder = new ContainerBuilder();
builder.RegisterControllers(Assembly.GetExecutingAssembly());

builder.RegisterType<WebWorkContext>().As<IWorkContext>().InstancePerHttpRequest();

IContainer container = builder.Build();
DependencyResolver.SetResolver(new AutofacDependencyResolver(container));

// This is where my error happens, not sure why?
var workContext = container.Resolve<IWorkContext>(); 
```

`WebWorkContext`班级：

```
public class WebWorkContext : IWorkContext
{
     // Left out other code
} 
```

`IWorkContext`界面：

```
public interface IWorkContext
{
     // Left out other code
} 
```

我得到的错误是：

> 从请求实例的范围中看不到具有与“httpRequest”匹配的标记的范围。这通常表明注册为 per-HTTP 请求的组件正在被 SingleInstance() 组件（或类似场景）请求。在 Web 集成下，始终从 DependencyResolver.Current 或 ILifetimeScopeProvider.RequestLifetime 请求依赖项，而不是从容器本身.

我怎样才能让它工作？我之所以想要这种方式是因为工作上下文处理诸如获取当前客户之类的事情。

还有一些问题。一次注册是否明智/最佳做法？我需要在另一个阶段添加更多组件的情况吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-06T04:12:40.580

标记为`InstancePerHttpRequest`的注册预计会从每个 HTTP 请求期间创建和处置的特定嵌套生命周期范围内解析。

如果您将`IWorkContext`作为构造函数参数添加到其中一个控制器，您会发现注入了一个实例。在您的代码中，您试图从根生命周期范围而不是嵌套的“每个请求”生命周期范围解析您的服务。

如果您想在不运行应用程序的情况下测试解析服务，您需要创建一个生命周期范围，其标签与在 HTTP 请求期间创建的标签相同。在 MVC 3 集成中，生命周期范围被标记为“httpRequest”。

```
using (var httpRequestScope = container.BeginLifetimeScope("httpRequest"))
{
    Assert.That(httpRequestScope.Resolve<IWorkContext>(), Is.Not.Null);
} 
```

我想我会更新 MVC 集成以通过 API 公开“httpRequest”标签名称，这样字符串值就不需要硬编码。也可以将您自己的`ILifetimeScopeProvider`实现传递给 ，`AutofacDependencyResolver`以便您可以控制在 ASP.NET 运行时之外的生命周期范围的创建。当没有可用的 HTTP 请求时，这在单元测试中很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T01:43:51.107

我在 WebForms 中这样做：

```
this.RoutingService = ((Global)HttpContext.Current.ApplicationInstance).ContainerProvider.RequestLifetime.Resolve<RoutingService>(); 
```

# xcode - XCode 从不同的类传递 NSMutableArray

> ID：10027336
> 
> 赞同：1
> 
> 时间：2012-04-05T11:01:03.193
> 
> 标签：xcode, arrays

我有2节课。A 和 B。在 ClassA 中，我有一个检索 JSON 数据并添加到数组中的方法。我想从 ClassB 访问这个数组。我怎样才能实现它？

```
ClassA.h
- (void)viewDidLoad
{
//initialise arrayPlaces and arrayWeather
[super viewDidLoad];

dispatch_async(queue, ^{
NSData* data = [NSData dataWithContentsOfURL: 
                    serverURL];
                    [self performSelectorOnMainThread:@selector(fetchedData:) 
                    withObject:data waitUntilDone:YES];
});
}

- (void)fetchedData:(NSData *)responseData {

//parse out the json data
NSError *error;
NSMutableArray *tempArray = [[NSMutableArray alloc] init];
tempArray = [NSJSONSerialization 
             JSONObjectWithData:responseData //1
             options:kNilOptions 
             error:&error];

//declare arrayPlaces
arrayToPass = [[NSMutableArray alloc] init];

//...codes to add array here using a loop...
[arrayToPass addObject:tempString];
} 
```

在 ClassB 中，我有一个 tableView，我想从 ClassA 中获取所有数组。我怎样才能做到这一点？

```
ClassA *cA = [[ClassA alloc]init];
ClassA.view;
arrayReceived = ClassA.arrayToPass; 
```

在 ClassB 中实施时，上述内容似乎不起作用。

```
ClassB *cB = [[ClassB alloc] init];
[cB setArrayReceived:arrayToPass]; 
```

在这部分代码之后在 ClassA 中实现时，这也不起作用。"//...使用循环在此处添加数组的代码... [arrayToPass addObject:tempString];

请帮忙！！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T00:15:08.027

您的代码不起作用的原因是因为`fetchData:`它是异步完成的，并且在代码运行`arrayToPass`时仍未填充。`arrayReceived = ClassA.arrayToPass;`

所以我们必须让我们`ClassB`知道这一点。首先在and`ClassADelegate`之间声明一个协议，然后声明一个像这样的类型的属性怎么样：`ClassA``ClassB``ClassA``ClassADelegate`

```
in ClassA.h
@protocol ClassADelegate ;//Forward declaration of the protocol
@interface ClassA {...
}
@property (nonatomic, assign) id <ClassADelegate> delegate;
@end

@protocol ClassADelegate <NSObject> 
-(void) classADidReceiveData:(NSArray *)array;
@end 
```

然后做`ClassB`这个的代表

```
@interface ClassB : <ClassADelegate> { ... 
```

当然`classADidReceiveData:`在 ClassB 中实现该方法：

```
-(void)classADidReceiveData:(NSArray*) array{
 arrayReceived = array;
} 
```

然后修改`fetchData:`如下：

```
- (void)fetchedData:(NSData *)responseData {

...
//...codes to add array here using a loop...
[arrayToPass addObject:tempString];

 //Call the delegate method if a delegate has been set
if(delegate){
     [delegate classADidReceiveData:arrayToPass]
}
} 
```

这样当`ClassA`收到数据时，它可以`ClassB`注意到这一点。

总体用法是：

```
ClassA *cA = [[ClassA alloc]init];
cA.delegate = self;
cA.view; 
```

如果你在取数据后有什么事情要做`ClassB`，那就`classADidReceiveData`在`ClassB`.

```
-(void)classADidReceiveData:(NSArray *)array{
 arrayReceived = array;
 //Do whatever you want after receiving array
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:07:42.877

将 A 类的数组设为 A 类的数组，`property`然后您可以在 B 类中轻松访问它。

```
in Class A.h

@property (strong, nonatomic) NSMutableArray *tempArray;

in Class A.m

@synthesize tempArray; 
```

然后在B类中获取A类的实例，您可以访问`tempArray`为`class_a_object.tempArray`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:21:47.990

在应用委托中取一个数组。声明属性并在应用委托中合成。然后当你在A类中时，就这样做

将这段代码写在 A 类中

```
Appdelegate *app = (AppDelegate *) [[UIApplication sharedApplication] delegate];
app.somearray = self.yourarray; 
```

在 B 类中，您可以这样做。

```
Appdelegate *app =(AppDelegate *) [[UIApplication sharedApplication] delegate];
NSLog(@"arr is %@",app.somearray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:08:09.203

首先，您必须将类 A 中的数组声明为成员变量。并且 A 类需要一个返回它的方法（如果它是 @property，可以使用 @synthesize）。

现在，你有选择。B 类可以有一个 A 实例作为成员：然后它只向 A 询问数组（指针）。类 B 可以由将数组传递给 A 和 B 的人实例化。或者 A 中需要访问 B 数组的方法可以由具有 B 作为成员并因此可以访问 B 数组的人调用。

可能还有更多选择。

# c# - 将 Xml 转换为 String.New Line 每个标签？

> ID：10027339
> 
> 赞同：1
> 
> 时间：2012-04-05T11:01:08.803
> 
> 标签：c#, xmldocument

我正在`XmlDocument`通过代码创建并添加一些标签。结构是这样的

```
<root>
 <test>
  <test1>a</test1>
 </test>
 <test>
 </test>
  <test>
  <test1b</test1>
 </test>
</root> 
```

我使用此代码将 xml 转换为字符串

```
using ( var stringWriter = new StringWriter() )
using ( var xmlTextWriter = XmlWriter.Create( stringWriter ) )
    {
        xmlDoc.WriteTo( xmlTextWriter );
        xmlTextWriter.Flush( );
        return stringWriter.GetStringBuilder( ).ToString( );
    } 
```

但是当我检查生成的字符串时，所有标签都在同一行。有没有办法告诉它每行只导出一个标签

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:02:45.817

```
XmlTextWriter xmlTextWriter = new XmlTextWriter("file.xml",null);    
xmlTextWriter.Formatting = Formatting.Indented; 
```

# c# - 没有写入文件的权限

> ID：10027340
> 
> 赞同：-2
> 
> 时间：2012-04-05T11:01:10.480
> 
> 标签：c#

我知道有很多与这个问题相关的答案，但我还没有找到解决方案。

这是一个 WPF 应用程序，它从我的桌面运行，我是这台计算机的唯一用户。

我试过保存到桌面、TEMP、C:、`Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)`

但是我尝试过的目录都没有工作，所以我有点迷茫/困惑。

```
FileStream file = new FileStream("C:\\Users\\<username>\\AppData\\Local\\Temp",FileMode.OpenOrCreate, 
                  FileAccess.Write, 
                  FileShare.ReadWrite);

StreamWriter sr = new StreamWriter(file);
sr.WriteLine(data);

sr.Close(); 
```

编辑：

代码错误，对不起，我现在想通了：

```
StreamWriter sr = new StreamWriter("C:\\Users\\Mike\\AppData\\Local\\Temp\\test.txt");
sr.WriteLine(data);
sr.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:07:41.263

如果您需要在用户 PC 上为您的应用程序保存一些文件，最好的选择是在 AppData 文件夹中执行此操作。这是所有程序都应该编写它们的临时文件的地方（不管不是每个人都使用它）你可以通过在开始菜单运行行中输入 %appdata% 来访问它，如下所示：

```
Environment.SpecialFolder.ApplicationData 
```

在您的 C# 应用程序中。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:08:58.127

您的本地文件夹很可能包含名为“TEMP”的文件夹。这将因您的新 FileStream 而失败。此外，您应该为“用户名”设置一个真实的用户名，但这可能只是从其他地方复制的文本。

但是尝试以这种方式

```
string destPath = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
string destFile = Path.Combine(destPath, "myTempFile.txt");
FileStream file = new FileStream(destFile,FileMode.OpenOrCreate,FileAccess.Write, FileShare.ReadWrite); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:18:16.890

**像这样写你的文件**

```
//this is what you want to write
    string whatiWantToWrite = "Hello, i am a noob!";
       //This is how you write your file 
                    System.IO.StreamWriter file = new System.IO.StreamWriter(@"C:\\path\\to\\Desktop\\myfile.txt");
                    file.WriteLine(whatiWantToWrite);
                    file.Close(); 
```

# c# - C# 以 % 为单位获取已用内存

> ID：10027341
> 
> 赞同：47
> 
> 时间：2012-04-05T11:01:34.107
> 
> 标签：c#, performancecounter

我创建了一个性能计数器，可以检查总内存使用率（以 % 为单位），但问题是它给我的值与任务管理器中显示的值不同。例如：我的程序说 34%，但任务管理器说 40%。

有任何想法吗？

**注意**
我尝试获取系统的可用 RAM，而不是进程使用的 RAM。

**当前代码**

```
private PerformanceCounter performanceCounterRAM = new PerformanceCounter();

performanceCounterRAM.CounterName = "% Committed Bytes In Use";
performanceCounterRAM.CategoryName = "Memory";

progressBarRAM.Value = (int)(performanceCounterRAM.NextValue());
            labelRAM.Text = "RAM: " + progressBarRAM.Value.ToString(CultureInfo.InvariantCulture) + "%"; 
```

**编辑**
我用计时器每秒刷新进度条和标签。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-04-05T12:06:21.850

您可以使用 GetPerformanceInfo windows API，它显示的值与 Windows 7 上的 Windows 任务管理器完全相同，这是获取可用物理内存的控制台应用程序，您可以轻松获取 GetPerformanceInfo 返回的其他信息，请参阅 MSDN [PERFORMANCE_INFORMATION](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684824%28v=vs.85%29.aspx)结构文档以了解如何要以 MiB 为单位计算值，基本上所有 SIZE_T 值都以页面为单位，因此您必须将其与 PageSize 相乘。

更新：我更新了这段代码以显示百分比，它不是最佳的，因为它调用了两次 GetPerformanceInfo，但我希望你明白这一点。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace ConsoleApplicationPlayground
{
  class Program
  {
    static void Main(string[] args)
    {
      while (true)
      {
        Int64 phav = PerformanceInfo.GetPhysicalAvailableMemoryInMiB();
        Int64 tot = PerformanceInfo.GetTotalMemoryInMiB();
        decimal percentFree = ((decimal)phav / (decimal)tot) * 100;
        decimal percentOccupied = 100 - percentFree;
        Console.WriteLine("Available Physical Memory (MiB) " + phav.ToString());
        Console.WriteLine("Total Memory (MiB) " + tot.ToString());
        Console.WriteLine("Free (%) " + percentFree.ToString());
        Console.WriteLine("Occupied (%) " + percentOccupied.ToString());
        Console.ReadLine();
      }
    }
  }

  public static class PerformanceInfo
  {
    [DllImport("psapi.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool GetPerformanceInfo([Out] out PerformanceInformation PerformanceInformation, [In] int Size);

    [StructLayout(LayoutKind.Sequential)]
    public struct PerformanceInformation
    {
      public int Size;
      public IntPtr CommitTotal;
      public IntPtr CommitLimit;
      public IntPtr CommitPeak;
      public IntPtr PhysicalTotal;
      public IntPtr PhysicalAvailable;
      public IntPtr SystemCache;
      public IntPtr KernelTotal;
      public IntPtr KernelPaged;
      public IntPtr KernelNonPaged;
      public IntPtr PageSize;
      public int HandlesCount;
      public int ProcessCount;
      public int ThreadCount;
    }

    public static Int64 GetPhysicalAvailableMemoryInMiB()
    {
        PerformanceInformation pi = new PerformanceInformation();
        if (GetPerformanceInfo(out pi, Marshal.SizeOf(pi)))
        {
          return Convert.ToInt64((pi.PhysicalAvailable.ToInt64() * pi.PageSize.ToInt64() / 1048576));
        }
        else
        {
          return -1;
        }

    }

    public static Int64 GetTotalMemoryInMiB()
    {
      PerformanceInformation pi = new PerformanceInformation();
      if (GetPerformanceInfo(out pi, Marshal.SizeOf(pi)))
      {
        return Convert.ToInt64((pi.PhysicalTotal.ToInt64() * pi.PageSize.ToInt64() / 1048576));
      }
      else
      {
        return -1;
      }

    }
  }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-07-15T15:39:21.480

性能计数器不是一个好主意。使用此代码从任务管理器获取内存使用百分比

```
var wmiObject = new ManagementObjectSearcher("select * from Win32_OperatingSystem");

var memoryValues = wmiObject.Get().Cast<ManagementObject>().Select(mo => new {
    FreePhysicalMemory = Double.Parse(mo["FreePhysicalMemory"].ToString()),
    TotalVisibleMemorySize = Double.Parse(mo["TotalVisibleMemorySize"].ToString())
}).FirstOrDefault();

if (memoryValues != null) {
    var percent = ((memoryValues.TotalVisibleMemorySize - memoryValues.FreePhysicalMemory) / memoryValues.TotalVisibleMemorySize) * 100;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-05T11:56:47.567

我认为任务管理器报告的物理内存百分比实际上与`% Committed Bytes In Use`您的 PerformanceCounter 正在使用的指标不同。

在我的机器上，在性能监视器中查看时，这些值之间有 20% 的明显差异：

![在此处输入图像描述](../Images/787e9b32860abcb4da401031a35cfadc.png)

[本文](http://blogs.technet.com/b/askperf/archive/2008/01/25/an-overview-of-troubleshooting-memory-issues.aspx)指出 % Committed Bytes 指标考虑了页面文件的大小，而不仅仅是机器的物理内存。这可以解释为什么这个值总是低于任务管理器的值。

使用该指标计算百分比可能会更好`Memory \ Available Bytes`，但我不确定如何从 PerformanceCounter 获取物理内存总量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-04T22:27:36.813

您可以使用性能监视器底部的“显示说明”。[去引用](http://blogs.technet.com/b/askperf/archive/2008/01/25/an-overview-of-troubleshooting-memory-issues.aspx)

> % Committed Bytes In Use 是 Memory\Committed Bytes 与 Memory\Commit Limit 的比率。已提交内存是正在使用的物理内存，如果需要将其写入磁盘，则已在页面文件中为其保留空间。提交限制由页面文件的大小决定。如果页面文件被放大，则提交限制增加，比例降低）。此计数器仅显示当前百分比值；这不是一个平均值。

Soo 是的，PM 使用分页文件，而 TM 使用实际 RAM。

# asp.net-mvc-3 - 在保存工作单元模式以通过先前添加的实体计算字段之前如何从上下文中获取实体？

> ID：10027344
> 
> 赞同：0
> 
> 时间：2012-04-05T11:01:50.017
> 
> 标签：asp.net-mvc-3, entity-framework-4, unit-of-work, dbcontext

我是 stackoverflow 的新用户，这是我的第一个问题，希望我不会违反任何规则:)...

在我的带有 EF4 和 UnitOfWork 模式的 MVC3 项目中，

添加新实体时，我必须检查新添加的实体和已存储在数据库中的实体并计算新实体中的列。

问题是如果我从数据库中获取新添加的实体的值将不会被考虑在内。

我通过在每个实体插入后保存工作单元来克服这个问题。但这意味着每次插入特定实体时都会保存上下文的当前状态。

我想知道这是否会在未来带来一些性能问题。如果是这样，还有其他方法可以解决问题吗？

这是有关该问题的相关代码（简化）

模型 ：

```
public class Group
    {
        public Guid GroupId { get; set; }
        public int Code { get; set; }

    } 
```

控制器 ：

```
 UserGroup Group1 = new Group()
        {
            UserGroupId = Guid.NewGuid(),
            Code = (int)Math.Pow(2, (unitOfWork.GroupRepository.Get().Count()));
        };
        unitOfWork.GroupRepository.Insert(Group1);

        UserGroup Group2 = new Group()
        {
            UserGroupId = Guid.NewGuid(),
            Code = (int)Math.Pow(2, (unitOfWork.GroupRepository.Get().Count()));
        };
        unitOfWork.GroupRepository.Insert(Group2); 
```

插入方法：（源自通用存储库不发送所有存储库模式）

```
 public virtual void Insert(Group grouptoadd)
    {
        UnitOfWork unitOfWork = new UnitOfWork(Context);
        dbSet.Add(grouptoadd);
        unitOfWork.Save();
    } 
```

如果我不将 UnitOfWork 保存在 GroupRepository 类的 Insert 方法中，那么在计算 Group2 的代码时，它不会考虑 Group1。

将 unitOfWork 保存在 insert 方法中似乎不正确。试图从上下文中获取值

```
(int)Math.Pow(2, (Context.Groups.Count())); 
```

此代码始终返回 1。我可以在调试模式下看到 Context 中的实体，但 Count 返回 0。

最后我需要：（新添加的实体+存储在数据库中的实体）.Count()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:35:32.627

您可能想要使用 DbSet 的`Local`属性。请参阅文章[为什么在使用实体框架时看不到属性 Local？](https://stackoverflow.com/questions/9075887/why-can-i-not-see-the-property-local-when-using-entity-framework)如果你不使用 DbSets。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:23:14.513

您需要使用不同的上下文。尝试初始化一个不同的上下文会起作用。

# jsf-2 - p:editor 未显示在 p:fieldset 中

> ID：10027348
> 
> 赞同：1
> 
> 时间：2012-04-05T11:02:01.697
> 
> 标签：jsf-2, primefaces

我在 ap:fieldset 中有 ap:editor。它没有显示。字段集设置为折叠。当我在字段集之外设置 p:editor 时，它会显示出来。当我将fieldset 设置为collapsed=false 时，编辑器也会显示。当字段集设置为collapsed = true时，我该怎么做才能显示编辑器。

```
<p:fieldset id="emailPanel" toggleable="true" collapsed="true" >
    <p:editor id="message" value="#{mybean.message}" widgetVar="editor" width="500" height="200"/> 
```

我查看了[http://code.google.com/p/primefaces/issues/detail?id=2601](http://code.google.com/p/primefaces/issues/detail?id=2601)但字段集上没有 onShow 东西。

我正在使用 primefaces 3.2

# google-maps-api-3 - 将 Kml 图层添加到谷歌地图

> ID：10027350
> 
> 赞同：7
> 
> 时间：2012-04-05T11:02:13.657
> 
> 标签：google-maps-api-3, kml

我正在尝试将几个 KML 图层添加到地图中。这是我的代码：

```
 var myKmlOptions = {
        preserveViewport: true,
        suppressInfoWindows: true
    }

    var kmlLayer_1 = new google.maps.KmlLayer("Layers/layer1.kml", myKmlOptions);
    var kmlLayer_2 = new google.maps.KmlLayer("Layers/layer2.kml", myKmlOptions);
    kmlLayer_1.setMap(map);
    kmlLayer_2.setMap(map); 
```

某些东西肯定有效，因为如果我将 preserveViewport 更改为 false，地图会放大到更接近 KML 图层定义的区域。

但是什么都没有出现，它自己的层丢失了：/

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T14:43:34.420

最终解决了问题。问题是这一切都是在开发服务器上完成的，我了解到谷歌要访问他们需要在实时站点上的 KML 文件！

在我仍在进行开发时，暂时将它们放在另一个实时站点上以供参考。

感谢帮助 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T16:37:16.143

您的图层是否显示在[http://maps.google.com?q=http://your.site/your.kml](http://maps.google.com?q=http://your.site/your.kml)？

如果没有，您的 KML 可能有问题。例如，也许所有功能都设置为关闭可见性。指向您的 KML 的链接将有助于故障排除。

# asp.net-mvc - NerdDinner MVC 和 Html.Encode

> ID：10027352
> 
> 赞同：0
> 
> 时间：2012-04-05T11:02:18.613
> 
> 标签：asp.net-mvc, model-view-controller, nerddinner

在`DinnerController`我得到了一个数据。![在此处输入图像描述](../Images/c1e2beab953bdb2312d7ecdb73956178.png)

```
 public ActionResult Details(int id)
 {

            Dinner dinner = dinnerRepository.GetDinner(id);

            if (dinner == null)
                return View("NotFound");
            else
                return View("Details", dinner);
  } 
```

我像这样`details.aspx`绑定它。

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <h2>
        Details</h2>
    <fieldset>
        <legend>Fields</legend>
        <p>
            DinnerID:
            <%= Html.Encode(Model.DinnerID) %>
        </p>
        </fieldset>
</asp:Content> 
```

但我有一个错误。

`Compiler Error Message: CS1061: 'object' does not contain a definition for 'DinnerID' and no extension method 'DinnerID' accepting a first argument of type 'object' could be found (are you missing a using directive or an assembly reference?)`.

我刚开始学习`mvc`并且无法理解问题。我可能遗漏了什么。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:27:34.027

你做错了几件事：
1）它被称为MVC，意思是模型视图控制器（你的晚餐实体通过你的控制器传递给你的视图）
你想要做的是一个新的视图。它将在项目的视图部分中创建。

我认为这段代码可能会告诉你你需要什么：

```
@model HelloMvc.Models.Dinner  //passing the value of dinner is done here . from now on you will refer to the dinner object with Model
<table>
       <tr>
         <td>
           Description
         </td>
         <td>
            @Html.Display(Model.Description) //google other @Html diplay modes ( Label Textbox, etc)
         </td>
       </tr>
</table> 
```

MVC 一开始可能很难，特别是如果您开发了 Asp.Net 思维；首先要有耐心并了解基本概念，您会喜欢它。
这是一个链接，可以帮助您了解整个过程。
[http://geekswithblogs.net/dotNETvinz/archive/2011/06/03/asp.net-mvc-3-creating-a-simple-sign-up-form.aspx](http://geekswithblogs.net/dotNETvinz/archive/2011/06/03/asp.net-mvc-3-creating-a-simple-sign-up-form.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T05:36:25.360

`Create a strongly-typed view`创建视图时我忘记选中复选框显示我收到此错误。我通过添加页面解决了这个`<HelloMvc.Models.Dinner>`问题`details.aspx`。意味着当我收到这样的错误代码时。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage" %> 
```

解决问题后代码变成：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<HelloMvc.Models.Dinner>" %> 
```

感谢您的回复。我发布此答案以供将来参考。

# windows-phone-7 - WP7中的滚动条

> ID：10027355
> 
> 赞同：0
> 
> 时间：2012-04-05T11:02:28.183
> 
> 标签：windows-phone-7, scroll

我找不到在 WP7 中滚动的方法。我在模拟器屏幕之外有更多块，但我无法滚动它。有任何想法吗？我是视觉新手，只是想学习，所以请解释我应该在哪里复制代码:)

```
 x:Class="Fitness_excercises.MainPage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
        xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" FontFamily="{StaticResource PhoneFontFamilyNormal}"
        FontSize="{StaticResource PhoneFontSizeNormal}"
        Foreground="{StaticResource PhoneForegroundBrush}"
        SupportedOrientations="Portrait" Orientation="Portrait"
        shell:SystemTray.IsVisible="True" d:DesignHeight="768" d:DesignWidth="480">

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent" Height="976" Width="480">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="904*" />
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="Fitness excercises" Style="{StaticResource PhoneTextNormalStyle}"/>
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Margin="12,52,12,-3" Grid.RowSpan="2">
        <Button Content="Weider's six" Height="72" HorizontalAlignment="Center" Margin="-12,52,46,0" Name="button1" VerticalAlignment="Top" Width="422" />
        <Button Content="Waist Slimming Exercises" Height="72" HorizontalAlignment="Left" Margin="-12,104,0,0" Name="button2" VerticalAlignment="Top" Width="422" />
        <Button Content="Leg excercises" Height="72" HorizontalAlignment="Left" Margin="-12,157,0,0" Name="button3" VerticalAlignment="Top" Width="422" />
        <Button Content="Buttocks excercises" Height="72" HorizontalAlignment="Left" Margin="-12,209,0,0" Name="button4" VerticalAlignment="Top" Width="422" />
        <Button Content="Hand and wrist excercises" Height="72" HorizontalAlignment="Left" Margin="-12,262,0,0" Name="button5" VerticalAlignment="Top" Width="422" />
        <Button Content="Warm-up" Height="72" HorizontalAlignment="Left" Margin="-12,0,0,0" Name="button6" VerticalAlignment="Top" Width="422" />
        <Button Content="100 push-ups" Height="72" HorizontalAlignment="Left" Margin="-13,576,0,0" Name="button7" VerticalAlignment="Top" Width="422" />
        <Button Content="300 crunches" Height="72" HorizontalAlignment="Left" Margin="-12,367,0,0" Name="button8" VerticalAlignment="Top" Width="422" />
        <Button Content="Aerobic training" Height="72" HorizontalAlignment="Left" Margin="-12,418,0,0" Name="button9" VerticalAlignment="Top" Width="422" />
        <Button Content="50 pull-ups" Height="72" HorizontalAlignment="Left" Margin="-12,469,0,0" Name="button10" VerticalAlignment="Top" Width="422" />
        <Button Content="300 squats" Height="72" HorizontalAlignment="Left" Margin="-12,524,0,0" Name="button11" VerticalAlignment="Top" Width="422" />
        <Button Content="Chest excercises" Height="72" HorizontalAlignment="Left" Margin="-12,313,0,0" Name="button13" VerticalAlignment="Top" Width="422" />
        <Button Content="Diet atlas" Height="82" HorizontalAlignment="Left" Margin="-13,629,0,0" Name="button12" VerticalAlignment="Top" Width="422" />
        <Button Content="Button" Height="82" HorizontalAlignment="Left" Margin="-13,693,0,0" Name="button14" VerticalAlignment="Top" Width="422" />
        <ScrollViewer Height="716" HorizontalAlignment="Left" Margin="456,0,0,0" Name="ScrollViewer1" VerticalAlignment="Top" Width="0" />

    </Grid>
</Grid>

<!--Sample code showing usage of ApplicationBar-->
<!--<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1"/>
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2"/>
        <shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
            <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
        </shell:ApplicationBar.MenuItems>
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar>--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T19:10:58.630

您希望滚动界面的哪个部分？无论是哪一部分，都应该用`<ScrollViewer>`.

例如，如果您想让 ContentPanel Grid 滚动，您可以执行以下操作：

```
 <ScrollViewer 
    <Grid x:Name="ContentPanel" Margin="12,52,12,-3" Grid.RowSpan="2">
    ....
    </Grid> 
 </ScrollViewer> 
```

# iphone - 具有多对关系的复杂谓词无法正常工作

> ID：10027357
> 
> 赞同：0
> 
> 时间：2012-04-05T11:02:35.270
> 
> 标签：iphone, ios, xcode, core-data, nspredicate

我有一个应用程序，我可以在其中搜索房间进行预订。

在我的第一个视图中，我可以选择一个城市和街道。在第二个视图中，我可以选择一些属性（如 wlan、tv...）

第三个视图是可供选择的房间。

当我不选择属性时，它应该向我显示可用于所选街道/城市的所有房间。

到目前为止，这是我的谓词：

```
 NSPredicate *predicate =
[NSPredicate predicateWithFormat:
 @"((raumattribute.schalter CONTAINS YES) AND\
 (strasse.checks CONTAINS YES OR strasse.standort.ortcheck CONTAINS YES)) \
 OR\
 ((raumattribute.schalter CONTAINS NO) AND\
 (strasse.checks CONTAINS YES OR strasse.standort.ortcheck CONTAINS YES))"]; 
```

问题是，我不能再用属性过滤房间了。当我选择城市并进入房间时，我可以看到城市中的所有房间。但是，一旦我选择了一个属性，它就不会过滤房间，而是显示所选城市中的所有房间。

当我这样写我的谓词时：

```
 NSPredicate *predicate =

[NSPredicate predicateWithFormat:
 @"((raumattribute.schalter CONTAINS YES) AND\
 (strasse.checks CONTAINS YES OR strasse.standort.ortcheck CONTAINS YES)) 
```

我可以用街道和属性过滤房间。.但是当没有选择属性时，我在所选街道上看不到任何房间。

这是我更新的架构的屏幕截图：[屏幕截图](http://i41.tinypic.com/2z7qw3s.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:28:44.380

您将核心数据框架（对象图）误认为是 SQL 数据库替代品。这可能会*令人作呕*，所以我们不要进入哲学讨论。

**从问题描述**中执行此操作的正确方法是按街道过滤房间，然后**遍历**结果以排除那些没有选中属性的房间。结果数组可能是`datasource`您的结果表。

但是，从您的**代码示例**以及我观察到的德语实体和属性名称来看，您似乎应该考虑修改您的数据结构。如果您编辑您的问题并发布您的数据模型方案，我可以给您进一步的评论。

# java - 需要在 BoneCP 上进行确认

> ID：10027361
> 
> 赞同：0
> 
> 时间：2012-04-05T11:02:50.510
> 
> 标签：java, connection-pooling

我开始给你骨cp。到目前为止，以下是我在 centos 6 上所做的事情 以下是我将文件放在我的 centos 6 上的方式。

```
/usr/java/jdk1.7.0_03/jre/lib/ext/bonecp-0.7.1.RELEASE.jar
/usr/java/jdk1.7.0_03/jre/lib/ext/guava-11.0.2.jar
/usr/java/jdk1.7.0_03/jre/lib/ext/slf4j-1.6.4 (the whole folder I just put here). 
```

以下是我现在得到的错误。

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
        at com.jolbox.bonecp.BoneCPConfig.<clinit>(BoneCPConfig.java:60)
        at commServer.<init>(cServer.java:6594)
        at commServer.main(cServer.java:6579)
Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:08:18.580

It appears that you don't have the `SLF4J` library associated with your project. `BoneCP` needs 2 extra libraries and `SLF4J` is one of them. You can find the required libraries [here.](http://jolbox.com/index.html?page=http://jolbox.com/requirements.html)

# mysql - MySQL：“NOT IN()”函数在结果集中不允许“NULL”值吗？

> ID：10027365
> 
> 赞同：2
> 
> 时间：2012-04-05T11:03:02.223
> 
> 标签：mysql, notnull

我的本地服务器上有一个简单的表。

```
mysql> desc table ;
+-------+---------+------+-----+---------+-------+
| Field | Type    | Null | Key | Default | Extra |
+-------+---------+------+-----+---------+-------+
| id    | int(10) | YES  |     | NULL    |       | 
| count | int(10) | YES  |     | NULL    |       | 
+-------+---------+------+-----+---------+-------+
2 rows in set (0.00 sec 
```

它只有三个记录。

```
mysql> select * from uday ;
+------+-------+
| id   | count |
+------+-------+
|    1 |     1 | 
|    2 |     2 | 
|    3 |     0 | 
|    4 |  NULL | 
+------+-------+
4 rows in set (0.00 sec) 
```

现在，为什么我在下面的结果中没有看到第四列..？

```
mysql> select * from uday where count NOT IN (0) ;
mysql> select * from uday where count != 0 ;
+------+-------+
| id   | count |
+------+-------+
|    1 |     1 | 
|    2 |     2 | 
+------+-------+
2 rows in set (0.00 sec) 
```

第四条记录怎么样...？它在结果中不可见。NULL 不是 0 RIGHT...？

请忽略它是否看起来很愚蠢，因为我在编码部分甚至没有竞争力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:11:35.093

```
col1 not in (1,2,null) 
```

是以下的简写：

```
col1 <> 1 and col1 <> 2 and col1 <> null 
```

在 SQL 的[三值逻辑](http://en.wikipedia.org/wiki/Three-valued_logic)中，`col1 <> null`返回`unknown`. 并且`true and true and unknown`还返回`unknown`。由于`where`仅接受`true`，而不是，因此从结果集中过滤掉`unknown`带有的行。`null`

# asp.net - 如何在 html 中附加带有静态文本的动态文本？

> ID：10027367
> 
> 赞同：0
> 
> 时间：2012-04-05T11:03:14.003
> 
> 标签：asp.net, html, login, append

我正在处理登录页面，我希望用户在登录时在 Welcome"X" 旁边看到他的名字。有没有办法在 html 中使用 asp.net 或 jquery 这样做？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:06:42.073

在登录 aspx 页面中，成功登录后设置会话变量：

```
session["userName"] = "userName"; 
```

并在下一页加载事件中使用欢迎文本在标签中显示相同的内容：

```
if( session["userName"]!=null)
    lblUserName.Text= "Welcome " + session["userName"].toString() 
```

或者您可以在您的 aspx 页面中访问它，如下所示：

```
Welcome <%=Server.HtmlEncode(Session["userName"])%> 
```

使用 .Net 4，您可能需要使用[代码块](http://msdn.microsoft.com/en-us/library/ms178135.aspx)：

```
Welcome <%:Session["userName"]%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:10:56.940

这是流程可以工作的一种方式：

1.  用户登录，凭据通过 POST 发送到服务器 (ASP)
2.  ASP 使用数据库检查凭据以确保用户/密码组合实际上是“好的”
3.  ASP 为该用户启动一个“会话”
4.  ASP 现在将它们重定向到欢迎/登录/主页
5.  欢迎/登录/主页是一个新的 ASP（脚本？），它执行以下操作：
    1.  使用存储在会话中的用户名在数据库中查找用户名（类似于`SELECT name FROM Users WHERE username = \' . session["username"] . '\''`
    2.  使用我们刚刚从数据库中获得的用户名输出动态 html

我对 ASP 不太熟悉，很抱歉没有发布任何代码，但这是我在 PHP 中所做的。从您的问题来看，您似乎不太熟悉客户端和服务器端之间的区别，我认为这些步骤将为您指明正确的方向，以便您能够通过谷歌搜索您正在寻找的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T11:22:19.673

您可以使用 a[`LoginStatus`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginstatus.aspx) 来显示用户名。您通过 获得`UserName`当前登录用户的`Membership.GetUser().ToString()`。

[http://msdn.microsoft.com/en-us/library/ms178332.aspx](http://msdn.microsoft.com/en-us/library/ms178332.aspx)

```
LoginStatus1.LogoutText = "Logout: " +  Membership.GetUser().ToString(); 
```

# java - 在Java中迭代ArrayList？

> ID：10027368
> 
> 赞同：-7
> 
> 时间：2012-04-05T11:03:14.940
> 
> 标签：java

一个数组列表包含一个类的对象。该对象包含 3 个变量名称、城市和电话号码。如何在java中遍历arraylist。这个语法是否正确：arraylist 的名称是 cartdetails。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:06:00.640

```
A a;
ArrayList<A> list= new ArrayList<A>();
//add data
Iterator<A> i = list.iterator();
while(i.hasNext()){
    a = i.next();
    System.out.println(a.field1);
    System.out.println(a.field2);
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:15:36.913

另一种迭代列表的方法如下

```
 ClassA obj1 = new ClassA();
  ClassA obj2 = new ClassA();
  ClassA obj3 = new ClassA();
  ClassA obj4 = new ClassA();

  List<ClassA> list = new ArrayList<ClassA>();
  list.add(obj1);
  list.add(obj2);
  list.add(obj3);
  list.add(obj4);

  foreach( ClassA obj = list  ){

  //here, you can put the processing logic.
  } 
```

# monitoring - 使用 SNMP 获取服务器信息

> ID：10027369
> 
> 赞同：1
> 
> 时间：2012-04-05T11:03:18.917
> 
> 标签：monitoring, snmp

我正在使用 SNMP 来获取服务器信息。我想获取 CPU/进程类型，例如：Intel (R) Pentium (R) Dual CPU E2180 @ 2.00GHz 我非常努力但找不到合适的 OID。

没有人能帮助我吗？

P/s : 对不起我缺乏英文能力

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:44:54.387

[sysDescr](http://www.oid-info.com/get/1.3.6.1.2.1.1.1)表通常（但不总是）包含与机器硬件相关的信息，包括 CPU 。但是，您绝对应该查看[hrDevice](http://www.oid-info.com/get/1.3.6.1.2.1.25.3.2.1)表，其中 hrDeviceType 是*hrDeviceProcessor*，这是我查询笔记本电脑的结果：

```
snmpwalk -v 2c -c ******* 192.168.*.* 1.3.6.1.2.1.25.3.2.1

HOST-RESOURCES-MIB::hrDeviceDescr.768 = STRING: GenuineIntel: Intel(R) Core(TM) i3 CPU       M 330  @ 2.13GHz 
```

# jquery - jQuery fadeIn/fadeOut 导致页面跳转

> ID：10027374
> 
> 赞同：0
> 
> 时间：2012-04-05T11:03:48.263
> 
> 标签：jquery, fadein

我正在使用 jCarousel 为我的访问者创建一个滚动导览，该导览的一部分是在用户每次从一张幻灯片移动到另一张幻灯片时使用一些文本更新标题标签。

看起来，当调用以下代码时，即使我已经将元素（我正在淡入和淡出）包裹在另一个具有固定高度的元素中，它也会导致页面跳转大约 16px。

```
if(state != 'init' && $('#user-tour h1').html() != $(li).find('img').attr('alt'))
{
    $('#user-tour h1').fadeOut(100, function()
    {
    $('#user-tour h1').html($(li).find('img').attr('alt')).fadeIn(100);
    });
} 
```

`#user-tour`被包裹在一个设置了高度的 div 中。我已经通过使用 javascript 来确认这一点，然后切换`#user-tours`可见性并且页面不会移动。

我还挂钩了 , 和 的调整大小和滚动事件，`window`并且在发生此问题时触发的唯一事件是滚动事件。`document``#user-tour div.h1``#user-tour div.h1 h1`

有谁知道为什么会发生这种情况？

干杯

加文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:38:51.577

我建议尝试fadeTo()。

```
.fadeTo(100,0,function(){
    ....fadeTo(100,1);
}) 
```

# regex - sed 中的正则表达式以替换特定格式的部分 url

> ID：10027381
> 
> 赞同：1
> 
> 时间：2012-04-05T11:04:19.093
> 
> 标签：regex, linux, bash, sed

我在使用 sed 做一个简单的正则表达式时遇到了一些问题。

我必须在 sql 文件中进行一些替换，并且我正在尝试使用 sed。

我应该替换一些链接的 url。链接格式如下：

*万维网。**网站 1 .com** /blog/2012/12/12*

我想在所有链接中用**site2替换****site1 。**

 **为了找到这些链接，我编写了以下正则表达式：

```
(site1.com)\/blog\/\d{4}\/\d{2}\/\d{2} 
```

并且似乎工作正常。

使用 sed 做替换的事情我写了下面的代码

```
cat back.sql | sed 's:(site1.com)\/blog\/\d{4}\/\d{2}\/\d{2}:site2.com:' > fixed.sql 
```

但它似乎不起作用..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T11:11:07.140

`sed`不支持`\d`（至少我不知道），并且`{4}`仅支持扩展正则表达式。

```
sed -r 's:site1.com(/blog/[0-9]{4}/[0-9]{2}/[0-9]{2}):site2.com/\1:' 
```

作为一个基本的正则表达式（需要大量转义）：

```
sed 's:site1.com\(/blog/[0-9]\{4\}/[0-9]\{2\}/[0-9]\{2\}\):site2.com/\1:' 
```

附言。如果您使用不同的分隔符，则不需要转义斜杠 ( `:`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:10:32.507

看起来对我来说是一个直接的替代品：

```
$ sed -i s/\.site1\./\.site2\./g afile.txt 
```

...其中`afile.txt`包含您的网站列表。

如果要输出到另一个文件，请删除`-i`并使用 重定向输出`>`。**

# facebook - 如何从应用程序中获取 Facebook iFrame Tab url（包括参数）？

> ID：10027387
> 
> 赞同：0
> 
> 时间：2012-04-05T11:04:58.203
> 
> 标签：facebook, iframe, facebook-iframe

我认为有一些类似的问题似乎建议`app_data`在签名请求中使用（[http://developers.facebook.com/docs/authentication/signed_request/](http://developers.facebook.com/docs/authentication/signed_request/)）但我不确定是否可以做我我试图用它来实现它，因为我以前从未使用过它。

如果我的 Facebook 'Tab' Url 如下所示：

```
http://www.facebook.com/pages/PAGE_TITLE/PAGE_ID?sk=app_APP_ID 
```

我想要做的是在末尾添加一个额外的参数，如下所示：

```
&WT.mc_id=email-uk-8014 
```

这样做的原因是出于跟踪目的，并且链接将在表单中发送

```
http://www.facebook.com/pages/PAGE_TITLE/PAGE_ID?sk=app_APP_ID&WT.mc_id=email-uk-8014 
```

额外的参数将允许我们跟踪活动 ID。

如您所见，我无法事先知道参数的值，因为它取决于用户单击的链接，所以有可能以某种方式`WT.mc_id`在我的 iframe 应用程序中获取参数的值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:25:00.737

`app_data`是除了页面 ID 和用户的基本详细信息（语言环境以及他们是否喜欢/不喜欢该页面）之外唯一传递的参数 - 您需要将其用于任何类型的广告系列跟踪（或链接到其他地方并重定向到捕获分析数据后的选项卡）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:59:56.267

您可以在 facebook 中传递 get 变量，但仅在画布应用程序中您只需要使用 $_REQUEST['xxx'] 来检索数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:12:26.157

你不应该在 facebook 的 href 中传递参数。相反，只需在您的应用程序内进行链接，以便您可以跟踪事件。由于您将在 iframe 中并拥有完全控制权，因此您可以在自己的网站上执行相同的操作。

# sage - SAGE 返回错误的最小多项式？

> ID：10027388
> 
> 赞同：0
> 
> 时间：2012-04-05T11:05:00.703
> 
> 标签：sage

```
sage: A

[    t     1     1     0 t + 1     1]
[    t     t     0 t + 1     t     1]
[    0     1 t + 1     0     t     0]
[    t     t     0     0     0     0]
[    0     1     0     1     1     1]
[    t     1     t     t     t     1]
sage: A.base_ring()
Finite Field in t of size 2^2
sage: A.minpoly()
x^5 + (t + 1)*x^4 + t*x^3
sage: A.minpoly()(A)

[1 1 1 1 1 1]
[1 1 1 1 1 1]
[1 1 1 1 1 1]
[1 1 1 1 1 1]
[1 1 1 1 1 1]
[1 1 1 1 1 1] 
```

当然，最后一个命令的结果应该是零矩阵。我不知道为什么它失败了。所以问题是出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:09:00.070

我无法在 OS X 10.6.8 上重现它：

```
sage: version()
'Sage Version 4.8, Release Date: 2012-01-20'
sage: R.<t> = GF(4)
sage: R
Finite Field in t of size 2^2
sage: A = Matrix(R, [[t, 1, 1, 0, t+1, 1], [t,t,0,t+1,t,1,],[0,1,t+1,0,t,0],[t,t,0,0,0,0,],[0,1,0,1,1,1,],[t,1,t,t,t,1]])
sage: A
[    t     1     1     0 t + 1     1]
[    t     t     0 t + 1     t     1]
[    0     1 t + 1     0     t     0]
[    t     t     0     0     0     0]
[    0     1     0     1     1     1]
[    t     1     t     t     t     1]
sage: s = """
....: [    t     1     1     0 t + 1     1]
....: [    t     t     0 t + 1     t     1]
....: [    0     1 t + 1     0     t     0]
....: [    t     t     0     0     0     0]
....: [    0     1     0     1     1     1]
....: [    t     1     t     t     t     1]"""
sage: 
sage: str(A) == s.strip()
True
sage: A.minpoly()
x^6 + (t + 1)*x^5 + t*x^4
sage: A.minpoly()(A)
[0 0 0 0 0 0]
[0 0 0 0 0 0]
[0 0 0 0 0 0]
[0 0 0 0 0 0]
[0 0 0 0 0 0]
[0 0 0 0 0 0] 
```

注意 x 的额外因子。您没有发布您的版本号或有关您的架构的任何信息，所以我不知道它是仍然存在的依赖于架构的线性代数错误还是已修复的错误。Sage 5.0 将很快推出（目前为 beta12），强烈建议升级。

两个元注释：请发布可以复制和粘贴的代码以重现问题。此外，您始终可以在 sagenb.org（甚至 test.sagenb.org）上测试您的代码片段，以查看您的问题是否仍然存在于主线及其他地方。两者似乎都给出了正确的答案。

# sql - 多态性和嵌套属性

> ID：10027390
> 
> 赞同：1
> 
> 时间：2012-04-05T11:05:04.260
> 
> 标签：sql, ruby-on-rails, polymorphism, nested-attributes

[我使用acts_as_relation](https://github.com/hzamani/acts_as_relation)设置了以下多态关联

![多态关联](../Images/293d027f5f81f9041da7b2ca1c3cc017.png)

型号代码：

```
class Email < ActiveRecord::Base
  belongs_to :detail
  validates_presence_of :address
end

class Detail < ActiveRecord::Base
  acts_as_superclass
  has_many :emails
  accepts_nested_attributes_for :emails, allow_destroy: true
end

class User < ActiveRecord::Base
  acts_as :detail
  validates_presence_of :username, :password
end 
```

迁移代码：

```
class CreateInfo < ActiveRecord::Migration
  def change
    create_table :details, :as_relation_superclass => true do |t|
      t.timestamps
    end
  end
end

class CreateEmails < ActiveRecord::Migration
  def change
    create_table :emails do |t|
      t.string :address
      t.string :address_type
      t.string :detail_id

      t.timestamps
    end
  end
end

class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :name
      t.string :username
      t.string :password

      t.timestamps
    end
  end
end 
```

我希望能够拥有一个允许多个电子邮件地址、地址等的表单（最终）。但我正在努力让它发挥作用。我将 HAML 用于任何可能回复视图代码的人，这更具可读性。

我目前的表格是这样的：

```
views/users/_form.html.haml

= form_for(@user) do |f|
  - if @user.errors.any?
    #error_explanation
      %h2
        = pluralize(@user.errors.count, "error")
        prohibited this user from being saved:
      %ul
        - @user.errors.full_messages.each do |msg|
          %li= msg
  .field
    = f.label :name
    = f.text_field :name
  .field
    = f.label :username
    = f.text_field :username
  .field
    = f.label :password
    = f.text_field :password
  = f.fields_for :emails do |ff|
    .field
      = ff.label :address, 'Email address'
      = ff.text_field :address
    .field
      = ff.label :address_type, 'Type'
      = ff.text_field :address_type
  .actions
    = f.submit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:01:38.390

如果您在添加nested_attributes 时遇到问题，查看[https://github.com/ryanb/nested_form可能会很有趣](https://github.com/ryanb/nested_form)

# android - 如何在两个视图之间定位广告视图

> ID：10027394
> 
> 赞同：0
> 
> 时间：2012-04-05T11:05:13.957
> 
> 标签：android, android-relativelayout, circular-dependency

我有一个 adview 需要放置在两个 imageview 之间。我的布局是

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:src="@color/white" >       

    <ImageView
        android:id="@+id/back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"            
        android:layout_marginLeft="5dp"
        android:layout_marginTop="10dp"
        android:background="@drawable/backwonde"
        android:contentDescription="@string/app_name"
        android:onClick="listt" />

    <ImageView
        android:id="@+id/previous"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"            
        android:layout_marginRight="45dp"
        android:layout_marginTop="10dp"
        android:contentDescription="@string/app_name"
        android:onClick="previous"
        android:src="@drawable/left" />

    <ImageView
        android:id="@+id/next"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"            
        android:layout_alignParentRight="true"
        android:layout_marginRight="5dp"
        android:layout_marginTop="10dp"
        android:contentDescription="@string/app_name"
        android:onClick="next"
        android:src="@drawable/right" />

     <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/next"
        ads:adSize="BANNER"
        ads:adUnitId="MY PUB ID"
        ads:loadAdOnCreate="true" />

    <ImageView
        android:id="@+id/imm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/list"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="30dp"
        android:contentDescription="@string/app_name" />

    <ImageView
        android:id="@+id/imm2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/imm"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dp"
        android:contentDescription="@string/app_name" />

    <TextView
        android:id="@+id/stext1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/imm2"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="30dp"
        android:text="@string/Tit"
        android:textColor="@color/DodgerBlue"
        android:textSize="18dp"
        android:textStyle="bold"
        android:typeface="sans" />

    <TextView
        android:id="@+id/dtext1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/stext1"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="5dp"
        android:lineSpacingExtra="0.1dp"
        android:textColor="@color/black"
        android:textSize="15dp"
        android:textStyle="normal"
        android:typeface="serif" />

    <TextView
        android:id="@+id/stext2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/dtext1"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"
        android:text="@string/loc"
        android:textColor="@color/DodgerBlue"
        android:textSize="18dp"
        android:textStyle="bold"
        android:typeface="sans" />

    <TextView
        android:id="@+id/dtext2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/stext2"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="5dp"
        android:lineSpacingExtra="0.1dp"
        android:textColor="@color/black"
        android:textSize="15dp"
        android:textStyle="normal"
        android:typeface="serif" />

    <TextView
        android:id="@+id/stext3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/dtext2"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"
        android:text="@string/hist"
        android:textColor="@color/DodgerBlue"
        android:textSize="18dp"
        android:textStyle="bold"
        android:typeface="sans" />

    <WebView
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/stext3"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="6dp"
        android:background="@color/white" />
</RelativeLayout> 
```

我需要 Imageview 的“next”和“imm”之间的广告。我尝试使用下面的属性布局，但它给了我循环依赖错误。我可以通过哪种方式实现它。

任何建议表示赞赏。提前致谢。

# jquery - 需要一个动画 DIV 来移动另一个

> ID：10027402
> 
> 赞同：0
> 
> 时间：2012-04-05T11:05:49.313
> 
> 标签：jquery, html

[http://jsfiddle.net/pC6fC/1/](http://jsfiddle.net/pC6fC/1/)

我有两个 div，一个在另一个之上。当第一个动画时，它会滑到另一个下方。我怎样才能确保当第一个动画时它会向下推动第二个而不必为两个 DIV 设置动画。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:11:51.880

您可以使用边距，而不是顶部。由于您的两个 div 都相对定位，如果您设置最高值（即 30%），它不会推动您的第二个 div。

边距顶部示例：http: [//jsfiddle.net/pC6fC/5/](http://jsfiddle.net/pC6fC/5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T11:09:25.343

您可以通过设置动画`margin-top`而不是动画来做到这一点`top`，或者另一种想法是将它们都放入 a`parent div`并为其设置动画。

示例1：http : [//jsfiddle.net/pC6fC/8/](http://jsfiddle.net/pC6fC/8/)

示例2：http : [//jsfiddle.net/pC6fC/6/](http://jsfiddle.net/pC6fC/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:09:57.750

在这里，您可以稍微修改一下 jQuery ..

1.  如果您希望 div 在 box1 的动画完成后滑动。

    ```
    /* Slides down alert banner */
    $(function(){
        $(".link").click(function(){
            $(".box1").animate({top:150}, 500, function () { $(".box2").css({top:150});});

        }); 
    ```

    });

2.  如果您希望 div 与 box1 的动画一起滑动。

    ```
    /* Slides down alert banner */
    $(function(){
        $(".link").click(function(){
        $(".box1").animate({top:150}, 500);
        $(".box2").css({top:150});
        });
    }); 
    ```

# javascript - 如果帐户有相关实体记录，则显示弹出窗口/警报

> ID：10027404
> 
> 赞同：0
> 
> 时间：2012-04-05T11:05:52.777
> 
> 标签：javascript, dynamics-crm-2011

我创建了一个名为 Alert 的自定义实体。我已将此与开箱即用的帐户实体相关联。

我现在要做的是自定义 Account 表单，以便当用户打开它时，它会检查当前帐户是否有任何活动警报。如果是这样，它应该显示一条消息，通知他们这一点（javascript 警报？），然后导航到该帐户的警报视图。

我在 CRM 中做了一些基本的 javascript，但我不确定如何查询相关实体。

**注意**活动警报由警报活动日期中的显示起始日期和显示截止日期定义（显示起始日期 <= 今天和显示截止日期 >= 今天）。

**更新**

感谢您为我指明 oData 的方向。我现在有以下功能，它正在查找帐户集但扩展与警报的关系。我试图弄清楚如何检查是否有任何警报，目前我的代码总是触发 javascript 警报。

```
function CheckForAlerts(accountId)
{
    var odataSelect = "http://mscrmdev/Test/xrmservices/2011/OrganizationData.svc/AccountSet?$expand=new_account_new_alert_Account&$filter=AccountNumber eq '" + accountId + "'";

    $.ajax({
           type: "GET",
           contentType: "application/json; charset=utf-8",
           datatype: "json",
           url: odataSelect,
           beforeSend: function (XMLHttpRequest) { XMLHttpRequest.setRequestHeader("Accept", "application/json"); },
           success: function (data, textStatus, XmlHttpRequest) 
               { 
                   // Use only one of these two methods

                   // Use for a selection that may return multiple entities
                   ProcessReturnedEntities(data.d.results); 

               },
           error: function (XmlHttpRequest, textStatus, errorThrown) { alert('OData Select Failed: ' + odataSelect); }
       });
}

function ProcessReturnedEntities(ManyEntities)
{
    var oneEntity = ManyEntities[0];

    if (oneEntity != null)
    {
        alert('There are active alerts associated with this account.');
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:57:57.083

最好的方法是通过来自 javascript 的 oData 查询。CRM 2011 SDK 带有一些用于像这样的 oData 调用的辅助函数。您将需要使用“retrieveMultiple”方法，该方法允许您通过查找相关“帐户”来检索所有“警报”。

首先将 SDK 中的“RESTJQueryEditor.js”文件添加到您的表单中，然后您可以添加自己的自定义脚本来执行检索。然后我建议创建您希望在回调成功函数中向用户显示的消息，如下所示：-

```
retrieveMultiple('nameOfYourAlertEntitySet', '?$filter=myAccountLookupName eq ' + accountId, function(alerts){
    if(alerts.length > 0)
    {
        var message = '';

        for(var index = 0; index<alerts.length; index++)
        {
            message += 'alert: ' + alerts[index].name;
        }   

        alert('Found associated alerts: ' + message);
    }
    else
    {
        alert('No associated alerts found for this account');
    }
}, 
function(){
    // Log an exception
}); 
```

当然，您将希望使警报消息更好一点，并相应地调整您的属性名称，但我相信这是您想要做的事情的味道。此外，您可以使用“and”关键字在过滤器中的警报实体上添加任何其他条件。

如果您有任何问题，请告诉我。

# c# - 如何处理空 Uri 的路径绑定到图像源

> ID：10027407
> 
> 赞同：8
> 
> 时间：2012-04-05T11:06:08.507
> 
> 标签：c#, wpf, mvvm

如何将 Uri 对象初始化为空状态。

第一个想法是做这样的事情

```
//does not work
Uri myUri = Uri.Empty 
```

这个也行不通

```
Uri myUri = new Uri(string.Empty) 
```

原因是我将图像路径存储在数据库中，如果没有定义图像，我有一个空白的数据库记录。

我知道有办法用转换器处理这个问题，并在 image_path 为空的情况下返回默认的空白图像 Uri...

如何最好地处理与我的 ViewModel Uri 属性的绑定？

转换器是要走的路吗？如果您想要返回许多不同的默认图像，您将如何处理它...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-12-06T18:09:18.517

只需设置：

```
new Uri("about:blank"); 
```

为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-27T07:06:39.963

你可以做这样的事情

```
Uri uri = null;
bool someValue = Context.TryGetUri(entity, out uri); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:23:17.660

处理此问题的其他方法是您可以更改数据查询，例如，如果您使用的是 sql 员工表，那么您可以如下所示编写。

```
select Employeeid, FirstName, LastName, 
case when ImageUrl is null then 'http://www.codeodor.com/images/Empty_set.png' else ImageUrl end as ImageUrl from employees 
```

这将处理 null 并返回空图像的默认 url；

希望它适合你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-13T08:19:47.433

我有同样的问题，经过一段时间的思考，我相信没有默认构造函数，`System.Uri`因为它没有意义。实际上， an`URI`标识资源，因此如果该资源不存在或无法定位，我认为最好的方法是处理`null`引用而不是 empty `Uri`。

在您的代码中，而不是（伪代码）：

```
if (myUri != Uri.Empty)
{
    // do something
} 
```

你将拥有：

```
if (myUri != null)
{
   // do something
} 
```

在这种情况下，如果它适合您的工作流程，您也可以使用[Null-conditional Operator 。](https://msdn.microsoft.com/en-us/library/dn986595.aspx)

# mysql - Mysql不能将两个表列连接成一个节目

> ID：10027409
> 
> 赞同：0
> 
> 时间：2012-04-05T11:06:25.710
> 
> 标签：mysql

我想显示两列汇总数据。

*   `table1`- 统计所有id与表中id相同的`show_users`字段。
*   `table2`- 将 id 与表中 id 相同的所有值相加`show_users`。

这是我的查询：

```
SELECT show_users.id, COUNT(`table1`.id) as sum_fields , SUM(`table2`.count) as count_all
FROM `show_users` 
LEFT JOIN `table1` ON `show_users`.id = `table1`.id
LEFT JOIN `table2` ON `show_users`.id = `table2`.id
GROUP by show_users.id 
ORDER BY sum_fields DESC 
```

结果`table2`很好，但`table1`计数不是正确的值......这是为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T06:28:11.460

```
SELECT show_users.id, COUNT(DISTINCT `table1`.id) as sum_fields , SUM(`table2`.count) as count_all 
```

# php - PHP在多维数组中搜索值，然后将该元素放在数组的开头

> ID：10027410
> 
> 赞同：0
> 
> 时间：2012-04-05T11:06:37.877
> 
> 标签：php, arrays, usort

我需要搜索这个数组：

```
cars - 
      [0] -make : Ford
          -model: Escort
          -year: 1991

      [1] -make: Honda
          -model: Civic
          -year: 1996

      [2] -make: Vauxhall 
          -model: Astra
          -year: 1972 
```

如果（例如）模型是“Civic”，则将该“汽车”放在位置 0。

所以结束数组会是这样的：

```
cars - 
      [0] -make: Honda
          -model: Civic
          -year: 1996

      [1] -make : Ford
          -model: Escort
          -year: 1991        

      [2] -make: Vauxhall 
          -model: Astra
          -year: 1972 
```

我尝试了一些 usort 变体：

```
 function typeSort($a, $b)
    {
        if ($a['model'] == 'Civic' )
        {
            return 0;
        }
        return ($a['model'] < $b['model']) ? -1 : 1;
    } 
```

但这只是回归`1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:26:11.267

你的意思是：

```
 function sortByModel($a, $b) {
    if($a["model"] == "Civic") {
        return 0;
    }
    else {
        return 1;
    }       
}
usort($a, 'sortByModel');
echo "<pre>";
print_r($a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:32:30.870

```
<?php
$cars = array(
    0=>array(
        'make' => 'Ford'
        ,'model' => 'Escort'
        ,'year' => 1991
    )
    ,1=>array(
        'make' => 'Honda'
        ,'model' => 'Civic'
        ,'year' => 1996
    )
    ,2=>array(
        'make' => 'Vauxhall'
        ,'model' => 'Astra'
        ,'year' => 1972
    )
);

var_dump("BEFORE",$cars);
var_dump("AFTER",array_typesort($cars));

function array_typesort( $arr, $model='Civic' ) {
    foreach ( $arr as $k => $v ) {
        if ( $arr[$k]['model'] == $model ) {
            $out = array_splice( $arr, $k, 1 );
            array_unshift($arr, $out[0]);
            return $arr;
        }
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:31:57.917

或者也许这就是你想要的（至少输出是你想要的）

```
foreach($cars as $k => $v){
    if ($v['model'] == 'Civic'){
        unset($cars[$k]);
        array_unshift($cars, $v);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:42:55.577

你可以试试这个：

```
function typesort($arr, $val)
{

foreach($arr as $key=>$value)
{
    if(in_array($val,$value))
    {
        $tempArr = $value;
        unset($arr[$key]);
        break;
    }
}
array_unshift($arr,$tempArr);
return $arr;
}

print_r(typesort($data,'bbb')); 
```

# django - Django：有哪些方法可以“参数化”表单字段的显示和可编辑性。

> ID：10027414
> 
> 赞同：0
> 
> 时间：2012-04-05T11:07:09.517
> 
> 标签：django, forms, django-forms

Django：有哪些方法可以“参数化”表单字段的显示和可编辑性。

我有几个表单，我希望表单显示中缺少某些字段（取决于当前用户），并且某些字段无法编辑，具体取决于用户。

这需要在服务器上强制执行，以便恶意用户无法通过手动构造缺少参数的发布请求来破坏安全性。

同样，未向用户显示的字段仍必须在表单结果中返回，以便在将模型写回数据库时未向用户显示且未“清除”的字段。

我还需要解决模板的相同隐藏问题。

该应用程序将有数十种形式，具有不同的不变性/隐藏要求，因此这需要是一个通用系统。每个表单内的编码权限太容易出错。

任何帮助表示赞赏。

克里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:10:26.947

对于隐藏表单显示的字段，只需删除表单`__init__`方法中不需要的字段。通过添加删除字段构造post请求，不会对表单产生影响。

关于禁用或只读字段，请查看[本文](http://lazypython.blogspot.com/2008/12/building-read-only-field-in-django.html)和[另一个](https://stackoverflow.com/questions/324477/in-a-django-form-how-to-make-a-field-readonly-or-disabled-so-that-it-cannot-b)问题。基本上，清洁字段应将其设置为初始状态。

# java - OSX Lion 上的 JDK API 位置

> ID：10027420
> 
> 赞同：3
> 
> 时间：2012-04-05T11:07:23.447
> 
> 标签：java, eclipse, macos, osx-lion, javadoc

我正在尝试在 OSX Lion 10.7.3 上的 Eclipse Helios 中添加 Javadoc 位置。我刚刚从 Apple 安装了 Java for Developers 2012-01。

我有以下问题：我的 Java 安装文件夹（/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home）中没有 src.jar/docs.jar 文件。

他们是否将其从安装中删除？我能做些什么来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:25:59.027

默认情况下，Mac 上的 JDK 不包含 src.jar。您需要从[Apple Developers](https://developer.apple.com/downloads/index.action)下载并安装“Java Developer Package” 。安装后你会在类似这样的路径下找到 src.jar

```
/Library/Java/JavaVirtualMachines/1.6.0_22-b04-307.jdk/Contents/Home 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:37:15.463

默认的“用户”从 Apple 下载的 Java 不包括源代码或 Javadoc。[您可以从https://connect.apple.com/](https://connect.apple.com/)下载一个特殊的 Java Developer 包进行安装。您必须使用 Apple ID 在 Apple 注册，但免费帐户足以下载开发人员包，无需完整且昂贵的 ADC 会员资格。开发人员包的好处还在于它们不会相互覆盖，因此您可以安装多个版本来测试您的软件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:51:33.030

作为一种解决方法，mavenise 你的项目，安装 m2e 并让 maven 下载源代码（右键单击 -> maven -> 下载源代码）。优点是您可以下载除 jdk 之外的所有库的源代码

# sql-server - 创建新外键 (SQL Server)

> ID：10027428
> 
> 赞同：0
> 
> 时间：2012-04-05T11:07:50.047
> 
> 标签：sql-server, foreign-key-relationship

我在我的数据库中创建外键时遇到了一些麻烦。这是我的表格的解释模型：

**笔记**

```
 * (PK) NOTE_ID   BIGINT
 *      TITLE     VARCHAR(200)
 *      DATE      DATETIME
 *      SERIES_ID BIGINT 
```

**系列**

```
 * (PK) SERIES_ID BIGINT
 *      TITLE     VARCHAR(200)
 *      DESCR     VARCHAR(1000) 
```

我正在尝试在`NOTE`和`SERIES`by之间建立“有”关系`SERIES_ID`。我认为在两个表之间设置外键`SERIES_ID`是解决方案，但是当我尝试创建它时，出现以下错误：

> *错误：被引用的表“dbo.SERIES”中没有与外键“ FK_SERIES_NOTE* ”中的引用列列表匹配的主键或候选键。无法创建约束

我正在使用我设置的 GoDaddy SQL Server 附带的 Web 数据库管理器，所以我不确定它尝试使用的底层查询是什么，或者我会发布它。

归根结底，这一切都是为了创建一个关系，以便我的 Note 对象的 NHibernate 映射将包含与 Series 对象的一对一关系。不过，我什至可能没有尝试用外键以正确的方式解决这个问题。

我会以正确的方式解决这个问题吗？

**编辑：** 为了尝试将表与更简单的示例配对，我删除了我认为是几个非关键列。但是，我最终留下了一个字段，该字段实际上是系列表上复合主键的一部分。所以，因为我试图将外键分配给复合键的一部分，所以不允许我这样做。

最后，我再次查看了我的表的结构，发现我实际上不需要复合键的另一部分 - 删除后，外键的分配现在工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:21:25.363

If you can, you may try running the following statement in a query analyzer and see the resulting error message (I guess @Damien_The_Unbeliever is right ) :

```
ALTER TABLE NOTE ADD CONSTRAINT FK_SERIES_NOTE 
FOREIGN KEY (SERIES_ID) REFERENCES SERIES(SERIES_ID)
--ON DELETE CASCADE
-- uncomment the preceding line if you want a delete on a serie 
-- to automatically delete all notes on this serie 
```

Hope this will help

# mysql - MySQL - min_word_length 2 或 3 - 需要计数

> ID：10027430
> 
> 赞同：2
> 
> 时间：2012-04-05T11:07:55.320
> 
> 标签：mysql, full-text-search

我正在尝试决定在我的新 MySQL 实例上将 min_word_length 设置为 2 还是 3，所以我想如果我计算要索引的列中 2 个字母单词的数量，它将给出正确答案的指示。

所以，问题是，是否可以使用 SQL 查询来计算列中的两个字母单词的数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:01:33.623

没有测试，但你可以试试

```
SELECT SUM(
CASE WHEN yourColumn REGEXP '[[:<:]][a-zA-Z]{2}[[:>:]]'
THEN 1 
ELSE 0 END
) AS matches 
FROM ... 
```

虽然我认为，它可能只计算一个 2 个字符的单词连续出现，而不是连续出现多少次。

更新：经过测试，它像我想的那样工作，所以请忽略这个答案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T11:37:29.593

LEN() 函数返回文本字段中值的长度。

```
SELECT LEN(column_name) FROM table_name 
```

COUNT(*) 函数返回表中的记录数：

```
SELECT COUNT(column_name) FROM table_name 
```

所以你的查询应该是这样的：

```
SELECT COUNT(column_name) FROM table_name
WHERE LEN(column_name)=2 
```

更新：

好的，对不起，我想我误解了你。如果你想要它，恐怕没有内置函数可以做你想做的事情。所以你必须自己做一个功能。像这样的东西应该工作：

```
 CREATE FUNCTION [dbo].[WordCount] ( @InputString VARCHAR(4000) ) 
            RETURNS INT
            AS
            BEGIN

            DECLARE @Index          INT
            DECLARE @Char           CHAR(1)
            DECLARE @PrevChar       CHAR(1)
            DECLARE @WordCount      INT
            DECLARE @CharCount      INT

            SET @Index = 1
            SET @WordCount = 0

            WHILE @Index <= LEN(@InputString)
            BEGIN
            SET @Char     = SUBSTRING(@InputString, @Index, 1)
            SET @CharCount = @CharCount + 1
            SET @PrevChar = CASE WHEN @Index = 1 THEN ' '
                    ELSE SUBSTRING(@InputString, @Index - 1, 1)
            END

            IF @PrevChar = ' '
                SET @CharCount = 1
            END

            IF @Char = ' ' AND @CharCount < 3 AND @CharCount > 1
                SET @WordCount = @WordCount + 1

            SET @Index = @Index + 1
            END

            RETURN @WordCount

            END 
```

现在我还没有测试它，所以你必须自己测试它，但它应该可以工作。它将返回所选字符串中的所有 2 个字母单词。要获得 3 个字母的单词，只需更改

```
IF @Char = ' ' AND @CharCount < 4 AND @CharCount > 2 
```

我希望这有帮助。

# javascript - Jquery Mobile 超链接按钮动画未触发

> ID：10027441
> 
> 赞同：0
> 
> 时间：2012-04-05T11:08:30.747
> 
> 标签：javascript, jquery, button, jquery-mobile

我有两个`JQM`按钮：

```
 <a id="clearA" href="#" data-role="button">Clear a</a>
  <a id="clearB" href="#mainPage" data-role="button">Clear b</a> 
```

我正在为（超链接/按钮“clearA”）连接点击事件，如下所示：

```
$("#clearA").click(function (e) {
    e.stopImmediatePropagation();
    e.preventDefault();
    console.log("Me? I got clicked");
}); 
```

当我单击“clearA”时，事件被触发，但按钮不显示其按下的动画/状态。如果我单击非连线按钮“clearB”，则该按钮会动画。

为什么按钮“clearA”没有动画？

**更新** 我正在使用 JQM 1.1.0

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:51:49.360

使用从 cdn 获取的最新版本的 jquery mobile 运行此代码，两个按钮的工作方式完全相同，您可以尝试使用以下版本来查看它是否适合您吗？

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script> 
```

**更新：**

JQM 1.1 仍然是一个不稳定的版本，它有一些粗糙的边缘。使用该版本，没有一个按钮对我来说正常工作，这似乎是因为库没有将主题数据属性正确分配给按钮。

添加这个小修改（以差异格式）有效：

```
4216a4217,4218 > e.setAttribute( "data-" + $.mobile.ns + "theme", o.theme ); 
```

# jquery - 全屏覆盖单击任意位置以关闭与覆盖内的文本链接的冲突

> ID：10027442
> 
> 赞同：2
> 
> 时间：2012-04-05T11:08:33.063
> 
> 标签：jquery, event-handling, click

我有一个关于页面的全屏覆盖，当被调用时，它位于站点的内容之上。我希望用户能够单击任意位置以关闭覆盖。但是，这与 about 文本中的超链接相冲突。因此，如果我单击叠加层中的超链接，它将关闭叠加层，然后转到超链接。如何将超链接与非超链接分开？

这是一个演示问题的jsfiddle。[http://jsfiddle.net/USzAb/](http://jsfiddle.net/USzAb/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:11:01.330

只需添加它即可停止 #ablock 内所有超链接上的点击事件传播

```
$("#ablock a").click(function(event) { event.stopPropagation(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:11:02.877

您应该添加一些代码，例如...

```
$('#ablock').click(function(event) {
    event.stopPropagation();
}); 
```

[js小提琴](http://jsfiddle.net/QzPfQ/)。

您遇到的问题是`click`事件正在通过祖先元素冒泡，直到它也触发`#ablock`'`click`事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:15:52.530

出现此问题的原因是单击超链接会冒泡到叠加层。你需要用类似的东西来阻止这种冒泡

```
$('a', '#ablock').click(function(e){e.stopPropagation()}) 
```

这仍将允许链接单击起作用并停止覆盖单击处理程序正在处理的事件。

我已经通过将它添加到你在 jsfiddle 上的演示来测试它

# wordpress - 如何在管理面板中显示自定义 RSS 提要？

> ID：10027447
> 
> 赞同：0
> 
> 时间：2012-04-05T11:08:59.967
> 
> 标签：wordpress, feed

我想使用菜单区域中的按钮在 WordPress 管理中创建新区域。并在小部件中提供新闻提要。

或者，也许可以在仪表板中使用自定义 rss 提要创建新的小部件，例如“wordpress.org 新闻”等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:00:53.647

仪表板小部件可以配置为显示您选择的提要`WordPress Blog`：`Other WordPress News`

![在此处输入图像描述](../Images/197735e26adb8ae3a6a8d7305ad939b8.png)

# ⬇</h1>

![在此处输入图像描述](../Images/41c38c2bd90eda0744c4a21acfcd092b.png)

要创建您自己的小部件，[请选中此](https://wordpress.stackexchange.com/search?q=wp_add_dashboard_widget)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-21T05:38:57.033

因此，让我们开始为您的 WordPress 主题管理仪表板添加自定义新闻提要。将此片段添加到 WordPress 主题的 functions.php 中，您可以将现有的 RSS 提要小部件替换为另一个 RSS 提要。

```
function esoft_dashboard_news_feed() {
     global $wp_meta_boxes;
     unset(
          $wp_meta_boxes['dashboard']['normal']['core']['dashboard_plugins'],
          $wp_meta_boxes['dashboard']['side']['core']['dashboard_secondary'],
          $wp_meta_boxes['dashboard']['side']['core']['dashboard_primary']
     );
     wp_add_dashboard_widget( 'dashboard_custom_feed', 'YOUR_FEED_NAME' , 'dashboard_custom_feed_output' ); 
}

function dashboard_custom_feed_output() {
     echo '<div class="rss-widget">';
     wp_widget_rss_output(array(
          'url' => 'http://www.e2soft.com/blog/feed/',
          'title' => 'YOUR_FEED_TITLE',
          'items' => 3,
          'show_summary' => 1,
          'show_author' => 0,
          'show_date' => 1
     ));
     echo '</div>';
}
add_action('wp_dashboard_setup', 'esoft_dashboard_news_feed'); 
```

只需将其粘贴到您的主题 functions.php 文件中，然后将“YOUR_FEED_NAME”替换为您的新闻提要名称，“<a href="http://www.e2soft.com/blog/feed/" rel="nofollow">http: //www.e2soft.com/blog/feed/”通过您的Feed URL，“YOUR_FEED_TITLE”通过您的Feed标题，输入显示项目编号，显示日期和作者为0或1。这就是为您的 WordPress 主题管理仪表板添加自定义新闻提要的全部内容。

有关详细信息，请访问[如何添加新闻提要 WordPress 管理仪表板](http://www.e2soft.com/blog/how-to-add-news-feed-wordpress-admin-dashboard/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T04:58:10.647

我为根级用户开发了一个插件。您可以下载并使用该插件以方便使用。它还有很好的设置面板，用于配置您的 News Feed WordPress to Admin Dashboard [Download Plugin](https://wordpress.org/plugins/wp-admin-dashboard-news-feed/)

# iphone - 旋转图像突然翻转

> ID：10027448
> 
> 赞同：1
> 
> 时间：2012-04-05T11:09:00.130
> 
> 标签：iphone, objective-c, ios, ios4

我正在使用以下代码通过在左右箭头上开始手势来旋转图像。同时沿着旋转移动箭头。

```
- (void)handleRotation:(UIPanGestureRecognizer *)recognizer 
{

UIView* cview = self.superview.superview;

UIView* lView = self.superview;

CGPoint origin = [lView convertPoint: self.center toView: cview]; 

if (recognizer.state == UIGestureRecognizerStateBegan)
{
    if (recognizer.view == leftImage)
    {
        initialP= [self convertPoint: leftImage.center toView: cview];
    }
    else
    {
        initialP = [self convertPoint: rightImage.center toView: cview];
    }
}
CGPoint currentP = [recognizer translationInView:cview];
currentP.x += initialP.x;
currentP.y += initialP.y;

CGFloat angle = 0;

CGFloat a = initialP.x - origin.x;
CGFloat b = initialP.y - origin.y;
CGFloat c = currentP.x - origin.x;
CGFloat d = currentP.y - origin.y;
angle =  acosf( ((a*c) + (b*d)) / ((sqrt(a*a + b*b)) * (sqrt(c*c + d*d))));

angle +=  lastReleasedAngle;

if (currentP.y < (currentP.x *(initialP.y - origin.y) + (initialP.x * origin.y - initialP.y * origin.x))  / (initialP.x - origin.x))
{
    angle = -angle;
}

if (recognizer.view == leftImage)
{
    angle = -angle;
}

if(recognizer.state == UIGestureRecognizerStateBegan || 
   recognizer.state == UIGestureRecognizerStateChanged || recognizer.state == UIGestureRecognizerStateEnded)
{

    [self setTransform: CGAffineTransformMakeRotation(angle)];
}  
if (recognizer.state == UIGestureRecognizerStateEnded)
{

    lastReleasedAngle = angle;   
} 
```

第一次开始旋转时它工作得很好。说，右箭头现在是 0 度..当我从这里开始旋转并在这里释放它工作正常。当我在其他任何地方释放旋转然后尝试旋转时，图像开始精确翻转移动 180 度后到 180 度。

![](../Images/1d2d6e442f7b028eb75f279b2d304fff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:00:15.110

在这里查看左、右旋转的示例，并取决于[从此处下载的位置](https://github.com/bignerdranch/ViewRotationTest)

# php - MySQL“wait_timeout”不会因长查询而受到尊重？

> ID：10027453
> 
> 赞同：4
> 
> 时间：2012-04-05T11:09:25.067
> 
> 标签：php, mysql, timeout, mariadb

我正在尝试测试`wait_timeout`似乎被忽略的 MySQL 设置。

**PHP 脚本：**

```
<?php
function microtime_float()
{
    list($usec, $sec) = explode(" ", microtime());
    return ((float)$usec + (float)$sec);
}

$sql = mysqli_connect('localhost','root','root','mysql');
$query = "SHOW VARIABLES WHERE Variable_name='wait_timeout';";
$result = $sql->query($query) or die($query.'<br />'.$sql->error);
$row = $result->fetch_object();
echo "wait_timeout = " . $row->Value . "<br/>\n";

$time_start = microtime_float();
$query = "SELECT SLEEP(2) FROM mysql.user;";
$sql->query($query) or die($query.'<br />'.$sql->error);
$time_end = microtime_float();
$time = $time_end - $time_start;
echo "Query completed in $time seconds<br/>\n";
echo "You got the page"; 
```

**脚本输出：**

```
wait_timeout = 2
Query completed in 8.0005459785461 seconds
You got the page 
```

**我的配置**

```
mariadb-server-5.3.5
php5.3.6 
```

**为了强制 MySQL 在一定时间后超时查询，我需要做什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:24:10.873

`wait_timeout`和都是`interactive_timeout`断开连接之前的不活动时间。因此，连接必须处于空闲状态（不运行查询）才能被丢弃。MySQL`SLEEP()`不计算在内，因为您正在运行查询。

您必须手动终止长时间运行的查询（没有设置让 MySQL 为您执行此操作）。您可以编写此脚本。使用`SHOW PROCESSLIST`（或外部工具，如[Innotop](http://code.google.com/p/innotop/)）和`KILL`.

# c# - 在 C# 中的服务器上创建 COM 对象：错误：80070776

> ID：10027454
> 
> 赞同：1
> 
> 时间：2012-04-05T11:09:28.717
> 
> 标签：c#, .net, com, windows-server-2008

试图`COM`在服务器上创建 -object。

代码是：

```
var myGuid = new Guid("530A1815-820C-11D3-BBB7-008048DE406A"); 
var myType = Type.GetTypeFromCLSID(myGuid, some_ip, true); 
ITInfoServer infsrv = (ITInfoServer)Activator.CreateInstance(myType);
// infsrv.callSomeMethod (....); 
```

得到错误：

> 由于以下错误，从 IClassFactory 创建具有 CLSID {530A1815-820C-11D3-BBB7-008048DE406A} 的 COM 组件实例失败：80070776。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:23:16.673

阻止服务器使用 COM 对象似乎是网络问题，您可以尝试将服务器添加到您的主机文件中吗？

[http://www.yusufozturk.info/windows-server/wmi-error-80070776-the-object-exporter-specified-was-not-found.html](http://www.yusufozturk.info/windows-server/wmi-error-80070776-the-object-exporter-specified-was-not-found.html)

[http://www.awesomes.net/?p=28](http://www.awesomes.net/?p=28)

# database - SQLDescribeCol 在两台不同的机器上给出不同的列大小？

> ID：10027455
> 
> 赞同：0
> 
> 时间：2012-04-05T11:09:32.387
> 
> 标签：database, postgresql, postgresql-8.4

SQLDescribeCol 方法用于了解表中的列大小。但在一列中，数据类型是文本，它的大小为 8190，而其他机器的大小为 65535。请告诉我为什么会这样？

我需要更改意味着我的系统中需要一些设置。

数据库名称 PostgreSql 8.4 机器 Redhat Linux 64 位 列数据类型为文本

我正在调用这个方法 **sqldescribecol**来了解列的大小

请告诉我你是否知道

提前致谢......

哈尼什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T03:58:30.357

这听起来像是 ODBC 版本或配置的差异。在 ODBC 配置中查找未知大小的设置。

# codeigniter - 使用 sef_title() 后如何删除“-”符号

> ID：10027456
> 
> 赞同：0
> 
> 时间：2012-04-05T11:09:32.913
> 
> 标签：codeigniter

```
$city = sef_title($city);

 redirect('/hotels/lis_t/'.$state_id .'/'.$city.'/'); 
```

1）`sef_title($city);`如果cityname有空格，我用于传递此url时，空格被此符号替换`-`。2）但通过这个网址后，我无法从表中读取城市名称，因为如果城市名称是`$city=himachal`pradesh

使用后的`sef_title($city)`结果是 himachal-pradesh 3) 但是这个名字不在表中，因为表中包含 himachal pradesh。4）那么如何`-`在url传递后删除符号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:24:27.907

在控制器中使用 str_replace：http: [//php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

```
$city = str_replace('-', ' ', $city); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:31:41.320

我个人建议重新格式化数据库表，可以是： state_id ， state_name ， state_permalink 和 state_id = 1 state_name = "Himachal Pradesh" state_permalink = "himachal_pradesh"

因为如果你替换了字符'-'，你就不能把它带回来。！

# fedora - 是否有适用于 Point Gray Flycapture SDK 的 Fedora 驱动程序？

> ID：10027461
> 
> 赞同：1
> 
> 时间：2012-04-05T11:10:27.290
> 
> 标签：fedora, firefly-mv

我正在使用 Fedora 12，但在寻找 Firefly MV USB 数码相机的驱动程序时遇到了一些问题。似乎这些驱动程序仅在 Ubuntu 和 ARM for Linux 发行版中可用。有没有我可以为驱动程序编译的源代码，以便我可以操作我的相机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:07:59.563

你试过*外星人*吗？

就像是

> 外星人-r foobar.deb

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T06:25:02.713

从以下链接查看官方解决方案 [http://www.ptgrey.com/support/kb/printable.asp?q=26](http://www.ptgrey.com/support/kb/printable.asp?q=26)

# database - DB2 IBM 每次我在我的数据库中创建一个视图时，权限都仅限于创建的用户，我想为每个人

> ID：10027466
> 
> 赞同：0
> 
> 时间：2012-04-05T11:10:39.990
> 
> 标签：database, permissions, db2

DB2 IBM 每次在我的数据库中创建视图时，权限都仅限于创建的用户，我想为每个人服务：

```
 create view stkqry.aaa as SELECT ... from ... 
```

现在这个“aaa”受到保护。我希望默认情况下可供所有人使用..怎么办？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:26:10.290

（此答案假设您使用的是 DB2 for Linux/Unix/Windows）

您必须使用[`GRANT`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000966.html)为视图分配特殊的 AuthID “PUBLIC”（所有人）权限。

```
GRANT SELECT ON stkqry.aaa TO PUBLIC 
```

我不认为有一种方法可以自动将所有视图标记为公众可读，但如果您需要返回并标记所有视图，您可以使用类似这样的方法为您生成语句：

```
SELECT 'GRANT SELECT ON ' || 
         TRIM(VIEWSCHEMA) || '.' || 
         TRIM(VIEWNAME)   || ' TO PUBLIC'
FROM SYSCAT.VIEWS 
WHERE DEFINER <> 'SYSIBM' 
```

# sql - 如何在 SQLite 中使用 select 语句更新表

> ID：10027468
> 
> 赞同：13
> 
> 时间：2012-04-05T11:10:45.140
> 
> 标签：sql, sqlite

我想在其他表的外键的帮助下更新一个表。

我正在尝试做这样的事情：

```
UPDATE tbl_1 
SET field1 = 6, field12 = NULL 
WHERE field3 = (SELECT tbl_2.item1 
                FROM tbl_1, tbl_2 
                WHERE tbl_1.field3 = tbl_2.item1 AND tbl_2.item2 = 135) 
```

或者

```
UPDATE tbl_1 
SET field1 = 6, field12 = NULL 
WHERE field3 = (SELECT item1 FROM tbl_2 WHERE item2 = 135) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T11:33:24.580

我认为以下任何一项都可以：

```
UPDATE  tbl_1 
SET     field1 = 6, field12 = NULL 
WHERE   EXISTS 
        (   SELECT 1
            FROM tbl_2 
            WHERE tbl_1.field3 = tbl_2.item1 
            AND tbl_2.item2 = 135
        ) 
```

**或者**

```
UPDATE  tbl_1 
SET     field1 = 6, field12 = NULL 
WHERE   field3 IN (SELECT item1 FROM tbl_2 WHERE item2 = 135) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T11:26:41.247

这是因为 SELECT 返回不止一行。改为这样做：

```
UPDATE tbl_1 SET field1 = 6, field12 = NULL 
WHERE field3 IN (SELECT item1 FROM tbl_2 WHERE item2 = 135) 
```

返回时`SELECT`使用表（或多行）`IN`。如果您确定内部查询应该只返回一行，那么您将不得不相应地调整内部查询。像这样左右：

```
UPDATE tbl_1 SET field1 = 6, field12 = NULL 
WHERE field3 = (SELECT item1 FROM tbl_2 WHERE item2 = 135 ORDER BY myValue LIMIT 1) 
```

在这里使用更安全，`IN`因为它可以处理从 SELECT 语句返回的单个记录和多个记录。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T04:38:22.963

您还可以使用 INSERT OR REPLACE 语句，如下所示：

假设 tbl_1 有 4 列：key、field1、field2、field3
并且您想使用 tbl_2 中的匹配值更新 field2

```
INSERT OR REPLACE INTO tbl_1
SELECT tbl_1.key, tbl_1.field1, tbl_2.value, tbl_1.field3
FROM tbl_1 JOIN tbl_2 ON tbl_2.key = tbl_1.key 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:27:06.657

对于单值：

```
UPDATE tbl_1 
SET field1 = 6, field12 = NULL 
WHERE field3 = (SELECT tbl_2.item1 
                FROM tbl_1, tbl_2 
                WHERE tbl_1.field3 = tbl_2.item1 AND tbl_2.item2 = 135) 
```

对于多个值

```
UPDATE tbl_1 
SET field1 = 6, field12 = NULL 
WHERE field3 IN (SELECT tbl_2.item1 
                FROM tbl_1, tbl_2 
                WHERE tbl_1.field3 = tbl_2.item1 AND tbl_2.item2 = 135) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T11:27:43.420

你可以这样使用

```
UPDATE tbl_1 
SET field1 = 6, field12 = NULL 
WHERE field3 in (SELECT tbl_2.item1 
                FROM tbl_1, tbl_2 
                WHERE tbl_1.field3 = tbl_2.item1 AND tbl_2.item2 = 135) 
```

sqllite 不支持加入更新查询。所以这是选项之一

# java - 如果不需要@Override，如何强制Java编译器出错

> ID：10027469
> 
> 赞同：0
> 
> 时间：2012-04-05T11:10:48.850
> 
> 标签：java, eclipse

我已经从接口中删除了一个未使用的方法，并期望 javac 和 Eclipse 抱怨我的实现类仍然声称要覆盖它：

```
@Override    
public void thisMethodNoLongerOverridesAnything() {} 
```

但是，我没有收到错误甚至警告。

在这种情况下，有没有办法配置 javac 或 Eclipse 来抱怨？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T11:15:51.537

根据[@Override 的API doc](http://docs.oracle.com/javase/7/docs/api/java/lang/Override.html)

> 如果使用此注解类型对方法进行注解，则编译器 **需要生成错误消息**，除非至少满足以下条件之一：
> 
> *   该方法确实覆盖或实现了在超类型中声明的方法。
> *   该方法的签名与 Object 中声明的任何公共方法的签名等效。

因此，要么您的方法仍然覆盖某些东西，要么您在 javac 和 eclipse 中都发现了一个错误，我对此表示怀疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:29:51.137

如果您使用的是 JDK 1.5，则忽略 @Override 注释。

看看[这个](https://stackoverflow.com/questions/3619036/override-annotation-in-jdk-1-6)（->也可以是eclipse首选项中的JDK Compliance设置为1.5）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:15:53.240

错误肯定会出现。

接口 A{ 无效 funA(); }

```
class Test implements A{
@Override
public void funA(){

}
@Override
public void B(){

}
} 
```

错误：Test 类型的方法 B() 必须覆盖或实现超类型方法

```
Sugessions: create B() in supertype A 
            remove Override annotation 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:15:59.657

在 Eclipse 中：

`Properties > Java Compiler > Errors/Warnings`

默认情况下，`@Override`注释处于下方`Annotations`并被忽略。

编辑：只需重新阅读问题。如果你有不必要的东西，你想得到警告，`@Override`而不是在你错过它时得到警告。

# fork - 如何分叉一个进程

> ID：10027477
> 
> 赞同：15
> 
> 时间：2012-04-05T11:11:07.853
> 
> 标签：fork, go

我需要帮助理解如何在 Go 中妖魔化一个过程。

```
package main

import (
   "fmt"
   "os"
)

func start() {
   var procAttr os.ProcAttr 
   procAttr.Files = []*os.File{nil, nil, nil}
   _, err := os.StartProcess("/Path/prog", nil, &procAttr)
   if err != nil {
       fmt.Printf("%v", err)
   }
}

func main () {
   start()
} 
```

如果您在命令行上启动此代码，程序将返回控制权，但仍与 cmd 连接。关闭 cmd 将关闭程序。

如何将它与 cmd 分离？添加：

```
procAttr.Sys.HideWindow = true 
```

导致此错误：“恐慌”到错误的内存指针

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T07:02:16.677

我在“golang-nuts”中询问，发现 Go 有一个链接选项：

```
go tool 8l -o output.exe -Hwindowsgui input.8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-29T14:07:12.300

这是一个假的守护进程；使用简单：[https ://github.com/icattlecoder/godaemon](https://github.com/icattlecoder/godaemon)

一个例子：

```
package main

import (
    _ "github.com/icattlecoder/godaemon"
    "log"
    "net/http"
)

func main() {
    mux := http.NewServeMux()
    mux.HandleFunc("/index", func(rw http.ResponseWriter, req *http.Request) {
        rw.Write([]byte("hello, golang!\n"))
    })
    log.Fatalln(http.ListenAndServe(":7070", mux))
} 
```

# asp.net-mvc - 使用 mvc 3 创建任何实体记录

> ID：10027478
> 
> 赞同：0
> 
> 时间：2012-04-05T11:11:08.623
> 
> 标签：asp.net-mvc, entity-framework-4

我正在尝试使用 entityframework 和 mvc3 在 sql server 2008 DB 上保存记录。

```
{
  using(entities store = new entities())
  {
    login log = new login() {
      Username=username,
      Thumbprint=thumbprint
    };
    store.login.AddObject(log);
    store.SaveChanges();//crashes on this line of code
  }
} 
```

代码崩溃并且错误是我无法在用户名列中保存 null。我的数据库表不允许 null 和 im 将值分配给日志实体对象（用户名）。如果您不明白我想说什么，请询问。

# database - 允许用户使用不超过 xx 字符的密码是什么意思？

> ID：10027481
> 
> 赞同：0
> 
> 时间：2012-04-05T11:11:19.127
> 
> 标签：database, security, passwords, usability

它更像是一个可用性问题，或者可能是数据库，甚至可能是安全性（考虑注入攻击），但是允许用户的密码不超过 xx 个字符是什么意思？这对我来说没有任何意义，因为更长的密码通常被认为更好，更难破解，而且有些用户使用密码保险箱，所以密码长度应该无关紧要。

我知道超过 20 个字符的密码很难记住，但如果你使用 diceware 或密码保险箱，你不会有任何问题。我真的不明白为什么有些网站说“您的密码需要在 5 到 8 个字符之间”...

密码也应该保存为hash，所以数据库中字段的长度是固定的，那么问题出在哪里呢？

我认为大多数密码必须是固定长度的网站甚至都没有使用任何散列方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:26:15.747

每当您看到密码选择的上限时，您就可以猜测他们想要将其存储为未散列的密码。这真的很糟糕。

密码“越长越好”，它们也应该由尽可能大的字母组成。这些差异在这里得到了很好的解释：[https ://www.grc.com/haystack.htm](https://www.grc.com/haystack.htm)

# google-docs-api - 是否可以阻止 Google App Engine 应用访问 Google Docs API

> ID：10027484
> 
> 赞同：1
> 
> 时间：2012-04-05T11:11:41.863
> 
> 标签：google-docs-api

我已经实现了一个 Google App Engine 应用程序，它将文档上传到 Google Docs 中的特定文件夹。一个月前，在 Google Docs 中查询特定文件夹时，我开始遇到响应时间问题（GdataClient.GetDocList、fetch-url 调用、Gdata 客户端中的截止日期已超过）。这导致很多任务在任务队列中排队。

当我看到这个时，我暂停了一段时间 - 大约 24 小时。当我重新启动队列时，几乎所有的 where 都再次上传了，除了 10 个文件/任务。

当我实现 GetDocList 调用时，我实现了重试/睡眠功能，以避免我在 .GetNextLink().href 循环期间遇到的有时间歇性的“DeadLineExceeded”。我知道这不是一个好的“云”设计。但是我被迫这样做以使其足够稳定以进行生产。对于每次睡眠，我都会延长等待时间，并且只重试 5 次。我最后一次等待大约 25 秒后重试。

我认为队列中的所有任务都重试了很多次（即使我已将任务限制为以串行模式运行，一次一个。最多每分钟 5 次）以至于 App Engine 应用程序被列入黑名单谷歌文档 API。

这会发生吗？

我需要做什么才能再次从同一个 App Engine 实例查询 Google Docs Api？

我是否需要将 App Engine 应用迁移到新的应用 ID？

当我从我的开发环境中尝试这个时，代码可以工作，它会查询文件夹结构并在时间限制内返回结果。

我要查询的文件夹结构相当大，这意味着我需要通过 .GetNextLink().href 获取它们。在我的开发环境中，文件夹结构包含的文件夹要少得多。

无论如何，这在生产 AppEngine 实例中已经运行了大约一年。但在 3 月 4 日至 5 日左右停止工作。

查询的用户帐户当前正在使用可用 205824 MB 的 7000 MB (3%)。

当我使用 dev-env 中的代码但使用完全不同的 Google Apps 域/app-id/google 帐户时，我无法重现该错误。

当我将最大结果更改为 1（而不是 100、50 或 20）时，我会间歇性地成功。但是由于最大结果为 1，我需要查询 1000 次，并且由于我只能连续获得最大 3 次成功，因此在我的指数回退退出之前，我永远不会得到我的整个结果集。结果集（我查询的文件夹包含 300 到 400 个文件夹（其中至少包含 2 - 6 个包含 pdf 文件的子文件夹）

我尝试过使用 max-result 2，然后每次都获取失败。如果我改回 max-result 1 ，那么它会连续进行一两次提取，但这还不够。因为我需要整个文件夹结构才能找到正确的文件夹来存储文件。

我已经从我的本地环境中尝试过这个 - 即从一个完全不同的 IP 地址，它仍然失败。这意味着应用引擎应用不会被阻止访问 google 文档。max-result 从 2 到 1 的变化也证明了这一点。

结论：Google Docs API 的缓慢返回时间一定是由于我正在循环的集合中的大量文件和集合。请记住，此集合包含大约 3500 Mb。这是一个问题吗？

日志：DocListUrl 从 = [https://docs.google.com/feeds/default/private/full/folder:XXXXXXX/contents?max-results=1](https://docs.google.com/feeds/default/private/full/folder:XXXXXXX/contents?max-results=1)获取条目。

重试 RetryGetDocList，等待 1 秒。
重试 RetryGetDocList，等待 1 秒。
重试 RetryGetDocList，等待 4 秒。
重试 RetryGetDocList，等待 9 秒。
重试 RetryGetDocList，等待 16 秒。
重试 RetryGetDocList，等待 25 秒。

ApplicationError：5
Traceback（最近一次调用最后一次）：文件“/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/_webapp25.py”，第 703 行，**调用中** handler.post(*groups) 文件“/base/data/home/apps/XXXX/prod-43.358023265943651014/DocsHandler.py”，第 418 行，发布成功 = uploader.Upload(blob_reader, fileToUpload.uploadSize, fileToUpload.MainFolder, fileToUpload.ruleTypeReadableId ,fileToUpload.rootFolderId,fileToUpload.salesforceLink,fileToUpload.rootFolder, fileToUpload.type_folder_name, fileToUpload.file_name, currentUser, client, logObj) File "/base/data/home/apps/XXXX/prod-43.358023265943651014/DocsClasses.py "，第 404 行，在上传集合 = GetAllEntries('https://docs.google.com/feeds/default/private/full/%s/contents?max-results=1' % (ruleTypeFolderResourceId), client) File" /base/data/home/apps/XXXX/prod-43.358023265943651014/DocsClasses.py”，第 351 行，在 GetAllEntries chunk = RetryGetDocList(client.GetDocList , chunk.GetNextLink().href) 文件“/base/data/home/apps/XXX/prod-43.358023265943651014/DocsClasses.py”，第 202 行，RetryGetDocList 返回 functionCall(uri) 文件“/base/data/home/apps/XXX /prod-43.358023265943651014/gdata/docs/client.py”，第 142 行，在 get_doclist auth_token=auth_token，**kwargs) 文件“/base/data/home/apps/XXXX/prod-43.358023265943651014/gdata/client.py” ，第 635 行，在 get_feed **kwargs) 文件“/base/data/home/apps/XXXXX/prod-43.358023265943651014/gdata/client.py”，第 265 行，在请求 uri=uri，auth_token=auth_token，http_request=http_request , **kwargs) 文件“/base/data/home/apps/XXXX/prod-43.358023265943651014/atom/client.py”，第 117 行，在请求中返回 self.http_client.request(http_request) 文件“/base/data/主页/应用程序/XXXXX/prod-43。358023265943651014/atom/http_core.py”，第 420 行，在请求 http_request.headers，http_request._body_parts）文件“/base/data/home/apps/XXXXX/prod-43.358023265943651014/atom/http_core.py”，第 497 行，在_http_request 返回 connection.getresponse() 文件“/base/python_runtime/python_dist/lib/python2.5/httplib.py”，第 206 行，在 getresponse 期限=self.timeout) 文件“/base/python_runtime/python_lib/versions/1 /google/appengine/api/urlfetch.py​​”，第 263 行，在 fetch 中返回 rpc.get_result() 文件“/base/python_runtime/python_lib/versions/1/google/appengine/api/apiproxy_stub_map.py”，第 592 行，在 get_result 中返回 self.__get_result_hook(self)358023265943651014/atom/http_core.py”，第 497 行，在 _http_request 返回 connection.getresponse() 文件中“/base/python_runtime/python_dist/lib/python2.5/httplib.py”，第 206 行，在 getresponse 截止日期=self.timeout ) 文件“/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py​​”，第 263 行，在 fetch 返回 rpc.get_result() 文件“/base/python_runtime/python_lib/versions/1/google /appengine/api/apiproxy_stub_map.py"，第 592 行，在 get_result 中返回 self.__get_result_hook(self)358023265943651014/atom/http_core.py”，第 497 行，在 _http_request 返回 connection.getresponse() 文件中“/base/python_runtime/python_dist/lib/python2.5/httplib.py”，第 206 行，在 getresponse 截止日期=self.timeout ) 文件“/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py​​”，第 263 行，在 fetch 返回 rpc.get_result() 文件“/base/python_runtime/python_lib/versions/1/google /appengine/api/apiproxy_stub_map.py"，第 592 行，在 get_result 中返回 self.__get_result_hook(self)/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py​​”，第 263 行，在 fetch 返回 rpc.get_result() 文件“/base/python_runtime/python_lib/versions/1/google/appengine/ api/apiproxy_stub_map.py"，第 592 行，在 get_result 中返回 self.__get_result_hook(self)/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py​​”，第 263 行，在 fetch 返回 rpc.get_result() 文件“/base/python_runtime/python_lib/versions/1/google/appengine/ api/apiproxy_stub_map.py"，第 592 行，在 get_result 中返回 self.__get_result_hook(self)

_get_fetch_result 中的文件“/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py​​”，第 371 行引发 DeadlineExceededError(str(err)) DeadlineExceededError: ApplicationError: 5

问候/詹斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:02:57.887

有时，来自 Google Documents List API 的响应会超过 App Engine HTTP 请求的截止日期。这可能是在 API 中返回的非常大的文档语料库的情况。

要解决此问题，请将`max-results`参数设置为小于`1000`.

[此外，使用指数退避](https://developers.google.com/google-apps/documents-list/#implementing_exponential_backoff)重试请求。

要解决上传失败的问题，请使用 App Engine 中的任务队列来完成上传，以及[使用 API](https://developers.google.com/google-apps/documents-list/#resuming_an_incomplete_upload)恢复上传。

您可以请求 App Engine 团队将您的应用程序的 HTTP 超时大小增加到允许此请求成功的大量秒数。但是，很少有团队在没有强烈需求的情况下批准这样的请求。

# java - Symbian 和 JAVA 的 AES 加密/解密

> ID：10027487
> 
> 赞同：1
> 
> 时间：2012-04-05T11:11:58.347
> 
> 标签：java, aes, symbian

我在 JAVA 和 Symbian 中都使用 AES 进行加密和解密。

JAVA - ISO10126d2Padding
symbian - CPaddingNone
适用于小字符串。
但是在尝试解密在 JAVA 中加密的 symbian 中的冗长字符串时，我无法解密整个字符串，在 16 字节得到错误值之后。有人对这个问题有想法吗？

```
plain text : the padding should be done at the end of that last block with random bytes
Encrypted in Java : 6889f21d0f7abbefe6a85d079aacf7d9df4978d9ae3a97ab069bca29e9ff95baee07c60e60777396e31a338ffb35b09f933c66491efc394a03699ea466c9f8ca1cb12af932caae1b72ea45f1f3424ed7
Decrypted in Symbian : 
the padding shou\x04íÒ\x7FjZß€ˆÍ}fîŒƒ±ºi\x1D·Ê\x1AøÍ&ï¢HßùÛsæl\f
\x18\x10ýÃmZû“\x15ÂþýX\t$>ž ... 
```

# encryption - 我有一个加密的 txt 文件和下面的加密代码。如何解密呢？

> ID：10027490
> 
> 赞同：0
> 
> 时间：2012-04-05T11:12:20.187
> 
> 标签：encryption

public string Encrypt(string plainText) { StringBuilder sb = new StringBuilder();

```
 foreach (char c in plainText) {
            if (Char.IsLetterOrDigit(c)) {
                int num = (int)c;
                num = ((num + 10) * 2) + 2;

                sb.AppendFormat("{0} ", num.ToString());
            }
            else if (c == ' ') {
                sb.Append("| ");
            }
            else if (c == '\n') {
                sb.AppendLine();
            }
        }

        return sb.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:46:04.143

加密代码使用公式`num = ((num + 10) * 2) + 2;`

反转就是`num = ((num - 2) / 2) - 10;`

现在将其从整数转换回字符。

您将需要分别识别密文中的空格和换行符。

# entity-framework-4.3 - EntityFramework Code First - 检查是否附加了实体

> ID：10027493
> 
> 赞同：42
> 
> 时间：2012-04-05T11:12:29.510
> 
> 标签：entity-framework-4.3

我正在尝试在 EntityFramework 4.3 Code First 中更新具有 FK 关系的实体。我尝试通过调用附加到相关实体： Entry(item).State = EntityState.Unchanged

我得到以下异常：*ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。*

我没有更新这些项目，也没有在我的主要实体上为它们提供 id 属性。是否有可能知道哪些实体已附加或不附加？

在此先感谢，拉杜

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-09-24T22:37:15.340

[你可以在这里](https://stackoverflow.com/a/6037277/177570)找到答案。

```
public bool Exists<T>(T entity) where T : class
{
    return this.Set<T>().Local.Any(e => e == entity);
} 
```

将该代码放入您的上下文中，或者您可以将其转换为类似的扩展。

```
public static bool Exists<TContext, TEntity>(this TContext context, TEntity entity)
    where TContext : DbContext
    where TEntity : class
{
    return context.Set<TEntity>().Local.Any(e => e == entity);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-27T16:58:24.870

您可以使用此方法：

```
 /// <summary>
    /// Determines whether the specified entity key is attached is attached.
    /// </summary>
    /// <param name="context">The context.</param>
    /// <param name="key">The key.</param>
    /// <returns>
    ///   <c>true</c> if the specified context is attached; otherwise, <c>false</c>.
    /// </returns>
    internal static bool IsAttached(this ObjectContext context, EntityKey key)
    {
        if (key == null)
        {
            throw new ArgumentNullException("key");
        }

        ObjectStateEntry entry;
        if (context.ObjectStateManager.TryGetObjectStateEntry(key, out entry))
        {
            return (entry.State != EntityState.Detached);
        }
        return false;
    } 
```

例如：

```
 if (!_objectContext.IsAttached(entity.EntityKey))
        {
            _objectContext.Attach(entity);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-10T02:13:39.633

如果您是从 EF Core 延迟加载场景到达这里的，在该场景中，导航属性通过 DbSet<>.Include() 子句填充到数据层中，而实体附加到 DbContext，然后该实体被分离并传递直到业务层，请考虑在您的 DbContext.OnConfiguring(DbContextOptionsBuilder optionsBuilder) 方法中添加类似的内容： `optionsBuilder.ConfigureWarnings(warn => warn.Ignore(CoreEventId.LazyLoadOnDisposedContextWarning));` 错误将被忽略并返回最初的 Include()d 值。

# javascript - 无法使用 jQuery 检索特定的 JSON 对象

> ID：10027495
> 
> 赞同：1
> 
> 时间：2012-04-05T11:12:36.173
> 
> 标签：javascript, jquery, json

我尝试使用 jQuery 从服务器检索 JSON 对象。此对象的某些属性是数组。当这些数组不为空时，我可以处理我的对象。但是当我检索这样一个 JSON 时：

```
{"Id":144,"Identifier":"4000011","ContractId":115,"ContractName":"Test4","Meters":[],"Scans":[]} 
```

其中“Meters”和“Scans”为空，jQuery 引发错误...我使用以下代码查询我的服务器：

```
 $("#test").click(function () {

        $.ajax({
            type: "GET",
            url: "/Gateway/GetDetails/144",
            data: {},
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data, textStatus, jqXHR) {

               ...

            },
            error: function (jqXHR, textStatus, errorThrown) { 
               ...
            }
    }); 
```

在错误处理程序中，我可以在参数“jqXHR”的 responseText 属性中看到我的 JSON 对象。你遇到过这个问题吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:22:12.920

您提供的 JSON 是有效的（由[JSON Lint](http://jsonlint.com/)工具确认）；您正在查询的服务器是否可能返回 HTTP 错误状态代码，或者服务器端发生内部错误。[您可以使用诸如Firebug](http://getfirebug.com/network)、[Chrome 开发者工具](http://code.google.com/chrome/devtools/docs/network.html)之类的调试代理来确认这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:09:11.163

我回答我自己的问题...首先我只使用 Internet Explorer 9 进行了测试；使用其他浏览器，一切都按预期工作。清除 Internet Explorer 缓存后，问题就消失了。

# php - 使用 javascript 重定向到网站的英国或爱尔兰版本

> ID：10027498
> 
> 赞同：0
> 
> 时间：2012-04-05T11:13:06.037
> 
> 标签：php, cookies, redirect, user-input, versions

我正在一个有英国和爱尔兰子文件夹的网站上工作。这两个站点都使用一个 CMS，其中有一个爱尔兰部分和英国部分。我想存储一个 cookie，其中包含他们从下拉列表中选择的网站版本

到目前为止，我的代码是 Index.html

```
<form id="region_select" name="region_select" action="/includes/region-val.php" method="post">
        <select id="region-picker" name="region-picker" onchange="this.form.submit();">
            <option>--- Please Select Your Region ---</option>
            <option value="IE" id="IE" name="set_region[IE]">Visit Irish Website</option>
            <option value="UK" id="UK" name="set_region[UK]">Visit UK Website</option>
        </select>
        <input type="submit" name="submit_region" value="Go!"/>
        </form> 
```

我的 region-val.php 代码是

```
 if (isset($_POST["submit_region"])) {
        $region = key($_POST["set_region"]);
        setcookie("region", $region, time() + 24 * 3600);
    }  

    if($_COOKIE["region"] == "UK"){
        header('Location:http://google.com');   
    }
    else{
        header('Location:http://yahoo.com');
    } 
```

到目前为止，它只重定向到网站的一个版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:30:25.137

我不明白你***为什么***在. 重要的是选择的名称。`<options>``<select>`

将表格更改为：

```
<form id="region_select" name="region_select" action="/includes/region-val.php" method="post">
  <select id="region-picker" name="region-picker" onchange="this.form.submit();">
    <option>--- Please Select Your Region ---</option>
    <option value="IE">Visit Irish Website</option>
    <option value="UK">Visit UK Website</option>
  </select>
  <input type="submit" name="submit_region" value="Go!"/>
</form> 
```

您给的名称`<select>`是`region-picker`- 所以它是您感兴趣的输入的值。PHP 应该如下所示：

```
if (isset($_POST["region_picker"])) {
    $region = $_POST["region_picker"]);
    // Maybe you should check here that the user has submitted a valid region
    setcookie("region", $region, time() + 24 * 3600);
}  

if($_COOKIE["region"] == "UK"){
    header('Location:http://google.com');   
}
else{
    header('Location:http://yahoo.com');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:27:37.010

设置 cookie 后，将页面重定向为当前请求。

```
 if (isset($_POST["submit_region"])) {
        $region = key($_POST["set_region"]);
        setcookie("region", $region, time() + 24 * 3600);
        // add code for redirect at current page without post vars
    } 
```

然后cookie将起作用。

注意：您可以在重定向后获取 cookie 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:40:42.387

在 PHP 中创建的 cookie（使用 setcookie()）不会立即填充到 $_COOKIES 数组中 - 仅从请求中添加元素。在运行时添加一个值可能是可行的——但我不会依赖这个。

此外，HTML 选择返回单个项目，而不是数组。

更好的解决方案是：

```
if (isset($_POST["set_region"])) {
    $region = $_POST["set_region"];
    setcookie("region", $region, time() + 24 * 3600);
}  

if($_COOKIE["region"] == "UK" || $region == "UK"){
    header('Location:http://google.com');   
}
else{
    header('Location:http://yahoo.com');
} 
```

或者使用 javascript 设置 cookie（但请注意，它的路径范围将由表单出现的 URL 的目录定义）。

# windows - powershell：在 Windows 7 机器上更改服务的启动类型

> ID：10027499
> 
> 赞同：2
> 
> 时间：2012-04-05T11:13:10.830
> 
> 标签：windows, powershell, service

我写了一个脚本来获取机器的服务，我想将 StartMode 镜像到另一台机器。我想不出如何实现后者：在远程机器上设置服务。这是我到目前为止写的一个脚本：

```
#List of Issue of services 
$NamesOfIssueServices = "Browser", "Dhcp", "Dnscache", "dwmrcs", "iphlpsvc", "LanmanServer", "LanmanWorkstation", "MMCSS", "MpsSvc", "Netlogon", "Netman", "netprofm", "NlaSvc", "nsi", "p2pimsvc","PNRPsvc","PolicyAgent", "SessionEnv", "stisvc", "W32Time", "WinHttpAutoProxySvc", "WinRM"

#get all services 
$W32Services = Get-WmiObject Win32_Service

#filter wanted services 
$IssueServices = $W32Services | Where-Object {$NamesOfIssueServices -contains $_.name}

#display wanted services
$IssueServices | Sort-Object name | ft Name, DisplayName, State, StartMode, StartName 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:48:05.347

如果您使用的是 PowerShell v2.0，您可以使用[Set-Service](http://technet.microsoft.com/en-us/library/dd315324.aspx) cmdlet 轻松完成此操作：

```
foreach ($service in $issueServices) {
    $startMode = $service.StartMode

    if ($service.StartMode -eq "Auto") {
        $startMode = "Automatic"
    } 

    Set-Service -ComputerName TheRemoteMachine -Name $service.Name -StartupType $startMode
} 
```

条件语句是由于从属性获得的值与参数期望的参数之间的*不兼容*造成的。`"Auto"``StartMode``"Automatic"``-StartupType`

# php - 有人可以帮我在 PHP 中设置 OAuth 服务器和客户端实现吗？

> ID：10027501
> 
> 赞同：0
> 
> 时间：2012-04-05T11:13:24.550
> 
> 标签：php, oauth

即使经过大量谷歌搜索，我也只能找到非常难以理解的非常基本和原始的示例。有人可以帮我在 PHP 中设置 OAuth 服务器和客户端实现吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T19:21:34.873

我在 PHP 中为 Google oAuth 创建了一个简单的类，可[在此处获得](http://www.silviosilva.com/article-images/oauth2/OAuthGoogle.zip)

我还在其他项目上实现了其他 Facebook 和 Microsoft oAuth，它们很相似，但工作方式并不完全相同。我记得的区别是：

*   有些要求通过 POST 发送请求，另一些则通过 GET
*   Facebook 不会以 JSON 格式发送所有回复

[您可以在这里](http://www.silviosilva.com/article/oauth2)阅读我的小教程，该网站本身使用该类和 oAuth 登录 :)

# c++ - C++构造函数理解

> ID：10027503
> 
> 赞同：4
> 
> 时间：2012-04-05T11:13:27.450
> 
> 标签：c++, constructor, initialization, initialization-list

考虑这个构造函数：`Packet() : bits_(0), datalen_(0), next_(0) {}`

注意`bits_`,`datalen_`和`next_`是 Packet 类中的字段，定义如下：

```
u_char* bits_;
u_int datalen_;
Packet* next_; 
```

构造函数的这一部分是什么意思？`bits_(0), datalen_(0), next_(0)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T11:14:50.963

这是一个初始化列表，它将值设置为指定的值。

```
Packet() : bits_(0), datalen_(0), next_(0)
{
    assert( bits_ == 0 );
    assert( datalen_ == 0);
    assert( next_ == 0);
}
//...
Packet()
{
    //bits_ , datalen_, next_ uninitialized here
} 
```

某些成员（`const`没有默认构造函数的成员或用户定义的类成员）无法在初始化列表之外进行初始化：

```
class A
{
    const int x;
    A() { x = 0; }  //illegal
};

class A
{
    const int x;
    A() : x(0) { }  //legal
}; 
```

还值得一提的是，使用这种技术不会发生双重初始化：

```
class B
{
public:
   B() { cout << "default "; }
   B(int) { cout << "b"; }
};

class A
{
   B b;
   A() { b = B(1); }   // b is initialized twice - output "default b"
   A() : b(1) { }      // b initialized only once - output "b"
}; 
```

这是初始化成员的首选方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T11:23:09.133

这意味着首先**bits_**，然后**datalen_**和最后**next_**将收到 0 的值。即以下 2 个代码片段是完全等效的：

```
Packet()
     : bits_(0)
     , datalen_0)
     , next_(0)
{
} 
```

和这个：

```
Packet()
{
    bits_ = 0;
    datalen_ = 0;
    next_ = 0;
} 
```

不过要小心。初始化顺序由成员声明顺序决定。即以下代码将无法按预期工作：

```
struct Packet
{
    int first;
    int second;

    Packet()
        : second(0)
        , first(second)
    {
    }
}; 
```

它将等同于：

```
struct Packet
{
    int first;
    int second;

    Packet()
    {
        first = second;
    second = 0;
    }
}; 
```

所以**第二个**会收到 0，但**第一个**不会

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T11:18:42.657

它被称为初始化列表，它使用括号中指定的值初始化字段。以下将达到相同的最终效果：

```
Packet()
{
    bits_ = nullptr;  // or 0 or NULL pre-C++11
    datalen_ = 0;
    next_ = nullptr;
} 
```

不同之处在于，在我的示例中，您正在执行赋值，这些字段已经由它们的默认构造函数构造。

对于没有默认构造函数的用户定义类型，初始化列表是唯一的方法，因为您需要为构造函数提供一些参数。

# jquery - jQuery UI 滑块：覆盖范围图像

> ID：10027505
> 
> 赞同：1
> 
> 时间：2012-04-05T11:13:31.003
> 
> 标签：jquery, css, jquery-ui, jquery-ui-slider

我正在构建一个垂直范围滑块：

![在此处输入图像描述](../Images/b4305f74cbba361ac0cc2553200679d9.png)

这会很棒。

但是，使用 jQuery UI 1.8 实现，我只走了这么远：

![在此处输入图像描述](../Images/2a7a4ff15b5cf0a08571a227788dd915.png)

我已经将滑块包裹在一个容器中，该容器具有`padding-top`并`padding-bottom`保持滑块的范围元素就位。

没有容器，范围将与背景重叠：

![在此处输入图像描述](../Images/20cb901f5b612df1e8e7fb19d7edf3e0.png)

有什么好的解决办法吗？

如有必要，这里有一些代码：

LESS代码：

```
 /*
     * Center the slider by wrapping it in a container
     */
    .slider-container {
        text-align: center;

        /*
         * Another container that holds the actual background of the slider,
         * with padding to make sure the handle doesn't go outside of the background.
         */
        .slider-bg {
            background: transparent url('/static/images/slider_bg.png') 0% 0%;
            height: 235px;
            width: 28px;
            padding-top: 20px;
            padding-bottom: 7px;
            margin: 0 auto;

            /*
             * The actual element holding the slide handler
             */
            .ui-slider {
                height: 234px;
                width: 28px;
                background: none;

                // Overrides
                .border-radius(0 0 0 0);
                border: 0;

                .ui-slider-handle {
                    width: 28px;
                    height: 29px;

                    background: transparent url('/static/images/slider_handle.png') 0% 0%;

                    // Overrides
                    left: 0;
                    .border-radius(0 0 0 0);
                    border: 0;
                }

                .ui-slider-range {
                    width: 28px;
                    background: transparent url('/static/images/slider_range.png') 0% 0%;
                    padding-bottom: 13px;
                }
            }
        }
    } 
```

JS：

```
$('div.slider').slider({
    orientation: 'vertical',
    animate: 'true',
    range: 'min',
    slide: function (event, ui) {
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:47:58.973

这样做：

```
/* Corner radius */
.ui-corner-all, .ui-corner-top, .ui-corner-left, .ui-corner-tl { -moz-border-radius-topleft: 14px; -webkit-border-top-left-radius: 14px; -khtml-border-top-left-radius: 14px; border-top-left-radius: 14px; }
.ui-corner-all, .ui-corner-top, .ui-corner-right, .ui-corner-tr { -moz-border-radius-topright: 14px; -webkit-border-top-right-radius: 14px; -khtml-border-top-right-radius: 14px; border-top-right-radius: 14px; }
.ui-corner-all, .ui-corner-bottom, .ui-corner-left, .ui-corner-bl { -moz-border-radius-bottomleft: 14px; -webkit-border-bottom-left-radius: 14px; -khtml-border-bottom-left-radius: 14px; border-bottom-left-radius: 14px; }
.ui-corner-all, .ui-corner-bottom, .ui-corner-right, .ui-corner-br { -moz-border-radius-bottomright: 14px; -webkit-border-bottom-right-radius: 14px; -khtml-border-bottom-right-radius: 14px; border-bottom-right-radius: 14px; } 
```

和 UI 小部件标题：

```
.ui-widget-header
{
    border: 1px solid #dddddd;
    background: #33CCFF url(images/ui-bg_highlight-soft_50_dddddd_1x100.png) repeat-x 50% 50%;
    color: #444444;
    font-weight: bold;
    -moz-border-radius: 14px;
    border-radius: 14px;
} 
```

小部件内容：

```
.ui-widget-content {background: #ffffff url(images/ui-bg_flat_75_ffffff_40x100.png) 50% 50% repeat-x; color: #444444; } 
```

这是给你的[演示](http://jsfiddle.net/zwsJD/26/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T13:34:22.750

```
NameError: .border-radius is undefined on line 27, column 17:

26                 
27                 .border-radius(0 0 0 0);
28                 border: 0; 
```

希望能帮助到你

# php - Rails，获取命令行返回的数据

> ID：10027506
> 
> 赞同：1
> 
> 时间：2012-04-05T11:13:35.977
> 
> 标签：php, ruby-on-rails, ruby, command-line

在我之前的问题中，我在通过命令行将参数发送到 PHP 文件时遇到了问题。PHP 正在发回一个 json，但我只收到 true 或 false。

上一个问题： [Rails、PHP 和参数](https://stackoverflow.com/questions/10026109/rails-php-and-parameters/10026237#10026237)

新问题：Ruby.rb

```
data = system('php public/jira.php param') 
puts data 
```

PHP

```
$output = array(
    "total" => $total
);

echo json_encode($output); 
```

**编辑：**

回答：

数据 = JSON.parse(数据)

放数据['total'] #5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:32:08.247

system() will return TrueClass or FalseClass and display output, try it on console .

I suggest , You can use the open method on any URL to call it, so you can call your PHP script using that:

```
require 'open-uri'

open('YOUR PHP SCRIPT PATH WITH PARAMETER') do |response|
  content = response.read
end 
```

Or below link will help you .

[6 Ways to Run Shell Commands in Ruby](http://tech.natemurray.com/2007/03/ruby-shell-commands.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:20:44.073

看到这个[答案](https://stackoverflow.com/a/1563625/84631)。

基本上你会想要使用：

```
data = `php public/jira.php param`
data JSON.parse(data)
puts data['total'] 
```

代替：

```
data = system('php public/jira.php param') 
puts data 
```

# google-chrome - 想法：基于环境的条件Chrome主题

> ID：10027508
> 
> 赞同：14
> 
> 时间：2012-04-05T11:13:47.040
> 
> 标签：google-chrome, google-chrome-extension, environment-variables, google-chrome-devtools, google-chrome-theme

作为一名 Web 开发人员，我一直在不同环境（本地、登台、测试、生产）中开展项目。我主要从事 Drupal 项目。我无法告诉您仅通过浏览该站点就将我从本地引导到生产的次数。然后不小心更改了实际上只应该在我的本地环境中更改的生产设置。

所以这里有一个想法：根据站点的子域改变颜色的 Chrome 主题。

例如：在**local.mysite.com***上，浏览器 chrome 应为绿色，在staging.mysite.com *****上应为蓝色，而在**mysite.com***上，颜色应为标准铬灰色。

对于在不同环境中工作的许多人来说，这可以避免很多混乱。不仅适用于开发人员，也适用于“内容”人员。

可悲的是，我不知道如何用这种行为编写 Chrome 主题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T14:22:57.607

主题不是动态的，因此解决方案并不简单。
可以使用[管理 API](http://code.google.com/chrome/extensions/management.html)创建功能。至少需要三个扩展：

*   切换主题的主要扩展。
*   主题 #1、主题 #2 等（每个附加主题的额外扩展）。

## 如何

1.  创建主题 - 请参阅[Chrome 主题文档](http://code.google.com/chrome/extensions/themes.html)。
2.  绑定一个[`chrome.tabs.onUpdated`](http://code.google.com/chrome/extensions/tabs.html#event-onUpdated)事件以侦听选项卡更改，并可能将已知“主题选项卡”的状态保存在哈希中（通过 tabId）。当Tab的URI不再使用`delete`操作员时，请不要忘记删除标签。
3.  [使用背景脚本](http://code.google.com/chrome/extensions/background_pages.html)创建另一个扩展。
    添加^(**警告：请参阅下面**)的事件，以侦听选项卡更改。这个事件被传递了一个 windowId 和 tabId。使用在步骤 2 中创建的散列来检查主题是否必须更改。[`chrome.tabs.onActivated`](http://code.google.com/chrome/extensions/tabs.html#event-onActivated)
***   如果 URL 与特定模式匹配，则使用该[`chrome.management.setEnabled`](http://code.google.com/chrome/extensions/management.html#method-setEnabled)方法激活新主题。**

 **步骤 3-4 的替代方法：使用[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)调用背景页面的方法[。](http://code.google.com/chrome/extensions/messaging.html)然后可以在[清单文件](http://code.google.com/chrome/extensions/content_scripts.html#registration)的,部分中设置[匹配模式。](http://code.google.com/chrome/extensions/match_patterns.html)`"content_scripts"``"matches"`

^(**警告**)： [Chrome 18 之前不支持](https://stackoverflow.com/a/9954420/938089?chrome-tabs-onactivated-addlistener-throws-an-undefined-typeerror)**`onActivated`**该事件。在 Chrome 18 之前，该事件被称为.**`onActiveChanged`**

步骤 2-4 中描述的扩展需要以下[权限](http://code.google.com/chrome/extensions/manifest.html#permissions)：

*   [管理](http://code.google.com/chrome/extensions/management.html)
*   [标签](http://code.google.com/chrome/extensions/tabs.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-15T17:42:05.443

我的解决方案是使用 PHP 来检测我连接到的服务器，然后使用特定颜色更新我的应用程序（WordPress、Drupal 等）的管理屏幕。您还可以在本地和临时站点的顶部显示一个颜色条。

这是我为 WordPress 管理屏幕所做的：

```
// determine if this is development, staging or production environment
if (strpos(home_url(),'http://localhost') !== false)   
{
    define('MY_ENVIRONMENT', 'DEV');
}
else if (strpos(home_url(),'<enter staging URL here>') !== false)
{
    define('MY_ENVIRONMENT', 'STAGE');
}
else
{
    define('MY_ENVIRONMENT', 'PROD');
} 
```

然后我用它在 WordPress 管理屏幕中显示特定颜色：

```
function change_admin_color($result) {
  return (MY_ENVIRONMENT== 'PROD' ? 'sunrise' : (MY_ENVIRONMENT== 'STAGE' ? 'ocean' : 'fresh'));
}
add_filter('get_user_option_admin_color','change_admin_color'); 
```**

# javascript - jQuery：将参数传递给不起作用的函数

> ID：10027512
> 
> 赞同：0
> 
> 时间：2012-04-05T11:14:17.130
> 
> 标签：javascript, jquery, dom

我在 jQuery 中将参数传递给我的简单函数时遇到问题：

当函数直接附加到元素时，一切正常。

```
 $companyNameInputs.bind('blur keyup',function(){
    if ($(this).hasClass('required')) {
        if (this.value == ''){
            $(this).addClass('inputError');
        }else {
            $(this).removeClass('inputError');
        }
    }
}); 
```

但是当我想将这个简单的检查声明为一个不同的函数时它不起作用：

这是我的功能：

```
 var standardCheck = function($param){
    $param.addClass('inputError');
    if ($param.hasClass('required')) {
        if ($.trim($param).value == ''){
            $param.addClass('inputError');
        }else {
            $param.removeClass('inputError');
        }
    }
}; 
```

这就是我所说的：

```
 $companyNameInputs.bind('blur keyup',function(){
    standardCheck($(this));
}); 
```

变量声明：

```
 var $companyNameInputs = $("#companyName") 
```

和 HTML：

```
 <div>
     <p>
            <input class="text_input" type="text" id="companyName" name="companyName" value="" />
     </p>   
 </div> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:17:19.293

由于 param 是一个 jQuery 容器，您必须调用`.val()`并修剪它的输出：

```
 if ($.trim($param.val()) == ''){ 
```

或者获取对应的 DOM 元素及其 value 属性。

```
 if ($.trim($param[0].value) == ''){ 
```

# jquery - jQuery绑定方法

> ID：10027514
> 
> 赞同：0
> 
> 时间：2012-04-05T11:14:19.417
> 
> 标签：jquery, html

在我的一个 HTML 页面中，在单击如下按钮时动态加载一些文件字段

```
$('#add').click(function(){

$('#files').append('<input type="file" class="myfile" name="myfile" />');

}); 
```

我的问题是如何将新添加的元素“绑定”到 HTML 页面，以便我可以访问

```
$('.myfile').change(function(){
// Code Here
}); 
```

我问这个是因为

```
$('.myfile').live('change',function(){
// Code here
}); 
```

不适用于所有浏览器，尤其是 IE

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:24:02.230

使用 jQuery `.on()`。`.live()`已弃用。

```
jQuery(document).on('change', '.myfile', function(){
       alert("it works!");
   }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:25:36.207

```
$('#add').click(function(){
  var item = $('<input type="file" class="myfile" name="myfile" />').change(function(){
    alert('TEST');
  });
  $('#files').append(item);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T11:16:37.863

您应该[`.on()`](http://api.jquery.com/on/)在使用 jQuery 1.7+ 或[`.delegate()`](http://api.jquery.com/delegate/)更低版本时使用。

[http://jsperf.com/jquery-live-vs-delegate-vs-on](http://jsperf.com/jquery-live-vs-delegate-vs-on)

PS我们在谈论什么版本的IE，因为`.live()`应该可以工作（虽然很慢）。

**更新**

演示`.delegate()`：http: [//jsfiddle.net/PeeHaa/zqbBX/](http://jsfiddle.net/PeeHaa/zqbBX/)
演示：http `.on()`: [//jsfiddle.net/PeeHaa/ddJrs/](http://jsfiddle.net/PeeHaa/ddJrs/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T11:19:42.373

在使用 IE 时尝试 onchange 事件

# javascript - Spotify - 等待动画口吃

> ID：10027516
> 
> 赞同：0
> 
> 时间：2012-04-05T11:14:23.167
> 
> 标签：javascript, gif, spotify

我目前正在尝试在我的 spotify 应用程序中获得流畅的等待动画。但是我的 gif 只是在一次迭代后停止（但在我的 chrome 中它没有），并且使用 javascript 计时器对其进行动画处理非常顺利。

我该如何解决？

# opencv - 减法框架opencv

> ID：10027517
> 
> 赞同：1
> 
> 时间：2012-04-05T11:14:36.147
> 
> 标签：opencv, background-subtraction

嘿，我试图在当前帧与前一帧之间进行减法运算，（附加的代码）代码正在运行，但我得到错误和灰色窗口而没有结果我在命令提示符下得到的错误：

编译器未对齐堆栈变量。Libavcodec 已被错误编译，可能非常缓慢或崩溃。这不是 libavcodec 中的错误，而是编译器中的错误。您可以尝试使用 gcc >= 4.2 重新编译。不要向 FFmpeg 开发人员报告崩溃。OpenCV 错误：断言失败 (src1.size() == dst.size() && src1.type() == dst.type()) 在未知函数中，文件 ........\ocv\opencv\ src\cxcore\cxarithm.cpp ，第 1563 行。

有人有想法吗？请你的帮助！谢谢你

```
int main()  
{  

int key = 0; 

 CvCapture* capture = cvCaptureFromAVI( "macroblock.mpg" ); 
 IplImage* frame = cvQueryFrame( capture );
 IplImage* currframe = cvCreateImage(cvGetSize(frame),IPL_DEPTH_8U,1);
 IplImage* destframe = cvCreateImage(cvGetSize(frame),IPL_DEPTH_8U,1);

    if ( !capture ) 

{  
    fprintf( stderr, "Cannot open AVI!\n" );  
    return 1;  
    }

  int fps = ( int )cvGetCaptureProperty( capture, CV_CAP_PROP_FPS );

  cvNamedWindow( "dest", CV_WINDOW_AUTOSIZE );

  while( key != 'x' )
      {
          frame = cvQueryFrame( capture );
     currframe = cvCloneImage( frame );// copy frame to current
     frame = cvQueryFrame( capture );// grab frame
   cvSub(frame,currframe,destframe);// subtraction between the last frame to cur

          if(key==27 )break;
          cvShowImage( "dest",destframe);
           key = cvWaitKey( 1000 / fps );
           }  
       cvDestroyWindow( "dest" );
       cvReleaseCapture( &capture );
       return 0; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:33:13.427

The problem is here

```
IplImage* currframe = cvCreateImage(cvGetSize(frame),IPL_DEPTH_8U,1);
IplImage* destframe = cvCreateImage(cvGetSize(frame),IPL_DEPTH_8U,1); 
```

What you are doing is that you are reading off an mpeg that has 3 channels per frame. Now when you do the subtraction, you subtract a 3 channel frame from a 1 channel frame. This WILL cause problems. Try setting the number of channels to 3\. And see if it works

```
IplImage* currframe = cvCreateImage(cvGetSize(frame),IPL_DEPTH_8U,3);
IplImage* destframe = cvCreateImage(cvGetSize(frame),IPL_DEPTH_8U,3); 
```

To be sure, check the number of channels for the queried image, the cloned image. And since you are pushing the final image into a destination image of 1 channel. There you are corrupting the data. If no exception is thrown/caught at any place.

```
OpenCV Error: Assertion failed (src1.size() == dst.size() && src1.type() == dst. type()) 
```

Assertion failed seems to be a clear indicator of what I have explained.

# php - 谷歌标记放置

> ID：10027519
> 
> 赞同：0
> 
> 时间：2012-04-05T11:14:43.187
> 
> 标签：php, javascript, google-maps-api-3

我目前有一些代码，当您按下提交按钮时，应根据下拉列表框中的值在地图上放置一个标记。我已经做到了，下拉框中的值将通过 PHP 代码的 GET 表单方法进入 URL，并且还将通过参数将值传递给 javascript 函数。

我遇到的问题是我必须按两次提交按钮才能使标记出现在地图上。这不太理想，我正在寻找一些帮助来尝试解决这个问题。谢谢。

这是javascript函数代码：

```
function placeMarker(address) 
        {       
            // ... Set up map code here

            var map = new google.maps.Map(document.getElementById("universityMap"), myOptions);

            <?php
                $uniname = $_GET['uninames'];       

                //Get the Uni code according to the uni name
                $queryUniID = $mysqli->prepare("SELECT IdCode FROM universityid WHERE UniName = ?");
                $queryUniID->bind_param('s', $uniname);
                $queryUniID->execute();
                $queryUniID->bind_result($unicode);
                $queryUniID->fetch();
                $queryUniID->close();

                //Load the question data into relevant variables
                $queryQuestions = $mysqli->prepare("SELECT QuestionNo, Answered1, Answered2, Answered3, Answered4, Answered5 FROM nssdata WHERE UniID = ?");
            ?>

            address = address + ", UK";
            geocoder.geocode({'address': address}, function(results, status) 
            {
                if (status == google.maps.GeocoderStatus.OK) 
                {
                    marker = new google.maps.Marker(
                    {
                        map: map,
                        position: results[0].geometry.location,
                        title: address, 
                        draggable: false
                    });
                }
                else 
                {
                    alert(status);
                }
            });
        } 
```

这是我的html表单：

```
 <form action="#" onsubmit="placeMarker(this.uninames.value)" method="get"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:15:44.033

如果您的值都在适当的范围内，这实际上应该有效。在测试它的简化版本时，我可以输入一个地址，单击提交，标记就会显示在它们应该在的位置。

关于为什么在看到结果之前单击两次，我有一些理论。

(1)**查找延迟**：确保跟踪地理编码器状态并给它足够的时间来执行。

(2)**故障**：在某些地图渲染器中，您有时需要循环地图以获取标记。例如，这组连续调用：`marker.setMap( null ); marker.setMap( map );`将隐藏/显示一个标记，有时会取消显示。

(3)**提交中断**：如果接口比你说的更复杂并且可能干扰，你的表单提交（#）可能需要阻止提交。换句话说，您必须在单击提交后阻止浏览器转到# 地址，这样您才能让 JavaScript/ajax 完成它的工作。

这是表格的简化版本；注意**return(false)**部分 - 它防止浏览器地址更改为 #。

```
<form action="#" onsubmit="placeMarker('adr');return( false );" method="get">
    <input type="text" id="id_address" />
    <input type="submit" />
</form> 
```

请注意，我将此地址简化为文本；在我的实际测试中，我以这种方式发送数据：

`placeMarker(document.getElementById('id_address').value);`

# mysql - MySQL - 选择关系数据避免左连接的最快方法

> ID：10027522
> 
> 赞同：2
> 
> 时间：2012-04-05T11:14:54.190
> 
> 标签：mysql, performance, select, join

我目前有一个查询，它从两个表中选择指标数据，同时让项目从另外两个表中查询（一个是拥有的项目，另一个是用户有权访问的项目）。

```
SELECT v.`projectID`,
(SELECT COUNT(m.`session`) 
    FROM `metricData` m
    WHERE m.`projectID` = v.`projectID`) AS `sessions`,
(SELECT COUNT(pb.`interact`)
    FROM `interactionData` pb WHERE pb.`projectID` = v.`projectID` GROUP BY pb.`projectID`) AS `interactions`
FROM `medias` v
LEFT JOIN `projectsExt` pa ON v.`projectsExtID` = pa.`projectsExtID`
WHERE (pa.`user` = '1' OR v.`ownerUser` = '1')
GROUP BY v.`projectID` 
```

时间太长了，1-2秒。这显然是多左连接场景。但是，我有一些想法可以提高速度，并且想知道这些想法原则上是什么。我是否：-

*   尝试在查询中选择列表，然后获取数据，而不是进行连接。不知道这将如何工作。
*   在单独的查询中进行选择以获取 projectID，然后在每个 projectID 上运行查询。这可能会导致成百上千的请求，但可能更适合处理？
*   其他想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T14:31:42.287

这里有两个问题：

1.  我怎样才能在不到 2 秒的时间内得到结果
2.  我怎样才能避免左连接。

要正确回答＃1，必须有更多信息。技术信息，例如这个特定查询的解释计划是一个好的开始。如果我们有您访问的所有表的 SHOW CREATE TABLE 以及它们包含的行数，那就更好了。

但我也很欣赏更多功能信息：您要回答的问题到底是什么？现在，您似乎正在查看两组不同的媒体：

1.  要么projectExt中没有匹配的行，在这种情况下medias.ownerUser必须等于'1'（'1'应该是一个字符串btw吗？）
2.  或者 projectsExt 中只有一个数学行，projectExt.user 必须等于 '1' （'1' 应该是一个字符串 btw 吗？）

由于缺乏足够的信息来回答＃1，我可以回答＃2 - “如何避免左连接”。答案是：写出两组的 UNION，一组匹配，另一组不匹配。

```
SELECT v.`projectID`
,      (
       SELECT COUNT(m.`session`) 
       FROM `metricData` m
       WHERE m.`projectID` = v.`projectID`
       ) AS `sessions`
,      (
       SELECT COUNT(pb.`interact`)
       FROM `interactionData` pb
       WHERE pb.`projectID` = v.`projectID`
       GROUP BY pb.`projectID`
) AS `interactions`
FROM ( 
    SELECT      v.projectID
    FROM medias 
    WHERE ownerUser = '1'
    GROUP BY projectID
    UNION ALL
    SELECT      v.projectID
    FROM medias v
    INNER JOIN projectsExt pa
    ON         v.projectsExtID = pa.projectsExtID
    WHERE      v.ownerUser != '1'
    AND        pa.user = '1'
    GROUP BY v.`projectID
) v 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:00:43.973

相反，您是否尝试过将所有内容重构为左连接？看到你总是在同一个领域分组，这应该不是问题。试试这个并发布一个`EXPLAIN`看看瓶颈是什么。

子选择的性能不如连接，因为引擎可以将连接优化到更高的程度。事实上，子选择通常会在可能的情况下由引擎重写为连接。

根据经验，拆分查询没有任何好处，您获得的只是开销和混淆优化器。与往常一样，这条规则也有例外，但在您完成了传统上可以做的事情并且知道您热衷于这种方法之后，它们就会发挥作用。

# android - android.os.networkonmainthreadexception Http 请求

> ID：10027524
> 
> 赞同：0
> 
> 时间：2012-04-05T11:15:00.110
> 
> 标签：android, xmlhttprequest

嗨，我即将执行 HTTP 请求以使用 wampserver 将一些数据添加到本地数据库，所以我在该按钮中创建了一个按钮，我将执行该操作，但问题是我无法连接到数据库！！！

这是吐司**“android.os.networkonmainthreadexception”上的消息apperas**

这是我的代码---> [http://pastebin.com/TsQ7NbNm](http://pastebin.com/TsQ7NbNm)

```
 ============================ 
```

我是 Android 编程新手，所以请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:20:27.753

您不能在您的 UI 线程上发出 http 请求。考虑使用 AsyncTask 或其他异步调用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:52:59.517

在 API 级别 10 之前，可以在 UI 线程上发出 http 请求。但是从 API-11 开始，任何需要很长时间才能完成的任务都必须在后台任务上完成。这背后的原因是任何在 UI 线程上花费 5 秒或更长时间的任务，然后是 ANR（应用程序无响应），即强制关闭发生。为此，我们创建了一些后台线程或简单地使用 AsyncTask。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:42:48.227

如果您想在服务器上发布数据，那么您需要为发布数据精心设计服务器。最近我的服务器配置我使用此代码发布数据并且执行良好。

```
Button send = (Button) findViewById(R.id.send_sms);        
    send.setOnClickListener(this);

public void onClick(View v) 
 {
       switch (v.getId()) 
       {

       case R.id.send_sms:

               try {
                    HttpClient client = new DefaultHttpClient();  
                    String postURL = "http://10.0.2.2/folder/saver.php";
                    HttpPost post = new HttpPost(postURL); 
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair("cell", "+8801899999"));
                        params.add(new BasicNameValuePair("pin", "1234"));
                        params.add(new BasicNameValuePair("msg", "hi!"));
                        UrlEncodedFormEntity ent = new UrlEncodedFormEntity(params,HTTP.UTF_8);
                        post.setEntity(ent);
                        HttpResponse responsePOST = client.execute(post);  
                        HttpEntity resEntity = responsePOST.getEntity();  
                        if (resEntity != null) {
                            showAlert(EntityUtils.toString(resEntity));
                            //Log.i("RESPONSE",EntityUtils.toString(resEntity));
                        }
                } catch (Exception e) {
                    e.printStackTrace();
                }

           break;

       }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T14:04:24.807

你可以试试这种方式。如果你的服务器有密码，那就给它。

```
<?php
mysql_connect("localhost","root","");
mysql_select_db("test");

$valeur1=$_REQUEST['valeur1'];
$valeur2=$_REQUEST['valeur2'];

$req=mysql_query("insert into testapp (valeur1,valeur2) values('$valeur1','$valeur2')");
if($req)
echo "ok";
else
echo "erreur";
;
?> 
```

# javascript - 关于如何在 phonegap 中设置 sqlite DB 的说明

> ID：10027526
> 
> 赞同：0
> 
> 时间：2012-04-05T11:15:07.047
> 
> 标签：javascript, sqlite, cordova

因此，我使用此页面中的指南在我的电话间隙项目中创建了一个 SQLite DB：http: [//docs.phonegap.com/en/1.5.0/phonegap_storage_storage.md.html#Storage](http://docs.phonegap.com/en/1.5.0/phonegap_storage_storage.md.html#Storage)

关于用数据填充数据库的函数，我只有一个问题。

```
 function populateDB(tx) {
      tx.executeSql('DROP TABLE IF EXISTS DEMO');
      tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
      tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
      tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
  } 
```

在这个函数的顶部，它会删除表 DEMO，然后在每次我们运行应用程序时再次创建。这意味着它将创建一个新表并每次填充它，因为在上面的句子中删除表时该表被删除？！？

每次打开应用程序时删除和添加数据有什么意义，这不会给设备带来不必要的工作吗？难道不能只删除“DROP TABLE IF EXISTS DEMO”而只使用“DROP TABLE IF EXISTS DEMO”吗？

如果我不在顶部“删除表”，这是否意味着它每次都会添加复制数据？那么如果表已经存在，我需要一个 if 句或其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:57:23.960

这只是一个例子，并不意味着做任何聪明甚至合乎逻辑的事情。您应该能够在没有任何准备的情况下运行它，这就是它的作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T23:27:14.583

我一直使用类似的东西。在开发过程中，您提供的代码允许从头开始对用户进行测试。然后，当准备好测试返回用户时，我会像这样注释掉第二行：

```
function populateDB(tx) {
    //tx.executeSql('DROP TABLE IF EXISTS DEMO');   // Uncomment to test from scratch, comment for production!
    tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
    tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
    tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
} 
```

我从不删除该行，我只是删除或插入 // 作为在两种测试模式之间来回切换的快速而肮脏的方式。对于生产，我会留在注释掉的行中，但如果您愿意，可以将其删除。

# mysql - MYSQL：子查询中“顶级查询”中的字段未知

> ID：10027527
> 
> 赞同：2
> 
> 时间：2012-04-05T11:15:16.913
> 
> 标签：mysql

我有一个构建报告的长 mysql 查询，我遇到的问题是顶级字段“a.id”只有一个子查询是未知的，这个查询是从“选择别名”中选择的。我在下面的评论（突出显示）之间设置了违规部分。如何获得子查询中识别的顶级字段？

请注意，除非突出显示选择，否则查询工作正常，并且尚未“增强”效率，这是第一次快速运行 POC 报告。

进一步注意，我已删除所有公司敏感数据和缩进以帮助我“分段阅读查询”，除了所有部分仍应链接以形成功能查询（再次：禁止有问题的选择）。:-)

```
mysql_query("select distinct
a.companyname as MEM,
b.vendorid as VID,
b.alphacode as ALPHA,
b.vendorstate as STATE,
b.exchange as EXC,
(select count(memberid) from compa_memusergroups where memberid = a.id and software = 'A') as A,
(select count(memberid) from compa_memusergroups where memberid = a.id and software = 'B') as B,
(select count(memberid) from compa_memusergroups where memberid = a.id and software = 'C') as C,
(select count(memberid) from compa_memusergroups where memberid = a.id and software = 'D') as D,
(select count(memberid) from compa_memusergroups where memberid = a.id and software = 'E') as E,
(select count(memberid) from compa_memusergroups where memberid = a.id and software = 'F') as F,
(select count(memberid) from compa_memusergroups where memberid = a.id and software = 'G') as G,
(select count(memberid) from compa_memusergroups where memberid = a.id and software = 'H') as H,
(select count(memberid) from compa_memusergroups where memberid = a.id and software = 'I') as I,
(select count(memberid) from compa_memusergroups where memberid = a.id and software = 'J') as J,
(select count(memberid) from compa_memusergroups where memberid = a.id and software = 'K') as K,
(select count(memberid) from compa_memusergroups where memberid = a.id and software = 'L') as L,
(select count(memberid) from compa_memusergroups where memberid = a.id and software = 'M') as M,
REPLACE(REPLACE((select count(memberid) from compa_memconndetails where memberid = a.id and type = 'POP'), '0', 'No'), '1', 'Yes') as POP,
REPLACE(REPLACE(a.editandinfo, '0', ''), '1', 'x') as EDIT,
REPLACE(REPLACE(a.infoonly, '0', ''), '1', 'x') as INFO,
(select count(memberid) from compa_oldconnectivity where memberid = a.id and active = 1) as OLD,
(select count(memberid) from compa_newconnectivity where memberid = a.id and active = 1) as NEW,
(select count(memberid) from compa_ptconnectivity where memberid = a.id and ptactive = 1) as PTVAL,
(select count(memberid) from compa_dcconnectivity where memberid = a.id and dcactive = 1) as DCVAL,
IFNULL((select TRIM(LEADING '0' from substring(sysid,5,2)) from compa_compaconnectivity where memberid = a.id and refid = 'compa1'), 0) as compaLevel1,
IFNULL((select TRIM(LEADING '0' from substring(sysid,5,2)) from compa_compaconnectivity where memberid = a.id and refid = 'compam'), 0) as compaLevel2,
IFNULL((select TRIM(LEADING '0' from substring(sysid,5,2)) from compa_compaconnectivity where memberid = a.id and refid = 'compai'), 0) as compaLevel3,
IFNULL((select TRIM(LEADING '0' from substring(sysid,5,2)) from compa_compaconnectivity where memberid = a.id and refid = 'compan'), 0) as compaLevel4,
IFNULL((select TRIM(LEADING '0' from substring(sysid,5,2)) from compa_compbconnectivity where memberid = a.id and refid = 'compb1'), 0) as compbLevel1,
IFNULL((select TRIM(LEADING '0' from substring(sysid,5,2)) from compa_compbconnectivity where memberid = a.id and refid = 'compbm'), 0) as compbLevel2,
IFNULL((select TRIM(LEADING '0' from substring(sysid,5,2)) from compa_compbconnectivity where memberid = a.id and refid = 'compbi'), 0) as compbLevel3,
IFNULL((select TRIM(LEADING '0' from substring(sysid,5,2)) from compa_compbconnectivity where memberid = a.id and refid = 'compbn'), 0) as compbLevel4,
ROUND(
((
(IFNULL((select SUM(compa_memusersoft.bandwold) from compa_memusersoft
inner join compa_oldconnectivity on compa_memusersoft.acron = compa_oldconnectivity.oldsoft
where compa_oldconnectivity.memberid = a.id and compa_oldconnectivity.oldsoft not in (select acron from compa_memusersoft where type = 'EXT') and compa_oldconnectivity.active = 1), 0)
+ IFNULL((select SUM(compa_memusersoft.bandwnew) from compa_memusersoft
inner join compa_newconnectivity on compa_memusersoft.acron = compa_newconnectivity.newsoft
where compa_newconnectivity.memberid = a.id and compa_newconnectivity.newsoft not in (select acron from compa_memusersoft where type = 'EXT') and compa_newconnectivity.active = 1), 0)
+ (IF ((select count(*) from compa_ptconnectivity where memberid = a.id and ptsoft not in (select acron from compa_memusersoft where type = 'EXT') and compa_ptconnectivity.ptactive = 1) > 0, (select count(*) from compa_ptconnectivity where memberid = a.id and ptsoft not in (select acron from compa_memusersoft where type = 'EXT') and compa_ptconnectivity.ptactive = 1) * 0.020, 0))
+ (IF ((select count(*) from compa_dcconnectivity where memberid = a.id and dcsoft not in (select acron from compa_memusersoft where type = 'EXT') and compa_dcconnectivity.dcactive = 1) > 0, (select count(*) from compa_dcconnectivity where memberid = a.id and dcsoft not in (select acron from compa_memusersoft where type = 'EXT') and compa_dcconnectivity.dcactive = 1) * 0.352, 0)))
+
(IF ((select count(*) from compa_compaconnectivity
inner join compa_oldconnectivity on compa_compaconnectivity.memberid = compa_oldconnectivity.memberid 
where compa_compaconnectivity.memberid = a.id and compa_compaconnectivity.refid = 'compa1' and compa_oldconnectivity.oldsoft not in (select acron from compa_memusersoft where type = 'EXT') and compa_oldconnectivity.active = 1) > 0, 0.470 * 2, 
IF((select count(*) from compa_compaconnectivity
where refid = 'compa1' and memberid = a.id and memberid not in (select memberid from compa_oldconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_newconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_ptconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_dcconnectivity where memberid = a.id)) > 0, 0.470 * 2, 0)))
+
(IF ((select count(*) from compa_compaconnectivity
inner join compa_newconnectivity on compa_compaconnectivity.memberid = compa_newconnectivity.memberid 
where compa_compaconnectivity.memberid = a.id and compa_compaconnectivity.refid = 'compam' and compa_newconnectivity.newsoft not in (select acron from compa_memusersoft where type = 'EXT') and compa_newconnectivity.active = 1) > 0, 0.893 * 2, 
IF((select count(*) from compa_compaconnectivity
where refid = 'compam' and memberid = a.id and memberid not in (select memberid from compa_oldconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_newconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_ptconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_dcconnectivity where memberid = a.id)) > 0, 0.893 * 2, 0)))
+
(IF ((select count(*) from compa_compaconnectivity
inner join compa_oldconnectivity on compa_compaconnectivity.memberid = compa_oldconnectivity.memberid 
where compa_compaconnectivity.memberid = a.id and compa_compaconnectivity.refid = 'compai' and compa_oldconnectivity.oldsoft not in (select acron from compa_memusersoft where type = 'EXT') and compa_oldconnectivity.active = 1) > 0, 0.512 * 2, 
IF((select count(*) from compa_compaconnectivity
where refid = 'compai' and memberid = a.id and memberid not in (select memberid from compa_oldconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_newconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_ptconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_dcconnectivity where memberid = a.id)) > 0, 0.512 * 2, 0)))
+
(IF ((select count(*) from compa_compaconnectivity
inner join compa_oldconnectivity on compa_compaconnectivity.memberid = compa_oldconnectivity.memberid 
where compa_compaconnectivity.memberid = a.id and compa_compaconnectivity.refid = 'compan' and compa_oldconnectivity.oldsoft not in (select acron from compa_memusersoft where type = 'EXT') and compa_oldconnectivity.active = 1) > 0, 0.512 * 2, 
IF((select count(*) from compa_compaconnectivity
where refid = 'compan' and memberid = a.id and memberid not in (select memberid from compa_oldconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_newconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_ptconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_dcconnectivity where memberid = a.id)) > 0, 0.512 * 2, 0)))
+
(IF ((select count(*) from compa_compbconnectivity inner join compa_oldconnectivity on compa_compbconnectivity.memberid = compa_oldconnectivity.memberid 
where compa_compbconnectivity.memberid = a.id and compa_oldconnectivity.oldsoft not in (select acron from compa_memusersoft where type = 'EXT') and compa_oldconnectivity.active = 1) > 0, 0.512 * 2, 
IF((select count(*) from compa_compbconnectivity inner join compa_newconnectivity on compa_compbconnectivity.memberid = compa_newconnectivity.memberid 
where compa_compbconnectivity.memberid = a.id and compa_newconnectivity.newsoft not in (select acron from compa_memusersoft where type = 'EXT') and compa_newconnectivity.active = 1) > 0, 0.512 * 2, 0)))
+
(IF((select count(*) from compa_compbconnectivity where memberid = a.id and memberid not in (select memberid from compa_oldconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_newconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_ptconnectivity where memberid = a.id) 
and memberid not in (select memberid from compa_dcconnectivity where memberid = a.id)) > 0, 0.512 * 2, 0))
+

/*------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
IFNULL((select SUM(bandwreq * mplsterm) from (
select compa_memusersoft.acron, compa_memusersoft.bandwreq, compa_memconndetails.mplsterm from compa_memusersoft
inner join compa_memconndetails on compa_memusersoft.acron = compa_memconndetails.software
where compa_memusersoft.acron in (select oldsoft from compa_oldconnectivity where memberid = a.id)
or compa_memusersoft.acron in (select newsoft from compa_newconnectivity where memberid = a.id)
or compa_memusersoft.acron in (select ptsoft from compa_ptconnectivity where memberid = a.id)
or compa_memusersoft.acron in (select dcsoft from compa_dcconnectivity where memberid = a.id)
and compa_memconndetails.type = 'EXT' and compa_memconndetails.memberid = a.id group by compa_memusersoft.acron) tblval), 0)
*/-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

)
/ (70 / 100)
), 3) as REQBANDW,
(IFNULL((select pribandw1 from compa_currmembandw where memberid = a.id), 0) + IFNULL((select pribandw2 from compa_currmembandw where memberid = a.id), 0) +
IFNULL((select secbandw1 from compa_currmembandw where memberid = a.id), 0) + IFNULL((select secbandw2 from compa_currmembandw where memberid = a.id), 0) +
IFNULL((select backbandw1 from compa_currmembandw where memberid = a.id), 0) + IFNULL((select backbandw2 from compa_currmembandw where memberid = a.id), 0)) as CURRBANDW,
a.env
from
compa_member a
inner join compa_memberconnectivity b on a.id = b.memberid
order by a.env desc, a.companyname"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:43:19.963

我建议像这样修改有问题的部分：

```
IFNULL(
  (
    /*select SUM(bandwreq * mplsterm)
    from (*/
      select /*compa_memusersoft.acron,*/ **SUM(compa_memusersoft.bandwreq * compa_memconndetails.mplsterm)**
      from compa_memusersoft
      inner join compa_memconndetails on compa_memusersoft.acron = compa_memconndetails.software
      where compa_memusersoft.acron in (select oldsoft from compa_oldconnectivity where memberid = a.id)
         or compa_memusersoft.acron in (select newsoft from compa_newconnectivity where memberid = a.id)
         or compa_memusersoft.acron in (select ptsoft  from compa_ptconnectivity  where memberid = a.id)
         or compa_memusersoft.acron in (select dcsoft  from compa_dcconnectivity  where memberid = a.id)
        and compa_memconndetails.type = 'EXT'
        and compa_memconndetails.memberid = a.id
      group by compa_memusersoft.acron
    /*) tblval*/
  ),
  0
) 
```

# php - 使用alter table时需要mysql real escape吗？

> ID：10027528
> 
> 赞同：1
> 
> 时间：2012-04-05T11:15:18.243
> 
> 标签：php, mysql, pdo

前几天我注意到在使用带有 ALTER TABLE 的 PDO 时我无法绑定变量，例如以下示例将不起作用，

```
$q = $dbc -> prepare("ALTER TABLE emblems ADD ? TINYINT(1) UNSIGNED NOT NULL DEFAULT '0', ADD ? DATETIME NOT NULL"); 
$q -> execute(array($emblemDB, $emblemDB . 'Date')); 
```

那么是否有必要使用 mysql_real_escape 字符串并像下面那样做，

```
// ESCAPE NAME FOR MYSQL INSERTION
$emblemDB = mysql_real_escape_string($emblemDB);
// INSERT EMBLEM DETAILS INTO DATABASE
$q = $dbc -> prepare("ALTER TABLE emblems ADD " . $emblemDB . " TINYINT(1) UNSIGNED NOT NULL DEFAULT '0', ADD " . $emblemDB . "Date DATETIME NOT NULL");
$q -> execute(); 
```

还是我不需要添加`mysql_real_escape_string`？查询唯一能做的就是添加列？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:25:47.113

要看。如果您在查询中直接使用用户输入，则应该使用它。如果不这样做，用户可以对查询进行定界并`DROP`在其后抛出一条语句。

当用户输入：

```
somekindofname TINYINT(1) UNSIGNED NOT NULL DEFAULT '0'; DROP TABLE emblems -- 
```

您的查询将变为：

```
ALTER TABLE emblems ADD somekindofname TINYINT(1) UNSIGNED NOT NULL DEFAULT '0'; DROP TABLE emblems -- TINYINT(1) UNSIGNED NOT NULL DEFAULT '0', ADD TINYINT(1) UNSIGNED NOT NULL DEFAULT '0' somekindofname; DROP TABLE emblems -- Date DATETIME NOT NULL 
```

您的数据库将执行`ALTER TABLE`, 执行`DROP TABLE`并忽略最后的注释。

# java - 为什么我要在电子邮件中发送一个文件的副本？

> ID：10027537
> 
> 赞同：0
> 
> 时间：2012-04-05T11:16:10.550
> 
> 标签：java, file, email, directory

我在目录“bar”中有 2 个文件用于测试。从下面的代码中，假设将该目录中的所有文件作为电子邮件附件发送。问题是，当我发送它们时，我的电子邮件中会出现一个文件的副本。我之前确实让它正常工作过一次进行测试，但我不记得我可能改变了什么。

有谁知道我的代码可能有什么问题，或者为什么我没有发送目录中的所有文件，而是在我的电子邮件中多次收到一个文件？

这是我的代码：

```
 multipart = new MimeMultipart();
        multipart.addBodyPart(messageBodyPart);

        File f = new File("C:\\foo\\bar");
        File[] attachments = f.listFiles();

         //email with attachments (if any)
        for(int i = 0; i < f.listFiles().length - 1; i++){
            DataSource fileDataSource = new FileDataSource(attachments[i]);
            messageBodyPart.setDataHandler(new DataHandler(fileDataSource));
            messageBodyPart.setFileName(attachments[i].getName());
            multipart.addBodyPart(messageBodyPart);
            }

        message.setContent(multipart);
        message.setSentDate(new Date());

        Transport.send(message); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:23:25.787

您有一个错误：您希望循环是

```
for (int i = 0; i < f.listFiles().length; i++){ 
```

或者

```
for (int i = 0; i <= f.listFiles().length -1; i++){ 
```

你也有两行说

```
multipart.addBodyPart(messageBodyPart); 
```

这就是为什么你有两次包含第一个文件的正文部分。

# javascript - 为什么我不能使用 JavaScript 更改我的 HTML 元素的样式？

> ID：10027539
> 
> 赞同：0
> 
> 时间：2012-04-05T06:08:17.050
> 
> 标签：javascript, html, css

我有一个问题，我制作了这个测试代码来向你展示我的问题。

*   HTML 代码：http: [//i.stack.imgur.com/7qlZx.png](http://i.stack.imgur.com/7qlZx.png)
*   Javascript 代码：http: [//i.stack.imgur.com/DYvuq.png](http://i.stack.imgur.com/DYvuq.png)

我想做的是改变id的样式。但由于某种原因，它不起作用。

我不知道发生了什么，我真的需要你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:23:04.223

在您的原始代码中，您错误地将 JavaScript 属性称为方法...

```
// ORIGINAL/INCORRECT CODE
// x.style.fontSize('20px');
// x.style.fontFamily('arial');
// x.style.color('#008080');
// x.style.border('10px solid #000'); 
```

更正...

```
// CORRECTED
// These are properties, NOT methods.
x.style.fontSize = '20px';
x.style.fontFamily = 'arial';
x.style.color = '#008080';
x.style.border = '10px solid #000'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:22:16.850

从您发布的代码图片来看（[http://jsfiddle.net](http://jsfiddle.net)是此类事情的更好选择），您的 JavaScript 是错误的。

```
x.style.fontSize('20px'); 
```

HTML 元素上的`style`对象没有被调用的*函数*`fontSize`，它有一个`property`被调用的函数`fontSize`。您将所需的值分配给它，如下所示：

```
x.style.fontSize = '20px'; 
```

如果您在 JavaScript 控制台可见（查看 > 开发人员 > JavaScript 控制台）的情况下在 Chrome 中尝试您的原始代码，当您尝试运行您的原始代码时应该会看到一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:23:57.010

这些样式属性是属性而不是方法。也就是说，不应该是`x.style.fontSize('20px')`，而是`x.style.fontSize = '20px'`。

# scala - 如何按两个字段对Scala中的列表进行排序？

> ID：10027543
> 
> 赞同：106
> 
> 时间：2012-04-05T11:16:40.533
> 
> 标签：scala, sorting, functional-programming

如何按两个字段对 Scala 中的列表进行排序，在本例中，我将按姓氏和名字排序？

```
case class Row(var firstName: String, var lastName: String, var city: String)

var rows = List(new Row("Oscar", "Wilde", "London"),
                new Row("Otto",  "Swift", "Berlin"),
                new Row("Carl",  "Swift", "Paris"),
                new Row("Hans",  "Swift", "Dublin"),
                new Row("Hugo",  "Swift", "Sligo"))

rows.sortBy(_.lastName) 
```

我尝试这样的事情

```
rows.sortBy(_.lastName + _.firstName) 
```

但它不起作用。所以我很好奇一个好的和简单的解决方案。

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2012-04-05T11:25:09.890

```
rows.sortBy(r => (r.lastName, r.firstName)) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-05T11:20:19.160

```
rows.sortBy (row => row.lastName + row.firstName) 
```

如果您想按合并名称排序，如您的问题，或者

```
rows.sortBy (row => (row.lastName, row.firstName)) 
```

如果您首先要按姓氏排序，则按名字排序；与较长的名称相关（Wild、Wilder、Wilderman）。

如果你写

```
rows.sortBy(_.lastName + _.firstName) 
```

带有 2 个下划线，该方法需要两个参数：

```
<console>:14: error: wrong number of parameters; expected = 1
       rows.sortBy (_.lastName + _.firstName)
                               ^ 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-05T11:21:15.167

一般来说，如果你使用稳定的排序算法，你可以只按一个键排序，然后按下一个键排序。

```
rows.sortBy(_.firstName).sortBy(_.lastName) 
```

最终结果将按姓氏排序，然后在相等的地方按名字排序。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-10-06T14:35:54.350

也许这仅适用于元组列表，但是

```
scala> var zz = List((1, 0.1), (2, 0.5), (3, 0.6), (4, 0.3), (5, 0.1))
zz: List[(Int, Double)] = List((1,0.1), (2,0.5), (3,0.6), (4,0.3), (5,0.1))

scala> zz.sortBy( x => (-x._2, x._1))
res54: List[(Int, Double)] = List((3,0.6), (2,0.5), (4,0.3), (1,0.1), (5,0.1)) 
```

似乎有效，并且是一种简单的表达方式。

# c# - 如何使用 OpenXMLSDK 和 C# 从 Excel 表格中读取图像？

> ID：10027544
> 
> 赞同：1
> 
> 时间：2012-04-05T11:16:43.810
> 
> 标签：c#, .net, openxml-sdk

我们正在开发 C# winform 应用程序。我们正在使用 OpenXMLSDK 访问和修改 Excel 表格。现在我想使用 Open XML SDK 从 excel 表格中读取 imgaes。请指导我摆脱这个问题。

谢谢和问候， P.SARAVANAN

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T02:52:03.980

获取图像部件，获取图像部件引用，从流中读取以获取图像。

# database - 博客的数据库设计，在 cakephp 中为用户、评论和帖子提供单独的表

> ID：10027546
> 
> 赞同：0
> 
> 时间：2012-04-05T11:16:46.013
> 
> 标签：database, cakephp, database-design, cakephp-1.3

我必须完成一项任务，即与可以发布帖子并评论帖子的用户一起创建博客。我应该为用户、帖子、评论创建三个表，每个表中的每个人都有一个唯一的 id？

我的表中需要外键字段吗？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:21:46.337

认为一些研究会有所帮助，因为您会更深入地了解它的工作原理，基本博客系统的系统非常简单。

您将拥有 Post、User 和 Comment，每个都应该有其单独的 Id，您当然需要外键将它们链接在一起。一个例子是：

```
users('id', 'username', 'password'),
posts('id', 'title', 'content', 'slug', 'user_id'),
comments('id', 'content', 'date', 'post_id', 'user_id') 
```

Cake PHP 的 Book 1.3 对此有一个很好的教程： http: [//book.cakephp.org/1.3/en/view/1528/Blog](http://book.cakephp.org/1.3/en/view/1528/Blog)

# linux - 重定向 HTACCESS

> ID：10027549
> 
> 赞同：0
> 
> 时间：2012-04-05T11:17:04.370
> 
> 标签：linux, .htaccess

我在使用 htaccess 重定向 301 写入时遇到问题。

我在 htaccess.txt 中添加了以下文本，但它不起作用：

```
Options +FollowSymLinks
#  mod_rewrite in use
RewriteEngine On
//301 Redirect Old File
Redirect 301 http://www.old_site.com/en/about-us/company-profile.html http://www.new_site.com/en/about-us/company-profile.html 
```

我也尝试了以下但没有成功：

```
Options +FollowSymLinks
#  mod_rewrite in use
RewriteEngine On
//301 Redirect Old File
Redirect 301 /en/about-us/company-profile.html http://www.new_site.com/en/about-us/company-profile.html 
```

错误在哪里？我是否在 robots.txt 中进行更改？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:46:16.173

将文件名从 更改`htaccess.txt`为`.htaccess`。**严格**来说，文件的扩展名是`.htaccess`并且没有名称前缀。

# user-interface - 检查应用程序是否适合 ms ui 自动化框架

> ID：10027550
> 
> 赞同：1
> 
> 时间：2012-04-05T11:17:09.817
> 
> 标签：user-interface, testing, frameworks, automation

我想使用 ms ui 自动化框架进行基本的 gui 测试，因此我正在启动应该在进程对象上测试的程序：

```
Process process = new Process();
process.StartInfo.FileName = path;
process.Start();
AutomationElement mainform = AutomationElement.FromHandle(process.MainWindowHandle); 
```

然而我的问题是如何检查启动的程序是否适合使用 ui 自动化框架进行测试？如果我要启动例如 java 程序，主窗体 AutomationElement 是否为空？

还是所有 .exe 应用程序 ui 自动化框架都兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:52:22.060

Microsoft 的“UIAutomation”是 MSAA“Microsoft Active Accessibility”的替代品。两者都依赖于可访问性信息来查找控件并与之交互，因此您在自动化应用程序方面的成功程度与在您的应用程序中实现可访问性的程度直接相关。话虽如此，UIAutomation 使使用 UI 变得更容易一些，即使它们没有完美的可访问性实现，只需做一些额外的工作。从任何编程语言创建的 UI 通常仍然实现 Windows 中包含的 UIAutomation 接口，因此即使是 java 程序也应该可以工作。

# c - 带有局部变量地址的 pthread_exit() 有时可以工作吗？

> ID：10027558
> 
> 赞同：1
> 
> 时间：2012-04-05T11:17:45.633
> 
> 标签：c, linux, multithreading, ubuntu, centos

我曾经遇到过麻烦`pthread_exit()`。我知道没有`pthread_exit()`办法像这样使用

```
pthread_exit(&some_local_variable); 
```

我们总是需要像这样使用 pthread_exit() ：

```
pthread_exit("Thread Exit Message or something necessary information"); 
```

我曾经为测试目的编写了一个简单的程序。我分别为两个整数的加法、减法、乘法和除法做了四个线程函数。然后在四个不同的线程上执行这些操作时，我尝试通过`pthread_exit()`. 我的意思是这样的：

```
pthread_exit(&add_result); 
```

当我在 CentOS 6 中运行代码时，我得到了想要的结果（即来自所有线程的垃圾值），因为`pthread_exit()`不能这样使用。但是，我糊涂了。因为这是我第一次在 Ubuntu 11.10 中运行该代码，并从三个线程中获得了三个绝对正确的结果（操作的正确结果）和一个线程中的垃圾值。这让我很困惑，因为为什么三个线程给出了正确的操作结果？

此外，我为这些线程使用了不同的睡眠时间。我发现睡眠时间最少的线程给出了垃圾值。

由于 gcc 是这两个操作系统的编译器，为什么一个系统会有这样的错误？它使像我这样的新手程序员感到困惑。如果它不是错误，任何人都可以向我解释为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:23:11.653

我认为您的答案在`pthread_exit`文档中。你说你返回了一个指针 on `add_result`，这似乎是一个局部变量。

这是可能回答的文档的引用：

> 线程终止后，访问线程的本地（自动）变量的结果是未定义的。因此，对退出线程的局部变量的引用不应用于 pthread_exit() value_ptr 参数值。

您可以使用线程函数的 void* 参数来使用结构，该结构应包含您的操作的实际结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T11:23:50.457

`pthread_exit`只需要一个指向 a 的指针`void`。如果您将本地变量的地址传递给线程，则有时该内存将被重用于其他用途。有时它仍然会在那里。无法保证在线程退出后，系统的某些部分会去确保它正在使用的所有内存都设置为垃圾值。

这不是错误 - 系统正在按照您的要求进行操作。

奖金相关答案 -[可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope/6445794#6445794)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T11:24:36.723

唯一的要求`pthread_exit(foo)`是`foo`指向寿命足够长的东西。局部变量不会，malloc'ed 内存会。

# r - 如何使用 rJython 发送包含希腊字符的电子邮件？

> ID：10027560
> 
> 赞同：2
> 
> 时间：2012-04-05T11:17:45.773
> 
> 标签：r, email, jython

以下函数（在[此处](http://r.789695.n4.nabble.com/Email-out-of-R-code-tp3530671p3948061.html)找到）适用于包含 ASCII 字符的消息。你能帮我修改多语言消息吗，因为我根本不懂python？

```
send.email <- function(to, from, subject, 
  message, attachment=NULL, 
  username, password, 
  server="xxx.xxx.xxx.xxx", 
  confirmBeforeSend=FALSE){ 
  # to: a list object of length 1\.  Using list("Recipient" = "recip@somewhere.net") will send the message to the address but 
  #     the name will appear instead of the address. 
  # from: a list object of length 1\.  Same behavior as 'to' 
  # subject: Character(1) giving the subject line. 
  # message: Character(1) giving the body of the message 
  # attachment: Character(1) giving the location of the attachment 
  # username: character(1) giving the username.  If missing and you are using Windows, R will prompt you for the username. 
  # password: character(1) giving the password.  If missing and you are using Windows, R will prompt you for the password. 
  # server: character(1) giving the smtp server. 
  # confirmBeforeSend: Logical.  If True, a dialog box appears seeking confirmation before sending the e-mail.  This is to 
  #                    prevent me to send multiple updates to a collaborator while I am working interactively.   

  if (!is.list(to) | !is.list(from)) stop("'to' and 'from' must be lists") 
  if (length(from) > 1) stop("'from' must have length 1") 
  if (length(to) > 1) stop("'send.email' currently only supports one recipient e-mail address") 
  if (length(attachment) > 1) stop("'send.email' can currently send only one attachment") 
  if (length(message) > 1){ 
    stop("'message' must be of length 1") 
    message <- paste(message, collapse="\\n\\n") 
  } 

  if (is.null(names(to))) names(to) <- to 
  if (is.null(names(from))) names(from) <- from 
  if (!is.null(attachment)) if (!file.exists(attachment)) stop(paste("'", attachment, "' does not exist!", sep="")) 

  if (missing(username)) username <- winDialogString("Please enter your e-mail username", "") 
  if (missing(password)) password <- winDialogString("Please enter your e-mail password", "") 

  require(rJython) 
  rJython <- rJython() 

  rJython$exec("import smtplib") 
  rJython$exec("import os") 
  rJython$exec("from email.MIMEMultipart import MIMEMultipart") 
  rJython$exec("from email.MIMEBase import MIMEBase") 
  rJython$exec("from email.MIMEText import MIMEText") 
  rJython$exec("from email.Utils import COMMASPACE, formatdate") 
  rJython$exec("from email import Encoders") 
  rJython$exec("import email.utils") 

  mail<-c( 
  #Email settings 
  paste("fromaddr = '", from, "'", sep=""), 
  paste("toaddrs  = '", to, "'", sep=""), 
  "msg = MIMEMultipart()", 
  paste("msg.attach(MIMEText('", message, "'))", sep=""), 
  paste("msg['From'] = email.utils.formataddr(('", names(from), "', fromaddr))", sep=""), 
  paste("msg['To'] = email.utils.formataddr(('", names(to), "', toaddrs))", sep=""), 
  paste("msg['Subject'] = '", subject, "'", sep="")) 

  if (!is.null(attachment)){ 
    mail <- c(mail, 
      paste("f = '", attachment, "'", sep=""), 
     "part=MIMEBase('application', 'octet-stream')", 
     "part.set_payload(open(f, 'rb').read())", 
     "Encoders.encode_base64(part)", 
     "part.add_header('Content-Disposition', 'attachment; filename=\"%s\"' % os.path.basename(f))", 
     "msg.attach(part)") 
  } 

#SMTP server credentials 
  mail <- c(mail, 
    paste("username = '", username, "'", sep=""), 
    paste("password = '", password, "'", sep=""), 

#Set SMTP server and send email, e.g., google mail SMTP server 
    paste("server = smtplib.SMTP('", server, "')", sep=""), 
    "server.ehlo()", 
    "server.starttls()", 
    "server.ehlo()", 
    "server.login(username,password)", 
    "server.sendmail(fromaddr, toaddrs, msg.as_string())", 
    "server.quit()") 

  message.details <- 
    paste("To:               ", names(to), " (", unlist(to), ")", "\n", 
          "From:             ", names(from), " (", unlist(from), ")", "\n", 
          "Using server:     ", server, "\n", 
          "Subject:          ", subject, "\n", 
          "With Attachments: ", attachment, "\n", 
          "And the message:\n", message, "\n", sep="") 

  if (confirmBeforeSend) 
   SEND <- winDialog("yesnocancel", paste("Are you sure you want to send this e-mail to ", unlist(to), "?", sep="")) 
   else SEND <- "YES" 

  if (SEND %in% "YES"){ 
    jython.exec(rJython,mail) 
    cat(message.details) 
  } 
  else cat("E-mail Delivery was Canceled by the User") 
} 
```

我这样称呼它：

```
send.email(list("somebody@somecompany.com"),
list("rJythonMail@mycompany.com"),
"Δοκιμή αποστολής email με attachment",
"Με χρήση της rJython",
attachment="monthly_report.xls",
username="gd047",password="xxxxxx") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T23:59:13.683

问题是您所附的 Python 代码的结构。[此博客条目](http://mg.pov.lt/blog/unicode-emails-in-python)更详细地介绍了如何正确[发送 Unicode 电子邮件](http://en.wikipedia.org/wiki/Unicode_and_email)，您正在使用 Python 来管理底层 SMTP 连接。请注意，根据 R. David Murray 的说法，[这将`email`在 Python 包的](http://bugs.python.org/issue1685453)后续迭代中得到修复。

以下是您可以在 rJython 中改装到您的调用中的显着 Python 代码，直接从[上述博客文章](http://mg.pov.lt/blog/unicode-emails-in-python)中借用：

```
from smtplib import SMTP
from email.MIMEText import MIMEText
from email.Header import Header
from email.Utils import parseaddr, formataddr

def send_email(sender, recipient, subject, body):
    """Send an email.

    All arguments should be Unicode strings (plain ASCII works as well).

    Only the real name part of sender and recipient addresses may contain
    non-ASCII characters.

    The email will be properly MIME encoded and delivered though SMTP to
    localhost port 25\.  This is easy to change if you want something different.

    The charset of the email will be the first one out of US-ASCII, ISO-8859-1
    and UTF-8 that can represent all the characters occurring in the email.
    """

    # Header class is smart enough to try US-ASCII, then the charset we
    # provide, then fall back to UTF-8.
    header_charset = 'ISO-8859-1'

    # We must choose the body charset manually
    for body_charset in 'US-ASCII', 'ISO-8859-1', 'UTF-8':
        try:
            body.encode(body_charset)
        except UnicodeError:
            pass
        else:
            break

    # Split real name (which is optional) and email address parts
    sender_name, sender_addr = parseaddr(sender)
    recipient_name, recipient_addr = parseaddr(recipient)

    # We must always pass Unicode strings to Header, otherwise it will
    # use RFC 2047 encoding even on plain ASCII strings.
    sender_name = str(Header(unicode(sender_name), header_charset))
    recipient_name = str(Header(unicode(recipient_name), header_charset))

    # Make sure email addresses do not contain non-ASCII characters
    sender_addr = sender_addr.encode('ascii')
    recipient_addr = recipient_addr.encode('ascii')

    # Create the message ('plain' stands for Content-Type: text/plain)
    msg = MIMEText(body.encode(body_charset), 'plain', body_charset)
    msg['From'] = formataddr((sender_name, sender_addr))
    msg['To'] = formataddr((recipient_name, recipient_addr))
    msg['Subject'] = Header(unicode(subject), header_charset)

    # Send the message via SMTP to localhost:25
    smtp = SMTP("localhost")
    smtp.sendmail(sender, recipient, msg.as_string())
    smtp.quit() 
```

移植后，这应该可以使您的代码正常工作。希望尽快添加对[RFC2047](https://www.rfc-editor.org/rfc/rfc2047)和[RFC3490](https://www.rfc-editor.org/rfc/rfc3490)的更好支持。现在，很遗憾你不得不解决这个问题。

# javascript - 如何在选择器中使用 jQuery.each() 的“this”？

> ID：10027561
> 
> 赞同：1
> 
> 时间：2012-04-05T11:18:00.200
> 
> 标签：javascript, jquery

谁能告诉我以下问题在哪里？我希望系统在循环中提醒每个列表项的锚文本，但想不出如何构造“this”语法？

```
$('.jsGrid ul li').each(function(index) {
    alert(index + ': ' + $('this .overlayContent a').text());

}); 
```

干杯保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:19:46.657

`this`是一个变量，不会在字符串中被识别。围绕它构造 jQuery 对象并使用它`find`来获取您正在寻找的锚元素：

```
alert(index + ': ' + $(this).find('.overlayContent a').text()); 
```

如果你搜索`$("this .overlayContent a")`- jQuery 会寻找这样构造的元素：

```
<this>
   <div class='overlayContent'><a>Some text here</a></div>
</this> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:20:30.460

```
alert(index + ': ' + $('.overlayContent a',this).text()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:20:28.593

```
$('.jsGrid ul li').each(function(index) {
    alert(index + ': ' + $(this).find('.overlayContent a').text());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:22:30.370

你不能像这样使用这个关键字。而是使用这个

```
$('.jsGrid ul li').each(function(index) {
    alert(index + ': ' + $('this').find('a').text());
}); 
```

或者你可以这样做'

```
$('.jsGrid ul li').each(function(index) {
    alert(index + ': ' + $('this').children().text());
}); 
```

# c# - 字典 obj 的 linq 查询

> ID：10027562
> 
> 赞同：0
> 
> 时间：2012-04-05T11:18:10.720
> 
> 标签：c#, linq, dictionary

我有一个字典对象`Dictionary<SomeEnumType, object>`。

```
enum SomeEnumType
{
AType=1,
BType=2,
CType=3
} 
```

object 将是`A,B`.

```
public class C {public string Name {get;set;}}
public class A: C { public string prop1 {get;set;}}
public class B: C { public string prop2 {get;set;}} 
```

字典对象将具有如下条目：

```
Dictionary<SomeEnumType, object> dicobj= new Dictionary<SomeEnumType, object>();
dicobj.Add(SomeEnumType.AType, List<A>);
dicobj.Add(SomeEnumType.BType, List<B>); 
```

我需要查询字典`name`并获取对象（A 或 B）。例如。名称="约翰"。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:24:07.240

您所有的特殊集合都派生自相同的基类型，因此您可以简单地遍历所有集合并将对象转换为 C 类型：

```
dictObj.Values.OfType<ICollection>()
              .SelectMany(collection => collection.OfType<C>())
              .Where(itemOfTypeC => itemOfTypeC.Name == "John"); 
```

# ios - iOS 持久存储问题

> ID：10027567
> 
> 赞同：0
> 
> 时间：2012-04-05T11:18:27.710
> 
> 标签：ios, core-data

我正在使用带有预加载 sqlite 数据库的核心数据。我遇到了一个奇怪的问题，该应用程序可以在模拟器上运行，但是当我尝试在 iPad 等设备上运行它时，出现以下错误。

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSManagedObject persistentStore]: unrecognized selector sent to instance 0x3bebf50' 
```

我从模型中重新创建了 sqlite 数据库并重新填充了数据库，但我仍然得到同样的错误。我检查了构建阶段部分中的“编译源”和“复制捆绑资源”，文件都在那里。

代码： http: [//pastebin.com/fTTgEA3W](http://pastebin.com/fTTgEA3W)

一直在绞尽脑汁，似乎无法理解为什么它不起作用，任何帮助都将不胜感激。

感谢您抽出宝贵时间，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:39:05.000

第一个措施：删除应用程序并重新安装。

`persistentStore`第二个措施：在您的代码中对调用进行文本搜索。它显然要去一个`NSManagedObjectContext`没有这种方法的地址。如果发现错误，请修复该错误。

第三项措施：检查您的娱乐算法以确保您正确地构建商店。在我的大型商店项目中，`SETUP`如果商店需要从原始数据导入，我通常会打开一个标志，由于内存需求，这通常只在模拟器中工作。（当`SETUP`关闭且没有存储时，会复制之前生成的存储。）可能在 iPad 上您没有足够的内存来进行数据导入。

# ruby-on-rails - Rails 管理员修改列表/显示视图以添加新/自定义列

> ID：10027569
> 
> 赞同：15
> 
> 时间：2012-04-05T11:18:45.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-admin

我已经为我的站点的管理界面设置了 rails_admin。

对于其中一个模型，我想显示一个附加列。

假设我的模型（比如学生）中有姓名、电话、电子邮件、图片网址、排名等属性。然后我必须显示列：**名称 | 排名 | 预览（附加栏目）**

在预览列中，我想根据每个“学生”的属性（电子邮件、图像、网址等）显示一些呈现的 html。

我找到了包含用于编辑/更新/创建的部分的方法，以根据我们的部分提供字段/表单。但是包含部分的相同实现在列表/显示中失败。

那么有什么方法可以在模型的列表/显示视图中添加部分以显示渲染的内容......？

**编辑：添加代码**

```
config.model Utility do
   list do
     field :code
     field :priority
     field :name
     field :url
     field :phone
     field :logo
     field :content
     sort_by :priority
     items_per_page 100
   end
end 
```

**这会在rails_admin**中显示以下列

 ****代码 | 优先 | 姓名 | 网址 | 电话 | 标志 | 内容**

我想要的是 **代码 | 优先 | 预习**

在“预览”列中，我想将 html 呈现内容显示为：

*blah.html（仅用于例如 html，在这里我想以一种显示在其中一个页面中的方式呈现，因此它也适用于管理视图）*

```
<div class="blah">
  <%=util.name%> <%=util.phone%> <%=util.logo%> #usage with proper divs/tags/rendering
</div > 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-23T13:33:03.090

```
config.model Utility do
  configure :preview do
    pretty_value do
      util = bindings[:object]
      %{<div class="blah">
          #{util.name} #{util.phone} #{util.logo}
        </div >}
    end
    children_fields [:name, :phone, :logo] # will be used for searching/filtering, first field will be used for sorting
    read_only true # won't be editable in forms (alternatively, hide it in edit section)
  end

  list do
    field :code
    field :priority
    field :preview
  end

  show do
    field :code
    field :priority
    field :preview
  end

  # other sections will show all fields
end 
```

抽象的：

显示/列表不要使用部分输出。最后一个最重要的点是`pretty_value`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-09T23:52:04.287

Rails 管理员称这些“虚拟”字段类型。最简单的方法是在您的模型上创建一个方法，然后在您的列表/显示中引用它：

```
class ModelName < ActiveRecord::Base

  def invite_link
    %{<a href="http://site.com/#{self.uid}">invite link</a>}.html_safe
  end

  rails_admin do
    configure :invite_link do
        visible false # so it's not on new/edit 
    end

    list do
      field :name
      field :invite_link
    end

    show do
      field :name
      field :invite_link
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-18T07:39:55.957

```
class Utility < ActiveRecord::Base 
  def preview
    name  
  end
end

config.model Utility do
  configure :preview do
    pretty_value do
      util = bindings[:object]
      %{<div class="blah">
          #{util.name} #{util.phone} #{util.logo}
        </div >}
    end
    children_fields [:name, :phone, :logo] # will be used for searching/filtering, first field will be used for sorting
    read_only true # won't be editable in forms (alternatively, hide it in edit section)
  end

  list do
    field :code
    field :priority
    field :preview
  end

  show do
    field :code
    field :priority
    field :preview
  end

  # other sections will show all fields
end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-05T12:50:16.547

```
class ModelName < ActiveRecord::Base
  rails_admin do
    list do
      field :job_title
      field :required_experiance
      field :salary 
      field :technical_skills
      field :non_technical_skills     
    end

    create do
      field :job_title, :enum do
        help 'Please select Job Title'
        enum do
          ['Business Analyst', 'Trainee Business Analyst', 'Mobile/Web Developer',
           'iOS Developer', 'Graphic Designer', 'System Administrator', 'Content Writer']
        end
      end

      field :job_type do
        help 'e.g. Developer, Management'
      end

      field :undergraduate_degree, :enum do
        help 'Please select UG Degree'
        enum do
          [ 'BE', 'BCA', 'B.Tech','BCs', 'BSc', 'BBA', 'BA', 'BCom', 'BSL']
        end 
      end

      field :postgraduate_degree, :enum do
        help 'Please select PG Degree'
        enum do
          [ 'ME', 'MCA', 'M.Tech', 'MCs', 'MSc', 'MBA', 'MCM', 'MMM', 'MA', 'MCom']
        end 
      end

      field :required_experiance, :enum do
        help 'Please select Year'
        enum do
          [ 'Select Year', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10']
      end 
    end
  end
end 
```**

# windows - 如何判断安装目录是否有写权限

> ID：10027572
> 
> 赞同：0
> 
> 时间：2012-04-05T11:19:03.060
> 
> 标签：windows, directory, nsis, user-permissions

在安装程序中，用户选择一个目录，如果它没有写权限，那么 nsis 安装程序将继续并跳过将文件复制到它并创建一个注册表项。这意味着安装失败，但注册表项在那里。如何在 nsis 中找出安装目录是否具有写权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:48:20.177

这与以下问题几乎相同： http: [//forums.winamp.com/showthread.php?t=312637](http://forums.winamp.com/showthread.php?t=312637)。

（来自英国 Afrow）

```
ClearErrors
FileOpen $R0 $INSTDIR\tmp.dat w
FileClose $R0
Delete $INSTDIR\tmp.dat
${If} ${Errors}
 ...
 Abort
${EndIf} 
```

基本上在尝试复制到目录后检查错误标志，如果有错误，则提示输入不同的目录。或者，您可能需要管理员权限才能运行安装程序。

# node.js - Express JS 反向 URL 路由（Django 风格）

> ID：10027574
> 
> 赞同：5
> 
> 时间：2012-04-05T11:19:15.307
> 
> 标签：node.js, routing, express

我正在使用 Express JS，我想要一个类似于 Django 的`reverse`功能。所以如果我有一条路线，例如

```
app.get('/users/:id/:name', function(req, res) { /* some code */ } ) 
```

例如，我想使用一个函数

```
reverse('/users/:id/:name', 15, 'John'); 
```

甚至更好

```
reverse('/users/:id/:name', { id : 15, name : 'John' }); 
```

这会给我 url `/users/15/John`。有这样的功能吗？如果没有，那么您对如何编写这样的函数有任何想法（考虑 Express 的路由算法）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T17:13:05.173

这是您的代码：

```
function reverse(url, obj) { 
    return url.replace(/(\/:\w+\??)/g, function (m, c) { 
        c=c.replace(/[/:?]/g, ''); 
        return obj[c] ? '/' + obj[c] : ""; 
    }); 
}

reverse('/users/:id/:name', { id: 15, name: 'John' });
reverse('/users/:id?', { id: 15});
reverse('/users/:id?', {}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T09:46:17.993

我刚刚创建了包[reversable-router](https://github.com/web-napopa/node-reversable-router)来解决路由的其他问题。

自述文件中的示例：

```
app.get('/admin/user/:id', 'admin.user.edit', function(req, res, next){
    //...
});

//.. and a helper in the view files:
url('admin.user.edit', {id: 2}) 
```

# hibernate - 强制 GORM 将一对一关系视为独立的

> ID：10027576
> 
> 赞同：2
> 
> 时间：2012-04-05T11:19:30.767
> 
> 标签：hibernate, grails, groovy, grails-orm

我有一个 `MyParameter`类和一个`MyParameterValue`定义如下的类：

```
class MyParameter {
  MyParameterValue defaultValue

  static belongsTo = [anotherObject: AnotherDomainClass]
}

class MyParameterValue {
  MyParameter valueOf
} 
```

我的问题是**GORM 坚持将其视为与反向引用的一对一关系**，这不是我想要的。它对如何更新参数有影响。

*例子：*

```
 def param = new MyParameter(defaultValue: new MyParameterValue()).save()
    def paramVal = new MyParameterValue (valueOf: param).save()
    assert param.defaultValue != paramVal 
```

此代码抛出一个`AssertionFailure`. 所以发生了什么事？虽然应该清楚我并不是要修改`param`第二行的默认值，但 GORM 会更新它，就好像`defaultValue`必须与`valueOf`in同步一样`MyParameterValue`，

所以 GORM 实际上改变了我想要的东西：

![两个相反方向引用的 UML 示例](../Images/78ec4ec86e4cfe7423b43cc174fe0820.png)

进入那个：

![双边一对一关系的UML示例](../Images/10278b837348273b42a112e311f9e426.png)

这是我的两个问题：

*   `hasOne`如果从类型的角度来看，看起来像反向引用的所有引用都被视为一对一关系，那么关键字的目的是什么？
*   如何强制 GORM 不将`valueOf`其视为 的反向引用`defaultValue`？请注意，我不想更改级联行为：更改`defaultValue`a`MyParameter`应该是级联的。

**更新**

我仍然对上述问题的答案感兴趣。我使用的解决方案是给默认值他们自己的类`MyDefaultValue`。正如你可能猜到的那样，`MyParameterValue`它是一个复杂的结构，我一直在寻找一种方法来避免重复这种结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T06:39:40.477

如果您不想要任何反向引用，但想要手动处理所有关系，我想我会这样定义我的对象：

```
class MyParameter {
  MyParameterValue defaultValue

  static constraints {
     defaultValue nullable: true
  }
}

class MyParameterValue {
  MyParameter valueOf

  static constraints {
     valueOf nullable: true
  }
} 
```

但这要求您自己完成所有工作。

# perl - 更新 Perl 全局变量的正确方法

> ID：10027577
> 
> 赞同：2
> 
> 时间：2012-04-05T11:19:32.710
> 
> 标签：perl, scope, global-variables

我在包 main 中的 file_1.pl 中有以下全局变量：

```
package main;

my $var = -1; 
```

如果我需要从另一个 perl 文件更新这个变量，这样做的方法是什么？我试过：

```
$main::var = 1 
```

但它没有用。

正确的做法是什么？

谢谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T11:54:27.983

生成一个`my`词法变量。它的范围仅限于它的块，或者，如果不在一个块中，则仅限于文件。他们无法在他们的范围之外被看到。

您可以创建一个全局变量，正如其他答案所示：

```
our $var; 
```

但是，更好的方法是为代码的其他部分提供更新词法版本的接口：

```
my $private;

sub set_private { $private = shift } 
```

但是，如果您要这样做，您也可能有一个用于获取值的接口。现在该变量只需要与使用它的子例程处于同一范围内，因此您可以将其隐藏在文件的其余部分中：

```
{
my $private;
sub set_private { $private = shift }

sub get_private { $private }
} 
```

现在你离一个对象只有一步之遥（在本例中是一个单例）：

```
use v5.12;

package Foo {
    my $private;
    sub new { bless \$private, shift }
    sub set { my $self = shift; $$self = shift; }

    sub get { my $self = shift; $$self; }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T11:24:25.753

您必须声明变量，`our`否则它将被视为*词法*变量，因此请更改为

```
our $var = -1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T11:23:53.983

您可以创建一个包装函数。

在主文件中

```
our $var;
sub updateGlobal {
   $var = shift;
} 
```

在另一个文件中只需调用一个函数

```
updateGlobal(1); 
```

# javafx-2 - Java Fx 场景变化

> ID：10027585
> 
> 赞同：0
> 
> 时间：2012-04-05T11:20:02.000
> 
> 标签：javafx-2

我正在将 Java FX 用于桌面应用程序。我可以在一个场景中更改场景吗？第一个场景有一个锚窗格，其中包含另一个锚窗格。我可以在第二个锚窗格中更改场景吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:49:11.380

只需在 Anchorpane 中加载 AnchorPane。无需创造新场景..

```
AnchorPane main=new AnchorPane();
AnchorPane sub=new AnchorPane();
sub.getChildren().add(btn);
main.getChildren().add(sub); 
```

Scene 是 Node 的超类，所以我认为在 Scene 中加载场景是不可能的。但是你可以在一个阶段切换场景。

# objective-c - 词法或预处理器问题：未找到“MyViewController.h”文件

> ID：10027586
> 
> 赞同：5
> 
> 时间：2012-04-05T11:20:03.717
> 
> 标签：objective-c, ios, xcode4.3

当我尝试在`.h`and中更改视图控制器名称时`.m`，出现此错误：

```
Lexical or PreProcessor Issue
'MyViewController.h' file not found. 
```

仅供参考，尽管此词法错误，应用程序仍可正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:21:39.553

尝试通过进入`Product`菜单并单击来清理您的构建`Clean`。

我希望这可以帮助你。

# qt - OpenCV、Nokia 和 Qt - 会起作用吗？

> ID：10027589
> 
> 赞同：1
> 
> 时间：2012-04-05T11:20:09.953
> 
> 标签：qt, opencv, nokia

我很想知道是否有人有将 OpenCV 移植到诺基亚 C5 系列手机的经验。可能通过 Qt，是否可以将 OpenCV 移植到诺基亚，是否有任何已知的 OpenCV 端口，例如我们为 Android 和 Apple iPhone 提供的端口。

感谢您的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:50:22.220

有[opencv-symbian](http://sourceforge.net/projects/opencv-symbian/)，但最后一次更新是 2010-07-12。

诺基亚为 Symbian 平台提供了 OpenCV 的替代方案，它被命名为[**NCV**：诺基亚计算机视觉库](http://www.allaboutsymbian.com/news/item/5618_Nokia_Research_Center_release_.php)

> 诺基亚研究中心发布了诺基亚计算机视觉库 (NCV)。NCV 建立在 S60 上的 Symbian OS 之上，为开发人员提供额外的成像相关功能，以便在第三方应用程序中使用。该库包括来自相机的运动感应（用于游戏）、高级图像捕捉功能（算法构造、全景图）和图像后期处理功能（变形、图像合成）。

# android - 访问 SOAP 服务时使用 phoneGap 未从 Android 模拟器获得任何响应

> ID：10027590
> 
> 赞同：0
> 
> 时间：2012-04-05T11:20:11.903
> 
> 标签：android, cordova, soap-client

```
I have a SOAP service in my local system. I have implimented the Java Script code and tested in internet browser, it's working fine but the same code I am using for android application development using phoneGap, I am not getting any response from Android simulator. 
```

请帮我找出问题所在。

```
//Function called in button click.
function getEmpDetails() {
var e_id = $("#empID").val();
alert("e_id :"+e_id );
var url = "http://localhost:5020/EmployeeService";
var envelope = "<soap:Envelope xmlns:soap='http://www.w3.org/2003/05/soap-envelope'xmlns:inp='http://InputMessageNamespace'>";             
envelope += "<soap:Header/>";
envelope += "<soap:Body>";
envelope += "<inp:EmployeeDetailsOperation>";
envelope += "<EmployeeId>"+e_id+"</EmployeeId>";
envelope += "</inp:EmployeeDetailsOperation>";
envelope += "</soap:Body>";
envelope += "</soap:Envelope>";
$.ajax({
url: url, 
type: "POST",
dataType: "xml",
contentType: "text/xml;charset=UTF-8",
data: envelope,
beforeSend: function(xhr) { xhr.setRequestHeader("SOAPAction", "/Process Definition"); },
success: OnSuccess,
error: OnError
});
};
function OnSuccess(data, status)     
{
alert(status);
alert(data.xml);
}      
function OnError(request, status, error)     
{         
alert('error');
} 
function init() {
alert("init");
document.addEventListener("deviceready", deviceInfo, true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:39:50.197

*   将“localhost:5020”替换为您的本地（私有）IP 地址“192.168.xx:5020”，您的 AVD 将连接到机器开发网络服务器。在 Windows 上执行 ip-config/all 或在 linux 发行版上执行 ifconfig 以了解您的本地 IP。

    [android模拟器和本地站点](https://stackoverflow.com/questions/3243654/android-emulator-and-local-site)

# android - 如何让 android ListView 项目选择器使用 state_pressed

> ID：10027591
> 
> 赞同：2
> 
> 时间：2012-04-05T11:20:12.367
> 
> 标签：android, listview, android-layout

我想在按下时为图像视图的背景着色。我尝试使用选择器来更改不同状态（按下和未按下）的图像。现在的问题是图像用完全相同的大小替换了以前的图像，我希望它更大。我使用实现可检查的自定义布局，并且我还尝试重载 onCreateDrawableState 函数，但它从未被调用。

请帮忙..

这是它的外观：

按下前：

![在此处输入图像描述](../Images/4b77c79f4dc08220dd17a4a5f230d588.png)

按下后：

![在此处输入图像描述](../Images/60ad358f1a7cc24e096b686850d54496.png)

这是项目列表自定义布局：

```
public class ListItem extends RelativeLayout implements Checkable, OnClickListener {

    private View mItemChecked = null;
    private ImageView imageSkinEdit = null;

    /*private static final int[] CHECKED_STATE_SET = {
        android.R.attr.state_pressed
    };*/

    public ListItem(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public ListItem(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ListItem(Context context) {
        super(context);
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        try {
            mItemChecked = this.findViewById(R.id.itemlist_checkedd);
            imageSkinEdit = (ImageView)this.findViewById(R.id.skinEdit);
            imageSkinEdit.setOnClickListener(this);
        } catch (Exception e) {
        }
    }//onFinishInflate

    @Override
    public boolean isChecked() {
        if(mItemChecked != null) {
            return ((Checkable)mItemChecked).isChecked();
        }
        return false;
    }

    @Override
    public void setChecked(boolean checked) {
        if(mItemChecked != null) {
            if (checked) {
                mItemChecked.setVisibility(View.VISIBLE);
            } else {
                mItemChecked.setVisibility(View.GONE);
            }
        }
    }

    @Override
    public void toggle() {
        if(mItemChecked != null) {
            ((Checkable)mItemChecked).toggle();
        }
    }

    @Override
    public void onClick(View v) {
        final int id = v.getId();
        switch (id) {
            case R.id.skinEdit:
                //handleEdit();
                break;
        }//switch
    }

    @Override
    public int[] onCreateDrawableState(int extraSpace) {
        Log.d("onCreateDrawableState", "onCreateDrawableState");
        return super.onCreateDrawableState(extraSpace + 1);
        /*final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
        if (isChecked()) {
            Log.d("ListItem", "isChecked");
            mergeDrawableStates(drawableState, CHECKED_STATE_SET);
        }
        return drawableState;*/
    }
} 
```

选择器：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:state_pressed="true"
        android:drawable="@drawable/ic_go_edit_pressed" />
    <item
        android:state_pressed="false"
        android:drawable="@drawable/ic_go_edit" />
</selector> 
```

图像视图 XML：

```
<ImageView
        android:id="@+id/skinEdit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:paddingLeft="10dip"
        android:paddingRight="10dip"
        android:src="@drawable/edit_skin_selector" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:28:44.067

尝试在 setChecked 结束时调用 refreshDrawableState()。这将调用 onCreateDrawableState

```
 @Override
    public void setChecked(boolean checked) {
        if(mItemChecked != null) {
            if (checked) {
                mItemChecked.setVisibility(View.VISIBLE);
            } else {
                mItemChecked.setVisibility(View.GONE);
            }
        }
            refreshDrawableState();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T09:35:12.150

最后我用不同的方法做到了。你可以在我的下一个[问题中看到它](https://stackoverflow.com/questions/10162862/setting-imageview-background-issue-with-selector)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:32:16.050

你也应该为你的选择器添加一个默认状态

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T13:46:26.733

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/button_pressed" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@drawable/button_focused" /> <!-- focused -->
    <item android:state_hovered="true"
          android:drawable="@drawable/button_focused" /> <!-- hovered -->
    <item android:drawable="@drawable/button_normal" /> <!-- default -->
</selector> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T09:48:11.457

我知道，onCreateDrawableState 不调用即 ListItem 没有背景可绘制。

# windows - 使用 Windows 任务计划将批处理文件执行到新的命令窗口中

> ID：10027592
> 
> 赞同：0
> 
> 时间：2012-04-05T11:20:17.757
> 
> 标签：windows, scheduled-tasks, batch-file

我有 test_run.bat 文件被安排在指定的时间和日期运行。我已使用以下命令将其添加到任务调度程序中：

```
set testfile=%%~dp0%test_run.bat release
schtasks /create /tn "test_run" /tr "%testfile%" /sc weekly /d * /mo 1 /st %tt% /sd %dd% 
```

在这里，我计划以“release”作为参数运行“test_run.bat”。当此任务启动时，它会在后台运行。我希望它打开一个新的命令窗口（从存在此批处理文件的文件夹开始）并运行此批处理文件。

我怎样才能做到这一点？上面提到的两行是否正确（考虑释放作为参数）？

使用开始：

```
set testfile=start /c %%~dp0%test_run.bat release
schtasks /create /tn "test_run" /tr "%testfile%" /sc weekly /d * /mo 1 /st %tt% /sd %dd% 
```

我这个对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:35:26.590

The `start` command creates a new command window.

At its very simplest, the command

```
start test.bat 
```

will create a new command window and run the batch file in it.

# android - 带有自定义标题的 TabActivity 给出 NullPointerException

> ID：10027603
> 
> 赞同：0
> 
> 时间：2012-04-05T11:20:56.210
> 
> 标签：android, nullpointerexception, xamarin.android, android-tabactivity, custom-titlebar

我有一个启动器活动，其中包含两个选项卡，对应于两个单独的活动`HeatMap`和`LiveMkt`.

当我在某处阅读时，不能在子活动中使用以下语句：

```
Window.RequestFeature(WindowFeatures.CustomTitle); 
```

所以我试着跟随....

`OnCreate()`启动器活动包含：

```
base.OnCreate (bundle);
Window.RequestFeature(WindowFeatures.CustomTitle);
SetContentView(Resource.Layout.TabView);
//Code to create tabs which points to two activities `HeatMap` and `LiveMkt` 
```

* * *

`OnCreate()`的`LiveMkt`包含：

```
base.OnCreate (bundle);
SetContentView(Resource.Layout.LiveMkt);
Window.SetFeatureInt(WindowFeatures.CustomTitle,Resource.Layout.TitleBar);
edsearch = (EditText) FindViewById(Resource.Id.edsearch);       
_autoSearchBox = new AutoSearchBox();                       
_autoSearchBox.LoadSearchBox(this,edsearch,lsym); 
```

* * *

其中`AutoSearchBox`类`LoadSearchBox()`包含

```
public void LoadSearchBox(Activity activity,EditText edsearch,ListView lsym)
{
    edsearch.TextChanged+= delegate 
    {//Something
     }
} 
```

* * *

但是当我调试这个时，我进入`NullPointerException`了`LoadSearchBox()`，即使我有这两个元素`edsearch`并将它们传递给.`lsym``LiveMkt``LoadSearchBox()`

*`LiveMkt.xml`*包含`ListView` *lsym*并*`TitleBar.xml`*包含`EditText` *edsearch*。

**堆栈跟踪：**

```
Exception Details : System.NullReferenceException: Object reference not set to an instance of an object

at AutoSearchBox.LoadSearchBox (Android.App.Activity activity, Android.Widget.EditText edsearch, Android.Widget.ListView lsym) 
```

由于我是*Mono Android*的新手，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:33:54.063

你确定那`edsearch`不为空吗？[`FindViewById`](http://docs.mono-android.net/?link=M%3aAndroid.App.Activity.FindViewById#)如果找不到视图，该方法将返回 null，因此这可能是您正在发生的事情。

# ruby - 如何将两个数组与 array2 中的值合并为 1？

> ID：10027608
> 
> 赞同：2
> 
> 时间：2012-04-05T11:21:25.413
> 
> 标签：ruby, arrays

我有一个具有允许值的数组和一个具有给定值的数组。

如何将两个数组与 array2 中的值合并为 1？

```
allowed_values => ["one", "two", "three"]
given_values => ["", "one", "five", "three", "seven"]

...

expected_values => ["one", "three"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:23:03.790

你想要数组交集，你可以通过[operator`&`获得](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-26)它：

> 设置交点—返回一个新数组，其中包含两个数组共有的元素，没有重复。

```
[ 1, 1, 3, 5 ] & [ 1, 2, 3 ]   #=> [ 1, 3 ] 
```

# objective-c - 大tableview滚动滞后

> ID：10027609
> 
> 赞同：3
> 
> 时间：2012-04-05T11:21:29.393
> 
> 标签：objective-c, ios, uitableview

我的表格视图中有性能问题

我的 cellForRow 看起来像这样：

```
if (tableView == allMonthTable) {

        static NSString *cellIdentifier = @"cell";

        AllMonthCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

        if (cell == nil) {
            cell = [[AllMonthCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier] ;
        }
        Month *mo = [[dataHandler allMonth]objectAtIndex:indexPath.section];
        double budgetValue = mo.budget.doubleValue;
        [cell.budgetLabel setText:[NSString stringWithFormat:@"%.2f",budgetValue ]];
        double spentValue = mo.spent.doubleValue;
        [cell.spentLabel setText:[NSString stringWithFormat:@"%.2f",spentValue ]];
        if (spentValue > 0) {
            [cell.spentLabel setText:[NSString stringWithFormat:@"+%.2f",spentValue]];
            [cell.spentLabel setTextColor:[self greenColor]];    
        }
        else if (spentValue < 0){
            [cell.spentLabel setText:[NSString stringWithFormat:@"%.2f",spentValue]];
            [cell.spentLabel setTextColor:[self redColor]];      
        }
        double balanceValue = budgetValue+spentValue;
        [cell.balanceLabel setText:[NSString stringWithFormat:@"%.2f",balanceValue ]];
        if (balanceValue > 0) {
            [cell.balanceLabel setText:[NSString stringWithFormat:@"+%.2f",balanceValue]];
            [cell.balanceLabel setTextColor:[self greenColor]];    
        }
        else{
            [cell.balanceLabel setText:[NSString stringWithFormat:@"%.2f",balanceValue]];
            [cell.balanceLabel setTextColor:[self redColor]];      
        }
        double avgDayValue = mo.avgDay.doubleValue;
        [cell.avgDayLabel setText:[NSString stringWithFormat:@"%.2f",avgDayValue ]];

        if (avgDayValue > 0) {
            [cell.avgDayLabel setText:[NSString stringWithFormat:@"+%.2f",avgDayValue]];
        }
        int numberOfExpValue = mo.expenses.intValue;
        [cell.numberOfExpLabel setText:[NSString stringWithFormat:@"%d",numberOfExpValue ]];
        return cell;
    }
    return nil;
} 
```

我的 AllMonthCell.m 文件看起来像这样：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {

        UIFont *font = [UIFont fontWithName:@"Cochin" size:14.0];
        UIFont *fontBold = [UIFont fontWithName:@"Cochin-Bold" size:14.0];

        self.frame = CGRectMake(0, 0, 312, 100);

        UIView *top = [[UIView alloc]initWithFrame:CGRectMake(4, 0, 304, 1)];
        [top setBackgroundColor:[UIColor lightGrayColor]];

        UILabel *budgetStringLabel = [[UILabel alloc]initWithFrame:CGRectMake(10, 10, 102, 16)];
        [budgetStringLabel setTextAlignment:UITextAlignmentLeft];
        [budgetStringLabel setFont:font];
        [budgetStringLabel setTextColor:[UIColor lightGrayColor]];
        [budgetStringLabel setText:@"Month Budget:"];
        [budgetStringLabel setBackgroundColor:[self grayColor]];

        UILabel *spentStringLabel = [[UILabel alloc]initWithFrame:CGRectMake(10, 30, 102, 16)];
        [spentStringLabel setTextAlignment:UITextAlignmentLeft];
        [spentStringLabel setFont:font];
        [spentStringLabel setTextColor:[UIColor lightGrayColor]];
        [spentStringLabel setText:@"Spent Money:"];
        [spentStringLabel setBackgroundColor:[self grayColor]];

        UIView *divide1 = [[UIView alloc]initWithFrame:CGRectMake(10, 50, 292, 1)];
        [divide1 setBackgroundColor:[UIColor lightGrayColor]];

        UILabel *balanceStringLabel = [[UILabel alloc]initWithFrame:CGRectMake(10, 55, 102, 16)];
        [balanceStringLabel setTextAlignment:UITextAlignmentLeft];
        [balanceStringLabel setFont:font];
        [balanceStringLabel setTextColor:[UIColor lightGrayColor]];
        [balanceStringLabel setText:@"Month Balance:"];
        [balanceStringLabel setBackgroundColor:[self grayColor]];

        UIView *divide2 = [[UIView alloc]initWithFrame:CGRectMake(10, 74, 292, 1)];
        UIView *divide3 = [[UIView alloc]initWithFrame:CGRectMake(10, 76, 292, 1)];
        [divide2 setBackgroundColor:[UIColor lightGrayColor]];
        [divide3 setBackgroundColor:[UIColor lightGrayColor]];

        UILabel *avgDayStringLabel = [[UILabel alloc]initWithFrame:CGRectMake(10, 94, 200, 16)];
        [avgDayStringLabel setTextAlignment:UITextAlignmentLeft];
        [avgDayStringLabel setFont:font];
        [avgDayStringLabel setTextColor:[UIColor lightGrayColor]];
        [avgDayStringLabel setText:@"Per Day:"];
        [avgDayStringLabel setBackgroundColor:[self grayColor]];

        UILabel *numberOfExpStringLabel = [[UILabel alloc]initWithFrame:CGRectMake(10, 114, 102, 16)];
        [numberOfExpStringLabel setTextAlignment:UITextAlignmentLeft];
        [numberOfExpStringLabel setFont:font];
        [numberOfExpStringLabel setTextColor:[UIColor lightGrayColor]];
        [numberOfExpStringLabel setText:@"Expenses Made:"];
        [numberOfExpStringLabel setBackgroundColor:[self grayColor]];

        [self addSubview:budgetStringLabel];
        [self addSubview:top];
        [self addSubview:spentStringLabel];
        [self addSubview:divide1];
        [self addSubview:balanceStringLabel];
        [self addSubview:divide2];
        [self addSubview:divide3];
        [self addSubview:numberOfExpStringLabel];
        [self addSubview:avgDayStringLabel];

        self.budgetLabel = [[UILabel alloc]initWithFrame:CGRectMake(200, 10, 102, 16)];
        [self.budgetLabel setTextAlignment:UITextAlignmentRight];
        [self.budgetLabel setFont:font];
        [self.budgetLabel setBackgroundColor:[self grayColor]];
        [self.budgetLabel setTextColor:[UIColor darkGrayColor]];

        self.spentLabel = [[UILabel alloc]initWithFrame:CGRectMake(200, 30, 102, 16)];
        [self.spentLabel setTextAlignment:UITextAlignmentRight];
        [self.spentLabel setFont:font];
        [self.spentLabel setBackgroundColor:[self grayColor]];
        [self.spentLabel setTextColor:[UIColor lightGrayColor]];

        self.balanceLabel = [[UILabel alloc]initWithFrame:CGRectMake(200, 55, 102, 16)];
        [self.balanceLabel setTextAlignment:UITextAlignmentRight];
        [self.balanceLabel setFont:fontBold];
        [self.balanceLabel setBackgroundColor:[self grayColor]];

        self.avgDayLabel = [[UILabel alloc]initWithFrame:CGRectMake(200, 94, 102, 16)];
        [self.avgDayLabel setFont:font];
        [self.avgDayLabel setBackgroundColor:[self grayColor]];
        [self.avgDayLabel setTextColor:[UIColor lightGrayColor]];
        [self.avgDayLabel setTextAlignment:UITextAlignmentRight];

        self.numberOfExpLabel = [[UILabel alloc]initWithFrame:CGRectMake(200, 114, 102, 16)];
        [self.numberOfExpLabel setTextAlignment:UITextAlignmentRight];
        [self.numberOfExpLabel setFont:font];
        [self.numberOfExpLabel setBackgroundColor:[self grayColor]];
        [self.numberOfExpLabel setTextColor:[UIColor lightGrayColor]];

        [self addSubview:self.budgetLabel];
        [self addSubview:self.spentLabel];
        [self addSubview:self.balanceLabel];
        [self addSubview:self.numberOfExpLabel];
        [self addSubview:self.avgDayLabel];

        [self setBackgroundColor:[self grayColor]];

    }
    return self;
} 
```

这是滚动时时间分析的屏幕截图：

![时间概况](../Images/7cdf8f02bda37986e8f80a8aa1a8720e.png)

所以我创建了 AllMonthCell 类型的可重用单元格，并将值分配给它们，有没有办法让它更快？滚动表格时我有非常严重的滞后..

一个提示会很棒:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:34:54.297

您应该重复使用单元格

让我为你推导出一个模式

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"cell";
    UILabel *noExpense;
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier] autorelease];
        //Just the view alone should be created here no assigning of data here
        //let me add just one custom view for easy understanding
        noExpense = [[UILabel alloc]initWithFrame:CGRectMake(8, 20, 296, 16)];
       [noExpense setTextAlignment:UITextAlignmentCenter];
       [noExpense setFont:fontName];
       //[noExpense setText:@"No data available yet."];  Dont do this
       [noExpense setTextColor:[UIColor lightGrayColor]];
       [noExpense setBackgroundColor:tableView.backgroundColor];
       [noExpense setTag:100];  //Must set tag here
       [cell addSubview:noExpense];
    }
    else
    {
        noExpense = [cell viewWithTag:100];
        //You have to initialize your custom views which you created already.
        //Just the view alone should be assigned here no assigning of data here
    }
    //Load all the data into the views here
    [noExpense setText:@"Somedata which you have to set"];
    return cell;
} 
```

要了解有关 tableview 的更多信息，请参阅文档。它是理解 tableviews 的圣经。

[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7)

# c# - 泛型类型参数之前的“out”是什么意思？

> ID：10027611
> 
> 赞同：21
> 
> 时间：2012-04-05T11:21:34.337
> 
> 标签：c#, .net, generics, compiler-construction, c#-3.0

我刚刚在寻找`GroupBy`返回类型时看到了一个不熟悉的语法：

```
public interface IGrouping<out TKey, out TElement> : IEnumerable<TElement> 
```

[**MSDN 源**](http://msdn.microsoft.com/en-us/library/bb344977.aspx)

我知道`out`方法中的含义，但不知道泛型接口中的含义。

`out`泛型类型是什么意思？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-05T11:29:20.073

它表示[协变](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)参数。另请参阅[MSDN](http://msdn.microsoft.com/en-us/library/dd799517.aspx)上的说明。本质上它说，那`IGrouping<Aderived, Bderived>`可以被视为`IGrouping<Abase, Bbase>`，因此你可以

```
IGrouping<Aderived, Bderived> gr = MakeGrouping(...);
IGrouping<Abase, Bbase> grBase = gr; 
```

if`Aderived`是一个接口或派生自的类型`Abase`。当您想要调用需要类型参数的方法`IGrouping<Abase, Bbase>`但您只有一个类型的对象时，此功能会派上用场`IGrouping<Aderived, Bderived>`。在这种情况下，由于它们的类型参数的协方差，这两种类型可以被认为是等价的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-05T11:27:23.790

它是 C# 4.0 (Visual Studio 2010) 中引入的两个通用修饰符之一。

它表示它所声明的泛型参数是协变的。

修饰符表示它所声明的`in`泛型参数是逆变的。

请参阅MSDN 上的[(Generic Modifier)](http://msdn.microsoft.com/en-us/library/dd469487.aspx)和[in (Generic Modifier) 。](http://msdn.microsoft.com/en-us/library/dd469484.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-05T11:28:38.017

out 仅表示该类型仅用于输出，例如

```
public interface Foo<out T>
{
   T Bar()
} 
```

还有一个修饰符意味着该类型仅用于输入，例如

```
public interface Foo<in T>
{
    int Bar(T x)
} 
```

使用这些是因为带有 in 的接口在 T 中是协变的，而没有 out 的接口在 T 中是逆变的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-05T11:27:42.500

`out`简单地说，在这种情况下，关键字将指示相应的类型参数是协变的 - 协变使您能够使用比泛型参数指定的类型更多的派生类型。

顺便说一句，请参阅 Eric Lippert 的这十部分系列，以了解有关协方差和逆变的更多信息：http: [//blogs.msdn.com/b/ericlippert/archive/2007/10/16/covariance-and-contravariance-in- c-part-one.aspx](http://blogs.msdn.com/b/ericlippert/archive/2007/10/16/covariance-and-contravariance-in-c-part-one.aspx)

# javascript - 内部 html 应该被网格取代

> ID：10027614
> 
> 赞同：0
> 
> 时间：2012-04-05T11:21:53.333
> 
> 标签：javascript, jquery-ui, jquery, jqgrid

```
document.getElementById('add').innerHTML=http://localhost/www/easyui-crud-demo/index.html; 
```

你好上面是我在java脚本中使用的代码。当我点击按钮时，div（id是'add'）应该被网格替换（index.html显示一个网格）。这是对的吗 ？请帮忙谢谢

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:28:24.550

我会说“我的上帝”:)，如果您认为从内部 HTML 分配中您期望加载 index.html 页面？

如果您通过 LINK 分配 div 的内容，则需要适当的 html 锚标记，例如

```
document.getElementById('add').innerHTML="<a href='http://localhost/www/easyui-crud-demo/index.html'>linkname </a>"; 
```

如果要加载内容，请使用 AJAX 或 IFRAME

例如[IFRAME](http://www.aaronpeters.nl/blog/iframe-loading-techniques-performance) [AND](http://www.cryer.co.uk/resources/javascript/script4.htm) 让您走上正轨

希望这会帮助你。

原谅我的话:)

# networking - Lighttpd 之谜，“lighttpd 已死，但 pid 文件存在”！解决方案是什么？

> ID：10027615
> 
> 赞同：0
> 
> 时间：2012-04-05T11:21:59.037
> 
> 标签：networking, webserver, lighttpd

我正在使用 Lighttpd 网络服务器。我试图尝试一个新的简单模块，其目的是将http请求详细信息写入文本文件。但是在创建该模块并编译它之后，每次我启动 Web 服务器时，它都会在几分钟内死掉。然后，当我检查状态时，它说 Web 服务器已死，但 pid 文件存在。在终端中显示以下内容。

[root@konsult2_vm ~]# service lighttpd status lighttpd dead but pid file存在

此外，当我尝试定位 lighttpd.pid 文件时，它会像这样定位它

[root@konsult2_vm ~]# 定位 lighttpd.pid

/var/run/lighttpd.pid

但是当我去文件夹并寻找它时，我找不到它。我完全糊涂了。我怎样才能阻止 lighttpd 死机，有什么解决办法？

谢谢

# asp.net - 使用 facebook 登录的 ajax 评级控制

> ID：10027623
> 
> 赞同：0
> 
> 时间：2012-04-05T11:22:22.920
> 
> 标签：asp.net, ajax, facebook-graph-api, facebook-c#-sdk

我有一个视频网站。我希望用户用他们的 facebook id 为视频投票。我想要的是在视频下放置一个 ajax 评级控件。如果用户当前登录 facebook，当用户单击控件对视频进行评分时，我想获取 facebook 用户的用户 ID。如果用户未登录，我想显示一个用于 facebook 登录的模式弹出窗口，并在用户登录后获取用户 ID。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:56:57.333

如果我没记错的话，您将不得不一直在 Facebook 中创建一个应用程序并将其与您的网站集成。您可能首先要检查 Javascript SDK [http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

如果这不起作用，我有一篇博客文章可以完成完整的服务器端集成 [http://theocdcoder.com/tutorial-integrating-facebook-authentication-asp-net-mvc-3/](http://theocdcoder.com/tutorial-integrating-facebook-authentication-asp-net-mvc-3/)

# objective-c - 添加 CocoaAsyncSocket 时架构 armv7 的未定义符号

> ID：10027627
> 
> 赞同：17
> 
> 时间：2012-04-05T11:22:37.313
> 
> 标签：objective-c, ios, ios5, xmpp, xmppframework

我正在尝试将 XMPPFramework 与 xcode 4.2.1 下的 iOS5 项目 (ARC) 一起使用，但我遇到了这个问题。一旦我将 CocoaAsyncSocket 添加到我的项目中，作为准备我的项目以使用 XMPPFramework 的一部分，如[1](https://github.com/robbiehanson/XMPPFramework/wiki/GettingStarted_iOS)所示，我会收到以下错误。

我见过其他一些人有“架构 armv7 的未定义符号”，但我目前还没有找到这个特定问题的答案。

我已链接到 CFNetwork 并将 GCDAsyncSocket.m 标记为非 ARC (-fno-objc-arc)，但我仍然收到错误消息。任何帮助表示赞赏。

```
Undefined symbols for architecture armv7:
  "_SSLGetBufferedReadSize", referenced from:
      ___33-[GCDAsyncSocket flushSSLBuffers]_block_invoke_0 in GCDAsyncSocket.o
      -[GCDAsyncSocket doReadData] in GCDAsyncSocket.o
  "_SSLSetIOFuncs", referenced from:
      -[GCDAsyncSocket ssl_startTLS] in GCDAsyncSocket.o
  "_SSLRead", referenced from:
      -[GCDAsyncSocket flushSSLBuffers] in GCDAsyncSocket.o
      -[GCDAsyncSocket doReadData] in GCDAsyncSocket.o
  "_SSLWrite", referenced from:
      -[GCDAsyncSocket doWriteData] in GCDAsyncSocket.o
  "_SSLClose", referenced from:
      -[GCDAsyncSocket closeWithError:] in GCDAsyncSocket.o
  "_SSLCreateContext", referenced from:
      -[GCDAsyncSocket ssl_startTLS] in GCDAsyncSocket.o
  "_SSLSetEnabledCiphers", referenced from:
      -[GCDAsyncSocket ssl_startTLS] in GCDAsyncSocket.o
  "_SSLSetCertificate", referenced from:
      -[GCDAsyncSocket ssl_startTLS] in GCDAsyncSocket.o
  "_SSLSetConnection", referenced from:
      -[GCDAsyncSocket ssl_startTLS] in GCDAsyncSocket.o
  "_SSLHandshake", referenced from:
      -[GCDAsyncSocket ssl_continueSSLHandshake] in GCDAsyncSocket.o
  "_SSLSetProtocolVersionMax", referenced from:
      -[GCDAsyncSocket ssl_startTLS] in GCDAsyncSocket.o
  "_SSLSetPeerDomainName", referenced from:
      -[GCDAsyncSocket ssl_startTLS] in GCDAsyncSocket.o
  "_SSLSetProtocolVersionMin", referenced from:
      -[GCDAsyncSocket ssl_startTLS] in GCDAsyncSocket.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-08T14:35:20.163

您只需要在 Frameworks 中添加 SecurityFramework。我也遇到了同样的问题。

# php - 在 PHP 中，我应该使用哪个运算符 '<' 或 '<='？

> ID：10027628
> 
> 赞同：0
> 
> 时间：2012-04-05T11:22:36.963
> 
> 标签：php

我正在使用以下代码：

```
<?php
$start_time = microtime(true);
for($i=1;$i <= 999999; $i++){

}
$end_time = microtime(true);
echo "Time Interval : ".$end_time-$start_time;

$start_time = microtime(true);
for($j=1;$j < 1000000; $j++){

}
$end_time = microtime(true);
echo "Time Interval : ".$end_time-$start_time;
?> 
```

它显示它们之间的时间差为 0.0943 秒。所以这样 <= 运算符比'<'快。我只是想知道使用 <= 运算符而不是 '<' 是否有任何缺点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:26:32.807

当然没有性能损失。两个操作数都是 PHP 字节码中的单个操作码，最终都应该使用一条 CPU 指令来执行。

*   [http://www.php.net/manual/en/internals2.opcodes.is-smaller.php](http://www.php.net/manual/en/internals2.opcodes.is-smaller.php)

*   [http://www.php.net/manual/en/internals2.opcodes.is-smaller-or-equal.php](http://www.php.net/manual/en/internals2.opcodes.is-smaller-or-equal.php)

当然我同意评论 - 你永远不应该在你的代码的这个低级别优化东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:29:06.923

[http://en.wikipedia.org/wiki/Program_optimization](http://en.wikipedia.org/wiki/Program_optimization)

> “过早优化”是一个短语，用于描述程序员让性能考虑影响一段代码的设计的情况。这可能会导致设计不如原本的干净或代码不正确，因为优化会使代码复杂化，而程序员会因优化而分心。

通常我会坚持使用有意义的代码而不是意义不大的更快的代码。该守卫可能是来自其他地方定义的变量的值，因此您应该保留它的含义。您不应该为了节省一小部分时间而更改所有`<`内容`<=`（这可能是一个随机错误）。

# jsf-2 - Primefaces 从右到左支持

> ID：10027631
> 
> 赞同：1
> 
> 时间：2012-04-05T11:22:52.890
> 
> 标签：jsf-2, primefaces

任何人都可以为组合框、菜单和菜单栏 css 代码指出一些 css 调整，以使 primefaces 与阿拉伯语一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:04:00.083

据我所知，不幸的是，primefaces 目前不支持 RTL（3.4），但他们告诉他们将从 3.5 版开始添加对 RTL 的支持

查看来自 primefaces 领导者的这条推文。 [https://twitter.com/primefaces/status/232541151771627520](https://twitter.com/primefaces/status/232541151771627520)

# javascript - JSONP 从 WCF 服务获取缓存响应的问题

> ID：10027632
> 
> 赞同：1
> 
> 时间：2012-04-05T11:22:56.647
> 
> 标签：javascript, jquery, wcf, caching, jsonp

我在客户端上使用 JSONP 使用 WCF 服务从服务器获取数据，该服务可以使用 HTTP GET 返回结果（它获取一个“回调”参数，它是一个“函数名”并返回回调（{data}），你知道。 ..JSONP）。

一切正常，但如果我在服务的一项操作上启用缓存（使用“AspNetCacheProfile”） - 那么出现问题了，我不确定是什么......

我获得 JSONP 的方式是使用我前段时间从 SO (http://stackoverflow.com/questions/2499567/how-to-make-a-json-call-to-一个网址）

```
function getJSONP(url, success) {
  var ud = 'fc_' + + Math.floor(Math.random()*1000000),
      script = document.createElement('script'),
      head = document.getElementsByTagName('head')[0]
          || document.documentElement;

  window[ud] = function(data) {
      head.removeChild(script);
      success && success(data);
  };

  script.src = url.replace('callback=?', 'callback=' + ud);
  head.appendChild(script);
} 
```

这会创建一个随机 id ('fc_xxxx')，然后将其分配为窗口对象内的一个函数，然后将其用作注入到文档中的动态 javascript 的 url 的“回调”参数，然后是“ud”函数运行，删除脚本并使用接收到的数据调用“成功”回调函数。

在服务的正常未缓存操作上使用它时，通常需要大约 200 毫秒才能获得响应，并且可以正常工作。
缓存的响应需要大约 10 毫秒 - 我收到一个错误，即“fc_XXXXX”函数未定义。

就好像响应对它来说“太快了”。

我也尝试使用**jQuery.getJSON()** - 而且，回调也没有触发。
在所有情况下，当我查看 Firebug 中的网络流量时 - 我可以看到 GET 请求，并且**我可以看到正确的数据确实被返回了**。

有谁知道我怎样才能让它与缓存的响应一起工作......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:50:28.733

我知道了！每次调用的响应函数的名称都不同（在我的手动 jsonp 实现和 jQuery 上）。
**函数的名称是来自服务器的响应**的一部分（因为这是 jsonp 工作方式的一部分......）。因此，如果响应是缓存响应 - 它实际上将返回函数的**旧名称**（它将不再存在于客户端的上下文中）。
所以在这种情况下，我只需要为回调函数提供一个常量名称，它应该没问题。:)

# javascript - 未渲 染组件上的 ExtJS Accordion 事件

> ID：10027645
> 
> 赞同：0
> 
> 时间：2012-04-05T11:23:27.140
> 
> 标签：javascript, extjs, extjs4

我有一个由 5 个面板组成的手风琴。每个面板都包含一组复选框。我想将更改事件附加到复选框。但是由于面板折叠，复选框不会被渲染，因此我无法附加事件。知道我该怎么做。

注意：我正在使用 ExtJS 设计器制作手风琴和复选框。

到目前为止所做的事情。

我在复选框中添加了一个类并尝试使用查询访问它们

```
 Ext.query('.winrej'); 
```

然而，这给了我打开的面板中的复选框列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T00:35:49.903

如果复选框尚未呈现，您将不会捕获任何用户交互事件，因此订阅它们没有意义。尝试在某些手风琴布局面板呈现后订阅事件。还是我错过了什么？你到底想达到什么目的？

# windows-phone-7 - wp7 如何通过电子邮件发送带有我当前位置的 google 或 bing 超链接

> ID：10027648
> 
> 赞同：0
> 
> 时间：2012-04-05T11:23:30.050
> 
> 标签：windows-phone-7, google-maps, hyperlink, location, bing-maps

我只想通过超链接发送（电子邮件）我当前的位置（当您单击它时，它将打开带有该位置的 google 或 bing 地图），而不是文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T18:47:32.093

您可以尝试以下方法：

```
private void StartLocationButton_Click(object sender, RoutedEventArgs e)
{
    // The watcher variable should be scoped to the class
    if (watcher == null)  
    {
        watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High); 
        watcher.MovementThreshold = 20; 
        watcher.StatusChanged += new 
                       EventHandler<GeoPositionStatusChangedEventArgs>(watcher_StatusChanged);  
    }
    watcher.Start();
}

void watcher_StatusChanged(object sender, GeoPositionStatusChangedEventArgs e)
{
    Dispatcher.BeginInvoke(() => MyStatusChanged(e)); //Call BeginInvoke as discussed below…
}

void MyStatusChanged(GeoPositionStatusChangedEventArgs e)
{
    if (e.Status == GeoPositionStatus.Ready)
    {
        var link = String.Format("http://www.google.com/maps?q={0}+{1}", 
            e.Position.Location.Latitude.ToString("0.000000"), 
            e.Position.Location.Longitude.ToString("0.000000"));

        EmailComposeTask emailComposeTask = new EmailComposeTask();
        emailComposeTask.To = "send@mail.com";

        emailComposeTask.Body = link;

        emailComposeTask.Subject = "GPS";
        emailComposeTask.Show();

        //Stop the Location Service to conserve battery power.
        watcher.Stop();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:41:08.807

简单：使用[EmailComposeTask](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.emailcomposetask%28v=vs.92%29.aspx)并在文本中使用 设置一些内容`maps:11.111,22.222`，其中 11.111 是纬度，22.222 是经度。

Windows Phone 电子邮件客户端将看到“地图：”文本并自动将其转换为使用必应地图应用程序打开的链接！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:38:13.470

到目前为止，不支持[EMailComposeTask](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.emailcomposetask%28v=vs.92%29.aspx)发送的电子邮件中的 HTML 数据。
你可以参考[这个讨论](http://forums.create.msdn.com/forums/p/83569/506134.aspx)。

# lua - 如何从变量中删除未出现在特定符号旁边的所有空格？

> ID：10027650
> 
> 赞同：2
> 
> 时间：2012-04-05T11:23:44.997
> 
> 标签：lua

我需要删除变量中单词之间的空格，但切勿删除以下任何符号旁边的任何空格：①、②、③、④、⑤、⑥、⑦、⑧、⑨或⑩。例如：

```
The bear ate the fish. 
```

这变成：

```
Thebearatethefish. 
```

例如：

```
The ① bear ate the ② fish. 
```

这变成：

```
The ① bearatethe ② fish. 
```

如何从变量中删除所有空格，除了出现在这些符号之一旁边的那些空格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:32:13.613

通常你想要做的是做一个模式替换：

```
string.gsub("The bear ate the fish.", "%s", "") 
```

现在你需要教 gsub 关于特殊字符的知识：

```
string.gsub("The ① bear ate the fish.", "[^①②③④⑤⑥⑦⑧⑨⑩]%s[^①②③④⑤⑥⑦⑧⑨⑩]", "") 
```

只要前一个和下一个字符不在集合中，这将替换任何空格。如果没有使用 unicode 编译 Lua，您可能需要用正确的 unicode 值替换字符。

# c# - C#多线程问题

> ID：10027652
> 
> 赞同：2
> 
> 时间：2012-04-05T11:23:46.923
> 
> 标签：c#, winforms, multithreading

我有一个用 c# (Visual Studio 2010) 开发的 Windows 应用程序，它与连接到 PC 的 USB 端口的 USB-CAN 转换器交互。我在一个线程上实现了 UI，在单独的线程上实现了传输和接收逻辑。完成我的任务后，我想关闭这个线程并返回到当前挂起的 UI 线程！！

我尝试使用 abort 函数强行终止线程，但它引发了异常。那么如何在我的任务完成后优雅地结束这个线程。

我有以下两个问题：

1.  如何优雅地终止线程并返回UI线程？
2.  为什么这个发送和接收线程没有中止和挂起UI线程？

以下代码供您参考：

```
#region recievedthrad
public void ThreadProcReceive()
{
    try
    {
        bool fDoExit = false;

        do
        {
            if (bFlag)
                DeleteAllResources();  // This will free all the driver resources.

            // wait for receiving messages or exiting this thread
            /* Note: After completion of the task, this method needs to return a 0 or 2 value. But still it returns 1 or 258 and never exits the thread. */

            int index = WaitHandle.WaitAny(m_RxWaitHandles);
            if (index == 0)
            {
                // exit this thread
                fDoExit = true;
            }
            else if (index == 1)
            {
                // receive all messages
                ReceiveAllCanMessages();
            }
            else if (index == 2)
            {
                // exit this thread
                ReceiveStatus(UcanDotNET.USBcanServer.USBCAN_CHANNEL_CH0);
            }      
        } while ((fDoExit == false));
    }
    catch(Exception ex)
    {

    }
 }
#endregion 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:58:13.857

> 如何优雅地终止线程并返回UI线程？

如果线程在这些 UcanDotNet 调用之一中阻塞，那么您将不得不使用另一个 UcanDotNet API 来解除阻塞……假设该库能够优雅地终止其操作之一。我不熟悉这个 UcanDotNet 库，所以我不知道它的功能是什么。

如果像大多数第三个库一样，这个 UcanDotNet 库不提供取消操作的必要方法，那么您真的别无选择，只能将所有这些调用放在另一个进程中并通过 WCF 与其通信。这样，如果您必须突然终止它，那么您只需终止进程。杀死另一个进程比调用更安全`Thread.Abort`，因为中止线程会破坏内存。

> 为什么这个发送和接收线程没有中止和挂起UI线程？

`Thread.Abort`是阻塞调用。它等待中止注入线程。我怀疑您的问题是线程在不允许异步异常注入（例如`finally`块或非托管代码）的上下文中运行。使用以下代码很容易证明这一点。

```
public static void Main(string[] args)
{
    int i = 0;
    var t = new Thread(() =>
    {
        try
        {
        }
        finally
        {
            while (true) i++;
        }
    });
    t.Start();
    Thread.Sleep(1000);
    t.Abort(); // this blocks indefinitely!
    Console.WriteLine("aborted"); // never gets here!
} 
```

# android - 使用活动组时，无法从 alertdialog onclicklistener 开始新活动

> ID：10027657
> 
> 赞同：0
> 
> 时间：2012-04-05T11:23:50.993
> 
> 标签：android, android-tabhost, android-alertdialog, activitygroup

我只有 2 个选项卡，并使用[Experience - Multiple Android Activity in a TabActivity](http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html)作为参考。
我的类体系结构是这样的：
**MainActivity** 扩展 TabActivity
1\. **TabGroup1Activity**扩展 TabGroupActivity （从上面的参考实现的 TabGroupActivity 类）
1.i。**Tab1Activity**扩展 MapActivity（它有多个标记）
2\. **TabGroup2Activity**扩展 TabGroupActivity
2.i。**Tab2Activity**

在第二个选项卡（Tab2Activity）中，我显示了具有多个标记的谷歌地图。在点击标记时，我显示了带有更多信息选项的警报对话框。
Onclicking 更多信息选项我必须开始新的活动而不丢失底部的标签。

我不知道的错误在哪里？

**MapItemizedOverlay.java**

```
public class InformationItemizedOverlay extends ItemizedOverlay<OverlayItem> {
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
private Context mContext;
Activity parentContext;

public InformationItemizedOverlay(Drawable defaultMarker, Context context,
        Activity parent) {
    super(boundCenterBottom(defaultMarker));

    mContext = context;
    parentContext = parent;
}

public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

@Override
protected OverlayItem createItem(int i) {
    return mOverlays.get(i);
}

@Override
public int size() {
    return mOverlays.size();
}

@Override
protected boolean onTap(int index) {

    OverlayItem item = mOverlays.get(index);
    AlertDialog.Builder dialog = new AlertDialog.Builder(parentContext);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.setPositiveButton("More Info..",
            new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    Intent test = new Intent(parentContext,
                            AboutActivity.class);
                    TabGroupActivity parentActivity = (TabGroupActivity) parentContext;
                    parentActivity
                            .startChildActivity("AboutActivity", test);
                }
            });
    dialog.show();
    return true;

}
} 
```

当我尝试使用上述代码时，当我单击警报对话框中的更多信息按钮时会出现错误。
当我删除警报对话框并编写以下代码时，它工作正常，在同一选项卡中打开新活动：

```
@Override
protected boolean onTap(int index) {

    OverlayItem item = mOverlays.get(index);

                    Intent test = new Intent(parentContext,
                            AboutActivity.class);
                    TabGroupActivity parentActivity = (TabGroupActivity) parentContext;
                    parentActivity
                            .startChildActivity("AboutActivity", test);
                }
            });

    return true;

} 
```

当我单击 alertdialog 上的更多信息按钮时，如何使它能够打开新活动？
帮助 ！！

> 04-05 17:42:02.171: W/dalvikvm(2631): threadid=1: 线程退出未捕获异常 (group=0x4001d800) 04-05 17:42:02.171: E/AndroidRuntime(2631): 致命异常: main 04-05 17:42:02.171: E/AndroidRuntime(2631): java.lang.ClassCastException: com.bbs.MainActivity 04-05 17:42:02.171: E/AndroidRuntime(2631): at com.bbs1.InformationItemizedOverlay$1 .onClick(InformationItemizedOverlay.java:63) 04-05 17:42:02.171: E/AndroidRuntime(2631): 在 com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158) 04-05 17 :42:02.171: E/AndroidRuntime(2631): 在 android.os.Handler.dispatchMessage(Handler.java:99) 04-05 17:42:02.171: E/AndroidRuntime(2631): 在 android.os.Looper。循环（Looper.java:123）04-05 17:42:02.171：E/AndroidRuntime（2631）：在 android.app.ActivityThread.main（ActivityThread.java：4627) 04-05 17:42:02.171: E/AndroidRuntime(2631): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-05 17:42:02.171: E/AndroidRuntime(2631): 在 java .lang.reflect.Method.invoke(Method.java:521) 04-05 17:42:02.171: E/AndroidRuntime(2631): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java: 868) 04-05 17:42:02.171: E/AndroidRuntime(2631): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 04-05 17:42:02.171: E/AndroidRuntime( 2631）：在 dalvik.system.NativeStart.main（本机方法）ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 04-05 17:42:02.171: E/AndroidRuntime(2631): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 04-05 17：42：02.171：E/AndroidRuntime（2631）：在 dalvik.system.NativeStart.main（本机方法）ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 04-05 17:42:02.171: E/AndroidRuntime(2631): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 04-05 17：42：02.171：E/AndroidRuntime（2631）：在 dalvik.system.NativeStart.main（本机方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:11:59.737

你必须运行`AlertDialogue`on `current UI Thread`。用于`runOnUiThread()`启动 UI 线程。示例如下：

```
runOnUiThread(new Runnable() {
 @Override
 public void run() {
  AlertDialog.Builder dialog = new AlertDialog.Builder(parentContext);
  dialog.setTitle(item.getTitle());
  dialog.setMessage(item.getSnippet());
  dialog.setPositiveButton("More Info..",new DialogInterface.OnClickListener() {
  @Override
  public void onClick(DialogInterface dialog, int which) {
  // TODO Auto-generated method stub
  Intent test = new Intent(parentContext,AboutActivity.class);
  TabGroupActivity parentActivity = (TabGroupActivity) parentContext;
  parentActivity.startChildActivity("AboutActivity", test);
  }
  });
  dialog.show();
 }//run
});//runOnUIThred 
```

# r - 将一个或多个系数设置为特定整数

> ID：10027664
> 
> 赞同：14
> 
> 时间：2012-04-05T11:24:03.427
> 
> 标签：r, lm

我正在使用标准 lm 模型，并希望将我的一个或多个变量的系数设置为特定整数。

例如，我希望天气和价格变量的系数分别为 647 和 15。

我正在使用带有标准公式的 lm 函数。

到目前为止，我发现的最接近的东西是 glm 中的 offset 函数，或者 systemfit 中的 restrict.rhs。

我还研究了用它们的系数集从这些变量中减去总贡献，但这不是很可扩展。

我知道设置系数的所有问题，但只是从探索的角度来看。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-05T11:39:09.570

您可以在公式中使用偏移项，并在其中包含所需的系数和变量：

```
df<-data.frame(aa=1:6,bb=2:7,cc=c(4,2,7,5,8,3))

lm(cc ~ aa + offset(647*bb), data = df) 
```

所以这是回归`cc`加上`aa`固定期限`bb * 647`。对于多个给定系数，添加适当的附加`offset()`项。

# android - Android：运行应用程序

> ID：10027667
> 
> 赞同：1
> 
> 时间：2012-04-05T11:24:15.817
> 
> 标签：android

如何知道其他应用程序正在我的应用程序的设备中运行，以便使用我的应用程序我可以杀死其他正在运行的应用程序。在安卓中可以吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:30:20.587

你可以这样看到它们：

```
activityManager = (ActivityManager) this
                    .getSystemService(ACTIVITY_SERVICE);
            arylistTask = new ArrayList<String>();
            List<ActivityManager.RunningTaskInfo> mRunningTasks =
            activityManager.getRunningTasks(30); 
```

但我不太确定你能不能杀了他们。我徘徊作为你的答案@Aki，一些任务管理应用程序是如何工作的？只是为了好奇。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:33:53.907

```
// Get currently running application processes
    List<ActivityManager.RunningAppProcessInfo> list = servMng.getRunningAppProcesses();
    if(list != null){
     for(int i=0;i<list.size();++i){
      if("com.android.email".matches(list.get(i).processName)){
       int pid = android.os.Process.getUidForName("com.android.email");
             android.os.Process.killProcess(pid);
      }else{
       mTextVIew.append(list.get(i).processName + "\n");
      }
     }
    }

---------------------------------------------------------------------------

    // Get currently running service
    List<ActivityManager.RunningServiceInfo> list = servMng.getRunningServices(1024);
    if(list != null){
     for(int i=0;i<list.size();++i){
      mTextVIew.append(list.get(i).service.getClassName() + "\n");
     }
    }

---------------------------------------------------------------------------

    // Get currently running tasks
    List<ActivityManager.RunningTaskInfo> list = servMng.getRunningTasks(1024);
    if(list != null){
     for(int i=0;i<list.size();++i){
      mTextVIew.append(list.get(i).toString() + "\n");
     }
    }

--------------------------------------------------------------------------- 
```

This example captures the Android Native "back" button event from the hardware back button and prompts the user "do you really want to leave my app" and if the user selects "yes" it kills the App.

```
 @Override 
public boolean onKeyDown(int keyCode, KeyEvent event) {
    //Handle the back button
    if(keyCode == KeyEvent.KEYCODE_BACK) {
        //Ask the user if they want to quit
        new AlertDialog.Builder(this)
        .setIcon(android.R.drawable.exclamationpoint)
        .setTitle("Exit?")
        .setMessage("You are about to exit the Application. " + 
                     "Do you really want to exit?")
        .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
             @Override
            public void onClick(DialogInterface dialog, int which) {
                //Stop the activity
                 //maintenancetabs.this.finish();
                 int pid = android.os.Process.myPid();
                 android.os.Process.killProcess(pid);
                }
         })
        .setNegativeButton("No", null)
        .show();
         return true;
    }     else {
        return super.onKeyDown(keyCode, event);
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:27:48.373

绝对不可能从您的应用程序中杀死其他正在运行的应用程序。那将是一个巨大的安全问题。

# last.fm - 从 last.fm xml (api artist.getinfo) 获取大型艺术家图像

> ID：10027668
> 
> 赞同：0
> 
> 时间：2012-04-05T11:24:20.623
> 
> 标签：last.fm

这是上一个 fm 的 xml 响应：

```
<lfm status="ok">
   <artist>
      <name>Adele</name>
      <mbid>1de93a63-3a9f-443a-ba8a-a43b5fe0121e</mbid>
      <url>http://www.last.fm/music/Adele</url>
      <image size="small">http://userserve-ak.last.fm/serve/34/71796928.png</image>
      <image size="medium">http://userserve-ak.last.fm/serve/64/71796928.png</image>
      <image size="large">http://userserve-ak.last.fm/serve/126/71796928.png</image>
      <image size="extralarge">http://userserve-ak.last.fm/serve/252/71796928.png</image>
      <image size="mega">http://userserve-ak.last.fm/serve/_/71796928/Adele+PNG.png</image>
      ... 
```

我试图回显那个大图像，但它没有返回任何东西......

```
<?php
    $xml = simplexml_load_file("http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist=ARTISTNAME&api_key=b25b959554ed76058ac220b7b2e0a026");

    $largeimg = $xml->artist->image['large'];
    echo '<img src="'.$largeimg.'" />';     
?> 
```

如果我只是把 $largeimg = $xml->artist->image; 它只是抓取第一个图像（小图像）。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:29:29.413

使用[PHP 的 children() 函数](http://php.net/manual/en/simplexmlelement.children.php)获取艺术家节点的子节点：

```
$artistTag= $xml->artist->children();
$largeImage = $artistTag[5]; // 5 is the index of the Large Image child 
```

# c# - 如何识别泛型声明类型？

> ID：10027669
> 
> 赞同：2
> 
> 时间：2012-04-05T11:24:22.480
> 
> 标签：c#, reflection

假设您有 IList 或 List 作为属性。您如何确定它是 List 还是 IList？这可以在不依赖反复试验的情况下完成吗？

类型的名称往往类似于 List`1。考虑字符串破解是否合理？

```
class Program {

    public class Class1 {
        public int a { get; set; }

        public IList<int> list { get; set; }

        public List<int> concreteList { get; set; }
    }

    static void Main(string[] args)
    {
        Test1();
        Test2();
    }

    private static void Test1()
    {
        var t = typeof (Class1);
        var p = t.GetProperty("list");

        if (p.PropertyType.IsInterface && p.PropertyType.IsGenericType)
        {
            var ps = p.PropertyType.GetGenericArguments();
            var underlying = p.PropertyType.GetInterface("IList");

            var b = underlying == typeof (IList<>);

        }
    }

    private static void Test2() {
        var t = typeof(Class1);
        var p = t.GetProperty("concreteList");

        if (!p.PropertyType.IsInterface && p.PropertyType.IsGenericType) {
            var ps = p.PropertyType.GetGenericArguments();

            var underlying3 = p.PropertyType.GetGenericTypeDefinition();

            var b = underlying3 == typeof (List<>);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T11:49:15.613

如果您可以获得属性值，那么测试其类型可能非常简单（请参阅 Guffa 的回答）。但是，如果您想在不调用该属性的情况下找到它，那么您的代码几乎就在那里 - 例如，

```
var t = p.PropertyType;
if (t.IsGenericType && !t.IsGenericTypeDefinition && !t.IsInterface && !t.IsValueType) 
{
   // we are dealing with closed generic classes 
   var typeToTest = typeof (List<>);
   var tToCheck = t.GetGenericTypeDefinition();
   while (tToCheck != typeof(object)) 
   {
      if (tToCheck == typeToTest) 
      {
         // the given type is indeed derived from List<T>
         break; 
      }
      tToCheck = toCheck.BaseType;
   }
} 
```

`IsGenericType`表示该类型是通用的 - 可以是开放的 ( `List<T>`) 或封闭的 ( `List<int>`)。`IsGenericTypeDefinition`指示泛型类型是否为开放类型。`GetGenericTypeDefinition`关闭/开放泛型类型将返回泛型定义（即开放泛型类型）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T11:32:38.577

只需使用`is`关键字：

```
IList<int> list = ...get a collection from somewhere

if (list is List<int>) {
  // the IList<int> is actually a List<int>
} else {
  // the IList<int> is some other kind of collection
} 
```

# c# - 在 C# 中下载页面 html 和 css

> ID：10027673
> 
> 赞同：0
> 
> 时间：2012-04-05T11:24:32.443
> 
> 标签：c#, c#-4.0

有没有可能在C#中，下载一个完整的html页面，即除了获取html页面还获取css页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:31:51.323

我可以提出两种解决方案：

1.  如果这在您的项目中是可能的，您可以通过自动化使用 Internet Explorer 来加载此页面并保存它。这是一个很好的例子 - [http://www.codeproject.com/Articles/2847/Automated-IE-SaveAs-MHTML](http://www.codeproject.com/Articles/2847/Automated-IE-SaveAs-MHTML)。它不是基于.NET，但想法是一样的
2.  另一种选择是手动下载 HTML（例如使用 WebClient 对象）并解析它以查找 CSS 和 JavaScript 引用。有一些第三方库可以帮助您解决此问题，例如[HTML Agility Pack](http://html-agility-pack.net)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:26:35.707

您可以使用对象轻松完成此操作`WebClient`，例如

```
WebClient client = new WebClient();
string reply = client.DownloadString (address); 
```

[WebClient.DownloadString 方法（字符串）](http://msdn.microsoft.com/en-us/library/fhd1f0sw%28v=vs.80%29.aspx)

为了获取外部 CSS 文件，您需要检查 HTML 并提取 CSS URI。然后你可以简单地调用，例如，

```
client.DownloadString ("http://www.example.com/somecss.css"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:28:14.130

是的，您可以获取整个页面并解析 html 中的 CSS 链接：

```
using (var web = new System.Net.WebClient())
{
    web.DownloadFile(_source, _destination);
} 
```

# javascript - ASP:Button 的更新进度

> ID：10027680
> 
> 赞同：-1
> 
> 时间：2012-04-05T11:24:58.173
> 
> 标签：javascript, jquery, asp.net

我想在单击服务器端按钮时使用显示“加载图像”，该按钮事件完成后应该被卸载。

[http://ajax.net-tutorials.com/controls/updateprogress-control/](http://ajax.net-tutorials.com/controls/updateprogress-control/) 必须在此使用 Javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:31:12.537

```
 $('#btnChange').click(function (event) {
     if (event.preventDefault) event.preventDefault();
     else event.returnValue = false;
     var dto = { 'id': value };
     //Webservice call started
     $.ajax({
         type: "POST",
        url: ".......",
        data: JSON.stringify(dto),//you need json2.min.js for JSON.stringify() method
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        beforeSend: function () {
            $('#imageid').attr('src', '../images/load.gif');
            //Show Loading Image which will show the progress
        },
        success: function (msg) {

            //When Successfully completed
        },
        error: function (xhr, status) {
           //when error occurs     
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:28:55.427

您可以使用[`ASP.NET Ajax UpdateProgress`](http://msdn.microsoft.com/en-us/library/bb386421.aspx)控件：

```
<asp:UpdatePanel ID="UdpFormPanel" runat="server >
<ContentTemplate>
<asp:UpdateProgress ID="UpdateProgress1" DynamicLayout="true" runat="server"
             AssociatedUpdatePanelID="UdpFormPanel" DisplayAfter="0" >
    <ProgressTemplate>
        <div class="progress">
            <asp:Image ID="ImgProgress" runat="server" 
               ImageUrl="~/images/ajax-loader-arrows.gif" 
               ToolTip="loading..." />&nbsp;please wait...
        </div>
    </ProgressTemplate>
</asp:UpdateProgress>
         .............. 
```

这是一个示例进度类：

```
.progress
{
  text-align:center;
  vertical-align:middle;
  position: absolute;
  left: 44%;
  top: 40%;
  border-style:outset;
  border-color:silver;
  background-color:Silver;
  white-space:nowrap;
  padding:5px;
} 
```

# php - jquery ajax 结果格式错误

> ID：10027689
> 
> 赞同：0
> 
> 时间：2012-04-05T11:25:54.310
> 
> 标签：php, jquery, ajax

我面临一个问题，即 AJAX 处理的结果，这种情况是我想传递结果（来自 AJAX）`'f f f f \'' into get_option('')`，我不知道为什么会变成这样：-

```
<li \'');="" f="" onclick="get_option('f" class="option normal_size">
    <a href="javascript:void(0);">f f f f \'</a>
</li> 
```

我想要的是：-

```
<li onclick="get_option('f f f f\'')" class="option normal_size">
    <a href="javascript:void(0);">f f f f \'</a>
</li> 
```

我想问题可能是空间，但我不知道如何解决它，谁能帮我一个忙？

我的 AJAX 编码是：-

```
.ajax({                         
    url:'inc_board_saving.php?board_title_input='+board_title_input_encode+'&cate_selected='+cate_selected_input_encode+'&cate_setting_selected='+cate_setting_selected,
    type:'GET',
    data:"nums="+Math.random()*1235,
    success: function(data){
    try{
        var content="";
        var obj =  eval('('+data+')');

        for (var i=0;i<obj.length;i++){
            content += "<li class='option normal_size' onclick=get_option('"+obj[i].board_name_encode+"');><a href='javascript:void(0);'>"+obj[i].board_name+"</a></li>";
        }

    }catch(e){
        return;
    }
    }
}); 
```

**结果：**

```
[
    { "board_id"          : "66",
      "board_name"        : "f f f f '",
      "board_name_encode" : "f f f f \\'"
    },
    { "board_id"          : "65",
      "board_name"        : "t t t t t",
      "board_name_encode" : "t t t t t"
    },
    { "board_id"          : "64",
      "board_name"        : "yy yyy yy",
      "board_name_encode" : "yy yyy yy"
    }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:05:25.937

希望这对您有所帮助。

```
content += '<li class="option normal_size" onclick="get_option(\'' + obj[i].board_name_encode + '\');"><a href="javascript:void(0);">' + obj[i].board_name + '</a></li>'; 
```

# java - flexiProvider 的不同 BrainpoolP521r1 参数。为什么？

> ID：10027692
> 
> 赞同：0
> 
> 时间：2012-04-05T11:26:07.173
> 
> 标签：java, elliptic-curve

我正在尝试使用 flexiProvider 生成 ECC 公钥对。我注意到 flexiProvider 的 BrainpoolP521r1 中的 p 和 q 等参数的值与许多站点中指定的值不同。指定的值是 Q= AADD.... 但我得到的是 Q=8948... 知道为什么 flexiProvider 不使用指定的值以及是否具有不同的值会影响安全性。我是 ECC 的新手。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T22:13:22.090

来自 OP：

> 我以十进制打印值

# makefile - 用make“没有规则来制作目标”的原因是什么？

> ID：10027693
> 
> 赞同：3
> 
> 时间：2012-04-05T11:26:10.670
> 
> 标签：makefile

不是 Makefile 语法是

```
target: require_files
   cmd... 
```

为什么我会遇到这个问题？

生成文件

```
MXMLC = /opt/flex/bin/mxmlc
MXMLC_RELEASE = $(MXMLC) -debug=false -compiler.optimize=true

release: bin-release/Wrapper.swf, bin-release/Application.swf

bin-release/Application.swf: src/**/*.as, lib/*.swc
    $(MXMLC_RELEASE) -output bin-release/Application.swf src/Application.as
    @@-rm ../server/public/game/Application.swf
    $(CP) bin-release/Application.swf ../server/public/game/Application.swf

bin-release/Wrapper.swf: src/*.as, src/engine/**/*.as, lib/*.swc
    $(MXMLC_RELEASE) -output bin-release/Wrapper.swf src/Wrapper.as
    @@-rm ../server/public/game/Wrapper.swf
    $(CP) bin-release/Wrapper.swf ../server/public/game/Wrapper.swf 
```

$: 制作 bin-release/Application.swf

> ~/workspace/project/src/flash [2]19:20 make: ***没有规则来制作目标`src/constant/*.as,', needed by`bin-release/Application.swf'。停止。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T11:28:11.783

去掉逗号

```
MXMLC = /opt/flex/bin/mxmlc
MXMLC_RELEASE = $(MXMLC) -debug=false -compiler.optimize=true

release: bin-release/Wrapper.swf bin-release/Application.swf

bin-release/Application.swf: src/**/*.as lib/*.swc
    $(MXMLC_RELEASE) -output bin-release/Application.swf src/Application.as
    @@-rm ../server/public/game/Application.swf
    $(CP) bin-release/Application.swf ../server/public/game/Application.swf

bin-release/Wrapper.swf: src/*.as src/engine/**/*.as lib/*.swc
    $(MXMLC_RELEASE) -output bin-release/Wrapper.swf src/Wrapper.as
    @@-rm ../server/public/game/Wrapper.swf
    $(CP) bin-release/Wrapper.swf ../server/public/game/Wrapper.swf 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:07:19.457

您可以使用 定位文件`find`，例如：

```
ASFILES  = $(shell find src -name "*.as")
SWCFILES = $(shell find lib -name "*.swc") 
```

然后在您的规则中使用该列表：

```
bin-release/Application.swf: $(ASFILES) $(SWCFILES)
        $(MXMLC_RELEASE) etc 
```

我想你会在配方中使用`.as`和文件（即位），尽管你目前没有。`.swc``$(MXMLC_RELEASE)`

# php - PHP/jQuery分页参考系统

> ID：10027696
> 
> 赞同：0
> 
> 时间：2012-04-05T11:26:25.007
> 
> 标签：php, jquery, mysql, pagination

我用 PHP 和 jQuery 为 topic+entry 项目进行了分页

假设一个主题有五页。如果我的用户在第 10 条帖子中写“@5”并且另一个用户点击了@5，页面滑动到第 5 条评论，我创建了一个推荐系统。但我不知道如果用户在第 20 篇文章中写“@5”，我该如何参考。页面可能找不到该 div，因为第 5 篇文章位于第 1 页，而我的每页分页数限制为 15，而我有 5 页。

我应该做些什么？也许我可以计算出第五个帖子在第一页并在 jQuery 中进行连锁事件：转到第一页并滑动到第五个帖子等我不知道那是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:31:44.160

您可以使用与 stackoverflow 用于链接答案的方法相同的方法：您在 url 中提供页面的 id 以及特定答案的 id（或评论，在您的情况下）。而你的 php 脚本，当它看到这种格式的 url 时，会使用 html 锚点来转换 url。

例如：[http://yoursite/question_id/comment_id](http://yoursite/question_id/comment_id)被重定向到 site/question_id#comment_id

您可以通过单击此链接来测试这个答案：[https](https://stackoverflow.com/a/10027770/311744) ://stackoverflow.com/a/10027770/311744 。此 url 提供了足够的信息，以便服务器重定向到正确的页面（在本例中为当前页面），并带有此答案的锚点 (#10027770)。

然后，您可以手动处理评论在当前页面上的特殊情况，并防止使用 javascript 重新加载同一页面（但我不会打扰，SO 也不会）

* * *

**编辑：**我的理解是，您希望能够点击写在用户评论上的“@5”，并且应该以某种方式显示该评论。此时，您有两种解决方案：

*   您重定向到可以找到评论的页面（如果此评论在另一个页面上，您应该加载该页面。这是我之前解释的。
*   您可以在引用所在的评论下方加载评论，就像 youtube 在加载回复评论时所做的那样。（在[这个 youtube 页面上](http://www.youtube.com/watch?v=Ks_UHmaZcSg)，您有一些热门评论以及可以测试的回复）

# c# - 使用 NHibernate 更改多个数据库

> ID：10027704
> 
> 赞同：0
> 
> 时间：2012-04-05T11:27:06.410
> 
> 标签：c#, session, transactions, fluent-nhibernate

我在多个数据库之间复制实体时遇到问题。我似乎无法解决这个问题，并且确实需要一些实施帮助。

我当前的实现在这里描述：

**Http模块**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Web;
using ISMSControl.Infrastructure.Sessions;
using NHibernate;
using NHibernate.Context;

namespace ISMSControl.Infrastructure.Modules
{
    public class SessionModule : IHttpModule
    {
        public void Init(HttpApplication context)
        {
            context.BeginRequest += OpenSession;
            context.EndRequest += CloseSession;
        }
        private void CloseSession(object sender, EventArgs e)
        {
            ISession session = ManagedWebSessionContext.Unbind(HttpContext.Current, SessionManager.GetCurrentSession().SessionFactory);

            if (session != null)
            {
                if (session.Transaction != null && session.Transaction.IsActive)
                    session.Transaction.Rollback();
                else
                    session.Flush();

                session.Close();
            }
        }
        private void OpenSession(object sender, EventArgs e)
        {
            ManagedWebSessionContext.Bind(HttpContext.Current,
                SessionManager.GetCurrentSession());
        }
        public void Dispose()
        {
        }
    }
} 
```

**会话管理器实现**

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Web;
using FluentNHibernate.Cfg;
using FluentNHibernate.Cfg.Db;
using ISMSControl.Infrastructure.Mappings;
using NHibernate;
using NHibernate.Cache;

namespace ISMSControl.Infrastructure.Sessions
{
    public sealed class SessionManager
    {
        private const string CurrentSessionKey = "nhibernate.current_session";
        private static readonly ISessionFactory sessionFactory;

        static SessionManager()
        {
            sessionFactory = CreateSessionFactory("source");
        }

        private static ISessionFactory CreateSessionFactory(string connectionStringName)
        {
            return Fluently.Configure()
                .Database(MsSqlConfiguration.MsSql2008.ShowSql().ConnectionString(c => c.FromConnectionStringWithKey(connectionStringName)))
                .CurrentSessionContext("managed_web")
                .Cache(c =>
                {
                    c.UseQueryCache();
                    c.ProviderClass<HashtableCacheProvider>();
                })
                .Diagnostics(d =>
                {
                    d.Enable();
                    d.OutputToConsole();
                })
                .Mappings(m => m.FluentMappings.AddFromAssemblyOf<StandardMapping>())
                .BuildSessionFactory();
        }

        public static ISession GetCurrentSession()
        {
            HttpContext context = HttpContext.Current;
            ISession currentSession = context.Items[CurrentSessionKey] as ISession;

            if (currentSession == null)
            {
                currentSession = sessionFactory.OpenSession();
                context.Items[CurrentSessionKey] = currentSession;
            }

            return currentSession;
        }
        public static void CloseSession()
        {
            HttpContext context = HttpContext.Current;
            ISession currentSession = context.Items[CurrentSessionKey] as ISession;

            if (currentSession == null)
            {
                // No current session
                return;
            }
            currentSession.Close();
            context.Items.Remove(CurrentSessionKey);
        }
        public static void CloseSessionFactory(string sessionFactoryName = null)
        {
            if (sessionFactory != null)
            {
                sessionFactory.Close();
            }
        }
    }
} 
```

**存储库**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Transactions;
using System.Web;
using ISMSControl.Domain;
using ISMSControl.Domain.Contracts;
using ISMSControl.Infrastructure.Sessions;
using NHibernate;
using NHibernate.Context;

namespace ISMSControl.Infrastructure.Repositories
{
    public class StandardRepository : IStandardRepository
    {
        public void SaveOrUpdate(Standard standard)
        {
            var session = SessionManager.GetCurrentSession();

            using (var transaction = session.BeginTransaction())
            {
                session.SaveOrUpdate(standard);
                transaction.Commit();
            }
        }
        public IEnumerable<Standard> RetrieveList()
        {
            return SessionManager.GetCurrentSession().CreateCriteria<Standard>().List<Standard>();
        }
        public void CopyTo(string database, Standard standard)
        {
            //how do i implement this method, so it will copy the standard entity to the other database?
        }
    }
} 
```

问题是我收到了所有这些不同类型的错误，例如“会话已关闭。”、“实体低于另一个事务或其他内容”。“非法尝试将集合与两个打开的会话相关联”。

我真的希望有人可以通过分享来帮助我指出正确的方向

1.  教程
2.  例子
3.  等等

**复制到实现**

```
public void CopyTo(string sessionFactoryName, Standard standard)
    {
        //gets a new session for the destination database from the destination sessionfactory.
        using (var destinationSession = SessionFactoryContainer.Current.Get(sessionFactoryName).OpenSession())
        {
            //error: no persister for...
            var newStandard = new Standard();
            newStandard.Code = standard.Code;
            newStandard.Description = standard.Description;
            newStandard.Explanation = standard.Explanation;

            destinationSession.Save(newStandard);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:58:56.163

In your "CopyTo" method, you have to create a session on the second database, deep clone the second parameter of your method and then attach the cloned object to the session you opened.

# windows - cmd /q 没有按预期工作

> ID：10027706
> 
> 赞同：0
> 
> 时间：2012-04-05T11:27:14.973
> 
> 标签：windows, command-line-arguments, command-prompt, cmd

我想启动一个命令提示符，但不希望它有任何输出。所以我开始它 -

```
cmd /q dir 
```

这工作正常，但一个 cmd.exe 不退出。如果我用这个-

```
cmd /q /c  dir 
```

我可以看到我不希望看到的 dir 命令的输出

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T11:37:14.440

/Q 选项不会禁用输出，它只会关闭 ECHO。通常不需要它，但在某些情况下它会变得有用。

要禁用所有非错误输出，只需将标准输出重定向到 nul（`>nul`或`1>nul`）。如果您还想禁用错误输出，则还必须重定向 stderr ( `2>nul`)。

```
>nul 2>nul cmd /c dir 
```

***附录***

Andriy M 对这个问题的评论很好。您可能无需通过 CMD 直接执行您的命令。重定向仍然可以正常工作。

```
>nul 2>nul yourCommand.exe 
```

# knockout.js - Knockout 中的简单数组映射

> ID：10027707
> 
> 赞同：0
> 
> 时间：2012-04-05T11:27:23.210
> 
> 标签：knockout.js

我有以下 JSON 从 Web 服务返回，我试图将其绑定到一个简单列表，以便为客户显示名称和图像：

```
{"Customers":{"data":[{"CustomerID":1,"CustomerName":"Jones","CustomerImage":"~/Images/Customers/Jones02.gif","CustomerEnabled":true},{"CustomerID":7,"CustomerName":"Hughes","CustomerImage":"~/Images/Customers/Hughes057847.gif","CustomerEnabled":true},{"CustomerID":13,"CustomerName":"Michaels","CustomerImage":"~/Images/Customers/M12012.gif","CustomerEnabled":true},{"CustomerID":123,"CustomerName":"Bernard","CustomerImage":"~/Images/Customers/kb040412.gif","CustomerEnabled":true}]}} 
```

在我的标记中，我有

```
<section id="CustomerList">
    <ul data-bind: 'foreach: data'>
        Data: <span data-bind="text: JSON.stringify(ko.toJS($data), null, 2)"></span>

        <li>
            <span data-bind="text:CustomerID"></span>
        </li>
    </ul>
</section> 
```

但我无法让它通过淘汰赛的数据绑定写出 ID。

我执行这个过程的 JS 很简单：

```
var ViewModel = {
    Customer: []
};
dataService.getCustomers(function (data) {
    ViewModel.Customer = data.Customers;
    ko.applyBindings(ViewModel);
}); 
```

我可以进入 getCustomers() 回调并验证 JSON 是否像上面那样返回，我还可以查询 ViewModel.Customer 并查看分配的数据，但没有写出任何内容。我认为这将是微不足道的，但到目前为止没有任何效果。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:38:20.770

在：

```
<section id="CustomerList">
    <ul data-bind: 'foreach: data'>
        Data: <span data-bind="text: JSON.stringify(ko.toJS($data), null, 2)"></span>

        <li>
            <span data-bind="text:CustomerID"></span>
        </li>
    </ul>
</section> 
```

改变：

```
<ul data-bind: 'foreach: data'> 
```

到：

```
<ul data-bind: 'foreach: Customer> 
```

在：

```
dataService.getCustomers(function (data) {
    ViewModel.Customer = data.Customers;
    ko.applyBindings(ViewModel);
}); 
```

改变：

```
ViewModel.Customer = data.Customers; 
```

到：

```
ViewModel.Customer = data.Customers.data; 
```

最后，您需要从 中删除带有数据的调试行，`<ul>`因为这会使标记无效。

工作示例可以在[http://jsfiddle.net/unklefolk/35eQQ/2/查看](http://jsfiddle.net/unklefolk/35eQQ/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:32:59.650

也许绑定应该是这样的：

```
<ul data-bind="foreach: Customer.data">
    Data: <span data-bind="text: JSON.stringify(ko.toJS($data), null, 2)"></span>

    <li>
        <span data-bind="text: CustomerID"></span>
    </li>
</ul> 
```

由于您的视图模型中唯一可绑定的属性是`Customer`.

即使这样可行，您也可能希望向客户引入一个可观察数组，以便您也可以启用两种方式绑定。然后你也可以使用过滤等等。只需像这样填充可观察数组：

```
dataService.getCustomers(function (data) {
   ViewModel.MyCustomerObservableArray(data.Customers.data);
   ko.applyBindings(ViewModel);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T02:06:43.290

你的代码不是很清楚..你能准确地发布你在做什么吗？...有几件事

1.  客户属性需要是一个 oberservablearray
2.  您还需要首先使用 ko.mapping.fromJSON(serverdata, MappingOptions, viewModel) 将您的 json 转换为 JS 对象。然后，您不需要即时进行字符串化。
3.  您的服务器数据需要与您的视图模型属性正确映射。您在数组中的对象有几个键，但是在您看来，您没有提到剩余的“键”属性。为此，您需要使用 knockoutjs `ignore`。

[您可以在Knockout 网站上](http://knockoutjs.com/documentation/plugins-mapping.html)查看映射的工作原理

# android - Android：打开默认音频播放器

> ID：10027709
> 
> 赞同：1
> 
> 时间：2012-04-05T11:27:23.920
> 
> 标签：android, audio-player

我正在制作一个应用程序，我必须在其中打开默认音频播放器。我的代码如下：

```
Intent intent = new Intent();           
intent.setAction(android.content.Intent.ACTION_VIEW);  
File file = new File(songs.get(position));  
//String introURI = "file:///sdcard/"+".mp3";  
intent.setDataAndType(Uri.fromFile(file), "audio/*");  
startActivity(intent); 
```

触摸歌曲时，播放器会打开，但会显示“不支持此类文件”的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:40:26.447

当您想要实现自己的媒体播放器时，应该使用 MediaPlayer 类。如果您想使用现有播放器，则必须启动适当的意图，例如：

```
Uri uri = Uri.parse("http://www.example.com/file.mp3");
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

**编辑**

[**如何获取android本地文件uri**](http://www.41post.com/1301/programming/how-to-get-android-local-files-uri)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-28T09:20:01.697

### 它会起作用的。试试这个

```
 Intent intent = new Intent();
    intent.setAction(android.content.Intent.ACTION_VIEW);
    File file = new File(path);// path where your while is placed.For me like /storage/sdcard0/Media/audio/%2F1506580826442?alt=media&token=0e22f657-743c-4aed-9fed-48de69aced73.mp3
    intent.setDataAndType(Uri.fromFile(file), "audio/*");
    ActivityChatView.mContext.startActivity(intent); 
```

# sql-server - SQL Server 中的嵌套表

> ID：10027710
> 
> 赞同：3
> 
> 时间：2012-04-05T11:27:29.137
> 
> 标签：sql-server, nested

谁能告诉我如何在 SQL Server 中创建嵌套表以及如何使用它？

我在 Oracle 上知道，不幸的是在 SQL Server 上不知道...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-16T08:07:55.290

根据[MSDN](https://technet.microsoft.com/en-us/library/ms175659(v=sql.110).aspx)，SQL Server 2012 可能具有嵌套表，但这与我不确定的数据挖掘有关。

# objective-c - 支持 Applescript 的应用程序和 Cocoa 问题

> ID：10027711
> 
> 赞同：-1
> 
> 时间：2012-04-05T11:27:32.617
> 
> 标签：objective-c, cocoa, scripting, applescript, sdef

我将首先说，就 AppleScript 而言，我是一个完整的新手。所以你在这里...

**这是我到目前为止所做的：**

*   研究了[SimpleScripting的苹果参考资料](https://developer.apple.com/library/mac/#samplecode/SimpleScripting/Introduction/Intro.html)
*   实现了一个相同的`.sdef`文件
*   设置新属性`myname`
*   将主体类（in `info.plist`）设置为`ppApplication`（我的主类继承自`NSApplication`）
*   设置`myname`属性的访问器

**我的 sdef 文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE dictionary SYSTEM "file://localhost/System/Library/DTDs/sdef.dtd">
<dictionary xmlns:xi="http://www.w3.org/2003/XInclude">
    <xi:include href="file:///System/Library/ScriptingDefinitions/CocoaStandard.sdef" xpointer="xpointer(/dictionary/suite)"/>
    <suite name="MyApplication Suite" code="PpRm" description="MyApplication Suite">
        <class name="application" code="capp" description="MyApplication&apos;s top-level scripting object." inherits="application">
            <cocoa class="ppApplication"/>
            <property name="myname" code="PEnm" description="The name of the application" type="text" access="r">
                <cocoa key="myname"/>
            </property>
        </class>
    </suite>
</dictionary> 
```

**我的 ppApplication 类：**

```
#import <Foundation/Foundation.h>

#import "ppCore.h"

@interface ppApplication : NSApplication {
    ppCore* core;
}

@property (assign) ppCore* core;

@property (readonly) NSString* myname;

@end 
```

* * *

```
#import "ppApplication.h"

@implementation ppApplication

@synthesize core;

- (void)awakeFromNib
{
    [self setCore:[[ppCore alloc] init]];
}

/*******************************************************
 *
 * APPLESCRIPT SUPPORT
 *
 *******************************************************/

- (NSString*)myname
{
    return @"DONE";
}

@end 
```

* * *

## 现在，这是问题：

当我尝试运行以下脚本时（在**AppleScript Editor**中）

```
tell application "myApplication"
     myname
end tell 
```

我收到一个`the variable myname is not defined`错误。

## 然而 ：

***如果我回到 Xcode，构建设置并将产品名称更改为 - 比如说 - myApplicationX 并重新编译，那么上面的代码（将其更改为`tell application "myApplicationX"`）就可以了。***

那么，我做错了什么？AppleScript 编辑器是否可能不会与我对应用程序的活动编译“对话”，而是与之前的应用程序“对话”？在不更改产品名称的情况下如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:51:21.520

上面的代码没有问题。

只需**重新启动 AppleScript 编辑器**（在对应用程序进行任何重大更改之后）就可以解决问题。

# php - jquery 没有将值添加到数据库，readystate=0 和 status=0

> ID：10027718
> 
> 赞同：0
> 
> 时间：2012-04-05T11:27:54.457
> 
> 标签：php, jquery, mysql

我的脚本似乎不起作用。每次我尝试使用表单时，我都会收到 readystate=0 和 status=0 的错误。任何帮助将不胜感激。我有以下表格：

```
<form action="" method="post" >

    <input type="text" name="name" id="tekst"/><br/>
    <input type="text" name="name" id="autor"/><br/>
    <input type="submit" name="<?php echo $id; ?>" value="Send" id="submit"/>

</form>
<div class="response"></div> 
```

然后输入字段中的值由以下代码处理：

```
$("input#submit").click(function(){  
var id = $("input#submit").attr("name");
var autor =  $('input#autor').val();
var tresc = $('input#tekst').val();

$.ajax({
    type: "POST",
    url: "add_comment.php",
    data: 
    {id: id, 
    autor: autor, 
    tresc: tresc}, 
    success: function(data){
        $(".response").text(data);  
    },
   error:function(xhr,err){
    alert("readyState: "+xhr.readyState+"\nstatus: "+xhr.status);
    alert("responseText: "+xhr.responseText);

    }

});
}); 
```

这是我的 add_comment.php：

```
<?php
$id = $_POST['id'];
$autor= $_POST['autor'];
$tresc = $_POST['tresc'];

if(isset($id) && isset($autor) && isset($tresc)){
include("db/connection.php");

$zapytanie= "INSERT INTO komentarze(id_ref, autor, tresc) values ('$id', '$autor', '$tresc')";
$wynik = $db->query($zapytanie);
echo "Added";
}else{
    echo "Problem";
}

?> 
```

编辑： id_ref 不是 auto_increment 字段。该脚本在本地主机上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:40:39.400

首先，您的表格不正确... **name="name", class=".response"** ??

```
<form action="" method="post" >
    <input type="text" name="tekst" id="tekst"/><br/>
    <input type="text" name="autor" id="autor"/><br/>
    <input type="submit" name="id" value="Send" id="submit"/>
</form>
<div class="response"></div> 
```

你的 PHP 文件应该是"

```
<?php
$id = $_POST['id'];
$autor= $_POST['autor'];
$tresc = $_POST['tekst'];

if(isset($id) && isset($autor) && isset($tresc)){
include("db/connection.php");

$zapytanie= "INSERT INTO komentarze(id_ref, autor, tresc) values ('$id', '$autor', '$tresc')";
$wynik = $db->query($zapytanie);
echo "Added";
}else{
    echo "Problem";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:15:46.353

```
<form action="add_comment.php" method="post" >

<input type="text" name="tekst" id="tekst"/><br/>
<input type="text" name="autor" id="autor"/><br/>
<input type="submit" name="button" value="Send" id="submit"/>

</form> 
```

在php中应该是这样的

```
$id = $_POST['button'];
$autor= $_POST['autor'];
$tresc = $_POST['tekst']; 
```

它现在应该可以正常工作了。以前您犯了一个错误，即在提交按钮字段中您传递了一个可以包含任何内容的 php 变量，而您不知道它是否是动态的。所以你不能通过使用 $_REQUEST['id'] 得到它，因为它可能是这样的

```
$id = 1; or $id = 'dynamic string' ; 
```

# python - 在 Windows 上使用 Python 2.5 安装 Pandas

> ID：10027719
> 
> 赞同：0
> 
> 时间：2012-04-05T11:28:00.113
> 
> 标签：python, pandas

我正在尝试在运行 Windows XP 的机器上安装带有 Python 2.5 的 Pandas。

安装似乎可以完成，但是当我尝试时

```
from pandas import * 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "c:\python25\lib\site-packages\pandas-0.7.2-py2.5-win32.egg\pandas\__init__.py", line 24, in <module>
    from pandas.stats.api import *
  File "c:\python25\lib\site-packages\pandas-0.7.2-py2.5-win32.egg\pandas\stats\api.py", line 7, in <module>
    from pandas.stats.moments import *
  File "c:\python25\lib\site-packages\pandas-0.7.2-py2.5-win32.egg\pandas\stats\moments.py", line 388, in <module>
    rolling_max = _rolling_func(_tseries.roll_max, 'Moving maximum')
  File "c:\python25\lib\site-packages\pandas-0.7.2-py2.5-win32.egg\pandas\stats\moments.py", line 379, in _rolling_func
    def f(arg, window, min_periods=None, time_rule=None):
  File "C:\Python25\Lib\functools.py", line 35, in update_wrapper
    getattr(wrapper, attr).update(getattr(wrapped, attr))
AttributeError: 'builtin_function_or_method' object has no attribute '__dict__' 
```

据我所知，我已经正确安装了所有依赖项，问题与`functools.py`Python 标准库（？）的一部分有关。

请问有人有什么建议吗？Pandas 应该适用于 Python 2.5，所以我认为这是我的 Python 配置的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:43:43.733

这是 ArcGIS 或 Python.org 附带的 Python 发行版吗？正如邮件列表中所讨论的，这似乎不是 Python 2.5 本身的问题，但可能是您的环境

# xml - XSD。类型定义不正确

> ID：10027723
> 
> 赞同：1
> 
> 时间：2012-04-05T11:28:14.570
> 
> 标签：xml, xsd

我写了一个 XML 类型定义，但它不正确。我的错在哪里？我该如何重写它？

```
 <xs:complexType name="resourceKeyName">
    <xs:simpleContent>
      <xs:restriction base="xs:string">
        <xs:maxLength value="30"/>
        <xs:minLength value="5"/>
        <xs:pattern value="^ref-"/>
      </xs:restriction>   
    </xs:simpleContent>
  </xs:complexType> 
```

====================================

**更新**

我像这样重写了我的代码：

```
<xs:complexType name="_inner">
    <xs:simpleContent>
      <xs:extension base="xs:string">
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>  

  <xs:complexType name="resourceKeyName">
    <xs:simpleContent>
      <xs:restriction base="_inner">
        <xs:maxLength value="30"/>
        <xs:minLength value="5"/>
        <xs:pattern value="^ref-"/>     
      </xs:restriction>   
    </xs:simpleContent>
  </xs:complexType> 
```

代码现在是正确的，但我不喜欢这样的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:27:20.233

为什么不：

```
<xs:simpleType name="resourceKeyName">
    <xs:restriction base="xs:string">
        <xs:maxLength value="30" />
        <xs:minLength value="5" />
        <xs:pattern value="^ref-" />
    </xs:restriction>
</xs:simpleType> 
```

你想要有嵌套元素的类型，还是只是文本内容？如果你想要文本 - 你应该创建`xs:simpleType`.

# compilation - 没有 Cmake 的 Optix 示例

> ID：10027724
> 
> 赞同：1
> 
> 时间：2012-04-05T11:28:15.450
> 
> 标签：compilation, nvidia, raytracing

我是 Optix 世界的新手，我想尝试在 VS 2008 中制作新项目。

我的问题：如何在不编译 SDK 包含的所有示例的情况下使用和修改项目“教程”？

我尝试使用“教程”文件在 VS2008 中创建新项目，但不起作用：/

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:03:01.023

I am also new in optix and got the same problem.

I have compiled sample1 which give the green screen within Parallel Nsight 2.0 visual studio 2010.

You need to do the following if you are using nvidia parallel nsight:

1.  change NVCC compilation type to PTX file in cuda c/c++ at project properties.
2.  make sure you build optix-sdk samples files using cmake.
3.  open optix-sample.sln and build the all projects.
4.  new libraries has been created like sutil.lib which you need to link to your new project.
5.  create a new cuda runtime project in my case i have used sample1 files.
6.  make sure to do step 1 and then include optix header files and sutil.h from the optix-sdk.
7.  link sutil.lib optix and opengl libraries like opengl32.lib and glut32.lib
8.  You should now be able to build your project.
9.  Finally you need optix sutil freeglut dll files to run your application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-26T16:07:24.783

只需打开 Optix-samples sol 文件，您可以在其中看到所有附加的项目，在其中找到教程，右键单击它并选择“设置为启动项目”。现在您可以单独运行和编辑教程。

# xml - xquery 应该给我正确的空节点封闭标签（sql server 2008）

> ID：10027737
> 
> 赞同：0
> 
> 时间：2012-04-05T11:29:23.677
> 
> 标签：xml, sql-server-2008, xquery, xquery-sql

如果我有以下一些空节点的 xml，如下所示。

`<TAG ID="abc"></TAG>`

当我修改/选择此 xml 时，它会返回空标签，例如

`<TAG ID="abc" />`

我想要关闭的空标签`</TAG>`像关闭一样

我可以做到这一点...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T20:09:25.050

请注意，SQL Server 中 XML 结果的序列化不是由 XQuery 本身决定的，而是由 XML 数据类型到字符串表示形式的转换决定的。在你的例子中

```
DECLARE @X XML; SET @X = '<TAG ID="abc"></TAG>'; SELECT @X; 
```

您没有使用 XQuery，您只是在使用 XML Parser 和 XML 序列化程序。

因此，即使我们添加了 XQuery vNext 的序列化选项，它们也不会产生影响。

正如 Michael Kay 所提到的，这两个序列化之间没有区别。为什么要区分两者？如果您有一个需要区分的工具，我建议让他们更改它以使其解析器符合标准。或者，看看您是否可以在客户端找到一个 XML Parser/serializer，它为您提供有关如何序列化空内容元素的选项。

如果您需要完全的词法保真度而不是数据库中的 XML Infoset 保真度，我建议将您的 XML 存储在 varbinary(max) 中，因为这将保留您的编码和您输入的每个代码点，但代价是必须执行运行时转换为 XML 以进行任何查询处理。

最好的问候迈克尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T18:08:12.033

任何使用 XML 的应用程序都应该将 和 视为等价的，因此 XQuery 处理器假定它们是等价的，并且没有正当理由让用户更喜欢一种形式而不是另一种形式。（类似地，例如，它们不允许您要求属性使用单引号而不是双引号，或者在“=”符号周围添加空格。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:51:51.030

在许多 XQuery 3.0 处理器（BaseX、Saxon 等）中，“html”可以指定为序列化选项，它将以预期的方式输出空元素：

```
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method "html";
<TAG ID="abc"></TAG> 
```

但是，我不知道 SQL Server 何时/是否支持 XQuery 3.0，或者它是否提供了另一种更改序列化默认值的方法。

# php - phpDocumentor 产生无效的文件名

> ID：10027738
> 
> 赞同：0
> 
> 时间：2012-04-05T11:29:23.647
> 
> 标签：php, phpdoc

生成的文档中的所有链接都类似于：`docs/classes/db_Foo/Bar.html`. 实际文件名不包含任何`db_`前缀，因此整个文档仅指向 404 页。

为什么生成的链接带有`db_`前缀但文件名没有？

我已经尝试了来自 GitHub 的最新标签 v2 alpha2，但没有运气。

我使用的命令：

```
php ..\phpDocumentor\bin\phpdoc.php -d src/Foo -t docs --ignore "*map*,*om*" --ignore-symlinks --template responsive 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:34:51.597

几个小时后，我对`responsive`模板进行了搜索和替换，并替换了所有出现的`db_`，现在链接可以正常工作了。

# jquery - 在 jQuery 中获取特定的父级

> ID：10027741
> 
> 赞同：-1
> 
> 时间：2012-04-05T11:29:33.873
> 
> 标签：jquery, html, parent, parents

我有以下 HTML，我需要获取对象的第一个 div 父级（折叠）

如果这个父级有一个（ZeroClass）类..我想要下一个 div 父级..

```
<div>
  <div id = "DeadCode">
    <div class = "ZeroClass">
      <table class = "zeroTable">
         <...tableData...>
      </table>
    </div>
  </div>
</div> 
```

jQuery函数：

```
function ResizeGrid(){
    var collapse = $(".zeroTable").parent();

    if ($(collapse).hasClass("ZeroClass")) {
        collapse = $(collapse).parents($("div"));
    }
} 
```

一切都很好，但是当通过 if 语句时，它使 Collapse Null .. 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:51:16.327

刚刚处理了您提供的 HTML 和脚本，并发现了以下内容检查下面的演示

[http://jsfiddle.net/ffRN7/37/](http://jsfiddle.net/ffRN7/37/)

Demo1 将添加类到最近的 div

用于在下面的脚本中查找最近的 div 的修改行...

```
$(collapse).closest("div").addClass("divclass"); 
```

[http://jsfiddle.net/ffRN7/38/](http://jsfiddle.net/ffRN7/38/)

Demo2 将向没有任何 id 或 class 脚本的父 div 添加类，以防 fiddle 无法访问：

```
function ResizeGrid(){

        var collapse = $(".zeroTable").parent();

    if ($(collapse).hasClass("ZeroClass")){
            $(collapse).parents("div").addClass("divclass");

        }
    }

        $("a").bind("click", ResizeGrid); 
```

CSS

```
.zeroTable td {border:1px solid black}
.ZeroClass {border:1px solid green; width:90%; height:50px; margin:5px;}

#DeadCode {border:1px solid blue; width:95%; height:100px; }

.divclass{height:200px; padding:5px; background-color:yellow;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:37:48.323

用于`parent`第一步和[`closest`](http://api.jquery.com/closest/)第二步：

```
function ResizeGrid() {
    var $collapse = $(".zeroTable").parent();

    if ($collapse.hasClass("ZeroClass")) {
        $collapse = $collapse.closest("div");
    }
} 
```

您的问题出在这一行：

```
collapse = $(collapse).parents($("div")); 
```

您首先获取所有 div 元素`$("div")`，然后告诉`$(collapse).parents()`匹配其中一个。

我的代码：

```
$collapse = $collapse.closest("div"); 
```

告诉 jQuery 找到最近的父 div。

为 jQuery 变量添加前缀是一个很好的做法，`$`以帮助跟踪哪些 var 是 jQuery 对象，哪些是常规 DOM 节点。

# nhibernate - 尚未保存的对象

> ID：10027746
> 
> 赞同：0
> 
> 时间：2012-04-05T11:29:54.440
> 
> 标签：nhibernate, naming, naming-conventions

是否有将保存在数据库中但还**没有**的对象的术语/合适的名称？

* * *

Transient 似乎是合适的名称，但我在 Tobin Harris 的文章中找到了：

> ...这些往往是我希望 NHibernate 坚持的那些，但也有一些类没有坚持（又名瞬态）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:38:41.320

我认为这是`Transient`

# c++ - 取消引用指针 -vs- &-operator

> ID：10027748
> 
> 赞同：2
> 
> 时间：2012-04-05T11:30:07.413
> 
> 标签：c++, c, pointers, dereference

这两个任务是等价的，即执行完全相同的事情吗？

```
*pointer = object

pointer = &object 
```

，其中指针是指向“对象实例”的指针。

或者这仅对原始类型有意义。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T11:32:32.077

No, these are not the same.

`pointer = &object` sets `pointer` so that it points at `object`.

`*pointer = object` sets the value of thing being pointed to by `pointer` to be equal to the value of `object`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T11:32:22.440

Absolutely not.

```
*pointer = object 
```

changes the memory the pointer points to.

```
pointer = &object 
```

changes the pointer.

```
pointer   ---->    object1
&object   ---->    object 
```

In the first case, this becomes:

```
pointer   ---->    object
&object   ---->    object 
```

In the second case:

```
 ---->    object1 //could turn into a memory leak
&object, pointer  ---->    object 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T11:42:23.097

不，这些不是等价的。第一个使指针的目标值等于右侧的对象。第二个更改指针本身，使其指向右侧的对象。

换句话说，在第一个之后，内存中有两个值等于`object`' 值的对象。在第二个之后，只有一个具有该值的对象，另外还有一个指向该对象的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:37:06.810

不。

您的第一个表达式将对象的值分配给指针。

假设您的指针变量指向 0x1234。第一次分配后，地址 0x1234 将包含值“对象”。

而第二次赋值将使指针指向对象的地址。

如果您在第一个赋值指针之后更改值对象，则不会注意到任何内容。

其中作为第二个赋值，如果你改变对象的值，你可以通过

```
*pointer. 
```

# java - Primefaces：Ajax Call Inside p:dialog 不工作

> ID：10027751
> 
> 赞同：0
> 
> 时间：2012-04-05T11:30:20.877
> 
> 标签：java, spring, jsf, primefaces

我正在尝试从 Dialog 执行 ajax 方法，但它没有被执行。

```
<p:dialog header="Add Product" widgetVar="addProductDialog" modal="true" height="300" width="700" dynamic="true">

   <p:toolbar styleClass="toolBar">
      <p:toolbarGroup align="left">
         <p:commandButton styleClass="grn_actbttn" value="Cancel" onclick="addProductDialog.hide();" />
      </p:toolbarGroup>
      <p:toolbarGroup align="right">
         <p:commandButton styleClass="grn_actbttn" id="addproduct" value="Add Products" actionListener="#{customerProductsBean.saveCustomerProducts}"  oncomplete="addProductDialog.hide();" />
      </p:toolbarGroup>
   </p:toolbar>

</p:dialog> 
```

Java 代码

```
/**
 * Method used to save selected Customer Product from Add Product Dialog 
 * @param actionEvent
 */
public void saveCustomerProducts(ActionEvent actionEvent) {

// DB call to save to database

} 
```

是不是 p:dialog 不支持 AJAX 调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:42:24.283

您的对话框在页面上呈现后被移出表单。这是 Primefaces 对话框的客户端小部件工作方式的副作用。

向对话框添加`appendToBody="true"`属性通常会解决此问题。

如果这不起作用，请确保您的对话框没有被表单包围，而是在对话框**内**放置一个表单元素。

# json - 在 asp.net 和 sql 中序列化类型对象时检测到循环引用

> ID：10027756
> 
> 赞同：1
> 
> 时间：2012-04-05T11:30:35.107
> 
> 标签：json, asp.net-mvc-3, linq, extjs

我正在尝试填充网格面板以通过 .net 框架 3.5 MVC 和 Extjs MVC 中的 LINQ 从数据库中获取数据。

我能够存档以从以下代码中成功获取所有数据

```
public Object Get()
{
     var employeeList = _db.Employees;
     var result = new
     {
         data = employeeList
     };
     return this.Json(result, JsonRequestBehavior.AllowGet);
} 
```

但是当我将数据传递给 extjs 模型时，它会给出以下错误 ![在此处输入图像描述](../Images/bce444b3a6feade0867628a5f8944a9a.png)

我能够从数据库中获取所有数据，但不知道我错在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:34:25.950

The circular reference is caused by the Json serialization.

See my post here: [Preventing StackOverflowException while serializing EF object graph into Json](https://stackoverflow.com/a/9201020/290343)

This post might also help you: [EntityFramework to Json workaround?](https://stackoverflow.com/a/7611766/290343)

# java - 如何从 J2ME 中的另一个类对象中获取 byte[] 对象？

> ID：10027757
> 
> 赞同：3
> 
> 时间：2012-04-05T11:30:37.047
> 
> 标签：java, java-me, bytearray

我知道在**J2ME**中，我可以`byte[]`使用该`getBytes()`方法从 String 对象中获取对象。我的问题是：是否可以`byte[]`从任何其他对象获取对象`class type`？另外：是否可以`byte[]`从用户定义的类对象中获取对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T11:33:21.393

> Is it possible to get a byte[] object from any other class type ?

Some classes may implement a simular service.

> Is it possible to get a byte[] object from a user-defined class object ?

Not without you writing the conversion yourself.

* * *

Example how to do it yourself *(just note that the `DataOutputStream` handles the conversion, for example which byte order that is used)*:

```
ByteArrayOutputStream out = new ByteArrayOutputStream();
{
    // conversion from "yourObject" to byte[]
    DataOutputStream dos = new DataOuputStream(out);
    dos.writeInt(yourObject.intProperty);
    dos.writeByte(yourObject.byteProperty);
    dos.writeFloat(yourObject.floatProperty);
    dos.writeChars(yourObject.stringProperty);
    dos.close();
}
byte[] byteArray = out.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:42:52.910

```
getBytes(); 
```

是 String 类中的方法，它转换你的`String into byte Array`..
因此，如果你想在你的类中赋予这种类型的转换函数，
`user-defined class object`
那么你必须自己植入该函数。
**就像 EX：-**

```
public class MyClass{
    public byte[]  myConvertor(String str){
        // do your logic here ... 
    }
} 
```

# php - 在 PHP 中使用 openssl_pkcs12_export 导出链

> ID：10027764
> 
> 赞同：5
> 
> 时间：2012-04-05T11:31:20.230
> 
> 标签：php, c, openssl, pfx, pkcs#12

是否可以使用 PHP 将证书和私钥与证书链（根证书和/或中间证书）*一起*[`openssl_pkcs12_export()`](http://php.net/manual/en/function.openssl-pkcs12-export.php)导出到 .pfx ？

**更新**：我查看了 php openssl 扩展的源代码，发现它`openssl_pkcs12_export()`支持文档中的 2 个 args`friendly_name`和`extracerts`. 这是来自`ext/openssl/openssl.c`，请查看第 1914-1920 行（PHP-5.4.0）：

```
1878 /* {{{ proto bool openssl_pkcs12_export(mixed x509, string &out, mixed priv_key, string pass[, array args])
1879    Creates and exports a PKCS12 to a var */
1880 PHP_FUNCTION(openssl_pkcs12_export)
1881 {
1882         X509 * cert = NULL;                                                                                                                                                
1883         BIO * bio_out;
1884         PKCS12 * p12 = NULL;
1885         zval * zcert = NULL, *zout = NULL, *zpkey, *args = NULL;
1886         EVP_PKEY *priv_key = NULL;
1887         long certresource, keyresource;
1888         char * pass;
1889         int pass_len;
1890         char * friendly_name = NULL;
1891         zval ** item;
1892         STACK_OF(X509) *ca = NULL;
1893 
1894         if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "zzzs|a", &zcert, &zout, &zpkey, &pass, &pass_len, &args) == FAILURE)
1895                 return;
1896 
1897         RETVAL_FALSE;
1898 
1899         cert = php_openssl_x509_from_zval(&zcert, 0, &certresource TSRMLS_CC);
1900         if (cert == NULL) {
1901                 php_error_docref(NULL TSRMLS_CC, E_WARNING, "cannot get cert from parameter 1");
1902                 return;
1903         }
1904         priv_key = php_openssl_evp_from_zval(&zpkey, 0, "", 1, &keyresource TSRMLS_CC);
1905         if (priv_key == NULL) {
1906                 php_error_docref(NULL TSRMLS_CC, E_WARNING, "cannot get private key from parameter 3");
1907                 goto cleanup;
1908         }
1909         if (cert && !X509_check_private_key(cert, priv_key)) {
1910                 php_error_docref(NULL TSRMLS_CC, E_WARNING, "private key does not correspond to cert");
1911                 goto cleanup;
1912         }
1913 
1914         /* parse extra config from args array, promote this to an extra function */
1915         if (args && zend_hash_find(Z_ARRVAL_P(args), "friendly_name", sizeof("friendly_name"), (void**)&item) == SUCCESS)
1916                 friendly_name = Z_STRVAL_PP(item);
1917 
1918         if (args && zend_hash_find(Z_ARRVAL_P(args), "extracerts", sizeof("extracerts"), (void**)&item) == SUCCESS)
1919                 ca = php_array_to_X509_sk(item TSRMLS_CC);
1920         /* end parse extra config */
1921 
1922         p12 = PKCS12_create(pass, friendly_name, priv_key, cert, ca, 0, 0, 0, 0, 0);
1923 
1924         bio_out = BIO_new(BIO_s_mem());
1925         if (i2d_PKCS12_bio(bio_out, p12))  {
1926                 BUF_MEM *bio_buf;
1927 
1928                 zval_dtor(zout);
1929                 BIO_get_mem_ptr(bio_out, &bio_buf);
1930                 ZVAL_STRINGL(zout, bio_buf->data, bio_buf->length, 1);
1931 
1932                 RETVAL_TRUE;
1933         }
1934 
1935         BIO_free(bio_out);
1936         PKCS12_free(p12);
1937         php_sk_X509_free(ca);
1938 
1939 cleanup:
1940 
1941         if (keyresource == -1 && priv_key) {
1942                 EVP_PKEY_free(priv_key);
1943         }
1944         if (certresource == -1 && cert) {
1945                 X509_free(cert);
1946         }
1947 }
1948 /* }}} */ 
```

但是，我不太确定如何将附加证书作为参数传递……有什么线索吗？

让我知道没有行号是否更容易阅读

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T12:54:21.717

这是近两个月前[提出的一个错误。](https://bugs.php.net/bug.php?id=60967)

谢天谢地，他为文档提供了一个示例补丁：

```
$args = array(
               'extracerts' => $CAcert,
               'friendly_name' => 'My signed cert by CA certificate'
              );
openssl_pkcs12_export($signed_csr, $cerificate_out, $private_key_resource, $passphrase, $args); 
```

是什么`$CAcert`？在内部，它被传递给一个函数，该函数[接受一个数组并将其转换为 x509](http://lxr.php.net/opengrok/xref/PHP_5_4/ext/openssl/openssl.c#1741)，该函数还检测它是证书数组还是单个证书。如果您传递一个数组，每个元素都应该是一个 x509 资源，或者如果您不传递一个数组，则 $CAcert 应该是一个资源。`openssl_x509_read`可能是您想在此处使用的，因为它返回 x509 中预期的资源类型`$CAcert`。

有人说保持文档更新是 PHP 项目中最难的部分之一。如果您不擅长 C 语言并希望帮助 PHP 变得更好，那么这是一个很好的起点。

# codeigniter - 如何在 pyrocms 模块中添加所见即所得编辑器

> ID：10027766
> 
> 赞同：0
> 
> 时间：2012-04-05T11:31:40.710
> 
> 标签：codeigniter, fckeditor, pyrocms

我开发了一个`PyroCMS`自定义模块，但现在我想添加`WYSIWYG`编辑器而不是文本区域。

我怎样才能添加它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:03:44.113

只需在控制器中构建模板时附加它即可。

```
->append_metadata($this->load->view('fragments/wysiwyg', $this->data, TRUE)) 
```

进而

```
echo form_textarea(array('id' => 'body', 'name' => 'code', 'value' => '', 'rows' => 30, 'class' => 'wysiwyg-advanced')); 
```

希望这会对你有所帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:41:47.557

更新：

在 PyroCMS 2.2 中，`$this->data`已弃用。

在您的控制器中，您需要更改

```
->append_metadata($this->load->view('fragments/wysiwyg', $this->data, TRUE)) 
```

到

```
->append_metadata($this->load->view('fragments/wysiwyg', compact('items'), TRUE)) 
```

# c# - 执行 SQL 存储过程

> ID：10027774
> 
> 赞同：0
> 
> 时间：2012-04-05T11:31:57.897
> 
> 标签：c#, sql, stored-procedures

```
ALTER PROCEDURE dbo.SP_InsertTicket
    /*
    (
    @parameter1 int = 5,
    @parameter2 datatype OUTPUT
    )
    declare @i as numeric
    exec SP_InsertTicket 'asd','cd@y.com','232323','dasasd','sdasdas','01-jan-2010',@i output,'sdas','sdasd','02-jan-2010'
    select @i*/
    @Client_FullName varchar(30),
    @Client_EmailAdd varchar(50),
    @Client_Telephn varchar(15),
    @Ticket_Subject varchar(50),
    @Ticket_Source varchar(15),
    @Ticket_CreateDate Datetime,

    @Ticket_Id integer output,
    @Que_Message varchar(100),
    @Que_Attachment varchar(max),
    @Que_UpdateDate Datetime

AS
    declare @TickID integer;
    /* SET NOCOUNT ON */
    BEGIN

       INSERT INTO tbl_Ticket (Client_FullName,Client_EmailAdd,Client_Telephn,Ticket_Subject,Ticket_Source,Ticket_CreateDate)

                     VALUES (@Client_FullName,  @Client_EmailAdd ,@Client_Telephn,@Ticket_Subject,@Ticket_Source,@Ticket_CreateDate)

        Select @TickID = MAX(Ticket_Id) from tbl_Ticket

        set @Ticket_Id=@TickID

        INSERT INTO tbl_TicketQuestion (Ticket_Id,Que_Message,Que_Attachment,Que_UpdateDate)

                     VALUES (@TickID,@Que_Message,@Que_Attachment,@Que_UpdateDate)

     END

    RETURN 
```

* * *

这是我的存储过程，我需要返回 Ticket_Id 以通过电子邮件应用程序发送它很好地插入记录 bt 无法在 DAL 中退出值 下面是执行返回值的存储过程的代码

```
public class cls_DAL
{
    public cls_DAL()
    {
        //
        // TODO: Add constructor logic here
        //
    }

   static string strConn = System.Configuration.ConfigurationManager.ConnectionStrings["conString"].ConnectionString.ToString();

  SqlConnection con = new SqlConnection(strConn);
  SqlCommand cmd = new SqlCommand();
  SqlDataAdapter da = new SqlDataAdapter();
  DataSet ds = new DataSet();
  DataTable dt = new DataTable();

  public int insert_NewTicket(string fullname, string emailadd, string telephone, string subject, string source, DateTime date,string Message, string attachment, DateTime updatedate)
  {
      try
      {  
            con.Open();
            cmd = new SqlCommand("SP_InsertTicket", con);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("@Client_FullName", fullname);
            cmd.Parameters.AddWithValue("@Client_EmailAdd", emailadd);
            cmd.Parameters.AddWithValue("@Client_Telephn",telephone);
            cmd.Parameters.AddWithValue("@Ticket_Subject", subject);
            cmd.Parameters.AddWithValue("@Ticket_Source",source);
            cmd.Parameters.AddWithValue("@Ticket_CreateDate",date);
            cmd.Parameters.AddWithValue("@Ticket_Id",0);
            cmd.Parameters.AddWithValue("@Que_Message", Message);
            cmd.Parameters.AddWithValue("@Que_Attachment", attachment);
            cmd.Parameters.AddWithValue("@Que_UpdateDate",updatedate);

            cmd.Parameters["@Ticket_Id"].Direction = ParameterDirection.InputOutput;

            return cmd.ExecuteNonQuery();
            int i = (int)cmd.Parameters["@Ticket_Id"].Value;

        }
     catch
        {
            throw;
        }
        finally
        {
            cmd.Dispose();
            con.Close();
            con.Dispose();
        }
    }
} 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:39:56.400

只是猜测，不确定。您可以尝试以下方法：

```
cmd.Parameters["@Ticket_Id"].Direction = ParameterDirection.InputOutput; 
```

至

```
cmd.Parameters["@Ticket_Id"].Direction = ParameterDirection.Output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:43:51.613

那不会编译你会得到无法访问的代码

```
cmd.Parameters["@Ticket_Id"].Direction = ParameterDirection.InputOutput;              cmd.ExecuteNonQuery();
return (int)cmd.Parameters["@Ticket_Id"].Value; 
```

或@Matt 下面的解决方案...

这个演员阵容也很牛逼……

而在多用户场景中，ticketid 将会竞争。想想如果你同时运行其中的两个会发生什么（将会！！！）

应该包含在事务中。

而且你也不需要 Max，使用 Scope_Identity

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T16:04:12.067

改变这个：

```
return cmd.ExecuteNonQuery(); 
```

至

```
Int i = cmd.ExecuteScalar(); 
```

如果您只从该过程返回一个整数。

`ExecuteNonQuery()`不是您想在这里使用的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:39:21.177

您可以`Select Scope_Identity()`在 Insert 语句之后运行。然后在你的 DAL 方法中`return Convert.ToInt32(cmd.ExecuteScalar())`

# wpf - 在不同的 ItemsControls 中匹配垂直布局

> ID：10027777
> 
> 赞同：0
> 
> 时间：2012-04-05T11:32:10.850
> 
> 标签：wpf, grid, itemscontrol, itemspanel

我有`ListView`使用 a`GridView`来显示几列数据。

其中两列具有包含`ItemControl`'s 的单元格模板，以在每个单元格中显示一个小集合。

我遇到的问题是 s 的垂直大小`ItemControl`没有以任何方式连接，因为它们位于不同的单元格中，因此它们没有对齐。

例如：（注意这是**父**列表视图中的一行）

![](../Images/87aada55357a5a82d2a6e8273ba43934.png)

到目前为止的 XAML：

```
<ListView Margin="6,6,6,0" ItemsSource="{Binding Controllers}">
    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem" >
            <Setter Property="VerticalContentAlignment" Value="Top" />
        </Style>
    </ListView.ItemContainerStyle>
    <ListView.View>
        <GridView>

         <!-- snip other columns -->

        <GridViewColumn Header="Mode">
             <GridViewColumn.CellTemplate>
                 <DataTemplate>
                    <ItemsControl ItemsSource="{Binding Modes}" DisplayMemberPath="Name"/>   
                 </DataTemplate>
             </GridViewColumn.CellTemplate>
        </GridViewColumn>

        <GridViewColumn Header="Parameters">
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <ItemsControl ItemsSource="{Binding Modes}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock  Text="Blah:" Margin="5,0"/>
                                    <ComboBox>
                                        <ComboBoxItem>Hello</ComboBoxItem>
                                    </ComboBox>
                                 </StackPanel>
                             </DataTemplate>
                         </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn>
    </GridView>
    </ListView.View>
</ListView> 
```

我的第一个想法是使用网格作为`ItemsPanel`，`ItemsControls`所以我可以在行上使用 SharedSizeScope 来排列它们。但是，我看不到将 ItemsControl 动态创建的项目分配给特定 Grid 行的方法。

任何人都可以提出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:47:13.383

设法通过设置为 Stretch 来解决此问题`ListView.ItemContainerStyle.VerticalContentAlignment`，然后在面板中使用`UniformGrid`'s ：`ItemsControl`

现在，每个单元格都垂直拉伸以匹配最大的单元格，并`UniformGrid`为每个项目均匀地分割垂直大小。

例如

```
<GridViewColumn Header="Mode">
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <ItemsControl ItemsSource="{Binding Modes}" DisplayMemberPath="Name">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="1"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

# java - Java vs C# Multithreading performance, why is Java getting slower? (graphs and full code included)

> ID：10027779
> 
> 赞同：12
> 
> 时间：2012-04-05T11:32:14.347
> 
> 标签：java, c#, .net, file-io, jvm-hotspot

I have recently been running benchmarks on Java vs C# for 1000 tasks to be scheduled over a threadpool. The server has 4 physical processors, each with 8 cores. The OS is Server 2008, has 32 GB of memory and each CPU is a Xeon x7550 Westmere/Nehalem-C.

In short, the Java implementation is much faster than C# at 4 threads but much slower as the number of threads increases. It also seems C# has become quicker per iteration, when the thread count has increased. Graphs are included in this post:

![Java vs C# with a threadpool size of 4 threads](../Images/2307fa8d604b0a74c1f5fea0c0d20231.png) ![Java vs C# with a threadpool size of 32 threads](../Images/d1a45a94c24f59f077af74514b3f5dfc.png) ![Peter's Java answer (see below) vs C#, for 32 threads](../Images/0051711e279488e51d660aefc00b10b0.png)

The Java implementation was written on a 64bit Hotspot JVM, with Java 7 and using an Executor Service threadpool I found online (see below). I also set the JVM to concurrent GC.

C# was written on .net 3.5 and the threadpool came from codeproject: [http://www.codeproject.com/Articles/7933/Smart-Thread-Pool](http://www.codeproject.com/Articles/7933/Smart-Thread-Pool)

(I have included the code below).

My questions:

1) Why is Java getting slower but C# is getting quicker?

2) Why do the execution times of C# fluctuate greatly? (This is our main question)

We did wonder whether the C# fluctuation was caused by the memory bus being maxed out....

Code (Please do not highlight errors with locking, this is irrelevant with my aims):

Java

```
import java.io.DataOutputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.PrintStream;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

public class PoolDemo {

    static long FastestMemory = 2000000000;
    static long SlowestMemory = 0;
    static long TotalTime;
    static long[] FileArray;
    static DataOutputStream outs;
    static FileOutputStream fout;

  public static void main(String[] args) throws InterruptedException, FileNotFoundException {

        int Iterations = Integer.parseInt(args[0]);
        int ThreadSize = Integer.parseInt(args[1]);

        FileArray = new long[Iterations];
        fout = new FileOutputStream("server_testing.csv");

        // fixed pool, unlimited queue
        ExecutorService service = Executors.newFixedThreadPool(ThreadSize);
        //ThreadPoolExecutor executor = (ThreadPoolExecutor) service;

        for(int i = 0; i<Iterations; i++) {
          Task t = new Task(i);
          service.execute(t);
        }

        service.shutdown();
        service.awaitTermination(90, TimeUnit.SECONDS);

        System.out.println("Fastest: " + FastestMemory);
        System.out.println("Average: " + TotalTime/Iterations);

        for(int j=0; j<FileArray.length; j++){
            new PrintStream(fout).println(FileArray[j] + ",");
        }
      }

  private static class Task implements Runnable {

        private int ID;

        static Byte myByte = 0;

        public Task(int index) {
          this.ID = index;
        }

        @Override
        public void run() {
            long Start = System.nanoTime();

          int Size1 = 10000000;
            int Size2 = 2 * Size1;
            int Size3 = Size1;

            byte[] list1 = new byte[Size1];
            byte[] list2 = new byte[Size2];
            byte[] list3 = new byte[Size3];

            for(int i=0; i<Size1; i++){
                list1[i] = myByte;
            }

            for (int i = 0; i < Size2; i=i+2)
            {
                list2[i] = myByte;
            }

            for (int i = 0; i < Size3; i++)
            {
                byte temp = list1[i];
                byte temp2 = list2[i];
                list3[i] = temp;
                list2[i] = temp;
                list1[i] = temp2;
            }

            long Finish = System.nanoTime();
            long Duration = Finish - Start;
            FileArray[this.ID] = Duration;
            TotalTime += Duration;
            System.out.println("Individual Time " + this.ID + " \t: " + (Duration) + " nanoseconds");

            if(Duration < FastestMemory){
                FastestMemory = Duration;
            }
            if (Duration > SlowestMemory)
            {
                SlowestMemory = Duration;
            }
        }
      }
} 
```

C#:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using Amib.Threading;
using System.Diagnostics;
using System.IO;
using System.Runtime;

namespace ServerTesting
{
    class Program
    {
        static long FastestMemory = 2000000000;
        static long SlowestMemory = 0;
        static long TotalTime = 0;
        static int[] FileOutput;
        static byte myByte = 56;

        static System.IO.StreamWriter timeFile;
        static System.IO.StreamWriter memoryFile;

        static void Main(string[] args)
        {
            Console.WriteLine("Concurrent GC enabled: " + GCSettings.IsServerGC);
            int Threads =   Int32.Parse(args[1]);
            int Iterations = Int32.Parse(args[0]);

            timeFile = new System.IO.StreamWriter(Threads + "_" + Iterations + "_" + "time.csv");

            FileOutput = new int[Iterations];
            TestMemory(Threads, Iterations);

            for (int j = 0; j < Iterations; j++)
            {
                timeFile.WriteLine(FileOutput[j] + ",");
            }

            timeFile.Close();
            Console.ReadLine();
        }

        private static void TestMemory(int threads, int iterations)
        {
            SmartThreadPool pool = new SmartThreadPool();
            pool.MaxThreads = threads;
            Console.WriteLine("Launching " + iterations + " calculators with " + pool.MaxThreads + " threads");
            for (int i = 0; i < iterations; i++)
            {
                pool.QueueWorkItem(new WorkItemCallback(MemoryIntensiveTask), i);
            }
            pool.WaitForIdle();
            double avg = TotalTime/iterations;
            Console.WriteLine("Avg Memory Time : " + avg);
            Console.WriteLine("Fastest: " + FastestMemory + " ms");
            Console.WriteLine("Slowest: " + SlowestMemory + " ms");
        }

        private static object MemoryIntensiveTask(object args)
        {

            DateTime start = DateTime.Now;
            int Size1 = 10000000;
            int Size2 = 2 * Size1;
            int Size3 = Size1;

            byte[] list1 = new byte[Size1];
            byte[] list2 = new byte[Size2];
            byte[] list3 = new byte[Size3];

            for (int i = 0; i < Size1; i++)
            {
                list1[i] = myByte;
            }

            for (int i = 0; i < Size2; i = i + 2)
            {
                list2[i] = myByte;
            }

            for (int i = 0; i < Size3; i++)
            {
                byte temp = list1[i];
                byte temp2 = list2[i];
                list3[i] = temp;
                list2[i] = temp;
                list1[i] = temp2;
            }

            DateTime finish = DateTime.Now;
            TimeSpan ts = finish - start;
            long duration = ts.Milliseconds;

            Console.WriteLine("Individual Time " + args + " \t: " + duration);

            FileOutput[(int)args] = (int)duration;
            TotalTime += duration;

            if (duration < FastestMemory)
            {
                FastestMemory = duration;
            }
            if (duration > SlowestMemory)
            {
                SlowestMemory = duration;
            }
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T11:55:06.427

您似乎没有像测试语言如何优化未优化的代码那样测试线程框架的工作。

Java 特别擅长优化无意义的代码，我相信这可以解释语言的差异。随着线程数量的增加，我怀疑瓶颈会转移到 GC 的执行方式或其他与您的测试有关的事情上。

Java 也可能会放慢速度，因为默认情况下它不支持 NUMA。尝试运行`-XX:+UseNUMA` 但是我建议为了获得最佳性能，您应该尝试将每个进程保持在单个 numa 区域以避免交叉 numa 开销。

你也可以试试这个稍微优化一下的代码，它在我的机器上快了 40%

```
import java.io.DataOutputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.PrintStream;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

public class PoolDemo {

    static long FastestMemory = 2000000000;
    static long SlowestMemory = 0;
    static long TotalTime;
    static long[] FileArray;
    static FileOutputStream fout;

    public static void main(String[] args) throws InterruptedException, FileNotFoundException {

        int Iterations = Integer.parseInt(args[0]);
        int ThreadSize = Integer.parseInt(args[1]);

        FileArray = new long[Iterations];
        fout = new FileOutputStream("server_testing.csv");

        // fixed pool, unlimited queue
        ExecutorService service = Executors.newFixedThreadPool(ThreadSize);
        //ThreadPoolExecutor executor = (ThreadPoolExecutor) service;

        for (int i = 0; i < Iterations; i++) {
            Task t = new Task(i);
            service.execute(t);
        }

        service.shutdown();
        service.awaitTermination(90, TimeUnit.SECONDS);

        System.out.println("Fastest: " + FastestMemory);
        System.out.println("Average: " + TotalTime / Iterations);

        PrintStream ps = new PrintStream(fout);
        for (long aFileArray : FileArray) {
            ps.println(aFileArray + ",");
        }
    }

    static class ThreadLocalBytes extends ThreadLocal<byte[]> {
        private final int bytes;

        ThreadLocalBytes(int bytes) {
            this.bytes = bytes;
        }

        @Override
        protected byte[] initialValue() {
            return new byte[bytes];
        }
    }

    private static class Task implements Runnable {

        static final int Size1 = 10000000;
        static final int Size2 = 2 * Size1;
        static final int Size3 = Size1;

        private int ID;
        private static final ThreadLocalBytes list1b = new ThreadLocalBytes(Size1);
        private static final ThreadLocalBytes list2b = new ThreadLocalBytes(Size2);
        private static final ThreadLocalBytes list3b = new ThreadLocalBytes(Size3);

        static byte myByte = 0;

        public Task(int index) {
            this.ID = index;
        }

        @Override
        public void run() {
            long Start = System.nanoTime();

            byte[] list1 = list1b.get();
            byte[] list2 = list2b.get();
            byte[] list3 = list3b.get();

            for (int i = 0; i < Size1; i++) {
                list1[i] = myByte;
            }

            for (int i = 0; i < Size2; i = i + 2) {
                list2[i] = myByte;
            }

            for (int i = 0; i < Size3; i++) {
                byte temp = list1[i];
                byte temp2 = list2[i];
                list3[i] = temp;
                list2[i] = temp;
                list1[i] = temp2;
            }

            long Finish = System.nanoTime();
            long Duration = Finish - Start;
            FileArray[this.ID] = Duration;
            TotalTime += Duration;
            System.out.println("Individual Time " + this.ID + " \t: " + (Duration) + " nanoseconds");

            if (Duration < FastestMemory) {
                FastestMemory = Duration;
            }
            if (Duration > SlowestMemory) {
                SlowestMemory = Duration;
            }
        }
    }
} 
```

# delphi - 从 EndOfTheMonth(date) 到 Variant 值的错误转换

> ID：10027780
> 
> 赞同：6
> 
> 时间：2012-04-05T11:32:14.800
> 
> 标签：delphi, datetime, rounding, delphi-xe2, variant

我有一个变体类型的`TDateTime`值（我从 得到的结果）。`EndOfTheMonth(date)`结果被错误地四舍五入。让我们看一个例子：

```
 data := EndOfTheMonth(date);
  V := data;
  ShowMessage(DateTimeToStr(data) + ' vs ' + VarToStr(V));
 // output is
 // data = 2012-01-31 23:59:59
 // v    = 2012-02-01            // why next day? 
```

它是设计的行为吗？如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T11:39:38.073

```
ShowMessage(DateTimeToStr(data) + ' vs ' + DateTimeToStr(VarToDateTime(V))); 
```

*更新：*我猜问题是这个月的最后一毫秒非常接近第二天的0:00:00，也就是说，这个`TDateTime`值（基本上是a `double`）非常接近一个整数（例如`41029.9999999884`非常接近to `41029`) 所以`VarToStr`函数假定小数是数字模糊。

# emulation - Admob ads in Emulator

> ID：10027783
> 
> 赞同：0
> 
> 时间：2012-04-05T11:32:20.917
> 
> 标签：emulation, admob, ads

Is admob blocked my account when I check ads in Emulator.

How invalid clicks made in Emulator ?

Pls help me

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T00:32:43.557

如果你经常这样做。避免使用测试广告。

`AdRequest req = new AdRequest(); req.addKeyword("game"); req.addTestDevice(AdRequest.TEST_EMULATOR);`

在加载广告之前添加测试设备。您也可以将您的手机添加为测试设备。查看 logcat，adView 活动将向您发送有关如何在手机上仅运行测试广告的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-08T20:52:54.303

目前，Android 模拟器会自动配置为 Admob 测试设备，因此您无需调用`addTestDevice()`.

但是，如果您还想在真实设备上测试您的广告，则需要将其添加为测试设备。这可以通过 Admob UI( `Settings`-> `Test Devices`-> `Add test device`) 或以编程方式完成，如[@Jova 所述](https://stackoverflow.com/a/10133769/11105280)。

文档：[https ://developers.google.com/admob/android/test-ads#enable_test_devices](https://developers.google.com/admob/android/test-ads#enable_test_devices)

# selenium - Using selenium with Dynamic values

> ID：10027786
> 
> 赞同：1
> 
> 时间：2012-04-05T11:32:28.320
> 
> 标签：selenium

I am working with Selenium RC.

I am giving the data manually to selenium.Like below

```
selenium.type("id=username","myName");
selenium.type("id=password","myPassword");
selenium.click("id=login"); 
```

But, my doubt is is there any way to get the data dynamically? Here I am giving my Name directly into `selenium.type();`

Is there any way to retrieve username and password from other place like textfile or excel file?

Any help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:48:53.207

简短的回答 - 是的。

更长的答案-您需要对其进行编程。所以使用 Selenium IDE 是不可能的，但是你可以使用 Selenium Webdriver。我在 Java 中做这个，所以我会发布我的代码的小片段，我该怎么做。

1）我有特殊的Java类来保存用户信息：

```
 public class EUAUser {  

  private String username;
  private String password;
  private boolean isUsed

  public EUAUser(String uname, String pwd){
    this.username = uname;
    this.password = pwd;
    isUsed = false;
  }

   public String getPassword(){
    return password;
   }

 public String getUsername(){
    return username;
 }

 public void lockUser(){
     isUsed = true;
 }
} 
```

2）然后我有 UserPool 来容纳所有用户。到目前为止，因为我只需要 5 个不同的用户，所以我通过快速而肮脏的方法来做到这一点：

```
 public class UserPool {
private List<EUAUser> userList = new ArrayList<EUAUser>();

public UserPool(){

          userList.add(new EUAUser("firstUser","a"));
          userList.add(new EUAUser("MyUsername", "a"));
          userList.add(new EUAUser("TestUser", "a"));
          userList.add(new EUAUser("TSTUser2", "a"));

       }

  public EUAUser getNextUser() throws RuntimeException {
    for(EUAUser user: userList){          
          if (!user.isUsed()){
              user.lockUser();
              return user;              
      }
    }
    throw new RuntimeException("No free user found.");
} 
```

3）在测试中我有这样的东西

```
 UserPool pool = new UserPool();
 EUAUser user = pool.getNextUser();
 selenium.type("id=username", user.getUserName());
 selenium.type("id=password", user.getPassword());
 selenium.click("id=login"); 
```

上面的代码确实

1.  将所有已知用户添加到 UserPool
2.  从池中检索一位免费用户
3.  使用用户名和密码将他登录到应用程序

在我的情况下，它非常快速和肮脏的方法，但是您可以在文件中拥有用户列表并使用 fileReader 或其他东西将它们加载到 UserPool 中。只是让您知道如何做到这一点；）

# objective-c - how to avoid UIView touch gestures overlapping

> ID：10027787
> 
> 赞同：1
> 
> 时间：2012-04-05T11:32:28.270
> 
> 标签：objective-c, ios, cocoa-touch

I have a UIView on top of another view that's using a UITouchGesture. The problem is that the touch events are being recognised in most forward UIView as well as in the UIView in the background. I would like the touch events to only work on the back most view only.

hope that makes sense.

thanks for any help

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:34:25.930

```
view.userInteractionEnabled = NO; 
```

view being the most forward UIview.

Good luck!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T11:48:19.843

我认为最好的方法是在视图中声明 UITouchGesture ，当您需要在视图中禁用触摸时，您可以禁用：

一个水龙头的例子：

在您的 .h 文件中声明它：

```
UITapGestureRecognizer* tap; 
```

在你的 .m 文件中

```
tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
[yourView addGestureRecognizer:tap]; 
```

当您需要禁用水龙头时，您可以简单：

```
[tap setEnable:NO]; 
```

或删除它：

```
[yourView removeGestureRecognizer:tap]; 
```

这样，当您需要启用/禁用时会更容易，也更容易管理您的触摸。

[参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T11:44:51.523

检查是否`[gesture view]`等于`[[self.view subviews] objectAtIndex:0]`并执行任何操作。

# css - CSS - Popup Layer (with overlay and close button)

> ID：10027793
> 
> 赞同：0
> 
> 时间：2012-04-05T11:32:39.197
> 
> 标签：css, overlay, layer

I do not know how to describe what I want. So I did just draw it: [http://i.imgur.com/oMFzJ.jpg](http://i.imgur.com/oMFzJ.jpg)

This is what I've got so far. I do not know how to get this overlay

```
<div id="layer" style="background-color:#212121;border:2px solid #CCCCCC;width:450px;position:absolute;top:20%;left:20%;"> <iframe src="http://www.ebay.com" width="100%" height="300" frameborder="0" scrolling="no"></iframe> <div style="width:100%;"><span style="color:#CCCCCC;float:right;font-size:11px;margin:3px;cursor:pointer;" onclick="document.getElementById('layer').style.display='none';">Close X</span></div> </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:35:49.287

*制作模态弹出窗口*的一种快速方法是依靠现有库来完成此操作，请考虑[jQuery UI](http://jqueryui.com/demos/dialog/#modal-message)

将来请提供有关已尝试过的内容等的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:01:49.980

我喜欢在我的模态弹出窗口中使用[fancybox](http://fancyapps.com/fancybox/)。页面上的示例使用图像，但您可以插入任何您喜欢的 HTML。

# ruby-on-rails - 两个 activerecord 查询是否返回一个记录作为同一个对象？

> ID：10027803
> 
> 赞同：1
> 
> 时间：2012-04-05T11:33:31.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

在我的模型中，我有三个返回 Discount 对象数组的复杂范围。这些中的每一个都可以重叠，我想做一些 Ruby 数组联合/交集/减法操作。

我猜这些操作取决于对象ID。我想知道折扣查询是否会在通过不同范围时返回与同一对象相同的记录。在我的程序中，这些将在同一个请求期间完成。

更新：

我错了，两次。返回的每个对象都是真正不同的对象。尽管它们不同，联合/交集/减法运算仍然可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:10:24.393

默认情况下没有 - 您将获得代表同一数据库行的两个对象。检查`object_id`是否需要说服力。

在 Rails 3.1 及更高版本中，您可以打开[身份映射](http://api.rubyonrails.org/classes/ActiveRecord/IdentityMap.html)。这确保了在给定请求中，数据库中的单行将始终由单个 ruby​​ 对象表示。它仍然存在一些问题，这就是默认情况下不启用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:26:34.907

我想你可能记得听到过的是 Rails Identity Map。它是在 Rails 3.1 中引入的，但默认情况下是关闭的，因为它显然不处理关联。

文档在这里：[http ://api.rubyonrails.org/classes/ActiveRecord/IdentityMap.html](http://api.rubyonrails.org/classes/ActiveRecord/IdentityMap.html)

原始拉取请求：[https ://github.com/rails/rails/pull/76](https://github.com/rails/rails/pull/76)

关于这些问题的问题可以在这里找到：[Rails 3.1 Identity Map issues？](https://stackoverflow.com/questions/6905891/rails-3-1-identity-map-issues)

# ios - 有没有办法在iOS应用程序中获取手机帐户？

> ID：10027804
> 
> 赞同：2
> 
> 时间：2012-04-05T11:33:31.457
> 
> 标签：ios, ios5

我正在开发一个 iOS 应用程序，但我需要识别向 Web 服务器发出请求的用户。

我在互联网上读到我无法检索用户的电话号码，还有什么可以用来识别用户的吗？

我需要一些“合法有效”的东西（**我的意思是，如果用户对我的应用程序做了非法的事情，我应该能够追踪到它**）

我不能只是“让用户输入它的电话号码”，因为我需要它是真的。我不能冒险让用户输入其他人的电话号码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:41:44.683

你可以得到电话号码；您只需要向用户询问即可。

过去，人们曾将设备 UDID 用于此类事情。UDID 现在已弃用，新设备甚至可能没有。您可以在 UDID 上进行搜索，以找出人们正在使用什么来代替 UDID —— 特别是，查找 OpenUDID 和 SecureUDID 项目。在某些情况下，可以使用设备的 wifi MAC 地址，但这会带来一些与 UDID 相同的隐私问题。

您也可以只生成并存储一个全局唯一标识符。搜索“GUID”以了解如何执行此操作。使用 GUID，您几乎可以确定标识符是唯一的。

目前尚不清楚您所说的“合法有效”是什么意思。就隐私法、密码法、通信法规或其他方面而言，这是否“有效”？以及在哪个国家？

# facebook - 如何查看/获取特定 Facebook 页面的所有墙贴

> ID：10027805
> 
> 赞同：17
> 
> 时间：2012-04-05T11:33:38.387
> 
> 标签：facebook, facebook-wall

出于研究目的，我需要获取欧盟委员会 Facebook 页面的所有墙贴。我通过此链接尝试过，但无法访问： http: [//graph.facebook.com/EuropeanCommission/posts](http://graph.facebook.com/EuropeanCommission/posts)

我是否有机会获得委员会曾经发布的所有帖子的列表？还是我需要从时间线上手动复制和粘贴它们？不需要评论。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-06T00:14:13.533

我刚刚在 API Explorer 工具中尝试过，我也得到了带有分页链接的帖子列表：

[http://developers.facebook.com/tools/explorer?method=GET&path=EuropeanCommission%2Fposts](http://developers.facebook.com/tools/explorer?method=GET&path=EuropeanCommission%2Fposts)

```
{
  "data": [
    {
      "id": "107898832590939_396059463745799",
      "from": {
        "name": "European Commission",
        "category": "Government organization",
        "id": "107898832590939"
      },
      "picture": "http://photos-f.ak.fbcdn.net/hphotos-ak-prn1/523856_348222705225216_107898832590939_963377_101027267_s.jpg",
      "link": "http://www.facebook.com/notes/european-commission/news-update-2-4-march-2012-by-elections-myanmar-conviasa-added-to-eu-blacklist-v/396059463745799",
      "name": "News update 2-4 March 2012: By-elections Myanmar, Conviasa added to EU blacklist, vehicle registration easier and more.",
      "description": "\nMonday 2 April: Catherine Ashton congratulates the Government and people of Myanmar on the conduct of the by-elections\n \n\nMyanmar – Pagodas in Bagan\n \n...",
      "icon": "http://static.ak.fbcdn.net/rsrc.php/v1/yY/r/1gBp2bDGEuh.gif",
      "actions": [
        {
          "name": "Comment",
          "link": "http://www.facebook.com/107898832590939/posts/396059463745799"
        },
        {
          "name": "Like",
          "link": "http://www.facebook.com/107898832590939/posts/396059463745799"
        }
      ],
      "type": "link",
      "application": {
        "name": "Notes",
        "id": "2347471856"
      },
      "created_time": "2012-04-04T13:06:58+0000",
      "updated_time": "2012-04-05T07:54:16+0000",
      "likes": {
        "data": [
          {
            "name": "EU Law and Publications",
            "category": "Media/news/publishing",
            "id": "218434258171162"
          }
        ],
        "count": 1
      },
      "comments": {
        "data": [
          {
            "id": "107898832590939_396059463745799_5180327",
            "from": {
              "name": "Ivan Burrows",
              "id": "1119361344"
            },
            "message": "@ The European Parliament\n\nWhen do we get ours?\n\nIt seems you have finally managed to get an increase in something.\n\n40\u0025 increase in suicides in Greece.\n\nTheir blood is on your hands.\n\nhttp://www.bbc.co.uk/news/world-europe-17621131",
            "created_time": "2012-04-05T07:54:16+0000"
          }
        ],
        "count": 1
      }
    },
    {
      "id": "107898832590939_424622557555230",
      "from": {
        "name": "European Commission",
        "category": "Government organization",
        "id": "107898832590939"
      },
      "message": "Marie Therese Vella gets a fresh start thanks to ESF-funded training for people over 40\. Have a look at how she did it. Are you planning a career change? Are you currently unemployed? Are you aware of the channels available to you to get help? http://bit.ly/HVaLXZ",
      "picture": "http://external.ak.fbcdn.net/safe_image.php?d=AQBVJqYwG1_uazFM&w=90&h=90&url=http\u00253A\u00252F\u00252Fec.europa.eu\u00252Fesf\u00252FBlobServlet\u00253Fmode\u00253DvideoPhoto\u002526videoId\u00253D2491\u002526cnt\u00253D313333967",
      "link": "http://bit.ly/HVaLXZ",
      "name": "Funding - Getting a fresh start",
      "caption": "ec.europa.eu",
      "icon": "http://static.ak.fbcdn.net/rsrc.php/v1/yD/r/aS8ecmYRys0.gif",
      "actions": [
        {
          "name": "Comment",
          "link": "http://www.facebook.com/107898832590939/posts/424622557555230"
        },
        {
          "name": "Like",
          "link": "http://www.facebook.com/107898832590939/posts/424622557555230"
        }
      ],
      "type": "link",
      "created_time": "2012-04-04T11:32:32+0000",
      "updated_time": "2012-04-04T12:24:45+0000",
      "shares": {
        "count": 11
      },
      "likes": {
        "data": [
          {
            "name": "Stefanija Stoimenovska",
            "id": "100000025178728"
          }
        ],
        "count": 28
      },
      "comments": {
        "data": [
          {
            "id": "107898832590939_424622557555230_5762457",
            "from": {
              "name": "Ehtesham Mallick",
              "id": "100001067328472"
            },
            "message": "I wish some training in Laws especially from European countries and prefer training and distance learning about Human rights under the chartered of UNO",
            "created_time": "2012-04-04T12:24:45+0000"
          }
        ],
        "count": 1
      }
    }
  ],
  "paging": {
    "previous": "https://graph.facebook.com/EuropeanCommission/posts?limit=2&format=json&since=1333544818&__previous=1",
    "next": "https://graph.facebook.com/EuropeanCommission/posts?limit=2&format=json&until=1333539151"
  }
} 
```

# javascript - 在 JavaScript 中获取当前 iframe 的正文引用

> ID：10027806
> 
> 赞同：1
> 
> 时间：2012-04-05T11:33:49.747
> 
> 标签：javascript, iframe

我正在研究模态窗口。当我单击主页中的超链接时，我需要显示一个模式窗口。我使用 div 和一个 iframe 准备的这个模态窗口。iFrame 用于显示源。现在在这个模态窗口中，我有另一个超链接可以单击它再次打开一个新的模态窗口。这继续。

每次单击超链接时，我都想在提供的 iframe 的 src 文件本身中创建一个新的模式窗口。如何做到这一点？

TIA。

![要构建的模态窗口](../Images/4e60ae924dbf8c6ad2506a87c9b08d17.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:25:01.840

您可以通过使用在页面和框架中创建 div 和 iframe 的简单 java 脚本文件来实现此目的。该脚本文件将包含所有必要的方法和一个类，可以在每个框架中分别访问这些方法。

例如，您可以拥有像这样的脚本文件

```
MyClass = function(){
 this.var1, this.var2; // To store values separately in each frame.
 this.myMethod = function(){
      // Function body
 }
} 
```

# .net - Slow performance on Rally Rest api request and response

> ID：10027807
> 
> 赞同：0
> 
> 时间：2012-04-05T11:33:50.600
> 
> 标签：.net, performance, rest, rally

While using Rally Rest.net api to query the data from Rally, the request/response is quite slow. Note that i ignored the factor of client connection speed.

Tried further investigation by Fiddler, i found each request to Rally server has become a pair round-trips ( 1 request responsed authentication 401, and other request actually responsed data), even though use only one instance of RallyRestApi which has accompanied user account info. You could see the red box in attached Fiddler screenshot below.

Is that a bug of Rally Rest.net api? Should i do anything else to avoid it?

Please help!

![Rally REST API request/response debug](../Images/b2905cc0b72b1184ebb91c1a9dc4c4df.png)

**Edit:**

One more issue i found when upload an attachment file to a defect. To upload attachment file, i created an AttachmentContent object and put the file binary content into Content property. Everything works very well, except the response of this request. Rally responses the CreateResult that included the same file binary content. Imagine that we upload a 4MB attachment file in request, and we will receive the response with 4MB file content inside. That causes doubling time of data tranfering between client and server over Http(s) in upload attachment request.

![enter image description here](../Images/6809b8e866ac1583878f1152fadfcecd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:59:11.400

令我惊讶的是，您使用 .NET REST 的性能很慢，因为它实际上是 Rally 性能更高的 API 之一。它的数据检索是多线程的，这有助于提高响应能力。

使用 Rally Webservices 需要注意的一件事 - 记录数的最大页面大小为 200。因此，如果您向 Rally 发出返回 900 条记录的请求，.NET API 实际上（在幕后）会产生 5针对 Rally 的请求：四页，每页 200 条记录，然后是第五页，每页 100 条记录。

我希望这有助于解释多个请求。

# c# - 将html页面写入asp.net中的pdf文件

> ID：10027815
> 
> 赞同：-2
> 
> 时间：2012-04-05T11:34:20.463
> 
> 标签：c#, asp.net, html

我可以在我的程序中获取我的页面的 html 代码，我想做的是我想把这个 html 页面代码放入 pdf 文件中，我的 pdf 文件将与我的 html 页面相同。是否可以 ？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:37:08.580

使用[PDFSharp](http://pdfsharp.com/PDFsharp/)库来做到这一点。我希望它会有所帮助。

# php - Simple PHP script using 290Mb memory - why?

> ID：10027819
> 
> 赞同：-1
> 
> 时间：2012-04-05T11:34:46.230
> 
> 标签：php

I have a simple PHP script running as a cron job, it's purpose is to check the headers of a webpage and report if various items have changed.

I have used various versions of this script in the past and it has always worked fine, but now I'm using it on a server that sends out warnings by email when scripts are using more than 100Mb of memory (apart from whitelisted scripts of course), and surprisingly my header-checking script is occasionally reporting large amounts of memory usage at least a few times a day.

The script is running every 5 minutes, and the memory problem is happening 5 or 6 times a day - it does seem to resolve itself, but I would like to stop it from using this large amount of memory occasionally for such a simple job.

The warning emails are reporting usage of around 290Mb for this simple script :

```
<?php

  $message = "";

  function array_find ($needle, $haystack, $search_keys = false) { 
    if (!is_array($haystack)) return false;
    foreach ($haystack as $key => $value) {
      $what = ($search_keys) ? $key : $value;
      if (strpos($what, $needle) !== false) return $key;
    }
    return false;
  }

  $url = 'http://www.EXAMPLE.com/';

  $haystack = get_headers($url);
  $needle = "PHPSESSID";

  if (!((array_find($needle, $haystack)) != '')) {
    $message .= "No PHPSESSID in headers";
  }

  if (!(strpos($haystack[0], '200'))) {
    $message .= "No 200 OK";
  }

  if ($message != '') {
    mail("example@example.com", "Headers Changed", $message, "From: Example <example@example.com>");
  }

  exit;

?> 
```

The server is a VPS running CENTOS 5.8, Apache 2.2.16, PHP 5.3.3

Thanks for any assistance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:45:09.897

或许您每天只需要 5 到 6 次大干草堆？

PHP 是一个内存饥渴的野兽。这是事实。在处理相对较大的数据数组时，内存消耗可能会变得不那么明显。

有一篇有趣的文章，名为[“PHP 数组（和值）有多大？（提示：大！）”](http://nikic.github.com/2011/12/12/How-big-are-PHP-arrays-really-Hint-BIG.html)强烈推荐阅读！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:39:00.837

尝试仅使用 get_headers($url) 和 memory_get_usage() 创建一个文件并查看结果...

```
<?php 
$url = "http://www.example.com";
get_headers($url);
echo memory_get_usage();
?> 
```

根据我的经验，PHP >= 5 上的 get_headers() 会占用大量内存。您可以查看文章“ [get_headers() 函数导致内存泄漏](http://awordpress.net/blog/get_headers%28%29-function-memory-leak/)”

PS：也可以使用xDebug来跟踪脚本的内存使用情况

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T11:58:43.613

也许在每个主要部分之后尝试做 memory_get_usage() 。这应该可以帮助您缩小范围。

# php - 如何从这个 php 类中创建两个不同的函数？

> ID：10027823
> 
> 赞同：0
> 
> 时间：2012-04-05T11:34:59.673
> 
> 标签：php, gd

我有一个类，它具有在一个函数中基于该随机文本制作随机文本和验证码图像的功能。我想要的是把它们分开。我的意思是我想要有不同的功能来制作随机文本，我会把它保存在 cookie 中，然后验证码制作功能应该运行。我想要这样的功能：

```
$string = make_text(); //random text

setcookie($string); // will write the cookie

make_captcha($string); 
```

以下是我们可以制作的课程：

```
class KCAPTCHA{

// generates keystring and image
function KCAPTCHA(){

    require(dirname(__FILE__).'/kcaptcha_config.php');
    $fonts=array();
    $fontsdir_absolute=dirname(__FILE__).'/'.$fontsdir;
    if ($handle = opendir($fontsdir_absolute)) {
        while (false !== ($file = readdir($handle))) {
            if (preg_match('/\.png$/i', $file)) {
                $fonts[]=$fontsdir_absolute.'/'.$file;
            }
        }
        closedir($handle);
    }   

    $alphabet_length=strlen($alphabet);

    do{
        // generating random keystring
        while(true){
            $this->keystring='';
            for($i=0;$i<$length;$i++){
                $this->keystring.=$allowed_symbols{mt_rand(0,strlen($allowed_symbols)-1)};
            }
            if(!preg_match('/cp|cb|ck|c6|c9|rn|rm|mm|co|do|cl|db|qp|qb|dp|ww/', $this->keystring)) break;
        }

        $font_file=$fonts[mt_rand(0, count($fonts)-1)];
        $font=imagecreatefrompng($font_file);
        imagealphablending($font, true);

        $fontfile_width=imagesx($font);
        $fontfile_height=imagesy($font)-1;

        $font_metrics=array();
        $symbol=0;
        $reading_symbol=false;

        // loading font
        for($i=0;$i<$fontfile_width && $symbol<$alphabet_length;$i++){
            $transparent = (imagecolorat($font, $i, 0) >> 24) == 127;

            if(!$reading_symbol && !$transparent){
                $font_metrics[$alphabet{$symbol}]=array('start'=>$i);
                $reading_symbol=true;
                continue;
            }

            if($reading_symbol && $transparent){
                $font_metrics[$alphabet{$symbol}]['end']=$i;
                $reading_symbol=false;
                $symbol++;
                continue;
            }
        }

        $img=imagecreatetruecolor($width, $height);
        imagealphablending($img, true);
        $white=imagecolorallocate($img, 255, 255, 255);
        $black=imagecolorallocate($img, 0, 0, 0);

        imagefilledrectangle($img, 0, 0, $width-1, $height-1, $white);

        // draw text
        $x=1;
        $odd=mt_rand(0,1);
        if($odd==0) $odd=-1;
        for($i=0;$i<$length;$i++){
            $m=$font_metrics[$this->keystring{$i}];

            $y=(($i%2)*$fluctuation_amplitude - $fluctuation_amplitude/2)*$odd
                + mt_rand(-round($fluctuation_amplitude/3), round($fluctuation_amplitude/3))
                + ($height-$fontfile_height)/2;

            if($no_spaces){
                $shift=0;
                if($i>0){
                    $shift=10000;
                    for($sy=3;$sy<$fontfile_height-10;$sy+=1){
                        for($sx=$m['start']-1;$sx<$m['end'];$sx+=1){
                            $rgb=imagecolorat($font, $sx, $sy);
                            $opacity=$rgb>>24;
                            if($opacity<127){
                                $left=$sx-$m['start']+$x;
                                $py=$sy+$y;
                                if($py>$height) break;
                                for($px=min($left,$width-1);$px>$left-200 && $px>=0;$px-=1){
                                    $color=imagecolorat($img, $px, $py) & 0xff;
                                    if($color+$opacity<170){ // 170 - threshold
                                        if($shift>$left-$px){
                                            $shift=$left-$px;
                                        }
                                        break;
                                    }
                                }
                                break;
                            }
                        }
                    }
                    if($shift==10000){
                        $shift=mt_rand(4,6);
                    }

                }
            }else{
                $shift=1;
            }
            imagecopy($img, $font, $x-$shift, $y, $m['start'], 1, $m['end']-$m['start'], $fontfile_height);
            $x+=$m['end']-$m['start']-$shift;
        }
    }while($x>=$width-10); // while not fit in canvas

    //noise
    $white=imagecolorallocate($font, 255, 255, 255);
    $black=imagecolorallocate($font, 0, 0, 0);
    for($i=0;$i<(($height-30)*$x)*$white_noise_density;$i++){
        imagesetpixel($img, mt_rand(0, $x-1), mt_rand(10, $height-15), $white);
    }
    for($i=0;$i<(($height-30)*$x)*$black_noise_density;$i++){
        imagesetpixel($img, mt_rand(0, $x-1), mt_rand(10, $height-15), $black);
    }

    $center=$x/2;

    // credits. To remove, see configuration file
    $img2=imagecreatetruecolor($width, $height+($show_credits?12:0));
    $foreground=imagecolorallocate($img2, $foreground_color[0], $foreground_color[1], $foreground_color[2]);
    $background=imagecolorallocate($img2, $background_color[0], $background_color[1], $background_color[2]);
    imagefilledrectangle($img2, 0, 0, $width-1, $height-1, $background);        
    imagefilledrectangle($img2, 0, $height, $width-1, $height+12, $foreground);
    $credits=empty($credits)?$_SERVER['HTTP_HOST']:$credits;
    imagestring($img2, 2, $width/2-imagefontwidth(2)*strlen($credits)/2, $height-2, $credits, $background);

    // periods
    $rand1=mt_rand(750000,1200000)/10000000;
    $rand2=mt_rand(750000,1200000)/10000000;
    $rand3=mt_rand(750000,1200000)/10000000;
    $rand4=mt_rand(750000,1200000)/10000000;
    // phases
    $rand5=mt_rand(0,31415926)/10000000;
    $rand6=mt_rand(0,31415926)/10000000;
    $rand7=mt_rand(0,31415926)/10000000;
    $rand8=mt_rand(0,31415926)/10000000;
    // amplitudes
    $rand9=mt_rand(330,420)/110;
    $rand10=mt_rand(330,450)/100;

    //wave distortion

    for($x=0;$x<$width;$x++){
        for($y=0;$y<$height;$y++){
            $sx=$x+(sin($x*$rand1+$rand5)+sin($y*$rand3+$rand6))*$rand9-$width/2+$center+1;
            $sy=$y+(sin($x*$rand2+$rand7)+sin($y*$rand4+$rand8))*$rand10;

            if($sx<0 || $sy<0 || $sx>=$width-1 || $sy>=$height-1){
                continue;
            }else{
                $color=imagecolorat($img, $sx, $sy) & 0xFF;
                $color_x=imagecolorat($img, $sx+1, $sy) & 0xFF;
                $color_y=imagecolorat($img, $sx, $sy+1) & 0xFF;
                $color_xy=imagecolorat($img, $sx+1, $sy+1) & 0xFF;
            }

            if($color==255 && $color_x==255 && $color_y==255 && $color_xy==255){
                continue;
            }else if($color==0 && $color_x==0 && $color_y==0 && $color_xy==0){
                $newred=$foreground_color[0];
                $newgreen=$foreground_color[1];
                $newblue=$foreground_color[2];
            }else{
                $frsx=$sx-floor($sx);
                $frsy=$sy-floor($sy);
                $frsx1=1-$frsx;
                $frsy1=1-$frsy;

                $newcolor=(
                    $color*$frsx1*$frsy1+
                    $color_x*$frsx*$frsy1+
                    $color_y*$frsx1*$frsy+
                    $color_xy*$frsx*$frsy);

                if($newcolor>255) $newcolor=255;
                $newcolor=$newcolor/255;
                $newcolor0=1-$newcolor;

                $newred=$newcolor0*$foreground_color[0]+$newcolor*$background_color[0];
                $newgreen=$newcolor0*$foreground_color[1]+$newcolor*$background_color[1];
                $newblue=$newcolor0*$foreground_color[2]+$newcolor*$background_color[2];
            }

            imagesetpixel($img2, $x, $y, imagecolorallocate($img2, $newred, $newgreen, $newblue));
        }
    }

    header('Expires: Mon, 26 Jul 1997 05:00:00 GMT'); 
    header('Cache-Control: no-store, no-cache, must-revalidate'); 
    header('Cache-Control: post-check=0, pre-check=0', FALSE); 
    header('Pragma: no-cache');
    if(function_exists("imagejpeg")){
        header("Content-Type: image/jpeg");
        imagejpeg($img2, null, $jpeg_quality);
    }else if(function_exists("imagegif")){
        header("Content-Type: image/gif");
        imagegif($img2);
    }else if(function_exists("imagepng")){
        header("Content-Type: image/x-png");
        imagepng($img2);
    }
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:20:30.270

首先，将验证码存储在 cookie 中是个坏主意，因为机器人可以轻松地从 cookie 中读取正确的验证码。最好改用会话或一些存储。

其次，在 kcaptcha_config.php 文件中初始化了一些变量，您需要将所需的变量初始化移动到您的函数中

获取文本函数：

```
function make_text()
{
    // generating random keystring
    while(true){
        $keystring='';
        for($i=0;$i<$length;$i++){
            $keystring.=$allowed_symbols{mt_rand(0,strlen($allowed_symbols)-1)};
        }
        if(!preg_match('/cp|cb|ck|c6|c9|rn|rm|mm|co|do|cl|db|qp|qb|dp|ww/', $keystring)) break;
    }

    return $keystring;
} 
```

$length 和 $allowed_symbols 在 kcaptcha_config.php 中定义

我没有检查下一个函数中的所有变量，但我相信会有很多错误。

```
function make_captcha($keystring){

  $fonts=array();
  $fontsdir_absolute=dirname(__FILE__).'/'.$fontsdir;
  if ($handle = opendir($fontsdir_absolute)) {
      while (false !== ($file = readdir($handle))) {
          if (preg_match('/\.png$/i', $file)) {
              $fonts[]=$fontsdir_absolute.'/'.$file;
          }
      }
      closedir($handle);
  }

  $alphabet_length=strlen($alphabet);

  do{

      $font_file=$fonts[mt_rand(0, count($fonts)-1)];
      $font=imagecreatefrompng($font_file);
      imagealphablending($font, true);

      $fontfile_width=imagesx($font);
      $fontfile_height=imagesy($font)-1;

      $font_metrics=array();
      $symbol=0;
      $reading_symbol=false;

      // loading font
      for($i=0;$i<$fontfile_width && $symbol<$alphabet_length;$i++){
          $transparent = (imagecolorat($font, $i, 0) >> 24) == 127;

          if(!$reading_symbol && !$transparent){
              $font_metrics[$alphabet{$symbol}]=array('start'=>$i);
              $reading_symbol=true;
              continue;
          }

          if($reading_symbol && $transparent){
              $font_metrics[$alphabet{$symbol}]['end']=$i;
              $reading_symbol=false;
              $symbol++;
              continue;
          }
      }

      $img=imagecreatetruecolor($width, $height);
      imagealphablending($img, true);
      $white=imagecolorallocate($img, 255, 255, 255);
      $black=imagecolorallocate($img, 0, 0, 0);

      imagefilledrectangle($img, 0, 0, $width-1, $height-1, $white);

      // draw text
      $x=1;
      $odd=mt_rand(0,1);
      if($odd==0) $odd=-1;
      for($i=0;$i<$length;$i++){
          $m=$font_metrics[$keystring{$i}];

          $y=(($i%2)*$fluctuation_amplitude - $fluctuation_amplitude/2)*$odd
              + mt_rand(-round($fluctuation_amplitude/3), round($fluctuation_amplitude/3))
              + ($height-$fontfile_height)/2;

          if($no_spaces){
              $shift=0;
              if($i>0){
                  $shift=10000;
                  for($sy=3;$sy<$fontfile_height-10;$sy+=1){
                      for($sx=$m['start']-1;$sx<$m['end'];$sx+=1){
                          $rgb=imagecolorat($font, $sx, $sy);
                          $opacity=$rgb>>24;
                          if($opacity<127){
                              $left=$sx-$m['start']+$x;
                              $py=$sy+$y;
                              if($py>$height) break;
                              for($px=min($left,$width-1);$px>$left-200 && $px>=0;$px-=1){
                                  $color=imagecolorat($img, $px, $py) & 0xff;
                                  if($color+$opacity<170){ // 170 - threshold
                                      if($shift>$left-$px){
                                          $shift=$left-$px;
                                      }
                                      break;
                                  }
                              }
                              break;
                          }
                      }
                  }
                  if($shift==10000){
                      $shift=mt_rand(4,6);
                  }

              }
          }else{
              $shift=1;
          }
          imagecopy($img, $font, $x-$shift, $y, $m['start'], 1, $m['end']-$m['start'], $fontfile_height);
          $x+=$m['end']-$m['start']-$shift;
      }
  }while($x>=$width-10); // while not fit in canvas

  //noise
  $white=imagecolorallocate($font, 255, 255, 255);
  $black=imagecolorallocate($font, 0, 0, 0);
  for($i=0;$i<(($height-30)*$x)*$white_noise_density;$i++){
      imagesetpixel($img, mt_rand(0, $x-1), mt_rand(10, $height-15), $white);
  }
  for($i=0;$i<(($height-30)*$x)*$black_noise_density;$i++){
      imagesetpixel($img, mt_rand(0, $x-1), mt_rand(10, $height-15), $black);
  }

  $center=$x/2;

  // credits. To remove, see configuration file
  $img2=imagecreatetruecolor($width, $height+($show_credits?12:0));
  $foreground=imagecolorallocate($img2, $foreground_color[0], $foreground_color[1], $foreground_color[2]);
  $background=imagecolorallocate($img2, $background_color[0], $background_color[1], $background_color[2]);
  imagefilledrectangle($img2, 0, 0, $width-1, $height-1, $background);
  imagefilledrectangle($img2, 0, $height, $width-1, $height+12, $foreground);
  $credits=empty($credits)?$_SERVER['HTTP_HOST']:$credits;
  imagestring($img2, 2, $width/2-imagefontwidth(2)*strlen($credits)/2, $height-2, $credits, $background);

  // periods
  $rand1=mt_rand(750000,1200000)/10000000;
  $rand2=mt_rand(750000,1200000)/10000000;
  $rand3=mt_rand(750000,1200000)/10000000;
  $rand4=mt_rand(750000,1200000)/10000000;
  // phases
  $rand5=mt_rand(0,31415926)/10000000;
  $rand6=mt_rand(0,31415926)/10000000;
  $rand7=mt_rand(0,31415926)/10000000;
  $rand8=mt_rand(0,31415926)/10000000;
  // amplitudes
  $rand9=mt_rand(330,420)/110;
  $rand10=mt_rand(330,450)/100;

  //wave distortion

  for($x=0;$x<$width;$x++){
      for($y=0;$y<$height;$y++){
          $sx=$x+(sin($x*$rand1+$rand5)+sin($y*$rand3+$rand6))*$rand9-$width/2+$center+1;
          $sy=$y+(sin($x*$rand2+$rand7)+sin($y*$rand4+$rand8))*$rand10;

          if($sx<0 || $sy<0 || $sx>=$width-1 || $sy>=$height-1){
              continue;
          }else{
              $color=imagecolorat($img, $sx, $sy) & 0xFF;
              $color_x=imagecolorat($img, $sx+1, $sy) & 0xFF;
              $color_y=imagecolorat($img, $sx, $sy+1) & 0xFF;
              $color_xy=imagecolorat($img, $sx+1, $sy+1) & 0xFF;
          }

          if($color==255 && $color_x==255 && $color_y==255 && $color_xy==255){
              continue;
          }else if($color==0 && $color_x==0 && $color_y==0 && $color_xy==0){
              $newred=$foreground_color[0];
              $newgreen=$foreground_color[1];
              $newblue=$foreground_color[2];
          }else{
              $frsx=$sx-floor($sx);
              $frsy=$sy-floor($sy);
              $frsx1=1-$frsx;
              $frsy1=1-$frsy;

              $newcolor=(
                  $color*$frsx1*$frsy1+
                  $color_x*$frsx*$frsy1+
                  $color_y*$frsx1*$frsy+
                  $color_xy*$frsx*$frsy);

              if($newcolor>255) $newcolor=255;
              $newcolor=$newcolor/255;
              $newcolor0=1-$newcolor;

              $newred=$newcolor0*$foreground_color[0]+$newcolor*$background_color[0];
              $newgreen=$newcolor0*$foreground_color[1]+$newcolor*$background_color[1];
              $newblue=$newcolor0*$foreground_color[2]+$newcolor*$background_color[2];
          }

          imagesetpixel($img2, $x, $y, imagecolorallocate($img2, $newred, $newgreen, $newblue));
      }
  }

  header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
  header('Cache-Control: no-store, no-cache, must-revalidate');
  header('Cache-Control: post-check=0, pre-check=0', FALSE);
  header('Pragma: no-cache');
  if(function_exists("imagejpeg")){
      header("Content-Type: image/jpeg");
      imagejpeg($img2, null, $jpeg_quality);
  }else if(function_exists("imagegif")){
      header("Content-Type: image/gif");
      imagegif($img2);
  }else if(function_exists("imagepng")){
      header("Content-Type: image/x-png");
      imagepng($img2);
  }
} 
```

希望我帮助了你。

# vb.net - 每次计时器计数 1000 毫秒时，数字变量不会加 1 并显示在标签中。- vb.net

> ID：10027831
> 
> 赞同：1
> 
> 时间：2012-04-05T11:36:04.780
> 
> 标签：vb.net, checkbox, timer

这是我的代码：

```
 number = 1
    If chkFN.Enabled = True Then
    If ProgressBar1.Value < 100 Then
             number += 1
             lblFN2.Text = number
        Else
             lblFN2.Text = "0"
        End If
    End If 
```

我有一个复选框、进度条和一个标签。

当进度条低于 100 时，我希望每次计时器计数 1 时数字变量为 + 1。我尝试过“X = X + 1” - 它工作到一定程度，但我需要将变量重置为“0 " 当进度条达到 100% 并且我单击停止按钮时。

虽然我一直在输入这个，但我也尝试过：

```
 X = X + 1

    If chkFN.Enabled = True Then
        If ProgressBar1.Value < 100 Then
            lblFN2.Text = X + 1
        ElseIf AxWindowsMediaPlayer1.playState = WMPLib.WMPPlayState.wmppsMediaEnded   
        Then
            X = 0
            lblFN2.Text = "0"
        Else
            X = 0
            lblFN2.Text = "0"
        End If
    End If 
```

但是，当您再次启动计时器时，它只会从最后一个数字恢复，例如“13”并且不会重置为“0”。

谢谢你们的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:55:02.697

使用您的第一个代码，但添加

数字 += 1

到 Else 条件。您需要重置变量，或者它只是再次增加它。

# python - 是否有任何项目/库集可以轻松地在各种编程语言/平台之间进行通信？

> ID：10027832
> 
> 赞同：4
> 
> 时间：2012-04-05T11:36:10.163
> 
> 标签：python, haskell, interop, jvm, communication

我刚刚在 scala 中完成了一个相对较大的项目，很快就会开始另一个相关的项目。

我还没有选择这种语言，我希望我的决定更多地基于语言或可用库的特性，而不是互操作性问题。

这就是问这个的原因。

我的要求是（顶部更重要）：

1.  各种编程语言/平台之间的互操作性（可能是 JVM、Haskell、Python、C/C++）
2.  易于原型/重构
3.  易于编程
4.  性能卓越，无需过多关注我的优化（这可能不包括使用文件）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T11:44:33.333

在以各种语言编写并分布在各种平台上的程序之间进行通信的最简单方法之一是使用[消息传递](http://en.wikipedia.org/wiki/Message_passing)库。

ZeroMQ 是我最喜欢的一种，因为它简单、速度快，并且可以为大量语言提供绑定：[http ://www.zeromq.org/bindings:_start](http://www.zeromq.org/bindings:_start)

您还可以使用 ActiveMQ、RabbitMQ 或您遇到的任何其他具有多种语言绑定的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T11:45:09.763

我几乎所有的交流都是通过[Redis](http://redis.io/)进行的，在语言之间准确快速地移动数据非常简单。它是一个简单的密钥/存储数据库，允许我在 python 中执行此操作，并且

```
import redis
r = redis.Redis()
r.set("a", 33) 
```

然后，java中几乎相同的代码（减去大量初始化，因为java很冗长）

```
r.get("a"); // in java 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T11:53:13.883

对消息传递 +1，尤其是当图书馆将在收件人不可用时推迟传递时。如果您决定使用消息传递，则需要定义消息传递协议。一个不错的选择是[Representational State Transfer](http://en.wikipedia.org/wiki/Representational_state_transfer) (ReST)，尽管它的名字叫它，但它是一种基于 HTTP 的无状态、基于消息的交互协议。它需要非常仔细的 API 定义，这本身就是一件非常好的事情。

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T11:53:32.633

有很多方法，但它们分为三个主要选项：

1.  使用某种集中式通信节点（消息队列、键值存储、可能是数据库）；
2.  跨平台分布式对象技术（如 CORBA）；
3.  HTTP 使用你喜欢的任何 web 服务方法（尽管大多数人没有被 Enterprise Borg 洗脑，比如各种 restful web 服务），直接在组件之间。

我会忽略 2（事实证明它从来没有那么容易）。

至于 1，请注意数据库通常不应用作虚假的消息传递平台。只有当它真的是关于存储数据集时才使用它。另请注意，[http://redis.io](http://redis.io)是一个消息队列和键值存储。

# jsf-2 - p:tabView tabIndex 访问

> ID：10027833
> 
> 赞同：1
> 
> 时间：2012-04-05T11:36:11.487
> 
> 标签：jsf-2, primefaces, tabview

我有如下代码。

```
<p:tabView value="#{bean.entityList}" id="tabView" var="item">
     <p:tab title="#{item.name}">
     .
     .
     .
     </p:tab>
</p:tabView> 
```

我想访问选项卡的索引，就像数据表的 rowIndexVar 一样。如何获取标签索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-01T05:55:28.640

对此有一个非常可怕的解决方法，我不推荐，但这是我能想到的最好的方法。它涉及使用一些 Javascript 来跟踪选项卡计数，并在每个选项卡中使用更多 Javascript 来生成需要选项卡索引的 HTML。

在`<head>`您的页面中，初始化选项卡计数器；

```
<head>
  <script>
    // Global tab counter
    tabCount = -1;
  </script>
</head> 
```

然后，当您绘制每个选项卡时，递增计数器。在选项卡中，每当您需要选项卡索引时，制作一个小脚本来生成带有索引的 HTML。例如：

```
<p:tabView value="#{bean.entityList}" id="tabView" var="item">
  <p:tab title="#{item.name}">
    <script>
      // Increment the tab counter
      tabCount++;
    </script>

    <!-- Now the tab content -->
    The index of this tab is:
      <script>
        document.write(tabCount);
      </script>
  </p:tab>
</p:tabView> 
```

正如我所说，这太可怕了，每当我看到它时都会让我畏缩，但它确实有效。

# android - opensuse 12.1 64bit - Android - 加载共享库时出错：libz.so.1

> ID：10027834
> 
> 赞同：1
> 
> 时间：2012-04-05T11:36:12.080
> 
> 标签：android, 64-bit, opensuse, x86

我刚刚在全新安装的 opensuse 12.1 上安装了 eclipse、android sdk 和 jdk，但是当我创建一个新项目时，我在控制台中收到以下错误：

[2012-04-05 14:11:05 TestingApp] /home/alex/android-sdk/platform-tools/aapt：加载共享库时出错：libz.so.1：无法打开共享对象文件：没有这样的文件或目录

我知道我使用的是 64 位机器，我需要安装一些 32 位驱动程序（在任何地方都可以找到名称 'ia32-libs'，但是当我在终端中使用 >zypper install ia32-libs 时，我没有提供 '找到了 ia32-libs。

任何帮助都非常受欢迎。我从昨天开始搜索：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-18T19:08:56.057

如果它对某人有帮助，我通过安装在 openSUSE 12.2（64 位）上解决了这个错误：

```
sudo zypper install libstdc++47-32bit libzzip-0-13-32bit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:06:51.753

我有同样的问题。我假设缺少一些 32 位驱动程序。如果您打开 YaST -> 软件管理 -> 模式...有一个包含几个 32 位驱动程序的条目，但我不知道我必须安装其中哪些才能使 android/eclipse 工作...我假设我不必全部安装...？

# c# - 使用 Caliburn.Micro 的分层导航模型

> ID：10027838
> 
> 赞同：2
> 
> 时间：2012-04-05T11:36:47.200
> 
> 标签：c#, .net, wpf, silverlight, caliburn.micro

我想在 WPF MVVM 应用程序中实现以下分层导航模型：

```
ShellView
    Page1View
       Subpage1View
           Subpage2View
       Subpage3View
    Page2View
        ... 
```

这意味着在 Shellview 上，我有激活/停用 Page1View 和 Page2View 的按钮。在 Page1View 上有激活 Subpage1View 和 Subpage3View 的按钮，而 Subpage1View 有一个激活 Subpage2View 的按钮。

子页面应该在哪里显示？导航模型是否应该准确地映射到视图结构？我的意思是，我在 ShellView 上有一个 ContentControl（名为 ActiveItem），激活时会在其中显示 Page1View 和 Page2View。Subpage1View 应该显示在 Shell 的 ActiveItem ContentControl 上还是父视图 (Page1View) 上？

1.  如果我应该在 ShellView 上显示一个子页面，那么如何正确激活它？因为激活它的按钮在 Page1View 而不是 shell 上。

2.  如果我应该在父视图 (Page1View) 上显示一个子页面，那么我必须在 Page1View 上创建一个 ActiveItem ContentControl 并在需要之前将其隐藏。如何 ？另外我猜父视图滚动条可能会成为一个问题。

请指教！

使用 Caliburn.Micro 1.3、.NET 4、WPF。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:50:01.650

我一起扔了一个演示。我不确定它是否正是您正在寻找的。要记住的是`Screens`并且`Conductors`可以包含`Screens`和/或`Conductors`。因此，嵌套或进行复杂的屏幕合成非常简单。

这个例子有一个`ShellView`带有 2 个按钮和一个`ContentControl`. `Page1ViewModel`还有 2 个按钮和一个`ContentControl`.

单击`Page1`或`Page2`按钮`ShellView`激活相应的`Page`。一旦 a`Page`被激活，点击`SubPage1`或`SubPage2`激活相应的，也是如此`SubPage`。

[https://bitbucket.org/dbeattie/cmwpfnavsample/src](https://bitbucket.org/dbeattie/cmwpfnavsample/src)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:09:14.190

我们这样使用子页面：

*   子页面本身显示在页面视图中的 ContentControl 中。所以我们有一个外壳视图，它有一个 ContentControl 来显示活动页面，在这个活动页面中，还有另一个 ContentControl 来显示活动子页面。
*   我们在 shell 视图本身上显示当前页面的子页面列表（因为布局），所以我们有绑定到 ActiveItem.Items 的 ItemsControl（假设 ActiveItem 是从 Conductor 继承的页面）。

所以我们只需使用 ItemsControl 来选择当前活动的页面或子页面，然后使用 ContentControl 来显示它。请注意，选定的子页面通过其父页面视图显示。

但基本上，您是直接在 shell 视图上显示子页面（ContentControl 绑定到 ActiveItem.ActiveItem）还是使用其他方式，都取决于您。

尽管不包括子页面，[但 Coproject](http://coproject.codeplex.com/)示例应用程序可能会对您有所帮助。我打算让它更复杂，稍后再添加子页面。

ad 2\. 我认为您不需要隐藏 ContentControl - 如果没有选择子页面，它将为空。不过，如果你想隐藏它，我建议使用 ValueConverter（从对象到 Visibility，如果 object == null 然后 Visibility.Collapsed，否则 Visible）并将 ActiveItem ContentControl 的 Visibility 属性再次绑定到 ActiveItem。

# iphone - 更改 iPhone 用户代理？

> ID：10027842
> 
> 赞同：0
> 
> 时间：2012-04-05T11:37:07.633
> 
> 标签：iphone, user-agent

我需要使用 iPhone 查看网站，但它会将我重定向到移动版本。如何防止这种重定向？是隐藏或更改我的用户代理的唯一方法吗？如果是这样，如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:01:33.557

这不是开发人员的问题，而是：

1/ 使用备用浏览器，例如 iCabMobile、IIRC，它允许您更改用户代理；

2/ 在大多数“移动”网站上，在页面的最底部，有一个“经典视图”或“桌面视图”链接。

# facebook - 沙盒模式已禁用，但应用程序并非对所有人可见

> ID：10027844
> 
> 赞同：3
> 
> 时间：2012-04-05T11:37:12.613
> 
> 标签：facebook, sandbox

我为页面选项卡创建了一个应用程序，并启用了沙盒模式以在它上线之前对其进行测试。我在应用程序中添加了几个测试用户，以便他们可以进行测试，并且一切都按预期工作。

我现在已经禁用了该应用的沙盒模式，但该应用对所有人**不**可见，并且只有之前添加的测试用户可以看到它。应用程序图标和链接出现在页面顶部，但单击时它只会重定向回同一页面。

沙盒模式设置肯定显示为已禁用，如果我有一个新的测试用户，他们就可以看到该应用程序！

我还用不同的应用程序测试了同样的过程，并且遇到了同样的问题。

有没有人遇到过这种情况，或者知道 Facebook 目前有任何可能导致这种情况的问题？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:56:14.760

我也有这个问题。我听从 Dan Som 的建议，在没有启用沙盒模式的情况下重新创建了应用程序。果然，我的应用程序是可见的。

然后我开始修改设置以匹配我的旧应用程序。之后，我的新应用程序不再可见。我意识到我切换/启用的设置之一阻止了我的新应用程序对非测试人员/开发人员可见。

那个设置是；就我而言，`Age Restrictions`. 我把它设置为`People 18 and older`即使它不必是。我将其设置回默认设置`Anyone (13+)`，我的应用程序再次可见。如果您有这样的年龄限制，我怀疑您的应用需要获得 Facebook 的批准。

你可以在`Settings | Advanced | App Restrictions`.

如果您或任何人仍然遇到此问题 - 值得一看。

# python - 指纹匹配/识别算法/实现

> ID：10027847
> 
> 赞同：10
> 
> 时间：2012-04-05T11:37:15.230
> 
> 标签：python, algorithm, matching, fingerprint

在这一天中，我一直在将时间投入到编程领域的指纹匹配/识别算法/实现上。虽然它有点模糊，因为我似乎找不到任何真正相关的东西。

我基本上在寻找接下来的两件事：

*   指纹识别：验证图像实际上是指纹，因此可以与另一个指纹匹配
*   指纹匹配：从物品中匹配两个指纹，看是否真的相等

所有的操作都会在图像上完成，所以我和硬件没有任何关系。我发现了一些东西，例如 Java Fingerprint SDK 等，并且还在 Stackoverflow 上发现了几乎重复的问题，但它们要么已经过时，要么不太清楚。

谁能为我指出可以做这两件事的算法/实现（开源）的方向吗？最后我想自己在 Python 中实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:44:53.583

试试 Robert Vazan 的这个开源库[http://sourceforge.net/projects/sourceafis/](http://sourceforge.net/projects/sourceafis/)。这是一个.net 实现，Java 端口正在进行中。

如果您从[开发](http://sourceforge.net/projects/sourceafis/develop)分支签出他们的 mercurial repo，也会显示示例代码。

```
http://sourceafis.hg.sourceforge.net:8000/hgroot/sourceafis/sourceafis (read-only) 
```

亲切的问候，

# javascript - 通过 JavaScript 控制原生浏览器缩放？

> ID：10027850
> 
> 赞同：0
> 
> 时间：2012-04-05T11:37:21.350
> 
> 标签：javascript, html, dom, fullscreen

似乎找不到关于这个主题的任何信息，所以这里是：

假设我有一个可以使用特定于浏览器的方法进入`F11`全屏的 Web 应用程序。`requestFullscreen()`我正在寻找一种方法来控制应用程序的本机浏览器缩放以填充可用的全屏空间（通常使用`Ctrl`+`+`和`Ctrl`+调用`-`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:24:00.837

您可能需要该`requestFullScreen()`功能。这是 HTML5 草案规范的新成员，但它已经在一些浏览器中找到了它的方式！

[https://wiki.mozilla.org/Gecko:FullScreenAPI#Proposed_Specification](https://wiki.mozilla.org/Gecko:FullScreenAPI#Proposed_Specification)

# c# - 使用 azure 在桌面应用程序和 Web 应用程序之间共享数据

> ID：10027853
> 
> 赞同：1
> 
> 时间：2012-04-05T11:37:35.513
> 
> 标签：c#, .net, azure

我开发了一个 Windows 窗体应用程序。但是，我想将该应用程序中的数据上传到云服务器，然后开发一个 Web 应用程序来检索该数据。是否可以使用 Windows azure 来实现？

如果没有，有没有办法做到这一点？任何帮助表示赞赏！谢谢！

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:48:25.020

有几种方法可以实现它。您可以根据需要使用 SQL Azure 数据库并通过[Open Data](http://odata.org)公开它。另一方面，您也可以使用[Azure Connect](http://www.windowsazure.com/en-us/home/features/virtual-network/)在您的桌面应用程序和云服务之间建立某种 VPN。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:00:34.040

根据您的要求，我会这样构建解决方案。

**数据存储** SQL Azure 或 Blob 存储。

如果您需要对数据运行高级查询，我建议您使用 SQL Azure，但每 GB 的成本更昂贵。如果高级查询真的不会成为问题，那么 Blob 存储。此外，如果您只打算存储少量数据，例如顶部几 GB，如果您熟悉 SQL，SQL Azure 可能仍然是最佳选择。它可能有更快的开发时间。

**Web 服务** 要从您的桌面访问数据，我建议您使用 Web 服务。最好是与 JSON 兼容的，在 Azure 实例上运行。或者您可以查看：[http ://www.asp.net/web-api](http://www.asp.net/web-api)

**桌面应用程序** 其实可以是任何东西，但是如果你想要一个漂亮的应用程序，那么 WPF 就是你要走的路。如果您想要速度，那么最好使用 WinForms 应用程序，或者如果它只是一个简单的发送数据和有限的 UI，则为控制台。

**Web App** 不确定这是关于什么的？但是一个普通的旧 ASP.NET 或 ASP.NET MVC 可以解决这个问题，也可以将它托管在 Azure 实例上。您可以让 Web 服务和应用程序在同一角色上运行。

# redirect - 需要重定向的网站转移

> ID：10027860
> 
> 赞同：0
> 
> 时间：2012-04-05T11:38:11.440
> 
> 标签：redirect, dns, transfer

真的需要帮助只是转移了一个网站。

我在新网站上设置了支持论坛。

```
www.example.com/support 
```

他们现有的支持地址是

```
www.support.example.com 
```

我如何为此设置重定向以将输入 www.support.example.com 的任何人重定向到 www.example.com/support

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:45:19.123

将以下`meta`标记添加到代表的页面，`www.support.example.com`它将重定向到您的新 URL。请记住将`meta`标签中的 URL 更改为新的 URL。

> ```
> <html><head>
> <title>Title</title>
> <meta http-equiv="refresh" content="0;url=http://www.example.com/support"> 
> </head>
> <body>   <p> bla bla bla.. </p>
> </body>
> </html> 
> ```

# javascript - 在 Notepad++ 中查找和替换以跟踪 URL

> ID：10027867
> 
> 赞同：0
> 
> 时间：2012-04-05T11:38:44.700
> 
> 标签：javascript, notepad++

我有一个包含大约数千行的文件。每一行的格式如下：

```
02:17:15.204    1.217   890 322 GET 200 text/html   http://stage.youbeauty.com/body-fitness/galleries/gluten-free-bodycare
02:17:16.530    0.304   313 (7592)  GET (Cache) text/javascript http://use.typekit.com/lqi6pyj.js
02:17:16.534    0.769   463 (8631)  GET 304 text/css    http://stage.assets0.youbeauty.com/rel-20120404171521/assets/vendor.css
02:17:16.537    1.514   419 32963   GET 200 text/css    http://stage.assets0.youbeauty.com/rel-20120404171521/assets/application1.css 
```

我只想借助 NOtepad++ 中的“查找和替换”功能获取 URL。

（如果我们使用 java script 之类的任何脚本也可以）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:43:08.213

使用正则表达式选项和这个搜索词：

```
http.* 
```

这将选择从`http`行尾到行尾的所有内容。

如果要删除每行中除 URL 之外的所有内容，请使用以下命令：

```
Find what: .*(http.*)
Replace with: \1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T11:51:56.357

我写了一个python脚本。这是[http://ideone.com/TkK5e](http://ideone.com/TkK5e)。希望能帮助到你。

# c# - 双倍价格值转文本的方法

> ID：10027868
> 
> 赞同：-6
> 
> 时间：2012-04-05T11:38:46.617
> 
> 标签：c#

> **可能重复：**
> [.NET 将数字转换为字符串表示（1 到 1、2 到 2 等……）](https://stackoverflow.com/questions/794663/net-convert-number-to-string-representation-1-to-one-2-to-two-etc)

我需要一种将双值（例如：300.5）转换为文本（例如：三百五十）的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:42:27.277

BCL 中没有内置任何内容。

您将需要找到一个第三方库，例如 @WouterH[评论](http://www.codeproject.com/Articles/15934/How-to-convert-a-numeric-value-or-currency-to-Engl)的那个，或者自己编写。

# php - 如何找出服务器上安装了 SSL 证书？（使用 PHP）

> ID：10027870
> 
> 赞同：3
> 
> 时间：2012-04-05T11:38:54.390
> 
> 标签：php, wordpress, url, ssl

如何找出网站是在 SSL 上还是不在 SSL 上？我正在开发用于实时交易的 WP 插件，插件检查网站（安装插件的网站）是否使用 SSL 很重要，如果网站是，我必须在结帐页面上显示警告消息不在 SSL 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:43:12.080

您可以检查[`$_SERVER['HTTPS']`](http://php.net/manual/en/reserved.variables.server.php)变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:14:06.980

```
function is_exist_ssl($domain){
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://".$domain);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt ($ch, CURLOPT_HEADER, 0);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_exec($ch);

if(!curl_error($ch)){
$info = curl_getinfo($ch);
if($info['http_code'] == 200){
return true;
}
return false;
}else{
return false;
}
} 
```

用法：

```
$domain = 'uniapple.net';

if(is_exist_ssl($domain)){
echo "SSL is enabled!";
}else{
echo "No SSL"; 
}

//usage ::
if(!isset($_SERVER['REDIRECT_HTTPS']) || $_SERVER['REDIRECT_HTTPS'] != 'on'){
if(is_exist_ssl($domain)){
header('location : https://'.$domain);
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-14T14:52:38.673

由于这个问题很老，而且答案有点过时，我想我会插话！

我看到您在询问有关 WordPress 插件的问题。自 WordPress 2.6 起， WordPress 有一个[is_ssl()](https://codex.wordpress.org/Function_Reference/is_ssl)函数来检查页面是否使用 ssl。

这是一个例子：

```
 if ( is_ssl() ) {
  print_r('SSL is running!');
} else {
  print_r('Please install an ssl certificate!');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:51:13.770

如果是 HTTPS 请求，超全局 $_SERVER 数组中的 'HTTPS' 值将被设置并设置为 'on'。如果不是 HTTPS 请求，则不会设置。

因此，要测试它是否是 PHP 中的 HTTPS 请求，您可以这样做：

```
 if( isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == 'on' ) {
        ...
    } 
```

或者，如果您需要在代码中多次知道它是否是 HTTPS 请求，您可以将其设置为常量，如下所示：

```
define('IS_HTTPS_REQUEST', isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == 'on'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T13:24:27.937

[这个问题中描述了这个问题](https://stackoverflow.com/q/3729497/372643)的许多解决方案。如果您使用的是 Apache Httpd，并且可以缩小特定前缀的路径，则可以`SSLRequireSSL`在`Location`指令中使用。或者，您可以检查`$_SERVER['HTTPS']`PHP，如果它已定义（它可能取决于 Web 服务器，但通常是）。

更重要的是，不要过分关注您所服务的页面是否通过 HTTPS 提供。客户端有责任检查这一点，因为当它到达服务器时，为时已晚：它可能已经被 MITM 攻击者拦截（即使真正的客户端做了，他们甚至可能通过 HTTPS 发出请求不是）。我在[这个答案](https://stackoverflow.com/a/9105894/372643)中对这个问题做了更长的解释。从 UI 的角度来看，您应该清楚地表明用户将进入“安全”部分，并且由他们来检查后续请求是否将通过 HTTPS。

检查您的服务器是否确实通过 HTTPS 运行不一定是一件坏事，但从安全角度来看，它并没有多大帮助。真正重要的是必须使用到该安全部分的所有链接`https://`（并且*不能*依赖自动 URL 重写来这样做）。

# php - 登录并重定向到用户主页

> ID：10027875
> 
> 赞同：-3
> 
> 时间：2012-04-05T09:50:23.837
> 
> 标签：php, javascript, html

我目前无法解决的问题是用户登录时。他们到达站点（index.php）并输入用户名和密码，然后通过 Post 表单提交回 index.php - 如果有不正确的详细信息，那么他们收到一条错误消息。但如果成功，那么我希望他们被带到他们的用户主页 - 但我不能这样做！我只好向他们展示一个指向主页的链接，这有点笨拙。

似乎必须有一个明显的解决方案 - 在此之前从未见过没有重定向的网站！不确定答案是 PHP、HTML 还是 Javascript。

编辑：

对不起，如果问题没有达到标准 - 仍然在这里学习。已尝试将重定向放在 if 语句中，但仍然无法正常工作。我认为理想情况下重定向将是代码的顶部，但看不到如何做到这一点并保留登录过程？代码如下：

```
if (isset($_POST['user']))
{
$user = sanitizeString($_POST['user']);
$pass = sanitizeString($_POST['pass']);

$salt = "randomsalt";
$md5pass = md5($salt . $pass);

if ($user == "" || $pass == "")
{
    $error = "Not all fields were entered<br />";
}
else
{
    $query = "SELECT username,password FROM users
              WHERE username='$user' AND password='$md5pass'";

    if (mysql_num_rows(queryMysql($query)) == 0)
    {
        $error = "Username/Password invalid<br />";
    }
    else
    {
        $_SESSION['user'] = $user;
        $_SESSION['pass'] = $pass;

        header("Location: http://localhost:8888/profile.php?view=$user");

        exit;

    }
} 
```

}

谢谢

富有的

编辑2：

感谢您的帮助 - 仍然无法解决，然后需要在页面顶部重新定向，但同样必须有我的登录脚本。最后解决了它：

```
echo "<meta http-equiv=\"refresh\" content=\"0;URL=profile.php?view=$user\">"; 
```

代替上面的标题和出口行。

再次感谢

富有的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:34:21.423

您可能重定向错误。首先，把它放在最顶部`index.php`：

```
<?php
/* Redirect browser */
header("Location: http://newPath/newPage.php/");

/* Make sure that code below does not get executed when we redirect. */
exit;
?> 
```

这是一个简单的重定向，其中包含一个`exit`停止所有处理的语句，因此您可以测试一下重定向是否有效。如果可行，则向重定向添加一个条件，例如

```
<?php
if (/*login credentials are valid*/){
    /* Redirect browser */
    header("Location: http://newPath/newPage.php/");

    /* Make sure that code below does not get executed when we redirect. */
    exit;
}
?> 
```

但是，当然替换`/*login credentials are valid*/`为对函数的调用或实际检查凭据并返回布尔值的任何内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T11:38:01.420

该解决方案适用于php，希望对您有所帮助。

```
$user_name = $_POST['username']; // posting value through form
$pass_word = $_POST['password']; // posting value through form

$sql = mysql_query("select 1 from admin_users where username='".$user_name."' and password='".$pass_word."'"); // checking username and password in database

if ($sql)    

{echo "Invalid User Name/Password";}

else

{header("Location: homepage.php"); exit;} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-05T11:46:10.783

在变量中获取用户名和密码。

```
$username = $_POST['username'];
$pwd = $_POST['password']; 
```

将此与您的表格进行比较，如下所示：

```
$sql = mysql_query("select * from tbl_users where username='".$username."' and password='".$pwd."'");
if(mysql_num_rows($sql)>0){
header("Location:homepage.php");
}else{
echo "Invalid username or password ";
} 
```

这将起作用。

# php - 用于填充下拉列表的 Javascript 适用于除 IE9 之外的所有内容

> ID：10027887
> 
> 赞同：1
> 
> 时间：2012-04-05T11:39:58.450
> 
> 标签：php, javascript, internet-explorer-9, drop-down-menu

我正在使用以下 javascript 代码：

```
function dynamicSelect(id1, id2) {
  if (document.getElementById && document.getElementsByTagName) {
    var sel1 = document.getElementById(id1);
    var sel2 = document.getElementById(id2);
    var clone = sel2.cloneNode(true);
    var clonedOptions = clone.getElementsByTagName("option");
    refreshDynamicSelectOptions(sel1, sel2, clonedOptions);
    sel1.onchange = function() {
      refreshDynamicSelectOptions(sel1, sel2, clonedOptions);
    };
  }
}

function refreshDynamicSelectOptions(sel1, sel2, clonedOptions) {
  while (sel2.options.length) {
    sel2.remove(0);
  }
  var pattern1 = /( |^)(select)( |$)/;
  var pattern2 = new RegExp("( |^)(" +
  sel1.options[sel1.selectedIndex].value + ")( |$)");
  for (var i = 0; i < clonedOptions.length; i++) {
    if (clonedOptions[i].className.match(pattern1) || clonedOptions[i].className.match(pattern2)) {
      sel2.appendChild(clonedOptions[i].cloneNode(true));
    }
  }
}
window.onload = function() {
  dynamicSelect("worktype", "function");
  dynamicSelect("worktype2", "function2");
} 
```

这个 HTML 代码：

```
<select class="dropdown" name="type" id="worktype2">
  <option class="select" value="select">Select Type...</option>
  <option value="clerk">White collar</option>
  <option value="worker">Blue collar</option>
</select><br /><br />

<label for="function" class="search-label">SELECT A FUNCTION</label><br />
<select name="function" class="dropdown" id="function2">
<option class="select" value="select">Select Function...</option>
<?php

  $getFunctionsSQL = "SELECT * FROM categories;";
  $getFunctionsSQLresult = mysql_query($getFunctionsSQL) or die(mysql_error()); 
  while ($record = mysql_fetch_array($getFunctionsSQLresult)) {
    echo "<option class='" . $record['type'] . "' value='". $record['category']."'>". $record['category'] ."</option>";
  }

?>
</select><br /><br /> 
```

它的作用是根据在另一个下拉列表中选择的内容填充一个下拉列表。它适用于 Firefox、Chrome、IE7、IE8，...但不适用于 IE9...

还没弄清楚为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:11:11.660

改变

```
var clonedOptions = clone.getElementsByTagName("option"); 
```

至

```
var clonedOptions = clone.options; 
```

似乎为 IE9 修复了它，并且对我来说不会破坏 IE7、IE8 或 Chrome。

归功于[http://www.codingforums.com/showthread.php?t=229946](http://www.codingforums.com/showthread.php?t=229946)这似乎有你的脚本的来源:-)

# objective-c - NSSet *children = [parent children]; 执行获取请求？

> ID：10027890
> 
> 赞同：0
> 
> 时间：2012-04-05T11:40:10.240
> 
> 标签：objective-c, cocoa, core-data, nsfetchrequest

是否`NSSet *children = [parent children];`导致核心数据执行提取，返回子实体关系的所有实例？

同样在 IB 中：具有嵌套关系的模型键路径是否执行获取请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:00:45.673

它返回一个像集合一样工作的 Core Data 内部“故障”集合对象。当您访问集合中的一个项目时，它会在第一次访问时进入您的持久存储以获取数据。这是有效的索引，因此它会比许多 fetch 请求更快，并且有时关系错误可能已经触发，所以它根本不会去存储。

使用`com.apple.CoreData.SQLDebug`环境变量来找出幕后发生的事情并微调性能。在您的方案中将其设置为 1。

# java - android.widget.AutoTextComplete 中的 ClassCastException

> ID：10027891
> 
> 赞同：0
> 
> 时间：2012-04-05T11:40:17.007
> 
> 标签：java, android, android-layout

```
public class Review extends Activity {

    private CustomAutoCompleteView autoComplete;
    private ArrayAdapter<String> autoCompleteAdapter;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.review);

        System.out.print("1");
        autoCompleteAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line);
        System.out.print("2");
        autoCompleteAdapter.setNotifyOnChange(true); d
        autoComplete = (CustomAutoCompleteView) findViewById(R.id.autoCompleteTextView1);/*Line which is unable to cast throws Exception*/
        autoComplete.setHint("Restaurant Name");
        autoComplete.setThreshold(3);
        autoComplete.setAdapter(autoCompleteAdapter);
        autoComplete.addTextChangedListener(textChecker);

        final EditText et1=(EditText)findViewById(R.id.editText3);
} 
```

## CustomAutoCompleteView.java

```
public class CustomAutoCompleteView extends AutoCompleteTextView {
public CustomAutoCompleteView(Context context) {
super(context);
// TODO Auto-generated constructor stub
}
public CustomAutoCompleteView(Context context, AttributeSet attrs) {
super(context, attrs);
// TODO Auto-generated constructor stub
}
public CustomAutoCompleteView(Context context, AttributeSet attrs,
int defStyle) {
super(context, attrs, defStyle);
// TODO Auto-generated constructor stub
}
@Override
protected void performFiltering(final CharSequence text, final int keyCode) {
String filterText = "";
super.performFiltering(filterText, keyCode);
}
/**
* After a selection, capture the new value and append to the existing
* text
*/
@Override
protected void replaceText(final CharSequence text) {
super.replaceText(text);
}
} 
```

> ***我无法将 AutoCompleteText 类转换为 CustomAutoCompleteView。即使类 CustomAutoCompleteView 包含匹配的构造函数。它会引发运行时异常。请帮助我。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:46:12.903

如果 class`B`扩展`A`，则`B`可以将 class 强制转换为 class `A`，因为可以保证 的所有实例`B`也是 的实例`A`。但是，您不能保证 的实例`A`是 a ，因此如果您没有首先验证该实例实际上是 的实例，`B`则从`A`to的转换`B`可能会抛出 a 。`ClassCastException``instanceof``A``B`

关于构造的声明如果不适用，因为铸造不使用构造器并且对象已经存在。

# biztalk - UnZip Dissambler 管道

> ID：10027895
> 
> 赞同：1
> 
> 时间：2012-04-05T11:40:28.833
> 
> 标签：biztalk, biztalk-2010

我需要在接收位置接收 Zip 文件。我想在收到压缩文件时解压缩它。

如何在 Biztalk 2010 中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:02:22.047

您可以检查以下主题。他们在自定义管道中解压缩文件的位置。

[http://www.codeproject.com/Articles/152565/Unzip-Files-in-a-Custom-Pipeline-Component](http://www.codeproject.com/Articles/152565/Unzip-Files-in-a-Custom-Pipeline-Component)

# android - Android：存在的类和找不到它的Logcat日志

> ID：10027897
> 
> 赞同：0
> 
> 时间：2012-04-05T11:40:32.907
> 
> 标签：android, classnotfound

我试图将在我的笔记本电脑上开发的项目导入另一台 PC。

我确信该项目在我的笔记本电脑上运行良好，但在新电脑上，应用程序崩溃告诉我它找不到类：

```
04-05 10:32:26.802: D/dalvikvm(568): GC_EXTERNAL_ALLOC freed 1062 objects / 72728 bytes in 48ms
04-05 10:32:28.492: D/dalvikvm(568): GC_EXTERNAL_ALLOC freed 270 objects / 14312 bytes in 39ms
04-05 10:32:28.653: D/dalvikvm(568): GC_EXTERNAL_ALLOC freed 77 objects / 3184 bytes in 37ms
04-05 10:32:29.242: E/dalvikvm(568): Could not find class 'org.codehaus.jackson.map.ObjectMapper', referenced from method com.test.two.MockRecipesControllerString.<init>
04-05 10:32:29.653: W/dalvikvm(568): VFY: unable to resolve new-instance 710 (Lorg/codehaus/jackson/map/ObjectMapper;) in Lcom/test/two/MockRecipesControllerString;
04-05 10:32:29.653: D/dalvikvm(568): VFY: replacing opcode 0x22 at 0x000e
04-05 10:32:29.693: D/dalvikvm(568): VFY: dead code 0x0010-001e in Lcom/test/two/MockRecipesControllerString;.<init> (Ljava/io/InputStream;)V
04-05 10:32:29.733: I/dalvikvm(568): Could not find method org.codehaus.jackson.JsonFactory.createJsonParser, referenced from method com.test.two.MockRecipesControllerString.init 
```

图书馆和班级存在。

我能做些什么来解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:44:30.883

假设类 ObjectMapper(org.codehaus.jackson.map.ObjectMapper) 作为 Lib 在 Jar 文件中，再次添加 Lib..清理构建项目..它将工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:45:15.283

选择您的项目右键单击-> 属性-> 检查您的构建路径在 java 中添加库，这可能会有所帮助..

# javascript - HTML 5 画布：检测是否在将鼠标移到画布上时按下了鼠标按钮

> ID：10027918
> 
> 赞同：1
> 
> 时间：2012-04-05T11:42:24.453
> 
> 标签：javascript, html, html5-canvas

我试图检测，如果在 CANVAS 上移动时按下鼠标：

```
canvas.addEventListener('mousemove', function (evt) {
           ...
        }); 
```

在 mousedown 中设置一个标志并在 mouseup 中跳过它是一个坏主意，因为用户可以在画布外释放鼠标按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:54:57.463

`evt.which``1`如果在触发 mousemove 事件期间按住鼠标左键，则将是，如果`0`不是。

测试：

```
document.addEventListener("mousemove", function (e) {
    console.log(e.which);
}); 
```

# spring - 有什么方法可以使用在 JSP 中构建 URL 通过在当前页面 URL 中附加/替换查询参数来标记？

> ID：10027921
> 
> 赞同：1
> 
> 时间：2012-04-05T11:42:40.013
> 
> 标签：spring, jsp, spring-mvc, jstl

例如，如果当前页面 URL 是*'http://domain.com/page?param1=value1¶m2=value2'*，那么：

```
<spring:url value="">
  <spring:param name="param3" value="value3" />
</spring:url> 
```

产生*'http://domain.com/page?param1=value1¶m2=value2& **param3=value3** '*，但是

```
<spring:url value="">
  <spring:param name="param2" value="value3" />
</spring:url> 
```

产生*'http://domain.com/page?param1=value1& **param2=value3** '*。

有没有可能实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:56:23.980

我想到的唯一解决方案是提供一组参数并遍历它们而忽略必须替换/省略的参数：

```
<spring:url value="">
  <spring:param name="param3" value="value3" />
  <c:forEach items="additionalParams" var="aParam">
    <c:if test="${aParam.name ne 'param3'}">
      <spring:param name="${aParam.name}" value="${aParam.value}" />
    </c:if>
  </c:forEach>
</spring:url> 
```

# windows-7 - 任务调度器应用和焦点

> ID：10027931
> 
> 赞同：3
> 
> 时间：2012-04-05T11:43:08.700
> 
> 标签：windows-7

我需要使用调度程序运行任务，问题是，如果我双击可执行文件，程序将获得焦点并全屏运行，如果我使用任务调度程序运行相同的可执行文件，命令窗口仍位于顶部并且应用程序在后台运行，有人可以帮助我吗？

干杯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T03:40:57.873

这对你来说可能有点晚了，但我遇到了同样的问题，即当任务调度程序启动时谷歌浏览器没有收到焦点，这就是我修复它的方法：

启动程序字段：`C:\WINDOWS\System32\cmd.exe`
参数字段：`/c start "" "C:\Program Files\Chrome\Chrome.exe" --some-arguments`

这将基本上打开`cmd.exe`并将参数传递给它，因为`/c`指定它将运行这些参数然后关闭。

由于`start`会给任何以它为中心的东西，chrome 会以它的窗口为中心。

玩得开心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:55:45.310

我确实设法通过运行我的可执行文件而不是直接从任务调度程序运行可执行文件来解决问题。所以现在任务调度程序运行我的运行可执行文件的 vbs 脚本。

# android - 在 Android 的 OpenGL ES 应用程序的开头显示加载图标

> ID：10027936
> 
> 赞同：2
> 
> 时间：2012-04-05T11:43:18.097
> 
> 标签：android, android-layout, opengl-es

在Android中的OpenGL应用程序开始时显示任何加载图标（旋转轮，带有“正在加载”的屏幕......任何东西）的最佳（也是简单）方法是什么？我的初始化函数 (`onSurfaceCreated`和`onSurfaceChanged`) 非常慢，而且我不想在它们加载时出现黑屏。与此同时，我尝试用 OpenGL 绘制一些东西，但在加载所有内容之前，这些函数是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:30:17.140

只是不要在`onSurfaceCreated`和中进行冗长的操作`onSurfaceChanged`。将昂贵的操作转移到自己的线程中（如果与 OpenGL 无关），或者在显示功能准备阶段按需执行。

# cakephp - Cakephp 2.1 插件未检测到模型包

> ID：10027939
> 
> 赞同：0
> 
> 时间：2012-04-05T11:43:32.967
> 
> 标签：cakephp, cakephp-2.1, cakephp-model

起初对不起我的英语不好

我想在我的插件控制器中加载模型

我在这条路径中有一个控制器：

/app/Plugin/Services/Controller/TypesController.php

我在这条路上有一个模型：

/app/Plugin/Services/Model/ServiceType.php

我想在 TypesController 中加载 ServiceType 模型，我使用：

$this->loadModel("ServiceType");

此命令未检测到我的 ServiceType 模型，但此命令指向我的主模型 pacake 到此路径：

/app/Model/ServiceType.php

但我想在我的插件模型中加载模型。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:50:51.733

如果那是您应该使用的主要模型

```
$uses = array('Services.ServiceType'); 
```

如果不是，您仍然需要使用插件前缀：

```
$this->loadModel("Services.ServiceType"); 
```

# c++ - 如何使用 IOCP 获取客户端真实 IP 地址和端口？

> ID：10027940
> 
> 赞同：1
> 
> 时间：2012-04-05T11:43:39.253
> 
> 标签：c++, sockets, winsock, iocp

我需要在服务器中获取客户端的 IP 地址和端口。使用 IOCP 在 C++ 上编写的服务器，所以我不接受客户端，我创建新的套接字，然后在这个准备好的套接字上接受（AcceptEx）客户端。因为它 struct sockaddr_in 是不正确的。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T11:57:05.613

`AcceptEx`可能会返回您的地址和对等地址（TCP 套接字的 IP+端口）。

```
BOOL AcceptEx(
  __in   SOCKET sListenSocket,
  __in   SOCKET sAcceptSocket,
  __in   PVOID lpOutputBuffer,
  __in   DWORD dwReceiveDataLength,
  __in   DWORD dwLocalAddressLength,
  __in   DWORD dwRemoteAddressLength,
  __out  LPDWORD lpdwBytesReceived,
  __in   LPOVERLAPPED lpOverlapped
); 
```

您应该指定`lpOutputBuffer`指向一个大小足以容纳 2 个返回地址的缓冲区，然后 . `dwLocalAddressLength`并且`dwRemoteAddressLength`应该设置为缓冲区中保留的地址大小。

根据 MSDN，单个地址（用于`AcceptEx`功能）所需的缓冲区大小为`sizeof(SOCKADDR_IN) + 16`：

> ```
> dwLocalAddressLength [in]
> 
> The number of bytes reserved for the local address information. This value must be at least 16 bytes more than the maximum address 
> ```
> 
> 正在使用的传输协议的长度。

当然，缓冲区必须在 I/O 持续时间内有效。你可以把它放在你的`OVERLAPPED`结构中。像这样的东西：

```
struct OverlappedAccept
    :public OVERLAPPED
{
    // some context information that you need
    // ...

    // Buffer for addresses
    struct {
        BYTE m_pLocal[sizeof(SOCKADDR_IN) + 16];
        BYTE m_pRemote[sizeof(SOCKADDR_IN) + 16];
    } m_Bufs;
};

// start accept operation
OverlappedAccept* pOver = /* ... */;

BOOL bRet = AcceptEx(
    hSockListen,
    hSockNew,
    &pOver->m_Bufs,
    0,
    sizeof(pOver->m_Bufs.m_pLocal),
    sizeof(pOver->m_Bufs.m_pRemote),
    &dwBytes,
    pOver); 
```

在 I/O（成功）完成后，您可能会获得以下地址：

```
sockaddr *pLocal = NULL, *pRemote = NULL;
int nLocal = 0, nRemote = 0;
GetAcceptExSockAddrs(
    &pOver->m_Bufs,
    0,
    sizeof(pOver->m_Bufs.m_pLocal),
    sizeof(pOver->m_Bufs.m_pRemote),
    &pLocal,
    &nLocal,
    &pRemote,
    &nRemote); 
```

# php - 通过javascript清除fileUpload控件的内容

> ID：10027943
> 
> 赞同：0
> 
> 时间：2012-04-05T11:43:41.673
> 
> 标签：php, javascript, file-upload, upload

我正在使用脚本检查所选文件的文件大小，现在我想清除文件上传的内容，如果文件超过大小限制：

```
var myFile = document.getElementById('attach');
myFile.addEventListener('change', function () {
 var size = this.files[0].size;
 if(size>10000000){
 showDialog('File exceeded maximum allowed limit of 10 Mb', 'File Size Exceeds');
 clear('new');
} 
```

});

明确的功能是：

```
 <script>
  function clear(tagId) {
  document.getElementById(tagId).innerHTML = 
  document.getElementById(tagId).innerHTML;
  }
 </script> 
```

html输入控制代码是

```
 <div id="new">
  <input type="file" name="attach[]" id="attach" size="30"
  onchange="document.getElementById('moreUploadsLink').style.display = 'block';" />
  </div> 
```

问题是内容没有被清除，如果只是第一次清除，文件大小超过了，如果用户一次又一次地改变他的选择，内容不会被清除。某种逻辑错误可能是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:01:37.660

如果您的意思是清除 div 的内容，那么：

```
 myFile.addEventListener('change', function () {
 var size = this.files[0].size;
 if(size>10000000){
   showDialog('File exceeded maximum allowed limit of 10 Mb', 'File Size Exceeds');   
 }
 clear('new'); //place it out of if , if you want to clear everytime
});

function clear(tagId) {
  document.getElementById(tagId).innerHTML = "";
} 
```

你的意思是这样的吗。。

# objective-c - 在 ARC 中使用 @property

> ID：10027944
> 
> 赞同：1
> 
> 时间：2012-04-05T11:43:44.097
> 
> 标签：objective-c, properties, automatic-ref-counting, instance-variables

当我声明一个没有存储规范 + 实例变量的属性时，一切都很顺利：

```
@interface Foo : NSObject {
    NSSomething* mySomething;
}
@property (readonly) NSSomething* mySomething; 
```

然而，当我删除实例变量声明时，我收到一个编译错误，指出我必须指定存储类型：

```
@property (readonly, strong) NSSomething* mySomething; 
```

这让我想知道我是否应该声明强，但无论如何它应该是只读的。这里发生了什么？在哪种情况下我应该使用哪种方法？

**编辑（对于那些无法复制问题的人）：**

![在此处输入图像描述](../Images/afc03f452cc255aabee2110ad104235f.png) ![在此处输入图像描述](../Images/568d09c57a250d6ba61650197f8f14a5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:56:27.797

你说得对。如果您希望它是只读的，请确保将只读保留在其中。

但是，如果您希望为您合成 ivar，编译器需要知道是否将其设为强、弱或不安全未经训练。默认值是分配，它转换为不安全的未保留（这可能不是您想要的）。其他人报告说编译器会在没有警告的情况下正确处理默认值，但是由于您遇到问题，因此您需要在属性声明中保留属性。

或者，您可以像最初一样自己声明 ivar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:57:19.937

您应该指定强或弱，这取决于您是否愿意 yourSomething 在其他人停止引用它时消失。如果该属性基于实例变量，则该属性自动为强。

此外，独立于上述决定，您应该将属性设置为只读，如果您不希望它有一个设置器（因此没有人将能够设置 yourObject.yourSomthing=something）。这意味着（除非您在 .m 文件中私下将该属性重新声明为可读写），否则无法直接将 yourSomething 设置为任何内容。如果 getter 不依赖于变量而是通过其他方式计算返回值，这将很有用。

# registry - 如何关闭/刷新已删除的注册表子项以便可以读取它们？抛出非法操作错误

> ID：10027949
> 
> 赞同：0
> 
> 时间：2012-04-05T11:44:01.473
> 
> 标签：registry

我有一个需要删除子键树并读取条目的应用程序。树可能更改了值或添加了其他值，我需要重置为默认状态。当我使用 key.DeleteSubKeyTree() 删除子树时，一切正常，直到我尝试读取基本注册表设置。此时我收到非法操作错误（尝试对已标记为删除的注册表项进行非法操作）。

那么，如何关闭/刷新已删除的条目？看起来所有删除操作都按名称对子键/值进行操作，而不是引用，所以我不能直接关闭它。我正在关闭根密钥。

由于可能已经添加了值，我确实需要删除而不只是设置值，以便从注册表中清除添加的键（不在基本注册表中的键）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:27:26.930

经过更多的实验，我能够通过单独删除所有值然后删除子键来执行任务。这是一个递归例程：

```
 /// <summary>
     /// Deletes all the values and subkeys of a particular key.
     /// </summary>
     /// <param name="key"></param>
     private static void DeleteRegistrySubStructure(RegistryKey key)
     {
         // First, traverse the subkeys to delete the underlying values and subkeys.
         String[] subKeys = key.GetSubKeyNames();
         foreach (var subKeyName in subKeys)
         {
             RegistryKey subKey = key.OpenSubKey(subKeyName, true);
             DeleteRegistrySubStructure(subKey);
             subKey.Close();
             key.DeleteSubKey(subKeyName);
         }

         // At this point, all the subkeys (and their values) have been 
         // deleted.  So, delete the values for the key for final clean up. 
         string[] valueNames = key.GetValueNames();
         foreach (string name in valueNames)
         {                
             key.DeleteValue(name);
         }
     } 
```

# delphi - 多个 couninitialize 调用会导致应用程序崩溃吗？

> ID：10027954
> 
> 赞同：3
> 
> 时间：2012-04-05T11:44:32.110
> 
> 标签：delphi

我有一个应用程序，我在其中创建了一个线程，该线程必须在超时间隔内检查数据库中特定类型的数据。线程完全负责创建数据库连接、查询和关闭连接。我只调用一次 CoInitialize，在线程执行中，我重用了 Ado 连接和 Ado Query 以供后续使用。

现在我的问题是，我之前（可能是错误地）在循环中留下了 CoUnitialize 语句用于数据库数据检查。这意味着，对 CoUnitialize 的调用每次都完成。为什么应用程序没有崩溃？由于没有数据发布，CoUnitialize 应该失败了。我对此表示怀疑。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T12:54:31.327

`CoUninitialize`是一个 WinApi 函数，它不接受任何内容，也不返回任何内容。由于这些 WINAPI 函数从不抛出异常 (AFAIK)，因此您的应用程序不会因调用它们而崩溃。`CoUnitialize`当调用太多次时，只会默默地失败。

但是，当调用需要初始化 COM 的代码时，您的应用程序可能会在之后崩溃。您的应用程序不会崩溃可能意味着两件事：代码不需要`CoInitialize`，或者调用了其他地方`CoInitialize`，可能在您的 ADO 库中。

# android - 参加 Robotium 的另一个活动

> ID：10027956
> 
> 赞同：0
> 
> 时间：2012-04-05T11:44:36.867
> 
> 标签：android, ui-automation, robotium

我是 Robotium 和 Android 测试的新手，最近我测试了 iOS 应用程序。现在我正在测试 Android 应用程序，在第一个 Activity 中我输入了电子邮件和密码，所以当它完成后，我按下键盘上的 Enter 按钮，下一个 Activity 应该会出现。如何在我的测试中实现它？我在测试的开始就有这个：

```
 EditText etEnterEmail = (EditText) solo.getView(R.id.EditText01);
    solo.clearEditText(etEnterEmail);
    solo.enterText(etEnterEmail, "anna@gmail.com");

    EditText etEnterPassword = (EditText) solo.getView(R.id.editText2);
    solo.clearEditText(etEnterPassword);
    solo.enterText(etEnterPassword, "qwerty123"); 
```

如何按 Enter 按钮？当测试运行时，键盘甚至没有出现，字符串只是出现在 EditTexts 中。请帮帮我！我很绝望！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:46:13.363

你可以通过发送

```
solo.sendKey(Solo.ENTER); 
```

之后，您可以`Activity`通过断言检查您是否正在显示：

```
assertTrue(solo.waitForActivity(expectedClass.getSimpleName())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T10:03:00.777

如果键盘不显示，可以试试`solo.TypeText()`

tty 如果此代码适合您：

```
EditText etEnterEmail = (EditText) solo.getView(R.id.EditText01);
solo.clearEditText(etEnterEmail);
solo.TypeText(etEnterEmail, "anna@gmail.com");

EditText etEnterPassword = (EditText) solo.getView(R.id.editText2);
solo.clearEditText(etEnterPassword);
solo.TypeText(etEnterPassword, "qwerty123");
solo.senkey(solo.ENTER);
solo.assertCurrentActivity("check for activity", your_activity.class) //your_activity ex: MainActivity,... 
```

# logging - 定义观察者接口的抽象类

> ID：10027959
> 
> 赞同：0
> 
> 时间：2012-04-05T11:44:47.797
> 
> 标签：logging, observer-pattern

我正在为将接口定义为的抽象类阅读此代码：-

```
class Subject;
class Observer {
public:
virtual ~ Observer();
virtual void Update(Subject* theChangedSubject) = 0;//can someone tell what this method    
does
protected:
Observer();
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:55:20.997

该`Update()`功能实际上应该是`class Subject`也的一部分。
这必须在每次状态更改时调用。

`Subject`应该维护所有成员的列表并为所有成员`Observers`调用该`Update()`函数`Observers`。这通常是通过持有每个 的指针/引用`Observers`并调用每个`Update()`实现的单独功能来完成的`Observer`。

关于你关于这个`Update()`函数做什么的问题，它必须做它预期做的事情，如果发生状态变化。

# node.js - 快速 JS 安装

> ID：10027963
> 
> 赞同：1
> 
> 时间：2012-04-05T11:44:57.117
> 
> 标签：node.js, installation, express

我试图安装 expressjs。

我在这里不断收到此错误：

```
 node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: No such module
    at Object.<anonymous> (/usr/share/npm/lib/utils/output.js:8:21)
    at Module._compile (module.js:432:26)
    at Object..js (module.js:450:10)
    at Module.load (module.js:351:31)
    at Function._load (module.js:310:12)
    at Module.require (module.js:357:17)
    at require (module.js:368:17)
    at Object.<anonymous> (/usr/share/npm/lib/utils/log.js:21:14)
    at Module._compile (module.js:432:26)
    at Object..js (module.js:450:10) 
```

知道为什么会发生该错误。我安装了 npm 似乎没有任何问题。

这是我尝试用于安装 express js 的命令：

```
sudo npm install express -g 
```

我也尝试使用 expressjs[网站](http://expressjs.com/guide.html)上的指南。对不起这是我的错。dint 安装最新版本的nodejs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:34:36.093

如果您有较新版本的 Node.js 和较旧版本的 NPM，就会发生这种情况。听起来你刚刚更新了 Node.js，所以现在你需要更新 NPM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T05:05:30.413

您很可能以某种方式使用旧的 NPM 版本。

做

```
node --version
npm --version 
```

此外，Ubuntu 中有两个名称相似的软件包，`node`以及`nodejs`.

> Fedora 也遵循类似的包命名方案。因此，必须将 nodejs 中的二进制文件从原始节点重命名为 nodejs。但是，从技术上讲，这并不符合规定：大多数 nodejs 程序（以及使用 npm 安装的库）都假定 node 二进制文件是 node.js。如果你想解决这个问题，最简单的方法就是将两者符号链接在一起。如果您采用这条路线，请不要安装处理业余分组无线电内容的节点包。

```
sudo ln -s /usr/bin/nodejs /usr/local/bin/node 
```

或者，在 的情况下`node`，我建议使用`n`而不是安装链接。只需安装`npm`（将安装节点），然后删除`npm`，然后告诉 apt 清理它。为此，只需运行

```
sudo apt-get install npm
sudo npm install -g n
sudo n latest
sudo apt-get --purge remove npm
sudo apt-get autoremove 
```

还有其他二进制发行版管理器甚至可以使用 shell 脚本，`nvm`但我个人更喜欢`n`. 只考虑`n`一`apt`件事：它安装到的节点二进制文件`/usr/local/bin`。

# c# - Visual Studio 2010 设计器文件未更新

> ID：10027964
> 
> 赞同：2
> 
> 时间：2012-04-05T11:45:05.153
> 
> 标签：c#, asp.net, user-controls, web, designer

**请不要告诉我删除设计器文件并将页面转换为应用程序 - 我已经这样做了，但它没有用**

我有一个用户控件，我以编程方式添加了 2 个 ASP 超链接控件。我无法让控件出现在设计器文件中。

我尝试将它们手动添加到设计器文件中，但它们在构建时被删除。

我已经搜索过 SO 并看到了有关删除设计器文件并将 ASCX 页面转换为应用程序的解决方案，但这没有奏效。

因此，在构建时，项目错误，因为它的代码找不到我的控件。

```
<asp:HyperLink ID="hplSiteLink2" NavigateUrl='<%# GetSiteLink(Eval("SiteName"))%>' runat="server">VIEW SITE INFO</asp:HyperLink>

        protected void GetSiteLink(object SiteName) 
    {
        string sn = string.Empty;

        if (SiteName is string)
        {
            sn = SiteName.ToString();

            if (sn == "redlionnewquay")
            {
                hplSiteLink.NavigateUrl = "http://www.redlionnewquay.co.uk";
                hplSiteLink2.NavigateUrl = "http://www.redlionnewquay.co.uk";
            }
            else
            {
                hplSiteLink.NavigateUrl = "~/Venue/Home/" + Eval("SiteNameUrl");
                hplSiteLink2.NavigateUrl = "~/Venue/Home/" + Eval("SiteNameUrl");
            }   
        }          
    } 
```

如果您有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:56:06.883

对，我想我已经解决了。我被这个主题的其他主题设置在正确的轨道上，说明如果您的代码中有任何错误，它将不会生成设计器文件。

考虑到这一点，我一遍又一遍地查看了该过程，并意识到我在 if 语句中运行了 Eval - 这是垃圾，所以我将代码更改为：

```
 public string GetSiteLink(object SiteName)
    {
        string sn = string.Empty;
        string sHtml = string.Empty;

        if (SiteName is string)
        {
            sn = SiteName.ToString();

            if (sn == "redlionnewquay")
            {
                sHtml = "http://www.redlionnewquay.co.uk";
            }
            else
            {
                sHtml = "~/Venue/Home/" + SiteName;
            }
        }
        return sHtml;
    } 
```

解决了这个问题，虽然前面的代码编译没有错误并不明显，但我猜后面代码中的 Eval 是一个“软”错误。

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:55:24.030

有时，如果您删除并重新添加控件，但设计器没有更新，这可能是由于权限问题 - 您确定所有文件都是可写的，并且您有权限吗？

您是否有任何其他正常工作的用户控件？我见过扩展（ascx）由于某种原因失去它的关联的情况，所以 VS 不知道如何正确处理它。如果您切换视图，这有什么不同吗？项目中是否有可能发生名称冲突？

最后，如果没有其他方法，请尝试从项目中删除用户控件，关闭 Visual Studio，然后重新打开解决方案并尝试添加新的解决方案。

# json - MVC 3 尝试将 JSON 对象从视图发送到模型

> ID：10027967
> 
> 赞同：2
> 
> 时间：2012-04-05T11:45:10.043
> 
> 标签：json, asp.net-mvc-3, jquery

我目前正在尝试将我的视图中的 JSON 对象发布到 MVC 3 应用程序中的控制器，并且我期望来自请求的数据绑定到我的控制器操作的模型参数。但是，当我检查 HTTP POST 请求时，看起来数据是作为查询字符串传递的，我不确定为什么（这一切都很新）。

这是我的 POST 请求：

```
 $.ajax({
        type: 'POST',
        url: "Test/Add",
        data: { Name: name, Age: age },
        success: function (data) {
            console.log("success");
        },
        error: function (xhr, data, message) {
            console.log(data + ": " + message);
        },
        dataType: "json"
    }); 
```

这是我的控制器中的代码，然后是我尝试绑定到的模型的代码：

```
 [HttpPost]
    public ActionResult Add(PersonModel person)
    {
        System.Threading.Thread.Sleep(1000);

        return View();
    }

    // person model:
    public class Person {

        public string Name {get;set;}
        public int Age {get;set;}

    } 
```

这是提琴手的要求 - 我已经强调了我不确定的部分：

![在此处输入图像描述](../Images/92dd23cff2db5cfd4f8eeb5fdaad0a6e.png)

我认为内容类型将是“应用程序/json”，并且数据看起来不像查询字符串 - 我认为它看起来像这样：

```
{
    Name: "James",
    Age: 13
} 
```

最终的问题是，如果我在控制器操作中设置断点，我希望看到一个填充的 Person 对象，但它始终为空。如果我将签名替换为类似的东西，`(object name, object age)`那么我会得到参数的值（两者的字符串数组 - 所以 name 是一个字符串数组，其中 1 个元素等于“James”）。

有什么想法我哪里出错了吗？

哦，仅供参考，我实际上不是 13 岁！这些是我捣碎的第一个数字。

谢谢！

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:31:51.700

@David 是正确的，因为您需要将 contentType 设置为“application/json”。但是您还需要发送 JSON。您正在发送一个对象。要将其转换为 JSON，请使用 JSON.stringify。我尝试将其作为具有此 contentType 设置的对象发送并收到服务器错误。我实际上在不设置 contentType 的情况下让它正常工作。即使请求是“Name=James&Age=13”，MVC 也能够将其转换为对象。我修改了您的测试以将结果回显为 JSON 并显示它们。

这是修改后的控制器

```
 [HttpPost]
    public string Add(PersonModel person)
    {
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        string result = serializer.Serialize(person);

        return result;
    }

    // person model:
    public class PersonModel
    {

        public string Name { get; set; }
        public int Age { get; set; }

    } 
```

修改后的 Javascript 和 HTML 如下所示：

```
<input id="doAjax" type="button"  value="Send Json..."/>
<br />
Results:<br />
<textarea id="results" cols="30" rows="3"></textarea>
<script type="text/javascript">

 $( document ).ready( function () {
    $( "#doAjax" ).click( sendJson );
} );

function sendJson() {
    var name = "James";
    var age = "13";
    var person = { Name: name, Age: age };
    var personJson = JSON.stringify( person );
    $.ajax( {
        type: 'POST',
        url: "Test/Add",
        data: personJson,
        contentType: 'application/json',
        success: function ( data ) {
            var jsonStr = JSON.stringify( data );
            $( "#results" ).val( jsonStr );
        },
        error: function ( xhr, data, message ) {
            var jsonStr = JSON.stringify( data );
            $( "#results" ).val( jsonStr + ": " + message );
        },
        dataType: "json"
    } );
} 
```

以下是一些测试的结果：

数据=人；contentType = 未设置；请求=“姓名=詹姆斯&年龄=13”；响应 = "{"姓名":"詹姆斯","年龄":13}"

数据=人Json；contentType = 未设置；请求 = "{"姓名":"詹姆斯","年龄":"13"}"; 响应 = "{"姓名":null,"年龄":0}"

数据=人；contentType = '应用程序/json'; 请求=“姓名=詹姆斯&年龄=13”；response = "System.ArgumentException: 无效的 JSON 原语：名称"

数据=人Json；contentType = '应用程序/json'; 请求 = "{"姓名":"詹姆斯","年龄":"13"}"; 响应 = "{"姓名":"詹姆斯","年龄":"13"}"

请注意，如果未设置 contentType，则默认为 'application/x-www-form-urlencoded'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:08:19.053

`dataType`传递给的`$.ajax`是预期的响应类型。您需要添加`contentType`以指定有效负载类型。

```
$.ajax({
    type: 'POST',
    url: "Test/Add",
    data: { Name: name, Age: age },
    contentType: 'application/json' //*********
    success: function (data) {
        console.log("success");
    },
    error: function (xhr, data, message) {
        console.log(data + ": " + message);
    },
    dataType: "json"
}); 
```

[这是 jQuery 文档](http://api.jquery.com/jQuery.ajax/)，`.ajax()`它表明默认的 contentType 是 'application/x-www-form-urlencoded'

# php - 获取当前登录的 TYPO3 用户（fe-user）

> ID：10027970
> 
> 赞同：6
> 
> 时间：2012-04-05T11:45:18.710
> 
> 标签：php, html, typo3

我通常不是在论坛上发帖的人，因为我总是能够在不打扰任何人的情况下找到一些东西。无论如何，这一次我没有运气。

我为我的网站编写了一个 DB-Communications-System，您可以在其中通过 Java 应用程序、Android 应用程序和网站本身为家人留言。在这个网站上，您通过 fe_user 登录掩码登录，然后您可以访问表单。在这里，我有一个下拉选择“From”和一个下拉选择“For”，其中有可供选择的家庭名称。我想要的是让页面读取当前登录的用户并根据该用户自动设置“发件人”变量。

在我发现的许多页面上

```
$GLOBALS['TSFE']->fe_user->user 
```

和它的手风琴变奏曲，但无论我如何试图从中得到一些东西，

`strleng()`始终为 0，
`print_r($_GLOBALS['TSFE'])`始终为空
，整个 Array 也为空。
我究竟做错了什么？在访问这些变量之前我必须做些什么吗？同样在某些情况下，它不识别这个对象，而不是解释变量，它只是说

```
"->fe_user->user" 
```

在网站上。

非常感谢你

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-23T09:41:54.260

> print_r($_GLOBALS['TSFE']) 始终为空

你应该尝试`$GLOBALS['TSFE']`而*不是* `$_GLOBALS['TSFE']`

所以`$GLOBALS['TSFE']->fe_user->user`检查登录用户是绝对正确的

* * *

附录 2019-08-15：根据您要达到的目标或您正在寻找的确切信息以及您使用的 TYPO3 版本，有不同的方法可以使用此变量。

例如，要确保当前用户通过您的 TYPO3 进行身份验证，您可以通过以下方式检索他的 ID

```
$GLOBALS['TSFE']->fe_user->user['uid']; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-30T09:10:54.767

如果您需要从 TypoScript 登录用户（并且可能替换标记），则此 TS 片段可能很有用：

```
page.10.marks.UNAME = TEXT
page.10.marks.UNAME.data = TSFE:fe_user|user|username 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-18T04:55:20.547

这将返回当前登录用户的 id

```
$GLOBALS['TSFE']->fe_user->user['uid']; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T13:39:26.050

安装扩展[kickstarter](http://typo3.org/extensions/repository/view/kickstarter)并为您自己创建一个前端插件。您将获得一个简单的表单示例。在那里您可以使用 $GLOBALS['TSFE'] 等（检查“默认情况下插件生成为可缓存的 USER cObjects。选中此复选框以生成未缓存的 USER_INT cObject。”同时创建您的前端插件！）

这是开始扩展的老式方法，但我想在你的情况下是解决问题的最快和最简单的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-29T08:35:42.610

@Halest 还有 sql 注入漏洞

```
 $ergebnis = mysql_query("select ses_userid from fe_sessions WHERE ses_id='$SessionID'"); 
```

顺便说一句，永远不要相信 cookie。它们可以被修改甚至关闭。尝试使用更多的 $GLOBALS['DB'] 与数据库进行交互。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-07T13:05:52.067

```
$GLOBALS['TSFE']->fe_user->user
```

这将返回 fe_user 表的所有数据。你可以得到任何你想要的价值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-16T16:22:09.970

如果您需要 t3 中的登录用户：

```
$user=null;

if($GLOBALS['TSFE']->loginUser){
 $user=$GLOBALS['TSFE']->fe_user->user;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-10T10:15:13.930

您可以使用扩展[powermail](http://typo3.org/extensions/repository/view/powermail)创建表单并将数据保存到数据库表（afaik，该表需要至少具有字段 uid 和 pid）。

# android - 将焦点移至 android 中的 MenuItem

> ID：10027974
> 
> 赞同：3
> 
> 时间：2012-04-05T11:45:28.820
> 
> 标签：android

我只想将 setFocusable false 设置为菜单中的一个 MenuItem。这意味着我不应该为 MenuItem 获得默认的浅蓝色。你能帮忙吗？

# asp.net - 具有类名 tn_result 的表的正则表达式

> ID：10027976
> 
> 赞同：0
> 
> 时间：2012-04-05T11:45:38.473
> 
> 标签：asp.net, regex

具有类名的表的正则表达式是`tn_result`什么？

我尝试了下面给出的两个表达式，但都没有工作。他们怎么了？我怎样才能使这项工作？

```
 string TableExpression = "<TTable class=\"tn_results\">(.*?)</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:04:43.193

请参阅[此答案](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)，了解为什么这是一个坏主意。

答案取决于您是否需要在服务器端或客户端获取此表。

在客户端，使用 jQuery：

```
var table = $('table.tn_result'); 
```

在客户端上，如果您使用的是 ASP.Net WebForms，那么在您想要获取的表上添加`runat="server"`和属性可能是最容易的。`id`然后，您可以像任何其他控件一样将它们放入代码隐藏中：

```
var table = this.TableId; //not really required, but hopefully makes things clear
if(table.Attributes["class"].Contains("tn_result"))
{
    // do something with the table
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:20:05.070

对于抓取 HTML，请使用[Html Agility Pack](http://html-agility-pack.net/)。它非常灵活，让您可以像处理格式良好的 XML 一样操作格式不正确的 HTML，因此您可以使用 XPATH 或只遍历节点。

# git - Git - 在我的开发目录中有一些文件不会上传到 git 存储库

> ID：10027988
> 
> 赞同：0
> 
> 时间：2012-04-05T11:46:49.470
> 
> 标签：git

> **可能重复：**
> [如何让 git 忽略目录的所有内容？](https://stackoverflow.com/questions/482309/how-do-you-get-git-to-ignore-all-contents-of-a-directory)

如何指定永远不会添加的目录？

或其他目录总是被添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:36:26.373

忽略所有目录的方法是使用`.gitignore file`模式：
在您的存储库中创建一个 .gitignore
**Ex:-**

```
if you have a directory name Test 
```

所以只需在文件中添加这个文件 `.gitignore`夹

```
Test/ 
```

更多检查[这个](http://help.github.com/ignore-files/)

# crystal-reports - 在特定部分显示页眉 - Crystal Report

> ID：10027990
> 
> 赞同：1
> 
> 时间：2012-04-05T11:47:03.590
> 
> 标签：crystal-reports, reporting

我有一个类似于此的报告结构

```
Report Header
    --Cross Tab
Page Header
   --Header
Group Header1
   --Cross Tab
Group Header2
   --Details 
```

我试图仅在**Group2**开始的页面中显示页眉。我只在第一页跳过了页眉。

水晶报表里可以吗？？

谢谢

**编辑**

这就是报告目前的样子

![在此处输入图像描述](../Images/619746e6ebf2b36ff0fef9e43c89ec02.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:37:01.023

这只是我的直觉，但我认为如果不对报告进行一些其他修改，这是不可能的。Crystal 直到最后一次才确定部分的位置，这也是您可以强制公式评估的最新版本，但是报告标题抑制公式将在 GH2 中的任何公式*之前进行评估。*换句话说，只要您在页面上打印了可变大小的部分，Crystal 就无法在页眉打印期间知道 GH2 是否会出现在该页面上。

我能想到的唯一解决方案是为任何可能的页面布局抢先处理它。例如，一种方法是将 GH2 设置为始终从新页面开始（通过“New Page Before”），并选择性地抑制介于 GH1 和 GH2 之间的任何页眉（通过设置为“whileprintingrecords”的布尔变量）在 GH1 中，在 GH2 中未设置）。不过，可能还有其他更清洁的方法可以做到这一点。

编辑：这样做的动机是什么（页面布局细节会有所帮助）？可能有一种不涉及解决这个确切问题的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-23T21:45:41.923

我需要做一些类似的事情，但要让 Crystal 做我想做的事需要花些功夫。

我的基本挑战是在报告的每个“部分”的开头显示一个“大”页眉，然后切换到所有其他页面的单行页眉。

PHa 具有大标题。在 Section Expert 中，点击条件 Suppress，添加以下代码：

```
Shared numbervar big_header;
big_header = 0; //suppress if big_header is off 
```

PHb 具有单行标题。在 Section Expert 中，点击条件 Suppress，添加以下代码：

```
Shared numbervar big_header;
big_header = 1; //suppress if big_header is on 
```

对于每个报告部分，创建一对公式（您不能重复使用它们，您必须为每个公式创建一对），一个将 big_header 设置为 1，一个将其设置回 0。

```
shared numbervar big_header;
big_header := 1; //turn on big_header

shared numbervar big_header;
big_header := 0; //turn off big_header 
```

将打开 big_header 的那个放在其他空白的详细信息部分（或组 - 应该可以工作，尚未测试），格式化要抑制的公式，如果它不是第一个，则格式化该部分以在之前有一个新页面在报告（分页选项卡）上并抑制空白部分。

在下一个详细信息（组）部分（应在报告上显示内容）中，放置关闭 big_header 的公式。再次，格式化要抑制的公式。

根据需要重复。（我的“打开 big_header”公式还设置了一个用于公共页脚的字符串。）

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:28:47.917

如果您*只*需要抑制第一页上的页眉部分，请将此文本添加到页眉的条件抑制公式中：

```
PageNumber=1 
```

# mysql - 如何将变量值传递给mysql中全文语句的存储过程？

> ID：10027995
> 
> 赞同：0
> 
> 时间：2012-04-05T11:47:16.923
> 
> 标签：mysql, stored-procedures, full-text-search

我完全坚持这个：

```
SET @req='sometingToFind'
SELECT COUNT(id) FROM mytable WHERE MATCH(descr) AGAINST(@req IN BOOLEAN MODE); 
```

这很好用，但是当我对存储过程执行同样的操作时，声明如下：

```
CREATE PROCEDURE `search_proc`(tn VARCHAR(32), r VARCHAR(60))
BEGIN
SELECT COUNT(id) FROM tn WHERE MATCH(descr) AGAINST(r IN BOOLEAN MODE);
END 
```

并运行它：

```
SET @req='sometingToFind'
CALL search_proc('mytable','@req'); 
```

我有一个错误导致误解引号。

```
> ERROR 1146 (42S02): Table 'mybase.tn' doesn't exist 
```

我尝试了各种替代方法，在存储过程和其他方法中将 r 替换**为**' **r'**，但所有这些都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:52:50.980

如果 ypu 想要将标识符名称传递给过程并在查询中使用它们，那么您应该将查询构建为字符串，然后使用准备好的语句执行它。

[准备好的语句的 SQL 语法](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:58:19.200

动态表名问题又来了。我个人不喜欢也不赞成在过程中使用动态表名，所以我的建议是：**不要这样做**。

现在谈谈如何做到这一点：您必须在存储过程中创建一个准备好的语句，然后执行它。这就是你如何防止你的表名被引用，因此被错误地解释。

```
CREATE PROCEDURE `search_proc`(tn VARCHAR(32), r VARCHAR(60))
BEGIN

SET @dynamic_sql = CONCAT('SELECT COUNT(id) FROM ', tn, ' WHERE MATCH(descr) AGAINST(? IN BOOLEAN MODE);');
SET @match_against = r;

PREPARE stmt FROM @dynamic_sql;
EXECUTE stmt USING @match_against;
DEALLOCATE PREPARE stmt;

END 
```

# postgresql - Postgres全文索引

> ID：10027996
> 
> 赞同：20
> 
> 时间：2012-04-05T11:47:21.617
> 
> 标签：postgresql, indexing

```
CREATE INDEX message_fulltext_idx ON feedback USING gin(to_tsvector(message)); 
```

```
错误：索引谓词中的函数必须标记为 IMMUTABLE 

```

如何避免这种情况？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-05T12:40:20.120

You need to include the optional config parameter. Without it, the function is not immutable. For example, if you want the standard English text parsing:

```
CREATE INDEX message_fulltext_idx ON feedback
  USING gin(to_tsvector('english', message)); 
```