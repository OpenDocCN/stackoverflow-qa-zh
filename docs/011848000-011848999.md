# StackOverflow 问答 11848000-11848999

# c# - 带有路径和完整程序集名称的 Assembly.LoadFrom

> ID：11848005
> 
> 赞同：8
> 
> 时间：2012-08-07T14:17:57.990
> 
> 标签：c#, .net

我正在尝试基于`Environment.Is64BitProcess`.
这基本上是这样工作的：

*   [为事件](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)注册一个事件处理程序[`AppDomain.AssemblyResolve`](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)
*   在事件处理程序中，从依赖于 CPU 类型的子路径加载程序集：

    ```
    private Assembly OnAssemblyResolve(object sender, ResolveEventArgs args)
    {
        // args.Name is the display name of an assembly, e.g.:
        // MyAssembly, Version=5.0.0.0, Culture=neutral, PublicKeyToken=abcdefghijklmn
        if(!args.Name.Contains("MyAssembly"))
            return null;

        var path = Path.Combine(GetCpuTypeDependentPath(), "MyAssembly.dll");
        return Assembly.LoadFrom(path);
    } 
    ```

现在，这有一个问题，它不检查已加载程序集的版本、publicKeyToken 等。
我现在想做的是调用`Assembly.Load`并简单地提供额外的探测路径。我知道这不起作用，因为没有这样的过载。还有其他方法可以实现我的目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:08:15.413

只需将您找到的程序集的属性与请求的程序集进行比较。例如，版本检查可能如下所示：

```
private static Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args) {
    var name = new AssemblyName(args.Name);
    string path = System.IO.Path.Combine(IntPtr.Size == 8 ? "x64" : "x86", name.Name + ".dll");
    path = System.IO.Path.Combine(System.IO.Path.GetDirectoryName(Assembly.GetEntryAssembly().Location), path);
    var asm = Assembly.LoadFrom(path);
    var found = new AssemblyName(asm.FullName);
    if (name.Version != found.Version) throw new System.IO.FileNotFoundException(name.FullName);
    return asm;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:43:56.813

没有自己探测程序集，我看不出你能做到这一点。您只需要启动另一个 AppDomain 来搜索匹配的程序集，这样您就可以卸载在探测期间加载的程序集。很遗憾

# php - Mysql Search Shorting 基于 Match Relevancy with Like

> ID：11848007
> 
> 赞同：2
> 
> 时间：2012-08-07T14:18:02.477
> 
> 标签：php, mysql, innodb

我有一张要从中搜索的表格。该表在 InnoDB 中。我曾经用于 `LIKE '%$keyword%'`搜索，但我想根据匹配的相关性来缩短它们。

喜欢关键字“xyz”

结果应显示为

```
(1) xyz abc
(2) abc xyz 
```

目前它按字母顺序显示。有什么方法可以根据相关性缩短它们吗？

我还使用 Myisam 中的其他表进行了 Mysql 全文搜索，但这也不适用于像“an”这样的小关键字，它需要大约 3 到 5 的关键字长度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:22:58.847

添加一个`order by`

```
order by instr(column_name, 'keyword') 
```

这将根据关键字在文本中的位置对记录进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:23:46.570

在您的搜索功能中，我会排除任何搜索词，例如“an”、“a”、“the”以及大量其他被称为[停用词](http://dev.mysql.com/doc/refman/5.0/en/fulltext-stopwords.html)并自动从 mysql 全文搜索中排除的词。

您可以使用这样的函数包含您自己的额外单词（对不起，提前 HUGE 行，这是我在网上找到的列表）：

```
function removeCommonWords($input)
{

    // EEEEEEK Stop words
    $commonWords = array('a','able','about','above','abroad','according','accordingly','across','actually','adj','after','afterwards','again','against','ago','ahead','ain\'t','all','allow','allows','almost','alone','along','alongside','already','also','although','always','am','amid','amidst','among','amongst','an','and','another','any','anybody','anyhow','anyone','anything','anyway','anyways','anywhere','apart','appear','appreciate','appropriate','are','aren\'t','around','as','a\'s','aside','ask','asking','associated','at','available','away','awfully','b','back','backward','backwards','be','became','because','become','becomes','becoming','been','before','beforehand','begin','behind','being','believe','below','beside','besides','best','better','between','beyond','both','brief','but','by','c','came','can','cannot','cant','can\'t','caption','cause','causes','certain','certainly','changes','clearly','c\'mon','co','co.','com','come','comes','concerning','consequently','consider','considering','contain','containing','contains','corresponding','could','couldn\'t','course','c\'s','currently','d','dare','daren\'t','definitely','described','despite','did','didn\'t','different','directly','do','does','doesn\'t','doing','done','don\'t','down','downwards','during','e','each','edu','eg','eight','eighty','either','else','elsewhere','end','ending','enough','entirely','especially','et','etc','even','ever','evermore','every','everybody','everyone','everything','everywhere','ex','exactly','example','except','f','fairly','far','farther','few','fewer','fifth','first','five','followed','following','follows','for','forever','former','formerly','forth','forward','found','four','from','further','furthermore','g','get','gets','getting','given','gives','go','goes','going','gone','got','gotten','greetings','h','had','hadn\'t','half','happens','hardly','has','hasn\'t','have','haven\'t','having','he','he\'d','he\'ll','hello','help','hence','her','here','hereafter','hereby','herein','here\'s','hereupon','hers','herself','he\'s','hi','him','himself','his','hither','hopefully','how','howbeit','however','hundred','i','i\'d','ie','if','ignored','i\'ll','i\'m','immediate','in','inasmuch','inc','inc.','indeed','indicate','indicated','indicates','inner','inside','insofar','instead','into','inward','is','isn\'t','it','it\'d','it\'ll','its','it\'s','itself','i\'ve','j','just','k','keep','keeps','kept','know','known','knows','l','last','lately','later','latter','latterly','least','less','lest','let','let\'s','like','liked','likely','likewise','little','look','looking','looks','low','lower','ltd','m','made','mainly','make','makes','many','may','maybe','mayn\'t','me','mean','meantime','meanwhile','merely','might','mightn\'t','mine','minus','miss','more','moreover','most','mostly','mr','mrs','much','must','mustn\'t','my','myself','n','name','namely','nd','near','nearly','necessary','need','needn\'t','needs','neither','never','neverf','neverless','nevertheless','new','next','nine','ninety','no','nobody','non','none','nonetheless','noone','no-one','nor','normally','not','nothing','notwithstanding','novel','now','nowhere','o','obviously','of','off','often','oh','ok','okay','old','on','once','one','ones','one\'s','only','onto','opposite','or','other','others','otherwise','ought','oughtn\'t','our','ours','ourselves','out','outside','over','overall','own','p','particular','particularly','past','per','perhaps','placed','please','plus','possible','presumably','probably','provided','provides','q','que','quite','qv','r','rather','rd','re','really','reasonably','recent','recently','regarding','regardless','regards','relatively','respectively','right','round','s','said','same','saw','say','saying','says','second','secondly','see','seeing','seem','seemed','seeming','seems','seen','self','selves','sensible','sent','serious','seriously','seven','several','shall','shan\'t','she','she\'d','she\'ll','she\'s','should','shouldn\'t','since','six','so','some','somebody','someday','somehow','someone','something','sometime','sometimes','somewhat','somewhere','soon','sorry','specified','specify','specifying','still','sub','such','sup','sure','t','take','taken','taking','tell','tends','th','than','thank','thanks','thanx','that','that\'ll','thats','that\'s','that\'ve','the','their','theirs','them','themselves','then','thence','there','thereafter','thereby','there\'d','therefore','therein','there\'ll','there\'re','theres','there\'s','thereupon','there\'ve','these','they','they\'d','they\'ll','they\'re','they\'ve','thing','things','think','third','thirty','this','thorough','thoroughly','those','though','three','through','throughout','thru','thus','till','to','together','too','took','toward','towards','tried','tries','truly','try','trying','t\'s','twice','two','u','un','under','underneath','undoing','unfortunately','unless','unlike','unlikely','until','unto','up','upon','upwards','us','use','used','useful','uses','using','usually','v','value','various','versus','very','via','viz','vs','w','want','wants','was','wasn\'t','way','we','we\'d','welcome','well','we\'ll','went','were','we\'re','weren\'t','we\'ve','what','whatever','what\'ll','what\'s','what\'ve','when','whence','whenever','where','whereafter','whereas','whereby','wherein','where\'s','whereupon','wherever','whether','which','whichever','while','whilst','whither','who','who\'d','whoever','whole','who\'ll','whom','whomever','who\'s','whose','why','will','willing','wish','with','within','without','wonder','won\'t','would','wouldn\'t','x','y','yes','yet','you','you\'d','you\'ll','your','you\'re','yours','yourself','yourselves','you\'ve','z','zero');

    return preg_replace('/\b('.implode('|',$commonWords).')\b/','',$input);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:26:52.210

阅读全文索引/搜索：[http ://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

创建要执行搜索的字段的全文索引：

```
ALTER TABLE mytable ADD FULLTEXT INDEX (myfield); 
```

现在您可以执行搜索：

```
SELECT *, MATCH(myfield) AGAINST ('xyz') AS likeliness FROM mytable ORDER BY likeliness; 
```

# php - PHP 或 cURL：哪个 POST 更快？

> ID：11848009
> 
> 赞同：0
> 
> 时间：2012-08-07T14:18:23.883
> 
> 标签：php, post, curl

[我最近在PHP 的 HTTP POST](http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/)上遇到了这个天才的代码，没有 cURL ，我想知道是`POST`使用PHP`cURL`还是`fopen()`由 PHP 提供。如果一个更快，为什么？如果它们都很慢，我该如何加快它们的速度？如果我用另一个 POST 调用 POST 页面，而不是加载页面，它会因为没有浏览器处理而加载得更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:21:12.193

cURL 运行速度更快，因为它缺少 HTTP 请求设置的偶尔要求。

此外，出于安全原因，建议您不要使用`fopen()`此功能（许多人`allow_url_fopen`在他们的 php.ini 文件中禁用）。

享受和好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:21:56.133

不是真正的天才......这是cURL之前的老式方式。两种方法都有效。

这两种方法都通过互联网/网络进行，因此通常都受到延迟的支配......但是 cURL 应该稍微快一些并且是首选机制。

# java - Android如何构造类似这样的字节数组

> ID：11848011
> 
> 赞同：0
> 
> 时间：2012-08-07T14:18:27.910
> 
> 标签：java, android, bytearray

我需要一些关于如何在 Java / Android 中做某事的解释。我需要构造一个字节数组/数据包，以便我可以通过 http 请求发送它。我需要它看起来像这样：

```
- 3 bytes reserved (zero padded)
- 1 byte - Operation Group
- 1 byte - Packet type
- the rest depends on the above 
```

但我不知道我怎么能这样构造`byte[]`。

这是我尝试过的：

```
 String padding = "0000000000"; // first part of packet
        String group = "0xA"; // second part of packet
        String type = "02"; // third part of packet
        String content = "ThisIsATestStringWhichYouWillReadButItsADumbAssStringDudeSorryForYou"; // last part of packet

        String wholePacket = padding.concat(group.concat(type.concat(content)));
        Log.v("","wholePacket : "+wholePacket);

        byte[] bytes = EncodingUtils.getBytes(wholePacket, "UTF-8"); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:44:20.073

您只需要创建一个`byte[]`大小为`sizeof(rest)`+ 3 + 1 + 1 的 a：

```
byte[] payload = new byte[] { 0xCA, 0xFE }; // use whatever you need to get your payload into bytes

byte[] buf = new byte[3 + 1 + 1 + payload.length];
// new arrays are automatically initialized with 0, so you don't need to set bytes 0-2 to 0x00
buf[3] = 0x0A; // group
buf[4] = 4; // type

// copy payload into the target
System.arraycopy(payload, 0, buf, 3 + 1 + 1, payload.length); 
```

但是，我建议您使用 Stream 而不是 byte[] 因为无论如何您都需要通过 HTTP 连接（这已经是一个流）发送它：

```
byte[] payload = new byte[] { 0xCA, 0xFE };
OutputStream target = ... // get the output stream of you http connection.
byte group = 0x0a;
byte type = 4;
target.write(new byte[] { 0x00, 0x00, 0x00, group, type }, 0, 5);
target.write(payload);
target.flush(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:28:26.837

使用您提供的信息就这么简单。

```
byte[] info = new byte[] {0,0,0, 
                          1 /* Operation Group */,
                          3 /* Packet type */, 
                          "the rest"}; 
```

或者

```
byte[] info = new byte[length]; 
info[0] = 0;
info[1] = 0;
info[2] = 0;
info[3] = 4; // Operation Group
info[4] = 9; // Packet type

for(int i =5; i < info.length; i++) {
   info[i] = x; //value
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:50:04.777

看起来你在正确的轨道上。由于最后一部分的长度可能不同，因此将其构建为字符串然后将该字符串转换为字节会更容易。在从 String 转换为字节数组时以及稍后（可能想要）将字节数组转换回 String 时，请注意使用相同的编码：

```
 byte[] byteArray;

    byte[] firstPart = new byte[]{0,0,0};
    byte secondPart = 0; //whatever your Operation Group value is
    byte thirdPart = 0; //whatever your Packet type is value is

    String lastParrtString = "blaBLAbla";
    final String encoding = "UTF8"; //establish an encoding for the string representing the last part

    byte[] lastPart = lastParrtString.getBytes(encoding);

    int byteArrayLength = firstPart.length + 1 + 1 +  lastPart.length;              
    byteArray = new byte[byteArrayLength];

    int pos = 0;
    for(/*initialized above*/;pos < firstPart.length; pos++) {
        byteArray[pos] = firstPart[pos];
    }
    byteArray[++pos] = secondPart;
    byteArray[++pos] = thirdPart;

    int tempPos = 0;
    for( ;pos < byteArray.length; pos++) {
        byteArray[pos] = lastPart[tempPos++];
    }

    System.out.println(Arrays.toString(byteArray));
    System.out.println(Arrays.toString(lastPart)); 
```

# git - 如何知道我在 GIT 不同分支中的文件？

> ID：11848015
> 
> 赞同：2
> 
> 时间：2012-08-07T14:18:40.827
> 
> 标签：git, file, branch

假设我有 2 个分支。

在 branchA 我有文件 A 和 B

在分支B中，我删除了文件B并添加了文件C，我终于有了A和C

我可以使用哪个命令来知道我已经删除了 B 并创建了 C？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:06:30.697

```
git diff --name-status branchA branchB 
```

这将列出添加、删除、重命名或修改的文件以及显示文件是否已添加、删除、重命名或修改的单字母代码。它应该显示如下：

```
D        dir1/B
A        dir2/C 
```

其中 D 表示删除，A 表示添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:34:09.147

要查看每个提交的简短统计信息，您可以使用：

```
git log --stat -2 
```

更改要显示的提交数的数字。在这种情况下，它将显示最后两次提交。不要忘记结帐到您要首先检查的分支。

# erlang - Erlang位语法理解

> ID：11848017
> 
> 赞同：2
> 
> 时间：2012-08-07T14:18:59.483
> 
> 标签：erlang, bit-manipulation

我很难理解为什么实际上需要“单位大小”块。

我可以打字：

```
1> << Y:4/integer-unit:8 >> = << 1,2,3,4 >>.
<<1,2,3,4>>
2> Y.                                       
16909060 
```

但是我可以在不指定单位大小的情况下得到相同的结果：

```
3> << X:32/integer >> = << 1,2,3,4 >>.      
<<1,2,3,4>>
4> X.
16909060 
```

所以，请给我建议一些情况，什么时候我可以从使用“单位大小”块中获得真正的好处。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:31:25.117

我发现了需要“单位大小”块时的情况：

**如果您需要从下一个块的比特流大小中读取，并匹配它**

这个例子应该说明问题：

```
1> << Length, Value:(Length*8)/integer >> = << 2, 256:16 >>.   
* 2: illegal bit size 
```

但是你可以简单地做到这一点，使用“单位大小”块：

```
2> << Length, Value:Length/integer-unit:8 >> = << 2, 256:16 >>.
<<2,1,0>>
3> Value.
256 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:00:49.383

程序员很少使用单位大小。它在内部使用，因为`/binary`默认情况下具有 8 位的单位大小。这通常是您要为二进制部分挑选的内容。通常情况是，对于整数，您希望以位为单位指定大小，但您希望以 8 位字节为单位指定二进制文件。

但是，在某些情况下，您可能希望以不同的方式捕捉事实，因此存在单位类型说明符来解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T00:17:48.003

我不明白。

您当然可以读取二进制文件的第一个字节以获得下一个值的长度：

```
1> X = <<16, 256:16>>.
<<16,1,0>>

2> <<Length, Value:Length>> = X.
<<16,1,0>>

3> Length.
16

4> Value.
256 
```

并且 (2*8) 是合法的大小：

```
5> f(). 
ok

6> X = <<2, 256:16>>.
<<2,1,0>>

7> <<Length, Value:(2*8)>> = X.
<<2,1,0>>

8> Length.
2

9> Value.
256 
```

那么为什么当 Length=2 时 Size of Length*8 会失败呢？

```
10> f(Length).
ok

11> f(Value).
ok

12> <<Length, Value:(Length*8)>> = X.
* 1: illegal bit size 
```

# memory-leaks - “Xpressive泄漏”已修复，但不理解

> ID：11848020
> 
> 赞同：0
> 
> 时间：2012-08-07T14:19:07.530
> 
> 标签：memory-leaks, xpressive

我知道。Xpressive 在这里（可能）没有错，但我付出了很多努力来寻找内存泄漏，我不得不调整代码布局以修复出血。

有人可以向我解释为什么布局的变化修复了它吗？我不明白为什么（正确/改进）使用“static const”可以修复泄漏。

顺便说一句，泄漏发生在 MIP 内核上，使用 boost 版本 1.49，并与 GCC 4.3.3 交叉编译。

原始“筛子”代码：

```
// source.cpp
#include <boost/...

cregex token = keep(+set[ alnum|'!'|'%'|'_'|'*'|'+'|'.'|'\''|'`'|'~'|'-']);
cregex more  = ...

bool foo(const char * begin, const char * end, size_t& length, std::string& dest)
{
    mark_tag name_t(1);
    cregex regx = bos >>
        icase("name:") >>
        (name_t= token) >> eos;

    cmatch what;
    bool ok = regex_search( begin, end, what, regx );
    ...
    return ok;
} 
```

修复了“无泄漏”代码：

```
// header.hpp
#include <boost/...

class Xpr {
public:
    static const cregex token;
    static const cregex more;
};

// source.cpp
#include "header.hpp"

const cregex Xpr::token = keep(+set[ alnum|'!'|'%'|'_'|'*'|'+'|'.'|'\''|'`'|'~'|'-']);
const cregex Xpr::more  = ...

bool foo(const char * begin, const char * end, size_t& length, std::string& dest)
{
    mark_tag name_t(1);
    static const cregex regx = bos >>
        icase("name:") >>
        (name_t= Xpr::token) >> eos;

    cmatch what;
    bool ok = regex_search( begin, end, what, regx );
    ...
    return ok;
} 
```

每次调用 foo! 时似乎都会发生泄漏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:14:11.963

**编辑：**写完以下回复后，我试图重现您的问题但无法重现。这是我正在使用的代码。

```
#include <boost/xpressive/xpressive.hpp>
using namespace boost;
using namespace xpressive;

cregex token = keep(+set[ alnum|'!'|'%'|'_'|'*'|'+'|'.'|'\''|'`'|'~'|'-']);
//cregex more  = ...

bool foo(const char * begin, const char * end)
{
    mark_tag name_t(1);
    cregex regx = bos >>
        icase("name:") >>
        (name_t= token) >> eos;

    cmatch what;
    bool ok = regex_search( begin, end, what, regx );
    //...
    return ok;
}

int main()
{
    char const buf[] = "name:value";
    while(true)
        foo(buf, buf + sizeof(buf) - 1);
} 
```

此代码不会泄漏。您是否有可能使用的是早期版本的 xpressive？您能否发布一个完整的、独立的示例以便我进行调查？更好的是，提交一个错误并将代码附加到那里。谢谢，

埃里克

-----开始原始响应-----

我怀疑您与 xpressive 的[循环跟踪代码](http://www.boost.org/doc/libs/1_50_0/doc/html/xpressive/appendices.html#boost_xpressive.appendices.appendix_5__implementation_notes.cycle_collection_with___tracking_ptr___)有冲突。有关在函数局部对象中嵌套全局正则表达式对象的警告，请参见[此处。](http://www.boost.org/doc/libs/1_50_0/doc/html/xpressive/user_s_guide.html#boost_xpressive.user_s_guide.tips_n_tricks.create_grammars_on_a_single_thread)我认为发生的事情是，为了防止悬空引用，函数本地`regx`必须持有对 的引用`token`，并且`token`必须持有对 的（弱）引用`regx`。正在增长的是`token`弱引用的地图。这不是严格技术意义上的泄漏，因为内存在`token`被销毁时会被回收。但这显然并不理想。

不久前，我通过添加对地图的机会主义清除来清除对过期正则表达式的弱引用，从而修复了 xpressive 中的类似“泄漏”。我必须研究为什么在这种情况下没有发生。[请在此处](https://svn.boost.org/trac/boost/)提交错误。谢谢。

同时，您的修复非常好。声明函数局部`regx`静态意味着它只会被构造一次，因此`token`的弱引用映射永远不会超过大小 1。

# google-maps - 新的特征类型？

> ID：11848026
> 
> 赞同：1
> 
> 时间：2012-08-07T14:19:30.267
> 
> 标签：google-maps, google-maps-api-3

任何人都知道这个图标是什么特征类型（在蜂巢）？

![在此处输入图像描述](../Images/36ab8351ac92c378f39d2dd5ad05aef0.png)

如果我删除所有“poi”类型，它就会消失。使用：

```
featureType: "poi",
elementType: "labels",
stylers: [
    { visibility: "off" }
] 
```

但是，如果我单独删除此处列出的所有子类型：[https ://developers.google.com/maps/documentation/javascript/reference#MapTypeStyleFeatureType](https://developers.google.com/maps/documentation/javascript/reference#MapTypeStyleFeatureType)

*   吸引力
*   商业
*   poi.government
*   药学
*   公园
*   poi.place_of_worship
*   学校
*   poi.sports_complex

然后它仍然出现。地图上的某些 POI 元素是否不属于任何子类型，而只是属于 POI 父类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:26:53.857

事实上答案是，是的，

> “但是请注意，父功能可能包括一些附加功能，这些功能未包含在其子功能类型之一中。”

[https://developers.google.com/maps/documentation/javascript/reference#MapTypeStyleFeatureType](https://developers.google.com/maps/documentation/javascript/reference#MapTypeStyleFeatureType)

# mvvm - 在一个窗口中拥有多个视图 (MVVM)

> ID：11848028
> 
> 赞同：2
> 
> 时间：2012-08-07T14:19:37.280
> 
> 标签：mvvm, view

我正在尝试学习 MVVM，作为一个没有导师的新手，有时它会变得非常混乱。现在我有这个问题：

** 在一个窗口中，我使用了来自不同模型视图的 3 个不同视图。** 每个视图用于从分支中选择一个项目，我们将遍历树。** 在第一个视图中，我选择我的书 ** 第二个视图将显示该书的页面 ** 最后一个视图我希望它显示该页面的练习。

到目前为止，我能够将第一个视图绑定到书籍。现在，我应该如何将第二个视图的源绑定到第一个的**slectedItem**？

[MVVM 问题 http://clickasun.ir/8283kitchen/images/mvvmproblem.jpg](http://clickasun.ir/8283kitchen/images/mvvmproblem.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:57:39.867

有几种方法可以实现您想要的。例如。

```
 public class Exercise{}

 public class Page 
 {
    public List<Exercise> MyExercise {get;set;}
 }

 public class Book
 {
    public List<Page > MyPages {get;set;}
 } 
```

视图模型

```
 public ObservableCollection<Book> MyBooks {get;set;} 
```

xml

```
 <ListBox x:Name=books ItemsSource="{Binding MyBooks}"/>
 <ListBox x:Name=pages ItemsSource="{Binding ElementName=books,Path=SelectedItem}"/>
 <ListBox ItemsSource="{Binding ElementName=pages,Path=SelectedItem}"/> 
```

这当然只是一种方法。

ps：代码是手写的，所以检查错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:45:35.490

好的，我要感谢任何阅读本文并试图提供帮助的人，特别是你们“Blindmeis，Jen H”

谢谢你。

我知道这种情况必须如此笼统，我就是找不到。

所以我找到了两种方法，它们都是很好的解决方案。

1.  使用微软棱镜。（这是一种在 WPF 中轻松制作模块化程序的模式） [MSDN LINK](http://msdn.microsoft.com/en-us/library/gg406140.aspx) [另一个 LINK](http://msdn.microsoft.com/en-us/magazine/cc785479.aspx)

2.  使用主从模式 [这里很清楚](http://msdn.microsoft.com/en-us/library/ms742531.aspx)

所以我解决了我的问题。希望它对你也有用。

# python - 如何将静态文件包含到 setuptools - python 包

> ID：11848030
> 
> 赞同：89
> 
> 时间：2012-08-07T14:19:51.277
> 
> 标签：python, package, setuptools

我想包括`./static/data.txt`to `setuptools`，这是我的代码：

```
# setup.py
import os,glob
from setuptools import setup,find_packages

setup(
    name = "PotatoProject",
    version = "0.1.1",
    author = "Master Splinter",
    author_email = "splinter@initech.com",
    description = ("The potatoproject!"),
    url = 'http://www.google.com',
    license = "BSD",

    # adding packages
    packages=find_packages('src'),
    package_dir = {'':'src'},

    # trying to add files...
    include_package_data = True,
    package_data = {
        '': ['*.txt'],
        '': ['static/*.txt'],
        'static': ['*.txt'],
    },

    scripts=['src/startPotato'],
    classifiers=[
        "Development Status :: 3 - Alpha",
        "Topic :: Utilities",
        "License :: OSI Approved :: BSD License",
    ],
) 
```

文件系统：

```
.
├── setup.py
└── src
    ├── distutils_setup.py
    ├── Potato
    │   ├── __init__.py
    │   ├── potatoData.txt
    │   └── printer.py
    ├── startPotato
    ├── static
    │   └── data.txt
    └── Tomato
        ├── big.py
        └── __init__.py 
```

运行时的输出：`python setup.py sdist`

```
running sdist
running egg_info
creating src/PotatoProject.egg-info
writing src/PotatoProject.egg-info/PKG-INFO
writing top-level names to src/PotatoProject.egg-info/top_level.txt
writing dependency_links to src/PotatoProject.egg-info/dependency_links.txt
writing manifest file 'src/PotatoProject.egg-info/SOURCES.txt'
reading manifest file 'src/PotatoProject.egg-info/SOURCES.txt'
writing manifest file 'src/PotatoProject.egg-info/SOURCES.txt'
warning: sdist: standard file not found: should have one of README, README.txt

creating PotatoProject-0.1.1
creating PotatoProject-0.1.1/src
creating PotatoProject-0.1.1/src/Potato
creating PotatoProject-0.1.1/src/PotatoProject.egg-info
creating PotatoProject-0.1.1/src/Tomato
making hard links in PotatoProject-0.1.1...
hard linking setup.py -> PotatoProject-0.1.1
hard linking src/startPotato -> PotatoProject-0.1.1/src
hard linking src/Potato/__init__.py -> PotatoProject-0.1.1/src/Potato
hard linking src/Potato/printer.py -> PotatoProject-0.1.1/src/Potato
hard linking src/PotatoProject.egg-info/PKG-INFO -> PotatoProject-0.1.1/src/PotatoProject.egg-info
hard linking src/PotatoProject.egg-info/SOURCES.txt -> PotatoProject-0.1.1/src/PotatoProject.egg-info
hard linking src/PotatoProject.egg-info/dependency_links.txt -> PotatoProject-0.1.1/src/PotatoProject.egg-info
hard linking src/PotatoProject.egg-info/top_level.txt -> PotatoProject-0.1.1/src/PotatoProject.egg-info
hard linking src/Tomato/__init__.py -> PotatoProject-0.1.1/src/Tomato
hard linking src/Tomato/big.py -> PotatoProject-0.1.1/src/Tomato
Writing PotatoProject-0.1.1/setup.cfg
creating dist
Creating tar archive
removing 'PotatoProject-0.1.1' (and everything under it) 
```

并且没有添加txt！不`static/data.txt`也不`Potato/potatoData.txt`...

我错过了什么？！

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-08-07T14:34:26.927

正如评论中所指出的，有两种添加静态文件的方法：

## 1 - include_package_data=True + MANIFEST.in

`MANIFEST.in`同一目录中的文件如下`setup.py`所示：

```
include src/static/*
include src/Potato/*.txt 
```

与`include_package_data = True`在`setup.py`.

## 2 - setup.py 中的 package_data

```
package_data = {
    'static': ['*'],
    'Potato': ['*.txt']
} 
```

指定`setup.py`.

* * *

### 不要同时使用`include_package_data`和`package_data`in `setup.py`。

`include_package_data`将使信息无效`package_data`。

官方文档：
[https ://setuptools.readthedocs.io/en/latest/userguide/datafiles.html](https://setuptools.readthedocs.io/en/latest/userguide/datafiles.html)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-11-27T12:04:26.150

递归包含所有文件：

```
recursive-include project_name/templates *
recursive-include project_name/static * 
```

where`project_name`是您拥有`setup.py`文件的同一行中的文件夹。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-03-05T02:25:38.643

根据文档，包含包数据文件的[方法有三种。](http://setuptools.readthedocs.io/en/latest/setuptools.html#including-data-files)你有两个包裹：Potato 和 Tomato。静态目录不在这两个包中，这就是 setup.py 中的 package_data 字典不工作的原因。manifest 选项要求在 setup.py 中将 include_package_data 设置为 True。可以通过[此处](http://setuptools.readthedocs.io/en/latest/setuptools.html#non-package-data-files)找到的方式访问非包数据文件。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-02-03T12:01:18.970

使用以下

```
packages = ['.','templates','static','docs'],

package_data={'templates':['*'],'static':['*'],'docs':['*'],}, 
```

# c++ - 在初始化列表中使用这个指针

> ID：11848031
> 
> 赞同：6
> 
> 时间：2012-08-07T14:19:51.370
> 
> 标签：c++

```
struct T
{
    int a;
};

struct C
{
    T& r;
    C(T& v) : r(v) {}
};

struct E : T
{
    T& r;
    E(T const& v) : r(*this), T(v) {}   // ok
};

struct F : C, T // base order doesn't matter here
{
    //F(T const& v) : C(*this), T(v) {}   // error : C::r is not initialized properly
    F(T const& v) : C(*static_cast<T*>(this)), T(v) {}   // ok
    //F(T const& v) : C(static_cast<T&>(*this)), T(v) {}   // ok
};

int main()
{
    T v;
    F f(v);
    f.r.a = 1;
} 
```

虽然在初始化列表中使用这个指针可能会出现问题，但我从没想到这会发生在 POD 上，并且可以通过显式转换简单地修复；这是一些编译器错误或标准相关问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:32:17.180

当您尝试初始化 with 的基`C`类`F`时`*this`，编译器生成的复制构造函数`C`和您定义的构造函数`T&`都是匹配的，因为`*this`( `F`) 的类型直接从两者派生`C`而来`T`。你的演员解决了这种歧义。

令我惊讶的是，复制构造函数比采用的构造函数更好，`T&`因为我认为它们都会受到同等的青睐。如果选择了复制构造函数，则基础将从自身初始化，这会导致*未定义的行为*，因为引用成员将从未初始化的引用（本身）初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T15:04:40.620

代码模棱两可。

对于构造 的`C`基`F`，上下文是直接初始化，因此适用 13.3.1.3：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 13.3.1.3 构造函数初始化[over.match.ctor]
> 
> 对于直接初始化，候选函数是被初始化对象的类的所有构造函数。

根据 12.8:8，包含隐式声明的复制构造函数。

的构造函数的候选者`C`是`C(T &)`和（默认复制构造函数）`C(const C &)`，按参数列表`(F)`。在这两种情况下，我们都有一个参考绑定 (13.3.3.1.4)，然后是一个派生到基础的转换 (13.3.3.1)，在后一种情况下还有一个额外的 cv 限定调整，在这两种情况下都给出了转换的总体排名.

由于`C`和`T`都是 的基类`F`，但都是不同的类型，并且两者都不是另一个的基类，因此 13.3.3.2:3 和 13.3.3.2:4 中的子句均不适用，并且转换序列无法区分。

事实上，gcc-4.5.1 拒绝代码：

```
prog.cpp: In constructor 'F::F(const T&)':
prog.cpp:20:34: error: call of overloaded 'C(F&)' is ambiguous
prog.cpp:9:5: note: candidates are: C::C(T&)
prog.cpp:7:1: note:                 C::C(const C&) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:55:01.993

1)**切勿在初始化列表中使用 this** [http://msdn.microsoft.com/en-us/library/3c594ae3(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/3c594ae3(v=vs.80).aspx) this 指针仅在非静态成员函数中有效。它不能在基类的初始化列表中使用。

在此构造函数之前调用基类构造函数和类成员构造函数。实际上，您已将指向未构造对象的指针传递给另一个构造函数。如果那些其他构造函数访问任何成员或在 this 上调用成员函数，则结果将是未定义的。在所有构造完成之前，您不应使用 this 指针。

很快：Cr 由坏指针初始化

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T14:34:32.470

```
结构 C
{
    T&r;
    C(T&v) : r(v) {}
};

结构 E：T
{
    T&r;
    E(T const& v) : r(*this), T(v) {} // 好的
};

```

您需要在声明时初始化任何引用，但在这里您刚刚声明了它。这在 C++ 中是不允许的。

# java - java中正则表达式的问题

> ID：11848034
> 
> 赞同：-1
> 
> 时间：2012-08-07T14:20:04.303
> 
> 标签：java, regex

我想用正则表达式检查给定的逻辑公式。
这种形式的逻辑连接词是 & (and) , | (or), (!) 否定符号（允许多个否定）和变量是正常字符序列，后跟基数 [0],[1],[0..1]。
变量名也可以是“FGH”或“F:G:H:”或简单的“F”等。
方括号属于基数。也允许使用常量，
例如使用这种模式它不起作用：

`Pattern.compile("([!]*[a-zA-Z][\\.])?([!]*[a-zA-Z][\\.]?)*((\\[0\\])?|(\\[1\\])?|(\\[0\\.\\.1\\])?)|(TRUE)|(FALSE)|(&)|(|)|(!)");` 我目前的情况是这样的变量：!!F[0] 不被接受，但我希望这个被接受。

这里有一些公式的例子，我想允许

!!F[0] & !F1.G[0..1] | (F1[1] | F2[0]) & F:G[0..1]

除变量及其基数外，每个元素之间也应允许有空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T12:30:11.837

这个~~很糟糕，但~~应该适合您的需求：

```
[!(]*([A-Z]+[0-9]*([.:][A-Z]+[0-9]*)*\[([01]|0[.]{2}1)\]|TRUE|FALSE)[)]*( *[&|] *[!(]*([A-Z]+[0-9]*([.:][A-Z]+[0-9]*)*\[([01]|0[.]{2}1)\]|TRUE|FALSE)[)]*)* 
```

[演示](http://regexr.com?3501o)

请注意，这只是*允许*括号而不*计算*它们，即输入如`!((!(F[0])`将匹配而仅`!((!(F[0])))`应匹配。

* * *

如果您想要一些已经更清洁的东西，您可以*逐步**构建*您的正则表达式：

 *```
String atomVarPref = "[!(]*";
String atomVar = "[A-Z]+[0-9]*";
String atomSep = "[.:]";
String atomVarCard = "\\[([01]|0[.]{2}1)\\]";
String atomVarSuff = "[)]*";
String sep = " *[&|] *";

String varTemplate = "%s(%s(%s%s)*%s|TRUE|FALSE)%s";
String var = String.format(varTemplate, atomVarPref, atomVar, atomSep, atomVar, atomVarCard, atomVarSuff);

String regexTemplate = "%s(%s%s)*";
String regex = String.format(regexTemplate, var, sep, var); 
```

来电：

```
String input = "!!F[0] & !F1.G[0..1] | (F1[1] | F2[0]) & F:G[0..1]";
System.out.println(input.matches(regex)); // prints true 
```*

# mahout - 如何读取 Mahout 聚类输出

> ID：11848038
> 
> 赞同：4
> 
> 时间：2012-08-07T14:20:28.847
> 
> 标签：mahout

我已经对 Mahout 教程中的合成控制数据运行了 k-Means 聚类算法，并且想知道是否有人可以解释如何解释输出。我运行了 clusterdump 并收到了如下所示的输出（截断以节省空间）：

```
CL-592{n=57 c=30.726, 29.813...] r=[3.528, 3.597...]}
Weight : [props - optional]: Point:
1.0 : [distance=27.453962995925863]: [24.672, 35.261, 30.486...]
1.0 : [distance=27.675053294846002]: [25.592, 29.951, 34.188...]
1.0 : [distance=28.97727289419493]: [30.696, 32.667, 34.223...]
1.0 : [distance=21.999685652862784]: [32.702, 35.219, 30.143...]
...
CL-598{n=50 c=[29.611, 29.769...] r=[3.166, 3.561...]}
Weight : [props - optional]:  Point:
1.0 : [distance=27.266203490250472]: [27.679, 33.506, 23.594...]
1.0 : [distance=28.749781351838173]: [34.727, 28.325, 30.331...]
1.0 : [distance=32.635136046420186]: [27.758, 33.859, 29.879...]
1.0 : [distance=29.328974057024624]: [29.356, 26.793, 25.575...] 
```

有人可以向我解释如何阅读这个吗？据我了解，CL-__是一个簇ID，后跟n=簇中的点数，c=centroid作为向量，r=radius作为向量，然后是簇中的每个点。它是否正确？此外，我如何知道哪个聚类点与哪个输入点匹配？即点是否被描述为键值对，其中键是点的某种ID，值是向量？如果没有，有什么方法可以设置它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T20:42:43.953

我相信您对数据的解释是正确的（我只与 Mahout 合作了约 3 周，因此可能应该有经验更丰富的人对此进行权衡）。

至于将点链接回创建它们的输入，我使用过`NamedVector`，其中名称是向量的键。当您读取其中一个生成的点文件 ( `clusteredPoints`) 时，您可以将每一行（点向量）转换回 a`NamedVector`并使用`.getName()`.

**更新以回应评论**

最初将数据读入 Mahout 时，会将其转换为向量集合，然后将其写入文件 ( `points`) 以供稍后在聚类算法中使用。Mahout 为您提供了几种`Vector`可以使用的类型，但它们也让您可以访问一个`Vector`名为的包装类，该类`NamedVector`允许您识别每个向量。

例如，您可以`NamedVector`按如下方式创建每个：

```
NamedVector nVec = new NamedVector(
    new SequentialAccessSparseVector(vectorDimensions), 
    vectorName
    ); 
```

然后你将你的集合写入`NamedVectors`文件，如下所示：

```
SequenceFile.Writer writer = new SequenceFile.Writer(...);
VectorWritable writable = new VectorWritable();

// the next two lines will be in a loop, but I'm omitting it for clarity
writable.set(nVec);
writer.append(new Text(nVec.getName()), nVec); 
```

您现在可以将此文件用作其中一种聚类算法的输入。

在使用您的点文件运行其中一种聚类算法后，它将生成*另一个*点文件，但它将位于名为`clusteredPoints`.

然后，您可以读取此点文件并提取与每个向量关联的名称。它看起来像这样：

```
IntWritable clusterId = new IntWritable();
WeightedPropertyVectorWritable vector = new WeightedPropertyVectorWritable();

while (reader.next(clusterId, vector))
{
    NamedVector nVec = (NamedVector)vector.getVector();
    // you now have access to the original name using nVec.getName()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T17:16:36.627

尝试在 clusterdump 中添加选项 -of CSV，您将获得更可利用的结果以进行进一步处理。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T13:36:58.887

我有同样的问题，（使用mahout 0.6）。我也是初学者。我需要以集群的形式向用户显示文档。所以我需要文档名称而不是与集群对应的单词。我一直在从 shell 脚本中对文本文档进行聚类。

# jqgrid - 悬停在 Jqgrid 列上显示工具提示

> ID：11848048
> 
> 赞同：0
> 
> 时间：2012-08-07T14:20:51.453
> 
> 标签：jqgrid

我想在 jqgrid 列标题上添加一个自定义工具提示。我将鼠标悬停在列名上，我得到了工具提示（描述了与该列相关的内容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:30:47.353

我认为没有任何内置方法可以添加自定义标题。如果您使用[headertitles](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)选项，它只会使用文本作为标题属性。

您可能必须手动设置它们，如下所示：

```
$("th[role='columnheader']").attr("title", "some description"); 
```

您可以将该代码添加到回调之一，例如`gridComplete`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:57:37.447

感谢大卫的回答。

我们可以再做一件事，如下面的代码所示：

var thd = jQuery("thead:first", grid[0].grid.hDiv)[0]; jQuery("tr.ui-jqgrid-labels th:eq(" + columnnumber + ")", thd).attr("title","本专栏告诉你参加培训但错过考试的人");

如果您想为所有列显示自定义工具提示，您可以添加一个从第一列到最后一列的循环，并在数组中包含“文本”

var arr=["你好","bla bla","a","b","c"];

并在循环中使用这个数组

# iphone - 使用 OpenCV 将纸张检测为一系列点

> ID：11848050
> 
> 赞同：1
> 
> 时间：2012-08-07T14:20:52.073
> 
> 标签：iphone, opencv, core-graphics

我正在尝试使用 OpenCV 在 iPhone 上的照片中检测一张纸。我正在使用这个问题的代码：[OpenCV C++/Obj-C: Detecting a sheet / Square Detection](https://stackoverflow.com/questions/8667818/opencv-c-obj-c-detecting-a-sheet-of-paper-square-detection)

这是代码：

```
- (void)findEdges {
    image = [[UIImage imageNamed:@"photo.JPG"] retain];
    Mat matImage = [image CVMat];
    find_squares(matImage, points);

    UIImageView *imageView = [[[UIImageView alloc] initWithImage:image] autorelease];
    [imageView setFrame:CGRectMake(0.0f, 0.0f, self.frame.size.width, self.frame.size.height)];
    [self addSubview:imageView];
    [imageView setAlpha:0.3f];
}

- (void)drawRect:(CGRect)rect {
    [super drawRect:rect];

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetRGBStrokeColor(context, 1.0, 0.0, 0.0, 0.8);

    CGFloat scaleX = self.frame.size.width / image.size.width;
    CGFloat scaleY = self.frame.size.height / image.size.height;

    // Draw the detected squares.
    for( vector<vector<cv::Point> >::const_iterator it = points.begin(); it != points.end(); it++ ) {
        vector<cv::Point> square = *it;

        cv::Point p1 = square[0];
        cv::Point p2 = square[1];
        cv::Point p3 = square[2];
        cv::Point p4 = square[3];

        CGContextBeginPath(context);

        CGContextMoveToPoint(context, p1.x * scaleX, p1.y * scaleY); //start point
        CGContextAddLineToPoint(context, p2.x * scaleX, p2.y * scaleY);
        CGContextAddLineToPoint(context, p3.x * scaleX, p3.y * scaleY);
        CGContextAddLineToPoint(context, p4.x * scaleX, p4.y * scaleY); // end path

        CGContextClosePath(context);
        CGContextSetLineWidth(context, 4.0);
        CGContextStrokePath(context);
    }
}

double angle( cv::Point pt1, cv::Point pt2, cv::Point pt0 ) {
    double dx1 = pt1.x - pt0.x;
    double dy1 = pt1.y - pt0.y;
    double dx2 = pt2.x - pt0.x;
    double dy2 = pt2.y - pt0.y;
    return (dx1*dx2 + dy1*dy2)/sqrt((dx1*dx1 + dy1*dy1)*(dx2*dx2 + dy2*dy2) + 1e-10);
}

void find_squares(Mat& image, vector<vector<cv::Point> >& squares) {
    // blur will enhance edge detection
    Mat blurred(image);
    medianBlur(image, blurred, 9);

    Mat gray0(blurred.size(), CV_8U), gray;
    vector<vector<cv::Point> > contours;

    // find squares in every color plane of the image
    for (int c = 0; c < 3; c++)
    {
        int ch[] = {c, 0};
        mixChannels(&blurred, 1, &gray0, 1, ch, 1);

        // try several threshold levels
        const int threshold_level = 2;
        for (int l = 0; l < threshold_level; l++)
        {
            // Use Canny instead of zero threshold level!
            // Canny helps to catch squares with gradient shading
            if (l == 0)
            {
                Canny(gray0, gray, 10, 20, 3); //

                // Dilate helps to remove potential holes between edge segments
                dilate(gray, gray, Mat(), cv::Point(-1,-1));
            }
            else
            {
                gray = gray0 >= (l+1) * 255 / threshold_level;
            }

            // Find contours and store them in a list
            findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

            // Test contours
            vector<cv::Point> approx;
            for (size_t i = 0; i < contours.size(); i++)
            {
                // approximate contour with accuracy proportional
                // to the contour perimeter
                approxPolyDP(Mat(contours[i]), approx, arcLength(Mat(contours[i]), true)*0.02, true);

                // Note: absolute value of an area is used because
                // area may be positive or negative - in accordance with the
                // contour orientation
                if (approx.size() == 4 &&
                    fabs(contourArea(Mat(approx))) > 1000 &&
                    isContourConvex(Mat(approx)))
                {
                    double maxCosine = 0;

                    for (int j = 2; j < 5; j++)
                    {
                        double cosine = fabs(angle(approx[j%4], approx[j-2], approx[j-1]));
                        maxCosine = MAX(maxCosine, cosine);
                    }

                    if (maxCosine < 0.3)
                        squares.push_back(approx);
                }
            }
        }
    }
} 
```

这是输入图像：

![输入图像](../Images/7d0fb91abced8fa26f270873f9d00132.png)

结果如下：

![结果](../Images/5d2efb067f43e1dbc00477ad9aa76c63.png)

我究竟做错了什么？

# c# - 查看是否正在调试其他程序集

> ID：11848051
> 
> 赞同：1
> 
> 时间：2012-08-07T14:20:54.693
> 
> 标签：c#, visual-studio, process

我们有一个程序集，我们称之为`Foo.exe`。此可执行文件将由另一个应用程序（如`Bar1.exe`或）启动`Bar2.exe`。

如果`Foo.exe`运行它每 10 秒检查一次`Bar1`或`Bar2`进程是否正在运行。如果没有，它会清理一些东西并关闭。

这适用于普通用户场景。但是如果我们开发，我们会遇到一个大问题：应用程序看不到应用程序`Bar1`是否`Bar2`处于调试状态，这两种情况`Bar.svhost.exe`都可以在任务管理器中使用。

这意味着，如果`Bar.svhost.exe`将被忽略，`Foo.exe`在调试过程中结束，这是不可能的。

但是如果`Bar.svhost.exe`会看到，`Foo.exe`永远不会结束，我们必须手动杀死它，但它没有被正确清理。

知道如何解决问题吗？

（结束`Foo.exe`out of `Bar1`or`Bar2`是不可能的，因为多个`Bar1`or`Bar2`可以在机器上运行但`Foo`只需要运行一次。因此`Foo.exe`必须检查自己。并且“Kill”进程将让它清理）

补充：这里是问题的伪代码示例

```
//Bar1.exe and Bar2.exe
void Main()
{
    if (!FooIsRunning())
        StartFoo();
    DoSomething();
}

//Foo.exe
void Main()
{
    Initialize();
    while (BarIsRunning());
    Cleanup();
}

private bool BarIsRunning()
{
    var processes = Process.GetProcesses();
    if (processes.Any(p => p.ProcessName.Contains("Bar.exe"))
        return true;

    var vshostProcess = processes.FirstOrDefault(p => p.ProcessName.Contains("Bar.vshost.exe");
    return vshostProcess != null && ProcessIsDebugging(process);
}

private bool ProcessIsDebugging(Process process)
{
    // How to...
    return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:23:44.293

你检查过[Debugger.IsAttached](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.isattached.aspx)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:32:02.670

我想我解决了这个问题。我发现如果 Bar1 或 Bar2 将被调试，MainWindowTitle 是不同的。直到调试 Bar1.vshost.exe 的 MainWindowTitle 才会是真正的应用程序标题，否则 MainWindowTitle 为空。

Foo.exe

```
private static bool IsLastClientClosed()
{
    var processes = Process.GetProcesses();

    var debuggingProcesses = processes.Where(p => p.ProcessName.Contains("Bar1.vshost") || p.ProcessName.Contains("Bar2.vshost")).ToList();
    if (debuggingProcesses.Any())
        return !DebuggingRuns(debuggingProcesses);

    return processes.Any(p => p.ProcessName.StartsWith("Bar1") || p.ProcessName.StartsWith("Bar2"));
}

private static bool DebuggingRuns(IEnumerable<Process> processes)
{
    foreach (var process in processes)
    {
        try
        {
            if (!string.IsNullOrEmpty(process.MainWindowTitle))
                return true;
        }
        catch
        {
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T11:46:12.133

如果要检查*其他*应用程序是否附加了调试器，请使用[CheckRemoteDebuggerPresent](http://msdn.microsoft.com/de-de/library/windows/desktop/ms679280%28v=vs.85%29.aspx)

我为进程编写了一个扩展方法：

```
public static class ProcessExtensions
{
    [DllImport("kernel32.dll", SetLastError = true, ExactSpelling = true)]
    static extern bool CheckRemoteDebuggerPresent(IntPtr hProcess, ref bool isDebuggerPresent);

    public static bool IsDebuggerAttached(this Process process)
    {
        try
        {
            var isDebuggerAttached = false;
            CheckRemoteDebuggerPresent(process.Handle, ref isDebuggerAttached);

            return isDebuggerAttached;
        }
        catch (Exception)
        {
            return false;
        }
    }
} 
```

# regex - 遍历日志文件并使用正则表达式从行中提取时间值

> ID：11848054
> 
> 赞同：1
> 
> 时间：2012-08-07T14:20:59.470
> 
> 标签：regex, perl

我有一个 perl 脚本创建一个文本文件，将捕获的行从垃圾收集日志写入它，并将文件保存在存档/时间戳文件夹中。该文件将包含如下所示的行：

> 413489.272: [GC [PSYoungGen: 323892K->3126K(332352K)] 623290K->303976K(1031424K), 0.0253970 秒] [时间: user=0.03 sys=0.00, real=0.02 secs]
> 
> 413503.531: [GC [PSYoungGen: 319094K->7280K(333760K)] 619944K->310249K(1032832K), 0.0614640 秒] [时间: user=0.06 sys=0.00, real=0.06 secs]
> 
> 413521.441: [GC [PSYoungGen: 324592K->6867K(333056K)] 627561K->310363K(1032128K), 0.0574120 秒] [时间: user=0.06 sys=0.00, real=0.06 secs]
> 
> ```
>  ... 
> ```

我想做的是遍历文件中的这些行，并使用正则表达式来获取“实时”时间的值（例如`real=0.06 secs`，但只是 0.06），并将其存储在`$time`变量中。我认为积极的后视会为此工作，例如`/(?<=real=)\d\.\d\d/`，但这不起作用。

最后，我的脚本将如下所示：

```
open LOG,"<","./report/archive/reports-$now/gclog.txt" or die "Unable to read file: $!";
    #while there is lines in the file
        #regex to match time value -> store in variable
        #print variable (just as a check for now)
        #some other stuff not really relevant to this question
close LOG; 
```

我对 perl 相当陌生，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:22:48.113

你不需要背后的负面看法，只需要捕捉。

采用：

```
my ($time) = /\breal=([0-9.]+)/; 
```

可能不是必需的`\b`，但我总是更喜欢匹配我的单词边界以防万一。

`()`导致它捕获作为数组返回的输出。然后，我将返回的值放入名为 的变量中`$time`。捕获值在 中也可用`$1`，但我更喜欢以这种方式返回它。

# objective-c - 使用和不使用容量初始化 NSMutableArray

> ID：11848059
> 
> 赞同：6
> 
> 时间：2012-08-07T14:21:15.377
> 
> 标签：objective-c, xcode, nsmutablearray

> **可能重复：**
> [NSMutableArray initWithCapacity 细微差别](https://stackoverflow.com/questions/3948062/nsmutablearray-initwithcapacity-nuances)
> [Objective-c NSArray init 与 initWithCapacity:0](https://stackoverflow.com/questions/6077422/objective-c-nsarray-init-versus-initwithcapacity0)

以下代码行有什么区别？确切的优点和缺点是什么？假设接下来我会做 3 个 addObject 操作。

```
NSMutableArray *array = [[NSMutableArray alloc] initWithCapacity: 5];
NSMutableArray *array = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T14:27:20.897

从功能上讲，这两个语句是相同的。

在第一种情况下，您正在向运行时提示您将很快将五个对象添加到数组中，以便它可以根据需要为它们预分配一些空间。这意味着前五个`addObject:`使用第一条语句的前五次调用可能会稍微快一些。

但是，不能保证运行时除了忽略提示之外会做任何事情。我从不使用`initWithCapacity:`自己。如果我遇到`addObject:`严重的性能瓶颈，我可能会尝试看看情况是否有所改善。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T14:26:59.100

通常，面向对象语言和不同大小的数组的区别在于：您将获得的开销和内存级别的页面错误。

换句话说，假设您有一个对象在内存中请求 5 个空间（就像您的第一个示例一样），而第二个对象不保留任何空间。因此，当需要将一个对象添加到第一个对象时，内存中已经有空间让它落入，另一方面，非分配对象首先必须请求内存空间然后将其添加到大批。这在这个级别听起来并没有那么糟糕，但是当你的数组大小增加时，这变得更加重要。

来自[苹果的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)：

`arrayWithCapacity:`

> 创建并返回一个 NSMutableArray 对象，该对象具有足够的分配内存来最初保存给定数量的对象。... 新阵列的初始容量。返回值 一个新的 NSMutableArray 对象，具有足够的分配内存来保存 numItems 个对象。

# rally - 与发布相关的用户故事

> ID：11848064
> 
> 赞同：0
> 
> 时间：2012-08-07T14:21:31.263
> 
> 标签：rally

这可能以前出现过，但我没有运气找到它，有没有一种好方法可以将与发布相关的用户故事列表拉入 xml 数据源？

像这样的东西（但这不起作用） [https://rally1.rallydev.com/slm/webservice/1.33/hierarchicalrequirement?](https://rally1.rallydev.com/slm/webservice/1.33/hierarchicalrequirement?(release) ( release = somerelease)&fetch=true&pagesize=200

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:31:33.890

没关系，它应该是这样的： [https](https://rally1.rallydev.com/slm/webservice/1.33/hierarchicalrequirement?query=(release) ://rally1.rallydev.com/slm/webservice/1.33/hierarchicalrequirement?query=(release = [https://rally1.rallydev.com/slm/webservice/1.33/release /somereleaseid)&fetch=true&pagesize=200](https://rally1.rallydev.com/slm/webservice/1.33/release/somereleaseid)&fetch=true&pagesize=200)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:31:37.180

你的查询很接近。您需要添加`query`参数和查询`Release.Name`，如下所示：

```
https://rally1.rallydev.com/slm/webservice/1.35/HierarchicalRequirement
?fetch=true
&query=(Release.Name = "my release name") 
```

# php - 服务器上是否有任何用于 PHP 的解压缩库？

> ID：11848065
> 
> 赞同：-2
> 
> 时间：2012-08-07T14:21:38.813
> 
> 标签：php, unzip

我们在我们的脚本中使用 dUnzip2 在下载前解压缩文件，编写许可证，然后使用 zip.lib 对其进行压缩并提供服务。但是 dUnzip2 正在使用：

```
foreach ($f as $file_row => $file) 
```

这适用于小文件，但对于大于 10 mb 的文件，它应该使用类似

```
for($n = 1;$n < count($f);$n++){
    $file = $f[$n];
} 
```

这会导致大于 10MB 的文件出现内存限制问题。我们必须一直为该库增加服务器上的内存限制。脚本本身是巨大的，老实说，我不敢接受修改它的任务。

那么您知道任何其他解压缩库可以与 dUnzip2 或更好的解决方案完成相同的工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T14:24:33.717

为什么不使用 PHP 的内置 Zip 东西：[http ://www.php.net/manual/en/zip.examples.php](http://www.php.net/manual/en/zip.examples.php)

显然假设它已启用（通常是）做一个 phpinfo() 来检查。

# java - testng Reporter.log 将“<”视为“[”

> ID：11848066
> 
> 赞同：2
> 
> 时间：2012-08-07T14:21:45.110
> 
> 标签：java, html, testng

我正在尝试将屏幕截图添加到我的 testng 报告中，但 html“尖括号”被记录为方括号，因此报告如下所示。还有其他人遇到这个问题吗？

我的代码：

```
FileUtils.copyFile(scrFile, new File(filename));
Reporter.setCurrentTestResult(testResult);
Reporter.log("<a href=\"" + filename + "\">Screenshot</a>"); 
```

生成的报告：

```
[a href="filename.png"]Screenshot[/a] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:26:31.283

已知问题：
[https ://github.com/cbeust/testng/commit/6a577ffe7ea59c27434829ae3f11f0074b1d7cf5](https://github.com/cbeust/testng/commit/6a577ffe7ea59c27434829ae3f11f0074b1d7cf5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:13:14.917

我曾经也有过一样的问题。尝试更新 testng 插件（[http://testng.org/doc/download.html](http://testng.org/doc/download.html)）并将行 -Dorg.uncommons.reportng.escape-output=off 放入 Run->Run Configurations->(x)=Arguments 中字段大众参数。

# ruby - 在ruby中删除模式后的行

> ID：11848070
> 
> 赞同：0
> 
> 时间：2012-08-07T14:21:58.073
> 
> 标签：ruby, pattern-matching

我必须在 Ruby 中从文件中删除模式后的一些行。例如，我有一个这样的文件：

```
# pattern 1
a
b
# end pattern 1
# pattern 2
a
b
c
d
# end pattern 2
# pattern 3
a
b
c
# end pattern 3 
```

我想删除 和 之间的`# pattern 2`行`# end pattern 2`。
我想要得到的文件是：

```
# pattern 1
a
b
# end pattern 1
# pattern 3
a
b
c
# end pattern 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:54:27.127

您可以使用 来做到这一点`String#gsub`，但您需要将一个选项传递给正则表达式，这将使点匹配换行符。

```
str = <<-STR
# pattern 1
a
b
# end pattern 1
# pattern 2
a
b
c
d
# end pattern 2
# pattern 3
a
b
c
# end pattern 3
STR

puts str.gsub(/(# pattern 2.*# end pattern 2\n)/m, '')
# >> # pattern 1
# >> a
# >> b
# >> # end pattern 1
# >> # pattern 3
# >> a
# >> b
# >> c
# >> # end pattern 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:19:18.597

我喜欢避免使用正则表达式，除非它们确实是必要的。在这种情况下，它们不是。只需逐行遍历字符串，打印每一行。检测何时看到“# pattern 2”，然后停止打印线。检测何时看到“# end pattern 2”并再次开始打印行。这可以使用本地布尔变量轻松完成，您应该自己做练习，因为听起来您对 Ruby 了解不多，也不知道该尝试什么。

**但是**Ruby 中有一个很酷的技巧可以让变量变得不必要：

```
str = <<END
X
# pattern 2
Y
Z
# end pattern 2
Q
END

str.split("\n").each do |line|
  puts line unless (line=="# pattern 2")..(line=="# end pattern 2")
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:43:10.807

喜欢Here文档的技巧，但是如果你想直接处理文件，这里有另一种解决方案，它使用pos和rewind（对不起，文件io没有异常处理）：

```
def gsub_paragraph(options)
  regex_start = /^.*#{options[:pattern_start]}.*$/
  regex_stop = /^.*#{options[:pattern_stop]}.*$/

  f_read = File.new(options[:file_in], 'r')
  true until (line_pattern = regex_start.match(f_read.gets))
  pos_start = f_read.pos - line_pattern[0].length - 1
  f_read.rewind
  part_start = f_read.read(pos_start)

  true until (line_pattern = regex_stop.match(f_read.gets))
  pos_stop = f_read.pos
  part_stop = f_read.read(pos_stop)
  f_read.close

  f_write = File.new((options[:file_out] || options[:file_in]), 'w+')
  replacement = options[:replacement] || ''
  f_write.puts part_start + replacement + part_stop
  f_write.close
end

file = "gsub_in.txt"

# Output to a designated file other than source file, replace matched part
gsub_paragraph(:file_in => file, :pattern_start => 'pattern 2', :pattern_stop => 'end pattern 2', :replacement => "~~~I replaced sth here~~~\n", :file_out => 'gsub_out.txt')

# Output to a designated file other than source file, without replacement
gsub_paragraph(:file_in => file, :pattern_start => 'pattern 2', :pattern_stop => 'end pattern 2', :file_out => 'gsub_out.txt')

# Output to source file directly, without replacement
gsub_paragraph(:file_in => file, :pattern_start => 'pattern 2', :pattern_stop => 'end pattern 2') 
```

# vim - 如何从 vimrc 设置“args”？

> ID：11848072
> 
> 赞同：1
> 
> 时间：2012-08-07T14:22:05.397
> 
> 标签：vim

我想为我的项目创建一个不同的 lvimrc，它将“args”设置为我的源文件。

目前我在运行时通过以下方式执行此操作：

```
:argadd src/*.c inc/*.h 
```

我想在启动时执行它。我总是从项目的根目录启动 vim。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T14:44:17.403

`~/.bashrc`您可以在您的或其他任何内容中创建别名：

```
alias lvim='vim +argadd\ src/*\ inc/*.h' 
```

或将这样的内容添加到您的`~/.vimrc`：

```
if ( getcwd() == '/path/to/project' )
  exec( 'argadd src/*.c inc/*.h' )
endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T14:43:53.773

要自动执行命令，您可以使用自动命令 ( `:help autocmd`)。如果你使用的是 lvimrc，你可以这样做

```
au VimEnter * argadd src/*.c inc/*.h 
```

编辑：将 argsadd 更改为 argadd。那是正确的。

# javascript - ajaxToolKit autoCompleteExtender OnClientItemSelected

> ID：11848073
> 
> 赞同：3
> 
> 时间：2012-08-07T14:22:09.097
> 
> 标签：javascript, asp.net, code-behind, autocompleteextender

我正在尝试在我的项目中实现一个 autoCompleteExtender。目前我正在使用 OnClientItemSelected 属性在客户端调用 javascript。当用户选择一个选项时，有没有办法（使用另一个属性或其他代码）让我在后面的代码中调用一个方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T10:48:46.273

为此，您需要从带有 ID 和文本的 Web 服务方法返回列表

这里的**“lst”**是包含来自数据源的数据的实际列表。

```
List<string> items = new List<string>(count);
        for (int i = 0; i < lst.Count; i++)
        {
            string str =AjaxControlToolkit.AutoCompleteExtender.CreateAutoCompleteItem(lst[i].Text,Convert.ToString(lst[i].IDValue));                
            items.Add(str);

        }
        return items.ToArray(); 
```

然后简单的javascript

```
function GetID(source, eventArgs )
    {
        var HdnKey = eventArgs.get_value();
        document.getElementById('<%=hdnID.ClientID %>').value = HdnKey;
    } 
```

并且不要忘记在自动完成扩展器 **OnClientItemSelected="GetID"中设置属性**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:36:32.057

```
function AutoCompleteEx_OnClientItemSelected(sender, args) {
     __doPostBack(sender.get_element().name, '');
} 
```

在扩展文本框的服务器端处理`TextChanged`事件。

# php - 如何从下拉列表中重新加载表单

> ID：11848078
> 
> 赞同：0
> 
> 时间：2012-08-07T14:22:32.493
> 
> 标签：php, zend-framework

我想通过使用“onChange”重新加载表单，或者最好只是重新加载值。更改项目 ID 时，表单中有几个元素需要更新。

```
$this->addElement('select', 'project_id', array(
                'label'         => t('Project'),
                'multiOptions'  => $data,
                'filters'       => array('Int'),
                'value'         => 0,
                'required'      => true,
                'disableTranslator' => true,
                'validators'    =>  array(),
                'onChange'      => 'Javascript:window.location.reload(false)'
    )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:29:49.597

您可以`onChange`改为调用自定义 javascript 函数 - 这将更改您需要更改的任何字段，*然后*提交表单。

# objective-c - 在两个不同的 nib 文件中访问同一个对象

> ID：11848084
> 
> 赞同：0
> 
> 时间：2012-08-07T14:23:05.877
> 
> 标签：objective-c, cocoa-touch, cocoa, xib, nib

我想知道如何在两个不同的 Xib 中访问特定类的对象的相同引用。

> 我知道通过为每个 xib 中的类创建对象引用会创建不同的对象。即使在使用 AppDelegate 时，它​​也会创建不同的对象。我想要实现的是两个 xib 中的引用对象应该是相同的（例如，我可以将该对象用作两个不同表视图的数据源。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:54:50.777

只创建一次对象，然后把它放在你可以从两个类中获取的地方。例如，您可以创建对象作为应用程序委托的属性。然后加

```
AppDelegate *app = [[UIApplication sharedApplication] delegate]; 
```

到您的类（在导入之后`AppDelegate.h`）并使用`app.objectName`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T08:32:58.847

另一个答案会起作用，但这是一个糟糕的设计。

你应该坚持`tell don't ask rule`. 为您的对象提供您希望他们使用的数据源，**不要**让他们要求数据源，这实际上是一个令人讨厌的全局。

另一个问题是你对笔尖的理解。它们存储一个对象图，当加载 nib 时，该图未存档，并且其中的每个对象都被实例化。如果您在图中有两个相同的对象，那么您最终将得到两个实例，**而不是**对一个实例的两个引用。当您拖出多个视图时也是如此，您最终会得到多个`UIView`（和子类）实例，这正是您所期望的。

学习在 nib 中可以/不可以做什么与在代码中必须做什么以及它们如何组合在一起之间的界限是非常值得的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T17:17:32.653

有趣的 ！
尝试使用单例方法，查看此链接[http://www.duckrowing.com/2010/05/21/using-the-singleton-pattern-in-objective-c/](http://www.duckrowing.com/2010/05/21/using-the-singleton-pattern-in-objective-c/)
使用这种方法，您可以创建一个实例在整个应用程序生命周期中可用

# css - CSS 动画仅在 iPad 上使 Safari 崩溃

> ID：11848085
> 
> 赞同：5
> 
> 时间：2012-08-07T14:23:16.453
> 
> 标签：css, ios, mobile-safari, css-animations

我的网站在 iPad 上的 Safari 和仅在 iPad 上崩溃。我正在使用 css3 动画在标题中为一张大图片（4800 x 374px，尽管只有 336 kb）制作动画。大约十秒钟后，这会导致 Safari 崩溃。

[您可以在http://bakabaka.nl/preview/leuk/](http://bakabaka.nl/preview/leuk/)上查看该网站

我可以防止这种崩溃吗？如果可以，如何防止？我可以让动画运行更流畅吗？现在太坑了...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T17:52:28.930

这是在黑暗中拍摄，但也许值得。

我会尝试在 iOS 上使用 3D 动画，因为它使用硬件加速：

```
-webkit-transform: translate3d(X,Y,Z); 
```

有关更多信息，请参见此处：“ [3D 变换函数](http://www.w3.org/TR/css3-3d-transforms/#three-d-transform-functions)”

iOS 上非常大的图像也可能会出现一些问题。也许将它们切成碎片是更好的解决方案。阅读更多相关信息：“[了解 iOS 资源限制](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/CreatingContentforSafarioniPhone/CreatingContentforSafarioniPhone.html#//apple_ref/doc/uid/TP40006482-SW15)”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-16T18:42:56.550

我也经历过类似的事情。对于其他可能会撞墙的人来说，这会让桌面和 iOS 上的 Safari 崩溃。它*真的*不喜欢那个`::window-inactive`选择器。

```
::-webkit-scrollbar-thumb:window-inactive {
     background: #f2f2f2; 
} 
```

# java - 哪个简单的网络服务适用于低带宽？

> ID：11848087
> 
> 赞同：0
> 
> 时间：2012-08-07T14:23:23.323
> 
> 标签：java, android, sockets, soap, proxy

我的目标是以下，我不知道我应该去哪个方向。

*   一个网络应用程序
*   一个可以与 webapp 交互的客户端，不是通过浏览器，而是通过“其他东西”。

此连接可能由以下方式建立：RMI、Rest、Soap、Socket 等（我几乎没有任何经验）。客户端应该能够触发服务器上的方法/进程。客户端还应该取回值（布尔值、整数、字符串）并专门处理它们。
它还应该适用于较低/wifi带宽的android，并且没有任何特殊要求，例如在防火墙上打开额外的端口等。
哪种方法最适合我的需求？我应该深入研究哪种技术？
休息是要走的路吗？

# ios - UIImageView 在调用 sizeToFit 后溢出其包含的 UIView

> ID：11848096
> 
> 赞同：0
> 
> 时间：2012-08-07T14:23:51.943
> 
> 标签：ios, uiview, uiimageview, sizetofit

我的`UIView`（宽度：352 像素）有一个`UIImageView`子视图（故事板中的默认宽度：312 像素）。
我希望`UIImageView`自己适应它包含的图像的尺寸，并限制图像视图的宽度不应超过最大宽度尺寸（在我的情况下为 312px）。
我将我的“自动调整大小”配置设置`UIImageView`为具有固定的左侧、顶部和右侧边距大小。然而，当我调用`sizeToFit`我的`UIImageView`并且它的图像大于 352 像素时，它`UIImageView`会比它包含的 UIView 更宽。
有没有一种方便的方法来防止这种行为，而无需根据图像尺寸进行数学计算？我使用`sizeToFit`正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-28T18:43:38.097

只需使用 setClipsToBounds：

```
[imageView setClipsToBounds:YES]; 
```

# r - R：While循环输入

> ID：11848097
> 
> 赞同：0
> 
> 时间：2012-08-07T14:23:55.203
> 
> 标签：r, input, while-loop

我对 R 有点陌生，并且对我正在尝试编写的程序有疑问。我希望通过一个while循环（最终在每个文件上使用read.table）来接收文件（用户喜欢多少），但它一直在困扰着我。这是我到目前为止所拥有的：

```
cat("Please enter the full path for your files, if you have no more files to add enter 'X': ")
fil<-readLines(con="stdin", 1)
cat(fil, "\n")
while (!input=='X' | !input=='x'){
inputfile=input
input<- readline("Please enter the full path for your files, if you have no more files to add enter 'X': ")
}
if(input=='X' | input=='x'){
exit -1
} 
```

当我（从命令行（UNIX））运行它时，我得到以下结果：

```
> library("lattice")
> 
> cat("Please enter the full path for your files, if you have no more files to add enter 'X': ")
Please enter the full path for your files, if you have no more files to add enter 'X': > fil<-readLines(con="stdin", 1)
x
> cat(fil, "\n")
x 
> while (!input=='X' | !input=='x'){ 
+ inputfile=input
+ input<- readline("Please enter the full path for your files, if you have no more files to add enter 'X': ")
+ }
Error: object 'input' not found
Execution halted 
```

我不太确定如何解决这个问题，但我很确定这可能是一个简单的问题。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:33:55.323

当您第一次运行脚本输入时不存在。分配

```
input<-c() 
```

在你的 while 语句之前说或放在 `inputfile=input` 下面`input<- readline....`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:44:55.270

我不确定您的问题的根本问题是什么。可能是您输入的目录路径不正确。

这是我使用过几次的解决方案。它使用户更容易。基本上，您的代码不需要用户输入，它所需要的只是您对文件有一定的命名约定。

```
setwd("Your/Working/Directory") #This doesn't change
filecontents <- 1
i <- 1
while (filecontents != 0) {
    mydata.csv <- try(read.csv(paste("CSV_file_",i,".csv", sep = ""), header = FALSE), silent = TRUE)
    if (typeof(mydata.csv) != "list") { #checks to see if the imported data is a list
        filecontents <- 0   
    }
    else {
        assign(paste('dataset',i, sep=''), mydata)
        #Whatever operations you want to do on the files.  
        i <- i + 1
    }
} 
```

如您所见，文件的命名约定`CSV_file_n`是`n`任意数量的输入文件（我从我的一个程序中取出这段代码，我在其中加载了 csv）。我一直遇到的问题之一是`Error`当我的代码查找不存在的文件时弹出消息。有了这个循环，这些消息就不会出现。如果它将一个不存在的文件的内容分配给`mydata.csv`，它只是检查是否`mydata.csv`是一个列表。如果是，它会继续运行。如果没有，它就会停止。如果您担心在代码中区分来自不同文件的数据，只需将有关文件的任何相关信息插入文件本身的恒定位置即可。例如，在我的 csv 中，我的第 3 列始终包含图像的名称，我从中收集了其余 csv 中包含的信息。

希望这对您有所帮助，即使我看到您已经有了解决方案:-)。如果您希望程序更加自主，这实际上只是一种选择。

# ubuntu - ubuntu 上的 turbo prolog

> ID：11848098
> 
> 赞同：3
> 
> 时间：2012-08-07T14:24:01.137
> 
> 标签：ubuntu, installation, turbo-prolog, visual-prolog

我是 Prolog 的菜鸟。我希望安装`turbo prolog`在 ubuntu 中。我怎么做。我用谷歌搜索了它，但一切都是徒劳的。`turbo prolog`ubuntu还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:34:56.770

您应该搜索视觉序言： http: [//www.visual-prolog.com/](http://www.visual-prolog.com/)

也就是说，我将[swi-prolog](http://www.swi-prolog.org/)与 emacs 一起使用，我发现它非常好。如果你已经熟悉 emacs，你应该考虑一下。在 swi-prolog 页面上有一个关于[使用 swi 和 emacs](http://www.swi-prolog.org/FAQ/GnuEmacs.html)的详细指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:04:26.680

您可以在 ubuntu 下逐步安装 turboprolog。

[http://ubuntuforums.org/showthread.php?t=1653742](http://ubuntuforums.org/showthread.php?t=1653742)

但我建议您使用 SWI-prolog 或 XSB prolog，因为您可以看到 turbo prolog 仅在 DOS 中有效，因此您需要 DOSBox 仿真器……所有这些都太复杂了。只需使用 SWI-prolog 或 XSB prolog-更容易安装。

# jquery - jquery：切换和css显示状态

> ID：11848099
> 
> 赞同：1
> 
> 时间：2012-08-07T14:24:05.813
> 
> 标签：jquery, toggle

我有一个 div，它使用 'fast' 使用 jquery 的切换方法隐藏/显示。切换发生后，我立即记录切换的 div 的 css 显示状态，如果它从显示变为隐藏，则状态显示为“块”...

但根据 jquery 文档，它现在应该是“无”：

当提供持续时间时， .toggle() 成为动画方法。.toggle() 方法同时为匹配元素的宽度、高度和不透明度设置动画。当这些属性在隐藏动画后达到 0 时，显示样式属性设置为 none，以确保元素不再影响页面的布局。

```
$(this).parents('#accordionContainer').find('div.accordionContent').toggle('fast');
    console.log($(this).parents('#accordionContainer').find('div.accordionContent').css('display')); 
```

我的控制台日志输出：

堵塞

jquery....min.js（第 162 行）

编辑：只是在这里大声思考，但想知道我是否需要在切换和显示检查之间进行 setTimeout，可能需要 1 秒左右？更好的是，切换是否返回 isFinished 消息或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:28:50.320

“立即”调用切换，该方法正在异步动画。由于它正在调整宽度和高度来执行动画，因此必须将 CSS 声明为 display:block。动画完成后，CSS 应该会像您期望的那样显示：无。

您可以通过向 toggle() 函数提供回调参数来在动画完成后调用一段代码。例如：

```
$(this).parents('#accordionContainer').find('div.accordionContent').toggle('fast', 
    function() {
        // This is called when the toggle animation is complete
        console.log( $(this).parents('#accordionContainer').find('div.accordionContent').css('display'));
    }
); 
```

在 JSFiddle 中：http: [//jsfiddle.net/Ggfe4](http://jsfiddle.net/Ggfe4)

# objective-c - 多线程函数的异步触发器从 CGPath 创建图像

> ID：11848100
> 
> 赞同：1
> 
> 时间：2012-08-07T14:24:06.283
> 
> 标签：objective-c, ios, multithreading, cgpath

这里有一个综合问题。

如何产生一个线程来执行绘制核心图形代码的函数？安全吗？我有一个异步回调，当函数完成时将在我的代码中调用它，然后我想生成一个新线程来执行一个函数。

该函数将创建一个 CGPath 并将其上下文存储到 UIImage 中。是否需要将实际路径呈现给视图，或者是否可以省略绘制语句并将上下文放入 UIImage？

我会将生成的图像作为 plist 中的 NSData 保存到文档目录中的文件夹中，可以将文件从各种线程（仍然是不同的文件）写入目录吗？

# asp.net - asp.net c# aspx if 语句不起作用

> ID：11848102
> 
> 赞同：0
> 
> 时间：2012-08-07T14:24:13.130
> 
> 标签：asp.net

我做了一些 asp 编程，但没有使用过 asp.net 或 aspx 脚本。我正在尝试创建一个脚本，如果未设置 cookie，它将发送一个 html 文件，但如果是，则发送一个 pdf。我不断收到运行时错误。

这是我的代码：

```
<%@ Page Language="C#" %>
<%
HttpCookie mycookie = Request.Cookies["CHECK"];
if (mycookie.Value == ""){
 Response.ContentType = "text/html";
 Response.Clear();
 Response.TransmitFile("forbidden.html");
 Response.End();
}
else
{
 Response.ContentType = "application/pdf";
 Response.Clear();
 Response.TransmitFile("test.pdf");
 Response.End();        
}
%> 
```

我已经测试了 html 和 pdf 的响应代码块，它们都可以正常工作并将文件发送到浏览器。我添加了使用 cookie 信息设置 mycookie 的行，它仍然有效。添加 if 逻辑时，出现运行时错误。

有人可以告诉我我做错了什么吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:31:02.083

如果`Cookies["CHECK"]`未设置，`mycookie`则为`null`。因此，您可能会得到一个`NullReferenceException`.

尝试以下操作：

```
if (mycookie == null || String.IsNullOrEmpty(myCookie.Value))) {
    // ...
} else {
    // ...
} 
```

欢迎来到 Stackoverflow。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:34:45.870

您需要检查 mycookie 是否为空。

尝试类似：

```
if (mycookie == null || String.IsNullOrEmpty(mycookie.Value)){ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T14:42:16.577

我的意思是，更好的是：

```
 <%@ Page Language="C#" %>
<%
HttpCookie mycookie = Request.Cookies["CHECK"];
if ((mycookie != null) && (mycookie.Value == "")) {
 Response.ContentType = "text/html";
 Response.Clear();
 Response.TransmitFile("forbidden.html");
 Response.End();
}
else
{
 Response.ContentType = "application/pdf";
 Response.Clear();
 Response.TransmitFile("test.pdf");
 Response.End();        
}
%> 
```

# php - 存储 LDAP 连接并在会话中绑定

> ID：11848103
> 
> 赞同：4
> 
> 时间：2012-08-07T14:24:13.457
> 
> 标签：php, ldap, session-variables

我编写了一个应用程序，其中用户通过 LDAP 进行身份验证和登录。这真的很好用，我只是`ldap_bind()`用他们的凭据做一个，如果它是真的然后验证他们 - 否则，告诉他们吊起来。我可以将他们的用户名保存在会话变量中，这样我就知道他们是谁了。

现在，应用程序的一部分要求用户搜索 LDAP 以查找其他用户。我已经使用[`jquery-autocomplete`](http://code.google.com/p/jquery-autocomplete/)并[`ldap_search()`](http://php.net/manual/en/function.ldap-search.php)实现了这一点，它运行得非常好——用户只需输入用户名、名字或姓氏，所有可能的匹配项都会被建议。迷人的 ：）

但是，企业 IT 甚至不允许匿名浏览网络中的目录，因此，现在，我将用户名和密码存储在其中，`$_SESSION`以便每次调用自动完成脚本时都可以进行新的绑定。我知道它*相当*安全，而且该工具只是内部的，但这感觉像是我不应该真正做的事情，如果它被“释放到野外”绝对不会做。

我想做的是在他们登录时创建与 LDAP 的绑定，然后以某种方式在整个会话中记住此身份验证，因此我们可以根据需要进行尽可能多的搜索，而不必每次都重新进行身份验证。我无法访问服务器，所以我无法更改那里的任何内容。我可以以某种方式存储成功的绑定并重`$_SESSION`用它吗？

如果这不是相对简单，是否有人对如何实施有任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:31:54.560

您不能序列化资源类型（这是 ldap_connect() 返回的）。

我们在类似情况下所做的是使用一个特定的 LDAP 帐户，该帐户仅在 LDAP 树上具有搜索权限（以及特定类型的数据，如姓名、姓氏、电子邮件），没有别的。此用户的帐户凭据存储在数据库中。

也许要应用第二级安全性，您可以允许该用户仅从特定 IP 连接（我认为 LDAP 服务器支持这一点，但我不是 100% 确定）。因此，即使凭据被泄露，它们实际上也毫无用处

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:31:42.270

*   与 LDAP 兼容服务器的初始连接是匿名的
*   成功的 BIND 请求会更改连接的身份验证状态
*   不成功的 BIND 请求（或具有零长度 DN 和密码的 BIND 请求）会将身份验证状态重置为匿名。

因此，一旦连接通过身份验证，直到处理成功的 BIND 请求，连接将保持其身份验证状态。这意味着连接可以保持打开状态，并且可以在连接上传输操作，直到服务器或客户端关闭连接。

请注意，符合 LDAP 的服务器可以选择发送不是对客户端请求的响应的主动通知。现代、专业品质的服务器将使用这种机制来通知客户端连接正在被服务器关闭，无论出于何种原因。

简而言之，保持连接并继续使用它。更好的是，建立一个与服务器连接的身份验证池。

更新：

与符合 LDAP 的服务器的连接可以保持打开状态，并且可以用于客户端希望（并且服务器允许）的任意数量的事务（请求-响应对）。LDAP 允许每个连接进行多个事务，也允许异步连接。

# unix - 我想使用 grep 显示匹配后的行内容

> ID：11848112
> 
> 赞同：0
> 
> 时间：2012-08-07T14:24:39.057
> 
> 标签：unix

我在下面的日志文件中有内容：

```
Aug 02 22:01:18.0937 CDT Thread-4-610399 java.lang.IllegalStateException: perfdb_connectstring was not found in the supplied property file(s). 
```

我希望`java.lang.IllegalStateException: perfdb_connectstring was not found`使用 grep 命令将输出放在提供的属性文件中。

请尽可能尽快回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:39:10.590

你真的需要使用'grep'吗？如果日志文件总是有这种格式，也许你应该使用 'cut'

```
cut -d" " -f6- file.log 
```

它将准确地输出您想要标准输出的内容：

```
java.lang.IllegalStateException: perfdb_connectstring was not found in the supplied property file(s). 
```

# php - 使用 preg_match 和 str replace 查找单词并突出显示

> ID：11848115
> 
> 赞同：0
> 
> 时间：2012-08-07T14:24:44.617
> 
> 标签：php, preg-match, str-replace

这是我的代码..

```
<?php
    // first get all the html contents

    $page = file_get_contents('http://www.planetled.com.au/blog/what-is-a-led-spotlight/');

    //next explode it
    $words = explode(" ", $page);

    // then display the 21st word or any word you like
    echo $words[22]; // 21st word
?> 
```

我接下来想要的是找到第 21 个人类可读的单词。我正在考虑使用`preg_match`来查找单词然后使用`str_replace`，但我缺少的是我将在 preg_match 中使用什么模式？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:48:14.037

这里的问题是您所引用的页面将返回该站点的 HTML 内容......所以它不会是第 21 个人类可读的单词......但是您可以通过以下方式突出显示它！我不确定 str_replace 中 $words[20] 的双重声明，但它有效。会有人来指正的...

```
str_replace($words[20], "<span style='background-color:yellow'>$words[20]</span>", $words[20]); 
```

# c# - Convert YYYYMMDD string to MM/DD/YYYY string

> ID：11848122
> 
> 赞同：4
> 
> 时间：2012-08-07T14:25:30.773
> 
> 标签：c#, datetime

I have a date that is stored as a string in the format YYYYDDMM. I would like to display that value in a 'MM/DD/YYYY' format. I am programming in c#. The current code that I am using is as follows:

```
txtOC31.Text = dr["OC31"].ToString().Trim();
strOC31date = dr["OC31DATE"].ToString().Trim();
DateTime date31 = DateTime.Parse(strOC31date);
strOC31date = String.Format("{0:MM/dd/yyyy}", date31); 
```

However, I am getting an error because the YYYYMMDD string (strOC31date) is not being recognized as a valid datetime.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-07T14:31:06.510

DateTime.ParseExact with an example

```
string res = "20120708";
DateTime d = DateTime.ParseExact(res, "yyyyddMM", CultureInfo.InvariantCulture);
Console.WriteLine(d.ToString("MM/dd/yyyy")); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-07T14:28:06.370

Use `ParseExact()` ([MSDN](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)) when the string you are trying to parse is not in one of the standard formats. This will allow you to parse a custom format and will be slightly more efficient (I compare them in a blog post [here](http://blackrabbitcoder.net/archive/2012/01/05/c.net-little-wonders-the-datetime-tryparse-and-parseexact-methods.aspx)).

```
DateTime date31 = DateTime.ParseExact(strOC31date, "yyyyMMdd", null); 
```

Passing `null` for the format provider will default to `DateTimeFormatInfo.CurrentInfo` and is safe, but you probably want the invariant culture instead:

```
DateTime date31 = DateTime.ParseExact(strOC31date, "yyyyMMdd", DateTimeFormatInfo.InvariantInfo); 
```

Then your code will work.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T14:27:44.860

Instead of `DateTime.Parse(strOC31date);` use `DateTime.ParseExact()` method, which takes format as one of the parameters.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-07T14:28:23.577

You want the method [DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx).

```
DateTime date31 = DateTime.ParseExact(strOC31date, "yyyyddMM", CultureInfo.InvariantCulture); 
```

# iphone - UILabel 多组值

> ID：11848124
> 
> 赞同：0
> 
> 时间：2012-08-07T14:25:46.770
> 
> 标签：iphone, ios, xcode, xcode4

我知道这听起来像是一个微不足道的问题，但我在 *.h 文件中定义了 50 个标签

```
UILabel *tempLabel1;
UILabel *tempLabel2;
UILabel *tempLabel3;
...
UILabel *tempLabel50; 
```

在我的 *.c 文件中，我想为每个标签设置值，但我不想手动执行或一遍又一遍地写出来。

```
//Instead of doing this
tempLabel1.text = @"1";
tempLabel2.text = @"2";
...
tempLabel50.text = @"50";   

//I would like to do something like this
//I know this isn't correct syntax but want to know if something like
//this can be done?
for (int i = 0; i < 50; i++) 
{
    tempLabel[i].text = @"%d", i+1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:00:04.613

想到的一种方法（不是最干净的方法，而是一种方法）是执行以下操作：

```
UILabel *tempLabels[50]; 
```

您遇到的问题是您无法使用 IB 连接它们。相反，您所做的是在每个标签中使用**标签**属性（这意味着您需要为所有 50 个 UILabel 设置标签）。要正确连接它们，请在 viewDidLoad 中运行：

```
for (index = 1; index < 50; ++index)
{
    tempLabels[index] = (UILabel *) [self.view viewWithTag: index];
} 
```

答对了！现在，如果您需要更改代码中的任何位置，您可以执行以下操作：

```
for (index = 1; index < 50; ++index)
{
    tempLabels[index].text = [NSString stringWithFormat: @"Number %d", index];
} 
```

设置标签有点乏味，但一旦你完成了，你就完成了。

顺便说一句，与其他解决方案不同，您可以使用 IB 来创建标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:51:50.980

我想这对你来说是一个好的开始。

```
NSMutableArray *_labels = [NSMutableArray array];

for (int i = 1; i < 50; i++) {
    UILabel *_newLabel = [[UILabel alloc] init]; // please, make the init method as you wish
    // ... any customization of the UILabel
    [_newLabel setText:[NSString stringWithFormat:@"%d", i]];
    [_newLabel setTag:i];
    [_labels addObject:_labels];
    [self.view addSubview:_newLabel];
}

// ... and then you can do the following

for (int i = 0; i < _labels.count; i++) {
    [((UILabel *)[_labels objectAtIndex:i]) setText:[NSString stringWithFormat:@"%d", i]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:48:19.147

您可以以编程方式添加 UILabel 并因此可以访问它们 - 因此您也可以设置它们的文本值。

您可以像这样添加 UILabel：

```
 UILabel *theLabel = [[UILabel alloc] initWithFrame:CGRectMake(50, 100, 200, 100)]; //need to calculate the x,y coordinates in dependency of i
    theLabel.text =  [NSString stringWithFormat:@"%i",i];
    [self.view addSubview:theLabel]; // add it to your view
    myLabel.backgroundColor = [UIColor clearColor]; // change the color 
```

如果您以后还需要访问标签，只需将它们添加到您保留的 NSArray 中。

# jquery - 单击自动完成后的焦点

> ID：11848127
> 
> 赞同：0
> 
> 时间：2012-08-07T14:25:48.933
> 
> 标签：jquery, asp.net-mvc

我有一个文本输入，它自动完成连接到数据库中的城市列表。我想知道一旦用户从自动完成中单击某些内容，我怎么能集中注意力。我正在使用 MVC 4，因此它使用我创建的名为 Quicksearch 的函数来检索与用户键入的内容一致的城市列表。

**HTML 代码**

```
@Html.TextBoxFor(x => x.CityName, new { @class="required", name="q", data_autocomplete = @Url.Action("QuickSearch", "Booking")}) 
```

**Javascript**

```
$(document).ready(function () {
    $(":input[data-autocomplete]").each(function () {
        $(this).autocomplete({ source: $(this).attr("data-autocomplete")});
    });
}); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:32:18.090

使用 select 事件，附加代码以模糊焦点：

```
$(document).ready(function () {
    $(":input[data-autocomplete]").each(function () {
        $(this).autocomplete({ 
            source: $(this).attr("data-autocomplete"),
            select: function(event, ui) { 
                $(this).blur(); 
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:30:30.923

你可以尽快做某事

`$('body').focus();`或者`$(this).blur();`

# gcc - 使用 g++ 而不是 gcc 编译时出现编译错误

> ID：11848130
> 
> 赞同：0
> 
> 时间：2012-08-07T14:26:07.123
> 
> 标签：gcc, g++

我有一个函数，当使用 gcc 编译时工作正常，但是当我使用 g++ 编译它时，它给了我这个错误：

bon_io.cpp:In function 'lruc_item* lruc_pop_or_create_item(lruc*)': bon_io.cpp:4751: error: invalid conversion from 'void*' to 'lruc_item*'</p>

代码：

```
typedef struct {
void      *value;
void      *key;
uint32_t  value_length;
uint32_t  key_length;
uint64_t  access_count;
void      *next;
} lruc_item;

lruc_item* lruc_pop_or_create_item(lruc *cache1) 
{
  lruc_item *item = NULL;

  if(cache1->free_items) {
  item = cache1->free_items;
  cache1->free_items = item->next;                     [LINE 4751]
   } else {
  item = (lruc_item *) calloc(sizeof(lruc_item), 1);
   }

  return item;
} 
```

我正在尝试将此函数与 c++ 代码一起使用，这就是为什么需要使用 g++ 编译它的原因，如果我使用 gcc 而不是使用 g++ 编译它，它可以正常工作。

任何人都可以建议我使用 g++ 完成这项工作吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:28:29.027

怎么样：

```
cache1->free_items = (lruc_item *) item->next; 
```

> 但是为什么它使用gcc完美编译并给我g ++错误

因为在 C++ 中，您不能自动转换`void *`为另一种指针类型。

# java - buildr - 从 WSDL 位置编译 jar

> ID：11848131
> 
> 赞同：0
> 
> 时间：2012-08-07T14:26:12.690
> 
> 标签：java, ruby, continuous-integration, jruby, buildr

我正在使用带有 SOAP 的外部 API。

我想在 buildr 任务中，使用axis2（因为我用Java编写）从WSDL远程位置自动创建Web服务客户端的jar，并将其添加到war中进行编译。

这样我就可以知道如果 WSDL 发生了更改，我是否需要更改代码。

我怎样才能在构建器中做到这一点？

这是我当前的代码：

```
desc 'Building API project'
    define 'API' do
        compile.with projects('common'),AMAZON,ACTIVATION,ANTLR,AOPALLIANCE,ASM,ASPECTJ,AXIS,BRAINTREE,C3P0,BEANUTILS,COLLECTIONS,COMMONS_CODEC,DISCOVERY,HTTPCLIENT,COMMONS_IO,LANG,LOGGING,VALIDATOR,DAO,DAOHIBERNATE,DOM4J,EHCAHCE,GUAVA,
        package(:war).with :libs=>project('common')
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:36:02.387

您需要创建一个从 wsdl 自动生成客户端类的任务，然后将这些生成的类包含在您的项目中。

您可以直接构建一个 jar 并将其作为依赖项添加到您的列表中，或者直接将这些类链接到您的编译步骤。

这是 WSDL2Java 命令行实用程序的文档，您可以使用它：[http ://axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html#adb](http://axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html#adb)

即使这可能对您的特定问题没有帮助，但请查看 buildr-examples 存储库：[https ://github.com/phoet/buildr-examples](https://github.com/phoet/buildr-examples)

# android - 有没有办法在android任务切换器中更改应用程序的缩略图（长按主页按钮）

> ID：11848132
> 
> 赞同：3
> 
> 时间：2012-08-07T14:26:13.803
> 
> 标签：android, thumbnails

有没有办法隐藏/屏蔽任务切换器中提出的活动的缩略图？通过任务切换器，我的意思是长按主页按钮显示活动应用程序的菜单。

提前致谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T15:09:03.727

您可以覆盖[Activity.onCreateThumbnail()](http://developer.android.com/reference/android/app/Activity.html#onCreateThumbnail%28android.graphics.Bitmap,%20android.graphics.Canvas%29)来执行此操作。

# wpf - 添加行后如何将键盘焦点设置为添加行

> ID：11848133
> 
> 赞同：0
> 
> 时间：2012-08-07T14:26:15.390
> 
> 标签：wpf, infragistics, xamdatagrid

我`XamDataGrid`在 WPF 应用程序中有一个（版本 2011.2），当用户从“添加新”行中选择关闭时，我需要将焦点返回到“添加新”行的第一个单元格，以便他们可以输入另一条记录，默认行为将焦点放在刚刚添加的记录上。

我试图用它`DataPresenterCommands`来移动焦点或找到一种设置方法，`myGrid.Records.DataPresenter.ActiveCell`但没有任何成功。

[我需要与此问题](https://stackoverflow.com/questions/2645027/wpf-datagrid-how-to-move-keyboard-focus-to-newly-added-row-after-tab-press)中提到的相同的功能，但对于 Infragistics 的 XamDataGrid。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:52:03.037

感谢Infragistics 支持论坛上的[Yanko Nikolov](http://www.infragistics.com/community/forums/p/72483/367018.aspx#367018)寻找解决方案（我在寻找答案时不知何故错过了）。

解决方案是将此代码添加到数据网格的预览按键按下事件中。

```
private void xamDataGrid1_PreviewKeyDown(object sender, KeyEventArgs e)
{
     if (e.Key == Key.Enter)
     {
         Dispatcher.BeginInvoke(new Action(() =>
         {
             CellValuePresenter.FromCell(xamDataGrid1.RecordManager.CurrentAddRecord.Cells[0]).Editor.StartEditMode();
         }), DispatcherPriority.Background, null);
     }         
} 
```

# .net - 如何在 ASP.NET Web Api 中对动作过滤器进行单元测试？

> ID：11848137
> 
> 赞同：56
> 
> 时间：2012-08-07T14:26:29.713
> 
> 标签：.net, unit-testing, asp.net-web-api, action-filter

我希望在我的服务中添加一个操作过滤器，以处理将链接数据添加到响应消息中。我发现我需要模拟 HttpActionExecutedContext 但这是一个很难模拟的类，你如何处理动作过滤器测试？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-07T18:15:01.787

您可以创建一个假的`HttpActionExecutedContext`如下：

```
public static HttpActionContext CreateActionContext(HttpControllerContext controllerContext = null, HttpActionDescriptor actionDescriptor = null)
{
    HttpControllerContext context = controllerContext ?? ContextUtil.CreateControllerContext();
    HttpActionDescriptor descriptor = actionDescriptor ?? new Mock<HttpActionDescriptor>() { CallBase = true }.Object;
    return new HttpActionContext(context, descriptor);
}

public static HttpActionExecutedContext GetActionExecutedContext(HttpRequestMessage request, HttpResponseMessage response)
{
    HttpActionContext actionContext = CreateActionContext();
    actionContext.ControllerContext.Request = request;
    HttpActionExecutedContext actionExecutedContext = new HttpActionExecutedContext(actionContext, null) { Response = response };
    return actionExecutedContext;
} 
```

我刚刚从 ASP.NET Web API 源代码中复制并粘贴了该代码：[ContextUtil](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/98d041ae352f#test/System.Web.Http.Test/Util/ContextUtil.cs)类。以下是一些关于他们如何测试一些内置过滤器的示例：

*   [授权属性测试](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/98d041ae352f#test/System.Web.Http.Test/AuthorizeAttributeTest.cs)

*   [ActionFilterAttributeTest](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/98d041ae352f#test/System.Web.Http.Test/Filters/ActionFilterAttributeTest.cs)

`ActionFilterAttributeTest`是测试类，`ActionFilterAttribute`它是一个抽象类，但你会明白的。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-12-17T14:30:52.143

刚上新的。

```
private HttpActionContext CreateExecutingContext()
{
    return new HttpActionContext { ControllerContext = new HttpControllerContext {   Request = new HttpRequestMessage() } };
}

private HttpActionExecutedContext CreateExecutedContextWithStatusCode(HttpStatusCode statusCode)
{
    return new HttpActionExecutedContext
    {
        ActionContext = new HttpActionContext
        {
            ControllerContext = new HttpControllerContext
            {
                Request = new HttpRequestMessage()
            }
        },
        Response = new HttpResponseMessage
        {
            StatusCode = statusCode,
            Content = new StringContent("blah")
        }
    };
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-07-11T16:16:02.880

在尝试测试我构建的自定义未处理异常过滤器时，我遇到了同样的问题。

这成功了。大量的更新和很长的代码行。

```
var httpActionExecutedContext = new HttpActionExecutedContext(
    new HttpActionContext(
        new HttpControllerContext(
            new HttpConfiguration(),
            Substitute.For<IHttpRouteData>(),
            new HttpRequestMessage()),
    Substitute.For<HttpActionDescriptor>()),
    null); 
```

使用了 NSubstiute，但您选择的任何处理抽象基类的模拟框架都可以。

希望这可以帮助

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-24T12:31:52.093

我也一直在用头撞砖墙。我尝试[了 contextUtil](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/98d041ae352f#test/System.Web.Http.Test/Filters/ActionFilterAttributeTest.cs)但不断收到空引用异常。[我在这篇文章](https://stackoverflow.com/questions/21152777/unit-test-webapi2-passing-header-values)中找到了如何调用 actionFilter NB 使用过滤器的 Mock 实例时没有调用 actionFilter，我必须使用真实对象。高温高压

具体来说：

```
var httpActionContext = new HttpActionContext
{
    ControllerContext = new HttpControllerContext
    {
        Request = requestMessage
    }
};

//call filter
var filter = new FooFilter();
filter.OnActionExecuting(httpActionContext); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-01-18T16:36:19.380

参考[https://stackoverflow.com/a/44447349/5547177](https://stackoverflow.com/a/44447349/5547177)

您可以使用以下内容自己创建 HTTPActionContext：

```
 _ctx = new HttpActionContext
        {
            ControllerContext = new HttpControllerContext()
            {
                Request = new HttpRequestMessage()

            }
        };
        _ctx.Request.Properties[System.Web.Http.Hosting.HttpPropertyKeys.HttpConfigurationKey] = new HttpConfiguration(); 
```

诀窍是没有 Request.Properties 条目设置，它将显示以下错误：

> 请求没有关联的配置对象或提供的配置为空。

这可能是设计者的疏忽，因为您可以在 HTTPActionContext 构造函数中设置 HTTPConfiguration！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-18T02:36:25.663

这是 2018 年的一个工作示例（.NET Framework 4.5.1）。它使用 ExceptionFilterAttribute，但对于其他 FilterAttributes 应该是类似的。

```
[Test]
public void MyTest()
{
    var request = new HttpRequestMessage(HttpMethod.Get, new Uri("http://www.google.com"));
    var response = new HttpResponseMessage();

    // This next line is necessary to avoid the following error
    // if you call `context.Request.CreateResponse(...)` inside the filter:
    // System.InvalidOperationException: The request does not have an associated configuration object or the provided configuration was null.
    // Discovered from https://stackoverflow.com/a/44447355/3312114
    request.SetConfiguration(new HttpConfiguration());

    var context = ContextUtil.GetActionExecutedContext(request, response);

    _myFilter.OnException(context); // Execute your methods

    Assert.AreEqual(HttpStatusCode.InternalServerError, context.Response.StatusCode); // Make your assertions
} 
```

然后只需将 ContextUtil 类复制到您的测试项目中的某个地方。@thomasb 对 @tugberk 的回答的评论表明最新的代码[在 Codeplex 上](https://aspnetwebstack.codeplex.com/SourceControl/latest#test/System.Web.Http.Test/Util/ContextUtil.cs)。虽然该评论是在 2014 年，所以甚至可能会有以后的代码，但 2014 年的代码对我有用（2018 年 1 月），而原始链接代码却没有。为方便起见，我复制了下面的更高版本。只需将其放入一个新文件中即可。

```
internal static class ContextUtil
{
    public static HttpControllerContext CreateControllerContext(HttpConfiguration configuration = null, IHttpController instance = null, IHttpRouteData routeData = null, HttpRequestMessage request = null)
    {
        HttpConfiguration config = configuration ?? new HttpConfiguration();
        IHttpRouteData route = routeData ?? new HttpRouteData(new HttpRoute());
        HttpRequestMessage req = request ?? new HttpRequestMessage();
        req.SetConfiguration(config);
        req.SetRouteData(route);

        HttpControllerContext context = new HttpControllerContext(config, route, req);
        if (instance != null)
        {
            context.Controller = instance;
        }
        context.ControllerDescriptor = CreateControllerDescriptor(config);

        return context;
    }

    public static HttpActionContext CreateActionContext(HttpControllerContext controllerContext = null, HttpActionDescriptor actionDescriptor = null)
    {
        HttpControllerContext context = controllerContext ?? ContextUtil.CreateControllerContext();
        HttpActionDescriptor descriptor = actionDescriptor ?? CreateActionDescriptor();
        descriptor.ControllerDescriptor = context.ControllerDescriptor;
        return new HttpActionContext(context, descriptor);
    }

    public static HttpActionContext GetHttpActionContext(HttpRequestMessage request)
    {
        HttpActionContext actionContext = CreateActionContext();
        actionContext.ControllerContext.Request = request;
        return actionContext;
    }

    public static HttpActionExecutedContext GetActionExecutedContext(HttpRequestMessage request, HttpResponseMessage response)
    {
        HttpActionContext actionContext = CreateActionContext();
        actionContext.ControllerContext.Request = request;
        HttpActionExecutedContext actionExecutedContext = new HttpActionExecutedContext(actionContext, null) { Response = response };
        return actionExecutedContext;
    }

    public static HttpControllerDescriptor CreateControllerDescriptor(HttpConfiguration config = null)
    {
        if (config == null)
        {
            config = new HttpConfiguration();
        }
        return new HttpControllerDescriptor() { Configuration = config, ControllerName = "FooController" };
    }

    public static HttpActionDescriptor CreateActionDescriptor()
    {
        var mock = new Mock<HttpActionDescriptor>() { CallBase = true };
        mock.SetupGet(d => d.ActionName).Returns("Bar");
        return mock.Object;
    }
} 
```

# objective-c - 淡化 UIView 和切换 UIView

> ID：11848140
> 
> 赞同：2
> 
> 时间：2012-08-07T14:26:32.957
> 
> 标签：objective-c, iphone, cocoa-touch, animation, uiview

这就是我从一个 UIView 切换到另一个 UIView 的方式：`self.view = MyView;` 如何将视图淡出到我的`MySecondView`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T14:34:59.123

您可以使用 UIView 的内置过渡代码在它们之间交叉溶解。

```
[UIView transitionFromView:self.view toView:MySecondView duration:0.25 options:UIViewAnimationOptionTransitionCrossDissolve completion:^(BOOL finished) {
    // What to do when its finished.
}]; 
```

您还可以将常规动画选项与此类一起使用。我没有测试过这段代码，因为我不在 Xcode 前面，但我一直将它用于标签和没有默认动画的东西。

```
[UIView animateWithDuration:0.25 animations:^{
    [self.view setAlpha:0.0];
    self.view = mySecondView;
    [self.view setAlpha:1.0];
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T14:41:27.890

请注意，执行 self.view = MyView 之类的操作来更改屏幕并不是一个好主意。当您到达几个屏幕时，您的 viewController 将充满意大利面条式代码。您应该考虑提供管理其视图的新视图控制器。您可以进行淡入淡出的一种方法如下：

*   将当前视图淡化为黑色（带动画）
*   在您要推送的视图控制器中，使用 viewWillAppear 也可以将视图淡化为黑色
*   推送/呈现不带动画的视图控制器。
*   现在使用新呈现的视图控制器的 viewDidAppear 方法来淡入视图（带有动画）。

# php - 正则表达式 preg_match PHP

> ID：11848141
> 
> 赞同：1
> 
> 时间：2012-08-07T14:26:44.533
> 
> 标签：php, regex

我正在尝试获取两个大括号或**Smarty**标签之间的内容。我只想用 smarty 函数获取变量，忽略`if`'s 等。

以下是示例字符串标签：

`{{$variable|lower}}`[应该匹配]

`{{$variable|escape:javascript}}`[应该匹配]

`{{$variable|str_replace:"search":"replace"}}`[应该匹配]

`{{if $test eq "test"}}`[不应**匹配**]

`{{section name=foo start=10 loop=20 step=2}}`[不应**匹配**]

如果我这样做

```
preg_match_all('/{{\$?(\w+?[\W\w]*?)}}/',$str,$matches) 
```

它得到括号内的所有内容。

```
preg_match_all('/{{\$?(\w+?\W*?\w*?)}}/',$str,$matches); 
```

这只会得到“变量|转义”。

请帮助正确的正则表达式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:31:40.990

使用这个正则表达式`\{\{.*?\|.*.+?\}\}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:39:05.117

我可能是错的，但不会简单地：

```
preg_match_all('/\{\{(\$[^|]+)\|[^}]+\}\}/',$str,$matches); 
```

做的伎俩，哪里`$matches[1]`将保存变量。如果文件包含回车符（windows'\r\n），请尝试`'/\{\{(\$[^|]+)\|[^}]+\}\}/s'`使用`s`修饰符

包括以下匹配：`{{$var}}`

```
//{{$var|foo}} {{$varbar}} bar  as test string
preg_match_all('/\{\{(\$[^|}]+)(\|[^}]+|)\}\}/s',$str,$matches);
//shorter still:
preg_match_all('/\{\{(\$[^|}]+)\|?[^}]*\}\}/s',$str,$matches); 
```

返回：

```
array (
  0 => 
  array (
    0 => '{{$var|foo}}',
    1 => '{{$varbar}}',
  ),
  1 => 
  array (
    0 => '$var',
    1 => '$varbar',
  ),
  2 => //not in the array when using the second pattern
  array (
    0 => '|foo',
    1 => '',
  ),
) 
```

# ruby-on-rails - Ruby on Rails：运算符

> ID：11848147
> 
> 赞同：0
> 
> 时间：2012-08-07T14:27:09.607
> 
> 标签：ruby-on-rails, ruby, search, operators

我的应用程序允许用户搜索许多不同的字段和日期以查找项目记录。目前，当您选择某个时间尺度时，即（从现在开始的 1 年），搜索会正确返回。当您使用相同的时间尺度和某些客户端再次搜索时，搜索会再次正确返回。当我尝试仅在客户端上搜索时，问题就出在此处。搜索没有返回结果，这是错误的。我确定这与我在搜索方法中的运算符有关：

```
def self.search(search_client, search_start_date_dd, search_start_date_A, search_start_date_B,  search_keywords) 
  return scoped unless search_client.present?  || search_start_date_dd.present?  || search_start_date_A.present?  || search_start_date_B.present?  || search_keywords.present?

todays_date = DateTime.now.to_date

if !search_start_date_A.blank? or !search_start_date_B.blank?
    search_start_date_A = Date.parse(search_start_date_A).strftime("%Y-%m-%d")
    search_start_date_B = Date.parse(search_start_date_B).strftime("%Y-%m-%d")
    todays_date = ""
    end

if search_start_date_dd.blank?
    todays_date = ""
end

  where(['client LIKE ? AND (DATE(start_date) BETWEEN ? AND ? OR DATE(start_date) BETWEEN ? AND ?) AND keywords LIKE ?', 
      "%#{search_client}%", search_start_date_dd, todays_date , search_start_date_A, search_start_date_B, "%#{search_keywords}%"
    ])

end 
```

我确定问题出在`'client LIKE ? AND (DATE(start_date) BETWEEN ? AND ? OR DATE(start_date) BETWEEN ? AND ?) AND keywords LIKE ?'`

希望有人能看到。提前致谢。只是为了让你知道我也是一个 Rails 菜鸟 :)

编辑：

这是我的搜索视图，因此您了解搜索的工作原理：

```
<h1>Search</h1>

<%# if @project_search.total_entries > 0 %>
<%= form_tag search_path, method: :get do %>

Client :
<%= select(@projects, :client, Project.all.map {|p| [p.client]}.uniq, :prompt => "-Any-", :selected => params[:client]) %></br>

Select start dates from:
<%= select_tag "start_date_dd", options_for_select({
    "Select a period" => "",
      "3 days ago"   => DateTime.now.to_date - 3.days,   # =    259_200 sec.
      "1 week ago"   => DateTime.now.to_date - 1.week,   # =    604_800 sec.
      "1 month ago"  => DateTime.now.to_date - 1.month,  # =  2_592_000 sec.
      "6 months ago" => DateTime.now.to_date - 6.months, # = 15_552_000 sec.
      "1 year ago"   => DateTime.now.to_date - 1.year,   # = 31_557_600 sec.
    }, :selected=>params[:start_date_dd] )%>

until now <%= l DateTime.now.to_date %>, or select project start dates between

<%=  text_field_tag :start_date_A, params[:start_date_A] %>

and

<%=  text_field_tag :start_date_B, params[:start_date_B] %>

Keywords :

<%= text_field_tag :keywords, params[:keywords] %></br>

<%= submit_tag "Search", name: nil %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:00:25.690

修复了我自己的问题：/

我刚刚添加了一个其他

```
def self.search(search_client, search_start_date_dd, search_start_date_A, search_start_date_B,  search_keywords) 
  return scoped unless search_client.present? || search_start_date_dd.present?  || search_start_date_A.present?  || search_start_date_B.present?  || search_keywords.present?

todays_date = DateTime.now.to_date

if !search_start_date_A.blank? or !search_start_date_B.blank?
    search_start_date_A = Date.parse(search_start_date_A).strftime("%Y-%m-%d")
    search_start_date_B = Date.parse(search_start_date_B).strftime("%Y-%m-%d")
    todays_date = ""
    end

if search_start_date_dd.blank?
    todays_date = ""
end

if (search_start_date_A.blank? or search_start_date_B.blank?) and search_start_date_dd.blank?

where(['client LIKE ? AND keywords LIKE ?', 
      "%#{search_client}%", "%#{search_keywords}%"
    ])

else

where(['client LIKE ? AND (DATE(start_date) BETWEEN ? AND ? OR DATE(start_date) BETWEEN ? AND ?) AND keywords LIKE ?', "%#{search_client}%", search_start_date_dd, todays_date , search_start_date_A, search_start_date_B, "%#{search_keywords}%"
    ])
end
end 
```

# objective-c - 应用内红色录音栏

> ID：11848150
> 
> 赞同：1
> 
> 时间：2012-08-07T14:27:17.683
> 
> 标签：objective-c, ios, statusbar

> **可能重复：**
> [iOS：脉冲红色双高状态栏](https://stackoverflow.com/questions/11319382/ios-pulsing-red-double-height-status-bar)

关于我所说的红色状态/录音栏的参考，请参阅语音备忘录应用程序 - 一旦录音开始，它就会显示出来，并用双粗的红色条代替状态栏。

![在此处输入图像描述](../Images/05502cf8d7fa191f23ae073a55210681.png)

通过将应用程序的背景状态标记为音频/VoIP 应用程序，我已经能够在应用程序进入后台时显示此栏。但是，当用户在应用程序中时，该栏不会出现 - 这是我真正想要实现的。Apple 的 Voice Memos 应用程序具有此功能，但我找不到任何有关如何执行此操作的文档。有谁知道这是否可行，还是我必须使用某种库/黑客？

# events - 如何判断用户是否可以邀请特定朋友参加活动

> ID：11848152
> 
> 赞同：0
> 
> 时间：2012-08-07T14:27:22.630
> 
> 标签：events, facebook-graph-api

图 api 允许您通过使用邀请多个朋友参加活动`POST EVENT_ID/invited?users=USER1,USER2,etc.`但是，如果**一个**朋友阻止该用户邀请他参加活动，

问题是它没有告诉你哪个朋友失败了。

因此，除非我们能找出哪个用户是违规用户，否则让多用户 POST 完全**无用。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:51:27.330

文档说（https://developers.facebook.com/docs/reference/api/event/#invited），

> 您可以通过向 /EVENT_ID/invited/USER_ID 发出 HTTP POST 来邀请用户参加活动。**您可以通过向 /EVENT_ID/invited?users=USER_ID1,USER_ID2,USER_ID3 发出 HTTP POST 来邀请多个用户。**这两个都需要 create_event 权限，**如果邀请成功则返回 true**。

那么具体是做什么的

> 但是，如果逗号分隔字符串中的一位朋友阻止此用户邀请他参加活动，则整个 POST 将失败

意思是在你的问题描述中——你是“只是”得到*错误*的答案，实际上是向其他用户发送请求——还是*没有*用户收到他们的邀请，即使他们中只有一个人阻止了邀请？

第一个结果会很烦人；第二个完全是错误恕我直言。

# jquery - 需要在 jquery 中获取图像属性为 kb 或 mb

> ID：11848153
> 
> 赞同：-3
> 
> 时间：2012-08-07T14:27:31.270
> 
> 标签：jquery, image, image-size

```
function attachPhoto() {
 var path="http://www.w3schools.com/images/pulpit.jpg";// i need to check size of image
 } 
```

单击时我有一个按钮，我正在获取图像的属性（以 kb 或 mb 为单位的大小）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:31:09.740

不，您无法使用 jQuery 获取图像大小。您将需要使用服务器端代码处理该文件。

# java - java通过telnet发送固件

> ID：11848157
> 
> 赞同：0
> 
> 时间：2012-08-07T14:27:42.720
> 
> 标签：java, android, networking, telnet

你好，我试图通过 telnet 将固件文件发送到调制解调器板。这是我的代码：

```
 Socket s = null;
    try {
                SocketAddress socketAddress = new InetSocketAddress(InetAddress.getByName(addr), 23);
                s = new Socket();
                s.connect(socketAddress, 1000);

        InputStream inputStream = s.getInputStream();
        OutputStream outputStream = s.getOutputStream();

        outputStream.write( (login + "\n") .getBytes());

        Thread.sleep(300);

        outputStream.write( (password + "\n") .getBytes());

        Thread.sleep(300);

                    outputStream.write(("swupdate" + "\n").getBytes());
                     Thread.sleep(300);                   

                      // Open the file that is the first
        // command line parameter
        FileInputStream fstream = new FileInputStream(path_frm_vdsl);
        // Get the object of DataInputStream
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String line;
        // Read File Line By Line
        while ((line = br.readLine()) != null) {
            // Print the content on the console
            line = br.readLine();
            if (line == null) {
                Thread.sleep(1000);
            } else {
                //System.out.println(line);
                outputStream.write(line.getBytes());
                Log.v("---", line.getBytes() + "" + consumeInput(500, inputStream));
                //Log.v("Update_Modem","Updated " + consumeInput(500, inputStream));
                //outputStream.write(line.getBytes());
                Thread.sleep(10);
            }
        } 
```

它只是登录发送 swupdate 命令并将固件文件转储到输出。在第一行输入之后，我遇到了 java.net.SocketException: Broken pipe 而且我无法一次读取所有文件，没有足够的内存异常。(3MB)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:43:42.670

你知道 telnet 使用信道内信令吗？数据流包含转义的命令指令。当您打开一个 telnet 连接时，一整套初始命令来回传递，因为服务器和客户端确定彼此的能力和偏好。

你很可能会发现你的字节流被破坏了，如果你只是拿你在服务器上出现的任何东西。您将需要遵守 telnet 协议，例如正确理解您正在接收的字节流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:28:17.887

Telnet 协议中的行终止符是\r\n。

但是为什么要将整个文件读入内存呢？为什么所有的睡眠？你为什么要跳过每一行？什么是consumeInput()？

只需读取和写入*字节。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T22:07:49.237

不确定您的接收端如何想要固件、纯二进制、十六进制编码、base64 编码？

无论如何，这就是您如何以纯二进制形式发送它

```
Socket s = null;
try {
    SocketAddress socketAddress = new InetSocketAddress(InetAddress.getByName(addr), 23);
    s = new Socket();
    s.connect(socketAddress, 1000);

    InputStream inputStream = s.getInputStream();
    OutputStream outputStream = s.getOutputStream();

    outputStream.write((login + "\n").getBytes());

    Thread.sleep(300);

    outputStream.write((password + "\n").getBytes());

    Thread.sleep(300);

    outputStream.write(("swupdate" + "\n").getBytes());
    Thread.sleep(300);

    // Open the file that is the first
    // command line parameter
    FileInputStream fstream = new FileInputStream(path_frm_vdsl);
    byte[] buffer = new byte[1024];
    int fillSize;

    // Read File chunk by chunk
    while ((fillSize = fstream.read(buffer)) != -1) {
        outputStream.write(buffer, 0, fillSize);
    }
    outputStream.close();
} finally {
    s.close();
} 
```

因此，以块的形式读取文件，直到没有更多数据（读取返回 -1）并写入块（读取返回实际读取了多少）。

# java - 从 jar 文件更改类的代码

> ID：11848161
> 
> 赞同：4
> 
> 时间：2012-08-07T14:27:49.280
> 
> 标签：java, jar

如何从 jar 文件中读取（加载）java 类，向该类添加一些代码，然后放回 jar？我需要编写一个脚本（Java 代码）来完成所有这些事情。我想到的步骤是：1.读取jar并使用java.util.jar包中的方法获取类名的条目2.加载这个类，从类中获取数组，更改它3.也许编译应用更改的代码 4\. 将更新的类放入 jar 文件

我不知道如何在 Java 中执行第二步和第三步。

我正在考虑编写新的 java 类来扩展这个类并更改数组，但是这个数组被声明为 public static final，这就是我不能更改它的原因。或者我错了，有办法通过扩展类来改变数组吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:32:08.370

jar 只是一个 ZIP 文件，因此您可以使用任何存档管理器（例如[7-ZIP ）解压缩](http://www.7-zip.org/)它。它将包含类文件，这些文件是已编译的 Java 文件。您需要一个 Java 反编译器来读取和修改字节码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T14:33:45.900

[提取](http://en.wikipedia.org/wiki/File_archiver)->[反编译](http://java.decompiler.free.fr/?q=jdgui)-> 添加代码 -> 创建 Jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:34:24.420

最好的解决方案是在您的代码中使用 JAR 并扩展类（如果类允许您这样做）。

如果不能，JAR 类实际上是一个 ZIP 存档。您可以将 x.jar 重命名为 x.zip 并提取内容：

在这里你有更多信息（特别是 OscarRyz 的回答）： [你如何重新编译 jar 文件？](https://stackoverflow.com/questions/3350545/how-do-you-recompile-a-jar-file)

# django - Django 测试不会引发 CharField 的完整性错误

> ID：11848162
> 
> 赞同：2
> 
> 时间：2012-08-07T14:27:49.663
> 
> 标签：django

如果有以下 Django (1.4) 模型：

```
from django.db import models

class SimpleModel(models.Model):
    name = models.CharField(max_length=100) 
```

而这个简单的测试：

```
from django.test import TestCase
from models import SimpleModel
from django.db import IntegrityError

class SimpleTest(TestCase):
    def test_integrity_error(self):
        with self.assertRaises(IntegrityError):
            m = SimpleModel()
            m.save() 
```

使用 sqlite3 数据库作为数据库。如果我现在运行测试，`python manage.py test <appname>`测试失败并显示`AssertionError: IntegrityError not raised`.

问题是：**为什么？**

据我了解（或认为了解）Django Fields 的默认值是`blank=False`，`null=False`所以我假设用默认值保存模型实例（我认为 CharField 应该是一个空字符串）肯定会失败！那么，为什么这不会发生呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T14:32:08.697

Django 从不为空`CharField`或`TextField`类型存储 NULL。它存储一个空字符串 ( `''`)。所以这就是为什么你没有得到一个`IntegrityError`for `null=False`。

至于`blank=False`，那只会影响表格。它只是让表单设置字段，`required=True`因此除非它有一个值，否则它不会验证。它不会影响数据库或您在表单外手动设置空白值的能力。

# spring-mvc - Spring MVC 项目编译警告

> ID：11848164
> 
> 赞同：1
> 
> 时间：2012-08-07T14:27:53.150
> 
> 标签：spring-mvc, compiler-warnings

一切都会编译，但会显示以下警告：

```
Warning: advice defined in org.springframework.mock.staticmock.AnnotationDrivenStaticEntityMockingControl has not been applied [Xlint:adviceDidNotMatch]

Warning: advice defined in org.springframework.mock.staticmock.AbstractMethodMockingControl has not been applied [Xlint:adviceDidNotMatch]

Warning: advice defined in org.springframework.scheduling.aspectj.AbstractAsyncExecutionAspect has not been applied [Xlint:adviceDidNotMatch]

Warning: advice defined in org.springframework.orm.jpa.aspectj.JpaExceptionTranslatorAspect has not been applied [Xlint:adviceDidNotMatch] 
```

有人可以解释他们的确切含义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:33:30.427

这是您的编译时 AspectJ 编织过程的输出 - 它向您显示哪些 AspectJ 建议尚未应用到您的代码库中。

为了进一步扩展这一点 - Spring 相关方面通常`META-INF/aop.xml`在 spring-aspects.jar 文件中的文件中定义，如果某些切入点不匹配，这些方面会根据代码库中匹配的切入点编织到您的类中向上，例如，您可能在任何地方都没有任何`@Async`注释，那么建议不会被应用，您会看到以下消息`advice defined in org.springframework.scheduling.aspectj.AbstractAsyncExecutionAspect has not been applied`

# sql-server-2008-r2 - SQL Server Standard 升级到 Enterprise 后是否需要重新应用 Service Pack

> ID：11848168
> 
> 赞同：1
> 
> 时间：2012-08-07T14:28:04.683
> 
> 标签：sql-server-2008-r2

我正在按照[升级到 SQL Server 2008 R2 的不同版本中的说明将 SQL Server 从](http://msdn.microsoft.com/en-us/library/cc707783%28v=sql.105%29.aspx)**2008 R2 Standard Edition Service Pack 1**升级到**2008 R2 Enterprise Edition**。

过去，每当我以这种方式升级软件时，我都必须重新应用服务包。

SQL 版本升级是否需要重新安装服务包？MS文档没有谈论它。

```
select @@version 
```

升级后给我

```
Microsoft SQL Server 2008 R2 (SP1) - 10.50.2500.0 (X64)   Jun 17 2011
00:54:03   Copyright (c) Microsoft Corporation  Enterprise Edition
(64-bit) on Windows NT 6.1 <X64> (Build 7601: Service Pack 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:33:15.077

我认为不需要重新应用服务包 - 如果您运行服务包设置，它不应该将此实例标识为有效目标，因为 @@VERSION 已经处于 SP 级别。

也就是说，为什么不直接应用[Service Pack 2](https://sqlblog.org/2012/07/26/sql-server-2008-r2-service-pack-2-is-available)和[Service Pack 2 Cumulative Update #1](https://sqlblog.org/2012/08/01/sql-server-2008-r2-service-pack-2-cumulative-update-1-is-available)呢？

# xml - 如何为每一行数据创建一个额外的列并导入图像的相对路径

> ID：11848170
> 
> 赞同：0
> 
> 时间：2012-08-07T14:28:08.740
> 
> 标签：xml, windows, excel, automation, excel-2007

**编辑**：[示例（图像）](http://i.imgur.com/EG8op.png)

我有一个包含 1000 行数据的 excel 文件和一个包含该数据每行 1000 张图像的文件夹。

图像位于它们自己的文件夹中，并且 excel 没有将每个相应图像与每一行数据相关联的列。

有没有办法避免手动输入 1000 条相对路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:26:56.010

我能想到的最简单的事情是从 excel 创建 XML，然后解析 XML 并添加图像标签。解析 XML 的选项有很多，具体取决于您最熟悉的方式。在 C#、java 等中有 XML 解析库。

解析是当您将一堆符号解释为某种结构时。在这种情况下，您将获取 xml 文件并将其转换为标签树。然后你可以遍历那棵树并为每个项目添加一个图像。您将查看名称、生成路径、检查文件是否存在以验证扩展名，然后将其添加到树中。然后你把树写回文件。

这一切都是使用 C# 中的 XmlReader 之类的库完成的。

# sql - 在 oracle 中使用无 PK 的连接更新表

> ID：11848171
> 
> 赞同：2
> 
> 时间：2012-08-07T14:28:12.790
> 
> 标签：sql, oracle, sql-update

```
UPDATE
  (
    SELECT
      a.COL1
    FROM
      TABLE1 a,
      TABLE2 b,
      TABLE3 c
    WHERE
      a.name = b.name
      c.ccol = b.ccol AND
      AND b.col1 = 'anyvalue'
      AND a.col2 = 'anothervalue'
  ) u
SET
  u.COL1 = 'VALUE' 
```

此查询不起作用，因为 TABLE1 不包含 PK。如何编写这样的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:41:01.217

以下应该实现您在上面尝试实现的目标：

```
UPDATE  TABLE1
SET     COL1 = 'VALUE'
WHERE   EXISTS
        (   SELECT  1
            FROM    TABLE2 B
                    INNER JOIN TABLE3 C
                        ON B.Ccol = C.Ccol
            WHERE   b.Name = Table1.Name
            AND     b.Col1 = 'AnyValue'
            AND     c.Col1 = 'AnotherValue'
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:41:11.870

我从未在 oracle 工作过，但尝试这样的事情。只要您的 join & where 语句正确，没有 pk 应该不是问题。

**这是您要求的 SQL 等价物**

```
UPDATE u
  SET  u.COL1 = 'VALUE'
  FROM Table1 AS u
  INNER JOIN Table2 AS b ON u.name  = b.name 
  INNER JOIN Table3 AS c ON c.ccol  = b.ccol 
 WHERE b.col1 = 'anyvalue'  AND u.col2 = 'anothervalue' 
```

# c# - 在我的自定义适配器上投射异常

> ID：11848184
> 
> 赞同：1
> 
> 时间：2012-08-07T14:29:20.910
> 
> 标签：c#, android, listview, mono, xamarin.android

我目前在 Monodroid 中遇到了 Android ListView 的问题。

我使用这样的自定义适配器初始化和设置列表：

```
ListView setting_listview = new ListView(this);
//Components and layoutparameters is done here

RelativeLayout bottom_view = new RelativeLayout(this);
//Components/layoutparameters is done here
setting_listview.AddFooterView(bottom_view);

TTListAdapter adapter = new TTListAdapter(this, listdata, Resource.Layout.datatable_list_item,secList);
setting_listview.Adapter = adapter; 
```

现在，当我尝试在另一段代码中检索适配器时，如下所示：

```
TTListAdapter adapter = (TTListAdapter)setting_listview.Adapter; 
```

我得到以下异常：`System.InvalidCastException: Cannot cast from type HeaderViewListAdapter to TTListAdapter`. 显然，Adapter 属性现在返回一个 HeaderViewListAdapter，而不是在初始化期间设置的预期 TTListAdapter。

如果我在初始化期间不使用`AddFooterView`，它将返回`TTListAdapter`在初始化期间设置的原始文件。

为什么 Adapter 属性在被调用`HeaderViewListAdapter`后返回 a 而不是最初设置的 Adapter，`AddFooterView`如果发生这种情况，我该如何检索原始 Adapter？

编辑：改写问题的一部分以使其更清晰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:58:12.180

在尝试了更多之后，`HeaderViewListAdapter`我发现每当`ListView`有页眉或页脚视图时。它会自动将原始适配器包装在 a`HeaderViewListAdapter`中，该适配器将管理这些页眉和页脚。然后可以通过调用类`WrappedAdapter`中的属性来检索原始适配器`HeaderViewListAdapter`。

我的案例示例：

```
HeaderViewListAdapter adapter = (HeaderViewListAdapter)this.setting_listview.Adapter;
TTListAdapter origAdapter = (TTListAdapter)adapter.WrappedAdapter; 
```

# jquery - JQuery 在 .click() 中替换 $(this) 会导致无法点击？

> ID：11848185
> 
> 赞同：0
> 
> 时间：2012-08-07T14:29:23.593
> 
> 标签：jquery, click, this, replacewith

我有以下代码：

```
$('div[class^=locked_]').click(function() {
        var newThis = $(this) ;
        $(this).load(url + " #" + $(this).attr("id"), function() {
            var loaded = $(this).children("#" + $(this).attr("id")) ;
            alert($(loaded).attr("class")) ; // displays "locked_true"
            $(newThis).replaceWith($(loaded)) ;
            alert($(newThis).html()) ;

        }) ;
    }) ; 
```

我不明白我得到的行为：第一个警报显示正确的类（以“locked_”开头）。第二个警报显示为空。尽管它具有正确的类，但我无法再次单击同一个按钮。正常吗？我该怎么办 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T14:37:06.527

事件处理程序（委托事件除外 - 稍后会详细介绍）直接绑定到元素。如果您替换该元素（这正是您在使用该`.replaceWith()`函数时所做的），那么您将删除该事件处理程序以及该元素；你不会让你的事件绑定到新元素。

如前所述，解决方案是事件委托。一般原则是在包含动态元素的静态元素上设置事件处理程序，当事件的目标与提供的选择器匹配时，它将处理事件并负责执行回调函数。

如果您使用的是 jQuery 1.7+，则可以使用该[`.on()`](http://api.jquery.com/on/)函数来执行此操作：

```
$(document).on('click', 'div[class^=locked_]', function(e) {
    var newThis = $(this) ;
    $(this).load(url + " #" + $(this).attr("id"), function() {
        var loaded = $(this).children("#" + $(this).attr("id")) ;
        alert($(loaded).attr("class")) ; // displays "locked_true"
        $(newThis).replaceWith($(loaded)) ;
        alert($(newThis).html()) ;
    });
}); 
```

我`document`在示例中使用过，但理想情况下，您会选择更具体的静态元素（越接近动态元素越好）。

如果您不使用 jQuery 1.7+，您可以使用该函数获得相同的[`.delegate()`](http://api.jquery.com/delegate/)功能 - 语法实际上是相同的，您只需切换`'click'`和`'div[class^=locked_]'`参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T14:34:43.807

`replaceWith`从 DOM 中移除一个元素并将其替换为另一个元素。您`newThis`正在引用刚刚从 DOM 中删除的*旧元素。*

# java - JasperReports：子数据集中的列表，如何？

> ID：11848187
> 
> 赞同：2
> 
> 时间：2012-08-07T14:29:39.257
> 
> 标签：java, jasper-reports

我有一个包含子数据集的 JR 报告：

```
<subDataset name="dataset4">
    <parameter name="collateralizedLimitsAndExposureList" class="java.lang.List" isForPrompting="false"/>
    <field name="exposureList" class="java.util.List"/>
    <field name="limit" class="java.lang.Object"/>
</subDataset> 
```

我使用一个列表组件来迭代这个数据集4。
主列表现在有 4 个元素可以正确显示。但是每个列表项都包含这个具有许多元素的***曝光列表。***
我也想显示它，但不知道如何在第二个列表上进行迭代。

```
 <componentElement>
            <reportElement positionType="Float" x="0" y="62" width="495" height="30"/>
            <jr:list xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" printOrder="Vertical">
                <datasetRun subDataset="dataset4">
                    <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{exposureList})]]></dataSourceExpression>
                </datasetRun>
                <jr:listContents height="30" width="495">
                    <frame>
                        <reportElement positionType="Float" x="0" y="0" width="495" height="30"/>
                        <textField isBlankWhenNull="true">
                            <reportElement style="normal_field_bold" x="5" y="0" width="50" height="10"/>
                            <textElement>
                                <font size="6" isBold="true"/>
                            </textElement>
                            <textFieldExpression><![CDATA[$F{limit}.getLimitSymbol()]]></textFieldExpression>
                        </textField>
                        <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                            <reportElement style="normal_field_bold" x="420" y="2" width="70" height="10"/>
                            <textElement textAlignment="Right">
                                <font size="6" isBold="true"/>
                            </textElement>
                            <textFieldExpression><![CDATA[$F{limit}.getAvailableLimit()]]></textFieldExpression>
                        </textField>
                        <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                            <reportElement style="normal_field" x="5" y="16" width="58" height="10"/>
                            <textElement>
                                <font size="6"/>
                            </textElement>
                            <textFieldExpression><![CDATA[$F{exposureList}.get(0).getExternalReferenceDisplayString()]]></textFieldExpression>
                        </textField>
                        <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                            <reportElement style="normal_field" x="63" y="16" width="70" height="10"/>
                            <textElement>
                                <font size="6"/>
                            </textElement>
                            <textFieldExpression><![CDATA[$F{exposureList}.get(0).getObj()]]></textFieldExpression>
                        </textField>
                        <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                            <reportElement style="normal_field" x="154" y="16" width="50" height="10"/>
                            <textElement>
                                <font size="6"/>
                            </textElement>
                            <textFieldExpression><![CDATA[$F{exposureList}.get(0).getCcy()]]></textFieldExpression>
                        </textField>
                        <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                            <reportElement style="normal_field" x="205" y="16" width="70" height="10"/>
                            <textElement textAlignment="Right">
                                <font size="6"/>
                            </textElement>
                            <textFieldExpression><![CDATA[$F{exposureList}.get(0).getNrv()]]></textFieldExpression>
                        </textField>
                        <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                            <reportElement style="normal_field" x="276" y="16" width="70" height="10"/>
                            <textElement textAlignment="Right">
                                <font size="6"/>
                            </textElement>
                            <textFieldExpression><![CDATA[$F{exposureList}.get(0).getExp()]]></textFieldExpression>
                        </textField>
                        <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                            <reportElement style="normal_field_bold" x="347" y="2" width="70" height="10"/>
                            <textElement textAlignment="Right">
                                <font size="6" isBold="true"/>
                            </textElement>
                            <textFieldExpression><![CDATA[$F{limit}.getIssuedLimit()]]></textFieldExpression>
                        </textField>
                        <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                            <reportElement style="normal_field" x="154" y="2" width="50" height="10"/>
                            <textElement>
                                <font size="6"/>
                            </textElement>
                            <textFieldExpression><![CDATA[$F{limit}.getCcy()]]></textFieldExpression>
                        </textField>
                    </frame>
                </jr:listContents>
            </jr:list>
        </componentElement> 
```

所以通过这种方式，我有一个包含 4 个元素的列表和子列表中的第一个元素。

1.  *JasperReports*中是否有可以在列表的 get 方法中使用的内置变量？
2.  我知道这样它只在主列表上迭代。顺便说一句，我怎样才能做第二个清单？

# git - Git-SVN 和 Zend Studio

> ID：11848193
> 
> 赞同：0
> 
> 时间：2012-08-07T14:29:58.590
> 
> 标签：git, ide, zend-studio

所以我开始在工作中使用 git-svn，因为我讨厌在 svn 中完成分支的方式，而且我知道如何有效地使用 git。我的问题是，因为我正在通过命令行做所有与 git 相关的事情 - 这包括分支、签入和签出等等 - 我有一个基本问题：
当我在 git 中创建分支时，通过 git checkout -b "newbranch " 并在我的 IDE 中进行更改，然后切换回 master - 我在 IDE 中的项目没有更新，这反映了一个分支上存在更改而另一个分支上没有更改的事实。
我是否必须为在 git 中创建的每个分支创建一个新项目？- 我不认为该项目指向包含 .git 文件夹和结帐的文件夹。
那么为什么 IDE 中的项目没有更新以反映不同的分支？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T20:58:01.067

1) 尝试直接在 Zend Studio 中进行分支，它将很好地管理这些更改。您可以在欢迎屏幕上启用 Git 连接器。重启 ZS，它会自己检测到一个 Git 项目。但是不要尝试使用 git-svn，因为据我所知，它还没有实现。

2）如果你不想，你必须刷新项目（选择项目，F5或右键单击并选择刷新）。ZS 最终会这样做，但有时它比自己这样做要慢。

3）检查是否启用了自动刷新（团队 - Git - 索引更改时刷新资源），但是我不认为新分支是索引更改。

问候。

# jaxb - XmlAccessType.FIELD 与 XmlAccessType.PROPERTY

> ID：11848195
> 
> 赞同：2
> 
> 时间：2012-08-07T14:30:01.800
> 
> 标签：jaxb, jaxb2

**这是我下面的 JAXB 绑定类。**

```
Request Sample :    <request cust="1222"/>

@XmlRootElement(name = "request")
@XmlAccessorType(XmlAccessType.PROPERTY)
public class CustAcct {
    @XmlAttribute
    private String cust;

    public String getCust() {
        return cust;
    }

    public void setCust(String cust) {
        this.cust = cust;
    }

    public CustAcct() {

        super();
    }
} 
```

**当我使用属性 (XmlAccessType.FIELD) 时一切正常，但我使用 @XmlAccessorType(XmlAccessType.PROPERTY) 尝试了上面的 JAXB 类。它给出了以下例外。**

任何人都可以告诉我为什么在与 XmlAccessType.PROPERTY 一起使用时会出现异常

```
Class has two properties of the same name "cust"
        this problem is related to the following location:
                at public java.lang.String de.vogella.jersey.first.CustAcct.getCust()
                at de.vogella.jersey.first.CustAcct
        this problem is related to the following location:
                at private java.lang.String de.vogella.jersey.first.CustAcct.cust
                at de.vogella.jersey.first.CustAcct

        at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.readFrom(AbstractRootElementProvider.java:113)
        at com.sun.jersey.spi.container.ContainerRequest.getEntity(ContainerRequest.java:454)
        at com.sun.jersey.server.impl.model.method.dispatch.EntityParamDispatchProvider$EntityInjectable.getValue(EntityParamDispatchProvider.java:123)
        at com.sun.jersey.server.impl.inject.InjectableValuesProvider.getInjectableValues(InjectableValuesProvider.java:46)
        at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$EntityParamInInvoker.getParams(AbstractResourceMethodDispatchProvider.java:138)
        at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:166)
        at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:70)
        at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:279)
        at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:86)
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:136)
        at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:74)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1357)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1289)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1239)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1229)
        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:420)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:497)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:684)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
        at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
        at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
        at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
        at java.lang.Thread.run(Thread.java:662)
Caused by: com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:28:55.493

您应该将 @ 添加`XmlAttribute`到`public String getCust()`方法，因为访问类型是 PROPERTY。

# c++ - 在单声道项目和 C++ 控制台应用程序之间传输数据？

> ID：11848198
> 
> 赞同：0
> 
> 时间：2012-08-07T14:30:05.933
> 
> 标签：c++, mono, data-transfer

我有 ac# (win form) Visual Studio 项目，我现在在 Linux 上使用 mono 进行编译，并且我有一个 c++ 应用程序。我想在这两个应用程序之间传输一些数据，我有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:33:58.663

有几种方法可以做到这一点。他们之中有一些是：

*   标准文件（带有[lockfile](http://linux.about.com/library/cmd/blcmdl1_lockfile.htm)）
*   [先进先出文件](http://linux.about.com/library/cmd/blcmdl4_fifo.htm)
*   [套接字连接](http://en.wikipedia.org/wiki/Network_socket)
*   [共享内存](http://en.wikipedia.org/wiki/Shared_memory)

取决于您需要什么，数据有多大，交换信息的频率等。

最有可能的是，您将使用套接字连接。

* * *

基本上，您需要的是**IPC（进程间通信）**。阅读更多关于它的信息，例如，[在这里](http://en.wikipedia.org/wiki/Inter-process_communication)

# javascript - 隐藏 Raphael JS Freetransform 上的句柄，但继续拖动？

> ID：11848199
> 
> 赞同：4
> 
> 时间：2012-08-07T14:30:14.917
> 
> 标签：javascript, jquery, raphael, transform, drag

您好我正在开发一个需要使用 Raphael JS 和插件 Raphael.Freetransform 的新项目。到目前为止，该插件运行得非常好，非常顺利。但是，通过使用 hideHandles() 方法，它似乎也禁用了对对象的任何形式的拖动。

这是错误还是设计选择？隐藏句柄后是否需要重新启用对元素的拖动？我试过设置。为了在不使用 Freetransform 插件的情况下使元素可拖动，我需要做些什么特别的事情吗？

这是我的代码：

```
paper = new Raphael("container", "1680", "1005");
setA = paper.set();
circle = paper.circle(50, 50, 50);
circle.attr("fill", "#f00");
circle.attr("stroke", "#000");
notif = paper.circle(50, 50, 50);
notif.attr({ "fill": "r(0.5, 0.5) #fff-#f00", "fill-opacity": 1 });
lbl = paper.text(50, 50, "Label").attr({fill: '#000000'});
setA.push(circle);
setA.push(notif);
setA.push(lbl);

setA.click(function(){
    console.log('clicked');
});

setA.hover(
    // over //
    function (){ console.log('over'); }, 
    // out //
    function (){ console.log('out'); }
);

setA.drag(
    //onmove
    function(){  
        console.log('object moving');
    }, 
    //onstart
    function(){  
        console.log('start drag');
    }, 
    //onend
    function(){  
        console.log('end drag');
    }
);

ft = paper.freeTransform(setA, { drag: true, keepRatio: true, draw: [ 'bbox', 'circle' ] }, function(ft, events) { /*console.log(ft.attrs);*/ } );

$('#guideBtn').click(function(){
    if ($('#guideBtn').text().indexOf('Show') > -1){ ft.showHandles(); $('#guideBtn').text('Hide Guide'); }
    else{ ft.hideHandles(); $('#guideBtn').text('Show Guide'); }
}); 
```

这是 freetransform 工具的链接：[https ://github.com/ElbertF/Raphael.FreeTransform/](https://github.com/ElbertF/Raphael.FreeTransform/)

如您所见，我只是使用按钮的单击处理程序来显示和隐藏句柄。在此之后我需要额外的步骤吗？

在此先感谢，康纳

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T18:50:19.223

想通了。而不是调用 .hideHandles() 和 .showHandles() 您可以简单地调用 {drag: true|false}、{scale: true|false} 和 {rotate: true|false} 的组合

例如

```
circle.setOpts({drag:'self', scale:false, rotate:false, draw:false});
circle.setOpts({drag:'self', scale:true, rotate:true, draw: [ 'bbox', 'circle' ]}); 
```

# ant - 启动 cassandra-cli 错误

> ID：11848209
> 
> 赞同：2
> 
> 时间：2012-08-07T14:30:45.450
> 
> 标签：ant, build, cassandra

尝试运行 cassandra-cli 时出现以下错误。

```
manuzhang@manuzhang-U24E:~/git/cassandra-trunk$ bin/cassandra-cli -h localhost -p 9160
Column Family assumptions read from /home/manuzhang/.cassandra-cli/assumptions.json
Connected to: "Test Cluster" on localhost/9160
Welcome to Cassandra CLI version Unknown

Exception in thread "main" java.lang.AssertionError
    at org.apache.cassandra.cli.CliClient.loadHelp(CliClient.java:178)
    at org.apache.cassandra.cli.CliClient.getHelp(CliClient.java:171)
    at org.apache.cassandra.cli.CliClient.printBanner(CliClient.java:197)
    at org.apache.cassandra.cli.CliMain.main(CliMain.java:312) 
```

那条线是：

```
final InputStream is = CliClient.class.getClassLoader().getResourceAsStream("org/apache/cassandra/cli/CliHelp.yaml");
assert is != null; 
```

该文件实际上位于`$CASSANDRA_HOME/src/resources/org/apache/cassandra/cli`.

我已经成功运行了几次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:29:07.533

好吧，`ant build`在终端解决了。

我认为这是因为我是从源代码构建的，并且不时修改一些代码。

但是仅仅添加几行注释并不能重现问题。

# image - 在自定义 UI 编辑器上插入图像

> ID：11848211
> 
> 赞同：1
> 
> 时间：2012-08-07T14:30:47.617
> 
> 标签：image, excel, user-interface, editor, ribbon

我正在使用自定义 UI 编辑器将图像上传到自定义功能区选项卡。我需要图像看起来像这样：

![好结果](../Images/eb2b3fb56392a6f576bc9af15d131c6c.png)

但目前它们看起来像这样：

![结果不好](../Images/e251eab8c3941f83ee4488f852e0c7d7.png)

这些图像直接来自 Microsoft 形状。我尝试直接保存它们的形状，但它们真的很乱。必须有一种方法可以根据第一张图像获得完美的形状 - 我只是不确定如何。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T15:25:06.447

您的图像需要以精确的 16x16 像素大小保存。其他任何东西，它们将被缩放以适应 16x16 的区域，因此线条模糊。

您的顶部图像（矩形）尺寸为 16 像素宽 x 10 像素高。如果那是该图像的范围，那么当您导入它时，它会被拉伸。创建图像时，您还需要在图像周围（在本例中为上方和下方）包含白色（或空白）空间。

![在此处输入图像描述](../Images/a9b45a34de5ea6cc8364995e79f8e67f.png)

上面的示例以两种不同的格式显示了完全相同的 16x10 像素矩形。顶部图像包括矩形上方和下方的空白区域，并保存为 16x16 像素的图像。底部图像只有 16x10 像素的矩形并保存为 16x10 像素的图像，因此它被 UI 编辑器拉伸以适应 16x16 的可用空间。

# c# - Windows Server 08 Standalone exe Microsoft.Jet.OLEDB.4.0 错误

> ID：11848216
> 
> 赞同：0
> 
> 时间：2012-08-07T14:31:03.440
> 
> 标签：c#, cron, windows-server-2008, oledb

我有一个用于 CRON 的独立应用程序，我将它部署到 Windows Server 2008 机器上，它不断给我下面的错误。

System.InvalidOperationException：“Microsoft.Jet.OLEDB.4.0”提供程序未在本地计算机上注册。

我对该主题进行了一些研究，似乎 64 位应用程序不适用于 64 位的 MSJet dll。所以解决方案是重新编译应用程序并让它针对 32 位机器，但是我不能在我的项目中这样做。我查看了 C:\Windows\SysWOW64 文件夹，发现了 msjet40.dll 和 msjetoledb40.dll 文件。有没有其他方法可以按原样运行此应用程序，或者可能在兼容性设置中运行，因为我在构建它时无法将其定位到 32 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:43:42.440

如果您的应用程序是 64 位进程，则`msjet40.dll`不能使用。`msjetoledb40.dll`您将不得不使用 ACE OLEDB 12.0，这是唯一支持 64 位进程的真正替代方案。您唯一的其他选择是将应用程序编译为 32 位进程。

您可以从以下位置下载此驱动程序：[Microsoft Access Database Engine 2010 Redistributable](http://www.microsoft.com/downloads/details.aspx?FamilyID=C06B8369-60DD-4B64-A44B-84B371EDE16D&displaylang=en)，如果您正在寻找其他信息，您可以在[此处找到它](http://www.connectionstrings.com/Articles/Show/using-jet-in-64-bit-environments)

# android - Android，如何选择保存文件位置？

> ID：11848224
> 
> 赞同：12
> 
> 时间：2012-08-07T14:31:35.543
> 
> 标签：android, android-file

有什么解决方案如何选择保存文件的位置？也许用原始文件浏览器，选择目的地？

谢谢你！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T14:46:09.830

您只需要[Android 目录选择器](http://www.bgreco.net/directorypicker/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T14:35:54.217

最好使用您的应用命名空间保存文件：

```
String extStorage = Environment.getExternalStorageState();
path = extStorage+"/Android/data/com.mydomain.myapp/"; 
```

当应用程序被卸载时，它将被删除。

这实际上是关于数据存储的一切。
[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

从上面的链接：

> 如果您使用 API 级别 7 或更低版本，请使用 `getExternalStorageDirectory()`, 打开一个`File`表示外部存储根目录的文件。然后，您应该将数据写入以下目录：
> 
> ```
> /Android/data/<package_name>/files/ 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:37:59.740

将其保存到外部 SD 卡上的专用区域可能是最简单的方法。

您可以通过调用获取此文件夹

文件：//localhost/Applications/android-sdk-macosx/docs/reference/android/os/Environment.html#getExternalStoragePublicDirectory(java.lang.String)

```
File path = Environment.getExternalStoragePublicDirectory(
            Environment.DIRECTORY_PICTURES) 
```

您还可以附加一个子文件夹以更好地引用源，即。你的应用程序。

您可以选择 DIRECTORY_PICTURES 或 DIRECTORY_MOVIES。如果它是用户创建的，我可能会坚持使用图片。

为了提供帮助，您还可以调用媒体扫描仪将其添加到适当的内容提供商系统范围内。

```
sendBroadcast( new Intent(Intent.ACTION_MEDIA_MOUNTED, 
                    Uri.parse("file://" + Environment.getExternalStorageDirectory()))
        ); 
```

如果您必须让文件选择器运行，这不是将用户公开给文件系统的推荐方法。尝试使用 Open Intents 中的文件选择器。[http://www.openintents.org/en/node/164](http://www.openintents.org/en/node/164)

# android - 访问列表“下方”的行时，ListView 空指针异常

> ID：11848236
> 
> 赞同：0
> 
> 时间：2012-08-07T14:32:06.777
> 
> 标签：android, listview, nullpointerexception

所以我有一个包含大约 10 行数据的 ListView。它渲染得很好，但是当我尝试做一个 mListView.getChildAt(index); 调用，如果结果视图低于并包括从顶部向下的第 5 行，则结果视图为 NULL。

这是我打电话的地方，一个logcat，并提前真诚地感谢您：

```
View r = manageTransfersList.getChildAt(mTaskIndex); 
```

从哪里`mTaskIndex`传来

```
public void onListItemClick(ListView l, View v, int position, long id) {
            ...
            mTaskIndex = position;
    ...
} 
```

日志猫：

```
08-07 09:15:12.420: E/AndroidRuntime(7657): FATAL EXCEPTION: main
08-07 09:15:12.420: E/AndroidRuntime(7657): java.lang.NullPointerException
08-07 09:15:12.420: E/AndroidRuntime(7657):     at org.globus.globus.transfer.ManageTransfersFragment$TaskDetailsDialogFragment$1.onClick(ManageTransfersFragment.java:469)
08-07 09:15:12.420: E/AndroidRuntime(7657):     at android.view.View.performClick(View.java:4084)
08-07 09:15:12.420: E/AndroidRuntime(7657):     at android.view.View$PerformClick.run(View.java:16966)
08-07 09:15:12.420: E/AndroidRuntime(7657):     at android.os.Handler.handleCallback(Handler.java:615)
08-07 09:15:12.420: E/AndroidRuntime(7657):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-07 09:15:12.420: E/AndroidRuntime(7657):     at android.os.Looper.loop(Looper.java:137)
08-07 09:15:12.420: E/AndroidRuntime(7657):     at android.app.ActivityThread.main(ActivityThread.java:4896)
08-07 09:15:12.420: E/AndroidRuntime(7657):     at java.lang.reflect.Method.invokeNative(Native Method)
08-07 09:15:12.420: E/AndroidRuntime(7657):     at java.lang.reflect.Method.invoke(Method.java:511)
08-07 09:15:12.420: E/AndroidRuntime(7657):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788)
08-07 09:15:12.420: E/AndroidRuntime(7657):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
08-07 09:15:12.420: E/AndroidRuntime(7657):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:38:40.130

尝试使用，用于您想要的数据项

```
 manageTransfersList.getAdapter().getItem(mTaskIndex); 
```

或者，如果您想要视图，只需使用 onListItemClick 中的“v”参数（无需通过适配器获取项目或通过子索引搜索）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:39:34.993

我认为您想转到列表的适配器而不是列表来获取位置 n 的项目的详细信息或位置 n 的视图。

即我在我的项目中有：

IconifiedText 文本 = (IconifiedText) adapter.getItem(position);

# sublimetext2 - Windows中的崇高文本2尾-f

> ID：11848237
> 
> 赞同：6
> 
> 时间：2012-08-07T14:32:07.877
> 
> 标签：sublimetext2, tail

我想知道 sublime text 2 是否可以像在 linux 中一样“tail -f”文件，我正在使用 windows btw。

我想在 xampp 中查看 apache 错误日志文件。

Notepad++ 有没有可以在 sublime text 2 中实现的插件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T14:56:53.767

我不知道这是否可能，但我通常使用像尾巴一样处理得很好的**[Baretail 。](http://www.baremetalsoft.com/baretail/)**

我真正喜欢 Baretail 的一点是，您可以定义正则表达式来突出显示日志文件的某些部分。就像，把每个与线

*   内部错误，红色背景，粗体和白色文本，
*   警告消息，橙色背景，斜体和白色文本，
*   ETC ...

![在此处输入图像描述](../Images/67133075641933af7bbe7a5a726806f9.png)

否则，您似乎[不是唯一一个](http://sublimetext.userecho.com/topic/98212-a-tail-f-function-would-be-soooo-awesome/)请求此类功能的人（您应该在*userecho*上支持请求）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-12T08:27:29.437

目前正在开发一个名为[SublimeTail](https://github.com/vifo/SublimeTail)的项目。目前可以从 Github 下载 Alpha 版。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T15:43:15.477

对于一个简单的解决方案，您可以在 Windows SO [GNU 实用程序中使用 Win32](http://unxutils.sourceforge.net/)。在此您可以找到`tail -f`UNIX/Linux 和其他有用的命令。

# iphone - MBProgressHud 在第二次查看后没有隐藏

> ID：11848249
> 
> 赞同：0
> 
> 时间：2012-08-07T14:32:54.710
> 
> 标签：iphone, mbprogresshud

我有一个`MBProgressHUD`我想在切换标签时显示的。这是在我的应用程序委托中。我在这里有这段代码，仅在前三个选项卡上显示 HUD

```
 -(void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController{

  if ([viewController isKindOfClass:[UINavigationController class]]) {  
    if (tabBarController.selectedIndex >= 3) {

        UINavigationController *nav = (UINavigationController *) viewController;
        [nav popToRootViewControllerAnimated:NO];            
    }

    else {
        UINavigationController *nav = (UINavigationController *) viewController;

        HUD = [[MBProgressHUD alloc] initWithView:nav.view];
        [nav.view addSubview:HUD]; 
        HUD.labelText = @"Loading";
        [HUD show:YES];

        [nav popToRootViewControllerAnimated:NO];            
    }
  }
} 
```

我第一次查看我的页面时它可以工作，但第二次返回它并没有隐藏。我有我`[appDel.HUD hide:YES afterDelay:1.0];`的`viewDidAppear`。

每次访问该页面时如何让 HUD 隐藏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:55:30.310

如果隐藏它，您必须检查 MBProgressHUD 视图是否已经被激活，或者干脆这样做：

```
if (!HUD) {
    [self showLoadingHUD];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:11:23.263

我认为您可能会将 MBProgressHUD 添加到 UINavigationController 中的不同视图中。然后你弹出到根目录，它试图删除一个不存在的 MBProgressHUD。试试这个（未经测试的代码）......

```
UINavigationController *nav = (UINavigationController *) viewController;
[nav popToRootViewControllerAnimated:NO];

if(![nav.visibleViewController.view.subViews containsObject:MBProgressHUD])
{
    [MBProgressHUD showHUDAddedTo:nav.visibleViewController.view animated:YES];
    MBProgressHUD.labelText = @"Loading";  
}
else
{
     [MBProgressHUD setHidden:NO];
} 
```

# jquery - jQuery UI Draggable - 如何更改原始元素的css？

> ID：11848250
> 
> 赞同：1
> 
> 时间：2012-08-07T14:32:58.337
> 
> 标签：jquery

在拖动原始元素的副本后，我需要更改原始元素的字体颜色。我该怎么做？

```
jQuery("#tools-container .fieldset-item").draggable({
            revert: "invalid",
            helper: "clone", 
            cursor: "move",
            connectToSortable: ".fieldset-content .sortable",
            stop: function(event,ui) {
            // change helper css   
            }
        }  ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:40:43.447

您将使用该`css`功能。

例如：

```
$(this).css("font-color", "#ff0000"); 
```

**参考：** [http ://api.jquery.com/css/](http://api.jquery.com/css/)

# php - 空值在 Mysql 和 PHP 中变为 0

> ID：11848252
> 
> 赞同：0
> 
> 时间：2012-08-07T14:33:03.623
> 
> 标签：php, mysql

我有 2 个名称不同的下拉列表，我试图只在一个字段中进行查询。

我正在使用一个 jQuery 函数，如果`item 1`选中，将显示下拉列表 1，如果`item 2`选中，将显示下拉列表 2。

这就是我从 mysql 数据库和表中填充下拉列表的方式：

```
 <div id="minquep">
       <label>Branch</label>
          <SELECT name="user_min"> 
              <OPTION VALUE="0">Choose a branch
              <?=$minq_options?> 
          </SELECT> 
     </div>
    <div id="albury">
        <label>Branch</label>
          <SELECT name="user_branch"> 
              <OPTION VALUE="0">Choose a branch
              <?=$al_options?> 
          </SELECT> 
```

这就是我如何通过填写带有下拉列表的表单来将查询插入到 mysql 中：

```
if (isset($_REQUEST['Submit'])) { 
$sql = "INSERT INTO $db_table(branch) values ('".mysql_real_escape_string(stripslashes($_REQUEST['user_branch'])).",".mysql_real_escape_string(stripslashes($_REQUEST['user_min']))."')";

if($_REQUEST['user_branch']= ""){

    ($_REQUEST['user_branch']) = NULL;
}

if($result = mysql_query($sql ,$db)) { 
echo '<script type="text/javascript">alert("The user has been added successfully!\n");return true;</script>';
echo "<meta http-equiv=\"refresh\" content=\"0;URL=add_user.php\">";
}

else { 
echo "ERROR: ".mysql_error(); 
} 
} 
```

测试场景是，我选择 下的值`<select name="user_min">`。所以我假设sql会绕过结果，`user_branch`因为它是空的。但它确实在插入查询之后打印了**“0” 。**例如，如果插入的`($_REQUEST['user_min'])`值为“布里斯班”并且 ($_REQUEST['user_branch']) 值为`null`（因为我没有在`user_branch`下拉列表下选择任何值），则分支字段应该只是变成“布里斯班” ，知道`user_branch`是`NULL`。但它确实在我的 mysql 表中使用**0**打印“BRISBANE” ，例如**0, Brisbane 。**

我怎样才能解决这个问题？

我已经尝试过设置`if`条件，但它不起作用。

```
if($_REQUEST['user_branch']= ""){

        ($_REQUEST['user_branch']) = NULL;
    } 
```

我也尝试将**user_min**更改为 same name `user_branch`，但它没有获得选定的值，而不是**Brisbane**它只打印*'0'*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T14:35:01.627

一些东西 -

1.  您在 $sql 之后设置 user_branch = NULL。

2.  您在价值周围使用引号。非 Null 值很好——您需要检查是否有 NULL 值，然后不要在 $sql 中使用引号。

3.  您在 IF 语句中使用单个“=”。这使您的 If 语句失败。将其更改为`if($var == '')`

**更新**

基于您现有代码的一些建议 - 但是还有其他最佳实践可以实现您想要实现的目标......

```
$user_branch =  $_REQUEST['user_branch'];
$user_min =  $_REQUEST['user_min']; 
//you should validate above values first 

if$user_branch == "" || $user_min == "") {
    $db_value = "NULL"; 
} else 
{
$db_value = "'".mysql_real_escape_string(stripslashes($user_branch.','.$user_min))."'";
}

$sql = "INSERT INTO $db_table(branch) values (".$db_value.")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:36:55.653

如果您不想要 0，请更改：

```
<option value="0">Chose a Branch</option> 
```

到：

```
<option value="">Chose a Branch</option> 
```

否则它将通过表单传递为`0`

此外，您的 PHP 代码不会像您希望的那样工作：

```
if (isset($_REQUEST['Submit'])) { 
  // do this before the query
  if($_REQUEST['user_branch']== ""){ // note the extra = in there, so you aren't assigning the variable, you are compairing
    $_REQUEST['user_branch'] = NULL; // no need for brackets round the variable
  }
  $sql = "INSERT INTO $db_table(branch) values (".mysql_real_escape_string(stripslashes($_REQUEST['user_branch'])).",".mysql_real_escape_string(stripslashes($_REQUEST['user_min'])).")"; // you had single quotes around everything inside the VALUES() function

  if($result = mysql_query($sql ,$db)) { 
    echo '<script type="text/javascript">alert("The user has been added successfully!\n");return true;</script>';
    echo "<meta http-equiv=\"refresh\" content=\"0;URL=add_user.php\">";
  }
  else { 
    echo "ERROR: ".mysql_error(); 
  } 
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-23T12:50:11.420

```
$sql = "INSERT INTO reg(Name ,Email) values ('".mysql_real_escape_string(stripslashes($_REQUEST['Name']))."','".mysql_real_escape_string(stripslashes($_REQUEST['Email']))."')"; 
```

这是我的代码。在这里我发现了未定义索引的错误。

# ios - 从另一个类访问数组

> ID：11848253
> 
> 赞同：0
> 
> 时间：2012-08-07T14:33:06.900
> 
> 标签：ios, ipad

我的一个类中有一个名为 client 的数组，我想在我拥有的另一个类中使用该数组中的信息。我已经在第一堂课中设置了属性并合成了数组。我的第一堂课的代码是

```
@synthesize client;

...

- (IBAction)testing:(id)sender {
    NSString *textContent = myTextView.text;
    textContent = [textContent stringByReplacingOccurrencesOfString:@" " withString:@""];
    client = [textContent componentsSeparatedByString:@"."]; 
    NSLog(@"%@", client);
} 
```

在我的第二堂课中，我尝试为我的第一堂课导入 h 文件，然后只访问数组。我正在使用的代码是

```
- (IBAction)ButtonStuff:(id)sender {
    ArrayManipulationViewController *myClass = [[ArrayManipulationViewController alloc]init];
    NSLog(@"Second Interface");
    NSArray *test = myClass.client;
    NSLog(@"%@", test);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:49:01.020

要从多个类访问对象，一种常见的方法是在父类中声明该对象，然后将该对象的共享实例传递给所有需要访问的子类。例如，您可以在 AppDelegate 中声明数组，并在子类中设置数组属性，然后将数组的实例从 AppDelegate 传递给您的所有子类。

例如：在您的应用程序委托中创建一个 NSArray (myArray)，然后在 AppDelegate 植入中，使用属性将 myArray 实例传递给您的子视图控制器。

或者，如果您愿意；您可以在您的第一个类中声明该数组，然后使用属性将数组实例从您的第一个类传递给您的第二个类。然后，在您的第二堂课中所做的任何更改都将在您的第一堂课中可用，因为实例是相同的。

更新答案：对于第二种方法，您最好在第一个类实现中声明数组，然后在实例化第二个类时，使用属性将数组的实例传递给第二个类。在这个例子中，你需要在你的第二个类中有一个 NSArray 属性才能将数组传递给它`[secondClassInstance setClient: client];`

您的第二类界面可能如下所示：

```
@interface SecondClass : NSObject
{
   NSArray *client;
}

@property (nonatomic, retain) NSArray *client; // don't forget to synthesize
@end 
```

然后，在您的第一堂课中，您可以执行以下操作来传递您的数组实例：

```
NSArray *client = [[NSArray alloc] initWithObjects:@"Object 1", @"Object 2"];

//...

SecondClass *secondClass = [[SecondClass alloc] init];
[secondClass setClient: client]; // passing the original client instance here

// don't forget to release secondClass instance when finished 
```

# asp.net - 在特定的 RadTabStrip 选项卡上放置图表

> ID：11848257
> 
> 赞同：1
> 
> 时间：2012-08-07T14:33:17.617
> 
> 标签：asp.net, telerik, controls

我要做的是放置一个在特定选项卡上动态创建的特定图表。例如，图表 A 将转到 ColorTab，图表 B 将转到 HistoryTab

```
<telerik:RadAjaxPanel ID="StripPanel" runat="server" Width="100%">
    <telerik:RadTabStrip ID="TabStrip" runat="server" MultiPageID="Monetary" SelectedIndex="0">
        <Tabs>
            <telerik:RadTab Text="MonetaryTab">
            </telerik:RadTab>
            <telerik:RadTab Text="VTab">
            </telerik:RadTab>
            <telerik:RadTab Text="ColorTab">
            </telerik:RadTab>
            <telerik:RadTab Text="HistoryTab">
            </telerik:RadTab>
            <telerik:RadTab Text="AdTab">
            </telerik:RadTab>
        </Tabs>
    </telerik:RadTabStrip>
</telerik:RadAjaxPanel> 
```

这就是我正在尝试的

```
Control masterC = FindControl("MonetaryTab");
                RadHtmlChart CarLotChart = ChartCreationClass.HTMLChartCreation();
                masterC.Controls.Add(CarLotChart); 
```

它永远找不到放置图表的控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:37:50.217

使用[此](http://www.telerik.com/community/forums/winforms/tabstrip/dynamically-add-controls-to-radtabstrip.aspx)线程的建议来完成此任务：

```
RadHtmlChart CarLotChart = ChartCreationClass.HTMLChartCreation();
TabStrip.Tabs["MonetaryTab"].Controls.Add(CarLotChart); 
```

[通过以下任一方法](http://www.telerik.com/help/aspnet-ajax/tabstrip-accessing-items-server-side.html)参考所需的选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:59:42.017

RadTabStrip 与 RadmultiPage 控件结合使用。您首先在其中定义 RafTabStrip 和 Tabs。然后有一个 RadMultiPage 并为您在 TabStrip 中定义的每个选项卡定义一个页面（类型 RadPageView）。控件需要添加到 PageView 而不是直接添加到选项卡。

我根据您在问题中定义的 TabStrip 创建了一个小型演示。

这是 TabStrip 代码：

```
<telerik:RadTabStrip ID="TabStrip" runat="server" MultiPageID="Monetary" SelectedIndex="0" >
            <Tabs>
                <telerik:RadTab Text="MonetaryTab">
                </telerik:RadTab>
                <telerik:RadTab Text="VTab">
                </telerik:RadTab>
                <telerik:RadTab Text="ColorTab">
                </telerik:RadTab>
                <telerik:RadTab Text="HistoryTab">
                </telerik:RadTab>
                <telerik:RadTab Text="AdTab">
                </telerik:RadTab>
            </Tabs>
        </telerik:RadTabStrip> 
```

现在这里是 RadMultiPage 定义：

```
<telerik:RadMultiPage ID="Monetary" runat="server" SelectedIndex="0" OnLoad="Monetary_Load">
            <telerik:RadPageView runat="server" ID="monetaryTabPageView"/>
            <telerik:RadPageView runat="server" ID="vTabPageView"/>
            <telerik:RadPageView runat="server" ID="colorTabPageView"/>
            <telerik:RadPageView runat="server" ID="historyTabPageView"/>
            <telerik:RadPageView runat="server" ID="adTabPageView"/>
        </telerik:RadMultiPage> 
```

请注意，我正在收听 RadMultiPage 的 OnLoad 事件。在这个演示中 - 当 RadMultiPage 加载时，我将创建图表并将其添加到我们拥有的 eacg 网页浏览中。这是事件处理程序代码：

```
 protected void Monetary_Load(object sender, EventArgs e)
    {
        AddChart(monetaryTabPageView);
        AddChart(vTabPageView);
        AddChart(colorTabPageView);
        AddChart(historyTabPageView);
        AddChart(adTabPageView);
    }

    private void AddChart(RadPageView pageView)
    {
        RadHtmlChart chart = new RadHtmlChart();
        chart.ChartTitle.Text = pageView.ID + " chart";
        pageView.Controls.Add(chart);
    } 
```

如您所见，我只是将控件直接添加到网页浏览的控件集合中。

注意：作为概念证明，我创建了一个空图表，即只定义了标题的图表。如果需要，您可以继续绑定一些有意义的数据。

这是外观的屏幕截图：

![TabStrip 演示](../Images/e4d4167eac82ca60c13d5330842715d0.png)

希望这能回答你的问题。

Lohith (Tech Evangelist, Telerik India)

# twitter-bootstrap - 是否可以在 Twitter Bootstrap 的模态中使用“行”和“跨度”？

> ID：11848258
> 
> 赞同：9
> 
> 时间：2012-08-07T14:33:20.190
> 
> 标签：twitter-bootstrap, modal-dialog

我正在尝试使用 Twitter Bootstrap 中的模式来实现联系表单。

理想情况下，我希望前两个字段集彼此对齐，第三个字段集（包含文本区域和提交按钮）占据模态框的整个宽度。

我曾尝试使用行和跨度使它们发挥得很好，但不确定如何去做。似乎没有一开始的 span12 。

有没有其他人取得过类似的成就？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-07T14:47:21.977

是的，只需使用“row-fluid”类将它放在模态体内，它将调整到可用空间（除非您更改了这些样式）：

```
<div class="row-fluid">
<div class="span6">something</div>
<div class="span6">something else</div>
</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-10T02:47:00.543

这是一个仅使用 Twitter Bootstrap 3 类的解决方案 - 即`row`,`col-sm-6`和`clearfix`:

**HTML**

```
...
<div class="modal-body row">
    <div class="col-sm-6" style="border: 1px solid black;">
        <p>First column with fieldset</p>
    </div>
    <div class="col-sm-6" style="border: 1px solid blue;">
        <p>Second column with fieldset</p>
    </div>
    <div class="clearfix">
    </div>
    <div class="col-sm-12" style="border: 1px solid red;">
        <p>Row that expands the whole width of modal &ndash; text area and submit button</p>
    </div>
</div>
... 
```

为下面的可见性添加了边框。`<p>`请注意，标签周围还有默认的 Bootstrap 填充，下面没有边框。

**渲染预览**

![上面呈现的 HTML 示例](../Images/3c506ca225adb79da9db8e31457713ed.png)

如果您想了解如何构造模态框的标题或页脚（在上例中的省略号之前/之后），您可以在[此处查看 Bootstrap 模态框的布局](http://getbootstrap.com/javascript/#modals)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T14:43:12.030

你可以做这样的事情

```
<div class="modal">
<form class="modal-form">
<div class="modal-header"></div>
<div class="modal-body"> input elements here </div>
<div class="modal-footer">
   <button type="submit" class="btn" data-dismiss="modal">Cancel</button>
   <button type="submit" class="btn btn-primary">Save</button>
</div>
</form>
</div>
<div class="modal"> 
```

希望这可以帮助，

# c# - 在实体框架中组合类型表和表继承

> ID：11848260
> 
> 赞同：1
> 
> 时间：2012-08-07T14:33:23.810
> 
> 标签：c#, entity-framework, database-design, class-table-inheritance

假设我有一个 table+class `A`，另一个 table+class`AType`代表不同类型的`A`，以及一个 table+class`B`继承自`A`.

`B`是某种类型的`A`，但它太复杂了，无法`A`在数据级别与其他类型的 相适应，并且需要在模式级别拥有自己的表 - 当然它是自己的类。

`B`仍然是 的一种`A`，所以我想在`AType`表示中有一个记录`B`，并且`type`归档在`A`记录中实际上是`B`s 指向该记录`AType`。我还希望能够添加更多继承自的表+类`A`，并对其 PK 进行硬编码。

现在，如果我直接使用 SQL，我会`A`为 PK 的继承者创建负值记录。这样，`AType`在数据级别添加的具有正 PK 的新 s 将永远不会与硬编码模式级别的冲突，并且作为一个很好的奖励，我可以很容易地分辨出哪些记录`A`是硬类型的，哪些是软类型 - 无需查看`AType`。

我是 Entity Framework 的新手，所以我不想在尝试传统方式之前应用黑客式的解决方案。那么在实体框架中解决这个问题的惯例是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:40:53.473

如果您想遵循您奇怪的方法，您必须手动处理键值 - 您将获得与 SQL 相同的结果，但它很容易出错（尤其是由于并发性）。它也不会生成您期望的漂亮 SQL，因为 EF 不会理解隐藏在键值中的逻辑，因此即使您尝试仅查询`A`，它也会连接所有派生表以查找哪些记录确实是正确`A`的 - 这就是 EF 处理的方式TPT 继承。

# javascript - 将 javascript 对象保存为字符串

> ID：11848264
> 
> 赞同：0
> 
> 时间：2012-08-07T14:33:29.047
> 
> 标签：javascript, mysql

这是一个游戏应用程序。在我的游戏中，我想在我的数据库的单个字段中保存对玩家的特殊效果。我知道我可以只放一个参考 ID 并做另一张桌子，我还没有取消这个选项。编辑：（添加信息）这是用于节点中的服务器而不是浏览器。

我考虑存储数据的方式是作为 javascript 对象，如下所示：

```
effects={
           shieldSpell:0,
           breatheWater:0,
           featherFall:0,
           nightVision:0,
           poisonResistance:0,
           stunResistance:0,
           deathResistance:0,
           fearResistance:0,
           blindResistance:0,
           lightningResistance:0,
           fireResistance:0,
           iceResistance:0,
           windResistance:0} 
```

将其存储为字符串并使用 effects=eval(effectsString) 似乎很容易 有没有一种简单的方法可以使它成为一个字符串，或者我必须这样做：

```
effectsString=..."nightVision:"+effects.nightVision.toString+",poisonResistance:"+... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T14:36:17.243

像这样序列化：

```
JSON.stringify(effects); 
```

像这样反序列化：

```
JSON.parse(effects); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T14:36:59.207

使用[JSON.stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

这会将 JS 对象转换为[JSON](http://json.org/)。然后，您可以使用[JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)轻松反序列化它。不要使用该`eval`方法，因为它会邀请[跨站点脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)

```
//Make a JSON string out of a JS object
var serializedEffects = JSON.stringify(effects);
//Make a JS object from a JSON string
var deserialized = JSON.parse(serializedEffects); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:37:41.067

JSON 解析和字符串化是我用于这种类型的存储

```
var storeValue = JSON.stringify(effects); //stringify your value for storage
// "{"shieldSpell":0,"breatheWater":0,"featherFall":0,"nightVision":0,"poisonResistance":0,"stunResistance":0,"deathResistance":0,"fearResistance":0,"blindResistance":0,"lightningResistance":0,"fireResistance":0,"iceResistance":0,"windResistance":0}"
var effects = JSON.parse(storeValue);  //parse back from your string 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T14:47:23.663

到目前为止，这是我想出的，只是想知道这个解决方案的缺点是什么。

```
 effectsString="effects={"
        for (i in effects){
           effectsString=effectsString+i+":"+effects[i]+","
        }
        effectsString=effectsString.slice(0,effectsString.length-1);
        effectsString=effectsString+"}" 
```

然后使对象只是

```
eval(effectsString) 
```

# java - displaytag 自定义分页

> ID：11848266
> 
> 赞同：3
> 
> 时间：2012-08-07T14:33:32.153
> 
> 标签：java, displaytag

我正在尝试设计样式`<displaytag>`以获得看起来很棒的东西。

官方演示如下：

[http://demo.displaytag.org/displaytag-examples-1.2/example-paging.jsp](http://demo.displaytag.org/displaytag-examples-1.2/example-paging.jsp) ![在此处输入图像描述](../Images/fa5c4e8c6455160af9ef676ed87f2a56.png)

但我只得到这个：

![我当前分页的风格](../Images/0a11353ba725bd942eb4c0229a2332fb.png)

如何更改 displaytag 的分页部分的呈现，以便页码在`<li>`元素中？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:58:40.853

要自定义分页，我必须添加一个`displayTag.properties`具有以下属性的文件：

```
paging.banner.no_items_found=<span class="pagebanner">No {0} found.</span>
paging.banner.one_item_found=<span class="pagebanner">One {0} found.</span>
paging.banner.all_items_found=<span class="pagebanner">{0} {1} found, displaying all {2}.</span>
paging.banner.some_items_found=<span class="pagebanner">{0} {1} found, displaying {2} to {3}.</span>

paging.banner.full=<div class="pagination"><ul><li class="prev disabled"><a href="{1}" class="next" title="first"><img src="static/images/first.png" alt="first" /></a></li><li class="prev disabled"><a href="{2}" class="next" title="previous"><img src="static/images/previous.png" alt="previous" /></a></li>{0}<li><a href="{3}" class="next" title="next"><img src="static/images/next.png" alt="next" /></a></li><li class="next"><a href="{4}" class="next" title="lest"><img src="static/images/last.png" alt="last" /></a></li></ul></div>
paging.banner.first=<div class="pagination"><ul><li class="prev"><a href="{1}" class="next" title="first"><img src="static/images/first.png" alt="first" /></a></li><li class="prev"><a href="{2}" class="next" title="previous"><img src="static/images/previous.png" alt="previous" /></a></li>{0}<li><a href="{3}" class="next" title="next"><img src="static/images/next.png" alt="next" /></a></li><li class="next"><a href="{4}" class="next" title="lest"><img src="static/images/last.png" alt="last" /></a></li></ul></div>
paging.banner.last=<div class="pagination"><ul><li class="prev"><a href="{1}" class="next" title="first"><img src="static/images/first.png" alt="first" /></a></li><li class="prev"><a href="{2}" class="next" title="previous"><img src="static/images/previous.png" alt="previous" /></a></li>{0}<li class="next disabled"><a href="{3}" class="next" title="next"><img src="static/images/next.png" alt="next" /></a></li><li class="next disabled"><a href="{4}" class="next" title="lest"><img src="static/images/last.png" alt="last" /></a></li></ul></div>
paging.banner.onepage=<div class="pagination"><ul>{0}</ul></div>

paging.banner.page.selected=<li><strong>{0}</strong></li>
paging.banner.page.link=<li><a href="{1}" title="Go to page {0}">{0}</a></li>
paging.banner.page.separator= 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T15:39:11.717

在 displayTag.properties 中：

```
paging.banner.placement=top

paging.banner.onepage=
paging.banner.first=<span class="pagination pagination-right"><ul>{0}<li><a href="{4}"         title="\u00daltima">...{6}</a></li></ul></span>
paging.banner.full=<span class="pagination pagination-right"><ul><li><a href="{1}" title="Primeira">1\u00aa</a></li>{0}<li><a href="{4}" title="\u00daltima">...{6}</a></li></ul></span>
paging.banner.last=<span class="pagination pagination-right"><ul><li><a href="{1}" title="Primeira">1\u00aa</a></li>{0}</ul></span>
paging.banner.page.link=<li><a href="{1}" title="P\u00e1gina {0}">{0}</a></li>
paging.banner.page.selected=<li class="disabled"><span>{0}</span></li>
paging.banner.page.separator= 
```

另一种格式

有关[http://www.displaytag.org/1.2/configuration.html的更多信息](http://www.displaytag.org/1.2/configuration.html)

# asp.net - SQL Server 与 Web 的 Access 数据库：令人信服的论点

> ID：11848270
> 
> 赞同：0
> 
> 时间：2012-08-07T14:33:51.050
> 
> 标签：asp.net, .net, sql-server, ms-access

我知道您认为“放下 SQL Server”（我也是），但我发现自己处于微妙的境地，需要我将其“出售”给我的新主管（而不是开发人员）。

我正在寻找的是非技术人员的令人信服的论据，以及一些“略微”技术但并不真正理解差异的论据。我很难说服我现在的商店，这不仅效率极低，而且在很多方面都很危险。我不能给他们一篇论文来说服他们。我可以“快速”地给他们什么论据，让他们明白这可能有多严重？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:39:01.517

这真的取决于。如果钱是问题，我建议使用 sql express。

还有这个：

[http://support.microsoft.com/kb/303528](http://support.microsoft.com/kb/303528)

> Microsoft Jet 不适用于高压力服务器应用程序、高并发服务器应用程序或每周 7 天、每天 24 小时的服务器应用程序。这包括服务器应用程序，例如 Web 应用程序、商务应用程序、事务应用程序和消息传递服务器应用程序。对于这些类型的应用程序，最好的解决方案是切换到真正的基于客户端/服务器的数据库系统，例如 Microsoft 数据引擎 (MSDE) 或 Microsoft SQL Server。在 Microsoft Internet Information Server (IIS) 等高压力应用程序中使用 Microsoft Jet 时，您可能会遇到以下任一问题： 数据库损坏 稳定性问题，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:38:46.427

您没有提供任何信息来真正回答这个问题。你的申请是关于什么的？它需要处理什么负载？它将保留多少数据？备份和可用性要求是什么？ETC...

如果您正在构建一个仅供内部使用的小网页，Access 可能会让您到达那里。对于其他任何事情，或者为了未来的扩展，为了更好的工具集成，SQL Server 是正确的工具。只需下载免费快递版本并构建您的应用程序。可用的功能和与购买版本的兼容性是值得的。当您无法访问时，您将不得不丢弃所有内容并重新开始，使用 sql server express 您可以在不更改任何内容的情况下进行迁移。

# java - Java 共享地址空间和消息传递并行编程范例

> ID：11848273
> 
> 赞同：1
> 
> 时间：2012-08-07T14:33:59.123
> 
> 标签：java, shared-memory, message-passing

在*共享地址空间*模型中，进程之间共享一个公共地址空间，并表示为内存中的数据结构（如`ConcurrentHashMap`）。这提供了非常快速的数据共享的优势，因为共享对象位于单个计算机上（为了简单起见，我们假设如此）。由于进程可能发生冲突，各种锁机制（互斥锁）有助于确保访问共享内存时的互斥。这种方案缺乏可扩展性，因为处理器数量的增加会几何地增加共享内存上的流量，并且单台计算机最多只能有 8 个处理器。

在*消息传递*模型中，没有全局地址空间的意义。每个进程都有一个私有的本地内存。进程可以通过传递消息相互通信。与共享地址空间不同，消息传递模型提供了处理器和内存之间的可伸缩性，尽管需要复制公共数据。处理器的增加也会成比例地增加内存（用于该数据）的大小，尽管在这种情况下不需要锁定机制。

阅读“Thinking in Java”以获得灵感，我发现只有一个关于具有同步原理的共享地址空间模型的讨论。随着我的问题变得越来越复杂，我将尝试消息传递范式，据我所知，这本书没有介绍过。

您能否推荐 Java 本机类或任何经过验证的外部库来使用消息传递模型，例如 C++ 中的 MPI？任何指向该来源的链接将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:36:06.927

[Akka](http://akka.io/)是用于 JVM 的常用[actor](http://doc.akka.io/docs/akka/snapshot/java/untyped-actors.html)框架 - 适用于 Java 和 Scala。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:39:26.293

Apache **Hadoop**软件库是一个框架，允许使用简单的编程模型跨计算机集群对大型数据集进行分布式处理。 [http://hadoop.apache.org/](http://hadoop.apache.org/)

# iphone - 从txt列表文件中读取并在ios中设置许多对象

> ID：11848274
> 
> 赞同：0
> 
> 时间：2012-08-07T14:34:05.467
> 
> 标签：iphone, ios, xcode, properties

我，我正在编写一个必须读取 txt 内容的应用程序。这个 txt 就是这样一个属性文件，其列表格式如下：

```
1|Chapter 1|30

2|Chapter AA|7

3|Story of the United States|13

........ 
```

键用“|”分隔。

我在谷歌上搜索了很多，希望能找到任何“实用的解决方案”，但什么也没有……我如何阅读这些信息并设置许多对象，例如：

```
for    NSInterger *nChapter = the first element

for    NSString *title = the second element

for    NSInteger *nOfPages = the last element ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:37:03.283

NSString`- (NSArray *)componentsSeparatedByString:(NSString *)separator`可能是你最好的朋友。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-componentsSeparatedByString_](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-componentsSeparatedByString_)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:41:34.883

仅当您阅读[NSString 的类参考时：](https://developer.apple.com/library/mac/iPad/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

```
NSString *str = [NSString stringWithContentsOfFile:@"file.txt"];
NSArray *rows = [str componentsSeparatedByString:@"\n"];

for (NSString *row in rows)
{
    NSArray *fields = [row componentsSeparatedByString:@"|"];
    NSInteger nChapter = [[fields objectAtIndex:0] intValue];
    NSString *title = [fields objectAtIndex:1];

    // process them in here
} 
```

# xml - 用于略有不同的 xml 文件的单个 XSD 架构

> ID：11848292
> 
> 赞同：0
> 
> 时间：2012-08-07T14:34:51.470
> 
> 标签：xml, validation, xsd

我有一些 xml 进来，我想验证它看起来像这样

```
<hotel>
    <reservation>
         <hotelroom>47</hotelroom>
         ...
    </reservation>
</hotel> 
```

或者可能是

```
<hotel>
    <restaurant>
         <tablenumber>3</tablenumber>
         ...
    </restaurant>
</hotel> 
```

这个想法是，如果它是酒店的预订，我想验证一组数据，如下所示：请求的酒店房间号、地址等，然后如果它是餐厅的一些 xml，那么我想要桌号、人名等。

我刚刚学习 xsd 所以还是个菜鸟。我已经为每种情况编写了一个模式，但我不确定该怎么做，因为我觉得我想在 xsd 文件中写一些东西来说明如果预订出现然后验证这个 ELSE 如果餐厅出现然后验证这个。

我已经阅读了 W3 xsd 教程，但什么也看不到。

感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:49:02.347

你基本上会想要 a`reservation`或 a `restuarant`。您应该为此使用[xsd:choice 。](http://www.w3schools.com/schema/el_choice.asp)然后可以使用模式进行验证。

# java - 通过单击 jbutton 最小化 jframe 窗口

> ID：11848293
> 
> 赞同：0
> 
> 时间：2012-08-07T14:34:52.263
> 
> 标签：java, swing, jframe, awt, jdialog

我知道要最小化 jframe，我需要使用 setExtendedState(JFrame.ICONIFIED);
但我想弄清楚的是如何到达框架。此对话框是父对话框的子对话框。这里是构造函数。

```
 public EdiBaseDialog(EdiDialogHandler edh, Frame parent, TCSession theSession) {
      super(parent, false);
      session = theSession;
      createDialog();
   } 
```

因此，当我尝试`setExtendedState(JFrame.ICONIFIED)`在我的 jbutton actionPerformed 中添加命令时。这是在 JPanel 方法中。

我不知道如何解决框架。

```
??.setState(JFrame.ICONFIED); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:40:35.270

[`Dialog.getOwner()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#getOwner%28%29)从对话框中调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:19:56.057

您需要做的是在组件层次结构中上升，直到到达 Frame。Swing 中已经有辅助方法来执行此操作。试试 SwingUtilties：

> SwingUtilities.getAncestorOfClass(JFrame.class, this);

（其中“this”可以是层次结构中的任何组件）当然，这只有在您的对话框形成适当的层次结构时才有用（没有使用 NULL 所有者的对话框。如果是这种情况，您必须通过 Frame 传递一些方法或构造函数。

# android - android listfragment + 滑动项目

> ID：11848296
> 
> 赞同：0
> 
> 时间：2012-08-07T14:34:57.883
> 
> 标签：android, android-viewpager, fragment, swipe

我正在开发一个应用程序，其中包括： 1\. 主要活动，在底部有操作栏、列表片段和一些按钮 2\. 当您单击某个项目时，会启动另一个活动 - 顶部的一些按钮和下面的 webview .

我一切正常，但现在我必须在列表中的项目之间实现滑动，我不知道如何在活动之间滑动。我虽然将项目更改为片段，但我不知道应该如何制定布局。我读过关于 viewpager 的博客，但据我所知，你只能用它在 5 个标签之间滑动，而且我在 listfragment 中有 20 多个项目。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:44:40.237

创建一个以 ViewPager 为主要控件的 Activity。将项目更改为片段并通过 FragmentAdapter 将它们添加到 ViewPager

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:45:44.820

您可以继续使用用户 viewpager。页数没有任意限制。

这将是您最快的解决方案，并且似乎涵盖了您正在做的事情。

# android - 如何清除所有地图覆盖或标记？

> ID：11848298
> 
> 赞同：1
> 
> 时间：2012-08-07T14:34:58.343
> 
> 标签：android, android-maps

我使用它，但标记仍在地图上。当我在看起来像 0 后查看覆盖大小时，它们也在地图上。

我怎样才能做到这一点？

> mapView.getOverlays().clear();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:45:18.110

`mapView.invalidate()`清除叠加层后致电。

# velocity - 列出速度模板中的所有上下文键

> ID：11848300
> 
> 赞同：0
> 
> 时间：2012-08-07T14:35:02.250
> 
> 标签：velocity

有没有办法从当前正在扩展的模板中列出速度上下文中的所有键？我过去通过在上下文中包含对上下文的引用来完成此操作。我想这种方法还可以，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:11:21.057

这是传统的方式，没有任何问题。如果您使用的是 VelocityTools，则可以使用 ContextTool 来完成此操作以及更多功能。

# javascript - 键盘友好的 AJAX 搜索

> ID：11848305
> 
> 赞同：1
> 
> 时间：2012-08-07T14:35:10.267
> 
> 标签：javascript, jquery, css

我已经实现了类似于[此处](http://www.w3schools.com/php/php_ajax_livesearch.asp)示例的 AJAX 搜索。在此示例中，您可能会注意到您可以使用`TAB`key 在搜索结果之间切换。在我的搜索结果中，有一个格式如下的表格：

```
*Client*  *Status*  *Hostname*
<client1>   value     value
<client2>   value     value
<client3>   value     value 
```

`Client1, client2, client3`实际上是超链接并且在类中`search_result_entry`。因此，当按下向下箭头键时，我希望焦点转到`client1`链接。键在`TAB`这里有效，但箭头键会更直观。status 和 hostname 中的值不可点击。另外，请注意我正在使用`overflow: auto`，因此如果搜索结果过多，则会显示滚动条。在这种情况下，按两次 TAB 键可以让我进入第一个搜索结果。

我正在反复试验并尝试了以下代码，但它不起作用：

```
if (e.which == 40){    // 40 is the ASCII for down arrow key
    $("#keyword").focusout();
    $("#results").focus(function(){
            $(this).next("td").focus();
    });
} 
```

如何使用向下箭头键将焦点移至搜索结果并使用向下/向上箭头键在其中导航？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:41:56.647

```
//Keep track of the focused element
var focusedElement = null;

// update it on focus
$("#results").focus(function(){
  focusedElement = this;
}); 
```

在你的处理程序的某个地方：

```
//... code
if (e.which == 40){    // 40 is the ASCII for down arrow key
  if(focusedElement) $(focusedElement).next().focus();
  else $('#results').somethingToGetYourFirstElementDependingOnYourCode().focus();
}
//... more code 
```

第一部分将跟踪当前焦点元素（如果有），第二部分将更新焦点元素（这将触发第一部分并更新当前焦点元素）

# solr - 使用 Solr 的 NGramFilterFactory 进行相似性搜索

> ID：11848306
> 
> 赞同：3
> 
> 时间：2012-08-07T14:35:11.627
> 
> 标签：solr, sunspot, similarity, n-gram, dismax

我正在尝试使用 Solr 中的 NGramFilterFactory（在 Rails 中使用 Sunspot）来查找类似的标题。我设法向我的 solr schema.xml 添加了一个新字段，如下所示：

```
<fieldType name="text_ngrm" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.NGramFilterFactory" minGramSize="2" maxGramSize="4"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

由于我在 rails 应用程序中使用 sunpsot，因此通过动态字段将新字段添加到 sunspot。这一切都奏效了，我现在可以使用 NGramFilterFactory 搜索我的模型。我不确定的是，如何配置 solr 以搜索类似的标题。以下是我的具体问题：

1.  当我尝试查询相似的标题时，使用 dismax 查询解析器是否有意义？
2.  [(Minimum 'Should' Match)](http://wiki.apache.org/solr/DisMaxQParserPlugin#mm_.28Minimum_.27Should.27_Match.29)参数如何帮助我找到相似的标题？
3.  基于我究竟会选择ngram min。和最大。尺寸？

感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T23:45:46.383

你可以做几件事：

1.  ***dismax*****没有模糊搜索**。因此，如果您想在用户搜索“homes”或“halmes”时返回“holmes”，最好更改为*edismax*解析器。
2.  ***最小“应该”匹配***可以帮助您定义搜索结果的灵活性取决于匹配的单词数量。假设用户查找*“Batman Dark Night”*，并且您已*标记化“Batman Darker Night”*和“Batman Returns”记录。如果 mm 为 2，则仅*返回'Batman Dark Night' ，因为它与**'Batman' 和 'Night'*的最小单词数匹配。另一方面， *“蝙蝠侠归来”*只匹配其中一个，因此不会被归还。
3.  ***NGramFilterFactory***主要用于自动完成。我认为*PorterStemFilterFactory*更适合您正在寻找的东西。你可以在这里找到一些信息[http://wiki.apache.org/solr/LanguageAnalysis#Notes_about_solr.PorterStemFilterFactory](http://wiki.apache.org/solr/LanguageAnalysis#Notes_about_solr.PorterStemFilterFactory)

# openerp - 2 在 OpenERP 中双击树/列表时创建的线程

> ID：11848308
> 
> 赞同：0
> 
> 时间：2012-08-07T14:35:14.993
> 
> 标签：openerp, erp

为什么 OpenERP 在执行 tree_but_open 事件时会创建 2 个不同的线程。当我双击树中的一个项目时，它似乎为每次单击创建 2 个不同的线程，然后在每个线程中执行我的 Python 方法。

这是正常行为吗？

```
 <record id="action_wash_st_method1" model="ir.actions.server">
            <field name="type">ir.actions.server</field>
            <field name="condition">True</field>
            <field name="state">code</field>
            <field name="model_id" ref="model_view_tree_display_address_list"/>
            <field eval="5" name="sequence"/>
            <field name="code">
self.view_calc_sales_tax(cr, uid, context)
</field>
           <field name="name">wash state action request</field>
        </record> 

<record model="ir.values" id="action_wash_st_tax_trigger_method1" >
            <field name="key2" eval="'tree_but_open'" />
            <field name="model" eval="'view.tree.display.address.list'" />
            <field name="name">Method1 Wash State</field>
            <field name="value" eval="'ir.actions.server,%d'%action_wash_st_method1"/>
            <field name="object" eval="True" />
 </record> 
```

OpenERP 输出：当我双击树/列表时，请注意我的方法中打印的 2 个不同的线程 ID。

```
********************before calling button_reset_taxes, 47494460417792
**************Entering button_reset_taxes: 47494460417792
2012-08-07 04:09:26,383 30080 INFO ? werkzeug: 71.195.148.241 - - [07/Aug/2012 04:09:26] "POST /web/action/run HTTP/1.1" 200 -
2012-08-07 04:09:26,402 30080 INFO ? werkzeug: 71.195.148.241 - - [07/Aug/2012 04:09:26] "POST /web/treeview/action HTTP/1.1" 200 -
2012-08-07 04:09:26,496 30080 INFO ? werkzeug: 71.195.148.241 - - [07/Aug/2012 04:09:26] "POST /web/session/eval_domain_and_context HTTP/1.1" 200 -
********************before calling button_reset_taxes, 47494452025088
**************Entering button_reset_taxes: 47494452025088
2012-08-07 04:09:26,590 30080 INFO ? werkzeug: 71.195.148.241 - - [07/Aug/2012 04:09:26] "POST /web/action/run HTTP/1.1" 200 - 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:18:22.737

是的，这是正常行为。

即使在从 webclient 导入数据时。

当您单击“导入”时，它会等待服务器的回复（检查是否将网络置于加载模式）。如果在此时间内再次单击，它将再次导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T05:05:05.707

按钮是视图中的一个单击元素，现在您说您单击双击按钮导致时间触发在操作上定义的按钮操作。否则是正常的，它不做任何匿名活动。

谢谢你

# php - 查找PHP字符串中的数字字符

> ID：11848317
> 
> 赞同：0
> 
> 时间：2012-08-07T14:36:05.607
> 
> 标签：php, preg-match, numeric

很抱歉问这个简单的问题，但我似乎找不到任何答案。

如何检查字符串中是否有数字？

我试过了：

```
 $string = "this is a simple string with a number 2432344";
    if (preg_match('/[^0-9]/', "$string")) {
        echo "yes a number";
    } else {
        echo "no number";
    } 
```

好像不行...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T14:37:10.490

如果要查找数字，请不要`^`在正则表达式中否定字符集。这意味着“匹配*除*数字以外的任何内容”。

```
$string = "this is a simple string with a number 2432344";

if (preg_match('/[0-9]/', "$string")) {
    echo "yes a number";
} else {
    echo "no number";
} 
```

此外，您可以只使用`\d`而不是`[0-9]`，而`$string`不是`"$string"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:45:48.827

`^`只会否定正则表达式中的内容。你不需要使用它。

# java - 当服务器需要客户端证书时如何使用 wsimport？

> ID：11848321
> 
> 赞同：10
> 
> 时间：2012-08-07T14:36:14.243
> 
> 标签：java, web-services, jax-ws, wsimport

我有一个使用相互 SSL 身份验证的 Web 服务。安装客户端证书后，我可以在浏览器中正常访问它。

我需要能够使用`wsimport`生成 Java 代码来访问该服务来访问它。

如何设置我的凭据以便我可以使用 访问 URL `wsimport`？

这是我正在尝试的示例，但由于无法进行身份验证而超时。

`wsimport ./sample.wsdl -p com.company.ws.sample -Xnocompile -d ./src -extension -keep -XadditionalHeaders`

谢谢你的帮助

**编辑：**

这就是`wsimport`打印的内容。WSDL 绝对是有效的，在给定的位置，只需弄清楚如何传递我的凭据以进行身份​​验证：

```
wsimport https://wsdl.location.com?WSDL -p com.company.ws.sample -Xnocompile 
-d ./src -extension -keep -XadditionalHeaders

parsing WSDL...

[ERROR] Received fatal alert: handshake_failure

Failed to read the WSDL document: "https://wsdl.location.com?WSDL", because 1) could 
not find the document; /2) the document could not be read; 3) the root element of 
the document is not <wsdl:definitions>.

[ERROR] failed.noservice=Could not find wsdl:service in the provided WSDL(s): 

 At least one WSDL with at least one service definition needs to be provided.

    Failed to parse the WSDL. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T16:31:39.623

您可以直接调用 WsImport java 类 ( [source](http://www.docjar.com/html/api/com/sun/tools/internal/ws/WsImport.java.html) ) 并添加 JVM 必要的参数，以便 Java 知道在哪里查找客户端证书。

就像是

```
java -classpath C:\jdk160_29\lib\tools.jar -Djavax.net.ssl.trustStore=c:\jdk160_29\.mykeystore com.sun.tools.internal.ws.WsImport https://host:8443/Webservice?wsdl -p com.test -s ./src" 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-14T15:29:55.557

我设法通过设置 _JAVA_OPTIONS 环境变量和所有额外的系统属性来实现这一点；作为 Windows 批处理文件，它看起来像这样（根据需要输入您的密码：

```
setlocal
set _JAVA_OPTIONS=%_JAVA_OPTIONS% -Djavax.net.ssl.trustStore="%JAVA_HOME%\jre\lib\security\cacerts" -Djavax.net.ssl.keyStoreType=PKCS12 -Djavax.net.ssl.keyStorePassword={...passwordForThePFX...} -Djavax.net.ssl.keyStore=r:\cert.pfx
wsimport -s . -verbose https://your.host.name/path/to/service?wsdl
endlocal 
```

为了理智起见，长 'set' 行中的 Java 选项是：

```
-Djavax.net.ssl.trustStore="%JAVA_HOME%\jre\lib\security\cacerts"
-Djavax.net.ssl.keyStoreType=PKCS12
-Djavax.net.ssl.keyStorePassword={...passwordForThePFX...}   
-Djavax.net.ssl.keyStore=R:\cert.pfx 
```

您可能需要也可能不需要指定`trustStore`设置；我不得不这样做，因为我已经安装了几次，Java 为我选择了错误的 cacerts 文件。

`keyStorePassword`同样，如果密钥库不受密码保护，您将不需要。至于`keyStoreType`，如果您不访问 Java 密钥库，则需要指定此项。

最终，唯一的“强制性”选项是`keyStore`定义客户端证书和密钥所在的位置（并且仅当客户端证书不在任何核心 Java 证书存储中时才是强制性的）。就目前而言，上面的示例适用于 PFX 文件中的客户端证书，该文件是通过从 Windows 证书存储中导出而生成的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-28T08:28:36.410

我发现更容易（无需使用 -D，类路径，...）：
1\. 使用浏览器通过 ssl 下载 wsdl（通过双击密钥库在默认浏览器中安装证书）甚至更容易使用显示 wsdl 内容的 soapUI（通过 config/ssl 安装密钥库）
2\. 对下载的 wsdl 运行 wsimport
就是这样。

# json - Twisted 中单个请求的多重响应

> ID：11848323
> 
> 赞同：1
> 
> 时间：2012-08-07T14:36:46.477
> 
> 标签：json, twisted, urllib2, multiple-results

我希望在发送一个请求后能够从服务器接收多个响应。这都是以扭曲的方式实现的。服务器：

```
class HandleReq(resource.Resource):
    def __init__(self):
        resource.Resource.__init__(self)

    def render_GET(self, request):
        """
          Here I basically connect to another server and get multiple
          responses"""
         d = defer.Deferred()
         interface = RemoteService(request, i_deferred)
         self._connect_to_RemoteService(bf_command, interface)
         self.handleCallbacks(i_deferred, request)
         return server.NOT_DONE_YET

    def render_POST(self, request):
        '''to make sure both GET/POST are handled'''
        return self.render_GET(request)

    def handleCallbacks(self, d, req):
        msg = d.addCallback(self.getEvent)
        d.addCallback(self.postResponse(req, msg))
        return None

    def getEvent(self, msg):
        return msg

    def postResponse(self, request, response):
        def post(event):
            request.setHeader('Content-Type', 'application/json')
            request.write(response)
            request.finish()
            self.postResponse(request, response)
            return server.NOT_DONE_YET
      return post 
```

和客户：

```
from urllib2 import URLError, HTTPError
api_req = 'http://localhost:8000/req' + '?' + urllib.urlencode({"request": request})
req = urllib2.Request(api_req)
try:
    response = urllib2.urlopen(api_req)

except HTTPError, e:
            print 'Problem with the request'
            print 'Error code: ', e.code
except URLError, e:
            print 'Reason: ', e.reason
else:
     j_response = json.loads(response.read()) 
```

基本上我想要的是服务器不要关闭连接（request.finish（）），而是继续发送响应；并且客户端应该能够接收这些消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T16:54:08.923

HTTP 不能以这种方式工作。HTTP 请求只有一个响应。Twisted Web 不允许您发送多个响应，因为这违反了 HTTP 规范，并且没有 HTTP 客户端能够弄清楚发生了什么。

可能有另一种方法可以实现您的基本目标，但无论如何，它不会涉及向单个 HTTP 请求发送多个 HTTP 响应。

# java - 性能说明：未使用变量的代码运行速度更快

> ID：11848325
> 
> 赞同：15
> 
> 时间：2012-08-07T14:36:49.733
> 
> 标签：java, multithreading, performance, jvm

我之前做了一些性能测试，无法解释我得到的结果。

在运行下面的测试时，如果我取消注释`private final List<String> list = new ArrayList<String>();`，性能会显着提高。在我的机器上，当该字段存在时，测试在 70-90 毫秒内运行，而当它被注释掉时，测试运行时间为 650 毫秒。

我还注意到，如果我将 print 语句更改为`System.out.println((end - start) / 1000000);`，没有变量的测试将在 450-500 毫秒而不是 650 毫秒内运行。当变量存在时，它不起作用。

**我的问题：**

1.  考虑到我什至不使用该变量，任何人都可以解释有或没有变量的几乎 10 的因子吗？
2.  该打印语句如何改变性能（特别是因为它出现**在**性能测量窗口之后）？

ps：顺序运行时，3个场景（有变量，无变量，不同的打印语句）都需要260ms左右。

```
public class SOTest {

    private static final int ITERATIONS = 10000000;
    private static final int THREADS = 4;

    private volatile long id = 0L;
    //private final List<String> list = new ArrayList<String>();

    public static void main(String[] args) throws Exception {
        ExecutorService executor = Executors.newFixedThreadPool(THREADS);
        final List<SOTest> objects = new ArrayList<SOTest>();
        for (int i = 0; i < THREADS; i++) {
            objects.add(new SOTest());
        }

        //warm up
        for (SOTest t : objects) {
            getRunnable(t).run();
        }

        long start = System.nanoTime();

        for (SOTest t : objects) {
            executor.submit(getRunnable(t));
        }
        executor.shutdown();
        executor.awaitTermination(10, TimeUnit.SECONDS);

        long end = System.nanoTime();
        System.out.println(objects.get(0).id + " " + (end - start) / 1000000);
    }

    public static Runnable getRunnable(final SOTest object) {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                for (int i = 0; i < ITERATIONS; i++) {
                    object.id++;
                }
            }
        };
        return r;
    }
} 
```

**编辑**

请参见下面 3 种场景下 10 次运行的结果：

*   没有变量，使用简短的打印语句
*   没有变量，使用长打印语句（打印对象之一）
*   顺序运行（1 个线程）
*   与变量

```
1   657 473 261 74
2   641 501 261 78
3   651 465 259 86
4   585 462 259 78
5   639 506 259 68
6   659 477 258 72
7   653 479 259 82
8   645 486 259 72
9   650 457 259 78
10  639 487 272 79 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T15:20:33.623

**清除（错误）共享**

由于内存中的布局，对象共享缓存行......它已经解释了很多次（甚至在这个站点上）：这是一个[很好](https://sites.google.com/site/1024cores/home/lock-free-algorithms/false-sharing---false)的进一步阅读来源。[该问题同样](http://www.bluebytesoftware.com/blog/2009/10/20/FalseSharingIsNoFun.aspx)适用于 C# （或 C/C++）

当您通过添加注释掉的行来填充对象时，共享会减少，并且您会看到性能的提升。

*编辑：我错过了第二个问题：*

* * *

> 该打印语句如何改变性能（特别是因为它出现在性能测量窗口之后）？

我猜还不够热，打印 GC 和编译日志，这样你就可以确定没有干扰并且代码已经被编译了。 `java -server`需要 10k 次迭代，最好不要全部在主循环中生成好的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:29:28.803

您正在达到执行硬件的微妙效果。您 SOTest 对象在内存中非常小，因此所有 4 个实例都可能适合内存中的同一缓存行。由于您使用的是 volatile，这将导致不同内核之间的缓存垃圾（只有一个内核可能有缓存线脏）。

当您在 ArrayList 中添加注释时，内存布局会发生变化（ArrayList 在 SOTest 实例之间创建），并且 volatile 字段现在进入不同的缓存行。CPU 的问题消失了，因此性能飞涨。

证明：注释掉 ArrayList 并放入：

```
long waste1, waste2, waste3, waste4, waste5, waste6, waste7, waste8; 
```

这会将您的 SOTest 对象扩大 64 个字节（奔腾处理器上一个高速缓存行的大小）。性能现在与使用 ArrayList 相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:08:00.257

这只是一个想法，我不知道如何验证它，但这可能与缓存有关。随着 ArrayList 的出现，您的对象变得更大，因此较少数量的对象适合某些给定的缓存内存区域，从而导致更多的缓存未命中。

你实际上可以尝试的是使用不同大小的 ArrayLists，从而改变你的类实例的内存占用，看看它是否对性能有影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T15:13:14.573

相当有趣的旅程。这更像是“这是我的结果答案”。我怀疑/希望其他人会提出更好的回应。

您显然遇到了一些有趣的优化点。我怀疑`objects.get(0).id`在长`println`语句中添加了一些关于该`id`字段使用的优化。除了`++`没有其他用法，`id`因此优化器可能正在优化一些访问，`volatile id`从而提高速度。只需使用`id`a 访问该字段即可获得`long x = objects.get(0).id;`相同的性能提升。

这个`List`领域更有趣。如果添加了字段，则会发生相同的性能改进，`private String foo = new String("weofjwe");`但如果它*没有*`private String foo = "weofjwe";`创建对象，则不会，因为它`"..."`是在编译时完成的。我*确信*这`final`是相关的，但似乎不是。我只能推测这与构造函数优化有关，并添加了`new`导致优化停止的原因，尽管我本来`volatile`会更有效地做到这一点。

# windows - 如何通过 MS-DOS 命令打印当前目录名称

> ID：11848327
> 
> 赞同：37
> 
> 时间：2012-08-07T14:36:53.243
> 
> 标签：windows, command-line, command-prompt

我需要在 CD 命令之后打印当前目录名称。

有可能吗？谢谢！

```
echo off
echo. 
echo This batch program deletes some files  
echo. 

pause

cd "D:\Folder1\"  

pause 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-08-07T14:39:33.170

只需使用`cd`不提供任何参数。来自`cd /?`：

> 键入不带参数的 CD 以显示当前驱动器和目录。

# iphone - 如何为 Xcode 构建和编译 PJSIP，使用示例代码 IPJSUA 进行测试？

> ID：11848333
> 
> 赞同：16
> 
> 时间：2012-08-07T14:37:20.673
> 
> 标签：iphone, ios, xcode, ipad, pjsip

如何使用 xCode 构建和编译 PJSIP 并运行示例代码 IPJSUA？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-31T11:56:38.510

首先，您需要打开终端。终端可以在应用程序->实用程序->终端中找到。打开终端后，确保指向桌面，以便更轻松地获取数据文件夹。只需输入：

> 光盘桌面

恭喜，您已经在桌面上。现在继续输入。

> svn co [http://svn.pjsip.org/repos/pjproject/trunk](http://svn.pjsip.org/repos/pjproject/trunk) pjproject

该代码意味着您将 pjproject 从网站下载到您的桌面。完成 PJSIP 下载后，您需要添加一个 config_site.h。老实说，我不知道我们应该怎么做，但只要遵循它。:D

如何创建 config_site.h？只需复制config_site_sample.h，粘贴，将内容改成这样。

![在此处输入图像描述](../Images/ff2c3290bab27f0715ef5aa72b082284.png)

在此之后，我们需要更改configure-iphone。我想到了。如果您只想在模拟器上运行，则需要更改 DevPath。如果您想在设备上进行测试，请保持原样。

现在，我将给出在模拟器上运行的示例。打开pjproject，你会发现configure-iphone。使用文本编辑器打开文件并更改 DEVPATH 并硬编码 IPHONESDK。

devpath 看起来像这样。

> DEVPATH=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer

请记住，这指的是 Xcode 应用程序的*路径*。如果你想确定，去finder->applications->xcode->show package contents。我还硬编码了 IPHONESDK。

> IPHONESDK=iPhoneSimulator5.1.sdk

完成后，我们将返回航站楼。确保您已经在 pjproject 文件夹中。输入这个。

> 导出 CC=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc
> 
> 导出 CFLAGS="-O2 -m32 -miphoneos-version-min=5.0 -g -ggdb -g3 -DNDEBUG"
> 
> 出口 LDFLAGS="-O2 -m32"

之后，您可以对其进行配置。只需在终端上单击它即可。如果要在自己的设备上测试，不需要更改configure-iphone，导出CC等，直接configure-iphone即可。

> ./configure-iphone

完成后，继续输入以下命令来构建库和**所有依赖项**。下面的这一行是魔法发生的地方，它需要成功完成才能继续。

> 使 dep && 使清洁 && 使

你会发现所有的库都会编译。如果我们想创建一个新项目，生成的库可以帮助我们。-> 这就是我现在的想法。现在你差不多完成了，只需转到 pjsip-apps->src->ipjsua。您将找到 Xcode 项目，只需单击它即可在您的 xcode 中打开。单击构建并运行。你会发现这样的界面。

![在此处输入图像描述](../Images/0da395f3bdc061a00b38dd79cee31331.png)

如果你想在你的设备上测试，你必须有证书和私钥链。我无法解释，因为我从我的公司获得了证书。他们提供它。

如果您想尝试，您必须先创建一个 SIP 帐户。您可以使用 sip2sip 或 ekiga。在这里，我尝试了ekiga。例如，我的 SIP 是 12345678@ekiga.net 和 87654321@ekiga.net。

在模拟器之后，我们键入 +a 以添加新帐户。接下来，您必须输入您的 SIP 名称。记得输入“sip:”。永远不要忘记。这是示例：sip:12345678@ekiga.net。

之后您必须输入 URL 地址，只需输入 ekiga.net，因为那是我们的 URL。此 URL 表示我们的服务器。Tor 例如，sip:ekiga.net。

接下来是身份验证领域。键入与 URL 地址相同的 sip:ekiga.net。接下来是您的用户名。在这里，我的用户名是 12345678。您不需要添加 sip 或使用@ekiga.net 键入。最后是您的密码。注册后，它会自动将其添加到帐户中。只需转到文本字段，然后按 Enter。它会为你刷新。

接下来，我们需要添加好友。键入`+b`，您必须输入 URI 地址。键入`sip:87654321@ekiga.net`，您就完成了。返回文本字段，它将自动添加到您的好友列表中。

您会看到您的帐户仍处于离线模式。您需要在拨打电话之前更改为在线模式。只需通过类型 t 更改状态，然后按 Enter。

之后你可以通过键入 M 和键入 1 拨打电话，因为我们的好友不是 1。1 是他们的 ID。你可以打电话。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T10:06:55.977

请检查以下链接。您可以从那里获取源代码并为设备和模拟器构建。

[https://github.com/radif/SIPHON-SIP-Client-that-actually-compiles](https://github.com/radif/SIPHON-SIP-Client-that-actually-compiles)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T10:22:25.590

对于 XCode 4.5

->

```
export DEVPATH=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/
export IPHONESDK=iPhoneSimulator5.1.sdk
export CC=/Applications/Xcode.app/Contents/Developer/usr/bin/gcc 
```

# jsf - 来自其他 bean 的 JSF Bean 属性

> ID：11848334
> 
> 赞同：2
> 
> 时间：2012-08-07T14:37:38.987
> 
> 标签：jsf, static, set, javabeans

我尝试将一个 ManagedBean (SessionScoped) (loginBean) 的属性带到另一个 (RequestScoped) ManagedBean (newsBean)：

```
<c:set value="#{loginBean.user.nickname}" target="#{newsBean}" property="author" />
            <h3>News verfassen:</h3>
            <h:form>
                <p:inputText label="Titel" value="#{newsBean.title}"></p:inputText>
                <p:inputTextarea label="Inhalt" value="#{newsBean.description}"></p:inputTextarea>
                <p:commandLink type="button" value="Absenden" action="#{newsBean.writeMsg}"></p:commandLink>
            </h:form> 
```

我认为我可以使用 c:set 标记，就像我想“静态”设置属性一样.. :)

也许有人可以帮助我？

多米

----- 回答后 ------

登录豆：

```
@ManagedBean
@SessionScoped
public class LoginBean {
public LoginBean() {
    email = "";
    pwd = "";
    device = "";
    user = null;
}

private String email;
private String pwd;
private User user;
private String device;
/**
 * @return the user
 */
public User getUser() {
    return user;
}

/**
 * @param user the user to set
 */
public void setUser(User user) {
    this.user = user;
} 
```

和新闻豆：

```
public class NewsBean {

@ManagedProperty("#{loginBean.user.nickname}")
private String nickname;

private String title;
private String description;

/**
 * Creates a new instance of NewsBean
 */
public NewsBean() {
} 
```

是的，我还在用户中声明了昵称的 getter /setter！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:41:35.360

只需使用[`@ManagedProperty`](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ManagedProperty.html).

```
@ManagedBean
@ViewScoped
public class NewsBean {

    @ManagedProperty("#{loginBean.user.nickname}")
    private String author;

    // ...
} 
```

# c# - 字符串日期需要格式

> ID：11848335
> 
> 赞同：0
> 
> 时间：2012-08-07T14:37:40.263
> 
> 标签：c#

我有一个这样的字符串日期：

```
var sDate = '3/3/2012' 
```

它最终进入 DateTime.ParseExact(sDate, "MM/dd/yyyy") 并且由于缺少前导零而失败。

添加前导零的最佳方法是什么？

我知道 TryParse 会起作用，但目前无法重构。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T14:39:28.467

> 添加前导零的最佳方法是什么？

为什么要这么做？只需使用它*实际*`ParseExact`获得的格式，即.*`M/d/yyyy`*

 *格式字符串的全部意义在于让您声明数据的格式 - 而不是让您*更改*数据的格式。

请注意，您可以使用[此重载](http://msdn.microsoft.com/en-us/library/332de853.aspx)指定多个模式，因此您始终可以同时传入`M/d/yyyy` *and* `MM/dd/yyyy`。我相信`M/d/yyyy`无论如何都会使用零填充的......*

# android - 如何在我的应用程序中显示我创建的键盘，而不是默认键盘

> ID：11848337
> 
> 赞同：0
> 
> 时间：2012-08-07T14:37:40.927
> 
> 标签：android, android-layout, android-intent, android-widget

我创建了这个生成 EditText 表的应用程序。这是布局的分隔参数的代码部分。

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
setContentView(R.layout.seconda);

Bundle extras = getIntent().getExtras();
N = extras.getInt("dim_matrice");//dimensione della matrice
setKeys();
values = new EditText[N][N];
salvatore = new EditText[N*N];

FrameLayout frameLayout = new FrameLayout(this);
frameLayout.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
HorizontalScrollView HSC = new HorizontalScrollView(this);
HSC.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, Gravity.CENTER));
frameLayout.setBackgroundResource(R.drawable.lavagna);        
ScrollView VSC = new ScrollView(this);
VSC.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
TableLayout tableLayout = new TableLayout(this);
tableLayout.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));  

for ( int i = 0; i < N; i++) {
tableRow = new TableRow(this); 
tableRow.setGravity(Gravity.CENTER);

for (int j = 0; j < N; j++) {
values[i][j] = new EditText(this);
values[i][j].setHint(i1 + "   " + j1);
values[i][j].setPadding(10, 10, 10, 10);
salvatore[sal] = valore[i][j];
tableRow.addView(valore[i][j]);
j1++;
if (j1 == (N+1)){
j1 = 1;
}
sal++;
}

tableLayout.addView(tableRow);

i1++;
if (i1 == (N+1)){
i1 = 1;
}

}

for (i=0;i<N*N;i++){
InputMethodManager imm = (InputMethodManager)getSystemService(
               Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(salvatore[i].getWindowToken(), 0);
salvatore[i].setInputType(0);
salvatore[i].setOnTouchListener(this);
salvatore[i].setOnClickListener(this);
hideDefaultKeyboard();
enableKeyboard();

}

VSC.addView(tableLayout);
HSC.addView(VSC);
frameLayout.addView(HSC);
setContentView(frameLayout); 
```

此代码在屏幕中央显示 EditText 表。这个应用程序关闭了默认键盘来激活我单独创建的地雷。这是我将键盘包含在 relativeLayout 中的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/xK1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:screenOrientation="portrait" >

<include android:id="@+id/xKeyBoard" layout="@layout/keyboard"></include>

</RelativeLayout> 
```

我希望我的键盘显示与默认值相同。所以我想把它正确地包含在布局法中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:45:03.643

您应该为 EditText 覆盖 OnTouchListener 以显示您的键盘而不是默认键盘。确保您在 OnTouchListener 中返回 true 以在 EditText 弹出键盘之前使用触摸事件。

如果你想制作一个模仿默认键盘的自定义键盘，我建议你看看[Android 本身](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/inputmethodservice/KeyboardView.java)的一些代码/布局。

# nservicebus - 托管 IIS（Asp.net 和 WCF）时 NServicebus 的 CPU 使用率高吗？

> ID：11848342
> 
> 赞同：1
> 
> 时间：2012-08-07T14:37:55.913
> 
> 标签：nservicebus, nservicebus3

我们注意到，将 NServicebus 添加到我们的 ASP.net MVC 应用程序后，CPU 使用率从 5% 上升到 50%。这是在没有任何负载的服务器上。我们注意到托管 WCF 应用程序的另一台服务器上的相同行为。在尝试了不同的事情之后，我们发现如果我们将总线配置为仅发送，CPU 使用率会下降到 5%。有谁知道为什么当总线未配置为仅发送时 CPU 使用率如此之高？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:30:26.947

我以前经历过这种情况。

发生在我身上的是我设置了一个应用程序池，它开始作为网络服务运行。在我有机会将应用程序池标识设置为域级用户（用于访问文件共享等）之前，页面已经被点击，因此 NServiceBus 安装程序已经使用网络服务凭据创建了一个队列。

当我设置应用程序池用户时，突然之间它没有对队列的适当权限。

通常 NServiceBus 会检查是否有超时消息，如果没有可接收的消息，但在这种情况下，它会进入一个非常紧密的循环“有消息吗？我没有权限。有消息吗？我没有允许。” 所以你得到了非常高的CPU。

我通过删除队列并允许 NServiceBus 以适当的权限重新创建它来解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:45:19.450

高 CPU 的原因可能是 NServiceBus 代码在队列中查找消息，尽管我觉得这有点难以置信。仅发送模式可防止 NServiceBus 在队列中查找消息。

# php - HTML5 window.history 不运行新的 javascript

> ID：11848345
> 
> 赞同：0
> 
> 时间：2012-08-07T14:38:04.357
> 
> 标签：php, javascript, html

我有一个页面显示来自数据库的一些数据。这些数据行中的每一个都有一个带有 ID 的链接。

```
<a href="javascript:void(0);" onClick="changeUrl(\'?side=annoncer&sletid='.$row['annonce_id'].'\');"> 
```

这是`changeUrl`功能：

```
function changeUrl(url) {
    window.history.replaceState(null, "Title", url);
} 
```

链接指向同一页面，并`&sletid`添加。设置时`&sletid`，页面应该使用所选行的 ID 弹出窗口。

```
if (isset($_GET['sletid'])) {
    $sletid = $_GET['sletid'];
    echo "<script language='JavaScript'>alert ('ID:".$sletid."');</script>";
} 
```

URL 发生了变化，并且弹出脚本代码被添加到源中，但是除非我再次手动更新页面，否则弹出窗口不会显示。为什么会有这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:41:42.100

`replaceState`实际上并没有加载页面，它只是在浏览器中编辑历史记录（和位置栏）。您需要使用 AJAX 自己加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:40:59.717

您的 phpcode 不会被执行，因为历史状态的更改只会影响客户端。你需要在客户端监听历史的变化。

# celerybeat - 即使有时区设置，celerybeat 也使用 UTC

> ID：11848349
> 
> 赞同：8
> 
> 时间：2012-08-07T14:38:22.523
> 
> 标签：celerybeat

我发现 celerybeat 在其调度中使用 UTC 时间（并在英国时间输出日志？！）即使我相信我的 django settings.py 中有所需的设置：

```
TIME_ZONE = 'UTC'
USE_TZ = True
CELERY_ENABLE_UTC = True
CELERY_TIMEZONE = 'Australia/Sydney'
CELERYBEAT_SCHEDULE = 
    "testRunBeat" : {
        "task" : "experiments.tasks.testHeartBeat",
        "schedule" : crontab(minute = "*/1", hour="13-14"),    
} 
```

我试过切换 TIME_ZONE 变量但没有运气

我在用：

```
django==1.4
celery==2.5.5
django-celery==2.5.5 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T02:20:47.293

原来这是芹菜中的一个错误，现在已修复。见[https://github.com/celery/django-celery/issues/150](https://github.com/celery/django-celery/issues/150)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T22:04:28.050

我想你想要

```
CELERY_ENABLE_UTC = False 
```

[celery 配置文档](http://docs.celeryproject.org/en/latest/userguide/configuration.html#time-and-date-settings)非常清楚地指出，如果此值为 true，则日期和时间将转换为 UTC。另请注意，自 3.0 版起默认启用此值。

# zend-framework - 使用 Zend Auth 和外部认证机制

> ID：11848350
> 
> 赞同：1
> 
> 时间：2012-08-07T14:38:22.430
> 
> 标签：zend-framework, drupal, zend-auth

我有一个 Drupal 站点和一个 Zend 应用程序。最主要的是 Drupal 站点，其中存储了用户和所有内容。

我希望我的用户在登录 Drupal 时自动登录到 Zend 应用程序。问题是 Drupal 将会话 cookie 更改为一些随机`SESS*`的`*`（编辑：不是随机的，而是基于协议和域）字符串。

有什么方法可以告诉 Zend 使用这个 cookie 作为会话标识符并自动记录用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:49:06.673

您必须编写自己的身份验证适配器：

```
class YourApp_Auth_Adapter_DrupalBridge implements Zend_Auth_Adapter_Interface
{
    /**
     * @return Zend_Auth_Result
     */
    public function authenticate()
    {
        // Check if the Drupal session is set by reading the cookie.
        // ...

        // Read the current user's login into $username.
        // ...

        // Create the authentication result object.

        // Failure
        if (null === $username) {
            return new Zend_Auth_Result(Zend_Auth_Result::FAILURE_IDENTITY_NOT_FOUND, null);
        }

        // Success
        return new Zend_Auth_Result(Zend_Auth_Result::SUCCESS, $username);
    }
} 
```

然后处理您的身份验证：

```
$adapter = new YourApp_Auth_Adapter_DrupalBridge();
$result = Zend_Auth::getInstance()->authenticate($adapter);

if ($result->isValid()) {
    // User is logged in
} 
```

# html - 辅助功能，跳过导航不起作用

> ID：11848351
> 
> 赞同：2
> 
> 时间：2012-08-07T14:38:24.547
> 
> 标签：html, cross-browser, accessibility

我构建了这个**[JsFiddle](http://jsfiddle.net/toroncino/CTTz3/)**是为了让你更好地理解我的意思。

基本上，我想只使用键盘跳过导航并按下具有内容锚点`enter`的“**跳过导航”链接。**

因此，如果您尝试按`TAB`，然后`ENTER`在**跳过导航**上，然后再按`TAB`一次，您应该关注内容而不是链接。

它在 FireFox 上运行良好，但在 IE 和 Chrome 上不运行。

有解决方法/方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:43:53.097

忽略 Chrome，它有一个错误，我不知道它的状态。想到的唯一方法是使用 JavaScript，我不赞成。`tabindex=0`从 中的链接中删除`<ul>`。

更改`<div id="main">`为`<div id="main" tabindex="-1">`或

```
<a id="main" name="main" tabindex="-1">
<div id="mainContent">... 
```

# javascript - 使用溢出时隐藏滚动条：滚动；但保持滚动能力

> ID：11848354
> 
> 赞同：0
> 
> 时间：2012-08-07T14:38:34.947
> 
> 标签：javascript, jquery, css, overflow

> **可能重复：**
> [隐藏滚动条，同时仍然可以使用鼠标/键盘滚动](https://stackoverflow.com/questions/3293650/hide-scrollbar-while-still-able-to-scroll-with-mouse-keyboard)

我为 Web 应用程序制作了一段 UI。它是一个侧边栏，它需要让用户在没有滚动条的情况下滚动它。内容高 500px，但容器高 300px。

我已经将容器设置为有，`overflow:scroll`但随后我得到了滚动条（这是我所期望的）。我知道我可以使用禁用滚动条，`overflow:hidden`但这也会禁用滚动。

有没有办法让它滚动但禁用滚动条？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T14:42:43.417

[在仍然可以使用鼠标/键盘滚动的同时](https://stackoverflow.com/questions/3293650/hide-scrollbar-while-still-able-to-scroll-with-mouse-keyboard/)查看隐藏滚动条

```
// get the width of the textarea minus scrollbar
var textareaWidth = document.getElementById("textarea").scrollWidth;

// width of our wrapper equals width of the inner part of the textarea
document.getElementById("wrapper").style.width = textareaWidth + "px"; 
```

或者使用鼠标滚轮插件的 jQuery 捕获鼠标滚动：[如何禁用浏览器或元素滚动条，但仍允许使用滚轮或箭头键滚动？](https://stackoverflow.com/questions/1326570/how-to-disable-browser-or-element-scrollbar-but-allow-scrolling-with-wheel-or-a)

# ruby-on-rails - Rails 3 Heroku 应用程序，FileUtils 错误服务器端

> ID：11848356
> 
> 赞同：0
> 
> 时间：2012-08-07T14:38:42.180
> 
> 标签：ruby-on-rails, heroku, uploading, fileutils

我正在尝试为用户编写一种非常简单的方法来将 html 文件添加到我的 Heroku 应用程序中。这些文件将保存在 ./log 中以供稍后渲染。我已经在本地测试了我的代码（在开发和生产中），但是当我尝试在我的 Heroku 托管存储库上上传文件时，我收到内部服务器错误 500。

**控制器**上传.rb：

```
class UploadController < ApplicationController
  def index
     render :file => 'upload/uploadfile.haml'
  end

  def uploadFile
    file_param = params[:upload][:datafile]
    post = DataFile.save(file_param)
    render :text => "File has been uploaded successfully"
  end
end 
```

**模型**data_file.rb：

```
class DataFile < ActiveRecord::Base
  def self.save(upload)
    # Changed Default Destination: [__RAILS_DIR__/log]
    name = "./log/" + upload.original_filename

    # can haz data directory?
    require 'FileUtils'
    FileUtils.mkdir_p(File.dirname(name))

    File.open(name, "wb") { |f| f.write(upload.read) }
  end
end 
```

**查看**上传文件.haml：

```
%h1 File Upload
= form_for :upload,:url=>{:action => 'uploadFile'},:html => { :multipart => true } do |f|
  %p
    %label{:for => "upload_file"} Select File
    \:
    \#{f.file_field 'datafile'}
  = f.submit "Upload" 
```

heroku 日志：

```
2012-08-07T14:13:20+00:00 app[web.1]: Started POST "/uploadFile" for 69.29.117.99 at 2012-08-07 14:13:20 +0000
2012-08-07T14:13:20+00:00 app[web.1]: Processing by UploadController#uploadFile as HTML
2012-08-07T14:13:20+00:00 app[web.1]: Parameters: {"utf8"=>"✓", "authenticity_token"=>"1dAXkMulNR0d8S/l6QC8JnpSDtNBaHoyKJezgnheR10=", "upload"=>{"datafile"=>#>}, "commit"=>"Upload"}
2012-08-07T14:13:20+00:00 app[web.1]: Completed 500 Internal Server Error in 3ms
2012-08-07T14:13:20+00:00 app[web.1]: 
2012-08-07T14:13:20+00:00 app[web.1]: LoadError (no such file to load -- FileUtils):
2012-08-07T14:13:20+00:00 app[web.1]: app/models/data_file.rb:7:in save'
2012-08-07T14:13:20+00:00 app[web.1]: app/controllers/upload_controller.rb:8:inuploadFile'
2012-08-07T14:13:20+00:00 app[web.1]: 
2012-08-07T14:13:20+00:00 app[web.1]: 
2012-08-07T14:13:20+00:00 app[web.1]: cache: [POST /uploadFile] invalidate, pass 
```

heroku：http: [//upload-example.herokuapp.com/](http://upload-example.herokuapp.com/)

github：[https ://github.com/halterj1/upload](https://github.com/halterj1/upload)

请**不要**试图说服我使用回形针或载波，这不能回答我的问题。任何帮助将**不胜**感激，在此先感谢各位！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:50:27.190

您应该阅读有关 heroku 的这篇文章：[https ://devcenter.heroku.com/articles/read-only-filesystem](https://devcenter.heroku.com/articles/read-only-filesystem)

**编辑：**

如文章所述。

> 您的应用程序被编译成一个 slug，以便在测功机流形中快速分布。slug 的文件系统是只读的，这意味着您不能动态写入文件系统以进行半永久存储。不支持以下类型的行为：
> 
> *   在公共目录中缓存页面
> *   将上传的资产保存到本地磁盘（例如，使用 attachment_fu 或回形针）
> *   使用 Ferret 编写全文索引
> *   写入文件系统数据库，如 SQLite 或 GDBM
> *   访问像 git-wiki 这样的应用程序的 git 存储库
> 
> 有两个可写目录：./tmp 和 ./log（在您的应用程序根目录下）。如果您希望在请求期间临时删除文件，您可以写入像 #{RAILS_ROOT}/tmp/myfile_#{Process.pid} 这样的文件名。无法保证此文件在后续请求中会存在（尽管可能存在），因此不应将其用于任何类型的永久存储。

# java - Android：从 URL 播放 RTSP 视频

> ID：11848359
> 
> 赞同：0
> 
> 时间：2012-08-07T14:38:46.870
> 
> 标签：java, android, android-mediaplayer, android-video-player

我正在尝试使用以下代码在我的 android 应用程序中播放 RTSP url：

```
String url = "rtsp://mobilestr1.livestream.com/livestreamiphone/nyc";
                    Uri uri = Uri.parse(url);
                    System.out.println("URL="+url);
                    startActivity(new Intent(Intent.ACTION_VIEW, uri)); 
```

但是，几秒钟后会弹出一个警告对话框，提示“无法播放视频”。我已经尝试了几个 RTSP url，但它们都不起作用。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:47:38.097

该流是 h264 MPEG-4 AVC Part 10。它不适用于大多数 Android 设备。此页面列出了有效的方法。但本质上你需要一个 MPEG-4 Baseline 流。

[http://developer.android.com/guide/appendix/media-formats.html#recommendations](http://developer.android.com/guide/appendix/media-formats.html#recommendations)

如果您在 VLC 中打开流，然后：Window > Media Information > Codec Details，您也可以验证此信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-18T13:46:01.307

试试下面的代码。这个对我有用。不要忘记在您的清单中添加互联网权限。

```
private void rtspStream(String rtspUrl) {
    mVideoView.setVideoURI(Uri.parse(rtspUrl));
    mVideoView.requestFocus();
    mVideoView.start();
} 
```

# networking - 网络协议内部

> ID：11848362
> 
> 赞同：0
> 
> 时间：2012-08-07T14:39:03.990
> 
> 标签：networking, network-programming, network-protocols, lan

有没有关于网络和网络协议的好书？我目前的一个问题是：操作系统如何确定局域网中路由器的IP地址？

我想了解这些基础知识。我知道我可以通过搜索它们各自的 RFC 来查找大多数常用协议，但我什至不知道哪些协议用于哪个目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:54:19.467

操作系统知道第一个路由器（[默认网关](http://en.wikipedia.org/wiki/Default_gateway)）的 IP 地址，因为有人告诉它 - 在配置 TCP/IP 设置时手动或通过[DHCP](http://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol)、[BOOTP](http://en.wikipedia.org/wiki/Bootstrap_Protocol)或类似方式动态地告诉它。

[在封闭式问题“计算机网络上有哪些好书](https://stackoverflow.com/questions/1211521/what-are-good-books-on-computer-networks)”中有很多好书建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:33:53.193

[http://www.pearsonhighered.com/kurose-ross/](http://www.pearsonhighered.com/kurose-ross/)

[http://books.google.co.in/books/about/Computer_Networks.html?id=Pd-z64SJRBAC](http://books.google.co.in/books/about/Computer_Networks.html?id=Pd-z64SJRBAC)

两本都是好书。享受 ！！

# xml - VBS 和 XPATH 处理多个 XML 文件

> ID：11848371
> 
> 赞同：0
> 
> 时间：2012-08-07T14:39:26.887
> 
> 标签：xml, vbscript

此脚本通过 Windows 子文件夹搜索 XML 文件。循环应该加载 XML 文件并执行操作，然后传递到下一个 XML 文件等。

这条线没有按我希望的方式解释：

```
If oXML.load(objFile.name) Then
WScript.Echo "XML file loaded" 
```

编写此代码的正确方法是什么？

这是完整的脚本。

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
objStartFolder = "C:\test_env"

set oXML = CreateObject("Msxml2.DOMDocument")
oXML.async = "false"

Set objFolder = objFSO.GetFolder(objStartFolder)
Wscript.Echo objFolder.Path
Set colFiles = objFolder.Files
For Each objFile in colFiles
    Wscript.Echo objFile.Name
Next
Wscript.Echo

ShowSubfolders objFSO.GetFolder(objStartFolder)

Sub ShowSubFolders(Folder)
    For Each Subfolder in Folder.SubFolders
        Set objFolder = objFSO.GetFolder(Subfolder.Path)
        Set colFiles = objFolder.Files
        For Each objFile in colFiles
            If UCase(objFSO.GetExtensionName(objFile.name)) = "XML" Then
               Wscript.Echo Subfolder.Path
               Wscript.Echo objFile.Name
               ' LOAD THE XML FILE
               If oXML.load(objFile.name) Then
               WScript.Echo "XML loaded"
               Else WScript.Echo "XML not loaded"
              End If
            End If
        Next
        ShowSubFolders Subfolder
    Next
End Sub 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:03:15.160

.load 方法需要 .xml 文件的完整路径，因此请更改

```
If oXML.load(objFile.name) Then 
```

至

```
If oXML.load(objFile.Path) Then 
```

`.parseError.reason`在失败的情况下查看可能是一个好主意。

# jquery - 在页面加载时循环调整 div 的 css

> ID：11848373
> 
> 赞同：0
> 
> 时间：2012-08-07T14:39:32.357
> 
> 标签：jquery, css

我有一个循环输出一堆带有砖石的盒子，其中包含帖子摘录。

```
<div class="box">
  <div class="image">
     <img src="" />
  </div>
  <div class="info">
      <h3>//title output with php</h3>
  </div>
</div>

.image {
   position:relative;
   width:200px;
   height:200px;
   z-index:100;
}
.box:hover .image {
   margin-top:-30px;
}
.info {
   position:absolute;
   bottom:0;
   width:100%;
   z-index:99;
} 
```

好的，我这里有一个包含帖子拇指的 div，然后是我隐藏在它下面的包含标题的 div。为了显示标题，我给出`.image`了一个负的上边距，但我的问题是`.info`高度不同。所以我需要`.info`在页面加载时用 jquery 抓取每个的高度，然后用它来设置`margin-top`每个对应的负数`.image`。

像这样的东西，但显然这是不对的。

```
 function pageLoad() {
   var height = $(".info").height();
   $(".box:hover .image").css("margin-top", height );
 } 
```

那么如何为循环中的每个单独的框执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:50:26.333

这可能是您正在寻找的。

```
$(document).ready(function () {
    $('.box').each(function () {
         var height = $(this).children('.info').height();
         $(this).children('.image').css('margin-top', height);
    });
}); 
```

我之前没有看到悬停部分，也许你看起来更像这样：

```
$(document).ready(function () {
    $('.box').hover(function () {
        var height = $(this).children('.info').height();
        $(this).children('.image').css('margin-top', height);
    });
}); 
```

# powershell - 使用 $array 的默认值加载 Power shell 组合框

> ID：11848376
> 
> 赞同：0
> 
> 时间：2012-08-07T14:39:36.383
> 
> 标签：powershell, combobox

我想知道是否有人知道如何为 power shell 中的组合框设置默认值？我希望它在加载时显示我设置的数组 $OperatingSystemArray 中的第一个对象。

这是我的代码

```
$global:ComputerList = Get-Content c:\HostList.txt

# This holds the choices fro the Drop Down Menu

[array]$OperatingSystemArray = "-------------","Windows XP", "Windows 7"

# This function will grab a list of computers to work with from a .txt file

function Get-ComputerList {
    Write-Output "   List of Computers VMRest is going to be applied to:`n"
    Foreach ($Computer in $global:ComputerList) {
        Write-Output "     $Computer"
    }
    Write-Output "`n--------------------------------------------------------`n"
}

# This function will return the results of the $OperatingSystemArray and the execute commands based on the selection

function Get-OperatingSystems {

$Choice = $OSChoice.SelectedItem.ToString()

# Call correct function to run correct code

if ($Choice -match 'XP') {
    Write-Output "$Choice Base Machines selected"
    OS-WindowsXp
}
elseif ($Choice -match '7') {
    Write-Output "$Choice Base Machines selected"
    OS-Windows7
}
else {
    Write-Output "No valid Operating System Seleted"
 }
}

# This function will be called for the base machines that are running Windows XP

function OS-WindowsXp {
    Foreach ($Computer in $global:ComputerList) {
        Write-Output "Starting VMReset on $Computer"
    }
}

# This function will be called for the base machines that are running Windows 7

function OS-Windows7 {
    Foreach ($Computer in $global:ComputerList) {
       Write-Output "Starting VMReset on $Computer"
   }
}

[void][System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms") | Out-Null
[void][System.Reflection.Assembly]::LoadWithPartialName("System.Drawing") | Out-Null
[void][System.Windows.Forms.Application]::EnableVisualStyles()
[void][System.Windows.Forms.ComboBoxStyle]::DropDown

# This creates a new form

$Main = New-Object System.Windows.Forms.Form

# This sets the form options

$Main.minimumSize = New-Object System.Drawing.Size(800,600)
$Main.maximumSize = New-Object System.Drawing.Size(800,600)
$Main.Text = "VMWare Reset"
$Main.StartPosition = "CenterScreen"
$Main.ShowInTaskbar = $False

# This sets the drop down options

$OSChoice = New-Object System.Windows.Forms.ComboBox
$OSChoice.Location = New-Object System.Drawing.Size(400,10)
$OSChoice.Font = New-Object System.Drawing.Font("Courier New",16,0,3,0)
$OSChoice.Size = New-Object System.Drawing.Size(200,30)
$OSChoice.DropDownStyle = [System.Windows.Forms.ComboBoxStyle]::DropDownList

# This For-Loop populates the $OSChoice items from $OperatingSystemArray

ForEach ($Item in $OperatingSystemArray) {
  $OSChoice.Items.Add($Item)
}

# This adds the $OSChoice Item to the gui

$Main.Controls.Add($OSChoice)

# This sets the $OSChoice label options

$OSChoiceLabel = New-Object System.Windows.Forms.Label
$OSChoiceLabel.Location = New-Object System.Drawing.Size(10,10)
$OSChoiceLabel.Font = New-Object System.Drawing.Font("Courier New",16,0,3,0)
$OSChoiceLabel.Size = New-Object System.Drawing.Size(300,30)
$OSChoiceLabel.Text = "Base Machine Operating System"

# This adds the $OSChoiceLabel Item to the gui

$Main.Controls.Add($OSChoiceLabel)

# This sets up the button options
$ExecuteButton = New-Object System.Windows.Forms.Button
$ExecuteButton.Location = New-Object System.Drawing.Size(650,10)
$ExecuteButton.Size = New-Object System.Drawing.Size(100,30)
$ExecuteButton.Text = "Execute Reset"
$ExecuteButton.Add_Click( {

    Get-OperatingSystems

    if ($SaveToCheckBox.Checked -eq $True) {
        Write-Output "Saving output to file"
    }
    else {
        Write-Output "Not saving output to file"
    }
})

# This adds the $ExecuteButton Item to the gui

$Main.Controls.Add($ExecuteButton)

# This sets up the $CloseButton Item to the gui

# This sets up the output window for the gui

$OutputBox = New-Object System.Windows.Forms.RichTextBox
$OutputBox.Text = ''
$OutputBox.Name = 'OutputBox'
$OutputBox.Font = New-Object System.Drawing.Font("Courier New",16,0,3,0)
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Width = 760
$System_Drawing_Size.Height = 460
$OutputBox.Size = $System_Drawing_Size
$OutputBox.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 10
$System_Drawing_Point.Y = 50
$OutputBox.Location = $System_Drawing_Point

# This adds the Output box to the GUI

$Main.Controls.Add($OutputBox)

# This adds a checkbox to the GUI

$SaveToCheckBox = New-Object System.Windows.Forms.CheckBox
$SaveToCheckBox.Text = 'Save to File?'
$SaveToCheckBox.Name = 'SaveToCheckBox'
$SaveToCheckbox.Font = New-Object System.Drawing.Font("Courier New",16,0,3,0)
$SaveToCheckBox.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Width = 200
$System_Drawing_Size.Height = 30
$SaveToCheckBox.Size = $System_Drawing_Size
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 550
$System_Drawing_Point.Y = 530
$SaveToCheckBox.Location = $System_Drawing_Point

# Default is set to false if you want to log the output to a file set to $True

$SaveToCheckBox.Checked = $Flase

$Main.Controls.Add($SaveToCheckBox)

Get-ComputerList

# This function displays the output to a text box within the gui

function Write-Output {
    param([string]$msg)
    $OutputBox.Text += "$msg`n"
    $OutputBox.SelectionStart = $OutputBox.Text.Length - 1;
    $OutputBox.ScrollToCaret();
}

# This activates and shows the gui
$Main.Add_Shown({
$Main.Activate()
})
[void]$Main.ShowDialog() | Out-Null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:58:59.713

您是否尝试将 $OSChoice 控件的 SelectedItem 属性设置为默认值？

这是我正在查看的代码片段。这很笼统，但它正在做你要求的事情：

```
 function set-controlvalue{
 param($control,
       $value)
       switch ($control.GetType().Name) {
        'TextBox' {
           $control.Text=$value 
        }
        'ComboBox' {
          $control.SelectedItem=$value 
```

# iphone - 带有 UIView 动画块的 UIImageanimation

> ID：11848378
> 
> 赞同：0
> 
> 时间：2012-08-07T14:39:47.193
> 
> 标签：iphone, animation, uiview, uiimageview

我想使用带有块的 UIView 动画而不是 UIImageview 动画。因为我需要知道动画何时完成，所以我决定将 UIView Animation 与我不熟悉的块一起使用。所以我想要这个：

```
NSMutableArray *mixedimages = [[NSMutableArray alloc] initWithCapacity:5];

for(int count = 1; count <= 5; count++)
    {
        NSString *fileName = [NSString stringWithFormat:@"Picture_%d.jpg", count];
        UIImage  *frame    = [UIImage imageNamed:fileName];
        [mixedimages addObject:frame];
    }

gamePicture.animationImages = mixedimages;

gamePicture.animationDuration = 1;
gamePicture.animationRepeatCount = 10;

[gamePicture startAnimating]; 
```

进入这个：

```
[UIView animateWithDuration:1 animations:^{

    //animation code here
} completion:^(BOOL finished)
{
    NSLog(@"Animation finished");
}]; 
```

但是我不知道填写什么代码会和上面一样，这样我就会有同样的动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:26:22.367

您不能使用 UIView 动画来为 UIImageView 的内容设置动画。UIView 动画只能为一组固定的 UIView 属性设置动画：

```
@property frame
@property bounds
@property center
@property transform
@property alpha
@property backgroundColor
@property contentStretch 
```

要解决 UIImageView 缺少完成块的问题，您可以在此处参考答案：

[iPhone：检测 UIImageView 图像序列动画结束的最佳方法](https://stackoverflow.com/questions/3770997/iphone-best-way-to-detect-the-end-of-uiimageview-image-sequence-animation)

# python - Python 字符串替换在浮点打印语句中显示 0.000 #

> ID：11848379
> 
> 赞同：2
> 
> 时间：2012-08-07T14:39:47.223
> 
> 标签：python

我有这个简单的python代码，

```
import time
t1 = time.time()
total = sum([x for x in range(1000) if x%3 is 0 or x%5 is 0])
t2 =time.time()

print "Ans is: %d, Time is %f" %(total,(t2-t1)*1000.0) 
```

我把它作为我的输出

```
Ans is: 233168, Time is 0.000000 
```

我怎么看不到我的号码的结果？我已经用谷歌搜索了其他在字符串中替换数字的示例，它们正是我正在做的事情，有什么帮助吗？

我也尝试过使用 %0.3f 和 %d ......嗯......在此先感谢您的帮助

编辑

当我尝试这段代码时：

```
import time
t1 = time.time()
total = sum([x for x in range(1000) if x%3 is 0 or x%5 is 0])
t2 =time.time()
print t2
print "Ans is: %d, Time is %f" %(total,(t2-t1)*1000.0) 
```

我得到这个答案，

```
1344350841.39
Ans is: 233168, Time is 15.000105 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:01:16.360

这不是您问题的直接答案，但如果您使用 Windows，我宁愿建议使用时钟（）。根据文档，它在 UNIX/MacOS 上的行为不同。

```
from time import clock
clock()
total = sum([x for x in range(1000) if x%3 == 0 or x%5 == 0])
print "Ans is: %d, Time is %f" %(total,clock()) 
```

# networking - Neo4j HA 通过 VPN？

> ID：11848380
> 
> 赞同：1
> 
> 时间：2012-08-07T14:39:50.327
> 
> 标签：networking, ssh, neo4j, vpn, apache-zookeeper

我目前正在创建 3 个 Neo4j 高可用性服务器。我的业务逻辑将一台服务器作为专用主机，而另外两台机器是专用从机。我的奴隶存在于与我的主人完全不同的数据中心。

在两个应用程序之间建立链接的最佳方法是什么？我已经能够使用 OpenVPN 建立连接，但我很好奇这是否比 SSH 端口转发更好？我不完全确定 Zookeeper 需要如何与其他节点通信。VPN 连接只创建单向连接，例如，我的主服务器可以与从服务器创建连接，但无法与其主服务器创建连接。（我认为？）

我该怎么做？谢谢！

PS：我的主人使用的是 Neo4j 的嵌入式实例，而奴隶是独立的实例（如果这很重要）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:22:16.070

因此，您的设置与可用性无关，因为奴隶无论如何都不能成为主人？

只是复制到其他数据中心？

您还需要考虑所有集群参与者通常需要的 neo4j 协调器（zookeeper）。

我的同事建议您可以直接将 zookeeper（甚至可能只是一个，因为您不需要主选举）放在您的主服务器旁边。

那么连接到主服务器 VPN 的能力应该足以让从服务器拉取更新。

# python - 共享数组在 python 多处理中未正确共享

> ID：11848381
> 
> 赞同：3
> 
> 时间：2012-08-07T14:39:51.823
> 
> 标签：python, multiprocessing

我正在尝试在 Python 中进行多处理，并尝试在两个进程之间共享一个字符串数组。这是我的python代码：

```
from multiprocessing import Process, Array, Value
import ctypes

def f1(a, v):
    for i, l in enumerate(['a', 'b', 'c']):
        a[i] = l*3

    v.value += 1

    print "f1 : ", a[:], v.value

def f2(a,v):

    v.value += 1

    print "f2 : ", a[:], v.value

if __name__ == '__main__':
    val = Value(ctypes.c_int, 0)
    arr = Array(ctypes.c_char_p, 3)

    print "Before :", arr[:], val.value

    p = Process(target=f1, args=(arr, val))
    p2 = Process(target=f2, args=(arr, val))

    p.start()
    p2.start()

    p.join()
    p2.join()

    print "After : ", arr[:], val.value 
```

当我运行脚本时，我看到它`arr`已正确填充并且`f1()`在`f2()`. 结果如下：

```
 % python /tmp/tests.py
    Before : [None, None, None] 0
    f1 :  ['aaa', 'bbb', 'ccc'] 1
    f2 :  ['\x01', '\x11', '\x01'] 2
    After :  ['\x01', '\x01', '\x01'] 2 
```

我忽略了什么吗？

提前感谢您的反馈。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:20:11.610

我的猜测是：

> `arr`存储 3 个指针。`f1()`将它们分配给在当前进程之外没有意义的内存地址。`f2()`此时尝试访问包含垃圾的无意义地址。

分配给在所有过程中都有意义的值似乎有帮助：

```
from __future__ import print_function
import ctypes
import time
from multiprocessing import Process, Array, Value

values = [(s*4).encode('ascii') for s in 'abc']

def f1(a, v):
    for i, s in enumerate(values):
        a[i] = s

    v.value += 1

    print("f1 : ", a[:], v.value)

def f2(a,v):
    v.value += 1
    print("f2 : ", a[:], v.value)

def main():
    val = Value(ctypes.c_int, 0)
    arr = Array(ctypes.c_char_p, 3)

    print("Before :", arr[:], val.value)

    p = Process(target=f1, args=(arr, val))
    p2 = Process(target=f2, args=(arr, val))

    p.start()
    p2.start()

    p.join()
    p2.join()

    print("After : ", arr[:], val.value)

if __name__ == '__main__':
    main() 
```

### 输出

```
Before : [None, None, None] 0
f1 :  ['aaaa', 'bbbb', 'cccc'] 1
f2 :  ['aaaa', 'bbbb', 'cccc'] 2
After :  ['aaaa', 'bbbb', 'cccc'] 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:49:32.120

我没有解决方案，但我可以添加更多提示。我已经剥离了脚本以查明问题。在我看来，问题出在`l * 3`操作上。我不知道为什么，但按预期移动了`l * 3`工作中的操作：`enumerator`

```
from multiprocessing import Process, Array                                   
import ctypes                                                                

def f1(a):                                                                   
#    for i, l in enumerate(['a', 'b', 'c']):                                 
#        a[i] = (l * 3)                                                      
    for i, l in enumerate(['a' * 3, 'b' * 3, 'c' * 3]):                      
        a[i] = l                                                             

    print "f1 : ", map(id, a), a[:]                                          

if __name__ == '__main__':                                                   
    arr = Array(ctypes.c_char_p, 3)                                          

    print "Before :", map(id, arr), arr[:]                                   
    p = Process(target=f1, args=(arr, ))                                     
    p.start()                                                                
    p.join()                                                                 
    print "After : ", map(id, arr), arr[:] 
```

结果：

```
Before : [3077673516L, 3077673516L, 3077673516L] [None, None, None]
f1 :  [3073497784L, 3073497784L, 3073497784L] ['aaa', 'bbb', 'ccc']
After :  [3073497784L, 3073497784L, 3073497784L] ['aaa', 'bbb', 'ccc'] 
```

# java - Java 字符串到 JSON，然后 JSON 到数组

> ID：11848382
> 
> 赞同：0
> 
> 时间：2012-08-07T14:39:53.803
> 
> 标签：java, arrays, json, string, arraylist

我有以下字符串代码，我想转换为 json 并遍历项目并将它们放入 Java 中的数组列表中。我还有一个名为 Users 的类，它的属性和 getter/setter（id、nick、age、online、avatar）我应该怎么做：

代码：

```
//this is the real code
String a = "{"id":"1","nick":"jhon","age":20,"online":1,"avatar":"http:\/\/www.example.com\/image.jpeg"},{"id":"2","nick":"mike","age":45,"online":0,"avatar":"http:\/\/www.example.com\/image.jpeg"},{"id":"3","nick":"carl","age":12,"online":1,"avatar":"http:\/\/www.example.com/image.jpeg"},{"id":"4","nick":"ana","age":22,"online":0,"avatar":"http:\/\/www.example.com\/image.jpeg"}";

//this is what i want to do
String a = real code sample;
Json b = a.toJson; // something like this
Arraylist<User> list = new Arraylist<User>();
for each b{
     list.add(     new user(b.getId(),b.getNick()....));
} 
```

我想做这样的事情，当然代码是一个例子，这里写得不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:56:11.137

你可能更喜欢使用[Gson](http://code.google.com/p/google-gson/)库，它有很好的使用文档。您可以轻松地将对象解析为 JSON 并将 JSON 解析为对象。因此，对于您自己的解析器来说，它可能是一个更好的选择。

它还支持数组和集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:19:57.857

[杰克逊](https://github.com/FasterXML/jackson-annotations)非常适合这种事情 - 我已经使用它一段时间了，没有任何问题。我也听说过关于 Gson 的好消息，但没有理由从 Jackson 转换过来。 [Xstream](http://xstream.codehaus.org/json-tutorial.html)也可以与 Json 一起工作。

Jackson（我也相信 Gson）没有使用特殊的“JSON”对象，而是将 JSON 值填充到 POJO 中。您可以使用注释来自定义读取和写入值的方式。

FWIW，JSON 处理很容易使用这样的库，但也是您不想做太多的事情 - 它在 CPU 方面相对昂贵。并不是这些库很慢 - 那种文本处理需要大量工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:17:45.237

我认为您需要先在[JSONLINT上验证您的数组](http://jsonlint.com/)

# c# - C#：可以将 IHtmlElement“转换”为 AutomationElement？

> ID：11848384
> 
> 赞同：1
> 
> 时间：2012-08-07T14:39:56.983
> 
> 标签：c#, internet-explorer, automation

我有一个特定的场景，可以通过 COM 和 IHtmlElement 访问 Internet Explorer 的某些部分，但不能（直接）通过 AutomationElements 的 GUI 树访问。（我必须使用树/层次结构来找到我的元素。那个特定的 Internet Explorer 的 GUI 树被破坏了（不知道它是通过自定义还是因为它是旧版本 - 它是给定的）。）

现在有一些我需要的 AutomationElement 属性并且无法从 IHtmlElement 中删除（实际上，从 IHtmlElement 获取此版本 IE 的属性已损坏，但将它们从 AutomationElement 中删除是可行的）。

我天真的方法是简单地获取 IHtmlElement 的坐标（通过 offsetParent 递归），然后使用 AutomationElement.FromPoint(x, y) 将它们转换为 AutomationElement。这当然不是很稳定（虽然工作还不错）。

我尝试通过窗口句柄进行转换，但是.. HTMLElements 似乎只拥有最外面元素的窗口句柄（我理解，否则网站会用掉很多句柄）。

我尝试了一些更“花哨”的方法，试图（再次）获取具有 IID_IAccessible 接口的 COM 对象（如果我将主文档用作 IServiceProvider，这似乎可以工作），但不幸的是，我以后不知道如何制作 AutomationElement我的 IAccessible 对象（来自[IHTMLElement -> IAccessible](https://stackoverflow.com/questions/6994469/ihtmlelement-iaccessible)的想法）。

非常欢迎对这种方法或如上所述的我的一般问题提供任何帮助！

一些粗略的代码可以让您了解我的方法（尽管现在我看到我不应该首先使用 mMainDocument ，而是我当前的元素 - 但这会用 null 填充 ae）：

```
 Guid IID_IAccessible = new Guid("618736E0-3C3D-11CF-810C-00AA00389B71");
        IServiceProvider sp = (IServiceProvider)mMainDocument;
        Object ae = null;
        sp.QueryService(ref IID_IAccessible, ref IID_IAccessible, out ae);
        System.Windows.Automation.AutomationElement ae2 = System.Windows.Automation.AutomationElement.FromLocalProvider((System.Windows.Automation.Provider.IRawElementProviderSimple)ae);
        // ae is no AutomationElement, and the last line (with ae2) fails 
```

# behat - 如何将对象传递给 behat 步骤？

> ID：11848387
> 
> 赞同：0
> 
> 时间：2012-08-07T14:40:11.340
> 
> 标签：behat, mink

我想知道是否可以将对象传递给 Behat 的步骤。

例如，我的表单的一个字段将用一个对象填充。它填充了一个您可以在建议框中选择的对象。我知道 sahi 或 selenium 的另一种方式，但我不想要这样，我想要这样的步骤：“当我用对象填写“字段”时”。这是可能的？

对不起，如果我没有很好地解释它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:24:57.303

您如何将字符串从 Gherkin 转换为对象？

尝试参数转换：[http ://docs.behat.org/guides/2.definitions.html#step-argument-transformations](http://docs.behat.org/guides/2.definitions.html#step-argument-transformations)

但是，我怀疑您是否真的想将对象传递给选择框（您将如何在浏览器中执行此操作？？）。

我宁愿使用：

```
I select "Great Britain" from "Country" 
```

# apache - 加密密码或 SASL-GSSAPI 的 SVN 身份验证

> ID：11848388
> 
> 赞同：1
> 
> 时间：2012-08-07T14:40:13.417
> 
> 标签：apache, svn, authentication, sasl, gssapi

我们目前使用 auth_ldap 和 apache 进行身份验证，由于安全合规性，我们必须更改 SVN 的身份验证。

要求很简单。用户无法在客户端本地保存未加密的密码。当然，个人用户可以通过编辑“服务器”将密码设置为加密，但由于公司的规模，我们无法监控这一点并确保他们正在这样做。

有哪些可用的身份验证机制？

1）**SASL + GSSAPI：**我一直在努力实现这一点。看起来它不再起作用了。[看这里](http://virtualdeveloper.blogspot.com/2012/05/svngssapi-could-not-obtain-list-of-sasl.html)

2) [RULED OUT] **SSH 密钥：**添加和删除密钥需要相当多的开销。但这是可行的。被排除在外，因为我们有一些通过 https 访问的服务。

3)**密码：**必须有某种方法可以确保密码以加密方式存储在用户主目录中。

PS：对在 Widows 服务器上部署 repo 不感兴趣。

如果有人可以根据我的要求对可能的身份验证机制添加一些见解，我将不胜感激。

***系统***：Apache 和 RHEL6.2 上的 SVN 1.6.11，Windows Server 2008 R2 Active Directory。

# bash - 从 /dev/ttyUSB0 读取输出

> ID：11848390
> 
> 赞同：0
> 
> 时间：2012-08-07T14:40:24.680
> 
> 标签：bash, shell

我是 Linux 的新手，如果这个问题听起来太简单，我很抱歉。

我和董事会有一些沟通。我首先要做的是：启用 USB 和 gsm 驱动程序和 cat "/dev/ttyUSB0 &"

之后，我发送一些 AT 命令并自动得到诸如“OK”之类的回复。

我想要的是能够使用 bash 脚本或任何其他可能的方式读取此输出

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:09:09.113

您可以使用 screen 命令读取和写入 GSM。例如。执行命令**sudo screen /dev/ttyUSB0**，它将打开一个新屏幕，您可以发送数据并查看接收到的数据。

# javascript - 在 Raphael.js 中扩展 _engine

> ID：11848394
> 
> 赞同：0
> 
> 时间：2012-08-07T14:40:30.900
> 
> 标签：javascript, raphael

似乎我不了解javascript中的一些基础知识，

我有以下代码：

```
Raphael.fn.group = function() {
    var out = Raphael._engine.group(this);
    this.__set__ && this.__set__.push(out);
    return out;
};
(window.Raphael.svg &&
function(e) {
    e.group = function(svg) {
        //Want this to be called $ function defined in Raphael._engine 
        // as var $=function(..){..}
        // line 3780
        var el = $("g");
        svg.canvas && svg.canvas.appendChild(el);
        var res = new Element(el, svg);
        res.type = "group";
        return res;
    }
})(window.Raphael._engine);
var paper = Raphael("out", 800, 600);
//test with circle;
paper.circle(100, 100, 50);
//test with new method;
paper.group();​ 
```

所以我发现 $ near 注释行来自全局范围，而不是来自 Raphael._engine 范围，这里有什么方法可以扩展 _engine，或者我应该修补 raphael 来做这些事情？

[http://jsfiddle.net/YV2SR/4/](http://jsfiddle.net/YV2SR/4/)

[更简单的 jsfiddle - 完全没有 raphael](http://jsfiddle.net/xMfZK/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:02:11.307

啊，最后一个编辑。

`var $`不，如果不更改源代码以以某种方式公开 $ ，就无法在对象构造函数中进行定义。这相当于 JavaScript 的私有属性。

# jquery - jQueryTools 可滚动 - 循环两次然后在第一张幻灯片上停止

> ID：11848398
> 
> 赞同：1
> 
> 时间：2012-08-07T14:40:43.413
> 
> 标签：jquery, jquery-tools, scrollable, jquery-scrollable

我试图找出一种方法来浏览一组幻灯片几次，然后返回并在第一张幻灯片上停止。

目前，我有：

```
$('#con_featured .scrollable').scrollable({
    circular: false
}).navigator({  
    activeClass: 'current',
    navi:'#con_featured .scrollable_nav ul'
}).autoscroll({
    autoplay: true,
    interval: 8000
}); 
```

我确实找到了[一篇](https://stackoverflow.com/questions/11126826/jquerytools-scrollable-scroll-to-first-page)关于如何滚动回滑块开头的文章。而且我已经看到在每个项目滚动后发生的事件“onSeek”。有没有办法使用它（或另一个事件侦听器）来查找幻灯片何时结束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:27:58.927

我的一位同事能够通过使用[Scrollable API](http://jquerytools.org/documentation/scripting.html)来解决这个问题。使用 API，他能够获取滑块的索引，并且在播放两次后，它会在第一张幻灯片上停止。

```
var loopCounter = 0;
$('#con_featured .scrollable').scrollable({
    onSeek: function() {
        var api = $('#con_featured .scrollable').data("scrollable");

        if(api.getIndex() == 0) {
            loopCounter++;
            if(loopCounter >= 2) api.stop(); // loops twice then stops
        }
    },
    circular: true
}).navigator({  
    activeClass: 'current',
    navi:'#con_featured .scrollable_nav ul'
}).autoscroll({
    autoplay: true,
    interval: 8000
}); 
```

# ruby-on-rails - Rails - 3 列关联表？

> ID：11848399
> 
> 赞同：2
> 
> 时间：2012-08-07T14:40:52.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, model

我目前正在尝试在 Rails 中创建一个相当简单的关联，但事实证明它比我想象的要困难。

我有 3 个模型，用户、经销商和角色。用户/经销商是多对多的。用户可以有许多角色，但他们应该是特定于经销商的——即用户可以在一个经销商处担任经理和主管，在另一个经销商处担任经理，在另一处担任主席。

我正在寻找的结果是我将能够做到`user.dealer.roles`并且（例如对于第一个经销商）它将返回经理和董事。如果我这样做也会发生同样的情况`dealer.user.roles`.``

 ``My classes look as follows:` 

```
class User  :dealer_users
  has_many :dealer_user_roles, :through => :dealer_users
  has_many :roles, :through => :dealer_user_roles
end

class Dealer  :dealer_users
  has_many :dealer_user_roles, :through => :dealer_users
  has_many :roles, :through => :dealer_user_roles
end

class Role  :dealer_user_roles
  has_many :users, :through => :dealer_users
end 
```

The tables look like (green tables):

![Model diagram](../Images/2e4ed402e12fdefebb147ea1ebf5d410.png)

I am trying to seed the database using the following code:` 

```
dealer = Dealer.where(name: Faker::Company.name).first_or_create
user = User.where(email: Faker::Internet.email).first_or_create
user.first_name = Faker::Name.first_name 
user.last_name = Faker::Name.last_name
user.password = 'password'
user.password_confirmation = 'password'
dealer.users  user.id).first.roles  1 + Random.rand(4)) 
```

这会导致错误，即：“无法修改关联 'User#roles'，因为它通过多个其他关联。”

谁能帮助我告诉我哪里出错了，以及我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:54:10.157

在我的脑海中，我将其建模为：

```
# Table name: users
#  id          :integer  not null, primary key
#  name        :string
class User
  has_many :employments
  has_many :dealers, :through => :employments
  has_many :roles, :through => :employments
end

# Table name: dealers
#  id          :integer  not null, primary key
#  name        :string
class Dealer
  has_many :employments
  has_many :users, :through => :employments
  has_many :roles, :through => :employments
end

# Table name: employments
#  id          :integer  not null, primary key
#  user_id     :integer  not null
#  dealer_id   :integer  not null
class Employment
 belongs_to :dealer, :inverse_of => :employments
 belongs_to :user,   :inverse_of => :employments
 has_many :roles
 scope :for_user,   lambda{ |user| where(:user_id => user.id) }
 scope :for_dealer, lambda{ |dealer| where(:dealer_id => dealer.id) }
end

# Table name: roles
#  id             :integer   not null, primary key
#  employment_id  :integer   not null
#  name           :string    not null
class Role
  belongs_to :employment
  scope :at_dealership, lambda{ |dealer| joins(:employment).where(:dealer_id => dealer.id) }
  scope :for_employee,  lambda{ |employee| joins(:employment).where(:user_id => employee.id) }
  # alternately:
  # scope :at_dealership, lambda{ |dealer| joins(:employment).where('employments.dealer_id = ?', dealer.id) }
  # scope :for_employee,  lambda{ |employee| joins(:employment).where('employments.user_id = ?',employee.id) }
end 
```

这使得处理更容易，并且也将角色放在他们实际所属的位置 - 我称之为就业的用户/经销商的组合。

然后你可以说

```
dealer.users.first.roles 
# or
user.dealers.where('some condition').roles 
```

编辑：使用范围，所有这些都应该做你想要的。

```
user = User.first
dealer = user.dealers.first

user.roles.at_dealership(dealer)

dealer.roles.for_employee(user)

dealer.employments.for_user(user).roles

user.employments.for_dealer(dealer).roles 
```

# html - 如何在 LESS 而不是直接的 CSS 中构建灵活的评分小部件？

> ID：11848401
> 
> 赞同：1
> 
> 时间：2012-08-07T14:40:52.713
> 
> 标签：html, css, less

我发现这个由[AirBnB](http://nerds.airbnb.com/quick-tip-making-star-ratings-with-one-image)使用 SASS 构建的灵活的单图像评分小部件。我想用 LESS 创建类似的东西。我知道我可以只写出 CSS，但我想用 LESS 动态地完成它。我的主要问题似乎是动态地将计数器`_1`...添加`_10`到类（`.filled_1`... `filled_10`）中。这在LESS中可能吗？

这是有效的 SASS 代码：

```
$starWidth: 44px;
$starOffset: 0 -43px;
$numStars: 5;
$steps: 2;
$total: $numStars * $steps;

@mixin filled($n: 0) {
  width: ($starWidth / $steps) * $n;
}

.stars {
  background: url(/images/sprite.png) repeat-x top left;
  height: 43px;

  &.empty {
    background-position: $starOffset;
    width: $numStars * $starWidth;
  }

  @for $i from 0 through ($total) {
    &.filled_#{$i} { @include filled($i) }
  }
} 
```

这在 CSS 中变成了这样的代码：

```
.stars {
  background: url(/images/sprite.png) repeat-x top left;
  height: 43px; }
  .stars.empty {
    background-position: 0 -43px;
    width: 220px; }
  .stars.filled_0 {
    width: 0px; }
  .stars.filled_1 {
    width: 22px; }
  .stars.filled_2 {
    width: 44px; }
  .stars.filled_3 {
    width: 66px; }
  .stars.filled_4 {
    width: 88px; }
  .stars.filled_5 {
    width: 110px; }
  .stars.filled_5 {
    width: 132px; }
  .stars.filled_7 {
    width: 154px; }
  .stars.filled_8 {
    width: 176px; }
  .stars.filled_9 {
    width: 198px; }
  .stars.filled_10 {
    width: 220px; } 
```

如何执行相同的循环并包含在 LESS 而不是 CSS 中？

最终的 HTML 将如下所示：（其中 9 将显示 4.5 颗星）

```
<div class="stars empty">
  <div class="stars filled_9">4.5</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:37:20.313

就像链接到资源一样简单：http: [//blog.thehippo.de/2012/04/programming/do-a-loop-with-less-css](http://blog.thehippo.de/2012/04/programming/do-a-loop-with-less-css)

这是资源中的代码示例：

更少的代码：

```
@iterations: 30;

// helper class, will never show up in resulting css
// will be called as long the index is above 0
.loopingClass (@index) when (@index > 0) {

    // create the actual css selector, example will result in
    // .myclass_30, .myclass_28, .... , .myclass_1
    (~".myclass_@{index}") {
        // your resulting css
        my-property: -@index px;
    }

    // next iteration
    .loopingClass(@index - 1);
}

// end the loop when index is 0
.loopingClass (0) {}

// "call" the loopingClass the first time with highest value
.loopingClass (@iterations); 
```

生成的 CSS：

```
.myclass_30 {
  my-property: -30 px;
}
.myclass_29 {
  my-property: -29 px;
}

.......
.......
.......

.myclass_1 {
  my-property: .1 px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T17:56:31.397

Stackoverflow 用户 GnrlBzik 分享了[LESS 的循环策略](http://blog.thehippo.de/2012/04/programming/do-a-loop-with-less-css/)，但结果看起来比我希望的要复杂。这是一个有效的解决方案，对于那些拥有静态数量的星星的人来说仍然看起来很优雅。

```
@starWidth: 44px;
@starOffset: 0 -43px;
@numStars: 5;

.starCount(@starSpan: 1) {
    width: (@starWidth / 2) * @starSpan;
}

.stars {

    background: url('/images/sprites/stars.png') repeat-x top left;
    height: 43px;
    display:block;

    &.empty {
        background-position: @starOffset;
        width: (@starWidth * @numStars);
    }

    &.filled_0     { .starCount(0); }
    &.filled_1     { .starCount(1); }
    &.filled_2     { .starCount(2); }
    &.filled_3     { .starCount(3); }
    &.filled_4     { .starCount(4); }
    &.filled_5     { .starCount(5); }
    &.filled_6     { .starCount(6); }
    &.filled_7     { .starCount(7); }
    &.filled_8     { .starCount(8); }
    &.filled_9     { .starCount(9); }
    &.filled_10    { .starCount(10); }
} 
```

# objective-c - 无法从 iPhone 播放本地视频

> ID：11848403
> 
> 赞同：0
> 
> 时间：2012-08-07T14:40:54.773
> 
> 标签：objective-c, ios, video, mpmovieplayercontroller

我在 iPhone 上播放视频时遇到问题。我在应用程序包中有一个文件，我试图在其中播放它，`MPMoviePlayerController`但它只是显示黑屏。这是以下代码：

```
-(UIView*)createVideoPlayerOfWidth:(CGFloat)width
{
    // The width for one of these can be half of the max width
    //CGFloat widthAndHeight = width / 2.0f;

    // TODO: Create a video player
    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"myVideo" ofType:@"mov"]];
    MPMoviePlayerController *playerController = [[MPMoviePlayerController alloc] initWithContentURL:url];
    [playerController prepareToPlay];
    [playerController setShouldAutoplay:NO];
    [playerController setScalingMode:MPMovieScalingModeAspectFit];
    [playerController setControlStyle:MPMovieControlStyleEmbedded];
    [playerController setRepeatMode:MPMovieRepeatModeNone];

    // Resize the thumbnail of the video
    [[playerController view] setFrame:CGRectMake(0, 0, width, width)];

    return [playerController view];
} 
```

它返回一个有效的 URL（如果找不到文件，pathForResource 将返回 nil）。我只是通过将 subView（函数返回的视图）添加到滚动视图来将其显示到屏幕上。我一直试图解决这个问题已经很久了，但一无所获。任何帮助深表感谢。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:51:34.603

确保您保留对`MPMoviePlayerController`实例的引用：

*   如果这是一个 ARC 项目，那么返回`playerController`时将被销毁`createVideoPlayerOfWidth`，并且您的视频可能无法播放。您应该将播放器存储在`strong`实例变量或属性中。

    您可以在视图控制器文件的顶部添加如下内容：

    ```
    @interface MyViewController ()
    @property (nonatomic,retain) MPMoviePlayerController *player;
    @end 
    ```

    `MPMoviewPlayerController`并在创建实例后插入：

    ```
    self.player = playerController; 
    ```

*   如果您不使用 ARC，这可能不是问题，但您仍应在实例变量中保留引用，以便稍后释放它。

# maven - Jenkins：如何从 Nexus 签出工件并在 Tomcat 上部署-

> ID：11848406
> 
> 赞同：20
> 
> 时间：2012-08-07T14:41:01.117
> 
> 标签：maven, deployment, jenkins

我想建立一个詹金斯管道。第一阶段完成，代码编译、测试、检查并部署到 Nexus。

我现在想在管道上进行第二阶段，从 Nexus 签出战争并部署在 tomcat 上。

实际上我已经集成了 maven-tomcat 插件来部署在 Tomcat 上。我的问题是如何查看最新版本的战争？

有没有 maven 或 jenkins 插件呢？

非常感谢，

帕特里克

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-07T19:09:57.900

您的二进制存储库管理器 (Nexus) 应该理想地在您的整体架构中占据以下位置：

![在此处输入图像描述](../Images/ed12c7e0ba316a15c08bb35e0cfe6d6f.png)

您可以使用 Jenkins 作为您的配置工具，但理想情况下，它应该启动某种进程，将工件直接从 Nexus 部署（如果没有别的，它会更有效）。

这比听起来容易得多。例如，可以从 shell 脚本调用 Nexus REST API 以下载任何所需的工件修订版。例如：

```
$CATALINA_HOME/bin/shutdown.sh
curl -o $CATALINA_HOME/webapps/myfile.war http://myrepo.com/service/local/artifact/maven/redirect?r=releases&g=com.myorg&a=myfile&v=1.1.1&e=war
$CATALINA_HOME/bin/startup.sh 
```

最后，也许您可​​能希望考虑使用专用系统来管理您的部署？我一直在玩的一个有趣的解决方案是[rundeck](http://rundeck.org/)，它有一个[Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/RunDeck+Plugin)插件。我真的很喜欢 rundeck，因为它的简单性是它与 Jenkins 共有的一个特点。还有一个Nexus[插件](https://github.com/vbehar/nexus-rundeck-plugin)，使 rundeck 能够提供符合部署条件的工件的下拉列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T17:37:26.243

[请参阅https://github.com/cescoffier/puppet-nexus/tree/master/files](https://github.com/cescoffier/puppet-nexus/tree/master/files)上的 download-artifact-from-nexus.sh 脚本

就我而言，我将其修改为使用 wget 而不是 curl。出于某种原因，curl 对我不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:57:34.860

我建议你为此创建一个新的 pom。这样你就不会被詹金斯束缚。您无需从 nexus 显式检出工件（请注意，这在 maven 语音中称为从存储库下载）。您可以在 tomcat maven 插件中指定不同的战争文件位置。请参阅[文档](http://mojo.codehaus.org/tomcat-maven-plugin/deployment.html#Deploying%20a%20WAR%20file)。要从存储库下载最新版本，请参阅[此问题的答案。](https://stackoverflow.com/questions/30571/how-do-i-tell-maven-to-use-the-latest-version-of-a-dependency)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-14T13:27:09.433

下面的语法对我有用。

```
wget --user=admin --password=admin http://192.168.0.3:8081/repository/simpleapp-snapshot/in/javahome/simple-app/3.0.0-SNAPSHOT/simple-app-3.0.0-20210513.143540-1.war 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-18T17:02:36.927

我用 curl 遇到了同样的问题，我解决了它购买添加参数 -L，以便 curl 将遵循重定向下载工件，wget 默认遵循重定向。

# objective-c - 使用 OpenGL 在 iPhone 编程中使用掩码

> ID：11848410
> 
> 赞同：-2
> 
> 时间：2012-08-07T14:41:23.413
> 
> 标签：objective-c, ios, opengl-es

我想知道有什么简单的方法可以在目标 C 中使用带有 openGL 的蒙版/剪辑？目前我正在研究 cocos2d 但有 peapole 说这是一个复杂的问题。你有什么意见？

更新：我当然不好。我的目标是用 ccDrawCubicBezier 绘制拼图，然后剪辑到那个精灵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:48:50.730

如果您使用 cocos2d，您采用的方法将根据您使用的是 cocos2d v1.x (openGL ES 1.0) 还是 cocos2d v2.x (openGL ES 2.0) 而有所不同。

对于 v1.0，你可以使用 openGL Blending 和 cocos2d 的 CCRenderTexture，这里有介绍；

[http://www.raywenderlich.com/4421/how-to-mask-a-sprite-with-cocos2d-1-0](http://www.raywenderlich.com/4421/how-to-mask-a-sprite-with-cocos2d-1-0)

对于 v2.0，您可以使用自定义着色器

[http://www.raywenderlich.com/4428/how-to-mask-a-sprite-with-cocos2d-2-0](http://www.raywenderlich.com/4428/how-to-mask-a-sprite-with-cocos2d-2-0)

# vb.net - 列出任务栏中的所有项目

> ID：11848413
> 
> 赞同：0
> 
> 时间：2012-08-07T14:41:31.683
> 
> 标签：vb.net

我想列出 Windows 任务栏中的所有项目。不是进程名称。

```
 For Each processname As Process In Process.GetProcesses
        If processname.MainWindowTitle <> "" Then ListBox1.Items.Add(processname.MainWindowTitle)
    Next 
```

上面的代码只列出了正在运行的应用程序名称。但我也想列出所有项目，包括目录和驱动器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:01:48.643

要从进程中获取可执行文件的路径，请使用[Modules](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.modules.aspx)属性。[ProcessModule](http://msdn.microsoft.com/en-us/library/system.diagnostics.processmodule.aspx)类有一个[FileName](http://msdn.microsoft.com/en-us/library/system.diagnostics.processmodule.filename.aspx)属性，其中包含您要查找的路径
。

* * *

**例子：**

```
For Each processname As Process In Process.GetProcesses
    If processname.MainWindowTitle <> "" Then 
        Console.WriteLine(processname.MainWindowTitle)
        Try
            ' catch win32expection if rights are missing
            Console.WriteLine("--> " & processname.Modules(0).FileName)
        Catch 
        End Try
    End if
Next 
```

**输出：**

> ...
> LINQPad 4
> --> C:\Tools\LINQPad.exe
> vb.net - 列出任务栏中的所有项目 - 堆栈溢出 - Google Chrome
> --> C:\Users\theuser\AppData\Local\Google\Chrome\Application \chrome.exe
> ...

# r - 导入矩阵由字符串和数值组成

> ID：11848417
> 
> 赞同：0
> 
> 时间：2012-08-07T14:41:43.967
> 
> 标签：r

读取 csv 文件时，其中每个单元格可以是字符串或数值。我应该使用哪种方法将此 csv 文件读入矩阵。棘手的是我可能需要对这个导入的矩阵执行一些计算。如果一个条目是一个字符串，我需要对这个字符串执行一些基于字符的操作，例如，将它与另一个字符串进行比较。如果条目是数值，我需要对其执行加/减操作。我应该如何导入这个 csv 文件：

```
testmatrix = as.character(read.csv("test.csv", sep=","))
testmatrix = as.vector(read.csv("test.csv", sep=",")) 
```

数据是这样的

```
word1   word2   123  word3
234     456     word4  word5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:45:07.707

您可以使用其中一个`read.*`函数读入数据框，但由于没有逗号，因此`read.csv`没有多大意义。请务必使用“stringsAsFactors”以避免自动创建因子。转换为矩阵以方便使用矢量化函数进行处理，例如`sum`：

```
 dat <- read.table(text="word1   word2   123  word3
 234     456     word4  word5", header=FALSE, stringsAsFactors=FALSE)
 mdat <- data.matrix(dat)  # you get warning but it's safe to ignore them in this case.
 sum(as.numeric(mdat)[ is.numeric(mdat) ] )
#[1] NA  left in to illustrate need to use na.rm=TRUE
 sum(as.numeric(mdat)[ is.numeric(mdat) ] , na.rm=TRUE)
#[1] 813   expected result 
```

# jquery - 优化 jquery prev 选择器

> ID：11848418
> 
> 赞同：0
> 
> 时间：2012-08-07T14:41:49.373
> 
> 标签：jquery, jquery-selectors

有没有办法让下面的选择器更好？
不添加额外的类或 ID？
只选择`item-2`从`item-5`下数的第一个。
这行得通，但必须有一个更简单的方法。

`$first_previous = $($('li.item-5').prevAll('.item-2')[0]);`

```
<ul>
   <li class="item-1">list item 1</li>
   <li class="item-2">Unkown number of item-2 will happen</li>
   <li class="item-2">Unkown number of item-2 will happen</li>
   <li class="item-2">list item 2 Only select this one, not the other #2</li>
   <li class="item-3">list item 3</li>
   <li class="item-4">list item 4</li>
   <li class="item-5">list item 5 Start here</li>
   <li class="item-2">it might even occur after the item-5</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:44:49.027

你可以试试：

```
$(this).siblings('.item-2').eq(1); 
```

（哪里`$(this)`是一个 jQuery 对象，其中包含一个类的元素`.item-5`）

但是你会想使用[http://jsperf.com/](http://jsperf.com/)之类的东西来找出哪种方式更快！

[这里的工作示例](http://jsfiddle.net/ZHPEM/)

## 更新

然后试试这个：

```
$(this).siblings('.item-2').last(); 
```

文档[`.last()`](http://api.jquery.com/last/)

好的...然后尝试：

```
$(this).prev('.item-2') 
```

用途[`.prev()`](http://api.jquery.com/prev/)

## 更新 2

循环项目并获得第一个您想要的项目：

```
$('.item-5').prevAll().each(function() {
    if ($(this).hasClass('item-2')) {
        alert($(this).text());
        return false; // break early
    }
});​ 
```

[这里的例子](http://jsfiddle.net/9K7FX/)

# entity-framework - EF Code First 不加载层次结构中一个实体的属性，而是加载另一个实体

> ID：11848420
> 
> 赞同：0
> 
> 时间：2012-08-07T14:41:56.330
> 
> 标签：entity-framework, ef-code-first

我有以下（非常奇怪）的问题。

我定义了一个数据库，其中包含一堆使用 EF5 Code First（最新位）的实体。这些实体之一是系统用户的抽象类。

这个抽象类下面有两个具体的类，一个用于本地用户（针对 DB 进行身份验证的用户），另一个用于域用户（其身份验证由 DC 负责的用户）。

奇怪的行为是，当我从数据库（使用 EF）加载一行时，如果实例是 LocalUser，一切正常，并且所有导航属性都已填充。但是当我加载一个 DomainUser 时，只加载了基本属性并且所有导航属性都为空。

另一个重要的事情是所有导航属性都在 Abstract User 类中定义，具体类只处理每种用户类型的身份验证。

# html - 如果浏览器尺寸小，则完全更改站点

> ID：11848422
> 
> 赞同：-1
> 
> 时间：2012-08-07T14:42:01.523
> 
> 标签：html, css, media-queries

我目前在我的 css 中使用媒体查询，但我的网站看起来仍然很糟糕。有没有办法先确定浏览器的宽度，然后加载不同的索引文件？

在这里发布一些代码是我的媒体查询：

```
@media screen and (max-width: 600px) {
  .topbar{
    opacity: 0;
  } 
....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:57:00.510

为不同的屏幕尺寸加载不同的 css 文件可能是一个想法；本质上将媒体选择从 css 移动到 html：

```
<link rel="stylesheet" media="screen and (max-width: 600px)" href="600px.css"> 
```

您可能需要阅读[使用 CSS 检测不同的设备平台以](https://stackoverflow.com/questions/8037973/detect-different-device-platforms-using-css)获取某些相关内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T14:57:12.867

我想说对构建你的 CSS 做更多的研究，但要回答你的问题：

```
<script type="text/javascript">
if (screen.width <= 699) {
document.location = "http://mobilesite.com";
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T14:58:29.653

通常，您希望为您的网站使用相同的 .html 文件，然后使用 CSS 专门针对桌面或移动设备进行自定义。我知道您可能对这两个站点有非常不同的想法，但是如果您的标记（html 代码）足够好，这一切都可以在纯 CSS 中完成。查看[CSS Zen Garden](http://www.csszengarden.com/)了解 CSS 的强大功能。

如果您想完全重置移动网站的 css，只需将旧 css 包装在媒体查询目标屏幕`screen and (min-width: 601px)`中，您会发现您的移动网站完全没有样式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T15:00:37.437

`css`与根据浏览器宽度加载不同的索引文件无关。

如果您想使用[`@media`](http://www.w3.org/TR/css3-mediaqueries/)规则为元素设置不同的样式，请确保将它们设置在靠近页面*底部*的位置，换句话说 -*在*主要样式之后，否则 - 它们将被简单地覆盖。

# javascript - jQuery选择多个元素是否具有相同的类

> ID：11848426
> 
> 赞同：0
> 
> 时间：2012-08-07T14:42:30.190
> 
> 标签：javascript, jquery-selectors

示例 HTML：

```
<div class="elem-1"></div>
<div class="elem-2"></div>
<div class="elem-2"></div>
<div class="elem-3"></div>
<div class="elem-4"></div>
<div class="elem-4"></div>
<div class="elem-4"></div> 
```

需要：如何使用 jQuery 选择器选择具有“elem-2”和“elem-4”的 div？（多个元素具有相同的类）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:43:57.780

您可以使用`,`来分隔不同的选择器：

```
$(".elem-2, .elem-4") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:44:36.363

```
$('.elem-2, .elem-4').hide() // or any other jquery method 
```

顺便说一句，它不是`jQuery`选择器，它只是一个`CSS`选择器，看[这篇文章](http://webdesign.about.com/od/cssselectors/f/comma-in-css-selectors.htm)的解释

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:19:18.563

`selector`将获得您想要的价值

[http://jsfiddle.net/mMEN5/1](http://jsfiddle.net/mMEN5/1)

```
var selector = $();

var list = $('[class]').toArray().reduce(function(p, e){
    p = p || {};
    var classes = $(e).prop('class').split(/\s/);
    $.each(classes, function(i,c){
        p[c] = p[c] || [];
        p[c].push(e);
    });
    return p;
}, {})

for (el in list) if (list[el].length > 1) selector=selector.add(list[el]);
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T11:14:58.147

即使您要求使用 css 选择器，我们也可以使用 attributeStartsWith 选择器

我只会提到选择器的用法。您可以使用 to 进行任何内部 DOM 更改

alert($('div[class^="elem-2"], div[class^="elem-4"]').length);

在这里，我使用 .length 只是为了给出正确的计数。使用也可以在上面使用 id 属性。

# javascript - 为什么这个 JQuery 代码不能在 IE8 和 IE9 上运行？

> ID：11848427
> 
> 赞同：0
> 
> 时间：2012-08-07T14:42:34.813
> 
> 标签：javascript, jquery, html, internet-explorer-8, internet-explorer-9

此函数使用`.load`JQuery 中的方法更新我的内容。该代码在 Google Chrome 和 Mozilla Firefox 上按预期工作，但在 IE8 和 IE9 中根本不起作用。

这是它的内容：

```
 $(function(){

   var newHash='';
    $contentwrapper = $("#contentwrapper");

    $("nav").delegate(".menuOptions", "click", function() 
    {
        window.location.hash = $(this).attr("href");
        return false;
    });

    $(window).bind('hashchange', function()
    {
        newHash = window.location.hash.substring(1);  
        $contentwrapper.load(newHash + " #contentcolumn");
        setTimeout(TitleUpdater, 200);
    });
 });

 function TitleUpdater()
 {
     top.document.title=$("#contentcolumn").attr("title");
 } 
```

我想知道如何使这段代码与 Internet Explorer 兼容！谢谢你。

编辑：在 Firefox 和 Chrome 上，此代码仅替换一个大代码，`<div id="contentcolumn">...</div>`并且所有样式都与脚本执行前保持一致。虽然 IE8 和 IE9 只是删除了我所有的 html 代码`<div id="contentcolumn">...</div>`（它甚至覆盖了`head`and`body`标签）。这真的很奇怪！

这是 index.html：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Vladi Manaev</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="css/bagums.css" media="screen" />
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    </head>

    <body>
        <div id="maincontainer">

            <div id="topsection">
                <div id="banner"></div>
                <div class="navbar">
                    <div class="navbar-inner">
                        <div class="container">
                            <nav> 
                                <a class="brand" href="">Bagums.com</a>
                                <ul class="nav">
                                    <li class="dropdown">
                                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Basic Tutorials<b class="caret"></b></a>
                                        <ul class="dropdown-menu">
                                            <li><a class="menuOptions" href="BasicTutorials/CTutorial.html" name="CTutorial">C</a></li>
                                            <li><a class="menuOptions" href="BasicTutorials/CppTutorial.html" name="CppTutorial">C++</a></li>
                                            <li><a class="menuOptions" href="BasicTutorials/CsharpTutorial.html" name="CsharpTutorial">C#</a></li>
                                            <li><a class="menuOptions" href="BasicTutorials/JavaTutorial.html" name="JavaTutorial">Java</a></li>
                                            <li><a class="menuOptions" href="BasicTutorials/OtherTutorials.html" name="OtherTutorials">Others</a></li>
                                        </ul>
                                    </li>
                                    <li class="dropdown">
                                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">My Projects<b class="caret"></b></a>
                                        <ul class="dropdown-menu">
                                            <li><a class="menuOptions" href="MyProjects/CProject.html">C</a></li>
                                            <li><a class="menuOptions" href="MyProjects/CppProject.html">C++</a></li>
                                            <li><a class="menuOptions" href="MyProjects/CsharpProject.html">C#</a></li>
                                            <li><a class="menuOptions" href="MyProjects/JavaProject.html">Java</a></li>
                                            <li><a class="menuOptions" href="MyProjects/Others.html">Others</a></li>
                                        </ul>
                                    </li>

                                </ul>

                                <ul class="nav pull-right">
                                    <li class="dropdown-toggle"><a class="menuOptions" href="OtherPages/Links.html">Links</a></li>   
                                    <li class="dropdown-toggle"><a class="menuOptions" href="OtherPages/Contact.html">Contact</a></li>
                                    <li class="dropdown-toggle"><a class="menuOptions" href="OtherPages/About.html">About</a></li>
                                </ul>
                            </nav>
                        </div> <!-- container -->
                    </div> <!-- navbar-inner -->
                </div><!-- navbar -->
            </div><!-- topsection -->

            <div id="contentwrapper">
                <div id="contentcolumn" title="Vladi Manaev">
                    <div id="mainPostsTitle">Latest News</div>

                    <div class="postWrapper">
                        <div class="post">
                            <div class="postTitle"><div class="postTitleTxt">Third post on website</div></div>
                            <div class="postInfo"> Aug 4, 2012 @ 7:23 pm</div>
                            <div class="postContent">
                                <p>
                                    CONTENT
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="postWrapper">
                        <div class="post">
                            <div class="postTitle"><div class="postTitleTxt">Second post on website</div></div>
                            <div class="postInfo"> Aug 4, 2012 @ 7:22 pm</div>
                            <div class="postContent">
                                <p>
                                     CONTENT
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="postWrapper">
                        <div class="post">
                            <div class="postTitle"><div class="postTitleTxt">First post on website</div></div>
                            <div class="postInfo"> Aug 4, 2012 @ 6:48 pm</div>
                            <div class="postContent">
                                <p>
                                       CONTENT
                                </p>
                            </div>
                        </div>
                    </div>

                </div><!-- contentcolumn -->
            </div><!-- contentwrapper -->

            <div id="footer"> 
                <nav>
                    <div> Copyright &copy; 2012 created by <a class="menuOptions" href="OtherPages/Contact.html"> Vladi Manaev</a></div>
                </nav>
            </div><!-- footer -->

        </div><!-- maincontainer -->

        <!-- Placed at the end of the document so the page load faster -->
        <script type="text/javascript" src="scripts/jquery-1.7.2.js"></script>
        <script type="text/javascript" src="scripts/bootstrap-dropdown.js"></script>

    <script>
     $(function(){

       var newHash='';
        $contentwrapper = $("#contentwrapper");

        $("nav").delegate(".menuOptions", "click", function() 
        {
            window.location.hash = $(this).attr("href");
            return false;
        });

        $(window).bind('hashchange', function()
        {
            newHash = window.location.hash.substring(1);  
            $contentwrapper.load(newHash + " #contentcolumn");
            setTimeout(TitleUpdater, 200);
        });
     });

     function TitleUpdater()
     {
         top.document.title=$("#contentcolumn").attr("title");
     }

</script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:53:15.400

当我将我的 href 更改为以 # 开头时，如下所示：

```
<a class="menuOptions" href="#BasicTutorials/CTutorial.html" name="CTutorial">C</a> 
```

...

它也开始在 IE 上工作！我的猜测是 window.location.hash 在 IE 上不起作用......当我手动添加“#”时，它解决了这个问题。

感谢大家尝试提供帮助！

# macros - 为 webgl 编译着色器时的宏

> ID：11848429
> 
> 赞同：0
> 
> 时间：2012-08-07T14:42:39.883
> 
> 标签：macros, shader, webgl

在 OpenGL ES 2 中，您可以将字符串数组设置为着色器源

```
void ShaderSource( uint shader, sizei count, const char **string, const int *length ); 
```

可用于将宏“注入”到着色器源中。WebGL 中的相应函数看起来只需要一个字符串。

```
void shaderSource(WebGLShader shader, DOMString source) 
```

使用宏手动将它们插入源字符串的唯一可能性是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:21:29.170

我不确定你的意思`inject macros`

```
const char* str1 = "foo";
const char* str2 = "bar";
const char* strings[] = { str1, str2, }

glShaderSource(shader, 2, strings, NULL); 
```

在功能上等同于

```
var str1 = "foo";
var str2 = "bar";
var strings = [str1, str2];
gl.shaderSource(shader, strings.join("")); 
```

所以，回答你的问题。如果您想插入宏，请将它们添加到您提供给 gl.shaderSource 的字符串中。宏和它们来自哪个字符串没有什么特别之处。就 GL 而言，它只是一个大字符串。

# javascript - 画出画布需要多少时间？

> ID：11848432
> 
> 赞同：9
> 
> 时间：2012-08-07T14:42:53.143
> 
> 标签：javascript, html, canvas

我知道 HTML5 gamedev 中最昂贵的操作之一就是在画布上绘图。但是，在它*之外*绘制图像呢？那有多贵？当画布为 100 x 100 像素并且我尝试在 (1000, 1000) 处绘制图像时，究竟会发生什么？检查精灵坐标以确保它在画布内会提高渲染效率吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T16:05:13.883

*在这些测试中，我使用了 Google Chrome 版本 21.0.1180.57。*

我做了一个小小提琴来测试这种情况......你可以在这里查看：http: [//jsfiddle.net/Yannbane/Tnahv/](http://jsfiddle.net/Yannbane/Tnahv/)。

我已经运行了 1000000 次测试，这是我得到的数据：

在画布内渲染图像持续了 2399 毫秒。
在画布外渲染图像持续了 888 毫秒。

这意味着在画布外绘制*确实*需要一些时间，大约是在画布内部渲染所需时间的 37%。

结论：**最好在渲染之前检查图像是否在画布内。**

但是，当然，我想知道好多少……所以，我又做了一次测试。这一次，我当然实现了边界检查，并且**只用了 3 毫秒**就可以在画布外“渲染”图像 1000000 次。这比简单地在外面渲染要好 29600%。

You can see those tests here: [http://jsfiddle.net/Yannbane/PVZnz/3/](http://jsfiddle.net/Yannbane/PVZnz/3/).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T14:58:06.110

**如果图形不在屏幕上，您需要自己执行此检查并跳过绘图。**

话虽如此，某些浏览器确实在某些情况下对此进行了优化。不久前，我在写一篇关于 IE9 性能分析器的文章时发现，如果图像超出范围，IE9 将优化绘制图像。转换矩阵可能必须是恒等式才能使此优化起作用，并且无论哪种方式，您都不应该依赖浏览器来执行此操作。

始终检查。

编辑：您可以运行这个简单的测试来查看：http: [//jsperf.com/on-screen-vs-off](http://jsperf.com/on-screen-vs-off)

看起来 Chrome 和 Safari 肯定会优化它，至少在简单的情况下，而 firefox 并没有

# javascript - 如何在更改父窗口的同时单击链接以在新窗口中打开 PDF？

> ID：11848434
> 
> 赞同：0
> 
> 时间：2012-08-07T14:42:57.793
> 
> 标签：javascript, html

如何在更改父窗口的同时单击链接以在新窗口中打开 PDF？

就像是？…</p>

```
<a href="assets/pdf/a_pdf_doc.pdf" target="new"
   onclick="window.parent.location.href='newpage.html';">A PDF Doc</a> 
```

当然以上不起作用....只是我认为接近答案的一个例子。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:49:53.350

您可以将“新窗口”和“重定向”功能移动到单个 JS 函数中。该定义可能如下所示：

```
<script type="text/javascript">

    function openPdf(e, path, redirect) {
        // stop the browser from going to the href
        e = e || window.event; // for IE
        e.preventDefault(); 

        // launch a new window with your PDF
        window.open(path, 'somename', ... /* options */);

        // redirect current page to new location
        window.location = redirect;
    }

</script> 
```

然后在您的 HTML 中：

```
<a href="assets/pdf/a_pdf_doc.pdf"
    onclick="openPdf(event, 'assets/pdf/a_pdf_doc.pdf', 'newpage.html');">
    A PDF Doc
</a> 
```

`href`如果用户关闭了 JS，我会保留指定的常规属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:48:01.257

尝试将链接更改为：

```
<a href="javascript:void(0)" onclick="opentwowindows()">click me</a> 
```

然后在当前页面和父页面创建一个javascript函数；就像是：

```
<script>

function opentwowindows() {
       window.parent.location.href='newpage.html';
       window.location.href="/anotherpage.html';
 }

</script> 
```

# objective-c - 对创建新目录和更改目录感到困惑（Objective-C）

> ID：11848441
> 
> 赞同：1
> 
> 时间：2012-08-07T14:43:21.047
> 
> 标签：objective-c, directory

当我将当前目录路径更改为时，`main.m`为什么`newDir`它仍然说没有文件`newDir`？我也多次运行这个程序，没有错误。这是否意味着我最终创建了多个`newDir`？

```
#import <Foundation/Foundation.h>

int main (int argc, const char * argv[])
{

    @autoreleasepool {
        NSString *newDir = @"newDir";
        NSFileManager *manager = [NSFileManager defaultManager];

        if ([manager createDirectoryAtPath:newDir withIntermediateDirectories:YES attributes:nil error:NULL] == NO) {
            NSLog(@"couldnt create new directory");
            return 1;
        }

        if ([manager changeCurrentDirectoryPath: newDir] == NO) {
            NSLog(@"couldnt change directory path");
            return 2;
        }

        NSLog(@"%@", [manager currentDirectoryPath]);
        NSLog(@"%@", [manager contentsOfDirectoryAtPath:newDir error:NULL]);
    }
    return 0;
} 
```

输出：

```
2012-08-07 10:27:20.428 Test[853:707] /Users/ss/Library/Developer/Xcode/DerivedData/Test-bfrqtnrhaafmdzghoyirjnfqjbfc/Build/Products/Debug/newDir
2012-08-07 10:36:47.832 Test[885:707] (null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:49:20.677

路径`main.m`不会影响您运行程序时发生的情况：唯一的问题是该目录是否有任何文件，并且从日志看来它没有。

要在目录中创建一些文件，请在终端窗口中运行以下命令：

```
touch /Users/ss/Library/Developer/Xcode/DerivedData/Test-bfrqtnrhaafmdzghoyirjnfqjbfc/Build/Products/Debug/newDir/quick.txt
touch /Users/ss/Library/Developer/Xcode/DerivedData/Test-bfrqtnrhaafmdzghoyirjnfqjbfc/Build/Products/Debug/newDir/brown.txt
touch /Users/ss/Library/Developer/Xcode/DerivedData/Test-bfrqtnrhaafmdzghoyirjnfqjbfc/Build/Products/Debug/newDir/fox.txt 
```

这将创建三个空文件。现在运行你的程序，看看它是否发现了新创建的`txt`文件；它应该。

关于第二个问题，操作系统不允许您创建多个具有相同名称的文件系统对象，所以答案是否定的，您只创建了一个`newDir`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:53:48.627

由于您忽略了`contentsOfDirectoryAtPath`呼叫中的错误，因此呼叫完全有可能失败 - 因此为空。

如果不查看引用，您似乎正在寻找 directory `.../newDir/newDir`，一个可能不存在的目录。

无论如何，因为`newDir`是新的，它不会包含任何条目（除了 . 和 ..）。

# java - AspectJ 中 @After 和 @AfterThrowing 的区别

> ID：11848442
> 
> 赞同：0
> 
> 时间：2012-08-07T14:43:24.190
> 
> 标签：java, log4j, aspectj

我不明白为什么在这种情况下`@After`应用建议而不是：`@AfterThrowing`

```
 @Pointcut("execution(* componentB.Bye.run())")
    public void newThread(){
    }

    @After("newThread()")
    public void cokolwiek2(JoinPoint joinPoint){
        report(joinPoint);
    }

    @AfterThrowing(pointcut="newThread()",throwing="e")
public void itsAFoo(JoinPoint joinPoint, RemoteException e) {
        logger.error(joinPoint.getSignature().toLongString() + " exception here!");
} 
```

我确信会引发异常：

```
public String greeting(String c) throws RemoteException,
        InterruptedException {
    throw new RemoteException();
    //return "Good morning!";
} 
```

但是没有日志`exception here!`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:46:44.813

切入点`execution(* componentB.Bye.run())`不包括方法`public String greeting(String c)`。

`@After`和之间的区别在于`@AfterThrowing`仅`@AfterThrowing`在发生异常时`@After`调用，而在抛出异常或方法成功返回时调用。因此，如果出现异常并且您有两个建议，则它们都将被执行。

# java - NoClassDefFound 错误：Logcat 读取 $1 指示内部类错误，但我没有

> ID：11848444
> 
> 赞同：0
> 
> 时间：2012-08-07T14:43:41.527
> 
> 标签：java, android, tcpserver

我在 android 中设置了一个 tcp 服务器，我能够让示例正常工作，但不能在我自己的应用程序中实现示例。我不断收到 NoClassDefFound 错误，并尝试删除内部类并创建单独的类，但它似乎不起作用。我已经包含了我的 LogCats 和 java 文件。

日志猫

```
08-07 14:34:03.642: W/dalvikvm(332): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-07 14:34:03.642: E/AndroidRuntime(332): FATAL EXCEPTION: main
08-07 14:34:03.642: E/AndroidRuntime(332): java.lang.NoClassDefFoundError: com.example.com.proto1.AndroidNetCommunicationClientActivityInner$1
08-07 14:34:03.642: E/AndroidRuntime(332):  at com.example.com.proto1.AndroidNetCommunicationClientActivityInner.<init>(AndroidNetCommunicationClientActivityInner.java:103)
08-07 14:34:03.642: E/AndroidRuntime(332):  at java.lang.Class.newInstanceImpl(Native Method)
08-07 14:34:03.642: E/AndroidRuntime(332):  at java.lang.Class.newInstance(Class.java:1409)
08-07 14:34:03.642: E/AndroidRuntime(332):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-07 14:34:03.642: E/AndroidRuntime(332):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
08-07 14:34:03.642: E/AndroidRuntime(332):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-07 14:34:03.642: E/AndroidRuntime(332):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-07 14:34:03.642: E/AndroidRuntime(332):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-07 14:34:03.642: E/AndroidRuntime(332):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-07 14:34:03.642: E/AndroidRuntime(332):  at android.os.Looper.loop(Looper.java:123)
08-07 14:34:03.642: E/AndroidRuntime(332):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-07 14:34:03.642: E/AndroidRuntime(332):  at java.lang.reflect.Method.invokeNative(Native Method)
08-07 14:34:03.642: E/AndroidRuntime(332):  at java.lang.reflect.Method.invoke(Method.java:507)
08-07 14:34:03.642: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-07 14:34:03.642: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-07 14:34:03.642: E/AndroidRuntime(332):  at dalvik.system.NativeStart.main(Native Method) 
```

主 tcp java

```
import net.client.MyRequest;
import net.client.MyResponse;
import net.client.R;
import eneter.messaging.diagnostic.EneterTrace;
import eneter.messaging.endpoints.typedmessages.*;
import eneter.messaging.messagingsystems.messagingsystembase.*;
import eneter.messaging.messagingsystems.tcpmessagingsystem.TcpMessagingSystemFactory;
import eneter.net.system.EventHandler;
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;

public class AndroidNetCommunicationClientActivityInner extends Activity {

    // UI controls
    private Handler myRefresh = new Handler();
    private EditText myMessageTextEditText;
    private EditText myResponseEditText;
    private Button mySendRequestBtn;

    // Sender sending MyRequest and as a response receiving MyResponse.
    private IDuplexTypedMessageSender<MyResponse, MyRequest> mySender;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Get UI widgets.
        myMessageTextEditText = (EditText) findViewById(R.id.messageTextEditText);
        myResponseEditText = (EditText) findViewById(R.id.messageLengthEditText);
        mySendRequestBtn = (Button) findViewById(R.id.sendRequestBtn);

        // Subscribe to handle the button click.
        mySendRequestBtn.setOnClickListener(myOnSendRequestClickHandler);

        try {
            openConnection();
        } catch (Exception err) {
            EneterTrace.error("Open connection failed.", err);
        }
    }

    @Override
    public void onDestroy() {
        // Stop listening to response messages.
        mySender.detachDuplexOutputChannel();
    }

    private void openConnection() throws Exception {
        // Create sender sending MyRequest and as a response receiving
        // MyResponse
        IDuplexTypedMessagesFactory aSenderFactory = new DuplexTypedMessagesFactory();
        mySender = aSenderFactory.createDuplexTypedMessageSender(
                MyResponse.class, MyRequest.class);

        // Subscribe to receive response messages.
        mySender.responseReceived().subscribe(myOnResponseHandler);

        // Create TCP messaging for the communication.
        // Note: 10.0.2.2 is a special alias to the loopback (127.0.0.1)
        // on the development machine.
        IMessagingSystemFactory aMessaging = new TcpMessagingSystemFactory();
        IDuplexOutputChannel anOutputChannel = aMessaging
                .createDuplexOutputChannel("tcp://10.0.2.2:8060/");

        // Attach the output channel to the sender and be able to send
        // messages and receive responses.
        mySender.attachDuplexOutputChannel(anOutputChannel);
    }

    private void onSendRequest(View v) {
        // Create the request message.
        MyRequest aRequestMsg = new MyRequest();
        aRequestMsg.Text = myMessageTextEditText.getText().toString();

        // Send the request message.
        try {
            mySender.sendRequestMessage(aRequestMsg);
        } catch (Exception err) {
            EneterTrace.error("Sending the message failed.", err);
        }
    }

    private void onResponseReceived(Object sender,
            final TypedResponseReceivedEventArgs<MyResponse> e) {
        // Display the result - returned number of characters.
        // Note: Marshal displaying to the correct UI thread.
        myRefresh.post(new Runnable() {
            public void run() {
                myResponseEditText.setText(Integer.toString(e
                        .getResponseMessage().Length));
            }
        });
    }

    private EventHandler<TypedResponseReceivedEventArgs<MyResponse>> myOnResponseHandler = new EventHandler<TypedResponseReceivedEventArgs<MyResponse>>() {
        public void onEvent(Object sender,
                TypedResponseReceivedEventArgs<MyResponse> e) {
            onResponseReceived(sender, e);
        }
    };

    private OnClickListener myOnSendRequestClickHandler = new OnClickListener() {
        public void onClick(View v) {
            onSendRequest(v);
        }
    };
} 
```

曾经是内部的类

```
public class MyRequest {
    public String Text;
} 
```

曾经是内部的二等舱

```
public class MyResponse {
    public int Length;
} 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.com.proto1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.INTERNET" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/theeye"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".mainj"
            android:label="@string/title_activity_mainj" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".menu"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MENU" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Infoactive"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.INFOSCREEN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".VoicePrompts"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.VOICEPROMPTS" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".VPon"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.VPON" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".VPoff"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.VPOFF" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <!-- android name must match the name of the java you want to use -->
        <activity
            android:name=".VoiceRecognition"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.RECOGNITIONMENU" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Recognition"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="ACTION_RECOGNIZE_SPEECH" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SpeakingAndroid"
            android:label="tts" >
            <intent-filter>
                <action android:name="android.intent.action.SPEAK" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".AndroidNetCommunicationClientActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="ANDROID_NET" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".AndroidNetCommunicationClientActivityInner"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="ANDROID_NET2" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:47:22.197

我不确定这个错误，但是 $1 指的是一个匿名内部类（一个没有名字的类），就像你在这里使用的那样

```
private void onResponseReceived(Object sender,
        final TypedResponseReceivedEventArgs<MyResponse> e) {
    // Display the result - returned number of characters.
    // Note: Marshal displaying to the correct UI thread.
    myRefresh.post(new Runnable() {
        public void run() {
            myResponseEditText.setText(Integer.toString(e
                    .getResponseMessage().Length));
        }
    });
} 
```

从技术上讲，您正在创建一个名为 $1 并且在此类内部的 Runnable 子类。尽管我会尝试重新编译所有内容，但不确定错误是什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:15:58.267

我想我发现了问题所在

在清单文件中，包被声明`AndroidNetCommunicationClientActivityInner`为

```
package="com.example.com.proto1" 
```

但实际上您在该包中没有该类，而是在默认包中，因为在指定的 JAVA 文件中没有包声明。

但是 android 会为那个类寻找那个包，因此会抛出`java.lang.NoClassDefFoundError`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:48:36.197

您还没有重新编译所有内容。要么，要么你的类路径中有一个任性的条目。

# php - PHP 包括不能处理非常简单的代码

> ID：11848454
> 
> 赞同：0
> 
> 时间：2012-08-07T14:44:24.473
> 
> 标签：php, html, include

我试图在我的 index.php 中包含一个非常简单的 header.html，但它似乎不起作用，我无法解决这个问题：

这是 header.html 代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="css/master.css"/>
</head>
<body>
<header><img src="img/lys.png" class="logo_lys"/></header>
<nav>
    <ul>
        <li><a href="#">Accueil</a></li>
        <li><a href="#">Équipes</a></li>
        <li><a href="#">Tournois</a></li>
        <li><a href="#">Scrims</a></li>
        <li><a href="#">Forum</a></li>
    </ul>
</nav> 
</body>
<html> 
```

这是 index.php 代码：

```
 [...content]
    <body>
    <?php //include("header.html"); ?>
    <?php include("header.php"); ?>
     <?php //include($_SERVER['C:/Documents and Settings/sabourma/Bureau/site_2']."header.html");?>
   [...content]
    </body>
    </html> 
```

我试图将 header.html 更改为 header.php，因为如果它在 html 中，计算机将不会处理它。我还尝试包含我的标题的完整路径，但它没有用。请注意，我所有的文件现在都是本地的，所以它不可能是服务器问题。我还读过 php 可能是“禁用”，但不知道这意味着什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:49:48.690

> 请注意，我所有的文件现在都是本地的，所以它不可能是服务器问题

是的，它可以。

PHP 是（通常用作）服务器端编程语言。

如果没有服务器（必须安装和配置 PHP 解释器），它就无法工作。

（嗯，确实如此，但您必须通过 PHP 解释器运行文件，而不仅仅是在浏览器中加载它们）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T15:00:08.210

从您的问题下面的评论看来，可能有两个问题：

*   要么你没有安装 php
*   或者你已经安装了它但它没有运行

如果你还需要 php 软件，可以在[这里](http://www.apachefriends.org/en/xampp.html)找到。安装完所有内容后，其中有一个名为“htdocs”的文件夹，您可以在其中放置 php 文件。在浏览器中，您可以通过“http://localhost/”访问此文件夹。因此，例如，如果您在 htdocs 中有一个名为“greatsite”的文件夹，您可以在浏览器中通过以下方式访问它`http://localhost/greatsite/`

如果您只是没有激活 php，请打开 Xampp 启动器并启用 php 和 apache。

顺便说一句：您可以包含像 php 文件这样的 html 文件，两者都应该可以工作，这不是问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T14:47:59.030

您的带有标题的文件`html`被称为`header.html`，但您包括`header.php`. 我看到上面的行被注释掉了。

尝试：

```
<?=include_once('header.php');?> 
```

代替那些线。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T14:49:04.367

php.ini 文件中的某些属性将控制功能。但是，使用默认安装应该允许文件包含。

`$_SERVER['C:/Documents and Settings/sabourma/Bureau/site_2']."header.html`不是引用文件绝对路径的正确方法。

你会想用这样的东西来代替：

```
include($_SERVER['DOCUMENT_ROOT'] . "/path/to/header.php"); // DOCUMENT_ROOT represents the root directory, echo this for more info 
```

另请记住，`.html`包含在内时应该可以工作。它也可能不包括在内，因为您列出`header.php`了而不是`header.html`.

享受和好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-06T09:08:18.880

请不要养成使用短标签的习惯`<?`，因为它们并不总是得到支持。

`<?=include_once('header.php');?>`

可以替换为

`<?PHP include_once('header.php'); ?>`

# javascript - Twitter Bootstrap——将导航栏搜索设置为 100% 宽度

> ID：11848455
> 
> 赞同：3
> 
> 时间：2012-08-07T14:44:29.040
> 
> 标签：javascript, twitter-bootstrap

我有一个使用 Twitter 引导程序的导航栏。我希望搜索终端占用 100% 的未使用宽度。我可以使用 javascript 来解决这个问题，但是有没有办法用 css 或更优雅的方式设置它？

这是我的导航栏代码：

```
<div class="navbar navbar-fixed-bottom">
<div class="navbar-inner">
    <div class="container">
        <ul class="nav">
            <li class="active">
                <a class="brand" href="#">term:</a>
            </li>
            <!-- <li><a href="#">About</a></li>
            <li><a href="#">Portfolio</a></li>
            <li><a href="#">Contact</a></li> -->
        </ul>
        <form class="navbar-search">
          <input type="text" class="search-query" placeholder="Search">
        </form>
        <ul class="nav">
            <li><a href="#">Help</a></li>
        </ul>
    </div>
</div> 
```

这是相关的CSS：

```
.navbar-search {
  position: relative;
  float: left;
  margin-top: 6px;
  margin-bottom: 100px;
}
.navbar-search .search-query {
  height: 30px;
  width: 100%;
  padding: 4px 9px;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 15px;
  font-weight: normal;
  line-height: 1;
  color: #ffffff;
  background-color: #626262;
  border: 1px solid #151515;
  -webkit-box-shadow: inset 0 1px 2px rgba(0,0,0,.1), 0 1px 0 rgba(255,255,255,.15);
  -moz-box-shadow: inset 0 1px 2px rgba(0,0,0,.1), 0 1px 0 rgba(255,255,255,.15);
  box-shadow: inset 0 1px 2px rgba(0,0,0,.1), 0 1px 0 rgba(255,255,255,.15);
  -webkit-transition: none;
  -moz-transition: none;
  -ms-transition: none;
  -o-transition: none;
  transition: none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:17:45.747

你是标记这个的人吗？

您使用 navbar-fixed-bottom 将导航栏定位到底部，然后插入 100px 底部边距？重点是什么？

如果你只想实现![这个](../Images/c0c5da399368dff564e04019e0acab2b.png)，这个。然后你只需要应用你发布的html代码并删除css。

只需在您的输入字段中添加一个 span10 类，它就会是这样的

```
<input type="text" class="search-query span10" placeholder="Search"> 
```

# c - 棘手的循环

> ID：11848462
> 
> 赞同：-1
> 
> 时间：2012-08-07T14:44:50.833
> 
> 标签：c, for-loop, infinite-loop

我对 C 语言中的 for 循环问题感到困扰。

当我写：

```
#include<conio.h>
#include<stdio.h>
main()
{
    int i = 0;
    for( ; i ; )
    {
        printf("In for Loop");
    }
    getch();
} 
```

输出：没有打印。

代码被执行，但 printf 语句由于条件而没有打印。好的，这里没问题。

但是当我写这段代码时：

```
#include<conio.h>
#include<stdio.h>
main()
{
    for( ; 0 ; )
    {
        printf("In for Loop");
    }
    getch();
} 
```

输出：在 for 循环中。

我的 for 循环被执行了 1 次，但实际上它一定不能被执行。我不知道为什么？stackoverflow的编码器/程序员/黑客可以帮助我吗？请解释一下为什么我的 for 循环只给出一次这个输出。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T14:47:49.637

你写的不应该打印任何东西，但我怀疑导致问题的*实际*第二种情况代码（不是你输入的）是：

```
for( ; 0 ; );     // <==== note the trailing semicolon there.
{
    printf("In for Loop");
} 
```

在这种情况下 for 循环不会执行空语句，然后`{ }`代码会执行一次。

编辑：如果这不是问题，请将显示问题的完整程序直接粘贴到您的问题中。

编辑2：

以下最小可编译示例不打印任何内容：

```
#include <cstdio>

int main()
{
    for( ; 0 ; )
    {
        std::printf("In for Loop");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:48:23.513

两种方式都不应该输出任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:10:42.527

我无法在我的机器上复制这种行为，用 gcc 编译。这两个程序是：

```
#include <iostream>
int main()
{
  for( ; 0 ; )
  {
    std::cout << "Here I am!";
  }
  std::cout << "End of the program.";
} 
```

输出

```
End of Program 
```

一样

```
#include <iostream>
int main()
{
  int i = 0;
  for( ; i ; )
  {
    std::cout << "Here I am!";
  }
  std::cout << "End of Program";
} 
```

这是我们期望发生的，因为读取为循环继续条件的 0 被评估为 false，因此永远不会进入循环。

# jquery - 如果第一个日期大于第二个日期，则触发错误

> ID：11848471
> 
> 赞同：0
> 
> 时间：2012-08-07T14:45:04.033
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker, daterangepicker

我正在玩[http://jqueryui.com/demos/datepicker/#date-range](http://jqueryui.com/demos/datepicker/#date-range)但如果第一个日期大于第二个日期并且还阻止提交表单，则需要触发/触发错误，可以帮助我吗让这个工作？我注意到参数：

```
$("#to").datepicker( "option", "minDate", selectedDate );
$("#from").datepicker( "option", "maxDate", selectedDate ); 
```

但不知道这些是否有效。另外，如果有人知道更好的工具/库，请告诉我。

提前欢呼和感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:14:52.077

这是代码：

```
<script>
                $(document).ready(function(){
                    $("#from").datepicker( );
                    $("#to").datepicker( );
                });
            </script>

            <script>
                $(document).ready(function(){
                    $("#submit_form").click(function() {
                        testDates();
                    });
                });

                function testDates () {
                    var from = new Date(Date.parse($("#from").attr("value")));
                    var to = new Date(Date.parse($("#to").attr("value")));
                    if (from > to) {
                        alert("From is greater than to!");
                        return;
                    }
                    alert("do submit");
                }
            </script> 
```

# c# - 常见项目的存储库模式

> ID：11848476
> 
> 赞同：5
> 
> 时间：2012-08-07T14:45:15.767
> 
> 标签：c#, unit-testing, repository

嗨，我是存储库模式的新手。我想就我所遵循的方法获得反馈。

要求：为当前登录的用户构建菜单。

我的解决方案：

1.  我创建了一个服务，控制器将调用它来获取菜单项。

    ```
    public interface IApplicationHelperService
    {
        List<Menu> GetMenuForRoles();
    } 
    ```

2.  服务的实现

    ```
    public class ApplicationHelperService : IApplicationHelperService
    {
        private readonly IMenuRepository _menuRepository; //this fecthes the entire menu from the datastore
        private readonly ICommonService _commonService; //this is a Service that contained common items eg. UserDetails, ApplicationName etc.

        public ApplicationHelperService(IMenuRepository menuRepository,ICommonService commonService)
        {
            this._menuRepository = menuRepository;
            this._commonService = commonService;
         }

         public List<Menu> ApplicationMenu
         {
            get
            {
               return _menuRepository.GetMenu(_commonService.ApplicationName);
            }
         }

         List<Menu> IApplicationHelperService.GetMenuForRoles()
         {
             return ApplicationMenu.Where(p => p.ParentID == null &&      p.IsInRole(_commonService.CurrentUser.Roles)).OrderBy(p => p.MenuOrder).ToList();
         }

    } 
    ```

3.  然后是 CommonService（用于服务中所需的常见项目，例如 CurrentUser

    ```
    public interface ICommonService
    {
         IUser CurrentUser { get; }
         string ApplicationName { get; }
    } 
    ```

在实现 ICommonService 的类上，我使用上下文获取当前用户，换句话说，我的服务层不知道 HttpContext，因为将来有可能将其用于另一种类型的应用程序。因此，通过这种方式，当前用户可以对所有应用程序进行不同的处理，但我的服务层不会介意。

所以你应该给出反馈的是，这种将这种公共服务注入所有服务的方法是一种好方法还是有另一种方法这样做，我问的原因是在稍后阶段我将需要当前用户的用于审计目的的详细信息或出现的任何原因。

希望这对某人有意义。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:16:16.600

我们正在使用类似的方法。不同之处在于，我们没有将 CommonService 对象注入到每个服务中。

我们正在使用 WCF，并且我们已经为 OperationContext 编写了一个扩展来存储用户名等。可以使用静态方法调用来访问此扩展中定义的属性。它比 CommonService 实现具有优势；由于您使用的是 IOC，因此没有直接的方法可以在每个服务调用中将参数传递给 CommonService。例如，如果您在 WCF 调用中发送用户名，则需要在每个构造函数中设置 CurrentUser 的值。

我不知道你是否打算使用 WCF；但关键是：如果您需要将变量传递给您的 CommonService，您最终将在每个构造函数中填充此值。如果您不打算传递变量，那么您可以为您的服务创建一个基类并强制开发人员使用这个基类。

此外，您应该将 CommonService 的生命周期管理器设置为 UnityPerResolveLifeTimeManager，以免在每个构造函数中创建新实例。否则，您最终可能会在每个 Service 中拥有不同的实例。

# android - 阻止应用程序在使用时自行更新

> ID：11848478
> 
> 赞同：1
> 
> 时间：2012-08-07T14:45:21.460
> 
> 标签：android, auto-update, ota

因此，我发现可以在应用程序处于中间使用状态时更新应用程序。在上传锻炼之前，我的应用会记录锻炼并将值存储到本地数据库中。

在上次更新期间，我们更改了数据库，添加了新的表和列。一定数量的用户在锻炼期间更新了他们的应用程序，从而破坏了数据库。虽然这可以在事后修复，但它不会改变用户已经失去锻炼的事实。我一直在搜索，但还没有找到可以让应用程序等待更新直到它不被使用的东西。

欢迎任何建议。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:52:02.423

您无法停止更新，但可以确保没有损坏，也没有数据丢失：在更新之前，`onPause()`将调用应用程序的回调 - 时间来确保应用程序处于可恢复状态。这可能包括将临时工作集存储到一些临时存储中。更新后，应用程序将收到`onResume()`，您可以在其中加载工作集。

# regex - 如何在Notepad ++ Regex中搜索包含大写字母的单词，除了几个单词

> ID：11848480
> 
> 赞同：0
> 
> 时间：2012-08-07T14:45:24.033
> 
> 标签：regex, notepad++

给定一个包含大写字母的列的 sql 查询，我如何搜索包含大写字母但不包含 SQL 关键字的单词，例如：

```
SELECT ... ,
    table1.thisColumn AS column,
    ...
    FROM table1 
```

我尝试过构建这样的东西但没有成功：

```
(?!AS+FROM+LEFT+JOIN+ON)[A-Z]{2,} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:54:45.550

关于您现有的正则表达式需要注意两点。

1.  例外列表中的“或”运算符应该是 a`|`而不是 a `+`。将`+`被视为实际字符，而在这种情况下，`|`它将告诉正则表达式引擎“左”*或*“右”。
2.  要匹配包含至少一个大写字母的完整单词，您实际上还需要检查小写字母 - 但“要求”至少一个大写字母。

我想出了以下几点：

```
(?:^|\.|[\t ])(?!AS|FROM|LEFT|JOIN|ON)([a-z0-9]*[A-Z][a-zA-Z0-9]+) 
```

我针对您的示例查询对此进行了测试，并向其中添加了其他随机 SQL（例如扩展字段列表、`WHERE`子句等）。它成功地找到了每个包含至少一个大写字母并且不在要忽略的关键字列表中的单词。

如果您使用它只是通过`Find Next`or进行“搜索” `Find All in Opened|Current Documents`，它将突出显示匹配的单词和前面的`.`或空白字符。

如果您使用它来“替换”，则`.`可以通过匹配使用/访问匹配的单词（没有前面或空白字符）`\1`。

正则表达式解释：

```
(?:                         # non-matching group;
                            # a "word" is required to be preceeded by one of the following
    ^                       # beginning of line
    |\.                     # period
    |[\t ]                  # tab or space;
                            # note: we don't use the \s here because a newline will break notepadd++'s "find all" feature
)

(?!AS|FROM|LEFT|JOIN|ON)    # list of words to ignore

(                           # group to match
    [a-z0-9]*               # word can start with lowercase a-z or 0-9
    [A-Z]                   # required uppercase letter
    [a-zA-Z0-9]+            # word can end with lowercase/uppercase a-z or 0-9
) 
```

您还需要在“单词可以包含这些字符”列表中添加任何缺少的 SQL 关键字（如果需要）或其他允许的字符。

# svn - 如何在SVN中获取特定文件的路径

> ID：11848496
> 
> 赞同：1
> 
> 时间：2012-08-07T14:46:27.270
> 
> 标签：svn, tortoisesvn, svnkit

有什么有效的方法可以从 SVN 获取文件路径？

我有一个路径说“http://sample.com/repository/pag/branches/dev/”，在**dev**下我们有很多文件夹（子文件夹）和文件。我知道直到**dev**的路径。**现在，我必须在dev**下的某个目录中获取文件的路径。

我尝试了使用 svnkit 的**svn log**命令和**报告。**但两者都需要 20 多分钟。有没有有效的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:49:16.007

此命令将列出您目录下的所有文件，您可以在其中搜索文件：

```
svn ls --depth infinity http://sample.com/repository/pag/branches/dev/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:21:51.387

不幸的是，**没有**有效的方法......我们可以使用 ls 、日志或报告。

这两个链接可能会有所帮助

[自定义SVN深度值](https://stackoverflow.com/questions/11859863/customized-svn-depth-value)

[如何使用java从SVN获取树结构](https://stackoverflow.com/questions/11431172/how-to-get-tree-structure-from-svn-using-java)

# grails - Grails 能否确保在请求中的调用之间重用数据源连接？

> ID：11848501
> 
> 赞同：1
> 
> 时间：2012-08-07T14:46:40.773
> 
> 标签：grails, grails-orm

问题：使用 grails、SQL Server 和 DBA 想要使用触发器来审计用户 DB 活动（我知道审计插件）。他们建议在每次数据库调用之前设置 SQL Server 的 CONTEXT_INFO，在上下文中设置用户名，然后由触发器拉动。我正在考虑的是增加 GORM save 等。像这样的方法：

```
private replaceSave(domainClass) {

        def saveMethod = domainClass.metaClass.pickMethod("save", [Map] as Class[])

        domainClass.metaClass.save = { Map params ->
            def sql = new Sql(dataSource)
            sql.execute("DECLARE @U varbinary(0128);SET @U = CONVERT(varbinary(0128),'the-username');SET CONTEXT_INFO @U;")
            saveMethod.invoke(delegate, [params] as Object[])
            sql.execute("DECLARE @U varbinary(0128);SET @U = CONVERT(varbinary(0128),'');SET CONTEXT_INFO @U;")
        }
} 
```

我不知道这种技术是否会确保 saveMethod 使用的 dataSource 连接与 Sql 对象的连接使用的连接相同。我的理解是 Grails 使用 OpenSessionInView 模式，这似乎意味着重复使用相同的连接，但我只是猜测并且很难为此编写全面的测试。谢谢！

# jquery - onLoad="$('#link_id').trigger('click');" 在 IE 中不起作用

> ID：11848508
> 
> 赞同：2
> 
> 时间：2012-08-07T14:47:21.263
> 
> 标签：jquery

以下代码：

```
onLoad="$('#link_id').trigger('click');" 
```

在 FF 中工作，但在 IE 中不触发。有没有一种在 IE 和 FF 中都适用的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:50:58.830

您是否将其内嵌到 HTML 中，作为某处标记中的事件处理程序？

不要那样做。

在包含 jQuery 库之后，将其放入外部 .js 文件或脚本块中的某个位置，如下所示：

```
$(function() {
       $('#link_id').trigger('click');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:54:36.767

使用 JQuery 你必须像 Fausto 所说的那样做。

但你可以尝试：`document.getElementById('link_id').click()`

# asp.net-mvc-3 - 如何模拟委托操作输入参数

> ID：11848524
> 
> 赞同：1
> 
> 时间：2012-08-07T14:47:59.723
> 
> 标签：asp.net-mvc-3, unit-testing, lambda, moq, anonymous-function

我正在尝试`ICallback#Regsiter<T>(Action<T>)`在下面的（成对的）单元测试示例中安排传递给的 lambda 的输入参数（请参阅单元测试示例中的注释）。我试图避免必须抽象出 lambda，因为它是如此具体和小，但我不确定这是否可能。

```
// IBus interface peek
public interface IBus {
    ICallback Send(IMessage message);
}

// ICallback interface peek
public interface ICallback {
    void Register<T>(Action<T> callback);
}

public enum ReturnCode { Success }

// Controller
public class FooController : AsyncController {
    readonly IBus _bus;
    //...
    // Action being unit tested
    public void BarAsync() {
        _bus
            .Send(ZapMessageFactory.Create())
            .Register<ReturnCode>(x => {
                AsyncManger.Parameters["returnCode"] = x;
            });
    }

    public ActionResult BarCompleted(ReturnCode returnCode) {
        // ...
    }
}

// Controller action unit test
[TestClass]
public class FooControllerTest {
    [TestMethod}
    public void BarTestCanSetAsyncManagerParameterErrorCodeToSuccess() {
        var fooController = ControllerUTFactory.CreateFooController();
        // HOW DO I MOCK THE ACTION DELEGATE PARAMETER TO BE ReturnCode.Success
        // SO I CAN DO THE ASSERT BELOW???
        fooController.BarAsync();
        Assert.AreEqual(ReturnCode.Success, (ReturnCode)fooController.AsyncManager.Parameters["returnCode"]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:30:42.763

使用`Mock<T>#Callback()`是答案：

```
[TestMethod}
public void BarTestCanSetAsyncManagerParameterErrorCodeToSuccess() {
    var mockCallback = new Mock<ICallback>();
    mockCallback
            .Setup(x => x.Register(It.IsAny<ReasonCode>())
            // THIS LINE IS THE ANSWER
            .Callback(action => action(ReasonCode.Success));
    var mockBus = new Mock<IBus>();
    mockBus
            .Setup(x => x.Send(It.IsAny<ZapMessage>())
            .Returns(mockCallback.Object);

    var fooController = new FooController(mockBus.Object);

    fooController.BarAsync();
    Assert.AreEqual(ReturnCode.Success, (ReturnCode)fooController.AsyncManager.Parameters["returnCode"]);
} 
```

# tridion - 隐藏继承的内容/模式

> ID：11848527
> 
> 赞同：3
> 
> 时间：2012-08-07T14:48:11.553
> 
> 标签：tridion

我正在使用我们的 tridion 蓝图层次结构中较低的出版物。从蓝图中更高的出版物继承的一些内容和模式不适合我的出版物，并且永远不会被我的出版物使用。

我将跟进添加这些项目的内部团队并尝试说服他们：

1.  这些项目应在不同的出版物中或
2.  我们的蓝图需要调整。

如果这无济于事，我有什么选择？我可以隐藏我不想要的内容/模式吗？此外，如果蓝图对我要继承的确切内容进行更细粒度的控制，这似乎会有所帮助。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T18:54:26.930

是的，您可以控制可见的内容。由于继承（共享）与发布是分开的，因此通常最好：

*   共享模式、类别定义和可能共享的模板功能（例如 TBB）
*   共享，但通过文件夹权限隐藏组件
*   使用子文件夹限制每个出版物的架构和模板可见性

# **蓝图改变？**

在某些情况下，单独的内容发布（以避免共享）是有意义的：

*   **法律要求。**为了满足法律或审计要求以避免非营利网站上的*商业信息，您可以使用两个出版物或商业**低于*非营利内容的设置。
*   **多租户。**不常见，但如果您有一个使用相同 CMS 但内容不同的多租户场景，您的“客户”会喜欢单独的内容发布。
*   **内部内容。**内联网或其他非常敏感的信息在与全球内容出版物平行或上方放置时“更安全”。

如果这些不适用，最好至少分享内容。您将希望架构在单独的更高版本中。

# 共享结构和定义

即使内容应该在不同的出版物中，共享组件的“结构”或模式定义也是一个好主意。单个架构发布可以包含可嵌入/元数据/常规架构、类别和一些系统级文件夹，而不会影响模板或内容。

# 内容和文件夹

将内容合并到更少的共享内容出版物中实际上是一个好主意。这使作者的生活变得更加轻松，特别是如果您有一个集中的内容创作团队。

即使在不同的组中，您也绝对可以通过执行以下操作“隐藏”子出版物中的不相关文件夹：

*   将较低发布中文件夹的读取权限删除到具有该发布范围的组
*   将[MMC 管理单元设置](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/gen_concept_382BF5DCD4BF401ABDE0B58D28E1B11C) `Hide organizational items if no access to content`为 1（为真）。

# 模式和模板

您还可以通过以下方式限制模式和模板的可见性：

*   将架构放置在具有特定权限的子文件夹中。只有对这些文件夹具有读取权限的用户和组才能在组件表单视图下拉列表中查看和选择架构。
*   对模板执行相同操作将限制谁可以看到哪些模板。在页面上创建组件演示文稿时，模板选择已经受到限制——只有组件架构的关联架构才能在下拉列表中选择。

通过文件夹的组和权限设置解决“我的出版物永远不会使用”的要求。如果是“不应该……”的情况*，*则考虑更改蓝图。

编辑：固定 Intranet 出版物应该去哪里，它平行或*高于*任何全球内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T14:52:29.200

可以使用安全模型来隐藏 BluePrint 子项中的组织项 - 只需删除适当级别的所有组的读取权限。当然，这取决于相关项目不与在该级别应可用的继承项目共享组织项目。

# ubuntu - 服务器宕机时使用nohup？

> ID：11848528
> 
> 赞同：0
> 
> 时间：2012-08-07T14:48:11.383
> 
> 标签：ubuntu, nohup

我正在我的计算机上运行测试（我使用的是 Ubuntu），这最多需要 30-45 分钟。当我正在使用的服务器出现故障时（出于任何原因），我的测试将停止，我必须从乞讨开始重做每个测试。我想知道当服务器出现故障时，使用 nohup 是否仍会保持测试运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:53:27.670

不，抱歉.. nohup 的意思是“不挂断”，基本上如果您退出会话，您 nohup 的过程将继续进行。如果关闭机器，所有活动进程都将丢失。

# wpf - 根据其他模型属性更改触发元素的动画/样式

> ID：11848531
> 
> 赞同：0
> 
> 时间：2012-08-07T14:48:13.667
> 
> 标签：wpf, xaml

我有一个绑定到模型属性的控件模板，比如说 Property1。但是，如果 Property2 更新（无论值如何），我想闪烁 Property1 绑定到的元素的背景。我见过很多例子，其中 DataTrigger 可用于类似的事情，但在这种情况下，我不在乎属性更改为什么值，只是它已更改。

到目前为止，我有这样的事情：

```
<Style x:Key="QuotePriceCellStyle" TargetType="TextBlock">
...
...
    <DataTrigger Binding="{Binding Path=AskPrice, UpdateSourceTrigger=PropertyChanged}" >
        <DataTrigger.EnterActions>
            <BeginStoryboard>
                <Storyboard>
                    <ColorAnimation From="Red" To="Transparent" Duration="0:0:2" Storyboard.TargetProperty="Background.Color" RepeatBehavior="1x"/>
                </Storyboard>
            </BeginStoryboard>
        </DataTrigger.EnterActions>
    </DataTrigger>
</Style>

<ControlTemplate x:Key="QuotePrice" >
    <TextBlock Style="{StaticResource QuotePriceCellStyle}" Text="{Binding QuotePrice}">
</ControlTemplate> 
```

以上显然没有做我需要的。QuotePrice 和 AskPrice 是模型的属性。关于如何让 QuotePrice 单元格在 AskPrice 更改时突出显示的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:34:30.050

您可以像这样为 DataTrigger 使用转换器：

```
public class FlashConverter : IValueConverter
{
    private object oldvalue;
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null) return false;
        if (oldvalue == value) return false;
        else
        {
            oldvalue = value;
            return true;
        }

    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

你的数据触发器将是：

```
<DataTrigger Binding="{Binding Path=AskPrice, Converter={StaticResource FlashConverter1}, UpdateSourceTrigger=PropertyChanged}" Value="True"> 
```

因此，在您的转换器中，您可以决定何时打开背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:10:17.223

我选择使用 DataTrigger 有条件地将两个单元格绑定到两者，并使用 EventTrigger w/ NotifyTargetUpdated 设置为 true 来触发实际闪烁。

# javascript - 使用切片从数组中删除元素

> ID：11848534
> 
> 赞同：22
> 
> 时间：2012-08-07T14:48:19.513
> 
> 标签：javascript

我正在尝试使用 slice 从我的数组中删除一个元素，但我无法让它工作，看看这段代码。

```
 console.log(this.activeEffects); // Prints my array
    console.log(this.activeEffects.slice(0,1)); // Remove from index 0, and remove one.
    console.log(this.activeEffects); // Prints array again, this time my element should be gone 
```

结果就是这样。

![在此处输入图像描述](../Images/1c76db7b94bb6cf02db6b6590655f469.png)

所以从中得到的是，起初数组是完整的，它应该是。然后它打印从数组中切片的内容。最后第三个应该是空的？或者？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2017-12-10T21:40:45.777

```
function removeItemWithSlice(index) {
  return [...items.slice(0, index), ...items.slice(index + 1)]
} 
```

Slice 将创建一个新数组。我们创建了两个数组：从开始到索引和从索引+1 到结束。然后我们应用扩展运算符 (...) 来获取这些数组中的项目，并创建一个新的单个数组，其中包含我们关心的所有项目。如果您不喜欢一个衬里，我将粘贴等效方式：

```
function removeItemWithSlice(index) {
  const firstArr = items.slice(0, index);
  const secondArr = items.slice(index + 1);
  return [...firstArr , ...secondArr]
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-07T14:51:53.467

我相信你正在寻找`splice`. 来自[W3 学校：](http://www.w3schools.com/jsref/jsref_splice.asp)

> splice() 方法在数组中添加/删除项目，并返回删除的项目。

看看那个页面上的例子；那里的用例与您想要实现的相似。

编辑：由 Nicosunshine 建议的[MDN 的替代链接；](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)有关该命令的更多信息。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-04-19T14:59:51.373

```
a.slice(0, index).concat(a.slice(index + 1)) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-07T14:50:43.790

`.slice`不会改变数组，您可以使用`.splice()`删除`i`数组中索引处的项目：

```
this.activeEffects.splice(i, 1) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-17T22:08:37.657

这是我能够想出的：

```
var newArray = oldArray.slice(indexOfElementToRemove+1).concat(oldArray.slice(0,indexOfElementToRemove)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-07T14:54:07.657

`Array.prototype.[slice()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)`...

> 不会改变原始数组，而是返回一个新的“一层深”副本，其中包含从原始数组切片的元素的副本。原始数组的元素被复制到新数组中，如下所示：

而...`Array.prototype.[splice()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)`

> 更改数组的内容，在删除旧元素的同时添加新元素。

这个例子应该说明差异。

```
// sample array
var list = ["a","b","c","d"];
// slice returns a new array
console.log("copied items: %o", list.slice(2));
// but leaves list itself unchanged
console.log("list: %o", list);
// splice modifies the array and returns a list of the removed items
console.log("removed items: %o", list.splice(2));
// list has changed
console.log("list: %o", list);
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-07T14:54:08.643

看这里： [http ://www.w3schools.com/jsref/jsref_slice_array.asp](http://www.w3schools.com/jsref/jsref_slice_array.asp)

你可以看到切片方法选择对象然后把它们扔到一个新的数组对象中^^所以你不能像这样删除一个对象，也许你可以尝试这样的事情：

```
var a = ["a","b","c"]; (pseudo code)
/* I wan't to remove the "b" object */

var result = a.slice(0,1)+a.slice(2,1); /* If you considers that "+" is a concatenation operator, i don't remember if it is true... */ 
```

# asp.net-mvc - DevExpress MVC GridView - 如何获取单元格点击事件

> ID：11848543
> 
> 赞同：9
> 
> 时间：2012-08-07T14:48:59.887
> 
> 标签：asp.net-mvc, devexpress

使用 DevExpress 的 GridView，我想在选择（或简单地单击）单元格时触发（客户端）事件。

已经有一种方法可以获取整行的点击事件，但是无论是摆弄还是文档都没有给我任何线索如何为单元格实现这一点。

这就是我的行：

```
Html.DevExpress().GridView(settings =>
{
    // removed a lot of code here
    settings.ClientSideEvents.RowDblClick = "OnGridRowDblClick";
}).Bind(Model).GetHtml() 
```

`OnGridRowDblClick`当双击一行时，这将导致调用 javascript 函数。理想情况下应该有类似的东西

`settings.ClientSideEvents.CellClick = "OnCellClick";`

但是，这不存在，我也找不到任何东西来实现这一点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T16:26:50.783

通过处理**GridViewSettings.HtmlDataCellPrepared**事件，可以为单个 DataCell 附加所需的客户端处理程序：

```
function OnCellClick(visibleIndex, fieldName) {
    alert(visibleIndex + " " + fieldName);
}

@Html.DevExpress().GridView(settings => {
    ...
    settings.HtmlDataCellPrepared = (sender, e) => {
        e.Cell.Attributes.Add(
            "onclick",
            string.Format("OnCellClick('{0}', '{1}');", e.VisibleIndex, e.DataColumn.FieldName)
        );
    };

}).Bind(Model).GetHtml() 
```

# mysql - 按频率和日期范围对关键字进行排名

> ID：11848546
> 
> 赞同：1
> 
> 时间：2012-08-07T14:49:03.477
> 
> 标签：mysql, database, optimization, innodb, ranking

目前，我在 data_article_key_terms 表中有大约 900,000 个条目，用于将关键术语与其各自的文章相关联。目标是能够选择任意日期范围并根据该日期范围内的文章显示前 15 个关键术语。

我遇到的问题是我正在运行的查询需要将近 6 秒，但我需要它比这更快。我意识到这是相对于我正在运行的系统而言的，我可以使用功能更强大的机器，但在我走这条路之前，我正在尽我所能优化它。

我使用 InnoDB 作为 MySQL 存储引擎来保持数据完整性。据我了解，MyISAM 使用 count(*) 会更快，但也不能选择使用该引擎。

我还考虑过将关键术语计数存储在基于固定时间范围的表中，但这最终需要存储和跟踪大量数据。

有没有人对如何优化这种体验有好的建议？

我有以下表格：

此表存储文章信息：

```
CREATE TABLE `data_article` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `connection_id` int(11) NOT NULL,
  `folder_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `uid` varchar(100) NOT NULL,
  `date` date NOT NULL,
  `influencer_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `data_article_5930b15a` (`connection_id`),
  KEY `data_article_4e5f642` (`folder_id`),
  KEY `data_article_fbfc09f1` (`user_id`),
  KEY `data_article_43ae76a1` (`influencer_id`),
  KEY `data_article_date` (`date`),
  CONSTRAINT `connection_id_refs_id_b2ae9152` FOREIGN KEY (`connection_id`) REFERENCES `account_connection` (`id`),
  CONSTRAINT `folder_id_refs_id_e343586a` FOREIGN KEY (`folder_id`) REFERENCES `account_folder` (`id`),
  CONSTRAINT `influencer_id_refs_id_45cd3615` FOREIGN KEY (`influencer_id`) REFERENCES `data_influencer` (`id`),
  CONSTRAINT `user_id_refs_id_aca13cc9` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`)
) 
```

此表存储关键术语：

```
CREATE TABLE `data_keyterm` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `term` varchar(100) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `data_keyterm_term` (`term`)
) 
```

此表存储文章和关键术语之间的关系：

```
CREATE TABLE `data_article_key_terms` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `article_id` int(11) NOT NULL,
  `keyterm_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `article_id` (`article_id`,`keyterm_id`),
  KEY `data_article_key_terms_30525a19` (`article_id`),
  KEY `data_article_key_terms_1d848ca4` (`keyterm_id`),
  CONSTRAINT `article_id_refs_id_d87be8f5` FOREIGN KEY (`article_id`) REFERENCES `data_article` (`id`),
  CONSTRAINT `keyterm_id_refs_id_50d233f8` FOREIGN KEY (`keyterm_id`) REFERENCES `data_keyterm` (`id`)
) 
```

此表存储与文章关联的影响者：

```
CREATE TABLE `data_influencer` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  `title` varchar(100) NOT NULL,
  `email` varchar(100) NOT NULL,
  `active` tinyint(1) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `data_influencer_fbfc09f1` (`user_id`),
  KEY `data_influencer_name` (`name`),
  CONSTRAINT `user_id_refs_id_b1bb5d4f` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`)
) 
```

这是我用来根据时间范围提取关键字、对它们进行分组并按频率排序的 SQL 语句：

```
SELECT dk.id, dk.term as term, COUNT(dk.id) as count
FROM data_keyterm dk
INNER JOIN data_article_key_terms dakt ON dakt.keyterm_id = dk.id
INNER JOIN data_article da ON da.id = dakt.article_id
INNER JOIN data_influencer di ON di.id = da.influencer_id
WHERE da.user_id = 1
AND da.date between '2010-08-07' AND '2012-08-07'
AND di.active = True
GROUP BY dk.id
ORDER BY count DESC
LIMIT 15; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:58:38.303

使用具有 900,000 条记录和 3 个内部联接的表运行内部联接将需要一些时间来执行。我认为您应该尝试一些外部搜索引擎，例如太阳能，以快速获得结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:06:12.593

我想知道在这种情况下，索引是否对您没有帮助。查询的选择性是什么？也就是说，使用了多少条文章/组合键？

为了优化性能，我认为查询计划应该是按用户 ID 和日期选择文章，然后进行连接。然后将这个简化的子集用于其他连接。相反，我怀疑它自始至终都在使用索引。

我的第一个建议是用单个索引替换文章表上用户 ID/日期的两个索引。WHERE 子句可以使用这个单一的索引来满足条件。这可以简化和改进查询计划。

Another thing to test is denormalizing the article/key table a bit. Assuming that the keys and article are created at the same time, add the user id and date to this table. Then, simply rephrase your query as restrictions on this table. You can then have a composite index on user id and date. However, I don't suggest having separate indexes on these fields.

# asp.net - ASP.NET - 找不到存储过程

> ID：11848550
> 
> 赞同：0
> 
> 时间：2012-08-07T14:49:20.163
> 
> 标签：asp.net, vb.net, sql-server-2008, stored-procedures

我一直在搜索互联网的深处，我发现的所有解决方案都没有解决这个问题。

我正在使用 Visual Web Developer 2010 Express 和 SQL Server 2008，使用 VB。

我正在尝试执行一个存储过程以将一些来自文本框控件的数据插入到数据库中，如果 id 不存在，它会插入文本框中给出的 id 和当前日期（time_scanned_in），如果 id 已经存在，它将在`[time_scanned_out]`列中插入当前日期时间，如果数据库中的所有3个字段都已满，它将返回`@message = 1`。

这是sql存储过程：

```
ALTER PROCEDURE dbo.InsertDateTime
@barcode_id nchar(20),
@message char(1) = 0 Output
AS
BEGIN
    if not exists(select * from tblWork where barcode_id = @barcode_id)
    begin
        INSERT INTO [tblWork] ([barcode_id], [time_scanned]) VALUES (@barcode_id, GetDate())
    end
    else if exists(select * from tblWork where barcode_id = @barcode_id AND time_scanned_out IS NOT NULL )
    begin
        SET @message=1
    end
    else if exists(select * from tblWork where barcode_id = @barcode_id AND time_scanned_out IS NULL)
    begin
        UPDATE [tblWork] SET [time_scanned_out] = GetDate() WHERE [barcode_id] = @barcode_id
    end
RETURN @message
end 
```

如果我执行此操作（通过右键单击 SP），它会完美运行并在所有字段都已填写时返回值。

但是通过vb代码执行时，找不到这样的程序，给出标题中的错误。

这是vb代码：

```
Dim opconn As String = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True"

Dim sqlConnection1 As New SqlConnection(opconn)
Dim cmd As New SqlCommand
Dim returnValue As Object

cmd.CommandText = "InsertDateTime"
cmd.CommandType = CommandType.StoredProcedure
cmd.Connection = sqlConnection1

sqlConnection1.Open()
With cmd.Parameters.Add(New SqlParameter("@barcode_id", TextBox.Text))
End With
With cmd.Parameters.Add(New SqlParameter("@message", SqlDbType.Char, 1, Label3.Text))
End With

returnValue = cmd.ExecuteScalar()
sqlConnection1.Close() 
```

请注意，我还没有完成返回部分的代码，一旦我得到它来定位 SP 就会这样做。

尝试在 gridview 中列出每个数据库的 sys.objects.name 的所有对象，它列出了除我想要的存储过程之外的所有内容。

这是为什么，有什么想法吗？将不胜感激，花了几个小时试图找到一个解决方案。如果有人需要更多代码或信息，请随时询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:27:56.287

首先尝试 cmd.parameters.clear() 然后开始在 cmd 对象中添加参数。也可以代替 cmd.executescaler()，尝试 cmd.executenonquery 或 cmd.executeReader()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:34:34.810

试试这个

```
 cmd.Parameters.AddWithValue("@barcode_id",  TextBox.Text)
 SqlParameter prmOut = cmd.Parameters.Add("@message",SqlDbType.Char, 1)
 prmOut.Value = Label3.Text
 prmOut.Direction = ParameterDirection.InputOutput

 cmd.ExecuteNonQuery()

 returnValue = prmOut.Value.ToString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:04:25.453

用一个全新的数据库重新创建了整个项目，复制了所有相同的代码，现在一切都完美无缺！仍然不知道出了什么问题，但是谢谢大家，你们都很及时而且知识渊博。

这是任何有兴趣的人的最终 VB 代码：

```
Dim myConnection As New SqlConnection(opconn)
Dim cmd As New SqlCommand()
Dim myReader As SqlDataReader

cmd.CommandType = CommandType.StoredProcedure
cmd.Connection = myConnection
cmd.CommandText = "InsertTimes"

cmd.Parameters.AddWithValue("@message", OleDbType.Integer)
cmd.Parameters.AddWithValue("@barcode_id", TextBox.Text)
cmd.Parameters("@message").Direction = ParameterDirection.Output

Try
    myConnection.Open()
    myReader = cmd.ExecuteReader()

    Dim returnMessage As String = cmd.Parameters("@message").Value
    If returnMessage = 1 Then
        label_confirmation.Text = "Record successfully submitted!"
        TextBox.Text = ""
    ElseIf returnMessage = 2 Then
        label_confirmation.Text = "A finish time already exists for the record '" & TextBox.Text & "', would you like to override the finish time anyway?"
        button_yes.Visible = True
        button_no.Visible = True
    ElseIf returnMessage = 3 Then
        label_confirmation.Text = "Record submitted, work operation status complete!"
        TextBox.Text = ""
    End If

Catch ex As Exception
    label_confirmation.Text = ex.ToString()
Finally
    myConnection.Close()
End Try 
```

# user-interface - 编译器编程语言理论、计算机可用计算和 I/O 部分

> ID：11848553
> 
> 赞同：0
> 
> 时间：2012-08-07T14:49:35.953
> 
> 标签：user-interface, io, computation, windowing, peripherals

我从一个关于 cmd 和扩展的小理论开始。首先是它包括编译到目标文件，链接和编译到exe。这些语言主要由运算符、关键字和指令组成，这些指令通过指令、关键字和函数库汇编器编译成机器代码。还有什么作用？

除了 cmd、标准 I/O 和窗口化（带有图形模式）之外，正常界面包括最小化、退出和最大化/恢复向下以及带有已启动程序的面板。可能有文本输入（密码）、单选、复选框和按钮（用于菜单）。GUI 中还有什么？

Cmd 还包括命令行参数。以前还能叫什么？

库中计算机可用的部分是硬盘CPU GPU、显卡内存和处理器。从外围设备来看，正常的输入部分是鼠标键盘 cd/dvd-rom usb 和网卡。可能有摄像机和麦克风。输出是显示器和扬声器、cd dvd usb 和网卡。两者都是运动/振动监测。（不正常） 还有什么正常安装？

# sql - 如何比较 Oracle SqlDeveloper 上的时间戳间隔？

> ID：11848554
> 
> 赞同：0
> 
> 时间：2012-08-07T14:49:35.553
> 
> 标签：sql, oracle-sqldeveloper

我的表中有两列类型`timestamp(6)`。

我想查找表中这两个时间戳之间的时间大于 300 天的所有行。如何编写`WHERE`我的 SQL 语句的子句？

我想写这样的东西：

```
SELECT *
FROM   TABLE
WHERE  timestamp1 - timestamp2 > 300 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:58:46.270

听起来你想要

```
WHERE (column1 - column2) > numtodsinterval( 300, 'day' ) 
```

# soap - SOAP-ERROR：解析 WSDL：无法从 mantisconnect 加载

> ID：11848556
> 
> 赞同：0
> 
> 时间：2012-08-07T14:49:42.100
> 
> 标签：soap, mantis

最近我正在尝试集成我们现在使用的两个系统。我们有一个使用 Helpspot (http://www.helpspot.com/) 的客户反馈网站，另一个是 Bug 跟踪器 Mantis 服务器。我们希望一些客户反馈可以添加到螳螂。由于mantis有一个WSDL mantisconnect，所以我用nusoap写了一些代码来和mantis wsdl交互。它工作得很好..我可以更新问题或做其他事情。

但是当我将相同的代码上传到 Helpspot 服务器时，它停止工作......

我收到了这个错误消息：

> 致命错误：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://Mymantis/api/soap/mantisconnect.php?WSDL' : Extra content at the end of the document in / www/eh17275/public_html/custom_code/RequestPush-MantisBT.php:36 堆栈跟踪：#0 /www/eh17275/public_html/custom_code/RequestPush-MantisBT.php(36): SoapClient->SoapClient('http://testmant. ..') #1 /www/eh17275/public_html/custom_code/RequestPush-MantisBT.php(75): RequestPush_MantisBT->push('test') #2 {main} 抛出 /www/eh17275/public_html/custom_code/RequestPush -MantisBT.php 在第 36 行

我的代码中的第 36 行是 =>`$client=new soapclient('http://Mymantis/api/soap/mantisconnect.php?WSDL');`

我用谷歌搜索了一整天，大多数人遇到这个错误通常是因为他们编写了自己的 SOAP 服务器，但在我的例子中，我只是编写了一个客户端并且代码有效。

我的螳螂服务器上的 WSDL 已启动。我可以看到这个页面`http : / /mymantis/api/soap/mantisconnect.php`，我什至希望我的朋友在家里检查这个页面，他们可以看到它。所以我认为可以消除互联网服务设置的因素。

有没有人对此有任何想法？

感谢阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:07:50.727

也许您只是尝试使用错误的 URL？
您测试的 URL 是，`http://Mymantis/api/soap/mantisconnect.php?WSDL`但 IMO 它应该以`?wsdl`.

我使用在线[演示站点](http://www.mantisbt.org/demo/)进行了测试：

1.  [http://www.mantisbt.org/demo/api/soap/mantisconnect.php?WSDL](http://www.mantisbt.org/demo/api/soap/mantisconnect.php?WSDL)什么都不做
2.  [http://www.mantisbt.org/demo/api/soap/mantisconnect.php?wsdl](http://www.mantisbt.org/demo/api/soap/mantisconnect.php?wsdl)工作并呈现等待的 WSDL 文档

# c# - 哈希集 .RemoveWhere() 和 GetHashCode()

> ID：11848558
> 
> 赞同：5
> 
> 时间：2012-08-07T14:49:44.227
> 
> 标签：c#

阿罗哈，

这是一个覆盖 GetHashCode 的简单类：

```
class OverridesGetHashCode
{
    public string Text { get; set; }

    public override int GetHashCode()
    {
        return (Text != null ? Text.GetHashCode() : 0);
    }
    // overriding Equals() doesn't change anything, so I'll leave it out for brevity
} 
```

当我创建该类的实例时，将其添加到 HashSet，然后更改其 Text 属性，如下所示：

```
var hashset = new HashSet<OverridesGetHashCode>();
var oghc = new OverridesGetHashCode { Text = "1" };
hashset.Add(oghc);
oghc.Text = "2"; 
```

那么这不起作用：

```
var removedCount = hashset.RemoveWhere(c => ReferenceEquals(c, oghc));
// fails, nothing is removed
Assert.IsTrue(removedCount == 1); 
```

这也不是：

```
// this line works, i.e. it does find a single item matching the predicate
var existing = hashset.Single(c => ReferenceEquals(c, oghc));
// but this fails; nothing is removed again
var removed = hashset.Remove(existing);
Assert.IsTrue(removed); 
```

我猜它内部使用的哈希是在插入项目时生成的，如果这是真的，那么 hashset.Contains(oghc) 不起作用是可以理解的。我也猜想它通过它的哈希码查找项目，如果找到匹配项，那么它才会检查谓词，这可能是第一次测试失败的原因（再次，我只是在这里猜测）。但是为什么最后一个测试失败了，我刚刚从哈希集中得到了那个对象？我是否遗漏了什么，这是从 HashSet 中删除某些内容的错误方法吗？

感谢您抽出时间来阅读。

更新：为避免混淆，这里是 Equals()：

```
protected bool Equals(OverridesGetHashCode other)
    {
        return string.Equals(Text, other.Text);
    }

public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != this.GetType()) return false;
        return Equals((OverridesGetHashCode) obj);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:52:25.107

在 a 中使用该对象时更改该对象的哈希码`HashSet`违反了`HashSet`的合同。

无法移除对象不是这里的问题。**首先不允许您更改哈希码。**

让我引用[MSDN](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)：

> 只要确定对象的 Equals 方法的返回值的对象状态没有修改，对象的 GetHashCode 方法就必须**始终返回相同的哈希码。**请注意，这仅适用于应用程序的当前执行，并且如果再次运行应用程序，则可以返回不同的哈希码。

他们讲述的故事略有不同，但本质是相同的。他们说，哈希码*永远不会*改变。实际上，只要确保没有人再使用旧的哈希码，就可以更改它。并不是说这是一个好的做法，但它确实有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T14:54:01.187

重要的是，添加到基于散列的表（ 、 等）中的任何项目`HashSet`在`Dictionary`插入结构后都不会被修改（至少在它们被删除之前不会被修改）。

为了在数据结构中找到一个对象，它计算它的哈希码，然后根据该哈希码找到一个位置。如果你改变了那个对象，那么它返回的哈希码不再反映它在那个数据结构中的当前位置（除非你非常非常幸运并且它恰好是一个哈希冲突）。

在[字典的 MSDN 页面](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)上说：

> 只要一个对象被用作 中的键`Dictionary<TKey, TValue>`，它就不能以任何影响其哈希值的方式发生变化。

同样的断言也适用`HashSet`，因为它们都是使用哈希表实现的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T15:01:12.630

这里有很好的答案，只是想添加这个。如果您查看反编译的`HashSet<T>`代码，您会看到它`Add(value)`执行以下操作：

1.  调用[`IEqualityComparer<T>.GetHashCode()`](http://msdn.microsoft.com/en-us/library/ms132155.aspx)以获取值的哈希码。对于默认比较器，这归结为`GetHashCode()`.
2.  使用该哈希码来计算（引用）值应存储在哪个“桶”和“槽”中。
3.  存储参考。

当您调用`Remove(value)`它时，它会再次执行步骤 1\. 和 2.，以查找引用的位置。然后它调用[`IEqualityComparer<T>.Equals()`](http://msdn.microsoft.com/en-us/library/ms132154.aspx)以确保它确实找到了正确的值。但是，由于您更改了`GetHashCode()`返回的内容，它会计算不同的存储桶/插槽位置，这是无效的。因此，它找不到对象。

所以，请注意`Equals()`这里并没有真正发挥作用，因为如果哈希码发生变化，它甚至永远不会到达正确的存储桶/插槽位置。

# oracle - PLSQL：可以在 SQLPLUS 中使用 BOOLEAN 数据类型吗？

> ID：11848559
> 
> 赞同：3
> 
> 时间：2012-08-07T14:49:44.677
> 
> 标签：oracle, plsql, oracle11g, sqlplus

> **可能重复：**
> [如何在 SELECT 语句中使用 BOOLEAN 类型](https://stackoverflow.com/questions/1465405/how-to-use-boolean-type-in-select-statement)

我尝试在我编写的返回 BOOLEAN 数据类型的函数上运行 SQLPLUS。有没有办法从 SQLPLUS 运行这些 BOOLEAN 函数？似乎根本无法从 SQLPLUS 访问 BOOLEAN 数据类型。

编辑：我应该提到我只使用 SQLPLUS 绑定变量，而不是标准的 DECLARE...PLSQL 变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:56:25.150

数据类型在 PL/SQL 中定义，`BOOLEAN`而不是 SQL。如果您正在编写 PL/SQL，您可以愉快地使用`BOOLEAN`SQL*Plus 或任何其他工具中的类型。

```
DECLARE
  l_some_bool BOOLEAN := true;
BEGIN
  IF( l_some_bool )
  THEN
    dbms_output.put_line( 'true' );
  END IF;
END; 
```

但是，如果您正在编写 SQL，则无论您使用哪种工具，都不能使用`BOOLEAN`类型，因为 SQL 语言无法识别类型。例如，返回 a 的函数`BOOLEAN`不能在 SQL 语句中调用。

# php - 我正在尝试通过 php 运行 mssql 存储视图但出现错误，存储过程工作正常但视图失败

> ID：11848560
> 
> 赞同：-1
> 
> 时间：2012-08-07T14:49:46.387
> 
> 标签：php, sql-server

我有以下视图运行到外部 mssql 数据库。我正在使用输入参数连接到相同的数据库以获得一些完整的存储过程，这些工作正常，但视图不起作用并给出错误

```
Warning: mssql_execute() [function.mssql-execute]: message: The request for procedure 'usv_Extended_Confirmation' failed because 'usv_Extended_Confirmation' is a view object. (severity 18) in 

Warning: mssql_execute() [function.mssql-execute]: General SQL Server error: Check messages from the SQL Server (severity 18) in 

Warning: mssql_execute() [function.mssql-execute]: stored procedure execution failed in

Warning: mssql_fetch_assoc() expects parameter 1 to be resource, boolean given in 
```

调用视图的脚本如下

```
//run msdb connected view procedure
function runView($procedure){
    global $msdb;

    //initiate function
    $proc = mssql_init('usv_Extended_Confirmation', $msdb); 

    //Execute Procedure 
    $result = mssql_execute($proc); 

    while ($row = mssql_fetch_assoc($result)){
        $results[] = $row;    
        }
    $return = $results;

    //Free Memory 
    mssql_free_statement($proc); 

    return $return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:51:25.117

您不执行视图。视图就像表或查询——你`Select`来自它。

```
$query = mssql_query('SELECT * FROM usv_Extended_Confirmation');
while ($row = mssql_fetch_assoc($query)) {
    .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:52:19.147

因为它是一个 VIEW 你不应该从 SELECT 语句中调用它

```
SELECT * FROM usv_Extended_Confirmation 
```

# ruby-on-rails - 'shared/error_messages' 部分不应该呈现

> ID：11848564
> 
> 赞同：0
> 
> 时间：2012-08-07T14:50:00.440
> 
> 标签：ruby-on-rails

我无法弄清楚为什么我的“shared/error_messages”部分没有在应该呈现的时候呈现（即当通过此表单提交无效的“处理”时）：

_treating_form.html.erb：

```
<%= form_for(@treating) do |f| %>  
    <%= render 'shared/error_messages', object: f.object %>
    <div><%= f.hidden_field :requestee_id %></div>  
    <div>
        <%= f.text_field :proposed_location, placeholder: "Propose a location here..." %>
    </div>    
    <div>
        <%= f.text_field :proposed_date, placeholder: "Propose a date here..." %>
    </div>
    <div class="field">
        <%= f.text_area :intro, placeholder: "Write your introduction here..." %>
    </div>
    <%= f.submit "Send", class: "btn btn-large btn-primary" %>
<% end %> 
```

这个 _treating_form.html.erb 部分在 users/show.html.erb 视图中调用：

```
<% provide(:title, @user.name) %>
<div class="row">
    <aside class="span4">
        <section>
            <h1>
                <%= @user.name %>
            </h1>
        </section>
        <% if signed_in? %>
            <section>
                    <%= render 'shared/treating_form' unless current_user?(@user) %>
            </section>
        <% end %>
    </aside>
</div> 
```

这是我的 error_messages 部分：

```
<% if object.errors.any? %>
    <div id="error_explanation">
        <div class="alert alert-error">
            The form contains <%= pluralize(object.errors.count, "error") %>.
        </div>
        <ul>
            <% object.errors.full_messages.each do |msg| %>
                <li>* <%= msg %></li>
            <% end %>
        </ul>
    </div>
<% end %> 
```

在提交到用户“编辑设置”页面时触发验证错误时，error_messages 部分正确呈现：

```
<% provide(:title, "Edit user") %>
<h1>Update your profile</h1>
<div class="row">
    <div class="span6 offset3">
    <%= form_for(@user) do |f| %>
        <%= render 'shared/error_messages', object: f.object %>
        <%= f.label :name %>
        <%= f.text_field :name %>
        <%= f.label :email %>
        <%= f.text_field :email %>
        <%= f.label :password %>
        <%= f.password_field :password %>
        <%= f.label :password_confirmation, "Confirm Password" %>
        <%= f.password_field :password_confirmation %>
        <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
        <% end %>       
    </div>
</div> 
```

任何想法为什么在提交无效的“处理”时没有显示错误？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:55:52.213

每当您向部分添加任何选项时，您都需要明确指定 :partial =>

```
= render partial: 'shared/error_messages', object: f.object 
```

# php - PHP：网址参数

> ID：11848565
> 
> 赞同：1
> 
> 时间：2012-08-07T14:50:02.217
> 
> 标签：php, redirect, get, string-formatting

我有一个关于在 php 中格式化 URL 参数的问题

第 1 页可以有这 2 个 url

```
http://somewhere.com/page1.php?foo=1
and
http://somewhere.com/page1.php 
```

现在在第 1 页，当我单击一个按钮时，我希望它重定向到它自己，但在 URL 中添加一个额外的参数，如下所示

```
http://somewhere.com/page1.php?foo=1&bar=2
or
http://somewhere.com/page1.php?bar=2 
```

取决于当前的网址。我怎么能在php中做到这一点？

谢谢， 维杜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:55:07.047

首先，检查是否设置了某个`$_GET`参数，使用`isset`.
如果是，`echo`某个链接。如果不是，`echo`请使用其他链接。

```
if( !isset($_GET['bar']) ){
    echo '<a href="?bar=2">link</a>';
}
else{
    echo '<a href="page1.php">link</a>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:59:04.673

你可以做一个简单的获取系统，所以你需要检查是否`?foo=1`设置了你可以回显它的内容。如果要显示内容以`bar=2`检查其是否设置并回显其内容。这只是一种简单的方法，但还有更多方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:55:49.483

我正在使用这些 PHP 函数来帮助我正确构建 url：

*   `parse_str()`
*   `parse_url()`
*   `http_build_query()`
*   `http-build-url()`

例子：

```
<?php

function add_parameters($parameters) {
    parse_str($_SERVER['QUERY_STRING'], $old_parameters_as_array);
    return $_SERVER['PHP_SELF'].'?'.http_build_query(array_merge($old_parameters_as_array, $parameters));
}

echo '<a href="'.add_parameters(array('bar' => 2)).'">Link</a>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T14:55:03.323

以下表单将提交到添加了参数的相同 url。

```
<form action="<?php echo "http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; ?>" method="get">
    <?php
        // Iterate through our query string and add each key value pair as a hidden input
        foreach ($_GET as $key => $value)
        {
            ?>
                <input type="hidden" name="<?php echo $key; ?>" value="<?php echo $value; ?>"/>
            <?php
        }
    ?>

    <!-- new parameter to add -->
    <input type="hidden" name="foo" value="1"/>
    <input type="submit"/>
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T15:07:35.587

只需您可以使用`$_SERVER['PHP_SELF']`

例如

```
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="get">
    <input type="hidden" name="foo" value="1"/>
    <input type="submit"/>
</form> 
```

此处[htmlentities()](http://us2.php.net/manual/en/function.htmlentities.php)用于避免 PHP_SELF 被利用作为安全预防措施

~~如果您希望避免隐藏输入字段，您可以附加查询参数，例如`action="<?php echo $_SERVER['PHP_SELF']; ?>?foo=1&bar=2"`~~

# .net - 由于对象的当前状态，操作无效 - HASP HL dongle

> ID：11848568
> 
> 赞同：1
> 
> 时间：2012-08-07T14:50:15.613
> 
> 标签：.net, usb, delphi-prism, dongle, hasp

我正在尝试为 HASP HL 添加对我的 Delphi Prism 项目的引用。因此，我可以与 USB HASP HL 加密狗进行通信。

初始设置后，我的程序无法与 USB HASP HL 加密狗进行通信。因此，我观看了 SafeNet 或 Alladdin 的 youtube 教程视频，并完全按照他们的指示进行操作，但我遇到了另一个问题，我似乎无法弄清楚。

作为 HASP HL 加密狗设置的一部分，我应该将**hasp_net_demo.dll**的引用添加到我的项目中。每次我尝试这样做时，我都会不断收到此错误，**由于对象的当前状态，操作无效**，它不会让我添加引用。我了解到除了**hasp_net_window.dll**引用，您还需要添加对**hasp_net_demo.dll**的引用，因为它具有与 HASP HL 加密狗通信的实际名称空间和类。

那么，此时我能做些什么呢？或者我有什么选择？

请帮忙。在过去的 3 个月里，我一直在断断续续地研究这个问题，但仍然找不到解决方案。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:57:46.173

我能够解决我的问题。首先，您需要确保您正在为框架 4.0 编写应用程序。如果是，那么您需要下载他们最新的 Runtime API for .NET dll 文件。

Sentinel HASP DotNET 运行时 API

```
apidsp_windows.dll
apidsp_windowsx64.dll
hasp_net_windows.dll
hasp_windows_xxxxx.dll 
```

将它们全部放在您的项目文件夹中。然后，将 hasp_net_windows.dll 文件的引用添加到您的项目文件中。

然后，你就完成了。

# c# - 在 WCF 客户端中查找流对象的长度？

> ID：11848570
> 
> 赞同：3
> 
> 时间：2012-08-07T14:50:19.940
> 
> 标签：c#, .net, wcf, stream

我有一个 WCF 服务，它使用`Stream`类上传文档。

现在，在此之后，我想获取文档的大小（流的长度），以更新 FileSize 的 fileAttribute。

但是这样做，WCF 会抛出一个异常说

```
Document Upload Exception: System.NotSupportedException: Specified method is not supported.
   at System.ServiceModel.Dispatcher.StreamFormatter.MessageBodyStream.get_Length()
   at eDMRMService.DocumentHandling.UploadDocument(UploadDocumentRequest request) 
```

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T15:10:53.463

> 现在，在此之后，我想获取文档的大小（流的长度），以更新 FileSize 的 fileAttribute。

不，不要那样做。如果您正在编写文件，则只需*编写文件*。最简单的：

```
using(var file = File.Create(path)) {
    source.CopyTo(file);
} 
```

或 4.0 之前：

```
using(var file = File.Create(path)) {
    byte[] buffer = new byte[8192];
    int read;
    while((read = source.Read(buffer, 0, buffer.Length)) > 0) {
        file.Write(buffer, 0, read);
    }
} 
```

（不需要提前知道长度）

请注意，某些 WCF 选项（完整的消息安全性等）需要在处理之前验证整个消息，因此永远无法*真正*进行流式传输，因此：如果大小很大，我建议您改用 API，客户端将其拆分并发送它分段（然后您在服务器上重新组装）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:52:50.760

如果流不支持查找，则无法使用`Stream.Length`

另一种方法是将流复制到一个字节数组并找到它的累积长度。这涉及到首先处理整个流，如果你不想要这个，你应该在你的 WCF 服务接口中添加一个流长度参数

# objective-c - 有没有办法知道弹出框是从哪里出现的？

> ID：11848577
> 
> 赞同：2
> 
> 时间：2012-08-07T14:50:40.617
> 
> 标签：objective-c, ios, popover

我正在编写一个 iPad 应用程序，我的一个屏幕上有很多小按钮，按下时会在源自该按钮的弹出窗口中显示一个文本句子。目前所有弹出框都是使用情节提要创建的，我将弹出框控制器存储在我`UIViewController`的如下：

```
@property (nonatomic, strong) UIPopoverController *myPopoverController;

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue isKindOfClass:[UIStoryboardPopoverSegue class]]) 
    {
        UIStoryboardPopoverSegue *popoverSegue = (UIStoryboardPopoverSegue *)segue;
        self.myPopoverController = popoverSegue.popoverController;
    }
} 
```

但是，我想不出一个处理旋转的好方法。对，我的`didRotate`方法如下所示：

```
- (void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    if (self.myPopoverController) 
    {
        [self.myPopoverController dismissPopoverAnimated: NO];
        [self.myPopoverController presentPopoverFromRect:??????  inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:NO];
    }
} 
```

但是，我不知道从哪里显示弹出框，因为它们可能来自我屏幕上的任何小按钮。有什么建议么？请记住，这些是非常简单的弹出框，因此一大堆新代码并不理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:06:29.887

您最好的选择可能是在主视图控制器中创建另一个属性，以保持对按下按钮的引用。就像是：

```
@property (nonatomic, strong) UIPopoverController *myPopoverController;
@property (nonatomic, weak) UIView *popoverButton;

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue isKindOfClass:[UIStoryboardPopoverSegue class]]) 
    {
        UIStoryboardPopoverSegue *popoverSegue = (UIStoryboardPopoverSegue *)segue;
        self.myPopoverController = popoverSegue.popoverController;

        //The sender in prepareForSegue should be the view used to initiate the segue.
        popoverButton = (UIView *)sender;
    }
} 
```

完成后，您可以修改轮换代码：

```
- (void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    if (self.myPopoverController) 
    {
        [self.myPopoverController dismissPopoverAnimated: NO];
        [self.myPopoverController presentPopoverFromRect:popoverButton.frame  inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:NO];
    }
} 
```

保持对按下按钮的引用不会占用存储指针的更多资源，并且保持引用弱应该避免保留周期（毕竟，您的视图控制器不拥有按钮，按钮的超级视图拥有它）。

# python - 熊猫弄乱了数据框

> ID：11848578
> 
> 赞同：1
> 
> 时间：2012-08-07T14:50:42.930
> 
> 标签：python, numpy, pandas

我正在 Pandas 中创建一个数据框——</p>

```
df_data = dict()

for x in data:
    series = pandas.Series(x['value']['values'], index=x['value']['timestamps'])

    df_data[x['_id']] = series

df = pandas.DataFrame(df_data) 
```

`data`是格式中的 dicts 列表—</p>

```
{u'_id': u'770000000049',
 u'value': {u'timestamps': [datetime.datetime(2012, 7, 25, 10, 16, 1, 270000),
                            datetime.datetime(2012, 7, 25, 10, 18, 29, 745000),
                            datetime.datetime(2012, 7, 25, 10, 21, 54, 931000),
                            datetime.datetime(2012, 7, 25, 10, 23, 18, 896000)],
            u'values': [204.0, 16.788, 139.2, 116.004]}} 
```

打印一个示例系列给了我——</p>

```
>>> print df_data['770000000049']

>>> 2012-07-25 10:16:01.270000    204.000
2012-07-25 10:18:29.745000     16.788
2012-07-25 10:21:54.931000    139.200
2012-07-25 10:23:18.896000    116.004 
```

正如预期的那样。然而，打印结果数据框给了我——</p>

```
>>> print df['770000000049']

>>> 1992-06-05 15:50:11.527680   NaN
2181-10-17 22:55:34.850625   NaN
2215-08-27 21:41:15.306049   NaN
1936-05-22 00:55:45.848401   NaN
1783-06-08 06:38:26.257076   NaN
2017-03-12 18:30:17.469108   NaN
2209-08-06 03:45:09.779652   NaN
1768-02-06 12:00:22.653272   NaN
1916-07-20 06:51:31.628376   NaN
2086-01-25 18:30:58.261336   NaN
1940-08-26 15:13:33.790568   NaN
1712-12-17 22:48:01.743241   NaN
1803-06-16 16:32:58.309017   NaN
1981-11-05 04:38:27.140059   NaN
2246-05-25 09:09:27.875035   NaN
... 
```

哇！数据全是错误的。键和值都是完全错误的。

我究竟做错了什么？

**编辑**：打印`df`给了我-</p>

```
DatetimeIndex: 386 entries, 1992-06-05 15:50:11.527680 to 1774-08-13 02:00:15.237103
Data columns:
770000000006    0  non-null values
770000000009    0  non-null values
770000000010    0  non-null values
770000000011    0  non-null values
770000000012    0  non-null values
770000000013    0  non-null values
770000000018    0  non-null values
770000000020    0  non-null values
770000000021    0  non-null values
770000000022    0  non-null values
770000000024    0  non-null values
770000000029    0  non-null values
770000000030    0  non-null values
770000000032    0  non-null values
770000000034    0  non-null values
770000000049    0  non-null values
dtypes: float64(16) 
```

完全错误

**编辑 2**：

我已经[编写了一个](http://pastebin.com/WTsCkKrL)为我重现错误的模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:58:29.307

编辑：这*是*一个错误。我（Wes）在这里修复了它：[https ://github.com/pydata/pandas/commit/aea7c4522bd7beffd0df80efee818873110609fa](https://github.com/pydata/pandas/commit/aea7c4522bd7beffd0df80efee818873110609fa)

* * *

事实证明[这不是一个错误](http://pandas.sourceforge.net/timeseries.html#time-series-related-instance-methods)——</p>

> 虽然 pandas 不会强制您使用已排序的日期索引，但如果日期未排序，其中一些方法可能会出现意外或不正确的行为。所以请小心。

在数据库级别对日期进行排序为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T17:10:48.973

我运行了您粘贴的代码段，对我来说似乎很好。你使用的是什么版本的熊猫/numpy？您可以发布所有/更多数据吗？

```
In [26]: paste
{u'_id': u'770000000049',
 u'value': {u'timestamps': [datetime.datetime(2012, 7, 25, 10, 16, 1, 270000),
                            datetime.datetime(2012, 7, 25, 10, 18, 29, 745000),
                            datetime.datetime(2012, 7, 25, 10, 21, 54, 931000),
                            datetime.datetime(2012, 7, 25, 10, 23, 18, 896000)],
            u'values': [204.0, 16.788, 139.2, 116.004]}}
## -- End pasted text --
Out[26]: 
{u'_id': u'770000000049',
 u'value': {u'timestamps': [datetime.datetime(2012, 7, 25, 10, 16, 1, 270000),
   datetime.datetime(2012, 7, 25, 10, 18, 29, 745000),
   datetime.datetime(2012, 7, 25, 10, 21, 54, 931000),
   datetime.datetime(2012, 7, 25, 10, 23, 18, 896000)],
  u'values': [204.0, 16.788, 139.2, 116.004]}}

In [27]: data = [_]

In [28]: paste
df_data = dict()

for x in data:
    series = pandas.Series(x['value']['values'], index=x['value']['timestamps'])

    df_data[x['_id']] = series

df = pandas.DataFrame(df_data)
## -- End pasted text --

In [29]: print df['770000000049']
2012-07-25 10:16:01.270000    204.000
2012-07-25 10:18:29.745000     16.788
2012-07-25 10:21:54.931000    139.200
2012-07-25 10:23:18.896000    116.004
Name: 770000000049 
```

# java - 删除cookie selenium java

> ID：11848581
> 
> 赞同：0
> 
> 时间：2012-08-07T14:50:47.197
> 
> 标签：java, selenium

我知道如果我想通过 Selenium 删除 cookie，我应该执行以下操作：

```
this.getDriverProvider().get().manage().deleteCookieNamed("cookie"); 
```

但是，当我创建这个 cookie 时，我设置了：

```
Cookie cookie = new Cookie("name=cookie", "max_age=1200"); 
```

我发现如果我想删除这个cookie，我必须通过`name=cookie`而不是`cookie`孤单。所以，我不明白这些对值是如何使用的。

请问，有人可以帮我吗？

谢谢，

萨朗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:56:16.627

创建 cookie 时，您将`name=cookie`作为其名称传递。构造函数参数是有序的并映射到其相应的属性，因此您不必指定第一个参数将是 cookie 的名称。

如果您要在创建之后添加一个值，则调用一个方法，该方法将您使用的值设置为与该方法关联的键的值。例如：

```
Cookie c = new Cookie("name", "value");
c.setVersion("cookieVersion"); //Here, the version key will have the "cookieVersion" value
c.setMaxAge(1200); 
```

然后，当您调用 getName() 方法时，您将获得与键名关联的值，并传递给相应的构造函数。在你的情况下是“name = cookie”，在我的情况下只是“name”。

如果您愿意，可以查看[文档](http://docs.oracle.com/javaee/1.3/api/javax/servlet/http/Cookie.html)。

# python - 在 GAE（Python，Django）中通过 url 显示动态图像（blob）

> ID：11848588
> 
> 赞同：1
> 
> 时间：2012-08-07T14:51:38.980
> 
> 标签：python, django, google-app-engine

我正在尝试在 Django 中使用模板显示图像：

模板.html：

```
<img src='{{ url }}' alt="" /> 
```

{{ url }} 在views.py 中定义

视图.py：

```
blob_key =str(product.key())
url = images.get_serving_url(blob_key) 
```

product - 简单对象，在 models.py 中定义：

```
class Product(db.Model):
      name = db.StringProperty()
      price = db.FloatProperty()
      added = db.DateTimeProperty(auto_now_add=True)
      image = db.BlobProperty(default=None) 
```

毕竟，我得到`url = u'http://localhost:8080/_ah/img/ag5kZXZ-dmVydGlrYWwtM3INCxIHUHJvZHVjdBgEDA'`

在带有 的管理控制台项目中`id = ag5kZXZ-dmVydGlrYWwtM3INCxIHUHJvZHVjdBgFDA`，**存在**。

但在 brawser 我看不到图像。

蟒蛇 2.7

1.  我究竟做错了什么？
2.  使用 Django 在 GAE 中显示图像的其他方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:01:51.647

您似乎使用 Product 实例的密钥作为 URL 的基础，而不是`image`blob 的密钥。你的意思肯定是：

```
url = images.get_serving_url(product.image) 
```

# jquery - Datatables TableTools 同一页面上的多个表

> ID：11848593
> 
> 赞同：6
> 
> 时间：2012-08-07T14:51:58.683
> 
> 标签：jquery, datatables, tabletools

我在同一页面上遇到多个 DataTables 和 TableTools 实例的问题。DataTables 工作正常，但在使用 TableTools 时，只有第一个表与按钮完全配合。

所有表格上的所有按钮都显示正常，但是当您单击一个按钮时，它什么也不做。（除了“打印”按钮适用于所有 4 张桌子）。

有人知道为什么会这样吗？我一直在寻找解决方案，但没有找到任何解决方案。

```
<script type="text/javascript"> 
jQuery( function( $ ) {

// Implements the dataTables plugin on the HTML table
    var $acTable= $("#academic_table").dataTable( {
        "oLanguage": {
            "sSearch": "Filter:"
        },
        "oTableTools": {
            "sSwfPath": "swf/copy_csv_xls_pdf.swf",
            "aButtons": [
                "copy",
                "xls",
                "csv",
                "pdf",
                "print"
            ]
        },
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "scripts/academic_serverside.php",
        "iDisplayLength": 10,       
        "bJQueryUI": false,
        "sPaginationType": "scrolling",
        "sDom": '<"clear"><"top"CTilr<"clear">pt>',
        "aoColumns": [ 
            {"bVisible":false},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":false}
        ],
        "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
        $('td:eq(4)', nRow).html(''+ aData[5] +'&nbsp;'+ aData[6] +'');
        },
        "oColVis": {
            "activate": "mouseover",    
            "aiExclude": [0,6]
        }
        }).columnFilter({   
            aoColumns: [ 
                    { type: "select"},
                    { type: "text"},
                    { type: "select"},
                    { type: "select"},
                    { type: "select"},
                    { type: "text"},
                    { type: "text"}
                ]
        }); 

    // Implements the dataTables plugin on the HTML table
    var $buTable= $("#business_table").dataTable( {
        "oLanguage": {
            "sSearch": "Filter:"
        },
        "oTableTools": {
            "sSwfPath": "swf/copy_csv_xls_pdf.swf",
            "aButtons": [
                "copy",
                "xls",
                "csv",
                "pdf",
                "print"
            ]
        },
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "scripts/business_serverside.php",
        "iDisplayLength": 10,       
        "bJQueryUI": false,
        "sPaginationType": "scrolling",
        "sDom": '<"clear"><"top"CTilr<"clear">pt>',
        "aoColumns": [ 
            {"bVisible":false},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":false}
        ],
        "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
        $('td:eq(6)', nRow).html(''+ aData[7] +'&nbsp;'+ aData[8] +'');        
        },
        "oColVis": {
            "activate": "mouseover",    
            "aiExclude": [0,8]
        }
        }).columnFilter({   
            aoColumns: [ 
                    { type: "select"},
                    { type: "text" },
                    { type: "select" },
                    { type: "select"},
                    { type: "text"},
                    { type: "text"},
                    { type: "select"},
                    { type: "text"}
                ]
        }); 

    // Implements the dataTables plugin on the HTML table
    var $lmTable= $("#line_managers_table").dataTable( {
        "oLanguage": {
            "sSearch": "Filter:"
        },
        "oTableTools": {
            "sSwfPath": "swf/copy_csv_xls_pdf.swf",
            "aButtons": [
                {
                    "sExtends": "print"
                }
            ]       },
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "scripts/line_managers_serverside.php",
        "iDisplayLength": 10,       
        "bJQueryUI": false,
        "sPaginationType": "scrolling",
        "sDom": '<"clear"><"top"Tfilr<"clear">pt>'
        }); 

    // Implements the dataTables plugin on the HTML table
    var $dTable= $("#divisions_table").dataTable( {
        "oLanguage": {
            "sSearch": "Filter:"
        },
        "oTableTools": {
            "sSwfPath": "swf/copy_csv_xls_pdf.swf",
            "aButtons": [
                {
                    "sExtends": "print"
                }
            ]       },
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "scripts/divisions_serverside.php",
        "iDisplayLength": 20,       
        "bJQueryUI": false,
        "sPaginationType": "scrolling",
        "sDom": '<"clear"><"top"Tfilr<"clear">pt>'
        }); 

});
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-03T09:37:20.933

问题是存在一个`<embed>`未定义宽度和高度的元素，因为表格在初始化期间应该是可见的。

我通过简单的 CSS 规则解决了它

```
.DTTT_button embed {
    width: 50px;
    height: 24px;
} 
```

根据您的情况更改尺寸。

不需要任何功能和其他额外的编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:29:40.033

如果您要隐藏/显示表格，则必须调用[fnResizeButtons()](http://datatables.net/extras/tabletools/api#fnResizeButtons)。还要确保至少有 1.8 版的数据表。此问题肯定与无法正常工作的 flash 插件有关

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:15:09.480

检查您的 sSwfPath 并确保 Flash 文件确实存在于那里。另请注意，您使用的是相对路径。尝试使用绝对路径以确保您获得正确的位置。

- - 编辑 - -

这似乎不是一个不常见的问题。以下线程提到了“使用 TableTools 问题的多个表”的许多解决方案。

[http://datatables.net/forums/discussion/3963/tabletools-on-multiple-tables/p1](http://datatables.net/forums/discussion/3963/tabletools-on-multiple-tables/p1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T13:22:41.967

表必须在初始化期间可见。

如果没有，只需像这样在显示屏上调用**fnResizeButtons**（2 个选项）：

```
 $("#tabs").tabs({
                activate : function(event, ui)
                {
                    // Version 1.
                    $('table', ui.panel).each(function()
                    {
                        var oTableTools = TableTools.fnGetInstance(this);

                        if (oTableTools && oTableTools.fnResizeRequired())
                        {
                            oTableTools.fnResizeButtons();
                        }
                    });

                    // or version 2.
                    var tableInstances = TableTools.fnGetMasters(), instances = tableInstances.length;

                    while (instances--)
                    {
                        var dataTable = tableInstances[instances];
                        if (dataTable.fnResizeRequired())
                        {
                            dataTable.fnResizeButtons();
                        }
                    }
                }
            }); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-06-13T14:58:50.890

我创建了一个帐户只是为了说 Kayz1 的答案对我来说非常有效。（我没有足够的代表来评论他的帖子）

我有一个与OP非常相似的问题。我的问题源于表在初始化期间不可见的事实。这是由于 jqueryUI 选项卡。解决方法是调用 Kayz1 上面列出的代码。我将我的放在 Tabs 定义中，但它可能存在于其他地方。

这是我对标签的确切定义。

```
 $("#tabs").tabs({
            show: function (event, ui) {
                var table = $.fn.dataTable.fnTables(true);
                if (table.length > 0) {
                    $(table).dataTable().fnAdjustColumnSizing();
                }                
            },
            activate: function (event, ui) {
                var tableInstances = TableTools.fnGetMasters(), instances = tableInstances.length;

                while (instances--) {
                    var dataTable = tableInstances[instances];
                    if (dataTable.fnResizeRequired()) {
                        dataTable.fnResizeButtons();
                    }
                }
            }
        }); 
```

# scala - 为什么 scala 不能推断 Left[X,A] 是 Either[X,B] 的合理子类型？

> ID：11848594
> 
> 赞同：4
> 
> 时间：2012-08-07T14:52:00.673
> 
> 标签：scala, type-systems

为什么此代码不进行类型检查？

```
def foo: Either[String, List[Int]] = {  
  val x = null: Either[String, String]

  x match {
    case l @ Left(_) => l
    case Right(_) => Right(List(3))
  }
} 
```

具体来说，为什么编译器不能/不具体化 Left[A,X] 和 Either[A,B] 的类型？

这发生在 scala 2.8.2 和 scala 2.9.2

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T15:08:51.170

这里有一个真正的冲突：

```
Left[String, String] <: Either[String, List[Int]] 
```

不是真的。 *是在左右参数*`Left`上键入的，即使两者之间没有*实际*区别（因此强制转换是安全的），这*不是您告诉编译器的内容*。所以，当然，它会抱怨。

 ***模式匹配中的类型推断还有其他弱点，但这不是其中之一。

* * *

编辑：可以想象一种替代的单参数化实现，`Left`其中

```
Left[String] <: Either[String, Nothing] <: Either[String, List[Int]] 
```

这会丢弃类型信息。像这样的方法`swap`使用起来会更棘手，但它会允许 OP 给出的模式。但是，在 Scala 的标准实现中使用了类型保留形式。***

# asp.net - 每当重新加载应用程序域时，如何强制 IIS 应用程序池重新启动？

> ID：11848595
> 
> 赞同：10
> 
> 时间：2012-08-07T14:51:59.557
> 
> 标签：asp.net, iis, asp.net-mvc-4, appdomain, application-pool

我们有一个链接到旧本机代码的 ASP.NET MVC 4 应用程序。问题是这个遗留代码具有在启动时构建的全局静态，但由于本机代码对应用程序域一无所知，因此在重新加载应用程序域时，该代码不会重新初始化。这会导致我们的应用程序出现错误行为或崩溃，直到重新启动应用程序池进程。

因此，每当我们的应用程序的应用程序域被回收时，我想强制应用程序池进行回收。IIS 中是否有此设置，或者在卸载域时我可以在我的应用程序中调用代码吗？

关于我的设置的一些信息，

1.  ASP.NET MVC 4 应用程序
2.  IIS 7.5，但如果需要我可以移动到 8
3.  我可以确保每个应用程序池有一个应用程序，因此我不会影响其他应用程序。

**更新**

根据下面的答案，我连接了 AppDomain 卸载事件并使用类似于以下的代码来回收应用程序池。

```
try
{
   // Find the worker process running us and from that our AppPool
   int pid = Process.GetCurrentProcess().Id;
   var manager = new ServerManager();
   WorkerProcess process = (from p in manager.WorkerProcesses where p.ProcessId == pid select p).FirstOrDefault();

   // From the name, find the AppPool and recycle it
   if ( process != null )
   {
      ApplicationPool pool = (from p in manager.ApplicationPools where p.Name == process.AppPoolName select p).FirstOrDefault();
      if ( pool != null )
      {
         log.Info( "Recycling Application Pool " + pool.Name );
         pool.Recycle();
      }
   }
}
catch ( NotImplementedException nie )
{
   log.InfoException( "Server Management functions are not implemented. We are likely running under IIS Express. Shutting down server.", nie );
   Environment.Exit( 0 );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-07T05:58:16.437

更残忍的方法是调用 Process.GetCurrentProcess().Kill() 不是很优雅，但是如果你的站点有自己的应用程序池并且你不在乎任何当前的请求被残忍地停止，那是相当有效的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-14T01:14:25.030

您共享的代码的简化 VB 版本。此版本使用 For 循环而不是 LINQ 查询。此外，为了使用 Microsoft.Web.Administration，您必须从 c:\windows\system32\inetsrv 导入 DLL

```
Imports System.Diagnostics
Imports Microsoft.Web.Administration

Dim pid As Integer = Process.GetCurrentProcess().Id
Dim manager = New ServerManager()
For Each p As WorkerProcess In manager.WorkerProcesses
    If p.ProcessId = pid Then
         For Each a As ApplicationPool In manager.ApplicationPools
             If a.Name = p.AppPoolName Then
                 a.Recycle()
                 Exit For
             End If
         Next
         Exit For
    End If
Next 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T18:11:56.170

根据您的帖子，您似乎知道何时要触发重新启动，因此这里有一个[重新启动（回收）应用程序池帖子](https://stackoverflow.com/questions/249927/restarting-recycling-an-application-pool)，它将告诉您如何操作。

# javascript - JavaScript RegExp 忽略大小写标志与全局匹配标志

> ID：11848597
> 
> 赞同：1
> 
> 时间：2012-08-07T14:52:08.997
> 
> 标签：javascript, regex

这是标志忽略案例的代码示例。我预计只会收到一场比赛。

```
var str = "Sample text";
var a = new Array();
a = str.match(/S(am)(p)/i); 
```

结果

a = [采样] [上午] [p]

我应该有一个= [Samp]

如果你用 g 改变 i 标志

```
var str = "Sample text";
var a = new Array();
a = str.match(/S(am)(p)/g); 
```

惊喜（至少对我来说）结果只有一个元素

a = [采样]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:02:54.300

`g`javascript regex API 非常不直观，因为它根据-flag执行各种魔术。

我将介绍`.match`行为方式：

*   如果没有`g`-flag ，则`.match`返回一个完全匹配的数组以及所有捕获组，或者`null`在不匹配的情况下返回。

*   使用`g`-flag`.match`返回一个包含所有完整匹配项的数组，并且捕获组没有任何区别。`null`如果没有匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:00:36.970

```
a = str.match(/S(am)(p)/i); 
```

返回第一个匹配的字符串，$1 $2

a = str.match(/S(am)(p)/g);

返回匹配的数组（这里只有一个）

如果你的字符串是这样贴花的

```
var str = "Sample text Sample text"; 
```

/g 返回 Samp Samp，当你的正则表达式看起来像`/S(.m)(p)/g`和字符串看起来像时它很有用`"Sample text Simple text";`

# ruby - 使用 Apache 作为 Ruby 服务器

> ID：11848598
> 
> 赞同：0
> 
> 时间：2012-08-07T14:52:10.967
> 
> 标签：ruby, apache, xampp

有什么办法可以将*Apache*用作 ruby​​ 服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:28:58.930

您可能需要考虑“乘客”模块，请参阅[网站](http://www.modrails.com/install.html)。昨天我使用他们在网站上的说明安装了这个模块，它运行良好。

我是通过`gem install passenger`. 我还没有部署任何东西。无论您选择什么选项，祝您好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:56:16.253

使用`eruby`和`libapache2-mod-ruby`包，然后用 . 激活 ruby​​ 模块`sudo a2enmod ruby`。

不要忘记创建一个配置文件`/etc/apache/conf.d/ruby.conf`并在这里​​放一些东西，比如：

```
AddType text/html .rhtml
AddType text/html .rbx
DirectoryIndex index.rhtml index.rbx

<IfModule mod_ruby.c>
  RubyRequire apache/ruby-run
  RubyRequire apache/eruby-run

  <Files *.rbx>
    Options +ExecCGI
    setHandler ruby-object
    rubyHandler Apache::RubyRun.instance
  </Files>

  <Files *.rhtml>
    setHandler ruby-object
    rubyHandler Apache::ERubyRun.instance
  </Files>
</IfModule> 
```

# javascript - 在命名空间中封装 javascript

> ID：11848601
> 
> 赞同：0
> 
> 时间：2012-08-07T14:52:27.373
> 
> 标签：javascript

我希望将我的 javascript 封装在这样的命名空间中：

```
MySpace = {

   SomeGlobal : 1,
   A: function () { ... }, 
   B: function () { ....; MySpace.A(); .... },
   C: function () { MySpace.SomeGlobal = 2;.... }
} 
```

现在想象一下，我有大约 12K 行 JavaScript，而不是几行代码，其中包含数百个函数和大约 60 个全局变量。我已经知道如何将我的代码转换为命名空间，但我想知道是否有比减少 12K 行代码并到处添加更快的方法`MySpace.`。

如果有更快的方法，请告诉我。感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:05:47.143

我喜欢这样包装命名空间。灵活性是巨大的，如果我们愿意，我们甚至可以将 MySpace 命名空间的不同模块分隔在单独的包装器中。您仍然需要在所有内容的前面添加某种`_self.`引用，但至少这样您可以在需要时非常快速地更改名称空间的整个名称。

您可以看到如何使用此方法甚至可以从第一个模块调用 _self.anotherFunc()，然后您将进入第二个模块。

```
(function (MySpace, $, undefined) {

    var _self = MySpace; // create a self-reference
    _self.test = function () { 
        alert('we got here!'); 
        _self.anotherFunc(); // testing to see if we can get the 2nd module
    };

    _self = MySpace; // reassign everything just incase

}(window.MySpace = window.MySpace || {}, jQuery));

$(function () { 

    MySpace.test(); // call module 1
    MySpace.callOtherModule(); // call module 2

});

// Here we will create a seperate Module to the MySpace namespace
(function (MySpace, $, undefined) {
    var _self = MySpace; // create a self-reference

    _self.callOtherModule = function () {
        alert('we called the 2nd module!');    
    };

    _self.anotherFunc = function () { 
        alert('We got to anotherFunc from the first module, even by using _self.anotherFunc()!'); 
    };
    _self = MySpace; // reassign everything just incase

}(window.MySpace = window.MySpace || {}, jQuery));​ 
```

[jsFiddle 演示](http://jsfiddle.net/pbXLB/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:22:16.913

将`function`主体包裹在现有代码周围以用作范围，从全局隐藏所有内容 - 这将允许您进行内部调用而无需`Namespace.`在任何地方粘贴前缀，巧妙地隐藏您不希望其他人看到的内容，并且也需要最少的更改.

之后，决定你想为每个人“导出”哪些功能，并将它们分配给你想用作“命名空间”的对象的属性。

# ios - 重用视图 ios

> ID：11848604
> 
> 赞同：0
> 
> 时间：2012-08-07T14:52:33.210
> 
> 标签：ios, user-interface, ios5, reusability

试图开发一个看起来像电子书的测试应用程序。用户可以翻页。但是，应用程序将有 40-50 个页面要浏览。无论如何只更新一个视图，即使在重新使用后，您也可以轻松地将其翻转回来。还是我必须创建更多视图才能实现目标。有人可以就使用哪种技术来解决这个问题以及使用什么来像电子书一样翻转提供建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:01:09.560

由于您已经标记了您的问题，`iOS5`因此您可以使用[UIPageViewController](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)（另请参见[这个](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/PageViewControllers.html#//apple_ref/doc/uid/TP40011313-CH4-SW3)）为您处理此行为（数据源处理、手势处理等）。其背后的逻辑是您提供一组视图控制器，其中每个控制器控制并为您的书中的页面提供内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:59:15.257

一种方法是，请查看“页面基础应用程序”。请创建一个新项目作为页面基础应用程序并进行处理。你会在网上找到大量的文档。

# php - 检测寄存器全局变量的使用

> ID：11848608
> 
> 赞同：9
> 
> 时间：2012-08-07T14:52:48.823
> 
> 标签：php, code-analysis

PHP中有没有办法进行静态代码分析并检测对`register_globals`主动性的依赖？手动检查文件并查找尚未初始化的变量并从中推断出这些变量可能依赖于它是相对简单的，但我需要为数百个脚本执行此操作，因此我正在寻找一个自动化的解决方案.

我最后的手段是设置一个开发环境，关闭指令并严格错误报告，让 QA 玩很长时间，然后修复错误日志捕获的实例，但这不能保证找到 100% 的情况，如果存在自动化解决方案，当然不能很好地利用资源。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T15:34:08.307

我刚刚编写了一个小脚本来检测简单的未定义变量。为此，您需要[PHP-Parser](https://github.com/nikic/PHP-Parser)：

```
<?php

error_reporting(E_ALL);

$dir = './foo';

require_once './lib/bootstrap.php';

class Scope {
    protected $stack;
    protected $pos;

    public function __construct() {
        $this->stack = array();
        $this->pos = -1;
    }

    public function addVar($name) {
        $this->stack[$this->pos][$name] = true;
    }

    public function hasVar($name) {
        return isset($this->stack[$this->pos][$name]);
    }

    public function pushScope() {
        $this->stack[++$this->pos] = array();
    }

    public function popScope() {
        --$this->pos;
    }
}

class UndefinedVariableVisitor extends PHPParser_NodeVisitorAbstract {
    protected $scope;
    protected $parser;
    protected $traverser;

    public function __construct(Scope $scope, PHPParser_Parser $parser, PHPParser_NodeTraverser $traverser) {
        $this->scope = $scope;
        $this->parser = $parser;
        $this->traverser = $traverser;
    }

    public function enterNode(PHPParser_Node $node) {
        if (($node instanceof PHPParser_Node_Expr_Assign || $node instanceof PHPParser_Node_Expr_AssignRef)
            && $node->var instanceof PHPParser_Node_Expr_Variable
            && is_string($node->var->name)
        ) {
            $this->scope->addVar($node->var->name);
        } elseif ($node instanceof PHPParser_Node_Stmt_Global || $node instanceof PHPParser_Node_Stmt_Static) {
            foreach ($node->vars as $var) {
                if (is_string($var->name)) {
                    $this->scope->addVar($var->name);
                }
            }
        } elseif ($node instanceof PHPParser_Node_Expr_Variable && is_string($node->name)) {
            if (!$this->scope->hasVar($node->name)) {
                echo 'Undefined variable $' . $node->name . ' on line ' . $node->getLine() . "\n";
            }
        } elseif ($node instanceof PHPParser_Node_Stmt_Function || $node instanceof PHPParser_Node_Stmt_ClassMethod) {
            $this->scope->pushScope();

            // params are always available
            foreach ($node->params as $param) {
                $this->scope->addVar($param->name);
            }

            // methods always have $this
            if ($node instanceof PHPParser_Node_Stmt_ClassMethod) {
                $this->scope->addVar('this');
            }
        } elseif ($node instanceof PHPParser_Node_Expr_Include && $node->expr instanceof PHPParser_Node_Scalar_String) {
            $file = $node->expr->value;
            $code = file_get_contents($file);
            $stmts = $this->parser->parse($code);

            // for includes within the file
            $cwd = getcwd();
            chdir(dirname($file));

            $this->traverser->traverse($stmts);

            chdir($cwd);
        }
    }

    public function leaveNode(PHPParser_Node $node) {
        if ($node instanceof PHPParser_Node_Stmt_Function || $node instanceof PHPParser_Node_Stmt_ClassMethod) {
            $this->scope->popScope();
        }
    }
}

$parser = new PHPParser_Parser(new PHPParser_Lexer());

$scope = new Scope;

$traverser = new PHPParser_NodeTraverser;
$traverser->addVisitor(new UndefinedVariableVisitor($scope, $parser, $traverser));

foreach (new RecursiveIteratorIterator(
             new RecursiveDirectoryIterator($dir),
             RecursiveIteratorIterator::LEAVES_ONLY)
         as $file
) {
    if (!preg_match('/\.php$/', $file)) continue;

    echo 'Checking ' . $file . ':', "\n";

    $code = file_get_contents($file);
    $stmts = $parser->parse($code);

    // for includes within the file
    $cwd = getcwd();
    chdir(dirname($file));

    $scope->pushScope();
    $traverser->traverse($stmts);
    $scope->popScope();

    chdir($cwd);

    echo "\n";
} 
```

这只是一个非常基本的实现，我没有对它进行广泛的测试，但它应该适用于不使用`$GLOBALS`and的脚本`$$varVars`。它确实基本包括分辨率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:20:18.453

这应该有效（来自php手册评论之一）：

```
if (ini_get('register_globals')) {
    foreach ($GLOBALS as $int_temp_name => $int_temp_value) {
        if (!in_array($int_temp_name, array (
                'GLOBALS',
                '_FILES',
                '_REQUEST',
                '_COOKIE',
                '_SERVER',
                '_ENV',
                '_SESSION',
                ini_get('session.name'),
                'int_temp_name',
                'int_temp_value'
            ))) {
            unset ($GLOBALS[$int_temp_name]);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-13T20:45:56.580

用最新的解析器调整了上面的代码：用它把 5.4 的 register_globals 变成了 7.2

```
 <?php
/*
 * pgParser.php is a "Abstract syntax tree" progam based on the Nikic PHP-Parser  https://github.com/nikic/PHP-Parser
 * Tweaked for use to lose register global variables.
 */

use PhpParser\Node;
use PhpParser\NodeTraverser;
use PhpParser\NodeVisitorAbstract;
use PhpParser\Parser;

error_reporting(E_ALL);

/*
 * $dir contains a base dir to use when no PARAM directory eq "php ./pgParser.php /home/hrobben/php/ > results.txt"
 */
$dir = '/home/hrobben/php/';
/*
 * $nonecheck : variables not to check....
 * e.g ['GLOBALS','_COOKIE', 'properties'] -> $GLOBALS, $_COOKIE, $properties >>>>> will not been checked.
 */
$nonecheck = ['_COOKIE', '_SERVER', '_SESSION'];
/*
 * if those names part or directory not include...
 * this can be usefull when certain users (developers) have own directories
 * empty = [] no directories will be excluded
 * e.g. ['george', 'henry']  all directories /tree/git/base/src/henry/  and /template/george/blog/  will be excluded.
 */
$nonesubdir = ['henry', 'ckeditor'];
/*
 * $excludeMatch can be filled with text in directory plus file to exclude.
 * e.q.  _MA. will exclude the file index_MA.php3 to scan.
 * e.g.  _MA will exclude the file /git/src/test_MAIN/index.php3
 * be carefull.
 * Not for include files, only base files.
 */
$excludeMatch = ['_HR.', '_ed.'];
/*
 * you can give a base directory to begin scanning.
 */
if (count($argv) > 0) {
    $dir = $argv[1];
}

require_once './vendor/autoload.php';

class Scope
{
    protected $stack;
    protected $pos;

    public function __construct()
    {
        $this->stack = array();
        $this->pos = -1;
    }

    public function addVar($name)
    {
        $this->stack[$this->pos][$name] = true;
    }

    public function hasVar($name): bool
    {
        return isset($this->stack[$this->pos][$name]);
    }

    public function pushScope()
    {
        $this->stack[++$this->pos] = array();
    }

    public function popScope()
    {
        --$this->pos;
    }

    public function getPos()
    {
        return $this->pos;
    }
}

class UndefinedVariableVisitor extends NodeVisitorAbstract
{
    protected $scope;
    protected $parser;
    protected $traverser;
    protected $nonecheck;
    protected $isInclude = false;

    public function __construct(Scope $scope, Parser $parser, NodeTraverser $traverser, array $nonecheck)
    {
        $this->scope = $scope;
        $this->parser = $parser;
        $this->traverser = $traverser;
        $this->nonecheck = $nonecheck;
    }

    public function enterNode(Node $node)
    {
        $includePath = ['/home/hrobben/php/include/class/'];
        $nonesubdir = ['jp', 'jp117']; // for the include exclusion directories.

        if (($node instanceof PhpParser\Node\Expr\Assign || $node instanceof PhpParser\Node\Expr\AssignRef)
            && $node->var instanceof PhpParser\Node\Expr\Variable
            && is_string($node->var->name)
        ) {
            // if preg_replace uses the same var name as second argument, its not setting a var, it must also be on the first level.
            if ($node->expr->name->parts[0] == 'preg_replace' && $node->expr->args[2]->value->name == $node->var->name && $this->scope->getPos() == 0) {
                //echo 'found $'.$node->expr->args[2]->value->name.' level '.$this->scope->getPos()."\n";
            } else {
                //echo 'add var $' . $node->var->name . "\n";
                $this->scope->addVar($node->var->name);
            }
        } elseif ($node instanceof PhpParser\Node\Stmt\Global_ || $node instanceof PhpParser\Node\Stmt\Static_) {
            foreach ($node->vars as $var) {
                if (is_string($var->name)) {
                    $this->scope->addVar($var->name);
                    //echo 'add global or static var $' . $var->name . "\n";
                }
            }
        } elseif ($node instanceof PhpParser\Node\Stmt\Foreach_) {
            $this->scope->addVar($node->valueVar->name);
            if ($node->keyVar) {
                $this->scope->addVar($node->keyVar->name);
            }
        } elseif ($node instanceof PhpParser\Node\Stmt\StaticVar) {
            $this->scope->addVar($node->var->name);
        } elseif ($node instanceof PhpParser\Node\Expr\FuncCall && ($node->name->parts[0] == 'preg_match')) {
            foreach ($node->args as $args) {
                if ($node->args[2]) {
                    $this->scope->addVar($node->args[2]->value->name);
                }
            }
        } elseif ($node instanceof PhpParser\Node\Expr\List_) {
            foreach ($node->items as $item) {
                $this->scope->addVar($item->value->name);
            }
        } elseif ($node instanceof PhpParser\Node\Expr\Closure) {
            foreach ($node->params as $param) {
                $this->scope->addVar($param->var->name);
            }
        } elseif ($node instanceof PhpParser\Node\Expr\Variable && is_string($node->name) && !$node instanceof PhpParser\Node\Const_) {
            if (!$this->scope->hasVar($node->name) && !in_array($node->name, $this->nonecheck)) {
                echo 'Undefined variable $' . $node->name . ' on line ' . $node->getLine() . "\n";
            }
        } elseif ($node instanceof PhpParser\Node\Stmt\Function_ || $node instanceof PhpParser\Node\Stmt\ClassMethod) {
            $this->scope->pushScope();

            // params are always available
            foreach ($node->params as $param) {
                //echo 'param name : '. $param->var->name. "\n";
                $this->scope->addVar($param->var->name);
            }

            // methods always have $this
            if ($node instanceof PhpParser\Node\Stmt\ClassMethod) {
                $this->scope->addVar('this');
            }
        } elseif ($node instanceof PhpParser\Node\Expr\Include_ && $node->expr instanceof PhpParser\Node\Scalar\String_) {
            $file = $node->expr->value;

            $code = file_get_contents($file);
            if (strlen($code) < 5) {
                foreach ($includePath as $path) {
                    if (strlen($code) < 5) {
                        $code = file_get_contents($path . $file);
                    }
                }
            }

            $match_string = implode("\/|", $nonesubdir);
            if (preg_match("/$match_string\//", $file)) {
                $code = '';
                echo 'file skipped: ' . $file . "\n";
            }

            $stmts = $this->parser->parse($code);
            // for includes within the file
            $cwd = getcwd();
            chdir(dirname($file));

            $this->isInclude = true;
            $this->traverser->traverse($stmts);
            $this->isInclude = false;

            chdir($cwd);
            if (strlen($code) < 5) {
                echo 'Include <- ' . $file . ' not found or empty.' . "\n";
            } else {
                echo 'Include <- ' . $file . "\n";
            }
        }
    }

    public function leaveNode(Node $node)
    {
        if ($node instanceof PhpParser\Node\Stmt\Function_ || $node instanceof PhpParser\Node\Stmt\ClassMethod) {
            $this->scope->popScope();
        }
    }
}

$lexer = new PhpParser\Lexer();
$parser = (new PhpParser\ParserFactory)->create(
    PhpParser\ParserFactory::PREFER_PHP7,
    $lexer
);

$scope = new Scope;

$traverser = new NodeTraverser();
$traverser->addVisitor(new UndefinedVariableVisitor($scope, $parser, $traverser, $nonecheck));

foreach (new RecursiveIteratorIterator(
             new RecursiveDirectoryIterator($dir),
             RecursiveIteratorIterator::LEAVES_ONLY)
         as $file
) {
    if (!preg_match('/\.php$|\.html$|\.php3$/', $file)) continue;

    $match_string = implode("\/|\/", $nonesubdir);
    if (preg_match("/\/$match_string\//", $file)) continue;

    $match_string = implode("|", $excludeMatch);
    if (preg_match("/$match_string/", $file)) continue;

    echo 'Checking ' . $file . ':', "\n";

    $code = file_get_contents($file);
    $stmts = $parser->parse($code);
    // print_r($stmts);
    // for includes within the file
    $cwd = getcwd();
    chdir(dirname($file));

    $scope->pushScope();
    $traverser->traverse($stmts);
    //print_r($stmts);
    $scope->popScope();

    chdir($cwd);

    echo "\n";
} 
```

使用它来制作大量脚本文件，其中包含无需全局注册变量的代码。我们已经将它与 PHP7.2 一起使用

# c# - 使用 HTMLAgilityPack 将链接转换为 BBCODE？

> ID：11848610
> 
> 赞同：4
> 
> 时间：2012-08-07T14:52:51.160
> 
> 标签：c#, .net-4.0, html-agility-pack, bbcode

我有一些文本，在该文本的不同位置我有一些 HTML 链接，例如`<a href="link">text</a>`.

我想把它转换成`[url=link]text[/url]`.

我知道如何阅读 href 和单独的文本，例如：

```
var link = doc.SelectNodes("//a");
string link = link.Attributes["href"].value;
string text = link.InnerText; 
```

但是我是否可以将它替换回同一位置的文本而不损害文本、丢失位置等？

例子：

```
The brown fox <a href="link">jumped over</a> the table while the rabbit <a href="link">scaped from it</a>. 
```

会成为：

```
The brown fox [url=link]jumped over[/url] the table while the rabbit [url=link]scaped from it[/url]. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T15:01:35.140

像这样的东西：

```
HtmlDocument doc = new HtmlDocument();
doc.Load(myTestFile);

foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//a[@href]"))
{
    node.ParentNode.ReplaceChild(doc.CreateTextNode("[url=" + node.GetAttributeValue("href", null) +"]" + node.InnerHtml + "[/url]"), node);
} 
```

# python - Django：传输/访问表单完整错误消息

> ID：11848612
> 
> 赞同：1
> 
> 时间：2012-08-07T14:52:57.117
> 
> 标签：python, django

在我正在为我的学校工作的网站上，用户输入他们的学校电子邮件和密码，如果他们已经注册，他们就会登录。如果没有，登录的第二部分会显示，要求输入笔名并确认密码。正因为如此，以及我复杂的业余 Django 编程，我有一个名为 er 的错误列表。瞬间，当程序测试电子邮件是否是学校电子邮件时，它可能会添加到 er 列表“仅限学校电子邮件”。我也使用两个表单类。该页面使用 ajax 调用此函数，由于站点较小，该函数使用纯 html 而不是 JSON。

在 forms.py 文件中，我有：

```
class log_in(forms.Form):
    username = forms.EmailField(error_messages= {'required': "Email Field is required,", 'invalid' : "Invalid Email Address."})
    password = forms.CharField(help_text = 'Password Invalid')

class new_user(forms.Form):
    username = forms.EmailField(error_messages = {'required': "Email Field is required,", 'invalid' : "Invalid Email Address."})
    password = forms.CharField(required=True)
    password2 = forms.CharField(required=True)
    pen_name = forms.CharField(max_length=30, min_length=3, error_messages = {'required': "Pen Name is required", 'max_length': "Pen Name must be less than 30 characters", 'min_length': "Pen Name must be more than 3 characters"}) 
```

问题是我想将我在 error_message 参数中指定的完整错误消息传输到 er 列表。

这是我的views.py 文件

```
def user_log_in(request):
    er = []
    user_pass = log_in(request.POST)
    if user_pass.is_valid(): # If it is valid at all
        cleaned_info = user_pass.cleaned_data
        email_bbn = cleaned_info['username'].split("@")
        if 'bbns.org' in email_bbn: # Check if BBN email address
            user_object = User.objects.filter(email = cleaned_info['username'])
            if user_object.exists():
                logged_in_user = auth.authenticate(username=cleaned_info['username'], password=cleaned_info['password'])
                #add in is_active
                if logged_in_user is not None: #If password is right
                    if user_object[0].get_profile().activated:
                        auth.login(request, logged_in_user)
                        return HttpResponseRedirect("")
                    else:
                        return HttpResponse("not_act")
                else:
                    er.append("Incorrect Password")
            else: # If new user
                new_user_pass = new_user(request.POST)
                if new_user_pass.is_valid():
                    cleaned_info_new = new_user_pass.cleaned_data
                    if cleaned_info_new['password'] == cleaned_info_new['password2']:
                        msg = "In order to activate your account at Knights of the Round Table, please click on this link:"
                        try:
                            send_mail('Activate', msg, 'michaelrgoldfine@gmail.com', [cleaned_info_new['username']], fail_silently=False)
                            new_user_object = User.objects.create_user(
                                username=cleaned_info_new['username'],
                                password=cleaned_info_new['password'],
                                email=cleaned_info_new['username']
                            )
                            new_user_profile = new_user_object.get_profile()
                            new_user_profile.pen_name = cleaned_info_new['pen_name']
                            new_user_profile.activated = False;
                            new_user_profile.save()
                            return HttpResponse("not_act")
                        except:
                            er.append("Error Sending Email")
                    else:
                        er.append('Passwords are not the same')
                elif "TN" in request.POST: #If open but not filled in
                    print "TN"
                    er.append(new_user_pass.pen_name.error_messages)
                else: # if new user field
                    print "n_usr"
                    return HttpResponse('n_usr')
        else:
            er.append("BBN email addresses only")
    else:
        for e in user_pass.errors:
            er.append(e)
    errors_template = Template("{% for e in errors %}<li>{{ e }}</li> {% endfor %}")
    errors_html = errors_template.render(Context({'errors':er}))
    return HttpResponse(errors_html) 
```

我尝试访问错误两次。一次，在`else`你看到的末尾有一个 for 循环，然后`else`从那个开始两个 s`elif 'TN'...`最后一个只返回无效的字段（所以我得到 user_name 或 pen_name）。另一个说表单没有对象 pen_name 或我使用它的任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:30:06.663

该数组可能看起来像 error[i].field[i].error，所以您只是调用了字段名而不是错误消息。在 Template() 函数中调用 e.error。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:37:30.197

最好在实际表单中添加错误。表单`_errors`附有一个字典，其中包含表单生成的所有错误。“非字段错误”（与特定字段不直接相关或与多个字段相关的错误）进入`form._errors['__all__']`. 所有特定于字段的错误都进入字段名称的键。因此，`foo`字段的错误将进入`form._errors['foo']`.

现在，dict 中每个项目的错误列表`_errors`实际上是一种`ErrorList`类型，而不是标准列表。因此，要将错误添加到您所做的表单中：

```
from django.forms.util import ErrorList

form._errors.setdefault('foo', ErrorList()).append('Some error here') 
```

或者，将错误添加到非字段错误中：

```
form._errors.setdefault('__all__', ErrorList()).append('Some error here') 
```

然后，当您的表单呈现时，错误将自然而然地落在应有的位置，就像任何正常的验证错误一样。

# c# - 显示图片框？我没有看到我在这里做错了什么

> ID：11848614
> 
> 赞同：1
> 
> 时间：2012-08-07T14:53:05.373
> 
> 标签：c#, .net, winforms, picturebox

我正在检查是否可以访问服务器，然后将图片框的“可见”布尔值设置为 true。但是，当我第一次运行代码时，没有出现错误，但也没有出现图片框。

有一个offlinePic（设置Visible boolean 为true，测试失败时放在前面） 有一个onlinePic（设置Visible boolean 为true，测试通过时放在前面）

我认为可能是服务器搞砸了，所以我将其更改为使用 Google.com 尝试，并没有任何区别。

```
private void Launcher_Load(object sender, EventArgs e)
    {
        TestServerConnection();
    }
    public void TestServerConnection()
    {
        string url = "www.google.com";
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.Timeout = 15000;
        request.Method = "HEAD";
        try
        {
            using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
            {
                if (onlinePic.Visible == false) onlinePic.Visible = true;
                onlinePic.BringToFront();
            }
        }
        catch (WebException)
        {
            if (offlinePic.Visible == false) offlinePic.Visible = true;
            offlinePic.BringToFront();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:02:00.943

您的网址格式错误。
www.google.com 应该是[http://www.google.com](http://www.google.com)

其他一切对我来说都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:04:20.397

并非所有服务器都可以响应`HEAD`尝试`GET`在`request.Method`. `http`并在 URL 中指定协议。

# eclipse - 无法安装 ADT 插件，因为 Eclipse 无法连接到 Internet。

> ID：11848617
> 
> 赞同：0
> 
> 时间：2012-08-07T14:53:14.397
> 
> 标签：eclipse, plugins, repository, connect

我无法在 Windows 上的 64 位 Eclipse 上安装 ADT 插件，因为 Eclipse 无法连接到互联网。因此，我总是得到错误`Unable to find Repository`。

我检查确认确实是 Eclipse 无法连接到 Internet，因为内部 Web 浏览器似乎无法连接到任何站点。

此外，尝试使用外部浏览器访问站点也可以正常工作。

关于如何让 eclipse 连接到互联网或安装 ADT 插件的解决方法的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:28:44.657

- 添加到您的 ini。Dorg.eclipse.ecf.provider.filetransfer.excludeContributors=org.eclipse.ecf.provider.filetransfer.httpclient

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:23:51.017

这可能与代理设置有关。

## 你有代理吗？

您是否必须通过代理才能访问互联网？

尝试这样做：`Start -> Run -> inetcpl.cpl -> Connections -> LAN Settings`

你应该得到这样的东西：

![本机主动提供者](../Images/eece55cc8124d344980b356934292a83.png)

你有东西吗？

### 系统代理设置 - 简单的方法

通常，如果您在那里设置了系统`inetcpl.cpl`代理***设置***`General -> Network Connections -> Active Provider`（

![本机主动提供者](../Images/239474e582aa60c298225cc4bc1e9fc5.png)

然后*原生*设置是那些被检查并且可以区分为带有轻微黄色背景的设置。

这将要求： 1.您通过配置相同的设置检查和设置系统代理设置，`Start -> Run -> inetcpl.cpl`然后转到`Connections -> LAN Settings`然后填写值`Address`，`Port`如下所示：

![在此处输入图像描述](../Images/eece55cc8124d344980b356934292a83.png)

2.  重新启动 Eclipse。然后转到 General -> Network Connections 并选择 Native Provider。

当您有具有大量排除项的复杂代理设置时，此方法最有用。

### 手动设置代理设置 - 不那么简单的方法

使用这种方法，我们将只在 eclipse 中设置代理设置，如下所示：

1.  转到`General -> Network Connections`Eclipse 首选项。

2.  选择. `Manual`_ `Active Provider`执行此操作后，您会看到选中的设置`Proxy entries`如下更改：
    ![手动代理设置](../Images/1d0521ac7ab2698b273ed55f1724d999.png)

3.  最后，通过单击`HTTP`例如编辑各个代理设置，然后单击`Edit...`并填写代理服务器的值，如下所示：
    ![在此处输入图像描述](../Images/16af7442490d9fb7b962617a143fa613.png)

使用上述任何一种方法，您都应该能够让您的 Eclipse 连接到互联网。

# c++ - std::cout 防止功能中的段错误？

> ID：11848619
> 
> 赞同：0
> 
> 时间：2012-08-07T14:53:36.953
> 
> 标签：c++, map, segmentation-fault, cout

我正在使用有限元库进行一些计算，但遇到了一个奇怪的问题。我基本上有以下for循环：

```
 MeshBase::const_node_iterator  node_it = mesh.nodes_begin();
  for (unsigned int i=0;i<n_nodes;i++ , node_it++){
    const Node* node2 = *node_it;
    Point dumpoint( (*node2)(0), (*node2)(1), (*node2)(2));
    Number dumreal= (Number) mesh_data.get_data(node2)[0];

//    std::cout << dumreal <<std::endl;
    dummap[dumpoint] = mesh_data.get_data(node2)[0];

  } 
```

如果我用 cout 取消注释该行，它会起作用。否则我会遇到段错误。我打印什么都没关系：

```
std::cout << std::endl; 
```

重要的一点是，dummap 是一个**全局的**

```
std::map<Point,Number> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:05:41.427

使用 valgrind 表明问题出在我在其他地方分配的一些 char* 数组上。谢谢^^

# php - 更新 getChildrenTags 函数的参数以识别多个 ID 号

> ID：11848620
> 
> 赞同：0
> 
> 时间：2012-08-07T14:53:39.747
> 
> 标签：php

不确定您是否可以根据我提供的信息提供答案，但我会试一试。

我有这个查询，它根据标签 ID 号识别内容：

```
$whereClause .= 'item_active=1'
    .' AND date_display <= CURDATE()'
    .' AND '. build_LRP_where('tags',getChildrenTags($this, '17')); 
```

我需要这个 whereClause 变量来识别第二个标签 ID 号：（#37）。告诉这个变量识别两个标签 ID 号的正确语法是什么？

如果我没有提供有关这些功能的更多信息，我深表歉意，这就是我目前必须使用的全部内容。

# oracle11g - 在 Oracle 11g 中加入删除

> ID：11848622
> 
> 赞同：0
> 
> 时间：2012-08-07T14:53:47.547
> 
> 标签：oracle11g

我很难将我的 sybase 脚本转换为 Oracle 11g 脚本。我使用了翻译工具，但我对 Rowid 更加困惑。有没有更简单的方法可以在不使用 rowid 的情况下做到这一点，这样对于刚学习 Oracle 的我来说更容易消化？

**这是我的 Sybase 脚本：**

```
delete table_1       
    from table_1 a, table_2 b     
    where (select count(*) from table_2       
                where a.id = id       
                    and a.seq = seq       
                    and a.gcode = gcode       
                    and a.gtype = gtype) = 0       
    and a.id = b.id    
    and a.seq = b.seq; 
```

**以下是 Oracle SQL 开发翻译工具的结果：**

```
 DELETE table_1
   WHERE ROWID IN 
   ( SELECT a.ROWID
     FROM table_1 a,
          table_2 b
    WHERE ( SELECT COUNT(*) 
            FROM table_2 
             WHERE a.id = id
                  AND a.seq = seq
                  AND a.gcode = gcode
                  AND a.gtype = gtype ) = 0
         AND a.id = b.id
         AND a.seq = b.seq ); 
```

**使用 ID 而不是 RowId 写入是否安全？：** table_1 和 table_2 中的 ID 引用相同的 PK。Table_1 和 table_2 是彼此的镜像。

```
 DELETE table_1
   WHERE ID IN 
   ( SELECT DISTINCT a.ID
     FROM table_1 a,
          table_2 b
    WHERE ( SELECT COUNT(*) 
            FROM table_2 
             WHERE a.id = id
                  AND a.seq = seq
                  AND a.gcode = gcode
                  AND a.gtype = gtype ) = 0
         AND a.id = b.id
         AND a.seq = b.seq ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:48:22.757

Rowid 标识一行。两行不能有相同的rowid。如果表中的 id 是主键（如果是复合键则不是部分），那么您基本上可以通过使用 id 来实现相同的目的。然而，rowid 通常提供更快的访问，因为它引用行的物理位置并且不必使用索引来访问该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T12:13:51.783

小心分区。不同分区上可以有相同的rowid，所以上面关于rowid唯一性的说法对分区表无效

# android - 按名称加载可绘制对象

> ID：11848637
> 
> 赞同：1
> 
> 时间：2012-08-07T14:54:42.763
> 
> 标签：android, android-resources

我有以下代码：

```
if(d.getIcon() != null)
    {
        int resId = mContext.getResources().getIdentifier("cancel", "drawable","org.test.test.BouwSchermActivity"); 
        Drawable icon = mContext.getResources().getDrawable(resId);
        btn.setBackgroundDrawable(icon);
    } 
```

这是我的探险家：

![在此处输入图像描述](../Images/8683dcda08d0b2cf6cb37e56d2804cd9.png)

当我运行它时， resId 总是返回 0。
如果我使用 R.drawable.cancel 而不是 resId 它工作正常。

可能是什么问题呢？我已经尝试清理我的项目或使用“cancel.png”而不是“cancel”

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:58:30.277

尝试这个

```
int resId = getResources().getIdentifier("package.name.name:drawable/cancel", null, null);
btn.setBackgroundDrawable(resId); 
```

# android - 我是否必须设置代理才能在 android 中使用 Web 服务？

> ID：11848640
> 
> 赞同：0
> 
> 时间：2012-08-07T14:54:47.190
> 
> 标签：android, json, web-services, proxy

我正在一台与 LAN 中的服务器连接的计算机上工作。代理用于在我的计算机上访问互联网，现在我正在做关于使用 php Web 服务的项目，它提供 JSON 作为输出。我已经为它制作了一个应用程序，但它给出了空白回复，我读过一个堆栈溢出问题的答案，说这是因为代理。我是否必须在我的应用程序中设置代理设置。以及如何为这个问题设置代理。

我已经通过这一步设置了代理

1.  点击菜单
2.  点击设置
3.  点击无线和网络
4.  前往移动网络
5.  转到接入点名称
6.  在这里你会 Telkila Internet，点击它。
7.  在编辑接入点部分，输入“代理”和“端口”
8.  还提供用户名和密码，其余字段留空

互联网在模拟器中工作，但项目仍然没有显示。这是我的代码

```
package com.example.jsonexaple2;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import org.apache.http.util.ByteArrayBuffer;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;

public class Jsonexaple2 extends Activity {
    String archiveQuery = "http://www.archive.org/advancedsearch.php?q=Lotus&fl[]=date&fl[]=format&fl[]=identifier&fl[]=mediatype&fl[]=title&sort[]=createdate+desc&sort[]=&sort[]=&rows=10&page=1&output=json&callback=callback&save=yes";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.jsonexaple2);
        InputStream in = null;
        String queryResult = "";
        try {
         URL url = new URL(archiveQuery);
         HttpURLConnection urlConn = (HttpURLConnection) url.openConnection();
         HttpURLConnection httpConn = (HttpURLConnection) urlConn;
         httpConn.setAllowUserInteraction(false);
         httpConn.connect();
         in = httpConn.getInputStream();
         BufferedInputStream bis = new BufferedInputStream(in);
         ByteArrayBuffer baf = new ByteArrayBuffer(50);
         int read = 0;
         int bufSize = 512;
         byte[] buffer = new byte[bufSize];
         while(true){
          read = bis.read(buffer);
          if(read==-1){
           break;
          }
          baf.append(buffer, 0, read);
         }
         queryResult = new String(baf.toByteArray());
        } catch (MalformedURLException e) {
         // DEBUG
         Log.e("DEBUG: ", e.toString());
        } catch (IOException e) {
         // DEBUG
         Log.e("DEBUG: ", e.toString());
        }
        JSONObject jObject;
        try {
         jObject = new JSONObject(queryResult.replace("callback(", "")).getJSONObject("response");
         JSONArray docsArray = jObject.getJSONArray("docs");
         for (int i = 0; i < 10; i++) {
          if (docsArray.getJSONObject(i).optString("mediatype").equals("etree")) {
           String title = docsArray.getJSONObject(i).optString("title");
           String identifier = docsArray.getJSONObject(i).optString("identifier");
           String date = docsArray.getJSONObject(i).optString("date");
           System.out.println(title + " " + identifier + " " + date);
          }
         }
        } catch (JSONException e) {
         // DEBUG
         Log.e("DEBUG: ", e.toString());
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:29:34.197

是的，你必须。曾经，我在模拟器上遇到了同样的问题。我在谷歌上搜索，我发现这两个博客都不错。

*   [吉沙](http://www.gitshah.com/2011/02/android-fixing-no-internet-connection.html?showComment=1344511892100#c5603712472032022102)
*   [二造](http://blog.twozao.com/2010/12/connect-to-internet-in-android-emulator.html)

希望对您有所帮助。

# charts - 多道场饼图

> ID：11848647
> 
> 赞同：0
> 
> 时间：2012-08-07T14:55:02.600
> 
> 标签：charts, dojo

如何在同一个图表中添加 trow 饼图？如果我添加两个图，那么饼图都在中心。我需要一个在左侧，一个在右侧。

我需要将它们放在一个图表中，因为我想创建它的 SVG 图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:13:50.977

我也在寻找这个，到目前为止还没有找到解决方案。

但是我们可以通过在渲染后用javascript修改svg的'g'元素来定位饼图。

```
 var a=document.getElementsByTagName('svg')[0];
    var b=document.getElementsByTagName('g')[1];
    b.setAttribute('transform','translate(-598.25037,-71.249953)'); //put your own 
```

希望这有帮助。

# python - 如何一键运行 Python 脚本？

> ID：11848650
> 
> 赞同：6
> 
> 时间：2012-08-07T14:55:04.177
> 
> 标签：python, ubuntu, compilation, nautilus

抱歉，对于这个模糊的问题，实际上不知道如何问这个问题，也不知道它的正确术语。

如何在不通过终端的情况下运行 python 脚本/字节码/.pyc（任何已编译的 python 代码）。基本上在 Nautilus 上：“双击 python 脚本，它会运行”或“选择然后 [Enter]，它会运行！”。这至少是我的目标。

当我选中“允许将文件作为程序执行”时，然后在文件上按 [enter]。它给了我这个信息：

> 无法显示“/home/ghelo/Music/ **arrange** .pyc”。没有为 Python 字节码文件安装应用程序。是否要搜索应用程序来打开此文件？

顺便说一句，使用 Ubuntu 12.04 并且必须是 python 2，其中一个软件包在 python 3 上不起作用。如果在两个版本上的操作方式有差异，请包括它，如果不是太多，请不要问， 谢谢你。

我知道这没关系，但它是一个脚本自动重命名和排列我的音乐文件。相应地指导我，愚蠢的白痴。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:57:18.583

您应该使`.py`文件可执行并单击它们。这些`.pyc`文件不能直接运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T03:14:54.040

在 .py 文件的顶部添加“#!/usr/bin/env python”有效！嗯，虽然不欣赏弹出窗口，但没关系。:P

来自 PHPUG：

> 您不调用 pyc 文件。调用的是 .py 文件。Python 是一种解释型语言。
> 
> 使python可执行的更简单方法（已解释）：
> 
> 1）在你的python可执行文件（例如main.py）的顶部添加#！/usr/bin/env python（它使用默认的python - 例如，如果使用arch，那就是py3而不是py2。你可以明确告诉它通过用它的版本替换python来运行python2/python3：例如python2.7）
> 
> 2) 编写代码。如果直接调用脚本，__name__ 变量将等于字符串 '__main__'，因此成语：if __name__ == '__main__':。您可以添加与在此 if 块中直接调用的脚本相关的所有逻辑。这使您的可执行文件可导入。
> 
> 3) 使其可执行 'chmod +x main.py'
> 
> 4）调用脚本：./main.py args args

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-15T18:57:44.337

在 ubuntu 12.04 中安装启动器软件 步骤 1\. 将此命令粘贴到终端中，不带引号

> **“sudo apt-get install --no-install-recommends gnome-panel”**

步骤 2\. 现在通过 .. 启动它

> **gnome-desktop-item-edit --create-new ~/Desktop**

步骤：在命令文本框中写入 python path_of_your_pyc_file/filename.pyc

> **例如python /opt/test.pyc**

哈哈！！你已经完成了..恭喜:)

> 请在此处查看如何安装启动器的链接 [https://askubuntu.com/questions/64222/how-can-i-create-launchers-on-my-desktop](https://askubuntu.com/questions/64222/how-can-i-create-launchers-on-my-desktop)

# java - 我需要一个正则表达式来拆分 CSV 文件中的数千个

> ID：11848651
> 
> 赞同：0
> 
> 时间：2012-08-07T14:55:04.923
> 
> 标签：java, regex, csv

到目前为止，我已经测试了 2 个正则表达式，但只执行了我希望他们执行的部分操作...

*   `((?:[^,"']|"[^"]*"|'[^']*')+)`
*   `,(?=([^"]*"[^"]*")*[^"]*$)`

这是我要拆分的数据的示例...

*   `27230,419.37`
*   `27232,688.95`
*   `27238,409.4`
*   `27240,861.92`
*   `27250,176.4`
*   `27254,"1,144.16"`

由于如果数字为 1000 或更大，它很可能是从 CSV 上传的，因此引号内将有一个逗号。我遇到的问题是，当我这样做时，`value.split(',')`它会在引号之间分裂。我想要一个正则表达式来代替一堆 for 循环和 if 语句。任何帮助将不胜感激。

（我正在使用 Apex 所以这就是为什么它`'`不是`"`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:57:49.807

不要使用正则表达式，使用[CSV 解析器](http://commons.apache.org/csv/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T18:26:07.733

```
String input = "27254,\"1,144.16\"";
List<String> data = new ArrayList<String>();
boolean inQuotes = false;
boolean escaped = false;
StringBuilder buf = new StringBuilder();
for (int i = 0; i < input.length(); i++){
    char c = input.charAt(i);
    if (escaped){
        buf.append(c);
        escaped = false;
    } else if (c == '\\') {
        escaped = true;
    } else if (c == '"') {
        inQuotes = !inQuotes;
    } else if (c == ',' && !inQuotes){
        data.add(buf.toString());
        buf = new StringBuilder();
    } else {
        buf.append(c);
    }
}
data.add(buf.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:42:40.957

```
 for(String line : lines){    
        i++;

        if(skipFirst && i <= 1) continue;
        if(isBlank(line)) return error('Line ' + i + ' blank');
        pattern regex=pattern.compile(',(?=([^"]*"[^"]*")*[^"]*$)');

            cells=regex.split(line);
            string tmp0=cells.get(1).replace('"','');

        if(cells == null || cells.size() < 2) return error('Line ' + i + ' is either blank or contains only one cell');
        code = cells.get(0);
        if(code != null) code = code.trim();
        try{
            //If the amount is empty or null, assume it is 0
            if(cells.get(1) == null || cells.get(1) == ''){
                amount = 0;
            }
            else{
              if(!cells.get(1).contains('"')){
                    amount = Decimal.valueOf(cells.get(1));
              }else{
                    string tmp=cells.get(1).replace('"','');
                    amount = Decimal.valueOf(tmp.replace(',',''));
              }

            }
        }catch(System.TypeException e){
            return error('Line ' + i + ' contains invalid amount');
        }
        values.put(code,amount);

    } 
```

这篇文章是为了后代，因为我确实在salesforce内部使用正则表达式找到了一个解决方案……但是它很长而且可能没有必要。

# events - 如何使用 Corona SDK 监听连续触摸事件

> ID：11848652
> 
> 赞同：0
> 
> 时间：2012-08-07T14:55:04.847
> 
> 标签：events, rotation, lua, touch, coronasdk

这看起来很简单，但我不知道如何监控是否继续触摸。我想触摸显示器或图像，只要用户没有抬起手指就可以继续旋转图像。这是我拥有的代码片段：

```
local rotate = function(event)
if event.phase == "began" then   
  image1.rotation = image1.rotation + 1
end
return true
end

Runtime:addEventListener("touch", rotate) 
```

我希望在手指从屏幕上抬起之前发生旋转。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:14:17.030

这个怎么样？

```
local crate = ...
local handle
local function rotate(event)
    if event.phase == "began" and handle == nil then
        function doRotate()
            handle=transition.to(crate, 
                {delta=true, time=1000, rotation=360, onComplete=doRotate})
        end
        doRotate()
    elseif event.phase == "ended" and handle then 
        transition.cancel(handle)
        handle = nil
    end
end

Runtime:addEventListener("touch", rotate) 
```

这允许更好地控制旋转速率。如果您出于某种原因开始丢帧，则依赖 enterFrame 可能会出现问题。

此外，对句柄和非句柄的检查是为了适应多点触控。还有其他方法（和更好的方法）来处理这个问题，但它是权宜之计（如果你不使用多点触控，那根本不重要。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:49:28.207

我最终这样做了。如果您有更好的方法，请发布您的答案！

```
local direction = 0

function scene:move()
 crate.rotation = crate.rotation + direction
end        

Runtime:addEventListener("enterFrame", scene.move)         

local function onButtonEvent( event )
  if event.phase == "press" then
    direction = 1 -- ( -1 to reverse direction )
  elseif event.phase == "moved" then
  elseif event.phase == "release" then
    direction = 0
  end
  return true
end

local button = widget.newButton{
  id = "rotate_button",    
  label = "Rotate",
  font = "HelveticaNeue-Bold",
  fontSize = 16,
  yOffset = -2,
  labelColor = { default={ 65 }, over={ 0 } },
  emboss = true,
  onEvent = onButtonEvent
} 
```

# java - NoSuchElementException 读取/扫描输入

> ID：11848654
> 
> 赞同：2
> 
> 时间：2012-08-07T14:55:06.063
> 
> 标签：java

这是主要问题：

```
 java.util.NoSuchElementException: No line found
        at java.util.Scanner.nextLine(Unknown Source)
        at ExamAnalysis.main(ExamAnalysis.java:21)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at edu.rice.cs.drjava.model.compiler.JavacCompiler.runCommand(JavacCompiler.java:271) 
```

程序编译并运行。只是我要么得到 java.util.NoSuchElementException 以及我的五个 jother 错误，底部附近有 (answer.charAt(i) == char) 。这是我的程序：

```
import java.io.*;
import java.util.Scanner;

class ExamAnalysis
 {
   public static void main(String [] args) throws FileNotFoundException
   {
       Scanner keyboard = new Scanner(System.in);  
       System.out.println("Please type the correct answers to the exam questions, one right after the other: ");
       String answers = keyboard.nextLine();
       System.out.println("Where is the file with all the student responses? ");
       String responses = keyboard.nextLine();
       Scanner read = new Scanner(new File(responses));

        while (read.hasNextLine())
        {
         for (int i = 0; i <= 10; i++)
         {
          responses = read.nextLine();
          int p = 1;
          p += i;
          System.out.println("Student " + p + " responses: " + responses.substring(0,10));
           }
            System.out.println("Thank you for the data on 9 students. Here's the analysis: ");
            resultsByStudents(responses, answers);
            analysis(responses);
           }
        }

         public static void resultsByStudents(String responses, String answers)
          { 
           System.out.println ("Student #        Correct        Incorrect       Blank");
           System.out.println ("~~~~~~~~~        ~~~~~~~        ~~~~~~~~~       ~~~~~");
           int student = 0;
           int correct = 0;
           int incorrect = 0;
            int blank = 0;

         for (int i = 0; i <= 9; i++) 
         {
          for (int j = 0; j <= responses.length(); j++)
          {
           if ((responses.charAt(j)) == answers.charAt(j))
            correct++; 
           else if ((responses.charAt(j)) != answers.charAt(j))
            incorrect++;
           else 
            blank++;   
            }
             System.out.println(student + "        " + correct + "        " + incorrect + "        " + blank);
             student++;
        }    
      }

     public static void analysis(String responses)
     {
      System.out.println("QUESTION ANALYSIS   (* marks the correct response)");
      System.out.println("~~~~~~~~~~~~~~~~~");

     //stores the percentage of each choice chosen  
    double A = 0;
    double B = 0;
    double C = 0;
    double D = 0;
    double E = 0;
    double X = 0;
    // tallys every variable chosen per question

    for (int i = 0; i <= 10; i++) // go through all the questions
    {
     for (int j = 0; j <= responses.charAt(i); j++) //go through all the student responses
     {
      // variable that are being tallied
      int chooseA = 0;
      int chooseB = 0;
      int chooseC = 0;
      int chooseD = 0;
      int chooseE = 0;
      int chooseBlank = 0;
     //variables take percentage of choices that have been chosen from each student
      A = chooseA/9;
      B = chooseB/9;
      C = chooseC/9;
      D = chooseD/9;
      E = chooseE/9;
      X = chooseBlank/9;
      // variables that will print the asterisk with certain character of correct answer
      String a = "A";
      String b = "B";
      String c = "C";
      String d = "D";
      String e = "E";
      String blank = "blank";

      if (responses.charAt(j) == A)
       chooseA++;
      else if (responses.charAt(j) == B)
       chooseB++;
      else if (responses.charAt(j) == C)
       chooseC++;
      else if (responses.charAt(j) == D)
       chooseD++;
      else if (responses.charAt(j) == E)
       chooseE++;
      else 
       chooseBlank++; 

     System.out.println("Question #" + i);
      if (answers.charAt(i) == 'A') a = "A*"; // answers cannot be resolved(I already made it a  global variable in my main method.)
      else if (answers.charAt(i) == 'B') b = "B*";// answers cannot be resolved
      else if (answers.charAt(i) == 'C') c = "C*";// answers cannot be resolved
      else if (answers.charAt(i) == 'D') d = "D*";// answers cannot be resolved
      else if (answers.charAt(i) == 'E') e = "E*";// answers cannot be resolved
      System.out.println(a + "        " + b + "        " + c + "        " + d + "        " + e + "        " + blank);
    System.out.println (chooseA + "        " + chooseB + "        " + chooseC + "        " + chooseD + "        " + chooseE + "        " + chooseBlank );
    System.out.println (A + "        " + B + "        " + C + "        " + D + "        " + E + "        " + X);
  }
} 
```

} }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:12:26.827

```
while (read.hasNextLine())         
{          
    for (int i = 0; i <= 10; i++)          
    {       
        responses = read.nextLine();
        int p = 1;           
        p += i;           
        System.out.println("Student " + p + " responses: " + responses.substring(0,10));            
    }             
    System.out.println("Thank you for the data on 9 students. Here's the analysis: ");             
    resultsByStudents(responses, answers);             
    analysis(responses);            
    }         
} 
```

你这里的逻辑让你困惑。read.nextLine(); “将此扫描仪前进到当前行并返回已跳过的输入。此方法返回当前行的其余部分，不包括末尾的任何行分隔符。位置设置为下一行的开头。”

所以你是说，它有一条线吗？如果是这样，请阅读接下来的 10...嗯...11 行，这不是您想要的。你不知道这一点是否有 11 行。不知道那个文本文件长什么样，但你会想重组这部分，要么说，“虽然它有下一行”，或者“阅读 11 行”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:56:57.327

删除 for 循环可能会解决问题。您仅通过使用检查一次，但在 for 循环中`while(hasNextLine() )`调用10 次。`read.nextLine()`

```
for (int i = 0; i <= 10; i++)
         {
          responses = read.nextLine();
         .......
           } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:39:07.100

```
int i = 0;
int numberOfStudents = 9;
while (i < numberOfStudents && read.hasNextLine()){
    responses = read.nextLine();
    i++;
    System.out.println("Student " + i + " responses: " + responses.substring(0,10));
}
System.out.println("Thank you for the data on "+ numberOfStudents +" students. Here's the        analysis: ");
resultsByStudents(responses, answers);
analysis(responses); 
```

i < numberOfStudents ：进行所需的插入次数

read.hasNextLine() ：检查是否有来自控制台的输入。如果不是，程序等待输入。

```
for (int i = 0; i <= 10; i++) 
```

从 0 计数 -> 10 = 11 名学生

# sql - TSQL 按 1 列中的重复值计数分组，按第 2 列和第 3 列中的值限制结果

> ID：11848660
> 
> 赞同：1
> 
> 时间：2012-08-07T14:55:19.250
> 
> 标签：sql, tsql

我下面的查询返回计数大于 1 的所有记录。

我需要进一步定义查询以删除所有像 ProdNo 具有 TYPE DR 的记录和/或如果 PN 有 91535

示例 137818 由于有 DR，我不想显示任何记录。
示例 137763 由于有 91535，我不想显示任何记录。

```
----------------------------------------------------------------------------
ProdNo  Type    PN  Timestamp
137818  DF  91020       2012-08-07 00:54:19.000
137818  DR  91020       2012-08-07 07:57:51.000
137764  DF  91020       2012-08-05 23:13:34.000
137764  DF  91020       2012-08-05 23:25:20.000
137763  DF  91020       2012-08-05 22:58:36.000
137763  DF  91535       2012-08-06 02:26:38.000
---------------------------------------------------------------------------- 
```

示例 137764 由于没有 DR 或 91535，我希望显示 1 条记录。

```
----------------Desired-Results---------------------------------------------
ProdNo  Type    PN  
137764  DF  91020
---------------------------------------------------------------------------- 
```

查询根据计数查找 Prod 记录

```
declare @usetime datetime;
set @usetime =  ( dateadd( dd, -2, getdate() ))
SELECT ProdNo, Type, PN
  FROM [ProdStat].[dbo].[Prod]
  -- limit results to ProdNo's < 200000 for Products numbers up to 1999999 and > @usetime
  WHERE Timestamp > @usetime AND ProdNo < '200000' and ProdNo IN(
  select ProdNo
 FROM [ProdStat].[dbo].[Prod]
 group by ProdNo
 having (COUNT(ProdNo) >1)
 )
 order by ProdNo desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:05:27.620

这应该为您的示例数据执行此操作：

```
declare @usetime datetime; 
set @usetime =  ( dateadd( dd, -2, getdate() )) 
SELECT ProdNo, Type, PN 
  FROM [ProdStat].[dbo].[Prod] 
  -- limit results to ProdNo's < 200000 for Products numbers up to 1999999 and > @usetime 
  WHERE Timestamp > @usetime AND ProdNo < '200000' and ProdNo IN( 
     select ProdNo 
     FROM [ProdStat].[dbo].[Prod]
      group by ProdNo 
      having (COUNT(ProdNo) >1) 
  ) 
  AND ProdNo NOT IN (
     SELECT ProdNo FROM [ProdStat].dbo.Prod WHERE Type = 'DR' OR PN = 91535
  )
  order by ProdNo desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:14:26.483

这是一个比较简单的方法：

```
declare @usetime datetime;
set @usetime =  ( dateadd( dd, -2, getdate() ))
SELECT ProdNo, Type, PN
FROM [ProdStat].[dbo].[Prod]
-- limit results to ProdNo's < 200000 for Products numbers up to 1999999 and > @usetime
WHERE Timestamp > @usetime AND ProdNo < '200000' and
      ProdNo IN (select ProdNo
                 FROM [ProdStat].[dbo].[Prod]
                 group by ProdNo
                 having COUNT(ProdNo) >1) and
                        max(case when type = 'DR' then 1 else 0 end) = 0 and
                        max(case when PN = 91535 then 1 else 0 end) = 0
                )
order by ProdNo desc 
```

# forms - 值未在 .jsp 页面中发布

> ID：11848661
> 
> 赞同：0
> 
> 时间：2012-08-07T14:55:21.110
> 
> 标签：forms, jsp, post

这是我正在测试的页面的代码：

不要担心起始页和结束页代码有效。

```
<% startpage(out); %>

<%
String newusers = request.getParameter("users");
int i = 0;
if (newusers != null){
    while(i<10)
               {
    out.println("<h2>newusers</h2>");
    i++;
    }
}
%>

<form action="guestAdder.jsp" method=post>
    <textarea name=users rows=20 cols=100>
    </textarea>
    <p>
        <input type=submit name=doadd value="Add Users">
</form>
<% endpage(out); %> 
```

它是 HTTP 状态 500 - java.lang.NoClassDefFoundError: org/apache/jsp/guestAdder_jsp（错误名称：org/apache/jsp/guestadder_jsp）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:13:47.897

我猜你已经将你的jsp 文件从guestadder.jsp 重命名为guestAdder.jsp。您在 Windows 上吗（文件名不区分大小写）？看起来从 JSP 页面生成的 servlet 类正在覆盖旧的小写命名文件，但该文件没有被重命名，即它保持其旧名称 guestadder_jsp.class

清除用于缓存从 JSP 生成的 servlet 类的目录 - 在 Tomcat 中，这是 tomcat/work

# forms - 表单导航项未向所有用户显示

> ID：11848662
> 
> 赞同：1
> 
> 时间：2012-08-07T14:55:28.983
> 
> 标签：forms, navigation, dynamics-crm-2011

我为联系表单创建了一个左侧表单导航项 (NavBarItem)。

```
<NavBarItem Id="navLink{a9b44918-671d-9ed7-5266-721c87b25297}" Sequence="10" Area="Info" Icon="$webresource:ft_CKYC16" Url="$webresource:ft_/ContactSummary">
    <Titles>
       <Title LCID="1033" Text="Client Summary" />
    </Titles>
 </NavBarItem> 
```

此项目显示 Web 资源，并且在以管理员用户身份查看时可以正常工作。

但是，当作为普通用户查看时，不会显示导航项。

这可能是权限问题。

谁能指出我正确的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:11:49.863

答案确实是安全设置。

请参阅下面的文章。

[http://orwin.ca/2011/11/09/crm-2011-left-navigation-label-changes-not-visible-by-users/](http://orwin.ca/2011/11/09/crm-2011-left-navigation-label-changes-not-visible-by-users/)

干杯

西蒙

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:28:11.387

I'll assume that you added the link via Form customization screen then selected Navigation > Insert > Navigation Link. I'm not sure there is any other supported method anyway, but worth me checking.

If this is true, check that:

*   The change (i.e. the contact entity and your web resource) is published
*   The user has at least Read permissions on the Web Resource entity (Settings > Admin > Security Roles > Customization tab > Web Resource)

# haskell - 在 Haskell 中调用函数前缀与中缀

> ID：11848668
> 
> 赞同：3
> 
> 时间：2012-08-07T14:55:42.583
> 
> 标签：haskell, factorization

我一直想学习 Haskell，所以最近我开始解决 ProjectEuler 问题。在编写以下因式分解代码时，我注意到调用`(/ n)`返回一段`Float`时间`(n `div`)`返回一个`Int`. 我认为中缀符号只是 Haskell 中的语法糖？有人可以解释发生了什么吗？我也很感激任何意见/建议/改进，谢谢。

```
 import Data.List (sort)

    factor :: Int -> [Int]
    factor 0 = [1..]
    factor n =
        let f1 = [f | f <- [1..limit], n `mod` f == 0]
                where limit = ceiling $ sqrt $ fromIntegral n
            f2 = map (n `div`) f1   --vs. map (/ n) f1
        in sort $ f1 ++ f2 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T15:03:36.737

`div`并且`/`是两个不同的功能：

*   `/`在类[Fractional](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3a-47-)中定义，其含义是乘法的逆运算。
*   `div`[在Integral](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3adiv)类中定义，其含义是将整数除以截断向负无穷大。

你是对的，中缀符号只是一种语法糖。表达式`x / y`与 相同`(/) x y`，也`div x y`与 相同`x `div` y`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T15:03:46.997

没有什么特别的事情发生。该`div`函数是类的一部分，并且根据您的显式类型签名`Integral`更具体地推断为。运算符是类`Int`的一部分。这是两个不同的功能，一个不是另一个的语法糖！`/``Fractional`

# objective-c - 使用外部库

> ID：11848670
> 
> 赞同：-1
> 
> 时间：2012-08-07T14:56:07.787
> 
> 标签：objective-c, xcode, freetds

我正在开发我的第一个objective-c 程序，并希望包含一个我找到的外部库。我对编程相当陌生，并且从未真正使用过尚未包含的库。

我只是将文件夹拖到 Xcode 中吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:07:23.473

将其拖入项目并使用

```
#import "TheLibrary/somefile.h" 
```

在您需要使用它的任何文件中。

# jquery - 当类在跨度中时jquery显示ul

> ID：11848673
> 
> 赞同：1
> 
> 时间：2012-08-07T14:56:14.973
> 
> 标签：jquery, html-lists, html

我正在研究一个小的 jQuery 元素，在 Stackoverflow 和谷歌的帮助下我已经完成了很多工作，但是有一个小问题我似乎无法弄清楚。试图用 CSS 解决它，但它没有去任何地方。

我有该项目的 jsFiddle：http: [//jsfiddle.net/PcWjA/2/](http://jsfiddle.net/PcWjA/2/)

一切正常，加/减按钮工作，活动类贯穿跨度。但是我仍然缺少的是，当您在数字 7 上然后按 + 按钮使其变为 8 我希望它显示 ul 项目。当你下降到 7 时， ul 项目再次隐藏。

就像我说的，我尝试了一些 CSS 解决方案，添加类/删除类等，但这似乎不起作用。所以我在想，当“spanval_active”类在“更多”类中时，是否可以显示隐藏的ul。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:00:01.203

看看，如果这是你想要的：http: [//jsfiddle.net/PcWjA/3/](http://jsfiddle.net/PcWjA/3/)

所以解释一下：你已经得到了当前活动的元素（存储在`hour`变量中），所以我们需要检查当前活动的元素是否高于 7 或更低。如果它更高，那么我们需要显示列表，我们通过`.show()`在列表上调用 jQuery 方法来做到这一点，如果它更低，我们隐藏列表`.hide()`

```
 if (hour > 7) {
        $('.more .hour_dropdown').show();
    } else {
        $('.more .hour_dropdown').hide();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:05:13.127

尝试将您的`update_hour`功能更改为以下内容：

```
function update_hour()
{
    if (hour == 7) {
        $(".hour_dropdown").fadeOut(200); // use hide() for no animations
    }
    else if (hour == 8) {
        $(".hour_dropdown").fadeIn(200); // use show() for no animations
    }
    $('.spanval').removeClass('spanval_active');

    $('.spanval').eq( hour - 1 ).addClass('spanval_active');

    $('#hourvalue').val( hour );
} 
```

[jsfiddle](http://jsfiddle.net/PcWjA/4/)

# html - box-sizing + 子对象

> ID：11848677
> 
> 赞同：0
> 
> 时间：2012-08-07T14:56:28.410
> 
> 标签：html, css, parent-child

今天这让我很烦。我想要做的是使用 box-sizing 方法使用 100% 的父对象减去边距（比如 10 像素）来控制子对象的大小。

我知道可以将 box-sizing 函数与父级和 10 px 填充一起使用，然后将子级设置为 100%，但我想知道是否可以反过来。

这就是我所拥有的......目前所发生的一切是子框100％适合父对象，边距不可见。

```
<div id="Parent">
   <div id="Child">
   </div>
</div> 
```

和...

```
#Parent
{
height:500px;
width:500px;
background-color:red;
}

#Child
{
-webkit-box-sizing: border-box; 
-moz-box-sizing: border-box;   
box-sizing: border-box;
margin-top:10px;
margin-left:10px;
width:100%;
height:100%;
background-color:green;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:21:22.877

这是目前唯一安全的方法。作为替代方案，您可以使用诸如 calc() 之类的 css3 值表达式，但并非所有浏览器都支持它。

[http://caniuse.com/#search=calc](http://caniuse.com/#search=calc)

您可以在 w3c 的“CSS3 值”页面[http://www.w3.org/TR/css3-values/#calc0上找到一些示例](http://www.w3.org/TR/css3-values/#calc0)

# java - 如何在 Android 上以相同的方法获取和返回用户输入

> ID：11848684
> 
> 赞同：1
> 
> 时间：2012-08-07T14:57:01.213
> 
> 标签：java, android, android-alertdialog

（我知道这个问题已经以多种不同的方式提出，感谢您考虑我的具体情况）。

我正在实施第 3 方库。其中一种方法需要用户输入，**该方法的返回值需要是用户的响应**。具体来说，这个方法需要弹出一个警告对话框。用户将有 3 个按钮可供选择，并且此方法的返回值必须是标识用户单击的按钮的 int。

我得到这个工作的唯一方法是从 AsyncTask 调用这个警报方法，然后从那里调用 runOnUIThread 来弹出警报，然后等待响应。我被卡住的地方是从 UI 线程调用此警报方法的情况。在这种情况下是否有类似的工作来等待响应？

这就是我的代码当前的样子……只要从 AsyncTask 调用此方法，我就可以开始了。但是，我需要能够从 UI 线程调用它。

```
public int getInput(final Object [] args)
{
    getActivity().runOnUiThread(new Runnable(){

        @Override
        public void run()
        {
            buildDialog(args).show();
        }
    });

    try
    {
        synchronized(this)
        {
            wait();
        }
    }
    catch (Exception ex)
    {
        return 0;
    }
    return m_Result;
}

public void setRetValue(int result)
{
    m_Result = result;
    synchronized(this)
    {
        notify();
    }
} 
```

（setRetValue 从对话框中按钮的 OnClickListeners 中的 onClick 调用。）

# linker - 增量链接真的可以减小图像的大小吗？

> ID：11848686
> 
> 赞同：0
> 
> 时间：2012-08-07T14:57:09.950
> 
> 标签：linker

根据[MSDN](http://msdn.microsoft.com/en-us/library/4khtbfyf.aspx)，带有“增量链接”的图像比没有图像更大：

> 增量链接的程序在功能上等同于非增量链接的程序。但是，因为它是为后续的增量链接准备的，所以增量链接的可执行 (.exe) 文件或动态链接库 (DLL) 比非增量链接的程序要大...

我在发布模式下做了一些测试（只是为了测试这个功能的影响），我没有看到生成的图像大小有差异。这要怎么解释？MSDN信息错了吗？有没有人试过这个并看到这个链接功能对（发布的）图像文件有什么影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:08:59.533

您提供的报价说增量链接的程序**更大**，而不是更小。

大小会增加，因为并非每次都重新链接所有可执行文件，因此一些旧代码保留在可执行文件中并且不再使用。下一个完整（非增量）构建将删除不再使用的代码。在实际发布之前，您应该始终进行完整的构建（非增量），以消除无关的噪音（并减少可执行文件的大小）。

没有办法提前知道具体的大小差异，因为它取决于应用程序中的确切代码、更改的内容、更改的次数、链接器对是否可以进行更改的选择增量与否，自上次完整构建以来已经过去了多长时间，以及许多其他可变信息。

# ruby - Kaminari 和 Capybara 冲突

> ID：11848688
> 
> 赞同：4
> 
> 时间：2012-08-07T14:57:12.700
> 
> 标签：ruby, ruby-on-rails-3, rspec, capybara, kaminari

我似乎在 capybara 的 page 方法和 Kaminari 的 page 方法之间存在某种冲突。

这就是我的猜测，无论如何，这是错误：

```
Failure/Error: before { sign_in_as user }
     ActionView::Template::Error:
       wrong number of arguments (1 for 0)
     # ./app/models/feed.rb:9:in `microposts'
     [Rest of the backtrace] 
```

代码示例：

```
class Feed
    def microposts(opts = { urgent: false })                                                                
      urgent = opts[:urgent]                                                                                
      p Microposts.where(id: 1).page # <Capybara::Session>                                                                         
      p Microposts.where(id: 1).page(1) # Error
    end
end 
```

如果我删除分页，测试工作正常。

我不明白这是怎么可能的，我猜 Capybara 正在将“page”方法添加到 Object 范围，但是随着 Kaminari 将其`page`方法添加到 ActiveRecord::Base （如果我没记错的话）它应该覆盖 Capybara 的方法。

我没有看到有人遇到这种麻烦，怎么可能？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-15T15:22:44.433

我对 Capybara 2.x 有同样的问题

我的功能规格在`spec/feature directory`. 我通过阅读 Capybara 文档意识到，如果您使用 features 目录，则无需将其包含`Capybara::DSL`在您的目录中。`spec_helper`它已经包括在内。

`include Capybara::DSL`如果您在其中会给出一个警告`spec_helper`，它会污染全局命名空间，这正是为什么这是一个坏主意！

[查看 Capybara 上的这个 rspec-rails 页面了解详细信息](https://github.com/rspec/rspec-rails/blob/master/Capybara.md)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T03:33:18.407

这是一个小技巧，但我能够通过在我的规范中取消定义方法来解决问题（水豚“污染”对象空间）：

```
# Capybara adds a 'page' method to the Object class which conflicts with the Kaminari scope
# Remove it here to allow things to work
Object.send :undef_method, :page 
```

我已经追溯了发生这种情况的地方，基本上是：

1.  #page 方法来自 Capybara::DSL
2.  Capybara::DSL 方法通过 RSpec 的 #configure.include 方法包含在 Object 类中（参见 lib/capybara/rspec.rb）。
3.  然后 RSpec 将它包含在“组”中，但是我相信这是它放入 Object 的地方。

这里的解决方案可能只是更改 Capybara 中方法的名称，但我想这不是我愿意做出的决定:)

# html - 如何最好地将 CSS3 过渡设置为无？

> ID：11848701
> 
> 赞同：39
> 
> 时间：2012-08-07T14:57:55.860
> 
> 标签：html, css, properties, css-transitions

我将如何使 CSS 转换在媒体查询中或在任何其他情况下不起作用？例如：

```
@media (min-width: 200px) {
    element {
        transition: width 1s;
    }   
}

@media (min-width: 600px) {
    element {
        transition: none; // SET TO NO TRANSITION
    }   
} 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-08-07T17:34:20.440

您可以将**转换属性**设置为**none**。这样，将不会应用任何过渡效果。

像这样：

```
-webkit-transition-property: none;
-moz-transition-property: none;
-o-transition-property: none;
transition-property: none; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-12-14T10:26:04.730

**将transition-duration**设置为**0s比将****transition-property**设置为**none**更好。

 ****这是跨浏览器的代码：

```
-webkit-transition-duration: 0s;
-moz-transition-duration: 0s;
-o-transition-duration: 0s;
transition-duration: 0s; 
```

为什么这样更好？因为默认情况下，符合标准的浏览器（例如 Firefox）将每个元素的**transition-property**设置为**all**。他们还将**transition-duration**设置为**0s**。因此，通过将**transition-duration**设置为**0s**，您可以最接近地匹配浏览器定义没有过渡的元素的方式。

将**转换持续时间**设置为默认**0**会使**转换属性**无关紧要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T15:03:29.237

```
transition: width 0s 
```

应该做的伎俩 - 因为它基本上是说有一个过渡，但 0s 太快了，看不到它！****

# javascript - Win8 Metro App setInterval Javascript

> ID：11848702
> 
> 赞同：1
> 
> 时间：2012-08-07T14:57:59.263
> 
> 标签：javascript, microsoft-metro

我是构建 Metro 应用程序的新手。我只想每秒创建一个新的 Rectangle 并从位置 x = 0 开始

但是使用我的代码，似乎在绘制第一个矩形之前调用了 x+=10 。但我不知道我怎么能改变这个..有人可以帮我吗？

```
(function () {
    "use strict";

    var app = WinJS.Application;
    var activation = Windows.ApplicationModel.Activation;
    WinJS.strictProcessing();

    var x = 0;
    var y = 0;

    function Clock(context) {

        context.fillRect(x, y, 9, 9);
        context.fillStyle = "red";

        x += 10;
    }

    app.onactivated = function (args) {
        if (args.detail.kind === activation.ActivationKind.launch) {
            if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
                var canvas = document.getElementById("uhr");
                var context = canvas.getContext("2d");

                setInterval(function () { Clock(context) }, 1000);

            } else {

            }
            args.setPromise(WinJS.UI.processAll());
        }
    };

    app.oncheckpoint = function (args) {

    };

    app.start();
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:15:43.040

我已经通过执行 context.fill(); 解决了它 在做 x+=10;.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:12:43.160

尝试将 x 和 y 的值存储在 Clock() 中的临时和本地范围变量中。

```
function Clock(context) {
    var tmpX = x;
    var tmpY = y;
    context.fillRect(tmpX, tmpY, 9, 9);
    context.fillStyle = "red";

    x += 10;
} 
```

# actionscript-3 - as3 对象值 NativeText

> ID：11848703
> 
> 赞同：1
> 
> 时间：2012-08-07T14:58:02.033
> 
> 标签：actionscript-3

更新 - 如果有人试图用 NativeText 一个 StageText 包装器返回文本值。他们需要编辑；

[https://github.com/cantrell/StageTextExample/blob/master/src/NativeText.as](https://github.com/cantrell/StageTextExample/blob/master/src/NativeText.as)

添加公共获取功能 -

```
public function get text():String {
return this.st.text;
} 
```

那么您可以正常返回 NativeText 值 -

nt.text

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:41:21.827

我关注了@shaunhusain 评论中的链接，并阅读了一些内容：

NativeText是他写的一个包装器，可以看github上的类：

[https://github.com/cantrell/StageTextExample/blob/master/src/NativeText.as](https://github.com/cantrell/StageTextExample/blob/master/src/NativeText.as)

如果你读过这个类，你会注意到它有一个设置文本的 setter 方法，但它没有定义一个 getter。这解释了您的错误消息：

> 通过静态类型 NativeText 的引用访问可能未定义的属性文本

合乎逻辑的解决方案是添加 getter 方法。如果您阅读 @shaunhusain 链接到的博客文章中的评论，您会发现其他人也遇到了同样的问题。这似乎对他们有用（我没有尝试过）：

```
public function get text():String
{
    return this.st.text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T08:25:05.450

以您上面描述的方式添加吸气剂对我有用:)

但是，我确实觉得我必须谨慎，因为 Cantrell 没有放入 getter 方法可能是有原因的。

# iphone - 单元测试中的“架构 i386 的未定义符号”

> ID：11848705
> 
> 赞同：5
> 
> 时间：2012-08-07T14:58:07.780
> 
> 标签：iphone, xcode, unit-testing, ziparchive, undefined-symbol

只有当我尝试构建 iPhone 静态库的单元测试时，我才会收到以下错误：

```
Undefined symbols for architecture i386:
  "std::terminate()", referenced from:
      -[ZipArchive dealloc] in libMyProject.a(ZipArchive.o)
  "___gxx_personality_v0", referenced from:
      Dwarf Exception Unwind Info (__eh_frame) in libMyProject.a(ZipArchive.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

构建原始项目工作正常。

我能错过什么？

需要注意的是，ZipArchive是一个.mm文件，它引用了*libz.dylib*框架，在原始项目和测试项目中都有引用。

此外，通常的构建设置嫌疑人具有以下值：

**框架搜索路径**：“$(SDKROOT)/Developer/Library/Frameworks”“$(DEVELOPER_LIBRARY_DIR)/Frameworks”

**其他链接器标志**：-all_load -lxml2 - ObjC

**标头搜索路径**：/usr/include/libxml2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T17:25:50.247

我在这篇[文章](http://code.google.com/p/ziparchive/issues/detail?id=4)中找到了解决方案。

出于某种我无法理解的原因，`ZipArchive.mm`当在另一个项目（在本例中为测试项目）中使用静态库时，编译器需要将文件重命名为 .m 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T15:40:42.770

这通常是由于以下两个原因之一：

1.  您将框架或系统标头直接复制到项目文件夹中，而不是通过 XCode*将其与引用一起添加*
2.  您安装了多个 SDK，并且引用了错误的框架或标头。大多数框架不是“开发者”框架。SenTestingKit.framework 是开发者框架的一个例子，UIKit.framework 不是。奇怪的是，开发人员框架存在两个不同的地方。在 XCode 的 /Developers/~ 文件夹中，以及 SDK Developers 文件夹中。默认行为是引用 XCode 的开发者文件夹中的框架。要覆盖它，请在“框架搜索路径”中输入“$(SDKROOT)/Developer/Library/Frameworks”。或者在导入的头文件或库的情况下，转到相应的字段并添加“$(SDKROOT)/...”

确保所有目标的搜索路径都~~相同：~~![搜索路径](../Images/1021ca1c0f9b8a0e270db6c0cfcdd916.png)

如果您使用多个 SDK，可能会添加错误版本的开发人员框架（如 SenTestingKit）。在 Framework Search Paths 下手动输入正确的

> $(SDKROOT)/开发者/库/框架

![在此处输入图像描述](../Images/76e6564215e19faf3c83498fc140568f.png)

# html - 文本以 HTML 格式显示在图片上

> ID：11848707
> 
> 赞同：1
> 
> 时间：2012-08-07T14:58:11.913
> 
> 标签：html, css, image, text

我尝试用图像和文本一起制作**表单的提交按钮。**我尝试了几种方法，但我遇到了问题。HTML：

```
<form action="www.page.html" method="post"> 
some text
<span>Check The Page</span>
<input type="image" src="check.png" name="Check" alt="Check" width="161" height="30"> 
```

CSS：

```
#reservation span{
display: inline-block;
z-index: 100;
}

#reservation input{
margin-top: -30px;
z-index: -100;
} 
```

问题，z-index 不起作用。图片高于文字。如果我用 div 元素做其他方式。HTML：

```
<form action="www.page.html" method="post"> 
some text
<input type="submit" id="image-button" >Check The Page</input>  
    <div class="check">
      <input type="image" src="check.png" name="Check" >      
  <span>Check</span>
</div> 
```

CSS：

```
.check { 
   margin-left: 10px;
   position: relative; 
   width: 100%; /* for IE 6 */
}

.check span { 
   position: absolute; 
   left: 0; 
   margin-top: 5px;
   margin-left: 10px;
   color: #ffffff;
   font-family: Calibri;
   font-size: 16px;
   font-weight: bold;
   font-style: italic;
   text-shadow: #222222 1px 1px 0;
   width: 100%; 
} 
```

然后图像和文本看起来不错，但是只有按钮的侧面用作表单的链接，而按钮的中间是文本层。有什么帮助吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:17:05.203

```
<button type="submit">
<img src="check.png" alt="Check"/>
<br/>
Check The Page
</button> 
```

要将文本放在图像上，您可以尝试下面的代码并更改左侧和顶部的值。另外，请注意，我个人对下面的代码不满意，我更喜欢的替代方法是编辑图像以使文本成为图像的一部分，以防文本不经常更改。

```
<button type="submit">
<img src="demo.png" alt="Check"/>
<span style="position: absolute; left: 20px; top: 16px;">Check The Page</span>
</button> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:28:19.860

```
<input type="submit" value="Check The Page" id="image-button" style="background-image:url(check.png);height:500px;width:500px;" ></input> 
```

用 check.png 的大小替换 height 和 width .. 或者如果你想要一个固定按钮大小的图像拉伸..add 'background-size:100%' to css .. :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T15:29:31.123

```
#image-button
{
    background-image: url('check.png');
    background-position: left;
    background-repeat: no-repeat;
    background-color: transparent;
    border: 0px;
    width: 161px;
    height: 30px;
    text-align:right;
}

<input type="submit" id="image-button" value="Check the page" /> 
```

您必须弄乱图像的背景位置、高度和宽度以及文本对齐才能获得所需的定位，但这应该可以。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T11:51:40.960

试试这个 ：

```
<input type="submit" value="Check The Page" id="image-button" style="background-image:url(check.png);height:500px;width:500px;" ></input> 
```

# ruby-on-rails - 哪个给我更好的性能 Activerecord find_by 或在哪里？

> ID：11848708
> 
> 赞同：2
> 
> 时间：2012-08-07T14:58:14.317
> 
> 标签：ruby-on-rails, activerecord

假设我的模型（帐户）具有以下列 account_id、user_id、party_id、日期和名称

我执行：

```
Account.find_by_account_id_and_user_id_and_party_id_and_date_and_name(1,2,3,"2012-03-12","Venus") 
```

和

```
 Account.where(:account_id => 1, :user_id => 2, :party_id => 3,:date => "2012-03-28",:name => "Venus").limit(1).first 
```

哪个会给我更好的表现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T15:25:36.510

`where`为您提供稍微更好的性能。`find_by`是通过`method_missing`魔术实现的；`method_missing`需要先调用对象的方法表以查看是否存在现有方法，如果没有则调用`method_missing`，而`where`只是正确找到方法。

要查看这方面的实际基准，[请查看这篇文章](http://www.alef1.org/ruby/method_missing/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:25:02.707

他们输出的数据库查询在两个示例中都是相同的。因此，就这种性能而言，它们是相等的。但是，前者在您第一次使用它时需要 method_missing 查找和动态方法定义，而且对我来说，它更难阅读，并且不是一个很好的方法来处理具有这么多参数的查询。

我会根据个人的可读性选择“where”，但它们都会输出相同的选择查询，所以无论如何它真的无关紧要。

# java - 使用 java.util.Scanner 是否有效地逐行读取 Stream？

> ID：11848709
> 
> 赞同：0
> 
> 时间：2012-08-07T14:58:16.360
> 
> 标签：java, io

只创建一个[Scanner](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)，然后在其上调用[nextLine](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)是相当紧凑的。但它和使用 BufferedReader 一样有效吗？（在 1.6 中是什么情况？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:48:57.170

`BufferedReader`如果您只想读取每一行，那么效率会更高，因为这就是它所做的一切。 `Scanner`也解析该行，并且具有较小的缓冲区（尽管这很少成为问题），因此至少在理论上，效率较低，但如果您想要的只是简单的东西，则比设置自己的解析更容易使用（所以`nextDouble()`，`nextInt()`使用 a 等更容易，但使用 a可能会更好地进行`Scanner`逐行阅读`BufferedReader`

此外，谷歌是你的朋友[Scanner vs. BufferedReader](https://stackoverflow.com/questions/2231369/scanner-vs-bufferedreader)

# ios - 应用内购买沙盒环境循环

> ID：11848714
> 
> 赞同：18
> 
> 时间：2012-08-07T14:58:32.773
> 
> 标签：ios, in-app-purchase

我在我的生产应用程序中进行了应用程序内购买，并且我正在添加一个新项目进行销售。

但是，我无法在沙盒环境中测试新的应用内购买。我的购买显示正确。恢复作品。但是，如果我购买了商品，则会提示我登录。我使用测试用户帐户登录（我有 4 个大约一个月前工作并且处于活动状态）。然后我被定向到 AppStore，在那里我会弹出一个对话框，上面写着：[Environment: Sandbox] with cancel or continue。当我继续时，系统会提示我输入 Apple id 密码，我使用该密码并按 OK。它说“正在加载...”几秒钟，然后弹出窗口再次显示 [Environment Sandbox] 取消/继续。

我经历了大约5次。
我已经尝试过我之前用来测试的帐户我已经创建了一个新用户，我尝试在大约一个月前都可以使用的多台设备上进行测试。我已经重置了我的设备。

同时，我已经能够测试我的功能并且没问题 - 但我无法在发布更新之前进行我想做的端到端购买/测试。

有没有人见过类似的东西？我正在寻找任何建议。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T18:20:17.147

好的。我已经想通了。这是我的测试帐户。由于我使用该帐户并通过设置-> App Store 登录，因此我使用信用卡和电子邮件通知进行注册。我使用了一个以前创建但尚未“激活”的旧帐户，并且它有效。因此，关键是不要通过“设置”->“商店”登录 - 保持退出状态。然后使用仅在 iTunes Connect 上创建但从未激活的测试帐户登录。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-03T22:18:44.197

我也有一段时间遇到这个问题，但对我来说，解决方案是别的东西：我一直收到那个提示，而且我之前测试会话中的所有 SKPaymentTransactions 都在这个方法中重新出现：

`paymentQueue:updatedTransactions:`.

有些正在完成（并弄乱了我当地的采购记录），有些则一遍又一遍地失败。这是因为在我的代码中接收上述方法中的这些转换，一旦我处理了完成或失败的事务，我就没有调用：

`[[SKPaymentQueue defaultQueue] finishTransaction:transaction];`.

这会将它们从支付队列中删除。交易只是试图完成，因此提示和我搞砸的本地购买记录。

希望这可以帮助！:)

# spring - 在spring注解配置中使用@Service的@Transaction

> ID：11848716
> 
> 赞同：3
> 
> 时间：2012-08-07T14:58:35.587
> 
> 标签：spring, configuration, transactions, annotations

我只是无法理解。bean 是否用@Serviced 标记并由@ComponentScan 在应用程序上下文中注册，是否通过@Transaction 注释代理事务支持？

这工作正常：

```
 public class LocationManagerImpl implements LocationManager {

        @Transactional
        public void saveLocation(Location location) {

        }

    }

//config class

@Bean
public LocationManager locationManager() {
    return new LocationManagerImpl();
} 
```

这不会：

```
@Service
public class LocationManagerImpl implements LocationManager {

    @Transactional
    public void saveLocation(Location location) {

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:51:36.947

问题很可能是您的`@Transactional`注释类位于 servlet 上下文中。如果您`<context:component-scan>`在 servlet 应用程序上下文配置中配置了 Spring AOP 拦截器，则可能会发生这种情况，而在根应用程序上下文中配置了 Spring AOP 拦截器。

解决方案是将`@Service`带注释的类移动到根 Web 应用程序上下文。

请参阅[Spring @Transactional not working](https://stackoverflow.com/questions/10019426/spring-transactional-not-working)。

Servlet 和 Web App Root 上下文的 [区别： Spring Framework 中 applicationContext.xml 和 spring-servlet.xml 的区别](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-and-spring-servlet-xml-in-spring)。

# android - 如何在 Android 上构建包含扩展程序的电话号码链接

> ID：11848721
> 
> 赞同：14
> 
> 时间：2012-08-07T14:58:48.963
> 
> 标签：android, html, phone-number, dialing

在网页上，我有一个指向电话号码的链接，其分机号如下：

```
<a href="tel:011234404,123456">call now</a> 
```

当我在 iPhone 浏览器中点击此链接时，iPhone 将拨打 011234404，然后当电话被应答时，它会拨打分机号 123456。这很棒，但是它似乎在 android 上根本不起作用（拨打主号码并且扩展名被忽略）。

其他人似乎在使用“;” 甚至“p”而不是Android上的逗号分隔符并取得了一些成功，但我无法得到任何工作。

Android上此类链接的标准是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:20:27.400

请查看[此论坛](http://forums.androidcentral.com/general-help-how/6136-phone-numbers-extension-s.html)以获取克服您所描述问题的人的几个示例。

摘要：似乎有两种通用方法可以做到这一点。

*   您可以添加一系列`,`字符，这将产生短暂的停顿，或者
*   您可以添加一个`w`字符，它会提示 Android 手机等待您按第二个按钮，然后才会拨打分机。

# java - 如何使用 JNDI 将新组添加到 ApacheDS？

> ID：11848722
> 
> 赞同：0
> 
> 时间：2012-08-07T14:58:56.363
> 
> 标签：java, ldap, jndi, apacheds

我试过了

```
java.util.Hashtable;
import java.util.Properties;
import java.util.jar.Attributes;

import javax.naming.Context;
import javax.naming.NamingException;
import javax.naming.directory.Attribute;
import javax.naming.directory.BasicAttribute;
import javax.naming.directory.BasicAttributes;
import javax.naming.directory.DirContext;
import javax.naming.directory.InitialDirContext;

    public class Main{  

            public static void main(String[] args) {  

                 Hashtable env = new Hashtable();
                 env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
                 env.put(Context.PROVIDER_URL, "ldap://localhost:10389");
                 env.put(Context.SECURITY_AUTHENTICATION, "simple");
                 env.put(Context.SECURITY_PRINCIPAL,"uid=admin,ou=system"); // specify the username
                 env.put(Context.SECURITY_CREDENTIALS,"secret");// specify the password
                // TODO code application logic here  

                          // entry's DN 
           String entryDN = "cn=myadmins,ou=groups,ou=system";  

            // entry's attributes  

            Attribute cn = new BasicAttribute("cn", "myadmins");  
            Attribute oc = new BasicAttribute("objectClass");  
            oc.add("top");  
            oc.add("groupOfUniqueNames");   
            DirContext ctx = null;  

            try {  
                // get a handle to an Initial DirContext  
                ctx = new InitialDirContext(env);  

                // build the entry  
                BasicAttributes entry = new BasicAttributes();  
                entry.put(cn);  

                entry.put(oc);  

                // Add the entry  

                ctx.createSubcontext(entryDN, entry);  
      //          System.out.println( "AddUser: added entry " + entryDN + ".");  

            } catch (NamingException e) {  
                System.err.println("AddUser: error adding entry." + e);  
            }  
         }  
    } 
```

我正在研究 DS 的示例默认架构。

但我明白了

```
Required attributes [uniqueMember(2.5.4.50)] not found within entry cn=myadmins,ou=groups,ou=system]; remaining name 'cn=myadmins,ou=groups,ou=system' 
```

我查看了其他组条目，它具有`uniqueMember`带值的属性：

```
0.9.2342.19200300.100.1.1=admin,2.5.4.11=system 
```

如何为我的新组指定 uniqueMember 属性的值，

我必须承认包含点的数字对我来说有点复杂。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:53:38.197

该`uniqueMember`属性具有 DN 语法。这意味着必须将专有名称用作值，而不是相对专有名称（或专有名称的组成部分）。专有名称类似于文件系统上的完全限定路径名。

将`uniqueMember`属性值视为指向作为组成员的专有名称的“指针”。

更新：

是`the number containing dots`一个`OID`. LDAP 中的属性、控件和其他事物都使用 OID，例如，类似的属性`cn`具有与之关联的 OID，用于在模式中唯一地标识它。

# javascript - 如何将 html 特殊字符转换为普通 HTML？

> ID：11848726
> 
> 赞同：2
> 
> 时间：2012-08-07T14:59:05.550
> 
> 标签：javascript, jquery, html, htmlspecialchars

> **可能重复：**
> [如何使用 jQuery 解码 HTML 实体？](https://stackoverflow.com/questions/1147359/how-to-decode-html-entities-using-jquery)
> [Javascript中的HtmlSpecialChars等价物？](https://stackoverflow.com/questions/1787322/htmlspecialchars-equivalent-in-javascript)

我需要将转义的 htmlspecialchars 转换为有效的 HTML 代码，例如：

```
&lt;p&gt;Text here&lt;/p&gt; 
```

应该像这样显示在浏览器中

> 在这打字

这样做的正确方法是什么？

在此先感谢，伊万。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:13:45.807

[如何使用 jQuery 解码 HTML 实体？](https://stackoverflow.com/questions/1147359/how-to-decode-html-entities-using-jquery)和 jQuery[`.appendTo`](http://api.jquery.com/appendTo/)方法对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:06:16.780

尝试使用 PHP.JS 函数来执行此操作。他们的示例完全解决了您提出的问题：

[http://phpjs.org/functions/htmlspecialchars_decode:427](http://phpjs.org/functions/htmlspecialchars_decode:427)

# ruby-on-rails - RoR - 计算唯一值

> ID：11848731
> 
> 赞同：0
> 
> 时间：2012-08-07T14:59:25.253
> 
> 标签：ruby-on-rails

我是 RoR 的初学者，我正在玩弄一个包含 6000 行数据的数据库。由于要开始的数据太多，因此通过在控制器/索引视图中使用它，我使索引表仅显示具有唯一项目名称的数据行。

```
@glyphs_test = Glyph.group(:item) 
```

除了每一行，我想显示特定项目在整个数据库中出现的次数。当我尝试这个时，它可以工作，但我不知道如何将它打印到索引上。

```
Glyph.group(:item).uniq.count 
```

结果，例如：

```
=> {"Eternal Fire" => 8, "Glyph of Adrenaline Rush" => 74} etc... 
```

即使我只能打印出这个数字，我如何才能将它与表格匹配？我想我在这里遗漏了一些重要的东西。我可以通过在 show#controller 但不是在 index#controller 中使用它来在单个记录中执行此操作。

```
@glyph = Glyph.find(params[:id])
@glyphs = Glyph.where(["item = ?", @glyph.item]).order('net_gain ASC') 
```

提前感谢您的任何建议。也许我应该做一些更简单的事情，但必须有一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:10:11.920

您可以使用以下内容遍历您的结果哈希

```
@glyph_counts = Glyph.group(:item).uniq.count

@glyph_counts.each do |key, value|
   #key is the item, value is the count, using key and value as the object is a hash
   # do your printing here
end 
```

或者，如果您正在遍历字形并尝试从结果中获取计数，您可以执行以下操作

```
@glyphs = Glyph.all
@glyph_counts = Glyph.group(:item).uniq.count

@glyph.each do |glyph|
  #something with your glyph
  count = @glyph_counts[@glyph.item]
end 
```

# c# - c#搜索字符串值以查找缩写的变体

> ID：11848732
> 
> 赞同：1
> 
> 时间：2012-08-07T14:59:25.363
> 
> 标签：c#, winforms, string

我需要在用户输入后搜索文本框以查看是否出现任何特定缩写。

例如，我想查看用户是否输入了以下内容之一：-

```
".AB ", "AB." , " AB ", "/AB", ",AB" 
```

请问最干净的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:04:08.947

使用 LINQ[`Contains`](http://msdn.microsoft.com/en-us/library/bb357185)扩展方法：

```
var abbreviations = new [] { ".AB ", "AB." , " AB ", "/AB", ",AB" };

return abbreviations.Contains(myTextBox.Text); 
```

如果您希望搜索不区分大小写：

```
return abbreviations.Contains(myTextBox.Text.ToUpper()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:04:49.370

也许你应该使用 String 的 Contains() 方法。例子：

```
string[] abbreviationsList = { ".AB ", "AB.", " AB ", "/AB", ",AB" };
        foreach (string abbreviations in abbreviationsList)
        {
            if (myTextBox.Text.Contains(abbreviations))
            {
                // Your code here
            }
        } 
```

当然，还有其他方法可以做到这一点，但我的意思是在 TextBox 的文本中使用 Contains()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:05:08.933

一个简单的方法是使用正则表达式：

```
if (Regex.IsMatch(yourTextBox.Text, @"((\.|,|\s)AB(\.|,|\s)"))) {
    // do something
} 
```

选择与您要检测的字符串匹配的正则表达式。

# javascript - 时间序列统计（如相关、傅里叶变换）

> ID：11848733
> 
> 赞同：2
> 
> 时间：2012-08-07T14:59:28.060
> 
> 标签：javascript, math, statistics

[注意：我是 PHP/Javascript/Web 开发人员，我的弱点是数学/统计]

我编写了获取时间序列对象的代码。（这里没问题。）我有一个全部链接的图形库，准备绘制任何给定的系列。

如何将模式查找操作（例如互相关函数或傅里叶变换）应用于感兴趣的时间序列？我查看了作为 R 端口的 jStat (http://www.jstat.org/)，但 API 文档确实不存在。此外，我对 Mathematica 和 R 非常缺乏经验。

我应该从哪里开始？

我不知道如何将本文中找到的函数简化为有用的操作。一对[时间序列]之间的互相关（它是面向数学的）：[http ://en.wikipedia.org/wiki/Cross-correlation](http://en.wikipedia.org/wiki/Cross-correlation)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T01:30:27.967

这篇 1996 年的旧文章被证明是最好的起点。它包括互相关和自相关的简单定义，以及一些可移植的 c 代码。生成的 JS 代码没有依赖关系，让我对正在做的事情有了实际的了解。

尽管最初的问题对我来说不再重要，但如果您知道，请分享有关如何让其他人开始的任何其他资源！

[http://paulbourke.net/miscellaneous/correlate/](http://paulbourke.net/miscellaneous/correlate/)

# c# - 获取 MVC3 中复选框的值

> ID：11848734
> 
> 赞同：1
> 
> 时间：2012-08-07T14:59:28.560
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-partialview

我在页面上有一些 html 复选框，我需要验证它们是否已在页面的回发事件中检查。

这些复选框的数据不存储在数据库中，只需在使用前检查它们即可进入下一页。

我如何验证它们是否经过检查？我在 Request.Form.AllKeys 集合中看不到它们

```
<input id='terms_eligibility' type='checkbox'   />
<input id='terms_accurate' type='checkbox' />
<input id='terms_score_release' type='checkbox' /> 
```

* * *

编辑这就是我最终做的

看法

```
 @Html.CheckBox("terms_eligibility") 
```

控制器

```
string eligibility = Request.Form.GetValues("terms_eligibility")[0]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T15:16:24.713

使用 MVC，您应该使用视图模型来跟踪复选框状态，例如

```
public class MyViewModel
{
    public bool TermsEligibility { get; set; }
    public bool TermsAccurate { get; set; } 
    public bool TermsScoreRelease { get; set; }
} 
```

让 MVC 将属性映射到控件：

```
@model MyViewModel

@Html.BeginForm("MyAction", "MyController", FormMethod.Post, new { id = "myFormId" })
{
    @Html.CheckBoxFor(m => m.TermsElibility)
    @Html.CheckBoxFor(m => m.TermsAccurate)
    @Html.CheckBoxFor(m => m.TermsScoreRelease)   
    <input id="saveBtn" type="submit" value="Save" />
} 
```

然后，您可以在发布结果时访问模型中的值：

```
[HttpPost]
public ActionResult MyAction(MyViewModel model)
{
    if (model.TermsEligibility)
    {
        ....
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T15:02:07.690

如果未选中 HTML 复选框，则不会将其值发送回网络服务器。

MVC 通过`<input type="hidden" />`为每个复选框添加一个确保始终发送一个值的复选框来解决这个问题，因此它可以检测一个复选框是否被选中。

要使用这些隐藏输入，您必须使用`Html.CheckBox`or`Html.CheckBoxFor`辅助方法。

无论如何，您发布的 HTML 没有任何`name=""`属性。HTML 输入必须具有名称属性。他们不使用`id`表单字段键的属性。

# templates - express 3 在所有模板中获取会话

> ID：11848744
> 
> 赞同：3
> 
> 时间：2012-08-07T15:00:06.650
> 
> 标签：templates, session, express

我正在使用快递`v3.x`

在我能够通过向我的**所有**模板发送动态助手之前

```
app.dynamicHelpers({
  session: function (req, res) {
    return req.session;
  }
}) 
```

现在在 3.x 中我们得到了`res.locals` ，但是在提供函数时它不会注入`req`参数

前任 ： `res.locals.session = function (req, res) { return req.session; }`

`req`是`undefined`

`render`除了在每个功能中设置会话之外，我该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:13:43.207

`app.use(app.router)`在任何会话中间件之前和之后尝试：

```
app.use(function(req, res, next) {
  res.locals.session = req.session;
  next();
}); 
```

# java - 9 补丁图像不工作

> ID：11848751
> 
> 赞同：0
> 
> 时间：2012-08-07T15:00:46.310
> 
> 标签：java, android

这是图像：![这是图像](../Images/285a6d5cc47de2df294a99f4a5718a6e.png)

它似乎在 Eclipse 中运行良好，即按预期调整按钮大小并且未显示黑条。然而，在模拟器中，它显示为黑条并被拉伸。

图像另存为`<name>.9.png`. 我为 IDE 和模拟器使用 API 10。

有什么线索可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:07:47.463

1 px 边框需要是黑色或透明的。看起来左边的寄宿生是黑色的并且不透明。

# xml - InDesign CS5 脚本：如何在 XML 结构窗格中自动执行“Alt + 单击”？

> ID：11848753
> 
> 赞同：0
> 
> 时间：2012-08-07T15:00:49.323
> 
> 标签：xml, adobe-indesign, extendscript

我有这个脚本，它正在显示  `View --> Show Structure`  窗格：

```
with(obj.doc.xmlViewPreferences)
{
    // this opens the View --> Show Structure pane
    showStructure = true;

    showTagMarkers = true;
    showTaggedFrames = true;
    showTextSnippets = true;
} 
```

但是，根节点保持最小化。我发现按住  `Alt`  键并单击此根节点*会*展开整个树。

那么有没有办法在这个根节点上以编程方式执行“Alt + click”？**我正在使用 Windows 和 CS5。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:27:11.517

您可以通过选择节点来接近。例如，选择第 3 层的所有元素，并在您将使用的所有层上扩展所有元素的过程中

```
app.select(
    app.activeDocument.xmlElements.item(0) // the root element
    .xmlElements.everyItem() // repeat this line for each nesting level
    .xmlElements.everyItem() // and so forth
    .getElements() // provide an array with the actual selectable items
); 
```

重复指示线以获得更深层次。使用以下代码段，您还可以选择那些没有子元素的 XML 属性：

```
.xmlAttributes.everyItem() 
```

最后取消选择以清理选择亮点。

```
app.select(null); 
```

编辑：对于任意深度，您可以使用循环。在请求之前，它应该确保 XMLElement / XMLAttribute 集合中有元素。结果代码：

```
var items = app.activeDocument.xmlElements.everyItem();
while( items.xmlElements.length ) {
    items = items.xmlElements.everyItem();
    app.select(items.getElements());
    if( items.xmlAttributes.length )
        app.select(items.xmlAttributes.everyItem().getElements());
}
app.select(null); 
```

# perl - 添加字符文字 perl（非常简单）

> ID：11848756
> 
> 赞同：1
> 
> 时间：2012-08-07T15:00:58.750
> 
> 标签：perl, printing, character, printf

如果有人想要一些快速的代表，你去:)。

如何像在 C 中那样添加字符文字。例如

```
 print 'A' + 1 
```

上面应该打印 'B' 因为 ASCII 'A' + 1 给出 ASCII 'B'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T15:02:54.253

`chr(ord('A') + 1)`. Perl 没有字符类型，它有一个字符串类型。并且字符串在数字上不表现为 ASCII 值。您想`ord`将其转换为数字代码点并将`chr`其转换回来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:06:53.843

如果将字符串存储在变量中，则[可以递增它们](http://perldoc.perl.org/perlop.html#Auto-increment-and-Auto-decrement)。

```
$ perl -E'$a = "A"; say ++$a'
B

$ perl -E'$a = "abacaa"; say ++$a'
abacab

$ perl -E'$a = "Z"; say ++$a'
AA 
```

# asp.net-mvc-3 - 剃刀中的动态单选按钮

> ID：11848762
> 
> 赞同：1
> 
> 时间：2012-08-07T15:01:14.350
> 
> 标签：asp.net-mvc-3, razor, html.radiobuttonlist

我正在使用`razor`视图引擎并且在创建`radiobutton`.

我正在用`for`我的视图中的模型值填充一个带有循环的表。在每一行我都想要一个`radiobutton`. 我希望能够只选择一行并从模型中获取相关项目 id 并将其提交到另一个页面。我知道怎么发帖。我实际上是通过使用`checkbox`. 但问题`checkbox`在于它允许多项选择。

所以我想我需要使用`radiobutton`. 任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:09:04.477

假设你有这样的 ViewModel

```
public Class CheckOutViewModel
{
  public string SelectedPaymentType { set; get; }
  public IEnumerable<SelectItems> PaymentTypes { set; get; }
} 
```

您在`GET`Action 方法中设置 PaymentTypes 集合并将其发送到强类型为的视图`CheckOutViewModel`

```
public ActionResult Checkout()
{
  var vm=new CheckOutViewModel
  vm.PaymentTypes=GetPaymentTypes(); //gets a list of SelectItems
  return View(vm);
} 
```

在你看来

```
@model CheckOutViewModel
@using(Html.BeginForm())
{
  foreach (var paymentItem in Model.PaymentTypes)
  {
    @Html.RadioButtonFor(mbox => mbox.SelectedPaymentType, 
                                              paymentItem.ID.ToString())       
    @paymentItem.Name    
  }
  <input type="submit" value="Save" />
} 
```

假设`GetPaymentTypes()`方法将返回一个列表`SelectItems`供您在数据库中记录。

这将为您提供具有相同名称值（SelectedPaymentType）的单选按钮。所以只能选择一个。

在您的`POST`操作中，您可以通过检查 SelectedPaymentType 属性值来读取所选值

```
[HttpPost]
public ActionResult Checkout(CheckOutViewModel model)
{
  //check the value of model.SelectedPaymentType

} 
```

# python - Python 等效于 PHP 的 usort()？

> ID：11848773
> 
> 赞同：5
> 
> 时间：2012-08-07T15:01:47.410
> 
> 标签：python, sorting

我的数据结构是 Python 中的一个元组列表，我希望能够根据它们的元组中包含的值对列表项进行排序。在 PHP 中，我通常会使用 usort() 创建自己的排序函数。我可以使用 Python 中的等价物吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T15:05:47.140

给`sort()`方法一个`key`函数：

```
>>> my_list = [(1, 2), (3, 4), (2, 1), (3, 2)]
>>> my_list.sort(key=lambda x: x[1])
>>> my_list
[(2, 1), (1, 2), (3, 2), (3, 4)]
>>> 
```

如果您需要获取排序列表，而不是*就地*排序，请使用 built_in[`sorted()`](https://docs.python.org/2/library/functions.html#sorted)

```
>>> sorted(my_list, key=lambda x: x[1])
[(2, 1), (1, 2), (3, 2), (3, 4)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T15:07:41.320

没有预制函数可以做到这一点，但是使用[操作员模块函数](http://wiki.python.org/moin/HowTo/Sorting/#Operator_Module_Functions)作为排序的关键函数可以相当容易地完成。如代码示例所示，您可以使用

```
from operator import itemgetter

tuple_list.sort(key=itemgetter(1)) 
```

这将按元组中的索引 1 元素排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-14T05:03:04.447

这是模拟的：

```
def usort(array, callback):

    from functools import cmp_to_key
    import inspect

    return array.sort(key=cmp_to_key(callback)) 
```

# powershell - 在 powershell 中通过 HTTP POST 上传文件

> ID：11848775
> 
> 赞同：1
> 
> 时间：2012-08-07T15:01:49.277
> 
> 标签：powershell, powershell-2.0, powershell-3.0

我正在使用文件主机在云上备份我的硬盘驱动器。这个文件主机提供了一个 API 来做到这一点，但我无法让它在 powershell 上运行。

在他们的 API 网站（http://code.google.com/p/filecloud/wiki/Uploading）上，他们声称“我们通过 HTTP POST 请求上传文件”，所以我使用了我信任的`POST_Request`函数：

```
function POST_Request ($url,$parameters) {
$client = New-Object System.Net.WebClient 
$contents = [Text.Encoding]::UTF8.GetString(($client.UploadValues($url,$parameters) ))
return $contents
} 
```

由于他们的网站声称他们需要发送 2 个参数才能上传（我的帐户和文件的一种 id），所以我不能`UploadFile`在`System.Net.WebClient`对象中使用。

总之，我的问题是：如何传递参数（id）和要通过 POST 上传的文件？（也许一个技巧`UploadFile`可以做到）

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:59:44.737

通常这些都放在`NameValueCollection`IIRC 中，并且 NameValueCollection 实例作为“值”参数传递给`UploadValues()`. 你正在使用`$parameters`. 这是传递给你的还是你创造的？无论哪种方式，如果它是 NameValueCollection，请使用该`Add`方法为所需参数添加名称/值对。

# xml - 在 XSLT v1.0 中使用以结尾

> ID：11848780
> 
> 赞同：23
> 
> 时间：2012-08-07T15:02:05.703
> 
> 标签：xml, xslt

我正在尝试编辑当前的 XSLT。我想要的功能是当“//code_no”的值以 01 结尾时，我想编辑当前城市位置。目前此功能不存在。我曾尝试使用字符串和子字符串，但它给了我一个错误，说以功能结尾不存在。请帮忙

来自xml的值是

```
<code_no>
1870410001
</code_no> 
```

在 xsl 中，我想在值以 01 结尾时打印它。

```
<td align="left" width="33%"><SPAN style="font-size: 12pt; font-family: Arial;">
    <a> <b><u><xsl:value-of select="//city"/>, <xsl:value-of select="//state"/> 
    </u></b></a></SPAN></td> 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-08T03:13:58.030

**XPath 1.0 等效于（XPath 2.0）表达式：**

```
ends-with($s, $t) 
```

**是**：

```
$t = substring($s, string-length($s) - string-length($t) +1) 
```

**您只需将最后一个 XPath 表达式中的`$s`和`$t`**分别替换为要测试的字符串和要测试的结尾。

**这是一个完整的例子**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="x|y">
     <xsl:value-of select="name()"/> ends-with '_01': <xsl:value-of select=
     "'_01' = substring(., string-length() - 2)"/>
=============   
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（问题中未提供任何内容！！！）：

```
<t>
 <x>abcd_01</x>
 <y>abcd_11</y>
</t> 
```

**产生了想要的正确结果：**

```
x ends-with '_01': true
=============   
 y ends-with '_01': false
============= 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-27T12:07:02.613

我用了

```
contains($string, $part) and normalize-space(substring-after($string, $part)) = '' 
```

在哪里

我们正在检查 $string 是否以 $part 结尾

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T15:11:01.683

[XSLT 1.0](http://www.w3.org/TR/xslt/)使用[XPath 1.0](http://www.w3.org/TR/xpath/)，它不包括任何名为`ends-with`. 您可以使用此处找到的技术来伪造它：

*   [如何使用 xpath 按文件名查找图像标签](https://stackoverflow.com/questions/5738972/how-to-find-an-image-tag-by-filename-using-xpath/5739007#5739007)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-21T10:00:20.663

我知道这个问题实际上是一个老问题，但现在我正在寻找同样的问题。

但是，最后我想出了一些其他人将来可能会使用的东西。

请看这个：

```
contains(concat($str1, '$'), concat($str2, '$')) 
```

快速，简单，无需计算。

使用示例：

```
 <xsl:variable name="str1" select="string('Some text to test.')" />
    <xsl:variable name="str2" select="string('test.')" />

    <xsl:if test="contains(concat($str1, '$'), concat($str2, '$'))">
        <xsl:value-of select="concat('Yes, text: &quot;', $str1, '&quot; ends with: &quot;', $str2, '&quot;.')"/>
    </xsl:if> 
```

当然，您可以使用任何符号代替 $ 来表示 concat() 函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-07T11:04:33.163

不完全*以 结尾*，但比 substring-solution 看起来更好，并且仍然适用于某些情况：

```
<xsl:template match="*[contains(name(), 'substr')]"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-28T13:20:01.210

在特殊情况下，如果您知道某些字符不能包含在标记中，例如 §，您可以这样做：

```
<xsl:if test="contains(concat(code_no,'§'),'01§')">
  <td align="left" width="33%"><SPAN style="font-size: 12pt; font-family: Arial;">
    <a> <b><u><xsl:value-of select="//city"/>, <xsl:value-of select="//state"/> 
    </u></b></a></SPAN></td>
</xsl:if> 
```

# security - 用于阻止用户设置的事件的 DACL

> ID：11848783
> 
> 赞同：1
> 
> 时间：2012-08-07T15:02:10.147
> 
> 标签：security, winapi, acl, ssdl

我想做以下事情：创建一个使用全局命名空间注册的事件并修改它的 DACL 以便：

*   普通用户可以读取事件状态（使用带有 0 超时值的 WaitForSingleObject）
*   管理员可以更改事件状态（`SetEvent`或`ResetEvent`）

此外，大多数情况下，该事件最初由非管理员用户在应用程序初始化期间创建

这个想法是允许终端服务服务器上的系统管理员向属于我的应用程序的所有进程（有很多）发送信号，它们应该尽快终止并保持锁定。这必须适用于所有用户会话，但也必须提供某种安全层。

在创建期间，我正在努力为事件对象找到正确的 DACL：我似乎无法将更改对象状态的能力仅限于管理员。

我正在使用`ConvertStringSecurityDescriptorToSecurityDescriptor`从 SSDL 字符串创建 DACL。这是我最接近工作样本的情况：

```
Format('D:(A;OICI;GA;;;BA)(A;OICI;0x%.8xF;;;WD)',[(SYNCHRONIZE)]) 
```

这应该给`ALL_ACCESS`内置`Administrators`组的成员和`SYNCHRONIZE`给`EVERYONE`.

不幸的是，生成的 ACL 并不能完全按照我想要的方式工作：如果我使用 ProcessExplorer 检查生成的对象状态，我会看到管理员拥有所有权限（根据需要），但每个人仍然拥有“修改状态”权限集。

万一这很重要，我使用的是 Delphi 6。生成的应用程序必须与 windows 2003 server/XP 及更高版本兼容。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:32:21.047

在第二个 ACE 中，您使用包含`0x%.8xF`（注意尾随的“F”）的格式字符串设置访问权限，因此值设置为`(SYNCHRONIZE<<4) | 0xF`.

`EVENT_MODIFY_STATE`所以`0x0002`这个权限被包括在内。

丢失尾随的“F”，它应该可以工作。

# backbone.js - Backbone.js 多回调接口

> ID：11848784
> 
> 赞同：1
> 
> 时间：2012-08-07T15:02:11.133
> 
> 标签：backbone.js

我有一个（书籍）集合，允许用户深入研究一本书，对其进行编辑并将其添加/删除到收藏夹。

虽然书籍的基本 CRUD 使用 Backbone.js 很简单，但我不太清楚如何为从用户收藏夹中添加/删除书籍进行单独的 api 调用。

我能想到的最好的方法是破解同步方法，检查特定变量的选项，然后触发不同的 api 调用。这行得通 - 但我完全不确定这是否是正确的做事方式。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:24:21.690

我不确定您适合以下哪种情况，但希望它们能指导您

1）`sync`您可以编写类似的东西，而不是从主干修改方法

```
url: function() {
  if (updateFavorite)
    return '/books/favorite';
  else
    return '/books';
} 
```

2) 在大多数其他情况下，当您在单个模型上进行 CRUD 操作时，生成的 url 类似于`collection.url + model.id`，您可以在[Backbone Docs](http://backbonejs.org/#Model-url)中阅读更多内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:07:12.570

您可以使用两个集合：一个包含所有书籍，一个包含收藏夹。它可以是同一个集合类，但是对于收藏夹，您可以将“url”属性从“/books”或其他任何内容更改为“/books/favorite”或您喜欢的任何内容。

```
var books = new BookCollection({url: "/books"})
var favorites = new BookCollection({url: "/books/favorite"}); 
```

我认为可能还有很多其他解决方案，但这将是我的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T15:27:05.090

我的想法是每个 BookModel 都必须嵌套一个 FavoriteBookModel。

共享创建嵌套模型的代码，还使用 ​​bookId 作为嵌套模型中的外键关联模型。

```
 var BookModel = Backbone.Model.extend({
    url : '/books',
    initialize : function(){
        this.favoriteModel = new FavoriteBookModel();
        this.on('change', this.changeHandler);
        this.changeHandler();
    },
    changeHandler : function(){
        this.favoriteModel.set({ bookId : this.get('id')});
    }
  });

  var FavoriteBookModel = Backbone.Model.extend({
    url : function(){
        return '/books/'+this.get('bookId')+'/favorite';
    },
  }); 
```

# c# - 如何获取具有我的 MEF 插件的每个 DLL 的版本号？

> ID：11848785
> 
> 赞同：8
> 
> 时间：2012-08-07T15:02:31.817
> 
> 标签：c#, .net, mef

我有许多实现`IDessertPlugin`. 这些可以在各种 DLL 中找到，我使用 MEF 来启动它们的实例，以在我的应用程序中用作插件功能。

所以我想要做的是显示我使用 MEF 加载插件的 DLL 的版本号。在我的应用程序中加载的一个或多个 DLL 中定义了一个或多个插件。

现在我做这样的事情：

```
var catalog = new AggregateCatalog();
catalog.Catalogs.Add(
   new DirectoryCatalog(Path.Combine(
      Path.GetDirectoryName(Assembly.GetExecutingAssembly().location), "Plugins")));

var container = new CompositionContainer(catalog);

container.ComposeParts(this); 
```

这将从我的应用程序运行的插件子目录中加载插件。

做类似的事情

```
catalog.Catalogs.First().Parts.First().GetType().Assembly.FullName 
```

只返回“System.ComponentModel.Composition, Version=4.0.0.0, ...”

我希望能够知道的是，我有 CakePlugins.dll 的 1.0 版和 IceCreamPlugins.dll 的 1.1 版。插件本身没有关于它们的版本属性 - 我想依赖 DLL 的版本。希望这是有道理的。

我还没有弄清楚我在那里使用了哪些 DLL，以便我可以调用`Assembly.GetName().Version`它们。

想法？

* * *

**解决方案：**

因此，在组成部分之后，我的问题的解决方案非常简单。

我的插件管理代码有一个这样的条目：

```
[ImportMany(typeof(IDessertPlugin)]
private IEnumerable<IDessertPluing> dessertPlugins; 
```

一旦容器部件组合发生，我可以像这样迭代我的插件：

```
foreach(var plugin in dessertPlugins)
{
   Console.WriteLine(Assembly.GetAssembly(plugin.GetType()).GetName().Version.ToString());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:07:35.370

您可以从不同的属性中获取程序集信息`AssemblyVersion`，`AssemblyFileVersion`并且`AssemblyDescription`.

```
 /// <summary>
                /// This class provide inforamtion about product version.
                /// </summary>
                public class ProductVersion
                {
                    private readonly FileVersionInfo fileVersionInfo;

                    private readonly AssemblyName assemblyName;

                    private ProductVersion(Type type)
                    {
                        // it done this way to prevent situation 
                        // when site has limited permissions to work with assemblies.
                        var assembly = Assembly.GetAssembly(type);
                        fileVersionInfo = FileVersionInfo.GetVersionInfo(assembly.Location);
                        assemblyName = new AssemblyName(assembly.FullName);
                    }

                    public string AssemblyFileVersion
                    {
                        get
                        {
                            return fileVersionInfo.FileVersion;
                        }
                    }

                    public string AssemblyVersion
                    {
                        get
                        {
                            return assemblyName.Version.ToString();
                        }
                    }

                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:47:18.993

因此，在组成部分之后，我的问题的解决方案非常简单。我试图深入研究 MEF 对象本身，而不是查看包含我已加载的所有插件的容器。答案是完全忽略这些插件是如何加载的这一事实，而只查看实例化对象本身。

我的插件管理代码有一个这样的条目：

```
[ImportMany(typeof(IDessertPlugin)]
private IEnumerable<IDessertPluing> dessertPlugins; 
```

一旦容器部件组合发生，我可以像这样迭代我的插件：

```
foreach(var plugin in dessertPlugins)
{
   Console.WriteLine(Assembly.GetAssembly(plugin.GetType()).GetName().Version.ToString());
} 
```

# jasper-reports - 服务器移动后，我的 Jasper 报表无法再在同一目录中找到子报表

> ID：11848788
> 
> 赞同：1
> 
> 时间：2012-08-07T15:02:45.503
> 
> 标签：jasper-reports

我们已将应用程序移至新服务器，因此我们知道可能存在一些环境问题。在我们的旧服务器上，Jasper 会自动选择与调用它们的报表位于同一目录中的子报表。

现在，我们收到如下消息：

```
net.sf.jasperreports.engine.JRException: Could not load object from location : applicationguide_sub_xml.jasper 
```

是否可以传递某种默认路径，以便每个报告都会自动在同一目录中查找子报告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:55:43.463

我认为您忘记更改主报告中的路径。您可以在具有以下表达式的 XML 选项卡中更改它：

```
<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
    <defaultValueExpression><![CDATA["YOURNEWPATHHERE"]]></defaultValueExpression>
</parameter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:31:31.403

结果是 .jasper 文件根本不存在。这很奇怪，因为我正在调用 Jasper 编译器。我猜正在发生的是它只编译主 jrxml，并在编译时查找子报告的 .jasper 而不是 .jrxml 文件。这是愚蠢的。

# shared-ptr - C++ Boost make_shared 创建副本

> ID：11848791
> 
> 赞同：3
> 
> 时间：2012-08-07T15:02:57.450
> 
> 标签：shared-ptr

我有这个代码：

```
struct TestDataElement1
{
    unsigned int something;
};

struct TestDataElement2
{
    boost::shared_ptr<TestDataElement1> testDataElement1;
};

TestDataElement1 test1;
test1.something = 100;

TestDataElement2 test2;
test2.testDataElement1 = boost::make_shared<TestDataElement1>(test1);
cout << "TEST1: " << test2.testDataElement1 -> something << endl;
test1.something = 200;
cout << "TEST2: " << test2.testDataElement1 -> something << endl; 
```

哪个产生这个：

测试1：100

测试2：100

但我不明白为什么它不产生 100、200，因为 test2 只是有一个指向 test1 的指针。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T16:18:57.770

模板函数 boost::make_shared 的行为与您期望的不同。线

```
test2.testDataElement1 = boost::make_shared<TestDataElement1>(test1); 
```

在语义上等价于

```
test2.testDataElement1 = 
    boost::shared_ptr<TestDataElement1>( 
        new TestDataElement1(test1) ); 
```

因此它

1.  分配内存，
2.  调用那个地方的复制构造函数`TestDataElement1`，
3.  为那块内存创建一个 shared_ptr
4.  并将其分配给`test2.testDataElement1`.

所以你只输出`test1`两次副本的值。

顺便说一句，`shared_ptr`除非您指定自定义删除器，否则您将永远无法在堆栈上创建内存。

# c - 在 C 中释放 hashmap 存储桶数组

> ID：11848792
> 
> 赞同：2
> 
> 时间：2012-08-07T15:03:01.663
> 
> 标签：c, linked-list, hashmap

我已经在 C 中实现了一个 hashmap，经过相当多的工作，我得到了一切正常工作......除了我的发布例程。

我的结构是这样设置的：

```
struct hashmap_element {
    int value;
    int key;
    int used;
    struct hashmap_element* next;
};
struct hashmap {
    int table_size;
    int current_size;
    struct hashmap_element* table;
}; 
```

我当前的非工作发布例程如下所示：

```
void hm_release(struct hashmap* hm) {
    hashmap_element* tmp;
    hashmap_element* curr_itr; 
    for(int x=0; x<hm->table_size; x++) {
        curr_itr = &hm->table[x];
        while (curr_itr) {
            tmp = curr_itr->next;
            free(curr_itr);
            curr_itr = tmp;
        } 
    }
    free(hm->table);
    free(hm);
} 
```

不幸的是，这个当前的 segvaults 在第一次运行后就出现了。我似乎无法让我的 'curr_itr' 锁定到数组中每个存储桶的第一个链上。我对在 C 中使用像这样的动态内存相当陌生，并且已经坚持了几天。

据我所知，一切都在正确初始化。例如，这里是我的 hashmap init 函数。

```
hashmap* hm_initialize() {
    hashmap* hm = malloc(sizeof(hashmap));
    hm->table = (hashmap_element*) calloc(INIT_SIZE, sizeof(hashmap_element));
    hm->table_size = INIT_SIZE;
    hm->current_size = 0;

    // init the buckets
    for (int x=0; x < hm->table_size; x++) {
        hm->table[x].used=0;
        hm->table[x].value=0;
        hm->table[x].key=0;
        hm->table[x].next=NULL;
    }
    return hm;
} 
```

任何建议/意见将不胜感激。如果您需要更多我的代码，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:10:43.637

你开始过早地释放，

```
for(int x=0; x<hm->table_size; x++) {
    curr_itr = &hm->table[x];
    while (curr_itr) {
        tmp = curr_itr->next;
        free(curr_itr);
        curr_itr = tmp;
    } 
} 
```

`hashmap_element` `hm->table[x]`没有`malloc`编辑，所以你不应该这样做`free`。

```
for(int x=0; x<hm->table_size; x++) {
    curr_itr = hm->table[x].next;
    while (curr_itr) {
        tmp = curr_itr->next;
        free(curr_itr);
        curr_itr = tmp;
    } 
} 
```

仅释放桶中第一个之后的（希望） `malloc`ed 。`hashmap_element`

# html - CSS无序列表长文本显示内联

> ID：11848796
> 
> 赞同：1
> 
> 时间：2012-08-07T15:03:23.853
> 
> 标签：html, css, html-lists

我有一个显示如下的无序列表：http: [//jsfiddle.net/spryno724/XYBja/](http://jsfiddle.net/spryno724/XYBja/)。

注意第二个列表项太长了，所以它换行到第一个列表项下方的另一行。有没有办法在不指定明确宽度的情况下将每个列表项保留在自己的“列”中？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:10:51.013

尝试放置`li img {float: left`} 因为这会使您的图像向左浮动，我认为这应该可以解决您的问题！

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:15:02.247

把这个放在你的CSS上

```
img{
  float:left;
} 
```

这应该可以解决问题=）

# c++ - 从基类特定函数调用子类方法

> ID：11848800
> 
> 赞同：0
> 
> 时间：2012-08-07T15:03:37.790
> 
> 标签：c++, function, virtual

我有一个关于在 C++ 编程中处理虚函数的问题。我有这样的事情：

```
template<class T>
class baseClass
{
    virtual void doSomething(T& t) {
        // some baseClass specific code
    }

    void doSomethingElse(T& t) {
        // some baseClass specific code

        this->doSomething(t);
    }
}

template<class T>
class subClass
{
    virtual void doSomething(T&) {
        // some subclass related code
    }
} 
```

现在，如果我构造一个 subClass 类型的对象......

```
int main(int argc, char *argv[])
{
    subClass<anyType> * subClassObject = new subClass<anyType>();
    subClassObject->doSomethingElse(anyTypeObject);
} 
```

....并调用`doSomethingElse`基类的方法，该方法将调用`doSomething`基类的方法而不是子类的方法。

我想要的是调用`doSomething`子类的方法（而不是`baseClass`）。

谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:24:05.137

您可以使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)完成它：

```
template<class T, class Derived>
class baseClass
{    
    void doSomethingElse(T& t) {
        // some baseClass specific code
        static_cast<Derived*>(this)->doSomething(t);
    }
}

template<class T>
class subClass : public baseClass<T, subClass>
{
    void doSomething(T&) {
        // some subclass related code
    }
} 
```

有关虚拟模板方法的讨论，请参见[this](https://stackoverflow.com/questions/2354210/can-a-member-function-template-be-virtual)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T15:35:59.323

我对您的代码进行了几处更改以使其能够编译，并且使用 g++ 4.5 它表明正在调用子类方法。这是我编译的代码：

```
#include <iostream>

template<class T>
class baseClass
{
public:
    virtual void doSomething(T& t) {
        std::cout << "Base" << std::endl;
        // some baseClass specific code
    }

    void doSomethingElse(T& t) {
        // some baseClass specific code

        this->doSomething(t);
    }
};

template<class T>
class subClass : public baseClass<T>
{
    virtual void doSomething(T&) {
        std::cout << "Child" << std::endl;
        // some subclass related code
    }
};

int main()
{
    typedef int anyType;

    subClass<anyType> * subClassObject = new subClass<anyType>();
    int foo;
    subClassObject->doSomethingElse(foo);
} 
```

# c++ - 作业。C++ Book Example 似乎有问题

> ID：11848801
> 
> 赞同：7
> 
> 时间：2012-08-07T15:03:39.307
> 
> 标签：c++

以下代码是我的 C++ 类中幻灯片的一部分。IntelliSence 给我错误，我不知道为什么。不知道为什么它不喜欢构造函数和析构函数。有人可以帮忙吗？

```
class Vehicle {
     friend void guest();
 private:
     string make;
     string model;
     int year;
 public:
     void Vehicle();
     void Vehicle(string, string, int);
     void ~Vehicle();
     string getMake();
 }

 void guest() {
     cout << make;
 }

 1) IntelliSense: member function with the same name as its class must be a constructor
 2) IntelliSense: member function with the same name as its class must be a constructor
 3) IntelliSense: return type may not be specified on a destructor 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T15:05:46.400

构造函数和析构函数没有返回类型！应该：

```
Vehicle();
Vehicle(string, string, int);
~Vehicle(); 
```

您需要将参数传递给您的函数：

```
void guest(const Vehicle &v)
{
    cout << v.make; //friend allows you to access 'make' directly
} 
```

当然，您必须`friend`相应地更改声明

别忘`;`了在你的课结束时

**编辑**

有效的完整代码：

```
class Vehicle {
    friend void guest(const Vehicle &v);
private:
    string make;
    string model;
    int year;
public:
    Vehicle() {}
    Vehicle(string make, string model, int year) : make(make), model(model), year(year) {}
    ~Vehicle() {}
    string getMake() const {return make;}
};

void guest(const Vehicle &v) {
    cout << v.make;
}

int main()
{
    guest(Vehicle("foo", "bar", 10));
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T15:08:07.067

如果您理解错误消息，则在这种情况下实际上非常好。

```
void Vehicle(); 
```

因为“方法”与类同名，所以您的 Intellisense 认为它应该是一个构造函数。这是正确的！构造函数没有返回类型，所以让它：

```
Vehicle(); 
```

相似地：

```
void Vehicle(string, string, int); 
```

也似乎是一个构造函数，因为“方法”的名称与类相同。仅仅因为它有参数并不能使它特别。它应该是：

```
Vehicle(string, string, int); 
```

解构器也没有返回类型，所以

```
void ~Vehicle(); 
```

应该：

```
~Vehicle(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:07:10.807

构造函数和析构函数没有返回类型。只需删除这些，您的代码就可以编译。有返回类型

```
 void Vehicle(); 
```

告诉编译器您要声明一个名为 Vehicle() 的函数，但由于它与类同名，除非它是构造函数（没有返回类型），否则不允许这样做。错误消息准确地告诉您在这种情况下您的问题是什么。

# python - 没有这样的文件或目录，奇怪还是什么？

> ID：11848803
> 
> 赞同：1
> 
> 时间：2012-08-07T15:03:50.210
> 
> 标签：python, download, urllib2

所以，

我一直在编写一个下载器，每次运行它时，它都会说：

```
Traceback (most recent call last):
  File "C:\Python27\Downloader.py", line 7, in <module>
    f = open('c:\\users\%USERNAME%\AppData\Roaming\.minecraft\mods\CreeperCraft.zip', 'wb+')
IOError: [Errno 2] No such file or directory: 'c:\\users\\%USERNAME%\\AppData\\Roaming\\.minecraft\\mods\\CreeperCraft.zip' 
```

我现在，你可能会说，创建一个文件，但我希望脚本来创建文件。

那么，有人可以告诉我要解决什么问题吗？这是代码：

```
import urllib2
import os
import shutil
url = "https://dl.dropbox.com/u/29251693/CreeperCraft.zip"
file_name = url.split('/')[-1]
u = urllib2.urlopen(url)
f = open('c:\\users\%USERNAME%\AppData\Roaming\.minecraft\mods\CreeperCraft.zip', 'wb+')
meta = u.info()
file_size = int(meta.getheaders("Content-Length")[0])
print "Downloading: %s Bytes: %s" % (file_name, file_size)
file_size_dl = 0
block_sz = 8192
while True:
    buffer = u.read(block_sz)
    if not buffer:
        break
    file_size_dl += len(buffer)
    f.write(buffer)
    status = r"%10d  [%3.2f%%]" % (file_size_dl, file_size_dl * 100\. / file_size)
    status = status + chr(8)*(len(status)+1)
    print status,
f.close() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T15:05:43.317

问题是 python 没有意识到您正在使用 %USERNAME% 来引用环境变量，因此 python 从字面上解释它。你必须告诉python它是一个环境变量，通过这样做：

代替

```
f = open('c:\\users\\%USERNAME%\\AppData\\Roaming\\.minecraft\\mods\\CreeperCraft.zip', 'wb+') 
```

和

```
import os
f = open(os.path.expandvars('c:\\users\\%USERNAME%\\AppData\\Roaming\\.minecraft\\mods\\CreeperCraft.zip'), 'wb+') 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-07T15:06:56.453

问题是`%USERNAME%`默认情况下不展开。[`os.path.expandvars`](http://docs.python.org/library/os.path.html#os.path.expandvars)在您的路径上使用。

```
fp = path.expandvars(r'c:\\users\%USERNAME%\AppData\Roaming\.minecraft\mods\CreeperCraft.zip') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T13:02:14.973

我的方法是在 Windows 资源管理器中使 AppData 文件夹“取消隐藏”，然后像使用其他文件一样通过 Python 正常访问它，即 Python 无法在 cmd 行上看到 AppData，直到您“取消隐藏”它，然后您可以将其作为普通目录访问。

# android - 共享首选项的布尔值问题

> ID：11848813
> 
> 赞同：1
> 
> 时间：2012-08-07T15:04:37.370
> 
> 标签：android, boolean, sharedpreferences

我目前正在尝试在手机启动时基于布尔值 false 或 true 启动服务。问题是如果我使用 getBoolean

```
 boolean isPhysicalSirenFlagged = sp.getBoolean("isPhysicalSirenFlagged", true);
 boolean isSMSSirenFlagged = sp.getBoolean("isSMSSirenFlagged", true); 
```

每当手机启动时，它们都会设置为 true，导致我的 isPhysicalSirenFlagged 和 isSMSSirenFlagged 都为 true。是否可以检查值的当前布尔值是什么？

代码：

```
SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(context);
     String value = sp.getString("serial", "");
     boolean isPhysicalSirenFlagged = sp.getBoolean("isPhysicalSirenFlagged", true);
     boolean isSMSSirenFlagged = sp.getBoolean("isSMSSirenFlagged", true);

     if (isPhysicalSirenFlagged) {
         //true
         Intent physicaldialog = new Intent(context, PhysicalTheftDialog.class);
         physicaldialog.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         context.startActivity(physicaldialog);
         context.startService(new Intent(context, PhysicalTheftService.class));
     }
     else {
         //false
     }

     if (isSMSSirenFlagged) {
         //true
         Intent smsdialog = new Intent(context, SMSNotificationPasswordDialog.class);
         smsdialog.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         context.startActivity(smsdialog);
         context.startService(new Intent(context, RemoteSirenService.class));
     }
     else {
         //false
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:07:39.320

将其设置为 false ，显然您所做的并不是对 SharedPrefereces 进行更改以指示标志。通过使用 false 作为默认值，您将防止对标志的意外 true 分配。说实话，您应该使用 int 标志（或首选枚举）来表示这一点。这是确定设备所处状态的一种更安全的方法。例如：

```
int NO_STATE    = 0
int IS_THEFTED  = 1
int IS_WAILING  = 2

or

enum State {
    NONE, THEFTED, WAILING;
} 
```

# php - 如何使用正则表达式在字符串中查找确切数量的数字和字符？

> ID：11848821
> 
> 赞同：-1
> 
> 时间：2012-08-07T15:05:17.573
> 
> 标签：php, regex

如果字符串最多包含 16 位数字和最多 11 个字符，但总共最多包含 27 个字符，我想匹配它。

我试过`(\d{0,16}\w{0,11}){27}`了，但它似乎不起作用。

**编辑 ：**

**MATCH：** `145214mkjnkj`或`1234567891011125abcdefghijk`（可以混合）

**不匹配：** `abababababab123`或`12345678910111213abc`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T15:06:36.957

只需去掉尾随量词，并使用锚来匹配字符串的开头和结尾：

```
/^(\d{0,16}\w{0,11})$/ 
```

where`^`匹配字符串的开头并`$`匹配字符串的结尾。现在这将匹配一个 0 - 16 位数字的字符串，后跟 0 - 11 个单词字符。请记住`\w`包括`[A-Za-z0-9_]`，如果您只想匹配字母字符，您可以这样做：

```
/^(\d{0,16}[a-z]{0,11})$/i 
```

**编辑：**由于（显然）数字和字符可以混合，您可以使用一个正则表达式来测试无效字符，然后进行一些额外的处理以确定每个字符类的最低要求是否满足另一个正则表达式，如下所示：

1.  首先是检查字符串是否包含任何无效字符。如果**匹配**，我们知道字符串**无效**：

    ```
    if( preg_match( '/[^\d\w]/', $input)) {
        echo "Invalid input - Only digits and characters allowed.\n";
    } 
    ```

    注意：以上假设`\w`对于字符，仅对于字母字符，使用`A-Za-z`.

2.  如果上面的检查通过，现在我们知道字符串只包含数字和字符，我们通过将所有数字替换为空字符串来测试它是否有足够的字符，并检查剩余的字符（仅是`\w`family) 是正确的长度。`$count`请注意此处命名的 by-reference 参数的使用，`$replacements`当我们检查字符串中有多少个字符时，它将隐式告诉我们字符串中有多少位：

    ```
    $only_characters = preg_replace( '/\d/', '', $input, -1, $replacements);
    if( strlen( $only_characters) > 11) {
        echo "Invalid input - You can only have at most 11 characters\n";
    }
    if( $replacements > 16) {
        echo "Invalid input - You can only have at most 16 digits\n";
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:20:29.113

我认为使用 REGEX 无法轻松或有效地完成您想要的操作。据我了解您的问题，您希望有效字符串的最大长度为 27 个字符，并且仅包含数字和字符（由 regex 定义`\w`）并且最多仅包含 16 个数字和 11 个字符。

为此，最好的办法是运行一些测试。

1.  它只匹配 0 到 27 个字符之间的单词和数字吗？正则表达式：`/[\d\w]{0,27}/`
2.  是否有 16 位或更少；正则表达式：`/\d/`然后计算匹配数
3.  是否有 11 个字符或更少；正则表达式：`/\w/`然后计算匹配数

我没有看到将它包装到一个正则表达式中的任何好处。

**注意**正如@nickb 所指出的，`\w`该类包含`\d`该类，因此您似乎必须定义自己的字符类来使用而不是`\w`- 类似于`[a-zA-Z_]`匹配所有拉丁语（不是外国重音字符）字母字符和下划线的东西。

# java - Using Multiset to count occurrences

> ID：11848822
> 
> 赞同：0
> 
> 时间：2012-08-07T15:05:18.463
> 
> 标签：java, guava

I'm currently using a Multiset to hold a maximum of three numbers. I need to check if:

1.  A number appears more than once
2.  A number and another number appear the same amount of times
3.  There is only one number
4.  The list is empty

Below is my current code. In this case, team is a Multimap and points is the Multiset:

```
for(int a = 0; a <= team.keySet().size(); a++)
{
    if(points.count(a) > 1)
    {
    // Point 1
    }
    else if(points.size == 1)
    {
    // Point 3
    }
    else if(points.isEmpty()
    {
    // Point 4
    }
} 
```

I'm stuck as to how I would implement Point 2 - any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T10:18:01.557

我真的不明白你为什么要对 Multimap 的 keySet 大小进行 for 循环，然后检查递增计数器的计数......

这就是我假设您提到的`Multimap`原因，因为您想`Multiset`从[`Multimap#keys()`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimap.html#keys%28%29). 这里有示例代码：

```
final class MultisetFromMultimap {
  public static void main(String[] args) {
    Multimap<Integer, Integer> team = ImmutableMultimap.of(
        1, 1,
        1, 2,
        2, 22,
        2, 33,
        3, 0);
    test(team, 2, 1);
    test(ImmutableMultimap.of(42, 42), 42, 1);
    test(ImmutableMultimap.<Integer, Integer>of(), 0, 1);
  }

  private static void test(Multimap<Integer, Integer> team,
      Integer test1, Integer test2) {
    System.out.println("multimap: " + team);
    Multiset<Integer> points = team.keys();
    System.out.println("multiset: " + points);

    boolean ad1 = points.count(test1) > 1; // point 1
    boolean ad2 = points.count(test1) == points.count(test2); // point 2
    boolean ad3 = points.size() == 1; // point 3
    boolean ad4 = points.isEmpty(); // point 4
    System.out.println("answers: " + Arrays.asList(ad1, ad2, ad3, ad4));
  }
} 
```

产生以下输出：

```
multimap: {1=[1, 2], 2=[22, 33], 3=[0]}
multiset: [1 x 2, 2 x 2, 3]
answers: [true, true, false, false]
multimap: {42=[42]}
multiset: [42]
answers: [false, false, true, false]
multimap: {}
multiset: []
answers: [false, true, false, true] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:25:36.947

怎么样 ：

```
Multiset<Integer> tmp = HashMultiset.create();
for(int a = 0; a <= team.keySet().size(); a++) {
  tmp.add(points.count(a));
} 
```

现在看看 tmp 是否有一个 count() > 1 的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:03:39.810

在`for`-loop 之前，声明 a如果某个数字 a 具有*键*条目，则
`Map<Integer,Boolean> numEntries = new HashMap<Integer,Boolean>();`
此映射将包含一个`true` *值。* 然后，在最后一个之后，您可以添加： *`else if`*

 *```
if (numEntries.containsKey(points.count(a)) && numEntries.get(points.count(a)){
    //Point 2, some other number has already had this number of entries
} else {
    numEntries.put(points.count(a), true); // a has this number of entries!
    //Or do something more complicated to save that it was the number a that
    //"was here first" (you could change the value type from Boolean to Integer
    //or something to save this information)
} 
```

由于对 points.count(a) 的大量使用，我会考虑将其设为局部变量。

**编辑**以前有错误的逻辑，上面的代码现在应该可以正常运行*

# javascript - 将 jQuery Mobile 用于数据驱动应用程序的正确方法？

> ID：11848825
> 
> 赞同：3
> 
> 时间：2012-08-07T15:05:33.483
> 
> 标签：javascript, jquery-mobile, jquery, mobile-website

我已经开始使用 jQuery Mobile，我试图了解我应该如何处理点击和传递数据。例如，我有一个项目列表视图。点击后，我想将用户带到应用程序中的另一个页面，该页面基于单击的项目 ID 生成。我会将数据 ID 存储在自定义 data-* 属性中并将单击事件绑定到它，以便我可以将它们发送到其他页面吗？还是我应该使用本机方法或第 3 方库？我正在使用 REST 服务，但如果这有所不同，则底层后端是 ASP.NET MVC 应用程序。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:13:13.000

我使用的是 Sencha Touch 而不是 jQuery Mobile。但是 Sencha Touch 对路由提供了很好的支持，这就是您要解决的问题的名称。您应该仔细考虑是否希望在客户端或服务器端进行路由。Sencha Touch 支持客户端，这正成为更流行的方法，因为它有助于良好的离线行为。从我读到的内容来看，jQuery Mobile 的[路由支持可能并不完善，但其他库（如 Backbone）可以](http://forum.jquery.com/topic/advanced-routing-and-jquery-mobile)[填补这一空白](http://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/)。另见[脊柱](http://spinejs.com/)、胸部。Spine 特别推荐给我用于移动路由。 [这个站点](http://bennolan.com/2010/11/23/backbone-and-jquery-mobile.html)提出了一个 jQuery 补丁来改进路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:27:05.980

JQM 会为您执行此操作，只需将链接放在您的列表视图 LI 元素中，JQM 将使用箭头呈现它们，并通过 AJAX 拉入内容。

```
<ul data-role="listview">
  <li><a href="/page?item=1">Item 1</a></li>
  <li><a href="/page?item=2">Item 2</a></li>
</ul> 
```

然后 URL /page?item=1 应该为该项目生成页面内容：

```
<div data-role="page">
    ...
</div> 
```

# django - 为什么 Django South 在删除字段时需要默认值？

> ID：11848831
> 
> 赞同：19
> 
> 时间：2012-08-07T15:05:54.000
> 
> 标签：django, django-south

当我使用 Django South 删除 NOT NULL 字段时，我收到以下消息：

```
? 'VisitOrder.end_date' 字段没有指定默认值，但不是 NULL。
? 由于您要删除此字段，因此您必须指定默认值
? 用于现有行的值。你是否想要：
? 1\. 现在退出，并在models.py中的字段添加一个默认值
? 2\. 现在指定一个一次性值用于现有列
? 3\. 通过引发异常禁用向后迁移。
? 请选择一个选项：

```

为什么南方需要这个，因为无论如何它都会移除这个领域？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-07T15:17:58.997

Django South 允许您通过迁移向前或向后移动。因此，如果您决定撤消迁移，South 将重新创建已删除的字段。这就是为什么 South 询问您是否要指定默认值或“通过引发异常来禁用***向后迁移”。***

# router - NAT 多久回收一次映射

> ID：11848833
> 
> 赞同：0
> 
> 时间：2012-08-07T15:05:55.623
> 
> 标签：router, nat

假设我在某个 NAT 后面（类型无关紧要），并且我想将数据包发送到公共 Internet。我第一次发送数据包时，我的数据包会被 NAT，NAT 会为我的数据包分配和映射一些外部端口号。如果我继续（非常频繁地）从我的私人机器发送具有相同源端口的数据包，那么据我所知（通过检查服务器目标上的数据包地址），相同的 NAT 映射仍然存在。

但是，如果我在发送数据包之间等待约 1-2 分钟，下次我发送数据包时，NAT 似乎已经回收了 NAT 映射并分配了不同的外部端口。NAT 通常会等待多长时间才能回收映射？是否有*所有*NAT 符合的最短时间（如标准规范）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:40:26.123

我能找到的最接近答案的是[draft-audet-nat-behave-00 的第 14 页](https://datatracker.ietf.org/doc/html/draft-audet-nat-behave-00#page-14)。本文档规定 NAT 不得在 2 分钟之前使动态 UDP 绑定失效，建议的时间为 5 分钟，而 TCP 绑定的时间为 7800 秒。

在实践中，我们最终每 50 秒发送一个微不足道的刷新数据包，以确保我们的 UDP 绑定在我们的应用程序中保持活动状态。

# c# - 无效的 ViewState / Base-64 字符串中的无效字符

> ID：11848834
> 
> 赞同：2
> 
> 时间：2012-08-07T15:05:56.140
> 
> 标签：c#, asp.net, viewstate

我已经阅读了多个类似的帖子。例如：

*   [base-64 字符串中的无效字符 - ViewState？](https://stackoverflow.com/questions/8731010/invalid-character-in-a-base-64-string-viewstate)
*   [Base-64 字符串中的无效字符](https://stackoverflow.com/questions/3054583/invalid-character-in-a-base-64-string)

但没有人为我提供解决方案。我知道出了什么问题，我将尝试遍历我的代码。

这种情况每天只发生在少数用户身上，而且他们都使用 IE。Firefox 可以正常工作。

我有一个 aspx 页面，其中包含我的网上商店的注册表单。当用户单击“继续”时，我会进行回发以验证数据。如果一切正常，我运行以下代码：

```
public void Proceed(Object sender, EventArgs e)
{
   if (IsValid)
   {
      SaveCustomerInfo();
      ScriptManager.RegisterStartupScript(
          this, this.GetType(),
          "RedirectPaymentGateway",
          "RedirectPaymentGateway('" + paymentData + "');", true);
   }
} 
```

该脚本将用户重定向到支付网关，如下所示：

```
function RedirectPaymentGateway(paymentData) {
    $(document).ready(function() {
        try {
            var div = document.createElement('div');
            div.innerHTML = paymentData;                
            var formDataObj = jQuery.parseJSON(div.firstChild.nodeValue);

            var form = "<form>FORM CONSTRUCTION</form>";

            $('#pnlPaymentGateway').html(form);
            $('#pnlPaymentGateway').submit();
        }
        catch (e) {
            alert(e);
        }            
    });
} 
```

（`paymentData`是 .net 对象的 JSON 序列化。）

我猜这段代码破坏了与视图状态相关的东西，但我不知道如何或为什么。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T18:29:52.963

我刚刚与用户遇到了这个问题。它只发生在 IE 上，而不是所有用户。Firefox 和 Chrome 运行良好。

要解决此问题，请打开 IE 并执行以下操作：

1.  单击工具。（您可能需要先通过右键单击顶部栏来启用菜单栏。）
2.  单击 Internet 选项。
3.  单击高级选项卡。
4.  单击重置。
5.  选中该框以删除个人设置。
6.  确认直到返回 IE。
7.  重新启动浏览器。

问题将得到解决。

# c# - 如何从端口读取并写入exe文件而不会损坏

> ID：11848837
> 
> 赞同：0
> 
> 时间：2012-08-07T15:06:01.363
> 
> 标签：c#, ftp, at-command

我正在使用 AT 命令并使用 FTP 下载文件。在我们发送 RETR a.exe 之前，我们一切正常。

文件数据也在端口上发送。但它包含响应头，如 RECEIVE:1,1400 ， 150 connection accepted 等。我们如何编写此文件，以便我们将拥有一个未损坏的 a.exe，它将在客户端设备上运行。请指教。我们正在使用 C#。我们是否应该删除标题。我们该怎么做呢 。得到一个好的exe文件？

谢谢

# list - 有没有办法在 OSGi 应用程序中查看已注册的服务？

> ID：11848839
> 
> 赞同：13
> 
> 时间：2012-08-07T15:06:08.167
> 
> 标签：list, service, osgi

我有一个运行 Equinox 的 OSGi 应用程序。我想查看应用程序提供的服务。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-07T15:56:31.940

从 gogo shell 类型：

```
inspect cap service 
```

这将显示所有捆绑包注册的所有服务。如果要显示特定捆绑包的服务，请键入：

```
inspect cap service <id> 
```

`<id>`您感兴趣的捆绑包的数字捆绑包 ID在哪里。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-07T15:18:56.873

这取决于您的意思是交互方式、使用 OSGi shell 还是以编程方式从您的应用程序中。

**交互式**

您可以使用[Equinox 控制台](http://www.vogella.com/articles/OSGi/article.html#osgiconsole_commands)。见“服务”。要仅查看已部署的服务，您需要使用 LDAP 过滤器。这是一个例子：

```
(objectClass=my.package.name.*) 
```

另请参阅@Neil Bartlett 的答案，这可能更容易，因为您可以通过捆绑 ID 进行限制（假设您知道，但这很容易找到）。

**以编程方式**

使用 ServiceTracker 方法。[尼尔也写了这一切](http://www.eclipsezone.com/eclipse/forums/t91059.rhtml)，所以一定要给他你的支持:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T06:25:46.577

到目前为止，我的意思是到目前为止，**查看**您的服务和数千个详细信息的最佳方式是使用[Apache Felix Webconsole](http://felix.apache.org/documentation/subprojects/apache-felix-web-console.html)，然后安装[XRay](https://jpm4j.org/#!/p/sha/1E4A5D92C46D7EC829C537471068ED7FBF7B9433//0.0.0)。您可能想阅读我关于此捆绑包的[第一](http://softwaresimplexity.blogspot.fr/2012/05/x-rays-for-osgi.html)篇和[第二篇博客。](http://softwaresimplexity.blogspot.fr/2012/07/xray-again.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-18T21:00:04.027

根据[API docs][1]，您可以调用`getContext().getAllServiceReferences(clazz, filter)`方法来获取在指定类下注册并匹配指定过滤器表达式的所有服务的列表。传递`null`这两个参数将获得所有服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-02T09:26:28.090

如果您只想启动已注册但未启动的特定服务并希望动态启动它，您可以使用以下方式获取捆绑包：

```
Bundle bundle = Platform.getBundle("com.example.com.class"); 
```

//然后启动捆绑

```
bundle.start(); 
```

//检查服务引用

```
ServiceReference<IExampleService> serviceReference = b.getBundleContext().getServiceReference(IExampleService.class); 
```

# delphi - Delphi - 将内容转换为二进制数据 - 相当于 PHP 中的 pack()

> ID：11848846
> 
> 赞同：0
> 
> 时间：2012-08-07T15:06:24.150
> 
> 标签：delphi

我正在使用 Delphi XE2，Delphi 中是否有与 PHP 中的 pack() 等效的命令？我需要将包含整数和字符串的 Delphi 记录转换为二进制，以便通过 TCP 传输。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:56:47.127

There is no built in method that will convert a generic record into binary form (or vice versa). You will need to either:

1.  Write your own dedicated code to do so, or
2.  Find and use an object persistence library.

# perl - Perl：将哈希引用加上其他键/值作为一个哈希引用传递的正确方法是什么？

> ID：11848857
> 
> 赞同：1
> 
> 时间：2012-08-07T15:06:54.920
> 
> 标签：perl, hash, arguments, parameter-passing, hashref

目的是仅修改传递给函数的 hashref 参数，而不是修改原始 hashref。

```
{
    my $hr = { foo => q{bunnyfoofoo},
               bar => q{barbiebarbar} };

    foo( { %$hr, baz => q{bazkethound} } );
}

sub foo {
   my $args = shift // {};
} 
```

我认为上述方法可行，但不确定是否有更好的方法（除了在通过之前修改原始参考）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:12:54.820

无论您选择哪种语法，它仍然会归结为原始副本的浅层或深层（如果您需要修改内部函数）。

如果保证您的函数及其内部的所有内容都不会修改哈希，那么在调用之前分配此键并恢复先前的值或在调用后将其删除也足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:15:38.490

您的代码尽可能简单。您需要传递一个哈希并且您不想修改现有的哈希，因此您需要创建一个新的哈希。就是`{ }`这样。

潜在的问题是`foo`采用哈希引用而不是键值列表。

```
sub foo {
   my %args = @_;
   ...
} 
```

你仍然可以做你之前所做的一切：

```
foo( foo => 'bunnyfoofoo', bar => 'barbiebarbar' ); 
```

```
my $hash = {
   foo => 'bunnyfoofoo',
   bar => 'barbiebarbar',
};
foo( %$hash, baz => 'bazkethound' ); 
```

有两个优点。

1.  您不必到处使用`{ }`。

2.  您可以安全地修改参数。

    这是错误的：

    ```
    sub f {
       my $args = $_[0] // {};
       my $foo = delete($args->{foo});
       my $bar = delete($args->{bar});
       croak("Unrecognized args " . join(', ', keys(%$args)))
          if %$args;
       ...
    } 
    ```

    还行吧：

    ```
    sub f {
       my %args = @_;
       my $foo = delete($args{foo});
       my $bar = delete($args{bar});
       croak("Unrecognized args " . join(', ', keys(%args)))
          if %args;
       ...
    } 
    ```

# javascript - chrome改变cookie路径

> ID：11848862
> 
> 赞同：9
> 
> 时间：2012-08-07T15:07:22.070
> 
> 标签：javascript, jquery, jquery-ui, google-chrome, cookies

我有一个 Web 应用程序 (ASP.NET MVC3)，它使用带有 cookie 插件的 jquery ui 选项卡控件（如此处所示[）](http://jqueryui.com/demos/tabs/#cookie)。

创建选项卡时，我使用 path 选项设置 cookie 的路径：

```
$("#tabs").tabs({ cookie: { path: '/A/' } }); 
```

在 Firefox 中，这可以正常工作。无论“/A/”（例如“A/B/C”）之后的 URL 是什么，选项卡控件始终正确记住上次选择的选项卡并在我重新加载页面时切换到它。

但是，在 Chrome (v21) 上，有时浏览器会添加另一个具有不同路径的选项卡 cookie。然后我最终得到了两个 cookie，一个具有我最初创建的路径“/A/”，另一个具有路径“/A/B/”，这是我当前所在的 url。不幸的是，这个“双重 cookie”似乎会导致在页面刷新时有时会加载错误的选项卡，因为这两个 cookie 似乎有冲突。

有什么办法可以防止chrome中的这种行为？我尝试了几种编程解决方案（例如，如果路径包含“/A/”，则强制路径指向“/A/”，但由于从未到达该代码，似乎 chrome 正在自动执行此操作）。

谢谢您的帮助！

似乎问题在于chrome无法区分不同路径上具有相同名称的cookie；所以我在我的应用程序中拥有的另一个选项卡控件把事情搞砸了。一旦我给 cookie 起了一个独特的名字，事情就开始正常工作了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:37:00.337

我刚刚将一个[**示例**](https://github.com/f0t0n/jQuery-UI-tabs-with-cookie-example)推送到 GitHub 存储库。似乎它在我的 Linux 下的 Chrome 21 中运行良好。

[第一条路径截图](https://docs.google.com/open?id=0B2uD9Ovt0FTyeHBkTTFQNG9MRW8)

[第二条路径截图](https://docs.google.com/open?id=0B2uD9Ovt0FTyV21UZnZfd19SSXc)

如果您使用的是 jQuery UI >= 1.7，那么将具有一些独特值（例如“my-absolutely-unique-cookie”）的属性“name”添加到您传递的 cookie 对象中，看看它是如何进行的：

```
$("#tabs").tabs({
    cookie: {
        name: 'my-unique-cookie',
        // store cookie for a day, without, it would be a session cookie
        expires: 1,
        path: '/tabs'
    }
}); 
```

# c# - 更新/插入信息时出错

> ID：11848866
> 
> 赞同：3
> 
> 时间：2012-08-07T15:07:36.107
> 
> 标签：c#, asp.net

我在下面收到此错误：

> ORA-01036: 非法变量名称/编号。

该错误仅在单击更新或删除时发生（所有文本框必须完整才能使更新生效）。我最终从 SQL 数据库更改为 Oracle 数据库，但我一直在这里和那里遇到一些小问题。编辑和取消一行工作正常。下面我将包括我的查询：

```
protected void gv_RowCommand(object sender, GridViewCommandEventArgs e)
    {

        if (e.CommandName == "Insert") //- this is needed to explain that the INSERT command will only work when INSERT is clicked
        {
            gv.DataBind();

            DataTable d = dbcon.GetDataTable("SELECT * FROM CIS.CIS_TRANS ORDER BY ID DESC", "ProjectCISConnectionString");

            string transCode = "", fundCode = "", BSA_CD = "", DP_TYPE = "";

            if (d.Rows.Count > 0)
            {
                transCode = d.Rows[0]["TRANS_CD"].ToString();
                fundCode = d.Rows[0]["FUND_CD"].ToString();
                BSA_CD = d.Rows[0]["BSA_CD"].ToString();
                DP_TYPE = d.Rows[0]["DP_TYPE"].ToString();

                if (transCode.Trim().Length > 0)
                {
                    dbcon.Execute("INSERT INTO CIS.CIS_TRANS (ID,TRANS_CD) VALUES(CIS.S_CIS_TRANS.nextval,'')", "ProjectCISConnectionString");

                    gv.DataBind();
                }
            }

            gv.EditIndex = gv.Rows.Count - 1;

        }
        else if (e.CommandName == "Cancel")
        {
            DataTable d = dbcon.GetDataTable("SELECT * FROM CIS.CIS_TRANS ORDER BY ID DESC", "ProjectCISConnectionString");

            string transCode = "";

            if (d.Rows.Count > 0)
            {
                transCode = d.Rows[0]["TRANS_CD"].ToString();

                if (transCode.Trim().Length == 0)
                {
                    dbcon.Execute(string.Format("DELETE CIS.CIS_TRANS WHERE ID = '{0}'", d.Rows[0]["ID"]), "ProjectCISConnectionString");

                    gv.DataBind();
                }
            } 
```

如果你们需要我包含我的代码的其他部分，请随意说。我将立即将其包括在内。

下面是我的源代码：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ProjectCISConnectionString %>" ProviderName="<%$ConnectionStrings:ProjectCISConnectionString.ProviderName %>"
            SelectCommand="SELECT * FROM CIS.CIS_TRANS ORDER BY ID ASC" 
            DeleteCommand="DELETE FROM CIS.CIS_TRANS WHERE ID = @ID"
            InsertCommand="INSERT INTO CIS.CIS_TRANS (TRANS_CD,FUND_CD,BSA_CD,DP_TYPE,TRANS_CD_DESC) VALUES (@TRANS_CD,@FUND_CD,@BSA_CD,@DP_TYPE,@TRANS_CD_DESC)"
            UpdateCommand="UPDATE CIS.CIS_TRANS SET TRANS_CD = @TRANS_CD, FUND_CD = @FUND_CD, BSA_CD = @BSA_CD, DP_TYPE = @DP_TYPE, TRANS_CD_DESC =@TRANS_CD_DESC WHERE ID = @ID">

        </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:37:26.613

Oracle ADO.NET 库需要前缀`:`，而不是`@`在您传递给其引擎的每个参数中。

只需将参数的前缀从更改`@`为`:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:34:03.987

您的 ID 字段是数字还是字符串。可能是 Cancel 有效而 DELETE 失败，因为在 Cancel 中，您在 ID 值周围使用单引号，而在 DELETE 中却没有。

# android - ContentResolver.insert() 没有立即反映？

> ID：11848871
> 
> 赞同：2
> 
> 时间：2012-08-07T15:07:49.630
> 
> 标签：android, android-contentprovider, android-contentresolver

我的活动的以下代码片段在我的应用程序的后续调用中`onCreate()`效果很好（即`cursor.moveToFirst()`是**true ）：**

```
ContentValues values = new ContentValues();
values.put(MyProvider.Notes.TITLE, "title");
values.put(MyProvider.Notes.NOTE, "note");
ContentResolver cr = getContentResolver();
Uri newlyInsertedRecord = cr.insert(notesUri, values);

if (cursor.moveToFirst()) {
    int id = cursor.getInt(0);
    String ttl = cursor.getString(1);
    String nte = cursor.getString(2);
    Log.i(TAG, id + ", "+ ttl + ", "+ nte);
}
else
    Log.e(TAG, "Why isn't the insert reflected immediately?"); 
```

所以，我*确定*正确`cr.insert()`执行。

但是在**第一次**调用我的应用程序时，`cursor.moveToFirst()`返回**false**，尽管`cr.insert()`前面有它。

为什么？

我需要某种“刷新”或“关闭”声明吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:15:38.410

插入后您需要获取一个新游标，因为游标本身不会监听数据库中的更改。

或者编写一个[Content Observer](http://developer.android.com/reference/android/database/ContentObserver.html)并将更改[通知](https://stackoverflow.com/questions/9680916/listen-to-any-changes-in-a-cursor-in-android)它。

# string - 如何为 MapRoute 传递字符串类型？

> ID：11848876
> 
> 赞同：1
> 
> 时间：2012-08-07T15:08:19.343
> 
> 标签：string, asp.net-mvc-3, maproute, routelink

你们能检查一下这个MapRoute吗，

```
routes.MapRoute(
                "Topic", // Route name
                "{controller}/{action}/{letter}", // URL with parameters
                new { controller = "Topic", action = "Letter", letter = UrlParameter.Optional } // Parameter defaults
            ); 
```

我正在传递一个名为“字母”的对象。这是一个字符串。我在这里遇到的问题是，当我使用 .RouteLink() 函数传递它时

```
@Html.RouteLink(item, "Topic", new { controller = "Topic", action = "Letter", letter = "A" }) 
```

结果为空，为字母。

```
public ActionResult Letter(string letter)
{
return View();
} 
```

有没有办法在 MapRoute 上传递字符串类型？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-16T09:42:10.917

你可以这样做

```
routes.MapRoute(
            "Topic",                                           // Route name
            "Topic/{entry}",                                  // URL with parameters
            new { controller = "Topic", action = "Letter" }  // Parameter defaults
        ); 
```

# windows-8 - 为 WinRT xaml 制作 AutoCompleteTextBox 的建议方法？

> ID：11848877
> 
> 赞同：1
> 
> 时间：2012-08-07T15:08:23.370
> 
> 标签：windows-8, windows-runtime, windows-store-apps, winrt-xaml

我正在尝试让自己成为一个 AutoCompleteTextBox，当输入它时会在下拉列表中显示建议。

通过从头开始编写一个新的用户控件，我设法让这个工作（有一些小问题）。

然而，经过一番阅读，似乎不推荐这种“重新发明轮子”的方法，它让我觉得我拥有的功能非常接近组合框，它有一个文本框而不是切换按钮。

有什么方法可以扩展 ComboBox，稍微更改它的模板并允许我编写一些方法来根据输入的文本填充下拉项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T16:05:20.267

Reinventing the wheel is risky, but then again an AutoCompleteTextBox is logically not the same as a ComboBox. You might for example want to provide some callbacks to provide autocomplete items to the text box based on text entered instead of providing a single ItemsSource of all options possible. Also ComboBox displays all items in the ItemsSource and you would not have enough control to filter or reorder them. You could however look for existing solutions to this problem. There is one [here](https://github.com/hermitdave/HermitDaveWinRTControls/blob/master/HermitDaveControls/AutoCompleteTextBlock.cs) for example. I have not tested it but [Hermit Dave](https://github.com/hermitdave/HermitDaveWinRTControls/blob/master/HermitDaveControls/AutoCompleteTextBlock.cs) is known in the developer community, so it should be a good base for whatever you need. You could make changes to this control and contribute to the development and that would not be reinventing the wheel.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:45:12.073

在实际应用程序中只有一种可接受的自动完成方法：http: [//blog.petegoo.com/index.php/2011/11/22/building-an-auto-complete-control-with-reactive-extensions-rx /](http://blog.petegoo.com/index.php/2011/11/22/building-an-auto-complete-control-with-reactive-extensions-rx/)

我再严肃不过了。

# java - 在 Java 中每秒更新游戏 x 次

> ID：11848878
> 
> 赞同：0
> 
> 时间：2012-08-07T15:08:25.717
> 
> 标签：java, swing, time, updating

我对游戏编程有点陌生，我决定用 Java 做一个小实验。我正在使用 Swing/AWT api 通过在 JPanel 上绘图来实现游戏。但是，我不确定如何在游戏中实现“打发时间”。有人对此有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:12:44.917

也许您应该查看Java中的**线程：** [http](http://www.javaworld.com/jw-04-1996/jw-04-threads.html) ://www.javaworld.com/jw-04-1996/jw-04-threads.html 创建一个专门用于重新绘制和处理游戏循环的新线程（请参阅其他答案） .

编辑：本教程可能有用：http: [//zetcode.com/tutorials/javagamestutorial/](http://zetcode.com/tutorials/javagamestutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:13:15.400

您要查找的内容称为游戏循环。有很多关于此的文档。这是一个简单的：

```
private boolean isRunning;

public void gameLoop()
{
    while(isRunning) //the loop
    {
        doGameUpdates();
        render();
        Thread.sleep(1000); //the timing mechanism
    }
} 
```

这个想法是while循环内的代码被一遍又一遍地执行，并且在执行之间会休眠1秒。这是实现“时间流逝”的一种方式。例如，如果您有一个具有 X 位置的对象，并且在您 put 的 while 循环中`object.X += 1`，该对象的 X 位置将在循环的每次迭代中前进 1，即每秒 1。

这是一个非常基本的游戏循环，它有一些问题，但如果你是初学者，它就可以了。一旦您变得更有经验，请查找可变和固定时间步长的游戏循环。

但是，您必须在单独的线程中运行此代码，以便实际更新显示。

# google-apps-script - 获取 Google 电子表格中每一行的最后一列的索引

> ID：11848880
> 
> 赞同：1
> 
> 时间：2012-08-07T15:08:35.070
> 
> 标签：google-apps-script, google-sheets

我的 Google 电子表格中有一个包含所有行和列的范围。我正在遍历每一行。如果我的条件语句为真，我需要在最右列的行中附加一些数据。

关于我如何实现这一目标的任何指示？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T05:56:06.993

关键是将范围数据放入数组中；然后遍历数组；然后写回数组。对像单元格这样的电子表格对象进行操作效率相对较低。

```
function writeRows() {
  // This is the named range you have.
  var range = SpreadsheetApp.getActiveSpreadsheet().getRangeByName("myRange");

  // Get the data and iterate through it rather than iterate through rows.
  var dataarray = range.getValues();

  // For each row.
  for (var rowpos = 0; rowpos < dataarray.length; rowpos++) {
    // Get the row data as array.
    var rowdata = dataarray[rowpos];
    Logger.log(rowdata.length);

    // Update last column in this row.
    dataarray[rowpos][rowdata.length - 1] = "value to set";
  }
  // Now write back the array values into the range.
  range.setValues(dataarray);
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T15:31:42.537

这是我用来将一行附加到电子表格的方法：

```
 var ss = SpreadsheetApp.openById('spredsheetID').getSheets()[0];
  var range = ss.getRange(ss.getLastRow()+1, 1, 1, 2);
  var values = [[new Date(), mystring]]; 
  range.setValues(values); 
```

它更新前 2 列...

# asp.net-mvc-3 - Razor 是否支持表达式生成器？

> ID：11848881
> 
> 赞同：2
> 
> 时间：2012-08-07T15:08:39.720
> 
> 标签：asp.net-mvc-3, razor

有什么可以替代`<%$ %>`普通 ASP.NET Web 窗体的语法吗？

使用 Web 表单引擎，可以使用以下语法访问全局资源：

`<%$ Resources: Homepage.Labels.Title %>`

也可以[创建和注册自定义表达式构建器](http://haacked.com/archive/2006/11/29/Express_Yourself_With_Custom_Expression_Builders.aspx/)。

我在问 Razor 引擎是否也支持这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:18:55.747

还没有接触过 Razor，但也许这会让你继续前进

@Resources.General.Hello 语法：Resources.[ResourceName].[Property]

来自： [如何使用asp.net mvc razor在视图中访问全局资源](https://stackoverflow.com/questions/11399068/how-to-access-global-resources-in-a-view-using-asp-net-mvc-razor)

希望这可以帮助

# java - Java/Android 上 BigDecimal 的强大功能

> ID：11848887
> 
> 赞同：8
> 
> 时间：2012-08-07T15:09:05.430
> 
> 标签：java, android, bigdecimal

我有一个简单的 BigDecimal，我想为另一个 BigDecimal 供电，例如 11.11^-1.54。在 Java/Android 中最简洁的方法是什么？我不喜欢转换为双打的想法，因为它是用于医疗应用的，所以我会很感激可能的最大精度。到目前为止，我已经查看了来自 Google Guava 的[http://commons.apache.org/math/](http://commons.apache.org/math/)和数学资料，但一无所获。

编辑：整个计算很复杂，并且有很多这样的操作。最后我需要尽可能多的精确度。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-21T10:29:22.283

BigDecimal 的实用程序类[https://github.com/tareknaj/BigFunctions](https://github.com/tareknaj/BigFunctions)

z = x^y --> z = exp ( ln(x) * y ) 的示例

```
final int SCALE = 10;
BigDecimal x = new BigDecimal(1);
BigDecimal y = new BigDecimal(12);

BigDecimal z = BigFunctions.exp( BigFunctions.ln(x, SCALE).multiply(y),SCALE ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T15:14:31.923

您需要多少位数的精度？您在示例中仅使用 4 位数字。如果这是医学上的并且适用于现实世界，那么您只能将现实世界中的大多数事物测量到 10-13 位的准确度，而 double 的准确度最高可以达到 16 位。

```
System.out.println(Math.pow(11.11, -1.54)); 
```

印刷

```
0.024524510581710988 
```

如果您使用本书[http://www.apropos-logic.com/nc/](http://www.apropos-logic.com/nc/)中的库，您可以获得

```
int runs = 10000;

long start = System.nanoTime();
double x1 = 0;
for (int i = 0; i < runs; i++)
    x1 = Math.pow(11.11, -1.54);
long time = System.nanoTime() - start;
System.out.println(x1 + " took " + time / runs / 1e3 + " us avg.");

long start2 = System.nanoTime();
BigDecimal x2 = null;
for (int i = 0; i < runs; i++)
    x2 = exp(ln(BigDecimal.valueOf(11.11), 20).multiply(BigDecimal.valueOf(-1.54)), 20);
long time2 = System.nanoTime() - start2;
System.out.println(x2 + " took " + time2 / runs / 1e3 + " us avg."); 
```

打印（我们为微秒）

```
0.024524510581710988 took 0.478 us avg.
0.02452451058171098739 took 603.769 us avg. 
```

40位精度

```
0.0245245105817109873886495555036930857940 took 1409 us avg. 
```

在您的设备上可能仍然足够快。

我没有包含代码，部分原因是它很长。我对它的速度印象深刻。;)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T15:27:10.067

查看[“Java Number Cruncher: The Java Programmer's Guide to Numerical Computing”](http://books.google.com.au/books?id=h0d8hVA5HyQC&dq=books%2bJava%2bNumber%2bCruncher%3a%2bThe%2bJava%2bProgrammer%27s%2bGuide%2bto%2bNumerical%2bComputing&printsec=frontcover&source=bn&hl=en&ei=MOLjSaPQBdaSkAX4w-nbCw&sa=X&oi=book_result&ct=result&resnum=4) - 第 12.5 章 Big Decimal Functions：有一些源代码具有尽可能精确的算法来计算指数和对数。

使用数学公式： x^y=exp(y*ln(x)) 您可以获得最高精度的结果。

尽管如此，双打确实具有良好的精度，我强烈建议您测试它是否不够精确以满足您的需要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T17:18:04.903

有一个很好的库 ApFloat： http: [//www.apfloat.org/](http://www.apfloat.org/)

# javascript - 关闭对话框后释放 Java 小程序

> ID：11848892
> 
> 赞同：-1
> 
> 时间：2012-08-07T15:09:18.790
> 
> 标签：javascript, jquery-ui, applet, jquery-ui-dialog, japplet

关闭 Jquery UI 对话框后是否有处理 Java Applet 的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:15:24.943

您可以绑定事件`dialogclose`，然后在回调中附加您的小程序：

```
$("#dialog").bind("dialogclose", function() {
    // make applet and append to body
}); 
```

[挂钩对话框关闭事件](https://stackoverflow.com/questions/171928/hook-into-dialog-close-event)

# asp.net-mvc-3 - Internet Explorer 未对用户进行身份验证

> ID：11848893
> 
> 赞同：0
> 
> 时间：2012-08-07T15:09:34.103
> 
> 标签：asp.net-mvc-3, internet-explorer

我正在开发这个小 MVC 项目，该项目正在成形。刚才我想我会在 Internet Explorer 中测试它，它显示了一些奇怪的行为，我真的不知道在哪里寻找原因/解决方案。

它在这里直播：[www.begijnhof.net/CodeBox](http://www.begijnhof.net/CodeBox)

在 FireFox、我的 WP7 手机上的 IE、iphone 或 Chrome 上的 safari 中，您注册/登录，它会将您带到主页，然后在页面左上方显示额外的按钮。

在 IE 中，当您提供正确的凭据时`(user/user1*)`，我认为它会进行身份验证，因为它不会显示任何错误，并且会在您提供错误的凭据时进行。但它没有显示按钮等。

在对其进行了更多测试之后，它仍然有效，即使我删除了所有的 cookie 等，但明天左右它很快就不会再工作了。

谁能在这个问题上指出我正确的方向？谢谢..

好的，对不起：我在考虑第二个问题，错误的代码！所以登录过程如下：

```
[HttpPost]
    public ActionResult LogIn(LogOnViewModel model)
    {
        if (ModelState.IsValid)
        {
            if (members.ValidateUser(model.Username, model.Password))
            {
                FormsAuthentication.SetAuthCookie(model.Username, false);
                return RedirectToAction("List", "Snippet");
            }

            //Check to see what's wrong 
            if (userRepo.IsUserLockedOut(model.Username))
                ModelState.AddModelError("", "Authentication failed!");
            if (userRepo.Users.FirstOrDefault(u => u.Username == model.Username) == null)
                ModelState.AddModelError("", "User does not exists!");
            if (!userRepo.IsUserLockedOut(model.Username) && userRepo.Users.FirstOrDefault(u => u.Username == model.Username) != null)
                ModelState.AddModelError("", "The password is not correct!");
            return View(model);
        }
        return View(model);
    } 
```

编辑：我想我找到了导致它的原因，但没有解决方案。

它所在的域具有隐藏功能，因此 URL 始终是 /CodeBox，这会导致一些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:33:31.517

我认为问题是这样的：

```
if (members.ValidateUser(model.Username, model.Password)) 
{ 
    FormsAuthentication.SetAuthCookie(model.Username, false);
    return RedirectToAction("List", "Snippet"); 
} 
```

将第二个参数设置`FormsAuthentication.SetAuthCookie`为 false 意味着 cookie 不会在浏览器会话中持续存在。这意味着如果您关闭浏览器，cookie 就会被删除。尝试将其设置为 true：

```
if (members.ValidateUser(model.Username, model.Password)) 
{ 
    FormsAuthentication.SetAuthCookie(model.Username, true);
    return RedirectToAction("List", "Snippet"); 
} 
```

# html - 使用 CSS 将摩天大楼图像添加到网页的“边缘”

> ID：11848896
> 
> 赞同：-1
> 
> 时间：2012-08-07T15:09:38.727
> 
> 标签：html, css, web

我在 www.mariodecristofano.com/vrtraining 有一个站点，我想在其中添加一个类似于[http://www.veteransretreat.org.uk/managecontent.aspx?mta_dmd=welcome_to_veterans_retreat&object.id=10105](http://www.veteransretreat.org.uk/managecontent.aspx?mta_dmd=welcome_to_veterans_retreat&object.id=10105)的图像。

我有图像，但是如何操作 CSS，这里是：http: [//www.mariodecristofano.com/vrtraining/css/style.css](http://www.mariodecristofano.com/vrtraining/css/style.css)？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:26:08.947

尝试使用 css 属性`right:0`（如果你希望它位于右边缘，左上角和左下角也是可用的属性），首先你必须通过 css 属性给你的图像一个绝对位置`position:absolute`。Z 索引将确定您的页面在上面或下面，z 索引越高，越高（好像它越来越靠近您的脸）

HTML：

```
<img class='SS src='path/skyScraper'> 
```

CSS：

```
img.SS {
       position:absolute;
       right:0;
       z-index:2;
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:13:03.093

如果你调整窗口大小，你会看到图像实际上停靠在中心，只是图片本身非常大，图形设计在身体右侧。

所以要重现：

*   制作大图
*   考虑身体空间，将图形推到图像的右侧
*   使用此 css 将图像 css 到身体顶部的中心：

`background: url('/path/to/image') no-repeat center top;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:14:07.843

检查上述网站显示：

```
body {
    background-image: url(../images/veterans-retreat-background.jpg);
    background-repeat: no-repeat;
    background-position: top center;
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
    background-color: white;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 12px;
} 
```

这些`background-*`属性是您感兴趣的。您还可以使用`background-position: top right;`右对齐图像。

# oracle - 选择最后 12 行 oracle

> ID：11848905
> 
> 赞同：5
> 
> 时间：2012-08-07T15:10:16.430
> 
> 标签：oracle, select

我想在 oracle 中进行选择，返回或多或少 300 行，但我只想要最后 12 个注册表。这是查询：

```
(SELECT * 
FROM series 
ORDER BY odata DESC) estatisticas 
WHERE ponteiro = 50 AND lotus = 30 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T15:13:30.790

类似于以下内容：

```
select * from 
    ( select estatisticas, rownum rn
        (SELECT *
        FROM series 
        ORDER BY odata DESC) estatisticas 
        WHERE ponteiro = 50 AND lotus = 30
    order by odata asc) where rownum <=12 
```

编辑：为您的查询更新它，您想对内部查询进行排序，在您的情况下升序，因此您可以获得最后 12

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T04:48:13.533

Oracle RDBMS在构造查询的结果集时使用称为**rownum**的伪列。结果中的每一行都按升序编号，从 0 开始。您可以按如下方式评估条件：

```
select job_name from dba_scheduler_jobs where rownum < 10; 
```

这将返回它找到的前 10 行。

重要的是要记住，rownum 是在从数据库中获取记录之后但在查询中的 order by 子句之前评估的。

因此，您的查询应如下所示：

```
SELECT * FROM 
((SELECT * FROM series 
    ORDER BY odata DESC) estatisticas 
    WHERE ponteiro = 50 AND lotus = 30 [ASC/DESC]) 
WHERE rownum < 12; 
```

您应该将 order by 子句设置为升序或降序，具体取决于您要获取的行。

# c# - 如何为 Pagesetup 页眉和页脚释放 Excel 内存

> ID：11848911
> 
> 赞同：0
> 
> 时间：2012-08-07T15:10:45.140
> 
> 标签：c#, excel, memory-management, header, page-setup

我正在编写一些设置一些 excel 电子表格的代码。但是我提出了 c# 内存问题。我有一个例程来处理我的垃圾，我基本上使用 COM 对象的互操作版本。

但是，在设置页眉和页脚时，我的记忆中仍然留下了一个 excel 任务，我已将其追踪到此代码。我已经稍微减少了这段代码，我已经将 pagesetup 存储为 Excel.Pagesetup，以免与我在这个论坛的许多地方读到的已知 Excel TWO DOT RULE 产生问题。

```
Excel.Application oXL = null;
Excel.Workbook oWB = null;
Excel.Worksheet nSheet = null;

oXL = new Excel.Application(); 
oXL.Visible = false;

oXL.Workbooks.Add(Missing.Value);
oWB = oXL.Workbooks[1];
oXL.DisplayAlerts = false;
oXL.UserControl = false;

nSheet = oWB.ActiveSheet;

Excel.PageSetup thePageSetup = newSheet.PageSetup;   
oXL.ActiveWindow.View = Excel.XlWindowView.xlPageLayoutView;
thePageSetup.Orientation = Excel.XlPageOrientation.xlPortrait;

thePageSetup.CenterHeader = "CH";
thePageSetup.LeftHeader = "LH";
thePageSetup.LeftFooter = "LF";
thePageSetup.RightFooter = "RF";

thePageSetup.LeftMargin = oXL.CentimetersToPoints(1.8);
thePageSetup.RightMargin = oXL.CentimetersToPoints(1.8);
thePageSetup.TopMargin = oXL.CentimetersToPoints(2.9);
thePageSetup.BottomMargin = oXL.CentimetersToPoints(2.9);
thePageSetup.FooterMargin = oXL.CentimetersToPoints(0.8);
thePageSetup.HeaderMargin = oXL.CentimetersToPoints(0.8);      

nSheet.Name = "FIRST SHEET";
nSheet.Select(Type.Missing);
Release(thePageSetup); 
```

我稍后清除了工作表和工作簿的内存，它按预期工作，但是当我包含页面设置部分时，内存中仍然有一个点。任何想法我做错了什么？

编辑：这是我的发布功能，以防有人感兴趣。obj 是通过引用发送的，然后被设为 null。它似乎适用于其他部分。

```
 private static void Release(Object obj) 
    {
        try
        {
            while (obj != null)
            {
                System.Runtime.InteropServices.Marshal.FinalReleaseComObject(obj);
                obj = null;
            }
        }
        catch
        {

        }
        finally
        {
            GC.Collect();
        }
    } 
```

# matlab - 如何在 MATLAB 中从 COM 对象（activex 服务器）读取数据？

> ID：11848915
> 
> 赞同：0
> 
> 时间：2012-08-07T15:10:56.630
> 
> 标签：matlab, pointers, activex, pass-by-reference, com-object

我正在尝试将模拟器连接到 MATLAB。模拟器程序公开了一个 COM 对象接口。

我已通过以下命令连接到 COM 对象，并且可以执行其中的大部分方法：

```
h=actxserver(ProgID) 
```

但是它的一些方法需要传递一个`Variant*`类型作为输出。

这是“invoke”方法指示的方法之一的签名：

```
ReadOutputImage=Variant(Pointer) ReadOutputImage(handle, int32, int32, `ImageDataTypeConstants, Variant(Pointer))` 
```

我用几种语法调用了这个方法，但它们都不起作用：

```
a=uint8([0])   %means unsigned integer array with 1 member

h.ReadOutputImage(0,1,2,a)  % 0 ,1 ,2 are contants pointing to the position, number of elements to read and size of elemnts while 2 shows Byte element (VT_UI2 COM type). 
```

我尝试过但没有结果的其他语法是：使用`uint16`, `uint32`, `int8`, `int16`,`int32`用于以下所有内容：

```
logical types (like a=[false]), 
cell arrays (like a={uint8([0])} )
empty cell array {}
empty array []
empty sring '' 
```

我也使用过 libpointer：

```
a=libpointer;
also a=libpointer('uint8Ptr',0)
also a=libpointer('bool',false)
also a=libpointer('bool',[0]) 
```

问题是我不确定以下项目：

1.  MATLAB 中类似的“Variant(Pointer)”类型是什么？
2.  将变量作为输出传递给 MATLAB 中的 COM 方法的方法是什么？
3.  甚至可以从 COM 对象方法结果中获取值作为 MATLAB 中的指针吗？

为了了解数据在其他客户端中的显示方式，我将相同的 dll 文件导入到 Delphi 中，上述方法的类型库签名如下：

```
procedure ReadOutputImage(StartIndex: Integer; ElementsToRead: Integer; 
                          DataType: ImageDataTypeConstants; var pData: OleVariant); 
```

* * *

是的，西门子已为此 com 服务器 (prosim) 提供了指南，并且基于此类文档，我已连接并执行了其大部分方法。但是读取 I/O 数据的方法不起作用。在文档中，方法签名指定如下：（在 VB 中）

```
STDMETHOD(CS7Prosim::ReadOutputImage)(long startindex,long elementstoread, imagedatatypeconstants DtaType, VARIANT* pData) 
```

你的应用程序怎么样，它有效吗？它是否包含变体指针作为返回参数？你在那个应用程序中有类似的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:58:39.067

我可以帮助您解决问题中的＃2。我自己刚刚解决了这个问题。基本上，任何通过引用传递给您在修改后访问的 COM 对象，Matlab 都会作为输出返回。

```
[var1 a]=thisObject.DB.Execute(queryString,a) 
```

请参阅[此处](http://matlab.izmiran.ru/help/techdoc/matlab_external/ch07cl12.html#com_method_enumeration) “此处显示的语法显示了 MATLAB 客户端调用的服务器函数。函数的返回值显示为 retval。函数的输出参数`(out1, out2, ...)`如下：

```
[retval out1 out2 ...] = handle.functionname(in1, in2, ...); 
```

MATLAB 利用 COM 中的引用传递功能来实现此功能。请注意，按引用传递是 COM 功能。目前在 MATLAB 中不可用。”

# wpf - WPF UserControl 的大小调整非常慢

> ID：11848917
> 
> 赞同：2
> 
> 时间：2012-08-07T15:11:02.077
> 
> 标签：wpf, xaml, user-controls, resize

我不喜欢在此处粘贴相当长的代码片段，但我对以下 WPF UserControl（本文末尾的 XAML）有疑问。提供的代码已简化，但我对其进行了测试，并且它是可重现的。

**这个 UserControl的问题**是，当添加到 WPF 窗口时，水平调整大小非常慢。更准确地说，当窗口的宽度增加时，调整大小的速度与预期一样快。但是，一旦它的宽度减小，包含的 UserControl 就会挂起并且只会非常缓慢地调整大小。在我的电脑上，大约需要 3 秒才能达到最终大小。

**我现在的问题是：** 为什么会这样，我该怎么办？有了这个简化的控件，可能问题不大，但是如果两个 ListView 都填满了，操作就更慢了。这是 WPF 本身的问题还是 XAML 中有错误？我不知道。任何提示/解决方案/解决方法/评论表示赞赏！：-） 谢谢！

```
<UserControl x:Class="TestApplication.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             d:DesignHeight="768" d:DesignWidth="1280" mc:Ignorable="d">
    <UserControl.Resources>
        <ResourceDictionary>
            <!-- [removed for clarity] -->
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="{Binding ElementName='uiCustomerOrderListView', Path='ActualWidth'}" />
            <ColumnDefinition Width="5" />
            <ColumnDefinition Width="{Binding ElementName='uiPackagingOrderListView', Path='ActualWidth'}" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Label
            BorderBrush="Black"
            BorderThickness="1"
            Content="Customer Orders"
            FontWeight="Bold"
            Grid.Column="0"
            Grid.Row="0"
            HorizontalContentAlignment="Center"
            Margin="0,0,0,2"
            SnapsToDevicePixels="True"
            VerticalContentAlignment="Center" />
        <Label
            BorderBrush="Black"
            BorderThickness="1"
            Content="Packaging Orders"
            FontWeight="Bold"
            Grid.Column="2"
            Grid.Row="0"
            HorizontalContentAlignment="Center"
            Margin="0,0,0,2"
            SnapsToDevicePixels="True"
            VerticalContentAlignment="Center" />

        <Grid
            Grid.Column="0"
            Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="4" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="4" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <TextBlock
                x:FieldModifier="private"
                x:Name="uiCustomerOrdersColumn00HeaderTextBlock"
                FontWeight="Bold"
                Grid.Column="1"
                Grid.Row="0"
                Text="[Order No.]"
                TextAlignment="Center"
                TextTrimming="CharacterEllipsis"
                ToolTip="" />
            <!-- [similar TextBlocks for columns 2, 3, 4, 5, 6] -->
            <!-- [removed for clarity] -->
        </Grid>

        <Grid
            Grid.Column="2"
            Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="4" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="4" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <TextBlock
                x:FieldModifier="private"
                x:Name="uiPackagingOrdersColumn00HeaderTextBlock"
                FontWeight="Bold"
                Grid.Column="1"
                Grid.Row="0"
                Text="[Order Nr.]"
                TextAlignment="Center"
                TextTrimming="CharacterEllipsis"
                ToolTip="" />
            <!-- [similar TextBlocks for columns 2, 3, 4, 5, 6, 7] -->
            <!-- [removed for clarity] -->
        </Grid>

        <Border
            BorderBrush="Black"
            BorderThickness="0,2,0,0"
            Grid.Column="0"
            Grid.ColumnSpan="4"
            Grid.Row="2"
            Margin="1,1,1,1"
            SnapsToDevicePixels="True" />

        <ScrollViewer
            Grid.Column="0"
            Grid.ColumnSpan="4"
            Grid.Row="3"
            HorizontalScrollBarVisibility="Disabled"
            VerticalScrollBarVisibility="Visible">

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="5" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <ListView
                    x:FieldModifier="private"
                    x:Name="uiCustomerOrderListView"
                    Grid.Column="0"
                    Grid.Row="1"
                    ItemsSource="{Binding Path='.'}"
                    ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                    ScrollViewer.VerticalScrollBarVisibility="Disabled"
                    SelectionMode="Single"
                    VirtualizingStackPanel.IsVirtualizing="False">
                    <ListView.View>
                        <GridView
                            x:FieldModifier="private"
                            x:Name="uiCustomerOrderGridView"
                            AllowsColumnReorder="False">
                            <GridView.Columns>
                                <GridViewColumn />
                                <GridViewColumn />
                                <GridViewColumn />
                                <GridViewColumn />
                                <GridViewColumn />
                                <GridViewColumn />
                            </GridView.Columns>
                        </GridView>
                    </ListView.View>
                </ListView>

                <ListView
                    x:FieldModifier="private"
                    x:Name="uiPackagingOrderListView"
                    Grid.Column="2"
                    Grid.Row="1"
                    ItemsSource="{Binding Path='.'}"
                    ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                    ScrollViewer.VerticalScrollBarVisibility="Disabled"
                    SelectionMode="Single"
                    VirtualizingStackPanel.IsVirtualizing="False">
                    <ListView.View>
                        <GridView
                            x:FieldModifier="private"
                            x:Name="uiPackagingOrderGridView"
                            AllowsColumnReorder="False">
                            <GridView.Columns>
                                <GridViewColumn />
                                <GridViewColumn />
                                <GridViewColumn />
                                <GridViewColumn />
                                <GridViewColumn />
                                <GridViewColumn />
                                <GridViewColumn />
                            </GridView.Columns>
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>
        </ScrollViewer>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:35:08.010

这是因为您将顶部网格（客户订单/包装订单）的宽度绑定到其他控件的实际宽度，因此在调整大小时它会经历大量更新。为了在我的测试工具中修复它并保持相同的外观，我执行了以下操作：

将第一个网格的列设置为：

```
<Grid.ColumnDefinitions>
     <ColumnDefinition Width="*" />            
     <ColumnDefinition Width="*" />
     <ColumnDefinition Width="18"/>
</Grid.ColumnDefinitions> 
```

然后，我修改了您的第二个标签，将`Grid.Column`属性设置为 1 而不是 2。这为您提供了相同的整体外观。我会说虽然你使用了很多网格并且可能会简化这个设计。这是我的完整代码版本：

```
<Grid>
     <Grid.ColumnDefinitions>
     <ColumnDefinition Width="*" />            
     <ColumnDefinition Width="*" />
     <ColumnDefinition Width="18"/>
  </Grid.ColumnDefinitions>
     <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
     </Grid.RowDefinitions>

     <Label
        BorderBrush="Black"
        BorderThickness="1"
        Content="Customer Orders"
        FontWeight="Bold"
        Grid.Column="0"
        Grid.Row="0"
        HorizontalContentAlignment="Center"
        Margin="0,0,0,2"
        SnapsToDevicePixels="True"
        VerticalContentAlignment="Center" />
     <Label
        BorderBrush="Black"
        BorderThickness="1"
        Content="Packaging Orders"
        FontWeight="Bold"
        Grid.Column="1"
        Grid.Row="0"
        HorizontalContentAlignment="Center"
        Margin="0,0,0,2"
        SnapsToDevicePixels="True"
        VerticalContentAlignment="Center" />

     <Grid
        Grid.Column="0"
        Grid.Row="1">
        <Grid.ColumnDefinitions>
           <ColumnDefinition Width="4" />
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="4" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
           <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBlock
            x:FieldModifier="private"
            x:Name="uiCustomerOrdersColumn00HeaderTextBlock"
            FontWeight="Bold"
            Grid.Column="1"
            Grid.Row="0"
            Text="[Order No.]"
            TextAlignment="Center"
            TextTrimming="CharacterEllipsis"
            ToolTip="" />
        <!-- [similar TextBlocks for columns 2, 3, 4, 5, 6] -->
        <!-- [removed for clarity] -->
     </Grid>

     <Grid
        Grid.Column="2"
        Grid.Row="1">
        <Grid.ColumnDefinitions>
           <ColumnDefinition Width="4" />
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="4" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
           <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBlock
            x:FieldModifier="private"
            x:Name="uiPackagingOrdersColumn00HeaderTextBlock"
            FontWeight="Bold"
            Grid.Column="1"
            Grid.Row="0"
            Text="[Order Nr.]"
            TextAlignment="Center"
            TextTrimming="CharacterEllipsis"
            ToolTip="" />
        <!-- [similar TextBlocks for columns 2, 3, 4, 5, 6, 7] -->
        <!-- [removed for clarity] -->
     </Grid>

     <Border
        BorderBrush="Black"
        BorderThickness="0,2,0,0"
        Grid.Column="0"
        Grid.ColumnSpan="4"
        Grid.Row="2"
        Margin="1,1,1,1"
        SnapsToDevicePixels="True" />

     <ScrollViewer
        Grid.Column="0"
        Grid.ColumnSpan="4"
        Grid.Row="3"
        HorizontalScrollBarVisibility="Disabled"
        VerticalScrollBarVisibility="Visible">

        <Grid>
           <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="5" />
              <ColumnDefinition Width="*" />
           </Grid.ColumnDefinitions>
           <Grid.RowDefinitions>
              <RowDefinition Height="*" />
           </Grid.RowDefinitions>

           <ListView
                x:FieldModifier="private"
                x:Name="uiCustomerOrderListView"
                Grid.Column="0"
                Grid.Row="1"
                ItemsSource="{Binding Path='.'}"
                ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                ScrollViewer.VerticalScrollBarVisibility="Disabled"
                SelectionMode="Single"
                VirtualizingStackPanel.IsVirtualizing="False">
              <ListView.View>
                 <GridView
                        x:FieldModifier="private"
                        x:Name="uiCustomerOrderGridView"
                        AllowsColumnReorder="False">
                    <GridView.Columns>
                       <GridViewColumn />
                       <GridViewColumn />
                       <GridViewColumn />
                       <GridViewColumn />
                       <GridViewColumn />
                       <GridViewColumn />
                    </GridView.Columns>
                 </GridView>
              </ListView.View>
           </ListView>

           <ListView
                x:FieldModifier="private"
                x:Name="uiPackagingOrderListView"
                Grid.Column="2"
                Grid.Row="1"
                ItemsSource="{Binding Path='.'}"
                ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                ScrollViewer.VerticalScrollBarVisibility="Disabled"
                SelectionMode="Single"
                VirtualizingStackPanel.IsVirtualizing="False">
              <ListView.View>
                 <GridView
                        x:FieldModifier="private"
                        x:Name="uiPackagingOrderGridView"
                        AllowsColumnReorder="False">
                    <GridView.Columns>
                       <GridViewColumn />
                       <GridViewColumn />
                       <GridViewColumn />
                       <GridViewColumn />
                       <GridViewColumn />
                       <GridViewColumn />
                       <GridViewColumn />
                    </GridView.Columns>
                 </GridView>
              </ListView.View>
           </ListView>
        </Grid>
     </ScrollViewer>
  </Grid> 
```

# c# - WCF over HTTPS 和签署正文

> ID：11848919
> 
> 赞同：5
> 
> 时间：2012-08-07T15:11:15.833
> 
> 标签：c#, wcf, soap, sign

我有一个想要连接的 SOAP 服务。它需要通过 https 访问，并且它的主体需要由证书签名。

我试过以下代码：

```
<basicHttpBinding>
    <binding name="P4Binding" closeTimeout="00:01:00" openTimeout="00:01:00"
        receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
        bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
        maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
        useDefaultWebProxy="true">
        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        <security mode="TransportWithMessageCredential">
        <transport clientCredentialType="None" proxyCredentialType="None"
            realm="" />
        <message clientCredentialType="Certificate" algorithmSuite="Default" />
        </security>
    </binding>
</basicHttpBinding> 
```

设置我的客户端如下：

```
P4_ServiceReference.P4PortTypeClient client = new P4_ServiceReference.P4PortTypeClient();

client.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;
client.ClientCredentials.ServiceCertificate.DefaultCertificate = new X509Certificate2(@"[..].cer");
client.ClientCredentials.ClientCertificate.Certificate = new X509Certificate2(@"[..]", "somepass"); 
```

甚至更改了我的 Reference.cs 以包含`ProtectionLevel=ProtectionLevel.Sign`ServiceContractAttribute 和 OperationContractAttribute。

发生的情况是创建了 wse:security 标头，但未对正文进行签名。服务返回`Element http://schemas.xmlsoap.org/soap/envelope/Body must be signed`。

我错过了什么以便正确签署正文？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T11:06:55.867

使用 this`customBinding`而不是`basicHttpBinding`.

```
 //Setup custom binding with HTTPS + Body Signing + Soap1.1
        CustomBinding binding = new CustomBinding();

        //HTTPS Transport
        HttpsTransportBindingElement transport = new HttpsTransportBindingElement();

        //Body signing
        AsymmetricSecurityBindingElement asec = (AsymmetricSecurityBindingElement)SecurityBindingElement.CreateMutualCertificateBindingElement(MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10);
        asec.SetKeyDerivation(false);
        asec.AllowInsecureTransport = true;
        asec.IncludeTimestamp = true;

        //Setup for SOAP 11 and UTF8 Encoding
        TextMessageEncodingBindingElement textMessageEncoding = new TextMessageEncodingBindingElement(MessageVersion.Soap11, Encoding.UTF8);

        //Bind in order (Security layer, message layer, transport layer)
        binding.Elements.Add(asec);
        binding.Elements.Add(textMessageEncoding);
        binding.Elements.Add(transport); 
```

似乎`TransportWithMessageCredential`只使用 Transport 来保证安全而忽略其他一切。

# embedded - Arduino RFID校验和计算和密钥可视化

> ID：11848921
> 
> 赞同：2
> 
> 时间：2012-08-07T15:11:22.780
> 
> 标签：embedded, arduino

我正在将此[RFID](http://www.seeedstudio.com/depot/125khz-rfid-module-uart-p-171.html?cPath=144_153)模块用于 Arduino 以太网 R3，我需要从软件序列中检索写在标签外部的卡 ( [TAG](http://www.seeedstudio.com/wiki/RFID_tag_combo_%28125khz%29_-_5_pcs) ) ID。该模块的[数据表](http://www.seeedstudio.com//depot/datasheet/RDM630-Spec..pdf)显示 14 个字节被发送到 Arduino。第一个是标头，最后一个是页脚，页脚前的 2 个字节是校验和，其他 10 个字节是包含标签 ID 的 ASCII 数据。

如何重新创建卡的 ID，并控制校验和？例如，对于具有此 ID：0013530444 的标签，Arduino 响应为：

```
I received: 2
I received: 51
I received: 67
I received: 48
I received: 48
I received: 67
I received: 69
I received: 55
I received: 53
I received: 52
I received: 67
I received: 67
I received: 66
I received: 3 
```

但我不知道如何在屏幕上打印 Arduino 读取的 ID。如何计算[校验和](http://www.seeedstudio.com/wiki/index.php?title=125Khz_RFID_module_-_UART)？

[http://www.seeedstudio.com/wiki/index.php?title=125Khz_RFID_module_-_UART](http://www.seeedstudio.com/wiki/index.php?title=125Khz_RFID_module_-_UART)

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:21:29.477

这是如何计算校验和的演练。

拿你的卡号（这只是直接从你的文字中引用的）

```
I received: 2
I received: 51
I received: 67
I received: 48
I received: 48
I received: 67
I received: 69
I received: 55
I received: 53
I received: 52
I received: 67
I received: 67
I received: 66
I received: 3 
```

这将为您提供一个等于以下内容的数字：

> 2 51 67 48 48 67 69 55 53 52 67 67 66 3

第一个数字 (2) 表示这是请求的开始。

最后一个数字 (3) 表示这是请求的结束。

> **2** 51 67 48 48 67 69 55 53 52 67 67 66 **3**

为了计算校验和，我们将删除这两个数字。所以你的新号码现在是：

> 51 67 48 48 67 69 55 53 52 67 67 66

您拥有的最后两个数字是您的校验和。其余数字是您的卡号。所以：

您的卡号是：

> 51 67 48 48 67 69 55 53 52 67

你的校验和是：

> 67 66

接下来，您需要将您的卡号和校验和转换为 ASCII 值：

您的卡号是：

> 3 C 0 0 CE 7 5 4 C

你的校验和是：

> CB

接下来，将每个数字成对：

您的卡号是：

> 3C 00 CE 75 4C

你的校验和是：

> CB

然后，您需要将每一对视为 HEXIDECIMAL 值并对它们进行 XOR。所以基本上你需要证明以下几点：

> 3C ^ 00 ^ CE ^ 75 ^ 4C == CB
> 
> (3C ^ 00) = 3C
> 
> 3C ^ CE ^ 75 ^ 4C == CB
> 
> (3C ^ CE) = F2
> 
> F2 ^ 75 ^ 4C == CB
> 
> (3C ^ CE) = 87
> 
> 87 ^ 4C == CB
> 
> (87 ^ 4C) = CB
> 
> CB == CB

因为 CB == CB，所以这是一个有效的交易。

毫无疑问，其他人可以提出比这更好的方法，但是这里应该有足够的伪代码供您自己编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T16:01:29.110

我发现[这个博客](http://www.miklos.blog.br/2010/06/125khz-rfid-module-uart-rdm-630.html)在 Arduino 中有一个实现，我已经对其进行了调整`Java`，结果很好。由于有很多按位运算 - 我使用[http://www.miniwebtool.com/bitwise-calculator/](http://www.miniwebtool.com/bitwise-calculator/)试图了解发生了什么。我理解所有这一切，除了`(val | (tempbyte << 4))`，我的意思是我理解这句话的作用，我只是很难看到它是如何产生我想要的结果的。

```
void loop () {
  byte i = 0;
  byte val = 0;
  byte code[6];
  byte checksum = 0;
  byte bytesread = 0;
  byte tempbyte = 0;

  if(Serial.available() > 0) {
    if((val = Serial.read()) == 2) {
      // check for header 
      bytesread = 0; 
      while (bytesread < 12) {
        // read 10 digit code + 2 digit checksum
        if( Serial.available() > 0) {
          val = Serial.read();
          if((val == 0x0D)||(val == 0x0A)||(val == 0x03)||(val == 0x02)) {
            // if header or stop bytes before the 10 digit reading
            break;
            // stop reading
          }
          // Do Ascii/Hex conversion:
          if ((val >= '0') && (val <= '9')) {
            val = val - '0';
          } else if ((val >= 'A') && (val <= 'F')) {
            val = 10 + val - 'A';
          }
          // Every two hex-digits, add byte to code:
          if (bytesread & 1 == 1) {
            // make some space for this hex-digit by
            // shifting the previous hex-digit with 4 bits to the left:
            code[bytesread >> 1] = (val | (tempbyte << 4));
            if (bytesread >> 1 != 5) {
              // If we're at the checksum byte,
              checksum ^= code[bytesread >> 1];
              // Calculate the checksum... (XOR)
            };
          } else {
            tempbyte = val;
            // Store the first hex digit first...
          };
          bytesread++;
          // ready to read next digit
        }
      }
      // Output to Serial:
      if (bytesread == 12) {
        // removed code for clarity
        LCD.print("Check:");
        LCD.print(code[5], HEX);
        LCD.print(code[5] == checksum ? "-passed" : "-error");
      }
      bytesread = 0;
    }
  }
} 
```

我的 Java/Android 端口正在侦听`BluetoothSocket`. 我使用[BlueTerm](http://pymasde.es/blueterm/)的代码作为基础，此代码位于`ConnectedThread`. 为所有愚蠢的评论道歉，但我仍在学习 Java）。

```
//assume you have checksum as int and code as int array. it will overflow if bytes are used like above example
public void run() {
  Log.d(TAG, "BEGIN mConnectedThread");
  byte[] buffer = new byte[1024];
  int bytes;
  // Keep listening to the InputStream while connected
  while (true) {
    Log.d(TAG, "Running");
    try {
      // Read from the InputStream
      bytes = mmInStream.read(buffer);
      for (int i = 0; i < bytes; i++) {
        Log.d(TAG, "Reading: " + i + " of " + bytes + " from input stream");
        byte b = buffer[i];
        try {
          if(bytesread >= 0) {
            //just printing ASCII
            char printableB = (char) b;
            if (b < 32 || b > 126) printableB = ' ';
            Log.d(TAG, "'" + Character.toString(printableB) + "' (" + Integer.toString(b) + ")");
            if((b == 0x0D)||(b == 0x0A)||(b == 0x03)||(b == 0x02)) {
              // if header or stop bytes before the 10 digit reading
              Log.e(TAG, i + " Unexpected header while processing character " + Integer.toString(b));
            } else {
              // Do ASCII/Hex conversion
              if ((b >= '0') && (b <= '9')) {
                b = (byte) (b - '0');
              } else if ((b >= 'A') && (b <= 'F')) {
                b = (byte) (10 + b - 'A');
              }
              if ((bytesread & 1) == 1) {
                //if isOdd(bytesread)
              // make some space for this hex-digit by shifting the previous hex-digit with 4 bits to the left:
              code[bytesread >> 1] = (b | (tempbyte << 4));
              if (bytesread >> 1 != 5) {
                // If we're not at the checksum byte,
                checksum ^= code[bytesread >> 1];
                // Calculate the checksum... (XOR)
              }
            } else {
              // Store the first hex digit first
              tempbyte = b; 
            }
          }
          bytesread++;
        } else if(b == 2) {
          bytesread = 0;
          Log.d(TAG, "Header found!");
        }
        if(bytesread == 12) {
          String check = (code[5] == checksum ? "-passed" : "-error");
          String r = "";
          for(int j = 0; j < 5; j++){
            r += Integer.toString(code[i]);
          }
          Log.d(TAG, "Check:" + Integer.toString(code[5]) + check);
          init();
        } else if(bytesread > 12){
          Log.e(TAG, "Too many bytes!");
        }
      } catch (Exception e) {
        Log.e(TAG, i + " Exception while processing character " + Integer.toString(b), e);
      }
    }
    String a = buffer.toString();
    a = "";
  } catch (IOException e) {
    Log.e(TAG, "disconnected", e);
    connectionLost();
    break;
  }
}
Log.i(TAG, "END mConnectedThread");
} 
```

# visual-studio-2012 - 2012 年附加流程

> ID：11848924
> 
> 赞同：7
> 
> 时间：2012-08-07T15:11:27.403
> 
> 标签：visual-studio-2012

我们曾经在 VS 2010 中附加到处理宏。这非常方便。现在 Visual Studio 2012 中没有宏，是否存在可以为我们执行此操作的插件？我们的宏将附加到 w3.exe 进程，它很漂亮！

也许我需要将我们的宏转换为插件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T15:21:01.657

我使用这个扩展来做你所描述的事情：[AttachTo extension](https://github.com/whut/AttachTo)（在 VS 的 Extensions 列表中搜索 AttachTo）

# sql - 从分隔参数创建 SQL IN 子句

> ID：11848927
> 
> 赞同：0
> 
> 时间：2012-08-07T15:11:44.877
> 
> 标签：sql, sql-server, reporting-services, parameter-passing

我有一个参数，其中包含用分号分隔的多个项目。我需要在 IN 子句中使用这些项目。例如：

> parItems = 'item1;;item2;;item3'

然后我需要添加到这样的sql：

> SELECT somestuff, morestuff FROM sometable WHERE item in (parItems)

有没有简单的方法来完成这项工作？

对不起。正如我之前所说，它将在 Reporting Services 上查看 MSSQL DB 而不是 Oracle ODBC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:27:33.560

你可以。但是你需要一些基础设施。

您需要在 SQL 中定义的集合类型。假设每一项不超过 100 字节

```
CREATE TYPE item_arr
    AS TABLE OF varchar2(100); 
```

然后，您需要一个函数来解析分号分隔的列表并返回此集合类型。我会使用 Tom Kyte 的[in_list 函数的变体](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:210612357425)

```
create or replace function in_list( p_items in varchar2 )
  return item_arr
as
  l_string varchar2(32000) := p_items || ';';
  l_items  item_arr := item_arr();
  l_pos    number;
begin
  loop
     exit when l_string is null;
     l_pos := instr( l_string, ';' );
     l_items.extend;
     l_items(l_items.count) :=
                 ltrim( rtrim( substr( l_string, 1, l_pos-1 ) ) );
     l_string := substr( l_string, l_pos+1 );
  end loop;
  return l_items;
end; 
```

然后，您可以在 SQL 语句中使用此函数

```
SELECT somestuff, morestuff 
  FROM sometable 
 WHERE item in (SELECT column_value
                  FROM TABLE( in_list( parItems ))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:24:30.803

只需解析您的字符串以替换`;;`with `','`，您就可以将其直接传递给`IN ('...')`语句。

`'item1;;item2;;item3'`-->`'item1','item2','item3'`

最简单的方法是在将字符串作为参数传递之前对其进行转换。

像这样：`IN ('item1','item2','item3')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:09:18.873

```
Use AsG
Go
Drop FUNCTION AsG_inListesiOlustur
Go
CREATE FUNCTION AsG_inListesiOlustur (@pDegerListesi nvarchar(MAX), @pBossaVarsayilanDeger varchar(50))
   RETURNS @pNeticeTablo TABLE (Deger varchar(50) NOT NULL) AS
BEGIN
   DECLARE @Pozisyon        int,
           @sonrakiPozisyon    int,
           @uzunluk   int

   SELECT @Pozisyon = 0, @sonrakiPozisyon = 1
   Select @pDegerListesi = LTRIM(RTRIM(@pDegerListesi))
   If LEN(@pDegerListesi) = 0
     Begin
     If LEN(@pBossaVarsayilanDeger) > 0 
       Begin
       INSERT @pNeticeTablo (Deger) VALUES (@pBossaVarsayilanDeger)
       End
     End Else
     Begin   
     WHILE @sonrakiPozisyon > 0
       BEGIN
       SELECT @sonrakiPozisyon = CharIndex(',', @pDegerListesi, @Pozisyon + 1)
       SELECT @uzunluk = CASE WHEN @sonrakiPozisyon > 0
                              THEN @sonrakiPozisyon
                              ELSE Len(@pDegerListesi) + 1
                         END - @Pozisyon - 1
       INSERT @pNeticeTablo (Deger)
          VALUES (Convert(varchar, SubString(@pDegerListesi, @Pozisyon + 1, @uzunluk)))
       SELECT @Pozisyon = @sonrakiPozisyon
       End
     End
   RETURN
END
Go

Select * From  [AsG].[dbo].[AsG_inListesiOlustur]('1,4', '0')
Go

Select * From  [AsG].[dbo].[AsG_inListesiOlustur]('', '')
Go 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T01:56:08.077

如果列表相对较短（即少于 4000 个字符），另一种方法是使用 INSTR 函数：

```
SELECT somestuff, morestuff FROM sometable
WHERE INSTR( ';;' || parItems || ';;'
           , ';;' || item || ';;'
           ) > 0; 
```

然而，这种方法的主要缺点是谓词没有选择性。然而，根据数据量，这并不总是一个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T18:49:29.127

这是另一个变体；类似于贾斯汀的回答，但对于 SQL Server：

下面的函数将返回一个可以加入的表。

```
CREATE FUNCTION listToTable (@list nvarchar(MAX))
   RETURNS @tbl TABLE (item varchar(50) NOT NULL) AS
BEGIN
   DECLARE @pos        int,
           @nextpos    int,
           @valuelen   int

   SELECT @pos = 0, @nextpos = 1

   WHILE @nextpos > 0
   BEGIN
      SELECT @nextpos = charindex(';', @list, @pos + 1)
      SELECT @valuelen = CASE WHEN @nextpos > 0
                              THEN @nextpos
                              ELSE len(@list) + 1
                         END - @pos - 1
      INSERT @tbl (item)
         VALUES (convert(varchar, substring(@list, @pos + 1, @valuelen)))
      SELECT @pos = @nextpos
   END
   RETURN
END

SELECT somestuff, morestuff 
FROM sometable a
join listToTable('item1;item2;item3') b
on a.columnA = b.item 
```

# asp.net-mvc - 为什么我的 MVC ID 返回 Null（或 Nothing）？

> ID：11848930
> 
> 赞同：0
> 
> 时间：2012-08-07T15:11:59.970
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我的网址如下：

{控制器}/{动作}/{id}

在这个例子中，它是：

博客/编辑/2

在我的代码中，我试图获取 ID 参数（即“2”），如下所示：

```
' get route
Dim routeData = httpContext.Request.RequestContext.RouteData
' get id
Dim id = If(String.IsNullOrEmpty(routeData.Values("id") = False), routeData.Values("id").ToString, Nothing) 
```

但是，它表示该值为空。以下语句出于某种原因返回 true：

```
If String.IsNullOrEmpty(id) = True Then 
```

如何获取 ID 的值，使其不为 NULL（或 VB.NET 中的“Nothing”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:24:30.220

解决方案是改变我使用 IsNullorEmpty 方法的方式：

```
 ' get id
    Dim id = If(String.IsNullOrEmpty(routeData.Values("id")), Nothing, routeData.Values("id").ToString)

    ' if no id is set, check to see if the user owns the requested entity (company or blog)
    If String.IsNullOrEmpty(id) Then 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:32:16.763

它没有返回任何东西。

您的原始帖子显示`String.IsNullOrEmpty(routeData.Values("id") = False)`- 您的右括号位于错误的位置，因此 String.IsNullOrEmpty 将*始终*返回 false。您应该改为编写`String.IsNullOrEmpty(routeData.Values("id")) = False`.

（在 VB 中，`"xyz" = false`将隐式转换为`"False"`.）

# java - 使用不同的 URL 部署 Web 服务

> ID：11848933
> 
> 赞同：0
> 
> 时间：2012-08-07T15:12:12.203
> 
> 标签：java, wsdl, glassfish, jax-ws

我尝试在 Glassfish 上部署 Web 服务。一切正常。Web 服务使用之前定义的 WSDL 文件，我使用 Annotation 执行此操作：

```
@WebService(serviceName = "Daten", portName = "DatenSOAP", wsdlLocation = "Daten.wsdl",
    targetNamespace = "http://foo.blub.com/ws/test/Service",
    endpointInterface = "com.blub.foo.ws.test.service.Daten") 
```

并在我的 WSDL 文件中定义

```
<soap:address location="http://localhost:8080/servlet/test/Daten" /> 
```

但是当我部署它时，WSDL 被部署在`http://localhost:8080/foo/Daten`

我在哪里可以定义位置有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T06:55:30.173

正如您所发现的，默认情况下，JAX-WS 将使用上下文根和服务名称作为发布的端点位置。您的项目使用上下文根“foo”进行部署，并且“Datan”来自 @WebService 注释的 serviceName 属性。这实际上非常方便，我建议您坚持使用默认设置，除非您有明确的要求。

如果您确实有这样的要求，此处描述了使用 web.xml servlet 映射自定义端点的过程 ( [http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom .ibm.websphere.wsfep.multiplatform.doc%2Finfo%2Fae%2Fae%2Ftwbs_customwebxml.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.wsfep.multiplatform.doc/info/ae/ae/twbs_customwebxml.html) )

希望这会有所帮助。

# java - java.lang.ArrayStoreException IBM Websphere

> ID：11848937
> 
> 赞同：0
> 
> 时间：2012-08-07T15:12:19.733
> 
> 标签：java, exception-handling, websphere-7

每当我尝试使用 JPA 2.0 和 Websphere 运行更新查询时，都会收到 java.lang.ArrayStoreException。我正在使用测试实用程序，并且成功更新了正确的行等等，没有回滚任何事务，我只是得到了那个异常并且我的应用程序没有执行。我该如何解决...

```
java.lang.ArrayStoreException
    at org.eclipse.emf.common.util.BasicEList.assign(BasicEList.java:188)
    at org.eclipse.emf.common.util.BasicEList.addUnique(BasicEList.java:619)
    at org.eclipse.emf.common.notify.impl.NotifyingListImpl.doAddUnique(NotifyingListImpl.java:323)
    at org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:307)
    at org.eclipse.emf.common.util.BasicEList.add(BasicEList.java:600)
    at com.ibm.wbiserver.datahandler.j2w.util.SDOContentHandler.endElement(SDOContentHandler.java:185)
    at com.sun.xml.internal.bind.v2.runtime.output.SAXOutput.endTag(SAXOutput.java:129)
    at com.sun.xml.internal.bind.v2.runtime.output.XmlOutputAbstractImpl.endTag(XmlOutputAbstractImpl.java:121)
    at com.sun.xml.internal.bind.v2.runtime.output.NamespaceContextImpl$Element.endElement(NamespaceContextImpl.java:481)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.endElement(XMLSerializer.java:314)
    at com.sun.xml.internal.bind.v2.runtime.property.ArrayElementProperty.serializeListBody(ArrayElementProperty.java:172)
    at com.sun.xml.internal.bind.v2.runtime.property.ArrayERProperty.serializeBody(ArrayERProperty.java:153)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:339)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:706)
    at com.sun.xml.internal.bind.v2.runtime.property.ArrayElementNodeProperty.serializeItem(ArrayElementNodeProperty.java:66)
    at com.sun.xml.internal.bind.v2.runtime.property.ArrayElementProperty.serializeListBody(ArrayElementProperty.java:169)
    at com.sun.xml.internal.bind.v2.runtime.property.ArrayERProperty.serializeBody(ArrayERProperty.java:153)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:339)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:706)
    at com.sun.xml.internal.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:146)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:339)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:706)
    at com.sun.xml.internal.bind.v2.runtime.ElementBeanInfoImpl$1.serializeBody(ElementBeanInfoImpl.java:153)
    at com.sun.xml.internal.bind.v2.runtime.ElementBeanInfoImpl$1.serializeBody(ElementBeanInfoImpl.java:128)
    at com.sun.xml.internal.bind.v2.runtime.ElementBeanInfoImpl.serializeBody(ElementBeanInfoImpl.java:316)
    at com.sun.xml.internal.bind.v2.runtime.ElementBeanInfoImpl.serializeRoot(ElementBeanInfoImpl.java:323)
    at com.sun.xml.internal.bind.v2.runtime.ElementBeanInfoImpl.serializeRoot(ElementBeanInfoImpl.java:73)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:496)
    at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:326)
    at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:255)
    at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:114)
    at com.ibm.xml.xlxp2.jaxb.marshal.MarshallerProxy.marshal(MarshallerProxy.java:112)
    at com.ibm.wbiserver.datahandler.j2w.util.SDOToJavaConvertor.toDataObject(SDOToJavaConvertor.java:149)
    at com.ibm.wbiserver.datahandler.j2w.JAXBDataHandler.toDataObject(JAXBDataHandler.java:333)
    at com.ibm.wbiserver.datahandler.j2w.JAXWSDataHandler.toDataObject(JAXWSDataHandler.java:108)
    at com.ibm.wbiserver.datahandler.j2w.JAXBDataHandler$1.run(JAXBDataHandler.java:145)
    at java.security.AccessController.doPrivileged(AccessController.java:251)
    at com.ibm.wbiserver.datahandler.j2w.JAXBDataHandler.transform(JAXBDataHandler.java:121)
    at com.ibm.ws.sca.binding.ejb.handler.SLSBImportDataHandlerBinding.transformEJBResponseToDO(SLSBImportDataHandlerBinding.java:289)
    at com.ibm.ws.sca.binding.ejb.handler.EJBMessageHandler.processMessage(EJBMessageHandler.java:255)
    at com.ibm.ws.sca.binding.ejb.handler.SLSBImportNativeBindingHandler.processMessage(SLSBImportNativeBindingHandler.java:74)
    at com.ibm.ws.sca.internal.message.impl.MessageDispatcherImpl.processMessageWithPCI(MessageDispatcherImpl.java:766)
    at com.ibm.ws.sca.internal.message.impl.MessageDispatcherImpl.processMessage(MessageDispatcherImpl.java:1607)
    at com.ibm.ws.sca.internal.message.impl.ManagedMessageImpl.process(ManagedMessageImpl.java:980)
    at com.ibm.ws.sca.uow.handler.UOWNativeWASStrategyImpl.transactionImportExport(UOWNativeWASStrategyImpl.java:441)
    at com.ibm.ws.sca.uow.handler.JoinUOWNativeHandler.processMessage(JoinUOWNativeHandler.java:161)
    at com.ibm.ws.sca.internal.message.impl.MessageDispatcherImpl.processMessageWithPCI(MessageDispatcherImpl.java:766)
    at com.ibm.ws.sca.internal.message.impl.MessageDispatcherImpl.processMessage(MessageDispatcherImpl.java:1607)
    at com.ibm.ws.sca.internal.message.impl.ManagedMessageImpl.process(ManagedMessageImpl.java:980)
    at com.ibm.ws.sca.internal.webmodule.handler.WebModuleContextSwitchHandler.processMessage(WebModuleContextSwitchHandler.java:146)
    at com.ibm.ws.sca.internal.message.impl.MessageDispatcherImpl.processMessageWithPCI(MessageDispatcherImpl.java:766)
    at com.ibm.ws.sca.internal.message.impl.MessageDispatcherImpl.processMessage(MessageDispatcherImpl.java:1607)
    at com.ibm.ws.sca.internal.message.impl.ManagedMessageImpl.process(ManagedMessageImpl.java:971)
    at com.ibm.wbit.comptest.controller.invocation.impl.Invoker.managedInvoke(Invoker.java:316)
    at com.ibm.wbit.comptest.controller.invocation.impl.Invoker.invoke(Invoker.java:196)
    at com.ibm.wbit.comptest.controller.invocation.impl.BaseInvocationHandler.invoke(BaseInvocationHandler.java:64)
    at com.ibm.wbit.comptest.controller.invocation.impl.InvocationManager.doInvoke(InvocationManager.java:67)
    at com.ibm.wbit.comptest.controller.invocation.impl.InvocationManager$1.run(InvocationManager.java:48)
    at java.security.AccessController.doPrivileged(AccessController.java:224)
    at javax.security.auth.Subject.doAs(Subject.java:495)
    at com.ibm.websphere.security.auth.WSSubject.doAs(WSSubject.java:131)
    at com.ibm.wbit.comptest.controller.invocation.impl.InvocationManager.invoke(InvocationManager.java:42)
    at com.ibm.wbit.comptest.controller.command.impl.BaseInteractiveEventHandler.processEvent(BaseInteractiveEventHandler.java:34)
    at com.ibm.wbit.comptest.controller.command.impl.BaseCommandHandler.doCommand(BaseCommandHandler.java:108)
    at com.ibm.wbit.comptest.controller.command.impl.CommandProcessor.doCommand(CommandProcessor.java:70)
    at com.ibm.wbit.comptest.controller.command.impl.CommandProcessor.doCommand(CommandProcessor.java:42)
    at com.ibm.wbit.comptest.controller.servlet.TestControllerServlet.process(TestControllerServlet.java:163)
    at com.ibm.wbit.comptest.controller.servlet.TestControllerServlet.doPost(TestControllerServlet.java:127)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1663)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1592)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

每次我查找异常时，我都会得到一些类型不匹配的建议？但我不知道会是这样。一切看起来都很好......我错过了什么？有人对为什么会发生此异常有任何见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:26:16.780

在没有看到任何代码的情况下，我不得不说你在混淆你的类型。 [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ArrayStoreException.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ArrayStoreException.html)

您是否使用任何继承、对象或多态性并且没有过于严格地遵循类型？

我将从这里开始：

```
at org.eclipse.emf.common.util.BasicEList.assign(BasicEList.java:188)        
at org.eclipse.emf.common.util.BasicEList.addUnique(BasicEList.java:619) 
```

# asp.net - 运行 aspnet 网站从父目录开始

> ID：11848940
> 
> 赞同：1
> 
> 时间：2012-08-07T15:12:39.943
> 
> 标签：asp.net, web, web-site-project, asp.net-webpages

我有一些用 asp.net 网页编写的旧项目。我通过打开网站选项打开项目并选择 MyCompany 文件夹。我开始一个调试项目。Asp.NET 开发服务器启动。

实际的：`localhost:53669/MyCompany/somepage.aspx`

预期的：`localhost:53669/somepage.aspx`

如何强制 ASP.NET 开发服务器在 MyCompany 文件夹位置而不是父文件夹位置启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:15:57.363

您使用的是什么版本的 Visual Studio？在 Visual Studio 2010 中，您可以在项目属性中更改它

脚步

*   打开**解决方案资源管理器**
*   右键单击您的项目
*   单击**属性窗口**（不是属性页）
*   将**虚拟路径**选项从**/MyCompany**更改为**/**

示例，让您知道您在正确的地方

前

![在此处输入图像描述](../Images/6b585ce9cba8193ebcfbd88717240e58.png)

后

![在此处输入图像描述](../Images/bc7667586dfce93ec894531308c3c9e4.png)

# php - Symfony2，推进装置和具体继承

> ID：11848941
> 
> 赞同：3
> 
> 时间：2012-08-07T15:12:42.367
> 
> 标签：php, symfony, propel, fixtures, concrete-inheritance

我在 Symfony2 中加载 Propel 固定装置时遇到问题。我有以下架构：

```
<table name="application" phpName="Application">

   <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
   <column name="name" type="varchar" required="true" primaryString="true" />

   <behavior name="timestampable" />

</table>

<table name="application_iphone" phpName="IphoneApplication">

   <column name="store_id" type="varchar" required="true" />

   <behavior name="concrete_inheritance">
       <parameter name="extends" value="application" />
   </behavior>

</table>

<table name="application_identifier" phpName="IphoneApplicationIdentifier">

    <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
    <column name="application_id" required="true" type="integer" />
    <column name="identifier" type="varchar" required="true" primaryString="true" />

    <foreign-key foreignTable="application_iphone">
        <reference local="application_id" foreign="id" />                                 
    </foreign-key>     

</table> 
```

模型构建正确。当我尝试加载以下固定装置时会出现问题：

```
Acme\MyBundle\Model\Application:
    first_app:
        name: "MyFirstApp"
        descendant_class: "IphoneApplication"

Acme\MyBundle\Model\IphoneApplication:
    first_app_iphone:
        id: first_app
        store_id: 2342

Acme\MyBundle\Model\IphoneApplicationIdentifier:     
    first_app_identifier:
        identifier: "com.acme.myfirstapp.appstore"
        application_id: first_app_iphone 
```

出现以下错误：

> [Propel] 异常
> 无法为自增主键 (application.ID) 插入值

我添加了两次“first_app”应用程序（一个在*Application*中，另一个在*IphoneApplication*中）以防止我的*IphoneApplicationIdentifier*夹具出现另一个问题：

> [Propel] 异常“Acme\MyBundle\Model\Application”类中的对象“first_app”未在您的数据文件中定义。

如何为具体的继承模型插入夹具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:44:14.967

Propel 告诉您您正在尝试为自动增量列设置值，这是由于

```
 id: first_app 
```

线。

如果我对您的理解正确，您只想添加一个 Iphoneapplication 项目，对吗？如果是这种情况，您只需要这样做：

```
Acme\MyBundle\Model\IphoneApplication:
    first_app_iphone:
        name: "MyFirstApp"
        store_id: 2342 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:21:43.093

我有类似的情况，最终得到了不同的模式文件。为了测试一个 - 我从模式中删除了自动增量并定义了另一个存储模型的地方。很久以前，但一般步骤如下：

* * *

1.  用于生产环境的转储装置

    ```
    app/console propel:fixtures:dump 
    ```

2.  构建测试数据库所需的一切

    ```
    app/console propel:database:create --env=test
    app/console propel:sql:build --env=test
    app/console propel:sql:insert --force --env=test
    app/console propel:model:build --env=test 
    ```

3.  将夹具导入测试数据库

    ```
    app/console propel:fixtures:load --env=test 
    ```

*请注意，命令可能因 Propel 版本而异*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:11:38.927

通过详细解释我的问题，我发现了错误。该问题并非来自此固定装置文件。我的错误对我来说似乎很奇怪。为什么错误提到 *first_app* 而不是 *iphone_first_app*？

在深入研究其他夹具文件后，我发现了一个被遗忘的对 *first_app* 的引用。解决方案如下（如 Carlos Granados 所述）：

```
Acme\MyBundle\Model\IphoneApplication:
    first_app_iphone:
        name: "My first app"
        store_id: 2342

Acme\MyBundle\Model\IphoneApplicationIdentifier:     
    first_app_identifier:
        identifier: "com.acme.myfirstapp.appstore"
        application_id: first_app_iphone 
```

不需要定义基类。:)

# javascript - $('body').layout 不是函数

> ID：11848948
> 
> 赞同：0
> 
> 时间：2012-08-07T15:12:59.507
> 
> 标签：javascript, jquery, jquery-layout

我正在使用[jQuery UI 布局插件](http://layout.jquery-dev.net/)，并且在 Firebug: 中不断收到此错误`$('body').layout is not a function`。我在 IE8 及以下版本中也遇到了同样的错误。

显然，这是由我在脚本文件中启动布局 UI 的行引起的：

```
$('body').layout({ *options here* }); 
```

有没有办法防止出现这个错误？我很确定我需要 BODY 选择器才能运行这个特定的插件。

*****解决方案****** *

正如下面有用的答案所说，我有这行：`$('body').layout({ *options here* });`在我包含我的 jQuery 和 jQuery UI 布局插件文件之前。一旦我把这`body.layout`两个包含项之后，错误就消失了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T15:15:29.567

你似乎要么

1）没有正确包含插件（url中缺少脚本标签/错字，在加载jquery本身之前包含它，其他任何可能出错的地方）

 或者

`$("body").layout`2）过早调用- 用`$(document).ready(function() { });`

它应该是

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery.layout.js"></script>

...

<script type="text/javascript">
   $(document).ready(function() {
      $("body").layout() // will work now
   });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:15:48.023

确保包括以下行：

```
<SCRIPT type="text/javascript" src="/path/to/jquery-latest.js"></SCRIPT>
<SCRIPT type="text/javascript" src="/path/to/jquery.layout-latest.js"></SCRIPT> 
```

在您放入问题的代码之前。否则，布局将在使用前未定义。

# objective-c - 不工作减法/乘法/除法，但工作加法

> ID：11848952
> 
> 赞同：-1
> 
> 时间：2012-08-07T15:13:13.213
> 
> 标签：objective-c, ios, xcode, ios5, ios-simulator

***你好！*** 在我的计算器程序中，不使用减法/乘法/除法方法，而是使用加法方法。

加法：

```
-(IBAction) clickPlus
{
    [self processOp: '+'];
} 
```

减法：

```
-(IBAction) clickMinus
{
    [self processOp: '-'];
} 
```

处理方法：

```
-(void) processOp: (char) theOp
{
    NSString *opStr;

    op = theOp;

    switch (theOp) {
        case '+':
            opStr = @" + ";
            break;
        case '-':
            opStr = @" – ";
            break;
        case '*':
            opStr = @" * ";
            break;
        case '/':
            opStr = @" ÷ ";
            break;
    }

    [self storeFracPart];
    firstOperand = NO;
    isNumerator = YES;

    [displayString appendString: opStr];
    display.text = displayString;
} 
```

在该方法中使用“op”变量：“ **clickEquals** ”

```
-(IBAction) clickEquals
{
    if ( firstOperand == NO )
    {
        [self storeFracPart];
        [myCalculator performOperation: op];

        [displayString appendString: @" = "];
        [displayString appendString: [myCalculator.accumulator
                                      convertToString]];
        display.text = displayString;

        currentNumber = 0;
        isNumerator = YES;
        firstOperand = YES;
        [displayString setString: @""];
    }
} 
```

你为什么认为'op'会收集垃圾？

如果您需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:22:01.580

What is `op` in `clickEquals`? Is it supposed to be a class ivar? If so `processOp` is wrong as it's using a local variable called `op` and is therefore never assigning the ivar.

You should learn to debug this kind of problems yourself. It's not too hard. If you step through the code execution line by line in the debugger and watch what changes when you should be able to find this sort of problems.

# objective-c - Objective-C - 初始化的默认值

> ID：11848955
> 
> 赞同：0
> 
> 时间：2012-08-07T15:13:19.683
> 
> 标签：objective-c

我正在检查一些代码，我发现了这个调用：

```
if (![[NSUserDefaults standardUserDefaults] boolForKey:@"database_v2"]) {
    //Some code here
} 
```

但我在代码中找不到这个键的任何初始化。我的问题是：编译器会自动为这样的调用设置任何值吗？或者应用程序只会检索任何垃圾？

问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:16:03.530

根据[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUserDefaults/boolForKey%3a)，该方法`NO`在找不到密钥时返回。

# java - JSON 与 Jackson：如果使用抽象方法，则 Desiialize 失败（多态类型处理）

> ID：11848958
> 
> 赞同：2
> 
> 时间：2012-08-07T15:13:29.783
> 
> 标签：java, json, jackson

我有一个关于 Jackson 的 Json 反序列化问题***（编辑：2.0.4 版本）***。我想将包含其他 bean 列表的 Bean 序列化为 string ，保存此字符串，然后稍后反序列化此字符串。我使用一些基类及其子类型。基础类Parent是一个抽象类，有getter和setter两个属性，这个类还有一个抽象方法getType()。其他抽象类 AbstractChild 继承自类 Parent 。这个类也有属性和 isExportEnabled() 抽象方法。我没有问题，如果这个 Bean 将被序列化。*我在Parent*上使用以下注释*class *@JsonTypeInfo(use = JsonTypeInfo.Id.MINIMAL_CLASS, include = JsonTypeInfo.As.PROPERTY, property = "@cls")* 将生成字符串。但是反序列化失败：会抛出异常“Unrecognized field "type"”。但我需要这个属性！我试图在抽象方法上设置 @JsonProperty("type") ，这没有效果。请帮我。*

 ***编辑：如果我引入私有字段“type”（父）和“exportEnabled”（AbstractChild），那么它可以正常运行。** PS 例外

> com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException：无法识别的字段“类型”（类 tst.SimpleTestMain$FirstChild），未标记为可忽略（4 个已知属性：、“id”、“maxCount”、“code”、“minCount” "]) 在 [来源：java.io.StringReader@1ad9fa; 行：1，列：125]（通过引用链：tst.Fam["members"]->tst.FirstChild["type"]）在 com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java :79) 在 com.fasterxml.jackson.databind.DeserializationContext.reportUnknownProperty(DeserializationContext.java:568)

## …和示例类

```
package tst;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonTypeInfo;
import com.fasterxml.jackson.databind.ObjectMapper;

public class SimpleTestMain {

    enum Type {
        TYPE_A, TYPE_B
    }

    @JsonTypeInfo(use = JsonTypeInfo.Id.MINIMAL_CLASS, include = JsonTypeInfo.As.PROPERTY, property = "@cls")
    public static abstract class Parent {

        private int id;

        private String code;

        public Parent() {

        }
        @JsonProperty("type")
        // First abstract getter
        public abstract Type getType();

        public int getId() {
            return id;
        }

        public void setId(int id) {
            this.id = id;
        }

        public String getCode() {
            return code;
        }

        public void setCode(String code) {
            this.code = code;
        }

    }

    public static abstract class AbstractChild extends Parent {

        private int minCount;

        private int maxCount;

        public AbstractChild() {

        }

        // Second abstract method: boolean used
        public abstract boolean isExportEnabled();

        public int getMinCount() {
            return minCount;
        }

        public void setMinCount(int minCount) {
            this.minCount = minCount;
        }

        public int getMaxCount() {
            return maxCount;
        }

        public void setMaxCount(int maxCount) {
            this.maxCount = maxCount;
        }

    }

    public static class FirstChild extends AbstractChild {

        @Override
        public boolean isExportEnabled() {
            return false;
        }

        @Override
        public Type getType() {
            return Type.TYPE_A;
        }

    }

    public static class SecondChild extends AbstractChild {

        @Override
        public boolean isExportEnabled() {
            return true;
        }

        @Override
        public Type getType() {
            return Type.TYPE_B;
        }

    }

    public static class Fam {
        private int famId;

        private List<Parent> members;

        public Fam() {
            members = new ArrayList<Parent>();
        }

        public int getFamId() {
            return famId;
        }

        public void setFamId(int famId) {
            this.famId = famId;
        }

        public List<Parent> getMembers() {
            return members;
        }

        public void setMembers(List<Parent> members) {
            this.members = members;
        }

        public void addMember(Parent member) {
            members.add(member);
        }

    }

    public SimpleTestMain() {
    }

    public static void main(String[] args) {
        Fam fam = new Fam();
        FirstChild fc = new FirstChild();
        fc.setId(1);
        fc.setCode("FirstChildCode");
        fc.setMinCount(1);
        fc.setMaxCount(4);

        fam.addMember(fc);

        SecondChild sc = new SecondChild();

        sc.setCode("SecondChildCode");
        sc.setMinCount(131);
        sc.setMaxCount(431);

        fam.addMember(sc);
        String test = "";
        // Serialize it
        ObjectMapper mapper = new ObjectMapper();
        try {
            test = mapper.writeValueAsString(fam);
            System.out.println("Serialized bean:\n" + test);
            // the output
            // Serialized bean:
            // {"famId":0,"members":[{"@cls":".SimpleTestMain$FirstChild","id":1,"code":"FirstChildCode","minCount":1,"maxCount":4,"type":"TYPE_A","exportEnabled":false},{"@cls":".SimpleTestMain$SecondChild","id":0,"code":"SecondChildCode","minCount":131,"maxCount":431,"type":"TYPE_B","exportEnabled":true}]}
        } catch (IOException e) {
            e.printStackTrace();
        }

        // Deserialize it
        mapper = new ObjectMapper();

        //      mapper.enableDefaultTyping();
        try {
            Fam fam1 = mapper.readValue(test, Fam.class);

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```*

# php - 如何在 Propel（也是 Doctrine）- Symfony 1.4 中强制重新获取关联结果？

> ID：11848962
> 
> 赞同：1
> 
> 时间：2012-08-07T15:13:45.083
> 
> 标签：php, orm, symfony1, propel

我有 2 个实体：与 Child 具有一对多关系的父级。

我使用`$parent->getChilds()`Propel 自动生成的方法来获取所有的孩子。

之后我以不同的方法手动添加（或删除）一些新的孩子：

```
$child = new Child();
$child->setParentId($parent->getId());
$child->save(); 
```

现在，如果我回想该`getChilds`方法，我会得到相同的原始子代（也没有对数据库的额外查询）。

我知道这是更好的行为和更有效的方式，但是有没有办法强制重新获取？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T15:32:31.057

`$parent->reload(true)`

应该在推进中工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:28:03.167

从未使用过，但您可能正在寻找[`Doctrine_Record#refresh`](https://github.com/doctrine/doctrine1/blob/master/lib/Doctrine/Record.php#L956).

# git - jenkins 下的 git clone/ssh

> ID：11848965
> 
> 赞同：3
> 
> 时间：2012-08-07T15:13:51.517
> 
> 标签：git, ssh, jenkins, bitbucket-server

我正在使用 stash 作为 git 存储库管理器。stash 使您能够为每个尝试连接并从中克隆的用户添加 ssh 密钥。我已经为所有 unix 用户配置了它，但是 windows 给我带来了困难。Windows 从机（2008 R2 服务器）上的 git clone 进程永远挂起，因为它可能找不到保存密钥的 .ssh 目录。从 cli 手动运行相同的命令时，它工作正常。

我尝试了各种配置，使用 %HOME% 环境变量等。它根本不适合我。在这个问题上花了一天多的时间，但没有任何效果。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T15:23:51.517

在客户端 (Jenkins)，您需要检查运行 Jenkins 作业的用户是否知道`%HOME%`环境变量：它需要它的 %HOME%.ssh\id_rsa.pub 公共 ssh 密钥。
请参阅“ [Jenkins - Git - 权限被拒绝（公钥）](https://stackoverflow.com/questions/6515039/jenkins-git-permission-denied-publickey/6936728#6936728) ”

在服务器上（[来自 Atlassian 的 Stash](http://www.atlassian.com/fr/software/stash/overview)），您需要确保其中`~stachAadminAccount\.ssh\authorized_keys`包含您的公钥。

除此之外，您需要调试 ssh 连接：

```
ssh -vvvT ssh://git@stash.atlassian.com:7999/path/to/repo.git 
```

（替换`git`为用于管理 Stash 的帐户，并替换`stash.atlassian.com:7999`为您的`server:port`）

* * *

> 1）我已明确添加`%HOME%`到从属上的系统环境变量，只是为了确保它被注入。它可能不需要，但我添加它是为了看看它是否会产生影响

需要：ssh**将**在下查找密钥（私有和公共）`%HOME%/.ssh`

> 2) 我从来不用在 stash 下弄乱 ssh 密钥。事实上，所有的 stash 用户都是 stash 内部的，不是`/etc/password`文件或类似文件的一部分，所以`authorized_keys`无论如何都不存在文件 – user1577236 7 小时前

a/ “不是`/etc/password`文件的一部分”：当然这些没有在 /etc/password 中注册：我们在这里不是在谈论用户帐户，而是关于 ssh 密钥允许用户作为一个唯一的用户帐户打开一个安全的 shell 会话（ stash admin account）：所有 ssh 命令将在*同一个*帐户下执行。

b/“无`authorized_keys`文件”：当然应该存在：当您报告使用 ssh 协议的克隆工作时，它涉及纯 ssh 通信，这*意味着*在`~/.ssh/authorized_keys`.
该文件不存在的唯一方法是，如果 Stash 启动自己的 ssh 守护程序，配置为在另一个文件/公钥源中查找密钥。

> 关于 2 - 您在 stash 中所做的是将公钥添加到每个用户的 stash 中的空间位置。

可能是这样，但 Stash 应该只是 ssh 的一个不错的前端。它背后的所有 ssh 机制仍然应该更新。

> 3）如前所述，使用 git ssh 协议从命令行运行 git clone 命令可以正常工作，那么我应该在调试会话中寻找什么？

您必须定义一个 Jenkins 作业，将`ssh -vvvT`其作为其唯一命令：这样，您会从 Jenkins 的角度看到什么不起作用。

> 我很想调试 Jenkins 进程并看看它在 ssh 会话期间做了什么，但我不知道该怎么做（还......）。大约两周前才开始与 Jenkins 合作。

在 Windows 上，[进程浏览](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)器至少是第一步，以便查看 Jenkins 进程（及其作业）在哪个帐户下以及使用什么环境变量运行。

# excel - Com 加载项未显示在 Excel 2003 的 Com 加载项窗口中

> ID：11848968
> 
> 赞同：-1
> 
> 时间：2012-08-07T15:14:07.287
> 
> 标签：excel, comaddin

我为我的加载项用户生成了我的 VB 代码的 DLL。此 COM 加载项可在除一台以外的所有计算机上运行。

用户单击 COM 加载项按钮，然后单击添加，浏览到正确的 DLL 并单击确定，但加载项未出现在列表中。

有没有其他人遇到过这个问题或有解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:05:47.113

**Excel 2003 的解决方案：** 打开 Excel 单击帮助>关于 Microsoft Office Excel>已禁用项目 选择在加载项窗口中不可见的加载项并启用它。重新启动 Excel，瞧！

# android - ContentObserver 不适用于 Nexus 7 上的浏览 器书签？

> ID：11848970
> 
> 赞同：2
> 
> 时间：2012-08-07T15:14:10.733
> 
> 标签：android, google-chrome

我注册了一个 ContentObserver 来监控 Nexus 7 上 Chrome 的书签更改，但是 onChange() 没有任何回调。

使用相同的代码，我可以在其他设备上获取 Android 默认浏览器的 ContentObserver 回调。

Chrome 不支持 Nexus 7 上的 ContentObserver 回调吗？

代码如下：

```
 getApplication().getContentResolver().registerContentObserver(Browser.BOOKMARKS_URI, true, observer); 
```

...

```
static class HistoryOberser extends ContentObserver {

    public HistoryOberser() {
        super(null);
    }

    @Override
    public boolean deliverSelfNotifications() {
        return true;
    }

    @Override
    public void onChange(boolean selfChange) {
        super.onChange(selfChange);
        Log.d(TAG, "onChange: " + selfChange);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:52:44.430

使用 URI "content://com.android.chrome.browser/bookmarks" 为 Android Crhome 浏览器书签可以使观察者工作。

# objective-c - libPusher + 更新一个打开的 NSMenu

> ID：11848971
> 
> 赞同：0
> 
> 时间：2012-08-07T15:14:11.173
> 
> 标签：objective-c, pusher

我有一个`NSMenu`我想用通过[pusherapp](http://pusher.com/)推送到我的应用程序并使用[libPusher 客户端库](https://github.com/lukeredpath/libPusher "libPusher 客户端库")接收的项目来更新。但似乎没有收到事件`NSEventTrackingRunLoopMode`。

给定以下代码段：

```
[channel bindToEventNamed:@"my_event" handleWithBlock:^(PTPusherEvent *event) {
    NSLog(@"event received");
}]; 
```

我在保持菜单打开的同时等待推送发生，我希望立即收到该事件，但我只在关闭菜单时收到它。

我还尝试将主队列传递给`bindToEventNamed:handleWithBlock:queue:`（使用`dispatch_get_main_queue();`），但无济于事。

所以我想知道是我做错了什么还是 libPusher 中有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:20:02.693

我是 libPusher 的作者。您看到这个问题的原因是因为 libPusher 使用的底层 WebSocket 库，[SocketRocket](https://github.com/square/socketrocket)只能在默认的运行循环模式下工作。

好消息是，这已在 SocketRocket 的最新 HEAD 中得到修复。我已经针对最新的 SocketRocket 测试了 libPusher，并且可以确认它修复了这个问题，并且我打算将这些更改滚动到下一个版本。

现在，我刚刚检查了未解决的 Github 问题，并意识到您是这个错误的原始报告者，所以您可能已经知道这一切，但无论如何我都会为后代发布这个答案。

*   [libPusher 问题](https://github.com/lukeredpath/libPusher/issues/62)
*   [SocketRocket 问题](https://github.com/square/SocketRocket/issues/44)

# jasper-reports - iReports 中的多个页面

> ID：11848981
> 
> 赞同：2
> 
> 时间：2012-08-07T15:14:41.453
> 
> 标签：jasper-reports, ireport

首先，我使用的是 iReport 2.0.0 版本。

一位客户要求提供 2 页的报告。该报告包含一个标题（显示在两页上，带有页码，然后是一些静态信息），从 Oracle 服务器查询的一个信息块，然后是覆盖首页其余部分的大约 7 个静态图像第二个。

问题是，没有办法在 iReports 中创建第二个页面。所以为了解决这个问题，我尝试将 2 页的页面大小加倍，并在第一页结束的地方插入一个分页符。虽然这在 iReports 中看起来很棒，但当我以 PDF 格式执行它时，我得到的第一页包含所有正确的信息，然后是 11 英寸的空白，然后页面全部正确，除了 11 英寸的空白。

我尝试再次将页面缩小到 11 英寸，但是，当我这样做时，我得到一个构建错误，说我的详细信息部分超出了边距，它只是重叠了我的所有图像，我基本上只有一页。

有没有人有这样的多个页面的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:21:51.687

将页码和页眉内容放在页眉带中，然后将数据库驱动的数据和图像放在细节带中。当第一页空间不足时，Jasper 应该将图像流入第二页。

# r - 计算 lapply 中出现的条件

> ID：11848984
> 
> 赞同：4
> 
> 时间：2012-08-07T15:14:53.880
> 
> 标签：r

我正在运行一个模拟，我需要跟踪特定条件的函数调用中出现的次数。我试图通过分配一个全局对象来实现这一点。如果您运行该函数，它会起作用，但如果您像我一样尝试`lapply`该函数，那么您将获得条件发生的所有时间的单一计数，而不是每次发生的`list`计数`lapply`。

这是一个虚拟情况，其中出现的是数字的偶数：

```
FUN <- function(x){
    lapply(1:length(x), function(i) {
        y <- x[i]
        if (y %% 2 == 0){
            assign("count.occurrences", count.occurrences + 1, env=.GlobalEnv)   
        }
        print("do something")
    })
    list(guy="x", count=count.occurrences)
}

#works as expected
count.occurrences <- 0
FUN(1:10)

count.occurrences <- 0  
lapply(list(1:10, 1:3, 11:16, 9), FUN) 

#gives me...
#> count.occurrences
#[1] 9

#I want...
#> count.occurrences
#[1] 5  1  3  0 
```

它在模拟中，所以速度是一个问题。我希望这尽可能快，所以我不接受全球任务的想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T16:36:46.367

与其分配给全局环境，为什么不分配给 inside`FUN`的环境呢？

```
FUN <- function(x){
    count.occurances <- 0
    lapply(1:length(x), function(i) {
        y <- x[i]
        if (y %% 2 == 0){
            count.occurances <<- count.occurances + 1
        }
        print("do something")
    })
    list(guy="x", count=count.occurances)
}

Z <- lapply(list(1:10, 1:3, 11:16, 9), FUN) 
```

然后你可以把计数拉出来。

```
> sapply(Z, `[[`, "count")
[1] 5 1 3 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T16:24:25.230

我没有对此进行任何基准测试，但是您是否尝试过仅使用`for`循环？我知道在 R 中通常不鼓励循环，但它们也不总是较慢。

```
FUN <- function(x) {
  count.occurrences = 0
  for (i in 1:length(x)) {
    y = x[i]
    if (y %% 2 == 0) {
      count.occurrences = count.occurrences + 1
    }
    print("do something")
  }
  list(guy="x", count=count.occurrences)
}

lapply(list(1:10, 1:3, 11:16, 9), FUN) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:23:34.960

我可以这样得到：

```
count.occurances <- 0  
Z <-lapply(list(1:10, 1:3, 11:16, 9), FUN) 
diff(c(0, sapply(1:length(Z), function(x) Z[[x]]$count))) 
```

我愿意接受更好的想法（更快）。

# excel - 使用VBA将单元格值从一个单元格复制到另一个单元格

> ID：11848986
> 
> 赞同：8
> 
> 时间：2012-08-07T15:15:16.353
> 
> 标签：excel, vba, formatting, copy, cell

在 excel 中，我试图将文本从一个单元格复制到另一张工作表中的另一个单元格。源单元格包含格式化文本*（粗体、下划线、不同颜色）*。但是当我使用 VBA 将文本复制到另一个单元格时，格式会丢失。

我知道这是因为 excel 只复制文本值。有没有办法从单元格中读取**HTML 文本** *（而不是纯文本）*？

我已经用谷歌搜索了这个并没有得到任何答案。我知道如果我们使用复制和粘贴方法，我们可以复制格式。例如

```
Range("F10").Select
Selection.Copy
Range("I10").Select
ActiveSheet.Paste 
```

**但是我想在没有复制和粘贴的情况下进行操作，因为我的目标是一个合并的单元格，并且与我的源单元格的大小不同。excel VBA中是否有可用的选项来执行此操作？**

编辑：我能够用下面的代码解决它。

```
Range("I11").Value = Range("I10").Value
For i = 1 To Range("I10").Characters.Count
    Range("I11").Characters(i, 1).Font.Bold = Range("I10").Characters(i, 1).Font.Bold
    Range("I11").Characters(i, 1).Font.Color = Range("I10").Characters(i, 1).Font.Color
    Range("I11").Characters(i, 1).Font.Italic = Range("I10").Characters(i, 1).Font.Italic
    Range("I11").Characters(i, 1).Font.Underline = Range("I10").Characters(i, 1).Font.Underline
    Range("I11").Characters(i, 1).Font.FontStyle = Range("I10").Characters(i, 1).Font.FontStyle
Next i 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T15:43:51.500

使用 Excel 2010 吗？尝试

```
Selection.PasteSpecial Paste:=xlPasteAllUsingSourceTheme, Operation:=xlNone, SkipBlanks:=False, Transpose:=False 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T15:41:58.480

要复制格式：

```
Range("F10").Select
Selection.Copy
Range("I10:J10").Select ' note that we select the whole merged cell
Selection.PasteSpecial Paste:=xlPasteFormats 
```

复制格式会破坏合并的单元格，因此您可以使用它来将单元格重新组合在一起

```
Range("I10:J10").Select
Selection.Merge 
```

要复制单元格值，而不复制任何其他内容（并且不使用复制/粘贴），您可以直接寻址单元格

```
Range("I10").Value = Range("F10").Value 
```

其他属性（字体、颜色[等](http://office.microsoft.com/client/helppreview14.aspx?AssetId=HV080003719&lcid=1033&NS=EXCEL.DEV&Version=14&tl=2&CTT=5&origin=HV080003718)）也可以通过以相同方式直接寻址范围对象属性来复制

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T16:09:08.160

我宁愿避免使用选择

```
 With sheets("sheetname").range("I10") 
          .PasteSpecial Paste:=xlPasteValues, _
                  Operation:=xlNone, _
                  SkipBlanks:=False, _
                  Transpose:=False
          .PasteSpecial Paste:=xlPasteFormats, _
                  Operation:=xlNone, _
                  SkipBlanks:=False, _
                  Transpose:=False
          .font.color = sheets("sheetname").range("F10").font.color
      End With
      sheets("sheetname").range("I10:J10").merge 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-04T12:03:33.073

```
Sub CopyValueWithFormatting()
    Sheet1.Range("A1").Copy
    With Sheet2.Range("B1")
        .PasteSpecial xlPasteFormats
        .PasteSpecial xlPasteValues
    End With
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-24T08:44:54.497

**在excel中将粗体文本从一张表复制到另一张表通过使用VBScript** '创建实例对象

```
Set oXL = CreateObject("Excel.application")
oXL.Visible = True

Set oWB = oXL.Workbooks.Open("FilePath.xlsx")
Set oSheet = oWB.Worksheets("Sheet1")         'Source Sheet in workbook
Set oDestSheet = oWB.Worksheets("Sheet2")       'Destination sheet in workbook

r = oSheet.usedrange.rows.Count
c = oSheet.usedrange.columns.Count

For i = 1 To r
    For j = 1 To c
        If oSheet.Cells(i,j).font.Bold = True Then

            oSheet.cells(i,j).copy
            oDestSheet.Cells(i,j).pastespecial
        End If
    Next
Next

oWB.Close
oXL.Quit 
```

# ios - UIScrollView 滚动太慢，从不调用 scrollViewDidEndDecelerating

> ID：11848988
> 
> 赞同：0
> 
> 时间：2012-08-07T15:15:28.287
> 
> 标签：ios, uiscrollview

我正在开发的 iPad 应用程序是一本书。要跳转到特定页面，用户可以按下一个按钮，该按钮覆盖当前视图的视图顶部，显示书中每个页面的缩略图图像。

当用户按顺序浏览书籍并显示此缩略图菜单时，如果用户显示该菜单，则滚动动画是流畅而精细的。如果用户`showBookmarkMenu`在加载大约 15 页后调用，滚动视图动画非常非常慢，并且滚动视图不再捕获触摸，则会出现问题。

我注意到`scrollViewDidEndDecelerating`当滚动动画正常且流畅时（加载应用程序后不久）会调用它，但在用户浏览几页后不会调用它。所以一个假设是 CPU 正在努力处理滚动视图内容定位的动画。我使用 Instruments 的 Activity Monitor 运行应用程序，但有时应用程序使用 97% 甚至更多的 CPU 并且滚动视图滚动良好......

对这个问题有什么想法吗？我已经在下面发布了我的代码。

**主类.m**

```
//Called when user presses the open/close bookmark menu button
-(IBAction)toggleBookmarksMenu{
    if([bookMarkMenu isHidden]){
        [currentPage.view addSubview:bookMarkMenu];
        [bookMarkMenu showBookmarkMenu];

    }
    else{
        [bookMarkMenu hideBookmarksMenu];
    }
} 
```

**滚动视图类.h**

```
@interface BookmarkManager : UIView<UIScrollViewDelegate>{
    UIScrollView *thumbnailScrollView;
}

@property (strong, nonatomic) UIScrollView *thumbnailScrollView;
@property (strong) id <BookmarkManagerDelegate> bookmarkManagerDelegate;

-(void)showBookmarkMenu;
-(void)hideBookmarksMenu;

@end 
```

**滚动视图类.m**

```
-(void)showBookmarkMenu{
    [self setHidden:NO];
    [UIView animateWithDuration:0.5
                     animations:^{
                         self.center = CGPointMake(512, 384);
                     }
     ];
}

-(void)hideBookmarksMenu{
    [UIView animateWithDuration:1
                     animations:^{
                         self.center = CGPointMake(512, -120);
                     }
                     completion:^(BOOL finished){
                             [self setHidden:YES];
                             [self removeFromSuperview];
                     }
     ];
}

-(id)init{
    self = [super initWithFrame:CGRectMake(0, 0, 1024, 768)];
    if(self){
        [self setBackgroundColor:[UIColor clearColor]];
        self.center = CGPointMake(512, 0);

        thumbnailScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 1024, 120)];
        [thumbnailScrollView setBackgroundColor:[UIColor clearColor]];
        thumbnailScrollView.showsHorizontalScrollIndicator = NO;

        //Add the UIButtons with images of the thumbnails
        for(int i = 0; i < totalPages; i++){

            UIButton *pageThumbnail = [UIButton buttonWithType:UIButtonTypeCustom];
            pageThumbnail.frame = CGRectMake(0, 0, 125, 95);

            [pageThumbnail setBackgroundImage:[UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/p%d_thumb.png", [[NSBundle mainBundle] resourcePath], i]] forState:UIControlStateNormal];

            [thumbnailScrollView addSubview:pageThumbnail];
            [pageThumbnail addTarget:self action:@selector(thumbnailTapped:) forControlEvents:UIControlEventTouchDown];

        }

        [self addSubview:thumbnailScrollView];
        [thumbnailScrollView setContentSize:CGSizeMake(totalPages * 125 + (20*(totalPages+1)), 120)];
        [thumbnailScrollView setDelegate:self];

        [self setHidden:YES];   
    }        
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:32:07.737

我必须解决可能的内存不足问题。

使用大量按钮的一种可能替代方法是使用 UITableView。您的代码当前的工作方式是加载所有带有图像的按钮。对于一本大书来说，这可能会很痛苦。

使用 UITableView 你只使用你看到的（关于）尽可能多的内存。而且，由于每个图像都是动态加载的，因此您的内存使用量仅与显示的一样多。那将是我将如何去做（实际上，我现在正在这样做，只是不是用一本书）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:23:09.687

根据您的观察，在加载 15 页左右后滚动变慢：可能您的设备正忙于处理内存不足的情况。在这种情况下，您可能知道，系统范围内的通知会发送到相当多的应用程序/对象，以便它们尽可能多地恢复内存。

您能否在滚动变慢时或多或少同时检查您的应用程序正在执行[`didReceiveMemoryWarning`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/didReceiveMemoryWarning)？

如果您确认该问题可能与内存饱和/回收有关，那么我建议为您的图像实施延迟加载方案：

1.  您仅在需要显示图像时才加载图像；

2.  您总共只能在内存中保存 3-5 张图像，以确保平滑滚动。

基本步骤需要提供您的代表的 id

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView; 
```

执行。在这里您将预加载图像：

1.  知道您的位置，您就知道您当前的图像（例如，图像编号 N）；

2.  卸载图像 N-2, N+2;

3.  加载图像 N-1, N+1。

如果您只想要一个“缓冲区”图像，我提供的要加载/卸载的图像很好。

无论如何，如果你用谷歌搜索“iso 滚动视图延迟加载”，你会发现很多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:41:57.857

原来这不是内存不足的问题，而是 CPU 过于繁忙的问题。

CPU 执行滚动视图的滚动动画所需的计算，当滚动变得如此缓慢时，我想我首先要弄清楚为什么我首先使用了 97% 的 CPU。原来，在第 15 页之后，我的 CPU 密集型递归函数（为应用程序的另一部分计算 UIBezierPaths）陷入了无限循环。该应用程序每秒计算数百个 UIBezierPaths，并且达到了 CPU 无法跟上滚动视图动画计算的地步。

一旦我确定递归函数在不需要它们时停止调用它们自己，整个应用程序的 CPU 使用率保持在 20% 以下，并且滚动视图表现得非常好。

# c# - 如何在 Windows XP 中配置 Windows 激活服务器 (WAS) 以托管 WCF 服务？

> ID：11848996
> 
> 赞同：6
> 
> 时间：2012-08-07T15:15:40.983
> 
> 标签：c#, asp.net, wcf, was

如何在 Windows XP 中配置 Windows 激活服务器 (WAS) 以托管 WCF 服务？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T15:18:20.453

[WAS](http://en.wikipedia.org/wiki/Windows_Activation_Services)是在 Windows 6.0 或 Server 2008 和 Windows Vista 中引入的。

不幸的是，它不适用于 Windows XP 或 Server 2003。您需要将操作系统升级到支持 IIS 7.0 的操作系统。它不能作为单独的组件使用。