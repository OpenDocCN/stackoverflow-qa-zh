# StackOverflow 问答 12018000-12018999

# ruby - 如何使用包含 / 字符的 Ruby 重命名文件？

> ID：12018000
> 
> 赞同：1
> 
> 时间：2012-08-18T11:02:16.470
> 
> 标签：ruby, file, special-characters, rename

我编写了一个小的 Ruby 命令行应用程序，用于在我的 Mac 硬盘上组织电视节目。鉴于电视剧集标题的性质，有些剧集包含该`/`角色。

在 Mac 上，文件系统实际上允许我编写这个文件，如果我手动重命名带有`/`字符的文件，一切都很好。

当 Ruby`File.rename`在我的脚本中运行时，我只是得到一个`No such file or directory`错误，因为 Ruby 尝试将`/`文件名中的文件作为应该存在的文件夹读取。

这是一个例子：

输出路径是`/TV/Showname/Season 1/Showname - 1x07 - 5/1.mp4`

现在，与其寻找文件夹`/Showname - 1x07 - 5/`并写入其中的`1.mp4`文件，我如何告诉 ruby​​ 简单地获取文件名（`Showname - 1x07 - 5/1.mp4`）并将其按原样写入`Season 1`文件夹？

谢谢阅读。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T11:32:00.320

这是一个奇怪的问题，但是因为反斜杠被用作文件分隔符，它被转换为 Ruby 使用的文件名中的冒号。因此，要重命名您的文件，请将名称中的正斜杠替换为冒号。

所以你会写这样的东西：

```
File.rename("Showname - 1x07 - 5:1.mp4", "/TV/Showname/Season 1/Showname - 1x07 - 5:1.mp4") 
```

# jquery - 使用jQuery在焦点和模糊上隐藏/显示输入的值文本

> ID：12018001
> 
> 赞同：1
> 
> 时间：2012-08-18T11:02:17.653
> 
> 标签：jquery, textbox

我有输入的值属性。如果文本框没有内容，我需要它消失在该特定文本框的焦点上，并重新出现在模糊中。

这是我当前的 HTML 代码。

```
 <label>First Name</label></td>
 <input class="required" type="text" name="firstname" value="Fill" id="firstname" /><span>(required)</span> 
```

同样，我尝试了另一件事。当焦点位于（文本框 A）时，会出现一个新的文本框（B），而当焦点不在（来自 A）时，B 会消失。但这里出了点问题。我需要用户输入一些东西在盒子 B 中。现在我需要一些东西。当焦点从 A 和 B 出来时，只有 B 才会消失。注意：页面上有多个文本框。这是它的代码。

```
$('#lastname').focusin(function () {
        $('input.hidden').fadeIn(1000);
        $('input.hidden').css('backgroundColor', 'yellow');
        }).focusout(function () {
        $('input.hidden').hide();
        }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T11:10:33.943

```
​$("#firstname")​.on({
    focus: function() {
        if (this.value==='Fill') this.value = '';
    },
    blur: function() {
        if (this.value==='') this.value = 'Fill';
    }
})​;​ 
```

[**小提琴**](http://jsfiddle.net/qrSAp/)

如果较旧的浏览器不是问题，那么您实际上不需要 javascript：

```
<label>First Name</label>
<td> 
    <input placeholder="Fill" id="firstname" />
    <span>(required)</span>
</td>​ 
```

[**小提琴**](http://jsfiddle.net/qrSAp/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T11:06:30.880

```
var fill = $('#firstname').val();

$('#firstname').on('focus', function() {
    $(this).val('');
}).on('blur', function() {
    if ($('#firstname').val() == "") {
        $(this).val(fill);
    }
});​ 
```

[活生生的例子](http://jsfiddle.net/jcwvM/3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T11:08:01.113

尝试：

```
$(".required").on("blur", function(){
  $(this).attr("value", "Fill");
}).on("focus", function(){
  $(this).attr("value", "");
}); 
```

[提琴手](http://jsfiddle.net/AkpVd/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T11:15:51.447

```
<input type="text" id="sample" value="Fill"/>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

然后，您可以使用为您`Jquery`的处理`focus`和`Blur`事件`textbox`

```
 $('#sample')​.on("focus",function(){
             $(this).val("");
            }).on("blur",function(){
             $(this).val("Fill");
                                       })​;​​ 
```

**[现场演示](http://jsfiddle.net/29nrT/1/)**

# mongodb - mongodb 磁盘空间过大

> ID：12018002
> 
> 赞同：4
> 
> 时间：2012-08-18T11:02:21.150
> 
> 标签：mongodb

我的 mongodb 占用 114g，这是我磁盘的 85%

尝试释放一些空间`db.repairDatabase()`会失败，因为我没有足够的可用空间

我知道我的数据不应该占用太多空间，因为我曾经有一个占用 90% 磁盘的大型集合。

然后我删除了这个集合，只重新插入了 20% 的数据。

我怎样才能释放一些空间？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-18T21:08:09.470

用于数据存储的磁盘空间由 MongoDB[预先分配](http://www.mongodb.org/display/DOCS/Excessive+Disk+Space#ExcessiveDiskSpace-RecoveringDeletedSpace)，只能通过使用新的预分配文件重建数据库来回收。通常这是通过`db.repairDatabase()`备份和恢复来完成的。正如您所指出的，修复需要足够的空间来创建数据库的新副本，因此可能不是一种选择。

以下是一些可能的解决方案，但都涉及在其他地方提供一些可用空间：

*   如果有足够的可用空间来[mongodump](http://www.mongodb.org/display/DOCS/Backups#Backups-Mongodump)该数据库，您可以`mongodump`删除`mongorestore`它。 `db.dropDatabase()`将删除磁盘上的数据文件。

*   如果您使用的是[LVM](http://en.wikipedia.org/wiki/Logical_Volume_Manager_(Linux))或[ZFS](http://en.wikipedia.org/wiki/ZFS)等卷管理器，则可以向逻辑卷添加额外的磁盘空间，以便修复或转储和恢复数据库。

*   如果您有另一台服务器，您可以设置一个[副本集](http://www.mongodb.org/display/DOCS/Replica+Sets)来同步数据，而无需关闭当前服务器（这将是副本集中的“主要”服务器）。将数据同步到辅助服务器后，您可以降级原始主服务器并重新同步数据库。

请注意，对于副本集，您至少需要三个节点 .. 所以要么是三个数据节点，要么是两个数据节点加上一个[仲裁器](http://docs.mongodb.org/manual/administration/replication-architectures/#replica-set-arbiter-nodes)。在生产环境中，仲裁器通常会在第三台服务器上运行，因此如果当前主节点不可用，它可以允许任一数据节点成为主节点。在您回收磁盘空间的情况下，可以在其中一台服务器（可能是新服务器）上运行仲裁程序。

副本集通常对管理目的非常有帮助，因为它们允许您关闭服务器以进行维护（例如运行数据库压缩或修复），同时仍然有服务器可用于您的应用程序。它们还有其他好处，例如维护数据的冗余副本以进行自动故障转移/恢复。

# php - 警告：打开目录：未实现

> ID：12018003
> 
> 赞同：8
> 
> 时间：2012-08-18T11:02:26.440
> 
> 标签：php

我是 PHP 新手，我正在尝试构建一个脚本。当我加载脚本时，我收到以下错误：

警告：opendir（http://www.hetweerinboskamp.nl/voorpagina/movies）[function.opendir]：无法打开目录：未实现

```
<?php
    $hal ='';
    $dir ='http://www.hetweerinboskamp.nl/voorpagina/movies';
    if ($handle = opendir($dir)) {
        // Loop the folders
        while (false !== ($file = readdir($handle))) {
            if(strlen($file) > 4) {
                $rawd = parsename($file);
                $hal.= 'new Date('.substr($rawd,0,4).', '.substr($rawd,4,2).'-1, '.substr($rawd,6,2).'),';
                 //$hal.= $rawd.',';
             }

            closedir($handle);
         } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T11:08:49.760

[`opendir()`](http://php.net/manual/en/function.opendir.php)用于打开本地目录，并且从 PHP 5.0.0 开始在 ftp 目录上。

如果您的 PHP 代码在 www.hetweerinboskamp.nl 上运行，那么`/voorpagina/movies`它实际上是一个本地目录，您可以这样做：

```
$dir ='<wwwroot>/voorpagina/movies';
if ($handle = opendir($dir)) { 
```

`wwwroot`如您的 php 代码所示，文件系统的根在哪里。

如果您尝试从其他网站下载内容，请尝试例如[`file_get_contents()`](http://us.php.net/manual/en/function.file-get-contents.php). 请注意，如果远程服务器列出目录的内容，则该列表实际上是服务器动态生成的 HTML 页面。您可能会发现自己需要解析该页面。更好的方法是检查服务器是否提供某种 API，在该 API 中它以标准化形式（例如 JSON 格式）发回内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-18T11:05:47.980

`opendir`操作文件系统上的目录，而不是 HTTP URI。

虽然一些 HTTP URIs 返回目录列表（您使用的那个没有，这是一个 404 错误），但这些列表是由网络服务器生成的 HTML 文档，并不是实际的目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-03T20:07:53.267

Manual 声称此功能适用于 URL，但是，它似乎没有。

使用本地路径（相对或绝对）。例如，`'./voorpagina/movies'`。这已经解决了我之前的类似问题。我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T11:06:32.473

大多数远程服务器不会发回目录列表，因为这样的 opendir 无法理解您尝试做什么，因此它无法工作。

您将需要使用 ftp 之类的东西，这是一个示例： http: [//php.net/manual/en/ftp.examples-basic.php](http://php.net/manual/en/ftp.examples-basic.php)或 cURL

# javascript - 为不同的网络屏幕尺寸加载不同的图像

> ID：12018005
> 
> 赞同：5
> 
> 时间：2012-08-18T11:02:39.183
> 
> 标签：javascript, jquery, image-resizing, screen-resolution, differential-equations

我有这段代码，每次用户加载 index.html 时，它都会从数组中自动加载不同的图片。这是jquery代码：

```
$(window).load(function() {
    var randomImages = ['img1','img2','img3','img4','img5'];
    var rndNum = Math.floor(Math.random() * randomImages.length);

     var $win = $(this);
     var $img = $('#background').attr('src', '_img/bg/index_rnd/' + randomImages[rndNum] + '.jpg').css({'position':'fixed','top':0,'left':0});
        function resize() {
            if (($win.width() / $win.height()) < ($img.width() / $img.height())) {
              $img.css({'height':'100%','width':'auto'});
            } else {
              $img.css({'width':'100%','height':'auto'});
            }
        }
        $win.resize(function() { resize(); }).trigger('resize');
    }); 
```

我是新来的，可以将图像适应不同的屏幕分辨率。所以我认为如果有人打开我的网站，例如使用 2560/1440 像素的 imac，图像将使用此代码正确调整，但我想它会完全像素化。所以我认为，我必须创建一个更大的图像文件，以便那些计算机加载更大的文件以适应分辨率。我想避免其他屏幕正常的用户出于速度原因加载大文件。我可以在这段代码中添加什么来使更大的屏幕加载更大的文件，这样它就不会像素化？！？！

PD 如果您还知道不同屏幕尺寸组的最佳图像分辨率，那将非常有帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:20:16.160

您始终可以检查窗口大小，高度或宽度，无论您的船漂浮在哪里，并在图像文件名中添加一些内容以加载高分辨率图像，例如`img4.jpg`作为普通图像和`img4_big.jpg`高分辨率图像等。

看起来像这样：

```
$(window).load(function() {
    var randomImages = ['img1', 'img2', 'img3', 'img4', 'img5'];
    var rndNum = Math.floor(Math.random() * randomImages.length);

    var $win = $(this);

      //add _big to image filename if window width is over 1920px, 
      //like so : img4_big.jpg etc.

    var isBig = $(window).width() > 1920 ? '_big' : '';
      //add the string to the image filename
    var $img = $('#background') 
     .attr('src', '_img/bg/index_rnd/' + randomImages[rndNum] + isBig + '.jpg')
     .css({
         'position': 'fixed',
         'top': 0,
         'left': 0
    });

    function resize() {
        if (($win.width() / $win.height()) < ($img.width() / $img.height())) {
            $img.css({
                'height': '100%',
                'width': 'auto'
            });
        } else {
            $img.css({
                'width': '100%',
                'height': 'auto'
            });
        }
    }
    $win.resize(function() {
        resize();
    }).trigger('resize');
});​ 
```

# c++ - Boost.m4 链接器错误

> ID：12018009
> 
> 赞同：0
> 
> 时间：2012-08-18T11:03:31.840
> 
> 标签：c++, boost, ld, autoconf

我`boost.m4`用来寻找Boost。我来啦：

```
AC_PROG_CXX
AC_LANG([C++])
AX_CXX_COMPILE_STDCXX_11
BOOST_REQUIRE([1.48])
BOOST_SIGNALS 
```

正确配置找到信号库，但是在编译时，我得到链接错误 - 未定义对 boost::signals:: 的引用。显然，由 确定的 ldflags`BOOST_SIGNALS`不会添加到全局标志中。我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:02:40.000

我应该添加`$(BOOST_SIGNALS_LIBS)`到`AM_LDFLAGS`.

# matlab - 在 Matlab 中导入 csv 文件

> ID：12018010
> 
> 赞同：0
> 
> 时间：2012-08-18T11:03:39.263
> 
> 标签：matlab, file-io, csv, import

我有一个 csv 文件，其中每一列是不同的测试结果，每一行是不同的模拟。它看起来像这样：

```
 (test 1) (test 2) (test 3) (test 4) (test 5)
(simulation 1)     3   ,    4   ,    6   ,   7   ,     8
(simulation 2)     9   ,    4   ,    7   ,   10  ,     7 
```

请注意，括号中的文本不在 cvs 文件中。我想将这些数据导入到 Matlab 中，就像它在文本文件中的组织方式一样，但是结果矩阵有 3 列和尽可能多的行。

这是为什么？我如何解决它？

另外，有些数字被导入为 NaN，我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:24:35.813

如果您有一个 CSV 文件，例如：

```
3   ,    4   ,    6   ,   7   ,     8
9   ,    4   ,    7   ,   10  ,     7 
```

要读取整个文件，请使用

```
myMatrix = csvread('filename.csv'); 
```

我的矩阵 =

```
3       4       6      7        8
9       4       7      10       7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T11:24:20.700

如果您不熟悉 matlab 基础知识，请查看[`csvread`](http://www.mathworks.com/help/techdoc/ref/csvread.html). 此函数导入逗号分隔值文件，可能正是您所需要的。此外，请检查文献以了解为什么您可能会遇到您提到的错误。如果您仍然遇到问题，请发布您用于导入数据的代码和该数据的更大示例，包括返回 NaN 的条目。

# scala - Scala 中的树集合

> ID：12018011
> 
> 赞同：9
> 
> 时间：2012-08-18T11:03:42.587
> 
> 标签：scala, scala-collections

我想在 Scala 中实现一棵树。我的特定树使用 Swing Split 窗格来提供地理地图的多个视图。拆分窗格中的任何窗格本身都可以进一步划分以提供额外的视图。**我是否正确地说 TreeMap 和 TreeSet 都没有提供 Tree 功能？**如果我误解了这一点，请原谅我。令我震惊的是，应该有标准的 Tree 集合，并且不断重新发明轮子是不好的做法。**是否有任何可能成为未来 Scala 标准的 Tree 实现？**

所有的树都具有三种类型的元素：根、节点和叶子。叶子和节点必须有一个对父节点的引用。Root 和 Nodes 可以对子节点和叶子有多个引用。叶子有零个孩子。如果不删除它们的子节点，就不能删除节点和根。我可能错过了其他规则/约束。

这似乎足以证明标准集合的合理性。我还建议在 Root 和 Nodes 只能有 2 个孩子或一个叶子孩子的情况下，应该有一个标准的子类集合。这就是我在特定情况下想要的。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-19T02:56:06.430

实际上，一棵树本身既无用又很难指定。

从后者开始，严格来说数据结构，一棵树可以有多少个孩子？节点是否存储值？节点是否存储元数据？孩子对父母有指点吗？您将树存储为带有指针的节点，还是作为数组上的位置元素？

这些都是答案是“取决于”的问题。事实上，你说孩子有指向他们父母的指针，但对于任何不可变的树来说*都不是这样！*当某些树实际上存储为单个数组（例如[Heap](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)）上的节点时，您似乎还假设树始终存储为具有引用的节点对象。

此外，并非所有这些要求都能得到满足——有些是相互排斥的。即使你忽略了这些，你仍然会留下一个数据结构，它没有针对任何东西进行优化*并且*使用起来很笨拙，因为你必须处理许多与你无关的细节。

然后，还有第二个问题，那就是一棵树本身是没有用的。`TreeSet`并`TreeMap`利用特定的树，其插入/删除/查找算法使它们成为排序数据的良好数据结构。然而，这根本不是树的唯一用途。树可用于搜索空间算法、表示类似树的真实世界信息、组成文件系统等。有时任务是在图中*找到*一棵树。这些用途中的每一种都需要不同的表示形式和不同的算法——这些算法使它们变得有用。

而且，最重要的是，编写一个树类是微不足道的。问题是编写算法来操纵它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T12:43:36.170

将“树”作为*GUI 小部件*（您似乎指的是它）的概念与作为*有序数据结构*的树之间存在一些不匹配。在前一种情况下，它只是一个嵌套序列，在后一种情况下，目的是提供例如快速搜索算法，并且您不会随意操纵内部结构，其中通常分支因子是恒定的并且树高保持平衡等。后者的一个例子是`collection.immutable.TreeMap`使用称为红黑树的自平衡二叉树结构。

所以这些数据结构对于桥*接到*`javax.swing.TreeModel`. 关于这个接口几乎没有什么可以做的，所以你可能会坚持使用默认实现`DefaultTreeModel`，一个可变的非泛型结构（这是单线程 Swing 所需要的全部）。

有关使用 scala-swing`JTree`包装器的讨论，请参阅[此问题](https://stackoverflow.com/questions/4049628/tree-in-scala-swing)。它还有一个指向 Scala 库的链接`JTree`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T11:11:34.847

由于您可以在 Scala 中使用 java 类，因此请查看`javax.swing.tree`包：[http](http://docs.oracle.com/javase/6/docs/api/javax/swing/tree/package-summary.html) ://docs.oracle.com/javase/6/docs/api/javax/swing/tree/package-summary.html ，尤其是`TreeModel`and`TreeNode`和. 它们被设计为与 Swing 一起使用，但几乎是标准的树实现。`MutableTreeNode``DefaultMutableTreeNode`

除此之外，实现（通用）树应该非常简单。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-29T00:34:58.173

由于 gui 应用程序对树集合的性能要求较低，您可以使用受限于仅表示树结构图的通用图形库： http: [//scala-graph.org/](http://scala-graph.org/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-18T12:55:20.857

`TreeSet`并且`TreeMap`都基于[`RedBlack`](http://www.scala-lang.org/api/current/scala/collection/immutable/RedBlack.html)：

> 红黑树是平衡二叉树的一种形式，其中一些节点被指定为“红色”，其他节点被指定为“黑色”。像任何平衡二叉树一样，对它们的操作在与树大小成对数的时间上可靠地完成。

（引自[Scala 2.8 Collections](http://docs.scala-lang.org/overviews/collections/concrete-immutable-collection-classes.html#redblack_trees)）

`RedBlack`没有很好地记录，但是如果您查看它的来源`TreeSet`并且`TreeMap`很容易弄清楚如何使用它，尽管它不能满足您的所有（大多数？）要求（节点没有对父级的引用， ETC）。

# c# - CrystalDecisions.CrystalReports.Engine.Table.ApplyLogOnInfo 对象引用未设置为对象的实例

> ID：12018012
> 
> 赞同：0
> 
> 时间：2012-08-18T11:03:50.507
> 
> 标签：c#, crystal-reports

这段代码有什么问题：

```
ReportDocument cryrpt = new ReportDocument();
            TableLogOnInfos crtablelogoninfos = new TableLogOnInfos();
            TableLogOnInfo crtablelogoninfo = new TableLogOnInfo();
            ConnectionInfo crconnectioninfo = new ConnectionInfo();
            Tables CrTables;

            cryrpt.Load("C:\\Documents and Settings\\Administrator\\Desktop\\minfatora11-7--\\minfatora\\minfatora\\Treasury_account_out_come.rpt");

            crconnectioninfo.ServerName = "localhost";
            crconnectioninfo.DatabaseName = "MNFATOR";
            crconnectioninfo.UserID = "ICMADMIN";
            crconnectioninfo.Password = "ICMADMIN";

            CrTables = cryrpt.Database.Tables;

            foreach (CrystalDecisions.CrystalReports.Engine.Table CrTable in CrTables)
            {
                crtableLogoninfo = CrTable.LogOnInfo;
                crtableLogoninfo.ConnectionInfo = crConnectionInfo;
                CrTable.ApplyLogOnInfo(crtableLogoninfo);
            }

            cryrpt.RecordSelectionFormula = "select * from tblxxx where xxx=2";
            cryrpt.Refresh();
            allReportViewer.ReportSource = cryrpt; 
```

我收到错误：“对象引用未设置为对象的实例。” 在线上：

```
CrTable.ApplyLogOnInfo(crtableLogoninfo); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:01:31.377

你`CrTables`是`null`，当你把你的桌子放在这一行时

```
CrTables = cryrpt.Database.Tables; 
```

1.  您可以验证加载路径
2.  或检查您的文件 Treasury_account_out_come.rpt 的语法

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-07-02T22:12:29.340

```
cryrpt.RecordSelectionFormula = "{tblxxx.xxx}=2"; 
```

# c# - 天气获取不工作不止一次

> ID：12018023
> 
> 赞同：0
> 
> 时间：2012-08-18T11:06:02.183
> 
> 标签：c#, webclient, weather, wunderground

我使用[Wunderground](http://www.wunderground.com/)预测在 c# 程序中检索数据时遇到问题。

一旦一切正常，当我单击以检索数据但再次单击按钮时，我收到此错误： ![后台工作者](../Images/1f22bde4056aadf79667da59cde20300.png)

这是我的代码：

```
 private void bweather_DoWork(object sender, DoWorkEventArgs e)
        {
            string lat = Math.Round(deciLat).ToString();
            string lng = Math.Round(deciLon).ToString();
            string latlong = String.Format("{0},{1}", lat.Replace(',', '.'), lng.Replace(',', '.'));

            //Initialize Current as a new Day
            dow.Current = new WeatherLib.WDay();

            //Using Wunderground as the provider we populate the property with current data for the latlong entered into the textbox
            try
            {
                dow = WeatherLib.WProvider.Wunderground(latlong);
                writeToLogFile("Retrieve weather info successfully on: " + latlong);
            }
            catch (Exception ex)
            {
                writeToLogFile(ex.Message);
            }
        } 
```

这是刷新按钮：

```
 private void weather_refresh_Click(object sender, EventArgs e)
        {
            writeToLogFile("Weather button pressed");
            weather_descripton.Clear();
            weather_speed_textbox.Clear();
            weather_tem_textbox.Clear();
            weather_rain_text.Clear();
            weather_wind_dir_textbox.Clear();
            weather_descripton.AppendText("Searching.......");
            if (!bweather.IsBusy)
            {
                bweather.CancelAsync();
            }
            bweather.RunWorkerAsync();
        } 
```

以下是事件处理程序：

```
// Weather handlers
            bweather.WorkerSupportsCancellation = true;
            bweather.DoWork += bweather_DoWork;
            bweather.RunWorkerCompleted += bweather_RunWorkerCompleted; 
```

知道为什么这不能正常工作吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:12:11.510

那么错误消息表明您正在尝试多次使用相同的后台工作人员。

如果它仍然很忙，您会要求它取消，但这并不意味着它会立即取消。据我所知，`BackgroundWorker`代码甚至没有检查它是否被取消，这意味着取消它不会真正实现任何有用的东西。

我建议如果它很忙，你应该忽略这个请求。实际上，最好在*开始*操作时完全禁用该按钮，并仅在操作完成后重新启用它。

# iis-7.5 - 无法从 IIS 7.5 连接到 FoxPro 数据库

> ID：12018025
> 
> 赞同：1
> 
> 时间：2012-08-18T11:06:09.247
> 
> 标签：iis-7.5, foxpro

我目前在使用 IIS7.5 的 ODBC 连接连接到 FoxPro 数据库时遇到严重问题

该数据库位于 IIS 服务器之外的另一台机器上，并通过文件共享访问。

当我从 IIS 服务器上的 IE 调用网页时，一切正常。当我从另一台机器调用网页时，我收到“[Microsoft][ODBC Visual FoxPro Driver]Cannot open file”错误。

应用程序池作为域用户运行。

当我在 IIS 服务器上运行 ProcMon 并调用该页面时，当从 IIS 服务器调用它时，它会访问有问题的文件，然后访问该数据库的一大堆其他 FoxPro 文件。

当我从另一台机器运行该页面时，当它尝试访问第一个文件时出现 ACCESS DENIED 错误。

这是对名为 Comp_W.DBC 的文件的 CreateFile 调用失败。

我检查了一下，调用文件共享的这些调用是同一用户，因此导致问题的不是不同的凭据。我什至将应用程序池帐户设为域管理员，以查看是否可以解决问题但仍然是同样的问题。

我无法将数据库移动到与 IIS 相同的服务器上。我试图在与 FoxPro 数据库相同的服务器上运行 Web 应用程序，但我遇到了不同的问题，因为 OWA 在该服务器上运行，并且 32 位 ODBC 驱动程序导致与作为全局加载的 OWA dll 发生冲突模块。我真的需要它在与 FoxPro 数据库不同的服务器上运行 IIS。

服务器似乎没有运行 kerberos，因为当您管理用户时，委托选项卡不存在。

任何帮助将不胜感激。

詹姆士 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:34:42.733

我会使用[Visual FoxPro OLE DB 驱动程序](http://www.microsoft.com/en-ie/download/details.aspx?id=14839)而不是 ODBC，因为它更新、更快并且不会与 OWA 冲突。这将让您将其移动到 IIS 服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T03:12:32.557

过去的经验表明您没有授予 IIS 用户访问 DBF 所在文件夹的权限。当您在本地机器上运行 IE 时，您会直接传递凭据——当您在另一台机器上运行它时，我相信匿名用户规则会发挥作用。（自从我不得不调试这个已经有一段时间了，带着一粒盐。）

# mysql - 提高 MySQL 选择和更新查询性能的有效方法

> ID：12018031
> 
> 赞同：0
> 
> 时间：2012-08-18T11:06:33.957
> 
> 标签：mysql, performance, select

我在 MySQL 数据库中有 2 个主表。

```
Table1 is -> Master
Table2 is -> Stock 
```

主表有大约 500K（50 万）行，每一行都是唯一的。主表的每一列都有一个外键（下面附上示例）

Stock 表目前大约有 20K 行；它可以在不久的将来达到300K。

**问题**

我的问题是我正在对这些表执行 SQL 查询，目前这需要未知时间。所以想知道，如何提高 MySQL 数据库的性能以加快 SQL 查询的执行时间。

SQL 查询执行以下操作：

*搜索主表 -> 搜索库存表 -> 更新主表*

我正在通过 PHP 文件执行 SQL 查询，我在浏览器中运行以完成上述步骤。因为 Master 表有超过 500K 的记录，我一次只调用 1,000 条记录，并执行上述步骤，再次迭代到下一批 1,000 条记录并这样做直到 Master 表结束。

我通过使用 ---
for loop for to Search table 来实现这一点；它总共进行了大约 5390 个
循环来搜索股票和更新主表。

**测试**
出于测试目的，我将 Stock 表缩减为仅 100 条记录，并将 Master 与所有 539K 记录一起保存以检查执行时间。大约需要 140 ~ 150 秒。

**脚本**
我在下面附上了我的脚本

```
<?php
set_time_limit(36000);

$dbhost='localhost';
$dbuser='root';
$dbpass='';

$conn = mysql_connect($dbhost, $dbuser, $dbpass);

mysql_select_db("pmaster",$conn);

if (!$conn) {   die('Could not connect : '.mysql_error());  }

$trecssql = "select count(distinct `Id`) Total from `Master`";
$trecs = mysql_fetch_assoc(mysql_query($trecssql));

$trecs = $trecs['Total'];
$recspt = 1000; // Records Per Transactions 539000
$trecs = ceil($trecs/$recspt);
$startrow = 1;
$endrow = 1000;
//$trecs = 50; // Comment it to work as normal.

$start_time = microtime(true); 
```

这是批次的循环

```
for ($i=1; $i<=$trecs; $i++) { 
```

这是获取主行批次的查询

```
 $mastersql = "select `Id`, 
                         `Attribute1`, `Attribute2`, 
                         `Attribute3`, `Attribute4`, `Attribute5` 
                   from `Master` 
               where Id between ".$startrow." and ".$endrow;
    $this_mastersql = mysql_query($mastersql);
    $updatesql = ''; 
```

这是处理批处理的循环

```
 while($master_rec = mysql_fetch_assoc($this_mastersql)) { 
```

这是一个查询，它汇总了 Master 中每个项目的 Stock 内容。

```
 $searchsql = "select min(Price) minprice, 
                            avg(Price) avgprice, 
                            max(Price) maxprice, 
                            Currency from `Stock`
                      where     Name1 = '".$master_rec['Attribute1']."'
                    AND     Name2 = '".$master_rec['Attribute2']."'
                        AND     Name3 = '".$master_rec['Attribute3']."'
                        AND     Name4 = '".$master_rec['Attribute4']."'
                        AND     Name5 = '".$master_rec['Attribute5']."';";

        $this_searchsql = mysql_query($searchsql);
        $search_rec = mysql_fetch_assoc($this_searchsql); 
```

这是更新主表的查询。

```
 $updatesql .= "update `Master`
                set `MinP` = '".$search_rec['minprice']."',
                    `AvgP` = '".$search_rec['avgprice']."',
                                `MaxP` = '".$search_rec['maxprice']."',
                                `Currency` = '".$search_rec['currency']."'
                            where Id = '".$master_rec['Id']."';";
    }

    mysql_query($updatesql);

    $startrow = $endrow+1;
    $endrow = $startrow+999;
}

$end_time = microtime(true);

echo 'Updated <br /><br />';
echo "Scripts Execution time <br />";
echo "Time in Hours : Minutes : Seconds <br />"
     .gmdate("H:i:s", $time_elapsed = $end_time - $start_time);
echo "<br /> <br /> Time in Seconds ".$time_elapsed;

?> 
```

**表结构**
附上 Excel 文件中的主表示例。
**[https://docs.google.com/open?id=0B8Oew7S4GzgiQk5tbUZKdXVEUms](https://docs.google.com/open?id=0B8Oew7S4GzgiQk5tbUZKdXVEUms)**

```
CREATE TABLE IF NOT EXISTS `Attribute1` (
  `Id` int(3) NOT NULL,
  `Name` varchar(50) NOT NULL,
  PRIMARY KEY (`Id`),
  UNIQUE KEY `Name` (`Name`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `Attribute2` (
  `Id` int(10) NOT NULL,
  `Name` decimal(3,2) NOT NULL,
  PRIMARY KEY (`Id`),
  UNIQUE KEY `Name` (`Name`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `Attribute3` (
  `Id` int(3) NOT NULL,
  `Name` varchar(5) NOT NULL,
  PRIMARY KEY (`Id`),
  UNIQUE KEY `Name` (`Name`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `Attribute4` (
  `Id` int(3) NOT NULL,
  `Name` varchar(20) NOT NULL,
  PRIMARY KEY (`Id`),
  UNIQUE KEY `Name` (`Name`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `Attribute5` (
  `Id` int(3) NOT NULL,
  `Name` varchar(100) NOT NULL,
  PRIMARY KEY (`Id`),
  UNIQUE KEY `Name` (`Name`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `Master` (
  `Id` int(20) NOT NULL AUTO_INCREMENT,
  `Attribute1` varchar(50) DEFAULT NULL,
  `Attribute2` decimal(3,2) DEFAULT NULL,
  `Attribute3` varchar(5) DEFAULT NULL,
  `Attribute4` varchar(20) DEFAULT NULL,
  `Attribute5` varchar(100) DEFAULT NULL,
  `MinP` decimal(10,2) DEFAULT NULL,
  `AvgP` decimal(10,2) DEFAULT NULL,
  `MaxP` decimal(10,2) DEFAULT NULL,
  `Currency` varchar(5) DEFAULT NULL,
  PRIMARY KEY (`Id`),
  KEY `Attribute1` (`Attribute1`),
  KEY `Attribute2` (`Attribute2`),
  KEY `Attribute3` (`Attribute3`),
  KEY `Attribute4` (`Attribute4`),
  KEY `Attribute5` (`Attribute5`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

--
-- Constraints for table `Master`
--
ALTER TABLE `Master`
  ADD CONSTRAINT `Master_ibfk_1` FOREIGN KEY (`Attribute1`) REFERENCES 
      `Attribute1` (`Name`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `Master_ibfk_2` FOREIGN KEY (`Attribute2`) REFERENCES 
      `Attribute2` (`Name`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `Master_ibfk_3` FOREIGN KEY (`Attribute3`) REFERENCES 
      `Attribute3` (`Name`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `Master_ibfk_4` FOREIGN KEY (`Attribute4`) REFERENCES 
      `Attribute4` (`Name`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `Master_ibfk_5` FOREIGN KEY (`Attribute5`) REFERENCES 
      `Attribute5` (`Name`) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE  TABLE  `pmaster`.`Stock` (  
 `Id` int( 10  )  NOT  NULL  AUTO_INCREMENT ,
 `Name1` varchar( 10  )  NOT  NULL ,
 `Name2` decimal( 5, 2  )  NOT  NULL ,
 `Name3` varchar( 5  )  NOT  NULL ,
 `Name4` varchar( 5  )  NOT  NULL ,
 `Name5` varchar( 40  )  NOT  NULL ,
 `OtherFields1` varchar( 20  )  NOT  NULL ,
 `OtherFields2` varchar( 25  )  NOT  NULL ,
 `SoOn` varchar( 15  )  NOT  NULL ,
 `Price` decimal( 15, 2  )  NOT  NULL ,
 `Currency` varchar( 5  )  NOT  NULL ,
 PRIMARY  KEY (  `id`  ) ,
) ENGINE  = InnoDB  DEFAULT CHARSET  = latin1; 
```

目前，Stock 表中只有 100 条记录需要大约 140 到 150 秒，并且随着记录的增加，它需要多种时间，并且有 20K 条记录需要很长时间，还没有尝试过总共需要多少时间，但最后当脚本运行超过 3 个小时时，我不得不退出，因为 Master 表中没有一条记录被更新。

这意味着它可能只是完成的 1% 到 2%，或者可能更少。

**任何想法的朋友如何以更快的方式做到这一点。**
如果您需要这些数据库的数据，请告诉我将在此处生成和上传。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:56:13.067

您应该考虑删除 1000 条记录的批次。您应该考虑只使用一次此查询，而不是您的两个查询。此查询将为您需要在主表中执行的每个 UPDATE 生成一行。

```
SELECT m.Id, 
       min(s.Price) minprice, 
       avg(s.Price) avgprice, 
       max(s.Price) maxprice, 
       s.Currency 
  FROM Stock s
 INNER JOIN Master m
     ON (    s.Name1 = m.Attribute1
         AND s.Name2 = m.Attribute2
         AND s.Name3 = m.Attribute3
         AND s.Name4 = m.Attribute4
         AND s.Name5 = m.Attribute5)
  GROUP BY m.Id, s.Currency 
```

此查询为 Stock 表中与 Master 表中的属性匹配的每组行生成一行。

如果您在 Stock 表中的 Name 项上放置一个复合索引，在 Master 表中的 Attribute 项上放置另一个索引，则此查询应该相当有效。

# c# - 在 WebView 中显示临时数据

> ID：12018032
> 
> 赞同：1
> 
> 时间：2012-08-18T11:06:46.343
> 
> 标签：c#, webview, windows-8, microsoft-metro, windows-runtime

我正在尝试制作一个基本上采用 .zip 文件（使用`FileOpenPicker`）、提取 .zip 文件（在 的子文件夹中`Windows.Storage.ApplicationData.Current.TemporaryFolder`）并尝试读取其中一个提取的 HTML 页面的应用程序。

显然，`WebView`无法从 ApplicationData 加载任何网页：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh781215.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh781215.aspx)

`Note that, for security reasons, you cannot navigate to HTML you have downloaded to this location and you cannot run any executable or potentially executable code, such as script or CSS. It is intended for media such as images or videos and the like.`

中有一个名为[NavigateToString](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.navigatetostring.aspx)的方法`WebView`，因此我可以将 .html 文件加载到内存中并导航到它。唯一的问题是，如果网页引用图像、css 或 zip 中其他页面的链接，我就完蛋了。我不太明白为什么当你可以使用 NavigateToString 做任何你想做的事情时他们不允许这样做......无论如何......

有什么解决方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T04:46:26.260

解决方法是将所有内容（javascript、css、图像作为 base64 编码字符串）插入 html 并将其传递给 NavigateToString。根据网页的不同，它可能是可以实现的，也可能几乎是不可能的。我自己在一个应用程序中这样做，因为这是我找到的唯一方法。

# php - 了解 CodeIgniter 中的 load_class

> ID：12018033
> 
> 赞同：3
> 
> 时间：2012-08-18T11:07:01.047
> 
> 标签：php, codeigniter

我试图了解 CodeIgniter 中的框架结构，而我刚刚开始并想出了这个小误解。

所以有人可以帮我理解以下内容：-

1-为什么他们使用引用来传递类的实例......我的意思是为什么不只是一个简单的变量？

2-以及为什么该函数将类的名称存储在数组中而不是“字符串变量”中（请不要将我的 php 术语判断为我最擅长它）..？！

```
static $_classes = array();
                   ^^^^^^^ this cloud be just ("") or am i missing something 
```

这是功能，所以你不会去寻找它。

```
function &load_class($class, $directory = 'libraries', $prefix = 'CI_')
    {
        static $_classes = array();

        // Does the class exist?  If so, we're done...
        if (isset($_classes[$class]))
        {
            return $_classes[$class];
        }

        $name = FALSE;

        // Look for the class first in the local application/libraries folder
        // then in the native system/libraries folder
        foreach (array(APPPATH, BASEPATH) as $path)
        {
            if (file_exists($path.$directory.'/'.$class.'.php'))
            {
                $name = $prefix.$class;

                if (class_exists($name) === FALSE)
                {
                    require($path.$directory.'/'.$class.'.php');
                }

                break;
            }
        }

        // Is the request a class extension?  If so we load it too
        if (file_exists(APPPATH.$directory.'/'.config_item('subclass_prefix').$class.'.php'))
        {
            $name = config_item('subclass_prefix').$class;

            if (class_exists($name) === FALSE)
            {
                require(APPPATH.$directory.'/'.config_item('subclass_prefix').$class.'.php');
            }
        }

        // Did we find the class?
        if ($name === FALSE)
        {
            // Note: We use exit() rather then show_error() in order to avoid a
            // self-referencing loop with the Excptions class
            exit('Unable to locate the specified class: '.$class.'.php');
        }

        // Keep track of what we just loaded
        is_loaded($class);

        $_classes[$class] = new $name();
        return $_classes[$class];
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T11:44:59.597

关键是`static`之前的关键字`$_classes = array();`。这使得`$_classes`数组在多次调用函数之间保持它的值。基本上，他们将其用作实例化类的本地缓存。为此，字符串不起作用。

[请参阅手册中](http://www.php.net/manual/en/language.variables.scope.php#language.variables.scope.static)有关 static 关键字的更多信息。

至于返回的参考，我认为那是 php4 的包袱，直到 2.x，php4 才支持 CI。您可能会发现这篇[博文有助于](http://mjtsai.com/blog/2004/07/15/php-5-object-references/)了解从 php4 到 php5 的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-26T15:45:40.360

传递一个普通（非引用）变量“似乎”是有效的，因为每次传递它时，前一个实例都会被覆盖，最后一个或最新的实例会取而代之。所以每次你创建一个新的类实例。但这很浪费，原因有两个……

1.  它会创建一个新的实例变量，而不会取消设置前一个实例变量（尽管 PHP 最终会垃圾收集这些变量），从而避免被一些恶意代码读取并在您必须付费的宝贵服务器空间中浪费一些字节的风险为了。

2.  一个实例意味着一个状态。“输入”状态、“安全”状态、“配置”状态等等。如果您创建一个新变量，您将创建这些状态的副本。如果您随后偶然犯了任何错误，那么您在一个“输入”实例中保存的当前状态可能不会更改以反映当前或最新状态。假设另一个发生了变化；如果你在不同的场合同时使用它们，那么这可能会导致下一步的冲突和灾难。

# android - glReadPixels GL_RGBA 返回 ARGB 像素

> ID：12018034
> 
> 赞同：2
> 
> 时间：2012-08-18T11:07:14.837
> 
> 标签：android, pixels, rgba, glreadpixels, argb

在 NDK、Android 中。调用下一条指令来获取视口像素。我期望像素为 RGBA 格式，但我得到的是 ARGB 像素。有什么问题或者在 glReadPixels 之前设置了吗？

```
void getViewPortPixels(const unsigned int x, const unsigned int y, const unsigned int width, const unsigned int height, unsigned int* output)
{
    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
    glPixelStorei(GL_PACK_ALIGNMENT, 1);
    glReadPixels(x, y, width, height, GL_RGBA, GL_UNSIGNED_BYTE, (void*)output);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T06:29:48.230

不应该，您读取的帧缓冲区是默认的吗？否则，从附加到 GL_COLOR_ATTACHMENT0 连接点的彩色图像中读取颜色分量。顺便说一句，您设备的 GPU 供应商是什么？

# javascript - 无法在 IE6 和 IE7 上加载 ajax

> ID：12018037
> 
> 赞同：0
> 
> 时间：2012-08-18T11:07:41.230
> 
> 标签：javascript, ajax, internet-explorer-7, internet-explorer-6

下面的代码是一个用 JS 编写的 ajax 创建函数。

这适用于`Firefox`，`Safari`并且`Chrome`完美，但不适用于`IE6`& `IE7`。

如何修复我的代码以加载 ajax？

```
function ajaxCreateRequest() {
    var request = false;
    if(window.XMLHttpRequest) {
        request = new XMLHttpRequest;
    }
    else if(window.ActiveXObject) {
        request = new ActiveXObject("Microsoft.XMLHTTP");
    }

    if(!request)
        alert("This Browser doesn't support my page!");

    return request;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:22:31.333

虽然我在您上面发布的代码中没有预见/观察到任何明显的问题，但为什么不使用现有的 javascript 框架（它们构成了出色的 javascript 抽象），例如

1) [jQuery](http://jquery.com/)

2）[Mootools](http://mootools.net/)

3)[原型.js](http://prototypejs.org/)

如果您尝试使用上面发布的过时代码自己编写此代码，则必须在使其跨浏览器兼容的同时烧毁您的手指。

[在此处](http://api.jquery.com/jQuery.ajax/)阅读有关 jQuery AJAX 的更多信息

# c++ - 如何使用 libmicrohttpd/microhttpd 创建 HTTP POST 请求

> ID：12018038
> 
> 赞同：1
> 
> 时间：2012-08-18T11:07:46.210
> 
> 标签：c++, c

我正在使用 libmicrohttpd 库，我需要在正文中发送带有一个字符串参数的 POST 请求。谁能告诉我如何使用 libmicrohttpd 创建 POST 请求（我是 Java 人，这个 C++ 对我来说有点奇怪）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:15:56.677

libmicrohttpd 是一个开发服务器的库。创建请求由客户端完成，因此超出了 libmicrohttpd 的范围。

您可能想查看[libcurl](http://curl.haxx.se/libcurl/)的客户端功能。

# mapreduce - map reduce 用于连接数据集？

> ID：12018052
> 
> 赞同：0
> 
> 时间：2012-08-18T11:09:57.343
> 
> 标签：mapreduce

我有三种不同的解决方案，我用 document_ids 存储文档（搜索引擎、nosql 数据库和自行开发的语义索引应用程序）。

我正在针对所有不同的解决方案运行查询，并希望使用类似于 SQL JOIN 的方法来合并它们。这意味着我有时可能需要在 document_id 上加入 3 个或更多不同的数据集。

您知道 Hadoop 上的 Map Reduce 或类似的东西是否是解决此问题的最佳方法？这些数据集可以包含从 1 document_id 到 100 000 的任何地方。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:09:12.550

对于像这样的小型数据集 - 几乎任何东西都可以。特别是 - 我会推荐内存系统，因为您的所有数据都可以轻松放入内存。[GridGain](http://www.gridgain.com)就是这样一种解决方案（完全支持 In-Memory MapReduce、SQL 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:16:58.900

如果您需要在加入文档之前的文档处理期间应用大量 CPU，则 Hadoop 非常适合。在同一个作业处理文档中（在 MAP 函数中），您可以使用 shuffle 过程作为连接引擎相对容易。
同时，10 万个项目的简单连接不应该需要比普通的 RDBMS 更多的东西。

# authentication - Symfony2 中的密码过期和重置

> ID：12018054
> 
> 赞同：1
> 
> 时间：2012-08-18T11:10:12.100
> 
> 标签：authentication, symfony, passwords

我已经改变了我的`User`类来实现`AdvancedUserInterface`。现在，当我尝试登录过期帐户时，出现“凭据已过期”消息的异常。到目前为止，一切都很好。我的下一步是实现一个允许用户创建新密码的表单。此密码重置过程将在未来某个时间设置到期日期。需要在他们进入禁区之前完成。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:48:51.900

我需要[创建一个自定义 Authentication Provider](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)。

# mysql - 按日期字段排序的 mySQL 不起作用

> ID：12018062
> 
> 赞同：4
> 
> 时间：2012-08-18T11:11:16.953
> 
> 标签：mysql, sql-order-by

我正在尝试从 2 个表帖子和 postmeta 中排序数据

示例 wp_posts 表

```
ID      post_title          post_name
328   Test Event Five   test-event-five
326   Test Event Four   test-event-four
324   Test Event Three  test-event-three 
321   Test Event  Two   test-event-two 
320   Test Event One    test-event-one 
```

示例 wp_postmeta 表

```
id  post_id       meta_key                    meta_value
1    328      calendar_start-date            August 08, 2012
2    326      calendar_start-date            August 09, 2012
3    324      calendar_start-date            September 06, 2012
4    321      calendar_start-date            August 23, 2012  
5    320      calendar_start-date            September 17, 2012 
```

为了输出元值中按日期排序的数据，我使用了查询

```
SELECT wp_posts.ID, 
       wp_posts.post_title, 
       wp_posts.post_name, 
       wp_postmeta.post_id,
       wp_postmeta.meta_value as event_date 
FROM wp_posts, wp_postmeta 
WHERE wp_posts.ID = wp_postmeta.post_id 
AND wp_postmeta.meta_key = 'calendar_start-date' 
AND wp_posts.post_status = 'publish' 
AND wp_posts.post_type = 'calendar' 
ORDER BY DATE_FORMAT( event_date, '%M %d, %Y' ) DESC 
LIMIT 0 , 30 
```

但是结果不是按日期排序的，而是按日期排序的

```
ID     post_title          post_name      post_id   event_date
328  Test Event Five    test-event-five     328     August 08, 2012
326  Test Event Four    test-event-four     326     August 09, 2012
324  Test Event Three   test-event-three    324     September 06, 2012
321  Test Event  Two    test-event-two      321     August 23, 2012
320  Test Event One     test-event-one      320     September 17, 2012 
```

我在查询中哪里出错了，如何显示按 event_date 正确排序的记录。日期的输入格式为 MM dd, yy 通过 UI/Datepicker。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T11:23:29.753

该函数`DATE_FORMAT`将日期格式化为字符串。但是你想做相反的事情。为此，请使用以下功能`STR_TO_DATE`：

```
ORDER BY STR_TO_DATE(event_date, '%M %d, %Y') DESC 
```

有关MySQL 中日期函数的更多详细信息，请参阅[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date 。](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T11:23:40.397

`DATE_FORMAT`从 DATETIME 数据类型到字符串。失败时它不会抱怨，它只是返回 NULL。这就是您的查询有效的原因，即使 ORDER BY 不是。

你需要使用`STR_TO_DATE`你想要做的事情。

# image - LinkedIn 共享按钮 - 无法识别 og:image

> ID：12018064
> 
> 赞同：5
> 
> 时间：2012-08-18T11:11:42.503
> 
> 标签：image, share, linkedin

我正在尝试使用 og 标签共享页面。其中一个标签是 og:image，如以下链接所述： [https](https://developer.linkedin.com/documents/setting-display-tags-shares) ://developer.linkedin.com/documents/setting-display-tags-shares 我分享的图片是合法的。

出于某种原因，一旦我通过 LinkedIn 共享按钮共享页面，linkedin 就不会显示图像（尽管它会显示其他标签的值）。

我的 og:image 标签：

元属性="og:image" 内容="http://mywebsite.comm/difa2fz.png"

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-03T12:21:54.637

请访问[http://ogp.me/](http://ogp.me/)并应用所有强制标签。4 个标签是强制性的，其他标签是可选的。您还需要在页面的 HTML 标记中提及架构 og: [http://ogp.me/ns#](http://ogp.me/ns#)作为前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T09:40:01.370

我已经添加了所有 og:image 标签。LinkedIn 在共享时需要 3 张图片，其中一张是我指定的 og:image 和页面中的其他两张随机图片。如何限制 LinkedIn 获取我指定的同名 og:image

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-30T14:31:35.873

根据**[官方LinkedIn OG标签共享文档](https://www.linkedin.com/help/linkedin/answer/46687/making-your-website-shareable-on-linkedin?lang=en)**，以下是`og:image`...

*   最大文件大小：5 MB
*   最小图像尺寸：1200 (w) x 627 (h) 像素
*   推荐比例：1.91:1

对您的链接有疑问？您可以将您的分享 URL 提交给**[LinkedIn Post Inspector](https://www.linkedin.com/post-inspector/)**，它会分析、调试和解释您在分享 URL 中遇到的任何问题，包括`og`标签问题。

您向我们提供了您的代码，但没有提供图像，因此，您需要确保您的图像符合上述限制。此外，由于我看不到*所有代码*，因此我还要添加以下非正式要求...

*   你的`og:image`标签在`<header>...</header>`你的 HTML 块中吗？
*   你的页面有`<html>...</html>`块吗？

这是我托管的一个演示站点，LinkedIn 共享 URL 在其中工作。这纯粹是一个演示站点，它没有货币价值（其声明的目的是“排序单词”）。 [SortWords.com](http://www.sortwords.com/)，分享网址为：[https://www.linkedin.com/sharing/share-offsite/?url=http%3A%2F%2Fwww.sortwords.com](http://Share%20SortWords.com%20on%20LinkedIn)。效果很好：

[![在此处输入图像描述](../Images/11e6b92be16b9250e989a1d9ff4f7b26.png)](https://i.stack.imgur.com/AQUz4.jpg)

# perl - 使用斯坦福解析器一次解析一个句子

> ID：12018068
> 
> 赞同：0
> 
> 时间：2012-08-18T11:12:25.153
> 
> 标签：perl

我有一个包含大约 6000 个句子的文本文件，每个句子都有自己的一行。我想在 Windows 命令提示符下使用 Stanford Parser 来解析句子。但是，我需要一次向解析器发送一个句子（因为这些句子与另一个文件的句子对齐）。

我想编写一个 Perl 包装器：将输入文件中的一句话写入临时文件，将临时文件发送到解析器，解析一句话，将解析后的输出写入输出文件，然后将输出文件写入我的大输出文件 ParsedOutput.txt。

这可能是一件非常基本的事情，但我被困住了。任何帮助或指导将不胜感激。

谢谢！:)

编辑：这是我迄今为止尝试过的：

```
open (ENGDATA, "<1tot1660.txt");
open (ENGDATAOUT, ">temp.txt");
while (<ENGDATA>)
{
my $line = $_;
chomp $line;    
while ($line)
    {
    my @OneLine = $line;
    print ENGDATAOUT "$OneLine[0]\n";
    shift(@OneLine);
    }
} 
```

我在想：将每一行作为数组中的一个元素，将第 0 个元素写入临时输出文件，然后删除第一个元素（这样就不会意外再次使用它）。我基本上被整个程序卡住了，但目前：在（一次）写一行到临时输出文件时。

**编辑！**（再次......谢谢，TLP 和 amon！:)）这就是我最终所做的：

```
open (ENGDATA, "<Testing10.txt");
open (ENGDATAOUT, ">TempOut.txt");
open (PARSEDOUT, ">ParsedOutput.txt");

while (<ENGDATA>)    
{
    my $line = $_;
    chomp $line;
    my $inputfilename = $line;
    print ENGDATAOUT "$line\n";

    my $parsecommand = qx(java -mx150m -cp "*;" edu.stanford.nlp.parser.lexparser.LexicalizedParser -outputFormat "penn,typedDependencies" edu/stanford/nlp/models/lexparser/englishPCFG.ser.gz $inputfilename);

    print PARSEDOUT "$parsecommand\n";
} 
```

现在，我的输入中的每个单词都会出现此错误：

> 解析文件：上级 edu.stanford.nlp.process.DocumentPreprocessor：无法打开路径上级 解析文件：上级 [0 句]。

这是怎么回事？有谁知道，你能帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:48:18.147

只是为了它，一个shell脚本版本。

```
while read -r; do
    printf '%s\n' "$REPLY" >tmp
    parser -input tmp -output tmp2
    cat tmp2
done <input >output
rm tmp tmp2 
```

如果可以使解析器从标准输入读取并将结果写入标准输出，这可以大大简化。在 Linux上`/dev/fd/0`，`/dev/fd/1`如果它坚持使用文件名参数，则可以使用。

```
printf '%s\n' "$REPLY" |
parser -input /dev/fd/0 -output /dev/fd/1 
```

并完全取消临时文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:38:27.120

好的。您的代码似乎正在将文件复制`1tot1160.txt`到`temp.txt`，在此过程中引入了一些非常有趣的语法；-)

我会这样做：

1.  在一处声明所有文件名：

    ```
    #!/usr/bin/perl
    use strict; use warnings;
    my $BigInFile     = ...;
    my $BigOutFile    = ...;
    my $ParserInFile  = ...;
    my $ParserOutFile = ...; 
    ```

2.  打开大文件，然后开始循环输入：

    ```
    open my $BigIn,  '<', $BigInFile  or die "Cant open $BigInFile";
    open my $BigOut, '>', $BigOutFile or die "Cant open $BigOutFile";
    while (defined(my $line = <$BigIn>)) {
        print $BigOut doStanford($line);
    } 
    ```

    我们将大输入文件的每一行放入`$line`定义时（阅读：当我们没有 EOF 时）。然后我们将子例程的输出打印`doStanford`到大输出文件，假设它已经有一个结束换行符。如果没有，请随意编写代码来附加它。

3.  编写子程序`doStanford`。我们取一行，将其写入 Temp 文件，调用程序，然后读取另一个 Temp 文件并返回内容：

    ```
    sub doStanford {
        my ($line) = @_; # unpack arguments

        # open the firstfile:
        open my $StanfordIn, '>', $ParserInFile
          or die "Couldn't open $ParserInFile";
        print $StanfordIn $line; # already has newline
        close $StanfordIn;

        # do the call to the parser. I don't know the interface
        # so I assume it is "parser --in INFILE --out OUTFILE"
        my $returnValue = system("parser",
          "--in", $ParserInFile,
          "--out", $ParserOutFile);
        if ($returnValue != 0) {
            # an error occured
            die "The Parser exited with return value $?: $!.\n";
        }

        # read in the other file, and return:
        open my $StanfordOut, '<', $ParserOutFile
          or die "Couldn't open $ParserOutFile";
        my $parsed = <$StanfordOut>; # we only want the first line
        return $parsed;
        # implicit close $StanfordOut
    } 
    ```

*可能*有;-)这里有一些错别字，所以最好自己写。

`system`我为良好风格的呼吁做了一些错误处理。退出值 0 表示成功，非零退出值（尤其是 -1）表示某些错误或异常终止。

如果 Parser 可以输出到 STDOUT 而不是文件，则可以执行里面的命令`qx{}`：

```
my $parsed = qx{parser --in INFILE}; 
```

这样我们就不能进行错误处理，但我们不需要额外的文件。

在`system`调用内部，我将参数拆分为一个列表。如果我们只提供一个字符串，命令行会在每个空格处拆分它；如果我们的路径名也包含空格，则不可取。我这样做的方式，他们是安全的。

如果您可以为此使用模块，请使用该模块。它更安全，更容易。

### 编辑

*   的返回值`system`实际上并不是被调用命令的退出状态。命令成功时返回值仅为 0，错误时返回 true。退出状态是表达式的值`$? >> 8`。`$!`可能是有原因的。

# c# - Java中有类似C#Task的东西吗？

> ID：12018071
> 
> 赞同：5
> 
> 时间：2012-08-18T11:12:52.617
> 
> 标签：c#, java, concurrency

我正在努力学习 C#！编程语言之间我最熟悉Java！刚才我正在努力理解`Task`'s！`Task`Java中有类似的东西吗？

`Task`'s 和 thread有什么区别？`Task`线程不能提供什么？基本上为什么我们需要`Task`'s？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-01-01T23:49:39.190

我会说最接近的 1:1 课程是[`Future<T>`](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html)or [`CompletableFuture<T>`](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html)。`CompletableFuture`有一些额外的链接方法，类似于`Task<T>`C# 中的方法。

显然在任务并行库（C#）的早期版本中`Task<T>`被称为`Future<T>`（[http://www.nedstoyanov.com/promises-and-futures/](http://www.nedstoyanov.com/promises-and-futures/)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T11:28:23.800

Java 7 中引入的 Fork/Join 框架可能是最接近的：

[http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T11:25:47.913

任务是你想做的事情，线程是执行你的任务的事情

例如 **，为每个请求启动一个新线程的 Web 服务器**

```
 class ThreadPerTaskWebServer {
    public static void main(String[] args) throws IOException {
        ServerSocket socket = new ServerSocket(80);
        while (true) {
            final Socket connection = socket.accept();
            Runnable task = new Runnable() {
                public void run() {
                    handleRequest(connection);
                }
            };
            new Thread(task).start();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T11:22:49.447

如果您查看文档，它指出任务是进行多线程编程的首选方式：

> 更高效、更可扩展地使用系统资源。
> 
> 在幕后，任务排队到线程池，该线程池已通过算法（如爬山）进行了增强，该算法可确定并调整线程数以最大限度地提高吞吐量。这使得任务相对轻量级，您可以创建许多任务以启用细粒度并行性。为了补充这一点，采用了广为人知的工作窃取算法来提供负载平衡。
> 
> 比线程或工作项更多的编程控制。
> 
> 任务和围绕它们构建的框架提供了一组丰富的 API，支持等待、取消、继续、强大的异常处理、详细状态、自定义调度等。
> 
> [微软](http://msdn.microsoft.com/en-us/library/dd537609.aspx)

所以任务实际上是线程，但界面更简单。你也可以看看这个问题，它基本上问的问题和你一样： [SO Question](https://stackoverflow.com/questions/4117579/equivalent-of-task-parallel-library-in-java)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-13T20:12:07.633

> 任务和线程有什么区别？Task 提供了哪些线程不能做的事情？基本上，为什么我们需要任务？

线程是一种并行机制，而任务是一种同步机制。简单来说，一个线程就是一个工作者，一个任务就是一个工作单元。通常，同一个工作人员可以不并行地执行多个工作单元。它可以通过优先处理任务和管理完全由 .NET 在幕后完成的上下文来实现高效率。

这样想吧。作为开发人员，您到达工作岗位时，您有两张票要完成。一张票需要项目经理的澄清。因此，您向项目经理发送电子邮件询问更多信息。

真的不需要等待回复，您可以开始处理第二张票。您仍然是单个线程（单个工作人员），但您正在管理两个任务 - 两个工作单元。当您处理第二张工单时，产品经理会给出答案。您可以选择切换上下文并返回执行工单 1，或者您可以等到工单 2 完成后才将上下文切换回工单 1。

在另一种情况下，您可以选择一个队友并分配她的工单 2。在这种情况下，您正在实现真正的并行化，但您需要两个工作人员参与：您自己和您的同事。

在 .NET 生成中，新线程的计算成本非常高。每当长时间运行的操作受 I/O 限制（例如从 DB 读取）时，使用任务是一种很好的做法。最好将线程用于 CPU 绑定的繁重操作，例如繁重的数学计算。

```
var productsTask = GetItemtsAsync(odredId) // dispatch call to DB
var userTask = GetUserInfoAsync(userId) // dispatch another call to DB

// wait until both calls are completed, their order is irrelevant
// and it is fully managed by the runtime
Task.AwaitAll(productsTask, userTask)

// now we have enough data to generate an invoice 
// (this is all done on one thread)
var invoice = GenerateInvoice(productsTask.Result, userTask.Result) 
```

通过在单独的线程中运行 DB 调用，您将使您的代码变慢，因为您仍然无法控制 DB 调用运行多长时间，此外，您将花费时间创建新线程（这些将是非常昂贵的操作，内存方面和 CPU 周期）

注意：下面的代码完成了与上面的代码片段相同的事情，但它更优雅。[在某些情况下](https://blogs.msdn.microsoft.com/jpsanders/2017/08/28/asp-net-do-not-use-task-result-in-main-context/)`.Result`不建议使用

```
var productsTask = GetItemtsAsync(odredId) // dispatch call to DB
var userTask = GetUserInfoAsync(userId) // dispatch another call to DB

var invoice = GenerateInvoice(await productsTask, await userTask) 
```

# android - Android API < 8 他们去哪儿了？

> ID：12018073
> 
> 赞同：2
> 
> 时间：2012-08-18T11:13:21.097
> 
> 标签：android, sdk, android-api-levels

在 sdk manager 中我只能看到 API 级别 8+，如何下载低于该级别的 api。我想让我的应用程序至少与 2.1.X、2.1 和 2.0 兼容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T11:42:11.030

您的 SDK 管理器应该会向您显示 API 级别 3、4 和 7 以供下载，如果您选中“已过时”复选框，则会显示其他 API 级别。您可能需要清除缓存（工具 > 选项，然后单击“清除缓存”按钮）并重新加载（包 > 重新加载）。

请记住，当您检查过时时出现的那些是过时的，原因是：没有运行这些版本的设备。请不要浪费您的时间来“使 [您的] 应用程序与... 2.0 兼容”，因为没有运行 Android 2.0 的设备。曾经拥有 Android 2.0 的所有设备（特别是摩托罗拉 DROID 的初始生产运行）都已至少升级到 Android 2.1。

# android - Android：库项目中的Actionbar Sherlock错误

> ID：12018080
> 
> 赞同：2
> 
> 时间：2012-08-18T11:14:25.527
> 
> 标签：android, actionbarsherlock

我遵循了这些步骤并做了完全相同的事情：

[http://www.slideshare.net/androidstream/action-bar-sherlock-tutorial](http://www.slideshare.net/androidstream/action-bar-sherlock-tutorial)

但问题是`com_actionbarsherlock`它的 src 文件夹文件中有很多错误。

大多数（或不知道是否全部）错误是这样的：

```
The method onPreparePanel(int, View, Menu) of type _ActionBarSherlockTrojanHorse must override a superclass method 
```

图书馆清单有这个：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.actionbarsherlock"
    android:versionCode="90"
    android:versionName="4.1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="14" />

</manifest> 
```

项目构建目标是 API 14

我的项目清单有这个：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.sherlock"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:theme="@style/Theme.Sherlock">
        <activity
            android:name=".SherlockActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

并且项目构建目标是 API 10

这个怎么解决？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T11:31:03.263

[从本周的博客文章中](http://commonsware.com/blog/2012/08/14/about-those-override-errors.html)引用自己的话：

> 有两种方法可以解决此问题。
> 
> For an individual project, you can go into Project > Properties, choose the “Java Compiler” category on the left, and change the value in the “Compiler compliance level” drop-down. Sometimes, this will be disabled, because you are using your workspace-level setting and are not overriding it at the project level. Sometimes, though, the project might be set to override it at the project level and have it set to 1.5\. If you would prefer to not override it on a project where it is overridden, you can uncheck the “Enable Project Specific Settings” checkbox at the top of the dialog.
> 
> For your entire workspace, you can go to the Preferences window and choose Java > Compiler from the category tree on the left. Here, you will see another “Compiler compliance level” drop-down, one that controls the default for all of your projects.
> 
> 保持一致的 1.6 编译器合规级别将清除这些 @Override 投诉。

# linux - 使 virtualbox 内核模块内置，而不是模块，完成了一半

> ID：12018081
> 
> 赞同：5
> 
> 时间：2012-08-03T06:51:36.510
> 
> 标签：linux, kernel, compilation, virtualbox

我试图使 virtualbox 内核模块内置，我几乎在这里完成，但在最后一步，它停止编译，因为内核似乎将所有 vbox* 模块视为一个单一的：

```
drivers/vboxnetadp/built-in.o: In function `cleanup_module':
(.exit.text+0x0): multiple definition of `cleanup_module'
drivers/vboxdrv/built-in.o:(.exit.text+0x0): first defined here
drivers/vboxnetadp/built-in.o: In function `init_module':
(.init.text+0x0): multiple definition of `init_module'

.. suppressed output ...

make[1]: *** [drivers/built-in.o] Error 1
make: *** [drivers] Error 2 
```

有什么想法吗 ？我是这样得到的：

我将所有模块源复制到驱动程序文件夹中，编辑makefile，放入a `obj-y += vbox/`，并编辑vbox模块的所有Makefile，将obj-m更改为obj-y以使其成为内置的，非常肮脏的hack，但有效。

**编辑**

为什么需要这样做？我需要在我的机器上禁用模块加载，所以不应该存在任何模块，我已经将自己编写的所有模块都内置了，现在只剩下 vbox 的了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:03:03.943

我想说您的问题属于 Stack Overflow，因为它基本上是一个 c 编程语言问题。

您面临的问题是您尝试将两个（以前分开的）程序编译为一个。两者似乎都使用相同的功能 - 意味着在他们自己的上下文中。

我的猜测是，您必须将所有这些多次出现的`init_module`函数或其他函数重命名为单独的命名空间（如`net_init_module`and `drv_init_module`）。或者也许有一种方法可以将这些函数声明为“本地”——我用 C 编程已经有一段时间了……

# maven - Maven 错误 spring-data-neo4j-rest-2.1.0.BUILD-SNAPSHOT.jar；无法读取 zip 文件 Maven 错误

> ID：12018092
> 
> 赞同：1
> 
> 时间：2012-08-18T11:16:00.673
> 
> 标签：maven, maven-3, spring-data-neo4j

从今天早上开始，我一直面临以下 maven 构建错误，[ERROR] error reading /Users/Sur​​ya/.m2/repository/org/springframework/data/spring-data-neo4j-rest/2.1.0.BUILD-SNAPSHOT/ spring-data-neo4j-rest-2.1.0.BUILD-SNAPSHOT.jar；无法读取 zip 文件

我手动获取了 jar 文件并尝试删除完整的 maven 存储库，但仍然无法解决。直到昨天一切都很好，从早上开始就没有任何变化。

谁能给我一些关于如何解决这个问题的指示？

我正在使用以下存储库，

```
<repository>
<id>spring-maven-snapshot</id>
<name>Spring Maven Snapshot Repository</name>
<snapshots>
<enabled>true</enabled>
</snapshots>
<url>http://maven.springframework.org/snapshot</url>
</repository> 
```

当我尝试用/添加以下一个替换时，它给了我其他错误，

```
<repository>
 <id>spring-snapshot</id>
 <name>Spring Maven SNAPSHOT Repository</name>
 <url>http://repo.springsource.org/libs-snapshot</url>
</repository> 
```

其他错误：无法解决项目 org.netvogue.server:netvogue-database-api:jar:1.0-SNAPSHOT 的依赖关系：无法从/到 spring-snapshot 传输工件 org.apache.httpcomponents:httpclient:jar:4.2-beta1 （http://repo.springsource.org/libs-snapshot）：拒绝访问：[http ://repo.springsource.org/libs-snapshot/org/apache/httpcomponents/httpclient/4.2-beta1/httpclient-4.2- beta1.jar](http://repo.springsource.org/libs-snapshot/org/apache/httpcomponents/httpclient/4.2-beta1/httpclient-4.2-beta1.jar) -> [帮助 1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:36:45.153

尝试这个 ：

<dependency>
<groupId>org.springframework.data</groupId>
<artifactId>spring-data-neo4j</artifactId>
<version>2.1.0.RC1</version>
</dependency>

# git - Git 不会让我切换分支，因为“对以下文件的更改将被覆盖”，但是，git-status 显示没有更改

> ID：12018098
> 
> 赞同：4
> 
> 时间：2012-08-18T11:17:13.340
> 
> 标签：git, version-control, merge, git-tower

好的，所以我有以下分支：

```
git branch
  2012-08-06-AAH
  2012-08-06-JWH
  2012-08-06-Master
* master 
```

我想结帐到`2012-08-06-AAH`。所以我这样做：

```
git checkout 2012-08-06-JWH
error: Your local changes to the following files would be overwritten by checkout:
    MyProject/canada/rocky_mountaineer/best/coast_to_coast_rail/index.html
    MyProject/europe/train_tours/scenic_europe/index.html
    MyProject/europe/train_tours/springtime_alps/index.html
    MyProject/europe/train_tours/week_in_spain/index.html
    MyProject/europe/train_tours/windmills_vineyards_paris/index.html
    MyProject/europe/train_tours/wonderful_france/index.html
    MyProject/europe/train_tours/wonders_st_petersburg_moscow/index.html
Please, commit your changes or stash them before you can switch branches.
Aborting 
```

好，可以。所以我这样做：

```
git status
# On branch master
nothing to commit (working directory clean) 
```

嗯...那么，如果没有要提交的内容，我该如何“提交您的更改或存储它们”？

感谢您的帮助 - 我是一个 Git 新手（主要使用 Tower，GUI 客户端），当我失败时，我求助于命令行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T07:54:15.593

如果您*确定*没有对这些文件进行任何本地修改，您可以尝试

```
git checkout -- . 
```

这会将工作树重置为 HEAD，并且应该允许结帐继续进行。

# asp.net - ASP.NET - 当用户在字段中键入文本时动态显示匹配项

> ID：12018100
> 
> 赞同：1
> 
> 时间：2012-08-18T11:17:57.873
> 
> 标签：asp.net, autocomplete, textbox

当用户在字段中键入文本时，我想显示数据库中的名称匹配列表。

在`WinForms`我只是设置了底层的过滤器`datasource`。

如何在`ASP.NET`不刷新网页的情况下使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:23:42.917

您可以查看[Jquery UI AutoComplete](http://jqueryui.com/demos/autocomplete/)。就检索数据而言，最好使用ajax。如果您还没有服务，您可以简单地在您的页面上创建一个页面方法。

```
[WebMethod]
public static string GetResults()
{
    return "something";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:23:01.973

**[Ajax 自动完成](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)**

试试这个`ASP.NET Ajax control`。

它完全符合您的要求。

您必须下载 Ajax Toolkit。

**[下载链接](http://ajaxcontroltoolkit.codeplex.com/)**。

按照步骤使用控件。

您将必须编写一个`Web Service`将从数据库中检索匹配项的代码。

# c++ - 没有任何功能的 C++ 多态类是可能的吗？

> ID：12018102
> 
> 赞同：5
> 
> 时间：2012-08-18T11:18:53.933
> 
> 标签：c++, polymorphism

我正在尝试创建一些仅包含数据成员（无函数）的类，但我希望它们是多态的 - 我的意思是我将通过指向基类的指针传递对象，并且我需要能够`dynamic_cast`它们到特定的派生类型（`NULL`如果实例不是给定类型，则结果值为。）

例如，我有一个项目：

```
struct Item {
    int x, y;
} 
```

我还有一个可以移动的项目，以及另一个包含文本的项目：

```
struct MovingItem: virtual public Item {
    int speedX, speedY;
}

struct TextItem: virtual public Item {
    std::string text;
} 
```

大概我必须使用上面的虚拟继承，因为我还想要一个可以移动并具有文本的项目，但我只想要来自顶层的一组坐标`Item`：

```
struct MovingTextItem: virtual public MovingItem, virtual public TextItem {
} 
```

这些都可以正确定义，但是当我尝试查看它`dynamic_cast`是`Item *`什么类型时，我的编译器抱怨源类型不是多态的。

```
void example(Item *i) {
    MovingTextItem *mti = dynamic_cast<MovingTextItem *>(i);  // error!
} 
```

如果我使用虚函数而不是数据成员重新实现整个事情，这将起作用，但这似乎是一种浪费，因为我不需要覆盖任何东西。

我能想到的唯一解决方法是向`type`基类添加一个成员`Item`，并检查它而不是 using `dynamic_cast`，如果它的类型正确，则使用它`static_cast`。（缺点是我必须知道某处的所有对象类型，因此分配的`type`值不会冲突。）

这是最好的解决方案，还是有其他方法？

## 澄清

为了参数，假设我正在将每个对象类型写入文件。 `MovingItem`转到一个文件，`TextItem`转到另一个文件，然后`MovingTextItem`转到两个文件。所以拥有一个实现*每个*接口的基类是行不通的，除非我能以某种方式告诉哪些接口正在使用，以便将它们写入正确的文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T11:22:53.660

如果您添加一个虚函数，这些类将获得一个 vtable 以便`dynamic_cast`工作。一个无操作的虚拟析构函数就可以了。（正如 Torsten 指出的那样，这在您的情况下甚至可能是必要的，因为您有非 POD 成员。）

然而，根据我自己的经验（多年来我一直在抵制这种做法！）我**强烈**建议在这种特殊情况下不要继承。请改用聚合。[更喜欢组合而不是继承？](https://stackoverflow.com/q/49002/946850)您可能必须创建几个转发器，但由此获得的灵活性是值得的（就能够在不影响整个系统的情况下稍后更改实现而言）。

考虑一个*具有*速度*的*项目，此外还有一个文本*和*一个位置，而不是*一个*以某种方式具有速度和文本并通过某种魔法继承位置的项目。如果您以后想要一个有速度但位置未知的项目怎么办？

要在聚合方案中实现您的结果，请定义构成与特定功能相关的合同的“接口”。也不需要虚拟继承：“接口”只是具有纯虚函数的类。另请参阅：[“编程到接口”是什么意思？](https://stackoverflow.com/q/383947/946850)（如果你想要可维护的软件，另一个重要的规则。）

## 例子

您可以定义四个“接口”（仅具有纯虚函数的类）：`Position`、`Speed`和. 从前三个继承而来，并且本身没有定义任何函数。您为前三个接口提供“参考实现”。“参考 impl。” for具有三个数据成员（前三个接口的 ref. impl.）并转发到这些实现。现在，您可以在任何需要有位置的东西的地方使用，而不必知道它到底是什么。也有效。`Text``Item``Item``Item``Position``dynamic_cast`

您还可以定义一个`ItemBase`没有虚拟方法的接口`Position`，`Speed`并`Text`从该接口继承。这将允许您通过相同的基本类型访问所有功能并动态测试子接口的可用性。我认为仍然不需要`virtual`继承...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T11:25:48.243

您可以甚至应该将虚拟析构函数添加到您的基类中。然后可以使用dynamic_cast。您还可以查看访问者模式。如果您有一组很小且很少更改的数据类型，并且对该数据类型有更丰富的操作集，那么该模式可能非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T04:02:14.353

假设你可以做到这一点。你有`MovingItem`一个速度。你有`TextItem`一个字符串。你甚至可能会拥有一个字符串和速度，它使用来自and`MovingTextItem`的多个虚拟继承。`MovingItem``TextItem`

你把所有这些都放在一个`std::vector<Item*>`. 好的。

你怎么用它？

是否*每段*代码都`Item*`需要使用`dynamic_cast`它需要的实际类型（如果它不是正确的类型则退出）？或者这些函数的调用者会做`dynamic_cast`吗？无论哪种方式，仅使用这些值就需要*很多*。`dynamic_cast`

但那是次要的。真正的问题是：如何*删除*它们？

看，除非`Item`有一个`virtual` *析构函数*，否则调用`delete`any`Item*`将是非常糟糕的。如果没有虚拟析构函数，C++ 就无法调用任何*派生*类的析构函数。因此，您需要以某种方式获取任何项目的*实际类型。*`Item*`

这将需要大量的`dynamic_cast`操作。每次添加新的派生`Item`类时，都需要`dynamic_cast`在列表中添加另一个检查。

或者你可以只给出`Item`一个虚拟析构函数，让 C++ 完成它的工作。这样，您不需要一系列`dynamic_cast`s 就可以找到实际的对象类型来删除它。更好的是，因为它有一个虚拟析构函数，`Item`它将是一个虚拟类型，C++ 会让你做所有`dynamic_cast`你想做的事情。

诚然，您使用`dynamic_cast`这么多的事实是一个直接的危险信号，表明您的设计迫切需要修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T01:52:13.873

只是为了记录，我最终重新设计了这个，以便有一个单一的`Item`类型，带有标志来指示哪些字段是有效的：

```
enum ItemType {HasSpeed = 1, HasText = 2};
struct Item {
    int type;
    int x, y;

    int speedX, speedY;
    std::string text;
} 
```

然后我只设置`type = HasSpeed | HasText`速度和文本字段是否有效。也许有点老派，但它*更*简单！

# javascript - 使用 javascript 写入主机上的文本文件

> ID：12018108
> 
> 赞同：0
> 
> 时间：2012-08-18T11:20:25.990
> 
> 标签：javascript, file, statistics, text-files

我很好奇是否可以使用 javascript 而**没有 jQuery**直接将数据写入网络服务器上的文件。

例如，如果我的服务器上有一个名为*stats.txt*的文件，如果用户单击给定链接，我想在其中写入数据。

我环顾四周，但几乎没有关于在服务器上写入数据的信息。

你看，我不希望我的用户将统计文件保存到他们的计算机上，因为这对于跟踪站点统计信息毫无用处。

另外，如果有不同的方法来跟踪统计数据，我想知道，**没有 jQuery 。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:22:42.787

> 我很好奇是否可以使用 javascript 而不使用 jQuery 将数据直接写入 Web 服务器上的文件。

幸运的是，在 javascript 和 jQuery 中都没有这样的方法。这将是一个巨大的安全威胁。但是您可以使用服务器端脚本（PHP、ASP.NET、Java Servlets，...），该脚本将写入文件，然后向该脚本发送 AJAX 请求。

# java - 最短的java代码

> ID：12018109
> 
> 赞同：-6
> 
> 时间：2012-08-18T11:20:30.493
> 
> 标签：java, short

```
import java.util.*;
public class SoSanh {
public static void main(String[] args) {
    Scanner input = new Scanner(System.in);
    int a = input.nextInt();
    int b = input.nextInt();
    if( a > b ) System.out.print("1");
    else if ( a < b ) System.out.print("-1");
    else System.out.print(0);               
}
} 
```

我怎样才能使它尽可能小。它必须像 1-2 行代码（不包括导入、公共类和主要方法）

这不是家庭作业，我通过互联网上的书籍和作业来学习 Java。我只是想知道它是否可以变得更短。这与速度无关，你们误会了。

对不起，我的英语很差。

p / s：现在我不能问任何问题:(我只面临1个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T11:24:01.147

*几乎*正确：

```
System.out.println((int)Math.signum(input.nextInt() - input.nextInt()); 
```

“*几乎*”是由于可能的整数过低。此外，您的较长代码实际上可能更快（[`signum()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#signum%28double%29)浮点数操作），更不用说更具可读性了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T11:36:57.537

这是没有整数溢出问题的 Tomasz 代码版本：

```
System.out.println((int)Math.signum((double) input.nextInt() - (double) input.nextInt()); 
```

但是，是的，这太可怕了。

关注可读性，*而不是*“尽可能短的行数”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T11:26:13.620

您可以使用以下事实`Integer`：`Comparable`

```
Scanner input = new Scanner(System.in);
System.out.println(((Integer)input.nextInt()).compareTo(input.nextInt())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T11:25:12.020

2行有效：

```
Scanner input = new Scanner(System.in);
System.out.println(new Integer(input.nextInt()).compareTo(new Integer(input.nextInt()))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T11:26:12.600

```
public static void main(String[] args) {
    Scanner input = new Scanner(System.in);
    System.out.println(Math.signum(input.nextInt() - input.nextInt()));
} 
```

# tridion - 使用核心服务获取出版物的所有文件夹

> ID：12018111
> 
> 赞同：-4
> 
> 时间：2012-08-18T11:20:49.517
> 
> 标签：tridion, tridion-2011

使用 Tridion 核心服务，我们如何获取特定出版物的现有文件夹。我正在使用 SessionAwareCoreService2010Client 类来创建文件夹，但无法在上述类中找到核心服务中的正确方法来获取所有现有文件夹的列表。请用示例代码回答。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-18T12:02:41.663

我更愿意给你一些思考的东西，而不是一些让你完成工作的示例代码（给男人一条鱼等等）。

首先 - 您说您`SessionAwareCoreService2010Client`希望使用的是因为您使用的是 Tridion 2011 GA 而不是 SP1。否则我当然会推荐使用[预编译](https://stackoverflow.com/questions/12001905/precompiled-core-service-client-versus-generating-your-own-proxy)的客户端和`SessionAwareCoreServiceClient`.

现在你说你想要所有文件夹。您想要一次调用中的所有文件夹，还是想要递归地“遍历”层次结构？

所有组织项目都支持 GetList 调用。对于 CoreService，这是通过`client.GetListXml(subjectId, subjectRelatedFilter)`调用来实现的。如果您只想要文件夹，那么您将首先创建一个`OrganizationalItemItemsFilterData`对象，并指定您只需要数组中的类型对象`Folder`（`filter.ItemTypes`沿着`filter.ItemTypes = new[]{ItemType.Folder};`

现在您可以实现一个方法，该方法将为 client.GetList 调用返回的每个对象递归调用自身，并从对象中读取您需要的任何属性。

如果您*真的*需要示例代码，那么我建议您[使用谷歌搜索它。](https://www.google.com/search?q=tridion%20core%20service%20get%20list%20of%20objects)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-18T14:07:17.373

我目前无法测试它，但它会是这样的：

```
var rootFolderUri = "tcm:1-1-2";
var filter = new OrganizationalItemItemsFilterData();
filter.ItemTypes = new[] { ItemType.Folder };
filter.Recursive = true;

var listXml = client.GetListXml(rootFolderUri, filter);

foreach (var itemElement in listXml.Descendants())
{
    ...
} 
```

# qt - 在 Qt 应用程序中提供 WebSockets 服务器

> ID：12018114
> 
> 赞同：2
> 
> 时间：2012-08-18T11:21:34.833
> 
> 标签：qt, websocket, qtcpserver

我`QTcpServer`在端口 1024 上创建了一个。我想使用 URL 从 websocket 连接到它`ws://localhost:1024`，但它没有连接。我们不能将 websocket 连接到常规 TCP 服务器套接字吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T07:26:33.090

Websocket 不是*纯 TCP*套接字。在后台，他们使用了基于顶级 HTTP 的自定义协议。所以分层看起来像这样`IP > TCP > HTTP > WebSocket`：

因此，要在 Qt 中提供 websocket 服务器，您需要实现 websocket 协议。查看[QtWebsocket](https://github.com/ant-lafarge/QtWebsocket)以了解该实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T09:59:49.227

As Ihor indicated, a WebSocket starts with an HTTP request, which is then upgraded to a WebSocket. You can have a look at [QtWebSockets](http://qt-project.org/wiki/QtWebSockets). It is part of the Qt playground, and can be used both for client and server implementations.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T05:10:53.060

略显虚伪的信息。它们不是“建立在”HTTP 之上的，WebSocket 更接近 TCP 层。但是，它们需要通过 HTTP 请求与升级服务器握手。

链接到 RFC - [https://www.rfc-editor.org/rfc/rfc6455#section-1.7](https://www.rfc-editor.org/rfc/rfc6455#section-1.7)

# macros - 是否可以编写一个返回类型取决于参数的 scala 宏？

> ID：12018117
> 
> 赞同：1
> 
> 时间：2012-08-18T11:21:44.497
> 
> 标签：macros, scala-2.10, scala-macros

对于 DSL，我希望能够执行以下操作：

```
object Creator { 
   def create[T](s :String) :Foo[T] = macro createImpl[T]
   def createImpl[T](c :Context)(s :c.Expr[String]) : c.Expr[Foo[T]] = {
        reify(new Foo[Any]())
   }
 } 
```

我的问题是将`Any`in reify 替换为将返回正确参数化版本的内容。

（上面我使用了一个字符串参数，但在最终版本中，我计划使用类 T 的伴随对象作为标记来了解 Function1[T,Unit] 的参数类型）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:00:09.343

您需要：a）编写`new Foo[T]()`而不是（简单）b）通过使用上下文绑定声明参数来`new Foo[Any]()`在宏中传递 type 的表示`T`，即 type 的值： 。`AbsTypeTag[T]``T``[T: c.AbsTypeTag]`

这是我在 Scala 2.10.0-M7 中测试的代码。**编辑**. 在 2.10.0-RC1`AbsTypeTag`中已重命名为`WeakTypeTag`. 关于宏和类型标签的其他一切都保持不变。

Creator.scala：

```
import language.experimental.macros
import reflect.macros.Context
class Foo[T]
object Creator {
  def create[T](s: String): Foo[T] = macro createImpl[T]
  def createImpl[T: c.AbsTypeTag](c: Context)(s: c.Expr[String]): c.Expr[Foo[T]] = {
    import c.universe._
    reify(new Foo[T]())
  }
} 
```

MacroClient.scala：

```
object Main extends App {
  println (Creator.create[Int](""))
} 
```

请注意，如果您省略类型参数，您会得到一个奇怪的错误：

```
scala> Creator.create[Int]("")
res2: Foo[Int] = Foo@4888884e

scala> Creator.create("")
<console>:12: error: macro has not been expanded
              Creator.create("")
                      ^ 
```

你还写：

> （上面我使用了一个字符串参数，但在最终版本中，我计划使用类 T 的伴随对象作为标记来了解 Function1[T,Unit] 的参数类型）

但如果我做对了，这听起来是个坏主意。调用语法不是写`Creator.create[T](otherArgs)`，而是类似于`Creator.create(T, otherArgs)`，而不是一个很大的优势（如果有的话）。但是你甚至不能得到后一种语法：如果`class A`和`object A`是伴侣，它们的类型是不相关的：第一个有 type `A`，第二个有 type`A.type`其中`A`是伴侣对象而不是 class 的类型`A`。

* * *

**更新**：如果您可以控制，如何使`Creator create Foo`语法正常工作并返回. 由于您询问 的类型参数，我假设您询问的是类型参数。**仅当您希望静态**返回类型为 be而不是时，这才有意义；否则，您应该澄清您的问题。`Foo``Foo``Any``reify`**`Creator.create``T``Any`**

 **这里的问题与宏无关。`Creator create Foo`将对象传递`Foo`给`Creator.create`，其声明需要通过类型表达式来表达，给定`Foo.type`，`Foo`类型。Scala 中的类型表达式非常有限——例如​​，它们不能使用反射。但是给定一个类型，他们可以选择它的类型成员。

```
trait Companion[Class]
//How to declare a companion
class Foo
object Foo extends Companion[Foo]
/*I'm cheating: an implementation of Companion does not need to be a true Companion. You can add documentation to explain how Companion is supposed to be used. */
object Bar extends Companion[Foo]
//But this is also useful - you can't create your own companion objects for pre-existing types, but you can still create the right instances of Companion:
object pInt extends Companion[Int]
object Creator {
  //T with Companion[S] is needed to workaround a type inference bug (SI-5298) and allow S to be correctly inferred.
  def create[S, T <: Companion[S]](obj: T with Companion[S]): S = ???
} 
```

这是有限的，因为您需要更改伴随对象，但我很确定您不能做得更好。我不知道，**在一个类型表达式**`S`中（在声明 的返回类型时你可以用它来代替`create`）从一个伴随对象到它的关联类类型，我不认为有一个。

现在，将上面的内容更改为使用宏很简单：

```
import language.experimental.macros
import reflect.macros.Context
class Foo[T]
object Creator {
  //T with Companion[S] is needed to workaround a type inference bug (SI-5298) and allow S to be correctly inferred.
  def create[S, T <: Companion[S]](obj: T with Companion[S]): Foo[S] = macro createImpl[S, T]
  def createImpl[S: c.AbsTypeTag, T <: Companion[S]: c.AbsTypeTag](c: Context)(obj: c.Expr[T with Companion[S]]): c.Expr[Foo[S]] = {
    import c.universe._
    reify(new Foo[S]())
  }
} 
```**

# javascript - 客户支持字幕滚动

> ID：12018118
> 
> 赞同：1
> 
> 时间：2012-08-18T11:22:12.313
> 
> 标签：javascript, jquery, css, html

我如何在我的 div 块中汇总客户的支持想法/评论部分，而不是使用选取框？

```
<div></div> 
```

我不知道该怎么办，请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:34:21.350

[好吧， http](http://www.htmlmarquee.com/javascript.html) ://www.htmlmarquee.com/javascript.html 上有 mutch 的例子， 而且这个页面不适合解释。

希望这会有所帮助（获得一些想法）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T14:44:58.427

1.  在 HTMl 中使用“marquee”标签。如果此文本很简单
2.  在 Jquery 中使用 simpleScroll 插件。Marqueee 对于复杂的 innerHTML 并不平滑。`http://logicbox.net/jquery/simplyscroll/`
    这个插件将使滚动顺畅

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:16:46.300

你可以这样写：

```
<style>
.parent { overflow: hidden; }
.child { position: parent; x: 0px; }
<style>
<div class=parent>
 <div class=child>
 </div>
</div> 
```

并使用 javascript 或 css3 动画来更改属性 x。

例如在这个页面上使用了 css3 动画： [http://letnyayashkola.org](http://letnyayashkola.org) http://letnyayashkola.org/static/slideshow.css

# c++ - 在 Qt 中从一种形式导航到另一种形式

> ID：12018126
> 
> 赞同：1
> 
> 时间：2012-08-18T11:23:11.913
> 
> 标签：c++, qt, qt4, nokia

我是 Qt 开发的新手，并且了解 C++。我在 Qt 中创建了一些示例，但都是单一形式的示例。

现在我想创建这样的应用程序，它有多个表单，所以我想知道：

*1.**如何从一种形式导航到另一种形式**。*

*2.**如何将数据从一个Form传递到另一个Form** ...*

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:03:26.740

对于模态对话框，您只需在堆栈上创建对话框的新实例。将数据传递到此对话框的一种方法是使用构造函数参数：

```
MyDialog dlg(param1,param2,param3);
if (dlg.exec())
{
    // ... process data from the dlg ...
    // call whatever public methods on the dialog while it still exists
    // e.g.
    myvar = dlg.getReturnValue();
} 
```

对于模态对话框，您可以使用它`setResult`来确定用户是接受还是拒绝了该对话框。这是在上面的 if 语句中查询的。

无模式对话框可能应该在更广泛的范围内创建（甚至可能是全局的或使用动态创建）

```
if (! modelessDlg)
{
    modelessDlg = new MyModelessDlg(param1,param2);
}

modelessDlg->show(); 
```

# jquery - CSS 悬停结果

> ID：12018133
> 
> 赞同：0
> 
> 时间：2012-08-18T11:23:48.193
> 
> 标签：jquery, html, css

[网页](http://home.scarlet.be/makhout/CarsDeluxe/wagens.html)

**问题 #1**
将鼠标悬停在“汽车菜单”上时，它会逐渐变黑。我用 jQuery 做到了这一点。

*   是否可以使用 CSS(3) 实现相同的效果？
*   是否可以更改褪色颜色（使用或不使用 jQuery）？

**问题 #2**
点击“汽车菜单”时，您将获得汽车图像的缩略图和一些信息。将鼠标悬停在缩略图上时，您将看到更大格式的图像。但是只有第一张左上图悬停得很好，但其余的都被剪掉了，它的位置很偏离。

对我来说，这是我似乎无法解决的最大问题。我检查了我的 CSS 代码，一切对我来说都很好。我已经尝试了一些，但没有成功。

**HTML 代码**

```
 <div class="car1">

                    <h1>Audi A6</h1>
                    <div class="specs">
                        <table>
                            <tr>
                                <td>Merk:</td>
                                <td>Audi </td>
                            </tr>
                            <tr>
                                <td>Model:</td>
                                <td>A6 avant</td>
                            </tr>
                            <tr>
                                <td>Bouwjaar:</td>
                                <td>2009</td>
                            </tr>
                            <tr>
                                <td>Uitvoering:</td>
                                <td>Diesel</td>
                            </tr>
                        </table>

                        <div>

                        </div>
                    </div>
                    <!-- ID patroon van Thumbnaal c(ars) X(hoeveelste wagen nummer) Y(hoeveelste thumbnail nummer)-->
                    <div class="pics">
                         <a class="thumbnail" href="#thumb"> 
                            <img class="thumb" src="Cars/audi/1.jpg" alt="Voorkant Audi A6" /> 
                            <span>
                                <img class="large" src="Cars/audi/1.jpg" alt="Voorkant Audi A6" />
                            </span>
                         </a>

                         <a class="thumbnail" href="#thumb"> 
                            <img  src="Cars/audi/2.jpg" alt="Achterkant Audi A6"  class="thumb"/> 
                            <span>
                                <img class="large" src="Cars/audi/2.jpg" alt="Achterkant Audi A6" />
                        </span>
                        </a>

                         <a class="thumbnail" href="#thumb"> 
                            <img  src="Cars/audi/3.jpg" alt="Rijdende Audi A6"  class="thumb"/> 
                            <span>
                                <img class="large" src="Cars/audi/3.jpg" alt="Voorkant Audi A6" />
                            </span>
                        </a>

                         <a class="thumbnail" href="#thumb"> 
                            <img  src="Cars/audi/4.jpg" alt="Audi A6 geparkeerd"  class="thumb"/> 
                            <span>
                                <img class="large" src="Cars/audi/4.jpg" alt="Audi A6 geparkeerd" />
                            </span>
                        </a>

                        <a class="thumbnail" href="#thumb"> 
                            <img  src="Cars/audi/5.jpg" alt="Zijkant Audi A6"  class="thumb"/> 
                            <span>
                                <img class="large" src="Cars/audi/5.jpg" alt="Zijkant Audi A6" />
                            </span>
                        </a>

                        <!--  <img class="thumbnail" src="Cars/audi/2.jpg" alt="Achterkant Audi A6">
                            <img class="large" src="Cars/audi/2.jpg" alt="Achterkant Audi A6">
                          <img class="thumbnail" src="Cars/audi/3.jpg" alt="Rijdende Audi A6">
                            <img class="large" src="Cars/audi/3.jpg" alt="Rijdende Audi A6">
                          <img class="thumbnail" src="Cars/audi/4.jpg" alt="Audi A6 geparkeerd">
                            <img class="large" src="Cars/audi/4.jpg" alt="Audi A6 geparkeerd">
                          <img class="thumbnail" src="Cars/audi/5.jpg" alt="Zijkant Audi A6">
                            <img class="large" src="Cars/audi/5.jpg" alt="Zijkant Audi A6">-->

                    </div>

        </div> 
```

**CSS 代码**

```
.thumbnail{
    /*width:10em;   
    height:7em;
    margin:1%;*/
    z-index:0;
    position:relative;
}

.thumbnail:hover{
background-color: transparent;
z-index: 50;
}

.thumbnail span{ /*CSS for enlarged image*/
position: absolute;
left: -1000px;
visibility:hidden;
overflow:visible;
text-decoration: none;

}

.thumbnail span img{ /*CSS for enlarged image*/
border-width: 0;
padding: 2px;
overflow:visible;
}

.thumbnail:hover span{ /*CSS for enlarged image on hover*/
visibility:visible;
top: 100%;
left:1%; /*position where enlarged image should offset horizontally */
overflow:visible;

}

.large{
    width: 45em;    
}

.thumb{

    width:40%;
}

.thumb:hover{
    border:1px white solid; 
} 
```

如果还需要什么，请问我，我会提供所需的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:31:32.047

1) 是的，使用 css3 转换 (http://css3.bradshawenterprises.com/transitions/) 和 opacity 属性

```
.car{
   -webkit-transition: all 1s ease-in-out;
-moz-transition: all 1s ease-in-out;
-o-transition: all 1s ease-in-out;
transition: all 1s ease-in-out;
}
.car:hover{
   opacity:0.7;
} 
```

# android - android - 从资产中获取可绘制时内存不足异常

> ID：12018136
> 
> 赞同：0
> 
> 时间：2012-08-18T11:24:17.413
> 
> 标签：android, image, out-of-memory

在我的 android 项目中，有带有图像的自定义网格视图。图片来自资产文件夹。

这是从资产文件夹获取可绘制的代码：

```
Drawable imgDrawable = Drawable.createFromStream(myContext.getAssets().open(imgPath),null); 
```

滚动网格视图后，它给出内存异常日志显示：

```
01-10 05:24:32.492: E/AndroidRuntime(2303): FATAL EXCEPTION: main
01-10 05:24:32.492: E/AndroidRuntime(2303): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.graphics.drawable.Drawable.createFromStream(Drawable.java:657)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at org.Infoware.BookShelf.BookShelfActivity$BookshelfAdapter.getView(BookShelfActivity.java:331)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.widget.AbsListView.obtainView(AbsListView.java:1439)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.widget.GridView.makeAndAddView(GridView.java:1222)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.widget.GridView.makeRow(GridView.java:268)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.widget.GridView.fillDown(GridView.java:221)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.widget.GridView.fillGap(GridView.java:188)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.widget.AbsListView.trackMotionScroll(AbsListView.java:3569)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.widget.AbsListView$FlingRunnable.run(AbsListView.java:3067)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.os.Handler.handleCallback(Handler.java:587)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.os.Looper.loop(Looper.java:130)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at android.app.ActivityThread.main(ActivityThread.java:3683)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at java.lang.reflect.Method.invokeNative(Native Method)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at java.lang.reflect.Method.invoke(Method.java:507)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:850)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:608)
01-10 05:24:32.492: E/AndroidRuntime(2303):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:27:41.650

以我的经验，这通常是因为您在其他地方有内存泄漏，然后您的应用程序可能会在任何地方发牢骚，但最有可能在位图操作期间耗尽内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-24T22:44:31.407

我遇到了同样的问题。然后我决定尝试使用 Bitmaps 而不是 Drawables，我不再收到 OutOfMemoryException 了。

这消耗更少的内存：

```
view.setImageBitmap( BitmapFactory.decodeFile( filename ) ); 
```

比

```
view.setImageDrawable( Drawable.createFromPath( filename ) ); 
```

# wordpress - wordpress 按自定义字段排序帖子

> ID：12018140
> 
> 赞同：0
> 
> 时间：2012-08-18T11:24:42.817
> 
> 标签：wordpress, wordpress-theming, custom-fields

我有想要按自定义字段排序的帖子...我正在为我的自定义字段使用高级自定义字段插件。这是我的代码...请帮我修改它，以便帖子将按 start_day 自定义字段排序...

```
 $today = date('Y-m-d');
    $cat = get_term_by('name', 'events', 'category');
    $args = array('cat' => $cat->term_id, 'posts_per_page' => -1, 'meta_query' => array(
        array(
            'key' => 'end_date',
            'value' => $today,
            'type' => 'DATE',
            'compare' => '>=',
            'meta_key' => '_date',
            "orderby" => "start_date",
            "order" => "ASC"
        )));

    $posts = get_posts($args);

    foreach($posts as $post) {
        setup_postdata($post);

        if((date("j", strtotime(get_field('start_date')))+1 || date("j", strtotime(get_field('start_date')))) !=date("j", strtotime(get_field('end_date')))){
        $data_info = date("F", strtotime(get_field('end_date')))." ".date("d", strtotime(get_field('start_date')))."-".
            date("d", strtotime(get_field('end_date')));
        }else{
            $data_info = date("F", strtotime(get_field('end_date')))." ".date("d", strtotime(get_field('start_date')));
        }
        ?><div class="fEventFront">
        <?php
        if (has_post_thumbnail($post->ID)):
        $thumbnail = wp_get_attachment_image_src ( get_post_thumbnail_id($post->ID), array(55,55));
        $full = wp_get_attachment_image_src ( get_post_thumbnail_id($post->ID), 'Large');
        ?>

        <div class="fEventFrontThumb">
            <img width="55" src="<?php echo $thumbnail[0];?>" alt=""/>
        </div>
        <?php endif; ?>
        <div class="fEventFrontText">
            <div class="fEventFrontTitle"><span class="date_info"><?php echo $data_info?> </span><?php the_title() ?></div>
            <div class="fEventFrontDescription"><?php the_field('short_description') ?></div>
        </div>
    </div><?php
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:16:14.990

您已经获得`meta_key`了参数之一，所以现在您只需要将 orderby 参数更改为；

```
'orderby' => 'meta_value' 
```

[Wordpress WP_Query orderby 选项](http://codex.wordpress.org/Function_Reference/WP_Query#Order_.26_Orderby_Parameters)

但是，这会很复杂，因为您有一个日期作为您的自定义字段（至少我认为您有，您在问题中将它称为 start_day 和 start_date）。

根据您的操作方式，您可能必须首先将该日期转换为数字格式并使用它进行排序；

```
'orderby' => 'meta_value_num' 
```

# php - Yii 访问权限模块时出错

> ID：12018142
> 
> 赞同：1
> 
> 时间：2012-08-18T11:25:11.527
> 
> 标签：php, yii, yii-extensions

访问权限模块时出现以下错误，

```
 array_map() [<a href='function.array-map'>function.array-map</a>]: Argument #2 should be an array 
```

我通过在 main.php 文件中添加正确的配置设置启用了权限模块

请有人帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:38:39.067

听起来好像您的权利在控制器中没有正确定义。

因此，当函数通过通常在控制器上允许的位置之后`[1]`（`actions`因为`expression`，`roles`并且`message`所有进入不同的条件，如您所见）时，它是否在那里找不到数组。

如果没有看到您的代码，我无法更具体地了解实际发生的情况，但我怀疑您可能已经尝试过：

```
public function accessRules()
{
    return array(
        array('allow',
            'actions'=>'*',
            'users'=>array('?'),
        ),
    );
} 
```

事实上，我认为它应该是：

```
public function accessRules()
{
    return array(
        array('allow',
            'actions'=>array('*'),
            'users'=>array('?'),
        ),
    );
} 
```

希望能帮助到你，

# ide - 在浏览器中实时预览

> ID：12018146
> 
> 赞同：6
> 
> 时间：2012-08-18T11:25:33.277
> 
> 标签：ide, refresh, reload, visual-studio-2012

我正在寻找用于 HTML5 + CSS3 编辑的工具。目前我发现的最好的 IDE 是 Visual Studio 2012。有一个小问题。我想实时预览我正在创建的内容。我有多个监视器，如果不切换到浏览器并按 F5（或 Ctrl+F5）就可以看到我的代码结果是完美的。我能做到这一点的唯一方法是在 Firefox 或 Chrome 上使用自动重新加载插件。但这不是一个非常优雅的解决方案。它几乎可以减慢这个过程，因为它运行了很多不必要的刷新。

最好的解决方案是在浏览器（或使用浏览器引擎的工具）中以某种方式执行此操作，以在各种浏览器中对其进行测试。它还有助于我在 PHP 或 ASP.NET 中开发服务器端的情况。

或者，如果有一个非常好的 IDE（比 VS 更好），我不介意使用它，但请注意，我正在寻找这些：

*   实时预览（当然）
*   智能感知
*   自动完成功能（例如结束标签、引用等）
*   主题支持（尤其是黑色）+自定义
*   Zoom（不是很重要，但我喜欢支持 C+Scroll 的工具）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T15:01:08.420

如果您正在寻找实时重新加载，请尝试以下操作：[LiveReload](http://livereload.com/)。它在 mac 上非常好用，但也有适用于 windows 的 alpha 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T12:35:09.347

我个人更喜欢 grunt-contrib-watch ( [https://github.com/gruntjs/grunt-contrib-watch](https://github.com/gruntjs/grunt-contrib-watch) )，因为它看起来更灵活。我在 Gruntfile.js 中定义了哪些文件应被监视以进行更改，并在此事件上订阅我想要执行的任何任务。

在开发上。环境项目页面具有重新加载脚本，该脚本使页面在 grunt-contrib-watch 触发的更新事件后立即刷新

```
<script src="http://localhost:35729/livereload.js"></script> 
```

它对我来说很好。这是我的 grunt 构建脚本

```
module.exports = function(grunt) {

  grunt.loadNpmTasks('grunt-contrib-watch');
  grunt.loadNpmTasks('grunt-contrib-compass');
  grunt.loadNpmTasks("grunt-contrib-jshint");
  grunt.loadNpmTasks('grunt-jscs');

  grunt.initConfig({
     // Lint all the files in js folder
     jshint: {
      options: {
        jshintrc: ".jshintrc"
      },
      all: ["js/**/*.js"]
     },
     // Validate against jQuery coding standard
     jscs: {
        options: {
            "standard": "Jquery"
        },
        all: ["js"]
     },
     // Preprocess SASS
     compass: {
        dist: {
          options: {
            sassDir: 'sass',
            cssDir: 'css'
          }
        }
     },
     watch: {
        options: {
          livereload: true
        },
        css: {
            files: ['sass/**/*.sass'],
            tasks: ['compass']
        },
        js: {
            files: ['js/**/*.js'],
            tasks: ['jshint', 'jscs']
        }
      }
  });

  grunt.registerTask("lint", ["jshint", "jscs"]);
  grunt.registerTask("default", ["watch"]);

}; 
```

当你运行 grunt 时，你会得到类似的东西

![在此处输入图像描述](../Images/c60d941ec8ea5d9cb517a05c76944947.png)

# java - JTextArea 和显示格式问题

> ID：12018156
> 
> 赞同：2
> 
> 时间：2012-08-18T11:26:36.357
> 
> 标签：java, swing, awt, jtextarea, layout-manager

于是，我有了这个文本编辑程序，它更多是作为一个表格来设置完成的。

我不确定如何创建程序的编辑器部分。一方面，由于 JTextArea，我会很高兴拥有某种布局，以便它根据输入的文本量展开和收缩（启用自动换行和所有）。

但是，我的文档由一系列问题（以及几个给定的答案）组成。问题中的行数 (JTextArea) 和答案中的行数 (JTextArea) 是可变的，就像每个问题给定答案的数量一样。

我的编辑区域由页面列组成（将根据需要添加和删除），并且我必须以某种方式检测某个问题何时超出页面范围（准确地说是其页边距）。

所以最后，我需要某种半刚性布局管理器。一方面，使用 setPreferredSize 使 JTextAreas 可调整大小，另一方面，当页面被填满到添加任何其他内容会破坏页面的美观外观并且程序移动到下一页时，这种情况会被检测到。

要记住的一件事是，我打算让用户在文档中添加/删除整个问题和一些答案，不一定在最后。

（整个内容仅用于将文档呈现给用户（并使其可编辑），稍后将其导出为 pdf，但那是另一回事了）

我什至不必使用 JTextAreas（如果你有更好的东西），你可以建议任何类型的外部 java 库，我只是想让它工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:22:26.157

您可以检测高度以显示具有固定宽度的 JEditorPane 的某些内容 [http://java-sl.com/tip_text_height_measuring.html](http://java-sl.com/tip_text_height_measuring.html)

因此，逐步添加您的内容，测量是否达到允许的高度。当实现创建一个新页面。

或者，您可以使用分页在 JEditorPane 中添加所有内容（在此处描述[http://java-sl.com/articles.html](http://java-sl.com/articles.html)）

# c# - C# 应用程序停止

> ID：12018163
> 
> 赞同：-1
> 
> 时间：2012-08-18T11:28:12.540
> 
> 标签：c#, sql

我有以下代码：

```
OpeningForm of = new OpeningForm();
of.ShowDialog();

SqlConnection SqlBaglanti = new SqlConnection(@"Data Source=.\SQLEXPRESS;Initial Catalog=MolaTakip; integrated security=true");
SqlBaglanti.Open();

SqlCommand komut = new SqlCommand("AgentBilgisiDondur')", SqlBaglanti);
komut.CommandType = System.Data.CommandType.StoredProcedure;
komut.Parameters.AddWithValue("@LoginName", ThisAgent.LoginName);

SqlDataReader dr = komut.ExecuteReader();

while (dr.Read())
{
    ThisAgent.AgentID = int.Parse(dr["UserID"].ToString());
    ThisAgent.AgentAdi = dr["UserName"].ToString();
}
SqlBaglanti.Close();

FileStream fs = new FileStream(@"C:\agent.bin", FileMode.OpenOrCreate);

BinaryFormatter bf = new BinaryFormatter();

bf.Serialize(fs, ThisAgent); 
```

所有这些代码都写在`Form_Load`事件中。但是表单加载在

```
SqlDataReader dr = komut.ExecuteReader(); 
```

行，其他命令未运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:44:53.103

你确定语法吗？

```
SqlCommand komut = new SqlCommand("AgentBilgisiDondur')", SqlBaglanti); 
```

我认为您有一个存储过程，称为 AgentBilgisiDondur 而不是 AgentBilgisiDondur')

```
SqlCommand komut = new SqlCommand("AgentBilgisiDondur", SqlBaglanti); 
```

一个建议：也尽量使用英文，因为你的专栏是英文的，例如`UserName`. 所以你可以试试`ReturnAgentInformation`；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:36:22.240

您必须使用 sql 命令而不是 sqlconnection 本身打开数据库连接。您正确地将 t 传递给命令。现在命令必须打开它。

`SqlBaglanti.Open();`在调用`ExecuteReader()`添加此行之前删除：

> `SqlCommand.Connection.Open();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T11:42:00.503

错误是您没有正确的参数（您是否错过了一些参数，例如存储过程的密码代理或存储过程的名称错误）请检查

# php - 远程文件上传错误

> ID：12018166
> 
> 赞同：0
> 
> 时间：2012-08-18T11:28:38.647
> 
> 标签：php, upload

有人可以帮助这个脚本吗？

我正在寻找通过 url 上传到我的服务器。

我看到了很多选择，但没有一个不适合我。

这就是我想要做的

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type">
<script type="text/javascript">
//Alerts to errors.
window.onerror=function(msg, url, linenumber){var logerror='Error message: ' + msg + '. Url: ' + url + 'Line Number: ' + linenumber;alert(logerror);return false}
</script>
<title>Upload Form</title>
<style type="text/css">
body
{
margin: 0 auto;
width:900px;
font-family:serif
}
#upload_box
{
background-color: LightBlue;
border:1px solid Black;
padding:20px;
margin-top:40px;
width: 50%;
}
</style>
<?php
if (isset($_POST['myupload']))
{
    define('BUFSIZ', 4095);
    $url = $_POST['upload'];
    echo 'Trying with fread() ';
    $target = 'up/';
    $nname = basename($url);
    $info = pathinfo($url);
    var_dump($info);
    $parse = parse_url($url);
    echo '<br/><br/>';
    if(isset($_POST['nname'])){
        $nname = $_POST['nname'];
    }
    if(fopen($url, 'rb')){
        $rfile = fopen($url, 'rb');
        $lfile = fopen($target.$nname, 'wb');
        while(!feof($rfile)){
            fwrite($lfile, fread($rfile, BUFSIZ), BUFSIZ);
            fclose($rfile);
            fclose($lfile);
        }
    }else{
        echo "Can't read from this directory";
    }
    $fp = fsockopen($parse['host'], 80, $errno, $errstr, 300);
    if (!$fp) {
        echo "$errstr ($errno)<br />\n";
    } else {
        $out = "GET / HTTP/1.1\r\n";
        $out .= "Host: ".$url."\r\n";
        $out .= "User-Agent: Mozilla/5.0 Firefox/3.6.12\r\n";
        $out .= "Connection: Close\r\n\r\n";
        fwrite($fp, $out);
        while (!feof($fp)) {
            echo fgets($fp, BUFSIZ);
        }
        fclose($fp);
    }
}

?> 

</head>
<body>
<div id="upload_box">
<form action="" method="post">
<input type="text" name="upload"><label>URL</label><br/>
<input type="text" name="nname"><label>NEW Name</label><br/>
<input type="submit" name="myupload" value="Upload File">
</form>
</div>
</body>
</html> 
```

结果是：

```
Warning: fopen(http://xxx.co.uk/xxxx/xxxx.mp3):  failed to open stream: Permission denied in 
```

而对于 fsockopen 是同样的问题

```
Warning: fsockopen(): unable to connect to xxx.co.uk:80 (Permission denied) in xxx/index.php on line 53
Permission denied (13) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:41:56.537

我找到了

这是我主机上的传出连接

允许所有并修复；）

# html - 为此创建一个 CSS 类是否正确？

> ID：12018167
> 
> 赞同：1
> 
> 时间：2012-08-18T11:28:58.523
> 
> 标签：html, css

我有很多`h1 elements`要删除的`margin`。

为此制作一个是否正确，`class`或者您是否会单独针对它，`CSS`例如

```
#comments h1 { margin: 0; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:33:28.397

如果你使用一个类，你也可以将它重用于其他元素：

```
.nomargin {
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T11:35:13.003

如果要删除某种类型的**所有**元素的边距，则可以使用通用元素选择器，例如

```
h1 { margin: 0; } 
```

[活生生的例子](http://jsfiddle.net/dDKHT/)

但是，如果您想定位**多个**元素，但**不是某种类型的所有**元素，请使用类分配您想要定位的元素，`nomargin`然后使用以下 CSS

```
.nomargin { margin: 0; } 
```

[活生生的例子](http://jsfiddle.net/dDKHT/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T11:51:51.897

我更喜欢结构选择器而不是表示特定样式的类。例如，如果您*确实*想要在移动设备上查看该网站时获得边距怎么办？现在你的班级名称是错误的。一个极端的例子是命名类，如“蓝色”或“15 像素文本”。

阅读样式表时，结构选择器也可以更直观。您可以推断它将在哪里应用，而不是想知道类名称已应用到哪些元素。

一个考虑因素是这样的选择器会变得非常复杂，并且可能比类选择器执行得更差。与往常一样，没有硬性规定。

作为旁注，您可以使用[LESS](http://lesscss.org/)或[SASS](http://sass-lang.com/)使开发/维护更容易。这并没有解决语义问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T11:39:04.877

是的，这样做是非常好的 CSS，假设所有标题标签都在带有 的元素内`id='comments'`，并且假设这些是您想要以这种方式操作的唯一标题标签。

如果您对要以这种方式设置样式的元素有更普遍的需求，那么也许可以使用一个类，但由于您已经有一个选择器可以获取您想要设置样式的所有元素，请使用它；你不应该觉得你需要仅仅为了它而创建一个类。

# android - 如何获得像谷歌地图那样的非模拟位置？

> ID：12018169
> 
> 赞同：2
> 
> 时间：2012-08-18T11:29:40.677
> 
> 标签：android, android-location

当我在开发人员选项中启用模拟位置并安装像[CatchMeIfUCan](https://play.google.com/store/apps/details?id=kr.woot0pia.gps)这样的程序时，几乎所有应用程序都接受模拟位置。除了谷歌地图。谷歌地图总是显示我的真实位置。

谷歌地图是如何做到这一点的？是否有特殊的 API 可以获取正确的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T14:02:19.590

如果您的应用程序使用 FusedLocationProviderApi，那么您可以通过检查[KEY_MOCK_LOCATION](https://developer.android.com/reference/com/google/android/gms/location/FusedLocationProviderApi.html#KEY_MOCK_LOCATION)来检查您获得的位置是否是模拟的/真实的。

# centos - CentOS：不能使用 yum 安装包

> ID：12018171
> 
> 赞同：-1
> 
> 时间：2012-08-18T11:30:23.020
> 
> 标签：centos, vmware

我刚刚在 VMware 上安装了 Centos6 并使用了 NAT，但是当我使用 yum 时出现此错误：

![在此处输入图像描述](../Images/af923b31a081548d00f452022f4cc1b1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T04:26:59.863

尝试运行 a`service network restart`以查看您的虚拟机是否会从其桥接接口获取 DHCP 信息。然后检查您的连接状态（的输出`ifconfig`会有所帮助）。

检查内容`/etc/resolv.conf`以确保您列出了 DNS 解析器。否则，您将无法上网。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:38:40.370

显然他无法连接到 repo（无法解析主机......）
您将在以下文件中找到这些 url `.repo`：

```
/etc/yum.repos.d/ 
```

试图查看`CentOS-Base.repo`包含的文件：

```
tail /etc/yum.repos.d/CentOS-Base.repo 
```

并注释未找到的 URL 行

[yum维护](http://www.centos.org/docs/5/html/yum/sn-yum-maintenance.html)的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T11:57:14.850

显然您无法访问互联网，更准确地说是 DNS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T03:11:02.743

将此行添加到 ~/.bashrc

导出 PATH="/sbin:$PATH"

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-25T16:00:52.357

您可以在`/etc/resolv.config`. `8.8.8.8`和`8.8.4.4`工作。

# c++ - 无符号和有符号整数之间的比较（对我来说）似乎需要（c ++）

> ID：12018173
> 
> 赞同：1
> 
> 时间：2012-08-18T11:30:46.280
> 
> 标签：c++, types, sign

我正在制作一个游戏（为了好玩），它有一个滚动屏幕。以下代码更新位置：

```
screen_x += screen_scroll_x;
if(screen_x < 0)
    screen_x = 0;

if(screen_x > map_width - screen_width)
    screen_x = map_width - screen_width; 
```

我正在努力为 screen_x 选择正确的整数类型。如果已签名，则会`screen_x > map_width - screen_width`引发警告“未签名和已签名之间的比较”。如果它未签名，则`if(screen_x < 0)`失败（具有创造性结果），因为 screen_x 永远不会是负数。

`map_width`在加载地图时与字符串的长度进行比较，因此如果我们进行`map_width`签名，问题就会转移到代码的那部分。

很多人说你应该使用正确的整数。他们还说要注意你的警告，我确实收到警告（警告太多，你不再关注它们），这让我很烦恼。

什么是理想的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:51:06.263

当二元运算符的两侧有不同的符号时，有符号的操作数将被提升为无符号的。这在 C 标准中是一个奇怪的问题，但您必须通过强制转换（但在这种情况下这将是一个错误）或在这种情况下，通过使用有符号整数来保存这两个值来处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:15:32.900

如果您对数学上合理的比较感兴趣，则`unsigned`不应直接进行任意比较。`signed ints`那是因为 C(++) 的算术不是你的常规数学算术。

在涉及 a`signed int`和 an的 C(++) 表达式中`unsigned int`，`signed int`首先将 a 转换为 an `unsigned int`，然后执行操作（+、*、< 等）。

要正确比较 a`signed int`和 an，`unsigned int`您应该考虑 C(++) 的“算术规则”以及编程语言强制要求且外行人看不到的类型/值转换。

因此，您可以像这样比较两者：

```
/* returns -1 if s < u,
   returns 0 if s == u,
   returns 1 if s > u */
int CompareSignedUnsigned(int s, unsigned u)
{
  if (s < 0) return -1; // negative is always smaller than 0 or positive
  if (s < u) return -1; // obvious
  if (s > u) return 1;  // obvious
  return 0; // obvious
} 
```

至于使用正确的整数类型，这是一个很好的建议，但有时一种大小并不适合所有人。屏幕上的坐标就是这样一个区域，在其中对坐标进行签名可能是非常合理的。

想象一下，例如，您想要一个例程在屏幕上渲染一个框，并且您希望能够绘制一个在屏幕上移动的框，从屏幕外部开始（移入其中）并在屏幕外部结束（移出）。

如果您选择这样的 API：

```
void DrawBox(unsigned x, unsigned y, unsigned width, unsigned height, color c); 
```

当绘制该框的一部分时，当一个部分在屏幕上而另一个不在屏幕上时，此函数的用户将不得不做一些额外的数学运算。这一切都是因为根本没有办法告诉函数原始/未裁剪的盒子真的不在屏幕上。

现在，如果你选择这个：

```
void DrawBox(int x, int y, unsigned width, unsigned height, color c); 
```

并将额外的裁剪数学移动到函数内部，突然之间，该函数的用户可以编写非常简单的代码。它可能很简单：

```
for (int x = -100; x < SCREEN_WIDTH + 100, x++)
  DrawBox(x, SCREEN_HEIGHT / 2, 100, 50, GREEN); 
```

# javascript - 用于突出显示文本的 JQuery/JavaScript 插件

> ID：12018174
> 
> 赞同：9
> 
> 时间：2012-08-18T11:30:54.300
> 
> 标签：javascript, jquery

我正在为一个元素中的多个突出显示的文本寻找一个 jquery 插件。我找到了一个非常流行的插件：http: [//bartaz.github.com/sandbox.js/jquery.highlight.html](http://bartaz.github.com/sandbox.js/jquery.highlight.html)以及许多其他插件。

它们工作正常，但如果我想突出显示与先前突出显示的文本重叠的文本 - 它不起作用。

有谁知道支持多个突出显示的文本并正确突出重叠文本的 jquery 或 javascript 插件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-03T03:44:02.400

如果您添加一些小调整，您可以使用找到的[荧光笔插件](http://bartaz.github.com/sandbox.js/jquery.highlight.html)完成所有操作。作为一个插图，我发布了一个我今天下午快速整理的工作示例：http: [//jsfiddle.net/4bwgA/](http://jsfiddle.net/4bwgA/)

在这里，我将逐步介绍插件（OP 所指）已经完成的所有事情，最后给出重叠突出区域的解决方案。

荧光笔的作用是在您应用它的单词周围放置一个标签。所以如果你有

```
 <p>Who is the quick brown fox?</p> 
```

你突出显示了“棕色”这个词

```
 $("p").highlight("brown"); 
```

你得到

```
 <p>Who is the quick <span class="highlight">brown</span> fox?</p> 
```

和一个额外的命令

```
 $("p").highlight("brown fox"); 
```

不会找到任何东西，因为字符串不再有这个子字符串，因为它现在有棕色周围的标签。

因此，如果只是重叠......解决方案很简单。该软件包提供了取消突出显示的功能，您可以在新的突出显示之前应用该功能

```
 $("p").unhighlight().highlight("brown fox"); 
```

并得到

```
 <p>Who is the quick <span class="highlight">brown fox</span>?</p> 
```

到目前为止，这并没有什么令人兴奋的。但是，如果我们一次性突出显示“棕色”，然后在下一个突出显示“狐狸”。我们得到这个

```
 <p>Who is the quick <span class="highlight">brown</span> <span class="highlight">fox</span>?</p> 
```

然后我们要加入相邻的高亮区域。这可以通过一个附加函数来完成，它执行如下操作：

```
 function mergenode(node) {
        var parent1 = node.contents();
        parent1.each(function (i) {
            if (i > 0 && this.nodeType !== 1 && //if text node
                this.data.search(/^\s*$/g) === 0 && //consisting only of hyphens or blanks
                parent1[i - 1].nodeName === "SPAN" && //bordering to SPAN elements
                parent1[i + 1].nodeName === "SPAN" && 
                parent1[i - 1].className === "highlight" && //of class highlight
                parent1[i + 1].className === "highlight") {
                    selected1.push(parent1[i - 1]
                        .textContent.concat(this.data, parent1[i + 1].textContent));
            }
            else if (this.nodeType === 1 && 
                this.nodeName === "SPAN" && 
                parent1[i + 1].nodeName === "SPAN" && 
                this.className === "highlight" && 
                parent1[i + 1].className === "highlight") {
                    selected1.push(this.textContent.concat(parent1[i + 1].textContent));
            }
        });
        $(node).unhighlight().highlight(selected1);
    } 
```

这会将所有相邻跨度与类高亮合并（这只是为通用荧光笔标签编写的，但可以很容易地使用 nodeName 和 className 的两个额外参数进行扩展，用于自定义标签）。结果将如下所示

```
 <p>Who is the quick <span class="highlight">brown fox</span>?</p> 
```

到目前为止一切都很好。但是如果我们的搜索字符串重叠怎么办？！！！首先......与重叠最好的办法是在检查清除文本上的重叠字符串之前取消选择旧选择。为此，我们需要记住之前的选择，例如，可以将其保存在一个数组（我称之为它`selected1`）中，该数组在每次额外选择时都会添加一个值。

每次运行时，最终选择（全部合并）都会保存到`selected1`数组中，以便将来用于合并和重叠。

现在，荧光笔如何处理字符串数组？它按照它们被传递给函数的顺序将高亮函数应用于它们中的每一个。因此，如果两个字符串完全重叠，我们可以通过对选择字符串数组进行排序并首先突出显示较长的字符串来处理它。例如

```
 $("p").highlight(["brown fox","brown"]); 
```

只会突出显示

```
 <p>Who is the quick <span class="highlight">brown fox</span>?</p> 
```

数组可以按长度排序，如下所示

```
 words = words.sort(function (str1, str2) {
        return (str1.length < str2.length) ? 1 : 0;
    }); 
```

现在处理完全重叠和相邻的高光。现在我们必须确保我们得到部分重叠的字符串。在这里，我编写了一个比较两个字符串是否重叠的函数......还有其他方法可以做到这一点，但我想在这个答案中展示的主要是您需要执行的一系列步骤，以便以您的方式突出显示想要 =)

此函数接受两个字符串，检查它们是否重叠，如果重叠，则将它们组合起来并将新组合的字符串保存到一个数组中，`toselect`最后附加到原始`words`数组中。可能有一些无用的组合，但它不会受到伤害 - 它们不会在最后显示。

```
 function overlap(a, b) {
        var l = b.length,
            m = a.length;
        for (var j = 1; j < l; j++) {
            if (a.indexOf(b.substr(l - j)) === 0) {
                toselect.push(b.concat(a.substr(j)));
            } else if (a.substr(m - j).indexOf(b.substr(0, j)) === 0) {
                toselect.push(a.concat(b.substr(j)));
            }
        }
    } 
```

现在我们想将此函数应用于`words`数组中所有可能的元素对。我们可以用循环来迭代它，但我有点兴奋并做了这个

```
 $.each(arr, function (i) {
        $.each(arr.slice(i + 1), function (i, v) {
            overlap(arr[i], v);
        });
    }); 
```

现在我们只需要将新`toselect`数组（其中所有可能的重叠字符串都已连接）附加到原始`words`数组。

所以现在我们有了我们需要的所有部件，我们可以把它们放在一起。每次我们想要突出显示一个新字符串或字符串数​​组时，我们都会执行以下步骤：

1.  取消突出显示当前突出显示的所有内容（突出显示的任何内容都将在`selected1`数组中）。
2.  我们的新字符串或字符串数​​组进入`words`数组
3.  附加`selected1`到`words`
4.  合并所有部分重叠的字符串对`words`并将新的合并字符串添加到`words`（使用`overlap`函数及其遍历整个数组的包装器 -`overdiag`在小提琴示例中）
5.  按`words`字符串长度排序，所以最长的字符串会排在第一位
6.  突出显示所有字符串`words`
7.  合并所有相邻的高亮字符串（使用`mergenode`函数）
8.  最后一组突出显示的字符串保存到`selected1`

我今天下午很快把它放在一起，所以它不是这个想法的完美实现，但它有效 =) 我将我的代码添加到荧光笔脚本中，并将它们添加到 jsfiddle 上的一个简单示例中，供您使用[http://jsfiddle .net/4bwgA/](http://jsfiddle.net/4bwgA/)。有一些按钮，因此您可以按下所有不同的步骤并查看它们的作用。

# jquery - Fancybox iframe div 的大小不会正确

> ID：12018178
> 
> 赞同：1
> 
> 时间：2012-08-18T11:31:16.717
> 
> 标签：jquery, fancybox

我目前正在使用fancybox 打开一个包含php 联系表单的iframe 的网站。

一切正常，除了联系 php 表单不会使用整个 iframe。

我已将大小设置为 800 像素 x 600 像素，并且联系人 php 上的 div 设置为 800x600。

当显示在 iframe 中时，它们以大约 150x70px 滚动这是我的脚本代码；

```
$(document).ready(function() {
    $(".fancybox-iframe").fancybox({
        herf        : 'contact/index.html',
        type        : 'iframe',
        margin      : 0,
        padding     : 0,
        width       : 800,
        height      : 600,
        fitToView   : false,
        autoSize    : false,
        closeClick  : 'false',
        openEffect  : 'elastic',
        closeEffect : 'elastic',
        openSpeed   : 'slow'
    });
}); 
```

[链接在这里](http://www.lanfinity.org.au/bda/)

# c++ - 为什么构造函数没有被多次调用？

> ID：12018180
> 
> 赞同：0
> 
> 时间：2012-08-18T11:31:35.320
> 
> 标签：c++, constructor

我正在阅读 Marshall Cline 的 C++ FAQ。

目前正在使用第 10.5 点中的代码。

我有这个：

```
class Fred
{
public:
  Fred();
  Fred(int x, int y)
  {
    std::cout << "Fred with two ints\n" << std::endl;
  };
};

int main()
{
  std::vector<Fred>(3, Fred(4,5));
  return 0;
} 
```

我希望看到“Fred with two ints”打印了 3 次——但它只打印了一次。为什么 - 它没有被调用 3 次？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T11:39:16.077

这是`vector`您正在调用的构造函数的签名：

```
vector( size_type _Count, const Type& _Val, const Allocator& _Alloc = Allocator() ); 
```

`Fred(4,5)`调用您定义的构造函数一次，创建的实例通过引用传递给`vector<Fred>`构造函数。然后，它 [创建的实例] 被复制 3 次到向量。复制操作是使用（默认）复制构造函数执行的；所以你的构造函数不会被多次调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T12:01:45.077

当您编写 Fred(4,5) 时，您将调用一次用户定义的构造函数。这被传递给向量的构造函数，它将它复制 3 次到 3 个 Freds 中。这使用您的复制构造函数，而不是您的默认或自定义构造函数。如果您不编写自己的复制构造函数，则会隐式添加一个，就像赋值操作一样。下面，我添加了一个复制构造函数和赋值操作来显示幕后添加的内容：

```
class Fred
{
public:
  Fred();  // default constructor
  Fred(int x, int y)  // custom constructor
  {
    std::cout << "Fred with two ints\n" << std::endl;
  };
  Fred(const Fred&); // copy constructor
  Fred& operator=(const Fred&);  // assignment operator overload
}; 
```

复制构造函数：Fred(const Fred&); 当向量构造函数将您的 Fred 复制到包含的 3 个 Fred 中时，调用的是什么。如果你自己实现它，你会看到它被调用了 3 次。这是一个完整的演示：

```
#include <iostream>
#include <vector>
using namespace std;

class Fred
{
private:
    int x,y;

public:
    Fred()  // default constructor
    {
        cout << "Fred's default constructor\n";
    }
    Fred(int x, int y)  // custom constructor
    {
        cout << "Fred's custom constructor\n" << std::endl;
    };
    Fred(const Fred& rhs)   // copy constructor -- NOTE rhs stands for "right-hand-side"
        :x(rhs.x),y(rhs.y)
    {
        cout << "Fred's copy constructor\n";
    }
    Fred& operator=(const Fred& rhs)  // assignment operator overload
    {
        if(&rhs != this)
        { 
            cout << "Fred's assignment overload\n";
            x = rhs.x;
            y = rhs.y;
        }
        return *this;
    }
};

int main(int argc, char** argv)
{
    Fred fred;  // calls default constructor
    vector<Fred> myFreds(3,Fred(4,5));  // calls custom constructor, then copy constructor 3 times.
    fred = myFreds[0]; // calls assignment overload

    return 0;
} 
```

输出：

Fred的默认构造函数
Fred的自定义构造函数
Fred的拷贝构造函数
Fred的拷贝构造函数
Fred的拷贝构造函数
Fred的赋值重载

如果禁用复制构造函数和赋值重载，在尝试使用它们时会出现错误。如果你使用 C++11，如果你可以通过像上面那样声明它们来禁用它们，然后是 = delete;

```
Fred(const Fred&) = delete; 
```

如果您不使用 C++11，则可以通过私下声明它们来有效地禁用它们：

```
private:
Fred(const Fred&);  // NOTE: Don't define this function. 
```

一旦它被禁用，你会看到你的程序不再编译，因为它试图访问被禁用的函数。它只是为您编译，因为您允许通过不自己定义它们来隐式添加它们。

# jquery - wordpress head: 手动包含jquery后，又被插件包含了……怎么解决？

> ID：12018182
> 
> 赞同：0
> 
> 时间：2012-08-18T11:31:46.897
> 
> 标签：jquery, wordpress, include, conflict

嗯，这个标题很解释...

我正在构建一个自定义主题，其中所有花哨的 jQuery 东西（滑块、画廊、切换、工具提示等）都手动添加到文档的头部，当然，我也手动调用 jQuery。我更喜欢以这种方式工作，而不是运行 wordpress 插件。

但问题是...

那里有一个插件，我不能没有它：WP-POLLS。会发生什么？一旦我启动这个插件，它就会再次调用 jQuery！我所有的其他东西都坏了。

我可以看到3种方式：

1 - 编辑 wp-polls PHP 文件并删除它的 jQuery 调用/包括

2 - 编辑 wp-polls PHP 文件并尝试插入验证以查看 jQuery 是否已加载到它（重新）加载/（重新）包含 jQuery 的行中

3 - 了解执行 jQuery 的正确方法，包括我的不会与 WP-Poll 冲突的东西。

有什么想法吗，伙计们？非常感谢。C。

* * *

## **编辑**

我想我找到了解决问题的方法。也许这不是专业的方法，但显然它有效！

我的 WP **header.php**是：

```
<html>
<head>
   // Library
   jQuery library including

   // My own manual fancy stuff
   Slider
   Carousel
   Tooltip
   Etc

   // WP Head stuff
   wp_head();
</head> 
```

然后，我改为：

```
<html>
<head>
   // WP Head stuff
   wp_head();

   // Library (Removed OUT!)
   // jQuery library including

   // My own manual fancy stuff
   Slider
   Carousel
   Tooltip
   Etc
</head> 
```

并在我的主题**functions.php**文件中添加了以下内容：

```
function load_my_scripts() {
if (!is_admin()) {
wp_deregister_script( 'jquery' );
wp_register_script('jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');
wp_enqueue_script('jquery');
} 
} add_action('init', 'load_my_scripts'); 
```

现在，WP-POLLS 和我所有花哨的东西都运行良好。但是，我不确定...

有没有关于在 HTML 顶部包含 wp_head() 的建议？如果我没记错的话，它应该包含在结束标签之前。

而且，在**wp_register_script**中，最好调用本地 jQuery 库还是 google 库？

感谢所有关注这个话题的人！问候， C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:57:54.080

最好的解决方案是使用 wp_enqueue_script() 添加 jQuery - 就像您在编辑中所做的那样 - 而不是手动添加它。使用 wp_enqueue_script() 时，无论从插件或主题调用多少次，它只会输出每个特定脚本*一次*。这可以防止像 jQuery 这样的问题被包含两次。

至于[wp_head()](http://codex.wordpress.org/Function_Reference/wp_head)的位置：

> 触发“wp_head”动作。将此模板标签放在主题模板中的标签之前（例如 header.php、index.php）。

最后，对于使用本地 jQuery 库还是 Google 提供的库更好，我无法给出一般性的答案，但在您的情况下，我建议您坚持使用本地库。

# c++ - Char是算术类型？

> ID：12018184
> 
> 赞同：2
> 
> 时间：2012-08-18T11:32:05.003
> 
> 标签：c++, matrix, char, arithmetic-expressions

我创建了一个矩阵类，使用

```
static_assert(std::is_arithmetic<T>::value,""); 
```

检查模板类型是否为算术类型。所以我尝试了

```
Matrix<char> matrix1(3,3); // ctor takes number of rows and columns 
```

它有效。不使用 char 类型调用 static_assert 函数。这是正常的？char 被视为算术类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T11:35:22.547

从[参考](http://en.cppreference.com/w/cpp/types/is_arithmetic)：

> 如果 T 是算术类型（即整数类型或浮点类型），则提供等于 true 的成员常量值。对于任何其他类型，值为 false。

`char`是整数类型，所以答案是`true`。`char`适合 a 的小整数通常被*解释*为特定字符编码空间中的代码点这一事实是次要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:44:08.847

是的，它和其他任何整数（int、long、short）一样是普通整数。这也是 C(++) 中将其用于算术的一种常见做法，例如，将数字转换为其对应的可打印字符，您可以编写

```
char printable = digit + '0'; 
```

# php - 如何在 jquery-ajax 中发布值数组？

> ID：12018187
> 
> 赞同：0
> 
> 时间：2012-08-18T11:32:14.547
> 
> 标签：php, javascript, jquery, ajax, post

如何在 jquery-ajax 中发布值数组？

```
<input type='text' name='mynameinputs[]'>
<textarea id='mydescription' name='mydescriptioninputs[]'></textarea>
<input type='text' name='myquantityinputs[]'>

<input type='text' name='mynameinputs[]'>
<textarea id='mydescription' name='mydescriptioninputs[]'></textarea>
<input type='text' name='myquantityinputs[]'>

<input type='text' name='mynameinputs[]'>
<textarea id='mydescription' name='mydescriptioninputs[]'></textarea>
<input type='text' name='myquantityinputs[]'>

$.post(url,{''}, function(data){} 
```

如何获取每个值并将其发布到 php 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T11:34:10.367

您可以[`.serialize()`](http://api.jquery.com/serialize/)在包含表单上使用该方法：

```
$.ajax({
    url: 'foo.php',
    type: 'POST',
    data: $('#if_of_the_form').serialize(),
    success: function(result) {

    }
}); 
```

`$('#if_of_the_form').serialize()`将格式化这些值，就好像它是一个普通的表单提交 - 使用[`application/x-www-form-urlencoded`](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1)。

# android - 如何禁用应用程序中的所有声音

> ID：12018189
> 
> 赞同：-1
> 
> 时间：2012-08-18T11:32:30.067
> 
> 标签：android

我正在开发一个android应用程序。在应用程序中，我在activity1中有一个按钮。单击该按钮时，它会跳转到activity2，然后为activity2 播放背景音乐。

我已经使用媒体播放器在活动 2 中播放音乐。

现在我在activity1中放置了一个声音按钮，我希望当用户点击它时，应该禁用要在activity2中播放的背景音乐，如果用户再次点击声音按钮......activity2中的音乐是启用。

如何完成这个任务。我是初学者，我不知道该怎么做。任何人都可以帮我解决这个问题吗？？？？

任何帮助都将是可观的....

活动1 java代码..

```
package com.example.quizproject;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Color;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.widget.Button;
import android.widget.ImageButton;

public class Menu extends Activity implements View.OnClickListener{

Button btn4,btn5,btn6,btn7,btn8;
ImageButton imgbtn1,imgbtn2;
MediaPlayer mp2;

public void onCreate(Bundle icici) {
    super.onCreate(icici);
    setContentView(R.layout.menupg);

    mp2=MediaPlayer.create(this, R.drawable.buttonsound);

   btn4=(Button)findViewById(R.id.btn4);
   btn5=(Button)findViewById(R.id.btn5);
   btn6=(Button)findViewById(R.id.btn6);
   btn7=(Button)findViewById(R.id.btn7);
   btn8=(Button)findViewById(R.id.btn8);

   imgbtn1=(ImageButton)findViewById(R.id.imgbtn1);
   imgbtn2=(ImageButton)findViewById(R.id.imgbtn2);

   btn4.setOnClickListener(this);
   btn5.setOnClickListener(this);
   btn6.setOnClickListener(this);
   btn7.setOnClickListener(this);
   btn8.setOnClickListener(this);
   imgbtn1.setOnClickListener(this);
   imgbtn2.setOnClickListener(this);

}

public void onClick(View v) {

    mp2.start();

    if((v.getId())==(R.id.btn5))
    {
        startActivity(new Intent("com.example.quizproject.Highscore"));
    }
    if((v.getId())==(R.id.btn4))
    {

        startActivity(new Intent("com.example.quizproject.Ques"));
    }
    if((v.getId())==(R.id.btn6))
    {

        startActivity(new Intent("com.example.quizproject.About"));
    }
    if((v.getId())==(R.id.btn7))
    {

        startActivity(new Intent("com.example.quizproject.Addques"));
    }
    if((v.getId())==(R.id.imgbtn2))
    {

    }
    if((v.getId())==(R.id.btn8))
    {

        Intent intent = new Intent(this, StartQuiz.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
    }

}
public boolean onKeyDown(int keycode, KeyEvent event)
{
    if(keycode==(KeyEvent.KEYCODE_DPAD_CENTER))
    {
        finish();
    }
    return super.onKeyDown(keycode, event);
}

} 
```

活动 1 的 xml 代码....

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/dar"
android:gravity="center"
android:orientation="vertical" >

<Button
    android:id="@+id/btn4"
    android:layout_width="250dp"
    android:layout_height="40dp"
    android:text="PLAY" 
    android:layout_marginBottom="10dp"
    android:textStyle="bold"
    android:background="@drawable/quesbtn_shape"/>

<Button
    android:id="@+id/btn5"
    android:layout_width="250dp"
    android:layout_height="40dp"
    android:text="HIGH SCORE" 
    android:layout_marginTop="10dp"
    android:layout_marginBottom="10dp"
    android:textStyle="bold"
    android:background="@drawable/quesbtn_shape"/>

<Button
    android:id="@+id/btn6"
    android:layout_width="250dp"
    android:layout_height="40dp"
    android:text="ABOUT QUIZ" 
    android:layout_marginTop="10dp"
    android:layout_marginBottom="10dp"
    android:textStyle="bold"
    android:background="@drawable/quesbtn_shape"/>

<Button
    android:id="@+id/btn7"
    android:layout_width="250dp"
    android:layout_height="40dp"
    android:text="ADD QUESTION" 
    android:layout_marginTop="10dp"
    android:layout_marginBottom="10dp"
    android:textStyle="bold"
    android:background="@drawable/quesbtn_shape"/>

<Button
    android:id="@+id/btn8"
    android:layout_width="250dp"
    android:layout_height="40dp"
    android:text="Exit" 
    android:layout_marginTop="10dp"
    android:layout_marginBottom="10dp"
    android:textStyle="bold"
    android:background="@drawable/quesbtn_shape"/>

<TableLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <TableRow >
  <ImageButton
    android:id="@+id/imgbtn1"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:src="@drawable/sound" 
    android:layout_marginLeft="87dp"
    android:layout_marginTop="20dp"
    android:background="@drawable/quesbtn_shape"/>

  <ImageButton
    android:id="@+id/imgbtn2"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:src="@drawable/music"
    android:layout_marginLeft="40dp"
    android:layout_marginTop="20dp"
     android:background="@drawable/quesbtn_shape"/>

    </TableRow>
   </TableLayout>

</LinearLayout> 
```

活动2 java代码..

```
package com.example.quizproject;

import java.lang.reflect.Method;
import java.security.PublicKey;
import java.util.Random;
import java.util.Set;
import java.util.Timer;
import java.util.concurrent.DelayQueue;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Color;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.os.Handler;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class Ques extends Activity implements View.OnClickListener{

TextView txt17,txt18,txt21,txt19,txt20;

Button btn10,btn11,btn12;

MediaPlayer mp1,mp5,mp;
ImageView imgv;

int score=0,ch=3,q=1;
String ans;

public void onCreate(Bundle icici) {
    super.onCreate(icici);
    setContentView(R.layout.activity_main);
    mp1=MediaPlayer.create(this, R.drawable.buzzer);
    mp5=MediaPlayer.create(this, R.drawable.belltone);
    mp=MediaPlayer.create(this, R.drawable.bgmusic);
    mp.setVolume(50,50);
    mp.start();
   mp.setOnCompletionListener(new OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
            mp.release();
            // TODO Auto-generated method stub

        }
    });

    txt17=(TextView)findViewById(R.id.txt17);
    txt21=(TextView)findViewById(R.id.txt21);
    txt19=(TextView)findViewById(R.id.txt19);
    txt20=(TextView)findViewById(R.id.txt20);
    txt18=(TextView)findViewById(R.id.txt18);
    btn10=(Button)findViewById(R.id.btn10);
    btn10.setOnClickListener(this);
    btn11=(Button)findViewById(R.id.btn11);
    btn11.setOnClickListener(this);
    btn12=(Button)findViewById(R.id.btn12);
    btn12.setOnClickListener(this);
    imgv=(ImageView)findViewById(R.id.imageButton1);

        }

public void stopMusic()
{
    mp.stop();
    mp.release();
    mp = null;
}
public void stopMusic1()
{
    mp1.stop();

}
public void stopMusic2()
{
    mp5.stop();

}

public void onClick(View v) {
    // TODO Auto-generated method stub
    stopMusic1();
           stopMusic();
            stopMusic2(); 
```

}

这是在activity2中没有问题的代码......activity1中id为imgbtn2的imagebutton应该禁用activity2的音乐。

例如，如果用户按下图像按钮，那么当它跳到活动 2 时，不应该播放音乐，如果用户再次按下图像按钮，那么当它跳到活动 2 时，音乐应该在后台播放.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:35:47.450

只需使用任何方法来停止您正在使用的 API 中的音乐，例如在[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)中，您将调用[stop()](http://developer.android.com/reference/android/media/MediaPlayer.html#stop%28%29)来停止它并调用[pause()](http://developer.android.com/reference/android/media/MediaPlayer.html#pause%28%29)来暂停它。

# javascript - 如何使用复选框启用多个元素

> ID：12018195
> 
> 赞同：-1
> 
> 时间：2012-08-18T11:33:37.663
> 
> 标签：javascript

我经历了一些通过javascript启用/禁用多个html元素的代码：

```
<script type="text/javascript">
    function enableDisable(bEnable, text_no1, text_no2, opt_no1, opt_no2){
        document.getElementById(text_no1).disabled = !bEnable
        document.getElementById(text_no2).disabled = !bEnable
        document.getElementById(opt_no1).disabled = !bEnable
        document.getElementById(opt_no2).disabled = !bEnable
    }
</script>
<label for="toggler"><input type="checkbox" id="toggler" autocomplete="off"
 checked="false" 
 onclick="enableDisable(this.checked, 'text_no1','text_no2','opt_no1','opt_no2')";>
&nbsp;Toggler</label>
<br>
<input type="text" name="text_no1"><br>
<input type="text" name="text_no1"><br>
<select name="opt_no1">
  <option>1</option>
</select>
<select name="opt_no2">
  <option>1</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:35:03.427

我为您要实现的目标制作了一个简单的脚本。

*（在 Chrome 21、Firefox 14、Internet Explorer 9 中测试）*

**JavaScript**

```
function Switch() {
    var checkbox = document.getElementById("Switch")

    var val = checkbox.checked

    document.getElementById("textbox").disabled = val

} 
```

**的HTML**

```
<input type="checkbox" id="Switch" onChange="Switch()" />Disable/Enable
<br />
<input type="text" id="textbox"/> 
```

**现场示例**：http: [//jsfiddle.net/jHVNE/1/](http://jsfiddle.net/jHVNE/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:44:46.883

# html - 具有恒定容器高度和宽度的标记图像

> ID：12018198
> 
> 赞同：0
> 
> 时间：2012-08-18T11:34:18.510
> 
> 标签：html, css

我有一个菜单列表：

```
<ul>
  <li class="marked">First item</li>
  <li>Second much longer than first item</li>
</ul> 
```

我想在 item.marked 顶部有一个图像标记，`width`它将是文本宽度的 100%。图像必须拉伸，以便完全可见。`Height`是恒定的。

这可以通过兼容性`CSS`来完成吗？`IE`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:39:37.637

```
 <style type="text/css">
    .selected {
       background:url("example.png") no-repeat 0 100%;
    }
 </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:56:22.713

更改列表项背景的解决方案（可适配更改图片）：

**1.** CSS-only，持久，适用于当前版本的浏览器（不适用于 IE8 和更早版本） - [**DEMO**](http://dabblet.com/gist/3386325)。

HTML：

```
<ul>
    <li>
        <input type="radio" name="s" id="o1" checked>
        <label for="o1">First item</label>
    </li>
    <li>
        <input type="radio" name="s" id="o2">
        <label for="o2">Second much longer than first item</label>
    </li>
</ul> 
```

相关CSS：

```
ul input[type=radio] {
    display: none;
}
input[type=radio]:checked + label {
    background: lightblue;
} 
```

如果您想在所选项目上方有一个图像（带有 img 标签），那么您可以像在[**这个演示**](http://dabblet.com/gist/3386435)中一样对其进行调整。

HTML：

```
<ul>
    <li>
        <input type="radio" name="s" id="o1" checked>
        <label for="o1">First item
            <img src="http://upload.wikimedia.org/wikipedia/commons/5/5b/Supernumerary_rainbow_03_contrast.jpg">
        </label>
    </li>
    <li>
        <input type="radio" name="s" id="o2">
        <label for="o2">Second much longer than first item
            <img src="http://upload.wikimedia.org/wikipedia/commons/5/5b/Supernumerary_rainbow_03_contrast.jpg">
        </label>
    </li>
</ul> 
```

并添加以下 CSS：

```
label img {
    top: 0;
    width: 100%;
    height: 100%;
    display: none;
    position: absolute;
}
input[type=radio]:checked + label img {
    display: block;
} 
```

如果您不想使用`img`标记来执行此操作，则可以`background-image`在伪元素上使用 a 并将其设置`background-size`为`100% 100%`，就像在[**这个演示**](http://dabblet.com/gist/3386462)中一样。HTML 与第一个演示中的相同，您还需要在 CSS 中包含以下内容：

```
label {
    position: relative;
}
input[type=radio]:checked + label:after {
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    position: absolute;
    background: url(http://upload.wikimedia.org/wikipedia/commons/5/5b/Supernumerary_rainbow_03_contrast.jpg);
    background-size: 100% 100%;
    content: '';
} 
```

**2.** CSS-only，不持久（当您单击页面上的其他位置时，列表项不会保持选中状态），适用于 IE8（也适用于 IE7，但您必须将鼠标悬停在文本上才能看到更改） -[**演示**](http://dabblet.com/gist/3386358)。

HTML：

```
<ul>
    <li><a href="#" tabindex="1">First item</a></li>
    <li><a href="#" tabindex="1">Second much longer than first item</a></li>
</ul> 
```

相关CSS：

```
a:active, a:focus {
    outline: none;
    background: lightblue;
} 
```

# asp.net - 使用 hostfile 模拟域名在 IIS 网站上无法正常工作

> ID：12018201
> 
> 赞同：0
> 
> 时间：2012-08-18T11:34:47.223
> 
> 标签：asp.net, iis

我在hostfile中添加了一个域名

127.0.0.1 mydomain.com

我在 IIS7 下创建了一个网站绑定到 mydomain.com 并在网站文件夹中创建了一个空白 index.html 用于测试

但是当我在浏览器中输入[http://mydomain.com](http://mydomain.com)时，它会显示 IIS 默认网站的文件。相反，我必须输入[http://mydomain.com/index.html](http://mydomain.com/index.html)才能获得正确的页面。

index.aspx 文件的结果相同

为什么 ？我应该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:07:59.957

正确的答案是将 127.0.0.1 替换为服务器的实际 IP。

# .htaccess - 如何在两种场景下重新映射 URL？

> ID：12018203
> 
> 赞同：1
> 
> 时间：2012-08-18T11:34:50.227
> 
> 标签：.htaccess

当有人继续

`example.com/e/t/`

我希望它重新映射到`example.com/e/index.php?mode=t`

我也希望它重定向

`example.com/e/t/y/`

我希望它重新映射到`example.com/e/index.php?mode=t&type=y`

我目前的代码是：

```
RewriteEngine on
RewriteRule ^e/(.*)/(.*)/$ e/index.php?mode=$1&type=$2 
```

我知道如何做一个或另一个，但不能同时做，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:55:19.140

```
RewriteEngine on
RewriteRule ^e/(.*)/(.*)/$ e/index.php?mode=$1&type=$2
RewriteRule ^e/(.*)/$ e/index.php?mode=$1 
```

# scala - 用宏写数组填充

> ID：12018205
> 
> 赞同：3
> 
> 时间：2012-08-18T11:34:58.550
> 
> 标签：scala, macros

我正在尝试编写一个函数，该函数使用 scala 宏用给定值填充数组。例如调用：

```
val ary = Array( 0, 1, 2 )
fill3( ary, 50+25 ) 
```

应扩展为：

```
val ary = Array(0, 1, 2 )
{
  val $value = 50+25
  ary(0) = $value
  ary(1) = $value
  ary(2) = $value       
} 
```

这是我的第一次尝试：

```
def fill3( ary: Array[Int], x: Int ) = macro fill_impl3

def fill_impl3( c: Context )
( ary: c.Expr[Array[Int]], x: c.Expr[Int]): c.Expr[Unit] = {
  import c.universe._        
  def const(x:Int) = Literal(Constant(x))

  //Precompute x
  val valName = newTermName("$value")
  val valdef = ValDef( Modifiers(), valName, TypeTree(typeOf[Int]), x.tree )

  val updates = List.tabulate( 3 ){
  i => Apply( Select( ary.tree, "update"), List( const(i), ??? ) )
  }

  val insts = valdef :: updates
  c.Expr[Unit](Block(insts:_*))
} 
```

但是在这里我被困住有两个原因：

1.  我不知道如何获得预先计算的值 ( `$value`)
2.  对于大小为 3、4、6、9 和 27 的数组，我需要其中几个函数。有没有办法干燥定义，或者我应该写`fill3`, `fill4`,`fill6`等。

有正确的方法吗？我怎样才能解决我的两个问题？

**编辑：**我意识到我最初的问题很愚蠢，因为必须在编译时知道大小......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:00:02.787

```
def fill(size:Int, ary: Array[Int], x: Int ) = macro fill_impl

def fill_impl( c: Context )
(size:c.Expr[Int], ary: c.Expr[Array[Int]], x: c.Expr[Int]): c.Expr[Unit] = {
  import c.universe._        
  def const(x:Int) = Literal(Constant(x))

  val Literal(Constant(arySize:Int)) = size.tree

  //Precompute x
  val valName = newTermName("$value")
  val valdef = ValDef( Modifiers(), valName, TypeTree(typeOf[Int]), x.tree )

  val updates = List.tabulate( arySize ){
  i => Apply( Select( ary.tree, "update"), List( const(i), Ident(valName) ) )
  }

  val insts = valdef :: updates
  c.Expr[Unit](Block(insts:_*))
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:10:22.307

`reify`您可以尝试通过与打印其结果的原始树一起使用来弄清楚它：

```
def fill_impl3( c: Context )
( ary: c.Expr[Array[Int]], x: c.Expr[Int]): c.Expr[Unit] = {
  import c.universe._
  val r = reify {
     val $value = x.splice
     val $arr  = ary.splice
     $arr(0)   = $value
     $arr(1)   = $value
     $arr(2)   = $value
  }
  println( showRaw( r.tree ))
  r
} 
```

这给出了类似的东西

```
val vt = newTermName("$value")
val at = newTermName("$arr")
val ut = newTermName("update")
Block(List(
  ValDef(Modifiers(), vt, TypeTree(), ...),
  ValDef(Modifiers(), at, TypeTree(), ...),
  Apply(Select(Ident(at), ut), List(Literal(Constant(0)), Ident(vt))),
  Apply(Select(Ident(at), ut), List(Literal(Constant(1)), Ident(vt)))),
  Apply(Select(Ident(at), ut), List(Literal(Constant(2)), Ident(vt)))
) 
```

# android - 如何在 Android 中存储和检索 Array-list 值？

> ID：12018206
> 
> 赞同：-2
> 
> 时间：2012-08-18T11:34:59.113
> 
> 标签：android, arraylist, bundle

在 Android 中，使用 Bundle 存储和检索数组列表值，但我无法检索此数组列表值，请帮助我

提前致谢

我试过这个：

```
ArrayList<String> al = new ArrayList<String>();                                     
al.add(""+StrValue);                                                                                                                                                                                                                                  
Bundle value= new Bundle();                                                            
value.putStringArrayList("temp1", al);

 ArrayList<String> al = new ArrayList<String>();
 Bundle bundle =new Bundle();
 System.out.println("Retrieve Values are: "+bundle.getStringArrayList("temp1"));

Finally i got the result is Retrieve Values are (null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:41:01.283

```
Intent i = new Intent(this,name.class);
i.putStringArrayListExtra("stringname", value);
startActivity(i); 
```

并将数据获取到 Tabbar 活动中，例如

```
Bundle extras = getIntent().getExtras();
    if (extras != null) {
        ArrayList<String> value = extras.getStringArrayList("stringname");
        Log.e(" array list value ", "" + value.size());
    } 
```

和标签栏设置 Intent 之类的

```
TabHost.TabSpec spec;
spec = tabHost.newTabSpec("text");
Intent intent = new Intent(this, TargetActivity.class); 
intent.putStringArrayListExtra("string", value);
spec.setContent(intent);
tabHost.addTab(spec); 
```

并将数据输入到 TargetActivity 中，例如，

```
Bundle extras = getIntent().getExtras();
    if (extras != null) {
        ArrayList<String> value = extras.getStringArrayList("string");
        Log.e(" array list value ", "" + value.size());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:55:37.823

您正在初始化一个新的 Bundle。您应该使用您存储的同一个包。

```
 Bundle bundle =new Bundle(); 
```

而是做

```
 Bundle bundle  = value; 
```

# r - R：在没有明确唯一日期的情况下重塑不规则时间序列数据

> ID：12018211
> 
> 赞同：1
> 
> 时间：2012-08-18T11:35:33.387
> 
> 标签：r, reshape

我正在研究阅读每月时间序列数据的方法，这些数据没有以“日期”列和“数据”列的宽格式整齐排列。例如，[SEMI](http://www.sia-online.org/clientuploads/directory/IndustryStatistics/GSR1976-June%202012.xls)的这个电子表格有按月份和地区组织的数据块，但年份是分开的并且在不连续的块中，以 YYYY 形式作为每个块前面的标题的年份。

![非连续数据](../Images/754d3744d5c0e88d42fd2e7a041bde62.png)

我的目标是将此数据转换为连续块，其中第 1 列中的月度日期和第 2:6 列中的区域数据。将此电子表格导出为制表符分隔文件后（我发现两者`gdata`都有`XLConnect`问题，您可以在屏幕截图中看到的那种合并单元格存在问题）我读了它并获取了一个子集，这是`dput`下面的源代码。

我采取了首先使用以下方法去除空行的方法：

```
mydf <- mydf[which(grepl("^$", mydf$January) == FALSE),] 
```

然后在 Region 列中为具有年份的行添加一个标签 - 方便地，它总是出现在第二个（'January'）列中。

```
mydf[which(nchar(mydf$January) == 4) ,'Region'] <- 'mydate' 
```

下一步是用每月日期填充这些“年”行中从 1 月到 12 月的列。我想一旦我每个月都有一个唯一的日期，我就可以使用`ddply`或其他东西来处理它。

```
mydf[which(mydf$Region == 'mydate'), 2:13] <- apply(mydf[which(mydf$Region == 'mydate'), 2:13], 1, function(x) as.character(seq(as.Date(paste(x['January'],"-01-01", sep = "")), as.Date(paste(x['January'],"-12-01", sep = "")), by = 'month'))) 
```

这并没有像我预期的那样工作，因为该`apply`函数没有按照我希望的方式生成日期 - 它们不是按顺序排列的。我将非常感谢（a）`apply`步骤的特定修复或（b）可能更简单或更容易的替代方法。

数据和代码如下：

```
mydf <- structure(list(Region = c("", "Americas", "Europe", "Japan",
"Asia Pacific", "Worldwide", "", "", "Americas", "Europe", "Japan",
"Asia Pacific", "Worldwide", "", "", "Americas", "Europe", "Japan",
"Asia Pacific", "Worldwide", "", "", "", "Americas", "Europe",
"Japan", "Asia Pacific", "Worldwide", "", "", "Americas", "Europe",
"Japan", "Asia Pacific", "Worldwide"), January = c("1980", "413136",
"189577", "34033", "39868", "676614", "", "1981", "445504", "277290",
"33970", "44642", "801406", "", "1982", "445300", "226274", "34404",
"44989", "750967", "", "January", "1983", "457604", "232443",
"34326", "46247", "770621", "", "1984", "731009", "285740", "205644",
"85426", "1307820"), February = c("", "423748", "234818", "35104",
"42398", "736069", "", "", "440225", "274526", "33795", "44005",
"792550", "", "", "438332", "226806", "33359", "44020", "742517",
"", "February", "", "457899", "233560", "32604", "46184", "770247",
"", "", "790963", "307735", "381282", "102791", "1582770"), March = c("",
"436152", "281353", "34456", "46555", "798516", "", "", "434628",
"267259", "33709", "45206", "780802", "", "", "441313", "235612",
"32380", "43600", "752905", "", "March", "", "459498", "234986",
"31544", "48178", "774206", "", "", "856970", "339674", "574527",
"118091", "1889262"), April = c("", "455673", "288710", "34451",
"48585", "827419", "", "", "443285", "264405", "34823", "47192",
"789705", "", "", "465613", "246425", "33618", "46274", "791930",
"", "April", "", "484299", "243867", "32719", "52333", "813218",
"", "", "909873", "364465", "627400", "126954", "2028693"), May = c("",
"474441", "297343", "35092", "51102", "857977", "", "", "451221",
"255887", "35499", "48459", "791065", "", "", "487738", "249522",
"34339", "47727", "819325", "", "May", "", "507807", "246136",
"34708", "59300", "847950", "", "", "969553", "382706", "655862",
"133455", "2141576"), June = c("", "475552", "299427", "35743",
"51440", "862162", "", "", "453152", "242889", "35798", "48147",
"779986", "", "", "488564", "241273", "34360", "48871", "813068",
"", "June", "", "528620", "246710", "37345", "62910", "875586",
"", "", "991274", "388697", "672773", "135550", "2188294"), July = c("",
"473007", "302075", "37771", "51027", "863880", "", "", "454387",
"231097", "35402", "47468", "768353", "", "", "480702", "229555",
"33915", "49112", "793284", "", "July", "", "543063", "241211",
"40403", "66658", "891335", "", "", "1005742", "395852", "683854",
"138853", "2224302"), August = c("", "462125", "294497", "37628",
"49773", "844023", "", "", "450648", "213017", "34363", "46614",
"744642", "", "", "472486", "215763", "32866", "48620", "769734",
"", "August", "", "565034", "236353", "42524", "66853", "910763",
"", "", "1010739", "393337", "691731", "141101", "2236908"),
    September = c("", "461968", "295501", "37310", "50280", "845059",
    "", "", "459276", "215403", "33801", "47297", "755777", "",
    "", "475729", "219643", "33083", "47540", "775994", "", "September",
    "", "593019", "244979", "44108", "70242", "952348", "", "",
    "1035725", "408658", "698992", "141944", "2285320"), October = c("",
    "459862", "296522", "36399", "51220", "844003", "", "", "465096",
    "218792", "34168", "47369", "765424", "", "", "467151", "225828",
    "33667", "47890", "774536", "", "October", "", "618854",
    "259807", "47622", "71345", "997628", "", "", "1033560",
    "421043", "710563", "140154", "2305320"), November = c("",
    "456832", "296283", "35769", "50531", "839415", "", "", "467288",
    "232593", "35039", "47415", "782335", "", "", "461950", "237117",
    "35672", "47285", "782024", "", "November", "", "641864",
    "275099", "50371", "72095", "1039428", "", "", "1008836",
    "441652", "732948", "133861", "2317297"), December = c("",
    "460343", "291348", "35781", "48298", "835771", "", "", "460574",
    "231461", "35971", "47173", "775179", "", "", "462919", "235861",
    "36251", "47974", "783006", "", "December", "", "672533",
    "276525", "54603", "74717", "1078379", "", "", "982210",
    "442448", "731546", "132982", "2289187")), .Names = c("Region",
"January", "February", "March", "April", "May", "June", "July",
"August", "September", "October", "November", "December"), row.names = 29:63, class = "data.frame")

mydf <- mydf[which(grepl("^$", mydf$January) == FALSE),] # remove rows with nothing in the January column
mydf[which(nchar(mydf$January) == 4) ,'Region'] <- 'mydate' # add a row label for 'year' rows

mydf[which(mydf$Region == 'mydate'), 2:13] <- apply(mydf[which(mydf$Region == 'mydate'), 2:13], 1, function(x) as.character(seq(as.Date(paste(x['January'],"-01-01", sep = "")), as.Date(paste(x['January'],"-12-01", sep = "")), by = 'month'))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:35:27.640

您可以使用`xlsReadWrite`和`reshape2`

```
 library(xlsReadWrite)
 tdata<-read.xls('GSR1976-June 2012.xls',stringsAsFactors=F)
 tdata[85,2]<-1987 # fix for missing year
 tdata[228,2]<-2007 # fix for missing year
 year.marker<-c(grep('^[[:digit:]]{4}$',tdata[,2]),270)

 temp.df<-NULL

 for(i in seq_along(year.marker)[-length(year.marker)]){
   dum.df<-cbind(tdata[year.marker[i],2],tdata[(year.marker[i]+1):(year.marker[i+1]-2),])
   temp.df<-rbind(temp.df,dum.df)
 }

 names(temp.df)<-c('year','region',month.name)

 df1<-temp.df[!temp.df[,'region']=='',]
 library(reshape2)
 df2<-melt(df1, id.vars=c("region", "year")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T12:28:32.217

我采取了以下方法：

首先，我将您的文件转换为 CSV，然后读取其中的行。我曾经`grep()`找到“Americas”，这是每组的第一行。我手动输入了开始和结束年份，但其中一些`grep`可能也可以使用。

```
temp = readLines("GSR1976-June 2012.csv")
START = grep("Americas", temp)
YEARS = 1976:2012 
```

之后，我创建了一个`data.frame`s 列表，每年一个。

```
temp1 = lapply(1:length(YEARS), 
               function(x) read.csv("GSR1976-June 2012.csv",
                                    header=FALSE, skip=START[x]-1,
                                    nrows=5))
names(temp1) = YEARS 
```

然后，我将它们合二为一`data.frame`并进行了一些清理。

```
temp2 = do.call(rbind, temp1)
names(temp2) = c("region", "jan", "feb", "mar", "apr", "may", "jun",
                 "jul", "aug", "sep", "oct", "nov", "dec")
temp2$year = rep(YEARS, each=5) 
```

您没有指定要进行哪种类型的重塑，但如果您想从宽变长，最简单的方法是使用`reshape2`包：

```
library(reshape2)
temp3 = melt(temp2, id.vars=c("region", "year"))
list(head(temp3), tail(temp3))
# [[1]]
#         region year variable  value
# 1     Americas 1976      jan     NA
# 2       Europe 1976      jan     NA
# 3        Japan 1976      jan     NA
# 4 Asia Pacific 1976      jan     NA
# 5    Worldwide 1976      jan     NA
# 6     Americas 1977      jan 195638
# 
# [[2]]
#            region year variable    value
# 2215    Worldwide 2011      dec 23832532
# 2216     Americas 2012      dec       NA
# 2217       Europe 2012      dec       NA
# 2218        Japan 2012      dec       NA
# 2219 Asia Pacific 2012      dec       NA
# 2220    Worldwide 2012      dec       NA 
```

然后，对于*听起来*您正在寻找的输出，请使用`dcast()`：

```
temp4 = dcast(temp3, year + variable ~ region)
head(temp4)
#   year variable Americas Asia Pacific Europe Japan Worldwide
# 1 1976      jan       NA           NA     NA    NA        NA
# 2 1976      feb       NA           NA     NA    NA        NA
# 3 1976      mar   178295        16761  55602 10805    261463
# 4 1976      apr   178961        16513  60959 11589    268022
# 5 1976      may   187076        17396  62329 12435    279235
# 6 1976      jun   193675        17712  61676 14411    287475 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T19:18:04.173

**使用XLConnect**可以轻松地直接从 Excel 文件处理上述数据集，如下所示：

```
require(XLConnect)
require(reshape2)

# Load Excel workbook
wb = loadWorkbook("~/Downloads/GSR1976-June 2012.xls")

# Read data from 1st worksheet, starting at row 7 with predefined column types
data = readWorksheet(wb, sheet = 1, startRow = 7, 
    colTypes = c("character", rep("numeric", 12)))
# Rename first column and keep month names
colnames(data)[1] = "Region"
months = names(data)[-1]

# The data of merged cells (years) is in the first cell of the merged region
years = ifelse(is.na(data$Region), data$January, NA)
idx = !is.na(years)

# Replicate year information to form a new column 'Year'
data$Year = rep(years[idx], times = diff(c(which(idx), length(years) + 1)))

# Remove any rows where 'Region' is missing (^= non-data rows)
data = data[!is.na(data$Region), ]

# Reshape (wide --> long)
data = melt(data, measure.vars = months, variable.name = "Month") 
```

# java - GAE，JDO：如何缓存没有子实体的父实体

> ID：12018212
> 
> 赞同：0
> 
> 时间：2012-08-18T11:35:36.927
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo

我有一个问题，每当我加载父实体（`User`在我的情况下）并将其放入**缓存时，**它的所有子实体（在**拥有**关系中）也会被缓存。

如果我没记错的话，解释很简单：序列化过程涉及对象的所有属性，这导致所有子对象也被获取。最终，整个实体组被获取。

我该如何避免呢？用户实体组计划包含相当多的信息，我不想一次全部缓存。更不用说一次获取所有子对象真的很费力。

我遇到了`transient`修饰符并高兴了一段时间，直到我意识到，它不仅可以阻止某些字段被缓存，还可以阻止这些字段变得持久。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:44:04.350

所以答案是使用实体的**分离版本**。我使用一个现在看起来像这样的函数加载所有实体：

```
@SuppressWarnings("unchecked")
E cachedEntity = (E) cache.get(cacheKey);

if (cachedEntity != null) {
    entity = cachedEntity;          
}
else {
    entity = pm.getObjectById(Eclass, key);
    cache.put(cacheKey, pm.detachCopy(entity));
} 
```

缺点是，当我想获取子对象时，我必须显式附加实体，使用`entity = pm.makePersistent(entity)`它生成`Datastore.GET`RPC。然而，这不会经常发生，而且很可能我只想访问实体本身，而不是它的子对象，因此它非常有效。

我遇到了一个更好的解决方案。附加实体时存在一个 RPC 调用，因为 JDO 检查实体是否真的存在于数据存储中。根据**DataNucleus**文档，只需在 PMF 中设置`datanucleus.attachSameDatastore`为即可将其关闭。`false`但是它对我不起作用，`Datastore.GET`在附加对象时总是被调用。如果它有效，我可以在从缓存中以零成本获取它之后隐式附加每个对象，并且我不必在需要时手动执行它。

# zend-framework - magento中的图片网址问题

> ID：12018217
> 
> 赞同：1
> 
> 时间：2012-08-18T11:36:08.957
> 
> 标签：zend-framework, magento, magento-1.7

我必须使用 zend_PDF 生成产品图像的 pdf。我试过下面的代码

```
 $path=$this->getImageUrl($_product) 

 $imagePath=$path;
 $image = Zend_Pdf_Image::imageWithPath($imagePath);
 $page->drawImage($image, 40,764,240, 820); 
```

这不起作用。任何人都可以帮助我如何正确提供产品图片的网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:45:31.300

你的代码是错误的。在这条线上。

```
$path = $this->getImageUrl($_product); 
```

试试这个正确的：

```
$path = $_product->getImageUrl(); 
```

并查看此[参考链接](https://stackoverflow.com/questions/5016962/zend-pdf-imageimagewithpath-from-url)

# php - sql 如果语句语法帮助请

> ID：12018220
> 
> 赞同：1
> 
> 时间：2012-08-18T11:36:25.843
> 
> 标签：php, sql

```
 <?php 
include 'dbc.php';

?>
 <?php session_start();
 $id = $_SESSION['user_id'];
 //$update = Reminder1;
// $rt1 = Reminder1;
// $mm1 = Reminder1;

 mysql_connect("localhost", "user", "pass") or die(mysql_error()); 
 mysql_select_db("database") or die(mysql_error()); 
 $data = mysql_query("SELECT reminder FROM users WHERE $id = id)") 
 or die(mysql_error()); 

if EXISTS (reminder == Reminder1)') {
echo("Update Your Pasword reset reminder page");
}
else {
echo("redirect to /home.php");
}

?> 
```

任何人都可以帮助我解决为什么会失败，会很棒，我已经为此工作了一段时间，感觉就像我正在打砖墙哈哈。我仍在测试中，所以 to echos 将在它处于工作状态时立即进行编辑，所以现在忽略它们行，我把它都留在了例子中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:50:33.393

[**`Why is the MySQL extension (ext/mysql) discouraged from use?`**](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)

```
<?php
session_start();
$id = $_SESSION['user_id'];

$DB = new PDO('mysql:dbname=database;host=localhost', 'user', 'pass');
$stmt = $DB->prepare('SELECT reminder FROM users WHERE id = ?');
$stmt->execute(array($id));
$result = $stmt->fetch(PDO::FETCH_ASSOC);

if ($result == 'Reminder1') {
    echo 'Update Your Pasword reset reminder page';
} else {
    header('Location: /home.php');
}
?> 
```

另见：

*   [控制结构](http://www.php.net/manual/en/language.control-structures.php)
*   [`if`控制结构](http://php.net/manual/en/control-structures.if.php)
*   [标头（）函数](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:44:11.680

获取数据

```
mysql_connect("localhost", "user", "pass") or die(mysql_error()); 
mysql_select_db("database") or die(mysql_error()); 
$data = mysql_query("SELECT reminder FROM users WHERE id='".$id."' LIMIT 1") or die(mysql_error()); 
$row = mysql_fetch_assoc($data);

if($row['reminder'] == 'Reminder1') {
    header("Location: /reset_password.php");
}
else {
    header("Location: /home.php");
}

// but you should use PDO
$dbh = new PDO('mysql:host=localhost;dbname=database', 'user', 'pass');
$sth = $dbh->prepare("SELECT reminder FROM users WHERE id=:id LIMIT 1");
$sth->execute(array(':id' => $id));
$sth->setAttribute(PDO::FETCH_ASSOC);
$row = $sth->fetch();

if($row['reminder'] == 'Reminder1') {
    header("Location: /reset_password.php");
}
else {
    header("Location: /home.php");
} 
```

# java - JavaFX 2.2 从头开始 控制

> ID：12018223
> 
> 赞同：13
> 
> 时间：2012-08-18T11:36:32.100
> 
> 标签：java, user-interface, javafx, javafx-2

有谁知道为什么互联网上有这么多关于使用 com.sun 中的 SkinBase 和 BehaviorBase 类在 JavaFX 中创建自己的自定义控件的示例？他们为什么使用？为什么在 FXEnsemble 中没有这样的实现？有没有这方面的最佳实践？您能否解释一下为什么我应该使用 BehaviorBase 和 SkinBase 进行自定义控制？提前致谢。

**更新：**

我遇到了这个视频 - [http://www.parleys.com/#st=5&id=2789&sl=1](http://www.parleys.com/#st=5&id=2789&sl=1)，它指的是自定义控件的创建。作者谈到了公共（控制和皮肤）和私有 API，实际上行为是一个私有 API。使用com.sun的BehaviorBase和SkinBase是否合适，官方文档中没有描述？

**更新 2：**

SkinBehaviour 和 JavaFX 8：[http ://mail.openjdk.java.net/pipermail/openjfx-dev/2013-February/005874.html](http://mail.openjdk.java.net/pipermail/openjfx-dev/2013-February/005874.html)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-22T21:02:35.607

*原始答案*

有一个重要的功能请求来[改进对构建自定义控件的支持，这些控件](https://bugs.openjdk.java.net/browse/JDK-8092194)旨在交付给下一个主要 JavaFX 版本（JavaFX 8.0/JDK 8.0）。

在 BehaviourBase 和 SkinBase API 公开并且构建您自己的自定义控件所需的其他工作（例如自定义 css 属性和伪类的定义）公开为公共 API 之前，关于使用这些类的最佳建议是 Richard Bair，[JavaFX 平台](https://forums.oracle.com/forums/thread.jspa?messageID=10111494)负责人：

> 如果您的意图是编写一个新控件以提交到 openjfx 。. . 那么一定要使用这些类。如果您正在编写一个旨在与平台的未来版本一起使用的应用程序并且您不想破坏，那么不要使用这些类。

在任何情况下，使用 BehaviourBase 和 SkinBase API 可能最适合由控件库创建者构建的控件（例如为[open-jfx](http://openjdk.java.net/projects/openjfx/)项目构建以包含到核心 JavaFX api 中的控件，或之前链接的[jfxtras](http://jfxtras.org/)项目）回答）。许多可重用的自定义应用程序组件不需要使用这些类引入的复杂性。

除非您正在为库创建通用平台控件，否则您不需要子类[Control](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Control.html)可能最好采用以下路线之一：

1.  使用现有控件并通过 CSS 事件及其公共 API 对其进行自定义。
2.  子类化现有控件以执行更彻底的更改。
3.  创建您自己的类，该类将容器子类化，例如[Group](http://docs.oracle.com/javafx/2/api/javafx/scene/Group.html)或布局[Pane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Pane.html)子类。在您的子类中处理布局并封装多个 JavaFX 节点和控件的行为。

有关从 Container 创建自定义、可重用组件的示例，请参阅 FXML 简介文档的[自定义组件部分](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#custom_components)。有关对现有控件进行子类化的示例，请参见[JavaFX 时钟](https://gist.github.com/3388637)示例中的 DigitalClock 类。

*更新*

在我写完这个答案之后，我查看了从更新的答案链接的[控件创建演示文稿](http://www.parleys.com/#st=5&id=2789&sl=13)，它提出了与这个答案相同的建议。我会向任何对 JavaFX 控件创建主题感兴趣的人推荐该演示文稿。

*2014 年 12 月更新*

Java 8 中已经完成了大部分工作，以创建公共 API 以使用 JavaFX 框架类创建控件。因此，可以构建您自己的自定义控件，这些控件扩展[Control](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Control.html)或 Control 子类并使用[SkinBase](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/SkinBase.html)。这样的控件在结构和 API 上类似于标签、按钮等内置 JavaFX 控件。有关如何执行此操作的一些信息以[非正式方式记录在 open-jfx wiki 上](https://wiki.openjdk.java.net/display/OpenJFX/Controls)，尽管 Oracle 尚未在[JavaFX 主文档页面](http://docs.oracle.com/javase/8/javase-clienttechnologies.htm)上提供了有关创建此类控件的完整官方文档。

未最终确定为公共 API 的 API 的一部分是 BehaviourBase 类，该类通常用于处理一些跨平台特定的任务实现，例如用于控件的加速键命令，但是您仍然可以使用基本 JavaFX 键处理事件或第三方诸如 ControlsFX [Action](http://controlsfx.bitbucket.org/org/controlsfx/control/action/Action.html)之类的库来实现此类行为，这样您的代码就不需要使用可能在未来 Java 版本中更改的私有 API。我相信 BehaviourBase 功能目前计划在 Java 9 时间范围内转移到公共 API 类。

如原始答案中所述，除非您为库创建通用平台控件，否则您不需要子类 Control（无论 JavaFX 8 或 9 中的新控件创建工具如何，都是如此）。

*2016 年 3 月更新*

对于 Java 9，已创建 Java 增强建议 (JEP) 和相关的 Java 错误跟踪器问题：

*   [JEP 253：为模块化准备 JavaFX UI 控件和 CSS API](http://openjdk.java.net/jeps/253)
*   [JDK-8076423](https://bugs.openjdk.java.net/browse/JDK-8076423)

这项工作的目的是：

> 为 JavaFX UI 控件和 CSS 功能定义公共 API，这些功能目前只能通过内部 API 使用，因此由于模块化而无法访问。

链接的 JEP 和错误跟踪器文档中提供了有关自定义控件支持的 API 更改的更多信息。

包含新 API 更改的 Java 9 早期访问版本[可供下载](https://jdk9.java.net/download/)和测试。

请注意，公共行为 API 不是 Java 9 的一部分，目前计划在 Java 10 中实现：

*   [JDK-8091189 将 BehaviorBase 移动到公共 API](https://bugs.openjdk.java.net/browse/JDK-8091189)

*其他资源*

如果您想深入了解自定义 JavaFX 控件，您可能希望查看 Hendrik Ebbers 关于该主题的书（我没有读过这本书）：

*   [掌握 JavaFX 8 控件（甲骨文出版社）](https://rads.stackoverflow.com/amzn/click/com/0071833773)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T11:00:22.877

您可能想看看 JFXtras 项目 ( [http://jfxtras.org](http://jfxtras.org) )。在那里，您会发现许多使用 SkinBase 和 BehaviorBase 的自定义 JavaFX 控件。控件的源代码可以在 github 上找到[https://github.com/JFXtras](https://github.com/JFXtras)

# sqlite - 如何在执行 SELECT 时将 varchar 转换为日期时间？

> ID：12018224
> 
> 赞同：0
> 
> 时间：2012-08-18T11:36:41.500
> 
> 标签：sqlite

以下是以 varchar 形式存储在表中的日期时间值。我想在 SELECT sql 中使用它时将它们转换为日期时间。

2012 年 8 月 14 日上午 7:52:32 2012 年 8 月 16 日上午 3:34:22 2012 年 8 月
14 日上午
9:04:03

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T02:58:06.733

[SQLite 不支持原生日期时间数据类型](http://www.sqlite.org/datatype3.html)。

> SQLite 没有为存储日期和/或时间预留存储类。相反，SQLite 的内置日期和时间函数能够将日期和时间存储为 TEXT、REAL 或 INTEGER 值：

您可以使用[strftime() 或 datetime()获得所需](http://www.sqlite.org/lang_datefunc.html)*格式*的输出。

# java - Jackson（反）序列化对象作为其 id

> ID：12018227
> 
> 赞同：1
> 
> 时间：2012-08-18T11:37:02.467
> 
> 标签：java, json, jackson

给定 POJO：

```
@XmlRootElement
public class Categories implements Serializable {
    private int id;    
    private String name;

    private Categories parent;

    // ....    

} 
```

我想将其序列化为以下 json：

```
{ id: 1, name: "some name", parent: 5 } 
```

因此，这里的主要挑战是将父对象表示为其 id。我想要反序列化同样的事情。

我扫描了相当大的 Jackson wiki，没有找到任何可以在不编写过多自定义代码的情况下完成此任务的东西。我认为这是很常见的任务，解决方案应该在附近的某个地方。

如果解决方案允许自定义空值情况，那就太好了。

**升级版：**

现在尝试使用`XmlTypeAdapter`approch，但对它不满意，因为我需要为我拥有的每一种类型编写 TypeAdapter，并且它们都将包含几乎相同的代码：

```
public class CategoriesTypeAdapter extends XmlAdapter<Integer, Categories> {

    @Inject
    CategoriesFacade dao;

    @Override
    public Categories unmarshal(Integer v) throws Exception {
        return dao.find(v);
    }

    @Override
    public Integer marshal(Categories v) throws Exception {
        return v.getId();
    }
} 
```

Categories.java 的变化：

```
 @XmlJavaTypeAdapter(CategoriesTypeAdapter.class)
    private Categories parent; 
```

**UPD1：**

这对我也不起作用，至少反序列化现在总是返回 null 代替对象，不知道如何调试这个：对于这个 JSON：

```
{ id: 1, name: "test", parent: 5 } 
```

我现在让父母总是空的：

```
Categories{categoryId=1, name="test", parentId=null} 
```

**UPD2：**

我发现这是我在这个问题上的失败，只是没有正确设置东西，而且我的 web.xml 缺少这个条目：

```
<servlet>
    <servlet-name>Jersey Web Application</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.neopod.rest</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
</servlet> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T17:21:16.697

有两种方法可能有效，具体取决于确切的语义。

首先是使用注释对`@JsonManagedReference`/ `@JsonBackReference`，其中第一个用于“向前”属性，第二个用于“向后”引用。在这些情况下，第二个属性不包含在序列化中，但会在反序列化期间恢复。这适用于简单的分层对象。

第二个是`@JsonIdentityInfo`（在 2.0 中添加），它增加了对任意对象引用的支持，无论方向如何。它通过序列化每个对象来工作，因为它是第一次看到的；但在后来的引用中将它们序列化为 id。反序列化会自动恢复链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T12:10:18.283

使用正确的字段访问权限`Categories`

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.NONE)
public class Categories implements Serializable {

    @XmlElement
    Integer categoryId;

    @XmlElement
    String name;

    Categories parentId;

    public Integer getCategoryId() {
        return categoryId;
    }

    public String getName() {
        return name;
    }

    @XmlElement
    public Integer getParentId()
    {
        return parentId == null ? null : parentId.getCategoryId();
    }
} 
```

测试

```
Categories c = new Categories();
c.categoryId = 1;
c.name = "name";
Categories c1 = new Categories();
c1.categoryId = 2;
c.parentId = c1;
System.out.println(new ObjectMapper().writeValueAsString(c)); 
```

输出

```
{"categoryId":1,"parentId":2,"name":"name"} 
```

**编辑：**
做两个gatters。@XmlRootElement @XmlAccessorType(XmlAccessType.NONE) 公共类类别实现可序列化{

```
 @XmlElement
    Integer categoryId;

    @XmlElement
    String name;

    Categories parentId;

    public Integer getCategoryId() {
        return categoryId;
    }

    public String getName() {
        return name;
    }  
    public Category getParentId()
    {
        return parentId;
    }

    @XmlElement(name = "parentId")
    Integer getParentIdForJSON()
    {
        return parentId == null ? null : parentId.getCategoryId();
    }  

} 
```

# python - 如何避免在 Python 中覆盖信号处理程序？

> ID：12018232
> 
> 赞同：5
> 
> 时间：2012-08-18T11:38:15.363
> 
> 标签：python, signals

我的实验代码是这样的：

```
import signal

def hi(signum, frame):
    print "hi"

signal.signal(signal.SIGINT, hi)
signal.signal(signal.SIGINT, signal.SIG_IGN) 
```

`hi`没有被打印出来，因为信号处理程序被`signal.SIG_IGN`.

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T12:34:38.943

您可以尝试检查是否已经有处理程序。如果是这样，请将您想要的处理程序和旧处理程序放在调用它们的包装函数中。

```
def append_signal(sig, f):

    old = None
    if callable(signal.getsignal(sig)):
        old = signal.getsignal(sig)

    def helper(*args, **kwargs):
        if old is not None:
            old(*args, **kwargs)
        f(*args, **kwargs)

    signal.signal(sig, helper) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T11:47:07.140

如果您不想覆盖自己的处理程序，请检查您是否设置了一个：

```
if signal.getsignal(signal.SIGINT) in [signal.SIG_IGN, signal.SIG_DFL]:
    signal.signal(signal.SIGINT, hi) 
```

根据[文档](http://docs.python.org/library/signal.html#signal.getsignal)，某些高级进程可能已经从默认值中重新分配了处理程序。如果您不想覆盖它，请添加`None`到信号列表中。

显而易见的包装`signal.signal(..., signal.SIG_IGN)`将是一个`not in`测试。

**添加以回应评论**

链接信号处理程序并不经常这样做，因为信号是如此精细。如果我真的想这样做，我会遵循[atexit](http://docs.python.org/library/atexit.html)的模型并注册您的处理程序调用的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-14T10:31:20.993

只需执行与在 C 中相同的操作：

```
sig_hand_prev = None

def signal_handler(signum, frame):
  ...
  signal.signal(signum, sig_hand_prev)
  os.kill(os.getpid(), signum)

def install_handler(signum):
  global sig_hand_prev
  sig_hand_prev = signal.signal(signum, signal_handler) 
```

这里的关键思想是你只保存前一个处理程序并在你完成你的东西时再次提出它。这样，信号处理是一个单链表OOB。

# javascript - jQuery中的样式切换器没有页面刷新

> ID：12018235
> 
> 赞同：-1
> 
> 时间：2012-08-18T11:38:47.083
> 
> 标签：javascript, jquery

我现在有一个具有 default.css 样式的页面
我有一个 style1.css 文件，另一个是 style2.css 文件。
我有一个 UI 下拉列表，其中有两个选项。

当我选择一个然后应用 style1.css 和其他相同的东西。

页面不应刷新。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:45:33.103

鉴于您没有特定的上下文，我建议您考虑使用 jQuery [**toggleClass()**](http://api.jquery.com/toggleClass/)。

假设您有这样的 HTML，其中本示例中的 div 使用默认样式`style1`，并且按钮将切换样式：

```
<div id="myDiv" class="style1"></div>
<button id="myButton">Switch Styles</button> 
```

除了`style1`你还定义了另一种风格，比如`style2`这样：

```
.style1{
    width: 100px;
    height: 100px;
    border: 1px solid red;
}

.style2{
    width: 200px;
    height: 150px;
    border: 3px solid blue;
} 
```

​要在单击按钮时切换它们，`toggleClass()`您可以这样做：

```
$(document).ready(function(){
    $("#myButton").on("click", function(){
        $("#myDiv").toggleClass("style2");
    });
}); 
```

见[**演示**](http://jsfiddle.net/6mY8e/)

当然，您可以从任何地方触发切换，而不仅仅是按钮，这只是一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:40:47.633

查看[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)和[http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

# android - 在android中改变mp3文件的速度

> ID：12018236
> 
> 赞同：2
> 
> 时间：2012-08-18T11:38:49.727
> 
> 标签：android, android-ndk, mp3

我想在不改变音高的情况下改变 mp3 文件的速度。我有 mp3 文件的字节数组，想改变它的速度并用 sdcard 中增加或减少的速度保存它。我搜索了很多，人们正在关注 Lame 库和 ffmpeg。是否可以使用 android 中音频 mp3 文件的 lib ffmpeg 或 lib Lame 更改速度。如果是，那么如何在 Windows 上编译 ffmpeg 或 Lame。在编写 android.mk 和包装类时需要帮助。帮帮我谢谢

编辑

[我已经在这个Link](https://github.com/yhirano/SimpleLameLibForAndroid/tree/master/SimpleLameLibForAndroid)的帮助下成功编译了 lib lame 。但仍然不知道如何使用那些本地方法（写在 Encoder.java 文件中）来改变 mp3 文件的速度。作为android的新手，需要正确的方向才能进入正确的方向来解决我的问题。我在 android 市场上看到了一个名为 xSpeedPlayer 的应用程序。这个应用程序改变了 mp3 的速度并将新文件保存到 sdcard 中。这也是我想在我的应用程序中实现的目标。然后我搜索了他们如何在 xSpeedPlayer 中实现这一点，发现他们正在使用 mp3Lame 和 mpg123 库。但不知道他们是如何使用这些库完成的。现在我需要帮助才能前进。

编辑

我有 Mp3 文件的 pcm 数据，并且有 LAME lib 的原生数学，它们是..（但不知道如何使用这些方法来改变节奏）

```
/**
 * Initialize LAME.
 * 
 * @param inSamplerate input sample rate in Hz.
 * @param outChannel number of channels in input stream.
 * @param outSamplerate output sample rate in Hz.
 * @param outBitrate brate compression ratio in KHz.
 * @param quality quality=0..9\. 0=best (very slow). 9=worst.<br />
 *            recommended:<br />
 *            2 near-best quality, not too slow<br />
 *            5 good quality, fast<br />
 *            7 ok quality, really fast
 * @param id3tagTitle ID3 Tag title.
 * @param id3tagArtist ID3 Tag artist.
 * @param id3tagAlbum ID3 Tag album.
 * @param id3tagYear ID3 Tag year.
 * @param id3tagComment ID3 Tag comment.
 */
public native static int init(int inSamplerate, int outChannel,
        int outSamplerate, int outBitrate, int quality, String id3tagTitle,
        String id3tagArtist, String id3tagAlbum, String id3tagYear,
        String id3tagComment);

/**
 * Encode buffer to mp3.
 * 
 * @param instanceIndex Instance index.
 * @param buffer_l PCM data for left channel.
 * @param buffer_r PCM data for right channel.
 * @param sambles number of samples per channel.
 * @param mp3buf result encoded MP3 stream. You must specified
 *            "7200 + (1.25 * samples)" length array.
 * @return number of bytes output in mp3buf. Can be 0.<br />
 *         -1: mp3buf was too small<br />
 *         -2: malloc() problem<br />
 *         -3: lame_init_params() not called<br />
 *         -4: psycho acoustic problems
 */
public native static int encode(int instanceIndex, short[] buffer_l, short[] buffer_r,
        int samples, byte[] mp3buf);

/**
 * Encode buffer L & R channel data interleaved to mp3.
 * 
 * @param instanceIndex Instance index.
 * @param pcm PCM data for left and right channel, interleaved.
 * @param sambles number of samples per channel. <strong>not</strong> number
 *            of samples in pcm[].
 * @param mp3buf result encoded MP3 stream. You must specified
 *            "7200 + (1.25 * samples)" length array.
 * @return number of bytes output in mp3buf. Can be 0.<br />
 *         -1: mp3buf was too small<br />
 *         -2: malloc() problem<br />
 *         -3: lame_init_params() not called<br />
 *         -4: psycho acoustic problems
 */
public native static int encodeBufferInterleaved(int instanceIndex, short[] pcm, int samples,
        byte[] mp3buf);

/**
 * Flush LAME buffer.
 * 
 * @param instanceIndex Instance index.
 * @param mp3buf result encoded MP3 stream. You must specified at least 7200
 *            bytes.
 * @return number of bytes output to mp3buf. Can be 0.
 */
public native static int flush(int instanceIndex, byte[] mp3buf);

/**
 * Close LAME.
 * 
 * @param instanceIndex Instance index.
 */
public native static void close(int instanceIndex); 
```

}

是否可以更改 mp3 原始数据的速度并将其存储在 sdcard 中？帮帮我...感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:38:03.920

恕我直言，您的问题与 ffmpeg 没有直接关系，而是与信号处理有关。

事实上，我会将您的需求分为 3 个部分：1-您需要从 mp3 文件中提取原始数据 2-您需要对这些数据应用一些信号处理算法来改变音高（有趣且困难的任务）3-您需要将新的计算数据转换为 mp3，然后在 SDCard 上相同。

第 1 部分和第 3 部分应该不难通过一些谷歌搜索来解决。

关于第 2 部分，您需要对信号处理基础知识有所了解。我会尝试对您的数据应用快速傅立叶变换，然后在时间尺度上缩放结果以改变您的速度，最后执行逆 FFT。这是在不修改音高的情况下改变速度的唯一方法（afaik）。

希望这可以帮助...

# javascript - 我如何在这个函数中得到“这个”？

> ID：12018238
> 
> 赞同：0
> 
> 时间：2012-08-18T11:38:59.413
> 
> 标签：javascript, jquery, twitter-bootstrap, coffeescript

抱歉，我的 javascript-fu 不够好，无法提出更好的问题。

我正在使用引导程序 (bootstrap-typeahead.js) 的预输入功能，但在[此处](https://gist.github.com/1891669)添加了 Gudbergur Erlendsson 的修改。

我正在使用 onselect 功能，并希望像这样（使用coffeescript）操作在这里输入的输入（我知道这个措辞真的很糟糕）；

```
$('form input').typeahead
  source: list
  onselect: (obj) ->
    $(this).css('background-color','blue') 
```

显然这不起作用，因为`this`它不在 onselect 函数的范围内，但我怎样才能得到它呢？我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:11:54.503

从[要点](https://gist.github.com/1891669#file_bootstrap_typeahead.js)，我们看到：

```
var Typeahead = function ( element, options ) {
  this.$element = $(element) 
```

和这个：

```
select: function () {
  //...
  if (typeof this.onselect == "function")
      this.onselect(val) 
```

和这个：

```
$.fn.typeahead = function ( option ) {
    return this.each(function () {
        //...
        if (!data) $this.data('typeahead', (data = new Typeahead(this, options))) 
```

如果你追踪它，你会发现你`this.$element`的回调中应该有一个：

```
onselect: (obj) ->
    // AFAIK, 'obj' is the thing you selected
    @$element.css('background-color', 'blue') 
```

应该是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:48:55.390

如果`this`在 onselect 函数的作用域外，但不在函数的作用域内，则在函数`that = this`外执行 a，则可以在函数内`that`而不是`this`在函数内引用。如果您有兴趣，请在`that`此处阅读更多信息：[JavaScript 中的私有成员](http://javascript.crockford.com/private.html)

例如：

```
that = this
$('form input').typeahead
  source: list
  onselect: (obj) ->
    $(that).css('background-color','blue') 
```

# xamarin.ios - 将 HtmlAgilityPack 与 MonoTouch 应用程序一起使用会导致参考错误

> ID：12018240
> 
> 赞同：1
> 
> 时间：2012-08-18T11:39:12.130
> 
> 标签：xamarin.ios, html-agility-pack

我正在尝试将 Html Agility Pack 与 MonoTouch 应用程序一起使用，但找不到可以使用它的版本。

[我从CodePlex](http://htmlagilitypack.codeplex.com/releases/view/90925)下载了最新的二进制文件，并尝试使用它包含的每个 DLL 进行构建。当目标是 iPhone 时，不会编译。

添加 .NET 20 库将允许它编译到 iPhone 模拟器，但是当切换到 iPhone 时出现错误：

```
Error MT2002: Can not resolve reference: System.Diagnostics.TraceListener (MT2002) (MFLPlatinum12) 
```

似乎其他人正在将 HtmlAgilityPack 与 MonoTouch 项目一起使用，所以对我缺少什么有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:14:36.323

您是从源代码编译还是直接使用 DLL？

您将需要创建一个新的 MonoTouch 库项目并添加所有文件以使其正常工作。

直接使用 DLL 可能不起作用，因为它不是为 MonoTouch 编译的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:36:00.523

您必须从代码中编译它 下载源代码

进入

```
\htmlagilitypack-99964\Branches\1.4.0\HtmlAgilityPack 
```

`csproj`将更改编辑为

```
<Import Project="$(MSBuildExtensionsPath)\Novell\Novell.MonoDroid.CSharp.targets" /> 
```

保存并加载

修正错误

跟踪 -> 调试

删除块

```
 if (!SecurityManager.IsGranted(new DnsPermission(PermissionState.Unrestricted)))
        {
            //do something.... not at full trust
            try
            {
                RegistryKey reg = Registry.ClassesRoot;
                reg = reg.OpenSubKey(extension, false);
                if (reg != null) contentType = (string)reg.GetValue("", def);
            }
            catch (Exception)
            {
                contentType = def;
            }
        } 
```

删除块

```
 if (SecurityManager.IsGranted(new RegistryPermission(PermissionState.Unrestricted)))
        {
            try
            {
                RegistryKey reg = Registry.ClassesRoot;
                reg = reg.OpenSubKey(@"MIME\Database\Content Type\" + contentType, false);
                if (reg != null) ext = (string)reg.GetValue("Extension", def);
            }
            catch (Exception)
            {
                ext = def;
            }
        } 
```

使用文件夹`dll`中的`bin/debug`

# jsp - 使用 href 链接将参数传递给 servlet

> ID：12018242
> 
> 赞同：0
> 
> 时间：2012-08-18T11:39:19.447
> 
> 标签：jsp, servlets

我有一个`jsp`文件，其中有一个`String`变量 s。现在我想将它传递给`servlet`using `servlet`。在`href`我给的标签中，

```
<a href="link?user= <%=s%> "> click me </a> 
```

但它显示了一个错误，我还能如何发送它。

请帮帮我。。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:47:50.487

这应该可以正常工作，但是这里有一些小错误，我不确定它们是由于此处输入错误还是您的代码中实际存在。

**首先**有你的链接是这样的：

```
<a href="link?user=<%=s%> "> click me </a> 
```

看？没有空间。和你的变量一样`s`，为什么要使用`a`？

**第二个**在您的 servlet 中使用它来接收参数：

```
request.getParameter("s") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:46:17.617

你真的有这样的空间吗？试试这个：>点击我

# java - 验证用户名的正则表达式

> ID：12018245
> 
> 赞同：91
> 
> 时间：2012-08-18T11:39:45.153
> 
> 标签：java, php, html, regex, perl

我正在尝试创建一个正则表达式来根据这些条件验证用户名：

1.  仅包含*字母数字*字符、 *下划线*和*点*。
2.  下划线和点不能位于用户名的*末尾*或 *开头*（例如`_username`/ `username_`/ `.username`/ `username.`）。
3.  下划线和点不能*相邻*（例如`user_.name`）。
4.  下划线或点不能*连续*多次使用（例如`user__name`/ `user..name`）。
5.  字符数必须介于 8 到 20 之间。

这就是我到目前为止所做的；听起来它强制执行所有标准规则*，但第 5 条规则*。我不知道如何将第 5 条规则添加到此：

```
 ^[a-zA-Z0-9]+([._]?[a-zA-Z0-9]+)*$ 
```

* * *

## 回答 #1

> 赞同：365
> 
> 时间：2012-08-18T13:52:40.120

```
^(?=.{8,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$
 └─────┬────┘└───┬──┘└─────┬─────┘└─────┬─────┘ └───┬───┘
       │         │         │            │           no _ or . at the end
       │         │         │            │
       │         │         │            allowed characters
       │         │         │
       │         │         no __ or _. or ._ or .. inside
       │         │
       │         no _ or . at the beginning
       │
       username is 8-20 characters long 
```

* * *

如果您的浏览器由于缺乏负面的后视支持而引发错误，请使用以下替代模式：

```
^(?=[a-zA-Z0-9._]{8,20}$)(?!.*[_.]{2})[^_.].*[^_.]$ 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-18T13:45:54.600

尽管我喜欢正则表达式，但我认为可读性是有限的

所以我建议

```
new Regex("^[a-z._]+$", RegexOptions.IgnoreCase).IsMatch(username) &&
!username.StartsWith(".") &&
!username.StartsWith("_") &&
!username.EndsWith(".") &&
!username.EndsWith("_") &&
!username.Contains("..") &&
!username.Contains("__") &&
!username.Contains("._") &&
!username.Contains("_."); 
```

它更长，但不需要维护者打开 expresso 即可理解。

当然你可以评论一个很长的正则表达式，但是读过它的人必须依赖信任......

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-18T11:51:30.997

我想你必须在这里使用 Lookahead 表达式。[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

尝试

`^[a-zA-Z0-9](_(?!(\.|_))|\.(?!(_|\.))|[a-zA-Z0-9]){6,18}[a-zA-Z0-9]$`

`[a-zA-Z0-9]`一个字母数字的 THEN (

`_(?!\.)`一个 _ 后不跟一个 . 或者

`\.(?!_)`一个 。后面没有 _ OR

`[a-zA-Z0-9]`一个字母数字) FOR

`{6,18}`最少 6 到最多 18 次 THEN

`[a-zA-Z0-9]`一个字母数字

（第一个字符是字母数字，然后是 6 到 18 个字符，最后一个字符是字母数字，6+2=8, 18+2=20）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-18T12:36:28.803

对菲利普的答案稍作修改修复了最新要求

```
^[a-zA-Z0-9]([._](?![._])|[a-zA-Z0-9]){6,18}[a-zA-Z0-9]$ 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-06T12:12:05.910

```
private static final Scanner scan = new Scanner(System.in);

public static void main(String[] args) {
    int n = Integer.parseInt(scan.nextLine());
    while (n-- != 0) {
        String userName = scan.nextLine();
        String regularExpression = "^[[A-Z]|[a-z]][[A-Z]|[a-z]|\\d|[_]]{7,29}$";
        if (userName.matches(regularExpression)) {
            System.out.println("Valid");
        } else {
            System.out.println("Invalid");
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-11-08T17:37:09.383

```
^(?=.{4,20}$)(?:[a-zA-Z\d]+(?:(?:\.|-|_)[a-zA-Z\d])*)+$ 
```

你可以在[这里测试正则表达式](https://regexr.com/4ofm6)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-17T15:38:01.727

^[a-z0-9_-]{3,15}$

^ # 行首

[a-z0-9_-] # 匹配列表中的字符和符号，az、0-9、下划线、连字符

{3,15} # 长度至少 3 个字符，最大长度 15

$ # 行尾

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-18T13:40:43.657

这个应该可以解决问题：

```
if (Regex.IsMatch(text, @"
    # Validate username with 5 constraints.
    ^                          # Anchor to start of string.
    # 1- only contains alphanumeric characters , underscore and dot.
    # 2- underscore and dot can't be at the end or start of username,
    # 3- underscore and dot can't come next to each other.
    # 4- each time just one occurrence of underscore or dot is valid.
    (?=[A-Za-z0-9]+(?:[_.][A-Za-z0-9]+)*$)
    # 5- number of characters must be between 8 to 20.
    [A-Za-z0-9_.]{8,20}        # Apply constraint 5.
    $                          # Anchor to end of string.
    ", RegexOptions.IgnorePatternWhitespace))
{
    // Successful match
} else {
    // Match attempt failed
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-18T12:36:18.590

对不起，我从自己的库中生成了这个，它使用对 Dart/Javascript/Java/Python 有效的语法，但无论如何，这里是：

```
(?:^)(?:(?:[abcdefghijklmnopqrstuvwxyzABCDEFGHIJKlMNOPQRSTUVWXYZ0123456789]){1,1})(?!(?:(?:(?:(?:_\.){1,1}))|(?:(?:(?:__){1,1}))|(?:(?:(?:\.\.){1,1}))))(?:(?:(?:(?:[abcdefghijklmnopqrstuvwxyzABCDEFGHIJKlMNOPQRSTUVWXYZ0123456789._]){1,1})(?!(?:(?:(?:(?:_\.){1,1}))|(?:(?:(?:__){1,1}))|(?:(?:(?:\.\.){1,1}))))){6,18})(?:(?:[abcdefghijklmnopqrstuvwxyzABCDEFGHIJKlMNOPQRSTUVWXYZ0123456789]){1,1})(?:$) 
```

我的图书馆代码：

```
var alphaNumeric = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "l", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];
var allValidCharacters = new List.from(alphaNumeric);
allValidCharacters.addAll([".", "_"]);

var invalidSequence = (r) => r
  .eitherString("_.")
  .orString("__")
  .orString("..");

var regex = new RegExpBuilder()
  .start()
  .exactly(1).from(alphaNumeric).notBehind(invalidSequence)
  .min(6).max(18).like((r) => r.exactly(1).from(allValidCharacters).notBehind(invalidSequence))
  .exactly(1).from(alphaNumeric)
  .end()
  .getRegExp(); 
```

我的图书馆：[https ://github.com/thebinarysearchtree/RegExpBuilder](https://github.com/thebinarysearchtree/RegExpBuilder)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-11T09:48:48.963

```
const regex = /^moe_(app|lab)[A-Za-z0-9]{3}$/;
const str = `moe_app_baa`;
let m;

if ((m = regex.exec(str)) !== null) {
    // The result can be accessed through the `m`-variable.
    m.forEach((match, groupIndex) => {
        console.log(`Found match, group ${groupIndex}: ${match}`);
    });
} 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2020-10-20T17:29:13.440

```
function isUserName(val){
    let regUser=/^[a-zA-Z0-9](_(?!(\.|_))|\.(?!(_|\.))|[a-zA-Z0-9]){6,18}[a-zA-Z0-9]$/;
    if(!regUser.test(val)){
      return 'Name can only use letters,numbers, minimum length is 8 characters';
    }
  } 
```

# django - django 1.4 新项目导致 DB ENGINE 配置不当

> ID：12018247
> 
> 赞同：0
> 
> 时间：2012-08-18T11:40:21.880
> 
> 标签：django

我已经进行了搜索，但没有找到答案。请帮忙！

这就是我所做的：

```
(holistic)chris@notebook:~/workspace$ django-admin --version
1.4
(holistic)chris@notebook:~/workspace$ django-admin startproject holistc
(holistic)chris@notebook:~/workspace$ cd holistc/
(holistic)chris@notebook:~/workspace/holistc$ vim settings.py 
(holistic)chris@notebook:~/workspace/holistc$ python manage.py startapp main
(holistic)chris@notebook:~/workspace/holistc$ python manage.py syncdb
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/chris/.virtualenvs/holistic/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/chris/.virtualenvs/holistic/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/chris/.virtualenvs/holistic/local/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/chris/.virtualenvs/holistic/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/home/chris/.virtualenvs/holistic/local/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/home/chris/.virtualenvs/holistic/local/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "/home/chris/.virtualenvs/holistic/local/lib/python2.7/site-packages/django/db/backends/dummy/base.py", line 15, in complain
    raise ImproperlyConfigured("settings.DATABASES is improperly configured. "
django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details. 
```

这是我的`settings.py`

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'holistic_db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

任何值得赞赏的想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:48:02.610

在 django 1.4 中，设置文件的路径是`workspace/holistc/holistc/settings.py`.

这与以前版本的 django 不同。[您可以在此处](https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py)阅读有关新项目布局的信息。

# javascript - 防止 Threejs 透视相机的 Y 值为负？

> ID：12018249
> 
> 赞同：0
> 
> 时间：2012-08-18T11:40:32.050
> 
> 标签：javascript, webgl, three.js

你如何防止 a`THREE.PerspectiveCamera`产生负面影响`position.y`？

我正在使用稍微修改过的 TrackballControl 来用鼠标控制相机，这可以防止相机在 z 轴上旋转，但想让我的相机保持在“地面”上方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:15:33.370

看看`THREE.OrbitControls`，这将使相机保持直立而不会被黑客入侵。

如果您使用`THREE.OrbitControls`，并且想要限制天顶角以使相机保持在地面之上，则需要一个简单的技巧。

在`OrbitControls.update()`中，替换这一行：

```
phi = Math.max( EPS, Math.min( Math.PI - EPS, phi ) ); 
```

有了这个：

```
phi = Math.max( EPS, Math.min( Math.PI/2 - EPS, phi ) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T13:51:11.523

假设您有 2 个摄像头。其中一个是被 控制的`TrackballControls`。另一个用于渲染。这是渲染循环的样子：

```
controls.update();

camera2.position.copy( camera.position );

if ( camera2.position.y < 0 ) camera2.position.y = 0;

renderer.render( scene, camera2 ); 
```

# codeigniter - 使用 tank_auth for codeigniter 注册后自动登录

> ID：12018250
> 
> 赞同：0
> 
> 时间：2012-08-18T11:40:32.940
> 
> 标签：codeigniter

在阅读了很多关于什么是 codeigniter 的最佳身份验证的答案之后，我决定使用[tank_auth](http://konyukhov.com/soft/tank_auth/)。

这似乎是对 codeigniter 的最佳认证。

但是，关于如何将它成功集成到我的网站上，我有一些问题。我目前正在建立一个酒店预订系统。所以需要修改 tank_auth 的一些功能以满足我的需要。

那么我怎样才能在注册后自动登录用户而不需要他/她激活他/她的帐户。是否有禁用“激活过程”的配置。如果是，我在哪里可以找到它？如果不是，如果我删除激活过程是对代码的大修改吗？

在 auth.php 代码中，我尝试注释以下代码以删除激活过程，但似乎它不起作用：

```
} elseif ($this->tank_auth->is_logged_in(FALSE)) { // logged in, not activated
redirect('/auth/send_again/'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:11:42.907

该代码仅在用户帐户存在但未激活时才有效。然后它重新发送激活电子邮件...

查看库的寄存器部分并将登录会话参数设置为真，即设置登录为真的参数，然后直接到受保护的区域！

# iphone - 使用多个 CoreData NSManagedObjectContexts 时是否需要实现 NSManagedObjectContext 通知？

> ID：12018255
> 
> 赞同：0
> 
> 时间：2012-08-18T11:41:27.580
> 
> 标签：iphone, ios, caching, core-data, concurrency

我的应用程序中目前有 2 个上下文。我的应用程序使用多个选项卡，因此一个选项卡可能正在显示数据，而另一个选项卡可能处于数据输入模式。

我使用一个主要上下文来读取大部分数据以进行显示。当我插入数据时，我正在使用第二个临时上下文，因为我不希望其他选项卡的操作来保存添加到上下文中的可能不完整的对象。

我一直在阅读苹果并发指南：http: [//developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)

它表明您应该使用通知在上下文之间传播更改。

**我的两个上下文都使用相同的传播存储对象。我的问题是，如果在选项卡 A 中对上下文 A 进行了更改，当使用上下文 B 在选项卡 B 中重新发出获取请求时，更改是否会简单地显示在选项卡 B 中？**

这就是我目前所看到的。我假设核心数据缓存是在传播存储级别完成的？如果那是正确的，那么仅在您不打算重新运行 fetch 查询的情况下才需要同步上下文，以便您可以选择性地仅更新已更改的 NSManagedObjects？

这就是我获得新背景的方式：

```
 NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    NSManagedObjectContext *newContext;
    if (coordinator != nil) {
        newContext = [[NSManagedObjectContext alloc] init];
        [newContext setPersistentStoreCoordinator:coordinator];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:13:37.347

当您使用两个不同的 NSManagedObjectContexts 时，如果您希望在 Tab B 中修改的数据显示在 Tab A 中（反之亦然），您需要在通知中添加观察者

`NSManagedObjectContextDidSaveNotification`

在选项卡 A 的控制器代码中（如果在 A 中进行更改，则为 B）

如在

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(mergeChanges:) name:NSManagedObjectContextDidSaveNotification object:nil]; 
```

然后在声明的选择器处

```
-(void)mergeChanges:(NSNotification *)anotif
{
    [self.managedObjectContext mergeChangesFromContextDidSaveNotification:anotif];
    [self updateTheUI];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:28:51.803

“您在一个上下文中对托管对象所做的更改不会传播到不同上下文中的相应托管对象，除非您重新获取或重新故障该对象。”

# wpf - 显式几何边界

> ID：12018256
> 
> 赞同：1
> 
> 时间：2012-08-18T11:41:36.753
> 
> 标签：wpf, xaml, drawing, geometry

我在创建放射性几何时遇到了以下问题： ![放射性几何](../Images/fff72aceaf23cecc460a3aee411d375b.png)

橙色圆点表示 RadialGradientBrush 中心点 (0,0)。它应该在黑色圆圈的中心，而不是在底部。这会导致另一个问题：旋转动画。

有没有办法在几何级别解决这个问题？我可以通过明确设置画笔的中心点来修复它，但这既不方便又脆弱。

```
<GeometryDrawing> 
    <GeometryDrawing.Geometry>
        <GeometryGroup>
            <PathGeometry Figures="
                          M-10,0 Q0,5 10,0
                          Q20,25 25,50
                          Q0,60 -25,50
                          Q-20,25 -10,0 Z">
                <PathGeometry.Transform>
                    <TranslateTransform Y="15" />
                </PathGeometry.Transform>
            </PathGeometry>

            <PathGeometry Figures="
                          M-10,0 Q0,5 10,0
                          Q20,25 25,50
                          Q0,60 -25,50
                          Q-20,25 -10,0 Z" >
                <PathGeometry.Transform>
                    <TransformGroup>
                        <TranslateTransform Y="15" />
                        <RotateTransform Angle="120" />
                    </TransformGroup>
                </PathGeometry.Transform>
            </PathGeometry>
            <PathGeometry Figures="
                          M-10,0 Q0,5 10,0
                          Q20,25 25,50
                          Q0,60 -25,50
                          Q-20,25 -10,0 Z" >
                <PathGeometry.Transform>
                    <TransformGroup>
                        <TranslateTransform Y="15" />
                        <RotateTransform Angle="240" />
                    </TransformGroup>
                </PathGeometry.Transform>
            </PathGeometry>
            <EllipseGeometry RadiusX="10" RadiusY="10" />
        </GeometryGroup>
    </GeometryDrawing.Geometry>
    <GeometryDrawing.Brush>
        <RadialGradientBrush ColorInterpolationMode="ScRgbLinearInterpolation">
            <GradientStop Offset="0" Color="Orange" />
            <GradientStop Offset="0.03" Color="Black" />
        </RadialGradientBrush>
    </GeometryDrawing.Brush>
    <GeometryDrawing.Pen>
        <Pen Thickness="0">
            <Pen.Brush>
                <SolidColorBrush Color="Black" />
            </Pen.Brush>
        </Pen>
    </GeometryDrawing.Pen>
</GeometryDrawing> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T11:49:58.493

这是因为盒子的顶部切断了大圆圈的顶部。它被切断，因为顶部的两个花瓣旋转。

您可以通过在几何图形中添加外圆（透明）或在顶部添加边距来解决此问题。

这将向下移动绘图的黑色部分，使橙色点居中并固定旋转。

这有意义吗？很难解释，需要的时候我可以画一个草图。

# javascript - 在 ajax 请求中间重定向

> ID：12018257
> 
> 赞同：0
> 
> 时间：2012-08-18T11:41:57.733
> 
> 标签：javascript, jquery, codeigniter, asynchronous

我有一个用户可以发布链接的网站。用户填写包含 2 个字段的表单：

*   标题
*   网址

当用户单击“提交”时，我有一个爬虫，它会查找所提供链接的图像并制作缩略图。

问题是**爬虫通常需要大约 5-10 秒才能完成加载**和裁剪拇指。

我以为我可以像这样进行ajax调用。如您所见，当用户首先提交链接时，我们会查看其是否有效（第一次 ajax 调用），然后如果成功，我们会进行另一个 ajax 调用以尝试查找并保存此链接的图像。

我的想法是在将用户移动到 links.php 页面时这样做，但是，我发现如果我这样做，AJAX 调用会中断并且函数`save_image.php`不会运行。

我可以做些什么来避免让我的用户等待这个`save_image.php`过程？我需要运行这个过程，但我不需要返回任何数据。

```
$.ajax({
                    url: 'publish/submit_link.php',
                    type: 'POST',
                    dataType: 'JSON',
                    data: {
                        link            : link,
                        title           : title,
                    },
                    success: function (data) {
                        if (data) 
                        {
                            $.ajax({
                                url: 'publish/save_image.php',                                      type: 'POST',
                                data: {
                                        id              : data.id,
                                        type            : data.type,
                                    url             : url,
                                        csrf_test_name  : csrf
                                }
                            });
                        }

                        //THIS NEXT LINE BREAKS SECOND AJAX CALL
                        window.location = 'links.php';

                    }   
}); 
```

提前致谢！

**总结：我希望用户****在生成该链接的缩略图时**提交链接并将用户重定向到链接页面。我不想向用户显示缩略图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:00:37.140

AJAX 请求似乎失败了，因为当您离开时，用户请求被中止。因此，执行`save_image.php`被中断。

您可以使用 PHP[`ignore_user_abort`](http://de2.php.net/manual/en/function.ignore-user-abort.php)来强制 PHP 进程在后台继续。把它放在顶部`save_image.php`：

```
<?php
    ignore_user_abort(true);

    // ... save image, etc.
?> 
```

为此，您必须向客户端发送（并[刷新](http://php.net/manual/en/function.flush.php)）一些输出：

> 在尝试向客户端发送信息之前，PHP 不会检测到用户已中止连接。简单地使用 echo 语句并不能保证发送信息，请参阅[flush()](http://php.net/manual/en/function.flush.php)。

任何输出都应该有效（例如“OK”）。考虑到您使用的是框架，这可能有点挑战，但这不应该是不可能的。这可能有效：[使用 CodeIgniter 冲洗](http://codeigniter.com/forums/viewthread/110755/)

[您可以在此处](http://php.net/manual/en/features.connection-handling.php)阅读有关 PHP 连接处理的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T11:55:07.907

强制用户先填写 url，然后填写标题，当用户转到标题字段时开始抓取数据，直到完成标题并按 sumbit，您将获得一些时间并使过程明显更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T11:43:55.243

如果您不需要返回的数据，为什么还要使用 XHR？只需让您的表单提交链接`links.php`并将图像保存在那里！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T05:24:07.953

要了解您的问题，我们需要了解 javascript 的工作原理

你的代码如下

```
$.ajax({
                    url: 'publish/submit_link.php',
                    type: 'POST',
                    dataType: 'JSON',
                    data: {
                        link            : link,
                        title           : title,
                    },
                    success: function (data) {
                        if (data) 
                        {
                            $.ajax({
                                url: 'publish/save_image.php',                                      type: 'POST',
                                data: {
                                        id              : data.id,
                                        type            : data.type,
                                    url             : url,
                                        csrf_test_name  : csrf
                                }
                            });
                        }

                        //THIS NEXT LINE BREAKS SECOND AJAX CALL
                        window.location = 'links.php';

                    }   
}); 
```

从上面我可以说，只要发出 ajax 请求，java 脚本就会执行第二行，而不管响应如何。

我们可以举以下例子

```
$.ajax({
                    url: 'publish/submit_link.php',
                    type: 'POST',
                    dataType: 'JSON',
                    data: {
                        link            : link,
                        title           : title,
                    },
                    success: function (data) 
                    {
                         console.log(data);
                    }
});

for(var i = 0; i < 15000000; i++)
{
      console.log(i);
} 
```

您可能会看到如下输出

```
1
2
3
.
.
.
1000
data//response of ajax
.
.
14999999 
```

所以为了避免你可以使用[jQuery.when()](http://api.jquery.com/jQuery.when/)我们的 ajax 成功函数。

希望这会帮助你

# android - 在 android 平板电脑中调试 android 应用程序

> ID：12018259
> 
> 赞同：1
> 
> 时间：2012-08-18T11:42:07.760
> 
> 标签：android, tablet

现在我正在开发一个安卓应用程序。我在模拟器中运行我的代码。谁能帮助我如何在 android 平板电脑（Matrix One）中调试我自己的 android 应用程序，而不是 android 模拟器（即）使用 eclipse 配置我的 android 平板电脑（Matrix One）的步骤？

谢谢，马诺伊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:46:21.197

1.  从您的设置中启用 USB 调试（如果需要，还可以模拟位置）
2.  通过 USB 将设备插入计算机
3.  使用 eclipse 在设备上运行应用程序
4.  你完成了

[这](http://developer.android.com/tools/device.html)部分文档有更多关于执行此操作的详细信息，例如安装驱动程序、配置 UDev 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:45:29.640

您可能需要额外的驱动程序。您应该可以通过 sdk 下载它。安装驱动程序后，只需在平板电脑上打开调试模式后插入设备`Application-Development`。您的设备应该出现在 eclipse 的设备视图中。插入后，应用程序应在真实设备上自动启动。

# asp.net-mvc - MVC 不会反序列化 HttpGet 变量

> ID：12018267
> 
> 赞同：0
> 
> 时间：2012-08-18T11:43:21.210
> 
> 标签：asp.net-mvc, parameters, action

当我提交此网址时：

```
http://localhost:3333/User/GetAll?_dc=1345288777353&page=1&start=1&limit=25&callback=Ext.data.JsonP.callback2 
```

控制器不会反序列化`PagingModel page`。调试器显示`page = null`.

```
public class PagingModel
{

    public string start { get { return _start; } set { _start = value; } }
    private string _start;

}

public class UserController : Controller
{

    [HttpGet]
    public JsonResult GetAll(PagingModel page)
    {
           ///////////////////
           //page is null.
           ///////////////////
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:44:51.210

糟糕，重命名您的操作参数：

```
[HttpGet]
public JsonResult GetAll(PagingModel model)
{
   ///////////////////
   // model is no longer null
   ///////////////////
} 
```

原因是`page=1`您的请求中已经有一个查询字符串参数，这使得默认模型绑定器发疯，他试图反序列化显然很难发生`1`的值。`PagingModel`

# android - 如何将新的 Android 应用程序添加到现有项目？

> ID：12018268
> 
> 赞同：1
> 
> 时间：2012-08-18T11:43:27.950
> 
> 标签：android, eclipse, push, android-notifications

我一直在 Eclipse 的一个项目中开发许多 Android 活动。

我现在正在按照教程来实现推送通知，我需要创建一个新的 Android 应用程序（在代码中扩展应用程序）。

但是，在尝试创建此应用程序时，它无法正常运行。类名是否需要与项目名称相同？

当试图在我的手机上运行它时，它崩溃了。

我的代码如下：（ApplicationLoader 不是应用程序/项目的名称）

```
public class ApplicationLoader extends Application {

@Override
public void onCreate() {
    super.onCreate();
    //Configure your application
    //
    // This can be done in code as illustrated here,
    // or you can add these settings to a properties file
    // called airshipconfig.properties
    // and place it in your "assets" folder
    AirshipConfigOptions options = AirshipConfigOptions.loadDefaultOptions(this);
    options.developmentAppKey = --my development app key
    options.productionAppKey = --my production app key
    options.inProduction = false; //determines which app key to use

    Logger.logLevel = Log.VERBOSE;

    // Take off initializes the services
    UAirship.takeOff(this, options);

       PushManager.enablePush();

       PushPreferences prefs = PushManager.shared().getPreferences();
       Logger.info("My Application onCreate - App APID: " + prefs.getPushId());

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:53:12.613

如果您的应用程序名称是 ApplicationLoader（在您的 AndroidManifest 中的应用程序标记下定义），那么应用程序类名称也应该是 ApplicationLoader

```
<application android:name="ApplicationLoader "> 
```

> 公共类 ApplicationLoader 扩展应用程序

# c# - 用于将本地 html 页面转换为 pdf 的 QuickPDF 库

> ID：12018273
> 
> 赞同：0
> 
> 时间：2012-08-18T11:44:23.663
> 
> 标签：c#

我想在我的 C# windows 窗体项目中使用 QUICKPDF 库。我想将本地 HTMl 页面转换为 PDF 。是否可以使用 quickpdf dll 转换“本地 html”页面。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:51:25.690

这是使用 quickpdf 将 html 转换为 pdf 的示例

```
// Setup the parameters
string fileName = "C:\\example.pdf";
string licenseKey = "...";

// Create the library
QuickPDFAX0712.PDFLibrary qp = new QuickPDFAX0712.PDFLibrary();

// Unlock the library
qp.UnlockKey(licenseKey);
qp.DrawHTMLText(40, 760, 200, "Here is some <b>bold</b>, <i>italic</i> and <u>underlined</u> text");
qp.DrawHTMLText(40, 730, 200, "<ul><li>This</li><li>is</li><li>a</li><li>bullet</li><li>list</li></ul>");

// Save the new PDF that you've created.
qp.SaveToFile(fileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:46:51.200

你好，你可以使用这个库

[http://www.essentialobjects.com/Products/EOPdf/Default.aspx](http://www.essentialobjects.com/Products/EOPdf/Default.aspx)

# php - php - 从表单输入中提取数据（由 curl 获取）

> ID：12018275
> 
> 赞同：0
> 
> 时间：2012-08-18T11:44:44.533
> 
> 标签：php, curl

我有 2 个网站：foo.com 和 bar.com

foo.com 的表格包含来自其数据库的内容。我想要的是从表单中的每个输入文本区域中获取该内容。

我可以通过 curl（在 bar.com）访问 foo.com 的代码：

```
 <?php
     $post='pswd';        
     $site='foo.com';
     $c = curl_init();
     curl_setopt($c, CURLOPT_URL, $site);
     curl_setopt($c, CURLOPT_POST, 1);
     curl_setopt($c, CURLOPT_POSTFIELDS, "pswd=$post");
     curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
     $page = curl_exec($c);
     curl_close($c);
     ?> 
```

我得到了带有表单和输入的整个html，例如：

```
 <textarea name="inputname" class="longone">inputcontent</textarea> 
```

我不知道如何开始提取数据并以这种方式保存：

```
$inputname='inputcontent'; 
```

你能给我什么建议吗？先感谢您

编辑：

我忘了告诉你，我知道一些输入名称，而其他的只有最后一个字符不同 - 数字，例如 inputnameiknow1、inputnameiknow2 ...

编辑 2 - 感谢 baba 的解决方案

1.  simplehtml dom 使用 file_get_contents 以 POST 形式发送变量，如下所示：[如何使用 file_get_contents 在 PHP 中发布数据？](https://stackoverflow.com/questions/2445276/how-to-post-data-in-php-using-file-get-contents)

2.  要获取输入名称，只需询问“名称”

所以我的代码看起来像巴巴的但添加了

```
$element->name 
```

提取输入名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:32:53.657

您好，我认为您应该使用[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)，因为您对正则表达式并不了解

例子

```
$html = file_get_html('http://www.examle.com/');

// Find all images 
foreach($html->find('textarea') as $element) 
       echo $element->plaintext . '<br>'; 
```

任务完成

# javascript - 文本区域预览区

> ID：12018279
> 
> 赞同：1
> 
> 时间：2012-08-18T11:44:58.153
> 
> 标签：javascript, html

我正在尝试编写一个自动显示在 div 中的 textarea 预览（如 stackoverflow）。我创建了一个脚本，但它似乎不起作用。如果有人可以帮助我编写 HTML 和 JavaScript 中的脚本，我会很高兴的。

像图片中这样：http: [//i49.tinypic.com/282qpft.jpg](http://i49.tinypic.com/282qpft.jpg)

似乎不起作用的脚本：http: [//jsbin.com/ufeqoj](http://jsbin.com/ufeqoj)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:55:15.470

您的问题含糊不清，但也许一些建议会有所帮助。

*   `div`每次用户键入字符时，您都需要更新目标。这是`onkeyup`处理程序（或者`onkeydown`，取决于您的预期用户体验 - 可能是前者）。
*   是否要保留用户在文本区域中输入的任何 HTML？如果是这样，您将需要更新`innerHTML`target 的属性`div`。如果您只想更新*text*，请更改`innerText`属性。

一个使用 jQuery 的快速而肮脏的例子：

```
$("textarea#my_input").bind('keyup', function() {
    $("div#target").text($(this).val());
} 
```

根据要求，在 vanilla JavaScript 中：

```
document.getElementById("my_input").onkeyup = function() {
    document.getElementById("target").innerText = this.value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:02:31.707

如果您想显示`textarea`在`div`​​下面输入的任何内容。

您可以使用`Jquery` `.keypress()`功能。

**[样品小提琴](http://jsfiddle.net/v2sZS/)**。

这只是一个起点。您可以更改它以满足您的要求。

进一步参考**[Jquery .keypress()](http://api.jquery.com/keypress/)**

# heroku - 是否可以将 Heroku 应用程序列入白名单？

> ID：12018287
> 
> 赞同：13
> 
> 时间：2012-08-18T11:46:19.700
> 
> 标签：heroku, whitelist

我有一个 Heroku 应用程序，它通过 SMPP 与电信公司短信网关绑定电信公司的人需要将我的应用程序连接的 IP 列入白名单。我知道新的插件 proximo，但它的价格太高了。所以这个选项就没有了。是否有可以将我列入白名单的子网或 IP 列表，并且是否可以保证来自我的应用程序的所有请求都来自 tose IP？我找到了这个[https://api.heroku.com/vendor/logplex/allowlist](https://api.heroku.com/vendor/logplex/allowlist)。这仅适用于系统日志还是所有应用程序都从其中一个 IP 发出请求？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T20:57:12.753

现在有一个称为 Proximo 的 Heroku 附加组件：[https ://addons.heroku.com/proximo](https://addons.heroku.com/proximo)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T08:41:18.997

Heroku 文档特别提到了[dynos 没有静态 IP 地址](https://devcenter.heroku.com/articles/dynos#isolation-and-security)。即使在使用自定义域时，他们看起来也希望您[指向 CNAME 记录](https://devcenter.heroku.com/articles/what-ip-addresses-should-i-use-to-point-my-custom-domain-to-heroku)而不是 IP 地址。因此，如果您需要静态 IP，Proximo 似乎是您的最佳选择。

是否可以使用 API 令牌通过 sms 网关对您的应用程序进行身份验证，类似于[blitz.ip 插件](http://support.blitz.io/kb/integration/integration-using-heroku-with-blitz)与 heroku 一起使用的方式？那么您可能不需要使用静态 IP 白名单。

[这个问题](https://stackoverflow.com/questions/2231391/heroku-and-ip-mask)看起来和你做的事情类似，[这个答案](https://stackoverflow.com/a/2231667/28037)建议使用托管的 VPN 服务。那行得通吗？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-05T16:39:42.047

Heroku 现在拥有您正在寻找的私人空间：

[https://www.heroku.com/private-spaces](https://www.heroku.com/private-spaces)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-07T16:57:07.883

另一个 Heroku 插件选项是[Quotaguard](https://addons.heroku.com/quotaguardstatic)，处于测试阶段，目前免费。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-20T11:17:21.657

回答我自己的问题。即使外部 VPN 或 proximo 插件是您想要将 Heroku 应用程序列入白名单的解决方案，我还是决定选择更简单的选项，并使用弹性 IP 在 ec2 上托管我的应用程序的 SMPP 绑定服务

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-04-28T19:17:08.920

您可以使用具有静态 IP（AWS 弹性 IP）的Dockhero Heroku 插件 - [https://dockhero.io/自己托管代理。](https://dockhero.io/)

1.  安装插件和 CLI 插件：

    ```
    $ heroku addons:create dockhero
    $ heroku plugins:install dockhero 
    ```

2.  等到配置完成并获取 DOCKHERO_HOST 环境变量

    ```
    $ heroku dh:wait
    $ heroku config:get DOCKHERO_HOST
    --> e.g. dockhero-spherical-42047.dockhero.io 
    ```

3.  创建包含以下内容的**dockhero-compose.yml文件：**

    ```
    version: "2"
    services:
      proxy:
        image: tecnativa/tcp-proxy
        environment:
          LISTEN: ":80"
          TALK: "www.wikipedia.org:80"
        ports: 
          - "80:80" 
    ```

这`www.wikipedia.org:80`是您为其构建代理的服务器。[在https://docs.docker.com/compose/compose-file/compose-file-v2/](https://docs.docker.com/compose/compose-file/compose-file-v2/)中查找有关语法的更多信息

4.  使用 Dockhero CLI 在云中运行此堆栈：

    ```
    $ heroku dh:compose up -d 
    ```

5.  从 DOCKHERO_HOST Heroku 配置变量对主机的任何请求现在都将根据您的 dockhero-compose.yml 进行代理

    ```
    $ curl http://dockhero-spherical-42047.dockhero.io/
    --> <response from www.wikipedia.org> 
    ```

**重要提示**：在撰写本文时，dockhero.io 处于 Beta 版并且免费提供。切换到生产时，分配的 IP 可能会在事先通知后更改。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-26T19:52:46.553

[Fixie](https://elements.heroku.com/addons/fixie)是此处未提及的另一个替代插件。每月 500 个请求的免费计划。需要对代码和 heroku 应用程序进行一些调整才能在我们地区（或者您可以将其[迁移：将应用程序迁移到另一个地区](https://devcenter.heroku.com/articles/app-migration)）。为我工作。

# php - 数组php和数据库mysql保存数据

> ID：12018295
> 
> 赞同：0
> 
> 时间：2012-08-18T11:47:35.767
> 
> 标签：php, mysql, arrays, save

我在使用数组时遇到问题。它实际上出现在一个页面上：一种多行的形式。每行对应于数据库中的一条记录，因此它们都有一个共同点。

多亏了javascript，我可以动态添加字段。

我遇到的麻烦是记录数据时。事实上，我起初认为我应该`delete`一切，然后`insert`我只是以下查询：

```
<?php if(isset($_POST['enreg']))
{

foreach($_POST['data'] as $data){
    if (!empty($data['code_s'])){
$sql2="DELETE FROM scenarii WHERE code_s='".mysql_real_escape_string($_GET['code_s'])."'";
mysql_query($sql2) or die(__LINE__.mysql_error().$sql2);    

$sql7 = '
INSERT INTO  scenarii SET 
code_s              = "'.mysql_real_escape_string($data['code_s']).'", 
titre               = "'.mysql_real_escape_string($data['titre']).'",
action              = "'.mysql_real_escape_string($data['action']).'", 
libelle             = "'.mysql_real_escape_string($data['libelle']).'",
jour                = "'.mysql_real_escape_string($data['jour']).'"' ;    
mysql_query($sql7) or die(__LINE__.mysql_error().$sql7);

    } 
  } 
}
?> 
```

担心的是删除的信息不会再次存储（尽管它们在 post 变量中，因为它们以表单的形式存在，因此是变量。

事实上，它只保存来自 javascript 的新行。

问题是我不能仅仅因为有新行就进行更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:53:03.843

```
<?php if(isset($_POST['enreg']))
{
$sql2="DELETE FROM scenarii WHERE code_s='".mysql_real_escape_string($_GET['code_s'])."'";
mysql_query($sql2) or die(__LINE__.mysql_error().$sql2);  
foreach($_POST['data'] as $data){
if (!empty($data['code_s'])){

$sql7 = '
INSERT INTO  scenarii SET 
code_s              = "'.mysql_real_escape_string($data['code_s']).'", 
titre               = "'.mysql_real_escape_string($data['titre']).'",
action              = "'.mysql_real_escape_string($data['action']).'", 
libelle             = "'.mysql_real_escape_string($data['libelle']).'",
jour                = "'.mysql_real_escape_string($data['jour']).'"' ;    
mysql_query($sql7) or die(__LINE__.mysql_error().$sql7);

} 
} 
}
?> 
```

将您的删除查询放在 foreach 循环之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:46:32.830

经过几个小时的测试，我发现删除请求在每个循环中，所以它在所有重新注入之后都删除了，这就是为什么我每次只剩下最后一个输入。

现在我已经全部删除并重新注入。它工作正常。

我不明白的是我以前没有看到它。

感谢大家的帮助。

# jquery - 如何使用 jquery 将 jsp 表下载为 excel 文件

> ID：12018296
> 
> 赞同：0
> 
> 时间：2012-08-18T11:47:43.903
> 
> 标签：jquery, jsp, spring-mvc

我正在使用带有 MVC 的 spring 也用于呈现的 jsp 页面。我要求允许最终用户下载在 jsp 中显示为 excel 表的表格。这些表包含我通过使用模型映射属性进行渲染，如下所示。

```
<div id="hotel_user">
<table width="98%" style="border:5px solid #999999" cellpadding="0" cellspacing="1" bgcolor="#CFD7E8">
<tr style="background-color:#72E076">
  <td width="auto" height="27" align="center">Date</td>
</tr>
<tr>
 <td width="0%" height="27" align="center" class="row2"><b>${aff.date_string}</b></td>
 <td width="auto" height="27" align="center"><b>${aff.no_of_posted} </b></td>
 <td width="auto" height="27" align="center"><b>${aff.no_of_listed}</b> </td>
</tr>
</table>
</div> 
  <input type="button" id="download" value="Download As Excell"> 
```

单击按钮时，表数据应下载为 excel。我已经看到并尝试实现代码，它在 excel 表中下载但 conatin null vale。以下链接我已经实施。 [http://jsfiddle.net/n9XRx/](http://jsfiddle.net/n9XRx/)

我在jquery中使用过：

```
 $("#download").click(function() {  
 var hotel_user = $('#hotel_user').html();    
 window.open('data:application/vnd.ms-excel,' + $('#hotel_user').html());
}); 
```

任何建议我都犯了错误。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:57:57.057

您首先需要一种将 html 表格中的数据转换为 excel 文档的方法。[从这个](http://sourceforge.net/projects/jexcelapi/)开始 您必须在服务器端生成文档，然后您才能启动正确的下载。

# php - PHP curl 无法模拟登录信息

> ID：12018298
> 
> 赞同：0
> 
> 时间：2012-08-18T11:47:50.073
> 
> 标签：php, curl

PHP curl无法模拟本网站[http://livearchive.onlinejudge.org/](http://livearchive.onlinejudge.org/)的登录信息，并返回一句话，您无权查看此页面！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:52:05.843

cURL 应该能够很好地模拟登录。

确保你：

*   将数据发布到登录 URL。
*   获取登录页面以获取正确的 nonce 数据等。
*   之后存储 cookie 并将其用于进一步的请求

### 如何发布数据

请参阅问题的答案[Passing $_POST values with cURL](https://stackoverflow.com/q/28395/79061)

### 如何获取正确的表单数据

使用 HTML 解析器库来解析网页并提取字段。例如，您可以使用[DOMDocument](http://docs.php.net/manual/en/class.domdocument.php)，并使用[`getElementById`](http://docs.php.net/manual/en/domdocument.getelementbyid.php)来获得您想要的形式。

### 如何存储 cookie 并将其用于进一步的请求

这在[PHP cURL 和 cookies](http://www.electrictoolbox.com/php-curl-cookies/)页面上有解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:29:47.340

由于这只是一个问题，我希望您还需要解释而不是任何脚本。

Curl 可以完美登录到您提到的站点，但您需要正确设置参数。

您的 URL 应指向：[http](http://livearchive.onlinejudge.org/index.php?option=com_comprofiler&task=login) ://livearchive.onlinejudge.org/index.php?option=com_comprofiler&task=login并带有以下变量

```
username=
passwd= 
op2=login
lang=english
force_session=1
return=B%3AaHR0cDovL2xpdmVhcmNoaXZlLm9ubGluZWp1ZGdlLm9yZy8%3D
message=0
loginfrom=loginmodule
cbsecuritym3=cbm_02099e1c_6e2810f8_97a3f622ba6c000cb557bd8458534f61&j2ffb0ca892d8cf58942dfbea23559ed2=1
remember=yes
Submit=Login 
```

请注意`cbsecuritym3`变量，您还需要发送 2 个 Cookie 信息，例如。`mosvisitor=1; 8ca25fe06780267eef1b49296a9a99ce=249baaaba68197c9b1681e57d69c3193`

如果所有这些都正确发送，您将能够登录

# sql - SQL Math 更新性能优化

> ID：12018303
> 
> 赞同：2
> 
> 时间：2012-08-18T11:48:32.197
> 
> 标签：sql, sql-server, performance, sql-server-2008, math

我正在运行超过 70 Mio 的简单更新。记录 (MS-SQL Server 2008)

```
UPDATE T1 SET COSTS=AMOUNT*0.003 
```

最多需要 8 小时。

有没有一种简单的“廉价”方法来提高这样的更新的数学性能？

而且由于没有 WHERE 子句或比较，只需将每条记录与值相乘，创建 INDEX 将没有效果......或者？

非常感谢您抽出宝贵时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:06:57.083

写入 70 行 Mio 确实需要时间。添加索引会使事情变得更糟，因为索引必须与表一起更新。

这个更新真的有必要吗？你不能用视图或计算列或其他什么来解决任务吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:04:50.153

我完全同意上述评论。问题不是匹配计算，而是数据库引擎的 I/O。

我只想建议计算列。您可以将“虚拟”列添加到根据同一行中的其他值计算的表中。这意味着您可以完全省去更新。只需更改表以添加一列：

```
alter table add costs_new as amount * 0.03. 
```

要保留当前名称，您需要更改旧名称：

```
exec sp_rename 't1.costs', 'costs_old', 'column';
alter table add costs as amount*0.03; 
```

这可能是一种快速而肮脏的方式来做你需要的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T13:15:14.650

您的问题不是数学（该值的计算），而是 sql server 需要读取每条记录并将其再次写入 HDD 的事实。由于计算本身非常便宜，因此您可以在`costs`任何需要的地方使用计算字段。

# symfony - 从控制器中检索 HTML 代码

> ID：12018305
> 
> 赞同：1
> 
> 时间：2012-08-18T11:49:21.020
> 
> 标签：symfony

是否可以在**控制器 B**中检索从**控制器 A**生成的 html 代码？

 **## 控制器 A

```
/**
 *
 *
 * @Route("/{user_id}/cart", name="user_cart")
 * @Template()
 */
public function showCartAction($user_id)
{

    $cart = $this->getCartManager()
        ->getUserCart($user_id);

    return array(
        'cart'=> cart
    );

} 
```

## 控制器 B

```
/**
 *
 *
 * @Route("/html", name="htmlGenerated")
 * @Template()
 */
public function showHTMLAction()
{
    $user_id = 3;

    $html = //How to obtain the html generated by Controller A with UserId = 3 ????
//...

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T12:39:06.367

您可以在控制器 B 中[转发请求](http://symfony.com/doc/current/book/controller.html#forwarding)

```
public function showHTMLAction()
{
    $user_id = 3;

    $html = $this->forward('AcmeDemoBundle:ControllerB:showCardAction', array(
        'user_id' => $user_id,
    ))->getContent();        
} 
```

尽管这应该可以很好地工作，但我实际上建议您[将控制器嵌入到](http://symfony.com/doc/current/book/templating.html#embedding-controllers)您的模板中。**

# stack - GHC编译的二进制堆栈溢出？

> ID：12018307
> 
> 赞同：0
> 
> 时间：2012-08-18T11:50:05.633
> 
> 标签：stack, haskell

我正在阅读 << real world haskell >> Chapter 8 并想看看 SumFile.hs 程序如何处理 100 万个数字：

```
main :: IO ()
main = do
  contents <- getContents
  print (sumFile contents)
    where sumFile = sum . map read . words 
```

当我向程序提供 100 万个整数时：

runhaskell SumFile.hs < data.txt，程序给出了正确的结果。

但是，当我使用 GHC 编译它时：

```
ghc SumFile.hs 
```

二进制文件给出“堆栈空间溢出”错误：

```
./SumFile < data.txt 
Stack space overflow: current size 8388608 bytes.
Use `+RTS -Ksize -RTS' to increase it. 
```

我有两个问题：

1.  是什么导致堆栈空间使用？
2.  为什么编译版本与解释版本不同，我该怎么办？

谢谢！

编辑：

好吧，原因是 map，但这是一个使用惰性字节串的修改版本：

```
import qualified Data.ByteString.Lazy as L
import qualified Data.ByteString.Lazy.Char8 as LCHAR
import Data.Monoid
import Data.List

main :: IO ()
main = do
  contents <- L.getContents
  case sumFile contents of
    Nothing -> print "Invalid input"
    Just s -> print $ getSum s
   where sumFile = foldl' mappend (Just (Sum 0)) . map ((fmap Sum) . (fmap fst) . LCHAR.readInt) . (LCHAR.words) 
```

结果是一样的：即使我没有使用 sum，二进制版本也会占用堆栈空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T02:51:06.513

我在#haskell 上与人们进行了讨论，ByteString 版本给出堆栈溢出错误的原因是由于内部未严格评估的嵌套 Just (Sum Num)。

本质上，当我们映射两个 Maybe (Just Num) 时，例如 Just (Sum 2) 和 Just (Sum 3)，foldl' 使用 seq 来生成 Just ((Sum 2) mappend (Sum 3))，即。seq 严格评估最外层的构造函数（映射两个 Just (Monoid) 以生成一个 Just (Monoid)）。在这种情况下，内部 Monoid 没有被严格评估，因此它们被保留为 mappend connected (Sum Num)。这导致 100 万个 mappend connected (Sum Num) 被包裹在 Just 中。

所以#haskell 上的 Saizan 给出了这个版本，它严格评估了 Maybe (Sum Num) 的内部部分

```
import qualified Data.ByteString.Lazy as L
import qualified Data.ByteString.Lazy.Char8 as LCHAR
import Data.Monoid
import Data.List

forceMaybe Nothing = Nothing
forceMaybe (Just x) = x `seq` (Just x)

main :: IO ()
main = do
  contents <- L.getContents
  case sumFile contents of
    Nothing -> print "Invalid input"
    Just s -> print $ getSum s
   where sumFile = foldl' (\ x y -> forceMaybe (x `mappend` y)) (Just (Sum 0)) . map ((fmap Sum) . (fmap fst) . LCHAR.readInt) . (LCHAR.words) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:18:50.893

我查看了该书的在线版本，该程序下有一些讨论，它使用堆栈空间的原因是由于map，将map替换为foldl'解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T12:23:52.310

首先，简单说明一下：ghc runtime 中的堆栈与堆栈段无关，它是运行时的内部结构，这不是缓冲区溢出类型攻击的来源。

第二。Haskell 很懒惰。惰性 io (getContents) 产生惰性列表。sum 懒惰地产生结果。但是，一旦请求 sum 的结果，它必须递归地挖掘列表，很快就会耗尽堆栈空间（如果愿意，您可以查看源代码）

为避免它，您必须使用严格版本的 sum，它应该可以消除问题。标准库对这种情况有一个特殊的功能， foldl' - foldl 的严格版本。使用`foldl' (+) 0`代替 sum 应该可以消除问题

第三。当使用惰性 IO 时，堆栈空间泄漏是非常常见的问题。如果切换到基于迭代的 IO 可能会解决。否则应该学会在需要的地方添加严格性注释。

啊。顺便说一下。GHC 正在优化编译器。这并不常见，但编译程序中的内存泄漏仍然可能存在一些问题，而 ghci 则不存在这些问题，反之亦然。

# scala - scala 和 sbt 的新手 - 尝试编译一个导入 akka.stm._ 的项目

> ID：12018308
> 
> 赞同：3
> 
> 时间：2012-08-18T11:50:18.140
> 
> 标签：scala, sbt, akka

我是 Scala 和 sbt 的新手，我正在尝试编译一个导入*akka.stm._*的项目。

当我尝试运行*sbt compile*时，编译失败并带有指向该点的消息。

我尝试使用 [https://github.com/paulp/sbt-extras](https://github.com/paulp/sbt-extras) ，所以我将在“build.sbt”文件中定义确切的 sbt 版本，但它没有帮助。

我下载了 akka-2.0.3.tgz 并打开了文件，但我不明白如何默认安装它们或如何告诉 sbt 使用它们。

我还注意到 build.sbt 文件包含：

```
resolvers += "repo.codahale.com" at "http://repo.codahale.com"

libraryDependencies ++= Seq(
//  "com.codahale" % "simplespec_2.9.0-1" % "0.3.4"
  "com.codahale" % "simplespec_2.9.0-1" % "0.4.1"
//  "se.scalablesolutions.akka" %% "akka-sbt-plugin" % "2.0-SNAPSHOT" 
```

我尝试取消注释“se.scalablesolutions.akka”（假设程序员使用了该版本的akka​​-library），但它只打印了消息：

```
[error] Error parsing expression.  Ensure that there are no blank lines within a setting. 
```

（没有空行，我只是删除了'//'并将双'%'替换为一个）

我如何告诉 sbt 在他们的位置找到 akka jar 文件？我可以添加另一个*解析器*来解决这个问题吗？

我知道这种问题不适合stackoverflow，但你至少可以参考一些我应该阅读的手册来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T13:02:33.313

好的，首先我想为新手问题道歉。（Stackoverflow 应该创建一个单独的“新手”部分）

首先，*Seq*部分中的元素应该用逗号分隔。其次，将 akka 快照移至[http://repo.akka.io/snapshots](http://repo.akka.io/snapshots)，因此我将 build.sbt 修复为：

```
resolvers += "repo.codahale.com" at "http://repo.codahale.com"
resolvers += "akka" at "http://repo.akka.io/snapshots"

libraryDependencies ++= Seq(
//  "com.codahale" % "simplespec_2.9.0-1" % "0.3.4"
  "com.codahale" % "simplespec_2.9.0-1" % "0.4.1",
  "com.typesafe.akka" % "akka-stm" % "2.0-SNAPSHOT" 
) 
```

并且编译成功完成。

我不知道这是否是完成原始编译的确切配置，但目前这个问题并没有打扰我。

# mysql - 一次查询中的 SELECT 和 UPDATE

> ID：12018312
> 
> 赞同：0
> 
> 时间：2012-08-18T11:50:59.803
> 
> 标签：mysql, sql

我正在尝试执行查询，但我不知道在不使用存储过程的情况下让它工作，但由于我使用的编程语言的限制，它的 mysql 平台不会接受存储过程/函数。

代码是：

```
select
    (myrpg_faction_info.funds) as bank,
    (
        myrpg_faction_info.paycheckrate +
        myrpg_faction_ranks.paycheckrate +
        sum(myrpg_faction_flags.paycheckrate)
    ) as rate

from 
    myrpg_faction_info
inner join
    myrpg_faction_ranks 
        on 
            myrpg_faction_info.id = myrpg_faction_ranks.fid and 
            myrpg_faction_ranks.rank=1
inner join
    myrpg_faction_flags 
        on 
            myrpg_faction_info.id=myrpg_faction_flags.fid and
            (1 << myrpg_faction_flags.flag) & 1
where myrpg_faction_info.id=1 
```

但我必须保存汇率和银行变量（在 SQL 中）并更新 faction_info 表以从 faction_info.bank 列中取出汇率并选择取出的值，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:55:38.080

```
update mfi
set myrpg_faction_info.funds -
    (
        myrpg_faction_info.paycheckrate +
        myrpg_faction_ranks.paycheckrate +
        sum(myrpg_faction_flags.paycheckrate)
    ) as rate
from 
    myrpg_faction_info mfi
inner join
    myrpg_faction_ranks 
        on 
            myrpg_faction_info.id = myrpg_faction_ranks.fid and 
            myrpg_faction_ranks.rank=1
inner join
    myrpg_faction_flags 
        on 
            myrpg_faction_info.id=myrpg_faction_flags.fid and
            (1 << myrpg_faction_flags.flag) & 1
where myrpg_faction_info.id=1 
```

# java - 在Java中组合两个图形对象

> ID：12018321
> 
> 赞同：0
> 
> 时间：2012-08-18T11:52:17.023
> 
> 标签：java, graphics

我有两个 Graphics 对象，是否可以将它们合并为一个？

Hovercraft Full of Eels 的答案很有用，但不是我的意思。假设我有两个 Graphics 对象，`private Graphics gr1`并且`private Graphics gr2`. 现在，我应该如何将它们合并到`paintComponent(Graphics)`方法中以将它们绘制到我的（例如 JPanel）？

问题根本不是关于图像，而仅仅是关于图形对象。对不起，第一段有误导性。

**编辑：**
响应充满鳗鱼的气垫船：

如果您在该`paintComponent()`方法中绘制，我发现如果您重绘屏幕，一切都消失了，如果您想移动某些东西，您必须保存所有东西的坐标和尺寸，调整它们并将它们以某种方式放在您的 Graphics 对象中。
我问自己的问题是：什么对象最适合或保存图形对象。一个图形对象，我想。但问题是，如果你有（例如）两个矩形，一个向左移动，一个向右移动，如果你有 1 个 Graphics 对象，你就不能。
我的解决方案是多个图形对象，它们可以转换为模拟运动，然后绘制到屏幕上。
@Hovercraft Full of Eels 我认为您（以及大多数 SO'ers）认为这不是一个好的解决方案，看看您的答案。
但是，一个回答说`You're doing it all wrong, you'd better stop programming`根本没有帮助我，所以请给我一个替代方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:33:22.693

您可以通过获取其 Graphics 上下文、在其中绘制，然后处理 Graphics 对象，将任何图像绘制到 BufferedImage 中。例如

```
// get a Graphics object from BufferedImage, img1
Graphics g = img1.getGraphics();

// use that g to draw another BufferedImage starting at x, y of 0, 0
g.drawImage(img2, 0, 0, null);

// clean up resources so as not to run out.
g.dispose(); 
```

现在 img1 显示旧的 img1 和 img2 覆盖它。如果您希望图像是透明的，您需要阅读 alpha 合成以及如何使用它

**编辑**
关于您编辑的问题：

> 我有两个 Graphics 对象，是否可以将它们合并为一个？
> Hovercraft Full of Eels 的答案很有用，但不是我的意思。假设我有两个图形对象，私有图形 gr1 和私有图形 gr2。现在，我应该如何将它们合并到paintComponent(Graphics) 方法中以将其绘制到我的（例如JPanel）？
> 问题根本不是关于图像，而仅仅是关于图形对象。对不起，第一段有误导性。

这个请求让我有些困惑，因为我认为 Graphics 对象是用于在图像或屏幕上绘制某些东西的钢笔或画笔。所以我不认为您将 Graphics 对象绘制到任何东西上，而是将 Graphics 对象用作工具来绘制到可以显示或存储图形的其他东西上。你将不得不付出更多的努力来提出你的问题，向我们提供足够的细节，这样我们就不必一直猜测你想要做什么。请告诉我们整个故事。

**编辑 2**
针对您对问题的最新编辑：

> 如果你在 paintComponent() 方法中绘制，我发现如果你重绘屏幕，一切都消失了，如果你想移动一些东西，你必须保存所有东西的坐标和尺寸，调整它们并以某种方式在你的 Graphics 中获取它们目的。我问自己的问题是：什么对象最适合或保存图形对象。一个图形对象，我想。但问题是，如果你有（例如）两个矩形，一个向左移动，一个向右移动，如果你有 1 个 Graphics 对象，你就不能。

不，我认为更好的解决方案是使用 BufferedImage 来保存应该保留的内容。当您想将图像添加到背景 BufferedImage 时，您可以通过调用`getGraphics()`它来获取 BufferedImage 的 Graphics 对象，然后使用 Graphics 对象的`drawImage(...)`方法将图像绘制到它，然后调用`dispose()`BufferedImage 的图形对象以免丢失资源。

要在背景中绘制背景 BufferedImage，您需要在`paintComponent(...)`方法的顶部调用它，通常是在调用`super.paintComponent(...)`方法之后。

> 我的解决方案是多个图形对象，它们可以转换为模拟运动，然后绘制到屏幕上。@Hovercraft Full of Eels 我认为您（以及大多数 SO'ers）认为这不是一个好的解决方案，看看您的答案。

是的，你猜对了——我相信有比你建议的更好的解决方案。

在我对这个问题的回答中的代码帖子中可以找到我所了解的一个示例：[changeing-jpanel-graphics-g-color-drawing-line](https://stackoverflow.com/a/6105437/522444)。

如果你运行我的代码，你会看到：

![在此处输入图像描述](../Images/998fee67b73d0abd41e4f7571fb627f9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T12:46:45.307

*   要[*拼版*](http://en.wikipedia.org/wiki/Imposition)图像，请使用适当的布局，如此[处所示](https://stackoverflow.com/a/7602126/230513)。

*   要[*合成*](http://docs.oracle.com/javase/7/docs/api/java/awt/AlphaComposite.html)图像，请使用适当的合成规则，如此[处所示](https://sites.google.com/site/drjohnbmatthews/composite)。

附录：@HFOE 是正确的。`Graphics`or的一个实例`Graphics2D`，有时称为*图形上下文*，是应用渲染方法的临时手段；目标设备或离屏图像必须独立存在。实现该[`Shape`](http://docs.oracle.com/javase/7/docs/api/java/awt/Shape.html)接口的类是封装有关在给定上下文中呈现*什么的信息的良好候选者。*[`AffineTest`](https://stackoverflow.com/questions/5594424)并且[`GraphPanel`](https://sites.google.com/site/drjohnbmatthews/graphpanel)是例子。

# php - 如何为复选框数组中的每个值选择mysql数据库上的值

> ID：12018325
> 
> 赞同：0
> 
> 时间：2012-08-18T11:53:03.767
> 
> 标签：php, mysql

我正在尝试进行批量操作。我有复选框，

```
<input type="checkbox" name="check_id[]" value="1">
<input type="checkbox" name="check_id[]" value="2">
<input type="checkbox" name="check_id[]" value="3"> 
```

我想为每个选定的复选框从 mysql 表中选择值，然后使用我的函数根据获取的值删除数据。我试过了，

```
for( $i = 0; $i < count( $_POST['check_id'] ); $i++ ) {
  $manufacturers_id = prepare_input($_POST['check_id'][$i]);
  $manufacturer_query = mysql_query("select manufacturers_image from " . TABLE_MANUFACTURERS . " where manufacturers_id = '" . (int)$manufacturers_id . "'");
  $manufacturer = mysql_fetch_array($manufacturer_query);

  delete_image(DIR_IMAGES . $manufacturer['manufacturers_image']);
} 
```

问题是，`$_POST['check_id']`即使我确定我的`manufacturers_image`位置是`manufacturers_id`1,2 或 3，也没有基于获取的 mysql 值。

有没有正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:58:00.960

更改此行

```
$manufacturer = mysql_fetch_array($manufacturer_query); 
```

至

```
$manufacturer = mysql_fetch_assoc($manufacturer_query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:59:48.580

它正在返回一个数组...您使用`while()`或获取第一张图像

```
delete_image(DIR_IMAGES . $manufacturer[0]['manufacturers_image']); 
```

# javascript - Google 面积图 - 在 vAxis 上设置最小值

> ID：12018326
> 
> 赞同：2
> 
> 时间：2012-08-18T11:53:10.720
> 
> 标签：javascript, google-visualization

我有一个简单的谷歌面积图，只有一个系列和 2 列 - 日期和金钱。唯一的问题是当“Money”列中的所有值都是 0、1 或 2 时。然后，在垂直轴上出现重复值。

例如，当所有值都为 0 时，`vAxis`则为：

1

1

0

当所有值都为 1 时，`vAxis`则为：

1

1

1

0

0

这真的很奇怪，我不知道我错过了什么，我在任何地方都找不到同样的问题。

API 是这样加载的：

```
google.load('visualization', '1.0', {packages: ['corechart'], 'callback':drawVisualization}); 
```

图表的数据是这样的，例如：

```
 var data = new google.visualization.DataTable();
  data.addColumn('string','Date');
  data.addColumn('number', 'Money');
  data.addRows([
     ['March 1',  0],
     ['March 2',  0],
     ['March 3',  0],
     ['March 4',  0]
  ]); 
```

创建图表的代码是这样的：

```
ac.draw(data, {
  chartArea: {width: '90%', height: '80%'},
  legend: {position: 'none'},         
  colors:['#24b3b0'],
  isStacked:false,
  pointSize: 10,
  width: 938,
  height: 400,
  areaOpacity: 0.2,
  hAxis:{
    showTextEvery:7,
    maxAlternation:1,
    maxTextLines:1
  },
  vAxis:{
     viewWindowMode:'explicit',
     viewWindow:{
          min:0
     },
     format:'$###,###,###',
     gridlines:{
        color:'#ccc' 
     },
     baselineColor:'#cfcfcf'
  }
}); 
```

我`viewWindow.min`用来设置 的最小值`vAxis`，因为`vAxis.minValue`没有效果，如该问题所述：[Setting a hard minimum axis value in Google Charts API](https://stackoverflow.com/questions/6359935/setting-a-hard-minimum-axis-value-in-google-charts-api)

# function - 批处理 - 如何从批处理文件中返回值？

> ID：12018328
> 
> 赞同：6
> 
> 时间：2012-08-18T11:53:12.680
> 
> 标签：function, batch-file, return

我知道如何从同一个批处理文件中的函数返回值，但是我发现从不同的批处理文件返回值时存在一些问题。这是一个例子：

文件`1.cmd`

```
SETLOCAL ENABLEEXTENSIONS
SETLOCAL ENABLEDELAYEDEXPANSION

set number=1
call 2.cmd

echo. %number%

ENDLOCAL
exit /B 
```

文件`2.cmd`

```
SETLOCAL ENABLEEXTENSIONS
SETLOCAL ENABLEDELAYEDEXPANSION

ENDLOCAL & set number=2
exit /B 
```

而且输出还是1。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T14:31:53.183

LittleBobbyTables 是在正确的轨道上。

您使用两个 SETLOCAL 但只有 1 个 ENDLOCAL 会导致设置变量，但随后定义丢失，因为当批处理在 EXIT / B 处退出时还有一个额外的隐式 ENDLOCAL。每当批处理或函数终止时，所有 SETLOCAL 都会结束。在设置值之前，您的代码只需要一个额外的 ENDLOCAL。

```
SETLOCAL ENABLEEXTENSIONS
SETLOCAL ENABLEDELAYEDEXPANSION

ENDLOCAL & ENDLOCAL & set number=2
exit /B 
```

但是很少需要 enableExtensions，因为默认情况下总是启用扩展。您应该能够删除 SETLOCAL ENABLEEXTENSIONS 并使用单个 ENDLOCAL。

如果出于某种原因您确实需要启用扩展，那么您可以在单个 SETLOCAL 上使用这两个选项，并且仍然只需要一个 ENDLOCAL

```
SETLOCAL ENABLEEXTENSIONS ENABLEDELAYEDEXPANSION

ENDLOCAL & set number=2
exit /b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T12:46:36.553

I'm having a hard time explaining it properly, but the combination of both

```
SETLOCAL ENABLEEXTENSIONS
SETLOCAL ENABLEDELAYEDEXPANSION 
```

in your `2.cmd` file are causing a delay in the evaluation of the variable.

If either is individually enabled, `%number%` should still be set to 2, but together, `%number%` will be set to 1.

# c++ - 对象初始化中的复制构造函数

> ID：12018329
> 
> 赞同：0
> 
> 时间：2012-08-18T11:53:18.130
> 
> 标签：c++, class, copy-constructor, assignment-operator, object-initialization

这里有理论上的疑问。阅读一本书，并给出以下声明：`StringBad metoo = knot;`其中：

*   StringBad 是一个类
*   结是该类的对象

作者对复制构造函数说了以下内容：

> 实现可以选择分两步处理此语句：使用复制构造函数创建临时对象，然后使用赋值将值复制到新对象。也就是说，初始化总是调用复制构造函数，并使用 = 运算符形成也可以调用赋值运算符。

我的实现一步完成：

*   使用复制构造函数创建 metoo 对象，与 this 相同：`StringBad metoo(knot);`

我可以理解其他实现可以通过如下两个步骤来完成：

*   **使用默认构造函数**创建一个 metoo 对象，例如：`StringBad metoo;`
*   使用重载赋值运算符将节点对象分配给metoo 对象。

但是作者说初始化总是调用**复制构造函数**。那是对的吗？如果是这样，编译器在某些实现中将遵循哪些步骤以分两步完成？我无法在我的事业中对其进行测试，正如我所说的那样，它是一步完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:59:13.320

作者错了。您所拥有的是带有复制初始化的声明语句，而实现这一点的唯一方法是通过`StringBad(StringBad const &)`复制构造函数实例化一个新对象。*在这种情况下*永远不会*调用赋值运算符，甚至不需要存在或可访问。

There is almost no difference between the two variants `StringBad metoo = knot;` and `StringBad metoo(knot);`.

[*) or the non-const version if that happens to exist and match.]

# javascript - Javascript，通过鼠标悬停和单击切换图像

> ID：12018332
> 
> 赞同：1
> 
> 时间：2012-08-18T11:53:36.620
> 
> 标签：javascript, jquery, click, mouseover

我有一些按钮（“ul.subjects li”）和...
1\. 通过鼠标悬停操作更改按钮的背景图像
2\. 可以一次单击一个按钮。
　所以一旦点击了一个按钮，其他的就会被取消。我有两个此按钮列表，并通过单击的项目（主题和年龄）切换内容。

我可以通过将 (class="mat" 的 "class" 更改为 class="mat_c") 来切换背景图像。

```
$(function(){
    $(document).delegate("ul.subjects li a", "mouseover", function(){
        $(this).data("imgc", $(this).attr("class"));
        var regex = /_s/;
        if (regex.test($(this).data("imgc")) == false ) {
        $(this).attr("class", $(this).data("imgc")+"_c")
        }
    });
    $(document).delegate("ul.subjects li a", "mouseout", function(){
        $(this).attr("class", $(this).attr("class").replace(/_c/, ""));
    });
});

<ul class="subjects">
    <li><a id="mat" class="mat" href="/age=all/sub=mat/"></a>算数・数学&lt;/li>
    <li><a id="soc" class="soc" href="/age=all/sub=soc/"></a>社会</li>
    <li><a id="sci" class="sci" href="/age=all/sub=sci/"></a>理科</li>
    <li><a id="eng" class="eng" href="/age=all/sub=eng/"></a>英語</li>
</ul> 
```

虽然按钮单击操作无法正常工作，但尝试将属性更改为 class="..._s"，
但立即更改为 class="..._c"。

```
$(function(){
    $(document).delegate("ul.subjects li a", "click", function(){
        $("ul.subjects").html($("ul.subjects").html().replace(/_s/g, ""));
        $(this).attr("class", $(this).attr("class").replace(/_c/, "_s"));
    });
}); 
```

也许我应该控制事件或它们的顺序......
并且应该有更简单的方法来做到这一点。我该如何解决这个问题？

正如您在[http://jsfiddle.net/MsdGS/1/](http://jsfiddle.net/MsdGS/1/)上看到的那样，
单击下面的列表后，鼠标悬停操作无法正常工作。

单击按钮的“类”应更改为“..._s”，
（class="mat" 到 class="mat_s"）
但“..._s”立即更改为“..._c”。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:29:04.703

尝试使用`hover`来实现mouseover和mouseout，比如

```
 $("ul.subjects li a").hover(function() {
      $(this).css("background-image", "www.google.com");
     }, function() {
      $(this).css("background-image", "www.google.com");
     }); 
```

如您所见，只需尝试使用`css:background-image`直接更改背景图像。这将绕过您的问题。

希望这对你有用。

[.hover() API](http://api.jquery.com/hover/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:21:21.957

[结果](http://jsfiddle.net/MsdGS/13/)（我已删除`href`底部`ul`列表中的）

如果我理解你的问题是正确的，这就是你需要改变的：

```
$(function(){
    $("#course_tb").load("/age=all/sub=all/"+"#course_tb");
    $(document).delegate("ul.subjects li a", "click", function(){
        // iterate through `subjects`'s "a"
        $("ul.subjects li a").each(function(index, el){
            $(el).attr("class", $(el).attr("class").replace(/_s/g, ""));
        });
        //html($("ul.subjects").html().replace(/_s/g, ""));
        // ...
        return false;
    } );
} ); 
```

# vb.net - VB.NET获取麦克风输入

> ID：12018333
> 
> 赞同：0
> 
> 时间：2012-08-18T11:53:45.693
> 
> 标签：vb.net, progress-bar, volume, microphone, speech

如何获得麦克风的输入音量介绍进度条？
如果可以的话，我需要在没有 API 的情况下执行此操作。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:16:49.780

我可以请您注意[这篇](http://channel9.msdn.com/coding4fun/articles/NET-Voice-Recorder)文章，它向您展示如何使用 nAudio dll 获取输入声音，甚至向您展示如何将其输出到进度条。它在 C# 中，但应该很容易转换。

# html - 如何使带有谷歌地图的网站离线可用

> ID：12018337
> 
> 赞同：0
> 
> 时间：2012-08-18T11:54:46.160
> 
> 标签：html, offline-caching, kmz

我在 html5 中使用离线缓存创建了一个网页[http://babysoftblog.co.cc/shahma/kmz/map_sexten.html](http://babysoftblog.co.cc/shahma/kmz/map_sexten.html)。它使用 kmz 文件显示谷歌地图。该页面在线运行良好..但它没有显示谷歌页面关闭时映射 [en 离线。我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:46:56.283

谷歌地图不能这样离线使用。Google Maps 不仅仅是最初的 Lib，例如图像、位置数据等。如果您的网站不需要所有导航功能，我建议您查看 Static Map API。

最初您包含静态地图，它只是可以离线缓存的图像文件，然后检查连接状态并稍后加载动态地图（也称为渐进增强）。

# c# - C# 中的 HttpUtility.UrlEncode 转换为服务器上的什么？

> ID：12018338
> 
> 赞同：1
> 
> 时间：2012-08-18T11:54:59.873
> 
> 标签：c#, encoding, decoding

我有一个字符串，我试图从我的 C# 应用程序传递到我的 ASP.NET MVC 3 端点。该字符串如下所示

```
(2+3=5)/20 
```

我正在使用 HttpUtility.UrlEncode 方法来准备数据。我注意到生成的字符串如下所示：

```
(2%2b3%3d5)%2f20 
```

该值被传回 ASP.NET MVC 3 端点。我知道端点如下所示：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult UploadData(string data)
{
  // What does "data" look like here? Does it look like (2+3=5)/20 or, (2%2b3%3d5)%2f20
} 
```

我试图了解数据在传回时在服务器上的样子。如果服务器上的变量在没有任何操作的情况下使用，它将是 (2+3=5)/20 还是 (2%2b3%3d5)%2f20？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:56:22.550

> 这里的“数据”是什么样的？它看起来像 (2+3=5)/20 还是 (2%2b3%3d5)%2f20

它看起来像这样：`(2+3=5)/20`。ASP.NET 负责正确解码 url 编码的查询字符串参数。

# python - 让电子邮件的收件人回复到不同的地址

> ID：12018340
> 
> 赞同：1
> 
> 时间：2012-08-18T11:55:06.840
> 
> 标签：python, django, gmail

我正在使用 gmail smtp 发送电子邮件，它工作正常。唯一的问题是我希望电子邮件的收件人回复不同的电子邮件地址。换句话说，我向他们发送了一封电子邮件，`me@gmail.com`但当他们单击回复时，应该回复该消息`another@gmail.com`或`another@yahoo.com`。请问我怎样才能做到这一点。

在我的`settings.py`我有：

```
EMAIL_USE_TLS = True
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = 'me@gmail.com'
EMAIL_HOST_PASSWORD = 'mypassword'
EMAIL_PORT = 587 
```

在我的`views.py`我有：

```
email = EmailMessage(
            subject='Registration Successful',
            body=msg,
            from_email='My Name <me@gmail.com>',
            to='recipient@gmail.com')
        email.send() 
```

这有效，但收件人回复`me@gmail.com`. 我希望收件人回复`another@gmail.com`。请问我需要对此代码做什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T11:59:12.240

尝试`Reply-To`在电子邮件中添加标题：

```
email = EmailMessage(
            subject='Registration Successful',
            body=msg,
            from_email='My Name <me@gmail.com>',
            to='recipient@gmail.com',
            headers={'Reply-To': 'another@gmail.com'})
email.send() 
```

# php - 保存数据数据库的想法

> ID：12018344
> 
> 赞同：0
> 
> 时间：2012-08-18T11:55:36.050
> 
> 标签：php, javascript, mysql, html, joomla

我有一个 Web 应用程序，我需要将在一个页面（页面 A）上从 Joomla 内容管理器创建的数据传递到另一个页面（页面 B）

假设它是一篇新闻文章，页面 B 是我网站的主页面，例如。`http://mysite.com/index.php`,

为了自动完成此操作（即在管理员创建并按下保存文章后），我会将其保存到数据库中，每当调用主站点时，我都会嵌入一个 php 代码来连接并读取和处理来自所有文章并将其插入新闻部分以按预期显示它们。

这是一个很好的可行方法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:50:03.567

是的，它可以做到。使用 $_GET 或 $_POST 。

# ms-access - MS Access 表单拒绝连接到 SQL Express 后端

> ID：12018352
> 
> 赞同：2
> 
> 时间：2012-08-18T11:56:27.900
> 
> 标签：ms-access, ms-access-2007, sql-server-2008-express

我有一个 MS Access 2007 前端和 SQL Server Express 后端。（这最初是从访问数据库中扩大的）。

此数据库已从生产复制并在与生产服务器不同的位置/域中运行。这用于开发。我有两个连接字符串，所以我可以在服务器/数据库之间切换。

我通过 ODBC 连接字符串连接 MS Access 链接表，使用 SQL 身份验证进行连接。

SQL 用户拥有对数据库的 dbowner 权限/访问权限

链接表刷新正常，我可以在前端打开表并修改表中的数据，但是当我尝试打开标准 Access 表单时，大部分都直接链接到表，我得到“连接失败... .. 服务器不存在或访问被拒绝”。然后会出现一个带有原始服务器名称的 SQL Server 登录框，而不是表当前连接到的服务器。

这是供您参考的连接字符串： { Dim sLocalName As String Dim tdf As TableDef Dim rs As dao.Recordset

```
''This is a basic connection string, you may need to consider password and so forth
' cn = "ODBC;DSN=aid_dev;Trusted_Connection=No;APP=Microsoft Office 2007;DATABASE=aid_dev;"
cn = "ODBC;DRIVER=SQL Server;SERVER=KAL1\SQLEXPRESS;DATABASE=aid_dev;Uid=User;Pwd=Password"

''All fields fro`enter code here`m tables
strSQL = "SELECT TABLE_CATALOG, " _
& "TABLE_SCHEMA, " _
& "TABLE_NAME, " _
& "TABLE_TYPE " _
& "FROM [" & cn & "].INFORMATION_SCHEMA.tables " _
& "WHERE TABLE_TYPE = 'BASE TABLE'"

Set rs = CurrentDb.OpenRecordset(strSQL)

Do While Not rs.EOF
    sLocalName = rs!TABLE_SCHEMA & "_" & rs!TABLE_NAME

    With CurrentDb
        If DLookup("Name", "MSysObjects", "Name='" & sLocalName & "'") <> vbNullString Then
            If .TableDefs(sLocalName).Connect <> cn Then
                .TableDefs(sLocalName).Connect = cn
                .TableDefs(sLocalName).RefreshLink
            End If
        Else
            ''If the table does not have a unique index, you will neded to create one
            ''if you wish to update.
            Set tdf = .CreateTableDef(sLocalName)
            tdf.Connect = cn
            tdf.SourceTableName = rs!TABLE_NAME
            .TableDefs.Append tdf
            .TableDefs.Refresh

            ''This will produce a message box if the table does not have a unique index
            ''DoCmd.TransferDatabase acLink, "ODBC Database", cn, acTable, rs!TABLE_NAME, sLocalName
        End If
    End With
    rs.MoveNext
Loop} 
```

提前致谢

罗杰

**编辑 - 发现问题，但现在如何处理它** 我发现一旦我建立连接，它实际上会创建到 SQL 表的链接，但作为 dbo.Tablename。现在这会破坏所有报告，因为表单不指向 dbo.tablenames 而只是表名。原始链接仍然存在，具有相同的原始连接属性。

1）如何更改原始表连接属性或 2）如何将 dbo.tablename 重命名为 tablename

还是我只是更改每个表单查询等......

帮助这让我发疯。

谢谢

罗杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:44:58.007

这是我用来更改表名的函数。我在启动时运行它：

```
Public Sub subChangeLinkedTableNames()

    Dim dbCurr As DAO.Database
    Dim tdfCurr As DAO.TableDef

    Set dbCurr = CurrentDb()

    For Each tdfCurr In dbCurr.TableDefs
        If Len(tdfCurr.Connect) > 0 Then
            If Left(tdfCurr.Name, 4) = "dbo_" Then
                tdfCurr.Name = Replace(tdfCurr.Name, "dbo_", "")
            End If
        End If
    Next

    Set tdfCurr = Nothing
    Set dbCurr = Nothing

End Sub 
```

我现在采用了不同的方法。每次加载数据库应用程序时，我都会删除所有现有的链接表并重新建立它们。我设计了自己的方法，我使用 ADO 连接连接到 SQL Server，该方法使用名为 _LinkedTables 的表加载 ADO 记录集。此表包含创建每个链接所需的信息，包括真实表名称和 LinkAs 名称（它允许我使用不同的名称链接到表，这对视图等内容很有帮助）。我还有一个包含主键字段名称的字段。

建立与 SQL Server 的初始 ADO 连接所需的信息包含在我的前端文件中的一个本地静态表中，该表称为 tblDatabase。这里我有 ADO 和 ODBC 的连接字符串。我什至写了它，以便我可以使用不同的数据库进行开发和生产。

这一切并没有那么先进，因为它是一个相关表格和代码的网络，在这里发布太多了。

有些人只是在每次加载数据库时刷新链接，这很好用。我有一个非常具体的原因，我删除并重新链接每个表，但我不记得它到底是什么。我认为这与我经常在数据库上工作有关，我希望更改能够尽快生效，即使是在现有的前端文件上（以防我出错）。我希望能够让用户关闭、重新打开并链接到一秒钟前还没有链接的表，而不是仅仅重新链接现有的表链接。但这确实是一种边缘情况，很可能是矫枉过正，导致相当多的额外加载时间。如果你有20张桌子没关系。如果你有 200 个，那可能不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:44:52.747

"*创建到 SQL 表的链接，但作为 dbo.Tablename* "

请仔细检查这一点。该代码使用`TABLE_SCHEMA`and`TABLE_NAME`创建链接名称，并使用下划线（不是点）来连接它们。因此`dbo.Tablename`，它不会作为链接名称，而是为您提供`dbo_Tablename`.

如果您的表单期望`Tablename`作为链接名称，您有 2 个选择：

1.  修改表单的数据源属性以使用`dbo_Tablename`
2.  更改代码以将链接命名为 just`Tablename`而不是`dbo_Tablename`

您可以更改代码以`Tablename`像这样使用链接名称...

```
'sLocalName = rs!TABLE_SCHEMA & "_" & rs!TABLE_NAME '
sLocalName = rs!TABLE_NAME 
```

如果该代码不清楚这一点，则在*创建*链接时，该链接数据将是只读的。如果您希望链接数据在使用它的表单中是可编辑的，那么您还有更多工作要做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T20:31:36.927

代码从以下位置获取本地名称：

```
 sLocalName = rs!TABLE_SCHEMA & "_" & rs!TABLE_NAME 
```

但是您不必包含`rs!TABLE_SCHEMA & "_" &`，这是它获得“dbo_”的地方。

所以

```
 sLocalName = rs!TABLE_NAME 
```

实际上，本地名称或多或少可以是您喜欢的任何名称。

# c# - 如何在 SQL Server 2005 中存储日期和时间？

> ID：12018364
> 
> 赞同：-4
> 
> 时间：2012-08-18T11:59:57.540
> 
> 标签：c#, asp.net, sql-server, datetime

我正在使用 C# 和 SQL Server 2005。我想在我的表中存储日期和时间。在 SQL Server 中，我使用`smalldatetime`数据类型。我正在使用此代码。

```
TimeZoneInfo ob1 = TimeZoneInfo.FindSystemTimeZoneById("India Standard Time");
DateTime dt = TimeZoneInfo.ConvertTimeFromUtc(DateTime.UtcNow, ob1); 
```

并通过此查询插入数据

```
insert into tablename (name,sub_date) values (@name,'{0}')",dt.ToShortTimeString() 
```

但是，问题是在我的表中日期和时间是这样存储的`1/1/1900 5:15:00 PM`。不存储实际日期。如何在数据库中存储实际日期和时间。

**注意：**我想根据日期和时间显示表格的所有记录。所以，日期和时间对我来说都很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:03:03.540

使用参数化查询并将 DateTime 作为参数传递。使用字符串总是一个坏主意（尤其是不是文化不变的字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T12:13:34.547

尝试这样的事情：

```
// Define insert statement with parameters
string insertStmt = "INSERT INTO dbo.tablename (name, sub_date) VALUES (@name, @mydate)";

// setup connection and command objects
using(SqlConnection conn = new SqlConnection("your-connection-string-here"))
using(SqlCommand cmd = new SqlCommand(insertStmt, conn))
{
    // add parameters to command
    cmd.Parameters.Add("@name", SqlDbType.VarChar, 50).Value = ".....";
    cmd.Parameters.Add("@mydate", SqlDbType.DateTime).Value = dt;

    // open connection, execute query, close connection
    conn.Open();
    cmd.ExecuteNonQuery();
    conn.Close();
} 
```

这应该够了吧！没有从字符串到字符串的混乱转换`DateTime`- 该`DateTime`值“按原样”保留，并以相同的格式存储在 SQL Server 中。通过使用参数，您既消除了 SQL 注入攻击的可能性，而且，如果您需要使用不同的值多次调用此查询，则可以重复使用此查询，从而提高性能！

# tfs - 在 TFS 中使用 tf 命令检查文件夹？

> ID：12018367
> 
> 赞同：0
> 
> 时间：2012-08-18T12:00:10.007
> 
> 标签：tfs, command, checkin

我知道我可以将文件签入 TFS，但我想知道是否有办法使用 tf 命令签入文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:03:44.330

使用 tf add 和 checkin 可以签入一个空文件夹。但是， tf checkin /recursive 将签入给定目录下的所有内容。

# java - 什么是“顺序一致的执行没有数据竞争”？

> ID：12018369
> 
> 赞同：8
> 
> 时间：2012-08-18T12:00:20.933
> 
> 标签：java, memory-model

在[*JLS 中，第 17.4.5 节。Happens-before Order*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)，它说

> 当且仅当所有顺序一致的执行都没有数据竞争时，程序才能正确同步。

它只给我们关于“顺序一致”的定义，它没有给我们关于“顺序一致执行”的定义。只有在知道什么是“顺序一致的执行”之后，我们才能进一步讨论这个话题。

那么什么是“顺序一致的执行”以及什么是“顺序一致的执行没有数据竞争”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T12:18:42.143

执行有一个非常简单的正式定义：它只是对正在考虑的所有内存操作集的总排序。

顺序一致的执行由顺序一致的动作的任何总排序表示。

JLS 也精确定义了“无数据竞争”一词。

请注意，JLS 不需要顺序一致性。事实上，*happens-before*的整个形式主义的存在是为了精确定义顺序不一致的执行可以维持**顺序一致性错觉**的术语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T12:09:49.520

`sequentially consistent executions`基本上意味着对变量的每个读取操作都会看到对该变量的最后一次写入操作，无论在哪个线程或处理器上执行读/写操作。

但是，JLS 不保证开箱即用的顺序一致性。程序员必须通过适当的同步来实现这种一致性。如果没有同步，线程可能会看到不适当的数据，例如同时被另一个线程修改的数据。这被称为“数据竞赛”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T12:36:05.510

为确保两个操作不存在数据竞争，您必须使用[§17.4.5中指定的五个条件中的任何一个在两个操作之间建立](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)[*发生前的*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)关系，并在[*内存一致性属性*](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility)中进行了概括。一旦你这样做了，你的程序就与这两个动作*正确同步了。*该程序的所有执行似乎都是顺序一致的，您可以放心地忽略[*§17.4.3 中允许的任何重新排序。*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.3)[*节目和节目顺序*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.3)。[](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility)**[](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.3)**

 **** * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-14T18:17:03.753

1)**顺序一致**的执行（按定义）：任何执行的结果都与所有处理器的操作都按某种顺序执行一样，并且每个单独的处理器的操作按照指定的顺序出现在该顺序中它的程序

2）**数据竞争**是并发操作访问共享内存位置的情况，其中至少一个是写入。

3）因此，如果执行顺序不一致，它们的结果将与程序结果不同，或者会表现出意外的行为。我们不想要这样的处决。

4）如果假设有一个seq。反对。没有数据竞争的执行，则意味着该序列存在另一个分支。反对。重新排序数据竞争点中的访问并导致不同的程序结果的执行。然后，这些执行与程序的顺序不一致，或者

5）程序允许seq。反对。执行具有违反直觉的行为和意外结果，因此未正确同步。***

# windows-phone - Windows Phone 和网格中的动态磁贴

> ID：12018370
> 
> 赞同：0
> 
> 时间：2012-08-18T12:00:31.427
> 
> 标签：windows-phone, live-tile

我正在尝试使用用户控件为我的应用程序创建一个动态磁贴。用户控件包含一个网格、一个图像和一个用颜色填充的矩形。

现在有趣的部分来了。

我希望矩形充当图块标题的背景，并希望图像填充图块的其余部分。我对自己说，好吧，让我们在该网格中放置一些行，并像您通常在 WPF/SL 应用程序中设置它们一样设置它们。

然后我将整个内容写在 WBM 中并将其保存到 isostore。

问题是，解析器似乎忽略了网格行的存在。无论我尝试什么，矩形都没有显示，并且图像覆盖了整个图块，而它应该只覆盖第一行。就好像网格甚至不存在一样。

另一个有趣的方面是，无论我使用行还是列，结果都是一样的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:46:59.927

您是否使用以下方法？ [动态 LiveTile - 添加背景图像？](https://stackoverflow.com/questions/8028889/dynamic-livetile-adding-background-image)

我最近使用带有行和列的网格实现了一个动态磁贴，用于一些文本块的布局。我遇到了类似的挑战，因此我将用于 Live Tile 的控件放在应用程序的空白页面上，以便更好地查看正在发生的事情。控件在页面上显示时是否正确呈现（而不是呈现到 WriteableBitmap）？

另一个想法。与其尝试相对于磁贴的标题定位 Rectangle，为什么不将 Title 属性留空并将相同的文本放在用户控件内的 TextBlock 中呢？

如果您注意 TextBlock 的字体和位置，则生成的背景图像上的文本可能与 Title 属性显示的文本无法区分。我决定自己遵循这个策略。我在以下答案中找到了字体信息： [Font size and family for a tile's title](https://stackoverflow.com/questions/8429950/font-size-and-family-for-a-tiles-title)

否则，您能否发布一个您正在使用的 XAML 示例？

# vb6 - 使用 winmm.dll 库从 VB6 应用程序播放 Internet Explorer 系统声音

> ID：12018372
> 
> 赞同：1
> 
> 时间：2012-08-18T12:00:52.647
> 
> 标签：vb6

我的声明如下：

```
Private Declare Function PlaySound Lib "winmm.dll" Alias "PlaySoundA" (ByVal lpszName _
As String, ByVal hModule As Long, ByVal dwFlags As Long) As Long 
```

我正在使用代码：

```
PlaySound Text2.Text, 0, &H1 
```

Text2 是我表单上的一个文本框，我用它来试验不同的声音别名。

它适用于 Windows 默认声音（例如“SystemAsterisk”、“SystemStart”、“WindowsLogOn”、“DeviceConnect”等），但如何让我的应用播放资源管理器声音？

在注册表中，默认声音存储如下：

```
HKEY_CURRENT_USER\AppEvents\Schemes\Apps\.Default\DeviceConnect\.Default 
```

如果我将“DeviceConnect”传递给 Playsound 函数，它会播放正确的声音。但是我怎样才能获得存储在树的其他分支中的声音呢？例如：

```
HKEY_CURRENT_USER\AppEvents\Schemes\Apps\Explorer\Navigating\.Default 
```

我用谷歌搜索了几个小时，但仍然没有解决方案。非常感谢你的帮助！

戴维德

PS：我知道我可以将我想要的声音复制到我的应用程序文件夹中，但我试图勾选单个可执行文件以便于分发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:59:33.903

您拥有的导航示例是特定于应用程序的声音。不幸的是，您可以传递给 PlaySound() 调用的 SND_APPLICATION 标志仅适用于您的应用程序。

有几种方法可以在您自己的应用程序中播放此声音：

*   从注册表中读取文件名并将声音作为文件播放。

*   在注册表中创建您自己的特定于应用程序的定义（从 Explorer 注册表项复制文件名）并使用 SND_APPLICATION 和 SND_ALIAS 标志来播放它。如果您总是希望它与资源管理器版本匹配，则每次启动程序时都必须设置 reg 值。

*   由于您不想在程序中包含多个文件，您可以将声音作为资源嵌入到应用程序中，并使用 SND_RESOURCE 标志来播放它。我会注意到，如果用户在控制面板中更改了导航声音，那么如果您这样做，您的声音将不匹配。

# .net - .net 中跨线程调用的替代方案

> ID：12018373
> 
> 赞同：0
> 
> 时间：2012-08-18T12:00:57.260
> 
> 标签：.net, backgroundworker

我正在开发一个有 4 个面板的应用程序。第一个面板显示静态图像，第二个面板加载网页。由于我将按顺序导航，因此我想在实际访问之前将网页加载到第二个面板中。如何实施？不可能使用新线程或后台工作者，因为它们不是线程安全的。有更好的方法吗？如何在不冻结我的用户界面的情况下加载网页，是否可以在我实际访问它之前加载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T12:29:02.380

您在这里没有选择，WebBrowser 类基本上是线程不安全的，并且具有硬线程亲和性。有很多方法可以在单独的线程上运行它，[这个答案](https://stackoverflow.com/a/4271581/17034)向您展示了如何。但只要您*还*需要它在 UI 上呈现页面内容，那么您*就必须*编写异步代码。无论您做什么，都必须在 DocumentCompleted 事件处理程序中实现。一个简单的状态机可以创造奇迹。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T12:02:05.480

Dispatcher.BeginInvoke(the_method_loading_the_page)

应该修复它。

# android - SQLite ORDER BY 嵌套查询的结果

> ID：12018377
> 
> 赞同：1
> 
> 时间：2012-08-18T12:01:24.203
> 
> 标签：android, sqlite, sql-order-by, nested-query

我有一个包含多个日期字段的表，我想选择日期最接近当前日期的行，无论它是哪一列。

数据库中有2个表；盖子：

```
create table covers (_id integer primary key autoincrement, "
        + "stallionName integer not null, mareName integer not null, firstCoverDate text not null, lastCoverDate text not null, "
        + "scan14Date text not null, scan28Date text not null, foalingDate text not null, inFoal integer not null, notes text not null," +
        "FOREIGN KEY (stallionName) REFERENCES horses (_id), FOREIGN KEY (mareName) REFERENCES horses (_id)) 
```

StallionName 和 mareName 是引用马表中相关马的行 _id 的整数（因此，SQL 查询有多个连接来获取公马和母马的名称，而不仅仅是行 _id）。所有日期列的格式为“YYYY-MM-DD”

和马：

```
create table horses (_id integer primary key autoincrement, "
        + "name text not null, type integer not null, birthDate text not null, vaccineDate text not null, "
        + "inFoal integer not null, notes text not null) 
```

type 是引用微调器位置的整数（类型是母马、种马、骟马等）

我想从封面表中选择 5 行，其值为最接近今天的日期的 scan14Date、scan28Date 和 foalingDate（即最紧急的 5 行）

这是我迄今为止的努力；

```
SELECT covers.* horses1.name AS stallionNameText, horses2.name AS mareNameText
FROM horses horses1 JOIN covers ON horses1._id = covers.stallionName JOIN horses     horses2 ON horses2._id = covers.MareName
WHERE covers._id IN

(SELECT DISTINCT _id FROM

(SELECT covers.scan14Date AS date, covers._id
FROM covers
WHERE date > dateToday
UNION

SELECT covers.scan28Date AS date, covers._id
FROM covers
WHERE date > dateToday

UNION

SELECT covers.foalingDate AS date, covers._id
FROM covers
WHERE date > dateToday

ORDER BY date)
LIMIT 5) 
```

（可以假设'dateToday'也是YYYY-MM-DD的形式，java整理出来的）

现在，下面的嵌套查询成功地选择了 5 个“最紧急”的行 _ids；

```
(SELECT DISTINCT _id FROM

(SELECT covers.scan14Date AS date, covers._id
FROM covers
WHERE date > dateToday
UNION

SELECT covers.scan28Date AS date, covers._id
FROM covers
WHERE date > dateToday

UNION

SELECT covers.foalingDate AS date, covers._id
FROM covers
WHERE date > dateToday

ORDER BY date)
LIMIT 5) 
```

并且第一部分成功获取了上面选择的_id行的所有数据；

```
SELECT covers.* horses1.name AS stallionNameText, horses2.name AS mareNameText
FROM horses horses1 JOIN covers ON horses1._id = covers.stallionName JOIN horses     horses2 ON horses2._id = covers.MareName
WHERE covers._id IN
.... 
```

我遇到的问题是嵌套查询返回的行 _ids 的顺序在整个查询中丢失了。例如，如果嵌套查询返回行 _ids (6, 3, 4, 12, 15)，则整个查询按顺序 (3, 4, 6, 12, 15) 显示它

然后我想返回种马名称、母马名称、lastCoverDate、14ScanDate、28ScanDate 和 foalingDate。

我的问题是如何维护内部查询返回的顺序？我天真地试图在最后添加 ORDER BY 日期，但可以预见的是没有这样的列。

感谢您花时间阅读。

（另外，我确信我的 SQL 查询不会是最有效的方法，但我对这一切还很陌生）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:42:07.277

在内部查询的结果中包含日期，然后您可以在外部查询中按日期排序。您的 Java 包装器可以简单地忽略结果中的日期字段。

# jquery - jquery 验证仅适用于单个按钮

> ID：12018378
> 
> 赞同：0
> 
> 时间：2012-08-18T12:01:25.107
> 
> 标签：jquery, asp.net

我在一个页面上有多个提交按钮，我只想在特定按钮单击时验证表单，而不是在任何其他提交按钮单击时验证表单。我没有得到一个很好的解决方案。我的验证码在这里

```
 <script type="text/javascript">
            $(document).ready(function () {

                var a = $("form").validate({  invalidHandler: function (d, b) {
                    var e = b.numberOfInvalids(); if (e) {
                        var c = e == 1 ? "You missed 1 field. It has been highlighted." : "You missed " + e + " fields. They have been highlighted."; $(".box .content").removeAlertBoxes();
                        $(".box .content").alertBox(c, { type: "warning", icon: true, noMargin: false });
                        $(".box .content .alert").css({ width: "", margin: "0", borderLeft: "none", borderRight: "none", borderRadius: 0 })
                    }
                    else {
                        $(".box .content").removeAlertBoxes()
                    }
                }, showErrors: function (c, d) {
                    this.defaultShowErrors(); var b = this; $.each(d, function () {
                        var f = $(this.element); var e = f.parent().find("label.error").hide(); e.addClass("red"); e.css("width", ""); f.trigger("labeled"); e.fadeIn()
                    })
                }
                })
        });

        </script> 
```

我可以为 jquery 验证指定类或 id，而不是在每个提交按钮的单击时导致它发生吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:35:22.180

我刚刚在[http://docs.jquery.com/Plugins/Validation/Reference得到了答案](http://docs.jquery.com/Plugins/Validation/Reference)

在提交时跳过验证 要在仍然使用提交按钮时跳过验证，请在该输入中添加一个 class="cancel"。

```
<input type="submit" name="submit" value="Submit" />
<input type="submit" class="cancel" name="cancel" value="Cancel" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:09:39.057

我认为你可以做一件事。您希望在哪个按钮上进行此表单验证。`onclick()`在事件中添加一个javascript函数。然后将上面给出的表单验证 java-script 放入该 java-script 函数中。我希望它会工作。并`$(document).ready(function ()`从该 javascript 代码中删除。

谢谢

# inno-setup - Innoscript - 获取当前用户个人资料信息

> ID：12018380
> 
> 赞同：2
> 
> 时间：2012-08-18T12:01:44.047
> 
> 标签：inno-setup, pascalscript

我正在尝试使用 innoscript 创建一个应用程序。我需要在 HKLM 中创建/编辑注册表信息值。因此我需要管理员权限来安装应用程序。

但是，如果非管理员用户尝试安装应用程序，innoscript 需要管理员用户密码，一旦他们输入管理员用户密码，每当我在安装脚本（比如 HKCU）中查询注册表时，它都会从管理员用户那里检索信息。但我想从当前登录的用户那里获取信息。结果，程序安装在管理员用户位置而不是当前登录用户帐户下。

当应用程序以管理员身份运行或提示管理员用户启动时，有没有办法从 innoscript 获取当前登录用户用户和用户应用程序数据位置。

等待你的更新。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:29:14.967

安装程序不应该在每台机器安装期间读取或修改任何每用户状态（包括 HKCU）（并且没有办法可靠地这样做）。相反，您应该让应用程序本身在第一次运行时执行此操作（通过尝试读取适当的位置并在未找到时假设默认值）。

请记住，一个应用程序安装一次，然后可以由多个不同的用户运行。这种行为是必不可少的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:15:33.873

一个简单的解决方法是将您的逻辑移动到可执行文件而不是 Pascal 脚本。然后你可以在 [Run] 部分调用这个可执行文件，

[http://www.jrsoftware.org/ishelp/index.php?topic=runsection](http://www.jrsoftware.org/ishelp/index.php?topic=runsection)

请记住将 Run 项标记为 runasoriginaluser。

# php - 如何通过在查询字符串中发送用户名和密码来允许使用 fosuserbundle 登录

> ID：12018383
> 
> 赞同：-1
> 
> 时间：2012-08-18T12:02:13.787
> 
> 标签：php, symfony, login, fosuserbundle

我希望允许用户绕过登录表单，而是通过在查询字符串中发送用户名和密码来登录，有人能指出我应该开始覆盖/破解 fosuserbundle 的正确方向吗？=)

还是我必须一起编写自己的登录控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:23:55.510

我要做的是，就像我在评论中所说的那样，依靠浏览器的用户名/密码记住功能，并在查询字符串中输入一个值，例如 ?autoLogin=true ，然后激活一个 javascript 页面加载后提交表单。因此依靠浏览器记住媒体服务器的密码。

# javascript - 已定义变量未定义

> ID：12018385
> 
> 赞同：6
> 
> 时间：2012-08-18T12:02:31.783
> 
> 标签：javascript, node.js, mongodb

我正在打 mongo （通过 mongoose `customer.find()`）并取回看起来像的东西

```
[{ _id: 5029a09e099fb5095fdb2d73,
  clientId: 22,
  company: 'X',
  email: 'X@Y.ca',
  firstName: 'X',
  lastName: 'Y',
  quality: 'Sold',
  address: 
   { phone: '',
     alt: '',
     street1: '',
     street2: '',
     city: '',
     state: 'Ontario',
     country: 'Canada',
     code: '' },
  comments: []
}] 
```

请注意，这是直接来自 console.log 的结果。这不是我要输入的内容，这是来自 mongoDB 的结果。_id 由 mongo 以这种形式返回，与该问题完全无关。

当我尝试

`console.log(customer[0])`我明白了

```
{ _id: 5029a09e099fb5095fdb2d73,
      clientId: 22,
      company: 'X',
      email: 'X@Y.ca',
      firstName: 'X',
      lastName: 'Y',
      quality: 'Sold',
      address: 
       { phone: '',
         alt: '',
         street1: '',
         street2: '',
         city: '',
         state: 'Ontario',
         country: 'Canada',
         code: '' },
      comments: []
    } 
```

正如预期的那样

当我尝试`console.log(customer[0].quality)`我得到`undefined`

当我尝试`console.log(customer[0].email)`或其他任何方法都可以正常工作时，我得到了预期值。

据我所知，质量不是保留词，我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:41:14.940

Mongoose[查找](http://mongoosejs.com/docs/api.html#model_Model-find)返回 Query 对象。它不仅仅是普通的 javascript 对象。它继承了模型的方法、查询方法、Document 的方法。console.log 只显示该对象的 toString 方法结果。它可以被 getter 或 virtuals 修改。_id 不带引号也是 ObjectId 类的 toString 结果。尝试通过 customer[0].get('quality'); 访问您的价值 或者通过 customer[0].toObject() 将其转换为普通对象；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:16:49.537

我把你的数据插入到 mongo 中，运行查询 console.log 电子邮件、质量等。

一切都按预期工作，没有不确定的洞察力。

我没有使用 Mongoose，而是使用[mongojs](https://github.com/gett/mongojs)，所以可能 mongoose 中存在错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T12:17:36.847

这工作正常：

```
var customer = [{ _id: "5029a09e099fb5095fdb2d73",  clientId: 22,  company: 'X',  email: 'X@Y.ca',  firstName: 'X',  lastName: 'Y',  quality: 'Sold',  address:    { phone: '',     alt: '',     street1: '',     street2: '',     city: '',     state: 'Ontario',     country: 'Canada',     code: '' },  comments: []}]
console.log(customer[0].quality) // it will give Sold

make _id:5029a09e099fb5095fdb2d73 to _id:"5029a09e099fb5095fdb2d73" 
```

# jquery - 使用 jquery.removeClass 后的 Bootstrap 问题

> ID：12018392
> 
> 赞同：2
> 
> 时间：2012-08-18T12:03:49.703
> 
> 标签：jquery, css, twitter-bootstrap

我在使用 twitter 引导框架和 jQuery 时遇到了以下问题：我有以下表单（简化后，真正的表单是用 cakephp 的 formhelper 构建的，并且有更多的类和 id）：

```
<form class="form-horizontal">
  <div class="control-group">
    <label class="control-label" for="input01">Name</label>
    <div class="controls">
      <input type="text" class="input-xlarge" id="name">
      <span class="help-block">Supporting help text</span>
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="input01">Description</label>
    <div class="controls">
      <input type="text" class="input-xlarge" id="description">
      <span class="help-block">Supporting help text</span>
    </div>
</form> 
```

在服务器端验证之后，我将该`.error`类添加到相应的控制组中。

现在，例如名称验证正常，但描述失败，描述控制组获取错误类并正确显示（红色，标准引导程序）。但是名称输入字段也是红色的。我检查了源代码，名称的控制组没有`.error`类。让我感到困惑的是，只有输入字段以红色边框显示，正确显示适当的标签标签（默认颜色）。

这是一个屏幕截图，以便更清楚地理解。

![我的问题](../Images/da3c6ce83a63b75b835c54cf023824ec.png)

在 Chrome 和 Firefox 中检查它，这样我就可以排除浏览器错误。我还在 chromes 开发人员工具中手动添加和删除了该类，它按预期工作。这是为什么？有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:00:44.580

`form`位于另一个`div`带有`.control-group`-class的内部（此处未显示），并且`error`-class 是使用 jQuerys 应用[`.parents()`](http://api.jquery.com/parents/)的，`.control-group`它一直在 DOM 树上搜索并导致`.error`应用于`div`包含两个输入字段的那个。

删除封闭`div`的 s 类解决了这个问题。这有点不公平，因为我可以访问完整的代码。:(

# android - 如何通过单击来实现读取图像名称

> ID：12018393
> 
> 赞同：0
> 
> 时间：2012-08-18T12:03:51.590
> 
> 标签：android, android-intent

有一个显示随机图像的代码：

```
Random rand = new Random();
int rndId = rand.nextInt(24) + 1;
imgName = "drw" + rndInt;
int id = getResources().getIdentifier(imgName, "drawable", getPackageName()); 
imageView.setImageResource(id); 
```

如何通过在程序中单击图像名称来实现读取图像名称并创建一个新窗口，其中包含每个图像唯一的描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:08:31.007

是的，如果你有它的资源 id，你可以通过使用来获取图像名称[`getResourceEntryName(resource_id)`](http://developer.android.com/reference/android/content/res/Resources.html#getResourceEntryName%28int%29)，

```
String image_name = getResources().
                               getResourceEntryName(R.drawable.ic_launcher);
Log.d("name", image_name); 
```

**输出：**

```
ic_launcher 
```

# javascript - GoogleMaps V3 仅显示 1 个多边形

> ID：12018394
> 
> 赞同：0
> 
> 时间：2012-08-18T12:03:52.423
> 
> 标签：javascript, maps, polygon

有一个网页，显示来自许多来源的天气图表。你选择你的来源，图表的轮廓出现在谷歌地图上。（参见[http://www.geoffschultz.org/weather_map.php](http://www.geoffschultz.org/weather_map.php) Weather Charts/GMDSS/Forecasts - 应该绘制 3 个多边形） 到目前为止，所有图表都是矩形的，但我只是遇到了对非矩形图表的需求. 我在编写 js 时考虑到了这一点，但我感到很困惑，因为只显示了最后绘制的多边形。关于多个多边形，我有什么遗漏吗？

代码非常简单。它得到一个边界框坐标数组。对于简单的矩形，数组元素看起来像“-31,-32|2,25”，而对于多边形，它只有更多的坐标，用“|”分隔。如果有 2 个坐标，我画一个矩形，否则我画一个多边形，用第一个点关闭它。

我做错了什么，因为它适用于矩形？

——杰夫

```
for (i in bb[selValue])
    {
    bb_lat_long = bb[selValue][i]["bb_lat_long"].split("|");
    if (bb_lat_long.length == 2) //Rectangle
        {
        lat_long = bb_lat_long[0].split(",");
        sw = new google.maps.LatLng(lat_long[0], lat_long[1]);
        lat_long = bb_lat_long[1].split(",");
        ne = new google.maps.LatLng(lat_long[0], lat_long[1]);
        bounds = new google.maps.LatLngBounds(sw, ne);
        bounding_box = new google.maps.Rectangle({map: map, bounds: bounds, fillOpacity: 0.05, strokeWeight: 1});
        }
    else // polygon
        {   
        poly_lat_long.length = 0;
        for (j = 0; j < bb_lat_long.length; j++)
            {
            lat_long = bb_lat_long[j].split(",");
            poly_lat_long.push(new google.maps.LatLng(lat_long[0], lat_long[1]));
            }
        lat_long = bb_lat_long[0].split(","); 
        poly_lat_long.push(new google.maps.LatLng(lat_long[0], lat_long[1])); // close polygon with 1st point
        bounding_box = new google.maps.Polygon({map: map, paths: poly_lat_long, fillOpacity: 0.05, strokeWeight: 1});
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:20:10.620

我的怀疑是它与重新使用新多边形中的路径有关（你最终会得到多个多边形，只是所有的都是一样的，也许如果你在本地声明 poly_lat_long （使用 var），或者创建一个 createPolygon 函数这将在路径上获得函数关闭。

在使用`poly_lat_long.length = 0;` 而不是`creating a new array (poly_lat_long = [])`.

[来自 Google Maps API v3 小组讨论类似问题的线程](https://groups.google.com/group/google-maps-js-api-v3/browse_frm/thread/2e9f6d618c24a61e)

# javascript - 选择列表的jqgrid动态加载

> ID：12018398
> 
> 赞同：0
> 
> 时间：2012-08-18T12:05:02.970
> 
> 标签：javascript, jquery, jqgrid

我正在为选择列表选项的动态加载而苦苦挣扎。我用谷歌搜索了几个小时，希望能找到一些有用的东西。在这个门户网站上发现了一些东西，但它们并没有太大帮助......应用程序的逻辑如下： - 我们有一个存档框的概述；-对它们进行编辑时，我应该根据存档框ID获得带有选项的多选列表-已选择商品的列表

我想我可以通过 dataInit-function 加载选择列表选项（在我的情况下，货物在这个给定的框中存档）

```
editoptions: { dataInit: function( elem ) 
```

我怎么解决这个问题？

任何帮助表示赞赏！提前致谢！

**更新 1**

对我来说，这是一种纯粹的神秘主义：

```
'dataInit'=> "function (elem) { 
  var url = '/selectlist/?value='+elem.value;
  console.log(url);
  grid.setColProp('box_no', { editoptions: { dataUrl: url}});
}", 
```

在控制台中，我每次单击都会获得正确的 url，但所选列表仅填充一次，其中包含我选择的第一行的值。选项 recreateForm 设置为 true，但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:05:29.313

您首先需要在 colModel 中设置以下属性。

```
search: true,
stype: 'select',
searchoptions: {dataUrl: "/api/select_options/3/"} 
```

在 /api/select_options/3/ url，我只返回一个字符串，它是选择选项的 html 代码，如下所示：

```
<select role="select" class="input-elm" id="jqg5">
<option role="option">Select one</option>
<option value="in progress" role="option">In progress</option>
<option value="disbursed" role="option">Disbursed</option>
<option value="declined" role="option">Declined</option>
<option value="approved" role="option">Approved</option>
</select> 
```

需要注意的几个问题是转义双引号。而且我还必须设置一个空白选项作为第一个选项。否则，如果选择了第一个选项，则发送“null”作为该字段的值。

我希望我说得够清楚。如果您有任何进一步的疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:42:10.220

你可以使用jquery和ajax技术。 如果要填充选择框，请
[使用 Jquery 和 Ajax 的动态相关选择框使用选择的](http://www.9lessons.info/2010/08/dynamic-dependent-select-box-using.html)[jquery](http://harvesthq.github.com/chosen/)

# android - 阻止对话框，如android中的构造

> ID：12018400
> 
> 赞同：0
> 
> 时间：2012-08-18T12:05:15.267
> 
> 标签：android, user-interface, dialog

寻找一个阻塞，返回值的对话框，如android中的自定义构造。

像这样的东西：

```
Output outValue = MyPopupBuildingClass.showWindow(inValue, R.layout.my_layout); 
```

是的，这`MessageBox`对`Windows programmers`:) 来说太熟悉了，我认为`JOptionPane`Swing 中也有。

这里的复杂性是我不想要一个小的默认 android 对话框，而是更多具有一些详细布局和功能的弹出片段。它接受一个对象，弹出一个窗口，让用户对它做一些事情，并在用户接受或关闭时返回它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:31:33.753

就像@Luksprog 在评论中所说，android 中的阻塞对话框很难实现，应该避免。

# asp.net - 网站项目的编译 dll 在哪里

> ID：12018403
> 
> 赞同：2
> 
> 时间：2012-08-18T12:05:50.667
> 
> 标签：asp.net, visual-studio-2010, web

一个关于 Visual Studio 中网站项目的查询 -

我做了以下步骤 -

*   使用 VS 2010 创建网站
*   在 App_Code 文件夹中添加了一个自定义类并在 default.aspx 中使用它
*   运行应用程序，我可以看到结果
*   对服务器代码所做的任何更改都会反映在浏览器上，而无需进行任何重新编译（网站功能）

因此，当对网站进行动态重新编译时，.net 运行时将在某个地方存储已编译的 dll，不是吗？

谁能指导我在哪里可以找到在动态构建期间生成的 dll 存储在哪里？（我只是出于好奇想知道这个:-)）

谢谢！

PS 我还做了一个“发布网站”，我可以在发布文件夹中看到一堆编译好的 dll。所以，我的问题只是关于动态构建。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T12:31:46.503

为您的网站动态创建的文件存储在

```
c:\WINDOWS\Microsoft.NET\Framework\version\Temporary ASP.NET Files\ 
```

您可以在 web.config 上更改此目录。asp.net 检查您的站点上是否有任何文件更改，如果可以找到任何更改，则开始重新编译。重新编译的许多参数也可以在 web.config 上更改。

如何更改此目录

```
<compilation  tempDirectory="" ...> 
```

这是其余的编译选项： http: [//msdn.microsoft.com/en-us/library/s10awwz0 (VS.100).aspx](http://msdn.microsoft.com/en-us/library/s10awwz0(VS.100).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T12:50:53.847

您可以通过程序的属性找到*代码生成目录*`HttpRuntime.CodegenDir`的名称和位置。

# c++ - 从 BoostCon 谈话中重载解引用运算符的奇怪方法

> ID：12018404
> 
> 赞同：1
> 
> 时间：2012-08-18T12:06:03.903
> 
> 标签：c++, operator-overloading

我在 youtube 上观看了一个名为“现代 C++ 技术简介（第一部分）”的 boostcon 演讲。在第 22 分钟左右，演讲者展示了一个超载取消引用运算符的类。

```
template<typename T,
         typename CheckingPolicy = NoChecking,
         typename BadPointerPolicy = BadPointerDoNothing>
class pointer_wrapper
{
public:
    pointer_wrapper() : value_(0) {}
    explicit pointer_wrapper(T* p) : value_(p) {}

    operator T*()
    {
        if ( ! CheckingPolicy::check_pointer(value_) )
        {
            return BadPointerPolicy::handle_bad_pointer(value_);
        }
        else
        {
            return value_;
        }
    }

private:
    T* value_;
}; 
```

我从未见过这种重载取消引用运算符的方式。为什么没有返回类型，为什么 T 出现在 'operator' 关键字之后？我一直认为重载这个操作符的方法是这样的：

```
T& operator *()
{
    // ...
    return *value_
} 
```

如果有人有兴趣，[这里是谈话](http://www.youtube.com/watch?v=9TFV2JxX7L0&feature=g-user-u)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:13:40.043

# groovy - Groovy 相当于 OCL forAll

> ID：12018409
> 
> 赞同：3
> 
> 时间：2012-08-18T12:06:43.623
> 
> 标签：groovy, ocl

什么是与 OCL 中的 forAll 方法等效的 Groovy？

* * *

假设我有一个项目列表。

```
def items = new LinkedList<Item>(); 
```

当且仅当所有项目都符合特定条件时，表达谓词的 Groovy 方法是什么？

* * *

下面的代码片段不起作用，因为内部返回只是跳出each闭包的当前迭代，而不是跳出forAll方法。

```
boolean forAll(def items)
{
    items.each { item -> if (!item.matchesCriteria()) return false; };
    return true;
} 
```

* * *

下面的代码片段应该可以解决问题，但感觉很麻烦，而且不像 Groovy。

```
boolean forAll(def items)
{
    boolean acceptable = true;
    items.each { item -> if (!item.matchesCriteria()) acceptable = false; };
    return acceptable;
} 
```

* * *

我正在寻找一种懒惰地评估谓词的方法，以便在找到第一个不匹配项时完成评估。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T12:25:15.830

你可以使用[每一个](http://groovy.codehaus.org/groovy-jdk/java/lang/Object.html#every%28groovy.lang.Closure%29)

```
items.every { it.matchesCriteria() } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T12:28:55.140

在 groovy 中这很容易：

```
def yourCollection = [0,1,"", "sunshine", true,false]

assert yourCollection.any() // If any element is true 
```

或者如果你想确定，一切都是真的

```
assert !yourCollection.every() 
```

你甚至可以用闭包来做到这一点

```
assert yourCollection.any { it == "sunshine" } // matches one element, and returns true 
```

或者

```
assert !yourCollection.every { it == "sunshine" } // does not match all elements 
```

# c++ - 如何找到硬件算术完全支持的最大整数？

> ID：12018410
> 
> 赞同：3
> 
> 时间：2012-08-18T12:06:45.423
> 
> 标签：c++, math, arbitrary-precision

我正在实现一个 BigInt 类，它必须支持对整数的任意精度操作。

引用 S.Skiena 的“算法设计手册”：

> *我应该在什么基础*上做[编者注：任意精度]*算术？*- 以十进制实现您自己的高精度算术包可能是最简单的，因此将每个整数表示为以 10 为基数的字符串。然而，使用更高的基数要高效得多，理想情况下等于硬件算术完全支持的最大整数的平方根。

如何找到*硬件算术完全支持的最大整数*？如果我理解正确，作为我的机器是基于 x64 的 PC，*支持*的最大整数应该是 2^64（http://en.wikipedia.org/wiki/X86-64 - Architectural features: 64-bit integer capability），所以我应该使用base 2 ^ 32，但是在c ++中有没有办法以编程方式获得这个大小，所以我可以将我的base_type输入到它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T12:12:43.103

您可能正在搜索`std::uintmax_t`and `std::intmax_t`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T12:14:12.993

`static_cast<unsigned>(-1)`是最大整数。例如，所有位都设置为`1`这就是您要查找的内容吗？

您也可以使用`std::numeric_limits<unsigned>::max()`or `UINT_MAX`，所有这些都会产生相同的结果。这些值说明的是`unsigned`类型的最大容量。例如，可以存储到无符号类型的最大值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T14:01:59.980

事情不是那么非黑即白。这里有 MAY 问题，你可能还有其他值得考虑的事情。我现在已经编写了两个精度可变的工具（在 MATLAB、[VPI](http://www.mathworks.com/matlabcentral/fileexchange/22725-variable-precision-integer-arithmetic)和[HPF](http://www.mathworks.com/matlabcentral/fileexchange/36534-hpf-a-big-decimal-class-currently-in-beta-release)中），并且我在每个工具中都选择了不同的方法。编写整数形式还是高精度浮点形式也很重要。

不同之处在于，整数可以不受位数限制地增长。但是，如果您使用用户指定的位数进行浮点实现，您总是知道尾数中的位数。这是固定的。

首先，最简单的方法是为每个十进制数字使用一个整数。这使得很多事情都很好地工作，所以 I/O 很容易。但是在存储方面它有点低效。加法和减法虽然很容易。如果你对每个数字使用整数，那么乘法就更容易了。例如，在 MATLAB 中，conv 非常快，尽管它仍然是 O(n^2)。我认为 gmp 使用 fft 乘法，所以更快。

但是假设您使用基本的 conv 乘法，那么您需要担心具有大量数字的数字的溢出。例如，假设我将十进制数字存储为 8 位有符号整数。使用 conv，后跟进位，我可以进行乘法运算。例如，假设我有数字 9999。

```
N = repmat(9,1,4)
N =
     9     9     9     9

conv(N,N)
ans =
    81   162   243   324   243   162    81 
```

因此，即使要形成乘积 9999*9999，我也需要小心，因为数字会溢出 8 位有符号整数。如果我使用 16 位整数来累积卷积乘积，那么一对 1000 位整数之间的乘法可能会导致溢出。

```
N = repmat(9,1,1000);
max(conv(N,N))
ans =
       81000 
```

因此，如果您担心数百万位数的可能性，您需要小心。

一种替代方法是使用我称之为 migits 的东西，基本上工作在比 10 更高的基数上。因此，通过使用基数 1000000 和双精度数来存储元素，我可以为每个元素存储 6 个十进制数字。但是，卷积仍然会导致较大数字的溢出。

```
N = repmat(999999,1,10000);
log2(max(conv(N,N)))
ans =
       53.151 
```

因此，在长度为 10000 migits（60000 个十进制数字）的两组基数为 1000000 migits 之间的卷积将溢出 double 不能精确表示整数的点。

同样，如果您要使用数百万位数的数字，请小心。使用基于卷积的乘法的更高的 migits 基数的一个好处是，因为 conv 操作是 O(n^2)，然后从基数 10 到基数 100 会给你 4-1 的加速。以 1000 为基数会在卷积中产生 9-1 的加速。

最后，使用 10 以外的基数作为 migits 使得实现保护数字（对于浮点数）是合乎逻辑的。在浮点运算中，您永远不应该信任计算的最低有效位，因此保留几个数字是有意义的隐藏在阴影中。因此，当我编写[HPF](http://www.mathworks.com/matlabcentral/fileexchange/36534-hpf-a-big-decimal-class-currently-in-beta-release)工具时，我让用户可以控制携带多少位数。这当然不是整数的问题。

还有很多其他问题。我在这些工具附带的文档中讨论它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T16:47:25.727

`int`（并且，通过扩展，`unsigned int`）是架构的“自然”大小。因此，具有一半 int 位的类型应该可以很好地工作。除此之外，您确实需要针对特定​​硬件进行配置；存储单元的类型和计算单元的类型应该是标头中的 typedef，并且选择它们的类型以匹配特定的处理器。通常，您会在运行一些速度测试后做出此选择。

INT_MAX 在这里没有帮助；它告诉您可以存储在 int 中的最大值，这可能是也可能不是硬件可以直接支持的最大值。同样， INTMAX_MAX 也无济于事；它告诉您可以存储为整数类型的最大值，但不会告诉您对此类值的操作是否可以在硬件中完成或需要软件仿真。

回到过去，经验法则是对 int 的操作直接在硬件中完成，而对 long 的操作是作为多个整数操作完成的，因此对 long 的操作比对 int 的操作慢得多。这不再是一个好的经验法则。

# c++ - 字符串常量之前的预期 unqualified-id，包括 ZenLib/Zstring.h

> ID：12018414
> 
> 赞同：1
> 
> 时间：2012-08-18T12:07:07.897
> 
> 标签：c++, c

在包含的 ZenLib 头文件中，我有这个定义配置

```
//Char types
#if defined(__UNICODE__)
    #if defined (_MSC_VER) && !defined (_NATIVE_WCHAR_T_DEFINED)
        #pragma message Native wchar_t is not defined, not tested, you should put /Zc:wchar_t in compiler options
    #endif
    typedef wchar_t Char;
    #undef  __T
    #define __T(__x) L ## __x
#else // defined(__UNICODE__)
    typedef char Char;
    #undef  __T
    #define __T(__x) __x
#endif // defined(__UNICODE__)
#ifdef wchar_t
    typedef wchar_t wchar;
#endif // wchar_t

//***************************************************************************
// Platform differences
//***************************************************************************

//End of line
extern const Char* EOL;
extern const Char  PathSeparator; 
```

最后两行无法使用此消息进行编译：

```
../ZZZ/ZenLib/Conf.h:243: error: expected unqualified-id before string constant
../ZZZ/ZenLib/Conf.h:243: error: expected initializer before string constant
make: *** [mediainfo.o] Error 1 
```

任何人都可以洞察编译器在这里的期望吗？也标记为 c++，因为它编译为 cpp 文件。

从应用程序的角度来看，它应该被定义为`char`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:13:53.103

您包含的头文件之一包含 的定义`EOL`，进行声明

```
extern const Char* EOL; 
```

看起来像

```
extern const Char* '\n'; // or '\r', or a numeric constant 
```

将您的名称重命名`EOL`为不同的名称，例如`Eol`或`EOL_CHAR`应该会有所帮助。

# regex - 关闭 php 字符串中的最后 4 个字符

> ID：12018417
> 
> 赞同：0
> 
> 时间：2012-08-18T12:07:55.203
> 
> 标签：regex, preg-replace

我有一些像下面这样的字符串

```
my-name-is-2547
this-is-stack-2012
hllo-how-2011 
```

现在我希望使用正则表达式将上面的字符串更改为类似于下面的字符串。

```
my-name-is-(2547)
this-is-stack-(2012)
hllo-how-(2011) 
```

我不想使用 substr 或其他，只有正则表达式替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:10:21.000

```
$pattern = '/(\d+)$/';
$replacement = '($1)';
echo preg_replace($pattern, $replacement, $string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:11:49.863

如果您确定数字仅在末尾：

正则表达式：

```
(\d+) 
```

使用 1 个捕获组。替换为：($1)。

所以输出将是：

```
my-name-is-(2547)
this-is-stack-(2012)
hllo-how-(2011) 
```

# java - ClassNotFoundException：dataimport.DataImportHandler

> ID：12018422
> 
> 赞同：2
> 
> 时间：2012-08-18T12:08:49.907
> 
> 标签：java, mysql, exception, solr, import

您好我正在使用 Solr 4 beta，我不是 Java 程序员。我正在为我的 MySQL 数据库配置带有示例文件夹的[DataImportHandler 。](http://wiki.apache.org/solr/DataImportHandler)问题是，当我启动服务器时：

```
java -jar start.jar 
```

我的 solrconfig.xml 有这个：

```
<requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
<lst name="defaults">
 <str name="config">data-config.xml</str>
</lst>
</requestHandler> 
```

从另一个[线程](http://lucene.472066.n3.nabble.com/DataImportHandler-in-Solr-4-0-td2563053.html#a3667942)的建议是将 apache-solr-solrj-4.0.jar 复制到 lib/ 目录，我这样做了。唯一不同的是，在当前的 Solr 版本中，文件名是：apache-solr-solrj-4.0.0-BETA.jar，但我尝试使用不同的名称复制它。另外，我在 solrconfig.xml 中添加了这一行，以便加载 SolrJ：

```
<lib dir="/dist/" regex="apache-solr-solrj-*\.jar" /> 
```

尽管如此，**我仍然遇到异常**：

```
SEVERE: null:org.apache.solr.common.SolrException: RequestHandler init failure
    at org.apache.solr.core.RequestHandlers.initHandlersFromConfig(RequestHandlers.java:168)
.
....
Caused by: java.lang.ClassNotFoundException: org.apache.solr.handler.dataimport.DataImportHandler 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-03T09:09:01.363

在你的 solr conf 检查你是否包含了 DIH jar，如果你没有，那么你应该添加如下内容

```
<lib dir="../../dist/" regex="solr-dataimporthandler-.*\.jar" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T14:19:53.990

您需要将 \contrib\dataimporthandler\lib 和 apache-solr-dataimporthandler-4.0.jar 中的文件从 dist 文件夹添加到您的类路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T16:38:10.883

我尝试使用示例文件夹从 MySQL 导入数据显然犯了一个错误。在这个目录中有一个可以正常工作的 example-DIH 文件夹，它可以正常工作。

# php - php foreach循环不覆盖变量

> ID：12018423
> 
> 赞同：-1
> 
> 时间：2012-08-18T12:08:50.817
> 
> 标签：php, foreach

我很难弄清楚如何管理我的循环以在此过程中不覆盖变量，我的示例脚本如下所示

```
$targets = array(
    array(
        'site_id' => 1,
        'url' => array('http://example.com','http://test.com'),
        'title' => "Title_1",
        'int_link' => "/internal_link/",
        'icon' => '/icon_2.gif',
        'teaser_index' => 5),
  array(
        'site_id' => 2,
        'url' => array('http://example2.com','http://test2.com'),
        'title' => "Title_2",
        'int_link' => "/internal_link/",
        'icon' => '/icon_2.gif',
        'teaser_index' => 5)
)

foreach($targets as $target){
        $images = array();
    $links  = array();
    $name = array();
        $loop=-1; 
        foreach($target['url'] as $url){
           $loop++;
           //parsing $url;
           //the insider loop has 2 iterations
             if ($loop=1){

                 $content .="<div>".$target['title'].$url"</div>";

            } 
             else{
                 $content .="<div>".$target['title'].$url"</div>";
            }

}
//write $content html to database, without to override the first $content 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:11:04.177

你的问题不清楚，但我想我明白可能的问题是什么

脚本中有很多错误需要您修复，也许您的脚本会按照您希望的方式运行。

A.`$content`没有定义 .. 你需要定义它

B.`if ($loop=1){`应该`if ($loop == 1){`

C.`$content .="<div>".$target['title'].$url"</div>";`丢失`.`了，应该是这样的`$content .= "<div>" . $target['title'] . $url . "</div>";`

D. 你 if 条件没有意义，因为你输出的是相同的信息

形成我能看到的你想要输出的标题和 URL 你也可以使用这个简单的脚本（只是猜测）

```
$targets = array(
    array(
        'site_id' => 1,
        'url' => array('http://example.com','http://test.com'),
        'title' => "Title_1",
        'int_link' => "/internal_link/",
        'icon' => '/icon_2.gif',
        'teaser_index' => 5),
  array(
        'site_id' => 2,
        'url' => array('http://example2.com','http://test2.com'),
        'title' => "Title_2",
        'int_link' => "/internal_link/",
        'icon' => '/icon_2.gif',
        'teaser_index' => 5)
);

foreach ( $targets as $target ) {
    $content = "";
    $output = "<div> %s : %s </div>";
    $content .= sprintf($output, $target['title'], implode(" , ",$target['url'])); 
    echo $content;
    // write $content html to database, without to override the first $content
} 
```

输出

```
Title_1 : http://example.com , http://test.com
Title_2 : http://example2.com , http://test2.com 
```

# django - get_or_create 使用 django 表单

> ID：12018424
> 
> 赞同：0
> 
> 时间：2012-08-18T12:08:53.110
> 
> 标签：django, django-forms, django-views

有没有办法在视图中使用 get_or_create ？

这是我的models.py

```
class Link(models.Model):
    url = models.URLField(max_length=512, unique=True)
    short_url = models.URLField(max_length=16, blank=True, null=True) 
```

我的views.py是这样的。

```
if oplinkform:
    oplink = Link.objects.get_or_create(url = oplinkform.data['url'])
    oplink.save() 
```

我应该得到一个链接对象..对吗？它正在为我服务一个元组......为什么？

这是我在使用 django 时遇到的错误。

```
AttributeError at /home/
'tuple' object has no attribute 'save'
Request Method: POST 
```

//鼠

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:10:04.880

[`get_or_create`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create)返回一个元组，`(object, created)`其中`created`是一个布尔值，指示它是否已创建。

尝试这个：

```
oplink, created = Link.objects.get_or_create(url = oplinkform.data['url']) 
```

# django - django-tastypie 如何使用“现在”值放置日期时间字段

> ID：12018426
> 
> 赞同：1
> 
> 时间：2012-08-18T12:09:06.237
> 
> 标签：django, rest, tastypie

我已经用 django-tastypie 建立了一个 RESTfull 接口。

到目前为止一切进展顺利，但我找不到一种方法来将日期时间字段 POST/PUT/PATCH 到现在（如在 SQL 中）以使用服务器的当前时间，而不是客户端时间。

也许我做错了，我有一个包含一些字段的资源，我希望用户能够验证或取消验证它。所以我在我的模型中添加了“validated_at”。发送字符串“2012-01-01T15:43:00”有效，但如果我设置为“现在”，则会返回错误，因为日期格式不正确。

有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:47:52.837

不是我迄今为止写的最好的代码......但它确实有效。

```
def hydrate_validate_at(self, bundle):
    validate_at = bundle.data.get("validate_at", None)
    if validate_at == "None":
        bundle.data["validate_at"] = None
    elif validate_at == "Now":
        bundle.data["validate_at"] = datetime.now()
    return bundle 
```

# javascript - 使用 AJAX 和 JQuery 或 Javascript 的下拉菜单重定向

> ID：12018428
> 
> 赞同：0
> 
> 时间：2012-08-18T12:09:17.957
> 
> 标签：javascript, ajax, jquery, redirect

我正在尝试创建一个带有数字 1 到 6 的下拉菜单，当用户选择一个数字并单击该按钮时，它会将用户重定向到与该数字选择相关联的网页。重定向的内容将显示在 。我想使用 AJAX 和 jQuery 或 javascript 来做到这一点。如果我给这一行提供一个 id ，我可以获得重定向：但这不是我的最终目标。它适用于重定向，但不适用于与号码关联的相应网页。我尝试为每个选项选择分配 id，但使用这些 id 操作 ajax.js 文件不会提供任何重定向。我不确定如何在 AJAX 代码中“绑定”、“聚焦”或“选择”特定的下拉选择。我可能需要在 AJAX 代码或 switch 语句中创建一个循环和一个变量，以便在我能够将选项选择设置为“绑定”、“焦点”或“选择”。我不确定 AJAX 是否允许代码中的循环或切换，或者我可能需要创建一个数组，或者创建一个外部文件供 AJAX 选择。如果您对如何使这项工作有任何建议或想法，请告诉我。非常感谢。周末愉快。安妮 或为 AJAX 创建一个外部文件以供选择。如果您对如何使这项工作有任何建议或想法，请告诉我。非常感谢。周末愉快。安妮 或为 AJAX 创建一个外部文件以供选择。如果您对如何使这项工作有任何建议或想法，请告诉我。非常感谢。周末愉快。安妮

在 dropdown.html 中

```
<html>
<head>
<script type='text/javascript' src='js/jquery.js'></script>
</head>
<body>

<form name="redirect">
<select name="selection">
  <option id="one" value="pageone.php">1</option>
  <option id="two" value="pagetwo.php">2</option>
  <option id="three" value="pagethree.php">3</option>
  <option id="four" value="pagefour.php">4</option>
 <option id="five" value="pagefive.php">5</option>
 <option id="six" value="pagesix.php">6</option>
</select>

<input type="button" value="Click Here!" id="btn" >
<div id="content"></div>
</form>
<script type='text/javascript' src='js/ajax.js'></script>
</body>
</html> 
```

在 js/ajax.js 中（这有效）

```
$('#btn').click(function() {
    $.ajax({
        url: 'redirpage.html',
        success: function(data) {
            $('#content').html(data);
        }
    });
});​ 
```

在 js/ajax.js 中（这不起作用，focus()、select() 或其他事件处理程序也不起作用）

```
$('#one').bind(function() {
    $.ajax({
        url: 'pageone.php',
        success: function(data) {
            $('#content').html(data);
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:31:40.180

如果我理解正确，您想对作为选择值的页面进行 ajax 调用吗？他们返回应该在#content 中显示的数据？

返回什么样的数据——简单的html？

在这种情况下，我会试试这个：

```
$('select[name=selection]').change(function(){
  var url = $(this).val();
  $.post(url, function(data) {
    $('#content').html(data);
  });
}); 
```

您不需要选项的 ID。

# asp.net-mvc - ASP.NET 捆绑/缩小：包括动态生成的 Javascript

> ID：12018429
> 
> 赞同：10
> 
> 时间：2012-08-18T12:09:36.357
> 
> 标签：asp.net-mvc, .net-4.5, bundling-and-minification, asp.net-optimization

我有一个动态生成 Javascript 的网站。生成的代码描述了类型元数据和一些服务器端常量，以便客户端可以轻松地使用服务器的服务——因此它是非常可缓存的。

生成的 Javascript 由 ASP.NET MVC 控制器提供服务；所以它有一个 Uri；说`~/MyGeneratedJs`。

我想将此 Javascript 包含在与其他静态 Javascript 文件（例如 jQuery 等）一起的 Javascript 包中：所以就像静态文件一样，我希望它在调试模式下单独引用，并以缩小形式与其他文件捆绑在非调试模式。

如何在捆绑包中包含动态生成的 Javascript？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-16T16:07:25.163

有了`VirtualPathProviders`这个现在是可能的。将动态内容集成到捆绑过程中需要以下步骤：

1.  编写请求/构建所需内容的逻辑。直接从 Controller 生成内容需要一些工作：

    ```
    public static class ControllerActionHelper
    {
        public static string RenderControllerActionToString(string virtualPath)
        {
            HttpContext httpContext = CreateHttpContext(virtualPath);
            HttpContextWrapper httpContextWrapper = new HttpContextWrapper(httpContext);

            RequestContext httpResponse = new RequestContext()
            {
                HttpContext = httpContextWrapper,
                RouteData = RouteTable.Routes.GetRouteData(httpContextWrapper)
            };

            // Set HttpContext.Current if RenderActionToString is called outside of a request
            if (HttpContext.Current == null)
            {
                HttpContext.Current = httpContext;
            }

            IControllerFactory controllerFactory = ControllerBuilder.Current.GetControllerFactory();
            IController controller = controllerFactory.CreateController(httpResponse,
                httpResponse.RouteData.GetRequiredString("controller"));
            controller.Execute(httpResponse);

            return httpResponse.HttpContext.Response.Output.ToString();
        }

        private static HttpContext CreateHttpContext(string virtualPath)
        {
            HttpRequest httpRequest = new HttpRequest(string.Empty, ToDummyAbsoluteUrl(virtualPath), string.Empty);
            HttpResponse httpResponse = new HttpResponse(new StringWriter());

            return new HttpContext(httpRequest, httpResponse);
        }

        private static string ToDummyAbsoluteUrl(string virtualPath)
        {
            return string.Format("http://dummy.net{0}", VirtualPathUtility.ToAbsolute(virtualPath));
        }
    } 
    ```

2.  实现一个虚拟路径提供者，它包装现有的路径并拦截所有应该传递动态内容的虚拟路径。

    ```
    public class ControllerActionVirtualPathProvider : VirtualPathProvider
    {
        public ControllerActionVirtualPathProvider(VirtualPathProvider virtualPathProvider)
        {
            // Wrap an existing virtual path provider
            VirtualPathProvider = virtualPathProvider;
        }

        protected VirtualPathProvider VirtualPathProvider { get; set; }

        public override string CombineVirtualPaths(string basePath, string relativePath)
        {
            return VirtualPathProvider.CombineVirtualPaths(basePath, relativePath);
        }

        public override bool DirectoryExists(string virtualDir)
        {
            return VirtualPathProvider.DirectoryExists(virtualDir);
        }

        public override bool FileExists(string virtualPath)
        {
            if (ControllerActionHelper.IsControllerActionRoute(virtualPath))
            {
                return true;
            }

            return VirtualPathProvider.FileExists(virtualPath);
        }

        public override CacheDependency GetCacheDependency(string virtualPath, IEnumerable virtualPathDependencies,
            DateTime utcStart)
        {
            AggregateCacheDependency aggregateCacheDependency = new AggregateCacheDependency();

            List<string> virtualPathDependenciesCopy = virtualPathDependencies.Cast<string>().ToList();

            // Create CacheDependencies for our virtual Controller Action paths
            foreach (string virtualPathDependency in virtualPathDependenciesCopy.ToList())
            {
                if (ControllerActionHelper.IsControllerActionRoute(virtualPathDependency))
                {
                    aggregateCacheDependency.Add(new ControllerActionCacheDependency(virtualPathDependency));
                    virtualPathDependenciesCopy.Remove(virtualPathDependency);
                }
            }

            // Aggregate them with the base cache dependency for virtual file paths
            aggregateCacheDependency.Add(VirtualPathProvider.GetCacheDependency(virtualPath, virtualPathDependenciesCopy,
                utcStart));

            return aggregateCacheDependency;
        }

        public override string GetCacheKey(string virtualPath)
        {
            return VirtualPathProvider.GetCacheKey(virtualPath);
        }

        public override VirtualDirectory GetDirectory(string virtualDir)
        {
            return VirtualPathProvider.GetDirectory(virtualDir);
        }

        public override VirtualFile GetFile(string virtualPath)
        {
            if (ControllerActionHelper.IsControllerActionRoute(virtualPath))
            {
                return new ControllerActionVirtualFile(virtualPath,
                    new MemoryStream(Encoding.Default.GetBytes(ControllerActionHelper.RenderControllerActionToString(virtualPath))));
            }

            return VirtualPathProvider.GetFile(virtualPath);
        }

        public override string GetFileHash(string virtualPath, IEnumerable virtualPathDependencies)
        {
            return VirtualPathProvider.GetFileHash(virtualPath, virtualPathDependencies);
        }

        public override object InitializeLifetimeService()
        {
            return VirtualPathProvider.InitializeLifetimeService();
        }
    }

    public class ControllerActionVirtualFile : VirtualFile
    {
        public CustomVirtualFile (string virtualPath, Stream stream)
            : base(virtualPath)
        {
            Stream = stream;
        }

        public Stream Stream { get; private set; }

        public override Stream Open()
        {
             return Stream;
        }
    } 
    ```

    如果需要，还必须实现 CacheDependency：

    ```
    public class ControllerActionCacheDependency : CacheDependency
    {
        public ControllerActionCacheDependency(string virtualPath, int actualizationTime = 10000)
        {
            VirtualPath = virtualPath;
            LastContent = GetContentFromControllerAction();

            Timer = new Timer(CheckDependencyCallback, this, actualizationTime, actualizationTime);
        }

        private string LastContent { get; set; }

        private Timer Timer { get; set; }

        private string VirtualPath { get; set; }

        protected override void DependencyDispose()
        {
            if (Timer != null)
            {
                Timer.Dispose();
            }

            base.DependencyDispose();
        }

        private void CheckDependencyCallback(object sender)
        {
            if (Monitor.TryEnter(Timer))
            {
                try
                {
                    string contentFromAction = GetContentFromControllerAction();

                    if (contentFromAction != LastContent)
                    {
                        LastContent = contentFromAction;
                        NotifyDependencyChanged(sender, EventArgs.Empty);
                    }
                }
                finally
                {
                    Monitor.Exit(Timer);
                }
            }
        }

        private string GetContentFromControllerAction()
        {
            return ControllerActionHelper.RenderControllerActionToString(VirtualPath);
        }
    } 
    ```

3.  注册您的虚拟路径提供程序：

    ```
    public static void RegisterBundles(BundleCollection bundles)
    {
        // Set the virtual path provider
        BundleTable.VirtualPathProvider = new ControllerActionVirtualPathProvider(BundleTable.VirtualPathProvider);

        bundles.Add(new Bundle("~/bundle")
            .Include("~/Content/static.js")
            .Include("~/JavaScript/Route1")
            .Include("~/JavaScript/Route2"));
    } 
    ```

4.  可选：将 Intellisense 支持添加到您的视图中。在您的视图中使用`<script>`标签并让它们被自定义 ViewResult 删除：

    ```
    public class DynamicContentViewResult : ViewResult
    {
        public DynamicContentViewResult()
        {
            StripTags = false;
        }

        public string ContentType { get; set; }

        public bool StripTags { get; set; }

        public string TagName { get; set; }

        public override void ExecuteResult(ControllerContext context)
        {
            if (context == null)
            {
                throw new ArgumentNullException("context");
            }

            if (string.IsNullOrEmpty(ViewName))
            {
                ViewName = context.RouteData.GetRequiredString("action");
            }

            ViewEngineResult result = null;

            if (View == null)
            {
                result = FindView(context);
                View = result.View;
            }

            string viewResult;

            using (StringWriter viewContentWriter = new StringWriter())
            {
                ViewContext viewContext = new ViewContext(context, View, ViewData, TempData, viewContentWriter);

                View.Render(viewContext, viewContentWriter);

                if (result != null)
                {
                    result.ViewEngine.ReleaseView(context, View);
                }

                viewResult = viewContentWriter.ToString();

                // Strip Tags
                if (StripTags)
                {
                    string regex = string.Format("<{0}[^>]*>(.*?)</{0}>", TagName);
                    Match res = Regex.Match(viewResult, regex,
                        RegexOptions.IgnoreCase | RegexOptions.IgnorePatternWhitespace | RegexOptions.Multiline | RegexOptions.Singleline);

                    if (res.Success && res.Groups.Count > 1)
                    {
                        viewResult = res.Groups[1].Value;
                    }
                    else
                    {
                        throw new InvalidProgramException(
                            string.Format("Dynamic content produced by View '{0}' expected to be wrapped in '{1}' tag.", ViewName, TagName));
                    }
                }
            }

            context.HttpContext.Response.ContentType = ContentType;
            context.HttpContext.Response.Output.Write(viewResult);
        }
    } 
    ```

    使用扩展方法或向控制器添加辅助函数：

    ```
    public static DynamicContentViewResult JavaScriptView(this Controller controller, string viewName, string masterName, object model)
    {
        if (model != null)
        {
            controller.ViewData.Model = model;
        }

        return new DynamicContentViewResult
        {
            ViewName = viewName,
            MasterName = masterName,
            ViewData = controller.ViewData,
            TempData = controller.TempData,
            ViewEngineCollection = controller.ViewEngineCollection,
            ContentType = "text/javascript",
            TagName = "script",
            StripTags = true
        };
    } 
    ```

其他类型的动态内容的步骤与此类似。例如，请参阅[捆绑和缩小以及嵌入式资源](http://weblogs.asp.net/imranbaloch/asp-net-bundling-and-minification-and-embedded-resources)。

如果您想尝试一下，我在[GitHub 上](https://github.com/Dresel/ControllerActionBundling)添加了一个概念证明存储库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T17:10:21.113

Darin 是对的，目前捆绑仅适用于静态文件。但是，如果您可以添加具有最新内容的占位符文件，则捆绑会设置文件更改通知，该通知将在占位符文件更改时自动检测。

此外，我们很快将转向使用 VirtualPathProviders，这可能是一种提供动态生成内容的方式。

**更新：**支持 VPP 的 1.1-alpha1 版本现已发布

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T12:40:32.327

这是不可能的。捆绑包仅适用于静态文件。

# url - cakephp路线设置

> ID：12018431
> 
> 赞同：0
> 
> 时间：2012-08-18T12:09:38.820
> 
> 标签：url, cakephp, routes

我想为 URL 设置 cakephp 路由，如下所示：/param1/contorllername/actionname/ 我该怎么做，如果我这样做，如何使用`$this->redirect(array('controller'=>$controllername,'action'=>$actionname))`重定向我的页面。同样，我如何使用`$this->Html->link`此网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:58:04.020

你可以在你的 routes.php 中定义它

```
Router::connect(
    '/:param1/:controller/:action',
    array(),
    array('pass' => array('param1'))
); 
```

然后你可以像这样声明路由

```
$this->redirect(array('controller'=>'posts','action'=>'view','param1'=>10)) 
```

这将重定向到 /10/posts/view

# sql-server - SQL Server 是否保证数据完整性？

> ID：12018439
> 
> 赞同：1
> 
> 时间：2012-08-18T12:10:22.050
> 
> 标签：sql-server

简单的问题：SQL Server 是否提供任何类型的记录级别校验和等来保证数据输入 = 数据输出？或者这是否应该在应用程序级别使用 CRC/MD5 实现？

**编辑 1：**我不是在谈论参照完整性、数据范围验证或其他类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T12:20:07.900

[`PAGE_VERIFY`是的，您可以通过选项](http://technet.microsoft.com/en-us/library/bb402873.aspx)为页面数据完整性配置三种模式。

例如，请参阅[这篇](http://blogs.msdn.com/b/sqlserverstorageengine/archive/2006/06/29/enabling-checksum-in-sql2005.aspx)关于页面验证选项的文章。

# jquery - 在jQuery中的另一个元素中找到一个具有名称的元素

> ID：12018441
> 
> 赞同：0
> 
> 时间：2012-08-18T12:11:21.280
> 
> 标签：jquery, find

我有一个问题想用 jQuery 来解决。

我有一些 id 为“div1,div2,...”的 div。在每个 div 中，我都有一个带有名称模式的输入。

例如像这样

```
<div id="div1">
  <table>....</table>
  <div>....</div>
  <input name="pattern" value="nothing" />
</div> 
```

我想为“div1”获取这个输入。我可以用 $('#div1') 得到 div1。现在我只想在 div1 的孩子中搜索。我怎么能用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:18:10.600

```
 $("#div1 input") 
```

或者

```
 $("#div1 input[name=pattern]") // more than 1 input? 
```

或者

```
$("#div1 > input") // only direct child 
```

等等。

这意味着您必须精确定位`div1`. 更通用的方法取决于您如何处理其他 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:15:20.860

尝试 `$('#div1').children('input');`

# mongodb - MongoDB。在下一个查询中使用游标作为 $in 的值

> ID：12018443
> 
> 赞同：1
> 
> 时间：2012-08-18T12:11:35.183
> 
> 标签：mongodb, join, cursor

有没有办法在下一个查询中使用上一个查询返回的游标作为 $in 的值？例如，像这样：

```
var users = db.user.find({state:1})
var offers = db.offer.find({user:{$in:users}}) 
```

我认为这可以减少 mongodb 和客户端之间的流量，以防客户端根本不需要用户信息，只需提供。我错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:58:18.723

基本上，您想在 Mongo 不支持的两个集合之间进行连接。您可以通过将第一个查询返回的字段限制为仅从 offer 集合中获取数据所需的唯一用户信息（即 _id）来减少从服务器传输的数据量。

如果您真的只想进行一次查询，那么您应该在 offer 集合中存储更多信息。例如，如果您正在尝试为活动用户查找优惠，那么您会将用户的活动状态存储在优惠集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:27:51.267

根据您的评论工作：

> 是的，这就是我在问题中使用标签“加入”的原因。这个想法是我可以使用一堆字段和正则表达式使第一个查询更加复杂，而无需将用户数据存储在除引用之外的其他集合中。在这些情况下，我总是必须执行两个连续的查询，但是对于我和 mongodb 本身都不需要传输第一个查询的结果。我只是想了解现在是否可以完成，将来是否可以这样做，或者由于某些技术原因无法实施

据我了解，目前并不急于使这成为可能。此外，它的编码方式 atm 将对游标的工作方式和定义方式产生相当大的改变。一个大到足以可能导致其他人实施中断的变化。这确实是一个是否`safe`为所有未来驱动程序设置插入和更新的情况。人们认识到这`safe`应该是默认的，但这会破坏其他期望它的人的实现。

如果您根本不需要第一个查询的结果，这是相当低效的，但是由于大多数网络都准备好高流量并且流量很便宜，因此不需要使其能够执行链式查询服务器光标的一侧。

然而，子选择（这基本上是，它根据先前行的子选择来选择一组行）已经在 mongodb-user 上出现过几次，甚至可能在某个地方有一个 JIRA，如果没有可能有用做一个。

至于现在就做：没有办法。

# ruby-on-rails - 用于 Rails 3.2 的 Jabber/XMPP gem

> ID：12018444
> 
> 赞同：4
> 
> 时间：2012-08-18T12:11:37.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, xmpp, instant-messaging

我正在为 rails 3.2 寻找一个可靠且有效的 XMPP gem

网络中有数百个，但其中大多数已过时或处于 Alpha 阶段。

你能给我推荐一个用于rails 3.2的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T13:00:21.127

gem xmpp4r 工作正常。( [https://github.com/ln/xmpp4r](https://github.com/ln/xmpp4r) )

这是一个例子：

```
require 'xmpp4r'

sender_jid = Jabber::JID.new('a@b.com')
client = Jabber::Client.new(sender_jid)
client.connect('talk.google.com')
client.auth('password')

client.send(Jabber::Presence.new.set_show(:chat)).set_status('my status')

receiver_jid = Jabber::JID.new("dest@domain.com")
message = Jabber::Message::new(receiver_jid, "Testing").set_type(:normal).set_id('1')
client.send(message) 
```

# git - 混蛋！在错误的分支中提交

> ID：12018447
> 
> 赞同：3
> 
> 时间：2012-08-18T12:11:54.687
> 
> 标签：git, branch, commit

我刚刚在 Git repo 上做了一些糟糕的事情，我不知道如何解决这个问题。我什至不知道我是怎么把它弄得这么乱的……！

在 repo（托管在 git hub 上）上，有 3 个我感兴趣的分支：master、brancheA、brancheB。brancheA 和 brancheB 不相关（涉及不同的文件）。

这是它目前的样子：

```
A -- B -- C -- D -- master
     \               \ change_from_B_1..4 -- change_from_A_1+2 -- brancheA 
      \ -- merge_from_master -- change_from_A_1 -- change_from_A_2 -- brancheB 
```

我想哭：> 是的，change_from_A 的意思是“应该在 Branche A 中的更改”！最糟糕的是，在分支 A 中，在我将 master 合并到 brancheB 之前，有 4 个提交在 brancheB (change_from_B_1..4) 中使用。现在，这 4 个提交在 brancheA 中（如何？？），不再在 brancheB 中。

我不知道我做了什么来解决这种情况，如果有帮助，这里是我的 git reflog 的一些摘录：

```
 b8b5db7 HEAD@{0}: checkout: moving from brancheA to brancheB
    015fdc1 HEAD@{1}: checkout: moving from brancheB to brancheA
    b8b5db7 HEAD@{2}: checkout: moving from brancheA to brancheB
    015fdc1 HEAD@{3}: checkout: moving from master to brancheA
    3830ccb HEAD@{4}: checkout: moving from brancheB_tmp to master
    2a9ba60 HEAD@{5}: cherry-pick: change_from_B_1
    3830ccb HEAD@{6}: checkout: moving from 3830cc to brancheB_tmp
    3830ccb HEAD@{7}: pull origin master: Fast-forward
    8ef3368 HEAD@{8}: checkout: moving from brancheB to master
    b8b5db7 HEAD@{9}: pull origin brancheA: Merge made by recursive.
    cc17c2e HEAD@{10}: pull origin brancheB: Fast-forward
    d867eff HEAD@{11}: HEAD^^: updating HEAD
    cc17c2e HEAD@{12}: checkout: moving from brancheA to brancheB
    015fdc1 HEAD@{13}: commit: change_from_B_6?? (lost :<)
    2f650f6 HEAD@{14}: commit: change_from_B_5?? (lost :<)
    9098bfa HEAD@{15}: commit: change_from_A_1+2
    01c7a5e HEAD@{16}: HEAD^^^: updating HEAD
    cc17c2e HEAD@{17}: checkout: moving from brancheB to brancheA
    cc17c2e HEAD@{18}: merge brancheA: Fast-forward
    d867eff HEAD@{19}: checkout: moving from brancheA to brancheB
    cc17c2e HEAD@{20}: commit: change_from_A_2
    3bee54e HEAD@{21}: checkout: moving from brancheB to brancheA
    d867eff HEAD@{22}: checkout: moving from brancheA to brancheB
    3bee54e HEAD@{23}: commit: change_from_A_1
    d867eff HEAD@{24}: checkout: moving from d867eff to brancheA
    d867eff HEAD@{25}: checkout: moving from brancheB to another_branch
    d867eff HEAD@{26}: checkout: moving from another_branch to brancheB
    d867eff HEAD@{27}: checkout: moving from d867eff to another_branch
    d867eff HEAD@{28}: commit (merge): Merge branch 'master' of super_github
    01c7a5e HEAD@{29}: commit: change_from_B_4
    1dbc4e1 HEAD@{30}: commit: change_from_B_3
    52417fa HEAD@{31}: commit: change_from_B_2
    8e5d258 HEAD@{32}: commit: change_from_B_1
    8ef3368 HEAD@{33}: checkout: moving from master to brancheB 
```

对我来说，在我开始引入 brancheA 之前，一切看起来都很正常（d867eff HEAD@{24}: checkout: 从 d867eff 转移到 brancheA）。当时，我只是在编写代码，并没有真正关心 git……大错特错。无论如何，我不确定是什么造成了混乱，是 cc17c2e HEAD@{18}: merge brancheA: Fast-forward 吗？我不记得要求那个...！其余的可能是让混乱变得更糟的东西，我很惭愧把它放在这里，但在这一点上，我感到很无助。

我考虑过从头开始重新启动并从 master 重新生成所有提交，但是我会丢失代码审阅者在 github 上的所有评论，这将是一个巨大的损失。

我想做的事：

*   删除 brancheB 中的 change_from_A_1 / change_from_A_2
*   在从 master 合并之前移回 brancheA 中应该在 brancheB 中的提交

要达到这样的目的：

```
A -- B -- C -- D -- master
     \               \  -- change_from_A_1+2 -- brancheA 
      \ change_from_B_1..4 -- merge_from_master -- brancheB 
```

你有什么建议吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:42:03.347

你总是可以解决这类问题。

1.  分别在 branchA 和 branchB 创建 oldBranchA 和 oldBranchB。
2.  将branchA重置为master，将branchB重置为B
3.  结账分店A
4.  樱桃挑选 change_from_A_1+2
5.  结账分店B
6.  樱桃挑选change_from_B_1..4，然后merge_from_master
7.  删除 oldBranchA 和 oldBranchB
8.  要推回原点，请执行`git push -f branchA:branchA`. 但是在这样做之前请考虑 10 次，因为您要做的是覆盖已发布的历史记录！

# java - 无法从 ArrayList 中删除对象

> ID：12018449
> 
> 赞同：3
> 
> 时间：2012-08-18T12:12:21.667
> 
> 标签：java

我正在做一个纸牌游戏。无论如何，我都不知道如何从 ArrayList 中删除 Card。这是我正在使用的代码：

```
private List<Card> cardDeck = new ArrayList<Card>();

public void removeCard(Card card) {
    for (Iterator<Card> it = cardDeck.iterator(); it.hasNext();) {
        Card nextCard = it.next();
        if (nextCard.equals(card)) {
            cardDeck.remove(card);
            System.out.println("removed " + card);
        }
    }
} 
```

这是卡片类，以防你需要它：

```
 public class Card {

    public Card(Rank rank, Suit suit) {
        this.rank = rank;
        this.suit = suit;
    }

    public Rank getRank() {
        return rank;
    }

    public Suit getSuit() {
        return suit;
    }

    @Override
    public String toString() {
        return getRank().toString().toLowerCase() + " of "
                + getSuit().toString().toLowerCase();
    }

    private Rank rank;

    private Suit suit;

} 
```

我已经尝试了一切，但它不会删除。有小费吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T12:14:19.903

当你迭代一个集合时，你要删除一个项目的*唯一*`remove`方法是调用迭代器。所以你应该使用：

```
if (nextCard.equals(card)) {
    it.remove();
    System.out.println("removed " + card);
} 
```

请注意，由于您没有覆盖`equals`，这实际上只是一个*引用*比较，因此您只会进入`if`语句的主体，如果`nextCard`和`card`是对完全相同的对象的引用。

当然如果你*只是*想要移除卡的方法，你应该可以将其更改为：

```
public void removeCard(Card card) {
    cardDeck.remove(card);
} 
```

...当然，对平等有同样的警告。

为了覆盖`equals`（并且`hashCode`为了保持一致性），我首先会创建`Card`一个最终类，然后编写：

```
public final class Card {
    ...

    @Override
    public boolean equals(Object other) {
        if (!(other instanceof Card)) {
            return false;
        }
        Card otherCard = (Card) other;
        return this.rank == otherCard.rank &&
               this.suit == otherCard.suit;
    }

    @Override
    public int hashCode() {
        int hash = 17;
        hash = hash * 31 + rank.hashCode();
        hash = hash * 31 + suit.hashCode();
        return hash;
    }
} 
```

这是假设`Rank`and`Suit`是枚举（对于引用相等性检查`equals`是适当的）。您可能还想在`Card`构造函数中添加无效检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T12:14:47.330

在集合中使用对象时，最好覆盖`equals()`和`hashcode()`。否则进行查找时相等条件可能会失败。

解决您的问题的另一种方法是：

使用`it.remove()`而不是`cardDeck.remove(card);`

例子：

```
for (Iterator<Card> it = cardDeck.iterator(); it.hasNext();) {
        Card nextCard = it.next();
        if (nextCard.equals(card)) {
            it.remove();
            System.out.println("removed " + card);
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T12:29:38.573

您的`Card`类实际上应该是一个`enum`，这将在每个不同的卡片和每个不同的 Java 对象之间强制建立一对一的关系。那么你就不需要实现`equals`and`hashCode`并且实际上可以使用`==`而不是`equals`. 您可以`Card`在枚举中使用常量，使用非常有效的方法`EnumSet`等等。帮自己一个忙，使`enum Card`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T15:02:58.527

在编写公共方法之前对其进行注释。用评论表明你的意图。它现在对我有帮助。

正如前面提到的那样，您应该使用迭代器来删除卡。

equals 方法没有很好地使用。因为你没有覆盖 Card 类中的 equals() 方法，所以 Object 类的 equals() 方法会被调用。如果 Card 实例相同，则此 equals 方法仅返回 true！这是 equals() 规范的一个非常特殊的情况。这是你的意图吗？如果是的话，写起来会更清楚：

if (nextCard == otherCard){..

相等通常意味着：

> 指示其他对象是否“等于”这个对象。
> 
> equals 方法在非空对象引用上实现等价关系：
> 
> ```
> It is reflexive: for any non-null reference value x, x.equals(x) should return true.
> It is symmetric: for any non-null reference values x and y, x.equals(y) should return true if and only if y.equals(x) returns 
> ```
> 
> 真的。它是可传递的：对于任何非空引用值 x、y 和 z，如果 x.equals(y) 返回 true 并且 y.equals(z) 返回 true，则 x.equals(z) 应该返回 true。它是一致的：对于任何非空引用值 x 和 y，x.equals(y) 的多次调用始终返回 true 或始终返回 false，前提是没有修改对象上 equals 比较中使用的信息。对于任何非空引用值 x，x.equals(null) 应该返回 false。

来源：[http ://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)

您是如何得出 remove 方法不起作用的结论的？

如果您以前使用过迭代器，则使用不应该使用的 ArrayList() 的 remove 方法。但是 ArrayList() 的 remove 方法有一个优点：它返回一个布尔值。始终检查返回值！因为在您的情况下，我认为必须始终移除卡，并且该方法是公开的，如果返回值为 false，您应该抛出异常。（在调用 remove() 之前卡片组会是空的吗？）

检查 remove 方法的另一种方法是检查 ArrayList 的大小是否减小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T12:13:43.527

首先，在迭代容器时删除某些内容不是一个好主意。其次，您必须实现该`equals()`方法。如果您还实现了该`hashCode()`方法，您将能够使用`ArrayList`'s 的内置`remove()`方法，而不是编写自己的方法。

# java - 从 Java 应用程序测量 Pingtime 到主机

> ID：12018452
> 
> 赞同：1
> 
> 时间：2012-08-18T12:13:02.607
> 
> 标签：java, icmp

我正在寻找一种方法来测量对服务器列表的 ping 延迟时间。重要的是，尽可能精确地测量实际的数据包延迟，而不是 jvm 计算时间。

此处的答案已涵盖某些方面：[如何从 Windows 执行真正的 Java ping？](https://stackoverflow.com/questions/2448666/how-to-do-a-true-java-ping-from-windows)

测量 InetAddress.isReachable(timeout) 的时间我认为这不是一个选项，因为它对我需要 ping 的某些服务器不起作用。

到目前为止，我最接近的是使用 processbuilder，如上面链接中的答案所示。

我还找到了 jpcap 库：[http](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/download.html) ://netresearch.ics.uci.edu/kfujii/Jpcap/doc/download.html但原生化是有代价的。

# c#-4.0 - 如何将此 Groovy 函数转换为 C#？

> ID：12018453
> 
> 赞同：2
> 
> 时间：2012-08-18T12:13:25.497
> 
> 标签：c#-4.0, groovy

我想将以下 Groovy 代码翻译成 C#

```
def find_perfect_numbers(def number) {
  (2..number).findAll { x-> (1..(x/2)).findAll{ x % it == 0 }.sum() == x }
} 
```

我从[这里](http://vasya10.wordpress.com/2012/03/09/groovy-olc-3-perfect-numbers/)得到的。

这就是我所拥有的，但它还没有准备好，也没有编译。我对常规代码的理解不够好。

```
public List<int> find_perfect_numbers(int number)
{
    List<int> lst = new List<int>();

    lst = 2.To(number).FindAll(x => (1.To(x/2)).FindAll( x % it == 0).Sum() == x);

    return lst;
} 
```

我无法翻译该部分`x % it == 0`（因为“它”是一个索引）。

*   我希望 C# 代码看起来尽可能像 groovy 函数。具体来说，线`lst = 2.To( ....`.
*   我不想使用不同的解决方案来找到完美的数字（我已经有了另一个工作功能）。对我来说，这只是关于语法，而不是关于一个好的“完美数字函数”。
*   可以创建有助于执行此操作的新（扩展）函数，就像我使用的 To 函数一样：

对于上面的 To 函数，我使用了这个 StackOverflow 函数： [Generating sets of integers in C#](https://stackoverflow.com/questions/371237/generating-sets-of-integers-in-c-sharp) 并对其进行了一些更改，以便它返回一个 int 列表而不是一个 int 数组

```
public static class ListExtensions
{
    public static List<int> To(this int start, int end)
    {
        return Enumerable.Range(start, end - start + 1).ToList();
    }
} 
```

谁能帮我？

**=== 更新 ===**

这就是我现在所拥有的，但它还没有工作，我得到 *DivideByZeroException*在部分未处理`s.value % s.idx == 0`：

```
lst = 2.To(number).FindAll(x => ((1.To(x / 2)).Select((y, index) => new {value = y, idx = index}).Where( s => s.value % s.idx == 0).Sum(t => t.value) == (decimal)x)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:21:51.890

我自己找到了。

```
lst = 2.To(number)
       .FindAll(x => ((1.To(x / 2))
       .Select((y, index) => new {value = y, idx = index+1})
       .Where( s => x % s.idx == 0)
       .Sum(t => t.value) == (decimal)x)); 
```

不像 Groovy 那样漂亮，但它确实有效。

# android - 如何在应用程序中永久保存数据（字符串或整数），直到应用程序卸载

> ID：12018463
> 
> 赞同：3
> 
> 时间：2012-08-18T12:14:23.500
> 
> 标签：android

如何在应用程序卸载之前将数据（字符串或整数）永久保存在应用程序中？..（即使用清除缓存/数据选项后需要存在数据）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:51:32.217

有轿跑车选项。内部存储、外部存储、共享首选项和数据库。这是一个描述所有这些的链接：

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

# solr - 日期列的 Solr“错误添加字段”错误

> ID：12018466
> 
> 赞同：0
> 
> 时间：2012-08-18T12:15:28.563
> 
> 标签：solr

在将我的数据库数据索引到 solr 时，它会抛出类似的错误

“HTTP 状态 400 - 错误：[doc=12903] 添加字段 'CAD1'='2012-05-02T08:03:00' 时出错”。

我在提琴手中发现了这个错误。在 solr schema xml 中，我有这个日期列或数据的代码

```
"<field name="CAD1" type="date" indexed="true" stored="true" /> 
```

"

我`m using solr version 3.5. Plz ask me if i`在这里遗漏了一些东西。请建议我为此提供解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:23:45.783

尝试添加'CAD1'='2012-05-02T08:03:00Z'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T15:51:17.830

请记住在对文件进行更新后重新启动 SOLR `schema.xml`。

# android - Android 外接键盘 ctrl 键码

> ID：12018469
> 
> 赞同：0
> 
> 时间：2012-08-18T12:15:52.390
> 
> 标签：android

我想听是否`ctrl key`按下但`android 2.3`没有`ctrl's keycode`。

我的设备无法更新到`android 3.0`

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T03:59:16.567

[For Emacs, long Journey for using CTRL key in Android](https://stackoverflow.com/questions/5124663/for-emacs-long-journey-for-using-ctrl-key-in-android) (Stack Overflow)中提到了一些可能性，例如[External Keyboard Helper Pro](http://play.google.com/store/apps/details?id=com.apedroid.hwkeyboardhelper&hl=en)（Android 应用程序）。

# wordpress - Wordpress 自定义帖子类型页面显示

> ID：12018472
> 
> 赞同：0
> 
> 时间：2012-08-18T12:16:38.077
> 
> 标签：wordpress

嗨，我正在阅读[从头开始构建 wordpress 主题](https://rads.stackoverflow.com/amzn/click/com/1477480994)以了解主题开发。我在书中解释了如何创建自定义帖子类型页面。作者提到需要此功能才能显示页：

```
add_action('init' , 'director_rewrite');
function director_rewrite(){
    global $wp_rewrite;
    $wp_rewrite->add_permastruct('typename','typename/%year%%postname%/' , true , 1);
    add_rewrite_rule('typename/([0-9]{4})/(.+)/?$','index.php?typename=$matches[2]', 'top');
    $wp_rewrite->flush_rules();
} 
```

我已经删除了这个功能，没有它页面仍然可以正确显示。这让我相信我不明白这实际上是做什么的。

那么正确显示自定义帖子类型页面是否需要此功能？如果是这样，它会做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:19:36.020

它为页面的永久链接结构添加了重写规则。如果您删除它，页面仍然正确显示，但指向您页面的链接不同！

# assembly - asm (fpu) normalize - 如何优化它

> ID：12018476
> 
> 赞同：1
> 
> 时间：2012-08-18T12:17:22.603
> 
> 标签：assembly, x86, sse, fpu

我已经编写了一些 x86 asm - fpu 例程来规范化三个浮点数的向量 - 这里是

```
 _asm_normalize10:; Function begin
    push    ebp                                     ; 002E _ 55
    mov     ebp, esp                                ; 002F _ 89\. E5
    mov     eax, dword [ebp+8H]                     ; 0031 _ 8B. 45, 08
    fld     dword [eax]                             ; 0034 _ D9\. 00
    fmul    st0, st(0)                              ; 0036 _ DC. C8
    fld     dword [eax+4H]                          ; 0038 _ D9\. 40, 04
    fmul    st0, st(0)                              ; 003B _ DC. C8
    fld     dword [eax+8H]                          ; 003D _ D9\. 40, 08
    fmul    st0, st(0)                              ; 0040 _ DC. C8
    faddp   st1, st(0)                              ; 0042 _ DE. C1
    faddp   st1, st(0)                              ; 0044 _ DE. C1
    fsqrt                                           ; 0046 _ D9\. FA
    fld1                                            ; 0048 _ D9\. E8
    fdivrp  st1, st(0)                              ; 004A _ DE. F1
    fld     dword [eax]                             ; 004C _ D9\. 00
    fmul    st(0), st1                              ; 004E _ D8\. C9
    fstp    dword [eax]                             ; 0050 _ D9\. 18
    fld     dword [eax+4H]                          ; 0052 _ D9\. 40, 04
    fmul    st(0), st1                              ; 0055 _ D8\. C9
    fstp    dword [eax+4H]                          ; 0057 _ D9\. 58, 04
    fld     dword [eax+8H]                          ; 005A _ D9\. 40, 08
    fmulp   st1, st(0)                              ; 005D _ DE. C9
    fstp    dword [eax+8H]                          ; 005F _ D9\. 58, 08
    pop     ebp                                     ; 0062 _ 5D
    ret                                             ; 0063 _ C3
    ; _asm_normalize10 End of function 
```

[这是我的代码 ;-) 它可以工作并经过我的测试]

我不太了解 x86 程序集，我想对上述内容进行一些优化（纯 fpu 旧 asm，尤其是没有 sse，但比上面更优化）

特别是我想知道上面这个东西是否有一些蹩脚的编码：我在 fpu 堆栈上加载 xyz 向量然后计数 1/sqrt(x*x+y*y+z*z) 然后再次从 ram 加载 xyz 然后乘以值店铺 -

这是次优化吗，我应该尝试只加载 xyz 一次（而不是两次），然后将其保持在 fpu 堆栈计数上，然后存储在末尾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:08:23.470

您可以完全按照您的建议和 load 做`x`，`y`而且`z`只能做一次。似乎可以/应该有所帮助。除此之外，假设您仍然不想使用近似逆平方根技巧，我认为没有太多机会。

未测试：

```
; load everything
fld dword [eax]
fld dword [eax+4]
fld dword [eax+8]
; square and add
fld st(2)
fmul st(0), st(0)
                  ; (see diagram 1 for fpu stack)
fld st(2)
fmul st(0), st(0)
                  ; (see diagram 2 for fpu stack)
faddp st(1), st(0)
                  ; (see diagram 3 for fpu stack)
fld st(1)
fmul st(0), st(0)
faddp st(1), st(0)
                  ; (see diagram 4 for fpu stack)
; calculate inverse sqrt
fsqrt
fld1
fdivrp st(1), st(0)
; scale
fmul st(1), st(0)
fmul st(2), st(0)
fmulp st(3), st(0)
; store
fstp dword [eax+8]
fstp dword [eax+4]
fstp dword [eax] 
```

图一：

```
st3: x
st2: y
st1: z
st0: x * x 
```

图2：

```
st4: x
st3: y
st2: z
st1: x * x
st0: y * y 
```

图3：

```
st3: x
st2: y
st1: z
st0: x * x + y * y 
```

图4：

```
st3: x
st2: y
st1: z
st0: x * x + y * y + z * z 
```

# android - 在一个类中执行两个不同的 AsyncTask

> ID：12018478
> 
> 赞同：0
> 
> 时间：2012-08-18T12:17:43.170
> 
> 标签：android, android-asynctask

我是安卓新手。我在使用 AsyncTask 时遇到了麻烦。

我正在尝试创建一个图片库。在我的图库中有小尺寸的图片，当您单击其中一张时，该图片的大尺寸如下所示`ImageView`。我使用了两个不同的`AsyncTask`类。其中一个是从主机获取小尺寸图片，另一个是当您单击图库中的一张图片时从主机获取大尺寸图片。

我可以加载画廊图像，但是当我单击其中一个画廊图像时，我无法在`ImageView`.
如果您帮助我或有任何建议，我将不胜感激...

我的代码是：

```
public class GalleryView extends Activity{

    String[] smallpicsURL ={        
        "http://egtxxxxx.com/jImages/antartica1.jpg",
        "http://egtxxxxx.com/jImages/antartica2.jpg",
        "http://egtxxxxx.com/jImages/antartica3.jpg",
        "http://egtxxxxx.com/jImages/antartica4.jpg",
        "http://egtxxxxx.com/jImages/antartica5.jpg",
        "http://egtxxxxx.com/jImages/antartica6.jpg",
        "http://egtxxxxx.com/jImages/antartica7.jpg",
        "http://egtxxxxx.com/jImages/antartica8.jpg",
        "http://egtxxxxx.com/jImages/antartica9.jpg",
        "http://egtxxxxx.com/jImages/antartica10.jpg"
        };

    String[] bigpicsURL ={      
            "http://egtxxxxx.com/jImages/b_antartica1.jpg",
            "http://egtxxxxx.com/jImages/b_antartica2.jpg",
            "http://egtxxxxx.com/jImages/b_antartica3.jpg",
            "http://egtxxxxx.com/jImages/b_antartica4.jpg",
            "http://egtxxxxx.com/jImages/b_antartica5.jpg",
            "http://egtxxxxx.com/jImages/b_antartica6.jpg",
            "http://egtxxxxx.com/jImages/b_antartica7.jpg",
            "http://egtxxxxx.com/jImages/b_antartica8.jpg",
            "http://egtxxxxx.com/jImages/b_antartica9.jpg",
            "http://egtxxxxx.com/jImages/b_antartica10.jpg"
            };

    Bitmap pics[];
    Bitmap bigPic;
    ImageView imageView;    

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gallery);        
        Gallery ga = (Gallery)findViewById(R.id.galleryKBU);

        pics=new Bitmap[smallpicsURL.length];

        new FetchSmallBitmap().execute();   

        ga.setAdapter(new ImageAdapter(this));

        try {
            Thread.sleep(700);
         } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
         }  

        imageView = (ImageView)findViewById(R.id.ivKBU);  

        ga.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                Toast.makeText(getBaseContext(),"Çağdaş Eğitim Yuvası", Toast.LENGTH_SHORT).show();
                new FetchBigBitmap().execute(arg2);
                //imageView.setImageBitmap(bigPic);             
            }       
        });

    } 

    private Bitmap downloadPictures(int i) {
        String urlStr=smallpicsURL[i];          
        try { 
            URL url = new URL(urlStr);
            final URLConnection conn = url.openConnection(); 
            conn.connect(); 
            final BufferedInputStream bis = new BufferedInputStream(conn.getInputStream()); 
            final Bitmap bm = BitmapFactory.decodeStream(bis); 
            bis.close(); 
            return bm;
        } catch (IOException e) { 
           Log.d("DEBUGTAG",". Resim indirmede hata..."); 
        }     
        return null;
    }

    private Bitmap downloadBigPictures(int i) {
        String urlStr=bigpicsURL[i];            
        try { 
            URL url = new URL(urlStr);
            final URLConnection conn = url.openConnection(); 
            conn.connect(); 
            final BufferedInputStream bis = new BufferedInputStream(conn.getInputStream()); 
            final Bitmap bm = BitmapFactory.decodeStream(bis); 
            bis.close(); 
            return bm;
        } catch (IOException e) { 
           Log.d("DEBUGTAG",". Resim indirmede hata..."); 
        }     
        return null;
    }
  private class FetchSmallBitmap extends AsyncTask<Void, Integer, Bitmap[]> {

        private ProgressDialog dialog = new ProgressDialog(GalleryView.this);

        protected void onPreExecute(){
            dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            dialog.setMax(100);
            dialog.setMessage("Resimler yükleniyor");
            dialog.show();
        }

        @Override
        protected Bitmap[] doInBackground (Void ...params) {
            for(int i=0;i<10;i++){
                pics[i]=downloadPictures(i);
                publishProgress(10);                                
            }       
            return pics;
        }
         protected void onProgressUpdate(Integer ...progress){

             dialog.incrementProgressBy(progress[0]);

        }

         protected void onPostExecute(Bitmap[] mbitmap) {
             dialog.dismiss();                
         }
       }

        public class ImageAdapter extends BaseAdapter {

        private Context ctx;
        int imageBackground;

        public ImageAdapter(Context c) {
            ctx = c;
            TypedArray ta = obtainStyledAttributes(R.styleable.gallery_KBU);
            imageBackground = ta.getResourceId(R.styleable.gallery_KBU_android_galleryItemBackground, 1);
            ta.recycle();
        }

        public int getCount() {

            return pics.length;
        }

        public Object getItem(int arg0) {

            return arg0;
        }

        public long getItemId(int arg0) {

            return arg0;
        }

        public View getView(int arg0, View arg1, ViewGroup arg2) {
            ImageView iv = new ImageView(ctx);
            iv.setImageBitmap(pics[arg0]);
            iv.setScaleType(ImageView.ScaleType.FIT_XY);
            iv.setLayoutParams(new Gallery.LayoutParams(150,120));
            iv.setBackgroundResource(imageBackground);
            return iv;
        }

    }
      private class FetchBigBitmap extends AsyncTask<Integer, Integer, Bitmap> {

        private ProgressDialog dialog = new ProgressDialog(GalleryView.this);

        protected void onPreExecute(){
            dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            dialog.setMax(100);
            dialog.setMessage("Resimler yükleniyor");
            dialog.show();
        }

        @Override
        protected Bitmap doInBackground (Integer ...params) {                   
            imageView.setImageBitmap(downloadBigPictures(params[0]));
            return null;
        }
         protected void onProgressUpdate(Integer ...progress){

             dialog.incrementProgressBy(progress[0]);            

         }

         protected void onPostExecute(Bitmap x) {
             dialog.dismiss();

         }

    }
} 
```

我收到这样的错误消息：

```
08-18 15:23:11.477: E/AndroidRuntime(15005): FATAL EXCEPTION: AsyncTask #2
08-18 15:23:11.477: E/AndroidRuntime(15005): java.lang.RuntimeException: An error occured while executing doInBackground()
08-18 15:23:11.477: E/AndroidRuntime(15005):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at java.lang.Thread.run(Thread.java:1096)
08-18 15:23:11.477: E/AndroidRuntime(15005): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
08-18 15:23:11.477: E/AndroidRuntime(15005):    at android.view.ViewRoot.checkThread(ViewRoot.java:2812)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at android.view.ViewRoot.requestLayout(ViewRoot.java:594)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at android.view.View.requestLayout(View.java:8125)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at android.view.View.requestLayout(View.java:8125)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at android.view.View.requestLayout(View.java:8125)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at android.view.View.requestLayout(View.java:8125)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at android.view.View.requestLayout(View.java:8125)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at android.widget.ImageView.setImageDrawable(ImageView.java:310)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at android.widget.ImageView.setImageBitmap(ImageView.java:324)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at com.kbu.bilgisistemi.GalleryView$FetchBigBitmap.doInBackground(GalleryView.java:258)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at com.kbu.bilgisistemi.GalleryView$FetchBigBitmap.doInBackground(GalleryView.java:1)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-18 15:23:11.477: E/AndroidRuntime(15005):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-18 15:23:11.477: E/AndroidRuntime(15005):    ... 4 more
08-18 15:23:11.687: E/WindowManager(15005): Activity com.kbu.bilgisistemi.GalleryView has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4a514158 that was originally added here
08-18 15:23:11.687: E/WindowManager(15005): android.view.WindowLeaked: Activity com.kbu.bilgisistemi.GalleryView has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4a514158 that was originally added here
08-18 15:23:11.687: E/WindowManager(15005):     at android.view.ViewRoot.<init>(ViewRoot.java:247)
08-18 15:23:11.687: E/WindowManager(15005):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
08-18 15:23:11.687: E/WindowManager(15005):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
08-18 15:23:11.687: E/WindowManager(15005):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
08-18 15:23:11.687: E/WindowManager(15005):     at android.app.Dialog.show(Dialog.java:241)
08-18 15:23:11.687: E/WindowManager(15005):     at com.kbu.bilgisistemi.GalleryView$FetchBigBitmap.onPreExecute(GalleryView.java:253)
08-18 15:23:11.687: E/WindowManager(15005):     at android.os.AsyncTask.execute(AsyncTask.java:391)
08-18 15:23:11.687: E/WindowManager(15005):     at com.kbu.bilgisistemi.GalleryView$1.onItemClick(GalleryView.java:102)
08-18 15:23:11.687: E/WindowManager(15005):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
08-18 15:23:11.687: E/WindowManager(15005):     at android.widget.Gallery.onSingleTapUp(Gallery.java:864)
08-18 15:23:11.687: E/WindowManager(15005):     at android.view.GestureDetector.onTouchEvent(GestureDetector.java:557)
08-18 15:23:11.687: E/WindowManager(15005):     at android.widget.Gallery.onTouchEvent(Gallery.java:839)
08-18 15:23:11.687: E/WindowManager(15005):     at android.view.View.dispatchTouchEvent(View.java:3766)
08-18 15:23:11.687: E/WindowManager(15005):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:897)
08-18 15:23:11.687: E/WindowManager(15005):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
08-18 15:23:11.687: E/WindowManager(15005):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
08-18 15:23:11.687: E/WindowManager(15005):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
08-18 15:23:11.687: E/WindowManager(15005):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
08-18 15:23:11.687: E/WindowManager(15005):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1731)
08-18 15:23:11.687: E/WindowManager(15005):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1120)
08-18 15:23:11.687: E/WindowManager(15005):     at android.app.Activity.dispatchTouchEvent(Activity.java:2086)
08-18 15:23:11.687: E/WindowManager(15005):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1715)
08-18 15:23:11.687: E/WindowManager(15005):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1787)
08-18 15:23:11.687: E/WindowManager(15005):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-18 15:23:11.687: E/WindowManager(15005):     at android.os.Looper.loop(Looper.java:123)
08-18 15:23:11.687: E/WindowManager(15005):     at android.app.ActivityThread.main(ActivityThread.java:4633)
08-18 15:23:11.687: E/WindowManager(15005):     at java.lang.reflect.Method.invokeNative(Native Method)
08-18 15:23:11.687: E/WindowManager(15005):     at java.lang.reflect.Method.invoke(Method.java:521)
08-18 15:23:11.687: E/WindowManager(15005):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
08-18 15:23:11.687: E/WindowManager(15005):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
08-18 15:23:11.687: E/WindowManager(15005):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:24:01.750

您不能在非 UI 线程上执行以下操作。您正在 doinbackground 中执行 Ui 操作。

```
 imageView.setImageBitmap(downloadBigPictures(params[0])); 
```

将上一行移至 OnpostExecute。

您不需要 Asynctask 来设置图像

# javascript - Javascript 正则表达式仅用于整数，不以 0 开头，但允许 0

> ID：12018479
> 
> 赞同：7
> 
> 时间：2012-08-18T12:17:45.887
> 
> 标签：javascript, regex

我需要一个正则表达式来验证整数。`05 and 00`不允许但`0`被允许。目前我有这个：

```
/^[1-9]\d*$/ 
```

但它不允许`0`。感谢帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T12:20:09.177

```
 ^(?:[1-9]\d*|0)$ 
```

这是你的模式...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-18T12:22:04.547

你的正则表达式应该是`^(?!0.)\d+$`

# css - Webkit 浏览器有时绝对定位

> ID：12018480
> 
> 赞同：1
> 
> 时间：2012-08-18T12:17:49.897
> 
> 标签：css, google-chrome, safari, position

我有一个网站，我已经在所有其他主流浏览器中测试过，效果很好。我的问题出在 WebKit 浏览器（Safari 5.1.4 和 Chrome 21）上，我绝对定位的文本有时会起作用。如果我刷新 10 次，它可能会正确定位两次。有趣的是，如果我放大浏览器，格式就会固定。

网站是：[http](http://survey-snap.com/ssContact/) ://survey-snap.com/ssContact/ 元素是蓝色部分的要点。

CSS：

```
.bulletpoints {
    padding-top: 30px;
    font-size: 1.11em;
}

.bulletpoints li {
    height: 56px;
    position: relative;
    padding-bottom: 17px;
}

.bulletpoints img {
    float: left;
    padding-right: 5px;
}

.bulletpoints span {
    position: absolute;
    top: 5px;
    width: 250px;
}

.bulletpoints p {
    margin-top: 10px;
    padding-left: 61px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:41:52.367

[在 Chrome/Safari 中](https://stackoverflow.com/questions/5791779/absolutely-positioned-images-in-chrome-safari?rq=1)阅读绝对定位的图像后，我只是重新编写了该部分以删除定位并改为浮动它。

# android - Android 中的 GC 消息

> ID：12018484
> 
> 赞同：-1
> 
> 时间：2012-08-18T12:18:22.080
> 
> 标签：android, memory, memory-management, memory-leaks

请给我有关这三个不同行的所有信息，以及 Android 中的 OOM 以及如何减少它。

```
GC_EXPLICIT freed 1669K, 10% free 53715K/59335K, paused 2ms+4ms.
GC_FOR_ALLOC freed 853K, 6% free 50216K/52935K, paused 18ms.
GC_CONCURRENT freed 1K, 5% free 52515K/55239K, paused 2ms+3ms. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T12:30:45.643

这三行是来自垃圾收集器 (GC) 的消息，[请阅读这篇关于垃圾收集](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)的文章，大小（即 1669K、53715K）是通过收集和销毁占用那么多 RAM 内存的对象而释放的内存大小。内存不足错误 (OOM) 简单来说就是操作系统告诉您您的应用程序消耗的内存比分配给它的内存多，您应该对此采取措施。

现在，为了消除 OOM 并获得最佳实践，请观看有关内存管理和最佳实践的精彩视频：[Google I/O 2012 - Doing More With Less](http://www.youtube.com/watch?v=gbQb1PVjfqM)。

# html - Favicon 未显示在我的网站上

> ID：12018487
> 
> 赞同：0
> 
> 时间：2012-08-18T12:19:13.047
> 
> 标签：html, favicon

出于某种原因，我的网站图标没有出现在我的网站上。我测试了 mydomain.com/favicon.ico 并且可以看到图标。我使用的是最新版本的 safari。我在我的头标签中使用下面的代码。有什么问题？Tks

```
<link rel="icon" href="favicon.ico" type="image/x-icon" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:28:23.687

您很可能使用 Internet Explorer 来测试页面。IE 不支持除 ICO 格式之外的任何内容，并且您的 favicon 是 png。

使用[http://tools.dynamicdrive.com/favicon/](http://tools.dynamicdrive.com/favicon/)或类似文件将文件转换为 ICO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:36:49.247

用这个： `<link rel="icon" type="image/ png" href="http:// example.com/ myicon.png">`

# android - 果冻豆等级BarStyleSmall坏了

> ID：12018490
> 
> 赞同：0
> 
> 时间：2012-08-18T12:19:29.887
> 
> 标签：android, android-view

似乎 RatingBar 小部件在 JellyBean 4.1`style="?android:attr/ratingBarStyleSmall"` 上
`?android:attr/ratingBarStyleIndicator`不起作用。它显示在 Eclipse-ADT UI 编辑器上，但不在实际设备上。是否有解决此问题而无需求助于自定义视图的方法？谢谢

注意：它在以前的平台上运行良好。仅在 Jellybean 上不会出现。

代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

    <RatingBar
        android:id="@+id/ratingBar1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="33dp"
        style="?android:attr/ratingBarStyleIndicator"
         />

</RelativeLayout> 
```

# jsp - 使用 href 链接

> ID：12018492
> 
> 赞同：0
> 
> 时间：2012-08-18T12:19:48.117
> 
> 标签：jsp, servlets

> **可能的重复：**
> [将 jsp 链接到 servlet 并再次链接到 servlet 显示一些问题](https://stackoverflow.com/questions/12018660/linking-jsp-to-servlet-and-that-to-servlet-again-shows-some-problems)

我尝试使用 href 将 servlet 链接到 jsp。我的代码是，

```
PrintWriter out = response.getWriter();
String emailid=request.getParameter("user");
out.println("<a href=\"mahi6.jsp?emailid=<%=emailid%>\">Send information to someone</a>"); 
```

在jsp中，

```
<%
            String e1=(String)request.getParameter("emailid");
            if(e1!=null)
                               {
            %>
            <br>
            Enter the email id of the user you wanna send info to
            <input type="text" name="user1" value="" size="15"/>
            <input type="hidden" name="u1" value=<%=u1%> />
            <input type="hidden" name="e1" value=<%=e1%> />
            <input type="submit" value="proceed"/>
            <%
                              }
            %> 
```

但是当我运行它时，我得到一个空白页。那人的emailid是空的。我已经签入了 servlet，那里的 emailid 不为空。错误是什么？

# r - 如何使用 ggplot2 为 R 中的每个条形图在 geom_bar 上放置标签

> ID：12018499
> 
> 赞同：112
> 
> 时间：2012-08-18T12:20:43.110
> 
> 标签：r, ggplot2, bar-chart

我发现了这个，[如何使用 ggplot2 在 R 中的 geom_bar 上](https://stackoverflow.com/questions/6455088/how-to-put-labels-over-geom-bar-in-r-with-ggplot2)放置标签，但它只是将标签（数字）放在一个条上。

假设每个 x 轴有两个条形图，如何做同样的事情？

我的数据和代码如下所示：

```
dat <- read.table(text = "sample Types Number
sample1 A   3641
sample2 A   3119
sample1 B   15815
sample2 B   12334
sample1 C   2706
sample2 C   3147", header=TRUE)

library(ggplot2)
bar <- ggplot(data=dat, aes(x=Types, y=Number, fill=sample)) + 
  geom_bar(position = 'dodge') + geom_text(aes(label=Number)) 
```

然后，我们会得到： ![在此处输入图像描述](../Images/525862432ac97c44352326245b4ae0b1.png)

似乎数字文本也位于“闪避”模式中。我搜索[了 geom_text 手册](http://ggplot2.tidyverse.org/reference/geom_text.html)以查找一些信息，但无法使其正常工作。

建议？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-08-18T15:02:01.197

试试这个：

```
ggplot(data=dat, aes(x=Types, y=Number, fill=sample)) + 
     geom_bar(position = 'dodge', stat='identity') +
     geom_text(aes(label=Number), position=position_dodge(width=0.9), vjust=-0.25) 
```

![ggplot 输出](../Images/6c0bb260a27ad303568a51f183e1e9bd.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-17T00:57:47.823

要添加到 rcs 的答案，如果要在 x 是 POSIX.ct 日期时将 position_dodge() 与 geom_bar() 一起使用，则必须将宽度乘以 86400，例如，

```
ggplot(data=dat, aes(x=Types, y=Number, fill=sample)) + 
 geom_bar(position = "dodge", stat = 'identity') +
 geom_text(aes(label=Number), position=position_dodge(width=0.9*86400), vjust=-0.25) 
```

# javascript - Jquery无法找到给定表单ID的表单输入

> ID：12018500
> 
> 赞同：2
> 
> 时间：2012-08-18T12:21:05.637
> 
> 标签：javascript, jquery, forms

我正在尝试在我的网站上的回复表单的 sumbit 上运行一个功能。这些表单是在页面加载后由 Javascript 创建的，因此 Jquery 使用**实时**函数来响应“.replyformsubmit”类按钮的单击。

我需要脚本来记录表单的输入值，但似乎无法这样做。

目前找到了包含按钮的表单的 ID，但使用它来尝试查找输入值似乎没有结果，这可能是一个男生错误，但我似乎无法理解。

任何帮助都会很棒。

jQuery：

```
$(".replyformsubmit").live("click", function(){

var curform = $(this).closest('form').attr('id');//what form is the current one?

var comment = $('#' + curform + ' >  input[name=comment]"').val(); //comes out as undefined
var replyingSerial = $('#' + curform + ' >  input[name=replyingSerial]"').val(); //comes out as undefined

... 
```

该脚本似乎无法找到*评论*和*回复序列号*是什么。

标准示例表单的 HTML 是：

```
<form action="com.php" method="post" id="replyform_quickreply_1345291318.6107" class="replyform">
<textarea name="comment" type="text" id="commenttextquickreply_1345291318.6107">
</textarea>
<br>
<input type="submit" value="send!" class="replyformsubmit">
<input type="hidden" style="visibilty: hidden;" name="replyingSerial" value="1345291318.6107"></form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T12:24:39.233

那是因为按钮是 a `submit`，它阻止了其余的代码被执行。改为使用`type='button'`。

或使用：

```
$('#formname').submit(function() {
  alert('Handler for .submit() called.');
  return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T12:28:07.527

有几件事。注释是一个文本区域，而不是输入，所以如果你想找到它，你需要使用 textarea[name=comment]。

其次，您可以使用 parent() 和 find 使您的代码更简洁：

```
$(".replyformsubmit").on("click", function(){
   var parent = $(this).parent();
   var comment= parent.find("textarea[name=comment]");
    alert(comment.val());
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T12:26:08.840

将 input type="submit" 更改为 input type="button" 因为它不允许其他代码在提交后执行，而不是 .live() 使用 .on()

从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

此方法提供了一种将委托事件处理程序附加到页面的文档元素的方法，这在将内容动态添加到页面时简化了事件处理程序的使用。有关更多信息，请参阅 .on() 方法中对直接事件与委托事件的讨论。

# wpf - 在 WPF 中加载外部图像

> ID：12018501
> 
> 赞同：2
> 
> 时间：2012-08-18T12:21:15.227
> 
> 标签：wpf, windows, vb.net, xaml

我正在 VB.NET 中使用 WPF for Windows 8 构建应用程序，我需要从磁盘加载多个图像。我不想将图像添加为项目的参考，我只想按原样加载它们。

我已经在 MSDN 上研究了[“成像概述”](http://msdn.microsoft.com/en-us/library/ms748873.aspx)以及互联网上的其他几篇文章，但没有解决我的问题。

我同时使用了 XAML 和代码，但没有任何效果。我无法获得呈现的图像。

> ```
> Dim myimage As New Image
> myimage.Width = 200
> Dim bitmapimage As New BitmapImage()
> bitmapimage.UriSource = New Uri("C:\Users\MyName\Documents\Database\image.jpg")
> myimage.Source = bitmapimage 
> ```

XAML 代码：

> ```
> <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
> <Image HorizontalAlignment="Left" Height="265" Margin="191,145,0,0" VerticalAlignment="Top" Width="660">
> 
> <Image.Source>
> <BitmapImage UriSource="C:\Users\MyName\Documents\Database\image.jpg"/>
> </Image.Source>
> 
> </Image>
> </Grid> 
> ```

当我加载引用的图像（即 Assets/Logo.png）时，它会正确加载它。我还在应用程序清单中添加了所有必要的功能和声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:54:58.347

您的 XAML 看起来正确。可能图像路径无效。但是，它可以像这样更简单地编写：

```
<Image HorizontalAlignment="Left" Height="265" Margin="191,145,0,0" VerticalAlignment="Top" Width="660"
       Source="C:\Users\MyName\Documents\Database\image.jpg" /> 
```

路径字符串会自动转换为 ImageSource 实例。

在代码中，您应该使用带有 Uri 参数的[BitmapImage 构造函数。](http://msdn.microsoft.com/en-us/library/ms602473%28v=vs.100%29.aspx)否则，您将不得不调用[BeginInit](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.begininit%28v=vs.100%29)和[EndInit](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.endinit%28v=vs.100%29)。

```
Dim uri As New Uri("C:\Users\MyName\Documents\Database\image.jpg")
Dim bitmapimage As New BitmapImage(uri)
myimage.Source = bitmapimage 
```

# haskell - cabal：依赖于具有特定编译标志的包

> ID：12018503
> 
> 赞同：2
> 
> 时间：2012-08-18T12:21:40.610
> 
> 标签：haskell, compilation, dependency-management, flags, cabal

可以在`A.cabal`文件中指定一个包`A`依赖于**使用标志编译的****包`B``x`**吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:26:42.473

不，这是不可能的，并且有一个很好的理由：编译标志不应该改变包的公共 API，所以如果你发现一个包有这种行为，你应该联系它的维护者。

# .net - 如何将对象列表从一种类型转换为另一种类型

> ID：12018504
> 
> 赞同：3
> 
> 时间：2012-08-18T12:21:45.403
> 
> 标签：.net, converter, object-type

我有两个对象。

```
class User{
 public int id{get;set;}
 public string name{get;set;}
}

class UserProtectedDetails{
 public string name{get;set;}
} 
```

我怎样才能转换`List<User>`为`List<UserProtectedDetails>`？

我知道如何在反射中做到这一点，但是无论如何用 Linq 或其他 .NET 方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:24:20.063

> 有没有办法以 linq 或其他 .net 方式进行？

当然：

```
List<User> list = ...; // Make your user list
List< UserProtectedDetails> = list
    .Select(u => new UserProtectedDetails{name=u.name})
    .ToList(); 
```

**编辑：（**作为对评论的[回应](https://stackoverflow.com/questions/12018504/how-to-convert-list-of-objects-from-one-type-to-an-other/12018521#comment16036440_12018521)）如果您想避免使用该`{name = u.name}`部分，您需要（1）一个为您进行映射的函数，或者（2）一个`UserProtectedDetails`带有`User`参数的构造函数：

```
UserProtectedDetails(User u) {
    name = u.name;
} 
```

一种或另一种方式，`name = u.name`需要在某处进行分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:25:06.660

好吧，这可能很简单

```
var userList = new List<User>();

var userProtectedDetailsList = userList.Select(u => 
    new UserProtectedDetails { name = u.name }
)
.ToList(); 
```

# html - 带有使用 html5 和 css3 的搜索图像的文本框

> ID：12018508
> 
> 赞同：0
> 
> 时间：2012-08-18T12:22:12.257
> 
> 标签：html, css

我正在使用 html5 和 css3 做第一个站点。要显示带有搜索玻璃图像的文本框，我找到[了这个](https://stackoverflow.com/questions/6010006/doing-a-input-type-text-with-css3-and-fixed-image-on-the-background)帮助，它的效果很好： ![在此处输入图像描述](../Images/1f06fb60d049aa872d3fb67fdbd1edc2.png)

这是代码：

**HTML**

```
<form id="header-search">
<input type="text" class="searchbox" /><input type="submit" class="button" value="" /> 
```

**CSS**

```
#header-search{overflow:auto;}

#header-search input.searchbox {
     -webkit-border-radius: 5px;
     -moz-border-radius: 5px;
     border-radius: 5px;
     border:1px solid #8e8e8e;
     background-color:#f5f5f5;
     height:16px;
     padding:4px;
     padding-right:28px;
     color:#4a4a4a;
     float:left;
 }

#header-search input.button{
    border:0;
    padding:0;
    margin:0 0 0 -24px;
    width:24px;
    height:24px;
    background:transparent url('your-search-icon-path-here') center center  no-repeat;
    float:left;
} 
```

我需要在文本框的右侧显示搜索图像我试图理解 CSS 但我无法理解。

**你能指导我什么是文本框中的图像分组吗？由于 CSS 代码中没有显示属性，如何控制其显示和定位？**

如何从文本框的左侧更改其显示？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:49:24.570

在给定的示例中，填充使计算搜索框的实际宽度令人困惑（不是太令人困惑，但是有点）。

因此，首先看一下我通过修改您的示例所做的示例：[示例](http://jsfiddle.net/tgUAW/)

这里发生的实际情况是按钮排列在输入框旁边。但是我们通过提供 -24 的边距（这是图像的宽度）来强制它向左侧移动。所以通过减少 24px 的左边距使它看起来像在文本框中。现在，如果我们想将图像左对齐，那么我们可以将左边距减小到文本框的宽度，使其看起来像在左边。

```
margin:0 0 0 -200px; 
```

这里 200px 是文本框的宽度。

[左图示例](http://jsfiddle.net/tgUAW/1/)

# javascript - 在Chrome中正确的选项卡/窗口中打开一个URL

> ID：12018510
> 
> 赞同：0
> 
> 时间：2012-08-18T12:22:25.867
> 
> 标签：javascript, google-chrome

我正在尝试使用`window.open`在新选项卡或窗口中打开 URL。目前我只能让它在一个“伪窗口”中打开，它更像是一个弹出窗口而不是一个正确的窗口。

如何使用 JavaScript 在 Chrome 的适当窗口或选项卡中打开 URL？

注意：我尝试`window.open`使用[Code Search 查找](http://code.google.com/p/chromium/source/search)函数的代码，但找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:24:13.353

据我所知，这是由浏览器控制的，我们没有办法改变它。

您可以使用将目标设置为的超链接`"_blank"`并尝试，但这不会是`window.open`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:25:47.827

[使用 JavaScript 在新选项卡（而不是新窗口）中打开 URL](https://stackoverflow.com/questions/4907843/open-url-in-new-tab-using-javascript)

取自这里

```
$('a').click(function() {
  $(this).attr('target', '_blank');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:51:55.350

```
$(document).ready(function() {
   $('#NewTab').click(function() {
        $(this).target = "_blank";
        window.open($(this).prop('href'));
        return false;
   });
});​ 
```

它可以帮助你

# android - Android Google Play Intent 引荐来源网址

> ID：12018512
> 
> 赞同：8
> 
> 时间：2012-08-18T12:22:37.803
> 
> 标签：android, android-intent, google-analytics, google-play, referrer

我正在像这样启动 Google Play：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=com.example"));                                                           
intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
startActivity(intent); 
```

我想包括引荐来源数据，如下所述：[https](https://developers.google.com/analytics/devguides/collection/android/devguide#google-play-builder) ://developers.google.com/analytics/devguides/collection/android/devguide#google-play-builder 不幸的是，它会生成指向 google play 网站的 url . 意图的等价物是什么？我会感谢一个示例源代码。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-19T00:05:50.393

将引荐来源数据添加到 Google Play 链接对于应用内链接的工作方式与在网络上的工作方式相同：

您可以通过市场 URI 中的参数添加推荐人数据`referrer`，即：

```
market://details?id=com.example&referrer=utm_source%3Dmyapp%26utm_medium%3Dcross-sell 
```

如果用户选择然后安装您链接到的应用程序，则 Google Play 应用程序应在安装期间将该`referrer`参数的值（如果存在）作为额外的字符串传递给`com.android.vending.INSTALL_REFERRER`意图。

请注意，从 Google Play 商店网站启动的远程安装不会传递引荐来源网址数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-19T07:14:31.147

请检查您是否在您的清单文件中提到了此接收器。如果它在那里，您将得到相同的结果。否则，请添加到 Manifest 文件中

```
<receiver android:name="com.google.android.apps.analytics.AnalyticsReceiver" android:exported="true">
  <intent-filter>
    <action android:name="com.android.vending.INSTALL_REFERRER" />
  </intent-filter>
</receiver> 
```

应该是工作

# php - CodeIgniter 查询错误

> ID：12018514
> 
> 赞同：-2
> 
> 时间：2012-08-18T12:23:10.687
> 
> 标签：php, database, codeigniter

我正在使用 codeIgniter 并且真的很坚持。

这是我的模型功能

```
public function get_products_names($c_name)
{

$this->db->query('SELECT name
                  FROM products
                  WHERE category=$c_name');

return $query->result_array();
} 
```

我从控制器类调用这个函数如下

```
 $this->load->model('products_model');
    $data['products_categories'] = $this->products_model->get_products_names('Aata');
    echo $data['products_categories']['name']; 
```

它给了我以下错误，我不知道为什么

```
A Database Error Occurred

Error Number: 1054

Unknown column '$c_name' in 'where clause'

SELECT name FROM products WHERE category=$c_name

Filename: C:\wamp\www\OSW_appnsys\misystemsys\database\DB_driver.php

Line Number: 330 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:25:10.427

将单引号更改为双引号。[http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)

> 双引号字符串最重要的特性是变量名将被扩展。

```
public function get_products_names($c_name)
{

$this->db->query("SELECT name
                  FROM products
                  WHERE category=$c_name");

return $query->result_array();
} 
```

但是，不确定这是否是安全的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:47:33.737

i may be deviating a little , but why dont you try something like this : (Use active records makes the query more "readable") Model:

```
public function get_products_names($c_name)
{
$this->db->select('name');
$this->db->where('category',$c_name);
$query = $this->db->get('products');
if($query->num_rows) 
return $query->result();
return false;
} 
```

controller :

```
$names_arr = array();
$this->load->model('products_model');
$result = $this->products_model->get_products_names('Aata');
foreach($result as $r){
array_push($names_arr,$r->name)
}
print_r($names_arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:49:42.990

你可以给：

```
$this->db->query('SELECT name
              FROM products
              WHERE category='.$c_name);
return $query->result(); / return $query->row_array(); 
```

它会正常工作。

# asp.net - 响应式网页设计不适用于图片

> ID：12018515
> 
> 赞同：0
> 
> 时间：2012-08-18T12:23:28.160
> 
> 标签：asp.net, html, css, responsive-design

我正在尝试创建响应式设计网页。它适用于我的表格和文本（当我调整浏览器大小时，它会自动调整大小。但这不会发生在我的图片上。

CSS 文件：

```
@media screen and (max-width: 999px) {
 .page {
    width: 720px;
 }
 .header {
    width:720px;
 }
 img{
    width: 720px;
 }
}

@media screen and (max-width: 719px) {
 .page {
    width: 100%;
 }
 .header {
    width:100%;
 }
 img {
    width: 100%;
 }
}

@media screen and (max-width: 479px) {
 .page {
    width: 98%;
 }
 .header{
    width: 98%;
 }
}

.page {
  width: 960px;
  background-color: #fff;
  margin: 20px auto 0 auto; 
  border: 1px solid #496077;
}

img {
  float: left;
  width: 48%;
  margin: 0 1%;
} 
```

我的 .aspx 文件：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

    <h2>
        Welcome to ASP.NET!
    </h2>
    <p>
        To learn more about ASP.NET visit <a href="http://www.asp.net" title="ASP.NET Website">www.asp.net</a>.
    </p>
    <p>
        You can also find <a href="http://go.microsoft.com/fwlink/?LinkID=152368&amp;clcid=0x409"
            title="MSDN ASP.NET Docs">documentation on ASP.NET at MSDN</a>.
    </p>
    <table border = "1">
<tr>
<td><center>'''Learning Outcome'''</center></td>
<td><center>'''Achievement Methods'''</center></td>
</tr>

<tr>
<td>Realistic problem solving and learning to learn skills</td>
<td>
my text here
</td> 
</tr>

<tr>
<td>Managing a real-time project from initiation to rollout </td>
<td>
my text here
</td>
</tr>

<tr>
<td>Understanding banking industry processes & practices</td>
<td>
my text here
</td>
</tr>

<tr>
<td>Team Cohesiveness</td>
<td>
*my text here
</td>
</tr>

</table>

<div>
    <img src="http://files.g4tv.com/images/blog/2008/06/18/633493967095957891.jpg" class="img" alt="DOMO">
    <img src="http://files.g4tv.com/images/blog/2008/06/18/633493967095957891.jpg" class="img" alt="image">
</div> 
```

我的文字是响应式的，但我的图片不是，请参阅 jsfiddle 的示例： [jsFiddle](http://jsfiddle.net/rlemon/m5bHR/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T12:40:20.367

如果您已经准备好媒体查询内容（并且如果您想完全控制图像大小），我会使用您为图像提供的那些像素宽度，如果您真的做的更像是流体网格而不是基于列的，并且您想在调整大小时一直缩放你的 img，我会尝试使用：

```
img{
    max-width: 100%;    
    _width: 100%;
} 
```

**附带说明：**当您处理响应式设计页面时，您应该考虑在从桌面移动到移动设备时将较大的图像交换为较小的（或隐藏它们） - 这是因为网络延迟，缩放大图像以适应较小的设备屏幕需要更多加载到您的页面的时间比使用替代的例如移动布局图像代替。

**编辑：**

您在媒体查询之外指定**img 样式**，因此如果它们甚至设置到位，您总是会覆盖以前的样式 - 您应该始终在 css 文件的开头指定默认样式，然后是媒体查询规则（因为它们是屏幕-width 特定），而且您的媒体查询宽度似乎非常特别，我将使用以下基础作为初学者：（移动优先方法）。

```
/* MOBILE PORTRAIT */
@media only screen and (min-width: 320px) {
/* your styles */
}

/* MOBILE LANDSCAPE */
@media only screen and (min-width: 480px) {
/* your styles */
}

/* SMALL TABLET */
@media only screen and (min-width: 600px) {
/* your styles */
}

/* TABLET/NETBOOK */
@media only screen and (min-width: 768px) { 
/* your styles */
}

/* LANDSCAPE TABLET/NETBOOK/LAPTOP */
@media only screen and (min-width: 1024px) { 
/* your styles */
}

/* DESKTOP */
@media only screen and (min-width: 1280px) { 
/* your styles */
}

/* WIDESCREEN */
/* Increased body size for legibility */
@media only screen and (min-width: 1400px) { 
 /* your styles */
} 
```

如果您当前的文件有问题，请考虑修复您的 html 标题并在下次提供更准确的信息 :)..**设计响应式网格并不容易**，并且在尝试这样做时网络中有多个资源可以开始。例如： http: [//fluidbaselinegrid.com/](http://fluidbaselinegrid.com/)和[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)检查他们的代码并学习.. 什么来找我，我不想再发明轮子，我只是选择现成的响应式设计网格/框架作为我目前正在使用的项目的基础。祝你好运，对于过度杀伤的答案感到抱歉！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:51:07.767

确保首先将固定宽度设置为图像。

```
<img src="image.png" width="100px"/> 
```

并将最大宽度设置为 100%。

```
img {max-width: 100%;}​ 
```

# java - 我可以依靠垃圾收集器来停止 AsyncTask 吗？

> ID：12018528
> 
> 赞同：4
> 
> 时间：2012-08-18T12:25:07.540
> 
> 标签：java, android, garbage-collection

一个快速的理论问题。假设我有一个 Java 类，它同时使用终结器和它自己的私有 AsyncTask 的实例，而在其他任何地方都没有引用它。

现在假设 AsyncTask 的 doInBackground 方法类似于：

```
while(go) {
 f();
} 
```

终结器是：

```
public void finalize() {
 go = false;
} 
```

当对象的所有外部引用都被删除时，AsyncTask 会停止吗？或者系统会继续线程，永远不会删除对象，因为它被线程引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:22:16.037

> 我可以依靠垃圾收集器来停止 AsyncTask 吗？

不，你不能。事实上，您可以依靠 GC*不*停止任务。

GC 只会终结一个无法访问的对象。但是根据定义，所有活动线程都是可访问的，这意味着`AsyncTask`对象也将是可访问的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T05:08:48.697

简短的回答：线程一直在运行，你不能依靠 GC 来阻止它。

详细信息：我的问题无法得到充分的答案（不过谢谢你，Alberto）我决定自己进行经验测试。使用以下测试代码：

```
public class TestActivity extends Activity {
   private ThreadContainer mtc;

   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      setContentView(R.layout.main);

      mtc = new ThreadContainer();
   }

   public void btnFree_click(View view) {
      Log.v("TestActivity","Free clicked");
      mtc = null;
   }
}

public class ThreadContainer {
   private boolean go = true;

   public ThreadContainer() {
      new testThread().execute(1);
   }

   private class testThread extends AsyncTask<Integer,Integer,Integer> {
      protected Integer doInBackground(Integer... arg0) {
        while(go) {
          Log.v("testThread","I'm running...");

          try {
            Thread.sleep(500);
          } catch (InterruptedException e) {
            // do nothing
          }
       }

     return 0;
      }
  }

  @Override
  public void finalize() {
      go = false;
  }
} 
```

我能够从 logcat 获得以下输出：

```
I/ActivityManager(  244): Displayed com.example.test/.TestActivity: +509ms
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/TestActivity(13728): Free clicked
D/dalvikvm(  512): GC_EXPLICIT freed 144K, 50% free 2891K/5767K, external 1685K/2133K, paused 164ms
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
D/dalvikvm(13449): GC_EXPLICIT freed 12K, 47% free 2894K/5379K, external 1685K/2133K, paused 94ms
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running...
V/testThread(13728): I'm running... 
```

正如您所看到的，线程并没有停止，即使它的任务是完全私有的并且不再有对其容器对象的任何外部引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T12:42:36.230

我认为 AsyncTask 永远不会停止，因为您正在这样做 : `go = false;`，在`while`循环之外。只有当`go`条件变为`false`, 在循环内时，该循环才会停止。执行上面写的循环，`go`条件永远不会更新，while 循环将只检查`go`变量的初始状态。看看[这个](https://stackoverflow.com/questions/8025599/boolean-flag-not-read-in-while-loop-java)SO question。

一个正确的 while 循环[示例：](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html)

```
class WhileDemo {
    public static void main(String[] args){
        int count = 1;
        while (count < 11) {
            System.out.println("Count is: "
                               + count);
            count++;
        }
    }
} 
```

这不会是一个无限循环，因为我们正在更改循环内的 while 条件。您也可以使用[break](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)语句以正确的方式退出循环。

另一个考虑。如果`AsyncTask`被标记为守护线程，当对象的所有外部引用都被删除时，系统应该停止该线程。有关守护程序线程的更多详细信息，请[点击此处](https://stackoverflow.com/questions/8677945/java-daemon-threads/8678082#8678082)和[此处](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html)。

# java - 无法将数据从 php 套接字客户端发布到 Java 套接字服务器

> ID：12018533
> 
> 赞同：0
> 
> 时间：2012-08-18T12:25:36.147
> 
> 标签：java, php, sockets, post

我正在使用 php 编写套接字客户端，并且我想将字符串消息发布到由 java 实现的套接字服务器，但是我们尝试从 php 套接字客户端发布数据，java 套接字服务器因 java.io.StreamCorruptedException 异常而崩溃. 以下是我的 PHP 套接字客户端、Java 套接字服务器的代码以及我发布消息时引发的错误。

```
$fp = fsockopen("127.0.0.1", 1080, $errno, $errstr, 30);
        if (!$fp) {
            echo "$errstr ($errno)<br />\n";
        } else {
            $out = "hello";
            fwrite($fp, $out);
            while (!feof($fp)) {
                echo fgets($fp, 128);
            }
            fclose($fp);
        } 
```

爪哇代码

providerSocket = new ServerSocket(1080, 10);

```
 System.out.println("Waiting for connection");
        connection = providerSocket.accept();
        System.out.println("Connection received from " + connection.getInetAddress().getHostName());

        out = new ObjectOutputStream(connection.getOutputStream());
        out.flush();
        in = new ObjectInputStream(connection.getInputStream());
        sendMessage("Connection successful");

            try{
                message = (String)in.readObject();

                System.out.println("client>" + message);

            }
            catch(ClassNotFoundException classnot){
                System.err.println("Data received in unknown format");
            }

    }
    catch(IOException ioException){
        ioException.printStackTrace();
    }
    finally{
        //4: Closing connection
        try{
            in.close();
            out.close();
            providerSocket.close();
        }
        catch(IOException ioException){
            ioException.printStackTrace();
        }
    } 
```

我得到的错误

```
 java.io.StreamCorruptedException: invalid stream header: 48656C6C
    at java.io.ObjectInputStream.readStreamHeader(Unknown Source)
    at java.io.ObjectInputStream.<init>(Unknown Source)
    at Provider.run(Provider.java:37)
    at Provider.main(Provider.java:109)
Exception in thread "main" java.lang.NullPointerException
    at Provider.run(Provider.java:85)
    at Provider.main(Provider.java:109) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:39:25.730

您使用的 InputStream 不正确，因为您没有发送 Java 对象。如果要发送文本，请使用 BufferedReader 或其他东西。

请参阅[套接字 Java 教程](http://docs.oracle.com/javase/tutorial/networking/sockets/readingWriting.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:42:03.043

实际上，您正在读取一个对象，但这只有在客户端通过`out.writeObject()`. 在你的情况下最好这样写

```
fwrite($fp, "Hello world!\n"); // note the newline at the end 
```

并阅读该行`BufferedReader.readLine()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T12:44:22.590

一些意见/建议

1.  为了从套接字读取数据，您正在使用`ObjectInputStream`它使用**不同的协议**来读取数据。换句话说，它假定正在读取的对象是一个 java 对象（object-input-stream），在您的情况下是 php 对象。您正在传递一个字符串（它是一个 php 对象），该字符串最终转换为字节并通过网络发送。

2.  我建议您只使用 `connection.getOutputStream()`和阅读**原始字节数组**。然后使用此字节数组创建一个字符串（使用采用字节数组的标准 String 构造函数）。

# h.264 - 从 H.264 NALU 获取视频的宽/高

> ID：12018535
> 
> 赞同：9
> 
> 时间：2012-08-18T12:25:50.553
> 
> 标签：h.264, video-processing

我已经获得了 NALU 中的 SPS（AVC 解码器配置记录），并尝试从中解析视频宽度/高度。

```
67 64 00 15 ac c8 60 20 09 6c 04 40 00 00 03 00 40 00 00 07 a3 c5 8b 67 80 
```

这是我的代码解析 SPS，但得到了错误的值。pic_width_in_mbs_minus1 是 5，而 pic_height_in_map_units_minus1 是 1。实际上视频是 512 X 288px

```
typedef struct _SequenceParameterSet
{
private:
    const unsigned char * m_pStart;
    unsigned short m_nLength;
    int m_nCurrentBit;

    unsigned int ReadBit()
    {
        ATLASSERT(m_nCurrentBit <= m_nLength * 8);
        int nIndex = m_nCurrentBit / 8;
        int nOffset = m_nCurrentBit % 8 + 1;

        m_nCurrentBit ++;
        return (m_pStart[nIndex] >> (8-nOffset)) & 0x01;
    }

    unsigned int ReadBits(int n)
    {
        int r = 0;
        int i;
        for (i = 0; i < n; i++)
        {
            r |= ( ReadBit() << ( n - i - 1 ) );
        }
        return r;
    }

    unsigned int ReadExponentialGolombCode()
    {
        int r = 0;
        int i = 0;

        while( (ReadBit() == 0) && (i < 32) )
        {
            i++;
        }
        r = ReadBits(i);
        r += (1 << i) - 1;
        return r;
    }

    unsigned int ReadSE() 
    {
        int r = ReadExponentialGolombCode();
        if (r & 0x01)
        {
            r = (r+1)/2;
        }
        else
        {
            r = -(r/2);
        }
        return r;
    }
public:

    void Parse(const unsigned char * pStart, unsigned short nLen)
    {
        m_pStart = pStart;
        m_nLength = nLen;
        m_nCurrentBit = 0;
        int profile_idc = ReadBits(8);
        int constraint_set0_flag = ReadBit();
        int constraint_set1_flag = ReadBit();
        int constraint_set2_flag = ReadBit();
        int constraint_set3_flag = ReadBit();
        int constraint_set4_flag = ReadBit();
        int constraint_set5_flag = ReadBit();
        int reserved_zero_2bits  = ReadBits(2);
        int level_idc = ReadBits(8);
        int seq_parameter_set_id = ReadExponentialGolombCode();

        if( profile_idc == 100 || profile_idc == 110 ||
            profile_idc == 122 || profile_idc == 144 )
        {
            int chroma_format_idc = ReadExponentialGolombCode();
            if( chroma_format_idc == 3 )
            {
                int residual_colour_transform_flag = ReadBit();
            }
            int bit_depth_luma_minus8 = ReadExponentialGolombCode();
            int bit_depth_chroma_minus8 = ReadExponentialGolombCode();
            int qpprime_y_zero_transform_bypass_flag = ReadBit();
            int seq_scaling_matrix_present_flag = ReadBit();
            if( seq_scaling_matrix_present_flag )
            {
                for( int i = 0; i < 8; i++ )
                {
                    int seq_scaling_list_present_flag = ReadBit();
                    if( seq_scaling_list_present_flag )
                    {
                        /*
                        if( i < 6 )
                        {
                            read_scaling_list( b, sps->ScalingList4x4[ i ], 16,
                                sps->UseDefaultScalingMatrix4x4Flag[ i ]);
                        }
                        else
                        {
                            read_scaling_list( b, sps->ScalingList8x8[ i - 6 ], 64,
                                sps->UseDefaultScalingMatrix8x8Flag[ i - 6 ] );
                        }
                        */
                    }
                }
            }
        }
        int log2_max_frame_num_minus4 = ReadExponentialGolombCode();
        int pic_order_cnt_type = ReadExponentialGolombCode();
        if( pic_order_cnt_type == 0 )
        {
            int log2_max_pic_order_cnt_lsb_minus4 = ReadExponentialGolombCode();
        }
        else if( pic_order_cnt_type == 1 )
        {
            int delta_pic_order_always_zero_flag = ReadBit();
            int offset_for_non_ref_pic = ReadSE();
            int offset_for_top_to_bottom_field = ReadSE();
            int num_ref_frames_in_pic_order_cnt_cycle = ReadExponentialGolombCode();
            for( int i = 0; i < num_ref_frames_in_pic_order_cnt_cycle; i++ )
            {
                ReadSE();
                //sps->offset_for_ref_frame[ i ] = ReadSE();
            }
        }
        int num_ref_frames = ReadExponentialGolombCode();
        int gaps_in_frame_num_value_allowed_flag = ReadBit();
        int pic_width_in_mbs_minus1 = ReadExponentialGolombCode();
        int pic_height_in_map_units_minus1 = ReadExponentialGolombCode();
        int frame_mbs_only_flag = ReadBit();
        if( !frame_mbs_only_flag )
        {
            int mb_adaptive_frame_field_flag = ReadBit();
        }
        int direct_8x8_inference_flag = ReadBit();
        int frame_cropping_flag = ReadBit();
        if( frame_cropping_flag )
        {
            int frame_crop_left_offset = ReadExponentialGolombCode();
            int frame_crop_right_offset = ReadExponentialGolombCode();
            int frame_crop_top_offset = ReadExponentialGolombCode();
            int frame_crop_bottom_offset = ReadExponentialGolombCode();
        }
        int vui_parameters_present_flag = ReadBit();

        pStart++;
    }
}SequenceParameterSet, *LPSequenceParameterSet; 
```

这是我的代码解析 SPS，但得到了错误的值。pic_width_in_mbs_minus1 是 5，而 pic_height_in_map_units_minus1 是 1。实际上视频是 512 X 288px

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-12-24T12:04:44.560

```
#include <stdio.h>
#include <stdlib.h>    
#include <string.h>
#include <assert.h>

const unsigned char * m_pStart;
unsigned short m_nLength;
int m_nCurrentBit;

unsigned int ReadBit()
{
    assert(m_nCurrentBit <= m_nLength * 8);
    int nIndex = m_nCurrentBit / 8;
    int nOffset = m_nCurrentBit % 8 + 1;

    m_nCurrentBit ++;
    return (m_pStart[nIndex] >> (8-nOffset)) & 0x01;
}

unsigned int ReadBits(int n)
{
    int r = 0;
    int i;
    for (i = 0; i < n; i++)
    {
        r |= ( ReadBit() << ( n - i - 1 ) );
    }
    return r;
}

unsigned int ReadExponentialGolombCode()
{
    int r = 0;
    int i = 0;

    while( (ReadBit() == 0) && (i < 32) )
    {
        i++;
    }

    r = ReadBits(i);
    r += (1 << i) - 1;
    return r;
}

unsigned int ReadSE() 
{
    int r = ReadExponentialGolombCode();
    if (r & 0x01)
    {
        r = (r+1)/2;
    }
    else
    {
        r = -(r/2);
    }
    return r;
}

void Parse(const unsigned char * pStart, unsigned short nLen)
{
    m_pStart = pStart;
    m_nLength = nLen;
    m_nCurrentBit = 0;

    int frame_crop_left_offset=0;
    int frame_crop_right_offset=0;
    int frame_crop_top_offset=0;
    int frame_crop_bottom_offset=0;

    int profile_idc = ReadBits(8);          
    int constraint_set0_flag = ReadBit();   
    int constraint_set1_flag = ReadBit();   
    int constraint_set2_flag = ReadBit();   
    int constraint_set3_flag = ReadBit();   
    int constraint_set4_flag = ReadBit();   
    int constraint_set5_flag = ReadBit();   
    int reserved_zero_2bits  = ReadBits(2); 
    int level_idc = ReadBits(8);            
    int seq_parameter_set_id = ReadExponentialGolombCode();

    if( profile_idc == 100 || profile_idc == 110 ||
        profile_idc == 122 || profile_idc == 244 ||
        profile_idc == 44 || profile_idc == 83 ||
        profile_idc == 86 || profile_idc == 118 )
    {
        int chroma_format_idc = ReadExponentialGolombCode();

        if( chroma_format_idc == 3 )
        {
            int residual_colour_transform_flag = ReadBit();         
        }
        int bit_depth_luma_minus8 = ReadExponentialGolombCode();        
        int bit_depth_chroma_minus8 = ReadExponentialGolombCode();      
        int qpprime_y_zero_transform_bypass_flag = ReadBit();       
        int seq_scaling_matrix_present_flag = ReadBit();        

        if (seq_scaling_matrix_present_flag) 
        {
            int i=0;
            for ( i = 0; i < 8; i++) 
            {
                int seq_scaling_list_present_flag = ReadBit();
                if (seq_scaling_list_present_flag) 
                {
                    int sizeOfScalingList = (i < 6) ? 16 : 64;
                    int lastScale = 8;
                    int nextScale = 8;
                    int j=0;
                    for ( j = 0; j < sizeOfScalingList; j++) 
                    {
                        if (nextScale != 0) 
                        {
                            int delta_scale = ReadSE();
                            nextScale = (lastScale + delta_scale + 256) % 256;
                        }
                        lastScale = (nextScale == 0) ? lastScale : nextScale;
                    }
                }
            }
        }
    }

    int log2_max_frame_num_minus4 = ReadExponentialGolombCode();
    int pic_order_cnt_type = ReadExponentialGolombCode();
    if( pic_order_cnt_type == 0 )
    {
        int log2_max_pic_order_cnt_lsb_minus4 = ReadExponentialGolombCode();
    }
    else if( pic_order_cnt_type == 1 )
    {
        int delta_pic_order_always_zero_flag = ReadBit();
        int offset_for_non_ref_pic = ReadSE();
        int offset_for_top_to_bottom_field = ReadSE();
        int num_ref_frames_in_pic_order_cnt_cycle = ReadExponentialGolombCode();
        int i;
        for( i = 0; i < num_ref_frames_in_pic_order_cnt_cycle; i++ )
        {
            ReadSE();
            //sps->offset_for_ref_frame[ i ] = ReadSE();
        }
    }
    int max_num_ref_frames = ReadExponentialGolombCode();
    int gaps_in_frame_num_value_allowed_flag = ReadBit();
    int pic_width_in_mbs_minus1 = ReadExponentialGolombCode();
    int pic_height_in_map_units_minus1 = ReadExponentialGolombCode();
    int frame_mbs_only_flag = ReadBit();
    if( !frame_mbs_only_flag )
    {
        int mb_adaptive_frame_field_flag = ReadBit();
    }
    int direct_8x8_inference_flag = ReadBit();
    int frame_cropping_flag = ReadBit();
    if( frame_cropping_flag )
    {
        frame_crop_left_offset = ReadExponentialGolombCode();
        frame_crop_right_offset = ReadExponentialGolombCode();
        frame_crop_top_offset = ReadExponentialGolombCode();
        frame_crop_bottom_offset = ReadExponentialGolombCode();
    }
    int vui_parameters_present_flag = ReadBit();
    pStart++;

    int Width = ((pic_width_in_mbs_minus1 +1)*16) - frame_crop_bottom_offset*2 - frame_crop_top_offset*2;
    int Height = ((2 - frame_mbs_only_flag)* (pic_height_in_map_units_minus1 +1) * 16) - (frame_crop_right_offset * 2) - (frame_crop_left_offset * 2);

    printf("\n\nWxH = %dx%d\n\n",Width,Height); 

}

void FindJPGFileResolution(char *cpFileName, int *ipWidth, int *ipHeight) 
{   
    int i;

    FILE *fp = fopen(cpFileName,"rb");
    fseek(fp,0,SEEK_END);
    long len = ftell(fp);
    fseek(fp,0,SEEK_SET);

    unsigned char *ucpInBuffer = (unsigned char*) malloc (len+1);
    fread(ucpInBuffer,1,len,fp);
    fclose(fp);

    printf("\n\nBuffer size %ld\n", len);   
    for(i=0;i<len;i++)
    {
        //printf(" %x", ucpInBuffer[i]);    
        if( 
            (ucpInBuffer[i]==0x00) && (ucpInBuffer[i+1]==0x00) && 
            (ucpInBuffer[i+2]==0x00) && (ucpInBuffer[i+3]==0x01) 
          )
        {
            //if(ucpInBuffer[i+4] & 0x0F ==0x07)
            if(ucpInBuffer[i+4] == 0x67 || ucpInBuffer[i+4] == 0x27)
            {
                Parse(&ucpInBuffer[i+5], len);              
                break;
            }
        }       
    }

    free(ucpInBuffer);
    return;
}

int main()               
{
    int iHeight=0, iWidth=0;
    char *cpFileName = "/home/pankaj/pankil/SameSystem_H264_1920x320.264";
    FindJPGFileResolution(cpFileName, &iWidth, &iHeight);
    return 0;
} 
```

试试这个编码。这是成功的，我已经用 gcc 编译器测试过了。只需设置您的文件路径编译并运行它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-02-21T08:54:38.837

我在上面的示例代码中遇到了错误：

```
int Width = ((pic_width_in_mbs_minus1 +1)*16) - frame_crop_bottom_offset*2 - frame_crop_top_offset*2;
int Height = ((2 - frame_mbs_only_flag)* (pic_height_in_map_units_minus1 +1) * 16) - (frame_crop_right_offset * 2) - (frame_crop_left_offset * 2); 
```

应该：

```
int Width = ((pic_width_in_mbs_minus1 +1)*16) - frame_crop_right_offset *2 - frame_crop_left_offset *2;
int Height = ((2 - frame_mbs_only_flag)* (pic_height_in_map_units_minus1 +1) * 16) - (frame_crop_bottom_offset* 2) - (frame_crop_top_offset* 2); 
```

否则当 frame_cropping_flag 为 1 时，你会得到错误的分辨率。希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-18T14:38:48.833

是`SPS`（摘录）：

```
profile_idc 100 
constraint_set0_flag 0 
constraint_set1_flag 0 
constraint_set2_flag 0 
constraint_set3_flag 0 
level_idc 21 
seq_parameter_set_id 0 
chroma_format_idc 1 
num_ref_frames 5 
gaps_in_frame_num_value_allowed_flag 0 
pic_width_in_mbs_minus1 31 
pic_height_in_map_units_minus1 17 
frame_mbs_only_flag 1 
direct_8x8_inference_flag 1 
frame_cropping_flag 0 
vui_parameters_present_flag 1 
```

这是 512x288 视频，请在此处查看有关如何解码数据的详细信息：[获取 H264Video 流的尺寸](https://stackoverflow.com/questions/6394874/fetching-the-dimensions-of-a-h264video-stream)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-05T14:12:51.787

我可以确认经过 Alan Lu 更正的 Kaidul 代码可以完美运行。请注意， `Parse(const unsigned char * pStart, unsigned short nLen)`采用偏移量为 5 的 h264 SPS nalu（删除 '0 0 0 1' 前缀和 nal_unit_type 字节）

# juice-ui - JuiceUI - 'jQuery' 未定义

> ID：12018538
> 
> 赞同：3
> 
> 时间：2012-08-18T12:26:14.843
> 
> 标签：juice-ui

`enter code here`你好

一般来说，我对juice UI 和jQuery 不熟悉，但想在我的应用程序中使用juice。现在我通过 Nuget 下载了包并且安装日志很好。并且所有脚本都位于脚本文件夹和内容文件夹中，总之看起来都不错。

现在的问题是，当我添加控件时，尝试了手风琴和按钮，我得到“'jQuery' is undefined”并且控件不起作用。使用 IE 脚本调试器我可以看到它是在使用放大时： SCRIPT5009: 'jQuery' is undefined amplify.js, line 471 character 2 刷新页面以查看在 F12 工具打开之前可能发生的消息。SCRIPT5009：'jQuery' 是未定义的 juice.js，第 1 行字符 2

我的测试代码非常干净：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>

    <form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
<div>

        <button id="_DefaultButton" runat="server">A Button Element</button>
        <juice:button ID="Button1" TargetControlID="_DefaultButton" runat="server" />

</div>
  </form>
</body>
</html> 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:20:56.107

我有类似的问题，通过将脚本引用放入 scriptManager 来解决

```
<asp:ScriptManager runat="server">
  <Scripts>
    <asp:ScriptReference Path="~/Scripts/jquery-1.8.3.js"/>
    <asp:ScriptReference Path="~/Scripts/jquery-ui-1.9.2.js"/>
  </Scripts>
</asp:ScriptManager> 
```

将路径设置为您缺少的任何脚本依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:48:01.917

引用 jQuery 代码是一个错误，在 JuiceUI dll 中硬编码，寻找 jQuery 1.8.0 而不是 1.8.2 。现在，如果您升级到 1.0.1，它应该可以工作

# button - Python3：如何在 tkinter/ttk 中动态调整按钮文本的大小？

> ID：12018540
> 
> 赞同：4
> 
> 时间：2012-08-18T12:26:44.080
> 
> 标签：button, resize, python-3.x, tkinter, ttk

我想知道如何安排 ttk 小部件（例如标签或按钮）上的文本自动调整大小。

更改文本的大小很容易，只需更改样式中的字体即可。然而，将它与窗口大小的变化挂钩有点棘手。在网上我发现了一些提示，但没有一个完整的答案发布。

所以，下面是一个完整的工作示例，作为我自己问题的答案。我希望有人觉得它有用。如果有人有进一步的改进建议，我会很高兴看到他们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T12:26:44.080

下面的示例显示了两种技术，一种是通过重新调整窗口大小来激活（参见`resize()`方法，绑定到`<Configure>`事件），另一种是直接更改字体大小（参见`mutate()`方法）。

其他需要调整大小的代码是`__init__()`方法中的网格配置代码。

在运行示例时，这两种方法之间存在一些交互，但我认为在“真实”情况下，一种技术就足够了，因此不会出现该问题。

```
from tkinter import *
from tkinter.ttk import *

class ButtonApp(Frame):
    """Container for the buttons."""

    def __init__(self, master=None):
        """Initialize the frame and its children."""

        super().__init__(master)
        self.createWidgets()

        # configure the frame's resize behaviour
        master.columnconfigure(0, weight=1)
        master.rowconfigure(0, weight=1)
        self.grid(sticky=(N,S,E,W))

        # configure resize behaviour for the frame's children
        self.columnconfigure(0, weight=1)
        self.rowconfigure(0, weight=1)
        self.rowconfigure(0, weight=1)

        # bind to window resize events
        self.bind('<Configure>', self.resize)

    def createWidgets(self):
        """Make the widgets."""

        # this button mutates
        self.mutantButton = Button(self, text='Press Me',
                                   style='10.TButton')
        self.mutantButton.grid(column=0, row=0, sticky=(N,S,E,W))
        self.mutantButton['command'] = self.mutate

        # an ordinary quit button for comparison
        self.quitButton = Button(self, text='Quit', style='TButton')
        self.quitButton.grid(column=0, row=1, sticky=(N,S,E,W))
        self.quitButton['command'] = self.quit

    def mutate(self):
        """Rotate through the styles by hitting the button."""

        style = int(self.mutantButton['style'].split('.')[0])
        newStyle = style + 5
        if newStyle > 50: newStyle = 10
        print('Choosing font '+str(newStyle))
        self.mutantButton['style'] = fontStyle[newStyle]

        # resize the frame

        # get the current geometries
        currentGeometry = self._root().geometry()
        w, h, x, y = self.parseGeometry(currentGeometry)
        reqWidth = self.mutantButton.winfo_reqwidth()
        reqHeight = self.mutantButton.winfo_reqheight()

        # note assume height of quit button is constant at 20.
        w = max([w, reqWidth])
        h = 20 + reqHeight
        self._root().geometry('%dx%d+%d+%d' % (w, h, x, y))

    def parseGeometry(self, geometry):
        """Geometry parser.
        Returns the geometry as a (w, h, x, y) tuple."""

        # get w
        xsplit = geometry.split('x')
        w = int(xsplit[0])
        rest = xsplit[1]

        # get h, x, y
        plussplit = rest.split('+')
        h = int(plussplit[0])
        x = int(plussplit[1])
        y = int(plussplit[2])

        return w, h, x, y

    def resize(self, event):
        """Method bound to the <Configure> event for resizing."""

        # get geometry info from the root window.
        wm, hm = self._root().winfo_width(), self._root().winfo_height()

        # choose a font height to match
        # note subtract 30 for the button we are NOT scaling.
        # note we assume optimal font height is 1/2 widget height.
        fontHeight = (hm - 20) // 2
        print('Resizing to font '+str(fontHeight))

        # calculate the best font to use (use int rounding)
        bestStyle = fontStyle[10] # use min size as the fallback
        if fontHeight < 10: pass # the min size
        elif fontHeight >= 50: # the max size
            bestStyle = fontStyle[50]
        else: # everything in between
            bestFitFont = (fontHeight // 5) * 5
            bestStyle = fontStyle[bestFitFont]

        # set the style on the button
        self.mutantButton['style'] = bestStyle

root = Tk()
root.title('Alice in Pythonland')

# make a dictionary of sized font styles in the range of interest.
fontStyle = {}
for font in range(10, 51, 5):
    styleName = str(font)+'.TButton'
    fontName = ' '.join(['helvetica', str(font), 'bold'])
    fontStyle[font] = styleName
    Style().configure(styleName, font=fontName)

# run the app
app = ButtonApp(master=root)
app.mainloop()
root.destroy() 
```

# c++ - 模板和铸造

> ID：12018543
> 
> 赞同：4
> 
> 时间：2012-08-18T12:26:47.487
> 
> 标签：c++, templates

我用模板创建了一个矩阵类：

```
template <typename T>
class Matrix
{
    static_assert(std::is_arithmetic<T>::value,"");

public:
    Matrix(size_t n_rows, size_t n_cols);
    Matrix(size_t n_rows, size_t n_cols, const T& value);

    // Functions

    // Operators
Matrix<T>& operator*=(const T& value)

private:
    size_t rows;
    size_t cols;
    std::vector<T> data;
}; 
```

我创建了以下两个（外部）运算符来将我的矩阵乘以一个数字：

```
// Inner operator used by the externals ones
template <typename T>
inline Matrix<T>& Matrix<T>::operator*=(const T& value)
{
    for(size_t i(0); i < data.size(); i++)
    {
        data[i] *= value;
    }

    return *this;
}

template <typename T>
inline Matrix<T> operator*(const T& value, const Matrix<T>& matrix)
{
    Matrix<T> tmp(matrix);

    return tmp *= value;
}

template <typename T>
inline Matrix<T> operator*(const Matrix<T>& matrix, const T& value)
{
    return value * matrix;
} 
```

问题是，如果我将矩阵声明为双精度，我只能将矩阵乘以双精度，依此类推...

```
Matrix<double> m1(3,3,1.);

5\. * m1; // Works
5 * m1; // Doesn't work (5 is an int and not a double) 
```

我该如何解决这种行为？可以让双精度数乘以其他算术类型吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T12:28:52.047

当然，只允许您的模板化自由函数和成员函数使用两个参数。

例如：

```
template <typename T> class Matrix {
  /* ... */
  template <typename U>
  inline Matrix<T>& operator*=(const U& value)
  {
    for(size_t i(0); i < data.size(); i++)
    {
        data[i] *= value;
    }

    return *this;
  }
};

template <typename T, typename U>
inline Matrix<T> operator*(const U& value, const Matrix<T>& matrix)
{
    Matrix<T> tmp(matrix);

    return tmp *= value;
} 
```

如果您尝试将 Matrix 与无意义的东西相乘，即如果`T*U`未定义，这将触发编译时错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T12:32:06.693

是的。将 Matrix 类中的函数声明为

```
template <typename T> 
class Matrix 
{
public:
    /* ... */
    template <typename S> 
    inline Matrix & operator*=( const S & value );
    /* ... */
}; 
```

定义看起来像

```
template <typename T>
template <typename S>
inline Matrix<T>& Matrix<T>::operator*=(const S& value)
{
    for(size_t i(0); i < data.size(); i++)
    {
        data[i] *= value;
    }

    return *this;
} 
```

为成员函数。你需要写`template`两次。有点奇怪，但那是 C++ 语法。

如果是免费功能，您可以编写

```
template <typename T, typename S>
inline Matrix<T> operator*(const S& value, const Matrix<T> &mat)
{
    Matrix<T> tmp(mat);

    return tmp *= value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T21:13:00.623

您看到的问题是模板类型推导需要所有推导类型的完美匹配。在您的情况下，您有一个模板，该模板采用一个类型参数`T`，该参数既是标量类型又是矩阵类型。当编译器看到操作:`5 * m1`时，它对`T == int`第一个参数进行推导，但`T == double`对第二个参数进行推导，类型推导失败。

有多种方法可以解决这个问题，正如建议的那样，您可以添加第二个模板参数：

```
template <typename T, typename S>
Matrix<T> operator*( Matrix<T> m, S scalar ) {
   return m*=scalar;
} 
```

[注意：两个参数都是按值，第二个是因为对于算术类型，按值传递更有效和惯用；第一个，因为通过将副本移动到函数的接口，您允许编译器删除副本]。这种方法很简单，但会为程序中的和`operator*`的每个组合生成一个，即使实际的乘法总是在 上执行。`S``T``operator*=``T`

另一种方法是修复`scalar`要相乘的类型，例如， make it ，每种相乘的类型`double`仅生成一个：`operator*``T`

```
template <typename T>
Matrix<T> operator*( Matrix<T> m, double scalar ) {
   return m*=scalar;
} 
```

在这种方法中，只有一个`operator*`，将 a`double`作为参数。与前面的示例一样，它可能需要对标量进行两次类型转换（假设您乘以`Matrix<int>`，`5`然后它将转换`5`为 a `double`，然后将其转换回`int`以匹配`operator*=`.

第三种方法是创建一个非模板函数，该函数接受您`Matrix`和另一个相同类型的参数。这将最接近您的原始代码，具有一点优势，即不是模板，它将允许转换标量参数。从理论上讲，您可以自己手动定义所有此类功能：

```
Matrix<int>    operator*( Matrix<int>,    int ) { ... }
Matrix<double> operator*( Matrix<double>, double ) { ... } 
```

但这很容易成为维护问题。*幸运的是，该语言中有一个特性可以通用地*定义所有那些非模板函数。尽管语法可能不是最自然的。您只需要将自由函数*声明*为模板的朋友，并*在*类模板定义中*定义*它：

 *```
template <typename T>
class Matrix {
// ...
   friend Matrix operator*( Matrix m, T scalar ) { return m*=scalar; }
}; 
```

由于我们在类模板`Matrix`中，我们可以使用`Matrix`（不带参数）来引用当前的实例化（，`Matrix<int>`... `Matrix<double`）`Matrix`当它引用从模板生成的类时]。函数的第二个参数是`T`。同样，这不是`T`类模板的泛型，而是当前的实例化类型 ( `int`, `double`...)。

该语言允许在`friend`具有声明的类中*定义*函数，并将在命名空间级别定义函数，尽管只能通过参数依赖查找找到声明。

每当您实例化模板的特定实例（例如`Matrix<int>`）并调用运算符时，编译器都会为您生成自由函数。因为该函数不是模板化的，所以它允许对参数进行转换，因此`Matrix<int> m`它允许您`m * 5.`通过转换`5.`为`int`.*

# c++ - 如何在 Windows 7 中将服务作为 LocalSystem 运行？

> ID：12018545
> 
> 赞同：0
> 
> 时间：2012-08-18T12:27:16.793
> 
> 标签：c++, winapi, windows-7, windows-services

我正在尝试按照 Windows SDK 中的说明编写我的第一个服务应用程序。我使用以下代码安装了该服务：

```
SC_HANDLE schs=CreateService(sch,
                             SERVICENAME,"VMFS - Servidor de arquivos",
                             SC_MANAGER_CREATE_SERVICE,
                             SERVICE_WIN32_OWN_PROCESS,
                             SERVICE_AUTO_START,
                             SERVICE_ERROR_NORMAL,
                             pathexe,
                             NULL/*LoadOrderGroup*/,
                             NULL/*TagId*/,
                             NULL/*Dependencies*/,
                             NULL/*Account:Local System*/,
                             NULL/*Password*/); 
```

> 服务器未启动（错误 1053）。

但是，如果我转到 services.msc 并将服务更改为以我的帐户名 (Valdeci) 登录，则该服务将启动。所以这似乎是一个登录错误。怎么了？我也想在 Windows XP 和 Vista 中运行我的服务，但没有尝试，因为我的开发机器有 Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:13:52.307

尝试使用 NULL 而不是“.\\LocalSystem”，如[CreateService 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682450%28v=vs.85%29.aspx)中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:33:02.670

我解决了我的问题！我遵循了收到的提示：将代码剥离为“无所事事”服务，但仍然无法正常工作。所以我得出结论，问题不在于代码本身。由于“丢失” DLL，该程序甚至没有启动。我发现“路径”在作为 LocalSystem 运行时的工作方式不同，因此我将所有运行时 DLL 复制到服务的文件夹中。这是我通常安装程序的方式，但在开发时我使用该路径。

谢谢你的时间！

# php - 使用 Doctrine 查询构建器的棘手查询

> ID：12018548
> 
> 赞同：0
> 
> 时间：2012-08-18T12:28:15.463
> 
> 标签：php, sql, symfony, doctrine

我有一个棘手的查询问题，我使用此代码来提取用户有权访问的容器（访问定义在多对多关系中）：

```
 //Fetch the containers
    $repository = $this->getDoctrine()->getRepository('BizTVContainerManagementBundle:Container');
    $query = $repository->createQueryBuilder('c')
        ->innerJoin('c.users','u')
        ->where('c.company = :company')
        ->setParameter('company', $companyId)
        ->orderBy('c.name', 'ASC')
        ->getQuery();
    $containers = $query->getResult(); 
```

现在我实际上有 4 级权限的层次结构 - 公司、地理区域、建筑物和屏幕。我想设置它，以便当用户对父对象具有权限时，查询也返回子对象，而没有在子对象上设置任何特定权限。

如果我可以访问 symfony2 的优秀实体系统，我将能够放置类似的东西

```
If $entity->getParent() == granted
OR
$entity->getParent()->getParent() == granted
THEN
this is granted also 
```

但是在 SQL 中，我无法深入挖掘这样的级别，可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:01:46.793

您可以在查询中提取完整的层次结构：

```
$query = $repository->createQueryBuilder('company')
    ->leftJoin('company.parent','geoarea')
    ->leftJoin('geoarea.parent','building')
    ->leftJoin('building.parent','screen') 
```

我不清楚您是如何存储您的权限的，但在查询中您可以“或”一起使用 where 条件并检查层次结构中的每个项目。

# java - 预泛型，从哈希图中转换对象？

> ID：12018555
> 
> 赞同：0
> 
> 时间：2012-08-18T12:28:56.637
> 
> 标签：java, iterator

如何遍历 hashmap（包含 Person 类型的对象）并在 Person 对象上调用方法？

我用了：

```
for(Iterator it = hashmap.entrySet().iterator(); is.hasNext();){
    Person p = (Person)it.next();
    p.doSomething();
} 
```

但是当执行 Person 转换时，它说该对象不能转换为 Person 对象（但它绝对是 Person 的子类型）。

> java.util.HashMap$Entry 不能转换为 Person。

编辑这是1.4！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T12:34:38.633

由于您的迭代器将遍历[Map.Entry](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html)对象，因此首先将它们提取为这些类型：

```
Person p = (Person)((Map.Entry)it.next()).getValue(); 
```

# c# - 如何通过此条件获取继承类的属性

> ID：12018557
> 
> 赞同：0
> 
> 时间：2012-08-18T12:29:01.760
> 
> 标签：c#, .net, reflection, bindingflags

我有一个`Person`继承的类，`PersonBase`第二个类继承`EntityBase`：

```
public class Person : PersonBase
{        
   virtual public string FirstName { get; set; }
   virtual public string LastName { get; set; } 
} 
```

和

```
public class PersonBase : EntityBase
{        
   virtual public string GroupName { get; set; }
} 
```

和

```
public class EntityBase : IEntity
{    
   public virtual long Id { get; protected set; }
   public virtual string Error { get; protected set; }
} 
```

我需要获取属性`Person`和`PersonBase`类的列表：

```
var entity = preUpdateEvent.Entity;

foreach (var item in entity.GetType().GetProperties()) //only FirstName & LastName & GroupName
{
   if (item.PropertyType == typeof(String))               
      item.SetValue(entity, "XXXXX" ,null);
} 
```

现在`GetProperties()`是包括：`FirstName, LastName, GroupName, Id, Error`但我只需要自己的 Person 属性，即：`FirstName, LastName, GroupName`

当然，我在下面的代码中使用过，但它不适合我，因为它只包含`Person`类的属性。

```
var properties = typeof(Person).GetProperties(BindingFlags.Public |
                                                  BindingFlags.Instance |
                                                  BindingFlags.DeclaredOnly); 
```

如何获取仅在`Person`和`PersonBase`类上定义的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T12:40:18.883

这是您的问题的通用解决方案，以扩展方法的形式：

```
public static PropertyInfo[] GetPropertiesUpTo<T>(this Type type, BindingFlags flags = BindingFlags.Public | BindingFlags.Static | BindingFlags.Instance)
{
    return type.GetProperties(flags)
               .Where(p => p.DeclaringType == typeof(T) || p.DeclaringType.IsSubclassOf(typeof(T)))
               .ToArray();
} 
```

你可以像这样使用它：

```
var properties = typeof(Person).GetPropertiesUpTo<PersonBase>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T12:36:19.730

```
var properties = typeof(Person).GetProperties()
    .Where(p => p.DeclaringType == typeof(PersonBase) || p.DeclaringType == typeof(Person)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T12:36:09.840

您将不得不通过`typeof(Person).BaseType`which will return递归地找到它`PersonBase`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T12:38:40.190

你不能告诉`GetProperties()`“有多少”类要从中获取属性——它要么获取当前类的属性以及它扩展/继承的所有类，要么（通过使用[`BindingFlags.DeclaredOnly`](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx)）它可以只获取当前类的属性。

您可以使用两个调用来获取属性：

```
var properties = typeof(Person).GetProperties(BindingFlags.Public |
                                                  BindingFlags.Instance |
                                                  BindingFlags.DeclaredOnly);
var parentProperties = typeof(PersonBase).GetProperties(BindingFlags.Public |
                                                  BindingFlags.Instance |
                                                  BindingFlags.DeclaredOnly); 
```

`BindingFlags.DeclaredOnly`或者使用每个属性的[`DeclaringType`](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.declaringtype.aspx)值过滤不使用返回的完整列表。这可以通过`linq`Lee 所展示的方法来完成，或者通过遍历完整的属性列表并使用`if-statement`：

```
List<PropertyInfo> properties = new List<PropertyInfo>();
foreach (PropertyInfo pi in typeof(Person).GetProperties(BindingFlags.Public | BindingFlags.Instance)) {
    if ((pi.DeclaringType == typeof(PersonBase)) || (pi.DeclaringType == typeof(Person))) {
        properties.Add(pi);
    }
} 
```

# javascript - Js 自动扩展 div 在我的页面中不起作用

> ID：12018560
> 
> 赞同：0
> 
> 时间：2012-08-18T12:29:09.503
> 
> 标签：javascript, jquery, expand, collapse

我正在尝试在我正在设计的网站上制作一个自动扩展的 div，但它似乎在页面上不起作用（在 jsfiddle.net 上工作正常）

脚本：http: [//jsfiddle.net/tJugd/1057/](http://jsfiddle.net/tJugd/1057/)

```
var lol;
lol = 0;

$('#question').click(function(){
    if (lol==0){
      $('#question').animate({height:'300'});
      lol = 1;
    }else{
      $('#question').animate({height:'0'});
      lol = 0;                     
    }
}) 
```

这是我试图在其上实现的页面：[http](http://www.trulyscience.com/test/index.html) ://www.trulyscience.com/test/index.html （sie 上的红色“问题”）

我真的不知道我做错了什么，我检查了许多相关的线程，大部分都有效，但也只在 Jsfiddle 而不是我的页面上。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:05:25.947

您可以使用触发方法来执行此操作，在声明事件单击“#question”后调用它：

```
function loadQuestion(){

    var lol;
    lol = 0;

    $('#question').click(function(){
        if (lol==0){
          $('#question').animate({height:'300'});
          lol = 1;
        }else{
          $('#question').animate({height:'0'});
          lol = 0;                     
        }
    });

    $('#question').trigger('click'); // Simulating click
}

$(document).ready(function(){
    loadQuestion();
}); 
```

[http://jsfiddle.net/tJugd/1058/](http://jsfiddle.net/tJugd/1058/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:35:33.083

您在同一个 html 文档中使用了两次 id 问题，这可能会导致问题。如果要对元素使用相同的名称，请使用 class 而不是 id。

也尝试用`$(document).ready(function(){ /*your code*/ });`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T12:47:44.437

Well, for starters, on your website, `$` is not jQuery. It's a shortcut for `document.getElementById`.

I ran this code in the console after the page loaded, and the animation worked fine:

```
var lol = 0;
jQuery('#question').click(function (){
if (lol === 0){
      jQuery('#question').animate({height:'300'});
      lol = 1;
    }else{
      jQuery('#question').animate({height:'20'});
      lol = 0;                     
    }
}); 
```

# c# - 通过网络扫描发现服务器ip地址

> ID：12018561
> 
> 赞同：0
> 
> 时间：2012-08-18T09:46:24.127
> 
> 标签：c#, sockets, client-server

我将开发 C# 客户端-服务器应用程序，我需要告诉客户端服务器的 IP 地址是什么，它可能来自客户端或服务器广播。

对此的任何帮助和解决方案都可能非常有用，如果有一些示例代码会更好！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:36:46.360

您可以在这里使用广播方法广播一个项目，向您展示如何做到这一点：http: [//www.codeproject.com/Articles/12286/Simple-Client-server-Interactions-using-C](http://www.codeproject.com/Articles/12286/Simple-Client-server-Interactions-using-C)

# android - 如果我们用 MapActivity 而不是 Activity 扩展一个类有什么缺点？

> ID：12018564
> 
> 赞同：0
> 
> 时间：2012-08-18T12:29:44.747
> 
> 标签：android, android-activity

我正在开发一个用于整个应用程序的框架，它扩展了一个活动，但是在某些情况下我在我的项目中使用地图，所以我需要扩展 MapActivity，例如我不能活动，

框架级别，

**Activity**扩展**CommonActivity**扩展**MainActivity**

这是我的问题，

如果我扩展 MapActivity 而不是 Activity 它会导致任何问题还是有任何缺点？

谢谢，尼基尔雷迪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:48:54.600

我不认为地图活动有任何缺点，因为地图活动扩展了活动类。

```
public abstract class MapActivity extends android.app.Activity 
```

但是您必须在安装了 Google 地图的设备或模拟器上运行您的应用程序。

# mysql - 数据库如何在文件系统上物理存储数据？

> ID：12018565
> 
> 赞同：26
> 
> 时间：2012-08-18T12:29:54.200
> 
> 标签：mysql, sql, sql-server, database, filesystems

我需要知道数据库中的数据是如何存储在文件系统上的。我敢肯定，不同的数据库使用不同的数据存储方式，但我想知道一般规则是什么（如果有的话），以及可以在特定数据库的设置中更改什么。

1.  整个数据库是如何存储的？在一个大文件中还是每个表一个文件中？
2.  如果桌子很大怎么办？它会被分成几个文件吗？
3.  在这种情况下，文件的典型大小是多少？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-18T15:16:31.697

这个问题的答案既取决于数据库*，*也取决于实现。以下是如何存储数据的一些示例：

*   作为每个数据库的单个文件。（这是 SQL Server 的默认设置。）
*   使用单独的文件系统管理器，它可以是操作系统。（MySQL 有几个选项，名称类似于 InnoDB。）
*   为每个表使用单独的文件。（如果我们考虑访问数据库。）
*   作为多个物理文件，分布在多个文件系统中，但表示为单个“文件”。（例如，HIVE 使用并行文件系统来存储数据。）

但是，这些是默认配置。真实数据库通常允许您在多个物理设备之间拆分数据。SQL Server 和 MySQL 称之为分区。Oracle 称这个表空间。这些通常由了解系统性能要求的知识渊博的 DBA 设置。

不过，最后的问题很容易回答。大多数数据库都让您可以选择在需要空间时扩展数据库，或者为数据库提供固定（或固定的最大）大小。我还没有遇到会自动将基础数据拆分为多个文件的数据库引擎，尽管较新的面向列的数据库（例如 Vertica）可能会做类似的事情。

# c++ - C++ SDL 解析

> ID：12018569
> 
> 赞同：3
> 
> 时间：2012-08-18T12:30:32.760
> 
> 标签：c++, sdl

我正在尝试使用 SDL 库制作游戏，我想知道我应该使用什么分辨率制作游戏。可悲的是，我不知道 Windows 如何处理不同的分辨率，所以我不知道应该使用什么分辨率来制作游戏。那么我应该使用什么分辨率呢？

我在 stackoverflow 上的类似帖子中的某处读到它会即时更改分辨率。谁能证实这一点？如果有人有任何解释这个问题的文章，请分享，我在谷歌上找不到任何文章。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T13:01:45.117

尝试[`SDL_ListModes`](http://sdl.beuc.net/sdl.wiki/SDL_ListModes)列举可用的分辨率并从中选择一个。参数`flags`应该类似于.`SDL_HWSURFACE | SDL_FULLSCREEN`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:49:17.323

SDL 允许您以与最初设置相同的方式重置视频模式，通过调用 SDL_SetVideoMode，分辨率将重置为新的视频模式。

但是，如果您决定使用 SDL 来挂钩 OpenGL，当您调用 SDL_SetVideoMode 函数时，您将丢失 OpenGL 上下文以及所有纹理和状态，因此请确保在屏幕分辨率更改时重新加载所有它们。

此外，如果您想要一些好的 SDL 文章，请查看此链接 [Lazyfoo SDL 教程](http://www.lazyfoo.net)

# android - 在android中刷新整个listview

> ID：12018570
> 
> 赞同：0
> 
> 时间：2012-08-18T12:30:33.280
> 
> 标签：android, listview, android-listview

> **可能重复：**
> [如何刷新 Android 列表视图？](https://stackoverflow.com/questions/2250770/how-to-refresh-android-listview)

我想`listview`在我的`android`应用程序中整体刷新。

基本上，`listview`有不同的号码，它们的状态为忙碌、关闭、可用等。所以当任何号码改变了他的状态时，我想`image`在没有的情况下改变它`scrolling`。那么我该怎么做呢？

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:34:34.767

我同意上面 AVD 发布的解决方案，您需要调用`notifyDataSetChanged`您的`Adapter`.

可以在[此 Google I/O 视频中查看有关如何/何时调用 notifyDataSetChanged() 的一些其他细节](http://www.youtube.com/watch?v=wDBM6wVEO70&t=17m38s)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T12:38:17.557

您必须调用[adapter.notifyDataSetChanged();](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29) 方法。

# assembly - LEA 指令的替代语法

> ID：12018573
> 
> 赞同：4
> 
> 时间：2012-08-18T12:31:05.333
> 
> 标签：assembly, x86, nasm

> **可能重复：**
> [LEA 指令的目的是什么？](https://stackoverflow.com/questions/1658294/whats-the-purpose-of-the-lea-instruction)

当我需要某个地址的值时，我可以使用有效地址，例如`push dword [str+4]`. 但是当我需要引用一个地址时——我不能使用`push dword str+4`（这对我来说是显而易见且直观的方法）。

而是需要使用`lea EAX, [str+4]`then `push EAX`。这有点令人困惑，并且还提供了额外的处理器指令，~~尽管是“零时钟”指令。（见[这个答案](https://stackoverflow.com/questions/6323027/lea-or-add-instruction#6328441)）~~

这种差异是否有一些硬件级别的解释，或者它只是（NASM）汇编语法的一个怪癖？

**编辑：** 好的，所以[这个评论](https://stackoverflow.com/questions/1658294/whats-the-purpose-of-the-lea-instruction#comment8451339_1665570)和我问了同样的问题。就像 Lucero 的回答一样，它在[此评论](https://stackoverflow.com/questions/1658294/whats-the-purpose-of-the-lea-instruction#comment10928701_1665570)中得到了回答——X86 不支持这种寻址。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T13:18:38.783

只需使用正确的语法，您需要**offset**关键字：

```
 push offset str+4 
```

LEA 指令可以方便地使用地址生成逻辑的管道。提供不使用 ALU 的非常便宜的加法和乘法方法。在编写代码生成器的程序员的技巧列表中名列前茅。这里不需要，afaict。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T13:18:28.867

这是一个较长的评论（因为它没有回答问题），但读者应该知道..

`lea`最肯定*不是*零时钟指令。其中有一些，例如`fxch`（在所有带有寄存器重命名的东西上），`nop`（`90`和`0F 1F`）在 Sandy Bridge 上，以及某些用于将寄存器设置为零（`xor`或`sub`自身，甚至对于 XMM 寄存器）的习语，也在 Sandy Bridge 上。当然，它们的吞吐量仍然有限，因此它们不是免费的。

`lea`总是需要至少一个周期（至少，在我知道的任何处理器上，它可能并不总是这样），它通常在 ALU 而不是 AGU 上执行（一些 AMD 和 Atom 是例外），但即使在在 AGU 上执行的情况下，它*仍然*需要一个周期或更长时间。`lea`甚至可能需要超过 1 个周期，例如`lea`在 P4、Sandy Bridge（似乎我在这篇文章中经常提到 SB..）或 AMD 处理器上进行缩放。事实上，在 AMD K10 上`lea`，进入 AGU 的是慢速情况，它被缩放和/或有 3 个参数，并且比进入 ALU 的快速周期长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:24:56.390

因为那开始看起来像 C。唯一可以使用这种内联加法的地方是寻址内存时。`LEA`让您“寻址”内存而不对其进行寻址，这在保护模式下非常有用，在这种模式下，一个小的指针误步会杀死您的应用程序（在指针误步可能会杀死 DOS、Windows、机器和杀死的实模式下可能更好）任何数量的东西）。汇编是一个有限的野兽，其中每条指令对应一个*物理电路*。这些说明是一般性的，这本身就是一个小奇迹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T12:45:53.007

Assembly instructions directly represent x86 opcodes (no transforming compilation takes place as in higher-level languages). The opcodes have their limitations in what they can represent; as such, while address computations are possible as part of the x86 adressing, value computations are not. LEA covers this gap by storing the result of the address computation in any register instead of only consuming it internally.

# html - 放大时分页符 - HTML / CSS / 浏览器问题

> ID：12018583
> 
> 赞同：0
> 
> 时间：2012-08-18T12:33:17.993
> 
> 标签：html, css, zooming

我有一个使用两列页面布局的简单页面，在缩放时会中断。在这里 - 尝试使用 cmd+ 放大：

[http://jamesabbottdd.com/ems-with-max-width.html](http://jamesabbottdd.com/ems-with-max-width.html)

标题在右侧中断，导致出现水平滚动条。最初我认为这是由于使用像素来调整元素大小和设置最大宽度。这篇文章就是关于这个问题的：

[http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/](http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/)

然后我用 ems 覆盖了像素，但问题仍然存在。

这让我着迷不已。我已经使用 CSS 大约十年了，过去 3 年处于高水平，但还没有弄清楚为什么上面的分页符但是这个：

[http://framelessgrid.com/](http://framelessgrid.com/)

不会，无论我放大多近。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T16:25:54.263

嗯，看起来有点像您无意中将两个稍微不相关的观察结果联系在一起，从而使诊断实际问题变得更加困难。

**区分症状**

根据您的屏幕截图，您的标题似乎出现了一些视觉故障。此外，会出现一个水平滚动条 - 但请放心，这不是由于您的标题的任何属性。实际上，这是由于标题下方的包装器 div 的宽度为 1130 像素。因此，当您放大那么多时，它不能全部显示在屏幕上，因此会创建滚动条。

* * *

**真正的问题**

回到标题的问题，颜色消失的原因是标题 div 的宽度为 100%。如果在您截取该屏幕截图时，您一直滚动到左侧，您会发现标题的背景颜色没有问题，因为它会覆盖 100% 的浏览器宽度。（如果你想知道这个 100% 的宽度是从哪里来的，那是由于标题中的 h1 元素；h1 通常具有 100% 的默认宽度，即使使用元素也无法看到这种样式像 Firebug 这样的检查器打开。）

请注意，您提供的网站由于以下原因没有显示此问题：首先，它的标题没有背景颜色，因此您不会在这方面看到任何类型的问题（如果确实有问题，你会立即看到 div 实际上并没有像你的那样跨越整个屏幕；它只比里面的文本宽一点，并且具有固定的宽度。标题居中的不仅仅是使用 h1 元素的宽度的 100% 和`text-align:center`, 但也是由于`margin:0 auto`应用于标题 div。但是现在，如何解决您的问题？

* * *

**一个办法**

使用您页面的当前结构，最简单的解决方案是为您的标题 div 定义宽度。好吧，不是宽度本身，而是一个`min-width`, 与包装器 div 的宽度相同。如果你给它的风格`min-width:1130px`，你应该看到你的问题解决了。

我希望这可以帮到你！（抱歉，如果阅读时间有点长。）

# aop - 如何在另一个 AspectJ 方面拦截proceed()？

> ID：12018585
> 
> 赞同：0
> 
> 时间：2012-08-18T12:33:40.817
> 
> 标签：aop, aspectj, pointcut

我的情况如下：我有`LoggingAspect`几个切入点与我的主应用程序中的特定方法执行相匹配。对应的advice body基本都长得差不多，造成了很多代码重复：

```
void around() : download() {
    String message = "Downloading, verifying (MD5) and unpacking";
    SimpleLogger.verbose(message, IndentMode.INDENT_AFTER);
    proceed();
    SimpleLogger.verbose(message + " - done", IndentMode.DEDENT_BEFORE);
} 
```

不过，有一些变化。有时切入点和建议有一个`arg`or`this`参数，该参数也打印到日志中。有时，如果“完成”消息只是一个小调用，没有包含很多其他调用，则不会打印出来，如下所示：

```
void around(BasicFilter filter) : fixFaultyLinkTargets()  && this(filter) {
    String message = "TOC file: checking for faulty link targets";
    SimpleLogger.verbose(message, IndentMode.INDENT_AFTER);
    proceed(filter);
    SimpleLogger.dedent();
} 
```

不变的是我手动告诉记录器

*   在打印第一条消息后增加缩进级别，即直接在`proceed()`调用之前，以及
*   在打印最终消息（如果有的话）之前降低缩进级别，即直接在`proceed()`返回之后。

我的想法是，我想编写一个带有切入点的元方面（或称其为辅助方面），该切入点拦截`proceed()`调用，`LoggingAspect`以便相应地自动调整缩进级别。但似乎没有切入点匹配`proceed()`。我已经尝试过`call(SomeMethodInMyMainApp)`，甚至是匹配日志方面所有内容的切入点，但切入点匹配我不需要的任何内容，但永远不会继续。

如果有人知道我该怎么做，我将不胜感激提示或代码片段。

这样做的一种间接方法可能不是拦截建议本身，而是通过创建一个额外的切入点来拦截这些建议所建议的方法调用（或执行），如下所示：

```
// ATTENTION: each new pointcut must also be added here
pointcut catchAll() : download() || fixFaultyLinkTargets() || ...;

void around() : catchAll() {
    SimpleLogger.indent();
    proceed();
    SimpleLogger.dedent();
} 
```

不过，我更喜欢另一种方式，而不必记住`catchAll()`每次更改日志记录方面的某些内容时都更新额外的切入点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:37:28.573

建议将proceed() 包装在一个匿名类中。并编写一个处理此执行的方面（但不要忘记proceed（）的潜在异常）。

我的建议：

```
// AspectProceedCaller.java
public abstract class AspectProceedCaller { 
    public abstract Object doProceed(); 
};

// aspect ProceedCallerAspect.aj
aspect ProceedCallerAspect {
     pointcut execProceedCaller() : execution( * AspectProceedCaller+.doProceed() );

     Object around() : execProceedCaller() {
         try {
              SimpleLogger.indent();
              return proceed();
         }
         finally {
              SimpleLogger.dedent();
         }
     }
};

// Your application aspect 
aspect AnyAspect {
    pointcut anyPointcut() : ...;

    Object around() : anyPointcut() {
        AspectProceedCaller apc=new AspectProceedCaller() {
            public Object doProceed() {
                return proceed();
            }
        };  

        // DO Stuff before ....

        Object retval = apc.doProceed();

        // ... and after calling proceed.

        return retval;
    }
}; 
```

最好的问候马尔科

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T14:15:36.647

**请注意：**我将在这里回答我自己的问题，为 loddar2012 建议的解决方案添加更多信息和参数化的附加功能。因为他的回答将我引向了正确的方向，所以我会接受它，即使这里的答案确实解决了我对原始问题的所有需求，例如（引用我自己）：

> 不过，有一些变化。有时切入点和建议有一个 arg 或这个参数，它也会打印到日志中。有时，如果它只是一个小调用而不包含许多其他调用，则不会打印“完成”消息

我们在这里处理的基本内容是 Ramnivas Laddad在他的[AspectJ in Action一书中所说的](http://www.manning.com/laddad2/)**工作对象模式**。他（和 loddar2012 的）想法是，用简单的散文

*   将调用包装到匿名类（工作对象）的实例中，其中
    *   基类或实现的接口提供了用于完成工作的方法，
    *   worker 对象提供了 worker 方法的具体实现，并在`proceed()`其中具体调用，
    *   worker 方法可以在对象创建后立即调用（正如我们将在此处执行的那样）或稍后，甚至可以在它自己的线程中调用，
    *   worker 对象可以被传递或添加到调度队列中（我们在这里都不需要）。

如果您需要`proceed()`异步执行调用，一个优雅的解决方案是创建匿名`Runnable`类的实例。不过，我们将使用我们自己的抽象基类`LogHelper`，因为我们想要在我们的茶中加入更多的糖，特别是传递一条日志消息和一些其他影响日志输出到每个工作人员的参数的选项。所以这就是我所做的（示例代码中未显示包名称和导入）：

**抽象工作者基类：**

```
abstract class LogHelper {
    // Object state needed for logging
    String message;
    boolean logDone;
    boolean indent;
    LogType type;

    // Main constructor
    LogHelper(String message, boolean logDone, boolean indent, LogType type) {
        this.message = message;
        this.logDone = logDone;
        this.indent = indent;
        this.type = type;
    }
    // Convenience constructors for frequent use cases
    LogHelper(String message, boolean logDone) {
        this(message, logDone, true, LogType.VERBOSE);
    }
    LogHelper(String message) {
        this(message, true);
    }

    // Worker method to be overridden by each anonymous subclass
    abstract void log();
} 
```

**记录工作对象执行的记录建议：**

```
aspect LoggingAspect
{
    void around(LogHelper logHelper) :
        execution(* LogHelper.log()) && this(logHelper)
    {
        try {
            SimpleLogger.log(logHelper.type, logHelper.message);
            if (logHelper.indent)
                SimpleLogger.indent();
            proceed(logHelper);
        } finally {
            if (logHelper.indent)
                SimpleLogger.dedent();
            if (logHelper.logDone)
                SimpleLogger.log(logHelper.type, logHelper.message + " - done");
        }
    }
    // (...)
} 
```

正如你所看到的，日志通知在调用之前做了一些事情`proceed(logHelper)`（即执行工作对象的`log()`方法）和之后做一些事情，使用存储在工作对象内部的状态信息，例如

*   要记录的消息，
*   日志级别（这里称为“类型”），
*   指定在继续之前是否应提高缩进级别的标志，
*   指定是否应在工作人员执行后打印“完成”消息的标志。

因为在我的用例中，所有记录的方法都返回`void`，所以不需要实现返回值传递，但如果有必要，这很容易实现。通知的返回值将是`Object`，我们会将结果传`proceed()`回给我们的调用者，没什么大不了的。

**一些建议捕获要记录的连接点并利用参数化的工作对象来完成工作：**

```
aspect LoggingAspect
{
    // (...)

    pointcut processBook()     : execution(* OpenbookCleaner.downloadAndCleanBook(Book));
    pointcut download()        : execution(* Downloader.download());
    pointcut cleanBook()       : execution(* OpenbookCleaner.cleanBook(Book));
    pointcut cleanChapter()    : execution(* OpenbookCleaner.cleanChapter(Book, File));
    pointcut initialiseTitle() : execution(* *Filter.initialiseTitle(boolean));

    void around(final Book book) : processBook() && args(book) {
        new LogHelper("Book: " + book.unpackDirectory) {
            void log() { proceed(book); } }.log();
    }
    void around() : download() {
        new LogHelper("Downloading, verifying (MD5) and unpacking") {
            void log() { proceed(); } }.log();
    }
    void around() : cleanBook() {
        new LogHelper("Filtering") {
            void log() { proceed(); } }.log();
    }
    void around(final File origFile) : cleanChapter() && args(*, origFile) {
        new LogHelper("Chapter: " + origFile.getName()) {
            void log() { proceed(origFile); } }.log();
    }
    void around() : initialiseTitle() {
        new LogHelper("Initialising page title", false) {
            void log() { proceed(); } }.log();
    }
} 
```

这些例子展示了你可以如何

*   使用一个或多个构造函数参数将匿名实例`LogHelper`化为工作对象，设置其状态
*   实现该方法，可选择使用通过or`log()`绑定的连接点状态，`this()``args()`
*   调用/运行工作对象（调用将被日志记录建议的切入点拦截，并在那里完成真正的日志记录业务）。

# linux - 在前台产生并行进程

> ID：12018586
> 
> 赞同：4
> 
> 时间：2012-08-18T12:33:59.803
> 
> 标签：linux, bash, parallel-processing, foreground

在 linux 中使用 bash 是否可以在前台生成并行进程？例如以下：

***顶部.sh***

```
#!/bin/bash

./myscript1.sh &
./myscript2.sh & 
```

将并行生成两个进程作为后台线程。但是，是否可以将这些作为前台线程生成？目的是在**top.sh**被杀死时自动杀死**myscript1.sh**和**myscript2.sh**。谢谢

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T12:51:21.263

你只能在前台做一份工作。您可以让脚本对到达它的任何信号做出反应，并将信号转发给其他作业。如果您想有一种杀死子进程的中央方式，您需要确保您的脚本一直存在：调用`wait`以便您的脚本在所有作业都已终止或脚本本身被终止之前不会退出。

```
#!/bin/bash
jobs=
trap 'kill -HUP $jobs' INT TERM HUP
myscript1.sh & jobs="$jobs $!"
myscript2.sh & jobs="$jobs $!"
wait 
```

您仍然可以通过向它发送一个它没有捕获的信号来仅终止包装脚本，例如 SIGQUIT （我故意遗漏了）或 SIGKILL （无法捕获）。

有一种方法可以让所有进程都在前台：通过管道连接它们。忽略 SIGPIPE 以便进程的死亡不会杀死前一个进程。如果需要，可以通过其他文件描述符保存和恢复标准输入和标准输出。这样脚本和后台任务将在同一个[进程组](http://en.wikipedia.org/wiki/Process_group)中，因此按`Ctrl`+`C`将杀死包装脚本和子进程。如果您直接终止包装脚本，则不会影响子进程；您可以通过传递包装脚本的 PID 的负数来终止进程组（例如`kill -TERM -1234`）。

```
trap '' PIPE
{
  myscript1.sh <&3 >&4 |
  myscript2.sh <&3 >&4
} 3<&0 4>&1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:52:58.317

使用 GNU Parallel，您的脚本将是：

```
#!/bin/bash

parallel ::: ./myscript1.sh ./myscript2.sh 
```

甚至：

```
#!/usr/bin/parallel --shebang -r

./myscript1.sh
./myscript2.sh 
```

观看介绍视频以了解更多信息：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)**

# openssl - 使用 openssl 生成 ECDSA 密钥对中的额外字符

> ID：12018588
> 
> 赞同：1
> 
> 时间：2012-08-18T12:34:19.760
> 
> 标签：openssl

我想使用 openSSL 库为 ECDSA 算法生成公钥/私钥对。问题是在生成密钥对之后，生成的密钥中有一些额外的字符，完全没有意义。例如，这是我的代码的结果：

```
-----BEGIN EC PARAMETERS-----
MIH3AgEBMCwGByqGSM49AQECIQD/////AAAAAQAAAAAAAAAAAAAAAP//////////
/////zBbBCD/////AAAAAQAAAAAAAAAAAAAAAP///////////////AQgWsY12Ko6
k+ez671VdpiGvGUdBrDMU7D2O848PifSYEsDFQDEnTYIhucEk2pmeOETnSa3gZ9+
kARBBGsX0fLhLEJH+Lzm5WOkQPJ3A32BLeszoPShOUXYmMKWT+NC4v4af5uO5+tK
fA+eFivOM1drMV7Oy7ZAaDe/UfUCIQD/////AAAAAP//////////vOb6racXnoTz
ucrC/GMlUQIBAQ==
-----END EC PARAMETERS-----

-----BEGIN EC PRIVATE KEY-----
MIIBaAIBAQQgRcbK9JeWXghYJe0QHAaHDRrqmgX7Gp9QQrB820lHVDyggfowgfcC
AQEwLAYHKoZIzj0BAQIhAP////8AAAABAAAAAAAAAAAAAAAA////////////////
MFsEIP////8AAAABAAAAAAAAAAAAAAAA///////////////8BCBaxjXYqjqT57Pr
vVV2mIa8ZR0GsMxTsPY7zjw+J9JgSwMVAMSdNgiG5wSTamZ44ROdJreBn36QBEEE
axfR8uEsQkf4vOblY6RA8ncDfYEt6zOg9KE5RdiYwpZP40Li/hp/m47n60p8D54W
K84zV2sxXs7LtkBoN79R9QIhAP////8AAAAA//////////+85vqtpxeehPO5ysL8
YyVRAgEBoUQDQgAEiXKUR9yDAkmUUMj/i6LDxt0+HuMJRZWSbnq2fRZfHXgIkk9w
VFusGaX4keEJf9tOWUokEVNg1RMGfMjG9C8GUQ==
-----END EC PRIVATE KEY-----

-----BEGIN PUBLIC KEY-----
MIIBSzCCAQMGByqGSM49AgEwgfcCAQEwLAYHKoZIzj0BAQIhAP////8AAAABAAAA
AAAAAAAAAAAA////////////////MFsEIP////8AAAABAAAAAAAAAAAAAAAA////
///////////8BCBaxjXYqjqT57PrvVV2mIa8ZR0GsMxTsPY7zjw+J9JgSwMVAMSd
NgiG5wSTamZ44ROdJreBn36QBEEEaxfR8uEsQkf4vOblY6RA8ncDfYEt6zOg9KE5
RdiYwpZP40Li/hp/m47n60p8D54WK84zV2sxXs7LtkBoN79R9QIhAP////8AAAAA
//////////+85vqtpxeehPO5ysL8YyVRAgEBA0IABIlylEfcgwJJlFDI/4uiw8bd
Ph7jCUWVkm56tn0WXx14CJJPcFRbrBml+JHhCX/bTllKJBFTYNUTBnzIxvQvBlE=
-----END PUBLIC KEY----- 
```

我使用 BIO 作为 I/O，这是我的代码：

```
EC_KEY *ecKey = EC_KEY_new();
if (ecKey == NULL) {
    // error happened in initializing new key pair
    return ERR_CODE_ECDSA_EC_KEY_NEW_EXCEPTION;
}

EC_GROUP *group = EC_GROUP_new_by_curve_name(NID_X9_62_prime256v1);
if (group == NULL) {
    // error happened in generating new group
    return ERR_CODE_ECDSA_EC_GROUP_NEW_BY_CURVE_NAME_EXCEPTION;
}
EC_KEY_set_group(ecKey, group);

if (!EC_KEY_generate_key(ecKey)) {
    // error happened in generating new key pair
    return ERR_CODE_ECDSA_EC_KEY_GENERATE_KEY;
}

BIO* memBioECKey = BIO_new(BIO_s_mem());
if (memBioECKey == NULL) {
    return ERR_CODE_BIO_NEW_EXCEPTION;
}

int iRet = PEM_write_bio_ECPKParameters(memBioECKey, group);
if (!iRet) {
    return ERR_CODE_BIO_NEW_EXCEPTION;
}
iRet = PEM_write_bio_ECPrivateKey(memBioECKey, ecKey, NULL, NULL, 0, NULL, pchPassPhrase);
if (!iRet) {
    return ERR_CODE_BIO_NEW_EXCEPTION;
}

iRet = PEM_write_bio_EC_PUBKEY(memBioECKey, ecKey);
if (!iRet) {
    return ERR_CODE_BIO_NEW_EXCEPTION;
}

char* pchPriKey = NULL;
pchPriKey = new char[4096];
int iData = BIO_read(memBioECKey, pchPriKey, 4096);
strPrivateKey.assign(pchPriKey);
iPrivateKeyLen = strPrivateKey.length();
if (pchPriKey != NULL) {
    delete []pchPriKey;
    pchPriKey = NULL;
}

BIO_free_all(memBioECKey);
EC_KEY_free(ecKey);
ERR_print_errors_fp(stderr);

// Return NO_ERROR to indicate NO ERROR happens
return NO_ERROR; 
```

知道问题出在哪里吗？我是在错误地使用 BIO API，还是以不正确的顺序使用？

提前致谢

# iphone - 大约 20 次读数后 iPhone redpark 崩溃

> ID：12018589
> 
> 赞同：0
> 
> 时间：2012-08-18T12:34:29.090
> 
> 标签：iphone, objective-c, arduino

我有以下代码，我想知道为什么在 aprox 之后。来自 arduino 的 20 次测量我的应用程序崩溃。它与 NSmutableArray 有关。我我的 .h 我有

NSMutableArray *值；

.m 看起来像这样：

```
- (void) readBytesAvailable:(UInt32)length
{

    myString = [NSMutableString stringWithString:@""];
    int bytesRead = [rscMgr read:rxBuffer Length:length];
    for (int i = 0; i < bytesRead; i++) 
    {
    [myString appendString:[NSString stringWithFormat:@"%c",((char *)rxBuffer)[i]]];
    }
    NSArray *arrayValues = [myString componentsSeparatedByString:@","];
    textView.text = [arrayValues objectAtIndex:1];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T14:13:24.870

我会试着解释一下。readBytesAvailable 方法有一个循环，用于在每次迭代中，仅从数据缓冲区生成一个字符。然后，如果您尝试将 Arduino 发送到 iPhone 的完整行划分为数字，则会导致该应用程序崩溃。例如，Arduino 在 readBytesAvailable 启动时发送下一个由 3 个数字组成的字符串：“25 13 16”iPhone 应用程序，执行多次迭代，直到缓冲区为空，在循环内执行操作：it.1=2 it.2=5 it.3=it。 4=1 it.5=.3 it.6= it.7=1 it.8=6 it.9=

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:53:57.910

（这不是一个真正的答案，但评论太长了）。

*   即使由于电缆已连接而无法在 Xcode 中调试程序，您也可以稍后将 iPhone 连接到 Xcode 并在 Organizer 窗口中查看控制台输出和设备日志。
*   您确定`rxBuffer`数据足够大吗？
*   我会`NSLog()`在各个点添加语句以缩小问题范围。特别是`length`和的价值`bytesRead`会很有趣。

# jquery - 不能在条件下调用显示模式

> ID：12018591
> 
> 赞同：0
> 
> 时间：2012-08-18T12:34:33.810
> 
> 标签：jquery

我想在条件下调用祝贺 Bootstrap 模态：在显示一些通知文本时调用 show modal。

条件正确。我用简单的警报试了一下，一切正常。

这是我的代码：

```
 if ( $('.alert').text() == 'Signed in successfully.' ) {
 $('#congrats').show();
    } 
```

这是我的html：

```
<div class="modal fade hide" id="congrats"> 
```

浏览器的控制台没有错误。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:43:13.813

我认为$（“.alert”）.text（）中可能包含一些空格，所以尝试jquery trim并使用如下

```
if ($.trim($('.alert').text()) == 'Signed in successfully.') {
  $('#congrats').show(); // or $('#congrats').model("show"); as per the recent comment
} 
```

祝你好运 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:43:20.803

抱歉，由于某种原因，我发现语法发生了变化，或者我错过了它。这是工作变体：

```
 if ( $('.alert').text() == 'Signed in successfully.' ) {
    $('#congrats').modal('show')
   } 
```

# android - android 4.1中的数字时钟？

> ID：12018592
> 
> 赞同：2
> 
> 时间：2012-08-18T12:34:34.370
> 
> 标签：android

我无法在 android 4.1 中拖放数字时钟，但令人惊讶的是能够拖放模拟时钟！

错误信息：

> 找不到以下类： - DigitalClock（更改为 android.widget.DigitalClock，修复构建路径，编辑 XML）

![在此处输入图像描述](../Images/c3c307140b719a8beae9f1d4e7795758.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:56:25.307

当我拖放数字时钟时，我在 Eclipse IDE 中收到了同样的错误，但在运行它时没有问题，时钟显示正确。看来该错误只是虚假的，可以忽略。

另一件需要注意的是，从 API 级别 17 开始，[数字时钟已被弃用](https://developer.android.com/reference/android/widget/DigitalClock.html)，如果您能够以 API 级别 17 或更高版本为目标，则[文本时钟](https://developer.android.com/reference/android/widget/TextClock.html)是要使用的小部件。拖动一个时，我没有收到任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:32:16.823

我希望您在 XML 代码中没有遗漏这两行。

```
<?xml version="1.0" encoding="UTF-8"?> <!-- at the very beginning of your XML code -->

<root xmlns:android="http://schemas.android.com/apk/res/android" ... > <!-- inside the first element (e.g. rootor anything else) in your XML layout code --> 
```

# c# - 将派生类引用传递给基类引用

> ID：12018595
> 
> 赞同：3
> 
> 时间：2012-08-18T12:34:48.467
> 
> 标签：c#, inheritance

> 将派生类引用传递给基类引用

这是否意味着从派生类调用基类，就像构造函数三角形会调用基类？

```
class Shape {
public int width, height;
 public Shape(int x) { 
    width = height = x; 
    } 
}

class Triangle : Shape { 
 public string style;
  public Triangle(int x) : base(x) { 
    style = "isosceles";  
  } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:01:07.893

是的，它将指示运行时在 Triangle 之前调用基本 Shape 构造函数。

逻辑按以下顺序执行：

1.  执行形状（int x）
2.  执行三角形（int x）

因此，如果您有不同的构造函数重载，您可以直接调用它们。另请注意，如果您的基类具有无参数构造函数，则`base()`如果您未指定一个，则本质上是隐式添加的。这意味着如果您的基类没有*无*参数构造函数，则所有子类都*必须*在其构造函数中有效`base(...parameters...)`。

此外，您可以使用`this()`而不是 base 来定位当前子类的构造函数。

```
public class MyBaseClass
{
    public MyBaseClass()
    {
        Console.WriteLine("MyBaseClass Parameterless");
    }

    public MyBaseClass(string message)
    {
        Console.WriteLine("MyBaseClass Message: " + message);
    }
}

public class MySubClass
{
    public MySubClass()
    {
        Console.WriteLine("MySubClass Parameterless");
    }

    public MySubClass(string message)
        : base(message)
    {
        Console.WriteLine("MySubClass Message: " + message);
    }

    public MySubClass(bool someUselessFlag)
        : this()
    {
        Console.WriteLine("MySubClass bool someUselessFlag constructor");
    }
} 
```

输出将是：

```
var a = new MySubClass();
//outputs:
//MyBaseClass Parameterless
//MySubClass Parameterless

var b = new MySubClass("Hello World!");
//outputs:
//MyBaseClass Message: Hello World!
//MySubClass Message: Hello World!

var c = new MySubClass(true);
//outputs:
//MyBaseClass Parameterless
//MySubClass Parameterless
//MySubClass bool someUselessFlag constructor 
```

构造函数会自行链接，直到最终调用`Object()`基本构造函数。这就是为什么`var c = new MySubClass(true)`调用两个以上的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T13:58:01.110

借助 Herbert Schildt 的 C# 4.0 - The Complete Reference 一书。我会试着回答这个问题。我认为这个问题的例子是不完整的。如果在阅读 Herbert Schildt 的一本 C# 书籍时提出了这个问题。那么这个例子可能是这样的：

```
class Shape
{
    public int width, height;
    public Shape(int x)
    {
        width = height = x;
    }

    public Shape(Shape shape)
    {
        width = shape.width;
        height = shape.height;
    }
}

class Triangle : Shape
{
    public string style;
    public Triangle(int x)
        : base(x)
    {
        style = "isosceles";
    }
    public Triangle(Triangle triangle)
        : base(triangle)
    {
        style = triangle.style;
    }
}

class Draw
{
    static void Main()
    {
        Triangle triangle1 = new Triangle(5);
        Triangle triangle2 = new Triangle(triangle1);
    }
} 
```

这里 Triangle 的第二个构造函数接收一个 Triangle 对象并将其传递给基本类型的 Shape 构造函数。这是将派生类引用传递给基类引用的示例。有关这方面的更多信息，请参阅 [Herbert Schildt 著作的第 299 页。](https://docs.google.com/file/d/0B0AaS4SEome8ODk4MDgyZGQtY2ZmNi00NDVmLTg2MmUtOWY1NzdiNDk3YjNh/edit)

# amqp - 在 AMQP 标头交换中接收消息的地址

> ID：12018596
> 
> 赞同：0
> 
> 时间：2012-08-18T12:34:48.913
> 
> 标签：amqp, qpid

我应该使用什么地址将队列绑定到使用 Qpid 的标头交换？我希望队列只接收具有特定标头和值的消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:34:48.913

drain -f "qName ; { create:receiver , node: { dual:False, x-declare: {auto-delete:'false', type:headers}, x-bindings:[{arguments:{x-matc​h :any, 'header1':'value1'},key:qName,​ queue:qName, exchange:'amqmatch'}]}}"

如果您的地址看起来不像这样，它将无法正常工作。我收到一个错误，说即使我包含了 x-match 也需要包含它。

AMQP 代理：Qpid 0.12

# java - Java几个条件借助for循环

> ID：12018597
> 
> 赞同：0
> 
> 时间：2012-08-18T12:34:49.223
> 
> 标签：java, for-loop

我想知道是否有可能为此编写最少的代码：

```
for (int x = 1; x < 10; x++){    
      /*I want to replace this condition with (x%number == 0) 
        instead of writing out condition for every number, but 
        it did not work with for (int number = 1; number <= 3; number++)
        in (x%number == 0), as it prints out every x and number 
      */
    if ((x%1) == 0 && (x%2) == 0 & (x%3) == 0){
       System.out.println(success!);
    }    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:38:24.997

我认为
`x % a == 0 && x % b == 0 && x % c == 0`
等于
~~x % (a * b * c) == 0~~

**UPDATE**
乘法不正确，您需要使用[LCM](http://en.wikipedia.org/wiki/Least_common_multiple)：`x % lcm(a, b, c)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T13:10:18.473

这就是让计算机科学教授高兴的必要条件：

```
for (int x = 1; x < 10; x++){    
    boolean success = true;
    for (int number = 1; number <= 3; number++) {
        if ((x % number) != 0) {
            success = false;
        }
    }
    if (success) {
       System.out.println("success!");
    }    
} 
```

尽管请注意： (x % 1) 始终为 0。

根据我的“避免嵌套循环”规则，这就是你需要让我开心的东西：

```
for (int x = 1; x < 10; x++) {
    if (testNumber(x)) 
        System.out.println(x + " success!");
    }
}

private static boolean testNumber(int x) {
    for (int number = 1; number <= 3; number++) {
        if ((x % number) != 0) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T12:38:42.080

看一看 ：

```
for (int x = 1; x < 10; x++){
  boolean flag = false;
    for(int num = 1; num <= 3; num++){
       if ((x%num) == 0 ){
          flag = true;
       }else{
          flag = false;
          break;
       }
    }
    if(flag){
            System.out.println(x + " success!");
    }
} 
```

**输出 ：**

```
6 success! 
```

我知道代码看起来有点吓人，但适用于任何价值`x`和`num`

# jquery - 如何在鼠标悬停在图像上时显示图像内容？

> ID：12018599
> 
> 赞同：0
> 
> 时间：2012-08-18T12:34:57.057
> 
> 标签：jquery, html

我想在这个网站上实现相同的 [点击这里](http://www.infosys.com/pages/index.aspx)

```
$(function() {
  $('#div_2').hide();
  $('#div_1, #div_2').hover(function() {
      $('#div_2').stop().fadeIn(120); 
       $("div_2").animate({left:"100px"},"slow");
    $("div_2").animate({fontSize:"3em"},"slow"); 
  }, function(){
      $('#div_2').stop().fadeOut();

  });
}); 
```

HTML：

```
 <div id="div_1" style="background-position:top;position:relative">
        <img src="spotlights-infytalk (1).jpg" width="329" height="110" style="position:relative;vertical-align:top"/>
    </div>
    <div id="div_2" style=" overflow:auto;position:relative;padding-top:-10px;background-color:#CCCCCC">
image small few contents text
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:46:04.037

give **title="image content"** to your img tag. like :

```
<img src="" title="image content" /> 
```

also use **alt** attribute in img tag, it will create good impact for seo.

# deployment - 我们应该部署 scrrun.dll（Windows 脚本运行时）吗？

> ID：12018602
> 
> 赞同：4
> 
> 时间：2012-08-18T12:35:17.203
> 
> 标签：deployment, vb6, installation, wsh

我们的 VB6 应用程序严重依赖于 scrrun.dll（Windows 脚本宿主）的使用。直到一年前，我们还使用我们的安装程序来部署这个 dll。[由于 Windows 脚本主机应该是 Windows 的一部分，](http://en.wikipedia.org/wiki/Windows_Script_Host)我们从安装包中删除了 dll。但是，有时会出现在他们的系统上具有非功能性 scrrun.dll 的客户，我们必须帮助他们重新安装或重新注册它。

那么，我们是否应该将 scrrun.dll 放回安装包中呢？我们应该对安装进行一些检查吗？或者我们是否应该接受这样一个事实，即我们必须为一些客户提供手动支持以正确设置他们的系统？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T13:22:38.427

[不要尝试将这些库部署为正常设置的一部分。](http://support.microsoft.com/kb/254166)

> Microsoft Scripting Runtime 必须通过使用自解压 .exe 文件来安装。对于本文开头提到的 Scripting Runtime 版本，分发它的唯一方法是使用位于以下位置的完整自解压 .exe 文件...

一些用户可能使用较旧的反恶意软件套件，其中许多试图禁用脚本。更有可能的是，一些用户已经设法破坏了他们的 Windows 安装，无论是他们自己还是通过使用未正确打包的应用程序来尝试包含这些库 - 并在卸载时盲目地将它们从系统中删除（*咳嗽，咳嗽 - Inno*）。

所涉及的库已经定制了一段时间的代码。这就是为什么古老的 .CAB 文件很久以前就被“召回”了。它们没有一个副本可以在任何随机版本的 Windows 上运行，也没有适用于任何现代版本的 Windows 的 redist 包。正确的修复是系统还原或修复安装。

虽然这不能直接归咎于 InnoSetup，因为它是由编写不佳的脚本造成的，但它足够令人沮丧和普遍，以至于当它的签名被添加到反恶意软件套件时我不会哭泣。有太多写得不好的例子散落在野副本/被太多人粘贴。

我花了很多时间来消除因卸载这些应用程序而造成的损害，并且对此感到非常厌倦。在可能的情况下，我现在在自卫中使用孤立的组件，这很有帮助。 [Windows 文件保护](http://support.microsoft.com/kb/222193)在防止对系统文件的滥用行为方面也做得越来越好。

但总的来说，最好避免对应用程序中的脚本工具的任何依赖。尽管编写替代逻辑可能需要一些时间，但它们无论如何都不能像直接代码那样做得很好。

# java - 如何在 Java Swing 中使用 jprogress bar

> ID：12018607
> 
> 赞同：-5
> 
> 时间：2012-08-18T12:35:33.077
> 
> 标签：java, swing, jprogressbar

我在 swing 中有一个桌面 GUI，我想使用 jProgressBar 显示 GUI 中使用的用户存储的状态，请提出一些有吸引力的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:39:48.753

我建议你阅读[本](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)教程。我认为这是学习如何使用 JProgressBar 最有吸引力的方式。

稍微详细说明一下答案：

```
JProgressBar progress = new JProgressBar(0, totalAvailableStorage);
progress.setValue(occupiedStorage); 
```

当然，您必须将进度条添加到其容器中，并在需要时调用 progress.setValue()。

# jquery - 背景图像幻灯片

> ID：12018608
> 
> 赞同：0
> 
> 时间：2012-08-18T12:35:40.987
> 
> 标签：jquery, css, jquery-cycle

我刚刚发现了 CSS3`background-size:cover`属性。现在我想用幻灯片（例如jQuery循环）替换这个背景图像，而不会丢失浏览器完成的自动缩放。有一个简单的解决方案吗？

我找到[了这个](https://stackoverflow.com/a/4951990/1205935)答案，它可能包含一个解决方案，但我不太确定如何调整它。我试图复制并粘贴下面的代码，但没有任何循环......

```
jQuery.noConflict();

jQuery(document).ready(function($) {
    $(function() {
        $("#home").loadBGImage();
        setInterval('$("#home").loadBGImage()', 5000); 
    });

    $.fn.loadBGImage = function() {
        var images = ["background1.jpg",
        "background2.jpg",
        "background3.jpg",
        "background4.jpg" ];

        var image = images[Math.floor(Math.random() * images.length)];

        return this.each(function() {
            var $obj = $(this);
            $obj.fadeOut(500,function() {
                $obj.css('background', 'url(../images/' + image + ')')
                    .fadeIn(500);
            });
        });
    };

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:49:22.957

好吧，问题是你使用了 jQuery.noConflict(); 所以在这种情况下，所有的 $ 都必须用 jQuery 替换，如下所示

```
jQuery.noConflict();

jQuery(document).ready(function(jQuery) {
 jQuery(function() {
    jQuery("#home").loadBGImage();
    setInterval('jQuery("#home").loadBGImage()', 5000); 
 });

 jQuery.fn.loadBGImage = function() {
    var images = ["background1.jpg",
    "background2.jpg",
    "background3.jpg",
    "background4.jpg" ];

    var image = images[Math.floor(Math.random() * images.length)];

    return this.each(function() {
        var $obj = jQuery(this);
        $obj.fadeOut(500,function() {
            $obj.css('background', 'url(../images/' + image + ')').fadeIn(500);
        });
    });
 };

}); 
```

# php - 致命错误 - 清理

> ID：12018609
> 
> 赞同：-2
> 
> 时间：2012-08-18T12:35:44.093
> 
> 标签：php, sanitization, fatal-error

```
Fatal error: Call to undefined function sanitize() in general.php on line 5 
```

这是general.php：

```
include"connect.php"; 
function user_id_from_username($username)
{
$username   =   sanitize($username); //This is line 5/general.php
return mysql_result(mysql_query("SELECT `id` FROM `users` WHERE `username`='$username'"),0, 'id');
} 
```

connect.php 包含我的数据库连接，我有一个困惑，我需要将它包含在函数中还是函数会自动连接到我的数据库？

我正在使用 user.php 中的函数作为：

```
if(isset($_GET["username"])===true && empty($_GET["username"])===false)
{
$username   =   $_GET["username"];
$user_id    =   user_id_from_username($username);
echo"$user_id";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:37:58.977

它的意思正是它所说的，`sanitize`没有在范围内定义。它不是一个标准函数，所以它应该在你的代码中的某个地方。您很可能可以直接将其替换为`mysql_real_escape_string`.

```
$username   =  mysql_real_escape_string(username); 
```

您当然应该考虑迁移到[`PDO`](http://php.net/PDO)参数化查询。

# php - 正则表达式函数[文件名] 模式和函数[string_with_escaped_characters] 模式

> ID：12018611
> 
> 赞同：0
> 
> 时间：2012-08-18T12:35:49.450
> 
> 标签：php, regex, preg-replace, pattern-matching, preg-match

我正在尝试编写脚本并解析文件，

请帮助使用 php 中的正则表达式来查找和替换以下模式：

来自：“这是一个 foo[/etc/bar.txt] 中的 foo[/www/bar.txt]”

至：“这是 bar2_txt_content 中的 bar_txt_content”

沿着这些思路：

```
$subject = "This is a foo[/www/bar.txt] within a foo[/etc/bar.txt]";
$pattern = '/regex-needed/';
preg_match($pattern, $subject, $matches);
foreach($matches as $match) {
    $subject = str_replace('foo['.$match[0].']', file_get_contents($match[0]), $subject);
} 
```

我的第二个要求是：

来自：'这是一个 foo2[bar bar] bar bar]。'

To：“这是一个返回”

沿着这些思路：

```
$subject = 'This is a foo2[bar bar \] bar bar].';
$pattern = '/regex-needed/';
preg_match($pattern, $subject, $matches);
foreach($matches as $match) {
    $subject = str_replace('foo2['.$match[0].']', my_function($match[0]), $subject);
} 
```

请帮助构建这些模式......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:44:14.153

卢克，

这应该可以帮助您入门。

[http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

您可能必须设置一个循环并增加计数器，使用限制为 1 的 preg_replace 来仅替换第一个实例。

为了匹配 foo[/www/bar.txt]: 正则表达式应该是这样的：

```
foo\[\/www\/([A-Za-z0-9]*)\.txt\] 
```

反斜杠用于取消正则表达式中某些字符的特殊含义。

它将匹配 foo[/www/.[some file name].txt，并且 ${1} 将包含不带 .txt 的文件名作为括号形成组，可以在替换的表达式中使用。${1} 将包含第一个圆括号中匹配的内容，${2} 将包含第二个圆括号中匹配的内容，等等...

因此，您替换的表达式应该类似于“${1}_txt_content”。或者在第二次迭代“${1}2_txt_content”中。

[A-Za-z0-9]* 表示任何字母数字字符 0 次或更多次，如果您想要至少 1 个字符，您可能需要将 * 替换为 +。

所以试试：

```
$pattern = foo\[\/www\/([A-Za-z0-9]*)\.txt\];
$replace = "${1}_txt_content";
$total_count = 1;
do {
     echo preg_replace($pattern, $replace, $subject, 1, $count);
     $replace = "${1}" + ++$total_count + "_txt_content";
} while ($count != 0); 
```

（警告，这是我的第一个 PHP 程序，所以它可能有错误，因为我无法测试它！但我希望你明白）

希望有帮助！

托尼

PS：我不是 PHP 程序员，但我知道这可以在 C# 中工作，例如，查看 PHP 文档似乎应该可以工作。

PS2：当我需要时，我总是将这个网站加入书签以供参考：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:45:04.743

如果你总是有一个像 foo[ ... ] 这样的结构，那么很容易：

```
foo\[([^]]+)\] 
```

那是 .NET 语法，但我确信表达式足够简单，您可以转换。

正则表达式的描述：

匹配字符“foo”字面意思«foo»匹配字符“[”字面意思«[»匹配下面的正则表达式并将其匹配捕获到反向引用编号1«([^]]+)»匹配任何不是“ ]” «[^]]+» 一次和无限次之间，尽可能多次，根据需要回馈（贪婪）«+» 匹配字符“]”字面意思«]»

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T12:48:10.163

```
$pattern = '/\[([^\]]+)\]/';
preg_match_all($pattern, $subject, $matches);
print_r($matches['1']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T13:44:34.517

找到了我转义所需的正确正则表达式：

```
'/foo\[[^\[]*[^\\\]\]/' 
```

# mysql - 使用单次插入导入巨大的 mysql 转储

> ID：12018616
> 
> 赞同：1
> 
> 时间：2012-08-18T12:36:09.693
> 
> 标签：mysql

我需要导入单个表的约 500mb 的巨大 MySQL 转储，但问题是带有单个插入语句和多行的转储文件。当我尝试将它导入数据库时​​，它需要很长时间，以至于我不确定它会完成还是 MySQL 会消失。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:42:55.583

你可以做几件事：

1.  从原始文件中获取二进制转储文件并将其导入。
2.  获取原始数据库数据文件并复制它们。
3.  将 500mb 的文件编辑成几个，你把单个 sql insert 语句编辑成多个 sql insert 语句。您需要做的就是在例如 100 行值之后放置一些右括号，然后在下一行放置“insert into x”语句。重复。

# android - 在不读取整个文件的情况下在 Android 中获取位图的尺寸

> ID：12018620
> 
> 赞同：7
> 
> 时间：2012-08-18T12:36:25.347
> 
> 标签：android

我想在不读取整个文件的情况下在 Android 中获得位图的尺寸。

我尝试使用推荐的`inJustDecodeBounds`和`InputStream`记录`read()`s 的自定义。不幸的是，基于此，Android`BitmapFactory`似乎读取了大量字节。

类似于： [Java/ImageIO 在不读取整个文件的情况下获取图像尺寸？](https://stackoverflow.com/questions/1559253/java-imageio-getting-image-dimension-without-reading-the-entire-file)对于 Android，不使用 ImageIO。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-18T12:56:27.170

你使用 inJustDecodeBounds 是对的。将其设置为 true 并确保在解码中包含选项。这只是读取图像大小。

无需读取流。只需在解码中指定路径。

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeFile(<pathName>, options);
int imageHeight = options.outHeight;
int imageWidth = options.outWidth; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-12T18:42:58.823

```
java.net.URL imageUrl = new java.net.URL("https://yourUrl.com");
HttpURLConnection connection = (HttpURLConnection)imageUrl.openConnection();
connection.connect();
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeStream(connection.getInputStream(), null, options);
int imageWidth = options.outWidth;
int imageHeight = options.outHeight; 
```

# php - Ajax - $.get 从服务器获取数据

> ID：12018623
> 
> 赞同：0
> 
> 时间：2012-08-18T12:36:42.733
> 
> 标签：php, ajax, jquery

我正在尝试根据用户在输入字段中提供的邮政编码获取城市名称。

这个输入和ajax函数：

```
<input type="text" name="postal_code" id="postal_code" 
onkeyup="
  $.get('<?=$config['url']?>/ajax/location/?code='+this.value, 
  function(data){ $('#location').html(data); });" 
  maxlength="5" /> 
```

这是 /ajax/location/?code= 文件：

```
 <?php
    $city = mysql_fetch_object(mysql_query("SELECT * FROM postal_codes WHERE postal_code = '" . intval($_GET['code']) . "'")); 
 ?>
 <div>
   <p>
      <input value="<?php echo $city->city_name; ?>" name="city"  />
   </p>
</div> 
```

我使用 .ajaxError 来查看错误，但没有帮助。它仅警告 url 而没有有关错误的信息。

```
$(document).ajaxError(function(e, xhr, settings, exception) {
            alert('error in: ' + settings.url + ' \n'+'error:\n' + xhr.responseText );
            }); 
```

这就是 ajaxError 警报：

```
error in: http://mywebsitename.com/ajax/location/?code=11824 
error: 
```

我尝试使用 $.get 获取 .txt 文件并且它有效。所以我 100% 确定 ajax 工作正常。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:42:40.360

/ajax/location/?code= 没有数据库连接

## 编辑：

试试这个：

```
$.get('<?=$config['url']?>/ajax/location/', {code:this.value}, function(data){ $('#location').html(data); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:55:55.053

解决了我的问题。

问题是：

```
<?=$config['url']?> 
```

绝对网址。我删除了它并且它起作用了。

```
'/ajax/location/?code='+this.value 
```

感谢大家试图帮助我！

# iphone - iPhone：隐藏应用程序上的键盘输入背景或视图消失

> ID：12018626
> 
> 赞同：16
> 
> 时间：2012-08-18T12:36:50.550
> 
> 标签：iphone, ios, uisearchbar, resignfirstresponder

我有一个 UISearchBar，点击它会显示键盘。但是，如果用户在显示键盘时按下主页按钮，然后返回应用程序，则键盘仍然可见。当应用程序关闭/进入后台时，如何隐藏键盘？

我在 viewDidDisappear 中尝试了以下方法：

```
[eventSearchBar resignFirstResponder];

[eventSearchBar endEditing:YES]; 
```

我也在 appDidEnterBackground 的委托中尝试过这个：

```
[self.rootController.navigationController.view endEditing:YES]; 
```

这些都不起作用。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-18T14:23:09.787

您可以在 appDelegate 中执行此操作....

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [self.window endEditing:YES];
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-07T13:37:12.253

这个的斯威夫特版本：

```
func applicationDidEnterBackground(application: UIApplication) {
    window?.endEditing(true)
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-18T14:25:22.307

在您的视图控制器中，例如在 init 方法中，注册`UIApplicationWillResignActiveNotification`：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
    selector:@selector(willResignActive:)
    name:UIApplicationWillResignActiveNotification
    object:nil]; 
```

当应用程序进入后台时，使搜索显示控制器处于非活动状态。这会从搜索字段中移除焦点并隐藏键盘：

```
- (void)willResignActive:(NSNotification *)note
{
    self.searchDisplayController.active = NO;

    // Alternatively, if you only want to hide the keyboard:
    // [self.searchDisplayController.searchBar resignFirstResponder];
} 
```

并且不要忘记在 dealloc 方法中删除观察者：

```
[[NSNotificationCenter defaultCenter] removeObserver:self
    name:UIApplicationWillResignActiveNotification
    object:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-28T19:25:19.207

我偶尔会遇到所有标准方法都失败的情况。到目前为止，这是我获得可靠结果的唯一方法。

在最顶层的控制器中。

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willResignActiveNotification:) name:UIApplicationWillResignActiveNotification object:nil];
}

-(void) willResignActiveNotification:(NSNotification*) vNotification {
    [[UIApplication sharedApplication] sendAction:@selector(resignFirstResponder) to:nil from:nil forEvent:nil];
    [self setEditing:NO];
} 
```

有一种奇怪的情况，文本字段将不再响应`resignFirstResponder`或`endEditing`仍然有键盘。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-01T06:23:51.720

最好的方法是将 window?.endEditing(true) 放在 AppDelegate 上的 applicationWillResignActive 中：

```
func applicationWillResignActive(_ application: UIApplication) {
    window?.endEditing(true)
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-09T16:04:18.483

swift 3.2 版本中的解决方案

```
 override func viewDidLoad() {
        super.viewDidLoad()
        NotificationCenter.default.addObserver(self, selector: #selector(hideTextField), name: NSNotification.Name.UIApplicationWillResignActive, object: nil)
    }

    deinit {
        NotificationCenter.default.removeObserver(self)
    }

    func hideTextField(){
        eventSearchBar.endEditing(true)
    } 
```

# twitter - Twitter 回调 url 错误

> ID：12018627
> 
> 赞同：1
> 
> 时间：2012-08-18T12:37:14.433
> 
> 标签：twitter, oauth, callback, twitter4j

我正在尝试为我的 twitter 相关应用程序设置 OAUTH。我正在使用一个回调 url，它在我的应用程序中获取访问令牌。

但是我收到以下错误：- onReceivedError -2 [http://www.someurl.com/auth/twitter/callback?&oauth_token=ajGYfwX5YauPcHnUIQCjFf1pFBGmhBEhAxFv8Ej6Ns&oauth_verifier=VBWZ5HaDMwGzrzbGOUlEQhUbZmKoLzWXVRqSxBUZI](http://www.someurl.com/auth/twitter/callback?&oauth_token=ajGYfwX5YauPcHnUIQCjFf1pFBGmhBEhAxFv8Ej6Ns&oauth_verifier=VBWZ5HaDMwGzrzbGOUlEQhUbZmKoLzWXVRqSxBUZI)找不到 URL。

我的浏览器显示页面没有响应。

我的回调网址 =http://www.someurl.com/auth/twitter/callback 。

我正在使用 onNewIntent 从浏览器接收意图。

```
 public void onNewIntent(Intent intent)
    {
        super.onNewIntent(intent);
    System.out.println("Here ");

        Uri uri = intent.getData();
        String oauthToken = uri.getQueryParameter("oauth_token");
        String oauthVerifier = uri.getQueryParameter("oauth_verifier");
     } 
```

清单文件：-

```
 <activity android:name=".Testing" android:launchMode="singleTask">>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="x-oauthflow-twitter" android:host="callback" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:29:35.707

回调有点奇怪，它的格式实际上是 scheme://host。

因此，对于您的应用程序，基于清单文件，它将是“x-oauthflow-twitter://callback”。这意味着您也必须将该 url 指定为代码中的回调 url。

# c++ - 哪种方法最适合使用 C++ 查找特定软件是否安装在 Windows 中？

> ID：12018632
> 
> 赞同：0
> 
> 时间：2012-08-18T12:38:23.467
> 
> 标签：c++, windows-7

我正在编写一个软件，在给定的时刻需要查找是否已经安装了给定的软件（通过它的名称） - 所以安装程序在安装它的软件时会做同样的事情，有时会提醒该软件已经安装在电脑中。

问题是我不知道哪个是这样做的好方法。现在软件只是查看默认文件夹，如果找不到.exe，他会要求用户指出他安装软件的位置，否则认为它已卸载。

但我希望它自己做事；它应该能够查找是否在没有用户输入的情况下安装了软件，我不确定哪种方法是一种有效的方法。

我现在发现的唯一方法是做与 Windows 的添加/删除程序相同的事情：查看许多注册表项并尝试找到它，但我认为这会花费太多不必要的时间，因为它会在很多地方查找只找到一个软件。

那么在 C++ 中没有其他成本更低的选择吗？

谢谢，

莫默吉尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T12:42:41.000

这完全取决于您要询问的内容是如何安装的。如果它总是从 MSI 安装，您可以阅读 MSI 并学习调用 API 和/或阅读注册表以查看其唯一 ID 是否存在。

如果使用“解压缩”安装，则没有简洁的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T13:33:23.820

您正在寻找的是一个**关键路径**：与该软件唯一关联的注册表位置。
你有两个选择：

1.  **仅**在安装软件时始终存在的注册表项。
    例如。HKEY_CURRENT_USER\软件\BitTorrent\uTorrent
2.  在以下位置查看该软件的唯一卸载条目：`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall`&
    `HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Uninstall`
    您将始终在此处找到一个名为*DisplayName*的 REG_SZ ，它用作“添加删除软件”控制面板扩展中的标题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T13:27:10.507

[`MsiGetProductInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370130.aspx)如果您使用 Windows Installer，可能会为您提供所需的信息。

如果你没有，那么，那就是你的问题......它的存在是有原因的。

# eclipse - 禁用部分 javadoc 的 Eclipse 代码格式

> ID：12018638
> 
> 赞同：11
> 
> 时间：2012-08-18T12:38:47.027
> 
> 标签：eclipse, code-generation, javadoc, weka, eclipse-jdt

我有一个 Java 类，它的部分 javadoc 实际上是作为构建过程的一部分生成的：方法的返回值（静态字符串值）被插入到源文件中，就像`$Revision: $`标签在某些版本控制软件中的工作方式一样。

虽然这种行为可能值得怀疑，但我使用的框架（WEKA 机器学习库）需要这种信息重复。我希望 Eclipse 的代码格式化程序不要干扰生成的注释。我正在使用 Eclipse Indigo 版本。

我可以使用特殊注释打开/关闭格式化程序`//@formatter:on`和`//@formatter:off`. 但是，`@formatter`标签仅在“普通”注释中起作用，在 javadoc 注释中不起作用。显然，它们很容易与 javadoc 标记混淆。这意味着我不能为 javadoc 注释的生成部分关闭格式化程序（例如，自动换行），而让其余部分保持打开状态，因为`@formatter`指令必须放在 javadoc 注释周围。

是否有一种解决方法可以在 javadoc 注释中切换代码格式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-13T12:43:12.403

自从有人问/回答了这个问题并帮助我完善了以下答案以来已经有一段时间了，希望它也很有用。我使用这种替代方法是因为我想在 Javadocs 中运行 Javascript。

Eclipse 提供了@formatter:off 和@formatter:on，需要通过Windows->Preferences->java->code style->formatter:::edit button::: tab "off/on tags" 启用。它们可以在任何评论中使用。

围绕文档的东西

```
// @formatter:off
/**
* javadoc
*/ 
// @formatter:on 
```

但是，当您希望在 javadoc 中关闭格式化程序时，请使用 html 注释中的 @formatter:xxx`<!-- xxxxx -->`来指示您要执行的操作。使用该`<code>...</code>`块来确保没有格式化并将代码包含为 javascript。

编辑了示例中的代码语句，因为我希望它可以在 eclipse 和 netbeans 上工作。我找到了 formatter:off 工作，但随后停止了使用不同版本的 eclipse（是的，我使用多个 IDE 版本）。

```
/** 
* <br><!-- @formatter:off -->
* <code>
* <script type="text/javascript">
* // hash structure for holding variable as name and its text
* var hashText = {};
*  
* // function causes a hyper-link to be created
* function insertLink(varName, text){
*    var link22;
*  
*    hashText[varName] = text;
*  
*    link22 = '<a href="./ConsoleCapture.html#' + varName + '">' + hashText[varName] + '</a>';
*       
*    document.write(link22);
* }
* function insertLinkA(varName){
*    var link22;
*
*    link22 = '<a href="./ConsoleCapture.html#' + varName + '">' + hashText[varName] + '</a>';
*
*    document.write(link22);
* }
*      
* function setLinkPoint(varName, text){
*     hashText[varName] = text;
*      
*     document.write('<a id="' + varName + '"><U>' + hashText[varName] + '</U></a>');
* }
*      
* function setLinkPointA(varName){
*    document.write('<a id="' + varName + '"><U>' + hashText[varName] + '</U></a>');
* }
* </script>
* <code>
* <!-- @formatter:on -->
*
*
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T13:38:56.280

您可以禁用标题的格式设置，但我不相信您可以有选择地禁用非标题 javadoc 注释的格式设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-03T11:25:06.500

我遇到了同样的问题并改变`@formatter:off`为`FORMATTEROFF`我的伎俩。

这个想法是避免`@`在开/关标签中使用。

现在我可以在 javadoc 的一部分周围禁用格式化程序。

# c++ - 使用 clang++ 3.1 构建 Boost 1.50.0

> ID：12018639
> 
> 赞同：4
> 
> 时间：2012-08-18T12:38:54.670
> 
> 标签：c++, boost, llvm, clang

我正在尝试使用 clang++ 3.1 构建 Boost 1.50.0。我尝试使用默认的 darwin 工具集安装 Boost.Build，但出现编译器错误。

有没有一种特殊的方法可以做到这一点？

```
graeme graeme-pc 13:35:14 /usr/local/boost_1_50_0
$ sudo /usr/local/bin/b2 toolset=clang cxxflags="-std=c++11 -stdlib=libc++" linkflags="-stdlib=libc++"

Building the Boost C++ Libraries.

Performing configuration checks

    - has_icu builds           : no
warning: Graph library does not contain MPI-based parallel components.
note: to enable them, add "using mpi ;" to your user-config.jam
    - iconv (libc)             : no
    - iconv (separate)         : yes
    - icu                      : no
    - icu (lib64)              : no
    - gcc visibility           : yes
    - long double support      : yes
warning: skipping optional Message Passing Interface (MPI) library.
note: to enable MPI support, add "using mpi ;" to user-config.jam.
note: to suppress this message, pass "--without-mpi" to bjam.
note: otherwise, you can safely ignore this message.

Component configuration:

    - chrono                   : building
    - date_time                : building
    - exception                : building
    - filesystem               : building
    - graph                    : building
    - graph_parallel           : building
    - iostreams                : building
    - locale                   : building
    - math                     : building
    - mpi                      : building
    - program_options          : building
    - python                   : building
    - random                   : building
    - regex                    : building
    - serialization            : building
    - signals                  : building
    - system                   : building
    - test                     : building
    - thread                   : building
    - timer                    : building
    - wave                     : building

...patience...
...patience...
...patience...
...patience...
...found 8583 targets...
...updating 6 targets...
clang-darwin.compile.c++ bin.v2/libs/signals/build/clang-darwin-4.2.1/release/threading-multi/named_slot_map.o
libs/signals/src/named_slot_map.cpp:105:12: error: call to member function 'erase' is ambiguous
    groups.erase(group);
    ~~~~~~~^~~~~
/usr/bin/../lib/c++/v1/map:964:14: note: candidate function
    iterator erase(const_iterator __p) {return __tree_.erase(__p.__i_);}
             ^
/usr/bin/../lib/c++/v1/map:966:15: note: candidate function
    size_type erase(const key_type& __k)
              ^
/usr/bin/../lib/c++/v1/map:969:15: note: candidate function not viable: requires 2 arguments, but 1 was provided
    iterator  erase(const_iterator __f, const_iterator __l)
              ^
libs/signals/src/named_slot_map.cpp:128:26: error: call to member function 'erase' is ambiguous
    if (empty(g)) groups.erase(g++);
                  ~~~~~~~^~~~~
/usr/bin/../lib/c++/v1/map:964:14: note: candidate function
    iterator erase(const_iterator __p) {return __tree_.erase(__p.__i_);}
             ^
/usr/bin/../lib/c++/v1/map:966:15: note: candidate function
    size_type erase(const key_type& __k)
              ^
/usr/bin/../lib/c++/v1/map:969:15: note: candidate function not viable: requires 2 arguments, but 1 was provided
    iterator  erase(const_iterator __f, const_iterator __l)
              ^
2 errors generated.

    "clang++" -x c++ -O3 -std=c++11 -stdlib=libc++ -O3 -finline-functions -Wno-inline -Wall -DBOOST_ALL_NO_LIB=1 -DBOOST_SIGNALS_DYN_LINK=1 -DBOOST_SIGNALS_NO_LIB=1 -DNDEBUG -I"." -c -o "bin.v2/libs/signals/build/clang-darwin-4.2.1/release/threading-multi/named_slot_map.o" "libs/signals/src/named_slot_map.cpp"

...failed clang-darwin.compile.c++ bin.v2/libs/signals/build/clang-darwin-4.2.1/release/threading-multi/named_slot_map.o...
...skipped <pstage/lib>libboost_signals.dylib for lack of <pbin.v2/libs/signals/build/clang-darwin-4.2.1/release/threading-multi>named_slot_map.o...
clang-darwin.compile.c++ bin.v2/libs/signals/build/clang-darwin-4.2.1/release/link-static/threading-multi/named_slot_map.o
libs/signals/src/named_slot_map.cpp:105:12: error: call to member function 'erase' is ambiguous
    groups.erase(group);
    ~~~~~~~^~~~~
/usr/bin/../lib/c++/v1/map:964:14: note: candidate function
    iterator erase(const_iterator __p) {return __tree_.erase(__p.__i_);}
             ^
/usr/bin/../lib/c++/v1/map:966:15: note: candidate function
    size_type erase(const key_type& __k)
              ^
/usr/bin/../lib/c++/v1/map:969:15: note: candidate function not viable: requires 2 arguments, but 1 was provided
    iterator  erase(const_iterator __f, const_iterator __l)
              ^
libs/signals/src/named_slot_map.cpp:128:26: error: call to member function 'erase' is ambiguous
    if (empty(g)) groups.erase(g++);
                  ~~~~~~~^~~~~
/usr/bin/../lib/c++/v1/map:964:14: note: candidate function
    iterator erase(const_iterator __p) {return __tree_.erase(__p.__i_);}
             ^
/usr/bin/../lib/c++/v1/map:966:15: note: candidate function
    size_type erase(const key_type& __k)
              ^
/usr/bin/../lib/c++/v1/map:969:15: note: candidate function not viable: requires 2 arguments, but 1 was provided
    iterator  erase(const_iterator __f, const_iterator __l)
              ^
2 errors generated.

    "clang++" -x c++ -O3 -std=c++11 -stdlib=libc++ -O3 -finline-functions -Wno-inline -Wall -DBOOST_ALL_NO_LIB=1 -DBOOST_SIGNALS_NO_LIB=1 -DNDEBUG -I"." -c -o "bin.v2/libs/signals/build/clang-darwin-4.2.1/release/link-static/threading-multi/named_slot_map.o" "libs/signals/src/named_slot_map.cpp"

...failed clang-darwin.compile.c++ bin.v2/libs/signals/build/clang-darwin-4.2.1/release/link-static/threading-multi/named_slot_map.o...
...skipped <pbin.v2/libs/signals/build/clang-darwin-4.2.1/release/link-static/threading-multi>libboost_signals.a(clean) for lack of <pbin.v2/libs/signals/build/clang-darwin-4.2.1/release/link-static/threading-multi>named_slot_map.o...
...skipped <pbin.v2/libs/signals/build/clang-darwin-4.2.1/release/link-static/threading-multi>libboost_signals.a for lack of <pbin.v2/libs/signals/build/clang-darwin-4.2.1/release/link-static/threading-multi>named_slot_map.o...
...skipped <pstage/lib>libboost_signals.a for lack of <pbin.v2/libs/signals/build/clang-darwin-4.2.1/release/link-static/threading-multi>libboost_signals.a...
...failed updating 2 targets...
...skipped 4 targets... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T14:29:22.957

看起来是 clang++ 和 Boost 1.50 与 C++11 开启的已知构建问题

*   [https://svn.boost.org/trac/boost/ticket/4999](https://svn.boost.org/trac/boost/ticket/4999)
*   [https://svn.boost.org/trac/boost/ticket/5774](https://svn.boost.org/trac/boost/ticket/5774)

你可以通过不建立信号来解决这个问题。以下步骤对我有用：

```
$ cd /usr/local/boost_1_50_0
$ sudo ./bootstrap.sh --with-toolset=clang
$ sudo ./b2 toolset=clang cxxflags="-std=c++11 -stdlib=libc++" linkflags="-stdlib=libc++" --without-signals 
```

# c# - 如何关闭 WPF 弹出窗口？

> ID：12018641
> 
> 赞同：6
> 
> 时间：2012-08-18T12:39:24.277
> 
> 标签：c#, wpf

我正在 WPF 中开发项目，并且在我的项目中使用弹出窗口时遇到问题。我在我的窗口中使用弹出控件，如下所示： -

```
<Popup HorizontalAlignment="Center" VerticalAlignment="Center" 
    AllowsTransparency="True" x:Name="popup" Placement="Center" 
    OpacityMask="#FFC86E6E" Closed="popup_Closed" >
    <Grid Height="auto" Width="auto" Margin="0" >
        <Grid.RowDefinitions>
            <RowDefinition Height="0.488*"/>
            <RowDefinition Height="0.512*"/>
        </Grid.RowDefinitions>

        <Frame x:Name="popupframe" Margin="0" Grid.Row="1"  />
        <Button Width="30" Height="30"  HorizontalAlignment="Right" 
                            Margin="0,0,10,-50" VerticalAlignment="Center" 
                            BorderThickness="0" BorderBrush="{x:Null}" 
                            ClickMode="Press" Click="Button_Click" 
                            Foreground="{x:Null}">
            <Button.Background>
                <ImageBrush ImageSource="Image/1329666144_button_cancel.png" Stretch="UniformToFill"/>
            </Button.Background>
        </Button>
            </Grid>
</Popup> 
```

现在我使用文本框和按钮在 wpf 中创建新页面，并将此页面设置为弹出框显示如下：-

```
popupframe.Content=new SessionObjection(); 
```

现在我想用页面按钮关闭弹出窗口。我怎样做...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T12:43:04.727

您可以通过将[IsOpen](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.isopen.aspx)属性设置为 来关闭弹出窗口`false`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T12:41:59.440

你可以试试

```
private void btnClosePopup_Click(object sender, RoutedEventArgs e)
        {
            popup.IsOpen = false;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T07:11:01.617

如果您想在 XAML 代码中解决它，这是一个可行的解决方案（将关闭按钮放在弹出窗口内）：

```
 <Button Name="CloseThisPopUp" VerticalAlignment="Top" HorizontalAlignment="Right" Content="X">
                                        <Button.Triggers>
                                            <EventTrigger RoutedEvent="Button.Click">
                                                <EventTrigger.Actions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <BooleanAnimationUsingKeyFrames Storyboard.TargetName="CloseThisPopUp" Storyboard.TargetProperty="IsOpen">
                                                                <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="False" />
                                                            </BooleanAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </EventTrigger.Actions>
                                            </EventTrigger>
                                        </Button.Triggers>
                                    </Button> 
```

您也可以使用此代码打开一个弹出窗口，只需将 IsOpen 属性更改为“True”。

# java - volatile int 比 AtomicInteger 快

> ID：12018644
> 
> 赞同：5
> 
> 时间：2012-08-18T12:39:33.443
> 
> 标签：java

我目前正在做一个示例练习，我发现一个奇怪的观察结果，如果我用 volatile 替换 AutomicInteger 程序运行得更快。注意：我只做读取操作。

代码：

```
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.atomic.AtomicInteger;

public class Main {

AtomicInteger integer  = new AtomicInteger(100000000);
// volatile int integer= 100000000;

public static void main(String[] args) {
// We will store the threads so that we can check if they are done
List<Thread> threads = new ArrayList<Thread>();
 long start = System.currentTimeMillis();
 Main main = new Main();
// We will create 500 threads

for (int i = 0; i < 500; i++) {
  Runnable task = new MyRunnable(main.integer);
  Thread worker = new Thread(task);
  // We can set the name of the thread
  worker.setName(String.valueOf(i));
  // Start the thread, never call method run() direct
  worker.start();
  // Remember the thread for later usage
  threads.add(worker);
}
int running = 0;
do {
  running = 0;
  for (Thread thread : threads) {
    if (thread.isAlive()) {
      running++;
    }
  }
  System.out.println("We have " + running + " running threads. ");
} while (running > 0);

System.out.println("Total Time Required :" +(System.currentTimeMillis()- start));
}
} 
```

MyRunnable 类：

```
 import java.util.concurrent.atomic.AtomicInteger;

public class MyRunnable implements Runnable {
private final AtomicInteger countUntil;

MyRunnable(AtomicInteger countUntil) {
    this.countUntil = countUntil;
}

@Override
public void run() {
    long sum = 0;
    for (long i = 1; i < countUntil.intValue(); i++) {
        sum += i;
    }
    System.out.println(sum);
}
} 
```

该程序在我的机器上使用 AutomicInteger 运行所需的时间。

> 所需总时间：102169
> 
> 所需总时间：90375

该程序在我的机器上使用 volatile 运行所需的时间

> 所需总时间：66760
> 
> 所需总时间：71773

这是否意味着 volatile 在读取操作方面也比 AutomicInteger 更快？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T12:42:05.727

`AtomicInteger`在阅读上下文中基本上是一个薄包装`volatile int`：

```
private volatile int value;

public final int get() {
    return value;
}

public int intValue() {
    return get();
} 
```

不要期望包装器比单独使用的包装器值更快。它只能与 JVM 使用的if 内联*一样快。*`volatile int`

* * *

并提示：如果你“*只做读取操作*”，这会更快：

```
static final int integer= 100000000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T12:41:16.600

这个问题取决于特定的 JVM、硬件和操作系统，所以唯一可能的答案是“也许”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-19T05:33:32.847

> volatile int 比 AtomicInteger 快

原子访问和更新的记忆效应通常遵循 volatile 的规则，如Java™ 语言规范[第 17.4 节所述。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4)以下是 volatile int 与 Atomic 类型相比的缺点。

*   get 具有读取 volatile 变量的记忆效应。

*   set 具有写入（分配）易失性变量的记忆效应。

*   lazySet 具有写入（分配）易失性变量的记忆效应，除了它允许对后续（但不是先前）内存操作进行重新排序，这些操作本身不会对普通的非易失性写入施加重新排序约束。在其他使用上下文中，lazySet 可能在清空时应用，为了垃圾收集，一个永远不会再次访问的引用。

*   weakCompareAndSet 以原子方式读取和有条件地写入变量，但不会创建任何发生前的顺序，因此对于除weakCompareAndSet 的目标之外的任何变量的先前或后续读取和写入不提供任何保证。

*   compareAndSet 和所有其他读取和更新操作（例如 getAndIncrement）具有读取和写入 volatile 变量的记忆效应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T12:42:33.200

潜在的 volatile int 比 AtomicInteger 快，如果很少有应用程序会注意到这一点。尽管如此，AtomicInteger 提供了更广泛的潜在用途。

# android - Jquery 移动应用程序奇怪的行为

> ID：12018646
> 
> 赞同：8
> 
> 时间：2012-08-18T12:39:54.343
> 
> 标签：android, jquery, jquery-mobile, jquery-plugins, cordova

我创建了一个应用程序，其中包含几个按钮到主页单击其中一个按钮我的应用程序重定向到包含 JQM 表单、JQM 日历、文本字段、按钮和数据库等的某个视图。

我的疑问是，当我在 android 设备上测试我的应用程序时，应用程序的运行速度有点慢，即使我没有使用任何图像或任何可以包含更多空间的数据。这是我的第一个查询，第二个查询是，当我在那个时候将我的应用程序测试到 android 平板电脑时，表单页面出现了一段时间，然后它突然自动重定向回主页，而同样的功能也适用于 android 手机。

为什么会出现这个奇怪的问题？

如果有人可以指导我，那将是我的荣幸

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T22:44:08.787

很难对性能缓慢和重定向问题做出假设。下面你可以找到我认为影响 HTML5、CSS3、JavaScript 组成的移动应用程序性能的一些方面，在分析、设计和开发阶段应该考虑到这些方面。

**基于大小的实现方法**

在开发小型移动应用程序时，建议使用使用内部 AJAX 页面链接的单个 HTML 页面。对于较大的移动应用程序，建议使用具有内部 AJAX 链接的不同 HTML 页面的方法。尝试创建可重用的页面模板。

**页面转换**

如[jQM 1.1.1 Docs](http://jquerymobile.com/demos/1.1.1/docs/pages/page-transitions.html)中所述，默认情况下，除淡入淡出之外的所有转换都需要 3D 转换支持。缺少 3D 支持的设备将退回到淡入淡出转换，无论指定的转换如何。jQM 这样做是为了主动将 Android 2.x 等性能不佳的平台排除在高级转换之外，并确保它们仍然拥有流畅的体验。请注意，有些平台（如 Android 3.0）在技术上支持 3D 变换，但动画性能仍然很差，因此这并不能保证每个浏览器都 100% 无闪烁。在考虑上述情况后决定您将使用的过渡类型。

**缩小 JS 和 CSS 文件**

每个页面都应该尽可能的轻量级。缩小的目标是保持代码的操作质量，同时减少其整体字节占用。WEB 上有很多可用的工具，例如[YUI Compressor](http://developer.yahoo.com/yui/compressor/)、[Minify](http://code.google.com/p/minify/)等等。此外还有[JLint](http://www.jslint.com/)等工具，用于检查 JavaScript 源代码是否符合编码规则。[JLint](http://www.jslint.com/)是一个代码质量工具，用于检查 JavaScript 代码中的问题。报告的问题不一定是语法错误，但可能是结构问题。请注意，JLint 并不能证明您的代码是正确的。将其视为一种帮助工具。还有一些用于执行 CSS 优化的工具。优化可帮助您获得更小的 CSS 文件大小和更好的编写代码。您可以在 WEB 上找到很多可用的 CSS 优化器，例如[CleanCSS](http://www.cleancss.com/index.php)和[CSSTidy](http://csstidy.sourceforge.net/)。

**组件限制**

建议将 HTML 页面限制为 25kb，以便为大多数移动 Web 浏览器获得最佳缓存优势。缓存限制因操作系统版本而异。例如，Android 2.1 的缓存限制约为 2Mb。

**HTML5 和 CSS3**

尝试创建易于阅读、扩展和可重用的代码。充分利用 HTML5 和 CSS3 的使用非常重要。HTML5 DocType 声明 ( `<!DOCTYPE html>`) 应该是 HTML5 文档中 html 标记之前的第一件事。它是对 Web 浏览器的指示，说明页面是用什么版本的 HTML 编写的。

**使用[W3C mobileOK 检查器](http://validator.w3.org/mobile/)**

[W3C mobileOK Checker](http://validator.w3.org/mobile/)是 W3C 的一项免费服务，可帮助检查 Web 文档的移动友好程度，特别是断言 Web 文档是否是 mobileOK 。一个网页在通过所有测试时是可移动的。这些测试在 mobileOK [Basic Tests 1.0 规范中定义](http://www.w3.org/TR/mobile-bp/). 要理解为什么检查 Web 文档的移动友好性真的很重要，可能有必要强调关于所谓的移动世界的几点。与普通的台式电脑相比，移动设备乍一看可能会被认为是有限的：屏幕尺寸更小、处理能力更小、内存更小、没有鼠标等等。与固定数据连接相比，移动网络可能很慢，并且通常具有更高的延迟。与坐在电脑前的用户相比，忙碌的用户时间有限，容易分心。除了这些限制之外，移动世界是高度分散的：许多不同的设备，每个设备都定义了一组独特的支持功能。

**考虑不同屏幕尺寸的外观**

在针对不同的屏幕尺寸时，应考虑屏幕密度和视口尺寸以及网页的比例。视口元数据可用于定义视口大小，其中视口是绘制页面的容器区域。视口比例定义了应用于网页的缩放级别。target-densitydpi 视口属性和 CSS、JS 技术可用于更改网页的目标屏幕密度。网上有很多关于不同屏幕尺寸外观的文章。

**识别具有潜在延迟的流**

[PageSpeed Firefox/Chrome 扩展](https://developers.google.com/speed/pagespeed/)可用于检查页面速度。当您使用 Page Speed 分析网页时，它会评估该网页是否符合许多不同的规则。这些规则是您可以在 Web 开发的任何阶段应用的一般前端最佳实践。该扩展提供了有关如何最好地实施规则并将其纳入开发过程的具体提示和建议。

我希望这有帮助。

# javascript - 创建一个可以包含 html 标记的文本字段

> ID：12018650
> 
> 赞同：0
> 
> 时间：2012-08-18T12:40:32.840
> 
> 标签：javascript, html, forms

我想知道如何创建类似于文本字段的内容，但可以在其中包含 html 元素。例如，类似于 Stackoverflow 在其“提问”页面上用于标签的内容。这可以使用特定的插件/库来完成，还是需要从头开始创建？

我见过一些使用“contenteditable”属性的解决方案，但我担心跨浏览器的兼容性。事实上，Stackoverflow 示例似乎没有使用它。我尝试搜索有关如何执行此操作的信息，但没有找到任何信息。如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:45:25.637

You don't need to create it from scratch. Here is the one I use: [TinyMCE](http://www.tinymce.com/tryit/full.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:54:33.850

您可能还会发现[这](https://stackoverflow.com/questions/1950018/how-do-online-rich-text-editors-work#answer-1950040)很有用。但你不需要制作一个新的。有很多可用的开源选项。

# ios - 如何将 UIDatePicker 的日期秒值设置为 00？

> ID：12018651
> 
> 赞同：9
> 
> 时间：2012-08-18T12:40:44.423
> 
> 标签：ios, objective-c, cocoa-touch, nsdate, uidatepicker

如何始终获取日期的秒值“ `00`” `UIDatePicker`？

现在我得到了这种格式的价值`5:30:45`，我需要得到这种格式的时间`5:30:00`。

如何做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-18T13:50:11.253

我使用了这段代码，它工作正常。

```
NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *dateComponents = [calendar components:( NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit ) fromDate:datePicker.date];
    NSDateComponents *timeComponents = [calendar components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit ) fromDate:datePicker.date];

    [dateComponents setHour:[timeComponents hour]];
    [dateComponents setMinute:[timeComponents minute]];
    [dateComponents setSecond:0.0];

    NSDate *newDate = [calendar dateFromComponents:dateComponents]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-15T16:28:50.607

您不必处理 NSDateComponents 或将日期转换为字符串并返回。您只需告诉日历将日期设置为分钟的开头（小时/日期/周/...）

```
NSDate *date = self.datePicker.date;
[[NSCalendar currentCalendar] rangeOfUnit:NSCalendarUnitMinute
                                startDate:&date
                                 interval:NULL
                                  forDate:date];
//date now is set to the beginning of the minute -> seconds == 00 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-18T12:50:16.020

```
NSDate *currentDate = [datePicker date];    
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"ss"];
[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
NSString *Str_Seccond=[dateFormatter stringFromDate:currentDate]; 
```

在 Str_Seccond 字符串中，您可以获得字符串格式的秒数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-09T10:00:15.133

斯威夫特 4 版本：

```
 let calendar = NSCalendar.current
 let components = calendar.dateComponents([.year, .month, .day,
                                           .hour, .minute], 
                                           from: yourDate)
 let date = calendar.date(from: components) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-18T12:50:37.203

```
NSDateFormatter *dateformatter = [[NSDateFormatter alloc] init];
[dateformatter setDateFormat:@"ss"];
NSLog(@"%@",[dateformatter stringFromDate:[datePicker date]]); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-17T08:33:53.857

在斯威夫特：

```
let calendar = NSCalendar.currentCalendar()
let components = calendar.components([.Year, .Month, .Day, .Hour, .Minute], fromDate: datePicker.date)
let date = calendar.dateFromComponents(components) 
```

# iphone - 将 UITabBarController 添加到 UIViewController

> ID：12018652
> 
> 赞同：3
> 
> 时间：2012-08-18T12:41:00.813
> 
> 标签：iphone, objective-c, ios, xcode, uitabbarcontroller

我的应用程序当前有一个`UINavigationController`，我想`UITabBarController`在单击按钮时的某个时间点推送一个。我正在尝试在 Interface Builder 上创建它（而不是以编程方式）。

所有在线教程都展示了如何创建一个基于标签栏的应用程序，其中包括将 a`UITabBarController`拖入`MainWindow.xib`其中，这显然不是我想要的。

我所做的是创建一个`UIViewController`，它的 nib 文件，拖动一个`UITabBarController`. 现在将其推`UIViewController`送到导航控制器将显示一个空视图（它的空视图）。删除视图控制器中的视图将使应用程序崩溃。如何告诉`UIViewController`加载 a`UITabBarController`而不是它自己的视图？

*对于那些对我投反对票的人：至少提供评论是体面的。这个问题不是一个糟糕的问题。问题是询问有关如何以非正统方式使用 UITabBarController 的建议。我尝试了大多数建议，但它们不起作用。如果您投反对票，请至少写一条评论。*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T12:52:32.230

你可以看到[这可能对你有帮助](http://ioscoderef.blogspot.com/2012/08/adding-uitabbarcontroller-in.html)

因为这是您希望您的应用程序的样子： - 导航控制器 - 根视图控制器 - 其他视图控制器 - 选项卡栏控制器 - 选项卡下的第一个 VC - 选项卡下的第二个 VC - 选项卡下的第三个 VC - 更多视图控制器

在你想要 pushViewController 到 UITabBarController 的视图控制器中使用这个

```
//create a UITabBarController object
UITabBarController *tabBarController=[[UITabBarController alloc]init];

//FirstViewController and SecondViewController are the view controllers you want on your UITabBarController (Number of view controllers can be according to your need)
FirstViewController *firstViewController=[[FirstViewController alloc]initWithNibName:@"FirstViewController" bundle:nil];
SecondViewController *secondViewController=[[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];

//adding view controllers to your tabBarController bundling them in an array
tabBarController.viewControllers=[NSArray arrayWithObjects:firstViewController,secondViewController, nil];

//navigating to the UITabBarController that you created
[self.navigationController pushViewController:tabBarController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:09:04.740

本[教程](http://www.bdunagan.com/2009/12/22/uitabbarcontroller-from-a-xib/)可能会有所帮助。它带有一个[示例代码](https://github.com/bdunagan/codebucket)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:09:24.040

嗨，只需在应用程序委托中制作导航控制器和 tabBar 控制器。最初将 navController 添加到您的根视图..

```
[self.window addSubview:navigationController.view]; 
```

并且每当您想添加标签栏时，请删除 navController 并添加 tabBarController。

```
-(void)addTabBarController
{
    AppDelegate *appdelegte =(AppDelegate*)[[UIApplication sharedApplication]delegate];

    [[[appdelegte navigationController] view]removeFromSuperview];

    [[appdelegte window]addSubview:[[appdelegte tabcontroller]view]];

    [[appdelegte tabcontroller]setSelectedIndex:0];
} 
```

有问题再问我..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T07:24:15.880

获取标签栏控制器的 uiview 意味着创建一个带有标签的界面构建器，并将该标签栏 uivew 添加到您想要标签栏的类中

例如，在该 uiview 中采用 3 个标签的标签栏 uiview 在界面生成器中采用三个按钮

对于该类的每个导航都应添加此 uiview 类

```
-(IBAction)firt_button_pressed:(id)sender
{

}

-(IBAction)second_button_pressed:(id)sender
{

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T13:04:57.910

我记得我做过类似的事情......

`UITableViewController`如果您要使用`UINavigationController`“推动”它，我必须创建一个自定义来执行此操作。

仅在界面生成器中执行此操作可能有点棘手，我已经有一段时间没有使用它了，我确实记得正确进行操作有点像噩梦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T05:17:40.077

在 YourView 控制器中制作 tabBarController 的 IBOutlet

在 .h 文件中

```
#import <UIKit/UIKit.h>

@interface YourView : UIViewController
{
    IBOutlet UITabBarController *tabBarController;
}
-(IBAction)loadTabBar:(id)sender;
@end 
```

并在 .m 文件中

```
#import "YourView.h"
#import "FirstViewController.h"
#import "SecondViewController.h"

@implementation YourView

-(IBAction)loadTabBar:(id)sender
{
    FirstViewController *firstView = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    SecondViewController *secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    tabBarController = [[UITabBarController alloc] init];
    tabBarController.viewControllers = [NSArray arrayWithObjects:firstView, secondView, nil];
    [self.navigationController pushViewController:tabBarController animated:YES];
}
@end 
```

tabBarController`IBOutlet`必须连接到`UITabBarController`.xib 文件上的那个。还有`UITabBarController`两个名为`FirstViewController`,的视图控制器`SecondViewController`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T23:59:01.810

问题是，正如我*相信*我在某处提到的那样，XIB 没有与之连接的 UIView。当在 XIB 文件中删除 UIView 并添加 UITabBarController 时，`view`必须将 XIB 的属性连接到`UITabBarController`的视图。我连接它并且它工作。这就是我获得 SIGTRAP 的原因。

# c# - 如何处理视图中的多对多关系，以便实体框架 4.3 自动保留该关系？

> ID：12018653
> 
> 赞同：1
> 
> 时间：2012-08-18T12:41:05.867
> 
> 标签：c#, entity-framework, asp.net-mvc-4, entity-framework-4.3

假设我声明了三个实体：

## 产品

```
public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }

    public int StoreId { get; set; }
    public Store Store { get; set; }

    public List<Category> Categories { get; set; }
} 
```

## 店铺

```
public class Store
{
    public int Id { get; set; }
    public string Name { get; set; }

    public List<Product> Products { get; set; }
} 
```

## 类别

```
public class Category
{
    public int Id { get; set; }
    public string Name { get; set; }

    public List<Product> Products { get; set; }
} 
```

和之间是一对多的关系，`Store`和之间`Product`是多对多的关系。`Product``Category`

我正在尝试创建一个新的`Product`. 在控制器中，我声明：

```
public ViewResult Create()
{
    ViewBag.StoreId = new SelectList(db.Stores, "Id", "Name");
    return View();
}

[HttpPost]
public ViewResult Create(Product product)
{
    db.Products.Add(product);
    db.SaveChanges();
    return RedirectToAction("Index");
} 
```

然后在视图中，我只需添加以下内容：

```
@Html.DropDownList("StoreId") 
```

并且所有商店的下拉菜单都会正确地向用户显示。在 POST 创建时，Entity Framework 足够聪明，可以`Product.StoreId`在保存产品时忽略它，而是使用它将产品与数据库中的现有商店相关联。这一切都非常有效，而且它的简单程度几乎是神奇的。

我的问题是，是否也可以对多对多关系应用相同的开箱即用行为？我尝试创建一个新`Product.CategoryIds`列表，然后使用相同的模式：

## 控制器

```
ViewBag.CategoryIds = new SelectList(db.Categories, "Id", "Name"); 
```

## 看法

```
@Html.ListBox("CategoryIds") 
```

这将在多选列表框中正确显示类别。但是，当我这次保存产品时，类别不会自动与产品关联，并且产品最终没有任何类别。

有谁知道如何使它正常工作？

# jquery - 使用 jQuery 在 div 中捕获两个不同的单击事件

> ID：12018655
> 
> 赞同：2
> 
> 时间：2012-08-18T12:41:23.783
> 
> 标签：jquery

我在 div 中放置了一个图像和一个复选框。其中有两种不同的点击事件。一个是：

1.  **当我单击复选框时，应选中（选中）复选框**，另一个是
2.  **当我单击图像时，应该会出现一个灯箱。**

发生了什么；当我单击图像时，会出现灯箱，但是当我单击复选框时，灯箱会再次出现。

```
<div class="divWrap">
    <div class="imageWrap">
        <img src="abc.jpg">
        <div id="checkbox">
                <input type="checkbox" value="None" id="checkbox1" name="check1" />
        </div>
    </div>
</div> 
```

我无法在 jQuery 中正确编码。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:48:02.743

```
$(".imageWrap img").click(function() {
    alert("image clicked");
});

$(".imageWrap checkbox").click(function() {
    alert("checkbox clicked");
}); 
```

* * *

```
$(".imageWrap").click(function(event) {
    var $target = $(event.target);
    if ( $target.is("img") ) {
        alert("image clicked");
    }
    else if ( $target.is("checkbox") ) {
        alert("checkbox clicked");
    }
}); 
```

# java - Java 包访问很奇怪。这是故意的吗？

> ID：12018656
> 
> 赞同：0
> 
> 时间：2012-08-18T12:41:35.230
> 
> 标签：java, compilation, package

我做了一个实验，我扩展了一个 java.lang 包类并且无法访问包方法或字段（没有公共或受保护的方法或字段）。好的。

然后我将我的扩展放入源根目录的“java.lang”中，然后再次尝试并编译。所以包访问限制只是装饰性的（你需要把它和其他类放在同一个地方，因此用户可以通过导入 java.lang 找到它），它们实际上也可能是公共的，因为没有实际的较弱这里的访问级别？（受保护至少确保它是一个扩展覆盖）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:25:18.807

Java 中存在包的概念，以在类成员的可访问性方面提供额外的粒度级别。由于 Java 中类加载机制的灵活性，当您在与此类 C 相同的包中声明自己的类时，它们不会限制您访问类 C 的包级成员和属性。

一些规范强制执行更严格的访问策略，例如 OSGI。OSGI 带有额外的*bundle*概念，Java 语言本身没有。Bundles 是一组打包在单个 jar 中的类。它们在清单文件中声明它们*导出*的类和包，以及其他包可以访问的包。那些未导出的包和类严格不能从其他包中访问。

更重要的是，即使导出了 C 类，您也无法从另一个包访问包的 C 类的包级方法和属性。OSGI 类加载器不允许您从已经由另一个包“拥有”的包中加载类。

如果您对有关可访问性和打包的这些问题感兴趣，请查看[Jigsaw 项目](http://openjdk.java.net/projects/jigsaw/)，该项目旨在重新设计 Java 中的模块化，并且应该在 Java SE 的下一个版本（Java SE 8，虽然我不确定它没有被推迟）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T12:50:59.810

如果你把你的代码放到一个名为 java.lang 的包中，这意味着你的代码属于那个包，所以你确实可以访问原始 java.lang 中描述的“包”方法。

想想看：在一个项目中，你有“包”访问级别的方法，你想对它们进行单元测试。您可以在同一个包中的类中执行此操作，这意味着完全相同的目录中，或者您可以有 2 个单独的目录：src 和 test，具有相同的包命名。这样，单元测试可以在与代码相同的包中定义，但它们位于磁盘上的不同位置。

# jsp - 将 jsp 链接到 servlet 并再次链接到 servlet 显示了一些问题

> ID：12018660
> 
> 赞同：0
> 
> 时间：2012-08-18T12:42:01.047
> 
> 标签：jsp, servlets

我编写了一个链接到 servlet 并再次链接到 servlet 的 jsp 代码。代码，mahi1.jsp

```
<form action="mahi5" method="post">
<center>
    <table>
        <tr>
            <td>
                <h1><center> SIGN IN </center></h1>
    </td>
        </tr>
        <tr>
            <td>
                Email:<nbsp>   <nbsp>
            </td>
            <td>
                <input type="text" name="user" value="" size="20" />
            </td>
        </tr>          
        <tr>
            <td>Password:<nbsp>  <nbsp></td>
                    <td>
                        <input type="password" name="pass" value="" size="20" />
                    </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="submit" value="submit" />
                        </td>
                    </tr>
        </table>  

</center>
</form> 
```

servlet-mahi5.java

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
                response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
            String emailid=request.getParameter("user");
            String password=request.getParameter("pass");
            out.println("<a href=\"a2?m="+emailid+"\">");
            out.println("Send information to someone</a>");
} 
```

jsp-mahi6.jsp

```
<%
            String e1=(String)request.getParameter("emailid");
            if(e1!=null)
                               {
            %>
            <br>
            Enter the email id of the user you wanna send info to
            <input type="text" name="user1" value="" size="15"/>
            <input type="hidden" name="u1" value=<%=u1%> />
            <input type="hidden" name="e1" value=<%=e1%> />
            <input type="submit" value="proceed"/>
            <%
                              }
            %> 
```

当我单击第一个 jsp 页面中的提交按钮时，它显示一个空白页面。网址显示它的 mahi5 谁能帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:23:52.823

更改 Servlet 的服务方法中的代码。

```
PrintWriter out = response.getWriter();
String emailid=request.getParameter("user");
out.println("<a href=\"mahi6.jsp?emailid=" + emailid + "\">Send information to someone</a>"); 
```

# java - 制作Java应用程序的“内存转储”？

> ID：12018675
> 
> 赞同：14
> 
> 时间：2012-08-18T12:43:59.097
> 
> 标签：java, memory, javafx-2

我有 Java 应用程序，不幸的是，它在一段时间后开始消耗大量内存。更复杂的是，它不仅是 Java 应用程序，也是 JavaFX 2 应用程序。

我怀疑存在一些内存泄漏，甚至可能在底层 JavaFX 调用和本机库中。

理想的解决方案是在某个时刻（连同它们的内存使用情况）获取所有 java 对象的转储，然后分析该转储。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-01-24T11:40:27.700

用于`jmap -heap:format=b <process-id>`创建堆的二进制转储，然后可以将其加载到多个工具中 - 我最喜欢的是“Eclipse Memory Analyzer”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-18T12:49:49.627

有很多方法可以获得堆转储，从 jmap 之类的简单工具到 JVisualVM 之类的更花哨的工具，甚至 JProfiler 之类的商业工具。但是，正确解释这些转储可能会很棘手，因此您可能希望准确地发布您正在寻找的内容。正在寻找内存泄漏，或者您是否有兴趣了解您的应用程序的总体感觉？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-18T12:50:00.330

您可以使用[jvisualvm](http://visualvm.java.net/)。它具有查看实时内存并从中获取转储的插件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-21T10:08:11.117

在研究获取“此时此刻的 JVM 状态”的方法时，我刚刚重新发现[了这篇文章](http://blogs.atlassian.com/2013/03/so-you-want-your-jvms-heap/)`jmap`——在我拉取的堆大小大约是 MBean 报告的大小的一半之后。为了完整起见，我将添加它：

```
su $JVM_OWNER -c "gcore -o /tmp/jvm.core $YOUR_JVM_PID"
su $JVM_OWNER -c "jmap -dump:format=b,file=jvm.hprof /usr/bin/java /tmp/jvm.core" 
```

需要安装 gdb（用于`gcore`）和 JDK 安装（用于 jmap）。另请注意，您可能需要调整`/usr/bin/java`用于该进程的 JVM 的路径。

# screen-scraping - 哪种编程语言单页网页抓取？

> ID：12018678
> 
> 赞同：0
> 
> 时间：2012-08-18T12:44:25.467
> 
> 标签：screen-scraping

我想为 Windows 构建（雇人构建）一个程序。该程序必须在本地数据库中的命令（在右键单击或键盘快捷键下）保存单个网页的一些数据，例如网站名称、产品名称和产品价格。我最好选择哪种编程语言？（负担得起的）程序员的数量以及将来添加一些额外功能的可能性也很重要。例如，我发现这项工作使用了 python、Java、Ruby 和 XPath。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:25:35.273

Java、python 和 ruby​​ 都是不错的选择。Xpath 不是一种编程语言，它是一种查询规范，允许您从 xml 或 html 中提取所需的数据。无论您选择哪种语言，都需要使用 xpath（所有 3 种语言都有可用的 xpath 库）。

*   Python 似乎是最受欢迎的，但它的库的未来也是最不确定的（还没有人费心将机械化移植到 python3，漂亮的汤已经死了然后又回来了）。
*   Java 的最大优势可能是它已经安装在大多数 Windows 机器上，但它也是这三种语言中唯一一种不是脚本语言的，因此开发时间可能会更长。
*   Ruby 是一个不错的选择，它拥有出色的抓取库和大量使用它的程序员。

# javascript - 如何在 JavaScript 中更改 beforeunload 事件

> ID：12018679
> 
> 赞同：0
> 
> 时间：2012-08-18T12:44:32.403
> 
> 标签：javascript, onbeforeunload

在某人决定离开页面之前调用 ajax 函数是可能的。我的意思是我可以询问用户是想离开还是留下。但我不知道当用户单击“是离开页面”按钮时如何改变行为。

我有这个代码工作..

```
<head>
<script type="text/javascript">
    function catchExit() {
        return "All your data is going to be lost. Are you sure??";
    }
</script>
</head>
<body onbeforeunload="return catchExit()">
<p>
    Dont leave the page.
</p>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:52:34.960

这是使用的另一种方法[`confirm`](https://developer.mozilla.org/en-US/docs/DOM/window.confirm)：

```
function catchExit(){
  var exit = confirm("Are you sure?");
  if (exit){
  }
} 
```

但请记住，AJAX 不能停止线程。这意味着不能保证调用：

1.  成功了
2.  是成功的
3.  返回了一个结果

该窗口将在 AJAX 完成之前显示提示和/或退出。为了更好地说明它：

```
function catchExit(){
  $.ajax({
    success: function(){
      // this is an entirely new thread and returning a result
      // has ZERO effect on the original catchExit function
      // (And chances are it's already executed and is long gone)
    }
  });
  // this (99.99% of the time) will be called long before
  // 'success' above is called, therefore making 'success' and its
  // outcome moot.
  return "There are unsaved changes, are you sure you want to exit?";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:17:25.603

实际上，我找到了一种让我的`$.ajax()`电话正常工作的方法。将`async`参数设置为`false`适用于 firefox、chrome、iexplorer 和 safari。它只是在歌剧中不起作用。

# android - Android TLS connection and self signed certificate

> ID：12018681
> 
> 赞同：17
> 
> 时间：2012-08-18T12:45:02.137
> 
> 标签：android, ssl

I'm trying to connect to a node.js based TLS server from my Android app. Naturally it fails becouse I'm using a self-signed certificate.

Is there anyway I can just add the certificate to my app and have Android trust it somehow? Note, I'm not using HTTPS, this is a TLS over TCP connection.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T23:26:55.980

经过大量阅读后，我想出了一个答案。

一个很好的指南在这里： http: [//nelenkov.blogspot.no/2011/12/using-custom-certificate-trust-store-on.html](http://nelenkov.blogspot.no/2011/12/using-custom-certificate-trust-store-on.html)

现在，由于我没有使用 HTTPS，我不得不想出一个稍微不同的方法来使用新的密钥库获得一个干净的 SSL 套接字：

```
KeyStore store = KeyStore.getInstance("BKS");
InputStream truststore = mainActivity.getResources().openRawResource(R.raw.trust);
store.load(truststore, "PASSWORD".toCharArray());
TrustManagerFactory tmf = TrustManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
tmf.init(store);
SSLContext context = SSLContext.getInstance("TLS");
context.init(null, tmf.getTrustManagers(), new SecureRandom());
Socket socket = context.getSocketFactory().createSocket(ip, port); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T15:02:16.907

不建议向您的应用程序添加证书。您将在更新证书时遇到问题。

你看过：

[Android 上的自签名 SSL 接受](https://stackoverflow.com/questions/1217141/self-signed-ssl-acceptance-android)

[带有 Android 和自签名服务器证书的 HTTPS GET (SSL)](https://stackoverflow.com/questions/3761737/https-get-ssl-with-android-and-self-signed-server-certificate)
？

# app-config - How to modify configuration file for another C# assembly?

> ID：12018685
> 
> 赞同：2
> 
> 时间：2012-08-18T12:45:31.950
> 
> 标签：app-config, configuration-files, .net-assembly, settings

I have a .NET assembly *A* with `app.config` settings file generated by framework. Actually, it is called `A.dll.config`. I want to access and modify this settings file from another .NET assembly *B*. The problem is, the `A.dll.config` file for *A* is located somewhere in the current user profile directory, as it should be, and I don't know where to find it. I know only where the assembly *A* is located.

So, how can I locate the `app.config` file given the path to the assembly?

The other question is, what if the assembly *A* was not loaded at the first time I'm trying to access its configuration file from the *B*? I assume, the configuration file is not generated at this time. Is it possible to manually load the *A* to force it to generate appropriate configuration file?

# python - Gtk 标签未在计时器脚本中更新

> ID：12018688
> 
> 赞同：1
> 
> 时间：2012-08-18T12:45:57.640
> 
> 标签：python, gtk, pygobject

我正在编写我的第一个 Python 和 GTK 脚本。我正在尝试做一个计数器/计时器。我遇到的问题是，虽然日志记录函数每秒返回正确的值，但`gtk.label`没有更新。我究竟做错了什么？

```
def startTimer(self, buttonStart):
    self.imgTimer.set_from_stock(Gtk.STOCK_YES, 2)
    self.runTimer(120)

def runTimer(self, timeout):

    for i in reversed(range(0,timeout)):

        logging.debug(i) #returns values 
        self.labelTimer.set_text(i) #doesn't do anything

        time.sleep(1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T13:08:57.837

您没有给 GTK+ 绘制更新标签的机会。您应该使用线程（请参阅[PyGTK FAQ](http://faq.pygtk.org/index.py?req=show&file=faq20.001.htp)），或者类似

```
while gtk.events_pending ():
    gtk.main_iteration () 
```

更新标签后。

# php - GeoIP installed / loaded, but not returning records

> ID：12018691
> 
> 赞同：1
> 
> 时间：2012-08-18T12:46:34.593
> 
> 标签：php, geolocation, geoip, php-extension

Attempting to geolocate country and region via GeoIP Module / MaxMind DB.

Double checked it's loaded via phpinfo():

```
 geoip
 geoip support  enabled
 geoip extension version    1.0.8
 geoip library version  1004005 
```

Double checked the DB:

```
 <?
    $db = geoip_database_info();
    print_r($db);
    ?> 
```

Returns:

```
GEO-106FREE 20090201 Build 1 Copyright (c) 2007 MaxMind LLC All Rights Reserved 
```

But when I try this:

```
<?
$record = geoip_record_by_name("76.109.14.196");
if ($record) {
   print_r($record);
}
?> 
```

It turns up blank.

Is there a piece I'm missing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:54:07.977

数据库可能已过时。为什么不使用已正确更新的远程解决方案，例如[http://www.geoplugin.net/](http://www.geoplugin.net/)

简单示例

```
$xml = simplexml_load_file("http://www.geoplugin.net/xml.gp?ip=76.109.14.196");
echo $xml->geoplugin_countryName ; 
```

输出

```
 United States 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T01:27:09.987

可能未安装用于位置查找的特定数据库。尝试`geoip_country_code_by_name`，它应该工作。

# git - Heroku - make changes on the fly

> ID：12018692
> 
> 赞同：0
> 
> 时间：2012-08-18T12:46:35.047
> 
> 标签：git, heroku

I was able to upload my play2 application to heroku.

I did the following.

```
$ git init
$ git add .
$ git commit -m "init"

$ heroku create --stack cedar
$ git push heroku master 
```

I want to make changes to my running application. I read though [https://devcenter.heroku.com/articles/git](https://devcenter.heroku.com/articles/git) but I still have problems.

How do I tell heroku/git that I made a change and I want to update my running application?

I've tried `$ git push heroku master` again, but it tells me everything is up to date, which is wrong. So I guess there should be a command to update the git repository?

I've never worked with git and it seems that the documentation on heroku is lacking of some information.

I hope you can clear things up for me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:52:23.863

在推送之前，您需要将更改提交到本地 Git 存储库：

```
git add app/FileYouChanged
git commit -m "message about your changes" 
```

然后你可以将你的 Git 仓库推送到 Heroku：

```
git push heroku master 
```

# android - Android/Maven：无法访问 XmlPullParser

> ID：12018698
> 
> 赞同：1
> 
> 时间：2012-08-18T12:47:31.173
> 
> 标签：android, maven

近两天我一直在尝试使用 Fragments 构建一个 Android 应用程序，并且我正在使用 Maven。如果我尝试构建我的应用程序 Maven 会给出以下错误：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Pontes Het Goese Lyceum 2.0
[INFO] ------------------------------------------------------------------------
[WARNING] The POM for com.google.android:android:jar:2.2.1 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ pontes ---
[INFO] Deleting C:\Users\Koen\Android\Apps\Pontes Het Goese Lyceum\target
[INFO] 
[INFO] --- android-maven-plugin:3.3.0:generate-sources (default-generate-sources) @ pontes ---
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] C:\android-sdk-windows\platform-tools\aapt.exe [package, -m, -J, C:\Users\Koen\Android\Apps\Pontes Het Goese Lyceum\target\generated-sources\r, -M, C:\Users\Koen\Android\Apps\Pontes Het Goese Lyceum\AndroidManifest.xml, -S, C:\Users\Koen\Android\Apps\Pontes Het Goese Lyceum\res, --auto-add-overlay, -A, C:\Users\Koen\Android\Apps\Pontes Het Goese Lyceum\assets, -I, C:\android-sdk-windows\platforms\android-8\android.jar]
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ pontes ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory C:\Users\Koen\Android\Apps\Pontes Het Goese Lyceum\src\main\resources
[INFO] skip non existing resourceDirectory C:\Users\Koen\Android\Apps\Pontes Het Goese Lyceum\target\generated-sources\extracted-dependencies\src\main\resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.5.1:compile (default-compile) @ pontes ---
[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!
[INFO] Compiling 11 source files to C:\Users\Koen\Android\Apps\Pontes Het Goese Lyceum\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] C:\Users\Koen\Android\Apps\Pontes Het Goese Lyceum\src\com\koenv\pontes\RoosterFragment.java:[13,24] error: cannot access XmlPullParser
[INFO] 1 error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5.928s
[INFO] Finished at: Sat Aug 18 14:36:21 CEST 2012
[INFO] Final Memory: 13M/247M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (default-compile) on project pontes: Compilation failure
[ERROR] C:\Users\Koen\Android\Apps\Pontes Het Goese Lyceum\src\com\koenv\pontes\RoosterFragment.java:[13,24] error: cannot access XmlPullParser
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

我正在使用以下 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.koenv</groupId>
    <artifactId>pontes</artifactId>
    <version>2.0</version>
    <packaging>apk</packaging>
    <name>Pontes Het Goese Lyceum</name>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>2.2.1</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>support-v4</artifactId>
            <version>r7</version>
        </dependency>

    </dependencies>
    <build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>src</sourceDirectory>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>3.3.0</version>
                    <extensions>true</extensions>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <configuration>
                    <sdk>
                        <!-- platform or api level (api level 4 = platform 1.6)-->
                        <platform>8</platform>
                    </sdk>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

而检测到错误的文件只是一个简单的Fragment：

```
package com.koenv.pontes;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class RoosterFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

            return inflater.inflate(R.layout.mijn_rooster, container, false);
        }
} 
```

我在做什么错，我在 Windows 上使用“maven clean install”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:03:52.667

我刚刚使用 Maven 的 -X 选项找到了答案。致命的线是：

```
[WARNING] The POM for com.google.android:android:jar:2.2.1 is invalid, transitive dependencies (if any) will not be available: 1 problem was encountered while building the effective model for com.google.android:android:2.2.1
[FATAL] Non-parseable POM C:\Users\Koen\.m2\repository\org\sonatype\oss\oss-parent\3\oss-parent-3.pom: entity reference names can not start with character '&' (position: START_TAG seen ...TagName(\'base\')[0], _bH = "http://forums.spout.org/";\n\t\t\tif (_b &&... @10:13)  @ C:\Users\Koen\.m2\repository\org\sonatype\oss\oss-parent\3\oss-parent-3.pom, line 10, column 13 
```

我删除了 .m2\repository\org\sonatype\oss\oss-parent\ 一切都恢复了，现在我可以使用 Maven 再次编译我的应用程序。

# vb.net - 使用 xdocument selectsinglenode 解析 tcx 文档

> ID：12018706
> 
> 赞同：1
> 
> 时间：2012-08-18T12:48:39.863
> 
> 标签：vb.net, xpath, xmldocument

我正在尝试解析与这篇文章中使用的类似的 TCX 文档：[Import TCX into R using XML package](https://stackoverflow.com/questions/8280437/import-tcx-into-r-using-xml-package)

只有我在尝试使用 XmlDocument.SelectNodes 和 SelectSingleNode 而不是 getNodeSet。带有 xmlns 的行如下所示：

```
<TrainingCenterDatabase xmlns="http://www.garmin.com/xmlschemas/TrainingCenterDatabase/v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.garmin.com/xmlschemas/TrainingCenterDatabase/v2 http://www.garmin.com/xmlschemas/TrainingCenterDatabasev2.xsd"> 
```

如果我删除 xmlns 并且只有 ，我可以毫无问题地解析它。

我的（vb.net）代码：

```
 Dim tcxXmlDocument As New System.Xml.XmlDocument()
    tcxXmlDocument.Load(tcxFile)
    Dim xmlnsManager = New System.Xml.XmlNamespaceManager(tcxXmlDocument.NameTable)

    Dim trackpoints As New List(Of Trackpoint)

    For Each tpXml As System.Xml.XmlNode In tcxXmlDocument.SelectNodes("//Trackpoint", xmlnsManager)
        Dim newTrackpoint As New Trackpoint

        With newTrackpoint
            .Time = tpXml.SelectSingleNode("Time").InnerText
            .LatitudeDegrees = tpXml.SelectSingleNode("Position/LatitudeDegrees").InnerText
            .LongitudeDegrees = tpXml.SelectSingleNode("Position/LongitudeDegrees").InnerText
            .HeartRateBpm = tpXml.SelectSingleNode("HeartRateBpm").InnerText
        End With

        trackpoints.Add(newTrackpoint)
    Next 
```

如何配置 XmlNamespaceManager 以便可以访问此类 tcx 文档中的节点？

谢谢，

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:13:21.520

**使用该[`XmlNamespaceManager.AddNamespace()`](http://msdn.microsoft.com/en-us/library/system.xml.xmlnamespacemanager.addnamespace.aspx)方法**将前缀（例如`"x"`）与命名空间相关联`"http://www.garmin.com/xmlschemas/TrainingCenterDatabase/v2"`。

**然后**在您的 XPath 表达式中，为每个元素名称加上`"x"`前缀。

**替换这个**：

```
//Trackpoint 
```

**与**：

```
//x:Trackpoint 
```

**替换这个**：

```
Time 
```

**与**：

```
x:Time 
```

**替换这个**：

```
Position/LatitudeDegrees 
```

**和：**

```
x:Position/x:LatitudeDegrees 
```

**替换这个**：

```
Position/LongitudeDegrees 
```

**与**：

```
x:Position/x:LongitudeDegrees 
```

**最后，替换这个**：

```
HeartRateBpm 
```

**与**：

```
x:HeartRateBpm 
```

# javascript - 使用 THREE.Frustum 计算近/远平面顶点

> ID：12018710
> 
> 赞同：7
> 
> 时间：2012-08-18T12:49:08.393
> 
> 标签：javascript, opengl-es, webgl, three.js

我需要一些帮助来处理 THREE.Frustum 对象。

我的问题：

我需要计算近/远平面顶点；我看过这些教程

1.  [http://www.lighthouse3d.com/tutorials/view-frustum-culling/view-frustums-shape/](http://www.lighthouse3d.com/tutorials/view-frustum-culling/view-frustums-shape/)
2.  [http://www.lighthouse3d.com/tutorials/view-frustum-culling/geometric-approach-extracting-the-planes/](http://www.lighthouse3d.com/tutorials/view-frustum-culling/geometric-approach-extracting-the-planes/)

我已经勾勒出了这个函数，它完全实现了（我希望如此）解释的过程（只是为了获得左上/右顶点，假设相机只能看左和右）：

```
 // Near Plane dimensions
        hNear = 2 * Math.tan(camera.fov / 2) * camera.near; // height
        wNear = hNear * camera.aspect; // width

        // Far Plane dimensions
        hFar = 2 * Math.tan(camera.fov / 2) * camera.far; // height
        wFar = hFar * camera.aspect; // width

getVertices : function() {
        var p = camera.position.clone();
        var l = getCurrentTarget(); // see below
        var u = new THREE.Vector3(0, 1, 0);

        var d = new THREE.Vector3();
        d.sub(l, p);
        d.normalize();

        var r = new THREE.Vector3();
        r.cross(u, d);
        r.normalize();

        // Near Plane center
        var dTmp = d.clone();
        var nc = new THREE.Vector3();
        nc.add(p, dTmp.multiplyScalar(camera.near));

        // Near Plane top-right and top-left vertices
        var uTmp = u.clone();
        var rTmp = r.clone();
        var ntr = new THREE.Vector3();
        ntr.add(nc, uTmp.multiplyScalar(hNear / 2));
        ntr.subSelf(rTmp.multiplyScalar(wNear / 2));

        uTmp.copy(u);
        rTmp.copy(r);
        var ntl = new THREE.Vector3();
        ntl.add(nc, uTmp.multiplyScalar(hNear / 2));
        ntl.addSelf(rTmp.multiplyScalar(wNear / 2));

        // Far Plane center
        dTmp.copy(d);
        var fc = new THREE.Vector3();
        fc.add(p, dTmp.multiplyScalar(camera.far));

        // Far Plane top-right and top-left vertices
        uTmp.copy(u);
        rTmp.copy(r);
        var ftr = new THREE.Vector3();
        ftr.add(fc, uTmp.multiplyScalar(hFar / 2));
        ftr.subSelf(rTmp.multiplyScalar(wFar / 2));

        uTmp.copy(u);
        rTmp.copy(r);
        var ftl = new THREE.Vector3();
        ftl.add(fc, uTmp.multiplyScalar(hFar / 2));
        ftl.addSelf(rTmp.multiplyScalar(wFar / 2));

getCurrentTarget : function() {
        var l = new THREE.Vector3(0, 0, -100);
        this.camera.updateMatrixWorld();
        this.camera.matrixWorld.multiplyVector3(l);
        return l;
    } 
```

这似乎有效，但是......

我的问题：

我可以使用 THREE.Frustum 对象以更优雅（也许更正确）的方式获得相同的结果吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T20:28:16.673

`Three.Frustum`并不能真正帮助你——它是一组平面。好消息是您的解决方案似乎是正确的，但有一种更简单的方法来考虑这一点。

近平面的右上角是相机空间中的一个点，具有以下坐标：

```
var ntr = new THREE.Vector3( wNear / 2, hNear / 2, -camera.near ); 
```

使用您对`wNear`and的定义`hNear`，这是正确的。

现在，确保`camera.matrixWorld`已更新，您将该点转换为世界坐标，如下所示：

```
camera.updateMatrixWorld();
ntr.applyMatrix4( camera.matrixWorld ); 
```

现在，翻转标志以获得其他三个角，然后对远平面重复计算。

看，你说得对；你只是走了一条更复杂的路线。:-)

编辑：更新到three.js r.66

# c++ - 关于命名空间变量的 C++ VS2010 链接器错误

> ID：12018711
> 
> 赞同：0
> 
> 时间：2012-08-18T12:49:15.177
> 
> 标签：c++, linker

**我的命名空间.h：**

```
namespace MyNamespace{
    int a
} 
```

**MyNamespace.cpp：**一些使用

**主文件**

```
#include "MyNamespace.h" 
```

> ```
> main.obj : error LNK2005: "class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> >
> FileNamespace::m_rootDirectoryPath"
> (?m_rootDirectoryPath@FileNamespace@@3V?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@A)
> already defined in FileNamespace.obj
> 1>main.obj : error LNK2005: "struct FileNamespace::FileTree FileNamespace::m_dataFileTree"
> (?m_dataFileTree@FileNamespace@@3UFileTree@1@A) already defined in
> FileNamespace.obj 
> ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T12:55:57.943

您正在多个翻译单元中*定义*一个全局变量（带有外部链接），这会导致重复的定义错误（因为您违反了 ODR）。

相反，您应该做的是在带有声明的标题中*声明它*`extern`

```
namespace MyNamespace{
    extern int a;
} 
```

*并在单个*.cpp 文件中定义它（可能在`MyNamespace.cpp`）

```
int MyNamespace::a; 
```

这样，编译器将在单个对象模块中仅创建此变量的一个实例，链接器会将在其他对象模块中对它的所有引用链接到该单个实例。

它可能会帮助您理解问题，注意到这与在标头中*声明*函数（仅在此处编写原型）并将它们*定义*在单个`.cpp`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T12:56:54.370

命名空间与其他变量没有什么不同；在您的标题中，您实际上是在定义“a”，而不仅仅是声明它。

在您的标题中：

```
namespace MyNamespace{
    extern int a;
} 
```

在一个源文件中：

```
int MyNamespace::a; 
```

# objective-c - 声称一个对象被释放的分析器在它没有被释放时

> ID：12018714
> 
> 赞同：0
> 
> 时间：2012-08-18T12:49:24.730
> 
> 标签：objective-c, ios, xcode, memory-management, objective-c++

我在这段代码中遇到了一个静态分析错误，这对我来说没有任何意义。错误是：

> 引用计数对象在释放后使用

这是允许在最初用 C++ 编写的游戏中加载 PNG 的胶水代码。

```
int pngLoad(const char *filename, pngInfo *info, int format, GLuint *textureName)
{
    char fullPath[Engine::Settings::MaxPath];
    strcpy(fullPath, filename);
    appendAppBundlePath(fullPath);

    NSString *path = [NSString stringWithCString:fullPath encoding:NSUTF8StringEncoding];
    NSData *data = [[NSData alloc] initWithContentsOfFile:path];
    UIImage *image = [[UIImage alloc] initWithData:data];
    [data release];

    Texture2D *loadedTex = [Texture2D alloc];

    // ##### Analyzer claims the object is released here: #####
    [loadedTex initWithImage:image format:format];

    int didLoad;

    // ##### Error is here: #####
    if (loadedTex.contentSize.width == 0 || loadedTex.contentSize.height == 0)
    {
        didLoad = 0;
    }
    else
    {
        didLoad = 1;

        *textureName = loadedTex.name;

        // return texture info
        info->ScaleFactor = loadedTex.scaleFactor;
        info->Width = (float)image.size.width / (float)info->ScaleFactor;
        info->Height = (float)image.size.height / (float)info->ScaleFactor;
        info->Alpha = 1;
        info->PaddedWidth = loadedTex.pixelsWide;
        info->PaddedHeight = loadedTex.pixelsHigh;
    }

    [loadedTex release];
    [image release];

    return didLoad;
} 
```

如果我使用`Texture2D *loadedTex = [[Texture2D alloc] retain];`此警告被删除，但随后会出现我已泄漏对象的警告，所以这里有些东西很奇怪。

`initWithImage:format:`曾经包含一个`[self release]`不应该存在的内容，当我发现此警告时将其删除。但是，即使在完全清理和重建之后，我仍然会收到警告。我做错了什么吗？Xcode 中的 Clean 命令是否没有正确清理某些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:04:36.397

分析者可能是正确的，至少在一般意义上是正确的。

```
Texture2D *loadedTex = [Texture2D alloc];
[loadedTex initWithImage:image format:format]; 
```

一般来说，“init”实际上可能会丢弃传入的对象并返回一个不同的对象。我不知道“Texture2D”是否属于这种情况，但如果分析仪适用于一般情况，那么它是正确的。

您应该能够通过使用来解决这个问题

```
Texture2D *loadedTex = [Texture2D alloc];
loadedTex=[loadedTex initWithImage:image format:format]; 
```

或者通过简单地组合这两个调用，就像在大多数 Objective-C 示例中所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:02:03.573

在这种情况下，您应该始终在创建对象时结合`alloc`and调用`initXXX`

```
Texture2D *loadedTex = [[Texture2D alloc] initWithImage:image format:format]; 
```

init 方法不需要返回与调用它的对象相同的对象，它可以返回不同的对象。

在这种情况下，您的结果`loadedTex = [Texture2D alloc]`将被释放并`initWithImage`返回一个不同的对象（您丢弃）。

# jquery - 第二次访问页面时Javascript不会运行

> ID：12018722
> 
> 赞同：1
> 
> 时间：2012-08-18T12:50:21.167
> 
> 标签：jquery, jquery-mobile

我有一个 index.php 和一个列表视图，其中包含指向 profile.php 的链接，它采用具有特定 ID 的 id 参数：

```
<div data-role="content">
    <div class="choice_list">
        <ul data-role="listview" data-inset="true" >
            <li><a href="profile.php?id=1" data-transition="slidedown"><img src="martin.jpg"/>Martin</a></li>
            <li><a href="profile.php?id=2" data-transition="slidedown"><img src="liisa.jpg"/>Liisa</a></li>
        </ul>
    </div>
</div> 
```

在 profile.php 中，我包含了我的 profile.js 文件，该文件必须在其中运行一堆东西：

```
$(document).ready(function() {

    // Loads specific user data via API calls

}); 
```

问题：当我第一次访问 profile.php 时，一切正常，但再次访问时，我的 Javascript (profile.js) 无法运行。我知道以前有人问过类似的问题，我已经检查了很多，但我并没有真正理解答案，而且我尝试过的几个解决方案根本没有奏效（试图从页面停止 jqm缓存等等）。是否有可以应用于我的代码的这个问题的一些简单的解决方案？

使用 jquery.mobile-1.0.1.js

提前致谢

/安德烈亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:22:33.710

事件的[jQuery 移动文档](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)说明了这一点：

> **重要提示：使用 $(document).bind('pageinit')，而不是 $(document).ready()**
> 
> 在 jQuery 中学习的第一件事是调用 $(document).ready() 函数中的代码，以便在加载 DOM 后立即执行所有内容。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到 pageinit 事件。

我认为`pageinit`只在第一次加载页面时触发，所以如果你转到一个页面，然后转到另一个页面，然后返回第一页，第二次不会触发 init 事件。为了克服这个问题，您也可以使用该`pageshow`事件

# javascript - 预览 Textarea Div 不起作用

> ID：12018727
> 
> 赞同：0
> 
> 时间：2012-08-18T12:50:50.123
> 
> 标签：javascript, html

我正在尝试创建一个 Textarea Preview Div。我已经编写了这段代码，但它似乎不起作用，如果有人可以帮助我，我会很高兴。我只想为此使用 HTML 和 JavaScript。

不起作用的脚本：http: [//jsbin.com/uduxim](http://jsbin.com/uduxim)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:56:27.153

您的脚本标签错误：

```
<script type="javascript"> 
```

应该是这样的：

```
<script type="text/javascript"> 
```

[工作版本](http://jsbin.com/uduxim/9/)

# android - 从 Facebook 下载大图

> ID：12018729
> 
> 赞同：-1
> 
> 时间：2012-08-18T12:50:59.123
> 
> 标签：android, facebook, facebook-graph-api

我想从 facebook 下载大图。我能够下载正常大小的图像抛出此代码::

```
 try{
                   phtoID.clear();
            response = facebook.request(HelperActivity.wallAlbumID
                    + "/photos");
            JSONObject json = null;
            json = Util.parseJson(response);
            JSONArray photos = null;
            photos = json.getJSONArray("data");
            for (int i = 0; i < photos.length(); i++) {
                JSONObject a = null;
                a = photos.getJSONObject(i);
                String url = a.getString("picture");
                Log.d("URL",url);
                URL imageURL = new URL(url);
                Bitmap mIcon1 = BitmapFactory.decodeStream(imageURL
                        .openConnection().getInputStream());
                phtoID.add(mIcon1);
            } 
```

帮助 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:52:29.563

你实际上已经有最大的照片了。取而代之的是`picture`，获取`images[0].source`应该是图片的最大版本。每个`images`元素还有一个`width`and`height`属性，它以 px 为单位返回照片的大小。

[Graph API Explorer](https://developers.facebook.com/tools/explorer)是查看 API 端点返回什么的好工具。

# sql-server - 如何将 SQL 记录解析为 Enum

> ID：12018733
> 
> 赞同：1
> 
> 时间：2012-08-18T12:51:11.950
> 
> 标签：sql-server, parsing, enums, datarow

有没有办法从表记录中解析枚举值。例如，我有一个包含用户数据的类，其中一个是 Enum 类型。数据是从 DataRow 传递的，但我无法解析枚举值。我尝试过这样的事情，

```
uType= (EType) Enum.TryParse(typeof(row["userType"])); 
```

但它不会编译。任何提示？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:53:40.793

尝试使用此代码

```
uType = (EType) Enum.Parse(typeof(EType), row["userType"].ToString(), true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T12:57:52.410

[`Enum.TryParse`](http://msdn.microsoft.com/en-us/library/dd783499.aspx)返回一个布尔值，指示该值是否可以成功解析。

假设这`userType`是 a`string`中的`DataTable`：

```
EType eType;
bool canParse = Enum.TryParse(row.Field<String>("userType"), out eType); 
```

# java - 访问多个表

> ID：12018736
> 
> 赞同：2
> 
> 时间：2012-08-18T12:51:43.620
> 
> 标签：java, jpa-2.0, eclipselink, ejb-3.1

我正在学习 EJB，JPA 并且有非常基本的疑问

我有 3 张桌子 A、B、C

A - ID，姓名

B - ID、姓名

C - ID、A_ID、B_ID

当我从数据库创建实体类时，我得到了 3 个带有 JPA 内容的 EJB 类。

现在在我的托管 bean 中，我得到 A.Name 或 B.Name，我需要使用 C 找到匹配的条目。

普通 SQL 查询看起来像（可能不是最好的查询）

SELECT a.name FROM schema.A a, schema.B b, schema.C c 其中 b.Name='ABC' and c.B_ID=b.ID and a.ID = c.A_ID;

现在我在哪里可以在我的课程中进行上述查询。

我遇到了@SecondaryTable，但不明白它是如何使用的。

我还看到了 em.createQuery(SQL query).getResultList()。

现在是上面最好的方法，或者 EJB/JPA 中是否有更好的方法。

更新 1：

我试图在 em.CreateQuery 中执行查询

em.CreateQuery(SELECT a.name FROM A a, B b, C c where b.Name='ABC' and c.B_ID=b.ID and a.ID = c.A_ID).getResultList();

但我的 GlassFish Server 出现以下错误（我正在使用 EcipeLink JPA）

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERROR: syntax error at or near ")"
  Position: 
Error Code: 0
Call: SELECT t0.given_name FROM test.a t3, test.a_b t2, test.b t1, test.a t0 WHERE ((((t1.Name = ?) AND (t2.b_id = t1.id.t1.id)) AND (t0.id = )) AND (t3.id = t2.a_id))
bind => [1 parameter bound]
Query: ReportQuery(referenceClass=Consultant sql="SELECT t0.given_name FROM test.a t3, test.a_b t2, test.b t1, test.a t0 WHERE ((((t1.Name = ?) AND (t2.b_id = t1.id.t1.id)) AND (t0.id = )) AND (t3.id = t2.a_id))") 
```

现在为什么 SQl 语句在错误日志中被弄乱了

1.有一个额外的入学测试。a t0

2.t2.b_id = t1.id.t1.id

3.t0.id=

错误日志 SQL 语句是如何生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:23:56.687

由于 C 是 A 和 B 之间的多对多关系，因此它不应该是一个实体。但是，我认为 JPA 不喜欢您的连接表 (C) 有它自己的 ID 列。如果可能，从 C 中删除 ID 列，并将 A_ID、B_ID 的组合作为主键。

那么实体类 A 可以有：

```
@JoinTable(name = "C",
    joinColumns = { @JoinColumn(name = "A_ID", referencedColumnName = "ID") },
    inverseJoinColumns = { @JoinColumn(name = "B_ID", referencedColumnName = "ID") })
@ManyToMany
private Collection<B> bCollection; 
```

我认为所有这些注释的含义很清楚。B类将有：

```
@ManyToMany(mappedBy = "bCollection") 
private Collection<A> aCollection; 
```

mappedBy 属性告诉 JPA 使用 A::bCollection 的 JoinTable 定义（A 是从字段的类型 Collection<A> 推导出来的）。

现在，如果您有 A 的实例，则可以通过获取属性轻松获取该 A 的所有 B。不需要任何 SQL/JPQL。

现在关于执行查询，您应该知道您有 JPQL 和 SQL。JPQL 是 Java 持久性查询语言，是 JPA 的语言。SQL 是数据库的母语。要执行 SQL，您需要使用 createNativeQuery 系列函数。createQuery 函数用于 JPQL。

您应该更喜欢 JPQL 而不是 SQL。两者之间最重要的区别是 JPQL 在您的实体上工作，并期望所有标识符对应于您的类和属性所使用的名称。例如，如果 Name 列（第一个大写字母）映射到名为 name（小写）的属性，那么在 JPQL 查询中您应该使用 name（小写）。实体类名称和相应的表名称相同。JPQL 还内置了对多对多关系连接表的支持，JPQL 查询你想要什么

```
SELECT a
FROM B b JOIN b.aCollection a
WHERE b.name='ABC' 
```

无需指定 JPA 从类的注释中知道的所有连接条件。

@SecondaryTable 在这里不相关，它用于将单个实体拆分为多个表时使用。

# asp.net - Microsoft Mediaroom Buttonclick 事件

> ID：12018737
> 
> 赞同：0
> 
> 时间：2012-08-18T12:51:46.707
> 
> 标签：asp.net

我对 mediaroom 的 TVButton 控件有疑问。mediaroom 演示框架附带了一些事件和操作。如何在我的代码中为 tvbutton 调用我自己的事件处理程序。onButtonClick="btnlogin_ButtonClick" 不起作用。如果我为 void btnlogin_ButtonClick(object sender,EventArgs e){ } 编写自定义代码

onButtonClick 没有触发！mediaroom的示例代码！

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="SubmitAction_01_Designer.aspx.cs"
    Inherits="TVPage_TVPage_Submit" %>

<%@ Register Assembly="TVControls" Namespace="Microsoft.TV.TVControls" TagPrefix="mrml" %>
<%@ Register Assembly="TVControls" Namespace="Microsoft.TV.TVControls.Actions" TagPrefix="mrml" %>
<form id="form1" runat="server">
<mrml:TVPage ID="TVPage1" runat="server" Style="position: absolute;">
    <mrml:TVPanel ID="TVPanel2" runat="server" Background="image(file:/BG_Masthead.png)"
        Style="z-index: 102; left: 0px; width: 632px; position: absolute; top: 0px; height: 99px">
        <mrml:TVImage ID="TVImage2" runat="server" Style="left: 16px; width: 260px; position: absolute;
            top: 23px; height: 80px" Url="file:///Brand_Service_Menu.png">
        </mrml:TVImage>
        <mrml:TVLabel ID="TVLabel3" runat="server" Background="@Transparent" Foreground="@TextHeader"
            HorizontalAlign="right" VerticalAlign="bottom" Padding="rect(0,0,0,0)" Style="left: 265px;
            width: 331px; position: absolute; top: 13px; height: 69px" Text="SubmitAction - Designer"
            Wrap="false">
        </mrml:TVLabel>
    </mrml:TVPanel>
    <mrml:TVText ID="TVText1" runat="server" Style="position: absolute; top: 137px; left: 347px;"
        MaxChars="100">
    </mrml:TVText>
    <mrml:TVButton ID="TVButton1" runat="server" Style="position: absolute; top: 197px;
        left: 352px;" OnClick="SubmitAction0" Text="Click To submit">
    </mrml:TVButton>
    <mrml:TVActions ID="TVActions1" runat="server" Actions-Capacity="4">
        <mrml:SubmitAction Gadgets="TVText1" Method="Get" Name="SubmitAction0" Target=""
            Url="SubmitAction_02_Designer.aspx" X="5" Y="5" />
    </mrml:TVActions>
    <mrml:TVLabel ID="TVLabel4" runat="server" Style="position: absolute; top: 137px;
        left: 67px; height: 158px; width: 246px;" Text="Enter some text in TVText and click on TVButton to submit the TVpage. When the TVPage is submitted,
the control goes to the next page where you can see the text entered in the previous page.">
    </mrml:TVLabel>
</mrml:TVPage>
</form> 
```

所以这里我们只能给 OnClick="SubmitAction0"。上面的示例是源视图

示例背后的代码：

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using Microsoft.TV.TVControls.Actions;
using Microsoft.TV.TVControls;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        /*        <mrml:MoveAction Height="40" Left="270" Name="MoveAction0" Target="txtMove" 
            Top="138" Width="100" X="117" Y="117" />
        <mrml:ShowAction Name="ShowAction0" Targets="lblShow" X="89" Y="89" />
        <mrml:SetAction Name="SetAction0" PropertyName="value" PropertyValue="Set" 
            Target="txtSet" X="61" Y="61" />
        <mrml:HideAction Name="HideAction0" Targets="lblHide" X="5" Y="5" />
        <mrml:KeyAction Key="1" Name="KeyAction0" Target="txtKey" X="33" Y="33" />
        <mrml:FocusAction Name="FocusAction0" Target="btnFocus" X="229" Y="100" />*/

        MoveAction objMove = new MoveAction("MoveAction0", "txtMove", 270, 138, 100, 40);
        TVActions1.Actions.Add(objMove);
        ShowAction objShow = new ShowAction("ShowAction0", "lblShow");
        TVActions1.Actions.Add(objShow);
        SetAction objSet = new SetAction("SetAction0", "txtSet", "value", "Set");
        TVActions1.Actions.Add(objSet);
        HideAction objHide = new HideAction("HideAction0", "lblHide");
        TVActions1.Actions.Add(objHide);
        KeyAction objKey = new KeyAction("KeyAction0", "txtKey", "1");
        TVActions1.Actions.Add(objKey);
        FocusAction objFocus = new FocusAction("FocusAction0", "btnFocus");
        TVActions1.Actions.Add(objFocus);

        TVButton1.OnClick = new Microsoft.TV.TVControls.Events.ClickEvent("ShowAction0");
        TVButton2.OnClick = new Microsoft.TV.TVControls.Events.ClickEvent("HideAction0");
        TVButton3.OnClick = new Microsoft.TV.TVControls.Events.ClickEvent("SetAction0");
        TVButton4.OnClick = new Microsoft.TV.TVControls.Events.ClickEvent("KeyAction0");
        TVButton5.OnClick = new Microsoft.TV.TVControls.Events.ClickEvent("FocusAction0");
        TVButton6.OnClick = new Microsoft.TV.TVControls.Events.ClickEvent("MoveAction0");

        //Following lines are for displaying the file name
        /*<mrml:TVLabel ID="lblFileName" runat="server" 
                style="position: absolute; top: 69px; left: 9px; width: 241px;" Text="TVLabel">
            </mrml:TVLabel>*/
        TVLabel lblFileName = new TVLabel();
        lblFileName.ID = "lblFileName";
        lblFileName.Left = 40;
        lblFileName.Top = 70;
        lblFileName.Width = 500;
        lblFileName.Text = HttpContext.Current.Request.FilePath;
        lblFileName.IsVisible = true;
        TVPage1.Controls.Add(lblFileName);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T14:52:19.650

我不知道您是否还需要有关此的一些信息，但是在您的特定情况下，通过单击按钮调用页面，Href 似乎像这个示例一样工作得更好

```
<mrml:TVButton ID="TVButton7" runat="server" Background="argb(211,0,79,194)" 
         Href="~/Menu%20principal/Menu.aspx" IsVisible="False" 
         style="position: absolute; top: 433px; left: 224px;" Text="Back to Menu">
</mrml:TVButton> 
```

然后使用页面的 Page_Load 事件来做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:56:10.523

您可以尝试使用 OnClick 而不是 OnButtonClick

```
OnClick="btnlogin_ButtonClick" 
```

# google-app-engine - Google App Engine NDB 重复属性附加信息

> ID：12018738
> 
> 赞同：1
> 
> 时间：2012-08-18T12:51:52.247
> 
> 标签：google-app-engine, python-2.7, app-engine-ndb

例如：我有一个带有重复“标题”属性的文章模型，该属性存储原始标题的不同语言的翻译：

```
class Article(ndb.Model):
  title = ndb.StringProperty(repeated=True) 
```

除了标题属性之外，我如何存储标题的语言代码，以便我可以获得标题的特定版本，如下所示：

```
en_title = article.title['en'] 
```

具有相同的属性名称很重要，因为我不知道文章标题将以何种语言查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T13:15:57.527

您可以使用重复结构属性：

```
class Title(ndb.Model):
  title = ndb.StringProperty()
  lang = ndb.StringProperty()

class Article(ndb.Model):
  titles = ndb.StructuredProperty(Title, repeated=True) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T20:15:48.390

您在查询标题或语言吗？如果没有，您可以使用 PickleProperty 或 JsonProperty 来存储字典。

# joomla - Itemid 在哪里用于标记 Joomla 2.5.6 中的活动菜单项？

> ID：12018741
> 
> 赞同：0
> 
> 时间：2012-08-18T12:52:15.407
> 
> 标签：joomla, joomla2.5

`Itemid`任何人都可以帮助我处理 Joomla参数最终成为突出显示的菜单项的流程吗？

我在 Joomla 中嵌入了第 3 方应用程序，并通过临时更改应用程序中的 php 环境。

我可以通过替换令牌来获取 joomla html 并插入第 3 方 html。

简化代码：

```
if ($_SERVER['REQUEST_METHOD'] == 'GET' ) {
    $_SERVER['REQUEST_METHOD'] = '';
}
$_SERVER['REQUEST_URI'] = '/joomla/index.php?view=mycom&option=com_mycom&Itemid=103';
$_SERVER['SCRIPT_NAME'] = $_SERVER['PHP_SELF'] = '/joomla/index.php';
$_SERVER['QUERY_STRING'] = 'view=mycom&option=com_mycom&Itemid=103';

ob_start();
require_once '/joomla/index.php';
$joomlaHTML = ob_get_clean();
echo str_replace($replacementToken, $thirdPartyHTML, $joomlaHTML); 
```

在 v1.5.x 中，ID 为 103 的菜单项正确突出显示，但在 v2.5.6 中，它不是，并且该`Home`项目始终突出显示。我认为它曾经在 v1.6.x 和 2.5.x 的早期版本中正确突出显示，但不确定。

我想知道流程是如何流动的（在哪里设置），这样我就可以看到我需要做哪些调整。

**删除了错误的信息**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:12:16.410

谢谢**大洋**！你用这个拯救了我的一天：

```
// force highlight the external url menu item
$Itemid = JRequest::getVar('Itemid');
$menu = JSite::getMenu();
$menu->setActive($Itemid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:01:20.460

我不完全理解面包屑部分，但我设法通过编辑我的组件的 controller.php 来让它工作：

```
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// force highlight the external url menu item
$Itemid = JRequest::getVar('Itemid');
$menu = JSite::getMenu();
$menu->setActive($Itemid);

// force fix the breadcrumb
$app = JFactory::getApplication('site');    
$pathway =& $app->getPathway();
$bcrumbs = &JPathway::getInstance('site');

// import Joomla controller library
jimport('joomla.application.component.controller');

/**
 * MyCom Component Controller
 */
class MyComController extends JController
{
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T13:32:47.777

查看以下文件

检查

/modules/mod_menu/mod_menu.php

文件，您将看到两个函数被称为“getActive”和“getDefault”，可以在以下文件中找到

/libraries/joomla/application/menu.php

我认为现在可以轻松定制

# css - 填充似乎不起作用

> ID：12018742
> 
> 赞同：-1
> 
> 时间：2012-08-18T12:52:18.003
> 
> 标签：css, padding

填充似乎不起作用。悬停时，填充从容器中出来。谁能告诉我为什么会这样？填充必须在菜单之间留出空白，但不是，而是在悬停时填充从容器中出来。

[http://ashwin931996.webege.com](http://ashwin931996.webege.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:08:12.920

不明白你想达到什么目的......无论如何，如果你添加到导航 a:hover 这个：

```
display: inline-block 
```

这是你想要的效果吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T13:06:20.723

嗨，css 中的一个小错误，你完美地改变了它的工作。这如下;

```
#nav a {
color: #000000;
padding: 0 20px 0 30px;
text-decoration: none;
}

#nav a:hover {
padding: 0 20px 0 30px;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T13:10:12.547

必须重写你的 CSS 的某些部分，填充实际上是你，但你需要给 a 标签一个 display: block ; 但是一旦我这样做了，它就把一切都弄乱了，所以我把我弄得一团糟。希望你喜欢。PS 这是在 Mozilla firefox 中测试过的，可能想在其他浏览器中尝试一下。

```
@font-face {
    font-family: "rbno2_light_alternative_Rg";
    font-style: normal;
    font-weight: normal;
    src: url("../fonts/rbno2light_a-webfont.eot?#iefix") format("embedded-opentype"), url("../fonts/-webfont.woff") format("woff"), url("../fonts/rbno2light_a-webfont.ttf") format("truetype"), url("../fonts/rbno2light_a-webfont.svg#rbno2_light_alternative_Rg") format("svg");
}
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
    -x-system-font: none;
    border-bottom-color: -moz-use-text-color;
    border-bottom-style: none;
    border-bottom-width: 0;
    border-left-color-ltr-source: physical;
    border-left-color-rtl-source: physical;
    border-left-color-value: -moz-use-text-color;
    border-left-style-ltr-source: physical;
    border-left-style-rtl-source: physical;
    border-left-style-value: none;
    border-left-width-ltr-source: physical;
    border-left-width-rtl-source: physical;
    border-left-width-value: 0;
    border-right-color-ltr-source: physical;
    border-right-color-rtl-source: physical;
    border-right-color-value: -moz-use-text-color;
    border-right-style-ltr-source: physical;
    border-right-style-rtl-source: physical;
    border-right-style-value: none;
    border-right-width-ltr-source: physical;
    border-right-width-rtl-source: physical;
    border-right-width-value: 0;
    border-top-color: -moz-use-text-color;
    border-top-style: none;
    border-top-width: 0;
    font-family: inherit;
    font-size: inherit;
    font-size-adjust: inherit;
    font-stretch: inherit;
    font-style: inherit;
    font-variant: inherit;
    font-weight: inherit;
    line-height: inherit;
    margin-bottom: 0;
    margin-left: 0;
    margin-right: 0;
    margin-top: 0;
    padding-bottom: 0;
    padding-left: 0;
    padding-right: 0;
    padding-top: 0;
    vertical-align: baseline;
}
article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style-image: none;
    list-style-position: outside;
    list-style-type: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after, q:before, q:after {
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}
#logo {
    float: left;
    margin-top: 27%;
    width: 372px;
}
#logo h1 {
    background-color: #FFFFFF;
    display: block;
    font-family: rbno2_light_alternative_Rg;
    font-size: 2.5em;
    letter-spacing: 0.3em;
    padding-bottom: 2%;
    padding-left: 1%;
    padding-right: 2%;
    padding-top: 2%;
    width: 432px;
}
#nav {
    display: block;
    float: left;
    margin-top: 16%;
    width: 100%;
}
#nav ul {
    background-color: #FFFFFF;
    display: block;
    float: left;
    list-style-image: none;
    list-style-position: outside;
    list-style-type: none;
    width: 100%;
}
#nav ul li {
    color: #000000;
    display: block;
    float: left;
    font-family: rbno2_light_alternative_Rg;
    font-size: 1.9em;
}
#nav a {
    color: #000000;
    display: block;
    padding-bottom: 1em;
    padding-left: 3em;
    padding-right: 3em;
    padding-top: 1em;
    text-decoration: none;
}
#nav a:hover {
    background-color: #000000;
    color: white;
} 
```

# php - 用 DOMDocument 替换 HTML 中的标签

> ID：12018747
> 
> 赞同：7
> 
> 时间：2012-08-18T12:52:55.227
> 
> 标签：php, dom

我正在尝试在 php 中使用 DOMDocument::loadHTML 编辑 html 标签。html 数据是 html 的一部分，而不是整个页面。我遵循了这个页面（[PHP - DOMDocument - 需要更改/替换现有的 HTML 标签 w/新标签](https://stackoverflow.com/questions/4824503/php-domdocument-need-to-change-replace-an-existing-html-tag-w-a-new-one)）所说的内容。

这应该将 pre 标签转换为 div 标签，但它会给出“致命错误：未捕获的异常 'DOMException' 和消息'未找到错误'。”

```
<?php
$contents = <<<STR
<pre>hi</pre>
<pre>hello</pre>
<pre>bye</pre>
STR;

$dom = new DOMDocument;
@$dom->loadHTML($contents);

foreach( $dom->getElementsByTagName("pre") as $nodePre ) {
    $nodeDiv = $dom->createElement("div", $nodePre->nodeValue);
    $dom->replaceChild($nodeDiv, $nodePre);
}

echo $dom->saveHTML();
?> 
```

[编辑]当我尝试向后迭代节点对象时，我收到此错误，“注意：尝试获取非对象的属性...”

```
<?php
$contents = <<<STR
<pre>hi</pre>
<pre>hello</pre>
<pre>bye</pre>
STR;

$dom = new DOMDocument;
@$dom->loadHTML($contents);
$domPre = $dom->getElementsByTagName('pre');
$length = $domPre->length;

    For ($i = $length; $i > -1 ; $i--) {
        $nodePre = $domPre->item($i);
        echo $nodePre->nodeValue . '<br />';
//      $nodeDiv = $dom->createElement("div", $nodePre->nodeValue);
//      $dom->replaceChild($nodeDiv, $nodePre);
    }

    // echo $dom->saveHTML();
?> 
```

[编辑] 好的，解决了。由于回答的代码有一些错误，我在这里发布了解决方案。谢谢大家。

解决方案：

```
<?php
$contents = <<<STR
<pre>hi</pre>
<pre>hello</pre>
<pre>bye</pre>
STR;

$dom = new DOMDocument;
@$dom->loadHTML($contents);
$domPre = $dom->getElementsByTagName('pre');
$length = $domPre->length;

For ($i = $length - 1; $i > -1 ; $i--) {
    $nodePre = $domPre->item($i);
    $nodeDiv = $dom->createElement("div", $nodePre->nodeValue);
    $nodePre->parentNode->replaceChild($nodeDiv, $nodePre);
}

echo $dom->saveHTML();
?> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-18T13:04:20.637

问题是调用`replaceChild()`. 而不是

```
$dom->replaceChild($nodeDiv, $nodePre); 
```

利用

```
$nodePre->parentNode->replaceChild($nodeDiv, $nodePre); 
```

**更新**

这是一个工作代码。替换多个节点似乎存在一些问题（更多信息在这里： http: [//php.net/manual/en/domnode.replacechild.php](http://php.net/manual/en/domnode.replacechild.php)）所以你必须使用回归循环来替换元素。

```
$contents = <<<STR
<pre>hi</pre>
<pre>hello</pre>
<pre>bye</pre>
STR;

$dom = new DOMDocument;
@$dom->loadHTML($contents);

$elements = $dom->getElementsByTagName("pre");
for ($i = $elements->length - 1; $i >= 0; $i --) {
    $nodePre = $elements->item($i);
    $nodeDiv = $dom->createElement("div", $nodePre->nodeValue);
    $nodePre->parentNode->replaceChild($nodeDiv, $nodePre);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-30T16:49:01.320

[使用paquettg/php-html-parser 的](https://github.com/paquettg/php-html-parser)另一种方法（没有找到更改名称的方法，因此不得不使用 hack 和 re-binding `$this`）：

```
use PHPHtmlParser\Dom;
use PHPHtmlParser\Dom\HtmlNode;

$dom = new Dom;
$dom->load($text);
/** @var HtmlNode[] $tags */
foreach($dom->find('pre') as $tag) {
    $changeTag = function() {
        $this->name = 'div';
    };
    $changeTag->call($tag->tag);
};
echo (string)$dom; 
```

# php - 使 php do_action 以类字段为条件

> ID：12018752
> 
> 赞同：0
> 
> 时间：2012-08-18T12:53:51.620
> 
> 标签：php, wordpress, wordpress-theming

对不起一个菜鸟问题。我希望这样做：

```
<?php  do_action('woocommerce_product_thumbnails'); ?> 
```

以名为 360 且值为 yes 的自定义字段为条件。

```
<?php // do_action('woocommerce_product_thumbnails'); // ?> 
```

原因很简单，我的插件使用 36 张图像来创建旋转显示。当我不使用插件时，我想使用缩略图。非常感谢阿萨。

我试过了

```
<?php 

 if (get_post_meta($post->ID, '360', false)) { 
 do_action('woocommerce_product_thumbnails'); 
 } else { 
 do_action('woocommerce_product_thumbnails'); 
 } 
 ?> 
```

但是当 360 返回为 false 时，我仍然可以看到缩略图？

我试过了

```
<?php 

 if (get_post_meta($post->ID, '360', true)) { 
 // do_action('woocommerce_product_thumbnails');
 } else { 
 do_action('woocommerce_product_thumbnails'); 
 } 
 ?> 
```

作品！非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:40:38.110

我认为这就是您的意思-如果该页面/帖子的自定义元值 360 有一个值（即您创建了一个带有 id 360 复选框的自定义元框），则使用产品缩略图。如果没有，那么你把你的旋转显示器。

```
<?php

 if (get_post_meta($post->ID, '360', true)) {
     do_action('woocommerce_product_thumbnails');
 } else {
    // your rotating display code.
 }

 ?> 
```

# php - PHP隐藏管理按钮不起作用

> ID：12018753
> 
> 赞同：0
> 
> 时间：2012-08-18T12:54:04.520
> 
> 标签：php, hide, admin

我在本地运行脚本，我想在同时登录（管理员或用户）时为普通用户隐藏管理员按钮。我的代码如下，但它不起作用，当普通用户登录时，管理功能按钮仍然出现。

我的数据库声明：

```
<?php
mysql_select_db($database_pods, $pods);
$query_Recordset1 = "SELECT * FROM `user`";
$Recordset1 = mysql_query($query_Recordset1, $pods) or die(mysql_error());
$row_Recordset1 = mysql_fetch_assoc($Recordset1);
$totalRows_Recordset1 = mysql_num_rows($Recordset1);

//initialize the session
if (!isset($_SESSION)) {
  session_start();
}
?> 
```

我对普通用户隐藏的按钮代码：

```
<?php if ($row_Recordset1['level'] == 'admin'){
<table align="center" width="50" bordercolor="#000000" border="0">
    <tr>
       <td align="center"><a href="adduser.php">Add User</a></td>
    </tr>
</table>
} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:01:35.413

在您的查询中

```
SELECT * FROM user 
```

您选择所有用户，而不仅仅是查看页面的用户。在您的情况下，结果集中的第一个用户是管理员——这就是每个人都可以看到这个按钮的原因。您只需查询查看页面的用户，如下所示：

```
SELECT * FROM user WHERE id = $id 
```

while`id`是数据库中唯一标识某个用户的列，`$id`是一个 PHP 变量，带有当前用户的 id。您如何获得此 ID 取决于您编写的登录系统。

# javascript - 如何在Javascript中检查实例的类？

> ID：12018759
> 
> 赞同：26
> 
> 时间：2012-08-18T12:55:11.430
> 
> 标签：javascript

> **可能重复：**
> [如何获取 JavaScript 对象的类？](https://stackoverflow.com/questions/1249531/how-to-get-a-javascript-objects-class)

在 Ruby 中，我可以这样做来检查实例的类：

```
'this is an string'.class

=>String 
```

js中有没有类似的东西？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-18T13:17:05.257

您可能是指类型或构造函数，而不是类。类在 JavaScript 中有不同的含义。

获取课程：

```
var getClassOf = Function.prototype.call.bind(Object.prototype.toString);
getClassOf(new Date());     // => "[object Date]"
getClassOf('test string');  // => "[object String]"
getClassOf({ x: 1 });       // => "[object Object]"
getClassOf(function() { }); // => "[object Function]" 
```

[请参阅这篇相关的 MDN 文章。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString#Using_toString()_to_detect_object_class)

要获取构造函数或原型，有多种方法，具体取决于您的需要。

要发现您拥有的原语类型，请使用`typeof`. 这是与字符串、布尔值、数字等一起使用的最佳方法：

```
typeof 'test string';  // => 'string'
typeof 3;              // => 'number'
typeof false;          // => 'boolean'
typeof function() { }; // => 'function'
typeof { x: 1 };       // => 'object'
typeof undefined;      // => 'undefined' 
```

请注意，`null`在这种情况下行为很奇怪，因为`typeof null`会给你`"object"`，而不是`"null"`.

`Object.getPrototypeOf(myObject)`您还可以使用（`myObject.__proto__`或`myObject.constructor.prototype`在某些`getPrototypeOf`不支持的浏览器中）获取原型、主干 JavaScript 继承。

您可以使用以下命令测试构造函数`instanceof`：

```
new Date() instanceof Date;  // => true 
```

您也可以使用 合理地获取构造函数`myObject.constructor`，但请注意这可以更改。要获取构造函数的名称，请使用`myObject.constructor.name`.

```
new Date().constructor.name;   // => 'Date' 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-18T13:11:46.303

不确定这是否适用于所有浏览器，但您可以使用`constructor.name`：

```
'some string'.constructor.name; //=>String
({}).constructor.name           //=>Object
(7.3).constructor.name          //=>Number
[].constructor.name             //=>Array
(function(){}).constructor.name //=>Function
true.constructor.name           //=>Boolean
/test/i.constructor.name        //=>RegExp
(new Date).constructor.name     //=>Date
(new function MyConstructor(){}())
  .constructor.name;            //=>MyConstructor 
```

虽然`Object`是 Javascript 中的一切之母，但您可以扩展它（它有[优点也有缺点](http://perfectionkills.com/extending-native-builtins/)）

```
Object.prototype.class = function(){
  return this.constructor.name;
}
'some string'.class(); //=>String
(23).class();          //=>Number
// etc... 
```

**注意**：javascript 不知道 'classes' ^(**1**)，它的继承模型是[原型的](http://crockford.com/javascript/prototypal.html)

^(**1**)来自 ECMAScript 标准。

> ECMAScript 不使用 C++、Smalltalk 或 Java 中的类。相反，可以通过各种方式创建对象，包括通过文字符号或通过构造函数创建对象，然后执行代码，通过将初始值分配给它们的属性来初始化它们的全部或部分。每个构造函数都是一个具有名为原型的属性的函数，用于实现基于原型的继承和共享属性。对象是通过在 new 表达式中使用构造函数来创建的；例如， new Date(2009,11) 创建一个新的 Date 对象。在不使用 new 的情况下调用构造函数会产生依赖于构造函数的后果。例如，Date() 生成当前日期和时间的字符串表示，而不是对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T12:58:20.610

[`typeof`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof)[`instanceof`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof)这就是你需要的

```
> x = "Hello, World!"
"Hello, World!"
> typeof x
"string" 
```

您可以检查构造函数名称以获取构造函数类的名称（或您所称的类）：

```
> x.constructor.name
> "String" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-18T13:01:59.703

在 js 中，您可以使用：

```
typeof 
```

等式。

```
var a="this is string";
typeof a; // return "string"

function abc(){}
typeof abc; // return "function"

var a = {a:1,b:2,c:3}
typeof a; return "object" 
```

# ruby-on-rails - 没有路线匹配 [POST] "/registrations/user"

> ID：12018762
> 
> 赞同：0
> 
> 时间：2012-08-18T12:55:36.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在使用设计 gem，并且我过去曾进行过用户注册。然而，似乎有什么东西坏了。

```
Mavens::Application.routes.draw do

  devise_for :users

  resources :events
  resources :periods
  resources :products
  resources :cart_rows
  resources :product_requests
  resources :inqueries
   match '/profile',  to: 'static_pages#profile'

  # resources :registrations do
  #   member do
  #     post :save_period
  #   end
  # end

  root :to => 'static_pages#home'

  get "static_pages/home"
  get "static_pages/about"
end 
```

我应该使用与“注册”不同的名称，但此注册是针对事件的，而不是针对用户的。我已经评论了这一点，认为这与这次破坏有关。

这是我的耙子路线：

```
 new_user_session GET    /users/sign_in(.:format)             devise/sessions#new
            user_session POST   /users/sign_in(.:format)             devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)            devise/sessions#destroy
           user_password POST   /users/password(.:format)            devise/passwords#create
       new_user_password GET    /users/password/new(.:format)        devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)       devise/passwords#edit
                         PUT    /users/password(.:format)            devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)              devise/registrations#cancel
       user_registration POST   /users(.:format)                     devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)             devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                devise/registrations#edit
                         PUT    /users(.:format)                     devise/registrations#update
                         DELETE /users(.:format)                     devise/registrations#destroy
                  events GET    /events(.:format)                    events#index
                         POST   /events(.:format)                    events#create
               new_event GET    /events/new(.:format)                events#new
              edit_event GET    /events/:id/edit(.:format)           events#edit
                   event GET    /events/:id(.:format)                events#show
                         PUT    /events/:id(.:format)                events#update
                         DELETE /events/:id(.:format)                events#destroy
                 periods GET    /periods(.:format)                   periods#index
                         POST   /periods(.:format)                   periods#create
              new_period GET    /periods/new(.:format)               periods#new
             edit_period GET    /periods/:id/edit(.:format)          periods#edit
                  period GET    /periods/:id(.:format)               periods#show
                         PUT    /periods/:id(.:format)               periods#update
                         DELETE /periods/:id(.:format)               periods#destroy
                products GET    /products(.:format)                  products#index
                         POST   /products(.:format)                  products#create
             new_product GET    /products/new(.:format)              products#new
            edit_product GET    /products/:id/edit(.:format)         products#edit
                 product GET    /products/:id(.:format)              products#show
                         PUT    /products/:id(.:format)              products#update
                         DELETE /products/:id(.:format)              products#destroy
               cart_rows GET    /cart_rows(.:format)                 cart_rows#index
                         POST   /cart_rows(.:format)                 cart_rows#create
            new_cart_row GET    /cart_rows/new(.:format)             cart_rows#new
           edit_cart_row GET    /cart_rows/:id/edit(.:format)        cart_rows#edit
                cart_row GET    /cart_rows/:id(.:format)             cart_rows#show
                         PUT    /cart_rows/:id(.:format)             cart_rows#update
                         DELETE /cart_rows/:id(.:format)             cart_rows#destroy
        product_requests GET    /product_requests(.:format)          product_requests#index
                         POST   /product_requests(.:format)          product_requests#create
     new_product_request GET    /product_requests/new(.:format)      product_requests#new
    edit_product_request GET    /product_requests/:id/edit(.:format) product_requests#edit
         product_request GET    /product_requests/:id(.:format)      product_requests#show
                         PUT    /product_requests/:id(.:format)      product_requests#update
                         DELETE /product_requests/:id(.:format)      product_requests#destroy
               inqueries GET    /inqueries(.:format)                 inqueries#index
                         POST   /inqueries(.:format)                 inqueries#create
             new_inquery GET    /inqueries/new(.:format)             inqueries#new
            edit_inquery GET    /inqueries/:id/edit(.:format)        inqueries#edit
                 inquery GET    /inqueries/:id(.:format)             inqueries#show
                         PUT    /inqueries/:id(.:format)             inqueries#update
                         DELETE /inqueries/:id(.:format)             inqueries#destroy
                 profile        /profile(.:format)                   static_pages#profile
                    root        /                                    static_pages#home
       static_pages_home GET    /static_pages/home(.:format)         static_pages#home
      static_pages_about GET    /static_pages/about(.:format)        static_pages#about 
```

这是查看页面：

```
<h2>Sign Up</h2> 
  <%= link_to "Sign in", new_session_path(resource_name) %> | <%= link_to "Forgot your password?", new_password_path(resource_name) %><br />
  <br />

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

  <%= f.label :email %>
  <%= f.email_field :email %>

  <%= f.label :password %>
  <%= f.password_field :password %>

  <%= f.label :password_confirmation %>
  <%= f.password_field :password_confirmation %>

  <%= f.label :first_name %>
  <%= f.text_field :first_name%>

  <%= f.label :last_name %>
  <%= f.text_field :last_name%>

  <%= f.label :license_number %>
  <%= f.text_field :license_number %>

  <%= f.label :state %>
  <%= f.select :state, User::STATES%>

  <%= f.label :specialty %>
  <%= f.select :specialty, User::SPECIALTY%>

  <br />

  <%= f.submit "Sign up" %>
<% end %> 
```

关于什么可以改变以破坏路由的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:10:37.053

我`rails d`在模型和控制器上做了一个，这似乎让它工作了。Pro_tip，总是在变量名前加上一些东西，这样它们就不会与你引入的其他系统的名称竞争！

# asp.net - Asp.Net中的GridView双击事件

> ID：12018763
> 
> 赞同：4
> 
> 时间：2012-08-18T12:55:46.313
> 
> 标签：asp.net

我在 ASP.NET Web 表单中使用 GridView 控件来显示数据记录。我想处理GridView所在行的双击事件。我也应该得到点击了哪一行的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T13:00:35.740

请参阅这篇精彩的帖子，它将帮助您解决问题 [http://www.codeproject.com/Articles/15677/Clickable-and-Double-Clickable-Rows-with-GridView](http://www.codeproject.com/Articles/15677/Clickable-and-Double-Clickable-Rows-with-GridView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-01T03:22:21.503

试试我写的这个简单的代码。这个对我有用。

```
Protected Sub GridView2_SelectedIndexChanged(sender As Object, e As EventArgs) Handles GridView1.SelectedIndexChanged
    Dim row As GridViewRow = GridView1.SelectedRow
    Dim i As Integer = 0
    GridView1.Rows(row.RowIndex).BackColor = ColorTranslator.FromHtml("#A1DCF2")
    MsgBox(doubleClick & " " & GridView1.SelectedIndex.ToString)
    If doubleClick = GridView1.SelectedIndex.ToString Then
        MsgBox("Yo")
    End If
    doubleClick = GridView1.SelectedIndex.ToString
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T03:17:34.060

```
Protected Sub GridView2_SelectedIndexChanged(sender As Object, e As EventArgs) Handles GridView1.SelectedIndexChanged

    Dim row As GridViewRow = GridView1.SelectedRow

    Dim i As Integer = 0
    GridView1.Rows(row.RowIndex).BackColor = ColorTranslator.FromHtml("#A1DCF2")
    MsgBox(doubleClick & " " & GridView1.SelectedIndex.ToString)
    If doubleClick = GridView1.SelectedIndex.ToString Then
        MsgBox("Yo")
    End If
    doubleClick = GridView1.SelectedIndex.ToString
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-06T16:35:46.773

经过多次不成功的尝试，我使用 Jquery 完成了它，这样：

```
$('html').on('click', ".wwdblclick", function (e) {
    e.preventDefault;
    return false;
});

$('html').on('dblclick', ".wwdblclick", function (e) {
    var x = $(this).attr("href").replace("javascript:", "");
    $(this).attr("ondblclick", x);
    if (!(typeof $(this).attr("wwRunningDblclick") !== "undefined")) {
        $(this).attr("wwRunningDblclick", "true");
        $(this).trigger("dblclick");
    }
    else {
        $(this).removeAttr("wwRunningDblclick");
    }
}); 
```

然后只需在网格按钮命令中设置“wwdblclick”cssClass，如下所示：

```
<asp:LinkButton ID="lkbX" runat="server" Text="<i class=icon-minus-sign></i>" CssClass="wwdblclick" CommandName="action" CommandArgument='<%# Eval("id") %>' /> 
```

干杯，

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-18T13:01:05.553

您可以尝试使用 RowCommand

[http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.gridview.rowcommand%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.gridview.rowcommand%28v=vs.80%29.aspx)

# iphone - 无法传递给另一个视图控制器，导航问题

> ID：12018766
> 
> 赞同：0
> 
> 时间：2012-08-18T12:56:13.980
> 
> 标签：iphone, objective-c, cordova, uiviewcontroller, uinavigationcontroller

我有一个工作项目，其中一个屏幕是例如**ViewController 1** - tableView。在 ViewController 1 中选择一行后，我正在尝试传递数据并导航到**ViewController 2。我添加了以下代码：**

```
DetailViewController *dvController = [[DetailViewController alloc] initWithNibName:@"DetailView" bundle:[NSBundle mainBundle]];
dvController.selectedItem = selectedItem;
[self.navigationController pushViewController:dvController animated:YES];
[dvController release]; 
```

但它没有传递给**ViewController 2**。我认为问题出在 navigatorController 上。我应该在哪里添加它？到 ViewController 1 的 xib 文件？或 mainAppDelegate - 我不想碰它，因为它已经在使用它的设置......

我在 appDelegate 中声明了 UINavigationController *navigationController

我应该检查什么？

在对代码进行一些更改后（感谢@Vakul Saini）appDelegate.m：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  self.View1 = [[startSearching alloc] initWithNibName:@"StartSearching" bundle:nil];
self.currentNC = [[UINavigationController alloc] initWithRootViewController:self.View1];

//this line start the startSearching at the begining and its passing to //secondViewController
    self.window.rootViewController = self.currentNC; 
```

// 但是这一行是从原始起始页面开始的，但是视图的转移 // 不起作用

```
 [self.window setRootViewController: self.viewController]; 
```

appDelegate.h

```
@property (strong, nonatomic) startSearching *View1;
@property (strong, nonatomic) UINavigationController *currentNC; 
```

开始搜索.m

```
detailCon *detailCo =[[detailCon alloc] initWithNibName: @"detailView" bundle: [NSBundle mainBundle]];
[detailCon release];
UINavigation *currentNC1 = [[AppDelagate sharedInstance] currentNC];
[currentVC1 pushViewController:detailCo animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:02:12.747

检查你是否有`UINavigationController`一个`Appdelegate`。你需要让你的应用程序`rootViewController`是`UINavigationController` Add your `UINavigationController`in`appdelegate`

**Appdelegate.h 文件**

```
#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) ViewController *viewController;
@property (strong, nonatomic) UINavigationController *navCon;

@end 
```

**Appdelegate.m 文件**

```
#import "AppDelegate.h"
#import "ViewController.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize viewController = _viewController;
@synthesize navCon = _navCon;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.navCon = [[UINavigationController alloc]initWithRootViewController:self.viewController];
    self.window.rootViewController = self.navCon;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

`ViewController`您的应用程序的第一个视图在哪里。

# ruby-on-rails - A has_many Bs 其中 B 没有主键

> ID：12018767
> 
> 赞同：5
> 
> 时间：2012-08-18T12:56:14.447
> 
> 标签：ruby-on-rails, activerecord

我有 A 型和 B 型；A has_many B, and B belongs_to A. 到目前为止，一切都很好——除了，我指定 B 没有主键。我不打算修改或删除单独的 B 行，我希望有几百万到十亿个，所以省略主键将非常方便，空间方面。

创建 B 表的迁移如下所示：

```
class CreateBs < ActiveRecord::Migration
  def change
    create_table :bs, {:id => false} do |t|
      # … rest of fields …
    end
  end
end 
```

不幸的是，ActiveRecord 不同意。尝试创建 A（没错！）会导致：

```
1.9.3p194 :001 > A.create!
   (0.3ms)  BEGIN
   (0.1ms)  ROLLBACK
ActiveRecord::UnknownPrimaryKey: ActiveRecord::UnknownPrimaryKey
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/reflection.rb:366:in `primary_key'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/reflection.rb:216:in `association_primary_key'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/has_many_association.rb:104:in `foreign_key_present?'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/association.rb:165:in `find_target?'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/collection_association.rb:332:in `load_target'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/collection_proxy.rb:44:in `load_target'
… 
```

如果你捕捉到异常，它的`message`状态：

```
"Unknown primary key for table bs in model B." 
```

（这是因为 B 没有主键。）

我不想有这个问题！有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:04:47.950

罪魁祸首原来是问题中遗漏的一个细节——当然——以及我的工作记忆中遗漏的细节：

```
class A < ActiveRecord::Base
  has_many :bs

  validates :bs, :presence => true
end 
```

尽管当时我对此一无所知，但在许多其他验证中，有一个验证`bs`. 如果您对完整的回溯非常仔细地眯起眼睛——我在最初的问题中“有帮助”足以截断，您会看到：

```
ActiveRecord::UnknownPrimaryKey: ActiveRecord::UnknownPrimaryKey
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/reflection.rb:366:in `primary_key'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/reflection.rb:216:in `association_primary_key'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/has_many_association.rb:104:in `foreign_key_present?'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/association.rb:165:in `find_target?'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/collection_association.rb:332:in `load_target'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/collection_proxy.rb:44:in `load_target'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/collection_proxy.rb:87:in `method_missing'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.8/lib/active_model/errors.rb:255:in `block in add_on_blank'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.8/lib/active_model/errors.rb:253:in `each'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.8/lib/active_model/errors.rb:253:in `add_on_blank'
        from /Users/annelicuss/.rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.8/lib/active_model/validations/presence.rb:8:in `validate'
-------------------------------------------------------------------------------------------------^^^^^^^^^^^^^^^^^^^^^^^ 
```

错误发生在`active_model/validations/presence.rb`！消除这个约束就足以让我们继续前进。它找不到验证的目标，因为它试图使用主键来这样做，因此失败了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:10:40.737

嗯，这很奇怪。出于某种原因，鉴于您发布的信息，我无法复制我的问题。我创建了一个新项目，创建了一个 A 模型，然后创建了一个引用 A 的 B 模型，然后运行了迁移。正如预期的那样，我的 B 表没有主键，只有 A 的外键。

我唯一可以建议的是以下

像这样编写您的 A 模型：

```
class A < ActiveRecord::Base
  has_many :b, :primary_key=>:myPrimaryKeyFunction # name this function whatever you want, other than :id of course
end 
```

然后，在 B 模型中，简单地创建相应的“myPrimaryKeyFunction”函数。

除此之外，我不确定还有什么建议。您正在运行什么版本的 Rails 和哪个数据库？

# javascript - 不安全的 Javascript Iframe

> ID：12018774
> 
> 赞同：0
> 
> 时间：2012-08-18T12:56:56.767
> 
> 标签：javascript, jquery, youtube

> **可能重复：**
> [Youtube 嵌入：不安全的 JavaScript 尝试访问框架](https://stackoverflow.com/questions/6346176/youtube-embed-unsafe-javascript-attempt-to-access-frame)

基本上，当我尝试使用 youtube 链接加载 iframe 时出现错误。它只是一个模态窗口。如果您访问我的页面[http://www.shannonhochkins.com/](http://www.shannonhochkins.com/)并单击页面顶部的“视频缩略图”。你会导致错误。

```
Unsafe JavaScript attempt to access frame with URL http://www.shannonhochkins.com/ from frame with URL http://www.youtube.com/embed/9PxYIijDIfA. Domains, protocols and ports must match. 
```

我真的不知道如何解决这个问题，也不知道它为什么会弹出:(

# php - 完成：对于 Z 公司，计算 A 在 X 天内的平均值。我现在该怎么做：A 平均值最高的公司在第 X 天返回 B 的值？

> ID：12018775
> 
> 赞同：8
> 
> 时间：2012-08-18T12:57:14.410
> 
> 标签：php, mysql, sql

（我将首先解释我的问题。下表（任何示例查询）可在 [http://sqlfiddle.com/#!2/8ec17/4](http://sqlfiddle.com/#!2/8ec17/4)上找到）

我有一张包含股票信息的表格，如下所示：

```
sp100_id  _date         bullishness  returnpct
----------------------------------------------
1         2011-03-16    1.01         -0.33
1         2011-03-17    0.85         -1.28
1         2011-03-18    0.89          1.25
1         2011-03-21    1.46          1.21
1         2011-03-22    0.39         -2.53
2         2011-03-16    3.07          1.27
2         2011-03-17    2.09         -0.80
2         2011-03-18    0.91         -0.12
2         2011-03-21    1.50          0.00
2         2011-03-22    2.62          1.10
3         2011-03-16    0.73         -1.13
3         2011-03-17    1.13          1.21
3         2011-03-18    1.12          0.45
3         2011-03-21    1.00          1.01
3         2011-03-22    1.00         -0.53
4         2011-03-16    0.40          1.10
4         2011-03-17    2.40          0.03
4         2011-03-18    3.16         -0.10
4         2011-03-21    0.86          0.50
4         2011-03-22    1.00          0.10 
```

我需要的是：

*   每连续 3 天，计算每家公司的平均看涨程度 ( `sp100_id`)
*   `returnpct`取平均看涨度最高的公司的第 3 天并存储
*   `returnpct`最后，通过将存储`returnpct`的 s相加来计算总数

在这个例子中有 5 `_date`s，所以有连续的天数对：

*   `2011-03-16`, `2011-03-17`,`2011-03-18`
*   `2011-03-17`, `2011-03-18`, `2011-03-21`（请注意，2011-03-19 不在表中）
*   `2011-03-18`, `2011-03-21`,`2011-03-22`

回到我需要的东西：

*   在前三天，“赢家”是公司 2，平均牛市为 (3.07 + 2.09 + 0.91) / 3 = 2.0233，第三天的回报率为 -0.12。对于其他 2 个“日期范围”，获胜者是公司 4（平均牛市 2.14 和回报率 0.50）和公司 2（牛市 1.67，回报率 1.10）
*   应存储值 -0.12、0.50、1.10
*   总 returnpct 将是 -0.12 + 0.50 + 1.10 = 1.48，应该从查询（或脚本）返回

**问题 1：**关于上面的例子，我的查询返回第 1 天`returnpct`(1.27) 而不是第 3 天`returnpct`(-0.12)。我怎样才能改变这个？

**问题2：**在sqlfiddle中，我连续3天硬编码了第一组。我怎样才能自动化这个（也许使用 php），这样我就不必手动输入所有查询？请注意表格中缺少日期。与示例中一样，脚本应该只取表中的下一个可用日期（所以 after `2011-03-18`come `2011-03-21`，而不是`2011-03-19`因为它不在表中）

**问题 3：**在示例中，我使用了连续 3 天，但理想情况下，可以轻松更改脚本以使用任何其他连续天数（例如 2、4 或 8 天）。因此，应分别存储第 2 天、第 4 天或第 8 天的返回值。

谁能帮我解决我在这里遇到的一些问题？任何帮助是极大的赞赏 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:54:52.743

以下查询对您想要做的事情大有帮助。它计算 3 天的平均值，然后在每个日期内按最高平均值排序：

```
SELECT s.sp100_id, s._date,
       (s.bullishness+splus1.bullishness+splus2.bullishness)/3 as avgb,
       splus2.returnpct
FROM (select s3.*,
             (select min(_date)
                    from stocks s4
                    where s4.sp100_id  = s3.sp100_id and
                          s4._date > s3.dateplus1
                   ) as dateplus2
      from (select s.*,
                   (select min(_date)
                    from stocks s2
                    where s2.sp100_id  = s.sp100_id and
                          s2._date > s._date
                   ) as dateplus1
            from stocks s
           ) s3
     ) s left outer join
     stocks splus1
     on s.sp100_id = splus1.sp100_id and
        s.dateplus1 = splus1._date left outer join
     stocks splus2
     on s.sp100_id = splus2.sp100_id and
         s.dateplus2 = splus2._date
order by 2, 3 desc 
```

在这一点上，使用 mysql 变得乏味。这在支持分析/windows 函数和“with”语句的数据库中会容易得多（例如，除了 mysql 之外的每个数据库：Oracle、Postgres、DB2、SQL Server）。

您可以在 MySQL 中使用单个查询执行 (3)，但这很痛苦。您可能希望在应用程序层中执行此操作。

顺便说一句，感谢您设置 SQL Fiddle。仅出于原因，我会赞成这个问题。

# php - 外部页面中的 Joomla 菜单

> ID：12018778
> 
> 赞同：2
> 
> 时间：2012-08-18T12:57:55.460
> 
> 标签：php, joomla

我正在尝试在页面中从 Joomla 的主菜单中重新创建菜单项，该页面位于 Joomla 的模板文件夹之外。

是否有任何可用的方法，例如 Wordpress 中的“wp_nav_menu”，它可以帮助我生成菜单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:49:01.673

您需要遵循两个步骤

首先，使您的外部页面能够运行 joomla 库。为此，您需要在外部 php 页面中包含几行代码

```
define( '_JEXEC', 1 );
define('JPATH_BASE', dirname(__FILE__).'/../../../../' );   // should point to joomla root
define( 'DS', DIRECTORY_SEPARATOR );
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
$mainframe =& JFactory::getApplication('site');
$mainframe->initialise(); 
```

其次，为您想要的菜单创建一个菜单模块并在自定义位置启用它，例如“xxxx”，然后将以下代码放在您想要放置该菜单的位置

```
jimport( 'joomla.application.module.helper' );
$module = JModuleHelper::getModules('xxxx');
// xxxx is any virtual position, no need to create it anywhere.
echo JModuleHelper::renderModule($module[0]); 
```

# r - 在 r 中使用另一个排列填充一个数据帧

> ID：12018782
> 
> 赞同：1
> 
> 时间：2012-08-18T12:58:35.790
> 
> 标签：r, if-statement, for-loop, dataframe

我有一个数据框，它是“两个方向”上 a、b 和 c 的所有可能排列

```
df1<-data.frame("x"=c("a","a","b"),"y"=c("b","c","c"),"A"=1:3 ,"B"=4:6,"C"=0,"T"=10:12)
df2<-data.frame("x"=df1$y,"y"=df1$x, "A"=df1$A,"B"=df1$B,"C"=df1$C,"T"=df1$T)
df<-rbind(df1,df2)
  x y A B C  T
1 a b 1 4 0 10
2 a c 2 5 0 11
3 b c 3 6 0 12
4 b a 1 4 0 10
5 c a 2 5 0 11
6 c b 3 6 0 12 
```

我想用它来填充第二个空数据框

```
empty<-data.frame("x"=c("a","c"),"y"=c("b","a"),"A"=0,"T"=0)

  x y A T
1 a b 0 0
2 c a 0 0 
```

从而产生：

```
filled<-data.frame("x"=c("a","c"),"y"=c("b","a"),"A"=1:2,"T"=10:11)

  x y A  T
1 a b 1 10
2 c a 2 11 
```

我尝试了一个 for 循环但没有运气

```
for(i in 1:nrow(empty)
{
    if("x" == df$x && "y" == df$y)
    {
        empty[i,"A"]<-df$A 
        empty[i,"T"]<-df$T
    }
} 
```

以及[上](https://stackoverflow.com/questions/11116049/filling-a-matrix-using-a-dataframe-in-r)一篇关于填充矩阵但没有成功的答案。任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:34:32.893

您可以使用`merge`：

```
merge(df[c("x","y","A","T")], empty[c("x","y")])
#   x y A  T
# 1 a b 1 10
# 2 c a 2 11 
```

正如@mrdwab 指出的那样，您不需要创建一个`empty`保存最终数据的数据框。相反，让我们`merge`为您做到这一点。您所需要的只是一个 data.frame ，其中包含`(x,y)`您要提取的对组合：

```
extract.keys <- data.frame(x = c("a","c"), y = c("b","a"))
merge(df[c("x","y","A","T")], extract.keys) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T18:27:11.343

将我的评论移至“答案”，我不确定最终目标是什么。对我来说，即使添加了排列的概念，这似乎也是一个子集的问题。也就是说，如果已经存在关于如何创建 " `empty`"的先验知识`data.frame`，我们可以简单地跳过创建该对象和必须合并的步骤，直接进行子集化。

鉴于`a`and`b`将给出六个排列作为变量`x`and `y`，并且知道我们只对组合`a+b`和感兴趣`c+a`，我们可以轻松地`paste0()`在列上使用`x`和`y`与 which 进行测试。

使用`df`更新的问题：

```
df[paste0(df$x, df$y) %in% c("ab", "ca"), 
   names(df) %in% c("x", "y", "A", "T")]
#   x y A  T
# 1 a b 1 10
# 5 c a 2 11 
```

当然，@flodel 的答案工作得很好，但我只是很困惑，为什么`data.frame`在按列和行索引进行子集化时需要费心创建一个空来填充就足够了。

## 更新

因为我还有其他工作要做，所以我决定做一些基准测试。结果如下：

```
library(rbenchmark)
benchmark(subsetting = df[paste0(df$x, df$y) %in% c("ab", "ca"), 
                 names(df) %in% c("x", "y", "A", "T")],
          merge.keys = merge(df[c("x","y","A","T")], 
                    data.frame(x = c("a","c"), 
                               y = c("b","a"))),
          merge.empty = merge(df[c("x","y","A","T")], empty),
          columns = c("test", "replications", "elapsed",
                      "relative", "user.self"))
#          test replications elapsed relative user.self
# 3 merge.empty          100   0.321 6.294118     0.324
# 2  merge.keys          100   0.387 7.588235     0.384
# 1  subsetting          100   0.051 1.000000     0.048 
```

# macos - 如何将 iterm2 选项卡标题设置为正在运行的 tmux 会话名称？

> ID：12018783
> 
> 赞同：7
> 
> 时间：2012-08-18T12:58:40.597
> 
> 标签：macos, shell, zsh, tmux, iterm

我知道 tmux display-message -p '#S' 将显示当前 tmux 会话名称，但我不知道如何将当前 tmux 会话名称设置为 iterm2 选项卡标题？

这真的可以帮助我区分我同时运行的各种 tmux 会话并立即跳转到正确的选项卡。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-02-23T15:26:03.780

将这些添加到您的 ~/.tmux.conf 中：

```
set-option -g set-titles on
set-option -g set-titles-string "#{session_name} - #{host}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-08T15:58:01.270

将 Hello World 显示为标题的 Bash 版本：

```
echo -ne "\033]0; Hello World \007" 
```

如果您希望每次 bash 打印您的提示时刷新标题：

```
export PROMPT_COMMAND='echo -ne "\033]0;${USER}@${HOSTNAME%%.*}: ${PWD/#$HOME/~}\007"' 
```

[在http://hints.macworld.com/article.php?story=20031015173932306](http://hints.macworld.com/article.php?story=20031015173932306)上找到它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-04T21:44:16.227

把它贴在你的`~/.zshrc`：

```
set_terminal_tab_title() {
  print -Pn "\e]1;$1:q\a"
}

indicate_tmux_session_in_terminal() {
  set_terminal_tab_title "$(tmux display-message -p '#S')"
}

precmd_functions=($precmd_functions indicate_tmux_session_in_terminal) 
```

`precmd_functions`是一个数组，在 zsh 中包含在显示提示之前要调用的函数列表。如果您将自己的函数添加到列表中，则每当显示提示时都会调用它，使其成为定期更新终端选项卡标题的好地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-20T19:19:07.130

我的工作流程通常以窗格为中心，我不使用 tmux，所以我使用了 @mislav 答案的细微变化：

```
set_terminal_tab_title() {
  print -Pn "\e]1;$TABTITLE:q\a"
}

precmd_functions=($precmd_functions set_terminal_tab_title) 
```

我把它扔进了我的 zshrc；然后，在每个窗格中，我`export TABTITLE='FOO'`. 这样，当我切换窗格时，我会在选项卡上获得我想要的标题。

# python - python json序列化日期时间

> ID：12018785
> 
> 赞同：2
> 
> 时间：2012-08-18T12:58:51.820
> 
> 标签：python, django, json, serialization

首先，关于术语的一个简单问题，
Encoding( `json.dumps`) 表示将某些内容转换为 json 字符串，
decode( `json.loads`) 表示将 json 字符串转换为 json 类型（？）

* * *

我有一个我从中得到的对象列表

```
>>> album_image_list = AlbumImage.objects.all().values(*fields)[offset:count]
>>> json.dumps(album_image_list[0], cls=DjangoJSONEncoder)
'{"album": 4, "album__title": "g jfd", "created_at": "2012-08-18T02:23:49Z", "height": 1024.0, "width": 512.0, "url_image": "http://--:8000/media/101ac908-df50-42cc-af6f-b172c8829a31.jpg"}' 
```

但是当我在整个列表（album_image_list）上尝试相同时，它失败了......

```
>>> json.dumps(album_image_list, cls=DjangoJSONEncoder)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/usr/lib/python2.6/json/__init__.py", line 237, in dumps
    **kw).encode(obj)
  File "/usr/lib/python2.6/json/encoder.py", line 367, in encode
    chunks = list(self.iterencode(o))
  File "/usr/lib/python2.6/json/encoder.py", line 317, in _iterencode
    for chunk in self._iterencode_default(o, markers):
  File "/usr/lib/python2.6/json/encoder.py", line 323, in _iterencode_default
    newobj = self.default(o)
  File "/home/--/virtualenvs/aLittleArtist/lib/python2.6/site-packages/django/core/serializers/json.py", line 75, in default
    return super(DjangoJSONEncoder, self).default(o)
  File "/usr/lib/python2.6/json/encoder.py", line 344, in default
    raise TypeError(repr(o) + " is not JSON serializable")
TypeError: [{'album': 4L, 'album__title': u'g jfd', 'created_at': datetime.datetime(2012, 8, 18, 2, 23, 49, tzinfo=<UTC>), 'height': 1024.0, 'width': 512.0, 'url_image': u'http://--:8000/media/101ac908-df50-42cc-af6f-b172c8829a31.jpg'}, {'album': 4L, 'album__title': u'g jfd', 'created_at': datetime.datetime(2012, 8, 18, 1, 54, 51, tzinfo=<UTC>), 'height': 512.0, 'width': 512.0, 'url_image': u'http://--:8000/media/e85d1cf7-bfd8-4e77-b90f-d1ee01c67392.jpg'}] is not JSON serializable
>>> 
```

为什么它在一个元素上成功而在列表中失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-01T08:18:58.693

如果您只想将字典转储到 JSON，只需使用 json.dumps。通过传入一个自定义序列化类可以轻松地序列化对象 - Django 中包含一个已经处理日期时间的类：

```
from django.core.serializers.json import DjangoJSONEncoder
json.dumps(mydictionary, cls=DjangoJSONEncoder) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T13:23:53.530

`.values()`实际上并没有返回列表。它返回一个`ValuesQuerySet`不能被 json 模块序列化的。尝试转换`album_image_list`为列表：

```
json.dumps(list(album_image_list), cls=DjangoJSONEncoder) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T13:22:13.547

您正在使用哪个 DjangoJSONEncoder？看起来 DjangoJSONEncoder 可能不支持结果的编码列表。

试试这个：

[JSON 使用 simplejson 序列化 Django 模型](https://stackoverflow.com/questions/2249792/json-serializing-django-models-with-simplejson)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-09T12:22:00.030

```
class DateTimeJSONEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, datetime.datetime):
            return obj.isoformat()
        else:
            return super(DateTimeJSONEncoder, self).default(obj)

updated_at=DateTimeJSONEncoder().encode(p.updated_at) 
```

这将帮助您序列化日期时间对象

# javascript - 我想根据其中包含的图像设置容器的高度

> ID：12018787
> 
> 赞同：-3
> 
> 时间：2012-08-18T12:59:06.580
> 
> 标签：javascript, html, css

我想在分析图像高度后设置容器的高度。有一个容器，里面有两个图像：

*   如果两个图像的方向都是水平的，那么它的容器应该得到特定的高度（110px）
*   如果一个图像是水平的，一个是垂直的，那么容器的其他高度（130px）
*   如果两个图像都是垂直的，那么另一个高度（160px）

我已经编写了代码，我将首先分析每个图像的方向，然后是另一个函数，它将相应地为容器提供高度。这是我迄今为止尝试过的[jsfiddle 。](http://jsfiddle.net/testtracker/2nnK2/1/)

我想知道，如何将高度设置为容器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:11:19.753

首先，请注意您有多个具有相同 ID 的元素；`frame`. 将其更改为一个类，否则这不是有效的 HTML。

要`height`使用 class 设置容器的`frame`，请执行以下操作：

```
if($(this).width() > $(this).height()) {
    //do other stuff
    $(this).parents(".frame").height(110); //this sets to 110px, can be anything
}
else {
    $(this).parents(".frame").height(130); //this sets to 130px, again, can be anything
} 
```

我希望这对你有任何帮助！

# java - 在 Android 中录制声音并读取 Amplitude

> ID：12018794
> 
> 赞同：5
> 
> 时间：2012-08-18T13:00:38.267
> 
> 标签：java, android, audio, record, amplitude

我正在尝试制作一个应用程序来记录声音一秒钟，然后从录制的声音中读取最大振幅。这是我到目前为止所拥有的，但我的应用程序崩溃了，我不知道为什么。

这是我的第二个活动，我在按下“记录”按钮后从第一个活动中调用。该应用程序在我的模拟器和手机上崩溃。

```
package radu.soundSampler;

import java.io.IOException;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;
import android.media.MediaRecorder;

public class DisplayMessageActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //Intent intent = getIntent();
    //String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

    MediaRecorder rec = new MediaRecorder();
    rec.setAudioSource(MediaRecorder.AudioSource.MIC);
    rec.setOutputFormat(MediaRecorder.OutputFormat.RAW_AMR);
    rec.setOutputFile("/newRecording");
    rec.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);

    try {
        rec.prepare();
    } catch (IllegalStateException e) {

    } catch (IOException o) {

    }
    rec.start();
            for(int i=0;i<100000;i++);
    rec.stop();
    int rezultat = rec.getMaxAmplitude();

    TextView textView = new TextView(this);
    textView.setTextSize(40);

    textView.setText(Integer.toString(rezultat));

    setContentView(textView);
}

} 
```

我电脑上的（**更新**的）错误日志说：

```
08-18 13:30:07.968: E/MediaRecorder(687): start called in an invalid state: 4
08-18 13:30:07.968: D/AndroidRuntime(687): Shutting down VM
08-18 13:30:07.968: W/dalvikvm(687): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-18 13:30:07.978: E/AndroidRuntime(687): FATAL EXCEPTION: main
08-18 13:30:07.978: E/AndroidRuntime(687): java.lang.RuntimeException: Unable to start activity ComponentInfo{radu.soundSampler/radu.soundSampler.DisplayMessageActivity}: java.lang.IllegalStateException
08-18 13:30:07.978: E/AndroidRuntime(687):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-18 13:30:07.978: E/AndroidRuntime(687):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-18 13:30:07.978: E/AndroidRuntime(687):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-18 13:30:07.978: E/AndroidRuntime(687):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-18 13:30:07.978: E/AndroidRuntime(687):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-18 13:30:07.978: E/AndroidRuntime(687):  at android.os.Looper.loop(Looper.java:123)
08-18 13:30:07.978: E/AndroidRuntime(687):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-18 13:30:07.978: E/AndroidRuntime(687):  at java.lang.reflect.Method.invokeNative(Native Method)
08-18 13:30:07.978: E/AndroidRuntime(687):  at java.lang.reflect.Method.invoke(Method.java:507)
08-18 13:30:07.978: E/AndroidRuntime(687):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-18 13:30:07.978: E/AndroidRuntime(687):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-18 13:30:07.978: E/AndroidRuntime(687):  at dalvik.system.NativeStart.main(Native Method)
08-18 13:30:07.978: E/AndroidRuntime(687): Caused by: java.lang.IllegalStateException
08-18 13:30:07.978: E/AndroidRuntime(687):  at android.media.MediaRecorder.start(Native Method)
08-18 13:30:07.978: E/AndroidRuntime(687):  at radu.soundSampler.DisplayMessageActivity.onCreate(DisplayMessageActivity.java:29)
08-18 13:30:07.978: E/AndroidRuntime(687):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-18 13:30:07.978: E/AndroidRuntime(687):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-18 13:30:07.978: E/AndroidRuntime(687):  ... 11 more 
```

所以我想也许模拟器不能“运行”麦克风，所以我`.apk`在手机上安装了它，但它也在那里崩溃了。我不知道可能是什么问题，所以你能帮我，和/或给我任何提示吗？

提前非常感谢！

另一个堆栈跟踪，您请求的那个。我在 catch 语句中使用了`o.printStackTrace()`，`e.printStackTrace()`我希望这是你要求我做的：

```
08-18 14:06:11.908: W/System.err(811): java.io.FileNotFoundException: /newRecording (Read-only file system)
08-18 14:06:11.908: W/System.err(811):  at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
08-18 14:06:11.908: W/System.err(811):  at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
08-18 14:06:11.918: W/System.err(811):  at java.io.FileOutputStream.<init>(FileOutputStream.java:94)
08-18 14:06:11.918: W/System.err(811):  at java.io.FileOutputStream.<init>(FileOutputStream.java:165)
08-18 14:06:11.918: W/System.err(811):  at java.io.FileOutputStream.<init>(FileOutputStream.java:144)
08-18 14:06:11.918: W/System.err(811):  at android.media.MediaRecorder.prepare(MediaRecorder.java:533)
08-18 14:06:11.918: W/System.err(811):  at radu.soundSampler.DisplayMessageActivity.onCreate(DisplayMessageActivity.java:23)
08-18 14:06:11.918: W/System.err(811):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-18 14:06:11.918: W/System.err(811):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-18 14:06:11.918: W/System.err(811):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-18 14:06:11.918: W/System.err(811):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-18 14:06:11.918: W/System.err(811):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-18 14:06:11.918: W/System.err(811):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-18 14:06:11.918: W/System.err(811):  at android.os.Looper.loop(Looper.java:123)
08-18 14:06:11.918: W/System.err(811):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-18 14:06:11.918: W/System.err(811):  at java.lang.reflect.Method.invokeNative(Native Method)
08-18 14:06:11.928: W/System.err(811):  at java.lang.reflect.Method.invoke(Method.java:507)
08-18 14:06:11.928: W/System.err(811):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-18 14:06:11.928: W/System.err(811):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-18 14:06:11.928: W/System.err(811):  at dalvik.system.NativeStart.main(Native Method)
08-18 14:06:11.928: E/MediaRecorder(811): start called in an invalid state: 4
08-18 14:06:11.928: D/AndroidRuntime(811): Shutting down VM
08-18 14:06:11.928: W/dalvikvm(811): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-18 14:06:11.948: E/AndroidRuntime(811): FATAL EXCEPTION: main
08-18 14:06:11.948: E/AndroidRuntime(811): java.lang.RuntimeException: Unable to start activity ComponentInfo{radu.soundSampler/radu.soundSampler.DisplayMessageActivity}: java.lang.IllegalStateException
08-18 14:06:11.948: E/AndroidRuntime(811):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-18 14:06:11.948: E/AndroidRuntime(811):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-18 14:06:11.948: E/AndroidRuntime(811):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-18 14:06:11.948: E/AndroidRuntime(811):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-18 14:06:11.948: E/AndroidRuntime(811):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-18 14:06:11.948: E/AndroidRuntime(811):  at android.os.Looper.loop(Looper.java:123)
08-18 14:06:11.948: E/AndroidRuntime(811):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-18 14:06:11.948: E/AndroidRuntime(811):  at java.lang.reflect.Method.invokeNative(Native Method)
08-18 14:06:11.948: E/AndroidRuntime(811):  at java.lang.reflect.Method.invoke(Method.java:507)
08-18 14:06:11.948: E/AndroidRuntime(811):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-18 14:06:11.948: E/AndroidRuntime(811):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-18 14:06:11.948: E/AndroidRuntime(811):  at dalvik.system.NativeStart.main(Native Method)
08-18 14:06:11.948: E/AndroidRuntime(811): Caused by: java.lang.IllegalStateException
08-18 14:06:11.948: E/AndroidRuntime(811):  at android.media.MediaRecorder.start(Native Method)
08-18 14:06:11.948: E/AndroidRuntime(811):  at radu.soundSampler.DisplayMessageActivity.onCreate(DisplayMessageActivity.java:30)
08-18 14:06:11.948: E/AndroidRuntime(811):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-18 14:06:11.948: E/AndroidRuntime(811):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-18 14:06:11.948: E/AndroidRuntime(811):  ... 11 more
08-18 14:06:14.181: I/Process(811): Sending signal. PID: 811 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-30T15:12:56.460

如果您只是想记录麦克风的“音量”，那么您可以将输出重定向到`null`，如下所示：

```
recorder = new MediaRecorder();
// following calls throw Illegal State Exceptions, but here we follow the proper order

recorder.setAudioSource(AudioSource.MIC);

// After set audio source
recorder.setOutputFormat(OutputFormat.THREE_GPP);

// After set output format
recorder.setAudioEncoder(AudioEncoder.AMR_NB);
recorder.setOutputFile("/dev/null");
// Before prepare

try {
    recorder.prepare();
} catch (IOException e) {
    System.err.println(e);
}
// After prepare
recorder.start();

// Call getMaxAmplitude() with a zero returned value, so you can recall later
recorder.getMaxAmplitude(); 
```

另外，你不应该在里面做一个虚假的延迟`onCreate`。使用处理程序，而不是：

```
public void onCreate(Bundle savedInstanceState) {

    // ...

    handler = new Handler();
    handler.postDelayed(this, 1000);
}

public void run() {
    int value = recorder.getMaxAmplitude();
    recorder.stop();

    // etc
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:58:43.403

利用`setOutoutFile(getExternalFilesDir().getAbsolutePath() + "/newRecording")`

确保您在清单中拥有此权限

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`

不要做忙等待循环。使用计时器。

不要忽略准备中的异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T10:00:25.437

试试这个方法......

```
 int rezultat = 0;   

try {
        rec.prepare();

        rec.start();

        TimeUnit.SECONDS.sleep(1);  

        rec.stop();

    } catch (IllegalStateException e) {

    } catch (IOException o) {

    } catch (InterruptedException e) {      

    }

     rezultat = rec.getMaxAmplitude(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T09:24:06.497

首先，你需要把你的记录放在你可以写的地方。

```
File parent = getContext().getFilesDir();
File recordFile = new File(parent, "newRecording"); 
```

是一个正确的开始。（还有其他）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T08:32:38.203

您的活动崩溃，因为在 onCreate() 方法中引发了异常。你应该绝对避免这种情况发生。从单独的线程调用您的 prepare() 方法（或任何与活动初始化无关的方法），并始终在 catch 块中显示调试消息。

根据经验：永远不要写一个空的 catch {} 块。事后你总会后悔的（相信我）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T14:54:41.140

您无法在根文件系统中创建文件，因为您正在尝试使用`rec.setOutputFile("/newRecording")`. 创建一个临时文件并将其写入那里。您可能需要检查获取私有文件目录[getFilesDir()](http://developer.android.com/reference/android/content/Context.html#getFilesDir%28%29)和相关的方法。

你得到的异常告诉你这个：`FileNotFoundException`发生并告诉你`prepare()`调用失败了。因此，您`MediaRecoder`没有准备好，您将无法做到，`start()`因为它处于错误的状态。

另一条评论：要在停止录制之前等待一秒钟，请使用`Thread.sleep()`而不是`for`循环计数。其次，请在后台线程中执行此操作，因为以任何方式阻塞 UI 线程都可能使您的 UI 变得迟缓，并且在最坏的情况下，Android 可能会因 ANR 异常而终止您的应用程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-27T11:25:44.793

致敬！

您的问题可能是因为您没有在 Android 上使用正确的目录。正如我所看到的，您使用`\`的是根目录，它当然是只读的。

要解决此问题，您可以将外部存储路径添加到文件中，如下所示：

```
String externalStoragePath = Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator;

// Your code here

rec.setOutputFile(externalStoragePath + "newRecording"); 
```

这应该可以解决问题。如果不起作用，请发表评论。

PS 在顶部放置一个断点`onCreate()`并调试您的应用程序以查看它失败的确切位置。

# api - Twitter - 流与 GET 搜索

> ID：12018795
> 
> 赞同：0
> 
> 时间：2012-08-18T13:00:46.880
> 
> 标签：api, twitter, oauth, stream, get

推文的“匿名”GET 搜索和“授权”流搜索之间的主要区别是什么？限制呢？哪种方法更适合搜索带有具体实体（expanded_url）的推文？

还有什么理由我应该使用 OAuth 身份验证？我的意思是这个脚本：[http ://dmacias.org/2010/12/31/playing-around-with-twitter-api-using-tweepy/](http://dmacias.org/2010/12/31/playing-around-with-twitter-api-using-tweepy/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:07:23.273

通过指向用户的 OAuth 链接，您可以查看用户的私人推文以及他们的公开推文。发布推文也需要 OAuth。如果您感兴趣的只是查看人们的公开推文，则不需要 OAuth。

# ruby-on-rails - MongoID、Heroku、MongoLab/HQ，无插件

> ID：12018799
> 
> 赞同：4
> 
> 时间：2012-08-18T13:01:19.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前想测试 heroku mongoid mongolab/mongohq。

但是，我不想使用 heroku 插件，相反，我想配置 mongoid 以通过 uri oder 其他设置直接使用 mongolab/mongohq 数据库。然而，这并没有真正奏效。

这是我到目前为止所做的：

```
rails new test-mongoid --skip-active-record 
```

宝石文件

```
gem 'mongoid'
gem 'haml'
gem 'sass'

rails g mongoid:config 
```

搭建了一个测试模型

```
rails g scaffold Article title:string body:string 
```

mongoid.yml

```
production:
  host: <%= ENV['MONGOID_HOST'] %>
  port: <%= ENV['MONGOID_PORT'] %>
  username: <%= ENV['MONGOID_USERNAME'] %>
  password: <%= ENV['MONGOID_PASSWORD'] %>
  database: <%= ENV['MONGOID_DATABASE'] %> 
```

其他尝试已经使用 mongoid.yml

```
production:
  uri: mongodb://<user>:<password>@<host>:<port>/<database> 
```

填写我的用户名密码等

使用 mongodb 在本地对其进行了测试，一切正常。把它推到heroku，不起作用。

有人已经这样做了绕过那些heroku插件并知道如何处理它吗？

真诚的， cschaeffler

**编辑**

像这样配置我的 mongoid.yml

```
production:
  sessions:
    default:
      hosts:
        - <server>:<port>
      username: <username>
      password: <password>
      database: <dbname> 
```

似乎正在运行......但如果我尝试去脚手架文章索引 app.herokuapp.com/articles

我明白了

```
[2012-08-18 21:54:30] INFO  WEBrick 1.3.1
[2012-08-18 21:54:30] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
[2012-08-18 21:54:30] INFO  WEBrick::HTTPServer#start: pid=2 port=57443
State changed from starting to up
=> Booting WEBrick
=> Rails 3.2.1 application starting in production on http:// 0.0\. 0.0:57443
=> Ctrl-C to shutdown server
=> Call with -d to detach
Started GET "/articles" for 79.199.52.102 at 2012-08-18 21:54:31 +0000
Processing by ArticlesController#index as HTML
Completed 500 Internal Server Error in 264ms
ActionView::Template::Error (undefined method `[]' for nil:NilClass):
11: 
10:   </tr>

14:     <td><%= article.title %></td>
15:     <td><%= article.body %></td>
13:   <tr>
Rendered articles/index.html.erb within layouts/application (208.2ms)
9:     <th></th>
12: <% for article in @articles %>
app/controllers/articles_controller.rb:7:in `index'

app/views/articles/index.html.erb:12:in    _app_views_articles_index_html_erb__1324099721200765517_18939540'

cache: [GET /articles] miss
GET safe-atoll-7856.herokuapp.com/articles dyno=web.1 queue=0 wait=0ms service=342ms status=500 bytes=643
Stopping remaining processes with SIGKILL
Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
Process exited with status 137 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:20:06.507

添加

```
ruby '1.9.3' 
```

到你的`Gemfile`. 从[Mongoid 3 + Heroku (MongoHQ) 导致 Moped::Errors::OperationFailure](https://stackoverflow.com/questions/11494134/mongoid-3-heroku-mongohq-cause-mopederrorsoperationfailure)

如果您在本地使用 Ruby 1.9.3，您可能希望这能正常工作，但事实并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:45:19.900

在你的`mongoid.yml`：

```
production:
  host: your_host.mongohq.com
  port: 10078
  username:your_user_name
  password: your_pass
  database: your_db_name 
```

所以实际上，你所做的很好，应该只是无效或格式不正确的值

# php - PHP for MySQL：转义用户输入以与“LIKE”和“REGEXP”函数一起使用

> ID：12018800
> 
> 赞同：0
> 
> 时间：2012-08-18T13:01:20.590
> 
> 标签：php, mysql, escaping, sql-injection, user-input

多亏了[hakra](https://stackoverflow.com/users/367456/hakra)，我想我应该[在这里从我的原始问题](https://stackoverflow.com/questions/11994134/php-mysql-preparing-user-defined-search-terms-for-query)创建一个规范问题。

转义用户输入以安全地与 MySQL`LIKE`和`REGEXP`函数一起使用（以防止 SQL 注入和其他不希望的可能性）您认为这些解决方案是否足够？假设在以下示例中输入是单个单词。否则它可以很容易地被一个函数处理。

## 为了`LIKE`

```
$input = '__35%';
$inputModf = strtr($input,array('\\'=>'\\\\','%'=>'\\%','_'=>'\\_'));
$inputModf = '%' . [db escape $inputModf here] . '%'; 
```

查询就像`... WHERE field LIKE '$inputModf'`

## 为了`REGEXP`

```
$input = '$35.2';
$spaces = '[[:blank:]]|[[:punct:]]|[[:space:]]';
$inputModf = preg_quote($input);
$inputModf = '(^|'.$spaces.')'.[db escape $inputModf here].'($|'.$spaces.')'; 
```

查询就像`... WHERE field REGEXP '$inputModf'`

# c# - 返回视图不运行控制器代码 mvc

> ID：12018801
> 
> 赞同：1
> 
> 时间：2012-08-18T13:01:29.357
> 
> 标签：c#, asp.net-mvc-3, controller, actionresult

我有一个“返回视图（）”问题，它不会在我的控制器中执行代码。

我有一个带有此代码的控制器：

```
public class BrokerController : BaseController
{

    public ActionResult BestallMaklarBild()
    {
        return View(new BestallMaklarBildViewModel());
    }

    [HttpPost]
    public ActionResult BestallMaklarBild(FormCollection collection)
    {
        try
        {
            //Some code                
            return View("MaklarBildBestalld",new MaklarBildBestalldViewModel());
        }
        catch
        {
            return View(new BestallMaklarBildViewModel());
        }
    }

    public ActionResult MaklarBildBestalld()
    {
       //Some code     
        return View(new MaklarBildBestalldViewModel());
    }
} 
```

当我发布到我的控制器“BestallMaklarBild”然后尝试返回时`view("MaklarBildBestalld",new MaklarBildBestalldViewModel())`，“MaklarbildBestalld”中的代码不会执行。因此，当模型返回到视图时，它不包含任何数据，并导致我的视​​图给我留下一个错误，说`model.something = null`当我尝试将一些数据输出到视图时。

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:30:01.293

这很正常。如果要执行代码，则需要重定向到此控制器操作：

```
try
{
    //Some code                
    return RedirectToAction("MaklarBildBestalld", new { id = "some id" });
}
catch
{
    return View(new BestallMaklarBildViewModel());
} 
```

现在该操作将执行：

```
public ActionResult MaklarBildBestalld(string id)
{
    //Some code     
    return View(new MaklarBildBestalldViewModel());
} 
```

这是正确的工作流程：

1.  `BestallMaklarBild`调用 POST 控制器操作并传递一个视图模型
2.  此控制器操作尝试持久化模型，并在成功的情况下重定向到`MaklarBildBestalld`控制器操作，将唯一标识符作为此模型的查询字符串传递给它，以便此操作能够检索回模型。在失败的情况下，它只是重新显示表单，以便用户可以修复他所做的错误，或者查看处理他的请求时出现问题的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:29:34.993

您必须确保您的视图在参数中将模型作为泛型类型。

# c++ - 似乎是这段小代码中的内存泄漏

> ID：12018806
> 
> 赞同：0
> 
> 时间：2012-08-18T13:02:07.860
> 
> 标签：c++, memory-leaks

GetPlayerName 从内存中获取玩家的名字。GetPlayerId 在数据库中找到玩家的 id，如果没有找到，则插入他。它总是返回一个整数。

每当我通过 playerIDs 行时，有时我的内存使用量（如 taskmgr 所示）会上升 4 或该倍数。即使我超出了此功能的范围，它似乎也永远不会退缩。playerID 和 playerName 的位置始终相同。

我不知道为什么会这样。如果有人能指出我的方向，那就太棒了。

先感谢您，

CX

```
int playerIDs[MAXPLAYERS];
for (int i = 0; i < gd.GetPlayerAmount(); i++)
{
    string playerName = gd.GetPlayerName(i);
    playerIDs[i] = GetPlayerId(playerName);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T13:06:02.310

您显示的代码不会导致内存泄漏，但可能是您调用的函数或由于您调用的函数。要求 valgrind 解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T13:11:22.780

假设字符串是std::string，这段代码没有任何泄漏。问题必须在调用的函数之一内。我猜是 GetPlayerID，因为泄漏是 4 的倍数。此外，还有比使用任务管理器更好的内存泄漏跟踪工具。你用的是什么IDE？

如果您在 MSVC 中，则可以通过添加以下内容来打开一些快速简单的内存泄漏检测：

```
#define _CRTDBG_MAP_ALLOC
#include <cstdlib>
#include <crtdbg.h>

/******************* This goes at the top of main() *******************/
_CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);
_CrtSetBreakAlloc(-1L);
/***********************************************************/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:29:27.350

好像我忘记了一个

```
PQclear(res); 
```

在代码更深的地方，我调试得还不够远。

# entity-framework - Linq to Entity - 关于 foreach 循环中 Where() 与 Where().ToList() 行为的解释/建议

> ID：12018810
> 
> 赞同：2
> 
> 时间：2012-08-18T13:02:36.730
> 
> 标签：entity-framework, c#-4.0, linq-to-entities

所以简而言之的场景：我有一个实体（EF4），它有一个外键到同一实体（层次结构）中的主键，例如

MyEntityId（主键） ParentMyEntityId（主键的外键）

如果我有一个 MyEntityList `List<MyEntity>`，其中两者的 EntityState 都未更改：

```
entity 1 - {MyEntityId = 10, ParentMyEntityId = null}
entity 2 - {MyEntityId = 11, ParentMyEntityId = 10} 
```

然后我这样做：

```
//Initially has 2 items in 'in' clause - iterates once and then exits because the EntityState of the second item has changed to Modified
foreach(MyEntity m in MyEntityList.Where(e => e.EntityState == System.Data.EntityState.Unchanged))
{
     db.DeleteObject(m);
} 
```

第一个 MyEntity 被删除，但第二个更改为“Modified”，并且 foreach 没有第二次运行 - 我猜是由于外键约束。

但是，如果我这样做：

```
//Iterates twice, even though the EntityState of the second item has changed to Modified
foreach(MyEntity m in MyEntityList.Where(e => e.EntityState == System.Data.EntityState.Unchanged).ToList())
{
     db.DeleteObject(m);
} 
```

两个实体都被删除（这是预期的效果）。

虽然我有一个解决方案，但我对为什么会发生这种情况很感兴趣，我总是觉得在 foreach 循环开始时定义的迭代器“set”保持不变，或者如果你尝试抛出运行时错误修改它。

我不应该使用 Where 吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:10:07.197

迭代器集是在循环运行之前定义的，因为您执行`ToList`（如果您不这样做，它将不会被很好地定义）。

所以迭代源是恒定的。**但不是您迭代的对象。**您获得的对象*引用*是常量，但不是它们指向的对象。

没有 ToList 的版本等价于：

```
foreach(MyEntity m in MyEntityList) //always 2 items
{
     //loop body always called two times
     if (e.EntityState == System.Data.EntityState.Unchanged) //2 times
        db.DeleteObject(m); //1 time
} 
```

ToList 版本等价于：

```
var copy = MyEntityList.Where(e => e.EntityState == System.Data.EntityState.Unchanged).ToList(); //always 2 items
foreach(MyEntity m in copy)
{
     //loop body always called two times
     db.DeleteObject(m); //2 times
} 
```

# jasper-reports - 如何在 Jasper/iReport 中创建多页 PDF 报告？

> ID：12018811
> 
> 赞同：4
> 
> 时间：2012-08-18T13:02:45.413
> 
> 标签：jasper-reports, ireport

我想使用*iReport*创建多页 PDF 报告。

当我在*iReport*中设计时，它跨越了 A4 页面大小。如果我增加页面高度，它会打印出页面中的空白空间。如何创建多页报告？

结果报告：

![在此处输入图像描述](../Images/6a48697f41c9f69c274280c4ab0ec820.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:22:23.970

在主报告的通用属性中有页面设置选项。在那里，您可以在输出中提供所需的页面尺寸。也忽略分页标志应该设置为false

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-05T03:49:05.527

我正在使用波纹管代码，它对我来说非常完美。你也可以试试这个代码。

```
<detail>
        <band height="802" splitType="Stretch">
        // page 1 design here
        </band>

        <band height="802" splitType="Stretch">
        // page 2 design here
        </band>

        <band height="802" splitType="Stretch">
        // page 3 design here
        </band>

</detail> 
```

[![我的实际代码输出 pdf 屏幕截图](../Images/63aee171b486cf98ad0b65b63eed6360.png)](https://i.stack.imgur.com/dRS9W.jpg)

请注意：我将所有边距设置为 0 [![我将页边距设置为 0](../Images/7b5cee06a07dbef2aa134a5ce22f7100.png)](https://i.stack.imgur.com/uyGfT.jpg)

# haskell - 箭头如何用于多个元组？

> ID：12018812
> 
> 赞同：1
> 
> 时间：2012-08-18T13:03:12.280
> 
> 标签：haskell, tuples, generic-programming, arrows

```
foo (a1,a2) (b1,b2) (c1,c2) = (bar a1 b1 c1, bar2 a2 b2 c2) 
```

我有很多具有不同数量的参数元组的构造。如果是

```
foo' (a1,a2) = (bar' a1, bar2' a2) 
```

我想“嘿，那是箭！”：

```
foo' = bar' *** bar2' 
```

但是我还不能弄清楚具有多个输入元组的函数（如第一行代码）是否以及如何映射到箭头样式。处理此类功能的通用方法是什么？理想情况下，我总是想要类似`foo = bar ... bar2`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T14:26:50.780

```
let (****) = uncurry (***) in (bar1, bar2) **** (a1, a2) **** (b1, b2) **** (c1, c2) 
```

# java - 在 IntelliJ 调试/运行中将字符串缓冲区传递给 java 程序

> ID：12018813
> 
> 赞同：13
> 
> 时间：2012-08-18T13:03:14.590
> 
> 标签：java, intellij-idea, stringbuffer

如何在 IntelliJ 或 Eclipse 中完成相当于在命令行上运行以下行......：

```
java MyJava < SomeTextFile.txt 
```

我试图在 IntelliJ 的运行/调试配置的程序参数字段中提供文件的位置

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T14:47:20.707

正如@Maba 所说，我们不能在 eclipse/intellij 中使用输入重定向运算符（任何重定向运算符），因为没有 shell，但您可以通过标准输入模拟从文件读取的输入，如下所示

```
 InputStream stdin = null;
        try
        {
        stdin = System.in;
        //Give the file path
        FileInputStream stream = new FileInputStream("SomeTextFile.txt");
        System.setIn(stream);
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

        String line;
        while ((line = br.readLine()) != null) {
            System.out.println(line);
        }
                    br.close(); 
                    stream.close()

        //Reset System instream in finally clause
        }finally{             
            System.setIn(stdin);
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T22:32:09.630

您不能直接在 Intellij 中执行此操作，但我正在开发一个插件，该插件允许将文件重定向到标准输入。有关详细信息，请参阅我对类似问题的回答 [1] 或尝试使用插件 [2]。

[1][在intellij中运行程序时模拟来自stdin的输入](https://stackoverflow.com/questions/18437181/)

[2] [https://github.com/raymi/opcplugin](https://github.com/raymi/opcplugin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T13:22:40.933

为此，您可以使用[BufferedReader从系统输入中读取：](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

String line;
while ((line = br.readLine()) != null) {
    System.out.println(line);
} 
```

# php - mysql查询耗时过长

> ID：12018815
> 
> 赞同：2
> 
> 时间：2012-08-18T13:03:29.030
> 
> 标签：php, mysql, internal-server-error

此查询需要很长时间才能产生结果。并在 php 页面中创建 500 内部服务器错误。

```
SELECT DISTINCT tower_mac_address AS MAC_Address, tower_survey_no AS Survey_No 
FROM tower 
WHERE 
SUBSTR(REPLACE(tower_mac_address,':',''),7,6) 
NOT IN 
    (SELECT DISTINCT deviceid FROM device_data 
    WHERE SUBSTRING(date_time,1,10)=CURRENT_DATE) 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T13:08:03.447

你的查询真的很糟糕。由于您使用的是 SUBSTR(REPLACE ..... 它不能在 tower_mac_address 列上使用索引。对于该内部查询的类似情况，您再次拥有 SUBSTR...。您可以准备具有该 SUBSTR 的新列，而不是这样做（REPLACE ...已经，并在该列上添加索引。

顺便说一句，当您计算应该用于该内部 WHERE 的值时，而不是执行 SUBSTRING 来获取日期时间的日期部分，请使用[DATE()](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:22:53.267

你的问题是NOT IN。MySQL 在优化这方面做得很差。至少文档类解释了这一点。

```
SELECT DISTINCT tower_mac_address AS MAC_Address, tower_survey_no AS Survey_No 
FROM tower t
WHERE  not exists
       (select 1
        from device_data dd
        where dd.deviceid = SUBSTR(REPLACE(t.tower_mac_address,':',''),7,6) and
              SUBSTRING(date_time,1,10)=CURRENT_DATE
       ) 
```

以下是其他建议：

1.  在 device_data.deviceid 上建立索引以加快子查询。
2.  将 date_time 存储为 datetime 数据类型，而不是字符串。这样，与 CURRENT_DATE 的比较不包括隐式转换。
3.  如果“tow_mac_address”包含编码信息，请考虑将其拆分为单独的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T13:18:00.093

`substring`您绝对可以在子查询中摆脱：

```
SELECT DISTINCT deviceid FROM device_data 
WHERE SUBSTRING(date_time,1,10)=CURRENT_DATE;

--is the same as 
SELECT DISTINCT deviceid FROM device_data
WHERE `date_time` >=CURRENT_DATE AND `date_time`<CURRENT_DATE+INTERVAL 1 DAY; 
```

但是第二个查询可以在`date_time`列上使用索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T13:25:24.017

尝试这个

```
SELECT DISTINCT tower_mac_address AS  MAC_Address, tower_survey_no AS Survey_No 
FROM tower LEFT JOIN
(SELECT DISTINCT deviceid FROM device_data WHERE SUBSTR(date_time,1,10)=CURRENT_DATE) d ON SUBSTR(REPLACE(tower_mac_address,':',''),7,6) = d.deviceid
WHERE d.deviceid IS NOT NULL 
```

# jquery - 如何按顺序淡入图像

> ID：12018819
> 
> 赞同：1
> 
> 时间：2012-08-18T13:04:35.587
> 
> 标签：jquery

我已经为此苦苦挣扎了一段时间。一位客户希望在他的网站顶部淡入淡出横幅（我告诉他这看起来很蹩脚）。我设法让一个横幅在 onLoad 中淡入淡出，这很棒。但是，他希望它分阶段加载。

例如，假设该站点名为“Apples & Pears”。他希望“Apples”淡入，然后是“&”，最后是“Pears”。这真的可能吗？传统上，我会创建一个动画 gif 或在 Flash 中做一些事情，但现在这些都是不可以的，对吧？

所以我可以让所有这些图像在 onLoad 中淡入，但是有没有办法说“一旦这个完全淡入，就开始下一个”？

对不起，如果我的要求很笨拙，但我想你会明白我的意思！

非常感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:34:49.887

## *[jsBin 演示](http://jsbin.com/ikurez/2/edit)*

您的 HTML：

```
 <div class="banner">
    <img src="" alt="Apples" />
    <img src="" alt="and" />
    <img src="" alt="Pears" />
  </div> 
```

CSS：

```
.banner img{
   display:none;
   position:absolute;
} 
```

jQuery：

```
$('.banner img').each(function( i ){
  $(this).delay(1000*i).fadeTo(1000,1);
}); 
```

..回调`i`内部`.each()`返回每个图像的索引 ( `0, 1, 2`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:11:14.387

您可以将图像堆叠在一起，然后使用`.fadeIn( [duration] [, callback] ) Returns: jQuery`顶部图像上的函数，并指定一个回调函数，该函数在执行时会淡入第二个图像，依此类推。

# css - SASS 编译空的 CSS 文件？

> ID：12018820
> 
> 赞同：4
> 
> 时间：2012-08-18T13:04:39.227
> 
> 标签：css, sass

我正在尝试将这一小段 SCSS 编译为 CSS：

```
$font-size: 16px;
$em: $font-size / 1em;

$column: 48px;
$gutter: 24px;

 $cols1: ( 1 * ($column + $gutter) - $gutter) / $em;
 $cols2: ( 2 * ($column + $gutter) - $gutter) / $em;
 $cols3: ( 3 * ($column + $gutter) - $gutter) / $em;
 $cols4: ( 4 * ($column + $gutter) - $gutter) / $em;
 $cols5: ( 5 * ($column + $gutter) - $gutter) / $em;
 $cols6: ( 6 * ($column + $gutter) - $gutter) / $em;
 $cols7: ( 7 * ($column + $gutter) - $gutter) / $em;
 $cols8: ( 8 * ($column + $gutter) - $gutter) / $em;
 $cols9: ( 9 * ($column + $gutter) - $gutter) / $em;
$cols10: (10 * ($column + $gutter) - $gutter) / $em;
$cols11: (11 * ($column + $gutter) - $gutter) / $em;
$cols12: (12 * ($column + $gutter) - $gutter) / $em;
$cols13: (13 * ($column + $gutter) - $gutter) / $em;
$cols14: (14 * ($column + $gutter) - $gutter) / $em;
$cols15: (15 * ($column + $gutter) - $gutter) / $em;
$cols16: (16 * ($column + $gutter) - $gutter) / $em; 
```

`sass grid.scss grid.css`两者都试过了`sass --watch grid.scss:grid.css`- 我得到的只是一个空白的css文件。这是怎么回事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T13:53:34.143

正如@pjumble 评论所述，您只是在定义变量。获取您的代码并添加附加`hello_world`语句：

```
$font-size: 16px;
$em: $font-size / 1em;

$column: 48px;
$gutter: 24px;

 $cols1: ( 1 * ($column + $gutter) - $gutter) / $em;
 $cols2: ( 2 * ($column + $gutter) - $gutter) / $em;
 $cols3: ( 3 * ($column + $gutter) - $gutter) / $em;
 $cols4: ( 4 * ($column + $gutter) - $gutter) / $em;
 $cols5: ( 5 * ($column + $gutter) - $gutter) / $em;
 $cols6: ( 6 * ($column + $gutter) - $gutter) / $em;
 $cols7: ( 7 * ($column + $gutter) - $gutter) / $em;
 $cols8: ( 8 * ($column + $gutter) - $gutter) / $em;
 $cols9: ( 9 * ($column + $gutter) - $gutter) / $em;
$cols10: (10 * ($column + $gutter) - $gutter) / $em;
$cols11: (11 * ($column + $gutter) - $gutter) / $em;
$cols12: (12 * ($column + $gutter) - $gutter) / $em;
$cols13: (13 * ($column + $gutter) - $gutter) / $em;
$cols14: (14 * ($column + $gutter) - $gutter) / $em;
$cols15: (15 * ($column + $gutter) - $gutter) / $em;
$cols16: (16 * ($column + $gutter) - $gutter) / $em;

.hello_world{ width: $column } 
```

该命令`sass grid.scss grid.css`产生：

```
.hello_world {
  width: 48px; } 
```

# c++ - 如何在 osx 10.5 上调试这个 stdc++ 崩溃

> ID：12018822
> 
> 赞同：0
> 
> 时间：2012-08-18T13:05:27.857
> 
> 标签：c++, macos, dylib

我有一个为集成为 Adob​​e AIR 本机库而构建的 .dylib。该代码在 osx 10.6、10.7 和 10.8 上运行良好，但我收到报告说它在 10.5 上崩溃了。我似乎找不到关于如何让 10.5 虚拟机在 Mountain Lion 下工作的说明（实际有效），因此我可以对其进行诊断。有没有人遇到过这样的崩溃？

```
Process:         AudioStretch [247]
Path:            /Applications/Speedshifter.app/Contents/Resources/assets/native/audioStretcher/AudioStretch
Identifier:      AudioStretch
Version:         ??? (???)
Code Type:       X86 (Native)
Parent Process:  Speedshifter [240]

Interval Since Last Report:          771 sec
Crashes Since Last Report:           4
Per-App Interval Since Last Report:  0 sec
Per-App Crashes Since Last Report:   4

Date/Time:       2012-08-15 15:56:24.047 +0100
OS Version:      Mac OS X 10.5.8 (9L31a)
Report Version:  6
Anonymous UUID:  19E6C7D0-BED3-47EF-BD79-4C93716A6EEA

Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x0000000000000002, 0x0000000000000000
Crashed Thread:  0

Dyld Error Message:
  Symbol not found: __ZSt16__ostream_insertIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_PKS3_i
  Referenced from: /Applications/Speedshifter.app/Contents/Resources/assets/native/audioStretcher/AudioStretch
  Expected in: /usr/lib/libstdc++.6.dylib 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:58:05.300

希望这可以帮助：

```
> c++filt __ZSt16__ostream_insertIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_PKS3_i
std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, int) 
```

重新格式化以方便阅读：

```
std::ostream& std::__ostream_insert(std::ostream&, char const*, int) 
```

基本上是说此功能在 10.5 的标准运行时中不可用

您可能必须为 10.5 提供替代版本的 dll。您是否尝试过静态链接标准库？

# c# - 如何使用 EntityDataSources 显示两个表中的数据？

> ID：12018833
> 
> 赞同：1
> 
> 时间：2012-08-18T13:06:43.173
> 
> 标签：c#, asp.net, sql-server, entity-framework

我正在为一家销售电话号码的公司创建购物车。要购买电话号码，“客户”需要通过各种步骤来配置他们的电话号码。

*   第一步：选择电话号码
*   第二步：给这个号码添加通话套餐
*   第三步：添加附加功能，例如语音邮件等...
*   第四步：查看订单和结帐

到目前为止，我的方法是一个向导式的过程，我将客户选择存储在一个名为 NumberCart 的数据库中的表中。这存储了步骤一和二的所有信息。

第三步有点棘手，因为客户可以有许多与他们选择的号码相关的选项。为了尝试解决这个问题，我决定将他们的功能选择存储在一个名为 FeatureCart 的单独表中。

我一直在使用实体框架来检索和插入数据。可以通过剪切和粘贴此链接来查看数据模型（因为我是新手，Stackoverflow 只允许我发布两个链接）。

[ armourcreative.co.uk/EntityDesignerDiagram.bmp ]

我的问题是，有没有办法检索两个表并在网页中呈现结果，以便它像下面链接上的图像一样显示？

[正是我想要实现的示例购物车渲染](http://www.armourcreative.co.uk/cart.jpg)

我似乎只能得到两个 EntityDataSources 连接到同一页面上的 NumberFeatureView 和 NumberPackageView 呈现如下链接中的图像：

[示例购物车呈现不是我要找的东西](http://www.armourcreative.co.uk/cart2.jpg)

如您所见，显示用户选择的方式不是很清晰，因为它没有将功能与其所属的电话号码相关联。

我的想法是根据与 NumberPackageView 匹配的 CartID 和 NumberID 以某种方式显示 NumberFeatureView。

如果有人能告诉我如何完成上述工作，我将不胜感激。我可能离题太远了，这就是为什么我迫切需要帮助和指导。

### 修订

好的，我已经设法让他的购物车使用以下代码正确渲染：

```
 <h3>Please review your order!</h3>
<asp:ListView ID="NumberPackageView_LV" runat="server" 
    DataSourceID="NumberPackageView_EDM">

    <EmptyDataTemplate>
        No data was returned.
    </EmptyDataTemplate>

    <ItemTemplate>
        <li style="">
            <asp:HiddenField ID="ID" runat="server" Value='<%# Eval("NumberID") %>' />
            <strong><asp:Label ID="NumberLabel" runat="server" Text='<%# Eval("Number") %>' /></strong>&nbsp;&nbsp;&rarr;&nbsp;&nbsp;
            <asp:Label ID="DestinationLabel" runat="server" Text='<%# Eval("Destination") %>' />
            <br />
            <asp:Label ID="PkgNameLabel" runat="server" Text='<%# Eval("PkgName") %>' />&nbsp;&nbsp;&nbsp;&nbsp;
            <asp:Label ID="PkgMonthlyLabel" runat="server" Text='<%# string.Format("{0:c}",(Eval("PkgMonthly"))) %>' />

            <!-- ENTITY DATA SOURCE FOR FEATURES -->

<asp:ListView ID="NumberFeatureView_LV" runat="server" 
    DataSourceID="NumberFeatureView_EDM">
    <EmptyDataTemplate>
        No data was returned.
    </EmptyDataTemplate>
    <ItemTemplate>
        <li style="">
            <asp:Label ID="FeatureNameLabel" runat="server" Text='<%# Eval("FeatureName") %>' />
            <asp:Label ID="FeatureSetUpLabel" runat="server" Text='<%# string.Format("{0:c}", (Eval("FeatureSetUp"))) %>' />
            <asp:Label ID="FeatureMonthlyLabel" runat="server" Text='<%# string.Format("{0:c}", (Eval("FeatureMonthly"))) %>' />
        </li>
    </ItemTemplate>
    <LayoutTemplate>
        <ul ID="itemPlaceholderContainer" runat="server" style="">
            <li runat="server" id="itemPlaceholder" />
        </ul>
    </LayoutTemplate>
</asp:ListView>

<asp:EntityDataSource ID="NumberFeatureView_EDM" runat="server" 
    AutoGenerateWhereClause="True" ConnectionString="name=ShoppingCartv2Entities" 
    DefaultContainerName="ShoppingCartv2Entities" EnableFlattening="False" 
    EntitySetName="NumberFeatureViews" 
    Select="it.[FeatureName], it.[FeatureSetUp], it.[FeatureMonthly]" Where="">
    <WhereParameters>
        <asp:SessionParameter DefaultValue="0" Name="CartID" SessionField="ShoppingCartv2_CartId" />
    </WhereParameters>
</asp:EntityDataSource>

<!-- ENTITY DATA SOURCE FOR FEATURES [END] -->

 </li>
    </ItemTemplate>
    <LayoutTemplate>
        <ul ID="itemPlaceholderContainer" runat="server" style="">
            <li runat="server" id="itemPlaceholder" />
        </ul>
    </LayoutTemplate>
</asp:ListView>

<asp:EntityDataSource ID="NumberPackageView_EDM" runat="server" 
    AutoGenerateWhereClause="True" ConnectionString="name=ShoppingCartv2Entities" 
    DefaultContainerName="ShoppingCartv2Entities" EnableFlattening="False" 
    EntitySetName="NumberPackageViews" 
    Select="it.[NumberID], it.[Number], it.[Destination], it.[PkgName], it.[PkgMonthly]" Where="">
    <WhereParameters>
        <asp:SessionParameter DefaultValue="0" Name="CartID" SessionField="ShoppingCartv2_CartId" />
    </WhereParameters>
</asp:EntityDataSource> 
```

我现在唯一的问题是，因为结果是在会话购物车上过滤的，所以它会重复存储在 FeatureCart 中的每个数字下的所有特征，而不是显示针对该特定数字选择的特征。（仅当客户将多个电话号码添加到他们的购物车时才会发生这种情况）

例子：

0800 123 0001

*   特色语音信箱
*   功能通话录音
*   特征环组

0800 123 0002

*   特色语音信箱
*   功能通话录音
*   特征环组

### 代替

0800 123 0001

*   特征环组

0800 123 0002

*   特色语音信箱
*   功能通话录音

谁能告诉我如何只显示针对相关数字选择的功能，而不是每个数字的相同选择（如果有意义的话？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:21:06.510

您可能想要尝试的一个选项是创建一个列表并将两个表中的行存储在该列表中，然后将该列表绑定到网格。例如：

```
public class Main
{

    public void BindData()
    {
        List<MyList> myResults = new List<MyList>();

        //Add rows from numbercart to list object
        foreach (var item in NumberCart)
        {
            myResults.Add(new MyList { Item = item.item, Price = item.price });
        }

        //Add rows from feature cart to list object
        foreach (var item in FeatureCart)
        {
            myResults.Add(new MyList { Item = item.item, Price = item.price });
        }

        //Bind to datagrid
        myDataGrid.DataSource = myResults;

    }
}

public class MyList
{
    public string Item {get; set;}
    public float Price {get; set;}
} 
```

# jquery - jquery根据菜单onchange值加载页面元素

> ID：12018834
> 
> 赞同：2
> 
> 时间：2012-08-18T13:06:50.257
> 
> 标签：jquery, if-statement, option, onchange

我有 2 个下拉菜单，我想要这个：当我在名为“ItemCountry”的下拉菜单中选择选项时，div id="StateFeeder" 将根据第一个菜单中的值在另一个页面中加载某个下拉菜单。

**这是第一个菜单：**

```
<label for="ItemCountry">Country <span class="req">*</span></label>
<select name="ItemCountry" id="ItemCountry" class="cat_dropdown" onblur="StateFeeder()">
    <option value=" ">-- Select Country --</option>
    <option value="AU" selected="selected">Australia</option>
    <option value="CA">Canada</option>
    <option value="CN">China</option>
    <option value="NZ">New Zealand</option>
    <option value="RU">Russia</option>
    <option value="US">United State</option>
</select> 
```

**这是第二个菜单：**

```
<div id="StateFeeder">
    <div>
        <label for="ItemState">State <span class="req">*</span></label>
        <select name="ItemState" id="ItemState" class="cat_dropdown">
             <option value="">-- Please select --</option>
             <option value="NSW">NSW</option>
             <option value="VIC">VIC</option>
             <option value="QLD">QLD</option>
             <option value="ACT">ACT</option>
             <option value="TAS">TAS</option>
             <option value="WA">WA</option>
             <option value="SA">SA</option>
             <option value="NT">NT</option>
         </select>
         e.g. NSW         
    </div>
</div> 
```

**我写的 jquery 但它不工作：**

```
<script type="text/javascript">
    $(function() {
        $('#ItemCountry').change(function() {
            if (document.ItemCountry.selectedIndex == 'AU') {
                $("#StateFeeder").empty().html('<img src="/images/mapCountry /AU/ajaxloader.gif" class="IMG-Loading" />');
                $('#StateFeeder>div').load('/StateFeeder/StateFeeder-Buy.html #StateFeeder-AU');
            };
            if (document.ItemCountry.selectedIndex == 'CA') {
                $("#StateFeeder>div").empty().html('<img src="/images/mapCountry/AU/ajax-loader.gif" class="IMG-Loading" />');
                $('#StateFeeder').load('/StateFeeder/StateFeeder-Buy.html #StateFeeder-CA');
            };
            if (document.ItemCountry.selectedIndex == 'CN') {
                $("#StateFeeder").empty().html('<img src="/images/mapCountry/AU/ajax-loader.gif" class="IMG-Loading" />');
                $('#StateFeeder').load('/StateFeeder/StateFeeder-Buy.html #StateFeeder-CN');
            };
            if (document.ItemCountry.selectedIndex == 'NZ') {
                $("#StateFeeder").empty().html('<img src="/images/mapCountry/AU/ajax-loader.gif" class="IMG-Loading" />');
                $('#StateFeeder').load('/StateFeeder/StateFeeder-Buy.html #StateFeeder-NZ');
            };
            if (document.ItemCountry.selectedIndex == 'RU') {
                $("#StateFeeder").empty().html('<img src="/images/mapCountry/AU/ajax-loader.gif" class="IMG-Loading" />');
                $('#StateFeeder').load('/StateFeeder/StateFeeder-Buy.html #StateFeeder-RU');
            };
            if (document.ItemCountry.selectedIndex == 'US') {
                $("#StateFeeder").empty().html('<img src="/images/mapCountry/AU/ajax-loader.gif" class="IMG-Loading" />');
                $('#StateFeeder').load('/StateFeeder/StateFeeder-Buy.html #StateFeeder-US');
            };
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:14:58.527

`selectedIndex`返回所选选项的索引，您应该使用以下`value`属性：

```
 $(function() {
     $('#ItemCountry').change(function() {
         var val = this.value; // value of the select element
         $("#StateFeeder").html('<img src="/images/mapCountry/AU/ajax-loader.gif" class="IMG-Loading" />');
         $('#StateFeeder').load('/StateFeeder/StateFeeder-Buy.html #StateFeeder-'+val);
     })
  }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:15:54.600

```
$('#ItemCountry').change(function() 
{
    /* Take the value of selected option */
    var value = $(this).val();

    /* Use this instead of lots of if statements */
    var str = '/StateFeeder/StateFeeder-Buy.html #StateFeeder-' + value;

    $('#StateFeeder').load(str);
}); 
```

# scenekit - Scene Kit 覆盖 SCNNode 渲染

> ID：12018835
> 
> 赞同：4
> 
> 时间：2012-08-18T13:07:08.813
> 
> 标签：scenekit

我已经查看了看起来很容易使用的 Scene Kit。有一种方法可以覆盖 SCNNode 的渲染，这很好。问题是我想在默认渲染旁边渲染其他元素。当我覆盖 SCNNodeRendererDelegate 中的渲染时，它不再渲染例如附加到它的几何图形。假设我想在顶部渲染几何体的线框、边界框或 2dtext。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:01:03.873

添加一个子节点并将节点的渲染委托设置为这个子节点怎么样？然后使用 [node parentNode] 从渲染器委托方法访问父节点/几何等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T22:01:04.343

可能是一个愚蠢的问题，但是您是否尝试过先用 super 调用原始方法？

```
- (void)renderNode:(SCNNode *)node renderer:(SCNRenderer *)renderer arguments:(NSDictionary *)arguments{
    [super renderNode:node renderer:renderer arguments:arguments];
    //... then your stuff here....

} 
```

# django - 会话变量或额外的上下文？

> ID：12018836
> 
> 赞同：0
> 
> 时间：2012-08-18T13:07:14.937
> 
> 标签：django, django-sessions, django-context

我需要在几乎每个视图上都可以访问一些变量。我想我可以看到如何使用上下文处理器和“额外上下文”值或使用会话变量来做到这一点。有优点和缺点吗？我应该使用哪种方法？是否存在有意义的差异？我看到要访问模板中的会话变量，我必须启用 django.core.context_processors.request

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:36:41.660

会话是存储变量的好方法，您可以在网站的其他页面上使用这些变量。使用会话没有错。

# c# - 跟踪已完成/正在运行的 System.Threading.Tasks.Task 对象

> ID：12018837
> 
> 赞同：3
> 
> 时间：2012-08-18T13:07:18.213
> 
> 标签：c#, .net

我正在编写一个接收消息/请求并异步执行它们的 Windows 服务——它不需要等待项目完成，也不需要关心结果。我能够使用 System.Threading.Tasks.Task 成功地将请求作为任务执行。这些项目中的大多数执行速度很快（不到一秒），但有些需要更长的时间（2-3 分钟）。

作为 Windows 服务，我需要响应“停止”命令，并且某些任务仍将运行。最好不要取消任务，因为运行时间较长的任务可能会使数据处于不良状态（并且回滚非常棘手）。

处理这个问题的最佳方法是什么？我想保留一份我已经开始的任务列表，以便我可以执行 WaitAll。在服务执行期间，它将处理数以万计的请求。我怎么知道什么时候从列表中删除已完成的任务，这样列表才不会疯狂增长？我认为我不应该持有对那么多 Task 对象的引用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:26:12.060

您可以`CancellationToken`用于此目的。一旦发生 OnStop 事件，您只需调用方法`Cancel()`，`CancellationTokenSource`它将传播到您传递令牌的所有任务。有几种技术可以正确取消任务。如果请求取消，您可以不时在任务中明确检查。或者我相信令牌本身有一个属性 ThrowWhenCancelled，如果已请求取消，令牌将抛出一个`CancellationException`.

如果您不关心任务结果，但想要有一个跟踪列表，只需将`List<Task<T>>`（或可能是`ConcurrentBag<Task<T>>`）保留为局部变量。不时启动另一个任务，该任务将通过列表并检查`Task.Status`属性，如果它正在运行或其他。

只要您正确维护这些引用，我认为保留这么多引用不应该是一个问题。此外，这取决于您要如何停止应用程序。如果您对与应用程序一起被终止的任务感到满意，您可能根本不会跟踪它们（除非它们持有一些要持有的资源，并且您需要释放它们）。但在大多数情况下，我会说它应该正确完成。

编辑：只需重读您的帖子。`RequestAdditionalTime`call 可以帮助您等到长时间运行的任务完成。在 MSDN 上查看：[ServiceBase.RequestAdditionalTime 方法](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.requestadditionaltime%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:46:51.283

如果您只关心在服务终止之前完成的任务，我建议您使用`Thread`而不是`Task`.

```
new Thread(WorkerMethod).Start(); 
```

以这种方式创建的线程是所谓的前台线程，您的应用程序（服务）在所有前台线程结束之前不会结束。您需要确保所有前台线程在任何情况下都不会挂起，否则您的应用程序将永远不会自行终止。您可以使用相同的方法实现相同的目的，`Task`但您需要保留已运行的所有任务的列表，并用于[`Task.WaitAll`](http://msdn.microsoft.com/en-us/library/dd270695%28v=vs.100%29.aspx)等待所有任务在您的 Stop 事件中完成。

如果您需要控制您的线程（即保持对它们的引用），您需要使用某种集合。

```
List<Thread> threads = new List<Thread>();
Thread thrd;
threads.Add(thrd = new Thread(WorkerMethod));
thrd.Start(); 
```

但是，如果您确实需要控制和取消您的任务/线程，您应该使用`Task`它使取消更容易。

# jquery - 使用 JQuery 隐藏/显示文本框问题

> ID：12018838
> 
> 赞同：0
> 
> 时间：2012-08-18T13:07:19.520
> 
> 标签：jquery, textbox

我在文本框（假设 B）上有焦点时显示一个文本框（假设 A）并在焦点不在时隐藏。它运行良好。我想在框 A 中输入内容，但是当焦点不在时它会隐藏B.这里我想要这样。如果在 B 中输入了某些内容，A 不应该隐藏甚至焦点从 B 中出来。这是我的 jQuery 代码。

```
 $('#lastname').focusin(function () {
        $('input.hidden').fadeIn(1000);
        $('input.hidden').css('backgroundColor', 'yellow');
        }).focusout(function () {
        $('input.hidden').hide();
        }); 
```

这是 HTML 代码。

```
 <table>
     <tr>
    <td>
   <label>First Name</label></td>
   <td> <input class="required" type="text" name="firstname"    id="firstname" /><span>(required)</span></td>
     </tr>
     <tr>
    <td><br/><label for="lastname">Last Name</label></td>

    <td><input class="required" type="text" name="lastname" id="lastname"/><span>(required)</span></td>
     <%-- 
    <td><br/><label>Invisible</label></td>--%>

    <td><input class="hidden" type="text" name="invisible"  value="Middle Name" id="invisible"/><span>(required)</span></td>
    </tr>
    <tr>
    <td><br/><label>Address</label></td>
    <td><input class="required" type="text" name="address" id="address"/><span>(required)</span></td>
    </tr>
     </table> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:28:41.610

如果不执行隐藏代码，请检查 B 是否包含一些值，如下所示

```
$('#lastname').focusin(function () {
   $('input.hidden').fadeIn(1000);
    $('input.hidden').css('backgroundColor', 'yellow');
}).focusout(function () {
    if(this.value.length <= 0)
       $('input.hidden').hide();
}); 
```

# iphone - 如何以用户友好的方式使用 TWRequest 登录？

> ID：12018841
> 
> 赞同：1
> 
> 时间：2012-08-18T13:07:59.910
> 
> 标签：iphone, objective-c, ios, twitter, twrequest

在查看了 Apple`TWRequest`类（和示例）之后，**我很惊讶它不可能向用户展示登录屏幕。**唯一的方法是检查用户是否输入了其凭据，`[TWTweetComposeViewController canSendTweet]`如果没有，则给出如下消息

**“嘿，您必须手动转到设置-> twitter 并输入凭据。然后您应该手动找到并打开我们的应用程序并继续”**

我想知道是否有人使用这种垃圾功能:) 例如，`Facebook iOS SDK 3`已经实现了**单点登录 (SSO)**，它**使用 Facebook 登录屏幕打开 Safari 并在登录后返回您的应用程序......**我想我需要回退到旧式twitter 与许多 3rd 方的东西集成。

附言。我会尝试使用**ShareKit**，但我需要将我的应用程序与ShareKit 目前不支持的**google+集成。**

# jquery - 为什么确认通行证匹配在移动到服务器时停止工作？

> ID：12018852
> 
> 赞同：0
> 
> 时间：2012-08-18T13:10:22.637
> 
> 标签：jquery, ruby-on-rails, jquery-validate

我正在使用 Rails 和 jQuery 验证插件：在 localhost 中一切正常，但是当我将其移动到服务器时，密码确认以某种方式停止工作。

它总是说，密码不匹配。

这是代码：

```
 'user[password]': {
            required: true,
            minlength: 6
        },
        'user[password_confirmation]': {
            equalTo: "#user_password", 
            minlength: 6,
            required: true
        } 
```

我包含的脚本：

```
 <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
 <script src="/assets/jquery.validate.min.js?body=1" type="text/javascript"></script>
  <script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

和html形式：

```
 <input id="user_password" name="user[password]" size="30" type="password"></div>
  <input id="user_password_confirmation" name="user[password_confirmation]" size="30" type="password"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:19:46.607

你试过：

```
equalTo: "user[password]" 
```

?

# javascript - 超链接在 jplayer 插件的左侧或右侧不起作用

> ID：12018859
> 
> 赞同：0
> 
> 时间：2012-08-18T13:11:27.380
> 
> 标签：javascript, jquery, jplayer

我是建立网站的新手，这是我的第一个。我一直在前进，直到我终于有了可以添加到我放置在 jplayer 左侧和右侧的图像的超链接。Hyperlynks 仅适用于高于或低于的图像。您对如何解决此问题有任何想法吗？这是启动jplayer的脚本

```
 $(document).ready(function(){
        var description = '';

        $('body').ttwMusicPlayer(myPlaylist, {
            tracksToShow:13,
            autoPlay:false, 

            description:description,
            jPlayer:{
                swfPath:'../plugin/jquery-jplayer' 
            }
        });
    }); 
```

这是页面地址：[http ://stevescottcountry.com/music/music.htm](http://stevescottcountry.com/music/music.htm)

请帮忙！太感谢了。

斯特凡尼亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:53:13.927

我找到了解决方案，我很高兴！在 div 中隔离上述 JavaScript 的正确代码是：

```
$(document).ready(function(){
    var description = '';

    $('div#NAME_OF_DIV').ttwMusicPlayer(myPlaylist, {
        tracksToShow:13,
        autoPlay:false, 

        description:description,
        jPlayer:{
            swfPath:'../plugin/jquery-jplayer' 
        }
    });
}); 
```

# c# - 如何从`DropDownList`中存储先前选择的项目

> ID：12018861
> 
> 赞同：0
> 
> 时间：2012-08-18T13:11:52.950
> 
> 标签：c#, asp.net

我有一个, 使用它我必须从数据库`DropDownList`中存储一些值。`CheckBoxList`

在我从 中选择另一个索引之前，必须存储`DropDownList`中的值，`CheckBoxList`以提示用户“在继续之前保存”警报。

我能够显示上述警报消息。但问题是一旦我更改索引`DropDownList`，之前选择的索引就会丢失。

有人可以帮我获取以前选择的值并在`DropDownList`. 因为该值需要存储在数据库中。

显示警报消息的代码是：

```
protected void LOC_LIST2_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (CheckBoxList2.Items.Count > 0)
        {
            Label7.Visible = true;
            Label7.Text = "*Save List Before Proceeding";
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:18:40.593

使用全局变量。

使用下面的代码。`PreviousIndex`将保持前一个，`CurrentIndex`并将保持当前。

```
int PreviousIndex = -1;
int CurrentIndex = -1;

protected void LOC_LIST2_SelectedIndexChanged(object sender, EventArgs e)
{
    PreviousIndex = CurrentIndex;
    CurrentIndex = myDropdownList.Position; // Or whatever the get position is.
    if (CheckBoxList2.Items.Count > 0)
    {
        Label7.Visible = true;
        Label7.Text = "*Save List Before Proceeding";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T13:29:49.717

您可以在页面首次加载时获取所选值

```
 protected void Page_Load(object sender, EventArgs e)
 {

    if (!IsPostBack) // Because When postback occurs the selected valued changed.
    {
        ViewState["PreviousValue"] = ddl.SelectedValue;
    }
 } 
```

并在您选择的索引更改事件中将您以前的值更新为新值

```
protected void ddl_SelectedIndexChanged(object sender, EventArgs e)
{
    ViewState["NewValue"] = ddl.SelectedValue;

    // Do your work with PreviousValue and then update it with NewValue so next you can acces your previousValue using ViewState["PreviousValue"]

    ViewState["PreviousValue"] = ViewState["NewValue"];   
} 
```

或者如果您想访问不同页面上的选定值，请将其保存在 Session 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T13:19:21.813

您可以尝试使用此代码 - 使用会话缓存

```
public string YourOldValue
{
  get
  {
     if(Session["key"] != null) 
        return (string) Session["key"];
  }
  set
  {
     Session["key"] = value;
  }   

 }

 //Set value
 YourOldValue = yourControl.SelectedValue; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T13:26:39.487

```
 protected void LOC_LIST2_SelectedIndexChanged(object sender, EventArgs e)
        {
            Session["SavedItem"] =  LOC_LIST2.SelectedItem;
            if (CheckBoxList2.Items.Count > 0)
            {
                Label7.Visible = true;
                Label7.Text = "*Save List Before Proceeding";
            }
        }

after you access on value or text
SelectedItem item = Session["SavedItem"] as SelectedItem;
if(item !=null)
{
string something= item.Value;
string otherthing =item.Text;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-01T15:34:59.167

所以这就是最终对我有用的方法。综合以上答案。

您必须在页面/控件的 OnLoad 处理程序中跟踪先前和当前选定的索引/值。

```
private int PreviousSelectedIndex
{
    get { return (Page.ViewSate["prevIdx"] == null) ? -1 : (int)ViewSate["prevIdx"]; }
    set { Page.ViewSate["prevIdx"] = value; }
}

private int CurrentSelectedIndex
{
    get { return (Page.ViewSate["currIdx"] == null) ? -1 : (int)ViewSate["currIdx"]; }
    set { Page.ViewSate["currIdx"] = value; }
}

protected override void OnLoad(EventArgs e)
{
    if (!Page.IsPostBack)
    {
        PreviousDropDownValue = ddlYourDropDownList.SelectedValue;
        CurrentDropDownValue = ddlYourDropDownList.SelectedValue;
    }
    else if (Page.IsPostBack && CurrentDropDownValue != ddlYourDropDownList.SelectedValue)
    {
        PreviousDropDownValue = CurrentDropDownValue;
        CurrentDropDownValue = ddlYourDropDownList.SelectedValue;
    }
} 
```

之后，您可以相互比较以前的值和当前值。

# django - Django：为什么我的登录视图/表单和下一个重定向在 safari 中不起作用？

> ID：12018862
> 
> 赞同：0
> 
> 时间：2012-08-18T13:12:01.513
> 
> 标签：django, django-forms, django-views

我在 Safari 中的 Django 登录表单遇到问题，该表单在 Chrome 和 IE 中都成功运行。

在 Chrome/IE 中使用时，表单会正确返回用户名/密码（在需要时），当输入正确的用户名/密码时，用户会登录并重定向到 {{next}}。

在 safari 下，用户名/密码错误也可以正常工作，但是当输入有效的用户名和密码时，用户将被重定向回登录页面而不是 {{next}}。

这是我的登录视图：

```
def login_user(request):
   next = request.GET['next']

   state = ""
   username = password = ""

   if request.POST:
       username = request.POST.get('username')
       password = request.POST.get('password')

       user = authenticate(username = username, password = password)
       if user is not None:
           if user.is_active:
               login(request, user)

               return HttpResponseRedirect(next)
           else:
               state = "You're account is not active"
       else:
           state = "Your're username and/or password are incorrect."

    return render_to_response('access/login.html', { 'state' : state }, context_instance=RequestContext(request)) 
```

以及登录模板中的表单：

```
<form action="" method="post">{% csrf_token %}
<label for="username">username:</label>
    <input type="text" id="username" name="username"/>      
    <label for="password">password:</label>
<input type="password" name="password"/>
    <input type="submit" value="Log In" />

    <p><strong>{{ state }}</strong></p>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:46:11.253

这是我的登录模板（位于 templates/registration/login.html），它有效：

```
{% load url from future %}

{% block content %}

{% if form.errors %}
<p>Your username and password didn't match. Please try again.</p>
{% endif %}

<form method="post" action="{% url 'django.contrib.auth.views.login' %}">
    {% csrf_token %}
    <table>
    <tr>
        <td>{{ form.username.label_tag }}</td>
        <td>{{ form.username }}</td>
    </tr>
    <tr>
        <td>{{ form.password.label_tag }}</td>
        <td>{{ form.password }}</td>
    </tr>
    </table>

    <input type="submit" value="login" />
    <input type="hidden" name="next" value="{{ next }}" />
</form> 
```

只需连接到 django auth 插件，它对我来说“就可以工作”，而无需自定义视图方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:31:59.740

好吧，要么`HttpResponseRedirect`不工作，要么`next`价值错误。

我已经多次使用 HttpResponseRedirect 并且到目前为止没有遇到任何问题。

让我们看看第二个选项。当您在 URL 参数中传递它时，浏览器可以转义某些字符。所以你得到的结果是不工作。也许如果你在控制台中打印下一个，你会看到有什么问题？

希望能帮助到你！

# java - Java和Python中的继承之间的区别

> ID：12018863
> 
> 赞同：7
> 
> 时间：2012-08-18T13:12:01.903
> 
> 标签：java, python, inheritance

执行的 Python 代码：

```
class Test(object):
    item = 0

    def __init__(self):
        print(self.item)

    def test(self):
        print(self.item)

class Subclass(Test):
    item = 1

s = Subclass()
s.test() 
```

给出：

```
1
1 
```

执行的类比 Java 代码：

```
public class Test {
    int item = 0;

    Test(){
        System.out.println(this.item);
    }

    void test(){
        System.out.println(this.item);
    }

    public static void main(String[] args){
        Subclass s = new Subclass();
        s.test();
    }
}

class Subclass extends Test {
    int item = 1;
} 
```

给出：

```
0
0 
```

显然，从基类 (Test) 继承的 Java 方法也使用基类的成员变量。Python方法使用派生类（子类）的成员变量。

问题：有什么方法可以像在 Python 中一样在 Java 中实现相同或至少相似的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T13:30:39.307

Python 中的对象与 Python 中的字典非常相似。`Test`您可以将and的每个实例视为由您声明的类主体中的代码和分配`Subclass`更新的 Dictionary 。`__init__`你可以想象你写的代码是这样工作的：

```
class Test(object):         
    item = 0                # self['item'] = 0

    def __init__(self):
        print(self.item)    # print(self['item'])

    def test(self):
        print(self.item)    # print(self['item'])

class Subclass(Test):       
    item = 1                # self['item'] = 1

s = Subclass()              # Test.__init__({})
s.test() 
```

Python 使用鸭子类型，所以`item`只是你碰巧有一个实例的一些属性。请注意，您实际上不必*声明*item — 您只需分配一个值。这就是为什么您能够“覆盖”子类中的值的原因——因为您实际上只是覆盖了同一字段的旧值。因此，在您给出的示例中，`item`in`Subclass`实际上并没有*覆盖*`item`in `Test`；相反，它们是 Python 对象实例中的同一个字段。

在 Java 中，字段实际上属于特定的类。请注意，在您的代码中，您实际上有*两个*字段声明`int item`：一个 in`Test`和一个 in `Subclass`。当您重新声明`int item`in 时，`Subclass`您实际上是在*隐藏*原始字段。请参阅[Java 简述：3.4.5。阴影超类字段](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_04.htm)以获取更多信息。

我不确定你想用你的例子做什么，但这是一种更惯用的 Java 方法：

```
public class Test {

    private int item;

    public Test() {
        this(0); // Default to 0
    }

    public Test(int item) {
        setItem(item);
        test();
    }

    public void test() {
        System.out.println(getItem());
    }

    public static void main(String[] args) {
        Subclass s = new Subclass();
        s.test();
    }

    public void setItem(int item) {
        this.item = item;
    }    

    public int getItem() {
        return item;
    }

}

class Subclass extends Test {

  public Subclass() {
      super(1); // Default to 1
  }

} 
```

请注意如何`item`通过构造函数参数而不是通过简单的赋值来设置 的值。还要注意如何，`item`现在`private`有一个*getter*和*setter*方法来访问它。这是更多 Java 风格的封装。

这似乎是很多代码，但一个好的 IDE（例如 Eclipse 或 IntelliJ）会为您自动生成很多代码。不过，我仍然认为这是很多样板，这就是我更喜欢 Scala 的原因——但这是一个完全不同的讨论。

***编辑：***

我的帖子太长了，以至于我忘记了为什么要介绍 getter 和 setter。关键是通过封装对字段的访问，您可以做一些更像 Python 中的事情：

```
public class Test {
   // Same as above . . .
}

class Subclass extends Test {

  private int subclassItem = 1;

  public int getItem() {
    return subclassItem;
  }

  public void setItem(int item) {
    this.subclassItem = item;
  }

} 
```

现在该`item`字段已被有效地覆盖，因为对其的所有访问都是通过 getter 和 setter 完成的，并且这些已被覆盖以指向新字段。但是，这仍然会导致`0 1`输出而不是`1 1`您所期望的。

这种奇怪的行为源于您从构造函数中打印的事实——这意味着对象实际上还没有完全初始化。如果在构造期间将引用传递到构造函数之外，这尤其危险，`this`因为它可能导致外部代码访问不完整的对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T13:31:36.157

您可以重载超类构造函数以将字段初始化`item`为`Test`0：

```
public class Test {
    int item = 0;

    Test(){
        System.out.println(this.item);
    }

    Test(int item) {
        this.item = item;
        System.out.println(this.item);
    }

    void test(){
        System.out.println(this.item);
    }

    public static void main(String[] args){
        Subclass s = new Subclass();
        s.test();
    }
}

class Subclass extends Test {

    public Subclass() {
        super(1);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T13:27:57.607

使用[初始化器](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)而不是重新声明字段：

```
public class Test {
   int item = 0;

   ...
}

public class Subclass extends Test {
    {
        item = 1;
    }
} 
```

注意：根据您的包结构，您可能希望声明`item`为[`protected`](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html).

# magento - 使用soap api访问magento中的图像。无法访问缩略图。需要调整图片大小

> ID：12018866
> 
> 赞同：4
> 
> 时间：2012-08-18T13:12:30.360
> 
> 标签：magento, image-processing, soap, image-resizing, magento-1.7

我正在magento中使用soap api构建一个新的第三方应用程序，它能够在移动设备上销售产品。但问题是我在增加产品列表时没有找到任何方法来显示缩小尺寸的图像。我正在使用 catalog_product_attribute_media.list 来查找图像 url，但该 url 是全尺寸和大图像。我无法使用肥皂 api 找到缩略图和 small_images 的 url。这是因为 magento 会自动生成它们。我不能使用大尺寸的图像，因为这个应用程序是在移动网络上使用的。有没有人可以告诉我如何解决这个小尺寸图像问题。或者告诉我使用magento的soap api使用这些缩略图的任何方法。如果您知道任何可以减少图像内存大小的动态图像尺寸减小方法，那么也请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:31:07.320

试试这个模块，很好的处理图片和调整大小的方法，[http://www.magentocommerce.com/magento-connect/cloud-zoom-4634.html](http://www.magentocommerce.com/magento-connect/cloud-zoom-4634.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-19T21:41:40.703

这里是[源](http://www.magentocommerce.com/api/soap/catalog/catalogProductAttributeMedia/catalog_product_attribute_media.types.html)，

> 允许您检索产品图像类型，包括标准图像、小图像、缩略图等。

**SOAP API V1 请求：**

```
$client = new SoapClient('http://magentohost/api/soap/?wsdl');

// If somestuff requires api authentification,
// then get a session token
$session = $client->login('apiUser', 'apiKey');

$result = $client->call($session, 'catalog_product_attribute_media.types', '4');
var_dump($result);

// If you don't need the session anymore
//$client->endSession($session); 
```

**回复：**

```
array
  0 =>
    array
      'code' => string 'image' (length=5)
      'scope' => string 'store' (length=5)
  1 =>
    array
      'code' => string 'small_image' (length=11)
      'scope' => string 'store' (length=5)
  2 =>
    array
      'code' => string 'thumbnail' (length=9)
      'scope' => string 'store' (length=5) 
```

# codeigniter - Codeigniter select_avg('columnname') WHERE thisaverage > x

> ID：12018868
> 
> 赞同：1
> 
> 时间：2012-08-18T13:12:48.503
> 
> 标签：codeigniter, activerecord, average

我想要做的是从我的数据库中选择平均评论大于 7 的项目。

```
$this->db->select_avg('reviews.overall'); 
```

该查询选择“总体”的平均评论。

因此我认为我可以简单地使用

```
$this->db->where('overall>','7'); 
```

然而，这不起作用。

有任何想法吗？

谢谢

编辑放入空间

```
 $this->db->select_avg('reviews.overall');
    $this->db->where('overall >','7'); 
```

产生错误

> where 子句中的“整体”列不明确

这是模棱两可的，但我现在要如何引用它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:37:41.353

它也写在codeigniter用户手册中：

`$this->db->select_avg();`为您的查询写入“SELECT AVG(field)”部分。与 select_max() 一样，您可以选择包含第二个参数来重命名结果字段。

如果您在 CI 中启用分析器，您会看到此代码生成什么查询。您的代码生成如下：

```
SELECT AVG(reviews.overall) as reviews.overall FROM .... 
```

像这样使用它：

```
$this->db->select_avg('reviews','overall');
$this->db->from('table name');
$this->db->where('overal >', 7);
$Q = $this->db->get(); 
```

# c++ - 带有自定义删除的 static_pointer_cast

> ID：12018873
> 
> 赞同：2
> 
> 时间：2012-08-18T13:14:20.830
> 
> 标签：c++, casting

我有这个函数，它将派生自容器的任何类添加`Object`到容器中。

```
template<class T> void registerObject(T& object) {
    auto sp = std::shared_ptr<T>(&object, [](T*){});
    std::shared_ptr<Object> op = std::static_pointer_cast<Object>(sp);
    objects_.push_back(op);
} 
```

发生了什么`static_pointer_cast`使自定义删除方法对新指针仍然有效？

我问是因为 lambda 不会评估为采用派生类型吗？但是然后转换的指针会将 a 传递`Object*`给那个 lambda？那么在调用自定义删除时不会发生一些“向上转换”吗？我认为这是不可能的，因为您不能保证基类型是派生类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:02:01.727

这是 a 的`boost::shared_ptr`工作原理：

*   每个实例（在您的代码中）都有一个指向指针的共享单个*控制块*的指针。

*   至少从概念上讲，它还有一个指向指针的原始指针，该指针是此实例所隐含的类型。由于可以调整此原始指针的类型，而不是与原始指针指针相同的位模式。

*   控制块包含原始原始指针、引用计数和原始删除函数。使用原始指针指针作为参数调用删除函数（何时以及如果是）。

当您施放时，您只会影响新`shared_ptr`实例，而不是它指向的控制块。因此，删除所需的信息完全不受影响。即使实例的（概念）类型的指针指针可能会受到影响。

# facebook - Facebook PHP SDK 存储会话 cookie。我怎样才能阻止这个？

> ID：12018877
> 
> 赞同：1
> 
> 时间：2012-08-18T13:14:54.047
> 
> 标签：facebook, cookies, facebook-php-sdk, session-cookies

不幸的是，我住在欧盟，有这个可怕的饼干立法。

请参阅下面我的应用程序实例。

```
$facebook = new Facebook(array(
    'appId'  => $fb_app_id,
    'secret' => $fb_secret,
    'cookie' => true
)); 
```

不幸的是，这存储了一个名为...的cookie。`PHPSESSID`

我怎样才能防止这个cookie永远下载？？？

我试过这个，但没有奏效......

```
$facebook = new Facebook(array(
    'appId'  => $fb_app_id,
    'secret' => $fb_secret,
    'cookie' => false
)); 
```

任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:30:03.667

您将不得不[`Facebook`](https://github.com/facebook/facebook-php-sdk/blob/master/src/facebook.php)从 facebook sdk 重新实现该类。Base_Facebook 类中的功能的核心，并且`Facebook`仅实现会话持久性（调用[`session_start()`](https://github.com/facebook/facebook-php-sdk/blob/master/src/facebook.php#L60)它`__constructor`会创建该 cookie）。

您还必须找到一种新方法让您的用户可以使用会话。PHP 支持在 URL 中传递的 sessionid：

```
ini_set("session.use_cookies", 0);
ini_set("session.use_trans_sid", 1); 
```

但这并不是一个好主意（非恶意 url 复制粘贴可以很容易地窃取会话）。

# cakephp-1.3 - 如何在 CakePHP 的 JavaScript 事件回调中使用多个回调

> ID：12018886
> 
> 赞同：1
> 
> 时间：2012-08-18T13:16:00.767
> 
> 标签：cakephp-1.3

我想在触发CakePHP的*JsHelper的事件函数时放一个加载 div。*这是我的代码：

```
$this->Js->get('#MonthlyProgressProjectId')->event('change',
            $this->Js->get('#MonthlyProgressAddForm')->request(array(
                'action' => 'get_institution'), array(
                'update' => '#institution',
                'dataExpression'=>TRUE, 
                'method'=>'POST',
                'async'=>TRUE,
                'data' => $js->serializeForm(array('isForm' => TRUE, 'inline' => TRUE))))); 
```

在这里你看，我得到了表格，然后使用了这个`request()`函数。但是在触发此功能时，我想显示一个加载 div。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:38:04.577

将加载图像添加到您想要的位置。例如 `$this->Html->image('loading.gif', array('id'=> 'loader'));`

将以下内容添加到请求的选项数组中：

```
'before' => $this->Js->get('#loader')->effect('fadeIn', array('buffer' => false));
'complete' => $this->Js->get('#loader')->effect('fadeOut', array('buffer' => false)); 
```

现在你几乎完成了。您希望`#loader`在第一次登陆页面时不可见，因此添加到您的 CSS`#loader { display: none; }`中。

现在，当您的事件被触发时，`#loader`将随着您的加载图像淡入。完成后，它会再次淡出。如果你想要一个 div 围绕它，只需用一个 ID 围绕它包装一个 div，然后对其执行操作。

# xcode - 从 Xcode 项目搜索中排除字符串

> ID：12018889
> 
> 赞同：2
> 
> 时间：2012-08-18T13:16:59.990
> 
> 标签：xcode

我有名称相似的对象，当在 xcode 中搜索项目时，例如 currentTrack，名称为 currentTrackList 的对象也出现在搜索查找器中。

有没有办法排除字符串或选择仅 currentTrack 并从搜索查询中忽略 currentTrackList？

我听说过 Code Pilot，但从未使用过它。代码飞行员可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T13:22:51.683

如果您查看搜索选项卡中的下拉菜单（搜索图标旁边的搜索字段中有一个向下箭头），有一个名为 show find options 的选项，其中有一个名为 Hits Must 的部分：

更改它以匹配搜索词

默认情况下，它包含搜索词

# java - 在 Velocity 模板中迭代 JSONArray

> ID：12018892
> 
> 赞同：1
> 
> 时间：2012-08-18T13:17:43.200
> 
> 标签：java, velocity, arrays

我正在尝试在**速度模板中迭代****JSONArray** 但它不起作用我发现速度模板可以迭代集合、数组、哈希映射对象任何人都可以帮助我迭代 JSONArray

 **提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:21:11.917

您可以使用自定义 uberspector 执行此操作。这使您可以自定义 Velocity 如何解释获取/设置/迭代器。

我最近为 jsonlib 做了同样的事情。这是我的超级监察员。

```
package util;

import java.util.Iterator;

import net.sf.json.JSONArray;

import org.apache.velocity.util.introspection.Info;
import org.apache.velocity.util.introspection.SecureUberspector;

/**
 * Customized Velocity introspector.  Used so that FML can iterate through JSON arrays.
 */
public class CustomUberspector extends SecureUberspector
{
    @Override
    @SuppressWarnings("rawtypes")
    public Iterator getIterator(Object obj, Info i) throws Exception
    {
        if (obj instanceof JSONArray)
        {
            return new JsonArrayIterator((JSONArray) obj);
        }
        else
        {
            return super.getIterator(obj, i);
        }
    }
} 
```

JsonArrayIterator 只是一个简单的遍历数组的迭代器。如果您使用不同的 JSON 库，只需自定义此类。

```
package util;

import java.util.Iterator;

import net.sf.json.JSONArray;
import net.sf.json.JSONException;

public class JsonArrayIterator implements Iterator<Object>
{
    private final JSONArray array;
    private int nextIndex;
    private final int length;

    public JsonArrayIterator(JSONArray array)
    {
        this.array = array;
        nextIndex = 0;
        length = array.size();
    }

    @Override
    public boolean hasNext()
    {
        return nextIndex < length;
    }

    @Override
    public Object next()
    {
        nextIndex++;
        try
        {
            return array.get(nextIndex - 1);
        }
        catch (JSONException e)
        {
            throw new IllegalStateException(e);
        }
    }

    @Override
    public void remove()
    {
        throw new UnsupportedOperationException();
    }

} 
```

最后一步是在你的速度属性中指定 uberspector。

```
runtime.introspector.uberspect=util.CustomUberspector 
```**

# html - 在css中将标题背景运行到全宽

> ID：12018899
> 
> 赞同：0
> 
> 时间：2012-08-18T13:18:52.917
> 
> 标签：html, css

我是网页设计的初学者，我在 3 天前开始了我的网站，并且经常遇到一些问题，所以我删除了我的旧脚本并编写了一个新脚本。现在新的在顶部的整个宽度上遇到了这个问题。我的问题：！[在此处输入图像描述][1]

正如您在我的一半大小的浏览器的右上角看到的那样，出现了一个“空白”空间。但是在全尺寸浏览器窗口中没有空间发生......（窗口越小，“白色”空间就越大。

我的 html 脚本和我的 CSS 脚本将出现在这里：

[http://jsfiddle.net/PWrHG/](http://jsfiddle.net/PWrHG/)

我的问题是这个“空白”空间为什么以及如何发生？请注意：我已经在脚本区域中找到了关于如何拥有完整空间的解决方案，但我无法找到并回答差异以及为什么以及如何发生这种情况。ps：我真的很感激能得到答复。亲切的问候阿西尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:39:38.883

在 ：

```
#top
{   
    width:100%;
} 
```

宽度：100% 使顶部分区拉伸到浏览器宽度。因此，如果您的浏览器宽度小于 980 像素，那么它将被拉伸到该宽度。所以让我们假设浏览器的宽度是 600 像素，那么它会自动拉伸到 600 像素。左边的 380px 将是空白。并且由于包装器比顶部更宽，因此页面底部将添加一个滚动条。当前视图的#Top 完全拉伸到浏览器宽度，#Wrapper 溢出浏览器宽度。

# erlang - 我的 gen_server 会成为瓶颈吗？

> ID：12018902
> 
> 赞同：2
> 
> 时间：2012-08-18T13:19:33.310
> 
> 标签：erlang, gen-server

我目前正在用 erlang 编写一个软件，它现在基于 gen_server 行为。这个 gen_server 应该导出一个函数（我们称之为 update/1），它应该使用 ssl 连接到另一个在线服务，并将作为参数传递给函数的值发送给它。

当前 update/1 是这样的：

```
update(Value) ->
  gen_server:call(?SERVER, {update, Value}). 
```

因此，一旦调用它，就会调用 ?SERVER ，其处理方式如下：

```
handle_call({update, Value}, _From, State) ->
    {ok, Socket} = ssl:connect("remoteserver.com", 5555,  [], 3000).
    Reply = ssl:send(Socket, Value).
    {ok, Reply, State}. 
```

一旦数据包被发送到远程服务器，对等方应该切断连接。

现在，这适用于我在 shell 中的测试，但是如果我们必须调用 1000 次 mymod:update(Value) 并且 ssl:connect/4 不能正常工作（即达到超时）会发生什么？

此时，我的 gen_server 将有非常大量的值，它们只能一个一个地处理，导致第 1000 次更新将在使用 update/1 更新其值后仅 1000*3000 毫秒完成。

使用强制转换而不是调用会留下同样的问题。我怎么解决这个问题？我应该使用普通函数而不是 gen_server 调用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T17:18:32.163

根据个人经验，我可以说每个 gen_server 进程有 1000 条消息不会成为问题，除非您正在排队大消息。

如果从您的测试来看，您的 gen_server 似乎无法处理这么多负载，那么您必须在应用程序的启动时（或运行时）最好在主管进程下创建 gen_server 的多个实例。

除此之外，我真的不明白每次更新都建立新连接的要求！您应该考虑一些优化，例如与服务器的缓存连接/预连接..否？

# ios5 - 为什么我的 iOS 表格视图不起作用

> ID：12018906
> 
> 赞同：0
> 
> 时间：2012-08-18T13:19:51.000
> 
> 标签：ios5

我正在学习 iOS 编程，但我在使用 tableview 时遇到了问题。通过点击表格视图中的一个单元格，我希望我的程序更改为另一个视图，这是我的代码。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    testViewController* controller=[[testViewController alloc] initWithNibName:@"testViewController" bundle:nil];
    controller.imageView.image=[UIImage imageNamed:@"gyf.jpg"];
    [self.navigationController pushViewController:controller animated:YES];
} 
```

testViewController 控制的视图超级简单。其中只有一个图像视图。但是当我点击单元格后，屏幕上只有一个空白视图，没有任何图像。在调试之后`controller.imageView.image=[UIImage imageNamed:@"gyf.jpg"];`，我发现controller.imageview 是nil。 **请告诉我问题出在哪里以及为什么会发生这种现象，非常感谢** 我使用Xcode 4.3.3并在iPhone 5.1模拟器上运行程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:29:03.827

（此答案假设您的`testViewController`显示器正常，只是没有得到您想要的图像。）

当您创建一个新控制器并推送它时，它的视图层次结构在它执行之前不会加载`viewDidLoad:`。您正在尝试在此`imageView`之前更新它。尝试向 中添加一个`UIImage`属性`testViewController`，在此代码中设置该属性，然后在`imageView`所有视图在新控制器中有效后更新。

# c++ - ofstream的时间可以忽略不计

> ID：12018911
> 
> 赞同：1
> 
> 时间：2012-08-18T13:21:32.077
> 
> 标签：c++, time, ofstream

我有一个 C++ 程序，我在其中进行各种实验，在这些实验中，我使用`ofstream`. 结构基本上是：

```
 Start timer

 output to a file using ofstream (the output is, at most, a few words)

 do some experimental work

 Stop timer 
```

我的问题有点宽泛，我可以忽略 ofstream 所花费的时间还是可以忽略不计？或者我想这取决于？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T13:34:29.437

首先，从您的伪代码中，您可以在文件输出后启动计时器 :-) 但我猜在真正的应用程序中它不是那样的。

除此之外，这显然是一个“取决于”的问题。如果您没有输出那么多，并且您感兴趣的代码运行了几分钟，那么输出显然不会有太大的不同。另一方面，如果您试图捕捉以微秒为单位测量的运行时间，那么您可能主要测量的是 ofstream。

您可以尝试做各种魔术，例如在线程上运行实际输出，或者只是将您的消息添加到先前分配的 char 数组并在最后输出。但是，一切都会导致一些运行时损失；没有什么是免费的。

由于您对测量实际输出时间不感兴趣，您可以编译一个没有输出的版本来进行测量，并编译一个带有输出的版本来调试代码。编辑：或将其设为运行时选项。没有什么是免费的，但是“如果（OutputEnabled）”非常接近“免费”:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T13:27:36.270

它主要取决于做什么`ofstream`......只要它只是将数据存储在其内部缓冲区中就会很快，但如果它的缓冲区被填满并实际调用 OS API 来执行写入，那么花费的时间可能会大得多。

但显然一切都取决于“实验工作”与您执行的 IO 相比需要多长时间，无论是在它只是将数据写入内部缓冲区的情况下，还是在刷新流的情况下；正如评论中所建议的那样，您应该独立地为这两件事计时，看看一个时间与另一个时间相比如何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T13:33:30.897

与其他事物相比，某些事物可以忽略不计。在您的问题中，您无法与其他任何东西进行比较。

我已经在这里问了一个问题，以检查我在下面的陈述的有效性，结论是我不应该保留这样的分类，尽管它仍然只是给出*了一个粗略的粗略评估*（在某些情况下可能是错误的）：

*堆栈操作比堆内存创建快 10 倍，堆内存创建比图形设备操作快 10 倍，比 I/O 操作（例如写入硬盘驱动器上的文件）快 10 倍，比网络通信操作快 10 倍......*

这只是一个粗略的估计。每次编码时都必须重新评估所有内容。

如果写入 ofstream 的时间不会影响整个机制，那么它可以被认为可以忽略不计。

如果它确实影响了你的整个程序机制，那么它就不能被认为是微不足道的。明显地。

# php - 子串另一个函数

> ID：12018914
> 
> 赞同：-1
> 
> 时间：2012-08-18T13:22:06.633
> 
> 标签：php, substring

```
<input type="hidden" name="com_link" value="?dir=<?php echo 'gallery/'.urldecode($curr_image['dir']); ?>&pic=<?php echo substr(urldecode($curr_image['filename']), 0, -4); ?>"> 
```

`substr(urldecode($curr_image['filename']), 0, -4);`我想不发送文件名`.jpg`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T13:24:22.557

您可以使用几种方法来获取没有扩展名的路径。

一种是将PHP`substr()`与以下一起使用[`strrpos()`](http://php.net/strrpos)：

```
$image = urldecode($curr_image['filename']);
$name = substr($image, 0, strrpos($image, '.')); 
```

这将得到一个`$image`直到最后一个的子字符串`.`。

另一种方法，如果您知道扩展名将始终是 4 个字符长（包括`.`），则只需去掉最后 4 个字符：

```
$image = urldecode($curr_image['filename']);
$length = strlen($image);
$name = substr($image, 0, $length - 4); 
```

最后一种方法似乎是您一开始就尝试做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:23:29.857

你为什么不试试[http://php.net/basename](http://php.net/basename)

```
<?php echo basename($curr_image['filename'], '.jpg'); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T13:27:37.950

尝试

```
 urlencode(pathinfo($curr_image['filename'], PATHINFO_FILENAME)); 
```

# python - wpa-handshake 与 python - 散列困难

> ID：12018920
> 
> 赞同：7
> 
> 时间：2012-08-18T13:22:46.597
> 
> 标签：python, hash, handshake, wpa

我尝试编写一个 Python 程序来计算 WPA 握手，但我遇到了哈希问题。为了比较，我安装了cowpatty *（看看我从哪里开始出错）*。

我的 PMK 生成工作正常，但 PTK 计算似乎总是错误的。我不确定是否必须格式化我的输入*（macadresses 和 noces）*，或者只是将它们作为字符串提供给函数。

我会给你我的路由器信息，这没问题，因为我只是设置它进行测试。

我的程序如下所示：

```
import hmac,hashlib,binascii

passPhrase  = "10zZz10ZZzZ"
ssid        = "Netgear 2/158" 
A           = "Pairwise key expansion" 
APmac       = "001e2ae0bdd0"
Clientmac   = "cc08e0620bc8"
ANonce      = "61c9a3f5cdcdf5fae5fd760836b8008c863aa2317022c7a202434554fb38452b"
SNonce      = "60eff10088077f8b03a0e2fc2fc37e1fe1f30f9f7cfbcfb2826f26f3379c4318"
B           = min(APmac,Clientmac)+max(APmac,Clientmac)+min(ANonce,SNonce)+max(ANonce,SNonce)
data="0103005ffe010900200000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"

def customPRF512(key,A,B):
    blen = 64
    i    = 0
    R    = ''
    while i<=((blen*8+159)/160):
        hmacsha1 = hmac.new(key,A+chr(0x00)+B+chr(i),sha)
        i+=1
        R = R+hmacsha1.digest()
    return R[:blen]

pmk = pbkdf2(passPhrase, ssid, 4096, 32) #no sourcecode, since b2a_p(pmk) output fits to those of cowpatty

ptk = customPRF512(pmk,A,B) #the prf-function fits the pseudocode in the ieee, but does not give me the correct output (like cowpatty does)
# and i have no idea why :(

print b2a_p(pmk),"\n\n\n"
print b2a_p(ptk),"\n\n\n"

mic1 = hmac.new(ptk[0:16],data)
print mic1.hexdigest() #should be the mic-calculation, not sure if this is correct... 
```

所需的输出*（cowpatty 确认）*是：

```
PMK is
 01b8 09f9 ab2f b5dc 4798 4f52 fb2d 112e
 13d8 4ccb 6b86 d4a7 193e c529 9f85 1c48

Calculated PTK for "10zZz10ZZzZ" is
 bf49 a95f 0494 f444 2716 2f38 696e f8b6 
 428b cf8b a3c6 f0d7 245a d314 a14c 0d18
 efd6 38aa e653 c908 a7ab c648 0a7f 4068
 2479 c970 8aaa abc3 eb7e da28 9d06 d535

Calculated MIC with "10zZz10ZZzZ" is
 4528 2522 bc67 07d6 a70a 0317 a3ed 48f0 
```

也许你们中的某个人可以告诉我，为什么我的程序根本不起作用。hmac 功能是否正常工作？我的输入格式错误吗？我必须在任何地方考虑字节序吗？提前感谢您的宝贵时间，我将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T13:14:21.643

好吧，我自己想通了……更多的是通过绝望的测试和一些运气，而不是成功的研究，这导致了足够长的时间。而不是使用 MAC 地址和随机数作为字符串，我不得不取消它们的十六进制。我用了

```
a2b_hex() #alternatively unhexlify() 
```

我的最终代码看起来有点像这样，不包括 defs：

```
import hmac,hashlib,binascii
passPhrase="10zZz10ZZzZ"
ssid        = "Netgear 2/158"
A           = "Pairwise key expansion"
APmac       = a2b_hex("001e2ae0bdd0")
Clientmac   = a2b_hex("cc08e0620bc8")
ANonce      = a2b_hex("61c9a3f5cdcdf5fae5fd760836b8008c863aa2317022c7a202434554fb38452b")
SNonce      = a2b_hex("60eff10088077f8b03a0e2fc2fc37e1fe1f30f9f7cfbcfb2826f26f3379c4318")
B           = min(APmac,Clientmac)+max(APmac,Clientmac)+min(ANonce,SNonce)+max(ANonce,SNonce)
data        = a2b_hex("0103005ffe01090020000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000")

pmk     = pbkdf2(passPhrase, ssid, 4096, 32) 
ptk     = customPRF512(pmk,A,B)
mic     = hmac.new(ptk[0:16],data)

print "desiredpmk:\t","01b809f9ab2fb5dc47984f52fb2d112e13d84ccb6b86d4a7193ec5299f851c48"
print "pmk:\t\t",b2a_hex(pmk),"\n"
print "desired ptk:\t","bf49a95f0494f44427162f38696ef8b6"
print "ptk:\t\t",b2a_hex(ptk[0:16]),"\n"
print "desired mic:\t","45282522bc6707d6a70a0317a3ed48f0"
print "mic:\t\t",mic.hexdigest(),"\n" 
```

所以我的问题的答案是：是的，哈希函数工作正常，是的，输入格式错误，不，没有字节序问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-24T15:49:51.693

感谢您发布。这帮助了我，所以发布我的修改：

```
#==========================================================================================
#
# Verify the MIC code in EAPoL Message #2 is valid, or not (WPA2)
#
#==========================================================================================
#
# The home for this code is (so check for updates):
#
#     https://www.duckware.com/tech/verify-mic-in-four-way-handshake.py.txt
#
#   and this code is fully public, as it was based on/derived from this public code:
#
#     https://stackoverflow.com/questions/12018920/wpa-handshake-with-python-hashing-difficulties
#
# 1\. PMK: 'Pairwise Master Key' (256-bit) is generated from SSID/PASS in WPA2:
#
#     o https://www.wireshark.org/tools/wpa-psk.html (SSID/PASS to PMK)
#     o http://anandam.name/pbkdf2/ (Password-Based Key Derivation Function 2)
#
# 2\. PRF512: The PRF-512 function is used to compute four 128-bit keys (KCK,KEK,TK1,TK2).
#    For details on this function, see:
#
#     o http://etutorials.org/Networking/802.11+security.+wi-fi+protected+access+and+802.11i/Part+II+The+Design+of+Wi-Fi+Security/Chapter+10.+WPA+and+RSN+Key+Hierarchy/Computing+the+Temporal+Keys/
#
# 3\. KCK: The KCK (first 128 bits of the PTK; see above) are used to generate the MIC:
#
#     o https://tldp.org/HOWTO/8021X-HOWTO/intro.html
#
# RUN: Run the code below in an ONLINE Python 2.7 compiler.  For example:
#
#     o https://repl.it/languages/python
#     o https://www.tutorialspoint.com/execute_python_online.php
#
# CUSTOMIZE: How to customize the code below:
#
#    1) PCAP the problematic handshake (TIP: use tcpdump with ether host xx:xx:xx:xx:xx:xx)
#    2) Update SSID/PASS vars below with the known Wi-Fi name/password
#    3) Copy entire Ethernet frames for EAPoL Message #1/#2 into EAPOL1/2 vars below.
#       TIP: In Wireshark, right click on Ethernet frame, 'Copy' / '...as a Hex Stream' / paste below
#    4) Use first with a working 4-way handshake (to confirm proper usage; MIC match), then apply
#       to non-working 4-way handshake to confirm that the MIC in Message #2 is good/bad.
#    5) The code below, unmodified, results in a MIC found/calculated 'match'
#
# See also:
#
#     o https://www.wifi-professionals.com/2019/01/4-way-handshake
#     o https://stackoverflow.com/questions/15133797/creating-wpa-message-integrity-code-mic-with-python
#     o https://www.shellvoide.com/wifi/understanding-wpa-wpa2-hash-mic-cracking-process-python/
#     o https://ww.ins1gn1a.com/understanding-wpa-psk-cracking/
#     o https://docs.python.org/3/library/binascii.html
#     o https://stackoverflow.com/questions/9020843/how-to-convert-a-mac-number-to-mac-string
#
#==========================================================================================

import hmac,hashlib,binascii

def to_mac(addr): return ':'.join(addr[i:i+2] for i in range(0,len(addr),2))
def PRF_512(key,A,B): return ''.join(hmac.new(key,A+chr(0)+B+chr(i),hashlib.sha1).digest() for i in range(4))[:64]
def a2b(s): return binascii.a2b_hex(s);
def b2a(by): return binascii.b2a_hex(by);

EAPOL1 = a2b("60f189052d94a00460216606888e0203005f02008a00100000000000000001141f7a3ebdc0b51712934bef6e43ea13f80cb460f121f35408aa607046e239980000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000")
EAPOL2 = a2b("a0046021660660f189052d94888e0103007502010a000000000000000000015b46c7165f504c664aed90b78f3b705e02b4b029a67e3189d1632479d7e7a4e6000000000000000000000000000000000000000000000000000000000000000056de18f5efa272a4663560b73c537a65001630140100000fac040100000fac040100000fac028000")
SSID   = "your-wifi-ssid"
PASS   = "your-wifi-password"
PMK    = hashlib.pbkdf2_hmac('sha1', PASS, SSID, 4096, 32)  

VER_WPA = 2   # WPA2 means use 'SHA1'
XAUTH   = a2b("888E")
if EAPOL1[0:6]==EAPOL2[6:12] and EAPOL2[0:6]==EAPOL1[6:12] and EAPOL1[12:14]==XAUTH and EAPOL1[12:14]==XAUTH:
  if ord(EAPOL1[20])%8==VER_WPA and ord(EAPOL2[20])%8==VER_WPA:
    R1 = EAPOL1[31:63]      # random 1 (AP nonce)
    R2 = EAPOL2[31:63]      # random 2 (STA nonce)
    M1 = EAPOL2[0:6]        # MAC 1 (AP MAC)
    M2 = EAPOL1[0:6]        # MAC 2 (STA MAC)

    # Generate KCK, KEK, TK1, TK2 from the PMK (and AP/STA info)
    PTK = PRF_512(PMK,"Pairwise key expansion",min(M1,M2)+max(M1,M2)+min(R1,R2)+max(R1,R2))
    KCK = PTK[0:16];

    # try to validate the MIC in EAPoL message #2 is correct
    MICRAW   = hmac.new(KCK,EAPOL2[14:95]+a2b("00000000000000000000000000000000")+EAPOL2[111:],hashlib.sha1)
    MICFOUND = b2a(EAPOL2[95:111])
    MICCALC  = MICRAW.hexdigest()[0:32]

    print "SSID/PASS: ",SSID,"/",PASS
    print "PMK:       ",b2a(PMK)
    print "AP-MAC:    ",to_mac(b2a(M1))
    print "STA-MAC:   ",to_mac(b2a(M2))
    print "AP-NONCE:  ",b2a(R1)
    print "STA-NONCE: ",b2a(R2)
    print "KCK:       ",b2a(KCK)
    print "MIC-found: ",MICFOUND
    print "MIC-calc:  ",MICCALC
    print "Result:    ",("OK: EAPoL message #2 validated" if MICFOUND==MICCALC else "ERROR: MIC does not match")
  else:
    print "***ERROR: Did not find expected 'WPA2' version in EAPoL messages"
else:
  print "***ERROR: Problem validated Ethernet frames.  Do EAPOL1 and EAPOL2 both include the Ethernet headers?" 
```

# javascript - 使用 href 值查找锚标记并使用新的 href 值更改 href 值

> ID：12018925
> 
> 赞同：1
> 
> 时间：2012-08-18T13:23:35.277
> 
> 标签：javascript, jquery, html, javascript-events

这是html代码

```
<td>
<a class="buttontext" href="/kkdmpcu/control/MilkDeliveryScheduleReport.txt?shipmentId=10306&amp;reportTypeFlag=milkDeliverySchedule" target="_blank" onclick="javascript:setSelectedRoute(this, 10306);" title="Milk Delivery Schedule">Delivery Schedule</a>
</td>
<td>
<a class="buttontext" href="/kkdmpcu/control/KVGenerateTruckSheet.txt?shipmentId=10306&amp;reportTypeFlag=abstract" target="_blank" onclick="javascript:setSelectedRoute(this, 10306);" title="Abstract Report">Route Abstract Report</a>
</td> 
```

我有 href 值。使用 href 值我应该找到锚标记并使用 jquery 将 href 值更改为新值。这是我目前拥有的代码，它不起作用。

```
$('a[href$=(existingUrl)]'); // existingUrl is the href value I have
    .attr('href', resultUrl);  // resultUrl is the url that I need to replace with existingUrl.

//The whole code I have Right now

function setSelectedRoute(existingUrl, shipmentId) {

        var updatedUrl = existingUrl.toString();
        var facilityIndex = updatedUrl.indexOf("facilityId");

        if(facilityIndex > 0){
            updatedUrl = updatedUrl.substring(0, facilityIndex -1);
        }
        var form = $("input[value=" + shipmentId + "]").parent();
        var routeId = form.find("option:selected").text();
        var resultUrl = updatedUrl + "&facilityId=" + routeId;
        alert(resultUrl);

        $('a[href='+existingUrl+']').attr('href', resultUrl);   
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:27:20.393

你不应该在选择器和方法之间使用分号`attr`，如果`existingUrl`是一个变量你应该连接它，试试这个：

```
$('a[href="'+existingUrl+'"]').attr('href', resultUrl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:52:45.370

`this`不是`href`属性，而是`a`标签本身，这是第一个错误，因此`existingUrl`将获取对象。

更改代码

```
function setSelectedRoute(existingUrl, shipmentId) {

        var updatedUrl = $(existingUrl).attr('href'); // first instance
        // or var updatedUrl = existingUrl.getAttribute('href');

        var facilityIndex = updatedUrl.indexOf("facilityId");

        if(facilityIndex > 0){
            updatedUrl = updatedUrl.substring(0, facilityIndex -1);
        }
        var form = $("input[value=" + shipmentId + "]").parent();
        var routeId = form.find("option:selected").text();
        var resultUrl = updatedUrl + "&facilityId=" + routeId;
        alert(resultUrl);

        $('a[href="'+$(existingUrl).attr('href')+'"]').attr('href', resultUrl);  //second instance
    } 
```

对于第二种情况，您可以直接使用`existingUrl`

```
$(existingUrl).attr('href', resultUrl); 
```

# android - 我的应用程序应该只支持 10 英寸平板电脑

> ID：12018926
> 
> 赞同：0
> 
> 时间：2012-08-18T13:23:40.873
> 
> 标签：android

嗨，大家好，

我正在开发一个应用程序，目前支持所有屏幕尺寸，根据我的要求，它只需要支持**10英寸**平板电脑吗？

为此，我创建**了 layoutfloder**，如下所示。在普通**布局文件夹**中，我没有创建任何 xml。

**res/layout-xlarge/main_activity.xml**

在 AndroidManifest.xml 中，我声明如下。

```
<supports-screens
        android:anyDensity="false"
        android:largeScreens="false"
        android:normalScreens="false"
        android:resizeable="false"
        android:smallScreens="false"
        android:xlargeScreens="true" >
    </supports-screens> 
```

但是在 xlargeDevices 应用程序运行良好。当我在**模拟器**中运行应用程序时，应用程序正在崩溃。作为资源未找到异常。

但最后我会得出结论，我的应用程序应该只在 Xlargescreens 中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:07:27.627

该`<supports-screens>`标签仅适用于 Google Play 商店。Android 系统直接忽略它。当您发布该应用程序时，它将仅对 10 英寸平板电脑可见。

# android - 检查其他应用程序是否正在使用 Android 麦克风

> ID：12018927
> 
> 赞同：1
> 
> 时间：2012-08-18T13:23:42.977
> 
> 标签：android, audio, audio-recording, android-audiomanager

我想使用 android 麦克风检查噪音水平。但是，在访问麦克风之前，我想知道麦克风是否正在被另一个应用程序访问。如何检查麦克风是否正在被其他应用程序访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:27:47.100

有关活动输入流及其路由位置的信息由和实例保存`AudioFlinger`，它们不与应用程序共享此信息。 AudioManager 类为应用程序提供了一个方法，但麦克风在未使用时很可能会取消静音，因此该方法并不能真正告诉您有关麦克风当前是否正在使用的任何信息。`AudioPolicyManager``AudioHardware`
`isMicrophoneMute()`

找出是否有任何输入流路由到麦克风的一种可能方法是打开 dumpsys`media.audio_policy`并`media.audio_flinger`解析输出。但风险在于不同设备上的输出看起来会有所不同，而且我不知道您是否可以将这些服务的状态转储到非 root 设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:27:44.693

我认为 Michael 是对的，但我们不能在 Android 2.3 上使用 dumpsys 并进一步用于某些服务

# c++ - C++中的结构数组：为数组中的每个结构赋值

> ID：12018934
> 
> 赞同：0
> 
> 时间：2012-08-18T13:25:16.057
> 
> 标签：c++, arrays, struct

我在下面声明了一个带有结构变量 arr[] 的结构 st，这是一个结构数组。我试图将值 1 分配给“num”变量，并将值 1 到 10 分配给数组 arr[] 的前 10 个位置的“val”变量。并且值 2 到“num”，值 1 到 10 到接下来 10 个位置的“val”。但是当我跟踪代码时，它不会将值分配给同一数组位置的相应 num 和 val 。如果我想将 num=1 和 val=4 分配给第 4 个结构，它会将 num=1 分配给第 3 个结构的 val，将 val=4 分配给第 4 个结构的 num。

我的查询与数组索引无关。

问题是：

如果我写了这些陈述

arr[2].num=1; arr[2].val=2;

({num,val})

预期结果是：arr[2]={1,2}

但实际结果是：arr[1]={num,1} arr[2]={2,val}

```
#include<iostream.h>
#include<conio.h>

class abc
{

 public:

 struct st
 {
  int num;
  int val;
 };

 st arr[21];

 void funct();

};

void abc::funct()
{
 int i,j,k=1;

 for(i=1;i<=2;i++)
 {
  for(j=1;j<=10;j++)
  {
   arr[k].num=i;
   arr[k].val=j;
   k++;
  }
 }

}

int main()
{
 abc z;

 z.funct();

 return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:41:31.237

1) 数组是基于 0 的，即索引从 0 开始并上升到 arraySize - 1（来自您的声明）。
2) 浏览你的代码，看看每一行在做什么......
3) 现在想想你需要做什么：
3.1) 遍历数组
的每个元素 3.2) 每个元素访问结构
3.3) 结构内部您想将
num = 1 设置为**前**10 个元素，将 2 设置为**后**10 个元素（您在这里看到任何简单的数学规则吗？）
val = arrayElementIndex（这太简单了）

查看您的代码并考虑它需要如何完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T13:32:15.113

[http://www.cplusplus.com/doc/tutorial/arrays/](http://www.cplusplus.com/doc/tutorial/arrays/)

如果你想访问命名数组中的第一个元素，`arr`那么你可以通过`arr[0]`.

因此，如果您这样做可能会有所帮助：

> 整数 i,j,k=0;

# c - C、结构指针多态

> ID：12018936
> 
> 赞同：0
> 
> 时间：2012-08-18T13:25:18.623
> 
> 标签：c, inheritance, polymorphism

**注意：**这不是 C++ 问题，我不能使用 C++ 编译器，只能使用 C99。

这是有效的（并且可以接受的，漂亮的）代码吗？

```
typedef struct sA{
   int a;
} A;

typedef struct aB{
   struct sA a;
   int b;
} B;

A aaa;
B bbb;

void init(){
   bbb.b=10;
   bbb.a.a=20;
   set((A*)&bbb);
}

void set(A* a){
   aaa=*a;
}

void useLikeB(){
   printf("B.b = %d", ((B*)&aaa)->b);
} 
```

简而言之，当我需要指定行为时，将“子类”转换为“超类”并在将“超类”重新转换为“子类”之后是否有效？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T14:48:43.087

首先，C99 标准允许您将任何结构指针转换为指向其第一个成员的指针，反之亦然（*6.7.2.1 结构和联合说明符*）：

> 13 在结构对象中，非位域成员和位域所在的单元的地址按声明顺序递增。一个指向结构对象的指针，经过适当的转换，指向它的初始成员（或者如果该成员是位域，则指向它所在的单元），反之亦然。结构对象中可能有未命名的填充，但不是在其开头。

换句话说，在您的代码中，您可以自由地：

1.  转换`B*`为`A*`- 它将始终正常工作，
2.  转换`A*`为`B*`- 但如果它实际上并不指向`B`，您将在访问更多成员时遇到随机故障，
3.  分配指向的结构`A*`-`A`但如果指针是从 转换的`B*`，则只会分配公共成员，其余成员`B`将被忽略，
4.  分配指向的结构`B*`-`A`但您必须首先转换指针，并注意 (3)。

所以，你的例子*几乎*是正确的。但`useLikeB()`无法正常工作，因为`aaa`它是您分配的类型结构，`A`如第 (4) 点所述。这有两个结果：

1.  非普通`B`成员实际上不会被复制到`aaa`（如（3）中所述），
2.  您的程序将随机尝试访问它不存在的方式失败（您正在访问一个不存在的成员，如 (2) 中所述）`A`。`B`

以更实际的方式解释这一点，当您声明`A`编译器保留保存所有成员所需的内存量时`A`。`B`有更多的成员，因此需要更多的内存。作为`A`一个常规变量，它不能在运行时改变它的大小，因此不能保存`B`.

* * *

请注意，通过（1），您实际上可以获取指向成员的指针，而不是转换更好的指针，并且它将允许您访问任何成员，而不仅仅是第一个成员。但请注意，在这种情况下，相反的方法将不再起作用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T13:30:19.593

我认为这是相当肮脏和相对危险的。你想用这个来达到什么目的？也不能保证 aaa 是 B ，它也可能是 A。所以当有人调用“uselikeB”时它可能会失败。还取决于架构“int a”和“指向结构 a 的指针”可能会正确或不重叠，并且当您分配给“int a”然后访问“struct a”时可能会导致有趣的事情发生

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:37:45.213

你为什么要这样做？有

```
set((A*)&bbb); 
```

写起来并不比正确更容易

```
set(&bbb.a); 
```

您在此处发帖时应避免的其他事项：

*   您`set`在声明之前使用
*   `aaa=a`应该`aaa = *a`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T15:15:30.547

首先，我同意之前发帖人对这项作业的安全性的大多数担忧。

话虽如此，如果您需要走那条路，我会添加一个间接级别和一些类型安全检查器。

```
static const int struct_a_id = 1;
static const int struct_b_id = 2;
struct MyStructPtr {
   int type;
   union {
     A* ptra;
     B* ptrb;
     //continue if you have more types.
   }
}; 
```

这个想法是您通过将指针传递给包含一些“类型”信息的结构来管理指针。您可以在描述您的类树的一侧构建一个类树（请注意，鉴于安全转换的限制，这可以使用树来表示）并且能够回答问题以确保您正确地上下转换结构。所以你的“useLikeB”函数可以这样写。

```
MyStructPtr the_ptr;
void init_ptr(A* pa)
{
     the_ptr.type = struct_a_id 
     the_ptr.ptra = pa;
}
void useLikeB(){
    //This function should FAIL IF aaa CANT BE SAFELY CASTED TO B
    //by checking in your type tree that the a type is below the 
    //a type (not necesarily a direct children).
    assert( is_castable_to(the_ptr.type,struct_b_id ) ); 
    printf("B.b = %d", the_ptr.ptrb->b);
} 
```

我的 2 美分。

# javascript - 通过检查与当前标题的匹配来将类添加到锚点？

> ID：12018941
> 
> 赞同：0
> 
> 时间：2012-08-18T13:25:53.273
> 
> 标签：javascript, jquery

我有一个导航菜单，例如：

```
<div class="my_menu">
  <ul>
    <li><a href="http://localhost/en/about-us">About Us</a></li>
    <li><a href="http://localhost/en/contact">Contact</a></li>
  </ul>
</div> 
```

我正在尝试编写一个函数以在与页面 url 匹配时向菜单添加一些活动类。

```
$(".top_navigation li a").filter(function() {
    alert($(this).href);
    alert($(location).attr('href'));
    return $(this).href() === $(location).attr('href');
  }).addClass('newClass'); 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:29:25.477

您可以使用 直接访问页面 url `location.href`，不需要 jquery。

要获取 dom 元素的属性，您可以使用`attr`

```
 $(this).attr('href') 
```

这应该有效：

```
$(".top_navigation li a").filter(function() {
    return $(this).attr('href') === location.href);
}).addClass('newClass'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T13:34:39.573

这是一个小的、稍微简单的 jQuery 片段，它应该可以满足您的期望：

```
$(".topnavigation li a").each(function() {
    if($(this).attr("href") == window.location) {
        $(this).addClass("newClass");
    }
}); 
```

演示：[小链接](http://goo.gl/4Xkwg)。

我希望这对你有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T13:55:42.553

像这样做。

```
$(".top_navigation li a").addClass(function() {
    return this.href === location.href ? "newClass" : "";
}); 
```

# android - 如何在两个 Activity 实例之间传递 Bitmap 对象？

> ID：12018942
> 
> 赞同：1
> 
> 时间：2012-08-18T13:25:59.483
> 
> 标签：android, android-activity, bitmap

如何`Bitmap`在两个`Activity`实例之间传递一个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:28:30.150

Bitmap 实现 Parcelable，因此您始终可以在意图中传递它：

```
Intent intent = new Intent(this, YourNewActivity.class);
intent.putExtra("BitmapImage", bitmap); 
```

并在另一端检索它

```
Bitmap bitmap = (Bitmap) intent.getParcelableExtra("BitmapImage"); 
```

# algorithm - 寻找 dp 状态 ZUMA spoj

> ID：12018949
> 
> 赞同：0
> 
> 时间：2012-08-18T13:27:25.823
> 
> 标签：algorithm

我正在尝试解决这个 spoj 问题 [http://www.spoj.pl/problems/ZUMA](http://www.spoj.pl/problems/ZUMA)

我找不到可能的 dp 状态。

有人可以指导我这个问题可能的 dp 状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:41:47.697

我已经在 SPOJ 中接受了这个问题。我的状态是，从位置到`i`等于元素。对于过渡，您应该考虑两种情况：`j``p`

1.  插入多少块，`i`就像你需要利用那块一样，然后我们会遇到同样的问题，但`i+1`考虑`j`
2.  假设`q`前面元素的位置等于 in 中的块`i`。我们应该考虑从到解决问题`i`，`q-1`然后从`q`到`j`解决每一个问题`q`。

# haskell - `String' 应用于太多类型参数

> ID：12018959
> 
> 赞同：41
> 
> 时间：2012-08-18T13:28:58.970
> 
> 标签：haskell

我刚刚学习 Haskell，我正在尝试编写一个简单的程序来消除 a 中的前 n 个字符`String`。这就是我得到的：

```
cutString :: (Num n, String str) => n -> str -> str

cutString n str = case n of
        0 -> tail str
        n -> cutString (n-1) (tail str) 
```

GHC 给了我这个错误，我不知道为什么：

```
`String' is applied to too many type arguments
 In the type signature for `cutString':
 cutString :: (Num n, String str) => n -> str -> str 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-18T13:30:11.200

`String`是一种类型，而不是类型类，因此您可以（必须）在类型签名中按原样使用它。

```
cutString :: Num n => n -> String -> String 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-08-18T22:11:13.710

作为参考，较旧的 GHC（即 7.2.2 或更早版本）曾经给出这个更有用的错误：

```
Type constructor `String' used as a class
In the type `(Num n, String str) => n -> str -> str' 
```

确实，这正是您的问题：`String`是一种类型，并且您将其用作类型类。类型类是类型的集合，而不是单个类型，例如`Integer`and`Double`和`Rational`是属于类型类的所有类型`Num`。类型类出现`=>`在类型的左侧，而实际类型和类型变量出现在类型的右侧`=>`。

# jquery - jQuery on() 委托事件和 Leaflet.js

> ID：12018965
> 
> 赞同：3
> 
> 时间：2012-08-18T13:29:26.920
> 
> 标签：jquery, events, leaflet

我在一个项目中使用 Leaflet.js，我想用 jQuery on() 绑定我的标记上的事件。

我测试了类似的东西：

```
$('body').on("hover",".leaflet-marker-icon",function(){console.log("foo")}) //doesn't work 
```

但什么也没发生。

另一方面，当我直接绑定事件时它可以工作：

```
$(".leaflet-marker-icon").hover(function(){console.log("bar")}) //works 
```

我在页面的另一个 div 上测试了 jQuery.on()：

```
$('body').on("hover",".navbar",function(){console.log("g")}) //no problem 
```

这个工作正常。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:33:47.587

似乎没有发生传播。您需要提供更多代码才能获得更准确的答案。现在我怀疑这`.stopPropagation()`在某处被称为

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T13:39:31.123

试试这个：

```
$(document).ready(function(){
     $(document).on({
        mouseenter: function(){
           console.log("bar")
        },
        mouseleave: function(){
           console.log("foo")
        }
     }, ".leaflet-marker-icon")
}) 
```

*请注意，从 jQuery 1.8 开始：*名称“hover”用作字符串的简写，`mouseenter`已 `mouseleave`弃用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T13:43:24.970

尝试

```
$(document).on("hover",".leaflet-marker-icon",function(){console.log("foo")}); 
```

文档而不是正文 - 这应该是捕获第一次正文加载时未出现的 dom 元素事件的正确方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T13:08:01.217

我不会使用悬停，而是使用 mouseenter。还要确保您至少使用 jQuery 1.7+ 进行此事件委托。此外，body 标签应该只比您的小册子标记图标类高 1 级。您的导航栏类可能就是这种情况，但您的传单标记图标类可能不是这种情况。这也许就是导航栏起作用的原因。无论如何，我们需要这里的完整代码来提供帮助。

# java - 使用java本机方法

> ID：12018982
> 
> 赞同：1
> 
> 时间：2012-08-18T13:31:09.580
> 
> 标签：java, c, java-native-interface

我正在使用 native 关键字创建一个 java 程序。

类- HelloWorld.java 是源代码，编译后，我生成一个 HelloWorld.h 文件。

然后在 NetBeans 中创建 ac 文件，其中包含 jni.h 头文件

```
#include <jni.h>
#include <stdio.h>
#include "HelloWorld.h"

 JNIEXPORT void JNICALL 
 Java_HelloWorld_print(JNIEnv *env, jobject obj)
 {
     printf("Hello World!\n");
     return;
 } 
```

但是当我构建项目时，这个错误就来了

> HelloWorld.c:3:24：HelloWorld.h：没有这样的文件或目录
> HelloWorld.c:10:3：警告：文件末尾没有换行符

我将 HelloWorld.h 文件放在 surce 文件夹中

# django - 形成 clean() 方法以防止“无法分配无”

> ID：12018983
> 
> 赞同：0
> 
> 时间：2012-08-18T13:31:09.883
> 
> 标签：django, django-forms

我想为我的“添加电视节目表单”制作以下模板：一个标题字段和一个 tvshow_id 字段。用户可以在标题 CharField 中输入标题并使用 AJAX 按钮从我的数据库中检索匹配项。单击匹配后，将使用一些 jQuery 魔术填充 tvshow_id 字段。但是，如果不是，那也应该没问题，因为我的表单应该使用用户提供的标题字符串创建一个新的 tvshow 实例。

但是，我不断收到以下错误：

> /tvshows/create/season/ 处的 ValueError
> 
> 无法分配无：“Season.tvshow”不允许空值。

假设我有以下模型：

```
class Tvshow(models.Model):
    title = models.CharField(max_length = 255)

class Season(models.Model):
    tvshow = models.ForeignKey(Song) 
```

这是我的表格。请注意，在我的表格中，我声明电视节目不是必需的，而根据我的模型，它是必需的。这是因为否则，该字段本身将引发 ValidationError。

```
class SeasonModelForm(models.ModelForm):
    tvshow = forms.CharField(required = False)

    def clean_season(self):
        tvshow_id = self.cleaned_data['tvshow']
        if tvshow_id:
            try:
                return Tvshow.objects.get(pk = tvshow_id)
            except Tvshow.DoesNotExist:
                raise forms.ValidationError("No tvshow with this ID was found.")
        else: return None

    def clean(self):
        """Assign a tvshow in case there is no Tvshow yet."""
        cd = self.cleaned_data
        if not isinstance(cd['tvshow'], Tvshow):
            try:
                cd['title']
            except KeyError:
                raise forms.ValidationError("Please provide at least a tvshow title.")
            else:
                cd['tvshow'] = Tvshow(title = cd['title'])
                cd['tvshow'].save()
        return cd 
```

我的猜测是 Season.tvshow 的验证发生在我的代码运行之前的某个地方，但我似乎无法追踪它。

我会喜欢你的意见，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:34:55.000

You need to return the value of `tvshow_id` from `clean_season`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:56:01.893

我设法通过`clean_season()`返回一个空`Tvshow()`实例来解决它，然后对`clean()`. 这不是我写过的最漂亮的代码，但它完成了工作。

```
def clean_season(self):
    """Must return a Song instance, whatever the cost."""
    tvshow_id = self.cleaned_data['tvshow']
    if tvshow_id:
        try:
            return Tvshow.objects.get(pk = tvshow_id)
        except Tvshow.DoesNotExist:
            raise forms.ValidationError("No tvshow with this ID was found.")
    else: return Tvshow()

def clean(self):
    """Create a tvshow in case there is no tvshow yet."""
    cd = super(SeasonMinimalModelForm, self).clean()
    if not cd['tvshow'].title:
        try:
            cd['title']
        except KeyError:
            raise forms.ValidationError("Please provide at least a title.")
        else:
            cd['tvshow'] = Tvshow(title = cd['title'])
            cd['tvshow'].save()
    return cd 
```

# xaml - 指针/鼠标结束时如何更改gridview项目边框

> ID：12018986
> 
> 赞同：4
> 
> 时间：2012-08-18T13:31:57.000
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

这是我的 GridView

```
 <Grid Grid.Column="1" Margin="80,0,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="50" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <TextBlock Text="aktualności" Style="{StaticResource PageSubheader}" />

            <local:VariableGridView x:Name="listView" Grid.Row="1" Margin="0,2,0,0" IsItemClickEnabled="True" ItemClick="listView_ItemClick" >
                <local:VariableGridView.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Border>
                                <Image Source="Templates/LightGray.png" Stretch="UniformToFill"/>
                            </Border>
                            <StackPanel VerticalAlignment="Top" >
                                <TextBlock Text="{Binding title}" Height="30" Margin="15,0,15,0"/>
                                <TextBlock Text="{Binding short}" TextWrapping="NoWrap" Margin="15,0,15,10"/>
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </local:VariableGridView.ItemTemplate>
                <local:VariableGridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VariableSizedWrapGrid ItemWidth="150" ItemHeight="150" Orientation="Vertical" Margin="0,0,80,0" MaximumRowsOrColumns="3"/>
                    </ItemsPanelTemplate>
                </local:VariableGridView.ItemsPanel>
            </local:VariableGridView>
        </Grid> 
```

本地类 (VariableGridView) 是用于在 Windows 应用商店中创建视图的小扩展。它工作正常。我不能做一件事。当指针在网格 ITEM 上方时如何更改边框？我找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T14:49:38.903

GridView 的翻转效果作为其 ItemContainerStyle 的一部分进行管理。

在 Visual Studio 中，右键单击左侧的 GridView，然后选择 Edit Additional Templates、Edit Generated Item Container (ItemContainerStyle)、Edit a Copy。

在生成的样式中，您会发现一个名为“Hover”的 VisualStateGroup。这些是当用户将鼠标悬停在项目上时对容器发生的更改。在模板的底部，您会找到项目容器和网格项目的默认包装器（带有复选框的边框）。

# asp.net-mvc-3 - 如何一劳永逸地将对象列表发送到布局？

> ID：12018990
> 
> 赞同：1
> 
> 时间：2012-08-18T13:32:21.837
> 
> 标签：asp.net-mvc-3, layout

我有 c# 的 mvc3 应用程序。在这里，我总是发送一些对象列表来做每个视图。在我声明的每个控制器中

```
DBEntities db = new DBEntities(); 
```

在我写的每一个观点中：

```
 public ActionResult Index()
    {
        ViewBag.Categories = db.Categories.ToList();
        ViewBag.Brands= db.Brands.ToList();
        ViewBag.Products= db.Products.ToList();
        ...
        return View();
    } 
```

在其他观点我也写

```
public ActionResult OtherView()
        {
            ViewBag.Categories = db.Categories .ToList();
            ViewBag.Brands= db.Brands.ToList();
            ViewBag.Products= db.Products.ToList();
            ...
            return View();
        } 
```

在其他控制器及其视图中，我从 db 调用相同的集合。有什么方法可以编写此代码 1 次并将它们发送到布局视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:59:05.100

您可以定义一个基本控制器并在其构造函数中创建这些列表。

```
public class MyBaseController : Controller
{
    public MyBaseController
    {
        DBEntities db = new DBEntities();
        ViewBag.Categories = db.Categories.ToList();
        ViewBag.Brands= db.Brands.ToList();
        ViewBag.Products= db.Products.ToList();
    }
} 
```

然后确保你的所有控制器都派生自这个类。然而，这意味着对您的应用程序的每个请求都会让您获取这些表中的所有数据。这可能会降低您的性能。您可以考虑异步获取和显示它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:55:27.913

您可以在控制器中创建一个方法来执行此操作：

```
private void PopulateViewBags()
{
    ViewBag.Categories = db.Categories.ToList();
    ViewBag.Brands= db.Brands.ToList();
    ViewBag.Products= db.Products.ToList();
} 
```

然后在你`ActionResults`刚刚调用它：

```
public ActionResult Index()
{
    PopulateViewBags();
    ...
    return View();
} 
```

这是一种简单的方法，它允许您进行缓存`PopulateViewBags()`，从而减少对数据库的访问。这使您无需去数据库就可以拥有其他`Actions`不需要这些功能的设备。`ViewBags`

# python - 打印组合字符串和数字

> ID：12018992
> 
> 赞同：76
> 
> 时间：2012-08-18T13:32:47.407
> 
> 标签：python, python-2.7

要在 Python 中打印字符串和数字，除了执行以下操作之外还有其他方法吗：

```
first = 10
second = 20
print "First number is %(first)d and second number is %(second)d" % {"first": first, "second":second} 
```

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-08-18T13:34:31.760

> 使用*不带括号的 print 函数*适用于旧版本的 Python，但**Python3 不再支持**，因此您必须将参数放在括号内。[但是，如该问题的答案中所述](https://stackoverflow.com/questions/32122868/python-3-print-without-parenthesis/32124420)，有一些解决方法。由于对 Python2 的支持已于 2020 年 1 月 1 日结束，因此**已将答案修改为与 Python3 兼容**。

您可以执行以下任何操作（可能还有其他方法）：

```
(1)  print("First number is {} and second number is {}".format(first, second))
(1b) print("First number is {first} and number is {second}".format(first=first, second=second)) 
```

或者

```
(2) print('First number is', first, 'second number is', second) 
```

*（注：逗号隔开后会自动加空格）*

或者

```
(3) print('First number %d and second number is %d' % (first, second)) 
```

或者

```
(4) print('First number is ' + str(first) + ' second number is' + str(second)) 
```

在可用的情况下，最好使用*[format()](http://docs.python.org/library/stdtypes.html#str.format)* (1/1b)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-18T13:34:02.243

就在这里。首选语法是优先`str.format`于已弃用的`%`运算符。

```
print "First number is {} and second number is {}".format(first, second) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-06-16T20:53:37.500

如果您使用的是 3.6 试试这个

```
 k = 250
 print(f"User pressed the: {k}") 
```

> **输出：**用户按下：250

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-18T13:37:18.077

其他答案解释了如何生成像您的示例中那样格式化的字符串，但如果您需要做的只是`print`这些东西，您可以简单地编写：

```
first = 10
second = 20
print "First number is", first, "and second number is", second 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-07-30T06:08:18.493

在 Python 3.6 中

```
a, b=1, 2 

print ("Value of variable a is: ", a, "and Value of variable b is :", b)

print(f"Value of a is: {a}") 
```

# iphone - 如何在 UIView 中应用变换？

> ID：12018994
> 
> 赞同：1
> 
> 时间：2012-08-18T13:33:17.733
> 
> 标签：iphone, objective-c, ios

我已将以下转换应用于 UIView 的图层，如下所示：

```
 CATransform3D rotationAndPerspectiveTransform = CATransform3DIdentity;
 rotationAndPerspectiveTransform.m34 = 1.0 / -850;
 rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, M_PI_4*1.1,0.0f, 1.2f, 0.0f);
 self.centerView.layer.transform = rotationAndPerspectiveTransform; 
```

但没有那么成功，我只是想应用变换，如下图所示![在此处输入图像描述](../Images/b056286026338193ce53e8cac81ca150.png)

任何帮助将不胜感激。感谢您阅读我的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T14:51:56.067

也许这可能会有所帮助

```
CATransform3D t1 = CATransform3DIdentity;
t1.m34 = 1.0/-850;
t1 = CATransform3DScale(t1, 0.95, 0.95, 1);
t1 = CATransform3DRotate(t1, 15.0f*M_PI_4/180.0f, 0, 1.2, 0);

CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform"];
animation.toValue = [NSValue valueWithCATransform3D:t1];
animation.duration = 1;
animation.fillMode = kCAFillModeForwards;
animation.removedOnCompletion = NO; 
```

# c++ - 顶点/索引缓冲区的传递引用不起作用

> ID：12018995
> 
> 赞同：0
> 
> 时间：2012-08-18T13:33:20.480
> 
> 标签：c++, directx, buffer

我有点卡住了，我不知道我的问题可能出在哪里。我正在渲染一个由四叉树划分的地形。现在我试图使这个四叉树的边界可见以用于调试目的。因此，我为地形上的每个节点设置了一个新的缓冲区，并且只有那些可见的调试四边形应该被渲染。我遇到的问题是，我通过引用将这些节点缓冲区传递给另一个类（DebugTreeClass）的方法以在那里创建它们。但似乎这些缓冲区在调用该方法后保持为空。这是我的定义：

```
1\. m_debugTree->InitializeBuffer(node->vertexBufferDebug, node->indexBufferDebug, node->positionX, node->positionZ, node->width, device);

2\. bool InitializeBuffer(ID3D11Buffer*,ID3D11Buffer*, float, float, float,ID3D11Device*); 
```

这是创建索引/顶点缓冲区的方法：

```
bool DebugTreeClass::InitializeBuffer(ID3D11Buffer* vertexBuffer,ID3D11Buffer* indexBuffer, float positionX, float positionZ, float width, ID3D11Device* deviceContext){
VertexType* vertices;
unsigned long* indices;
int index, i, j;
D3D11_BUFFER_DESC vertexBufferDesc, indexBufferDesc;
D3D11_SUBRESOURCE_DATA vertexData, indexData;
HRESULT result;

m_vertexCount = 8; // to form a quad with lines we need 24 points.

m_indexCount = 24;

// Create the vertex array.
vertices = new VertexType[m_vertexCount];
if(!vertices)
{
    return false;
}

// Create the index array.
indices = new unsigned long[m_indexCount];
if(!indices)
{
    return false;
}

//DEFINE THE 8 POINTS FOR THE QUAD
//UPPER LEFT
vertices[0].position = D3DXVECTOR3(positionX, width / 2, positionZ);
vertices[0].color = D3DXVECTOR4(1.0f, 1.0f, 1.0f, 1.0f);
// UPPER RIGHT
vertices[1].position = D3DXVECTOR3(positionX + width, width / 2, positionZ);
vertices[1].color = D3DXVECTOR4(1.0f, 1.0f, 1.0f, 1.0f);
// BOTTOM RIGHT
vertices[2].position = D3DXVECTOR3(positionX + width, -(width / 2), positionZ);
vertices[2].color = D3DXVECTOR4(1.0f, 1.0f, 1.0f, 1.0f);
// BOTTOM LEFT
vertices[3].position = D3DXVECTOR3(positionX, -(width / 2), positionZ);
vertices[3].color = D3DXVECTOR4(1.0f, 1.0f, 1.0f, 1.0f);
// UPPER LEFT BACKSIDE
vertices[4].position = D3DXVECTOR3(positionX, width / 2, positionZ + width);
vertices[4].color = D3DXVECTOR4(1.0f, 1.0f, 1.0f, 1.0f);
// UPPER RIGHT BACKSIDE
vertices[5].position = D3DXVECTOR3(positionX + width, width / 2, positionZ + width);
vertices[5].color = D3DXVECTOR4(1.0f, 1.0f, 1.0f, 1.0f);
// BOTTOM RIGHT BACKSIDE
vertices[6].position = D3DXVECTOR3(positionX + width, -(width / 2), positionZ + width);
vertices[6].color = D3DXVECTOR4(1.0f, 1.0f, 1.0f, 1.0f);
// BOTTOM LEFT BACKSIDE
vertices[7].position = D3DXVECTOR3(positionX, -(width / 2), positionZ + width);
vertices[7].color = D3DXVECTOR4(1.0f, 1.0f, 1.0f, 1.0f);

//SET UP THE INDEXBUFFER
indices[0] = 0;
indices[1] = 1;
indices[2] = 1;
indices[3] = 2;
indices[4] = 2;
indices[5] = 3;
indices[6] = 3;
indices[7] = 0;
indices[8] = 0;
indices[9] = 4;
indices[10] = 1;
indices[11] = 5;
indices[12] = 2;
indices[13] = 6;
indices[14] = 3;
indices[15] = 7;
indices[16] = 4;
indices[17] = 5;
indices[18] = 5;
indices[19] = 6;
indices[20] = 6;
indices[21] = 7;
indices[22] = 7;
indices[23] = 4;

// Set up the description of the static vertex buffer.
vertexBufferDesc.Usage = D3D11_USAGE_DEFAULT;
vertexBufferDesc.ByteWidth = sizeof(VertexType) * m_vertexCount;
vertexBufferDesc.BindFlags = D3D11_BIND_VERTEX_BUFFER;
vertexBufferDesc.CPUAccessFlags = 0;
vertexBufferDesc.MiscFlags = 0;
vertexBufferDesc.StructureByteStride = 0;

// Give the subresource structure a pointer to the vertex data.
vertexData.pSysMem = vertices;
vertexData.SysMemPitch = 0;
vertexData.SysMemSlicePitch = 0;

// Now create the vertex buffer.
result = deviceContext->CreateBuffer(&vertexBufferDesc, &vertexData, &vertexBuffer);
if(FAILED(result))
{
    return false;
}

// Set up the description of the static index buffer.
indexBufferDesc.Usage = D3D11_USAGE_DEFAULT;
indexBufferDesc.ByteWidth = sizeof(unsigned long) * m_indexCount;
indexBufferDesc.BindFlags = D3D11_BIND_INDEX_BUFFER;
indexBufferDesc.CPUAccessFlags = 0;
indexBufferDesc.MiscFlags = 0;
indexBufferDesc.StructureByteStride = 0;

// Give the subresource structure a pointer to the index data.
indexData.pSysMem = indices;
indexData.SysMemPitch = 0;
indexData.SysMemSlicePitch = 0;

// Create the index buffer.
result = deviceContext->CreateBuffer(&indexBufferDesc, &indexData, &indexBuffer);
if(FAILED(result))
{
    return false;
}

// Release the arrays now that the buffers have been created and loaded.
delete [] vertices;
vertices = 0;

delete [] indices;
indices = 0;

return true; 
```

}

有 2 个类，定义节点的“QuadTreeClass”和应该填充每个节点的缓冲区并渲染调试四边形的“DebugTreeClass”。如果我调试“DebugTreeClass::InitializeBuffer()”方法，我可以看到缓冲区应该成功创建，所以我很确定通过引用传递此方法有问题。也许我只是瞎了眼......

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:44:38.327

我很确定问题出在这里：

```
bool DebugTreeClass::InitializeBuffer(ID3D11Buffer* vertexBuffer,...
...
result = deviceContext->CreateBuffer(&vertexBufferDesc, &vertexData, &vertexBuffer) 
```

您可能期望 vertexBuffer 到达“InitializeBuffer”的调用者，但这不会发生。您在谈论引用，但实际上并没有传递引用。这可能会解决它：

```
bool DebugTreeClass::InitializeBuffer(ID3D11Buffer*& vertexBuffer,... 
```

您要返回的其他指针也是如此。

您的原始版本将旧的（可能未初始化——您应该启用警告）指针变量从调用者复制到函数的“vertexBuffer”变量中，并使用它。“vertexBuffer”是函数的局部变量，它从未被传回。

通过我的更改，它变成了“对指针的引用”。现在，“vertexBuffer”指针实际上与传递给函数调用的指针相同，使用相同的内存。因此，当您更改该指针时，调用者中的版本会更改。

# android - 为什么 getView 在separatedListAdapter 上返回错误的convertView 对象？

> ID：12018997
> 
> 赞同：15
> 
> 时间：2012-08-18T13:33:29.903
> 
> 标签：android, listview, android-arrayadapter, convertview

我根据我的需要调整了 Jeff Sharkey 的 SepatedListAdapter，得到了这样的结果：

```
public class SeparatedListAdapter<T> extends BaseAdapter {

    @SuppressWarnings("unused")
    private final String LOG_TAG = getClass().getSimpleName();

    public final static int TYPE_SECTION_HEADER = 0;

    public final Map<T, Adapter> sectionAdapters;
    public final ArrayAdapter<T> headerAdapter;

    public SeparatedListAdapter(ArrayAdapter<T> headerAdapter) {
        super();
        this.sectionAdapters = new LinkedHashMap<T,Adapter>();
        this.headerAdapter = headerAdapter;
    }

    public void addSection(T section, Adapter adapter) {
        this.headerAdapter.add(section);
        this.sectionAdapters.put(section, adapter);
    }

    public void clearSections() {
        this.headerAdapter.clear();
        this.sectionAdapters.clear();
    }

    @Override
    public int getCount() {
        // total together all sections, plus one for each section header
        int total = 0;
        for(Adapter adapter : this.sectionAdapters.values())
            total += adapter.getCount() + 1;
        return total;
    }

    @Override
    public int getViewTypeCount() {
        //count headers, then total all sections
        int total = this.headerAdapter.getViewTypeCount();
        for(Adapter adapter : this.sectionAdapters.values())
            total += adapter.getViewTypeCount();
        return total;
    }

    @Override
    public int getItemViewType(int position) {
        int type = 1;
        for(Object section : this.sectionAdapters.keySet()) {
            Adapter adapter = sectionAdapters.get(section);
            int size = adapter.getCount() + 1;

            // check if position inside this section 
            if(position == 0) return TYPE_SECTION_HEADER;
            if(position < size) return type + adapter.getItemViewType(position - 1);

            // otherwise jump into next section
            position -= size;
            type += adapter.getViewTypeCount();

        }
        return -1;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        int sectionnum = 0;
        for(Object section : this.sectionAdapters.keySet()) {
            Adapter adapter = sectionAdapters.get(section);
            int size = adapter.getCount() + 1;

            // check if position inside this section 
            if(position == 0) 
                return headerAdapter.getView(sectionnum, convertView, parent);
            if(position < size) 
                return adapter.getView(position - 1, convertView, parent);

            // otherwise jump into next section
            position -= size;
            sectionnum++;
        }
        return null;
    }

    @Override
    public boolean areAllItemsEnabled() {
        return false;
    }

    @Override
    public boolean isEnabled(int position) {
        return (getItemViewType(position) != TYPE_SECTION_HEADER);
    }
} 
```

我遇到的问题是 API 将 onvertView 对象从错误的适配器提供给 getView()，从而导致问题。我想我正确地实现了 getViewTypeCount() 和 getItemViewType() 并用调试器检查了它。还有什么问题？

这是我的一个适配器：

```
public static class MeetingAdapter extends ArrayAdapter<Meeting> {
    static class ViewHolder {
        TextView title;
    }
    private LayoutInflater inflater;

    public MeetingAdapter(Activity context, List<Meeting> meetings) {
        super(context, 0, meetings);
        this.inflater = LayoutInflater.from(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Meeting meeting = getItem(position);

        View rowView = convertView;
        ViewHolder holder;

        // instanceof should not be necessary!!! normally convertView should be of the right type!
        if (rowView == null || !(rowView.getTag() instanceof ViewHolder)) {
            rowView = inflater.inflate(R.layout.list_item, null);
            holder = new ViewHolder();
            holder.title = (TextView)rowView; // tmp - layout contains only a textview for the moment
            rowView.setTag(holder);
        } else {
            holder = (ViewHolder)rowView.getTag();
        }
        holder.title.setText(meeting.getTrack());
        return rowView;
    }
} 
```

请帮忙？为此发疯。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-05T19:01:29.023

我追踪到问题是列表视图的 RecybleBin 对象。它根据从 getItemViewType 报告的类型存储可能的 convertViews，但是在您更改数据集（因此位置）之后，它的内容永远不会更新，然后当您的适配器根据其位置获取过去的类型“X”视图时，但是现在它恰好是“Y”类型。一种解决方案是手动检查 getView 是否不仅 convertView 为空，而且它的类型是否正确（有时这真的很尴尬......如果您使用视图持有者模式，您可以检查标签是否与相应的视图持有者类匹配)