# StackOverflow 问答 10821000-10821999

# php - 使用数组作为数据库构建 php 搜索引擎？

> ID：10821001
> 
> 赞同：0
> 
> 时间：2012-05-30T17:10:51.723
> 
> 标签：php, arrays, search-engine

新的 php 程序员在这里，如果这已经被问到，我很抱歉：

我有一个充满字符串的数组。每个字符串都是我网站上一个页面的确切名称，因此该数组是一种“数据库”。

我想知道如何创建一个让用户输入关键字的搜索引擎。然后，引擎将抓取我的字符串数组以查找任何匹配项，并返回我网站上的页面列表，其中包含页面名称中的关键字。

任何帮助表示赞赏，不确定使用哪些功能来构建它。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:27:22.297

我解决这个问题的方法是创建一个包含所有字符串的二叉搜索树。这将使搜索更快、更有效。这是一个可以帮助您实现这一目标的[链接。](https://stackoverflow.com/questions/5020738/php-binary-tree-recursion-algorithm)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:18:30.703

我想你可以用它`strpos`来查看用户术语是否包含在数组键中。但是，您必须遍历每个页面，并查看搜索词是否包含在页面名称中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T15:13:44.717

我最终通过使用平面文件和条件解决了这个问题，这里是代码：

```
$userlink = $_POST['link_to_test'];
$linkdatabase = array('...');
if (in_array($userlink, $linkdatabase)) 
{
echo 'Data already exists';
}
else { .... 
```

# php - 上传字体并在 php/codeigniter 中显示预览

> ID：10821002
> 
> 赞同：1
> 
> 时间：2012-05-30T17:10:54.530
> 
> 标签：php, image, codeigniter, fonts, upload

我对 PHP 不太了解，但我想知道是否有办法做到这一点。我所拥有的是一个表单，它允许用户上传字体文件，并在上传字体文件后将它们显示在库的下方。我希望它能够实际显示字体在库中的样子。到目前为止，我还没有找到一种方法来做到这一点。这可以用PHP吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:19:58.357

对于使用 Code Igniter 的非常快速和肮脏的解决方案，您可以使用 Image Manipulation Class 和 Image Watermarking 功能。

查看[codeigniter 3 的文档，](http://codeigniter.com/userguide3/libraries/image_lib.html)它向您展示了如何使用自定义字体应用水印。上传一个纯白色的图像源文件并打开它：

```
$config['image_library'] = 'gd2';
$config['source_image'] = '/path/to/image/mypic.jpg';
$config['maintain_ratio'] = TRUE;
$config['width']     = 75;
$config['height']   = 50;

$this->load->library('image_lib', $config); 
```

完成后，您可以在图像上绘制水印：

```
$config['source_image'] = '/path/to/image/mypic.jpg';
$config['wm_text'] = 'Text to Display Here';
$config['wm_type'] = 'text';
$config['wm_font_path'] = './system/fonts/texb.ttf'; // Path to font file
$config['wm_font_size'] = '16';
$config['wm_font_color'] = 'ffffff';
$config['wm_vrt_alignment'] = 'bottom';
$config['wm_hor_alignment'] = 'center';
$config['wm_padding'] = '20';

$this->image_lib->initialize($config); 

$this->image_lib->watermark(); 
```

我认为所有内容都在此处（上方）或代码点火器文档页面上进行了解释。

# java - AsyncTask 在一个简单的类中还是在 Activity 中？

> ID：10821003
> 
> 赞同：1
> 
> 时间：2012-05-30T17:11:17.190
> 
> 标签：java, android, android-asynctask, android-activity

我正在尝试重构我的一项活动。我有一个非常大的私有 AsyncTask 类，我想把它放在一个单独的类中。AsyncTask 本身也应该在完成后更新 UI，因此我必须为该类提供应用程序上下文。

现在这两种方法中哪一种更好：只是将类创建为任务？

```
public class MyCustomTask extends AsyncTask 
```

用于：

```
 new MyCustomTask().execute(); 
```

或者创建一个自身启动任务的 Activity，并按 Intent 调用这个 Activitiy？

```
public class MyCustomActivity extends Activity {
  onCreate() {
    new MyCustomTask().execute();
  }

  private class MyCustomTask extends AsyncTask<..>();
} 
```

用于：

```
Intent intent = new Intent(this, MyCustomActivity.class); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:28:02.480

如果你有一个单独的 AsyncTask 并且需要在 postExecute 上做 UI 操作，有 3 种方式来执行它：

1.  在您的活动中覆盖它。在子类中只添加 UI 操作代码。

2.  创建一个接口并将其用作侦听器。看 [这里](https://stackoverflow.com/questions/10768449/android-can-i-put-asynctask-in-a-separate-class-and-have-a-callback/10768544#10768544)

3.  将您的活动作为参数传递给 AsyncTask。看[这里](https://stackoverflow.com/questions/10727362/how-to-make-asynctask-postexecute-send-variable-back-to-main-class/10727469#10727469)

对于 2 和 3，您要检查 Activity 在 postExecute() 中是否仍然存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T17:26:11.050

以下是我在我的活动中执行 ASyncTask 的方法：

```
public class MyClass extends Activity {

     @Override
     public void onClick(View v) {
          MyNewThread thread = new MyNewThread();
          thread.execute();
     }

     private class MyNewThread extends ASyncTask<Void, Void, Void> {
          //Code goes here
     }

} 
```

非常伪代码，但你明白了，它只是活动的内部私有类。现在，如果这个确切的线程是您将在多个活动中运行的东西，那么将它设为自己的类可能是值得的。但是，如果您只是在这里执行此操作，则此实现很好。不管怎样，不要让它成为一个活动，它只是一个扩展 ASyncTask 的常规类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T17:16:49.517

没有理由单独创建一个`Activity`纯粹来启动`AsyncTask`. 只需将其创建为一个单独的类，并在`Context`必要时传入一个。只要确保你不泄漏它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T17:39:35.973

如果与 Activity 交互，则保持不变`AsyncTask`，否则创建一个单独的。用作内部类的优点`AsyncTask`是此类允许执行后台操作并在 UI 线程上发布结果，而无需操作线程和/或处理程序。

# php - 登录脚本 - 计算行数或使用 COUNT('column')

> ID：10821008
> 
> 赞同：3
> 
> 时间：2012-05-30T17:11:31.533
> 
> 标签：php, mysql

我一直在使用各种在线教程涉足登录脚本（PHP 和 MySQL）。今天我很好奇哪种方式最好检查用户名和密码是否有效。到目前为止，我读过的每个教程都会检查返回的行数，如下所示：

```
SELECT stuff FROM users WHERE username = input_username AND password = input_password
count the rows returned
if rows equal to one
login
else
display error message 
```

我只是在想使用 COUNT 并检查该值是否同样可行，如下所示：

```
SELECT COUNT(stuff) FROM users WHERE username = input_username AND password = input_password
if returned value equal to one
login
else
display error message 
```

我都试过了，两者都返回了预期的结果。那么有什么理由选择一个而不是另一个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:13:36.073

它们都是有效的方法。当您需要有关用户的其他信息（例如，他们的 UserID）时，您将使用前者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:15:12.443

如果您不需要任何存储的信息，则绝对应该使用第二条 SQL 语句。`COUNT()`对性能更好。尽管人们倾向于坚持第一个的原因是因为如果返回的行是正数，他们将需要有关用户的信息。

# php - 如何引用一个函数？

> ID：10821011
> 
> 赞同：0
> 
> 时间：2012-05-30T17:11:36.853
> 
> 标签：php, hook, mediawiki

我正在学习如何在 mediawiki中使用[钩子。](http://www.mediawiki.org/wiki/Manual:Hooks)我也是 PHP 新手。可以通过将下一行放入 LocalSettings.php 来添加通用挂钩处理程序：

```
$wgHooks['event'][] = 'function'; 
```

假设我写 `myfunction`在`my.php`文件中。我如何从 LocalSettings.php 指向这个函数

编辑。我在 my.php 文件中编写了一些函数。如何引用这个函数？我应该告诉 mediawiki 在哪里可以找到这个功能。我不知道该怎么做。我应该写`'$wgHooks['event'][] = 'my.php:function'`。或者我应该将`include`my.php 文件写入 LocalSetting 然后只写`'$wgHooks['event'][] = 'function'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:30:21.843

正如[文档](http://www.mediawiki.org/wiki/Manual%3aHooks#Writing_an_event_handler)所说，您需要将带有函数名称的字符串（或字符串数​​组等）推送到钩子数组。

AFAIK，当触发钩子时，它们将被调用[`call_user_func()`](http://www.php.net/manual/en/function.call-user-func.php)。因此，这将取决于您在 my.php 文件中的函数声明。，`myfunction`它应该是

```
$wgHooks['event'][] = 'myfunction'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T17:16:03.717

从我从 mediawiki 文档中读到的内容，您需要创建一个扩展，并在您的扩展中安装您的钩子。在 my.php 你会写：

```
 // $wgHooks is a global variable
 $wgHooks['event'][] = 'function'; 
```

希望我能正确理解扩展文档 [http://www.mediawiki.org/wiki/Manual:Extensions](http://www.mediawiki.org/wiki/Manual%3aExtensions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T17:15:10.470

我不确定我是否完全理解您想要什么，但是如果您想调用用户定义的函数，您可以使用[call_user_func](http://www.php.net/manual/en/function.call-user-func.php)，它将函数名称作为参数。您必须[包含](http://no.php.net/manual/en/function.include.php)该文件，以便该功能可用。

```
call_user_func('myfunction ', array()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T08:08:44.807

您通过PHP 中的[回调](http://php.net/manual/en/language.types.callable.php)来引用函数。回调是其中之一：

1.  一个函数名：`'myFunc'`
2.  一个包含类名和函数名的数组：`array('MyClass', 'myFunc')`
3.  一个包含对象和函数名的数组：`array($myObj, 'myFunc')`
4.  一个匿名函数（技术上是一个[闭包](http://www.php.net/manual/en/class.closure.php)对象）：（`function($x, $y) { /* PHP code */ }`这只是 PHP 5.3+，但 MediaWiki 的最新版本也是如此）

通过调用这些回调`call_user_func($callback, $arg1, $arg2)`将分别等效于以下内容：

1.  `myFunc($arg1, $arg2);`
2.  `MyClass::myFunc($arg1, $arg2);`
3.  `$myObj->myFunc($arg1, $arg2);`
4.  执行匿名函数的主体，将`$x`and`$y`替换为`$arg1`and`$arg2`

如果此代码失败（例如，您使用第一个版本，并且`myFunc`未加载该函数），回调也将失败。您可以在 MediaWiki 中使用第二种形式的[自动加载](http://php.net/manual/en/language.oop5.autoload.php)，通常通过[$wgAutoloadClasses](http://www.mediawiki.org/wiki/Manual%3a%24wgAutoloadClasses)完成：

```
// in MyExtension.php
$wgHooks['event'][] = array('MyExtension', 'myEventHandler');
$wgAutoloadClasses['MyExtension'] = dirname(__FILE__) . 'MyExtension.body.php';

// in MyExtension.body.php
class MyExtension {
    public function myEventHandler($p1, $p2) {
        // do stuff
    }
} 
```

这样，您可以从 加载`MyExtension.php`（这是一个仅具有配置设置的小文件）`LocalSettings.php`，并且`MyExtension.body.php`（其中包含所有代码）仅在实际使用您的扩展的那些请求中加载。

# gmail - MX 和 A 记录与 Google Apps

> ID：10821012
> 
> 赞同：1
> 
> 时间：2012-05-30T17:11:53.910
> 
> 标签：gmail, dns, mx-record, a-records

所以我在公司的电子邮件系统中遇到了这个奇怪的问题。（我会先说我是一名网页/平面设计师，也被迫担任 IT 角色，所以请原谅我的笨拙）

我刚刚将我们的公司切换到 Google Apps for Business 以利用 Google 的所有应用程序和功能。

我们所有六个域的 MX 记录已经切换到 Google 好几天了，它似乎工作得很好，除了几件事......

1.  尽管 MX 记录清楚地显示邮件应该是去谷歌的服务器。

2.  我们的网站联系表格仍然通过旧系统发送，而不是通过谷歌发送。例如，woodshedsmokehouse.com 联系表会向旧系统上的 info@woodshedsmokehouse.com 发送电子邮件，而不是通过我们的 Google Apps 帐户（这是 info@cheftimlove.com 的“昵称”）将其发送到 info@woodshedsmokehouse.com ）。

现在，这就是我认为可能存在一些混乱的地方......也许，我又是一个菜鸟。

我们所有的六个域都有 SMTP 和 MAIL 的记录，它们仍然指向 MyHosting.com 的邮件服务器。

这是问题吗？如果是这样，我该如何解决？Google Apps 支持人员未提及更改 A 记录

非常感谢任何见解和帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:36:07.933

我可以理解为什么它通过旧域发送，但我无法理解接收部分。他们通过旧域收到的电子邮件是“回复电子邮件”还是“新电子邮件”。

我知道 A 记录用作备份 MX 记录。如果您将邮件服务器托管在 A 记录位置之外，则根本不需要 MX 记录。

我很好奇，如果你找到了解决方案和解释。我检查了您的[MX 记录](https://www.unlocktheinbox.com/resources/mxrecords/)，您列出的 2 个域看起来都不错。我也使用 MyHosting，但我托管自己的电子邮件服务器。

如果您可以将电子邮件的标题发布在他们接收和发送的邮件上，那将很有帮助。

# seo - Liferay 链接到布局结构

> ID：10821013
> 
> 赞同：2
> 
> 时间：2012-05-30T17:12:02.040
> 
> 标签：seo, liferay, structure

我想在 Liferay 结构中使用链接到布局字段，

```
<dynamic-element name="linktopage" type="link_to_layout" index-type="" /> 
```

在我使用 href="$linktopage.getURL()" 的模板中，链接工作正常，但页面 url 是 /web/12/13

**我需要一个带有页面名称的 SEO url。** 任何人都知道如何使用链接到布局和速度变量来做到这一点？

Tnx萨布丽娜

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T11:53:36.630

而不是`$linktopage.getURL()`, try `$linktopage.getFriendlyURL()`，这应该为您提供带有页面名称而不是布局 ID 的 url。

# google-plus - 使用 vb.net 点击 Google+1 按钮

> ID：10821014
> 
> 赞同：0
> 
> 时间：2012-05-30T17:12:03.627
> 
> 标签：google-plus

Google+1 具有如此复杂的代码，它会在鼠标悬停时更改，因为选项似乎选择了我们需要的圆圈。

你能告诉我如何使用 vb.net 添加一个谷歌加一页到圈子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:22:12.427

[Google+ 徽章](https://developers.google.com/+/plugins/badge/)是在不访问 plus.google.com 的情况下将页面添加到圈子的唯一方法，并且需要用户直接操作。

# android - 有人成功将live555移植到android吗？

> ID：10821015
> 
> 赞同：3
> 
> 时间：2012-05-30T17:12:04.653
> 
> 标签：android, live555

我一直在尝试`live555`根据本指南进行构建：

[https://github.com/boltonli/ohbee/tree/master/android/streamer/jni](https://github.com/boltonli/ohbee/tree/master/android/streamer/jni)

以及使用其他一些指南，都无济于事。

如果有人成功移植`live555`到android，请告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T04:58:18.023

我成功构建了项目如下：

```
git clone https://github.com/boltonli/ohbee.git
cd ohbee/android/streamer
android update project --path . --name "streamer" --target "android-15"
cp lib/jnix.jar libs/ # This is the only trick
ant debug 
```

jar 位于`lib/`目录中，而不是`libs/`.

如果这不能解决您曾经或正在遇到的问题，您将不得不更加具体并分享您已采取的步骤以及您遇到的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:42:42.010

要为 ARM/Linux 编译 Live555 流媒体，请尝试以下步骤：

```
> cd live
> ./genMakefiles armlinux
> make 
```

预构建的二进制包：

live.2011.06.16-dev-armlinux.tar.bz2

希望能帮助到你 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T02:55:32.470

[这个答案](https://stackoverflow.com/a/11026883/6314232 "这个答案")对我有用，我能够在 Android Studio 中构建项目：

但是，在运行时，我在 MainActivity.java 的行中收到了 java.lang.UnsatisfiedLinkError： System.loadLibrary("jnix");

ohbee/android/streamer/* 中缺少 libjnix.so，但 armeabi 二进制文件位于 ohbee/android/streamer2/libs/armeabi 中。当我将它复制到我的 src/main/jniLibs/armeabi 中时，我能够在三星 Galaxy Note S3 上运行该应用程序。它将相机流式传输到具有虚拟地址的 RTPSink 实例中。

显然，不是 armeabi 的目标将不起作用（因此虚拟设备不起作用），而且我无法找到 jnix 库的源代码（只有标头）。

# java - OSX Java 更改是否在功能上删除了一些蚂蚁？

> ID：10821022
> 
> 赞同：0
> 
> 时间：2012-05-30T17:12:26.790
> 
> 标签：java, ant, build-script

我们有一个用 Java 编写并使用 ant 脚本构建的跨平台应用程序。自 2010 年 1 月以来，此代码尚未在 Mac 上构建。最近我检查了 2010 年 1 月的版本，该版本构建为新的工作副本并尝试构建它，现在我收到此错误：

```
BUILD FAILED
/Users/Mike/working copies/ASJTestBuild/trunk/build.xml:857: java.lang.NoClassDefFoundError: org/apache/xml/serialize/OutputFormat
    at net.sourceforge.jarbundler.PropertyListWriter.writeFile(Unknown Source)
    at net.sourceforge.jarbundler.JarBundler.writeInfoPlist(Unknown Source)
    at net.sourceforge.jarbundler.JarBundler.execute(Unknown Source)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:809)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.lang.ClassNotFoundException: org.apache.xml.serialize.OutputFormat
    at org.apache.tools.ant.AntClassLoader.findClassInComponents(AntClassLoader.java:1361)
    at org.apache.tools.ant.AntClassLoader.findClass(AntClassLoader.java:1311)
    at org.apache.tools.ant.AntClassLoader.loadClass(AntClassLoader.java:1064)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 19 more 
```

由于相同的代码和相同的脚本在 2 年前构建得很好，而且我知道 OSX 可以处理他们自己的 Java 版本，我想知道是否有可能一些更新的 OSX 版本的 Java 删除了我们依赖的这个库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:39:10.913

不是 ANT 本身，而是 JarBundler ANT 任务似乎已被相对较新的 OS X Java 版本破坏。更新[JarBundler](http://www.informagen.com/JarBundler/)应该可以解决这个问题。

（在[这里](http://kolmafia.us/showthread.php?5154-Ant-1-8-1-and-Jarbundler-task)找到）

# python - 更改表单元素名称和 ID

> ID：10821025
> 
> 赞同：0
> 
> 时间：2012-05-30T17:12:39.870
> 
> 标签：python, django

我有以下根据`type`实例动态创建一个字段：

```
class LVariableForm(ModelForm):

    def __init__(self, *args, **kwargs):
        super(someObj, self).__init__(*args, **kwargs)

        if self.instance:
            if self.instance.type == 'bool':
                self.fields['data'] = BooleanField()
            if self.instance.type == 'date':
                self.fields['data'] = DateField()
            if self.instance.type == 'float':
                self.fields['data'] = DecimalField()
            if self.instance.type == 'text':
                self.fields['data'] = TextInput()
            self.fields['data'].label = self.instance.name

    class Meta:
        model = LVariable 
```

唯一的问题是创建的元素具有名称`data`和 id`1_data`

```
 <input name="data" id="1_data" dojoType="dijit.form.NumberTextBox"> 
```

我怎样才能改变这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:57:52.477

因为我在一个表单中使用了同一个 FormField 的多个实例，所以最好的办法是：

```
# forms.py
class LBooleanVForm(Form):
    def __init__(self,LTV, *args, **kwargs):
        super(LBooleanVForm, self).__init__(*args, **kwargs)
        self.fields[LTV.name] = BooleanField()

class LFloatVForm(Form):
    def __init__(self,LTV, *args, **kwargs):
        super(LFloatVForm, self).__init__(*args, **kwargs)
        self.fields[LTV.name] = FloatField()

class LTextVForm(Form):
    def __init__(self,LTV, *args, **kwargs):
        super(LTextVForm, self).__init__(*args, **kwargs)
        self.fields[LTV.name] = TextInput()

class LDateVForm(Form):
    def __init__(self,LTV, *args, **kwargs):
        super(LDateVForm, self).__init__(*args, **kwargs)
        self.fields[LTV.name] = DateField()

# views.py
ltv = LV.objects.filter(l_t=lt)
lvForm = []
for ltVars in ltv:
    if ltVars.type == 'bool':
        newField = LetterBooleanVariableForm(ltVars)
    elif ltVars.type == 'date':
        newField = LetterDateVariableForm(ltVars)
    elif ltVars.type == 'float':
        newField = LetterFloatVariableForm(ltVars)
    elif ltVars.type == 'text':
        newField = LetterTextVariableForm(ltVars)
    else:
        raise Http404
    lvForm.append(newField) 
```

# c# - c# WPF WebBrowser设置文本框的值

> ID：10821027
> 
> 赞同：0
> 
> 时间：2012-05-30T17:12:54.010
> 
> 标签：c#, wpf, browser

我想知道如何使用 webbrowser 设置文本框的值。例如，我想打开谷歌搜索页面和自动完成搜索文本框到特定值。我发现在 win 表单中我可以使用 GetElementById 和 SetAttribute 方法来做到这一点。不幸的是，我不能在 wpf 中使用这种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:41:17.157

WPF 中的 WebBrowser 控件当前不支持此功能。但是，您可以使用[“WindowsFormsHost”](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.windowsformshost.aspx)控件在 WPF 应用程序中使用 WinForms WebBrowser。

像这样：

```
<Window 
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms">
    <Grid>
      <WindowsFormsHost>
        <wf:WebBrowser />
      </WindowsFormsHost>
    </Grid> 
</Window> 
```

# xml - findnodes() 中的 xpath 表达式返回空节点列表

> ID：10821028
> 
> 赞同：5
> 
> 时间：2012-05-30T17:12:56.017
> 
> 标签：xml, perl, xpath, xlib

XML:

```
<zoo xmlns="http://www.zoo.com" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:schemaLocation="http://www.zoo.com employee.xsd">

<area id="1" posizione="nord" nome="scimmie">
    <animale>
        <nome>Gigi</nome>
        <sesso>Male</sesso>
        <eta>3</eta>
    </animale>

    <animale>
        <nome>Gigia</nome>
        <sesso>Female</sesso>
        <eta>2</eta>
    </animale>
</area>

<area id="2" posizione="nord" nome="giraffe">
    <animale>
        <nome>Giro</nome>
        <sesso>Male</sesso>
        <eta>6</eta>
    </animale>

    <animale>
        <nome>Gira</nome>
        <sesso>Female</sesso>
        <eta>5</eta>
    </animale>
</area>
</zoo> 
```

代码：

```
my $parser = XML::LibXML->new;
my $doc = $parser->parse_file("../xml/animals.xml");
my $root = $doc->getDocumentElement();

my $new_animal = $doc->createElement("animale");

my $name_element = $doc->createElement("nome");
$name_element->appendTextNode($name);

my $gender_element = $doc->createElement("sesso");
$gender_element->appendTextNode($gender);

my $age_element = $doc->createElement("eta");
$age_element->appendTextNode($age);

$new_animal->appendChild($name_element);
$new_animal->appendChild($gender_element);
$new_animal->appendChild($age_element);

my $area_element = $root -> findnodes("//area[\@id=$area]")->get_node(1);

$area_element->appendChild($new_animal); 
```

$area 是一个区域的 id（现在我正在测试通常是 1）

我的目的是创造一种新动物并将其添加到适当的区域

但我有一个问题是指令

```
 my $area_element = $root -> findnodes("//area[\@id=$area]")->get_node(1); 
```

不起作用，因为 $area_element 是 undef，因为 findnodes 总是返回一个空节点列表（检查打印 size()）。

我认为问题出在 findnodes 中的 xpath 表达式，但我不明白出了什么问题，我在另一个库 (XML::XPath) 中使用了相同的表达式并且它正在工作。

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:37:52.647

XML 中默认命名空间的 URI 是`http://www.zoo.com`，因此您必须在 XPath 表达式中指定它以获取节点。

这样做的方法是声明一个`XML::LibXML::XPathContext`为这个命名空间分配名称的对象。然后可以在 XPath 表达式中使用该名称来访问节点。

如果你写

```
my $xpc = XML::LibXML::XPathContext->new;
$xpc->registerNs('zoo', 'http://www.zoo.com'); 
```

您现在有一个上下文，其中 XML 的默认命名空间被命名为`zoo`. 现在你可以写

```
my $area_element = $xpc->findnodes("//zoo:area[\@id=$area]", $doc)->get_node(1); 
```

你会找到正确的`<area>`元素。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-30T18:19:27.353

命名空间声明错误，应该说`<zoo xmlns:zoo="http://www.zoo.com"`之类的。

# matlab - 向量化 MATLAB 循环

> ID：10821031
> 
> 赞同：3
> 
> 时间：2012-05-30T17:13:00.590
> 
> 标签：matlab, for-loop, vectorization

我正在尽力而不是在 Matlab 中使用循环，但有时我觉得很难。

例如我写了这段代码：

```
vector = zeros(p,1);

diagDominantFlag = 1;
for row = 1:p
    for col = 1:q
        if(row ~= col)
            vector(row) = vector(row) + A(row,col);
        end
    end
    if(A(row,row) <= vector(row))
        diagDominantFlag = 0;
        break;
    end
end 
```

是否可以矢量化该双`for`循环？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:20:38.057

您可以将内部循环替换为

```
vector(row) = sum(A(row, :)) - A(row, row); 
```

事实上你可以用

```
vector = sum(A, 2) - diag(A); 
```

要添加您在外循环中的检查，您可以执行类似的操作

```
f = find(diag(A) <= vector);
if length(f) > 0
    diagDominantFlag = 0;
    vector(f(1):end) = 0;
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T17:22:56.993

不是您直接问题的答案，但是，这是对角优势的无环测试（因为您似乎对此感兴趣）：

```
all(diag(A) >= (sum(abs(A),2)-abs(diag(A)) ) 
```

或对于严格的对角线优势：

```
all(diag(A) > (sum(abs(A),2)-abs(diag(A)) ) 
```

此外，在您上面的代码中，请确保您`abs()`使用非对角线值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T17:26:42.423

添加到 Ansari 的答案中，`diagDominantFlag`可以通过以下方式计算：

```
diagDominantFlag = all(diag(A) >= (sum(A, 2) - diag(A))); 
```

因此用单线替换你的双`for`循环。

# php - 当 apache web 服务器检查文件是否存在时，CentOS 5.7 访问系统调用返回 EACCES

> ID：10821034
> 
> 赞同：0
> 
> 时间：2012-05-30T17:13:09.467
> 
> 标签：php, c++, linux, centos

这是我们的 Centos 版本号

```
[marc disk5]$ cat /etc/redhat-release
CentOS release 5.7 (Final) 
```

下面是我们如何启动我们的 apache web 服务器

```
[marc php]$ sudo gdb /usr/sbin/httpd
[sudo] password for marc: 
GNU gdb (GDB) Red Hat Enterprise Linux (7.0.1-37.el5_7.1)
Copyright (C) 2009 Free Software Foundation, Inc.
Reading symbols from /usr/sbin/httpd...(no debugging symbols found)...done.
(gdb) run -X 
```

下面是我们如何启动我们的 Firefox 网络浏览器

```
[marc]$ sudo firefox
[sudo] password for marc: 
```

这是我们在 Firefox 网络浏览器中输入的 URL

```
http MatchUpObjectPHPSample.php 
```

当我们在 Web 浏览器呈现的网页上激活提交请求时，我们会收到以下诊断消息：

```
Path /home/marc/data/mdMatchup.dat
throw exception /home/marc/data/mdMatchup.dat retval -1 errno 13 
```

Errno 13 IS EACCESS 由我们用来测试文件存在的 C/C++ access("/home/marc/data/mdMatchup.dat",F_OK) API 调用返回。访问的手册页指出：

> EACCES 对文件的请求访问将被拒绝，或者对路径名的路径前缀中的目录之一的搜索权限被拒绝。

这是我们的路径权限：

```
[marc /]$ ls -l
drwxr-xr-x   7 root root  4096 Jan  3 11:45 home

[marc home]$ ls -l
drwx------ 38 marc     users 4096 May 29 16:36 marc

[marc home]$ cd marc
[marc ~]$ ls -l
drwxrwxrwx  2 root   root       4096 May 29 19:20 data

[marc ~]$ cd data
[marc data]$ pwd
/home/marc/data
[marc data] ls -l 
-rwxrwxrwx 1 root root 244736 May 28 15:49 mdMatchup.dat 
```

最后，这是一段非常短的 C++ 代码：

```
cSQLite::cSQLite(char *File_,bool bMustExist_) {
  int retval(0);

  if (bMustExist_) {
     retval = access(File_,F_OK);

     if (retval != 0) {
       printf("throw exception %s retval %d errno %d\n",File_,retval,errno);
       throw cException(ERR_DBDATABASE,"cSQLite",File_);
     }

     if (sqlite3_open(File_,&Database)!=SQLITE_OK) {
       RecordError();
       throw cException(ERR_DBDATABASE,"cSQLite",LastError);
     }
  }

  Statement=0;
  Columns=0;
} 
```

有人可以告诉我们我们正在犯什么错误，或者这是 CentOS 版本特定的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:21:53.127

你到底想在这里完成什么？为什么要直接启动 httpd 而不是使用标准启动脚本？为什么要以 root 身份运行浏览器？root 权限不会通过 HTTP 连接传输吗？

除此之外，问题在于您的`marc`目录只能由`marc`用户读取。按照设计，Apache 将放弃 root 权限并作为非特权用户（httpd、htdata 等）运行，因此它无权访问 /home/marc 中的任何内容。

# android - Android Action Bar (Sherlock Action Bar) - 将下拉微调器一直定位到右侧

> ID：10821038
> 
> 赞同：5
> 
> 时间：2012-05-30T17:13:31.773
> 
> 标签：android, android-actionbar, actionbarsherlock

有什么方法可以改变操作栏中下拉微调器的位置吗？

我为微调器下拉菜单找到了这种风格：

```
 <style name="Sherlock.__Widget.Holo.Spinner" parent="Widget">
    <item name="android:dropDownSelector">@drawable/abs__list_selector_holo_dark</item>
    <item name="android:popupBackground">@drawable/abs__menu_dropdown_panel_holo_dark</item>
    <item name="android:dropDownVerticalOffset">0dip</item>
    <item name="android:dropDownHorizontalOffset">0dip</item>
    <item name="android:dropDownWidth">wrap_content</item>
    <item name="android:gravity">left|center_vertical</item>
    <item name="android:spinnerMode">dropdown</item>
    <item name="android:clickable">true</item>
</style> 
```

...但是如何让这个微调器一直到操作栏的右侧？现在看起来是这样的......

![示例活动](../Images/4047f413ac860aa27c9f6e413df63a23.png)

我希望微调器与操作栏的右侧齐平。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T20:17:10.827

不。

做到这一点的唯一方法是使用您自己的自定义导航`Spinner`。然后你可以将重力设置在右侧`ActionBar.LayoutParams`。这会将自定义视图移动到屏幕右侧（但仍将保留在操作项的左侧）。

# javascript - 简单的 d3 条形图不显示

> ID：10821043
> 
> 赞同：0
> 
> 时间：2012-05-30T17:13:42.337
> 
> 标签：javascript, svg, d3.js, bar-chart

这是我正在尝试的简单条形图。但是什么都没有出现。

```
var data = [4, 8, 15, 16, 23, 42];
var chart = d3.select("body").append("svg:svg")
 .attr("class", "chart")
 .attr("width", 420)
 .attr("height", 20 * data.length);

var x = d3.scale.linear().domain([0, d3.max(data)]).range([0, 420]);

chart.selectAll("svg:rect")
 .data(data)
 .enter().append("svg:rect")
 .attr("y", function(d, i) { return i * 20; })
 .attr("width", x)
 .attr("height", 20) 
```

如果我使用`rect`而不是`svg:rect`创建矩形，就像我在控制台中看到的那样，但我在浏览器中看不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:19:38.347

您可能需要添加一些 CSS 来填充/着色矩形。您也可以使用`.style("fill", "red")`例如设置它。

# android - 如何在 Fragments 中绑定 ListView 对象？

> ID：10821048
> 
> 赞同：0
> 
> 时间：2012-05-30T17:14:06.777
> 
> 标签：android, listview, data-binding, object, android-fragments

我在将 JSON 数据对象绑定到 listView 片段时遇到问题。我在绑定到我的简单适配器的第 100 行得到一个 NPE。我尝试了各种方法来做到这一点，但都没有成功。根据[文档](http://developer.android.com/reference/android/app/ListFragment.html#setListAdapter%28android.widget.ListAdapter%29)：

> 您必须使用[ListFragment.setListAdapter()](http://developer.android.com/reference/android/app/ListFragment.html#setListAdapter%28android.widget.ListAdapter%29)将列表与适配器相关联。不要直接调用 ListView.setAdapter() 否则会跳过重要的初始化。

我确定这是我的问题，但我不知道如何纠正我的代码。下面是 NPE 和我的活动。请任何帮助将不胜感激，尤其是一些代码示例，因为我正在学习......

> threadid=1：线程以未捕获的异常退出（组=0x40a781f8） 致命异常：com.andaero.app.NavigationListFragment$1.callback(NavigationListFragment 的 android.widget.SimpleAdapter.(SimpleAdapter.java:85) .java:100) 在 com.andaero.app.NavigationListFragment$1.callback(NavigationListFragment.java:1) 在 com.androidquery.callback.AbstractAjaxCallback.callback(AbstractAjaxCallback.java:440) 在 com.androidquery.callback.AbstractAjaxCallback.afterWork (AbstractAjaxCallback.java:1010) 在 com.androidquery.callback.AbstractAjaxCallback.run(AbstractAjaxCallback.java:804) 在 android.os.Handler.handleCallback(Handler.java:605) 在 android.os.Handler.dispatchMessage(Handler. java:92) 在 android.os.Looper.loop(Looper.java:137) 在 android.app.ActivityThread.main(ActivityThread.java:4424) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:511) 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit. java:787) 在 dalvik.system.NativeStart.main(Native Method) 的 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)

```
public class NavigationListFragment extends ListFragment {
    Context context;
    private Activity c;
    final AQuery aq = new AQuery(c);
    private static String url = "http://192.168.1.17/Andaero/php/regulatory_list.php";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        final View view = inflater.inflate(R.layout.listview, container, false);
        Log.i("NavigationListFragment", "ListView Inflated!!");
        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        // AsyncTasks.getJSONArrays(context);// asynchronous task for getting
        // JSONarray
        aq.ajax(url, JSONArray.class, new AjaxCallback<JSONArray>() {
            // JSON Node names
            private static final String TAG_ID = "_id";
            private static final String TAG_LABEL = "label";
            private static final String TAG_TITLE = "title";
            private static final String TAG_DISCR = "description";
            private static final String TAG_GO2URL = "gotoURL";

            public void callback(String url, JSONArray json, AjaxStatus status) {
                if (json != null) {
                    // NavigationListFragment.jsonListCallback(json);
                    Log.i("NavigationListFragment", "Caught JSON: " + json.toString());
                    // Hashmap for ListView
                    ArrayList<HashMap<String, String>> mList = new ArrayList<HashMap<String, String>>();
                    try {
                        // Parse the string to a JSON object
                        for (int i = 0; i < json.length(); i++) {
                            JSONObject json_data = json.getJSONObject(i);

                            // Storing each json item in variable
                            String id = json_data.getString(TAG_ID);
                            String label = json_data.getString(TAG_LABEL);
                            String title = json_data.getString(TAG_TITLE);
                            String description = json_data.getString(TAG_DISCR);
                            String gotoURL = json_data.getString(TAG_GO2URL);

                            // creating new HashMap
                            HashMap<String, String> map = new HashMap<String, String>();

                            // adding each child node to HashMap key => value
                            map.put(TAG_ID, id);
                            map.put(TAG_LABEL, label);
                            map.put(TAG_TITLE, title);
                            map.put(TAG_DISCR, description);
                            map.put(TAG_GO2URL, gotoURL);

                            // adding HashList to ArrayList
                            mList.add(map);
                            Log.i("NavigationListFragment", "Hash: " + map);
                        }
                    } catch (JSONException e) {
                        Log.e("log_tag", "Error parsing data " + e.toString());
                    }

                    // create the list item mapping
                    String[] from = new String[] {TAG_LABEL, TAG_TITLE, TAG_DISCR, TAG_GO2URL};
                    int[] to = new int[] { R.id.listLabel, R.id.listTitle, R.id.listDiscription, R.id.dummy };

                    // Updating parsed JSON data into ListView
                    SimpleAdapter adapter = new SimpleAdapter(c, mList, R.layout.list_item, from, to);//<--NPE IS HERE
                    setListAdapter(adapter);

                    // selecting single ListView item
                    ListView lv = getListView();

                    // Launching new screen on Selecting Single ListItem
                    lv.setOnItemClickListener(new OnItemClickListener() {

                        public void onItemClick(AdapterView<?> parent, View view,
                                int position, long id) {
                            //TODO
                        }
                    });

                }
                // Log any network/JSON Errors
                switch (status.getCode()) {
                    case AjaxStatus.TRANSFORM_ERROR :
                        Log.i("GetJSONArray", "TRANSFORM_ERROR");
                        break;
                    case AjaxStatus.NETWORK_ERROR :
                        Log.i("GetJSONArray", "NETWORK_ERROR");
                        // TODO Create Alert Dialog
                    case AjaxStatus.AUTH_ERROR :
                        Log.i("GetJSONArray", "AUTH_ERROR");
                        break;
                }
            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:49:06.157

除非您省略代码，否则您永远不会分配`c`or的值`context`。

打电话时

```
SimpleAdapter adapter = new SimpleAdapter(c, mList, R.layout.list_item, from, to); 
```

您传入的“c”始终为空。

将“c”切换到`getActivity()`，问题应该消失

另外，

```
final AQuery aq = new AQuery(c); 
```

一旦知道可以访问 getActivity()，就应该初始化它。创建片段时，在调用 attach(..) 之前，它不会立即访问活动。

# mobile - 移动浏览器检测

> ID：10821052
> 
> 赞同：0
> 
> 时间：2012-05-30T17:14:17.810
> 
> 标签：mobile, browser, expressionengine

> **可能重复：**
> [检测移动设备的最简单方法](https://stackoverflow.com/questions/4117555/simplest-way-to-detect-a-mobile-device)

我正在寻找一种将移动浏览器定向到一个模板、在表达式引擎中以及将台式机/笔记本电脑浏览器定向到另一个模板的方法。

我确信有一种简单的方法可以做到这一点，但除了条件 css 之外无法想到它，但这不会是直截了当的。也许最好的解决方案是让 javascript 检测浏览器并获取 ee 模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:52:32.077

查看免费的附加组件[MX Mobile Device Detect](http://devot-ee.com/add-ons/mx-mobile-device-detect)和[Mobile](http://devot-ee.com/add-ons/mobile)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T01:24:43.420

我编写了[这个脚本来检测](http://www.justindocanto.com/scripts/detect-a-user-on-a-mobile-browser-or-device)PHP 中的移动浏览器。

该代码通过 preg_match()ing 基于用户代理字符串检测用户。它在所有当前的移动设备上都具有 100% 的准确度，我目前正在对其进行更新以支持更多的移动设备。代码叫做isMobile，如下：

```
function isMobile() {
    return preg_match("/(android|avantgo|blackberry|bolt|boost|cricket|docomo|fone|hiptop|mini|mobi|palm|phone|pie|tablet|up\.browser|up\.link|webos|wos)/i", $_SERVER["HTTP_USER_AGENT"]);
} 
```

你可以像这样使用它：

```
// Use the function
if(isMobile())
    // Do something for only mobile users
else
    // Do something for only desktop users 
```

要将用户重定向到您的移动网站，我会这样做：

```
// Create the function, so you can use it
function isMobile() {
    return preg_match("/(android|avantgo|blackberry|bolt|boost|cricket|docomo|fone|hiptop|mini|mobi|palm|phone|pie|tablet|up\.browser|up\.link|webos|wos)/i", $_SERVER["HTTP_USER_AGENT"]);
}
// If the user is on a mobile device, redirect them
if(isMobile())
    header("Location: http://m.yoursite.com/"); 
```

如果您有任何问题，请告诉我，祝您好运！

# java - 浏览时没有杀死Java Applet

> ID：10821055
> 
> 赞同：4
> 
> 时间：2012-05-30T17:14:26.573
> 
> 标签：java, applet

当用户离开加载小程序的页面时，如何停止 Java 小程序的进程？

我正在使用 Chrome，现在要终止小程序，我必须使用窗口的任务栏并终止进程 java.exe

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T18:20:57.477

Java 小程序有生命周期方法。它们是`init`、`start`和。您应该学习使用它们，但更重要的是，您应该了解浏览器何时调用这些方法中的每一个。`stop``destroy`

当您离开您的页面时，`stop`会调用它，并且您应该停止您启动的线程`start`并清理资源（如果您分配了任何资源）。浏览器不会在每次页面重新加载时杀死 JVM，因为它效率极低（以及其他原因），所以如果你想停止你的小程序正在做的任何事情，请在`stop`方法中实现它。

另请参阅[此处](http://docs.oracle.com/javase/tutorial/deployment/applet/appletMethods.html)和该页面上的其他链接，以获得进一步的解释。

# objective-c - 来自 YouTube JSON 的日期格式化程序

> ID：10821056
> 
> 赞同：3
> 
> 时间：2012-05-30T17:14:35.970
> 
> 标签：objective-c, ios5

JSON YouTube 正在返回这种日期格式`2010-07-12T08:22:07.000Z`，我试图适应我的需求，但没有成功。中间的“T”和 .000Z 我不知道如何处理它们。

```
 NSDateFormatter *df = [[NSDateFormatter alloc] init];

    [df setDateFormat:@"yyyy-MM-ddTHH:mm:ss.ZZZZ"];

    NSDate *date = [df dateFromString: [videoDic valueForKey:@"fecha"]];

    [df setDateFormat:@"dd/MM/yyyy"];

    NSString *dateStr = [df stringFromDate:date]; 
```

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-05T20:41:03.870

根据本[手册](https://developers.google.com/youtube/v3/docs/playlistItems)：

*片段*。**publishedAt**是**datetime**类型 将项目添加到播放列表的日期和时间。该值以[ISO 8601](http://www.w3.org/TR/NOTE-datetime) (YYYY-MM-DDThh:mm:ss.sZ) 格式指定。

根据 ISO 8601 格式，你可以这样写：

```
 dateFormatter.timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
    dateFormatter.dateFormat = @"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"; 
```

其中**SSS**是三个字母的小数秒。**Z**表示 UTC 时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T17:42:20.807

在通过 dateFormatter 运行之前尝试剥离字符串。

```
NSString *formattedString = [[videoDic valueForKey:@"fecha"] stringByReplacingOccurrencesOfString:@"T" withString:@""];

formattedString = [formattedString stringByReplacingCharactersInRange:NSMakeRange(18, 5) withString:@""];

NSDateFormatter *df = [[NSDateFormatter alloc] init];

[df setDateFormat:@"yyyy-MM-ddHH:mm:ss"];

NSDate *date = [df dateFromString: formattedString];

[df setDateFormat:@"dd/MM/yyyy"];

NSString *dateStr = [df stringFromDate:date]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T15:10:27.857

`setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.000'Z'"` 为我工作

# android - 具有大量视图或动态视图的 Viewpager

> ID：10821057
> 
> 赞同：1
> 
> 时间：2012-05-30T17:14:38.440
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我想用动态视图实现 Viewpager，即当用户向左/向右轻拂/拖动视图时视图会自行更新。使用预存储数据库中的下一行更新视图。我该如何实现它？
我想这样做的原因是：我在 db 中有大约 3000 个条目，我想一次显示一个。我不能一次创建这么多视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-18T15:05:17.750

如下面，希望对你有所帮助。

```
public class BottomAdatper extends PagerAdapter {
@Override
public int getCount() {
    return 10000;
}

@Override
public boolean isViewFromObject(View view, Object o) {
    return view == o;
}

ArrayList<TextView> caches = new ArrayList<>();

@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    caches.add((TextView) object);
    container.removeView((View) object);
}

@Override
public Object instantiateItem(ViewGroup container, int position) {
    TextView tv = null;
    if (caches.size() == 0) {
        tv = new TextView(container.getContext());
        tv.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));
        tv.setGravity(Gravity.CENTER);
        tv.setTextSize(60);
        tv.setBackgroundColor(Color.YELLOW);
    } else {
        tv = caches.remove(0);
    }
    tv.setText("" + position);
    container.addView(tv);
    return tv;
}
} 
```

# space-complexity - 递归算法的空间复杂度

> ID：10821059
> 
> 赞同：10
> 
> 时间：2012-05-30T17:14:45.457
> 
> 标签：space-complexity

我在一次采访中被问到，解决检查回文问题的有效方法。

现在我可以做两件事：

1.  从 i = 0 到 i = n/2 并比较第 i 个和第 n 个字符是否相等。
2.  我可以使用递归来检查第一个和最后一个是否相同，并且字符串的其余部分是一个回文。

第二个是递归的。我的问题是算法的递归和非递归版本的空间复杂度有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T17:22:42.763

阅读

1.  [http://www.codeproject.com/Articles/21194/Iterative-vs-Recursive-Approaches](http://www.codeproject.com/Articles/21194/Iterative-vs-Recursive-Approaches)
2.  [递归还是迭代？](https://stackoverflow.com/questions/72209/recursion-or-iteration)

基本上，递归算法会增加开销，因为您将递归调用存储在执行堆栈中。

但是如果递归函数是调用的最后一行（尾递归），则没有额外的惩罚。

那当然两种算法是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:20:37.660

理论上它们具有相同的空间复杂度；这在很大程度上取决于是否可以优化[尾递归。](http://en.wikipedia.org/wiki/Tail_call)

如果是这样，堆栈在每次递归时都会被替换，因此不会产生惩罚。

# mysql - 经常更改条目的最佳数据库模式

> ID：10821060
> 
> 赞同：0
> 
> 时间：2012-05-30T17:14:45.493
> 
> 标签：mysql, indexing, schema

我想设计一个快速的数据库模式，它可以处理排序和过滤列以及更新条目。

为此，我创建了以下场景：

*   一个事件只有一个名称、状态、最后订阅日期、描述和一个位置
*   活动的可用席位数量与活动一起保存，每次参与者订阅时都会更新
*   每个事件都只有一个类别
*   事件只能按类别列出
*   事件可以按名称、状态或日期过滤（无异或）
*   事件可以按名称、状态或日期（异或）排序
*   这些表必须处理超过 10 个 mio 条目

对于所有测试，我使用 MySQL 和 InnoDB 表。我还尝试尽可能频繁地使用多个插入/更新/删除。通过使用*LIKE '%[word]%'完成过滤*

首先，我尝试使用 2 个表：一个用于类别，另一个用于事件。索引是类别名称、类别状态名称、类别日期名称和类别日期状态名称。为此，列出、过滤和排序非常快，但插入、更新或删除条目非常慢。我也遇到了锁超时，因为重建索引花费了太多时间。

第二次尝试是有 3 个表：类别、事件和位置。但是如果位置表包含 6 个或更多条目，它也会变慢。我认为是因为快速捕获的索引。添加 100k 个条目大约需要 272 秒。*位置*的索引是primary-index *id*和*zip-street*

下一个尝试是为 last-subscription-date 和计数器创建一个自己的表。但是过滤这个日期或排序这个日期的可能性呢？

最好有 3 个索引，例如：*类别名称、类别日期、类别状态*，还是我的解决方案有 4 个索引*类别名称、类别状态名称、类别日期名称和类别日期状态-*为 MySQL*命名更好的一个？*

我也在考虑字段类型：目前我使用 VARCHAR 作为名称。但也许 CHAR 更好，因为每个条目都具有相同的长度，因此跳转到索引中的特定位置而不是使用可变长度会更快。你怎么看？

有人对如何设计一个支持上述场景的良好和快速的数据库模式有一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:59:38.563

索引是固定长度的，因此 CHAR 与 VARCHAR 对索引无关紧要，尽管它对表扫描很重要。

如果没有具体细节，我认为我无法提供任何其他明确的答案。我可以给你一些一般性的建议。

您应该避免插入聚集索引（InnoDB 主键或第一个唯一键）。聚集索引通常与自动递增的列一起使用，以便仅将索引附加到其中，而不会在中间插入任何内容。这避免了重建索引。

对于非聚集（二级）索引，索引越大，在插入时必须重新构建的频率就越高。可以执行插入，直到页面填满，然后重新构建。同样，附加到索引的末尾很好。

删除不会影响性能，因为索引只标记为删除，并且在空闲时间重建索引。

不应在基数低的列上创建索引，因为 MySQL 不会使用它们。仅应根据需要添加索引，每次都权衡利弊。

多列索引更大（页面中的条目更少）并且需要更新更多条目。谨慎添加多列索引。

MyISAM 更适合频繁读取，但由于锁争用（表锁），在多用户环境中频繁更新/插入会陷入困境。由于锁争用（行锁）较少，InnoDB 更适合多用户环境中的更新，但读取速度较慢（仍需要行锁）。

表单的过滤`LIKE '%[word]%'`不能使用索引，但过滤`LIKE '[word]%'`可以使用索引。

在频繁更新的系统上，索引对于选择记录进行更新和读取记录同样重要。索引越好，锁争用越少，因此性能越好，死锁越少。

JOIN 越多，成本越高，查询越慢。JOIN 还不错，但是多行（大型结果集）上的 JOIN 可能会很慢。

一些与性能无关的警告：

使用 InnoDB，您应该准备好处理由于死锁而导致的失败事务。

# postgresql - Postgres COPY TO NULL 整数

> ID：10821068
> 
> 赞同：10
> 
> 时间：2012-05-30T17:15:05.783
> 
> 标签：postgresql, csv, import

我有一个包含各种列的 CSV。其中一列包含整数数据。但是，当运行复制到：

```
COPY soc 
FROM '~/soc.asc'
WITH DELIMITER '$'; 
```

我得到以下信息：

```
ERROR:  invalid input syntax for integer: ""
CONTEXT:  COPY soc, line 1, column soc_code: "" 
```

因为 Postgres 似乎试图将一个空字符串粘贴到一个整数中。我怎样才能解决这个问题？如果可以帮助的话，我真的不想捏造我的模式以适应导入。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-30T17:25:13.027

您可以告诉 postgres 将[某些值解释为 NULL](http://www.postgresql.org/docs/current/interactive/sql-copy.html)，例如：

```
COPY soc FROM '~/soc.asc' WITH DELIMITER AS '$' NULL AS '' 
```

# c++ - 黑莓 10：级联和 ForeignWindow

> ID：10821076
> 
> 赞同：2
> 
> 时间：2012-05-30T17:15:36.250
> 
> 标签：c++, qt, blackberry-10

我正在使用 Cascades UI，我需要使用 ForeignWindow 来开发一个控件，该控件将显示一个能够在其中缩放和平移的图像。ImageView 控件根本无法做到这一点。

我的问题是：我应该如何以及在哪里处理我将用作 ForeignWindow 的窗口的触摸事件（以便平移或缩放）。关于与使用事件循环的原生 SDK 不同，Cascades 应用程序使用 App 作为主类，那么如果我在 Native 中为窗口开发，我应该在哪里处理我通常会处理的 screen_event_t 和/或手势事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:43:08.407

在级联中，您可以将代码添加到主类 APP 类中。您可以在 APP.cpp 文件中添加方法，它会起作用。

# python - 在 Python 中编写格式良好的文本

> ID：10821083
> 
> 赞同：11
> 
> 时间：2012-05-30T17:16:16.073
> 
> 标签：python, file, text

在 Python 中，我正在使用如下代码写入文本文件：

```
f.write(filename + type + size + modified) 
```

当然，输出看起来真的很丑：

```
C:/Config/ControlSet/__db.006  file          56 KB   2012-Apr-30 10:00:46.467 AM
C:/Config/ControlSet dir       68881 KB   2012-Apr-30 10:00:46.396 AM 
C:/Config/DataStore.avlocate file           0 KB   2012-Apr-30 09:57:42.440 AM 
C:/Config/DataStoreLocate.bak file           0 KB   2012-Apr-30 09:57:42.470 AM 
C:/Config/DeviceConnections/devconn.bak file          41 KB   2012-Apr-30 10:39:50.181 AM   
C:/Config/DeviceConnections/devconn.cfg file          41 KB   2012-May-29 10:12:45.288 AM 
```

但我想对齐条目，所以它看起来像这样：

```
C:/Config/ControlSet/__db.006                                            file          56 KB   2012-Apr-30 10:00:46.467 AM
C:/Config/ControlSet                                                      dir       68881 KB   2012-Apr-30 10:00:46.396 AM 
C:/Config/DataStore.avlocate                                             file           0 KB   2012-Apr-30 09:57:42.440 AM 
C:/Config/DataStoreLocate.bak                                            file           0 KB   2012-Apr-30 09:57:42.470 AM 
C:/Config/DeviceConnections/devconn.bak                                  file          41 KB   2012-Apr-30 10:39:50.181 AM   
C:/Config/DeviceConnections/devconn.cfg                                  file          41 KB   2012-May-29 10:12:45.288 AM 
```

我的问题与[这个问题](https://stackoverflow.com/questions/2866637/nicely-formatted-text-file)类似，只是我不知道文件名会提前多久。我应该如何处理这个？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-30T17:28:56.487

如果您可以先获取所有文件名的列表，那么您可以执行以下操作：

```
max_width = max(len(filename) for filename in filenames)
for filename in filenames:
    f.write(filename.ljust(max_width+1)+..whatever else..) 
```

如果您不能首先获得所有文件名的列表，那么就无法确保所有内容都排列整齐，因为无法知道您以后是否会获得一个名称很长的文件。

但是，在这种情况下，我通常只是假设 N 列通常就足够了，对于某些 N，在这种情况下，您可以执行以下操作：

```
f.write('%-40s %6s %10s %2s\n' % (filename, type, size, modified)) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-30T17:21:56.397

我认为您正在寻找的是[str.ljust()](http://docs.python.org/library/stdtypes.html#str.ljust)方法，也许还有[str.rjust()](http://docs.python.org/library/stdtypes.html#str.rjust)。

正如文档中所说，如果原始字符串太长，则会返回原始字符串，因此您永远不会截断任何数据，但您必须提前找出最长的长度才能获得真正完美的格式。我建议只使用相当大的值作为值，除非它必须是完美的。

就像是...

```
f.write(
    "{0} {1} {2} {3}".format(
        filename.ljust(max_filename),
        type.rjust(max_type),
        size.rjust(max_size),
        modified.rjust(max_modified)
        )
    ) 
```

会成功的。

# asp.net-mvc-3 - Razor 文档格式化程序停止换行

> ID：10821084
> 
> 赞同：1
> 
> 时间：2012-05-30T17:16:24.300
> 
> 标签：asp.net-mvc-3, visual-studio-2010, razor

有没有地方可以教 Razor（它可以是 R#，因为我也安装了它）文档格式化程序/漂亮打印机一些新技巧？就像不打破长线，根本不打破标签，或者在结束标签之前添加一个中断，例如`</p>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:55:16.037

这是视觉工作室选项的一部分。转到“工具|选项”。我也更改了“标记特定选项...”，因为我喜欢以特定方式格式化我的 html。Razor 在格式化时使用这些设置。

![在此处输入图像描述](../Images/e239549fafb2533c6ca6750224047009.png)

# c# - 将html注入到电子邮件的asp.net字符串中

> ID：10821087
> 
> 赞同：0
> 
> 时间：2012-05-30T17:16:34.200
> 
> 标签：c#, asp.net, html, string

目前，我正在发送一封 HTML 电子邮件，我正在使用 asp.net 字符串将链接输出为纯文本而不是超链接，这正是我想要的。生成电子邮件字符串的代码如下所示：

```
 Uri link = new Uri("http://www.somesite.com");

string body = "Plus, you may wish to bookmark " + link + " for your rate comparison needs."

string subject = Resources.Email.VerificationEmailSubject;

Email.SendEmail(email, subject, body);

   public static void SendEmail(string toAddress, string subject, string body)
    {
        try
        {

            MailMessage mailMessage = new MailMessage();
            mailMessage.To.Add(new MailAddress(toAddress));
            mailMessage.Subject = subject;
            mailMessage.IsBodyHtml = true;
            mailMessage.Body = body;

            using (SmtpClient smtpClient = new SmtpClient())
            {
                smtpClient.Send(mailMessage);
            }
        }
        catch (Exception ex)
        {
            LogManager log = new LogManager();
            log.LogError(typeof(Email), ex);
        }
    } 
```

最简单的方法是什么？

谢谢！

编辑1：

试过 -

```
string emailContent = "Plus, you may wish to bookmark <a href='" + link + "'>www.comparsave.com</a> for your rate comparison needs."; 
```

查看电子邮件源，该字符串正在被 asp.net 编码为 html 中的纯文本：< 和 > 被替换为“& gt;” "<" 等如何阻止asp.net这样做？

编辑2：

好的，想通了！稍后我有时间会发布答案。谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:19:31.880

如果是 HTML 电子邮件，请执行以下操作：

```
"<a href='" + link + "'>" + link + "</a>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:22:59.597

使用模板并将链接插入其中。例如

```
const string template = "Plus, you may wish to bookmark <a href='{0}'>{0}</a> for your rate comparison needs."

string htmlEmailBody = String.Format(template, link); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:40:18.450

解决方案是在充当电子邮件模板的 cshtml 文件中使用 Html.Raw。由于某种原因，我无法在上面发布的 cs 文件中调用 Html.Raw。

# asp.net-mvc-3 - 虚 URL 重新路由

> ID：10821091
> 
> 赞同：0
> 
> 时间：2012-05-30T17:16:46.197
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我试图允许网站上的用户指定和更改他们自己独特的 Vanity Url。

我要将选择的 url 存储在数据库中，我想调用它重新路由给用户。

到目前为止，这就是我所拥有的，但我不确定从这里去哪里。

```
routes.MapRoute(
            "User", // Route name
            "User/Profile/{id}", // URL with parameters
            new { controller = "User", action = "Profile", id = UrlParameter.Optional }, // Parameter defaults
            new string[] { typeof(MvcApplication).Namespace + ".Controllers" }
        ); 
```

我有什么办法可以接收 Vanity Url 并将其重新路由到 PersonID？

我还尝试操纵 ActionResult 以处理字符串 Vanity Url 或 int PersonID，但这似乎没有朝着正确的方向发展，所以我回到了 routes.Maproute。

编辑：

我希望用户能够输入

```
http://localhost:60619/User/Profile/Vanity 
```

他们最终会在同一个地方，就像他们进入一样

```
http://localhost:60619/User/Profile/224 Assuming the PersonID is 224 
```

行动结果：

```
 public ActionResult Profile(int ID)
    {
        ppUser viewerChoice = DB.ppUser_GetUserByPersonID(ID);
        return View(ID);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:33:33.940

您可以使用它对我有用的东西，通过使用下面的代码，您可以将两个不同的页面放在一个域上，只需在其中进行区分

```
 protected void Application_Start(object sender, EventArgs e)
    {
        RegisterRoutes(RouteTable.Routes);
    }

    public static void RegisterRoutes(RouteCollection routeCollection)
    {
        routeCollection.MapPageRoute("RouteForCustomer", "{Id}", "~/User.aspx");
        routeCollection.MapPageRoute("RouteForCustomer", "Home", "~/Default.aspx");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:44:22.160

所以答案是虚 URL 不会根据 URL 重新路由到每个用户的单独视图。

相反，虚 URL 会将所有用户路由到同一个视图，并且视图内容将根据虚 URL 的值而改变。在这种情况下，虚 URL 的工作方式与数据库 ID 完全相同。

例如：

*   ://xxx/用户/个人资料/迈克
*   ://xxx/用户/个人资料/史蒂夫
*   ://xxx/用户/个人资料/彼得
*   ://xxx/用户/个人资料/索尼娅

将所有路由相同的视图。

所以控制器内部的代码会加载基于 Mike、Steve、Peter 等的内容。

这相当于加载基于配置文件 id 24、56、88 等的内容。

您必须保证虚 URL 是唯一的，就像个人资料 ID 一样

以下是有关如何创建表的示例：

```
USE [mydb]
GO

/****** Object:  Table [dbo].[Vanity]    Script Date: 05/30/2012 13:53:57 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[Vanity](
    [ProfileID] [int] NOT NULL,
    [VanityURL] [nvarchar](50) NOT NULL,
    [UserName] [nvarchar](50) NULL,
    [Password] [nvarchar](50) NULL,
 CONSTRAINT [PK_Vanity] PRIMARY KEY CLUSTERED 
(
    [ProfileID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

USE [mydb]
/****** Object:  Index [IX_Vanity]    Script Date: 05/30/2012 13:53:57 ******/
CREATE UNIQUE NONCLUSTERED INDEX [IX_Vanity] ON [dbo].[Vanity] 
(
    [VanityURL] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO

ALTER TABLE [dbo].[Vanity]  WITH CHECK ADD  CONSTRAINT [FK_Vanity_Vanity] FOREIGN KEY([ProfileID])
REFERENCES [dbo].[Vanity] ([ProfileID])
GO

ALTER TABLE [dbo].[Vanity] CHECK CONSTRAINT [FK_Vanity_Vanity]
GO 
```

# php - 使用 PHP 读取文本文件

> ID：10821097
> 
> 赞同：-1
> 
> 时间：2012-05-30T17:17:08.307
> 
> 标签：php, file, text

我有一个文本文件，其中包含公司名称和价格。像这样：

```
first company name
2,2
second company name
2,7
third company name
1,9 
```

问题是我无法正确读取和显示数据。我的代码：

```
<?php
$content=file("test_data.txt");

foreach ($content as $data)
{
    $data = array(
    'company' => $content[0], 
    'price' => $content[1]
    );
    echo $data['company'];
    echo "<br>";
    echo $data['price'];
}
?> 
```

怎么了？我还需要将数据发送到 SQL 数据库，但首先我必须澄清上面的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T17:21:06.667

因为`file`函数返回行数组。你逐行循环留置权，你应该逐行循环文件。你可以这样做：

```
$lines = file("test_data.txt");
$data = array();
for($i = 0; $i < count($lines); $i += 2)
{
    $pair = array();
    $pair['company'] = $lines[$i];
    $pair['price'] = $lines[$i + 1];
    $data[] = $pair;
} 
```

`$data`数组应类似于：

```
Array
(
    [0] => Array
        (
            [company] => first company name
            [price] => 2,2
        )

    [1] => Array
        (
            [company] => second company name
            [price] => 2,7
        )

    [2] => Array
        (
            [company] => third company name
            [price] => 1,9
        )

) 
```

# filter - 在管理员生成器 symfony 之前执行过滤器链

> ID：10821098
> 
> 赞同：0
> 
> 时间：2012-05-30T17:17:20.163
> 
> 标签：filter, symfony-1.4, admin, generator, apostrophe-cms

在使用管理生成器调用操作构建之前，我需要调用添加到过滤器链的过滤器。但似乎过滤器链没有在管理生成器之前执行。

有什么解决方法吗？

编辑：我正在使用撇号沙箱。我需要在运行时更改数据库连接，因为每个客户端都有一个数据库，并且我在过滤器中执行此操作。但是对于使用管理生成器的页面，没有调用过滤器，我收到以下错误。

```
at Doctrine_Manager->getCurrentConnection()
in SF_ROOT_DIR\lib\vendor\symfony\lib\plugins\sfDoctrinePlugin\lib\vendor\doctrine\Doctrine\Manager.php line 558 ...
at Doctrine_Manager->getConnectionForComponent('Tag')
in SF_ROOT_DIR\lib\vendor\symfony\lib\plugins\sfDoctrinePlugin\lib\vendor\doctrine\Doctrine\Core.php line 1090 ...
at Doctrine_Core::getTable('Tag')
in SF_ROOT_DIR\lib\vendor\symfony\lib\plugins\sfDoctrinePlugin\lib\generator\sfDoctrineGenerator.class.php line 41 ...
at sfDoctrineGenerator->configure()
in SF_ROOT_DIR\lib\vendor\symfony\lib\generator\sfModelGenerator.class.php line 56 ...
at sfModelGenerator->generate(array('model_class' => 'Tag', 'theme' => 'aAdmin', 'non_verbose_templates' => 1, 'with_show' => , 'singular' => null, 'plural' => null, 'route_prefix' => 'a_tag_admin', 'with_doctrine_route' => 1, 'config' => array('list' => array('sort' => array('name', 'asc'), 'title' => 'Tags Admin', 'display' => array('=name', 'tag_aBlogPost', 'tag_aEvent', 'tag_aMediaItem', 'tag_aPage'), 'fields' => array('name' => array('label' => 'Tag'), 'tag_aPage' => array('label' => 'Pages'), 'tag_aMediaItem' => array('label' => 'Media'), 'tag_aEvent' => array('label' => 'Events'), 'tag_aBlogPost' => array('label' => 'Blog'), 'tab_aEvent' => array('label' => 'aEvent')), 'object_actions' => array(), 'actions' => array('new' => array('label' => '<span class="icon"></span> New Tag', 'action' => 'new', 'params' => array('class' => 'a-btn big icon a-add')), 'clean' => array('label' => '<span class="icon"></span> Clean Tags', 'action' => 'clean', 'params' => array('class' => 'a-btn big a-show-busy')))), 'form' => array('class' => 'aTagForm'), 'filter' => null, 'edit' => array('title' => 'Edit Tag'), 'new' => array('title' => 'New Tag')), 'moduleName' => 'aTagAdmin'))
in SF_ROOT_DIR\lib\vendor\symfony\lib\generator\sfGeneratorManager.class.php line 113 ...
at sfGeneratorManager->generate('aTagAdminGenerator', array('model_class' => 'Tag', 'theme' => 'aAdmin', 'non_verbose_templates' => 1, 'with_show' => , 'singular' => null, 'plural' => null, 'route_prefix' => 'a_tag_admin', 'with_doctrine_route' => 1, 'config' => array('list' => array('sort' => array('name', 'asc'), 'title' => 'Tags Admin', 'display' => array('=name', 'tag_aBlogPost', 'tag_aEvent', 'tag_aMediaItem', 'tag_aPage'), 'fields' => array('name' => array('label' => 'Tag'), 'tag_aPage' => array('label' => 'Pages'), 'tag_aMediaItem' => array('label' => 'Media'), 'tag_aEvent' => array('label' => 'Events'), 'tag_aBlogPost' => array('label' => 'Blog'), 'tab_aEvent' => array('label' => 'aEvent')), 'object_actions' => array(), 'actions' => array('new' => array('label' => '<span class="icon"></span> New Tag', 'action' => 'new', 'params' => array('class' => 'a-btn big icon a-add')), 'clean' => array('label' => '<span class="icon"></span> Clean Tags', 'action' => 'clean', 'params' => array('class' => 'a-btn big a-show-busy')))), 'form' => array('class' => 'aTagForm'), 'filter' => null, 'edit' => array('title' => 'Edit Tag'), 'new' => array('title' => 'New Tag')), 'moduleName' => 'aTagAdmin'))
in SF_ROOT_DIR\lib\vendor\symfony\lib\config\sfGeneratorConfigHandler.class.php line 82 ...
at sfGeneratorConfigHandler::getContent(object('sfGeneratorManager'), 'aTagAdminGenerator', array('model_class' => 'Tag', 'theme' => 'aAdmin', 'non_verbose_templates' => 1, 'with_show' => , 'singular' => null, 'plural' => null, 'route_prefix' => 'a_tag_admin', 'with_doctrine_route' => 1, 'config' => array('list' => array('sort' => array('name', 'asc'), 'title' => 'Tags Admin', 'display' => array('=name', 'tag_aBlogPost', 'tag_aEvent', 'tag_aMediaItem', 'tag_aPage'), 'fields' => array('name' => array('label' => 'Tag'), 'tag_aPage' => array('label' => 'Pages'), 'tag_aMediaItem' => array('label' => 'Media'), 'tag_aEvent' => array('label' => 'Events'), 'tag_aBlogPost' => array('label' => 'Blog'), 'tab_aEvent' => array('label' => 'aEvent')), 'object_actions' => array(), 'actions' => array('new' => array('label' => '<span class="icon"></span> New Tag', 'action' => 'new', 'params' => array('class' => 'a-btn big icon a-add')), 'clean' => array('label' => '<span class="icon"></span> Clean Tags', 'action' => 'clean', 'params' => array('class' => 'a-btn big a-show-busy')))), 'form' => array('class' => 'aTagForm'), 'filter' => null, 'edit' => array('title' => 'Edit Tag'), 'new' => array('title' => 'New Tag')), 'moduleName' => 'aTagAdmin'))
in SF_ROOT_DIR\lib\vendor\symfony\lib\config\sfGeneratorConfigHandler.class.php line 75 ...
at sfGeneratorConfigHandler->execute(array('C:/wamp/www/sfprojects/asandbox/plugins/apostrophePlugin/modules/aTagAdmin/config/generator.yml', 'C:\wamp\www\sfprojects\asandbox\apps\frontend/modules/aTagAdmin/config/generator.yml'))
in SF_ROOT_DIR\lib\vendor\symfony\lib\config\sfConfigCache.class.php line 108 ...
at sfConfigCache->callHandler('modules/aTagAdmin/config/generator.yml', array('C:/wamp/www/sfprojects/asandbox/plugins/apostrophePlugin/modules/aTagAdmin/config/generator.yml', 'C:\wamp\www\sfprojects\asandbox\apps\frontend/modules/aTagAdmin/config/generator.yml'), 'C:\wamp\www\sfprojects\asandbox\cache\frontend\dev\config/modules_aTagAdmin_config_generator.yml.php')
in SF_ROOT_DIR\lib\vendor\symfony\lib\config\sfConfigCache.class.php line 197 ...
at sfConfigCache->checkConfig('modules/aTagAdmin/config/generator.yml', 1)
in SF_ROOT_DIR\lib\vendor\symfony\lib\config\sfConfigCache.class.php line 249 ...
at sfConfigCache->import('modules/aTagAdmin/config/generator.yml', , 1)
in SF_ROOT_DIR\lib\vendor\symfony\lib\controller\sfController.class.php line 186 ...
at sfController->forward('aTagAdmin', 'index')
in SF_ROOT_DIR\lib\vendor\symfony\lib\controller\sfFrontWebController.class.php line 48 ...
at sfFrontWebController->dispatch()
in SF_ROOT_DIR\lib\vendor\symfony\lib\util\sfContext.class.php line 170 ...
at sfContext->dispatch()
in SF_ROOT_DIR\web\index.php line 10 ... 
```

# php - Doctrine - 获取集合中对象的偏移量（实现无限滚动）

> ID：10821100
> 
> 赞同：0
> 
> 时间：2012-05-30T17:17:27.257
> 
> 标签：php, doctrine, scroll, infinite

我正在使用 Doctrine 并尝试在用户浏览器上显示的一组笔记上实现**无限滚动。**

该应用程序是非常动态的，因此当用户提交一个新笔记时，除了被发送（和存储）到服务器之外，该笔记被直接添加到集合的顶部。

这就是为什么**我不能使用传统的分页方法**，您只需将页码发送到服务器，服务器就会从中计算出偏移量和结果数。

举个例子来说明我的意思，假设显示了 20 个注释，然后用户添加了 2 个注释，因此显示了 22 个注释。如果我只是请求“第 2 页”，则该页面的前 2 项将是当前显示给用户的页面的最后两项。

这就是为什么我追求一种更复杂的方法，这就是我要解释的方法。

请考虑以下代码，它是服务于 AJAX 请求的服务器代码的一部分以获取更多注释：

```
// $lastNoteDisplayedId is coming from the AJAX request
$lastNoteDisplayed = $repository->findBy($lastNoteDisplayedId);

$allNotes = $repository->findBy($filter, array('numberOfVotes' => 'desc'));

$offset = getLastNoteDisplayedOffset($allNotes, $lastNoteDisplayedId);

// retrieve the page to send back so that it can be appended to the listing
$notesPerPage = 30       
$notes = $repository->findBy(
  array(), 
  array('numberOfVotes' => 'desc'), 
  $notesPerPage, 
  $offset
);
$response = json_encode($notes);
return $response; 
```

基本上我需要编写方法`getLastNoteDisplayedOffset`，给定整套注释和一个特定的注释，它可以给我它的偏移量，这样我就可以将它用于上一个 Doctrine 语句的分页。

我知道可能的实现是：

```
getLastNoteDisplayedOffset($allNotes, $lastNoteDisplayedId) {
    $i = 0;
    foreach ($allNotes as $note) {
        if ($note->getId() === $lastNoteDisplayedId->getId()) {
                break;
        }
        $i++;   
    }
    return $i;
} 
```

我不想遍历所有笔记，因为性能是一个重要因素。我想知道 Doctrine 本身是否有方法，或者您是否可以提出不同的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:36:31.057

我没有使用过 Doctrine，但解决方案将涉及不使用偏移量而是使用 WHERE 条件。我猜它会是这样的，但我不知道 Doctrine 的语法：

```
$notes = $repository->findBy(
  array('id < ' => $lastNoteDisplayedId), // I'm guessing the first param is the where condition, don't know the syntax
  array('createdAt' => 'desc'), 
  $notesPerPage
  // remove the offset
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:13:15.710

在一个旧项目中，我曾经按照您的意愿创建一个无限滚动。

我所做的是一个web服务，它可以接收一个叫做offset的参数。

在我的 javascript 中，我添加了一个事件来检测用户是否向下滚动了足够多的文档。当事件被触发时，我创建了 ajax 查询，我计算了页面中已经存在的元素的数量（它们在一个表中）。

```
$(window).scroll(function(){
            if  ($(window).scrollTop() + $(window).height() >= $(document).height() - 50){
                lastEvents();
            }
        });

var isLoading = false;
function lastEvents() {
    if (!isLoading) {
      isLoading = true;
      var nb = $('table#events tr').length

      $.ajax({
        url: 'getEvents.php',
        data: {
          offset: nb
        },
        success: function (data) {
          isLoading = false;
          $('.table#events').append(data);
        }
      });
    }
} 
```

然后在我的学说查询中，我做了类似的事情：

```
$events = Doctrine_Query::create()
            ->select()
            ->from('Events e')
            ->orderBy('e.created_at ASC')
            ->limit(10)
            ->offset($_REQUEST['offset'])
            ->execute(); 
```

然后在我的模板中，我生成将附加 JS 的新表格行。

注意：现在，我当然会返回 json 然后在客户端解析它；）

# database - 在不重新启动服务器的情况下使 django 的设置缓存无效？

> ID：10821102
> 
> 赞同：5
> 
> 时间：2012-05-30T17:17:33.653
> 
> 标签：database, django, caching, multiple-databases, uwsgi

我正在使用一个涉及多个数据库的 django 应用程序 - 即动态添加多个数据库。每当有新客户注册时，我们都会为他们提供一个新数据库。设置文件可以动态加载这些（例如，我在服务器上运行一个 shell 脚本，它会在不更改任何代码的情况下更新数据库定义 - 如果你真的很好奇，请给我发消息），但是由于 uwsgi/django 缓存了设置，我必须碰撞 uwsgi 才能让新数据库被识别。

关于强制 django 重新加载设置或使其设置缓存无效的任何建议？它可以来自命令行等。目前我正在使用 `import settings` 而不是来自，`django.conf import settings`因为这在过去是半工作的，但我可以轻松切换回来。

谢谢！

ps - 如果答案是“你这个笨蛋，不要使用动态多数据库”，那也没关系；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:05:25.193

首先。如果您可以从多个数据库中辞职，那么只有在数据库列表固定时，Django 才能很好地支持这一点。如果您可以为每个客户端提供单独的数据库，您可能可以为不同的客户端提供单独的 wsgi 进程（和单独的 DATABASES 设置）。然后，您只需为新客户端生成新的 wsgi 进程，而不必修改设置。

如果你仍然想做你计划的事情，这里有一些提示：

动态重新加载设置不是一种选择。那里有很多问题。即使您与所有这些都作斗争，它们也可能会在您意想不到的时候回来，并且您将花费数小时（如果不是数天）进行调试。

如果您的数据库设置是一致的（即所有客户端的密码和用户相同），您可以考虑对 DATABASES 变量使用 defaultdict。默认字典有工厂选项。你可以在工厂里有这样的东西：

```
def database_configuration_factory(name):
    # check if database exists (ie. raw SQL)

    return {
        'NAME': name,
        ...
    } 
```

# mysql - 如何将日期时间从任何区域转换为mysql中的特定区域

> ID：10821105
> 
> 赞同：0
> 
> 时间：2012-05-30T17:17:48.520
> 
> 标签：mysql, convert-tz

我有一个 mySQL 表，其中记录了从各种不同时区记录的日期。如何在 mySQL 中执行 SELECT 语句时将 DateTime 值转换为查看用户 TimeZone ？

```
 SELECT ClientID,
        convert_tz(MessageDate,???,???)
        MeetingType,
        MeetingDate,
        Comments,
        CompanyName
    FROM clientCompNotes
    WHERE ClID = 970392281 AND CompanyID=411972145 
```

问题是从“MessageDate”字段中记录的日期开始接受任何时区，如下所示

```
 Wed May 30 2012 12:51:02 GMT-0400 (Eastern Daylight Time) 
```

非常感谢

丹尼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:21:03.183

```
CONVERT_TZ(dt,from_tz,to_tz) 
```

这`from_tz`是当前时间所在的时区，也是`to_tz`您要将其转换为的时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:03:47.017

你不应该这样做。MySQL 将为您执行时区转换，前提是您将时间存储在`TIMESTAMP`类型列中并`time_zone`正确设置会话变量。如[手册](http://dev.mysql.com/doc/en/time-zone-support.html)所述：

> MySQL 服务器维护几个时区设置：
> 
> [...]
> 
> *   每个连接时区。每个连接的客户端都有自己的时区设置，由会话[`time_zone`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_time_zone)变量给出。最初，会话变量从全局[`time_zone`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_time_zone)变量中获取其值，但客户端可以使用以下语句更改自己的时区：
>     
>     
>     
>     ```
>     mysql> SET time_zone = 时区；
>     ```
>     
>     
> 
> 当前会话时区设置会影响对区域敏感的时间值的显示和存储。这包括由函数（例如[`NOW()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_now)or ）显示的值[`CURTIME()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_curtime)，以及存储在列中和从[`TIMESTAMP`](http://dev.mysql.com/doc/en/datetime.html)列中检索的值。列的值[`TIMESTAMP`](http://dev.mysql.com/doc/en/datetime.html)从当前时区转换为 UTC 以进行存储，并从 UTC 转换为当前时区以进行检索。
> 
> 当前时区设置不会影响函数显示的值，例如、 或列中的[`UTC_TIMESTAMP()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_utc-timestamp)或 值。这些数据类型中的值也不以 UTC 存储；时区仅在从值转换时适用于它们。如果您想要、 或值的特定于语言环境的算术，请将它们转换为 UTC，执行算术，然后再转换回来。[`DATE`](http://dev.mysql.com/doc/en/datetime.html)[`TIME`](http://dev.mysql.com/doc/en/time.html)[`DATETIME`](http://dev.mysql.com/doc/en/datetime.html)`TIMESTAMP`[`DATE`](http://dev.mysql.com/doc/en/datetime.html)[`TIME`](http://dev.mysql.com/doc/en/time.html)[`DATETIME`](http://dev.mysql.com/doc/en/datetime.html)

# php - MYSQL/PHP 标签搜索引擎

> ID：10821106
> 
> 赞同：0
> 
> 时间：2012-05-30T17:17:58.103
> 
> 标签：php, mysql, tags, search-engine

我正在实现用于查找页面的标签，并且基本上具有 3 个表结构、标签、页面和标签页。对于网站的菜单系统，我希望将少量链接映射到标签，以便对相关性进行有根据的猜测。不是在寻找谷歌级别的搜索结果，而是在仅仅搜索一个会排除许多结果的术语之外的东西。例如，对于浪漫链接，除了浪漫之外，我还想选择爱情、关系等标签。既然标签如此普遍，是否有一个成熟的标签引擎可以通过标签提取结果而没有完全匹配？我正在考虑构建一个包含多个搜索词的 where 子句，但它开始变得有点笨拙。有没有比下面更好的方法？

潜在方法：

```
$sql = "SELECT * FROM tagpages WHERE";
switch ($tag)
{
case "romance": 
$where = "tag = 'relationship' || 
tag== 'love' ||
tag== 'breakup";
break;
case "sports":
$where = "tag = 'football' || 
tag== 'baseball' ||
tag== 'hockey";
break;
case "politics":
$where = "tag = 'election' || 
tag== 'presidential'";
break;
default:
$where = "";
}
$sql .= $where; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:59:59.393

对于发现这个问题的任何人，我都选择了在 SQL 查询中使用 Match Against 似乎更好的方法。对于与链接相似的标签或搜索词，即关系、浪漫、爱情等，只需创建一串关键字，无论您想要多长，例如 $keywords = "romance, love, interview"; 当您了解新术语时，您可以添加它。然后运行sql查询 $sql = "SELECT * FROM pages Match (shdescript, longdescript) Against ('$keywords')"; 为此，您需要在 MYSQL 中在要搜索的字段上创建全文索引，即 shortdescript longdescript。好处是它实际上按相关性对您的搜索结果进行排名，因为某些 MYSQL 引擎具有一些相当强大的搜索引擎功能。例如，[跨多个表的 Mysql 全文搜索相关性](https://stackoverflow.com/questions/9018577/mysql-fulltext-search-relevance-across-multiple-tables/9951200#9951200)或仅使用默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:40:24.940

好的开始你只匹配标签=字符串时的情况，你用case结构声明排除所有其他标签。

您可以使用“%”模数符号来匹配 LIKE 字符或匹配字符，然后对字符串的末尾进行模数，这意味着字符串的其余部分看起来像任何东西，只要模数符号之前的这些字符匹配。"CHAR%" 将返回字符，魅力

您可以使用 <> 排除，这意味着 NOT 但您可能需要切换到 IF...ELSE 结构，如果您知道所有可能的匹配项，我认为您可以只声明标签，然后它们将编号为 1.. .n 并且您可以匹配占位符编号...不确定那个。

# c - 从非托管 C 调用托管代码

> ID：10821109
> 
> 赞同：2
> 
> 时间：2012-05-30T17:18:05.093
> 
> 标签：c, vb.net, dll, sql-server-2008-r2

因此，经过大约一天半的时间，我取得了零进展。

我需要用 C 语言编写一个用于现有应用程序插件的 DLL。DLL 必须由 Visual Studio 2008 编译器使用以下选项进行编译

> cl -DNT40 -DPOMDLL -DCRTAPI1=_cdecl -DCRTAPI2=cdecl -D_WIN32 -DWIN32 -DWIN32_LEA N_AND_MEAN -DWNT -DBYPASS_FLEX -D_INTEL=1 -DIPLIB=none -I。-I"C:\plm\2T-RAC\TcEx press53\include" -I"C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include" -c -nologo -EHsc -W1 -Ox -Oy - -MD C:\mydir\myDll.c

然后将其链接到应用程序库。

它实际上需要做什么以及导致我出现问题的原因是，在其中一种方法中，它需要从 sql server 2008 r2 中提取数据。

从我今天看到的情况来看，您将无法直接在 C 中执行此操作，因为 2005 年以后的 SQL Server 旨在与 CLR 语言（C#、C++、VB.Net）进行通信。

有人建议我使用 VB.Net dll 处理所有数据库通信，然后从 C dll 中调用所述函数。

我在从非托管代码调用托管 dll 的主题上发现的大部分内容都谈到了 pinvoke 或 com 包装器，并且主要是从 c++ 的角度来看的。

我对 COM 或任何提到的技术的经验为零，因此如果有人能提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T17:38:02.620

您有很多选择可以做到这一点，但并非所有这些都是微不足道的。

## **混合模式组装**

*将托管代码导出*到 C 客户端的第一种也是更简单的方法是使用 C++/CLI 编写代码（或使用该语言编写包装器）。您只需像在普通非托管代码中那样导出所需的 C 函数，并在它们的实现中调用所需的托管函数。在[MSDN](http://msdn.microsoft.com/en-us/library/ms177552%28v=vs.90%29.aspx)上。

## **COM 互操作**

您将托管类导出为 COM 对象。在非托管代码中，您会看到普通的 COM 对象，请看[这里](http://blogs.msdn.com/b/deeptanshuv/archive/2005/06/26/432870.aspx)。

## **反向 P/Invoke**

你可以用不同的方式来做。更简单的一种是换位思考。如果您有一个 VB.NET 程序集 ( `vbnet.dll`) 和一个 C 库 ( `purec.dll`)，您可能会想到的第一件事是在 in 中添加一个依赖*项*。如果您这样做，您必须使用 COM 或使您的应用程序成为 .NET 主机。更简单的方法是还原：向in添加依赖项（使用 P/Invoke）。您的 C 接口将导出一个（例如）可以用函数指针填充的，您将在 VB.NET 中填充它（作为委托），您的 C 代码将简单地调用它们。看看[这里](http://msdn.microsoft.com/en-us/magazine/cc164193.aspx)。`vbnet.dll``purec.dll``purec.dll``vbnet.dll``struct``struct`

## **其他选项**

**本地主机**：这是艰难的方式。您的本机应用程序将托管 .NET 应用程序。它又长又复杂，如果你只需要导出几个函数，我想它太多了。我在这里发帖仅供参考：[MSDN 上的托管概述](http://msdn.microsoft.com/en-us/library/dd380850.aspx)。
**工业电脑**。您可以将您的应用程序分开，彼此可以忽略另一个应用程序的编写方式。只需定义一个接口和一个通道来连接它们（命名管道、共享内存或其他任何东西，请[在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574%28v=vs.85%29.aspx)查找列表）。如果您的 VB.NET 应用程序是一项服务或它由正在运行的应用程序托管，如果它只是导出一些您无法执行的功能，则此方法有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:43:46.567

我解决这个问题的方法只是让 C dll 调用 cmd 并执行编译的 VB.NET 可执行文件并通过管道输出它。虽然这不是一个完全理想的解决方案，但它在我需要的只是一个字符串的情况下工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T17:25:39.720

除非这是您在任何地方都使用的现有 vb.net dll（业务层），否则我可能会建议您不要在 C 应用程序中使用它。

有多种方法可以从 C 中与 MSSQL 进行通信。通过本机驱动程序或 ODBC 等。

# jqgrid - setGroupHeaders 函数中的错误：this.p 在 this.p.groupHeader = o 行中未定义；

> ID：10821110
> 
> 赞同：0
> 
> 时间：2012-05-30T17:18:12.033
> 
> 标签：jqgrid

尝试使用标题中所述的 goupHeader 时收到错误消息，因此 groupHeader 不起作用。我已按照 wiki 的所有说明进行操作。这是我的代码

```
<script type="text/javascript"> 
jQuery().ready(function (){
    jQuery("#t_dosen_gol").jqGrid({
        url:'{URL_XML}',
        datatype: "xml",
        sortable: false,
        colNames:['UNIT KERJA','III/a', 'III/b', 'III/c','III/d','IV/a','IV/b','IV/c','IV/d','IV/e','JUMLAH'],
        colModel:[
            {name:'satkerNama',index:'satkerNama', width:250},
            {name:'3a',index:'3a', width:50, align:"center", sortable:false, resizable: false},
            {name:'3b',index:'3b', width:50, align:"center", sortable:false, resizable: false},
            {name:'3c',index:'3c', width:50, align:"center", sortable:false, resizable: false},
            {name:'3d',index:'3d', width:50, align:"center", sortable:false, resizable: false},
            {name:'4a',index:'4a', width:50, align:"center", sortable:false, resizable: false},
            {name:'4b',index:'4b', width:50, align:"center", sortable:false, resizable: false},
            {name:'4c',index:'4c', width:50, align:"center", sortable:false, resizable: false},
            {name:'4d',index:'4d', width:50, align:"center", sortable:false, resizable: false},
            {name:'4e',index:'4e', width:50, align:"center", sortable:false, resizable: false},
            {name:'subtotal',index:'subtotal', width:75,align:"center"}                 
        ],
        //rowNum:10,
        width: 700,
        height: 400,
        //rowList:[10,20,30],
        pager: jQuery('#p_dosen_gol'),
        sortname: 'satkerid',
        viewrecords: true,
        sortorder: "desc",
        caption:"Tenaga Dosen Tetap Menurut Golongan/Ruang dan Unit Kerja"
    }).navGrid('#p_dosen_gol',{edit:false,add:false,del:false,search:false})});

jQuery("#t_dosen_gol").jqGrid('setGroupHeaders', { 
    useColSpanStyle: true, 
    groupHeaders:[ 
        {startColumnName: '3a', numberOfColumns: 9, titleText: 'GOLONGAN/RUANG'} 
    ] 
}); 
```

我该如何解决这个问题？任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:39:02.940

您的问题很简单：您将`setGroupHeaders`方法调用**置于** `jQuery(document).ready`块外。因此，您当前尝试在创建网格*之前创建分组标题。*因此，您必须将最后一行移到`jQuery(document).ready`块内。如果你能更好地格式化你的代码，这些错误将立即被发现。

# c++ - GSL统计，什么是stride？

> ID：10821111
> 
> 赞同：17
> 
> 时间：2012-05-30T17:18:18.503
> 
> 标签：c++, c, statistics, gsl, standard-deviation

我想使用 GSL (Gnu Scientific Lib) 来计算数组的标准偏差。 [http://www.gnu.org/software/gsl/manual/html_node/Mean-and-standard-deviation-and-variance.html](http://www.gnu.org/software/gsl/manual/html_node/Mean-and-standard-deviation-and-variance.html)

手册中，函数原型为gsl_stats_sd(const double data[], size_t stride, size_t n)

但是，我不太明白这里的“步幅”是什么。有人会知道它是什么吗？

非常感谢您的任何建议！

-阿尔弗雷德

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-30T17:19:51.860

*步幅*是数组中两个连续元素之间的间隔。如果您有一个`double`s 数组作为参数，那么*步幅*将为 1。

这个想法是您可以在单个数组中处理多个数据，并对数组的不同*子组件*进行操作。

# xslt - 在 xsl 中动态更改命名空间

> ID：10821115
> 
> 赞同：1
> 
> 时间：2012-05-30T17:18:42.030
> 
> 标签：xslt, xslcompiledtransform

解释我想要做什么有点棘手，所以我将使用一个过于简化的例子。

我有三个 Xsl 模板：A.xsl、B.xsl 和 Common.xsl

A.xsl 和 B.xsl 都使用“xsl:include”来包含 Common.xsl。A.xsl 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:tns="http://MyNamespaceForA" >
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:include href="Common.xslt"/>
    <xsl:template match="/">
        <tns:RootA>
            <xsl:apply-templates select="Root" />
        </tns:RootA>
    </xsl:template>
</xsl:stylesheet> 
```

B.xls 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:tns="http://MyNamespaceForB" >
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:include href="Common.xslt"/>
    <xsl:template match="/">
        <tns:RootB>
            <xsl:apply-templates select="Root" />
        </tns:RootB>
    </xsl:template>
</xsl:stylesheet> 
```

最后，Common.xls 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  >
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="Root">
        <tns:Element>
            <tns:SubElement>
            </tns:SubElement>
        </tns:Element>
    </xsl:template>
</xsl:stylesheet> 
```

因此，A 和 B 看起来不同，它们使用相同的命名空间前缀 (tns)，但命名空间具有不同的值。A 和 B 包括 Common.xsl，它也使用 tns 命名空间。

换句话说，我希望Common.xsl 中的tns 命名空间取“调用”的值，即A 或B，xsl 文件。

但是，这在使用 XslCompiledTransform 时不起作用，它在 Common.xsl 中抱怨 tns 是一个未声明的命名空间。如果我在 Common.xsl 中声明 tns 命名空间，我需要使用`http://MyNamespaceForA`or 或`http://MyNamespaceForB`.

假设我`http://MyNamespaceForB`在 Common.xsl 中声明 tns。现在，当我使用 A.xsl 时，tns 命名空间的值会发生冲突。结果是 Common.xsl 生成的 XML 元素将具有显式的命名空间值`http://MyNamespaceForB`. 这当然行不通。

希望我有点清楚我想要做什么。简而言之，我想让“调用”xsl 文件指示包含的 xsl 文件中命名空间的值。

有任何想法吗？/弗雷德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:14:36.950

如果在 Common.xslt 中使用直接命名空间，则必须在同一个文件中声明命名空间，否则它将不是有效的 XML——XSLT 处理器无法加载它。

解决方案是使用`xsl:element`创建元素并为目标命名空间使用变量

**A.xslt**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes"/>

  <xsl:variable name="targetNS" select="'http://MyNamespaceForA'"/>

  <xsl:include href="common.xslt"/>

  <xsl:template match="/">
    <xsl:element name="RootA" namespace="{$targetNS}">
      <xsl:apply-templates select="Root"/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

**Common.xslt：**

```
<xsl:stylesheet 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="Root">
    <xsl:element name="Element" namespace="{$targetNS}">
      <xsl:element name="SubElement" namespace="{$targetNS}">
      </xsl:element>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

# ios - 使用 if 语句在 navigationController 中推送 tableViewController

> ID：10821126
> 
> 赞同：0
> 
> 时间：2012-05-30T17:19:49.940
> 
> 标签：ios, uitableview, uinavigationcontroller, pushviewcontroller

这是 ProfilTableViewController.m 的表视图委托中我的 If 语句的摘录：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
UITableViewCell *currentCell =(UITableViewCell *)[tableView cellForRowAtIndexPath:indexPath];
// Navigation logic may go here. Create and push another view controller.
if (currentCell.textLabel.text==@"phrase") {
    MainViewController *phraseViewController =[[MainViewController alloc] initWithNibName:@"mesPhrase" bundle:nil];
    [self.navigationController pushViewController:phraseViewController animated:YES];
} 
```

在情节提要上，我创建了从 ProfilTVC 单元到 MainViewController 的推送，并将 TableViewController 更改为“MainViewController”

当我运行应用程序时，单击 ProfilViewController 中的单元格不会执行任何操作：/ wtf?

干杯，路易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:23:28.020

`currentCell.textLabel.text==@"phrase"`比较字符串的地址，而不是内容。看`isEqualToString:`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:33:24.917

现在您所要做的就是使用 prepareFor segue，如下所示：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
// Make sure we're referring to the correct segue
if ([[segue identifier] isEqualToString:@"yourIdentifier"]) {

   DestinationController *destination = [segue destinationViewController];

    // get the selected index
    NSInteger selectedIndex = [[self.tableView indexPathForSelectedRow] row];
    //now you can add informations you want to send to the new controller
    //example:
    destination.selectedItem=[myArray objectAtIndex:selectedIndex];

 }

} 
```

不要忘记更改 segue 标识符：选择两个控制器之间的连线并将其设置在右侧的属性检查器中，它必须等于 youIdentifier

# r - 在条形图底部添加标签

> ID：10821129
> 
> 赞同：0
> 
> 时间：2012-05-30T17:19:56.653
> 
> 标签：r, graphics, lattice

我对**lattice**很陌生，所以对我来说，它在这里进行了反复试验。

用典型的 r 理解似乎无法自定义格子图形。

我想`count(percentage)`在每个栏下方添加类似的内容，完成后应该看起来像这样：

![带标签的条形图](../Images/99bd6a169a51fc3f36548e3b906f0612.png)

如您所见，我的代码没有正确标记条形。并非所有这些都是错误的。第一个应该是 20（0.1%）。

这是我的代码：

```
grp1<-rep("grp1",20)
grp2<-rep("grp2",40)
grp3<-rep("grp3",60)
grp4<-rep("grp4",80)
grp <- c(grp1,grp2,grp3,grp4)

barchart(grp,horizontal=F, 
    par.settings = list(
    plot.polygon = list(col = c("#1E4150","#28556E","#32698C","#3C7DAA")) ),
        panel = function(x, y, subscripts, ...){  
            X <- table(x)
            panel.barchart(x,y,...) 
            percentages <- paste(round(table(X)/length(X),2),"%",sep="")
            lab1 <- paste( "(",percentages, sep="")
            lab1 <- paste( lab1,")", sep="")
            abs <- table(X)
            panel.text(1,-3, label = paste(abs,lab1), cex=0.8)
        } 
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T17:38:16.723

我想也许你想做更多这样的事情：

```
barchart(grp,horizontal=F, 
    par.settings = list(
    plot.polygon = list(col = c("#1E4150","#28556E","#32698C","#3C7DAA")) ),
        panel = function(x, y, subscripts, ...){  
            panel.barchart(x,y,...) 
            percentages <- paste(round(y/sum(y),2),"%",sep="")
            lab1 <- paste( "(",percentages,")", sep="")
            panel.text(x,-3, labels = paste(y,lab1), cex=0.8)
        } 
) 
```

![在此处输入图像描述](../Images/bb3a48e009fcf181924a75ee83a9f861.png)

# sql-server - 使用 SQL Server 在字段名称中转义 %

> ID：10821133
> 
> 赞同：0
> 
> 时间：2012-05-30T17:20:07.020
> 
> 标签：sql-server, escaping

我有这个 SQL-Server 查询

```
UPDATE qryPETEUR_frmPricingModel() SET [%debtToEBITDA] = '498116.0000' WHERE comp_id = '10004' 
```

失败是因为`Update or insert of view or function 'qryPETEUR_frmPricingModel' failed because it contains a derived or constant field.`

我知道问题是因为 % 符号，因为当我更新其他字段时它可以工作。不幸的是，我无法更改此字段名称，所以我坚持使用它。我想我需要转义 % 符号，并在它前面添加了一个 \ 但这不起作用。

我该怎么做才能使此查询正常工作？

如果有帮助，我也在使用 Code Igniter。

编辑：ConradFrix 走在正确的轨道上，因为 %debtToEBITDA 是一个派生字段，我也无法按照我尝试的方式更改它。我查看了该函数`qryPETEUR_frmPricingModel`，发现我需要更改一个不同的字段。所以我认为这个问题已经完成了。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:56:31.733

您还没有阅读错误信息。它没有说明语法错误。问题不是语法错误。

它告诉您不能更新计算列。尝试更新用于计算计算列的源列。

# c# - 处理“格式错误”的数组

> ID：10821136
> 
> 赞同：0
> 
> 时间：2012-05-30T17:20:20.237
> 
> 标签：c#, api, json.net, matomo

目前，我正在尝试将 Piwik API 的结果解析为 C# 对象列表。但是，Json 的格式化方式并没有真正让我这样做。

我从 Piwik API 获得以下数据（示例数据）：

```
{   "2012-05-27" : [  ],
    "2012-05-28" : [  ],
    "2012-05-29" : { "avg_time_on_site" : 309,
      "bounce_count" : 1,
      "bounce_rate" : "33%",
      "max_actions" : 36,
      "nb_actions" : 72,
      "nb_actions_per_visit" : 24,
      "nb_uniq_visitors" : 2,
      "nb_visits" : 3,
      "sum_visit_length" : 928
},
    "2012-05-30" : { "avg_time_on_site" : 263,
      "bounce_rate" : "0%",
      "max_actions" : 37,
      "nb_actions" : 70,
      "nb_actions_per_visit" : 23.300000000000001,
      "nb_uniq_visitors" : 3,
      "nb_visits" : 3,
      "sum_visit_length" : 788
  }
} 
```

现在，我创建了一个“VisitsSummary”类型，我想将 Jason 投射到每个日期的“内部”：

```
 public class VisitsSummaryResult
    {
        [JsonProperty("nb_uniq_visitors")]
        public int NumUniqueVisitors { get; set; }

        [JsonProperty("nb_visits")]
        public int NumVisits { get; set; }

        [JsonProperty("nb_actions")]
        public int NumActions { get; set; }

        [JsonProperty("nb_visits_converted")]
        public int NumVisitsConverted { get; set; }

        [JsonProperty("bounce_count")]
        public int BounceCount { get; set; }

        [JsonProperty("sum_visit_length")]
        public int SumVisitLength { get; set; }

        [JsonProperty("max_actions")]
        public int MaxActions { get; set; }

        [JsonProperty("bounce_rate")]
        public string BounceRate { get; set; }

        [JsonProperty("nb_actions_per_visit")]
        public double NumActionsPerVisit { get; set; }

        [JsonProperty("avg_time_on_site")]
        public int AverageTimeOnSite { get; set; }
    } 
```

但是，由于数据是使用数组中的日期格式化的，所以我无法让 Json.NET 理解它应该将其视为数组。那有意义吗？

此外，自动告诉 Json.NET 将日期解析为*VisitsSummaryResult*的属性会很好——这可能吗？然后我可以将“VisitsSummaryResult.Date”添加到类中，以便将其全部包装到一个对象中。

目前，我只能想到自己*预先解析*Json，然后将各个 Json 片段传递给 Json.NET 以转换为 C# 对象——但这并不是最佳的。

有人能指点一下如何解决这个问题吗？

¡ 谢天谢地！

**编辑：**我还尝试使用通用字典来获取 Key->Value (Date->VisitsSummaryResult)，但无济于事。

```
 JsonConvert.DeserializeObject<Dictionary<string, VisitsSummaryResult>>(e.Result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:40:06.577

好的，问题似乎是由于 Json 数组中有一些空条目，这会导致反序列化。

因此，我可以解决这个问题的唯一方法是使用以下（脏）解决方案将空数组反序列化为 null 并将其他所有内容反序列化为我自己的类型：

```
 Dictionary<string, VisitsSummaryResult> myObjList = new Dictionary<string, VisitsSummaryResult>();
        Dictionary<string, object> values = JsonConvert.DeserializeObject<Dictionary<string, object>>(e.Result);

        foreach (KeyValuePair<string, object> pair in values)
        {
            try
            {
                myObjList.Add(pair.Key, JsonConvert.DeserializeObject<VisitsSummaryResult>(pair.Value.ToString())); // Getting the raw, inner Json string
            }
            catch (Exception ex)
            {
                myObjList.Add(pair.Key, null); // Exception: insert null
            }
        } 
```

如果有人对如何处理 Json.NET 中的空数组有更简洁的解决方案，我将不胜感激。

¡ 谢天谢地！

# ruby-on-rails - 应包含在 JSON 序列化中的自定义模型方法

> ID：10821138
> 
> 赞同：6
> 
> 时间：2012-05-30T17:20:23.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, model

我正在使用一个 javascript 库来构建组合框。我有建立一个人**全名**的组合框的要求，所以我的意思是名字+姓氏。

因为在数据库中这些是 2 个单独的字段（在我的模型中也是如此），我想知道是否有一种快速的方法（而不是手动构建所有哈希对象）来“模拟”我的模型中存在的附加字段JSON 转换，因为此对象必须作为 JSON 数组返回，您可以在其中读取 *full_name* 作为键。

感谢帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T17:30:20.357

您可以通过传递`:methods`options 和 call来覆盖模型中的 to_json 方法`super`。这将使用选项调用`as_json`超类的版本，以便使用属性`:methods`序列化您的模型。`full_name`

```
class Person < ActiveRecord::Base
  def as_json(options={})
    options[:methods] = [:full_name]
    super
  end

  def full_name
    "#{first_name} #{last_name}"
  end
end 
```

在控制器内部，您可以简单地

```
render :json => @person 
```

如果您想了解更多可以传递给`as_json`方法的选项，请查看此文档。 [http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T17:27:35.607

这似乎是这个问题的重复：

[Rails 3 respond_to json，带有自定义属性/方法](https://stackoverflow.com/questions/6509736/rails-3-respond-to-json-with-custom-attributes-methods)

特别是 :methods 哈希：

```
respond_with({
  :cars => @cars.as_json(:only => [:make, :model], :methods => [:full_name]),
  :vans => @vans
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T17:26:08.740

你可以做的是在你的 User 类中有一个 setter 方法，就像这样

```
def full_name=(string)
  names = string.split # the default delimiter is a space
  self.update_attributes(:first_name => names[0], :last_name => names[1])
end 
```

然后表单应该`:full_name`作为一个字段引用，即使它不是一个实际的列，Rails 也会自动访问上面的这个方法并执行它，从而更新你真正想要的列。

# pcre - 如何清理 PCRE 旧版本

> ID：10821144
> 
> 赞同：1
> 
> 时间：2012-05-30T17:20:56.837
> 
> 标签：pcre

PCRE6.6.6 出了点问题，所以我被告知要升级。经过我编译安装PCRE8.30，最新版本。我的问题仍然存在。现在我被告知要安装 8.13 版本。

实际上，我找到了一个 yum 源，所以我正要安装它。现在我不能。百胜给了我下面的错误

```
Transaction Check Error:
  file /usr/share/man/man1/pcregrep.1.gz from install of pcre-8.13-1.jason.2.x86_64 conflicts with file from package pcre-6.6-6.el5_6.1.i386
  file /usr/share/man/man1/pcretest.1.gz from install of pcre-8.13-1.jason.2.x86_64 conflicts with file from package pcre-6.6-6.el5_6.1.i386
  file /usr/lib64/libpcre.a from install of pcre-8.13-1.jason.2.x86_64 conflicts with file from package pcre-devel-6.6-6.el5_6.1.x86_64
  file /usr/lib64/libpcrecpp.a from install of pcre-8.13-1.jason.2.x86_64 conflicts with file from package pcre-devel-6.6-6.el5_6.1.x86_64
  file /usr/lib64/libpcreposix.a from install of pcre-8.13-1.jason.2.x86_64 conflicts with file from package pcre-devel-6.6-6.el5_6.1.x86_64 
```

现在，libpcre 遍布我的 /lib /lib64 /usr/lib /usr/lib64。

我不敢删除/清理pcre，因为我听说它会引起大问题。（yum不能再使用了）

知道我可以在我的 CentOS5.6 中安全地处理 PCRE 吗？

一些信息：

```
# pcretest -C
PCRE version 8.30 2012-02-04
Compiled with
  8-bit support only
  No UTF-8 support
  No Unicode properties support
  No just-in-time compiler support
  Newline sequence is LF
  \R matches all Unicode newlines
  Internal link size = 2
  POSIX malloc threshold = 10
  Default match limit = 10000000
  Default recursion depth limit = 10000000
  Match recursion uses stack

# locate libpcre
/lib/libpcre.la
/lib/libpcre.so
/lib/libpcre.so.0
/lib/libpcre.so.0.0.1
/lib/libpcre.so.1
/lib/libpcre.so.1.0.0
/lib/libpcrecpp.la
/lib/libpcrecpp.so
/lib/libpcrecpp.so.0
/lib/libpcrecpp.so.0.0.0
/lib/libpcreposix.la
/lib/libpcreposix.so
/lib/libpcreposix.so.0
/lib/libpcreposix.so.0.0.0
/lib/pkgconfig/libpcre.pc
/lib/pkgconfig/libpcrecpp.pc
/lib/pkgconfig/libpcreposix.pc
/lib64/libpcre.la
/lib64/libpcre.so
/lib64/libpcre.so.0
/lib64/libpcre.so.0.0.1
/lib64/libpcre.so.1
/lib64/libpcre.so.1.0.0
/lib64/libpcrecpp.la
/lib64/libpcrecpp.so
/lib64/libpcrecpp.so.0
/lib64/libpcrecpp.so.0.0.0
/lib64/libpcreposix.la
/lib64/libpcreposix.so
/lib64/libpcreposix.so.0
/lib64/libpcreposix.so.0.0.0
/root/software/pcre-8.20/libpcre.la
/root/software/pcre-8.20/libpcre.pc
/root/software/pcre-8.20/libpcre.pc.in
/root/software/pcre-8.20/libpcrecpp.la
/root/software/pcre-8.20/libpcrecpp.pc
/root/software/pcre-8.20/libpcrecpp.pc.in
/root/software/pcre-8.20/libpcreposix.la
/root/software/pcre-8.20/libpcreposix.pc
/root/software/pcre-8.20/libpcreposix.pc.in
/root/software/pcre-8.20/.libs/libpcre.a
/root/software/pcre-8.20/.libs/libpcre.la
/root/software/pcre-8.20/.libs/libpcre.lai
/root/software/pcre-8.20/.libs/libpcre.so
/root/software/pcre-8.20/.libs/libpcre.so.0
/root/software/pcre-8.20/.libs/libpcre.so.0.0.1
/root/software/pcre-8.20/.libs/libpcrecpp.a
/root/software/pcre-8.20/.libs/libpcrecpp.la
/root/software/pcre-8.20/.libs/libpcrecpp.lai
/root/software/pcre-8.20/.libs/libpcrecpp.so
/root/software/pcre-8.20/.libs/libpcrecpp.so.0
/root/software/pcre-8.20/.libs/libpcrecpp.so.0.0.0
/root/software/pcre-8.20/.libs/libpcrecpp.so.0.0.0T
/root/software/pcre-8.20/.libs/libpcreposix.a
/root/software/pcre-8.20/.libs/libpcreposix.la
/root/software/pcre-8.20/.libs/libpcreposix.lai
/root/software/pcre-8.20/.libs/libpcreposix.so
/root/software/pcre-8.20/.libs/libpcreposix.so.0
/root/software/pcre-8.20/.libs/libpcreposix.so.0.0.0
/root/software/pcre-8.20/.libs/libpcreposix.so.0.0.0T
/root/software/pcre-8.30/libpcre.la
/root/software/pcre-8.30/libpcre.pc
/root/software/pcre-8.30/libpcre.pc.in
/root/software/pcre-8.30/libpcre16.pc
/root/software/pcre-8.30/libpcre16.pc.in
/root/software/pcre-8.30/libpcrecpp.la
/root/software/pcre-8.30/libpcrecpp.pc
/root/software/pcre-8.30/libpcrecpp.pc.in
/root/software/pcre-8.30/libpcreposix.la
/root/software/pcre-8.30/libpcreposix.pc
/root/software/pcre-8.30/libpcreposix.pc.in
/root/software/pcre-8.30/.libs/libpcre.la
/root/software/pcre-8.30/.libs/libpcre.lai
/root/software/pcre-8.30/.libs/libpcre.so
/root/software/pcre-8.30/.libs/libpcre.so.1
/root/software/pcre-8.30/.libs/libpcre.so.1.0.0
/root/software/pcre-8.30/.libs/libpcrecpp.la
/root/software/pcre-8.30/.libs/libpcrecpp.lai
/root/software/pcre-8.30/.libs/libpcrecpp.so
/root/software/pcre-8.30/.libs/libpcrecpp.so.0
/root/software/pcre-8.30/.libs/libpcrecpp.so.0.0.0
/root/software/pcre-8.30/.libs/libpcrecpp.so.0.0.0T
/root/software/pcre-8.30/.libs/libpcreposix.la
/root/software/pcre-8.30/.libs/libpcreposix.lai
/root/software/pcre-8.30/.libs/libpcreposix.so
/root/software/pcre-8.30/.libs/libpcreposix.so.0
/root/software/pcre-8.30/.libs/libpcreposix.so.0.0.0
/root/software/pcre-8.30/.libs/libpcreposix.so.0.0.0T
/usr/lib/libpcre.a
/usr/lib/libpcre.so
/usr/lib/libpcrecpp.a
/usr/lib/libpcrecpp.so
/usr/lib/libpcrecpp.so.0
/usr/lib/libpcrecpp.so.0.0.0
/usr/lib/libpcreposix.a
/usr/lib/libpcreposix.so
/usr/lib/libpcreposix.so.0
/usr/lib/libpcreposix.so.0.0.0
/usr/lib/pkgconfig/libpcre.pc
/usr/lib64/libpcre.a
/usr/lib64/libpcre.la
/usr/lib64/libpcre.so
/usr/lib64/libpcre.so.0
/usr/lib64/libpcre.so.0.0.1
/usr/lib64/libpcre.so.1
/usr/lib64/libpcre.so.1.0.0
/usr/lib64/libpcrecpp.a
/usr/lib64/libpcrecpp.la
/usr/lib64/libpcrecpp.so
/usr/lib64/libpcrecpp.so.0
/usr/lib64/libpcrecpp.so.0.0.0
/usr/lib64/libpcreposix.a
/usr/lib64/libpcreposix.la
/usr/lib64/libpcreposix.so
/usr/lib64/libpcreposix.so.0
/usr/lib64/libpcreposix.so.0.0.0
/usr/lib64/pkgconfig/libpcre.pc
/usr/lib64/pkgconfig/libpcrecpp.pc
/usr/lib64/pkgconfig/libpcreposix.pc
/usr/local/lib/libpcre.a
/usr/local/lib/libpcre.la
/usr/local/lib/libpcre.so
/usr/local/lib/libpcre.so.1
/usr/local/lib/libpcre.so.1.0.0
/usr/local/lib/libpcrecpp.a
/usr/local/lib/libpcrecpp.la
/usr/local/lib/libpcrecpp.so
/usr/local/lib/libpcrecpp.so.0
/usr/local/lib/libpcrecpp.so.0.0.0
/usr/local/lib/libpcreposix.a
/usr/local/lib/libpcreposix.la
/usr/local/lib/libpcreposix.so
/usr/local/lib/libpcreposix.so.0
/usr/local/lib/libpcreposix.so.0.0.0
/usr/local/lib/pkgconfig/libpcre.pc
/usr/local/lib/pkgconfig/libpcrecpp.pc
/usr/local/lib/pkgconfig/libpcreposix.pc 
```

# mysql - NULL 被填充到表中而不是值

> ID：10821154
> 
> 赞同：-1
> 
> 时间：2012-05-30T17:21:23.280
> 
> 标签：mysql

执行以下 mysql 查询时，字段将填充为 null 而不是指定的值。

```
INSERT INTO invoices VALUES( 
slNo='2', mrp='3', PplusT='3.375', 
name='Eraser', code='002', qty='15', 
unitPrice='3', rateOfTax='12.5', taxAmt='0.375',
cess='0.004', total='50.625', billNo='10001') 
```

表架构

```
slNo            int(11)                                     
mrp             float                                           
PplusT          float                                       
name            varchar(50)                          
code            varchar(10)                          
qty             int(11)                 
unitPrice       float                   
rateOfTax       float                   
taxAmt          float                           
cess            float                       
total           float           
billNo          varchar(10) 
```

我尝试使用 PHP 以及 PHPMYADMIN 进行查询，但结果是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:24:19.780

请查看[手册](http://dev.mysql.com/doc/refman/5.5/en/insert.html)。替换`VALUES`为`SET`

```
INSERT INTO invoices
SET slNo=2, mrp=3, PplusT=3.375, 
name='Eraser', code='002', qty=15, 
unitPrice=3, rateOfTax=12.5, taxAmt=0.375,
cess=0.004, total=50.625, billNo='10001' 
```

您必须从数值数据类型的值中删除引号，否则它将尝试将它们作为字符串插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:23:49.703

删除数值周围的单引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T17:24:00.473

尝试取消引用您的数字...您实际上是在尝试将字符串插入整数和浮点数

```
INSERT INTO invoices VALUES( 
slNo=2, mrp=3, PplusT=3.375, 
name='Eraser', code='002', qty=15, 
unitPrice=3, rateOfTax=12.5, taxAmt=0.375,
cess=0.004, total=50.625, billNo='10001') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T17:25:29.877

请阅读手册[http://dev.mysql.com/doc/refman/5.0/en/insert-select.html](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

```
 INSERT INTO invoices SET 
           slNo='2', mrp='3', PplusT='3.375', 
           name='Eraser', code='002', qty='15', 
           unitPrice='3', rateOfTax='12.5', taxAmt='0.375',
           cess='0.004', total='50.625', billNo='10001' 
```

或者

```
 INSERT INTO invoices ( slNo, mrp, PplusT, name, code, qty, unitPrice, rateOfTax,taxAmt,
       cess, total, billNo) VALUES( '2', '3', '3.375', 'Eraser', '002', '15', '3', '12.5', '0.375','0.004', '50.625', '10001') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T17:25:46.910

我可能是错的，但插入语句不应该是这样的：

```
INSERT INTO invoices (slNo, mrp, PplusT, name, code, qty, unitPrice, rateOfTax, taxAmt, cess, total, billNo) 
VALUES('2', '3', '3.375', 'Eraser', '002', '15', '3', '12.5', '0.375',
'0.004', '50.625', '10001') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T17:27:09.397

查看您拥有的格式，并阅读此页面。此外，不建议将整数值括在引号中，但我认为它在 MySQL 中有效......

[http://en.wikipedia.org/wiki/Insert_(SQL](http://en.wikipedia.org/wiki/Insert_(SQL) )

# objective-c - 来自 NSArray 的 NSMutableArrays 的 NSMutableArray

> ID：10821159
> 
> 赞同：0
> 
> 时间：2012-05-30T17:21:54.290
> 
> 标签：objective-c

我在 NSArray 中有许多对象。我想重新构造 NSMutableArrays 的 NSMutableArray，每个 NSArray 中有 6 个元素。我该怎么做？

**编辑** 我的代码：

```
NSArray *newsList = [mynode6 findChildTags:@"td"]; //result of site parsing
NSMutableArray *someArray = [[NSMutableArray alloc] init];
int i=0;
for (HTMLNode *news in newsList) { 
    [someArray addObject:[newsList objectAtIndex:news];
    i++;
    if (i==5) {
        i=0;
        [self.valueArray addObject:someArray];
        [someArray removeAllObjects];
    }
} 
```

`valueArray`是我的主要 NSMutableArray。此代码不起作用，`valueArray`为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:42:57.673

听起来你的方法对你的普通程序员来说太迟钝了……但是唉……

你真的想以`someArray`上面列出的方式重用吗？添加`someArray`为对象`valueArray`然后删除所有对象只会让您`valueArray`充满空数组。更糟糕的是，您每次都添加相同的数组实例......

也许`[someArray removeAllObjects]`你不只是创建一个新实例`someArray = [[NSMutableArray alloc] init]`

然后在你的 for 循环之后，确保添加任何剩余的内容`someArray`：

```
if(i) {
    [self.valueArray addObject:someArray];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:43:01.177

快速解决：

在循环中分配数组：

```
NSArray *newsList = [mynode6 findChildTags:@"td"]; //result of site parsing
NSMutableArray *someArray = [[NSMutableArray alloc] init];

int i=0;
for (HTMLNode *news in newsList) { 
    [someArray addObject:[newsList objectAtIndex:news];

    if (++i == 5) {
        i = 0;
        [self.valueArray addObject:someArray];
        [someArray release];
        someArray = [[NSMutableArray alloc] init];
    }
}

[someArray release]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T22:22:33.190

在做了类似的事情之后，我对空数组有一个非常相似的问题。在您添加数组时，使其看起来像这样..

```
[self.valueArray addObject:[NSMutableArray arrayWithArray:someArray]]; 
```

这对我有用！这是因为您添加了对 someArray 的引用，然后删除了所有对象，因此它为空。通过添加它 arrayWithArray，您可以制作数据的副本，因此从一个中删除行会将它们留在另一个中。:)

等离子体

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T04:40:21.033

我无法理解这一行。这一行没有意义，因为 objectAtIndex 将 NSInteger 作为参数。我想你试图在该数组中添加 HTMLNode 元素

```
[someArray addObject:[newsList objectAtIndex:news]; 
```

所以，我认为你需要像这样替换上面的行..

```
[someArray addObject:news]; 
```

我通过进行一些更改来编辑你的代码片段，并且我已经插入了我的逻辑（创建了一个带有一些虚拟对象的新 newsList 数组来解释你的逻辑）..

这是编辑后的代码

```
NSArray *newsList = [NSArray arrayWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",@"L",@"A",@"B",@"C",@"D",@"E",@"F", nil];
    NSMutableArray *valueArray = [[NSMutableArray alloc] init];
    NSMutableArray *someArray = [[NSMutableArray alloc] init];

    int i=0;
    for (NSString *news in newsList) { 
    [someArray addObject:news];
     i++;
     if (i==6) {
         i=0;
         [valueArray addObject:someArray];
         NSLog(@"%@",someArray);
         [someArray release];
         someArray = [NSMutableArray new]; 
     }
     }

NSLog(@"%@",valueArray); 
```

这是终端的输出.. ![在此处输入图像描述](../Images/58c78bcba486530dc93ed29c5191d901.png)

希望它有帮助！祝您阅读愉快！

# objective-c - UIViewController loadView 方法 - 分配对象的范围

> ID：10821160
> 
> 赞同：0
> 
> 时间：2012-05-30T17:21:54.447
> 
> 标签：objective-c, memory-management, uiview, uiviewcontroller

我正在以编程方式在我的视图控制器的 loadView 方法中创建一个视图。如下：

> -（无效）加载视图 {
> 
> ```
> HPSFormView* viewForThisController = [ [ HPSFormView alloc ] initWithFrame:CGRectZero ] ;
> viewForThisController.controller = self; // Set a reference back to this controller so the View knows who to delegate stuff to when > adding controls
> self.view = viewForThisController; // Set the view for this controller to be the main menu view 
> ```
> 
> }

我为三对不同的视图控制器和视图遵循了这种技术。我将视图控制器推送到 UINavigationController 堆栈上。每个视图都包含一个使用 push 的按钮。如下：

```
-(void)buttonTapped:(id)sender  {
    HPSFormController* formVC = [ [ HPSFormController alloc ] initWithNibName:nil bundle:nil ];
    [(UINavigationController*) self.view.window.rootViewController pushViewController:formVC animated:YES]; 
} 
```

我在 viewDidLoad 中没有任何代码——事实上，我的视图控制器中完全没有它。

一切正常，但是当我在 iOS 模拟器中执行模拟内存警告时，应用程序崩溃了。我认为问题在于我将视图定义为 loadView 中的“本地”变量的方式。

谁能告诉我我的 loadView 看起来是否正常，或者是否有必要以不同的方式定义 loadView 以避免无效引用等。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:02:58.927

问题是视图持有对控制器的引用。当视图被卸载时，控制器引用超出范围，太棒了！

# c++ - 自定义模板 memcmp 与 C memcmp

> ID：10821164
> 
> 赞同：1
> 
> 时间：2012-05-30T17:22:09.117
> 
> 标签：c++

```
template <typename T>
int custom_memcmp(const T* a, const T* b, std::size_t n); 
```

这会比 C 的 memcmp 快吗？

如果 sizeof(T) != 1: 它将执行较少的迭代，并且可以将值与其实际类型进行比较。例如，除了直接比较两个“long long”之外，我会比比较两个 8 字节缓冲区更快。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T17:24:31.753

`memcmp`通常是编译器内在的，因此将被优化为尽可能高效（将被矢量化、内联等）。

所以你几乎肯定不会打败它。但是，当然，如果您想确定，那么只需配置文件！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:24:57.523

不，不会更快。memcmp 将尽可能有效地比较适当大小的原始内存。只有 memcmp 的幼稚实现会逐字节进行。

# objective-c - 关于objective-c中“强”属性的问题

> ID：10821165
> 
> 赞同：0
> 
> 时间：2012-05-30T17:22:11.427
> 
> 标签：objective-c, ios, class

最近，我一直在使用 obj-c 进行 iOS 开发，并且对可以附加到类中的变量的“强”属性感到困惑。

1）首先，在实际意义上，“强”到底是做什么的？

2）我注意到，在构造几个 obj-c 类时，`@property (strong) UIImage *pic1, *pic2;`如果不想使用属性/合成设置声明变量，则“strong”通常在 @property 上下文中键入（即），是否可以给出这样的变量有“强”属性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:38:04.290

强引用获取对象的所有权。

当您设置一个强属性时，传递的对象由属性所有者保留，例如`[theViewController setString:aString];`导致`theViewController`获取`aString`. 当属性设置为其他值时，该对象将被释放。

有一个[所有权限定符](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#ownership), `__strong`，它使变量的行为方式与我在上面描述的方式相同。它是任何对象变量的默认值——`NSArray * a;`是一个强引用，相当于`__strong NSArray * a;`. 一个区别是，对象不仅会在变量被重新设置时被释放，而且会在它超出范围时被释放，就像在方法结束时一样：

```
- (void)activate {
    NSArray * a = [NSArray array];
    // a is __strong by default, takes ownership

} // a is going out of scope. To prevent a leak, ARC releases the array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:28:30.893

1) Strong 是 Retain 的 ARC 替代品。基本上，这意味着当给这个属性赋值时，例如`[foo setBar: someValue]`，支持该属性的实例变量将增加传递给`bar`的参数的保留计数。`someValue``setBar`

2）我认为你指的是`__strong`前缀的使用，所以是的。

# php - 解析过程中发现非法双 '[redacted]' 值

> ID：10821166
> 
> 赞同：-2
> 
> 时间：2012-05-30T17:22:12.360
> 
> 标签：php, mysql

基本上，我正在创建一个登录系统。当我处理存储在 MySQL 数据库中的数据时，我收到以下错误：

> > 解析期间发现非法双 '200970e19291' 值

使用以下代码：

```
<?php
session_start();    // Session start

$username = $_POST['username']; // Gets the username from the login page
$password = $_POST['password']; // Gets the password.
$salt = "oijahsfdapsf80efdjnsdjp"; // Salt

// Add the salt
$salt .= $password; // The password is now: oijahsfdapsf80efdjnsdjp_PLUS_THE_USERS_PASSWORD
$password = $salt; // Change the password var to contain the salt

// Encryption
$password = md5($password); // woo

?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Serrano Login</title>
</head>

<body>
<?php

// Connect to your database
mysql_connect("localhost", "root", "root") or die(mysql_error());
mysql_select_db('serrano');

$query = "SELECT * FROM accounts WHERE password = ".$password." LIMIT 1"; 

$username = mysql_real_escape_string($username); // just to be sure.

$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){
    $resusername = $row['username']; // username from DB
    $respassword = $row['password']; // password from DB
    $resemail = $row['email']; // email from db

}

// Are they a valid user?
if ($respassword == $password) {
    // Yes they are.
    // Lets put some data in our session vars and mark them as logged in.
    $_SESSION['loggedin'] = "1";
    $_SESSION['email'] = $resemail;
    $_SESSION['username'] = $resusername;
    echo "Congrats, Your logged in"; // YAY
}else{
    // No, Lets mark them as invalid.
    $_SESSION['loggedin'] = "0";
    echo "Sorry, Invalid details"; // Nay
}

?>
</body>
</html> 
```

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T17:29:56.400

您没有引用要插入的密码“值”，因此对于 MySQL，它显示为一个错位的数字。

```
$query = "SELECT * FROM accounts WHERE password = '".$password."' LIMIT 1"; 
                                                  ^---missing   ^---missing 
```

或者更好：

```
$query = "SELECT * FROM accounts WHERE password = '$password' LIMIT 1"; 
```

# extjs - EXTJS4.1 XTemplate 未从 Store 中绘制

> ID：10821169
> 
> 赞同：0
> 
> 时间：2012-05-30T17:22:25.587
> 
> 标签：extjs, extjs4, extjs-mvc

我正在尝试为我的应用程序创建一个侧边栏导航，其中包含一个加载了 JSON 数据和 XTemplate 的商店。有基本类别和子类别。但是，类别正在绘制，它不会在侧边栏中创建/呈现子类别。查看文档，我的几乎与他们的“孩子”示例完全相同。我究竟做错了什么？

文档：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.XTemplate](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.XTemplate)

**模型**

```
Ext.define('APP.model.SideBar', {
extend: 'Ext.data.Model',

fields: [
    {name: 'group',     type: 'string'},
    {name: 'tools',     type: 'string', mapping: 'tools'}        
],
proxy: {
    type: 'ajax',
    url : '/js/res/sidebar.json',
    reader: {
         type: 'json',
         root: 'items'
     }
}
}); 
```

**侧边栏.json**

```
{"items": [
{
    "group": "Category1",
    "tools": [
        {"name": "Sub A1"}
    ]
},{
    "group": "Category2",
    "tools": [
       {"name": "Sub B2"},
       {"name": "Sub B3"}
    ]
}]} 
```

**查看**它绘制 {group} 但不绘制 {tools.name}

```
Ext.define('APP.view.SideBar', {
alias: 'widget.appsidebar',
extend: 'Ext.view.View',
id: 'sidebar',
width: 180,
border: false,
cls: 'sidebar-list',

selModel: {
    deselectOnContainerClick: false
},

store: 'SideBar',
itemSelector: '.apptool',
tpl: [
    '<tpl for=".">',
            '<div class="sidebar-title">{group}</div>',
            '<tpl for="tools">',
                '<div class="apptool">{name}</div>',
            '</tpl>',
    '</tpl>'
]
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:15:16.080

我相信问题不在 xtemplate 中，而是在视图中。[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.View-cfg-itemSelector)`view.itemSelector`说：

> 这是必需的设置。一个简单的 CSS 选择器（例如 div.some-class 或 span:first-child），用于确定此 DataView 将使用哪些节点。itemSelector 用于将 DOM 节点映射到记录。**因此，应该只有一个根级元素与每条记录的选择器匹配**

查看有关在视图中显示分层数据的问题的[线程。](https://stackoverflow.com/questions/9141918/extjs-dataview-itemselector-pointing-to-child-element)

# sql - 透视数据以获得所需的最终视图

> ID：10821173
> 
> 赞同：0
> 
> 时间：2012-05-30T17:22:44.687
> 
> 标签：sql, sql-server, pivot-table

我在数据库表中的数据...

```
SELECT [Quote Reference Number] 
      ,[Value]
      ,[Method]
      ,[Country]
      ,[SubRegion]
      ,[Route 1 or Route2]
      ,[TYPE A or B ]
  FROM Table 1 
```

我想要的摘要视图

世界观

```
Subregion | Country | Count of Route1 + Type A quotes | Count of Route1 + Type B quotes|  Count of Route2 + Type A quotes | Count of Route2 + Type B quotes| All Routes & Types | 
```

欧洲、中东和非洲视图

```
Subregion | Country | Count of Route1 + Type A quotes | Count of Route1 + Type B quotes| Count of Route2 + Type A quotes | Count of Route2 + Type B quotes| All Routes & Types | 
```

我可以通过创建一个包含 2 行的表并执行大量 sql 查询来填充所有字段来做到这一点，但被告知可以通过在数据库中进行透视来完成，但不知道具体如何？

任何人都可以提供一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:46:21.267

在这种情况下进行透视将很困难（但并非不可能），因为`FOR... IN`子句分别包含一个字段和一组值，而不是条件语句。你最好用一个`sum/case`例如

```
SELECT 
      [Country]
      ,[SubRegion]
      ,SUM (CASE WHEN [Route 1 or Route2] = 'Route1' AND [TYPE A or B ] = 'A' 
             THEN 1 ELSE 0 END)
              as [Count of Route1 + Type A quotes ]
      ,SUM (CASE WHEN [Route 1 or Route2] = 'Route1' AND [TYPE A or B ] = 'B' 
             THEN 1 ELSE 0 END)
              as [Count of Route1 + Type B quotes ]
     ,SUM (CASE WHEN [Route 1 or Route2] = 'Route2' AND [TYPE A or B ] = 'A' 
             THEN 1 ELSE 0 END)
              as [Count of Route2 + Type A quotes ]
      ,SUM (CASE WHEN [Route 1 or Route2] = 'Route2' AND [TYPE A or B ] = 'B' 
             THEN 1 ELSE 0 END)
              as [Count of Route2 + Type B quotes]
      ,COUNT(*)  All Routes & Types
  FROM [Table 1]
  GROUP BY
       [Country]
      ,[SubRegion] 
```

# android - 如何在 OpenGL 中连续显示位图

> ID：10821174
> 
> 赞同：1
> 
> 时间：2012-05-30T17:22:45.663
> 
> 标签：android, opengl-es, bitmap, glsurfaceview

我一直在按照本指南在 OpenGL 中显示位图

[http://obviam.net/index.php/texture-mapping-opengl-android-displaying-images-using-opengl-and-squares/](http://obviam.net/index.php/texture-mapping-opengl-android-displaying-images-using-opengl-and-squares/)

但是，我有一个要一个一个显示的位图队列。

我是否应该每次都创建一个新的纹理`onDrawFrame`作为`Bitmap`队列的头部，例如`onDrawFrame`：

```
Bitmap bitmap = ...

// generate one texture pointer
gl.glGenTextures(1, textures, 0);
// ...and bind it to our array
gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

// create nearest filtered texture
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

// Use Android GLUtils to specify a two-dimensional texture image from our bitmap
GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

// Clean up
bitmap.recycle(); 
```

或者我可以以某种方式只做这些操作的一部分，`onSurfaceChanged`可能会转移一些其他操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:51:41.833

如果你想用另一个纹理替换一个纹理（并且你不打算保留第一个纹理），那么调用`glTexImage2D`or`GLUtils.texImage2D`是你第二次需要做的唯一事情。这只是用新数据替换现有纹理数据。您可以从任何有有效 OpenGL 上下文的地方调用它。

如果纹理大小相同，我可能会建议使用`glTexSubImage2D`将是一种改进，因为它不会改变纹理大小，然后可能会避免在 gpu 上分配一些内存（只是重用相同的后备内存）。

# linq-to-sql - “无法删除尚未附加的实体”错误

> ID：10821179
> 
> 赞同：0
> 
> 时间：2012-05-30T17:23:00.083
> 
> 标签：linq-to-sql, listbox, windows-phone-7.1, delete-row

我有两张桌子：`Main`和`Vendors`。

```
Main table:
MainID (PK)
Name
Address
...

Vendors table:
VendorID (PK)
MainID (ForeignKey)
Code
.... 
```

`Vendors`表格中的数据显示在`ListBox`控件中。

当我尝试`Vendors`使用 ListBox 控件中的按钮从表中删除一行时，出现以下错误：

> **无法移除尚未附加的实体。**

删除按钮代码为：

```
 Dim button = TryCast(sender, Button)
    If button IsNot Nothing Then
        Using db As New theContext.theContext("Data Source=isostore:/theDB.sdf")
            Dim RecordToDelete As Vendors = TryCast(button.DataContext, Vendors)

            VendorsRecords.Remove(RecordToDelete)

            db.VendorsRecords.DeleteOnSubmit(RecordToDelete)

            db.SubmitChanges()
        End Using
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:57:24.350

添加行

```
db.VendorsRecords.Attach(RecordtoDelete) 
```

在给您错误的行之前。

您收到此错误是因为 db 上下文不知道您要删除的记录。

# ruby-on-rails - 按对象的属性对一组rails活动记录对象进行排序

> ID：10821183
> 
> 赞同：2
> 
> 时间：2012-05-30T17:23:29.007
> 
> 标签：ruby-on-rails, activerecord

我正在查询我的数据库以提供活动列表，我希望它们按 updated_at 属性的降序排列。我通过查看其他两个模型并绘制地图来获得此活动列表，即：

```
@listings = current_user.listings.includes(:deals)
map_of_listings = @listings.map { |listing| listing.deals }
@deals = map_of_listings.flatten

map_of_deals = @deals.map { |deal| deal.activities }
activities_array = map_of_deals.flatten 
```

我现在的问题是数组中的活动是按交易分组的，而不是按上次更新时间的降序排列。如何通过活动的 updated_at 属性订购此数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:57:14.377

如果您使用的是 Ruby 1.9，则可以尝试

```
activities_array.sort_by(&:updated_at) 
```

# ruby-on-rails - 我有一个运行需要 40 分钟的 Ruby 脚本，如何将它集成到 Rails 应用程序中？

> ID：10821184
> 
> 赞同：2
> 
> 时间：2012-05-30T17:23:39.383
> 
> 标签：ruby-on-rails, ruby

我有一个爬取网站的 Ruby 脚本，需要 40 分钟。我想做的是将结果转储到数据库中，并能够对`ActiveRecord`数据进行常规处理。

1.  如果我将它放在 Rails 应用程序中并有一个启动脚本的“开始”按钮，它会超时吗？
2.  理想情况下，我希望脚本每天至少运行一次 - 并更新数据库 - 所以我最好的选择是创建一个 rake 任务，还是有其他方法可以做到这一点？
3.  如果我将它包装在 Rails 应用程序中，我应该将脚本放在哪个文件夹中，最好的方法是什么？我不能把它放到模型文件中——因为那没有任何意义。
4.  我以前从未做过任何“工作”类型的处理，但这听起来可能属于那个范围。这样做时我还应该考虑哪些其他事情？

编辑1：

另一个问题是，如果我把这个特定的 Ruby 脚本放在我的`/lib`目录中，我如何让它与数据库交互？我通常从模型和控制器与数据库交互。运行后如何将结果存储在我的数据库中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T17:29:40.033

我会试着给你一些直截了当的答案。

A）您很可能会将其作为后台工作。有一些不错的宝石。考虑[https://github.com/defunkt/resque](https://github.com/defunkt/resque)或更轻量级的东西，例如[https://github.com/tobi/delayed_job](https://github.com/tobi/delayed_job)。

B）一个 rake 任务就足够了，然后使用上述任何一个库运行它。另一种选择是 cron 作业。

C）你应该把它放在 lib/ 目录中。

D）您应该始终拥有某种可用的处理日志，以跟踪潜在的错误。如果您选择上述两个库中的任何一个，请务必正确阅读说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:37:17.097

最简单的方法是将作业设置为 rake 任务。然后从命令行测试 rake 任务以确保它可以正常工作。

最后，将 rake 任务作为 cronjob 添加到您的服务器上，并让您自己通过电子邮件发送结果日志。

对于我的应用程序，我有一个处理多个子任务的“夜间”rake 任务。它执行各种清理任务，运行夜间报告等。

**对于一天一次的类型任务，诸如延迟作业之类**的作业处理系统可能会过度杀伤力。**我的应用程序也使用延迟作业，但对于许多客户端启动的任务来说，它是全天的。**

 **请记住，您还需要一个进程来监视延迟作业进程（并在必要时重新启动它）。我使用[runit](http://smarden.org/runit/)，还有其他选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T17:28:37.540

[https://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T17:41:30.880

[每当 gem](https://github.com/javan/whenever)执行 cron 作业时使用。**

# ruby-on-rails - 从 RESTful 身份验证迁移到设计

> ID：10821187
> 
> 赞同：1
> 
> 时间：2012-05-30T17:23:52.470
> 
> 标签：ruby-on-rails, ruby, authentication, devise, restful-authentication

当前项目使用具有不同角色的restful-authentication。为了迁移到设计，我是否必须在设计中再次创建角色，或者是否有某种方法可以使用编写的用于静态身份验证的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:35:12.690

设计只处理用户身份验证，而不是授权。要管理角色和权限，请考虑使用[CanCan](https://github.com/ryanb/cancan)进行权限，使用[Rolify](https://github.com/EppO/rolify)管理角色。

- 编辑 -

您还应该检查设计[关于从 restful_auth 迁移到 devise 的设计 wiki 页面](https://github.com/plataformatec/devise/wiki/How-To%3a-Migrate-from-restful_authentication-to-Devise)。我们能够成功迁移，没有太多的痛苦和返工。

# c# - 如何只匹配第一个单词？

> ID：10821191
> 
> 赞同：2
> 
> 时间：2012-05-30T17:24:10.513
> 
> 标签：c#, regex, text, input, match

我知道这个问题似乎很平庸，但我有一个小问题。我正在尝试匹配类似于此的输入：

```
%!: Word Word=888 Word=AAA 
```

...使用这个正则表达式：

```
[A-Za-z]* 
```

我只需要选择第一个单词 witch**只**包含字符。我的 C# 代码：

```
string res = Regex.Match("[A-Za-z]*", this.Content, RegexOptions.Singleline).Value; 
```

请帮我。它不适合我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T17:53:07.807

你基本上在那里。

你的正则表达式应该是`@"\b[A-Za-z]+\b".`

然后，如果你想知道为什么你没有得到任何匹配。这是因为您混淆了输入和模式参数:)

你要：

```
string res = Regex.Match(this.Content, @"\b[A-Za-z]+\b", RegexOptions.Singleline).Value; 
```

不是：

```
string res = Regex.Match(@"\b[A-Za-z]+\b",this.Content,  RegexOptions.Singleline).Value; 
```

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:28:23.033

[A-Za-z]+ 观察括号中任何事物的一次或多次出现。* 将匹配零次或多次出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T17:55:37.277

另一种选择（如果您还需要选择其他单词，这可能很有用）是匹配所有单词并首先选择：

```
new Regex(@"\b[A-Za-z]+\b").Matches("%!: Word Word=888 Word=AAA")[0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T17:31:34.147

在表达式的开头添加一个胡萝卜`^`以从头开始匹配，也就是只匹配第一个。

# c++ - 没有 CCriticalSection 或 CMutex 的锁定处理

> ID：10821201
> 
> 赞同：1
> 
> 时间：2012-05-30T17:24:46.197
> 
> 标签：c++, multithreading, visual-c++, mfc

这是场景。我有多个处理器线程读取一个值。只允许 1 个线程写入该值。由于设置，自然地，在写入过程中没有人可以读取。因此，当 1 个人写入新值时，CCriticalSection 将锁定所有工作线程。但是，如果我这样做，每次有人想要查看它时，所有工作线程都会停止（它们互相锁定）。它在处理过程中造成了瓶颈，因为所有工人都必须停下来排队才能读取值。除了 CCriticalSection 之外，还有什么方法可以让所有小工作者继续阅读（这很好，那里没有线程问题），但只有在主线程想要写入时才停止它们？

我考虑过设置一个布尔值，告诉工作人员停止，然后 Sleep() 大约一秒钟（让他们完成），进行更新，然后重置布尔值。这似乎..好吧..重手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:34:26.147

您可以使用读取器/写入器锁，[http](http://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock) ://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock 这将为您提供有效的保护

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:34:57.890

您描述的序列化在您当前的设计中是不可避免的。

> “但是，如果我这样做，每次有人想要查看它时，所有工作线程都会停止（它们相互锁定）。它会产生瓶颈。”

重新设计代码，以便其他线程在等待写入完成时被程序用来完成与您的算法相关的子任务。

该方法被称为[***工作窃取***](https://stackoverflow.com/questions/9081382/work-stealing-algorithm)，并在其他有关排序队列的[stackoverflow 帖子](https://stackoverflow.com/search?q=%22work%20stealing%22%20queue%20sort%20%5Bc%2b%2b%5D)中进行了讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T17:52:54.870

您也可以使用`InterlockedXXXXX` [功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684122.aspx)- 完全避免锁定 - 参见例如[这篇](http://blogs.msdn.com/b/oldnewthing/archive/2011/04/13/10152929.aspx)文章

# c++ - 分配给定指针的另一个对象

> ID：10821205
> 
> 赞同：0
> 
> 时间：2012-05-30T17:25:00.857
> 
> 标签：c++, linux

我想我需要分配另一个给定指针类型的对象，它派生自（或者是）一个基类。

例如，我有这个类CChunk，以及它的派生类CMODChunk。

我希望，在我将指向 CChunk 的指针（可能是 CChunk、CMODChunk 或任何其他派生的）传递给的函数中，我可以分配该给定类型的另一个对象。而已。基本上，我想知道指针指向的类型。

我写了一个很长的测试代码来尝试理解 typeof、typeid 以及更多关于虚拟...

```
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <typeinfo>
using namespace std;

class base_virtual
    {
    public:
    base_virtual ( void )
        {
        printf("%s\n",__PRETTY_FUNCTION__);
        }
    virtual void dummy( void )
        {
        }
    base_virtual *Alloc ( void )
        {
        printf("%s\n",__PRETTY_FUNCTION__);
        return new typeof (*this);
        };
    void GetTypeInfo()
        {
        printf("%sname %s\n",__PRETTY_FUNCTION__, typeid( *this).name());
        }
    };

class der_virtual_1: public base_virtual
    {
    public:
    der_virtual_1 ( void )
        {
        printf("%s\n",__PRETTY_FUNCTION__);
        }
    base_virtual *Alloc ( void )
        {
        printf("%s\n",__PRETTY_FUNCTION__);
        return new typeof (*this);
        };
    };

class der_virtual_2 : public base_virtual
    {
    public:
    der_virtual_2 ( void )
        {
        printf("%s\n",__PRETTY_FUNCTION__);
        }
    };

class base
    {
    public:
    base ( void )
        {
        printf("%s\n",__PRETTY_FUNCTION__);
        }
    void dummy( void )
        {
        }
    base *Alloc ( void )
        {
        printf("%s\n",__PRETTY_FUNCTION__);
        return new typeof (*this);
        };
    void GetTypeInfo()
        {
        printf("%s %s\n",__PRETTY_FUNCTION__, typeid( *this).name());
        }
    };

class der_1 : public base
    {
    public:
    der_1 ( void )
        {
        printf("%s\n",__PRETTY_FUNCTION__);
        }
    base *Alloc ( void )
        {
        printf("%s\n",__PRETTY_FUNCTION__);
        return new typeof (*this);
        };
    };

class der_2 : public base
    {
    public:
    der_2 ( void )
        {
        printf("%s\n",__PRETTY_FUNCTION__);
        }
    };

int main ( int argc, char *argv[] )
    {
    printf("\n\n%s Criacao de objectos\n",__PRETTY_FUNCTION__);
    printf("\n");
    printf("%s base virtual\n",__PRETTY_FUNCTION__);
    base_virtual bv1;
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bv1).name());
    bv1.GetTypeInfo();

    printf("%s base nao virtual\n",__PRETTY_FUNCTION__);
    base b1;
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(b1).name());
    b1.GetTypeInfo();

    printf("\n");
    printf("%s derivado 1 virtual\n",__PRETTY_FUNCTION__);
    der_virtual_1 dv1;
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(dv1).name());
    dv1.GetTypeInfo();
    printf("%s derivado 1 nao virtual\n",__PRETTY_FUNCTION__);
    der_1 d1;
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(d1).name());
    d1.GetTypeInfo();

    printf("\n");
    printf("%s derivado 2 virtual\n",__PRETTY_FUNCTION__);
    der_virtual_2 dv2;
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(dv2).name());
    dv2.GetTypeInfo();
    printf("%s derivado 2 nao virtual\n",__PRETTY_FUNCTION__);
    der_2 d2;
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(d2).name());
    d2.GetTypeInfo();

    base_virtual *bvpointer;
    base *bpointer;

    printf("\n\n%s Alocacao explicita\n",__PRETTY_FUNCTION__);
    printf("\n");
    printf("%s base virtual\n", __PRETTY_FUNCTION__);
    bvpointer = new base_virtual;
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bvpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bvpointer).name());
    bvpointer->GetTypeInfo();
    delete bvpointer;
    printf("%s base nao virtual\n", __PRETTY_FUNCTION__);
    bpointer = new base;
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bpointer).name());
    bpointer->GetTypeInfo();
    delete bpointer;

    printf("\n");
    printf("%s derivado 1 virtual\n",__PRETTY_FUNCTION__);
    bvpointer = new der_virtual_1;
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bvpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bvpointer).name());
    bvpointer->GetTypeInfo();
    delete bvpointer;
    printf("%s derivado 1 nao virtual\n",__PRETTY_FUNCTION__);
    bpointer = new der_1;
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bpointer).name());
    bpointer->GetTypeInfo();
    delete bpointer;

    printf("\n");
    printf("%s derivado 2 virtual\n",__PRETTY_FUNCTION__);
    bvpointer = new der_virtual_2;
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bvpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bvpointer).name());
    bvpointer->GetTypeInfo();
    delete bvpointer;
    printf("%s derivado 2 nao virtual\n",__PRETTY_FUNCTION__);
    bpointer = new der_2;
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bpointer).name());
    bpointer->GetTypeInfo();
    delete bpointer;

    printf("\n\n%s Alocacao explicita com typeof tipo\n",__PRETTY_FUNCTION__);
    printf("\n");
    printf("%s base virtual\n", __PRETTY_FUNCTION__);
    bvpointer = new typeof (base_virtual);
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bvpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bvpointer).name());
    bvpointer->GetTypeInfo();
    delete bvpointer;
    printf("%s base nao virtual\n", __PRETTY_FUNCTION__);
    bpointer = new typeof (base);
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bpointer).name());
    bpointer->GetTypeInfo();
    delete bpointer;

    printf("\n");
    printf("%s derivado 1 virtual\n",__PRETTY_FUNCTION__);
    bvpointer = new typeof (der_virtual_1);
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bvpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bvpointer).name());
    bvpointer->GetTypeInfo();
    delete bvpointer;
    printf("%s derivado 1 nao virtual\n",__PRETTY_FUNCTION__);
    bpointer = new typeof (der_1);
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bpointer).name());
    bpointer->GetTypeInfo();
    delete bpointer;

    printf("\n");
    printf("%s derivado 2 virtual\n",__PRETTY_FUNCTION__);
    bvpointer = new typeof (der_virtual_2);
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bvpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bvpointer).name());
    bvpointer->GetTypeInfo();
    delete bvpointer;
    printf("%s derivado 2 nao virtual\n",__PRETTY_FUNCTION__);
    bpointer = new typeof (der_2);
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bpointer).name());
    bpointer->GetTypeInfo();
    delete bpointer;

    printf("\n\n%s Alocacao explicita com typeof pointer\n",__PRETTY_FUNCTION__);
    base_virtual *bvpointer2;
    base *bpointer2;
    bvpointer2=new base_virtual;
    bpointer2 = new base;
    printf("\n");
    printf("%s base virtual\n", __PRETTY_FUNCTION__);
    bvpointer = new typeof (*bvpointer2);
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bvpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bvpointer).name());
    bvpointer->GetTypeInfo();
    delete bvpointer;
    printf("%s base nao virtual\n", __PRETTY_FUNCTION__);
    bpointer = new typeof (*bpointer2);
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bpointer).name());
    bpointer->GetTypeInfo();
    delete bpointer;
    delete bvpointer2;
    delete bpointer2;

    bvpointer2=new der_virtual_1;
    bpointer2 = new der_1;
    printf("\n");
    printf("%s derivado 1 virtual\n",__PRETTY_FUNCTION__);
    bvpointer = new typeof (*bvpointer2);
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bvpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bvpointer).name());
    bvpointer->GetTypeInfo();
    delete bvpointer;
    printf("%s derivado 1 nao virtual\n",__PRETTY_FUNCTION__);
    bpointer = new typeof (*bpointer2);
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bpointer).name());
    bpointer->GetTypeInfo();
    delete bpointer;
    delete bvpointer2;
    delete bpointer2;

    bvpointer2=new der_virtual_2;
    bpointer2 = new der_2;
    printf("\n");
    printf("%s derivado 2 virtual\n",__PRETTY_FUNCTION__);
    bvpointer = new typeof (*bvpointer2);
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bvpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bvpointer).name());
    bvpointer->GetTypeInfo();
    delete bvpointer;
    printf("%s derivado 2 nao virtual\n",__PRETTY_FUNCTION__);
    bpointer = new typeof (*bpointer2);
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bpointer).name());
    bpointer->GetTypeInfo();
    delete bpointer;
    delete bvpointer2;
    delete bpointer2;

    printf("\n\n%s Alocacao implicita com funcao\n",__PRETTY_FUNCTION__);
    printf("\n");
    printf("%s base virtual\n", __PRETTY_FUNCTION__);
    bvpointer = bv1.Alloc();
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bvpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bvpointer).name());
    bvpointer->GetTypeInfo();
    delete bvpointer;
    printf("%s base nao virtual\n", __PRETTY_FUNCTION__);
    bpointer = b1.Alloc();
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bpointer).name());
    bpointer->GetTypeInfo();
    delete bpointer;

    printf("\n");
    printf("%s derivado 1 virtual\n",__PRETTY_FUNCTION__);
    bvpointer = dv1.Alloc();
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bvpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bvpointer).name());
    bvpointer->GetTypeInfo();
    delete bvpointer;
    printf("%s derivado 1 nao virtual\n",__PRETTY_FUNCTION__);
    bpointer = d1.Alloc();
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bpointer).name());
    bpointer->GetTypeInfo();
    delete bpointer;

    printf("\n");
    printf("%s derivado 2 virtual\n",__PRETTY_FUNCTION__);
    bvpointer = dv2.Alloc();
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bvpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bvpointer).name());
    bvpointer->GetTypeInfo();
    delete bvpointer;
    printf("%s derivado 2 nao virtual\n",__PRETTY_FUNCTION__);
    bpointer = d2.Alloc();
    printf ("%s typeid %s\n", __PRETTY_FUNCTION__, typeid(bpointer).name());
    printf ("%s typeid * %s\n", __PRETTY_FUNCTION__, typeid(*bpointer).name());
    bpointer->GetTypeInfo();
    delete bpointer;
    return 0;
    } 
```

在观察结果之后，一种可能的解决方案是让每个派生类都有自己的分配器。我不明白。如果基类有分配器，为什么派生类仍然使用基类的typeof，而不是派生类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:27:17.570

通常的方法是提供一个（协变？）`clone()`函数：

```
struct Base
{
    virtual Base * clone()  { return new Base(*this); }
    virtual ~Base() { }
};

struct Derived : Base
{
    virtual Derived * clone() { return new Derived(*this); }   // this is an override
}; 
```

然后你可以说：

```
Base * p = get();
Base * q = p->clone(); 
```

# wso2 - 查看配置操作时发生错误

> ID：10821207
> 
> 赞同：0
> 
> 时间：2012-05-30T17:25:09.330
> 
> 标签：wso2, wso2carbon

在 rhel 5 上使用 WSO2 Carbon 3.2.2（但我在 Windows 上也遇到了同样的问题），当我尝试添加一些功能时，我收到消息“查看配置操作时发生错误”。我试图添加“试试看”功能，但我得到了同样的错误。对于这个，我最终通过直接查看存储库发现，您不能选中“仅显示最新版本”选项，因为“试用”有 2 个组件，一个在版本 3.2.2 中，另一个在版本 3.2.0... 所以我认为，这就是原因。当我安装数据服务托管时，我发现您必须先安装依赖项，然后我终于确定了安装它的顺序。现在我正在尝试安装 ESB 堆栈，但现在我被卡住了！;o)...

以下是发生错误“查看配置操作时发生错误”时的日志：

```
 TID: [] [WSO2 Carbon] [2012-05-30 10:06:49,103]  INFO {org.apache.axis2.transport.http.HTTPSender} -  Unable to sendViaPost to url[https://132.207.4.137:9443/services/ProvisioningAdminService] {org.apache.axis2.transport.http.HTTPSender}
java.net.SocketTimeoutException: Read timed out
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
        at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:830)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:787)
        at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
        at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
        at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
        at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
        at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)
        at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
        at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
        at org.apache.axis2.transport.http.AbstractHTTPSender.executeMethod(AbstractHTTPSender.java:621)
        at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:193)
        at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:449)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:276)
        at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
        at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
        at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
        at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
        at org.wso2.carbon.component.mgt.stub.ProvisioningAdminServiceStub.reviewProvisioningAction(ProvisioningAdminServiceStub.java:537)
        at org.wso2.carbon.component.mgt.ui.ProvisioningAdminClient.reviewInstallFeaturesAction(ProvisioningAdminClient.java:79)
        at org.apache.jsp.component_002dmgt.review_005finstall_005faction_002dajaxprocessor_jsp._jspService(review_005finstall_005faction_002dajaxprocessor_jsp.java:137)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.ui.JspServlet.service(JspServlet.java:161)
        at org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36)
        at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
        at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
        at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
        at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
TID: [] [WSO2 Carbon] [2012-05-30 10:06:49,103]  INFO {org.apache.axis2.transport.http.HTTPSender} -  Unable to sendViaPost to url[https://132.207.4.137:9443/services/ProvisioningAdminService] {org.apache.axis2.transport.http.HTTPSender}
java.net.SocketTimeoutException: Read timed out
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
        at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:830)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:787)
        at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
        at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
        at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
        at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
        at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)
        at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
        at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
        at org.apache.axis2.transport.http.AbstractHTTPSender.executeMethod(AbstractHTTPSender.java:621)
        at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:193)
        at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:449)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:276)
        at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
        at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
        at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
        at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
        at org.wso2.carbon.component.mgt.stub.ProvisioningAdminServiceStub.reviewProvisioningAction(ProvisioningAdminServiceStub.java:537)
        at org.wso2.carbon.component.mgt.ui.ProvisioningAdminClient.reviewInstallFeaturesAction(ProvisioningAdminClient.java:79)
        at org.apache.jsp.component_002dmgt.review_005finstall_005faction_002dajaxprocessor_jsp._jspService(review_005finstall_005faction_002dajaxprocessor_jsp.java:137)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.ui.JspServlet.service(JspServlet.java:161)
        at org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36)
        at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
        at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
        at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
        at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
TID: [] [WSO2 Carbon] [2012-05-30 10:06:49,136] ERROR {org.wso2.carbon.component.mgt.ui.ProvisioningAdminClient} -  Error occured while reviewing provisioning action {org.wso2.carbon.component.mgt.ui.ProvisioningAdminClient}
org.apache.axis2.AxisFault: Read timed out
        at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
        at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:197)
        at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:449)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:276)
        at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
        at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
        at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
        at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
        at org.wso2.carbon.component.mgt.stub.ProvisioningAdminServiceStub.reviewProvisioningAction(ProvisioningAdminServiceStub.java:537)
        at org.wso2.carbon.component.mgt.ui.ProvisioningAdminClient.reviewInstallFeaturesAction(ProvisioningAdminClient.java:79)
        at org.apache.jsp.component_002dmgt.review_005finstall_005faction_002dajaxprocessor_jsp._jspService(review_005finstall_005faction_002dajaxprocessor_jsp.java:137)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.ui.JspServlet.service(JspServlet.java:161)
        at org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36)
        at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
        at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
        at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
        at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.SocketTimeoutException: Read timed out
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
        at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:830)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:787)
        at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
        at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
        at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
        at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
        at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)
        at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
        at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
        at org.apache.axis2.transport.http.AbstractHTTPSender.executeMethod(AbstractHTTPSender.java:621)
        at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:193)
        ... 44 more 
```

谢谢

克里斯托夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T03:50:07.397

正如您从堆栈跟踪中看到的那样，您得到的是套接字读取超时。这基本上是在您安装必要的功能时，如果它相当大，则需要一些时间来下载。并且默认超时设置为 1 分钟。我们可能必须将其设置为更高的值，可能是 10 分钟（600000 毫秒）。这些设置位于 /repository/conf/axis2_client.xml。更改 http/https 的“SO_TIMEOUT”和“CONNECTION_TIMEOUT”的值。

干杯，安佳娜。

# assembly - llvm JIT 目标汇编指令计数

> ID：10821214
> 
> 赞同：4
> 
> 时间：2012-05-30T17:25:33.353
> 
> 标签：assembly, compiler-construction, llvm, jit

我想打印使用 JIT 执行程序时执行的 NATIVE TARGET 指令的总数。

我的计划是在及时编译的程序集的每条指令之后添加一条指令（在内存中增加一个变量）。为此，我需要访问包含“及时”编译的汇编指令的部分。LLVM 的 JIT 文档不好，我无法对 LLVM 中的 JIT 特定代码进行逆向工程！

你能给我一些提示吗？谢谢 ！

# asp.net-mvc-3 - TryUpdateModel 上的错误

> ID：10821221
> 
> 赞同：1
> 
> 时间：2012-05-30T17:25:49.250
> 
> 标签：asp.net-mvc-3

当该字段没有值并且它在数据库中不可为空时，我收到 TryUpdateModel 错误。如果我将数据库中的字段更改为可为空，它就可以工作。任何人都知道一个解决方法来让它与不可为空的字段一起工作？我是 MVC 的新手，所以我只是在玩一个教程来尝试理解它....

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Add(FormCollection form)
    {
        var movieToAdd = new Movies();

        if (Request != null && Request.Form != null && Request.Form.HasKeys() && ValueProvider == null)
        {
            ValueProvider = new FormCollection(Request.Form).ToValueProvider();
        }

        //Deserialize (Include white list!)
        TryUpdateModel(movieToAdd, new string[] { "Title", "Director" }, form.ToValueProvider());

        // Validate
        if (string.IsNullOrEmpty(movieToAdd.Title))
            ModelState.AddModelError("Title", "Title is required!");
        if (string.IsNullOrEmpty(movieToAdd.Director))
            ModelState.AddModelError("Director", "Director is required!");

        // If valid, save movie to database
        if (ModelState.IsValid)
        {
            _db.AddToMovies1(movieToAdd);
            _db.SaveChanges();
            return RedirectToAction("Index");
        }

        // Otherwise, reshow form
        return View(movieToAdd);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:34:06.130

有几件事我会改变。

1.  修改您的方法签名以接受您`ActionResult`期望的强类型模型。从那里您可以检查模型是否有效并继续保存到数据库

2.  使用强类型模型和数据注释来验证您的模型

例如：

创建一个模型，您将用于表单获取和发布操作：

```
public class YourModel
{

    [Required]
    public string Title {get; set;]

    [Required]
    public string Director {get; set;}

} 
```

您的 Post ActionResult 然后变为：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Add(YourModel postedform)
{
    // If valid, save movie to database
    if (ModelState.IsValid)
    {
        _db.AddToMovies1(postedform);
        _db.SaveChanges();
        return RedirectToAction("Index");
    }

    // Otherwise, reshow form
    return View(postedform);
} 
```

# javascript - 在 jqGrid 中设置多个子网格的样式，使它们水平对齐。

> ID：10821223
> 
> 赞同：0
> 
> 时间：2012-05-30T17:26:01.020
> 
> 标签：javascript, css, jqgrid

嗨，我一直在试图弄清楚是否有可能采用带有 3 个子网格的 jqGrid 并将它们对齐，以便它们水平对齐。像这样：

====================================================
| ***_* ___****| |*****_ *_* __****| |*****__ *_* __ *_* ____** |****** 

 ******我已经尝试将每个设置为向左/向右浮动...但即使设置为重要样式也会被覆盖。任何帮助将不胜感激。

```
subGridRowExpanded: function(subGridDivId,rowId){
        $("#ClassGroupGrid").jqGrid('setSelection',rowId);
        var subgridClassTableId = subGridDivId + "_class_t";
        var subgridCreationTableID = subGridDivId + '_creation_t';
        var subgridConnectionTableID = subGridDivId + '_connection_t';

        $("#" + subGridDivId).html("<table style='float: left !important' id='" +      subgridClassTableId + "'></table>");
        $("#" + subgridClassTableId).jqGrid({
            datatype: 'local',
            data: classGroupData[parseInt(rowId) -1],
            colNames:['Classes'],
            colModel:[
                {name:'Classes', formatter: classGroupClassesFormatter}
            ],
            shrinkToFit: true
        });

        $('#' + subGridDivId).append("<table id='" + subgridCreationTableID + "'></table>");
        $("#" + subgridCreationTableID).jqGrid({
            datatype: 'local',
            data: classGroupData[parseInt(rowId) -1],
            colNames:['Creation Rules'],
            colModel:[
                {name:'Creation Rules', formatter: classGroupCreationFormatter}
            ],
            shrinkToFit: true
        });

        $('#' + subGridDivId).append("<table style='float: right !important' id='" + subgridConnectionTableID + "'></table>");
        $("#" + subgridConnectionTableID).jqGrid({
            datatype: 'local',
            data: classGroupData[parseInt(rowId) -1],
            colNames:['Connection Rules'],
            colModel:[
                {name:'Connection Rules', formatter: classGroupConnectionFormatter}
            ],
            shrinkToFit: true
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:24:06.783

似乎 jqGrid 将每个表放在自己的`div`. 如果是这样，那么放在`float: left`桌子上不会有太大的不同；你必须把它放在包含的 div 上。试试这个：

```
$("#" + subGridDivId).css("float", "left"); 
```

但是，如果不查看生成的 HTML，我无法确定这是否是正确的元素。“黄金法则”是您向左浮动的元素在 HTML 中都应该是彼此的兄弟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:19:17.873

因此，Brilliand 的想法很接近并让我找到了答案。子网格的结构是这样的：

```
<td role='row' class='ui-subgrid'>
<td role='row' class='ui-widget-content subgrid-cell'>
    <div class=tablediv>
        //divs containing subgrids 
```

在尝试了其中的几个之后，我终于能够找到正确的父级作为“ui-subgrid”。如果您将其向左浮动，然后将每个子网格向左浮动，您将得到您想要的答案，除了一点警告。您需要设置“ui-subgrid”的宽度才能包含所有子网格。所以做到这一点的css是（至少我是如何设置的）：

```
.ui-subgrid{
float:left !important;
width: 1000px !important;
} 
```

然后在您的 subgridrowexpanded 函数中：

```
$('#gbox_' + subgridClassTableId).css("float", "left"); 
```

subgridclasstableid 是每个子网格的唯一 ID。******

# ember.js - 分解 CollectionView 渲染以避免阻塞 UI 线程

> ID：10821226
> 
> 赞同：5
> 
> 时间：2012-05-30T17:26:17.410
> 
> 标签：ember.js

我想更改更新的渲染时间表`CollectionView`（由 创建`{{each}}`），以便大插入不会长时间阻塞 UI 线程。理想情况下，我想在 50 毫秒内渲染尽可能多的元素，然后将控制权传回 UI 线程并设置超时以继续进一步渲染。看起来 Ember 中有一些用于实现自定义渲染缓冲区行为的工具，但我不确定从哪里开始使用它。

这是一个 jsfiddle 基准测试，显示将 500 个元素插入到列表中，从而阻塞 UI 线程一段时间：

[http://jsfiddle.net/Ecq8g/6/](http://jsfiddle.net/Ecq8g/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T23:56:54.003

我想找到一种更好的方法来做到这一点，但现在我正在延迟填充 ArrayController 内容的速度。这是一个非常肮脏的例子。

[http://jsfiddle.net/BsjSH/1/](http://jsfiddle.net/BsjSH/1/)

```
for (var i = 0; i <= 999; i++) {
    Ember.run.later(function() {
        App.ArrayController.pushObject(App.Thing.create());
    }, i * 3);    
}​ 
```

您可以通过仅维护将在视口中的项目内容列表来改进这一点。我喜欢你的想法，即挂钩到 CollectionView 的 itemViewClass 的渲染函数，并且只允许渲染一定数量的视图。

# silverlight - 在 windows phone 7 silverlight 中为控件创建平铺背景图像

> ID：10821228
> 
> 赞同：3
> 
> 时间：2012-05-30T17:26:19.210
> 
> 标签：silverlight, windows-phone-7

这可能很简单，但我正在旋转我的轮子。

我有一个 16x16 的小图像，我想平铺它以填充我的应用程序的背景。（本例中为LayoutRoot网格控件）

ImageBrush 提供了拉伸它的选项，但没有平铺它的选项。

我确定可以这样做吗？

```
<Grid.Background>
  <ImageBrush ImageSource="/myApp;component/dark_cf6.png" Stretch="Uniform" />
</Grid.Background> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:37:40.423

你总是可以使用像素着色器，看看[http://blog.shazzam-tool.com/](http://blog.shazzam-tool.com/)和[http://msdn.microsoft.com/en-us/library/dd901594(v=vs.95)。 aspx](http://msdn.microsoft.com/en-us/library/dd901594(v=vs.95).aspx)

我以前曾将此方法用于其他目的，但有平铺图像效果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T18:35:32.937

WPF 支持使用[VisualBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.visualbrush.aspx)创建平铺背景。WP7*也应该*支持这一点：

```
<Grid.Background>
   <ImageBrush ImageSource="/myApp;component/dark_cf6.png" 
               TileMode="Tile" 
               ViewportUnits="Absolute" 
               Viewport="0,0,16,16" />
</Grid.Background> 
```

[ViewPort](http://msdn.microsoft.com/en-us/library/system.windows.media.tilebrush.viewport.aspx)属性是设置正确平铺的关键。

# firefox - 右侧的音频标签进度条

> ID：10821231
> 
> 赞同：1
> 
> 时间：2012-05-30T17:26:23.297
> 
> 标签：firefox, html5-audio

我在使用音频标签和 Firefox 时遇到问题。我正在使用默认浏览器的控件。它适用于 Chrome 和 Opera，但在 Firefox 中进度条保持在右侧（就像它是记录的结尾一样） - 声音正常播放，但我无法通过文件查找。我做错什么了？

这是我将文件发送到浏览器的方式。

```
header('Content-Description: File Transfer');
header('Content-Type: audio/wav');
header('Content-Disposition: attachment; filename=' . basename($clientName));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($file));

readfile($file); 
```

我对音频标签的使用：

```
<audio preload="auto" controls="controls" src="/record/download/id/55" /> 
```

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:32:06.910

Firefox 将发送范围请求（带有“Range”请求标头）并且您的服务器代码应该做出相应的响应（带有“206 Partial Content”状态）。当服务器似乎不理解范围请求时，firefox 将假定它是某种实时流并以所描述的方式运行。

如果您的代码通过 apache 服务器运行，您可以让它为您处理范围请求，例如使用 mod_xsendfile。另一种选择是自己实施。有关详细信息，请参阅 RFC 2616，尤其是第 10.2.7 和 14.35 节。

# jaxb - 防止 JAXB 在我的元素中转义 HTML 标记

> ID：10821238
> 
> 赞同：3
> 
> 时间：2012-05-30T17:26:55.137
> 
> 标签：jaxb

假设我有一个带有描述字段的对象。这个字段可以有一个带有一些 html 标记的字符串值。

```
"Say <b xmlns="http://www.w3.org/1999/xhtml">Hello</b> Wold" 
```

当这个对象被封送时，我检索一个具有以下结果的 XML

```
<description>Say &lt;b&gt;Hello&lt;/b&gt; World</description> 
```

相反，我希望 html 标记保持未转义

```
<description>Say <b xmlns="http://www.w3.org/1999/xhtml">Hello</b> World</description> 
```

有没有办法通过例如我的字段上的注释来实现这一点？

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-23T17:08:09.217

这是防止 Marshaller 转义 HTML 特殊字符的正确方法：

```
 marshaller.setProperty("com.sun.xml.bind.characterEscapeHandler", new CharacterEscapeHandler() {
            @Override
            public void escape(char[] ch, int start, int length, boolean isAttVal,
                               Writer out) throws IOException {
                out.write(ch, start, length);
            }
        }); 
```

# php - 映射具有相似名称的产品

> ID：10821239
> 
> 赞同：1
> 
> 时间：2012-05-30T17:26:59.053
> 
> 标签：php, sql

我正在尝试找到一个好的解决方案来完成以下任务：

我有一张表，其中包含各种产品的名称，例如：
“潮汐 - 原始气味”。
此外，我还有 50 液量盎司的量。

我现在遇到的问题是，该产品不仅装在 50 液量盎司的容器中，而且还有不同的尺寸，例如 75 液量盎司和 100 液量盎司。对于其中的每一个，我在产品表中都有新行：

```
id| productName            | amount | unit  
1 |"Tide - Original Scent" | 50     | "fl oz"  
2 |"Tide - Original Scent" | 75     | "fl oz"  
3 |"Tide - Original Scent" | 100    | "fl oz" 
```

现在我有一个网络界面来在这个表上执行搜索，每当我搜索“潮”时，我都会得到所有三行——这当然应该是这样的。但是我想要不同的行为，这就是我需要你帮助的地方：

而不是返回所有三行，我只想要一行。然后我需要能够在 php 中处理它，以便如果用户单击“潮汐 - 原始气味”，然后提示用户选择尺寸。

让任务更加复杂：我在同一张表中也有产品，名称为：
“潮汐 - 山泉”。
在这种情况下，最好建立一些关系，所以我知道“潮 - 原香”与“潮 - 山泉”相关联。然后，在 php 中，我不仅要让用户选择选择大小，还要让用户选择（在这种情况下）气味。

您对我如何实现这一点（不是 php 部分）有什么建议？
你的数据库会是什么样子？
我是否需要创建一个表格来映射这些产品？如果你要创建这个会是什么样子:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:33:15.103

2种可能性：

不要将尺寸与其他特定信息一起存储在该表中。将其移至另一张桌子。[非规范化](http://en.wikipedia.org/wiki/Database_normalization)你的结构。

或者

查询但[按](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)名称分组。对于大小列，执行`count(amount)`. 如果它不止一个，那么您可以使用选项填充下拉列表。这是一个很好的临时修复。

```
SELECT productName, count(amount) AS numOfChoices FROM YOUR_TABLE 
WHERE LOWER(productName) LIKE 'tide%' 
GROUP BY productName 
```

然后在做出选择之后

```
SELECT id, amount FROM YOUR_TABLE
WHERE id = "$selectedId" 
```

提供一种尺寸选择，以指出哪一种尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:33:07.713

为子标签创建外键，并使用计数器对其进行排序。这看起来像。

产品表：

*   产品 ID（密钥）
*   品牌标识
*   价格

品牌表：

*   品牌 ID（键）
*   品牌

可转表：

*   ID
*   产品编号
*   订单索引
*   价值

尺码表：

*   尺码 ID
*   价值
*   单元

产品尺寸表：

*   尺码 ID
*   产品编号

然后，您将使用后续子标签划分子类别。

产品

```
10 | 6 | 1.99
11 | 6 | 2.99
12 | 6 | 3.99    
13 | 6 | 1.99
14 | 6 | 2.99
15 | 6 | 3.99 
```

品牌

```
6 | Tide 
```

子标签

```
30 | 10 | 1 | Original Scent
30 | 11 | 1 | Original Scent
30 | 12 | 1 | Original Scent
30 | 13 | 1 | Mountain Spring
30 | 14 | 1 | Mountain Spring
30 | 15 | 1 | Mountain Spring 
```

尺码表

```
1 | 50  | fl.oz.
2 | 75  | fl.oz.
3 | 100 | fl.oz. 
```

产品尺寸表

```
1 | 10
1 | 13
2 | 11
2 | 14
3 | 12
3 | 15 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T17:37:04.500

我会亲自设置我的*桌子*这样..

**产品表**：

```
ID| Product ID | Product Name          | Description

1 | 0404888282 | Tide - Original Scent | Smells Good 
```

**数量表**：

```
ID| Product ID | Size| Price | Quantity

1 | 0404888282 |  50 | 4.99  | 23
2 | 0404888282 |  75 | 5.99  | 120
3 | 0404888282 | 100 | 7.99  | 10 
```

在这种结构中，您有一个表格用于每个独特的项目，另一个用于每个尺寸的尺寸和数量。保持结构干净且易于理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T17:39:41.397

*“而不是返回所有三行，我只想要一行。”*

```
SELECT DISTINCT productName FROM YOUR_TABLE WHERE LOWER(productName) LIKE 'tide%' 
```

而且您需要一个功能索引`LOWER(productName)`才能获得良好的性能。或者，可以在支持它的 DBMS（例如 MS SQL Server）上使用不区分大小写的排序规则序列。

*“然后我需要能够在 php 中处理它，这样如果用户点击“潮汐 - 原始气味”，就会提示用户选择尺寸。”*

```
SELECT amount FROM YOUR_TABLE WHERE productName = whatever_user_selected 
```

*“为了增加任务的复杂性：我在同一张表中也有产品，名为：“潮汐 - 山泉”。”*

上面的查询也将返回。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T17:39:54.537

你可以做的是：

```
$Query = 'SELECT productName, amount, unit FROM products';

$Data = array();
while($Assoc = mysql_fetch_assoc($Query)){
    if(!isset($Data[$Assoc['productName']])){
        $Data[$Assoc['productName']] = array();
    }

    $Size = $Assoc['amount'].' '$Assoc['unit'];
    $Data[$Assoc['productName']][] = $Size;
}

// Now what you can do is :
foreach($Data as $ProductName => $Amount){
    echo $ProductName.' has :<br />';

    if(count($Amount) > 0){
        foreach($Amount as $Key => $Value){
            echo $Value.'<br />';
        }
    } else {
        echo 'Nothing<br />';
    }
} 
```

然而，这并不能解决 MySQL 方面的问题。IT 将在 PHP 中运行而不会出现问题。它并不漂亮，但它正在工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T17:43:12.023

对于第一个问题，您可以创建两个表：

1.  产品 - 这是您存储有关产品的所有信息的地方，但不同尺寸、颜色等细节除外。
2.  属性 - 您将链接到产品并为每个属性指定一个值

## 产品

```
id | description
---+------------
 1 | crazy shirt
 2 | clown shoe 
```

## 属性

```
product | name  | value
--------+-------+-------
     1  | color | green
     1  | color | blue
     1  | size  | medium
     2  | size  | large 
```

您可以`attributes`通过创建`attribute_names`表（甚至是`attribute_values`表）来进一步优化表。

对于第二个问题，您可以：

1.  在表内创建一个相关的产品 id 列`products`；这将限制您每个产品只能使用一种相关产品。
2.  创建一个相关的产品表，您可以在其中存储两个产品之间的组合。

## 相关产品

```
product_id | related_product_id
-----------+-------------------
         1 | 2
         1 | 3 
```

这将在产品 1 与产品 2 和 3 之间建立关系。

希望这可以帮助。

# matlab - 使用 GPU 计算稀疏数据

> ID：10821247
> 
> 赞同：3
> 
> 时间：2012-05-30T17:27:23.513
> 
> 标签：matlab, optimization, gpu, sparse-matrix

我在 Matlab 中计算一个函数*f* ( **x** ) = exp(- **x )，其中*****x***是一个标量向量。该函数在 GPU 上计算，例如

```
x_cpu = [4 5 11 1];
x = gpuArray(x_cpu);
f = exp(-x); 
```

那么结果将是：

*f* = exp(-[4, 5, 11, 1]) = [0.183, 0.0067, 1.6702e-005, 0.3679]。

请注意，*f* ( **x** (3)) = *f* (11) = exp(-11) = 1.6702e-005 = 0.000016702，这是一个非常小的值。因此，我想通过简单地设置*f* ( **x** (i)) = 0来避免计算所有**x** (i) > 10 的函数。

 ***我可能可以使用**x**的稀疏矩阵表示。但是，Parallel Computing Toolbox 不支持在 GPU 上对稀疏矩阵进行运算。

你会如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:59:23.930

**请注意：此方法是一种解决方法，旨在解决问题中的陈述：**

> 因此，我想通过简单地设置 f(x(i)) = 0 来避免计算所有 x(i) > 10 的函数。

**这绝不是一种真正的“稀疏”数值方法。这只是在 MATLAB 的 GPU 上*“避免计算所有 x(i) > 10 的函数”的一种手段***

```
% original input vector
x_cpu = [4 5 10 1 13 8 9]; 

% logical indeces of x where exp(-x) is significant
ix = x_cpu <= 10;

% values of x where exp(-x) is significant ("sparse" x)
x_sp = x_cpu(ix);

% Load our "sparse" vector to GPU
x_gpu = gpuArray(x_sp);

% create a vector of zeros for function output on GPU
f_gpu = parallel.gpu.GPUArray.zeros(size(x_cpu)); 

% do the calculations only for the "sparse" matrix on the GPU
f_gpu(ix) = exp(-x_gpu); 
```

当您想在工作区中恢复计算时，请使用[collect](http://www.mathworks.com/help/toolbox/distcomp/gather.html)：

```
f_cpu = gather(f_gpu);         % GPU --> workspace 
```

**注意：我没有测试过这段代码**

您应该结合其中一些初始化（`x_sp`或者`ix`，也许）以节省内存并加快进程。老实说，工作空间和 GPU 之间的初始化和数据传输实际上可能会使整个过程比以前慢。没有什么可做的，但试试吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:04:32.357

虽然 Parallel Computing Toolbox 不支持 GPU 上的稀疏矩阵运算，但 Jacket 支持。因此，一种可能的方法是简单地使用不同的工具。

免责声明是我在 Jacket 上工作，但我真的认为这对你有好处，因为它支持你想做的事情，而 PCT 不做，[原因在这里](http://accelereyes.com/compare)。***

# jqgrid - 从 ArrayData 中删除值

> ID：10821248
> 
> 赞同：0
> 
> 时间：2012-05-30T17:27:30.487
> 
> 标签：jqgrid

我有一个网格，我可以在其中访问 rowData

```
var rowData = $('#gridtbl').getRowData(rowId); 
```

但是，并非 rowData 中的所有值都是必需的，我需要将其传递给控制器​​。如何操作 ArrayData 以从中删除某个元素？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:30:36.517

您可以使用[`splice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)从数组中删除元素。

```
var list = [1,2,3];
alert(list.splice(1, 1)); // will show 2
alert(list): 
```

# javascript - 手势和触摸事件 - 平滑调整正方形的大小

> ID：10821258
> 
> 赞同：3
> 
> 时间：2012-05-30T17:28:49.803
> 
> 标签：javascript, jquery, ios, touch, gesture

`#square`我在 iOS 设备的视口中有一个垂直和水平居中 的蓝色……</p>

```
<div id="square"></div>
#square {
    width:100px;
    height:100px;
    background:blue;
    margin:0 auto;
} 
```

在手机上进行捏合/缩放手势时，我想在最小值和最大值内调整它的大小。

现在，这就是我使用的所有 javascript。

```
$(document).ready(function() {

    var dom = document.body,
        _width = parseInt($('#square').css('width')),
        vel = 3,
        min = _width,
        max = 300,
        scale;

    dom.addEventListener("gesturechange", gestureChange, false);

    function gestureChange(e) {

        e.preventDefault();

        scale = e.scale;
        _width = Math.round(_width*(scale/vel));

        if ( _width <= max && _width >= min )
            $('#square').css({
                'width' : _width + 'px',
                'height' : _width + 'px'
            });

        if ( _width > max ) _width = max;
        if ( _width < min ) _width = min;
    }

}); 
```

然而，整个调整体验感觉有点波涛汹涌，对我的手指并没有真正流畅的反应。它确实有效，但没有我想要的那么顺利。

首先关。我真的不明白javascript“触摸”事件和javascript“手势”事件之间的区别。我需要更多的事件监听器吗？喜欢`gestureStart`并`gestureEnd`为此工作吗？

我现在遇到的问题是，当我`#square`非常快地将跳跃放大到最大值（300）时，我无法用手指准确控制它的大小。而且，一旦调整大小，我在做缩小手势时也很难再次减小大小。

我把我当前的代码放在 jsfiddle 上，这样你就可以自己测试了。[http://jsfiddle.net/Ec3az/](http://jsfiddle.net/Ec3az/)

也许有人可以在这里帮助我，因为我很想完成这篇文章。总体结果应该只是在智能手机上放大和缩小时提供非常流畅的体验和对正方形大小的实际控制。

先感谢您

编辑：顺便说一句。我只想使用标准的触摸事件，而不是使用额外的库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T08:28:22.173

您遇到的问题是，当您收到新的手势更改事件时，您正在缩放正方形的当前宽度，而实际上您想要缩放正方形的原始宽度和高度。以自己的方式进行操作会累积规模的每次变化，并导致正方形大小的快速增加，这就是您所经历的。

缩放完成后，我们还需要将原始宽度更新为当前宽度，这样下次用户缩放时，它会从正确的大小开始缩放。

所以这创造了一个更流畅的体验，因为它总是缩放原始宽度：

```
var dom = document.body,
    _width = parseInt($('#square').css('width')),
    vel = 5.0,
    min = _width,
    max = 300,
    scale;

dom.addEventListener("gesturechange", gestureChange, false);
dom.addEventListener("gestureend", gestureEnd, false);

function gestureChange(e) {

    e.preventDefault();

    scale = e.scale;
    var tempWidth = _width * scale;

    if (tempWidth > max) tempWidth = max;
    if (tempWidth < min) tempWidth = min;

    $('#square').css({
        'width': tempWidth + 'px',
        'height': tempWidth + 'px'
    });
}

function gestureEnd(e) {

    e.preventDefault();
    _width = parseInt($('#square').css('width'));
} 
```

​</p>

这个小提琴在 iPad 1、iOS 5.1 上似乎很流畅。东西！:)

[http://jsfiddle.net/D9NC3/](http://jsfiddle.net/D9NC3/)

此外，关于手势和触摸事件，我在许多浏览器（android、iOS safari 和 Firefox 似乎[http://caniuse.com/#search=touch](http://caniuse.com/#search=touch)）中都支持触摸事件，但手势事件为据我所知，iOS Safari 是专有的。它们基本上可以帮助您处理 iOS 类型的手势（捏合和缩放、旋转等），因此您不必自己实现手势检查。

希望能帮助到你！

# ruby-on-rails-3 - 自定义 kaminari 分页模板

> ID：10821262
> 
> 赞同：1
> 
> 时间：2012-05-30T17:29:02.360
> 
> 标签：ruby-on-rails-3, kaminari

我很难自定义默认的 kaminari 模板。

我已经使用生成器创建了 kaminari 模板文件。在 kaminari/paginator.html.haml 中：

```
= paginator.render do
  %nav.pagination 
```

我要做的就是访问其中的 actionview 助手，例如 link_to 或 render。我搜索了源代码，但找不到传递给此渲染方法的帮助程序的任何倾斜度。

本质上，能够做到这一点：

```
= paginator.render do
  %nav.pagination
    = render :partial => 'custom links'
    = link_to "custom link", custom_path 
```

..会解决我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T03:25:08.843

我没有得到满意的答案，所以我将提交我自己的解决方案。

助手不能在`paginator.render`块中使用。

所以，首先我生成 kaminari 自定义模板文件：

```
rails g kaminari:views default -e haml 
```

使用以下内容创建一个新文件 kaminari/custom.html.haml：

```
#pagination
  = paginate custom
  = render :partial => "kaminari/custom_view_file" 
```

`paginate @results`将视图文件中的kaminari 分页器助手 ( ) 替换为：

```
= render :partial => "kaminari/custom", :object => @results 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:29:42.733

你应该能够做这样的事情：

```
# /app/views/kaminari/_paginator.html.erb

= paginator.render do
  %nav.pagination
    = render :partial => 'shared/custom'
    = link_to "custom link", custom_path 
```

基本上，您需要提供部分的完整路径，因为它可能不在同一目录中。

编辑：

我认为 Kaminari 不会在 _paginator.html.erb 的 paginate.render 块中导入 rails 视图助手。要自定义分页器生成的输出，您应该
1\. 自定义 _next_page.erb.html 等等，您可以在其中使用 rails 助手。我不知道为什么会这样。
2.如果你想在分页器中显示一些常用的html，我建议你把它放在布局中。Paginator 是关于页面导航的。

例如，这是 _prev_page.html.erb：

```
<span class="prev">
  <%= link_to "google", "www.google.com" %>
  <%# link_to_unless current_page.first?, raw(t 'views.pagination.previous'), url, :rel => 'prev', :remote => remote %>
</span> 
```

我只是注释掉了旧代码并使用了自定义链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-03T13:13:47.583

刚遇到同样的问题。我的解决方案：

```
= paginator.render do
  %nav.pagination
    = render :partial => 'custom links'
    = @template.link_to "custom link", custom_path 
```

由于部分渲染发生在 Paginator 的范围内，因此可以使用其实例变量，指向模板（请参阅[https://github.com/amatsuda/kaminari/blob/master/lib/kaminari/helpers/paginator.rb](https://github.com/amatsuda/kaminari/blob/master/lib/kaminari/helpers/paginator.rb)）

有点hacky，但有效。

# vba - 如何使用代码禁用 MS Word“无宏文档”警告？

> ID：10821263
> 
> 赞同：2
> 
> 时间：2012-05-30T17:29:12.667
> 
> 标签：vba, ms-word

我有一个动态插入 VBA 代码的应用程序，以帮助构建带有适当书签的 MS Word 文档。VBA 代码不需要与文档本身一起保存。

保存文档时，会弹出以下警告（不幸的是我还不能发布图像），这会使应用程序的最终用户感到困惑。有没有办法在 DocumentBeforeSave 事件中禁用它？

**

> 以下内容不能保存在无宏文档中： VBA 项目 要保存具有这些功能的文件，请单击否返回“另存为”对话框，然后在“文件类型”下拉列表中选择启用宏的文件类型。继续另存为无宏文档？按钮：[是][否][帮助]

**

一个想法是将文档的 SaveFormat 更改为旧格式，以防止弹出此警告。但我不确定此更改是否会影响文档的行为方式，以及是否可以在 DocumentBeforeSave 事件中修改此属性（该属性是 READONLY 属性）。

在此先感谢您对此主题的任何帮助。

以下代码将打开一个单词（假设存在 c:\work\test.docx，它可以只是一个空白单词 doc）。如果您点击 word doc 上的 Save 按钮，则会显示警告消息。顺便说一句，我正在使用 Office 2010。

```
<TestMethod()>
Public Sub testWord()
    Dim wApp As New Word.Application()
    Dim myDoc As Word.Document
    Dim DataCodeModule As Object = Nothing

    myDoc = wApp.Documents.Open("C:\Work\test.docx")

    DataCodeModule = myDoc.VBProject.VBComponents(0).CodeModule
    With DataCodeModule
        .InsertLines(1, "Option Explicit")
        .InsertLines(2, "Sub TestCode()")
        .InsertLines(3, "Selection.InsertAfter ""test""")
        .InsertLines(4, "End Sub")
    End With

    wApp.Visible = True
    myDoc.Activate()
End Sub 
```

一旦 DocumentBeforeSave 被连接，我希望下面的代码会禁用警告。可能需要在打开文档后立即设置 DisplayAlerts？

```
Public Sub App_DocumentBeforeSave(ByVal doc As Object, ByRef saveAsUI As Boolean, ByRef cancel As Boolean) Handles _officeHelper.DocumentBeforeSave
            Dim WordApp As Object = this.WordApp()
            'WordApp.DisplayAlerts = False
            WordApp.DisplayAlerts = 0
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T17:32:29.403

像这样？

```
Application.DisplayAlerts = wdAlertsNone
'~~> Your Save Code
Application.DisplayAlerts = wdAlertsAll 
```

**跟进**

您正在 vb.net 中执行此操作。我目前无法访问 VB.net，但下面的这个示例将让您走上正确的道路

打开 Word 并插入一个模块，然后粘贴此代码

```
Option Explicit

Dim MyClass As New Class1

Sub Sample()
    Set MyClass.App = Word.Application
End Sub 
```

现在插入一个类模块并粘贴此代码

```
Public WithEvents App As Word.Application

Private Sub App_DocumentBeforeSave(ByVal Doc As Document, _
SaveAsUI As Boolean, Cancel As Boolean)

    Application.DisplayAlerts = wdAlertsNone
    ActiveDocument.Save
    Application.DisplayAlerts = wdAlertsAll

End Sub 
```

现在，如果您按下保存按钮，您会注意到您将不再收到该警报。:)

希望您可以根据需要进行调整:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T05:07:59.927

我只是完成了这段代码。它会提示您保存并帮助您将其附加到电子邮件中。它对我有用。请试试。我在工作表顶部给出了一个命令按钮。谢谢

```
Private Sub CommandButton1_Click()
Dim whatfolder, whatfile As String
whatfolder = InputBox("Type folder name.. Don't type which drive")
whatfile = InputBox("Type file name you want to give")
ChangeFileOpenDirectory "C:\" & whatfolder
Application.DisplayAlerts = wdAlertsNone
ActiveDocument.SaveAs FileName:=whatfile & ".docx", FileFormat:=wdFormatXMLDocument, LockComments:=False, Password:="", AddToRecentFiles:=True, WritePassword:="", ReadOnlyRecommended:=False, EmbedTrueTypeFonts:=False, SaveNativePictureFormat:=False, SaveFormsData:=False, SaveAsAOCELetter:=False
Application.DisplayAlerts = wdAlertsNone
ActiveDocument.SendMail
End Sub 
```

# android - Phonegap Android，在浏览器中测试。

> ID：10821268
> 
> 赞同：0
> 
> 时间：2012-05-30T17:29:19.123
> 
> 标签：android, html, debugging, cordova

我正在构建一个 Phonegap 应用程序。我已经制作了 html 应用程序，并在我的 Windows Google Chrome 浏览器中对其进行了测试，没有任何错误。我已经在我的 Android 手机的导航器中检查了它，它正在工作。但是，在 Phonegap 之后，我发现有些东西不起作用。

Phonegap 使用的是哪个浏览器？是不是和安卓导航器不一样？我可以以某种方式调试它吗？

在我的 Eclipse 控制台上，我只看到有关 Vertext 着色器的错误。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:56:12.547

PhoneGap 实例化一个[Android WebView](https://developer.android.com/reference/android/webkit/WebView.html)组件与不等于Android 浏览器。如果您的代码有 console.log 语句，您应该能够在 Eclipse 的 LogCat 选项卡中看到它们。

如果您想要更好的调试，您应该将[WeInRe](https://people.apache.org/~pmuellr/weinre/docs/latest/)添加到您的项目中以进行远程调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:11:37.107

您可以添加 console.log 语句，可以`adb logcat`在终端或 DDMS 中查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T09:24:05.297

这个怎么样？你怎么看？

[https://chrome.google.com/webstore/detail/ripple-emulator-beta/geelfhphabnejjhdalkjhgipohgpdnoc?hl=en](https://chrome.google.com/webstore/detail/ripple-emulator-beta/geelfhphabnejjhdalkjhgipohgpdnoc?hl=en)

# jquery - JQuery ListView 新项目 Flash

> ID：10821269
> 
> 赞同：0
> 
> 时间：2012-05-30T17:29:27.710
> 
> 标签：jquery, css, jquery-ui, jquery-mobile

我正在尝试将 AJAX 添加到 JQuery 列表视图闪烁黄色，但我似乎无法让它工作。谁能指出我正确的方向？

[http://jsfiddle.net/zFybm/](http://jsfiddle.net/zFybm/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:31:32.067

使用此代码..它工作正常

```
function newitem(){
var text='<li><p>new</p></li>';
var elem=$(text);
elem.css("background", "#FFA");
$('#list').prepend(elem);
$('#list').listview("refresh");
elem.animate({backgroundColor: "#EEE"});
}
newitem();​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:44:15.133

根据jQuery页面，

**“宽度、高度或左侧可以设置动画，但背景颜色不能设置，除非使用 jQuery.Color() 插件）”** [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

您可以查看 jQuery.Color()，或使用以下其他解决方案之一：

[http://www.bitstorm.org/jquery/color-animation/](http://www.bitstorm.org/jquery/color-animation/)

[http://desizntech.info/2009/06/playing-with-jquery-color-plugin-and-color-animation/](http://desizntech.info/2009/06/playing-with-jquery-color-plugin-and-color-animation/)

# iphone - json_encode 等效于objective-c

> ID：10821272
> 
> 赞同：1
> 
> 时间：2012-05-30T17:29:40.737
> 
> 标签：iphone, objective-c, ios, encoding

我需要编写与此 php 代码等效的代码

```
json_encode(utf8_encode()) 
```

在客观-c

我已经实现了相当于 utf8_encode 的

```
[NSString stringWithCString:[testString cStringUsingEncoding:NSUTF8StringEncoding] encoding:NSASCIIStringEncoding] 
```

所以现在，我需要实现相当于 json_encode 的 php 函数。

输入：“http://www.mydomain.com/s?c=Théâtre,Cinéma”

预期输出：“http://www.mydomain.com/s?c=Th\u00c3\u00a9\u00c3\u00a2tre,Cin\u00c3\u00a9ma”

有没有人有有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:54:00.693

你可以看看

```
+ (NSData *)dataWithJSONObject:(id)obj options:(NSJSONWritingOptions)opt error:(NSError **)error 
```

您从 Apples Foundation 类的某些对象中获取 JSON 数据。如果你需要一个字符串，你可以使用：

```
- (id)initWithData:(NSData *)data encoding:(NSStringEncoding)encoding 
```

NSString 的。可能会导致类似：

```
NSString *string = [[[NSString alloc] initWithData:[NSJSONSerialization dataWithJSONObject:YOUR_OBJECT_HERE options:0 error:nil] encoding:NSUTF8StringEncoding] autorelease]; 
```

# c# - 具有 Nhibernate 设计问题的域模型

> ID：10821273
> 
> 赞同：6
> 
> 时间：2012-05-30T17:29:40.813
> 
> 标签：c#, nhibernate, domain-driven-design

我正在尝试开始“使用 C# 进行 DDD”世界。我使用 NHibernate 作为我的 ORM 工具，因此试图开发一个 PI(Persistence Ignorance) 模型。但是，在我的一些实体（表示为 POCOS）中，我的属性设置器中有业务规则。例如，我有一个“用户”实体，它有一个标志，表明该用户是否被阻止，当这个标志为真时，必须自动填写第二个名为“阻止日期”的字段当前日期。一切看起来都非常清晰和简单，但是问题出现在我正在恢复已经保存在数据库中的用户的那一刻，即使被阻止的用户会将他们的“阻止日期”更新到当前日期，根据这个逻辑. 最初我认为在第二个标志“isLoaded”中表示对象正在被 NHibernate 水合，然后这个逻辑不会启动，但这看起来不像 PI。关于如何改进这一点的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:02:35.017

除了针对 NHibernate 问题的 Miroslavs 解决方案之外，我真的建议不要将逻辑放在属性设置器后面，尤其是在需要更改其他字段时。

```
public void Block()
{
   _isBlocked = true;
   _blockedDate = DateTime.Now;
} 
```

[请参阅此问题](https://stackoverflow.com/questions/4451689/domain-driven-design-domain-objects-attitude-about-setters)的答案以了解原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T01:19:55.637

您可以在 IsBlocked 属性的映射中定义字段访问策略。基本上，您会告诉 NHibernate 使用底层私有字段 (_isBlocked) 而不是属性，因此，您在 IsBlocked 属性中的设置器逻辑不会被执行。

[这个 SO question](https://stackoverflow.com/questions/2339264/property-access-strategies-in-nhibernate)对访问策略有一个很好的答案。

NHibernate 官方[文档](http://nhforge.org/doc/nh/en/index.html#mapping-declaration-property)。

如果您使用 Fluent NHibernate 进行映射，您可以这样定义它：

```
Map(x => x.IsBlocked).Access.CamelCaseField(Prefix.Underscore); 
```

# sql - 存储过程参数值记录

> ID：10821275
> 
> 赞同：4
> 
> 时间：2012-05-30T17:29:44.960
> 
> 标签：sql, sql-server, logging, stored-procedures, sql-server-2008-r2

有没有办法检查在 SQL Server 2008 R2 中执行存储过程的时间和参数值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T17:52:13.763

正如 usr 所说，根本没有办法做到这一点，但你可以这样做作为解决方法，我在我的项目中做过。

创建一个日志表并在每个过程中实现一个`INSERT INTO log_table`语句，您可以在其中插入时间`GetDate()`、过程名称和登录用户。您可以在此表中查找您的信息。

这肯定只适用于未来，而不是如果你想寻找“旧用途”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T17:48:38.107

不，对不起。没有办法做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:33:41.237

您可以对任务使用分析器。查看其他线程：

[如何在 SQL 存储过程中实现日志记录和错误报告？](https://stackoverflow.com/questions/3318695/how-to-implement-logging-and-error-reporting-in-sql-stored-procedures)

[在 MS Sql Server 中运行存储过程的“调试”（获取信息）](https://stackoverflow.com/questions/3883111/debugget-information-on-a-running-stored-procedure-in-ms-sql-server)

# sql-server-2005 - SQL Server 2005 的默认锁定 - 行级别或页级别

> ID：10821282
> 
> 赞同：1
> 
> 时间：2012-05-30T17:30:10.620
> 
> 标签：sql-server-2005, locking

SQL Server 2005 是否默认使用行级锁定或页级锁定？我在一些更新中遇到了一些超时错误，想知道它是否与默认锁定机制有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:52:41.443

SQL Server`row-level`默认总是使用锁定

如果您锁定超过一定数量的行（5000），那么`SQL Server`将进行**[锁定升级](http://msdn.microsoft.com/en-us/library/ms184286%28v=sql.105%29.aspx)**（锁定表而不是单独锁定超过 5000 行）以优化性能并优化资源使用

我的建议是使您的事务尽可能短。或者您可以将 with(NoLock) 用于那些未被多个用户连续插入的表，例如主表...

我的另一个建议是使用 SQL Profiler。

# c# - .NET 的 [Obsolete(string, bool)] 属性的用途

> ID：10821283
> 
> 赞同：9
> 
> 时间：2012-05-30T17:30:13.013
> 
> 标签：c#, .net, methods, attributes, obsolete

注意：我已经检查了 msdn，它没有解决我的实际问题，见下文。

我正在尝试在我的一个类中的（显然已过时的）构造函数上使用过时的属性。这是场景：

我希望能够强制开发人员更新到新的构造函数，而不影响已经存在和部署的代码。这样我就可以很好地将我的代码部署到生产环境中，但是从开发人员的角度来看，每当他们进入他们的代码时，而不是仅仅得到一个我确信他们会忽略的“警告”，我希望他们得到一个编译错误，因为现状不再正常。

所以我的问题是，这只会影响开发人员，还是所有调用应用程序，还是我错了？

示例代码：

```
public class MyClass
{
   private string _userID; //new code

   [Obsolete("This constructor is obsolete, please use other constructor.", true)]
   public MyClass()
   {
      _userID = ""; //defaulting to empty string for all those using this constructor
   }

   public MyClass(string userID)
   {
      _userID = userID; //this is why they need to use this constructor
   }
} 
```

任何和所有的帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T17:37:22.927

是的，这主要影响编译器 - 任何预构建的代码都不会受到影响......*除非*该代码明确检查此属性。例如，一些序列化代码（XmlSerializer，IIRC）会对此进行检查 - 所以它可能不会*完全*没有副作用......*但原则上*现有代码通常不会受到影响，直到他们尝试下一次编译。

当然，如果您从使用动态编译的东西（例如没有预编译的 ASP.NET）中使用此代码，那么**所有的赌注都是关闭的**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T17:36:35.633

该属性只是对编译器的指令。已经存在的二进制文件仍然可以使用构造函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T17:37:58.230

这是 [Obsolete] 已经做的，不需要额外的帮助。这不是编译时警告，它会产生错误：

> 错误 CS0619：“ConsoleApplication1.MyClass.MyClass()”已过时：“此构造函数已过时，请使用其他构造函数。”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T17:36:42.600

> 所以我的问题是，这只会影响开发人员，还是所有调用应用程序，还是我错了？

这只会在编译时由编译器使用。它不会影响已经部署的应用程序。

因此，这将具有您试图完成的行为。

# git - 如何创建重复的远程分支、本地分支并开始签入新更改？

> ID：10821284
> 
> 赞同：1
> 
> 时间：2012-05-30T17:30:17.493
> 
> 标签：git

创建以下内容的最简洁和干净的方法是什么：

1.  将现有的主分支复制到远程“实验”分支？
2.  设置遥控器以遵循这个新的“实验”分支。
3.  设置本地分支以链接以跟踪远程“实验”的更改

到目前为止，我有以下内容：

```
git checkout -b experiments
git remote add -t experiments experiments git@github.com:XXXX/YYY.git
git push --set-upstream origin experiments 
```

这是正确的命令集吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T18:41:17.847

```
git push origin master:experiment
git checkout experiment 
```

2 和 3 与最后一个一起处理。除非您没有从 github 克隆，否则您不需要任何远程命令。

```
git remote add git@github.com:XXX/YYY origin 
```

如果您还没有，那么在开始时执行命令。

# metadata - 在露天添加自定义元数据

> ID：10821285
> 
> 赞同：0
> 
> 时间：2012-05-30T17:30:17.943
> 
> 标签：metadata, alfresco

我通过在他们的 wiki 中指定的 xml 配置添加了自定义元数据......我可以看到我在管理方面的 /share 应用程序中添加的方面，但它没有在 /alfresco 应用程序中列出，当我使用其余 api 上传文档时它说找不到我添加的字段..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:06:29.360

Share 和旧的 Alfresco Web Client 有不同的配置。

查看这些资源以获取更多信息：

*   [http://wiki.alfresco.com/wiki/Web_Client_Customisation_Guide](http://wiki.alfresco.com/wiki/Web_Client_Customisation_Guide)
*   [http://wiki.alfresco.com/wiki/Displaying_Custom_Metadata](http://wiki.alfresco.com/wiki/Displaying_Custom_Metadata)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T15:13:39.403

请阅读[本教程](http://ecmarchitect.com/archives/2012/01/09/1509)，其中包括创建自定义内容类型和方面并将它们公开给 Share (/share) 和 Explorer (/alfresco) Web 客户端。

不过，除了配置之外，听起来您可能有多个问题，因为 REST API 应该能够看到您的自定义模型，如果它定义正确，无论它是否在两个 Web 客户端中的任何一个中配置。

# php - php：页面导航后会话消失

> ID：10821290
> 
> 赞同：3
> 
> 时间：2012-05-30T17:30:27.490
> 
> 标签：php, session

我已经阅读了我能找到的关于这个问题的所有帖子，但是到目前为止，没有一个解决方案对我有用。显然，我忽略了一些重要的事情。我也不知道如何调试会话。我读了一篇文章[PHP session Debugging](http://css.dzone.com/news/php-session-debugging)，但它超出了我的想象。

因此，就像其他问题一样，当我导航到应用程序中的另一个页面时，无论是通过链接还是表单提交，我的会话都会消失。我不知道为什么我的会话消失了。如果有人有时间帮助我调查，将不胜感激。

这些是我的 php.ini 设置

```
; Name of the session (used as cookie name).  
session.name = PHPSESSID  

; The path for which the cookie is valid.  
session.cookie_path = / 
```

这是显示的第一个视图

```
<?php
session_start();
if (!isset($_SESSION['session_id'])) {
    $_SESSION['session_id'] = session_id();
}
if (!isset($_SESSION['invoices'])) {
    $_SESSION['invoices'] = $invoices;
}

if (isset($_SESSION['session_id'])) {
    print_r($_SESSION['session_id'] . " in invoiceList.<br />");
} else {
    echo 'No session ID set in invoiceList <br />';
}
?>
<div>

    <table>
        <tr>            
            <th>Customer Name</th>
            <th>Invoice Date</th>
            <th>Invoice Number</th>
        </tr>
        <tr>
            <?php
            include_once 'form/editInvoice.php';
            if (isset($invoices)) {

                foreach ($invoices as $invoice) {
                    ?>
                <tr>
                    <td><?php echo $invoice['customer_name'] ?></td>
                    <td><?php echo $invoice['invoice_date'] ?></td>
                    <td><?php echo $invoice['invoice_number'] ?></td>
                    <td><a href='<?php echo $_SERVER['SCRIPT_NAME']; ?>/retrieve?class=InvoiceLineItems&amp;id=<?php echo $invoice['invoice_id']; ?>'><?php echo $invoice['invoice_id']; ?></a></td>
                </tr>
                <?php
            }
        } else {
            echo 'No invoices retrieved.';
        }
        ?>
        </tr>
    </table>
</div> 
```

这是包含的表格：

```
<?php
session_start();

if (isset($_SESSION['session_id'])) {
    print_r($_SESSION['session_id'] . "in editForm<br />");
} else {
    echo 'No session ID set in editForm <br />';
}

if (!$_POST) {
    ?>

<form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">
        <fieldset>
            <legend>Enter Updated PO Number</legend>
            <li>PO Number: <input type="text" name="po_number"/></li>
        </fieldset>
        <input type="submit" value="Submit" />
        <input type="button" onclick="alert('Changes Canceled.')" value="Cancel"/>
    </form>
<?php }
?> 
```

最后，当用户单击主页中的链接时的详细信息页面。

```
<?php
session_start();

if (isset($_SESSION['session_id'])) {
    print_r($_SESSION['session_id'] . "<br />");
} else {
    echo 'No session ID set invoice<br />';
}
?>

<h1>Invoice Detail</h1>
<div>
<?php
foreach ($partnerInfo as $info) {

    switch ($info['role_indicator']) {
        case 'remit_to':
            ?>
            <div id="remit">
                <ul>
                    <li>PLEASE REMIT TO:</li>
                    <li><?php echo $info['partner_name']; ?></li>
                    <li><?php echo $info['street_name']; ?></li>
                    <li><?php echo $info['city_name']; ?>, <?php echo $info['state']; ?> <?php echo $info['postal_code']; ?></li>

                </ul>
            </div>
            <?php break; ?>
        <?php case 'seller': ?>
            <div id = "seller" >
                <ul>
                    <li>Service Site:</li>
                    <li><?php echo $info['partner_name']; ?></li>
                    <?php
                    if ($info['partner_aux_info'] !== NULL) {
                        ?><li><?php echo $info['partner_aux_info']; ?>
                        <?php }
                        ?>
                    </li>
                    <li><?php echo $info['street_name']; ?></li>
                    <li><?php echo $info['city_name']; ?>, <?php echo $info['state']; ?> <?php echo $info['postal_code']; ?></li>
                    <li>(405)677-0221</li>
                </ul>        
            </div>
            <?php break; ?>
        <?php case 'sold_to': ?>
            <div id="buyer">
                <ul>
                    <li>Bill To: </li>
                    <li><?php echo $info['partner_name']; ?></li>
                    <li><?php echo $info['street_name']; ?></li>
                    <?php
                    if ($info['suite_info'] !== NULL) {
                        ?><li><?php echo $info['suite_info']; ?>
                        <?php }
                        ?>
                    </li>
                    <li><?php echo $info['city_name']; ?>, <?php echo $info['state']; ?> <?php echo $info['postal_code']; ?></li>
                </ul> 
            </div>   
            <?php break; ?>
        <?php
    }
}
?>
<h1>Line Items</h1>
<table>
    <th>PO Number</th>
    <th>PO Issued Date</th>
    <th>Description</th>
    <th>Service Start Date</th>
    <th>Service End Date</th>
    <th>Shipped Date</th>

    <?php foreach ($invoiceLineItems as $lineItem) { ?>
        <tr>
            <td><?php echo $lineItem['po_number']; ?></td>
            <td><?php echo $lineItem['po_issued_date']; ?></td>
            <td><?php echo $lineItem['line_item_name']; ?></td>
            <td><?php echo $lineItem['service_period_start']; ?></td>
            <td><?php echo $lineItem['service_period_end']; ?></td>
            <td><?php echo $lineItem['request_for_delivery']; ?></td>
        </tr>       
        <?php
    }
    ?>

</table>

</div> 
```

编辑：我删除了会话检查并更新了代码示例。我`<head>`在 index.php 中的标记之前添加了 session_start()。我已经验证我可以写入会话临时文件夹。

当我在控制器中执行此代码以使用新的采购订单号更新发票时，我达到了模型的功能，但会话消失了。

```
//If form is posted, update line items with PO number and date.
if (isset($_POST['po_number'])) {
    $this->invoice->update();
} 
```

当我到达会话变量分配时，我没有会话数据：

公共功能更新（）{

```
$con = $this->_getLocalConn();

$invoices = $_SESSION['invoices'];

try {
    $sqlUpdate = $con->prepare("UPDATE invoices 
                                SET po_number = ?, po_issued_date = ?
                                WHERE invoice_id = ?");

    foreach ($invoices as $record) {
        $sqlUpdate->execute(array(
            $_POST['po_number'],
            getdate(),
            $record['invoice_id']
        ));
    }
} catch (PDOException $e) {
    print $e->getMessage();
}
//get the PO number being used to update the records
//perform db update where po_number = input
//notify user of success and display updated records. 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T17:38:44.160

`session_start();`无论是否设置，每个 PHP 文件都应以开头`$_SESSION`。此功能将创建一个新会话或占用现有会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:49:27.927

所有需要会话信息的代码都应该以`session_start()`. `session_start()`需要在写入任何标题或其他输出之前发生。
然后为您处理设置和拆卸。

我这样做：

```
session_start();
$s = &$_SESSION; 
```

`$s`然后你可以像以前一样使用读/写`$_SESSION`

如果您正在执行自引用图像下载或其他可能最终想要并行执行的代码，那么不要启动会话或尽快关闭它`session_write_close()`会显着提升性能。
如果没有这个，会话本质上会使您的代码运行单线程。

编辑：说单线程可能是一个不好的选择。假设您有一个页面，其中包含三个 iframe，每个 iframe 加载不同（或相同）的 php 脚本。如果您使用会话，结果将是 iframe 一次加载一个，而不是一次全部加载。每个人都会锁定会话，而其他人将等待`session_start()`会话再次可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T18:20:20.067

当你第一次检查它时， No`$_SESSION`就开始了`if`。因此，它总是会失败。您必须调用`session_start()`PRIOR 才能对`$_SESSION`变量进行任何操作。更正您的代码。

第一页：

```
<?php
session_start();

/* Don't need this unless you really need the debugging
   Previously you where assigning variables that did not 
   exist to the the $_SESSION variables. Not what you want
   I imagine.

if (!isset($_SESSION)) {
    var_dump($_SESSION);

}
*/
... 
```

包括表格：

```
<?php
session_start();

if (isset($_SESSION['session_id'])) {
    print_r($_SESSION['session_id'] . "in editForm<br />");
} else {
    echo 'No session ID set in editForm <br />';
}
... 
```

详情页：

```
<?php
session_start(); //Notice a pattern here??

if (isset($_SESSION['session_id'])) {
    print_r($_SESSION['session_id'] . "<br />");
} else {
    echo 'No session ID set invoice<br />';
}
?> 
```

# database - 如何使用 Hibernate 在数据库表中存储字符串数组？

> ID：10821294
> 
> 赞同：1
> 
> 时间：2012-05-30T17:30:40.293
> 
> 标签：database, string, oracle

假设我有`array of`Strings `= {"testUser1", "testUser2", ... , "testUser28"}`，我如何将它存储在 oracle 数据库中，`varchar2`用作`userTableColumn`.

我的问题：

1.  例如，如何使用 Hibernate 将这个字符串数组存储在 oracle 数据库中（任何示例都将受到高度赞赏）？
2.  将存储此字符串数组的数据库列的数据类型应该是什么，现在我将其`varchar2`定义为?`clob``4000 bytes``varchar2``clob`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:36:51.410

您的 Oracle 数据库端应如下所示。

```
CREATE OR REPLACE TYPE string_array AS
VARRAY (30) OF VARCHAR2(1000);

CREATE TABLE my_table (my_array string_array); 
```

虽然无法为 Hibernate 提供示例。

# ios - Facebook API 和 iOS

> ID：10821297
> 
> 赞同：0
> 
> 时间：2012-05-30T17:30:44.647
> 
> 标签：ios, facebook, api, server-side

我有一个问题，因为我一直在谷歌上寻找答案，但我不知道如何正确表达它：P。

我正在使用 Facebook API 为 iOS 编写一个小应用程序。我希望应用程序在使用该应用程序的用户之间相互通信，而不是很多，只是一点点数据。Facebook 是否支持类似的东西，还是我必须实现自己的服务器端才能有这样的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:38:32.067

Facebook 不支持这样的东西。您将不得不为诸如此类的事情开发自己的后端。每个登录 Facebook 的应用程序用户都会在您的后端数据库中创建一个相应的用户，并存储该人的 Facebook ID。现在您正在构建自己的数据库，您可以在其中处理关系并相互通信。

# python - Python脚本到批处理文件

> ID：10821300
> 
> 赞同：3
> 
> 时间：2012-05-30T17:31:10.660
> 
> 标签：python, windows, batch-file

我有一个运行 python 脚本的批处理文件。我正在运行 Python 3.2。我想将 Python 脚本中的整数或字符串等变量发送回批处理文件，这可能吗？

我知道我可以接受 Python 脚本中的命令行参数`sys.argv`。希望有一些功能可以让我做相反的事情。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T17:41:16.530

在您的 Python 脚本中，只需写入标准输出：`sys.stdout.write(...)`

我不确定您使用的是什么脚本语言，也许您可​​以详细说明一下，现在我假设您使用的是[bash](http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29)（unix shell）。因此，在您的批处理脚本中，您可以将 python 脚本的输出转换为如下变量：

```
#run the script and store the output into $val
val = `python your_python_script.py`
#print $val
echo $val 
```

**编辑**事实证明，它是*Windows 批处理*

```
python your_python_script.py > tmpFile 
set /p myvar= < tmpFile 
del tmpFile 
echo %myvar% 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T17:41:02.877

如果一个`int`对你来说足够了，那么你可以使用

```
sys.exit(value) 
```

在你的 python 脚本中。以状态码退出应用程序`value`

在您的批处理文件中，您可以将其作为`%errorlevel%`环境变量读取。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T17:37:04.057

你不能“发送”一个字符串。您可以将其打印出来并让调用进程捕获它，但您只能直接返回 0 到 255 之间的数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T17:39:19.603

伊格纳西奥死了。您唯一可以返回的是您的退出状态。我之前所做的是让 python 脚本（在我的例子中是 EXE）输出下一个要运行的批处理文件，然后你可以输入你想要的任何值并运行它。调用 python 脚本的批处理文件然后调用您创建的批处理文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-03T16:34:37.297

您可以为此问题尝试此批处理脚本，例如：

```
@echo off

REM     %1 - This is the parameter we pass with the desired return code for the Python script that will be captured by the ErrorLevel env. variable.  
REM     A value of 0 is the default exit code, meaning it has all gone well. A value greater than 0 implies an error
REM     and this value can be captured and used for any error control logic and handling within the script

set ERRORLEVEL=
set RETURN_CODE=%1

echo (Before Python script run) ERRORLEVEL VALUE IS: [ %ERRORLEVEL% ]
echo.

call python -c "import sys; exit_code = %RETURN_CODE%; print('(Inside python script now) Setting up exit code to ' + str(exit_code)); sys.exit(exit_code)"

echo.
echo (After Python script run) ERRORLEVEL VALUE IS: [ %ERRORLEVEL% ]
echo. 
```

当您使用不同的返回码值运行它几次时，您可以看到预期的行为：

```
PS C:\Scripts\ScriptTests> & '\TestPythonReturnCodes.cmd' 5

(Before Python script run) ERRORLEVEL VALUE IS: [ 0 ]

(Inside python script now) Setting up exit code to 5

(After Python script run) ERRORLEVEL VALUE IS: [ 5 ]

PS C:\Scripts\ScriptTests> & '\TestPythonReturnCodes.cmd' 3

(Before Python script run) ERRORLEVEL VALUE IS: [ 0 ]

(Inside python script now) Setting up exit code to 3

(After Python script run) ERRORLEVEL VALUE IS: [ 3 ]

PS C:\Scripts\ScriptTests 
```

# jquery - 谷歌地图标记奇怪地拉伸问题

> ID：10821304
> 
> 赞同：7
> 
> 时间：2012-05-30T17:31:39.713
> 
> 标签：jquery, google-maps-api-3

我遇到了谷歌地图的奇怪行为（见附图）有人知道这是怎么回事吗？以前有人经历过吗？

![拖后](../Images/cdda2f02630e9d2151c4389973f3034e.png) ![关闭](../Images/a46d5ab9c3b6841515cee2cd862653cd.png) 下面的代码

```
<script>
<!--
    var map_geolocation;

    function savePosition_geolocation(point)
    {
        var input = document.getElementById("id_geolocation");
        input.value = point.lat().toFixed(6) + "," + point.lng().toFixed(6);
        map_geolocation.panTo(point);
    }

    function load_geolocation() {
        var point = new google.maps.LatLng(50.728632, 9.111587);

        var options = {
            zoom: 13,
            center: point,
            mapTypeId: google.maps.MapTypeId.ROADMAP
            // mapTypeControl: true,
            // navigationControl: true
        };

        map_geolocation = new google.maps.Map(document.getElementById("map_geolocation"), options);

        var marker = new google.maps.Marker({
                map: map_geolocation,
                position: new google.maps.LatLng(50.728632, 9.111587),
                draggable: true

        });
        google.maps.event.addListener(marker, 'dragend', function(mouseEvent) {
            savePosition_geolocation(mouseEvent.latLng);
        });

        google.maps.event.addListener(map_geolocation, 'click', function(mouseEvent){
            marker.setPosition(mouseEvent.latLng);
            savePosition_geolocation(mouseEvent.latLng);
        });

    }

    $(function() {
        load_geolocation();
    });

//-->
</script>
        <input type="hidden" name="geolocation" value="50.728632,9.111587" id="id_geolocation" /><div id="map_geolocation" style="width: 400px; height: 300px"></div> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-30T17:55:12.247

我见过各种形式的拉伸图块和扭曲的控件，但这是我第一次看到拉伸标记和阴影。如果我们幸运的话，将这些行添加到您的 CSS 或样式中将不会拉伸地图和标记。

```
 #map_geolocation label { width: auto; display:inline; }
 #map_geolocation img { max-height: none; max-width: none; } 
```

我尝试了您附加的代码，它看起来不错。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-07T16:30:49.377

你在使用推特引导程序吗？如果是这样，请尝试添加以下样式表。

```
div#map_geolocation img {
  max-width:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-11T04:34:40.233

**对于那些在Google Maps JavaScript API**的较新版本 (v3.33+) 2018-2019 上遇到此问题的人。我建议也查看这篇文章： [https](https://stackoverflow.com/a/54140395/8658147) ://stackoverflow.com/a/54140395/8658147 。

# ruby - 当我从我的任何项目中运行“gem list”时，我得到以下输出

> ID：10821305
> 
> 赞同：3
> 
> 时间：2012-05-30T17:31:42.930
> 
> 标签：ruby, gem

```
user@user:~/Workspace/fq$ gem list --local

*** LOCAL GEMS ***

bundler (1.0.21) 
```

为什么它没有显示我安装的所有 gem？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T17:46:48.133

你在用`rvm`吗？如果是这样，这些 gem 可能安装在不同的 gemset 下。

*   运行`rvm gemset list`以显示所有 gemset。
*   运行`rvm gemset use #{gemset_name}`以使用它`gemset_name`，然后`gem list`再次运行。

# facebook-graph-api - 如何获取与应用程序或 Facebook 用户关联的 Open Graph 对象？

> ID：10821307
> 
> 赞同：2
> 
> 时间：2012-05-30T17:32:02.400
> 
> 标签：facebook-graph-api, facebook-fql, facebook-opengraph

我最近设置了一个 Facebook 应用程序，这样我就可以向[“喜欢”事物的人发送消息](https://stackoverflow.com/a/10790503/165988)）。我设法弄清楚了那部分，但现在我又被难住了。

据我所知，`app_id`如果页面有一个`fb:app_id`打开的图元标记，则创建的每个打开的图形对象都将引用 a 。但是，我在 Open Graph API 中没有看到任何允许我获取与 app_id 关联的 Open Graph 对象列表的内容（[这个问题](https://stackoverflow.com/q/7211216/165988)有一些见解，但没有提供很多信息）。

或者，由于我知道这些页面将具有相似的 URL，因此我正在调查 FQL 以查看是否有可能找到 URL 与某些模式（使用`strpos`或`IN`运算符）匹配的页面。那里也没有运气（条件字段需要被索引）。

最后，我考虑使用`fb:admin`元标记，因为显然可以[查看用户管理的页面](https://stackoverflow.com/a/9628836/165988)。在这种情况下，我还没有弄清楚如何成为 Open Graph 对象的管理员，所以我又被难住了。

**是否有任何方法（无论多么迂回）来获取与 Facebook 应用程序或用户关联的开放图形对象？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T00:49:20.383

无法获取它知道与给定 app_id 相关联的对象列表（来自 Facebook）。Facebook 仅在抓取您的自定义 OG 对象时“知道”它们，并且仅在以您的 OG 对象为目标采取行动时才会抓取它们。跟踪给定应用程序的 OG 对象的最佳方法是跟踪创建这些操作的 OG API 调用的结果（您将获得一个 fb_action_id）。

与用户相同。您可以跟踪哪些用户与您的应用程序关联以响应对 FB.login 或 FB.getLoginStatus 的成功调用。您需要自己跟踪该用户执行的操作。

# android - 未找到 Apache 类定义

> ID：10821311
> 
> 赞同：1
> 
> 时间：2012-05-30T17:32:30.520
> 
> 标签：android, apache

我正在使用以下代码行

```
 ByteArrayBody bab = new ByteArrayBody(data, "/mnt/sdcard/p270.jpg"); 
```

它正在抛出以下豁免

```
 05-30 18:28:17.128: E/AndroidRuntime(5549): java.lang.NoClassDefFoundError: org.apache.http.entity.mime.content.ByteArrayBody 
```

我已经引用了 http-mime-4.1.2.jar （删除它并今天再次下载）。我还清理了项目并重建它。我仍然不断收到同样的错误。

我正在使用 Android 4.04 和 Eclipse。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:38:01.880

嗨，此[链接](https://stackoverflow.com/questions/6974670/java-android-class-not-found-exception)将帮助您解决问题，它会在您更新 sdk 时发生。将库文件包含到 libs 文件夹中会自动在最新的 android sdk 中被引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T00:46:13.733

将 jar 复制到项目中的 libs 目录。不要重命名 lib 文件夹。只需关闭 eclipse，在项目的主文件夹下创建新文件夹 libs，复制 libs 目录中的 jar，打开 eclipse，使用右键单击 libs 文件夹（这次在 eclipse 中）并选择 REFRESH，您添加的 jar 将出现。然后运行项目。就我而言，它起作用了。

# c++ - 如何使用非托管 EasyHook 从进程中的任何线程挂钩方法？

> ID：10821312
> 
> 赞同：5
> 
> 时间：2012-05-30T17:32:35.283
> 
> 标签：c++, hook, unmanaged, easyhook

我在让我的方法挂钩工作时遇到了一些问题。如果“我”调用被钩住的方法，我可以让钩子工作。但是当它在进程操作过程中自然发生时，它不会被钩住。我的问题可能源于我实际上是在我自己产生的线程中设置这些钩子。显然 LhSetInclusiveACL() 方法需要知道您要挂钩的线程。好吧，这是我的问题...

我真的不在乎哪个线程应用了钩子，我希望它们都被钩住。例如，假设我希望“gdi32.dll”库中的 CreateICW() 方法与整个进程“iexplorer.exe”挂钩。不仅来自线程 ID 号 48291 或其他。要知道哪些线程将调用您感兴趣的挂接例程，需要对您挂接的进程的内部工作有深入的了解。我推测这通常是不可行的，对我来说当然也不可行。因此，我不可能先验地知道需要挂钩哪些线程 ID。

以下代码取自“UnmanageHook”示例：

```
extern "C" int main(int argc, wchar_t* argv[])
{
    //...
    //...
    //...

    /*
        The following shows how to install and remove local hooks...
    */
    FORCE(LhInstallHook(
            GetProcAddress(hUser32, "MessageBeep"),
            MessageBeepHook,
            (PVOID)0x12345678,
            hHook));

    // won't invoke the hook handler because hooks are inactive after installation
    MessageBeep(123);

    // activate the hook for the current thread
    // This is where I believe my problem is.  ACLEntries is 
    // supposed to have a list of thread IDs that should pay
    // attention to the MessageBeep() hook.  Entries that are
    // "0" get translated to be the "current" threadID.  I want
    // ALL threads and I don't want to have to try to figure out
    // which threads will be spawned in the future for the given
    // process.  The second parameter is InThreadCount. I'm
    // kind of shocked that you can't just pass in 0 or -1 or
    // something for this parameter and just have it hook all
    // threads in that given process.
    FORCE(LhSetInclusiveACL(ACLEntries, 1, hHook));

    // will be redirected into the handler...
    MessageBeep(123);

    //...
    //...
    //...
} 
```

我在 LhSetInclusiveACL() 方法调用中添加了一些注释来解释这种情况。LhSetExclusiveACL() 和这些方法的“全局”版本似乎也没有帮助。

LhSetExclusiveACL 的文档供参考：

```
/***********************************************************************
Sets an exclusive hook local ACL based on the given thread ID list.
Global and local ACLs are always intersected. For example if the 
global ACL allows a set “G” of threads to be intercepted, and the 
local ACL allows a set “L” of threads to be intercepted, then the 
set “G  L” will be intercepted. The “exclusive” and “inclusive” 
ACL types don’t have any impact on the computation of the final 
set. Those are just helpers for you to construct a set of threads.

EASYHOOK_NT_EXPORT LhSetExclusiveACL(
   ULONG* InThreadIdList,
   ULONG InThreadCount,
   TRACED_HOOK_HANDLE InHandle);

Parameters:

   InThreadIdList
      An array of thread IDs. If you specific zero for an 
      entry in this array, it will be automatically replaced
      with the calling thread ID.

   InThreadCount
      The count of entries listed in the thread ID list. This
      value must not exceed MAX_ACE_COUNT!

   InHandle
      The hook handle whose local ACL is going to be set. 

Return values:

   STATUS_INVALID_PARAMETER_2
       The limit of MAX_ACE_COUNT ACL is violated by the given buffer.
***********************************************************************/ 
```

我用错了吗？我想这就是大多数实现如何使用这个库的方式，那么为什么这对我不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:58:23.717

您想改用 LhSetExclusiveACL。这意味着任何线程上的任何调用都会被挂钩，除了您在 ACL 中指定的调用。

# c++ - 没有身体的功能

> ID：10821314
> 
> 赞同：2
> 
> 时间：2012-05-30T17:32:40.720
> 
> 标签：c++, c, windows

我正在从随书“Windows via C\C++”附带的 CD rom 中分析这段代码，我遇到了这个声明

```
m_hSnapshot = CreateToolhelp32Snapshot(dwFlags, dwProcessID); 
```

DWORD 的位置`dwFlags`和位置`dwProcessID`

当我跳到这个函数的定义时，`CreateToolhelp32Snapshot`我发现了这个

```
HANDLE 
WINAPI
CreateToolhelp32Snapshot(
    DWORD dwFlags,
    DWORD th32ProcessID
    ); 
```

这种没有身体的功能怎么可能存在？

我尝试调试代码，但编译器并没有单步执行此函数，而是仅单步执行第一个语句，其中存储在 m_hSnapshot 中的值为 0x00000754。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T17:33:51.913

> 这种没有身体的功能怎么可能存在？

它没有。您所看到的只是一个[函数原型](http://en.wikipedia.org/wiki/Function_prototype)。身体在别处定义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T17:34:16.143

你看到的不是函数*定义*而是*声明*。实际定义由 Windows 本身的 dll 提供，链接到您的可执行文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T17:34:03.503

该函数有一个主体，但它只是不可见。

那只是声明。如果它是可见的，Windows 将是开源的（不要笑）。C++ 是一种编译语言。二进制文件是从代码生成的，代码本身不需要调用函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T17:34:18.783

主体可能位于不同的位置，例如在您链接的静态或动态库中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T17:34:46.467

它只是一个接受参数的函数，它可能在用户初始化后被其他地方的方法使用。当您说进入命令提示符并请求显示进程时，它看起来实际上只是获取要显示的进程 ID 的快照。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T17:35:43.517

是的，这只是在现有 Windows DLL (Kernel32.dll) 中定义的函数的原型

# lua - Lua 不加载库

> ID：10821316
> 
> 赞同：3
> 
> 时间：2012-05-30T17:32:49.990
> 
> 标签：lua

我决定用 Lua 添加脚本。我已经下载并编译了解释器。它工作正常，但是当我想使用 os.* 或 string.* 库中的任何函数时，它会说“尝试索引全局 'os'（一个 nil 值）”

这是我的代码，应该可以工作，但不能：

```
#include <iostream>
#include <Windows.h>
#include <string>

using namespace std;

extern "C" {
#include "..\liblua\lua.h"
#include "..\liblua\lualib.h"
#include "..\liblua\lauxlib.h"
}

int main(int argc, TCHAR* argv[])
{
    lua_State *LuaVM = luaL_newstate();

    lua_pushcfunction(LuaVM,luaopen_base);
    lua_call(LuaVM,0,0);
    lua_pushcfunction(LuaVM,luaopen_math);
    lua_call(LuaVM,0,0);
    lua_pushcfunction(LuaVM,luaopen_string);
    lua_call(LuaVM,0,0);
    lua_pushcfunction(LuaVM,luaopen_table);
    lua_call(LuaVM,0,0);

    int error;
    lua_pushstring(LuaVM,"Ver 0.525.5");
    lua_setglobal(LuaVM,"Version");

    while (true)
    {
        string strCode;
        getline(cin,strCode);
        error = luaL_loadbuffer(LuaVM,strCode.c_str(),strCode.length(),"") || 
            lua_pcall(LuaVM,0,0,0);
        if (error)
        {
            cout<< lua_tostring(LuaVM,-1)<<endl;
            lua_pop(LuaVM,1);
        }
    }

    lua_close(LuaVM);

    return 0;
} 
```

它出什么问题了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T18:05:21.823

在 Lua 5.2 中，标准`luaopen_*`函数*没有*设置相应的全局变量。

为什么不复制和调整代码`linit.c`或直接调用`luaL_openlibs`？

否则，做他们所做的：调用`luaL_requiref`每个`luaopen_*`函数。

请参阅[http://www.lua.org/source/5.2/linit.c.html#luaL_openlibs](http://www.lua.org/source/5.2/linit.c.html#luaL_openlibs)。

# jquery - 是否有任何选择器可以与文本完美匹配？

> ID：10821326
> 
> 赞同：6
> 
> 时间：2012-05-30T17:33:23.287
> 
> 标签：jquery

在 jQuery 上，我正在寻找一个类似的选择器，`:contains`但我需要对元素文本进行完美匹配。有没有？

```
<div>1</div>
<div>12</div>
<div>13</div>
<div>135</div> 
```

所以如果我寻找`text = 1`我只会得到第一个`div`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T17:36:44.540

你可以做一个：

```
$.extend($.expr[":"], {
    exactly: function( element, index, details, collection ){
        return $(element).text() === details[3];
    }
});

$("div:exactly(Foo)").addClass("red");
$("div:exactly(230)").addClass("blu"); 
```

小提琴：http: [//jsfiddle.net/jonathansampson/YUQLF/](http://jsfiddle.net/jonathansampson/YUQLF/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T17:34:26.657

可以这样做：

```
var str = "whatever";

$(".elements").filter(function() {
    return $(this).text() == str;
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T17:34:43.517

```
var search = '1';
$('div').filter(function() {
  return $(this).text()  == search;
}).css('background','#f00'); 
```

**[演示](http://jsfiddle.net/thecodeparadox/LUrep/3/)**

# firefox - 为什么 Firefox 的最小宽度最小为 615 像素？

> ID：10821329
> 
> 赞同：3
> 
> 时间：2012-05-30T17:33:38.470
> 
> 标签：firefox, media-queries, css

我对媒体查询非常陌生，所以我在我的 Firefox 12.0 中使用 min-width: 属性并注意到它只是不起作用。在玩了一些游戏并尝试了这个可爱的网站之后

[http://barrow.io/lab/media-query-viewport/](http://barrow.io/lab/media-query-viewport/)

我发现我的 Firefox 在我的机器（它是一个 XP 盒子）上支持的最小最小宽度是 615px。为什么？我正在尝试使用媒体查询，以便我可以制作一个在许多设备和台式机上运行良好的网站。这包括 480 和 320 像素宽的设备。由于 Firefox 不允许我测试较小的宽度，这将严重影响我的开发。

除了尝试不同的浏览器之外，还有什么解决方法吗？

谢谢。

编辑：现在我的 Firefox 已经经历了一些升级（现在是 v22），这不再是一个问题。我很高兴它得到了修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:51:34.573

截至目前： http: [//support.mozilla.org/en-US/questions/772847#answer-125895，Firefox](http://support.mozilla.org/en-US/questions/772847#answer-125895)支持不超过 480 的宽度，因此如果您想测试 320 像素，则必须使用不同的浏览器. 我要指出的是，如果您想在您的网站上测试智能手机，您应该在智能手机硬件上使用智能手机浏览器……而不仅仅是将桌面浏览器设置为非常小的分辨率，这听起来像是您正在尝试做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T13:38:31.547

有一个简单的解决方法：将网站加载到所需宽度的 iframe 中。

哦，至于为什么，您观察到的行为是由于 Firefox 用户界面由于某种原因没有缩小到某个宽度以下。通常是由于扩展与 UI 混淆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-23T05:50:32.057

这是简单的解决方案

从这里安装 chromEditPlus 插件[http://webdesigns.ms11.net/chromeditp.html](http://webdesigns.ms11.net/chromeditp.html)

然后转到工具-> ChromEdit Plus-> ChromEdit 选择 userChrome.css 面板

复制并粘贴以下代码保存然后重新启动

```
@namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"); /* only needed once */

    #main-window:not([chromehidden~="toolbar"]) {
      min-width: 200px !important;
    } 
```

从而解决了问题，这使您的窗口最小为 200px

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-07T18:23:37.753

使用 Web Developer 工具栏扩展，您可以通过选择 Resize > View Responsive Layouts 查看常用屏幕尺寸的选择

# bluetooth - 与来自 FTDI vinculum 2 USB 主机控制器的 USB 蓝牙加密狗进行通信

> ID：10821332
> 
> 赞同：1
> 
> 时间：2012-05-30T17:33:43.723
> 
> 标签：bluetooth, usb

我被要求弄清楚如何使用 FTDI Vinculum 2 (VNC2) USB 控制器通过现成的加密狗（在本例中为使用 Broadcom BCM2045 芯片的加密狗）实现蓝牙通信。我为 VNC2 编写了自定义固件，以与 VNC2 作为主机的通用 USB 设备进行通信，并且我可以成功地从加密狗读取 VID 和 PID 以及 USB 设备类、子类和协议。我还可以使用批量数据端点将数据发送到加密狗，我相信设备正在接收，尽管我目前无法判断。

所以我相信我可以与加密狗通信，问题是我不知道要与它通信什么才能将其设置为可发现模式或将其与另一个可发现设备配对，也不知道如何通过无线链路实际传输数据一旦配对。我什至不知道是否存在针对此类事物的标准通信协议，或者每个设备是否都会有所不同。我对蓝牙协议栈有一个模糊的理解，我的理解是我不需要完全理解这一点，因为它应该在一端的加密狗和我们希望连接到的安卓智能手机中实现另一端。就像我说的，我目前可以将数据发送到批量端点，

简而言之，如果可能的话，我需要知道通过 USB 总线发送哪些数据来控制任何通用蓝牙加密狗或至少一个特定的蓝牙加密狗。我有一个 USB 端口嗅探器，但使用加密狗进行通信时输出的复杂性令人震惊，我怀疑我永远不会弄明白。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:59:25.840

蓝牙加密狗使用蓝牙规范中定义的 HCI（主机控制接口）与主机软件堆栈通信。作为参考，您可以查看开源 BlueZ 堆栈（标准 linux 堆栈）的源代码。您可以在 Linux 上运行 BlueZ 与您的 USB 加密狗交谈，并使用[hcidump](http://linuxcommand.org/man_pages/hcidump8.html)捕获通过 HCI 的实际数据包。您还可以查看 hcitool 和 hciconfig 以执行特定操作。

# c - 如何在Opencv和C中找到图像轮廓的角坐标

> ID：10821335
> 
> 赞同：3
> 
> 时间：2012-05-30T17:33:56.700
> 
> 标签：c, image-processing, opencv, computer-vision

我必须找到图像的角点，以便将其裁剪为矩形。我已经找到了轮廓并在其上使用了 approxpoly() 函数。现在如何找到轮廓的角坐标？这是我的 C 代码->

```
#include <cv.h>
#include <highgui.h>

int main(int argc, char** argv)
{
IplImage *img,*gray;

if((img = cvLoadImage("save.jpg", 1)) == NULL)
{
    printf("A Img open error\n");
}

gray=cvCreateImage( cvGetSize(img), IPL_DEPTH_8U, 1 );
cvCvtColor(img,gray,CV_BGR2GRAY);

IplImage* out_median = cvCreateImage(cvGetSize(gray),IPL_DEPTH_8U,1);
cvSmooth( gray,out_median,CV_MEDIAN,3);

IplImage* out_threshold = cvCreateImage( cvGetSize(out_median), out_median->depth, 1);
cvThreshold(out_median,out_threshold,1,255,CV_THRESH_BINARY);

CvMemStorage* storage = cvCreateMemStorage();
CvSeq* first_contour = NULL;

cvFindContours(out_threshold,storage,&first_contour,sizeof(CvContour),CV_RETR_LIST,CV_CHAIN_APPROX_SIMPLE);

CvSeq* approx_polygon = NULL;
approx_polygon=cvApproxPoly(first_contour,sizeof(CvContour),storage,CV_POLY_APPROX_DP,0.01*cvArcLength(first_contour,CV_WHOLE_SEQ, 1),0);

    //cvDrawContours(out_threshold,approx_polygon,cvScalarAll(255),cvScalarAll(255),100);
//cvShowImage("Contours", out_threshold );
//cvSaveImage("save_approxpoly_contour.jpg",out_threshold);

cvWaitKey(0);
return 0; 
```

}

这是我应用 Approxpoly() 后的轮廓图像 ![在此处输入图像描述](../Images/c9e9c9f6fbf7966dddd20e677a5b15cc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:18:27.993

我推荐使用[cvBlob](http://code.google.com/p/cvblob/)：

获取斑点：

```
cvThreshold(&src, &dst, 10, 255, CV_THRESH_BINARY);
IplImage *labelImg = cvCreateImage(cvGetSize(&dst),IPL_DEPTH_LABEL,1);
CvBlobs blobs;
unsigned int result = cvLabel(&dst, labelImg, blobs); 
```

如果您有多个项目，请找到限制

```
int borders[4];
borders[0] = 99999; //left
borders[1] = 99999; //top
borders[2] = 0;  //right
borders[3] = 0;  //bottom

for (CvBlobs::const_iterator it=blobs.begin(); it!=blobs.end(); ++it)
{   
    if((*it).second->maxx) < borders[0]){
        borders[0] = (*it).second->maxx; 
    }
    if(((*it).second->miny) < borders[1]){
        borders[1] = (*it).second->miny;
    }
    if((*it).second->minx) > borders[2]){
        borders[2] = (*it).second->minx;
    }
    if(((*it).second->maxy) > borders[3]){
        borders[3] = (*it).second->maxy;
    }
} 
```

# android - 查看背景颜色被忽略

> ID：10821336
> 
> 赞同：0
> 
> 时间：2012-05-30T17:33:58.957
> 
> 标签：android, android-layout

我有这个（a的一部分）布局：

```
<ScrollView android:layout_width="0dip" android:layout_height="fill_parent"
    android:layout_weight="0.8">
    <HorizontalScrollView android:id="@+id/paint_board_container" 
        android:layout_width="fill_parent" android:layout_height="wrap_content">
        <View android:layout_width="wrap_content" android:layout_height="fill_parent"
            android:background="@android:color/white"/>
    </HorizontalScrollView>
</ScrollView> 
```

最内层视图的背景颜色设置为白色，但我在屏幕上看不到它，即使它的布局宽度也设置为 fill_parent。哪里有问题？谢谢。

更新布局：

```
<ScrollView android:layout_width="0dip" android:layout_height="fill_parent"
    android:layout_weight="0.8" android:fillViewport="true" 
    android:background="#00FF00">
    <HorizontalScrollView android:id="@+id/paint_board_container" 
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:fillViewport="true"
        android:background="#FF0000">
        <View android:layout_width="2000dip" android:layout_height="1000dip"
            android:background="@android:color/white"/>
            <!-- android:minWidth="100dip" android:minHeight="100dip"/> -->
    </HorizontalScrollView>
</ScrollView> 
```

现在我看到了垂直滚动视图，但没有看到水平滚动视图，即使最里面的视图的宽度设置为 2000dip。如何使水平滚动视图显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:38:32.550

默认情况下， A`View`的宽度和高度为 0。由于 的`HorizontalScrollView`高度为`wrap_content`，因此它也将其高度设置为 0。给内部视图一个非零的最小宽度和高度，你应该在屏幕上看到一些白色。

# c++ - 传递 fstream ">>" 作为函数参数

> ID：10821337
> 
> 赞同：0
> 
> 时间：2012-05-30T17:34:02.147
> 
> 标签：c++, operators, iostream

我正在编写一个程序来读取每行包含两个值的文件。这些值应该存储在两个向量中，xVals 和 yVals。因此我使用 push_back 函数，但我希望我的代码更漂亮。现在是这样的：

```
ifstream file;
file.open("foo.txt");
double TempVal;
while(file >> TempVal){
    xVals.push_back(TempVal);
    file >> TempVal;
    yVals.push_back(TempVal);
} 
```

我目前正在寻找的是这样的解决方案（只是重要的一行）：

```
while(file >> xVals.push_back(??) >> yVals.push_back(??)) 
```

问号代表“我不知道如何获得通过“>>”传递的值......有没有简单（比上面的三行更容易）或更好的方法来实现这一点？:-)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T17:36:25.640

你可以这样做：

```
double tempX, tempY;
while( file >> tempX >> tempY )
{
    xVals.push_back(tempX);
    yVals.push_back(tempY);
} 
```

如果你真的想要一些*漂亮*的东西，你会定义一个`Point`执行流提取/插入的类，然后只使用一个算法：

```
std::vector<Point> points;
std::copy(
    std::istream_iterator< Point >( file ), std::istream_iterator< Point >()
  , std::back_inserter( points )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:51:29.930

为了避免使用`TempVal`您可以直接对向量实例进行操作：

```
while(file.good() && !file.eof())
{
    xVals.resize(xVals.size() + 1,0.0);
    yVals.resize(yVals.size() + 1,0.0);
    file >> xVals.back() >> yVals.back();
} 
```

# php - Mediawiki，从扩展的特殊页面中的表单更新数据库

> ID：10821340
> 
> 赞同：0
> 
> 时间：2012-05-30T17:34:03.910
> 
> 标签：php, forms, mediawiki

我正在开发一个 Mediawiki 扩展。它由一个特殊的页面组成，该页面有一个由用户填写的表格。使用表单的数据，我的扩展应该更新数据库的一个特殊表。

问题是我不知道在哪里指向表格。我不能把它指向类似的东西，`$IP/extensions/myExtension/processData.php`因为我需要使用 MediaWiki API 的功能，所以它必须是 wiki 的一部分。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:27:07.360

最后，我将表单的输出发送到同一页面。您可以通过将`action`字段留空或使用页面地址填充它来执行此操作，使用以下内容：

```
$this ->getTitle()->escapeLocalURL() 
```

要处理数据，您必须检查是否存在发布请愿书，然后解析结果并执行所需的任何操作：

```
if ($this -> getRequest() -> wasPosted()){
    $value = $this -> getRequest() -> getVal("first_field");
    // ... 
```

# magento - 仅使用前 4 位数字验证邮政编码

> ID：10821346
> 
> 赞同：1
> 
> 时间：2012-05-30T17:34:24.177
> 
> 标签：magento, csv

我正在使用表格费率来分配 Magento 中的运费。我们的邮政编码格式如下：XXXX-XXX。是否有任何“简单”的方法可以更改验证，以便为 1234-234 分配与 1234-678 相同的运费而无需明确执行？我想像这样填写 tablerates.csv 文件：

```
Country,Region/State,"Zip/Postal Code","Order Subtotal (and above)","Shipping Price"
US,*,1234,20,5 
```

并且系统会将 5 作为运费分配给 1234-234，因为 1234 包含在 1234-234 中。

我在想象 Magento 文件中某处从“如果 clientzip = csvzip”到“如果 clientzip like 'csvzip%”的简单更改......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:27:12.560

我找到了解决方法。我的国家没有在数据库中设置区域，所以我将三个相关区域添加到我的国家（以运费而言）。

插入到`db_magento`. `directory_country_region`( `region_id`, `country_id`, `code`, `default_name` ) 值 ( NULL , 'CountryCode', 'RegionCode', 'Region Name')

现在系统自动强制填写“州/省”字段。

# ruby-on-rails-3 - ActiveRecord 合并同一模型的数据集？

> ID：10821351
> 
> 赞同：1
> 
> 时间：2012-05-30T17:34:41.637
> 
> 标签：ruby-on-rails-3, activerecord

我有一个模型，假设是 Ad，我计划从中获取 2 个数据集，然后将它们合并为 1 个。这可能吗：

```
ads = Ad.where(etc).limit(5)

if ads.length < 5
  merge = Ad.where(etc).limit(remainder)

// merge both here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:54:57.193

ActiveRecord 允许您进行链接。试试这个，它只会执行一个查询。

```
ads = Ad.where(etc).limit(5)
ads = ads.where(etc).limit(remainder) 
```

但是在您的情况下，您调用该`length`方法，因此它将执行两个查询。但是，您仍然可以进行链接。用户`count`方法比`length`方法更好，因为`count`它将发送`COUNT(*)`到您的数据库（更快）。`length`将根据`where`条件加载所有记录并对数组进行计数（较慢）。

```
ads = Ad.where(etc).limit(5)
if ads.count < 5
  ads = ads.where(etc).limit(remainder)
end 
```

# eclipse - 无法下载 API Bundle 谷歌插件应用引擎

> ID：10821352
> 
> 赞同：0
> 
> 时间：2012-05-30T17:34:42.973
> 
> 标签：eclipse, google-app-engine, google-api

当我去添加 Google API 并单击要下载的任何 API 时，我收到以下错误“下载 API 包时出现问题，请参阅错误日志了解更多详细信息”任何人都可以帮我找出可能出了什么问题吗？这个日志位置在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:56:51.020

可以通过单击窗口 - 错误日志来访问错误日志。

服务器当前出现故障并返回 HTTP 错误 502（网关错误）。不过，这应该是一个暂时的问题，一切都应该很快恢复正常。

# deployment - 带有 2 个网站的 Azure 部署循环了很长时间

> ID：10821356
> 
> 赞同：0
> 
> 时间：2012-05-30T17:35:08.330
> 
> 标签：deployment, azure

我在 Visual Studio 2010 中使用 azure 进行部署，当我有 2 个网站时遇到了这个问题。

只有 1 个网站，部署成功运行。

帮助！！！！！！！！！

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="RIS2048.ConsultaClick.Web.Azure1" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition">
  <WebRole name="RIS2048.ConsultaClick.Web" vmsize="Small">
    <Sites>
      <Site name="PT" physicalDirectory="..\RIS2048.ConsultaClick.WWWPacientes">
        <VirtualDirectory name="images" physicalDirectory="..\RIS2048.ConsultaClick.WWWPacientes\imgpt" />
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" hostHeader="pt.consultaclick.com" />
        </Bindings>
      </Site>
      <Site name="RO" physicalDirectory="..\RIS2048.ConsultaClick.WWWPacientes">
        <VirtualDirectory name="images" physicalDirectory="..\RIS2048.ConsultaClick.WWWPacientes\imgro" />
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" hostHeader="ro.consultaclick.com" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InternalEndpoint name="Endpoint1"  protocol="http" port="80" />
   </Endpoints>
    <Imports>
      <Import moduleName="Diagnostics" />
      <Import moduleName="RemoteAccess" />
      <Import moduleName="RemoteForwarder" />
    </Imports>
  </WebRole>
</ServiceDefinition> 
```

使用 Intellitrace 和远程桌面后，在事件查看器中发现以下内容：

[https://picasaweb.google.com/112383217404623421937/Dropbox#](https://picasaweb.google.com/112383217404623421937/Dropbox#)

在系统部分：

由于“time.windows.com,0x9”上的 DNS 解析错误，NtpClient 无法设置手动对等方以用作时间源。NtpClient 将在 15 分钟后重试，然后将重试间隔加倍。错误是：没有这样的主机是已知的。(0x80072AF9)

VSP 拒绝使用协议版本“3.2”的尝试。

属于站点“1”的应用程序“/”设置了无效的 AppPoolId“DefaultAppPool”。因此，该应用程序将被忽略。

站点 1 被禁用，因为为站点定义的根应用程序无效。有关根应用程序无效的原因的信息，请参阅前面的事件日志消息。

与 Spooler 系统服务通信时出错。打开服务管理单元并确认打印后台处理程序服务正在运行。

SLUINotify 服务因以下错误而终止：找不到指定的模块。

天蓝色部分：

发生未处理的异常。进程 ID：3024 进程名称：WaIISHost 线程 ID：1 AppDomain 未处理的异常异常：E:\sitesroot\3

服务器堆栈跟踪：在 System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc) 在 System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)。 System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 在 System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 处的 Object[] ins, Object[] outs)

在 [0] 处重新抛出异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 在 IConfigurator.Deploy( Microsoft.WindowsAzure.Hosts.WaIISHost.Program.Main(String[] args) 上的字符串 roleId、WebAppModel webAppModelPath、字符串 roleRootDirectory、字符串 sitesDestinationRootDirectory、字符串 diagnosticsRootDirectory、字符串 roleGuid、字典`2 globalEnvironment) at ConfiguratorClient.Deploy(String roleId, WebAppModel webAppModelPath, String roleRootDirectory, String sitesDestinationRootDirectory, String diagnosticsRootDirectory, String roleGuid, Dictionary`2 globalEnvironment)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:59:22.237

您应该尝试找出导致问题的原因。您可以尝试配置远程桌面并连接到您的实例之一吗？验证事件查看器以查看应用程序日志中是否有任何错误或警告。

在这些情况下，我经常因为骑自行车而与远程桌面会话断开连接，但您仍然应该尝试一下，如果运气好的话，您将能够找出问题的原因。

或者，您可以尝试将 DiagnosticsManager 配置为每 1 分钟发送一次 Windows 日志以跟踪问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T11:47:38.373

问题是我正在解析主机头（pt.example.com）上的请求并从 cck.azure.com 访问，因此主机头无效（我应该从 pt.example.com 访问并拥有我购买的域将 pt.example.com 重定向到 cck.azure.com).......

# c# - ToArray() 在不同的方法中

> ID：10821358
> 
> 赞同：0
> 
> 时间：2012-05-30T17:35:16.163
> 
> 标签：c#

我有一个名为的数组`mainDeck`，它保存一副扑克牌的值。接下来我要做的是将该数组中的卡片分发到两个名为的单独数组中`playerDeck`，`computerDeck`并且每个卡片组必须包含一张唯一的卡片。

我遇到的问题是分配具有唯一价值的卡片 - 每副牌 26 张卡片。我尝试了几种不同的方法，评论底部的编码是我在不得不离开上课之前尝试做的最后剩余的事情。

注意：我的编程技能仅限于请解释您的答案，而不是仅仅提供解决方案，因为这并不能进一步加深我的理解。

```
static void Main(string[] args)
{
        // 1 = Ace , 13 = King : 0 = Hearts, 1 = Diamonds, 2 = Clubs, 3 = Spades
        int[] mainDeck = new int[52];
        FillDeck(mainDeck);

        int[] playerDeck = new int[26];
        int[] computerDeck = new int[26];
        // Check mainDeck elements
        foreach (int number in mainDeck)
        {
            Console.WriteLine(number);
        }

    }
    public static void FillDeck(int [] mainDeck)
    {
        int cardType = 1;
        List<int> deck = new List<int>();            

        // Add cards to a list
        for (int x = 0; x < 13; x++)
        for(int y = 0; y < 4; y++)
        {
            deck.Add(cardType);
            if (y == 3)
                ++cardType;
        }

        // Insert deck list into a new Array
        int[] cards = deck.GetRange(0, 52).ToArray();

        // Add cards array to mainDeck
        for (int x = 0; x < 52; ++x)
        {
            mainDeck[x] = cards[x];
        }
    }
    //public static void Distribute()
    //{
    //    RandomNumber number = new RandomNumber();
    //    int value = number.RandomNum;

    //    List<int> playerCards = new List<int>();
    //    for (int x = 0; x < 2; ++x)
    //    {
    //        Console.WriteLine(number.RandomNum);
    //    }
    //}
}
//class RandomNumber
//{
//    private int randomNum;
//    Random ranNumberGenerator;

//    public RandomNumber()
//    {
//        ranNumberGenerator = new Random();
//    }

//    public int RandomNum
//    {
//        get
//        {
//            randomNum = ranNumberGenerator.Next(1, 26);
//            return randomNum;
//        }
//    }
//} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:42:53.693

如果您尝试像在典型纸牌游戏中那样随机分配纸牌，这里有一篇关于洗牌的文章。- [http://www.dotnetperls.com/shuffle](http://www.dotnetperls.com/shuffle) - 它应该做你想做的事。

在你洗牌 mainDeck 数组后，你只需循环遍历它，以与现实生活中发牌相同的方式将牌交替分配给玩家牌组和计算机牌组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T17:44:05.840

纸牌游戏套牌的通用解决方案

1.  使用所有可用卡创建套牌
2.  洗牌
3.  从顶部获取卡片

所以代码:)

```
public enum CardColor
{
  Hearts = 0,
  Diamonds = 1,
  Clubs = 2,
  Spades = 3
}

public enum CardValue
{
  Ace = 1,
  Two,
  Three,
  Four,
  Five,
  Six,
  Seven,
  Eight,
  Nine,
  Ten,
  Jack,
  Queen,
  King
}

public class Card
{
  public Card(CardValue value, CardColor color)
  {
    Value = value;
    Color = color;
  }

  public readonly CardValue Value;
  public readonly CardColor Color;
}

public class Deck
{
  private Queue<Card> deckInternal;

  public Deck()
  {
    var deck = new List<Card>();
    for(int index = 0; index < 52; index++)
    {
      var cardValue = (CardValue)(index % 4) + 1;
      var cardColor = (CardColor)index / 4;
      dec.Add(new Card(cardValue, cardColor));
    }

    var rand = new Random();
    dec = dec
      .OrderBy(c => rand.Next(52))
      .ToList();

    deckInternal = new Queue<Card>(deck);
  }

  public Card GetCard()
  {
    return deckInternal.Dequeue();
  }
} 
```

获取甲板并将其拆分，您可以下一步

```
var deck = new Deck();

var player = new List<Card>();
var computer = new List<Card>();

for(int index = 0; index < 52; index++)
{
  if(index % 2 == 0)
  {
    player.Add(deck.GetCard());
  }
  else
  {
    computer.Add(deck.GetCard());
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T17:52:55.467

您有两个选项可以在此处保持牌组中的值唯一。您可以创建一个表示卡片的新类，它具有等级和花色的属性，或者如果您想保持简单（无论如何从编译器的角度来看），您可以使用该值来指示等级和花色，而您' 仅使用 1 到 13 来表示排名。

对于后一种解决方案，您可能希望使用数字 0 到 12 表示 A 到红心 K，13 到 25 表示 A 到方块 K，依此类推。获得您将使用的任何卡片的等级`card % 13`并获得您将使用的卡片的花色`card / 4`。

不过，我更喜欢前一种解决方案，并且会创建一个这样的类（您也可以用 Enums 替换 int 属性以获得更高的可读性）：

```
public class Card
{
    public int Rank { get; set; }
    public int Suit { get; set; }
} 
```

之后，您可以创建一个循环，该循环一直运行直到主牌组为空，并从主牌组中随机选择一张牌放入其他两个牌组。在伪代码中，它可能看起来像：

```
while (mainDeck has any elements)
    num = random number between 0 and elements in mainDeck - 1, inclusive
    deckToAddTo = alternate between playerDeck and computerDeck
    remove card num from mainDeck and insert into deckToAddTo 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T17:47:29.693

给玩家前 26 张牌。

```
playerDeck = mainDeck.Take(26).ToArray(); 
```

跳过玩家的牌并获得接下来的 26 张牌。

```
computerDeck = mainDeck.Skip(26).Take(26).ToArray(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T17:54:47.587

```
Random  rnd = new Random();
// you can Shuffle Array and Take random 26 items using Linq as below
int[] playerDeck = mainDeck.OrderBy(x => rnd.Next()).Take(26).ToArray();
// get rest of the items using Except linq method 
int[] computerDeck = mainDeck.Except(playerDeck).ToArray(); 
```

# ios - 在推送到 UINavigationController 时停止 UITableView 动画

> ID：10821359
> 
> 赞同：1
> 
> 时间：2012-05-30T17:35:32.903
> 
> 标签：ios

我正在将一个包含 tableiview 的视图控制器推到我的 uinavigation 控制器上：

```
CourseMenuViewController *mvc = [[[CourseMenuViewController alloc] initWithSlidingNavigationcontroller:self.slidingNavigationController] autorelease];
mvc.course = course;
[self.navigationController pushViewController:mvc animated:YES];
[self.navigationController setNavigationBarHidden:NO animated:NO]; 
```

到目前为止一切顺利，一切都按预期工作。当我观看动画并看到我的所有表格视图行从屏幕顶部向下动画时，就会出现我的问题，因为视图是从左侧进入动画的。这让人感觉视图从左上角沿对角线路径移动到右下角。

我的问题是，我怎样才能让表格视图只出现而不是动画？我应该补充一点，我的所有单元格都是静态的，所以我不会等待来自 NSFetchedResultsController 或类似的任何数据。

下面的 roronoa 让我走上了正确的道路，这是现在工作的版本：

```
CourseMenuViewController *mvc = [[[CourseMenuViewController alloc] initWithSlidingNavigationcontroller:self.slidingNavigationController] autorelease];
mvc.course = course;

CATransition *caTransition = [CATransition animation];
caTransition.duration = 0.35;
caTransition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
caTransition.delegate = self;
caTransition.type = kCATransitionPush;
caTransition.subtype = kCATransitionFromRight;
[self.navigationController.view.layer addAnimation:caTransition forKey:nil];

[self.navigationController pushViewController:mvc animated:NO]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:15:28.400

您没有提到有关您的课程 CourseMenuViewController 和 initWithSlidingNavigationcontroller 的详细信息，但您可以使用以下内容来完成工作：-

```
CourseMenuViewController *mvc =[[CourseMenuViewController alloc] init];
[UIView  beginAnimations:nil context:NULL];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationDuration:1.0];
[self.navigationController pushViewController:mvc animated:NO];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];
[UIView commitAnimations];
[mvc release]; 
```

通过根据需要更改动画常量，您可以在上面的代码中拥有任何类型的动画，而不会在 tableview 上出现不需要的动画。

# java - 评估复选框布尔值

> ID：10821360
> 
> 赞同：18
> 
> 时间：2012-05-30T17:35:33.630
> 
> 标签：java, swing, awt, jcheckbox

我确信这是一个非常简单的问题，但我无法在任何地方找到答案。我有一个 JCheckbox，我需要评估其布尔值，然后使用 if 语句更改该值。问题是我在任何地方都找不到用于评估 JCheckbox 内容的语法，更不用说更改它了。这可能真的很容易，但我似乎找不到任何有用的东西。谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-30T17:38:47.903

[这个](https://stackoverflow.com/questions/3599908/how-to-check-that-a-jcheckbox-is-checked)SO 线程可以回答你的问题。如果你`JCheckBox`的名字是“Foo”，你会检查它的值

```
Foo.isSelected() 
```

要设置它的值，你可以使用

```
Foo.setSelected(true) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-30T17:38:58.870

你的意思是如何检查复选框是否被选中，如果是，那么使用[`isSelected`](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#isSelected%28%29)

```
boolean isSelected = jCheckBox.isSelected();

if(isSelected ){
   jCheckBox.setSelected(false);
} else {
   jCheckBox.setSelected(true);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T17:41:29.547

Sun 提供了一个很棒的[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)，您可以阅读它来完善您的知识。如果你想知道一个 JCheckbox 的当前选择状态，只需使用方法`isSelected()`.

# c - 使用 libgit2 进行 Git 结帐

> ID：10821362
> 
> 赞同：4
> 
> 时间：2012-05-30T17:35:36.730
> 
> 标签：c, git, git-checkout, libgit2

这个问题是我之前的问题的演变或解决方案：[Clone a git repo (indepth)](https://stackoverflow.com/questions/10642629/clone-a-git-repo-in-depth)我认为在这种情况下创建一个新问题是最好的做法，但我可能错了。

这很简单：我将如何做`git checkout master`与[libgit2相当的事情](https://github.com/libgit2/libgit2)

一年前似乎不可能：[https](https://github.com/libgit2/libgit2/issues/247) ://github.com/libgit2/libgit2/issues/247 据此，至少 5 个月前可以进行克隆。但我从未见过任何关于如何做到这一点的[代码](https://github.com/libgit2/libgit2/tree/development/src)、[文档](http://libgit2.github.com/libgit2/)或[示例。](https://github.com/libgit2/libgit2/issues)**（编辑）**我的意思是我没有看到任何关于包含完整克隆的信息`git checkout`，也没有看到任何关于结帐的代码/文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T19:02:45.567

> According to this a clone was possible at least 5 months ago. But I have never seen any code, documentation or examples about how to do it.

The **clone** operation is basically made of four steps:

*   Initialize a new repository
*   Add a remote with a fetch refspec
*   Fetch the packfile from the remote and update your local references
*   Update the content of the workdir from the commit tree of the HEAD

Current version of libgit2 (v0.17.0) allows one to perform the three first steps.

The source code contains some **[examples](https://github.com/libgit2/libgit2/tree/development/examples)**. There's a **["fetch.c"](https://github.com/libgit2/libgit2/blob/development/examples/network/fetch.c)** one as well.

> how would I do something equivalent of git checkout master with libgit2

**Checkout is not implemented yet**. However, the following should help you go forward.

*   `git_reference_name_to_oid()` to retrieve the oid of the `master` branch
*   `git_commit_lookup()` to retreive a commit from an oid
*   `git_commit_tree()` to retrieve the tree of a commit
*   `git_iterator_for_tree()` to recursively browse all the leafs of the tree (and its subtrees)

## Update

The clone feature has just been **[merged](https://github.com/libgit2/libgit2/pull/778)** into the libgit2 repository.

*   **[clone.h](https://github.com/libgit2/libgit2/blob/eb87800ab631d19a7655f01ece130455b1cc976a/include/git2/clone.h)** header
*   sample code usage in **[examples/network/clone.c](https://github.com/libgit2/libgit2/blob/eb87800ab631d19a7655f01ece130455b1cc976a/examples/network/clone.c)**

As part of the pull request, the author took care of providing the users with a checkout implementation as well.

*   **[checkout.h](https://github.com/libgit2/libgit2/blob/eb87800ab631d19a7655f01ece130455b1cc976a/include/git2/checkout.h)** header
*   checkout related **[unit tests](https://github.com/libgit2/libgit2/blob/eb87800ab631d19a7655f01ece130455b1cc976a/tests-clar/checkout/checkout.c)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T15:04:41.873

您可以创建一个 HEAD 符号，然后结帐到头部，例如

```
git_reference_create_symbolic(&head, repo, GIT_HEAD_FILE, branchname, 1);
git_checkout_head(repo, opts, stat); 
```

# c# - 模型持久性——这应该发生在哪里？

> ID：10821376
> 
> 赞同：3
> 
> 时间：2012-05-30T17:36:44.550
> 
> 标签：c#, mvvm, persistence, prism-4

我的问题是关于模型 MVVM 中的第一个“M”。我看到了很多关于如何实现模型的变化。有些只是没有业务逻辑和持久性逻辑的 POCO，而另一些则包含一个或两者。

现在，在我们的应用程序中，模型、视图和视图模型之间有很好的分离。这是我们当前的解决方案结构（它是一个 WPF prism 应用程序）：

*   基础设施
*   模块 A
    *   视图模型
    *   意见
*   模块 B
    *   视图模型
    *   意见
*   模型（在模块之间共享，这就是它在自己的类库中的原因）
*   服务
*   DataAccess（可能使用 dapper-dot-net）
*   Shell（主要 WPF 项目）

我们现在需要弄清楚如何对数据库执行 CRUD 并保持模型更新。我喜欢保持模型非常简单的想法，并拥有一个“服务”类库，其中包含我们的业务逻辑并针对我们的数据访问类执行一个工作单元模式。保持模型愚蠢和不了解业务逻辑/数据访问是否存在任何已知问题？这在 MVVM 中很罕见吗？

我想知道我是否通过不在模型中放置一些逻辑来限制自己或使事情变得比需要的更复杂，例如，在给定参数的情况下从其 ctor 中加载模型。请注意，这将是一个大型应用程序。

我们的应用程序必须将模型持久化到多个数据库。我们使用 Unity 作为我们服务的依赖注入容器。你会如何建议我告诉服务使用哪个数据连接？Tor，每个功能等？

有点想寻找建造类似结构的人，以及他们的经验/建议是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T18:21:11.570

在我看来，MVVM 模型只是“代表”数据，因此不应该有任何逻辑、CRUD 或以其他方式嵌入。您已经拥有数据访问层，因此在此处编写 CRUD 代码并使用 DI 从您的模型中访问此 CRUD 代码是完全正常的。

MVVM 的“美”在于它可以解释，所以我相信其他人会争辩说模型就是数据，它可以包含 CRUD 逻辑......

我的 DAL 中有我所有的 CRUD 操作，但还没有看到这种方法的缺点......

# javascript - 谁嵌入了我的小部件？（或者如何获取父框架的URL）

> ID：10821379
> 
> 赞同：0
> 
> 时间：2012-05-30T17:36:49.370
> 
> 标签：javascript, http, iframe

有没有办法从 iframe 中获取父框架的 URL？我知道你不能使用 JavaScript 来做到这一点（或者有吗？）。有没有办法在服务器端做到这一点？

或者是我们更改小部件嵌入代码的唯一解决方案，以便它们包含一些`window.location`与 iframe 通信的 JavaScript（`postMessage`/更改 iframe 的位置哈希）？

# c++ - T 是 C++ 中模板的实例吗？

> ID：10821380
> 
> 赞同：13
> 
> 时间：2012-05-30T17:36:53.530
> 
> 标签：c++, templates

假设我在一个模板中，我想知道类型参数 T 是否是特定模板的实例化，例如`std::shared_ptr`：

```
template<typename T>
void f(T&& param)
{
    if (instantiation_of(T, std::shared_ptr)) ...   // if T is an instantiation of 
                                                    // std::shared_ptr...
  ...
} 
```

更有可能我想做这种测试作为 std::enable_if 测试的一部分：

```
template<typename T>
std::enable_if<instantiation_of<T, std::shared_ptr>::type
f(T&& param) 
{
    ...
}

// other overloads of f for when T is not an instantiation of std::shared_ptr 
```

有没有办法做到这一点？请注意，该解决方案需要使用所有可能的类型和模板，包括标准库和其他我无法修改的库中的类型和模板。我对`std::shared_ptr`上面的使用只是我可能想做的一个例子。

如果这是可能的，我将如何自己编写测试，即实现`instantiation_of`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T17:40:42.270

为什么`enable_if`在简单的重载就足够时使用？

```
template<typename T>
void f(std::shared_ptr<T> param) 
{
    // ...
} 
```

如果您确实需要这样的特性，我认为这应该可以帮助您入门（仅使用 VC++ 2010 进行了粗略测试）：

```
#include <type_traits>

template<typename>
struct template_arg;

template<template<typename> class T, typename U>
struct template_arg<T<U>>
{
    typedef U type;
};

template<typename T>
struct is_template
{
    static T* make();

    template<typename U>
    static std::true_type check(U*, typename template_arg<U>::type* = nullptr);
    static std::false_type check(...);

    static bool const value =
        std::is_same<std::true_type, decltype(check(make()))>::value;
};

template<
    typename T,
    template<typename> class,
    bool Enable = is_template<T>::value
>
struct specialization_of : std::false_type
{ };

template<typename T, template<typename> class U>
struct specialization_of<T, U, true> :
    std::is_same<T, U<typename template_arg<T>::type>>
{ }; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-30T17:46:07.297

部分规范应该能够做到这一点。

```
template <template <typename...> class X, typename T>
struct instantiation_of : std::false_type {};

template <template <typename...> class X, typename... Y>
struct instantiation_of<X, X<Y...>> : std::true_type {}; 
```

[http://ideone.com/4n346](http://ideone.com/4n346)

我实际上不得不查找模板模板语法，因为我以前基本上从来没有使用过它。

不确定这如何与模板交互，例如`std::vector`与其他默认参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T18:35:40.620

处理 T&& 时最好的方法是确保在进行检查之前 remove_reference ，因为基础类型 T 可以是引用或值类型，并且模板部分特化必须准确工作。结合代码上方的答案可以做到这一点：

```
template <
  typename T,
  template <typename...> class Templated
> struct has_template_type_impl : std::false_type {};

template <
  template <typename...> class T,
  typename... Ts
> struct has_template_type_impl<T<Ts...>, T> : std::true_type {};

template <
  typename T, 
  template <typename...> class Templated
> using has_template_type = has_template_type_impl<
    typename std::remove_reference<T>::type,
    Templated
>; 
```

然后你只需 enable_if 你的胜利之路：

```
template <typename T>
typename std::enable_if<has_template_type<T, std::shared_ptr>::value>::type
f(T&& param)
{
  // ...
} 
```

# apache-flex - Flash Builder 忽略配置文件中的库路径包含

> ID：10821384
> 
> 赞同：0
> 
> 时间：2012-05-30T17:37:09.913
> 
> 标签：apache-flex, actionscript, ant, configuration, flash-builder

我想将我的编译设置从 Flash Builder UI 中取出并放入 config.xml 文件中。我主要想这样做，以便我的团队中没有 Flash Builder 的个人仍然可以编译项目。我已经定义了一个这样的配置文件（简化）：

```
<flex-config>
    <compiler>
        <library-path append="true">
            <path-element>C:\Libraries\someLibrary.swc</path-element>
        </library-path>
    </compiler>
</flex-config> 
```

我在 Flash Builder 的 Project Properties -> Flex Compiler -> Additional compiler arguments 区域下添加了以下编译器参数：

```
-load-config+=config\myCustomConfig.xml 
```

当我这样做时，我的项目文件中出现内联错误，这些文件引用了`someLibrary.swc`. 我在这里做错了什么，还是这不可能？让我抓狂的是，我们必须在两个地方维护一些设置。如果这是不可能的，其他人会做些什么来解决这个问题？只需切换到完全使用 ANT 编译并错过内联编译器错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:02:32.667

好吧，我认为配置编译器和配置ide是有区别的。我可能错了，但在 IntelliJ 中也是如此。ide 不解析，而是将配置作为参数传递给编译器。

此外，直接使用编译器配置的好处是，您可以共享标准配置。这可以/应该在不同的环境（本地、持续集成）或构建（命令行与 ANT）中使用。

另外，如果可能，我建议使用相对路径。

# asp.net-mvc-3 - 仅转换已发布数据的某些部分的自定义 ModelBinder

> ID：10821392
> 
> 赞同：0
> 
> 时间：2012-05-30T17:37:29.953
> 
> 标签：asp.net-mvc-3

假设我们的 WebService 中有以下方法：

```
ActionResult SomeMethod(int primitiveValue, List<MyComplexValue> complexValues)
{ 
//...
}

class MyComplexValue
{
    public int TransformedValue { get; set; }
} 
```

WebClient 将以下 JSON 数据发布到我们的方法中：

```
{ primitiveValue: 17, complexValues: [ { Value: 1}, { Value: 2} ]} 
```

我现在想实现一个自定义 ModelBinding，它只将“complexValues”参数转换为我自己的 MyComplexValue 实例列表。那可能吗？DefaultModelBinder 仍应处理所有原始值（例如参数“primitiveValue”）。

我尝试通过以下方式实现自定义 ModelBinder：

```
public class CustomModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        string incomingData = bindingContext.ValueProvider.GetValue(bindingContext.ModelName).AttemptedValue;
        if (incomingData == null)
            return null;

        //Transform passed object list to ComplexValue List
    }

}

//...

ActionResult SomeMethod(int primitiveValue, [ModelBinder(typeof(CustomModelBinder ))] List<MyComplexValue> complexValues)
{ 
//...
} 
```

问题是，GetValue 总是返回 null。我希望它返回字符串“[ { Value: 1}, { Value: 2} ]”，这样我就可以自己反序列化这个 JSON 并自己处理转换。

有任何想法吗？

谢谢！

# wpf - 自定义控件大小/放置问题

> ID：10821393
> 
> 赞同：0
> 
> 时间：2012-05-30T17:37:30.650
> 
> 标签：wpf, xaml, layout, custom-controls

我正在尝试使用 C#/WPF 创建自定义控件。请参阅下面的控件的 XAML，以及我尝试将其放入的窗口。

问题：当我将 Horizo​​ntalAlignment 或垂直对齐属性设置为 Center 时，控件的左上角居中，但向下和向右延伸。设计器中显示的控件边界框非常小（我认为零宽度/高度）。

似乎我的控件在布局执行操作时没有正确报告其大小有问题。此外，调整高度和宽度时，它似乎没有调整大小。我在代码隐藏（尚未）中没有任何内容可以改变控件的外观（例如，没有测量覆盖）。

这是我第一次尝试自定义控件 - 可能是更好的方法（想到 TextBlock），但是嘿，这就是我学习的方式！:D

定义我的控件的 XAML：

```
<UserControl x:Class="LCD.LiquidCrystalDisplay"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignWidth="300" d:DesignHeight="122">
    <Canvas>

        <Rectangle Fill="#FFD1D1D1" Width="300" Height="122" />
        <Rectangle Fill="#FF345534" Margin="12,8,12,8" Width="276" Height="106" />
        <Rectangle Fill="#FF293E29" Margin="15,11,15,11" Width="270" Height="100" />

        <Line X1="32" X2="32" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="50" X2="50" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="67" X2="67" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="84" X2="84" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="101" X2="101" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="117" X2="117" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="134" X2="134" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="151" X2="151" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="168" X2="168" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="184" X2="184" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="201" X2="201" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="218" X2="218" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="235" X2="235" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="251" X2="251" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="268" X2="268" Y2="111" Y1="11" StrokeThickness="1" Stroke="#FF345534" />

        <Line X1="15" X2="285" Y1="36" Y2="36" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="15" X2="285" Y1="61" Y2="61" StrokeThickness="1" Stroke="#FF345534" />
        <Line X1="15" X2="285" Y1="86" Y2="86" StrokeThickness="1" Stroke="#FF345534" />

    </Canvas>
</UserControl> 
```

以及将其包含在窗口中的 XAML：

```
<Window x:Class="TestJunk.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:LCD;assembly=LCD"
        Title="MainWindow" Height="341" Width="544">
    <Grid Name="MainGrid">
        <my:LiquidCrystalDisplay Name="lcd" HorizontalAlignment="Center" VerticalAlignment="Center" />
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:20:28.013

这是 a 的行为`Canvas`。这是[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.aspx)不得不说的：

> Canvas 是唯一没有固有布局特征的面板元素。Canvas 的默认高度和宽度属性为零，除非它是自动调整其子元素大小的元素的子元素。Canvas 的子元素永远不会调整大小，它们只是定位在指定的坐标处。这为不需要或不需要固有尺寸约束或对齐的情况提供了灵活性。对于您希望子内容自动调整大小和对齐的情况，通常最好使用 Grid 元素。

如果您想调整 UserControl 的大小，请将其包裹在 a 周围并将 a和`Viewbox`设置为.`Height``Width``Canvas`

# css - CSS 布局高度

> ID：10821395
> 
> 赞同：0
> 
> 时间：2012-05-30T17:37:32.707
> 
> 标签：css, layout, html

我需要在 a 中有两列`<div>`：

**当前的 HTML**

```
<div id="corpo">
    <div id="corpo_esquerdo">
        asdss ssssss ssssss ssssssss ss sssssssssssddddd ddddddddd
        ddddddddf asdfasdfasdfasdsdsd asdf asdf sd
        asdss ssssss ssssss ssssssss ss sssssssssssddddd ddddddddd
        ddddddddf asdfasdfasdfasdsdsd asdf asdf sd
    </div>

    <div id="corpo_direito">
        direito sdfasdfasdfasd fasd asfd asdf asdfa sdfa sdf sadf asd
        fasdf asd fasd fasd fasdfa sdfa
    </div>

</div> 
```

**当前的 CSS**

```
#corpo {
    border: 5px #ffe4c4 solid;
    width: 980px;
    margin: -30px auto;
    background-color: #f5f5f5;
    border-radius: 5px;
    padding: 15px;
    color: #a8a8a8;
    font-size: 20px;
}

#corpo_esquerdo {
    width: 650px;
    float: left;
    border: #bababa solid 2px;
}
#corpo_direito {
    width: 300px;
    float: right;
    background-color: #bababa;
    border-radius: 5px;
    color: #f5f5f5;
    padding: 5px;
} 
```

但是`div#corpo_esquerdo`和`div#corpo_direito`交叉`div#corpo`。

![穿越 div](../Images/7ab3860633b5e596dffcfe0f5766e80e.png)

我该怎么做才能拥有`div#corpo_esquerdo`并且`div#corpo_direito`不跨越`div#corpo`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:47:35.797

您还可以将 overflow:auto 添加到 #corpo div

```
#corpo {
    overflow:auto;
    border: 5px #ffe4c4 solid;
    width: 980px;
    margin: -30px auto;
    background-color: #f5f5f5;
    border-radius: 5px;
    padding: 15px;
    color: #a8a8a8;
    font-size: 20px;
} 
```

在这里查看结果：http: [//jsfiddle.net/nF5vZ/](http://jsfiddle.net/nF5vZ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T17:40:30.227

如果应用`overflow:hidden`到包含浮动子项的父容器，则父容器将展开以适应其子容器。

```
#corpo {
    overflow: hidden;
    /* the rest of your definition */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T17:45:40.683

尝试像这样清除内容：

```
<div id="corpo">
  <div id="corpo_esquerdo">
  your text
  </div>
  <div id="corpo_direito">
  your text
  </div>
  <!-- clear -->
  <div style="clear:both;"></div>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T17:40:18.437

IMO 最有效的方法是应用溢出属性

```
#corpo_esquerdo {
    width: 650px;
    float: left;
    border: #bababa solid 2px;
    overflow: hidden;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T17:40:34.643

尝试添加：

```
overflow:hidden; 
```

到您的#corpo_esquerdo 和#corpo_direito div。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-30T17:46:39.060

这里发生了两件事。

**一**- 如果您想隐藏父级边界之外的内容，正如其他人所指出的，请使用`overflow:hidden`.

**二**- 您还体验到容器内浮动元素的折叠效果。这个想法是浮动元素从自然页面流中取出（如绝对定位的项目）。这些项目的高度不会强制父元素垂直扩展。

如果您希望父元素的高度扩大，`clearfix`请对父元素使用应用类。

```
ie: <div id="corpo" class="clearfix">

/* For modern browsers */
.clearfix:before,
.clearfix:after {
    content:"";
    display:table;
}

.clearfix:after {
    clear:both;
}

/* For IE 6/7 (trigger hasLayout) */
.clearfix {
    *zoom:1;
} 
```

此外，您可以在浮动元素下方插入另一个元素，该元素仍然在**`clear:both`**应用 css 规则的自然页面流中（正如其他人所指出的那样）。我不喜欢这种解决方案，因为您必须使用无关的元素才能使其工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-30T17:47:04.857

`<div style="clear:both"></div>`在关闭外部 div 之前添加：

```
<div id="corpo">
    <div id="corpo_esquerdo">
        asdss ssssss ssssss ssssssss ss sssssssssssddddd ddddddddd
        ddddddddf asdfasdfasdfasdsdsd asdf asdf sd
        asdss ssssss ssssss ssssssss ss sssssssssssddddd ddddddddd
        ddddddddf asdfasdfasdfasdsdsd asdf asdf sd
    </div>

    <div id="corpo_direito">
        direito sdfasdfasdfasd fasd asfd asdf asdfa sdfa sdf sadf asd
        fasdf asd fasd fasd fasdfa sdfa
    </div>
    <div style="clear:both"></div>

</div> 
```

这是一个演示：http: [//jsfiddle.net/MU7hn/](http://jsfiddle.net/MU7hn/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-30T17:50:47.647

在 jsFiddle 上查看解决方案：http: [//jsfiddle.net/Rzw44/](http://jsfiddle.net/Rzw44/)

它基本上对`div`包含**floated** `div`子级的父级应用了 clearfix 。

[您可以在此处](http://www.webtoolkit.info/css-clearfix.html)阅读有关该解决方案的更多信息

# string - delphi子串计数性能

> ID：10821404
> 
> 赞同：0
> 
> 时间：2012-05-30T17:38:11.410
> 
> 标签：string, performance, delphi, substring, delphi-xe2

我有一些函数可以计算由空格分隔的字符串中的子字符串：

```
program Project2;

{$APPTYPE CONSOLE}

{$R *.res}

uses System.SysUtils,windows;

//s=string to search in
//t=string to search for
//cs=delimiters

function f0(const s,t:string;const cs:tsyscharset):integer;
var
  p,q:pchar;
  u:string;
begin
  result:=0;
  p:=pointer(s);
  if p<>nil then
    while p^<>#0 do
    begin
      while (p^<>#0) and charinset(p^,cs) do inc(p);
      q:=p;
      while (p^<>#0) and not charinset(p^,cs) do inc(p);
      if p>q then
      begin
        setstring(u,q,p-q);
        //writeln('[',u,']');
        if u=t then inc(result);
      end;
    end;
end;

function f1(const s,t:string;const cs:tsyscharset):integer;
var
  i,j,l:integer;
  u:string;
begin
  result:=0;
  l:=length(s);
  i:=1;
  while i<=l do
  begin
    while (i<=l) and charinset(s[i],cs) do inc(i);
    j:=i;
    while (i<=l) and not charinset(s[i],cs) do inc(i);
    if i>j then
    begin
      u:=copy(s,j,i-j);
      //writeln('[',u,']');
      if u=t then inc(result);
    end;
  end;
end;

function f2(const s,t:string;const cs:tsyscharset):integer;
var
  i,j,l:integer;
  u:string;
begin
  result:=0;
  l:=length(s);
  i:=1;
  while i<=l do
  begin
    while (i<=l) and charinset(s[i],cs) do inc(i);
    j:=i;
    while (i<=l) and not charinset(s[i],cs) do inc(i);
    if i>j then
    begin
      setlength(u,i-j);
      move(s[j],pointer(u)^,(i-j)*2);
      //writeln('[',u,']');
      if u=t then inc(result);
    end;
  end;
end;

type
  tfunc=function(const s,t:string;const cs:tsyscharset):integer;

const
  s='  de foo   de'+#13+' baz blah de  de blah'+#10+' asd de qwe rtz   un f'+#9+' t de ds w de  ';
  t='de';
  cs=[' ',#13,#10,#9];//CR,LF,TAB
  n=5000000;

procedure time(i:integer;f:tfunc);
var
  j,k:integer;
  start,finish,freq:int64;
begin
  QueryPerformanceCounter(start);
  for j := 1 to n do k:=f(s,t,cs);
  QueryPerformanceCounter(finish);
  QueryPerformanceFrequency(freq);
  Writeln(Format('f%u:%u:%.3fs',[i,k,(finish-start)/freq]));
end;

const
  funcs:array[0..2] of tfunc=(f0,f1,f2);
var
  i:integer;
begin
  setpriorityclass(GetCurrentProcess(), REALTIME_PRIORITY_CLASS);
  for i := low(funcs) to high(funcs) do time(i,funcs[i]);
  readln
end. 
```

速度结果是

```
f0:7:7,624s
f1:7:8,066s
f2:7:6,454s 
```

我的第一个问题是：为什么 f2 比 f0 快？

我的第二个问题是：您知道如何进一步优化它（没有内联汇编程序）吗？

IDE：德尔福 XE2（Unicode）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T17:50:27.507

为什么更快？没有探查器是不可能猜到的。这将取决于您运行的 CPU。

我想更快的会被处理，`f2`因为`SetLength()`大多数时候会避免重新分配，而`SetString()`总是会在分配内存之前释放内存。这取决于你的情况。

对于更快的过程，使用相同的算法（你可能会发现更优化的东西），我会尝试：

```
const
  cs = [32,13,10,9];  

function f2(const s,t:string):integer;
var
  i,j,l:integer;
begin
  result := 0;
  l := length(s);
  i := 1;
  while i<=l do
  begin
    while (i<=l) and (ord(s[i]) in cs) do inc(i);
    j:=i;
    while (i<=l) and not(ord(s[i]) in cs) do inc(i);
    if (i>j) and CompareMem(pointer(s[j]),pointer(t),(i-j)*sizeof(char)) then
      inc(result);
  end;
end; 
```

那是：

*   CharInSet 对于控制字符不值得；
*   恕我直言，使用静态集比传递参数更快（但您可以根据需要使用参数）；
*   不要使用临时变量（我认为这是您算法中较慢的部分），但这是一个很好的旧变量`CompareMem`- 这里仍有改进的空间。

你可以试试写：

```
const 
  cs: set of 0..32 = [32,13,10,9]; 
```

这可能会快一点，因为生成的 ASM 代码将是一个快速的位查找指令，而第一个版本将使用比较列表。但我认为这不会有很大的不同。

在所有情况下，我想你应该更好：

*   不要过早优化——首先使用分析器来猜测什么是慢的和值得重写的；
*   使用*真实数据*进行优化，而不是像您的基准测试中那样简化的固定集：您将针对一种数据进行优化，而对于真实数据则不必如此。

# c++ - C ++中map []和map.at之间的区别？

> ID：10821405
> 
> 赞同：24
> 
> 时间：2012-05-30T17:38:14.663
> 
> 标签：c++, c++11, stl

`aMap[key]`通过 C++和在 C++中获取值有什么区别`aMap.at(key)`？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-30T17:41:30.057

如果您使用`[]`当前不属于映射的索引运算符访问键，则它会***自动为您添加一个键***。这是一个巨大的警告，并考虑到这一点。出于这个原因，我更喜欢使用索引运算符`[]`进行设置和`.find()`/`.at()`进行查找。

`.at()`使用over的另一个优点`[]`是它可以在 a 上操作`const std::map`，而`[]`不会。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-30T17:40:19.050

在 C++11`map::at`中存在（谁知道？）。

如果键不存在则抛出异常，如果元素不存在则`find`返回，如果相应键不存在值，则**值初始化**一个新值。`aMap.end()``operator[]`

# c# - 在 WPF MVVM 中使用 Caliburn Micro 调整大小的中心窗口？

> ID：10821407
> 
> 赞同：0
> 
> 时间：2012-05-30T17:38:20.117
> 
> 标签：c#, wpf, mvvm, caliburn.micro

我正在使用 Caliburn Micro，我的 UserControl(Window) 最初位于中心屏幕，但随着内容动态加载到其中，它的大小会增加。

所以我想在调整大小时在中心屏幕中制作窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:52:15.047

虽然我一般不同意移动窗口的可用性，但如果窗口已调整大小，您可以执行以下操作来重新居中您的窗口：

1.  创建一个`SizeChanged`事件处理程序。
2.  在事件处理程序中，[将窗口重新居中](https://stackoverflow.com/q/4019831/9664)

# c++ - 是否可以在 main 中返回向量

> ID：10821417
> 
> 赞同：1
> 
> 时间：2012-05-30T17:39:03.383
> 
> 标签：c++

我想知道返回向量是否可以`main()`？例如，

```
aSpecialVectorType main()
{
    aSpecialVectorType xxx(vector::zero);
    // do something here;
    return xxx;
} 
```

我需要在`class aSpecialVectorType;`之前转发声明“”`main()`吗？

`main`顺便说一句，在 C++中使用“”以外的其他名称是否合法？

谢谢

## 编辑1：

如果不是，它可以输出向量的最佳方式是什么？

我的朋友让我给他一个可以作为“矢量输入和矢量输出”的黑匣子，他将使用他的matlab代码来调用我的代码。这就是我问的原因。我知道如何输入向量，但不确定是否有一种简单的方法来输出向量。

谢谢

## 编辑2：

我很惊讶为什么 C++ 有这样一个标准，有什么解释吗？:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T17:43:18.290

在 C++ 中，`main`需要返回一个`int`：

> C++ 标准，3.6.1.2：
> 
> 实现不应预定义主要功能。该功能不得重载。它的返回类型应该是 type `int`，否则它的类型是实现定义的。

.

> 如果不是，它可以输出向量的最佳方式是什么？

要*输出*向量，您需要将其复制到文件或输出流中：

```
ostream_iterator<int> out_it(cout, ", ");
copy(myvector.begin(), myvector.end(), out_it); 
```

上面的代码片段将 的内容写入`vector<int>`标准输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T17:42:04.623

编号*main*必须以以下两种方式之一声明：

```
int main() 
```

或者

```
int main(int argc, char*[] argv) 
```

除此之外的任何东西都不是标准的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T17:41:13.567

**没有。**
根据标准`main()`必须返回一个`int`并且只有那个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T17:41:20.053

不。

`main`必须返回`int`。

其他函数可以自由使用其他名称并返回他们想要的任何内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T18:37:10.993

为了扩展 dashblinkenlight 的答案，以下是两个程序可以通信的方式。不是通过一个捕获另一个的返回值，而是通过一个称为“管道”的过程，将一个程序的标准输出定向到另一个程序的标准输入。在这里，我将在一个程序中打印出一个字符串列表，然后另一个程序将在其标准输入上期望一个字符串列表，然后我将向您展示如何将两者结合使用：

```
// Output program
#include <vector>
#include <string>
#include <iostream>

int main()
{
    using namespace std;

    vector<string> v;
    v.push_back("one");
    v.push_back("two");
    v.push_back("three");

    for (int i=0; i<v.size(); ++i)
        cout << v[i] << '\n';
}

// input program
#include <iostream>
#include <vector>
#include <string>

int main()
{
    using namespace std;

    vector<string> v;
    for (string tmp; cin >> tmp; )
        v.push_back(tmp);

    // print the strings in reverse order
    for (int i=v.size()-1; i>=0; --i)
        cout << v[i] << '\n';
} 
```

如果你自己运行第一个程序，它只会打印出 3 个字符串。如果您自己运行第二个程序，它将提示用户输入字符串，直到他使用终止命令。但是在所有最广泛使用的操作系统上，您可以将两者链接在一起。然后第一个的输出将成为第二个的输入。在类 Unix 系统上，你可以这样做：

```
./output_program | ./input_program 
```

在 Windows 上，我认为它是相同的，或者非常相似。不过不确定。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T17:43:38.527

你的第一个问题的答案是否定的。第二个问题的答案是肯定的，但是您需要指定可执行文件的入口点的名称（通过链接器设置......可能并非在所有链接器工具上都可用）。

**下面的陈述是错误** 的见下面 Ben 的评论。有用的信息。

请注意，尽管入口点的名称可以更改，但它必须符合标准参数和返回类型。

# cocoa-touch - 我应该在 locationManager:didFailWithError: 中发送 [locationManager stopUpdatingLocation] 吗？

> ID：10821421
> 
> 赞同：1
> 
> 时间：2012-05-30T17:39:15.303
> 
> 标签：cocoa-touch, core-location

我的应用程序使用启动 CLLocationManager 的典型模式，然后在足够准确的情况下`stopUpdatingLocation`从中调用。我的问题是我是否也需要打电话`locationManager:didUpdateToLocation:fromLocation:``newLocation`

```
[locationManager stopUpdatingLocation]; 
```

在`locationManager:didFailWithError:`. 苹果文档说

> 如果定位服务无法立即检索位置，它会报告`kCLErrorLocationUnknown`错误并继续尝试。在这种情况下，您可以简单地忽略错误并等待新事件。
> 
> 如果用户拒绝你的应用程序使用定位服务，这个方法会`kCLErrorDenied`报错。收到此类错误后，您应该停止定位服务。

在前一种情况下，我不应该打电话`stopUpdatingLocation`，因为位置管理器可能仍然会发出一个好的位置。其他情况呢？我的应用程序总是在尝试使用定位服务之前进行检查`[CLLocationManager locationServicesEnabled]`，`[CLLocationManager authorizationStatus]`所以我真的需要处理这种`kCLErrorDenied`情况吗？如果出现任何其他错误，定位服务会自动停止吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:31:18.990

首先，我认为您应该处理大多数错误情况。特别是如果它像这个一样容易处理。;-)
如果用户已授予访问权限并使用您的应用程序会发生什么。在应用程序运行时，她执行多项任务并更改为 settings.app 以禁用位置服务；一般或专门针对您的应用程序。然后您已经检查了授权并使用位置更新，但突然您不再被授权。我想这正是您要问的情况，对吗？

# matlab - 在matlab中将新行写入文本文件

> ID：10821428
> 
> 赞同：5
> 
> 时间：2012-05-30T17:39:45.603
> 
> 标签：matlab, file-io, newline

```
function [org_data] = file_manipulation(in_fname, txt_fname, mat_fname)
    org_data = round(load(in_fname));

    fid = fopen(txt_fname,'wt+');
    student_id = '9900';
    txt = [txt_fname ' : ' student_id '\nDate of creation:' datestr(now,'dd/mm/yyyy')]; 
    fprintf(fid,'%s',txt);

end 
```

生成的文件不是插入换行符，而是：

```
C:\w2\test1.txt : 9900\nDate of creation:30/05/2012 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T17:48:39.650

用于[`sprintf`](http://www.mathworks.com/help/techdoc/ref/sprintf.html)制作这些字符串：

```
fprintf(fid, sprintf('%s : %s\nDate of creation: %s', txt_fname, student_id, datestr(now,'dd/mm/yyyy'))); 
```

您现在的操作方式是将反斜杠视为文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-01T07:53:05.337

在将 '\n' 插入字符串之前将其转换为双精度：

```
fid = fopen('my_file.txt', 'w');
fwrite(fid, ['First line' double(sprintf('\n')) 'Second line'])
fclose(fid); 
```

感谢 Adob​​e Research 的研究科学家 Franck Dernoncourt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-22T08:03:42.340

它对我有用

```
fwrite(fos, double(sprintf('\n'))); 
```

此外，Matlab 2019 版本之后的版本，为避免编辑器出现警告，请使用

```
fwrite(fos, newline); 
```

# c# - 从继承类中获取基类

> ID：10821429
> 
> 赞同：0
> 
> 时间：2012-05-30T17:39:53.040
> 
> 标签：c#, reflection

我想从

```
public class Class1 : BrowserWindow 
```

我正在尝试`Class1`通过`UiBrowserWindow`. `UiBrowserWindow`像这样的东西...

```
public class UiBrowserWindow : Microsoft.VisualStudio.TestTools.UITesting.BrowserWindow {
    public static UiBrowserWindow Convert(Microsoft.VisualStudio.TestTools.UITesting.BrowserWindow browserWindow) {
        UiBrowserWindow result = new UiBrowserWindow();
        result = (UiBrowserWindow)browserWindow;
        return result;
    }
}

UiBrowserWindow browserWindow = UiBrowserWindow.Convert(UIMap.Class1.GetType().BaseType);
//UIMap.Class1 is a property of UIMap 
```

此代码产生错误`Argument type 'System.Type' is not assignable to parameter type 'Microsoft.VisualStudio.TestTools.UITesting.BrowserWindow'`

**更新代码：**

```
public class UiBrowserWindow : Microsoft.VisualStudio.TestTools.UITesting.BrowserWindow {
    public static UiBrowserWindow convert(Microsoft.VisualStudio.TestTools.UITesting.BrowserWindow browserWindow) {
        UiBrowserWindow result = (UiBrowserWindow)browserWindow;
        return result;
    }
}

// Usage...
UiBrowserWindow browserWindow = UiBrowserWindow.convert(UIMap.Class1); 
```

这导致异常`InvalidCastException: Unable to cast object of type 'automatedTesting.Class1' to type 'UiBrowserWindow'`

测试方法...

```
[TestMethod]
public void CodedUITestMethod1() {
    this.UIMap.RecordedMethod1();

    UiBrowserWindow browserWindow = UiBrowserWindow.convert(UIMap.Class1);
    Assert.IsNotNull(browserWindow.getUiTestControl<HtmlDiv>(new[] { 
        new PropertyExpression(HtmlDiv.PropertyNames.Id, "logo")
    }));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:42:06.523

我想你应该省略 ".GetType().BaseType" 部分并调用：

```
UiBrowserWindow browserWindow = UiBrowserWindow.Convert(UIMap.Class1); 
```

更新：Class1 派生自 BrowserWindow，UiBrowserWindow 派生自 BrowserWindow。Class1 不是 UiBrowserWindow。您尝试的转换仅适用于重载强制转换运算符（但我不推荐它）。解释你想要达到的目标，因为这种方式行不通

# salesforce - 如何在不写入命名空间前缀的情况下访问 Salesforce 管理的站点页面？

> ID：10821430
> 
> 赞同：2
> 
> 时间：2012-05-30T17:39:53.080
> 
> 标签：salesforce, packages, visualforce

我们正在开发一个 Salesforce 托管包，其中包含要在 Salesforce 站点上发布的 visualforce 页面。

测试时，我们可以访问这些页面`http://example.force.com/pagename`

但是当在测试组织上安装托管包时，我们只能访问那些在包命名空间前添加的页面，`http://example.force.com/namespace__pagename`

`/pagename`即使从托管软件包安装访问，我如何才能使页面可访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:10:35.760

URL 重写器可能会工作，但我很确定你会找不到解决方法——命名空间的目的是防止包之间的命名冲突，能够从页面 URL 中删除它意味着没有什么可以阻止你的包与安装包的组织中的其他包或自定义 VF 页面冲突。

# google-chrome-extension - 使扩展始终在用户单击扩展图标时打开，仅在单击扩展图标时关闭

> ID：10821432
> 
> 赞同：1
> 
> 时间：2012-05-30T17:40:06.543
> 
> 标签：google-chrome-extension

我希望我的扩展程序在打开（单击图标）后仅在用户单击我的扩展程序图标时关闭，就像您打开开发人员模式和“检查弹出窗口”时发生的情况一样，当它在开发人员中时模式下，您只能在单击 chrome 中的图标后关闭您的扩展程序。

我想让它可见，直到用户点击扩展图标（不是任何外部点击）来关闭它，但不必打开开发者模式。

或者如果这是不可能的，我想至少在我的扩展程序被点击后，让我的扩展程序处于活动状态，以便它可以处理`chrome.webRequest.onBeforeRequest.addListener()`

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:21:23.047

看看[背景页面](http://code.google.com/chrome/extensions/background_pages.html#example)。正如文档所说，背景页面是

> 用于管理某些任务或状态的单个长时间运行的脚本

如果您的目标是完成这样的任务，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:47:39.680

也许，[桌面通知](http://code.google.com/chrome/extensions/notifications.html)是某种决定。

# php - 了解 timthumb 的工作原理

> ID：10821437
> 
> 赞同：0
> 
> 时间：2012-05-30T17:40:31.333
> 
> 标签：php, ruby-on-rails, performance, wordpress

来自 Rails 背景，我曾经使用回形针插件，它是从具有预定义大小的图像附件拇指创建的。

在wordpress中，我有点困惑。这是我需要更多澄清的问题或要点：

1.  timthumb 是否会在首次上传图片时创建拇指并将其保存到磁盘？还是它只是动态调整图像大小并缓存它们？
2.  如果它即时调整大小，为什么我在目录中看到每个图像的大小不同`uploads`，例如`filename.jpg` `filename-150x150.jpg`等等？
3.  在不调用脚本的情况下直接在上传和提供拇指时创建一次拇指不是更好的性能吗？如果是这样，如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:47:07.283

1.  通常，它会在第一次请求时调整图像大小并缓存它们。
2.  您可能会看到 WP 所做的图像大小调整。这些在设置中控制
3.  值得商榷。是的，这一切都可以在您的命令下完成，不，有人可以上传 1000 张图像并一次调整它们的大小可能会导致网站出现问题。因此，分散调整大小可能会导致平衡负载需求。此外，当页面加载创建自定义缩略图时，可以通过脚本传递参数。所以如果你觉得你的缩略图太窄了 10px，你可以再次运行它，它会从原来的大小调整。此外，基本图像的文件名保持不变 - 如果您的代码显示 image.jpg，它将始终是 image.jpg，无论大小。因此，如果您有 10,000 个缩略图实例，并且它们都引用 image-150x150，而现在您希望它们是 160x160，那么您要么必须更改所引用的图像名称，要么使用无意义的文件名。

这是一些基本的 timthumb/wordpess 性能提示[http://www.dollarshower.com/timthumb-and-wordpress-blog-performance/](http://www.dollarshower.com/timthumb-and-wordpress-blog-performance/)

# c# - DllImport ERROR_MORE_DATA UNMANAGED 在 C# PBYTE 中调用 C++

> ID：10821446
> 
> 赞同：0
> 
> 时间：2012-05-30T17:41:15.263
> 
> 标签：c#, winapi, registry, unmanaged, dllimport

```
DWORD OREnumValue(
  __in         ORHKEY Handle,
  __in         DWORD dwIndex,
  __out        PWSTR lpValueName,
  __inout      PDWORD lpcValueName,
  __out_opt    PDWORD lpType,
  __out_opt    PBYTE lpData,
  __inout_opt  PDWORD lpcbData
); 
```

我的代码：

```
public static extern uint OREnumValue(IntPtr Handle, uint dwIndex, [MarshalAsAttribute(UnmanagedType.LPWStr)] out StringBuilder lpValueName, ref int lpcValueName, out uint lpType, out IntPtr lpData, ref int lpcbData);

    IntPtr Handle=mykey;
    uint dwIndex=0;

    StringBuilder lpValueName = new StringBuilder(16383);
    int lpcValueName=lpValueName.Capacity;  

    uint lpType=0;
    IntPtr lpData;
    int lpcbData = int.MaxValue;

    uint ret3= OREnumValue(Handle, dwIndex, out lpValueName, ref lpcValueName, out lpType, out lpData, ref lpcbData); 
```

这给出了一个错误：

```
ret3=ERROR_MORE_DATA 259 
```

我认为问题出在

1.  lpData - 我应该为 PBYTE 使用什么？或者
2.  lpcbData - 我应该使用什么容量？

来自 MSDN

> 如果 lpData 指定的缓冲区不足以容纳数据，则函数返回 ERROR_MORE_DATA 并将所需的缓冲区大小存储在 lpcbData 指向的变量中。在这种情况下，lpData 的内容是未定义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T15:31:36.213

您永远不应该明确定义字符串构建器的长度，该值应该使用 RegQueryInfoKey 方法获得，该方法将为您提供最长值名称、子键名称和值数据的字节长度，然后您可以使用它们来初始化字符串接收实际名称和数据的构建器和字节数组。这意味着您使用的内存量尽可能少，同时仍然足够大以包含结果。我很确定您的问题在于您为 lpValueName 定义的长度。

此外，您应该使用 UIntPtr 而不是 IntPtr，如果您需要数据，lpData 字段应该是字节数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-09T12:57:24.843

根据以下来源，您应该将 IntPtr 用于 PBYTE：

*   [https://www.pinvoke.net/default.aspx/credui.credpackauthenticationbuffer](https://www.pinvoke.net/default.aspx/credui.credpackauthenticationbuffer)
*   [https://social.msdn.microsoft.com/Forums/Windows/en-US/2a2d48ad-9022-4409-9bd1-44717247446a/how-to-use-credpackauthenticationbuffer-credunpackauthenticationbuffer?forum=windowssecurity](https://social.msdn.microsoft.com/Forums/Windows/en-US/2a2d48ad-9022-4409-9bd1-44717247446a/how-to-use-credpackauthenticationbuffer-credunpackauthenticationbuffer?forum=windowssecurity)

（这些不适用于您的 api，但也使用 PBYTE。如果您将来自 msdn 的 c++ 值与列出的链接进行比较）

您很可能需要定义

```
 var myIntPtr = Marshal.AllocCoTaskMem(sizeOfMyIntPtr); 
```

# django - Django 用户 HiddenInput 与使用基于类的视图直接保存在视图中

> ID：10821451
> 
> 赞同：5
> 
> 时间：2012-05-30T17:41:29.430
> 
> 标签：django, django-class-based-views

请将此作为考虑问题。也许有人会使用以下解决方案之一。

我有几个模型包含一个`ForeignKey(User)`字段。我的基于类的创建视图是从通用的`CreateView`.

添加新对象时，有两个选项可以保存关联的用户：

1.  通过覆盖方法将表单保存在视图中`form_valid`；这不会暴露`user_id`（以及此处未提及的其他不应暴露的数据）

    ```
    class CreateOfferView(CreateView):

        model = Offer
        form_class = SomeModelFormWithUserFieldExcluded

        def form_valid(self, form):
            instance = form.save(commit=False)
            instance.user = self.request.user
            instance.save() 
    ```

2.  将表单与存储（和公开）的用户 ID 保存在隐藏字段中。这是棘手的部分。有更多带有用户字段的模型......所以在创建表单时，我需要用初始（当前登录的）用户填充用户字段，并且我需要隐藏该字段。为此，我使用了我的`OwnFormMixin`

    ```
    class OwnFormMixin(object):

        def get_form(self, form_class):
            form = super(OwnFormMixin, self).get_form(form_class)
            form.fields['user'].widget = forms.HiddenInput()

        def get_initial(self):
            initial = super(OwnFormMixin, self).get_initial()
            initial['user'] = self.request.user.pk
            #I could also do this in get_form() with form.fields['user'].initial

    class CreateOfferView(OwnFormMixin, CreateView):
        model = Offer
        form_class = SomeModelFormWithAllFields 
    ```

还有更多`CreateXXXView`使用`OwnFormMixin`..

您如何将用户数据保存在表单中？

隐藏与直接保存在您的视图中？什么是优点/缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T19:57:26.717

除非您允许用户*修改*. `ForeignKeyField`_ 事实上，[Django 文档现在有一个符合这些确切思路的示例](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-editing/#models-and-request-user)。`exclude``ModelForm``request.user`

您的优势在于不必防止对`user_id`参数进行操作，不必暴露您的内部用户 ID，也不必担心不同的 Create*与*Update 案例。一个轻微的缺点是，如果您需要更改对象关联的能力，则`User`需要重新开始。

# django - Django Python: Install multiple versions of the same package within a virtualenv

> ID：10821460
> 
> 赞同：1
> 
> 时间：2012-05-30T17:42:20.037
> 
> 标签：django, module, fork, virtualenv, mptt

I'm integrating two Django apps together, but am finding that one requires django-mptt version 3.x and the other requires 5.x. I can't upgrade the 3.x app because I don't 'own' that particular app and it might be needed for some old dependencies.

Is there any way short of forking and namespacing the django-mptt 5.x version so both can be used? I'd really hate to fork it and am wondering if there are better options out there.

Just wondering what others have done in similar situations. Thank you for reading.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:50:42.333

This is not possible with the usual python tools, since virtualenv are supposed to be used for that.

One possibility is to put each version of the dependancy in each app directory, this way they may import this one first instead of the other.

But if your goal is to not edit any of the apps code, you better prey they don't play with the Python Path, nor share any imports related to the dependancies.

# php - 如何让 PHP 将 MySQL 中的空白字段转换为“0”？

> ID：10821466
> 
> 赞同：1
> 
> 时间：2012-05-30T17:42:47.837
> 
> 标签：php, mysql, sequence

我在 MySQL 中创建了一个名为“pid”的字段，我在 PHP 编码中在其他变量名称的末尾使用它来指示用户创建了 7 个模板设计中的哪一个。限制为 7，此时他们会收到一条消息，告知他们已达到限制。

当字段为空白时（在用户创建第一个模板之前），我的代码工作除外。当我硬编码一个“0”时，它可以工作。但是，很明显，我需要使用“{pid}”变量来获取数据库中的模板序列。

这是PHP：

```
<?PHP
  $pid = {pid};
  $total_templates = 7;
  if ($total_templates > $pid) {
    echo "<a href='create.template.php'><img src='create_template.png'></a>";
  } else {
    echo "<b style='color: #CC0000'>Your limit of $pid Templates has been reached";
  }
?> 
```

如何获取代码以将 MySQL 中的空白字段与上述代码一起转换为“0”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:45:17.170

最好的方法是将mysql中的默认值设置为0。那么你就没有问题了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T17:45:48.513

您总是可以使用`intval`以将其强制为整数。请参阅[http://php.net/manual/en/function.intval.php](http://php.net/manual/en/function.intval.php)。

```
if ($total_templates > intval($pid)) 
```

虽然我只是在 MySQL 中将 pid 字段的默认值设置为 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T17:51:59.753

如果我理解你的问题，你能不能把它设置为`0`if it is `empty()`？

```
$pid={pid};
if(empty($pid))
    $pid = 0; 
```

You can also set the default value for that field in mysql. If you are using phpAdmin, go to the table and click the "Change" action and set the default value there. If you need sql command to do this, I can get that for you too.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T17:50:16.357

您可以使用三元运算符来设置`$pid`值 `$pid = ({pid} != '' ? {pid} : '0');`

如果有实际值`$pid`会显示它，否则会显示 0，我还没有测试过这段代码。

更好的方法是在 SQL 中为该字段设置默认值。

有关[三元运算符的更多信息](http://php.net/manual/en/language.operators.comparison.php)

# visual-studio-2010 - 我发布的应用程序是病毒？

> ID：10821468
> 
> 赞同：0
> 
> 时间：2012-05-30T17:42:50.757
> 
> 标签：visual-studio-2010

我最近为我的一个朋友创建了一个小型 VB 应用程序，我正在使用 Visual Studio 中包含的发布功能（这是更新它并自动下载更新版本的最简单方法）但是当我下载它时，它会下载“设置。可执行程序”

Chrome 和 AV 似乎认为这是病毒，这是为什么呢？我已经把它变成了一个完全信任的应用程序，并用证书和密钥对其进行了签名，但它仍然认为它是病毒，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:53:21.203

**答案 1从**[http://productforums.google.com/forum/#!topic/chrome/r-9JQIboUmc](http://productforums.google.com/forum/#!topic/chrome/r-9JQIboUmc)复制并粘贴

我能够在没有代码签名证书的情况下绕过它，只需使用 SSL（它使用更便宜的证书，而且我已经有一个来保护对我网站的访问），但正如你的经验表明的那样，SSL 似乎不是唯一办法...

根据我的经验和我在这里读到的其他人的信息，我关于 Chrome 如何验证下载的理论是它通过如下清单：

1.  主机站点是否已知且受信任？（即大型已建立的网站都可以）
2.  可以验证主机站点的身份吗？（即通过 SSL 证书）
3.  可以验证文件发布者的身份吗？（即通过代码签名证书）
4.  该文件是否已知且受信任？（我有一段时间没有签名并在没有 SSL 的情况下访问的文件 - Chrome 很好，直到我在安全更新后更改了二进制文件......我假设它需要一些时间才能达到这个状态。）

如果这些标准之一通过，则下载不会被标记为恶意软件，如果它们都失败了，那就是。

**答案 2**：复制自[http://blog.chromium.org/2012/01/all-about-safe-browsing.html](http://blog.chromium.org/2012/01/all-about-safe-browsing.html)

恶意下载特别难以检测，因为它们经常发布在快速变化的 URL 上，甚至被“重新打包”以欺骗防病毒程序。Chrome 通过根据已知良好文件和发布者列表检查可执行下载来帮助对抗这种行为。如果文件不是来自已知来源，Chrome 会将主机的 URL 和 IP 以及其他元数据（例如文件的哈希值和二进制大小）发送给 Google。该文件使用机器学习分析以及以前从同一出版商和网站看到的文件的声誉和可信度自动分类。然后，Google 会将结果发送回 Chrome，Chrome 会在您面临风险时发出警告。

# visual-studio-2010 - 为什么 VS 2010 在 Win7 中显示此警告三角形？

> ID：10821472
> 
> 赞同：0
> 
> 时间：2012-05-30T17:43:03.040
> 
> 标签：visual-studio-2010, windows-7

谁能告诉我为什么我一直在任务栏上看到这个警告图标？我想不通。

![VS 2010 警告三角](../Images/803b3997c76aeba44f96458333e24207.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:23:39.930

[Win7 任务栏扩展](http://visualstudiogallery.msdn.microsoft.com/0c92dd87-50ac-489e-882b-b99de7624502/)将警告/错误覆盖图标添加到任务栏。

# python - 对 numpy 数组的所有值执行操作，引用 i 和 j

> ID：10821477
> 
> 赞同：3
> 
> 时间：2012-05-30T17:43:23.130
> 
> 标签：python, arrays, performance, numpy, indexing

我试图通过对二维数组应用操作来提高 numpy 性能，问题是数组中每个元素的值取决于该元素的 i,j 位置。

显然，最简单的方法是使用嵌套的 for 循环，但我想知道是否有更好的方法通过引用 np.indices 或类似的东西？这是我的“愚蠢”代码：

```
for J in range(1025):
    for I in range(1025):
        PSI[I][J] = A*math.sin((float(I+1)-.5)*DI)*math.sin((float(J+1)-.5)*DJ)
        P[I][J] = PCF*(math.cos(2.*float(I)*DI)+math.cos(2.*float(J)*DJ))+50000. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T17:55:02.650

由于您在两个数组之间进行乘法运算，因此可以在使用后使用[外部](http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.outer.html)`arange`函数来获取 sin/cos 的数组。

像这样的东西（使用 numpy 的三角函数，因为它们是矢量化的）

```
PSI_i = numpy.sin((arange(1,1026)-0.5)*DI)
PSI_j = numpy.sin((arange(1,1026)-0.5)*DJ)
PSI = A*outer(PSI_i, PSI_j)

P_i = numpy.cos(2.*arange(1,1026)*DI)
P_j = numpy.cos(2.*arange(1,1026)*DJ)
P = PCF*outer(P_i, P_j) + 50000 
```

如果您的环境是使用`from numpy import *`or设置的`from pylab import *`，那么在您的 trig 函数之前不需要这些`numpy.`前缀。我将它们保留在其中以将它们与其他方法区分开来`math`，这不适用于这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:55:38.977

您可以使用索引获取索引值的网格：

```
I,J=np.indices(PSI.shape)
#All constants set to one
PSI2=np.sin(I+1-.5)*np.sin(J+1-.5)
print PSI-PSI2 # should be zero. 
```

* * *

我用 ipython 做了一些计时：

```
import numpy as np
import math
A = 1
P = 1
DI = 1
DJ = 1

def a():
    PSI=np.zeros((1025,1025))
    for J in range(1025):
        for I in range(1025):
            PSI[I][J] = A*math.sin((float(I+1)-.5)*DI)*math.sin((float(J+1)-.5)*DJ)
%timeit a()

def b():
    PSI=np.zeros((1025,1025))
    for I,J in np.ndindex(*PSI.shape):
        PSI[I,J] = A*math.sin((float(I+1)-.5)*DI)*math.sin((float(J+1)-.5)*DJ)        
%timeit b()

def c():
    I,J=np.indices((1025, 1025))
    P2=A*np.sin((I+1-.5)*DI)*np.sin((J+1-.5)*DJ)    
%timeit c()

def d():
    PSI_i = np.sin((np.arange(1,1026)-0.5)*DI)
    PSI_j = np.sin((np.arange(1,1026)-0.5)*DJ)
    PSI = A*np.outer(PSI_i, PSI_j)    
%timeit d() 
```

结果在我的机器上一点也不奇怪：

```
1 loops, best of 3: 1.75 s per loop
1 loops, best of 3: 3.51 s per loop
10 loops, best of 3: 77.1 ms per loop
100 loops, best of 3: 7.16 ms per loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T17:52:27.250

试试 numpy 的 ndenumerate 函数，它返回值和索引：

```
>>> a
array([[5, 5, 5],
       [1, 2, 3]])

>>> for index, value in numpy.ndenumerate(a):
...     print index, value

(0, 0) 5
(0, 1) 5
(0, 2) 5
(1, 0) 1
(1, 1) 2
(1, 2) 3 
```

# windows - 使用 cdb 调试 msi 安装程序执行时出现错误 193

> ID：10821479
> 
> 赞同：0
> 
> 时间：2012-05-30T17:43:29.790
> 
> 标签：windows, debugging, windows-installer

当尝试使用 CDB 调试 msi 安装程序的安装过程时，cdb -g -G -logo c:\log.log c:\temp\abc.msi 我收到以下错误消息“无法执行 abc.msi”， Win32 错误 On193 “%1 不是有效的 Win32 应用程序。” 调试对象初始化失败，Win32 错误 On193 “%1 不是有效的 Win32 应用程序” 安装程序的路径中也没有空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:41:59.787

您可以使用映像文件执行选项 (IFEO) 让操作系统启动调试器，然后让调试器启动被调试对象。在`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options`创建一个名为`msiexec.exe`. 在该新键中创建一个名为 REG_SZ 的值并将`Debugger`其设置为`<path_to_cdb> -g -G -logo c:\log.log c:\temp\abc.msi`

注意：我通常将它与 windbg.exe 一起使用，而不是 cdb.exe。我认为 cdb.exe 可能已经需要命令提示符，因此请尝试使用 windbg.exe 或 ntsd.exe。

注意 2：您可能希望删除该`-g`选项，以便有机会在执行开始之前设置一些断点。

您可以在 Windows 调试工具附带的 debugger.chm 帮助文件中找到有关 IFEO 的更多信息。

# javascript - FancyBox 图片库中的 jQuery 滑动门效果？

> ID：10821481
> 
> 赞同：0
> 
> 时间：2012-05-30T17:43:33.967
> 
> 标签：javascript, jquery, lightbox, portfolio

您如何使用作品集画廊中的推拉门悬停效果使 FancyBox jQuery 图像可点击？现在推拉门效果有效，**但是**当您单击图库图像时，fancybox 没有任何作用。

如何让jquery.easing.1.3.js（滑动门效果）和 jquery.fancybox.js 一起工作**？**

我按照本[教程](http://www.queness.com/post/620/create-a-stunning-sliding-door-effect-with-jquery)评论中的说明**删除**：window.location = $(this).find('a').attr('href'); - 在 jquery.easing HTML Head Tag 代码中

我的网站有很多内容，因为它是一个单页作品集。我正在努力完成这个网站以发送给雇主寻找工作。我很沮丧，因为我在这个网站上工作了这么久，我需要一份工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:39:04.900

你必须更换

```
window.location = $(this).find('a').attr('href'); 
```

和

```
var url = $(this).find('a').attr('href');
$.fancybox({
    'padding'       : 0,
    'href'          : url,
    'title'         : 'Lorem ipsum dolor sit amet',
    'transitionIn'  : 'elastic',
    'transitionOut' : 'elastic',
    'type'      : 'image'
}); 
```

**注意**

我正在使用`'type' : 'image'`，因为我从链接加载图像`http://placekitten.com/200/300`，在这种情况下强制类型是必要的，因为`url`没有有效的图像扩展名。

如果您不需要，请删除它。

[工作演示](http://joynag.net/demos/door/)

# javascript - 调用 Javascript 函数处理表单后，HTML 表单未打印到浏览器

> ID：10821482
> 
> 赞同：0
> 
> 时间：2012-05-30T17:43:36.370
> 
> 标签：javascript

```
<script type="text/javascript">

function gr8r( form ) {

document.write( '"' + form.s1.value + '"' );    

if ( form.s1.value > form.s2.value ) 
    document.write( ' is gr8r than ' );
else
    document.write( ' is not gr8r than ' );

document.write( '"' + form.s2.value + '"' );

}

</script>

<form action="" method="post">

<input type="text" name="s1" value="" />
<input type="text" name="s2" value="" />
<br />
<input type="button" value="click" onclick="gr8r(this.form)" />

</form> 
```

我期望的结果是在我单击按钮然后显示 html 表单后执行 javascript ......但之后没有显示 html 表单......

非常感谢任何帮助，谢谢！

我想要的输出是：

```
2 is gr8r than 1

<form action="" method="post">

<input type="text" name="s1" value="" />
<input type="text" name="s2" value="" />
<br />
<input type="button" value="click" onclick="gr8r(this.form)" />

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:22:05.970

你想达到什么目的？在表单下方或上方显示文本？Document.Write 在加载期间未内联运行时，实际上会覆盖文档的全部内容。因此，要执行您想做的事情，您需要创建一个容器来将文本放入其中，然后将文本放入其中。例如：

```
<div id="message"></div>
<form action="" method="post">

<input type="text" name="s1" value="" />
<input type="text" name="s2" value="" />
<br />
<input type="button" value="click" onclick="gr8r(this.form)" />

</form> 
```

那么javascript将是：

```
<script type="text/javascript">

function gr8r( form ) {

message = document.getElementById("message");
msgStr = '"' + form.s1.value + '"';

if ( form.s1.value > form.s2.value ) 
    msgStr += ' is gr8r than ';
else
    msgStr += ' is not gr8r than ';

msgStr += '"' + form.s2.value + '"';

message.innerHTML = msgStr;

}

</script> 
```

更好的方法是使用名为 JQuery(http://jquery.com) 的 JavaScript 框架。它提供了附加事件处理程序和操作内容的简单方法。删除内联 javascript 有利于维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:24:17.957

你可以试试这个：

```
<script type="text/javascript">
function gr8r( form ) {
    document.getElementById("output").innerHTML = document.getElementById("s1").value;

    if ( document.getElementById("s1").value > document.getElementById("s2").value ) 
        document.getElementById("output").innerHTML += ' is gr8r than ';
    else
        document.getElementById("output").innerHTML += ' is not gr8r than ';

    document.getElementById("output").innerHTML += document.getElementById("s2").value;
}
</script>

<div id="output"></div>
<form action="" method="post">
    <input type="text" id="s1" value="" />
    <input type="text" id="s2" value="" />
    <br />
    <input type="button" value="click" onclick="gr8r(this.form)" />
</form> 
```

div 用于显示输出。div 和表单的字段都由它们的 id 选择。

如果您想确保用户没有输入字符串，请使用以下 javascript：

```
function gr8r( form ) {
    if (isFinite(document.getElementById("s1").value) && isFinite(document.getElementById("s2").value)) {
        document.getElementById("output").innerHTML = document.getElementById("s1").value;

        if (document.getElementById("s1").value > document.getElementById("s2").value) 
            document.getElementById("output").innerHTML += ' is gr8r than ';
        else
            document.getElementById("output").innerHTML += ' is not gr8r than ';

        document.getElementById("output").innerHTML += document.getElementById("s2").value;
    }
    else {
        document.getElementById("output").innerHTML = "Please enter only floats!";
    }
} 
```

# apache - 使用 Apache Camel 进行负载平衡

> ID：10821484
> 
> 赞同：2
> 
> 时间：2012-05-30T17:43:46.753
> 
> 标签：apache, load-balancing, apache-camel

我可以从另一台机器或 JVM 访问 SEDA 或 VM 队列吗？
我实际上想在 Camel 的帮助下实现负载平衡，但不想为此引入另一个消息传递框架。我只想使用一些内置队列将负载从生产者分配给不同的消费者。
是否可以？如果没有，那么我有什么选择？
**另一种方法：（Pull Approach）** 不确定新方法有多优化或新方法的优缺点是什么，所以请帮助我分析这种方法。
消息将被放入主队列，所有工作系统都将监听主队列。假设有 100,000 条消息被放入主队列，5 个工作系统正在监听它。工作系统会一一处理来自主队列的消息。这种方法有两个很大的好处：

1.  我不需要担心向生产者注册我的工作系统。第六个系统刚刚启动并开始收听主队列。
2.  我不需要担心向免费的消费者系统发送消息。当工作系统处理完一条消息时，它会从主队列中获取另一条消息。
    让我知道你对此的看法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:56:28.587

SEDA 和 VM 端点分别对主机上下文和 JVM 有效。为了促进 JVM 到 JVM 的消息传递，您需要使用无线协议组件，例如但不限于 Mina、HTTP 或 JMS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:04:20.273

SEDA 和 VM:// 只能在同一个 JVM 上工作。

Java 消息传递中的负载平衡通常使用 JMS 和[竞争消费者模式](http://www.eaipatterns.com/CompetingConsumers.html)来实现。您将消息发送到队列，并且多个消费者竞争处理它们。

如果带有队列的代理成为瓶颈 - 考虑使用扇出模式和代理网络。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T05:34:59.473

最简单的方法是使用jms。如果您有 n 条路由在同一个 jms 队列上侦听，那么它们将自动进行负载平衡。如果一个消失了，负载将在其余的负载上得到平衡。我建议从 ActiveMQ 开始，因为它很容易设置并且与 Camel 很好地集成。为了使代理具有高可用性，您可以设置两个独立的代理或为每个骆驼实例设置一个嵌入式代理。

# php - 如何在页面上显示不同的mysql表行，按照它们插入的顺序

> ID：10821486
> 
> 赞同：2
> 
> 时间：2012-05-30T17:43:57.900
> 
> 标签：php, mysql, html

像 facebook 这样的社交网络如何按照最初发布的顺序在页面上显示不同的内容，例如照片、状态、用户活动。我做了很多研究，但似乎找不到任何关于如何使用 PHP 和 MYSQL 完成的好例子。

我已经包含了一个视觉示例来说明我的意思。 ![视觉示例](../Images/8062653d0f3354b1fb01d2878c7ee34b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:15:19.013

我认为您的意思是不同的内容位于单独的表格中，例如照片、状态更新、新连接等。并且您希望最后一面墙以相同的时间顺序将所有这些表格中的数据拉到一个单独的墙上。所以，我建议为墙创建一个新表，其中包含以下主要字段：

`Activity_identifier`,`activity_id`和`timestamp`. 这`Activity_identifier`是活动的预定义身份，例如分享照片（比如说 1）、在墙上发帖（比如说 2）等，并且`timestamp`是用户记录该活动的时间，并且`activity_id`是该活动的 id对应的表。

每次用户创建一个新活动时，在填充该活动的对应表时，还要在该表中记录一个对应的条目用于墙。

现在，您创建墙的最终查询只需调用这个新表 for wall with `ORDER BY TIMESTAMP DESC`，然后需要通过外键将结果数据与其他活动表（`Activity_identifier`在此处智能使用）连接，`activity_id`以按照确切的时间顺序重新创建墙命令用户创建它们。

对于墙上的增量调用，维护最后一个查询的时间戳（比如说*xtime*）和每个调用 do `timestamp > xtime ... ORDER BY TIMESTAMP DESC`。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:48:05.183

您可以简单地将一个字段存储在数据库中，该字段包含创建指定内容时的时间戳或创建日期，并且从数据库中选择它时只需按提到的 creation_date 对其进行排序:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T17:50:56.477

在每次插入（或更新）时使用表中的[Timestamps](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)字段（至少我是这样做的），默认值为[CURRENT_TIMESTAMP](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html)，这将让您使用简单的 SQL 语句按插入的日期（和时间）排序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T19:15:31.103

将其视为发布者和订阅者。每条消息在联结表中都有一个接收者列表。

```
Message
------------
message_id
message_body

Message_receivers
------------
message_id
user_id

Message_photos
------------
message_id
photo 
```

这是我为我获取消息的方式（user_id 1）：

```
SELECT m.*, mp.*
  FROM Message m
  JOIN Message_receivers mr
    ON mr.message_id = m.message_id AND mr.user_id = 1
  LEFT JOIN Message_photos mp
    ON mp.message_id = m.message_id
  ORDER BY m.message_id DESC 
```

您在用户发帖时更新这些列表，而不是在用户阅读他们的新闻提要时尝试构建列表，因为即使您可能有很多帖子，您也会有更多的阅读量。

Message_receivers 记录将过期并滚降。新闻提要只能追溯到到目前为止，但如果您转到用户的页面，您可以看到他们的所有帖子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T17:46:03.270

当他们进行查询时，他们有一个 ORDER BY 子句。例如：

```
SELECT `photos`
FROM `submissions`
ORDER BY `dateline` DESC 
```

`dateline`可以存储为整数[unix 时间](http://en.wikipedia.org/wiki/Unix_time)，然后使用简单的数学来设置其他参数。例如：

```
$sql = "SELECT `photos`
FROM `submissions`
WHERE `dateline` >= " . (date() - 60*60*24*7) . "
ORDER BY `dateline` DESC"; 
```

这只会为您提供过去一周的提交。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T17:46:23.053

使用时间戳列并跟踪代码中每个条目的插入时间。查询数据时，`ORDER BY`时间戳列。

# c++ - C++中的抽象矩阵类

> ID：10821491
> 
> 赞同：1
> 
> 时间：2012-05-30T17:44:15.820
> 
> 标签：c++, design-patterns, abstract-class

我想为支持矩阵乘法的矩阵库创建一个包装类：

```
MyMatrix MyMatrix::operator* (const MyMatrix & other) const { ... } 
```

我的第一个想法是，如果我创建一个`MyMatrix`包含上述签名作为纯虚函数的抽象类（并从中派生我的包装器）会很酷，但事实证明这是不可能的，因为该函数具有抽象返回类型。我想知道这个问题的干净解决方案是什么样的。或者抽象类方法是错误的，我应该只使用具体的包装类吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:49:00.557

我会去：

```
class Matrix
{
public:
   //all the methods here

private:
    Implementation *_impl;
}; 
```

因此，该类的用户将在`Matrix`任何地方只使用类，您将使用“Implementaion”轻松实现接口。

此外，如果您稍后需要更改实现 - 它不会影响您客户的代码。只是`Matrix`类的实现

**请注意**，这`_impl`很容易成为一切，而不仅仅是一个指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:55:23.500

使用 Pimpl 成语。

在您的情况下，`Matrix`是一个具体类，它拥有（持有指向）抽象`MatrixImpl`类型对象，并将所有方法转发给它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T17:46:05.653

以下应该有效：

```
virtual MyMatrix* MyMatrix::operator* (const MyMatrix & other) const = 0; 
```

# xslt - XPath 排序内联 if 语句

> ID：10821492
> 
> 赞同：1
> 
> 时间：2012-05-30T17:44:17.230
> 
> 标签：xslt, xpath, xquery

在以前的一些帖子的帮助下，我一直在尝试使用 XPath 和 XQuery 来解决这个问题，但无济于事。现在我有空子节点，它们应该默认为在排序结束时排序，但不幸的是，排序根本不会在这些空节点上发生。因此，我一直试图找到一种在排序部分将它们设置为零的方法。下面是一个示例：

```
<xsl:for-each select="MyItems/Item">
<xsl:sort select="Order/obj/Number" order="ascending"> 
```

我想做一些类似于内联 if 语句的事情，作为**下面**C# 中的一部分：

```
foreach(item in MyItems.OrderBy(Order/obj/Exists != false ? Order/obj/Number : 0) 
```

我正在使用这些链接：[动态 xpath 表达式](https://stackoverflow.com/questions/2690096/dynamic-xpath-expression) 和[带有内联 if 语句的 XSLT](https://stackoverflow.com/questions/8163136/xslt-transfom-with-inline-if-statements)转换来尝试理解，但我仍然没有得到它。任何帮助表示赞赏。我需要 XSLT 中的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:03:16.327

您的情况不清楚，因为您没有提及 XML 的内容或 XSLT 转换的性质。但这听起来像是您有`Item`没有`Order/obj/Number`要排序的元素的元素？

我会编写这样的代码

```
<xsl:template match="/root">

  <xsl:copy>

    <xsl:apply-templates select="MyItems/Item[Order/obj/Number]">
      <xsl:sort select="Order/obj/Number" />
    </xsl:apply-templatesh>

    <xsl:apply-templates select="MyItems/Item[not(Order/obj/Number)]" />

  </xsl:copy>

</xsl:template>

<xsl:template select="MyItems/Item">
  <xsl:copy-of select="current()" />
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:15:48.520

谈论“空节点”没有帮助。这不是一个定义明确的术语。向我们展示您的 XML、您想要的结果和实际结果，我们可以为您提供帮助。

应该发生的是，如果 xsl:sort 中的选择表达式返回一个空序列/节点集，则有效的排序键是一个长度为零的字符串，因此这些项目在任何其他项目之前排序（假设升序）。

# c++ - 在 mingw 下编译时出现 PathFindFileName 错误

> ID：10821496
> 
> 赞同：2
> 
> 时间：2012-05-30T17:44:59.950
> 
> 标签：c++, compiler-errors, mingw

代码：

```
#include <shlwapi.h>
int main() {
  TCHAR buffer[MAX_PATH];
  DWORD bufSize;
  GetModuleFileName(NULL, buffer, bufSize);
  TCHAR* out = PathFindFileName(buffer);
} 
```

错误信息：

```
ccQzTh4t.o:pathfind.cpp:(.text.startup+0x40): undefined reference to `_imp__PathFindFileNameA@4'
collect2: ld returned 1 exit status 
```

也许我忘记了一些包括？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:49:37.740

`PathFindFileName`是`Shlwapi.lib`库的一部分，您需要链接它。

# mysql - 将表加载到 MYSQL

> ID：10821497
> 
> 赞同：0
> 
> 时间：2012-05-30T17:45:05.923
> 
> 标签：mysql

当我运行以下代码时，我收到一条错误消息，指出找不到该文件。我不确定为什么。我检查了文件名，它们匹配。

```
load data local infile '/Users/blah/Desktop/A.csv' 
into table B fields terminated by ','
enclosed by '"' lines terminated by '\n' ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:50:37.263

为了安全起见，MySQL 只知道它的目录结构。如果它能够读取 /Users/... 那么这将是一个安全漏洞。

要解决此问题，您可以将 A.csv 复制到 /var/lib/mysql/[Schema Name]/ 中，然后“加载数据”该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:48:07.740

请记住，文件路径必须相对于数据库**服务器**。

# sql - Oracle CONNECT 操作

> ID：10821498
> 
> 赞同：1
> 
> 时间：2012-05-30T17:45:08.017
> 
> 标签：sql, oracle, hierarchical

我已经阅读了有关操作的[Oracle 文档](http://docs.oracle.com/cd/B12037_01/server.101/b10759/queries003.htm)`CONNECT`，但我似乎无法理解现有应用程序中的数据库查询。以下是查询的简化版本。

```
SELECT LEVEL,
       CONNECT_BY_ROOT MY_MONTH MY_LABEL,
       b.*
FROM (
    SELECT ROWNUM AS ORDERING, 
           MY_AREA,
           TRUNC (THE_MONTH, 'MONTH') AS MY_MONTH
    FROM MY_TABLE
    ORDER BY MY_AREA, MY_MONTH DESC
) b
WHERE LEVEL <= 3
START WITH 1 = 1
CONNECT BY PRIOR MY_AREA = MY_AREA
       AND PRIOR ORDERING = ORDERING - 1
       AND PRIOR MY_MONTH <= ADD_MONTHS(MY_MONTH, 6); 
```

虽然我对`CONNECT`功能有基本的了解，但这种组合让我迷失了方向。谁能解释这个查询中发生了什么？

我认为最后说要获取所有具有相同区域且行号比当前行号小 1 的行以及从当前日期起 6 个月之前的日期。我猜这只会返回 1 行（由于行号标准）或如果不满足其他标准则返回 0 行。然后也许第一个`CONNECT_BY_ROOT`说要获得该行的`MY_MONTH`价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:13:20.043

以 开头`b`，它是一个包含`MY_AREA`（数字？）的表`MY_MONTH`， 是一个截断月份的日期（即天都设置为`01`），以及一个别名`ROWNUM`，它由`ORDER BY`子句确定，即`ORDER BY MY_AREA, MY_MONTH DESC`，例如：

```
+----------+---------+-----------+
| ORDERING | MY_AREA | MY_MONTH  |
+----------+---------+-----------+
| 1        | 10      | 01-SEP-12 |
| 2        | 10      | 01-JAN-12 |
| 3        | 12      | 01-AUG-12 |
| 4        | 12      | 01-JUN-12 |
| 5        | 12      | 01-MAY-12 |
| 6        | 12      | 01-JAN-12 |
| 7        | 12      | 01-JAN-10 |
+----------+---------+-----------+ 
```

该`WHERE`子句直到稍后才会发挥作用，因此请继续使用`START WITH`，它仅表示`1 = 1`。这意味着`b`查询中将使用每一行；如果您在这里有其他条件，例如`my_area < 5`或其他情况，则只会使用特定的一组行。

现在，`CONNECT BY`，它决定了应该如何构建层次结构。这就像一个`WHERE`子句，除了`PRIOR`告诉数据库查看层次结构中的上一层的特殊关键字。所以：

*   `PRIOR MY_AREA = MY_AREA`只是意味着子节点必须具有相同的“MY_AREA”值
*   `PRIOR ORDERING = ORDERING - 1`表示子节点应该在的排序中的当前节点*之后排一排。*`b`
*   `PRIOR MY_MONTH <= ADD_MONTHS(MY_MONTH, 6)`意味着为了加入层次结构，前一个`MY_MONTH`应该在当前节点日期之后的 6 个月或更短的时间内。

然后创建整个层次结构。`LEVEL`(special for `CONNECT BY`...) 设置为层次结构中的级别，`CONNECT_BY_ROOT`给出该层次结构`MY_MONTH`的根的值并将其别名为`MY_LABEL`. 在此之后，该表将类似于下表。为了清楚起见，我为每个层次结构添加了分隔符。

```
+-------+-----------+----------+---------+-----------+
| LEVEL | MY_LABEL  | ORDERING | MY_AREA | MY_MONTH  |
+-------+-----------+----------+---------+-----------+
| 1     | 01-SEP-12 | 1        | 10      | 01-SEP-12 |
+-------+-----------+----------+---------+-----------+
| 1     | 01-JAN-12 | 2        | 10      | 01-JAN-12 |
+-------+-----------+----------+---------+-----------+
| 1     | 01-AUG-12 | 3        | 12      | 01-AUG-12 |
| 2     | 01-AUG-12 | 4        | 12      | 01-JUN-12 |
| 3     | 01-AUG-12 | 5        | 12      | 01-MAY-12 |
| 4     | 01-AUG-12 | 6        | 12      | 01-JAN-12 |
+-------+-----------+----------+---------+-----------+
| 1     | 01-JUN-12 | 4        | 12      | 01-JUN-12 |
| 2     | 01-JUN-12 | 5        | 12      | 01-MAY-12 |
| 3     | 01-JUN-12 | 6        | 12      | 01-JAN-12 |
+-------+-----------+----------+---------+-----------+
| 1     | 01-MAY-12 | 5        | 12      | 01-MAY-12 |
| 2     | 01-MAY-12 | 6        | 12      | 01-JAN-12 |
+-------+-----------+----------+---------+-----------+
| 1     | 01-JAN-12 | 6        | 12      | 01-JAN-12 |
+-------+-----------+----------+---------+-----------+
| 1     | 01-JAN-10 | 7        | 12      | 01-JAN-10 |
+-------+-----------+----------+---------+-----------+ 
```

因此，如您所见，每一行都出现在其自身层次结构的顶部，所有节点都满足其下的`CONNECT BY`条件。

最后，`WHERE`应用该子句；这会切断`> 3`每个层次结构中的所有级别，因此您最多只剩下 3 个级别。这仅影响中间层次结构中的一行，即`LEVEL`= 4 的行。

# algorithm - F_2 上的矩阵乘法算法仅需 O(n^2.81/(log n)^0.4)。创建算法。但是怎么做？

> ID：10821501
> 
> 赞同：3
> 
> 时间：2012-05-30T17:45:20.430
> 
> 标签：algorithm, matrix, time-complexity, matrix-multiplication, strassen

我们有一个矩阵，其元素在整数模 2 (F_2) 的字段中。我们正在寻找将 nxn 矩阵乘以 F_2 的算法`O(n^2.81/(log n)^0.4)`

怎么可能？

我知道，Strassen 的算法给出了`O(n^2.81)`，但是我们怎么能得到这个因子`(log n)^0.4`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:40:46.813

您可以执行以下操作：

取每个可能的矩阵，其维度为![](../Images/61e6b9a929f5bc09a4befd0d7ee12ce6.png)。有![](../Images/acb3b2752ebea1b840a4c062bb611d50.png)这样的矩阵（![](../Images/7bacd9bc9eadf7f241559a055e346ace.png)）。

预先计算这些矩阵的乘法结果。这为您提供了带有尺寸的表格![](../Images/34bd7573a175c01008aa17ae67854a2c.png)。然后在 Strassen 算法的递归阶段，如果所需的乘法矩阵足够小，您可以在此表中使用预先计算的值（如果小于![](../Images/914a5fcf06fda0777b201ba804d3ffd6.png)您可以用零填充适当的行和列）。让![](../Images/8849a69b5be67f09453f3bb2060ebe27.png). 所以你有以下递归：

![](../Images/9da81571aa272322c242243a64d25097.png)

注意，递归深度是![](../Images/63f726b18c4a0905458b42e7d3355317.png)，所以你有：

![](../Images/e5201a4b45942bd1d2c5ec0c19c4c30e.png)

使用几何级数公式：

![](../Images/10d834664194c20d3d17b37e84bacef6.png)

# c# - 文本框被一个巨大的字符串禁用

> ID：10821504
> 
> 赞同：2
> 
> 时间：2012-05-30T17:45:27.757
> 
> 标签：c#, winforms, textbox

`textbox`当输入一个巨大的字符串时，我遇到了问题。

就我而言，文本框用于编写电子邮件地址，并且没有字符限制。所以，我做了这个测试：我在记事本中写了 200 个电子邮件地址，然后我将文本粘贴到上面`textbox`，文本消失了，但是如果我改变控件的焦点，文本又会显示出来。我已经看到了这个[链接](https://stackoverflow.com/questions/8097949/disabling-the-maxlength-property-of-a-textbox-in-c-sharp)，但它对我没有帮助。我已经尝试将`MaxLength`属性更改为 0（[微软怎么说](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.maxlength.aspx)），但它在这里也不起作用。

考虑一个包含 50 个字符的电子邮件地址，MaxLength 属性不会有问题，因为 200 个电子邮件地址乘以 50 个字符（每封电子邮件），我将有 10000 个字符，默认值为`TextBox.MaxLength`32767。

而且，在您询问代码之前，我只将文本设置为字符串。

`myEmailObject.Address = txtEmail.Text;`

我应该使用`RichText`，还是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T18:00:45.617

这是 Windows EDIT 控件（由 TextBox 类包装的本机控件）中的一个已知限制。我知道 Windows 7 SP1 和 Windows 8 中存在限制，早期版本几乎肯定也有。

一旦在单行 TextBox 中显示超过 5000 个字符，您将使用此限制。给予或接受，它基于显示文本的总宽度（以像素为单位）。`i`因此，当您使用较小的字体或多于`W`字符时，您可以容纳更多。Afaik，当宽度超过 32767 像素时，您将超出限制，这个数字会在 USER32 api 的几个地方弹出，并且可以追溯到 Windows 版本 <= 3，即 16 位。保持 EDIT 在主要版本之间兼容 30 年是一项重大努力。

这个限制不会经常受到考验，在单行文本框中填充这么多字符是不切实际的。用户没有合理的方法可以在这么小的空间内用这么多的文本做任何有用的事情。不可能阅读它，可靠的编辑肯定是不可能的。

考虑一个更实用和用户友好的用户界面，限制不再是一个问题。使用 Multiline = true 或仅显示使用省略号的占位符字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T17:49:23.177

尝试将 Multiline 属性设置为 True 并增加文本框的高度

# php - Facebook 抓取返回错误 500

> ID：10821509
> 
> 赞同：0
> 
> 时间：2012-05-30T17:45:48.320
> 
> 标签：php, facebook-php-sdk, facebook-apps

我`https://developers.facebook.com/tools/debug`用来确定 facebook 从我的页面看到的内容。

当我为我的页面做事时，Facebook 抓取仅因为这条线而返回 500 错误

```
$photoObj=$facebook->api("/$photoId?access_token=$access_token"); 
```

虽然页面执行正确？？

任何想法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:49:55.747

我改变了检索图像的技术，现在我这样做：

```
$access_token=$facebook->getAccessToken();
$photoObj=file_get_contents("https://graph.facebook.com/$photoId?access_token=$access_token");
$photoObj=json_decode($photoObj);
$picURL=$photoObj->source; 
```

它有效:-)

# java - GWT 中 ListBox 元素的水平滚动条

> ID：10821511
> 
> 赞同：3
> 
> 时间：2012-05-30T17:45:49.370
> 
> 标签：java, gwt

我正在使用 GWT 2.4.0，当我填充 ListBox 小部件时出现问题。当我放置的元素多于 ListBox 可以显示的元素时，垂直滚动条看起来很好，让用户可以看到所有元素。但是当我添加一个比列表框宽度长的字符串时，水平滚动条不会出现，用户看不到字符串的结尾。代码在这里：

```
private VerticalPanel mainPanel = new VerticalPanel();
private ListBox someList = new ListBox();
public void onModuleLoad() {
someList.setVisibleItemCount(5);
    someList.setWidth("180px");
    someList.addItem("Item1");
    someList.addItem("Item2");
    someList.addItem("Item3333333333333333333333333");
    someList.addItem("Item4");
    someList.addItem("Item5555555555555555555555555");
    someList.addItem("Item6");
    someList.addItem("Item7");
    someList.addItem("Item8");
    mainPanel.add(someList);
    RootPanel.get("list").add(mainPanel);
} 
```

因此，第 3 项和第 5 项的结尾被切断，水平滚动条不会出现。我尝试添加 *someList.setStyleName("textarea-style1");* 进入 onModuleLoad() 函数并在 CSS 文件中定义它，如下所示：

```
.textarea-style1
{
    BACKGROUND-COLOR: #FBFBEF; 
    FONT-SIZE: 15px;
    overflow: scroll;
} 
```

这样做之后，我可以看到垂直和水平滚动条，但水平滚动条仍然不起作用。它被禁用。

现在我只是为 ListBox 中的每个项目设置一个标题，这样用户可以通过将鼠标放在它上面看到带有完整字符串的弹出窗口，但我想改用滚动条。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:59:35.433

A`ListBox`只是一个 HTML `<select>`。我认为没有一种方法可以设置水平滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-04T18:17:51.903

有一个[overflow-x](https://developer.mozilla.org/en-US/docs/Web/CSS/overflow-x) css 属性，它采用 values `visible | hidden | scroll | auto`。这在 chrome 中对我有用。实际上，我遇到了滚动条未显示的相反问题，因为`overflow`css 属性被包含元素设置为隐藏。

# javascript - 将函数参数从 onchange 传递给 JavaScript 函数

> ID：10821515
> 
> 赞同：0
> 
> 时间：2012-05-30T17:46:04.227
> 
> 标签：javascript, ajax

好的，当下拉框更改时，我目前正在使用 AJAX 更新我的网站的一部分，但是我无法传递参数以供该函数使用。

这是HTML：

```
<script type='text/javascript' src='ajax.js'></script> //Where to find function

<div id="combobox" style="width: 150px; height: 300px; overflow-y: scroll">
  <select onchange="MakeRequest(test); location = this.options[this.selectedIndex].value;"> 
    <option>Races</option>

    <?php ComboBox() ?>
  </select>
   .
   . 
```

这是外部 ajax.js 文件中的 AJAX 函数：

```
function MakeRequest(test) {
  var linkInfo = "teleport.php?call=" + test;
  var xmlHttp = getXMLHttp();

  xmlHttp.onreadystatechange = function() {
    if (xmlHttp.readyState == 4) {
      HandleResponse(xmlHttp.responseText);
    }
  }

  xmlHttp.open("GET", linkInfo, true);
  xmlHttp.send(null);
} 
```

我将如何让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:50:38.537

```
location=this.options[this.selectedIndex].value 
```

这是将页面更改为不同的位置。那不是AJAX，删除它。

相反，把那个`this.options[this.selectedIndex].value`（或只是`this.value`- 一样的东西）放在你放的东西上`test`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:22:32.833

Ajax 本质是异步的。我猜你想先向服务器发送一个 AJAX 请求，然后根据它的响应结果，将客户端的用户重定向到另一个页面。

在您的代码中发生的情况是，首先`MakeRequest()`调用函数，但它会立即返回（因为 ajax 是异步的），因此`onchange`将调用属性的下一部分，并将用户重定向到另一个页面。

要进行测试，请使您的 ajax 调用同步。见[这里](http://thoughtresults.com/jquery-synchronous-ajax)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:30:16.833

```
<select onchange="MakeRequest(this.value); " /> 
```

# google-apps-script - GAS 中是否提供“链接”功能？

> ID：10821521
> 
> 赞同：0
> 
> 时间：2012-05-30T17:46:29.817
> 
> 标签：google-apps-script

是否可以“链接”功能？比如说，我有一个 serverclickhandler，然后想在它之后立即调用另一个函数。我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:51:00.497

要在第一个处理程序之后执行第二个处理程序，您只需要直接从您的第一个处理程序调用它，例如

```
var app = null;
function firstHandler(e) {
  if( app == null )
    app = UiApp.getActiveApplication();
  //do your thing

  //now, instead "return app;" you return the second handler
  return secondHandler(e);
}

function secondHandler(e) {
  if( app == null )
    app = UiApp.getActiveApplication();
  //do your job
  return app;
} 
```

我将`app`var 放置在全局范围内，因此您只能在必要时获取它（在函数之间共享它而不显式传递它），从而节省了第二次`getActiveApplication()`调用的可能代价高昂且未知的行为（至少对我而言）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:55:06.263

不确定我是否完全理解您的问题，但您所指的服务器处理程序正是为此而设计的......（[请参阅文档](https://developers.google.com/apps-script/guide_user_interfaces?hl=fr-FR#UIUpdate)）请注意，您可以将多个处理程序分配给 UI 元素以触发不同的功能并最终链接它们。

# javascript - javascript datapicker 限制日期

> ID：10821523
> 
> 赞同：1
> 
> 时间：2012-05-30T17:46:31.383
> 
> 标签：javascript, jquery, jquery-ui-datepicker

我有这段代码来限制各种“日期选择器日期”。：

```
$(function() {
    $(".datepicker").datepicker({
        dateFormat: 'dd-mm-yy'
    })({
        changeMonth: true,
        changeYear: true
    });
    $(".datepicker").datepicker;
});

var calcDate = function() {
    var start = $('#conference_date_in').datepicker('getDate');
    var end = $('#conference_date_out').datepicker('getDate');
    var days = (end - start) / 1000 / 60 / 60 / 24;

    document.getElementById('total_days').value = days;
}

$('#conference_date_out').change(calcDate);
({ minDate: -20, maxDate: "+1M +10D" });

$('#conference_date_in').change(calcDate);
</script> 
```

我的最小/最大日期在错误的部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:54:22.410

你必须像这样设置mindate和max date

```
$( "#datepicker" ).datepicker({ minDate: -20, maxDate: "+1M +10D" }); 
```

[例子](http://jqueryui.com/demos/datepicker/min-max.html)

参考：[mindate 和 maxdate](http://jqueryui.com/demos/datepicker/#option-minDate)

如果您想禁用特定日期范围，可以使用以下代码

```
//  unavailable dates range
var dateRange = ["2012/05/20","2012/05/29"]; // yyyy/MM/dd

function unavailable(date) {
    var startDate = new Date(dateRange[0]);
    var endDate = new Date(dateRange[1]);
    var day = date.getDay();

    if(date > startDate && date < endDate )
        return [false, "disabled"];
    else if(day > 0 && day < 6)
        return [true, "enabled"];
    else 
        return [false, "disabled"];

}

$('#iDate').datepicker({ beforeShowDay: unavailable }); 
```

[工作小提琴](http://jsfiddle.net/joycse06/jPUBv/3/)

# url - 在 url 中使用带有命名锚点的 drupal_goto

> ID：10821529
> 
> 赞同：1
> 
> 时间：2012-05-30T17:47:00.463
> 
> 标签：url, drupal-7, anchor, goto

我正在尝试前往我的脚本选择的位置。我正在使用`url()`并`drupal_goto()`存档它，但在[url()-documentation-page](http://api.drupal.org/api/drupal/includes!common.inc/function/url/7)命名的片段选项似乎不像我理解的那样工作，或者更有可能`drupal_goto()`正在更改链接。

我想要的链接字符串应该如下所示：

```
/topsection/section#subsection 
```

但相反，我得到了像这样编码的哈希符号

```
/topsection/section%23subsection 
```

这是我的代码：

```
$section = url( '/topsection/' . 'section', array( 'fragment' =>  'subsection', 'alias' => TRUE ) );
drupal_goto( $section ); 
```

你能帮忙的话，我会很高兴！谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T17:59:31.377

**哈！**刚刚找到解决方案：

我误解了文档。正确地告诉我应该使用`drupal_goto()`片段/锚点作为选项传递，就像我会给`url()`.

这是有效的：

```
drupal_goto( '/topsection/' . 'section', 
  array( 
    'fragment' => 'subsection',
    'alias' => TRUE ) ); 
```

# android - 将一个事件从一个活动发送到多个片段

> ID：10821530
> 
> 赞同：0
> 
> 时间：2012-05-30T17:47:00.870
> 
> 标签：android, android-activity, communication, fragment

我希望我的活动将相同的事件发送到多个片段。而不是让我的活动调用每个单独的片段方法：`FragmentA.DoTask()`、、、`FragmentB.DoTask()`等等`FragmentC.DoTask()`......我宁愿让我的活动只发送一个事件，然后让片段监听这个事件。

在开发人员文档中，他们使活动“侦听”片段，然后活动调用片段的方法。是否有可能反过来：让片段“听”活动。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-17T05:37:05.127

你可以使用**EventBus**系统。

[RRiBbit](http://www.rribbit.org/eventbus.html)上的描述（尽管这个库与 Android 无关）精确地定义了它：

> Eventbus 是一种机制，它允许不同的组件在不知道彼此的情况下相互通信。组件可以向 Eventbus 发送事件，而无需知道谁会接收它或有多少其他人会接收它。组件还可以在 Eventbus 上监听事件，而无需知道是谁发送了事件。这样，组件可以在不相互依赖的情况下进行通信。此外，替换组件非常容易。只要新组件了解正在发送和接收的事件，其他组件就永远不会知道。
> 
> 那么这里的组件到底是什么？好吧，组件可以是任何东西。在大多数 Eventbus 中，它们是 Java 对象。他们发送事件，他们也收听事件。

在 Android 中，您可以使用[EventBus](https://github.com/greenrobot/EventBus)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:52:27.990

我认为没有办法解决它。文档中的“听”这个词更具隐喻性。您必须显式调用所有片段。

您可以获得的最重要的东西是在您的 Activity 类中维护一个 Fragment 列表。eg：创建一个自定义的 Fragment 类：

```
public class MyFragment extends Fragment{
  public abstract void doTask();
} 
```

让你的所有片段都继承自这个类。

```
public class FragmentA extends MyFragment{

  @Override
  public void doTask(){
    //exec code here

  }
} 
```

在您的 Activity 类中，每次创建 Fragment 时，也将其添加到 List 中。当事件发生时，调用所有的 Fragment。

```
public class MyActivity extends Activity{
  List<myFragment> mFragmentList = new ArrayList<MyFragment>();

  public void addFragment(MyFragment fragment){
    mFragmentList.add(fragment);
  }

  public void onEvent(){
    for(MyFragment fragment:mFragmentList){
      fragment.doTask();
    }
  }

} 
```

注意：如果您没有那么多 Fragment，则此解决方案可能有点矫枉过正。

# java - MATLAB在Java中的平滑函数

> ID：10821531
> 
> 赞同：2
> 
> 时间：2012-05-30T17:47:02.343
> 
> 标签：java, matlab, smoothing, moving-average

我迫切需要在我当前的 Java 项目中使用移动平均平滑技术。我想实现与 MATLAB 使用函数实现相同的`smooth()`功能。

有谁知道Apache或任何其他库是否这样做？也许网上有一些我可以重用的代码来实现这个策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:05:25.523

移动平均线实际上只是一条线。[您可以在此处](http://en.wikipedia.org/wiki/Moving_average)找到不同的替代方案。例如，指数移动平均线可以实现为`s(i)=a*y(i)+(1-a)*s(i-1)`，其中`y(i)`是数据，`s(i)`是平均值。

# asp.net - 水平对齐复选框（表格布局）

> ID：10821533
> 
> 赞同：4
> 
> 时间：2012-05-30T17:47:05.440
> 
> 标签：asp.net, html, css

我有复选框，如[http://jsfiddle.net/Lijo/Fw3fz/](http://jsfiddle.net/Lijo/Fw3fz/)所示。我需要水平对齐复选框。如何使用 CSS 对齐它们？

注意：以下 HTML 代码是从 ASP.NET 生成的。我无法更改此 HTML 代码。

```
<table id="Checkboxlist1">
<tr>
    <td><input id="Checkboxlist1_0" type="checkbox" name="Checkboxlist1$0" value="red" /><label for="Checkboxlist1_0">Red</label></td>
</tr><tr>
    <td><input id="Checkboxlist1_1" type="checkbox" name="Checkboxlist1$1" value="blue" /><label for="Checkboxlist1_1">Blue</label></td>
</tr><tr>
    <td><input id="Checkboxlist1_2" type="checkbox" name="Checkboxlist1$2" value="green" /><label for="Checkboxlist1_2">Green</label></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T17:49:23.207

创建一个 CheckBoxList 并设置水平布局属性：

```
<asp:CheckBoxList ID="cbl" runat="server" RepeatDirection="Horizontal">
    <asp:ListItem>Red</asp:ListItem>
    <asp:ListItem >Blue</asp:ListItem>
    <asp:ListItem>Green</asp:ListItem>
</asp:CheckBoxList> 
```

更多信息：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxlist.repeatdirection.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxlist.repeatdirection.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T17:49:15.540

您必须更改`tr`s`display`属性：http: [//jsfiddle.net/Fw3fz/4/](http://jsfiddle.net/Fw3fz/4/)

```
​#Checkboxlist1 tr{
    display:inline-block;
    margin-right:20px;
}​ 
```

或者，使用`float`：http: [//jsfiddle.net/Fw3fz/10/](http://jsfiddle.net/Fw3fz/10/)

```
#Checkboxlist1 tr{
    float:left;
    margin-right:20px;
}​ 
```

如果您希望复选框和标签之间有一些空间，请添加以下代码段：

```
#Checkboxlist1 tr label{
    margin-left:5px;
} 
```

但是，内联显示表格行或浮动它们是非常罕见的。如果可能，请更改 HTML 结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T17:51:39.493

```
#Checkboxlist1 tr {
    float: left; // or diplay: inline-block
    margin-right: 15px;
}

#Checkboxlist1 td label {
    margin-left: 5px;
} 
```

**[演示](http://jsfiddle.net/thecodeparadox/Fw3fz/9/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T17:55:06.350

如果您使用的是 ASP.NET Framework 4，则可以检查以下属性：

CheckBoxList.RepeatDirection 属性：

获取或设置一个值，该值指示控件是垂直显示还是水平显示。

CheckBoxList.RepeatLayout 属性（摆脱表格布局）

获取或设置一个值，该值指定是否将使用 table 元素、ul 元素、ol 元素或 span 元素呈现列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T17:51:49.410

要么将它们放在不同的单元格中但在一行（tr）中，要么丢失表格并使用css float。

# arrays - Rails 3 检索所有曾孙记录作为 ActiveRecord 集合

> ID：10821536
> 
> 赞同：4
> 
> 时间：2012-05-30T17:47:09.943
> 
> 标签：arrays, ruby-on-rails-3, join, dynamicquery, grandchild

所以我正在尝试对模型的曾孙执行查询。关系就是这样...

锦标赛 > 比赛 > 比赛 > 球员

和锦标赛模型：

```
class Tournament < ActiveRecord::Base
  has_many :competitions, :dependent => :destroy
  has_many :matches, :through => :competitions
  has_many :players, :through => :matches

end 
```

目前，我检索所有曾曾孙记录的方法是：

```
@results = @tournament.competitions.collect{|b| b.matches.collect{|c| c.players.with_win_count}}.flatten 
```

这有效，但问题是它返回一个数组。我要做的是根据用户输入构建动态查询，而玩家表本质上是所有比赛的结果池，用户可以选择只过滤他想看的内容。我最终得到的是一个相当复杂的（取决于用户输入）查询，并且无法在数组上执行附加的 where 子句。为了让您更好地了解这是如何工作的，这是我的代码...

```
def results
   @tournament = Tournament.find(params[:id])
   @results = @tournament.all_great_grandchildren
   @results.where(params[:player_condition1]) if params[:player_condition1]
   @results.where(params[:player_condition2]) if params[:player_condition2]
   @results.where(params[:player_condition3]) if params[:player_condition3]

   if params[:match_condition]
     #Join to match table so we can query the match fields
     @results.join(:match)
     @results.where(params[:match_condition])
   end
   ....
   @results.order(params[:order]) if params[:order]
end 
```

有没有办法在没有数组的情况下找到任何给定锦标赛的所有曾孙（玩家）记录，以便我可以继续调整记录？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T18:09:07.840

我认为`@tournament.players`如果您已经设置了上述关联，您应该直接调用将开箱即用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:19:36.890

尚纳普得到了它。我们在模型中定义“has_many”和“belongs_to”关联的原因是为了让我们可以轻松访问关联模型。

所以当你有一个名为锦标赛的锦标赛对象时，你可以这样做

```
competitions = tournament.competitions
matches = tournament.matches
players = tounaments.players 
```

你也可以反方向走，从玩家对象开始。前任：`matches = player.matches`

使用 Active Record，您在处理关联时不必进行手动连接或原始 SQL 模型调用。快速阅读 Actice Records Associations 指南：

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

# templates - Jinja 在包含或宏上保持缩进

> ID：10821539
> 
> 赞同：37
> 
> 时间：2012-05-30T17:47:22.897
> 
> 标签：templates, jinja2

我想知道在文件中添加包含或宏时是否有任何方法可以保持 jinja 的缩进。我想使用 jinja 生成代码文件。一个例子是

文件：class.html

```
class MyClass:
     def someOp():
         pass

     {% include "someOp.html" %} 
```

文件：someOp.html

```
def someOp2():
    pass 
```

模板的结果应该是：

```
class MyClass:
     def someOp():
         pass

     def someOp2():
         pass 
```

如果有什么方法可以让 jinja 在包含文件中每一行的包含标记之前添加缩进？或者有什么方法可以定制 jinja 来做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-12T13:08:05.440

一种方法是将 include 包装在一个宏中，然后因为宏是一个函数，它的输出可以通过缩进过滤器传递：

```
class MyClass:
    def someOp():
        pass

    {% macro someop() %}{% include "someOp.html" %}{% endmacro %}
    {{ someop()|indent }} 
```

默认情况下'indent'缩进4个空格并且不缩进第一行，您可以使用例如'indent（8）'进一步缩进，请参阅[http://jinja.pocoo.org/docs/templates/#list-of-内置过滤器](http://jinja.pocoo.org/docs/templates/#list-of-builtin-filters)以获取更多详细信息。

如果您包含的内容被定义为开头的宏，则不需要进一步的包装宏，您可以直接跳转到使用缩进过滤器。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-11-01T10:37:46.537

我正在寻找 Jinja2 以实现相同的目标，并得出结论，目前无法将多行块缩进与原始 Jinja 语句对齐。

我已经向 Jinja 发布了一个小 PR 以添加新语法`{%* ... %}`，而`{{* ... }}`这正是这样做的。详情见 PR：

[https://github.com/pallets/jinja/pull/919](https://github.com/pallets/jinja/pull/919)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-20T11:33:22.237

如果 Jinja 提供设施会更容易。看起来[已经完成了一些工作，](https://github.com/pallets/jinja/pull/919)但该问题目前已关闭（2019 年 11 月 20 日）并且拉取请求尚未合并。这可能是因为缩进很快就会变得很棘手（例如，想想制表符和空格。）

以下是我发现的一个简单的解决方案，它可以有效地生成 Python 代码，当然，它需要很好地处理缩进。它处理使用空格进行缩进的文件。

`auto_indent()`检测宿主模板中变量的缩进级别，然后将该缩进应用于一段文本。

```
import os
import itertools
import jinja2

def indent_lines(text_lines: list, indent: int):
    return [' ' * indent + line for line in text_lines]

def matching_line(s, substring):
    lineno = s[:s.index(substring)].count('\n')
    return s.splitlines()[lineno]

def is_space(c):
    return c == ' '

def indentation(line: str) -> int:
    initial_spaces = ''.join(itertools.takewhile(is_space, line))
    return len(initial_spaces)

def auto_indent(template: str, placeholder: str, content_to_indent: str):
    placeholder_line = matching_line(template, '{{ ' + placeholder + ' }}')
    indent_width = indentation(placeholder_line)
    lines = content_to_indent.splitlines()
    first_line = [lines[0]]  # first line uses placeholder indent-- no added indent
    rest = indent_lines(lines[1:], indent_width)
    return os.linesep.join(first_line + rest) 
```

例子：

```
action_class = """\
class Actions:

    def __init__(self):
        pass

    def prequel(self):
        pass

    {{ methods }}

    def sequel(self):
        pass
"""

inserted_methods = """\
def create_branch():
    pass

def merge_branch():
    pass
"""

if __name__ == '__main__':
    indented_methods = auto_indent(action_class, 'methods', inserted_methods)
    print(jinja2.Template(action_class).render(methods=indented_methods)) 
```

示例输出：

```
>>> python indent.py
class Actions:

    def __init__(self):
        pass

    def prequel(self):
        pass

    def create_branch():
        pass

    def merge_branch():
        pass

    def sequel(self):
        pass 
```

# c# - 将对象保存到数据库时，我应该序列化对象还是保存每个属性

> ID：10821542
> 
> 赞同：0
> 
> 时间：2012-05-30T17:47:34.003
> 
> 标签：c#, sql, oop

我开始考虑一个基本的数据库驱动游戏（rpg）。
我无法弄清楚如何保存角色、他的属性和他的物品。对于大多数只有一个静态的东西来说很好，但是当有像库存这样的多个对象时，我有点不知所措。

我决定把物品放进袋子里。bag 对象可以有 5 到 20 个插槽，每个插槽都将根据唯一的数据库 ID 引用一个项目。那么我该如何设计包桌。

包ID | 所有者 | 插槽 1 | 插槽 2 | 插槽 3 | 插槽 4 ......

或者

包ID | 所有者 | 内容 <-varbinary

有什么建议么？曾经有人告诉我，在数据库编程时，一列一数据，但我不喜欢 Slot1 的想法 | Slot2 等......它似乎不正确。

**编辑**

我是否完全错过了这个，它应该是引用包的正确项目。

物品编号 | 包ID | 插槽 | 姓名 | ......

那么当你想知道一个包里有什么时，你会

```
Select * from Items where BagID=10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:51:26.530

> 有什么建议么？

由于 cobb 早在 60 年代就发明了关系数据库，因此标准方法是规范化。

BadId、SlotNr、ItemRef

完成的。

另一张桌子上有这些物品。

请注意，缺少 OwnerId - 这是 BagItemMap 表。BagTable 有 BagId、OwnerId 和可能的其他项目（总重量等）

这是一个标准的 m:n 关系。当您物化对象时，您将拥有一个将 Items 作为集合的 Bag 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T17:52:56.443

持久性策略取决于您的查询要求。如果您正在寻找一种基于一个或多个属性一次对多个角色执行操作的能力（例如，为所有三眼角色提供额外生命，查找所有生命超过五个的角色等.) 那么您应该将各个属性保存到它们自己的列中。如果一个字符始终被视为一个 BLOB，并且您将序列化策略与 RDBMS 中的数据联系起来没有问题，那么使用`varbinary`.

当您将所有内容存储为 BLOB 并在其单独的列中提供属性子集时，混合解决方案也是可能的。事实上，至少包含*一些*识别属性以简化搜索是很常见的。

# c++ - 拆分没有拆分栏的窗口

> ID：10821544
> 
> 赞同：2
> 
> 时间：2012-05-30T17:47:36.577
> 
> 标签：c++, winapi, split, panel, childwindow

为了将一个窗口拆分为 2 个，例如同时查看 2 个文档，我们创建了 2 个子窗口和一个拆分栏来调整子窗口的大小。

但我见过许多应用程序有多个面板而没有拆分栏。事实上，面板之间有一条“线”，但我发现他们创建了一个额外的子窗口`hwndChild1Container`，其中包含第一个子窗口`hwndChild1`，并且大小比 略宽`hwndChild1`，因此`bar`我们看到了一个。

我的问题是：为了做同样的事情，我不知道我必须使用哪种窗口样式`hwndChild1Container`。我不希望`hwndChild1Container`有一个像主窗口一样的板，但我需要它可以调整大小，当鼠标在右边界上时，光标会改变形状，就像主窗口的情况一样。这种子窗口是否有内置窗口样式，或者我必须在窗口过程中手动执行此操作`hwndChild1Container`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:20:59.190

容器不需要任何特殊样式。只需处理`WM_NCHITTEST`容器并返回`HTBOTTOM`底部像素。

# html - 具有固定页眉和固定页脚的浮动布局的背景颜色和滚动问题

> ID：10821546
> 
> 赞同：-5
> 
> 时间：2012-05-30T17:47:53.600
> 
> 标签：html, css, css-float

我正在尝试创建下面显示的布局，**而不使用表格或 Javascript**：

*   页面顶部的固定标题（固定高度）
*   左侧的菜单（固定宽度）
*   右边的内容
*   底部的固定页脚（固定高度）

```
    ______________________________________
    | 顶部固定头 |
    |____________________________________|
    --------------------------------------
    | | |
    | 菜单 | |
    | | |
    | | |
    | | 内容 |
    | | |
    | | |
    | | |
    | | |
    | | |
    |______|______________________________|
    ______________________________________
    | 底部固定页脚 |
    |____________________________________|

```

```
<!DOCTYPE html>
<html>
<head>
    <title>CSS test</title>
    <link rel="stylesheet" href="style.css" type="text/css">
</head>
<body>
<div id="header">
HEADER HEADER HEADER HEADER HEADER HEADER HEADER HEADER HEADER 
</div>
<div id="container">
<div id="menu">
    <br>START OF MENU<br>
    MENU MENU MENU<br>
    MENU MENU MENU<br>
    MENU MENU MENU<br>
    MENU MENU MENU<br>
    MENU MENU MENU<br>
    MENU MENU MENU<br>
    MENU MENU MENU<br>
    MENU MENU MENU<br>
    MENU MENU MENU<br>
    MENU MENU MENU<br>
    END OF MENU<br>
</div>
    <div id="content">
        <div id="banner">BANNER<br><hr></div>
        START OF CONTENT lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem <a id="anchor1" href="#anchor2">go to anchor2</a> ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  <a id="anchor2" href="#anchor3">go to anchor3</a> lorem ipsum  lorem ipsum  lorem ipsum lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  lorem ipsum  <a id="anchor3" href="#anchor1">go to anchor1</a> lorem ipsum  lorem ipsum  lorem ipsum END OF CONTENT
    </div>
</div>
<div id="footer">
FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER FOOTER 
</div>
</body>
</html> 
```

这是“style.css”的源代码：

```
#header {
position: fixed;
overflow: hidden;

top: 0; left: 0;
width: 100%;
text-align: center;
padding-top: 5px;
padding-bottom: 5px;
z-index: 2;
border: 1px solid black;
background-color: #F0F0FF;
}

#container {
border-width: 5px;
border-style: solid;
border-color: blue;

margin-top: 50px;
border-radius: 3em;
}

#menu {
width: 140px;
height: 100%;
border: 3px green solid;

background: #EEE;

float: left;
position: relative;
}

#banner {
text-align: center;
}

#content {
position: relative;
padding: 10px 20px;
border: 3px red solid;
margin-left: 150px;
overflow: hidden;
background: #EADADA;
}

#footer {
position: fixed;
bottom: 0px;
overflow: hidden;
padding-left: 0px;
margin-left: -7px;
margin-right: -7px;
margin-top: 20px;

text-align: center;
font-size: 8pt;
background: #FEF;

border-top-style: solid;
border-top-color: black;
border-top-width: 1px;
width: 100%;
} 
```

内容长度因页面而异，如有必要，应激活右侧的垂直滚动条。菜单和内容必须一起滚动（只要滚动条可见）。
菜单和内容由单个边框包围。
菜单的背景应覆盖整个高度：如果内容高度大于菜单高度，则菜单区域应垂直扩展，以便使用定义的背景颜色对其进行着色。

我正在尝试解决 2 个问题：

1.  当我单击页面上的锚点（单击“转到 anchor1”）时，锚点出现在固定标题下方。有必要向下滚动一点以使文本出现。你如何避免这种情况？
2.  我希望菜单区域的整个高度完全用#menu 中定义的背景颜色绘制，而不仅仅是有一些文本的部分。你知道如何实现吗？

回复@VLTII 的评论：

关于您的链接：

*   方法B：它解决了我的第一个问题，但我不喜欢使我的内容难看的所需“显示：块”。我尝试使用“显示：内联块”，但它不再起作用了。
*   方法 C、D 和 E：它们都解决了我的第一个问题。

我用 Firefox、Chrome 和 Opera 测试了所有方法。
在 Firefox 中，当我单击内容中的链接时，它会在链接顶部上方绘制一个灰色框。Chrome 或 Opera 中的链接周围没有灰框。但这是一个非常小的美容问题，我可以忍受。
在方法 E 中，我将“ `padding: 15px`”更改为“ `padding-top: 15px`”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:35:27.473

对于#1，请看这里： http: [//nicolasgallagher.com/jump-links-and-viewport-positioning/demo/](http://nicolasgallagher.com/jump-links-and-viewport-positioning/demo/)

对于#2，标准方法是在#container 上设置背景图像，该图像具有#menu 和#content 的背景颜色。如果它是两种纯色，则可以将其设置为单个像素高以减小文件大小。

# android - 在选项卡中显示任何内容时出现 NullPointerException

> ID：10821547
> 
> 赞同：0
> 
> 时间：2012-05-30T17:48:02.600
> 
> 标签：android, android-tabs

我正在尝试在同一个活动中制作一个标签式界面。这是我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/tabhost"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
  <LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabWidget android:id="@android:id/tabs"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
    />
    <FrameLayout android:id="@android:id/tabcontent"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent">
      <AnalogClock android:id="@+id/tab1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
      />
      <Button android:id="@+id/tab2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="A semi-random button"
      />
    </FrameLayout>
  </LinearLayout>
</TabHost> 
```

虚拟.xml：

```
<?xml version="1.0" encoding="utf-8"?>

  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="wrap_content"
      android:layout_height="fill_parent"
      android:orientation="vertical" >

      <RatingBar
          android:id="@+id/ratingBar1"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" />

  </LinearLayout> 
```

和我的活动：

```
public class LActivity extends Activity {

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     TabHost tabs=(TabHost)findViewById(R.id.tabhost);
     tabs.setup();

   tabs.addTab(tabs.newTabSpec("tag1").setIndicator("1").setContent(R.id.tab1));
   tabs.addTab(tabs.newTabSpec("tag2").setIndicator("2").setContent(R.id.tab2)); 
```

上面的代码有效，但如果你更改`R.id.tab2`为`R.layout.dummy`or `R.id.ratingBar1`，它会抛出一个空指针异常。

我打算在选项卡中显示 dummy.xml。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T17:53:32.420

`R.id.tab2`有效和`R.layout.dummy`无效的原因是它`R.id.tab2`是内容视图的一部分，`Activity`因为它在布局中定义为`setContentView`.

您不能在需要*view-* id 的地方使用*layout-id*，这就是为什么不起作用。当使用as 不是内容的一部分时，您不能指望它能够工作，并且活动如何知道从哪里获得该视图？请记住，您可以使用 id 有几种不同的布局。*`R.layout.dummy``R.id.ratingBar1``Activity``ratingBar1`*

 *您需要做的是将您的*虚拟*布局放置在`@android:id/tabcontent`. 你可以只用一个`<include>`元素来做到这一点。否则，您需要自己膨胀布局并将结果`View`用作`setContent`.*

# java - 在循环中从一个类中创建多个对象...如何引用每个对象？

> ID：10821550
> 
> 赞同：2
> 
> 时间：2012-05-30T17:48:11.010
> 
> 标签：java

我正在开发一个 Java 程序，我可以在其中跟踪我的员工工资单。有两种类型的员工，小时工和薪水。

我有一个 while 循环询问输入并创建对象，以便我可以根据需要添加尽可能多或尽可能少的员工。

当我从我的班级创建我的对象时，我只需使用：

```
HourlyEmployee employee = new HourlyEmployee(type, name, hours, rate); 
```

但是，如果这是在一个 while 循环中，我会创建几个具有相同名称“员工”的类类型 HourlyEmployee 的实例吗？他们是否有相同的名字是否重要（我只想稍后在屏幕上显示每个员工的信息）。

如果是这样，**我如何编写代码以使每个 HourlyEmployee 对象的名称也是动态的？**

谢谢！

如果你们想要其余的代码，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T17:50:05.197

这样做的方法是将所有`Employee`对象放入一个集合中。

[本教程](http://docs.oracle.com/javase/tutorial/collections/index.html)是一个很好的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T17:51:26.743

是的，您将创建几个`HourlyEmployee`名为“employee”的对象。由于这个问题听起来有点像家庭作业，所以我不会举一个例子，但我会建议你研究制作一个`HourlyEmployee`对象数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:21:04.003

尝试这个，

1.  创建一个名为 Employee 的抽象类，

2.  然后是 2 个具体的类 HourlyEmployee 和 SalaryEmployee。

3.  使用 ArrayList 来存储员工，具有相同的名称不会产生冲突，但`Map`会是一个更好的选择，您可以必须`Ids as unique keys`识别员工，即使他们有相同的名字。

例如：

```
public void addEmp(Employee employee){

ArrayList<? extends Employee> emp;

 while(true){   // Use a boolean variable to terminate the loop at certain conditions

    for (Employee e : emp) {

        e.add(employee);

     }

} 
```

# mvvm - 控制文本的 MVVM 绑定

> ID：10821554
> 
> 赞同：0
> 
> 时间：2012-05-30T17:48:40.817
> 
> 标签：mvvm

我有一个 Silverlight 客户端，我正在使用 MVVM。我已经放入了我的第一个视图和视图模型。视图绑定到视图模型。我现在想本地化所有控件的文本。例如，我的视图有一个包含文本“搜索”的按钮。我知道我需要将按钮的 Text 内容属性绑定到某些东西以提供正确的文本。问题是什么？我是否在视图模型中提供了一个名为 SearchButtonText 的属性并将其绑定到该属性（其中 SearchButtonText 属性返回一个资源字符串）？或者，即使视图的根级绑定是视图模型，这在视图模型的作用方面是否太过分了，而是绑定到视图命名空间中的资源字符串？

非常感谢任何帮助！

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:58:45.567

绑定到视图中的资源字符串。

# c# - 如何在 WPF 自定义装饰器中用线条排列拇指

> ID：10821556
> 
> 赞同：3
> 
> 时间：2012-05-30T17:48:50.783
> 
> 标签：c#, wpf, drawing, adorner

我正在使用 WPF 在绘图程序中为线条制作装饰器。Line 是在代码隐藏中绘制的，然后用我的自定义 Adorner 进行装饰，称为`LineAdorner`. 我已经设法使用 a`Thumb`作为 Line 的起点和终点。我的问题是关于起点和终点的拇指排列。我认为问题出在方法`ArrangeOverride`上，应该在哪里安排带有起点和终点的拇指。我找不到合适的数量来减去或添加`Rect` `X`and`Y`参数。我怎样才能找到这些值以始终将拇指与线的点排列在一起？我的自定义装饰器的代码是这样的：

```

`public class LineAdorner : Adorner  
{
    private Point start;
    private Point end;
    private Thumb startThumb;
    private Thumb endThumb;
    private Line selectedLine;
    private VisualCollection visualChildren;

    // Constructor
    public LineAdorner(UIElement adornedElement) : base(adornedElement)
    {
        visualChildren = new VisualCollection(this);

        startThumb = new Thumb { Cursor = Cursors.Hand, Width = 10, Height = 10, Background = Brushes.Green };
        endThumb   = new Thumb { Cursor = Cursors.Hand, Width = 10, Height = 10, Background = Brushes.BlueViolet };

         startThumb.DragDelta += StartDragDelta;
         endThumb.DragDelta   += EndDragDelta;

         visualChildren.Add(startThumb);
         visualChildren.Add(endThumb);

         selectedLine = AdornedElement as Line;
     }

     // Event for the Thumb Start Point
     private void StartDragDelta(object sender, DragDeltaEventArgs e)
     {
        Point position = Mouse.GetPosition(this);

        selectedLine.X1 = position.X;
        selectedLine.Y1 = position.Y;
     }

     // Event for the Thumb End Point
     private void EndDragDelta(object sender, DragDeltaEventArgs e)
     {
         Point position = Mouse.GetPosition(this);

         selectedLine.X2 = position.X;
         selectedLine.Y2 = position.Y;
     }

     protected override int VisualChildrenCount { get { return visualChildren.Count; } }
     protected override Visual GetVisualChild(int index) { return visualChildren[index]; }

     protected override void OnRender(DrawingContext drawingContext)
     {
         if (AdornedElement is Line)
         {
             selectedLine = AdornedElement as Line;
             start = new Point(selectedLine.X1, selectedLine.Y1);
             end   = new Point(selectedLine.X2, selectedLine.Y2);
          }
     }

     protected override Size ArrangeOverride(Size finalSize)
     {
         var startRect = new Rect(selectedLine.X1, selectedLine.Y1, ActualWidth, ActualHeight);
         startThumb.Arrange(startRect);

         var endRect = new Rect(selectedLine.X2, selectedLine.Y2, ActualWidth, ActualHeight);
         endThumb.Arrange(endRect);

         return finalSize;
     }
    }` 

            回答 #1

赞同：3

时间：2012-05-30T20:44:24.380

在你的 ArrangeOverride 中试试这个。您可以摆脱“开始”和“结束”变量，并且不需要覆盖 OnRender，因为如果您告诉拇指它们需要在哪里，您的拇指将呈现自己。

```
 protected override Size ArrangeOverride(Size finalSize)
{
    selectedLine = AdornedElement as Line;

    double left = Math.Min(selectedLine.X1, selectedLine.X2);
    double top = Math.Min(selectedLine.Y1, selectedLine.Y2);

    var startRect = new Rect(selectedLine.X1 - (startThumb.Width / 2), selectedLine.Y1 - (startThumb.Width / 2), startThumb.Width, startThumb.Height);
    startThumb.Arrange(startRect);

    var endRect = new Rect(selectedLine.X2 - (endThumb.Width / 2), selectedLine.Y2 - (endThumb.Height / 2), endThumb.Width, endThumb.Height);
    endThumb.Arrange(endRect);

    return finalSize;
} 
```

您在 Thumbs 上设置了明确的大小，因此必须在 Arrange 中进行维护。此外，您需要减去拇指宽度和高度的一半以使端点居中。

由于画布和形状的性质，您需要减去线的“真实”左侧和顶部值，因为与线不同，装饰者不会从画布的左上角绘制自己。除了使用 Canvasses 之外，这不应该是必需的。

```

# mysql - 主键的表数据排序

> ID：10821573
> 
> 赞同：0
> 
> 时间：2012-05-30T17:50:10.820
> 
> 标签：mysql

嗨，我有一张这样的桌子：

```
create table nasd_snapshot
( minute_id         smallint not null
, symbol_id       integer not null 
...
PRIMARY KEY ( symbol_id, minute_id ) 
```

让 PRIMARY KEY 中的列与表中的列的顺序相同是否重要，或者它会更有效？

我想我对事物的内部存储方式知之甚少，但已经做了一些研究。任何建议或链接到这方面的一些文章表示赞赏。

谢谢！

大学教师

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:55:21.807

添加索引已经对它们进行排序。添加索引的目的是对数据进行排序，以便 mysql 可以非常快速地获取数据。它已经对索引列进行了排序，因此您无需再担心这一点 :) 但是，正如您可以想象的那样，存储数据 + 排序数据会在服务器中占用更多空间。所以不要过度使用索引。还有一件事 - PRIMARY 索引与普通索引相同，只是它还表示该索引列中的数据对于表来说是唯一的。自己尝试的最佳示例是：将一些数据放入数据库中，比如 10.000 条记录。让他们成为，例如，`(id, name)`。尝试查询类似`SELECT * FROM table WHERE id=6451`. 然后在 id 列上添加索引（或 PRIMARY KEY）。再试一次。如果您使用的是 PhpMyAdmin，它会显示查询执行所需的时间。您将看到索引案例和未索引案例之间的巨大差异。另外，看看桌子占用了多少空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:55:33.400

不，但主键的顺序仍然很重要。

如果您将运行条件涉及`symbol_id`但不`minute_id`涉及两者的查询的查询，那么您的方法是正确的。

如果您运行了很多涉及条件的查询`minute_id`，但不是`symbol_id`那么您最好切换它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:01:07.347

其实最好的方法是自己测试。有些用户确实发现列的顺序确实很重要，而其他用户则不重要。我自己通常只使用表定义中的列顺序。

[http://ralpartha.blogspot.com/2006/12/primary-key-order-does-matter.html](http://ralpartha.blogspot.com/2006/12/primary-key-order-does-matter.html)

因此，如果可能，您应该同时尝试并衡量您通常运行的查询。

# c# - 使用 Jquery 验证表单

> ID：10821581
> 
> 赞同：1
> 
> 时间：2012-05-30T17:50:36.700
> 
> 标签：c#, javascript, jquery

我有一个包含 4 个下拉列表的表单，其自动回发属性设置为 true，并且每个下拉列表都根据前一个下拉列表的选择进行填充。前任。在 ddlCourseLevel 中进行选择后填充 ddlCourseType 等等。

我需要验证每个文本框和下拉列表，但由于它的自动回发属性，我很难使用下拉列表。

如果有人可以帮助我以最佳方式验证此表格，或者任何提示或建议都很棒，那就太好了。非常感谢。下面是具有用于验证下拉列表和文本框的 jquery 函数的 aspx 文件。

**Admin_Course_Edit.aspx**

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <script src="/JQuery_Plugins/timepicker/js/jquery-ui-1.7.2.custom.min.js" type="text/javascript"></script>
    <link href="../JQuery_Plugins/timepicker/css/ui-lightness/jquery-ui-1.7.2.custom.css"
        rel="stylesheet" type="text/css" />
    <script type="text/javascript">
        $(function () {
            $('#tbStartDate').datepicker({
                duration: '',
                showTime: true,
                constrainInput: false
            });
        });
    </script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="BreadCrumbs" runat="server">
    <asp:SiteMapPath ID="SiteMapPath1" runat="server">
    </asp:SiteMapPath>
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="rightNavigation" runat="server">
    <script type="text/javascript">
        $(document).ready(function () {

            //Function to Validate DatePicker
            $.validator.addMethod('isDate', function (value, element) {
                var isDate = false;
                try {
                    $.datepicker.parseDate('mm/dd/yy', value);
                    isDate = true;
                }
                catch (e) {

                }
                return isDate;
            });

            //Function to Validate DropDown Lists
            $.validator.addMethod('selectNone',
          function (value, element) {
              return this.optional(element) ||
                (value.indexOf("") == -1); //Leave it blank or enter the exact text in index 0
          }, "Please Select an Option");

            $("#form1").validate({
                // $("#tbStartDate").rules("add", {isDate: true} messages: {isDate: "Date to Validate is invalid."}

                rules: {
                    '<%=ddlCourseLevel.UniqueID %>': { selectNone: true },
                    '<%=tbStartDate.UniqueID %>': { required: true, isDate: true },
                    '<%=tbCourseName.UniqueID %>': { required: true, maxlength: 25 },
                    '<%=tbPointScale.UniqueID %>': { required: true, digits: true },
                    '<%=tbDescription.UniqueID %>': { maxlength: 50 }
                },
                messages: { '<%=tbStartDate.UniqueID %>': { isDate: "Please enter a Valid Date"} }

            });

            $("#imgBtn_A_save").click(function (evt) {

                // Validate the form and retain the result.
                var isValid = $("#form1").valid();

                // If the form didn't validate, prevent the
                //  form submission.
                if (!isValid)
                    evt.preventDefault();
            });

            $("#imgBtn_A_cancel").click(function () {
                $("#form1").validate().cancelSubmit = true;

            });
        });

        function HideLabel() {
            document.getElementById('<%= lblMessage.ClientID %>').style.display = "none";
        }
        setTimeout("HideLabel();", 2000);

    </script>
    <div class="Admin_rightNavtop">
        <div class="title">
            <asp:Label ID="lblTitle" Text="Edit Course" runat="server" class="titleLbl" />
        </div>
        <p align="center">
            <asp:Label ID="lblMessage" runat="server" Style="color: Red" /></p>
        <!-- START TABLE ADD FORM-->
        <table style="margin-left: 70px">
            <tr>
                <td>
                    <asp:Label ID="LblCourseLevel" Text="* Course Level :" runat="server" class="lblSize_largeGreen" />
                </td>
                <td>
                    <asp:DropDownList ID="ddlCourseLevel" class="ddlSize_large_addEdit" OnSelectedIndexChanged="ddlCourseLevel_SelectedIndexChanged"
                        AutoPostBack="true" EnableViewState="true" OnDataBound="helperCourseLevel_Databound"
                        runat="server" />
                </td>

            </tr>
            <tr>
                <td>
                    <asp:Label ID="CourseType" Text="* Course Type :" runat="server" class="lblSize_largeGreen" />
                </td>
                <td>
                    <asp:DropDownList ID="ddlCourseType" runat="server" class="ddlSize_large_addEdit"
                        OnDataBound="helperCourseType_Databound" EnableViewState="true" OnSelectedIndexChanged="ddlCourseType_SelectedIndexChanged"
                        AutoPostBack="true" />
                </td>

            </tr>
            <tr>
                <td>
                    <asp:Label ID="lblCourseName" Text="* Course Name :" runat="server" class="lblSize_largeGreen" />
                </td>
                <td>
                    <asp:DropDownList ID="ddlCourseName" class="ddlSize_large_addEdit" OnSelectedIndexChanged="ddlCourseName_SelectedIndexChanged"
                        AutoPostBack="true" EnableViewState="true" OnDataBound="helperCourse_Databound"
                        runat="server" />
                </td>

            </tr>
            <tr>
                <td>
                    <asp:Label ID="lblCourseName2" Text="* New Name :" runat="server" class="lblSize_largeGreen" />
                </td>
                <td>
                    <asp:TextBox ID="tbCourseName" class="tbSize_large_addEdit" runat="server" />
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Label ID="lblStartDate" Text="* Start Date :" runat="server" class="lblSize_largeGreen" />
                </td>
                <td>
                    <asp:TextBox ID="tbStartDate" runat="server" class="tbSize_large_addEdit" />
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Label ID="lblGraded" Text="* Grade Type :" runat="server" class="lblSize_largeGreen" />
                </td>
                <td>
                    <asp:DropDownList ID="ddlGradeType" runat="server" class="ddlSize_large_addEdit"
                        OnSelectedIndexChanged="ddlGradeType_SelectedIndexChanged" AutoPostBack="true">
                        <asp:ListItem>---Select Grade Type---</asp:ListItem>
                        <asp:ListItem Value="1">Point Scale</asp:ListItem>
                        <asp:ListItem Value="2">Pass/Fail</asp:ListItem>
                        <asp:ListItem Value="3">Attendance</asp:ListItem>
                        <asp:ListItem Value="4">Not Graded</asp:ListItem>
                    </asp:DropDownList>
                </td>

            </tr>
            <tr>
                <td>
                    <asp:Label ID="lblPointScale" Text="* Point Scale :" runat="server" class="lblSize_largeGreen"
                        Visible="false" />
                </td>
                <td>
                    <asp:TextBox ID="tbPointScale" runat="server" class="tbSize_large_addEdit" Visible="false" />
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Label ID="lblDescription" Text="Description :" runat="server" class="lblSize_largeGreen" />
                </td>
                <td>
                    <asp:TextBox ID="tbDescription" runat="server" class="tbSize_large_addEdit" />
                </td>
            </tr>
        </table>
        <!-- End of Table ADD COURSE-->
    </div>
    <!-- End of rightNavTop-->
    <center>
        <div class="Admin_action">
            <asp:ImageButton ID="imgBtn_A_save" ImageUrl="../Images/Save.png" OnClick="save_Click"
                runat="server" class="Admin_action_imgSize_small" />
            <asp:ImageButton ID="imgBtn_A_cancel" ImageUrl="../Images/Cancel.png" runat="server"
                class="Admin_action_imgSize_small" CausesValidation="false"    OnClick="cancel_Click" />
        </div>
    </center>
    <!-- End selection buttons-->
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:56:48.703

如果您认为取消回发无效，您可以向控件添加 onchange 事件并返回 false。

就个人而言，我想使用 jQuery 和 AJAX 完成整个 shebang，并消除讨厌的自动回发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:57:45.183

依赖 DDL 的验证也必须检查它们的“父”DDL。

```
DDL 1 - Must be selected
DDL 2 - If DDL 1 is selected must be selected.
DDL 3 - If DDL 2 is selected must be selected.
DDL 4 - If DDL 4 is selected must be selected. 
```

抱歉，我没有时间编写代码，但希望这会有所帮助。

# python - python regex：匹配一个被正好2个字符包围的字符

> ID：10821585
> 
> 赞同：1
> 
> 时间：2012-05-30T17:50:43.387
> 
> 标签：python, regex, lookahead, lookbehind

我需要一个 python 中的正则表达式，它匹配被正好 2 个下划线包围的任何字符。意思，意思

```
__a__ 
```

将匹配“a”，但

```
___a___ 
```

不会匹配。它需要支持重叠匹配，这样

```
__a__d___b___e__c__ 
```

将返回“ac”，因为 a 被双下划线包围，但 d,e 旁边有一个三重下划线，b 两边都有一个三重下划线。我现在拥有的

```
(?<=[_]{2})(.)(?=[_]{2}) 
```

它解决了重叠，但不是上面示例中的“恰好 2”，它返回“adbec”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T17:57:50.390

尝试以下操作：

```
(?<=(?<!_)__)([^_])(?=__(?!_)) 
```

例子：

```
>>> regex = re.compile(r'(?<=(?<!_)__)([^_])(?=__(?!_))')
>>> regex.findall('__a__ ')
['a']
>>> regex.findall('___a___')
[]
>>> regex.findall('__a__d___b___e__c__')
['a', 'c']
>>> regex.findall('__a__c__')
['a', 'c'] 
```

您说您想要重叠匹配，但如果您不想`c`匹配 in `__a__c__`，请使用以下内容（这是我的原始答案）：

```
(?<!_)__([^_])__(?!_) 
```

# nhibernate - NCommon + Fluent NHibernate + 多个数据库？

> ID：10821590
> 
> 赞同：0
> 
> 时间：2012-05-30T17:51:05.463
> 
> 标签：nhibernate, fluent-nhibernate, ncommon

[我正在尝试通过http://codeinsanity.com](http://codeinsanity.com)上的指南将 NCommon 和 NH 连接到多个数据库（请参阅“为多个数据库支持配置 NCommon”），它通过以下建议的流畅方法工作：

```
 var configuration = NCommon.Configure.Using(adapter).ConfigureState<DefaultStateConfiguration>();

    configuration.ConfigureData<NHConfiguration>(config => config.WithSessionFactory(() => _sessionFactories[0]).WithSessionFactory(() => _sessionFactories[1])); 
```

这可以按预期工作，但您可以看到 sessionFactories 是硬编码的。我真正想做的是这样的：

```
 foreach(ISessionFactory sessionFactory in _sessionFactories)
     {
          configuration.ConfigureData<NHConfiguration>(config => config.WithSessionFactory(() => sessionFactory));
     } 
```

但这会引发以下异常：

*无法注册组件 NCommon.Data.NHibernate.NHUnitOfWorkFactory。已经有一个具有该名称的组件。您是否想修改现有组件？如果不是，请确保指定一个唯一名称。*

我希望有一种正确的方法来连接 n-SessionFactories 而无需对其进行硬编码 - 但我只是没有看到解决方案。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:59:10.250

我认为我可以通过将 SessionFactory 部分委托给一个方法来实现这一点，如下所示：

```
 configuration.ConfigureData<NHConfiguration>(config => ConfigureSessionFactories(config));

    private void ConfigureSessionFactories(NHConfiguration configuration)
    {
        foreach (ISessionFactory sessionFactory in _sessionFactories)
        {
            configuration.WithSessionFactory(() => sessionFactory);
        }
    } 
```

然而，这似乎只是一个解决方案。假设您有多个会话工厂，您可以使用它们全部进行查询，但只有最后添加的会话工厂会命中数据库并返回结果。针对其他会话工厂的查询永远不会到达实际数据库，并且将返回零个实体。

我能够让它工作的唯一方法是：

```
 configuration.ConfigureData<NHConfiguration>(config => config.WithSessionFactory(() => _sessionFactories[0]).WithSessionFactory(() => _sessionFactories[1])); 
```

不过，我宁愿不对其进行硬编码。我更愿意遍历 n 会话工厂的循环...有没有人知道如何实现这一点？

# python - 如何从 bash 脚本中杀死 Django runserver 子进程？

> ID：10821597
> 
> 赞同：13
> 
> 时间：2012-05-30T17:51:35.920
> 
> 标签：python, django, bash, shell

我正在一个 Django 网站上工作，我有各种需要运行的编译程序（Compass/Sass、coffeescript、hamlpy），所以为了方便起见，我制作了这个 shell 脚本：

```
#!/bin/bash
SITE=/home/dev/sites/rmx

echo "RMX using siteroot=$SITE"
$SITE/rmx/manage.py runserver &
PIDS[0]=$!
compass watch $SITE/media/compass/ &
PIDS[1]=$!
coffee -o $SITE/media/js -cw $SITE/media/coffee &
PIDS[2]=$!
hamlpy-watcher $SITE/templates/hamlpy $SITE/templates/templates &
PIDS[3]=$!

trap "echo PIDS: ${PIDS[*]} && kill ${PIDS[*]}" SIGINT

wait 
```

除了 Django 服务器之外的所有东西都很好地关闭了，`ctrl+c`因为服务器进程的 PID 不是`python manage.py runserver`命令的 PID。这意味着每次我停止脚本时，我都必须找到正在运行的进程 PID 并将其关闭。

这是一个例子：

```
$> ./compile.sh
   RMX using siteroot....
   ...
   [ctrl+c]
   PIDS: 29725 29726 29728 29729
$> ps -A | grep python
   29732 pts/2    00:00:00 python 
```

第一个 PID`29725`是初始`python manage.py runserver`调用，但`29732`它是实际的开发服务器进程。

**编辑**看起来这是由于[Django 的自动重新加载功能](https://docs.djangoproject.com/en/dev/ref/django-admin/#django-admin-option---noreload)，可以使用`--noreload`标志禁用。由于我想保留自动重新加载功能，现在的问题是如何从 bash 脚本中杀死子进程。我认为杀死最初的 python runserver 命令会做到这一点......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T18:11:28.033

**解决了**

感谢[这个 SO question](https://stackoverflow.com/questions/392022/best-way-to-kill-all-child-processes)，我将脚本更改为：

```
#!/bin/bash
SITE=/home/dev/sites/rmx

echo "RMX using siteroot=$SITE"
$SITE/rmx/manage.py runserver &
compass watch $SITE/media/compass/ &
coffee -o $SITE/media/js -cw $SITE/media/coffee &
hamlpy-watcher $SITE/templates/hamlpy $SITE/templates/templates &

trap "kill -TERM -$$" SIGINT

wait 
```

以破折号开头的PID使用命令对*PID 组*进行操作，并且引用 bash 脚本本身的 PID。`kill``$$`

谢谢你的帮助，我！
没问题，自我，嘿——你真棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-02T10:40:46.150

你可以执行这个来杀死或处理和服务器，你设置端口号：

```
$ netstat -tulpn | grep PORT | awk '{print $7}' | cut -d/ -f 1 | xargs kill 
```

或者

```
$ sudo lsof -i tcp:PORT
$ sudo lsof -i tcp:PORT|awk '{print $2}'|cut -d/ -f 1|xargs kill 
```

# c++ - 如何将列表 STL 的迭代器转换为实例（C++）

> ID：10821607
> 
> 赞同：2
> 
> 时间：2012-05-30T17:52:23.503
> 
> 标签：c++, list, stl

这是我第一次使用列表 STL，我不确定我想要做的事情是否可行。我有一个包含 class_A 列表的 class_B，我需要 class_B 中的一个函数，它接受一个 ID，在列表中搜索具有相同 ID 的实例，并从列表中获取指向该列表中实例的指针：

```
bool class_B::get_pointer(int ID,class_A* pointer2A){

   list<class_A>::iterator i;
   for(i=class_A.begin();i!=class_A.end();i++){
       if((*i).get_id()==ID) {
           \\pointer2A=(i);<---------------this is what I'm trying to do
           return true;
       }
   }
   pointer2A=NULL;
   return false;
} 
```

我该如何执行此操作，是否可以从迭代器转换为实例？

编辑：

我在多线程程序中使用这个函数，我不能将迭代器返回给调用函数，因为另一个线程可能会删除列表中的一个元素。

现在我有一个指向我的元素的指针（并且可以说它已锁定，因此无法删除），并且另一个线程删除了另一个元素并在列表上执行了排序，我持有的指针会发生什么？（我不知道列表如何重新排列元素，是通过使用复制 c'tor 复制元素还是通过其他方式完成的？）。

[无用](https://stackoverflow.com/users/212858/useless "无用") 的答案对我来说是最有帮助的（非常感谢），是的，我应该使用对指针的引用，因为我打算更改它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T17:54:35.383

你应该这样写：

```
pointer2A= &*i; 
```

这里`*i`返回可以通过添加`&`为 :来获得其地址的对象`&*i`。

**请注意，`i`与 不同`&*i`。**有关更一般性的讨论，请参阅此主题：

*   [&(*similarObject) 和similarObject 之间的区别？他们不一样吗？](https://stackoverflow.com/questions/6958520/difference-between-similarobject-and-similarobject-are-they-not-same)

* * *

无论如何，我建议您将指针本身阅读为：

```
class_A* class_B::get_pointer(int ID)
{
   //I assume the name of the list is objA, not class_A
   for(list<class_A>::iterator i=objA.begin();i!=objA.end();i++)
   {
       if( i->get_id()==ID) 
       {
           return &*i;
       }
   }
   return NULL; //or nullptr in C++11 
} 
```

或者，在 C++11 中，您可以`std::find_if`用作：

```
auto it = std::find_if(objA.begin(), 
                       objA.end(), 
                       [&](class_A const &a){ return a->get_id() == ID;});
classA *ptr = NULL;
if ( it != objA.end())
     ptr = &*it; //get the pointer from iterator 
```

确保`get_id`是`const`成员函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T18:01:26.207

```
if(i->get_id()==ID) {
    pointer2A=&*i;
    return true;
} 
```

迭代器被设计为具有与指针类似的语义，因此例如，您可以`i->get_id()`像拥有指向 A 的指针一样编写。

类似地，`*i`产生一个引用`A&`，并将`&*i`其转换回一个指针——它看起来有点笨拙（如果它`i`真的是一个指针，那将是一个恒等运算），但它是惯用的。

请注意，无论如何这不会做您可能想要的事情 - 调用者的值是*按值*`class_A* pointer2A`传递的，因此只有' 指针的副本被修改，调用者不会看到该值。试试这个：*`get_pointer`*

 *```
bool class_B::get_pointer(int ID, class_A *& pointer2A)
{
    list<class_A>::iterator i;
    for(i=class_A.begin();i!=class_A.end();i++) {
        if(i->get_id()==ID) {
            pointer2A=&*i;
            return true;
        }
    }
    pointer2A=NULL;
    return false;
} 
```

Now`pointer2A`通过*引用*传递，所以调用者的副本在你的函数中被修改。

顺便说一句，您可以`class_A * & pointer2A`从右到左阅读参数声明，因为“pointer2A 是对指向 class_A 的指针的引用”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T18:13:01.177

如果你有一个`iterator`，你可以通过简单地取消引用迭代器（它给你一个引用），然后获取它的地址（它给你一个指针）来获得一个原始指针。所以，在你的情况下：

```
pointer2A = &*i; 
```

这似乎是一种奇怪、笨拙的获取指针的方法，但确实如此。但是，当您使用来自 Std Lib 的集合和迭代器时，您通常不关心指针。迭代器是将“STL”粘合在一起的粘合剂。总的来说，这就是您应该处理的问题，而不是原始指针。

您在上面编写的循环肯定可以完成您希望完成的工作，但是有更好的*方法来实现相同的目标。（更好是一个主观术语。）特别是，`<algorithm>`图书馆提供了两者`std::find`，并且`std::find_if`它们按照他们所说的去做。他们在收藏中找到了一些东西。 `find`会找到与您正在寻找的东西相同的东西。 `find_if`将找到与您指定的某些条件相匹配的内容。后者是在这里使用的合适算法，主要有两种使用方法。

第一种更“传统”的方法是使用函子：

```
struct match_id : public std::unary_function<bool, class_A>
{
  match_id(int ID) : id_(id) {};
  bool operator()(const class_A* rhs) const
  {
    if( id_ == rhs->get_id() )
      return true;
    else
      return true;
};

/* ... */

list<class_A>::iterator it = std::find_if(objA.begin(), objA.end(), match_id(ID)); 
```

这种方法适用于 C++03 或 C++11。有些人不喜欢它，因为它相当冗长。另一方面，我喜欢它，因为实际的业务逻辑（`find_if`调用）比显式循环非常简洁且更具表现力。

在 C++11 中，您可以使用 lambda 代替函子：

```
unsigned ID = 42;
std::find_if( objA.begin(), objB.end(), [&ID](const class_A& rhs) -> bool { return rhs.get_id() == ID; } }; 
```

这里有一个权衡。在专业方面，您不必为仿函数编写 10 行左右的代码，但在另一方面，lambda 语法很时髦，需要一点时间来适应。*

# c# - 地面和模型闪烁，有些看不见

> ID：10821609
> 
> 赞同：1
> 
> 时间：2012-05-30T17:52:27.313
> 
> 标签：c#, xna, camera, game-engine

我真的不知道这里出了什么问题。游戏看起来很有趣。我注意到的第一件事是，当玩家移动时，相机会先于头像移动，因此相机会稍微从头像的头部伸出。然后我注意到，当你从侧面看化身时，你可以看到他的肩膀和胸腔（在我构建的动画播放器和 Maya 中都没有这样做）。我注意到的下一件事是当玩家向前移动时，地面开始闪烁。我是在调用draw方法错误还是什么？

这是我正在使用的相机类

```
public class Camera : Microsoft.Xna.Framework.GameComponent 
{ 
    //Cam Matrices 
    //viw is composed of position, direction, and up vectors 
    public Matrix view { get; protected set; } 
    public Matrix projection { get; protected set; } 

    //to move the camera 
    //used to recreate view matrix each frame 
    public Vector3 cameraPosition { get; protected set; } 
    public Vector3 cameraDirection; //not the target/ point camera is looking at a relative direction camrea is faceing 
    //to find target add the cameraPosition and cameraDirection togeater 
    public Vector3 cameraUp; 
    public Vector3 target; 

    //camera controls 
    float speed = 3; 

    MouseState prevMouseState; 

    // Pi/180 = 1 degree 
    // Max yaw/pitch variables 
    //this is for moving the head only not the body 
    float totalYaw = MathHelper.PiOver2; 
    public float currentYaw = 0; 
    float totalPitch = MathHelper.PiOver2; 
    public float currentPitch = 0; 

    public float leftTrigYaw; 
    public float rightTrigYaw; 

    //constructor 
    public Camera(Game game, Vector3 pos, Vector3 target, Vector3 up) 
        : base(game) 
    { 
        //build camera view matrix 
        cameraPosition = pos; 
        cameraDirection = target - pos; 
        cameraDirection.Normalize(); //Convert to magintue 1 

        //make it easy to apply differt speeds to movement of camera 
        cameraUp = up; 
        CreateLookAt(); 

        projection = Matrix.CreatePerspectiveFieldOfView 
            ( 
            MathHelper.PiOver4, 
            (float)Game.Window.ClientBounds.Width / (float)Game.Window.ClientBounds.Height, 
            1, 3000); 
    } 

    private void CreateLookAt() 
    { 
        //middle variable is the target! 
        view = Matrix.CreateLookAt(cameraPosition, cameraPosition + cameraDirection, cameraUp); 

    } 

    public override void Initialize() 
    { 

        Mouse.SetPosition(Game.Window.ClientBounds.Width / 2, 
            Game.Window.ClientBounds.Height / 2); 
        prevMouseState = Mouse.GetState(); 
        base.Initialize(); 
    } 

    public override void Update(GameTime gameTime) 
    { 
        GamePadState currentState = GamePad.GetState(PlayerIndex.One); 

        //move forward 
        if (currentState.ThumbSticks.Left.Y > 0 || Keyboard.GetState().IsKeyDown(Keys.W)) 
        { 
            //move just on x and x axis Y is controled other places. 
            cameraPosition += new Vector3(cameraDirection.X, 0, cameraDirection.Z) * speed; 
        } 
        //move backward 
        if (currentState.ThumbSticks.Left.Y < 0 || Keyboard.GetState().IsKeyDown(Keys.S)) 
        { 
            //move just on x and x axis Y is controled other places. 
            cameraPosition -= new Vector3(cameraDirection.X, 0, cameraDirection.Z) * speed; 
        } 
        //move left 
        if (currentState.ThumbSticks.Left.X < 0 || Keyboard.GetState().IsKeyDown(Keys.A)) 
        { 
            //cross product of the up and direction vectors can give the side direction 
            cameraPosition += Vector3.Cross(cameraUp, cameraDirection) * speed; 
        } 
        //move right 
        if (currentState.ThumbSticks.Left.X > 0 || Keyboard.GetState().IsKeyDown(Keys.D)) 
        { 
            cameraPosition -= Vector3.Cross(cameraUp, cameraDirection) * speed; 
        } 

        //mouse movements 

        // Yaw rotation 
        float yawAngle = (-MathHelper.PiOver4 / 150) * 
                (Mouse.GetState().X - prevMouseState.X); 

        float padYaw = (-MathHelper.PiOver2 / 50) * 
             (currentState.ThumbSticks.Right.X); 

        if (Math.Abs(currentYaw + yawAngle) < totalYaw) 
        { 
            cameraDirection = Vector3.Transform(cameraDirection, 
                Matrix.CreateFromAxisAngle(cameraUp, yawAngle)); 
            currentYaw += yawAngle; 
        } 

        //rotate left and right  
        if (currentState.ThumbSticks.Right.X < 0 || currentState.ThumbSticks.Right.X > 0) 
        { 
            if (Math.Abs(currentYaw + padYaw) < totalYaw) 
            { 
                cameraDirection = Vector3.Transform(cameraDirection, 
                Matrix.CreateFromAxisAngle(cameraUp, padYaw)); 
                currentYaw += padYaw; 
            } 

        } 

         leftTrigYaw = (MathHelper.PiOver2 / 50) * 
           (currentState.Triggers.Left); 

        if (currentState.Triggers.Left > 0.0f) 
        { 
            cameraDirection = Vector3.Transform(cameraDirection, 
            Matrix.CreateFromAxisAngle(cameraUp, leftTrigYaw)); 
        } 

         rightTrigYaw = (-MathHelper.PiOver2 / 50) * 
           (currentState.Triggers.Right); 

        if (currentState.Triggers.Right > 0.0f) 
        { 
            cameraDirection = Vector3.Transform(cameraDirection, 
            Matrix.CreateFromAxisAngle(cameraUp, rightTrigYaw)); 
        } 

        // Pitch rotation 
        float pitchAngle = (MathHelper.PiOver4 / 150) * 
            (Mouse.GetState().Y - prevMouseState.Y); 

        float padPitch = (-MathHelper.PiOver2 / 50) * 
             (currentState.ThumbSticks.Right.Y); 

        if (Math.Abs(currentPitch + pitchAngle) < totalPitch) 
        { 
            cameraDirection = Vector3.Transform(cameraDirection, 
                Matrix.CreateFromAxisAngle( 
                    Vector3.Cross(cameraUp, cameraDirection), 
                pitchAngle)); 

            currentPitch += pitchAngle; 
        } 

        if (currentState.ThumbSticks.Right.Y < 0 || currentState.ThumbSticks.Right.Y > 0) 
        { 
            if (Math.Abs(currentPitch + padPitch) < totalPitch) 
            { 
                cameraDirection = Vector3.Transform(cameraDirection, 
                Matrix.CreateFromAxisAngle( 
                    Vector3.Cross(cameraUp, cameraDirection), 
                padPitch)); 

                currentPitch += padPitch; 
            } 

        } 

        //reset mouse state 
        target = cameraPosition + cameraDirection; 

        prevMouseState = Mouse.GetState(); 

        //for testing only!! get rid of this when done 
        if (currentState.Buttons.A == ButtonState.Pressed) 
        { 
            //fly upwar 
            cameraPosition += new Vector3(0, 15, 0); 
        } 

        if (currentState.Buttons.B == ButtonState.Pressed) 
        { 
            //fly upwar 
            cameraPosition -= new Vector3(0, 15, 0); 
        } 

        //call camera creat look at method to build new view matrix 
        CreateLookAt(); 

        if (Keyboard.GetState().IsKeyDown(Keys.Escape)) 
        { 
            Game.Exit(); 

        } 
        base.Update(gameTime); 
    } 
} 
 } 
```

我还使用自定义模型处理程序来绘制地面和头像

```
public class CModel 
{ 
    public Vector3 Position { get; set; } 
    public Vector3 Rotation { get; set; } 
    public Vector3 Scale { get; set; } 

    public Model Model { get; private set; } 
    private Matrix[] modelTransforms; 

    private GraphicsDevice graphicsDevice; 

    public CModel(Model Model, Vector3 Position, Vector3 Rotation, 
        Vector3 Scale, GraphicsDevice graphicsDevice) 
    { 
        this.Model = Model; 

        modelTransforms = new Matrix[Model.Bones.Count]; 
        Model.CopyAbsoluteBoneTransformsTo(modelTransforms); 

        this.Position = Position; 
        this.Rotation = Rotation; 
        this.Scale = Scale; 

        this.graphicsDevice = graphicsDevice; 
    } 

    public void Draw(Matrix View, Matrix Projection) 
    { 
        // Calculate the base transformation by combining 
        // translation, rotation, and scaling 
        Matrix baseWorld = Matrix.CreateScale(Scale) 
            * Matrix.CreateFromYawPitchRoll( 
                Rotation.Y, Rotation.X, Rotation.Z) 
            * Matrix.CreateTranslation(Position); 

        foreach (ModelMesh mesh in Model.Meshes) 
        { 
            Matrix localWorld = modelTransforms[mesh.ParentBone.Index] 
                * baseWorld; 

            foreach (ModelMeshPart meshPart in mesh.MeshParts) 
            { 
                BasicEffect effect = (BasicEffect)meshPart.Effect; 

                effect.World = localWorld; 
                effect.View = View; 
                effect.Projection = Projection; 

                effect.EnableDefaultLighting(); 
            } 

            mesh.Draw(); 
        } 
    } 
} 

} 
```

我不知道问题出在哪里，但这是我能想到的唯一两件事会导致问题。感谢您对此的任何帮助。

这是模型的情况。我确信正常情况在 Maya 中是正确的，因为我使用了 Microsoft 在教程中提供的简单模型抽屉，但是您可以在一定程度上看到这些家伙的肩膀和手臂。我无法拍到地面闪烁的照片，因为它发生得太快而无法真正进行屏幕捕捉。但是每次我移动相机时，地面都会上下跳动很多。然后当我停止移动相机环顾四周时停止。我没有调用 camera.Update() 方法，因为它是一个游戏组件并且与 game1 类相关联。 ![看模型](../Images/deef203398fc658c1dffbb14d030d77b.png)

![通过顶部看到他的手臂内侧！](../Images/b2788df506e14f1393626c6a58c80d1f.png)

这就是我绘制模型的方式，它是自定义模型类中的绘制方法

```
public void Draw(Matrix View, Matrix Projection)
    {
        // Calculate the base transformation by combining
        // translation, rotation, and scaling
        Matrix baseWorld = Matrix.CreateScale(Scale)
            * Matrix.CreateFromYawPitchRoll(
                Rotation.Y, Rotation.X, Rotation.Z)
            * Matrix.CreateTranslation(Position);

        foreach (ModelMesh mesh in Model.Meshes)
        {
            Matrix localWorld = modelTransforms[mesh.ParentBone.Index]
                * baseWorld;

            foreach (ModelMeshPart meshPart in mesh.MeshParts)
            {
                BasicEffect effect = (BasicEffect)meshPart.Effect;

                effect.World = localWorld;
                effect.View = View;
                effect.Projection = Projection;

                effect.EnableDefaultLighting();
            }

            mesh.Draw();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:03:46.633

对于模型上的工件：模型看起来没有正确渲染。您的 DrawPrimitives 调用可能没有为显卡提供正确的数据（您的顶点/索引缓冲区填充错误，或者您的基元类型/计数错误）。尝试以线框模式渲染它，您应该能够看到正在扭曲的三角形，从而产生这些伪影。

至于地面 - 我将通过代码查看更多内容，看看我是否能想到任何东西。

# tfs-workitem - TFS 2005 到 2010 - 自定义工作项

> ID：10821614
> 
> 赞同：0
> 
> 时间：2012-05-30T17:52:31.837
> 
> 标签：tfs-workitem, tfs-2005

只是一个快速的问题。

如果我们从 TFS 2005 迁移到 TFS 2010，我们在 2005 年开发的任何定制工作项会发生什么变化？我们是否必须重新定制，或者它们可以导入/延续到 2010 年？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:20:23.177

默认情况下，现有团队项目不会发生任何变化，这意味着您不会受益于 TFS 2010 中所做的改进（例如，版本化类型链接）。

如果您想从这些新功能中受益，您必须通过编辑工作项类型的定义来手动引入它们。

没有真正的工具或流程可以将使用 TFS2005/2008 创建的现有团队项目迁移到 TFS 2010，主要是因为每种情况的处理方式都不同。

我的建议是使用自定义工作项的 WIT 定义创建一个沙盒团队项目，然后使用 TFS 2010 进行一些改进测试。当一切正常且稳定后，将新定义应用于您想要的现有团队项目。

当然，使用新流程模板创建的新团队项目将是您所期望的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:17:18.613

[您可以在http://blogs.msdn.com/b/allclark/archive/2009/10/13/enabling-new-application-lifecycle-management-features-for-visual-studio](http://blogs.msdn.com/b/allclark/archive/2009/10/13/enabling-new-application-lifecycle-management-features-for-visual-studio-2010-beta-2-in-upgraded-team-projects.aspx)找到启用新功能的步骤[-2010-beta-2-in-upgraded-team-projects.aspx](http://blogs.msdn.com/b/allclark/archive/2009/10/13/enabling-new-application-lifecycle-management-features-for-visual-studio-2010-beta-2-in-upgraded-team-projects.aspx)

对于 TFS2012，我们添加了一个向导，可以自动在您的团队项目中配置新功能，但这仅在正确配置 TFS2010 功能时才有效。

# c++ - 完成后关闭线程

> ID：10821618
> 
> 赞同：6
> 
> 时间：2012-05-30T17:52:45.603
> 
> 标签：c++, c, multithreading, pthreads

完成后如何关闭线程？比如确保没有任何东西是打开的或运行的？

到目前为止我知道如何打开它，但是.. 不知道如何正确关闭它

```
int  iret1; 
pthread_t thread1;
char *message1;

void *multithreading1( void *ptr ) {
    while (1) {
        // Our function here
    }   
}

int main (int argc, char * const argv[]) {
    if( (iret1=pthread_create( &thread1, NULL, multithreading1, (void*) message1)) )
    {
        printf("Thread creation failed: %d\n", iret1);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T17:54:12.933

为此，您可以从线程函数 ( `multithreading1`) 返回或调用[`pthread_exit()`](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_exit.3.html)。

有关更多信息，请参阅[POSIX 线程编程](https://computing.llnl.gov/tutorials/pthreads/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-30T18:13:07.610

***“完成后如何关闭线程？”***
通过简单地从该函数返回或调用[pthread_exit 函数](http://pubs.opengroup.org/onlinepubs/009604599/functions/pthread_exit.html)。

请注意，调用`return`还会导致堆栈被展开，并且在启动例程中声明的变量被破坏，因此它比`pthread_exit`函数更可取：

```
An implicit call to pthread_exit() is made when a thread other than the thread in
which main() was first invoked returns from the start routine that was used to
create it. The function's return value shall serve as the thread's exit status. 
```

有关更多信息，请查看：[return() 与 pthread 启动函数中的 pthread_exit()](https://stackoverflow.com/q/3692591/1168156)

***“确保没有任何东西被打开或运行”***[而不是确定你的线程是否仍在运行，你应该使用pthread_join 函数](http://pubs.opengroup.org/onlinepubs/009604599/functions/pthread_join.html)
等待它的终止。

这是一个例子：

```
void *routine(void *ptr) {
    int* arg = (int*) ptr; // in C, explicit type cast is redundant
    printf("changing %d to 7\n", *arg);
    *arg = 7;
    return ptr;
}

int main(int argc, char * const argv[]) {
    pthread_t thread1;
    int arg = 3;
    pthread_create(&thread1, NULL, routine, (void*) &arg);

    int* retval;
    pthread_join(thread1, (void**) &retval);
    printf("thread1 returned %d\n", *retval);
    return 0;
} 
```

输出

```
changing 3 to 7
thread1 returned 7 
```

# jquery-validate - jQuery Validate，动态更改规则

> ID：10821620
> 
> 赞同：1
> 
> 时间：2012-05-30T17:52:53.330
> 
> 标签：jquery-validate

我一直在 Javascript 中设置我的 jQuery Validate 规则，就像在这篇文章中一样： [http ://www.raymondcamden.com/index.cfm/2009/2/10/An-Introduction-to-jQuery-and-Form-Validation -2](http://www.raymondcamden.com/index.cfm/2009/2/10/An-Introduction-to-jQuery-and-Form-Validation-2)

我将规则存储在一个名为 validationRules 的 jsony 对象中，然后在调用 Validate 插件时传递规则：

```
$("#myForm").validate(validationRules); 
```

稍后，我想根据用户交互以编程方式更改值，如下所示：

```
validationRules.rules.Quantity.min=10; 
```

即使值已更新，Validate 也不接受新值。我也试过，重新调用插件：

```
$("#myForm").validate(validationRules); 
```

但这没有帮助。

我可以直接与插件对话：

```
$("#Quantity").rules("add", {min: 10}); 
```

它的行为与预期的一样。因此，我将使用该语法即时更改规则，但有人可以阐明我如何告诉 Validate 遵守validationRules 中的更新规则吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T23:46:21.867

我有同样的问题，我花了很多时间试图解决它。最后，我在验证插件创建者的 GitHub 帐户中找到了一个技巧：

```
var $form       = $('#formId'),
    newRules    = {rules...},
    newMessages = {messages...};

$.each(newRules , function(key, value) {
    newRules [key] = $.validator.normalizeRule(value);
});
$.extend( $form.validate().settings.rules, newRules );
$.extend( $form.validate().settings.messages, newMessages ); 
```

我不太确定这些消息，我现在正在使用它并且似乎工作正常。这是您可以阅读更多相关信息的链接： [https ://github.com/jzaefferer/jquery-validation/issues/214](https://github.com/jzaefferer/jquery-validation/issues/214)

# html - 一个衬里 awk html 标记用 gsub 替换 "''>" 和 "''>"

> ID：10821622
> 
> 赞同：2
> 
> 时间：2012-05-30T17:52:54.563
> 
> 标签：html, awk, escaping, gsub

在过去的半个小时里，我一直在为此绞尽脑汁，到目前为止我所尝试的一切都失败了！

在 html 文件中，标签中有一个字段，但该字段本身没有用 > 符号的空格分隔，因此很难用 awk 读取。我基本上想在开始标记后添加一个空格，但是 gsub 和 awk 拒绝合作。

我试过了

```
awk 'gsub("class\\\'\\\'>","class\\\'\\\'>")' filename 
```

因为需要一个反斜杠来转义单引号，第二个来转义反斜杠本身，第三个来转义序列 \' 但是终端（我在 Mac 上工作）拒绝执行，而是进入下一行等待我的其他意见。

请帮忙 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:14:14.390

在 Bash 中，单引号*绝对不接受 escape*。假设我写了这个命令：

```
$ echo '\''
> 
```

Bash 会`'`在第二次考虑由关闭打开的字符串`'`，生成一个仅包含`\`. 那么，下一个`'`被认为是一个新字符串的开始，因此 bash 期望在下一行中有更多输入（由 表示`>`）。

如果你不知道这个事实，你可能会认为`echo`下面命令后面的字符串会打开，但它是关闭的：

```
$ echo 'will this string contain a single quote like \'
will this string contain a single quote like \ 
```

所以，当你写

```
'gsub("class\\\'\\\'>","class\\\'\\\'> ")' 
```

您正在编写`gsub("class\\\`与反斜杠和引号 ( `\'`) 连接的字符串；然后是大于信号。在此之后，将`","`被解释为包含逗号的字符串，因为表达式开头的单引号之前已关闭。目前，结果是：

```
gsub("class\\\\'>, 
```

逗号之后是字符串`class`，后跟一个反斜杠和一个引号，然后是另一个反斜杠和另一个引号，最后是一个大于符号和一个空格。这是当前字符串：

```
gsub("class\\\\'>,class\'\'> 
```

这不是有效的 awk 表达式！无论如何，情况会变得更糟：双引号`"`将开始一个字符串，其中将包含一个右括号和一个单引号，*但这个字符串永远不会关闭！*

**总结一下**，你的问题是，如果你用 Bash 打开一个字符串，无论你在它前面放多少个反斜杠`'`，它都会在下一个被强制关闭。`'`

**解决方案**：您可以使用一些技巧来打开和关闭字符串，`'`但`"`它很快就会变得很麻烦。我建议的解决方案是将您的 awk 表达式放在一个文件中。然后，使用`-f`awk 中的标志 - 这个标志将使 awk 执行以下文件：

```
$ cat filename # The file to be changed
class''>
class>
class''>
$ cat mycode.awk  # The awk script
gsub("class''>", "class''>[PSEUDOSPACE]")
$ awk -f mycode.awk filename  # THE RESULT!
class''>[PSEUDOSPACE]
class''>[PSEUDOSPACE] 
```

如果您不想写文件，请使用所谓的[此处文档](http://tldp.org/LDP/abs/html/here-docs.html)：

```
$ awk -f- filename <<EOF 
gsub("class''>", "class''>[PSEUDOSPACE]")
EOF
class''>[PSEUDOSPACE]
class''>[PSEUDOSPACE] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:13:19.317

问题是您正在转义`'`，因此您没有完成命令。例如：

```
echo \' > foo 
```

将单引号回显到名为 foo 的文件中，并且

```
echo \\\' > foo 
```

写一个反斜杠，后跟一个单引号。

特别是，您不能在字符串中转义单引号，因此

```
'foo\'bar' 
```

是后跟不匹配开引号`foo\`的字符串。`bar`和写的完全一样`"foo\\"bar'`

# facebook - 有没有办法解决 Open Graph 动作故事附件标题模板的限制？

> ID：10821627
> 
> 赞同：3
> 
> 时间：2012-05-30T17:53:09.213
> 
> 标签：facebook, facebook-opengraph, captions

我正在尝试解决开放图形操作附件标题的 3 个特定限制。我指的是可在操作配置页面中配置的附件标题（例如[https://developers.facebook.com/apps/<app-id>/opengraph/action_type/<action-type-id](https://developers.facebook.com/apps/<app-id>/opengraph/action_type/<action-type-id) >）。

1.  我找不到插入换行符或换行符的方法。我猜这可能是设计使然，但这似乎是一件合理的事情。
2.  如果操作可以应用于多个对象类型，则不能在标题模板中使用任一对象的字段。如果这样做，当您从未设置的对象引用字段时，标题会“中断”（显示不正确）。例如，动作“驾驶”可以与“汽车”或“卡车”相关联。如果标题是`{car.model}`，那么它会因卡车而中断。与[此帖](http://facebook.stackoverflow.com/questions/9386820/associating-open-graph-action-with-multiple-objects-caption-template)相关。理想情况下，我希望能够做类似的事情`({car.model} OR {truck.make})`。
3.  可选的动作/对象字段不能在标题中使用，因为如果它们未设置，标​​题会“中断”，就像上面的 #2 中一样。

当我说标题“中断”时，我的意思是它显示不正确。它似乎进入了调试模式，其中显示`fieldName fieldValue`对象/动作中各个字段的对。

这三个问题有解决办法吗？

请注意，我不是在处理聚合，只是实际操作 Open Graph 帖子。

更新：看起来 Facebook 刚刚在最后一天推出了一项更改，以允许多行字幕。这解决了第 1 项。项目#2 和#3 仍然未完成。

更新 2：对于 #2，如果您只在每行中放置一个模板项（例如 {someobject.somefield}），它似乎可以正常工作。如果未设置该选项，则不会显示该行。但是，如果你放了多个字段，它似乎会诉诸“打破”的行为。这可能也适用于#3，还没有尝试过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:25:07.940

如上述更新所述：

Facebook 进行了更改以允许多行字幕。这直接解决了第 1 项，间接解决了第 2 和第 3 项……

对于#2 和#3，如果您每行只放置一个模板项（例如{someobject.somefield}），它似乎可以正常工作。如果未设置该选项，则不会显示该行。但是，如果你放了多个字段，它似乎会诉诸“打破”的行为。这可能也适用于#3，还没有尝试过。

# facebook - FQL 流表的“其他人”缺少帖子

> ID：10821630
> 
> 赞同：3
> 
> 时间：2012-05-30T17:53:40.807
> 
> 标签：facebook, facebook-fql, facebook-opengraph

尝试在页面上为 filter_key = "others" 提取流信息时，我使用 FQL 和开放图形 API 得到了混合结果。我收到了一些帖子，但其中一些只是被完全省略了。我正在运行的 FQL 语句是...

```
SELECT message, attachment FROM stream WHERE filter_key = 'other' AND source_id = 'XXX' LIMIT 25 
```

如果有帮助，我最终会尝试获取其他人（非管理员）在页面上发布的所有照片。这将包括在 Facebook 网站上发布的照片​​，并且主要通过 FB 移动应用程序（iPhone、Android 等）发布。

为该页面选中了 Admin -> Manage Permissions 下的所有框。我自己和另一位同事试图在有和没有管理员状态的情况下将照片发布到墙上（这两种情况都发布为我们自己而不是页面）。我的帖子*会*出现在退货中，而他的不会。我们的个人隐私设置不同，因此他将其更改为 100% 公开。我们得到了相同的结果（他的帖子没有出现）。墙上还有其他几个帖子（显示在“其他人最近的帖子”下）没有出现。

我还推断*非管理员*通过 iPhone 应用程序发布的帖子**不会**出现在我们俩的信息流中。如果我使用 filter_key = 'owner' 我确实会在其中看到一些从“iPhone 版 Facebook”发布的帖子，但如果我删除我的个人管理员状态并使用我的 iPhone 发布，则帖子不会显示。

我很困惑。我不确定这些是我的错误还是疏忽。有任何想法吗？

# javascript - 如何定位特定范围内的图像？

> ID：10821634
> 
> 赞同：0
> 
> 时间：2012-05-30T17:53:52.487
> 
> 标签：javascript, jquery, html, css

我正在构建一个多项选择问卷，使用 jQuery 在悬停时切换单选按钮。我对每个可能的答案都有一个跨度，在其中我有一个单选按钮，我想在悬停时交换源。

现在这些是我制作的图像，而不是实际的单选按钮。我有两个图像，选中和未选中，当用户悬停时我正在交换 src。

因此，当用户将鼠标悬停在单选按钮本身或单选按钮旁边的实际文本上时，按钮会显示一个点。

这是我的跨度，其中包含单选按钮和文本（请记住，我有 5 个）。

```
<span class='choice' id='A'><img src="images/radioUnchecked.png" width="20" height="21" class='radioButton'>A) Naked woman</span> 
```

那么当用户将鼠标悬停在文本上时，我将如何使用 jQuery 来定位单选按钮？

**编辑：这是**我用来切换的 jQuery ，但它仅在用户将鼠标悬停在图像上时才有效。

```
$('img.radioButton').hover(function () {
    this.src = 'images/radioChecked.png';
}, function () {
    this.src = 'images/radioUnchecked.png';
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T17:56:17.883

```
$('span.choice').hover(function() {
   $('img.radioButton', this).attr('src', 'images/radioChecked.png')
}, function() {
   $('img.radioButton', this).attr('src', 'images/radioUnchecked.png')
}); 
```

如果您有更多的类元素，`choice`那么您可以尝试以下操作：

```
$('span.choice').has('img.radioButton').hover(function() {
   $('img.radioButton', this).attr('src', 'images/radioChecked.png')
}, function() {
   $('img.radioButton', this).attr('src', 'images/radioUnchecked.png')
}); 
```

`$('span.choice').has('img.radioButton')`将仅检测包含`img.radioButton`.

# c# - 如何手动结束当前正在运行的方法调用？

> ID：10821636
> 
> 赞同：5
> 
> 时间：2012-05-30T17:53:57.393
> 
> 标签：c#

正如标题所说，我调用了一个从数据库开始加载的方法。如果引发特定事件，我想提前退出该方法而不等待它完成加载。

**编辑：**有问题的方法在 UI 线程上运行

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T17:56:22.667

没有办法（干净地）从该方法之外破坏性地取消该方法。

.NET Framework 中的取消通常是一种合作模式。这意味着您的事件会*请求*取消，并且该方法会反过来偶尔检查它是否应该取消然后干净地退出。

这是通过框架内的[`CancellationToken`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.aspx)和类型来处理的。[`CancellationTokenSource`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtokensource)有关详细信息，请参阅[MSDN 上的取消](http://msdn.microsoft.com/en-us/library/dd997364.aspx)主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:35:10.860

如果您在 UI 线程上执行长时间运行的方法，那么几乎没有内置任何东西可以帮助阻止它。UI 线程也将无法监听任何事件（因为它在方法执行时被阻塞）。

使 UI 响应和操作可取消的选项：

*   在单独的线程上执行长时间运行的方法
*   尽可能使用异步执行操作。

要取消 - 您可以通过终止/关闭执行操作的连接/文件来取消某些操作。请注意，大多数 IO 操作不保证此类操作会立即终止该方法。

# linux - 如果没有 /etc/timezone 文件也没有 /usr/share/zoneinfo，如何在 Linux 中设置时区

> ID：10821641
> 
> 赞同：3
> 
> 时间：2012-05-30T17:54:17.787
> 
> 标签：linux, time, timezone, embedded, busybox

我需要在 Linux 系统（嵌入式busybox 发行版）上设置时区，但我没有 /etc/timezone 也没有 /usr/share/zoneinfo。如何设置时区？

我使用以下命令将硬件时钟设置为 utc：hwclock --set --date=18:15:30 --utc 然后认为我可以在 /etc/profile 中使用“export TZ=PST8PDT”来获得正确的日期时间，但是这似乎不起作用。我仍然看到这个：

```
# date
Wed May 30 18:17:42 PDT 2012 
```

谢谢！罗恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:50:03.547

必须在 /etc/TZ 中设置正确的时区，使用 --set 和 --utc 标志将 hwclock 设置为 utc，并使用 hwclock --systohc 将系统时间存储在硬件时钟中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:58:19.723

将此添加到 /etc/inittab：

> setenv TZ CDT

其中 CDT (Central) 是时区。

# java - 谷歌地图返回非英文地址

> ID：10821644
> 
> 赞同：1
> 
> 时间：2012-05-30T17:54:29.210
> 
> 标签：java, android, google-maps, google-api, google-geocoder

我正在编写一个使用地理编码器的android应用程序，以便通过经度和纬度点获取地址。即使我使用的是英语和希伯来语，我也得到了地址：

```
Geocoder geocoder = new Geocoder(this, Locale.ENGLISH); 
```

这是我的代码：

```
 String a="";
    Double longi = Double.valueOf(nz.substring(0, 9)).doubleValue();
    Double lati = Double.valueOf(nz.substring(10, nz.length())).doubleValue();

    Geocoder geocoder = new Geocoder(this, Locale.ENGLISH);
    try 
    {
        List<Address> addresses = geocoder.getFromLocation(longi, lati, 10);

        for (Address address : addresses) 
        {
            String tmp=address.getAddressLine(0);
            if (!(tmp.contains("District")))
            {
                if (!(tmp.contains("Israel")))
                {
                    a=a.concat(tmp);
                    a=a.concat(" ");
                }
            }
            Log.d("aa","address= " + address.getAddressLine(0));
        }
        Log.d("aa","a= " + a);

    } catch (IOException e) {
        Log.e("LocateMe", "Could not get Geocoder data", e);
    }
    return a; 
```

有谁知道如何解决这个问题？

提前感谢

# performance - Ext JS 应用程序中未使用的 JS 文件

> ID：10821645
> 
> 赞同：0
> 
> 时间：2012-05-30T17:54:34.603
> 
> 标签：performance, extjs4

我怎么知道哪些 js 文件在我的 extjs4 应用程序中未使用，我想从我的应用程序中删除它们，因为它在第一页出现之前大约需要 10 秒，并且 sdk 文件夹大小超过 9 Mo。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T01:47:54.653

您实际上应该使用 Sencha SDK 将所有（和核心 ExtJs）.js 文件组合成两个大文件，一个是 ExtJs，第二个是您的应用程序。我认为 4.0.7 版的完整 ExtJs 文件大约需要 1.5M - 这没什么大不了的。其余的取决于您的应用程序的规模和复杂程度。

# php - 导出 csv 时反序列化数据

> ID：10821648
> 
> 赞同：-2
> 
> 时间：2012-05-30T17:54:39.070
> 
> 标签：php, excel, excel-formula, export-to-csv

excel中是否有任何公式或任何其他方式来反序列化导出csv文件时从数据库调用的php数据？

我实际上成功创建了一个 csv 文件，但它们是序列化数据，所以我想让它不序列化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:15:09.253

在 Excel 中，您可以使用文本到数据中的列，然后选择 Delimited 并选择 , 或 ; 作为分隔符，具体取决于您的 csv 格式。

如果您想像我一样定期从数据库导出到电子表格格式，请查看[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:04:30.690

mobi001：

处理序列化日期的最佳方式是使用 JSON：

```
<?php
$arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);

echo json_encode($arr);
?> 
```

上面的例子将输出： {"a":1,"b":2,"c":3,"d":4,"e":5}

您可以使用相反的函数“json_decode”来检索原始数组...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:09:38.980

我想我必须为此搭建一座桥梁..进行反序列化数据，因为在sql中没有这样的查询可以在mysql上取消序列化它..或者我没有找到任何影响它的excell公式..

[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

实际上我正在使用一个插件，它只允许将 sql 查询和 Excel 公式放在他们的后端选项中，所以现在我必须自定义它

# android - 获取屏幕上一个点的颜色

> ID：10821650
> 
> 赞同：0
> 
> 时间：2012-05-30T17:54:41.257
> 
> 标签：android, android-view

好的，我不确定这是否可能，但是有没有办法确定屏幕上某个点的颜色？我正在使用 onTouchEvent 并且我想知道用户触摸的颜色。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:30:42.317

最后，我在视图上使用 getDrawingCache，然后在位图上使用 getPixel，并在 onTouchEvent 函数中接收到坐标。

# css - 水平滚动的多列问题

> ID：10821652
> 
> 赞同：9
> 
> 时间：2012-05-30T17:54:42.930
> 
> 标签：css

我有一个水平溢出设置为自动的父 div（主）。然后我有一个子元素（列），上面有我的所有列属性。问题是，一旦内容超出视口，我就无法再控制右侧边距或填充，因为该列似乎只能到达视口。例如，当我在“列”上放置背景颜色时，即使内容滚动得更远，背景也只会到达视口的边缘。

```
.main {
    overflow-x: visible;
    overflow-y: hidden;
    width: 100%;
}
.columns {
    background: red;
    column-fill: auto;
    column-width: 670px;
    column-gap: 80px;
    height: 120px;
    padding: 20px;
    width: auto;
}

<div class="main">
     <div class="columns">
           <p></p>
           <p></p>
           <p></p>
           <p></p>
           <p></p>
     </div>
</div> 
```

这是一个例子：http: [//jsfiddle.net/fyG24/](http://jsfiddle.net/fyG24/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T18:51:52.070

## 新答案：使用伪元素来帮助

根据您的评论，这是我认为满足您需求的[新小提琴。](http://jsfiddle.net/fyG24/25/)它添加了我标记的额外`div`包装，以及以下 css：`.columns``.scroller`

```
html {
    height: 100%;
}

body {
    margin: 0;
    padding: 0;
    height: 100%;    
}
.main {
    background: yellow;
    overflow: hidden;
    width: 100%;
    height: 100%;
    position: relative;
}

.main:after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    left: 0;
    height: 120px; /* match columns */
    background: red;
    z-index: 0;
}

.scroller {
    overflow-y: hidden;
    overflow-x: auto;
    height: 100%;
    position: relative;
    z-index: 1;
}

.columns {
    -webkit-column-fill: auto;
    -webkit-column-width: 300px;
    -webkit-column-gap: 40px;
    -moz-column-fill: auto;
    -moz-column-width: 300px;
    -moz-column-gap: 40px;
    height: 120px;
    padding: 0 20px;
    text-align: justify;
    width: auto;
}

.columns > p:last-of-type:after {
    content: '';
    display: block;
    width: 20px;
    height: 1px;
    float: right;
    margin-right: -20px;
    margin-top: -1px;
} 
```

我使用一个伪元素`.main`来将背景`.columns`设置为您打算为它们设置的显式高度，然后我还在最后一个伪元素中使用另一个伪元素`p`来强制渲染列的最后 20px。无论占用多长时间或占用什么部分，它都应该起作用，并且如果它恰好位于文本列的末尾`height: 1px`，`margin-top: -1px`则不应生成新列。

## 原始答案：移动溢出并设置右边距

要获得`background`传输，您需要更改一些 CSS，即：

```
.main {
    overflow: hidden;
    width: 100%;
}

.columns {
    overflow-x: auto;
} 
```

这似乎是因为`.column`背景受到原始代码中水平滚动条控制的`100%`宽度的限制。`.main`通过`.main`完全隐藏，然后设置`overflow-x: auto`on `.columns`，滚动现在由`.columns`div 控制，并允许其`background`被看到。

为了解决最右侧没有填充的问题，我唯一能想到的就是添加以下内容：

```
.columns > p:last-of-type {
    margin-right: 20px;
} 
```

`p`这会在直接子元素的最后一个元素上放置一个右边距`.columns`，然后给出我假设你想要的外观。

这是[修改后的小提琴](http://jsfiddle.net/fyG24/5/)（仅在 Firefox 中测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:54:18.600

只需将列 css 划分如下，我就取得了更好的结果：

```
.columns {
    -webkit-column-fill: auto;
    -webkit-column-width: 300px;
    -webkit-column-gap: 40px;
    -moz-column-fill: auto;
    -moz-column-width: 300px;
    -moz-column-gap: 40px;
    height: 120px;
}
.columns p {
    background: red;
    height: 120px;
    padding: 0 20px;
    text-align: justify;
    width: auto;
} 
```

# javascript - 使用 underscore.js 过滤多维数组

> ID：10821657
> 
> 赞同：8
> 
> 时间：2012-05-30T17:55:02.840
> 
> 标签：javascript, arrays, object, underscore.js

我有一个`event`名为`events`. 每个`event`都有，一个包含对象`markets`的数组。`market`里面还有另一个名为 的数组`outcomes`，包含`outcome`对象。

我想使用 Underscore.js 或其他一些方法来查找所有具有市场的事件，这些事件的结果具有名为`test`.

我想这可以使用一系列过滤器来实现，但我运气不佳！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T18:03:52.810

我认为您可以使用 Underscore.js[`filter`](http://underscorejs.org/#filter)和[`some`](http://underscorejs.org/#some)（又名“任何”）方法来做到这一点：

```
// filter where condition is true
_.filter(events, function(evt) {

    // return true where condition is true for any market
    return _.any(evt.markets, function(mkt) {

        // return true where any outcome has a "test" property defined
        return _.any(mkt.outcomes, function(outc) {
            return outc.test !== undefined ;
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T18:08:35.693

不需要下划线，你可以用原生 JS 做到这一点。

```
var events = [{markets:[{outcomes:[{test:x},...]},...]},...];
return events.filter(function(event) {
    return event.markets.some(function(market) {
        return market.outcomes.some(function(outcome) {
            return "test" in outcome;
        });
    });
}); 
```

当然，您也可以使用相应的下划线方法（[filter/select](http://documentcloud.github.com/underscore/#filter)和[any/some](http://documentcloud.github.com/underscore/#any)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:04:06.757

试试这个：

```
_.filter(events, function(me) { 
    return me.event && 
        me.event.market && me.event.market.outcome && 
        'test' in me.event.market.outcome
}); 
```

## [演示](http://jsfiddle.net/SgVqB/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-21T22:25:22.597

```
var events = [
  {
    id: 'a',
    markets: [{
      outcomes: [{
        test: 'yo'
      }]
    }]
  },
  {
    id: 'b',
    markets: [{
      outcomes: [{
        untest: 'yo'
      }]
    }]
  },
  {
    id: 'c',
    markets: [{
      outcomes: [{
        notest: 'yo'
      }]
    }]
  },
  {
    id: 'd',
    markets: [{
      outcomes: [{
        test: 'yo'
      }]
    }]
  }
];

var matches = events.filter(function (event) {
  return event.markets.filter(function (market) {
    return market.outcomes.filter(function (outcome) {
      return outcome.hasOwnProperty('test');
    }).length;
  }).length;
});

matches.forEach(function (match) {
  document.writeln(match.id);
});
```

这是我将如何做到这一点，而不依赖于图书馆：

```
var matches = events.filter(function (event) {
  return event.markets.filter(function (market) {
    return market.outcomes.filter(function (outcome) {
      return outcome.hasOwnProperty('test');
    }).length;
  }).length;
}); 
```

# java - Java nio WatchService：查看 Windows 驱动器列表

> ID：10821665
> 
> 赞同：1
> 
> 时间：2012-05-30T17:55:18.910
> 
> 标签：java, windows, nio, watchservice

我想在连接 USB 驱动器时收到通知。所以java sais：“驱动器H：创建”。有没有办法用 WatchService 做到这一点？观看根目录不起作用。它只是监视当前驱动器的根目录： Paths.get("/").register

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:37:30.463

你不能用`WatchService`. 由于您只担心 Windows，因此您可以简单地轮询[`FileSystem.getRootDirectories`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystem.html#getRootDirectories%28%29)和检测更改。

```
try {
   List<Path> roots = asList(FileSystems.getDefault().getRootDirectories());
   for(;;) {
        Thread.sleep(500);

        List<Path> newRoots = asList(FileSystems.getDefualt().getRootDirectories());
        for(Path newRoot : newRoots){
            if(!roots.contains(newRoot)) {
                System.out.println("New drive detected: " + newRoot);
            }
        }
        roots = newRoots;
    }
} catch(InterruptedException e) {
    e.printStackTrace();
    Thread.currentThread().interrupt();
} 
```

如果您希望它在其他操作系统上工作，您必须轮询[`FileSystem.getFileStores`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystem.html#getFileStores%28%29)并找出一种方法来[获取`FileStore`](https://stackoverflow.com/q/10678363/758280).

/e1

```
private <T> List<T> asList(Iterable<T> i) {
    if (i instanceof List) { return (List<T>) i; }

    List<T> l = new ArrayList<>();
    for (T t : i) {
        l.add(t);
    }
    return l;
} 
```

# javascript - 如何使用 jQuery 在数据类型中查找特定字符串？

> ID：10821667
> 
> 赞同：1
> 
> 时间：2012-05-30T17:55:22.340
> 
> 标签：javascript, jquery

我在[http://shoeshinedesign.com/css/portfolio/上动态地整理投资组合](http://shoeshinedesign.com/css/portfolio/)

第一个列出的项目有两个类别：“todd-ao”和“soundelux”。顶部的过滤器按钮通过 jQuery 对项目进行排序，连接`li`过滤器按钮的类和`data-type`特定项目的类。

由于过滤器按钮由一个类标记，每当我在`data-type`参数中有两个类别时，jQuery 脚本就无法识别`data-type`.

我需要一个是修改我的 jQuery 以允许在`data-type`和按钮中的多个单词仍然进行相应的排序。

**这是我的 HTML 标记：**

```
<!-- FILTER BUTTONS -->
<ul class="portfoliofilter">
  <li class="all">
    <a href="#">All</a>
  </li>
  <li class="todd-ao">
    <a href="#">Todd-AO</a>
  </li>
  <li class="soundelux">
    <a href="#">Soundelux</a>
  </li>
</ul>

<!-- PROJECT LISTING -->

<ul id="portfoliolist3column"> 
  <li class="portfolio" data-type="todd-ao soundelux">
    <!-- 
        THIS PROJECT WON'T SORT DUE TO DATA-TYPE
        NOT SPECIFICALLY MATCHING FILTER LI CLASS
    -->
  </li>
  <li class="portfolio" data-type="todd-ao">
    <!-- SORTS -->
  </li>
  <li class="portfolio" data-type="soundelux">
    <!-- SORTS -->
  </li>
</ul> 
```

**jQuery 标记：（**专注于`else`条件）

```
jQuery('.portfoliofilter li').click(function(e) {
  jQuery(".portfoliofilter li a").addClass("portfoliobutton_noselect");
  jQuery(".portfoliofilter li a").removeClass("portfoliobutton");   
  jQuery(this).children('a').removeClass("portfoliobutton_noselect");
  jQuery(this).children('a').addClass("portfoliobutton");

  var filterClass = jQuery(this).attr('class');

  if (filterClass == 'all') {
    var $filteredData = $data.find('.portfolio');
  } else {
    var $filteredData = $data.find('.portfolio[data-type=' + filterClass + ']');
  }

  jQuery($list).quicksand($filteredData, {
    duration: 500,
    easing: 'swing',
    adjustHeight: 'dynamic',
    enhancement: function() { }
  }, function() {
    addPrettyPhoto();
  });

  return false;
}); 
```

有没有办法`$data.find`简单地查找一个字符串而不是与`filterClass`?

**编辑**
这是最终的上下文代码，由下面的@pimvdb 提供。

```
jQuery('.portfoliofilter li').click(function(e) {

            jQuery(".portfoliofilter li a").addClass("portfoliobutton_noselect");
            jQuery(".portfoliofilter li a").removeClass("portfoliobutton"); 
            jQuery(this).children('a').removeClass("portfoliobutton_noselect");
            jQuery(this).children('a').addClass("portfoliobutton");

            var filterClass = jQuery(this).attr('class');

            if (filterClass == 'all') {
                var $filteredData = $data.find('.portfolio');
            } else {
                var $filteredData = $data.find(".portfolio").filter(function() {
                    return ~jQuery(this).data("type").split(" ").indexOf(filterClass);
                  });
            }

            jQuery($list).quicksand($filteredData, {
                duration: 500,
                easing: 'swing',
                adjustHeight: 'dynamic',
                enhancement: function() {

                }
            }, function(){
                addPrettyPhoto();
            });

            return false;
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:29:17.323

您可以将函数传递给`.find`并拆分`data-`项目：http: [//jsfiddle.net/mXbGJ/](http://jsfiddle.net/mXbGJ/)。这是这个想法的一个例子，不是你的案例的确切实现，但我猜很容易将它粘贴到你的代码中：

```
$("...").find(function() {
    return ~$(this).data("items").split(" ").indexOf("b");
}).css("background-color", "red"); 
```

* * *

**编辑：**这记录了我认为正确的：

```
jQuery('.portfoliofilter li').click(function() {
  var x = jQuery(this).attr("class");
  console.log($("#portfoliolist3column").find(".portfolio").filter(function() {
    return ~jQuery(this).data("type").split(" ").indexOf(x);
  }));
}); 
```

# java - 添加到二维数组

> ID：10821673
> 
> 赞同：-2
> 
> 时间：2012-05-30T17:55:40.600
> 
> 标签：java

我将如何在循环时将两个元素添加到二维数组中。

```
for(...){
gradeArray[i][i] (gradeArray[95][5]  <---- i = 0, gets the zero term for the grade and frequency 
gradeArray[i][i] (gradeArray[96][2] <-----i = 1; gets the first term for the grade and frequency 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T18:11:16.023

在我看来，您想知道每个年级出现的次数。我认为你最好的选择是 HashMap：

```
Map<Integer, Integer> frequencyTable = new HashMap<Integer, Integer>();
for (Integer grade : gradeArray) {
    if (!frequencyTable.containsKey(grade)) {
        frequencyTable.put(grade, Collections.frequency(gradeArray, grade));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:28:01.350

您的新编辑仍然让我感到困惑，但这就是我认为您要问的全部内容：

```
int[][] gradesAndFrequencies = new int[gradeCount][2];
for (int i = minGrade; i < maxGrade; i++) {
    int grade = ?;
    int frequency = ?;
    gradesAndFrequencies[i][0] = grade;
    gradesAndFrequencies[i][1] = frequency;
} 
```

这是假设您知道总共有多少个等级，并且您知道如何找到每个等级及其频率。

我仍然坚持我之前对 Ted Hopp 的回答的评论：没有任何关于你想要做什么的额外信息，我不得不说这并不是你数据的一个很好的模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T02:40:22.183

你不会喜欢的，但方法如下。所以，数组是不可变的。所以，为了避免这个问题，我会使用一个可变的 ArrayList。但要回答您的问题（假设尺寸为 95x95）：

```
int newGradeArray[][] = new int[96][96]; //creating a new array that has an extra column and row, for more space.
for(int i = 0; i < 95; i++)//a set of nested loops taking everything from the old array, and moving it to this new one.
    for(int j = 0; j < 95; j++)
        newGradeArray[i][j] = gradeArray[i][j]
//now to add the elements (in the new element or column, your choice)
newGradeArray[95][95] = 95; //assigns the very edge of the new array a value of 95 
```

或者，您可以使用 ArrayList。这样，您无需创建新数组并重新分配，您可以执行以下操作：

```
ArrayList<Integer> a = new ArrayList<Integer>(); //note: ArrayLists can only have classes, not primitive types. Luckily, Integer and I think Character are classes too!
a.add(95, new Integer(95)); //sets the index of 95 as an Integer: 95. 
```

这些可以做成二维的。或者：

```
ArrayList<int[]> i = new ArrayList<int[]>(); 
```

甚至：ArrayList> l = new ArrayList>(); 如果你想 ：）

希望这有帮助！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-30T17:59:10.737

只需使用 2 个列表，一个用于成绩，一个用于频率

利用：

```
List<Integer> grades = new ArrayList<Integer>();
List<Integer> freq = new ArrayList<Integer>();
grades.add(grade);
freq.add(frequency); 
```

添加到他们

这会简单得多。

例子：

```
while(1 == 1) //infinite loop
{
    grade = -1
    frequency = -1
    grade = inputGrade.nextInt();
    frequency = inputFrequency.nextInt();
    if(grade != -1 && frequency != -1)
    {
        grades.add(grade);
        freq.add(frequency);
    }
    else
    {
    //if using a command window
    System.out.println("Missing either frequency or grade, values not stored");
    //if not using a command window
    JOptionPane.showMessageDialog(null, "Missing either frequency or grade, values not stored");
    }
} 
```

# logging - Azure 跟踪日志在模拟器上工作但不在云上工作

> ID：10821677
> 
> 赞同：4
> 
> 时间：2012-05-30T17:56:04.697
> 
> 标签：logging, azure, cloud, trace, diagnostics

我有一个 TraceManager 类，它基本上从 System.Diagnostics.TraceSource 类调用 TraceEvent 方法。

```
TraceSource source = new TraceSource("MyTraceSource");
void TraceInternal(TraceEventType eventType, string message)
{
    if (source != null)
    {
        try
        {
            source.TraceEvent(eventType, (int)eventType, message);
        }
        catch (SecurityException)
        {
            //Cannot access to file listener or cannot have
            //privileges to write in event log
            //do not propagete this :-(
        }
    }
}

public void TraceError(string message)
{
    if (String.IsNullOrEmpty(message))
        throw new ArgumentNullException("message", Messages.exception_InvalidTraceMessage);

    TraceInternal(TraceEventType.Error, message);
} 
```

因此，为了跟踪错误，我调用 TraceError 方法。

好吧，这是我在 WebRole OnStart 方法中使用的代码：

```
DiagnosticMonitorConfiguration dmc = DiagnosticMonitor.GetDefaultInitialConfiguration();
TimeSpan transferPeriod = TimeSpan.FromMinutes(1.0);

dmc.Logs.ScheduledTransferPeriod = transferPeriod;
dmc.Logs.ScheduledTransferLogLevelFilter = LogLevel.Verbose;

DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", dmc); 
```

这是我在 web.config 中的配置：

```
<system.diagnostics>
  <sources>
    <source name="MyTraceSource" switchName="sourceSwitch" switchType="System.Diagnostics.SourceSwitch">
      <listeners>
        <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="AzureDiagnostics">
          <filter type="" />
        </add>
      </listeners>
    </source>
  </sources>
  <switches>
    <add name="sourceSwitch" value="Verbose"/>
  </switches>
</system.diagnostics> 
```

这些是我的 WebRole 的配置设置：

```
<ConfigurationSettings>
  <Setting name="Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString" value="DefaultEndpointsProtocol=https;AccountName=ValidAcountName;AccountKey=ValidAcountKey" />
</ConfigurationSettings> 
```

最后，我的 ServiceDefinition 中有诊断导入：

```
<Imports>
  <Import moduleName="Diagnostics" />
</Imports> 
```

当我在 Azure 模拟器下从 Visual Studio 运行我的应用程序时，它运行良好。甚至我可以更改我的 ConfigurationSettings 以将我的日志保存在存储模拟器或我的云存储中。但是当我将它部署到天蓝色时，我看不到任何日志。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:03:49.677

如果以下设置处于活动状态，您能否检查您的 Azure 项目的属性？如果是，请尝试停用它：

![在此处输入图像描述](../Images/44431a2dd9d0dd9229e7aac0efe9bc18.png)

参考： http: [//michaelcollier.wordpress.com/2012/04/02/where-is-my-windows-azure-diagnostics-data/](http://michaelcollier.wordpress.com/2012/04/02/where-is-my-windows-azure-diagnostics-data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T15:29:20.360

您是否确认`TRACE`在构建应用程序时定义了常量？如果您有自定义构建脚本，是否可能未定义此常量？

这将阻止 Trace 语句被记录。

# google-maps - Google Map API v3 仅显示 5 层

> ID：10821682
> 
> 赞同：1
> 
> 时间：2012-05-30T17:56:33.330
> 
> 标签：google-maps, google-maps-api-3, kml

包含 10 个 KML 文件的简单调用，我们只显示了 5 个。

它工作了几个月，突然停止了（2012 年 5 月 28 日）。

```
 var map = new google.maps.Map(
      document.getElementById("map_canvas"),
      myOptions);
 ...
 var p1 = new google.maps.KmlLayer("http://domain.com/DLAYYZ.kml");
    p1.setMap(map);
    ....
    var p10 = new google.maps.KmlLayer("http://domain.com/A70BR2.kml");
    p10.setMap(map);
 ...

<body onload="initialize()">

  <div id="map_canvas"></div> 
```

如果我使用网络链接，那么我可以根据限制最多显示 10 个，但找不到 5 层的任何限制。

谷歌也随机显示 10 个中的 5 个。每次刷新时，我们可能有不同的图层。

有谁知道谷歌最近是否限制了某些东西？

据此：[http](http://www.google.com/enterprise/earthmaps/maps-compare.html) ://www.google.com/enterprise/earthmaps/maps-compare.html仅网络链接限制为 10。我们尝试了不同的域，不同的 api 密钥，但仍然只能显示 5。

谢谢

# c# - 识别谁调用事件处理程序

> ID：10821688
> 
> 赞同：1
> 
> 时间：2012-05-30T17:56:49.050
> 
> 标签：c#, winforms, visual-studio-2008, event-handling, windows-ce

我的应用程序带有我的标签，以便在其文本被修改时集中。

为此，我通过 EventHandler 调用一个方法。我想对我的每个标签使用相同的方法，但我不知道如何在方法中识别哪个标签调用它。

如果我有这样的代码：

```
 lbl_TextChanged(object sender, EventArgs e)
        {
           ..code..
           label1.Location = new Point("label's location");
           ..more code..
        } 
```

我再次从另一个标签调用该方法，我如何修改该代码才能知道哪个标签调用它？

**解决方案**感谢您的帮助，这是我第一次尝试使用事件处理程序进行某些操作，但不知道我需要强制转换发件人。这解决了我的问题。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:58:39.610

事件处理程序签名中的`sender`对象是引发事件的控件。

只需强制转换此对象，您就可以访问所有控件的信息。

```
Label label = sender as Label; 
```

您确实需要对此小心一点，因为您假设只有类型的控件`Label`会引发具有此处理程序方法的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:59:01.590

这就是它的`sender`用途：

```
Point p = ((Label)sender).Location;
// adjust p 
label1.Location = p; 
```

# php - 应用程序上下文php中的hashmap

> ID：10821692
> 
> 赞同：5
> 
> 时间：2012-05-30T17:57:06.543
> 
> 标签：php, hashmap, applicationcontext

我正在尝试在 PHP 中实现一个 hashmap（PHP 中的关联数组），它在应用程序范围内可用，即将它存储在应用程序上下文中，当程序结束时它不应该丢失。我怎样才能在 PHP 中实现这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:01:21.590

您可以为此使用[APC](http://php.net/manual/en/book.apc.php)或[类似软件，您放在那里的数据将在共享内存中可用。](http://php.net/manual/en/book.shmop.php)

请记住，这当然不会在服务器重新启动之间持续存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:03:25.550

如果您使用的是 Zend 的 php 版本，这很容易。
您不需要序列化您的数据。
只能缓存内容。文件句柄等资源不能。要存储真/假，请使用 1,0，以便您可以将缓存故障与`===`.

店铺：

```
zend_shm_cache_store('cache_namespace::this_cache_name',$any_variable,$expire_in_seconds); 
```

取回：

```
$any_variable = zend_shm_cache_fetch('cache_namespace::this_cache_name');

if ( $any_variable === false ) {
    # cache was expired or did not exist.
} 
```

对于长期存在的数据，您可以使用：

```
zend_disk_cache_store();zend_disk_cache_fetch(); 
```

对于没有zend的，上面对应的APC版本：

店铺：

```
apc_store('cache_name',$any_variable,$expire_in_seconds); 
```

取回：

```
$any_variable = apc_fetch('cache_name');

if ( $any_variable === false ) {
    # cache was expired or did not exist.
} 
```

从未使用过提到的任何其他方法。如果您没有可用的共享内存，您可以将数据序列化/反序列化到磁盘。当然，共享内存要快得多，而且 zend 的好处是它可以为您处理并发问题并允许命名空间：

店铺：

```
file_put_contents('/tmp/some_filename',serialize($any_variable)); 
```

取回：

```
$any_variable = unserialize(file_get_contents('/tmp/some_filename') ); 
```

编辑：要自己处理并发问题，我认为最简单的方法是使用锁定。我仍然可以在 lock exists 和 get lock 之间的这个伪代码中看到竞争条件的可能性，但你明白了。

伪代码：

```
while ( lock exists ) {
    microsleep;
}
get lock.
check we got lock.
write value.
release lock. 
```

# ruby-on-rails-3 - 以嵌套形式创建两个子对象？

> ID：10821693
> 
> 赞同：1
> 
> 时间：2012-05-30T17:57:18.257
> 
> 标签：ruby-on-rails-3, nested-forms

在我的 rails 应用程序中，我正在以嵌套形式创建一个对象“组织”和两个子对象“用户”和“设置”。当我运行表单时，我收到错误：

```
WARNING: Can't mass-assign protected attributes: user 
```

我以前在另一个项目中遇到过这个问题，发现我需要

```
@organization.users.build 
```

在 organizations_controller/new 中。为了在提交表单时添加子对象并创建一个子对象。

```
organization.rb
class Organization < ActiveRecord::Base
  attr_accessible :org_name, :address1, :address2, :city, :state, :postal_code, :country, :logo_image, :setting_id, :active, :status_image, :users_attributes, :setting_attributes
  has_many :users, :dependent => :destroy
  has_one :setting, :dependent => :destroy
  accepts_nested_attributes_for :users
  accepts_nested_attributes_for :setting
end

user.rb
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation, :name_first, :name_last, :admin, :notes, :current_outstanding, :pin, :registered, :sms, :super_user, :organization_id

  belongs_to :organization
end

setting.rb
class Setting < ActiveRecord::Base
  attr_accessible :green_hours, :green_mins, :yellow_hours, :yellow_mins, :red_hours,   :red_mins, :reminder_sms, :reminder_sms_hours, :reminder_sms_mins, :logo_url, :comp_name, :alert_emails, :alert_smss, :history_hours, :time_zone, :user_id, :organization_id

  belongs_to :organization
end

organizations_controller.rb
class OrganizationsController < ApplicationController

  def new
    @organization = Organization.new
    @organization.build_setting
    @organization.users.build

    respond_to do |format|
      format.html { render :layout => 'application_dashboard_orgs' }
      format.json { render json: @organization }
    end
  end

  def create
    @organization = Organization.new(params[:organization])

    respond_to do |format|
      if @organization.save
        format.html { redirect_to organizations_path, notice: 'Organization was successfully created.' }
        format.json { render json: @organization, status: :created, location: @organization }
      else
        format.html { render action: "new" }
        format.json { render json: @organization.errors, status: :unprocessable_entity }
      end
    end
  end
end

organizations/_form.html.erb
<%= form_for(@organization) do |f| %>
  <div class="Col1">

  <div class="MenuItem"><div class="MenuItemLabel">Account Name:</div> <%= f.text_field :org_name %></div>
  <div class="MenuItem"><div class="MenuItemLabel">Address Line 1:</div> <%= f.text_field :address1 %></div>
  <div class="MenuItem"><div class="MenuItemLabel">Address Line 2:</div> <%= f.text_field :address2 %></div>
  <div class="MenuItem"><div class="MenuItemLabel">City:</div> <%= f.text_field :city %></div>
  <div class="MenuItem"><div class="MenuItemLabel">State:</div> <%= f.text_field :state %></div>
  <div class="MenuItem"><div class="MenuItemLabel">Postal Code:</div> <%= f.text_field :postal_code %></div>
  <div class="MenuItem"><div class="MenuItemLabel">Country:</div> <%= f.text_field :country %></div>
  <div class="MenuItem"><div class="MenuItemLabel">Logo Image:</div> <%= f.file_field :logo_image %></div>
  <div class="MenuItem"><div class="MenuItemLabel">Active Account?</div> <%= f.check_box :active %></div>
  </div>

<div class="Col2">
  <div class="MenuItem"><div class="MenuItemLabel"><b>Administrator Account</b></div></div>
  <%= f.fields_for :user do |user| %>
      <div class="MenuItem"><div class="MenuItemLabel">First Name:</div> <%= user.text_field :name_first %></div>
      <div class="MenuItem"><div class="MenuItemLabel">Last Name:</div> <%= user.text_field :name_last  %></div>
      <div class="MenuItem"><div class="MenuItemLabel">Email Address:</div><%= user.text_field :email  %></div>
      <div class="MenuItem"><div class="MenuItemLabel">PIN:</div><%= user.password_field :password, :id => "password_field", :onchange => "add_pin()" %></div>
      <div class="MenuItem"><div class="MenuItemLabel">PIN Confirmation:</div><%= user.password_field :password_confirmation  %>  </div>
      <div class="MenuItem"><div class="MenuItemLabel">SMS Reminder Phone #:</div><%= user.text_field :sms  %>  </div>

      <div class="MenuItem"><div class="MenuItemLabel">Is Administrator:</div> <%= user.check_box :admin, {checked: true} %></div>
      <div class="MenuItem"><div class="MenuItemLabel">Password Setup?</div> <%= user.check_box :registered   %></div>
  <% end %>
  <%= f.fields_for :setting do |setting| %>
      <%= setting.hidden_field :green_hours, :value => params[99] %>
      <%= setting.hidden_field :green_mins, :value => params[59] %>
      <%= setting.hidden_field :yellow_hours, :value => params[0] %>
      <%= setting.hidden_field :yellow_mins, :value => params[15] %>
      <%= setting.hidden_field :red_hours, :value => params[0] %>
      <%= setting.hidden_field :red_mins, :value => params[0] %>
      <%= setting.hidden_field :reminder_sms, :value => params[true] %>
      <%= setting.hidden_field :reminder_sms_hours, :value => params[0] %>
      <%= setting.hidden_field :reminder_sms_mins, :value => params[15] %>
      <%= setting.hidden_field :history_hours, :value => params[24] %>
  <% end %>
      <div class="MenuItem">
    <%= flash[:notice] %> <br />
    <%= f.submit "Save Settings" %> <!--<input type="reset" value="Reset" />  -->

  </div>

  <div class="clr"></div>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:49:38.483

```
<%= f.fields_for :user do |user| %> 
```

应该

```
<%= f.fields_for :users do |user| %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:44:34.077

我认为您想要做的是使用表单支持的对象。Jeff Dean 在[http://pivotallabs.com/users/jdean/blog/articles/1706-form-b​​acking-objects-for-fun-and-profit上有一篇很好的博客文章](http://pivotallabs.com/users/jdean/blog/articles/1706-form-backing-objects-for-fun-and-profit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:54:08.437

您的错误表明您在尝试保存组织时无法设置“用户”属性。尝试将`:user`and添加`:setting`到您的 attr_accessible 行`organization.rb`

# iphone - NSRegularExpression 省略某些字符

> ID：10821695
> 
> 赞同：0
> 
> 时间：2012-05-30T17:57:29.780
> 
> 标签：iphone, objective-c, ios, ipad, nsregularexpression

所以我有以下正则表达式：

```
@"(#|@)\\S+" 
```

但是这里的 \S 也包括 # 和 @ 。如何制作此正则表达式，使其为 \S 但不包括 # 或 @？

基本上我想要一个不包括 # 和 @ 的非空白字符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:00:38.920

要排除一组字符，您只需在它之前添加 ^ .. 就像 ^(@|#)

您可以使用以下内容：-

```
NSStirng *string=@"Your String";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(@|#|\s)" options:NSRegularExpressionCaseInsensitive error:&error];

 NSString *modifiedString = [regex stringByReplacingMatchesInString:string options:0
range:NSMakeRange(0, [string length]) withTemplate:@""]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:52:23.100

试试`(#|@)[^\s#@]+`。`[^\s#@]`将匹配除空格字符、# 和 @ 之外的所有内容。

并记住在放入objective-c字符串文字时双重转义\。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T03:10:18.767

正如您最初提出这个问题的[另一个线程所讨论的那样，](https://stackoverflow.com/questions/10763536/parsing-string-starting-with-and-in-objective-c)

```
@"(#|@)\\w+" 
```

会做我认为你想要的。如果您*真的*想要除 #、@ 和空格之外的每个字符，那么

```
@"[#@][^@#\\s]+" 
```

应该这样做。这两个都将使用您的字符串：

```
@"@baz@marroon#red#blue #big@cat#dog" 
```

如果你使用`matchesInString:options:range`它给你：

```
@"@baz"
@"@marroon"
@"#red"
@"#blue"
@"#big"
@"@cat"
@"#dog" 
```

如果这不是你想要的，你应该给我们输入字符串和你想要的输出，我们可以告诉你如何得到它。

# objective-c - Objective C - iOS - UIWebView 保留在 ARC 中，但没有调用委托方法

> ID：10821711
> 
> 赞同：0
> 
> 时间：2012-05-30T17:58:54.013
> 
> 标签：objective-c, ios, uiwebview, automatic-ref-counting, retain

我遇到了 ARC 的问题。它不保留 webview。场景是我必须将 webview 从一个视图控制器发送到另一个视图控制器。原因是当用户搜索我想将他带到带有其他选项的新屏幕时。（我必须使用相同的 webview）

这是示例代码：我有一个 ViewController1，它有一个 webview（我在 xib 中添加了它。）我正在加载说 google，一旦用户搜索某些内容并且完成加载后，我必须将他带到一个新的视图控制器并在新的视图控制器中显示相同的 webview。

```
//ViewController1
@interface ViewController1 : UIViewController <UIWebViewDelegate>
    @property (nonatomic, retain) UIWebView* testWebView;
@end

@implementation ViewController1
@synthesize testWebView;
- (void)viewDidLoad
{
    [super viewDidLoad];
    testWebView = [[UIWebView alloc]init];
    testWebView.delegate = self;
    [testWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"https://www.google.com"]]];
}
-(void)webViewDidFinishLoad:(UIWebView *)webView{
    NSString *html = [testWebView stringByEvaluatingJavaScriptFromString: 
                      @"document.body.innerHTML"];
    if ([self.testWebView.request.url.absoluteString     rangeOfString:@"output=search"].location != NSNotFound) {
        ViewController2* newViewController = [[ViewController2 alloc] init];
        [newViewController setTestWebView:self.testWebView];
        [self.navigationController setViewControllers:[NSArray arrayWithObject:newViewController] animated:NO];
    }
}
- (void)dealloc{
    [self.testWebView stopLoading];
    self.testWebView.delegate = nil;
    self.testWebView = nil;
} 
```

在第二个视图控制器中，我在延迟 10 秒后加载 stackoverflow.com。问题是它可以很好地加载stackoverflow，但它没有调用任何委托方法。为什么？

```
@interface ViewController2 : UIViewController <UIWebViewDelegate>
    @property (nonatomic, retain) UIWebView* testWebView;
@end

@implementation ViewController2
@synthesize testWebView;
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.testWebView.delegate = self;
    [self.view addSubview:testWebView];
    [self performSelector:@selector(loadDifferentPage) withObject:nil afterDelay:10];
}

-(void)loadDifferentPage{
    [self.testWebView loadRequest:[NSURLRequest requestWithURL:[NSURL     URLWithString:@"http://www.stackoverflow.com/"]]];
}

-(void)webViewDidStartLoad:(UIWebView *)webView{
    NSLog(@"%s", __PRETTY_FUNCTION__);
}

-(void)webViewDidFinishLoad:(UIWebView *)webView{
    NSLog(@"%s", __PRETTY_FUNCTION__);
}

-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{
    NSLog(@"%s", __PRETTY_FUNCTION__);
    return YES;
} 
```

ViewController2 保留了 webview，但没有调用委托方法。为什么？

谢谢赛

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:10:35.253

ViewController1 delloc 方法导致了问题：

如果我取消注释 self.textWebView.delegate = nil 它工作正常。原因是首先我们为 newViewController 设置 webview，然后在 ViewController1 的 dealloc 中我们将其委托设置为 nil。

```
- (void)dealloc{
    [self.testWebView stopLoading];
    if(self.testWebView.delegate == self)
        self.testWebView.delegate = nil;
    self.testWebView = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T02:47:46.537

我注意到的第一件事是您在合成属性时没有指定实例变量名称。那只是要求碰撞。这是一个应该看起来如何的示例：

```
@interface ViewController1 : UIViewController <UIWebViewDelegate>
    @property (nonatomic, strong) IBOutlet UIWebView* testWebView;
@end

@implementation ViewController1

@synthesize testWebView=_testWebView; 
```

此外，我注意到在**ViewController1**中您使用了**IBOutlet**，因此所有内容都可能在 Interface Builder 中连接起来。尝试确保在 Interface Builder 中设置委托属性，因为您没有在实现中设置它。这就是为什么您没有收到任何消息的原因。

**ViewController2**看起来像您在代码中设置了委托。问题是，您没有**IBOutlet**在属性前面。通常这意味着您只需在代码中设置 WebView，但在您的示例中，您永远不会创建 UIWebView 控件的新实例并将其分配给 self.testWebView。这意味着如果它确实显示在页面上，那是因为使用了 Interface Builder 来创建它。如果不在testWebView 声明前使用**IBOutlet** ，您将无法在代码中设置委托，因此这可能就是它在示例 2 中不起作用的原因。

```
@interface ViewController2 : UIViewController <UIWebViewDelegate>
    @property (nonatomic, strong) UIWebView* testWebView; // Mising IBOutlet
@end

@implementation ViewController2
@synthesize testWebView;
- (void)viewDidLoad
{
    [super viewDidLoad];
    // missing any code that would create the webview [[UIWebView alloc] init]
    self.testWebView.delegate = self; // You set the delegate in code here
    [self.view addSubview:testWebView];
    [self performSelector:@selector(loadDifferentPage) withObject:nil afterDelay:10];
} 
```

希望这会有所帮助，我必须查看您的完整实施才能获得比这更具体的信息。

# jquery - IE9 中的 JQuery 快速搜索

> ID：10821714
> 
> 赞同：4
> 
> 时间：2012-05-30T17:59:08.283
> 
> 标签：jquery, internet-explorer-9, quick-search

我有一个带有大表的页面，它使用 jquery quicksearch 来快速搜索表。编写的这个函数在 Chrome、FF 和 IE8 中运行良好，但在 IE9 中失败。事实上，它似乎以这样的方式失败，即 $(document).ready() 的剩余部分没有完成。关于我可以改变什么以使其在 IE9 中工作的任何想法？

```
$(document).ready(function () {
            $("#search_box").quicksearch("table#invTable tbody tr", {
                noResults: '#noresults',
                stripeRows: ['odd', 'even'],
                loader: 'span.loading',
                onAfter: function() {
                    document.getElementById("count").innerHTML=($('tr:visible').length-1);
                    }                   
                }); 
```

编辑：看起来 IE9 控制台中的这个错误是问题所在：

> SEC7112：来自 [https://raw.github.com/riklomas/quicksearch/dev/jquery.quicksearch.js](https://raw.github.com/riklomas/quicksearch/dev/jquery.quicksearch.js)的脚本 由于 mime 类型不匹配而被阻止

现在我只需要弄清楚如何解决它！

EDIT2：文件托管在本地工作。对于提出此建议的评论者 - 将其添加为答案，我会将其标记为正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:29:02.953

这个 JavaScript 文件的 Github 托管版本带有`text/plain`mime 类型。如果您要在本地托管文件，则不会遇到此问题，因为内容类型将为`text/javascript`. 同样的规则也适用于 CSS。

进一步阅读：[Internet Explorer 中的 MIME 处理更改](http://blogs.msdn.com/b/ie/archive/2010/10/26/mime-handling-changes-in-internet-explorer.aspx)

![在此处输入图像描述](../Images/3996087623c1971aeb27a99b07efc2b3.png)

# c# - 如何禁用兼容性视图设置？

> ID：10821720
> 
> 赞同：2
> 
> 时间：2012-05-30T17:59:24.693
> 
> 标签：c#, .net, webbrowser-control, compatibility

我一直在尝试在 Web 浏览器控件上加载特定页面，该控件可以与系统上安装的 IE 一起正常工作，但我不断收到一个消息框（由页面创建），我必须禁用兼容性视图。相同的页面在我的 IE 9.0 上运行良好，无需篡改设置。我无法得到它！如果我使用壁虎，也会发生同样的事情，但我不知道为什么……有没有办法以编程方式禁用设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:21:17.893

我认为[这](http://msdn.microsoft.com/en-us/library/ee330730%28VS.85%29.aspx#browser_emulation)就是你所需要的。还有其他关于 SO [here](https://stackoverflow.com/questions/4612255/regarding-ie9-webbrowser-control)和[here](https://stackoverflow.com/questions/646742/how-to-programmatically-turn-off-quirks-mode-in-ie8-webbrowser-control)的类似问题的讨论。我认为以编程方式更改设置的唯一方法是使用代码编辑注册表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:11:40.783

看看这篇 msdn 文章[http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)

它应该有助于解决您的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T18:29:57.193

您可以在页面中设置 META 标记，强制它以您想要的格式显示。

```
<meta http-equiv="X-UA-Compatible" content="IE=9" > 
```

有关详细信息，请参阅此 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/cc288325 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx)

# sql-server - T-SQL 提取部分 xml 或 nvarchar(max) 列匹配模式

> ID：10821725
> 
> 赞同：0
> 
> 时间：2012-05-30T17:59:41.433
> 
> 标签：sql-server, database, tsql, sql-server-2008-r2

我想做一些我认为使用 T-SQL//SQL Server 2008 R2 相当简单的事情，但我似乎想不出办法。

**如果我使用 Java、C#、C++ 等语言，我会这样做：**

1.  查找字符串中第一次出现“123”的位置
2.  从该位置执行子字符串操作，获取接下来的 50 个字符

**所以，在 SQL Server 中，我基本上喜欢：**

1.  查找列 (X) 包含所述字符串的所有行（基本上是 LIKE 子句）
2.  从所述字符串的位置开始从该列返回 50 个字符。

*我能以某种方式做到这一点吗？* 我可以将一个 XML 列强制转换为 nvarchar(max)，进行类似操作，并进行子字符串操作，但我首先不知道如何获取所述字符串在列中的位置。

* * *

***评论中要求的示例内容***

`CREATE TABLE SampleTable(xmlData xml);`

如果 SampleTable 的 xmlData 列如下，则假装该值为 1。出于调试目的，我想从有趣的 unicode`Þ`字符中提取字符串向前 50 个字符（如果小于 50，则提取到文件末尾）。

```
<RootNode>
    <Row>
        <NestedNode1>
            some text.
        </NestedNode1>

        <NestedNode2>
            123456
        </NestedNode2>

        <NestedNode3>
            Þ Some crazy name with unicode letters. Þ
        </NestedNode3>
    </Row>
</RootNode> 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:15:10.480

您在寻找 CHARINDEX 吗？

```
;WITH CTE AS(
    SELECT CAST (xmlData as nvarchar(max)) as X
    FROM SampleTable
)
SELECT SUBSTRING(X,CHARINDEX(N'Þ',X),50) as [String]
FROM CTE
WHERE CHARINDEX(N'Þ',X)>0 
```

# asp.net-mvc-2 - MVC2 jquery将对象从视图传递到控制器

> ID：10821727
> 
> 赞同：0
> 
> 时间：2012-05-30T17:59:55.043
> 
> 标签：asp.net-mvc-2, jquery

我试图将对象 myclass 传递给视图页面，我面临的问题是 null 对象被返回给控制器。任何指针？

**下面是我的 ascx 页面中的代码**

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<myclass>" %>

<div class="upModel" style="display:none">
<%= Model%>
</div>

<script type="text/javascript">
  $(document).ready(function () {

    $("#load").click(function () {
                try {

                   $.ajax({
                            type: "POST",
                            url: "Loadmyaction",
                            data:  $("#upModel").serialize(),  
                            contentType: "application/json; charset=utf-8", 
                            success: function(data) { 
                             alert(data); 

                             },
                            error: function(result) { alert("Error" + result); }
                        });
                }
                catch (err) {
                    alert(err.description);
                }
          });
     </script>

    **On controller, this is my method**

      public string Loadmyaction(string obj)
            {
    string str = "";
    return str;
    } 
```

这里 obj 从视图中获取 null 。为什么没有数据被传回控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:07:10.127

你确定它真的符合你的方法吗？

您的 jquery 应如下所示：

```
$.ajax({
    type: "POST",
    url: "<%=Url.Action("Loadmyaction") %>",
    data: $("#upModel").serialize(),
    dataType: "json",
    success: function(data) { 
        alert(data); 
    },
    error: function(result) { 
        alert("Error" + result); 
    }
}); 
```

尝试将参数类型更改为`myClass`，无论它可能是什么。

```
[HttpPost]
public JsonResult LoadMyAction(MyClass model)
{
    return Json("someString");
} 
```

# version-control - 网站最多可以有 10 个具有相同名称/用途的文件，没有版本控制

> ID：10821731
> 
> 赞同：0
> 
> 时间：2012-05-30T18:00:08.100
> 
> 标签：version-control, editor

我是在一家大型公司工作的新手，有很多人在处理相同的文件。可悲的是，我们没有版本控制，我经常发现自己被斗眼了。由于缺乏更好的术语，我们有一个开发站点、质量保证站点和实时站点。我们有两种语言的大多数文件。由于网络连接驱动器的平均传输速率为 15kb/秒，我们经常在处理文件之前将文件复制到本地。承包商也向我们发送了新版本的文件，但我们可能在我们这边进行了更改，一切都搞砸了。基本上我正在处理 6-10 个具有相同名称和相同目的的文件。有人对我如何保持笔直有任何提示吗？我使用 Beyond Compare 2 来查看差异，但如果有一个程序可以比较所有文件的时间戳以查看哪个是最新的可能会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:05:15.523

思考： 1）获取版本控制系统（Git），否则你会越来越痛苦。2) 创建一个包含/lib 文件夹并将 6-10 个文件减少（减少到 1 个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:08:23.167

假设您无法说服实际使用源代码控制的权力，为什么不尝试纯粹在本地使用 Mercurial。希望您可以使自己免受一些噪音的影响。您甚至可以为承包商创建假用户并提交和推送这些更改，就好像他们真的在做一样。

让官僚看到像 Mercurial 或 Git 这样的优秀守门人会有多好应该不难。它有点像有用的繁文缛节！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:19:03.053

我会建议，带头将您的代码置于版本控制中，并推动您的团队迁移到新的存储库。这将使每个人的生活更轻松，最重要的是减少任何合并错误的机会。

# c - Ad-Hoc 构建是否有预处理器标志？

> ID：10821733
> 
> 赞同：4
> 
> 时间：2012-05-30T18:00:10.923
> 
> 标签：c, xcode, macros, c-preprocessor

我通常使用`DEBUG`预处理器标志。但我最近发现 Ad-hoc 和 Store 构建都使用发布配置。是否有仅为 Ad-Hoc 构建定义的预处理器标志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:25:48.143

这个问题的答案深入探讨了如何创建自定义配置和标志。它并不完美，但它有效。

仍在寻找更永久且跨项目兼容的选项，而无需在每个项目开始时花时间进行设置。

[iOS，从代码中检测临时](https://stackoverflow.com/questions/7252176/ios-detect-ad-hoc-from-code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:26:55.687

您可以轻松地为构建设置中的每个配置设置自定义宏。

# python - 使用多个密钥在 python-gnupg 中加密文件

> ID：10821741
> 
> 赞同：0
> 
> 时间：2012-05-30T18:00:47.833
> 
> 标签：python, gnupg

我正在使用 python-gnupg 加密一个文件，看起来 encrypt_file 只接受一个用于 sign 参数的密钥。如果我有一个包含多个密钥的密钥文件，我想用它来加密文档，我该怎么做？如果我理解正确，我应该能够使用多个密钥加密文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:09:30.233

在阅读了 python-gnupg 文档后再次重新阅读了您的问题，我认为您是在询问如何在加密文档的同时使用多个私钥对文档进行签名。

不幸的是，python-gnupg 不支持该过程，因为 GnuPG 也不支持它。你必须决定你希望你的签名如何被应用，然后一次做一个。

例如，您可以通过使用一个密钥加密和签名，然后使用另一个私钥对结果进行签名（并对您拥有的任何其他密钥重复第二个密钥）来对签名进行分层。

或者，您可以创建几个“分离”签名，每个签名都只是基础文档（因此不会将任何签名应用于其他签名）。这有点复杂，因为我不确定 GnuPG 是否会自动识别任何文件格式来一次验证多个分离的签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T14:12:07.693

在 python-gnupg encrypt_file 实际上接受收件人的列表（文档将其称为数组）。这应该有效：

```
import gnupg

gpg_home = "~/.gnupg"
gpg = gnupg.GPG(gnupghome=gpg_home)

data = raw_input("Enter full path of file to encrypt: ")
rkeys = raw_input("Enter key IDs separated by spaces: ")
savefile = data+".asc"

afile = open(data, "rb")
gpg.encrypt_file(afile, rkeys.split(), always_trust=True, output=savefile)
afile.close() 
```

它将密文写入与明文相同的目录非常粗糙，但它会起作用。请注意 rkeys.split() 选项，这就是将由空格分隔的键 ID 或 UID 字符串转换为 Python 列表的原因。

# sql - DB2 合并和同时插入到 ROWCOUNT 上的表的效果

> ID：10821742
> 
> 赞同：0
> 
> 时间：2012-05-30T18:01:00.123
> 
> 标签：sql, stored-procedures, db2

我必须分批更新表格。我首先选择 dataset 中的记录，处理它们并将从 dataset 构造的 xml 发送到存储的 proc。我有一个以 xml 作为输入参数的存储过程。它使用合并查询更新表，如下所示

```
CREATE PROCEDURE SP_UPDATE(IN RECORDS XML, OUT ROWSUPDATED INTEGER)
BEGIN
DECLARE RCOUNT INTEGER;
MERGE INTO TARGET_TABLE AS T
USING (SELECT X.* FROM 
XMLTABLE('$d/Root/Record' passing RECORDS as "d"
COLUMNS 
        "A" VARCHAR(10) PATH 'a',
        "B" VARCHAR(10) PATH 'b',
        "C" VARCHAR(10) PATH 'c',
        "D" VARCHAR(10) PATH 'd',
        "E" VARCHAR(10) PATH 'e',
        "F" VARCHAR(10) PATH 'f' 
) AS X) AS S
ON T.FCOL=S."F"
WHEN MATCHED AND T.ACOL=0 THEN
UPDATE
SET
T.ACOL=1,
T.BCOL=XT."B",
T.COL=XT."C"
GET DIAGNOSTICS RCOUNT=ROWCOUNT;
SET ROWSUPDATED=RCOUNT;
END 
```

一直调用此过程，直到所有记录都得到更新。其他应用程序同时将新记录插入到目标表中。我必须通过将某些列值设置为 1 来更新旧的和新插入的记录。问题是 ROWSUPDATED 值不正确。假设我已经发送了 10 条 xml 记录进行更新，ROWSUPDATED 值将小于 10。为什么 ROWCOUNT 变量没有给我正确的计数？我的存储过程是否无法在存在连续插入的情况下更新记录，或者它只是 ROWCOUNT 的错误值？..在同一个表中存在插入的情况下，ROWCOUNT 是获取合并查询更新的行数的最安全方法吗？

# html - 主题在第一次加载时无法正确显示图像

> ID：10821747
> 
> 赞同：1
> 
> 时间：2012-05-30T18:01:19.500
> 
> 标签：html, css, tumblr

问题仍然没有解决，我不知道为什么。然而 ; 换个主题就可以解决了。……………………………………………………………………………………………………………………………………

我对 tumblr 的主题有疑问。自第一次以来它一直没有“工作”。这并不意味着它不起作用。**它仅在我刷新页面后才有效。**

**我第一次加载页面；内容的大部分元素（图像）都没有样式；它们相互重叠，这很烦人**

这里是主题

[http://tinypaste.com/fa31b3](http://tinypaste.com/fa31b3)

如果我没记错的话；这是对图像负责。

```
 .entry img { 
{block:IndexPage}
width: {block:IfNot2Columns}240px{/block:IfNot2Columns}{block:If2Columns}500px{/block:If2Columns}; 
{/block:IndexPage}
{block:PermalinkPage}
width:500px;
{/block:PermalinkPage}
} 
```

你们能帮帮我吗。任何想法将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:23:01.733

原因是浏览器会使用以前的图像样式缓存您的样式，因此浏览器对您的图像没有实际的规则（只有以前的样式）。

我为您提供了更具可读性和灵活性的解决方案，它将毫无例外地工作：

**Tumblr 标记：**

```
<body class="
{block:IndexPage}
    index-page
    {block:IfNot2Columns}not-twocolumns{/block:IfNot2Columns}
    {block:If2Columns}twocolumns{/block:If2Columns}
{/block:IndexPage}
{block:PermalinkPage} permalink-page{/block:PermalinkPage}
"> 
```

**CSS：**

```
.index-page.not-twocolumns .entry img {
    width: 240px;
}

.index-page.twocolumns .entry img {
    width: 500px;
}

.permalink-page .entry img {
    width: 500px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:12:26.653

您是否等待足够长的时间来加载页面上的内容？

当我在过时的笔记本电脑上使用 facebook 时，同样的事情也会发生在我身上，但是一旦一切都加载完毕，它会在大约 30-40 秒内自行修复。

# python - __name__ 属性在 Python 中用于 Win32_ComputerSystem？

> ID：10821749
> 
> 赞同：1
> 
> 时间：2012-05-30T18:01:23.850
> 
> 标签：python, winapi, attributes, wmi, pywin32

我正在尝试获取 WMI win32 类的名称。但是`__name__`没有为它定义属性。

```
>> import wmi
>> machine = wmi.WMI()
>> machine.Win32_ComputerSystem.__name__ 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "<pyshell#21>", line 1, in <module>
    machine.Win32_ComputerSystem.__name__
  File "C:\Python27\lib\site-packages\wmi.py", line 796, in __getattr__
    return _wmi_object.__getattr__ (self, attribute)
  File "C:\Python27\lib\site-packages\wmi.py", line 561, in __getattr__
    return getattr (self.ole_object, attribute)
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 457, in __getattr__
    raise AttributeError(attr)
AttributeError: __name__ 
```

我以为`__name__`属性是[为所有Python函数定义的](https://stackoverflow.com/questions/251464/how-to-get-the-function-name-as-string-in-python)，所以我不知道这里有什么问题。这个函数怎么可能没有那个属性？

好的，我认为它是一种方法的原因是因为 machine.Win32_ComputerSystem() 已定义，但我想这还不足以成为一种方法。我意识到这不是一种方法。

但是，这不起作用：

```
>> machine.Win32_ComputerSystem.__class__.__name__
'_wmi_class' 
```

我希望它返回“Win32_ComputerSystem”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:08:44.520

从我可以看出查看[文档](http://timgolden.me.uk/python/wmi/tutorial.html)（特别是基于[此代码段](http://timgolden.me.uk/python/wmi/tutorial.html#determing-available-methods)），`wmi.Win32_ComputerSystem`是一个类，而不是一个方法。如果你想得到它的名字，你可以尝试：

```
machine.Win32_ComputerSystem.__class__.__name__ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:31:38.513

我找到了一种方法来获得我想要的输出，但它并不满足我。

```
repr(machine.Win32_ComputerSystem).split(':')[-1][:-1] 
```

返回：`'Win32_ComputerSystem'`

必须有一种更 Pythonic 的方式来做到这一点。

# python - 给定一个整数列表，确定 70% 的值是否在其中一个值的 20% 范围内

> ID：10821753
> 
> 赞同：2
> 
> 时间：2012-05-30T18:01:51.310
> 
> 标签：python, arrays, algorithm, list, array-algorithms

我想检查列表值是否具有某种程度的“接近性”。有没有一个好的算法来做到这一点？最pythonic方式的奖励积分。

有效的

```
[1,7,8,9]
[3,4,100,101,102,103,104,105] 
```

无效

```
[1,8,9]
[1,10]
[100,200,300,400,500] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T18:05:53.403

查找方差：[http ://en.wikipedia.org/wiki/Variance](http://en.wikipedia.org/wiki/Variance)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:21:47.227

对于小列表，这个 O(n^2) 算法就足够了：

```
def is_close(l):
    for n in l:
        c = sum([1 for x in l if x >= 0.8 *n and x <= 1.2 * n])
        if c >= 0.7 * len(l):
            return True
    return False

print is_close([1,7,8,9])
print is_close([3,4,100,101,102,103,104,105])
print is_close([1,8,9])
print is_close([1,10])
print is_close([100,200,300,400,500]) 
```

输出是：

```
True
True
False
False
False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T12:15:35.090

**这是一个简单的线性时间算法**，用于已经排序的数组`a`（如示例中所示，否则需要预先`O(n log n)`及时排序）。这个想法是构造和测试从给定位置开始的每个最大子序列`low`。

```
low = middle = high = 1
while (low <= length (a))
   advance middle to the largest i such that a[i]*0.8<=a[low]
   advance high to the largest i such that a[i]<=a[middle]*1.2
   if ((high-low+1)/length(a)>=0.7) output(true)
   low = low + 1
return (false); 
```

因为`low`,`middle`和`high`总是从`1`through增加`length(a)`，所以运行时间总是线性的`length(a)`。

如果需要匹配的子序列`a`，可以输出`a[low]...a[high]`而不是`true`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T21:25:04.033

这是一个需要`n logn`时间的算法。

```
sort the array
for i in range(len(array))
    begin = binary search an index such that array[begin] >= array[i]*0.2
    end = binary search an index such that array[end]*0.2 <= array[i]
    if (end - begin) <= len(array) * 0.7
        70% of the values are within %20 of array[i]
        i.e all elements between begin and end are within 20% of array[i] 
```

可以进行多种优化，包括更改迭代顺序。

# macports - Macport 自我更新失败

> ID：10821755
> 
> 赞同：5
> 
> 时间：2012-05-30T18:02:09.787
> 
> 标签：macports

```
ginnyweasley:~ s66$ sudo port selfupdate
Password:
--->  Updating MacPorts base sources using rsync
Error: /opt/local/bin/port: port selfupdate failed: Error synchronizing MacPorts sources: command execution failed 
```

我已经尝试重新下载 macports，但它似乎仍然无法正常工作。我也尝试过不使用 sudo，但它仍然无法正常工作。有没有人可以解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-06T00:11:15.697

我也有这个问题。甚至，像你一样，我重新下载了发行版并重新安装。

直到我阅读了手册页并尝试了'-d'标志，所以

> sudo 端口 -d 自我更新

我试过了，令人惊讶的是没有发现命令失败但成功完成。我没有看到任何端口更新，但我们看到的错误可能是在更新端口树之后发生的。

如果它不起作用，无论如何都要尝试，它至少会为你指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-15T00:13:32.553

升级到 Yosemite 后我也遇到了同样的问题，但是因为我找到了这篇文章，所以我没有重新安装 macports - 我运行了“sudo port -d selfupdate”，c 编译器出现错误，所以我更新了 Xcode，运行了“sudo port clean expat” 重新启动后，然后运行“sudo port -d selfupdate” 一切都很好 - 谢谢你！

# c++ - 基于范围的 for 循环是否对性能有益？

> ID：10821756
> 
> 赞同：43
> 
> 时间：2012-05-30T18:02:20.543
> 
> 标签：c++, performance, for-loop, foreach, c++11

在 Stack Overflow 上阅读有关 C++ 迭代器和性能的各种问题**，我开始想知道`for(auto& elem : container)`编译器是否将其“扩展”为最佳版本？（有点像`auto`，编译器会立即将其推断为正确的类型，因此永远不会慢，有时会更快）。

** 例如，你写有没有关系

```
for(iterator it = container.begin(), eit = container.end(); it != eit; ++it) 
```

或者

```
for(iterator it = container.begin(); it != container.end(); ++it) 
```

对于非失效容器？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-30T18:40:14.930

标准是你的朋友，见**[stmt.ranged]** /1

> 对于形式的基于范围的 for 语句
> 
> ```
> for ( for-range-declaration : expression ) statement 
> ```
> 
> 让 range-init 等价于用括号括起来的表达式
> 
> ```
> ( expression ) 
> ```
> 
> 和基于范围的 for 形式的声明
> 
> ```
> for ( for-range-declaration : braced-init-list ) statement 
> ```
> 
> 让 range-init 等价于花括号初始化列表。在每种情况下，基于范围的`for`语句等效于
> 
> ```
> {
>   auto && __range = range-init;
>   for ( auto __begin = begin-expr,
>              __end = end-expr;
>         __begin != __end;
>         ++__begin )
>   {
>     for-range-declaration = *__begin;
>     statement
>   }
> } 
> ```

所以是的，标准保证实现最佳形式。

对于许多容器，例如`vector`，在此迭代期间修改（插入/擦除）它们是未定义的行为。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-30T18:08:14.510

*Range-for*尽可能快，因为它缓存了结束迭代器^([ [citation provided](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2243.html#the-range-based-for-statement) ])，使用预增量并且只取消引用迭代器一次。

所以如果你倾向于写：

```
for(iterator i = cont.begin(); i != cont.end(); i++) { /**/ } 
```

那么，是的，range-for 可能会*稍微*快一些，因为它也更容易编写，没有理由不使用它（在适当的时候）。

**注意**我说它尽可能快，但它并不*比可能快*。如果您仔细编写手动循环，您可以获得完全相同的性能。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-05-30T18:14:58.910

出于好奇，我决定查看这两种方法的汇编代码：

```
int foo1(const std::vector<int>& v) {
    int res = 0;
    for (auto x : v)
        res += x;
    return res;
}

int foo2(const std::vector<int>& v) {
    int res = 0;
    for (std::vector<int>::const_iterator it = v.begin(); it != v.end(); ++it)
      res += *it;
    return res;
} 
```

两种方法的汇编代码（使用 -O3 和 gcc 4.6）完全相同（`foo2`省略代码，因为它完全相同）：

```
080486d4 <foo1(std::vector<int, std::allocator<int> > const&)>:
80486d4:       8b 44 24 04             mov    0x4(%esp),%eax
80486d8:       8b 10                   mov    (%eax),%edx
80486da:       8b 48 04                mov    0x4(%eax),%ecx
80486dd:       b8 00 00 00 00          mov    $0x0,%eax
80486e2:       39 ca                   cmp    %ecx,%edx
80486e4:       74 09                   je     80486ef <foo1(std::vector<int, std::allocator<int> > const&)+0x1b>
80486e6:       03 02                   add    (%edx),%eax
80486e8:       83 c2 04                add    $0x4,%edx
80486eb:       39 d1                   cmp    %edx,%ecx
80486ed:       75 f7                   jne    80486e6 <foo1(std::vector<int, std::allocator<int> > const&)+0x12>
80486ef:       f3 c3                   repz ret 
```

所以，是的，两种方法都是一样的。

**更新**：同样的观察适用于其他容器（或元素类型），例如`vector<string>`and `map<string, string>`。在这些情况下，在基于范围的循环中使用引用尤为重要。否则会创建一个临时代码并出现大量额外代码（在前面的示例中不需要它，因为`vector`只包含`int`值）。

对于使用`map<string, string>`的 C++ 代码片段的情况是：

```
int foo1(const std::map<std::string, std::string>& v) {
    int res = 0;
    for (const auto& x : v) {
        res += (x.first.size() + x.second.size());
    }
    return res;
}

int foo2(const std::map<std::string, std::string>& v) {
    int res = 0;
    for (auto it = v.begin(), end = v.end(); it != end; ++it) {
        res += (it->first.size() + it->second.size());
    }
    return res;
} 
```

汇编代码（对于这两种情况）是：

```
8048d70:       56                      push   %esi
8048d71:       53                      push   %ebx
8048d72:       31 db                   xor    %ebx,%ebx
8048d74:       83 ec 14                sub    $0x14,%esp
8048d77:       8b 74 24 20             mov    0x20(%esp),%esi
8048d7b:       8b 46 0c                mov    0xc(%esi),%eax
8048d7e:       83 c6 04                add    $0x4,%esi
8048d81:       39 f0                   cmp    %esi,%eax
8048d83:       74 1b                   je     8048da0 
8048d85:       8d 76 00                lea    0x0(%esi),%esi
8048d88:       8b 50 10                mov    0x10(%eax),%edx
8048d8b:       03 5a f4                add    -0xc(%edx),%ebx
8048d8e:       8b 50 14                mov    0x14(%eax),%edx
8048d91:       03 5a f4                add    -0xc(%edx),%ebx
8048d94:       89 04 24                mov    %eax,(%esp)
8048d97:       e8 f4 fb ff ff          call   8048990 <std::_Rb_tree_increment(std::_Rb_tree_node_base const*)@plt>
8048d9c:       39 c6                   cmp    %eax,%esi
8048d9e:       75 e8                   jne    8048d88 
8048da0:       83 c4 14                add    $0x14,%esp
8048da3:       89 d8                   mov    %ebx,%eax
8048da5:       5b                      pop    %ebx
8048da6:       5e                      pop    %esi
8048da7:       c3                      ret 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-30T18:05:06.143

`for`不，它与带有迭代器的旧循环相同。毕竟，基于范围的`for`迭代器在内部工作。编译器只是为两者生成等效的代码。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-30T22:13:34.870

在极少数情况下，它可能更快。由于您无法命名迭代器，因此优化器可以更轻松地证明您的循环无法修改迭代器。这会影响例如循环展开优化。

# php - PHP 数组删除匹配值

> ID：10821757
> 
> 赞同：0
> 
> 时间：2012-05-30T18:02:29.000
> 
> 标签：php

到目前为止，我在 PHP 中构建了这个名为 removeAllValuesMatching 的函数，但我似乎无法让它工作。我传入了两个参数 $arr 和 $value。不知道为什么会这样。任何帮助将不胜感激。这是我到目前为止所拥有的：

```
<?php 
$arr = array(
   'a' => "one",
   'b' => "two",
   'c' => "three",
   'd' => "two",
   'e' => "four",
   'f' => "five",
   'g' => "three",
   'h' => "two"
);
function removeAllValuesMatching($arr, $value){
 foreach ($arr as $key => $value){
 if ($arr[$key] == $value){
 unset($arr[$key]);
 }
 }
 return $arr = array_values($arr);
 }

print_r(removeAllValuesMatching($arr, "two"));

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:05:45.953

你在`$value`这里覆盖：

```
foreach ($arr as $key => $value){ 
```

只需重命名它：

```
foreach ($arr as $key => $val) {
    if ($val == $value) { 
```

* * *

但是，从数组中删除元素的更好方法是：

```
function removeAllValuesMatching(array $arr, $value) {
    $keys = array_keys($arr, $value);
    foreach ($keys as $key) {
        unset($arr[$key]);
    }
    return $arr;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:09:42.753

这是我的完整版本，没有变量冲突和缩进：这不是一个选项，您应该始终正确缩进

```
<?php 
$arr = array(
    'a' => "one",
    'b' => "two",
    'c' => "three",
    'd' => "two",
    'e' => "four",
    'f' => "five",
    'g' => "three",
    'h' => "two"
);

function removeAllValuesMatching($arr, $arg){
    foreach ($arr as $key => $value){
        if ($arr[$key] == $arg){
            unset($arr[$key]);
        }
    }
    return $arr = array_values($arr);
}

print_r(removeAllValuesMatching($arr, "two"));

?> 
```

# objective-c - 如何在选项卡栏中卸载视图控制器？

> ID：10821758
> 
> 赞同：1
> 
> 时间：2012-05-30T18:02:29.300
> 
> 标签：objective-c, uiviewcontroller, uitabbarcontroller

我有一个带有两个视图的标签栏控制器（底部有两个按钮以匹配）。当我在第二个视图中并按下第一个按钮时，我不想简单地隐藏第二个视图，而是完全卸载它，直到再次访问它。

我应该如何以及在何处（从视图更改过程的哪一端——在标签栏的 firstButtonPressed 方法中，在第一个视图的 ViewWillAppear 方法中，等等）这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:17:30.347

这是为了节省内存，还是出于用户体验的原因？如果是第一种情况，并且您正在取消 viewDidUnload 上的非弱 IBOutlet 属性，那么您就可以开始了。每当操作系统决定它需要更多内存时，它就会开始转储不在屏幕上的视图。

如果是第二种情况，请在要丢弃的类的 viewDidDisappear 方法中执行您需要的操作（即根据需要从超级视图中删除和 nil ）。

# android - 使用 aChartEngine Line Graph 创建两个垂直线光标

> ID：10821759
> 
> 赞同：1
> 
> 时间：2012-05-30T18:02:36.393
> 
> 标签：android, graph, achartengine, linechart

所以基本上我想在我们用垂直线描绘的折线图上创建两个光标。光标 A 和光标 B。我们需要光标沿着图形在 X 轴上的点进行跟踪（将光标与图形不同的垂直线着色。例如图形是灰色/黑色，光标是红色和蓝色的。）

我已经搜索了几天，我似乎找不到任何关于光标或沿着 aChartEngine 中图形的绘制点的信息。

我已经到了我正在辩论使用 aChartEngine 或切换到另一个具有更多功能的库的地步。

任何建议都将不胜感激，我喜欢 aChartEngine 并且我们的图表看起来很棒，我只是迷失在我们的折线图上创建光标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:51:16.323

你不能用 AChartEngine 做到这一点，因为它开箱即用。但是，您可以添加一个新系列并向其中添加点，例如它们创建某些光标的视觉效果。

# linux - 使用 GDB 调试 netlink 通信

> ID：10821762
> 
> 赞同：2
> 
> 时间：2012-05-30T18:02:57.177
> 
> 标签：linux, timeout, gdb, netlink

我有一个使用 netlink 套接字与内核模块通信的多线程应用程序。用户模式应用程序中的一个线程用作服务器，内核模块用作客户端。内核代码大致如下：

```
timeout = 3500;
netlink_unicast();
wait:
__set_current_state(TASK_INTERRUPTIBLE);
timeout = schedule_timeout(timeout);
__set_current_state(TASK_RUNNING);
if (!timeout)
{
    printk(KERN_ERR "No response received\n");
    return -1;
}
if (message_status != UPDATED)
{
   printk(KERN_ERR "Somebody woke us up before we got a reply. Time left %d\n", timeout);
   __set_current_state(TASK_INTERRUPTIBLE);
   goto wait;
} 
```

当用户模式应用程序回复此消息时，会在 netlink 回调中更新**message_status**变量。所以基本上这个想法是发送一条消息，然后在最大超时时间等待回复。

现在，使用 gdb，如果我在用户模式下由 netlink 服务器线程调用的任何函数中添加断点，则断点永远不会被命中，并且内核日志中充斥着类似的消息

> 在我们得到答复之前有人叫醒了我们。剩余时间 3499
> 
> 在我们得到答复之前有人叫醒了我们。剩余时间 3499
> 
> 在我们得到答复之前有人叫醒了我们。剩余时间 3499
> 
> 在我们得到答复之前有人叫醒了我们。剩余时间 3499
> 
> ..
> 
> ..
> 
> 在我们得到答复之前有人叫醒了我们。剩余时间 3498

直到我终于得到

> 未收到回复

是什么导致内核线程从超时中唤醒，我应该如何调试用户模式代码？

PS：我在 RHEL 6.0 上使用 2.6.32-71.el6.x86_64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-17T22:12:59.503

使用 gdb。在 gdb 中，您可以使用“信息线程”来查看线程列表。您可以使用命令“thread”跳转到特定线程，其中 n 是所需的线程。您可以使用“break : thread”设置要中断的特定线程。请参阅手册的这一部分以控制与线程停止相关的程序行为。IE。您可以指定在仅处理一个线程时停止所有线程。 [https://sourceware.org/gdb/onlinedocs/gdb/Thread-Stops.html#Thread-Stops](https://sourceware.org/gdb/onlinedocs/gdb/Thread-Stops.html#Thread-Stops)

# jquery - 数组中的jQuery对象？

> ID：10821763
> 
> 赞同：0
> 
> 时间：2012-05-30T18:03:01.673
> 
> 标签：jquery, arrays, each

我正在尝试编写一个 each 函数来查看每个列表项，然后在该项目中查看每个跨度，将一些 css 唯一地应用于每个跨度..

当我开始深入研究时，我迷失了方向，无法真正弄清楚如何正确获取每个列表项中每个跨度的唯一值..

[http://jsfiddle.net/anthonybruno/9sKNZ/2/](http://jsfiddle.net/anthonybruno/9sKNZ/2/)

有任何想法吗？

**编辑**- 我意识到这似乎是类名的工作，但我已经简化了我试图仅用于此示例的 css 类型。稍后我将传递一些更复杂的 css，这些 css 将依赖于其他值，例如 scrollTop 和 viewportHeight。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:13:58.983

如果您更改项目结构，它会更容易..见下文，

```
var items = [['font-weight: bold',
    'text-decoration: underline',
    'text-transform: uppercase'],
    ['color: purple', 'color: yellow'],
    ['color: pink']];

$(document).ready(function() {
    $('li').each(function(liIdx) { // For each list item
        var curCss = items[liIdx];
        $(this).find('span').each(function(idx) {
            var cssStyle = curCss[idx].split(':');
            $(this).css(cssStyle[0], cssStyle[1]);
        }); // Each span should get unique css value            
    });    
}); 
```

[**演示**](http://jsfiddle.net/9sKNZ/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:14:26.293

首先，如果您更改`items`以下内容会更好：

```
var items = [
    [
    'font-weight: bold',
     'text-decoration: underline',
     'text-transform: uppercase',
    ],
    [
    'color: purple',
    'color: yellow',
    ], 
    [
    'color: pink'
    ]
  ];

$(document).ready(function() {
    $('li').each(function(liIndex, li) {
        $('span', this).each(function(index, el) {
            var curCSS = items[liIndex][index].split(':');
            $(this).css(curCSS[0], curCSS[1])
        });
    });
}); 
```

**[演示 1](http://jsfiddle.net/thecodeparadox/9sKNZ/4/)**

如果您不想更改`items`结构，请尝试以下操作：

```
var items = [
    {
    spanOne: 'font-weight: bold',
    spanTwo: 'text-decoration: underline',
    spanThree: 'text-transform: uppercase'},
{
    spanOne: 'color: purple',
    spanTwo: 'color: yellow'},
{
    spanOne: 'color: pink'}
];

$(document).ready(function() {
    var ref = ['spanOne', 'spanTwo', 'spanThree']; // an array to make reference
    $('li').each(function(liIndex, li) {
        $('span', this).each(function(index, span) {
            var curCSS = items[liIndex][ref[index]].split(':');
            $(this).css(curCSS[0], curCSS[1])
        });
    });
}); 
```

**[演示 2](http://jsfiddle.net/thecodeparadox/9sKNZ/7/)**

# php - 表单外的复选框

> ID：10821764
> 
> 赞同：5
> 
> 时间：2012-05-30T18:03:04.680
> 
> 标签：php, javascript

由于设计要求，我需要在表单之外放置几个复选框。是否仍然可以在表单的提交操作中包含这些值？也许使用javascript或我没有想到的其他方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T21:55:29.600

如果您使用 HTML5，则有一个`form`属性。请参见以下示例：

```
<p>
  <input type="email" form="my_form" />
</p>
<form id="my_form">
  <input type="submit" name="Send">
</form> 
```

这应该适用于所有现代浏览器。不需要javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:06:59.813

是的，这可以使用 Javascript 来完成，但不能仅使用 PHP。

您必须根据需要放置表单元素，然后在按下触发器（可能是提交按钮）时使用 Javascript 收集输入。然后，您可以使用 Ajax 将表单提交给 PHP。

将元素放在表单标签之外肯定会让事情变得更加棘手（您将无法使用该`serialize()`功能）。所以如果你能避免它，你的任务就会简单得多。

# http - 对多个 Web 服务器的相同 http 请求

> ID：10821766
> 
> 赞同：3
> 
> 时间：2012-05-30T18:03:23.653
> 
> 标签：http

有什么方法可以将相同的 http 请求转发到多个 Web 服务器？

例如。我有 server1，它有一个在 80 端口上运行的 Web 应用程序。相同的应用程序在 server2 上的同一端口上运行，即 80。

是否有可能在一段时间后在两台服务器上获得相同的请求？

请帮助。非常感谢提前

# asp.net - 从 ASP.NET mvc3 中的模型重定向

> ID：10821768
> 
> 赞同：0
> 
> 时间：2012-05-30T18:03:35.630
> 
> 标签：asp.net, asp.net-mvc-3, redirect, model

抱歉，如果这是一个愚蠢的问题，但我只是想知道当asp.net mvc3**中的模型发生错误时重定向到错误页面的最佳方法。**

简而言之，我有一个所有控制器都继承的 applicationController，它在“OnActionExecuting”函数中检查用户是否正在使用 Internet Explorer。

如果是，我在我的错误模型中调用一个函数（我有这个函数是因为我想在数据库中记录错误），然后它应该将用户重定向到一个错误页面，告诉下载 chrome。

**应用控制器**

```
public class ApplicationController : Controller
{
    public string BASE_URL { get; set; }

    public ApplicationController() {}

    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {

        BASE_URL = Url.Content("~/");

        ErrorModel err = new ErrorModel();

        String userAgent;
        userAgent = Request.UserAgent;
        if (userAgent.IndexOf("MSIE") > -1) {
            err.cause("browser", "redirect", "some other info");
        }        
    }
} 
```

**错误模型**

```
public void cause(string _errCode, string strAction, string _otherInfo = "") {

        this.error_code = _errCode;
        this.error_otherInfo = _otherInfo;

        try {
            this.error_message = dctErrors[_errCode.ToLower()];
        } catch (KeyNotFoundException) {
            this.error_message = "Message not found.";
        }

        StackTrace sT = new StackTrace(true);
        String[] filePathParts = sT.GetFrame(1).GetFileName().Split('\\');

        this.error_filename = filePathParts.Last();
        this.error_lineNo = sT.GetFrame(1).GetFileLineNumber();

        this.error_function = sT.GetFrame(1).GetMethod().ReflectedType.FullName;

        this.error_date = DateTime.Now;
        this.error_uid = 0; //temporary

        if (strAction == "redirect") {
        //this is what I would like to do - but the "response" object does not 
        //exist in the context of the model
            Response.Redirect("Error/" + _errCode);                
        } else if (strAction == "inpage") {

        } else {
            //do nothing
        }
    } 
```

我知道在这个特定的例子中，模型中实际上并没有发生错误，所以我可以从控制器重定向。但我希望能够调用一个函数，该函数将记录并在可能的情况下重定向，因为这对于可能发生的许多其他错误是必要的。

我可能会以完全错误的方式解决这个问题，在这种情况下，我当然愿意改变。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:13:39.557

我个人使用 MVC 框架提供的全局[异常过滤器](http://msdn.microsoft.com/en-us/library/system.web.mvc.iexceptionfilter%28v=vs.98%29.aspx)来写入错误日志。我还通过网络配置使用默认重定向到错误视图：

```
<customErrors mode="RemoteOnly" defaultRedirect="~/Error/"> 
```

当然，此模型可能存在缺点，但它涵盖了我迄今为止遇到的大多数异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:14:07.927

您可以访问来自 HttpContext 的响应。

```
HttpContext.Current.Response 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:21:20.240

它非常简单，

您需要将结果（ActionResult）分配给 filterContext.Result

```
filterContext.Result = View("ErrorView", errorModel); 
```

或重定向

```
filterContext.Result = Redirect(url); 
```

或者

```
filterContext.Result = RedirectToAction("actionname"); 
```

# jquery - 在jQuery中删除所有行时如何克隆一行？

> ID：10821772
> 
> 赞同：1
> 
> 时间：2012-05-30T18:03:50.297
> 
> 标签：jquery

这是我正在尝试运行的简单脚本。

[http://jsfiddle.net/T8q5p/5/](http://jsfiddle.net/T8q5p/5/)

我想要做的是为每个添加按钮添加一个新的输入框。我在每个表单上都附加了一个删除按钮。当我单击删除时，行会根据需要消失。

但是，当我删除所有这些时，我无法再添加任何输入字段。我认为这是因为所有列表项都已删除，因此没有什么可克隆的。

如果有 if 语句，说如果这是剩余的文本，只需清空值

```
 $(this).parent('li').val(""); 
```

?

不知道怎么插进去。。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:19:56.110

您可以将一个参考项目保存在一个变量中，然后从中克隆。此外，ID 必须是唯一的，因此将删除 id 更改为类。

[http://jsfiddle.net/T8q5p/6/](http://jsfiddle.net/T8q5p/6/)

```
var item = $("#tasks ul li:eq(0)").clone(true, true); // need to clone for new add
$('#add').click(function() {
    var taskItem = item.clone(true,true);
    $('#tasks ul').append(taskItem);
    taskItem.find(':input:text').val("");
    return false;
});
$('body').on('click','.delete',function() {
    $(this).parent('li').remove();
    return false;
});​ 
```

* * *

或者，您可以完全阻止删除最后一项：

```
if(!$(this).parent('li').is(':only-child')){
    $(this).parent('li').remove();
} 
```

# c# - UIAutomation（核心）受到多个 User32.FindWindow 调用的负面影响

> ID：10821773
> 
> 赞同：0
> 
> 时间：2012-05-30T18:03:51.417
> 
> 标签：c#, pinvoke, ui-automation

我越来越接近解决这个问题并主要发布以分享我的结果。

我所看到的是对 User32.FindWindow 的几次调用（在同一个窗口上）将搞砸对 UI 自动化核心方法的调用，例如 FindAllBuildCache()。

有谁知道是否有适当的方法来处理从 PInvoke FindWindow 调用中返回的句柄？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:31:03.480

布伦丹麦克利斯，

感谢您指出了这一点。这是很好的信息。

现在我 99% 确定我遇到的问题是由于同时使用 UIAutomationCore 和 AutomationClient。我使用的核心是通过 tlbimp 构建步骤从核心 DLL 创建托管程序集。我使用 Core 获得了更好的性能，并且还获得了一个名为 IUIAutomationLegacyIAccessiblePattern 的模式，它使我能够从 Infragistics Ultragrid 中获取单元格内容。我昨天注意到，即使我不使用 AutomationClient，我的测试在加载程序集后就开始遇到问题：

当我使用 AutomationClient 导入创建类的实例时，我在输出窗口中看到了这一点：

```
Loaded UIAutomationClientsideProviders.dll
Loaded Accessibility.dll 
```

问题可能是 Accessibility.dll，因为我使用的是 IUIAutomationLegacyIAccessiblePattern，但无论如何，该 DLL 都作为 UIAutomationClientsideProviders.dll 的依赖项加载，所以......

如果解决方案不正确，我会更新我的帖子（在我能 100% 确定之前，我有大量的返工要做）。

* * *

稍后添加：

问题肯定是使用 UI 自动化核心以及托管客户端 UI 自动化的东西。多么痛苦！

# theory - 在没有蒙特卡洛/详尽枚举的情况下获得德州扑克的获胜百分比

> ID：10821776
> 
> 赞同：4
> 
> 时间：2012-05-30T18:04:07.160
> 
> 标签：theory, poker

抱歉，我刚刚开始这个项目，没有任何想法或代码，我问的更多是理论问题而不是编程问题。

似乎每个谷歌搜索都提供相同的响应，并且很难找到这个问题的答案：

有没有一种方法可以在不使用蒙特卡洛/详尽枚举方法的情况下计算德州扑克的获胜百分比（就像他们在黑暗或其他电视扑克赛事之后的扑克中所做的那样）。假设所有牌面朝上，并且我们知道牌组中的每张牌。

其他论坛上的每个回复似乎都是“使用 pokerstove”或类似的东西，我正在寻找编写代码的理论。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:25:56.073

> 有没有一种方法可以在不使用蒙特卡洛/穷举枚举方法的情况下计算德州扑克的获胜百分比（就像他们在黑暗或其他电视扑克赛事之后的扑克中所做的那样）。

在特定情况下，可能...

您可以在翻牌前对两名玩家进行单挑对决时使用完美的翻牌前查找表：请注意，“典型的”169 vs 169 近似值不够好（比如 Jh Th vs 9h 8h 并不是真正的“JTs vs 98s”：我意思是，这将是一个相当粗略的近似）。

除此之外，如果你有*很多*内存并且你可以忍受巨大的缓存未命中，从技术上讲，你*可以*预先计算巨大的查找表（比如在服务器端）并为其他情况进行查找（例如，对于每可能的三名玩家全押比赛） preflop），但你真的需要*很多*内存:)

请注意，翻牌和转牌的“完整枚举”不是问题：翻牌时只有 2 张牌要来，所以通常只有 C(45,2) [两名玩家在翻牌全押，我们知道 2* 2 张底牌 + 3 张公共牌——因此留下 990 种可能性] 或 C(43,2) [三名玩家在翻牌时全压，我们知道 3*2 底牌 + 3 张公共牌]。

因此，实际的评估者不会使用一种方法，而是使用几种方法。例如：

*   两位玩家翻牌前全压的查找表（最快）
*   任何数量的玩家在翻牌或转牌全押的完整枚举，因为它*很小*（最多 990 种可能性）——非常快
*   三名或更多玩家翻牌前全压的蒙特卡洛或完整枚举——慢得令人难以置信

有趣的是，在最典型的情况下，您会非常非常快地得到结果：大多数实际全押涉及两名玩家，而不是三名或更多。

因此，您要么在“翻牌前 1 对 1”查找表中查找**，要么**进行完整的 C(45,2) 或 C(46,1) 完整枚举（在这两种情况下，速度都非常快）。

实际上只有“三名玩家或更多玩家翻牌前全压”的情况才需要时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T02:15:53.217

The answer is no.

There is no closed form computation that you can do to compute poker equities. Using combinatorics, you can identify and solve many subproblems, which speeds up computation.

For example, if you are considering all five card hands, there are 52 choose 5 = 2,598,960 different hands. But knowing that suits are equivalent and using combinatorial methods (either analytic or computational), you can reduce the space of all hands to 134,459 classes each weighted according to the number of different hands in each equivalent class.

There are also various ways of using exhaustive evaluations tailored to your application. If you need to perform some subset of evaluations repeatedly, you can use caches or precomputed lookup tables targeted to your specific needs.

# sql - sqlite 性能问题：每个表一个索引有点痛苦

> ID：10821780
> 
> 赞同：2
> 
> 时间：2012-05-30T18:04:35.550
> 
> 标签：sql, performance, sqlite, indexing

所以这是我的模式（给予或接受）：

```
cmds.Add(@"CREATE TABLE [Services] ([Id] INTEGER PRIMARY KEY, [AssetId] INTEGER NULL, [Name] TEXT NOT NULL)");
cmds.Add(@"CREATE INDEX [IX_Services_AssetId] ON [Services] ([AssetId])");
cmds.Add(@"CREATE INDEX [IX_Services_Name] ON [Services] ([Name])");

cmds.Add(@"CREATE TABLE [Telemetry] ([Id] INTEGER PRIMARY KEY, [ServiceId] INTEGER NULL, [Name] TEXT NOT NULL)");
cmds.Add(@"CREATE INDEX [IX_Telemetry_ServiceId] ON [Telemetry] ([ServiceId])");
cmds.Add(@"CREATE INDEX [IX_Telemetry_Name] ON [Telemetry] ([Name])");

cmds.Add(@"CREATE TABLE [Events] ([Id] INTEGER PRIMARY KEY, [TelemetryId] INTEGER NOT NULL, [TimestampTicks] INTEGER NOT NULL, [Value] TEXT NOT NULL)");
cmds.Add(@"CREATE INDEX [IX_Events_TelemetryId] ON [Events] ([TelemetryId])");
cmds.Add(@"CREATE INDEX [IX_Events_TimestampTicks] ON [Events] ([TimestampTicks])"); 
```

这是我对他们奇怪的计时器结果的查询：

```
sqlite> SELECT MIN(e.TimestampTicks) FROM Events e INNER JOIN Telemetry ss ON ss.ID = e.TelemetryID INNER JOIN Services s ON s.ID = ss.ServiceID WHERE s.AssetID = 1; 
```

634678974004420000 CPU时间：用户0.296402 sys 0.374402

```
sqlite> SELECT MIN(e.TimestampTicks) FROM Events e INNER JOIN Telemetry ss ON ss.ID = e.TelemetryID INNER JOIN Services s ON s.ID = ss.ServiceID WHERE s.AssetID = 2; 
```

634691940264680000 CPU时间：用户0.062400 sys 0.124801

```
sqlite> SELECT MIN(e.TimestampTicks) FROM Events e INNER JOIN Telemetry ss ON ss.ID = +e.TelemetryID INNER JOIN Services s ON s.ID = ss.ServiceID WHERE s.AssetID = 1; 
```

634678974004420000 CPU时间：用户0.000000 sys 0.000000

```
sqlite> SELECT MIN(e.TimestampTicks) FROM Events e INNER JOIN Telemetry ss ON ss.ID = +e.TelemetryID INNER JOIN Services s ON s.ID = ss.ServiceID WHERE s.AssetID = 2; 
```

634691940264680000 CPU时间：用户0.265202 sys 0.078001

现在我可以理解为什么添加“+”可能会更改时间，但为什么它与 AssetId 更改如此不一致？我应该为这些 MIN 查询创建其他索引吗？事件表中有 900000 行。

查询计划（首先使用“+”）：

```
0|0|0|SEARCH TABLE Events AS e USING INDEX IX_Events_TimestampTicks (~1 rows)
0|1|1|SEARCH TABLE Telemetry AS ss USING INTEGER PRIMARY KEY (rowid=?) (~1 rows)
0|2|2|SEARCH TABLE Services AS s USING INTEGER PRIMARY KEY (rowid=?) (~1 rows)

0|0|2|SEARCH TABLE Services AS s USING COVERING INDEX IX_Services_AssetId (AssetId=?) (~1 rows)
0|1|1|SEARCH TABLE Telemetry AS ss USING COVERING INDEX IX_Telemetry_ServiceId (ServiceId=?) (~1 rows)
0|2|0|SEARCH TABLE Events AS e USING INDEX IX_Events_TelemetryId (TelemetryId=?) (~1 rows) 
```

编辑：总而言之，鉴于上面的表，如果这些是唯一要执行的查询，您将创建哪些索引：

```
SELECT MIN/MAX(e.TimestampTicks) FROM Events e INNER JOIN Telemetry t ON t.ID = e.TelemetryID INNER JOIN Services s ON s.ID = t.ServiceID WHERE s.AssetID = @AssetId;

SELECT e1.* FROM Events e1 INNER JOIN Telemetry t1 ON t1.Id = e1.TelemetryId INNER JOIN Services s1 ON s1.Id = t1.ServiceId WHERE t1.Name = @TelemetryName AND s1.Name = @ServiceName;

SELECT * FROM Events e INNER JOIN Telemetry t ON t.Id = e.TelemetryId INNER JOIN Services s ON s.Id = t.ServiceId WHERE s.AssetId = @AssetId AND e.TimestampTicks >= @StartTimeTicks ORDER BY e.TimestampTicks LIMIT 1000;

SELECT e.Id, e.TelemetryId, e.TimestampTicks, e.Value FROM (
                SELECT e2.Id AS [Id], MAX(e2.TimestampTicks) as [TimestampTicks]
                                FROM Events e2 INNER JOIN Telemetry t ON t.Id = e2.TelemetryId INNER JOIN Services s ON s.Id = t.ServiceId
                                WHERE s.AssetId = @AssetId AND e2.TimestampTicks <= @StartTimeTicks 
                                GROUP BY e2.TelemetryId) AS grp
INNER JOIN Events e ON grp.Id = e.Id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:46:27.407

**布兰农，**

**关于 AssetID 更改的时间差异：** 也许您已经尝试过，但是您是否连续多次运行每个查询？您的操作系统和 sqlite 的内存缓存通常会比会话中的第一次运行更快地进行第二次查询。我会连续四次运行给定的查询，看看第 2-4 次运行的时间是否更一致。

**关于“+”的使用** （对于那些可能不知道的人，在 SELECT 中以“+”开头的字段给 sqlite 一个提示，不要在查询中使用该字段的索引。如果 sqlite 已优化，可能会导致您的查询丢失结果仅将数据保存在该索引中的存储。怀疑已弃用。）您是否运行了 ANALYZE 命令？在做出决策时，它对 sqlite 优化器有很大帮助。
[http://sqlite.org/lang_analyze.html](http://sqlite.org/lang_analyze.html) 一旦你的模式稳定并且你的表被填充，你可能只需要运行一次——不需要每天都运行它。

**INDEXED BY** INDEXED BY 是作者不鼓励在典型使用中使用的功能，但您可能会发现它对您的评估很有帮助。 [http://www.sqlite.org/lang_indexedby.html](http://www.sqlite.org/lang_indexedby.html)

我很想知道你发现了什么，唐纳德·格里格斯，哥伦比亚 SC 美国

# php - 创建循环以调用两个数组中的每个值

> ID：10821782
> 
> 赞同：0
> 
> 时间：2012-05-30T18:04:41.197
> 
> 标签：php, arrays, forms, loops, dynamic

我在创建动态表单时遇到问题，这是我的数组

```
$myThemeConfig = array (
'slid_img' => 
  array (
'img_1' => 'im1.jpg',
'img_2' => 'im2.jpg',
'img_3' => 'im3.jpg',
'img_4' => 'im4.jpg',
'img_5' => 'im5.jpg',
'img_6' => 'im6.jpg',
'img_7' => NULL,
'img_8' => NULL,
'img_9' => NULL,
'img_10' => NULL,
 ),
'slid_til' => 
array (
'title_1' => 'title1 is your title 1',
'title_2' => 'title2 is your title 2',,
'title_3' => 'title3 is your title 3',
'title_4' => 'title4 is your title 4',
'title_5' => 'title5 is your title 5',
'title_6' => 'title6 is your title 6',
'title_7' => NULL,
'title_8' => NULL,
'title_9' => NULL,
'title_10' => NULL,
 ); 
```

我想在 html 中显示

```
 <tbody id="copyf">
<tr>
<td>Slider Image 1</td>
<td><div><input type="text" value="im1.jpg" name="img_1"></div></td></tr>
<tr>
<td>Slider Title 1></td><td><div><textarea name="title_1">title1 is your title 1</textarea></div></td></tr></tbody>

   <tbody id="copyf">
   <tr>
   <td>Slider Image 2</td>
   <td><div><input type="text" value="im2.jpg" name="img_2"></div></td></tr>
<tr>
<td>Slider Title 2 ></td><td><div><textarea name="title_2">title2 is your title 2</textarea></div></td></tr></tbody>

 <tbody id="copyf">
<tr>
<td>Slider Image 3</td>
<td><div><input type="text" value="im3.jpg" name="img_3"></div></td></tr>
<tr>
<td>Slider Title 3 ></td><td><div><textarea name="title_3">title3 is your title 3</textarea></div></td></tr></tbody> 
```

等等..

我尝试使用 foreach 循环，但它只循环一个数组，

这是我工作的代码。

[http://pastebin.com/w5jz0pGg](http://pastebin.com/w5jz0pGg)

它几乎让我绝望，因为我不是专家 ini php 代码..

拜托..拜托拜托.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:08:36.797

```
<?php
$c = count ($myThemeConfig ['slid_img']);
for ($i=1; $i<=$c; $i++) : ?>
    <tbody id="copyf">
        <tr>
            <td>
                Slider Image <?php echo $i; ?>
            </td>
            <td>
                <div>
                    <input type="text" value="<?php echo $myThemeConfig['slid_img'] ['img_' . $i]; ?>" name="img_<?php echo $i; ?>" />
                </div>
            </td>
        </tr>
        <tr>
            <td>
                Slider Title <?php echo $i; ?> >
            </td>
            <td>
                <div>
                    <textarea name="title_<?php echo $i; ?>"><?php echo $myThemeConfig['slid_til'] ['title_' . $i]; ?></textarea>
                </div>
            </td>
        </tr>
    </tbody>
<?php endfor; ?> 
```

# javascript - jquery 文件在域外不起作用（crossdomain.xml）

> ID：10821790
> 
> 赞同：1
> 
> 时间：2012-05-30T18:05:14.743
> 
> 标签：javascript, jquery, restriction, crossdomain.xml

我已经阅读了这里发布的许多关于 jquery 和跨域实现的问题。我要问的问题我认为是非法的，但是...

背景：我从 templatemonster “下载”（真的撕掉了）一个网页模板。此模板不包含任何 Flash，仅包含 JS、CSS、HTML。我下载了所有文件并将它们放在我的 apache 网络服务器中，但我得到的只是谷歌页面。

我开始查看 html、css 和 js 文件，但找不到任何东西（所有 js 显然都被缩小了）。

我决定尝试将所有 js 文件替换为“原始”文件，并从 jquery 开始。令我惊讶的是，替换 jquery JS 文件使翻录的网站正常工作。所以，我的问题是...

向 jquery.js 添加了哪些代码来限制其执行/加载？我可以用任何 JS 文件执行此操作吗？可以在本地（本地主机）应用这种类型的限制吗？我真的很感激任何关于如何实现这一点的建议或指示？

非常感谢！

顺便说一句，我不打算将模板用于任何商业或其他目的。我只是撕掉了它，因为它在不使用 Flash 的动画方面让我大吃一惊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:23:30.723

第一：`crossdomain.xml`只对FlashPlayer重要。

第二：您下载的 jQuery 文件可能不是您从 jQuery 网站获得的文件。在 JavaScript 中添加对当前域的检查很容易。如果域不匹配，JavaScript 会改变当前窗口的位置，这很容易（`window.location`）

# php - 正则表达式 Preg_replace

> ID：10821792
> 
> 赞同：0
> 
> 时间：2012-05-30T18:05:17.817
> 
> 标签：php, regex, preg-replace, bbcode

我正在尝试做一个 preg_replace 来转换来 bbcode。基本上，这

```
[QUOTE=ksiva]blahblah blah[/QUOTE] 
```

需要看起来像这样

```
<div class=quote-msg"><div class="quote-author"><em>ksiva</em></div>blahblah blah</div> 
```

我尝试了这个 preg 替换，但它不起作用。我究竟做错了什么？

```
$pattern = '#\[QUOTE=([a-zA-Z]*|\#?[0-9a-fA-F]{6})](.*?)\[/QUOTE\]#s';

$replace = '<div class="quote-msg"><div class="quote-author><em>$1</em></div>$2</div>';
$text = PREG_REPLACE($pattern, $replace, $text); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:46:46.080

弹出这段代码，我想这就是你要找的。

```
$pattern = '/\[QUOTE\=([^]]*)]([^\[]*)\[\/QUOTE]/';
$text = '[QUOTE=ksiva]blahblah blah[/QUOTE]';
$replace = "<div class=\"quote-msg\"><div class=\"quote-author\"><em>$1</em></div>$2</div>";
$text = PREG_REPLACE($pattern, $replace, $text); 
```

# ruby-on-rails - 使用 Ruby on Rails 的日期和时间字段

> ID：10821796
> 
> 赞同：0
> 
> 时间：2012-05-30T18:05:28.987
> 
> 标签：ruby-on-rails, ruby

我是 Ruby 和 Rails 的新手。我有一个要求，我必须将星期几和时间存储在数据库中。

我能否获得有关如何实施上述要求的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:30:12.683

没有更多的使用细节，我会保持简单。

*   将星期几存储为整数 where `0 = Sunday`.
*   将时间存储为字符串 where `"13:45" = 1:45pm`。

# c# - C# 应用程序的附加组件

> ID：10821797
> 
> 赞同：2
> 
> 时间：2012-05-30T18:05:31.343
> 
> 标签：c#, plugins, assemblies

我有一个 C# 程序，我想让它能够加载插件。插件就是这样的：您将控件或表单传递给它，它会对它们进行一些更改。

无论如何都有dll插件并在运行时动态加载它们并传递控件？如果没有任何想法？我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:07:33.433

查看[MEF](http://mef.codeplex.com/)以加载和导入程序集和控件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T18:07:25.260

查看[管理可扩展性框架](http://msdn.microsoft.com/en-us/library/dd460648.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T18:08:37.687

是的，这是可能的，它的工作原理类似于其他编程语言：加载库并调用方法来获取名称和内容。[在这个问题](https://stackoverflow.com/questions/1070787/writing-c-sharp-plugin-system)中可以找到一种可能的解决方案。

# joomla - 如何显示所有用户组的所有产品价格？

> ID：10821798
> 
> 赞同：0
> 
> 时间：2012-05-30T18:05:31.870
> 
> 标签：joomla, virtuemart

我定义了 3 个用户组：默认/零售/批发。我有为每个组定义价格的产品。

是否可以在产品页面上显示所有用户组的所有价格？

我已经检查`get_defined_vars()`过，`flypage.tpl.php`但没有关于用户组和价格的信息。当前身份验证用户的用户组的唯一价格...

# ruby-on-rails - 从迭代rails 3中获取特定项目

> ID：10821799
> 
> 赞同：0
> 
> 时间：2012-05-30T18:05:36.957
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试找到一种方法来提取分配给课程的所有笔记，但仅在必要时。我有一个显示页面，其中显示了测验的所有笔记。

课程 show.html.erb

```
<%= @course.name %>
<% @quiz.notes.each do |note| %>
    <%= link_to note.title, quiz_note_path(@quiz, note)  %><br/>
<% end %> 
```

上面的代码可以找到，除了它提取所有笔记而不是分配给该课程的笔记。如果笔记和课程名称相同，我如何告诉 Rails 只拉笔记？

**更新！**

在注释 new.html.erb 中，我正在使用 collection_select

```
 <%= f.collection_select(:course_ids, @quiz.courses, :id, :note_name, options = {:prompt => "Choose"}) %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:18:41.533

`course`看起来你和之间没有关系`quiz`。

A`course`有很多`quizzes`， A`quiz`有很多`notes`。您应该以这种方式设置您的关系，这样它就不会拉出与当前无关的不必要的注释`course`。

这里的诀窍是使用`has_many :through`.

```
class Course < ActiveRecord::Base
  has_many :quizzes
  has_many :notes, :through => quizzes
end

class Quiz < ActiveRecord::Base
  has_many :notes
end

class Note < ActiveRecord::Base
  belongs_to :quiz
end

<%= @course.name %>
<% @course.notes.each do |note| %>
    <%= link_to note.title, quiz_note_path(note.quiz, note)  %><br/>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:16:56.173

尝试这样的事情。

```
<%= @course.name %>
<% @quiz.notes.select { |n| n.title == @course.name }.each do |note| %>
  <%= link_to note.title, quiz_note_path(@quiz, note)  %><br/>
<% end %> 
```

`Enumerable.select`评估块并仅返回它为真的元素。

# javascript - jQuery 函数中的作用域

> ID：10821804
> 
> 赞同：0
> 
> 时间：2012-05-30T18:05:51.667
> 
> 标签：javascript, jquery, json

我很困惑为什么在第一个 console.log 下面的代码中向我显示了对象，而第二个是未定义的。我该如何解决这个问题？

```
var listOfTweets = [];

for(var k = 0; k < search.length; k++){
    $.getJSON(searchURL, function(tweets){                              
        listOfTweets[k] = tweets;
        console.log(listOfTweets[k]);                               
    });
    console.log(listOfTweets[k]);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T18:07:08.800

getJSON 是异步执行的，最后一个 console.log 在分配之前执行

因为我不知道你真正想要什么，所以很难告诉你应该做什么。您需要记住的是执行顺序。

在这段代码中

```
 $.getJSON(searchURL, function(tweets){
          console.log("done");
    });
    console.log("Request send"); 
```

发生的第一件事是发送一个请求，`searchURL`然后接下来的事情是“请求发送”将被打印到控制台，当浏览器收到对请求的响应时，很快就会调用该函数并且“完成”将打印到控制台

此外，您的代码在关闭方面存在问题，因为 k 已关闭，并且对于回调的所有调用将具有相同的值 (1)

要解决该问题，您可以使用自执行功能

```
for(var k = 0;k<10;k++){
    $.getJSON(searchURL, (function(i){
          return function(tweets){  
                         console.log("done for " + i);
                 }
     }(k));
    console.log("Request send for " + k);
 } 
```

请注意，k 立即用作函数的参数，参数的值被存储以供函数返回作为回调引用，并且在 k 增加时不会改变。如果你像你一样做，那么因为所有回调都引用同一个对象，所以它们也都具有相同的 k 值

(1) 除非在循环结束前返回一些

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T18:09:16.797

所有 $.getJSON 调用都是异步发生的。您最后的“console.log”可能会在“任何 getJSON 调用完成之前”被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T18:12:09.077

尝试按如下方式保存 k：

```
var listOfTweets = [];

for(var k = 0; k < search.length; k++){
    $.getJSON(searchURL, function(tweets){    
        var kk = k; // saved!!                          
        listOfTweets[kk] = tweets;
        console.log(listOfTweets[kk]);                               
    });
    console.log(listOfTweets[k]);
} 
```

因此，当`k`增加时，它不会影响`kk`您保存的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T18:24:40.413

您将需要一个闭包来将 的当前值保存`k`到回调的范围内。否则，`k`等于`search.length`执行回调时的循环之后。另外，请参阅[Javascript Callback Timing](https://stackoverflow.com/q/10808586/1048572)了解何时可以使用填充的`listOfTweets`.

```
var listOfTweets = [];
var search = [url1, url2, ...];

$.each(search, function(k, searchURL) {
    $.getJSON(searchURL, function(tweets){                              
        console.log(listOfTweets[k] = tweets);         
    });
});

// After all the ajax request completed, you will be able to
console.log(listOfTweets); 
```

# android - 摩托罗拉ET1安卓模拟器

> ID：10821814
> 
> 赞同：0
> 
> 时间：2012-05-30T18:06:20.423
> 
> 标签：android, android-emulator

我正在将一个 iPad 应用程序移植到摩托罗拉 ET1 安卓平板电脑。我想在 Android 中创建应用程序，而不是使用 RhoMobile 套件，因为我们的技能集更接近于 Java 而不是 HTML。

是否有摩托罗拉 ET1 的模拟器可以与 elipse 下的 android sdk 一起运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T21:45:18.700

我下载了 RhoStudio，它包含一个 Android 模拟器，您可以在其中测试 ET1 的应用程序。如果这有帮助...

# excel - 如何在有符号的Excel 2007 VBA中修剪单元格中的数据

> ID：10821815
> 
> 赞同：0
> 
> 时间：2012-05-30T18:06:25.803
> 
> 标签：excel, vba

我想修剪单元格内的数据，以便在连字符之前拥有一切

例如，如果一个单元格包含：

```
'Net Operating Loss - All Pre-1990 Carryforwards' 
```

我想以这样的方式修剪它，我只有：

```
'Net Operating Loss' 
```

关于如何做到这一点的任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:08:10.930

像这样？

```
Option Explicit

Sub Sample()
    Dim strSample As String

    strSample = "Net Operating Loss - All Pre-1990 Carryforwards"

    Debug.Print Split(strSample, "-")(0)
End Sub 
```

顺便说一句，您是否需要在 VBA 中执行此操作。以上也可以使用 Excel 公式来实现。

假设您在单元格 A1 中有“**净营业损失 - 所有 1990 年之前的结转**”，然后将其放入单元格 B1

**优秀2003**

```
=IF(ISERROR(MID(A1,1,FIND("-",A1,1)-1)),"",MID(A1,1,FIND("-",A1,1)-1)) 
```

**EXCEL 2007 及以后**

```
=IFERROR(MID(A1,1,FIND("-",A1,1)-1),"") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:13:19.430

嗨，

您使用 InStr 搜索连字符并将结果位置用作 Right Command 的长度。

```
dim p as integer
p = InStr(YourStr, '-');
Trim(Right(YourStr, p - 1)) 
```

这里有一点参考[http://www.techonthenet.com/access/functions/index.php](http://www.techonthenet.com/access/functions/index.php)

# javascript - CSS 与 Chrome 中的 jQuery scrollintoview() 插件冲突

> ID：10821817
> 
> 赞同：0
> 
> 时间：2012-05-30T18:06:37.173
> 
> 标签：javascript, jquery, css, google-chrome

我有一个使用 scrollintoview 插件的网站（https://github.com/litera/jquery-scrollintoview），但是 CSS 存在某种冲突。我有一个没有 CSS 的小提琴按预期工作，而一个没有 CSS 的小提琴。关于我缺少哪些导致冲突的属性的任何想法？小提琴的信息中有更多信息。工作（无 CSS）： http: [//jsfiddle.net/beej/vEGxg/1/](http://jsfiddle.net/beej/vEGxg/1/) 非工作（带 CSS）：http: [//jsfiddle.net/beej/vEGxg/](http://jsfiddle.net/beej/vEGxg/)

注意：我只在 Chrome 中体验过。所有其他浏览器（IE8-9 和 FF）似乎都按预期运行，元素滚动到视图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:22:11.100

在非工作 jsfiddle 中，删除“位置：绝对；” 此 CSS 块内第 7 行附近的属性：

```
.background {
    position: absolute;
    width: 100%;
    background:#042F62 url(../images/bg.jpg) top center no-repeat
} 
```

# php - PHP 标头重定向 - 不工作

> ID：10821820
> 
> 赞同：1
> 
> 时间：2012-05-30T18:06:53.777
> 
> 标签：php, html

这是代码：

```
if($rowCheck>0) {
  session_start();

  while($row = mysql_fetch_assoc($check)) {
    $_SESSION['developer'] = $row;          
  }

  header("Location: http://".$_SERVER['SERVER_NAME']."/index.php");
}
else
    echo 'Invalid Password or Email!'; 
```

除了 之外，一切都工作正常`header`，如果我在`echo`之后写一个，`header`它将正常工作。此外，如果我打印了`location`，它会告诉我正确和正确的`location`。

我在 mamp 和 macos 上运行。所以它在本地主机上。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:39:34.090

正如斯科特所说，您需要在标题之后使用 exit() 或 die() 。

另外，检查您的打开和关闭 php 标签之前或之后是否没有空格，如下所示：

```
 <?php 
```

这将导致标头函数失败，因为它被视为输入。还应检查任何相关的包含文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:08:50.507

在标题行之后添加 exit() 或 die()。标头函数不会停止脚本其余部分的执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T23:30:47.577

夫妇的事情。

首先，我会将`ini_set("display_errors", 1);`PHP 代码放在您页面的最顶部。您可能会收到“标头已发送”错误。

在标头后添加退出以防止脚本继续执行：

```
header("Location: http://".$_SERVER['SERVER_NAME']."/index.php");
exit; 
```

最后，这一点没有意义。

```
 while($row = mysql_fetch_assoc($check)) {
    $_SESSION['developer'] = $row;          
  } 
```

您正在设置该会话变量一次，因此您不需要 while。您还将它设置为等于 mysql 资源（您可能打算这样做），但也许您只需要一个列

```
$row = mysql_fetch_assoc($check);
$_SESSION['developer'] = $row['username']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T18:11:26.373

只需评论所有内容并粘贴在正确的开头`header("Location: http://".$_SERVER['SERVER_NAME']."/index.php");`，看看它是否有效。如果不是，请检查 BOM 编码。

# c# - ASP.NET Gridview“ShowEditButton”中的 If 语句

> ID：10821822
> 
> 赞同：1
> 
> 时间：2012-05-30T18:07:01.733
> 
> 标签：c#, asp.net, oracle, boundfield

我有一个关于 ASP.NET 的 GridView 以及在“编辑”按钮的命令字段中执行 If 语句的问题。

这是我现在拥有的代码：

```
 <Columns>

       <% if (Eval("Session("auditUpdate")") == true) { %>
            <asp:CommandField ShowEditButton="True" />
        <% } %>

        <asp:BoundField DataField="MODEL_NUMBER" HeaderText="MODEL_NUMBER" 
            ReadOnly="True" SortExpression="MODEL_NUMBER" />
 </Columns> 
```

我有一个名为 auditUpdate 的会话布尔变量，我在 GridView 的“OnRowDataBound”事件中更新它。如果'auditUpdate' == true，我想显示编辑按钮，否则根本不显示。

我到处搜索并搜索了我的 ASP.net 书，但似乎找不到答案。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:15:46.167

您可以尝试在代码中设置可见性

```
if(this.auditUpdate)
{
   this.GridView1.Columns[0].Visible = true;
} 
```

# git - 维护多个仓库时如何设置 GIT_DIR & GIT_WORK_TREE

> ID：10821825
> 
> 赞同：11
> 
> 时间：2012-05-30T18:07:17.770
> 
> 标签：git, repository

就像[这篇 SO post](https://stackoverflow.com/questions/6635018/reuse-git-work-tree-in-post-receive-hook-to-rm-a-few-files)一样，我有以下我想用 git 维护的工作流程：

1.  多人在当地发展
2.  提交一些事情
3.  提交更多的东西
4.  推送到暂存
5.  在 Staging 上测试新代码
6.  推向生产

我们的登台服务器服务于许多不同的站点。我想在用户主目录的不同文件夹中为每个设置存储库。每个存储库都会有一个 post-receive 钩子（类似于[Daniel Messier 的文章](http://danielmiessler.com/study/git/#website)），用于检查该站点/存储库的 Web 根目录中的更改。

给我带来麻烦的是六号。

当我尝试运行任何 git 命令时，我收到错误“致命：此操作必须在工作树中运行”。无论我是从存储库（/home/gituser/website1.git - 我认为无论如何都不应该工作..）还是从 Web 根目录（/var/www/website1）运行“git status”，我都会收到此错误.

但是，如果我指定 GIT_DIR 和 GIT_WORK_TREE，那么我可以运行 git 命令。这两项工作：

```
$ git --git-dir /home/gituser/website1.git --work-tree /var/www/website1 status
$ GIT_DIR=/home/gituser/website1.git GIT_WORK_TREE=/var/www/website1 git status 
```

所以我需要：

1.  与每个命令一起键入目录和工作树的替代方法
2.  将它们设置为持久环境变量的替代方法，因为这仅适用于 website1，而不适用于 website2、website3 等

我这样做对吗？如何获取 git 每个存储库所需的目录信息？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-30T21:41:39.313

如果我理解正确，那么每个 Web 根目录都有不同的存储库。如果是这种情况，您可以在存储库级别（在`.git/config`文件中）设置工作树：`core.worktree`. 如果 repo 配置为`bare`：

```
[core]
    bare = false
    worktree = /webroot/dir/for/this/repo 
```

一旦设置好，Git 命令（如`git status`）应该再次从存储库文件夹中工作，并且任何使用工作树（ 、 等）的命令`git status`都`git checkout`将使用该`core.worktree`位置。（请注意，Git 命令仍然无法从工作树位置工作，因为它不是存储库。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T18:30:31.817

只是一个建议。

实现一个名为“git”的脚本文件，该文件位于 /usr/bin 中的 git 可执行文件之前的用户路径之前的目录中。git，shell 脚本，只是 /usr/bin/git 之上的一个薄包装器。它所做的第一件事是检测从哪个目录调用 git 并尝试自动推断它正在工作的存储库。也许通过在脚本可以读取的每个存储库的根目录中拥有一个“my.config”文件。然后脚本调用“/usr/bin/git --git-dir”并设置 GIT_DIR 和 GIT_WORK_TREE 变量，然后使用相同的命令行参数调用 /usr/bin/git。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T16:16:09.963

三个选项：

## 1）添加本地别名：

`$ git config alias.root '!pwd'`

## 2）添加一个全局别名（$HOME/.gitconfig）：

```
[alias]
 findroot = "!f () { [[ -d ".git" ]] && echo "Found git in [`pwd`]" && exit 0; cd .. && echo "IN `pwd`" && f;}; f" 
```

## 3) 一个脚本，findgitroot.sh 例如

```
#!/bin/sh
f () { [[ -d ".git" ]] && echo "Found git in [`pwd`]" && exit 0; cd .. && f;}
f 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T18:25:24.093

您可以随时按向上箭头获取所有信息，然后删除命令并替换为另一个命令。您不需要重新输入整个内容。

如果您已经发出了许多其他命令并且不想在历史记录中“向上箭头”太多，您可以按 CTRL-R 并开始输入“tree”或“work”。您应该了解其中一个运行的历史点。

否则，按照已经建议的方式设置这些变量的脚本。

# android - 以编程方式在 tablerow 上画线

> ID：10821833
> 
> 赞同：1
> 
> 时间：2012-05-30T18:07:43.007
> 
> 标签：android, line, tablerow, stroke

我想在这样的表格中间画一条水平线

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="line">
<solid android:color="#ffffff" />    
<stroke android:width="2dip" 
    android:color="#FF0000" android:dashWidth="2dp"/>
</shape> 
```

但是用java代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:44:02.193

由于您没有为表格行添加 java 代码，我将做假设：

假设您拥有的代码位于 Drawable 文件夹内命名的 xml 文件中**`line.xml`**，假设我们有`TableRow myRow = new TableRow(this);`

现在我们将**`line.xml`**在 Java 代码中转换为 Drawable，

```
Resources res = getResources();
Drawable line = res.getDrawable(R.drawable.line); 
```

现在您只需将其添加到视图中以将其放在表格行的中间，例如：

```
TextView tv = new TextView(this);
tv.setBackground(line); 
```

然后将其添加到您的表格行中，

```
myRow.addView(tv); 
```

我没试过，但你可以试一试，祝你好运

# asp.net - IE8 兼容模式下 Ajax ModalPopupExtender 上的 Telerik Upload 控件

> ID：10821834
> 
> 赞同：0
> 
> 时间：2012-05-30T18:07:44.893
> 
> 标签：asp.net, telerik, ie8-compatibility-mode

我有一个在 IE8 下使用 Intranet 设置运行的内部站点，因此在兼容模式下运行。我没有使用标头或 IIS 强制站点进入常规模式的访问权限或权限 - 换句话说，它必须在兼容模式下运行。

在该站点上，我有一个位于 asp:Panel 上的 Upload 控件，该控件与 ajax 控件工具包的 ModalPopupExtender 相关联。上传控件设置为使用 3 个输入框。

当用户打开模式时，我启用了 enablefileinputskinning="false"，输入框具有从兼容模式分配的内联样式，将宽度设置为 15px。

![enablefileskin=false](../Images/a758685e473bae4f148f2001fcf204f3.png)

如果我设置 enablefileinputskinning="true"，输入框的大小是正确的，但通过模态到页面是透明的，用户无法与元素交互

![enablefileskin=true](../Images/33706f86ad943fda4ffd812f5d7928a9.png)

关于如何让输入框正确显示的任何想法或想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:12:19.457

在与 Telerik 支持合作后，他们提供了答案（使用 enablefileinputskinning='false'）：

```
.ruFileWrap
{
    width:380px !important;
} 
```

# c# - 如何在 C# 中创建上下文菜单

> ID：10821835
> 
> 赞同：3
> 
> 时间：2012-05-30T18:07:45.160
> 
> 标签：c#, winforms, visual-studio-2010, contextmenu

我想使用 C# 创建一个上下文菜单，该菜单将显示在节点旁边，类似于在 Visual Studio 中发生的情况：

![](../Images/3f015123aa6bb4ea5b5235099a167173.png)

我现在拥有的代码导致主窗体闪烁。

```
private void treeView1_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Right)
    {
        var myForm = new Form {Text = "My Form"};
        myForm.SetBounds(10, 10, 200, 200);

        myForm.Show();
        // Determine if the form is modal.
        if (myForm.Modal == false)
        {
            // Change borderstyle and make it not a top level window.
            myForm.FormBorderStyle = FormBorderStyle.FixedToolWindow;
            myForm.TopLevel = false;
        }
    }            
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-30T18:15:11.427

为什么不简单地使用`Form.ShowDialog`？

来自[MSDN](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)：

**Form.ShowDialog 方法**

> 将表单显示为模式对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:25:10.190

你应该设置`treeView1.ContextMenu`而不是你正在采取的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:57:13.920

您应该阅读并尝试`ContextMenu`控制 c#。我认为它会解决你的问题，而不是你使用的技术......或者除了使用之外，`myform.showdialog();`还有`setbounds()`方法。

# sql-server - 使用 TOP 1 赋值时出错

> ID：10821836
> 
> 赞同：1
> 
> 时间：2012-05-30T18:07:53.200
> 
> 标签：sql-server, stored-procedures

这是我的导致错误的代码：

```
SELECT @maxNo = TOP 1 CONVERT(INT,(SUBSTRING(noorder,7,4))) 
FROM orders ORDER BY noorder DESC; 
```

它返回：

> 消息 156，级别 15，状态 1，第 2 行
> 关键字“TOP”附近的语法不正确。

编辑：找到答案，我应该这样编码：

```
select top 1 @maxNo = CONVERT(int, (SUBSTRING(noorder, 7, 4))) 
```

来自 noorder desc 的订单；

感谢@RedFilter

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:08:34.177

```
select top 1 @maxNo = CONVERT(int, (SUBSTRING(noorder, 7, 4)))
from orders
order by noorder desc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:13:02.347

```
 declare @maxNo int
 Set @maxNo = (Select TOP 1 CONVERT(INT,(SUBSTRING(noorder,7,4))) 
 FROM [order] order by  noorder desc)
 select @maxNo 
```

# c# - 在 .NET 中获取原始（未拆分）命令行

> ID：10821841
> 
> 赞同：19
> 
> 时间：2012-05-30T18:08:24.847
> 
> 标签：c#, .net, command-line-arguments

`Main(string[])`在 .NET 中，我们可以从or的参数轻松访问字符串数组中的拆分命令行参数`Environment.GetCommandLineArgs()`。但是，有没有办法将未解析的命令行作为一个字符串？

背景：我的应用程序正在将自身添加到 FileExplorer 上下文菜单中（就像 Notepad++ 一样）。当它以这种方式启动时，文件名是不带引号传入的，这意味着如果路径中有空格，它就会被分解。我知道我可以通过在注册表中用`%1`引号括起来来解决这个问题`myapp.exe "%1"`，但是当我检查其他应用程序的注册表时，他们没有这样做。他们很简单`notepad.exe %1`——他们得到了完整的命令行。我想知道在 .NET 中是否可行以及如何。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-30T18:12:43.437

尝试使用：`Environment.CommandLine`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-21T17:14:08.750

要获得未解析的、原始的、未修改的命令行，您必须从 kernel32中 P/Invoke [GetCommandLine 。](http://www.pinvoke.net/default.aspx/kernel32/GetCommandLine.html)一些解析将由操作系统进行。例如，`>foo.txt`无论使用何种技术，都会从命令行文本中排除 IO 重定向。

Environment.CommandLine 可能就足够了，但请注意，它会删除参数之间的间隙（除非参数本身包含在引号中），并且它会从引用的参数中删除引号。

例如，对于命令行：

`test.exe this is "a test"`

Environment.CommandLine 等于：“ `this is a test`”

但是 GetCommandLine 产生：“ `test.exe this is "a test"`”，空格和引号完整，以及 exe 的路径。

**请注意**，使用此技术时，您必须手动解析命令行文本，这可能涉及剥离 exe 的路径，如果路径包含空格，则该路径本身可能用引号引起来。

# php - PHP - 工作正则表达式...不工作？

> ID：10821854
> 
> 赞同：1
> 
> 时间：2012-05-30T18:09:15.570
> 
> 标签：php, regex, arrays

我在第 6 行有一个正则表达式。我已经对其进行了测试，并确认它有效。现在，我有一个非常大的数组。虽然我已经在较小的数组上测试过正则表达式，但它似乎不适用于较大的数组！是什么赋予了？基本上，下面的脚本旨在删除包含不常见字符的数组条目。看看当你尝试两个数组时会发生什么——第一个成功地删除了奇数数组条目，但较大的一个没有！

见这里： [http ://pastebin.com/raw.php?i=KpNZHbrv](http://pastebin.com/raw.php?i=KpNZHbrv)

```
$sentences_working = array(
    'Egypt, officially the Arab Republic of Egypt, is a country mainly in North Africa, with the Sinai Peninsula forming a land bridge in Southwest Asia.',
    'Egypt is thus a transcontinental country, and a major power in Africa, the Mediterranean Basin, the Middle East and the Muslim world.',
    'The English name Egypt was borrowed from Middle French Egypte, from Latin, from ancient Greek Aígyptos, from earlier Linear B  a-ku-pi-ti-yo.',
    'In later years, the dynasty became a British puppet.',
);

$sentences_notworking = unserialize(urldecode("a%3A30%3A%7Bi%3A0%3Bs%3A160%3A%22Egypt++%2C+officially+the+Arab+Republic+of+Egypt%2C+Arabic%3A+%2C+is+a+country+mainly+in+North+Africa%2C+with+the+Sinai+Peninsula+forming+a+land+bridge+in+Southwest+Asia.%22%3Bi%3A1%3Bs%3A133%3A%22Egypt+is+thus+a+transcontinental+country%2C+and+a+major+power+in+Africa%2C+the+Mediterranean+Basin%2C+the+Middle+East+and+the+Muslim+world.%22%3Bi%3A2%3Bs%3A223%3A%22Covering+an+area+of+about+1%2C010%2C000+square+kilometers+%2C+Egypt+is+bordered+by+the+Mediterranean+Sea+to+the+north%2C+the+Gaza+Strip+and+Israel+to+the+northeast%2C+the+Red+Sea+to+the+east%2C+Sudan+to+the+south+and+Libya+to+the+west.%22%3Bi%3A3%3Bs%3A74%3A%22Egypt+is+one+of+the+most+populous+countries+in+Africa+and+the+Middle+East.%22%3Bi%3A4%3Bs%3A171%3A%22The+great+majority+of+its+over+81+million+people+live+near+the+banks+of+the+Nile+River%2C+in+an+area+of+about+40%2C000+square+kilometers+%2C+where+the+only+arable+land+is+found.%22%3Bi%3A5%3Bs%3A60%3A%22The+large+areas+of+the+Sahara+Desert+are+sparsely+inhabited.%22%3Bi%3A6%3Bs%3A177%3A%22About+half+of+Egypt%27s+residents+live+in+urban+areas%2C+with+most+spread+across+the+densely+populated+centres+of+greater+Cairo%2C+Alexandria+and+other+major+cities+in+the+Nile+Delta.%22%3Bi%3A7%3Bs%3A118%3A%22Monuments+in+Egypt+such+as+the+Giza+pyramid+complex+and+its+Great+Sphinx+were+constructed+by+its+ancient+civilization.%22%3Bi%3A8%3Bs%3A155%3A%22Its+ancient+ruins%2C+such+as+those+of+Memphis%2C+Thebes%2C+and+Karnak+and+the+Valley+of+the+Kings+outside+Luxor%2C+are+a+significant+focus+of+archaeological+study.%22%3Bi%3A9%3Bs%3A83%3A%22The+tourism+industry+and+the+Red+Sea+Riviera+employ+about+12%25+of+Egypt%27s+workforce.%22%3Bi%3A10%3Bs%3A170%3A%22The+economy+of+Egypt+is+one+of+the+most+diversified+in+the+Middle+East%2C+with+sectors+such+as+tourism%2C+agriculture%2C+industry+and+service+at+almost+equal+production+levels.%22%3Bi%3A11%3Bs%3A133%3A%22In+early+2011%2C+Egypt+underwent+a+revolution%2C+which+resulted+in+the+ousting+of+President+Hosni+Mubarak+after+nearly+30+years+in+power.%22%3Bi%3A12%3Bs%3A50%3A%22Presidential+elections+are+scheduled+for+May+2012.%22%3Bi%3A13%3Bs%3A190%3A%22The+English+name+Egypt+was+borrowed+from+Middle+French+Egypte%2C+from+Latin+%2C+from+ancient+Greek+A%26iacute%3Bgyptos+%2C+from+earlier+Linear+B+%26%2365601%3B%26%2365555%3B%26%2365568%3B%26%2365588%3B%26%2365549%3B+a-ku-pi-ti-yo.%22%3Bi%3A14%3Bs%3A277%3A%22The+adjective+aig%26yacute%3Bpti-%2C+aig%26yacute%3Bptios+was+borrowed+into+Coptic+as+%26%2311397%3B%26%2311433%3B%26%2311425%3B%26%231007%3B%26%2311411%3B%26%2311423%3B%26%2311429%3B%2F%26%2311413%3B%26%2311433%3B%26%2311425%3B%26%231007%3B%26%2311411%3B%26%2311423%3B%26%2311429%3B+gyptios%2C+kyptios%2C+and+from+there+into+Arabic+as+%2C+back+formed+into+%2C+whence+English+Copt.%22%3Bi%3A15%3Bs%3A209%3A%22The+Greek+forms+were+borrowed+from+Late+Egyptian++Hikuptah+%22Memphis%22%2C+a+corruption+of+the+earlier+Egyptian+name+Hwt-ka-Ptah+%2C+meaning+%22home+of+the+ka++of+Ptah%22%2C+the+name+of+a+temple+to+the+god+Ptah+at+Memphis.%22%3Bi%3A16%3Bs%3A130%3A%22Strabo+attributed+the+word+to+a+folk+etymology+in+which+A%26iacute%3Bgyptos++evolved+as+a+compound+from++%2C+meaning+%22below+the+Aegean%22.%22%3Bi%3A17%3Bs%3A288%3A%22%2C+the+Arabic+and+modern+official+name+of+Egypt+%2C+is+of+Semitic+origin%2C+directly+cognate+with+other+Semitic+words+for+Egypt+such+as+the+Hebrew+%26lrm%3B+%2C+literally+meaning+%22the+two+straits%22+.+The+word+originally+connoted+%22metropolis%22+or+%22civilization%22+and+means+%22country%22%2C+or+%22frontier-land%22.%22%3Bi%3A18%3Bs%3A232%3A%22The+ancient+Egyptian+name+of+the+country+is+Kemet++%5B%26%2378222%3B%26%2378163%3B%26%2378799%3B%26%2378486%3B%5D%2C+which+means+%22black+land%22%2C+referring+to+the+fertile+black+soils+of+the+Nile+flood+plains%2C+distinct+from+the+deshret+%2C+or+%22red+land%22+of+the+desert.%22%3Bi%3A19%3Bs%3A152%3A%22The+name+is+realized+as++and++in+the+Coptic+stage+of+the+Egyptian+language%2C+and+appeared+in+early+Greek+as++.+Another+name+was++%22land+of+the+riverbank%22.%22%3Bi%3A20%3Bs%3A105%3A%22The+names+of+Upper+and+Lower+Egypt+were+Ta-Sheme%27aw++%22sedgeland%22+and+Ta-Mehew++%22northland%22%2C+respectively.%22%3Bi%3A21%3Bs%3A79%3A%22There+is+evidence+of+rock+carvings+along+the+Nile+terraces+and+in+desert+oases.%22%3Bi%3A22%3Bs%3A103%3A%22In+the+10th+millennium+BC%2C+a+culture+of+hunter-gatherers+and+fishers+replaced+a+grain-grinding+culture.%22%3Bi%3A23%3Bs%3A117%3A%22Climate+changes+and%2For+overgrazing+around+8000+BC+began+to+desiccate+the+pastoral+lands+of+Egypt%2C+forming+the+Sahara.%22%3Bi%3A24%3Bs%3A129%3A%22Early+tribal+peoples+migrated+to+the+Nile+River+where+they+developed+a+settled+agricultural+economy+and+more+centralized+society.%22%3Bi%3A25%3Bs%3A63%3A%22By+about+6000+BC+a+Neolithic+culture+rooted+in+the+Nile+Valley.%22%3Bi%3A26%3Bs%3A104%3A%22During+the+Neolithic+era%2C+several+predynastic+cultures+developed+independently+in+Upper+and+Lower+Egypt.%22%3Bi%3A27%3Bs%3A108%3A%22The+Badarian+culture+and+the+successor+Naqada+series+are+generally+regarded+as+precursors+to+dynastic+Egypt.%22%3Bi%3A28%3Bs%3A100%3A%22The+earliest+known+Lower+Egyptian+site%2C+Merimda%2C+predates+the+Badarian+by+about+seven+hundred+years.%22%3Bi%3A29%3Bs%3A198%3A%22Contemporaneous+Lower+Egyptian+communities+coexisted+with+their+southern+counterparts+for+more+than+two+thousand+years%2C+remaining+culturally+distinct%2C+but+maintaining+frequent+contact+through+trade.%22%3B%7D"));

$sentences = $sentences_working; // change here for testing
foreach ($sentences as $sentence_key => $sentence)
{
    if (preg_match('/[^\x20-\x7E]/', $sentence))
    {
        unset($sentences[$sentence_key]);
    }
}

echo "<pre>";
print_r($sentences);
echo "</pre>"; 
```

要测试两个数组（更小和更大），只需更改第 12 行。发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:01:20.543

您提供的长字符串不仅经过 urlencoded、php 序列化，而且还对其实体进行了编码。

html_entity_decode 应该修复它，但我也会考虑一下三重编码是否真的是你想要的。

**编辑**：刚刚看到你的评论：

> 由于某种原因，我感觉字符代码在允许的范围内。

这里有几件事..很容易找到..只需做一个 hexdump。但是，如果您在终端中运行它，您会更早发现这一点。如果您要检查与编码相关的 PHP 脚本的输出......*至少*检查“查看源代码”而不是浏览器屏幕。

# python - python - 在 unitest 中进行 I/O 是一种不好的做法吗

> ID：10821859
> 
> 赞同：2
> 
> 时间：2012-05-30T18:09:33.087
> 
> 标签：python, unit-testing

我有一些团结正在做类似的事情：

```
_files = ('test1.txt','test2.txt'......)
setUp(){
    //create test files

    for f in _files:
        f = open(f, 'w')
        f.close()
}
tearDown(){
    for f in _files:
    if os.path.exists(f):
        os.remove(f)
} 
```

但是有些人告诉我，在 unitest 中执行 I/O 不是一个好习惯，是真的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T18:12:21.490

> 但是有些人告诉我，在 unitest 中执行 I/O 不是一个好习惯，是真的吗？

我认为在单元测试中执行 I/O 不一定是坏事。

唯一需要注意的是，如果您的单元测试依赖于一些预先存在的数据文件来完成它的工作，那么这些文件应该被视为单元测试的一部分（因此是版本控制等）。

PS你有没有试过询问那些给你这个建议的人，因为建议背后的具体原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-03T14:25:14.687

一般来说，编写测试的最佳实践是只有在没有产生预期行为时才会失败。

如果您包含任何第三方代码或除您的测试方法之外的逻辑，即使测试方法工作正常，您也会添加测试失败的原因。在单元测试中，您使用模拟来替换其他对象或方法，从而替换您不想测试的任何逻辑。这有助于保持测试实际上只覆盖一个代码单元。

如果您的测试连接到数据库、读取和写入文件、从 Web 服务获取 GET 等，那么它可能真的是一个集成测试。集成测试非常有用，因为您可以检测单元测试无法识别的问题。但是单元测试的好处是，如果一个写得很好的单元测试失败了，你已经知道代码的哪一部分有问题，预期的行为是什么以及发生了什么。

读取输入文件时，文件成为测试的一部分，因此现在您将测试拆分为两个位置。任何想了解测试的人可能需要打开文件并查看它，您需要将文件添加到源代码管理等。如果文件很短，那么最好只模拟 I/O 函数测试在一个地方。

# php - 最后插入的 id

> ID：10821862
> 
> 赞同：0
> 
> 时间：2012-05-30T18:10:06.170
> 
> 标签：php

这是我的查询

```
$vipinsert = "INSERT INTO `$amxadmins` (`id`, `password`, `access` , `flags` ,`steamid` , `ashow` , `created` , `expired` , `days`) VALUES ('', '$logged[password]', '$accessvip', '$flagsvip' , '$logged[username]' , '$ashowvip' , '$createdvip' , '$expiredvip' , '$daysvip')";
    mysql_query($vipinsert) or die(mysql_error());
    $vipselect = mysql_query("SELECT * from `$amxadmins` WHERE steamid = '$logged[username]'") or die(mysql_error());
    $custom1 = '';
    $static1 = 'no';
    $row = mysql_fetch_assoc($vipselect);
    mysql_query("INSERT INTO `$admins_servers` (`admin_id`, `server_id`, `custom_flags`, `use_static_bantime`) VALUES ('$row[id]', '$server', '$custom1', '$static1')")or die(mysql_error()); 
```

无论如何要从中选择id

```
$vipinsert = "INSERT INTO `$amxadmins` (`id`, `password`, `access` , `flags` ,`steamid` , `ashow` , `created` , `expired` , `days`) VALUES ('', '$logged[password]', '$accessvip', '$flagsvip' , '$logged[username]' , '$ashowvip' , '$createdvip' , '$expiredvip' , '$daysvip')"; 
```

原谅我的英语不好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T18:11:47.847

```
mysql_insert_id() 
```

将返回最后插入行的主键值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:12:15.973

是的，看看[这里](http://php.net/manual/en/function.mysql-insert-id.php)发现`mysql_insert_id()`

# java - 设备关闭时我应该使用什么 BroadcastReceiver？

> ID：10821868
> 
> 赞同：1
> 
> 时间：2012-05-30T18:10:39.103
> 
> 标签：java, android

我一直在开发一些 Android 应用程序，我需要捕捉一些事件：设备何时重新启动以及设备何时关闭。我知道我应该为第一个任务使用哪个 BroadcastReceiver，但我对第二个任务一无所知。请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:17:51.817

您可以 `ACTION_SHUTDOWN`在手机关机时广播 Intent。在 Manifest 中将 ACTION_SHUTDOWN 意图过滤器操作注册为：

```
<receiver android:name=".myReceiver">
  <intent-filter>
    <action android:name="android.intent.action.ACTION_SHUTDOWN" />
  </intent-filter>
</receiver> 
```

在你的java代码中：

```
public class myReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        if(intent.getAction().equals("android.intent.action.ACTION_SHUTDOWN")){
            //DO SOMETHING HERE
         }
        else
         {
                ...
         }
    }

} 
```

# php - 使用斜线的奇怪错误

> ID：10821869
> 
> 赞同：3
> 
> 时间：2012-05-30T18:10:50.947
> 
> 标签：php, codeigniter, sendgrid

我正在使用 Sendgrid 的 PHP 库（https://github.com/sendgrid/sendgrid-php）。按照说明，我不得不使用这行代码：

```
$mail = new SendGrid\Mail(); 
```

我得到错误：

```
Warning: Unexpected character in input: '\' (ASCII=92) state=1 in /home/d/public_html/ac/application/controllers/email.php on line 20

Parse error: syntax error, unexpected T_STRING in /home/d/public_html/ac/application/controllers/email.php on line 20 
```

使用有什么问题`'\'`吗？对我来说似乎很奇怪......我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T18:13:25.637

这`\`是[名称空间](http://php.net/manual/en/language.namespaces.php)的一部分，这是PHP 5.3 中的一个新特性。

# binary - 我怎么能用二进制写“hello world”？

> ID：10821875
> 
> 赞同：21
> 
> 时间：2012-05-30T12:16:25.257
> 
> 标签：binary

假设我想写一个程序来显示“hello world”，我想用二进制写。我怎么能这样做？

我有一些想法：

*   我需要确定我使用的是什么芯片架构
*   我需要找出它使用哪种二进制文件
*   我需要一些关于这种二进制文件的参考
*   我可能需要更改编辑器中的设置（Vim）

任何人都可以帮我完成这个吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-30T12:39:30.157

它有点复杂，因为实际上打印“Hello, world！” stdout 是一个系统调用，因此您需要知道正确的内核系统调用号。这当然因操作系统而异。此外，您还需要了解二进制格式，尽管[ELF（可执行和可链接格式）](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)在少数 Unix 和 Linux 版本中是通用的，但它也往往会有所不同。

见[你好，世界！在汇编器中](http://asm.sourceforge.net/intro/hello.html)。

这是 Linux 汇编代码：

```
section .text
    global _start           ;must be declared for linker (ld)

_start:                 ;tell linker entry point

    mov edx,len ;message length
    mov ecx,msg ;message to write
    mov ebx,1   ;file descriptor (stdout)
    mov eax,4   ;system call number (sys_write)
    int 0x80    ;call kernel

    mov eax,1   ;system call number (sys_exit)
    int 0x80    ;call kernel

section .data

msg db  'Hello, world!',0xa ;our dear string
len equ $ - msg         ;length of our dear string 
```

...在 32 位 Linux 上，编译结果为 360 字节的二进制文件，尽管它大部分是零：

```
00000000  7f 45 4c 46 01 01 01 00  00 00 00 00 00 00 00 00  |.ELF............|
00000010  02 00 03 00 01 00 00 00  80 80 04 08 34 00 00 00  |............4...|
00000020  c8 00 00 00 00 00 00 00  34 00 20 00 02 00 28 00  |........4\. ...(.|
00000030  04 00 03 00 01 00 00 00  00 00 00 00 00 80 04 08  |................|
00000040  00 80 04 08 9d 00 00 00  9d 00 00 00 05 00 00 00  |................|
00000050  00 10 00 00 01 00 00 00  a0 00 00 00 a0 90 04 08  |................|
00000060  a0 90 04 08 0e 00 00 00  0e 00 00 00 06 00 00 00  |................|
00000070  00 10 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000080  ba 0e 00 00 00 b9 a0 90  04 08 bb 01 00 00 00 b8  |................|
00000090  04 00 00 00 cd 80 b8 01  00 00 00 cd 80 00 00 00  |................|
000000a0  48 65 6c 6c 6f 2c 20 77  6f 72 6c 64 21 0a 00 2e  |Hello, world!...|
000000b0  73 68 73 74 72 74 61 62  00 2e 74 65 78 74 00 2e  |shstrtab..text..|
000000c0  64 61 74 61 00 00 00 00  00 00 00 00 00 00 00 00  |data............|
000000d0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
000000f0  0b 00 00 00 01 00 00 00  06 00 00 00 80 80 04 08  |................|
00000100  80 00 00 00 1d 00 00 00  00 00 00 00 00 00 00 00  |................|
00000110  10 00 00 00 00 00 00 00  11 00 00 00 01 00 00 00  |................|
00000120  03 00 00 00 a0 90 04 08  a0 00 00 00 0e 00 00 00  |................|
00000130  00 00 00 00 00 00 00 00  04 00 00 00 00 00 00 00  |................|
00000140  01 00 00 00 03 00 00 00  00 00 00 00 00 00 00 00  |................|
00000150  ae 00 00 00 17 00 00 00  00 00 00 00 00 00 00 00  |................|
00000160  01 00 00 00 00 00 00 00                           |........| 
```

由于您想“手动编译”，这基本上意味着[将上面的汇编程序助记符转换为它们的操作码](http://ref.x86asm.net/geek32.html)，然后以正确的二进制格式包装结果（上面示例中的[ELF](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)）

更新：正如 @a​​dam-rosenfield 给出的[答案所示，“Hello, world!”的 ELF 二进制文件](https://stackoverflow.com/a/285093/60711) 可以手工制作到 116 字节。原始答案现已删除，但版主仍然可以看到，所以这里有一个副本：

> 这是一个使用 Linux 系统调用的 32 字节版本：
> 
> ```
>  .globl _start
> _start:
>         movb $4, %al
>         xor %ebx, %ebx
>         inc %ebx
>         movl $hello, %ecx
>         xor %edx, %edx
>         movb $11, %dl
>         int $0x80               ;;; sys_write(1, $hello, 11)
>         xor %eax, %eax
>         inc %eax
>         int $0x80               ;;; sys_exit(something) hello:
>         .ascii "Hello world" 
> ```
> 
> 当编译成最小的 ELF 文件时，完整的可执行文件是 116 字节：
> 
> ```
> 00000000 7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 |.ELF............|
> 00000010 02 00 03 00 01 00 00 00 54 80 04 08 34 00 00 00 |........T...4...|
> 00000020 00 00 00 00 00 00 00 00 34 00 20 00 01 00 00 00 |........4\. .....|
> 00000030 00 00 00 00 01 00 00 00 00 00 00 00 00 80 04 08 |......|
> 00000040 00 80 04 08 74 00 00 00 74 00 00 00 05 00 00 00 |....t.........|
> 00000050 00 10 00 00 b0 04 31 分贝 43 b9 69 80 04 08 31 d2 |......1.Ci..1.|
> 00000060 b2 0b cd 80 31 c0 40 cd 80 48 65 6c 6c 6f 20 77 |....1.@..你好 w|
> 00000070 6f 72 6c 64 |orld|
> 00000074
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T13:28:29.783

通常，您会为此使用十六进制编辑器。找出汇编代码，手动组装，使用十六进制编辑器输入二进制值，然后将它们保存到文件中。获得文件后，放入机器监视器并在可用地址加载文件，然后跳转到第一条指令。这在单板计算机上是相当普遍的做法，今天仍然在微控制器上完成，但这不是你要在现代操作系统上做的事情。如果您真的想这样做，我建议您运行一个低级仿真器（[SIMH](http://en.wikipedia.org/wiki/SIMH)可以工作）或使用微控制器（您可以花不到 5 美元购买TI [MSP430开发套件）。](http://e2e.ti.com/group/msp430launchpad/w/default.aspx)

# playframework - playframework 中的 TemplateCompilationException

> ID：10821879
> 
> 赞同：0
> 
> 时间：2012-05-30T18:11:26.597
> 
> 标签：playframework

我偶尔会看到这类异常。知道为什么会发生这种情况吗？我以为所有模板都是在服务器重新启动时以 prod 模式编译的，但是这个错误似乎是在请求路径上抛出的。

```
play.exceptions.TemplateCompilationException: unexpected token: } 
at play.templates.GroovyTemplate.compile(GroovyTemplate.java:174)
at play.templates.GroovyTemplate.internalRender(GroovyTemplate.java:195)
at play.templates.GroovyTemplate$ExecutableTemplate.invokeTag(GroovyTemplate.java:379)
at /app/views/base-user-layout.html.(line:89)
at play.templates.GroovyTemplate.internalRender(GroovyTemplate.java:232)
at play.templates.GroovyTemplate.internalRender(GroovyTemplate.java:267)
at play.templates.Template.render(Template.java:26)
at play.templates.GroovyTemplate.render(GroovyTemplate.java:187)
at play.mvc.results.RenderTemplate.<init>(RenderTemplate.java:24)
at play.mvc.Controller.renderTemplate(Controller.java:660)
at play.mvc.Controller.renderTemplate(Controller.java:640)
at play.mvc.Controller.render(Controller.java:695)
at controllers.UserController.profile(UserController.java:111)
at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:548)
at play.mvc.ActionInvoker.invoke(ActionInvoker.java:502)
at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:478)
at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:473)
at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161)
at play.server.PlayHandler$NettyInvocation.execute(PlayHandler.java:257)
at play.Invoker$Invocation.run(Invoker.java:278)
at play.server.PlayHandler$NettyInvocation.run(PlayHandler.java:235)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:165)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:266)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:636) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:02:29.257

在 Play 1.x 中，不编译模板。模板由 html 和 groovy 代码组成。groovy 代码在运行之前不会被解释。

然而，Play 2 已完全编译。

# c++ - 您如何着手制作基于 tcp 的可靠 udp 协议？

> ID：10821886
> 
> 赞同：0
> 
> 时间：2012-05-30T18:11:49.573
> 
> 标签：c++, sockets, tcp, udp

我正在尝试编写一个可靠的 udp 协议，但是我对服务器何时将连接移交给套接字感到困惑。在 java 中，tcp 服务器在特定端口上侦听，然后在接受时返回一个套接字。

```
Socket clientSocket = server.accept(); 
```

接受方法是在同步位交换之后还是在状态建立时返回一个套接字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:51:47.370

当accept方法返回socket时，socket处于连接状态，在accept方法返回socket之前交换SYN/SYN-ACK包。事实上，SYN 数据包并没有在接受方法中交换。这些数据包在驱动层（TCP 堆栈）上进行交换。

如果您正在尝试编写可靠的 UDP，那么我强烈建议您查看 UDT 项目源代码。它是用 C++ 编写的，但你可以从这个项目中获得很多指导。UDT 项目写得非常好，高效且非常稳定。

[http://udt.sourceforge.net/](http://udt.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:29:50.967

Java 套接字是基于 BSD API 建模的，因此返回的套接字`accept`应该是全连接的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:18:13.463

首先回答这个问题 - 当接受返回时，套接字已连接。

其次，做这种事情的最好方法是使用[ØMQ](http://www.zeromq.org/)，因为它非常棒，而且对你有很大帮助。

最后取自这篇[文章](http://www.android10.org/index.php/forums/46-networking-a-database/160-simple-udp-communication-example)，它的工作原理是这样的：

用户数据报协议 (UDP) 是 Internet 协议套件的核心成员之一，该套件是用于 Internet 的网络协议集。使用 UDP，计算机应用程序可以将消息（在这种情况下称为数据报）发送到 Internet 协议 (IP) 网络上的其他主机，而无需事先通信来建立特殊的传输通道或数据路径。

![在此处输入图像描述](../Images/6724a8f5adaa24d586996b94fee088d2.png)

# jquery - 我可以在多个元素上使用 jquery for onKeyUp 吗？

> ID：10821894
> 
> 赞同：9
> 
> 时间：2012-05-30T18:12:17.510
> 
> 标签：jquery

我有一堆文本字段，我想在 onkeyup 完成后运行一个函数。他们都将运行相同的功能，所以有没有办法我可以在一行上做到这一点，而不是这样：

```
$('#element1').keyup(function(){getData()});
$('#element2').keyup(function(){getData()}); 
```

另外，如果我能做到这一点，我怎么能在其中抛出和 onchange 以进行下拉？谢谢大家！！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-30T18:18:13.047

您可以使用逗号分隔元素：

```
$("#element1, #element2").keyup(getData); 
```

但是如何使用类而不是列出所有 ID：

```
<!-- HTML -->
<input id="element1" class="element" />
<input id="element2" class="element" />

// JavaScript
$(".element").keyup(getData); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T18:19:42.600

您可以将它们附加到选择器中：

```
$('#element1, #element2').keyup(function(){ // ... 
```

或者你`add()`在这种情况下使用可能会更有效，因为 jQuery 可以使用 ID 选择器的快捷方式`getElementById`：

```
$('#element1').add('#element2').keyup(function(){ // ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T18:17:55.947

可以在`$()`.

```
$('#element1, #element2').keyup(function(){
   getData()
 }); 
```

或简而言之

```
$('#element1, #element2').keyup(getData); 
```

如果你想将`.change()`事件绑定到你的多个`select`盒子然后给所有`select`一个公共类

```
<select class="myselect"></select>
<select class="myselect"></select>
<select class="myselect"></select>

$('.myselect').on('change', function() {

}); 
```

# jquery-mobile - 平板电脑有日历插件吗？

> ID：10821896
> 
> 赞同：5
> 
> 时间：2012-05-30T18:12:19.663
> 
> 标签：jquery-mobile, fullcalendar, tablet

我正在使用 jQuery Mobile 开发特定于 iPad3 平板电脑的调度程序。有人可以推荐一个适合平板电脑的日历插件吗？我已经尝试过[FullCalendar](http://arshaw.com/fullcalendar/)，但是其中的拖放功能不起作用，并且在滑动容器时我无法选择开始时间和结束时间。

有人对此有任何解决方案吗？任何帮助，将不胜感激..

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:16:35.690

这个效果很好：[http ://dev.jtsage.com/jQM-DateBox/](http://dev.jtsage.com/jQM-DateBox/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:36:51.967

检查这个 - 我不认为它是 jQuery，但可能适合您的需要。 [http://dhtmlx.com/docs/products/dhtmlxScheduler/index.shtml](http://dhtmlx.com/docs/products/dhtmlxScheduler/index.shtml)

此外，还有很多这样的插件可以与 Sencha Touch 一起使用——你可以检查一下。可能有一些与 ExtJS 和 jQuery 兼容。

希望这可以帮助！

# javascript - 你知道一个开源的 Javascript 提取/正则表达式引擎吗？

> ID：10821899
> 
> 赞同：0
> 
> 时间：2012-05-30T18:12:35.560
> 
> 标签：javascript, regex, browser, frameworks, browser-extension

我们需要一个 DOM 解析器，它能够运行一堆模式并存储结果。为此，我们正在寻找开放的图书馆，我们可以开始，

*   能够通过正则表达式选择元素（例如，在类、id、元属性等其他属性中获取所有包含“价格”的元素），
*   应该有很多助手，例如：删除评论、iframe 等
*   并且非常快。
*   可以从浏览器扩展运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:17:45.810

好的，我会说：
你可以使用[jQuery](http://jquery.com)。

**UPS**：

*   它是一个非常好的 dom 解析器
*   它非常擅长操纵 dom（删除/添加/编辑元素）
*   它有一个很棒且直观的 api
*   它有一个大而伟大的社区 => 对任何与 jquery 相关的问题都有很多答案
*   它适用于浏览器扩展（我自己在 chrome 中对其进行了测试，它显然也适用于 ff 扩展：[如何在 Firefox 扩展中使用 jQuery](https://stackoverflow.com/questions/491490/how-to-use-jquery-in-firefox-extension)）
*   它是轻量级的（大约 31KB 大小 - 压缩和压缩）
*   它是跨浏览器的
*   它绝对是开源的

**缺点**：

*   它不依赖正则表达式（尽管这是一件**非常**好的事情——正如[dda](https://stackoverflow.com/users/1136195/dda)已经提到的），但正则表达式可用于过滤元素
*   不知道它是否可以访问/操作评论

这是一些 jquery 操作的示例：

```
// select all the iframe elements with the class advertisement 
// that have the word "porn" in their src attribute
$('iframe.advertisement[src*=porn]')
    // filter the ones that contains the word "poney" in their title 
    // with the help of a regex
    .filter(function(){
        return /poney/gi.test((this.title || this.document.title).test()));
    }) 
        // and remove them
        .remove()
        // return to the whole match
        .end()
    // filter them again, this time 
    // affect only the big ones
    .filter(function(){
        return $(this).width() > 100 && $(this).height() > 100;
    })
        // replace them with some html markup
        .replaceWith('<img src="harmless_bunnies_and_kitties.jpg" />'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:19:20.933

[node-htmlparser](https://github.com/tautologistics/node-htmlparser) can parse HTML, provides a DOM with a number of utils (also supports filtering by functions) and can be run in any context (even in WebWorkers).

I [forked](https://github.com/fb55/node-htmlparser) it a while back, improved it for better speed and got some insane results (read: even faster than native libexpat bindings).

Nevertheless, I would advice you to use the original version, as it supports browsers out-of-the-box (my fork can be run in browsers using browserify, which adds some overhead).

# html - 水平居中 div 内的元素

> ID：10821900
> 
> 赞同：2
> 
> 时间：2012-05-30T18:12:38.067
> 
> 标签：html, css

所以我需要创建以 3 或 4 个正方形为中心的布局。就像现在许多不同的屏幕一样（我目前有 21 台飞利浦、macbook 13 和 ipad），并且所有屏幕上的方块都不同。

![页](../Images/a0e1785b30c0583a521faa346cb88e42.png)

所以我需要它在任何屏幕上居中。这是我的一些代码：

一些CSS：

```
#main{
border: 1px solid red;
margin: auto;
}
#block{
display: inline-block;
padding: 110px;
border: 1px solid red;
margin: 10px 10px;
overflow:hidden;
} 
```

一些HTML：

```
<div id="wrapper">
<div id="header">
header
</div>
<div id="main">
<div id="block">main</div>
<div id="block">main</div>
<div id="block">main</div>
<div id="block">main</div>
<div id="block">main</div>
<div id="block">main</div>
<div style="clear:both"></div>
</div>
</div> 
```

我用一些额外的 div 尝试了不同的方法...... ![http://dl.dropbox.com/u/14396564/screens/Title%20%2820120530%29.png](../Images/56cbc729d8a6ae725b80d8e63cdd16cc.png) ![http://dl.dropbox.com/u/14396564/screens/Title%20%2820120530%292.png](../Images/115747676745d39fb9fe17e1d3e2c4a5.png) ![http://dl.dropbox.com/u/14396564/screens/Title%20%2820120530%29_new.png](../Images/c519ebcb259073b070fa4e5489780cb8.png)

所以我需要这个方块会自动在任何屏幕上居中

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T18:18:07.033

由于您只是使用`inline-block`，因此您可以将容器的文本居中。

此外，对非唯一元素使用类。

小提琴：http: [//jsfiddle.net/LWTNB/3/](http://jsfiddle.net/LWTNB/3/)

更新的 HTML：

```
<div id="wrapper">
    <div id="header">
        header
    </div>
    <div id="main">
        <div class="block">main</div>
        <div class="block">main</div> 
        <div class="block">main</div> 
        <div class="block">main</div> 
        <div class="block">main</div> 
        <div class="block">main</div> 
        <div class="block">main</div> 
        <div class="block">main</div> 
        <div class="block">main</div> 
        <div class="block">main</div> 
        <div class="block">main</div>
    </div>
</div> 
```

更新的 CSS：

```
#main{
    border:1px solid red;
    text-align:center; /* solution */
}

.block{
    display:inline-block;
    padding:110px;
    border:1px solid red;
    margin:10px 10px;
    overflow:hidden;
} 
```

# c# - C# 中的代码效率

> ID：10821904
> 
> 赞同：1
> 
> 时间：2012-05-30T18:12:44.007
> 
> 标签：c#, treeview, performance

我正在使用一个包含来自目录的节点的树视图，其中最低节点是文件中的一段文本。我希望能够获取该节点，并获取它的文件名，并且我在以下代码行中这样做了，但是有更好的方法吗？我希望它尽可能高效，我想知道是否最好只创建一个整数来存储索引号，而不是在索引本身中计算它。我知道如果创建了整数变量，无论如何我都必须进行该计算...

（tVSNodes 是树节点的列表）

TL:DR - 有没有更有效（更快的执行）的方式来做到这一点？

```
string filename = tVSNodes[0].FullPath.Split('\\')[(tVSNodes[0].FullPath.Split('\\').Count()-2)]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:50:57.023

看起来您只是想获取父节点的文本。

```
if (tVSNodes[0].Parent == null)
     return;  // handle appropriately

string fileName = tVSNodes[0].Parent.Text; 
```

# android - 使所有选项卡的选项卡内容高度一致

> ID：10821907
> 
> 赞同：3
> 
> 时间：2012-05-30T18:12:58.743
> 
> 标签：android, android-layout

我有一个带有两个选项卡的 TabHost 设置。在选项卡之间切换以匹配其中显示的数据时，选项卡内容区域的高度会扩展和折叠。我试图弄清楚如何使高度一致，以便 tab1 尽可能高，而 tab2 使用相同的高度。

TabHost 的高度以编程方式控制，以确保它不超过屏幕高度的 70%。Tab1 包含一个 ScrollView，因此可以根据需要滚动其数据。

TabHost 布局：

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@android:id/tabhost"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
  <LinearLayout
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <TabWidget
      android:id="@android:id/tabs"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"/>
    <FrameLayout
      android:id="@android:id/tabcontent"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:paddingTop="@dimen/traffic_map_bubble_padding_top"
      android:paddingRight="@dimen/traffic_map_bubble_padding_right"
      android:paddingBottom="@dimen/traffic_map_bubble_padding_bottom"
      android:paddingLeft="@dimen/traffic_map_bubble_padding_left"
      android:background="@drawable/map_ballon_bg_selector"/>
  </LinearLayout>
</TabHost> 
```

Tab1 布局

```
<ScrollView 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/traffic_restriction_tab_1"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
  <LinearLayout
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <TextView
      android:id="@+id/traffic_restriction_location_1"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:background="@drawable/traffic_restriction_bg"
      android:gravity="center"
      style="@style/traffic_map_bubble_style"
      android:textStyle="bold"/>
    <TableLayout
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_marginTop="@dimen/traffic_map_bubble_table_margin_top"
      android:shrinkColumns="2">
        <TableRow>
          <TextView
            android:layout_column="1"
            style="@style/traffic_map_bubble_label_style"
            android:text="@string/label_dates"/>
          <TextView
            android:id="@+id/traffic_restriction_date_range"
            android:layout_column="2"
            style="@style/traffic_map_bubble_style"/>
          </TableRow>

  <TableRow>
    <TextView
      android:layout_column="1"
      style="@style/traffic_map_bubble_label_style"
      android:text="@string/label_impact"/>

    <TextView
      android:id="@+id/traffic_restriction_type"
      android:layout_column="2"
      style="@style/traffic_map_bubble_style"/>
  </TableRow>

  <TableRow>
    <TextView
      android:layout_column="1"
      style="@style/traffic_map_bubble_label_style"
      android:text="@string/label_condition"/>

    <TextView
      android:id="@+id/traffic_restriction_detail"
      android:layout_column="2"
      style="@style/traffic_map_bubble_style"/>
  </TableRow>

  <TableRow
    android:id="@+id/traffic_restriction_press_release_row"
    android:layout_marginTop="@dimen/traffic_map_bubble_table_double_space">

    <TextView
      android:layout_column="1"
      android:visibility="invisible"/>

    <TextView
      android:id="@+id/traffic_restriction_press_release"
      android:layout_column="2"
      style="@style/traffic_map_bubble_style"/>
  </TableRow>
  </TableLayout>
  </LinearLayout>
  </ScrollView> 
```

Tab2 布局

```
<LinearLayout 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/traffic_restriction_tab_2"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

<TextView
android:id="@+id/traffic_restriction_location_2"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@drawable/traffic_restriction_bg"
android:gravity="center"
style="@style/traffic_map_bubble_style"
android:textStyle="bold"/>

<TableLayout
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_marginTop="@dimen/traffic_map_bubble_table_margin_top"
android:shrinkColumns="2">

<TableRow>
  <TextView
    android:layout_column="1"
    style="@style/traffic_map_bubble_label_style"
    android:text="@string/label_email"/>

  <TextView
    android:layout_column="2"
    android:autoLink="email"
    style="@style/traffic_map_bubble_style"
    android:text="@string/email_public_relations"/>
</TableRow>

<TableRow
  android:layout_marginTop="@dimen/traffic_map_bubble_table_double_space">

  <TextView
    android:layout_column="1"
    style="@style/traffic_map_bubble_label_style"
    android:text="@string/label_phone_instate"/>

  <TextView
    android:layout_column="2"
    android:autoLink="phone"
    style="@style/traffic_map_bubble_style"
    android:text="@string/phone_public_relations_instate"/>
</TableRow>

<TableRow
  android:layout_marginTop="@dimen/traffic_map_bubble_table_double_space">

  <TextView
    android:layout_column="1"
    style="@style/traffic_map_bubble_label_style"
    android:text="@string/label_phone"/>

  <TextView
    android:layout_column="2"
    android:autoLink="phone"
    style="@style/traffic_map_bubble_style"
    android:text="@string/phone_public_relations"/>
</TableRow>
</TableLayout>
</LinearLayout> 
```

# c# - 更改代码隐藏中的应用程序资源属性

> ID：10821919
> 
> 赞同：0
> 
> 时间：2012-05-30T18:13:26.167
> 
> 标签：c#, silverlight

我在 Silverlight (Form.xaml) 中有一个用户控件，它使用标签来显示数据。目前，我有这些标签的前景色和可见性，由 app.xaml 中的模板控制，如下所示：

```
<Application xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
             x:Class="TestSilverlight.App"
             >
    <Application.Resources>

        <ControlTemplate x:Key="DataLabel" x:Name="DataLabel" TargetType="sdk:Label">
            <sdk:Label Visibility="Visible" Foreground="White" Content="{TemplateBinding Content}"></sdk:Label>
        </ControlTemplate>

    </Application.Resources>
</Application> 
```

这是 Form.xaml 中标签的 xaml：

```
<sdk:Label Template="{StaticResource DataLabel}" HorizontalAlignment="Left" Margin="140,53,0,0" VerticalAlignment="Top" Content="Ground" FontSize="13.333" Width="138"/> 
```

当我单击 Form.xaml 的编辑按钮时，我想隐藏这些标签。但是，我无法弄清楚如何更改此模板后面代码中的可见性属性。

```
 private void EditButton_Click(object sender, RoutedEventArgs e)
    {

        // Place code to alter template properties here...

    } 
```

关于如何做到这一点的任何想法？非常感谢您的帮助和意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:43:33.927

您可以尝试类似（使用 WPF 工作）：

```
 <ControlTemplate x:Key="DataLabel" x:Name="DataLabel" TargetType="sdk:Label">
        <sdk:Label x:Name="myLabelTemplate" Visibility="Visible" Foreground="White" Content="{TemplateBinding Content}"></sdk:Label>
    </ControlTemplate> 
```

（我只是给 controlTemplate 中的标签命名）

```
<sdk:Label x:Name="myLabel" Template="{StaticResource DataLabel}" HorizontalAlignment="Left" Margin="140,53,0,0" VerticalAlignment="Top" Content="Ground" FontSize="13.333" Width="138"/> 
```

（我只是给 xaml 中的标签命名）

```
 var res = (FindResource("DataLabel") as ControlTemplate).FindName("myLabelTemplate", myLabel);
        if (res != null && res is FrameworkElement)
            (res as FrameworkElement).Visibility = Visibility.Hidden; 
```

我没有检查 FindResource 是否返回不为空的东西，等等（我认为你可以处理它；））

但是，如果我是你，我不会使用应用程序资源来放置用户控件的特定资源（我会在 userControl 的 xaml 中使用它的模板（作为附加资源），甚至不会使用如果您想修改其中的属性，则根本没有模板：如果管理不当，可能会由于空指针异常而导致应用程序崩溃）

# git - git-svn 和不幸的 svn 预提交钩子

> ID：10821920
> 
> 赞同：2
> 
> 时间：2012-05-30T18:13:31.930
> 
> 标签：git, svn, git-svn

我有一个 git 存储库，其中包含大约 30 个修订版，我想将其导入现有的 SVN 存储库。不幸的是，SVN 存储库有一堆预提交挂钩，需要提交消息中的某些信息、某些文件类型中的某些 SVN 关键字等等。这些都与我正在检查的内容无关，或者无论如何，它们不如保留现有的修订历史重要。

在一个完美的世界里，我也许可以做这样的事情：

1.  劫持第一个 git 修订版（以及任何其他引入新文件的修订版），使其包含必要的 SVN 关键字并设置相应的 svn:keywords 属性
2.  批量编辑所有 30 条 git 提交消息以添加所需的提交消息字符串

在一个不太完美的世界里，我可以让 git-svn 以某种方式预先添加 skip-pre-commit-checks （？ - 我以前从未使用过它），然后我至少会在那里拥有所有的修订历史.

想法？

* * *

**更新添加：** skip-pre-commit-checks 实际上不是一件事；我被特定项目中的特定黑客误导了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T22:40:50.713

你有几个选择。

## 批量重写提交消息

你可以使用[git filter branch](http://www.kernel.org/pub/software/scm/git/docs/v1.7.3/git-filter-branch.html)来重写你的提交信息：

> 如果您需要将 Acked-by 行添加到最后 10 次提交（都不是合并），请使用以下命令：

```
git filter-branch --msg-filter '
    cat &&
    echo "Acked-by: Bugs Bunny <bunny@bugzilla.org>"
' HEAD~10..HEAD 
```

## 手动编辑 30 条提交消息

您可以通过选择编辑模式[git rebase interactive](http://git-scm.com/book/en/Git-Tools-Rewriting-History#Changing-Multiple-Commit-Messages)来重写您的提交消息

```
git rebase -i HEAD~30

edit f7f3f6d changed my name a bit
edit 310154e updated README formatting and added blame
edit a5f4a0d added cat-file
... 
```

然后

```
git commit -v --amend
<editor launched, edit commit message>
git rebase --continue
git commit -v --amend
<editor launched, edit commit message>
git rebase --continue
git commit -v --amend
<editor launched, edit commit message>
git rebase --continue
.... 
```

## 将所有内容压缩为一次提交

您还可以使用 git rebase 将所有内容压缩到一个提交中，从而限制您的工作量

```
git rebase -i HEAD~30

pick f7f3f6d changed my name a bit
squash 310154e updated README formatting and added blame
squash a5f4a0d added cat-file
...

<editor launched, edit the combined commit message> 
```

## 主动自动化

如果这是您可能需要定期执行的操作，您可以使用[prepare commit mesg](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)挂钩为您的提交消息的格式添加一些一致性。

请注意，与 git 不同，您不能跳过 svn 中的预提交钩子（至少不能通过任何内置机制），因此尝试执行类似的操作`git commit -va --no-verify`将无效，因为下次运行时`git svn dcommit`，它将失败所有相同（当然，如果有什么事情要失败的话）。

# wpf - 如何在代码隐藏中的 DataGrid 内设置文本换行？

> ID：10821921
> 
> 赞同：0
> 
> 时间：2012-05-30T18:13:36.650
> 
> 标签：wpf, vb.net, datagrid, wpfdatagrid, controltemplate

我在带有 WPF 的 VB.Net 中工作，我需要在运行时（在代码隐藏中）创建一个 DataGrid，每个网格单元格中的文本都可以换行。我找到了很多示例来说明如何在 XML 中执行此操作，但我找不到任何解释如何在代码隐藏中完成此操作的内容。我一直试图弄清楚 DataGridTemplateColumn、CellTemplate 和 DataTemplate 是如何一起工作的。对此的任何帮助将不胜感激。

我认为这相当于我正在尝试做的事情：

```
<DataGridTemplateColumn>
 <DataGridTemplateColumn.CellTemplate>
  <DataTemplate>
   <TextBlock TextWrapping="Wrap" />
  </DataTemplate>
 </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

**更新：**

我已经取得了一些进展，但单元格文本换行仍然无法正常工作......这是我到目前为止所得到的：

```
Dim grid As New DataGrid
grid.AutoGenerateColumns = False

Dim dgtc As New DataGridTemplateColumn
dgtc.Header = "Test"
dgtc.Width = 200

Dim factory1 As New FrameworkElementFactory(GetType(TextBlock))

Dim b1 As New Binding("WrapDirection.Right")

factory1.SetValue(TextBlock.TextWrappingProperty, b1)

Dim dt As New DataTemplate

dt.VisualTree = factory1

dgtc.CellTemplate = dt

grid.Columns.Add(dgtc) 
```

我认为问题在于绑定和 textblock 属性。这样的事情会更有意义，但它不起作用......

```
Dim b1 As New Binding("Wrap")

factory1.SetValue(TextBlock.TextWrapping, b1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:27:17.253

所以我终于能够找到我正在寻找的东西：[http ://social.msdn.microsoft.com/Forums/br/wpf/thread/bf75f61a-6247-4964-95be-7ea6f0fa0998](http://social.msdn.microsoft.com/Forums/br/wpf/thread/bf75f61a-6247-4964-95be-7ea6f0fa0998)

使用它作为参考，我终于能够让一些代码工作：

```
Dim grid As New DataGrid
grid.AutoGenerateColumns = False

Dim dgtextcol As New DataGridTextColumn
dgtextcol.Width = 200

dgtextcol.Header = "Test"

Dim b1 = New Binding("Message")
b1.Mode = BindingMode.OneWay

dgtextcol.Binding = b1

Dim textStyle = New Style(GetType(TextBlock))
textStyle.Setters.Add(New Setter(TextBlock.TextWrappingProperty, TextWrapping.Wrap))

dgtextcol.ElementStyle = textStyle

grid.Columns.Add(dgtextcol) 
```

# php - PHP - MYSQL 到 ClientDataSet

> ID：10821922
> 
> 赞同：4
> 
> 时间：2012-05-30T18:13:36.670
> 
> 标签：php, mysql, database, delphi, tclientdataset

我对 Delphi / ClientDataSets 了解不多，但我愿意研究它。不过，在我追求它之前，我有一个问题，以确定我想要实现的目标是否可行。

我想使用 PHP 脚本每周一次将我的 MYSQL 数据库的十几个子集保存到 CDS 文件中。是否有我可以遵循的文件规范来创建 CDS 文件？我将在使用 Linux 的共享 Web 主机上运行脚本，所以我认为在服务器上运行 Delphi 脚本是不可行的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:19:06.453

Stackoverflow 上有一个相关问题，其中包括**部分 XSD**：

[任何拥有描述 Delphi TClientDataSet XML 文件的 METADATA 部分的部分 XSD 的人？](https://stackoverflow.com/questions/492198/anyone-that-has-a-partial-xsd-that-describes-the-metadata-section-of-delphi-tcli)

您可以使用此 XSD 和 XML 库从您的数据创建与 TCLientDataSet 兼容的 XML 文件，以便可以在 Delphi 应用程序中打开它们。

我不知道 PHP XML 库，但在许多语言中，XML 库都能够创建基于 XSD 的映射代码，然后可用于基于架构定义读取和写入 XML 文件。

# asp.net-mvc-3 - StackID API 问题

> ID：10821926
> 
> 赞同：0
> 
> 时间：2012-05-30T18:13:42.480
> 
> 标签：asp.net-mvc-3, openid

我从以下链接[http://code.google.com/p/stackid/source/checkout下载了 StackID api](http://code.google.com/p/stackid/source/checkout)

我按照自述文件中的说明进行操作，但仍然遇到异常。

站点在 Current.cs 文件中的这一行崩溃

```
 private static string SiteWideSalt { get { return KeyStore.GetKey(KeyStore.LatestKeyVersion).Salt; } } 
```

我收到的错误是：

> 'OpenIdProvider.Helpers.KeyStore' 的类型初始化程序引发了异常。
> 
> {“将值 1 转换为类型 'OpenIdProvider.Helpers.KeyStore+Key' 时出错。”} <--这是内部异常中的内容，这对我来说没有意义，因为值的属性是字节，最后我检查了这应该适用于数字 1。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:22:17.300

我在那里也遇到了一些问题。

将密钥生成文件的内容放在方括号“[]”中以使其成为 JSON 数组后，我不得不重新启动 IIS，它现在可以正常工作了。

# dynamic - Erlang 动态记录编辑

> ID：10821930
> 
> 赞同：4
> 
> 时间：2012-05-30T18:14:03.750
> 
> 标签：dynamic, erlang, record

我将一些数据存储在 中`mnesia`，并且我希望能够更改所涉及的大部分值。

天真的

```
change(RecordId, Slot, NewValue) ->
    [Rec] = do(qlc:q([X || X <- mnesia:table(rec), X#rec.id =:= RecordId])),
    NewRec = Rec#rec{Slot=NewValue},
    F = fun() -> mnesia:write(NewRec) end,
    {atomic, Val} = mnesia:transaction(F),
    Val. 
```

不这样做；编译器抱怨这`Slot`不是`atom`or `_`。有没有办法像上面那样表达一个通用的插槽编辑功能，还是我会被困在定义一大堆`change_slot`s ？

一个稍微好一点的方法是拔出`insert`和`find`碎片

```
atomic_insert(Rec) ->
    F = fun() -> mnesia:write(Rec) end,
    {atomic, Val} = mnesia:transaction(F),
    Val.

find(RecordId) -> 
    [Rec] = do(qlc:q([X || X <- mnesia:table(rec), X#rec.id =:= RecordId])),
    Rec.

change(RecordId, name, NewValue) ->
    Rec = find(RecordId),
    NewRec = Rec#rec{name=NewValue},
    atomic_insert(NewRec);
change(RecordId, some_other_property, NewValue) ->
    Rec = find(RecordId),
    NewRec = Rec#rec{some_other_property=NewValue},
    ... 
```

但是那里仍然有一些代码重复。有没有办法抽象出这种模式？是否存在允许编辑记录的既定技术？一般有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T21:04:24.077

由于记录由元组表示，您可以尝试使用元组操作来设置单个值。

```
-module(rec).
-export([field_num/1, make_rec/0, set_field/3]).
-record(rec, {slot1, slot2, slot3}).

make_rec() ->
  #rec{slot1=1, slot2=2, slot3=3}.

field_num(Field) ->
  Fields = record_info(fields, rec),
  DifField = fun (FieldName) -> Field /= FieldName end,
  case length(lists:takewhile(DifField, Fields)) of
    Length when Length =:= length(Fields) ->
      {error, not_found};
    Length ->
      Length + 2
  end.

set_field(Field, Value, Record) ->
  setelement(field_num(Field), Record, Value). 
```

set_field 将返回一条更新的记录：

```
Eshell V5.9.1  (abort with ^G)
1> c(rec).
{ok,rec}
2> A = rec:make_rec().
{rec,1,2,3}
3> B = rec:set_field(slot3, other_value, A).
{rec,1,2,other_value} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T05:03:32.377

您还可以定义`change`为宏（特别是如果它仅在模块内部使用）：

```
-define(change(RecordId, Slot, NewValue),
        begin
            [Rec] = do(qlc:q([X || X <- mnesia:table(rec), X#rec.id =:= RecordId])),
            NewRec = Rec#rec{Slot=NewValue},
            F = fun() -> mnesia:write(NewRec) end,
            {atomic, Val} = mnesia:transaction(F),
            Val
        end). 
```

用法：

```
test(R, Id) ->
    ?change(Id, name, 5). 
```

使用宏，您也可以`_`作为字段传递（适合模式匹配）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T11:50:09.733

使用该记录的另一种方法实际上是一个元组是：

```
change(RecordId, Index, NewValue) ->
    [Rec] = do(qlc:q([X || X <- mnesia:table(rec), X#rec.id =:= RecordId])),
    NewRec = setelement(Index, Rec, NewValue),
    F = fun() -> mnesia:write(NewRec) end,
    {atomic, Val} = mnesia:transaction(F),
    Val. 
```

你可以这样使用：

```
5> Val = record:change(id58, #rec.name, new_value). 
```

这也是将记录作为元组的“干净”使用，因为您使用`#rec.name`语法来查找元组中字段的索引。这就是添加此语法的原因。

# php - 使用反引号（重音符号）时字符串操作的规则是什么？

> ID：10821933
> 
> 赞同：8
> 
> 时间：2012-05-30T18:14:08.070
> 
> 标签：php, string, shell, backticks

在 PHP 中，当您编写一个等于用重音符包裹的字符串的变量集时，它会像在`shell_exec()`命令中一样被执行。[PHP 中的重音符号 (`)（不是单引号）代表什么？](https://stackoverflow.com/q/6071562/680578)

所以，在 php 中你可以做各种各样的事情来将字符串与变量等结合起来，当使用 ` 而不是 ' 或 " 时我能做什么和不能做什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T18:46:39.993

在 PHP 中，该字符称为反引号运算符。

用反引号括起来的文字字符串是一个`T_ENCAPSED_AND_WHITESPACE`标记。您可以通过运行以下命令来确认这一点：

```
print_r(token_get_all('<?php `uname`;')); 
```

这给了你这个：

```
Array
(
    [0] => Array
        (
            [0] => 367
            [1] => <?php 
            [2] => 1
        )

    [1] => `
    [2] => Array
        (
            [0] => 313
            [1] => uname
            [2] => 1
        )

    [3] => `
    [4] => ;
) 
```

然后运行`token_name(313)`它给你`T_ENCAPSED_AND_WHITESPACE`。

对于解析器来说，用反引号包裹的字符串等价于[包含变量的字符串，](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)例如`"hello $world"`. `hello`字符串（部分）的文字/常量部分是`T_ENCAPSED_AND_WHITESPACE`.

因此，要回答您的问题，您可以对包含变量的字符串执行任何操作，您可以对包含在反引号中的字符串执行任何操作。

那为什么`T_ENCAPSED_AND_WHITESPACE`？可能是因为就像包含变量的字符串一样，它的值是在运行时确定的。而 a `T_CONSTANT_ENCAPSED_STRING`（一个普通的文字字符串）在解析器的眼中有点像一个常量。

# c# - 如何读取 Excel 的特定列并更新相关值

> ID：10821937
> 
> 赞同：0
> 
> 时间：2012-05-30T18:14:17.433
> 
> 标签：c#, c#-4.0

您能否让我知道如何使用 C# 根据列标题读取特定列值？

例如，假设我有一个标题为“page”的列，我如何循环到该列并更新与乱码值相关的特定行的值。我想要做的是在“page”列中循环并找到所有年龄超过 50 岁的人，然后将其他列“Eligible”中这些行的值更改为“yes” ![在此处输入图像描述](../Images/a79488f05defc5c763522634d03d5f6c.png)

我想使用列标题而不是列范围的原因是因为我从我们的客户那里获得了一些数据，这些数据不一定是相同的顺序，但它们总是具有相同的名称。

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:22:28.043

尝试使用这个 linq to ecxel 库它应该可以帮助你实现你正在寻找的东西

[http://code.google.com/p/linqtoexcel/](http://code.google.com/p/linqtoexcel/)

# objective-c - 视网膜显示的位图字体

> ID：10821938
> 
> 赞同：1
> 
> 时间：2012-05-30T18:14:22.863
> 
> 标签：objective-c, ios, fonts, cocos2d-iphone

现在，我有几个字体：HoboStd20.fnt 指向 HoboStd20.png 和 Teen40.fnt 指向 Teen40.png
但是，我需要视网膜显示字体。如何将这些位图字体插入应用程序？我是否需要创建两倍于原始字体大小的字体？我应该如何命名字体？我是否像这样重命名 png 和 fnt 文件：HoboStd20-hd.fnt？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T21:30:45.280

基本例程是以标清或高清分辨率设计位图字体。然后以两倍或一半的字体大小重新导出相同的字体。

例如，当我使用 Glyph Designer（强烈推荐）设计字体时，我首先创建 Retina 字体并将其保存为 font-hd.fnt。假设它的字体大小为 40 磅。接下来我将字体大小设置为 20，并将文件重新导出为 font.fnt。

在 cocos2d 中，您只引用 font.fnt 文件。它将自动在 Retina 设备上加载 font-hd.fnt 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:26:02.033

听起来您正在使用[Angelcode 的 BMFont](http://www.angelcode.com/products/bmfont/)来生成字体（是吗？）。

您是对这些字体使用经过 alpha 测试的边缘还是使用基于[距离场](http://bitsquid.blogspot.com/2010/04/distance-field-based-rendering-of.html)的渲染方案？

[这篇](http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf)名为“矢量纹理和特殊效果的 Alpha 测试放大率”的论文可能会帮助您获得可接受的质量，而不必将字体/纹理的大小加倍。

也就是说，如果您使用 BMFont（并且可以编写着色器来解压缩像素数据） - 也可以使用每页一位或每页一个通道来打包多个页面。这个 + alpha 测试 + 距离字段应该为您提供像素完美的文本质量。

# asp.net-mvc-3 - MVC3 可选双向关系代码优先

> ID：10821939
> 
> 赞同：0
> 
> 时间：2012-05-30T18:14:25.993
> 
> 标签：asp.net-mvc-3, model-view-controller, ef-code-first, bidirectional-relation

我所拥有的是类似的

```
public class BuildingUnit
{
    public int ID { get; set; }
    *irrelevant stuff removed*
    public virtual BuildingUnitInsurance UnitInsurance { get; set; }
}

public class BuildingUnitInsurance
{
    public int ID { get; set; }
    *irrelevant stuff removed*
    public virtual BuildingUnit BuildingUnit { get; set; }
} 
```

我想要做的是从 BuildingUnit 到 BuildingUnitInsurance 的关系是可选的，但如果它确实存在，那么从 BuildingUnitInsurance 到 BuildingUnit 的关系必须存在。我用注释和流利的 api 尝试了一大堆东西，但我还没有真正得到任何地方。

这里的实际业务案例是有一个显示来自 BuildingUnit 类的信息的视图，然后在该页面上可以单击一个按钮并弹出一个模式以添加保险信息。单击该模式上的“添加保险”按钮会将保险信息发布到控制器，此时应该保存它，并且应该在 BuildingUnit 和 BuildingUnitInsurance 之间创建关系。对控制器代码的任何帮助也会很棒，因为我真的不知道我必须在那里做什么才能使这些关系发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:12:19.843

BuildingUnit 需要一对零或一关系，而 BuildingUnitInsurance 需要一对一关系。下面的代码应该对您有所帮助，如果没有阅读更多关于[配置关系](http://msdn.microsoft.com/en-us/library/hh295843%28v=vs.103%29.aspx)的信息。

```
public class BuildingUnit
{
    [Key]
    public int ID { get; set; }

    [ForeignKey("UnitInsurance")]
    public virtual int? UnitInsuranceId { get; set; }

    public virtual BuildingUnitInsurance UnitInsurance { get; set; }
}

public class BuildingUnitInsurance
{
    [Key]
    public int ID { get; set; }

    [Required]
    [ForeignKey("BuildingUnit")]
    public virtual int BuildingUnitId { get; set; }

    public virtual BuildingUnit BuildingUnit { get; set; }
} 
```

然后在您的 OnModelCreating 处理程序中：

```
modelBuilder.Entity<BuildingUnit>.HasOptional(x => x.UnitInsurance).WithRequired();
modelBuilder.Entity<BuildingUnitInsurance>.HasRequired(x => x.BuildingUnit).WithOptional(); 
```

# file - 使用批处理文件删除文件夹中的pdf文件

> ID：10821944
> 
> 赞同：1
> 
> 时间：2012-05-30T18:14:54.427
> 
> 标签：file, batch-file, command, dos

我想运行一个批处理（.bat 包含 DOS 命令），通过删除仍然存在的任何 pdf 来清理我的文件夹。你是怎样做的 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:18:29.257

```
del *.pdf /q 
```

解释：

```
del   -- Dos command to delete files

*.pdf -- all files with the .PDF extension in the current directory

/q    -- Don't ask for confirmation. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T18:17:19.190

假设只有一个目录（没有子目录）：del *.pdf

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:19:14.857

[http://ss64.com/nt/](http://ss64.com/nt/)

使用 /q 和 DEL 命令。

# android - 使用 ORMLite 查询构建器执行自定义查询

> ID：10821952
> 
> 赞同：0
> 
> 时间：2012-05-30T18:15:16.807
> 
> 标签：android, ormlite, query-builder

我阅读了有关 orm lite 的所有文档，也在网上查看但没有找到正确的答案。我想执行这个语句：

```
SELECT * from Drive where day_number=150; 
```

我有代表表的类：

```
@DatabaseTable(tableName="Drive")
public class Drive{

    @DatabaseField(generatedId=true)
    private int drive_id;

    @DatabaseField
    private String start_time;

    @DatabaseField
    private String end_time;

    @DatabaseField
    private String price;

    @DatabaseField
    private String distance;

    @DatabaseField
    private String day_number;

    @DatabaseField
    private String week_number;

    @DatabaseField
    private String month;

    getters and setters ...
} 
```

当我运行时：

```
List<Drive> today = getHelper().getVoznjaDao().queryBuilder().where().
        eq("day_number","150").query(); 
```

我明白`NullPointerExeption`了，这不是因为数据库中没有 150 的记录。请帮助我绝望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:40:19.667

就查询构建器逻辑而言，您的代码看起来不错。但是，我怀疑与您的接线有关的事情不正确。在您的评论中，您提到 NPE 发生在查询行上。

```
List<Drive> today = getHelper().getVoznjaDao().queryBuilder().where().
    eq("day_number","150").query(); 
```

这很可能意味着：

*   `getHelper()`正在返回一个`null`帮助程序实例
*   `getVoznjaDao()`正在返回一个`null`DAO
*   [或者ORMLite](http://ormlite.com/)中存在错误

`today`being`null`不会导致 NPE，因为它没有被取消引用。当然，ORMLite 中的错误不是不可能的，但我会首先使用调试器检查`getHelper()`or`getVoznjaDao()`调用是否正在返回`null`。我怀疑你会在那时找到错误。

# javascript - iframe onclick 在 Firefox 和 Opera 中不起作用

> ID：10821957
> 
> 赞同：0
> 
> 时间：2012-05-30T18:15:37.073
> 
> 标签：javascript, iframe

我正在尝试使用下面的 JavaScript 和 HTML 代码将 onclick 事件附加到处于可编辑模式的 iframe。该代码在 IE8、Safari 和 Chrome 中运行良好，但在 Firefox 或 Opera 中无法运行。我花了几个小时做一些研究，重写代码，测试我能想到的每一个想法，但都没有成功。到目前为止，我只能确定第 8 行可能是我问题的根源。谁能告诉我我可能做错了什么并提供任何提示或代码示例来帮助解决我的问题？任何帮助，将不胜感激。

这是我的代码；

```
<html>
<head>
<script type="text/javascript">
    function iFrameOn(){
        document.getElementById("wysiwyg").contentWindow.document.designMode = 'On';
    }
    function iFrameEvent(){
        document.getElementById("wysiwyg").contentWindow.document.body.onclick = function(){
            alert('Hello world!');
        }
    }
</script>
</head>
<body onload="iFrameOn()">
<iframe name="wysiwyg" id="wysiwyg" onload="iFrameEvent()"></iframe>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:20:52.593

我相信这`contentWindow`是 IE 最初实现的一个属性，其他浏览器可能在某个时候已经开始支持，但我相信标准是`contentDocument`.

这里有人发布了一个跨浏览器的解决方案：

[Chrome：获取 iFrame 并插入正文](https://stackoverflow.com/a/5002576/202105)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:26:24.190

您必须使用`contentWindow`并`contentDocument`支持所有浏览器：

```
var frame = document.getElementById('wysiwyg');
if(frame.contentWindow) {
    //
} else if(frame.contentDocument) {
    //
} 
```

# java - 从另一个线程调用 runOnUiThread

> ID：10821959
> 
> 赞同：0
> 
> 时间：2012-05-30T18:15:48.747
> 
> 标签：java, android, multithreading

我需要等待一段时间（10 秒），然后我必须重绘画布。我使用[Handler#postDelayed](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)测量时间段。我的代码（只是部分）：

```
handler.postDelayed(updates, 10000);

private Runnable updates = new Runnable() {
    public void run() {
        methodToRedraw();
    }
};

public void methodToRedraw(){
runOnUiThread(new Runnable() {
    public void run() {
       // redraw canvas
    }
 });
} 
```

不幸的是，我不知道这是否正确，但这是我唯一的解决方案。也许有人可以提供帮助或知道更好的解决方案。我会很感激的。

PS。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-30T19:05:41.603

您也可以使用 AsyncTask。让Android处理线程创建...

```
protected Long doInBackground(URL... urls){Thread.sleep(10000);}
protected void onPostExecute(Long result) {methodToRedraw();} 
```

# android - android在没有MediaScannerConnection的画廊中打开文件

> ID：10821961
> 
> 赞同：0
> 
> 时间：2012-05-30T18:15:59.827
> 
> 标签：android, image-gallery

您好，我正在使用此代码（[https://stackoverflow.com/a/6772455/579646](https://stackoverflow.com/a/6772455/579646)）在图库中打开图像，但在**android 2.2 和 2.3**上它显示我 Toast 说“正在搜索新图像和专辑...... “然后在大约 10 秒的空白屏幕后，它终于显示了我的图像。另外，如果我更改图像但保留相同的文件名，画廊缓存会启动（或类似的东西），我会在缩小时看到旧图像，在放大时看到新图片。唯一的解决方法是每次都使用随机名称。

如果我使用此链接[https://stackoverflow.com/a/5814533/579646](https://stackoverflow.com/a/5814533/579646)，它会打开得更快，但随后我会侵入图库并向其中添加一个文件夹。有没有办法在用户关闭图库后删除文件夹？

我怎样才能让画廊只打开一个图像**而不扫描东西**并且**不通过 mediascanner 向画廊添加一些文件夹**？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:36:02.177

您最好的选择是创建自己的 Activity 以在您的应用程序中显示图像（[对这个问题的回答应该会有所帮助](https://stackoverflow.com/questions/2169649/open-an-image-in-androids-built-in-gallery-app-programmatically)）。然后，您可以完全控制它所做的操作。创建一个简单的活动，它获取图像的路径并简单地打开该路径并以全屏显示图像`ImageView`。

我这样说是因为您无法在 Gallery 打开时更新其缓存 - 一旦您移动到不同的活动，您的应用程序就没有任何影响。并且`ACTION_VIEW`是打开图像的正确意图，但请记住，用户可能没有标准图库作为它的默认活动。如果他们有不同的默认值，体验可能不会那么糟糕。

# javascript - javascript重新定义一个变量

> ID：10821963
> 
> 赞同：1
> 
> 时间：2012-05-30T18:16:08.913
> 
> 标签：javascript

我被困在某个地方（就像新手一样）。是否可以在对变量进行修剪和内容测试后重新定义它？

```
 function setarea() {

        var dbasedata = document.forms[0]._dbase_name.value;
            dbasedata = dbasedata.toUpperCase();
            dbasedata = dbasedata.replace(/\s/g, "");
            dbasedata = dbasedata.remove("UK_CONTACTS", "");

        if (dbasedata != "") {
            _area.value = _dbase_name.value;
        } 

   else var dbasedata = document.forms[0]._dbase_name.value;
            dbasedata = dbasedata.toUpperCase();
            dbasedata = dbasedata.replace(/\s/g, "");

        if (dbasedata.indexOf("UK_CONTACTS")>-1 {
        var dbaseterm = "UK_CONTACTS";
   else var dbaseterm = "";     
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:20:37.157

`var`对同一范围内的同一变量多次使用是没有意义的。由于所有变量都`var x;`被提升到范围的顶部，因此`var`该变量上的每个附加项都将是空操作。

不过，分配一个新值很好——它们毕竟是变量而不是常量。

```
function x() {
    var x = 123;
    foo();
    x = 456;
    var y = 'hello';
    var x = 678;
} 
```

内部实际上是这样的：

```
function x() {
    var x, y; // both are === undefined
    x = 123;
    foo();
    x = 456;
    y = 'hello';
    x = 678;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:18:56.760

是的，您可以这样做，而且是合法的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:23:35.597

它可能“有效”，但不推荐。你不需要重新声明它。

可能想通过[JSLint](http://jslint.com)运行您的代码。您需要解决一些整洁/支撑问题。

# php - SVN 创建新分支 - 旧代码

> ID：10821966
> 
> 赞同：0
> 
> 时间：2012-05-30T18:16:34.120
> 
> 标签：php, svn

我必须在旧代码上开发新版本，但是在提交后我需要访问旧版本。有没有办法在 SVN 中处理它？

几乎每个文件都有巨大的变化。我正在考虑创建一个新的存储库并在那里导入新版本。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:18:27.977

只需创建一个分支：[http](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.html) ://svnbook.red-bean.com/en/1.7/svn.branchmerge.html 。

# python - 如果语句在 Python 中不起作用

> ID：10821969
> 
> 赞同：-2
> 
> 时间：2012-05-30T18:16:46.977
> 
> 标签：python, encoding, module, html-parsing

我尝试编写一个脚本来抓取我的网站。
但我在“if 语句”处坚持第 15 行；它不做比较。
我认为这是一个编码问题，或者包含其他字符。我猜。
文档编码为 ANSI，网站为 ISO-8859-15。

**HParser.py：**

```
from HTMLParser import HTMLParser
from htmlentitydefs import name2codepoint
import urllib2

url = 'http://DOMAIN.TLD'
req = urllib2.Request(url)
response = urllib2.urlopen(req)
the_page = response.read()

class MyHTMLParser(HTMLParser):
    def handle_starttag(self, tag, attrs):
        tag = unicode(tag)
        tag = tag.strip()
        print "'",tag,"'"
        if tag == 'a':
            for attr in attrs:
                if 'src' == attr[0]:
                    print 'Link: ', attr[1]

    def handle_endtag(self, tag):
        pass

    def handle_data(self, data):
        pass

    def handle_comment(self, data):
        pass

    def handle_entityref(self, name):
        pass

    def handle_charref(self, name):
        pass

    def handle_decl(self, data):
        pass

parser = MyHTMLParser()
parser.feed(the_page) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:35:55.877

我使用stackoverflow主页作为url测试了你的代码。这是我发现的：

1)`tag == 'a'`当它是 'a' 时正确地评估为 True。

2) attr 按您的预期打印出元组。例如：

```
('href', 'http://creativecommons.org/licenses/by-sa/3.0/')
('class', 'cc-wiki-link') 
```

所以我认为这意味着你永远不会有任何第一个元素为 'src' 的元组。当我解析主 stackoverflow 页面时，我也没有得到任何 attr[0] 为 'src' 的元组 attr。

简而言之，问题在于第 18 行的 if 条件。

现在，我不太了解 html，无法知道 'src' 属性是否与`<a>`标签一起使用，但我通常会看到带有标签的 'src' 和带有`<img>`标签的 'href' `<a>`。因此，您可能希望将第 18 行更改为 if `attr[0] == 'href'`。

# c# - 有状态的 Winform 和取消按钮

> ID：10821971
> 
> 赞同：2
> 
> 时间：2012-05-30T18:16:58.273
> 
> 标签：c#, .net, winforms, cancel-button

随着表单/对话框底部的“确定”和“取消”按钮的普遍存在，我很奇怪我似乎无法找到保存控制状态的“标准”方式。

例如，我有一个选中的过滤器列表框。当用户单击“确定”按钮时，它将过滤器应用于数据集并关闭表单。如果用户单击取消按钮，表单将撤消所有选中项的更改并关闭表单。

在理想情况下，当用户单击“确定”按钮时，保存的控件状态将被当前控件状态覆盖并设置新状态标志。当窗体正在关闭时，如果设置了新状态标志，则窗体将重置该标志，如果未设置，则窗体将显示的控件替换为保存的控件状态。这样，如果点击取消按钮，用户所做的所有检查更改都会被重置。

处理取消按钮以撤消对控件甚至整个表单的更改的最佳实践方法是什么？有最佳实践解决方案吗？我可以看到这对于文本框、单选按钮、复选框和几乎每个控件都是必需的，因此请尽量保持其通用性，而不是特定于选中的列表框。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T18:19:40.160

我建议它很简单：

*   将 UI 中反映的数据与 UI 本身分开
*   加载表单时，根据数据设置其内容
*   当用户单击确定时，保存对数据模型的更改（无论如何实现，这将取决于您如何填充模型）
*   当用户单击取消时，*不*保存任何更改

无需“撤消”取消上的更改 - 您只需丢弃表单。当您接下来要显示表单时，将加载与以前相同的数据，因为您没有保存对它的任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:19:25.580

最简单的方法：不要重复使用表单实例。`var childForm = new MyChildForm();`在每个之前做`childForm.Show();`

# payment-gateway - DPS 支付网关是标准术语吗

> ID：10821973
> 
> 赞同：0
> 
> 时间：2012-05-30T18:17:11.547
> 
> 标签：payment-gateway, moodle

我要在moodle，LMS上设置一个网关，我看到了一个插件DPS支付网关。我对支付网关知之甚少。我将与一些银行支付网关进行协调，但我可以使用此 DPS 支付网关插件设置/集成它们吗？DPS 支付网关是标准术语吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:23:55.390

它指的是[http://www.paymentexpress.com](http://www.paymentexpress.com)（又名 DPS）提供的这项服务

# php - 如何使 geoip_country_name_by_name() 工作？

> ID：10821974
> 
> 赞同：4
> 
> 时间：2012-05-30T18:17:14.463
> 
> 标签：php, geoip

我想收集登录我网站的用户的国家名称。所以我用

`geoip_country_name_by_name()`用于此目的的 php 函数。

但是我遇到了一个致命错误：

```
Fatal error: Call to undefined function geoip_country_name_by_name() 
```

我怎样才能避免这个错误？

有没有其他方法可以使用 php 获取国家名称？

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:25:19.430

你需要 PECL 扩展，看看这里[http://www.php.net/manual/en/geoip.installation.php](http://www.php.net/manual/en/geoip.installation.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T18:25:29.867

听起来扩展程序未安装在您的计算机上。看看这个链接，它是一个 PECL 扩展。

[http://www.php.net/manual/en/geoip.setup.php](http://www.php.net/manual/en/geoip.setup.php)

# ios - 如何将 sqlite 数据库中的图像显示到 UIImageView

> ID：10821979
> 
> 赞同：1
> 
> 时间：2012-05-30T18:17:36.090
> 
> 标签：ios, database, xcode, image, sqlite

我使用从这里下载的现有项目 [http://www.raywenderlich.com/913/sqlite-101-for-iphone-developers-making-our-app](http://www.raywenderlich.com/913/sqlite-101-for-iphone-developers-making-our-app)

我喜欢在数据库 banklist.sqlite3 中添加一个名为“image1”的新列作为 BLOB，因为我需要在 FailedBanksDetailViewController.xib 中显示图像。

我这样做了：

**FailedBanksDetail.h**

```
#import <Foundation/Foundation.h> 

@interface FailedBankDetails : NSObject {

int _uniqueId;
NSString *_name;
NSString *_city;
NSString *_state;
int _zip;
NSDate *_closeDate;
NSDate *_updatedDate;
NSString *_image1;

}

@property (nonatomic, assign) int uniqueId;
@property (nonatomic, copy) NSString *name;
@property (nonatomic, copy) NSString *city;
@property (nonatomic, copy) NSString *state;
@property (nonatomic, assign) int zip;
@property (nonatomic, retain) NSDate *closeDate;
@property (nonatomic, retain) NSDate *updatedDate;
@property (nonatomic, copy) NSString *image1;

- (id)initWithUniqueId:(int)uniqueId name:(NSString *)name city:(NSString *)city 
state:(NSString *)state zip:(int)zip closeDate:(NSDate *)closeDate 
updatedDate:(NSDate *)updatedDate image1:(NSString *)image1;

@end 
```

**FailedBanksDetail.m**

```
#import "FailedBankDetails.h"

@implementation FailedBankDetails
@synthesize uniqueId = _uniqueId;
@synthesize name = _name;
@synthesize city = _city;
@synthesize state = _state;
@synthesize zip = _zip;
@synthesize closeDate = _closeDate;
@synthesize updatedDate = _updatedDate;
@synthesize image1 = _image1;

- (id)initWithUniqueId:(int)uniqueId name:(NSString *)name 
city:(NSString *)city state:(NSString *)state zip:(int)zip closeDate:(NSDate *)closeDate 
updatedDate:(NSDate *)updatedDate image1:(NSString *)image1 {
if ((self = [super init])) {
    self.uniqueId = uniqueId;
    self.name = name;
    self.city = city;
    self.state = state;
    self.zip = zip;
    self.closeDate = closeDate;
    self.updatedDate = updatedDate;
    self.image1 = image1;
}
return self;
}

- (void) dealloc
{
self.name = nil;
self.city = nil;
self.state = nil;
self.closeDate = nil;
self.updatedDate = nil;
self.image1 = nil;
[super dealloc];
}

@end 
```

**FailedBankDetailViewController.h**

```
#import <UIKit/UIKit.h>

@interface FailedBanksDetailViewController : UIViewController {
UILabel *_nameLabel;
UILabel *_cityLabel;
UILabel *_stateLabel;
UILabel *_zipLabel;
UILabel *_closedLabel;
UILabel *_updatedLabel;
int _uniqueId;
UIImageView *_image1View;
}

@property (nonatomic, retain) IBOutlet UILabel *nameLabel;
@property (nonatomic, retain) IBOutlet UILabel *cityLabel;
@property (nonatomic, retain) IBOutlet UILabel *stateLabel;
@property (nonatomic, retain) IBOutlet UILabel *zipLabel;
@property (nonatomic, retain) IBOutlet UILabel *closedLabel;
@property (nonatomic, retain) IBOutlet UILabel *updatedLabel;
@property (nonatomic, assign) int uniqueId;
@property (nonatomic, retain) IBOutlet UIImageView *image1View;

@end 
```

**FailedBankDetailViewController.m**

```
// In the #import section
#import "FailedBankDatabase.h"
#import "FailedBankDetails.h"

// In the @implementation section
@synthesize nameLabel = _nameLabel;
@synthesize cityLabel = _cityLabel;
@synthesize stateLabel = _stateLabel;
@synthesize zipLabel = _zipLabel;
@synthesize closedLabel = _closedLabel;
@synthesize updatedLabel = _updatedLabel;
@synthesize uniqueId = _uniqueId;
@synthesize image1View = _image1View;

// In the dealloc section AND the viewDidUnload section
self.nameLabel = nil;
self.cityLabel = nil;
self.stateLabel = nil;
self.zipLabel = nil;
self.closedLabel = nil;
self.updatedLabel = nil;
self.image1View = nil;

//In the viewWillAppear method
- (void)viewWillAppear:(BOOL)animated {
FailedBankDetails *details = [[FailedBankDatabase database] 
    failedBankDetails:_uniqueId];
if (details != nil) {
    [_nameLabel setText:details.name];
    [_cityLabel setText:details.city];
    [_stateLabel setText:details.state];
    [_zipLabel setText:[NSString stringWithFormat:@"%d", details.name]];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"MMMM dd, yyyy"];
    [_closedLabel setText:[formatter stringFromDate:details.closeDate]];
    [_updatedLabel setText:[formatter stringFromDate:details.updatedDate]];
    [_image1View "I DONT KNOW WHAT TO DO HERE"

}
} 
```

**FailedBankDatabase.m**

```
// In the #import section
#import "FailedBankDetails.h"

// Anywhere inside the @implementation
- (FailedBankDetails *)failedBankDetails:(int)uniqueId {
FailedBankDetails *retval = nil;
NSString *query = [NSString stringWithFormat:@"SELECT id, name, city, state, 
    zip, close_date, updated_date, image1 FROM failed_banks WHERE id=%d", uniqueId];
sqlite3_stmt *statement;
if (sqlite3_prepare_v2(_database, [query UTF8String], -1, &statement, nil) 
    == SQLITE_OK) {
    while (sqlite3_step(statement) == SQLITE_ROW) {
        int uniqueId = sqlite3_column_int(statement, 0);
        char *nameChars = (char *) sqlite3_column_text(statement, 1);
        char *cityChars = (char *) sqlite3_column_text(statement, 2);
        char *stateChars = (char *) sqlite3_column_text(statement, 3);
        int zip = sqlite3_column_int(statement, 4);          
        char *closeDateChars = (char *) sqlite3_column_text(statement, 5);
        char *updatedDateChars = (char *) sqlite3_column_text(statement, 6);
        "I DONT KNOW WHAT TO DO HERE"

        NSString *name = [[NSString alloc] initWithUTF8String:nameChars];
        NSString *city = [[NSString alloc] initWithUTF8String:cityChars];
        NSString *state = [[NSString alloc] initWithUTF8String:stateChars];
        NSString *closeDateString =
            [[NSString alloc] initWithUTF8String:closeDateChars];
        NSString *updatedDateString = 
            [[NSString alloc] initWithUTF8String:updatedDateChars];            
        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
        [formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss"];
        NSDate *closeDate = [formatter dateFromString:closeDateString];
        NSDate *updateDate = [formatter dateFromString:updatedDateString];
        "I DONT KNOW WHAT TO DO HERE"

        retval = [[[FailedBankDetails alloc] initWithUniqueId:uniqueId name:name 
            city:city state:state zip:zip closeDate:closeDate 
            updatedDate:updateDate] autorelease];

        [name release];
        [city release];
        [state release];
        [closeDateString release];
        [updatedDateString release];
        [formatter release];            
        break;            
    }
    sqlite3_finalize(statement);
}
return retval;
} 
```

我对 FailedBanksDetailViewController.xib 没有任何问题，我从库中放置了一个 UIImageView 元素，并将其链接到在 FailedBanksDetailViewController.h 中声明的 image1View。

但我不知道如何设置 FailedBankDatabase.m 和 FailedBankDetailViewController.m。

我需要将图像从 FailedBankDetailViewController 的数据库中显示到 UIImageView 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T23:07:15.203

我认为您想要一个`NSData`对象作为您的图像（例如 via `UIImagePNGRepresentation`），然后使用`sqlite3_column_blob`而不是`sqlite3_column_text`.

# android - 使用 android 开发人员示例“notepadv3”-如何将“body”值添加到 Listview？

> ID：10821980
> 
> 赞同：1
> 
> 时间：2012-05-30T18:17:41.300
> 
> 标签：android, eclipse

我的 notes_row.xml 文件中的代码看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<TextView android:id="@+id/text1" xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:padding="10dp"
android:minWidth="100dp"/>
<TextView android:id="@+id/body" xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:minWidth="100dp"
    android:fontSize="20dp"/> 
```

我收到以下错误根元素后面的文档中的标记必须格式正确。在线`xmlns:android="http://schemas.android.com/apk/res/android"`

我希望有人能够帮助我找到成功。

注意：我在[这里](https://stackoverflow.com/questions/9410267/android-arraylist-listview-textview-you-must-supply-a-resource-id-for-a-textvi)找到了复制到这个问题中的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:00:04.107

我没有测试它，但尝试这种方式：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:orientation="vertical">

    <TextView android:id="@+id/text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="10dp"
        android:minWidth="100dp"/>
    <TextView android:id="@+id/body"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="10dp"
        android:minWidth="100dp"
        android:fontSize="20dp"/>

</LinearLayout> 
```

# jquery - 如何在 jQuery Mobile 中以编程方式切换导航栏选项卡？

> ID：10821984
> 
> 赞同：3
> 
> 时间：2012-05-30T18:17:49.897
> 
> 标签：jquery, jquery-mobile

如何在 jQuery Mobile 中切换导航栏的界面，以便我可以按下 div 中的按钮并显示不同的导航栏？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T22:28:44.737

## jQuery Mobile NAV Toggle 的jsFiddle[演示](http://jsfiddle.net/CrbbU/)

我通过上面的链接创建了一个**jsFiddle 演示**，应该可以解决您的问题。

特别是，您可以轻松**设置 NAV 栏**以及在不同栏**之间切换。**

我说不同的条是因为小提琴允许您需要**更多的 NAV 条**，并且很**容易**适应。可以肯定的是，任何 NAV 条**[都会](http://jquerymobile.com/demos/1.0/docs/toolbars/docs-navbar.html)**在**5 个按钮**处达到最大值。

**编辑：**根据您的消息评论，一旦创建超过 1 个页面，就可以轻松**地在页面之间导航。**这个不同的**[jsFiddle](http://jsfiddle.net/39wFb/)**展示了如何**标记锚标记**以动态切换页面。这**可以**与原始的 jsFiddle Answer 一起使用以提供**完整**的解决方案。

**重新编辑：**根据您最近的评论，这个**新的** [**jsFiddle**](http://jsfiddle.net/pG2ZA/)允许在同一页面上切换按钮内容。

提供简单的**小提琴评论**以了解发生了什么，但询问任何不清楚的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:21:15.387

签出 updatelayout 事件。此事件由框架内动态显示/隐藏内容的组件触发，并作为一种通用机制来通知其他组件它们可能需要更新其大小或位置。来自 jQuery 网站的示例：

```
$( '#foo' ).hide().trigger( 'updatelayout' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T18:19:55.197

这是你想要达到的目标吗？ [http://jsfiddle.net/cHrSN/18/](http://jsfiddle.net/cHrSN/18/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T14:12:09.450

您的选项卡是否必须集成到 JQM urlHistory 或浏览器历史记录中？

如果不是，我将[可折叠集更改为选项卡查看器，因此我没有将可折叠集](http://jquerymobile.com/test/docs/content/content-collapsible-set.html)**从上到下**更改，而是将小部件更改为支持 data-type="horizo​​ntal "，然后**从左到右**显示可折叠，内容部分显示为标签。我还添加了 next-previous 按钮，因此您可以通过单击选项卡按钮或 prev-next 按钮来回切换。

但是，这一切都发生在页面内部，因此不支持浏览器后退按钮。

如果这朝着正确的方向发展，我可以提供一个示例页面和解释。

# javascript - 使用Javascript检测x轴（左右）上的鼠标滚轮

> ID：10821985
> 
> 赞同：19
> 
> 时间：2012-05-30T18:17:49.617
> 
> 标签：javascript, scroll, internet-explorer-9, mousewheel, internet-explorer-10

我知道可以检测到上下，例如

```
 function handle(delta) {
    if (delta < 0) {
        alert('down');
} else {
    alert('up');
    }
}

function wheel(event){
    var delta = 0;
    if (!event) event = window.event;
    if (event.wheelDelta) {
        delta = event.wheelDelta/120; 
    } else if (event.detail) {
        delta = -event.detail/3;
    }
    if (delta)
        handle(delta);
        if (event.preventDefault)
                event.preventDefault();
        event.returnValue = false;
}

/* Initialization code. */
if (window.addEventListener)
    window.addEventListener('DOMMouseScroll', wheel, false);
window.onmousewheel = document.onmousewheel = wheel;​ 
```

但是有没有办法检测用户的鼠标是随着鼠标滚轮向左还是向右？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-12T00:54:23.773

**Internet Explorer**：在 IE9 和 IE10 中，您必须使用`onwheel`事件（不是 onmousewheel，也不是 DOMMouseScroll）`addEventListener`来检测来自 DOM 的水平滚轮滚动。使用该`event.deltaX`值和该`event.deltaMode`值来检测水平鼠标滚轮（对于垂直滚轮，请使用该`event.deltaY`值）。对于 <= IE8，使用`onmousewheel`事件和`event.wheelDelta`（旧 IE 版本仅支持 yaxis 鼠标滚轮）。

**Blink/Webkit**：自 Chrome 31/Safari 7 起支持 onwheel 事件。否则使用`onmousewheel`事件和`event.wheelDeltaX`and`event.wheelDeltaY`属性。Chrome/Safari 唯一的技巧：在鼠标滚轮向左/向右滚动时使用 SHIFT 键（对测试很有用）。

**Firefox**：Firefox 17 及更高版本[支持 onwheel 事件](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/wheel)。要支持旧版本的 Firefox（回到 3.6），请使用现已弃用`DOMMouseScroll`的 event.axis 和 event.detail 属性来支持水平滚动。（Firefox 移动版：文档暗示使用触摸设备进行平移时会触发 onwheel 事件。我没有尝试过。）。Firefox 也有一个`MozMousePixelScroll`事件。MDN 文档还提供了建议的代码来处理跨浏览器的不同事件。Firefox 还有一个 mousewheel.enable_pixel_scrolling 配置，它可能会影响所有不同的滚轮事件。

使用 QuirksMode 的轮子事件测试器[自己尝试 onwheel 事件。](http://www.quirksmode.org/dom/events/tests/scroll.html)我可以看到在 Win7 上使用 IE9 和在 Windows 8 上使用 IE10（发布预览版，IE 版本 10.0.8400.0）。要设置新的标准 onwheel 事件：

*   选择 addEventListener（捕获）收音机。
*   取消勾选滚动。
*   取消鼠标滚轮。
*   让轮子打勾。
*   勾选右栏底部的显示事件属性。
*   使用 F12 并确认文档处于 documentMode IE9 Standards 或 IE10 Standards。
*   在中心列上做一些鼠标滚轮，然后看到滚轮事件记录在左列中，滚轮事件详细信息显示在右列的底部。
*   有时您可能需要取消勾选并重新勾选滚轮事件复选框以获取事件（不知道为什么：可能是 quirksmode 页面或 IE 中的错误？）

[W3C 规范](http://www.w3.org/TR/DOM-Level-3-Events/#events-WheelEvent)、事件的Microsoft [IE9 文档`MouseWheel`](http://msdn.microsoft.com/en-us/library/ie/ff974352%28v=vs.85%29.aspx)和[MDN 文档为](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/wheel)[事件](http://msdn.microsoft.com/en-us/library/ie/ff974352%28v=vs.85%29.aspx)指定`onwheel`：

*   `deltaX`- 获取鼠标滚轮绕 x 轴（水平）旋转的距离。
*   `deltaY`- 获取鼠标滚轮绕 y 轴（垂直）旋转的距离。
*   `deltaZ`- 获取鼠标滚轮绕 z 轴旋转的距离。
*   `deltaMode`- 获取一个值，该值指示增量值的测量单位：
    *   `DOM_DELTA_PIXEL`(0x00) 默认值。增量以像素为单位。
    *   `DOM_DELTA_LINE`(0x01) 增量以文本行为单位。
    *   `DOM_DELTA_PAGE`(0x02) 增量以文本页为单位。

编辑：确保你不阻止默认（）如果`event.ctrlKey`设置了事件，否则你可能会阻止页面缩放。如果您在 Chrome 和 IE 的触摸板上使用捏合缩放，显然 ctrlKey 设置为 true。

IE中的特征检测很困难：

*   在带有 IE8 documentMode 的 IE10 中，`'onwheel' in document`返回 true，但似乎没有为水平或垂直 onwheel 事件触发任何事件。
*   在 IE9`'onwheel' in document`中返回 false 但 onwheel 事件有效（我想`document.documentMode === 9`在 IE9 中使用 onwheel 事件之前应该检查一下）。
*   在 IE9 和 IE10`document.onwheel = 'somefunc(event)'`中，即使在 documentMode 9 或 10 中，传统的似乎也不起作用（即看起来您只能使用 addEventListener）。

要进行测试，请使用 Microsoft 倾斜滚轮鼠标、滚动触摸板（手势或区域）或 Apple 设备（魔术鼠标或强大的鼠标滚球）。在 Windows 中使用各种鼠标或触摸板设置（如果在 OSX 上使用 Safari 测试水平滚动，则在 OSX 上使用鼠标首选项）。

对于所有浏览器，增量值的符号与 onwheel 和 onmousewheel 的符号相反。在 IE 中，onwheel 和 onmousewheel 的 delta 值是不同的，例如（使用带有 IE9 的开发机器和非常标准的 Microsoft 鼠标）：

*   `event.deltaY`在 Win8 上为 111，在 Win7 上为 72，`onwheel`事件向下滚动一个档次。该值随缩放而略有变化，但还有一些其他因素我无法解决（似乎不是字体大小）。
*   `event.wheelDelta``onmousewheel`事件向下滚动一档时为 -120 。

*   对于 Windows XP，“我们必须添加对`WM_MOUSEHWHEEL`消息的支持才能使其正常工作 [, 支持] 已在 Vista 中添加，因此如果您使用的是 XP，则需要安装 IntelliType Pro 和/或 IntelliPoint” - 根据[本文](http://www.northcode.com/forums/showthread.php?p=53836)。

*   各种常见的触摸板和鼠标驱动程序破坏了浏览器的鼠标滚轮支持，例如损坏的浏览器检测，或使用 WM_HSCROLL 和 WM_VSCROLL 消息而不是 WM_MOUSEWHEEL 和 WM_MOUSEHWHEEL 消息。因此，驱动程序不会在浏览器中生成滚轮事件（无论您使用哪种浏览器，或者您使用的是哪个版本的 Windows）。在[Bugzilla 中搜索 WM_VSCROLL](https://bugzilla.mozilla.org/buglist.cgi?quicksearch=wm_vscroll)会显示可能影响任何浏览器（不仅仅是 Firefox）的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T18:38:44.697

*   Firefox 中的[`DOMMouseWheel`](https://developer.mozilla.org/en/Gecko-Specific_DOM_Events#DOMMouseScroll)事件有一个`axis`属性。

*   Chrome 中的`mousewheel`事件有`wheelDeltaX`和`wheelDeltaY`。

*   可悲的是，我找不到 IE 事件的任何等效属性（在 IE9 上测试）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T18:34:14.127

我相信您可以从中找到“水平”或 x 轴数据

```
event.originalEvent.wheelDeltaX 
```

您应该调试代码，并查看事件对象在运行时具有哪些属性。这应该确认或否认该属性是否存在。从那里，只需检测值是否不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T18:38:34.207

检查接受的答案以获取更多链接和信息。

[冒泡滚动/鼠标滚轮事件](https://stackoverflow.com/questions/6194801/bubbling-scroll-mousewheel-event)

> **event.detail**指定鼠标滚轮移动的“滴答声”数。
> 
> 正值表示下/右”，负值表示上/左。
> 
> **event.axis**指定滚动手势的轴（水平或垂直）。此属性是在 Firefox 3.5 中添加的
> 
> Chrome 实现与 IE AFAIK 相同的行为。在 IE 和 Chrome 中：使用**e.wheelDeltaX**和**e.wheelDeltaY**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-25T04:02:01.860

IE 支持所有这些：[鼠标滚轮 |](https://msdn.microsoft.com/en-us/library/ie/ms536951.aspx) 作为[事件处理程序的](http://www.w3.org/TR/html5/webappapis.html#event-handlers-on-elements,-document-objects,-and-window-objects)[onmousewheel](https://msdn.microsoft.com/en-us/library/ie/ms536951.aspx)以及作为[标准事件](http://www.w3.org/TR/DOM-Level-3-Events/#interface-WheelEvent)和[接口的](http://www.w3.org/TR/2009/WD-DOM-Level-3-Events-20090908/#events-Events-MouseWheelEvent)[WheelEvent](https://msdn.microsoft.com/en-us/library/ie/ff974352.aspx)（提供`DeltaX`、`DeltaY`、`DeltaZ`），在 IE9+中[也受支持](https://msdn.microsoft.com/en-us/library/ie/ff974345.aspx)（具有和数量的其他，坐标相关属性）。[`MouseWheelEvent`](http://www.w3.org/TR/2009/WD-DOM-Level-3-Events-20090908/#events-Events-MouseWheelEvent)`WheelDelta``x``y`

在 IE11 上测试。

相关：今天触摸事件标准终于正式化，原来 IE11 已经支持其中的大部分：http: [//blogs.msdn.com/b/ie/archive/2015/02/24/pointer-events-w3c-recommendation -interoperable-touch-and-removing-the-dreaded-300ms-tap-delay.aspx](http://blogs.msdn.com/b/ie/archive/2015/02/24/pointer-events-w3c-recommendation-interoperable-touch-and-removing-the-dreaded-300ms-tap-delay.aspx)。

旁白：@bob_cobb，您可能需要重新查看您已批准的答案，以支持[投票最多、细节最丰富的答案之一](https://stackoverflow.com/a/12850780/1712065)。这可以帮助未来的访客找到正确的信息，并表明您甚至关心社区！

# python - thread.interrupt_main() 在等待输入时不起作用

> ID：10821995
> 
> 赞同：6
> 
> 时间：2012-05-30T18:18:12.293
> 
> 标签：python, multithreading, timeout

我已经阅读了这种技术来超时阻塞 IO 操作，问题是它似乎不起作用。例如：

```
import thread, threading

def read_timeout(prompt, timeout=10.0):
    timer = threading.Timer(timeout, thread.interrupt_main)
    s = ''
    timer.start()

    try:
        s = raw_input(prompt)
    except KeyboardInterrupt:
        print 'operation timed out.'

    timer.cancel()
    return s

s = read_timeout('enter input: ')

if s:
    print 'you entered: %s' % s 
```

`raw_input()`这在返回之前不会中断主线程。任何帮助表示赞赏。

### 更新：

使用`os.kill(os.getpid(), signal.SIGINT)`而不是`thread.interrupt_main()`似乎有效（至少在 Linux 上，这并没有给我最初想要的可移植性）。但是，我仍然想知道为什么上面的代码不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:29:29.420

在 Unix 机器上，有一种方法可以做你想做的事情。看这个帖子： [raw_input and timeout](https://stackoverflow.com/questions/3471461/raw-input-and-timeout/3911560#3911560)

只需去掉第 5 行末尾的逗号，否则在程序终止之前不会显示提示。

在同一页面上还有适用于 Windows 操作系统的解决方案，但我尚未对其进行测试以了解它是否正常工作。

# ios - 无法以编程方式设置 UINavigationItem 标题

> ID：10821997
> 
> 赞同：3
> 
> 时间：2012-05-30T18:18:17.477
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, uinavigationitem, uistoryboard

我使用故事板设置我的应用程序，并将我的主视图控制器嵌入到`UINavigationControler`. 要更改出现在导航栏中的标题，在`viewDidLoad`我的主视图控制器的方法中，我有`self.navigationItem.title = @"My Title";`但标题永远不会设置。

我的猜测是我需要在我的故事板中设置一个参考插座，但我不确定什么需要连接到什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T13:10:20.533

在故事板中，它不会自动连接，请使用 .h 文件中的以下代码创建 UINavigationItem

```
@property(weak, nonatomic) IBOutlet UINavigationItem *navBar; 
```

在 .m 文件中合成属性并像这样设置标题

```
@synthesize navBar;
-(void)viewWillAppear:(BOOL)animated {
[self.navBar setTitle:@"Sign In"];
[self.navigationController setNavigationBarHidden:NO animated:animated];
} 
```

另外，不要忘记将故事板中的 UINavigationItem "navBar" 与您的类连接，以便故事板知道要更改谁的标题。如果您的情节提要中没有 UINavigationItem，请将其添加到 UIView 之外，然后正确连接

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T18:20:17.523

只需设置您所在的视图控制器的标题属性就可以了。

```
[self setTitle:@"Best Page Ever"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:31:10.153

在你分配了你的 rootview..use:-

```
YourRootView *rootView=[YourRootView alloc]init];
rootView.title=@"yourTitle"; 
```

然后在 uinavigationcontroller 中对其进行初始化。（我不知道您是否对 storyboard 有看法，然后在分配后设置其标题，然后将其作为参数传递给 navigationcontroller）。