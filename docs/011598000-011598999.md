# StackOverflow 问答 11598000-11598999

# uniq - 在 Linux 中合并文件

> ID：11598002
> 
> 赞同：1
> 
> 时间：2012-07-22T05:42:36.307
> 
> 标签：uniq

我正在使用 Cygwin 合并多个文件。但是，我想知道我的方法是否正确。这既是一个问题，也是一个讨论：）

首先，关于我拥有的文件的一些信息：

1.  这两个文件都有 ASCII 和非 ASCII 字符。
2.  File1有**7899097**行，大小约为**70.9 Mb**
3.  File2有**14344391**行，大小约为**136.6 Mb**

**文件编码信息：**

```
$ file -bi file1.txt
text/x-c++; charset=unknown-8bit

$ file -bi file2.txt
text/x-c++; charset=utf-8

$ file -bi output.txt
text/x-c++; charset=unknown-8bit 
```

这是我合并两个文件，对它们进行排序，然后删除所有重复条目的方法：

1.  我创建了一个临时文件夹并将两个文本文件都放在其中。
2.  我运行以下命令来合并两个文件，但在两者之间保留换行符

    ```
    for file in *.txt; do
        cat $file >> output.txt
        echo >> output.txt
    done 
    ```

生成的 output.txt 文件中有**22243490**行，大小为 207.5 Mb

现在，如果我按如下所示对其运行排序命令，我会收到一个错误，因为其中存在非 ASCII 字符（可能是 unicode、宽字符）：

```
sort -u output.txt
string comparison failed: Invalid or incomplete multibyte or wide character 
```

因此，我将环境变量**LC_ALL**设置为 C，然后运行如下命令：

```
cat output.txt | sort -u | uniq >> result.txt 
```

而且，result.txt 中有**22243488**行，大小为 207.5 Mb。

因此，result.txt 与 output.txt 相同

现在，我已经知道 output.txt 中有很多重复的条目，那么为什么上面的命令无法删除重复的条目呢？

另外，考虑到文件的大小，我想知道这是否是合并多个文件、对它们进行排序然后使它们唯一的有效方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:40:34.110

嗯，我会用

```
cat file1.txt file2.txt other-files.* | recode enc1..enc2 | sort | uniq > file3.txt 
```

但请注意 - 这可能会导致一些大文件大小出现问题，以千兆字节（或更大）计算，无论如何数百兆字节应该没问题。如果我想要真正的效率，例如拥有非常大的文件，我会首先删除单个文件的重复项，然后对其进行排序，一个接一个地合并，然后再次排序并再次删除重复的行。理论上 uniq -c 和 grep 过滤器可以删除重复项。尽量避免陷入解决方案的一些不必要的复杂性:)

[http://catb.org/~esr/writings/unix-koans/two_paths.html](http://catb.org/~esr/writings/unix-koans/two_paths.html)

编辑：

```
mv file1.txt file1_iso1234.txt 
mv file2.txt file2_latin7.txt
ls file*.txt |while read line; do cat $line |recode $(echo $line|cut -d'_' -f2 |cut -d'.' -f1)..utf8 ; done | sort | uniq > finalfile.txt 
```

# jquery - 使用 JQuery 为编辑器创建一个新的“范围”

> ID：11598004
> 
> 赞同：1
> 
> 时间：2012-07-22T05:43:03.373
> 
> 标签：jquery, html, css

我正在尝试创建一个教育网站，教师可以在其中创建数学/科学问题，学生可以使用 gui 方程编辑器回答这些问题（我见过的所有当前网络方程编辑器都需要乳胶知识）。

到目前为止我写的规则：

*   单击一个空格将光标移到那里。
*   单击按钮会在当前光标位置添加一个符号。
*   键入数字会在方程式中添加一个动态调整大小的数字框。
*   键入字母会在方程式中添加一个字母（变量）。
*   Backspace、delete 和左/右箭头键按预期工作。
*   如果您在一个字母或数字旁边，单击向上/向下箭头会进入该文本框，以便您可以对其进行编辑。

我的问题：

我想实现诸如分数和平方根之类的东西，我可以在更大的方程编辑器中添加迷你方程编辑器，并使用向上/向下箭头进入这些新的“范围”，就像目前的文本框一样。

我无法决定如何保持相同的行为，但只是缩小一切。我需要调整所有图片、容器和光标的大小。

我知道这个问题可能看起来不清楚，我真的被卡住了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:35:30.220

好吧，我想我知道你要去哪里了，所以我要试一试。

如果您还没有，我会将您的方程式编辑器变成一个[jQuery 插件](http://docs.jquery.com/Plugins/Authoring)，然后使用[jQueryUI 对话框](http://jqueryui.com/demos/dialog/)来显示“范围”或您的插件的其他实例。在我看来，您希望能够在编辑器中创建一个方程，并可能将该方程的输出传递给父方程编辑器。我希望这会有所帮助。如果您可以提供一些伪代码，我可能会进一步帮助您。

# php - mysql 显示回车但 nl2br 不维护它们

> ID：11598009
> 
> 赞同：1
> 
> 时间：2012-07-22T05:44:05.423
> 
> 标签：php, mysql, nl2br

我在 MySQL 数据库中有文本字段，在 PHPMyAdmin 中显示为具有换行符或回车符。但是，在网页上显示该文本字段时，它们不存在。

我试过 nl2br()。我在 \n \r \r\n & \v 上尝试过 str_replace。一切都没有运气。

原始数据来自 Filemaker 数据库。我无法弄清楚回车的原因。

有任何想法吗？

**更新** 这是从数据库字段中直接复制和粘贴的示例，但据我所知，它不会转换到 100% 相同的评论字段。但这里有：

```
2010 Telecommunications - technical/internal brochure2004 Foodtown Catalogue and Banner2001 Alliance Group Holdings Annual Report2001 Cover of Company Profile2000 Clear Communications Mailout 
```

在数据库的文本字段中，如下所示：

```
2010 Telecommunications - technical/internal brochure
2004 Foodtown Catalogue and Banner
2001 Alliance Group Holdings Annual Report
2001 Cover of Company Profile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T05:49:17.493

利用

```
nl2br(htmlspecialchars($text)); 
```

# php - 数据库关系，我看不懂，MYSQL，PHP

> ID：11598016
> 
> 赞同：0
> 
> 时间：2012-07-22T05:44:20.290
> 
> 标签：php, mysql, database

我对在mysql中使用多个表很陌生，所以我真的不明白一些事情..

这是我的 .php 文件中的 php 代码`role.model.php`。

```
public function getRolePerms($role_id) {

    $str = "SELECT t2.perm_desc FROM role_perm as t1
    JOIN permissions as t2 ON t1.perm_id = t2.perm_id
    WHERE t1.role_id = :role_id";

    $sth = $this->db->prepare($str);
    $sth->execute(array(':role_id' => $role_id));

    $data = $sth->fetchAll(PDO::FETCH_ASSOC);
    print_r($data);
} 
```

我在我的`role.php`控制器中调用它并喂了一个`$role_id`1；`getRolePerms(1);`

我`print_r($data)`所以我会知道它是否会获取数据，但输出只是

> “大批（）”

我的问题是，这是如何工作的？

如果我有这些表：

```
roles
permissions
role_perms 
```

with`role_id`和`perm_id`列，引用角色和权限的主键。

有点困惑。有人真的可以用简单的语言向我解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T09:55:53.237

你检查`role_perms`表格是否有 a`role_id`为 1 的行？因为应该有查询才能工作。

## 这是如何运作的？

首先，尝试理解表格及其关系。我想你的表格有点像下面的表格。

**ROLE**表包含应用程序中的角色（例如 Admin、Guest）。

```
Table 1: ROLE
-----------------------------------------------
  role_id        role_description
-----------------------------------------------
     1               Admin
     2               Guest 
```

**PERMISSIONS**表包含应用程序中的权限。

```
Table 2: PERMISSIONS
-----------------------------------------------
  permission_id        permission_description
-----------------------------------------------
     1                 Can create files
     2                 Can edit files
     3                 Can view files 
```

ROLE_PERMISSIONS表包含**应用**程序中不同角色的权限。以下面的数据为例，表示角色 1（Admin）的权限为 1、2、3（可以分别创建、编辑、查看文件）。

```
Table 3: ROLE_PERMISSIONS
-----------------------------------------------
  role_id        permission_id
-----------------------------------------------
     1                1
     1                2
     1                3
     2                3 
```

现在，尝试理解查询。

```
SELECT t2.permission_description
FROM role_permissions as t1 JOIN permissions as t2
ON t1.permission_id = t2.permission_id
WHERE t1.role_id = 1 
```

第一行指示应该检索**哪些数据。**它说从列`t2`中的表中选择值`permission_description`。因此，查询的可能结果是：

> 可以创建文件
> 可以编辑文件
> 可以查看文件

第二行和第三行指示应从**何处**检索数据。`role_permissions`它说从和条件的联合表中检索数据`permissions` `ON`：

```
t1.permission_id = t2.permission_id 
```

**注意：** `AS` *表示将使用别名。意思，* `t1` *和 一样* `role_permissions`。

从上面的**PERMISSIONS**和**ROLE_PERMISSIONS**表中，联合表如下所示。

```
Table 4: Joint ROLE_PERMISSIONS and PERMISSIONS
------------------------------------------------------------------------
  role_id    permission_id    permission_id    permission_description
------------------------------------------------------------------------
     1             1               1              Can create files
     1             2               2              Can edit files
     1             3               3              Can view files
     2             3               3              Can view files 
```

这是将检索数据的表。

到目前为止，指令是`permission_description`从联合表（**表 4**）中检索 。

第四行向第一条指令添加了一个约束，只选择`permission_description`s `WHERE` `role_id = 1`。因此，完整的指令是

> `permission_description`从联合表（**表 4**）中检索s，其中 s`role_id`为 1。

用简单的英语意味着：

> 检索角色“管理员”的权限描述。

因此查询的结果是：

```
Table 5: PERMISSION_DESCRIPTIONS of Admin
-----------------------------------------------
  permission_description
-----------------------------------------------
     Can create files
     Can edit files
     Can view files 
```

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T06:16:04.617

```
SELECT t2.perm_desc FROM role_perm as t1
JOIN permissions as t2 ON t1.perm_id = t2.perm_id
WHERE t1.role_id = :role_id; 
```

此命令告诉 MySQL 加入 role_perm 和权限，因为它们是共享列 (perm_id)，这是正确的。但是我们错过了这两个表中角色 ID 之间的连接。无论role_perm.role_id 是否指向正确的role_id，连接都会生成一个表，其中包含perm_id 也存在于role_perm 表中的权限表中的列。where 子句仅过滤 t1。这可能会导致获得其他角色也拥有的权限。要解决此问题，请将 SQL 命令更改为

```
SELECT t2.perm_desc FROM role_perm as t1
JOIN permissions as t2 ON t1.perm_id = t2.perm_id AND t1.role_id=t2.role_id
WHERE t1.role_id = :role_id; 
```

# algorithm - 查找由线段切割的切片，即 3D 多边形上的原点

> ID：11598017
> 
> 赞同：1
> 
> 时间：2012-07-22T05:44:32.500
> 
> 标签：algorithm, language-agnostic, 3d, polygon, line-segment

我有一组三角形顶点（多边形的面），比如

```
[[[a, b, c], [d, e, f], [g, h, i]], ...] 
```

我有一个线段，由 2 个 3D 顶点表示，比方说`[[j, k, l], [m, n, o]]`。

我有一点`[p, q, r]`。

我想要做的是，通过线段投影多边形上的点，并检查它是否完全切割多边形（我认为 4 个接触点就足够了？我可能错了）。如果是这样，我需要位于边缘和顶点上的所有交点。

我完全迷失在这里。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:32:54.203

我们可以不失一般性地假设由点和线段（以下称为 T）形成的三角形位于 xy 平面内。（否则，适当地旋转一切）。

我们遍历三角形面，对于任何一对面的 y 坐标具有不同符号的顶点（即，对于切割 xy 平面的任何边），我们检查边与 xy 平面的交点并确保它是T内。

它认为当且仅当所有此类检查都为真时，T“完全切割多边形”。

运行时间为`O(number of faces)`。

描述的所有操作都非常简单。例如，检查某物是否在 T 的范围内只是用定义 T 的两条线的方程（即从点到线段的端点）检查两个不等式。

所有带有边缘（以及顶点）的 POI 都可以在循环内计算 - 它只是带有 xy 平面的边缘的 POI。

# database - 如何减少 postgres 中的 bigserial 值？

> ID：11598022
> 
> 赞同：0
> 
> 时间：2012-07-22T05:45:48.383
> 
> 标签：database, postgresql

我在 postgres 中使用 bigserial 作为列值。现在 bigserial 自动增加，但我不希望它在输入相同的用户名时增加。有没有办法在错误的 pg 插入值的情况下 bigserial 不会增加它的值。或者有没有办法可以降低 bigserial 值的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:09:00.287

`SEQUENCE`您可以使用以下两种方法之一设置关联的当前值：

1.  使用[SQL 语句](http://www.postgresql.org/docs/current/interactive/sql-altersequence.html)：

    ```
    ALTER SEQUENCE my_seq RESTART WITH 12345; 
    ```

2.  与[`setval()`](http://www.postgresql.org/docs/current/interactive/functions-sequence.html)：

    ```
    SELECT setval('my_seq', 12345, FALSE); 
    ```

注意不要遇到重复的键错误。请注意，这不适用于并发事务。阅读[手册中](http://www.postgresql.org/docs/current/interactive/sql-altersequence.html#AEN61687)的注释。
如果您想要一个无间隙的 ID 序列，这几乎没有用。请注意对此的评论。

# html - 超链接内的超链接

> ID：11598025
> 
> 赞同：1
> 
> 时间：2012-07-22T05:46:22.470
> 
> 标签：html, hyperlink, href

可能是一个愚蠢的问题，但我想有一个超链接和另一个超链接，就像一个

```
<a href="#somewhere">
  This is the hyperlink,
  <a href="somewhere_else.html">and this is the other one</a>
</a> 
```

除了它不合规之外，有没有办法做到这一点？

*编辑：外部超链接由轮播使用，不会将浏览器带到某个地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T05:51:39.553

让我们考虑一下。浏览器应该做什么？

转到第一个超链接，还是第二个，或两者兼而有之？

如果您想要第一个，则不需要第二个超链接。

如果你想要第二个，那么在关闭第二个之前关闭第一个并在必要时重新打开第二个。

如果两者都写一些Javascript来让它打开一个新窗口。加载第一个超链接之前的第二个超链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T06:10:29.617

锚标签，就像内联或块级元素一样，在嵌套时相互叠加，以便可以为其中的不同信息子集或视觉空间设置属性。如果您有一个用作大按钮的大型锚元素，但想要在该按钮内插入指向不同位置的链接，这可能会很有用。

您是否尝试过实施它？看到这个[jsFiddle](http://jsfiddle.net/2ghyR/)证明嵌套的内联元素可以使用 span 和 anchor 标签。请注意，嵌套元素会覆盖父元素中的可点击区域子集，就像您在侦听悬停事件时所期望的那样。

**免责声明：**虽然技术上可以做到这一点，但这并不意味着应该这样做。特别是嵌套链接可能会导致用户混淆，并且会误导哪些内容指向哪些位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T05:52:38.330

你不能嵌套它，但你可以做一些我在下面做的事情..

```
<a href="somewhere">
  This is the hyperlink,</a>
  <a href="somewhere_else">and this is the other one</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-10T11:34:44.527

可能是你的解决方案：

```
<form action="http://myhomepage.ru/" method="get">
  <a href="http://myhomepage.ru/second">second link within</a>
  <button>first link</button>
</form> 
```

# windows - 相当于 Windows 管道的 Linux

> ID：11598030
> 
> 赞同：-6
> 
> 时间：2012-07-22T05:47:25.187
> 
> 标签：windows, linux, bash, command-line, command-prompt

第一个问题是，管道 (|) 在 windows cmd 中意味着什么？

第二个问题是，Windows 管道的 linux 等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T05:53:12.177

在 Windows`cmd`中， a`|`导致一个命令的输出成为第二个命令的输入：

```
command1 | command2 
```

Linux shell 使用相同的语法，具有相同的含义。

# python - 替换 urllib2 的二进制模式文件对象

> ID：11598032
> 
> 赞同：1
> 
> 时间：2012-07-22T05:47:37.480
> 
> 标签：python, google-app-engine, curl, urllib2, urllib

我有一段看起来像这样的代码，它在本地工作（不使用任何 AppEngine）：

```
bodyParams = { "file" : open( filePath, "rb" )  }
request = urllib2.Request( requestUrl, None, self.buildAuthInfo() )
response = self.getOpener().open(request, bodyParams).read() 
```

我想摆脱`open`, ie `open( filePath, "rb" )`，因为在 Google AppEngine 中禁止使用文件（或者真的很不方便）。

为了解决这个问题，我得到一个 base64 编码图像文件的 HTTP POST 数据，我对其进行解码。我使用以下命令通过 cURL 发送编码数据：

```
curl -X POST -F image=@encoded http://localhost:8080/image-process 
```

`encoded`是 base64 编码的 jpg。

此时，我尝试了两种不同的方法：将解码后的数据放入`StringIO`对象中，或者直接在内部传递和使用`bodyParams = { "file" : DECODEDVALUE}`。我希望其中任何一个都可以工作，但是我从目标服务器（我正在执行外部 API 请求）收到 HTTP 500 错误。这就是我解码值的方式：

```
img = self.request.get('image')
DECODEDVALUE = MyStringIO(base64.b64decode(img)) 
```

我相信我遇到了与编码和/或二进制模式有关的问题。我相信我遇到了与编码和/或二进制模式有关的问题。

如何摆脱`open`和使用文件对象，支持`StringIO`、`BytesIO`或`str`对象？

* * *

注意：只是为了清楚起见，与原始问题无关。`MyStringIO`是添加的子`StringIO.StringIO`类`__len__`：

```
class MyStringIO(StringIO.StringIO):
  def __len__(self):
    return self.len 
```

* * *

# xcode - 全局 NSMutableArray 变量 xcode

> ID：11598039
> 
> 赞同：0
> 
> 时间：2012-07-22T05:49:20.377
> 
> 标签：xcode, nsmutablearray, global-variables

我正在制作一个 iPhone 应用程序，它通过一组从用户输入中收集数据的视图控制器。在视图的最后，我将所有数据封装在一个名为 GELObject 的自定义对象中。现在我需要将这些数据保存在某个 NSMutableArray 中，以便它可以被作为 rootviewcontroller 的另一个分支的 tableviewcontroller 访问。我正在考虑来自 tableviewcontroller 的全局变量，但我做了一些研究，我正在阅读 appdelegate 中的单例。一些指导将不胜感激，如果您觉得特别慷慨，请快速解释如何制作和使用单例，因为它很吸引我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:00:59.480

`static`要管理单例，您可以创建一个初始标记值为 的全局变量（可以使用 限制在一个文件的范围内） `nil`，并使用类方法在第一次调用时创建单例。

例如：

```
static Something* globalSomething = nil;

@implementation Something

+ (id)
sharedSomething
{
  if (! globalSomething)
  {
    /* can use different initializer if necessary */
    globalSomething = [[[self class] allocWithZone:NULL] init];
  }
  return globalSomething;
}

. . .

@end 
```

# oracle11g - 按名称和最受欢迎的标题排序 - Oracle

> ID：11598041
> 
> 赞同：0
> 
> 时间：2012-07-22T05:49:59.523
> 
> 标签：oracle11g

我有这个查询

```
select movie_name, user_name
from movie natural join movie_queue natural join users
group by (movie_name, user_name)
order by movie_name; 
```

这会删除一个类似于下面的列表：

```
 MOVIE_NAME                                              USER_NAME              
------------------------------------------------------- ------------------------
E.T. the Extra-Terrestrial                              Cris                     
E.T. the Extra-Terrestrial                              Elizabeth                
E.T. the Extra-Terrestrial                              John                     
E.T. the Extra-Terrestrial                              Mary                     
E.T. the Extra-Terrestrial                              Peter                    
Indiana Jones and the Kingdom of the Crystal Skull      Elizabeth                
Indiana Jones and the Kingdom of the Crystal Skull      John                     
Indiana Jones and the Kingdom of the Crystal Skull      Mary                     
Jurassic Park                                           Elizabeth                
Jurassic Park                                           John                     
Jurassic Park                                           Mary                     
Jurassic Park                                           Peter                    
Signs                                                   Elizabeth                
The Sixth Sense                                         Mary                     
Unbreakable                                             John                     
Unbreakable                                             Mary                     
Unbreakable                                             Peter                    
War of the Worlds                                       Elizabeth                
War of the Worlds                                       John                     
War of the Worlds                                       Mary                     
War of the Worlds                                       Peter 
```

**问题是如何按行流行度和 movie_name 排序？**
我目前正在按电影名称对列表进行排序，但我也想将它们从最受欢迎的电影排序到不太受欢迎的电影。

**期望的结果：**
因此，“ET the Extra-Terrestrial”行应该首先出现，因为它在桌子上出现的次数更多，而“The Sixth Sense”应该最后出现，就在“Signs”之后。因为最后两部电影只出现了 1 次，但 S 在 T 之前。

我尝试添加：按计数排序（电影名称），电影名称；

但我仍然没有得到我想要的结果。最后电影应该这样组织

**这就是我希望它们的组织方式：从更受欢迎到不太受欢迎，并按字母顺序排列**

```
 MOVIE_NAME                                              USER_NAME              
------------------------------------------------------- ------------------------
E.T. the Extra-Terrestrial                              Cris                     
E.T. the Extra-Terrestrial                              Elizabeth                
E.T. the Extra-Terrestrial                              John                     
E.T. the Extra-Terrestrial                              Mary                     
E.T. the Extra-Terrestrial                              Peter  
Jurassic Park                                           Elizabeth                
Jurassic Park                                           John                     
Jurassic Park                                           Mary                     
Jurassic Park                                           Peter 
War of the Worlds                                       Elizabeth                
War of the Worlds                                       John                     
War of the Worlds                                       Mary                     
War of the Worlds                                       Peter   
Indiana Jones and the Kingdom of the Crystal Skull      Elizabeth                
Indiana Jones and the Kingdom of the Crystal Skull      John                     
Indiana Jones and the Kingdom of the Crystal Skull      Mary  
Unbreakable                                             John                     
Unbreakable                                             Mary                     
Unbreakable                                             Peter 
Signs                                                   Elizabeth                
The Sixth Sense                                         Mary 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:04:04.410

您可以为 order by 子句指定多个列。此外，您甚至可以混合使用 desc、asc。

在您的情况下，它将类似于：

```
select movie_name, user_name, count(movie_name) popularity 
from movie natural join movie_queue natural join users
group by (movie_name, user_name)
order by popularity, movie_name; 
```

另见： http: [//psoug.org/reference/orderby.html](http://psoug.org/reference/orderby.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:29:12.163

试试这样：

```
select movie_name, user_name
from movie natural join movie_queue natural join users
order by count(*) over (partition by movie_name) ,movie_name; 
```

# objective-c - 从 UIColor 获得稍微更亮和更暗的颜色

> ID：11598043
> 
> 赞同：148
> 
> 时间：2012-07-22T05:50:12.407
> 
> 标签：objective-c, ios, core-graphics, gradient, uicolor

我希望能够将任何 UIColor 变成渐变。我打算这样做的方式是使用 Core Graphics 绘制渐变。我想要做的是获得一种颜色，让我们说：

```
[UIColor colorWithRed:0.5 green:0.5 blue:0.5 alpha:1.0]; 
```

并得到一个 UIColor ，它更暗一些，更亮一些。有谁知道如何做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-07-22T06:11:43.357

```
- (UIColor *)lighterColorForColor:(UIColor *)c
{
    CGFloat r, g, b, a;
    if ([c getRed:&r green:&g blue:&b alpha:&a])
        return [UIColor colorWithRed:MIN(r + 0.2, 1.0)
                               green:MIN(g + 0.2, 1.0)
                                blue:MIN(b + 0.2, 1.0)
                               alpha:a];
    return nil;
}

- (UIColor *)darkerColorForColor:(UIColor *)c
{
    CGFloat r, g, b, a;
    if ([c getRed:&r green:&g blue:&b alpha:&a])
        return [UIColor colorWithRed:MAX(r - 0.2, 0.0)
                               green:MAX(g - 0.2, 0.0)
                                blue:MAX(b - 0.2, 0.0)
                               alpha:a];
    return nil;
} 
```

像这样使用它：

```
UIColor *baseColor = // however you obtain your color
UIColor *lighterColor = [self lighterColorForColor:baseColor];
UIColor *darkerColor = [self darkerColorForColor:baseColor]; 
```

**编辑**：正如@Anchu Chimala 指出的那样，为了获得最大的灵活性，这些方法应该作为 UIColor 类别来实现。此外，从@Riley 的想法来看，最好让颜色按比例变暗或变亮，而不是添加或减去常数值。正如@jrturton 指出的那样，没有必要操纵 RGB 组件。最好修改亮度属性本身。总而言之：

```
@implementation UIColor (LightAndDark)

- (UIColor *)lighterColor
{
    CGFloat h, s, b, a;
    if ([self getHue:&h saturation:&s brightness:&b alpha:&a])
        return [UIColor colorWithHue:h
                          saturation:s
                          brightness:MIN(b * 1.3, 1.0)
                               alpha:a];
    return nil;
}

- (UIColor *)darkerColor
{
    CGFloat h, s, b, a;
    if ([self getHue:&h saturation:&s brightness:&b alpha:&a])
        return [UIColor colorWithHue:h
                          saturation:s
                          brightness:b * 0.75
                               alpha:a];
    return nil;
}
@end 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2014-04-16T21:42:26.427

# TL;博士：

### 迅速：

```
extension UIColor {

    var lighterColor: UIColor {
        return lighterColor(removeSaturation: 0.5, resultAlpha: -1)
    }

    func lighterColor(removeSaturation val: CGFloat, resultAlpha alpha: CGFloat) -> UIColor {
        var h: CGFloat = 0, s: CGFloat = 0
        var b: CGFloat = 0, a: CGFloat = 0

        guard getHue(&h, saturation: &s, brightness: &b, alpha: &a)
            else {return self}

        return UIColor(hue: h,
                       saturation: max(s - val, 0.0),
                       brightness: b,
                       alpha: alpha == -1 ? a : alpha)
    }
} 
```

用法：

```
let lightColor = somethingDark.lighterColor 
```

### 目标-C：

```
- (UIColor *)lighterColorRemoveSaturation:(CGFloat)removeS
                              resultAlpha:(CGFloat)alpha {
    CGFloat h,s,b,a;
    if ([self getHue:&h saturation:&s brightness:&b alpha:&a]) {
        return [UIColor colorWithHue:h
                          saturation:MAX(s - removeS, 0.0)
                          brightness:b
                               alpha:alpha == -1? a:alpha];
    }
    return nil;
}

- (UIColor *)lighterColor {
    return [self lighterColorRemoveSaturation:0.5
                                  resultAlpha:-1];
} 
```

@rchampourlier 在对@user529758 的评论中是正确的（接受的答案）- HSB（或 HSV）和 RGB 解决方案给出了完全不同的结果。RGB 只是添加（或使颜色更接近）白色，而 HSB 解决方案使颜色更接近亮度等级的边缘 - 基本上以黑色开始并以纯色结束......

基本上亮度（值）使颜色更接近或更接近黑色，而饱和度使其更接近或更接近白色......

如此处所示：

![HSV 彩色图](../Images/5f17e3b4e32ced82c322ec1b46069e24.png)

因此，使颜色实际上更亮（即更接近白色......）的解决方案将是使其饱和度值**更小**，从而产生以下解决方案：

```
- (UIColor *)lighterColor {
    CGFloat h,s,b,a;
    if ([self getHue:&h saturation:&s brightness:&b alpha:&a]) {
        return [UIColor colorWithHue:h
                          saturation:MAX(s - 0.3, 0.0)
                          brightness:b /*MIN(b * 1.3, 1.0)*/
                               alpha:a];
    }
    return nil;
} 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2015-07-16T23:58:03.943

****适用于iOS 和 OS X的****Swift**通用扩展，使用**getHue**：**

 **```
#if os(OSX)

    import Cocoa
    public  typealias PXColor = NSColor

    #else

    import UIKit
    public  typealias PXColor = UIColor

#endif

    extension PXColor {

    func lighter(amount : CGFloat = 0.25) -> PXColor {
        return hueColorWithBrightnessAmount(1 + amount)
    }

    func darker(amount : CGFloat = 0.25) -> PXColor {
        return hueColorWithBrightnessAmount(1 - amount)
    }

    private func hueColorWithBrightnessAmount(amount: CGFloat) -> PXColor {
        var hue         : CGFloat = 0
        var saturation  : CGFloat = 0
        var brightness  : CGFloat = 0
        var alpha       : CGFloat = 0

        #if os(iOS)

            if getHue(&hue, saturation: &saturation, brightness: &brightness, alpha: &alpha) {
                return PXColor( hue: hue,
                                saturation: saturation,
                                brightness: brightness * amount,
                                alpha: alpha )
            } else {
                return self
            }

            #else

            getHue(&hue, saturation: &saturation, brightness: &brightness, alpha: &alpha)
            return PXColor( hue: hue,
                            saturation: saturation,
                            brightness: brightness * amount,
                            alpha: alpha )

        #endif

    }

} 
```

用法 ：

```
let color = UIColor(red: 0.5, green: 0.8, blue: 0.8, alpha: 1.0)
color.lighter(amount:0.5)
color.darker(amount:0.5) 
```

或（使用默认值）：

```
color.lighter()
color.darker() 
```

样本 ：

![在此处输入图像描述](../Images/20f1bc990c851c1cbe7e1748cd820dcf.png)

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2016-03-11T21:20:27.153

我只是想在 RGB 中给出相同的结果，而不是

*   将带有 alpha x% 的颜色放在白色背景上以变亮
*   将带有 alpha x% 的颜色放在黑色背景上以变暗

这给出了相同的结果，AFAIK，而不是在渐变大小的 x% 处选择渐变“颜色到白色”或“颜色到黑色”中的颜色。

为此，数学很简单：

```
extension UIColor {
    func mix(with color: UIColor, amount: CGFloat) -> UIColor {
        var red1: CGFloat = 0
        var green1: CGFloat = 0
        var blue1: CGFloat = 0
        var alpha1: CGFloat = 0

        var red2: CGFloat = 0
        var green2: CGFloat = 0
        var blue2: CGFloat = 0
        var alpha2: CGFloat = 0

        getRed(&red1, green: &green1, blue: &blue1, alpha: &alpha1)
        color.getRed(&red2, green: &green2, blue: &blue2, alpha: &alpha2)

        return UIColor(
            red: red1 * (1.0 - amount) + red2 * amount,
            green: green1 * (1.0 - amount) + green2 * amount,
            blue: blue1 * (1.0 - amount) + blue2 * amount,
            alpha: alpha1
        )
    }
} 
```

**以下是一些颜色的示例**

[![示例更深和更亮](../Images/41c20054280f66ed87a421990960ddda.png)](https://i.stack.imgur.com/KZr5U.png)

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2014-12-09T19:53:24.307

*user529758 在 Swift 中的解决方案：*

较深的颜色：

```
func darkerColorForColor(color: UIColor) -> UIColor {

       var r:CGFloat = 0, g:CGFloat = 0, b:CGFloat = 0, a:CGFloat = 0

       if color.getRed(&r, green: &g, blue: &b, alpha: &a){
           return UIColor(red: max(r - 0.2, 0.0), green: max(g - 0.2, 0.0), blue: max(b - 0.2, 0.0), alpha: a)
       }

       return UIColor()
} 
```

浅色：

```
func lighterColorForColor(color: UIColor) -> UIColor {

       var r:CGFloat = 0, g:CGFloat = 0, b:CGFloat = 0, a:CGFloat = 0

       if color.getRed(&r, green: &g, blue: &b, alpha: &a){
           return UIColor(red: min(r + 0.2, 1.0), green: min(g + 0.2, 1.0), blue: min(b + 0.2, 1.0), alpha: a)
       }

       return UIColor()
} 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2012-07-22T06:39:16.593

如果将 RGB 颜色转换为[HSL 颜色模型](http://en.wikipedia.org/wiki/HSL_and_HSV)，则可以将 L = 亮度分量从 L = 0.0（黑色）到 L = 0.5（自然色）更改为 L = 1.0（白色）。`UIColor`不能直接处理 HSL，但是有转换 RGB <-> HSL 的公式。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-06-30T18:32:17.380

此线程中的所有其他答案都使用**RGB 颜色系统**或简单地更改**HSB 系统的色调或亮度值**。正如[**这篇精彩的博客文章**](https://medium.com/@erikdkennedy/color-in-ui-design-a-practical-framework-e18cacd97f9e#.qb359o2lu)中详细解释的那样，使颜色变浅或变深的*正确*方法是改变它的`luminance`值。其他答案都没有。如果您想正确地做，请**使用我的解决方案**或在阅读博客文章后**编写您自己的解决方案。**

* * *

不幸的是，在**默认情况下**更改 UIColor 的任何属性都**非常麻烦**。此外，Apple 甚至不支持任何基于 LAB 的色彩空间，如类中的 HCL （in LAB 是我们正在寻找的值）。**`UIColor``L``luminance`**

 **使用**[HandyUIKit](https://github.com/Flinesoft/HandyUIKit)**（通过 Carthage 安装）增加了对**HCL**的支持，让您的生活**更轻松**：

```
import HandyUIKit    

let color = UIColor(red: 0.5, green: 0.5, blue: 0.5, alpha: 1.0)

// create a new UIColor object with a specific luminance (slightly lighter)
color.change(.luminance, to: 0.7) 
```

还有一个应用**相对更改**的选项（推荐）：

```
// create a new UIColor object with slightly darker color
color.change(.luminance, by: -0.2) 
```

请注意，HandyUIKit 还在您的项目中添加了**一些其他方便的 UI 功能——**[查看 GitHub 上的自述文件以](https://github.com/Flinesoft/HandyUIKit)获取更多详细信息。

我希望它有帮助！

*免责声明：我是 HandyUIKit 的作者。*

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-11-19T23:47:44.457

发布的解决方案都没有*适用*于所有颜色和阴影，但后来我偶然发现了[这个库](https://github.com/thisandagain/color)，它为 UIColor 提供了一组非常好的实现扩展。

具体来说，它具有作为其 HSL 实现的一部分的减轻功能：`(UIColor *)lighten:(CGFloat)amount`- 完美运行。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-08-14T09:59:48.180

**`Sebyddd`作为扩展的解决方案：**

```
extension UIColor {    
    func darker() -> UIColor {

        var r:CGFloat = 0, g:CGFloat = 0, b:CGFloat = 0, a:CGFloat = 0

        if self.getRed(&r, green: &g, blue: &b, alpha: &a){
            return UIColor(red: max(r - 0.2, 0.0), green: max(g - 0.2, 0.0), blue: max(b - 0.2, 0.0), alpha: a)
        }

        return UIColor()
    }

    func lighter() -> UIColor {

        var r:CGFloat = 0, g:CGFloat = 0, b:CGFloat = 0, a:CGFloat = 0

        if self.getRed(&r, green: &g, blue: &b, alpha: &a){
            return UIColor(red: min(r + 0.2, 1.0), green: min(g + 0.2, 1.0), blue: min(b + 0.2, 1.0), alpha: a)
        }

        return UIColor()
    }
} 
```

**用法：**

```
let darkerYellow = UIColor.yellow.darker()
let lighterYellow = UIColor.yellow.lighter() 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-05-14T23:36:47.417

如果您希望 user529758 的解决方案适用于灰色阴影（例如`[UIColor lightGrayColor]`，或者`[UIColor darkGrayColor]` 您必须像这样改进它：

```
- (UIColor *)lighterColor
{
    CGFloat h, s, b, a;
    if ([self getHue:&h saturation:&s brightness:&b alpha:&a]) {
        return [UIColor colorWithHue:h
                          saturation:s
                          brightness:MIN(b * 1.3, 1.0)
                               alpha:a];
    }

    CGFloat white, alpha;
    if ([self getWhite:&white alpha:&alpha]) {
        white = MIN(1.3*white, 1.0);
        return [UIColor colorWithWhite:white alpha:alpha];
    }

    return nil;
} 
```

`getHue:saturation:brightness:alpha`在灰色阴影上调用时失败（并返回`false`），因此您需要使用`getWhite:alpha`.

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-03-25T09:56:51.820

**斯威夫特 5**

```
extension UIColor {

func lighter(by percentage:CGFloat=30.0) -> UIColor? {
    return self.adjust(by: abs(percentage) )
}

func darker(by percentage:CGFloat=30.0) -> UIColor? {
    return self.adjust(by: -1 * abs(percentage) )
}

func adjust(by percentage:CGFloat=30.0) -> UIColor? {
    var r:CGFloat=0, g:CGFloat=0, b:CGFloat=0, a:CGFloat=0;
    if self.getRed(&r, green: &g, blue: &b, alpha: &a) {
        return UIColor(red: min(r + percentage/100, 1.0),
                       green: min(g + percentage/100, 1.0),
                       blue: min(b + percentage/100, 1.0),
                       alpha: a)
    } else {
        return nil
     }
   }
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-02-27T14:07:58.023

UIColor 扩展和修复lighterColorForColor

```
extension UIColor {
  class func darkerColorForColor(color: UIColor) -> UIColor {
    var r:CGFloat = 0, g:CGFloat = 0, b:CGFloat = 0, a:CGFloat = 0
    if color.getRed(&r, green: &g, blue: &b, alpha: &a){
      return UIColor(red: max(r - 0.2, 0.0), green: max(g - 0.2, 0.0), blue: max(b - 0.2, 0.0), alpha: a)
    }
    return UIColor()
  }

  class func lighterColorForColor(color: UIColor) -> UIColor {
    var r:CGFloat = 0, g:CGFloat = 0, b:CGFloat = 0, a:CGFloat = 0
    if color.getRed(&r, green: &g, blue: &b, alpha: &a){
      let tmpColor = UIColor(red: min(r + 0.2, 1.0), green: min(g + 0.2, 1.0), blue: min(b + 0.2, 1.0), alpha: a)
      println(tmpColor)
      return tmpColor
    }
    return UIColor()
  }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-07-22T06:10:31.890

我不确定您是否正在寻找某种 Objective-C 答案，但根据 RGBA 指定的颜色如何工作，我认为您可以根据任意因素简单地缩放 RGB 值以获得“更亮”或“更暗”的阴影。例如，您可能有蓝色：

```
[UIColor colorWithRed:0.0 green:0.0 blue:1.0 alpha:1.0]; 
```

想要深蓝色？将 RGB 值乘以 0.9：

```
[UIColor colorWithRed:0.0 green:0.0 blue:0.9 alpha:1.0]; 
```

瞧。或者也许你有一个橙子：

```
[UIColor colorWithRed:1.0 green:0.4 blue:0.0 alpha:1.0]; 
```

选择另一个比例因子，例如 0.8：

```
[UIColor colorWithRed:0.8 green:0.32 blue:0.0 alpha:1.0]; 
```

这就是你想要的那种效果吗？

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-12-04T15:44:02.313

**使用适用于 iOS 12 的 Swift 4.x 在 Xcode 10 中测试**

从作为 UIColor 的颜色开始，然后选择一个变暗因子（作为 CGFloat）

```
let baseColor = UIColor.red
let darkenFactor: CGFloat = 2 
```

CGColor 类型有一个可选值`components`，它将颜色分解为 RGBA（作为值在 0 和 1 之间的 CGFloat 数组）。然后，您可以使用从 CGColor 获取的 RGBA 值重建 UIColor 并对其进行操作。

```
let darkenedBase = UIColor(displayP3Red: startColor.cgColor.components![0] / darkenFactor, green: startColor.cgColor.components![1] / darkenFactor, blue: startColor.cgColor.components![2] / darkenFactor, alpha: 1) 
```

在此示例中，每个 RGB 值均除以 2，使颜色与以前一样暗一半。alpha 值保持不变，但您也可以在 alpha 值而不是 RGB 上应用变暗因子。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-05-14T06:48:02.810

理想情况下，这些函数应该封装在一个`UIColor`名为 , 的扩展中`UIColor+Brightness.swift`，并具有可配置的亮度 - 请参见下面的示例：

```
import UIKit

extension UIColor {

  func lighterColorWithBrightnessFactor(brightnessFactor:CGFloat) -> UIColor {
    var r:CGFloat = 0, g:CGFloat = 0, b:CGFloat = 0, a:CGFloat = 0
    if self.getRed(&r, green:&g, blue:&b, alpha:&a) {
      return UIColor(red:min(r + brightnessFactor, 1.0),
        green:min(g + brightnessFactor, 1.0),
        blue:min(b + brightnessFactor, 1.0),
        alpha:a)
    }
    return UIColor()
  }

} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-01-29T18:39:28.093

我根据状态值渲染彩色单元格：

![状态图像](../Images/0c154d4ecf24a1632613b03001a0c077.png)

为此，在使用 CryingHippo 的建议出现错误后，我基于一些旧的 objc 代码编写了一个快速扩展：

```
extension UIColor{

    func darker(darker: CGFloat) -> UIColor{

        var red: CGFloat = 0.0
        var green: CGFloat = 0.0
        var blue: CGFloat = 0.0

        if self.colorSpace == UIColorSpace.genericGrayColorSpace(){

            red =  whiteComponent - darker
            green = whiteComponent - darker
            blue  = whiteComponent - darker
        } else {
            red = redComponent - darker
            green = greenComponent - darker
            blue = blueComponent - darker
        }

        if red < 0{
            green += red/2
            blue += red/2
        }

        if green < 0{
            red += green/2
            blue += green/2
        }

        if blue < 0{
            green += blue/2
            red += blue/2
        }

        return UIColor(
            calibratedRed: red,
            green: green,
            blue: blue,
            alpha: alphaComponent
        )
    }

    func lighter(lighter: CGFloat) -> UIColor{
        return darker(-lighter)
    }
} 
```

同样适用`NSColor`。只需替换`UIColor`为`NSColor`.

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-12-02T02:45:00.680

这是一个 UIColor 类别，它还允许控制颜色变化的量。

```
- (UIColor *)lighterColorWithDelta:(CGFloat)delta
{
    CGFloat r, g, b, a;
    if ([self getRed:&r green:&g blue:&b alpha:&a])
        return [UIColor colorWithRed:MIN(r + delta, 1.0)
                               green:MIN(g + delta, 1.0)
                                blue:MIN(b + delta, 1.0)
                               alpha:a];
    return nil;
}

- (UIColor *)darkerColorWithDelta:(CGFloat)delta
{
    CGFloat r, g, b, a;
    if ([self getRed:&r green:&g blue:&b alpha:&a])
        return [UIColor colorWithRed:MAX(r - delta, 0.0)
                               green:MAX(g - delta, 0.0)
                                blue:MAX(b - delta, 0.0)
                               alpha:a];
    return nil;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-02-09T12:44:59.290

***基于 @Sebyddd 答案的 Swift 扩展：***

```
import Foundation
import UIKit

extension UIColor{
    func colorWith(brightness: CGFloat) -> UIColor{
        var r:CGFloat = 0, g:CGFloat = 0, b:CGFloat = 0, a:CGFloat = 0

        if getRed(&r, green: &g, blue: &b, alpha: &a){
            return UIColor(red: max(r + brightness, 0.0), green: max(g + brightness, 0.0), blue: max(b + brightness, 0.0), alpha: a)
        }

        return UIColor()
    }
} 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2019-08-05T00:15:31.243

对于较深的颜色，这是最简单的： theColor = [theColor shadowWithLevel:s]; //s:0.0 到 1.0****

# hibernate - 休眠搜索条件

> ID：11598047
> 
> 赞同：0
> 
> 时间：2012-07-22T05:51:06.837
> 
> 标签：hibernate, join, hibernate-criteria

我正在尝试开发一个简单的高级搜索页面，用户可以在其中使用以下任何字段进行搜索

```
1) Student Roll no 
2) Student First name 
3) Student Last name 
4) Student date of birth 
```

所有字段都在 StudentInformation 持久性类中定义。

**学生信息.java**

```
Public Class StudentInformation { 

private long rollNo;
private String firstName;
private String lastName;
private Date dateOfBirth;

//getter and setters

} 
```

我创建了一个值对象（AdvanceSearchVo.java），我在其中定义了用户输入的变量

```
advanceSearchVo.setRollNo
advanceSearchVo.setFirstName
advanceSearchVo.setLastName
advanceSearchVo.setDateOfBirth 
```

在这里，我将 VO 对象传递给 DAO 层。

```
List<StudentInformation> getAllSearchRecords = service.getAdavanceSearchRecords(advanceSearchVo); 
```

根据输入的值“getAllSearchRecords”存储从数据库中获取的所有结果。

在 DAO

```
@Override
public List<StudentInformation> getAdavanceSearchRecords(AdvanceSearchVo advanceSearchVo) {

        Session session = HibernateUtil.getSessionFactory().openSession();

        Criteria criteria = session.createCriteria(PersonInfoMasterDomain.class);

        if(advanceSearchVo.getRollNo()!=null){

            criteria.add(Restrictions.eq("rollNo",advanceSearchVo.getRollNo()));

        }

        if(advanceSearchVo.getFirstName()!=null){

            criteria.add(Restrictions.eq("firstName",advanceSearchVo.getFirstName()));

        }

        if(advanceSearchVo.getLastName()!=null){

            criteria.add(Restrictions.eq("lastName",advanceSearchVo.getLastName()));

        }

        if(advanceSearchVo.getDateOfBirth()!=null){

            criteria.add(Restrictions.eq("dateOfBirth",advanceSearchVo.getDateOfBirth()));

        }

} 
```

当我根据 rollno（仅指定一个条件）进行搜索时，我得到了记录。当用户输入所有信息（即rollno、名字、姓氏和出生日期）或用户输入rollno 以外的任何字段时，我没有得到记录。

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:49:19.250

而不是使用 Restrictions.eq 使用 Restrictions.like 比较字符串。在您的情况下，用于名字和姓氏的比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:04:15.260

如果你没有得到任何记录，那只是意味着数据库中没有记录符合条件。请注意，字符串上的相等性区分大小写和空格：它会查找完全匹配的内容。也许您的条件或数据库中的名称中有尾随空格。

同样，日期上的相等性是完全匹配的。如果日期作为时间戳存储在数据库中并且类似于 2012-07-22 12:43:05.757657，则传递 2012-07-22 00:00:00.000000 的日期将与存储在数据库中的日期不匹配。

# c - 动态分配具有 1 或 2 维的浮点 **

> ID：11598052
> 
> 赞同：0
> 
> 时间：2012-07-22T05:52:41.127
> 
> 标签：c

如何根据值 1 或 2 动态分配一维数组或二维数组？

该数组需要保存`frameCount`许多浮点数，但需要拆分为 1 或 2 个通道。第一个维度是通道数，第二个维度是帧数。如果有 2 个通道，`frameCount`则在 2 个维度之间进行拆分，例如 [channelNumber] [frameNumber]

我有以下代码，但我认为它不起作用。

```
float ** arrayToFill = (float **)malloc((frameCount*channelCount)*sizeof(float)); 
```

我的数组在调试器中看起来像这样

![在此处输入图像描述](../Images/6830cc1410bbe1268c3ef4b4dc271f57.png)

我需要将 float ** 传递给函数，以便它可以按如下方式填充数组

```
- (OSStatus) readFloatsConsecutive:(SInt64)numFrames intoArray:(float**)audio withOffset:(long)offset
{
OSStatus err = noErr;

if (!mExtAFRef) return -1;

int kSegmentSize = (int)(numFrames * mExtAFNumChannels * mExtAFRateRatio + .5);
if (mExtAFRateRatio < 1.) kSegmentSize = (int)(numFrames * mExtAFNumChannels / mExtAFRateRatio + .5);

AudioBufferList bufList;
UInt32 numPackets = numFrames; // Frames to read
UInt32 samples = numPackets * mExtAFNumChannels;
UInt32 loadedPackets = numPackets;

short *data = (short*)malloc(kSegmentSize*sizeof(short));
if (!data) {
    NSLog(@"data is nil");
    goto error;
}

bufList.mNumberBuffers = 1;
bufList.mBuffers[0].mNumberChannels = mExtAFNumChannels;
bufList.mBuffers[0].mData = data; // data is a pointer (short*) to our sample buffer
bufList.mBuffers[0].mDataByteSize = samples * sizeof(short);

@synchronized(self) {
    err = ExtAudioFileRead(mExtAFRef, &loadedPackets, &bufList);
}
if (err) goto error;

if (audio) {
    for (long c = 0; c < mExtAFNumChannels; c++) {
        if (!audio[c]) continue;
        for (long v = 0; v < numFrames; v++) {
            if (v < loadedPackets) audio[c][v+offset] = (float)data[v*mExtAFNumChannels+c] / 32768.f;
            else audio[c][v+offset] = 0.f;
        }
    }
}

error:
free(data);
if (err != noErr) return err;
if (loadedPackets < numFrames) mExtAFReachedEOF = YES;
mRpos += loadedPackets;
return loadedPackets;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:03:41.587

您的 malloc 语句是正确的，但您的类型是错误的。Malloc 返回一个地址（即指针），该地址处的内容是一系列浮点数中的第一个。也就是说，它返回一个指向浮点数的指针。

尝试

```
float * arrayToFill = malloc ( (frameCount * channelCount) * sizeof( float )); 
```

如果你真的需要一个指针指针，那么你可能需要 malloc 像这样的东西：

```
float ** arrayToFill = malloc(frameCount * sizeof(float *));
for(i=0;i<frameCount;i++)
  arrayToFill[i] = malloc(channelCount * sizeof(float)); 
```

但这只是一个猜测。您正在调用的函数**应该**清楚传递它的内容。

# oop - 状态模式似乎使用循环引用。为什么这样可以？

> ID：11598055
> 
> 赞同：10
> 
> 时间：2012-07-22T05:53:17.653
> 
> 标签：oop, design-patterns, state-pattern

我仍在尝试了解循环引用的危险。我经常读到它们只应在极少数情况下使用。但是，在规范的状态模式中，“状态”对象需要引用“上下文”对象才能引起转换，“上下文”对象需要引用“状态”对象才能触发它们的行为。

这不是循环引用吗？如果不是，它与循环引用有何关系？如果是这样，为什么这是可以接受的？

[http://en.wikipedia.org/wiki/State_pattern](http://en.wikipedia.org/wiki/State_pattern)

[http://sourcemaking.com/design_patterns/state](http://sourcemaking.com/design_patterns/state)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T06:16:13.623

两个对象可以相互***操作***，而不必相互***引用***。一般来说，循环引用是指 A 类和 B 类都有一个成员变量引用另一个的情况。正如 Wikipedia 文章中所实现的那样，没有循环引用，因为虽然 Context 存储了对 State 的引用，但 Context 作为方法的参数传递到 State，当方法在没有 State 的情况下完成执行时，它超出了范围存储了对它的引用。

# php - JSON 和 PHP 初学者

> ID：11598057
> 
> 赞同：1
> 
> 时间：2012-07-22T05:53:43.730
> 
> 标签：php, jquery

对不起这个简单的问题。

我使用以下代码将 JSON 对象发布到 PHP 页面：

```
 $.get("ProcessName.php", { name: "John" },
        function(data){
            alert("Data Loaded: " + data);
        }); 
```

我需要在 ProcessName.php 中编写什么代码才能让警报显示名称是 John？

我意识到我可以在客户端处理 JSON 对象，但这是一个简单的示例，可帮助我了解 PHP 页面如何读取从客户端发送的 JSON 对象。我准备了很多问题和初学者教程，但他们似乎都跳过了这个简单的步骤，或者我可能遗漏了一些东西。

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T05:59:21.667

在您的 ProcessName.php 页面中，提醒 John 您只需要

```
echo $_GET['name']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T06:04:07.530

js：

```
 $.get("ProcessName.php", { name: "John" },
        function(data){
            alert("Data Loaded: " + data);
        }); 
```

进程名称.php：

```
<?php

if($_GET['name'] == "John") {
    echo "This work!";
}

?> 
```

或睡觉

```
<?php

sleep(200); 

if($_GET['name'] == "John") {
    echo "This work!";
}

?> 
```

或者

```
<?php

echo $_GET['name'] == "John" ? "At works" : null;

?> 
```

例如:) 如果您需要对 html 使用附加响应

```
$.get("ProcessName.php", { name: "John" },
        function(data){
            $("#append").html(data);
        }); 
```

例如，您需要创建 div id=append！祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T06:32:34.707

在 Javascript/JQuery 中，如果您想访问 JSON，您可以编写

```
data.name 
```

如果您想获取页面上的发布值，您可以通过 2 种方式获取

```
$_POST['name']; 
```

和

```
$_REQUEST['name']; 
```

您还可以包括以下语句

```
if(isset($_POST['name']))
    echo "Name is ".$_POST['name']; 
```

有些人认为使用 $_REQUEST 是不好的做法，基本上 $_REQUEST 检查 $_POST 和 $_GET 中的名称。要清除您的概念，您可以[单击此处](https://stackoverflow.com/questions/2142497/whats-wrong-with-using-request)。

# php - 更新时绕过 cakePHP 验证

> ID：11598060
> 
> 赞同：1
> 
> 时间：2012-07-22T05:55:12.883
> 
> 标签：php, validation, cakephp

我有一个配置文件页面，当用户尝试更新他们的页面配置文件并且输入未根据验证规则进行验证时，它仍然继续保存（或至少输出成功消息），但没有任何数据被存储，它恢复到原始值。只有当验证规则通过时，它才会存储值。

我不确定如何解决这个问题，因为我的验证规则看起来是正确的。有任何想法吗？

**验证规则**

```
 public $validate = array(
    "username" => array(
        "email" => array(
            "rule" => "email",
            "message" => "The username must be a valid email address."
        ),
        "unique" => array(
            "rule" => "isUnique",
            "message" => "This username has already been registered."
        )
    ),
    "password" => array(
        "alphaNumeric" => array(
            "rule" => "alphaNumeric",
            "message" => "The password can only contain alpha-numeric characters"
        ),
        "between" => array(
            "rule" => array("between",8,12),
            "message" => "The password must contain between 8 - 12 characters."
        )
    ),
    "company" => array(
        "rule" => "notEmpty",
        "message" => "Please provide a company name"
    ),
    "first_name" => array(
        "rule" => "notEmpty",
        "message" => "Please provide the contact person's first name"
    ),
    "last_name" => array(
        "rule" => "notEmpty",
        "message" => "Please provide the contact person's last name"
    ),
    "telephone" => array(
        "numeric" => array(
            "rule" => "numeric",
            "message" => "The telephone number must be numeric"
        ),
        "maxLength" => array(
            "rule" => array("maxLength",10),
            "message" => "Your telephone umber must be 10 numbers."
        ) 
    ),
    "fax" => array(
        "numeric" => array(
            "rule" => "numeric",
            "message" => "The fax number must be numeric"
        ),
        "maxLength" => array(
            "rule" => array("maxLength",10),
            "message" => "Your fax umber must be 10 numbers."
        )
    ),
    "user_type_id" => array(
        "rule" => "numeric",
        "message" => "Please select a user type"
    ),
    "user_status_id" => array(
        "rule" => "numeric",
        "message" => "Please select the users status."
    )
); 
```

**控制器方法：**

```
 public function profile() {
    if($this->request->is('post') || $this->request->is('put')) {
        if($this->Auth->user("id") == $this->request->data['User']['id']) {
            $this->User->save($this->request->data);
            $this->Session->setFlash('Your profile has been updated','default',array('class'=>'success'));
        } else {
            $this->Session->setFlash("An error has occured updating your profile.");
        }
    }
    $this->request->data = $this->User->read(null,$this->Auth->user("id"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:53:30.917

问题在于您的 if 块。你身边没有`$this->User->save($this->request->data);`

所以你需要

```
if ($this->User->save($this->request->data)) {
    // set good flash
} else {
    // else set bad flash
} 
```

然后，当 Auth->user('id') 不等于发布数据时，您将需要一个（或者如果您只想提供通用消息，则将两者合并为 1 if 语句）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T06:54:24.710

您的验证可能工作正常。我认为问题是由于以下逻辑：

```
if($this->Auth->user("id") == $this->request->data['User']['id']) {
    $this->User->save($this->request->data);
    $this->Session->setFlash('Your profile has been updated','default',array('class'=>'success'));
} else {
    $this->Session->setFlash("An error has occured updating your profile.");
} 
```

if 语句仅检查当前登录的用户 ID 是否与表单中提交的用户 ID 匹配。如果 id 匹配，它会尝试保存记录。然后它将执行之后的行。

因此，无论 save 调用是否有效，它仍然会移动到下一行，`$this->Session->setFlash('Your profile has been updated','default',array('class'=>'success'));`. 这就是为什么它说配置文件每次都更新了。

你可能想要类似的东西：

```
if($this->Auth->user("id") == $this->request->data['User']['id']) {
    if ($this->User->save($this->request->data)) {
        $this->Session->setFlash('Your profile has been updated','default',array('class'=>'success'));
    } else {
        $this->Session->setFlash("An error has occured updating your profile.");
    }
} else {
    this->Session->setFlash("This is not your profile.");
} 
```

# clojure - 我可以在 Clojure REPL 提示符中添加换行符吗？

> ID：11598066
> 
> 赞同：2
> 
> 时间：2012-07-22T05:57:18.160
> 
> 标签：clojure

我是 Clojure 的新手。

我喜欢我的 REPL 提示周围有一点“空气”。空中我的意思是提示之间的空白行。

在 Python REPL 中，我可以`import sys`写`sys.ps1='\n>>> '`

或者，我可以`sys.ps1`在`code.interact`源代码中进行修改。

我在`c:\clojure\src\clj\clojure\main.clj`

```
(defn repl-prompt  
  "Default :prompt hook for repl"  
  []  
  (printf "%s=> " (ns-name *ns*))) 
```

我在处添加了一个换行符`"\n%s=>"`并启动了 REPL。

等等……那没用。`<sad face>`

我的问题是，为什么它不起作用？

我在 Windows XP (JVM=1.6.0) 上使用基本的 Clojure 1.4.0 REPL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T07:12:32.880

**例如**

```
user=> (defn prompt [] (printf "my\n%s=>" (ns-name *ns*)))
#'user/prompt
user=> (clojure.main/repl :prompt prompt)
my
user=> 
```

# php - 如何获取包含搜索项的数据

> ID：11598071
> 
> 赞同：0
> 
> 时间：2012-07-22T05:58:08.910
> 
> 标签：php, mysql, select

我尝试了以下代码来获取包含搜索项的数据。

```
$data = mysql_query("
            SELECT * FROM product_table
            WHERE product_name LIKE '%$no3%'
            ORDER BY autoid limit $no2,20"
        ) or die(mysql_error()); 
```

如果我尝试`kids`它的作品，但尝试`Kids Ski`对我不起作用。数据库中的条目是`Manbi Kids Carve Ski Glove`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:11:42.623

它不起作用，因为您的值不像“Kids Ski”，而是分别包含两个词..

你需要看看 RLIKE （即正则表达式）

[http://dev.mysql.com/doc/refman/5.0/en/regexp.html#operator_regexp](http://dev.mysql.com/doc/refman/5.0/en/regexp.html#operator_regexp)

看看这个答案..这是类似的问题...... [https://stackoverflow.com/a/9425088/1114536](https://stackoverflow.com/a/9425088/1114536)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:55:43.077

您可以`explode`根据您的情况分别检查每个单词：

```
$no3 = explode(' ', $no3);
$w = array();
foreach ($no3 as $v) $w[] = "product_name LIKE '%$v%'";
$no3 = implode(' AND ', $w);
$data = mysql_query("
        SELECT * FROM product_table
        WHERE $no3
        ORDER BY autoid limit $no2,20"
    ) or die(mysql_error()); 
```

如果您希望查询在**任何**给定单词匹配时返回结果，而不是**all**，请更改以下行：

```
$no3 = implode(' OR ', $w); 
```

# php - PHP File Creation File Extension Issues

> ID：11598073
> 
> 赞同：0
> 
> 时间：2012-07-22T05:58:55.943
> 
> 标签：php, mysql, file

I am using the script below to create an zipped (.tar.gz) .sql file of a mysql database (so I can then back the database file up). The problem is that when the file is created, for some reason the . in .sql and .tar.gz is not written properly and instead appears as a ? mark when I look at the file in terminal or any FTP program. Why is this script not properly creating a dot? Any advice? Could it be a language issue? My server is a VPS from Dreamhost and it's all in English.

Thanks!

```
<?php
ini_set("memory_limit","40M");

$dbhost = "host..."; 
$dbuser = "user...";
$dbpass = "pass...";
$dbname = "database...";

$backupfile = $dbname . ‘.sql’;
$backupzip = $backupfile . ‘.tar.gz’;
system("mysqldump -h $dbhost -u $dbuser -p$dbpass $dbname > $backupfile");
system("tar -czvf $backupzip $backupfile");

// Delete the unzipped file from the server
unlink($backupfile);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:07:49.537

it looks like you have some kind of weird single quotation marks around the file extensions. That could be what's causing your problem.

# grails - 为移动用户选择不同的 grails 布局

> ID：11598075
> 
> 赞同：1
> 
> 时间：2012-07-22T05:59:10.720
> 
> 标签：grails, web-applications, mobile

我有一个 web 应用程序，它将 main.gsp 定义为所有视图中使用的默认布局，并且我正在使用 spring-mobile 插件在移动视图和桌面视图之间切换。但我现在想在移动用户的 mobile.gsp 布局和 main.gsp 布局之间进行更改。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:01:24.883

由于您使用的是 Spring Mobile，您可以使用过滤器来拦截控制器调用并设置布局：

```
class MobileFilters {
    def filters = {
        mobileFilter(controller:'*', action:'*') {
            afterView = {     
               def layout = "main"
               withMobileDevice {
                   layout = "mobile"
               }
               session.layout = layout
           } 
        }
     }
} 
```

然后在你的 gsps 中

```
<meta name="layout" content="${session.layout}"> 
```

# java - The conversion of a nvarchar data type to a datetime data type resulted in an out-of-range value

> ID：11598077
> 
> 赞同：-1
> 
> 时间：2012-07-22T05:59:33.427
> 
> 标签：java, mysql

These are the data i am going to pass in,

3/8/2010 6:37:16 AM

while i have column declared as datetime type in db table. Its fishy that it did not worked as i have another java class doing similar query but succeeded passing into db.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:07:13.423

You need to `parse / convert` "string" value (using `SimpleDateFormat` or joda-time API) to `date-time` before you go for insert.

# xcode - install_name_tool on OS X Lion

> ID：11598082
> 
> 赞同：3
> 
> 时间：2012-07-22T06:01:09.420
> 
> 标签：xcode, macos, install-name-tool

I'm running OS 10.7.4 and cannot find install_name_tool. I have Xcode 4.3.3 installed through the App Store. Does anyone know where I can find/get install_name_tool?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T06:05:05.020

To be more precise, install the "Command Line Tools for Xcode" package from

[https://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)

in addition to your Xcode tools.

Which will make the tool available easily via the command line.

You can also install the command line tools via Xcode preferences in the "Downloads" pane:

![enter image description here](../Images/20ea8ada0bb88ad265cf2623f386a2b1.png)

+1 to Kevin for being faster than me, too. :-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T06:03:34.253

`/Applications/Xcode.app/Contents/Developer/usr/bin/install_name_tool`

# sed - 合并来自多行的一些数据

> ID：11598085
> 
> 赞同：1
> 
> 时间：2012-07-22T06:02:47.857
> 
> 标签：sed, awk

试图将数据合并到某些字段匹配的一行中。

```
12345,this,is,one,line,1
13567,this,is,another,line,3
14689,and,this,is,another,6
12345,this,is,one,line,4
14689,and,this,is,another,10 
```

输出

```
12345,this,is,one,line,1,4
13567,this,is,another,line,3
14689,and,this,is,another,6,10 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:18:25.413

```
awk -F',' '{if($1 in a) {a[$1]=a[$1] "," $NF} else {a[$1]=$0}} END {asort(a); for(i in a) print a[i]}' < input.txt 
```

适用于给定的示例。

这是同一 awk 脚本**parse.awk**的注释文件版本。请记住，此版本仅使用第一个字段作为统一行指示器。我将根据上面作者的评论重写它（除最后一个之外的所有字段）。

```
#!/usr/bin/awk -f

BEGIN { # BEGIN 部​​分在输入文件内容之前执行一次
    FS="," # 输入字段分隔符是逗号（可以在命令行中使用 -F 参数设置）
}

{ # main 部分在每个输入行上执行
    if($1 in a) { # 检查数组 'a' 是否已经包含一个在第一个字段中具有索引的元素
        a[$1]=a[$1] "," $NF # 如果条目已经存在，则连接当前行的最后一个字段
    }
    else { # 如果此行包含新条目
        a[$1]=$0 # 将其添加为新的数组元素
    }
}

END { # END 段在最后一行之后执行一次
    asort(a) # 对我们的数组 'a' 进行排序
    for(i in a) print a[i] # 这个循环遍历排序数组并打印它的内容
}

```

通过使用这个

```
./parse.awk input.txt 
```

这是另一个版本，它使用除最后一个字段之外的所有字段来比较行：

```
#!/usr/bin/awk -f

BEGIN { # BEGIN 部​​分在输入文件内容之前执行一次
    FS="," # 输入字段分隔符是逗号（可以在命令行中使用 -F 参数设置）
}

{ # main 部分在每个输入行上执行
    idx="" # 重置索引变量
    for(i=1;i<NF;++i) idx=idx $i # 加入除最后一个字段之外的所有字段以创建索引
    if(idx in a) { # 检查数组'a'是否已经包含一个在第一个字段中具有索引的元素
        a[idx]=a[idx] "," $NF # 如果条目已经存在，则连接当前行的最后一个字段
    }
    else { # 如果此行包含新条目
        a[idx]=$0 # 将其添加为新的数组元素
    }
}

END { # END 段在最后一行之后执行一次
    asort(a) # 按值对数组 'a' 进行排序
    for(i in a) print a[i] # 这个循环遍历排序数组并打印它的内容
}

```

随意询问任何进一步的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T06:29:50.760

这可能对您有用（GNU sed 和排序）：

```
sort -nt, -k1,1 -k6,6 file | 
sed ':a;$!N;s/^\(\([^,]*,\).*\)\n\2.*,/\1,/;ta;P;D' 
```

# javascript - How to highlight the first 10 characters of text using Javascript or jQuery?

> ID：11598089
> 
> 赞同：1
> 
> 时间：2012-07-22T06:03:40.347
> 
> 标签：javascript, jquery

I want to highlight the first 10 characters of text and also color occurrences of the word "paragraph".

```
<html>
 <body>
  This is a heading
  This is a paragraph.This is another paragraph.
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T06:21:14.863

将其视为您的 HTML 内容：

```
<div id="contents">
    This is a heading
    This is a paragraph.This is another paragraph.
</div> 
```

此 jQuery 代码将执行您想要的操作：

```
$(document).ready(function() {
    var data = $('#contents').text().trim();

    var str = "";

    for(var i = 0; i < 10; i++) {
        str += data[i];
    }

    data = data.replace( /paragraph/g, '<span style="font-weight: bold;">paragraph</span>' );
    data = data.replace( str, '<span style="background-color: yellow;">' + str + '</span>' );

    $('#contents').html( data );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T06:26:47.640

在 JS 中尝试此代码。

```
<!DOCTYPE html>
    <html>
    <body>

    <p>Click the button to highlight.</p>

    <p id="demo">This is a heading. This is a paragraph. This is another paragraph.</p>

    <button onclick="myFunction()">Try it</button>

    <script type="text/javascript">
    function myFunction()
    {
        var str= document.getElementById("demo").innerHTML;
        var str1 = "";

        for(var i = 0; i < 10; i++) {
            str1 += str[i];
        }
    var n=str.replace(str1,'<span style="font-weight: bold;">' + str1 + '</span>');
    document.getElementById("demo").innerHTML=n;
    }
    </script>

    </body>
    </html> 
```

# c# - 在方法中将数据集作为对象返回

> ID：11598094
> 
> 赞同：3
> 
> 时间：2012-07-22T06:04:15.610
> 
> 标签：c#, asp.net, sql-server

我正在编写一个方法，它将查询一个表并返回一个包含指定列的*Dataset对象。*此外，我的用户名和密码有问题，所以我正在使用*Windows*身份验证，但在我写的代码段中我不太确定这一点。

```
 protected void GetProgramList()
    {
        SqlConnection cn = new SqlConnection("server=Daffodils-PC/sqlexpress;Database=Assignment1;Trusted_Connection=Yes;");
        SqlCommand cmd = new SqlCommand("SELECT ProgramName FROM Program", cn);
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataSet1 ds1 = new DataSet1();

    } 
```

我一直在尝试遵循官方的 MS 文档，但我不确定我要去哪里？有人可以帮我提供一些链接或片段吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T06:21:54.207

我想说你在这里有 2 个选项：1\. 制作一个 DataSet 类变量，因此可以从整个类访问它的引用（将其访问修饰符设置为 public，以便可以从其他类访问它） 2\. 或创建一个方法及其返回类型为 DataSet。但在这种情况下，另一端也必须设置为接收 DataSet：

//2。解决方案：

```
 private void GetData()
    {
        //from inside some method:
        DataSet ds = GetProgramList();
    }

    protected DataSet GetProgramList()
    {
        DataSet ds1 = new DataSet();
        using (SqlConnection cn = new SqlConnection("server=Daffodils-PC/sqlexpress;Database=Assignment1;Trusted_Connection=Yes;"))
        {
            using (SqlDataAdapter da = new SqlDataAdapter(@"SELECT ProgramName FROM Program", cn))
                da.Fill(ds1, "TableName1");
        }
        return ds1;
    }
    //

//1\. solution:
class YourClass
{
    DataSet ds1;
    protected void GetProgramList()
    {
        SqlConnection cn = new SqlConnection("server=Daffodils-PC/sqlexpress;Database=Assignment1;Trusted_Connection=Yes;");
        SqlCommand cmd = new SqlCommand("SELECT ProgramName FROM Program", cn);
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        ds1 = new DataSet();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T00:33:54.340

将您的连接字符串放在 app.config 或 web.config 的 AppSettings 部分

```
 public string GetSqlConnection()
    {
        return  System.Configuration.ConfigurationManager.AppSettings["SqlConnectionString"];
    }

  public DataSet getDataSet(string sql)
    {
        DataSet ds = new DataSet();
        SqlConnection conn = new SqlConnection(GetSqlConnection());
        SqlDataAdapter da = new SqlDataAdapter(sql, conn);
        da.Fill(ds);
        conn.Close();
        conn.Dispose();
        da.Dispose();
        return ds;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T06:09:41.290

建议：“使用” System.Data 和 System.Data.SqlClient，并使用“SqlDataReader”：

*   [http://www.csharp-station.com/Tutorial/AdoDotNet/lesson04](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson04)

要么读取例程中的所有内容（通常首选），要么将 SqlDataReader 传递回调用者（作为函数返回）。

完成后请务必 .Close() 阅读器 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T06:22:08.487

[SQLDataAdapter basic](http://www.dotnetperls.com/sqldataadapter "SQLDataAdapter 基本")将帮助您开始创建连接并在代码中使用它的基础知识。

# javascript - AngularJS Failed Resource GET

> ID：11598097
> 
> 赞同：29
> 
> 时间：2012-07-22T06:05:00.027
> 
> 标签：javascript, json, angularjs

Does anyone know how you can check to see that a resource failed to be fetched in AngularJS?

For example:

```
//this is valid syntax
$scope.word = Word.get({ id : $routeParams.id },function() {
    //this is valid, but won't be fired if the HTTP response is 404 or any other http-error code
});

//this is something along the lines of what I want to have 
//(NOTE THAT THIS IS INVALID AND DOESN'T EXIST)
$scope.word = Word.get({ id : $routeParams.id },{
    success : function() {
      //good
    },
    failure : function() {
      //404 or bad
    }
}); 
```

Any ideas?

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-22T09:39:49.250

当出现错误时，应在您的第一个回调函数之后触发一个附加回调函数。取自[文档](http://docs.angularjs.org/api/ngResource.$resource)和群组[帖子](https://groups.google.com/d/msg/angular/tBVHfGCMeEs/tkbKQfMzDWcJ)：

```
$scope.word = Word.get({ id : $routeParams.id }, function() {
    //good code
}, function(response) {
    //404 or bad
    if(response.status === 404) {
    }
}); 
```

> *   HTTP GET“类”操作：Resource.action([parameters], [success], [error])
> *   非 GET “类”操作：Resource.action([parameters], postData, [success], [error])
> *   非 GET 实例操作：instance.$action([parameters], [success], [error])

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T09:37:24.033

也只是为了回答@Adio 的问题。

当任何 http 响应代码被 AngularJS 视为错误时，将调用第二个回调（只有 [200, 300] 中的响应代码被视为成功代码）。所以你可以有一个通用的错误处理功能，而不关心具体的错误。那里的 if 语句可用于根据错误代码执行不同的操作，但这不是强制性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T05:43:26.293

这只是为了告知。

从 Angular 1.6.x 开始，不推荐使用成功和失败。所以现在请跟随 then 和 catch 代表成功和失败。

因此，上面的代码在 angular 1.6.x 中看起来如下：

```
$scope.word = Word.get({ id : $routeParams.id }).then(=> () {
    //this is valid, but won't be fired if the HTTP response is 404 or any  other http-error code
}).catch(=> () {
    // error related code goes here
}); 
```

# ffmpeg - Creating png thumbnail with ffmpeg gives error msg "error padding picture"

> ID：11598102
> 
> 赞同：2
> 
> 时间：2012-07-22T06:06:53.797
> 
> 标签：ffmpeg, png, thumbnails, padding, jpeg

I am trying to create a thumbnail image of a video with padding on the top and bottom. It works well if I want to create a jpeg image, but in case of png it dumps the error msg "`error padding picture`"

The command I am using is:

```
ffmpeg -ss 0 -vframes 1 -i video.avi -padleft 0 -padright 0 -padtop 22 \
-padbottom 22 -s 128x84 quik.png 
```

If I just change the output file to "`quik.jpeg`" it works. Is there any way to create a padded png image through ffmpeg? Am I doing something obviously wrong here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:17:34.670

是的——您正在使用这些`-pad`选项。它们甚至不再在较新版本的 ffmpeg 中可用；您应该改用`pad`过滤器：

```
ffmpeg -ss 0 -vframes 1 -i video.avi \
  -vf scale=128:-1,pad=128:128:0:oh/2-ih/2 \
  quik.png 
```

分解`-vf`：

```
scale=128:-1 
```

使用适合纵横比的任何高度将图像缩放到 128 宽。

```
pad=128:84:0:oh/2-ih/2 
```

将图像填充为 128x84，将输入图像放置在 Y 坐标处`oh/2-ih/2`（其中`oh`是 84 的输出高度，并且`ih`是输入图像的高度），使其在输出中居中。

请注意，如果您的视频高于宽度（因此需要水平填充而不是垂直填充），则此过滤器字符串将不起作用。解决方案，我留给读者。

# android - 如何通过在android中的屏幕上按四个不同的方向移动对象

> ID：11598110
> 
> 赞同：-1
> 
> 时间：2012-07-22T06:08:03.250
> 
> 标签：android

这是为了学习目的。我有一个应该响应触摸的小块。如果我触摸屏幕顶部，如果我触摸屏幕右侧，它应该向前和向右移动。有人可以帮助我编写代码以及我应该阅读什么主题来了解这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:13:00.860

您在检测某人触摸的位置、绘制物体或移动物体时遇到了哪些问题？

无论如何，我会从一些 Android 教程开始，这些教程会引导您创建一个带有对象的应用程序，一旦您完成了，其余的就应该变得显而易见了——这才刚刚开始，这很难。

检测触摸：[如何在 Android 移动对象上检测触摸输入：](https://stackoverflow.com/questions/3142670/how-do-i-detect-touch-input-on-the-android) [http](http://obviam.net/index.php/moving-images-on-the-screen-with-androi/) ://obviam.net/index.php/moving-images-on-the-screen-with-androi/

# ruby-on-rails - ActiveAdmin 显示默认视图内容

> ID：11598116
> 
> 赞同：15
> 
> 时间：2012-07-22T06:09:25.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我正在使用 ActiveAdmin，需要对某些视图进行自定义，并且遇到了一些我觉得我做错了的场景。

我正在向显示视图添加一个附加表（对帖子的评论）。这需要我重写整个属性表，然后添加我的面板。有没有办法在不丢失默认内容的情况下自定义视图？

我还想在显示视图上添加一个不需要自定义的关联项目表，有没有办法将通常在索引视图上的默认故事包含在默认操作和分页中？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-29T21:20:16.953

在挖掘了[Active Admin 的源代码后](https://github.com/gregbell/active_admin/blob/master/lib/active_admin/views/pages/show.rb)，我找到了一种修补它的方法

```
 show do
    default_main_content
    panel "Your Added Stuff" do
      # Add stuff here
    end
  end 
```

当然，这是无证的，可能被认为是一种 hack，但除非存在任何其他解决方案，否则它可以工作。

注意：要在表单操作（新建和编辑）中执行此操作：

```
 form do |f|
    f.inputs
    # Other inputs here

    f.actions
  end 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-03-26T10:15:19.803

除了使用`default_main_content`，您还可以像这样遍历模型上的列：

```
ActiveAdmin.register Ad do
  show do
    attributes_table do
      default_attribute_table_rows.each do |field|
        row field
      end

      # Custom bits here

    end
  end
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-30T17:51:51.747

文档的几个方面可能会对您有所帮助：

1.  请参阅[自定义显示页面](http://activeadmin.info/docs/6-show-pages.html)、[自定义索引页面](http://activeadmin.info/docs/3-index-pages.html)、[自定义表单](http://activeadmin.info/docs/5-forms.html)和[自定义页面](http://activeadmin.info/docs/10-custom-pages.html)。自定义显示屏幕的示例：

    ```
    ActiveAdmin.register Ad do
      show do |ad|
        default_main_content
        h3 ad.title
      end
    end 
    ```

2.  请参阅文档的[自定义控制器操作](http://activeadmin.info/docs/8-custom-actions.html)部分中的自**定义操作项。**一个例子：

    ```
    action_item :only => :show, :if => proc{ current_admin_user.super_admin? } do
         "Only display this to super admins on the show screen"
    end 
    ```

**NB** `default_main_content`不再存在于文档中，但它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-09T10:28:26.887

自己想通了：对于默认表索引页面，您可以执行以下操作

```
index do
  h1 "Hello World"
  p "get more content"

  instance_eval(&default_table)
end 
```

# angularjs - AngularJS $将表单数据保存在单独的哈希中

> ID：11598124
> 
> 赞同：1
> 
> 时间：2012-07-22T06:11:39.077
> 
> 标签：angularjs

使用这个设置，我可以在 AngularJS 中保存一个表单。

我希望将数据值推送到服务器（通过 $save 方法），如 name="" 属性中定义的那样。

所以像这样提交的表单看起来像这样：

### 理想形式数据

```
{
  book: {
    word : '...',
    book : '...',
    page : '...'
  }
} 
```

但它直接作为散列提交（没有内部书芯）。

这是我的表单和控制器的样子：

### 我的表格

```
<div>
  <form data-ng-submit="save()">
    <ol class="fields">
      <li>
        <div class="label">
          <label for="word">Word: </label>
        </div>
        <div class="details">
          <input type="text" name="word[word]" data-ng-model="word.word" />
        </div>
      </li>
      <li>
        <div class="label">
          <label for="book">book: </label>
        </div>
        <div class="details">
          <input type="text" name="word[book]" data-ng-model="word.book" />
        </div>
      </li>
      <li>
        <div class="label">
          <label for="page">page: </label>
        </div>
        <div class="details">
          <input type="text" name="word[page]" data-ng-model="word.page" />
        </div>
      </li>
    </ol>
    <nav class="actions">
      <input type="submit" value="save" />
    </nav>
  </form>
</div> 
```

### 我的控制器（角度）

```
var saveCtrl = function($scope, $routeParams, Word, $location) {
  $scope.word = Word.get({
    id : $routeParams.id 
  });
  $scope.save = function() {
    $scope.word.$save({
      id : $scope.word.id
    });
    $location.path('/').replace();
  };
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:10:16.297

也许这样的事情会在你的控制器中工作：

```
Word.save({
  id : $scope.word.id
}, {
  book : { word: $scope.book }
}); 
```

取自[文档](http://docs.angularjs.org/api/ngResource.%24resource)，我认为您需要设置`postData`以覆盖正在发布的默认数据。

> 非 GET “类”操作：Resource.action([parameters], postData, [success], [error])

# actionscript-3 - 从 XML 文件加载随机图像

> ID：11598130
> 
> 赞同：0
> 
> 时间：2012-07-22T06:12:55.437
> 
> 标签：actionscript-3, flash, flash-cs5

我几乎没有关于 AS3/Flash CS5 的知识。

我需要从带有 url 列表的 XML 文件中加载随机图像。

每次我加载电影时，它都应该加载一个随机图像。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:22:35.500

我假设这是您的 xml 文件的样子：

```
<images>
    <image url="http://url_to_image/1.png" width="100" height="100" />
    <image url="http://url_to_image/2.png" width="100" height="100" />
    <image url="http://url_to_image/3.png" width="100" height="100" />
    <image url="http://url_to_image/4.png" width="100" height="100" />
    <image url="http://url_to_image/5.png" width="100" height="100" />
</images> 
```

以下是您要从中随机获得一个：

```
private function randomImage(imagesXML:XML):Object {
    var imageList:XMLList=imagesXML.image;
    var imageCollection:XMLListCollection=new XMLListCollection(imageList);
    var random:int=Math.floor(Math.random() * imageCollection.length);
    var r:Object={};
    r.url=xmlCollection[random].@url;
    r.width=Number(xmlCollection[random].@width);
    r.height=Number(xmlCollection[random].@height);
    return r;
} 
```

这就是你如何称呼它：

```
private var x:XML=<images>
        <image url="http://url_to_image/1.png" width="100" height="100" />
        <image url="http://url_to_image/2.png" width="100" height="100" />
        <image url="http://url_to_image/3.png" width="100" height="100" />
        <image url="http://url_to_image/4.png" width="100" height="100" />
        <image url="http://url_to_image/5.png" width="100" height="100" />
    </images>;

var img:Object=randomImage(x); 
```

现在你有`img.url`, `img.width`,`img.height`

# php - FILTER_VALIDATE_EMAIL 不工作

> ID：11598131
> 
> 赞同：3
> 
> 时间：2012-07-22T06:12:56.300
> 
> 标签：php, validation, email-validation, filter-var

我当然必须在这里遗漏一些东西。由于某种原因 filter_var 不起作用。我正在尝试验证来自 $_POST 的电子邮件，即使电子邮件有效，它也会返回 false。但是，当我对电子邮件进行硬编码时，它可以正常工作。怎么了？

这是我的php代码：

```
function redirect() { //redirecting to home page function. Used in one of the lectures.
    $host = $_SERVER["HTTP_HOST"]; 
    $path = rtrim(dirname($_SERVER["PHP_SELF"]), "/\\");
    header("Location: http://$host$path/index.php");
    exit;
}

try 
{
    $dbh = new PDO($db, $dbuser, $dbpassword);
}
catch (PDOException $e) 
{
    echo "Connection failure: " . $e->getmessage();
}

if (!isset($_POST['email']) || !isset($_POST['password1']) || !isset($_POST['password2'])) {
    redirect();
}

$password1 = htmlspecialchars($_POST['password1']);
$email = htmlspecialchars($_POST['email']);
$password2 = htmlspecialchars($_POST['password2']);
//preg_match('/.+@.+\./', $email) == FALSE

if ($email = "") {
    print "email not there";

} elseif (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
    print "not real email";

} elseif (strlen($password1) < 6) {
    print("password too small");

}  elseif (!(preg_match('/[A-Za-z].*[0-9]|[0-9].*[A-Za-z]/', $password1))) {
    print "numbers and letters plz";

} elseif ($password1 != $password2) {
    print "passwords not same";
    //redirect();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:25:32.003

更改第一个电子邮件检查：

```
if ($email == "") {
    print "email not there";
} 
```

它正在获取价值`"`而不是检查它。

# tomcat - 连接到 Tomcat 中的服务器状态

> ID：11598133
> 
> 赞同：1
> 
> 时间：2012-07-22T06:13:39.740
> 
> 标签：tomcat

我按照此处列出的步骤[http://wolfpaulus.com/journal/mac/tomcat7](http://wolfpaulus.com/journal/mac/tomcat7)在 Mac 上安装 Tomcat 并启动服务器并转到 Tomat Localhost 页面。我点击的那个页面中有服务器状态按钮，它要求用户/通行证，它不让我进入。从这一点开始我需要做更多的设置吗？

![在此处输入图像描述](../Images/803f03f2c4dc01d640aeb6dfe7981125.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:20:55.127

您必须设置`username, password and role`才能访问管理器应用程序。

打开文件夹和条目`tomcat-users.xml`下的。`conf``<user/>`

```
<tomcat-users>
     ...  
    <user name="admin" password="admin" roles="admin-gui,manager-gui,manager-script,admin"/>
</tomcat-users> 
```

# c# - C#正则表达式跳过一些特殊字符

> ID：11598134
> 
> 赞同：0
> 
> 时间：2012-07-22T06:13:46.580
> 
> 标签：c#, regex

我是 Regex 的新手，并试图学习这一点。我的要求是仅在字符串只有小字母时才认为它是有效的，绝对没有别的。例如：abc、khj、sdfs 是有效词，但 Abc、KHJ、123、a$bd 无效。

我正在写一个这样的正则表达式：

```
 private bool IsValid(string str)
 {
    Regex r = new Regex(@"[a-z][^<>%'=\$]");
    Console.WriteLine(str + " : " + r.IsMatch(str).ToString()); 
    return r.IsMatch(str);
 } 
```

但是当我将以下输入传递给此方法时：

```
"a<>'b=b"
 "abc"
 "a$b"
"123"
"IHH" 
```

它被识别`abc`为有效，但它也被识别`a$b`为`a<>'b=b`有效词！（返回`true`那些）我想了解如何跳过`a$b`以及`a<>'b=b ??`该方法应该返回`false`给他们。

请帮我理解。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:34:32.417

以适当的模式使用这种方法：

```
private bool IsValid(string str)
 {
    Regex r = new Regex(@"^[a-z]+$");
    Console.WriteLine(str + " : " + r.IsMatch(str).ToString()); 
    return r.IsMatch(str);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T06:19:36.040

你的正则表达式看起来像

```
var pat = /^[a-z]+$/; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T06:20:24.587

很好的参考：[RegEx 备忘单](http://regexlib.com/cheatsheet.aspx)

尝试这个：`^[a-z]+$`

# c - 如果 argv[] 是一个指针数组，那么 printf("%s", argv[]) 如何工作？

> ID：11598136
> 
> 赞同：2
> 
> 时间：2012-07-22T06:14:17.350
> 
> 标签：c, pointers, argv

在以下代码中：

```
#include<stdio.h>

int main(int argc,char *argv[]){
  int index;
  for(index = 0; index < argc; index++) {
    printf("The %d is %s\n",index,argv[index]);
  }
  return 0;
} 
```

从声明`char *argv[]`中，[cdecl](http://www.cdecl.org/)说这意味着 `declare argv as array of pointer to char`，所以我认为代码应该这样写： `printf("The %d is %s\n",index,*argv[index]);`

如以下代码：

```
void give_me_ptr(int *ptr){
  printf("the value of ptr is %p\n", ptr);
  printf("the value of ptr is %d\n", *ptr);
}

int main(void){
  int a = 10,index;
  give_me_ptr(&a);
  return 0;
} 
```

事实证明

```
the value of ptr is 0x7fff76010b48
the value of ptr is 10 
```

对我来说，这意味着我应该在指针变量之前添加 *。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T06:18:29.890

在`printf`函数中，格式说明符`%s`需要一个*指向*字符串第一个字符的指针作为相应的参数。这就是你传递`argv[index]`给它的原因。`argv[index]`是一个指针。

如果你通过了`*argv[index]`，你将只传递字符串的第一个字符`argv[index]`，这是不正确的。`%s`需要指向第一个字符的指针，而不是字符本身。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T06:17:45.910

c 风格的字符串说明符`%s`需要一个指向字符串第一个字符的字符指针。在调用类似的东西`printf()`时，它会将指针中的字符打印到最近的空字符。

`%d`另一方面，需要一个实际的整数，而不是指向整数的指针。当您将字符串指向 时`argv[index]`，它会转换为`*argv+index`，它是指向**位置编号**:index 处第一个字符的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T06:19:29.217

需要澄清两点：

1）考虑argv的这种表示：

```
char *argv[] = { "./progname", "arg1", "arg2", NULL }; 
```

正如在符合标准的实现中给出的那样。现在 argv 的每个元素本身就是一个字符串（char 指针），不再需要取消引用它们——在这种情况下，你只得到字符串的第一个字符。

2) 即使您希望将整数参数提供给您的程序，也不要使用 %d printf 说明符——参数***始终作为字符串传递***！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T06:19:48.640

这就是`printf`行为方式：它使用带有 的指针`%p`或指向 char 的指针`%s`，但是带有 的整数`%d`。

[附带说明：从技术上讲，`argv`是 type `char **`，即使您将其声明为`char * argv[]`. 但是，它们是同义词。]

# javascript - 如何选择视口上的最后一个元素

> ID：11598138
> 
> 赞同：2
> 
> 时间：2012-07-22T06:15:30.793
> 
> 标签：javascript, constants, viewport

我正在寻找一种有效的方法来不断选择可见窗口/视口中的最后一个元素。

到目前为止，这是我的代码：

```
$(window).scroll(function () { 

$('.post-content p').removeClass("temp last")
$('.post-content p').filter(":onScreen").addClass("temp")

$(".temp").eq(-1).addClass("last")

    }); 
```

正如您可能想象的那样，这会占用大量资源并且表现不佳。有人可以从更优雅的代码中提出建议吗？

我的Javascript知识非常基础，所以请耐心等待。谢谢你。

PS：我正在为 :onScreen 选择器使用 onScreen 插件：[http ://benpickles.github.com/onScreen/](http://benpickles.github.com/onScreen/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T09:08:03.980

## 绑定滚动处理程序

将函数绑定到滚动事件[会导致严重的性能问题](http://ejohn.org/blog/learning-from-twitter/)。scroll 事件在页面滚动时会非常激烈地触发，因此将函数与资源密集型代码绑定到它是一个坏主意。

John 建议设置间隔，从而让代码仅在滚动事件后的一段时间内执行。

**[看看这个 jsfiddle 看看实现之间的区别](http://jsfiddle.net/3McbK/)**

间接处理程序解决方案的代价是滚动和执行代码之间存在明显的延迟，您可以决定是否可以用性能换取更快的执行。请务必在您支持的每个浏览器上测试性能。

## 加速代码执行

您可以使用许多不同的概念来加速您的代码。关于您的代码，归结为：

*   [缓存选择器](http://www.stoimen.com/blog/2010/06/19/speed-up-the-jquery-code-selectors-cache/)。每次滚动处理程序触发时都重新选择元素，这是不必要的
*   在不知道它们做什么的情况下不使用 jQuery 插件。在您的情况下，[插件代码](http://benpickles.github.com/onScreen/jquery.onscreen.js)很好而且非常简单，但是为了您的目标，您可以拥有更快速的代码。
*   防止*任何*不必要的计算。使用您和插件的代码，每次滚动处理程序触发时都会计算每个元素的偏移量。

所以我想出的是**[一个带有示例的 Jsfiddle，你可以如何滚动处理程序](http://jsfiddle.net/9Ssb3/)**。它与您的 DOM 不完全匹配，因为我不知道您的 html，但应该很容易将它与您的实现匹配。

[与您的代码](http://jsfiddle.net/hq64T/)相比，我设法将使用的时间减少了 95% 。您可以通过在 chrome 中分析这两个示例来亲自查看。

*我假设您只想选择最后一个元素并且不需要临时类*

### 所以，这是带有解释的代码

```
// Store the offsets in an array
var offsets = [];
// Cache the elements to select
var elements = $('.elem');
// Cache the window jQuery Object
var jWindow = $(window);
// Cache the calculation of the window height
var jWindowHeight = jWindow.height();
// set up the variable for the current selected offset
var currentOffset;
// set up the variable for the current scrollOffset
var scrollOffset;
// set up the variable for scrolled, set it to true to be able to assign at
// the beginning
var scrolled = true;

// function to assign the different elements offsets,
// they don't change on scroll
var assignOffsets = function() {
    elements.each(function() {
        offsets.push({
            offsetTop: $(this).offset().top,
            height: $(this).height(),
            element: $(this)
        });
    });
};

// execute the function once. Exectue it again if you added
// or removed elements
assignOffsets();

// function to assign a class to the last element
var assignLast = function() {
    // only execute it if the user scrolled
    if (scrolled) {
        // assigning false to scrolled to prevent execution until the user
        // scrolled again
        scrolled = false;

        // assign the scrolloffset
        scrollOffset = jWindowHeight + jWindow.scrollTop();

        // only execute the function if no current offset is set,
        // or the user scrolled down or up enough for another element to be
        // the last
        if (!currentOffset || currentOffset.offsetTop < scrollOffset || currentOffset.offsetTop + currentOffset.height > scrollOffset) {

            // Iterate starting from the bottom
            // change this to positive iteration if the elements count below 
            // the fold is higher than above the fold
            for (var i = offsets.length - 1; i >= 0; i--) {

                // if the element is above the fold, reassign the current
                // element
                if (offsets[i].offsetTop + offsets[i].height < (scrollOffset)) {
                    currentOffset && (currentOffset.element.removeClass('last'));
                    currentOffset = offsets[i];
                    currentOffset.element.addClass('last');
                    // no further iteration needed and we can break;
                    break;
                }
            }
            return true;
        } else {
            return false;
        }
    }
}

assignLast();

// reassign the window height on resize;
jWindow.on('resize', function() {
    jWindowHeight = jWindow.height();
});

// scroll handler only doing assignment of scrolled variable to true
jWindow.scroll(function() {
    scrolled = true;
});

// set the interval for the handler
setInterval(assignLast, 250);

// assigning the classes for the first time
assignLast(); 
```

# sql - 计算“复杂”t-SQL 语句中的更新记录

> ID：11598141
> 
> 赞同：4
> 
> 时间：2012-07-22T06:16:12.777
> 
> 标签：sql, sql-server, tsql, sql-update, rowcount

我有以下 SQL Server 2008 表：

```
CREATE TABLE tbl (ID INT, dtIn DATETIME2, dtOut DATETIME2, Type INT, nID INT)
INSERT tbl VALUES
(1, '05:00', '10:00', 1, 1),  --will be changed
(2, '08:00', '16:00', 2, 1),
(3, '02:00', '08:00', 1, 1),  --will be changed
(4, '07:30', '11:00', 1, 1) 
```

我使用以下 SQL 更新部分重叠的记录：

```
UPDATE tbl
SET dtOut = COALESCE((
    SELECT MIN(dtIn)
    FROM tbl as t2
    WHERE t2.type = tbl.type AND
          t2.id <> tbl.id AND
          t2.dtIn >= tbl.dtIn AND t2.dtIn < tbl.dtOut
    ), dtOut)
WHERE nID=1;

SELECT ROWCOUNT_BIG(); 
```

使用最后一个 SELECT 我想检索更新的记录数，但它不起作用。

所以我的问题是，我怎样才能重写这个语句来获得实际更新的记录数？（以上数据表中的2。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:39:43.973

SQL Server 将更新原始示例中的所有行。像这样的东西怎么样：

```
WITH CTE AS (
    SELECT t1.ID, MIN(t2.dtIn) as New_dtOut
    FROM tbl as t1
    LEFT JOIN tbl AS t2 ON t2.type = t1.type AND t2.id <> t1.id
           AND t2.dtIn >= t1.dtIn AND t2.dtIn < t1.dtOut 
    WHERE t1.nID = 1
    GROUP BY t1.ID
)
UPDATE t1 SET dtOut = t2.New_dtOut
FROM tbl t1
JOIN CTE t2 on t2.ID = t1.ID 
WHERE t1.dtOut <> t2.New_dtOut

SELECT ROWCOUNT_BIG(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T18:38:16.403

1.只需删除最后一个分号之前`SELECT`

```
UPDATE tbl
SET dtOut = COALESCE((
    SELECT MIN(dtIn)
    FROM tbl as t2
    WHERE t2.type = tbl.type AND
          t2.id <> tbl.id AND
          t2.dtIn >= tbl.dtIn AND t2.dtIn < tbl.dtOut
    ), dtOut)
WHERE nID=1
SELECT @@ROWCOUNT; 
```

...它现在返回一些东西 - 4 - 这是因为 UPDATE 正在对*所有*行进行操作，而不仅仅是您需要的 2。

2\. 越来越近 - 以下仅对类型 1 的 3 行进行操作：

```
update x  
set x.dtout = y.mn
from tbl x 
inner join  
  (  
  SELECT t1.type, min(t1.dtIn) mn
  FROM tbl t1
    inner join tbl t2
    on 
      t1.type = t2.type AND
      t1.id <> t2.id AND
      t1.dtIn >= t2.dtIn AND 
      t1.dtIn < t2.dtOut
  group by t1.type
  ) y
  on 
      x.type = y.type
SELECT @@ROWCOUNT; 
```

[这是上面的 SQL 小提琴](http://sqlfiddle.com/#!3/c43c7/17)

3.感谢@Gilm，我已经完成了我希望没问题的事情；它与 Gilm 的 CTE 答案中使用的逻辑非常相似：

```
update x  
set x.dtout = y.mn
from tbl x 
inner join  
  (  
  SELECT t1.id, min(t2.dtIn) mn
  FROM tbl t1
    inner join tbl t2
    on 
      t1.type = t2.type AND
      t1.id <> t2.id AND
      t2.dtIn >= t1.dtIn AND 
      t2.dtIn < t1.dtOut
  group by t1.id
  ) y
  on 
      x.id = y.id
SELECT @@ROWCOUNT; 
SELECT * FROM tbl; 
```

[关于这里的 SQL 小提琴](http://sqlfiddle.com/#!3/c43c7/38)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T07:32:35.197

`WHERE nID=1`正在决定将更新多少行。甚至您分配`dtOut`给自​​身的行也会被更新和计数。

您可以使用输出子句并在表变量中捕获更新的行，然后计算`dtOut`已更改的行。

```
DECLARE @T TABLE
(
  dtOutOld DATETIME2,
  dtOutNew DATETIME2
)

UPDATE tbl
SET dtOut = COALESCE((
    SELECT MIN(dtIn)
    FROM tbl as t2
    WHERE t2.type = tbl.type AND
          t2.id <> tbl.id AND
          t2.dtIn >= tbl.dtIn AND t2.dtIn < tbl.dtOut
    ), dtOut)
OUTPUT deleted.dtOut, inserted.dtOut INTO @T
WHERE nID=1

SELECT COUNT(*)
FROM @T 
WHERE dtOutOld <> dtOutNew 
```

[SQL小提琴](http://sqlfiddle.com/#!3/c43c7/49/0)

# android - 为什么 AVD 不启动我的 Android 应用程序？

> ID：11598143
> 
> 赞同：0
> 
> 时间：2012-07-22T06:16:33.523
> 
> 标签：android, eclipse, avd

我只是在学习Android开发。我在 Eclipse 中创建了一个新的 Android 应用程序项目，它创建了一个基本的 hello world。Eclipse 会启动 AVD，但不会启动 HelloWorld 应用程序。它设法启动了一次应用程序。我将尝试提供有关我的设置的尽可能多的信息。任何建议将不胜感激。

*   Windows 7 家庭高级版 64 位
*   已安装 JDK 7u5 64 位
*   面向 Java 开发人员的 Eclipse IDE 64 位
*   已安装 Android ADT
*   已安装 Android SDK
    *   安卓 2.3.3 (API10)

当我创建一个新的 Android 应用程序项目时，我选择了 Build SDK:`Android 2.3.3 (API10)`和 Minimum Required SDK: `API10: Android 2.3.3 (Gingerbread)`。

**MainActivity.java**

```
package com.mytest.helloworld;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

**AndroidManifest.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mytest.helloworld"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我有一个使用`Android 2.3.3 - API Level 10`皮肤目标的 AVD `Default (WVGA800)`。没有自定义属性。

我`MainActivity.java`作为 Android 应用程序启动，AVD 启动，但 HelloWorld 应用程序没有。这是 Eclipse Android 控制台输出：

```
[2012-07-22 02:11:22 - HelloWorld] ------------------------------
[2012-07-22 02:11:22 - HelloWorld] Android Launch!
[2012-07-22 02:11:22 - HelloWorld] adb is running normally.
[2012-07-22 02:11:22 - HelloWorld] Performing com.mytest.helloworld.MainActivity activity launch
[2012-07-22 02:11:22 - HelloWorld] Automatic Target Mode: launching new emulator with compatible AVD 'Android_2.3.3'
[2012-07-22 02:11:22 - HelloWorld] Launching a new emulator with Virtual Device 'Android_2.3.3' 
```

这是我设法让它工作时的控制台输出：

```
[2012-07-21 15:51:57 - HelloWorld] ------------------------------
[2012-07-21 15:51:57 - HelloWorld] Android Launch!
[2012-07-21 15:51:57 - HelloWorld] adb is running normally.
[2012-07-21 15:51:57 - HelloWorld] Performing com.mytest.helloworld.MainActivity activity launch
[2012-07-21 15:51:57 - HelloWorld] Automatic Target Mode: launching new emulator with compatible AVD 'Android_2.3.3'
[2012-07-21 15:51:57 - HelloWorld] Launching a new emulator with Virtual Device 'Android_2.3.3'
[2012-07-21 15:51:58 - HelloWorld] New emulator found: emulator-5554
[2012-07-21 15:51:58 - HelloWorld] Waiting for HOME ('android.process.acore') to be launched...
[2012-07-21 15:52:06 - HelloWorld] HOME is up on device 'emulator-5554'
[2012-07-21 15:52:06 - HelloWorld] Uploading HelloWorld.apk onto device 'emulator-5554'
[2012-07-21 15:52:08 - HelloWorld] Installing HelloWorld.apk...
[2012-07-21 15:52:12 - HelloWorld] Success!
[2012-07-21 15:52:12 - HelloWorld] Starting activity com.mytest.helloworld.MainActivity on device emulator-5554
[2012-07-21 15:52:13 - HelloWorld] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.mytest.helloworld/.MainActivity } 
```

请记住，当我创建这个 Hello World 时，我没有编辑任何内容。我唯一输入的是项目的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:56:03.110

当我运行时，`adb devices`我没有看到我的 AVD 设备列出。看来我需要通过运行重新启动 adb 服务器：

`adb kill-server` `adb start-server`

我又跑`adb devices`了，看到我的 AVD 设备列出来了。我的 HelloWorld 应用程序终于运行了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T06:25:52.123

启动模拟器需要时间。然后它将启动您的应用程序。

不要每次都关闭模拟器，启动一次，然后只选择这个来运行你的应用程序......

# c# - 正则表达式帮助：获取除扩展名 .css、.js、.jpg、.gif、.png 之外的 URL 列表

> ID：11598146
> 
> 赞同：1
> 
> 时间：2012-07-22T06:17:49.403
> 
> 标签：c#, asp.net, regex

我在正则表达式中遇到问题。

我想从给定的字符串中获取所有 URL，但不想获取以 .jpg、.css、.js、.gif 等结尾的 URL。

这是我的 ASP.NET C# 代码，

```
 using (var client = new WebClient())
    {
        client.Headers[HttpRequestHeader.UserAgent] = "Mozilla/5.0 (Windows; U;   Windows NT 6.1; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13";
        string result = client.DownloadString(strBasicUrl);

        Regex MyRegex = new Regex("http(s)?://([\\w+?\\.\\w+])+([a-zA-Z0-9\\~\\!\\@\\#\\$\\%\\^\\&amp;\\*\\(\\)_\\-\\=\\+\\\\\\/\\?\\.\\:\\;\\'\\,]*)?", RegexOptions.Multiline | RegexOptions.CultureInvariant | RegexOptions.Compiled);
        MatchCollection matches = MyRegex.Matches(result);
        foreach (var item in matches)
        {
            litResult.Text += item.ToString() + "<br>";
        }
    } 
```

我想改变这个正则表达式......

```
如果我请求 strBasicUrl "http://www.Microsoft.com"，
那么它不应该是 URL 下面的结果
例如
http://i.microsoft.com/en-us/homepage/shared/templates/components/hpSearch/images/searchSprite.ltr.gif
http://i.microsoft.com/global/ImageStore/PublishingImages/Asset/Header/logo_skype.png

```

任何人都可以帮助我，非常感谢。

提前致谢， 阿米特 Prajapati

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:28:21.543

我会在你拿到比赛后做，比如（感谢 nhahtdh）：

```
 foreach (var item in matches)
        if (!Regex.IsMatch (item.Value, @"\.(jpg|gif)$"))
            litResult.Text += item.ToString() + "<br>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T08:32:05.347

我想迈克已经回答了你的问题，但是自从你提出这个问题后我就一直在思考这个问题，并且由于你的问题，我学会了正则表达式中的向前看、向后看和消极向后看。

因此，如果您不想在循环中触发正则表达式，这是一种替代方法。

```
public Regex MyRegex = new Regex(
  "href=\"(?<URL>(?:(?!javascript)(?!#))[a-zA-Z0-9\\~\\!\\@\\#\\$"+
  "\\%\\^\\&amp;\\*\\(\\)_\\-\\=\\+\\\\\\/\\?\\.\\:\\;\\'\\,]+)"+
  "(?<!(?:\\.png|\\.js|\\.jpg|\\.jpeg|\\.css|\\.gif|\\.zip|\\.r"+
  "ar))\"(?:$|>|\\s)",
RegexOptions.Multiline
| RegexOptions.CultureInvariant
| RegexOptions.Compiled
); 
```

为了便于阅读，这里是正则表达式（没有转义序列）：

```
href="(?<URL>(?:(?!javascript)(?!#))[a-zA-Z0-9\~\!\@\#\$\%\^\&amp;\*\(\)_\-\=\+\\\/\?\.\:\;\'\,]+)(?<!(?:\.png|\.js|\.jpg|\.jpeg|\.css|\.gif|\.zip|\.rar))"(?:$|>|\s) 
```

假设你正在开发一个爬虫，你的正则表达式不匹配相对链接，当我们匹配相对链接时，你不应该匹配以 javascript 或 #(anchors) 开头的链接。

在这里你可以看到，我们正在捕获命名组，组的名称是“URL”。因此，要获取您需要使用的 url 部分（您可能已经知道）：

```
match.Groups["URL"] 
```

以下是正则表达式的解释：

```
///      href="
///  [URL]: A named capture group. [(?:(?!javascript)(?!#))[a-zA-Z0-9\~\!\@\#\$\%\^\&amp;\*\(\)_\-\=\+\\\/\?\.\:\;\'\,]+]
///      (?:(?!javascript)(?!#))[a-zA-Z0-9\~\!\@\#\$\%\^\&amp;\*\(\)_\-\=\+\\\/\?\.\:\;\'\,]+
///          Match expression but don't capture it. [(?!javascript)(?!#)]
///              (?!javascript)(?!#)
///                  Match if suffix is absent. [javascript]
///                      javascript
///                          javascript
///                  Match if suffix is absent. [#]
///                      #
///          Any character in this class: [a-zA-Z0-9\~\!\@\#\$\%\^\&amp;\*\(\)_\-\=\+\\\/\?\.\:\;\'\,], one or more repetitions
///  Match if prefix is absent. [(?:\.png|\.js|\.jpg|\.jpeg|\.css|\.gif|\.zip|\.rar)]
///      Match expression but don't capture it. [\.png|\.js|\.jpg|\.jpeg|\.css|\.gif|\.zip|\.rar]
///          Select from 8 alternatives
///              \.png
///                  Literal .
///                  png
///              \.js
///                  Literal .
///                  js
///              \.jpg
///                  Literal .
///                  jpg
///              \.jpeg
///                  Literal .
///                  jpeg
///              \.css
///                  Literal .
///                  css
///              \.gif
///                  Literal .
///                  gif
///              \.zip
///                  Literal .
///                  zip
///              \.rar
///                  Literal .
///                  rar
///  "
///  Match expression but don't capture it. [$|>|\s]
///      Select from 3 alternatives
///          End of line or string
///          >
///          Whitespace
/// 
```

这样您就不需要在循环中运行第二个正则表达式。您将获得绝对和相对 url。

希望能帮助到你...

# c# - 对大量数据使用列表、查找或字典

> ID：11598148
> 
> 赞同：9
> 
> 时间：2012-07-22T06:18:14.787
> 
> 标签：c#, list, dictionary, lookup

我的类库中有一个名为 Lookup 的静态类，我正在使用这个类来查找不同的值（在本例中为 Locations）。

这些值可以达到数百个。由于 95% 的客户将我的应用程序安装在无法访问 Internet 的机器上，因此我不得不假设我的应用程序无法访问 Internet 或访问数据库。

所以我想知道这是否是一种有效的处理方法，以及在方法完成时我是否正确地处理了对象：

**代码 ：**

```
using System;
using System.Collections.Generic;

namespace FunctionLibrary
{
    public static class Lookups
    {
        private static List<Vers> Versions;

        public static string GetVersion(string s)
        {
            string retValue = string.Empty;
            Versions = new List<Vers>();

            try
            {
                if (s.Trim().Length > 0)
                {

                    GetVersions();
                    retValue = Versions.Find(ver => ver.VersionNumber == s).VersionLiteral;

                    if (string.IsNullOrEmpty(retValue))
                    {
                        retValue = string.Format("{0} is an Unknown Version Number", s);
                    }
                }
                else
                {
                    retValue = "No version number supplied";
                }
            }
            catch
            {
                retValue = string.Format("{0} is an Unknown Version Number", s);
            }
            finally
            {
                Versions.Clear();
                Versions = null;
            }
            return retValue;
        }

        private static void GetVersions()
        {
            Versions.Add(new Vers() { VersionNumber = "0000", VersionLiteral = "Location 1" });
            Versions.Add(new Vers() { VersionNumber = "0001", VersionLiteral = "Location 2" });
            Versions.Add(new Vers() { VersionNumber = "0002", VersionLiteral = "Location 3"});
            Versions.Add(new Vers() { VersionNumber = "0003", VersionLiteral = "Location 4"});
            Versions.Add(new Vers() { VersionNumber = "0004", VersionLiteral = "Location 5"});
            Versions.Add(new Vers() { VersionNumber = "0005", VersionLiteral = "Location 6"});
            Versions.Add(new Vers() { VersionNumber = "0006", VersionLiteral = "Location 7"});
            Versions.Add(new Vers() { VersionNumber = "0007", VersionLiteral = "Location 8"});
        }
    }

    public class Vers
    {

        public string VersionLiteral { get; set; }
        public string VersionNumber { get; set; }
   }
} 
```

我还想知道是否应该使用字典或查找而不是列表。我只是不希望多次调用此方法导致内存问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-22T07:35:02.380

For a more thorough assessment, you might want to consider [codereview.SE](https://codereview.stackexchange.com/).

* * *

**Some general notes** on [`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx#remarksToggle) vs [`Dictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/xfhwa508#remarksToggle) vs [`Lookup<TKey, TElement>`](http://msdn.microsoft.com/en-us/library/bb460184.aspx#remarksToggle)

As other answers have shown, using a List is terrible in your scenario, mainly because looking up elements will have bad performance.

Choosing between `Dictionary` and `Lookup` isn't hard *(from [MSDN](http://msdn.microsoft.com/en-us/library/bb460184.aspx#remarksToggle), emphasis mine):*

> A `Lookup<TKey, TElement>` resembles a `Dictionary<TKey, TValue>.` The difference is
> that a `Dictionary<TKey, TValue>` maps keys to **single values**, whereas a `Lookup<TKey, TElement>` maps keys to **collections of values**.
> 
> You can create an instance of a `Lookup<TKey, TElement>` by calling `ToLookup` on an object that implements `IEnumerable<T>.`

Since you will only need to map keys to single values, a `Dictionary` is the right choice.

* * *

The [previously accepted answer](https://stackoverflow.com/a/11598222/1106367) is a step in the right direction but still gets several key things wrong *(edit: these problems have since been resolved)*.

**Strings are immutable:** `s.Trim()` will not change `s` — it will return a new `string` meaning you need to `s = s.Trim()` if you are using to `s` afterwards, which you *are*.

**A static class can't have an instance constructor**: `public Lookups()` should be `static Lookups()` (static constructors are not allowed to have access modifiers — of course).

## *Don't* return an empty string / an error message as a *string!*

That's going to end up as a wonderful debugging headache. You should be using *Exceptions* instead of passing error strings around — and you should *provide a `VersionExists` method* to check if your dictionary contains a certain version!

# Modified, safer example

This will throw a `FormatException` if the parameter is empty, null or whitespace. In the event that the version doesn't exist, the `Dictionary` will throw a `KeyNotFoundException` — a bit more helpful for debugging than `string.Empty`, don't you think?

```
public static class Lookups
{
    private static Dictionary<string, Vers> Versions;

    static Lookups()
    {
        Versions = new Dictionary<string, Vers>
        {
            {"0000", new Vers {VersionNumber = "0000", VersionLiteral = "Location 1"}},
            {"0001", new Vers {VersionNumber = "0001", VersionLiteral = "Location 2"}},
            {"0002", new Vers {VersionNumber = "0002", VersionLiteral = "Location 3"}},
            {"0003", new Vers {VersionNumber = "0003", VersionLiteral = "Location 4"}},
            {"0004", new Vers {VersionNumber = "0004", VersionLiteral = "Location 5"}},
            {"0005", new Vers {VersionNumber = "0005", VersionLiteral = "Location 6"}},
            {"0006", new Vers {VersionNumber = "0006", VersionLiteral = "Location 7"}},
            {"0007", new Vers {VersionNumber = "0007", VersionLiteral = "Location 8"}}
        };
    }

    public static bool VersionExists(string versionNumber)
    {
        return Versions.ContainsKey(versionNumber);
    }

    public static string GetVersion(string s)
    {
        if (string.IsNullOrWhiteSpace(s)) 
            throw new FormatException("Empty version number!");
        return Versions[s.Trim()].VersionLiteral;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T06:36:39.263

试试看：

```
using System;
using System.Collections.Generic;

namespace FunctionLibrary
{
public static class Lookups
{
    private static Dictionary<string, Vers> Versions = new Dictionary<string, Vers>();

    static Lookups() //Static constructor
    {
        CreateVesions();
    }

    public static string GetVersion(string s)
    {
        string retValue = string.Empty;

                    s = s.Trim();

        if (s.Length > 0 && Versions.ContainsKey(s))
        {
            retValue = Versions[s].VersionLiteral;
        }

        if (string.IsNullOrEmpty(retValue))
        {
            retValue = string.Format("{0} is an Unknown Version Number", s);
        }

        return retValue;
    }

    private static void CreateVesions()
    {
        Versions["0000"] = new Vers() { VersionNumber = "0000", VersionLiteral = "Location 1" };
        Versions["0001"] = new Vers() { VersionNumber = "0001", VersionLiteral = "Location 2" };
        Versions["0002"] = new Vers() { VersionNumber = "0002", VersionLiteral = "Location 3" };
        Versions["0003"] = new Vers() { VersionNumber = "0003", VersionLiteral = "Location 4" };
        Versions["0004"] = new Vers() { VersionNumber = "0004", VersionLiteral = "Location 5" };
        Versions["0005"] = new Vers() { VersionNumber = "0005", VersionLiteral = "Location 6" };
        Versions["0006"] = new Vers() { VersionNumber = "0006", VersionLiteral = "Location 7" };
        Versions["0007"] = new Vers() { VersionNumber = "0007", VersionLiteral = "Location 8" };
    }
}

public class Vers
{

    public string VersionLiteral { get; set; }
    public string VersionNumber { get; set; }
} 
```

}

这样你得到：

1.  您只初始化一次值
2.  使用字典寻找版本的性能更好
3.  Less code in `GetVersion` method

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T06:52:06.873

Using List in this situation leads to HUGE inefficiency. Your application will be ridiculously slow in this case.

Lookup of Dictionary will help A LOT.

The difference between them is that Lookup allows you to have more than one value for a given key when Dictionary accepts only one.

So if in your case VersionNumber is unique then use Dictionary otherwise use Lookup.

You can simply transform your list into Dictionary or Lookup once:

```
var versionsDictionary = versionsList
                             .ToDictionary(x => x.VersionNumber); 
```

So you do it once (perhaps when your app is loading) and then use it everywhere:

```
var myVersion = versionsDictionary[givenNumber];
Console.WriteLine(myVersion.VersionLiteral); 
```

Again, if you need Lookup then replace ToDictionary with ToLookup ;)

# android - 如何从 android 设备中提取 sqlite 数据库？

> ID：11598152
> 
> 赞同：21
> 
> 时间：2012-07-22T06:19:02.323
> 
> 标签：android, sqlite

如何从模拟器等android设备中提取sqlite数据库？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-08-29T10:33:13.987

You can use these commands for pulling the data base from your device. Typing these commands through android studio is very easy. Please make sure you have set the path of adb globally to your system. Then open the "terminal" window from bottom to android studio and near to "Android Monitor". Now you just update the following commands with actual package name of your app and database file name. You will get your file out from the device.

```
adb shell "run-as package.name chmod 666 /data/data/package.name/databases/file"
adb pull /data/data/package.name/databases/file .
adb shell "run-as package.name chmod 600 /data/data/package.name/databases/file" 
```

the command for Android 5.0+ /data/data/package.name/databases/file would be:

```
adb shell "run-as package.name chmod 666 /data/data/package.name/databases/file"
adb exec-out run-as package.name cat databases/file > newOutFileName
adb shell "run-as package.name chmod 600 /data/data/package.name/databases/file" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-11-22T15:07:43.343

您可以使用 Android Device Monitor 来拉取它。转到工具 -> Android -> Android 设备监视器

1.  从左侧列表中选择您的设备。
2.  选择 FileExplorer 选项卡
3.  展开数据-> 数据-> "yourpackageName" -> 数据库
4.  选择您的数据库文件并在右上角单击此图标 ![保存图标](../Images/c097330ab5d48344ebfca0f825e3e287.png) 从设备中提取文件。
5.  将其保存在您的办公桌上，然后使用此工具打开它： [http ://sqlitebrowser.org/](http://sqlitebrowser.org/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-22T06:38:15.427

*   将您的设备连接到电脑
*   在中打开命令提示符`/sdk-directory/tools`
*   类型`adb pull /data/data/com.example.app/databases/database.db`

`com.example.app`您的应用程序包名称和`database.db`数据库文件在哪里

那是在您的设备已植根的情况下，如果没有，请尝试关注

[https://stackoverflow.com/a/8433520/1300995](https://stackoverflow.com/a/8433520/1300995)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-02-16T12:39:02.757

从版本 24 开始，我使用这些命令来提取数据库

```
adb shell
run-as package.name
cat /databases/database.db > /sdcard/database.db
exit
exit
adb pull /sdcard/database.db 
```

在版本 24 之前

```
adb pull /data/data/package name/databases/database.db 
```

就足够了

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-10-02T19:39:38.550

查看和管理您的 android 应用程序数据库的最佳方法是使用此库[https://github.com/sanathp/DatabaseManager_For_Android](https://github.com/sanathp/DatabaseManager_For_Android)

它是一个单一的 java 活动文件，只需将 java 文件添加到您的源文件夹中，您就可以查看应用程序数据库中的表、更新、删除、向表中插入行。应用程序中的所有内容。

开发完成后，从您的 src 文件夹中删除 java 文件。

它帮助了我很多。希望它也能帮助你。

您可以在此处查看 1 分钟演示：http: [//youtu.be/P5vpaGoBlBY](http://youtu.be/P5vpaGoBlBY)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-11-08T21:31:37.220

您可以使用一个命令跳过所有这些中间阶段。

在您的 PC 外壳中运行：

```
adb -d shell 'run-as <package_name> cat /data/data/<package_name>/databases/<db_name>' > <local_file_name> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-06-29T09:28:48.497

我知道这是一个老问题，但是这是我从设备上的应用程序中提取 SQLite 数据库文件的方法。

1.  将文件从应用程序包保存到设备 sdcard

`adb -d shell "run-as com.dautechnology.abdimuna.smartparking cat /data/data/<myAppPackageName>/databases/<databaseFileName> > /sdcard/<databaseFileName>"`

上面的命令会将文件存储到 /sdcard 您可以通过输入验证文件 `adb shell ls sdcard/` 然后退出 adb shell`exit`

2.  将文件从 sdcard 拉到您当前的工作位置。

`adb pull sdcard/<databaseFileName>`

3.  将文件移动到桌面或您想要的位置。

`mv <databseFileName> ~/Desktop`

我希望这可以帮助那里的人。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-06-28T06:02:56.853

```
adb root
adb remount
adb pull <remote>  <local> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-08-22T11:49:28.747

在应用程序中以编程方式执行

```
try {
    File file = Environment.getExternalStorageDirectory();
    File data = Environment.getDataDirectory();

    if (file.canWrite()) {
        String currentPath = "/data/data/" + getPackageName() + "/databases/yourdbname";
        String copyPath = "copydb_name.db";
        File currentDB = new File(currentPath);
        File backupDB = new File(file, copyPath);

        if (currentDB.exists()) {
            FileChannel src = new FileInputStream(currentDB).getChannel();
            FileChannel dst = new FileOutputStream(backupDB).getChannel();
            dst.transferFrom(src, 0, src.size());
            src.close();
            dst.close();
        }
    }
} catch (Exception e) {

} 
```

确保获得许可

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-22T07:25:05.917

如果您使用 Eclipse，请转到 DDMS 视图。从文件资源管理器选项卡->数据->数据->应用程序包名称->数据库->数据库名称

选择数据库数据库文件，然后单击拉按钮

# objective-c - 变量名内的变量

> ID：11598158
> 
> 赞同：1
> 
> 时间：2012-07-22T06:19:54.317
> 
> 标签：objective-c, ios, nsarray

我有一个`int`名为`pageIndicator`.

我想将它包含在另一个变量中，这样可以节省一些代码行。

这就是我所拥有的：

```
Products *productPage0 = [productArray objectAtIndex:0];
Products *productPage1 = [productArray objectAtIndex:1];
Products *productPage2 = [productArray objectAtIndex:2];
Products *productPage3 = [productArray objectAtIndex:3]; 
```

这就是我想要的：

```
Products *productPage(@"%d", pageIndicator) = [productArray objectAtIndex:pageIndicator]; 
```

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:24:05.623

预处理器宏怎么样？

```
#define PRODUCT_PAGE(n) products *productPage##n = [productArray objectAtIndex:n] 
```

像这样使用它：

```
PRODUCT_PAGE(0);
PRODUCT_PAGE(1); 
```

等等

（这是非常糟糕的做法，顺便说一句）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:00:50.577

与仅使用您的 4 个类似的命名变量相比，有什么优势`productArray`？

而不是使用`productPageX`你可以简单地使用`[productArray objectAtIndex:X]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T06:39:26.497

您可以使用字典来存储 Products 对象并将名称设置为相应的键。

```
NSMutableDictionary *dic = [NSMutableDictionary dictionary];

for (int i =0; i < productArray.count; i++) {
    [dic setValue:[productArray objectAtIndex:i] forKey:[@"productPage" stringByAppendingFormat:@"%d",i] ];
} 
```

# windows - LIBDBUSMENU-GLIB-警告

> ID：11598159
> 
> 赞同：0
> 
> 时间：2012-07-22T06:20:07.513
> 
> 标签：windows, linux, user-interface, menu, wxpython

我最近创建了一段代码，当我关闭它时，它总是向我显示两次这样的消息：

> (python:11712): LIBDBUSMENU-GLIB-WARNING **: 试图移除一个不相信我们是它的父母的孩子。

我想要的是摆脱那个警告。这段代码重现了这种行为（关闭时消息出现一次）：

```
import wx

class MyFrame(wx.Frame):
  def __init__(self, parent):
    wx.Frame.__init__(self, parent, title="Sample")
    menuBar = wx.MenuBar()
    filemenu = wx.Menu()
    filemenu.Append(wx.ID_ANY,"&Pass")
    menuBar.Append(filemenu,"&File")
    self.SetMenuBar(menuBar)

app = wx.PySimpleApp()
frame = MyFrame(None)
frame.Show()
app.MainLoop() 
```

它工作得很好，但是当我关闭应用程序时会出现警告消息。这是一条仅限 Linux 的消息，当我在 Windows 上尝试时没有出现任何内容。

我使用的一种解决方法是在我的框架中绑定一个关闭事件处理程序

```
 def __init__(self, parent):
    ... # Previous code here
    self.Bind(wx.EVT_CLOSE, self.OnClose) 
```

并制作这样的事件处理程序

```
 def OnClose(self, evt):
    for menu in self.GetMenuBar().GetMenus(): # (wx.Menu, caption) tuples
      menu[0].Destroy() # Bad parents won't remove you, you'll DIE before!!!
    evt.Skip() 
```

这在 Linux 上的那个简单应用程序中运行良好，但是当我在 Windows 上尝试时它崩溃了。所以我想看看在 Linux 上运行时发生了什么，替换了这一行

```
 menu[0].Destroy() 
```

至

```
 print menu[0].Parent 
```

它向我展示了“无”作为答案。但是我做不到：

```
 menu[0].Parent = self 
```

也没有：

```
 menu[0].Parent = self.GetMenuBar() 
```

由于两者都会引发 TypeError：

> TypeError：在方法“Menu_SetParent”中，预期参数 2 类型为“wxMenu *”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:01:19.420

这是一个 GTK 警告。您可以通过使用环境变量[运行](http://developer.gnome.org/glib/stable/glib-running.html)来调试它（使用`gdb`Gtk 和 Glib 库的调试变体 - 例如Ubuntu 或 Debian 上`libgtk-3-0-dbg` 的软件包）`libglib2.0-0-dbg`

```
 export G_DEBUG=fatal-warnings 
```

我不知道这个错误是在 Gtk 本身、在 WxWidget 中、在 Python 的 C 胶水中，还是在你的 Python 代码中。

# assembly - x86 IO 映射的 IO 端口保护和 DOS 扩展器

> ID：11598161
> 
> 赞同：4
> 
> 时间：2012-07-22T06:20:46.547
> 
> 标签：assembly, x86, dos

我正在使用 DOS Extender 为 FreeDOS 开发一个保护模式应用程序。我的应用程序执行密集的 I/O。

由于所有的 DOS 扩展程序都在 Ring3（即 CPL=3）上运行他们的应用程序，而它们自己在 Ring 0（即 CPL=0）上运行，我想到了一些关于 I/O 保护的问题。

从 x86 文档，我得到以下信息：

IOPL 敏感指令：IN、INS、OUT、OUTS、CLI 和 STI。

如果 CPL <= IOPL，则不产生异常并执行 IOPL 敏感指令。

如果 CPL > IOPL，并且指令是这些指令之一（IN、OUT、INS 或 OUTS），则处理器检查当前任务的 IO 权限位图（在其 TSS 中）以确定当前应用程序是否被允许访问寻址 IO 端口。如果位图指示允许任务访问指示的 IO 端口，则不产生异常并执行 IO 指令。否则，将生成 GP 异常。

如果 CPL > IOPL，并且指令是 CLI 或 STI，则处理器会生成 GP 异常。

这意味着如果我们的应用程序。在 Ring3 上运行，然后要执行 IN,OUT,INS,OUTS 指令，我们必须有 CPL <= IOPL（在我们的例子中这转换为 IOPL=3），或者如果 CPL > IOPL（这转换为 IOPL <= 2 ，即 IOPL = 0，因为通常不使用 Ring1 和 Ring2。）I/O 权限位图必须由 DOS Extender 设置（在启动我们的应用程序时），这样我们的应用程序。允许访问*任何*I/O 端口。

但在后一种情况下，我们仍然不能使用 Ring3 应用程序中的 CLI 和 STI 指令，因为 CPL > IOPL。

因此，事实证明，只有当 CPL <= IOPL 时才能执行以下指令：IN、INS、OUT、OUTS、CLI 和 STI。在我们的例子中，这转换为 3 <= IOPL，即 IOPL = 3。

现在我的问题是，*所有 dos 扩展程序是否在它们启动的任务/应用程序的 TSS 中设置 IOPL = 3？*

如果他们不这样做，那么他们必须在 Ring0 (CPL=0) 中运行任务/应用程序，否则应用程序无法执行 IOPL 敏感指令。

文档还指出：

*程序或任务只能通过 POPF 和 IRET 指令更改其 IOPL；然而，这样的改变是有特权的。除非以特权级别 0 即 CPL=0 运行，否则任何程序都不能更改当前的 IOPL。较低特权的过程尝试更改 IOPL 不会导致异常；IOPL 保持不变。*

这意味着：如果在 Ring 3 代码中遇到 POPF 或 IRET 指令，则不会修改/恢复 IOPL 字段，CPU 不会产生异常。

没关系，因为我们不想修改 IOPL 字段，让它由 DOS Extender 处理。但这*是否意味着*其他标志（*EFLAGS reg. 的 bit0 到 bit11*）*将被*恢复？

我的应用程序。可能还需要执行 POPF 指令和 IRET。

该文档还指出：

*只有当 CPL <= IOPL 时，程序才可以使用 POPF 指令更改 IF 标志的设置。较低特权的过程尝试更改 IF 标志不会导致异常；IF 标志保持不变。*

这意味着：如果在 Ring3 代码中遇到 POF 指令，则仅当 CPL <= IOPL，即 3 <= IOPL 或 IOPL = 3 时修改 IF 标志。我们再次需要 IOPL 为 3。:)

我正在寻找一个通用的答案——即不是特定于 DOS Extender 的。这是因为，看起来虽然它们在实现上有所不同，但基本原理仍然是相同的 b/w DOS 扩展器——例如它们在 Ring3 中运行应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:37:47.773

我不明白为什么 DOS 扩展程序*需要*在 Ring 3 中运行您的应用程序代码。我认为 DPMI 规范要求这样做，但如果您的应用程序是唯一运行的应用程序，您实际上不必坚持它。[这篇论坛帖子](http://www.bttr-software.de/forum/forum_entry.php?id=345)提到了一些据称在 Ring 0 中运行的扩展器：

> 所有已知的 Ring0 主机（DOS32/A、WDOSX、CWSDPR0）都不会交换——这只是巧合，还是存在阻止 Ring0 主机交换的根本“问题”？

从[CWSDPMI](http://homer.rice.edu/~sandmann/cwsdpmi/index.html)页面：

> CWSDPR0.EXE 是在禁用虚拟内存的环 0 上运行的替代版本。如果需要访问 ring-0 功能，则可以使用它。

从[DOS/32 页面](http://dos32a.narechk.net/content/technical.html)：

> *   保护模式应用程序以 CPL 0 运行

如果这些都不起作用，还有其他选择：

1.  做你自己的保护模式设置 - 这并不难

2.  使用现有的 DOS 扩展器并对其进行修改以在 Ring 0 中运行。HX-DOS 源可用，以及[其他几个](http://www.thefreecountry.com/programming/dosextenders.shtml)。

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:26:31.147

可能由您决定谁来负责。如果这是系统上唯一的应用程序，则可以授予它所有权限。如果有其他应用程序需要系统保护，允许一个应用程序做任何它想做的事，可能不是那么好。

在保护模式操作系统中，如 Windows 和 Linux，您需要编写设备驱动程序并将其安装在内核中以访问硬件。

我相信 POPF 指令将恢复您使用早期 PUSHF 指令保存的所有标志。只是如果您首先尝试摆弄堆栈上的位，保护规则就会生效。

如果不设置 I/O 权限位，另一种选择是拦截保护中断并根据具体情况决定是否允许应用程序读取或写入端口。在这种情况下，扩展程序可以代表应用程序执行操作，然后恢复它。虽然有点棘手...

# android - 没有黑色背景的日食图形布局

> ID：11598165
> 
> 赞同：0
> 
> 时间：2012-07-22T06:21:44.423
> 
> 标签：android, xml, eclipse, layout

![我无法在图形布局中获得黑色背景](../Images/a268007c1be05bcbd7f0de4b429687be.png)

我下载了 eclipse JUNO 并用 ADT v20 进行了更新，我遇到了这个问题......在 HELIOS 中它在更新前完美运行，但现在这也是在 HELIOS 中更新后的问题。我尝试了很多论坛但仍然无法提前修复 this.thankx 伙计们:)

PS这不是因为xml文件中的错误，我也没有改变背景颜色（微不足道）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:59:49.463

试试这个：

```
Add views using Graphical Layout.
Save the file.
Close it.
Reopen it and then make changes to it. 
```

或者

> 将布局编辑器中的主题更改为默认主题，例如 Holo.light。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T15:41:31.553

转到 res-> values-> styles.xml ...并将 Theme.Light 更改为 Theme.Black

# php - Kohana 模型两次保存

> ID：11598171
> 
> 赞同：1
> 
> 时间：2012-07-22T06:23:07.927
> 
> 标签：php, controller, action, kohana-3.2

我刚刚安装了 Kohana 3.2 的新副本，构建了我的数据库，编写了我的第一个模型，并尝试对其进行测试。一切正常，除了模型的“保存”方法被执行了两次——我最终在数据库中得到了两个新条目而不是一个。仅当我使用下面显示的“查找”代码时才会出现此问题。

为什么模型的保存会执行两次，一次是按预期执行，一次是因为找到？

这是代码：

```
class Controller_Welcome extends Controller {

public function action_index()
{

    $rating = ORM::factory('rating');

    $rating->user_id = 1;
    $rating->userlevel_id = 3;
    $rating->category_id = 1;
    $rating->page_id = 1;
    $rating->rating = 4;
    $rating->comments = 'This one is a real killer';
    $rating->ratingstatus_id = 1;

    $rating->save();

    $found = ORM::factory('rating')
        ->where('id', '=', 1)
        ->find();

    $this->response->body($found->comments); // Test to check for found data
}

} // End Welcome 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:35:11.243

有两个问题导致我的问题：

1.  我的服务器上没有 favicon.ico。许多浏览器都请求一个，所有不是实际文件或目录的 URL 都会被重定向到索引页面。每次我加载页面时，浏览器都会请求丢失的网站图标并被重定向到我的索引页面——两个请求。在查看了我的日志后，这个页面告诉了我：http: [//forum.kohanaframework.org/discussion/7447/error-kohana_request_exception/p1](http://forum.kohanaframework.org/discussion/7447/error-kohana_request_exception/p1)

2.  在我添加了一个 favicon 之后，我仍然偶尔会看到双重请求行为。原来这是 Google Chrome 的一种行为——Chrome 会预取页面，所以每次我更改内容时，Chrome 都会预取并缓存页面（添加请求）。

添加图标后并使用除 Chrome 之外的浏览器时，一切都按预期运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T00:06:03.537

```
$rating = ORM::factory('rating'); 
```

这条线代表什么。

如果你想创建新记录，你应该使用 create() 而不是 save()。

```
$rating = new Model_Rating;

$rating->user_id = 1;
$rating->userlevel_id = 3;
$rating->category_id = 1;
$rating->page_id = 1;
$rating->rating = 4;
$rating->comments = 'This one is a real killer';
$rating->ratingstatus_id = 1;
$rating->create(); 
```

如果要加载具有给定 ID 的单个评级对象：

```
$found = ORM::factory('rating', 1); 
```

# objective-c - RestKit 用于持久化某些对象而不是其他对象

> ID：11598172
> 
> 赞同：0
> 
> 时间：2012-07-22T06:23:29.427
> 
> 标签：objective-c, ios, core-data, restkit

我正在使用 RestKit 将远程对象映射到模型对象。我想添加允许用户选择的对象在本地持久化到 Core Data 的功能（想想“收藏夹”列表）。

然而，RestKit 的核心数据支持似乎是全有或全无，在某种意义上我要么坚持使用 NSObject 派生的模型对象；要么 或者，我使用 NSManagedObjects，RestKit 检索到的所有类型的东西都会进入数据库。

有没有一种方法可以让 RestKit 映射到核心数据对象中，但不一定将它们全部保存到数据库中，因为它们是通过网络传输的——只有选定的对象？

# java - 使用 Hibernate 生成大长度列

> ID：11598177
> 
> 赞同：0
> 
> 时间：2012-07-22T06:24:13.043
> 
> 标签：java, hibernate, annotations

我想存储用户的报告。该数据库由 Hibernate 基于 Java 实体自动生成。

指定`String report`遗嘱包含大量信息的最佳方式是什么？

选项包括：

*   `@Column(length = xxxx) - this looks like more portable`
*   `@Column(columnDefinition = "TEXT") - doesn't work on some databases`
*   `@Lob - not sure what are pros/cons`

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T22:22:20.177

使用的优点`@Column(length = xxxx)`是它们的便携性。如果您知道您没有更改数据库，则可以使用第二个选项并检查本机类型。否则使用第一个选项。如果您需要在字段内搜索文本，这`@Lob`可能会导致问题，因为它可以被视为二进制。

# android - 应用程序意外停止。

> ID：11598178
> 
> 赞同：-2
> 
> 时间：2012-07-22T06:25:02.103
> 
> 标签：android

我正在制作一个简单的应用程序，其中第一个活动有一个按钮，单击该按钮时必须加载第二个活动。我完全按照我所指的视频中提到的内容进行操作，但我的应用程序仍然没有运行。甚至没有出现第一个按钮。

[2012-07-22 11:34:05 - MyFirstApp] 安装错误：INSTALL_FAILED_INSUFFICIENT_STORAGE [2012-07-22 11:34:05 - MyFirstApp] 请检查 logcat 输出以获取更多详细信息。[2012-07-22 11:34:05 - MyFirstApp] 发布取消！

是我得到的错误。

在 logcat 中也有大量的红色行，但我不知道如何在此处粘贴这么长的 logcat..！我第一次使用 logcat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:26:36.923

错误消息是不言自明的。您的设备存储空间不足。

# maven - Maven 在打包 jar 之前设置类时间戳

> ID：11598179
> 
> 赞同：0
> 
> 时间：2012-07-22T06:25:03.260
> 
> 标签：maven

我想在 Maven 模块中设置类和资源的时间戳，就在它被构建到 jar 之前。我想我可以使用 maven-antrun-plugin，但我想看看是否有更好的想法。

有人有想法吗？

让我添加更多详细信息，因为我需要此功能。

当我们为产品构建新版本时，我们还构建了一个补丁安装，它将先前构建的所有工件与当前构建进行比较，并仅打包不同的工件。

jar（以及任何基于 zip 的存档）可能具有相同的内容，但类和资源的时间戳是元数据的一部分，并导致 diff 显示 jar 不同（实际上，内容是相同的）。我想破解 jar 包装并将所有类时间戳设置为恒定（如 1/1/2000 00:00）。

我希望这能解释我的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:25:34.240

好吧，最好的解决方案是调整计算差异的工具，以便在 jar 中更深入地查看；）

恐怕除了使用带有`touch`任务重置文件日期的ant文件之外别无他法。没有设置文件日期的现有插件。

您也可以编写自己的 Maven 插件并将其贡献给社区，但这可能有点矫枉过正......

嗨，M。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T19:41:28.440

我只想分享我决定做的事情。

我不会碰 maven 构建，让它像以前一样构建罐子。

我所做的是在我的构建中实现一个脚本来比较罐子。这个脚本的逻辑很简单：

*   检查参数（jars 存在）
*   将 jar 提取到临时文件夹（具有唯一名称）
*   在两个文件夹上运行差异
*   清理
*   使用相关的退出代码退出（如果相同，则为 0。如果不同，则为 1）

我希望这很有用。

# php - FILTER_SANITIZE_SPECIAL_CHARS 的效果如何

> ID：11598180
> 
> 赞同：-1
> 
> 时间：2012-07-22T06:25:10.267
> 
> 标签：php, mysql, sql-injection

我在我的 php 代码中使用 FILTER_SANITIZE_SPECIAL_CHARS 来清理输入。

我真的需要用户 mysql_escape_string 吗？我可以仅防止来自过滤器功能的 sql 注入和其他攻击吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:45:29.223

不要使用`FILTER_SANITIZE_SPECIAL_CHARS`和`mysql_escape_string`。使用[PDO](http://php.net/manual/en/book.pdo.php)。使用准备好的语句，您无需手动转义输入。

# android - 如何制作褪色时不收缩的闪屏

> ID：11598181
> 
> 赞同：0
> 
> 时间：2012-07-22T06:25:16.943
> 
> 标签：android

我已按照此处所述的步骤制作启动画面：[如何在 android 中实现启动画面](https://stackoverflow.com/questions/5025734/how-to-implement-splash-screen-in-android)

虽然启动画面正常工作，但我注意到当它淡入我的主要活动时，我的启动画面会缩小。也就是说，我的初始屏幕开始时占据整个屏幕，然后随着它的消失缩小成一个较小的矩形。这非常明显，因为我的初始屏幕有一个深色背景，而我的主要活动有一个白色背景。

有没有办法阻止这种情况发生？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:51:51.693

真正的问题是“我如何控制我的启动画面动画”？包括放大、缩小、*不*缩放、淡入淡出、旋转等。

这是一个很好的讨论：

*   [在android的启动画面中缩小动画？](https://stackoverflow.com/questions/6702931/zoom-out-animation-in-splash-screen-in-android)

# android - 将字符串作为构造函数的参数发送到对话框中，将字符串更改为信息表

> ID：11598183
> 
> 赞同：0
> 
> 时间：2012-07-22T06:25:25.760
> 
> 标签：android, android-layout, dialog, overlay, android-dialog

我正在使用对话框和一个名为 OverlayItem 的类，它有一个构造函数，当按下该覆盖层时接收两个要在对话框中显示的字符串。我知道在定义 overlayItem 时，我们向它发送两个字符串。一个被认为是对话的标题，另一个被认为是对话的内容。

现在我在想是否在对话框的内容（第二个字符串）中显示了一个信息表而不仅仅是一个字符串？？

编码

```
 OverlayItem overlayItem2 ; 
      overlayItem2 = new OverlayItem (Points2 , "STR1 " , "STR2") ; 
```

我的意思是我想在对话框中显示一个表格而不是 STR2 ？

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:07:25.360

是的，有可能，您需要创建自定义覆盖类，并使用自定义对话框 t 显示表。请参考以下链接以获取自定义 dailog。

[点击这里](http://www.mkyong.com/android/android-prompt-user-input-dia)

# visual-studio-2010 - VSTO文件的反编译器？

> ID：11598188
> 
> 赞同：1
> 
> 时间：2012-07-22T06:26:36.913
> 
> 标签：visual-studio-2010, vsto, outlook-addin

我丢失了为一个 Outlook 插件开发的代码，我拥有的唯一文件是 VSTO。有什么软件可以反编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T20:22:12.950

在您的应用程序文件夹（您发布 vsto 文件的文件夹）中查找名为 YourProgram.dll.deploy 的文件，然后复制它。复制后重命名文件以删除 .deploy，然后使用任何 .Net 反编译器查看 YourProgram.dll 文件，您应该能够看到您的源代码。

将 YourProgram 替换为您的实际程序名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T06:29:48.943

如果代码没有被混淆，你可以使用[反射器](http://www.reflector.net/)来反编译它。Reflector 获取 dll（这是 vsto 文件）作为输入并向您显示源代码。

结果不是 100% 你的代码，但你得到了所有的类和项目的几乎所有结构（取决于项目结构）。

# asp.net-mvc-3 - 有没有办法通过 ASP.NET MVC 3 中的 html.actionlink 传递整个模型？

> ID：11598190
> 
> 赞同：12
> 
> 时间：2012-07-22T06:27:14.320
> 
> 标签：asp.net-mvc-3

我如何通过`html.actionlink`或使用除表单提交之外的任何其他方法传递整个模型？有什么方法或提示吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-22T14:10:38.837

尽管在复杂情况下不建议这样做，但您仍然可以这样做！

```
public class QueryViewModel
{
  public string Search { get; set; }
  public string Category { get; set; }
  public int Page { get; set; }
}

// just for testing
@{
   var queryViewModel = new QueryViewModel
   {
      Search = "routing",
      Category = "mvc",
      Page = 23
   };
}

@Html.ActionLink("Looking for something", "SearchAction", "SearchController"
                  queryViewModel, null); 
```

这将生成一个这样的操作链接`href`，

*/SearchController/SearchAction?Search=routing&Category=mvc&Page=23*

这将是你的行动，

```
public ViewResult SearchAction(QueryViewModel query)
{
   ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T06:50:56.133

不，您不能通过链接或表单传递整个复杂对象。您可以采取几种可能的方法：

*   将对象的每个单独属性包括为查询字符串参数（或输入字段，如果您使用的是表单），以便默认模型绑定器能够在控制器操作中重建对象
*   仅传递一个 id 作为查询字符串参数（或输入字段，如果您使用的是表单）并让控制器操作使用此 id 从某个数据存储中检索实际对象
*   使用会话

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T06:57:28.330

您可以使用 javascript 来检测对链接的点击，序列化表单（或您想要传递的任何数据）并将其附加到您的请求参数中。这应该实现您想要实现的目标......

# .htaccess - 为特定文件或图像设置过期标头

> ID：11598191
> 
> 赞同：1
> 
> 时间：2012-07-22T06:27:18.817
> 
> 标签：.htaccess, expires-header

我有一个网站，它广泛使用静态文件，如 Jquery 库、图像和其他一些功能 JS 文件。

因此，我希望为这些资源设置无限的到期时间，以便可以轻松地从用户缓存中检索这些资源。这将增强他的体验并减少加载文件

任何人都可以建议如何使用 .htaccess 或任何其他方法来做同样的事情。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:34:51.313

[http://httpd.apache.org/docs/current/mod/mod_expires.html](http://httpd.apache.org/docs/current/mod/mod_expires.html)您可能正在寻找该`ExpiresByType`指令？我想，将其设置为 10 年就足够了。但是，请小心更新这些文件。

# google-account - 谷歌显示顶部黑条

> ID：11598194
> 
> 赞同：0
> 
> 时间：2012-07-22T06:28:05.430
> 
> 标签：google-account

我附上了两张图片。我真的很喜欢第一个，但现在我在不同的区域，它出现在第二张图片中。我已经很努力地想找回原来的黑条但没有成功！！（注意两个图像关于顶部黑条的区别，比如第一种情况下的字体不像第二种情况那样**粗体**，并且右侧的详细信息）。

我的问题是如何再次回到第一个显示。现在所有的谷歌页面都根据第二张图片显示。

**第一张图片：** ![在此处输入图像描述](../Images/c8315a95911fc70a877ddce6a2ff093e.png)

**第二张图片：** ![在此处输入图像描述](../Images/5963a6b87512b93d60c71d70f590fb1d.png)

# opengl - 我正在尝试通过 OpenGL 编程指南第 7 版学习 OpenGL 3，但是 OpenGL 4.0 与 3.x 有多少不同？

> ID：11598196
> 
> 赞同：-1
> 
> 时间：2012-07-22T06:28:33.620
> 
> 标签：opengl

我在第 2 章，它变得非常混乱，但我会尽快解决它。我知道 OpenGL 4.0 已经发布，但是教授 OpenGL 4.0 的 OpenGL 编程指南第 8 版将于 2013 年 1 月发布。所以我应该继续阅读我的书。我不知道 OpenGL 3.x 和 4.x 有多大不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:41:02.953

给大家推荐一些OpenGL 4.0的教程：</p>

*   [OpenGL 4.0 着色语言手册](https://www.packtpub.com/game-development/opengl-40-shading-language-cookbook)
*   [Swiftless 教程](http://www.swiftless.com/opengl4tuts.html)
*   [OpenGL 4.2 API 参考卡](https://www.khronos.org/files/opengl42-quick-reference-card.pdf)
*   [OpenGL 4.2 参考页](https://www.opengl.org/sdk/docs/man4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T06:31:46.260

嗯，主要区别在于，Apple 设备仍然不支持 OpenGL 4.x ;-) 但说真的，请看这里：

[OpenGL 4.1 和 3.1+，主要区别是什么？](https://stackoverflow.com/questions/4814004/opengl-4-1-vs-3-1)

[http://renderingpipeline.com/2012/04/sad-state-of-opengl-on-macos-x/](http://renderingpipeline.com/2012/04/sad-state-of-opengl-on-macos-x/)

# ios - 在 TableView insertRowsAtIndexPath 上崩溃

> ID：11598197
> 
> 赞同：0
> 
> 时间：2012-07-22T06:28:40.640
> 
> 标签：ios, uitableview, ios5, crash

我的应用程序运行良好，我没有将其修改为具有专用的数据控制器类，而不是像在初始测试期间那样在主 UI 类中处理的数据。但是，自从更改后，在向 tableview 添加新项目时它会一直崩溃。

它崩溃的代码行和错误是；

```
[self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

> 2012-07-22 07:17:44.772 speecher[1897:707] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“尝试将第 0 行插入第 0 节，但在第 0 节之后只有 0 行更新'

该类（主 MasterViewController 类）的完整代码如下。

```
//
//  SpeecherMasterViewController.m
//  speecher
//
//

#import "SpeecherMasterViewController.h"
#import "SpeecherDataController.h"
#import "SpeecherDetailViewController.h"

@interface SpeecherMasterViewController () {

    NSString *newTitle;
    NSMutableArray *_speeches;
    NSMutableArray *_content;
    SpeecherDataController *object;

}
@end

@implementation SpeecherMasterViewController

@synthesize detailViewController = _detailViewController;

- (void)awakeFromNib
{
    self.clearsSelectionOnViewWillAppear = NO;
    self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
    [super awakeFromNib];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
    self.navigationItem.rightBarButtonItem = addButton;
    self.detailViewController = (SpeecherDetailViewController *)[[self.splitViewController.viewControllers lastObject] topViewController];
    object = [[SpeecherDataController alloc] init];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [object returnNoObjects];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    cell.textLabel.text = [object returnTitle:indexPath.row];
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [_speeches removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    } else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
    }
}

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSString *titleobj = [object returnTitle:indexPath.row];
    NSString *contentobj = [object returnContent:indexPath.row];
    self.detailViewController.detailItem = titleobj;
    self.detailViewController.detaitContent = contentobj;
}

- (void)insertNewObject:(id)sender
{
    //Make sure clear before we start, also make sure initalized (double redundancy with clear statement at end)
    newTitle = @"";

    //New Title pop up UIAlert View
    UIAlertView * alert = [[UIAlertView alloc] 
                           initWithTitle:@"New Speech" 
                           message:@"Please enter a name for speech" 
                           delegate:self 
                           cancelButtonTitle:@"Create" 
                           otherButtonTitles:nil];

    alert.alertViewStyle = UIAlertViewStylePlainTextInput;

    UITextField * alertTextField = [alert textFieldAtIndex:0];

    alertTextField.keyboardType = UIKeyboardTypeDefault;

    alertTextField.placeholder = @"Enter a new title";
    [alert show];

}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{ 
    newTitle = [[alertView textFieldAtIndex:0] text];

    [object addNewContent:newTitle :@"IT REALLY WORKS!" :@"Nothing"];

        //create new speech title, add to array and add to tableview
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];

    //Clear newTitle for use next time
    newTitle = @"";

}

@end 
```

编辑：

修改为根据评论添加`[object addNewContent]`方法和类，

```
//
//  SpeecherDataController.m
//  speecher
//
//

#import "SpeecherDataController.h"

@interface SpeecherDataController ()
{
    NSMutableArray *titles;
    NSMutableArray *content;
    NSMutableArray *timer;
}
@end

@implementation SpeecherDataController

-(void) addNewContent:(NSString*)sTitle : (NSString*)sContent :(NSString*)sTimer
{
    [titles insertObject:sTitle atIndex:0];
    [content insertObject:sContent atIndex:0];
    [timer insertObject:sTimer atIndex:0];
}

//Methods to return data
-(NSString*) returnTitle:(NSUInteger)row
{
    return [titles objectAtIndex:row];
}

-(NSString*) returnContent:(NSUInteger)row
{
    return [content objectAtIndex:row];
}

-(NSString*) returnTimer:(NSUInteger)row
{
    return [timer objectAtIndex:row];
}

-(NSInteger) returnNoObjects
{
    return titles.count;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:11:05.283

问题是 NSMutableArrays 没有被分配和初始化。必须添加一个检查，看看他们是否有一个 init 和 alloc 如果没有。新支票看起来像这样，

```
-(void) addNewContent:(NSString*)sTitle : (NSString*)sContent :(NSString*)sTimer
{

    if(!titles)
    {
        titles = [[NSMutableArray alloc] init];
    }
    if(!content)
    {
        content = [[NSMutableArray alloc] init];
    }
    if(!timer)
    {
        timer = [[NSMutableArray alloc] init];
    }

    [titles insertObject:sTitle atIndex:0];
    [content insertObject:sContent atIndex:0];
    [timer insertObject:sTimer atIndex:0];
} 
```

# c++ - 为什么构造函数只调用一次？

> ID：11598198
> 
> 赞同：32
> 
> 时间：2012-07-22T06:29:45.820
> 
> 标签：c++

考虑以下程序：

```
class A
{
    public:
    A(int i)
    {
            cout<<"Called"<<endl;
    }
};

int main()
{
    vector<A> v(5,A(1));
    return 0;
} 
```

我得到输出：http: [//ideone.com/81XO6](http://ideone.com/81XO6)

```
 Called 
```

**为什么即使我们正在构造 5 个对象，构造函数也只被调用一次？**
**编译器如何`vector`在内部处理？**

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-22T06:33:19.380

你的类有两个构造函数，你只看其中一个。通过从您提供的*原始元素**复制构造*它们来`std::vector`创建其元素。为此，在您的示例中，类的复制构造函数被调用了 5 次。**`A`**

 **您示例中的复制构造函数`A`由编译器隐式声明和定义。如果您愿意，您可以自己声明和定义它。如果你从中打印一些东西，你会看到它至少被调用了 5 次。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-22T06:33:40.067

自线路以来，它被调用一次

```
vector<A> v(5,A(1)); 
```

将调用构造函数，该行变为向量 v(5,X)；

其中 X 是调用构造函数后构造的对象。

之后使用复制构造函数。

尝试添加

```
A(const &A); 
```

到类声明来验证这一点。**

# objective-c - 如何获取 NSDictionary 的名称/密钥并将其存储在 plist 中的 NSString 中？

> ID：11598201
> 
> 赞同：2
> 
> 时间：2012-07-22T06:30:14.100
> 
> 标签：objective-c, nsstring

我想取字典的名称，或者换句话说，它们是字典的键并将其存储在 NSString 中。例如：

```
<dict>
<key>dictionary1</key>
<dict/>
<key>string1</key>
<string></string>
<key>string2</key>
<string></string>
<key>dictionary2</key>
<dict/>
<key>string3</key>
<string></string>
<key>dictionary3</key>
<dict/>
<key>string4</key>
<string></string> 
```

`

我想获取dictionary1 和dictionary2 并将其存储在如下所示的NSString 中：@"dictionary1" 和@"dictionary2"。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T06:33:53.650

[`allKeys:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/allKeys)您可以使用或轻松获取 NSDictionary 中键的 NSString 值[`allKeysForObject:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/allKeysForObject%3a)

这些作为 NSString 的数组返回。

还有一个[`keyEnumerator`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/keyEnumerator)方法，它允许您单步执行 NSDictionary 对象的所有键。

# python - PyTables 线程安全？

> ID：11598204
> 
> 赞同：4
> 
> 时间：2012-07-22T06:31:48.707
> 
> 标签：python, multithreading, thread-safety, pytables

我正在尝试将 Python 线程模块与 PyTables 一起使用。有人能告诉我 PyTabes 是否是线程安全的吗？我遇到了一些错误，它似乎与线程有关。

谢谢，马克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T07:17:21.507

从这里的 PyTables 常见问题解答：http: [//www.pytables.org/moin/FAQ](http://www.pytables.org/moin/FAQ)

它说并发读取是安全的，但并发写入或什至具有读取器线程的单个写入器可能是一个坏主意。

# java - 如何将对象类型传递给类？

> ID：11598206
> 
> 赞同：1
> 
> 时间：2012-07-22T06:32:25.023
> 
> 标签：java, class, object, types, slick2d

我目前正在使用 slick2D 在 java 中制作游戏。游戏是基于瓷砖的，我正在尝试生成随机地图。我正在生成一个房间和连接到那个房间的走廊，并继续这样做，直到地图全部填满。我有诸如

```
generateRoom(int x, int y, int width, int height) 
```

我的问题是如何传递我想在房间中使用的瓷砖类型。我认为它可能看起来像这样

```
generateRoom(StoneTile, int x, int y, int width, int height) 
```

显然这是行不通的。我不想发送已经创建的实际图块，因为每个图块中都有一个特定的位置，并且在调用该方法时我不知道图块的位置。我将如何发送要在方法中使用的类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:33:28.550

我认为满足您需求的一种简单方法是创建一个表示图块类型的枚举：

```
public enum TileType {
    STONE,
    WATER,
    FIRE,
    GRASS
} 
```

然后，您可以通过您的方法传递类型，如下所示：

```
TileType type = TileType.STONE;
generateRoom(type, x, y, width, height);
(...) 
```

如果您以后需要为每个 tile 类型枚举添加参数或行为，则需要[很长的路要走](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)才能适应这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:06:52.303

这完全取决于您想对该类型信息做什么。听起来您想在编译时不知道该类型是什么的情况下创建给定类型的新对象。这意味着 Java 泛型，可用于向方法添加类型信息，如下所示：

```
<T> generateRoom(int x, int y, int width, int height) 
```

行不通，因为你不能写`new T()`. （Java 编译器会在运行前擦除通用信息）。

因此，您可以尝试将反射与泛型结合使用，在这种情况下，您可以将 Class 对象传递给您的方法，并使用 Java 的反射实用程序为您提供的类查找构造函数。

```
<T> generateRoom(Class<T> tileClass, int x, int y, int width, int height) {
    Constructor<T> constructor = tileClass.getDeclaredConstructor(Arg1Type.class, Arg2Type.class);
    T tile = constructor.newInstance(arg1, arg2);
} 
```

有关在构造函数中使用反射的更多信息，请参见[此处](http://docs.oracle.com/javase/tutorial/reflect/member/ctorLocation.html)和[此处。](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Constructor.html)

或者，如果您不想冒反射的脆弱性的风险，您可以使用工厂模式并将您的方法传递给工厂以构造适当的 Tile：

```
generateRoom(TileFactory tileFactory, int x, int y, int width, int height) {
    Tile myTile = tileFactory.getInstance();
} 
```

为了做到这一点，您需要有一个`Tile`所有瓦片类型都实现的接口`TileFactory`，以及每个具体瓦片工厂（即 StoneTileFactory）实现的接口。然后在调用方法的时候，如果想让它创建StoneTiles，可以给它一个StoneTileFactory（符合TileFactory参数类型）。

当然，如果您不想使用接口，即使这也可以使用泛型参数化：

```
<T> generateRoom(TileFactory<T> tileFactory, int x, int y, int width, int height) {
    T tile = tileFactory.getInstance()
} 
```

在这种情况下，您需要制作每个实例`TileFactory`implement `TileFactory<TileType>`，例如`TileFactory<StoneTile>`，并适当地参数化工厂的 getInstance 方法（`public T getInstance()`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T06:46:46.153

您可能只想发送`Class`这样的内容：

```
generateRoom(Class tileClass, int x, int y, int width, int height) 
```

然后您可以使用`getClass()`对象上的方法调用它。

# jquery - 如何在按钮单击时滑动 div

> ID：11598217
> 
> 赞同：0
> 
> 时间：2012-07-22T06:34:53.547
> 
> 标签：jquery

我正在尝试制作这样的滑动表单按钮[，](http://www.groupon.com/subscriptions/new?division_p=)我对 JQuery 不熟悉，请建议。

**的HTML： -**

```
<div id="introFormHome">
<form action="" method="">
    <div id="slideBox1" class="slideBox">
          Conferm Location <input type="text" value="" />
          <button class="slideNext">Continue</button>
    </div>
    <div id="slideBox2" class="slideBox">
          Area <input type="text" value="" />
          <button class="slideNext">Continue</button>
    </div>
    <div id="slideBox3" class="slideBox">
          Email Address <input type="text" value="" />
          <button class="slideNext">Continue</button>
    </div>
</form> 
```

**jQuery :-**

```
<script type="text/javascript" >
$('.slideNext').click(function() {
   $('.slideBox').animate({
        left: '-50%'
    }, 500, function() {
        $(this).css('left', '150%');
        $(this).appendTo('#introFormHome');
    });
    $(this).next().animate({
        left: '50%'
    }, 500);
});
</script> 
```

**CSS :-**

```
.slideBox {
    position: absolute;
    width: 450px;
    height: 200px;
    line-height: 300px;
    font-size: 50px;
    text-align: center;
    border: 2px solid black;
    left: 70%;
    top: 300px;
    margin-left: -25%;
}
#slideBox1 {
    background-color: blue;
}

#slideBox2 {
    background-color: yellow;
    left: 150%;
}

#slideBox3 {
    background-color: red;
    left: 150%;
} 
```

那里的css，如果我设置单击div .slideBox{} 它可以正常工作，但不能使用上面发布的脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T06:48:17.397

我不是 jQuery 专家，但我知道您会希望将 jQuery 函数包装在 document.ready 中，如下所示：

```
<script type="text/javascript" >
$(document).ready(function() {

    $('.slideNext').click(function() {
       $('.slideBox').animate({
            left: '-50%'
        }, 500, function() {
        $(this).css('left', '150%');
        $(this).appendTo('#introFormHome');
    });
    $(this).next().animate({
        left: '50%'
    }, 500);
  });

});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T06:50:53.687

你可以发布CSS吗？仅当您的 div 相对或绝对定位时，Left 才会起作用。如果您还没有它，请在您的 css 中设置它：

```
.slideBox{position:absolute} 
```

根据您的布局，您可能还需要设置：

```
#introFormHome{position:relative} 
```

就像 PaparazzoKid 所说，您还应该将 jQuery 包装在：

```
$(document).ready(function(){
       //jQuery code in here
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-22T06:53:10.937

我建议将所有表单元素均匀放置，这样每次点击只需移动所有内容。这使您的 jQuery 代码更加简单。使用百分比来定位元素也会使事情变得更棘手。您可以考虑改用固定像素定位。那时，你的 JS 可以很简单

```
$('.slideNext').click(function() {
   $('.slideBox').animate({
     left: '-=150px'
   }, 500);
});​ 
```

有关实现示例，请参见此 jsFiddle：http: [//jsfiddle.net/5aFHk/](http://jsfiddle.net/5aFHk/)

我决定使用锚标签而不是按钮，但两者都应该可以正常工作。

# matlab - 均方误差图中的问题

> ID：11598218
> 
> 赞同：0
> 
> 时间：2012-07-22T06:35:37.103
> 
> 标签：matlab, implementation

有 2 个列向量 A、B，包含 100 个数据值。我打算使用以下代码绘制 MSE（均方误差），但我得到的只是一个点而不是线图。请帮助如何去做。

```
A=x(:,1);
B=y(:,1);

er=(double(A)-double(B)).^2;
row_er=mean(er,2); % variable changed
plot(row_er); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:00:48.260

请注意，命令 mean 返回一个向量的平均值（这是一个简单的值）。如果要绘制平方误差，则只需绘制（（AB）。^ 2）。

但是...如果您有兴趣用 10 个样本的平均值绘制均方误差，您将得到一个只有 10 个点的图（100 / 10，因为每 10 个数据点被平均得到一个点）。

该命令将是

情节（blkproc（（AB）。^ 2，[10,1]，'平均'））

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:32:08.370

这个脚本工作正常。

```
A = randn(10, 1);
B = randn(10, 1);
er=(double(A)-double(B)).^2;
row_e=mean(er,2);
plot(row_e) 
```

可能你有一个错字（`row_er`）

```
row_e=mean(er,2);
plot(row_er); 
```

# linux - 为什么内核使用 copy_to_user() 函数？

> ID：11598220
> 
> 赞同：0
> 
> 时间：2012-07-22T06:35:45.120
> 
> 标签：linux, kernel

内核为什么要使用这个`copy_to_user`函数？

不能直接对用户空间的数据进行操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T06:43:27.487

内核和用户空间应用程序具有不同的地址空间，因此复制到用户空间需要更改地址空间。每个进程都有自己的（用户）地址空间。

此外，内核在复制到用户空间时永远不会崩溃，因此该`copy_to_user`函数可能会检查目标地址是否有效（也许该地址应该被分页，例如从交换空间）。

阅读更多关于[linux 内核](http://en.wikipedia.org/wiki/Linux_kernel)、[系统调用](http://en.wikipedia.org/wiki/Syscall)、[进程](http://en.wikipedia.org/wiki/Process_%28computing%29)、[地址空间](http://en.wikipedia.org/wiki/Address_space)...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T06:50:39.947

如果一个给定的内核只为一个架构编写，这可能是也可能不是一个合理的选择。

有很多考虑因素可能因架构而异，因此需要某种多态操作......

*   保护......内核可能有太多或太少的访问权限，无论哪种方式都可能需要给定目标上的额外代码

*   地址空间......用户空间和内核空间可能重叠，因此需要特定于目标的解决方案或临时映射

*   页面错误管理......对用户空间的访问可能会出错，这需要避免或允许。限制对给定特定位置的访问允许额外设置或识别故障原因。

# python - 如何在python中进行故障转移？

> ID：11598233
> 
> 赞同：1
> 
> 时间：2012-07-22T06:39:38.293
> 
> 标签：python

我想问一下如何进行故障转移，如下所示：

```
 again = 1
 start = 1
 try:
   def countthis():
          for i in range (start,200):
              again = i
              print i
 except:
    print "Failure occured, I will try again" 
    start = again
    countthis.run() 
```

我想如果 for 函数在 i 的 try 中失败，它会从最新的 i 重新启动（而不是从 1 开始）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T07:50:03.310

您可以使用这样的迭代器函数：

```
def countthis(start=0, end=100):
    for i in range(start, end):
        print i
        if i == 5:
            raise Exception('5 failed')
        yield i 
```

然后在错误时使用下一个数字恢复计数器，跳过失败的：

```
ret = 0
end = 100
while ret < end - 1:
    try:
        for i in countthis(start=ret, end=end):
            ret = i
    except Exception, ex:
        print ex
        # when 5 reached, an exception will be raised, so here we restart at '6'
        ret = ret + 2 
```

这将最终打印：

```
0
1
2
3
4
5
5 failed
6
7
......
99 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T06:49:11.157

正如我之前评论的那样，您可能希望将*调用*包装在 try..except 中，而不是定义中。这是你想要的？

```
def f():
    print "f called: ",

    import random
    x = random.randint(0, 10) / 8

    print "1/x =", 1/x

while True:
    try:
        f()
        break
    except ZeroDivisionError:
        print "f failed"
        continue 
```

或者，如果您不想从 1 重新启动整个函数，为什么不在函数定义中使用 try..except ：

```
def f():
    import random

    for i in range(1, 10):
        while True:
            try:
                print i,

                # do something with i:
                print 1 / (i // random.randint(0, 8))
                break
            except ZeroDivisionError:
                continue

f() 
```

# sql - 如何在sql中的所有行中打印列的总和

> ID：11598237
> 
> 赞同：0
> 
> 时间：2012-07-22T06:40:56.083
> 
> 标签：sql, oracle, teradata

假设我有一个名为“myPlayerInfo”的表，其中包含以下行

```
'player name' 'number of goals'
'john'        '10'
'martin'      '20'
'jen'         '20' 
```

Q1。如何编写一个 sql 查询来打印一个新列，该列是“目标数”列的总和？

```
'player name' 'number of goals'  'Total goals by all players'
'john'        '10'               '50'
'martin'      '20'               '50'
'jen'         '20'               '50' 
```

Q2。如何编写一个 sql 查询来打印一个新列，该列是每个球员的进球百分比以及我们在第一季度所做的总进球数列。?

```
'player name' 'number of goals' '% goals scored'  'Total goals by all players'
'john'        '10'              '20'                  '50'
'martin'      '20'              '40'                  '50'
'jen'         '20'              '40'                  '50' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T06:48:00.657

您需要使用窗口函数：

```
select
    player_name,
    number_of_goals,
    (number_of_goals * 100) / SUM(number_of_goals) OVER () AS percent_goals_scored,
    SUM([number of goals]) OVER () AS total_goals_by_all_players
from myPlayerInfo 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T06:50:12.513

您可以对从子选择派生的所有行的总和执行笛卡尔连接：

```
SELECT 
    a.player_name, 
    a.number_of_goals, 
    (a.number_of_goals / b.goalsum)*100 AS percent_scored,
    b.goalsum
FROM   
    myPlayerInfo a
CROSS JOIN 
    (SELECT SUM(number_of_goals) AS goalsum FROM myPlayerInfo) b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T06:47:18.777

你的意思是像`SELECT name, goals, sum(goals) as sum, goals/sum(goals) as relgoals FROM table;`？

# codenameone - 在代号一中捕获未知主机异常

> ID：11598241
> 
> 赞同：2
> 
> 时间：2012-07-22T06:42:21.583
> 
> 标签：codenameone

我正在使用[代号一构建应用程序](http://www.codenameone.com)

所以问题是，我需要使用该应用程序访问一个 URL。URL 带回了我在屏幕上显示的一些结果。

所以我使用这些行来做到这一点：

```
ConnectionRequest c = new ConnectionRequest() {

                protected void readResponse(InputStream input) throws IOException {

                    ByteArrayOutputStream bs = new ByteArrayOutputStream();

                    int ch;

                    while ((ch = input.read()) != -1) {

                        bs.write(ch);
                    }
                    serverOutput = new String(bs.toByteArray());
                    bs.close();
                }
            };
            c.setUrl("My URL HERE");
            c.setPost(false);

            NetworkManager.getInstance().addToQueueAndWait(c); 
```

因此，现在，如果 gprs 处于活动状态，则此代码可以正常工作。

但是，如果 GPRS 处于非活动状态，则会引发 Unknow Host Exception

所以为了捕捉这个错误，我尝试使用这样的 try catch 块：

```
try{
 NetworkManager.getInstance().addToQueueAndWait(c);
}
catch(Exception e)
{
Sys.out.pln(e.troString());
} 
```

但是，我仍然在应用程序中以对话框的形式收到错误。我如何捕捉到这个错误并自己处理它？

**更新 1：**

我不确定这一定是一个特定问题的代号，或者与 java 相关......所以请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T13:45:14.460

试试这个来处理所有连接的一般错误：

```
NetworkManager.getInstance().addErrorListener(new ActionListener() {

     public void actionPerformed(ActionEvent evt) {
         //handle your error here consume the event
         evt.consume();
     }
}); 
```

或覆盖：

```
protected void handleErrorResponseCode(int code, String message) {
} 
```

和：

```
protected void handleException(Exception err) {
} 
```

在您的连接请求代码中只为一个类执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T16:07:11.747

尝试一下...

```
 public void init(Object context) {
        Display.getInstance().addEdtErrorHandler(new ActionListener() {

            public void actionPerformed(ActionEvent evt) {
                evt.consume();

                Throwable exception = (Throwable) evt.getSource();
            }
        });
    } 
```

# javascript - 如果 javascript 函数尝试使用 getElementById 以外的方法获取元素，则 JSF ajax 调用不起作用

> ID：11598243
> 
> 赞同：1
> 
> 时间：2012-07-22T06:42:31.163
> 
> 标签：javascript, ajax, jsf, dom

我有一个名为 Index.xhtml 的基本 JSF 页面和一个名为 TestBean.java 的支持 bean。基本上，在 JSF 的 ajax 调用呈现表格后，我试图将子元素附加到表格中的 td 元素。

代码如下。

索引.xhtml：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <h:outputScript library="javascript" name="surveyquestions.js"/>
    </h:head>
    <h:body>
        <h:outputLink value="reset.xhtml">reset</h:outputLink>

        <h:form id="myForm">
            <h:panelGroup id="myTable">
                <table>
                    <tr>
                        <td id="targetParent">
                            targetParent here.
                        </td>
                        <td>
                            <h:commandButton value="Click to append a child">
                                <f:ajax event="click" execute="@form"  render="myTable" listener="#{testBean.m()}" onevent="myAppendChild"  />
                            </h:commandButton>
                        </td>
                    </tr>
                </table>

            </h:panelGroup>
        </h:form>

    </h:body>
</html> 
```

支持 bean 只有一个名为 m 的方法，它什么也不做。我有两个 javascript 函数，它们被调用`<f:ajax event="click" execute="@form" render="myTable" listener="#{testBean.m()}" onevent="myAppendChild" />`：

```
function myAppendChild(data){
    if(data.status == "success"){
        var targetParent = document.getElementById("targetParent")
        alert(targetParent.nodeName);
        alert(targetParent.firstChild.nodeValue);
        var spanTag = document.createElement("span");
        spanTag.innerHTML="child";
        targetParent.appendChild(spanTag);

    }
}

function yourAppendChild(data){
    var addButton = data.source;
    if(data.status == "success"){
        var targetParent = addButton.parentNode.parentNode.cells[0];
        alert(targetParent.nodeName);
        alert(targetParent.firstChild.nodeValue);
        var spanTag = document.createElement("span");
        spanTag.innerHTML="child";
        targetParent.appendChild(spanTag);
    }
} 
```

当我尝试将一个子元素附加到 Id 为*targetParent*的 td 元素时，我发现第一个 javascript 函数*myAppendChild*工作正常。但是，第二个功能*yourAppendChild*仅在我删除`render="myTable"`.

如果我保留`render="myTable"`，*yourAppendChild*运行到最后，调用 appendChild 没有错误，但不知何故没有附加孩子。

在我看来，这两个函数都获得了完全相同的元素并试图将一个子元素附加到该元素，但第二个函数不适用于`render="myTable"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:07:37.367

当 JSF/ajax 呈现视图时，HTML DOM 树会部分更新/替换为新元素。JS 函数中的`addButton`元素在`yourAppendChild()`渲染之前仍然是旧 HTML DOM 树的一部分，但在 JS 函数运行时不再是新 HTML DOM 树的成员。您基本上是在遍历一个悬空引用，它不再指向当前 HTML DOM 树中的任何内容。您基本上需要直接从而不是从中获取`addButton`元素。`document``data.source`

但我建议忘记 JS 方法并采用理智和纯粹的 JSF 方法。您可能会发现这个启动示例很有帮助：[推荐的 JSF 2.0 CRUD 框架](https://stackoverflow.com/questions/3180400/recommended-jsf-2-0-crud-frameworks/3180885#3180885)。

# php - php gd中img滤镜亮度函数的取值范围

> ID：11598244
> 
> 赞同：2
> 
> 时间：2012-07-22T06:43:02.970
> 
> 标签：php, gd, brightness

任何人都知道 PHP GD 中 IMG_FILTER_BRIGHTNESS 函数的值范围是多少？我在手册中找不到它。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T06:46:10.317

在[评论部分](http://www.php.net/manual/en/function.imagefilter.php#72329)：

> -255 = 最小亮度，0 = 无变化，+255 = 最大亮度

# php - PHP：如何使用 $_GET 从字面上读取参数字符？

> ID：11598245
> 
> 赞同：1
> 
> 时间：2012-07-22T06:43:17.917
> 
> 标签：php, navigation

我正在尝试创建一个子导航，当脚本在适当的页面和子页面上找到自己时，它会回显“当前”。

我的问题是，当`$subpage == $encoded_subpage_name?"current":""`比较时，带有空格的子导航名称总是相等的`false`，因为`$encoded_subpage_name`会有`+`但`$subpage`不会。

```
<?php

    if (isset($_GET['p'])) {
        $page = $_GET['p'];
    } else {
        $page = "";
    }
    if (isset($_GET['subp'])) {
        $subpage = $_GET['subp'];
    } else {
        $subpage = "";
    }

    $subpages = array(
        "powered by company",
        "text messaging",
        "the app",
        "NFC",
        "your membership",
        "faq",
        "privacy policy",
        "terms &amp; conditions"
    );

    function buildSubNav($page, $subpages) {
        foreach ($subpages as $subpage) {
            $encoded_subpage_name = urlencode($subpage);
            echo '<li class="' . selected_subpage($encoded_subpage_name) . '"><a href="?p=' . $page . '&subp=' . $encoded_subpage_name . '"> ' . $subpage . '</a></li>';
        }
    }
    function selected_subpage($encoded_subpage_name) {
        global $subpage;
        $subpage = ($subpage);
        echo $subpage;
        return $subpage == $encoded_subpage_name?"current":"";
    }

?>
<ul>
    <?php buildSubNav($page, $subpages); ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T06:47:02.733

您遇到的问题是您在工作的中间进行编码，而不是在实际输出时进行编码。别那样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T06:44:41.207

使用[urldecode](http://php.net/manual/en/function.urldecode.php)：

```
$subpage = urldecode($_GET['subp']); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T07:01:08.347

我建议您将代码中的页面名称更改为对 URL 友好的名称（就像大多数 CMS 对其永久链接所做的那样），然后在您对其进行 URL 编码后，该字符串将保持不变。

有风格的东西：

*   将空格替换为 -
*   将“&”替换为“和”
*   将 ÅÄÖ 等国际字符替换为相似字符 AAO
*   删除所有与字母/数字字符和“-”不匹配的字符

在你的情况下，这会产生类似的东西：

```
$subpages = array(
    "powered-by-company",
    "text-messaging",
    "the-app",
    "NFC",
    "your-membership",
    "faq",
    "privacy-policy",
    "terms-and-conditions"
); 
```

可能有趣的链接

*   [友好网址的安全字符](https://stackoverflow.com/questions/695438/safe-characters-for-friendly-url)
*   [如何清理标题 URI？](https://stackoverflow.com/questions/1432463/how-do-i-sanitize-title-uris)

# c# - Mvc3 应用到 windowazure

> ID：11598248
> 
> 赞同：0
> 
> 时间：2012-07-22T06:43:42.147
> 
> 标签：c#, asp.net-mvc-3, azure

我想将我的 MVC - 3 项目转换为 WindowAzure 项目。我下载了适用于 VWD express 2010 的 SDK。有人可以指导这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T07:11:13.257

这应该可以帮助您：[迁移现有的 ASP.NET 应用程序以在 Windows Azure 上运行](http://blogs.msdn.com/b/jnak/archive/2010/02/08/migrating-an-existing-asp-net-app-to-run-on-windows-azure.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:12:27.563

[Jim Nakashima 撰写的关于使用 Microsoft Visual Studio 2010 构建在 Windows Azure 上运行的应用程序的](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2010/COS307)TechEd 2010 演示文稿应该会让您有所收获

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T05:00:00.407

首先，您无需对 MVC 应用程序进行任何更改即可迁移到 Windows Azure。安装 Azure SDK（2012 年 6 月）后，您将可以选择将解决方案属性设置为“添加 Windows Azure 云服务项目”，以将 MVCx 应用程序移动到 Windows Azure。您的主应用程序不会有任何更改，但这样您的应用程序将成为 Windows Azure 应用程序的一部分并在其中作为 Web 角色运行。

现在，如果您的 Azure 应用程序设置为启动项目并且如果您运行您的应用程序，这将在 Windows Azure 模拟器中启动您的应用程序，以便您可以在 Windows Azure 模拟器中测试您的 MVCx 应用程序。

最后，您需要进行必要的代码更改（即数据库连接等）才能成功地将您的应用程序作为云中的 Windows Azure 云服务运行。这完全取决于您的应用程序类型以及您希望如何在云中运行您的应用程序。

# asp.net - ASP.NET MVC 自定义客户端日期验证，如何获取输入名称？

> ID：11598249
> 
> 赞同：2
> 
> 时间：2012-07-22T06:43:48.493
> 
> 标签：asp.net, asp.net-mvc-3

这是简化模型：

```
public class Person {
   public int Id;
   public string Name;
}

public class Task {
  public int Id;
  public int PersonId;
  public DateTime StartDate;
  [GreaterThan("StartDate")]
  public DateTime EndDate;
} 
```

为了验证 EndDate >= StartDate，我编写了一般的**GreaterThanAttribute**。服务器端是微不足道的，但我在客户端验证上有问题。

我的 GreaterThanAttribute 从构造函数中获取了另一个属性（例如：“StartDate”），然后我将这个其他属性名称作为验证规则传递给 javascript。但它不起作用，因为 JS 不会找到这个元素，因为 MVC 将渲染并将其命名为“Task.StartDate”，而不是“StartDate”。

我的问题是，如何获取控制器将用于在 IClientValidatable.GetClientValidationRules() 中呈现我的模型的前缀？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T07:14:53.530

以下是你如何实现它：

```
public class GreaterThanAttribute : ValidationAttribute, IClientValidatable
{
    private readonly string _otherProperty;
    public GreaterThanAttribute(string otherProperty)
    {
        _otherProperty = otherProperty;
    }

    public override string FormatErrorMessage(string name)
    {
        return string.Format(CultureInfo.CurrentCulture, ErrorMessageString, name, _otherProperty);
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        var property = validationContext.ObjectType.GetProperty(_otherProperty);
        if (property == null)
        {
            return new ValidationResult(
                string.Format(
                    CultureInfo.CurrentCulture, 
                    "unknown property {0}", 
                    _otherProperty
                )
            );
        }
        var otherValue = (DateTime)property.GetValue(validationContext.ObjectInstance, null);
        var thisValue = (DateTime)value;
        if (thisValue <= otherValue)
        {
            return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
        }

        return null;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule();
        rule.ErrorMessage = FormatErrorMessage(metadata.GetDisplayName());
        rule.ValidationType = "greaterthandate";
        rule.ValidationParameters["other"] = "*." + _otherProperty;
        yield return rule;
    }
} 
```

在客户端：

```
(function ($) {
    var getModelPrefix = function (fieldName) {
        return fieldName.substr(0, fieldName.lastIndexOf('.') + 1);
    };

    var appendModelPrefix = function (value, prefix) {
        if (value.indexOf('*.') === 0) {
            value = value.replace('*.', prefix);
        }
        return value;
    };

    $.validator.unobtrusive.adapters.add('greaterthandate', ['other'], function (options) {
        var prefix = getModelPrefix(options.element.name),
            other = options.params.other,
            fullOtherName = appendModelPrefix(other, prefix),
            element = $(options.form).find(':input[name=' + fullOtherName + ']')[0];

        options.rules['greaterThanDate'] = element;
        if (options.message) {
            options.messages['greaterThanDate'] = options.message;
        }
    });

    $.validator.addMethod('greaterThanDate', function (value, element, params) {
        var otherDate = $(params).val();
        var thisDate = value;

        // TODO: put your custom date comparison implementation here between
        // the 2 values. Be careful here. Javascript date handling is culture dependent
        // so you might need to account for that when building your js Date instances

        return false;
    }, '');
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T06:52:58.830

这已经完成了。我建议您使用 FoolProof 验证。如果您不想这样做，您至少可以查看他们的源代码。这是一个[链接](http://foolproof.codeplex.com/)

# ruby-on-rails - form_for 使用多态关系

> ID：11598251
> 
> 赞同：1
> 
> 时间：2012-07-22T06:44:04.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3, polymorphic-associations, form-for, nested-form-for

我有一个可以有很多事务的用户模型。事务可以是 type1、type2 或 type3 中的一种，每种类型都有不同的属性集。例如：type1 包含属性 a、b 和 c；而 type2 包含属性 a、c、d 和 e。User、Transaction 和 Type 模型定义如下：

```
class User < AR::Base
  has_many :transactions
end

class Transaction < AR::Base
  belongs_to :user
  belongs_to :transactionable, polymorphic: true
end

class Type1 < AR::Base
  has_many :transactions, as: :transactionable
end

class Type2 < AR::Base
  has_many :transactions, as: :transactionable
end

class Type3 < AR::Base
  has_many :transactions, as: :transactionable
end 
```

现在，在生成 html 表单时，我有

```
/app/views/user/new.html.erb

<%= form_for @user do |f| %>
  ***
<% end %>

/app/views/user/show.html.erb

<%= form_for ... do |f| %>
  <%= f.text_field: a %>
  <%= f.text_field: b %>
  <%= f.text_field: c %>
<% end %> 
```

在后面的form_for helper中，我想收集type1模型属性的用户输入数据。任何人都可以帮助在后面的 form_for 助手中应该输入什么内容吗？我试过@user.transactions.build_type1，但它显示错误。知道可能出了什么问题吗？

# c# - 在渲染事件完成之前截取 html，但从模块中截取，或者你有更好的主意吗？

> ID：11598252
> 
> 赞同：0
> 
> 时间：2012-07-22T06:44:27.793
> 
> 标签：c#, asp.net, web-applications

我正在研究 ac# asp。网络表单网站，拥有 5000 个页面。

这些页面到处都是，有些使用母版页，有些则没有。

我需要为每个页面添加一个 div，但我无法编辑或上传每个页面，因为它太多且有风险。唯一不变的是页面都在同一个站点中，并且都有代码隐藏。

我知道如何通过覆盖一个页面/母版页的呈现页面事件来拦截 html，但是我如何在一个地方为许多人执行此操作。

是否有可能整个站点有一个最终呈现事件，我可以访问 html，可能从模块调用它并从 web.config 调用它，或者可能是 Global.asax 中的事件？

是否有应用程序事件来拦截 html？

感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:57:16.750

在这种情况下，您应该只实现自己的 HttpModule :) [这是一个示例](http://support.microsoft.com/kb/307996)。

# c# - 为什么 xna 中的 draw() 需要一个 tint 参数

> ID：11598253
> 
> 赞同：2
> 
> 时间：2012-07-22T06:44:31.050
> 
> 标签：c#, xna

spritebatch.draw 采用纹理、矩形和颜色。

颜色是色调。

为什么需要染色？为什么传递白色作为参数表示没有色调？为什么不是黑色，或者根本不传递色调参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T07:27:23.920

色调颜色与纹理颜色相乘。白色在保持原始颜色不变的所有通道中基本上是 1。这个博客有一个全面的解释。 [http://blogs.msdn.com/b/shawnhar/archive/2009/11/10/premultiplied-alpha-in-xna-game-studio.aspx](http://blogs.msdn.com/b/shawnhar/archive/2009/11/10/premultiplied-alpha-in-xna-game-studio.aspx)

# php - Apache gettext 窗口不工作/翻译

> ID：11598263
> 
> 赞同：1
> 
> 时间：2012-07-22T06:46:42.797
> 
> 标签：php, windows, apache, gettext

我是gettext的新手。

这是我的设置： **/Apache 2.2 PHP 5.3.6 Windows 7/**

我在**Apache/htdocs/test/index.php中有以下代码**

```
<?php
    $language = 'de_DE'; 
    $translatefile = 'messages'; 
    setlocale(LC_ALL, $language);
    putenv("LANG=".$language); 
    bindtextdomain($translatefile, 'C:/locale'); 
    textdomain($translatefile); 

    echo gettext("Hello World!");
?> 
```

**我使用 PoEdit 在locale/de_DE/LC_MESSAGES/messsages.po** & messages.mo下生成必要的翻译我使用的字符集是**UTF-8**

当我访问`http://localhost/test`时，结果是 Hello World！什么时候应该是霍尔韦尔特！

作为测试，我打开命令提示符并导航到测试文件夹。然后我输入

```
php index.php 
```

控制台中出现的结果是

```
Hall Welt! 
```

我不确定为什么它不能与 Apache 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:54:10.390

这个问题没有用传统的方式解决。我不得不使用 php-gettext 而不是 gettext(php_gettext.dll) 默认内置在 php 中。

细节：

1) 从这里下载 php-gettext：[https](https://launchpad.net/php-gettext/+download) ://launchpad.net/php-gettext/+download 2) 在 index.php 所在的文件夹中添加以下文件：-gettext.inc-gettext.php-streams.php 3) 这是新的 index.php

```
 <?php
    error_reporting(E_ALL | E_STRICT);

    // define constants
    define('PROJECT_DIR', realpath('./'));
    define('LOCALE_DIR', 'C:/locale');
    define('DEFAULT_LOCALE', 'de_DE');

    require_once('gettext.inc');

    $supported_locales = array('en_US', 'sr_CS', 'de_CH');
    $encoding = 'UTF-8';

    $locale = (isset($_GET['lang']))? $_GET['lang'] : DEFAULT_LOCALE;

    //var_dump($locale);die();

    // gettext setup
    T_setlocale(LC_MESSAGES, $locale);
    // Set the text domain as 'messages'
    $domain = 'messages';
    bindtextdomain($domain, LOCALE_DIR);
    // bind_textdomain_codeset is supported only in PHP 4.2.0+
    if (function_exists('bind_textdomain_codeset')) 
      bind_textdomain_codeset($domain, $encoding);
    textdomain($domain);

    echo gettext("Hello World!");
    ?> 
```

4) 打开你的 php.ini 并注释掉 php_gettext.dll：

```
 ;extension=php_gettext.dll 
```

访问`http://localhost/test`，你会看到`Hall Welt!`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:01:09.440

我今天在 wampserver 2.2、apache 2.2、windows 7、64 位上遇到了同样的问题。我卸载了它并安装了 32 位。有用。

# java - 当用户单击 JTextField 时如何显示打开文件对话框？

> ID：11598266
> 
> 赞同：1
> 
> 时间：2012-07-22T06:46:55.010
> 
> 标签：java, swing, jtextfield, mouse-listeners, focuslistener

我想在用户单击`JTextField`. 当我添加以下代码（我现在将其删除）...

```
 this.textField.addFocusListener(new FocusListener() {

    public void focusGained(FocusEvent event) {
      // Show the Open File dialog box.
      // Same as lines 86-93 in the link below.
    }

    public void focusLost(FocusEvent event) {
      // Do nothing.
    }

 } 
```

（代码[在这里](https://github.com/bjpeterdelacruz/Java-Katas/blob/master/src/org/jlpt/client/main/StandaloneClientOpenFileDialogBox.java)。）

...似乎在用户选择一个文件然后单击确定按钮后，会再次出现打开文件对话框，因为我假设焦点仍然在`JTextField`. 当用户单击“取消”按钮时，也会发生同样的事情。

我该如何解决这个问题？您的建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:55:36.843

问题是当文件选择器对话框出现时，它会获得焦点。当它关闭时（我假设），您重新聚焦文本字段（或焦点管理器将焦点返回给它），这会再次触发焦点事件。

我可以想到两种解决方案。一，如果您只希望在用户“单击”字段时出现文件对话框，请改用鼠标侦听器。

二、使用内部标志来监控当前的运行状态。考虑到事件处理的性质，这可能更难实现

# android - 如何在循环中使用 asynctask？

> ID：11598267
> 
> 赞同：2
> 
> 时间：2012-07-22T06:46:57.960
> 
> 标签：android

我正在使用带有如下循环的 asynctask 在数据库中保存一些数据：

```
for(int i=0;i<5;i++){
new Loader().execute(i);
} 
```

在我的 asynctask 类中，doinbackground 方法是这样的：

```
@Override
        protected Void doInBackground(Integer... params) {
            db.insert(params[0]);
            return null;
        } 
```

它正在执行但每次它在数据库中插入第一个值`i`？如何与相应的这个循环一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:54:35.723

您可以执行以下操作：

```
 @Override
    protected Void doInBackground(Integer... params) {
        int count = params.length;
        db.beginTransaction();
        try {
            for (int i = 0; i < count; i++) {
                db.insert(params[i]);
            }
            db.setTransactionSuccessful();
        } finally {
            db.endTransaction();
        }
        return null;
    } 
```

你打电话给`new Loader().execute(1, 2, 3, 4, 5);`

`AsyncTask`通过只创建一个对象实例来节省内存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T06:54:50.590

尝试在任务中获取循环。

```
 Integer arr[] = new Integer[2];
    arr[0]=0;
    arr[1]=1;

    new Loader.execute(arr);

    @Override
            protected Void doInBackground(Integer... params) {

                foreach (Integer i : params)
                 db.insert(params[i]);
                return null;
            } 
```

# php - 使用 curl 和 opendir 找不到文件

> ID：11598272
> 
> 赞同：-1
> 
> 时间：2012-07-22T06:48:13.523
> 
> 标签：php, upload

以下脚本使用 kat.ph 上传 api 上传种子；但是，当我使用 echo 找出问题所在时，我收到了一个找不到文件的错误，为什么文件没有被上传，因为我可以在我的目录中看到该文件

```
<?php
$dhandle = opendir('.');
error_reporting(E_ALL);
$length = ob_get_length(); 
$katphdata ['desc'] = 'torrentdescription';
$katphdata ['name'] = 'testingscript';
$katphdata ['category_name'] = '38';
$katphdata ['torrentFile'] = 'name.torrent';
$katphdata ['userhash'] = 'hash';
foreach ( $katphdata as $key => $value) {
    $post_items[] = $key . '=' . $value;
}
$post_string = implode ('&', $post_items);
$curl_connection = curl_init('http://kat.ph/torrents/upload/');
curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt ($curl_connection, CURLOPT_HTTPHEADER, array("Content-Type: application/x-bittorrent", "Content-Length: $length"));
curl_setopt($curl_connection, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_items);

curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl_connection,CURLOPT_ENCODING,"gzip");
curl_setopt($curl_connection, CURLOPT_POST, true);
$result = curl_exec($curl_connection);
return $result;
var_dump($result);
//show information regarding the request
print_r(curl_getinfo($curl_connection));
echo curl_errno($curl_connection) . '-' .
                curl_error($curl_connection);
//close the connection
curl_close($curl_connection);

?> 
```

这是他们的洪流上传表格

```
 <input type="file" class="primary inputfile" name="torrentFile" />&nbsp;&nbsp;&nbsp;&nbsp;<div class="goodalertfield inlineblock">You can upload only <strong>*.torrent</strong> files</div>
<br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:51:49.573

问题解决了，删除内容头并添加推荐代理，它工作正常

# javascript - 使用 express js 在浏览器中显示 Pdf

> ID：11598274
> 
> 赞同：36
> 
> 时间：2012-07-22T06:48:43.747
> 
> 标签：javascript, node.js, pdf, express, buffer

我正在尝试通过 Express 以在浏览器中显示的方式提供 PDF：

```
app.post('/asset', function(request, response){
  var tempFile="/home/applmgr/Desktop/123456.pdf";
  fs.readFile(tempFile, function (err,data){
     response.contentType("application/pdf");
     response.send(data);
  });
}); 
```

但是，浏览器显示二进制内容。如何正确处理？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-02-14T19:58:39.410

指定如何处理文件下载都归结为`Content-disposition`标题。您也可以在此处指定文件的名称。我们还设置了`Content-type`以确保浏览器知道如何处理给它的文件。

# Express.js 示例：

```
app.post('/url/to/hit', function(req, res, next) {
  var stream = fs.readStream('/location/of/pdf');
  var filename = "WhateverFilenameYouWant.pdf"; 
  // Be careful of special characters

  filename = encodeURIComponent(filename);
  // Ideally this should strip them

  res.setHeader('Content-disposition', 'inline; filename="' + filename + '"');
  res.setHeader('Content-type', 'application/pdf');

  stream.pipe(res);
}); 
```

现在，如果您更仔细地查看`Content-disposition`，您会注意到该`inline;`字段设置了浏览器对文件的反应方式。如果你想强制下载，你可以通过设置`inline;`来做到这一点`attachment;`

我还发现（被烧了几次），如果您在文件名中设置特殊字符，它可能会损坏。所以我`encodeURIComponent()`的文件名以确保不会发生。

希望能帮助其他人试图弄清楚同样的事情！

## 编辑

在我最初和现在发布此内容之间的时间里，我发现了如何正确编码`content-disposition`'s filename 参数。 [根据规范，文件名应该是 RFC5987 编码的。](https://www.rfc-editor.org/rfc/rfc6266#section-4.3) 我最终从 MDN 中找到了一个[示例代码片段](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent#Examples)，它可以正确处理此处的编码（`encodeURIComponent()`这不是该字段的完全正确格式）。

### MDN 片段

```
var fileName = 'my file(2).txt';
var header = "Content-Disposition: attachment; filename*=UTF-8''" 
             + encodeRFC5987ValueChars(fileName);

console.log(header); 
// logs "Content-Disposition: attachment; filename*=UTF-8''my%20file%282%29.txt"

function encodeRFC5987ValueChars (str) {
    return encodeURIComponent(str).
        // Note that although RFC3986 reserves "!", RFC5987 does not,
        // so we do not need to escape it
        replace(/['()]/g, escape). // i.e., %27 %28 %29
        replace(/\*/g, '%2A').
            // The following are not required for percent-encoding per RFC5987, 
            // so we can allow for a little better readability over the wire: |`^
            replace(/%(?:7C|60|5E)/g, unescape);
} 
```

在此之上的另一个注意事项是，浏览器也不完全符合规范。有些字符仍然会从下载中错误地返回（至少在我测试时）。

您可以通过更新下载的工作方式来解决*此问题。*如果您的下载 URL 以文件名结尾（并且您没有`filename`在标头中提供属性），它将正确地从 URL 编码值中获取文件名。IE`'http://subdomain.domain-url.com/some/path/to/downloads/' + encodeURIComponent("You're there, download this!.pdf")`

Jeeze，以及所有为您的下载提供文件名！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-22T18:23:07.243

我测试了您的代码，它在 chrome 中对我有用，但有一项更改：更改`app.post`为`app.get`

编辑：因为您似乎认为仅 POST 服务器是一个好主意，请阅读以下内容：http: [//net.tutsplus.com/tutorials/other/a-beginners-introduction-to-http-and-rest/](http://net.tutsplus.com/tutorials/other/a-beginners-introduction-to-http-and-rest/) 向下滚动直到 HTTP 动词并检查 GET 和 POST 之间的区别。:)

一些快速研究表明，其他浏览器可能存在其他问题，例如 IE 可能期望 URL 以`.pdf`. 因为我在我的 Mac 上，所以我无法为你测试；）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-23T17:03:12.130

我将 PDF 直接发送到浏览器的解决方案：

```
app.get('/my/pdf', function (req, res) {
    var doc = new Pdf();
    doc.text("Hello World", 50, 50);

    doc.output( function(pdf) {
        res.type('application/pdf');
        res.end(pdf, 'binary');
    });
}); 
```

res.end() 与第二个参数“二进制”在我的案例中起到了作用。否则表示将其解释为字符串

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-02-03T21:03:07.973

实际上 Express 已经有了[这个](https://expressjs.com/en/4x/api.html#res.sendFile)发送文件的功能。所有你需要的是 ：

```
app.get('/sendMePDF', function(req, res) {
  res.sendFile(__dirname + "/static/pdf/Rabbi.pdf");
}) 
```

在这里，服务器将发送文件“Rabbi.pdf”，它将在浏览器中打开，就像您在浏览器中打开 pdf 一样。我将文件放在“静态”文件夹中，但您可以将它放在任何地方，知道 sendFile() 将绝对路径（而不是相对路径）作为参数。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-03-19T08:12:05.860

它就像下面的代码一样简单：

```
var express = require('express'),
    fs = require('fs'),
    app = express();

app.get('/', function (req, res) {
    var filePath = "/files/my_pdf_file.pdf";

    fs.readFile(__dirname + filePath , function (err,data){
        res.contentType("application/pdf");
        res.send(data);
    });
});

app.listen(3000, function(){
    console.log('Listening on 3000');
}); 
```

*对于完整的回购*：

克隆 node-cheat [pdf_browser](https://github.com/zishon89us/node-cheat/tree/master/pdf/pdf_browser)，运行`node app`后跟`npm install express`.

乐于助人！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-20T10:40:01.343

根据 Express js 文档，您可以在一个函数中设置 Content Type 和 Content Disposition，如下所示

```
 fs.readFile(filePath, (err, data) => {
res.set({
  "Content-Type": "application/pdf", //here you set the content type to pdf
  "Content-Disposition": "inline; filename=" + fileName, //if you change from inline to attachment if forces the file to download but inline displays the file on the browser
});
res.send(data); // here we send the pdf file to the browser
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-21T06:32:19.387

```
post('/fileToSend/', async (req, res) => {

  const documentPath = path.join(
    __dirname,
    '../assets/documents/document.pdf'
  );

  res.setHeader('Content-Type', 'application/pdf');
  res.setHeader('Content-Disposition', 'attachment; filename=document.pdf');

  return res.download(documentPath);
}); 
```

# cassandra - 通过 Astyanax 连接到 Cassandra 时出现 PoolTimeoutException

> ID：11598281
> 
> 赞同：7
> 
> 时间：2012-07-22T06:50:15.960
> 
> 标签：cassandra, astyanax

我正在尝试使用 astyanax 连接到本地 cassandra，但不断收到 PoolTimeoutException。我可以使用 cli 或 hector 客户端连接到 cassandra。知道我在做什么错吗？

谢谢。

我的代码：

```
val context = new AstyanaxContext.Builder()
        .forCluster("cluster")
        .forKeyspace(keyspace)
        .withAstyanaxConfiguration(
                new AstyanaxConfigurationImpl()
                    .setDiscoveryType(NodeDiscoveryType.NONE)
        )
        .withConnectionPoolConfiguration(
                new ConnectionPoolConfigurationImpl("ConnPool")
                    .setPort(9160)
                    .setMaxConnsPerHost(1)
                    .setMaxBlockedThreadsPerHost(1)
                    .setSeeds("127.0.0.1:9160")
                    .setConnectTimeout(10000)
        )
        .withConnectionPoolMonitor(new CountingConnectionPoolMonitor())
        .buildKeyspace(ThriftFamilyFactory.getInstance())
    context.start()
    return context.getEntity() 
```

例外：

```
Exception in thread "main" java.lang.RuntimeException: com.netflix.astyanax.connectionpool.exceptions.PoolTimeoutException: PoolTimeoutException: [host=127.0.0.1(127.0.0.1):9160, latency=10004(10004), attempts=1] Timed out waiting for connection
at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$7.getNextBlock(ThriftColumnFamilyQueryImpl.java:652)
at com.netflix.astyanax.thrift.ThriftAllRowsImpl$1.hasNext(ThriftAllRowsImpl.java:61)
at scala.collection.JavaConversions$JIteratorWrapper.hasNext(JavaConversions.scala:574)
at scala.collection.Iterator$class.foreach(Iterator.scala:772)
at scala.collection.JavaConversions$JIteratorWrapper.foreach(JavaConversions.scala:573)
at scala.collection.IterableLike$class.foreach(IterableLike.scala:73)
at scala.collection.JavaConversions$JIterableWrapper.foreach(JavaConversions.scala:587)
at  at scala.Function0$class.apply$mcV$sp(Function0.scala:34)
at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:12)
at scala.App$$anonfun$main$1.apply(App.scala:60)
at scala.App$$anonfun$main$1.apply(App.scala:60)
at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
at scala.collection.immutable.List.foreach(List.scala:76)
at scala.collection.generic.TraversableForwarder$class.foreach(TraversableForwarder.scala:30)
at scala.App$class.main(App.scala:60)
at Caused by: com.netflix.astyanax.connectionpool.exceptions.PoolTimeoutException: PoolTimeoutException: [host=127.0.0.1(127.0.0.1):9160, latency=10004(10004), attempts=1] Timed out waiting for connection
at com.netflix.astyanax.connectionpool.impl.SimpleHostConnectionPool.waitForConnection(SimpleHostConnectionPool.java:201)
at com.netflix.astyanax.connectionpool.impl.SimpleHostConnectionPool.borrowConnection(SimpleHostConnectionPool.java:158)
at com.netflix.astyanax.connectionpool.impl.RoundRobinExecuteWithFailover.borrowConnection(RoundRobinExecuteWithFailover.java:60)
at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:50)
at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:229)
at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$7.getNextBlock(ThriftColumnFamilyQueryImpl.java:623) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:37:04.360

另一个问题是，如果您将数据猛灌到一个节点并且您有 50 个线程池并且每个主机只有 1 个连接，您将得到相同的结果，因此在某些情况下您还必须平衡线程/主机的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T20:30:57.910

我们也遇到了这个问题。对我们来说，原来是 libthrift 的版本问题。版本 0.7.0 工作。0.6.1 版没有。检查你的类路径，看看......祝你好运。

-td

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-11T18:23:07.783

尝试通过错误的端口连接也会出现此错误。请参阅[此](https://github.com/Netflix/astyanax/issues/86)讨论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-01T23:40:46.943

您需要安装[Apache Thrift](https://thrift.apache.org/)，对我来说它可以安装此应用程序：

[提升](https://thrift.apache.org/docs/install/os_x)
[libevent](http://libevent.org/)
[Thrift](https://thrift.apache.org/docs/BuildingFromSource)

快乐编码:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-18T09:17:30.753

在 cassandra.yaml 中执行以下操作

1.  检查`rpc_address`
2.  检查 `rpc_port`
3.  设置`start_rpc`为`true`

# android - 使用数学函数中的值在 cocos2d-x 中渲染

> ID：11598283
> 
> 赞同：9
> 
> 时间：2012-07-22T06:50:43.980
> 
> 标签：android, cocos2d-x, ccsprite

早上好。

我在 linux 上，使用 cocos2d-x 进行`Android`.

我创建了一个计算圆值的函数。

```
        // 圆点 updateCircle()
    // x = 迭代次数 · SamplingPeriod |-|-|-|
    // y = A · sine (2 · PI · 迭代次数 · SamplingPeriod / Period )
    int 迭代 = this->getNumberOfIterations();
    CCPoint centerPoint = this->getCenter();
    float x = centerPoint.x + this->getAmplitude() * cos( 2 * M_PI * 迭代次数 * this->getSamplingPeriod() * this->getFrequency() );
    float y = centerPoint.y + this->getAmplitude() * sin( 2 * M_PI * 迭代 * this->getSamplingPeriod() * this->getFrequency() );

    _newPoint = ccp(x, y);

        // 创建数组动作
    CCArray *myActionsArray = new CCArray(3);

    // 设置动作移动
    CCAction *actionMove1 = CCMoveTo::create(this->getSamplingPeriod(), newPoint); // 移动到下一个点
        CCAction *actionMove2 = CCCallFuncN::create(this, callfuncN_selector(GameObject::updateCircle)); // 再次调用这个函数

        // 插入对象
    myActionsArray->insertObject(actionMove1, 0);
    myActionsArray->insertObject(actionMove2, 1);

    // 创建序列
    CCAction *action = CCSequence::create(myActionsArray);

        // 设置标签
    动作->setTag(kActionMove);

    // 跑
    this->runAction(动作);

    // 设置新调用以在 SamplingFrequency ms 中放置新点
    迭代 += 1；
    静态常量 int maxIterationCycle = 1 / (this->getSamplingPeriod() * this->getFrequency());
    如果（迭代次数 >= maxIterationCycle）
    {
        迭代 = 1;
    }

    this->setNumberOfIterations(迭代);
    CCLog("texttx 迭代次数 %d/%d", 迭代次数, maxIterationCycle);

```

或者，我尝试过：

```

    // 设置动作移动
    CCAction *actionMove1 = CCCallFuncN::create(this, callfuncN_selector(GameObject::macroSetNewPoint));
    CCAction *actionMove2 = CCDelayTime::create(this->getSamplingPeriod());
    CCAction *actionMove3 = CCCallFuncN::create(this, callfuncN_selector(GameObject::updateCircle));

```

和

```
        // 设置动作移动
    CCAction *actionMove1 = CCMoveTo::create(this->getSamplingPeriod(), _newPoint);
    CCAction *actionMove2 = CCDelayTime::create(this->getSamplingPeriod());
    CCAction *actionMove3 = CCCallFuncN::create(this, callfuncN_selector(GameObject::updateCircle));

```

问题是我的游戏对象在圆圈中移动，但在大约 1000 次迭代后，它消失了，并在几秒钟后再次出现。我不知道发生了什么 - 分数计算正确（我认为）

也许 moveto 需要更多时间来执行？我如何计算一个数学赞助人来移动我的精灵跟随它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T09:53:32.047

我已经测试了你的代码并且工作正常。请检查您是否正在从另一个回调或其他内容中更新一个点。如果数据是公开的，它可能会被代码的另一部分更新。

# php - 如何在 PHP 中替换像 \u0219 这样的重音符号？

> ID：11598291
> 
> 赞同：0
> 
> 时间：2012-07-22T06:51:51.767
> 
> 标签：php, unicode, replace, diacritics

我有一个 PHP 脚本，Ajax 函数使用它在 MySQL 数据库中传递一些输入变量。但是像“Camping Dragoske, DN73C, Burluşi”这样的字符串存储在 MySQL 数据库中，如“Camping Dragoske, DN73C, BurluÈ™i, RomÃ¢nia”，并被 ajax.php 文件捕获，如“Camping Dragoske, DN73C, Burlu \u0219i，罗马\u00e2nia”。

我的 HTML 字符集编码是 UTF-8，MySQL 表设置为`utf8_general_ci`，字段设置为`utf8_unicode_ci`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:08:20.700

这可能是由于 MySQL 连接的编码。对于无错误的 utf8 环境，您需要将页面、数据库和 mysql 连接设置为 UTF-8。

试试这个功能：

```
mysql_set_charset('utf8'); 
```

或者更好地使用mysqli：

```
$mysqli->set_charset("utf8"); 
```

[http://php.net/manual/fr/mysqli.set-charset.php](http://php.net/manual/fr/mysqli.set-charset.php)

# android - 如何在 Phonegap Android 中使用 HTTPS 协议执行 Ajax 调用？

> ID：11598292
> 
> 赞同：0
> 
> 时间：2012-07-22T06:51:51.950
> 
> 标签：android, jquery, jquery-mobile, cordova

我是安卓新手。我正在 Phonegap 中开发一个应用程序并实现了 ajax 调用以使用 HTTPS 协议与服务器进行通信。当我在清单文件中将 debuggable 设置为 true 时，它​​工作正常。如果我将其更改为 false，则它不起作用。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T18:46:40.810

您正在使用的 Web 服务需要有一个有效的证书，一个不是自签名的。否则 SSL 将失败。

看[这里](https://stackoverflow.com/questions/8977226/phonegap-ajax-call-to-https-server-with-self-signed-certificate-fails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T05:19:00.970

在 Android 4.0+ 中发生的另一个问题（但在 2.3 等旧版本中没有）......您必须在发送之前手动设置授权标头。使用新的用户名：密码：在 jQuery 1.7 中添加的选项不起作用。

下面的示例说明了您必须执行的操作。
注意：这需要 base64 jquery 插件。

```
 $.ajax({
            url: "https://yoururl,
            type: method,
            dataType: 'json',
            // username: username,  // Doesn't work on ANDROID
            // password: password,  // Doesn't work on ANDROID
            beforeSend: function (xhr)
            {
                xhr.setRequestHeader("Authorization", "Basic " + $.base64.encode( username + ":" + password ));
            },
            data: options.data,
            success: function(response) {

            },
            error: function(jqXHR, textStatus, errorThrown) {

            }
        }); 
```

# javascript - 返回一个值然后分配它 - 可能的竞争条件？

> ID：11598294
> 
> 赞同：0
> 
> 时间：2012-07-22T06:52:09.633
> 
> 标签：javascript, jquery

如果我有这样的代码 - 让我们简化它。

```
someObj.newVal = returnSomVal();

function returnSomVal(){
    return grabproperVal();
}

function grabproperVal(){
    var someVal;
    //some js figuring to get proper value for somVal;
    return someVal
    someObj.newVal = setSomeCookie(someObj.newVal,'cookiename');
} 
```

是否存在发生这种情况的竞争条件：

```
someObj.newVal = setSomeCookie(someObj.newVal,'cookiename'); 
```

在此分配发生之前：

```
someObj.newVal = returnSomVal(); 
```

我“有时”错过了 var，我不知道这是否是我的测试方法，或者可能“正在”发生竞争条件。只是试图缩小范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:57:00.510

您需要知道这些函数的行为方式。您所说的行为似乎被解雇了，因为您的一个（或两个）函数是异步的。您将需要在必须首先执行的函数中使用回调。当它完成其异步任务时，您将执行第二个任务。

# ruby-on-rails - 关联语法 ruby on rails 复数

> ID：11598295
> 
> 赞同：2
> 
> 时间：2012-07-22T06:52:31.230
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我是 Ruby 的新手，只是使用这个论坛来帮助理解该语言，同时我编写一个示例应用程序来磨练我的技能。

我试图在产品和媒体之间建立一个多方面的关系。我怀疑我遇到的挑战是因为复数形式的媒介，但不知道如何解决它。

```
class CreateMedia < ActiveRecord::Migration
  def change
    create_table :media do |t|
      t.string :type
      t.string :alt
      t.boolean :is_primary
      t.string :url_tiny
      t.string :url_small
      t.string :url_regular
      t.string :url_large
      t.string :title

      t.timestamps
    end
  end
end

 class Media < ActiveRecord::Base
  attr_accessible :alt, :is_primary, :title, :type, :url_large, :url_regular, :url_small, :url_tiny
  belongs_to :product
end

class Product < ActiveRecord::Base
   attr_accessible :assoc_product,:product_id, :merch_associations, :aux_description, :buyable, :long_description, :name, :on_special, :part_number, :release_date, :short_description, :withdraw_date, :occasion
  has_and_belongs_to_many :categories
  has_many :merch_associations
  has_many :assoc_products, :through => :merch_associations
  has_many :media
 ... 
```

当我运行它时（注意dress_media 是一个填充的媒体对象数组）：

```
 products[i].media << dress_media[m] 
```

我在错误控制台中得到了这个：

```
uninitialized constant Product::Medium 
```

我查看了数据库，该表确实称为媒体，而不是媒体。所以我认为它应该是复数吧？（此代码是从 rails 生成器生成的）

就像我说我是 Rails 的新手，所以如果有人能指出我在产品和媒体之间创建一对多的正确方向，那会很棒吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T07:20:15.357

据我了解，您有一个名为“媒体”的模型。请注意，正如您在问题中提到的，“媒体”已经是复数形式。正确的是有一个名为“中”的模型和以下关系：

```
class Medium < ActiveRecord::Base
    attr_accessible :alt, :is_primary, :title, :type, :url_large, :url_regular,:url_small, :url_tiny
    belongs_to :product
end 
```

和

```
class Product < ActiveRecord::Base
   attr_accessible :assoc_product,:product_id, :merch_associations, :aux_description,     :buyable, :long_description, :name, :on_special, :part_number, :release_date,     :short_description, :withdraw_date, :occasion
   has_and_belongs_to_many :categories
   has_many :merch_associations
   has_many :assoc_products, :through => :merch_associations
   has_many :media
   ...
end 
```

有时您可能想要设置或覆盖 Rails 的单数化和复数化。我不建议在这种特定情况下这样做，但看看[http://blog.thefrontiergroup.com.au/2011/06/pluralizations-and-singularizations-inflections-in-rails-3/](http://blog.thefrontiergroup.com.au/2011/06/pluralizations-and-singularizations-inflections-in-rails-3/)就知道了怎么做。

请注意，如果您创建一个名为“Medium”的模型，则数据库表将称为“Media”。

# oop - 两个相互依赖但功能不同的类是否应该有一个共同的超类？

> ID：11598297
> 
> 赞同：0
> 
> 时间：2012-07-22T06:52:53.340
> 
> 标签：oop, inheritance

我有一个依赖于 B 类的 A 类。它们具有非常不同的功能，但共享相似的方法。我虽然将这些类拆分并从一个共同的超类中继承它们，但它们并不相关。

我应该从一个公共超类中继承它们，还是应该创建另一个包含 A 类和 B 类组件的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:36:20.463

非常广泛的场景。我相信，如果两个完全不相关的类有一些共同的操作，那完全代表了一些包级或全局实用程序操作。

您可能会考虑根据具体场景将这些操作提取到实用程序类或常规类中。

# iphone - 如何在 iPhone 上通过一次用户交互向多个收件人发送短信？

> ID：11598301
> 
> 赞同：-1
> 
> 时间：2012-07-22T06:53:35.833
> 
> 标签：iphone, cocoa-touch, ios5, ios4

有谁知道，如果可能的话，以及如何通过一次用户交互向多个收件人发送短信。这意味着，当用户在 iPhone 上按一次发送按钮时，我们的应用程序应该将 SMS 发送到具有静态消息正文的数字列表？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:24:51.940

只要你不使用自己的服务发送短信是不可能的

# database - 打开文本文件，修改文本，使用 groovy 放入 sql 数据库

> ID：11598302
> 
> 赞同：1
> 
> 时间：2012-07-22T06:54:01.790
> 
> 标签：database, text, groovy

我有一个包含大量数字（137mb 文本文件）的文本文件，我希望使用 groovy 打开文本文件，逐行读取，修改数字，然后将它们放入数据库（如字符串）。每行将有 2 个项目需要写入单独的数据库列，这些列是相关的。

我的文本文件如下所示：

```
A.12345
A.14553
A.26343
B.23524
C.43633
C.23525 
```

所以流程是：

```
Step 1.The file is opened

Step 2.Line 1 is red

Step 3.Line 1 is split into letter/number pair [:]

Step 4.The number is divided by 10

Step 5.Letter is written to letter data base (as string)

Step 6.Number is written to number database (as string)

Step 7.Letter:number pair is also written to a separate comma separated text file.

Step 8.Proceed to next line (line 2) 
```

输出文本文件应如下所示：

```
A,1234.5
A,1455.3
A,2634.3
B,2352.4
C,4363.3
C,2352.5 
```

数字数据库应如下所示：

```
1:1234.5
2:1455.3
3:2634.3
4:2352.4
5:4363.3
6:2352.5 
```

*前导编号是数据库索引位置，用于关系目的

字母数据库应如下所示：

```
1:A
2:A
3:A
4:B
5:C
6:C 
```

*前导编号是数据库索引位置，用于关系目的

我已经能够完成大部分工作；我遇到的问题是无法正确使用 .eachLine( line -> ) 函数......并且不知道如何将值输出到数据库。

还有一件事我非常关注，那就是脚本遇到错误的实例。文本文件有大量条目（大约 9000000）所以我想知道是否有办法做到这一点，所以如果脚本失败或发生任何事情，我可以从最后修改的行重新启动脚本。

意思是，脚本有一个错误（我的计算机以某种方式关闭）并在文本文件的第 125122 行（完成对第 125122 行的修改）处停止运行......我该如何做到这一点当我第二次启动脚本时运行第 125123 行的脚本。

到目前为止，这是我的示例代码：

```
//openfile
myFile = new File("C:\\file.txt")
//set fileline to target
printFileLine = { it }
//set target to argument
numArg = myFile.eachLine( printFileLine )
//set argument to array split at "."
numArray = numArg.split(".")
//set int array for numbers after the first char, which is a letter
def intArray = numArray[2] { it as int } as int
//set string array for numbers after the first char, which is a letter
def letArray = numArray[1] { it as string }

//No clue how to write to a database or file... or do the persistence thing. 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:34:30.663

我会使用一个循环来循环遍历文本文件中的每一行，我还会使用 Java 方法来操作字符串。

```
def file = new File('C:\\file.txt')

StringBuilder sb = new StringBuilder();

file.eachLine { line ->

    //set StringBuilder to new line
    sb.setLength(0);
    sb.append(line);

    //format string
    sb.setCharAt(1, ',');
    sb.insert(5, '.');
} 
```

然后，您可以将每一行写入一个新的文本文件，例如[此处](http://www.groovyexamples.org/2010/05/17/write-text-to-a-file/)。您可以使用一个简单的计数器（例如`counter = 0;`then `counter++;`）来存储已读/写的最新行，并在发生错误时使用它。如果您也经常遇到崩溃，您可以在 try/catch 语句中捕获可能的错误。

本[指南](http://groovy.codehaus.org/Tutorial+6+-+Groovy+SQL)应该为您提供使用数据库（假设是 SQL）的良好开端。

警告，所有这些代码都未经测试，希望能给你更多的指导。可能有许多其他方法可以以不同的方式解决这个问题，所以请保持开放的心态。

# ios - 如何在界面生成器的 UITableView 中创建隐藏单元格

> ID：11598309
> 
> 赞同：0
> 
> 时间：2012-07-22T06:54:44.833
> 
> 标签：ios, xcode, uitableview, interface-builder

我想创建一个类似于流行的“拉动刷新”模式（http://stackoverflow.com/questions/9076905/uitableview-hide-first-cell）中使用的“隐藏自定义单元格”效果。我没有创建一个拉动刷新界面，但我想在顶部有一个特殊的单元格。

我可以使用许多下拉刷新示例来解决此问题，但它们都在代码中创建了隐藏视图。我想在界面生成器中创建它。

我怎样才能做到这一点？如果可能的话，我想使用故事板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:25:58.153

这个概念很简单。这个想法是为您的表格视图设置一个负边缘插图。所以假设你的第一个单元格的高度是 44 像素：

```
[self.tableView setContentInset:UIEdgeInsetsMake(-44.0, 0, 0, 0)]; 
```

以下代码将导致表格开始显示内容向下 44 像素，这将创建隐藏单元格效果。

您可以使用界面生成器实现相同的目的。它位于“滚动视图大小”下的大小检查器中。您必须将“Top”属性的 Content Inset 设置为负数。

希望这可以帮助

# layout - 如何将 QWidgets 组织成马赛克？

> ID：11598313
> 
> 赞同：1
> 
> 时间：2012-07-22T06:55:11.140
> 
> 标签：layout, qt4, pyqt4

我想创建一个带有大量方形 QPushButtons 的 Qwidget。我希望将这些按钮组织成马赛克布局。每当调整窗口大小时，都应调整马赛克小部件的大小并相应地重新排序按钮以填充宽度。不适合该区域的按钮可以通过垂直滚动小部件来查看。

是否有 Qt4 布局可以让我轻松做到这一点？实现这一目标的最佳/最简单方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:03:56.767

您可以在[resizable中使用](http://qt-project.org/doc/qt-4.8/qscrollarea.html#widgetResizable-prop)[流布局（来自 Qt 示例）](http://qt-project.org/doc/qt-4.8/layouts-flowlayout.html)。 `QScrollArea`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:07:05.197

在 a 中使用[`QGridLayout`](http://qt-project.org/doc/qt-4.8/QGridLayout.html)a `QScrollArea`。

# c# - 在 C# Winform 中获取货币汇率

> ID：11598318
> 
> 赞同：3
> 
> 时间：2012-07-22T06:56:34.347
> 
> 标签：c#, winforms

我的书中有一个听起来很简单的 winform 任务。使用windows窗体。在文本框中获取最新的货币汇率。

```
1 USD = ??? INR 
```

我认为显示转换货币的最佳解决方案是使用带有查询字符串的 Process 方法......

```
http://www.xe.com/ucc/convert.cgi?Amount=" + costTextBox.Text.ToString() + "&From=USD&To=INR" 
```

但是如何获取并将值分离到文本框中呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T07:28:48.497

我建议不要从 xe.com 的响应中删除价值，而是从这里购买他们的服务[或](http://webservicex.com/ws/WSDetails.aspx?CATID=2&WSID=10)[使用](http://www.xe.com/dfs/product.php)这个免费的网络服务

1.  将 wsdl 添加为服务引用。
2.  创建肥皂客户端
3.  调用 ConversionRate 方法。

```
 var result = client.ConversionRate(CurrencyConverterService.Currency.USD,
                                   CurrencyConverterService.Currency.INR);
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T07:37:34.920

看看[Google Finance API](https://developers.google.com/finance/docs/2.0/reference)，看看下面的函数：

```
public static decimal Convert(decimal amount, string from, string to)
        {
            WebClient web = new WebClient();

            string url = string.Format("http://www.google.com/ig/calculator?hl=en&q={0}{1}=?{2}", amount, from.ToUpper(), to.ToUpper());

            string response = web.DownloadString(url);

            Regex regex = new Regex("rhs: \\\"(\\d*.\\d*)");
            Match match = regex.Match(response);

            return System.Convert.ToDecimal(match.Groups[1].Value);
        } 
```

然后您可以通过这种方式使用该功能：

```
decimal converted = Convert(3.25, "USD", "EUR"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T07:41:17.337

您可以使用[Yahoo 货币转换器](http://finance.yahoo.com/currency-converter/)执行此操作：

此方法将为您提供当前费率：

```
 decimal getCurrencyRate(string currFrom, string currTo)
    {
        decimal result;
        using (WebClient c = new WebClient())
        {
            string data = c.DownloadString(string.Format("http://download.finance.yahoo.com/d/quotes.csv?s={0}{1}=X&f=sl1d1t1ba&e=.csv", currFrom, currTo));
            string rate = data.Split(',')[1];
            var style = NumberStyles.Number;
            var culture = CultureInfo.CreateSpecificCulture("en-US");
            decimal.TryParse(rate, style, culture, out result);
        }
        return result;
    } 
```

你用这种方式：

```
 //convert $50 to INR
        decimal val = 50.0M;
        //get rate
        decimal rate = getCurrencyRate("USD", "INR");
        //calculate value in INR
        decimal inrVal = val * rate; 
```

# asp.net-mvc - ASP.NET 与 Firebird 数据库问题

> ID：11598324
> 
> 赞同：-1
> 
> 时间：2012-07-22T06:57:28.153
> 
> 标签：asp.net-mvc, entity-framework, firebird, edmx

你有没有试过用 Firebird 数据库创建一个 ASP.NET MVC 项目……我试过了，很难……

我的问题：

*   我有适用于 Visual Studio 2010 的 Firebird 提供程序。
*   我有正确的数据库，其中包含增加表 ID 所需的一切。
*   我创建了 ASP.NET MVC 3 项目，其中包含数据库，如 EDMX 文件，以及实体。
*   当我尝试将记录插入表中时，会出现以下问题：

> FirebirdSql.Data.Common.IscException：违反表“USERS”上的 PRIMARY 或 UNIQUE KEY 约束“PK_USERS”

这意味着创建的记录的 id 不会增加。我有必须生成新 id 的存储过程。

我的问题是：
如何从 ASP.NET 在 Firebird 数据表中插入记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T07:58:19.490

在 Firebird 中，如果您想要具有类似自动增量的行为，则需要将触发器与序列（生成器）结合使用。否则，您需要确保自己分配一个唯一的 ID。

要创建序列：

```
CREATE SEQUENCE mytable_id_sq; 
```

创建用于分配唯一 i 的触发器（在名为 mytable 的表上）

```
set term !! ;
CREATE TRIGGER T1_BI FOR mytable
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
if (NEW.ID is NULL) then NEW.ID = NEXT VALUE FOR mytable_id_sq;
END!!
set term ; !! 
```

`INSERT`如果语句中没有分配 ID，则此触发器只会分配生成的值。

另请参阅：Firebird 2.5 语言参考中的[`SEQUENCE`( `GENERATOR`)部分和](https://www.firebirdsql.org/file/documentation/html/en/refdocs/fblangref25/firebird-25-language-reference.html#fblangref25-ddl-sequence)[如何创建自动增量列？](http://www.firebirdfaq.org/faq29/)（此链接讨论生成器，即 Firebird 中序列的旧名称）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T10:40:28.437

您的 EDMX 可能没有正确生成。您必须`StoreGeneratedPattern`手动设置或使用[http://blog.cincura.net/230841-generated-primary-key-in-entity-framework-model-from-firebird/](http://blog.cincura.net/230841-generated-primary-key-in-entity-framework-model-from-firebird/)。

# macos - 程序员将在 Macbook Pro Retina 中获得什么分辨率

> ID：11598326
> 
> 赞同：8
> 
> 时间：2012-07-22T06:58:04.987
> 
> 标签：macos, retina-display, screen-resolution, dpi

注意：这个问题可能不适合 SO，但我想在这里问，因为我想听听 Mac OS X 开发人员的意见。

Macbook Pro Retina (MPB Retina) 具有原生 2880x1800 分辨率。然而，这种原生分辨率并没有直接暴露。相反，提供了 1440x900 和 1920x1200 等分辨率，如下图所示。

![来自 Anandtech](../Images/7eeed9acba836c04900b31658abfeb83.png)

我想知道**程序员会看到什么分辨率**。是2880x1800吗？或者，降低分辨率？

我对 Mac OS X 如何处理这种超显示特别感兴趣。可能有两种方法： (1) Mac OS X 设置 2880x1800 分辨率，然后调整所有程序的 DPI 缩放比例；(2) 只需在原始 DPI 设置下设置较低的分辨率。（简单的）

因为我没有为 Mac OS X 编写应用程序的经验，所以我很想看看 Mac OS X 是如何处理这个分辨率的，以及对程序员适应视网膜显示有什么影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T07:20:10.413

据我所知，在 1680x1050 和 1920x1200 中，Mac OS 实际上将虚拟分辨率设置为两倍（分别为 3360x2100 或 3840x2400），然后缩小到物理分辨率 2880x1800。这允许生成的图像非常清晰（尽管有性能损失）。程序员看到的分辨率取决于应用程序是否支持 Retina。Mac OS 从不更改应用程序的 DPI。

Apple 提供了有关该主题的广泛指南。你可以在这里找到它：http: [//developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Introduction/Introduction.html](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Introduction/Introduction.html)

# c# - ASP.NET 4.0 的 URL 路由找不到资源错误

> ID：11598328
> 
> 赞同：1
> 
> 时间：2012-07-22T06:58:10.313
> 
> 标签：c#, url-routing, asp.net-webpages

我正在尝试实现简单的页面路由，由于某种原因它不起作用。我已经交叉检查了几乎所有内容，但似乎仍然没有任何效果。

我在页面上列出所有活动`Activities.aspx`并显示活动活动的详细信息`Activity-Details.aspx`。

`Activities.aspx`URL路由实施后页面 上的链接就像`http://localhost:49442/website/en/activity/en-US/44/31/event-title-will-go-here`

当我单击链接时，它总是向我显示错误消息

```
The resource cannot be found.
Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly.

Requested URL: /website/en/activity/en-US/44/31/event-title-will-go-here 
```

我正在一个多语言网站上工作，在该网站上，我将特定语言的特定文件保存在特定文件夹下的英语和阿拉伯语下的**ar**和文件夹结构下**，例如**

```
/ 
/en
/en/Activities.aspx
/en/Activity-Details.aspx
...
/ar
/ar/Activities.aspx
/ar/Activity-Details.aspx
...
/images
/css 
```

我有为其他项目工作的 URL 路由，但在这个项目中我遗漏了一些东西。

Global.asax 文件的代码

```
void Application_Start(object sender, EventArgs e)
{
    // Code that runs on application startup
    RegisterRoutes(RouteTable.Routes);
}

public static void RegisterRoutes(RouteCollection routes)
{
    routes.Ignore("{resource}.exe/{*pathInfo}");

    routes.MapPageRoute("ActivityRoute", "activity/{Language}/{EventID}/{PageID}/{EventTitle}", "~/en/Activity-Details.aspx", false,
                new RouteValueDictionary {
                    { "Language", "en-US"},
                    { "EventID", "0" },
                    { "PageID", "0"},
                    { "EventTitle", "event-not-found" }},
                new RouteValueDictionary {   
                    {"Language", "[a-z]{2}-[a-z]{2}"},
                    { "EventID", "[0-9]{1,8}" },
                    { "PageID", "[0-9]{1,8}" }
                });
} 
```

**WEB.Config** 我是否需要对 web.config 文件进行任何更改才能使 url 路由正常工作。我在 web.config 中有以下条目。我删除了它，但它仍然无法正常工作..

```
 <system.web>
    <httpModules>
      <add name="RoutingModule" type="System.Web.Routing.UrlRoutingModule"/>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>
  </system.web> 
```

我也包括`using System.Web.Routing`在`Activity-Details.aspx`页面上。但我不知道为什么我不断收到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:24:06.213

安装并启用[Route Debugger](http://nuget.org/packages/routedebugger)。它会告诉你每条路线被（不）击中的原因和原因。

顺便说一句，您没有在您的路线中映射您的这部分网址：website/en/

# java - 向 Java 类添加编程注释

> ID：11598333
> 
> 赞同：7
> 
> 时间：2012-07-22T06:59:29.213
> 
> 标签：java, compiler-construction, annotations, bytecode-manipulation

用法示例：
我想在类字段上添加一个自定义注释@MyContainer，然后在所有此类字段上自动添加相关的 Hibernate 注释（取决于字段类型和属性）。
另外，我需要向类添加 JAXB XmlType 注释，并将类型名称基于类名。
我还想根据他们的类型等向字段添加注释。所有添加的注释都应该在运行时可用（所以 hibernate / JAXB 可以找到它们）。
我知道以下选项：

1.  预处理类源（坏选项）
2.  在编译期间使用 javax.annotation.processing API 进行处理
3.  使用 Java Assist 等工具进行编译后操作
4.  使用 java.lang.instrument API 在类加载期间进行操作
5.  用 AspectJ 做（不够强大）

我的主要目标是：

1.  在类和源之间保持同步以进行调试
2.  支持从 Maven 和 IDE (Eclipse / Intellij) 工作

如果已经做过此类事情的人可以推荐此类任务的最佳方法（也许还有潜在的陷阱），我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-08T22:19:43.230

这是定义自定义注释的代码示例。此@TesterInfo 应用于类级别，存储测试人员详细信息。这显示了返回类型的不同用途——枚举、数组和字符串。

```
package com.mkyong.test.core;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE) //on class level
public @interface TesterInfo {

    public enum Priority {
       LOW, MEDIUM, HIGH
    }

    Priority priority() default Priority.MEDIUM;

    String[] tags() default "";

    String createdBy() default "Mkyong";

    String lastModified() default "03/01/2014";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:19:49.280

为了让它在 IDE、命令行构建和运行时最透明地工作，选项 1（使用 APT）和选项 5（使用 AspectJ）将为您提供最合适的选择。

对于选项 1，您必须实现自己的注释处理器，该处理器将根据您自己的 @MyContainer 注释的存在注入额外的注释。这是用于[类似事物](http://code.google.com/p/javadude/wiki/Annotations)的这种方法的示例。

对于选项 5，您可以简单地使用[注释声明](http://www.eclipse.org/aspectj/doc/released/adk15notebook/annotations-declare.html)。像这样的东西：

```
declare @field : * ((@*..MyContainer *)).*(..) : @OtherAnnotation(); 
```

Spring 的 Roo 工具广泛使用选项 5，我当然不能说它不够强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T20:13:06.650

我认为预处理类源应该是您的首选方式。这使您能够使您的源代码与编译的类同步，这对于您提到的调试很有好处。但它也有利于版本控制，因为您可以签入那些生成的注释。如果在编译期间运行它，那么在您的工具中跟踪问题也会变得更加困难。在 generate-sources 阶段运行代码生成时，IDE 支持也应该没有问题。

[编辑：快速搜索产生了一些关于使用 eclipse jdt](http://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html)或[netbeans 中的某些东西进行](http://wiki.netbeans.org/JavaHT_Modification)编程 java 源代码修改的信息 。但这可能值得进行更多研究或本身的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T07:11:53.367

我想就此提出另一种方法。由于我的[第一个答案](https://stackoverflow.com/a/11603640/1466267)可能涉及编写自己的工具，您也可以尝试一个更简单的解决方案。正如我希望您对您的类进行单元测试一样，您可以为此类的每个单元测试实现一个基类。在这个基类中有一个测试方法，它检查每个带有注释的字段是否`@MyContainer`也具有所需的休眠注释。

我们基本上做了同样的事情，不是为了注释，而是为了字段的可序列化，并且用这种方法运行得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T09:27:47.400

上面提到的选择很少，每个都有其优点和缺点。这就是为什么我认为上述问题没有真正的“正确”答案。我的目的是从社区和过去做过此类事情并有经验的人那里获得意见。我个人选择将[Instrument API](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/package-summary.html)与 Javassist 一起使用。通过这种方式，类在运行时得到扩展（尽管相同的工具可用于编译后处理）。好处是可以从 JVM 内部加载代理，从而避免处理所有命令行。很高兴听到其他选择。
谢谢，
阿夫纳

# acl - Parse.com 无效的 acl 密钥 *未解决

> ID：11598336
> 
> 赞同：1
> 
> 时间：2012-07-22T07:00:21.793
> 
> 标签：acl, parse-platform

我在我的 android 应用程序中使用 Parse.com。当我检索数据时它是好的，但是当我尝试向数据库添加一些东西时它显示一个错误：无效的 acl 键。更新数据库时必须添加的内容

# algorithm - 如何一次通过 K 个设备随机选择 N 个唯一的前导码而不重复

> ID：11598337
> 
> 赞同：0
> 
> 时间：2012-07-22T07:00:59.607
> 
> 标签：algorithm, matlab

我有一些问题要在malab中实施。我有 N（前导数）可供 K（设备数）选择。如何通过 K 个设备随机选择 N 个，所以一个前导码可能被多个设备选择？例如，有 10 个唯一的前导码（N=10）由 50 个设备（K=50）随机选择，一次没有重复，每个 K 设备只能从 10 个唯一的前导码中随机选择一个。我想从这 10 个独特的前导码中知道，只有一个设备只选择了多少个以及哪些前导码？多个设备选择了多少个前导以及哪些前导？如何在matlab中实现这个场景？我真的需要你尽快回复。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:52:16.910

试试这个：

```
r = randperm(N*K); % generate a random permutation of the integers from 1 through N*K
r = mod(r(1:N:(K-1)*N+1), N); % the random selection results
[uniques,numUnique] = count_unique(r); % the selected preambles (uniques), and how many times they were selected (numUnique) 
```

该`count_unique`功能可以在[这里找到](http://www.mathworks.com/matlabcentral/fileexchange/23333-determine-and-count-unique-values-of-an-array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:10:33.993

假设您的序言（无论您的应用程序中的什么）都在这里：

```
preambles = [12 13 14];
K = 6; 
```

然后在 中生成一个随机索引向量`preambles`，如下所示：

```
random_indices = 1 + floor(rand(1, K) * length(preambles)); 
```

然后您可以将其插入`preambles`变量：

```
preambles(random_indices) 
```

# android - 在 Android 中实现旋转补间动画的问题

> ID：11598339
> 
> 赞同：0
> 
> 时间：2012-07-22T07:01:11.270
> 
> 标签：android, android-animation

以下是我的动画 rotate_center.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@anim/linear_interpolator"
    android:fromDegrees="0"
    android:toDegrees="350"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="infinite"
    android:duration="2000" /> 
```

我在我的 .class 中尝试做的事情

```
tweenAnimation = (ImageView) findViewById(R.id.imgTweenAnimation);

Animation animationRotateCenter= AnimationUtils.loadAnimation(this, R.anim.rotate_center);

tweenAnimation.startAnimation(animationRotateCenter);

while(count < animationRotateCenter.getDuration())
{
    count++;

    if(count == 4000)
    {
        Log.i(getPackageName(), getLocationClassName() + ": " + count);
        break;
    }
}

//Move to next Intent 
```

问题是，我执行得很好，但没有显示动画。逻辑在后台运行良好，直到它被执行，然后它会中断并直接移动到下一个活动。在这件事发生期间，它只会冻结屏幕。实现补间动画的任何其他选项将在固定的时间内执行，然后在动画完成后执行一些其他任务。我选择这种技术而不是逐帧动画，因为逐帧动画需要单独的 .png 或 .9.png 为它们中的每一个，因此增加了我想避免的 .apk 文件大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:11:34.403

1，你检查animationRotateCenter.getDuration()的值了吗？2、我认为你不应该使用android:repeatCount="infinite"。希望对你有所帮助。

# php - 当变量存储实际值时，PHP将NULL插入MySQL数据库

> ID：11598341
> 
> 赞同：0
> 
> 时间：2012-07-22T07:01:16.740
> 
> 标签：php, mysql, null

我使用下面的代码将表单中的值插入 MySQL 数据库，但是在代码执行后 MySQL 表显示 NULL，NULL 而不是实际值。

我检查了是否从 GET 函数中正确获取了值，并且没有问题

```
<?php
    $vac_name=$_GET['vac_name'];
    $vac_comment=$_GET['vac_comment'];
    echo $vac_name;
    echo $vac_comment;
    $con=mysql_connect("localhost","root","");  
    if($con==true){
        echo "Connected to the database";
     if(isset($_GET['vac_name'], $_GET['vac_comment'])){

        mysql_select_db("attendance_db",$con);
        $query = "insert into vacationtype values(LAST_INSERT_ID(),vac_name,vac_comment)";
        $result=mysql_query($query,$con);
        //$row=mysql_num_rows($result);
    //  if($row>0){
        if($result==true){  
            echo "Successfully saved your message <br> We shall be in contact with you shortly";
        }else{
            echo mysql_error();
            echo "Sorry the message was not saved <br> Please try again. Thank You";
        }   }
        mysql_close($con);
    }else{
        echo "Cannot connect to the database";
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:04:29.107

像这样使用您的查询

```
insert into vacationtype values('LAST_INSERT_ID()','vac_name','vac_comment') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:06:51.230

你的意思是`$query="insert into vacationtype values(LAST_INSERT_ID(),'". $_GET['vac_name'] ."','". $_GET['vac_comment'] ."')"`？您必须插入 $_GET 的内容。

# android - 来自www资产的Phonegap设置壁纸？安卓

> ID：11598359
> 
> 赞同：1
> 
> 时间：2012-07-22T07:04:38.210
> 
> 标签：android, cordova, wallpaper

我正在为 Android 构建一个 phonegap 应用程序，需要一种方法来使用 javascript 从应用程序 www 目录中包含的 .jpg 设置壁纸。我将如何构建一个可以与我的 phonegap 应用程序 www 文件夹中的资源一起使用的 phonegap 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:55:12.330

只需从资产文件夹中读取文件。带插件

```
 import java.io.IOException;

    import org.apache.cordova.api.Plugin;
    import org.apache.cordova.api.PluginResult;
    import org.apache.cordova.api.PluginResult.Status;
    import org.json.JSONArray;

    import android.app.WallpaperManager;
    import android.content.Context;

    public class testPlugin extends Plugin {
        public final String ACTION_SET_WALLPAPER = "setWallPaper";
        @Override
        public PluginResult execute(String action, JSONArray arg1, String callbackId) {
            PluginResult result = new PluginResult(Status.INVALID_ACTION);
            if (action.equals(ACTION_SET_WALLPAPER)) {
                WallpaperManager wallpaperManager = WallpaperManager.getInstance((Context) this.ctx);
                try {
                  InputStream bitmap=null;
                   bitmap=getAssets().open("www/img/" + arg1.getString(0));//reference to image folder
                    Bitmap bit=BitmapFactory.decodeStream(bitmap);
                    wallpaperManager.setBitmap(bit);
                    result = new PluginResult(Status.OK);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    result = new PluginResult(Status.ERROR, e.getMessage());
                }
            }
            return result;
        }
    } 
```

这是 javascript 文件 test.js

```
var TestPlugin = function () {};

TestPlugin.prototype.set = function (ms, successCallback, failureCallback) {  
//  navigator.notification.alert("OMG");
    return cordova.exec(successCallback, failureCallback, 'testPlugin', "setWallPaper", [ms]);
};

PhoneGap.addConstructor(function() {
    PhoneGap.addPlugin("test", new TestPlugin());
}) 
```

和带有 imagefilename 的主文件调用插件

```
window.plugins.test.set("imageFileName.jpg",
        function () { 
            navigator.notification.alert("Set Success");    
        },
        function (e) {
            navigator.notification.alert("Set Fail: " + e);
        }
    );

; 
```

具有安卓设备权限

```
<uses-permission android:name="android.permission.SET_WALLPAPER" /> 
```

和 plugin.xml

```
<plugin name="testPlugin" value="com.android.test.testPlugin"/> 
```

# image - 如何使用 tkinter/ttk 在 Python 3 中显示图像？

> ID：11598360
> 
> 赞同：5
> 
> 时间：2012-07-22T07:04:38.287
> 
> 标签：image, button, python-3.x, tkinter, ttk

问题的关键是，我在下面的代码片段中做错了什么？

```
 from tkinter import *
    from tkinter.ttk import *

    root = Tk()

    myButton = Button(root)
    myImage = PhotoImage(myButton, file='myPicture.gif')
    myButton.image = myImage
    myButton.configure(image=myImage)

    root.mainloop() 
```

我从 idle3 得到的错误信息如下：

```
 >>> 
    Traceback (most recent call last):
      File "/home/bob/Documents/Python/tkImageTest.py", line 9, in <module>
        myButton.configure(image=myImage)
      File "/usr/lib/python3.2/tkinter/__init__.py", line 1196, in configure
        return self._configure('configure', cnf, kw)
      File "/usr/lib/python3.2/tkinter/__init__.py", line 1187, in _configure
        self.tk.call(_flatten((self._w, cmd)) + self._options(cnf))
    TypeError: __str__ returned non-string (type Button)
    >>> 
```

这个错误信息让我很困惑，我根本不明白它想说什么。有任何想法吗？

我也将不胜感激有关更改的建议...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T18:17:34.137

该错误似乎指向`myButton`传递给`PhotoImage`. 正如您在评论中指出的那样，`PhotoImage`将小部件对象视为字符串（有几个字符串类型的选项；请参阅[此处](http://www.pythonware.com/library/tkinter/introduction/x6716-options.htm)的 PhotoImage 选项列表）。

如果您在不引用`myButton`对象的情况下实现该行，您的代码将起作用：

```
myImage = PhotoImage(file='myPicture.gif') 
```

我不确定您是否需要更改`PhotoImage`构造函数。查看`PhotoImage`文档以确定该类的有效选项（即资源名称）。引用帮助文件：

> 关于模块 tkinter 中的类 PhotoImage 的帮助：
> 
> 类照片图像（图像）
> 
> ```
> | Widget which can display colored images in GIF, PPM/PGM format.
> |    
> |  Method resolution order:  
> |      PhotoImage  
> |      Image  
> |      builtins.object  
> |    
> |  Methods defined here:
> |    
> |  __getitem__(self, key)  
> |      # XXX config  
> |    
> |  __init__(self, name=None, cnf={}, master=None, **kw)  
> |      Create an image with NAME.
> |
> |      Valid resource names: data, format, file, gamma, height, palette, 
> |      width. 
> ```

* * *

仅供参考：在命令行或 IDLE 中从 Python 获取文档的最简单方法：

```
from tkinter import PhotoImage
help(PhotoImage) 
```

最后，关于这个类的另一个有用的链接是[http://tkinter.unpythonic.net/wiki/PhotoImage](http://tkinter.unpythonic.net/wiki/PhotoImage)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-29T20:27:31.093

我用 32 位和 64 位的 python 2.7.9、3.2.5、3.3.5、3.4.3 测试了这个例子。(Win 8.1 64位)

该代码有效。

（在 python 3.4.3 64bit 中，我首先收到一条错误消息。

我已经完全卸载了 3.4.3，然后重新安装。

现在，该示例也适用于 3.4.3 64 位）

```
# basic code from >>
# http://tkinter.unpythonic.net/wiki/PhotoImage

# extra code -------------------------------------------------------------------------
from __future__ import print_function

try:
    import tkinter as tk
except:
    import Tkinter as tk

import sys
import platform

print ()
print ('python    ', sys.version)
print ('tkinter   ', tk.TkVersion)
print ()
print (platform.platform(),' ',platform.machine())
print ()

# basic code -------------------------------------------------------------------------

root = tk.Tk()

def create_button_with_scoped_image():
    # "w6.gif" >>
    # http://www.inf-schule.de/content/software/gui/entwicklung_tkinter/bilder/w6.gif
    img = tk.PhotoImage(file="w6.gif")  # reference PhotoImage in local variable
    button = tk.Button(root, image=img)
    # button.img = img  # store a reference to the image as an attribute of the widget
    button.image = img  # store a reference to the image as an attribute of the widget
    button.grid()

create_button_with_scoped_image()

tk.mainloop() 
```

# c - 为什么指针+1实际上加4

> ID：11598361
> 
> 赞同：33
> 
> 时间：2012-07-22T07:04:43.630
> 
> 标签：c, pointers

```
#include<stdio.h>
int main(void){
  int *ptr,a,b;
  a = ptr;
  b = ptr + 1;
  printf("the vale of a,b is %x and %x respectively",a,b);

  int c,d;
  c = 0xff;
  d = c + 1;
  printf("the value of c d are %x and %x respectively",c,d);
  return 0;
} 
```

输出值为

```
the vale of a,b is 57550c90 and 57550c94 respectively
the value of c d are ff and 100 respectively% 
```

事实证明 ptr + 1 实际上，为什么它会这样？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-22T07:06:16.430

因为指针被设计为与数组兼容：

```
*(pointer + offset) 
```

相当于

```
pointer[offset] 
```

因此，指针算法在字节方面不起作用，而是在`sizeof(pointer base type)`-bytes 大小的块方面起作用。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-22T07:10:32.730

考虑一下指针是什么……它是一个内存地址。内存中的每个字节都有一个地址。所以，如果你有一个`int`4 字节的地址，它的地址是 1000，那么 1001 实际上是它的第二个字节，`int`而 1002 是第三个字节，而 1003 是第四个。由于 an 的大小`int`可能因编译器而异，因此当您增加指针时，您不能获得`int`. 因此，根据您的数据类型确定要跳过多少字节的工作已为您处理，您可以使用您获得的任何值而不必担心。

正如 Basile Starynkvitch 指出的那样，这个数量将根据`sizeof`指向的数据成员的属性而有所不同。很容易忘记，即使地址是连续的，对象的指针也需要考虑容纳这些对象所需的实际内存空间。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-22T07:08:20.683

指针算术是一门棘手的学科。指针添加意味着传递到下一个指向的元素。所以地址由`sizeof` 指向的元素递增。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-09T21:55:12.730

**简短的回答**

指针的地址将增加指向类型的`sizeof(T)`位置`T`。所以对于`int`，指针将增加`sizeof(int)`。

**为什么？**

首先，标准要求它。`std::vector`这种行为有用的原因（除了与 C 的兼容性）是因为当您有一个使用连续内存的数据结构时，例如数组或. 如果要移动到容器中的第 n 个项目，只需添加 n。

能够编写`firstAddress + 2`要比. `firstAddress + (sizeof(T) * 2)`_`sizeof(int)``firstAddress + (4 * 2)`

实际上，当您说 时`myArray[4]`，您就是在说`myArray + 4`。这就是数组索引从 0 开始的原因；您只需添加 0 即可获得第一个元素（即 myArray 指向数组的第一个元素），添加 n 即可获得第 n 个元素。

**如果我想一次移动一个字节怎么办？**

`sizeof(char)`保证大小为一个字节，因此`char*`如果您真的想一次移动一个字节，可以使用 a 。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-22T07:07:07.163

指针用于指向一个特定字节的内存标记，该字节标记了一个对象已分配的位置（从技术上讲，它可以指向任何地方，但这就是它的使用方式）。当您进行指针运算时，它会根据指向的对象的大小进行操作。在您的情况下，它是一个指向整数的指针，每个整数的大小为 4 个字节。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-22T12:23:08.047

让我们考虑一个指针`p`。表达式`p+n`就像 `(unsigned char *)p + n * sizeof *p`（因为`sizeof(unsigned char) == 1`）。试试这个 ：

```
#include <stdio.h>
#define N   3

int
main(void)
{
    int i;
    int *p = &i;
    printf("%p\n", (void *)p);
    printf("%p\n", (void *)(p + N));
    printf("%p\n", (void *)((unsigned char *)p + N * sizeof *p));
    return 0;
} 
```

# wpf - 如何将 WPF DataGridRow 事件与 Interaction.Triggers / MVVM EventToCommand 一起使用

> ID：11598362
> 
> 赞同：1
> 
> 时间：2012-07-22T07:04:43.147
> 
> 标签：wpf, mvvm-light, wpfdatagrid, eventtocommand

MVVMLight`EventToCommand`可以很容易地用于在您的视图模型上触发`ICommand`。

```
<DataGrid>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectionChanged">
            <GalaSoft_MvvmLight_Command:EventToCommand
                Command="{Binding ProductSelectionChangedCommand, Mode=OneWay}    "
                CommandParameter="{Binding SelectedItems, ElementName=gridProducts}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</DataGrid> 
```

在这种情况下，`SelectionChanged`事件属于[`DataGrid`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid_events)，并且`Interaction.Triggers`xaml 直接嵌套在 内部`DataGrid`。

当事件是 a （每行`DataGridRow`都有自己的[事件](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridrow_events)）时，我无法弄清楚如何做同样的事情。

我设法做到了这一点，但它涉及一个我想避免的处理函数：

```
<DataGrid>
    <DataGrid.ItemContainerStyle>
        <Style TargetType="DataGridRow">
            <EventSetter Event="DataGridRow.MouseEnter" 
                         Handler="Row_MouseEnter"/>
        </Style>
    </DataGrid.ItemContainerStyle>
</DataGrid> 
```

在`Row_MouseEnter`事件中（在我的 .xaml.cs 文件上）我只是在 ViewModel 上“找到命令”并以编程方式触发它。

我真的很想知道是否有办法直接用`Interaction.Triggers`

（仅供参考：我正在做的是我在网格上方有一个面板，它显示鼠标在单击之前所在行的详细信息 - 这会触发详细视图）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:47:35.953

是的，您可以通过创建自己的自定义`behaviour class`并在 xaml 文件中使用它来直接绑定到 ViewModel 中的命令。这些链接可能会让您入门 -[使用交互进行](https://stackoverflow.com/questions/1647815/how-to-add-a-blend-behavior-in-a-style-setter/4779168#4779168 "使用交互触发器绑定")绑定和[通过 MVVM中的交互进行绑定](https://stackoverflow.com/questions/5545187/wpf-how-to-bind-a-command-to-the-listboxitem-using-mvvm "通过交互绑定")

# php - PHP获取包含/需要当前文件的文件

> ID：11598363
> 
> 赞同：3
> 
> 时间：2012-07-22T07:04:53.763
> 
> 标签：php, include, require

> **可能重复：**
> [PHP - 检索包含或需要它的脚本的名称](https://stackoverflow.com/questions/3278757/php-retrieve-name-of-script-that-included-or-required-it)

有没有办法`PHP`获取`required/included`当前文件的哪个文件？例如：

### 控制器.php

```
<?php
  include("add-person.php");
?> 
```

### 添加人.php

```
<?php
  echo get_parent(); //should return controller.php
?> 
```

### 执行

```
php -f controller.php 
```

基本上，类似于虚构的功能`get_parent()`。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T07:08:05.193

我知道一种“不那么干净”的方式。尝试通过数组`debug_backtrace()`给你。除其他外，它包含一个层次结构，代码如何通过包含文件进行处理。手册[在这里](http://www.php.net/manual/en/function.debug-backtrace.php)。

# perl - 关于打印列存在哪些不同宽度的代码点，假设“a”具有打印列“1”的宽度？

> ID：11598364
> 
> 赞同：1
> 
> 时间：2012-07-22T07:05:11.650
> 
> 标签：perl, unicode, printing, column-width

`a`假设( `\N{LATIN SMALL LETTER A}`) 具有打印列的宽度，确实存在哪些关于打印列的不同宽度的代码点`1`？

编辑：

“打印列宽”是指输出到终端

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T07:57:51.630

在 Unicode 中，字符可以是非间距（0 列）、窄（1 列）或宽（2 列）。`columns`您可以使用from[`GCString`](http://search.cpan.org/~nezumi/Unicode-LineBreak-2012.06/lib/Unicode/GCString.pod)或`mbswidth`from方法获取字符串将占用的列数[`Text::CharWidth`](http://search.cpan.org/~kubota/Text-CharWidth-0.04/CharWidth.pm)。

当然，这只适用于等宽输出，例如：输出到终端。

# android - android帮助活动页面

> ID：11598365
> 
> 赞同：0
> 
> 时间：2012-07-22T07:05:22.633
> 
> 标签：android

我想为我的应用程序建立一个帮助页面，所以很明显它是文本的。除了将这些文本放在我的 string.xml 或我的布局 xml 中之外，我还有其他方法可以做到吗？我如何在其中包含段落？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:11:31.293

1.  将您的文本字符串放入`strings.xml`.

2.  在布局的 XML 中引用它们。

3.  用于`\n\n`标记新段落的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:08:05.600

您应该按照建议将帮助文本放入`strings.xml`文件并使用`\n\n`换行符，`@alex`因为将来如果您想要不同语言的帮助文本，那么您可以通过添加不同的`strings.xml`文件来轻松做到这一点以进行不同的[本地化](http://developer.android.com/guide/topics/resources/localization.html)

但是，如果您仍然不想将帮助文本放入 strings.xml 中，那么您可以使用

```
static final String helpText = "help text"; 
```

并将帮助文本设置为`textView`.

# c# - Visual C#：如何向使用代码创建的表单添加控件？

> ID：11598370
> 
> 赞同：0
> 
> 时间：2012-07-22T07:06:43.460
> 
> 标签：c#

我是 Visual C# 的新手，我目前正纠结于如何创建一个新表单（使用代码，而不是设计）并向这个新表单添加东西（即标签和文本框）。这是我现在拥有的：

```
namespace AccountInfo
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            profileForm profile = new profileForm();  // Make new form
            profile.Name = "newProfile";
            profile.Text = "Add a new profile";
            profile.LabelText = "test";
            profile.Show();             // Display form
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
    }

    public class profileForm : Form
    {
        // Controls
        Label label1 = new Label();

        public profileForm()
        {

        }

        public string LabelText
        {
            set { label1.Text = value; }
        }

        private void profileForm_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

当我运行此代码时，我得到默认表单并单击 button1。它带来了一种新的形式，但上面什么都没有。我希望出现一个标签，但它不会。我已经尝试了多种不同的方法（这是我最近的方法），但我什么也找不到。我环顾了 StackOverflow 并提出了另一个主题，但它的解决方案对我不起作用。我会很感激对此的任何见解:) 非常感谢！

编辑：我也尝试过使用构造函数来代替。它没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T07:09:47.800

您正在内存中创建一个 Label 对象，但您没有将其分配给特定的父控件，或设置它的位置等……谷歌“动态创建控件 C#”，您会发现大量[示例](http://msdn.microsoft.com/en-us/library/aa984255%28v=vs.71%29.aspx)。

您基本上需要从 profileForm 中的某处调用以下两行。

```
 label1.Location = new Point(25,25);

   this.Controls.Add(label1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T07:19:55.857

按照 Dylan 的建议，您需要在 load 事件中将 Label 对象添加到 profileForm 中，如下所示：

```
this.Controls.Add(label1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T07:16:51.193

很快，我正在观看一个回答这个问题的视频。它是如何使用流布局添加动态控件的完整指南。这是视频：[http ://windowsclient.net/learn/video.aspx?v=13245](http://windowsclient.net/learn/video.aspx?v=13245)

# java - 使用 DataInputStream 输入整数值

> ID：11598377
> 
> 赞同：0
> 
> 时间：2012-07-22T07:07:30.497
> 
> 标签：java, datainputstream

在使用 DataInputStream 输入任何值时，我必须按两次 Enter 键，如果我输入任何一位数字......并且在下面写的代码片段中

```
public void print()
   {
       DataInputStream in = new DataInputStream(System.in);
       try
       {
           System.out.println("Enter a digit");
           int n=in.readInt();
           System.out.println(n);
        }
        .
        .
        .
        . 
```

在打印 n 的值时，它通常会显示一些意想不到的值......使用 BufferedReader 不会导致同样的问题......

当输入的值为 233 时，它显示 842216202 作为输出...代码中可能出现的错误是什么...需要帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T07:15:17.527

`DataInputStream`读取二进制数据。当您输入`[2, 3, 3, \n]`时，它等于`[0x32, 0x33, 0x33, 0x0A]`（大端），`0x3233330A`即`842216202`（十进制格式）。

更改为 a `Scanner`，它读取文本并具有将字符转换为（例如）整数的说服方法，您的示例使用 a `Scanner`：

```
Scanner in = new Scanner(System.in);
try {
    System.out.println("Enter a digit");
    int n = in.nextInt();
    System.out.println(n);
} ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:15:39.863

根据[DataInputStream 的 Javadocs](http://docs.oracle.com/javase/6/docs/api/java/io/DataInput.html#readInt%28%29)，该`readInt()`方法将从底层输入流中准确读取四个字节。如果您输入的数字长度小于四个字节（例如一位数），则读取将继续，直到它读取四个字节。这意味着它将包括您在按下“enter”键时输入的换行符，其 Unicode 编码值将被解释为整数。这可能是您错误的根源。

# c - 将 2 个数组存储在数据结构中

> ID：11598378
> 
> 赞同：0
> 
> 时间：2012-07-22T07:07:31.607
> 
> 标签：c

我有 2 个语言代码进入流。我将它存储在一个 3 字节的 char 数组中（unsigned char a[3]）。我想将它与存储在指针（unsigned char *c）中的另一个值进行比较。数组 a[3] 存储在结构（struct s[2]）中以获取多个数据 - 这对我来说是否正确与数组有点混淆 - 不能使 const 指针指向另一个位置，因为它已经指向一个位置。但是将数组包含在结构中并使结构数组的第 zeorth 元素指向一个位置，并且结构数组的第一个元素是可能的。我的理解是否正确。

我想存储 2 个数组值。所以我声明了一个结构，其中我声明了 3 字节字符数组。这种做法是否正确。有没有其他方法可以做到这一点。

**编辑：**

```
 #include<stdio.h>
int main(){
 int i,flag=0,count=0;
 struct n{
  unsigned char b[3];
 };
 unsigned char *d=NULL; 
 struct s{
  unsigned char *a;
 };
 struct s m[2];
 struct n w[2];
// memcpy(w[0].b,"eng",sizeof("eng"));
// memcpy(w[1].b,"fre",sizeof("fre"));
strcpy(w[0].b,"eng");
strcpy(w[1].b,"fre");

 d = w[1].b; // current lang
 m[0].a = w[0].b; // storing the 2 lang in a pointer inside a structure
 m[1].a = w[1].b;
 i=0;
 printf("\nm[0].a:%s\n",m[0].a);
 printf("\nm[1].a:%s\n",m[1].a);
printf("\nw[0].b:%s\n",w[0].b);
 printf("\nw[1].b:%s\n",w[1].b);
 while((m[i].a) && d){ // And comparing
  if(m[i].a++ != d++){ 
   flag =1; //if strings are unequal break;
   break;
  }
 i++;
 }
  if(flag){
   printf("Not equal\n");
  }
  else{
   printf("\nEqual\n");
   flag =0;
  }
 return 0;
} 
```

o/p：

```
m[0].a:engfre

m[1].a:fre

w[0].b:engfre

w[1].b:fre
Not equal 
```

但是有一个错误，它显示不相等。这种将数组存储在结构内的指针中的方法是正确的方法吗？或者有没有其他方法可以做到这一点。

编辑：

我想比较这两个字符串。2个字符串相等，但我认为它不相等。指针是否需要存储在结构中以存储 2 个数组，或者是否有另一种方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T08:17:52.827

```
#include <stdio.h>
#include <string.h>
int main(){
  int i,flag=0,count=0;
  struct n{
    unsigned char b[4];
  };
  struct s{
    unsigned char *a;
  };
  unsigned char *d=NULL; 
  struct s m[2];
  struct n w[2];
  strcpy(w[0].b,"eng");
  strcpy(w[1].b,"fre");
  d = w[1].b; // current lang
  m[0].a = w[0].b; // storing the 2 lang in a pointer inside a structure
  m[1].a = w[1].b;
  for (i =0; i <= 1; i++) {
    printf("\nm[%d].a: %s d: %s\n", i, m[i].a, d);
    if (strcmp(m[i].a, d) != 0) {
      printf("Not equal\n");
    }
    else{
      printf("\nEqual\n");
    }
  }
  return 0;
} 
```

# .net - 在文本框中输入电子邮件 ID 时，它应该使用 MVC3 RAZOR 验证格式并显示刻度图像

> ID：11598379
> 
> 赞同：0
> 
> 时间：2012-07-22T07:07:39.953
> 
> 标签：.net, asp.net-mvc-3, email, razor

我想验证电子邮件 ID 格式是否正确

在 Razor 文本框中键入 Emailid 时，如果格式正确，则应显示刻度线

否则错误消息应显示在文本框下方。

请指导我..怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T07:58:13.100

您可以编写自定义验证属性：

```
public class EmailAttribute : ValidationAttribute, IClientValidatable
{
    private const string Pattern = @"^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$";
    private static readonly Regex _regex = new Regex(Pattern, RegexOptions.Compiled | RegexOptions.IgnoreCase);

    public override bool IsValid(object value)
    {
        if (value == null)
        {
            return true;
        }
        var input = value as string;
        return ((input != null) && (_regex.Match(input).Length > 0));
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        yield return new ModelClientValidationRegexRule(
            base.ErrorMessage,
            Pattern
        );
    }
} 
```

这将用于装饰您的视图模型属性：

```
public class MyViewModel
{
    [Email(ErrorMessage = "Please specify a valid email address")]
    public string Email { get; set; }
} 
```

然后假设你有一个控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel());
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return View(model);
    }
} 
```

和一个观点：

```
@model MyViewModel
@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(x => x.Email)
        @Html.EditorFor(x => x.Email)
        @Html.ValidationMessageFor(x => x.Email)
    </div>
    <button type="submit">OK</button>
} 
```

您可以编写一个简单的脚本来插入不显眼的验证框架并实现您正在寻找的东西。然后，您将创建一个单独的 javascript 文件 (email.js)，其中包含以下内容：

```
$(function () {
    var settings = $('form').data('validator').settings;
    settings.onkeyup = function (element) {
        $(element).nextAll('.tick').remove();
        if ($(element).valid()) {
            $(element).after('<span class="tick">&#10004;</span>');
        }
    };
}); 
```

最后一步当然是将 3 个脚本包含到您的页面中以启用客户端验证：

```
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/email.js")" type="text/javascript"></script> 
```

# cocoa - 使用 Carbon 和 Cocoa 制作 CMake

> ID：11598380
> 
> 赞同：1
> 
> 时间：2012-07-22T07:07:48.037
> 
> 标签：cocoa, cmake, macos-carbon

我目前正在尝试构建 MyGUI，CMake 告诉我缺少 Cocoa 和 Carbon

配置 MYGUI 3.2.0 寻找 FREETYPE... 找不到 PkgConfig（缺少：PKG_CONFIG_EXECUTABLE） CMAKE_PREFIX_PATH：~/Documents/SDK/OgreDependencies/;/Users/david/Documents/SDK/MyGUI_3.2.0/bin/Dependencies;/Users /david/Documents/SDK/MyGUI_3.2.0/Dependencies;/Users/david/Documents/SDK/MyGUI_3.2.0/bin/../Dependencies;/Users/david/Documents/SDK/MyGUI_3.2.0/../Dependencies ;/usr/local 找到 FREETYPE：/usr/X11R6/lib/libfreetype.dylib 找到 OpenGL：/System/Library/Frameworks/OpenGL.framework
正在寻找 OIS... 找不到 PkgConfig（缺少：PKG_CONFIG_EXECUTABLE）找到 OIS：/Users/david/Documents/SDK/OgreDependencies/lib/release/libOIS.a 找不到 Doxygen（缺少：DOXYGEN_EXECUTABLE）正在寻找 Carbon.. . 找不到 PkgConfig (missing: PKG_CONFIG_EXECUTABLE) 找不到 Carbon 寻找 Cocoa... 找不到 PkgConfig (missing: PKG_CONFIG_EXECUTABLE) 找不到 Cocoa 寻找 IOKit... 找不到 PkgConfig (missing: PKG_CONFIG_EXECUTABLE) 找不到在 CMake/Utils/MacroLogFeature.cmake:91 (MESSAGE) 找到 IOKit CMake 错误：

* * *

-- 您的系统上找不到以下必需的软件包。

-- 请在继续此软件安装之前安装它们。

-- 如果您在 Windows 中，请尝试传递 -DMYGUI_DEPENDENCIES_DIR=

-- 还要检查您是否使用需要的 RenderSystem 构建或使用 -DMYGUI_RENDERSYSTEM=<1 2 or 3 for Direct3D_9 OGRE or OpenGL> 设置另一个

* * *

*   碳：碳[http://www.apple.com](http://www.apple.com)

*   可可：可可[http://www.apple.com](http://www.apple.com)

* * *

调用堆栈（最近的调用优先）：CMake/Dependencies.cmake:108 (MACRO_DISPLAY_FEATURE_LOG) CMakeLists.txt:232（包括）

配置不完整，出现错误！

我应该将它们与 XCode 分开安装吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T12:27:08.703

首先，Cocoa 和 Carbon 是 OSX 的基础框架，除了 Xcode 不需要安装任何东西。

您真正的问题似乎是您的系统上缺少 pkg-config 。pkg-config 是一个开源程序，可以更轻松地找到其他软件包。我建议您使用[homebrew](https://brew.sh/)安装它。

安装自制软件后，您只需运行

```
brew install pkg-config 
```

之后，您可以重新运行 CMake 脚本，您可能应该有更多的运气。请记住在重新运行之前删除 CMakeCache.txt 文件。

# scorm - 主要目标和次要目标

> ID：11598384
> 
> 赞同：1
> 
> 时间：2012-07-22T07:08:36.283
> 
> 标签：scorm, scorm2004

假设一项活动有两个目标（主要目标和一个次要目标）。在这种情况下，*cmi.objectives.0.xxx*指的是哪个目标？初级还是次级？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T23:07:43.513

次要目标。考虑以下示例：

```
<imsss:objectives>
<imsss:primaryObjective objectiveID="primary_1" />
<imsss:objective objectiveID="obj_1" />
<imsss:objective objectiveID="obj_2" />
<imsss:objective objectiveID="obj_3" />
</imsss:objectives> 
```

`<imsss:objecive>`使用“cmi.objecives.n.XX”可以访问所有带有标签的目标。在这个例子中，我们只有三个可以使用“cmi.objectives.n.xx”访问的目标。但是，SCO 不会直接访问主要目标。例如，如果要访问主要目标的成功状态，则必须使用“cmi.success_status”。将主要目标视为上合组织本身。例如，“目标满足状态”是指主要目标。

# objective-c - 使用变量设置 textview 文本颜色

> ID：11598390
> 
> 赞同：-2
> 
> 时间：2012-07-22T07:09:20.687
> 
> 标签：objective-c, ios, ipad, ios5, uicolor

我有一个方法我得到了 colorWithHex，它可以让我发送一个像 ffaa29 (hex) 这样的字符串并得到一个 UIColor。该方法有效。如果我做

```
self._mainConsole.textColor = [self colorWithHexString: choice]; 
```

我可以设置颜色。但问题是我想存储颜色。例如，如果他们输入了无效的颜色，我想返回当前颜色。

当我这样做时，它不起作用。

```
self.foregroundColor =[self colorWithHexString: choice];
self._mainConsole.textColor = self.foregroundColor; 
```

相反，它变黑了，在我看来它会变成 000000。现在在我的测试 ipad 中，它可以在上面的一个位置工作，但不能在另一个位置工作。在测试人员 ipad 1 上，第二种方法根本不起作用。我错过了什么？会不会是内存问题？

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:22:40.753

您正在使用弱属性来保持颜色。`nil`这意味着一旦没有其他对您的颜色对象的强引用，它将被替换。将您的财产更改为`strong`，一切都应该按预期工作。

# c# - C# - 创建和管理应用程序特定的项目文件

> ID：11598391
> 
> 赞同：0
> 
> 时间：2012-07-22T07:09:43.417
> 
> 标签：c#, database, xml-serialization, project-files, system.configuration

我正在开发的应用程序的规范之一是它必须与项目文件一起使用。我的问题在于我将如何满足这个要求，因为我正在努力使用 Prism 和 Unity 使应用程序尽可能松散，所以我无法决定我将为该项目使用哪种实现文件创建和管理（项目文件加载、保存等）。

该应用程序将成为 SEO 助手，主要处理文本信息，如 Uri 和将从 Internet 获取的字符串。

我想到了一些可能的实现：

**a** - 框架 System.Configuration 命名空间。这是我的第一个选择，因为我可以轻松地将新的 ConfigurationSection 插入到 Configuration 对象中。缺点是它没有机会（或者至少我不知道如何）使用接口进行抽象。

**b** - 为每个项目创建一个数据库并将其保存在一个文件中。通过这个实现，我可以使用诸如 nHibernate 之类的数据库框架或任何其他（接受建议）来处理对象到数据库的映射。

**c** - 在此处添加您自己的。

我的问题是，你们认为处理我插入其中的每个模块的不同配置/设置以及保存大的 url 列表、大约 10k~100k url 的列表以及其他设置的更好方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:44:49.197

最简单的方法是定义您自己的类型（类），如 ProjectSettings { ... } 并使用首选序列化程序（例如 XML）对其进行序列化/反序列化。

然后你根本不需要任何花哨的 ORM 或配置。不要在不需要的地方引入复杂性；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:44:32.353

当你有几十个配置变量时，配置文件是一个很好的解决方案（但在这里，最好有数据库。为什么？因为如果你想对 10-100k uri 进行一些修改，这将是困难的，而且很容易出错. 使用数据库（一个表用于项目，另一个用于字符串连接，另一个用于 uri ..），查询它，更新它，CRUD 它很容易。当数据对于一个文件来说很大时，你必须使用数据库这种情况是因为实体之间的关系（一个项目有很多字符串连接，很多uri ...）对于ORM，Entity Framework 4.0，因为它是POCO（实体类上没有元数据映射）。最好的尊重

# android - 添加标记以从 SQLite 映射，并在缩放中居中/调整它们（Android）

> ID：11598400
> 
> 赞同：0
> 
> 时间：2012-07-22T07:11:43.537
> 
> 标签：android, sqlite, google-maps, google-maps-markers

我真的需要帮助使用存储在我的数据库中的坐标中的标记填充地图。我已经从 SQLite 填充列表视图，我可以向地图添加标记，但我不知道如何从 SQLite 数据库添加标记。此外，如果我能在屏幕上将标记居中并放大它们都适合的地方获得一些帮助，那就太棒了！到目前为止，这是我的代码：

****更新代码****

全能活动

```
public class allmapactivity extends MapActivity {
GeoPoint GeoP;
MapView mapV;
private SQLiteAdapter mySQLiteAdapter;
public ArrayList<Integer> latitude = new ArrayList<Integer>();
public ArrayList<Integer> longitude = new ArrayList<Integer>();

@Override
protected void onCreate(Bundle savedInstanceState) {
 // TODO Auto-generated method stub
 super.onCreate(savedInstanceState);
 setContentView(R.layout.map);
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
 requestWindowFeature(Window.FEATURE_NO_TITLE);

 mapV = (MapView) findViewById(R.id.mapview);
 mapV.displayZoomControls(true);
 mapV.setBuiltInZoomControls(true);
 mapV.setSatellite(false);

final MapController mController = mapV.getController();

List<Overlay> mapOverlays = mapV.getOverlays();
Drawable drawable = this.getResources().getDrawable(R.drawable.pin);

mySQLiteAdapter = new SQLiteAdapter(getApplicationContext());

if(!mySQLiteAdapter.isEmpty())
{
Cursor initcursor = mySQLiteAdapter.queueAll5();
initcursor.moveToFirst();
for(int i = 0; i < initcursor.getCount();i++)
{
    HelloItemizedOverlay itemizedoverlay = 
             new HelloItemizedOverlay(drawable, allmapactivity.this);
    int lat = (int) (initcursor.getDouble(initcursor.getColumnIndex("Content11")) * 1E6);
    int lon = (int) (initcursor.getDouble(initcursor.getColumnIndex("Content12")) * 1E6);
        latitude.add(lat);
        longitude.add(lon);
    GeoPoint geopoint = new GeoPoint(lat, lon);
    String savedtitle = initcursor.getString(initcursor.getColumnIndex("Content9"));
    String savedtext = initcursor.getString(initcursor.getColumnIndex("Content10"));
     OverlayItem overlayitem = new OverlayItem(geopoint, savedtitle, savedtext);
     itemizedoverlay.addOverlay(overlayitem);
     mapOverlays.add(itemizedoverlay);
     initcursor.moveToNext();
  }
  }

        int latSum = 0;
double latAverage = 0;

 for(Integer latitudeValue: latitude)
 {
  latSum = latSum + latitudeValue;
 }

 latAverage = (double) latSum/latitude.size();

 int lonSum = 0;
 double lonAverage = 0;

for(Integer longitudeValue: longitude)
{
 lonSum = lonSum + longitudeValue;
}

lonAverage = (double) lonSum/longitude.size();

    GeoPoint center = new GeoPoint((int) latAverage, (int) lonAverage);

    mController.animateTo(center); 

}

@Override
protected boolean isRouteDisplayed() {

   // TODO Auto-generated method stub

return false;
}

} 
```

SQLITE适配器

```
public class SQLiteAdapter {

 public static final String MYDATABASE_NAME = "MY_DATABASE";

 public static final String MYDATABASE_TABLE = "MY_TABLE";

 public static final int MYDATABASE_VERSION = 1;

 public static final String KEY_ID = "_id";

 public static final String KEY_CONTENT1 = "Content1";

 public static final String KEY_CONTENT3 = "Content3";

 public static final String KEY_CONTENT4 = "Content4";

 public static final String KEY_CONTENT5 = "Content5";

 public static final String KEY_CONTENT6 = "Content6";

 public static final String KEY_CONTENT7 = "Content7";

 public static final String KEY_CONTENT8 = "Content8";

 public static final String KEY_CONTENT9 = "Content9";

 public static final String KEY_CONTENT10 = "Content10";

 public static final String KEY_CONTENT11 = "Content11";

 public static final String KEY_CONTENT12 = "Content12";

 private static final String SCRIPT_CREATE_DATABASE =

  "create table " + MYDATABASE_TABLE + " ("

  + KEY_ID + " integer primary key autoincrement, "

  + KEY_CONTENT1 + " text not null, "

  + KEY_CONTENT3 + " text not null, "

  + KEY_CONTENT4 + " text not null," 

  + KEY_CONTENT5 + " text not null, "

  + KEY_CONTENT6 + " text not null," 

  + KEY_CONTENT7 + " text not null,"

  + KEY_CONTENT8 + " text not null,"

  + KEY_CONTENT9 + " text not null,"

  + KEY_CONTENT10 + " text not null,"

  + KEY_CONTENT11 + " text not null,"

  + KEY_CONTENT12 + " text not null);";

private static final String FOOTPRINT = null;

private SQLiteHelper sqLiteHelper;

private SQLiteDatabase sqLiteDatabase;

private Context context;

public SQLiteAdapter(Context c){

context = c;

}

 public SQLiteAdapter openToRead() throws android.database.SQLException {

  sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);

  sqLiteDatabase = sqLiteHelper.getReadableDatabase();

  return this; 

 }

 public SQLiteAdapter openToWrite() throws android.database.SQLException {

  sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);

  sqLiteDatabase = sqLiteHelper.getWritableDatabase();

  return this; 

 }

 public void close(){

  sqLiteHelper.close();

 }

 public long insert(String content1, String content3, 
                String content4, String content5, String content6, String content7, 
                String content8, String content9, String content10, String content11, String content12){

  ContentValues contentValues = new ContentValues();

  contentValues.put(KEY_CONTENT1, content1);

  contentValues.put(KEY_CONTENT3, content3);

  contentValues.put(KEY_CONTENT4, content4);

  contentValues.put(KEY_CONTENT5, content5);

  contentValues.put(KEY_CONTENT6, content6);

  contentValues.put(KEY_CONTENT7, content7);

  contentValues.put(KEY_CONTENT8, content8);

  contentValues.put(KEY_CONTENT9, content9);

  contentValues.put(KEY_CONTENT10, content10);

  contentValues.put(KEY_CONTENT11, content11);

  contentValues.put(KEY_CONTENT12, content12);

  return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);

 }

 public int deleterow(){
 SharedPreferences settings = context.getSharedPreferences(FOOTPRINT, 0);
 String itemId = settings.getString("columnvalue5", "");

  return sqLiteDatabase.delete(MYDATABASE_TABLE, KEY_CONTENT1 + "=" + "?", new String[]{itemId});

 }
 public int deleterow2(){
 SharedPreferences settings = context.getSharedPreferences(FOOTPRINT, 0);
 String itemId = settings.getString("columnvalue6", "");
 String itemId2 = settings.getString("columnvalue7", "");

  return sqLiteDatabase.delete(MYDATABASE_TABLE, 
          KEY_CONTENT1 + "=?" + " and " + KEY_CONTENT3 + "=?",  new String[]{itemId,itemId2});

 }
 public int deleterow3(){
 SharedPreferences settings = context.getSharedPreferences(FOOTPRINT, 0);
 String itemId = settings.getString("columnvalue8", "");

  return sqLiteDatabase.delete(MYDATABASE_TABLE, KEY_ID + "=" + "?", new String[]{itemId});

 }

 public Cursor queueAll(){

 String[] columns = new String[]{KEY_ID, KEY_CONTENT1, "sum(" + KEY_CONTENT6 + " )", KEY_CONTENT9};

 Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,

 null, null, KEY_CONTENT1, null, KEY_CONTENT9+ " DESC");

  return cursor;

 }

 public Cursor queueAll2(){

 SharedPreferences settings = context.getSharedPreferences(FOOTPRINT, 0);
 String itemId = settings.getString("columnvalue1", "");

  String[] columns = new String[]{KEY_ID, KEY_CONTENT1, KEY_CONTENT3, "sum(" + KEY_CONTENT6 + " )", KEY_CONTENT9, KEY_CONTENT10};

  Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,

          KEY_CONTENT1 + "=" + "?", new String[]{itemId}, KEY_CONTENT3, null, KEY_CONTENT9+ " DESC");

  return cursor;

 }

 public Cursor queueAll3(){

 SharedPreferences settings = context.getSharedPreferences(FOOTPRINT, 0);
 String itemId = settings.getString("columnvalue1", "");
 String itemId2 = settings.getString("columnvalue2", "");

  String[] columns = new String[]{KEY_ID, KEY_CONTENT1, KEY_CONTENT3, KEY_CONTENT4, KEY_CONTENT5, KEY_CONTENT6, 
                                  KEY_CONTENT7, KEY_CONTENT8, KEY_CONTENT9, KEY_CONTENT11, KEY_CONTENT12};

  Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,

          KEY_CONTENT1 + "=?" + " and " + KEY_CONTENT3 + "=?" , new String[]{itemId,itemId2}, null, null, KEY_CONTENT9+ " DESC");

  return cursor;

 }

 public Cursor queueAll4(){

  String[] columns = new String[]{KEY_ID, "sum(" + KEY_CONTENT6 + " )", KEY_CONTENT9, KEY_CONTENT10 };

  Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,

          null , null, KEY_CONTENT10, null, KEY_CONTENT9+ " DESC");

  return cursor;

 }

 public Cursor queueAll5(){

  String[] columns = new String[]{KEY_CONTENT9, KEY_CONTENT10, KEY_CONTENT11, KEY_CONTENT12};

  Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,

          null , null, null, null, null);

  return cursor;

 }

 public boolean isEmpty()
 {
 try{
 Cursor check = sqLiteDatabase.query("MY_TABLE", new String[] {"Content11"}, null, null, null, null, null);
 }
 catch(NullPointerException e)
 {
     return true;
 }
 return false;
 }

 public class SQLiteHelper extends SQLiteOpenHelper {

  public SQLiteHelper(Context context, String name,

 CursorFactory factory, int version) {

  super(context, name, factory, version);

  }

  @Override

  public void onCreate(SQLiteDatabase db) {

   // TODO Auto-generated method stub

  db.execSQL(SCRIPT_CREATE_DATABASE);

 }

  @Override

  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

   // TODO Auto-generated method stub

  }

 } 

} 
```

不幸的是，我收到此代码的强制关闭错误:(继承人logcat：

```
07-22 19:14:33.918: E/AndroidRuntime(1330): FATAL EXCEPTION: main
07-22 19:14:33.918: E/AndroidRuntime(1330): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.inn.footprint/com.inn.footprint.allmapactivity}: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
07-22 19:14:33.918: E/AndroidRuntime(1330):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at android.os.Looper.loop(Looper.java:130)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at android.app.ActivityThread.main(ActivityThread.java:3683)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at java.lang.reflect.Method.invokeNative(Native Method)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at java.lang.reflect.Method.invoke(Method.java:507)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at dalvik.system.NativeStart.main(Native Method)
07-22 19:14:33.918: E/AndroidRuntime(1330): Caused by: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
07-22 19:14:33.918: E/AndroidRuntime(1330):     at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:181)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at android.app.Activity.requestWindowFeature(Activity.java:2729)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at com.inn.footprint.allmapactivity.onCreate(allmapactivity.java:36)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-22 19:14:33.918: E/AndroidRuntime(1330):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-22 19:14:33.918: E/AndroidRuntime(1330):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:17:43.110

以下 NotesDbAdapter 改编自 developer.android.com 上的记事本教程，将其视为数据库包装器。我添加了额外的字段，例如 lat、lon，它们将作为主键，即如何访问标记的位置，标记将存储在哪里。然后按照这段代码，我还提供了对你的类 allmapactivity 的修改，它获取所有“注释”，即数据库中的标记，然后用它们填充你的地图。这段代码肯定会像我测试过的那样工作！如果您需要进一步的建议，请告诉我！

干杯

```
/*
* Copyright (C) 2008 Google Inc.
* 
* Licensed under the Apache License, Version 2.0 (the "License"); you may not
* use this file except in compliance with the License. You may obtain a copy of
* the License at
* 
* http://www.apache.org/licenses/LICENSE-2.0
* 
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
* WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
* License for the specific language governing permissions and limitations under
* the License.
*/

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

/**
* Simple notes database access helper class. Defines the basic CRUD operations
* for the notepad example, and gives the ability to list all notes as well as
* retrieve or modify a specific note.
* 
* This has been improved from the first version of this tutorial through the
* addition of better error handling and also using returning a Cursor instead
* of using a collection of inner classes (which is less scalable and not
* recommended).
*/
public class NotesDbAdapter {

public static final String KEY_TITLE = "title";
public static final String KEY_BODY = "body";
public static final String KEY_LAT = "lat";
public static final String KEY_LON = "lon";

private static final String TAG = "NotesDbAdapter";
public DatabaseHelper mDbHelper;
public SQLiteDatabase mDb;

/**
 * Database creation sql statement
 */
private static final String DATABASE_CREATE =
    "CREATE TABLE notes (lat REAL, lon REAL, title varchar(60), body varchar(300), PRIMARY KEY (lat, lon));";

private static final String DATABASE_NAME = "data";
private static final String DATABASE_TABLE = "notes";
private static final int DATABASE_VERSION = 2;

private final Context mCtx;

private static class DatabaseHelper extends SQLiteOpenHelper {

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS notes");
        onCreate(db);
    }
}

/**
 * Constructor - takes the context to allow the database to be
 * opened/created
 * 
 * @param ctx the Context within which to work
 */
public NotesDbAdapter(Context ctx) {
    this.mCtx = ctx;
    open();
}

/**
 * Open the notes database. If it cannot be opened, try to create a new
 * instance of the database. If it cannot be created, throw an exception to
 * signal the failure
 * 
 * @return this (self reference, allowing this to be chained in an
 *         initialization call)
 * @throws SQLException if the database could be neither opened or created
 */
public NotesDbAdapter open() throws SQLException {
    mDbHelper = new DatabaseHelper(mCtx);
    mDb = mDbHelper.getWritableDatabase();
    return this;
}

public void close() {
    mDbHelper.close();
}

/**
 * Create a new note using the title and body provided. If the note is
 * successfully created return the new rowId for that note, otherwise return
 * a -1 to indicate failure.
 * 
 * @param title the title of the note
 * @param body the body of the note
 * @return rowId or -1 if failed
 */
public long createNote(double lat, double lon, String title, String body) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_LAT, lat);
    initialValues.put(KEY_LON, lon);
    initialValues.put(KEY_TITLE, title);
    initialValues.put(KEY_BODY, body);

    return mDb.insert(DATABASE_TABLE, null, initialValues);
}

/**
 * Delete the note with the given rowId
 * 
 * @param rowId id of note to delete
 * @return true if deleted, false otherwise
 */
public boolean deleteNote(double lat, double lon) {

    return mDb.delete(DATABASE_TABLE, KEY_LAT + "=" + lat + " and " + KEY_LON + "=" + lon, null) > 0;
}

/**
 * Return a Cursor over the list of all notes in the database
 * 
 * @return Cursor over all notes
 */
public Cursor fetchAllNotes() {
    return mDb.query("notes", new String[] {KEY_LAT, KEY_LON,
            KEY_TITLE, KEY_BODY}, null, null, null, null, null);
}

/**
 * Return a Cursor positioned at the note that matches the given rowId
 * 
 * @param rowId id of note to retrieve
 * @return Cursor positioned to matching note, if found
 * @throws SQLException if note could not be found/retrieved
 */
public Cursor fetchNote(double lat, double lon) {

    try{    
    Cursor mCursor =

        mDb.query(true, DATABASE_TABLE, new String[] {KEY_LAT, KEY_LON,
                KEY_TITLE, KEY_BODY}, KEY_LAT + "=" + lat+ " and "+KEY_LON+"="+lon, null,
                null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
    }
    catch(SQLException sqle)
    {
        return null;
    }
}

/**
 * Update the note using the details provided. The note to be updated is
 * specified using the rowId, and it is altered to use the title and body
 * values passed in
 * 
 * @param rowId id of note to update
 * @param title value to set note title to
 * @param body value to set note body to
 * @return true if the note was successfully updated, false otherwise
 */
public boolean updateNote(double lat, double lon, String title, String body) {
    ContentValues args = new ContentValues();
    args.put(KEY_TITLE, title);
    args.put(KEY_BODY, body);

    return mDb.update(DATABASE_TABLE, args, KEY_LAT + "=" + lat + " and " + KEY_LON + "=" + lon, null) > 0;
}

public boolean isEmpty()
{
    try{
    Cursor check = mDb.query("notes", new String[] {"lat"}, null, null, null, null, null);
    }
    catch(NullPointerException e)
    {
        return true;
    }
    return false;
}
} 
```

-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/ -/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/

现在，您的类 allmapactivity 的代码：

-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/ -/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/

```
public class allmapactivity extends MapActivity {
MapController mControl;
GeoPoint GeoP;
MapView mapV;
Cursor cursor;
private NotesDbAdapter mDbHelper;
public ArrayList<Integer> latitude = new ArrayList<Integer>();
public ArrayList<Integer> longitude = new ArrayList<Integer>();

@Override
protected void onCreate(Bundle savedInstanceState) {
 // TODO Auto-generated method stub
 super.onCreate(savedInstanceState);
 setContentView(R.layout.map);
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

 mapV = (MapView) findViewById(R.id.mapview);
 mapV.displayZoomControls(true);
 mapV.setBuiltInZoomControls(true);
 mapV.setSatellite(false);

final MapController mController = mapV.getController();

List<Overlay> mapOverlays = mapV.getOverlays();
Drawable drawable = this.getResources().getDrawable(R.drawable.pin);

mDbHelper = new NotesDbAdapter(getApplicationContext());

    if(!mDbHelper.isEmpty())
    {
    Cursor initcursor = mDbHelper.fetchAllNotes();
    initcursor.moveToFirst();
    for(int i = 0; i < initcursor.getCount();i++)
    {
        HelloItemizedOverlay itemizedoverlay = 
                 new HelloItemizedOverlay(drawable, allmapactivity.this);
        int lat = (int) (initcursor.getDouble(initcursor.getColumnIndex("lat")) * 1E6);
        int lon = (int) (initcursor.getDouble(initcursor.getColumnIndex("lon")) * 1E6);
            latitude.add(lat);
            longitude.add(lon);
        GeoPoint geopoint = new GeoPoint(lat, lon);
        String savedtitle = initcursor.getString(initcursor.getColumnIndex("title");
        String savedtext = initcursor.getString(initcursor.getColumnIndex("body"));
         OverlayItem overlayitem = new OverlayItem(geopoint, savedtitle, savedtext);
         itemizedoverlay.addOverlay(overlayitem);
         mapOverlays.add(itemizedoverlay);
         initcursor.moveToNext();
    }
    }

        String mapCenter = getMapCenter(latitude, longitude);
        int latCenter = (int) (mapCenter.split(",")[0] * 1E6);
        int lonCenter = (int) (mapCenter.split(",")[1] * 1E6);
        GeoPoint center = new GeoPoint(latCenter, lonCenter);

        mController.animateTo(center); // This will move the map focus to the central point of the markers found in the function getMapCenter();

}

 public String getMapCenter(ArrayList<Integer> latitudeList, ArrayList<Integer> longitudeList)
 {
  // This function, as the name suggests will return the latitude, longitude of the central point of the markers found by taking the average of the latitude and longitude values of the markers
  int latSum = 0;
  int lonSum = 0;
  double latAverage = 0;
  double lonAverage = 0;
  String result;

 for(Integer latitudeValue: latitudeList)
 {
  latSum = latSum + latitudeValue;
 }
 for(Integer longitudeValue: longitudeList)
 {
  lonSum = lonSum + longitudeValue;
 }

 latAverage = (double) latSum/latitudeList.size();
 lonAverage = (double) lonSum/longitudeList.size();

 result = latAverage+","+lonAverage;
 return result;
}

@Override
protected boolean isRouteDisplayed() {

   // TODO Auto-generated method stub

return false;
}

} 
```

# javascript - 如何使用行和列索引查找特定单元格的内容？

> ID：11598405
> 
> 赞同：-6
> 
> 时间：2012-07-22T07:12:39.840
> 
> 标签：javascript

使用单元格的坐标我想查找特定单元格的内容。我的意思是，如果我们有特定单元格的行索引和列索引，并且我们希望通过将单元格的索引作为参数传递来获取该特定单元格的内容在一个函数中，然后在 html 表中搜索该特定单元格的内容。

```
function createtable() {
  function displaytable(argument) {
    var tr=document.createElement('tr');
    for (var i=0; i < argument.length; i++) {
      var td=document.createElement('td');
      if (i == 0) {
        td.appendChild(document.createTextNode(argument[i]));
      }
      if (i == 1) {
        td.appendChild(document.createTextNode(argument[i]));
      }
      if (i == 3) {
        td.appendChild(document.createTextNode(argument[i]));
      }
      if (i == 2) {
        td.ondblclick= function () {
        var column_index= (this.cellIndex) -1;
        var row_index= (this.parentNode.rowIndex);
        search_cell(row_index,column_index);
      }
      td.appendChild(document.createTextNode(argument[i]));
    }
    tr.appendChild(td);
  }
   document.getElementById('table_body').appendChild(tr);
 }
 document.write("<table border=\"1\"><tr><th>INDEX</th><th>--CELL NAME--</th><th>--PIN NAME--</th><th>--PG PIN--</th></tr><tbody id='table_body'></tbody></table>");

 for (var x=0; x < array_cells.length; x++) {
   displaytable([x+1,array_cells[x].cell,array_cells[x].pins,array_cells[x].pg_pins])
 }
 function search_cell(row_index,column_index) {
   //What to write over here
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:16:22.613

标记：

```
<td onclick="click(event)">content</td> 
```

JS：

```
function click(event)
{
    var target = event.target || event.srcElement;
    var content = target.innerHTML || target.textContent;
} 
```

[http://jsfiddle.net/NRKsT/](http://jsfiddle.net/NRKsT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T07:20:28.040

您需要向表中添加一个事件侦听器，然后像这样获取事件的目标 innerHTML：

```
yourTable.addEventListener('click', function (event) {
    console.log(event.target.innerHTML);
}); 
```

您不需要为每个单元格添加侦听器，这是浪费资源，请为表使用一个全局侦听器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T07:24:47.817

假设这是您的 HTML：

```
<table>
    <tr>
        <td>Cell 1</td>
        <td>Cell 2</td>
        <td>Cell 3</td>
    </tr>
    <tr>
        <td>Cell 4</td>
        <td>Cell 5</td>
        <td>Cell 6</td>
    </tr>
</table> 
```

这个 jQuery 代码会做你想做的事：

```
$(document).ready(function() {
    $('td').click(function() {
       somevar = this.innerHTML;
       alert( this.innerHTML );
    });
}); 
```

如果你更喜欢简单的 JavaScript，那么：

```
var temp = document.getElementsByTagName('td');
for( var i = 0; i < temp.length; i++ ) {
    temp[i].addEventListener('click', function (event) {
       alert( this.innerHTML );
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T07:15:42.560

如果您在 javascript 中构建此表，最简单的方法是在返回 this.innerHTML 的单元格中添加一个 onclick 方法

```
var e = document.createElement('td');
e.onClick = function(){
   doSomeThingWith( this.innerHTML);
} 
```

# c++ - 打印余数时缺少 0

> ID：11598411
> 
> 赞同：0
> 
> 时间：2012-07-22T07:14:05.177
> 
> 标签：c++

我有一个存储余数值的操作，但是如果余数是 0291，它只存储 291，所以我希望变量也存储 0。

手术：

```
lk = ((lk + tc + vc) * 1671) % 10000; 
```

lk 为 long int 类型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T07:16:21.883

不管你在它前面放多少个前导零，它仍然是 291。这与模运算符或任何数学运算无关。

您要问的是数字*是如何显示*的。

试试这个：

```
printf("%04ld", lk); 
```

来源：[`man printf`](http://linux.die.net/man/3/printf)

# json - 从 json 数据生成节点以进行强制布局

> ID：11598413
> 
> 赞同：2
> 
> 时间：2012-07-22T07:14:11.647
> 
> 标签：json, d3.js, force-layout

我正在尝试制作类似于[Mike Bostock 的](http://bl.ocks.org/1804919)气泡图：

![在此处输入图像描述](../Images/24d2511c15076046af28b40e0728dd1f.png)

但是，我希望为 json 生成节点，而不是随机生成节点。假设我有`dataset`一个有效的 JSON 变量，我如何`nodes`从中生成一个可用于强制布局的变量。

Mike 的实现（对于随机生成的圆圈）是：

```
var nodes = d3.range(n).map(function() {
  var i = Math.floor(Math.random() * m),
      v = (i + 1) / m * -Math.log(Math.random());
  return {
    radius: radius(v),
    color: color(i),
    cx: x(i),
    cy: height / 2
  };
}); 
```

假设我的`dataset`JSON 是这样的：

```
{"nodes":[{"name": "node_name", "size": 18}, ... ]} 
```

我希望每个圆的半径是`size`JSON 数组中每个对象的半径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:51:37.617

`nodes`是一个对象数组，每个对象都具有、`radius`和属性。您需要做的就是从您的数据中创建这样一个数组。究竟如何做到这一点将取决于您的数据。请注意，您不需要创建所有属性——例如，如果所有节点都可以具有相同的颜色，则无需添加相应的属性（但还需要稍后更改实际设置颜色的代码在）。`color``cx``cy`

# joomla - 检查是否安装了扩展程序而不通知失败

> ID：11598417
> 
> 赞同：1
> 
> 时间：2012-07-22T07:15:07.763
> 
> 标签：joomla, joomla1.5, joomla2.5, joomla1.7, joomla1.6

方法 JComponentHelper::isEnabled('com_extension', true); 检查是否安装了扩展并返回布尔值。

由于 self::getComponent($option, $strict); 导致组件未安装，该函数还会抛出异常通知。在同一个助手类中。

如果未安装组件，有没有办法避免通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:03:39.773

检查您的数据库以查看该组件是否已安装并启用。

```
$db = JFactory::getDbo();
$db->setQuery("SELECT enabled FROM #__extensions WHERE name = 'component name'");
$is_enabled = $db->loadResult(); 
```

如果值为`$is_enabled`，`1`则您的组件已启用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-02T20:49:18.563

虽然意识到这是一个老问题，但它也是谷歌的第一个结果之一，我想分享对我有用的东西，同时避免额外的数据库查询。

为避免异常，您还可以检查扩展的入口点文件是否存在，例如：

```
if (file_exists(JPATH_ADMINISTRATOR . '/components/com_extension/extension.php') && JComponentHelper::isEnabled('com_extension', true))
    {
        // Your code here
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:53:17.753

您可以使用相同的函数 isEnabled 并捕获该异常，因此如果抛出异常，则不会安装该组件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-26T17:51:36.253

查看

```
JComponentHelper::isInstalled('com_extension'); 
```

# cakephp - cakePHP 预填充密码字段并在更新时中断

> ID：11598422
> 
> 赞同：0
> 
> 时间：2012-07-22T07:15:53.187
> 
> 标签：cakephp

我有一个用户配置文件更新页面，它使用从 $this->request->data 收集的用户信息预先填充文本字段。一切正常，除了密码字段预先填充了似乎是来自数据库的加密密码，所以保存时，由于密码超过允许的字符数，验证失败，即使它存储，它也会然后用加密的相同密码替换用户的实际密码，如果这有意义的话。

最好的解决方法是什么？

**控制器：**

```
 public function profile() {
    if($this->request->is('post') || $this->request->is('put')) {
        if($this->Auth->user("id") == $this->request->data['User']['id']) {
            $this->request->data['User']['user_status_id'] = $this->Auth->user("user_status_id");
            $this->request->data['User']['user_type_id'] = $this->Auth->user("user_type_id");
            if($this->User->save($this->request->data)) {
                $this->Session->setFlash('Your profile has been updated','default',array('class'=>'success'));
            } else {
                $this->Session->setFlash("An error has occured updating your profile.");
            }
        } else {
            $this->Session->setFlash("Unable to save this result as there is an ID mismatch.");
        }
    } else {
        $this->request->data = $this->User->read(null,$this->Auth->user("id"));
    }
} 
```

**看法：**

```
 <h1>Profile</h1>
 <h3>Update your profile</h3>
 <div class="left">
<div class="formContainer">
<?php 
    echo $this->Form->create('User');
        echo $this->Form->input('username',array("id" => "profileUsername"));
        echo $this->Form->input('password',array("id" => "profilePassword"));
        echo $this->Form->input('company');
        echo $this->Form->input('first_name');
        echo $this->Form->input('last_name');
        echo $this->Form->input('telephone');
        echo $this->Form->input('fax');
        echo $this->Form->input('id',array('type' => 'hidden'));
    echo $this->Form->end(__('Update'));
    ?>
 </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T08:23:15.200

您遇到的问题是，如果您按照应有的方式存储了密码（使用单向哈希），则无法将其反转以显示纯文本版本，因此您可以简单地将密码数据设置为 null（保留密码字段空的）：

```
$this->request->data['User']['password'] = NULL; 
```

然后你有两个选择：

1.  要求用户密码更新他们的数据（一个很好的小安全措施）

2.  仅在用户输入新密码时更新用户密码

如果您已将密码验证规则设置为 ，则第二个选项可能会破坏您的验证`allowEmpty => false`，在这种情况下，您可以使用多个验证集，您可以通过遵循其中任何一个（所有在 cakephp 2.x 中工作）多验证[行为](http://webcache.googleusercontent.com/search?q=cache%3ai67q6yL7UskJ%3abakery.cakephp.org/articles/view/multivalidatablebehavior-using-many-validation-rulesets-per-model%20&cd=1&hl=en&ct=clnk&gl=uk)，[多个验证集来完成](http://snook.ca/archives/cakephp/multiple_validation_sets_cakephp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:53:34.497

阅读并使用此行为： http: [//www.dereuromark.de/2011/08/25/working-with-passwords-in-cakephp](http://www.dereuromark.de/2011/08/25/working-with-passwords-in-cakephp)

由于哈希的技术细节，密码是一张单程票。

基本上，您永远不会将密码哈希传递回视图。始终显示空白字段（就像您应该在 www 中的几乎所有其他网站上看到的那样）。

然后您忽略并发布为空的字段。只有在新设置密码字段时，您才会真正触发验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T07:06:39.237

```
<?php echo $this->Form->input('password', array('label' => false,'type'=>'password','required'=>'false')); ?> 
```

输出

```
 <input name="data[User][password]" type="password" id="UserPassword"> 
```

当心！仅在编辑部分使用它

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-27T07:53:45.653

```
$this->Form->input('password',array('value'=>null)); 
```

# android - Android：如何删除通知上的果冻豆灰色条？

> ID：11598423
> 
> 赞同：0
> 
> 时间：2012-07-22T07:15:59.900
> 
> 标签：android, notifications, android-4.2-jelly-bean, notification-bar

有没有办法删除果冻豆创建的静态通知上的灰色条？

非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:29:10.727

点击时钟旁边栏上的小堆栈按钮，它将隐藏所有通知。在我的 xoom 上工作。

# c# - 如何创建 csproj 命令行？

> ID：11598427
> 
> 赞同：2
> 
> 时间：2012-07-22T07:16:52.387
> 
> 标签：c#, visual-studio, command-line, code-generation

有没有办法从命令行创建 Visual Studio 模板的 CS 和 WPF 解决方案？

我写了一个 C# 和 WPF 代码生成器，我希望我的输出是一个 C# 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:29:31.637

要从命令行创建项目，只需创建并保存项目并使用命令行复制文件夹。

或使用 Visual Studio DTE2：http: [//social.msdn.microsoft.com/Forums/en-US/vsx/thread/72d6608b-2e9a-4bc4-b294-b75db17bcad2/](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/72d6608b-2e9a-4bc4-b294-b75db17bcad2/)

或者使用 Projectgen.exe 命令行工具创建项目模板 [http://msdn.microsoft.com/en-us/library/cc175876(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/cc175876(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T07:37:43.843

嗯，有什么用呢？

我想你可以看看 devenv 的 /Command 开关：

```
devenv.exe /Command np 
```

其中“np”代表“新项目”。

以下是可用命令的列表：[预定义命令](http://msdn.microsoft.com/en-us/library/c3a0kd3x.aspx)，尝试使用它...

但我认为压缩一个空的解决方案并将其复制到您的脚本文件中而不是要求VS一遍又一遍地做会更简单......

# java - 如何在用户尝试运行应用程序之前检查安装了哪个版本的 Java？

> ID：11598428
> 
> 赞同：3
> 
> 时间：2012-07-22T07:16:56.560
> 
> 标签：java

如果用户双击可执行 JAR 文件，是否可以检查他或她安装的 Java 版本，然后在窗口中显示适当的消息，说明他或她需要 X 版本的 Java运行应用程序？

我正在创建一个需要 Java 7 的应用程序，如果用户没有安装该版本，我想显示一条消息，说明他或她需要下载并安装它。

当然，用户可以键入`java -version`，但是对于那些不知道如何检查安装的版本的人来说，最好在窗口中显示版本。有可能这样做吗？

或者我应该在启动应用程序之前运行某种类型的脚本来检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T07:32:32.587

检查`System.getProperty("java.version")`

你需要做一些解析，但这应该给你一个跳跃点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T07:34:13.637

您可以通过使用获取 java 版本 `System.getProperty("java.version")`

请参阅文档 (http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

# ios - iOS NSMutableString 返回奇怪的字符

> ID：11598432
> 
> 赞同：0
> 
> 时间：2012-07-22T07:17:47.873
> 
> 标签：ios, nsmutablearray, nsarray, nsmutablestring

我制作了一个由几个单词组成的数组，然后将所有单词放入一个可变字符串中，然后将该字符串的每个字符组成一个可变数组。但是，作为可变字符数组的“wordSplitted”在模拟器中每次启动应用程序时都会给出随机加扰字符，显示在日志中：

```
2012-07-22 09:12:01.108 xxx[4484:b603] wordSplitted contains: (
    "",
    "",
    "\U221e",
    "-",
    G,
    N,
    P,
    "",
    ""
) 
```

应该是 b, i, l, h, u, k, s, k, j。

```
 NSArray *threeWords = [NSArray arrayWithObjects:@"bil", @"huk", @"skje", nil];

    NSMutableString *allTogether = [[NSMutableString alloc]init];

    /*
    for (NSString *s in threeWords)
    {
        [allTogether appendString:s];
    }
     */

    for (int b = 0; b < [threeWords count]; b++)
    {
        [allTogether appendString:[threeWords objectAtIndex:b]];
    }
    NSLog (@"allTogether contains %@", allTogether);

    //[threeWords release];
    [allTogether release];

    NSMutableArray *wordSplitted = [[NSMutableArray alloc]init];

//this function gives me headache
        for (int a = 0; a < 9; a ++)
        {
            //gives also scrambled characters

        //[wordSplitted addObject:[NSString stringWithFormat:@"%C",[allTogether characterAtIndex:a]]];

        NSRange range = {a,1};

        [wordSplitted addObject:[allTogether substringWithRange:range]];

    }

    NSLog (@"wordSplitted contains: %@", wordSplitted); 
```

如何显示字母等普通字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T07:22:17.180

你打电话`[allTogether release]`，但稍后再引用它。通常这会导致你的程序崩溃，但一些关于`CFMutableArray`支持的事情并不总是会发生。

基本上，在确定使用完毕之前不要释放阵列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T07:24:48.270

关于字符串拆分

[http://www.idev101.com/code/Objective-C/Strings/split.html](http://www.idev101.com/code/Objective-C/Strings/split.html)

# javascript - jQuery：通过锚链接滑动

> ID：11598433
> 
> 赞同：2
> 
> 时间：2012-07-22T07:18:04.550
> 
> 标签：javascript, jquery, hyperlink, anchor, sliding

我加载了这个 jQuery 片段，用于通过 anchorLinks 滑动页面。

[http://www.position-absolute.com/articles/better-html-anchor-a-jquery-script-to-slide-the-scrollbar/](http://www.position-absolute.com/articles/better-html-anchor-a-jquery-script-to-slide-the-scrollbar/)

就我而言，我在页面顶部有一个固定块（位置：固定）。因此，我需要一个增量值才能向下滑动。如果我不使用这样的 delta 值，页面会滑到很深，这样我的 anchorLink 就会被固定块隐藏。

有人知道如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:22:23.527

原始插件：

```
jQuery.fn.anchorAnimate = function(settings) {

    settings = jQuery.extend({
        speed : 1100
    }, settings);   

    return this.each(function(){
        var caller = this
        $(caller).click(function (event) {  
            event.preventDefault()
            var locationHref = window.location.href
            var elementClick = $(caller).attr("href")

            var destination = $(elementClick).offset().top;
            $("html:not(:animated),body:not(:animated)").animate({ scrollTop: destination}, settings.speed, function() {
                window.location.hash = elementClick
            });
            return false;
        })
    })
} 
```

**修改**：

```
jQuery.fn.anchorAnimate = function(settings) {

    settings = jQuery.extend({
        speed : 1100,
          offset: 0
    }, settings);   

    return this.each(function(){
        var caller = this
        $(caller).click(function (event) {  
            event.preventDefault()
            var locationHref = window.location.href
            var elementClick = $(caller).attr("href")

            var destination = $(elementClick).offset().top;
            $("html:not(:animated),body:not(:animated)").animate({ scrollTop: destination+settings.offset}, settings.speed, function() {
                window.location.hash = elementClick
            });
            return false;
        })
    })
} 
```

请注意，我刚刚添加了一个`offset`选项。因此，如果您的固定 div 的高度为 60px，那么只需调用它`$('#whatever').anchorAnimate({offset: 60});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:58:13.923

通过编辑此行必须有解决方案：

```
 window.location.hash = elementClick 
```

更改持续时间值有助于滑动到正确的位置。但是随后窗口在滑动结束时“跳跃”了偏移值。

**解决方案**：我通过删除行解决了这个问题：

```
 window.location.hash = elementClick 
```

# codeigniter - 将 CI 从一个提供商转移到另一个提供商后，我的主页上出现白屏死机

> ID：11598435
> 
> 赞同：0
> 
> 时间：2012-07-22T07:19:13.457
> 
> 标签：codeigniter

**我已经将我的 CodeIgniter 应用程序从我的第一个服务器提供商那里移动到另一个服务器提供商（因为速度更快等），我现在遇到了两个奇怪的 WSOD 问题。**

**当我去我的主页时，我得到一个 WSOD。**

好吧，我试图删除根目录中的 index.html 文件，它神奇地工作。

我的问题是**，如果 index.html 文件作为 CI 包中的默认文件存在，为什么我需要删除它？**

**这是服务器的问题吗？**他们应该改变什么，以便我可以将 index.html 留在我的根目录中？**他们应该启用某些模块还是？**

我认为出于安全原因将 index.html 放在根文件夹中会更好，还是我错了？

我的另一个问题是，当有重定向时，例如在登录时，提交表单。我在点击提交 WSOD 后得到。但只有当验证成功时，所以我假设重定向失败。

**需要注意的一件事。我没有使用刷新作为第二个参数，因为它会在我的本地主机上导致问题 WSOD。**

这会是个问题吗？

哪个 Apache 或 PHP 服务器配置参数可能导致此问题？

**编辑：我试过 redirect('admin', 'refresh'); 并且还重定向('admin', 'location', 301); 但我仍然得到 WSOD :(。**

**编辑 2：这可能是禁用 FastCGI PHP5 的问题吗？**

**编辑 3：我在配置文件中的基本 url 是好的： $config['base_url'] = 'http://www.myproblematicpage.com/'; . 它有斜线和所有需要的东西。我没有使用子文件夹等。**

**编辑 4：我已经更改了这篇文章的标题，以明确在我的第一个提供商上一切正常，但这个问题在转移到另一个提供商后出现**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:41:55.667

好的，所以在 index.php 中启用显示错误（将生产模式更改为开发模式）后，我发现问题出在我的 application/language/english 文件夹中**form_validation_lang.php文件的第一行。**但是在第一个没有 BOM 和 BANG 的 UTF-8 之前我没有看到任何空格！...问题消失了。可能 BOM 是麻烦制造者。但是，我仍然不知道它如何在以前的主机上工作。

# android - 当我只设置一个要更改的单元格时，为什么列表视图中的另一个单元格也会改变颜色？

> ID：11598442
> 
> 赞同：1
> 
> 时间：2012-07-22T07:20:36.947
> 
> 标签：android, listview

我有一个很长的列表视图，我尝试更改特定单元格中的颜色，例如位置 == 0，它工作正常。但是当我向下滚动列表时，之前屏幕外的另一个单元格也发生了变化。任何想法？谢谢您的帮助

```
public class CheckWinNoAdapter extends ArrayAdapter<String> {
private final Context context;
private String[] values;
TextView tvMain;

public CheckWinNoAdapter(Context context, String[] values) {
    // TODO Auto-generated constructor stub
    super(context, R.layout.list_draw, values);
    this.context = context;
    this.values = values;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        convertView = inflater.inflate(R.layout.list_draw, parent, false);
    }

    tvMain = (TextView) convertView.findViewById(R.id.chk_main);
    tvMain.setText(values[position]);

    if(position ==0){
        tvMain.setTextColor(Color.BLUE);
    }

    return convertView; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T07:29:52.520

您通过重用来回收视图`convertView`，您必须始终设置颜色`getView()`，例如

```
if (position == 0) {
    tvMain.setTextColor(Color.BLUE);
} else {
    // set color back to original color
    tvMain.setTextColor(Color.BLACK);
} 
```

见[http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:02:54.447

好的，我现在自己弄清楚，而不是 ding if (convertView == null) {} 我使用

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.list_draw, parent, false);
        TextView tvMain = (TextView) rowView.findViewById(R.id.chk_main);
return rowView; 
```

所以不回收视图，只是在 rowView 中。

# python - 循环内部引用子模块

> ID：11598443
> 
> 赞同：1
> 
> 时间：2012-07-22T07:21:01.227
> 
> 标签：python, python-3.x

# 字

结构如下：一个模块`test`包含两个子模块`test.foo`和`test.bar`.

`test.foo`有一个基于python文档`inc()`使用so的函数是包含它的正确方法，并且可以按预期工作。`test.bar.bar()``from . import bar`

`test.bar`但是，也有一个使用 的功能`inc2`，`test.foo.foo`但是当`from . import foo`使用时，这两个模块都会中断。

实现这一目标的正确方法是什么？我在 python 文档或搜索中几乎找不到。

# 代码

**测试/_*初始化*_.py**

```
#empty 
```

**测试/foo.py**

```
from . import bar

def foo():
    print("I do foo")

def inc():
    print(bar.bar()) 
```

**测试/bar.py**

```
from . import foo

def bar():
    print("I do bar")

def inc2():
    print(foo.foo()) 
```

**错误 1**

```
>>> import test.foo
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "test/foo.py", line 1, in <module>
    from . import bar
  File "test/bar.py", line 1, in <module>
    from . import foo
ImportError: cannot import name foo 
```

**错误 2**

```
>>> import test.bar
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "test/bar.py", line 1, in <module>
    from . import foo
  File "test/foo.py", line 1, in <module>
    from . import bar
ImportError: cannot import name bar 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T07:32:55.673

解决方案是将两个模块所需的代码分解到两个模块都导入的第三个模块中。例如，将`foo`函数放入第三个模块。

以前有很多关于此的 StackOverflow 问题，例如[Python 中的循环导入依赖项](https://stackoverflow.com/questions/1556387/circular-import-dependency-in-python)。另见[http://effbot.org/zone/import-confusion.htm#circular-imports](http://effbot.org/zone/import-confusion.htm#circular-imports)。

# java - 在java中实现集合或数组

> ID：11598444
> 
> 赞同：-1
> 
> 时间：2012-07-22T07:21:12.627
> 
> 标签：java, multidimensional-array, collect

我有一个文本文件，必须对其进行处理。这些行包含国家名称及其一些州，如下所示。我想把它做成一个数组。是否有任何可用的集合可以实现？

```
if(line.contains("India")){
   //add their states to the collections
} 
```

印度

卡纳塔克邦

泰米尔纳德邦

安德拉邦

巴基斯坦

卡拉奇

拉合尔

澳大利亚

堪培拉

阿德莱德

美国

纽约

华盛顿

新泽西州

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T07:25:04.543

您可以使用带有字符串键的 Map：

```
Map<String, List<String> countryStates = new HashMap<String, List<String>>();
if(line.contains("India")){
    List<String> states = new ArrayList<String>();
    states.add("state1");
    // ...
    countryStates.add("India", states);
} 
```

更优雅的解决方案是使用 Object：

```
public class Country {
    private String name;
    private List<String> states;

    // getters, setters
}
List<Country> countries = //... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T08:29:39.037

查看 apache 文件 utils[行迭代器](http://commons.apache.org/io/description.html#Line_iterator)

# javascript - 确保左浮动元素不是最后一行？

> ID：11598451
> 
> 赞同：1
> 
> 时间：2012-07-22T07:22:37.257
> 
> 标签：javascript, html, css

我正在尝试想出一种方法来确保特定的左浮动元素不是连续的最后一个，如果是这种情况，则下降到新行。

我认为处理这个问题的最佳方法是检测元素和窗口右侧之间是否有足够的空间来容纳另一个元素（已知距离，例如 160 像素），如果没有，则删除它元素到下一行。这可能与 CSS 吗？JS 可以，但如果我可以用 CSS 来做到这一点，那将是首选。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:23:36.937

在某种程度上，这是您问题的解决方案 - [jsfiddle.net/avrelian/Dh86D/](http://jsfiddle.net/avrelian/Dh86D/)

```
#special { 
    background-color:green; 
    margin:0 170px 5px 0;
}
#special + .left-float {
    background-color:blue;
    margin-left: -165px;
} 
```

如果您的包装元素的宽度小于浮动元素的两倍宽度，则会失败，因为不会显示特殊元素旁边的浮动元素。

# macos - Opera 是否支持 Mac 上的 NPN_PluginThreadAsyncCall？

> ID：11598456
> 
> 赞同：0
> 
> 时间：2012-07-22T07:23:15.573
> 
> 标签：macos, opera, npapi

我正在使用 Opera 12.00 (MacOSX) 尝试我的插件，似乎函数 NPN_PluginThreadAsyncCall() 不起作用。有没有我遗漏的技巧，或者该功能不受支持？

该插件在 Windows 和 Mac 上的其他浏览器中正常工作（针对 Safari 有一些解决方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:39:03.687

NPN_PluginThreadAsyncCall 从来没有为我使用过 Opera；就此而言，它也不适用于 Safari 5.1。

[FireBreath](http://firebreath.org)使用 NSTimer 来解决问题。

# android - Android：如何通过 HttpPost 以及其他变量将歌曲文件发送到服务器

> ID：11598457
> 
> 赞同：3
> 
> 时间：2012-07-22T07:23:15.260
> 
> 标签：android, eclipse, service, client-server, http-post

我要通过 HttpPost 将歌曲文件发送到服务器。目前我正在使用此代码将数据发送到服务器

```
HttpPost postRequest = new HttpPost();
        try {

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("email",  Splash.pref.getString("userEmail", "")));
            nameValuePairs.add(new BasicNameValuePair("password", Splash.pref.getString("userPassword", "")));

            nameValuePairs.add(new BasicNameValuePair("name", etName.getText().toString()));
            nameValuePairs.add(new BasicNameValuePair("title", ttfSongTitle.getText().toString()));

            postRequest.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // construct a URI objectedsta
            postRequest.setURI(new URI(serviceURL));
        } catch (URISyntaxException e) {
            Log.e("URISyntaxException", e.toString());
        } 
```

但是要将歌曲文件发送到服务器，我在网上找到了这段代码，但是在整合这两者时遇到了问题。

```
String url = "http://yourserver";
File file = new File(Environment.getExternalStorageDirectory(),
        "yourfile");
try {
    HttpClient httpclient = new DefaultHttpClient();

    HttpPost httppost = new HttpPost(url);

    InputStreamEntity reqEntity = new InputStreamEntity(
            new FileInputStream(file), -1);
    reqEntity.setContentType("binary/octet-stream");
    reqEntity.setChunked(true); // Send in multiple parts if needed
    httppost.setEntity(reqEntity);
    HttpResponse response = httpclient.execute(httppost);
    //Do something with response...

} catch (Exception e) {
    // show error
} 
```

请帮助我，以便我可以集成这两者或其他一些解决方案，以便我可以将音乐文件与其他身份验证数据一起发送到服务器。

我正在通过安全的休息服务将数据发送到服务器。

谢谢。

# scala - 用于 Scala 的基于小部件的 Web 框架

> ID：11598460
> 
> 赞同：2
> 
> 时间：2012-07-22T07:23:44.060
> 
> 标签：scala

我正在尝试从 java 转移到 scala 。我基本上是一个 Web 开发人员，我使用 zkoss、vaadin 作为我的框架。scala 是否有基于小部件的框架。完全基于 ajax？我还没有尝试过提升和玩耍需要一些建议是完全基于ajax的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:33:46.260

使用其中一种 Web 框架（Lift、Play 等）尝试[Scala+GWT](http://scalagwt.github.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:12:43.260

Vaadin 框架可以与 Scala 一起使用。甚至还有一个名为[Scaladin](https://github.com/henrikerola/scaladin/wiki)的项目可以帮助您解决这个问题。既然您已经知道了，我建议您尝试使用该框架学习 scala。在你对 scala 有一个很好的了解之后，你应该对选择什么框架有一个更好的基础，以防你想离开 Vaadin。

以下是一些资源：

*   [Scala 和 Vaadin HOWTO](https://vaadin.com/wiki/-/wiki/Main/Scala+and+Vaadin+HOWTO)
*   [斯卡拉丁维基](https://github.com/henrikerola/scaladin/wiki)
*   [使用 Scala 开发 Vaadin 应用程序](http://morevaadin.com/content/develop-vaadin-apps-scala)

# opencv - linux上的无损avi编码

> ID：11598462
> 
> 赞同：6
> 
> 时间：2012-07-22T07:23:54.323
> 
> 标签：opencv, ffmpeg, gstreamer, codec, fourcc

我正在尝试使用 opencv 编写视频。准确地做到这一点对我来说很重要——所以它必须是一个无损编解码器。我在 Ubuntu 12.04 上使用 OpenCV 2.4.1

以前，我使用的是fourcc 代码0。这给了我想要的确切结果，并且我能够完美地恢复图像。

我不确定发生了什么，但在最近的一次更新中（2012 年 7 月 20 日左右），出了点问题，我不再能够用这个fourcc 代码编写文件。我真的不记得它是什么了，但它可能来自进行更新，从我的软件中心删除一些软件，以及我在一般清洁期间所做的一些其他事情......

当我使用 mediainfo (http://www.fourcc.org/identifier/) 检查旧文件时，我看到以下结果：

```
Complete name                            : oldsample.avi
Format                                   : AVI
Format/Info                              : Audio Video Interleave
Format profile                           : OpenDML
File size                                : 1.07 GiB
Duration                                 : 41s 467ms
Overall bit rate                         : 221 Mbps
Writing application                      : Lavf53.5.0
Video
ID                                       : 0
Format                                   : RGB
Codec ID                                 : 0x00000000
Codec ID/Info                            : Basic Windows bitmap format. 1, 4 and 8 bpp     versions are palettised. 16, 24 and 32bpp contain raw RGB samples
Duration                                 : 41s 467ms
Bit rate                                 : 221 Mbps
Width                                    : 640 pixels
Height                                   : 4294966 816 pixels
Display aspect ratio                     : 0.000
Frame rate                               : 30.000 fps
Bit depth                                : 8 bits
Stream size                              : 1.07 GiB (100%) 
```

现在，我看到当我使用 0fourcc 编解码器编写时，程序实际上默认使用 i420 编解码器。这是我现在尝试编写的文件之一的输出：

```
Complete name                            : newsample.avi
Format                                   : AVI
Format/Info                              : Audio Video Interleave
File size                                : 73.0 MiB
Duration                                 : 5s 533ms
Overall bit rate                         : 111 Mbps
Writing application                      : Lavf54.6.100
Video
ID                                       : 0
Format                                   : YUV
Codec ID                                 : I420
Codec ID/Info                            : 8 bit Y plane followed by 8 bit 2x2 subsampled U and V planes.
Duration                                 : 5s 533ms
Bit rate                                 : 111 Mbps
Width                                    : 640 pixels
Height                                   : 480 pixels
Display aspect ratio                     : 4:3
Frame rate                               : 30.000 fps
Compression mode                         : Lossless
Bits/(Pixel*Frame)                       : 12.000
Stream size                              : 72.9 MiB (100%) 
```

这种格式和我尝试使用的其他格式（如 huffyuv HFYU）对我不起作用，因为我最终会得到这样的效果[http://imgur.com/a/0OC4y](http://imgur.com/a/0OC4y) - 你会看到明亮的伪影由于在 HFYU 的情况下，我假设是有损压缩或色度子采样，这应该是无损的。您正在查看的是我的一个视频中的红色通道。当您同时查看所有 3 个通道时，感知效果可以忽略不计，但我必须准确地重建图像。

此外，虽然我可以在 vlc 等媒体播放器中播放我的旧文件，但我突然发现它们与 opencv 完全不兼容。当我尝试使用视频捕获打开旧文件时，打开步骤工作正常，但尝试执行读取操作会导致段错误。此外，当我尝试使用以下任一方式编写时：

```
CV_FOURCC(0,0,0,0)
0 
```

出于某种原因，Opencv 默认为 I420。

接下来，我尝试使用一些替代编解码器。“DIB”似乎对我有用，在 opencv 网站 (http://opencv.willowgarage.com/wiki/VideoCodecs) 上，它被列为“推荐”编解码器。但是，尝试使用它会导致以下消息：

```
OpenCV-2.4.1/modules/highgui/src/cap_gstreamer.cpp:483: error: (-210) Gstreamer Opencv backend doesn't support this codec acutally. in function CvVideoWriter_GStreamer::open

Aborted (core dumped) 
```

我检查了这个编解码器的 opencv 源代码，偶然发现了以下内容：

```
cd OpenCV-2.4.1/modules
grep -i -r "CV_FOURCC" ./*
...
./highgui/src/cap_qt.cpp:    /*if( fourcc == CV_FOURCC( 'D', 'I', 'B', ' ' ))
./highgui/include/opencv2/highgui/highgui_c.h:#define CV_FOURCC_DEFAULT CV_FOURCC('I', 'Y', 'U', 'V') /* Use default codec for specified filename (Linux only) */ 
```

我尝试安装 qt4 并使用 WITH_QT 标志重新配置，但这并没有改变任何东西。我也尝试取消注释那部分代码并重新安装opencv，但这也不起作用。

我的最终目标是以任何方式有效地存储和检索每个像素为 16 位的视频流（如 32float 可以正常工作，然后它不需要完美）。现在我正在将 16 位解压缩到红色和绿色通道中，这就是为什么我需要它是完美的 - 因为红色通道中的 1 错误在最终结果中乘以 256。我没有任何可用的fourcc代码成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:50:19.430

很可能您卸载或更新了编解码器。尝试安装新的编解码器包，或更新您的 ffmpeg 或 gstreamer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:07:51.770

不久前我终于弄清楚了这一点，终于有机会为大家写下来。你可以在这里看到我的（相当老套的）解决方案：

[http://denislantsman.com/?p=111](http://denislantsman.com/?p=111)

* * *

编辑：由于网站关闭，以下总结了可以[从 Wayback Machine](https://web.archive.org/web/20160220010627/http://denislantsman.com/?p=111)中找到的内容：

*   将帧保存为单独的 PNG 图像
*   运行 ffmpeg 生成一个*可以*被 OpenCV 打开的文件：

    ffmpeg -i ./outimg/depth%d.png -vcodec png depth.mov

*   以下 Python 片段可能对保存单个帧很有用

    ```
    std::ostringstream out_depth;
    ...
    expand_depth(playback.pDepthMap, expanded_depth, playback.rows, playback.cols);
    out_depth << root << "/outimg/depth" << framecount << ".png";
    cv::imwrite(out_depth.str(), expanded_depth);
    framecount++; 
    ```

    ...

# qt - Qt - 写入注册表 32/64 问题

> ID：11598466
> 
> 赞同：0
> 
> 时间：2012-07-22T07:24:39.993
> 
> 标签：qt, window, registry, 32bit-64bit

我正在为 Windows 编写一个 Qt 应用程序，并使用 Windows 7 64 位。

应用程序必须写入注册表，我尝试使用`QSettings`类，但正如我在文档中发现的那样： 

> 在 Windows 上，对于在 WOW64 模式下运行的 32 位程序，设置存储在以下注册表路径中：HKEY_LOCAL_MACHINE\Software\WOW6432node\MySW

有没有办法覆盖它并写入：`HKEY_LOCAL_MACHINE\Software\MySW`直接？

澄清：

该应用程序正在写入注册表，写入的密钥将由其他应用程序使用，我不知道它是在 64 位还是 32 位模式下运行。

我知道在 C# 中是可能的，所以在 C++ 中一定是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:28:02.083

请参阅 MSDN 上的这篇文章：

[注册表中的 32 位和 64 位应用程序数据](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724072.aspx)

看来，使用某些 Win32 API，您可能能够更改其行为方式。尽管我不确定为什么默认行为对您不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:38:03.797

我想如果你想在 Qt 中做到这一点，那么这将是最合适的方式：

* * *

[ 来源：[http](http://doc.qt.digia.com/4.7/qsettings.html#accessing-the-windows-registry-directly) ://doc.qt.digia.com/4.7/qsettings.html#accessing-the-windows-registry-directly ]

直接访问 Windows 注册表 在 Windows 上，QSettings 允许您访问系统注册表中使用 QSettings 编写的设置（或支持格式的设置，例如字符串数据）。这是通过使用注册表中的路径和 QSettings::NativeFormat 构造一个 QSettings 对象来完成的。
例如：
`QSettings settings("HKEY_CURRENT_USER\\Software\\Microsoft\\Office", QSettings::NativeFormat);`

All the registry entries that appear under the specified path can be read or written through the QSettings object as usual (using forward slashes instead of backslashes).
For example:
`settings.setValue("11.0/Outlook/Security/DontTrustInstalledFiles", 0);`

# c++ - C++ - [] operatorMap 返回 -1？

> ID：11598470
> 
> 赞同：0
> 
> 时间：2012-07-22T07:24:48.690
> 
> 标签：c++, map

这是否意味着该项目在地图中不存在？我无法找到证明这是真的有据可查的答案。

这是我添加到地图的地方：

```
void Shader::addAttribute(const string attribute) 
{
    attributeList[attribute] = glGetAttribLocation(program, attribute.c_str());
} 
```

我添加到地图：

```
shader.addAttribute("position"); 
```

这是我从地图中检索数据的地方：

```
//An indexer that returns the location of the attribute
GLuint Shader::operator [](const string attribute) 
{
    return attributeList[attribute];
} 
```

当我在调试日志中打印该值时，我得到“位置为 -1”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T07:31:18.537

您插入到地图中的任何键的值都必须为 -1。

为了：

```
std::map<int, int> map;
std::cout << (map [5]); 
```

> 如果 x （在您的情况下为 5）与容器中任何元素的键不匹配，则该函数会使用该键插入一个新元素并返回对其映射值的引用。

你在这里所做的是你已经将值分配`0`给一个键`5`

地图通过键和值工作。您似乎不太了解它们的运作方式。通常你会做这样的事情：

```
std::map<int, int> map;
map[5] = 1; // map now contains one element, with a key of 5 and a value of 1
std::cout << (map [5]); // Prints 1 
```

您已`-1`在此调用中将 a 插入到您的地图中：

```
glGetAttribLocation(program, attribute.c_str()) 
```

因为，`glGetAttribLocation`如**Benjamin**上面所说，*“如果命名的属性变量不是指定程序对象中的活动属性，或者如果名称以保留前缀 'gl* ' 开头，则返回 -1，返回 -1 值。”_ . 您应该执行以下操作：

```
int res = glGetAttribLocation(program, attribute.c_str())
if(res == -1)
{
  // Throw an exception, log an error.. Handle this error somehow.
}
else
{
  // Otherwise store the valid result.
  attributeList[attribute] = res; 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T07:29:42.213

`[]`运算符总是返回一些东西，因为它创建*了*给定键不存在的值（否则返回键的现有映射）。新创建的值将使用数据类型的默认构造函数，无论是什么；这取决于您的模板参数。显然，您选择的数据类型使用 -1 作为其默认值。

编辑：根据更新的问题，`glGetAttribLocation()`必须返回 -1 并且该值最终出现在地图中。

# javascript - Google Maps V3 自定义功能：togglePolygons() 几次切换后极度滞后

> ID：11598473
> 
> 赞同：0
> 
> 时间：2012-07-22T07:25:10.737
> 
> 标签：javascript, google-maps-api-3, memory-leaks, lag, overlays

我有一些相当大的多边形（我用来生成它们的 xml 文件是 400k，只是点数据）。

一旦用户通过单击按钮加载多边形，我将这些多边形存储在一个数组中。

```
var schoolDistPolygon = new google.maps.Polygon({
      paths: points,
      strokeColor: "#FF0000",
      strokeOpacity: 0.8,
      strokeWeight: 3,
      fillColor:color,
      fillOpacity: 0.35
    });
    schoolPolygons.push(schoolDistPolygon); 
```

然后我使用此方法打开和关闭多边形：

```
function toggleOverlays (the_array, mode){
   var arr = eval(the_array);
   if(mode=='hide'){
    for(i=0;i<arr.length;i++)
    {
        arr[i].setMap(null);

    }
         $("#schoolDistButton").bind('click',function(){toggleOverlays(the_array,'show')});
    }

       if(mode=='show'){
    for(i=0;i<arr.length;i++)
    {
        arr[i].setMap(map);

    }
         $("#schoolDistButton").bind('click',function(){toggleOverlays(the_array,'hide')});
    }

} 
```

我也尝试过保存和设置多边形边缘并将不透明度填充为 0，而不是直接删除它们，但我得到了完全相同的延迟。

单击切换按钮几次后，会有极大的延迟。并且浏览器崩溃。这发生在 chrome、firefox，即，opera 中……所有我可以使用的浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:32:38.870

您在每个函数调用上绑定点击事件，但之前绑定的点击仍然存在。

首先解绑点击：

```
$("#schoolDistButton").unbind('click') 
```

# php - 用javascript调用php查询

> ID：11598478
> 
> 赞同：-7
> 
> 时间：2012-07-22T07:26:37.057
> 
> 标签：php, javascript

我的代码

```
<script type="text/javascript" src="http://test.com/test.php"></script> 
```

javascript是用于多域使用的，它必须是这样的，它**不能**改变

我需要让 javascript 使用主机 url 作为查询调用 php

位置.主机名

```
<script type="text/javascript" src="http://test.com/test.php?*location.hostname*"></script> 
```

需要在javascript中放入什么？？？我知道在 php 中放什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T07:31:44.577

您不是在尝试获取字符串“location.hostname”，对吗？您想要 URL 中的实际主机名吗？在这种情况下，您必须将脚本包含为 document.write。

```
document.write("<script language='javascript' src='http://test.com/test.php?q=" + location.hostname + "'><\/script>"); 
```

类似的东西......你为什么要这样做？

# iphone - UItbaleview Cell json内容未在iOS中显示

> ID：11598480
> 
> 赞同：0
> 
> 时间：2012-07-22T07:27:05.980
> 
> 标签：iphone, ios, xcode, uitableview, sbjson

我创建了一个应用程序，它将从 Web 服务中获取信息。到目前为止，我通过使用 NSLog 显示内容来获得它，但是当我尝试在 UITableViewCell 中加载它时它没有显示。这是我的代码

```
#import "TableViewController.h"
#import "JSON.h"
#import "SBJsonParser.h"

@interface TableViewController ()

@end

@implementation TableViewController

@synthesize jsonurl,jsondata,jsonarray;

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
    }

jsonurl=[NSURL URLWithString:@"http://minorasarees.com/category.php"];

jsondata=[[NSString alloc]initWithContentsOfURL:jsonurl];

self.jsonarray=[jsondata JSONValue];

return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this view controller.
// self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [jsonarray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

NSLog(@"1");
NSLog(@"%@",jsonarray);

cell.textLabel.text=[jsonarray objectAtIndex:indexPath.row];

NSLog(@"2");

return cell;
}

-(void)dealloc
{ 
[super dealloc];
[jsonarray release];
[jsondata release];
[jsonurl release];
}
@end 
```

我已经通过添加带有 UITableViewController 的文件来插入 tableviewcontroller ..这会是一个问题..请帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T07:49:09.230

您的 JSON 包含字典数组，因此您将表格视图单元格中的文本设置为字典，该字典无法正常工作，因为需要字符串。这实际上应该崩溃。

要解决该问题，请将您的文本设置为该字典的类别属性：

```
cell.textLabel.text=[[jsonarray objectAtIndex:indexPath.row] valueForKey: @"category"]; 
```

除此之外，您的代码还有其他问题：`[super dealloc]`必须是您在`dealloc`方法中调用的最后一件事。你真的应该使用异步网络代码，用网络阻塞主线程是不可接受的。

# .htaccess - htaccess 目录限制

> ID：11598484
> 
> 赞同：0
> 
> 时间：2012-07-22T07:27:26.957
> 
> 标签：.htaccess, http-status-code-403

我有一个私人文件夹，其中包含我用于网站的所有私人脚本和资源。我在私人文件夹中使用 .htaccess 来

```
 deny from all 
```

它成功运行，给出 403。但是，index.php 使用私有文件夹中的 javascripts 和 css，这意味着它也受到限制。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T08:07:50.853

您需要将 JavaScript 和 CSS 文件移动到公共目录，以便用户可以下载它们，以便他们可以正确查看网页。如果需要，您可以通过在该目录中添加具有以下内容的文件来禁用对公共目录的*浏览：*`.htaccess`

```
Options -Indexes 
```

# listener - javafx 2中媒体播放器对象的状态监听器

> ID：11598486
> 
> 赞同：0
> 
> 时间：2012-07-22T07:28:02.573
> 
> 标签：listener, media, javafx-2

我正在尝试在 Javafx2 中制作带有播放列表的媒体播放器。

我很挣扎，因为我希望播放列表在当前歌曲结束时前进到下一首歌曲。我期待一个可以在我的播放列表类中实现的监听器接口，但所提供的只是一个可运行的接口。

有没有人有使用这个 API 的经验可以帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T14:49:25.653

为 setOnEndOfMedia 方法实现一个 Runnable。

请参阅播放音频文件列表的[示例代码。](https://gist.github.com/1446612)

我认为媒体事件应该由 EventHandlers 而不是 Runnables 处理，并要求更新它们以与 EventHandlers 一起使用，但这需要可能不兼容的 API 更改尚未实现。所以现在只使用 Runnables - 即使它们的方法签名与 JavaFX 系统的其余部分不一致，它们也能正常工作。

# php - PHP MSSQL 别名

> ID：11598488
> 
> 赞同：0
> 
> 时间：2012-07-22T07:28:38.807
> 
> 标签：php, sql, sql-server, aliases

我必须使用所有这些并显示所有这些

```
SELECT CONVERT(INT,cast(reverse(substring(char_data, 263, 2)) as BINARY(2))) FROM CHAR_DATA0 AS strength
SELECT CONVERT(INT,cast(reverse(substring(char_data, 265, 2)) as BINARY(2))) FROM CHAR_DATA0 AS wisdom
SELECT CONVERT(INT,cast(reverse(substring(char_data, 267, 2)) as BINARY(2))) FROM CHAR_DATA0 AS dexterity
SELECT CONVERT(INT,cast(reverse(substring(char_data, 269, 2)) as BINARY(2))) FROM CHAR_DATA0 AS charisma
SELECT CONVERT(INT,cast(reverse(substring(char_data, 271, 2)) as BINARY(2))) FROM CHAR_DATA0 AS intelligence
SELECT CONVERT(INT,cast(reverse(substring(char_data, 273, 2)) as BINARY(2))) FROM CHAR_DATA0 AS constitution 
```

到目前为止，这是我的 PHP 代码，我尝试使用相同的变量 $result 添加另一个 SQL 查询，因此它也可以用于 $results 的提取，但我没有得到任何结果。

```
// USING TOP for TEST
$SQL = "SELECT TOP 10 CONVERT(INT,cast(reverse(substring(char_data, 263, 2)) as BINARY(2))) FROM CHAR_DATA0 AS strength";

// Execute query:
$result = mssql_query($SQL) 
    or die('A error occured: ' . mysql_error());
    echo "<table border='1'>
     <tr>
       <th>STR</th>
       <th>WIS</th>
       <th>DEX</th>
       <th>CHA</th>
       <th>INT</th>
       <th>CON</th>
     </tr>";

// Fetch rows:
while ($row = mssql_fetch_assoc($result)) {
     echo "<tr>";
     echo "<td>" . $row['strength'] . "</td>";
     echo "<td>" . $row['wisdom'] . "</td>";
     echo "<td>" . $row['dexterity'] . "</td>";
     echo "<td>" . $row['charisma'] . "</td>";
     echo "<td>" . $row['intelligence'] . "</td>";
     echo "<td>" . $row['constitution'] . "</td>";
     echo "</tr>";  
    } 
```

任何建议，解决方案？我是新来的。谢谢你。

- - - - - - - - - - - - - - - - - - - - - - - - 编辑：无论如何，我该如何排序？

```
SELECT CONVERT(INT,cast(reverse(substring(char_data, 263, 2)) as BINARY(2))) FROM CHAR_DATA0 AS strength SORT BY char_key WHERE CONVERT(INT, substring(char_data, 261, 1))=0x00 AS permission 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:36:24.250

您正在执行 6 个不同的 sql 查询 atm。所以你必须在你的代码中做 6`mysql_query`和。`mysql_fetch_assoc`只需执行一个查询：

```
SELECT
    CONVERT(INT,cast(reverse(substring(char_data, 263, 2)) as BINARY(2))) AS strength,
    CONVERT(INT,cast(reverse(substring(char_data, 265, 2)) as BINARY(2))) AS wisdom,
    CONVERT(INT,cast(reverse(substring(char_data, 267, 2)) as BINARY(2))) AS dexterity,
    CONVERT(INT,cast(reverse(substring(char_data, 269, 2)) as BINARY(2))) AS charisma,
    CONVERT(INT,cast(reverse(substring(char_data, 271, 2)) as BINARY(2))) AS intelligence,
    CONVERT(INT,cast(reverse(substring(char_data, 273, 2)) as BINARY(2))) AS constitution
FROM CHAR_DATA0 
```

# jquery - 如何通过使用 jquery ui 选项卡单击超链接从一个选项卡导航到另一个选项卡

> ID：11598491
> 
> 赞同：0
> 
> 时间：2012-07-22T07:28:51.263
> 
> 标签：jquery, asp.net, jquery-ui, jquery-plugins

任何人都可以通过使用 JQUERY UI 选项卡单击第一个选项卡中的超链接来帮助我如何从第一个选项卡导航到第二个选项卡吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:34:30.327

您可以参考[jQuery UI Tabs 文档](http://jqueryui.com/demos/tabs/#method-select)来解决您的问题，它被很好地提及

```
var $tabs = $('#example').tabs(); // first tab selected

$('#my-text-link').click(function() { // bind click event to link
    $tabs.tabs('select', 2); // switch to third tab
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:35:26.363

[您可以使用 select方法](http://jqueryui.com/demos/tabs/#method-select)按照索引在选项卡之间自由切换。一个例子：

```
$("#tabs").tabs('select', 1); 
```

将此片段附加到第一个选项卡内容上链接的单击处理程序。

**例子：**

对于这样的链接：

```
<a href="some.html" id="nextTab">Go to Next Tab</a> 
```

jQuery：

```
$("#nextTab").click(function() {
     $("#tabs").tabs('select', 1);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T07:35:32.970

请使用选择方法[http://jqueryui.com/demos/tabs/#method-select](http://jqueryui.com/demos/tabs/#method-select)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T07:35:44.877

假设您初始化了您的选项卡，例如：

```
$('#tabs').tabs(); 
```

您可以通过编程选择/导航到不同的选项卡，例如：

```
$('#tabs').tabs('select', index);
// Where index start from 0, 
// 0 for the first tab, 1 for the second, and 2 for the third and so on 
```

假设您在第一个选项卡中有一个链接，要在单击时导航到第二个选项卡，您可以执行以下操作：

```
$('#link_in_first_tab').click(function (event) {
  $('#tabs').tabs('select', 1);
  event.preventDefault();
}); 
```

更多API使用请参考jQUery UI页面：http: [//jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

# android - android应用程序在启动时崩溃

> ID：11598500
> 
> 赞同：0
> 
> 时间：2012-07-22T07:31:22.383
> 
> 标签：android, crash, runtime

我正在制作一个简单的计算器，并在运行时通过 java 动态添加按钮

我的 Java 文件是

```
package com.example.calculator;

import android.os.Bundle;
import android.app.Activity;
import android.view.*;
import android.widget.*;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

    Button [] button = new Button[17];
    TextView input_field = new TextView(null);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        this.setlayout();        
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private void setlayout(){

        Display display = getWindowManager().getDefaultDisplay(); 
        int width = display.getWidth();
        int height = display.getHeight();
        int x = 4;
        height -= x ;
        input_field.setHeight(x);
        input_field.setWidth((width-x));
        height /= 4;
        width /= 4;
        for(int i=0;i<16;i++)
            {   
                button [i] = new Button(null);
                button[i].setHeight(height);
                button[i].setWidth(width);
            }
        button [16] = new Button(null); 
        button[16].setHeight(x);
        button[16].setWidth(x);

        LinearLayout top = new LinearLayout(null);
        top.addView(input_field);
        top.addView(button[16]);

        LinearLayout row1 = new LinearLayout(null);
        row1.addView(button[8]);
        row1.addView(button[9]);
        row1.addView(button[10]);
        row1.addView(button[12]);

        LinearLayout row2 = new LinearLayout(null);
        row2.addView(button[7]);
        row2.addView(button[6]);
        row2.addView(button[5]);
        row2.addView(button[13]);

        LinearLayout row3 = new LinearLayout(null);
        row3.addView(button[4]);
        row3.addView(button[3]);
        row3.addView(button[2]);
        row3.addView(button[14]);

        LinearLayout row4 = new LinearLayout(null);
        row4.addView(button[0]);
        row4.addView(button[1]);
        row4.addView(button[11]);
        row4.addView(button[15]);

        LinearLayout main = (LinearLayout) findViewById(R.id.main_layout);

        main.setVisibility(1);
        main.setOrientation(1);
        main.addView(top);
        main.addView(row1);
        main.addView(row2);
        main.addView(row3);
        main.addView(row4);

        main.setVisibility(0);
    }
} 
```

这是我的 XML 文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/main_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</LinearLayout> 
```

这是我的 logCat 错误

```
07-22 12:58:42.725: E/AndroidRuntime(29430): FATAL EXCEPTION: main
07-22 12:58:42.725: E/AndroidRuntime(29430): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.calculator/com.example.calculator.MainActivity}: java.lang.NullPointerException
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2675)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2769)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.app.ActivityThread.access$2500(ActivityThread.java:129)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2117)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.os.Looper.loop(Looper.java:143)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.app.ActivityThread.main(ActivityThread.java:4717)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at java.lang.reflect.Method.invokeNative(Native Method)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at java.lang.reflect.Method.invoke(Method.java:521)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at dalvik.system.NativeStart.main(Native Method)
07-22 12:58:42.725: E/AndroidRuntime(29430): Caused by: java.lang.NullPointerException
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.view.ViewConfiguration.get(ViewConfiguration.java:216)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.view.View.<init>(View.java:1826)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.view.View.<init>(View.java:1873)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.widget.TextView.<init>(TextView.java:432)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.widget.TextView.<init>(TextView.java:426)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.widget.TextView.<init>(TextView.java:421)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at com.example.calculator.MainActivity.<init>(MainActivity.java:12)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at java.lang.Class.newInstanceImpl(Native Method)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at java.lang.Class.newInstance(Class.java:1429)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-22 12:58:42.725: E/AndroidRuntime(29430):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2667)
07-22 12:58:42.725: E/AndroidRuntime(29430):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T07:36:58.570

为什么将 null 传递给 LinearLayout？它要求您将活动的上下文传递给它（在您的情况下是`this`）。对于按钮和您选择在代码中动态创建的任何其他视图也是如此。

另外，看看这个答案，因为我怀疑一旦你用 替换所有空值，你就会遇到另一个问题`this`，这就是你的视图不知道有多宽或多高的问题...... [在 a 中设置边距以编程方式线性布局](https://stackoverflow.com/questions/2481455/set-margins-in-a-linearlayout-programmatically)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T07:44:31.367

尝试改变

```
TextView input_field = new TextView(null); 
```

至

```
private TextView input_field = new TextView(MainActivity.this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T07:38:41.503

最后应该调用 setContextView 。尝试先执行 setLayout 并在 LinearLayout 类型的“主”对象上调用 SetContextView。

另外，您可以发布引发错误的哪一行？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T03:10:20.187

在这里，您有从按钮 [0] 到按钮 [16] 的按钮数组

然后将 for 循环从 i<16 更改为 i<=16

**for(int i=0;i<=16;i++)**

# java - 根据用户输入打印不同的句子

> ID：11598503
> 
> 赞同：0
> 
> 时间：2012-07-22T07:32:18.170
> 
> 标签：java, printing, if-statement, input

我想知道如何根据用户输入打印特定的句子。

在下面的场景中，如果用户输入“B”，我想打印“您已选择 B”，但是如果用户选择 CI，则希望打印“您已选择 C”。

```
import java.util.Scanner;
public class Trial extends Register
{

    //I want to load the register which will be option B

    public static void main (String[] args)
     {
        Scanner input = new Scanner(System.in);
        System.out.println("Enter A to make a purchase & receive your change");
        System.out.println("Enter B to load the Register");
        System.out.println("Enter C to write the contents of the Register to a 
        web Page");
        System.out.println("Enter D to exit the program"); 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:52:31.633

怎么样：

```
String input = // read input from scanner;
if(input.length() == 1) {
    switch(input.charAt(0)) {
    case 'A':
        // make purchase
        break;
    case 'B':
            // load register
            break;
    // Similarly case C and D
    default:
            // possibly invalid input as well

    }
} else {
    System.out.println("Invalid input");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:44:59.830

如果您使用的是 Java 7+，则可以使用[switch 语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)。

如果使用较早的 vrsion，则需要使用多个[if 语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html)。

至于扫描仪，您可以阅读[本教程](http://docs.oracle.com/javase/tutorial/essential/io/scanning.html)以开始使用并查看[此示例](https://stackoverflow.com/questions/5966599/java-scanner-string-input)。

# c++ - OpenCV 2.3 C++ 基础图像处理

> ID：11598504
> 
> 赞同：3
> 
> 时间：2012-07-22T07:32:24.393
> 
> 标签：c++, image-processing, opencv, computer-vision

打开图像的最佳方法是什么，手动将像素操作为浮点数，将像素归一化为 8 位 int 值（0-255）并保存新图像。

我发现延迟代码使用不同的变量类型和命令，我应该使用 Iplimage 还是 mat、imread 等等...

我真的很感激一个代码示例

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T09:02:11.370

您可能需要查看 OpenCV 文档中提供的教程部分：[OpenCV 教程](http://docs.opencv.org/doc/tutorials/tutorials.html)。尤其是**“OpenCV 简介”**和**“核心模块。核心功能”**是你应该最感兴趣的章节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:01:38.273

参考[这里](http://docs.opencv.org/doc/tutorials/introduction/load_save_image/load_save_image.html#load-save-image)。这给出了基本的代码示例。

# c++ - Char到int的转换？

> ID：11598507
> 
> 赞同：3
> 
> 时间：2012-07-22T07:32:50.290
> 
> 标签：c++, winapi

我正在尝试从 3 个编辑框中获取 rgb 值，以便在运行时更改窗口的颜色。下面的代码没有给我我需要的数值。

```
 const int bufferSize = 1024;
        char fade1Buffer[bufferSize] = "";
        char fade2Buffer[bufferSize] = "";
        char fade3Buffer[bufferSize] = "";

        HWND Editbox1 = GetDlgItem(hWnd,IDC_MAINFADE1_EDIT); 
        SendMessage(Editbox1, WM_GETTEXT, (WPARAM)bufferSize, (LPARAM)fade1Buffer);
        HWND Editbox2 = GetDlgItem(hWnd,IDC_MAINFADE2_EDIT);
        SendMessage(Editbox2, WM_GETTEXT, (WPARAM)bufferSize, (LPARAM)fade2Buffer); 
        HWND Editbox3 = GetDlgItem(hWnd,IDC_MAINFADE3_EDIT);
        SendMessage(Editbox3, WM_GETTEXT, (WPARAM)bufferSize, (LPARAM)fade3Buffer);

        //fill our main window background
        FadeVert(hWnd, RGB(fade1Buffer, fade2Buffer,fade3Buffer), RGB(255, 255, 255), (int) Client_Rect.top, 
            (int) Client_Rect.left, (int) Client_Rect.right, (int) Client_Rect.bottom); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T07:38:40.077

[atoi()](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)函数将char* 转换为 int。它在`<cstdlib>`

```
int atoi ( const char * str ); 
```

**在这种情况下，**

```
int i = atoi(fade1Buffer); 
```

另请参阅@Keith Thompson 和@Chris 提到的[strtol() 。](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)它使用起来有点困难，但它可以更好地处理错误。

```
 char * pEnd;
   long int i = strtol(fade1Buffer,&pEnd, 10);//10 is the base (decimal in this case)
   //pEnd == fade1Buffer if there is an error. 
```

**如果将其转换为 C++ 样式的 std:: 字符串，还可以使用其他几个函数**

```
#include <string>
std::string str(fade1Buffer);
int i = stoi(test); 
```

参考：[http ://en.cppreference.com/w/cpp/string/basic_string/stol](http://en.cppreference.com/w/cpp/string/basic_string/stol)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T09:29:58.650

在 Win32 中有一个名为 GetDlgItemInt 的函数。请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms645485%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645485%28v=vs.85%29.aspx)。

这将减少 1/3 的代码行数以及将字符串转换为数字的所有麻烦。此外，您应该小心 WM_GETTEXT 的 LPARAM。如果您定义了 UNICODE，则参数应为 wchar_t*，而 ANSI 版本应为 char*。

# ubuntu - 如何在 Ubuntu 10.04 上安装 boost 1.40？

> ID：11598508
> 
> 赞同：1
> 
> 时间：2012-07-22T07:32:51.383
> 
> 标签：ubuntu, boost

我已经从[http://sourceforge.net/projects/boost/files/boost/1.40.0/boost_1_40_0.tar.gz/download下载了文件](http://sourceforge.net/projects/boost/files/boost/1.40.0/boost_1_40_0.tar.gz/download)

但是，我不知道下载文件后如何安装它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:39:17.563

请按照以下说明正确设置 Boost C++： [链接到“入门”手册](http://www.boost.org/doc/libs/1_40_0/more/getting_started/unix-variants.html)。

请注意，您下载的版本不是最新版本。Boost C++ 已经达到了 1.50 版本。

# javascript - 在显示 jQuery Mobile 页面之前让 Google 地图正确加载

> ID：11598509
> 
> 赞同：2
> 
> 时间：2012-07-22T07:32:53.060
> 
> 标签：javascript, jquery, css, jquery-mobile, google-maps-api-3

**问题：**
我在 jQuery Mobile 文档中有一个对话框页面，其中包含一个用于显示位置的小型 Google 地图。我想在加载对话框页面之前加载地图。如：

```
$("#dialogPage").bind("pagebeforeshow", function() {
    initializeSmallMap();
}); 
```

但是，只要包含`div`的地图具有`display`none 属性，Google Maps 就会无法正常工作（请参阅[Google Maps Display:None Problem](https://stackoverflow.com/questions/4700594/google-maps-displaynone-problem)）。而且由于这个函数是在页面实际加载之前执行的，所以包含`div`自然有一个`display`属性为none。

现在，显然，有一个简单的解决方案。我需要做的就是在页面显示后初始化地图，这使得它`div`具有块的显示属性：

```
$("#dialogPage").bind("pageshow", function() {
    initializeSmallMap();
}); 
```

但是，由于对话框已经加载，地图出现时会出现烦人的、明显的闪烁。

**问题：**
如何消除所描述的闪烁？

**可能的解决方案：**

*   在加载对话框之前，使`div`包含的地图具有`display`块属性。如果我没有使用 jQuery Mobile，那么实现这个效果会很简单，而且在需要时仍然隐藏地图：

    ```
    position: absolute;
    left: -10000px;
    display: block; 
    ```

    但是，由于 jQuery Mobile 会自动覆盖页面样式，我不知道如何让它工作。

    *   明确告诉 Google Maps API`div`包含地图的大小。我用谷歌搜索了这个选项，但没有运气，但考虑到我糟糕的谷歌搜索技能，如果这真的可行，我不会完全感到惊讶。*   其他 - 我对如何消除闪烁效果的任何想法持开放态度。以上只是一些可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:47:25.130

```
 $("#dialogPage").promise().done(function() {
   //Code to execute when map is loaded.
 }); 
```

你可以试试看。只需在执行 promise().done 时使用 attr() 隐藏元素并使用 attr() 显示它:) 而且您不应该使用显示属性。

参考 -[承诺](http://api.jquery.com/promise/)

# ruby-on-rails - 使用 Pry 调试 before_filter

> ID：11598518
> 
> 赞同：1
> 
> 时间：2012-07-22T07:34:33.970
> 
> 标签：ruby-on-rails, ruby, pry

我的控制器中有一个 before_filter：

```
 before_filter :authenticate_user!, :except => [:show,:index]

  def create
    #method code
  end 
```

我的问题是：如何使用 pry 为 create 方法调试 before_filter 方法（authenticate_user！）。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T09:15:30.297

```
before_filter :bla

def bla
  binding.pry
  authenticate_user!
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:51:59.497

我最终禁用了 before_filter 并添加了 authenticate_user！方法到我的创建方法的第一行 - 它几乎成功了。

# racket - 球拍模块合同让我感到困惑

> ID：11598523
> 
> 赞同：3
> 
> 时间：2012-07-22T07:35:55.330
> 
> 标签：racket

模块：test-define.rkt

```
#lang racket

(provide test)

(provide (contract-out [add-test! (-> void)]))

(define test 0)

(define (add-test!)
  (set! test (add1 test))) 
```

主程序：act.rkt

```
#lang racket

(require "test-define.rkt")

(printf "~a~%" test)

(add-test!)

(printf "~a~%" test) 
```

运行 act.rkt，我得到：

```
0
1 
```

这就是我要的。

但是，如果我在 test-define.rkt 中更改合同：

```
(provide test) 
```

改成

```
(provide (contract-out [test integer?])) 
```

然后我再次运行 act.rkt，我得到：

```
0
0 
```

为什么？我无法更改测试值。

如果我提供一个 get func，它会再次正常。

```
(provide (contract-out [get-test (-> integer?)]))

(define (get-test)
  test) 
```

如果测试的类型更改为哈希映射，则始终是正常的。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T09:15:26.160

我注意到在 test-define.rkt 你有这条线

```
(set! test3 (add1 test)) 
```

应该`test3`是`test`？

这可以解释为什么你看到两个零（测试从未改变）。

编辑 2

为方便起见，我将您的两个模块放在同一个文件中并更改了测试合同：

```
#lang racket
(module test-define racket 
  (provide test)
  ; (provide (contract-out [test integer?]))
  (provide get-test)
  (provide (contract-out [add-test! (-> void)]))
  (define test 0)
  (define (add-test!)
    (set! test (add1 test)))
  (define (get-test)
  test))

(module ack racket
  (require (submod ".." test-define))
  (printf "~a~%" test)
  (add-test!)
  (printf "~a~%" test))

(require (submod "." ack)) 
```

现在我看到了 0 1 vs 0 0 输出，就像你一样。

嗯。为什么？

好。如果我们将提供形式更改为根本不使用合约，则输出为 0 1。

添加合同不应该改变这种行为（我认为）。也许是一个错误？

[http://pre.racket-lang.org/docs/html/guide/contracts-gotchas.html?q=contract&q=ignore](http://pre.racket-lang.org/docs/html/guide/contracts-gotchas.html?q=contract&q=ignore)

说：

> 合同库假定通过合同输出导出的变量没有分配给，但不强制执行。因此，如果您尝试设置！那些变量，你可能会感到惊讶。...snip... Moral：这是我们将在未来版本中解决的错误。

# javascript - HTML/JavaScript 中的部分渲染

> ID：11598530
> 
> 赞同：22
> 
> 时间：2012-07-22T07:37:52.667
> 
> 标签：javascript, html, partial

`header.html`我有一些 HTML 文件，我想将它们中的每一个部分呈现在另一个 HTML 文件中，例如`footer.html`为了观察 DRY 概念。

HTML 文件应如下所示：

```
<!--render header.html-->
<div>
    Content
</div>
<!--render footer.html--> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-22T07:46:47.207

如果您只是使用纯 HTML 和 Javascript，您可以包含 jQuery 并使用 AJAX 请求在您的主页中加载另一个 HTML 页面的内容。

看看这里的 jQuery 'load()' 函数：

[http://api.jquery.com/load/](http://api.jquery.com/load/)

假设您有以下html：

```
<div id="header"></div>
<div id="content"></div>
<div id="footer"></div> 
```

你的用法看起来像这样：

```
$('#header').load('header.html');
$('#footer').load('footer.html'); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-22T07:43:23.747

[这是一个链接](http://webdesign.about.com/od/ssi/a/aa052002a.htm)（我可能会添加来自 Google 的第一个链接），它解释了如何以各种语言执行此操作。

另请注意，某些 IDE 会为您处理此问题。Dreamweaver 就是一个例子；在 ASP.NET 中有母版页；等等。

PHP：

```
<?php
require($DOCUMENT_ROOT . "path to file/include-file.html");
?> 
```

ASP：

```
<!--#include file="path to file/include-file.html"--> 
```

JS：

> JavaScript 是在您的网站页面中包含 HTML 的另一种方式。这具有不需要服务器级编程的优点。但它比服务器级别的包含方法要复杂一些。
> 
> 1.  将站点常见元素的 HTML 保存到 JavaScript 文件中。在此文件中写入的任何 HTML 都必须使用 document.write 函数打印到屏幕上。
>     
>     
> 2.  使用脚本标记将 JavaScript 文件包含在您的页面上。
>     <script type="text/javascript" src="文件路径/include-file.js">
>     
>     
> 3.  在要包含该文件的每个页面上使用相同的代码。

**请注意**，JS 版本**并不**理想。
1\. JS 可能在浏览器中被禁用或不可用。
2\. 页面不会一次全部渲染/加载。

另外，我不认为 DRY 真的很重要。考虑使用将为您创建页面模板的 IDE（例如 Dreamweaver）。

如果您足够勇敢（并且有点过时）并且无法使用上述任何方法，请考虑为您的内容使用 iframe：

```
<html>
    <body>
      <div>my header</div>
      <iframe src="mycontent.html" />
      <div>my fooder</div>
    </body>
</html> 
```

**免责声明**
我宁愿砍掉自己的双手，也不愿实现 iframe 或 JS 方法。深入考虑您是否真的**需**要这样做。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-22T07:48:41.343

如果您正在寻找仅是 html/js 的客户端解决方案，您应该查看 AngularJS 及其`ngInclude`语法。

[http://docs.angularjs.org/#!/api/ng.directive:ngInclude](http://docs.angularjs.org/#!/api/ng.directive:ngInclude)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-22T07:44:06.563

如果您正在使用服务器端编程，则可以使用服务器端包含，否则如果您的主机文件是 HTML 文件，则可以使用 html SCRIPT 标签来包含 header.html 和 footer.html 文件。不过，我不确定部分呈现 HTML 文件的真正含义是什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-12T00:24:33.580

正如其他人所说，它似乎无法单独使用 HTML 完成。如果您使用 Java，可以在服务器端完成的另一种方法是使用 Thymeleaf。

例如，在每个页面上添加一个主菜单，使用 `<div th:replace="fragments/mainmenu.html"></div>`. 那么 mainmenu.html 可能只包含一堆 div。片段不需要是完整的 HTML 页面。

# android - 什么是最好的使用 android 与 xml

> ID：11598537
> 
> 赞同：0
> 
> 时间：2012-07-22T07:39:18.360
> 
> 标签：android

我正在使用 web 服务在 android 中工作，我只是混淆了 xml 解析器的方式，httpclient 和 xmlpullparser SAXParser 之间的差异以及与 xml webservices 一起使用来上传更新和解析数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:02:13.827

内置解析器的替代方案是 Simple XML (http://simple.source forge.net)。我真的很喜欢在 Android 上使用 XML，因为您不必担心低级解析器逻辑。另外，它非常轻巧。

# eclipse - Eclipse中运行到光标的快捷键是什么？

> ID：11598538
> 
> 赞同：8
> 
> 时间：2012-07-22T07:39:49.420
> 
> 标签：eclipse, shortcuts

Eclipse Indigo 中 Run to cursor 的快捷键是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-22T07:47:03.410

你在 Eclipse 中需要的函数叫做：**Run to Line**，你应该在调试透视图中用 : `CTRL`**+调用它。**`R`

# java - java - 根据分隔符拆分字符串但仅在括号外？

> ID：11598539
> 
> 赞同：2
> 
> 时间：2012-07-22T07:39:56.660
> 
> 标签：java, string

我想根据分隔符拆分字符串，但只能在括号外。是否有任何库（内置或非内置）可以这样做？示例：如果分隔符为“:”，则：字符串“a:b:c”应拆分为“a”、“b”、“c” 字符串“a(b:c):d”应拆分为“a (b:c)","d"

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:28:34.203

其他评论者是对的，您可能最好使用语法库。但是，如果这是一次性的事情，而您宁愿快速处理它，则该算法应该以清晰的方式处理它，并将处理嵌套括号。注意：我假设您的括号是平衡的，即没有右括号之前没有左括号。

```
int parenDepth = 0;
int start = 0;
List<String> splits = new ArrayList<String>();

for(int i = 0; i < str.length(); i++)
{
    char ch = str.get(i);
    if(ch == '(')
         parenDepth++;
    else if(ch == ')')
         parenDepth--;
    else if(parenDepth == 0 && ch ==',')
    {
         if(start != i) // comment out this if if you want to allow empty strings in 
                        // the splits
             splits.add(str.substring(start, i));
         start = i+1;
    }
}

splits.add(str.substring(start)); 
```

# android - 使文本视图接触活动边界

> ID：11598541
> 
> 赞同：0
> 
> 时间：2012-07-22T07:40:09.413
> 
> 标签：android

我想用颜色填充文本视图周围的整个空间，但由于文本较少，它会填充一些并在其周围留下一些空间。图像链接在问题 [http://img651.imageshack.us/img651/817/capturetxnw 下方。 PNG](http://img651.imageshack.us/img651/817/capturetxnw.png)

我想要这个：

[http://imageshack.us/photo/my-images/171/capture1xw.png/](http://imageshack.us/photo/my-images/171/capture1xw.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:04:02.107

在您的 layout.xml 文件中，设置 textview 布局参数，如下所示：

```
<TextView
 android:id="@+id/myTextView"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content" /> 
```

关键部分是：android:layout_width="fill_parent"。这基本上会填满整个屏幕并有效解决您的问题。如果您需要任何进一步的说明，请询问！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:15:20.703

使您的滚动视图宽度为`fill_parent`

# php - 获取表单输入以在 php 页面中使用

> ID：11598550
> 
> 赞同：0
> 
> 时间：2012-07-22T07:43:33.160
> 
> 标签：php, jquery, html, dom, post

我正在使用下面的 jquery 代码在单击按钮时在我的表单中创建新条目。

```
 <script type="text/javascript">
    $(document).ready(function() {
        $('#btnAdd').click(function() {
            var num     = $('.clonedInput').length;
            var newNum  = new Number(num + 1);

            var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

            newElem.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);
            $('#input' + num).after(newElem);
            $('#btnDel').attr('disabled','');

            if (newNum == 3)
                $('#btnAdd').attr('disabled','disabled');
        });

        $('#btnDel').click(function() {
            var num = $('.clonedInput').length;

            $('#input' + num).remove();
            $('#btnAdd').attr('disabled','');

            if (num-1 == 1)
                $('#btnDel').attr('disabled','disabled');
        });

        $('#btnDel').attr('disabled','disabled');
    });
</script> 
```

我的html代码是

```
<form id="entry" method="post" action="collect.php">
<div id="input1" style="border: solid 2px #000; width: 80%; margin-bottom:4px;" class="clonedInput">
<table>
<tr>
<td><img src="arrow.gif"/></td>
<td>
    <table>
        <tr>
            <td><b>I/P: </b></td>
            <td><input type="text" name="ipname" id="name1" /></td>

            <td><b>Console I/P: </b></td>
            <td><input type="text" name="consolename" id="name1" /></td>

            <td><b>Console Port: </b></td>
            <td><input type="text" name="portname" id="name1" /></td>

            <td><b>Rack Number: </b></td>
            <td><input type="text" name="rackname" id="name1" /></td>
        </tr>
        <tr>
            <td><b>Serial Number: </b></td>
            <td><input type="text" name="serialname" id="name1" /></td>

            <td><b>Login Machine: (must get dropdown from db)</b></td>
            <td><select name="logmacname">
            <option value="volvo">Volvo</option>
            <option value="saab">Saab</option>
            <option value="mercedes">Mercedes</option>
            <option value="audi">Audi</option>
            </select></td>

            <td><b>Machine Username: </b></td>
            <td><select name="usermac" >
            <option value="">Select:</option>
            <option value="cisco">cisco</option>
            <option value="lab">lab</option>
            </select></td>

            <td><b>Machine Password: </b></td>
            <td><select name="macpass" >
            <option value="">Select:</option>
            <option value="cisco">cisco</option>
            <option value="lab">lab</option>
            </select></td>
        </tr>  
    </table>
</td>
</tr>
</table>            
</div>

<div>
    <input type="button" id="btnAdd" value="add another entry" />
    <input type="button" id="btnDel" value="remove entry" />
</div>
<input type="submit" value="Click to submit!">
</form> 
```

我现在需要将此表单发送到我`collect.php`的数据库存储。我知道我可以访问表单值`$_POST`并使用`isset()`函数来检查它们，但是我如何访问表单中的每个条目并使用它。只有我的 div 使用新名称进行更新，但输入字段具有相同的名称。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:06:31.140

首先，每个元素只能有一个唯一 ID，而`id="name1"`所有元素都有，因此要么更改每个元素的 ID，要么将其删除或将其更改为`class="name1"`.

在您的示例中没有`form`标签，我不知道是因为您从示例中省略了它还是因为它不存在，无论如何您需要在包装 div 周围添加一个表单标签：

```
<form action="collect.php" method="post">
...
</form> 
```

您还需要一个提交按钮：

```
<input type="submit" value="Submit"/> 
```

然后一旦单击提交按钮，您的 collect.php 将被自动调用，然后您可以从 post 数组中访问参数：

```
$ipName = $_POST['ipname'];
$consolename = $_POST['consolename'];
... 
```

# jquery - jQuery - 如何使用单选输入显示/隐藏元素？

> ID：11598551
> 
> 赞同：-1
> 
> 时间：2012-07-22T07:43:32.460
> 
> 标签：jquery

我遵循 html 结构：

```
 <div id="options">
    <input type="radio" id="option0" value="option0" checked='checked' /><label>All</label>
    <input type="radio" id="option1" value="option1" /><label>Option 1</label>
    <input type="radio" id="option2" value="option2" /><label>Option 2</label>
    <input type="radio" id="option3" value="option3" /><label>Option 3</label>
 </div>

 <p id="sentence1">This is an example of sentence 1</p>
 <p id="sentence2">This is an example of sentence 2</p>
 <p id="sentence3">This is an example of sentence 3</p> 
```

我想在选中“All”选项时显示所有句子，并在选中“Option 1”时显示#sentence1 ..等等。

任何帮助，将不胜感激。

谢谢！里夫基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:01:33.557

试试这个 ：

```
<div id="options">
    <input type="radio" id="option0" value="option0" name="options" checked='checked' /><label>All</label>
    <input type="radio" id="option1" value="option1" name="options" /><label>Option 1</label>
    <input type="radio" id="option2" value="option2" name="options" /><label>Option 2</label>
    <input type="radio" id="option3" value="option3" name="options" /><label>Option 3</label>
 </div>

 <p id="sentence1">This is an example of sentence 1</p>
 <p id="sentence2">This is an example of sentence 2</p>
 <p id="sentence3">This is an example of sentence 3</p> 
```

查询：

```
$(function(){
var allSentences = $("p[id^=sentence]");
$("INPUT[type=radio]").click(function(){

    var _this = $(this);
    if(_this.val()=="option0"){
           allSentences.show();
    }else{
        allSentences .hide();
        $("#"+_this.val().replace("option", "sentence")).show();
    }

});
}); 
```

检查这个jsfiddle [http://jsfiddle.net/7u3uS/3/](http://jsfiddle.net/7u3uS/3/)

# php - 一个带有 PHP 的 Sql 函数

> ID：11598552
> 
> 赞同：-3
> 
> 时间：2012-07-22T07:43:47.170
> 
> 标签：php, mysql

我正在制作一个在管理页面上添加日志的基本功能。（请忽略这些值）。

```
$sql = "INSERT INTO logs(query,userid,time,page) VALUES('$query',$userid,NOW(),'$pagename')"); 
```

我只是想把它放在这样的功能中

```
function myfunctionforlogs(){
 $sql = "INSERT INTO logs(query,userid,time,page)  VALUES('$query',$userid,NOW(),'$pagename')");
 } 
```

在其他页面中，我希望将其称为

```
myfunctionforlogs(); 
```

我该怎么办？谢谢！

对大家造成的误解深表歉意。我有大约 10 个管理页面，我有一个记录日志的表。标准查询是我在上面发布的。现在，我不想在每个页面中都有该代码，所以我有一个名为“func.php”的文件。我希望我可以在一个函数中进行该查询，这样我就可以在我想在其他文件中调用该函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:52:05.213

你的问题真的很难理解，但也许你想要这个？

```
function myfunctionforlogs($query, $userid, $pagename){
    $sql = "INSERT INTO logs(query,userid,time,page)  VALUES('$query',$userid,NOW(),'$pagename')");
    execute_sql($sql); //<-- another function, that actually runs the sql against the DB
} 
```

现在你可以在任何你想记录脚本的地方调用你的函数：

```
myfunctionforlogs('select * from test', 'jimmy', 'index.php'); 
```

顺便提一句。[CamelCase](http://searchsoa.techtarget.com/definition/CamelCase)是一种更易读的函数名和标识符格式。

# objective-c - 更改整个 NSWindow 类的背景颜色

> ID：11598553
> 
> 赞同：0
> 
> 时间：2012-07-22T07:43:50.187
> 
> 标签：objective-c, xcode, macos

我目前正在设置菜单项以更改我的 Mac 应用程序中“单个”窗口的颜色。

```
[_window setBackgroundColor : [NSColor redColor]]; 
```

与“_window”相比，有没有办法在我的所有窗口中更改该菜单项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:50:27.497

你可以使用的`windows`方法`NSApplication`。

这可能会这样做：

```
[[NSApp windows] makeObjectsPerformSelector:@selector(setBackgroundColor:) withObject:[NSColor redColor]]; 
```

（或者您可能需要一个 for 循环来更仔细地检查每个窗口。）

# java - 反转字符串

> ID：11598556
> 
> 赞同：0
> 
> 时间：2012-07-22T07:44:15.080
> 
> 标签：java, string, stringtokenizer

下面的程序应该这样做：

当用户输入时： `The quick brown fox. Jumps over. The lazy dog.`
它应该输出：`God yzal eth. Revo spmuj. Xof nworb kciuq eht.`

但是当用户输入时：`The quick brown fox. Jumps over. The lazy dog.`
它输出：`xof nworb kciuq ehT. revo spmuJ . god yzal ehT .`

所以这是我的代码：

```
import java.util.*;
public class Reverse {
public static void main( String args[] ) {
    String paragraph;
    Scanner input = new Scanner (System.in);

    System.out.print("Enter a paragraph: ");
    paragraph = input.nextLine();
    paragraph = paragraph.trim();
    StringTokenizer tokens = new StringTokenizer(paragraph, ".");
    while (tokens.hasMoreTokens()){
        String ss = tokens.nextToken();
        for (int i = ss.length() - 1; i>=0; i--) {
            System.out.print(ss.charAt(i));
        }
        System.out.print(". ");
    }
    System.out.println();
}
} 
```

我也想到了这个：

```
import java.util.*;

public class Reverse{

    public static void main(String[] args) {
    String paragraph;
    Scanner input = new Scanner (System.in);

    System.out.print("Enter a paragraph: ");
    paragraph = input.nextLine();
    paragraph = paragraph.trim();

    StringTokenizer parWordTokenizer = null;
    StringTokenizer parDotTokenizer = null;
    int numParDotTokens = 0;
    int numParWordTokens = 0;

    parDotTokenizer = new StringTokenizer (paragraph, ".");
    parWordTokenizer = new StringTokenizer (paragraph);
    numParDotTokens = parDotTokenizer.countTokens();
    numParWordTokens = parWordTokenizer.countTokens();

    String[] sentences = new String[numParDotTokens];
    String[] words = new String[numParWordTokens];
    String[] characters = new String[5];

    for (int i=0; i<numParDotTokens; i++) {
        sentences[i] = parDotTokenizer.nextToken();
        System.out.print("S: "+sentences[i]+"\n");
        parWordTokenizer = new StringTokenizer (sentences[i]);
        numParWordTokens = parWordTokenizer.countTokens();
        while (parDotTokenizer.hasMoreTokens()){
            String ss = parDotTokenizer.nextToken();
            for (int k = ss.length() - 1; k>=0; k--) {
                System.out.print(ss.charAt(k));
            }
            System.out.print(". ");
        }
        for (int j=0; j<numParWordTokens; j++) {
            words[j] = parWordTokenizer.nextToken();
            System.out.print("W: "+words[j]+"\n");
            while (parWordTokenizer.hasMoreTokens()){
                String ss = parWordTokenizer.nextToken();
                for (int k = ss.length() - 1; k>=0; k--) {
                    System.out.print(ss.charAt(k));
                }
                System.out.print(". ");
            }
        }
        }
    } } 
```

但 `revo spmuJ . god yzal ehT . kciuq. nworb. xof. Exception in thread "main" java.util.NoSuchElementException at java.util.StringTokenizer.nextToken(Unknown Source) at ScrambleParagraph.main(Reverse.java:40)` 请帮我解决它。几天来我一直在考虑正确的实现，但我是 Java 新手，所以至少现在我做不到。非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:45:41.103

这大致是我的做法：

```
public static void main(String[] args) {

    String paragraph;
    Scanner input = new Scanner(System.in);

    System.out.print("Enter a paragraph: ");
    paragraph = input.nextLine();
    paragraph = paragraph.trim();

    String reversedParagraph = new StringBuilder(paragraph)
            .reverse().toString().toLowerCase();

    StringBuilder out = new StringBuilder();
    for (String sentence : reversedParagraph.split(" *\\.")) {
        if (!sentence.equals("")) {
            sentence += ". ";
            out.append(Character.toUpperCase(sentence.charAt(0))
                    + sentence.substring(1));
        }
    }
    System.out.println(out.toString().trim());

} 
```

给定输入：`"The quick brown fox. Jumps over. The lazy dog."`

这会产生：`"God yzal eht. Revo spmuj. Xof nworb kciuq eht."`

这似乎是你所要求的。

特殊成分是：`StringBuilder.reverse()`将字符串反转并 `String.split(regex)`根据正则表达式将字符串拆分为多个片段。在我颠倒它之后，我用它来遍历段落中的每个句子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T18:35:27.777

这样会简单得多。

```
public String inverse(String str) {
    StringBuffer strBuf= new StringBuffer(str.trim());
    return strBuf.reverse().toString();         
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-22T08:17:34.070

用“。”分割输入怎么样？首先然后反转每个元素？

```
public class Reverse {

    public static void main(String[] args) {
        String input = "The quick brown fox. Jumps over. The lazy dog.";
        String[] sentences = input.split("\\.");
        StringBuilder result = new StringBuilder();
        for (int i = sentences.length - 1; i >= 0; i--) {
            String sentence = sentences[i];
            result.append(".").append(
                    new StringBuilder(sentence).reverse().toString());
        }
        System.out.println(result);
    }
} 
```

输出：

```
.god yzal ehT .revo spmuJ .xof nworb kciuq ehT 
```

# java - 类名的数组/列表

> ID：11598562
> 
> 赞同：2
> 
> 时间：2012-07-22T07:45:25.110
> 
> 标签：java, android

有没有办法做类似的事情：

```
ArrayList<Class> _fragments = new ArrayList<Class>{ FirstFragmentClass.class, SecondFragmentClass.class, .... }
return new _fragments.get(iterator);
//foreach(_fragments){ ... } 
```

PS我正在针对Android API编写，如果我没记错的话，普通java和android中的反射之间存在细微差别。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T08:09:32.273

是的，这是可能的，使用该[`Class.newInstance()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#newInstance%28%29)方法。此方法调用无参数构造函数。确保你的班级都有一个。

```
List<Class<?>> classes = Arrays.asList(FirstFragmentClass.class, SecondFragmentClass.class);
for (Class<?> clazz : classes) {
    Object instance = clazz.newInstance();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:08:41.603

前段时间我使用类似的东西：

```
Hashtable<IdItem, Class<?>> activitiesToLaunch = null;
activitiesToLaunch = new Hashtable<IdItem, Class<?>>();
activitiesToLaunch.put(new IdItem(idReceivedInPush), classOfScreenToLaunch); 
```

您可以将 Hastable 更改为 Vector 或类似的东西并实现您的功能。

希望有所帮助:)

# c# - 在 SQL Server 2005 Express 中查询日期时间

> ID：11598565
> 
> 赞同：0
> 
> 时间：2012-07-22T07:45:49.557
> 
> 标签：c#, winforms, sql-server-2005-express

如何`DateTime`在 Windows Server 2008 r2 上安装的 SQL Server 2005 Express 中查询行？

我有根据从和到日期值选择行的代码。它在我的 Windows 7 系统中运行。但是，它不适用于 Windows Server 2008 R2 ...任何帮助

```
this.filterreportTableAdapter.FillBy(this.cRdataset.filterreport_datatable, fromdate, todate); 
```

我的 SQL 查询是

```
SELECT * 
FROM tablename 
WHERE DATE BETWEEN @fromdate and @todate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:17:22.663

听起来日期/时间值是作为字符串传递的。这总是一个坏主意，格式问题比比皆是。这里最好的方法很简单：使用正确类型的参数。如果客户端和服务器都知道它是 DateTime，那么它将作为原始值传递，而不是字符串 - 因此没有格式问题。

确保C# 中的`fromdate`和是，而TSQL 中的 和 是。`todate``DateTime``@fromdate``@todate``tablename.DATE``datetime`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:01:10.030

请设置与 Windows 7 上相同的日期时间格式，例如：dd/MM/yyyy

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T08:02:19.853

似乎您在传递日期参数时遇到了日期格式错误。有两种解决方案：首先，您可以尝试使用适用于任何地方的日期格式，即：YYYYMMDD ex : 20120722。另一种解决方案是在 sql 查询中创建 DateDiff 最好的方式

# java - 如何使用地图功能get

> ID：11598567
> 
> 赞同：0
> 
> 时间：2012-07-22T07:46:31.333
> 
> 标签：java, map

我有一个字符串到整数的映射。我想检查地图是否有某个字符串，如果有，请修改它映射到的整数值。

```
Map <String, Integer> m= new SortedMap <String,Integer>();
Map <String, Integer> m2 = new SortedMap<StringInteger>();
//do some stuff
Iterator <String,Integer>  i = m2.iterator();
//add some values into the first map first map

    while (i.hasNext()){
       String temp =  i.next();
      int found = m.get(temp);
     if ( found != null) {//this is giving me a syntax error , something about how ints 
                                                               can't be null , do I just compare it to zero

    //process value that temp maps to 
       averages.put(temp, val); //
    } 
```

}

另外，当我在第二个循环中输入密钥时，它会删除第一个密钥，并用新的过程值放入另一个密钥。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T07:54:57.720

您需要更改`int`为`Integer`：

```
Integer found = m.get(temp); 
```

'int' 是原语，不能与 null 进行比较。

映射键是唯一的，因此如果您将相同的键放置两次，它将被替换

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T08:03:10.547

看起来你想要做的事情可以用 putAll 来完成。

```
Map<String, Integer> both = ...
both.putAll(m1);
both.putAll(m2); 
```

这将包含 m2 中的所有值以及仅 m1 中的任何值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T08:07:56.187

通过对可变自定义类的引用添加类似这样的东西：

```
Map<String, MyValue> myMap = new HashMap<String, MyValue>();
(...)
MyValue value = myMap.get(temp);
value.inc();

(...)

public class MyValue {
    private int value;
    public int get() {
        return value;
    }
    public void set(int newValue) {
        this.value = newValue;
    }
    public void inc() {
        value++;
    }
} 
```

编辑：使用上述方法增加所有值：

```
for(MyValue value : myMap.values()) {
    value.inc();
} 
```

没有 MyValue 包装器：

```
for(String key : m.keySet()) {
    Integer value = m.get(key);
    m.put(key, value + 1);
} 
```

请参阅[地图接口 API](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.html)

# sql - 左加入日期所有日期

> ID：11598571
> 
> 赞同：2
> 
> 时间：2012-07-22T07:47:04.250
> 
> 标签：sql, date, join

我有几个带有日期的表，我试图加入这些表以创建一个大表，其中数据按日期分组。

我现在通过 LEFT JOIN'ing 到从我需要加入的表生成的子选择来完成此操作（其中很多是同一个表，具有不同的 where 查询并涉及 SUM 和 COUNT 所以我认为我必须使用子选择）。我遇到的问题是，如果第一个表中不存在某个日期，那么即使后续表中存在与该日期连接的行，它也不会显示在表中。我根据 DATE(datetime_column) 加入。

所以就像

```
SELECT date, col 1 
FROM a 
   LEFT JOIN (SELECT date, col2 FROM a1) a2 ON DATE(a.date)=DATE(a2.date) 
   LEFT JOIN (SELECT date, col3 FROM a3) a4 ON DATE(a3.date)=DATE(a4.date) 
```

说得通？可能不是..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:08:58.220

基本上有两种方法可以做到这一点：

您可以使用[FULL OUTER JOIN](http://en.wikipedia.org/wiki/Join_%28SQL%29#Full_outer_join)

> **全外连接**
> 
> 从概念上讲，完全外连接结合了应用左外连接和右外连接的效果。如果 FULL OUTER JOINed 表中的记录不匹配，则结果集对于缺少匹配行的表的每一列都将具有 NULL 值。对于那些匹配的记录，将在结果集中生成一行（包含从两个表中填充的字段）。

...

> 一些数据库系统不直接支持完全外连接功能，但它们可以通过使用内连接和 UNION ALL 分别从左表和右表中选择“单表行”来模拟它。相同的示例可以如下所示：
> 
> ```
> SELECT employee.LastName, employee.DepartmentID, department.DepartmentName, department.DepartmentID
> FROM employee
> INNER JOIN department ON employee.DepartmentID = department.DepartmentID
> 
> UNION ALL
> 
> SELECT employee.LastName, employee.DepartmentID, CAST(NULL AS VARCHAR(20)), CAST(NULL AS INTEGER)
> FROM employee
> WHERE NOT EXISTS (SELECT * FROM department WHERE employee.DepartmentID = department.DepartmentID)
> 
> UNION ALL
> 
> SELECT CAST(NULL AS VARCHAR(20)), CAST(NULL AS INTEGER),
> department.DepartmentName, department.DepartmentID
> FROM department
> WHERE NOT EXISTS (SELECT * FROM employee WHERE employee.DepartmentID = department.DepartmentID) 
> ```

其他方式您可以制作一个**主视图**，女巫包含所有表的所有不同键，以便与所有表进行 LEFT JOIN。

```
select *
from (
        SELECT date
        FROM a
        union
        SELECT date
        FROM a1
        union
        SELECT date
        FROM a3
    ) 
    LEFT JOIN a using (date)
    LEFT JOIN a1 using (date)
    LEFT JOIN a3 using (date) 
```

有时我更喜欢 FULL OUTER JOIN 的第二种方式，因为许多 RDBMS 不支持 FULL OUTER JOIN 并且因为有许多支持它的人没有很好地优化它，例如 Oracle 的当前版本只是威胁一个完整的外部连接作为引用中显示的等效查询，女巫对表演非常有损。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:53:44.057

尝试使用 OUTER JOIN 从主表中获取所有记录，并仅从子/子表中获取匹配记录。

```
SELECT a.Col1, b.Col1 FROM a LEFT OUTER JOIN b ON a.Col2=b.Col2 
```

有关联接的详细信息，请参阅[联接 (SQL)](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:41:53.497

为此，您还有另一种选择，根本不使用连接。您可以使用联合和聚合将结果放在一起：

```
SELECT date, max(col1) as col1, max(col2) as col2, max(col3) as col3
FROM ((select date, col1, NULL as col2, NULL as col3 from a1) union all
      (SELECT date, NULL, col2, NULL FROM a2) union all 
      (SELECT date, NULL, NULL, col3 FROM a3)
     ) t
group by date 
```

通常解决方案是 Alessandro 给出的第二个（第一个版本非常麻烦）。一个警告。他的解决方案从数据中提取日期。有时您想生成主列表，可能来自日历表，或者可能通过生成日期列表（具体情况完全取决于数据库）。

# java - 在 Android 上使用 JCIFS 库时在 URL 中使用 SMB 协议

> ID：11598574
> 
> 赞同：8
> 
> 时间：2012-07-22T07:47:42.213
> 
> 标签：java, android, smb, jcifs

我在我的新 Android 项目中使用 JCIFS。不知何故，我决定使用 URL 类来概括文件路径（这样我以后可以添加更多协议）。我所做的如下

```
URL url = new URL("smb://192.168.1.1/filepath"); 
```

然后抛出 java.net.MalformedURLException 异常。

```
Exception in thread "main" java.net.MalformedURLException: unknown protocol: smb
    at java.net.URL.<init>(URL.java:184)
    at java.net.URL.<init>(URL.java:127) 
```

咨询[JCIFS FAQ](http://jcifs.samba.org/src/docs/faq.html#ukproto)表明我必须在使用该类之前注册协议。但是我真的不知道如何在Android中这样做。我认为图书馆已经这样做了，但它没有在 Android 上。

所以我该怎么做 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T20:04:13.663

我刚刚在 SmbFile 参考中看到了 JCIFS 参考中的用法。

> 当使用带有 'smb://' URL 的 java.net.URL 类时，必须首先调用静态 jcifs.Config.registerSmbURLHandler(); 方法。这是注册 SMB 协议处理程序所必需的。

所以我添加了这个调用，它可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:48:59.553

不要使用 URL 对象。将 URL 直接传递给 SmbFile 构造函数。例如：

```
SmbFile file = new SmbFile("smb://192.168.1.1/filepath"); 
```

然后，您可以使用常规文件执行大多数您可以执行的操作。

# php - PHP - Zend Amazon AWS S3 - 从存储桶加载图像

> ID：11598575
> 
> 赞同：0
> 
> 时间：2012-07-22T07:47:49.590
> 
> 标签：php, zend-framework, amazon-s3, amazon-web-services

我有这个：

```
<img src="loadImage.php?p=sdfdf7s8sf9sf"> 
```

这称为 Zend Framework S3 的东西，它应该创建一个签名 URL 以在浏览器中显示我的图像。

```
<?php
    require_once 'Zend/Service/Amazon/S3.php';

    function get_s3_signed_url($bucket, $resource, $AWS_S3_KEY, $AWS_s3_secret_key, $expire_seconds) {
        $expires = time()+$expire_seconds;

        $string_to_sign = "GET\n\n\n{$expires}\n/".str_replace(".s3-eu-west-1.amazonAWS.com","", $bucket)."/$resource";
        $signature = urlencode(base64_encode((hash_hmac("sha1", utf8_encode($string_to_sign), $AWS_s3_secret_key, TRUE))));

        $authentication_params = "AWSAccessKeyId=".$AWS_S3_KEY;
        $authentication_params.= "&Expires={$expires}";
        $authentication_params.= "&Signature={$signature}";

        return $link = "https://s3-eu-west-1.amazonAWS.com/{$bucket}/{$resource}?{$authentication_params}";
    }

    $aws_access_key_id = "xxx";
    $aws_s3_secret = "xxx";

    $myBucket = "myBucketName.s3-eu-west-1.amazonAWS.com";
    $myObject = "website-normal-thumbs/100001.JPG";
    $url = get_s3_signed_url( $myBucket, $myObject, $aws_access_key_id, $aws_s3_secret, 3800);

    header("Content-Type: image/jpeg"); 
    readfile($url);
?> 
```

我昨天真的开始用 PHP 编程了。此代码不会引发任何错误，尽管它必须这样做，因为它不起作用。我的 S3 对象在我的存储桶中，我已经测试过了，我的访问和密钥是正确的。`require_once 'Zend/Service/Amazon/S3.php'`如果我在`require_once 'Zendddd/Serviceeee/Amazonnnn/S3.php'`遇到错误时拼写错误，那么 Zend 就在那里并且正在工作。我只是得到一个小图像图标，没有图像！

如果它向我显示错误消息，也许我可以解决！

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:32:07.063

这很简单。你需要做的就是改变

```
$myBucket = "myBucketName.s3-eu-west-1.amazonAWS.com"; 
```

到

```
$myBucket = "myBucketName"; 
```

因为否则组装的链接`get_s3_signed_url`将出现故障（`https://s3-eu-west-1.amazonAWS.com/myBucketName.s3-eu-west-1.amazonAWS.com/website-normal-thumbs/100001.JPG?...`而不是`https://s3-eu-west-1.amazonAWS.com/myBucketName/website-normal-thumbs/100001.JPG?...`）

And the reason why you don't see an error message most probably is the `header("Content-Type: image/jpeg");` command. This will lead the browser to interpret the result as an image instead of printing error messages.

# php - 嵌套注释 OOP php

> ID：11598576
> 
> 赞同：1
> 
> 时间：2012-07-22T07:48:04.717
> 
> 标签：php, oop, comments, nested

嗨一整天我一直在努力寻找解决方案。我试过这个 [嵌套数组。第三级正在消失](https://stackoverflow.com/questions/7673044/nested-array-third-level-is-disappearing/7673415) ，这[试图在 PHP](https://stackoverflow.com/questions/6430658/trying-to-get-threaded-nested-comments-in-php)和许多其他方式中获取线程/嵌套注释，但可能是由于我缺乏知识，我无法获得所需的结果。这就是我寻求帮助的原因。我想为我的新闻网站创建嵌套评论。

我在 mySQL 中有一个带有 CommentID 和 ParentID 的表

有一个班级帖子，我可以在其中获得所有指定的评论

```
case Comments:
    if ($this->iPostID != 0) {
        $sSQL = "SELECT CommentID, ParentID FROM Comment WHERE PostID=" . $this->iPostID;

        $rsComment = $this->dDatabase->query($sSQL);

        while ($aComment = $this->dDatabase->fetch_array($rsComment)) {
            $sComment = new comment();
            $sComment->load($aComment['CommentID']);
            $this->aComments[] = $sComment;
        }

    }
    return $this->aComments;
    break; 
```

那就是我从 $this->aComments 中得到的数组：

```
Array
(
    [0] => comment Object
        (
            [iCommentID:comment:private] => 1
            [iDatePosted:comment:private] => 17 July 2012
            [sContent:comment:private] => Very nice it works now
            [iUserID:comment:private] => 1
            [iPostID:comment:private] => 1
            [iParentID:comment:private] => 0
            [dDatabase:comment:private] => database Object
                (
                    [sqliConnection:database:private] => mysqli Object
                        (
                            [affected_rows] => 1
                            [client_info] => 5.5.9
                            [client_version] => 50509
                            [connect_errno] => 0
                            [connect_error] => 
                            [errno] => 0
                            [error] => 
                            [field_count] => 6
                            [host_info] => Localhost via UNIX socket
                            [info] => 
                            [insert_id] => 0
                            [server_info] => 5.5.9
                            [server_version] => 50509
                            [sqlstate] => 00000
                            [protocol_version] => 10
                            [thread_id] => 2929
                            [warning_count] => 0
                        )

                )

        )

...
    [3] => comment Object
    (
        [iCommentID:comment:private] => 4
        [iDatePosted:comment:private] => 22 July 2012
        [sContent:comment:private] => thies is the first reply for a comment
        [iUserID:comment:private] => 4
        [iPostID:comment:private] => 1
        [iParentID:comment:private] => 1
        [dDatabase:comment:private] => database Object
            (
                [sqliConnection:database:private] => mysqli Object
                    (
                        [affected_rows] => 1
                        [client_info] => 5.5.9
                        [client_version] => 50509
                        [connect_errno] => 0
                        [connect_error] => 
                        [errno] => 0
                        [error] => 
                        [field_count] => 6
                        [host_info] => Localhost via UNIX socket
                        [info] => 
                        [insert_id] => 0
                        [server_info] => 5.5.9
                        [server_version] => 50509
                        [sqlstate] => 00000
                        [protocol_version] => 10
                        [thread_id] => 2929
                        [warning_count] => 0
                    )

            )

    ) 
```

这是我每次尝试对这个数组做任何事情时都会遇到的错误

> 致命错误：无法在第 15 行的 /Applications/MAMP/htdocs/News/includes/thread.php 中使用注释类型的对象作为数组

Thread.PHP 是[http://www.jongales.com/blog/2009/01/27/php-class-for-threaded-comments/的精确副本](http://www.jongales.com/blog/2009/01/27/php-class-for-threaded-comments/)

谁能帮帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:18:46.310

谢谢大家的帮助和回复，你们帮了我很多。我稍微修改了我的评论系统，最后是结果

PHP：

```
public function load($iCommID)
{
    $sSQL = "SELECT CommentID, DATE_FORMAT(DatePosted, '%d %M %Y') as DatePosted, Content, UserID, PostID, ParentID FROM Comment WHERE CommentID=" .$iCommID;

    $aComment = $this->dDatabase->query($sSQL);

    $rsComment = $this->dDatabase->fetch_array($aComment);
    $this->iCommentID = $rsComment['CommentID'];
    $this->iDatePosted = $rsComment['DatePosted'];
    $this->sContent = $rsComment['Content'];
    $this->iUserID = $rsComment['UserID'];
    $this->iPostID = $rsComment['PostID'];
    $this->iParentID = $rsComment['ParentID'];

    $sSQL = "SELECT CommentID FROM Comment WHERE ParentID=" .$iCommID;

            $resParent = $this->dDatabase->query($sSQL);

            while($aReply = $this->dDatabase->fetch_array($resParent))
            {

                $oReply = new comment();
                $oReply->load($aReply['CommentID']);

                $this->aReply[] = $oReply;
            }

} 
```

使成为：

```
public static function renderSingleComment($comComment)
{
    $aReplies = $comComment->Replies;
    $sHTML = "";
    $sHTML .= '<li class="comment">
                        <a id="'.$comComment->CommentID.'"></a>
                        <div class="comm-container">
                            <div class="comm-container-header">
                                <img src="img/avatar1.jpg" alt="avatar1" width="55" height="60" class="avatar"/>
                                <span class="commentator">Igor Revenko</span>
                                <br/>
                                <span class="date">'.$comComment->DatePosted.'</span>
                                <span><a href="#'.$comComment->ParentID.'">#</a></span>
                                <div class="clear"></div>
                            </div>
                            <div class="comm-container-entry" id="rev">
                                <p>'.$comComment->Content.'</p>

                                    <a class="comment-reply-link" id="replyLink-'.$comComment->CommentID.'" href="#'.$comComment->CommentID.'" onclick="javascript:moveForm(this); findID(\'replyLink-'.$comComment->CommentID.'\')"></a>

                            </div>
                        </div>';
                    for($i=0;$i<count($aReplies); $i++)
                    {
                        $sHTML .= '<ul class="children">';
                        $sHTML .= PageView::renderSingleComment($aReplies[$i]);
                        $sHTML .= '</ul>';
                    }
    $sHTML .= ' </li>';

    return $sHTML;
}

public static function renderComment ($pvPostID){

    $sHTML = "";

    $aComments = $pvPostID->Comments;

    $sHTML .= '<div class="clear"></div>
            <div id="comments">
                <h3>COMMENTS TO "'.$pvPostID->PostName.'"</h3>
                <ol class="comments-list">';

    for($i=0; $i<count($aComments); $i++)
    {
        $sHTML .= PageView::renderSingleComment($aComments[$i]);
    } 
```

再次感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:05:09.960

该错误已经足够详细了，`thread.php`假设它`$commment`是一个包含以下键的数组`parent_id`，`id`......而在您的情况下它是一个对象。

所以你有两个选择

*   更改您的代码以使其兼容`thread.php`（强烈不推荐）
*   或修改`thread.php`以使其处理您的对象。

要`thread.php`再次修改，您有两个选择，因为您的`Comment`类属性是`private`您可以

*   将访问修饰符更改为`public`.
*   或者设置一些[吸气剂](http://www.mustap.com/phpzone_post_203_setter-and-getter)

然后在`thread.php`你看到的每个地方都可以看到`$comment['parent_id']`make it `$comment->parent_id`（或者`$comment-getParentId`如果你使用了 getter）等等

# memory-management - VB 6.0 ActiveX 控件异常处理和清理

> ID：11598577
> 
> 赞同：0
> 
> 时间：2012-07-22T07:48:21.933
> 
> 标签：memory-management, exception-handling, user-controls, vb6, activex

我使用 VB 6.0 在单个“.ocx”文件中创建了各种 activex 控件。

我在我的 MFC 应用程序中使用这些用户控件。我在设计时在我的 MFC PropertyPage 对话框中添加了这些控件。此属性页被添加到属性表中，此属性页被添加到 ActiveX 容器控件中。最后容器控件将被另一个应用程序加载。

我的对话框在 Windows XP、Windows 7 32 位操作系统中正确加载。在 Windows 2008 服务器和 Windows 7 64 位操作系统中，当我的 VB 6.0 用户控件添加到属性页时，`CPropertySheet::OnInitDialog getting failed (throws exception)`. 我已经尝试过可能的 MFC 异常来捕获异常，但默认 (...) 捕获块只会被执行。

当我从 PropertyPage 中删除 VB 6.0 用户控件时，也不例外。

1.  VB 6.0用户控件抛出的异常如何处理？
2.  如何确保在 VB 6.0 用户控件中创建的内存已被正确释放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:06:04.213

尝试注释掉 VB6 控件项目中的所有代码，然后重新编译。使用属性页重试。如果你没有遇到同样的问题，那么你很幸运。逐个方法取消注释代码，直到找到故障代码。

# html - 表格内的绝对位置文本未正确对齐

> ID：11598578
> 
> 赞同：0
> 
> 时间：2012-07-22T07:48:21.883
> 
> 标签：html

我有一个 HTML 代码。有一个三行三列的表格。每个单元格都有一些文本。一切都绝对定位。当我在不同的浏览器中看到这个 HTML 时，除了 IE，所有浏览器都正确显示它。以下是有问题的 HTML 代码部分。如果你注意到的话，IE 会在随后的每一行中向上移动文本。其他浏览器没有这个问题。

```
<!DOCTYPE document PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<document xmlns="http://www.w3.org/1999/xhtml">
<meta name="Author" content="***"/>
<meta name="DocumentName" content="Page"/>
<meta name="Date" content="07/21/2012"/>
<notice name="Page">
<html>
<head>
<style type="text/css">
div.Page61989 {}
.f1 {font-family:Arial;font-size:10.00pt;font-style:normal;font-weight:normal;line-height:114%;}
p.normal, table.normal, div.normal {text-align:left; text-indent:0; margin-top:0in; margin-right:0in; margin-bottom:0.0in; margin-left:0in; clear:left;}
</style>
</head>
<body lang="EN-US" link="blue" vlink="purple">
<div class="Page61989" style="position:relative;height:1056px;width:816px;">
<table class="normal" style="width:578.00px;border-collapse:collapse;border:1.00px solid #FF9900;position:absolute;top:328.00px;left:120.00px;">
    <tr>
        <td style="height:31.000px;width:192.000px;;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:0.00px;left:0.00px;" >This table has regular old</span><span class="f1" style=";position:absolute;top:16.00px;left:0.00px;" >square corners.</span></p>
        </td>
        <td style="height:31.000px;width:192.000px;border-left:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:0.00px;left:192.00px;" >Cell 2 Row 1</span></p>
        </td>
        <td style="height:31.000px;width:192.000px;border-left:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:0.00px;left:384.00px;" >Cell 3  Row 1</span></p>
        </td>
    </tr>
    <tr>
        <td style="height:31.000px;width:192.000px;border-top:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:31.00px;left:0.00px;" >Cell 1 Row 2</span></p>
        </td>
        <td style="height:31.000px;width:192.000px;border-top:1.00px solid #FF9900;border-left:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:31.00px;left:192.00px;" >Cell 2 Row 2</span></p>
        </td>
        <td style="height:31.000px;width:192.000px;border-top:1.00px solid #FF9900;border-left:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:31.00px;left:384.00px;" >Cell 2 Row 3  This table has a</span><span class="f1" style=";position:absolute;top:375.00px;left:384.00px;" >square corner defined.</span></p>
        </td>
    </tr>
    <tr>
        <td style="height:16.000px;width:192.000px;border-top:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:62.00px;left:0.00px;" >Added another row</span></p>
        </td>
        <td style="height:16.000px;width:192.000px;border-top:1.00px solid #FF9900;border-left:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:62.00px;left:192.00px;" >added another row</span></p>
        </td>
        <td style="height:16.000px;width:192.000px;border-top:1.00px solid #FF9900;border-left:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:62.00px;left:384.00px;" >added another row</span></p>
        </td>
    </tr>
</table><br style="clear:left;"/>
</div>
</body>
</html>
</notice>
</document> 
```

只是为了让您知道它是自动生成的代码，所以我别无选择，只能使用绝对定位。此外，某些部分可能无效或看起来令人惊讶，但请忽略它们。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:14:33.187

如果有帮助，你可以试试这个：

```
<!DOCTYPE document PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<document xmlns="http://www.w3.org/1999/xhtml">
<meta name="Author" content="***"/>
<meta name="DocumentName" content="Page"/>
<meta name="Date" content="07/21/2012"/>
<notice name="Page">
<html>
<head>
<style type="text/css">
div.Page61989 {}
.f1 {font-family:Arial;font-size:10.00pt;font-style:normal;font-weight:normal;line-height:114%;}
p.normal, table.normal, div.normal {text-align:left; text-indent:0; margin-top:0in; margin-right:0in; margin-bottom:0.0in; margin-left:0in; clear:left;}

.tc{
    border:1px solid #FF9900
    }

</style>
</head>
<body lang="EN-US" link="blue" vlink="purple">
<div class="Page61989" style="position:relative;height:1056px;width:816px;">

<table cellspacing="0" class="normal" style="width:578px;position:absolute;top:328px;left:120px;">  <tr>
    <td class="tc">One-One</td>
    <td class="tc">One-One</td>
    <td class="tc">One-One</td>
  </tr>
  <tr>
    <td class="tc">One-One</td>
    <td class="tc">One-One</td>
    <td class="tc">One-One</td>
  </tr>
  <tr>
    <td class="tc">One-One</td>
    <td class="tc">One-One</td>
    <td class="tc">One-One</td>
  </tr>
</table>

</table><br style="clear:left;"/>
</div>
</body>
</html>
</notice>
</document> 
```

下面是ie6截图

![在此处输入图像描述](../Images/d20f32bbe30de1558cb085cc4bd9a146.png)

根据您的要求，请参阅下面的修订代码。

```
<!DOCTYPE document PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<document xmlns="http://www.w3.org/1999/xhtml">
<meta name="Author" content="***"/>
<meta name="DocumentName" content="Page"/>
<meta name="Date" content="07/21/2012"/>
<notice name="Page">
<html>
<head>
<style type="text/css">
div.Page61989 {}
.f1 {font-family:Arial;font-size:10.00pt;font-style:normal;font-weight:normal;line-height:114%;}
p.normal, table.normal, div.normal {text-align:left; text-indent:0; margin-top:0in; margin-right:0in; margin-bottom:0.0in; margin-left:0in; clear:left;}
</style>
</head>
<body lang="EN-US" link="blue" vlink="purple">
<div class="Page61989" style="position:relative;height:1056px;width:816px;">
<table class="normal" style="width:578.00px;border-collapse:collapse;border:1.00px solid #FF9900;position:absolute;top:328.00px;left:120.00px;">
    <tr>
        <td style="height:31.000px;width:192.000px;;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:0.00px;left:0.00px;" >This table has regular old</span><span class="f1" style=";position:absolute;top:16.00px;left:0.00px;" >square corners.</span></p>
        </td>
        <td style="height:31.000px;width:192.000px;border-left:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:0.00px;left:192.00px;width:192.000px; ">Cell 2 Row 1</span></p>
        </td>
        <td style="height:31.000px;width:192.000px;border-left:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:0.00px;left:384.00px;width:192.000px;" >Cell 3  Row 1</span></p>
        </td>
    </tr>
    <tr>
        <td style="height:31.000px;width:192.000px;border-top:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:31.00px;left:0.00px;" >Cell 1 Row 2</span></p>
        </td>
        <td style="height:31.000px;width:192.000px;border-top:1.00px solid #FF9900;border-left:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:31.00px;left:192.00px;width:192.000px;" >Cell 2 Row 2</span></p>
        </td>
        <td style="height:31.000px;width:192.000px;border-top:1.00px solid #FF9900;border-left:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:31.00px;left:384.00px;width:192.000px;" >Cell 2 Row 3  This table has a</span><span class="f1" style=";position:absolute;top:46.00px;left:384.00px;width:192.000px;" >square corner defined.</span></p>
        </td>
    </tr>
    <tr>
        <td style="height:31.000px;width:192.000px;border-top:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:62.00px;left:0.00px;width:192.000px;" >Added another row</span></p>
        </td>
        <td style="height:31.000px;width:192.000px;border-top:1.00px solid #FF9900;border-left:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:62.00px;left:192.00px;width:192.000px;" >added another row</span></p>
        </td>
        <td style="height:31.000px;width:192.000px;border-top:1.00px solid #FF9900;border-left:1.00px solid #FF9900;" >
            <p class="normal"><span class="f1" style=";position:absolute;top:62.00px;left:384.00px;width:192.000px;" >added another row</span></p>
        </td>
    </tr>
</table><br style="clear:left;"/>
</div>
</body>
</html>
</notice>
</document> 
```

# firefox - Firefox 中的切片盒

> ID：11598583
> 
> 赞同：2
> 
> 时间：2012-07-22T07:49:17.873
> 
> 标签：firefox, 3d, transform, modernizr, css-transforms

我尝试使用[Slicebox](http://tympanus.net/codrops/2011/09/05/slicebox-3d-image-slider/)，但无法正常工作。它在 Chrome 和 Opera 中运行良好，我看到了一个不错的回退 - 但在 Firefox 中我只得到灰色框。我认为问题出在 Modernizr csstransforms3d 检测中。我不确定 Modernizr 是否应该检测 3d 变换。有谁知道究竟是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:17:53.240

阅读代码后，我可以找到原因。

所有样式都带有`-webkit`前缀，但脚本会检查`Modernizr.csstransforms3d`. 因此，由于 firefox 支持`csstransforms3d`它尝试应用 3d 变换样式，但 firefox 会忽略所有以`-webkit`.

我目前的解决方案是正确地为所有样式添加前缀：

```
(function($){

    if(Modernizr.csstransforms3d) { 
        var prefix = "";
        if($.browser.mozilla){
            prefix = "-moz-";
        }else if($.browser.msie){
            prefix = "-ms-";
        }else if($.browser.opera){
            prefix = "-o-";
        }else{
            return;
        }
    }

    // Replace -webkit- with the current browser prefix
    var postProcessStyles = function(styles){
        $.each(styles,function(k,v){
            styles[k.replace('-webkit-', prefix)] = typeof v === 'string' ? v.replace('-webkit-', prefix) : v;
            styles[k.replace('-webkit-', '')] = typeof v === 'string' ? v.replace('-webkit-', '') : v;
        });
    }

    // Inject style processor
    var orig = $.Slice3d.prototype._configureStyles;
    $.Slice3d.prototype._configureStyles = function(){
        var origReturn = orig.apply(this,arguments),
            _this = this;
        postProcessStyles(this.style);      
        $.each(this.sidesStyles, function(k){
            postProcessStyles(_this.sidesStyles[k]);
        })  
        $.each(this.animationStyles, function(k){
            postProcessStyles(_this.animationStyles[k]);
        })      
        return origReturn;
    }

}(jQuery)); 
```

演示：http: [//jsbin.com/onokut/1](http://jsbin.com/onokut/1)

代码：http: [//jsbin.com/onokut/1/edit](http://jsbin.com/onokut/1/edit)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T14:18:23.513

它似乎不兼容 - 他们承认：

> 请注意，您只能在支持这些 CSS3 属性的浏览器（目前是 Chrome 和 Safari）中看到 Slicebox 的酷炫 3d 效果。

# c# - 如何使用此自定义 C# 邮件功能发送图像？

> ID：11598584
> 
> 赞同：0
> 
> 时间：2012-07-22T07:49:19.310
> 
> 标签：c#, image

我是一名新的 C# 开发人员，并试图在我的系统使用 Mail 功能发送的文本邮件中包含一个图像。一切正常，除非我将以下一堆代码添加到我的代码中：

```
string imagePath = Server.MapPath("~") + "\\";
                string fileName = imagePath + "EmailNotification.jpg";
                AlternateView av = AlternateView.CreateAlternateViewFromString(body, null, MediaTypeNames.Text)
                LinkedResource linkedRes = new LinkedResource(fileName);
                linkedRes.ContentId = "image1";
                linkedRes.ContentType.Name = fileName;
                av.LinkedResources.Add(linkedRes); 
```

它在以下行下给了我一条红线：

```
 AlternateView av = AlternateView.CreateAlternateViewFromString(body, null, MediaTypeNames.Text)

C# Mail Function:

    /*For sending an email notification to the new user*/
        protected void SendNotificationByEmail(string toAddresses, string fromAddress, string MailSubject, string MessageBody, bool isBodyHtml)
        {
            SmtpClient sc = new SmtpClient("MailServer");
            try
            {
                MailMessage msg = new MailMessage();
                msg.From = new MailAddress("Test@MailServer.com", "Test System)");

                msg.Bcc.Add(toAddresses);
                msg.Subject = MailSubject;
                msg.Body = MessageBody;
                msg.IsBodyHtml = isBodyHtml;
                sc.Send(msg);
            }
            catch (Exception ex)
            {
                throw ex;
            }

        }

        protected void Send(string username)
        {
            string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=TestDB;Integrated Security=True";

            string networkID = username.ToString();
            using (SqlConnection conn = new SqlConnection(connString))
            {
                var sbEmailAddresses = new System.Text.StringBuilder(2000);

                //initiate the varibles 
                string name = null;

                // Open DB connection.
                conn.Open();

                string cmdText2 = @"SELECT     Name
                                    FROM       dbo.employee
                                    WHERE     (Username = @networkID)";
                using (SqlCommand cmd = new SqlCommand(cmdText2, conn))
                {
                    cmd.Parameters.AddWithValue("@networkID", networkID);
                    SqlDataReader reader = cmd.ExecuteReader();
                    if (reader != null)
                    {
                        if (reader.Read())
                        {
                            name = reader["Name"].ToString();
                            sbEmailAddresses.Append(username).Append("@mailServer.com");
                        }
                    }

                    //var sEMailAddresses = sbEmailAddresses.ToString();
                    string body = @"Good day "
                                    + name +
                                    @", <br /><br />
                                    You have been added to the <a href='http://localhost/TestSys'>Test</a>. 
                                    <br /><br />
resources. 
                                    </b> <br /> <br />
                                    <img src='images/Admin/EmailNotification.jpg' alt=' Message'/>

                    string imagePath = Server.MapPath("~") + "\\";
                    string fileName = imagePath + "EmailNotification.jpg";
                    AlternateView av = AlternateView.CreateAlternateViewFromString(body, null, MediaTypeNames.Text)
                    LinkedResource linkedRes = new LinkedResource(fileName);
                    linkedRes.ContentId = "image1";
                    linkedRes.ContentType.Name = fileName;
                    av.LinkedResources.Add(linkedRes);

                    SendNotificationByEmail(sbEmailAddresses.ToString(), "", "Welcome", body, true);
                    sbEmailAddresses.Clear();
                    reader.Close();

                }

                conn.Close();
            }
        } 
```

**那么如何解决这个问题以便能够通过我的短信发送图像呢？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:25:09.283

```
AlternateView av = AlternateView.CreateAlternateViewFromString(
  body, null, MediaTypeNames.Text); 
```

你必须`Html`在`MediaTypeNames`. 像这样。

```
AlternateView av = AlternateView.CreateAlternateViewFromString(
  body, null, MediaTypeNames.Text.Html); 
```

# css - 为什么即使边框设置为无，IE 中的图像仍然有边框？

> ID：11598585
> 
> 赞同：0
> 
> 时间：2012-07-22T07:49:34.707
> 
> 标签：css, border, background-image

使用以下代码，我在 IE7 到 IE9 中的背景图像周围有一个边框。为什么？

```
<tr>
    <td class="wishes">
        <a class="clickable">
            <img class="alreadyWished" border="0" width="19" height="16"
                alt="Already Wished"/><br />
            Already Wished
         </a>
     </td>
</tr>

<style>
.clickable
{
    outline:none;
    cursor:pointer;
    border:none;
}

.wish
{
    background-image:url(../images/wished.jpg);
    background-repeat:no-repeat;
    border:none;
    outline:none;
}

.alreadyWished
{
    background-image:url(../images/alreadyWished.jpg);
    background-repeat:no-repeat;
    border:none;
    outline:none;
}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:39:09.273

这是IE中的一个错误。CSS[规范说](http://www.w3.org/TR/CSS2/box.html#border-style-properties)

> 8.5.3 边框样式
> 
> ...
> 
> none
> 无边界；计算的边框宽度为零。

IE 不在乎。您需要`border-width: 0`另外设置。（或`border: 0 none;`）如果您想使用组合名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:11:55.330

在 CSS 中，border 不接受 'none' 的值。将其设置为 0。原因是，边框属性的存在表明存在边框，因此说“无”是没有意义的。

此外，HTML 中的“img”没有属性“border”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T09:52:42.777

这对我来说有点奇怪。为什么不在 .clickable 上使用不同的类，并避免使用没有“src”的“img”。

看看我做了什么，您可能需要使用一些 JS 将类“.wish”替换为“.alreadyWished”类

```
<tr>
<td class="wishes">
    <a class="clickable .wish"></a>
 </td> 
```

```
.clickable.wish { background:url("wished.jpg") no-repeat center left; padding-left:25px; /* padding equal to your width of the background image + 10-15px  */}
.clickable.alreadyWished { background:url("alreadyWished.jpg") no-repeat center left; padding-left:25px; /* padding equal to your width of the background image + 10-15px  */} 
```

# jquery - 如何在页面的两侧添加首页和结束页以及分页面板

> ID：11598590
> 
> 赞同：1
> 
> 时间：2012-07-22T07:50:08.827
> 
> 标签：jquery, pagination

我正在使用[JQuery 分页](http://tutorials.ajaxmasters.com/pagination-demo/)对一些 div 结果进行分页。

我所做的是：

```
<script type="text/javascript">
    $(function() {
       var optInit = getOptionsFromForm();
       $("#Pagination").pagination(<?php echo $num_result;?>, optInit);
    });
    function pageselectCallback(page_index, jq){
       var items_per_page = 10;
       var max_elem = Math.min((page_index+1) * items_per_page, <?php echo $num_result;?>);
        $('div[id^="page"]').hide();
        for(var i=page_index*items_per_page;i<max_elem;i++){
            $('#page'+i).show();
        }

        return false;
    }

    function getOptionsFromForm(){
       var opt = {callback: pageselectCallback,prev_text :'Pagina precedente',next_text:'Pagina successiva',num_display_entries:10,num:2};
       return opt;
    }

</script>

<div id="result_pagin">
   <?php for($i=0;$i<$num_result;$i++){?>
      <div id="page<?php echo $i;?>
         .
         .
         .
      </div>
   <?php }?>
</div>
<div id="Pagination" class="pagination">
</div> 
```

我需要做的是在 result_pagin div 之前和最后显示分页面板，我需要在该面板中添加第一页和结束页按钮。有可能吗？有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T04:19:54.897

```
<div id="Pagination" class="pagination">
  <a id="pgstart" href="#page1">Page 1</a>
  <a id="pgend></a>
</div>

<div id="result_pagin">
<!--...-->
</div>

<script>
  var pgend = (<?php echo $num_result;?> / 10);
  $("#pgend").attr("href", "#page"+pgend);
</script> 
```

# linux - Linux cgroups：无法从根 cgroup 移动某些内核线程

> ID：11598591
> 
> 赞同：3
> 
> 时间：2012-07-22T07:50:25.903
> 
> 标签：linux, kernel

我创建了一个“cpu”cgroup：

```
 $mkdir /dev/cgroup
 $mkdir /dev/cgroup/cpu
 $mount -t cgroup -o cpu cpu /dev/cgroup/cpu
 $cd /dev/cgroup/cpu/
 $mkdir low 
```

现在，我尝试将任务移动到子 cgroup “low”：

```
 $for task in `cat /dev/cgroup/cpu/tasks`; 
      do   /bin/echo $task > /dev/cgroup/cpu/low/tasks || echo "Failed to move PID $task"; done
 /bin/echo: write error: Invalid argument
 Failed to move PID 3
 /bin/echo: write error: Invalid argument
 Failed to move PID 4
 /bin/echo: write error: Invalid argument
 Failed to move PID 5
 /bin/echo: write error: Invalid argument
 Failed to move PID 6
 /bin/echo: write error: Invalid argument
 Failed to move PID 7
 /bin/echo: write error: Invalid argument
 Failed to move PID 8
 /bin/echo: write error: Invalid argument
 .
 .
 .
 /bin/echo: write error: Invalid argument
 Failed to move PID 58 
```

我能够移动“init”进程本身。但是，我未能移动特定的内核线程：

```
 root         3     2  0 18:16 ?        00:00:00 [migration/0]
 root         4     2  0 18:16 ?        00:00:00 [sirq-high/0]
 root         5     2  0 18:16 ?        00:00:04 [sirq-timer/0]
 root         6     2  0 18:16 ?        00:00:00 [sirq-net-tx/0]
 root         7     2  0 18:16 ?        00:00:00 [sirq-net-rx/0]
 root         8     2  0 18:16 ?        00:00:00 [sirq-block/0]
 root         9     2  0 18:16 ?        00:00:00 [sirq-block-iopo]
 root        10     2  0 18:16 ?        00:00:00 [sirq-tasklet/0]
 root        11     2  0 18:16 ?        00:00:00 [sirq-sched/0]
 root        12     2  0 18:16 ?        00:00:00 [sirq-hrtimer/0]
 root        13     2  0 18:16 ?        00:00:04 [sirq-rcu/0]
 root        14     2  0 18:16 ?        00:00:00 [watchdog/0]
 root        15     2  0 18:16 ?        00:00:00 [desched/0]
 root        16     2  0 18:16 ?        00:00:00 [migration/1]
 root        17     2  0 18:16 ?        00:00:00 [sirq-high/1]
 root        18     2  0 18:16 ?        00:00:03 [sirq-timer/1]
 root        19     2  0 18:16 ?        00:00:00 [sirq-net-tx/1]
 root        20     2  0 18:16 ?        00:00:00 [sirq-net-rx/1]
 root        21     2  0 18:16 ?        00:00:00 [sirq-block/1] 
```

这些线程有什么特别之处可以防止它们被移动到不同的 cgroup 吗？有什么我想念的吗？

谢谢！艾维。

# c++ - 获取 2D 输入并同时对其进行排序的最快方法 Row wise

> ID：11598601
> 
> 赞同：1
> 
> 时间：2012-07-22T07:52:26.343
> 
> 标签：c++, sorting

我需要一种方法，我可以在二维数组中获取输入并以最快的方式对其进行逐行排序。我尝试同时使用 Input 和 Sort 它`Insertion Sort`。我使用的第二件事是我`multimap`单独取一行并插入键值作为我想要的值，映射值与该键相关作为一些虚拟值。由于地图在插入时对键进行排序，这可能是我认为的一种方式。

下面的代码用于确保我的 2D 中的 1 行的元素在 multimap 中排序。基本上你可以说我根本不想使用二维结构，因为我将一一单独使用这些行，因此可以被视为一维数组。我也希望他们在阅读 Input 时重新排列，所以我不需要额外的操作来做它们。

```
for(long int j=1;j<=number_in_group;j++)
{
   cin >> arrival_time;
   arrival_map.insert(pair<long int, long int>(arrival_time,1));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:01:03.360

试试`STL std::priority_queue`？保证对输出进行排序，如果您将输入极化为二维对象（例如包含行号），那么您的队列将完美地构建。在这一点上，只需将队列中的数字分批“n”取出，其中“n”是您的行大小，每个都将被正确排序。您将需要一个元素类型，该元素类型对值和优先级队列中的行进行编码，并首先对行 # 进行排序，然后是值。您的示例`long int`用作您的值的数据类型。假设您的行不大于系统 unsigned int 的大小：

```
class Element
{
public:
   Element(unsigned int row, long int val)
      : myrow(row), myval(val)
   {};

   bool operator <(const Element& elem)
   {
      return (myrow < elem.myrow || 
             (myrow == elem.myrow && myval < elem.myvel);
   }

   unsigned int myrow;
   long int myval;
};

typedef std::priority_queue<Element> MyQueue; 
```

注意：这利用了优先级队列的默认比较运算符 invoking `std::less<>`，它只是使用 item-defined 比较项目`operator <()`。一旦你有了这个，只需将你的矩阵推入队列，当你切换到下一行时增加行索引。

我的队列 MQ；

```
mq.push_back(Element(1,100));
mq.push_back(Element(1,99));
mq.push_back(Element(2,100));
mq.push_back(Element(2,101)); 
```

完成后弹出队列将导致以下序列：99 100 100 101

我希望这是你想要的。最后，请原谅语法错误和/或丢失的垃圾，因为我只是在飞行中炸毁了它并且没有编译器来检查它。一定要喜欢网吧。

# node.js - mongo：“2d”索引和正常索引

> ID：11598606
> 
> 赞同：1
> 
> 时间：2012-07-22T07:54:21.117
> 
> 标签：node.js, mongodb, mongoose

```
location: {lat: Number,
           lng: Number} 
```

location 是我的 mongodb 中的 2d 索引，我一直在使用它进行地理空间搜索，效果很好。

现在如果我需要搜索为 db.find({lat:12.121212, lng:70.707070})，它会使用相同的索引吗？或者，我需要定义一个新索引吗？如果是这样，如何？

我在 node.js 中使用猫鼬驱动程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:57:33.697

用于执行地理空间命令的 2d 索引无助于两个字段的等效匹配。为此，您需要在两个子文档上定义复合索引，如下所示：

```
db.collection.ensureIndex({"location.lat" : 1, "location.lng" : 1}) 
```

这对我来说最适合一组测试数据 - 您还可以在位置字段本身上定义一个普通索引，但这会降低效率。您可以使用任何索引组合的提示和解释来测试相对性能。例如：

```
db.collection.find({"location.lat" : 179.45, "location.lng" : 90.23}).hint("location.lat_1_location.lng_1").explain() 
```

实际上，您可以对任何您希望的索引执行此操作，但要检查返回的结果，您需要删除 .explain()

还请记住，查询一次只能使用一个索引，因此如果您希望将两者结合起来（等效性和地理空间搜索），那么 2d 索引将是唯一使用的一个。

注意：以上所有示例均来自 MongoDB JS shell，而不是 node.js

# jquery - 如何在jquery自动完成中启动更改事件

> ID：11598612
> 
> 赞同：0
> 
> 时间：2012-07-22T07:54:58.397
> 
> 标签：jquery, autocomplete

我希望用户能够输入自动完成的文本框，但如果找不到，我希望它提交已写入内容的文本而不是值（在本例中为 projectId）。

我目前的想法是捕获更改事件（查看注释掉的代码），然后更新将通过模型绑定传递给 ASP.NET MVC 控制器的隐藏字段。

我的 javascript 看起来像这样：

```
 $(function () {

        $('*[data-autocomplete-url]')
        .each(function () {
            $(this).autocomplete({
                source: $(this).data("autocomplete-url"),
                minLength: 2,
                select: function (event, ui) {
                    $(this).next('input:hidden').val(ui.item.value);
                    $(this).val(ui.item.label);
                    return false;
                },
                focus: function (event, ui) {
                    $(this).next('input:hidden').val(ui.item.value);
                    $(this).val(ui.item.label);
                    return false;
                },
                change: function (event, ui) {
                    alert(ui.item.value);

                    //if (ui.item.value == null) {
                    //    $(this).next('input:hidden').val(ui.item.label);
                    //}
                }
            });
        });
    }); 
```

我的 HTML 如下所示：

```
<label for="ProjectID">Project</label>
<input type='text' data-autocomplete-url='/Projects/GetProjectsByUser' />\
<input id="ProjectID" name="ProjectID" type="hidden" value="" /> 
```

更改事件**没有**触发 - 知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:36:14.197

我认为这有几个问题。

1.  [**改变**](http://jqueryui.com/demos/autocomplete/#event-change)事件，如果值已更改，而不是按键。
2.  选择器似乎有问题，如果您将 class 或 id 添加到输入中，它可以工作。
3.  **警报中的ui.item**报告为 null，因此 ui.item.value 根本不会触发警报框。相反，我放**了 $(this).val()**，最后它返回插入的文本。

这是我稍作改动的代码：

```
<label for="ProjectID">Project</label>
<input class.='ac' type='text' data-autocomplete-url='/Projects/GetProjectsByUser' />
<input id="ProjectID" name="ProjectID" type="hidden" value="" /> 

$(function () {       
    $('.ac').each(function () {
        $(this).autocomplete({
            source: $(this).data("autocomplete-url"),
            minLength: 2,
            select: function (event, ui) {
                alert('se');
                $(this).next('input:hidden').val(ui.item.value);
                $(this).val(ui.item.label);
                return false;
            },
            focus: function (event, ui) {
                alert('f');
                $(this).next('input:hidden').val(ui.item.value);
                $(this).val(ui.item.label);
                return false;
            },
            change: function (event, ui) {
                alert($(this).val());
            }
        });
    });
}); 
```

# jquery - jquery 插件：使用或 创建块？

> ID：11598631
> 
> 赞同：1
> 
> 时间：2012-07-22T07:59:52.693
> 
> 标签：jquery, html, jquery-plugins

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T08:17:43.950

它几乎没有什么区别，但由于缺乏语义意义，a `div`or可能更合适。`span`

由于标记是动态构建的，因此您在这里并没有节省太多，因此`b`and `div`or之间的长度差异`span`无论如何都不重要。

HTML 规范说：

> b 元素代表一段文本，出于实用目的而被关注的文本，没有传达任何额外的重要性，也没有暗示替代语气或情绪，例如文档摘要中的关键词、评论中的产品名称、可操作的词在交互式文本驱动的软件中，或者文章 lede。
> 
> 当没有其他元素更合适时，应将 b 元素用作最后的手段。尤其是标题要使用h1到h6元素，重音要使用em元素，重要性要使用strong元素表示，标记或突出显示的文字要使用mark元素。

但另一方面，除了整洁之外，使用 JS 制作它真的没有什么区别。例如， Twitter bootstrap 可怕`i`地用于图标！

顺便说一句，这样做的“正确”方法是使用 Shadow DOM——它非常新颖，但它允许您以与`select`标签相同的方式隐藏实现细节（即 html 仅具有`select`和`option`元素，但在还有更多的场景）。

如需演示，请在新浏览器中查看[http://adobe.github.com/web-platform/samples/css-regions/shadow-dom/ 。](http://adobe.github.com/web-platform/samples/css-regions/shadow-dom/)如果您使用 Chrome，则打开 Developer Tools Experiments in `chrome://flags/`，然后在检查器菜单中打开 View Shadow DOM 选项。这会让你看到这里发生了什么。

简而言之，您可以制作与其他一切隔离且基本上不可见的元素。您可以照常设置它们的样式，但也可以将它们与 CSS 的其余部分隔离开来。它们的行为就像普通的一样，除了它们不能以正常方式寻址。

如果我正在制作这个插件，我会尽可能地使用 Shadow Dom，回退到`span`或`b`其他什么，主要是因为酷的东西很酷！

# c++ - 如何以编程方式读取/写入 ISO 文件的某些 LBA 上的扇区？

> ID：11598633
> 
> 赞同：3
> 
> 时间：2012-07-22T08:00:02.760
> 
> 标签：c++, visual-c++, native, sector

我想使用 C++ 或其他本地编程语言使用逻辑块寻址 (LBA) 读取/写入 ISO 上的扇区。例如，我想读取 ISO 文件的自定义 LBA。这可能吗？如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T08:58:44.353

当然有可能。

问题是你愿意为此付出多少努力。您必须查看 ISO 文件的规范，然后从文件中读取您想读取的任何内容。没有任何神奇的 C++ 功能可以让您以更舒适的方式访问 ISO 文件。

然而，仅仅因为没有神奇的 C++ 特性并不意味着在互联网的广阔范围内就没有第三方库。例如，[http://www.gnu.org/software/libcdio/](http://www.gnu.org/software/libcdio/)可能值得一看。

# servlets - 在 glassfish 和 servlet 中使用 commet 进行聊天的最简单方法

> ID：11598638
> 
> 赞同：0
> 
> 时间：2012-07-22T08:01:01.460
> 
> 标签：servlets, glassfish, chat, comet, grizzly

我正在寻找使用 glassfish 和 comet 的聊天应用程序的工作示例。我希望当一个客户端更新服务器中的数据时，其他客户端也将在不刷新页面的情况下看到数据。或服务器中的数据已更改的任何推送通知。它非常紧迫。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-23T20:45:45.963

而不是 Commet ，只需使用 Socket 。您需要不断地感受服务器的脉搏，以便从其他用户的响应中获取更新。在服务器发送的响应令牌中，如果有新的更新，则在新线程中拉取更新。消息可以具有包含发送方设备标识和消息正文的标头。因此，在某个时间点，您可以为您的设备拉取所有更新，并且用户界面可以在每个视图中分别显示它们；在用户的列表视图中，显示最后一条消息+新的未读消息数。在聊天窗口中，显示所有消息。属于用户的。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:49:16.870

构建基于网络的聊天室最简单的方法是使用彗星云服务，而不是自己构建长轮询的东西。你可以从 EZComet 看到一个例子

[在此处输入链接描述](https://ezcomet.com/demo/chatroom)

虽然它是用 PHP 编写的，但我认为编写 Java 版本会很容易。

# ruby-on-rails - 具有停止和重新启动能力的机架服务器

> ID：11598645
> 
> 赞同：0
> 
> 时间：2012-07-22T08:01:56.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capistrano, rack

我计划在我的 capistrano 食谱文件中添加一些任务，以使管理员能够远程启动/停止/重新启动[private_pub](https://github.com/ryanb/private_pub)服务器。但是如果一开始我可以使用类似的东西

```
 desc "Start private_pub server"
  task :start do
    run "cd #{current_path};rackup private_pub.ru -s thin -E production -D"
  end 
```

我找不到任何文档如何停止或重新启动机架服务器。我看到选项

```
 -P, --pid FILE           file to store PID (default: rack.pid) 
```

但也许使用 kill 命令停止服务器 - 不是好主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:53:02.623

我在寻找相同的解决方案时发现了这一点。

[gist.github.com/3197633](https://gist.github.com/3197633)

基本上，在启动进程时，您可以将 pid 号写入 /tmp/pids 中的文件，然后当您停止它时，您读取该文件并运行 kill -9 ...

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T08:00:45.337

你的正确使用`kill -9`是一个坏主意。这可能会导致不必要的数据丢失，据我了解，建议使用`kill 2`或`kill -INT`相当于点击“control-c”并且应该为您关闭普通服务器。我个人已经开始使用 TPW 的 God gem 来管理我的服务器。这是我用于运行本地“geminabox”服务器的脚本，例如：

```
God.watch do |w|
w.name = 'gemserver'
    w.dir = '/usr/local/gemserver'
    w.pid_file = "#{ENV['HOME']}/.god/pids/#{w.name}.pid"
    ru = File.expand_path `which rackup`
    w.start = "#{ru} -D #{w.dir}/config.ru -P #{w.pid_file}"
    # w.stop = lambda { Process.kill(3, `lsof -i :9292`.chomp.to_i) }
    w.behavior :clean_pid_file
    w.keepalive
end 
```

# perl - Perl Switch 语句：在给定/何时条件下使用 OR（通常是逻辑运算符）时遇到问题

> ID：11598646
> 
> 赞同：1
> 
> 时间：2012-07-22T08:01:59.237
> 
> 标签：perl, switch-statement, logical-operators

基本上我想获得用户输入并决定要做什么，有时即使对于不同的用户输入，我也需要获得相同的结果。示例代码：

```
given ($command) {
      when ('a' || 'add') {add}
      when ('s' || 'subtract') {subtract}
      when ('m' || 'multiply') {multiply}
      when ('d' || 'divide') {divide}
      default { print "try again, usage: add, subtract, multiply, divide (a, s, m, d)\n" } 
```

现在的问题是，它只有在我在 or 语句的开头键入单字母命令时才有效。如果我在提示中键入“添加”之类的内容，我会收到默认消息，告诉我再试一次。

我可以为这些单独的案例，但它只会与单个字母具有相同的主体，这只是多余的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T08:11:54.540

`given`/构造使用智能匹配运算符，该`when`运算符没有任何特殊情况的行为`||`。表达方式

```
'a' || 'add' 
```

计算结果为`'a'`，所以它只匹配`$command`字符串`'a'`。

如果要匹配`$command`任何值列表，可以使用数组值：

```
given ($command) {
    when ([qw(a add)]) { add }
... 
```

（像往常一样，有几种表达方式。）

参考：

`perldoc -f given`

[`perldoc perlsyn`](http://perldoc.perl.org/perlsyn.html); 搜索“切换语句”和“详细智能匹配”。

**编辑 ：**

这个问题的另一种方法是，如果你想允许`$command`成为命令名称的任何前缀（例如，, `"s"`, `"su"`, `"sub"`..., `"subtract"`）是这样的：

```
sub match {
    my($s, $target) = @_;
    return index($target, $s) == 0;
}

...

if (match($command, 'add') { ... }
elsif (match ($command, 'subtract') { ... }
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T08:12:51.513

您只是使用了错误的合成器，请以这种方式尝试：

```
#!/usr/bin/perl

use 5.012;
use warnings;

print 'Enter your command : ';
chomp( my $command = <> );

given ($command) {
      say 'Adding something' when ['a', 'add'];
      say 'Subtracting something' when ['s', 'subtract'];
      say 'Multiplying something' when ['m', 'multiply'];
      say 'Dividing something' when ['d', 'divide'];
      default { say "try again, usage: add, subtract, multiply, divide (a, s, m, d)\n" }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-29T14:18:34.217

“何时”评估正则表达式。

你不能使用 || 但你可以使用正则表达式:)

```
given ($command) {
    when (/(^a$|^add$)/) {
        ....
    }
    ....
} 
```

# twitter-bootstrap - 使用玉器时出现在背景下的引导模态

> ID：11598647
> 
> 赞同：1
> 
> 时间：2012-07-22T08:02:02.170
> 
> 标签：twitter-bootstrap, pug

我是node.js和jade的新手，我在谷歌应用引擎中有一个应用程序与twitter bootstrap一起工作。

**问题**当我将相同的html转换为jade时，模态的行为并不正常，而是背景出现了。我删除了淡入淡出类，但无济于事。这是jade中的代码

```
 #newWordModal.modal.hide
    .modal-header
      button.close(type='button', data-dismiss='modal') x
      h3 Add A Word
    .modal-body
      #create-word
        input#new-word-name(type='text', placeholder='Type in a word name')
        input#new-word-def(type='text', placeholder='Define it....')
    .modal-footer
      a.btn(href='#', data-dismiss='modal') Close
      a#add-word.btn.btn-primary(href='#', data-dismiss='modal') Add Word! 
```

html中相同的是这个

```
<div class="modal hide fade" id="newWordModal">
  <div class="modal-header">
   <button type="button" class="close" data-dismiss="modal">×</button>
   <h3>Add A Word</h3>
  </div>
  <div class="modal-body">
    <div id="create-word">
    <input type="text" id="new-word-name" placeholder="Type in a word name" />
    <input type="text" id="new-word-def" placeholder="Define it...." />
  </div>
 </div>
 <div class="modal-footer">
   <a href="#" class="btn" data-dismiss="modal">Close</a>
   <a href="#" class="btn btn-primary" data-dismiss="modal" id="add-word">Add Word!</a>
 </div>
</div> 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-07T20:32:42.450

我认为您缺少作为内容包装器的“modal.dialog”和“modal-content”类，如此处[所述](http://getbootstrap.com/javascript/#modals)

你的代码应该是这样的

```
#playlistloadmodal.modal.fade
        .modal-dialog
            .modal-content
                .modal-header
                    button.close(type='button', data-dismiss='modal') x
                .modal-body
                    #create-word
                        input#new-word-name(type='text', placeholder='Type in a word name')
                        input#new-word-def(type='text', placeholder='Define it....')
                .modal-footer
                    a.btn(href='#', data-dismiss='modal') Close
                    a#add-word.btn.btn-primary(href='#', data-dismiss='modal') Add Word! 
```

# c# - 在锯齿状数组中插入列

> ID：11598653
> 
> 赞同：1
> 
> 时间：2012-07-22T08:03:43.517
> 
> 标签：c#, linq, jagged-arrays

```
int RowCount; //This will be approx in the range 1,00,000
int[][] SourceJaggedArray;
int ColumnCount; //This is will be approx in the range 15 - 20 
```

目前我正在为每一行的所有列填充值，这非常慢。但根据业务逻辑，我知道至少 5 列的所有值都是 -1，大约 5 列的所有值都是相同的（但来自变量）。

因此，我想知道是否有一种通过将数组插入特定列索引来填充锯齿状数组的有效方法：

```
SourceJaggedArray[][0] = firstColumnArray;
SourceJaggedArray[][1] = secondColumnArray; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:55:37.267

我想效率不是很高，也不完全是您想要的，但是...

1个选项可能是做类似的事情

```
int[][] SourceJaggedArray=new int[20][];
SourceJaggedArray[0]=firstColumnArray;
SourceJaggedArray[1]=secondColumnArray; 
```

然后在必要时旋转您的数组锯齿状数组（请参阅[C#，旋转 2D 数组](https://stackoverflow.com/questions/2729192/c-rotating-2d-arrays)）

我更喜欢的第二个选项是

```
List<int[]> source=new List<int[]>();
source.Add(firstColumnArray);
source.Add(secondColumnArray); 
```

# objective-c - 我有什么方法可以检测我的应用程序是否已通过 Installous 下载？

> ID：11598654
> 
> 赞同：2
> 
> 时间：2012-07-22T08:03:58.903
> 
> 标签：objective-c, ios, app-store, in-app-purchase

我知道有办法检查应用内购买是否已被破解，但是有没有办法检查应用程序是否已从 App Store 下载？

我的意思是检查我的应用程序是否有人破解了它或有人从 Installous 下载了它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:50:06.567

简短的回答：不，不是真的。一方面，我不认为 Apple 提供了一种方法来做到这一点，尽管我可能是错的。但是，即使他们这样做了，也可能没有多大用处。

假设`VerifyAppStorePurchase`存在某个名为的函数，它与 Apple 的服务器联系并确认当前用户已合法购买了您的应用程序。在您的应用程序的某处，您有如下代码：

```
if(!VerifyAppStorePurchase()) {
    exit(-1);
} 
```

这将编译成这样的东西（但请注意，这是 x86 程序集而不是 arm，因此它与您在 iOS 设备上看到的并不完全相同。不过，同样的概念也适用。）：

```
 pushl   %ebp
    movl    %esp, %ebp
    subl    $24, %esp
    call    _VerifyAppStorePurchase
    testl   %eax, %eax
    je  L7
    # <snip app code here>
L7:
    movl    $-1, (%esp)
    call    _exit 
```

我可以看到破解者至少可以通过两种方式禁用此检查：

*   用跳过检查的跳转替换`call`指令的前两个字节——一个两字节补丁
*   用几条指令替换退出调用的跳转`nop`——同样，一个两字节的补丁

签名验证通常会阻止这种情况，但越狱的 iPhone 很乐意运行未签名的代码，因此没有什么能阻止有足够动机的破解者修改您的应用程序以禁用您添加的任何额外检查。

# gem - therubyracer 安装错误

> ID：11598655
> 
> 赞同：40
> 
> 时间：2012-07-22T08:04:05.127
> 
> 标签：gem, therubyracer

正如您在下面看到的，libv8 可以正常安装，但 ruby​​racer 不能。我正在使用 Mac 10.7.4。

```
~/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1> gem install libv8
Building native extensions.  This could take a while...
Successfully installed libv8-3.11.8.3
1 gem installed
Installing ri documentation for libv8-3.11.8.3...
Installing RDoc documentation for libv8-3.11.8.3...

~/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1> gem install therubyracer
Building native extensions.  This could take a while...
ERROR:  Error installing therubyracer:
    ERROR: Failed to build gem native extension.

        /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb
checking for main() in -lobjc... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/rdp/.rvm/rubies/ruby-1.9.3-p125/bin/ruby
    --with-objclib
    --without-objclib
/Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:461:in `try_link0'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:476:in `try_link'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:619:in `try_func'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:845:in `block in have_library'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:840:in `have_library'
    from extconf.rb:10:in `<main>'

Gem files will remain installed in /Users/rdp/.rvm/gems/ruby-1.9.3-p125/gems/therubyracer-0.10.1 for inspection.
Results logged to /Users/rdp/.rvm/gems/ruby-1.9.3-p125/gems/therubyracer-0.10.1/ext/v8/gem_make.out 
```

这`mkmf.log`是位于 中的`~/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/gems/1.9/gems/therubyracer-0.10.1/ext/v8>`。

文件编辑选项缓冲区工具帮助

```
"/usr/bin/gcc-4.2 -o conftest -I/Users/rdp/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/x86_64-darwin11.3.0 -I/Users/rdp/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/rub\
y/backward -I/Users/rdp/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1 -I. -I/Users/rdp/.rvm/usr/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE    -O3 -ggdb -Wextra -Wno-unused-\
parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-functio\
n-declaration  -fno-common -pipe conftest.c  -L. -L/Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib -L/Users/rdp/.rvm/usr/lib -L.      -lruby.1.9.1  -lpthread -ldl -lobjc "
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */ 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-12-29T09:23:15.627

您可以使用 brew 中的 Libv8 而不是 gem 中的 Libv8。您可以通过以下命令执行此操作：

```
$ gem uninstall libv8
$ brew install v8
$ gem install therubyracer 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-04-12T05:44:07.720

@Haegin 在[https://github.com/cowboyd/libv8/issues/205中的回答](https://github.com/cowboyd/libv8/issues/205)

```
brew uninstall v8
brew install v8-315
gem uninstall -a libv8
gem uninstall -a therubyracer
gem install libv8 -v '3.16.14.17' -- --with-system-v8
gem install therubyracer -v '0.12.2' -- --with-v8-dir=$(brew --prefix v8-315) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-01-30T10:03:31.900

对于一个较旧的项目，我不得不在 Mavericks 上使用 0.10.1 版本的 ruby​​racer（引导程序取决于它）

所以我不得不使用旧版本的 gcc

1.  编辑您的 .zshrc 或 .bashrc

    ```
    export CC=/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2
    export CXX=/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/g++-4.2
    export CPP=/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/cpp-4.2 
    ```

2.  确保您已卸载所有旧版本的 libv8

    ```
    gem uninstall libv8 
    ```

3.  安装您的 therubyracer 版本

    ```
    gem install therubyracer -v=0.10.1 
    ```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-29T12:57:55.247

对于 Linux：

下面的代码当然是正确的

`$ gem uninstall libv8`

`$ gem install therubyracer`

但有时它并没有帮助，因为你没有编程`make`。**首先**你需要安装`make`。为此，请运行：

`sudo apt-get install build-essential`

只有在那之后：

`gem install therubyracer`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-21T19:43:52.080

在 Mavericks 上，您只需要更新到 therubyracer 0.12.0

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-01-07T16:30:16.113

这些步骤对我有用：

*   `brew uninstall v8`
*   `brew install v8-315`
*   `gem uninstall -a libv8`
*   `gem uninstall -a therubyracer`
*   `gem install libv8 -v '3.16.14.19' -- --with-system-v8`
*   `gem install therubyracer -v '0.12.3' -- --with-v8-dir=$(brew --prefix v8-315)`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-02-08T15:36:57.043

Mac 10.10.5，Ruby 2.1.0 这对我有用：

```
gem uninstall libv8
gem uninstall therubyracer

brew upgrade gcc
brew install v8

bundle config --local build.libv8 --with-cxx=/usr/local/bin/gcc-6
gem install libv8 -v '3.16.14.17' -- --with-system-v8
gem install therubyracer -- --with-v8-dir=/usr/local/opt/v8-315

bundle install # worked ! 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-01T14:08:23.823

对我有用的解决方案是将这些步骤放在 10.7.4 上

```
export CC=gcc-4.2

sudo ln /usr/bin/gcc /usr/bin/gcc-4.2

gem uninstall libv8
gem install therubyracer 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-22T10:05:44.833

到目前为止，我遇到了完全相同的问题。

这个[链接](https://stackoverflow.com/questions/10905820/gem-install-therubyracer-fails-on-mac-os-x-lion)救了我。

总结一下，你需要这样做：

```
$ gem uninstall libv8
$ gem install therubyracer 
```

在我解决这个问题之前，我在我的 mac 中安装了 v8。我不知道这是否有帮助，因为它似乎与 js 解释器有关，我认为它可能会有所帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-20T22:39:59.380

在 Mountain Lion 10.8 上，它没有预装 C 编译器。您需要从 Apple 自己下载并安装“命令行工具”包，然后运行`which gcc`以确认它已安装。从那里开始一切都应该运行良好。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-24T15:20:42.060

在 OS X 10.7 上，我实际上发现“命令行工具”包是不够的，我必须安装成熟的 XCode 包，然后 gem install 工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-04-05T03:15:00.933

当我从 OSX Mountain Lion 升级到 OSX Mavericks 时，我遇到了同样的问题。

从 ruby​​-1.8.7-p354 升级到 ruby​​-1.8.7-375 对我有用。如果您使用的是 ruby​​-1.93-p125，您可能想尝试升级到 1.9.3-rc1（已经高于 p484）

libv8 (3.16.14.3-x86_64-darwin-13) 和 therubyracer (0.12.0) gems 安装没有问题。

假设您使用 rbenv：

```
rbenv install 1.9.3-rc1
rbenv rehash
rbenv shell 1.9.3-rc1
bundle install 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-06-28T08:54:56.267

根据[https://github.com/cowboyd/therubyracer/issues/420#issuecomment-253592865](https://github.com/cowboyd/therubyracer/issues/420#issuecomment-253592865)

```
gem uninstall therubyracer
gem uninstall libv8
brew uninstall v8
brew install v8
gem install libv8
gem install therubyracer 
```

它帮助了我。参数：`ruby 2.3.3`,`rails 4.2.9`

# c++ - 使用索引缓冲区对象时出现奇怪的段错误

> ID：11598658
> 
> 赞同：1
> 
> 时间：2012-07-22T08:04:44.523
> 
> 标签：c++, opengl, sfml

我的代码在使用 glDrawArrays 时工作正常，但每当我创建索引缓冲区并将其更改为使用 glDrawElements 时，它就会出现段错误。

（奇怪的是，不是在绘图之前或之后……而是在主循环退出时！）

这是简单的代码……我在其中声明了 4 个顶点和 3 个索引来绘制三角形。

```
int main()
{
    sf::Window win(sf::VideoMode(400,400,32),"Manasij");
    GlewInit();
    mm::Program program
    (
        {
            mm::Shader(GL_VERTEX_SHADER,"vshader.vert"),
            mm::Shader(GL_FRAGMENT_SHADER,"fshader.frag")
        }
    );
    float vdata[]=
    {
        0.0f,0.0f,
        0.5f,0.0f,
        0.5f,0.5f,
        0.0f,0.5f
    };
    GLubyte indices[]={0,1,3};

    GLuint vao,vbo,ebo;
    glGenVertexArrays(1,&vao);
    glBindVertexArray(vao);

    glGenBuffers(1,&vbo);
    glBindBuffer(GL_ARRAY_BUFFER,vbo);
    glBufferData(GL_ARRAY_BUFFER,8*sizeof(float),vdata,GL_STATIC_DRAW);

    glGenBuffers(1,&ebo);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,ebo);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER,3*sizeof(GLubyte),indices,GL_STATIC_DRAW);

    glVertexAttribPointer(0,2,GL_FLOAT,GL_FALSE,0,0);
    glEnableVertexAttribArray(0);
    glBindAttribLocation(program.getHandle(),0,"pos");
    //glBindVertexArray(0);

    glUseProgram(program.getHandle());
    //glBindVertexArray(vao);
    glClearColor(1.0f,1.0f,1.0f,1.0f);

    while(win.isOpen())
    {
        sf::Event eve;
        while(win.pollEvent(eve))
            if(eve.type==sf::Event::Closed)
                win.close();
        glClear(GL_COLOR_BUFFER_BIT);

//      glDrawArrays(GL_TRIANGLES,0,3);
        glDrawElements(GL_TRIANGLES,3,GL_UNSIGNED_BYTE,(GLvoid*)0);
        win.display();  
    }
    return 0;
} 
```

着色器非常简单：

```
#version 330
in vec2 pos;
void main()
{
    gl_Position = vec4(pos,0.0f,1.0f);
} 
```

和

```
#version 330
void main()
{
    gl_FragColor = vec4(1.0f,0.3f,0.8f,1.0f);
} 
```

gdb 显示：

```
Breakpoint 1, main () at test.cpp:57
57                      win.display();
(gdb) continue 
Continuing. //<- At this point I try to close the window, thus triggeing the main loop to break

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff557d164 in ?? () from /lib/libnvidia-glcore.so.302.17 
```

知道我在搞砸什么吗？

PS：如果有人想测试，这里有一个存档..完整的生成文件！

[https://docs.google.com/file/d/0B0oubbp-MVYOeGFuX0owXzhRTEU/edit](https://docs.google.com/file/d/0B0oubbp-MVYOeGFuX0owXzhRTEU/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:16:21.507

问题是，在循环的最后一次迭代中，当检测到“关闭”事件时，窗口会发出关闭信号，但即使在那之后我最后一次调用 glDrawElements。由于一切都已经消失，这导致了段错误。

解决方案是在调用 win.close() 之后放置一个 break 语句，或者将事件处理代码放在循环的末尾。

（感谢来自 archlinux 论坛[的 cmtptr 发现了这一点](https://bbs.archlinux.org/viewtopic.php?id=145583)，我几乎确信这是驱动程序问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:19:30.640

尝试在绘制循环完成时删除您的`VertexArrays`and ：`Buffers`

```
while(win.isOpen())
{
    sf::Event eve;
    while(win.pollEvent(eve))
        if(eve.type==sf::Event::Closed)
            win.close();
    glClear(GL_COLOR_BUFFER_BIT);

    // glDrawArrays(GL_TRIANGLES,0,3);
    glDrawElements(GL_TRIANGLES,3,GL_UNSIGNED_BYTE,(GLvoid*)0);
    win.display();  
}
glDeleteBuffer(1, &ebo);
glDeleteVertexArrays(1, &vbo);    
return 0; 
```

这只是一个猜测，请告诉我它是否有所作为。

# dreamweaver - Dreamweaver 安装问题

> ID：11598661
> 
> 赞同：-2
> 
> 时间：2012-07-22T08:05:24.880
> 
> 标签：dreamweaver

我已经安装了 Adob​​e Dreamweaver CS4，但它没有打开并显示如下错误：

此应用程序无法启动，因为它的并排配置不正确。

我的笔记本电脑上安装了 Windows Vista。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:09:41.807

执行以下一项或多项解决方案：

**解决方案 1：安装 Microsoft Visual C++ 2005 运行时。（仅限 Visual C++ 用户）**

如果您是 Microsoft Visual C++ 用户，请执行以下步骤：

1.  安装 Microsoft Visual C++ 2005 运行时。
2.  重启机器
3.  重新启动套件应用程序。

**解决方案 2：重新启动系统并重新启动应用程序。** 如果您刚刚安装了 Creative Suite，请执行以下步骤：

1.  重新启动机器。
2.  重新启动套件应用程序

[资源](http://helpx.adobe.com/creative-suite/kb/error-side-side-configuration-incorrect.html)

# postgresql - gem install pg 错误，Mac Lion

> ID：11598667
> 
> 赞同：0
> 
> 时间：2012-07-22T08:07:05.533
> 
> 标签：postgresql, gem, pg

我在 Mac OS 10.7.4 上，并且安装了最新版本的 Xcode 和命令行工具。

当我尝试“gem install pg”时出现错误（如下所示）：

```
gem install pg
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

/Users/rdp/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/rdp/.rvm/rubies/ruby-1.9.3-p125/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config
/Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:970:in `block in find_header'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:969:in `find_header'
    from extconf.rb:41:in `<main>'

Gem files will remain installed in /Users/rdp/.rvm/gems/ruby-1.9.3-p125/gems/pg-0.14.0 for inspection.
Results logged to /Users/rdp/.rvm/gems/ruby-1.9.3-p125/gems/pg-0.14.0/ext/gem_make.out 
```

这是我的`mkmf.log`文件的内容：

```
find_executable: checking for pg_config... -------------------- yes

--------------------
"/usr/bin/gcc-4.2 -o conftest -I/Users/rdp/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/x86_64-darwin11.3.0 -I/Users/rdp/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/backward -I/Us\
ers/rdp/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1 -I. -I/Users/rdp/.rvm/usr/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -I/usr/include  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-pa\
rentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-function-declaration  -fno-common -pipe \
conftest.c  -L. -L/Users/rdp/.rvm/rubies/ruby-1.9.3-p125/lib -L/Users/rdp/.rvm/usr/lib -L.  -L/usr/lib     -lruby.1.9.1  -lpthread -ldl -lobjc "
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:34:52.333

启动 XCode，转到首选项，转到下载并安装命令行工具

# sql - 查找第一个缺失序列字符串的 SQL 查询（前缀+否）

> ID：11598669
> 
> 赞同：2
> 
> 时间：2012-07-22T08:07:15.957
> 
> 标签：sql, sql-server

用于查找第一个缺失序列字符串的 T-SQL 查询（前缀+否）

序列可以有前缀 + 连续编号。

ex 序列将是

```
ID
-------
AUTO_500
AUTO_501
AUTO_502
AUTO_504
AUTO_505
AUTO_506
AUTO_507
AUTO_508 
```

所以上面丢失的序列是AUTO_503，或者如果没有丢失的序列，那么它必须返回下一个序列。

同样开始 no 是指定 ex。500 在这种情况下，前缀可以为空，即没有前缀，只有数字作为序列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T09:22:09.580

您可以`LEFT JOIN`使用 shift(+1) 值上的 id 号来按顺序查找间隙：

```
SELECT 
    MIN(a.offsetnum) AS first_missing_num
FROM 
(
    SELECT 500 AS offsetnum
    UNION
    SELECT CAST(REPLACE(id, 'AUTO_', '') AS INT) + 1
    FROM tbl
) a
LEFT JOIN
    (SELECT CAST(REPLACE(id, 'AUTO_', '') AS INT) AS idnum FROM tbl) b ON a.offsetnum = b.idnum
WHERE 
    a.offsetnum >= 500 AND b.idnum IS NULL 
```

* * *

[SQLFiddle 演示](http://www.sqlfiddle.com/#!3/77df3/3/3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T11:02:28.130

使用递归 CTE 动态生成 ID 号的最小值和最大值之间的序列可能会有点复杂，但它似乎有效 -

[活在小提琴上](http://www.sqlfiddle.com/#!3/348b7/26)

```
CREATE TABLE tbl (
  id VARCHAR(55)
);

INSERT INTO tbl VALUES 
('AUTO_500'),
('AUTO_501'),
('AUTO_502'),
('AUTO_504'),
('AUTO_505'),
('AUTO_506'),
('AUTO_507'),
('AUTO_508'),
('509');

;WITH 

  data_cte(id)AS
    (SELECT [id] = CAST(REPLACE(id, 'AUTO_', '') AS INT) FROM tbl)

  ,maxmin_cte(minId, maxId)AS
    (SELECT [minId] = min(id),[maxId] = max(id) FROM data_cte) 

  ,recursive_cte(n) AS 
  (
     SELECT [minId] n from maxmin_cte
     UNION ALL
     SELECT (1 + n) n FROM recursive_cte WHERE n < (SELECT [maxId] from maxmin_cte)
  )

SELECT x.n 
FROM 
     recursive_cte x
     LEFT OUTER JOIN data_cte y ON
        x.n = y.id
WHERE y.id IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T05:37:38.520

检查这个解决方案。在这里你只需要添加标识列。

```
CREATE TABLE tbl (
      id VARCHAR(55),
      idn int identity(0,1)
    );

    INSERT INTO tbl VALUES
    ('AUTO_500'),
    ('AUTO_501'),
    ('AUTO_502'),
    ('AUTO_504'),
    ('AUTO_505'),
    ('AUTO_506'),
    ('AUTO_507'),
    ('AUTO_508'),
    ('509');

    SELECT min(idn+500) FROM tbl  where 'AUTO_'+cast((idn+500) as varchar)<>id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T13:04:12.777

试试这个：

```
with cte as(
select cast(REPLACE(id,'AUTO_','') as int)-500+1 [diff],ROW_NUMBER() 
over(order by cast(REPLACE(id,'AUTO_','') as int)) [rnk] from tbl)
select top 1 'AUTO_'+cast(500+rnk as varchar(50)) [ID] from cte 
where [diff]=[rnk] 
order by rnk desc 
```

[SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/3456a/1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-24T20:24:17.293

有类似的情况，我们有像这样的 R_Cds R01005

```
;with Active_R_CD (R_CD)
As
(
Select Distinct Cast(Replace(R_CD,'R', ' ') as Int) 
from table
where stat = 1)

select Arc.R_CD + 1 as 'Gaps in R Code'
from Active_R_CD as Arc
  left outer join Active_R_CD as r on ARC.R_CD + 1 = R.R_CD
where R.R_CD is null
order by 1 
```

# c# - C#中的简单拼写检查工具

> ID：11598671
> 
> 赞同：0
> 
> 时间：2012-07-22T08:07:26.263
> 
> 标签：c#, user-controls, intellisense, generator

我想要实现的是一个输入字段，您可以在其中输入您认为如何拼写单词，然后它将搜索名为 words.txt 的文本文件并找到拼写相似的单词，然后将结果放入一个新的窗口。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:16:12.610

这是我用过的，听起来正是你想要的：

[通过记住旧的输入来为输入文本提出类似的建议](http://www.codeproject.com/Articles/11007/Make-similar-suggestions-for-input-text-by-remembe)

[您可以在此处的屏幕截图视频中](http://eventanalyser.appointmentsbook.com)看到它的实际效果

ps 我预先填充了一个dictionary.dic 文件以适应一个实例，在上面的示例中，我围绕LogParsers`SQL-Like`语法做了一些其他规则以提供智能感知。高温高压

# c# - C#中的一天中的时间结构

> ID：11598675
> 
> 赞同：4
> 
> 时间：2012-07-22T08:08:06.303
> 
> 标签：c#, datetime, time

我需要在使用时间表的应用程序中以 24 小时格式对天数执行一些计算。例如，17h + 12h = 5h。我试图创建自己的`Time`结构并环绕`TimeSpan`or `DateTime`。它工作正常，但我遇到了要在`ToString`.

事实上，我当然希望我的结构能够在任何文化下工作。起初，我正在考虑将格式委托给一个`DateTime`结构并跳过所有与时间无关的自定义格式。我不能将此任务委托给 a `TimeSpan`，因为它不处理某些文化中使用的 AM/PM。例如，在我的`Time`结构中，我写道：

```
public string Format(string format, IFormatProvider provider)
{
    return TimeFormat.Format(this, format, DateTimeFormatInfo.GetInstance(provider), provider);
}

// ...

internal class TimeFormat
{
    internal string Format(Time time, string format, DateTimeFormatInfo dtfi, IFormatProvider provider)
    {
        DateTime dt = new DateTime(DateTime.MinValue, 1, 1, time.Hours, time.Minutes, time.Seconds, time.Milliseconds);

        /* Here I am checking what the 'format' string is made of 
        and filter-out anything that is not strictly-time related. */

        return dt.Format(format, provider);
    }
} 
```

我查看了`ToString`该结构的方法是如何在`DateTime`mscorlib 中实现的。哇……要考虑的东西太多了。我想或多或少地重写其中的内容，但只保留与时间相关的内容，但所有内容都混在其中，不容易理解。而且我注意到一些绝对不简单的东西也可以处理，例如希伯来语格式等。这将花费我比我期望的更多的时间来重写所有这些！特别是我不想在没有清楚地了解我在做什么的情况下这样做。

所以总结一下：

*   如何创建“所有文化兼容”的时间格式？
*   上一层，我是否使用`DateTime`or的包装器正确处理了问题`TimeSpan`？我不能直接使用 a `TimeSpan`：它适用于负时间（我使用模数将时间严格控制在 0 到 23:59:59.999 之间），它在某些文化中不处理 AM/PM，它使用`Day`s。对我来说，“*一天中的时间*”不同于“*时间跨度*”。
*   我不需要处理时区或 DST，也不需要闰秒，因为我处于与日历无关的上下文中，但我希望能够处理一天中时间的本地化格式。（例如，使用 'H'（或任何希伯来语、中文、泰米尔语或俄语字符）代替 ':' 或 AM/PM 代替 24 小时格式）。

任何指向我一些库或教程的提示或帮助都会有所帮助！

在提出这个问题之前，我查看了[这篇文章并查看了](https://stackoverflow.com/questions/2037283/how-do-i-represent-a-time-only-value-in-net)[这个库](http://code.google.com/p/noda-time/)，但对于我想要实现的目标来说，它看起来太复杂了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T08:12:14.647

（我意识到这是我自己项目的插件，但希望人们会看到它完全相关:)

> 任何指向我一些库或教程的提示或帮助都会有所帮助！

我是[Noda Time](http://nodatime.org)库的主要开发人员，它应该可以满足您的大部分需求。有关初始信息，请参阅[用户指南](https://nodatime.org/3.0.x/userguide/)- 并随时在此处或邮件列表中提出更多问题。

你想要的类型是[`LocalTime`](https://nodatime.org/3.0.x/api/NodaTime.LocalTime.html).

是的，你在这两个方面都是对的，`DateTime`而且`TimeSpan`在这里不合适，而且格式化/解析很复杂:)

在 Noda Time 中，您*可以*像使用普通 BCL 类型一样使用这些方法，`ToString`并且目前有*静态*///`Parse`方法`TryParse`-但这些方法今晚很可能会消失 :) 相反，您应该使用: 定义一次模式（根据格式和文化)，然后将其用于格式化和解析。`ParseExact``TryParseExact`[`LocalTimePattern`](https://nodatime.org/3.0.x/api/NodaTime.Text.LocalTimePattern.html)

在格式化和解析方面，你需要非常清楚你需要什么。Noda Time 在 BCL 上搭载了诸如 AM/PM 指示符之类的东西。事实上，您只处理一天中的时间，这使得它*变得更加*简单，因为没有月/日名称（和不同的日历）担心。您可以将模式用于特定文化`t`的“短”和“长” - 或指定自定义模式。`T`自定义模式通常对机器对机器的通信更有用；标准的对于面向用户的格式更有用。

(Currently you have to "know" that the `t` and `T` patterns exist - although they're documented in the user guide, of course. At some point I'll create methods to make this simpler...)

# java - Anamoly 在线程中同步代码块

> ID：11598676
> 
> 赞同：0
> 
> 时间：2012-07-22T08:08:17.470
> 
> 标签：java, multithreading, synchronized

好吧，我是 java 新手，在 java 线程中实现同步代码块时遇到问题。

```
class btstep extends Thread
{
    private static final Object lock = new Object();
    public void run()
    {
        synchronized(lock)
        {
            System.out.println("3 ");
            System.out.println("4 ");
        }
    }
}

class btevent extends Thread
{
    private static final Object locko = new Object();
    public void run()
    {
        synchronized(locko)
        {
            System.out.println("1 ");
            System.out.println("2 ");
        }
    }
}

public class Interleaving
{
    public static btevent bt = new btevent();
    public static btstep bs = new btstep();

    public static void main(String[] args)
    {
        bt.start();
        bs.start();
    }
} 
```

这个程序的运行输出是

```
1
3
2
4 
```

这不是我想要的。同步的代码块不再是串行的，它交错我想要的输出是

```
1
2
3
4 
```

或者

```
3
4
1
2 
```

我在程序中做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T08:13:32.567

您正在使用两个不同的锁对象（`lock`和`locko`），因此这些块不是互斥的。您需要两个块在同一个锁对象上同步以实现您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:14:46.343

两个线程需要共享同一个锁对象实例，只有这样你才能实现你想要的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T08:15:17.057

同步时，对象的选择*非常*重要。如果你想让两个线程交互，它们必须在*同一个*对象上同步。

最简单的解决方案是使用

```
synchronized(System.out) { 
```

同步您的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T08:17:34.947

要同步 2 个（或更多）代码块，它们必须在同一个对象上同步。在您的情况下，对象是不同的。

# php - 如何将多行结果存储在数组中，然后在 PHP-SQL 中一一读取

> ID：11598677
> 
> 赞同：-3
> 
> 时间：2012-07-22T08:08:21.503
> 
> 标签：php, sql, arrays

```
<?php
mysql_connect("your.hostaddress.com", "username", "password") or die(mysql_error());
mysql_select_db("Database_Name") or die(mysql_error()); 
$result = mysql_query("SELECT <column name> FROM <table name>"); 
$data=array();  // to create an array to store result
while ( $row= mysql_fetch_array( $result ))
   {
    $data = $row;
   }

?> 
```

此查询返回多行结果，例如：

```
abc
def
ghk
...
...
...
...
... 
```

我的问题是如何更改循环结构，以便将输出值的每一行一一馈送到解析器。

使用上面的代码片段，只有一个被提供给解析器。但我希望每一行都被一一提供给解析器。

我找到了解决方案。有用。

```
<?php 
 mysql_connect("your.hostaddress.com", "username", "password") or die(mysql_error()); 
 mysql_select_db("Database_Name") or die(mysql_error());  
$result = mysql_query("SELECT <column name> FROM <table name>");  
while ( $row= mysql_fetch_array( $result ))  
{  
echo $row['column name']; // to check does it works fine. 
// pass the variable " $row['column name'] " as paramter to parser function it works.  
//I have tried it. 
}  

?> 
```

我使用错误的方式输入数组。最好的方法是将循环内的变量直接传递给解析器函数。然后我们不需要任何外部数组来存储结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T08:20:20.050

我对你的问题的看法。有点难以理解你在问什么。

> 如何更改循环结构，以便将输出值的每一行一一馈送到**解析器。**

**解析器**在哪里？****

 **```
<?php
mysql_connect("your.hostaddress.com", "username", "password") or die(mysql_error());
mysql_select_db("Database_Name") or die(mysql_error()); 
$result = mysql_query("SELECT <column name> FROM <table name>"); 
$data=array();  // to create an array to store result
while ( $row= mysql_fetch_array( $result ))
{
    //here you did the mistake if you wanted to store it in a array (like you indicated in the above comment)
    $data[] = $row;

    // Pass anything to the parser here
}

// Or here you can pass it to the parser
// parser($data);

?> 
```

> 只有一个提供给解析器。但是我希望每一行都被一一提供给解析器。

好的，我假设这个是这样说的：

只有一行输入到解析器（由于我在上面显示的错误）。您要处理所有行

这是解决方案：

```
<?php
mysql_connect("your.hostaddress.com", "username", "password") or die(mysql_error());
mysql_select_db("Database_Name") or die(mysql_error()); 
$result = mysql_query("SELECT <column name> FROM <table name>"); 

$answer = array();  // to create an array to store result

while ( $row= mysql_fetch_array( $result ))
   {

    $answer[] = parser($row);
   }

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:14:59.617

使用 PDO 并使用 fetchAll()

```
$pdo_options = array(
    PDO::ATTR_PERSISTENT => true,
    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8'
    );
$dataBase = new PDO('mysql:host=ipAddress;dbname=yourDBname', 'user', 'password', $pdo_options);

$request = $dataBase->prepare('SELECT col1, 
col2 
FROM table1 
WHERE colx = :var1');

$request->execute(array('var1' => $_POST['var1']));
$results = $request->fetchAll();
$request->closeCursor(); 
```**

# vb.net - vb.net 进程启动和停止

> ID：11598678
> 
> 赞同：1
> 
> 时间：2012-07-22T08:08:32.980
> 
> 标签：vb.net

如何从下面的代码中创建一个流程，以便我知道它何时开始和结束？

提前致谢 ：）

```
Public Shared Function EmptyDirectory(ByVal mydir As String)
    Try

        'delete all directories
        Dim myFolder As String
        For Each myFolder In Directory.GetDirectories(mydir)
            Directory.Delete(myFolder, True)
        Next

        'delete all files
        Dim myFile As String
        For Each myFile In Directory.GetFiles(mydir)
            File.Delete(myFile)
        Next

    Catch Ex As Exception
        'MsgBox(ex.Message)
    End Try

    Return False

End Function 
```

仅供参考：这就是我认为可行的方法：

```
 Dim myProcess As System.Diagnostics.Process = New System.Diagnostics.Process()
            myProcess.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden
            myProcess.Start(EmptyDirectory(DestDir))
            Dim ClearDirectoryStartDateTime As String = DateTime.Now.ToString("d") & " " & DateTime.Now.ToString("HH:mm:ss")
            StatusBoxName.Items.Add(ClearDirectoryStartDateTime & " - Cleaning")
            ' Wait until it ends.
            myProcess.WaitForExit()
            ' Close the process to free resources.
            myProcess.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:43:02.163

您可能想使用线程。MSDN上有一篇有趣的文章：http: [//msdn.microsoft.com/en-us/library/aa289178 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa289178(v=vs.71).aspx)

# ruby-on-rails - 导致错误的属性方法

> ID：11598689
> 
> 赞同：1
> 
> 时间：2012-07-22T08:10:56.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 Rails 第 4 版（rails 3.2+）进行敏捷 Web 开发。长话短说，我最终搞砸了，所以我将正确的代码从书籍网站复制到正确的文件中。具体来说，我正在做一些功能测试，这是我替换的代码。当我跑的时候：

```
rake test:functionals 
```

我有：

```
0 failures, 6 errors 
```

每个错误都是这样的：

```
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: 
```

之前处理过这个错误，我能够推断出 6 个错误来自我复制和粘贴的代码中的 6 个属性方法。以下是来自各种功能测试的一些示例：

```
test "should update cart" do
    put :update, id: @cart, cart: **@cart.attributes**
    assert_redirected_to cart_path(assigns(:cart))
  end

test "should update order" do
    put :update, id: @order, order: **@order.attributes**
    assert_redirected_to order_path(assigns(:order))
  end

test "should update line_item" do
    put :update, id: @line_item, line_item: **@line_item.attributes**
    assert_redirected_to line_item_path(assigns(:line_item))
  end 
```

现在，我也知道错误是由于属性 b/c 如果我用哈希替换它们就会消失：

```
model: {attribute: value, attribute: value, attribute: value, etc. } 
```

代替：

```
model: @model.attributes 
```

所有被分配的属性都在我的模型中的 attr_accessible 方法中。因此，我真的无法弄清楚为什么属性方法不起作用。任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:37:55.390

你确定当你`@model.attributes`用哈希替换时，你输入了相同的属性吗？看起来`attributes`方法返回的一些模型属性没有被列入白名单`attr_accessible`，但是当你用哈希替换它时，你只使用列入白名单的属性。

# python - 在 Ubuntu 上导入 matplotlib

> ID：11598690
> 
> 赞同：2
> 
> 时间：2012-07-22T08:10:59.023
> 
> 标签：python, ubuntu, matplotlib

所以我下载并安装了matplotlib。奇怪的是，当它们被放置在 home/user/Desktop 中时，我可以很好地运行这些示例，但是当我将它们移动到 home/user/Documents 时，它们停止工作并且我收到以下消息。他们阻止 matplotlib 导入的 Documents 文件夹有什么特别之处吗？

```
Traceback (most recent call last):
  File "contour_manual.py", line 4, in <module>
    import matplotlib.pyplot as plt
  File "/usr/local/lib/python2.7/dist-packages/matplotlib/pyplot.py", line 23, in <module>
    from matplotlib.figure import Figure, figaspect
  File "/usr/local/lib/python2.7/dist-packages/matplotlib/figure.py", line 18, in <module>
    from axes import Axes, SubplotBase, subplot_class_factory
  File "/usr/local/lib/python2.7/dist-packages/matplotlib/axes.py", line 8454, in <module>
    Subplot = subplot_class_factory()
  File "/usr/local/lib/python2.7/dist-packages/matplotlib/axes.py", line 8446, in subplot_class_factory
    new_class = new.classobj("%sSubplot" % (axes_class.__name__),
AttributeError: 'module' object has no attribute 'classobj' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T08:32:09.397

您的文件夹`new.py`中有文件`Documents`吗？如果有，请尝试将其重命名为其他名称。

matplotlib 模块`axes.py`导入`new`，如果您`new.py`的 Documents 文件夹中有一个文件，这将导致 Python 加载它而不是内置`new`模块。

# php - PHP和MySQL在注册时插入，如果注册表成功但挂起表失败怎么办

> ID：11598691
> 
> 赞同：-2
> 
> 时间：2012-07-22T08:10:59.117
> 
> 标签：php, mysql, insert

我有 2 个用于用户注册的表。1 是用户，2 是待处理的。当用户提交注册表单时，我必须使用两个 insert 和 mysql_query() 。现在我想知道如果第二个失败了怎么办？这一定很令人不安。:-(

User 和 Email 在 user 表中都是唯一的。不允许重复数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:16:04.310

使用事务（InnoDB 数据库引擎）写入 2 个插入。如果一个插入失败，则回滚事务。

对于唯一数据列，使用 UNIQUE 索引。

# javascript - 在单个 HTML 页面中单击 CSS 或 Javascript 时 div 标签之间的平滑过渡

> ID：11598696
> 
> 赞同：0
> 
> 时间：2012-07-22T08:12:00.733
> 
> 标签：javascript, html, css

我在单个页面上的不同 div 标签之间实现平滑导航时遇到问题。

假设我有一个包含 5 个不同标签的页面，并且它们中有一个锚标签，它将重定向到同一页面中的其他一些 div 标签。现在，如果我单击 div 标签内的一个锚标签，它会重定向到同一页面中的其他 div 标签，这种效果将非常简单且没有平滑度，只是简单的拖放。

所以我需要让这个效果具有某种滑动效果。像[这样](http://gnosh.co.uk/)

在上面的站点中，当您单击“WHAT'S YOUR G'NOSH”标签时，您会向下滑动到相应的挖掘。我需要这个功能并尝试过 moz-transition: ease 0.6s。以及所有这些，但尚未找到解决方案，请帮助。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:16:34.130

请参阅[动画滚动效果](http://djpate.com/2011/01/01/animated-scrollto-effect-jquery-plugin/)。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T08:29:09.770

G'NOSH 正在使用 jQuery arctic_scroll 插件进行内部链接滚动。[你可以在这里](http://jsbin.com/izocuz)找到它，它是指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T08:52:10.033

[它的简单人使用这个插件： http](http://www.kryogenix.org/code/browser/smoothscroll/) ://www.kryogenix.org/code/browser/smoothscroll/

将上面的插件添加到`<head>`

**任何链接的html：**

`<a href="#about">About me</a>`

**单击链接时显示的 Div：**

`<div id="about">I am UI/Ux designer born with a pair of headphone</div>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T08:50:32.033

这是纯 CSS 解决方案，但仅适用于现代浏览器

[http://tympanus.net/codrops/2012/06/12/css-only-responsive-layout-with-smooth-transitions/](http://tympanus.net/codrops/2012/06/12/css-only-responsive-layout-with-smooth-transitions/)

# android - Android 2.1 gridview 不显示

> ID：11598698
> 
> 赞同：2
> 
> 时间：2012-07-22T08:12:16.637
> 
> 标签：android, gridview

我正在尝试在网格视图中显示一些图像。我的代码适用于 android 2.2 和 2.3，但不适用于 2.1

在 android 2.1 中，网格始终为空/不可见。

我用于网格视图的代码是这样的：

```
gridview = (GridView)findViewById(R.id.level_select);
gridview.setAdapter(new LevelImagesAdapter(this, levelsCount,
            maxLevel, listener));
gridview.invalidate(); 
```

LevelImagesAdapter 是：

```
public class LevelImagesAdapter extends BaseAdapter {

    private View.OnClickListener listener;
    private Context mContext;
    private int count;
    private int maxLevel;

    public LevelImagesAdapter(Context c, int maxLevel, int count, View.OnClickListener listener) {
        this.mContext = c;
        this.listener = listener;
        this.count = count;
        this.maxLevel = maxLevel;
    }

    @Override
    public int getCount() {
        return count;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Button view;
        if (convertView == null) {
            view = new Button(mContext);
            view.setOnClickListener(listener);
            view.setLayoutParams(new GridView.LayoutParams(GridView.LayoutParams.WRAP_CONTENT, GridView.LayoutParams.WRAP_CONTENT));
            view.setPadding(5, 5, 5,5);
        }
        else {
            view = (Button) convertView;
        }

        if (position <= maxLevel) {
            view.setBackgroundResource(R.drawable.level_unlock);
            view.setText((position + 1) + "");
            view.setTextColor(Color.WHITE);
            view.setTextSize(16.0f);
        }
        else {
            view.setBackgroundResource(R.drawable.level_lock);
            view.setText("");
        }
        return view;
    }

} 
```

据我所知，适配器已创建，但从未调用 getView 方法。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T18:01:18.360

您`getItem(position)`必须返回的东西不是`NULL`

确保`getCount()`返回一个非零数字。

检查并确保您在布局中设置了 GridView 布局参数，`fill_parent`而不是`match_parent`较低的 API 级别不支持`match_parent`，因此`fill_parent`向后兼容。GridView 可以隐藏，在这种情况下它不会调用`getView`。

# mysql - mysql 日志文件是空的，尽管我似乎已经设置了一切

> ID：11598701
> 
> 赞同：6
> 
> 时间：2012-07-22T08:12:34.700
> 
> 标签：mysql, logging

我正在尝试`Ver 14.14 Distrib 5.5.22`使用 readline 6.2 获取在 debian-linux-gnu (x86_64) 上运行的 mysql 服务器的日志文件

基于几个网站，我在以下位置取消了对这些行的注释`/etc/mysql/my.cnf`：

```
general_log_file        = /var/log/mysql/mysql.log 
general_log             = 1 
```

运行 mysql 后，我检查了它`/var/log/mysql/mysql.log`没有创建。一个网站建议运行两个命令：

```
touch /var/log/mysql/mysql.log
chown mysql:mysql /var/log/mysql/mysql.log 
```

这没有帮助：仍然没有日志！该文件为空。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-22T09:03:01.650

更新文件后是否重新启动服务器`my.cnf`？

请发出：

```
SELECT @@global.general_log;
SELECT @@global.general_log_file;
SELECT @@global.log_output; 
```

这些是服务器看到的事实上的变量。您可以按如下方式动态更改 tgem：

```
SET GLOBAL general_log:=1;
SET GLOBAL log_output := 'FILE'; 
```

此外，作为最后的手段，请尝试：

```
FLUSH LOGS; 
```

关闭+重新打开日志文件描述符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-09T09:07:47.413

我在 Ubuntu 14.04 上遇到了与 MySQL 5.5 相同的问题。权限和配置正常，但 FLUSH LOGS 返回

```
ERROR 1105 (HY000): Unknown error 
```

原来，这个问题是由不正确的 AppArmor 设置引起的。

如果是这种情况，/var/log/syslog 文件包含如下行

```
<from kernel>: apparmor="DENIED" operation="mknod" profile="/usr/sbin/mysqld" name="/var/log/mysql/mysql.log" pid=16798 comm="mysqld" requested_mask="c" denied_mask="c" fsuid=115 ouid=115 
```

修复文件 /etc/apparmor.d/usr.sbin.mysqld 中的 AppArmor 配置，然后重新启动 AppArmor 和 MySQL。

# javascript - javascript中的表单验证可能不起作用

> ID：11598702
> 
> 赞同：0
> 
> 时间：2012-07-22T08:12:42.703
> 
> 标签：javascript, jquery, forms, validation, jquery-validate

我正在处理这个表单，假设在提交之前验证表单

```
$(document).ready(function() {
    $("#form3").validate();
    if ($('#form3').valid()) $('#form3').submit();
}); 
```

但问题是：加载表单时它会打印（空字段错误）。

* * *

更新：该功能现在正在使用 Horraaay :) 使用以下代码：

```
 <script>
      $(document).ready(function(){
      $("#form3").validate();
     });
     </script> 
```

唯一的问题是输入表单名称。我使用“提交”作为输入表单的名称，但之前使用了不同的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:14:28.493

将您的代码放在表单提交事件上。像这样的东西：

```
$(document).ready(function()
{
    $("#form3").validate();
    $("#form3").submit(function(event)    
    {
        if (!$(this).valid()) 
        {
            event.preventDefault();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:54:48.257

我解决了这个问题，现在它可以工作了......这是一个小错误！

我将提交按钮名称和 ID 更改为（提交）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:36:43.310

我认为默认情况下，成功验证后它将提交表单。但是我不知道您为什么需要重新提交表格。

如果您需要手动提交，您可以使用 SubmitHandler 地方来提交您的表单。

```
$("#form3").validate({
   submitHandler: function(form) {       
     form.submit();
   }
}); 
```

# java - 无法编译从 Restlet.org 获得的样本

> ID：11598708
> 
> 赞同：-1
> 
> 时间：2012-07-22T08:14:02.953
> 
> 标签：java, restlet

当我尝试使用位于 [http://www.restlet.org/documentation/1.1/firstSteps的 sources.zip 编译示例时](http://www.restlet.org/documentation/1.1/firstSteps)

这是详细信息

`C:\mwb\srvr\firstSteps10>javac -classpath "C:\Program Files\Restlet Framework\Edition Java SE\2.0.14\src\org.restlet" ServerApp10.java ServerResource10.java`

`Note: Some input files use or override a deprecated API.`

`Note: Recompile with -Xlint:deprecation for details.`

`Note: C:\Program Files\Restlet Framework\Edition Java SE\2.0.14\src\org.restlet\org\restlet\service\TaskService.java uses unchecked or unsafe operations.`

`Note: Recompile with -Xlint:unchecked for details.`

我有 java 版本“1.7.0_05”我试过 restlet 2.0.14 和 2.1 RC5

请让我知道我在这里缺少什么 - 任何建议或指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:59:43.560

您可以使用[Eclipse IDE](http://www.eclipse.org/downloads/)进行编译和开发。我建议你下载 Java EE 版本。

# apache - 为什么在 htaccess 中使用 (.*) 不会产生预期的结果？

> ID：11598716
> 
> 赞同：0
> 
> 时间：2012-07-22T08:15:24.497
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试获取所有不是“/”的字符..但是，它总是返回一个错误..我正在访问的 url 是`http://localhost/framework/help/jh/ghjghj`..我打算使用 (.*) 来实现这一点并存储所有字符帮助/jh/ghjghj

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^(.*)$ index.php?t=$1 
```

但是在我的 index.php 文件中，当我打印 $_REQUEST['t'] 时，它返回给我

```
array(1) { ["t"]=> string(9) "index.php" } 
```

为什么它不将 help/jh/ghjghj 存储在 var t 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T08:29:27.010

尝试

```
RewriteRule ^(.*)$ index.php?t=$1 [L,QSA] 
```

# java - 以编程方式启动 Windows 开始菜单

> ID：11598722
> 
> 赞同：-1
> 
> 时间：2012-07-22T08:16:48.467
> 
> 标签：java

我正在开发一个 Java 应用程序，我需要以编程方式打开 Windows 开始菜单。

我为此搜索了 cmd 命令，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T08:21:10.113

您可以尝试使用`Robot`该类来模拟 Win 键上的按键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T08:28:46.170

一种方法是通过 Windows shell。

尝试这样做：

```
set wShell=wscript.createobject("wscript.shell")
 wShell.sendkeys "^{ESC}"
 Set WshShell = Nothing 
```

通过使用此处概述的方法-> [http://www.javaquery.com/2011/02/how-to-execute-microsft-windowss-shell.html](http://www.javaquery.com/2011/02/how-to-execute-microsft-windowss-shell.html)

# android - 将 PDF 页面下载到字符串

> ID：11598724
> 
> 赞同：0
> 
> 时间：2012-07-22T08:17:05.377
> 
> 标签：android, eclipse, string, pdf, download

完成了一些基本教程后，我开始在 Eclipse 中制作我的第一个真正的 android 应用程序。我希望这个应用程序检查 EditText 中的文本是否与 PDFpage 上的文本匹配（这个：[http](http://www.augustinianum.eu/roosterwijzigingen/14062012.pdf) ://www.augustinianum.eu/roosterwijzigingen/14062012.pdf（它包含我学校的时间表更改））。我发现了如何让应用程序检查 EditText 中的文本是否与字符串匹配（使用方法 contains()），所以现在我唯一需要做的就是将该 PDF 页面的所有文本下载到细绳。但我不知道该怎么做。或者是否有一种方法可以让我检查 PDFpage 是否包含某个单词，而无需将整个网站下载到字符串中？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:22:42.453

PDF 不是文本文件，它是二进制文件。因此，您不应将数据下载到字符串中，而应将其下载到字节数组中。然后，您必须使用某些 PDF 库从 PDF 中提取文本数据。然后，您可以在**该**文本中搜索您的关键字。

最有趣的部分是从 PDF 中提取文本。您可以在此站点上查看其他尝试相同的问题。这是一个 [快速搜索](https://stackoverflow.com/search?q=[java]+[pdf]+extract+text&submit=search)或这个。

# android - getSupportFragmentManager 在兼容性库中失败

> ID：11598725
> 
> 赞同：0
> 
> 时间：2012-07-22T08:17:20.690
> 
> 标签：android, android-fragments, android-dialog, android-dialogfragment

我在活动中显示一个对话框片段，尝试使用 show() 和 add() 方法。代码如下

```
HelpDialogFragment hdf = HelpDialogFragment.newInstance();
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.add(hdf, "dialog");
ft.commit(); #crash here 
```

我有时会从上面的代码中得到 IllegalStateException 错误，崩溃日志如下所示

```
java.lang.IllegalStateException: Activity has been destroyed
at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1329)
at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:548)
at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:532)
at com.delight.activities.HomeActivity.showHelp(HomeActivity.java:311) 
```

行号 `ft.commit()`上面代码中提到了HomeActivity.java 中的 311 。我的活动从兼容性库（最新更新）中扩展了 FragmentActivity。如果我使用`show()`方法，也会发生同样的崩溃。

```
HelpDialogFragment hdf = HelpDialogFragment.newInstance();
hdf.show(getSupportFragmentManager(), "dialog");  #same crash here 
```

所以我得出了一个`getSupportFragmentManager()`导致我出现问题的结论，我不明白的是，我在代码的哪一部分使用了已被破坏的活动，据我所知，`getSupportFragmentManager()`应该把经理还给我存在的活动。

我需要一些帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:49:23.207

查看对话框片段你只需要调用 dialogfrag.show(Fmanager,tag); 通过事务添加它会产生异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:10:46.750

你的类应该扩展 FragmentActivity 而不是 Activity。这为我解决了问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:00:28.390

使用 getFragmentManager 而不是 getSupportFragmentManager

```
dialog.show(getFragmentManager(), "submitting"); // The second parameter doesn't really matter. 
```

如果这不起作用，请扩展 DialogFragment 来执行此操作。关键是在构建对话框时使用您的 Activity 而不是使用支持库。

```
dialog = new AlertDialogFragment(title, message);
dialog.show(getFragmentManager(), "submitting"); 
```

警报对话框片段：

```
 public class AlertDialogFragment extends DialogFragment {

        static final String TAG_TITLE = "title";
        static final String TAG_MSG = "message";

        public AlertDialogFragment(){

        }

        public AlertDialogFragment(String title, String message) {
            Bundle b = new Bundle();
            b.putString(TAG_TITLE, title);
            b.putString(TAG_MSG, message);

            setArguments(b);
        }

        public AlertDialogFragment newInstance(String title, String message) {
            AlertDialogFragment frag = new AlertDialogFragment();
            Bundle b = new Bundle();
            b.putString(TAG_TITLE, title);
            b.putString(TAG_MSG, message);

            frag.setArguments(b);
            return frag;
        }

        public Dialog onCreateDialog(Bundle savedInstanceState) {
            String title = getArguments().getString(TAG_TITLE);
            String message = getArguments().getString(TAG_MSG);
                // Use getActivity()!
            return new AlertDialog.Builder(getActivity()).setTitle(title)
                    .setMessage(message)
                    .setNegativeButton("Dismiss", new OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            dismiss();
                        }
                    })
                    .setOnCancelListener(new OnCancelListener() {

                        @Override
                        public void onCancel(DialogInterface dialog) {
                            Log.d(TAG, "Dialog cancel");
                        }
                    }).create();
        }

        @Override
        public void onCancel(DialogInterface dialog) {
            Log.d(TAG, "Cancel Dialog");
            super.onCancel(dialog);
        }

        @Override
        public void onDismiss(DialogInterface dialog) {
            Log.d(TAG, "Dismiss Dialog");
            super.onDismiss(dialog);
        }
    }

} 
```

# sql - 在数据库中存储电话号码

> ID：11598737
> 
> 赞同：0
> 
> 时间：2012-07-22T08:19:44.230
> 
> 标签：sql, optimization, storage, database

这是在一次采访中被问到的，我必须为每个员工存储多个电话号码。我回答说我们可以有一个逗号分隔的数字串。下一个问题是如果字符串的大小变得非常长（假设有 1000 个数字）怎么办。想出一个更好的解决方案。我一无所知。有人可以建议解决此问题的正确方法吗？

编辑：我确实建议我们将列数冻结为某个最大数并根据需要插入 aa，但在大多数情况下它会导致许多 NULL 值，所以这将是一个糟糕的设计。

编辑：我只是想知道他们是否确实存在解决此问题的其他方法，而不是按照以下评论之一的建议添加一个新表（我确实将其作为答案）。顺便说一句，这是面试官的一些技巧还是确实存在其他解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T08:23:26.353

一个简单的 1:n-Relation 怎么样？为电话号码创建一个单独的表，如下所示：

```
Phone_Numbers(id, employee_id, phone_number_type, phone_number) 
```

这样，您可以为每位员工添加数千个电话号码，而不会出现问题。

一般来说：在数据库字段中存储逗号分隔的任何内容**都不**是一个好主意。您应该阅读[Database Normalization](http://en.wikipedia.org/wiki/Database_normalization)。通常 3NF 是一个很好的折衷方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T06:52:50.290

这里电话号码是一个多值属性。您可以使用逗号分隔值并将上限和下限设置为多值属性以使其有意义，但是当您的面试官要求输入 1000 个数字条目时，最好为表格提供原子性并为每个电话创建一个新行数字。这将增加行数。然后，您可以执行标准化。这是一个多值依赖的例子，所以你必须到 4NF 才能解决这个问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-22T09:21:03.810

你说你想将长字符串存储到数据库中，我认为数据库不能是理性数据库，它可以是 nosql db。如果字符串很长，您可以选择存储每个数字的差异，而不是完全存储每个数字。我认为这种方式可以节省磁盘空间。例如。如果要存储 12345、12346、12347、12358 可以存储 12345、1、2、3

# c# - C#：在给定参数长度后拆分数字序列

> ID：11598738
> 
> 赞同：0
> 
> 时间：2012-07-22T08:20:02.773
> 
> 标签：c#, .net, c#-4.0

我有一个类似这样的号码：12345668788451223356456898941220036696897894

现在，问题是如何在每 8 位数字之后拆分数字。也就是说，我需要输出为：12345668

78845122 以此类推，直到号码结束。如果我将它转换为字符串，我没有一个方法，所以我只能用长度参数来分割它。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T08:24:00.257

**字符串方法**

> 如果我将它转换为字符串，我没有一个方法，所以我只能用长度参数来分割它。

嗯，你有`Substring`，不是吗？您可以使用 LINQ：

```
var numbers = Enumerable.Range(0, bigNumber.Length / 8)
                        .Select(x => bigNumber.Substring(x * 8, 8)
                        .ToList(); 
```

或直接循环：

```
var numbers = new List<string>();
for (int i = 0; i < bigNumber.Length / 8; i++)
{
    numbers.Add(bigNumber.Substring(i * 8, 8);
} 
```

如果您需要以 a 结尾`List<int>`，只需在其中添加一个调用即可`int.Parse`。

（您应该首先检查输入字符串长度是否为 8 的倍数。）

**大整数方法**

目前尚不清楚您以什么形式开始使用此号码。如果是`BigInteger`，您可以继续使用[`DivRem`](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.divrem.aspx)：

```
BigInteger value = ...;
List<BigInteger> results = new List<BigInteger>();
BigInteger divisor = 100000000L;
for (int i = 0; i < count; i++)
{
    BigInteger tmp;
    value = BigInteger.DivRem(value, divisor, out tmp);
    results.Add(tmp);
} 
```

请注意，我在`count`这里使用而不是循环直到`value`为 0，以防您有很多前导 0。您需要知道要提取多少个数字:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T08:25:30.677

使用此正则表达式在每 8 位数字后拆分，

```
\d{1,8} 
```

或者

```
(\d{1,8}) 
```

## 输出：

```
12345668
78845122
33564568
98941220
03669689
7894 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T08:32:20.830

您是否尝试过使用

```
string string.substring(int startIndex,int length) 
```

在您的情况下，您可以编写一个循环从字符串中提取 8 位数字，直到提取所有数字

```
string sDigits = "12345668788451223356456898941220036696897894";
int iArrLen = sDigits.length / 8;
string[] sArrDigitList = new string[iArrLen];

for(int i=0; i < sDigits.length; i++)
{
   sArrDigitList[i] = sDigits.substring(0, 8);
   sDigits = sDigits.substring(sDigits.length-8);
} 
```

# android - 希望在任何应用程序关闭时显示一个消息框

> ID：11598745
> 
> 赞同：0
> 
> 时间：2012-07-22T08:22:04.513
> 
> 标签：android

我是 android 编程新手 我担心的是：每当关闭特定应用程序时，我希望显示一个消息框，要求用户保存与应用程序相关的某些文件（例如谷歌地球中的 kml 文件）。我需要为它开发一个应用程序，还是可以通过更改我的手机/系统设置来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:28:15.387

“关闭”/暂停应用程序时，应用程序的任何数据都应保存在后台，而不是不关闭应用程序并显示对话框（这真的很不直观）。还可以查看[活动生命周期](http://developer.android.com/guide/components/tasks-and-back-stack.html)，了解为什么 Android 应用程序不会“关闭”而是暂停，并且它们的生命周期由 Android 系统管理。

# c# - C# XmlException 因为文件名

> ID：11598750
> 
> 赞同：-1
> 
> 时间：2012-07-22T08:23:21.457
> 
> 标签：c#, xml, exception

我正在为游戏开发启动器/更新器。更新程序从服务器上的 xml 文件中获取数据。到目前为止，我的代码（其中有一些来自其他代码的引用）运行良好。我对其进行了测试，它下载的文件很好，但是，我用来测试它的文件是 jpg 的。启动器需要下载的实际文件是一系列字符，例如： (e}xP7,iIlM7Q8=&@vR2-sv~]9.5 下载这些文件时每次都会抛出异常。我对 C# 不是很好所以我想我会在我总能找到答案的地方寻求帮助。;)

我的 XML 示例：

```
<theupdates>

<update>
    <version>1.1</version>
    <file>(e}xP7,iIlM7Q8=&@vR2-sv~]9.5.$}t]8</file>
    <path>http://test.m-containers.com/Updates/</path>
  </update>

  <update>
    <version>1.1</version>
    <file>;V;xP,S]PXKr8;{(8HO2NJ H-g;PAo_yTuIV</file>
    <path>http://test.m-containers.com/Updates/</path>
  </update>

<update>
    <version>1.1</version>
    <file>^_HZpQ;Xpi{QS`Ku,}@#B}JYW}Q+;gdO0</file>
    <path>http://test.m-containers.com/Updates/</path>
  </update>

<update>
    <version>1.1</version>
    <file>{G'A4l7O8]~nb(a!mrK5hE)o</file>
    <path>http://test.m-containers.com/Updates/</path>
  </update>

</theupdates> 
```

我的 C# 代码示例：

```
 string Root = AppDomain.CurrentDomain.BaseDirectory;

    XDocument serverXml = XDocument.Load(@"http://test.m-containers.com/Updates/Updates.xml");
    foreach (XElement update in serverXml.Descendants("update"))
    {
        string version = update.Element("version").Value;
        string file = update.Element("file").Value;
        string path = update.Element("path").Value;

        string sUrlToReadFileFrom = path + "V" + version + "/" + file;

        string sFilePathToWriteFileTo = Root + "\\Resource\\" + file;

        Uri url = new Uri(sUrlToReadFileFrom);
        System.Net.HttpWebRequest request = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(url);
        System.Net.HttpWebResponse response = (System.Net.HttpWebResponse)request.GetResponse();
        response.Close();

        Int64 iSize = response.ContentLength;

        Int64 iRunningByteTotal = 0;

        using (System.Net.WebClient client = new System.Net.WebClient())
        {
            using (System.IO.Stream streamRemote = client.OpenRead(new Uri(sUrlToReadFileFrom)))
            {
                using (Stream streamLocal = new FileStream(sFilePathToWriteFileTo, FileMode.Create, FileAccess.Write, FileShare.None))
                {
                    int iByteSize = 0;
                    byte[] byteBuffer = new byte[iSize];
                    while ((iByteSize = streamRemote.Read(byteBuffer, 0, byteBuffer.Length)) > 0)
                    {
                        streamLocal.Write(byteBuffer, 0, iByteSize);
                        iRunningByteTotal += iByteSize;

                        double dIndex = (double)(iRunningByteTotal);
                        double dTotal = (double)byteBuffer.Length;
                        double dProgressPercentage = (dIndex / dTotal);
                        int iProgressPercentage = (int)(dProgressPercentage * 100);

                        Downloader.ReportProgress(iProgressPercentage);
                    }

                    streamLocal.Close();
                }

                streamRemote.Close();
            }
        }
    } 
```

有没有办法让它，基本上，当它读到这些字符时不会发脾气，或者可能更合理，一个更好的方法来解决这个问题？

我感谢任何人可以提供的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:38:49.797

> 有没有办法让它，基本上，当它读到这些字符时不会发脾气，或者可能更合理，一个更好的方法来解决这个问题？

是的。使其成为有效的 XML 文件。这不是有效的 XML：

```
<file>(e}xP7,iIlM7Q8=&@vR2-sv~]9.5.$}t]8</file> 
```

`&`应该`&amp;`是。

我的猜测是服务器没有使用适当的 XML API 来生成 XML - 它只是以一种愚蠢的方式写出文本。永远不要那样做。操作 XML 时，请*始终*使用 XML API，以便它会为您处理此类事情。

您*不必*在客户端上解决此问题 - 为什么读取此数据的所有内容都应容纳损坏的写入器？目前尚不清楚您是否在控制服务器代码（在这种情况下您应该修复它）或者它是否是第三方代码（在这种情况下您应该大声地对他们大喊大叫）。无论哪种方式，在公然不是 XML 的情况下将某些东西宣传为 XML 只是一个坏主意。

# javascript - 将数据存储在 javascript 中以进行服务器端处理

> ID：11598755
> 
> 赞同：0
> 
> 时间：2012-07-22T08:24:01.607
> 
> 标签：javascript

问题很简单。我在 HTML 中有类似棋盘的东西。字段具有坐标，存储在 ID 属性 (ROW|COLUMN) 中单击特定字段使其标记/取消标记。`<input type="hidden"/>`更重要的是，所选字段的行和列以ROW|COLUMN,ROW|COLUMN,...的形式存储在a中

对于每次点击，我都必须处理 input hidden 的值，以检查该字段是否已存储、添加新字段、删除现有字段等。这有点尴尬。有没有更好的方法？或者也许这是最好的方法？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:03:17.963

您不必将字段状态存储在输入字段中。最好使用全局 JavaScript 数组或操作 DOM 并在将其发送到服务器之前对其状态进行序列化。

这是 JSFiddle 中的一些示例代码：http: [//jsfiddle.net/U2D9Q/](http://jsfiddle.net/U2D9Q/)

重要的部分是列的类名

```
$td.bind("click", function(e) {
    $(this).toggleClass("selected");
}); 
```

以及单击按钮时它是如何序列化的

```
var serialize_table = function() {
    var output = new Array();

    $("table tbody").children().each(function(y) {
        var row = new Array();

        $(this).children().each(function(x) {
            row[x] = $(this).get(0).className;
        });

        output[y] = row;
    });

    return output;
} 
```

我使用 jQuery 来保持代码整洁。随意使用您喜欢的任何 JS 框架或编写原生 JS。

# php - 如何统计静态页面的浏览量？

> ID：11598756
> 
> 赞同：2
> 
> 时间：2012-07-22T08:24:07.563
> 
> 标签：php, mysql, static, pageviews

我在我的网站上为不同的文章创建了静态页面，但问题是它不是动态页面，这意味着它只创建一次就完成了。所以现在我担心如何计算页面浏览量？我的意思是当一些用户通过搜索引擎访问时:(数据库中的计数没有+1，它只记录有人搜索该特定页面然后来的页面浏览量。这样，通过搜索引擎访问的用户不计算在内.. .

所以我有一个想法...

我们可以放一些 ping php 类型的代码，当访问页面时，无论是通过谷歌还是任何将被 ping 的地方，它都会更新 mysql 中的特定表...

请指导我...如果我正确与否...为我提供 php 代码...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:32:19.893

尝试安装谷歌分析。这意味着您在开始时将一些 JS 代码插入到您的页面中。然后，每次用户打开页面（并且没有禁用他的 JS，这是最有可能的情况）时，JS 启动并向 GA 发出一些秘密请求，记录这次访问。

曾几何时，我看到了一个使用 GA 计数器增加 TRULY 静态页面的技巧，通过一些 PHP 预处理器挂接到 via `.htaccess`，如下所示`Action text/html /cgi-bin/add_ga.php`：这涉及解析 HTML 并将几个`<script>`标签插入到标题中，然后将页面提供给访问者。以任何频率独立更新的静态页面的整个目录都以这种方式与 GA 挂钩。

# javascript - 单击后如何使某些内容看起来像选项卡

> ID：11598757
> 
> 赞同：2
> 
> 时间：2012-07-22T08:24:32.953
> 
> 标签：javascript, jquery, html, css

好吧，所以标题可能不是描述我正在尝试做的事情的最佳方式，但我不确定如何表达它。

首先（当页面加载时），有 20 个“图块”用作页面上的按钮。他们是div。顶部的 5 个较大，其余行大小相同。 ![在此处输入图像描述](../Images/d31e07235e36e30ee0180096d705a1b4.png)

单击其中一个按钮后，我希望在单击的按钮所在的行下方显示一个 div。我知道如何使用 jquery 切换来完成这部分。这是单击按钮后我希望它看起来像的示例。 ![在此处输入图像描述](../Images/265f9263079f4f08542c554a2eafa1db.png)

您可以在图中看到我希望它在单击后看起来像一个选项卡。我无法考虑如何将连接按钮 div 的部分添加到在行中间切换的 div 中。这部分： ![在此处输入图像描述](../Images/b6b51e6dfd8ba69f41be6641a5e7e08f.png)

我有点想我可以制作 5 个图像，每列按钮一个，具有一小部分背景颜色，并且也可以切换图像。我相信有更好的方法来做到这一点，所以我正在寻找正确的方向。我在寻找这样的东西时遇到了一些麻烦，因为我真的不知道该怎么称呼它，所以我想我会来这里寻求帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T08:30:47.603

单击时，我会增加`height`磁贴的 （以便它从上图中的红线向下扩展到上图中显示的下红线）。

这一切都可以通过 CSS（使用复选框 hack，就像我制作[**这个 div**](http://dabblet.com/gist/3157489)来增加它的高度一样）或 JavaScript（如果你想要 IE8 尤其是 IE7 的可靠行为）来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:52:18.530

像这个小提琴：

[http://jsfiddle.net/techunter/ph8vY/](http://jsfiddle.net/techunter/ph8vY/)

# google-apps-script - 如何收集谷歌网站登录用户名

> ID：11598759
> 
> 赞同：0
> 
> 时间：2012-07-22T08:25:04.890
> 
> 标签：google-apps-script, google-sites

我正在创建一个简单的 Google 站点，上面只有一个表格来收集受访者的信息。我使用 Site 而不仅仅是 Google Drive 表单的原因是因为我需要为受访者提供上传文件的能力。无法弄清楚如何使用 Google Drive 表单进行操作。

该站点（或表单）将仅与我所在机构中使用 GoogleApps 的用户共享，并且每个人都需要登录其 GoogleApps 帐户才能查看该站点。我想知道如何捕获或收集查看该站点的已登录 GoogleApps 用户名。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:26:00.843

如果您的所有用户都在一个 Google Apps 域中，那么收集用户名是相当简单的。利用

```
var username = Session.getActiveUser().getUserLoginId(); 
```

# google-app-engine - 如何将 app_identity 帐户设置为我的 Google Apps 域的管理员

> ID：11598760
> 
> 赞同：0
> 
> 时间：2012-07-22T08:25:05.600
> 
> 标签：google-app-engine, google-apps

我有一个允许用户注册自己的 appengine 应用程序。这些用户必须能够从 Google Apps 域发送电子邮件。为此，我希望 appengine 应用程序使用配置 API 在应用程序域中创建新用户。

我当然可以为应用程序域创建一个自定义管理帐户。然后我可以使用普通的 gdata.apps.client.ClientLogin。但是，这也意味着用户 ID 和密码存储在源代码或应用程序中。

是否可以告诉应用程序域 appengine 的服务帐户（其 app_identity 帐户）是应用程序域的管理员？

如果这不可能，关于如何保护 appengine 应用程序中的用户名和密码的任何提示？

汉斯然后

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:41:34.513

据我所知，我想要什么是不可能的。我必须在我的应用程序帐户中设置用户名和密码并使用它登录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-22T08:36:32.467

您需要使用 3 legged oauth 进行配置 api 的身份验证。这是一些文档[https://developers.google.com/gdata/docs/auth/oauth#Examples](https://developers.google.com/gdata/docs/auth/oauth#Examples)

# perl - Parse::RecDescent 语法未按预期工作

> ID：11598761
> 
> 赞同：3
> 
> 时间：2012-07-22T08:25:22.430
> 
> 标签：perl, parsing, grammar, parse-recdescent

我设法开始工作的只是 STRING、PARAMS、VARIABLE 和 FUNCNAME FUNCTION 似乎有问题，但我就是看不到它。

```
use strict;
use Parse::RecDescent;

$::RD_ERRORS = 1; # Make sure the parser dies when it encounters an error
$::RD_WARN   = 1; # Enable warnings. This will warn on unused rules &c.
$::RD_HINT   = 1; # Give out hints to help fix problems.

my $grammar = <<'_GRAMMAR_';
            SCRIPT : INSTRUCTION(s /;/)

            INSTRUCTION: FUNCTION | VARIABLE "=" FUNCTION

            FUNCTION : FUNCNAME "[" PARAMETERS "]"

            FUNCNAME : "print" | "add2" | "save" # ok

            PARAMETERS : STRING | STRING /\s*\,\s*/ PARAMETERS # ok

            VARIABLE : /\w[A-Za-z-0-9]{0,10}/i # ok

            STRING : /'(?:[^'\\]|\\.)*'/ # ok
    _GRAMMAR_
my $parser2 = Parse::RecDescent->new($grammar);
#i test every rule here
print "STRING OK\n" if $parser2->STRING("'asd'");
print "PARAMS OK\n" if $parser2->PARAMETERS("'asd','XCV','vfgdg'");
print "SCRIPT OK\n" if $parser2->SCRIPT(q(print['hola','asd'];save['hello'];));
print "VARIABLE OK \n" if $parser2->VARIABLE("a1");
print "FUNCTION OK\n" if $parser2->FUNCTION(q(print['hola','asd']));
print "FUNCNAME OK\n" if $parser2->FUNCNAME(q(print));
print "INSTRUCTION OK\n" if $parser2->FUNCTION(q(a0=print['hola','asd'];)); 
```

有什么帮助吗？顺便说一句，我的目标是：

```
variable=functioname['param1','param2','paramN'];
function2['param1'];
etc etc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T09:18:35.613

这对我有用（特别是，看`[A-Za-z0-9]`）：

```
my $grammar = <<'_GRAMMAR_';
            SCRIPT : INSTRUCTION(s /;/) /\Z/

            INSTRUCTION: VARIABLE EQ FUNCTION | FUNCTION

            FUNCTION : FUNCNAME '[' PARAMETERS ']'

            FUNCNAME : "print" | "add2" | "save" 

            PARAMETERS : STRING(s /,/) 

            VARIABLE : /(\w[A-Za-z0-9]{0,10})/i 

            EQ: '=' 

            STRING : /'(?:[^'\\]|\\.)*'/ # ok
_GRAMMAR_ 
```

# php - PHP MVC 设计 - 对同一 url/控制器的多个操作

> ID：11598762
> 
> 赞同：2
> 
> 时间：2012-07-22T08:25:28.273
> 
> 标签：php, model-view-controller, controller

在 MVC 模式中，当单个视图可能具有多个相同类型的操作（例如 POST）时，最好的处理方式是什么？

例如在 TODO 列表应用程序中。您可能允许用户创建多个列表。每个列表可以有多个项目。因此，用户导航到 site.com/list/1，它向他们显示了第一个列表中的所有项目（1 是 GET 参数）。然后此页面上有 2 个表单 (POST) 允许用户：

1.  创建一个新项目
2.  删除现有项目

如果引导程序创建“listcontroller”，请检查 POST 变量，然后调用类似于以下内容的适当方法：

```
$lc = new ListController();    
if(strtolower($request->verb) === 'post'):
    if(isset($_POST['title'])) :
        $data = $lc->newItem($_POST);
        $load->view('newitem.php', $data);
    else if(isset($_POST['delete']) && isset($_POST['id'])):
        $data = $lc->deleteItem($_POST);
        $load-view('deleteitem.php', $data);                    
    endif;// End if post title
else:
    //GET request here so show view for single list
endif; // 
```

还是做类似的事情更好

```
$lc = new ListController();
if(isset($_POST)):
    //controller handles logic about what function to call
    $data =  $lc->PostAction($_POST); 
    // $data could also potentially hold correct view name based on post
    $load->view(); 
else:
    //again just show single list
endif; 
```

我只是在苦苦思索如何最好地让控制器可能处理多个不同的操作，因为可能有很多嵌套的 if/else 或 case 语句来处理不同的场景。我知道这些必须放在某个地方，但哪里最干净？

我知道那里有很多框架，但我正在经历它背后的整个“想了解最佳实践”阶段。或者这完全是错误的方法？控制器实际上应该采用不同的结构吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:35:44.307

首先，我真的很喜欢你如何处理 MVC 的实现。没有任何类似 rails 的模仿，其中视图是在控制器内部管理的。

我认为这是您问题的根源：*您仍在使用“愚蠢的观点”方法。*

视图不应该是“模板”的同义词。相反，它应该是一个完整的对象，它具有处理多个模板的知识和能力。此外，在大多数受[MVC 启发的](https://stackoverflow.com/a/7622038/727208)设计模式中，视图实例都能够从[模型层](https://stackoverflow.com/a/5864000/727208)请求信息。

在您的代码中，问题可以追溯到视图的工厂（`$load->view()`方法），它只获取控制器发送的内容。相反，控制器应该只更改视图的名称，并且可能发送一些会改变*视图状态的*东西。

对您来说最好的解决方案是创建完整的视图实现。这样视图本身可以从模型层请求数据，并根据它接收到的数据决定使用哪个模板以及是否需要来自模型层的附加信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:23:04.210

我认为后一种方法在某种程度上是正确的。但是，您不应该在引导程序中对动作调用进行硬编码。引导程序应该解释 URL 并通过使用类似`call_user_func_array`.

另外，我建议您将视图的呈现留给操作代码，以便操作逻辑自给自足且灵活。这将允许该操作分析输入的正确性并适当地呈现错误或视图。此外，您的控制器上有“deleteItem”方法，但这应该是模型的工作。也许你应该在尝试实现自己的框架之前阅读更多关于 MVC 的内容并尝试使用现有框架来更好地理解这些概念（我建议使用 Yii 框架）。

**这是我认为**您的逻辑应如何在良好的 MVC 框架中实现的示例。

```
class ListController extends BaseController
{
    public function CreateAction($title){
        if(ctype_alnum($title))
        {
            $list = new List();
            $list->Title = $title;
            if($list->insert())
            {
                $this->render_view('list/create_successful');
            }
            else
            {
                $this->render_view('list/create_failed');
            }
        }
        else
        {
            $this->render_view('list/invalid_title');
        }
    }

    public function DeleteAction($id){
        $list = List::model()->getById($id);

        if($list == null)
        {
            $this->render_view('list/errors/list_not_found');
        }
        elseif($list->delete())
        {
            $this->render_view('list/delete_successful');
        }
        else
        {
            $this->render_view('list/delete_failed');
        }
    }
} 
```

[这是一个关于如何编写自己的 MVC 框架的很棒的教程](http://anantgarg.com/2009/03/13/write-your-own-php-mvc-framework-part-1/)

# apache - 为什么这个 htaccess 文件没有给出预期的结果？

> ID：11598767
> 
> 赞同：0
> 
> 时间：2012-07-22T08:26:48.850
> 
> 标签：apache, .htaccess, mod-rewrite

我想捕获url中的字符串，`http://localhost/framework/red`..我有以下htaccess文件

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^(^/)*$ index.php?t=$1 
```

我在框架目录中有一个文件 index.php 。浏览器返回我找不到对象！错误并且日志显示文件不存在：C:/xampp/htdocs/framework/sa.. 如何使用 (^/).. 将 framework/ 之后的字符串存储在变量中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:42:04.667

`^(^/)*$`不是有效的正则表达式。它不匹配任何内容，因此该规则永远不会被应用，您将获得 404 响应。您可能正在寻找类似的东西：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?t=$1 [L,QSA] 
```

# php - 在 PHP 中将字符串转换为日期时间

> ID：11598768
> 
> 赞同：0
> 
> 时间：2012-07-22T08:26:56.510
> 
> 标签：php, mysql, datetime

我需要将使用 PHP 从 HTML 表单输入的日期时间值插入 MySQL 数据库。但是，每次尝试执行下面的代码时，我都会收到不正确的日期时间值错误，

```
$rosterstartdate=$_GET['rosterstartdate'];
$rosterenddate=$_GET['rosterenddate'];

//$date = date_create_from_format('d/M/Y:H:i:s', $rosterstartdate);
//$date->getTimestamp();
//echo $date;

$date = strtotime($rosterstartdate);
echo date('d/M/Y H:i:s', $date);

    // echo DATE_FORMAT($rosterstartdate,"%Y%m%d %H%i%s");

    $con=mysql_connect("localhost","root","");  
    if($con==true){
        mysql_select_db("attendance_db",$con);
        $query="insert into tblroster values(LAST_INSERT_ID(),'$rosterteam','$rostershifts','$date','$rosterenddate')"; 
```

我尝试使用上述每种不同的技术进行转换，但它不起作用。关于如何插入的任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T09:03:41.327

尝试这个：

```
$date = date('Y-m-d H:i:s', $date); 
```

而不是回显它，使用该代码来格式化日期。

但是，看起来您真正想要的是：

```
$rosterstartdate = date('Y-m-d H:i:s', strtotime($rosterstartdate));
$rosterenddate = date('Y-m-d H:i:s', strtotime($rosterenddate)); 
```

这样您就可以在查询字符串中引用这两个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:22:04.400

[如果您有 unixtime 使用FROM_UNIXTIME](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)，则不需要对其进行格式化，
将您的查询更改为

```
 $rosterstartdate=$_GET['rosterstartdate'];
$rosterenddate=$_GET['rosterenddate'];

//$date = date_create_from_format('d/M/Y:H:i:s', $rosterstartdate);
//$date->getTimestamp();
//echo $date;

$date = strtotime($rosterstartdate);

    $con=mysql_connect("localhost","root","");  
    if($con==true){
        mysql_select_db("attendance_db",$con);
        $query="insert into tblroster values(LAST_INSERT_ID(),'$rosterteam','$rostershifts',FROM_UNIXTIME($date),'$rosterenddate')"; 
```

# python - 将 Django 加载到 Eclipse 中

> ID：11598769
> 
> 赞同：0
> 
> 时间：2012-07-22T08:26:58.233
> 
> 标签：python, django, eclipse, pydev

当我在新的解释器窗口中将我的 django 项目指向我的 python 解释器 3.2 并使用应用按钮相应地加载文件时，我点击下一步它说 django 不在 python 解释器中，我需要在 python 解释器中安装 django 吗？

当我创建新项目时，django 项目的选项就在那里，我可以很好地开发 python 项目，但是 eclipse 不会让我在 django 中进一步说 django not found ....先决条件是 django 已安装到 [ ppython/jython/ironpython 解释器。

有什么想法可以克服这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T14:10:11.497

Django 还不兼容 Python 3。实验支持计划在 1.5 中。有关更多信息，请参阅[https://docs.djangoproject.com/en/1.4/faq/install/](https://docs.djangoproject.com/en/1.4/faq/install/)。

# asp.net-mvc - 在 asp.net mvc 2 中 ModelState.IsValid 始终为假

> ID：11598782
> 
> 赞同：1
> 
> 时间：2012-07-22T08:29:30.003
> 
> 标签：asp.net-mvc, asp.net-mvc-2

我试图在我的项目中做登录表单。

这是我的控制器：

```
 public ActionResult Index()
 {
    return View();
 }
 [HttpPost] 
 public ActionResult Index(UserModels model)
 {
     if (ModelState.IsValid)
     {
        if (model.IsValid(model.UserName, model.Password))
        {
          FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
          return RedirectToAction("Introduction", "Home");
        }
        else
        {
          ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }
    return View(model);
 } 
```

这是我的模型：

```
 [Required(ErrorMessage = "*")]
 public string UserName { get; set; }
 [Required(ErrorMessage = "*")]
 public string Password { get; set; }
 [Display(Name = "Remember me?")]
 public bool RememberMe { get; set; }

 public bool IsValid(string _username, string _pwd)
 {
    EMP context = new EMP();
    var _userLogin = from u in context.tblEmployees
                     where u.UserName == _username &&
                     u.Password == _pwd
                     select u;
   if (_userLogin != null)
   {
      return true;
   }
   else
   {
      return false;
   }
 } 
```

这是我的观点：

```
<div>
  <% using (Html.BeginForm()) { %>
    <div style="position:relative; top:302px; vertical-align:middle;">
      <%: Html.TextBoxFor(m => m.UserName, new { @id = "txtUsername", size = "25" })%>
      <%: Html.ValidationMessageFor(m => m.UserName)%>
    </div>

    <div>
      <%: Html.PasswordFor(m => m.Password, new { @id = "txtPassword", size = "25" })%>
      <%: Html.ValidationMessageFor(m => m.Password) %>
    </div>

    <div>
      <input id="btnLogin" type="submit" value="LOGIN" />
    </div>
    <div style="position:relative; top:415px; vertical-align:middle;">
      <%: Html.ValidationSummary(true, "Login was unsuccessful. Please correct the errors and try again.")%>
    </div>
   <% } %>
</div> 
```

但是当我在我的视图中输入了有效的用户名和密码，然后按下按钮提交时，调试 ModelState.IsValid 总是假的。

有人对这个问题有任何想法吗？请分享。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T15:32:14.727

不确定您的错误的原因是什么。但是在这种情况下，为了调试，我编写了一个`ELSE`部分并通过检查 `ViewData.ModelState.Values`集合来检查模型错误是什么。

```
if (ModelState.IsValid)
{    
   //Do whatever you want with the valid Model    
}
else
{
    // Let's inspect what error message it is
   foreach (var modelStateValue in ViewData.ModelState.Values)
   {         {
      foreach (var error in modelStateValue.Errors)
      {
         //Use breakpoints and Let's check what it is in these properties
          var errorMessage = error.ErrorMessage;
          var exception = error.Exception;
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:34:38.460

是您手动设置tetbox的ID吗？

[TextBoxFor 呈现为带有 ID 属性前缀的 HTML](https://stackoverflow.com/questions/2051985/textboxfor-rendering-to-html-with-prefix-on-the-id-attribute)

```
<%: Html.TextBoxFor(m => m.UserName, new { @id = "txtUsername", size = "25" })%> 
```

尝试不使用“@id = “txtUsername””。

# javascript - 如何替换不可打印的 unicode 字符（Javascript）

> ID：11598786
> 
> 赞同：18
> 
> 时间：2012-07-22T08:30:07.953
> 
> 标签：javascript, regex, unicode, non-printing-characters

我已经浪费了大量时间处理字符串（由其他来源生成），我发现问题在于字符串具有不可打印的字符。今天我正在处理javascript。有谁知道如何在 javascript 中替换不可打印的 unicode 字符？

我在这里发现了类似的东西：

[如何替换 Java 中不可打印的 Unicode 字符？](https://stackoverflow.com/questions/6198986/how-can-i-replace-non-printable-unicode-characters-in-java)

> `my_string.replaceAll("\\p{C}", "?");`

和这里：

[仅使用 Safari 浏览器添加表单输入的非 ascii 字符](https://stackoverflow.com/questions/7747271/non-ascii-characters-added-form-input-only-with-safari-browser)

> `filename.replace(/[^a-z0-9\.]+/gi, "");`

最后一个选项替换所有不在括号中的字符。无论我正在使用哪种语言，这总是在我的后端咬我，我厌倦了试图弄清楚是什么字符弄乱了我的代码。出于这个原因，我希望能够将所有这些不可见的字符替换为可见的字符，以便以后可以完全删除它们。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-22T08:45:37.220

基于`\p{C}`java 中的内容（[来自 XRegExp](https://github.com/slevithan/xregexp/blob/2b652889fc14524d20f85604f291f725347f8033/src/addons/unicode-categories.js#L26-L31)）：

```
var re = /[\0-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g;
filename.replace(re, ""); 
```

您也可以只使用该[库](https://github.com/slevithan/XRegExp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T08:58:32.457

最佳实践似乎要求您指定您将接受的内容（白名单方法），而不是试图过滤掉您不接受的内容（黑名单方法）。

[这](https://stackoverflow.com/questions/11271477/javascript-regex-to-specify-what-is-allowed-rather-than-what-is-not)是一个类似的问题，尽管答案并不全面。

# ios - 如果从 tableView:didSelectRowAtIndexPath 调用 UIWebView 不调用 loadRequest:

> ID：11598787
> 
> 赞同：1
> 
> 时间：2012-07-22T08:30:35.340
> 
> 标签：ios, uitableview, uiwebview, didselectrowatindexpath

我知道，这个问题已经问过很多次了，但没有帮助我。所以我想在 UITableView 中的一行被触摸时触发 loadRequest。但由于某种原因，它不起作用。当 [webView loadRequest:request]; 被调用，没有任何反应。这是我的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
NSString *bookmarkString = [NSString stringWithFormat:@"%@", [bookmarks objectAtIndex:indexPath.row]];
NSURL *url = [NSURL URLWithString:bookmarkString];
NSURLRequest *request1 = [NSURLRequest requestWithURL:url];
[tableView deselectRowAtIndexPath:indexPath animated:YES];
[self dismissModalViewControllerAnimated:YES];
[myWebView1 loadRequest:request1];
urlField1.text = bookmarkString; 
```

}

我尝试了此代码的许多不同变体，但没有任何效果。在使用断点进行调试之后，一切都会被调用，但在 web 视图上实际上什么都没有发生。关闭模式视图控制器有效，但不是 loadRequest。任何人都可以帮忙吗？

编辑：我使用情节提要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:37:39.040

您应该尝试分配 UIWebView 然后拨打电话，即使您从 xib 连接它也是如此

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
if(!myWebView1)
{
    myWebView1 = [UIWebView alloc]init];
}
        NSString *bookmarkString = [NSString stringWithFormat:@"%@", [bookmarks objectAtIndex:indexPath.row]];
        NSURL *url = [NSURL URLWithString:bookmarkString];
        NSURLRequest *request1 = [NSURLRequest requestWithURL:url];
        [tableView deselectRowAtIndexPath:indexPath animated:YES];
        [self dismissModalViewControllerAnimated:YES];
        [myWebView1 loadRequest:request1];
        urlField1.text = bookmarkString;
    } 
```

# vb.net - 如何使用 VB.NET 在时间中添加前导零？

> ID：11598789
> 
> 赞同：3
> 
> 时间：2012-07-22T08:30:52.453
> 
> 标签：vb.net

在下面的代码中，我使用当前日期和时间，并借助它生成文件名。我的问题是它给了我一个没有前导零的输出：

```
Dim strDateTime As String = DateTime.Now.Day.ToString() & "" & _ 
DateTime.Now.Month.ToString() & "" & DateTime.Now.Year.ToString() & "" & _ 
DateTime.Now.Hour.ToString() & "" & DateTime.Now.Minute.ToString() & "" & _
DateTime.Now.Second.ToString() & DateTime.Now.Millisecond.ToString() 
```

例如，我的查询当前给出如下输出：

假设时间是`1:5:30 :: hh:mm:ss`

所需的输出是：`01:05:30`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T11:37:28.190

试试这个，

```
DateTime.Now.Hour.ToString("00") & ":" & DateTime.Now.Minute.ToString("00") & ":" & DateTime.Now.Second.ToString("00") 
```

**编辑 ：**

正如答案中“mdb”所建议的那样，使用[自定义日期和时间格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)字符串会更高效、更简洁

```
DateTime.Now.ToString("hh:mm:ss tt") '12 Hour format with AM/PM designator, Eg :- 09:01:01 PM
DateTime.Now.ToString("HH:mm:ss") '24 Hour format  Eg :- 21:01:01 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T10:30:41.543

而不是连接字符串，这是非常低效的，你会想要使用[String.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)。这也支持[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)，这使得实现你想要的变得微不足道。

# iphone - 视图在 ipad 上向上移动，但并非每个控件都在 iphone 上移动

> ID：11598791
> 
> 赞同：1
> 
> 时间：2012-07-22T08:31:12.783
> 
> 标签：iphone, objective-c, ipad, ios5, ios-universal-app

我从堆栈溢出答案中实现了这个功能，第一个答案[是当键盘不隐藏文本字段时移动视图](https://stackoverflow.com/questions/5965580/move-view-when-so-that-keyboard-does-not-hide-text-field)，

```
//method to move the view up/down whenever the keyboard is shown/dismissed
-(void)setViewMovedUp:(BOOL)movedUp
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3]; // if you want to slide up the view

    CGRect rect = self.view.frame;
      if (movedUp)
    {
        // 1\. move the view's origin up so that the text field that will be hidden come above the keyboard 
        // 2\. increase the size of the view so that the area behind the keyboard is covered up.
        rect.origin.y -= kOFFSET_FOR_KEYBOARD;
        rect.size.height += kOFFSET_FOR_KEYBOARD;
    }
    else
    {
        // revert back to the normal state.
        rect.origin.y += kOFFSET_FOR_KEYBOARD;
        rect.size.height -= kOFFSET_FOR_KEYBOARD;
    }
    self.view.frame = rect;

    [UIView commitAnimations];
} 
```

现在它在 ipad 上运行良好。我有一个文本框和它旁边的一些按钮，在它上面有一个带有聊天的文本视图。您使用文本框键入您的聊天。在 iphone 上，它会移动您输入的文本框和向上的按钮，但不会移动文本视图。事实上，它仍然覆盖了大部分窗口，并且按钮在窗口中间的顶部向上移动。

现在我今晚刚刚创建了 iphone 故事板视图（现在有一个视图），并将我所有的控件连接到它，以便在 ipad 上工作。现在该程序仍然可以在 ipad 上正常工作，甚至可以在显示键盘工作时向上移动视图。但在 iphone 上，它会移动除主控制台 UITextView 之外的所有内容。糟糕的是，在您键入时能够阅读文本:) 另外我想了解这里的理论。似乎如果我将视图定义为一个矩形并将其向上移动一些数字，例如 250，它应该全部移动。也许有更好的方法来做到这一点，比如首先获得键盘尺寸，但我仍然希望它能够移动那个高度。

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T18:45:57.700

我添加了对纵向和横向的支持，但修复是在我移动框架后将 iPod 的主控制台（文本视图）重置为纵向（我唯一的 iPod 方向）的位置（我唯一的 iPod 方向）。整个视图被移动了，所以我可以将它设置到同一个位置，它会在上下移动中进行转换。：

```
double tall = 88;
if(![self isTall])
tall =0;
if (movedUp)
{
// 1\. move the view's origin up so that the text field that will be hidden come above the keyboard
// 2\. increase the size of the view so that the area behind the keyboard is covered up.
rect.origin.y -= kOFFSET_FOR_KEYBOARD;
rect.size.height += kOFFSET_FOR_KEYBOARD;
self.view.frame = rect;
if ( IDIOM != IPAD )
self._mainConsole.frame = CGRectMake(5, 5, 310, 379 + tall);
}
else
{
// revert back to the normal state.
rect.origin.y += kOFFSET_FOR_KEYBOARD;
rect.size.height -= kOFFSET_FOR_KEYBOARD;
self.view.frame = rect;
if ( IDIOM != IPAD )
self._mainConsole.frame = CGRectMake(5, 5, 310, 379 + tall);
} 
```

# php - Facebook：如何获取好友数量？

> ID：11598792
> 
> 赞同：0
> 
> 时间：2012-07-22T08:31:19.323
> 
> 标签：php, facebook

我希望能够在 Facebook 上检索一些人的朋友数量。但是，为了实现这个目标，我遇到了一些问题。我尝试了两种不同的方法：

**1\. 使用 FQL：**

我尝试了[以下查询](http://api.facebook.com/method/fql.query?format=json&query=SELECT%20username,%20friend_count%20FROM%20user%20WHERE%20username=%22jonathan.petitcolas%22)：

```
SELECT username, friend_count
FROM user
WHERE username = jonathan.petitcolas 
```

但是，如您所见，friend_count 属性始终为空。在我的公开个人资料上，以及其他个人资料上。

**2\. 使用 Facebook PHP SDK**

然后，我安装了 Facebook PHP SDK，创建了一个应用程序，并执行了以下操作：

```
$facebook = new \Facebook(array(
    'appId' => 'XXX',
    'secret' => 'XXX'
));

$friends = $facebook->api('/jonathan.petitcolas/friends'); 
```

然后我得到以下异常：

> [FacebookApiException]
> (#604) 无法查找 676944843 的所有好友。只能查找登录用户或登录用户的好友是您应用的用户。

确实，我是用另一个用户登录的。

那么，是否可以在 Facebook 上检索公开个人资料的好友数量？是这样，怎么办？

非常感谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:16:16.890

> 我尝试了以下查询：

```
SELECT username, friend_count
FROM user
WHERE username = jonathan.petitcolas 
```

> 但是，如您所见，friend_count 属性始终为空。在我的公开个人资料上，以及其他个人资料上。

不，它并不总是为空。如果我使用自己的用户名进行查询（并更正查询中的语法错误），我会得到正确数量的朋友。当然，只有当我验证了那个进行查询的应用程序时。

> 那么，是否可以在 Facebook 上检索公开个人资料的好友数量？

没有。

这已经足够了：

> “*只能*查找登录用户或登录用户的朋友是您应用的用户。”</p>

# java - 检索目录路径中的空指针异常

> ID：11598794
> 
> 赞同：0
> 
> 时间：2012-07-22T08:31:35.680
> 
> 标签：java, android

我收到有关 Google Play 中某个应用的错误报告。问题是它非常模糊，由于 proguard 配置，我无法从堆栈跟踪中检索大量信息：

应用程序崩溃的方法是：

```
private File getExternalStorageAppRoot(Context ctx) {
    String basePath="cache";
    if (Build.VERSION.SDK_INT >= 8) {
        File extFile = ctx.getExternalFilesDir(basePath);
        if (extFile != null) {
            return extFile;
        }
    }

    String externalFilesDir = Environment.getExternalStorageDirectory().getAbsolutePath()
            + File.separator + "Android" + File.separator + "data" + File.separator
            + ctx.getApplicationInfo().packageName + File.separator + "files";

    return new File(externalFilesDir, basePath);
} 
```

异常是 NullPointerException 并且 ctx 始终不为空。关于它在哪里崩溃的任何想法？

在我的测试中，此方法不会崩溃

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:37:10.563

根据您的方法，我将检查以下结果：

```
 ctx.getApplicationInfo() // and .packageName 
```

和

```
 Environment.getExternalStorageDirectory() // and .getAbsolutePath() 
```

从我的角度来看，这两点可能会引发 NPE。也许你可以打印一些注销。

# mercurial - hg push 失败，错误代码 255 并且错误消息文件存在

> ID：11598797
> 
> 赞同：2
> 
> 时间：2012-07-22T08:32:01.843
> 
> 标签：mercurial

我正在尝试在 mercurial 中进行一些涉及推送新分支的更改，但我得到了以下输出：

> 寻找变化
> 
> 添加变更集
> 
> 添加清单
> 
> 添加文件更改
> 
> 交易中止！
> 
> 回滚完成
> 
> 中止：文件存在

我将 Mercurial 1.9.2 与 sub repos 一起使用，我使用的命令是`hg push --new-branch`. 我也试过`-f`了，似乎没有任何效果。我正在从 Linux 机器（ununtu 10.4）推送到 Windows 机器。Windows 是使用 cifs mount ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:43:47.700

我找到了答案，似乎某些文件属性已更改。将它们改回默认值可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:17:35.463

您要推送到哪种远程存储库？

从 Windows 机器推送到我家 NAS 上的网络共享（在 Linux 上运行）时，我遇到了类似的问题（但有不同的错误消息）：
[你能在 64 位 Windows 7 上使用 Mercurial '推送'到网络共享吗?](https://stackoverflow.com/questions/3250031/can-you-push-to-network-share-using-mercurial-on-64bit-windows-7)

从 Windows 机器推送到 Windows 机器上的网络共享是可行的（我们正在工作中这样做），尽管 Mercurial 团队不建议推送到网络共享。

引用[Mercurial wiki 中“Publishing Repositories”中的“shared disk”部分](http://mercurial.selenic.com/wiki/PublishingRepositories#Choosing_a_publishing_method)。

> 通常仅限于 Intranet，由于网络文件系统可靠性的一般问题，**通常不推荐使用**

# iphone - iPhone中高效内存的图像缓存方式

> ID：11598802
> 
> 赞同：1
> 
> 时间：2012-07-22T08:32:19.683
> 
> 标签：iphone, memory-management, uiimageview, uiimage, image-caching

我想缓存 91 张图像的图像。所有图像约为 50mb。我看到很多内存都用完了。

我的代码在这里。高效记忆的最佳方法是什么？

```
lG2Image[0] = [[UIImage alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"background" ofType:@"png"]];
lG2Image[1] = [[UIImage alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"myimage1" ofType:@"png"]];
lG2Image[2] = [[UIImage alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"myimage2" ofType:@"png"]];
...

UIImageView* tmp;

for (int i=0; i<91; i++) {
    tmp = [[UIImageView alloc] initWithImage:lG2Image[i]];
    [_window addSubview:tmp];
    [tmp removeFromSuperview];
    tmp = nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T04:50:01.993

您有 2 个选项。选项 1，只需“根据需要”加载游戏图像元素，如果这是 2D 游戏，则在元素即将出现在屏幕上时加载它们。选项 2，将图像数据解压缩为 BGRA 格式的原始像素文件，然后使用 [NSData dataWithContentsOfMappedFile] 和 CGDataProviderCreateWithData() 以及 CGImageCreate() 创建一个 CGImageRef，然后将其包装为 UIImage。第二种方法是非常低级的，但是它避免了每次访问资源时都必须重新解析图像内容（解压缩的图像数据已经存储在文件中）。此外，Apple 还优化了 CoreGraphics 读取 2D 图像的方式，使整个内存内容可以保留在主内存中，而不是复制到图形内存中，这意味着您可以使用此方法加载一堆图像。如果你可以的话，我会先尝试选项＃1，您可能不会同时需要内存中的所有内容。但是选项 #2 可以为您提供大约 700 megs 的工作内存，您的 iOS 应用程序可以从文件映射，远远超过作为常规内存分配的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:01:00.067

您可以重复使用`UIImageView`.

iPhone的屏幕尺寸是固定的，也就是说可视区域是固定的。例如，如果要在可视屏幕上显示3张图像，则只需创建3个`UIImageView`，当视图移动时，可以根据当前可视视图的位置加载新图像，不在可视屏幕上的图像可以释放。

如果你使用`UITableView`，你可以看看这个，[LazyTableImages](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)。

# datetime - 日期和时间有问题

> ID：11598804
> 
> 赞同：0
> 
> 时间：2012-07-22T08:32:48.663
> 
> 标签：datetime, google-sheets, google-sheets-formula, google-sheets-query, importrange

我在 Google 表格中的日期和时间方面遇到了一些问题。我所拥有的是：

电子表格 1 有许多工作表，其中一张称为`Sessions`。在那张纸上有许多列，显示有关各个培训课程的各种数据。然后我有第二个电子表格发布到用户可以看到的谷歌网站。它只有一个由 QUERY + IMPORTRANGE 填充的工作表，以从`Sessions`第一个电子表格的选项卡中获取信息。我这样做的原因是我不希望用户能够看到第一个电子表格中的所有不同工作表，也不希望他们看到其中的所有不同列。还有一个原因。我希望查询过滤会话以仅显示将来发生的会话，而不是已经通过的会话。

我在第二张表中提取数据的查询是：

```
=query(importrange("IDofMainSpreadsheet","Sessions!A:I");"select Col1,Col2,Col3,Col6") 
```

现在效果很好。我想补充的是：

```
=query(importrange("IDofMainSpreadsheer","Sessions!A:I");"select Col1,Col2,Col3,Col6 where Col2 >= Now()") 
```

我尝试了许多不同的解决方案，但似乎找不到一个有效的解决方案。

好的....已经取得了一些进展。这并不漂亮，但如果我添加另一张工作表并创建一个包含以下内容的单元格：

```
 =YEAR(now()) & "-" & DEC2OCT(MONTH(now()), 2) & "-" & DAY(now()) &" " & HOUR(now()) &":"& MINUTE(now()) &":"& SECOND(now()) 
```

然后我可以在查询中使用它：

```
 =query(importrange("IDofSpreadsheet","Sessions!A:I");"select Col1,Col2,Col3,Col6  where Col2  >= datetime '"&Sheet3!B3&"'  ") 
```

如果有人可以帮助我在一行中做到这一点，那就太好了。已尝试`toDate(Now())`以下建议的选项，但这不会返回任何结果，而上面会返回。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:11:29.350

在 QUERY select 子句中，`now()`将产生一个日期时间，我假设您正在与日期进行比较。尝试：

```
=QUERY(ImportRange("IDofMainSpreadsheer","Sessions!A:I");"select Col1,Col2,Col3,Col6 where Col2 >= toDate(now())") 
```

[https://developers.google.com/chart/interactive/docs/querylanguage#scalar_functions](https://developers.google.com/chart/interactive/docs/querylanguage#scalar_functions)

*编辑*

您的解决方法有效的事实表明您实际上在第 2 列中有日期时间。下面我有一个建议，说明为什么您的原始解决方案可能不起作用，但首先是您的解决方法的更紧凑版本：

```
=QUERY(ImportRange("IDofSpreadsheet","Sessions!A:I");"select Col1,Col2,Col3,Col6 where Col2 >= datetime '"&TEXT(NOW();"yyyy-MM-dd HH:mm:ss")&"'") 
```

我唯一能想到的是，`now()`在 QUERY select 子句中并`NOW()`在电子表格公式中调用似乎在不同的时区运行，并且可能不一定返回相同的结果。例如，现在在我的东澳大利亚时区，前者返回 2012 年 7 月 25 日的日期时间（推测的山景城时间），而后者（正确地）返回 2012 年 7 月 26 日的日期时间。因此，`NOW()`在解决方法中使用电子表格可能是一种很好的做法（在此阶段）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-11T22:36:03.223

或者只需要更改您的谷歌电子表格上的时区。

# c# - 从多个 PNG 创建单个 PNG

> ID：11598805
> 
> 赞同：2
> 
> 时间：2012-07-22T08:32:59.833
> 
> 标签：c#, graphics

我有一个相同大小的 PNG 列表。我需要创建一个长图像，所有图像彼此相邻。我没有进步。:)

我已将所有图像路径加载到 List<> 中，然后创建了一个位图，其中包含图像的高度和图像数量的长度乘以它们的宽度。（所有图像的尺寸相同）。

然后我需要浏览每个图像，基本上将其粘贴到我的位图中的正确位置。任何人都可以帮助我例行执行此操作吗？遍历我的所有项目 - 并将它们粘贴到我的位图上。

我已经尝试过了，但它失败了：通用 GDI 错误。

```
using(Bitmap newFiles = new Bitmap(outputFileWidth, outputFileHeight))
{
     using(Graphics graphics = Graphics.FromImage(newFiles))
     {
         graphics.DrawImage(
            testImage,
            new Rectangle(0, 0, originalWidth, originalHeight),
            new Rectangle(new Point(), testImage.Size),
            GraphicsUnit.Pixel);
     }
     newFiles.Save(@"c:\test.png");
} 
```

我还没有完成循环。我只是想添加第一张图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:03:05.200

答案定位！错误是由于文件被锁定。实际上，我的文件夹的权限。这是一个很棒的例程，我希望对其他人有所帮助。

```
public Bitmap Combine()
        {
            //read all images into memory
            List<Bitmap> images = new List<Bitmap>();
            Bitmap finalImage = null;

            try
            {
                int width = 0;
                int height = 0;

                foreach (var image in files)
                {
                    //create a Bitmap from the file and add it to the list
                    System.Drawing.Bitmap bitmap = new Bitmap(image.Filename);

                    //update the size of the final bitmap
                    width += bitmap.Width;
                    height = bitmap.Height > height ? bitmap.Height : height;

                    images.Add(bitmap);
                }

                //create a bitmap to hold the combined image
                finalImage = new System.Drawing.Bitmap(width, height);

                //get a graphics object from the image so we can draw on it
                using (Graphics g = Graphics.FromImage(finalImage))
                {
                    //set background color
                    g.Clear(Color.Black);

                    //go through each image and draw it on the final image
                    int offset = 0;
                    foreach (Bitmap image in images)
                    {
                        g.DrawImage(image,
                          new Rectangle(offset, 0, image.Width, image.Height));
                        offset += image.Width;
                    }
                }

                return finalImage;
            }
            catch (Exception ex)
            {
                if (finalImage != null)
                    finalImage.Dispose();

                throw ex;
            }
            finally
            {
                //clean up memory
                foreach (Bitmap image in images)
                {
                    image.Dispose();
                }
            }
        } 
```

# c# - 在 wp7 应用程序中的应用程序搜索中

> ID：11598807
> 
> 赞同：0
> 
> 时间：2012-07-22T08:33:29.323
> 
> 标签：c#, silverlight, windows-phone-7

我有一个包含许多项目的列表框。我正在尝试创建一个搜索栏，以便用户可以输入他正在寻找的内容，而我的列表框仅显示与用户在文本框中输入的内容相关的那些项目。我是 wp7 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:20:26.303

首先，您应该使用`MVVM`适当的`Layout`更新。然后使用附加属性并将其绑定到`TextBox`. 更新属性时 - 引发另一个属性更改事件以更新`ListBox`（`FirePropertyChanged("FooList");`在片段中）。

```
public class Foo
{
    public string Name { get; set; }
} 
```

在`ViewModel`：

```
public string SearchCriteria
{
     get
     {
         return searchCriteria;
     }
     set
     {   
         serchCriteria = value;
         RaisePropertyChanged("SearchCriteria");
         RaisePropertyChanged("FooList");
     }
}
private List<Foo> fooList;

public List<Foo> FooList
{
    get 
    {
       return fooList.Where(x => x.Name.Contains(searchCriteria)); 
    }
} 
```

在`Xaml`：

```
<TextBox x:Name="searchText" Text={Binding SearchCriteria, Mode=TwoWay} />
<ListBox x:Name="elementsList" ItemsSource={Binding FooList, Mode=TwoWay}>
  <ListBox.ItemTemplate>
   ...
  </ListBox.ItemTemplate>
</ListBox> 
```

* * *

一些帮助链接可以更好地理解`MVVM`模式：

*   [Windows Phone Mango：10 分钟开始使用 MVVM](http://windowsphonegeek.com/articles/Windows-Phone-Mango-Getting-Started-with-MVVM-in-10-Minutes)
*   [MVVM 在现实生活中的 Windows Phone 应用 Part1](http://windowsphonegeek.com/articles/MVVM-in-real-life-Windows-Phone-applications-Part1)

# jquery - 未捕获的 ReferenceError：$ 未在 jquery 函数中定义

> ID：11598809
> 
> 赞同：0
> 
> 时间：2012-07-22T08:34:14.453
> 
> 标签：jquery, html, javascript-events

当我对选择选项的 onchange 事件使用 javascript 函数时，我收到了此消息。

功能是

```
<script type="text/javasript" src="jquery.min.js"></script>
<script type="text/javascript">
function desigchanged()
{

    $.get('jqueryphp.php?desig=wr',update);
}
function update(res)
{
    $('#inpt4').html(res);
}
</script>

<select id="inpt3" name ="designatn" onChange="desigchanged();">
            <option value="pm" selected>project manager</option>
            <option value="wr">worker</option>
            </select><BR><BR>
            <label><font id="fnm">Gender</font></label>
            <label><font id="fnm3">Male</font></label>
            <input name="gender" type="radio" id="inpt11" value="Male" />
            <label><font id="fnm4">Female</font></label>
            <input name="gender" type="radio" id="inpt22" value="Female" /><BR><BR>
            <label><font id="fnm">Works Under</font></label>
            <select name="wrkundr" id="inpt4">
            </select> 
```

正确包含 jquery 文件。请有人帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T09:14:20.997

我怀疑这是因为错字：

```
type="text/javasript" 
```

请注意“脚本”中缺少的“c”。`type`如果未正确定义其属性，浏览器将不会执行脚本标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:09:32.500

**编辑：**

但是您可能也[面临这个问题](http://forum.jquery.com/topic/uncaught-referenceerror-is-not-defined)（绝对/相对路径）。

和

你也有一个错字`javascript`

**原来的：**

[你做过吗](https://stackoverflow.com/a/2075349/728863)

> 您应该首先放置对 jquery 脚本的引用。

或者

[这个？](https://stackoverflow.com/a/2075345/728863)

> 也许您在包含 JQuery Javascript 之前调用了 ready 函数？

# php - 无法在亚马逊 ec2 免费套餐上使用 PHP curl

> ID：11598810
> 
> 赞同：1
> 
> 时间：2012-07-22T08:34:16.120
> 
> 标签：php, curl, amazon-ec2

我目前正在将我的网络应用程序移至亚马逊 ec2。由于它仅用于测试，我使用名为 ec2 free tier 的免费版本和 windows server 2008 实例。然而，尽管我已经完成了我所知道的并阅读了这个线程（[如何在 PHP / XAMPP 中启用 cURL](https://stackoverflow.com/questions/1347146/how-to-enable-curl-in-php)）。我只是无法在我的 php 脚本上使用 curl。它总是在第 2 行的 C:\xampp\htdocs\index.php 中创建错误 **Call to undefined function curl_init()** 这是我尝试过的所有内容

1.  安装 Wamp（我在 XAMPP 上试过）
2.  **取消注释掉**php.ini 文件中的 php_curl（并重新启动 apache）
3.  将两个dll文件复制到system32和syswow64

这可能与我使用免费 vps 的事实有关吗？ **更新：** 另外，当我在 XAMPP 中启动 apache 服务器时，出现此错误“PHP 启动：无法加载动态库 curl.dll” 但是，我仔细检查了 ext 目录并且 php_curl.dll 在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-14T17:22:26.880

我认为 curl 需要从我们的 Web 服务器访问远程服务器。所以我在我的服务器出站规则中打开了所有流量并且它工作正常。我认为这不是一个好的解决方案。还在寻找更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T11:46:43.090

我确实注意到这个 cURL 插件出现故障的一个原因是 libeay32.dll 和 ssleay32.dll 文件的副本的可用性。请检查您的system32文件夹是否有这样的副本，如果有，请将它们重命名为其他名称并复制php安装时找到的名称。有时您可能需要重新启动机器。前段时间[在这里](http://www.digizol.com/2008/10/phpcurldll-unable-load-dynamic-library.html)记录了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T09:04:11.207

不。

确保您将文件放在正确的位置，通常位于 php 的插件文件夹中！也许你不能为你的 php.ini 添加一个绝对路径！请确保，您编辑了正确的 ini 文件！

php 完全独立于您的操作系统！

请务必仔细检查所有内容。因为它没有说，它无法加载你的扩展，它只是说，你试图调用的函数不存在。所以我假设你的扩展根本没有加载！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-04T20:26:34.650

我有一个类似的问题，但它只发生在 https 下的请求。我尝试直接从 ec2 机器创建 curl 请求，但出现错误：“curl: (77) error setting certificate verify locations”。

由于找不到证书，某种 ssl 验证似乎失败了。因此，我在 curl 命令中使用了参数 -k（或 --insicure）来忽略此验证，然后我的 curls 请求直接来自 ec2 机器工作。

所以我尝试在 php 中的 curl 命令中应用类似的 ideia，（我假设 curl php 扩展将此请求转发给操作系统），我发现了这个 curl 选项：

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

之后它对我有用。

可能这不是解决问题的最佳方法，但暂时解决了我的问题。

# objective-c - 如何在此计时器回调方法中停止按钮单击时启动的 NSTimer

> ID：11598816
> 
> 赞同：2
> 
> 时间：2012-07-22T08:36:22.930
> 
> 标签：objective-c, ios, nstimer

我`NSTimer`在单击按钮时停止启动时遇到问题。`[timer invalidate]`并且`timer = nil;`当我试图停止它`viewWillDisappear`或在由该计时器调用的方法调用的方法中都不做任何事情。但是，当我启动计时器`viewWillAppear`并使其无效时，`viewWillDisappear`一切都很好。

我想我开始计时器的线程中可能存在问题。你能帮忙吗？

我在这里查看了有关不停止的所有答案`NSTimer`，但它们无助于解决问题。

我初始化计时器的方式：

```
timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(oneSecondPassedSinceRoundStarted) userInfo:nil repeats:YES]; 
```

我试图阻止它的方法：

```
[self.timer invalidate];
[timer invalidate]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T09:18:05.377

有趣的是，在您寻求帮助后，您可以多快地回答自己的问题。无论您自己努力寻找答案多久：

```
[self performSelectorOnMainThread:@selector(stopTimer) withObject:nil waitUntilDone:YES]; 
```

和选择器：

```
- (void) stopTimer
{
    [timer invalidate];
    timer = nil;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-22T08:57:14.350

我已经创建并测试了这个：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    myTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(oneSecondPassedSinceRoundStarted:) userInfo:nil repeats:YES];
}

-(void)oneSecondPassedSinceRoundStarted:(NSTimer *)time {
    // Do what You want

    NSLog(@"CALLING!");
}

-(IBAction)buttonAction:(id)sender {

    NSLog(@"Stop timer!");

    [myTimer invalidate];
    myTimer = nil;
} 
```

它运行良好。

**注意：**您忘记在*oneSecondPassedSinceRoundStarted*之后添加冒号。

# php - 正则表达式取字符串的一部分 PHP

> ID：11598818
> 
> 赞同：0
> 
> 时间：2012-07-22T08:36:33.270
> 
> 标签：php, regex

例如我有以下字符串

```
$s = "asd$5asd"; 
```

我怎样才能只取包含 php 中“d”之后的“$5”的部分，我们有以下内容

```
preg_mach //returns int number of matches
preg_replace //returns the string with a replaced content
//---------------------
preg_grep    //it greps but how to grep the "$5" 
             //that comes after "d" without grepping the "d" it's self ??? 
```

我的正则表达式是

```
/((coupon|enter)\x20code\x20)("([^"]+)")/ 
```

我想grep第四个括号的值（$ 4）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T08:49:33.023

完全取决于您要匹配的内容，但以下将返回所有匹配项 -

```
preg_match_all('/d(\$[0-9]+)/i',$s,$aMatches); 
```

`$aMatches[1]`包含所有匹配的数组。示例匹配 - $5 $10 $20（仅匹配 $ 和任意长度的数字）

# python - Ruby HMAC-SHA 与 Python 不同

> ID：11598821
> 
> 赞同：3
> 
> 时间：2012-07-22T08:37:02.043
> 
> 标签：python, ruby, sha, hmac

我正在将一些现有代码从 Python 重写为 Ruby，并且遇到了一个我似乎无法弄清楚的奇怪错误。这里我们有 Python 代码（有效）：

```
import sha, hmac
data = 'sampledata'
data = data.encode('ascii')
des_key = hmac.new(data + "\0", "SUPERSECRET", sha).digest()[0:8] 
```

输出：0x64F461D377D9930C

Ruby（我是新手）代码：

```
require 'openssl'
digest  = OpenSSL::Digest::SHA.new
data = 'sampledata'
data.encode!('ascii')
puts OpenSSL::HMAC.hexdigest(digest, "SUPERSECRET", data + "\0")[0, 16] 
```

输出：0x563FDAF11E63277C

什么可能导致这种差异？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T09:23:58.870

你犯了两个错误：

1.  Python 的 hmac.new 需要键、方法和摘要——所以你应该写

    hmac.new("SUPERSECRET",data + "\0", sha)

2.  Ruby 中 OpenSSL::Digest 的默认摘要方法不是 SHA1（我不确定它是什么）。你应该只使用：

    OpenSSL::HMAC.hexdigest('sha1',"SUPERSECRET",data+"\0")[0,16]

两种方法（第一个在 Python 中，第二个在 Ruby 中）返回相同的输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T09:38:04.250

除了 Guy Adini 的回答 - 在 Ruby 中，SHA 与 python 不同，`sha`它是`sha1`（in `sha.py`: `from hashlib import sha1 as sha`）：

```
from hashlib import *
import hmac
data = 'sampledata'
data = data.encode('ascii')

algo = [sha1, sha224, sha256, sha512]
for al in algo:
    print al().name, hmac.new("SUPERSECRET", data + "\0", al).hexdigest()[0:16] 
```

产生：

```
sha1 50c61ea49195f03c
sha224 fd6a418ee0ae21c8
sha256 79deab13bd7b041a
sha512 31561f9c9df69ab2 
```

在红宝石中：

```
require 'openssl'
data = 'sampledata'
data.encode!('ascii')
%w(sha sha1 sha224 sha256 sha512).each do |al|
  puts "#{al}: #{OpenSSL::HMAC::hexdigest(al, "SUPERSECRET", "#{data}\0")[0,16]}"
end 
```

产生：

```
sha: 563fdaf11e63277c
sha1: 50c61ea49195f03c
sha224: fd6a418ee0ae21c8
sha256: 79deab13bd7b041a
sha512: 31561f9c9df69ab2 
```

# java - XML、Java、Unicode

> ID：11598825
> 
> 赞同：0
> 
> 时间：2012-07-22T08:37:23.523
> 
> 标签：java, xml

在 XML 中，如果一个字符 unicode 在 Java 中写为 \ue123

两个字符的字符串怎么写？

注意我试过 \u123\u123 但它没有用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T08:40:18.640

好吧`\u123\u123`不起作用，因为`\u`需要后跟*四个*十六进制数字。但这应该可以正常工作：

```
String text = "\u0123\u0123"; 
```

请注意，这只是 Java 字符串文字方面 - 它与 XML 无关。XML 有不同的方式来转义它需要的字符，但是如果您使用适当的编码（例如 UTF-8），则不需要转义非 ASCII 字符。

# java - 为什么这会无限/多次显示输出？

> ID：11598826
> 
> 赞同：0
> 
> 时间：2012-07-22T08:37:34.987
> 
> 标签：java, string, infinite-loop

下面的这个程序在运行时不会停止。我不认为我犯了重大错误，但请帮助我，因为我是 Java 新手。

```
import java.util.*;
    public class ReverseWords {
    public static void main( String args[] ) {
        String paragraph;
        Scanner input = new Scanner (System.in);

        System.out.print("Enter a paragraph: ");
        paragraph = input.nextLine();
        paragraph = paragraph.trim();
        StringTokenizer tokens = new StringTokenizer(paragraph, ".");
        while (tokens.hasMoreTokens()){

            for (int i = paragraph.length() - 1; i>=0; i--) {
                System.out.print(paragraph.charAt(i));
            }
            System.out.print(". ");
        }
        System.out.println();
    }
    } 
```

当我输入时： `The quick brown fox. Jumps over. The lazy dog.`
它输出： `.god yzal ehT .revo spmuJ .xof nworb kciuq ehT.` 无限次。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T08:41:48.470

看这个：

```
 while (tokens.hasMoreTokens()) 
```

您永远不会*获取*下一个令牌。因此，如果它返回 true，它将永远如此。您可能想要（在 while 循环中）：

```
String token = tokens.nextToken();
for (int i = token.length() - 1; i >= 0; i--) {
    System.out.print(token.charAt(i));
}
System.out.print(". "); 
```

那是假设您要反转每行中的每个部分句子。目前还不清楚你的目标是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T08:41:35.323

您甚至从未`tokenizer`在循环中使用过。因此，`hasMoreTokens()`始终返回 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T08:44:48.147

我从未使用过 Java，但除非“StringTokenizer”非常奇怪：您的 while 循环检查“hasMoreTokens”，但循环体从不删除标记。所以它总是会有更多的令牌......

# sql-server - 递归查找给定孩子的所有祖先

> ID：11598827
> 
> 赞同：17
> 
> 时间：2012-07-22T08:37:41.173
> 
> 标签：sql-server

给定一个孩子 ID，我需要返回一个包含该孩子的所有父母以及他们的父母的查询，直到我到达根父母。例如，给定以下数据：

```
ID / Parent ID
1  /  0
2  /  1
3  /  2
4  /  0
5  /  3 
```

因此，如果我传入 ID 5，我希望得到一个带有结果的查询：

```
ID / Parent ID
1  /  0
2  /  1
3  /  2 
```

该表不适用于 hierarchyid 类型，因此我怀疑这需要使用 CTE 完成，但不知道如何操作。如果它可以在 SQL 查询/过程中完成，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-22T08:55:42.030

**这或多或少是您想要的：**

```
-- CTE to prepare hierarchical result set
;WITH #results AS
(
    SELECT  id, 
            parentid 
    FROM    [table] 
    WHERE   id = @childId
    UNION ALL
    SELECT  t.id, 
            t.parentid 
    FROM    [table] t
            INNER JOIN #results r ON r.parentid = t.id
)
SELECT  *
FROM    #results; 
```

**参考：**

*   [CTE：公用表表达式](http://msdn.microsoft.com/en-gb/library/ms175972.aspx)

**工作示例：**

```
-- create table with self lookup (parent id)
CREATE TABLE #tmp (id INT, parentid INT);

-- insert some test data
INSERT INTO #tmp (id, parentid) 
SELECT 1,0 UNION ALL SELECT 2,1 UNION ALL SELECT 3,2
UNION ALL SELECT 4,0 UNION ALL SELECT 5,3;

-- prepare the child item to look up
DECLARE @childId INT;
SET @childId = 5;

-- build the CTE
WITH #results AS
(
    SELECT  id, 
            parentid 
    FROM    #tmp 
    WHERE id = @childId
    UNION ALL
    SELECT  t.id, 
            t.parentid 
    FROM    #tmp t
            INNER JOIN #results r ON r.parentid = t.id
)

-- output the results
SELECT  * 
FROM    #results 
WHERE   id != @childId 
ORDER BY id;

-- cleanup
DROP TABLE #tmp; 
```

**输出：**

1 | 0
2 | 1
3 | 2

# javascript - 代码不等待回调函数完成

> ID：11598836
> 
> 赞同：1
> 
> 时间：2012-07-22T08:39:48.160
> 
> 标签：javascript, function, callback, console, timeout

我是来自 Java 的 Javascript 新手，想编写一个像 Java 方法一样的函数。问题是调用代码不会等待被调用函数完成，而是继续发生错误。我希望你明白我在说什么。也许你可以帮助我

```
if (Titanium.Facebook.loggedIn) {
        // User is not logged in with his ACS Account but with its Facebook Account
        // now we can check if he has an ACS Account with the same eMail Address
        Titanium.API.info('User seems to be logged in to Facebook');

        gFacebookAccount = gFacebookController.getLoggedInFacebookAccount();
        Titanium.API.info('Logged In Facebook Account is : '+ gFacebookAccount); } 
```

被调用的 getLoggedInFacebookAccount 看起来像这样。我试图通过超时循环延迟该方法不起作用。

```
exports.getLoggedInFacebookAccount = function()
{
Titanium.API.info('Started getLoggedInFacebookAccount');
var lCallBackFinished = false;
var lActualUser = null;
Titanium.Facebook.requestWithGraphPath('me', {}, 'GET', handleGraphRequestCallback);

waitForQueryCallback();

function waitForQueryCallback() {
    if (!lCallBackFinished) {
        Titanium.API.info('Wait for Query Callback Loop');
        setTimeout(waitForQueryCallback, 100);
        //
    }
    else
    {
        return lActualUser;
    }
}

function handleGraphRequestCallback(pGraphCallback) {

// damn callbacks - now here the user is logged in
// and the Graph Request is (sucessfully or not) finished

Titanium.API.info('Start handleGraphRequest-Callback');
if (pGraphCallback.success) {
    Titanium.API.info('Graph Request Callback Sucessful');
    lActualUser = pGraphCallback.result;

} else {
    Titanium.API.info('Graph Request Callback Not Sucessful');

}

lCallBackFinished = true;

}

} 
```

控制台输出是：

```
[INFO][TiAPI   (  301)] User seems to be logged in to Facebook
[INFO][TiAPI   (  301)] Started getLoggedInFacebookAccount
[INFO][TiAPI   (  301)] Wait for Query Callback Loop
[INFO][TiAPI   (  301)] Logged In Facebook Account is : undefined
[INFO][TiAPI   (  301)] Function called
[ERROR][TiJSError(  301)] (main) [214,2413] ----- Titanium Javascript Runtime Error -----
[ERROR][TiJSError(  301)] (main) [0,2413] - In undefined:1,1

[ERROR][TiJSError(  301)] (main) [0,2413] - Message: Uncaught SyntaxError: Unexpected token u
[ERROR][TiJSError(  301)] (main) [1,2414] - Source: undefined
[ERROR][V8Exception(  301)] Exception occurred at undefined:1: Uncaught SyntaxError: Unexpected token u
[INFO][TiAPI   (  301)] Wait for Query Callback Loop
[INFO][TiRootActivity(  301)] (main) [0,0] checkpoint, on root activity resume. activity = de.dosofun.knowitall.Knowitall2Activity@44ede8f8
[INFO][TiAPI   (  301)] Wait for Query Callback Loop
[INFO][ARMAssembler(   60)] generated scanline__00000077:03515104_00000000_00000000 [ 33 ipp] (47 ins) at [0x3666d0:0x36678c] in 4662744 ns
[INFO][TiAPI   (  301)] Wait for Query Callback Loop
[INFO][TiAPI   (  301)] Wait for Query Callback Loop
[INFO][ActivityManager(   60)] Displayed activity de.dosofun.knowitall/.Knowitall2Activity: 5509 ms (total 5509 ms)
[INFO][TiAPI   (  301)] Wait for Query Callback Loop
[INFO][TiAPI   (  301)] Wait for Query Callback Loop
[INFO][TiAPI   (  301)] Wait for Query Callback Loop
[INFO][TiAPI   (  301)] Wait for Query Callback Loop
[INFO][TiAPI   (  301)] Start handleGraphRequest-Callback
[INFO][TiAPI   (  301)] Graph Request Callback Sucessful 
```

行的原因：[INFO][TiAPI (301)] Logged In Facebook Account is : undefined 你可以看到代码没有等到调用的方法完成。

什么是必要的，这样我的代码才能按预期工作，如果我的代码很糟糕，什么是更好的方法（这不会让人难以阅读）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:46:07.887

```
wait_var = waitForQueryCallback();
YOU ARE NOT HANDLING THE RETURN FROM waitForQueryCallback() here...

function waitForQueryCallback() {
if (!lCallBackFinished) {
    Titanium.API.info('Wait for Query Callback Loop');
    setTimeout(waitForQueryCallback, 100);
    //
    RETURN SOMETHING HERE?
}
else
{
    return lActualUser;
}
} 
```

尝试从 waitForQueryCallback() 处理 wait_var 并在回调未完成时返回一些内容。

# android - 如何在android中将图像从一个活动发送到另一个活动？

> ID：11598838
> 
> 赞同：7
> 
> 时间：2012-07-22T08:40:10.250
> 
> 标签：android, android-imageview

我在一个类中有一个 imageView，单击 imageView 时会出现一个对话框，其中有两个选项可以从相机拍摄图像或打开设备的图像库。我想将图像从一个类发送到另一个类，以便它可以出现在 ImageView 中。我从几个小时开始搜索，但我只知道将文本数据从一个班级发送到另一个班级。有人能告诉我将图像从一个班级发送到另一个班级吗？

这是来自发送者类的代码，它将拍摄图像。

```
   takeImg.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent 事件) {
                // TODO 自动生成的方法存根
                if(event.getAction() == event.ACTION_UP)
                {
                    i=new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                    startActivityForResult(i,cameraData);
                }
                返回真；
            }
        });
    }
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO 自动生成的方法存根
        super.onActivityResult(requestCode, resultCode, data);
        如果（结果代码==RESULT_OK）
        {
            捆绑 extras=data.getExtras();
            bmp=(位图)extras.get("数据");
        }
    }
```

任何帮助谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-15T13:50:47.247

您在 Activity 中将 Image 作为**Bitmap获取，并且您还可以使用****Intent.putExtra()**将其作为 Bitmap 传递给另一个 Activity，如下所示：

**第一个活动**。

```
Intent intent = new Intent(this, SecondActivity.class);
intent.putExtra("bmp_Image", bmp); 
```

并从**第二个活动**中获取：

```
Bitmap bmp = (Bitmap) intent.getParcelableExtra("bmp_Image"); 
```

您不需要**获取 url**并**从 url 加载**。

**这是将捕获的图像**从一个 Activity 传递到另一个 Activity的最简单方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T08:47:42.453

我记得 putExtra() 和 getExtra() 的大小限制大约 1mb。所以一张图片可能会超过这个限制。只是传递图片的路径怎么样？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T09:38:10.073

我的首选方式（我认为最直接的方式）是在应用程序中使用自己的应用程序实例，以存储多个活动共有的变量。

创建一个类，我们称它为`MainApplication`extends`android.app.Application` 并在清单中声明它：

```
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:name=".MainApplication"> 
```

然后你在 Activity 中得到一个应用程序对象的实例，如下所示：

```
MainApplication application = ((MainApplication)getApplication()); 
```

在此应用程序对象中，您可以存储任何应用程序级数据并像往常一样使用它：

```
application.setImage(...);

application.getImage(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-17T05:25:55.783

我得到了您需要将图像路径从一个活动发送到另一个活动的答案。filePath 是图片的路径。

```
Intent open_displayPage=new Intent(MainActivity.this,display_page.class);
open_displayPage.putExtra("imagePath", filePath); 
```

并在另一个活动中获得路径

```
final String path = getIntent().getStringExtra("imagePath");
org_bmp = BitmapFactory.decodeFile(path); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-22T09:13:25.027

拿一个`Global.class`并声明`public static Bitmap bmp`；

```
takeImg.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                if(event.getAction() == event.ACTION_UP)
                {
                    i=new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                    startActivityForResult(i,cameraData);
                }
                return true;
            }
        });
    }
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        if(resultCode==RESULT_OK)
        {
            Bundle extras=data.getExtras();
            Global.bmp=(Bitmap)extras.get("data");
        }
    } 
```

当你想使用时`Bitmap bitmap = Global.bmp`；

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-18T01:38:16.710

我会告诉你最好的方法好吧。

1st) 获取并发送图像 URI

```
Uri imageUri = data.getData();
Intent newIntent = new Intent(Class.this, Class.class);
newIntent.putExtra(IMAGE_URI_KEY, imageUri);
startActivity(newIntent); 
```

2nd）接收图像以及如何显示它

```
receivedImageUri = getIntent().getParcelableExtra(IMAGE_URI_KEY);
imageView.setImageURI(receivedImageUri); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-30T06:55:11.640

我不得不稍微重新缩放位图以不超过事务活页夹的 1mb 限制。您可以调整 400 的屏幕或使其动态化，这只是一个示例。它工作正常，质量很好。它也比保存图像并在之后加载它要快得多，但你有大小限制。

```
public void loadNextActivity(){
Intent confirmBMP = new Intent(this,ConfirmBMPActivity.class);

ByteArrayOutputStream stream = new ByteArrayOutputStream();
Bitmap bmp = returnScaledBMP();
bmp.compress(Bitmap.CompressFormat.JPEG, 100, stream);

confirmBMP.putExtra("Bitmap",bmp);
startActivity(confirmBMP);
finish();

}
public Bitmap returnScaledBMP(){
Bitmap bmp=null;
bmp = tempBitmap;
bmp = createScaledBitmapKeepingAspectRatio(bmp,400);
return bmp;
} 
```

使用以下代码在 nextActivity 中恢复 bmp 后：

```
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_confirmBMP);
Intent intent = getIntent();
Bitmap bitmap = (Bitmap) intent.getParcelableExtra("Bitmap");

} 
```

我希望我的回答能有所帮助。问候

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-22T09:27:40.107

您可以使用单例对象来存储您的图像：

```
public class SingletonModel {
    private Bitmap Image;
    private SingletonModel; 
    public static SingletonModel getInstance() {
        if (instance == null) {
            instance = new SingletonModel();
        }
        return instance;
    }

    public Bitmap getImage() {
       return this.Image
    }

    public Bitmap setImage(Bitmap ImageIn) {
        this.Image = ImageIn;
    }
} 
```

在你的第一个活动中放：

```
SingletonModel.getInstance().setImage(image); 
```

在您的第二个活动中：

```
Bitmap image = SingletonModel.getInstance().getImage(); 
```

或者，您可以创建一个扩展对象`Application`，因此该对象对所有类都是可见的（这个想法与单例对象相同）。

# sublimetext2 - Sublime Text 2 中注释行的键盘快捷键

> ID：11598840
> 
> 赞同：159
> 
> 时间：2012-07-22T08:40:38.023
> 
> 标签：sublimetext2

在**[Sublime Text 2](https://www.sublimetext.com/2)**中，如何在**评论**中包含选择？
此操作是否有键盘快捷键？

* * *

## 回答 #1

> 赞同：288
> 
> 时间：2012-07-22T08:44:41.620

默认情况下，在 Linux/Windows 上，英文键盘的快捷键是`Ctrl`+ `Shift`+`/`来切换块注释，`Ctrl`+`/`来切换行注释。

如果你进入`Preferences->Key Bindings - Default`，你可以找到所有的快捷方式，下面是注​​释行。

```
{ "keys": ["ctrl+/"], "command": "toggle_comment", "args": { "block": false } },
{ "keys": ["ctrl+shift+/"], "command": "toggle_comment", "args": { "block": true } }, 
```

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2013-03-14T06:44:58.307

In the "Preferences->Key Bindings - User"

```
[
   { "keys": ["ctrl+7"], "command": "toggle_comment", "args": { "block": false } },
   { "keys": ["ctrl+shift+7"], "command": "toggle_comment", "args": { "block": true } }
] 
```

Just paste it, these are will work great !

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-11-29T22:11:19.903

我想补充一下，默认情况下，在我的 Mac 上，块注释切换快捷方式是`cmd`+ `alt`+`/`

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-08-05T18:31:52.443

对于德语键盘，使用`ctrl`+ `shift`+`#`切换块注释，使用`ctrl`+`#`切换行注释。

快捷方式 in设置`Preferences->Key Bindings - Default`为`Ctrl`++和`Shift`+ ，但要实际使用这些功能，请按上述键。`/``Ctrl``/`

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-08-23T18:45:20.790

在巴西葡萄牙语 ABNT2 键盘中，我遇到了与 JoshDM 报告的问题类似的问题。在文件 sublime-keymap 我有：

```
{ "keys": ["ctrl+/"], "command": "toggle_comment", "args": { "block": false } },
{ "keys": ["ctrl+shift+/"], "command": "toggle_comment", "args": { "block": true } }, 
```

但我必须使用`ctrl`+`;`和`ctrl`++ `shift`。`;`在我的键盘`;`上，位于`/`.

这似乎是一个错误。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-02-14T12:20:05.770

您需要将“/”替换为“7”，它适用于非英文键盘布局。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-07-15T13:56:14.660

这对我来说是个窍门，我来自括号并习惯于在数字键盘上使用`ctrl`+ `/`。

```
[
    { "keys": ["ctrl+keypad_divide"], "command": "toggle_comment", "args": { "block": false } },
    { "keys": ["ctrl+shift+keypad_divide"], "command": "toggle_comment", "args": { "block": true } }
] 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-11-21T10:42:03.277

在我的键盘（瑞典语）中，它是“ä”右侧的键：“*”。

`ctrl`+`*`

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-05-01T16:59:45.970

在键盘（西班牙语）中，SO：Win7。

进入 Preferences->Key Bindings - Default，替换`..."ctrl+/"]...`为`"ctrl+7"...`

并且不要使用小键盘，它不起作用。只需使用字母上方的数字

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-01-27T01:41:16.707

似乎是某种键盘映射错误。我是葡萄牙人，所以我使用的是 PT/PT 键盘。Sublime Text 3 显然处理`/`为`~`.

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-10-15T19:09:20.950

在带有美式键盘的 Mac 上，您需要`cmd`+ `/`。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-03-19T02:19:28.350

Max OS：如果您想切换评论多行与块评论整个选择，您可以进行多行编辑，`shift`+ `cmd`+ `L`，然后`cmd`+`/`以该顺序。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-03-11T16:27:11.927

在我的带有西班牙语键盘的笔记本电脑上，问题似乎是键绑定上的“/”，我将其更改为++ `ctrl`，现在它可以工作了。`shift``c`

```
{ "keys": ["ctrl+shift+c"], "command": "toggle_comment", "args": { "block": true } }, 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-07-10T17:04:19.530

`Ctrl`+`d` **和** `Ctrl`+ `Shift`+ `d`....

```
[

{ "keys": ["ctrl+d"], "command": "toggle_comment", "args": { "block": false } },

{ "keys": ["ctrl+shift+d"], "command": "toggle_comment", "args": { "block": true } },

] 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-01-02T11:00:57.803

首先打开 Sublime Text 2。

并在顶部菜单栏上选择`Preferences`.

而不是选择`Key Bindings -User`.

而不是把这段代码，

```
[
    { "keys": ["ctrl+shift+c"], "command": "toggle_comment", "args": { "block": false } },

    { "keys": ["ctrl+shift+c"], "command": "toggle_comment", "args": { "block": true } }
] 
```

我使用**Ctrl** + **Shift** + **C**，您也使用不同的快捷键。

# mysql - 我在 mysql 中插入条件的 SQL 语句有什么问题？

> ID：11598841
> 
> 赞同：1
> 
> 时间：2012-07-22T08:40:45.623
> 
> 标签：mysql

那里：

当我尝试在没有任何重复记录的情况下在表中插入数据时，我使用以下两个 SQL 语句。但它们都不适合我。我的 mysql 版本是 5.1.33-community。

```
SELECT @nextID := IFNULL( MAX( N_KEY ), 0 ) + 1
  FROM SYS_DICT
 WHERE N_CAT = 1;

IF (SELECT COUNT(*) AS N_COUNT
     FROM SYS_DICT
    WHERE N_CAT=1 AND C_VALUE='welcome'
   ) <= 0
THEN
  INSERT INTO SYS_DICT
    VALUES( 1, @nextID, 1, 100, 'welcome');
END IF 
```

或者

```
SELECT @nextID := IFNULL( MAX( N_KEY ), 0 ) + 1
  FROM SYS_DICT
 WHERE N_CAT=1;

INSERT INTO SYS_DICT
  VALUES ( 1, @nextID, 1, 100, 'welcome')
  WHERE NOT EXISTS (
    SELECT N_KEY
      FROM SYS_DICT
     WHERE N_CAT=1 AND C_VALUE='welcome'
  ); 
```

有什么提示吗？

# java - OSGi 和遗留应用程序

> ID：11598844
> 
> 赞同：0
> 
> 时间：2012-07-22T08:41:17.987
> 
> 标签：java, osgi, legacy

我想使用`Config Admin service`来管理我的服务的配置。由于我刚刚开始使用`OSGi`，我想一步一步地介绍它。所以，我想保留我现在的一些应用程序，而不是在`OSGi`框架内执行它们。但是，我也希望能够使用`Config Admin service`这些遗留应用程序，因此它们也可以像其他`OSGi`服务一样获取配置信息。

有可能`OSGi`吗？通过查看规格，我找到了`Foreign Applications Access`. 不知道是不是和我的问题有关。如果可能的话，我可以在哪里找到有关如何使我的遗留应用程序与`Config Admin service`.

我确切地说我正在使用`Apache Felix`它的具体实现。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:05:32.647

基本上你想要的是可以在 OSGi 内部和外部运行的代码。在 OSGi 中，您希望利用配置管理服务。那是对的吗？

所以一个很好的解决方案是遵循依赖注入的原则。您的代码不应该加载配置，而是应该期望配置被注入。例如，在需要配置属性的地方使用 setter。在 OSGi 之外，您可以使用 spring 或手动代码注入来设置配置。在 OSGi 中，您可以使用 Activator 或蓝图上下文。当您不在 OSGi 中运行时，两者都将处于非活动状态，因此始终拥有它们并没有什么坏处。

请参阅我的第一个 Apache Karaf 教程以了解其工作原理。本教程仅显示了 OSGi 的设置，但很容易看出您需要在 OSGi 之外执行哪些操作来配置示例。 [Karaf 教程第 1 部分 - 安装和首次应用](http://www.liquid-reality.de/x/DIBZ)

# macos - cocoa：如何实现表格动画？

> ID：11598847
> 
> 赞同：0
> 
> 时间：2012-07-22T08:41:47.487
> 
> 标签：macos, cocoa

我很好奇如何实现以下应用动画：![在此处输入图像描述](../Images/f85537483a43223caad1055a8ac8487d.png)

单击Alcides后，应用程序将逐渐在右侧显示一个新视图，左侧表格宽度将是原来的1/2。
![在此处输入图像描述](../Images/b96dae236ef1fcc69795e680f99f86f4.png)

如果我想实现它，我该怎么做？我应该使用什么数据结构和动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T09:42:02.863

大多数自定义动画的答案是考虑你想做什么并去做。陈词滥调但真实。

1.  以动画速度 X 将 tableview 的宽度减半

2.  以动画速度 X 从右侧移动 RH 详细信息表

您需要将场景的 ViewController 作为这对表的容器。但是表视图可能有自己的视图控制器，容器管理器应该保持强引用。

```
ManagerViewController -> UIView -> PeopleTableView -> PeopleTableViewController
                                -> DetailTableView -> DetailTableViewController 
```

所以在代码中...

```
detailTableView.frame = Frame_with_x_aligned_to_RH_edge_of_screen;

[UIView animateWithDuration:X 
    animations:^{
       peopleTableView.frame = Frame_with_half_its_fully_expanded_width;
       detailTableView.frame = Frame_with_x_aligned_to_edge_of_peopleTable;
} 
    completion:^{ //stuff to do at the end of the animation  
}]; 
```

# php - 检查是否声明了另一个函数，否则更改位置

> ID：11598848
> 
> 赞同：0
> 
> 时间：2012-07-22T08:41:48.880
> 
> 标签：php

我有一个“make-do”页面身份验证器，它定义了允许哪些用户组访问该页面，但是，如果该页面是他的用户编辑页面但不触及任何其他页面，我的一些脚本允许用户通过用户编辑页面。为此，我禁用了对用户组的访问，除非您是管理员或您当前所在的用户编辑页面是您自己的。

我试图创建一个函数来执行此操作，但是 allowOnly 用户组函数会在不检查页面其他位置是否定义其他函数的情况下执行惩罚。

这是“make-do”功能和我希望它们如何工作的示例：

```
 public function allowOnly($officer, $administrator, $superuser)
{
    $authority = 0;
    if ($officer == true && $this->session->isOfficer()) {
        $authority++;
    }
    elseif ($administrator == true & $this->session->isAdmin()) {
        $authority++;
    }
    elseif ($superuser == true & $this->session->isSuperuser()) {
        $authority++;
    }
    if ($authority != 0) {
        return true;
    }
    else {
        header("Location: ../incorrectRights.php");
        exit;
    }
}
function allowCurrentUser()
{
    global $authority;
    $authority++;
} 
```

如果用户不是任何允许的用户组，这会更改用户位置，但由于该代码在“allowCurrentUser”之前执行，因此它会在函数有机会允许用户通过之前更改位置。

我希望它像这样工作：

```
<?php
     include("functions.php");
     $functions->allowOnly(false, false, true);
     if($session->username == $allowedUserName) {
          $functions->allowCurrentUser();
      } 
```

如果我的描述性不够，或者我的代码效率低下，我很抱歉，哎呀，即使我错过了一个为我做这件事的内置 php 函数！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:54:17.020

你应该检查 PHP 的[function_exists()](http://php.net/manual/en/function.function-exists.php)，它会告诉你这个函数是否已经存在。

您的代码中也有一些错误。

```
$administrator == true & $this->session->isAdmin() 
```

应该

```
$administrator == true && $this->session->isAdmin() 
```

因为你只使用了一个`&`，而它应该是`&&`

也改变

```
$superuser == true & $this->session->isSuperuser() 
```

至

```
$superuser == true && $this->session->isSuperuser() 
```

阅读您的代码后，我意识到您正在使用`$authority`变量来保存值并检查是否授权用户。而且你正在使用全局。我永远不会那样做，而是将 $authority 声明为下面的类属性，这是您如何做到这一点的示例。

```
class functions 
{
    //declare class propert and set default value to 0
    protected $_authority = 0;

    public function allowOnly($officer, $administrator, $superuser)
    {
        if ($officer == true && $this->session->isOfficer()) {
            $this->_authority++;
        }
        elseif ($administrator == true && $this->session->isAdmin()) {
            $this->_authority++;
        }
        elseif ($superuser == true && $this->session->isSuperuser()) {
            $this->_authority++;
        }
        if ($this->_authority != 0) {
            return true;
        }
        else {
            header("Location: ../incorrectRights.php");
            exit;
        }
    }

    public function allowCurrentUser()
    {
        $this->_authority++;
        return $this->_authority;
    }
} 
```

**更新：**

而不是重定向页面为什么不在函数调用期间返回 false 和重定向，您可以这样做。

```
class functions 
{
    //declare class propert and set default value to 0
    protected $_authority = 0;

    public function allowOnly($officer, $administrator, $superuser)
    {
        if ($officer == true && $this->session->isOfficer()) {
            $this->_authority++;
        }
        elseif ($administrator == true && $this->session->isAdmin()) {
            $this->_authority++;
        }
        elseif ($superuser == true && $this->session->isSuperuser()) {
            $this->_authority++;
        }

        return ($this->_authority != 0) ? true : false;
    }

    public function allowCurrentUser()
    {
        $this->_authority++;
        return $this->_authority;
    }
} 
```

在函数调用中。

```
include("functions.php");
if($functions->allowOnly(false, false, true)) {
    //person is allowed access
} 
//else allow current user
elseif($session->username == $allowedUserName) {
    $functions->allowCurrentUser();
} 
else {
    //redirect here
    header("Location: ../incorrectRights.php");
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:19:29.947

我不完全确定这是否是您根据标题寻找的答案，但这就是您所要求的印象。

假设发生的情况是您对 allowOnly() 的检查将用户带到“../incorrectRights.php”页面，然后您检查用户登录是否与查看的页面相同，您需要做什么将检查放在 allowOnly 函数中，或者至少在检查`$authority != 0`.

这是一个如何解决这个问题的快速示例：

```
public function allowOnly($officer, $administrator, $superuser)
{
    $authority = 0;
    if ($officer == true && $this->session->isOfficer()) {
        $authority++;
    }
    elseif ($administrator == true && $this->session->isAdmin()) {
        $authority++;
    }
    elseif ($superuser == true && $this->session->isSuperuser()) {
        $authority++;
    }

    if(function_exists('allowCurrentUser')){
        if (allowCurrentUser()) {
            return true;
        }
    }
    if ($authority != 0) {
        return true;
    }
    else {
        header("Location: ../incorrectRights.php");
        exit;
    }
}
function allowCurrentUser()
{
    if($session->username == $allowedUserName){
        return true; 
    }
    else {
        return false;
    }
} 
```

然后你的使用会导致更像

```
 <?php
     include("functions.php");
     $functions->allowOnly(false, false, true);
 ?> 
```

如您所见，我还`function_exists('functionnamehere')`加入了问题标题中似乎要求的调用，因为我们实际上声明了该函数，因此知道它存在，您也可以这样做：

```
 if ($authority != 0 || allowCurrentUser()) {
        return true;
    } 
```

# c# - System.Property 的不同图标背后的目的是什么？

> ID：11598850
> 
> 赞同：1
> 
> 时间：2012-07-22T08:42:23.383
> 
> 标签：c#, visual-studio

请注意下方控件属性的图标

```
button1.Text 
```

并注意

```
FontStyle.Bold 
```

enum Fontstyle 的 Bold 属性的图标与上面控件的 Text 属性不同。为什么？。您如何看待属性图标的差异？在上述两种情况下使用系统属性中不同图标的原因是什么？

将其用作财产不是误导用户吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T08:59:36.637

这两个是非常不同的东西。`button1.Text`是一个读写实例属性。另一边，`FontStyle`是一个`enum`。`FontStyle.Bold`是一个`enum`项目 - 一个常量只读值。

看看[这个 SO question](https://stackoverflow.com/questions/4462439/meaning-of-visual-studio-intellisense-icons)以了解其他图标的含义。答案之一指向[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/y47ychfe%28v=VS.100%29.aspx)。

# java - 获取系统日期 ddmmyyyy

> ID：11598851
> 
> 赞同：2
> 
> 时间：2012-07-22T08:42:24.147
> 
> 标签：java, android, date

这可能是一个简单的问题，但是如何像`ddmmyyyy`在 eclipse 中那样以格式获取系统日期。所以没有任何字母、空格或其他字符？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-22T09:00:01.293

```
String todayAsString = new SimpleDateFormat("ddMMyyyy").format(new Date()); 
```

Eclipse 是一个 IDE。Java是语言。谷歌搜索“格式化 Java 日期”和“Java 中的当前日期”会导致数百页告诉你答案。重要的是语言：Java。不是 IDE，它只是一个生成和编译 Java 代码的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:03:43.263

您可以使用此代码，并且可以将格式更改为您喜欢的任何格式。

```
import java.text.SimpleDateFormat;
import java.util.Date;

public class MainClass {
    public static void main(String[] args) {
        String pattern = "MMddyyyy";
        SimpleDateFormat format = new SimpleDateFormat(pattern);
        // formatting
        System.out.println(format.format(new Date()));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T09:19:45.580

尝试这个：

```
 Calendar cal= Calendar.getInstance();
               String cal_for_month = cal.get(Calendar.MONTH);
               String cal_for_year = cal.get(Calendar.YEAR);
                String cal_for_day = cal.get(Calendar.DAY_OF_MONTH); 
```

# java - 不能将任何东西放入 /var/lib/tomcat7/webapps/

> ID：11598852
> 
> 赞同：11
> 
> 时间：2012-07-22T08:42:54.097
> 
> 标签：java, jsp, ubuntu, webserver, tomcat7

我今天开始做JAVA web开发，遇到了一些问题，我在我的ubuntu机器上安装了我的tomcat7。现在，当我浏览到 //localhost:8080 时，我会看到默认的欢迎页面：

这是默认的 Tomcat 主页。它可以在本地文件系统上找到：`/var/lib/tomcat7/webapps/ROOT/index.html`

Tomcat7 的老手可能会很高兴得知这个 Tomcat 系统实例是使用`CATALINA_HOME`in`/usr/share/tomcat7`和`CATALINA_BASE`in安装的`/var/lib/tomcat7`，遵循`/usr/share/doc/tomcat7-common/RUNNING.txt.gz`.

但奇怪的是，当我尝试时`echo $CATALINA_HOME`什么都没有出现。我也不能在默认的 /var/lib/tomcat7/ROOT 中复制/创建任何东西，尽管这只是提供很少的权限但我想知道这是否是正确的方法？

我想做的是在我的家中创建一个单独的目录，我可以在其中放置我的 Web 应用程序，并且 tomcat 可以从那里读取 hem。有没有办法做到这一点？在 apache 中，我可以通过更改文档根目录和目录来做到这一点，但我不知道如何为 tomcat 做到这一点

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T18:45:49.317

> 但奇怪的是，当我尝试 echo $CATALINA_HOME 时，什么也没有出现。

这是因为打包版本`CATALINA_HOME`在启动 Tomcat 之前设置，在从配置文件（通常在 /etc 中的某个位置）读取它之后。

> 我也不能在默认的 /var/lib/tomcat7/ROOT 中复制/创建任何东西，尽管这只是提供很少的权限但我想知道这是否是正确的方法？

权限问题与您不是 root（或 Tomcat 用户）有关。大多数打包的 Tomcat 安装（deb 或 RPM）倾向于在安装时考虑到特定用户，并且有时将内容复制为不同的用户是行不通的。

`/usr/share/tomcat7`是您的`CATALINA_HOME`目录，它具有指向其他目录的链接，例如`/var/lib/tomcat7/webapps`,`/etc/tomcat7`等。您不应该直接复制到 Web 应用程序中，您应该将 Web 应用程序打包到 WAR 文件中并“部署”它。优点很多。

> 我想做的是在我的家中创建一个单独的目录，我可以在其中放置我的 Web 应用程序，并且 tomcat 可以从那里读取 hem。有没有办法做到这一点？

是的，在“部署网络应用程序”时创建。查看标准 Tomcat7 文档，如果您喜欢非命令行界面，请考虑安装“管理器”Web 应用程序。既然您知道 Web 应用程序的“安装”被称为什么，那么这可能是一项更容易的任务。

> 在 apache 中，我可以通过更改文档根目录和目录来做到这一点，但我不知道如何为 tomcat 做到这一点

Tomcat 对文档根有一套不同的、稍微严格的要求。您需要学习它，并接受它永远不会相同的想法。基本上在“webapps”目录下，是一个 WAR 文件或来自 WAR 文件的扩展目录。就地编辑对 Tomcat 来说不是一个好主意，因为 CGI 等效项不是每次运行时都从磁盘读取，而是链接到 Tomcat 的内存中。这意味着目录中的更改可能不会影响您的 Web 应用程序，这是不必为已部署的 Web 应用程序更改磁盘文件的充分理由。

修改 Web 应用程序，重新打包它，然后更新部署。这确实是使用 Tomcat 的“正确”方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-05T10:25:08.660

授予 webroot 文件夹 777 权限

```
sudo chmod -R 777 Webroot 
```

移动到tomcat文件夹后

# iphone - 将图像保存到“已保存的照片”后，相机胶卷资产图像不可用

> ID：11598855
> 
> 赞同：0
> 
> 时间：2012-07-22T08:43:31.823
> 
> 标签：iphone, objective-c, ios, uiimage, alassetslibrary

当我的 iPhone 应用程序启动时，我正在使用`ALAssetsLibrary`在相机胶卷中制作所有图像的数组。我将每个图像存储为`ALAsset *`一个数组。稍后在应用程序中，我使用以下方法将图像保存到图库：

```
UIImageWriteToSavedPhotosAlbum(croppedImage, self, @selector(image:didFinishSavingWithError:contextInfo:), nil); 
```

图像已成功保存到已保存的相册中。但是，现在我的问题是，当我尝试使用所有图像的现有数组检索图像时，我什么也得不到。我需要再次构建所有图像的数组还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T04:43:02.487

保存图像会更改库并使库中的资产等对象无效。每当库更改时，您都需要从库中重新加载资产 - 当您收到`ALAssetsLibraryChangedNotification`.

# java - 通过来自构造函数的反射提取参数类型

> ID：11598857
> 
> 赞同：1
> 
> 时间：2012-07-22T08:44:21.440
> 
> 标签：java, reflection

我正在尝试`java.lang.reflect.Constructor<T>`通过使用该`getParameterTypes()`方法从对象中提取参数类型

构造函数如下所示：

```
 public SearchParameters(boolean doStaticBoosting, boolean doRewrites, boolean doCatalogsFacet, long userId,
                            Filter catalogsFilter, boolean doCatalogsFilterTypeFacet, boolean doSocialBoosting,
                            long[] categoryFilteringId) 
```

现在，当我调用此方法时，我得到以下参数类型：

![在此处输入图像描述](../Images/50b36cf76da632de7f59cec3ad660319.png)

如您所见，最后一个 Class 参数确实搞砸了，并定义为

> 类[J

实际上我希望它是一个`long[].class`. 我需要稍后重建这个对象，当然我不能仅仅基于我得到的参数信息来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T08:54:15.890

这一点也不乱。这只是 的字符串表示形式`long[].class`：

```
System.out.println(long[].class); // class [J 
```

除非您真的*需要*以某种方式保留字符串表示，否则您应该将值保持为 a`Class<?>`并且一切都应该很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T08:54:07.113

那是`long[]`班级的名字。尝试这个：

```
 long[] longs = {1L, 2L};
    System.out.println("Name is: " + longs.getClass().getName()); 
```

这打印：

```
Name is: [J 
```

[您可以从Class.getName() 的 Javadocs 中](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getName%28%29)获取所有原始数组类的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T08:54:15.847

`class [J` *是*的名称`long[].class`。查看[`Class.getName()`JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getName())。

`long[].class`此外，您可以使用此名称创建一个实例，请参阅：[如何创建原始数组类？](https://stackoverflow.com/questions/5076690)

# asp.net - _viewstart.cshtml 条件 layout.cshtml 出现错误此网页有重定向循环

> ID：11598862
> 
> 赞同：0
> 
> 时间：2012-07-22T08:44:58.467
> 
> 标签：asp.net, asp.net-mvc-3, razor

我的网站中有 2 个角色管理员和员工，还有 2 个 layout.cshtml。在我的 _viewstart.cshtml 文件中

```
@{
   if (!ReferenceEquals(Session["Role"], null))
    {
        if (Session["Role"].ToString() == "Admin")
        { Layout = "~/Views/Shared/_AdminLayout.cshtml"; }
        else
        { Layout = "~/Views/Shared/_EmployeeLayout.cshtml"; }

    }
   else
   {
       Response.Redirect("~/");
   }

} 
```

一切正常，但如果会话等于 null 的 else 部分，我将重定向到登录页面“~/”。它也在登录页面上重定向，但问题是在登录视图中，当请求到达服务器以获取脚本或 .css 文件时，我有一些 css 链接和脚本链接。服务器再次重定向到 _viewstart.cshtml 并再次执行所有进程，我收到此错误

这个网页有一个重定向循环本地地址的网页导致了太多的重定向。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。

请建议我解决方案或让我知道我的代码在哪里错了

1\. _viewstart.cshtml 是否会在每个请求中执行，而不仅仅是视图？2\. 我怎样才能消除这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T05:08:05.347

简而言之，@Mark 是对的。`_ViewStart.cshtml`总是被调用，即使对于没有布局的页面也是如此。所以，你在一个循环中。所以，在你的`_ViewStart.cshtml`

```
@{
    if (!ReferenceEquals(Session["Role"], null))
    {
        if (Session["Role"].ToString() == "Admin")
        { Layout = "~/Views/Shared/_AdminLayout.cshtml"; }
        else
        { Layout = "~/Views/Shared/_EmployeeLayout.cshtml"; }
    }
    else
        Layout = null;
} 
```

然后，创建一个 BaseController 类，向其中添加以下方法并让所有控制器扩展它。

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    if (ReferenceEquals(Session["Role"], null))
        Redirect("~/");

    base.OnActionExecuting(filterContext);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:01:28.517

而不是 Response.Redirect 为什么不使用[RedirectToAction](http://msdn.microsoft.com/en-us/library/dd470154)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:58:36.070

`_ViewStart.cshtml`每次要渲染视图时都会调用。

在这种情况下，您使用两种类型的布局，一种用于管理员，另一种用于员工。

**您将为匿名用户使用什么布局？**

对于匿名用户，显然`Session["Role"]`将为空，您再次重定向到再次输出视图的登录操作，该视图再次调用，`_ViewStart.cshtml`因此您处于循环中。

我猜你不应该重定向到登录页面，`_ViewStart.cshtml`基本上它应该由**授权**过滤器来处理。

你可以像这样改变条件，

```
@{
   if (!ReferenceEquals(Session["Role"], null))
    {
        if (Session["Role"].ToString() == "Admin")
        { Layout = "~/Views/Shared/_AdminLayout.cshtml"; }
        else
        { Layout = "~/Views/Shared/_EmployeeLayout.cshtml"; }

    }
   else
   {
       Layout = "~/Views/Shared/_GeneralLayout.cshtml";
   }
} 
```

# wicket - CompoundPropertyModel Wicket - 对象图

> ID：11598863
> 
> 赞同：0
> 
> 时间：2012-07-22T08:45:17.757
> 
> 标签：wicket, compound-key

我想使用 Wicket 中的 CompoundPropertyModel 来创建用户。

我的用户类如下所示：

```
 public class User {
      private String username;
      ...
      private Address address;
      ...
     }

    public class Address{
      private String street;
      ...
     } 
```

如果我尝试通过用户的复合属性模型访问地址所在的街道，我会得到一个空指针异常，当然：“user.address.street”。所以我必须提前自己实例化“地址”类。有没有更优雅的方式来动态实例化成员字段？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T11:18:25.500

如果用户必须有地址，您应该在用户的构造函数中创建地址的实例。否则，您可能会在 getAddress() 方法中进行空检查，如果它为空，则创建一个新实例...

```
public Address getAddress() {
    if (address == null) {
        address = new Address();
    }

    return address;
} 
```

# android - 将在多个文本视图之间翻转的小部件？

> ID：11598866
> 
> 赞同：0
> 
> 时间：2012-07-22T08:45:48.803
> 
> 标签：android, string, widget, textview

我有多个要在小部件中显示的字符串。小部件需要有按钮在字符串（智慧词）之间切换。我的问题是我无法设置一个按钮来将一个 textView 更改为另一个。我所知道的是当你按下一个按钮时如何开始一个活动，这不是我想要的。谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:50:13.083

请使用意图来获取您的活动 -

```
Intent intent=new Intent(FirstActivity.this,MyApp.Class);
startActivity(intent) 
```

# c# - 为 asp.net gridview 中的每一行提供一个唯一的行 ID

> ID：11598868
> 
> 赞同：1
> 
> 时间：2012-07-22T08:46:07.687
> 
> 标签：c#, asp.net, .net, gridview

我需要为 asp.net gridview 的每一行提供一个唯一的 rowID。默认行为是它不给`<tr>`生成的任何行。如何做到这一点？

```
 <tr id="UniqueID" class="orbox" style="color: rgb(51, 51, 51); background-color: AliceBlue; font-size: 11px; cursor: move;" align="center">
        <td></td>
    </tr> 
```

**编辑：见上面的代码，我要的是 HTML ID `id="UniqueID"`。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T08:52:33.477

将代码放在`public int cRowID = 0;`页面类后面的代码上，然后放在您赢得使用此 ID 的 GridView 上，`<%=cRowID++%>`.

例如：

```
<asp:TemplateField HeaderText="ID">
    <ItemTemplate ><%=cRowID++%></ItemTemplate>
</asp:TemplateField> 
```

要将 id 放在行上，您可以使用`RowDataBound`抓取行并添加为属性：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    GridViewRow row = e.Row;
    if (row.RowType == DataControlRowType.DataRow)
    {
        row.Attributes["id"] = cRowID.ToString();
        cRowID++;
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:54:14.617

如果您正在以编程方式创建 DataGridView，那么您可以将唯一值分配给 GridViewRow.Id [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow_properties](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow_properties)

# xtext - 当需要符号来引用而不是定义时，如何创建交叉引用？

> ID：11598869
> 
> 赞同：0
> 
> 时间：2012-07-22T08:46:25.433
> 
> 标签：xtext

在我的 DSL 中，我有类似的东西：

```
x = 14
y = $x + 1 
```

所以一个元素只用它的名字来*定义，但是当**被引用*时，必须添加一些符号。引用元素时，禁止符号和名称之间的任何空格。

**如何在 Xtext 中做到这一点，同时仍然允许这些元素之间的交叉引用？**

因为在我看来，我要么必须为此使用两个不同的终端——一个匹配`x`，另一个匹配`$x`——但是交叉引用机制如何将它们关联在一起？或者，如果我定义：

```
ElementRef: '$' [Element|ELEMENT_NAME]; 
```

然后 Xtext 将允许符号和名称之间有空格，这在我的 DSL 中是非法的。我想诸如“此时不接受空格”之类的选项会很棒，但是我在 Xtext 文档中找不到有关此类内容的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:18:50.707

您必须为交叉引用标记使用数据类型规则并注册一个去除 $ 符号的值转换器。

```
ElementRef: [Element|ReferenceID];
ReferenceID hidden(): '$' ID; 
```

值转换器负责令牌的抽象语法（ID）和具体语法（$ID）之间的转换。有关详细信息，请参阅[文档](http://www.eclipse.org/Xtext/documentation.html#valueconverter)。

# python - 单个 .py 文件中的两个控制器

> ID：11598871
> 
> 赞同：0
> 
> 时间：2012-07-22T08:46:47.077
> 
> 标签：python, pylons, controllers

我一直在浏览 reddit 代码，我注意到它们有时在一个 py 文件中有两个控制器类。例如：api.py 包含：

```
class ApiminimalController

class ApiController 
```

我想知道这是怎么做到的。我自己尝试过，但没有得到正确的结果。每当我添加一个新类时，我只能访问类中定义的操作，这些操作是按照他们在文档中提到的方式定义的。例如：

```
paster controller <c_name> 
```

在 c_name 中：

```
class <c_name>Controller: 
```

我不能定义另一个控制器类吗？我将如何在 routing.py 中定义它？

# iphone - 如何使用 NSEntityDescription 加载数据？

> ID：11598873
> 
> 赞同：0
> 
> 时间：2012-07-22T08:47:17.127
> 
> 标签：iphone, ios5, xcode4.3

我是 xcode 的新手。我希望有人会教我更多的xcode。

我现在正在学习核心数据，据我所知，我可以使用 uibutton 从 uitextfield 保存我的数据。这是我的代码。

```
- (IBAction)button1:(id)sender
{
    TestSaveDataAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    Highscore *record = [NSEntityDescription insertNewObjectForEntityForName:@"Highscore" inManagedObjectContext:context];
    record.highscore1 = textField.text;
    NSLog(@"Saved for %@", textField.text);
    NSError *error;
    if (![context save:&error])
    {
        NSLog(@"Error");
    } 
```

现在我有一个 UILabel 调用标签和一个 button2 旁边。当 button2 被按下时，我如何在我的标签中加载我的数据？请教我。

我已经这样写了，但我不知道如何将它放在我的标签中。我发现的任何教程都只将它放在 tableview 中。我不想把它放在 tableview 中，我只想让我的数据显示在我的标签中。

```
- (IBAction)button2:(id)sender
{
    TestSaveDataAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Highscore" inManagedObjectContext:context];
    [request setEntity:entity];
    NSError *error;
    if (![context save:&error])
    {
        NSLog(@"Error");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:56:35.710

您必须将[NSPredicate](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)添加到您的请求中并执行它。

```
 NSPredicate *predicate = <#create your predicate here#>;
    [request setPredicate:predicate];

    NSError *error;
    NSArray *results = [context executeFetchRequest:request error:&error];
    if (error) {
        //inform user
    }
    //if you found something, you can set text for your UILabel
    if ([results count]) {
        Highscore *record = [results objectAtIndex:0];
        label.text = record.highscore1;
    } 
```

# android - Android intent.getStringExtra() 奇怪的行为

> ID：11598877
> 
> 赞同：0
> 
> 时间：2012-07-22T08:47:58.510
> 
> 标签：android, android-intent, broadcastreceiver

我将`String`额外的传递给`Intent`发送到的 a `BroadCastReceiver`，并像这样获取它们：

```
public void onReceive(Context context, Intent intent) {
    if (intent.hasExtra("type")){
        Log.i("Listener", ":"+intent.getStringExtra("type")+":");

        if (intent.getStringExtra("type") == "start"){  
            Log.i("Listener", "start");
        }
        if (intent.getStringExtra("type") == "end"){    
            Log.i("Listener", "end");
        }
    }
}//end method 
```

这段代码给了我以下输出（如预期的那样）：

```
07-22 10:41:00.038: I/Listener(28678): :start: 
```

出乎意料的是，第二个 if 语句永远不会匹配，即使`type`显然设置正确。我已经看过几次了，这真的让我很烦。这种行为似乎很奇怪，据我所知，我正在以正确的方式处理这个问题。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T08:49:20.570

用于`String`比较`equals()`而不是`==`.

改变：

```
if (intent.getStringExtra("type") == "start")
{  
      Log.i("Listener", "start");
}
if (intent.getStringExtra("type") == "end")
{    
     Log.i("Listener", "end");
} 
```

到

```
if (intent.getStringExtra("type").equals("start")){  
            Log.i("Listener", "start");
        }
        if (intent.getStringExtra("type").equals("end")){    
            Log.i("Listener", "end");
        } 
```

阅读[此](https://stackoverflow.com/questions/767372/java-string-equals-versus)内容以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T08:51:02.877

String 不是原始数据类型，因此您不能使用 == 运算符来比较它们中的两个。相反，请尝试使用：

```
if (intent.getStringExtra("type").equals("start")){ 
```

和

```
if (intent.getStringExtra("type").equals("end")){ 
```

# sql - 来自 has_and_belongs_to_many 的 Rails 双重匹配

> ID：11598878
> 
> 赞同：2
> 
> 时间：2012-07-22T08:48:18.873
> 
> 标签：sql, ruby-on-rails, has-and-belongs-to-many

假设我有一个 has_and_belongs_to_many 关系，其中我有帖子和类别。查找某个类别中的所有帖子或特定帖子所属的所有类别很简单。但是，如果我想查找属于*多个*类别的帖子列表怎么办？例如，关于 Rails 中安全主题的帖子列表，我可能想要属于“安全”和“Rails”类别的帖子。

是否可以使用 ActiveRecord 中内置的 finder 方法来做到这一点，或者我需要使用 SQL 吗？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:30:39.763

我对rails一无所知，但我正在尝试用一些sql做类似的事情。这可能对我们任何一个人都有效，也可能无效....

我有一个文章表和一个应用类别的查找表。为了获得具有“安全”类别和“导轨”类别的文章，我将文章表加入到类别表中，当然，还要再次加入它。类别表的每个连接都使用表别名（即语言或主题）伪代码中的提示：

```
SELECT article.*,
category_language.category_id,
category_topic.category_id

FROM category category_language
INNER JOIN article ON category_language.articleID = article.articleID 
INNER JOIN category category_topic ON article.articleID = category_topic.articleID 

WHERE category_language.category_id in (420) /* rails */
and category_topic.category_id in (421) /* security */ 
```

这还没有完全解决，我希望如果我在这里表现出我的无知，有人会说出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:03:43.287

您可以使用`includes`or `joins`，例如：

```
@result = Post.includes(:categories).where("categories.name = 'Security' OR categories.name = 'Rails'") 
```

或者

```
@result = Post.joins(:categories).where("categories.name = 'Security' OR categories.name = 'Rails'") 
```

我还建议检查[此](http://railscasts.com/episodes/181-include-vs-joins?view=asciicast)`joins`railscast 以了解and之间的区别`includes`，以便您可以决定哪种情况更好。

# mysql - MySQL中的千位分隔符

> ID：11598879
> 
> 赞同：4
> 
> 时间：2012-07-22T08:48:20.003
> 
> 标签：mysql

我的 MySQL 数据库中有一个列（例如薪水）。数据类型是`DECIMAL(8,2)`. 我注意到它没有*千位分隔符*。

如何选择整列并在每条记录中放置千位分隔符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T08:51:43.757

您可以通过以下方式在[Format Function](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_format)的帮助下完成：

```
SELECT FORMAT(col_name, 2) FROM table; 
```

您还可以指定语言环境（例如意大利语）：

```
SELECT FORMAT(col_name, 2, 'it_IT') FROM table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:54:11.237

尝试使用以下方法选择数据：

```
SELECT FORMAT(col, num_of_decimals) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T17:43:59.217

不要这样做。您应该存储没有千位逗号格式的数字，并保存这种类型的数字格式以用于输出查询。这就像尝试使用字体格式存储数字一样。错误的尝试理由，错误的存放地点。

原因是您希望数据库以数据库旨在操作的方式存储数据，例如进行计算、比较等。否则，您基本上是将数字存储为字符串，这违背了将它们存储为数字的目的。

# python - 嵌套列表理解等价物

> ID：11598880
> 
> 赞同：0
> 
> 时间：2012-07-22T08:49:00.050
> 
> 标签：python

是否可以用列表理解表达式替换以下代码？

```
input = ['1\t2,3\t4,5', '61\t7,8\t9,0']

res = []
li = [i.split() for i in input]
for i in li:
    l = [i[0]]
    l = l + [e.split(',') for e in i[1:]]
    res.append(l) 
```

问题是每个子列表中的第一个元素应该与其余元素区别对待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T08:57:55.957

我不得不说，考虑到可读性，这并不是真正的 Pythonic。

```
>>> l = ['1\t2,3\t4,5', '61\t7,8\t9,0']
>>> [[i[0]]+[e.split(',') for e in i[1:]] for i in [x.split() for x in l]]
[['1', ['2', '3'], ['4', '5']], ['61', ['7', '8'], ['9', '0']]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:05:08.183

```
>>> input = ['1\t2,3\t4,5', '61\t7,8\t9,0']
>>> 
>>> [[a.split()[0]] + [b.split(',') for b in a.split()[1:]] for a in input]
[['1', ['2', '3'], ['4', '5']], ['61', ['7', '8'], ['9', '0']]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T10:17:10.833

```
>>> import csv
>>> data = ['1\t2,3\t4,5', '61\t7,8\t9,0']
>>> [x[:1] + list(csv.reader(x[1:], delimiter=','))
     for x in csv.reader(data, delimiter='\t')]
[['1', ['2', '3'], ['4', '5']], ['61', ['7', '8'], ['9', '0']]] 
```

# jquery - 如何检查我的所有 jQuery 文件是否已完全加载

> ID：11598888
> 
> 赞同：2
> 
> 时间：2012-07-22T08:50:19.863
> 
> 标签：jquery

如何检查我的所有 jQuery 文件是否完全加载。

我只想在加载了与该 div 相关的所有 jQuery 文件时才显示我的 div。

文档准备和窗口加载功能不起作用。

如何编写一个条件函数，您可以在其中检查是否所有 jQuery 都已加载然后显示 div .... 我在外部 js 文件中调用我所有的 jQuery 文件，（基本上我正在尝试为我的客户端创建一个插件所以我的 external.js 文件将在我的服务器上远程工作）。

```
 if (typeof jQuery === "undefined") {
       var script = document.createElement('script');
       script.src = 'js/jquery-1.7.1.min.js';
       script.type = 'text/javascript';
       document.getElementsByTagName('head')[0].appendChild(script);

       }

      if (typeof jQuery === "undefined") {
      var script = document.createElement('script');
      script.src = 'js/fancybox.js';
      script.type = 'text/javascript';
      document.getElementsByTagName('head')[0].appendChild(script);
     }

     document.ready = function() {
     $(document).ready(function(){

       $("#addimage").html("<a id='fancybox' href='large"+clientID+".jpg'><img border=0 src='thumb"+clientID+".jpg'/></a>");

     }
     }); 
```

所以我希望这个 addimage div 只工作我的 jquery 文件完全加载

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T08:55:25.603

要在所有脚本加载时显示 div，您只需在脚本加载后要显示的所有 div 之前编写 /include 脚本

并检查外部脚本是否已加载，这可能有助于[JavaScript 检测何时加载外部 JavaScript](https://stackoverflow.com/questions/8718303/javascript-to-detect-when-external-javascripts-are-loading)

你可以通过[萤火虫检查这个](http://getfirebug.com/)

在萤火虫中看到这个部分

1.首先点击我已经指向它的**网络**

2.然后点击第二个**js**

在萤火虫中，您还将知道脚本加载所需的时间

![在此处输入图像描述](../Images/3db82f7884317a422aa51801b99a6e6d.png)

# vim - 如何将前导空格转换为制表符？

> ID：11598890
> 
> 赞同：5
> 
> 时间：2012-07-22T08:50:25.087
> 
> 标签：vim

许多人使用空格而不是制表符。我两个都用。行首的制表符和第一个非空白字符的空格。开始新文档没问题，以防我必须修改一个更好地适应使用格式。有时我仍然需要解决空格问题。

根据[搜索和替换，](http://vim.wikia.com/wiki/Search_and_replace)我可以做到`:%s/spaces_for_tab/tab/g`。它很简单，适用于许多情况。无论如何，我只想重构行首的空格。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T09:13:01.513

这更像是一个*正则表达式*问题。要锚定在行的开头，请使用插入符号，例如

```
s/^        /\t/ 
```

或者使用 vim 的内置功能：

```
:set tabstop=4  "four spaces will make up for one tab
:set noexpandtab  "tell vim to keep tabs instead of inserting spaces
:retab            "let vim handle your case 
```

顺便说一句，我也更喜欢**缩进的制表符和****对齐**的空格。不幸的是，[vim 不能很好地处理这个](https://superuser.com/questions/195553/vim-tabs-and-spaces)（我不知道其他编辑器是做什么的），所以我主要使用`:set expandtab`（也许见`:set softtabstop`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T14:34:22.207

我为它写了一个简单的函数。无论如何，它只适用于 4 空格制表符。

```
fu! Fixspaces()
        while search('^\t* \{4}') != 0
                execute ':%s/^\t*\zs \{4}/\t/g'
        endwhile
endfu 
```

如果存在，您可以提出更好的解决方案，我会很乐意使用它。问题是这个函数也替换了字符串中的空格。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-06-14T01:34:29.833

如果有人感兴趣，我接受了马丁的回答并对其进行了一些改进：

```
function Fixspaces()
  let ts = &tabstop
  let pos = getpos('.')

  if &expandtab
    while search('^ *\t') != 0
      silent execute ':%s/^ *\zs\t/'.repeat(' ', ts).'/g'
    endwhile

    echo 'Changed tabs to spaces'
  else
    while search('^\t* \{'.ts.'}') != 0
      silent execute ':%s/^\t*\zs \{'.ts.'}/\t/g'
    endwhile

    echo 'Changed spaces to tabs'
  endif

  call setpos('.', pos)
endfunction 
```

此函数根据`expandtab`和`tabstop`设置的值执行适当的操作，并记住光标所在的位置。

# c# - WPF 选项卡项标题名称

> ID：11598892
> 
> 赞同：0
> 
> 时间：2012-07-22T08:51:01.287
> 
> 标签：c#, c#-4.0, tabs

我有一个选项卡控件，我动态插入选项卡。我想获取选项卡项的标题名称以检查重复项。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:54:47.087

```
var headers = tabControl.Items.Cast<TabItem>().Select(x => x.Header); 
```

# java - Java 正则表达式模式匹配器

> ID：11598894
> 
> 赞同：1
> 
> 时间：2012-07-22T08:51:11.797
> 
> 标签：java, regex, pattern-matching

我有以下格式的字符串：

```
String name = "A|DescA+B|DescB+C|DescC+...X|DescX+" 
```

所以重复模式是**?|?+**，我不知道会有多少。我要提取的部分是 |...之前的部分，因此对于我的示例，我想提取一个列表（例如 ArrayList），其中将包含：

```
[A, B, C, ... X] 
```

我尝试了以下模式：

```
(.+)\\|.*\\+ 
```

但这不按我想要的方式工作？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T09:08:26.263

要将其转换为列表，您可以这样做：

```
String name = "A|DescA+B|DescB+C|DescC+X|DescX+";
Matcher m = Pattern.compile("([^|]+)\\|.*?\\+").matcher(name);
List<String> matches = new ArrayList<String>();
while (m.find()) {
    matches.add(m.group(1));
} 
```

这为您提供了列表：

```
[A, B, C, X] 
```

注意`?`中间的，这可以防止正则表达式的第二部分消耗整个字符串，因为它使`*` *惰性*而不是*贪婪*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T08:56:30.630

您正在使用任何字符 ( `.`)，其中包括`|`so，解析器继续咀嚼所有内容，一旦完成任何字符，它就会查找`|`，但什么都没有了。

所以，尝试匹配任何字符*，但* `|`像这样：

```
"([^|]+)\\|.*\\+" 
```

如果合适，请确保您的全部--| 是在字符串的开头 using`^`并且在字符串的末尾有一个 + with `$`：

```
"^([^|]+)\\|.*\\+$" 
```

更新： Tim Pietzcker 提出了一个很好的观点：因为在找到 a 之前您已经在匹配`|`，所以您也可以匹配字符串的其余部分并完成它：

```
"^([^|]+).*\\+$" 
```

UPDATE2：顺便说一句，如果你想简单地得到字符串的第一部分，你可以简化事情：

```
myString.split("\\|")[0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T09:12:44.960

另一个想法：查找`+`（或字符串开头）和之间的所有字符`|`：

```
List<String> matchList = new ArrayList<String>();
Pattern regex = Pattern.compile("(?<=^|[+])[^|]+");
Matcher regexMatcher = regex.matcher(subjectString);
    while (regexMatcher.find()) {
        matchList.add(regexMatcher.group());
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T09:11:35.133

我认为最简单的解决方案是拆分`\\+`，然后为每个部分应用`(.+?)\\|.*`模式以提取您需要的组。

# oracle - 在同一用户中重新转储新转储时会发生什么 (Oracle)

> ID：11598895
> 
> 赞同：0
> 
> 时间：2012-07-22T08:51:42.360
> 
> 标签：oracle, dump

我有一个开发系统和一个生产系统。现在，如果我对我的开发模式进行更改，例如新表..更改表结构等。转储并重新导入生产模式..那么以前的生产模式将被干净地覆盖，或者结果会是什么？我不想在这个问题上冒险，这就是为什么向这里的专家询问。（我使用imp/exp）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:29:13.627

如果您将转储导入数据库，它要么会失败（因为表/视图/索引/约束已经存在），要么（取决于您的 imp 选项）它会覆盖现有表***和***现有数据 - 所以不要这样做。

## 无法使用 exp/imp 同步模式

您应该使用适当的脚本管理（即使用增量 SQL 脚本将模式从版本 x 迁移到 x+1），而不是依赖于正确应用于开发数据库的所有更改。

这些脚本**必须**存储在版本控制系统中，例如 svn 或 git。

您可能想要查看的一些模式版本控制系统是

*   [Liquibase](http://www.liquibase.org/)
*   [飞路](http://code.google.com/p/flyway/)

# java - JOptionPane 显示在父 JFrame 后面

> ID：11598913
> 
> 赞同：2
> 
> 时间：2012-07-22T08:54:55.947
> 
> 标签：java, windows, linux, swing, joptionpane

我在 Windows 操作系统上创建了一个 swing 应用程序。我的一个 JDialog（其窗口是 parentJFrame）显示了一个 JOptionPane。
`JOptionPane.showMessageDialog(parentJFrame, "I am a JOption");`.

在运行时，`parentJFrame setAlwaysOnTop(true)`. 即使它设置了 alwaysOnTop-TRUE，JOptionPane 也会出现在 Windows 操作系统的 parentJFrame 上。但是当我在 Linux 操作系统上运行它时，JOptionPane 显示在 parentJFrame 后面。（可能是因为 parentJFrame *alwyasOnTop 是真的*，但是 JRE 如何以不同的方式为不同的操作系统运行相同的应用程序？）我怎样才能在Linux 中 parentJFrame 的顶部。？这很紧急..
当“alwaysOnTop-true”组件显示 JOptionPane 时，JOptionPane 出现在 Linux 中的组件后面.. :( 。但这在 Windows 操作系统中处理得很好。JOptionPane 显示在设置的组件的顶部'alwaysOnTop-true' 。看来，在 Linux 操作系统的桌面屏幕上显示组件存在冲突。我不确定。但我猜它。

*   Linux 操作系统具有 Oracle JDK 和 JRE 7

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T10:03:21.677

您在 Linux 上看到的行为符合 API 规范。这就是[Window.setAlwaysOnTop()](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setAlwaysOnTop%28boolean%29)所说的：

> 如果有多个始终位于顶部的窗口，则它们的相对顺序未指定且取决于平台。

并且：

> 始终位于顶部的窗口拥有的所有窗口都继承此状态并自动变为始终位于顶部。

这可以解释为什么位于 JOptionPane 核心的 JDialog 也具有“始终处于领先地位”。似乎偶然在 Windows 上它可以按您的预期工作，但实际上您是在要求 Swing 做一些不可能的事情：显示父级“始终高于其他窗口”，同时在其顶部显示对话框。

这是一个可能的解决方法：将对话框放在父级旁边，这样当它在 z 轴上时，用户仍然可以看到它：

```
JDialog dialog = new JOptionPane("Message").createDialog(parent, "Title");
Point dialogLoc = dialog.getLocation();
Point parentLoc = parent.getLocation();
dialog.setLocation(parentLoc.x + parent.getWidth(), dialogLoc.y);
dialog.setVisible(true); 
```

请注意，没有单一的“Linux 操作系统”，特别是在窗口管理方面 - 有许多不同的桌面环境和窗口管理器在窗口排序和可见性方面表现得截然不同，通常是故意的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T13:22:42.937

这很简单：在要显示对话框的代码之后写下这行代码：

```
 JOptionPane optionPane = new JOptionPane("Reports are Generated");
        JDialog dialog = optionPane.createDialog("Success!");
        dialog.setAlwaysOnTop(this.isAlwaysOnTopSupported());
        dialog.setVisible(true); 
```

除了双引号中的字符串之外，不要更改任何内容。

# iphone - 在 iOS GridView 中加载相机胶卷图像非常慢

> ID：11598914
> 
> 赞同：1
> 
> 时间：2012-07-22T08:55:17.227
> 
> 标签：iphone, ios, uitableview, alassetslibrary, aqgridview

我正在我的 iPhone 应用程序中显示相机胶卷中的所有图像。我构建了一个数组，`ALAsset *`其中包含应用程序启动时相机胶卷中所有图像的列表。我通过在图像视图中加载这些图像来形成单元格：

```
// Get the full resolution image for asset
ALAssetRepresentation *assetRep = [asset defaultRepresentation]; 
UIImage *image = [UIImage imageWithCGImage:[assetRep fullResolutionImage]];
[cell.imageCropper setImage:image]; 
```

当请求一个新单元格时，我会这样做

```
- (AQGridViewCell *) gridView: (AQGridView *) aGridView cellForItemAtIndex: (NSUInteger) index 
```

问题是当有很多图像并且用户快速滚动图像时它会滞后。处理这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:06:32.490

考虑使用 GCD 在后台加载图像。也许这有帮助：[使用块从后台线程加载图像](https://stackoverflow.com/questions/7502073/loading-images-from-a-background-thread-using-blocks/7502281#7502281)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T04:38:11.490

使用缩略图而不是 fullResolutionImages

# android - android ，在后台启动系统活动并与假点击事件进行交互，这可能吗？

> ID：11598918
> 
> 赞同：0
> 
> 时间：2012-07-22T08:56:04.327
> 
> 标签：android, vpn

我想在 android 上做一个自动连接 VPN 客户端。或者称它为 VPN fastswtich。这个软件是做什么的，是一个安卓桌面小部件，当点击它时，打开/关闭一个 vpn 连接。

经过一些谷歌，我发现它需要root设备才能使用android的VPNServer，

[现有 VPN 应用程序如何在 Android 2.0 - 2.3 中创建新配置文件？](https://stackoverflow.com/questions/11163644/how-are-existing-vpn-applications-creating-new-profiles-in-android-2-0-2-3)

发现开发一个新客户端做自动连接人员会很困难，我改变主意使用系统vpn设置“android.net.vpn.SETTINGS”，现在另一个问题来了，我该如何启动vpn设置活动（“android .net.vpn.SETTINGS") 在后台（或者只是让这个活动不可见）并向它发送一个假的 onclick 事件以启动一个 vpn 连接。
所以这个应用程序看起来就像单击桌面然后开始一个 vpn 连接。

# java - bufferedImage 的 RGB 精度问题

> ID：11598919
> 
> 赞同：0
> 
> 时间：2012-07-22T08:56:08.830
> 
> 标签：java, image, jpeg, bufferedimage, javax.imageio

我们发现在 Java(ImageIO.read(file)) 中使用 bufferedImage 从 jpeg 文件中获取 RGB 时总是存在一些 RGB 精度问题。

有谁知道一些替代解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:59:14.437

精度问题是什么意思？您保存的 JPEG 和使用 Java 加载的 JPEG 看起来不同吗？颜色有什么不同？

我将在这里尝试一下，假设您使用的是带有颜色配置文件的 JPEG，这意味着您正在正确读取 RGB 值，但是您的原始应用程序*也*采用颜色配置文件并使用它来映射 RGB 值从 JPEG 中提取到 RGB 值中，然后显示在显示器上。用一个好的图像查看器看看，看看你的图像中嵌入的配置文件是什么（寻找像 sRGB 或 Adob​​eRGB 这样的东西），看看你的问题是否与不同的颜色配置文件一致

# url - Skype 是否有 href 属性，例如“mailto:”或“tel:”？

> ID：11598925
> 
> 赞同：73
> 
> 时间：2012-07-22T08:57:12.997
> 
> 标签：url, skype, url-scheme

我正在寻找为移动网站创建 Skype 链接，有没有办法`<a href="`让它启动 Skype 并添加或呼叫用户？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-22T09:03:23.210

如果您的移动网站（通常）由 iOS 设备使用，您可以使用：

```
<a href="skype:YourSkypeName?call">Call me on Skype</a> 
```

Apple iOS 设备自动识别与 Skype 和 FaceTime 链接的意图。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-07-22T09:00:03.277

根据此维基百科页面，您可以使用`skype:<username|phonenumber>[?[add|call|chat|sendfile|userinfo]]`or ：`callto:<screenname|phonenumber>`

[http://en.wikipedia.org/wiki/URI_scheme#callto](http://en.wikipedia.org/wiki/URI_scheme#callto)：

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-12-10T12:47:09.410

要将您的 Skype id 转换为链接，以便人们可以将您添加到他们的联系人列表中，请使用以下命令：

```
<a href="skype:SKYPENAME?add">SKYPENAME</a> 
```

当然，用您自己的替换 SKYPENAME。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-10T13:21:53.917

```
<a href="skype:echo123?call">Call the Skype Echo / Sound Test Service</a> 
```

根据 Skype[文档](https://msdn.microsoft.com/en-us/library/office/dn745878.aspx#sectionSection1)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-26T18:37:05.700

您可以使用`<a href="skype:-skype-name-?chat">Start chat</a>`

允许的查询参数：

`chat`- 开始聊天

`call`- 开始通话

`add`- 将人添加到联系人

`userinfo`- 查看用户的个人资料

`voicemail`- 留言

`sendfile`- 发送文件

# python - uwsgi 以异步模式重新发送标头

> ID：11598935
> 
> 赞同：0
> 
> 时间：2012-07-22T08:59:43.803
> 
> 标签：python, asynchronous, uwsgi

似乎 uwsgi 在异步模式下记住了先前请求的标头！

我用 uwsgi 部署了一个非常简单的应用程序：

```
`def application(environ, start_response):
    start_response('200 OK', [('Content-Type', 'text/plain')])
    environ_repr = '\n'.join(sorted(key.ljust(30) + ' = ' + repr(value) for key, value in environ.items()))
    return [environ_repr]`
```

`并运行它： ````
uwsgi --module index -s 0.0.0.0:8000 -p 1 --async 5
```` 重新生成问题的步骤：

*   访问 127.0.0.1:8000 ，标题为“Key:Value”，里面有`HTTP_KEY`入口`environment`，OK。
*   现在，访问没有该标题的 127.0.0.1:8000 ，但`HTTP_KEY`条目仍然存在`environment`，哎呀！

注意：同样的事情发生在其他标题上，比如`Cookie`!

（使用 uwsgi 1.0、1.2.4 和 1.3-dev 以及 python 2.7 测试）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:58:33.067

uwsgi 中存在一个错误并已修复：

[https://github.com/unbit/uwsgi/commit/e393f36f0adbdb49e4a84098865bb6e3c01785e4](https://github.com/unbit/uwsgi/commit/e393f36f0adbdb49e4a84098865bb6e3c01785e4)`

# html - 如何对齐导航栏中文本的位置？

> ID：11598936
> 
> 赞同：0
> 
> 时间：2012-07-22T08:59:44.193
> 
> 标签：html, css

[现在正在显示什么。](http://i418.photobucket.com/albums/pp270/ravenoz_bucket/Capt12.png)

我希望导航栏中的文本更接近白条的中心，并且菜单图标与单词 "Menu" 对齐。

任何指导表示赞赏。

HTML 代码：

```
<!doctype html>

<html>
    <head>
        <meta charset="UTF-8"/>
        <title> Foodstant Delivery </title>
        <link rel="stylesheet" type="text/css" media="screen" href="stylo.css" />
        <link rel="shortcut icon" href="images/favicon.ico" />
    </head>

<body>
    <div id="container">
        <figure id="logo"> 
            <img src="images/logo22.png" alt="Foodstant Delivery logo" width="" height="" />
        </figure>   

        <figure id="abtex">
            <img src="images/abtex222.png" />
        </figure>   

<div id="navbar">
    <ul>
        <li class="OP"><img src="images/order.png" /><a  href="Orders.html">Orders</a></li>
        <li class="MP"><img src="images/menupic3.png" /><a  href="Menu.html">Menu</a></li>
        <li class="CUP"><img src="images/contact.png" /><a href="ContactUs.html">Contact</a></li>
        <li class="TCP"><img src="images/Pen.png" /><a href="Jobs.html" target="_blank">About</a></li>
        <li class="JP"><img src="images/pin.png" /><a  href="TC.html">Jobs</a></li>
    </ul>   
</div>

</div>

</body> 

</html> 
```

CSS 代码：（相关）

```
#navbar {
    background: rgb(246,248,249); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(246,248,249,1) 0%, rgba(229,235,238,1) 46%, rgba(215,222,227,1) 65%, rgba(245,247,249,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(246,248,249,1)), color-stop(46%,rgba(229,235,238,1)), color-stop(65%,rgba(215,222,227,1)), color-stop(100%,rgba(245,247,249,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 46%,rgba(215,222,227,1) 65%,rgba(245,247,249,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 46%,rgba(215,222,227,1) 65%,rgba(245,247,249,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 46%,rgba(215,222,227,1) 65%,rgba(245,247,249,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 46%,rgba(215,222,227,1) 65%,rgba(245,247,249,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f6f8f9', endColorstr='#f5f7f9',GradientType=0 ); /* IE6-9 */

    border-top-left-radius: 10px;
    border-bottom-left-radius:10px;
    border-top-right-radius: 10px; 
    border-bottom-right-radius:10px;

    position: absolute;
    top: 200px;
    left: 150px;
    width: 1000px;

    background-position:center;

    font-size: 26px;
    font-family: 'Conv_LITHOSPRO-REGULAR';

    box-shadow: 3px 5px 10px  #888888;      
}
#navbar ul {
    list-style-position:inside;
    padding-top: 10px;
}

#navbar ul li {     
        display: inline;
        padding:0 60px 0px 0px; 
        margin-bottom: 10px;
        list-style-type:disc;
    }

#navbar ul li.OP {
        padding-left: 40px;
}   

a:link {
  color: #EF174A;
  }

a:visited {
  color: #BF4100;
  }

a:hover {
  color: black;
  background-color:#D2D2D2;
  border-radius: 10px;
  }

a:active {
  color: #918FBC;
  } 

a {
    text-decoration:none;
}  

#navbar ul li.OP a {
    padding-left: 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:02:59.777

```
<img src="" align="absmiddle"> 
```

这将使文本与图像的中间对齐。

或者你可以用 css 来做：

```
.your_class {
    vertical-align:middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:35:40.790

使文本行高等于条的高度。

```
a.yourtext { line-height: 44px } 
```

但要注意填充物。

# android - Android：如何在事件中触发应用程序？

> ID：11598937
> 
> 赞同：2
> 
> 时间：2012-07-22T08:59:52.483
> 
> 标签：android

假设我想在手机中发生事件后立即启动应用程序以在后台运行。

例如：-

1.  当我打开我的画廊时，我可能想要自动启动我的应用程序，该应用程序监控我的文件浏览并为最近的文档、最常听的歌曲等准备数据库，并在我退出画廊文件夹时自动关闭。

2.  每当我打开我的互联网浏览器时，我可能想在后台启动我的应用程序，它会监控我访问特定网站的次数，并在我关闭浏览器时自动关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:16:10.373

我认为这是不可能的，而且我不是在谈论远程启动应用程序，而是捕获其他应用程序（例如图库或浏览器）的事件。

如果这只是简单的例子，你应该展示一个真实的例子，因为我认为收集这种类型的数据会比在事件上触发应用程序更痛苦的问题，因为很多安全原因。

# php - PHP - 检查三维数组中所有值的任何更短的方法？

> ID：11598944
> 
> 赞同：0
> 
> 时间：2012-07-22T09:00:41.980
> 
> 标签：php, arrays, multidimensional-array, game-development

基本上我有这个代码场景：

```
if($_SESSION['player_1_pawn'][0]['currentHealth'] <=0 && 
   $_SESSION['player_1_pawn'][1]['currentHealth'] <=0 && 
   $_SESSION['player_1_pawn'][2]['currentHealth'] <=0 && 
   $_SESSION['player_1_pawn'][3]['currentHealth'] <=0 && 
   $_SESSION['player_1_pawn'][4]['currentHealth'] <=0) {
    //some code here
} 
```

`['player_1_pawn'][index]['currentHealth']`如果 all小于`0`，是否有任何方法可以检查或遍历所有索引，
而不是像我发布的那样一一编写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T09:09:07.490

只需编写一个循环遍历您需要检查的所有数组元素的 foreach 构造：

```
$flag = true; // after the foreach, flag will be true if all pawns have <= 0 health
foreach ($_SESSION['player_1_pawn'] as $value)
{
  // for each pawn, check the current health
  if ($value['currentHealth'] > 0)
  {
    $flag = false; // one pawn has a positive current health
    break; // no need to check the rest, according to your code sample!
  }
}

if ($flag === true) // all pawns have 0 or negative health - run code!
{
  // some code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:28:58.940

另一种解决方案是使用[array_reduce()](http://php.net/manual/en/function.array-reduce.php "array_reduce()")来检查条件：

```
if (array_reduce($_SESSION['player_1_pawn'], function (&$flag, $player) {
    $flag &= ($player['currentHealth'] <=0);
    return $flag;
}, true)); 
```

PS 当数组 $_SESSION['player_1_pawn'] 为空时要小心。

# r - R 是否可以使用 dcast 获取 table() 的输出？

> ID：11598952
> 
> 赞同：1
> 
> 时间：2012-07-22T09:01:21.723
> 
> 标签：r

我有以下数据框：

```
id<-c(1,2,3,4,1,1,2,3,4,4,2,2)
period<-c("first","calib","valid","valid","calib","first","valid","valid","calib","first","calib","valid")
df<-data.frame(id,period) 
```

打字

```
table(df) 
```

结果是

```
period
id  calib first valid
1     1     2     0
2     2     0     2
3     0     0     2
4     1     1     1 
```

有没有办法使用“dcast”获得相同的结果并将其保存为新的数据框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:22:07.870

是的，有一种方法：

```
library(reshape2)
dcast(df, id ~ period, length)
Using period as value column: use value.var to override.
  id calib first valid
1  1     1     2     0
2  2     2     0     2
3  3     0     0     2
4  4     1     1     1 
```

您也可以只输入`dcast(df, id ~ period)`，`length`默认情况下也会被选中。如我所见，您试图在另一个[问题](https://stackoverflow.com/questions/11591445/r-saving-the-output-of-table-into-a-data-frame)中找到这一点。没有的扩展解决方案`dcast`如下所示：

```
df <- data.frame(unclass(table(df)))
df$ID <- rownames(df)
df
  calib first valid ID
1     1     2     0  1
2     2     0     2  2
3     0     0     2  3
4     1     1     1  4 
```

# css - 根据浏览器调整大小调整谷歌地图大小

> ID：11598955
> 
> 赞同：2
> 
> 时间：2012-07-22T09:01:38.353
> 
> 标签：css, google-maps-api-3

我正在研究谷歌地图 api v3。地图完美地显示在我的页面上......问题是当我调整浏览器大小时，当我加载页面时地图适合其原始大小......

我加载页面时的初始状态![在此处输入图像描述](../Images/17653dbef3f118f714fd160658f1e014.png)

当我调整浏览器的大小时，地图的大小仍为初始状态大小。

![在此处输入图像描述](../Images/d3b02a33bcd3f87469677ebcabd416a9.png)

[代码]

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<head>
<script src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script type='text/javascript'>
var point;
var mrktx;

function mshow()
{
        $("#search_content").css("display","");
}
function mhide()
{
        $("#search_content").css("display","none");
}

function load() {

   if(navigator.geolocation)
   {
        navigator.geolocation.getCurrentPosition(ShowPosition)
   }
   else
   {
      alert("Browser does not support");
      setTimeout( function(){ window.location = "../" },500);
   }
   function ShowPosition(position)
   {
        var lat = position.coords.latitude;
        var lng = position.coords.longitude;

   var cwidth = document.getElementsByTagName("body")[0].clientWidth;
   var cheight = document.getElementsByTagName("body")[0].clientHeight;
   //alert(cwidth + ',' + cheight);
    $("#body").css("overflow","hidden");
   $("#map_canvas").css("position","absolute");
   $("#map_canvas").css("overflow","auto"); 
   $("#map_canvas").css("height",cheight);
   $("#map_canvas").css("width",cwidth);
   $("#map_canvas").css("z-index","99")
   $("#map_canvas").css("top","0");
   $("#map_canvas").css("left","0em");
   $("#top_nav").css("width",cwidth);
   $("#top_nav").css("height","8%");

   var latlng = new google.maps.LatLng(lat,lng);
   var myOptions = {
      zoom: 11,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
   };

   var map = new google.maps.Map(document.getElementById("map_canvas"), 
              myOptions);

   $('document').resize(function(){
        google.maps.event.trigger(map, 'resize');
        map.setZoom( map.getZoom() );
   });

   var myMrkrTxt = "";
   var infowindow = new google.maps.InfoWindow({ content : myMrkrTxt });      
   var myMrkr = new google.maps.Marker({position:latlng,map:map});
        google.maps.event.addListener(myMrkr,'mouseover', function(){ infowindow.open(map,myMrkrTxt); });
        google.maps.event.trigger(map, "resize");

   }

}
</script>
<style>
#top_nav
{
    position: absolute; z-index: 200; top: 0px; background-color: black;
}
#top_nav h2
{
    color: white;
}
body, html {
  height: 100%;
  width: 100%;
}

</style>
</head>
<body onload='load()'>

<div id="map_canvas"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T09:07:47.570

我想你也必须调整你的 map_canvas 的大小。

所以只需将其添加到您的 resize()

```
//its maybe better to attach this handler to the window instead of the document
$(window).resize(function(){
        $('#map_canvas').css("height",$(window).height());
        $('#map_canvas').css("width",$(window).width());
        google.maps.event.trigger(map, 'resize');
        map.setZoom( map.getZoom() );
   }); 
```

这样您就可以跟踪浏览器窗口的大小调整 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-09T13:16:48.090

同样的事情也可以只使用 CSS 来完成。我将在下面举一个例子，如果你喜欢，可以使用它。

```
.google-maps {
  position: relative;
  padding-bottom: 75%;
  height: 0;
  overflow: hidden;
}
.google-maps iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100% !important;
  height: 100% !important;
}
```

```
<div class="google-maps">
  <iframe src="https://www.google.com/maps/yourmapsblah" width="765" height="500" frameborder="3" style="border:0" allowfullscreen></iframe>
</div>
```

# c# - 使用 Linq-to-SQL 创建数据库以更改路径

> ID：11598964
> 
> 赞同：0
> 
> 时间：2012-07-22T09:03:42.280
> 
> 标签：c#, database, linq-to-sql

我设法通过以下代码使用 Linq-to-SQL 创建了一个数据库：

```
private static DataClasses1DataContext _dataDC = new DataClasses1DataContext(@"C:\\database1.mdf");

public AddClient()
{
    InitializeComponent();
    DataContext = this;
       _dataDC.CreateDatabase();
} 
```

这在 C: 上创建了一个新的本地数据库。

如何更改`@"C:\\database1.mdf"`文件以便在我运行程序的当前目录中创建文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:10:20.160

您可以使用其中一种适合您的应用程序并将其传递给`new DataClasses1DataContext(HERE);`

```
System.IO.Directory.GetCurrentDirectory();

Environment.CurrentDirectory;

Request.PhysicalPath 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:10:57.847

在这里查看如何获取当前目录路径。将其包含在括号内：

[如何在 .NET 控制台应用程序中获取应用程序的路径？](https://stackoverflow.com/questions/837488/how-can-i-get-the-applications-path-in-net-in-a-console-app)

# java - 在 Java 中获取 Iterable 的大小

> ID：11598977
> 
> 赞同：100
> 
> 时间：2012-07-22T09:06:25.340
> 
> 标签：java, iterable

我需要弄清楚`Iterable`Java中元素的数量。我知道我可以这样做：

```
Iterable values = ...
it = values.iterator();
while (it.hasNext()) {
  it.next();
  sum++;
} 
```

我也可以这样做，因为我不再需要 Iterable 中的对象：

```
it = values.iterator();
while (it.hasNext()) {
  it.remove();
  sum++;
} 
```

小规模基准测试没有显示出太大的性能差异，对此问题有任何评论或其他想法吗？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-07-22T09:12:29.017

**TL;DR：使用[`Iterables.size(Iterable)`](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Iterables.html#size(java.lang.Iterable))伟大的[Guava](https://github.com/google/guava)库的实用方法。**

在您的两个代码片段中，您应该使用第一个，因为第二个将从中删除所有元素`values`，因此之后它是空的。像大小这样的简单查询更改数据结构是非常出乎意料的。

对于性能，这取决于您的数据结构。例如，如果它实际上是一个`ArrayList`，从头开始删除元素（你的第二种方法正在做的）非常慢（计算大小变成 O(n*n) 而不是 O(n) 应该是）。

一般来说，如果有可能`values`实际上是 a`Collection`而不仅仅是 a `Iterable`，请检查并调用`size()`以防万一：

```
if (values instanceof Collection<?>) {
  return ((Collection<?>)values).size();
}
// use Iterator here... 
```

调用 to`size()`通常比计算元素的数量要快得多，而这个技巧正是[Guava](https://github.com/google/guava)[`Iterables.size(Iterable)`](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Iterables.html#size(java.lang.Iterable))为您所做的。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2016-02-26T08:48:13.590

如果您使用的是 java 8，则可以使用：

```
Iterable values = ...
long size = values.spliterator().getExactSizeIfKnown(); 
```

只有当可迭代源具有确定的大小时，它才会起作用。大多数集合拆分器都会，但如果它来自一个`HashSet`或`ResultSet`例如，你可能会遇到问题。

您可以在[此处查看 javadoc。](https://docs.oracle.com/javase/8/docs/api/java/util/Spliterator.html#estimateSize--)

**如果 Java 8 不是一个选项**，或者如果您不知道可迭代的来源，您可以使用与番石榴相同的方法：

```
 if (iterable instanceof Collection) {
        return ((Collection<?>) iterable).size();
    } else {
        int count = 0;
        Iterator iterator = iterable.iterator();
        while(iterator.hasNext()) {
            iterator.next();
            count++;
        }
        return count;
    } 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-11-01T12:39:31.777

这可能有点晚了，但可能会对某人有所帮助。`Iterable`我在我的代码库中遇到了类似的问题，解决方案是在`for each`不明确调用的情况下使用`values.iterator();`.

```
int size = 0;
for(T value : values) {
   size++;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-01-13T13:31:25.547

您可以将您的可迭代对象转换为列表，然后在其上使用 .size() 。

```
Lists.newArrayList(iterable).size(); 
```

为了清楚起见，上述方法将需要以下导入：

```
import com.google.common.collect.Lists; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-22T09:33:15.677

严格来说，Iterable 没有大小。把数据结构想象成一个循环。

并考虑以下 Iterable 实例，没有大小：

```
 new Iterable(){

        @Override public Iterator iterator() {
            return new Iterator(){

                @Override
                public boolean hasNext() {
                    return isExternalSystemAvailble();
                }

                @Override
                public Object next() {
                    return fetchDataFromExternalSystem();
                }};
        }}; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-09-03T12:08:20.803

java 8及以上

```
StreamSupport.stream(data.spliterator(), false).count(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-22T09:12:16.590

我会选择保证`it.next()`实现的简单原因`next()`，而`remove()`这是一个可选操作。

> ```
> E next() 
> ```
> 
> 返回迭代中的下一个元素。
> 
> ```
> void remove() 
> ```
> 
> 从基础集合中移除迭代器返回的最后一个元素**（可选操作）**。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-22T09:15:02.790

至于我，这些只是不同的方法。第一个使您正在迭代的对象保持不变，而第二个则使其为空。问题是你想做什么。删除的复杂性取决于可迭代对象的实现。如果您正在使用 Collections - 只需获得 Kazekage Gaara 建议的大小 - 它通常是最好的方法性能明智。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-07-22T09:10:00.863

你为什么不简单地使用你的`size()`方法`Collection`来获取元素的数量？

`Iterator`只是为了迭代，没有别的。

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2018-03-13T07:01:20.893

我们可以简单地对 ArrayList 中的可迭代对象进行类型转换并获取其大小，而不是使用循环和计算每个元素或使用第三方库。

```
((ArrayList) iterable).size(); 
```

# java - Java 中解析文本文件的良好实践

> ID：11598979
> 
> 赞同：-2
> 
> 时间：2012-07-22T09:06:34.683
> 
> 标签：java, parsing, exception, logging, error-handling

我想解析一个代表日志的文本文件。我希望它足够强大，可以处理所有可能发生的错误。虽然我对最佳实践和我应该解释的错误一无所知。我将使用 JAVA 来实现这一点。

示例日志：2012-07-16 10:23:40,558 - 127.0.0.1 - 参数数组 [param1=1,param2=1,param3=0,] - 383

我已经写了一个 prasing 代码，其工作原理如下：

```
public Parser(String log) {
    this.log = log;
    this.parse();

}

public void parse() {

    String[] temp = new String[10];
    String[] temp2 = new String[10];

    temp = log.split(" - ");
    key = temp[3];
    id = Integer.parseInt(key);
    String IP = temp[1];
    String str;

    String temp3 = temp[2].substring(temp[2].indexOf("g"), temp[2].indexOf("]"));
    temp = temp3.split(",");
    str = "param1";

    boolean ordered = CheckOrder(temp);

    if (ordered) {
        for (int q = 0; q < temp.length; q++) {

            temp[q] = temp[q].substring(temp[q].indexOf("=") + 1);

        }

        if (temp[0].equals("q")) {
            param= 0;
        } else if (temp[0].equals("k")) {
            param= 1;
        } else {
            param= 2;
        }

         // Same way for all parameters

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:03:56.730

检查您使用的所有方法的 javadoc，并确保处理所有名义和异常情况：

*   该文件不存在：正在引发异常。正确处理此异常
*   `String.indexOf()`没有找到它要找的东西。它返回-1。正确处理此案
*   `String.split()`不返回我期望的长度的数组。正确处理此案
*   ...

将你的大方法分成几个子方法，每个子方法只做一件事。

编写单元测试以检查您的方法是否使用所有可能的输入来完成它们应该做的事情。

请注意，“正确处理事情”很可能意味着：因为输入不正确而抛出异常，如果合同是日志遵循明确定义的格式。在这种情况下，生成日志的代码不正确。但是最好有一个异常来告诉您期望哪种格式以及您得到哪种格式，而不是模糊的 NullPointerException 或 ArrayIndexOutOfBoundsException。

以上适用于您编写的任何类型的代码，而不仅仅是文件解析。

边注：

```
String[] temp = new String[10];
temp = log.split(" - "); 
```

创建一个由 10 个元素组成的数组以在之后立即丢弃它并用另一个数组（由 返回的那个`log.split(" - ")`）替换它有什么意义。

# javascript - .准备加载 html

> ID：11598980
> 
> 赞同：0
> 
> 时间：2012-07-22T09:06:48.583
> 
> 标签：javascript, jquery

我有以下代码。我想在其他**所有**内容加载后加载内容。但似乎我只能加载**html**而不能加载**javascript**：

```
 $(document).ready(function () {
  $("#twitter_left").html("<p><img align='left' alt='Twitter Bird' src='/sites/all/themes/helixTheme/images/twitter-bird.png' /><strong>&nbsp;&nbsp;Follow Us On Twitter</strong></p><p>&nbsp;</p><p><script charset='utf-8' src='http://widgets.twimg.com/j/2/widget.js'></script><script>new TWTR.Widget({version: 2,type: 'profile',rpp: 7,interval: 30000,width: 'auto',height: 800,theme: {shell: {background: '#dbe5ff',color: '#333333'},tweets: {background: '#ffffff',color: '#999999',links: '#f26422'}},features: {scrollbar: false,loop: true,live: false,behavior: 'default'}}).render().setUser('helixwebsites').start();</script></p>");}); 
```

所以我的下一个计划是将内容放在一个 html 文件中并使用`.load`处理程序，但我仍然希望它在所有页面都加载后加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:31:02.987

可能，您应该使用[JQuery getScript](http://api.jquery.com/jQuery.getScript/)函数以动态方式加载 JavaScript 然后运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:26:38.243

```
$(document).ready(function () {
  $("body").append("<h1>insert html dynamically</h1>");

  var script = document.createElement('script');
  script.type = 'text/javascript';
  var code = "alert('insert script dynamically');";
  $(script).append(code);
  $("body").append(script);

  var script2 = document.createElement('script');
  script2.type = 'text/javascript';
  script2.src = 'path/your/javascript.js';
  $("body").append(script2);

}); 
```

在您的代码中：

```
$("#twitter_left").html("<p><img align='left' alt='Twitter Bird' src='/sites/all/themes/helixTheme/images/twitter-bird.png' /><strong>&nbsp;&nbsp;Follow Us On Twitter</strong></p><p>&nbsp;</p>");
$("#twitter_left").append(script2); 
```

在新窗口中加载 javascript：

```
$(document).ready(function () {
  var newPage = window.open('', '_blank');
  newPage.document.write("<h1>insert html dynamically</h1>");
  newPage.document.write("<script>alert(1)</" + "script>");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T09:12:30.810

你可以加载所有你想要的javascript。在这之间：

```
$(document).ready(function(){

}); 
```

你可以编写任何你想要的javascript。它可以是 jQuery 或非 jQuery javascript 代码。例子：

```
$(document).ready(function(){
    alert("Document is now ready");
}); 
```

# javascript - 读取未知参数 json javascript

> ID：11598981
> 
> 赞同：0
> 
> 时间：2012-07-22T09:07:11.280
> 
> 标签：javascript, json

我正在尝试从 javascript 中读取 json。我已经能够读取该文件，但由于其结构，我在从该文件中检索信息时遇到了一些问题。我不知道某些级别的名称...

这是一个例子：

```
{
    "zona": [{
        "zona1": [{
            "lon": "-3.841867446899414",
            "lat": "43.466002139041116"
        }, {
            "lon": "-3.838176727294922",
            "lat": "43.466002139041116"
        }, {
            "lon": "-3.838348388671875",
            "lat": "43.46432016607394"
        }, {
            "lon": "-3.843669891357422",
            "lat": "43.46276274196949"
        }]
    }, {
        "zona2": [{
            "lon": "-3.832254409790039",
            "lat": "43.462513550389424"
        }, {
            "lon": "-3.8265037536621094",
            "lat": "43.46375949801845"
        }, {
            "lon": "-3.8254737854003906",
            "lat": "43.461641371770504"
        }, {
            "lon": "-3.829936981201172",
            "lat": "43.46002157809642"
        }, {
            "lon": "-3.832683563232422",
            "lat": "43.461142978339005"
        }]
    }]
} 
```

我试图做这样的事情，但我觉得我有点天真，哈哈

```
function fun() {
    var zona;
    $.getJSON('listaPuntosZona.json', function(data) {
        for (i = 0; i < data.zona.length; i++) {
            zonaX = 'zona' + (i + 1);
            alert(data.zona[i].zonaX.length);
        }
    }); 
```

我已经阅读了 foreach 循环，但我不理解它们，所以我无法为它们编写代码。有没有办法按照我的想法去做？第三个参数，ZonaX 从 zona1 到 zonaN 但 1,2,3....N，总是 +1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:09:12.790

要探索未知的 JSON/对象结构，您可以将函数 walk(data) 称为 ... function(data) {walk(data); ...

```
 function walk(data) {
            if(typeof(data) == "object") {
                for(key in data) {
                   console.log(key+": "+data[key]);
                   walk(data[key]);
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:16:08.580

尝试

```
for (key in data.zone)
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T09:22:53.657

您似乎使用 jQuery，所以我们以 jQuery 方式遍历数组：

```
$.each(data, function(index) {
    console.log(index);
    $.each(this, function(index) {
        console.log(index);
        $.each(this, function(index) {
            console.log(this);
        });
    });
}); 
```

查看您的 JavaScript 控制台，您将了解它的工作原理并阅读 jQuery 文档：[http ://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

# jquery - jquery：在选择子项时将类添加到父项

> ID：11598984
> 
> 赞同：0
> 
> 时间：2012-07-22T09:07:42.453
> 
> 标签：jquery, parent-child, addclass

[http://jsfiddle.net/DfcdQ/](http://jsfiddle.net/DfcdQ/)

```
<ol id="nav">
<li><a href="a.php" class="selected">A</a>
  <ol class="child">
  <li><a href="a-1.php">A-1</a></li>
  </ol>
</li>
<li><a href="b.php">B</a>
  <ol class="child">
  <li><a href="b-1.php">B-1</a></li>
  <li><a href="b-2.php">B-2</a></li>
  </ol>
</li>
<li><a href="c.php">C</a>
  <ol class="child">
  <li><a href="c-1.php">c-1</a></li>
  <li><a href="c-2.php">c-2</a></li>
  <li><a href="c-3.php">c-3</a></li>
  <li><a href="c-4.php">c-4</a></li>
  </ol>
</li>
</ol> 
```

当子菜单被选中时，它的父菜单也被选中。下面的代码适用于子 css，但不适用于父 css。

```
var loc = 'c-3.php';

$("#nav a").each(function() {
  $(this).removeClass("selected");
  if (loc.indexOf($(this).attr("href")) != -1) {
      $(this).addClass("selected");
      $(this).parent().addClass("selected"); /* <=== doesn't work :( */
  }
}); 
```

这个也不行。。。

```
$(this).closest('ol').parent().addClass("selected"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:23:43.333

你对父母感到困惑，这有效：http: [//jsfiddle.net/DfcdQ/7/](http://jsfiddle.net/DfcdQ/7/)

```
var loc = 'c-3.php';

$("#nav a").each(function() {
   $(this).removeClass("selected");
   if (loc.indexOf($(this).attr("href")) != -1) {
       $(this).addClass("selected");
       $(this).parent().parent().siblings(':first').addClass("selected");
   }
});​ 
```

`$(this).parent()`指的是`<li><a href="c-3.php">c-3</a></li>`，不是指的`<a href="c.php">C</a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:23:48.807

我同意 bingjie2680 但取决于您是否希望 c.php 锚具有选定的类（bingjie2680 解决方案）或围绕所有项目的 li（如下）。

$(this).parent().parent().parent().addClass("selected");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T09:46:43.750

我已经根据最接近的情况进行了修改。

```
$(this).closest('ol').parent('li').find('a').addClass("selected"); 
```

这是工作 fiddel 链接[http://jsfiddle.net/DfcdQ/12/](http://jsfiddle.net/DfcdQ/12/)

# android - Android ICS 中的默认复选框样式与以前的版本不同

> ID：11598986
> 
> 赞同：0
> 
> 时间：2012-07-22T09:07:50.367
> 
> 标签：android, android-4.0-ice-cream-sandwich

我在 ICS 中检查我的应用程序，我注意到我的复选框在以前的版本中是灰色的，现在是黑色的。这是有问题的，因为背景也是黑色的。

如何将以前版本（例如 Honeycomb）的样式应用到我的复选框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:26:34.173

> 如何将以前版本（例如 Honeycomb）的样式应用到我的复选框？

这是不可能的。您将需要该背景作为本地项目中的资源。您无法从系统访问旧版本的 android 资源。

# objective-c - SyncFolderItems - syncState 大小变得巨大！我能做些什么？

> ID：11598987
> 
> 赞同：0
> 
> 时间：2012-07-22T09:08:00.723
> 
> 标签：objective-c, exchange-server, exchangewebservices, exchange-server-2007

我正在编写一个移动邮件应用程序，并且正在使用 SyncFolderItems 请求来同步我的文件夹。问题是，在处理包含大量项目（例如 12000）的文件夹时，syncState 会变得很大，显然这对移动设备不利。有解决方法吗？我应该放弃同步操作并改用拉订阅（也许使用 findItem 操作来获取初始 ID？）谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:25:58.963

其他人怎么说，这是一个设计问题。如果您有很多电子邮件，您真正需要多少？我的意思是，我的手机上需要 12000 件物品吗，我不这么认为。不错的选择是，将所有项目 ID 与主题或其他内容一起保存。单击该项目时，获取其他属性。并且不要保存信息，可以从Exchange Server调用...

# google-chrome - 用于监控信息亭并在需要时重新加载的 Chrome 扩展程序

> ID：11598988
> 
> 赞同：5
> 
> 时间：2012-07-22T09:08:02.830
> 
> 标签：google-chrome, google-chrome-extension, kiosk

我有一个处理人物肖像的信息亭。它在铬中运行。

使用信息亭的 200 人中有 1 人最终在此过程中被冻结。当它冻结时，我永远不会听到“啊啪”的声音，而且页面有点挂起。

我想知道是否可以进行扩展来监视页面并检查心跳 - 如果 30 秒后没有看到它，请重新加载窗口。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T10:48:54.937

1.  让信息亭页面中的内容脚本每 X 秒向后台页面发送一条消息

    在内容脚本中：

    ```
    var port = chrome.extension.connect({ name: "keep-alive" });

    port.postMessage('is-alive', { alive: true });

    setInterval(function () {
        port.postMessage('is-alive', { alive: true });
    }, 1000 * 15); 
    ```

2.  如果后台页面检测到消息在一段时间后没有返回，则重新加载选项卡

    在后台页面中：

    ```
    var last = Date.now();
    var interval = 1000 * 15;

    chrome.extension.onConnect.addListener(function (port) {
        if (port.name === 'keep-alive') {
            port.onMessage.addListener(function (data) {
                if (data.type === 'is-alive' && data.payload.alive === true) {
                    last = Date.now();
                }
            });
        }
    });

    setInterval(function () {
        if (Date.now() - last > interval) {
            // Reload the tab...
        }
    }, interval); 
    ```

有关重新加载选项卡的信息，请参阅[`chrome.tabs`](http://code.google.com/chrome/extensions/tabs.html)文档。您将需要添加`tabs`到清单中的权限列表。

如果您想了解有关消息传递的更多信息，请参阅[消息传递](http://code.google.com/chrome/extensions/messaging.html)文档。

# c++ - std::stoi 实际上可以安全使用吗？

> ID：11598990
> 
> 赞同：69
> 
> 时间：2012-07-22T09:08:18.067
> 
> 标签：c++, standards, language-lawyer

我与某人就`std::stoi`. 说白了就是在`std::strtol`内部使用，如果报错就抛出。但是，根据他们的说法，`std::strtol`不应为 的输入报告错误`"abcxyz"`，从而导致`stoi`不抛出`std::invalid_argument`。

首先，这里有两个在 GCC 上测试过的关于这些情况的行为的程序：
[strtol](http://ideone.com/6J6D7)
[stoi](http://ideone.com/dHBcd)

他们都在 上显示成功`"123"`和失败`"abc"`。

* * *

我查看了标准以获取更多信息：

**§ 21.5**

```
Throws: invalid_argument if strtol, strtoul, strtoll, or strtoull reports that  
no conversion could be performed. Throws out_of_range if the converted value is  
outside the range of representable values for the return type. 
```

这总结了依赖的行为`strtol`。现在呢`strtol`？我在 C11 草案中发现了这一点：

**§7.22.1.4**

```
If the subject sequence is empty or does not have the expected form, no  
conversion is performed; the value of nptr is stored in the object  
pointed to by endptr, provided that endptr is not a null pointer. 
```

鉴于传入的情况`"abc"`，C 标准规定`nptr`指向字符串开头的 将存储在`endptr`传入的指针 中。这似乎与测试一致。此外，应返回 0，如下所述：

**§7.22.1.4**

```
If no conversion could be performed, zero is returned. 
```

之前的参考资料说不会执行任何转换，所以它必须返回 0。这些条件现在符合 C++11 标准的`stoi`throwing `std::invalid_argument`。

* * *

这个结果对我很重要，因为我不想到处推荐`stoi`作为其他字符串到 int 转换方法的更好替代方法，或者自己使用它，就好像它按你期望的那样工作，如果它没有将文本捕获为无效转换。

那么在这一切之后，我是不是哪里出错了？在我看来，我有很好的证据证明这个异常被抛出。我的证明是否有效，或者`std::stoi`不能保证在给出时抛出该异常`"abc"`？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-07-22T11:16:50.440

## 是否`std::stoi`在输入上引发错误`"abcxyz"`？

是的。

我认为您的困惑可能来自于除了溢出之外`strtol`从不报告*错误的事实。*它可以报告未执行任何转换，但这在 C 标准中从未被称为错误情况。

`strtol`所有三个 C 标准都对它进行了类似的定义，我不再赘述无聊的细节，但它基本上定义了一个“主题序列”，它是与实际数字相对应的输入字符串的子字符串。以下四个条件是等价的：

*   主题序列具有预期的形式（简单的英语：它是一个数字）
*   主题序列非空
*   发生了转换
*   `*endptr != nptr``endptr`（这只在非空时才有意义）

当发生溢出时，仍然可以说转换已经发生。

现在已经很清楚了，因为`"abcxyz"`不包含数字，所以字符串的主题序列`"abcxyz"`一定是空的，这样就不能进行转换了。以下 C90/C99/C11 程序将通过实验确认：

```
#include <stdio.h>
#include <stdlib.h>

int main() {
    char *nptr = "abcxyz", *endptr[1];
    strtol(nptr, endptr, 0);
    if (*endptr == nptr)
        printf("No conversion could be performed.\n");
    return 0;
} 
```

这意味着当给定没有可选基本参数的输入时，`std::stoi` *必须*抛出任何符合要求的实现。`invalid_argument``"abcxyz"`

* * *

## 这是否意味着`std::stoi`具有令人满意的错误检查？

不。当您与之交谈的人说这`std::stoi`比在`errno == 0 && end != start && *end=='\0'`之后执行完整检查更宽松时，她是正确的`std::strtol`，因为`std::stoi`从字符串中的第一个非数字字符开始，默默地删除了所有字符。

事实上，在我的脑海中，唯一一种其本机转换行为有点像`std::stoi`Javascript 的语言，即使这样，你也必须强制以 10 为基数，`parseInt(n, 10)`以避免十六进制数字的特殊情况：

```
input      |  std::atoi       std::stoi      Javascript      full check 
===========+=============================================================
hello      |  0               error          error(NaN)      error      
0xygen     |  0               0              error(NaN)      error      
0x42       |  0               0              66              error      
42x0       |  42              42             42              error      
42         |  42              42             42              42         
-----------+-------------------------------------------------------------
languages  |  Perl, Ruby,     Javascript     Javascript      C#, Java,  
           |  PHP, C...       (base 10)                      Python... 
```

*注意：在处理空格和多余的 + 符号方面，语言之间也存在差异。*

* * *

## 好的，所以我想要完整的错误检查，我应该使用什么？

我不知道有任何内置函数可以做到这一点，但`boost::lexical_cast<int>`会做你想做的事。它特别严格，因为它甚至拒绝周围的空格，这与 Python 的`int()`函数不同。请注意，无效字符和溢出会导致相同的异常，`boost::bad_lexical_cast`.

```
#include <boost/lexical_cast.hpp>

int main() {
    std::string s = "42";
    try {
        int n = boost::lexical_cast<int>(s);
        std::cout << "n = " << n << std::endl;
    } catch (boost::bad_lexical_cast) {
        std::cout << "conversion failed" << std::endl;
    }
} 
```

# xcode - Xcode 断点已关闭

> ID：11598993
> 
> 赞同：0
> 
> 时间：2012-07-22T09:08:42.887
> 
> 标签：xcode, xcode4

我在我的 Objective-C 项目中加入了一些 C 代码。我的断点位于代码的 C 部分。我注意到[xcode 4.3 的断点无效](https://stackoverflow.com/questions/9845387/invalid-breakpoint-with-xcode-4-3)，一些优化可能会弄乱它。但我不确定 Xcode 4.3 上的优化选项在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:43:17.947

您的意思是您只想更改构建设置以在 Xcode 中进行优化？

如果这就是您的意思，那么您可以单击您的项目以显示构建信息。在构建信息屏幕右侧选择您的目标，然后在窗口右上角的搜索栏中输入优化。它应该告诉你在哪里改变它。

干杯

# testing - 功能测试与功能测试术语问题

> ID：11598998
> 
> 赞同：0
> 
> 时间：2012-07-22T09:10:11.827
> 
> 标签：testing, documentation, terminology, functional-testing

我一直在努力理解这些，但每篇文章、维基等都说了别的。我的理解是：
**功能测试**是指单独测试新功能并针对文档进行测试。或者也许也是探索性测试？
**功能测试**意味着仅从功能的角度验证整个应用程序是否符合规范。

从书上看，当整个应用程序根据功能需求或设计文档进行测试和检查时，功能测试被称为**系统测试的一部分。**

在这个领域有经验的人可以告诉我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:53:38.063

*功能测试*是测试的*一种*，而*系统测试*定义了测试的*范围*。这两个是正交的概念，尽管功能测试通常是在整个系统上执行的（因此在某些人的脑海中会产生混淆）。

**功能测试**——对系统单一功能的测试

**功能测试**- 执行功能测试

功能测试可以在系统的任何部分——例如单个类或类群、子系统——或整个系统上执行。

**系统测试**- 对整个系统执行测试，而不是单元或模块。这些可能是功能测试、可用性测试、探索性测试等。

另请注意，测试和需求文档之间的区别因[Concordion](http://www.concordion.org)等框架而变得模糊，允许文档定义和执行功能测试。