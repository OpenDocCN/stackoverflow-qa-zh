# StackOverflow 问答 11202000-11202999

# c# - TCP 服务器应用程序中具有相同 MAC 地址的 TCP 客户端

> ID：11202005
> 
> 赞同：1
> 
> 时间：2012-06-26T06:44:59.793
> 
> 标签：c#, networking, tcpclient, mac-address

我有一个用 C# 编写的 TCP 服务器应用程序。我接受来自我的服务器 IP 地址的第 1234 个端口的 TCP 客户端。我不知道 TCP 客户端的 MAC 地址。到目前为止没有问题，服务器运行良好，但我意识到当具有相同 MAC 地址的 TCP 客户端连接到服务器时，我无法处理他们的连接。那个位置有什么问题？我如何知道尝试连接到我的服务器的 TCP 客户端的 MAC 地址？如果我知道，我不会接受在已连接客户端列表中具有相同 MAC 地址的 TCP 客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:01:55.683

这是网络管理员的问题，而不是编写服务器的人。LAN 中两个相同的 MAC 地址是采购错误，如果是动态分配的，则为 netadmin 错误。不要编写代码来解决不应该出现的问题。您将无法向此类客户端发送普通响应，更不用说 ping 它们了。

# jquery - 使用 JQuery 添加类 onLoad

> ID：11202011
> 
> 赞同：0
> 
> 时间：2012-06-26T06:45:44.960
> 
> 标签：jquery

我目前正在用户滚动时进行导航，但除非您滚动，否则`.active` `class`第一个锚点没有。`.active` `class`无论如何，这很难解释。请检查这个小提琴： http: [//jsfiddle.net/7nrLU/5/](http://jsfiddle.net/7nrLU/5/) 随意提出其他更好的方法，但不是 CSS3。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:16:26.543

除了其他可行的解决方案之外，添加我的解决方案;-)

```
$(document).ready(function() {
     $('.navigation a.a1').addClass('active');
     ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:48:45.760

添加一个`.scroll()`以立即运行事件，如下所示：http: [//jsfiddle.net/7nrLU/6/](http://jsfiddle.net/7nrLU/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:49:42.470

```
$('.navigation a:first').addClass('active'); 
```

# asp.net - 为什么为 C# 生成的 EF 4.x DbContext 生成器的 POCO 类是部分的？

> ID：11202016
> 
> 赞同：0
> 
> 时间：2012-06-26T06:45:58.283
> 
> 标签：asp.net, entity-framework, entity-framework-4

我正在使用 EF 4.3.1 和 " "**使用 T4**`EF 4.x DbContext Generator for C#`创建POCO 。

 **生成的类是：

```
namespace MyProjects.Models
{
    public partial class ReCategory
... 
```

为什么课程是部分的？

POCO 不是没有 EF 管道的课程吗？

如果您认为这个问题不合适，请评论我将删除它，感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T06:49:35.853

他们为什么*不*应该呢？如今，几乎每个代码生成器都会生成部分类，以便您可以将自己的成员添加到类中 - 在单独的文件中。

如果必须重新生成这些类，它们所在的文件将被完全替换 - 但您的自定义将继续存在。

* * *

[部分类定义](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)：

> 有几种情况需要拆分类定义：
> 
> *   使用自动生成的源代码时，可以将代码添加到类中，而无需重新创建源文件。Visual Studio 在创建 Windows 窗体、Web 服务包装代码等时使用此方法。您可以创建使用这些类的代码，而无需编辑由 Visual Studio 创建的文件。**

# php - mysql_affected_rows 在成功查询时返回 False？

> ID：11202019
> 
> 赞同：0
> 
> 时间：2012-06-26T06:46:17.497
> 
> 标签：php, mysql, sql

我很难对这个 PHP/MySQL 问题进行排序。让我向您展示我的数据库，并解释我的情况：

* * *

创建表：

```
CREATE TABLE IF NOT EXISTS `users` (
  `id` int(50) NOT NULL AUTO_INCREMENT,
  `active` varchar(20) NOT NULL,
  `activation` varchar(15) NOT NULL,
  `firstName` longtext NOT NULL,
  `lastName` longtext NOT NULL,
  `passWord` longtext NOT NULL,
  `changePassword` text NOT NULL,
  `emailAddress1` longtext NOT NULL,
  `emailAddress2` longtext NOT NULL,
  `emailAddress3` longtext NOT NULL,
  `role` longtext NOT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT KEY `name` (`firstName`,`lastName`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 ; 
```

插入一个值：

```
INSERT INTO `users` (
  `id` ,
  `active` ,
  `activation` ,
  `firstName` ,
  `lastName` ,
  `passWord` ,
  `changePassword` ,
  `emailAddress1` ,
  `emailAddress2` ,
  `emailAddress3` ,
  `role`
) VALUES (
  NULL,  '1000000000',  'abcdefghijklmno',  'John',  'Smith',  '*24D7FB97963C40FE5C56A6672F9560FC8B681508',  'on',  'john@gmail.com',  '',  '',  'User'
); 
```

更新一个值：

```
$affected = mysql_query(UPDATE users SET passWord = PASSWORD('a9eb42e1b3be829ef42972ea9abab334'), changePassword = 'on' WHERE emailAddress1 = 'john@gmail.com', $dbID); 

if (mysql_affected_rows($affected)) {
    //Never runs
} 
```

上面的`UPDATE`查询在我的脚本 phpMyAdmin 和 MySQL 终端中执行得很好。但是，`mysql_affected_rows($affected)` *总是*给我这个错误：

```
Warning: mysql_affected_rows() expects parameter 1 to be resource, boolean given 
```

我知道这意味着我的查询失败了，但是每次我进入数据库时​​，我都会看到这些值已经更新。

从函数中删除参数似乎可以解决问题。但是，我宁愿将标识符作为函数参数，只是为了确定我指的是什么，以及代码保险。

知道为什么这可能会这样做吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T06:54:08.927

> [http://php.net/mysql_query](http://php.net/mysql_query)
> 
> **返回值**
> 
> ...
> 
> 对于其他类型的 SQL 语句，`INSERT`, `UPDATE`, `DELETE`,`DROP`等，成功或错误`mysql_query()`返回。`TRUE``FALSE`

和：

> `int mysql_affected_rows ([ resource $link_identifier = NULL ] )`

这意味着`mysql_affected_rows`想要一个 mysql 连接资源作为参数。不是 的结果，而且如果该结果只是or `mysql_query`，肯定不是。你像这样使用它：`true``false`

```
$successful = mysql_query('UPDATE ...'); 

if ($successful) {
    echo 'Affected rows: ' . mysql_affected_rows();
} else {
    echo 'Fail: ' . mysql_error();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:54:30.870

改变：

```
$affected = mysql_query(UPDATE users SET passWord = PASSWORD('a9eb42e1b3be829ef42972ea9abab334'), changePassword = 'on' WHERE emailAddress1 LIKE 'john@gmail.com', $dbID); 
```

并执行

# wpf - 这个绑定有什么问题？

> ID：11202021
> 
> 赞同：1
> 
> 时间：2012-06-26T06:46:21.053
> 
> 标签：wpf, xaml, mvvm, binding, styles

我正在尝试将 DataContext 分配给一个 MenuItem，它是 ListBox 的一部分。

```
 <Style x:Key="ContextMenuStyle" TargetType="telerik:RadMenuItem">
        <Setter Property="DataContext" Value="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=telerik:RadListBox}, Path=DataContext}" />
    </Style>

     <DataTemplate x:Key="TemplateSelector">
            <ContentPresenter Content="{Binding}" Name="contentPresenter">
                <telerik:RadContextMenu.ContextMenu>
                    <telerik:RadContextMenu>
                        <telerik:RadMenuItem Header="Connect" Click="RadMenuItem_Click" Style="{StaticResource ResourceKey=ContextMenuStyle}" />
                        <telerik:RadMenuItem Header="Disconnect" />
                        <telerik:RadMenuItem Header="Delete Database" />
                    </telerik:RadContextMenu>
                </telerik:RadContextMenu.ContextMenu>
            </ContentPresenter>
     </DataTemplate>

    <Grid>
        <telerik:RadListBox x:Name="lsbDevices" ItemsSource="{Binding Path=Devices}" ItemTemplate="{StaticResource TemplateSelector}" 
                            SelectedItem="{Binding SelectedDevice, Mode=TwoWay}" Grid.Row="0" />
    </Grid> 
```

这就是我所做的。RadListBox 的 DataContext 设置为我的 ViewModel。我想通过 ContextMenuStyle 将此 ViewModel 分配给每个 RadMenuItem 的 DataContext，但它不起作用。RadListBox 的 DataContext 已正确设置为我的模型视图，但 RadMenuItem 的 datacontext 为空。我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:33:00.340

`ContextMenus`与`VisualTree`UI 的其余部分不同，因此您的`RelativeSource`绑定找不到`ListBox`

您可以`ContextMenu`使用`PlacementTarget``ContextMenu`

```
<Style x:Key="ContextMenuStyle" TargetType="telerik:RadMenuItem">
    <Setter Property="DataContext" Value="{Binding PlacementTarget.DataContext, 
        RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type telerik:RadContextMenu}}}" />
</Style> 
```

# c# - 修改结构列表中的特定项目

> ID：11202024
> 
> 赞同：3
> 
> 时间：2012-06-26T06:46:28.000
> 
> 标签：c#

我有结构列表。我想修改结构中的特定数据。该结构位于列表的特定索引位置。

我想做这样的事情：

```
struct sample
{
  int a;
  string name;
}

List<sample> list = new List<sample>();

for(int i=0; i < list.Count; i++)
{
  list[i].a = someotherlist[i].data;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T06:59:04.227

问题是列表索引器创建了结构的**副本**，即它实际上是：

```
for(int i=0; i < list.Count; i++)
{
  var completelyIsolatedClone = list[i];
  completelyIsolatedClone.a = someotherlist[i].data;
} 
```

编译器会**阻止**您犯明显的错误。您拥有的代码使用`get`, 改变数据的单独副本，但从*不将其放回*- 所以您的更改不会做任何有用的事情。请注意，Mono 的人认为，如果它按照您的方式工作会很好，但是：[http ://tirania.org/blog/archive/2012/Apr-11.html](http://tirania.org/blog/archive/2012/Apr-11.html)

请注意，*数组*的工作方式不同；使用数组，您正在触摸 struct **in place**，因此以下操作可以正常工作：

```
for(int i=0; i < list.Count; i++)
{
  someArray[i].a = someotherlist[i].data;
} 
```

另一种方法是将数据复制出来（get 访问器），对其进行变异，然后将其放回：

```
for(int i=0; i < list.Count; i++)
{
  var completelyIsolatedClone = list[i];
  completelyIsolatedClone.a = someotherlist[i].data;
  list[i] = completelyIsolatedClone;
} 
```

或者更好的是，acoid 可变结构完全，也许使用将更改应用于**新**副本的方法：

```
for(int i=0; i < list.Count; i++)
{
  list[i] = list[i].SetA(someotherlist[i].data);
} 
```

where`SetA`创建一个**新**的结构，例如`DateTime.AddDays`等，即

```
public SomeType SetA(int a) {
    return new SomeType(this.X, this.Y, a, this.Z);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:54:48.407

你不能这样做的原因是因为 Sample 是一个`struct`，如果你把它改成一个类，那么你可以修改它。结构是按值传递的，也就是说，当方法返回结构时，返回的是结构的副本，而不是原始结构。因此，当`list[i].a = someotherlist[i].data;`运行时，您实际上是在修改副本并且原始结构没有被更改。编译器会阻止您这样做，因为这可能不是您想要的。

你可以看看这个线程[为什么我不能从通用集合中修改项目的值）？](http://social.msdn.microsoft.com/Forums/pl/csharpgeneral/thread/6c925d84-2855-4a6d-a781-a269dd3b1eea)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T04:18:12.177

我刚刚修改了我的代码，它对我来说很好

```
public struct test
        {
            public int data;
            public string name;
            public int port_index;
        }
static void Main(string[] args)
        {
            List<test> look_up = new List<test>();
            test obj;
            obj.data = 1;
            obj.port_index = 0;
            obj.name = "aaaa";
            look_up.Add(obj);
            test obj1;
            obj1.data=3;
            obj1.port_index=1;
            obj1.name="sssss";
            look_up.Add(obj1);
            for(int i=0;i<look_up.Count;i++)
            {
                if (i == 1)
                {
                    test temp = look_up[i];
                    temp.data = 5;
                    look_up[i] = temp;
                }
            }
        } 
```

# ruby - perftools.rb 输出中的模块#__temp__

> ID：11202028
> 
> 赞同：1
> 
> 时间：2012-06-26T06:47:02.060
> 
> 标签：ruby, google-perftools

在分析我们的一些 Ruby 代码时 perftools.rb 显示以下输出：

```
Total: 291 samples                                                                                                
     110  37.8%  37.8%      112  38.5% #<Module:0x007ff364e2bfd0>#__temp__
     19   6.5%   44.3%       19   6.5% BigDecimal#div                                                             
     18   6.2%   50.5%      171  58.8% BinSearch::Methods#_bin_search
     15   5.2%   55.7%       15   5.2% BigDecimal#add 
```

因此，大部分时间都花在了指定为 的方法上`#<Module:0x007ff364e2bfd0>#__temp__`。我如何获得更多关于这确切位置的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:32:25.180

如果您使用的是 Rails，那可能就是它的来源：[http ://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Read/ClassMethods.html#method-i-define_method_attribute](http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Read/ClassMethods.html#method-i-define_method_attribute)

不过，我仍然不确定它为什么会出现。看起来该方法应该只存在很短的时间。

# requirejs - phantomjs 和 requirejs

> ID：11202029
> 
> 赞同：7
> 
> 时间：2012-06-26T06:47:07.793
> 
> 标签：requirejs, phantomjs

main.js 文件中的代码如下：

```
 phantom.injectJs("libs/require-1.0.7.js");
      require.config(
        {
          baseUrl: "" 
        }
      );
      require([], function(){}); 
```

当我在命令行中运行“phantomjs main.js”时，requirejs 在 main.js 中无法正常工作。我知道如何在浏览器中运行的页面中使用requirejs（包括phantomjs的方式：page.open（url，callback）），但不像上面那样。我尝试使用像 main.js 这样的 requirejs，我认为这是一个流行的问题。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-17T22:30:40.013

我只是挣扎了一段时间。我的解决方案并不干净，但它可以工作，并且由于 phantomjs 未完成的 api 文档，我对此感到满意。

# 罗嗦的解释

你需要三个文件。一个是您的 amd phantomjs 测试文件，我将其称为“amd.js”。第二个是要加载的 html 页面，我将其命名为“amd.html”。最后是我称之为“amdTestModule.js”的浏览器测试。

在 amd.html 中，按正常方式声明您的脚本标签：

```
<script data-main="amdTestModule.js" src="require.js"></script> 
```

在您的 phantomjs 测试文件中，这就是它变得 hacky 的地方。创建您的页面，并加载到“fs”模块中。这允许您打开相对文件路径。

```
var page = require('webpage').create();
var fs = require('fs');

page.open('file://' + fs.absolute('tests/amd.html')); 
```

现在由于 requirejs 异步加载文件，我们不能只将回调传递给 page.open 并期望事情顺利进行。我们需要一些方法来
1) 在浏览器中测试我们的模块并将结果传回给我们的 phantomjs 上下文。或者
2) 告诉我们的 phantomjs 上下文，在加载所有资源后，运行测试。

＃1对我来说更简单。我通过以下方式完成了这项工作：

```
page.onConsoleMessage = function(msg) {
    msg = msg.split('=');
    if (msg[1] === 'success') {
        console.log('amd test successful');
    } else {
        console.log('amd test failed');
    }
    phantom.exit();
}; 
```

**有关我的 console.log 消息，请参阅下面的完整代码。

现在 phantomjs 显然有一个内置的事件 api，但它没有记录。我还成功地从他们的 page.onResourceReceived 和 page.onResourceRequested 获取请求/响应消息 - 这意味着您可以在加载所有必需模块时进行调试。然而，为了传达我的测试结果，我只使用了 console.log。

现在如果 console.log 消息从未运行会发生什么？我能想到解决这个问题的唯一方法是使用 setTimeout

```
setTimeout(function() {
    console.log('amd test failed - timeout');
    phantom.exit();
}, 500); 
```

应该这样做！

# 完整代码

**目录结构**

```
/projectRoot  
  /tests  
    - amd.js  
    - amdTestModule.js  
    - amd.html  
    - require.js (which I symlinked)  
    - <dependencies> (also symlinked) 
```

**amd.js**

```
'use strict';
var page = require('webpage').create();
var fs = require('fs');

/*
page.onResourceRequested = function(req) {
    console.log('\n');
    console.log('REQUEST');
    console.log(JSON.stringify(req, null, 4));
    console.log('\n');
};
page.onResourceReceived = function(response) {
    console.log('\n');
    console.log('RESPONSE');
    console.log('Response (#' + response.id + ', stage "' + response.stage + '"): ' + JSON.stringify(response, null, 4));
    console.log('\n');
};
*/

page.onConsoleMessage = function(msg) {
    msg = msg.split('=');
    if (msg[1] === 'success') {
        console.log('amd test successful');
    } else {
        console.log('amd test failed');
    }
    phantom.exit();
};

page.open('file://' + fs.absolute('tests/amd.html'));

setTimeout(function() {
    console.log('amd test failed - timeout');
    phantom.exit();
}, 500); 
```

**amd.html**

```
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
</head>

<body>
    <script data-main='amdTestModule.js' src='require.js'></script>
</body>

</html> 
```

**amdTestModule.js**

```
require([<dependencies>], function(<dependencies>) {
    ...
    console.log(
        (<test>) ? "test=success" : "test=failed"
    );
}); 
```

**安慰**

```
$ phantomjs tests/amd.js
amd test successful 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T06:52:38.597

你误解了 pages.injectJs()

它用于将脚本注入您正在加载的页面，而不是注入 phantomjs 运行时环境。

因此，使用 .injectJs() 会使 requirejs 加载到您的页面中，而不是加载到 phantomjs.exe 中。

也就是说，phantomjs 的运行时环境近似于 commonjs。默认情况下，RequireJs 不会在那里运行。如果你觉得特别（非常）有动力，你可以尝试移植为 nodejs 制作的 require-shim，但它不能开箱即用，并且需要对运行时有非常深刻的理解。更多详情：[http ://requirejs.org/docs/node.html](http://requirejs.org/docs/node.html)

**一个更好的主意：** 也许你应该确保你有你想要运行的 javascript 的 commonjs 版本。我个人用打字稿编写代码，因此我可以为 commonjs 或 amd 构建代码。我将 commonjs 用于 phantomjs 代码，将 amd 用于 nodejs 和浏览器。

# c++ - 删除文件的一部分？

> ID：11202033
> 
> 赞同：0
> 
> 时间：2012-06-26T06:47:24.947
> 
> 标签：c++

我想编写一个可以打开文件的程序，如果我找到“Hello World”，程序会自动将“Hello World”之前的文本复制到一个新文件中。

问题是，如何删除“缓冲区”中的文本“hello world”，例如：

```
 buffer = new char [Size];

  ifstream fstr;

  fstr.open(path, ios::in);

  fstr.read(buffer, (Size));

  fstr.close();

  //what should i write here about copying the rest of the text except 

  //Hello World? 

  ofstream outputFile(path2, ios::out);

  outputFile << buffer;

  outputFile.close(); 
```

谢谢你帮助我 :) 顺便说一句，我正在使用 Borland C++，我是一名学习者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:01:10.493

假设文件是​​所有文本，您可以使用[strstr](http://www.cplusplus.com/reference/clibrary/cstring/strstr/)查找“Hello World”，然后设置字符串的结尾。

```
char *Found = strstr(buffer, "Hello World"); 
if (Found != NULL) 
   *Found = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:10:54.920

首先一些问题！类型问题。

1.  如果文件不包含“Hello World”怎么办？
2.  如果它包含“Hello World”怎么办？
3.  如果它包含“Hello World”，但“World”从下一行开始怎么办？

这些我都没有答案。如果这是家庭作业，这取决于你和你的导师。

现在建议：使用 C++ 字符串 (std::string) 而不是 C 风格的字符串。

在 C 中，您可以调用`strstr`以查找该字符串的位置。如果找到，则在找到的位置写入 0，或`strcpy`将空字符串写入找到的位置。

在 C++ 中，您可以使用成员函数找到目标字符串的位置`find`。如果找到，请使用成员函数擦除找到的位置及其后的内容`erase`。

哪个函数/成员名称更有意义？从“Hello World”中删除哪种方法更有意义？从现在起六个月后，您更愿意回到哪个代码？

# php - 使用 PHP+MySQL 的可编辑 GRID (ExtJS)

> ID：11202034
> 
> 赞同：2
> 
> 时间：2012-06-26T06:47:26.150
> 
> 标签：php, javascript, mysql, extjs, grid

我对将数据记录到 MySQL 数据库的理解有点困难。现在，我的数据库中有一些表格显示在网格中。我附加了一个编辑器，但我不知道如何正确使用它（将可编辑数据发送到 php 脚本中）。我可以寻求帮助吗？谢谢。

**视图.js**

```
 Ext.onReady(function() {
    var cols = [
    { dataIndex: 'id', header: 'id', hidden: true },
    { dataIndex: 'title', header: 'Title', width: 200, editor: 'textfield'},
    { dataIndex: 'author', header: 'Author', width: 200, editor: 'textfield' },
    { dataIndex: 'isbn', header: 'ISBN', width: 100, editor: 'numberfield' },
],

    fields = [];
        for(var i=0; i<cols.length; i++) {
        fields.push(cols[i].dataIndex);
    }

Ext.define('Book', {
    extend: 'Ext.data.Model',
    fields: fields 
});

var store = Ext.create('Ext.data.JsonStore', {
    model: 'Book',
    proxy: {
        type: 'ajax',
        url: 'view.php',
        reader: {
            type: 'json'
        }
    }
});

Ext.create('Ext.grid.Panel', {
    columns: cols,
    width: 520,
    style: 'margin-top: 20%; margin-left: 35%',
    plugins: [
        Ext.create('Ext.grid.plugin.RowEditing', {
            clicksToEdit: 2
        })
    ],
    renderTo: Ext.getBody(),
    store: store
});
store.load();
}); 
```

**视图.php**

```
 <?php

require_once 'db.php';

$result = mysql_query('SELECT * FROM books');
while ($row = mysql_fetch_assoc($result)) {

    for ($i=0; $i < mysql_num_fields($result); $i++) {
        $meta = mysql_fetch_field($result, $i);
        }
    $rows[] = $row;
}

print (json_encode($rows));
?> 
```

**编辑.js**

```
 Ext.onReady(function(){
Ext.QuickTips.init();
var simpleForm = new Ext.FormPanel ({
    labelWidth: 75,     
    url:'edit.php',    
    frame:true,
    title: 'Add book',
    bodyStyle:'padding:5px 5px 0',
    width: 350,
    defaults: {width: 230},
    defaultType: 'textfield',

        items: [{
            fieldLabel: 'Title',
            name: 'title',
            allowBlank:false
            },{
            fieldLabel: 'Author',
            name: 'author'
            },{
            fieldLabel: 'ISBN',
            name: 'isbn'
        }],            
        buttons: [{
            text: 'Save',          
            handler: function () {
                simpleForm.getForm().submit({
                    waitMsg: 'Saving...',   
                    success: function () {     
                        Ext.MessageBox.alert ('Message','Data has been saved');
                        simpleForm.getForm().reset();
                    },
                  failure: function () {   
                        Ext.MessageBox.alert ('Message','Saving data failed');
                    }
                });
            }
        },{
            text: 'Cancel',
            handler: function () {
                simpleForm.getForm().reset();
            }
        }]
    });
    simpleForm.render ('simple-form');
}); 
```

**编辑.php - ??????????**

```
 <?php
    require_once 'db.php';
    $q=mysql_query ("INSERT INTO books VALUES (null, '".$_POST['title']."','".$_POST['author']."','".$_POST['isbn']."')
    ") or die ('{"success":"false"}');

    // json output to notify the insert is success or not
    if ($q) {
        echo '{"success":"true"}';
    }
    else {
        echo '{"success":"false"}';
    }
?> 
```

# facebook - Facebook OpenGraph API 调用并非始终有效

> ID：11202038
> 
> 赞同：1
> 
> 时间：2012-06-26T06:48:00.477
> 
> 标签：facebook, facebook-opengraph

我们有时无法连接到 Facebook OpenGraph API。我们的 .NET 客户端返回以下错误：

> System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: 连接尝试失败，因为连接方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机未能在 System.Net.Sockets.Socket.InternalConnect(EndPoint remoteEP) 在 System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket&socket, IPAddress&地址, ConnectSocketState状态, IAsyncResult asyncResult, Int32 timeout, Exception&异常)

请注意，这并不特定于任何特定的 API 调用。

甚至 ping graph.facebook.com 也会随机超时。

以下是一些跟踪路线信息：

```
1 <1 ms <1 ms <1 ms ip-97-74-87-252.ip.secureserver.net [97.74.87.252]
2 <1 ms <1 ms <1 ms ip-208-109-113-173.ip.secureserver.net [208.109.113.173]
3 1 ms <1 ms <1 ms ip-97-74-252-21.ip.secureserver.net [97.74.252.21]
4 1 ms <1 ms <1 ms ip-97-74-252-21.ip.secureserver.net [97.74.252.21]
5 9 ms 1 ms 1 ms 206-15-85-9.static.twtelecom.net [206.15.85.9]
6 13 ms 13 ms 44 ms lax2-pr2-xe-1-3-0-0.us.twtelecom.net [66.192.241.218]
7 26 ms 28 ms 27 ms cr1.la2ca.ip.att.net [12.122.104.14]
8 26 ms 27 ms 27 ms cr82.sj2ca.ip.att.net [12.122.1.146]
9 23 ms 23 ms 23 ms 12.122.128.201
10 22 ms 22 ms 22 ms 12.249.231.26
11 22 ms 22 ms 22 ms ae1.bb02.sjc1.tfbnw.net [204.15.21.164]
12 23 ms 23 ms 23 ms ae5.dr02.snc4.tfbnw.net [204.15.21.169]
13 24 ms 23 ms 23 ms eth-17-2.csw02b.snc4.tfbnw.net [74.119.76.105]
14 * * * Request timed out.
15 * * * Request timed out.
16 * * * Request timed out.
17 * * * Request timed out.
18 * * * Request timed out. 
```

重现步骤：

*   尝试 ping graph.facebook.com。
*   某些 IP 的 Ping 请求将超时。

# c++ - 获取串行端口已准备好读取的通知

> ID：11202039
> 
> 赞同：1
> 
> 时间：2012-06-26T06:48:01.113
> 
> 标签：c++, linux, serial-port, hardware, embedded-linux

我必须编写一个从串行端口逐字节读取的 C++ 应用程序。这是一个重要的需求，因为它使用 modbus 通过无线电传输接收消息，并且传输结束由 3.5 个字符长度的持续时间定义，因此我必须能够逐字节获取消息。当前系统利用 DOS 来执行此操作，它使用硬件中断。我们希望转移到使用 Linux 作为该软件的操作系统，但我们缺乏这方面的专业知识。我尝试了很多方法来做到这一点 - 首先使用非阻塞读取的轮询，使用具有非常短的超时值的选择，将串行端口的读取缓冲区的大小设置为一个字节，甚至使用信号处理程序SIGIO，但这些东西都不能满足我的要求。我的老板告诉我，我们当前运行的 DOS 应用程序使用硬件中断来获得通知，当有可从串行端口读取的内容并且可以直接访问硬件时。有什么方法可以从用户空间 Linux 应用程序中获取此功能？如果我编写了一个自定义驱动程序，我可以这样做吗（尽管以前从未这样做过并且对内核如何工作的知识几乎为零）？我听说 Linux 是一个非常流行的用于硬件控制和嵌入式设备的操作系统，所以我猜测这种事情一定有可能以某种方式完成，但到目前为止，我已经花了数周时间在这方面，但仍然没有具体的想法最好继续。有什么方法可以从用户空间 Linux 应用程序中获取此功能？如果我编写了一个自定义驱动程序，我可以这样做吗（尽管以前从未这样做过并且对内核如何工作的知识几乎为零）？我听说 Linux 是一个非常流行的用于硬件控制和嵌入式设备的操作系统，所以我猜测这种事情一定有可能以某种方式完成，但到目前为止，我已经花了数周时间在这方面，但仍然没有具体的想法最好继续。有什么方法可以从用户空间 Linux 应用程序中获取此功能？如果我编写了一个自定义驱动程序，我可以这样做吗（尽管以前从未这样做过并且对内核如何工作的知识几乎为零）？我听说 Linux 是一个非常流行的用于硬件控制和嵌入式设备的操作系统，所以我猜测这种事情一定有可能以某种方式完成，但到目前为止，我已经花了数周时间在这方面，但仍然没有具体的想法最好继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:03:13.333

我不太确定逐字节读取如何帮助您接收小数字符，除非在字符之间的间隔时间内编码了信息，因此您需要知道接收它们的时间。

无论如何，我怀疑您将需要对串行端口内核驱动程序进行自定义修改；这真的不是一个项目那么糟糕，你会学到很多东西。您可能还需要更改 UART“芯片”的配置（实际上只是一些较大设备的一个小角落），使其仅在一个字节后中断（即模拟 16450）而不是通常为 16 字节时（在 16550 处模拟）缓冲区已满。dos 程序的代码实际上可能在那里提供帮助。如果波特率不是太快，另一种选择是轮询内核中的硬件或实时扩展（或者如果它真的很慢，因为它可能在 HF 无线电链路上，甚至可能在用户空间中）

如果我需要知道字符接收的时间是正确的，另一种选择是将接收卸载到具有双 UARTS（或者更好，一个 UART 和一个 USB 接口）的微控制器。然后，您可以让微型观察串行流，并将包含一个接收到的字符和时间戳的小数据包输出到 PC（在另一个串行端口上以更快的波特率，或在 USB 上） - 甚至让它为你解码协议。这样做的好处是它可以让您独立于操作系统，并且可以在传统的免费机器上工作（使用现成的 USB 串行加密狗可能会导致逐字节访问失败）。您甚至可以用一些便宜的评估板来制作它，而不必制造任何定制硬件。

# mysql - 如何更新从服务器与主服务器相比，它延迟了两周数据

> ID：11202044
> 
> 赞同：0
> 
> 时间：2012-06-26T06:48:25.650
> 
> 标签：mysql

我有运行良好的主服务器，并且在配置时我已经复制到从服务器它工作正常，一天后（从 6 月 4 日起）从服务器在两周后没有更新数据我已经用当前的 BIN LOG 完成了 RESET SLAVE 和LOG POS 然后从站开始更新（从 12 年 6 月 19 日开始）。现在我从 6 月 4 日到 18 日丢失了 2 周的数据，如何获取数据。据我所知，通过恢复主服务器，我们可以做到这一点，但是客户端无法关闭主服务器。请告诉我如何获得两周的数据？以及在主服务器中识别二进制日志的位置（默认位置）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:38:07.707

这对你有帮助.,

[http://www.maatkit.org/doc/mk-table-sync.html](http://www.maatkit.org/doc/mk-table-sync.html)

您可以在 MySQL 服务器使用的 my.cnf 文件中找到二进制日志的位置。

# java - Java JDBC 效率：一个连接应该维持多久？

> ID：11202046
> 
> 赞同：5
> 
> 时间：2012-06-26T06:48:33.063
> 
> 标签：java, performance, jdbc, connection

我仍在处理[此处](https://stackoverflow.com/questions/11153322/java-swing-postgres-user-authentication-close-old-connection-when-new-connect)提到的相同问题。它似乎工作正常，尤其是在创建如下所示的 AbstractModel 类之后：

```
public abstract class AbstractModel {

    protected static Connection myConnection = SingletonConnection.instance().establishConnection();
    protected static Statement stmt;
    protected static ResultSet rs;

    protected boolean loginCheck;                   // if userId and userLoginHistoryId are valid - true, else false
    protected boolean userLoggedIn;                 // if user is already logged in - true, else false

    public AbstractModel (int userId, Long userLoginHistoryId){
        createConnection();                                 // establish connection
            loginCheck = false;
        userLoggedIn = false;
        if (userId == 0 && userLoginHistoryId == 0){        // special case for login
            loginCheck = true;                              // 0, 0, false, false
            userLoggedIn = false;                           // set loginCheck to true, userLogged in to false
        } else {
            userLoggedIn = true;
            try{
                String query = "select \"user_login_session_check\"(" + userId + ", " + userLoginHistoryId + ");";
                System.out.println("query: " + query);
                stmt = myConnection.createStatement();
                rs = stmt.executeQuery(query);
                while (rs.next()){
                    loginCheck = rs.getBoolean(1);
                }
            } catch (SQLException e){
                System.out.println("SQL Exception: ");
                e.printStackTrace();
            }
        }

    }
    // close connection
    public void closeConnection(){
        try{
            myConnection.close();
        } catch (SQLException e){
            System.out.println("SQL Exception: ");
            e.printStackTrace();
        }

    }
    // establish connection
    public void createConnection(){
        myConnection = SingletonConnection.instance().establishConnection();
    }

    // login session check
    public boolean expiredLoginCheck (){
        if (loginCheck == false && userLoggedIn == true){
            closeConnection();
            return false;
        } else {
            return true;
        }
    }

} 
```

我已经在上面前面问题的链接中发布了存储过程和单例模式实现。

我的印象是我不需要在每个数据事务之后关闭与数据库的连接，因为它只会减慢应用程序的速度。我正在为我正在构建的这个系统寻找大约 30 个用户，因此性能和可用性很重要。

延长至少 3-4 次数据事务的连接是否正确？例如。对用户输入的某种形式的验证检查，或者类似于谷歌的自动建议的东西......这些都是基于用户输入的单独存储的函数调用。我可以使用一个连接实例，而不是在每次数据事务后连接和断开连接吗？哪个更有效率？

如果我的假设是正确的（使用一个连接实例更有效），那么应该在控制器中处理连接的打开和关闭，这就是我创建 createConnection() 和 closeConnection() 方法的原因。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T07:23:34.273

您的代码不应该依赖于这样一个事实，即您的应用程序当前是数据库的唯一客户端，或者您只有 30 个用户。所以你应该处理数据库连接，比如文件、套接字和所有其他类型的稀缺资源，你可能会用完。

因此，您应该**始终**清理自己。无论你做什么。打开连接，做你的事情（一个或 SQL 语句）并关闭连接。**总是！**

在您的代码中，您创建连接并将其保存到静态变量中 - 只要您的 AbstractModel 类存在，此连接就会持续存在，可能永远存在 - 这很糟糕。与所有类似情况一样，将您的代码放在 try/finally 中，以确保连接始终关闭。

我已经看到由于 Web 应用程序没有关闭连接而导致应用程序服务器运行连接不足。或者因为他们在注销时关闭并且有人说“我们永远不会同时拥有那么多用户”，但它只是稍微扩大了一点。

现在，当您运行代码并正确关闭连接时，添加连接池，就像 zaske 说的那样。这将解决打开/关闭数据库连接的性能问题，这确实是昂贵的。在逻辑层（您的应用程序）上，您不想知道何时打开/关闭物理连接，数据库层（数据库池）将为您处理它。

然后，您甚至可以为整个会话模型设置单个连接，DBCP 也支持该连接 - 这没有危险，因为您可以在需要时重新配置池，而无需接触客户端代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T07:47:44.640

就像 Tomasz 所说，你**永远不** ***应该***依赖于你的应用程序将被少数客户使用的事实。***驱动程序将***在一定时间后超时这一事实并不能保证您将有足够的可用连接。想象一下：很多数据库都预先配置了最大连接数设置为（比如说）15 和超时（比如说）10-15 分钟。如果您有 30 个客户端并且每个客户端都执行一项操作，那么您将在中途某处出现连接不足的情况。

您应该通过以下方式处理连接、文件、流和其他资源：

```
public void doSomething()
{
    Connection connection = null;
    Statement stmt = null;
    ResultSet rs = null;

    final String sql = "SELECT ....");

    try
    {
        connection = getConnection();
        stmt = connection.createStatement();

        rs = stmt.executeQuery(sql);
        if (rs.next())
        {
            // Do something here...
        }
    }
    catch (SQLException e)
    {
        e.printStackTrace();
    }
    finally
    {
        closeResultSet(rs);
        closeStatement(stmt);
        closeConnection(connection);
    }
} 
```

try/catch/finally 保证无论结果如何，连接都会关闭。如果出现某种故障，finally 块仍将关闭连接，就像它会做的那样，如果一切正常的话。

同样，对于文件和流，您需要做同样的事情。将相应的对象初始化为`null`您的 try/catch/finally 之外，然后按照上面的方法。

这种误解使得许多 Java 应用程序在 Windows 下行为不端，人们不会关闭文件（流到文件等）并且这些文件被锁定，迫使你要么杀死 JVM，甚至重新启动你的机器。

您也可以使用连接池，例如 Apache 的 DBCP，但即便如此，您也应该注意关闭资源，尽管在内部，不同的连接池实现不一定会关闭连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:46:59.807

这是我将所有模型中的 myConenction 字段初始化为的单例模式：

```
public class DatabaseConnection {
    private static final String uname = "*******";
    private static final String pword = "*******";
    private static final String url = "*******************************";

    Connection connection;
    // load jdbc driver
    public DatabaseConnection(){
        try{
            Class.forName("org.postgresql.Driver");
            establishConnection();
        } catch (ClassNotFoundException ce) {
            System.out.println("Could not load jdbc Driver: ");
            ce.printStackTrace();
        }
    }
    public Connection establishConnection() {
        // TODO Auto-generated method stub
        try{
            connection = DriverManager.getConnection(url, uname, pword);
        } catch (SQLException e){
            System.out.println("Could not connect to database: ");
            e.printStackTrace();
        }
        return connection;
    }
}

public class SingletonConnection {

    private static DatabaseConnection con;

    public SingletonConnection(){}

    public static DatabaseConnection instance(){

        assert con == null;
            con = new DatabaseConnection();
        return con;
    }
} 
```

当然，从应用程序到数据库的每个连接都通过一个模型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T07:05:31.620

你是对的，你不需要在每次通话后关闭连接。
请记住，现代数据库实现了内部连接池，但是您的应用程序仍然需要连接和检索连接对象，这就是它现在所做的。
您应该考虑使用数据库连接池 - 有各种 Java 框架可以为您提供这样的解决方案，并且它们将定义（您当然可以配置）何时关闭数据库连接池。

一般来说——你应该问自己你的数据库是只为你的应用程序服务，还是它也为其他应用程序服务——如果它不为其他应用程序服务，你可能会更加“贪婪”并保持连接打开一段时间更长的时间。
我还建议您的应用程序在启动时创建固定数量的连接（在您的配置中使用“最小连接数”值定义它），如果需要，您可以让它增长到最大连接数。

正如我之前提到的——建议的想法已经被各种框架实现，例如——Apache 的[DBCP](http://commons.apache.org/dbcp/)项目。

# jsf-2 - JSF 2.0 Spring Security 3 Weblogic 10.3.5 Jdeveloper

> ID：11202051
> 
> 赞同：1
> 
> 时间：2012-06-26T06:48:52.097
> 
> 标签：jsf-2, spring-security, weblogic-10.x, jdeveloper

我尝试了 JSF 2.0、带有 Jdeveloper 的 Spring Securty 3 和 Weblogic server 10.3.5 的示例。我得到这些异常

java.lang.NoClassDefFoundError: javax/faces/context/FacesContext at org.springframework.web.jsf.el.SpringBeanFacesELResolver.getWebApplicationContext(SpringBeanFacesELResolver.java:90) at org.springframework.web.jsf.el.SpringBeanFacesELResolver.getBeanFactory(SpringBeanFacesELResolver .java:79) 在 org.springframework.beans.factory.access.el.SpringBeanELResolver.getValue(SpringBeanELResolver.java:50) 在 com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176) 在 com。 sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) at org.jboss.el.parser.AstIdentifier.getValue(AstIdentifier.java:44) at org.jboss.el.parser.AstValue.getValue(AstValue. java:63) 在 org.jboss.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186) 在 com.sun.faces.facelets.el。ELText$ELTextVariable.writeText(ELText.java:224) 在 com.sun.faces.facelets.el.E​​LText$ELTextComposite.writeText(ELText.java:148) 在 com.sun.faces.facelets.compiler.TextInstruction.write( TextInstruction.java:85) 在 com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82) 在 com.sun.faces.facelets.compiler.UILeaf.encodeAll(UILeaf.java:183) 在 javax .faces.component.UIComponent.encodeAll(UIComponent.java:1655) at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1655) at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java :399) 在 com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) 在 com.sun.faces 的 com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)。生命周期。Phase.doPhase(Phase.java:101) at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) at javax.faces.webapp.FacesServlet.service(FacesServlet.java:313) at weblogic.servlet .internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227) 在 weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125) 在 weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300) 在weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26) 在 weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56) 在 oracle.security.jps.ee.http.JpsAbsFilter$1.run(JpsAbsFilter .java:111) 在 oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:313) 的 java.security.AccessController.doPrivileged(Native Method) 上。security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:413) 在 oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:94) 在 oracle.security.jps.ee.http。 JpsAbsFilter.doFilter(JpsAbsFilter.java:161) 在 oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:71) 在 weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56) 在 oracle .dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:136) 在 weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56) 在 weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27) 在weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56) 在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3715) 在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681) 在 weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) 在 weblogic.security.service.SecurityManager.runAs (SecurityManager.java:120) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277) 在 weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183) 在 weblogic.servlet.internal.ServletRequestImpl。在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:209) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:178) 运行(ServletRequestImpl.java:1454)AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) 在 weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277) 在 weblogic.servlet.internal .WebAppServletContext.execute(WebAppServletContext.java:2183) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:209) 在 weblogic.work.ExecuteThread。运行（ExecuteThread.java:178）AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) 在 weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277) 在 weblogic.servlet.internal .WebAppServletContext.execute(WebAppServletContext.java:2183) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:209) 在 weblogic.work.ExecuteThread。运行（ExecuteThread.java:178）2183) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:209) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:178)2183) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:209) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:178)

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:34:11.563

最后，我得到了解决方案。那是因为，weblogic 的类加载问题。我在我的项目中创建了 weblogic.xml。之后，我写了

```
 <container-descriptor>
    <prefer-web-inf-classes>true</prefer-web-inf-classes>
 </container-descriptor>. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:34:06.210

您是否为您的项目配置了 JSF 库？

# html - 如何显示图像的某个部分？

> ID：11202054
> 
> 赞同：1
> 
> 时间：2012-06-26T06:48:59.867
> 
> 标签：html, css, image, render, crop

我目前正在开发一个 Rails 应用程序，以简化我在 Minecraft 游戏中主持的活动的过程。对于那些不知道的人，在 Minecraft 多人游戏中，每个人都有自己的皮肤。这就是他们的播放器的样子，而且是一个简单的`*.png`文件。玩家的脸总是在皮肤中的某个位置；我的意思是在某些像素坐标中。

玩家的皮肤是在线托管的，因此，例如，要访问我的皮肤 (lachy2901)，我会转到`http://s3.amazonaws.com/MinecraftSkins/lachy2901.png`. 使用它，我可以在我的网页中访问和嵌入任何特定玩家的皮肤。问题是，我只想显示脸部，让它变大一点。

我的问题是；我是否可以获取此皮肤文件，将其“裁剪”到某个大小和位置，然后渲染它，而不更改原始图像，这是我无法做到的，或者必须存储我自己的版本？

非常感谢您的时间和帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:04:35.327

[查看演示](http://jsfiddle.net/nawazhi/XtAbY/)

HTML

```
<div>
<img src="https://www.example.com/logo.png">
</div>​ 
```

CSS

```
div{
width: 100px;
/*height:100px; specify height also if needed*/
overflow: hidden;
border: solid 1px;
}
img{
position: relative;
top: 20px;
left: -20px;
} 
```

​</p>

# linux - 不支持 Xattrs

> ID：11202056
> 
> 赞同：12
> 
> 时间：2012-06-26T06:49:08.123
> 
> 标签：linux, xattr

我正在尝试对`XATTRs`. 我在启用所有 XATTR 的情况下重新编译了我的内核。

现在，当我包含 xattrs 的标题时：

```
#include <attr/xattr.h> 
```

我收到一个错误**no such file or directory**。我使用的是 UBUNTU 11.10 64 位系统，但我不明白为什么不支持 XATTR？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-26T06:51:53.650

在内核中添加支持不会使头文件神奇地自行出现！安装 libattr1-dev。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-17T16:36:15.030

“attr/xattr.h”被“sys/xattr.h”替换，所以试试这个#include <sys/xattr.h>

# tcp - 在 Go 编程中无法通过 TCP 发送 gob 数据

> ID：11202058
> 
> 赞同：20
> 
> 时间：2012-06-26T06:49:17.130
> 
> 标签：tcp, go, gob

我有一个客户端服务器应用程序，使用 TCP 连接

客户：

```
type Q struct {
    sum int64
}

type P struct {
    M, N int64
}

func main() {
    ...
    //read M and N
    ...
    tcpAddr, err := net.ResolveTCPAddr("tcp4", service)
    ...
    var p P
    p.M = M
    p.N = N
    err = enc.Encode(p)
} 
```

服务器：

```
type Q struct {
    sum int64
}

type P struct {
    M, N int64
}

func main() {
    ...
    tcpAddr, err := net.ResolveTCPAddr("ip4", service)
    listener, err := net.ListenTCP("tcp", tcpAddr)
    ...
    var connB bytes.Buffer
    dec := gob.NewDecoder(&connB)
    var p P
    err = dec.Decode(p)
    fmt.Printf("{%d, %d}\n", p.M, p.N)
} 
```

serve 上的结果是 {0, 0} 因为我不知道如何`bytes.Buffer`从`net.Conn`.

有没有办法通过 TCP 发送 gob 变量？

如果属实，怎么办？还是有其他方法可以通过 TCP 发送号码？

任何帮助或示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-26T07:04:26.113

这是一个完整的例子。

**服务器：**

```
package main

import (
    "fmt"
    "net"
    "encoding/gob"
)

type P struct {
    M, N int64
}
func handleConnection(conn net.Conn) {
    dec := gob.NewDecoder(conn)
    p := &P{}
    dec.Decode(p)
    fmt.Printf("Received : %+v", p);
    conn.Close()
}

func main() {
    fmt.Println("start");
   ln, err := net.Listen("tcp", ":8080")
    if err != nil {
        // handle error
    }
    for {
        conn, err := ln.Accept() // this blocks until connection or error
        if err != nil {
            // handle error
            continue
        }
        go handleConnection(conn) // a goroutine handles conn so that the loop can accept other connections
    }
} 
```

**客户 ：**

```
package main

import (
    "fmt"
    "log"
    "net"
    "encoding/gob"
)

type P struct {
    M, N int64
}

func main() {
    fmt.Println("start client");
    conn, err := net.Dial("tcp", "localhost:8080")
    if err != nil {
        log.Fatal("Connection error", err)
    }
    encoder := gob.NewEncoder(conn)
    p := &P{1, 2}
    encoder.Encode(p)
    conn.Close()
    fmt.Println("done");
} 
```

启动服务器，然后启动客户端，您会看到服务器显示接收到的 P 值。

一些观察可以清楚地说明：

*   当你监听一个套接字时，你应该将打开的套接字传递给一个处理它的 goroutine。
*   `Conn`实现了`Reader`and`Writer`接口，这使得它易于使用：你可以把它给 a `Decoder`or`Encoder`
*   在实际应用程序中，您可能会`P`在两个程序导入的包中包含结构定义

# asp.net - 尽管字段中有空值，但我想为复杂日志触发自定义验证

> ID：11202064
> 
> 赞同：0
> 
> 时间：2012-06-26T06:49:44.817
> 
> 标签：asp.net

我在 asp.net 中有一个要求，必须输入电子邮件 ID 或移动设备，并且我在服务器端有自定义验证器来检查重复项。我的问题是，当我将电子邮件 ID 和移动 ID 保留为空白时，它不会触发我的自定义验证器（这是按照微软的设计）。如果我为电子邮件和电话设置必填字段验证器，它会要求用户输入我不想要的两个。有什么办法可以达到我的要求。

这是我的自定义验证器代码：

```
protected void EmailCheckValidation_ServerValidate(object source, ServerValidateEventArgs args)
        {
            if (txtEmail.Text.Trim() == "" || txtMobile.Text.Trim() == "")
            {
                args.IsValid = false;
                return;
            }
            args.IsValid = !DatabaseManager.DALHelper.IsEmailExists(txtEmail.Text);
        } 
```

# java - 如何在不使用 IDE 的情况下运行 java 应用程序？

> ID：11202065
> 
> 赞同：-1
> 
> 时间：2012-06-26T06:49:45.387
> 
> 标签：java, command-line

我有一个 java 应用程序，其中主类依赖于其他一些类。我可以很好地使用 IDE 运行应用程序。但是当我想通过使用 定位到主类的类文件来从命令行运行应用程序时`java mainClass`，它给了我以下错误[主类名称是`mainClass`]：

```
Exception in thread "main" java.lang.NoClassDefFoundError: mainClass(wrong name: mainfolder/mainClass)

    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$100(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source) 
```

谁能建议我如何在不使用任何 IDE 的情况下运行我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:52:16.510

你需要指明完全限定的名称。例如，如果`MainClass`在包 com.example 下，则应执行`java com.example.MainClass`

你可以[在这里](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/java.html)查看更多。

从文档：

> 默认情况下，第一个非选项参数是要调用的类的名称。应使用完全限定的类名。如果指定了 -jar 选项，则第一个非选项参数是包含应用程序的类和资源文件的 JAR 归档的名称，启动类由 Main-Class 清单头指示。Java 运行时在三组位置搜索启动类和其他使用的类：引导类路径、已安装的扩展和用户类路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:51:08.843

尝试`mainfolder.mainclass`代替`mainfolder/Mainclass`. 此外，主文件夹是包。

确保将所有需要的 jars 放在带有`-cp`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:59:40.563

无论有没有 IDE，java 应用程序总是可以从

```
java -cp classpath EntryClass 
```

如果您使用 IDE 运行应用程序，您使用的 IDE 会为您准备类路径。如果您在没有 IDE 的情况下运行，您应该自己准备整个类路径。

EntryClass 也可以通过类路径找到。

详情请参阅[java - Java 应用程序启动器](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/java.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T07:01:39.963

假设您正在从 /home/flyleaf/app/ 运行您的 java 程序

这将是您需要的命令：

```
javac -classpath /home/flyleaf/app/jar1.jar:/home/flyleaf/app/jar1.jar:/home/flyleaf/app/ com/app/your/mail/class/Main.java 
```

您需要将所需的 jar 文件和获取程序的路径添加到类路径中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T07:02:11.873

行！从包含类文件的文件夹外部通过`main class's class file`with执行 java 命令后得到输出！`package.classname`

此外，找到 jar 文件并执行此命令后，jar 文件也可以正常工作`java -jar jarname.jar`！

谢谢大家！

# javascript - 识别客户端机器中的日期格式

> ID：11202068
> 
> 赞同：1
> 
> 时间：2012-06-26T06:50:18.343
> 
> 标签：javascript, date-format

我的项目要求以客户端机器格式显示日期。我知道 javascript **window.navigator.userLanguage**或**window.navigator.language**中的属性。但它只返回客户端机器的语言，如“en-US”、“en-GB”等。

如果用户自定义机器的日期格式为例如：-dd-MMM-yyyy，有没有办法在 Javascript 中获取该格式？

提前致谢

苏海布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:14:55.243

您可以使用以下[`.toLocaleDateString()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toLocaleDateString)：

```
var yourDate = new Date();
alert(yourDate.toLocaleDateString()); 
```

这不会告诉您的代码用户选择的日期格式是什么，但它可以让您以用户的任何格式显示日期。

在我的电脑上，上述警报“2012 年 6 月 26 日，星期二”。

该[`.toLocaleTimeString()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString)在当时做了同样的事情。

该[`.toLocaleString()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toLocaleString)显示日期*和*时间。

# git - 用于修复错误的 Git 流分支

> ID：11202069
> 
> 赞同：33
> 
> 时间：2012-06-26T06:50:22.627
> 
> 标签：git, git-flow

我一直在使用 git flow 一段时间。我正在寻找分支模型来修复在开发分支中发现的问题和错误。我知道我们可以使用修补程序，但它用于主分支，或用于生产的快速错误修复。

修复开发中的错误不是一项功能。我总是可以重新初始化 git flow 并将默认前缀分支覆盖到 bug/. 但如果我也需要启动新功能，它需要重新初始化。这是一个好的做法还是有一些技术可以处理这个问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-26T12:40:19.537

如果您需要应用的修复只是一个提交修复，我只会在开发中进行而不创建分支，如果它涉及多个提交，您只需使用该`git flow feature`命令。当你完成一个只有一次提交的功能分支时，该软件当前会执行一次`git merge -ff`，这在你的日志中看起来与开发中的一次提交相同。

如果您想在日志中指出此功能将是一个错误修复，您可以将分支命名为“bugfix-missing-parameter”或“issue-34-not-reading-file-properly”

我可以看到功能一词如何暗示“新事物”而不是“修复”，但这只是文字。如果我为修复创建一个新命令，代码看起来与代码完全相同，`git flow feature`所以我看不出有任何好处。

**2015 年 11 月 19 日更新**

从 1.9.0 版开始，gitflow AVH 版有一个错误修复命令。它与功能相同，但分支的前缀是错误修复而不是功能。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-26T07:40:52.227

与(on ) 相反，修复`development`分支上的错误的想法是：[`git flow hotfix`](https://github.com/nvie/gitflow/blob/develop/git-flow-hotfix)`master`

*   您通常会修复开发中的错误`HEAD`（它只是另一个提交，它修复了其他提交引入的一些问题）
*   您`production`在专用分支中对 master 的特定版本/标签（“分支”）进行修补程序，并且您将或不会合并该修补程序（如果修补程序非常特定于某个版本，并且不再相关）后续版本，您根本不会将其合并回来）

所以我认为你不需要一个专门的分支/“ `git flow`”操作：只需做出一个明确的提交并将其推送到`development`分支的顶部。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-10-25T03:02:20.997

`git-flow-avh`是你想要的

**对于 osx：**

*   `brew uninstall git-flow #remove your current`
*   `brew install git-flow-avh #add the update`

**在项目文件夹中：**

*   `git init`
*   您应该在提示中看到 -`Bugfix branches? [bugfix/]`这不是标准的提示`git-flow`
*   开始一个新的错误修复 -`git flow bugfix start <branch name>`

# javascript - 检测iphone底部的滚动

> ID：11202074
> 
> 赞同：-1
> 
> 时间：2012-06-26T06:50:48.447
> 
> 标签：javascript, jquery

我想检测我是否在页面底部。这适用于任何浏览器 - 但不适用于 iPhone。

```
if ($(window).scrollTop() == ($(document).height() - $(window).height())){
alert('on bottom'); 
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:34:27.703

试试这个：

```
$(window).scroll(function () { 
   if($(window).scrollTop() + $(window).height() >= $(document).height()){
       alert('on bottom'); 
   }
}); 
```

# jquery - -webkit-transform：使用位置：绝对

> ID：11202076
> 
> 赞同：0
> 
> 时间：2012-06-26T06:50:56.497
> 
> 标签：jquery, webkit, css-transitions, css-transforms

我有一系列 div`-webkit-transform`从负边距顶部向下滑动到屏幕上的某个位置。问题是，如果没有对它们应用负边距顶部，它们最终会停留在通常会坐的位置。

这意味着如果我显示第二个 div，它上面有一个与第一个 div 大小相同的空白空间。为了解决这个问题，我可以对第二个 div 应用负边距顶部，但我认为那很混乱。

我主要担心的是，如果 dropdiv1 的高度发生变化，那么我将不得不重置 click 函数上的值，以使其他 div 在显示时再次正确排列。

有没有办法修改`-webkit-transform`合并 postion:absolute？

我目前的代码是：

CSS：

```
#dropdiv1 {
    -webkit-transform: translate(0, -3000px);
    -webkit-transition: all ease-in 1s;
}

#dropdiv2 {
    -webkit-transform: translate(0, -3400px);
    -webkit-transition: all ease-in 1s;
}

#dropdiv3 {
    -webkit-transform: translate(0, -4200px);
    -webkit-transition: all ease-in 1s;
} 
```

查询：

```
$('#clickme1').click(
                      function() {
                      $('#dropdiv1').css('-webkit-transform','translate(0, -335px)');
                      });

  $('#clickme2').click(
                        function() {
                        $('#dropdiv2').css('-webkit-transform','translate(0, -2335px)');
                        });

  $('#clickme3').click(
                        function() {
                        $('#dropdiv3').css('-webkit-transform','translate(0, -3300px)');
                        }); 
```

HTML：

```
<ul class="mainmenu">
 <li><a id="clickme1" href="#">Click Me 1</a></li>
 <li><a id="clickme2" href="#">Click Me 2</a></li>     
 <li><a id="clickme3" href="#">Click Me 3</a></li>
</ul>

                <div class="showdata"  id="dropdiv1">
                    Lots of random text....
                </div>

                <div class="showdata"  id="dropdiv2">
                    Lots of random text....
                </div>

                <div class="showdata"  id="dropdiv3">
                   Lots of random text....
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:55:36.610

我真的没有看到动画的任何合乎逻辑的行为`position: absolute`。

这将更容易阅读：

```
#dropdiv1 {
    -webkit-transform: translate(0, -3000px);
    -webkit-transition: all ease-in 1s;
}
#dropdiv1.anim {
    -webkit-transform: translate(0, -335px);
}

#dropdiv2 {
    -webkit-transform: translate(0, -3400px);
    -webkit-transition: all ease-in 1s;
}
#dropdiv2.anim {
    -webkit-transform: translate(0, -2335px);
    -webkit-transition: all ease-in 1s;
}

#dropdiv3 {
    -webkit-transform: translate(0, -4200px);
    -webkit-transition: all ease-in 1s;
}
#dropdiv3.anim {
    -webkit-transform: translate(0, -3300px);
    -webkit-transition: all ease-in 1s;
} 
```

然后改为添加类。

```
$('#dropdiv3').addClass('anim'); 
```

那个，或者`.offset()`在应用之前运行一个`position: absolute`并使用它`top`和`left`动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T03:21:33.817

好的，我找到了一种解决方案。仍然凌乱但没关系：

```
<div id="bigcontainer">
    <ul class="mainmenu">
     <li><a id="clickme1" href="#">Click Me 1</a></li>
                    <div class="showdata"  id="dropdiv1">
                        Lots of random text....
                </div>
 <li><a id="clickme2" href="#">Click Me 2</a></li>
                <div class="showdata"  id="dropdiv2">
                    Lots of random text....
                </div>     
 <li><a id="clickme3" href="#">Click Me 3</a></li>
                <div class="showdata"  id="dropdiv3">
                   Lots of random text....
                </div>
</ul>
</div> 
```

CSS：

```
#bigcontainer {
height: 1500px;/*as big as the bigest dropdiv to enable scrolling*/
}    

#dropdiv1 {
    -webkit-transform: translate(0, -3000px);
    -webkit-transition: all ease-in 1s;
    z-index: 1;
    position: absolute;
}

#dropdiv2 {
    -webkit-transform: translate(0, -3400px);
    -webkit-transition: all ease-in 1s;
    z-index: 2;
    position: absolute;
}

#dropdiv3 {
    -webkit-transform: translate(0, -4200px);
    -webkit-transition: all ease-in 1s;
    z-index: 3;
    position: absolute;
} 
```

不是特别喜欢，但它会做的！

# c# - 需要命名空间管理器或 XsltContext。此查询具有前缀、变量或用户定义的函数

> ID：11202078
> 
> 赞同：1
> 
> 时间：2012-06-26T06:51:12.313
> 
> 标签：c#, asp.net, xml

我有以下 XML

```
<DataTable xmlns = "http://schemas.datacontract.org/2004/07/System.Data">
    <xs:schema
        id = "NewDataSet"
        xmlns = ""
        xmlns:xs = "http://www.w3.org/2001/XMLSchema"
        xmlns:msdata = "urn:schemas-microsoft-com:xml-msdata">
        <xs:element
            name = "NewDataSet"
            msdata:IsDataSet = "true"
            msdata:MainDataTable = "Table"
            msdata:UseCurrentLocale = "true">
            <xs:complexType>
                <xs:choice minOccurs = "0" maxOccurs = "unbounded">
                    <xs:element name = "Table">
                        <xs:complexType>
                            <xs:sequence>
                                <xs:element
                                    name = "Id"
                                    type = "xs:int"
                                    minOccurs = "0"/>
                                <xs:element
                                    name = "Industry"
                                    type = "xs:string"
                                    minOccurs = "0"/>
                                <xs:element
                                    name = "ParentId"
                                    type = "xs:int"
                                    minOccurs = "0"/>
                            </xs:sequence>
                        </xs:complexType>
                    </xs:element>
                </xs:choice>
            </xs:complexType>
        </xs:element>
    </xs:schema>
    <diffgr:diffgram xmlns:msdata = "urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr = "urn:schemas-microsoft-com:xml-diffgram-v1">
        <NewDataSet xmlns = "">
            <Table diffgr:id = "Table1" msdata:rowOrder = "0">
                <Id>1592</Id>
                <Industry>Fortune 100</Industry>
                <ParentId>1810</ParentId>
            </Table>
            <Table diffgr:id = "Table2" msdata:rowOrder = "1">
                <Id>1601</Id>
                <Industry>Oil &amp; Gas Operations</Industry>
                <ParentId>0</ParentId>
            </Table>
             </NewDataSet>
    </diffgr:diffgram>
</DataTable> 
```

我需要 parentID = 0 的节点

但是当我使用以下代码时：

```
 Dim parentNodes As XmlNodeList = xml_node.SelectNodes("/DataTable/diffgr:diffgram/NewDataSet/Table[ParentId=0]") 
```

我收到这个错误

需要命名空间管理器或 XsltContext。此查询具有前缀、变量或用户定义的函数。

请提出解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T05:10:57.613

您需要在 SelectNodes 之前添加以下内容

```
XmlNamespaceManager xmlnsManager = new XmlNamespaceManager(xmldoc.NameTable);
xmlnsManager.AddNamespace("bk", "urn:Books")
xmlnsManager.AddNamespace("pub", "urn:Publisher") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T17:18:29.143

对于显示的示例，它应该是：

```
XmlNamespaceManager xmlnsManager = new XmlNamespaceManager(xmldoc.NameTable);
xmlnsManager.AddNamespace("xs", "http://www.w3.org/2001/XMLSchema")
xmlnsManager.AddNamespace("msdata", "urn:schemas-microsoft-com:xml-msdata") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-22T20:53:52.677

您也可以避免使用 XmlNamespaceManager。该文档可以通过 GetElementsByTagName 遍历，但需要更多注意，您应该已经了解 xmlDocument 的结构：

```
var nodes = document.GetElementsByTagName("xsl:import");
var href =  nodes[0].Attributes["href"];//be sure which node to take 
```

# c - 为什么不创建新文件描述符的类似 accept() 的套接字函数不可用？

> ID：11202080
> 
> 赞同：1
> 
> 时间：2012-06-26T06:51:29.020
> 
> 标签：c, sockets, networking

accept() 被定义为总是创建另一个文件描述符来接受来自客户端的新连接，但是如果事先知道我们只会接受一个客户端和一个连接，为什么还要创建一个新的文件描述符呢？在任何定义的标准中是否有任何描述为什么会出现这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:55:30.300

在设计 API 时，我认为通用性是有价值的。为什么有 2 个 API，一个用于接受潜在的多个连接，一个用于使用更少的文件描述符？后一种情况似乎没有足够高的优先级来证明一个全新的系统调用是合理的，因为我们今天拥有的 API 可以做到，并且您可以使用它来实现您想要的行为。

另一方面，Windows[`AcceptEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737524(v=vs.85).aspx)允许您重新使用以前表示其他不相关的以前连接的套接字的以前的套接字句柄。我相信这是为了避免在断开连接后再次进入内核关闭套接字对性能的影响。不完全是你所描述的，但模糊相似。（虽然意味着扩大而不是缩小。）

**更新：**一个月后，我觉得你为此创造了一个赏金有点奇怪。我认为答案很明确——当前的界面可以满足您的要求，而且真的没有动力为您的边缘案例添加新界面，更不用说标准化了。使用当前接口，您可以在成功`close`后使用原始套接字`accept`，它不会伤害任何人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T00:26:37.657

[RFC 793](http://www.ietf.org/rfc/rfc793.txt)中描述的 TCP 协议描述了术语*socket*和*connection*。*套接字*是 IP 地址和端口号对。连接是*一*对*套接字*。从这个意义上说，同一个*套接字*可以用于多个*连接*。正是在这个意义上，被传递给正在被使用。由于一个*套接字*可用于多个连接，并且传递的 to表示该*套接字*，API 会创建一个新的来表示该*连接*。***`socket``accept()`*`socket``accept()`*`socket`*****

 ***如果您只是想要一种简单的方法来确保为`socket`您`accept()`创建的套接字与您用来进行`accept()`调用的套接字相同，那么请使用包装器 FTW：

```
int accept_one (int accept_sock, struct sockaddr *addr, socklen_t *addrlen) {
    int sock = accept(accept_sock, addr, addrlen);
    if (sock >= 0) {
        dup2(sock, accept_sock);
        close(sock);
        sock = accept_sock;
    }
    return sock;
} 
```

如果您想要一种客户端和服务器相互连接的方式，而不只是`socket`在每一侧创建一个，那么确实存在这样的 API。API 是`connect()`，当你实现[*同时打开*](https://stackoverflow.com/questions/5139808/tcp-simultaneous-open-and-self-connect-prevention)时它就成功了。

```
static struct sockaddr_in server_addr;
static struct sockaddr_in client_addr;

void init_addr (struct sockaddr_in *addr, short port) {
    struct sockaddr_in tmp = {
        .sin_family = AF_INET, .sin_port = htons(port),
        .sin_addr = { htonl(INADDR_LOOPBACK) } };
    *addr = tmp;
}

void connect_accept (int sock,
                     struct sockaddr_in *from, struct sockaddr_in *to) {
    const int one = 1;
    int r;
    setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &one, sizeof(one));
    bind(sock, (struct sockaddr *)from, sizeof(*from));
    do r = connect(sock, (struct sockaddr *)to, sizeof(*to)); while (r != 0);
}

void do_peer (char *who, const char *msg, size_t len,
              struct sockaddr_in *from, struct sockaddr_in *to) {
    int sock = socket(PF_INET, SOCK_STREAM, 0);
    connect_accept(sock, from, to);
    write(sock, msg, len-1);
    shutdown(sock, SHUT_WR);
    char buf[256];
    int r = read(sock, buf, sizeof(buf));
    close(sock);
    if (r > 0) printf("%s received: %.*s%s", who, r, buf,
                      buf[r-1] == '\n' ? "" : "...\n");
    else if (r < 0) perror("read");
}

void do_client () {
    const char msg[] = "client says hi\n";
    do_peer("client", msg, sizeof(msg), &client_addr, &server_addr);
}

void do_server () {
    const char msg[] = "server says hi\n";
    do_peer("server", msg, sizeof(msg), &server_addr, &client_addr);
}

int main () {
    init_addr(&server_addr, 4321);
    init_addr(&client_addr, 4322);
    pid_t p = fork();
    switch (p) {
    case 0:  do_client(); break;
    case -1: perror("fork"); exit(EXIT_FAILURE);
    default: do_server(); waitpid(p, 0, 0);
    }
    return 0;
} 
```

相反，如果您担心性能问题，我相信这些担心是错误的。使用 TCP 协议，您已经必须在客户端和服务器之间的网络上等待至少一个完整的往返行程，因此处理另一个套接字的额外开销可以忽略不计。如果客户端和服务器在同一台机器上，您可能会关心这种开销，但即便如此，如果连接的寿命很短，这只是一个问题。如果连接如此短暂，那么重新设计您的解决方案以使用更便宜的通信介质（例如，共享内存）或对您的数据应用框架并使用持久连接可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T23:04:45.903

因为它不是必需的。如果您只有一个客户，您只需执行一次操作；您有大量的文件描述符可供使用；与网络开销相比，“开销”非常小。作为 API 设计人员，您想要“优化”的情况是当您拥有数千个客户端时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T01:17:17.623

在listen返回的socket和accept返回的socket描述符之间唯一不同的是新socket处于ESTABILISHED状态而不是LISTEN状态。所以你可以重新使用调用listen函数后创建的socket接受其他连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T10:14:19.197

因为 accept() 旨在接受新客户。

它需要三件事，通用套接字描述符必须绑定到特定端口号以在该端口号上服务，以及存储客户端信息的结构和另一个用于存储客户端大小的 int 值。

它返回一个 new_socket_descriptor 用于为服务器接受的特定客户端提供服务。

第一个参数是用于接受客户端的套接字描述符。对于并发服务器，它始终用于接受客户端连接。因此它不应被任何 accept() 调用修改。

因此 accept() 返回的新套接字描述符为新连接的客户端提供服务。

服务器套接字描述符（第一个参数）绑定到服务器属性。服务器属性始终设计为固定类型，即其端口号、连接类型、协议系列都是固定的。因此，一次又一次地使用相同的文件描述符。

另一点是这些属性用于过滤为该特定服务器建立的客户端连接。

对于客户端，每个客户端使用的每个客户端的不同最小 ip 地址的信息都是唯一的，并且这些属性绑定到新的文件描述符，因此总是由 accept() 函数成功返回一个新的文件描述符。

笔记：-

也就是说，您需要一个文件描述符才能让客户端接受，并且取决于您想要接受/服务的最大客户端数量，使用那么多文件描述符来服务客户端。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T09:25:40.053

答案是您的特定连接示例**是**在当前 API 中处理的，并且从一开始就被设计到 API 的用例中。关于如何处理单套接字情况的解释在于最初发明 BSD 套接字接口时套接字程序被设计为工作的方式。

套接字 API 旨在*始终*能够接受连接。基本原则是，当连接到达时，程序应该对是否接受连接有最终决定权。但是，应用程序在做出此决定时也绝不能错过任何连接。因此，API 被设计为仅是并行的，`accept()`并被指定为从 中返回不同的套接字`listen()`，以便`listen()`在应用程序决定刚刚收到的连接请求时可以继续侦听进一步的连接请求。这是一个基本的设计决策，没有记录在任何地方；只是假设套接字程序必须以这种方式工作才能有用。

在线程被发明之前，在类 Unix 系统上实现套接字服务器所需的并行性依赖于`fork()`. 一个新的连接被接受，程序会使用 将自己分成两个相同的副本`fork()`，然后一个副本将处理新连接，而原始副本继续侦听传入的连接尝试。在`fork()`模型中，即使`accept()`返回一个新的文件句柄，也支持仅处理一个连接的用例，并且仅通过让程序的“侦听”副本退出而第二个“接受”副本处理单个连接来实现。

以下伪代码显示了这一点：

```
fd = socket();

listen(fd, 1);  /* allow 1 unanswered connection in the backlog */

switch (fork())
{
    case  0: break;     /* child process; handle connection */
    case -1: exit (1);  /* error. exit anyway. */
    default: exit (0);  /* parent process; exit as only one connection needed */
}

/* if we get here our single connection can be accepted and handled.
 */
accept_fd = accept(fd); 
```

这种编程范式意味着无论服务器接受单个连接，还是停留在处理多个连接的循环中，两种情况下的代码实际上都是相同的。现在我们有线程而不是`fork()`. 但是，由于该*范例*至今仍然存在，因此从来没有必要更改或升级套接字 API。***

# .net - 什么是一 .pdb 文件？

> ID：11202083
> 
> 赞同：20
> 
> 时间：2012-06-26T06:51:35.247
> 
> 标签：.net, pdb

.NET dll 文件中的 PDB 文件是什么，它的作用是什么？通常人们在部署时删除这个文件，只将 dll 文件保存在 lib 文件夹中，但似乎什么也没发生，一切正常......

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-28T12:22:01.123

程序数据库文件**与增量链接和项目状态无关**！PDB 文件用于将 EXE 与 SOURCES 映射。它们用于调试和发布二进制文件。[这里有一篇文章](http://www.codeproject.com/Articles/37456/How-To-Inspect-the-Content-of-a-Program-Database-P)解释了 Executable Image 与其 PDB 文件之间的绑定链接

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-26T06:55:29.813

PDB 文件存储允许您调试应用程序的信息。

通常不部署文件的原因是通常不需要发送它们。如果您想调试应用程序，您始终可以从目录、网络共享或符号服务器加载它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T06:56:50.127

请参阅[http://www.wintellect.com/CS/blogs/jrobbins/archive/2009/05/11/pdb-files-what-every-developer-must-know.aspx](http://www.wintellect.com/CS/blogs/jrobbins/archive/2009/05/11/pdb-files-what-every-developer-must-know.aspx)和[https://stackoverflow.com/a /72190/150984](https://stackoverflow.com/a/72190/150984)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T06:52:47.667

在 .NET 中，它主要只保留局部变量的符号信息（以及 IIRC 的范围信息）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T07:55:27.120

程序数据库 (PDB) 文件包含调试和项目状态信息，允许增量链接程序的调试配置。当您使用 /ZI 或 /Zi 编译 C/C++ 程序或使用 /debug 编译 Visual Basic/C#/JScript .NET 程序时，将创建 PDB 文件。每次创建 OBJ 文件时，C/C++ 编译器都会将调试信息合并到 VCx0.PBD 中。插入的信息包括类型信息，但不包括函数定义等符号信息。因此，即使每个源文件都包含常见的头文件（例如 .

# android - DialogFragment 不关闭

> ID：11202084
> 
> 赞同：3
> 
> 时间：2012-06-26T06:51:38.437
> 
> 标签：android, android-fragments

我四处寻找解决方案，但似乎这不是一个常见问题。

当我的应用程序连接到服务器时，我希望有一个不确定的对话框微调器，然后清除该对话框并在请求完成时显示不同的对话框。我正在使用`Fragment`兼容性包。问题是在显示第二个对话框之前没有移除微调器。

这是我显示对话框的代码，应该删除所有当前对话框：

```
void displayDialog(int type, String message) {
    Log.i(logTag, "displayDialog: " + type);
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    Fragment prev = getSupportFragmentManager().findFragmentByTag("dialog");
    if (prev != null) {
        Log.i(logTag, "removing previous dialog");
        ft.remove(prev); //TODO maybe use ((DialogFragment)dialog).dismiss(); ?
    }
    ft.addToBackStack(null);

    // Create and show the dialog.
    DialogFragment newFragment = DialogHelperFragment.newInstance(type, message);
    newFragment.show(ft, "dialog");
} 
```

这是我用来解决此错误的调​​用代码：

```
displayDialog(DialogHelperFragment.DIALOG_PROGRESS, null);
displayDialog(DialogHelperFragment.DIALOG_PURCHASE_SUCCESS, null); 
```

这是我相应的 LogCat 输出：

```
06-25 13:53:35.497: I/tag(11008): displayDialog: 8
06-25 13:53:35.497: I/tag(11008): displayDialog: 7
06-25 13:53:35.897: I/tag Dialog Helper(11008): Creating Dialog: 8
06-25 13:53:35.907: I/tag Dialog Helper(11008): Creating Dialog: 7 
```

问题是

```
Fragment prev = getSupportFragmentManager().findFragmentByTag("dialog"); 
```

返回 null 因为在再次调用 displayDialog() 时尚未创建或附加第一个对话框。

任何提示都会非常有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T08:53:02.797

我一直在寻找的是

```
getSupportFragmentManager().executePendingTransactions() 
```

[如此处](https://stackoverflow.com/questions/7246479/android-fragmenttransaction-commit-when)所示。看来这笔交易并不急于完成。这个调用加快了事务的通过。我的交易顺序现在如下：

```
06-26 10:45:43.800: I/tag(3303): displayDialog: 8
06-26 10:45:43.800: I/tag(3303): Previous Dialog Fragment is:null
06-26 10:45:43.810: I/tag(3303): displayDialog: 7
06-26 10:45:43.810: I/tag(3303): Previous Dialog Fragment is:DialogHelperFragment{40b44a78 #0 dialogHelp}
06-26 10:45:43.810: I/tag(3303): removing previous dialog
06-26 10:45:44.220: I/tag Dialog Helper(3303): Creating Dialog: 7 
```

所以对话框类型 8 在实际创建之前被删除。

我希望这对那些陷入同样问题的人有所帮助。

**编辑**

看来我也不得不删除`addToBackStack(null)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:55:47.520

抱歉，我并没有真正深入研究您的代码，但在您的 FragmentTransaction 上找不到“提交”调用。您最终需要提交这些事务。

编辑：由于您使用的 DialogFragments 可以通过显示和关闭自行管理事务，因此您应该改用它。

不过，您需要在 Fragment 的 Dialog 对象上调用dismiss。

# c++ - Visual Studio F5、ctrl+F5 或在 Visual Studio 之外运行有什么不同？

> ID：11202088
> 
> 赞同：17
> 
> 时间：2012-06-26T06:52:03.030
> 
> 标签：c++, debugging, visual-c++, visual-studio-debugging

我用 vc++ 编写了一个程序，它在各种情况下具有不同的行为，如下所示。

当我按 F5 运行它时，它在发布模式下正常工作。

当我通过 ctrl + F5 运行它时，当我开始向程序发送数据时它会崩溃。

在视觉工作室之外，它立即崩溃。

我不知道如何找到错误。知道这些案例之间有什么不同吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-19T17:35:40.610

运行 ctrl + F5 将在没有调试器的情况下运行应用程序。( [http://msdn.microsoft.com/en-US/library/8b59xk0f(v=vs.90).aspx](http://msdn.microsoft.com/en-US/library/8b59xk0f(v=vs.90).aspx) ) 这与在发布模式下运行不同。

您可以在调试模式下运行您的应用程序，但无需调试器。这听起来很愚蠢，但如果您想阻止控制台在退出时关闭，这会很有帮助。（[如何阻止控制台在退出时关闭？](https://stackoverflow.com/questions/4118073/how-to-stop-console-from-closing-on-exit)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T06:58:43.340

您需要了解在调试模式和发布模式下运行应用程序的区别。F5 通常会帮助您调试应用程序，而 ctrl + F5 将执行应用程序。发布模式中可能存在一些问题，导致您的 vs 崩溃。阅读[本文](http://www.flounder.com/debug_release.htm)以获得理解。

# php - 弹性滑块图像 由php动态生成。尝试使用替代文字创建字幕

> ID：11202089
> 
> 赞同：1
> 
> 时间：2012-06-26T06:52:06.137
> 
> 标签：php, jquery, flexslider

我的网站上有一个香草 flexslider 安装。滑块通过循环浏览无序列表中的列表项来操作。您只需在列表项后添加一个标题容器即可添加标题。这适用于硬编码图像。

我面临的问题是我的网站有多个部分，每个部分都有不同的幻灯片放映。我没有对 li 元素进行硬编码，而是使用 php 生成它们，这样当用户访问页面时，php 会确定用户正在查看的页面，并将其传递给幻灯片。然后幻灯片会找到正确的图像目录并加载该目录中的所有图像，无论是两个还是二十个。这比对每个幻灯片进行硬编码要容易得多，而且效果很好。

```
 <?php
        $dh = "image/slideShows/$slideShow/";
        $images = glob($dh . "*.jpg");                       
        foreach($images as $image){
            ?><li><img src="<?php echo $image;?>" alt="caption text" /></li><?php
        }
        closedir($dh);
    ?> 
```

我需要让 flexslider 读取每个动态生成的图像的 alt 文本，然后将其放在标题容器中：

```
 <p class="caption">The alt text should show up here.</p> 
```

我试过使用：

```
 $(window).load(function() {
      $('.flexslider').flexslider({
        animation: "fade",
        controlsContainer: "#slideShowContainer",
        start: function(slider) {
         $('.caption').html(this.alt);
        },
      });
    }); 
```

并玩弄 flexslider 的 current.slide 无济于事。我整晚都在寻找这个，我似乎无法弄清楚这个。我希望这里有人可以为我提供缺少的链接。

提前致谢。

**编辑：我想通了，这严重是一个过于复杂的问题。我所要做的就是调用我用于标题内“alt”属性的 EXIF 数据。我不知道为什么我花了这么长时间才意识到这一点。谢谢你们的帮助！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:20:42.120

```
start: function(slider) {
     var slideNumber = slider.currentSlide; 
     var alt = $('.slides img').eq(slideNumber + 1).attr('alt'); 
     $('.caption').html('<p>' + alt + '</p>'); 
    },
    before: function(slider) {
     var slideNumber = (slider.currentSlide + 1); 
     var alt = $('.slides img').eq(slideNumber + 1).attr('alt'); 
     $('.caption').html('<p>' + alt + '</p>'); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:52:50.077

听起来你只有一个`.caption`盒子？并且您希望其内容随每张幻灯片而变化？

我会尝试类似的东西：

```
before: function(slider) {
        var slideNumber = slider.currentSlide;
        var alt = $('.slides img').eq(slideNumber).attr('alt');
        $('.caption').html('<p>' + alt + '</p>');
    });
}, 
```

请注意，`before`在每个幻灯片过渡处运行，而不仅仅是一次`start`

**编辑**

OP 调整了上面的代码（*见下面的评论*），但仍然有“评论中提到的问题，即第一张图片没有在它的第二个和后续滚动上获得标题”

也许我们应该使用`after`而不是`before`？这样我们就不需要这样做`slideNumber+1`（因为`before`这是在上一张幻灯片中制作的。您也许可以删除该函数以支持在调用`start`上方执行此操作`flexslider`

**在`$(window).load(function(){`或`(document).ready(){`：**

```
 var alt = $('.slides img').eq(0).attr('alt'); 
    $('.caption').html('<p>' + alt + '</p>'); 
```

并且在`flexslider()`

```
after:function(slider) { 
    var slideNumber = slider.currentSlide; 
    var alt = $('.slides img').eq(slideNumber).attr('alt'); 
    $('.caption').html('<p>' + alt + '</p>'); 
}, 
```

# c++ - 如何将文件选择限制为单个目录？

> ID：11202090
> 
> 赞同：2
> 
> 时间：2012-06-26T06:52:07.307
> 
> 标签：c++, linux, file, dialog, wxwidgets

我正在使用 Arch Linux 中的 wxWidgets 2.9.3 在 C++ 项目中完成的程序将以“信息亭模式”运行，因此用户应该无法访问甚至查看底层系统文件。我仍然需要让用户在他可能连接的 USB 驱动器上打开和保存文件。我已将其设置为将 USB 驱动器自动安装在 /media 上。

所以我需要一个文件选择对话框，我可以在其中将选择限制为 /media 目录中的文件和文件夹。这样的事情存在吗，还是我必须做一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:14:55.687

**wxFileDialog**没有该功能。如果我是你，我会建立一个像这样的简单对话框：

![自定义文件对话框](../Images/acf45c9d83755f64904e773d072c8780.png)

# c# - C# Form 没有捕捉到任何鼠标事件

> ID：11202092
> 
> 赞同：0
> 
> 时间：2012-06-26T06:52:11.253
> 
> 标签：c#, .net, winforms, events

我有几个控件（标签、自定义文本框、Datagridview）停靠在表单上。当我尝试将 MouseMove 事件与单个控件挂钩时，该事件触发得非常好，但是当我尝试将事件挂钩到窗体本身时，mousemove 事件根本没有响应。这可能是什么原因？

编辑：

这是来自 resources.cs 的事件挂钩

```
this.MouseMove += new System.Windows.Forms.MouseEventHandler(this.LogicSimulationViewerForm_MouseMove); 
```

这是捕获事件时处理的函数

```
private void LogicSimulationViewerForm_MouseMove(object sender, MouseEventArgs e)
        {
           //DOESN'T WORK!!!
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:56:23.497

Winforms 事件不会像在 WPF 或 Html 中那样冒泡。因此，如果控件停靠在窗体上，窗体不会暴露它自己的任何表面，也不会捕获任何鼠标事件。但是，在“水下”，所有 Windows 消息（鼠标移动是 Windows 消息）都会传递表单，因此可以捕获该消息。

**编辑** Tigran 已[链接](https://stackoverflow.com/questions/2063974/how-do-i-capture-the-mouse-mouse-move-event-in-my-winform-application)到使用 IMessageFilter 的一个很好的示例，这使得创建另一个示例有点多余:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:57:39.160

造成这种情况的原因是`WPF`事件`WindowsForms`被处理它的控件“阻止”（`WPF`事件将被推送到父级到可视树，或者相反的方向：从父级到子级）。

因此，要捕获该事件，您需要在应用程序级别对其进行处理，并且不要订阅单个控制事件。

有关如何处理它的更详细示例，请参见此处：

[如何在我的 winform 应用程序中捕获鼠标移动事件](https://stackoverflow.com/questions/2063974/how-do-i-capture-the-mouse-mouse-move-event-in-my-winform-application)

# jquery - jQuery：获取选定的文本及其 DOM 元素

> ID：11202100
> 
> 赞同：1
> 
> 时间：2012-06-26T06:52:41.433
> 
> 标签：jquery, dom, firebug, selectedtext

有很多关于如何在 HTML 页面中获取用户选择的文本的文章。但我的问题是如何获取相应的 DOM 元素而不仅仅是文本？它可能类似于 FireBug，文本节点必须是 DOM 树中的叶子，如何获取元素？

谢谢

# android - 我的 onHandleIntent() 没有被调用？

> ID：11202101
> 
> 赞同：1
> 
> 时间：2012-06-26T06:52:46.470
> 
> 标签：android, android-intent, intentservice

我有两个文件。

**IntentServiceTest1Activity.java**

```
 public class IntentServiceTest1Activity extends Activity {
     /** Called when the activity is first created. */

     public class ResponseReceiver extends BroadcastReceiver {

         public static final String ACTION_RESP = "com.mamlambo.intent.action.MESSAGE_PROCESSED";@Override
         public void onReceive(Context context, Intent intent) {
             // TODO Auto-generated method stub 
             TextView result = (TextView) findViewById(R.id.txt_result);
             String text = intent.getStringExtra(SimpleIntentService.PARAM_OUT_MSG);
             result.setText(text);
         }
     }
     private ResponseReceiver receiver;

     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

         IntentFilter filter = new IntentFilter(ResponseReceiver.ACTION_RESP);
         filter.addCategory(Intent.CATEGORY_DEFAULT);
         receiver = new ResponseReceiver();
         registerReceiver(receiver, filter);

         Button button = (Button) findViewById(R.id.button);
         button.setOnClickListener(new OnClickListener() {
             public void onClick(View v) {
                 EditText input = (EditText) findViewById(R.id.txt_input);
                 String strInputMsg = input.getText().toString();
                 Intent msgIntent = new Intent(IntentServiceTest1Activity.this, SimpleIntentService.class);
                 msgIntent.putExtra(SimpleIntentService.PARAM_IN_MSG, strInputMsg);
                 startService(msgIntent);
             }
         });
     }
 } 
```

**SimpleIntentService.java**

```
 public class SimpleIntentService extends IntentService {

     public static final String PARAM_IN_MSG = "imsg";
     public static final String PARAM_OUT_MSG = "omsg";
     public SimpleIntentService()
     {
         super("SimpleIntentService");
     }
     @Override
     protected void onHandleIntent(Intent intent) {
         // TODO Auto-generated method stub 
         String msg = intent.getStringExtra(PARAM_IN_MSG);
         SystemClock.sleep(30000); // 30 seconds         
         String resultTxt = msg + " " + DateFormat.format("MM/dd/yy h:mmaa", System.currentTimeMillis());

         Intent broadcastIntent = new Intent();
         broadcastIntent.setAction(ResponseReceiver.ACTION_RESP);
         broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
         broadcastIntent.putExtra(PARAM_OUT_MSG, resultTxt);
         sendBroadcast(broadcastIntent);
     }
 } 
```

通过 Log.d()，我可以看到即使服务已启动，也从未调用过 onHandleIntent。我的 Log.d 跟踪在 startService(msgIntent); 之后进行。并停在那里。没有显示来自 onHandleIntent 的 Log.d。怎么了？我该怎么做才能让它发挥作用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T02:56:28.887

I solved mine by adding onStartCommand but not overriding it.

```
 public int onStartCommand(Intent intent, int flags, int startId) //sometimes overriding onStartCommand will not call onHandleIntent
{

    Logger_.logtoFile(tag, "here..!", 1);
    return super.onStartCommand(intent,flags,startId);
} 
```

# javascript - javascript事件不适用于IE7

> ID：11202106
> 
> 赞同：0
> 
> 时间：2012-06-26T06:52:55.877
> 
> 标签：javascript, internet-explorer-7, ie7.js

当我选择列表中的任何选项时，它应该在文本框（所有 html）中打印其值。

![在此处输入图像描述](../Images/0806ca5c61d94d4ca764ae9f1745c77e.png)

我试过

```
stafflist.setAttribute("onchange", "javacript:document.getElementById('id_17_enrolpassword').value = this.value;"); 
```

它适用于 IE8+ 和所有现代浏览器，但不适用于 IE7。

也试过

```
stafflist.addEventListener('onchange',"javacript:document.getElementById('id_17_enrolpassword').value = this.value;",false); 
```

那么我应该在这里做些什么改变呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:55:46.127

IE 仅`onchange`在元素失去焦点时触发该事件 - 如果您要在元素外部单击或单击选项卡到不同的元素，则它应该触发。

您可以通过使用不同的偶数来解决这个问题，例如`onkeypress`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:55:43.827

这样做 -

```
stafflist.onchange = function(){
   document.getElementById('id_17_enrolpassword').value= this.value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:58:54.213

1) 只有当页面上的第一个脚本是 vbscript 时才需要 javascript: 标签。

2）这会更好吗？

```
document.getElementById('stafflist').onchange=function(){
  document.getElementById('id_17_enrolpassword').value = this.value;
} 
```

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T07:08:46.137

我知道这并不能**真正**回答手头的问题，但是，你不能使用 jQuery 之类的东西来编码这些偶数处理吗？

该代码更具可读性（恕我直言），您不必自己处理这些跨浏览器脚本问题。

# ios - 流式音频：应用商店批准必须使用 HTTP 实时流式传输？

> ID：11202109
> 
> 赞同：4
> 
> 时间：2012-06-26T06:52:58.890
> 
> 标签：ios, app-store, appstore-approval, http-live-streaming

我正处于向通过蜂窝和 Wi-Fi 传输音频的商店提交应用程序的前夕，并意识到该应用程序可能面临被拒绝的危险。

该应用程序适用于具有现有流式传输架构的广播电台，设置 HTTP 实时流式传输协议将添加第五和第六个流，这可能是一个非常复杂的设置。因此，为了最大限度地降低电台端的复杂性，应用程序代码目前使用[iphone_radio 开源库](https://github.com/hamedh/iphone_radio)来使流工作。据该库的创建者称，它用于商店中的一个应用程序[Radio Javan](http://itunes.apple.com/us/app/radio-javan/id286225933?mt=8)。

一个快速的谷歌发现许多不同的视频流拒绝案例，但很少有音频。Apple 对 HTTP Live Streaming 的政策对音频不是很明确：

> 如果您的应用通过蜂窝网络传输视频，并且视频在 5 分钟内超过 10 分钟的持续时间或超过 5 MB 的数据，则您需要使用 HTTP 实时流式传输。（渐进式下载可用于较小的剪辑。）
> 
> 如果您的应用通过蜂窝网络使用 HTTP 实时流媒体，您需要提供至少一个 64 Kbps 或更低带宽的流（低带宽流可能是纯音频或带有静止图像的音频）。
> 
> 这些要求适用于提交在 App Store 中分发以用于 Apple 产品的 iOS 应用程序。Apple 可自行决定拒绝或删除不合规的应用程序。

但是，跳出来的一条线是 64 Kbps。当前的流是 128 Kbps，尽管与将它们切换到 HTTP Live Streaming 相比，将它们降低到 64 Kbps 相对微不足道。

是否值得将应用按原样（128 Kbps 流）提交到商店，还是我几乎可以保证因为不使用实时流协议而被拒绝？如果我将流降低到 64 Kbps 会怎样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-17T13:14:34.163

来自 App Store 审查指南：

9.3 蜂窝网络上的音频流内容在 5 分钟内使用的容量不得超过 5MB

9.4 蜂窝网络上超过 10 分钟的视频流内容必须使用 HTTP Live Streaming 并包括基线 64 kbps HTTP Live 流。

[https://developer.apple.com/appstore/resources/approval/guidelines.html#media-content](https://developer.apple.com/appstore/resources/approval/guidelines.html#media-content)

*   因此，App Store 指南没有要求 AUDIO 流具有 64 kbps HTTP Live 流。

*   据此，除非音频流在 5 分钟内使用超过 5MB 的数据，否则甚至不需要使用 HLS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:09:29.740

我在商店里有一个应用程序，只有用于音频的 http 实时流媒体。Apple 的批准没有问题，但我们仅使用 48kbps 流。

# linux - 如何知道是谁向被跟踪的进程发送了信号？

> ID：11202112
> 
> 赞同：1
> 
> 时间：2012-06-26T06:53:19.847
> 
> 标签：linux, signals

我正在使用 strace 来调试问题。我跟踪的进程将像这样退出： kill(-27335, SIGTERM) = 0 --- SIGTERM (Terminated) @ 0 (0) ---

27335 是我跟踪的进程的 PID。

有没有人知道谁将 SIGTERM 发送到进程？

# java - 休眠：SetMaxResults 不适用于 java.util.Map

> ID：11202114
> 
> 赞同：2
> 
> 时间：2012-06-26T06:53:23.123
> 
> 标签：java, hibernate, hashmap

我正在使用休眠 3.0。以下是为获取数据而编写的标准。

```
1\. Criteria criteria = session.createCriteria(Document.class);
2\. criteria.setMaxResults(10);
3\. criteria.setFetchMode("metadata",FetchMode.join);
4\. criteria.setFetchMode("activitySchedules", FetchMode.JOIN);
5\. criteria.setFetchMode("activitySchedules.activities",FetchMode.JOIN); 
6\. criteria.setResultTransformer(criteria.DISTINCT_ROOT_PROPERTY);
7\. criteria.list(); 
```

在此条件下，**setMaxResults(10)**不起作用。对于定义的 10 个限制，它只给出 1 个结果。对于 20，它给出 2，同样。如果我评论第 4 行，结果将以正确的方式出现。我没有得到这种奇怪的行为。这是获取 MAP 的问题吗？如果有人知道这件事，请告诉我。

**豆结构：**

**文档.java**

```
private NormMaster metadata;

private Map<TransactionFlowEnum, ActivitySchedule> activitySchedules;

 public NormMaster getMetadata(){
         return metadata;
}

public void setMetadata(NormMaster metadata){
   this.metadata = metadata;
}

public Map<TransactionFlowEnum, ActivitySchedule> getActivitySchedules() {
        return activitySchedules;
    }

 public void setActivitySchedules(
        Map<TransactionFlowEnum, ActivitySchedule> activitySchedules) {
        this.activitySchedules = activitySchedules;
    } 
```

**ActivitySchedule.java**

```
private List<Stage> activities;

public List<Stage> getActivities() {
    return activities;
}

public void setActivities(List<Stage> activities) {
    this.activities = activities;
} 
```

**规范大师.java**

```
private String name;

public void setName(String name){
 this.name = name;
}

public return getName(){
 return name;
} 
```

**编辑：**如果我在 Document.java 中再添加一个字段并获取不包括 activitySchedules 的元数据，那么正确的数据就会到来。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T07:30:07.387

`setMaxResults()`限制来自执行的 SQL 查询的 JDBC 结果集返回的行数。它不限制从 Criteria 查询返回的对象数量。

对于没有任何 join fetch 的简单请求，这两个数字是相同的。但是对于在 toMany 关联上进行连接提取的查询，数字不是。例如，如果一个文档有 2 个计划，并且每个计划有 3 个活动，那么您的查询将针对该单个文档返回 6 个 JDBC 行。因此，如果您致电`setMaxResults(4)`，您将从查询中获得唯一一份不完整的文档。

`setMaxResults()`不应与此类查询一起使用。一种解决方法是执行仅返回文档 ID 的查询，并应用于`setMaxResults()`此查询。获得 10 个 ID 后，使用 fetch 连接执行第二个查询，返回具有这 10 个 ID 之一的文档 ( `where document.id in (:documentIds)`)。

# perl - 如何在 perl 中发出包含 application/x-www-form-urlencoded 数据的 HTTP PUT 请求？

> ID：11202123
> 
> 赞同：4
> 
> 时间：2012-06-26T06:54:26.743
> 
> 标签：perl, http, rest

如何在 Perl 中发出包含`application/x-www-form-urlencoded`数据的 HTTP PUT 请求？

这是一个有效的等效 POST 请求：

```
my $ua       = new LWP::UserAgent;
my $response = $ua->post(
    $url,
    {
        "parameter1" => $value1,
        "parameter2" => $value2
    }
); 
```

这将如何作为 PUT 请求完成？`put`LWP中没有方法，其中的[`PUT`函数`HTTP::Request::Common`](http://p3rl.org/HTTP::Request::Common#PUT-url)不接受表单数据。

有关是否允许带有表单数据的 PUT 请求的讨论，请参阅[HTTP PUT 请求是否可以将 application/x-www-form-urlencoded 作为 Content-Type？](https://stackoverflow.com/questions/6306185/can-http-put-request-have-application-x-www-form-urlencoded-as-the-content-type)

这是一个 PUT 请求的示例，但它不包含包含表单数据的代码：[How to make a HTTP PUT request using LWP?](https://stackoverflow.com/questions/8463187/how-to-make-a-http-put-request-using-lwp)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T07:25:52.983

只需发出`POST`-request 并将其方法更改为`PUT`：

```
use HTTP::Request::Common;

my $req = POST('http://example.com/', Content => [param => 'value']);

$req->method('PUT');

say($req->as_string); 
```

# html - 网站更新疑惑！！需要帮助

> ID：11202125
> 
> 赞同：0
> 
> 时间：2012-06-26T06:54:36.120
> 
> 标签：html, web, content-management-system

我正在开发一个新闻网站..我已经完成了布局和前端工作..我创建的新闻网站具有特定的布局，其中最新新闻在右上角排序，头条新闻显示在左角..和我的疑问从这里开始.. 每次有最新消息时我都必须修改 html 表吗？...我也必须更改右上角的最新消息吗？我不知道什么是网络 CMS .. 还有如何在我的网站上发布新文章？每当我发布新文章时，我是否必须创建一个 html 文件？请帮帮我:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:03:00.947

如果您想学习动态编程语言等，如 PHP、MySQL 以使您的网站动态化，然后希望实现它，那很好。去上面说的评论。

否则我会说，如果您的目标是动态发布新内容、标题、新闻等，而不会在您的网站上出现任何问题和错误。然后使用开发良好且著名的 CMS。

此链接可以帮助您获得 CMS [Basic intro on CMS的基本介绍](http://www.aliencoders.com/content/cms-complete-package-web-designing)

尝试使用 wordpress 或 Joomla 或 Drupal。如果你对基本的东西没问题，那么我可以指导下一个级别:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:58:36.960

如果你想这样做的话，你绝对可以每次都更新 HTML 文件......

但是，如果您要构建自己的自定义动态网站，那么您还有很长的路要走。您可能应该首先对 PHP 和 MySql 进行大量研究。网上有很多关于这些的好资源，它是服务器端脚本语言，有助于创建一个动态网站，如您所描述的。

您也可以创建一个博客博主，它可以为您处理几乎所有的事情，由您自己来生成内容。

祝你好运！

# sql-server-2008 - T-SQL - 即时计算布尔字段

> ID：11202126
> 
> 赞同：3
> 
> 时间：2012-06-26T06:54:37.743
> 
> 标签：sql-server-2008, tsql

我正在使用 SQL Server 2008。

假设我有两个假设的表格，如下所示：

```
CREATE TABLE [Department](
    [Id]            int    IDENTITY(1,1),
    [ManagerId]     int    NULL, -- << Foreign key to the Person table
    -- other fields
)

CREATE TABLE [Person](
    [Id]            int    IDENTITY(1,1),
    [DepartmentId]  int    NOT NULL, -- << Foreign key to the Department table
    -- other fields
) 
```

现在，我想从`[Person]`表中返回一个行列表（即给定部门的员工列表）。这些行中只有一个（或零个）与表中的`[ManagerId]`字段匹配`[Department]`。而且我想用一个布尔字段动态标记匹配的行......结果行集将类似于以下架构：

```
[Id]        INT,
[IsManager] BIT NOT NULL DEFAULT 0,
-- other fields 
```

匹配时该`[IsManager]`字段将为 TRUE 。`[Department].[ManagerId]``[Person].[Id]`

这对于两个（或更多）查询来说是相当微不足道的。但是我怎样才能使用**单个 SQL 语句**来实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T06:58:45.940

在您的子句中添加一个表达式，`SELECT`将实际人员`Id`与`ManagerId`人员部门的人员进行比较

```
SELECT
    Person.Id,
    Department.Id,
    CAST(CASE WHEN Person.Id=Department.ManagerId THEN 1 ELSE 0 END AS BIT) AS IsManager
FROM Person
INNER JOIN Department ON Person.DepartmentId=Department.Id
WHERE Person.DepartmentId=<CONDITION> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:12:45.847

从 Person 表到 ManagerId 上的部门表的左连接将为您解决问题：

```
SELECT p.Id AS PersonId, d.Id AS DepartmentId, 
    CAST(CASE WHEN d.Id IS NULL THEN 0 ELSE 1 END) AS IsManager
FROM Person p LEFT JOIN Department d ON p.Id = d.ManagerId 
```

工作原理：Person 中的所有行都返回，无论 ManagerId 上是否存在相应的 Department 匹配。对于那些没有匹配部门的人员记录，结果集中的所有部门字段都是 NULL，因此我们可以使用它来确定是否存在匹配项。

请注意，如果一个人是多个部门的经理，此查询可能会返回重复的个人记录。为此，我已将 DepartmentId 添加到列表中。如果您需要唯一的人员列表及其 IsManager 标志，请从 select 子句中删除 d.DepartmentId 并在选择后插入 DISTINCT：

```
SELECT DISTINCT p.Id AS PersonId, 
    CAST(CASE WHEN d.DepartmentId IS NULL THEN 0 ELSE 1 END) AS IsManager
FROM Person p LEFT JOIN Department d ON p.Id = d.ManagerId 
```

# iphone - 当我在 UISplitViewController 中将 iPad 转为纵向模式时，调整 detailViewController 的 pagecontrolview 的大小

> ID：11202137
> 
> 赞同：0
> 
> 时间：2012-06-26T06:55:30.450
> 
> 标签：iphone, ios, ipad, uisplitviewcontroller, master-detail

我正在研究 UISplitViewController，我在宽度为 700 的详细视图中有一个 pageController，我在 pageController 上添加了一些 imageViews，当我将 iPad 转到纵向模式时如何调整 pageController 的大小，以便即使 imageViews 也应该适合宽度768.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:14:10.300

您可以使用自动调整大小的蒙版。当您正确使用 autoresizingMask 时，该视图控制器将在您更改方向时自动调整大小。

让我知道这个答案是否对您有帮助..

# android - 按下时如何更改主页按钮高亮颜色

> ID：11202138
> 
> 赞同：13
> 
> 时间：2012-06-26T06:55:33.180
> 
> 标签：android, android-actionbar, actionbarsherlock

我使用 Sherlock 操作栏

1，当我按下从蓝色到红色时，我想将主页按钮 BG

2，我想更改 HomeAsUp 图标（白色箭头）有什么想法吗？

![在此处输入图像描述](../Images/92196e3d20129524b7d61d264cc860b2.png) 主页按钮

![在此处输入图像描述](../Images/cb4e60687a7061ee7e33993cdd527c9b.png) 按下

这里创建了这个动作条码

```
extends SherlockFragmentActivity

public ActionBar actionBar;

this.actionBar = this.getSupportActionBar();
this.actionBar.setDisplayShowHomeEnabled(true);
this.actionBar.setHomeButtonEnabled(true);
this.actionBar.setDisplayHomeAsUpEnabled(true); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-26T07:22:28.810

您可以通过在主题中指定自己的`actionBarItemBackground`属性来更改此设置。

例如，

```
<style name="Theme.MyTheme" parent="Theme.Sherlock">
    <item name="android:actionBarItemBackground">@drawable/my_cool_drawable</item>
    <item name="actionBarItemBackground">@drawable/my_cool_drawable</item>
</style> 
```

然后`Theme.MyTheme`在清单中为您的活动指定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:06:19.293

通常当您想在 Android 中创建此行为时，您需要创建一个新`selector`文件（文件夹中的 xml `/drawable`）。

在该文件中，您要做的是为按钮选择不同的状态并为它们选择不同的图像。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/pressed_image" android:state_pressed="true"></item>
    <item android:drawable="@drawable/regular_image"></item>

</selector> 
```

**编辑：**

当然，您需要在 actionbarSherlock 库中执行此操作。

# iphone - 如何将数据从文档显示到 iphone 表格视图？

> ID：11202145
> 
> 赞同：-5
> 
> 时间：2012-06-26T06:55:59.110
> 
> 标签：iphone, objective-c, uitableview

我有医院名单。该列表是一个word文档，其中我有很多医院的名称。我必须在表格视图中显示它们。我必须对名称进行硬编码，或者有其他方法可以从文档中获取名称，然后显示在`UITableView`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:01:48.343

制作一个 plist 并保存您所有的医院名称.. 然后获取它并在您的表格视图中轻松显示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:57:44.477

如果您只有这个文档，并且您实际上可以打开该文档并对其进行硬编码，我建议您将其转换为 plist，使用一些实用程序，甚至手动，阅读 word 将需要时间，我不建议这样做只需 1 个文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T07:03:11.997

创建一个`NSArray`医院名称并在`UITableview`.

# android - 应用小部件无法在 ICS (Android 4.0) 中获得焦点？

> ID：11202146
> 
> 赞同：2
> 
> 时间：2012-06-26T06:56:07.680
> 
> 标签：android, widget, focus, android-4.0-ice-cream-sandwich

我有在 Froyo 上工作但在 ICS 上工作的完全相同的代码。然而，我仍然可以看到一些来自 ICS 的默认应用小部件，这些小部件可以从 d-pad 获得焦点，例如**书签**和**音乐播放列表**。

我正在做一个关于 ICS 的项目，该项目将显示一个网格视图，该视图需要集中注意力并通过 D-pad 与用户进行交互。

有人对此有任何想法吗？

# algorithm - 特殊排序

> ID：11202150
> 
> 赞同：2
> 
> 时间：2012-06-26T06:56:10.593
> 
> 标签：algorithm

有一个外部整数数组，您可以在 O(1) 时间内对其执行以下操作。

1.  get(int i) - 返回外部数组中索引“i”处的值。
2.  reverse( int i, int j) - 返回索引位置 i 和 j（包括 i 和 j）之间的数组的反转。

反向示例：考虑一个数组 {1,2,3,4,5}。reverse(0,2) 将返回 {3,2,1,4,5}，reverse(1,4) 将返回 {1,5,4,3,2}。

编写代码对外部数组进行排序。提及您的代码的时间和空间复杂度。

显然我们可以使用快速排序或归并排序在 nlogn 中进行排序。但是考虑到风景，我们能做得更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:34:47.467

对数组进行排序就是找到将其恢复到排序状态的排列或洗牌。换句话说，您的算法确定`n!`必须应用哪些可能的排列，并应用它。由于您的算法通过询问是 - 否问题（是 cell`i`小于还是大于 cell `j`？）来探索数组，所以它遵循具有 depth 的隐式决策树`log(n!) ~ n*log(n)`。

**这意味着将`O(n*log(n))`调用以`get()`确定如何对数组进行排序。**

一个有趣的变体是确定对`reverse()`数组进行排序所需的最小调用次数，一旦你知道你需要什么排列。我们知道这个数小于`n-1`，可以通过选择排序来实现。最坏情况数可以小于`n-2`吗？我必须说我不知道​​...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:07:32.180

我会尝试将问题简化为基于经典`swaps()`的排序算法。

在下文中，我们假设不失一般性`j>=i`：
请注意，`swap(i,j) = reverse(i,j)`对于每个`j <= i+2`，反向子数组仅在有 3 个或更少元素时交换边
现在，对于任何`j>i+2`- 您只需要`reverse()`数组，通过交换边 -然后反转“中间”以使其恢复原始状态，因此您得到：`swap(i,j) = reverse(i,j) ; reverse(i+1,j-1)`

使用刚刚构建的`swap()`，您可以使用任何使用交换的基于比较的算法，例如[快速排序](http://en.wikipedia.org/wiki/Quicksort)，即`O(nlogn)`. 复杂性仍然存在`O(nlogn)`，因为每个操作`swap()`最多需要 2 个`reverse()`操作，即`O(1)`

**编辑：**注意：这个解决方案适合*原始*问题（在编辑之前），它要求*一个解决方案*，而不是比快速排序/合并排序更好地优化它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T07:07:32.617

假设您想最小化外部操作的数量`get`并且`reverse`：

*   `get`通过调用n 次将所有整数读入内部数组
*   进行内部排序（n 登录内部操作）并计算排列
*   `reverse`通过最多调用 n 次对外部数组进行排序

这具有 O(n) 时间和 O(n) 空间复杂度。

**编辑**以回应匿名反对票：在谈论时间复杂度时，您总是必须说明要计算哪些操作。在这里我假设，只有外部操作有成本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T07:10:39.310

基于get(int i)和reverse(int i, int j)，我们无法优化代码。它将具有相同的复杂性。

# javascript - Javascript POST 上的 NS_Error_Failure

> ID：11202153
> 
> 赞同：8
> 
> 时间：2012-06-26T06:56:26.550
> 
> 标签：javascript

我在使用一些 javascript 时遇到了问题。下面的代码片段创建了一个简单的发布请求，但它总是抛出`NS_Error_failure`异常（页面底部的详细信息）。谁能告诉我这段代码有什么问题？

```
window.onload = function () {

    alert('0');
    try {
        var url = "Some URL";
        var request = CreateHttpRequest();
        if (request) {
            alert('1');
            request.open("POST", url, false);
            request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            alert('2');
            request.send('');
            alert('3');
        }
    }
    catch (err) {
        alert(err);
    }
} 
```

```
 [Exception... "Component returned failure code: 0x80004005 (NS_ERROR_FAILURE)"
     nsresult: "0x80004005 (NS_ERROR_FAILURE)"  
     location: "JS frame :: file:///C:/Users/Ben/Desktop/test.html :: <TOP_LEVEL> :: line 44"  data: no] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-31T07:31:58.140

我发现了同样的问题，当我将所有内容发送到 iframe 时，当我将“名称”添加到标签时问题解决了，也许你的脚本无法访问目标

```
<iframe id="iframe_execute" name="iframe_execute" frameborder="1" height="400" width="400"></iframe> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T07:00:51.930

有的话可以看到这个错误，

1.  找不到网址
2.  您的服务器代码或调用的 URL 有错误。

您共享的代码中没有任何明显的问题。请参考这个[链接](http://helpful.knobs-dials.com/index.php/0x80004005_%28NS_ERROR_FAILURE%29_and_other_firefox_errors)

# ruby-on-rails - 为什么我对每个错误都没有方法

> ID：11202156
> 
> 赞同：0
> 
> 时间：2012-06-26T06:56:46.023
> 
> 标签：ruby-on-rails

我创建了一个应用程序，用户可以创建一个主题，其他人可以发布他们对该主题的评论。我现在可以创建一个主题并 post.form 工作，但是当我发表评论时，我得到

```
NoMethodError in Posts#create 

undefined method `each' for nil:NilClass

Extracted source (around line #2):

1: 
2: <% for topic in @topics do %>  
3:   <li><%=link_to topic.title, topic_path(topic) %></li>  
4: 
5:  <%= will_paginate @topics %> 
```

我的帖子控制器是：

```
class PostsController < ApplicationController
    before_filter :signed_in_user, only: [:create, :destroy]
  before_filter :correct_user, only: :destroy

    def create
        @post = current_user.posts.build(params[:post])
        if @post.save
            flash[:success] = "Konu oluşturuldu!"
                redirect_to topic_path(topic)
        else
            render 'static_pages/home'
        end
    end

  def destroy
    @post.destroy
    redirect_to root_path
  end
  private

    def correct_user
      @post = current_user.posts.find_by_id(params[:id])
      redirect_to root_path if @post.nil?
    end
end 
```

当我创建一个帖子时，它会重定向到 localhost/posts ......虽然我希望它留在那个主题中。我怎样才能正确重定向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:11:41.363

我认为使用它`@topics.each do`而不是`for topic in @topics do`.

基本上，在您的创建操作中，您似乎没有分配`@topics`任何价值。所以它将为零。不存在试图枚举 nil 的定义方法，这就是为什么 ruby​​ 开始研究 Nil 类的 method_missing 方法。在那里没有找到任何处理，会生成以下异常。

我建议您为`@topics`

# ios - 如何使用 ExternalAccessory.framework 获取蓝牙设备列表

> ID：11202161
> 
> 赞同：0
> 
> 时间：2012-06-26T06:57:13.560
> 
> 标签：ios, bluetooth

如何使用 ExternalAccessory.framework 获取蓝牙设备列表，而不是使用 Gamekid 框架、核心蓝牙框架。请给我写代码示例

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:23:37.233

外部附件框架仅获取列表苹果设备...由 Apple

> 外部附件框架旨在允许 iOS 应用程序仅与在 Apple 的 MFi 被许可人计划下开发的硬件附件进行通信。兼容 MFi 的配件可以作为有线设备实现，这意味着它们插入 iOS 设备的 30 针连接器，或者作为无线设备，它们使用蓝牙作为通信通道。无论哪种方式，使用外部附件框架的应用程序都不会被通知附件的存在，除非附件将自己标识为符合 MFi 标准，即它是专门设计用于与 iOS 应用程序交互的。

如果您只想获取列表**Apple 设备**，请使用示例代码

```
NSArray *accessories = [[EAAccessoryManager sharedAccessoryManager] 
                        connectedAccessories]; 
for (EAAccessory *obj in accessories)
{ 
    NSLog(@"Found accessory named: %@", obj.name);
} 
```

您必须在应用的 Info.plist 文件中包含 UISupportedExternalAccessoryProtocols 键。

```
<key>UISupportedExternalAccessoryProtocols</key> 
```

此键包含一个字符串数组，用于标识您的应用支持的通信协议。

# asp.net-mvc - 使用 jquery 调用参数化 MVC 4 Web API 时出错

> ID：11202162
> 
> 赞同：0
> 
> 时间：2012-06-26T06:57:15.923
> 
> 标签：asp.net-mvc, c#-4.0, jquery, asp.net-web-api

我创建了一个 MVC 4 Web API，它需要一个参数。当我通过将 url 放入浏览器中直接调用它时，这很好用。现在我正在尝试通过 aspx 页面上的 jquery 使用数据和完整的 url（带参数）调用此 API。我的代码看起来像

```
$.ajax
            ({
                type: "GET",
                url: 'http://MySite/Test/api/product/?context=001',
                dataType: "jsonp",
                //data:{"context": "001")},
                crossDomain : true,
                async:false,
                success: function (result) {
                    alert(result);
                },
                error: function (data) {
                    alert(data);
            }
            }); 
```

但我总是在“错误”函数中得到响应为 [object Object]。当我展开返回的对象时，我发现以下

```
Object
abort: function (a){a=a||"abort",p&&p.abort(a),w(0,a);return this}
always: function (){i.done.apply(i,arguments).fail.apply(i,arguments);return this}
complete: function (){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this}
done: function (){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this}
error: function (){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this}
fail: function (){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this}
getAllResponseHeaders: function (){return s===2?n:null}
getResponseHeader: function (a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c}
isRejected: function (){return!!e}
isResolved: function (){return!!e}
overrideMimeType: function (a){s||(d.mimeType=a);return this}
pipe: function (a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()}
progress: function (){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this}
promise: function (a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}
readyState: 4
setRequestHeader: function (a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this}
state: function (){return e}
status: 200
statusCode: function (a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this}
statusText: "success"
success: function (){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this}
then: function (a,b,c){i.done(a).fail(b).progress(c);return this} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:15:13.550

我遇到了一篇关于 Stackoverflow 本身的类似文章，其中谈到了从 jQuery 调用 MVC 4 Web API。以下是相同的链接，

[JSONP 与 ASP.NET Web API](https://stackoverflow.com/questions/9421312/jsonp-with-asp-net-web-api)

# sql-server-2008 - 更新单列的更新查询

> ID：11202163
> 
> 赞同：0
> 
> 时间：2012-06-26T06:57:16.127
> 
> 标签：sql-server-2008

在我的数据库中，我有一个客户表，其中包含一个名称字段，其中包含单个列中的客户名称（名字和姓氏）现在我想编写一个搜索名字并更新其姓氏的查询。
如果有人帮助我，我将不胜感激。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:01:13.570

这并不像你想象的那么容易。如果有人有第二个名字，你怎么办？在哪里剪？

这就是为什么您通常对数据库结构进行规范化并为名字创建一列并为姓氏创建一列的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:31:52.577

这是我**试过的**

```
create table employeedemo
(id int, Name varchar(50), Location varchar(20)) 
```

* * *

```
insert into employeedemo values('1','Amir khan','India');
insert into employeedemo values('2','Salman khan','India');
insert into employeedemo values('3','Sharuk khan','India');
insert into employeedemo values('4','Saif khan','India');
insert into employeedemo values('5','Amit sarna','India');
insert into employeedemo values('6','Sanjay Dutt','India');
insert into employeedemo values('7','Sunny Deol','India'); 
```

* * *

```
update employeedemo
set name= 'Saif pataudi'
where SUBSTRING(Name, 1, CHARINDEX(' ',Name))='Saif' 
```

* * *

注意：**名称列**必须遵循语法 as (firstname space lastname) n 如果有帮助，请投赞成票:)

# iphone - 在iPhone中将句子中每个单词的第一个字母转换为大写

> ID：11202167
> 
> 赞同：3
> 
> 时间：2012-06-26T06:57:40.003
> 
> 标签：iphone, ios, ios4

我有字符串：

> 我是个坏孩子。

我想将该字符串转换为：

> 我是个坏男孩。

我所尝试的仅适用于单词的第一个字符。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-26T07:45:29.417

这是解决方案：

```
NSString *str=@"i am a bad Boy";
    str=[str capitalizedString];
NSLog(str); 
```

输出将是：

```
I Am A Bad Boy. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T07:00:08.903

使用 `capitalizedString`方法。

此方法返回：

> 接收器中每个单词的第一个字符的字符串更改为其相应的大写值，所有剩余字符设置为其相应的小写值。

您可以查看`NSString`文档以获取更多详细信息 - [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

# python - 通过单独定义检索条目值

> ID：11202168
> 
> 赞同：0
> 
> 时间：2012-06-26T06:57:41.220
> 
> 标签：python, if-statement, self

我在使用以下代码时遇到问题（我是 Python 相关的大多数事情的初学者），并且不确定如何在这个意义上使用“自我”。我只是想在单击开始按钮时检索在我创建的条目框中给出的任何值（请记住，根据 if 语句，框的数量会有所不同）。

但是，我遇到了未定义“自我”等错误。有什么方法可以保留我制作的循环并取回所有值，还是有更简单的方法来编写它？

```
def ChBox(self, ch):

    column = 0
    if ch == "List":
        i = [0, 1, 2, 3]

        for i in i:
            ch_title = Label(ch_frame, text='Value %g'% float(i+1), bg='white', borderwidth=0, width=0)
            ch_title.grid(row=0, column=column+i, sticky="nsew", padx=1, pady=1)

            self.box = Entry(ch_frame, bg='white', borderwidth=0, width=0)
            self.box.grid(row=1, column=column+i, sticky="ew", padx=1, pady=1)

    elif ch == "Inter":
        i = [0, 1]
        ch_title1 = Label(ch_frame, text='Min Value', bg='white', borderwidth=0, width=0)
        ch_title1.grid(row=0, column=column, sticky="nsew", padx=1, pady=1)
        ch_title2 = Label(ch_frame, text='Max Value', bg='white', borderwidth=0, width=0)
        ch_title2.grid(row=0, column=column+1, sticky="nsew", padx=1, pady=1)
        for i in i:
            self.box = Entry(ch_frame, bg='white', borderwidth=0, width=0)
            self.box.grid(row=1, column=column+i, sticky="nsew", padx=1, pady=1)

def StartBut(self):
    value = self.box.get()

but1 = Button(frame_but, text='Start', command =StartBut(self)) 
```

更新：事实上，我想做的是返回盒子值而不必使用类或 self 如果可能的话？我担心现在在我的代码中引入类和自我等会花费太多时间来重写它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:02:46.157

`self`仅在类中才有意义——这是引用类的“当前”实例的传统方式，即您实际使用的实例。在类之外，您只需使用普通参数名称。

我不知道将您的函数作为类的方法是否有意义`Button`。否则，您应该将您的`Button`实例显式传递给每个函数。

（还要注意`for i in i`根本没有意义 - 您不能将迭代器称为与您正在迭代的列表相同的东西。做`for x in i`，或者，甚至更好，`for x in range(4)`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:09:11.553

好的，刚刚从阅读评论中意识到`Button`这里的课程来自 tkinter。这稍微改变了问题的性质。

构造函数的`command`参数`Button`是一个没有参数的可调用对象。这意味着如果你只是传入一个函数，你实际上不能向该函数传递任何参数。因此，如果您希望该函数能够访问 but1 实例，那么您将需要执行其他操作。

一件事是将整个事物包装在一个类中，例如：

```
class MyButton(object):
  def __init__(self, frame_but, text):
    self.but = Button(frame_but, text, command=self.StartBut)

  def StartBut(self):
    value = self.but.box.get() 
```

这一切都取决于你想要达到的目标，以及你是如何设计事物的。

另外，我不确定 ChBox 函数试图实现什么。

# 旧答案

在 python 中，“self”通常是用于类方法的参数名称。

例如，如果您有以下情况：

```
class Foo(object):
  def echo(self, a):
    return a 
```

然后当你写：

```
f = Foo()
f.echo(2) 
```

对 的调用`f.echo(2)`，它被翻译成类似的东西`Foo.echo(f, 2)`，因此实例`f`成为第一个参数，因此绑定到`self`，而 2 是第二个参数，绑定到`a`。事实上，你实际上可以调用`Foo.echo(f, 2)`它，它会做与`f.echo(2)`.

我不确定你的`Button`班级在做什么，但假设它做了类似的事情：

```
class Button(object):
  ...
  def hit(self):
    self.command() 
```

而您想要实现的是将当前`Button`实例传递给命令，您应该改为：

```
class Button(object):
  ...
  def hit(self):
    self.command(self) 
```

并在构造实例时：

```
but1 = Button(frame_but, text='Start', command =StartBut) 
```

您可能还想重命名 StartBut 的参数，因为`self`它通常仅用作方法的第一个参数：

```
def StartBut(button):
  value = button.box.get() 
```

### 边注

理解`instance.method(args)`转化为`Class.method(instance, args)`将大大有助于您理解大量 Python 语义。

例如，在 Python 中学习将列表加入字符串时，您经常会看到`' '.join(["hello", "world"])`. 很多新手对此感到困惑并抱怨 python 的语法不一致。但实际上，这与 python 的其余部分非常一致——它所做的只是调用`str.join(' ', ["hello", "world"])`，这应该看起来更像是在其他语言中发现的熟悉的 join 形式。`' '.join(["hello", "world"])`只是一种调用此方法的pythonic方式。

# asp-classic - 经典的 asp 迁移到 windows 2008 RC

> ID：11202175
> 
> 赞同：0
> 
> 时间：2012-06-26T06:58:52.527
> 
> 标签：asp-classic

我对asp经典应用程序很陌生。下面的代码片段来自我们将要**迁移**到**Windows Server 2008RC的****asp 经典应用程序**。

 ****```
1.Set objConfig_Constantsinc = Server.CreateObject("Notion.Configuration")
2.Dim account
3.account = objConfig_Constantsinc.GetConfig("SQLAccount") 
```

根据我在**第 1 行**的理解，我们正在**创建一个 COM 类的实例**。现在在使用此实例的**第 3 行**中，我们正在尝试获取一些配置数据 "SQLAccount" 。这是我的疑问。在经典的 ASP 应用程序中，我们在哪里存储这些类型的配置字符串（例如：“SQLAccount”）。有没有全局配置文件的概念。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:58:10.403

正如您自己在评论中所述， Notion.Configuration 项目是某种 com 对象，如果您将其移植到新服务器，您真的没有问题（假设您移植了底层存储机制，**即 com 对象可以将变量存储在任何地方（例如：sql、注册表、文件）**

如果出于某种原因您想取消 com 对象来存储配置数据（即您的问题是关于全局配置文件的存在） - 在 Classic ASP 中有一种机制可以做到这一点。

具体来说，global.asa 文件，通常，common.asa 文件放置在站点的根目录中，并公开可以从应用程序中的任何 asp 文件中读取的应用程序变量。

更多详细信息：http: [//msdn.microsoft.com/en-us/library/ms525316 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms525316%28v=vs.90%29.aspx)

声明应用程序级别的全局变量很容易：

来自 global.asa 的示例：

```
<script language="VBScript" runat="Server">
Sub Application_OnStart
    Application("SQLAccount") = "whatver"
End Sub 
```

任何其他 asp 页面中的示例：

```
response.write Application("SQLAccount") 
```

不过我会提醒你，声明不必要的全局变量会适得其反，你应该仔细选择在全局级别公开的内容，以避免内存中的混淆/重复项。****

# tomcat - 我们可以专门为 Tomcat Web 应用程序使用 Valve

> ID：11202178
> 
> 赞同：0
> 
> 时间：2012-06-26T06:59:02.723
> 
> 标签：tomcat, web-applications, tomcat-valve

我在 Tomcat 容器中托管了一些 Web 应用程序，我们可以专门为 Web 应用程序使用 Valve 吗？请给我一个方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:51:54.803

是的，您将 Valve 指令放入您的 context.xml 中，如下所示。

```
<Context path="/myapp" ...>
  ...
  <Valve className="org.apache.catalina.valves.RemoteAddrValve"
         allow="10.1.2.*"/>
</Context> 
```

我发现[这个页面](http://www.tomcatexpert.com/blog/2011/11/11/finer-point-apache-tomcat-valves)是编写自己的阀门的一个很好的教程。

# c# - 如何使用c#将数据附加到现有的excel文件

> ID：11202183
> 
> 赞同：1
> 
> 时间：2012-06-26T06:59:10.950
> 
> 标签：c#, c#-4.0, c#-3.0

我想使用 c# 将数据附加到现有的 excel 文件中。我使用下面的代码进行了尝试，但是在打开 excel 文件后它给出了错误的列值（如果我的 excel 文件包含 4 列，但这里它返回列数仅作为 1）。

```
xlApp = new Excel.Application();
            xlApp.Visible = true;
            xlWorkBook = xlApp.Workbooks.Open(fileName, 0, false, 5, "", "", false,
            Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "", true, false, 0, true, 1, 0);   //@"H:\TestFile.xlsx"
            xlWorkSheet = (Excel.Worksheet)xlWorkBook.Sheets.get_Item(sheetNum);

            rng = xlWorkSheet.UsedRange;

            int colCount = rng.Columns.Count;
            int rowCount = rng.Rows.Count;
            rng = (Excel.Range)xlWorkSheet.Cells[rowCount, colCount];
            Excel.Range newColumn = rng.EntireColumn;
            xlWorkSheet.Cells[1, colCount + 3] = "Udupi";

            xlWorkBook.Save();
            xlWorkBook.Close(misValue, misValue, misValue);
            xlApp.Quit(); 
```

我如何将数据附加到 excel 文件？还有其他方法可以实现这一点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:50:22.783

您是否尝试过使用 Epplus 库在 C# 中创建和编辑 Excel 电子表格和工作簿？几周前我已经研究过了。这是超级的。我建议使用它。

# c# - 循环遍历数组问题的内容

> ID：11202187
> 
> 赞同：5
> 
> 时间：2012-06-26T06:59:38.693
> 
> 标签：c#

我正在使用一个 int 数组来保存一长串整数。对于该数组的每个元素，我想检查它是否为 1，如果是，则仅与 1 相关，否则如果为 2，则针对存储在数组中的每个值执行其他与 2 相关的操作，依此类推。我想出了下面的代码，但它没有按预期工作，有什么我遗漏的吗？正在发生的事情是只考虑数组的第一个值。

```
int[] variable1 = MyClass1.ArrayWorkings();
foreach (int i in variable1)
{ 
    if (variable1[i] == 1)
    {
        // arbitrary stuff
    }
    else if (variable1[i] ==2)
    {
        //arbitrary stuff
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T07:02:05.647

循环中的`i`in保存每次迭代中数组的实际元素值，而不是索引。`foreach`在您的特定代码示例中，您的数组可能只包含零，这就是为什么您只获取第一个元素（您总是使用 index `0`）。**因此，您应该检查`i`而不是`variable1[i]`.**

如果您要检查各种整数常量，`switch`则表达式更合适，顺便说一句：

```
foreach (int i in variable1) {
    switch (i) {
        case 1:
            // arbitrary stuff
            break;
        case 2:
            // arbitrary stuff
            break;
    }
} 
```

`switch`/`case`为你节省一些写作；如果您曾经从除 from 之外的任何其他地方提取值`i`，则可以简单地更改语句`(i)`中的部分`switch`，而且`switch`编译器可能比链式`if`-`else`语句更有效地评估。

**注意：**您将无法直接更改`foreach`循环中的数组值，因为您无法将任何内容分配给`i`. 如果您需要分配新的数组值，则必须

*   `foreach`在仍然使用或的同时用一个额外的变量来计算自己
*   使用另一个循环，例如`for`并自己检索当前索引处的项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T07:01:56.987

你正在尝试做一些没有意义的事情。要了解它是如何工作的，举一个简单的例子，一个数组，其值为：9、4、1。

如果你尝试在这个示例数组上运行你的代码，你会得到一个错误：

```
foreach (int i in variable1)
{ 
    if (variable1[i] == 1)   // the item i is 9\.  
                             // But variable[i] means, get the value at position #9 in the array
                             // Since there are only 3 items in the array, you get an Out Of Range Exception
    {
        // arbitrary stuff
    }
{ 
```

相反，这是您需要的：

```
foreach (int i in variable1)  // i will be 9, then 4, then 1)
{ 
    if (i == 1)   
    {
        // arbitrary stuff
    }
    // ... etc
} 
```

另一种方法是使用**for**循环，它会为您提供索引 0、1 和 2，如下所示：

```
for (int i=0 ; i<=variable1.Length ; i++)   // i will be 0, 1, 2
                                            // variable[i] will be 9, 4, 1
{
    if (variable1[i] == 1) 
    { 
        // stuff
    }

    // ... etc
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T07:03:24.457

改为这样写：

```
foreach (int i in variable1) {
    if (i == 1) {
    .... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T07:11:51.197

您获取的`i`不是索引而是值。因此，请检查`i`1 或 2。

如果您使用 for 循环，那么您的内部代码将完美运行。

```
int[] variable1 = MyClass1.ArrayWorkings();
foreach (int i in variable1)
{ 
    switch(i)
    {
        case 1: 
            // arbitrary stuff
        break;
        case 2: 
            //arbitrary stuff
        break;
    }
} 
```

尝试使用开关盒。比正常的 if-else 快得多。

# jquery - 数据表行分组 - 如何添加复选框以显示或排除行

> ID：11202190
> 
> 赞同：1
> 
> 时间：2012-06-26T06:59:48.520
> 
> 标签：jquery, checkbox, datatables, grouping

我正在使用 Datatables 可折叠/可扩展分组。

我已经对其进行了配置，以便所有组都在初始视图中折叠。

感谢 ThulasiRam 的帮助，我集成了组行数和折叠/展开所有功能。感谢 AbstractChaos 的帮助，我还集成了一个搜索/重置搜索，它打开/关闭与搜索条件匹配的组

[数据表行分组 - 如何为每个组添加行数并展开/折叠所有](https://stackoverflow.com/questions/10460421/datatables-row-grouping-how-to-add-rowcount-per-group-and-expand-collapse-all)

[数据表行分组 - 如何展开以显示搜索匹配并添加重置搜索字段按钮](https://stackoverflow.com/questions/10948699/datatables-row-grouping-how-to-expand-to-show-search-matches-and-add-reset-sea)

我需要添加一个额外的功能：一个复选框，用于排除/包含在状态列中标记为“旧版”的记录。

我已经设置了一个 jsfiddle 来展示我想要完成的事情：http: [//jsfiddle.net/lbriquet/NeMXd/18/](http://jsfiddle.net/lbriquet/NeMXd/18/)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T22:27:11.917

我没有使用过 Datatables Collapsible/Expandable Grouping，但沿途有一些东西

```
$(window).on( "click", '#showlegacy', function( e ) {
    if(! $(this).is(':checked')) {
        ref.fnFilter('Current', 3);
    }
}); 
```

应该管用。

[http://jsfiddle.net/NeMXd/19/](http://jsfiddle.net/NeMXd/19/)

# c# - 构建一个完整的 Web 服务、网站和 iPhone 应用程序

> ID：11202195
> 
> 赞同：1
> 
> 时间：2012-06-26T07:00:25.367
> 
> 标签：c#, iphone, asp.net, web-services, architecture

我正在尝试构建一个系统，该系统将拥有一个网站和一个 iPhone 应用程序，这些应用程序将使用相同的数据。我了解我将如何创建和构建网站，但在添加 iphone 应用程序时，我不确定它将如何应用。

我对设计的考虑：

- 使用 C#、SQL Server、asp.net 作为网站（会尽量使用 Web 服务获取我的大部分数据）

- 使用 Objective-C、x-code 等进行 iphone 应用程序开发

1.) 我需要为 iphone 公开一个 Web 服务来与之交互吗？如果是这样，那是否会被视为与实际网站分开的网络应用程序？或者 Web 服务会与网站一起构建，然后 iphone 也会与该 Web 服务进行交互？

2.) 在公开 Web 服务时，我需要考虑哪些安全方面的问题？

3.) 对于构建这样的系统还有其他架构建议吗？也许个人经验是做一个运行在同一个数据库上的网站/iphone 应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:07:11.337

1.  是的，您需要公开一个 Web 服务以供应用程序绑定/对话。我建议将该服务作为一个单独的站点运行（例如 data.yourdomain.com，该站点将在 yourdomain.com 上运行），该站点也将其用于其数据。这样，您就可以为“端点”（站点和应用程序）共享相同的架构。

2.  确保您的 Web 服务在每次调用时都使用身份验证令牌（用户名/密码或 oauth/等），这将有助于防止对服务/数据库进行任何未经授权的调用。此外，如果您的服务通过有效的 HTTPS 连接（并且只有 https）公开，将防止嗅探数据以获取密码。

3.  正如我在第 1 点中所说，以这样一种方式构建服务，即无论什么“端点”访问它都无关紧要。这样，如果您添加了一个 android 应用程序或 Windows Phone 应用程序（甚至是第二个网站），您将不需要提供新的服务。也许将每个应用程序“帐户”绑定到“端点类型”（例如 Android/iPhone/WinPhone/WebSite），这将允许您自定义返回的数据对象（如果需要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:07:28.233

> 我需要为 iphone 公开一个 Web 服务来与之交互吗？如果是这样，那是否会被视为与实际网站分开的网络应用程序？或者 Web 服务会与网站一起构建，然后 iphone 也会与该 Web 服务进行交互？

这取决于，如果您想要一个原生应用程序，那么您将公开该服务，否则您可以开发一个 iPhone Web 应用程序

> 在公开 Web 服务时，我需要考虑哪些安全方面的问题？

正常的安全考虑，就像您将 Web 服务开发到 Windows 桌面应用程序一样

> 对于构建这样的系统还有其他架构建议吗？也许个人经验是做一个运行在同一个数据库上的网站/iphone 应用程序。

尽量使 Web 服务清晰明了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:44:16.933

第一次使用时，您的所有项目只使用一个数据源。使用 Web 服务公开数据库。用户身份验证以调用 Web 服务程序以确保安全。

# c# - WCF - 检测响应错误

> ID：11202196
> 
> 赞同：2
> 
> 时间：2012-06-26T07:00:43.053
> 
> 标签：c#, wcf, webservice-client

在 WCF 中，我使用同步调用。

在响应中，连接消失了。因为发件人没问题，他得到了一些异常并且可以回滚他的动作。但是接收器是怎么回事。他成功地采取了行动 - 关于网络电话 - 但他不知道发送者的事情，那个接收者使他的工作不太好[因为异常]。接收器是否有可能检测到响应中的错误？

我需要一种模式来确保双方都正确了解服务调用的状态。（背景是两个系统都有状态机，其中一个的更改也必须在另一个中实现，或者如果其中一个发生错误 - 听起来像分布式事务）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:07:04.830

您应该考虑在分布式事务中加入所有服务操作。

这将确保您在操作失败时，跨服务边界回滚事务。因此，如果您在客户端回滚事务，它也会在服务器上自动回滚（反之亦然）。

创业文章：

1.  [WCF 事务传播。](http://msdn.microsoft.com/en-us/magazine/cc163432.aspx)
2.  [代码项目示例。](http://www.codeproject.com/Articles/38793/6-Steps-to-Enable-Transactions-in-WCF)

虽然它看起来很重要，但值得付出努力。它将大大简化您的错误处理逻辑。

**注意：**由于 WCF 事务实际上是本机分布式事务（由 MSDTC 管理），因此您将获得额外收益。事务将（可选）传播到 SQL Server（如果您使用一个），并且所有数据库操作都将与您的服务操作在同一个事务中。

# java - Java中布尔数组的大小是多少

> ID：11202197
> 
> 赞同：7
> 
> 时间：2012-06-26T07:00:48.987
> 
> 标签：java

据我所知，布尔大小为 16 字节 {8 作为标头，1 有效负载，* 对齐到 8}

如果布尔变量是一个数组需要多少...

我的[参考](http://www.codeinstructions.com/2008/12/size-of-boolean-object-in-java.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T07:09:03.427

你问的是`Boolean`对象还是`boolean`原语？对象的大小可能是 16 个字节（尽管可能取决于实现），而`boolean`可能会消耗 4 个字节（`int`隐式使用）。

因此`boolean[]`将消耗`N * 4`字节（`N`数组的大小在哪里）+一些对象头。`Boolean[]`将消耗`N * 16`+ 标头（根据您对`Boolean`大小的假设。

话虽这么说，请考虑编写自己的类数组类并将 32 个布尔值打包成一个`int`（您必须手动编写一些位操作），就像`BitSet`类正在做的那样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T07:32:19.457

数组对象大小将为：8 + 4 = 12 字节（这里 4 是数组的长度）如果数组长度为 N，则布尔元素将为：N*16 字节因此大小为：(12 + N * 16 ) 字节四舍五入 (ceil) 8

举个例子：如果N = 10，那么12 + 10 * 16 = 172，经过JVM四舍五入后，大小为176字节。

# android - 在android中创建一个chatView布局

> ID：11202206
> 
> 赞同：21
> 
> 时间：2012-06-26T07:01:31.043
> 
> 标签：android, android-layout, android-custom-view, android-tablelayout

我正在创建一个聊天应用程序，并且正在考虑创建实际聊天视图的方法。

我已经有了聊天窗口本身的布局，但我正在考虑如何实现聊天消息。

我正在考虑创建一个`TableLayout`，每一行将是用户图像和聊天消息（或气泡或其他）。

有没有人知道如何设计和创建这些行？

这是我到目前为止所做的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/background_light"
    android:orientation="vertical"
    android:weightSum="10" >

    <ScrollView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:stretchColumns="1" >

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <!-- insert chat message here !-->

            </TableRow>

            <View
                android:layout_height="2dip"
                android:background="#000" />

            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                 <!-- next chat message --!>

            </TableRow>
        </TableLayout>
    </ScrollView>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="9"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/chatLine"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="Say:"
            android:imeOptions="actionSend"
            android:singleLine="true" />
    </LinearLayout>

</LinearLayout> 
```

* * *

我正在努力实现这种外观![所需的聊天视图](../Images/1a1e05e4c8da300ea56669f804c1233f.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-26T07:10:16.453

下面的代码怎么样 -

**主.xml**

```
<LinearLayout android:id="@+id/list_layout"
    android:layout_height="fill_parent" 
    android:layout_width="fill_parent"
    android:background="@drawable/background"
    xmlns:android="http://schemas.android.com/apk/res/android">

    <ListView android:id="@+id/myList" 
        android:layout_height="fill_parent"
        android:layout_width="wrap_content"/>

</LinearLayout> 
```

**list_row_layout_even.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/even_container"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content">

    <ImageView android:id="@+id/user_img"
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content"
        android:layout_marginTop="80dip"
        android:src="@drawable/sample_image"/>

    <ImageView android:id="@+id/even_bubble"
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_margin="5dip"
        android:src="@drawable/even"/>

    <TextView android:id="@+id/text" 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_alignParentRight="true"
        android:textColor="#000000" 
        android:textSize="16dip"
        android:layout_marginRight="8dip"
        android:layout_marginLeft="120dip"
        android:layout_marginTop="10dip" />

</RelativeLayout> 
```

**list_row_layout_odd.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/even_container"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content">

    <ImageView android:id="@+id/user_img"
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content"
        android:layout_marginTop="80dip"
        android:layout_alignParentRight="true"
        android:src="@drawable/sample_image"/>

    <ImageView android:id="@+id/odd_bubble"
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_margin="5dip"
        android:src="@drawable/odd"/>

    <TextView android:id="@+id/text" 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_alignParentLeft="true"
        android:textColor="#ffffff" 
        android:textSize="16dip"
        android:layout_marginRight="120dip"
        android:layout_marginLeft="8dip"
        android:layout_marginTop="10dip" />

</RelativeLayout> 
```

这是我的输出 -

![截屏](../Images/5f38f2be496643c32fceed5c2d716303.png)

[只需根据您的需要自定义此示例。](http://d.pr/f/5u1y)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-26T07:04:40.103

我建议您[为 ListView 创建自定义适配器，](https://www.google.co.in/search?sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8&q=android%20custom%20adapter%20for%20listview)而不是 TableLayout 。您只需要检查条件以更改**`getViews()`**方法内部布局/视图的背景。

一些线程可能对您有帮助：

1.  [Android：ListView 样式，如短信对话](https://stackoverflow.com/questions/4023232/android-listview-style-like-text-messages-conversations)
2.  [Android 在 ListView 中实现聊天气泡](https://stackoverflow.com/questions/8704436/android-implementing-chat-bubble-in-listview)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-04-01T20:48:17.960

list_item_message_left.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="left"
android:orientation="vertical"
android:paddingBottom="5dp"
android:paddingRight="10dp"
android:paddingTop="5dp" >

<TextView
    android:id="@+id/lblMsgFrom"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:textColor="#777777"
    android:textSize="12dp"
    android:textStyle="italic" />

<RelativeLayout
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/txtMsg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/bg_msg_from"
        android:paddingBottom="5dp"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:paddingTop="5dp"
        android:textColor="#ff717171"
        android:textSize="16dp"

        android:layout_toRightOf="@+id/textView27"
        android:layout_marginRight="50dp" />

    <TextView
        android:id="@+id/textView27"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/triangle_msg_from"
        android:paddingRight="10dp"
        android:textColor="#ffffff"
        android:textSize="16dp"
        android:paddingLeft="10dp"
        android:paddingTop="2dp"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="3dp" />

</RelativeLayout>

</LinearLayout> 
```

list_item_message_right.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="right"
android:orientation="vertical"
android:paddingBottom="5dp"
android:paddingRight="10dp"
android:paddingTop="5dp" >

<TextView
    android:id="@+id/lblMsgFrom"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:textColor="#777777"
    android:textSize="12dp"
    android:textStyle="italic" />

<RelativeLayout
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/txtMsg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/bg_msg_you"
        android:paddingBottom="5dp"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:paddingTop="5dp"
        android:textColor="#ffffff"
        android:textSize="16dp"

        android:layout_toLeftOf="@+id/textView27"
        android:layout_marginLeft="50dp" />

    <TextView
        android:id="@+id/textView27"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/triangle_msg_you"
         android:paddingRight="10dp"
        android:textColor="#ffffff"
        android:textSize="16dp"
        android:paddingLeft="10dp"
        android:paddingTop="2dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentEnd="true"
        android:layout_marginTop="3dp" />

</RelativeLayout>

</LinearLayout> 
```

bg_msg_from.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" >
    <shape
        android:shape="rectangle" >

        <solid android:color="#C0C0C0" >
        </solid>

        <corners android:radius="5dp" >
        </corners>
    </shape>
</item>
<item>
    <shape
        android:shape="rectangle" >

        <solid android:color="#D8D8D8">
        </solid>

        <corners android:radius="5dp" >
        </corners>
    </shape>
</item>
</selector> 
```

bg_msg_you.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" >
<shape
    android:shape="rectangle" >

    <solid android:color="#007AE5" >
    </solid>

    <corners android:radius="5dp" >
    </corners>
</shape>
</item>
<item>
<shape
    android:shape="rectangle" >

    <solid android:color="#0084FF" >
    </solid>

    <corners android:radius="5dp" >
    </corners>
</shape>
</item>
</selector> 
```

triangle_msg_from.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
 <item  android:state_pressed="true" >
    <rotate
        android:fromDegrees="45"
        android:toDegrees="45"
        android:pivotX="87%"
        android:pivotY="140%" >
        <shape
            android:shape="rectangle" >
            <stroke android:color="#C0C0C0" android:width="10dp"/>
               </shape>
    </rotate>

  </item>
  <item>
    <rotate
        android:fromDegrees="45"
        android:toDegrees="45"
        android:pivotX="87%"
        android:pivotY="140%" >
        <shape
            android:shape="rectangle" >
            <stroke android:color="#D8D8D8" android:width="10dp"/>

        </shape>
    </rotate>
  </item>
  </layer-list> 
```

triangle_msg_you.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
 <item  android:state_pressed="true" >
    <rotate
        android:fromDegrees="45"
        android:toDegrees="45"
        android:pivotX="13%"
        android:pivotY="-40%" >
        <shape
            android:shape="rectangle" >
            <stroke android:color="#007AE5" android:width="10dp"/>
               </shape>
    </rotate>

  </item>
  <item>
    <rotate
        android:fromDegrees="45"
        android:toDegrees="45"
        android:pivotX="13%"
        android:pivotY="-40%" >
        <shape
            android:shape="rectangle" >
            <stroke android:color="#0084FF" android:width="10dp"/>

        </shape>
    </rotate>
  </item>
  </layer-list> 
```

messageListAdapter.java

```
 package eddine.charef.mechalikh....;
    import java.util.List;
    import android.annotation.SuppressLint;
    import android.app.Activity;
    import android.content.Context;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.BaseAdapter;
    import android.widget.TextView;

    public class MessagesListAdapter extends BaseAdapter {

    private Context context;
    private List<Msg> messagesItems;

    public MessagesListAdapter(Context context, List<Msg> navDrawerItems) {
        this.context = context;
        this.messagesItems = navDrawerItems;
    }

   @Override
public int getCount() {
    return messagesItems.size();
}

@Override
public Msg getItem(int position) {
    return messagesItems.get(position);
}

@Override
public long getItemId(int position) {
    return position;
}

@SuppressLint("InflateParams")
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    Msg m = messagesItems.get(position);

    LayoutInflater mInflater = (LayoutInflater) context
            .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    if (messagesItems.get(position).getleMien()) {
        convertView = mInflater.inflate(R.layout.list_item_message_right,
                null);
    } else {
        convertView = mInflater.inflate(R.layout.list_item_message_left,
                null);
    }

    TextView lblFrom = (TextView)    convertView.findViewById(R.id.lblMsgFrom);
    TextView txtMsg = (TextView) convertView.findViewById(R.id.txtMsg);
    txtMsg.setText(m.getMessage()+"\n"+m.getAttach());
    lblFrom.setText(m.getDate()+" - "+m.getHeure());

    return convertView;
}
} 
```

消息.java

```
package eddine.charef.mechalikh....;
public class Msg {
private String email, message;
private boolean leMien;
private String attach;
private String cle;
private  String teleAttach;
private  String heure;
private  String date;

public Msg(String cle,String email, String message,String attach,boolean leMien,String teleAttach,String heure,String date) {
    this.email = email;
    this.message = message;
    this.leMien = leMien;
    this.attach = attach;
    this.cle=cle;
    this.teleAttach = teleAttach;
    this.heure = heure;
    this.date=date;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

public String getMessage() {
    return message;
}

public void setMessage(String message) {
    this.message = message;
}

public boolean getleMien() {
    return leMien;
}

public void setleMien(boolean leMien) {
    this.leMien = leMien;
}
public String getAttach() {
    return attach ;
}

public void setAttach(String attach) {
    this.attach = attach;
}
public String getCle() {
    return cle ;
}

public void setCle(String cle) {
    this.cle = cle;
}

public void setTeleAttach(String teleAttach) {
    this.teleAttach = teleAttach;
}
public String getTeleAttach() {
    return teleAttach ;
}

public void setHeure(String heure) {
    this.heure = heure;
}
public String getHeure() {
    return heure ;
}
public String getDate() {
    return date ;
}

public void setDate(String date) {
    this.date = date;
}

} 
```

在你的活动中像这样使用它

```
 ListView listMsg; 
    ArrayList<Msg> listMessages;
    MessagesListAdapter adapter;
    listMessages = new ArrayList<Msg>();

    listMessages.add(new Msg(cle,email,message,attach....));
    adapter = new MessagesListAdapter(this, listMessages);
    listMsg.setAdapter(adapter); 
```

基于此[http://www.androidhive.info/2014/10/android-building-group-chat-app-using-sockets-part-1/](http://www.androidhive.info/2014/10/android-building-group-chat-app-using-sockets-part-1/)

截屏
![](../Images/70b4ac039b632652a0693faa773b35de.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-25T18:44:02.033

我创建了一个用于创建聊天列表的库，这可能会有所帮助

[https://github.com/himanshu-soni/ChatMessageView](https://github.com/himanshu-soni/ChatMessageView)

# facebook - 使用内置“发布”操作在 Open Graph 中发布自定义对象

> ID：11202210
> 
> 赞同：0
> 
> 时间：2012-06-26T07:01:50.690
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, custom-action

我的第一个 Open Graph 自定义操作存在一些问题：

我创建了一个自定义操作“:publish”，因为使用内置操作“news:publish”我只能发布“og:article”类型的对象。

此操作因“您正在尝试提交不允许的自定义操作”而被拒绝。

好的，我明白了，但是如何使用内置操作“发布”发布自定义对象（在我的情况下为：recipe）？我无法更改此内置对象的连接对象类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:16:03.127

将您的操作命名为其他可以适当描述它的名称，但*不是*“发布”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:30:52.463

发布不是内置操作，它是发布操作的某种保留字。如果您正在尝试发布类似文章的内容，那么[内置的](https://developers.facebook.com/docs/opengraph/actions/builtin/)阅读操作非常适合。如果您要发布自定义对象，例如`recipe`，则相应的操作应该是`cook`或类似的。

PS：内置动作不是新闻：发布，它是`news:Read`。

# objective-c - 由于超出允许时间的活动断言导致应用程序崩溃

> ID：11202213
> 
> 赞同：0
> 
> 时间：2012-06-26T07:01:58.377
> 
> 标签：objective-c, ios, cocoa-touch, nsurlconnection, core-location

崩溃报告详细信息：

```
Exception Type:  00000020
Exception Codes: 0x8badf00d
Highlighted Thread:  3

Application Specific Information:
MyApp[123] has active assertions beyond permitted time: 
{(
    <SBProcessAssertion: 0x4b52f0> identifier: CoreLocationBackgroundClient process: MyApp[579] permittedBackgroundDuration: 600.000000 reason: finishTask owner pid:123 preventSuspend  preventIdleSleep 
)}

Elapsed total CPU time (seconds): 13.980 (user 13.980, system 0.000), 1% CPU 
Elapsed application CPU time (seconds): 0.251, 0% CPU 
```

线程 3 是：

```
Thread 3 name:  com.apple.NSURLConnectionLoader
Thread 3:
0   libsystem_kernel.dylib          0x30e67004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x30e671fa mach_msg + 50
2   CoreFoundation                  0x381ea3ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x381e9124 __CFRunLoopRun + 876
4   CoreFoundation                  0x3816c49e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x3816c366 CFRunLoopRunInMode + 98
6   Foundation                      0x373a7bb2 +[NSURLConnection(Loader) _resourceLoadLoop:] + 302
7   Foundation                      0x373a7a7a -[NSThread main] + 66
8   Foundation                      0x3743b58a __NSThread__main__ + 1042
9   libsystem_c.dylib               0x333c972e _pthread_start + 314
10  libsystem_c.dylib               0x333c95e8 thread_start + 0 
```

该应用程序使用 GPS。知道为什么会发生这种崩溃吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:17:45.587

看起来好像您使用了错误类型的后台处理。600 秒是赠品。这表明您正在使用任务完成 API，它为应用程序提供有限的时间（当前为 10 分钟）以在暂停某些活动之前完成它们。

如果您想在后台继续监控 GPS 位置，您需要使用特定的核心位置 API（并在 Info.plist 中设置适当的标志）。

# java - java - 如何将FTP服务器上的文件复制到Java中同一服务器上的目录？

> ID：11202215
> 
> 赞同：14
> 
> 时间：2012-06-26T07:02:07.653
> 
> 标签：java, ftp, client-server, ftp-client, apache-commons-net

我正在使用 Apache Commons FTP 上传文件。在上传之前，我想检查该文件是否已存在于服务器上，并将其备份到同一服务器上的备份目录中。

**有谁知道如何将文件从 FTP 服务器复制到同一服务器上的备份目录？**

```
public static void uploadWithCommonsFTP(File fileToBeUpload){
    FTPClient f = new FTPClient();
    FTPFile backupDirectory;
    try {
        f.connect(server.getServer());
        f.login(server.getUsername(), server.getPassword());
        FTPFile[] directories = f.listDirectories();
        FTPFile[] files = f.listFiles();
        for(FTPFile file:directories){
            if (!file.getName().equalsIgnoreCase("backup")) {
                backupDirectory=file;
            } else {
               f.makeDirectory("backup");
            }
        }
        for(FTPFile file: files){
            if(file.getName().equals(fileToBeUpload.getName())){
                //copy file to backupDirectory
            }
        }

    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

* * *

**编辑代码：**仍然存在问题，当我备份 zip 文件时，备份文件已损坏。

**有没有人知道它的原因？**

```
 public static void backupUploadWithCommonsFTP(File fileToBeUpload) {
    FTPClient f = new FTPClient();
    boolean backupDirectoryExist = false;
    boolean fileToBeUploadExist = false;
    FTPFile backupDirectory = null;
    try {
        f.connect(server.getServer());
        f.login(server.getUsername(), server.getPassword());
        FTPFile[] directories = f.listDirectories();
        // Check for existence of backup directory
        for (FTPFile file : directories) {
            String filename = file.getName();
            if (file.isDirectory() && filename.equalsIgnoreCase("backup")) {
                backupDirectory = file;
                backupDirectoryExist = true;
                break;
            }
        }
        if (!backupDirectoryExist) {
            f.makeDirectory("backup");
        }
        // Check if file already exist on the server
        f.changeWorkingDirectory("files");
        FTPFile[] files = f.listFiles();
        f.changeWorkingDirectory("backup");
        String filePathToBeBackup="/home/user/backup/";
        String prefix;
        String suffix;
        String fileNameToBeBackup;
        FTPFile fileReadyForBackup = null;
        f.setFileType(FTP.BINARY_FILE_TYPE);
        f.setFileTransferMode(FTP.BINARY_FILE_TYPE);
        for (FTPFile file : files) {
            if (file.isFile() && file.getName().equals(fileToBeUpload.getName())) {
                prefix = FilenameUtils.getBaseName(file.getName());
                suffix = ".".concat(FilenameUtils.getExtension(file.getName()));
                fileNameToBeBackup = prefix.concat(Calendar.getInstance().getTime().toString().concat(suffix));
                filePathToBeBackup = filePathToBeBackup.concat(fileNameToBeBackup);
                fileReadyForBackup = file;
                fileToBeUploadExist = true;
                break;
            }
        }
        // If file already exist on the server create a backup from it otherwise just upload the file.
        if(fileToBeUploadExist){
            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
            f.retrieveFile(fileReadyForBackup.getName(), outputStream);
            InputStream is = new ByteArrayInputStream(outputStream.toByteArray());
            if(f.storeUniqueFile(filePathToBeBackup, is)){
                JOptionPane.showMessageDialog(null, "Backup succeeded.");
                f.changeWorkingDirectory("files");
                boolean reply = f.storeFile(fileToBeUpload.getName(), new FileInputStream(fileToBeUpload));
                if(reply){
                    JOptionPane.showMessageDialog(null,"Upload succeeded.");
                }else{
                    JOptionPane.showMessageDialog(null,"Upload failed after backup.");
                }
            }else{
                JOptionPane.showMessageDialog(null,"Backup failed.");
            }
        }else{
            f.changeWorkingDirectory("files");
            f.setFileType(FTP.BINARY_FILE_TYPE);
            f.enterLocalPassiveMode();
            InputStream inputStream = new FileInputStream(fileToBeUpload);
            ByteArrayInputStream in = new ByteArrayInputStream(FileUtils.readFileToByteArray(fileToBeUpload));
            boolean reply = f.storeFile(fileToBeUpload.getName(), in);
            System.out.println("Reply code for storing file to server: " + reply);
            if(!f.completePendingCommand()) {
                f.logout();
                f.disconnect();
                System.err.println("File transfer failed.");
                System.exit(1);
            }
            if(reply){

                JOptionPane.showMessageDialog(null,"File uploaded successfully without making backup." +
                        "\nReason: There wasn't any previous version of this file.");
            }else{
                JOptionPane.showMessageDialog(null,"Upload failed.");
            }
        }
        //Logout and disconnect from server
        in.close();
        f.logout();
        f.disconnect();
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-26T07:29:14.710

如果您使用的是 apache commons net `FTPClient`，则有一种直接的方法可以将文件从一个位置移动到另一个位置（如果`user`具有适当的权限）。

```
ftpClient.rename(from, to); 
```

或者，如果您熟悉`ftp commands`，则可以使用类似

```
ftpClient.sendCommand(FTPCommand.yourCommand, args);
if(FTPReply.isPositiveCompletion(ftpClient.getReplyCode())) {
     //command successful;
} else {
     //check for reply code, and take appropriate action.
} 
```

如果您使用任何其他客户端，请阅读文档，客户端实现之间不会有太大变化。

**更新：**

上述方法将文件移动到`to`目录，即文件将不再存在于`from`目录中。基本上 ftp 协议意味着从服务器传输文件，`local <-> remote`但`remote <-> other remote`不是在服务器中传输文件。

这里的工作会更简单，将完整的文件获取到本地`InputStream`并将其作为备份目录中的新文件写回服务器。

获取完整的文件，

```
ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
ftpClient.retrieveFile(fileName, outputStream);
InputStream is = new ByteArrayInputStream(outputStream.toByteArray()); 
```

现在，将此流存储到备份目录。首先，我们需要将工作目录更改为备份目录。

```
// assuming backup directory is with in current working directory
ftpClient.setFileType(FTP.BINARY_FILE_TYPE);//binary files
ftpClient.changeWorkingDirectory("backup");
//this overwrites the existing file
ftpClient.storeFile(fileName, is);
//if you don't want to overwrite it use storeUniqueFile 
```

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:06:30.037

试试这个方法

我正在使用 apache 的库。

**ftpClient.rename(from, to)** 会更容易，我在下面的代码中提到了在哪里添加 ftpClient.rename(from,to)。

```
public void goforIt(){

        FTPClient con = null;

        try
        {
            con = new FTPClient();
            con.connect("www.ujudgeit.net");

            if (con.login("ujud3", "Stevejobs27!!!!"))
            {
                con.enterLocalPassiveMode(); // important!
                con.setFileType(FTP.BINARY_FILE_TYPE);
                String data = "/sdcard/prerakm4a.m4a";
                ByteArrayInputStream(data.getBytes());
                FileInputStream in = new FileInputStream(new File(data));
                boolean result = con.storeFile("/Ads/prerakm4a.m4a", in);
                in.close();
                if (result) 
                       {
                            Log.v("upload result", "succeeded"); 
```

//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$在此处添加备份$$$$$$$$$$$$$$$ $$$$$$$$$$$$$$$$$$//

```
 // Now here you can store the file into a backup location

                  // Use ftpClient.rename(from, to) to place it in backup 
```

//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$在此处添加备份$$$$$$$$$$$$$$$ $$$$$$$$$$$$$$$$$$//

```
 }
                con.logout();
                con.disconnect();
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }   

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-24T06:44:42.723

没有通过 FTP 协议复制远程文件的标准方法。不过，一些 FTP 服务器支持专有或非标准扩展。

* * *

因此，如果您很幸运，您的服务器是带有[mod_copy 模块](http://www.proftpd.org/docs/contrib/mod_copy.html)的 ProFTPD ，您可以使用[`FTP.sendCommand`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTP.html#sendCommand-java.lang.String-)以下两个命令发出：

```
f.sendCommand("CPFR sourcepath");
f.sendCommand("CPTO targetpath"); 
```

* * *

第二种可能性是您的服务器允许您执行任意 shell 命令。这更不常见。如果你的服务器支持这个，你可以使用`SITE EXEC`命令：

```
SITE EXEC cp -p sourcepath targetpath 
```

* * *

另一种解决方法是打开与 FTP 服务器的第二个连接，并通过将被动模式数据连接传送到主动模式数据连接，使服务器将文件上传到自身。此解决方案的实现（尽管在 PHP 中）显示在[FTP 中将文件复制到同一 FTP 中的另一个位置](https://stackoverflow.com/q/3808799/850848#46785089)。

* * *

如果这些都不起作用，您所能做的就是将文件下载到本地临时位置并将其重新上传回目标位置。这就是[@RP- 的答案](https://stackoverflow.com/q/11202215/850848#11202590)。

* * *

另请参阅[FTP 将文件复制到同一 FTP 中的另一个位置](https://stackoverflow.com/q/3808799/850848)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-08T17:56:06.290

要在同一服务器上备份（移动），您可以使用：

```
String source="/home/user/some";
String goal  ="/home/user/someOther";
FTPFile[] filesFTP = cliente.listFiles(source);

clientFTP.changeWorkingDirectory(goal);  // IMPORTANT change to final directory

for (FTPFile f : archivosFTP) 
   {
    if(f.isFile())
       {
        cliente.rename(source+"/"+f.getName(), f.getName());
       }
   } 
```

# ruby-on-rails - 查找包含给定时间的时间范围

> ID：11202218
> 
> 赞同：0
> 
> 时间：2012-06-26T07:02:15.753
> 
> 标签：ruby-on-rails, ruby

例如，我有时间范围

正常时间：*03:15 - 17:00*

折扣时间：17: *00 - 23:10*

夜间 : *23:10 - 03:15*

我必须找到当前时间属于哪个范围。

在我有这样的代码之前：

```
when (3*60+15)..(17*60+00)
  puts "normal_time"
when (17*60+00)..(23*60+10)
  puts "disc_time"
else
  puts "night_time"
end 
```

但是如果我有这个代码不起作用

正常时间：*07:15 - 19:00*

折扣时间：19: *00 - 01:10*

夜间： 01: *10 - 07:15*

我应该使用哪个代码来使两个配置都工作？

我应该使用 2 天的持续时间吗？

**肮脏的解决方案**

我知道代码没有优化，但它可以工作。我会重构它

```
time = Time.now
a = [:normal_time, :disc_time, :night_time]
b = a + [a[0]]
pp = Priceplan.last # has times sets for :normal_time, :disc_time, :night_time

check = time.hour*60+time.min
a.each_with_index do |e, i|
  starts_at = pp.send(e).hour * 60 + pp.send(e).min
  ends_at  = pp.send(b[i+1]).hour * 60 + pp.send(b[i+1]).min
  if starts_at < ends_at
if (starts_at..ends_at).include?(check)
  p "ok!!!!!!!! at #{e}"
  break
end
  else
if (starts_at..(24*60)).include?(check)
  p "ok!!!!!!!! at #{e} (divided first)"
  break
elsif (0..ends_at).include?(check)
  p "ok!!!!!!!! at #{e} (divided second)"
  break
end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:24:33.627

您可以尝试以今天午夜为基点

```
def today_midnight
  Time.now.utc.midnight
end

normal time : where(:belongs_to => (today_midnight + 7.hours + 15.minutes) .. (today_midnight + 19.hours))

discount time : where(:belongs_to => (today_midnight + 1.hours + 10.minutes) .. (today_midnight + 19.hours))

night time: where(:belongs_to => (today_midnight + 1.hour + 10.minutes) .. (today_midnight + 7.hours + 15.minutes)) 
```

虽然很长，但我相信以这种方式编写代码会使代码更具可读性。即一年后，如果您能够通过快速查看代码来理解发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:19:57.040

范围总是从小数到大数。当你有一个范围时：`19:00-01:10`你正在创建一个无效的范围。要修复它，只需划分范围，以便您拥有`19:00-23:59`一个新范围，然后`00:00-01:10`覆盖其余时间跨度。

# c# - 为什么我得到重复的值？有时同一值连续 3 次？

> ID：11202224
> 
> 赞同：-1
> 
> 时间：2012-06-26T07:02:50.730
> 
> 标签：c#

我所做的是，在 Form1 的顶部添加了一个新的 int 变量 moveCounter。在构造函数中，我以 0 开始变量。 moveCounter = 0;

在pictureBox1 绘制事件中，我做了：moveCounter++；而且在绘画事件中，我将 moveCounter 值放入一个文本框：

```
private void pictureBox1_Paint(object sender, System.Windows.Forms.PaintEventArgs e)
        {
            SolidBrush brush;
            Pen p=null;
           Point connectionPointStart;
           Point connectionPointEnd;
           Graphics g = e.Graphics;
           g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;

               brush = new SolidBrush(Color.Red);
               p = new Pen(brush);
               for (int idx = 0; idx < wireObject1._point_X.Count; ++idx)
               {
                   Point dPoint = new Point((int)wireObject1._point_X[idx], (int)wireObject1._point_Y[idx]);
                   dPoint.X = dPoint.X - 5; // was - 2
                   dPoint.Y = dPoint.Y - 5; // was - 2
                   Rectangle rect = new Rectangle(dPoint, new Size(10, 10));
                   g.FillEllipse(brush, rect);    
               }

               for (int i = 0; i < wireObject1._connectionstart.Count; i++)
               {    
                   int startIndex = wireObject1._connectionstart[i];
                   int endIndex = wireObject1._connectionend[i];
                   connectionPointStart = new Point((int)wireObject1._point_X[startIndex], (int)wireObject1._point_Y[startIndex]);
                   connectionPointEnd = new Point((int)wireObject1._point_X[endIndex], (int)wireObject1._point_Y[endIndex]);
                   p.Width = 4;
                   g.DrawLine(p, connectionPointStart, connectionPointEnd);
                   moveCounter++;
                   textBox1.Text = moveCounter.ToString();
               }
        } 
```

在Form1的顶部，我创建了一个StreamWriter w的变量；在构造函数中我做了：

```
w = new StreamWriter(@"d:\movesCounter.txt"); 
```

在 pictureBox1 鼠标移动事件中，我检查是否只有 moveCounter 大于 10，然后将值写入文本文件。

```
private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
        {
            if (mouseMove == true)
            {
                mouseDrag = true;
                Point NewPoint = e.Location;                    
                    wireObject1.MovePoint(selectedIndex, NewPoint, NewPoint); // when moving a point dragging the other point is vanished deleted. To check why !

                    label1.Text = "{X = " + NewPoint.X + "}" + " " + "{Y = " + NewPoint.Y + "}";
                    refreshFlag = true;
                    timer2.Start();

                    if (moveCounter > 10)
                    {
                        w.WriteLine("Number Of Moves ===>   " + moveCounter);
                    }
            }
            else
            {
                label19.Text = "{X = " + e.X + "}" + " " + "{Y = " + e.Y + "}";
            }
        } 
```

在pictureBox1 鼠标向上事件中，我关闭了StreamWriter：

```
private void pictureBox1_MouseUp(object sender, MouseEventArgs e)
        {
            if (mouseMove == true)
            {
                Point NewPoint = e.Location;
                wireObject1._point_X[(int)selectedIndex] = NewPoint.X;
                wireObject1._point_Y[(int)selectedIndex] = NewPoint.Y;
                mouseMove = false;
                if (moveCounter > 10)
                {
                    w.Close();
                }
                WireObjectCoordinatesCloneFrame();
            }
    } 
```

我想要做的是将 moveCounter 的值记录/写入文本文件。我把 moveCounter++; 在底部循环中的绘制事件中，当两个或多个点通过线/秒连接时，此循环起作用，并且当我在图片框区域客户端周围移动连接点之一时，我实时看到 moveCounter 值上升。

问题是在我硬盘上的文本文件中，我得到的结果是这样的：

```
Number Of Moves ===>   11
Number Of Moves ===>   11
Number Of Moves ===>   11
Number Of Moves ===>   12
Number Of Moves ===>   12
Number Of Moves ===>   12
Number Of Moves ===>   13
Number Of Moves ===>   13
Number Of Moves ===>   13
Number Of Moves ===>   14
Number Of Moves ===>   14
Number Of Moves ===>   14
Number Of Moves ===>   15
Number Of Moves ===>   15
Number Of Moves ===>   16
Number Of Moves ===>   16
Number Of Moves ===>   17
Number Of Moves ===>   17
Number Of Moves ===>   18
Number Of Moves ===>   18
Number Of Moves ===>   19
Number Of Moves ===>   19
Number Of Moves ===>   20
Number Of Moves ===>   20
Number Of Moves ===>   20
Number Of Moves ===>   21
Number Of Moves ===>   21
Number Of Moves ===>   21 
```

我不明白为什么我会连续两次甚至三次获得某些值，例如 20 20 20 或 21 21 21 或 18 18，而不是每个值都获得一次。

这是值 169。我想添加这个经过 5 秒，没关系，但值 169 再次出现几次而不是一次。在所有的文本文件中都是这样。

```
Number Of Moves ===>   169
Passed 5 Seconds ===>   5
Number Of Moves ===>   169 
```

有什么解决办法？

已编辑**

这是pictureBox1 鼠标按下事件，我将mouseMove bool 变量设置为true，所以问题可能出在此处。

```
private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
        {
            if (e.Button == MouseButtons.Left)
            {
                label1.Visible = true;
                label4.Visible = true;

                float t = wireObject1.GetIndexByXY(e.X, e.Y, 5);

                if (t == -1)
                {
                    button3.Enabled = false;
                }
                else
                {
                    button3.Enabled = true;
                    {
                        selectedIndex = t;
                        mouseMove = true;
                        OriginalX = wireObject1._point_X[(int)selectedIndex];
                        OriginalY = wireObject1._point_Y[(int)selectedIndex];

                        if (cyclicSelectedIndex.Count() == 2)
                        {

                            cyclicSelectedIndex[currentCyclicIndex] = (int)selectedIndex;
                            currentCyclicIndex++;
                            if (currentCyclicIndex == 2)
                            {
                                currentCyclicIndex = 0;
                            }

                            if ((cyclicSelectedIndex[0] == cyclicSelectedIndex[1]) || (cyclicSelectedIndex[0] == -1) || (cyclicSelectedIndex[1] == -1))

                            {
                                button2.Enabled = false;
                            }
                            else
                            {
                                button2.Enabled = true;
                            }

                            for (int i = 0; i < wireObject1._connectionstart.Count; i++) 
                            {
                                if ((wireObject1._connectionstart[i] == cyclicSelectedIndex[0] && wireObject1._connectionend[i] == cyclicSelectedIndex[1]) ||
                                   (wireObject1._connectionstart[i] == cyclicSelectedIndex[1] && wireObject1._connectionend[i] == cyclicSelectedIndex[0]) ||
                                    wireObject1._connectionstart[i] == cyclicSelectedIndex[0] || wireObject1._connectionend[i] == cyclicSelectedIndex[1] ||
                                     wireObject1._connectionstart[i] == cyclicSelectedIndex[1] || wireObject1._connectionend[i] == cyclicSelectedIndex[0])
                                {

                                    button3.Enabled = false;
                                }

                                if ((wireObject1._connectionstart[i] == cyclicSelectedIndex[0] && wireObject1._connectionend[i] == cyclicSelectedIndex[1]) ||
                                   (wireObject1._connectionstart[i] == cyclicSelectedIndex[1] && wireObject1._connectionend[i] == cyclicSelectedIndex[0]))
                                {
                                    button2.Enabled = false;  
                                }
                            }

                            label13.Text = selectedIndex.ToString();
                            label13.Visible = true;
                            label14.Visible = true;
                            listView1.Items.Add(selectedIndex.ToString()).EnsureVisible();
                        }
                    }
                }
            }
        } 
```

另一件事是我在设计器 Timer1 中添加了一个计时器。计时器已启用并设置为 30 毫秒。

在图片框鼠标移动事件中，我做了：

```
refreshFlag = true; 
```

然后在 timer1 滴答事件中，我检查这个标志是否为真，然后制作一个图片框1.刷新（）；这个想法是当我拖动/移动在移动事件中连接或未连接的点时，仅每 30 毫秒进行一次绘制事件。那么问题可能出在哪里？

这是 timer1 滴答事件：

```
private void timer1_Tick(object sender, EventArgs e)
        {
            if (refreshFlag == true)
            {
                pictureBox1.Refresh();
                refreshFlag = false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:34:00.407

你`pictureBox1_MouseMove`的调用频率高于你的调用`pictureBox1_Paint`，因为第二个调用仅每 30 毫秒调用一次，并且如果鼠标之前移动过。

所以在鼠标移动的地方增加你的 moveCounter ：

```
private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
{
    ...
    moveCounter++;
    textBox1.Text = moveCounter.ToString();
    ...
} 
```

# c# - 如何为 ContextMenu 的 TreeViewItem 设置 DataContext

> ID：11202225
> 
> 赞同：1
> 
> 时间：2012-06-26T07:02:53.780
> 
> 标签：c#, wpf, data-binding

我有以下代码。我正在尝试将 的`Command`属性绑定到在用户控件`MenuItem`中实现的相关命令。`DataContext`谁能帮我？该命令不会被执行。

```
<UserControl x:Class="MIB2.App.Presentations.Views.CategoryManView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:model="clr-namespace:MIB2.Models;assembly=MIB2"
             xmlns:local="clr-namespace:MIB2.App.Presentations.Views"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="335">
    <UserControl.Resources>
        <local:DatabindingDebugConverter x:Key="debugConverter" />
    </UserControl.Resources>

    <StackPanel Width="417">
        <TreeView   x:Name="tree"
                    ItemsSource="{Binding RootCategories}" SelectedItemChanged="TreeView_SelectedItemChanged"
                    MouseRightButtonDown="OnPreviewMouseRightButtonDown">
            <TreeView.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Add Root Category" Command="{Binding AddRootCategoryCommand}"/>
                </ContextMenu>
            </TreeView.ContextMenu>
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate   DataType="model:Item"
                                            ItemsSource="{Binding Children}">
                    <Grid>
                        <Grid.ContextMenu>
                            <ContextMenu DataContext="{Binding PlacementTarget.Tag, RelativeSource={RelativeSource AncestorType=TextBox}}">
                                <MenuItem Header="Add Category" Command="{Binding Path=AddEntityCommand}" />
                            </ContextMenu>
                        </Grid.ContextMenu>

                        <TextBlock Text="{Binding Description}" Margin="0,0,10,0" Tag="{Binding DataContext, ElementName=tree}"/>
                    </Grid>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>
        <StackPanel Orientation="Horizontal">
            <Button Content="Add New Category" Command="{Binding AddEntityCommand}" />
            <Button Content="Add New Root Category" Command="{Binding AddRootCategoryCommand}" />
            <Button Content="Delete Category" Command="{Binding DeleteEntityCommand}" />
        </StackPanel>
        <ContentControl Content="{Binding EntityViewModel.View}" />
    </StackPanel>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T23:00:56.393

请试试这个：

```
<TreeView.ItemTemplate>
    <HierarchicalDataTemplate DataType="model:Item"
                              ItemsSource="{Binding Children}">
        <Grid Tag="{Binding DataContext, RelativeSource={RelativeSource AncestorType=UserControl}}">
            <Grid.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Add Category"
                              Command="{Binding Path=PlacementTarget.Tag.AddEntityCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}" />
                </ContextMenu>
            </Grid.ContextMenu>
            <TextBlock Text="{Binding Description}" Margin="0,0,10,0" />
        </Grid>
    </HierarchicalDataTemplate>
</TreeView.ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:16:47.023

您可以在绑定中使用 RelativeSource 来查找父对象，例如

```
<MenuItem Header="Add Root Category" Command="{Binding DataContext.CommandName, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}/> 
```

# javascript - 如何发送旧版字段

> ID：11202230
> 
> 赞同：0
> 
> 时间：2012-06-26T07:03:03.947
> 
> 标签：javascript, jquery, jeditable

我使用 JEditable 制作以下代码的编辑字段：

```
 $(function() {
                $(".field").editable("http://localhost/index.php/welcome/update_record", { 
                event  : "mouseover",
                style  : "inherit",
                submit : "save",
                callback: function(value, settings) {
                    //some code
                    }
                });  
    }); 
```

我需要更新数据库中字段的值，但如果用户没有使用他的登录名/密码对进入系统，我需要显示有关它的消息并返回该字段的旧值。那么，我怎样才能发送字符串的旧值呢？如何将它添加到 $_POST 数组？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:12:09.613

你能澄清你所说的旧字符串是什么意思吗？如果您的意思是在使字段可编辑之前的值，只需将该值保存在变量中：

```
$(function() {
            var old_value = $(".field").text(); //save old value

            $(".field").editable("http://localhost/index.php/welcome/update_record", { 
            event  : "mouseover",
            style  : "inherit",
            submit : "save",
            callback: function(value, settings) {
                //do something with old_value here
                }
            });  
}); 
```

编辑：如果它是一个文本字段而不是一个容器 - 使用 $(".field").val(); 而不是文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:36:31.823

给你 - 一次会做不止一个：

```
$(function() {
     $(".field").each(function() {
            var old_value = $(this).text(); //save old value
            $(this).editable("http://localhost/index.php/welcome/update_record", { 
            event  : "mouseover",
            style  : "inherit",
            submit : "save",
            callback: function(value, settings) {
                    $(this).text(old_value);
                }
            }); 
     });

}); 
```

# django - Django 块可以有模板标签吗？

> ID：11202234
> 
> 赞同：0
> 
> 时间：2012-06-26T07:03:08.713
> 
> 标签：django, templates

我正在构建一个带有博客插件的静态站点生成器。有没有办法像这样通过降价解析整个内容块？

```
title: My First Post
author: Plutor Heidepeen
date: 01-01-2012

{% extends "post.html" %}
{% block body|markdown %}

## This Should be A Title

1\. This
2\. A
3\. List

Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:19:33.847

你正在寻找[`{% filter %}`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#filter).

```
{% filter markdown %}

## This Should be A Title

1\. This
2\. A
3\. List

Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

{% endfilter %} 
```

# c# - 如何将字符串的特定字符解析为整数？

> ID：11202236
> 
> 赞同：1
> 
> 时间：2012-06-26T07:03:14.880
> 
> 标签：c#, winforms, string, parsing, integer

```
string abc = "07:00 - 19:00"
x  = int.Parse(only first two characters) // should be 7
y  = int.Parse(only 9th and 10th characters) // should be 19 
```

请问我怎么能这么说？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T07:05:17.510

使用字符串类的 Substring 方法提取所需的字符集。

```
string abc = "07:00 - 19:00";
x  = int.Parse(abc.Substring(0,2)); // should be 7
y  = int.Parse(abc.Substring(8,2)); // should be 19 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T07:05:54.270

没有`int.Parse`一个范围，所以要么：

*   编写自己的解析器（yeuch）
*   先使用`Substring`，然后`int.Parse`在子字符串上使用

所以：

```
x = int.Parse(abc.Substring(0,2)); 
```

ETC

# sql - 缩短句子以找到搜索值

> ID：11202240
> 
> 赞同：1
> 
> 时间：2012-06-26T07:03:19.253
> 
> 标签：sql, sql-like

搜索使用相同值的值

例子

```
SELECT Name, UnitPrice, Quantity, Color
FROM Product
WHERE Name Like '2' OR UnitPrice Like '2' OR Quantity LIKE '2' OR  Color LIKE '2' 
```

有没有办法缩短句子，这样我就不需要重复变量 LIKE 'value'？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T07:05:52.350

`LIKE`没有通配符是`=`

```
SELECT Name, UnitPrice, Quantity, Color
FROM Product
WHERE '2' IN (Name, UnitPrice, Quantity, Color) 
```

这会扩展为一系列 OR 条件
请注意，`'2'`在 OR 扩展后，字符串将根据需要进行 CAST

如果*确实*需要通配符和 LIKE，则必须使用一系列 OR 语句。

最后，这不会在性能方面进行扩展。有了良好的索引（例如，每列一个，其他 2 个作为 INCLUDE 列），那么这可能会更好地写成单独的查询，在它们之间使用 UNION

编辑，为清楚起见

OP想要使用通配符。因此我的`IN`建议不会奏效。所以你**必须**这样做

```
WHERE
    Name Like '%2%' OR
    UnitPrice Like '%2%' OR 
    Quantity LIKE '%2%' OR
    Color LIKE '%2%' 
```

由于前导通配符，添加索引没有意义。所以我上面关于索引+包含的文字是无关紧要的

# php - Reg ex 匹配字母后的数字

> ID：11202242
> 
> 赞同：-1
> 
> 时间：2012-06-26T07:03:29.590
> 
> 标签：php, regex

我正在尝试提出一个 Reg Ex 来查找特定前缀之后的数字。在本例中，我使用字母“JOB”。因此，如果我输入“收到的 JOB2324 新订单”，我需要返回 2324。JOB 之后的数字数量可能会有所不同。例如“关于 JOB9883789 的一些信息”应该返回 9883789。任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:06:07.693

```
preg_match("@JOB([0-9]+)@", $string, $matches) 
```

应该这样做。

当然，如果您有像 JOB1234 这样的“孤立”文本，那么

```
$number = substr($string,3); 
```

快得多。见[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:13:56.997

而不是使用`Reg Ex`你可以使用`substr`功能

`<?php echo substr('JOB9883789', 3);`

由于关键字`JOB`在您的情况下不会改变。

# javascript - jquery ui对话框取消ajax请求

> ID：11202243
> 
> 赞同：0
> 
> 时间：2012-06-26T07:03:38.793
> 
> 标签：javascript, jquery, jquery-ui

我试图通过表单提交发送多条信息。在此提交中，我想返回 false（取消页面请求，因为它是 ajax）并关闭表单。不幸的是，关闭似乎也确实返回了，我认为是真的。这样发布请求就不会失败。这使对话框仍然在屏幕上。如果我打电话给 $("#dialog-form").dialog("close"); 然后 return false 不运行并且页面更改。

如果有人知道如何解决这个问题，或者我做错了什么，那将非常有帮助：

javascript:

```
$('#modifyConsoleForm').submit(function(evt) {
    $.ajax({
        type : 'POST',
        url : jQuery("#modifyConsoleForm").attr("action"),
        data : jQuery(this).serialize(),
        dataType : "json",
        success : function(data) {
            hideError();
        },
        error : function(data) {
            setError('modify of console failed');
        }
    });
    $("#dialog-form").dialog("close");
    return false;
}); 
```

和我的对话框初始化：

```
$("#dialog-form").dialog({
    autoOpen : false,
    height : 300,
    width : 350,
    modal : true,

    close : function() {
        allFields.val("").removeClass("ui-state-error");
    }
}); 
```

我也尝试过在关闭的对话框中总是返回 false，但它似乎没有用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:07:59.913

尝试使用 event.preventDefault() 来停止页面更改

例如：

```
$('#modifyConsoleForm').submit(function(evt) {

    evt.preventDefault();

    $.ajax({
        type : 'POST',
        url : jQuery("#modifyConsoleForm").attr("action"),
        data : jQuery(this).serialize(),
        dataType : "json",
        success : function(data) {
            hideError();
        },
        error : function(data) {
            setError('modify of console failed');
        }
    });
    $("#dialog-form").dialog("close");
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:08:49.147

应该在 ajax 请求完成后，在成功和错误函数中关闭对话框并返回真/假。

在运行 ajax 请求时放置一个活动指示器并在从服务器获得响应后隐藏/删除它也是明智的，这样用户就知道有一个过程正在进行。

# iphone - 有光泽的按钮以编程方式设置颜色

> ID：11202246
> 
> 赞同：1
> 
> 时间：2012-06-26T07:04:05.800
> 
> 标签：iphone, ios, xcode

我目前正在尝试 RAYWENDERLICH 的[Core Graphics 101: Glossy Buttons](http://www.raywenderlich.com/2134/core-graphics-101-glossy-buttons)，但我在我的项目中使用它时遇到问题，我不知道以编程方式应用它，并以编程方式调整其图像。

这是我的按钮：

```
@interface CoolButtonViewController : UIViewController {
    CoolButton *_button;
}

@property (retain) IBOutlet CoolButton *button;

@implementation CoolButtonViewController
@synthesize button = _button; 
```

如何以编程方式编辑图像的颜色，而不是通过滑块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:20:09.890

看起来就像将按钮的色调、饱和度和亮度属性设置为您想要的任何值一样简单。（这些属性的值可以在 0.0 到 1.0 的范围内）

```
_button.hue = 0.5;
_button.saturation = 0.5;
_button.brightness = 0.5; 
```

# php - 从 Zend_Db_Table_Row 对象数组中获取值

> ID：11202248
> 
> 赞同：3
> 
> 时间：2012-06-26T07:04:14.273
> 
> 标签：php, arrays, zend-framework, zend-db

我正在使用一个 zend 模型，它以 $row 的形式返回一个包含所有值的对象

但我无法从这个数组中获得价值。这是否可以在没有 foreach 的情况下获得值

这是返回的数组

```
 Zend_Db_Table_Row Object
   (
    [_data:protected] => Array
        (
            [user_id] => 2
            [udid] => 34
            [firstname] => a
            [lastname] => a
            [email] => jusic.sl@gmail.com
            [username] => abc
            [password] => c91718531fd9f8b89c4e
            [created_date] => 2010-02-11
            [updated_datetime] => 2012-06-25 12:48:17
            [lastlogin_datetime] => 
            [group_id] => 2
            [status] => Active
        )
 ) 
```

我需要从这个数组中获取 user_id、firstname、email

任何帮助将不胜感激 。

我试过了

$forgotpassword = $userModel->forgotpassword ( $post ); // 其中包含这个数组

$id = $forgotpassword['_data:protected']['id']; 出口; // 但似乎不起作用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T07:15:53.347

您无法`_data`直接访问。它[受到保护](http://php.net/visibility)。

来自[ZF 命名约定参考指南](http://framework.zend.com/manual/en/coding-standard.naming-conventions.html#coding-standard.naming-conventions.variables)：

> […] 使用“private”或“protected”修饰符声明的变量，变量名的第一个字符必须是单个下划线。

你可以做任何一个（由于`__get`/ `__set`）

```
echo $forgotpassword->user_id; 
```

或（由于`ArrayAccess`）

```
echo $forgotpassword['user_id']; 
```

或（如果你想要一个数组）

```
$array = $forgotpassword->toArray();
echo $array['user_id']; 
```

请参阅参考指南和代码

*   [http://framework.zend.com/manual/en/zend.db.table.row.html](http://framework.zend.com/manual/en/zend.db.table.row.html)
*   [http://framework.zend.com/svn/framework/standard/trunk/library/Zend/Db/Table/Row/Abstract.php](http://framework.zend.com/svn/framework/standard/trunk/library/Zend/Db/Table/Row/Abstract.php)

# c++ - 为什么编译器需要`delete [] p`而不是`delete p[]`？

> ID：11202251
> 
> 赞同：16
> 
> 时间：2012-06-26T07:04:24.133
> 
> 标签：c++, language-design, dynamic-memory-allocation, delete-operator

在 C++ 中，如果你想动态分配一个数组，你可以这样做：

```
int *p;
p = new int[i];  // i is some number 
```

但是，要删除数组，您可以...

```
delete[] p; 
```

为什么不是`delete p[]`？这与最初的创建方式不是更加对称吗？以这种方式设计语言的原因（如果有的话）是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-26T07:08:59.557

一个原因可能是使这些案例更加不同。

```
int ** p;
delete[] p
delete p[1]; 
```

如果是这样，`delete p[]`那么一个字符错误将产生非常严重的后果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:51:01.553

因为数组作为参数传递给函数（或运算符）时会衰减为指针。所以 delete p[] 就等同于 delete p。

**[编辑]** 我们可以将删除视为特殊的模板运算符。操作员应该能够区分 p 和 p[] 以选择正确的“特化”（非数组或数组删除）。但是，模板参数推导规则使这种选择成为不可能（由于数组衰减，我们在推导参数时无法区分 p[] 和 p）。

所以我们不能对这两种情况都使用名称为*delete*的运算符，而需要为数组情况引入另一个名称不同的运算符delete[]（后缀[]可以视为运算符名称的一部分）。

**[编辑 2]**注意。根据当前标准， delete p[] 根本不是有效的 sintax。上面的推理只显示了如果我们尝试使用现有的 c++ 概念来解释 delete p[] 可能会出现的问题。

# unix - 用于在特定搜索字符串模式之前和之后提取行的 Unix 命令

> ID：11202253
> 
> 赞同：3
> 
> 时间：2012-06-26T07:04:33.303
> 
> 标签：unix, grep

如何在文件中搜索行并提取搜索行的上方和下方的行。

我的输入就像

```
Tue Jun 26 14:59:46 2012
 Warning ffffffff act_msg_ctms_remove_from_pending_queue: deleting message 44817201 from the queue.
Tue Jun 26 14:59:46 2012
 Warning ffffffff Finishing processing record number 44817201
Tue Jun 26 14:59:46 2012
 Warning  5000000 activity_queue_manager_finish_cb: unknown activity 120.
Tue Jun 26 14:59:46 2012
 Warning ffffffff Activity State Machine priority (2) finished
Tue Jun 26 14:59:46 2012
 Warning ffffffff 
====================================================
Processing database file "INCOMING_MESSAGES" record number 47810234 from user "(unknown)"
Tue Jun 26 14:59:46 2012
 Warning ffffffff ACTIVITY data: rec_num (47810234) size (116) 
Tue Jun 26 14:59:46 2012
 Warning ffffffff activity status: ACT_SENT 
Tue Jun 26 14:59:46 2012
 Warning ffffffff MESSAGE body "MVT
QFA6673/26.VHQOS.BNE
EA0541
"
Tue Jun 26 14:59:46 2012
 Warning ffffffff Finishing processing record number 47810234
Tue Jun 26 14:59:46 2012
 Warning ffffffff Activity State Machine priority (1) finished
Tue Jun 26 14:59:46 2012
 Warning ffffffff 
End processing record number 47810234 
```

==================================================== ==

我要求我的输出像

```
/

Tue Jun 26 14:59:46 2012
 Warning ffffffff MESSAGE body "MVT
QFA6673/26.VHQOS.BNE
EA0541"

/ 
```

我的搜索字符串是 MVT。

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T07:11:26.043

赛前赛后三线

```
grep -C 3 pattern filename 
```

要更好地控制要为匹配显示的前后行数，请使用

```
grep -A (num of after) -B (num of lines before)  pattern filename 
```

来自`man grep`：

```
 -A NUM, --after-context=NUM
          Print NUM lines of trailing context after matching lines.  
          Places a line containing -- between contiguous groups of matches.

   -a, --text
          Process a binary file as if it were text; 
          this is equivalent to the --binary-files=text option.

   -B NUM, --before-context=NUM
          Print NUM lines of leading context before matching lines.  
          Places a line containing -- between contiguous groups of matches.

   -C NUM, --context=NUM
          Print NUM lines of output context.  
          Places a line containing -- between contiguous groups of matches. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T07:11:08.503

Grep 可以选择在匹配之前和之后立即显示行。下面命令行中的数字是匹配之后和之前要显示的适当行数。例如

`grep -A3 -B5 yoursearchpattern inputfilepattern`

man grep 对于有关选项的详细信息很有用。

假设你有 GNU grep，检查你可以使用 --version 选项：

```
> grep --version
GNU grep 2.6.3 
```

# objective-c - 取消从 iOS 上传到 Facebook 的图片

> ID：11202269
> 
> 赞同：0
> 
> 时间：2012-06-26T07:06:10.617
> 
> 标签：objective-c, ios, xcode, facebook, cocoa-touch

我有一个将图像上传到 Facebook 的应用程序。这是我的代码的一部分：

```
[[self appDelegate] facebooking]; // checke that the user is loged in
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               labeledImage, @"source",
                               FB_IMG_POST_TITLE,@"message",
                               nil];

[ [[self appDelegate] getFacebookVar] requestWithGraphPath:[NSString stringWithFormat: @"/me/photos?access_token=%@", self.appDelegate.getFacebookVar.accessToken] andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

我想要

A）使上传过程成为不同的线程。

B) 为用户提供取消上传的选项。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:20:19.313

首先，您没有正确使用 facebook SDK。您不需要显式添加 access_token。请参阅此示例代码。

您不应该需要不同的线程，请求将被异步处理。是什么让你认为你需要这样做？

我不确定您是否可以默认执行 B)。您可以更改 sdk 源以授予对 NSURLConnection 的访问权限（您可以取消）。

# c#-3.0 - 我可以区分来自同一浏览器不同选项卡的请求吗？

> ID：11202273
> 
> 赞同：3
> 
> 时间：2012-06-26T07:06:37.547
> 
> 标签：c#-3.0, browser

我需要处理一个要求，如果用户从浏览器（IE8/9 或 Firefox）登录到我的应用程序并且他打开**同一浏览器的新选项卡**并再次登录，那么我的应用程序应该注销用户上一个标签。

# firefox-addon - 如何在后台加载文档？

> ID：11202274
> 
> 赞同：1
> 
> 时间：2012-06-26T07:06:56.363
> 
> 标签：firefox-addon

我正在尝试编写一个 Firefox 扩展程序，通过预加载序列项、预处理它们并根据请求显示来加速浏览页面序列。

有没有办法从特权扩展代码在后台加载和处理任意网页（在当前打开的同一站点上）的 DOM？

理想情况下，文档的 javascript 应该像在普通浏览器窗口中一样工作。我怀疑这需要一个隐藏的窗口。那个 javascript 上的上下文不应该是特权的。加载应该允许用户在所有可见的浏览器窗口中继续正常浏览。

我不喜欢将 iframe 注入当前打开的文档并使它们可选地可见的想法（[Webcomic reader userscript](http://userscripts.org/scripts/show/59842)使用的原理）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:21:23.497

从附加 SDK 中，该[`page-worker`](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/page-worker.html)模块可能接近您的需要：

> page-worker 模块提供了一种创建永久、不可见页面并访问其 DOM 的方法。

也就是说，我不知道是否可以将该不可见页面加载到（当前或新）选项卡/窗口中。您*也许*可以用`document.body`页面工作者的选项卡替换当前选项卡。可能。如果是合法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:13:23.907

您可以使用轻量级浏览器扩展来收集页面上的所有链接 onload 并使用链接标签来预取每个链接的内容，浏览器将在后台加载这些页面：[https ://developer.mozilla.org/en/Link_prefetching_FAQ](https://developer.mozilla.org/en/Link_prefetching_FAQ)

或者

如果您需要预加载页面并从扩展区域访问其 DOM，您可以使用附加 SDK 中的 Page Worker API：[https ://addons.mozilla.org/en-US/developers/docs/sdk /1.0/packages/addon-kit/docs/page-worker.html](https://addons.mozilla.org/en-US/developers/docs/sdk/1.0/packages/addon-kit/docs/page-worker.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T01:41:44.373

我相信是这样。假设您的 javascript 已经在运行

```
var doc = gBrowser.selectedBrowser.contentDocument; 
```

将获取已加载选项卡的文档，然后您可以对其进行处理并按照您的意愿进行处理。在后台执行此操作并保持应用程序响应是另一回事:)

# mysql - Magento 数据库连接其他网站

> ID：11202275
> 
> 赞同：0
> 
> 时间：2012-06-26T07:07:00.540
> 
> 标签：mysql, magento

我想将 Magento 数据库与我的其他网站连接以进行登录。使用户无需再次注册。

对于其他网站，我没有 Magento 层。只是原始的 PHP mysql 网站。

我想知道创建中央数据库的最佳方法是什么，以及如何从 Magento 数据库中检索用户信息（仅限用户名和密码。）。

我正在考虑执行原始的 php mysql 查询，但为此我需要在我的服务器上打开端口以连接到其他服务器，因为所有网站都在不同的服务器上。

什么是最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:40:20.183

为了实现 SSO（单点登录），最好的办法是将所有用户迁移到 Magento。

Magento 文件也应该可以在外部网站上访问（如果它们在同一台服务器上或通过挂载。）然后您可以使用类似以下代码的内容：

```
<?php

require_once '/path/to/magento/root/app/Mage.php';
umask(0);
Mage::app();

$session = Mage::getSingleton('customer/session');

// Login
try {
    $session->login($email, $password);
    $session->setCustomerAsLoggedIn($session->getCustomer());

    //Load the customer modules
    $customer = Mage::getModel('customer/customer')->setWebsiteId(Mage::app()->getStore()->getWebsiteId());

    //Get customer attribbutes
    $customer->loadByEmail($email);

} catch (Exception $e) {
    Mage::log($e->getMessage());
} 
```

其中 $email 和 $password 将包含从表单发送的值

# java - 在某个 INPUT 值之后获取 ArrayIndexOutOfBoundsException

> ID：11202276
> 
> 赞同：0
> 
> 时间：2012-06-26T07:07:03.317
> 
> 标签：java, arrays, exception

对于 46348 的 int 输入值之后给出的以下代码，我得到了`ArrayIndexOutOfBoundsException`。我在***for***循环中获得了保持数组限制的条件。但不知何故，我得到了这个例外，我无法弄清楚。我的要求是找到给定数字以下的所有素数。

```
 Scanner sc = new Scanner(System.in);
    int n= sc.nextInt();
    int[] arr= new int[n+1];
            for(int i=2;i<=n;i++)
            {
                if(arr[i]==0)
                {
                    for(j=i;j*i<=n;j++)
                        arr[j*i]=1; // Here i am getting Exception
                }
            } 
```

输入：

46349

输出：

java.lang.ArrayIndexOutOfBoundsException：-2146737495

502802

谢谢。，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:16:40.993

您遇到了算术溢出。

在 Java 中，`int`数据类型是 32 位有符号整数，这意味着它的值可以介于 -2147483648 和 2147483647 之间。

在这条线上：

```
for(j=i;j*i<=n;j++) 
```

如果`i`是 46349 那么`j`也变成 46349。如果用46349乘以46349，得到2148229801，大于2147483647，所以整数溢出，变成-2146737495。自然地，它小于 46349，因此`for`-loop 中的检查通过。但是你不能在 Java 中索引一个负值的数组，这就是你得到`ArrayIndexOutOfBoundsException`.

范围检查您的输入值`n < 46340`，或者如果它确实需要与`n = 46349`输入一起使用，请切换到`long`数据类型，这将适用于`n = 3037000499`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:16:46.463

46349 * 46349 太大，不能用作 Java 数组的索引。索引只是一个 32 位有符号整数，因此最大值为 2,147,483,648。

It passes the < n check because it overflows and comes back negative, so it is in fact less than n, but a negative number is not a legal array index.

# date - 如何分配特定日期是否在工作时间内。(SPSS)

> ID：11202286
> 
> 赞同：1
> 
> 时间：2012-06-26T07:07:41.927
> 
> 标签：date, spss

嗨，我是这个网站的新手，如果我没有彻底搜索这个问题，请原谅我！

基本上我正在做一个研究项目，其中一个变量是是否在正常工作时间内进行了 X 光检查。工作时间包括周一至周五，上午 8 点至下午 5 点。

我使用单独的变量 -[date+time (dd.mm.yyyy hh:mm)] -[time (hh:mm)] 输入了每个 X 射线的日期和时间。

我正计划手动输入这些信息，但我虽然肯定有办法自动化这个，因为我对 SPSS 的经验几乎为零，我想我应该请你们可爱的人来帮助我！

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:04:11.870

下面我通过一个使用 xdate 函数来提取星期几的快速示例，然后构造一个 if 语句来确定这些日期时间是否在`workhours`.

```
*Making example data.
data list free / xray_date (ADATE10) xray_time (TIME5).
begin data
7/6/2011 2:21
10/11/2011 15:42
07/06/2011 02:21
3/15/2011 0:21
end data.

*Here is example to find day of week name, 1 is Sunday and 7 is Saturday.
compute day_week = Xdate.Wkday(xray_date).

*to identify times of day in an if statement we need to make specific variables.
string begin_time end_time (A5).
compute begin_time = "08:00".
compute end_time = "17:00".
alter type begin_time end_time (TIME5).

*Then you can just make an if statement to identify whether a date-time meets your requirements.
compute workhours = 0.
if day_week >= 2 and day_week <= 6 and xray_time >= begin_time and xray_time <= end_time workhours = 1. 
```

对于这个特定示例，如果您运行该命令`list all.`，则结果输出将是；

```
 xray_date xray_time day_week begin_time end_time workhours 

07/06/2011    2:21    4.00000     8:00     17:00     .00000 
10/11/2011   15:42    3.00000     8:00     17:00    1.00000 
07/06/2011    2:21    4.00000     8:00     17:00     .00000 
03/15/2011    0:21    3.00000     8:00     17:00     .00000 
```

您可以看到记录`10/11/2011`被适当分类，因为它是星期二并且在工作时间内。所有其他记录都不是在上午 8 点到下午 5 点之间，因此被初始化为`workhours`变量的零值。

# java - 获取作为集合的对象的值

> ID：11202288
> 
> 赞同：1
> 
> 时间：2012-06-26T07:07:47.783
> 
> 标签：java, collections, casting

我正在使用一种在调用时返回对象的方法。该对象的类型是 java.util.Collections.unmodifiableSet 。该集合仅包含一个值，我需要访问该值并将其提供给另一种方法。问题是这样做：

```
Object o = table.getValue().toString(); 
```

返回包含在 [ ] 中的值，因为它是一个集合。另一个方法需要使用 Object 类型参数调用，应该只是没有 [ ] 的值。我通过使用正则表达式删除方括号来使事情正常工作，但希望通过以某种方式将集合转换为适当的类型来使事情正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:20:11.990

您可以使用迭代器：

```
String result = ((Collection) table.getValue()).iterator().next().toString(); 
```

将返回集合迭代器的第一个值。（假设，`table.getValue()`返回集合）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:13:07.107

如果你知道这个集合只包含一个值，你可以这样做：

```
String result = null;
Collection collection = (Collection)table.getValue();
for(Object o : collection) {
   result = o.toString();
   break;
} 
```

如果集合不能包含多个值，则可以删除`break`after`result = o.toString();`

希望有帮助。

* * *

**编辑**：已修改，现在从表中检索集合。向 Collection 添加演员表并添加中断

# session - Joomla 会话变量未存储

> ID：11202291
> 
> 赞同：1
> 
> 时间：2012-06-26T07:08:02.617
> 
> 标签：session, joomla1.5

我正在与 Joomla 合作。在一页上，我正在通过以下代码设置一些会话变量。

```
$session =& JFactory::getSession();
$session->set( 'myvar', 'helloworld','my_shop' ); 
```

然后我的网站重定向到另一个页面。但我无法通过以下方式在代码页中获取该变量。

```
echo 'Session variable myvar has value: ' . $session->get( 'myvar', 'empty' ); 
```

我在控制器中使用 $mainframe->redirect()。就在重定向之前，我得到了会话变量，而在重定向之后，我没有得到会话变量。

还有会话在重定向时具有其他变量（以前存储），但它们被保留！！！...提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:15:11.400

我仍在学习 Joomla 会话，但在我看来，您在尝试获取会话时使用了不同的命名空间。

用于设置会话的名称空间称为`my_shop`.

```
$session->set( 'myvar', 'helloworld','my_shop' ); 
```

用于获取会话的命名空间称为`empty`.

```
$session->get( 'myvar', 'empty' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:04:00.323

所以官方的回答是：

添加

> $session =& JFactory::getSession();

在调用 $session->get() 之前的第二页

# javascript - jQuery从文本区域中选择所有电子邮件

> ID：11202301
> 
> 赞同：1
> 
> 时间：2012-06-26T07:08:46.923
> 
> 标签：javascript, jquery, select, textarea

我正在尝试动态选择所有输入到文本区域并以空格或逗号分隔的有效电子邮件。（我不确定如何使用正则表达式在 javascript 中实现这一点）。

我的主要问题是一些误报，并且显示了额外的重复信息，（我假设使用 keyup），有没有办法解决这个问题，所以它只显示每封有效的电子邮件一次？

```
$(document).ready(function(){ 
$('.emails').keyup(function () {
    var matches = $('.emails').val().split(' ');
    for (var i = 0; i < matches.length; i++){
        if (validEmail(matches[i])){
            $('#emails-send').append("<div class='newmail'>" + matches[i] + "</div>");
        }
    }
});

function validEmail(emailAddress) {
    var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
    return pattern.test(emailAddress);
};

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:21:39.823

您可以将结果存储在另一个对象中并检查它们是否已经像这样附加：http: [//jsfiddle.net/LKPwg/2/](http://jsfiddle.net/LKPwg/2/)

这也使用超时来防止添加不完整的电子邮件地址。

```
var results = {};
var timer = null;

$(document).ready(function() {
    $('.emails').keyup(function() {
        clearTimeout(timer);
        timer = setTimeout("parseEmails()", 500);
    });
});

function parseEmails() {
    var matches = $('.emails').val().split(' ');
    for (var i = 0; i < matches.length; i++) {
        if (validEmail(matches[i])) {
            if (results[matches[i]] == undefined) {
                results[matches[i]] = matches[i];
                $('#emails-send').append("<div class='newmail'>" + matches[i] + "</div>");
            }

        }
    }
}

function validEmail(emailAddress) {
    var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
    return pattern.test(emailAddress);
};​ 
```

至于逗号/空格分隔，您可以先用空格替换逗号：

```
$('.emails').val().replace(',', ' ').split(' ') 
```

**更新**

[http://jsfiddle.net/LKPwg/4/](http://jsfiddle.net/LKPwg/4/)

检查重复项的替代方法，通过在结果中搜索找到的标记的子字符串并在这种情况下仅更新结果 div：（此示例不需要超时并使用数据属性来识别结果）

```
var substr = matches[i].substr(0, (matches[i].length - 1));
if (results[substr]) {
  delete results[substr];
  $('#emails-send .newmail[data-email="' + substr + '"]').html(matches[i]).attr('data-email', matches[i]);
}
else {
  $('#emails-send').append("<div class='newmail' data-email=" + matches[i] + ">" + matches[i] + "</div>");
} 
```

# android - 什么时候（如果有的话）我应该使用 Bitmap.recycle()？

> ID：11202313
> 
> 赞同：11
> 
> 时间：2012-06-26T07:09:53.247
> 
> 标签：android, bitmap, garbage-collection, out-of-memory, android-imageview

根据**Android Developers** site，`Bitmap.recycle()`方法定义是：

> 释放与此位图关联的原生对象，并清除对像素数据的引用

我开发了一些创建/解码大量位图的应用程序，并将结果位图对象放入`ImageView`s. 有时我会遇到一些著名的例外情况，例如：

> 位图大小超出虚拟机预算

和

> 内存不足错误

此外，我确定我没有任何可能导致这种情况的内存泄漏。

经过大量搜索，我发现了“回收”方法，并在不再需要时使用它来释放位图的本机内存。 **好像帮了大忙**。

我在问在这种情况下我是否应该这样做，因为我知道系统无论如何都会这样做而没有明确调用它（是吗？也许我错了）。

我应该在这种情况下使用这种方法吗？

在什么情况下我应该使用这种方法？

我应该使用这种方法吗？

提前致谢。

**更新：**

谷歌最近发布了[这个](http://developer.android.com/training/displaying-bitmaps/manage-memory.html)指南，上面写着：

> 在 Android 2.3.3（API 级别 10）及更低版本上，建议使用 recycle()。如果您在应用程序中显示大量位图数据，您可能会遇到 OutOfMemoryError 错误。recycle() 方法允许应用程序尽快回收内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:26:59.537

> 在什么情况下我应该使用这种方法？

位图在 GC 决定时由 GC 进行 GC。但在某些情况下，它可能会延迟。并且永远记住java中的拇指规则（也许它也适用于其他PL）。GC回收对象的速度可能与创建对象的速度不同。所以有时GC回收速度很慢。

所以 recycle() 意味着如果你想尽快释放内存，你应该调用 recycle()

> 我应该使用这种方法吗？

这是一个高级调用，通常不需要调用，因为当没有更多对该位图的引用时，正常的 GC 进程会释放此内存。但是如果您遇到**位图大小超出 vm 预算**或**内存不足等问题错误**，那么您需要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:28:28.307

我确实在我知道不再使用位图的操作中使用它。

```
public static Bitmap getMaskedContactImage (Context context, Bitmap contactImageBitmap, int maskToBeApplied) {  
    Bitmap mask = BitmapFactory.decodeResource(context.getResources(), maskToBeApplied);
    Bitmap output = Bitmap.createBitmap(mask.getWidth(),mask.getHeight(), Config.ARGB_8888);
    final Rect finalRect = new Rect(0, 0, contactImageBitmap.getWidth(), contactImageBitmap.getHeight());
    final Rect originRect = new Rect(0, 0, mask.getWidth(), mask.getHeight());
    Canvas canvas = new Canvas(output);

    Paint xferPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
    xferPaint.setColor(Color.BLACK);

    xferPaint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));

    canvas.drawBitmap(contactImageBitmap, finalRect, originRect, null);
    canvas.drawBitmap(mask, originRect, originRect, xferPaint);

    contactImageBitmap.recycle();
    mask.recycle();

    return output;
  } 
```

在这样的地方，我确定我不会使用面具或contactImage。

我发现了一个非常好的位图处理资源，它可以帮助[显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)。

问候，亚历克斯

# c# - 如何通过 Javascript 或插件访问 Dynamic CRM 2011 中的服务器日期？

> ID：11202315
> 
> 赞同：-1
> 
> 时间：2012-06-26T07:10:00.027
> 
> 标签：c#, javascript, dynamics-crm, dynamics-crm-2011, dynamics-crm-4

我想在 Dynamic crm 2011 中获取服务器日期

通过 new Date() 我只得到系统时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:40:51.320

你的问题真的不是很清楚哈希姆。您正在尝试`new Date();`哪个是 JScript。由于这是客户端，它不会通过服务器来检索日期，因此您获得的是本地系统时间而不是服务器时间。

您将需要在服务器端执行代码以获取服务器时间。一种解决方案是插件，您只需使用它`var myDate = DateTime.Now;`来获取当前系统时间。

您还没有详细说明您希望如何使用它，所以现在我无法告诉您如何处理该值 - 但也许您正在使用它来填充实体属性，例如在更新前插件中：

```
if (pluginContext.InputParameters.Contains("Target") && 
    pluginContext.InputParameters["Target"] is Entity)
{
    // Obtain the target entity from the input parmameters.
    var entity = (Entity)pluginContext.InputParameters["Target"];
    // get current date/time
    var now = DateTime.Now;
    entity.Attributes.Add("new_mydatetimefield", now);
} 
```

# java - ZeroMQ：如何实现类 C 的多线程

> ID：11202316
> 
> 赞同：6
> 
> 时间：2012-06-26T07:10:03.637
> 
> 标签：java, multithreading, sockets, zeromq

在 C 中，我们有套接字和描述符，可以只取其中一个并将它们交给线程，这使得您可以接受传入的连接并将工作交给您喜欢的线程，线程可以发送本身的回应。

我的问题是，如何使用 ZeroMQ 实现这一目标？使用请求-回复模式，我似乎无法异步发送和接收，响应必须按顺序排列，我的目标是让多个客户端连接到单个服务器，而不是按顺序发送响应。

我查看了请求响应模式，但 API 明确指出使用具有多个线程的 Socket 是一个坏主意。也许我错过了一些东西，或者 ZeroMQ 比我知道的更聪明。如果您需要任何进一步的信息，只需发表评论，我会尽力提供信息。

我还查看了提供的示例：[代码示例](https://github.com/imatix/zguide/tree/master/examples/)

这是套接字描述：[ZMQ-Socket](http://api.zeromq.org/2-2:zmq-socket)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T02:19:57.030

经过几天的搜索，Zeromq 频道的 IRC 中一位友好的人为我提供了帮助。

一个更新的链接，以防有人仍在寻找它。应该坚持！ [http://zguide.zeromq.org/](http://zguide.zeromq.org/)

这个例子真的很好用，它很容易适应，我使用了带有线程池的 boost 线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T05:54:44.303

通常，当您尝试使现有设计适应 0MQ 时，您会遇到麻烦。这里现有的设计将套接字（通常是 HTTP）传递给子进程或线程，然后允许它们响应。这不是一个非常优雅的设计。它之所以有效，是因为每个新连接都作为套接字存在，并且因为当发送回复时，套接字被销毁。这些都不适用于 0MQ 应用程序。

0MQ 设计使用前端 ROUTER 套接字来拉入来自客户端的请求。然后，它通过 inproc:// 套接字将这些请求传递给工作线程，使用后端 DEALER 来处理请求。工作线程使用一个 REP 套接字来接收请求，并将它们的回复发送回去。然后主线程轮询前端和后端套接字，简单地在两者之间路由消息。

这是旧博客文章解释的内容（使用旧的 XREP/XREQ 名称），并在此处以多种语言的示例进行了更详细的解释：http://zguide.zeromq.org/page:all#Multithreading-with- [MQ](http://zguide.zeromq.org/page:all#Multithreading-with-MQ)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T13:30:03.647

据我了解，您需要一台服务器，该服务器希望为每个传入连接创建新线程，并且每个线程都只回复一个连接，如果是这样，这是完全执行此操作的示例代码： [http ://www.kieser.net/linux/java_server .html](http://www.kieser.net/linux/java_server.html)

# android - 每个状态更改的应用内计费通知 ID 是唯一的吗？

> ID：11202317
> 
> 赞同：1
> 
> 时间：2012-06-26T07:10:04.343
> 
> 标签：android, notifications, in-app-purchase, in-app-billing

在Android文档中它指出；

> 通知Id
> 
> 与 IN_APP_NOTIFY 广播意图一起发送的唯一标识符。每个 notificationId 对应于一条等待在 Google Play 服务器上检索的指定消息。您的应用程序通过 GET_PURCHASE_INFORMATION 消息发回 notificationId，以便 Google Play 确定您正在检索哪些消息。

但是，每个唯一的购买状态是否只有一条消息因此只有一个唯一的通知 ID。或者谷歌是否可以决定为同一个独特的购买状态转换创建多条消息（可能在未能足够快的响应之后）？

换句话说：每个购买状态转换的组合 [OrderId,NotificationId] 是否唯一？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:01:14.657

对于每个 IN_APP_NOTIFY，NotificationId 都是唯一的。

这是你问的吗？

这是应用内购买的视觉概述，它可能会让您更加清楚：

[![Android 应用内购买概览](../Images/8adfd79b182125827475fa8457cad1c3.png)](https://i.stack.imgur.com/ARsrR.png)
[（来源：[blundellapps.co.uk](https://blog.blundellapps.co.uk/wp-content/uploads/2012/06/overview.png)）]

[> 更大的图像 <](https://blog.blundellapps.co.uk/wp-content/uploads/2012/06/overview.png)

参考：[http ://blog.blundell-apps.com/overview-of-android-in-app-billing-flowchart/](https://blog.blundellapps.co.uk/overview-of-android-in-app-billing-flowchart/)

# java - 如何为 Android 开发代理服务器 (TCP)？

> ID：11202318
> 
> 赞同：1
> 
> 时间：2012-06-26T07:10:09.910
> 
> 标签：java, android, http, proxy, youtube

我正在尝试在 Android 中为 YouTubeApp 开发代理服务器 (TCP)。我将使用 ProxyDroid（手机已植根），以便请求/响应通过我的代理服务器。作为它的 Android，我使用的是 Java。但是有几个挑战：

1.  必须解析来自 YouTubeApp 的请求。是否有任何现有的用于解析 HTTP 请求的库（在 Java 中并且可以与 Android 一起使用）？任何人都可以为此目的建议一些代码片段吗？或者，我必须自己进行解析吗？

2.  请求远程站点时；例如 www.google.com，我必须使用 URL 和 openConnection() 吗？或者，也可以使用套接字吗？我正在尝试找到一种方法，以便我可以使用套接字并从任何站点获得响应？

希望很快收到你们的来信。

# image - Google Maps V.3 自定义图标

> ID：11202326
> 
> 赞同：0
> 
> 时间：2012-06-26T07:10:46.197
> 
> 标签：image, google-maps, google-maps-api-3, marker

如何使用 Google Maps 3 为自定义标记制作类似的脚本？就像 v.2 一样：

```
var iconBlue = new GIcon(); 
iconBlue.image = 'images/cell1.png';
iconBlue.shadow = '';
iconBlue.iconSize = new GSize(32, 32);
iconBlue.shadowSize = new GSize(22, 20);
iconBlue.iconAnchor = new GPoint(3, 16);
iconBlue.infoWindowAnchor = new GPoint(15, 15);

var iconRed = new GIcon(); 
iconRed.image = 'images/cell3.png';
iconRed.shadow = '';
iconRed.iconSize = new GSize(32, 32);
iconRed.shadowSize = new GSize(22, 20);
iconRed.iconAnchor = new GPoint(15, 2);
iconRed.infoWindowAnchor = new GPoint(15, 15);

var iconGreen = new GIcon(); 
iconGreen.image = 'images/cell2.png';
iconGreen.shadow = '';
iconGreen.iconSize = new GSize(32, 32);
iconGreen.shadowSize = new GSize(22, 20);
iconGreen.iconAnchor = new GPoint(-9, 2);
iconGreen.infoWindowAnchor = new GPoint(20, 15);

var customIcons = [];
customIcons["60"] = iconBlue;
customIcons["240"] = iconRed;
customIcons["350"] = iconGreen; 
```

我在第 3 版中写了以下内容，但未显示标记。

```
var cellone = new google.maps.MarkerImage("images/cell1.png", 
    new google.maps.Size(20, 34), new google.maps.Point(0,0), 
    new google.maps.Point(3, 16));
var celltwo = new google.maps.MarkerImage("images/cell2.png",
    new google.maps.Size(20, 34), new google.maps.Point(0,0), 
    new google.maps.Point(-9, 2));
var cellthree = new google.maps.MarkerImage("images/cell3.png", 
    new google.maps.Size(20, 34), new google.maps.Point(0,0), 
    new google.maps.Point(15, 2));

var customIcons = [];
customIcons["60"] = cellone;
customIcons["240"] = celltwo;
customIcons["350"] = cellthree; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:44:38.723

[Mike Williams 的 v2“类别”示例的翻译版本](http://www.geocodezip.com/v3_MW_example_categories.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:48:54.090

我最近自己做了这个图标的东西。而且我最初使用的代码类型与您使用的相同，但这不起作用。显然 new GIcon() 无法正常运行。

有一种非常简单的方法可以更改图标，它不使用变量。这就是我所做的。

将 markerVariable 声明为全局变量。当您创建新标记时，其中一行应该是 icon : ...

这是我的代码示例。当然，您必须更改某些行以使其适用于您的程序（除非您更改某些功能，否则您不能使用带有标签的标记）。

最后，图标 : ... 可以是您计算机上的链接或位置。

```
var iconArray = [
                 ["http://www.google.com/intl/en_us/mapfiles/ms/micons/red-dot.png"],
                 ["http://www.google.com/intl/en_us/mapfiles/ms/micons/yellow-dot.png"],
                 ["http://www.google.com/intl/en_us/mapfiles/ms/micons/green-dot.png"],
                 ["http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png"],
                 ["http://www.google.com/intl/en_us/mapfiles/ms/micons/purple-dot.png"],
                 ["http://www.google.com/intl/en_us/mapfiles/ms/micons/pink-dot.png"],
                 ["http://www.google.com/intl/en_us/mapfiles/ms/micons/ltblue-dot.png"]

                 ]; 

function getMarkers() {
    for (i = 0; i < locations.length; i++) { 
            marker[i] = new MarkerWithLabel({
                position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                draggable: false,
                map: map,
                icon: new google.maps.MarkerImage(iconArray[i]),
                //icon: new google.maps.MarkerImage("http://www.google.com/intl/en_us/mapfiles/ms/micons/pink-dot.png"),
                //labelContent: locations[i][3],
                labelAnchor: new google.maps.Point(30, 0),
                labelClass: "labels", // the CSS class for the label
                 labelStyle: {opacity: 0.75}
            });

        }
}

function initialize() {
  getMarkers();
} 
```

# html - HTML5 验证元数据

> ID：11202327
> 
> 赞同：1
> 
> 时间：2012-06-26T07:10:53.910
> 
> 标签：html, validation

所以我已经在网上冲浪了半个小时，我找不到任何可以帮助解决这个错误的东西

第 5 行，第 269 列：元素元缺少以下一个或多个属性：http-equiv、itemprop、名称、属性。... Javascript，如果没有 Javascript，您将无法操作网站" /> 元素元属性：全局属性名称 http-equiv 内容字符集

有人能告诉我我的元标签有什么问题吗？
我的相关代码如下：

```
<meta charset="utf-8">
<meta content="etc etc info" />
<meta http-equiv="refresh" content="30" />
<meta name="author"  content="my name" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:13:51.407

是`<meta content="etc etc info" />`为了什么？我想它应该是这样的`<meta name="description" content="Lorem ipsum dolor sit amet, consetetur sadipscing elitr." />`

您只提供某物的价值，但没有名称。所以浏览器不知道这是干什么用的。[您可以在wikipedia](http://en.wikipedia.org/wiki/Meta_element)或许多其他网站上找到更多元示例。

# php - 自动链接功能无法正常工作

> ID：11202332
> 
> 赞同：2
> 
> 时间：2012-06-26T07:11:18.207
> 
> 标签：php, regex, autolink

我创建了一个 PHP 函数，它会自动将 URL 转换为链接，将 Twitter`@reply`用户名链接到其 Twitter 个人资料，并将电子邮件地址转换为带有`mailto`协议的链接。

这是脚本：

```
function autolink($a, $b){
        $e = "";
        $f = array(
            'link' => '~(http(s|)\:\/\/(www\.|)((\w+)\.(\w+)(\:[0-9]{2,5}|)\.[a-z]{2,5}|(\w+)(\:[0-9]{2,5}|)\.[a-z]{2,5}))((((\/|)\w+)(\.[a-z]{2,5}|))+)(\?(\w+\=\w+(\&|))+|)~',
            'email' => '~\w+\@\w+(\:[0-9]{2,5}|)\.[a-z]{2,5}~',
            'twitter' => '~\@([a-zA-Z_0-9]){1,15}~'
        );
    switch ($b) {
    case "link":$e = preg_replace_callback($f['link'], function ($a) {return '<a href="'.$a.'" rel="nofollow" target="_blank">'.$a.'</a>';},$a);break;
    case "email":$e = preg_replace_callback($f['email'], function ($a) {return '<a href="mailto:'.$a.'" rel="nofollow" target="_blank">'.$a.'</a>';},$a);break;
    case "twitter":$e = preg_replace_callback($f['twitter'], function ($a) {return '<a href="https://twitter.com/#!/'.str_replace('@','',$a).'" rel="nofollow" target="_blank">'.$a.'</a>';},$a);break;
    }
    return $e;
} 
```

我遇到的唯一问题是，它没有返回链接，而是返回了单词：“Array”。

例如，这个：

```
autolink("This is my site http://weebuild.biz", "link"); 
```

正在返回这个：

> 这是我的网站数组

当它应该返回这个：

> 这是我的网站`<a href="http://weebuild.biz" rel="nofollow" target="_blank">http://weebuild.biz</a>`

原始脚本在我也写的 JavaSript 中：http: [//jsfiddle.net/shawn31313/umgqR/2/](http://jsfiddle.net/shawn31313/umgqR/2/)

由于我不是 PHP 开发人员，因此 JavaScript 版本具有更多功能。

也许问题是我从 JavaScript 中获取了正则表达式并将其放入 PHP 中。我不确定 PHP 中的正则表达式是否与 JavaScript 不同。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:19:51.843

尝试以下更改：

```
case "link":$e = preg_replace_callback(
        $f['link'],
        function ($a) {
            return '<a href="'.$a[0].'" rel="nofollow" target="_blank">'.$a[0].'</a>';
        },
        $a
     );
     break; 
```

问题是回调的参数将是一个数组，而不是一个字符串。

从[文档](http://php.net/manual/en/function.preg-replace-callback.php)：

> 将调用并传递主题字符串中匹配元素数组的回调。回调应该返回替换字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:22:37.873

回调的`$a`内部是一个数组，并返回如下内容：

```
Array
(
  [0] => http://weebuild.biz
  [1] => http://weebuild.bi
  [2] => 
  [3] => 
  [4] => weebuild.bi
  [5] => 
  [6] => 
  [7] => 
  [8] => weebuild
  [9] => 
  [10] => z
  [11] => z
  [12] => z
  [13] => 
  [14] => 
  [15] => 
```

)

您可能想要引用`$a[0]`而不是仅仅引用`$a`. 当然，您需要进行一些检查以确保存在该值并在引用它时避免任何意外错误。

# bash - 使用脚本在服务器上执行多个作业

> ID：11202335
> 
> 赞同：-1
> 
> 时间：2012-06-26T07:11:21.443
> 
> 标签：bash, shell, unix, jobs

我正在尝试使用该`qsub`命令自动将许多作业发送到服务器。我制作了一个 shell 脚本，它根据一些输入文件创建多个批处理脚本，使用`printf`. 问题是这些作业无法运行。当我使用 gedit 打开从我的 shell 脚本创建的这些批处理脚本并保存它们而不修改它们时，它们就可以工作了。这让我觉得这是某种格式问题。

你能给我一个解决这个问题的方法吗？

这是创建要提交的脚本的 shell 脚本：

```
 #!/bin/sh
cd /home/PATH/

FILES=$(ls inpt/ | grep "centers")
i=1
declare -i i
for f in $FILES
do
    printf "#!/bin/bash\ncd /home/PATH/\n./nvt inpt/%b" "$f" > run-script$i.sh
    i=$i+1
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:34:40.313

您必须为脚本设置可执行位：

```
printf "#!/bin/bash\ncd /home/PATH/\n./nvt inpt/%b" "$f" > run-script$i.sh
chmod +x run-script$i.sh 
```

为确保这不是格式问题（或任何问题`printf`），您可以尝试使用`echo`：

```
echo '#!/bin/bash' > run-script$i.sh
echo cd /home/PATH/ >> run-script$i.sh
echo ./nvt "inpt/$f" >> run-script$i.sh 
```

# java - 优先队列不维护队列属性

> ID：11202339
> 
> 赞同：0
> 
> 时间：2012-06-26T07:11:26.263
> 
> 标签：java, android

我已经创建了一个优先阻塞队列。插入是根据优先级正确完成的。当我删除队列的头部时，队列的最后一个元素成为队列的头部，过程重复。假设我在队列中插入了 123456789。

```
First deleted : 1;  queue elements :92345678  
Second deleted:  9; queue elements :8234567 
```

等等。

我需要实现未维护的队列属性。

即第一次删除：1 个队列元素：23456789
第二次删除：2 个队列元素：3456789

```
package com.block.ui;

import java.util.Iterator;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class PriorityBlockQueSamplActivity extends Activity {
/** Called when the activity is first created. */

EditText et;
EditText et2;
Button b1;
Button b2;

Controller c ;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    et=(EditText)findViewById(R.id.editText1);
    et2=(EditText)findViewById(R.id.editText2);
    b1 =(Button)findViewById(R.id.button1);
    b2 =(Button)findViewById(R.id.button2);
    c= new Controller();

    Message m = new Message();
    m.mPriority=1;
    m.Subject="1";
    c.insert(m);

    Message n = new Message();
    n.mPriority=1;
    n.Subject="2";
    c.insert(n);
    Message p = new Message();
    p.mPriority=1;
    p.Subject="3";
    c.insert(p);

    Message q = new Message();
    q.mPriority=1;
    q.Subject="4";
    c.insert(q);

    b1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Iterator<Message> iter = c.getQueue().iterator();
            while(iter.hasNext()){
                Message m =iter.next();
                Log.i("MESSAGE", "Element "+m.Subject+" priority :"+m.mPriority);
            }

        }
    });
    b2.setOnClickListener(new  OnClickListener() {

        @Override
        public void onClick(View v) {
            Message m=c.getMessage();
            c.delete(m);

        }
    });
} 
```

}

还有一堂课

```
 `public class Controller {

private int queueSize=300;
Comparator<Message> comparator = new PriorityComaparator();
PriorityBlockingQueue<Message> qu = new PriorityBlockingQueue<Message>(queueSize,comparator);

            public Controller() {

}

public void insert(Message msg) {

    boolean status = qu.add(msg);
    if (status)
        log("Added successfully " + msg.Subject + " priority "
                + msg.mPriority + " size :" + qu.size());
    else
        log("Failed to add " + msg.Subject + " with priority "
                + msg.mPriority);

}

public void delete(Message msg) {
    if (qu.contains(msg)) {
        boolean status = qu.remove(msg);
        if (status)
            log("deleted successfully " + msg.Subject + " priority " + msg.mPriority
                    + " size :" + qu.size());
        else
            log("Failed to delete " + msg.Subject + " with priority "+ msg.mPriority);
    }
}

public Message getMessage() {
    return qu.peek(); 
}

public PriorityBlockingQueue<Message> getQueue(){
    return qu;
}
void log(String msg) {
    Log.i("QUEUE", msg);
}

class PriorityComaparator implements Comparator<Message> {

    @Override
    public int compare(Message m, Message n) {
        int y = ((Message) m).mPriority; // 1 -highest 3-least
        int z = ((Message) n).mPriority;

        if (y < z) {
            return -1;
        }
        if (y > z) {
            return 1;
            }
            return 0;
            }

        }

}` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:36:58.517

如果在您的示例中，所有插入的元素都具有*相同*的优先级，则检索顺序没有明确定义。从[PriorityQueue](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)（[PriorityBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/PriorityBlockingQueue.html)派生出相同的排序规则）：

> 此队列的头部是相对于指定排序的最小元素。如果多个元素以最低值绑定，则头部是这些元素之一——绑定**被任意打破。**

（重点补充）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:19:47.477

如果您使用的优先级队列是您个人的实现，那么请尝试使用**堆**数据结构。

正如维基页面所说：

> 堆是一种称为优先级队列的抽象数据类型的最有效实现。

这是该[页面](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)的链接。

请记住，在 Java 中您不需要实现它，如果您需要它在多线程程序中工作，您可以使用标准的[PriorityQueue](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)类或[PriorityBlockingQueue 。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/PriorityBlockingQueue.html)

# postgresql - iReport Designer：关系的权限被拒绝

> ID：11202340
> 
> 赞同：0
> 
> 时间：2012-06-26T07:11:27.637
> 
> 标签：postgresql, ubuntu, jasper-reports, ireport

我以前没有遇到过这个错误。我有一个`db`包含表的数据库，我在 iReport Designer 中使用所有者`tb_name`的凭据创建了一个连接。`db`然后我创建新报告，但查询`select * from tb_name;`抛出以下错误：

> SQL 问题： ERROR: permission denied for relation tb_name 查询错误
> 
> 消息：net.sf.jasperreports.engine.JRException：SQL 问题：错误：关系 tb_name 的权限被拒绝级别：严重堆栈跟踪：SQL 问题：错误：关系 tb_name com.jaspersoft.ireport.designer.data.fieldsproviders 的权限被拒绝。 SQLFieldsProvider.getFields(SQLFieldsProvider.java:435) com.jaspersoft.ireport.designer.connection.JDBCConnection.readFields(JDBCConnection.java:470) com.jaspersoft.ireport.designer.wizards.ConnectionSelectionWizardPanel.validate(ConnectionSelectionWizardPanel.java:146) org.openide.WizardDescriptor$7.run(WizardDescriptor.java:1357) org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572) org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997 )

当我测试连接时，一切都很好。这个错误的原因是什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:28:43.253

请检查用户是否有权执行语句。某些数据库更改可能导致用户失去查询权限。

# regex - 在函数调用中查找参数的正则表达式

> ID：11202346
> 
> 赞同：1
> 
> 时间：2012-06-26T07:11:43.707
> 
> 标签：regex

我需要从函数中提取参数说，Function_1(arg1,agr2,....argn)。

是否可以在不带括号的情况下单独剥离参数。

我尝试使用`\([\w,]*\)`表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:15:03.270

如果你想“抓住”比赛，你需要在他们周围放大括号：

```
 \(([\w,]*)\) 
```

这样，您将`arg1,arg2`在`$1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:13:27.277

使用这个正则表达式`(?<=[\w]*\()[\w,]*(?=\))`来解决目的

# .net - Spotify .Net 库

> ID：11202347
> 
> 赞同：2
> 
> 时间：2012-06-26T07:11:49.620
> 
> 标签：.net, spotify

是否有可靠、有效且有据可查的 .Net Spotify 库？到目前为止，我一直在摆弄 shapotify 和 libspotify-sharp，但没有运气！

我正在尝试创建一个新的播放列表，然后将其加载到 Spotify 客户端。这是我迄今为止尝试使用的Sharpotify

```
using Sharpotify;  
public JsonResult AddList(string list, string name)
{  
SpotifyConnection connection = new SpotifyConnection(new harpotify.Cache.FileCache(),new TimeSpan(0,1,0));  
string username = "username";  
string password = "password";  
bool result = false;  
try  
{  
 connection.Login(username, password);  
 Sharpotify.Media.Playlist playlist = connection.PlaylistCreate(name);  
 String [] tracks = list.Split(';');  
 for (int i = 0; i < tracks.Length; i++)  
 {  
  if(tracks[i] != string.Empty){  
   Sharpotify.Media.Track t = new Sharpotify.Media.Track(tracks[i]);  
   if (t != null){  
    playlist.Tracks.Add(t);  
   }  
 }  
 }  
 result = true;  
}  
catch (Sharpotify.Exceptions.AuthenticationException ex)  
{  
 connection.Close();  
 result = false;  
}  
catch (Exception ex)  
{  
connection.Close();  
result = false;  
}
return Json(result, JsonRequestBehavior.AllowGet);            
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T23:20:05.043

你看过[libspotify.NET](http://libspotifydotnet.codeplex.com/)吗？与 Sharpotify 相比，它看起来是相对最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:14:54.957

它可能不符合您的要求，但您可以考虑查看[Sharpotify](http://sharpotify.codeplex.com/)。从它的页面：

> Sharpotify 是 C# 中的 Spotify 库。它基于 Jotify 和 SharPot 项目。它不是一个 libspotify 包装器，它是一个完整的 .Net Spotify 协议实现。

但请注意，截至 2012 年 7 月，最新版本已超过 2 年；它可能不再被积极维护。

# java - eclipse java如何插入构建时间戳

> ID：11202354
> 
> 赞同：3
> 
> 时间：2012-06-26T07:12:25.837
> 
> 标签：java, build, eclipse-plugin

我正在为我的项目使用 Eclipse Java。我想向用户显示构建时间。如何让 Eclipse（或插件）将构建时间戳插入属性文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:15:32.340

您可以使用*maven*或*ant*。一个快速谷歌的 Maven 和构建时间戳返回[了这个](https://code.google.com/p/maven-timestamp-plugin/)。

Maven 也非常适合管理依赖项等，但需要一些时间来适应它。Ant 稍微容易一些，但只是用于构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:51:57.380

使用 Ant，您可以将构建时间戳保存到属性文件中。例如：如果您有一个名为 project.props 的属性文件，那么在 Ant 中您可以定义一个可以在每次构建期间运行的目标：

```
<target name="buildtime">
    <tstamp>
        <format property="buildtime" pattern="yyyy MMMM dd HH:mm:ss" locale="en"/>
    </tstamp>

    <echo message="Current time and date: ${buildtime}" />
<!-- property name="buildtime" value="${buildtime}"/ -->
    <propertyfile file="project.props">
        <entry key="buildtime" type="date" value="${builltime}"  />
    </propertyfile>
</target> 
```

构建后，属性文件将使用构建时间戳进行更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T01:17:05.207

我通过添加一个'builder'解决了这个特殊问题（在Eclipse 3.8.1 debbuild中）.. [Project] --> Properties --> Builders --> New --> Program

在这里，我在我的项目目录中添加了一个 bash 脚本的链接，该脚本将一个属性文件写入我的项目资源/属性文件夹，其中 key=value 对主要、次要、svn 修订、时间戳等。确保脚本构建器高于Java 生成器。

在我的项目中，我在请求时将这些属性读入版本对象。

这可以正常工作，尽管它非常不稳定，除非我在“构建选项”选项卡中选择“运行构建器：”下的所有选项。Eclipse 似乎存储了很多冗余状态，尤其是关于文件系统。使用这些设置，版本会重新生成很多，但这适合我。我有相同的机制为我的项目使用的每个模块生成版本属性。

最大的反特性是在导出 jar 文件时无法触发此行为。最好有一个选项在导出之前触发清理/构建。

Ps：我有一个独立于 Eclipse 的并行 Ant 构建，它使用相同的 bash 脚本来生成属性文件。在 Eclipse 中使用 Ant 或 Maven 不适合我。

# asp.net-mvc-3 - .NET MVC3/保持临时模型

> ID：11202357
> 
> 赞同：0
> 
> 时间：2012-06-26T07:12:42.123
> 
> 标签：asp.net-mvc-3

我有一种情况，我必须从用户那里获取输入（表单）。按下继续按钮后，将显示下一个视图页面。但是在继续按下后我不想将模型存储在数据库中。我必须根据用户之前给出的输入显示一些细节（组合一些表格），然后再次从用户那里获取一些数据。只有这样我才想将模型存储在相应的表中。我该怎么做？我尝试`Model`从用户那里获取并传递给生成下一页的函数。这是这样做的方法吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:25:39.973

将第一个表单提交的模型存储在`session`.

```
[HttpPost]
public ActionResult ContinueForm1(Model1 model1)
{
    if(ModelState.IsValid)
    {
       Session["Model1"] = model1;

       return View("Form2");
    }

    return View();
}

[HttpPost]
public ActionResult ContinueForm2(Model2 model2)
{
     if(ModelState.IsValid)
     {
        ... model2 is already here, get the model1 from session
        ... and save to datatbase finally return a different view or redirect to some
        ... other action
     }

     return View();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:34:07.147

你正朝着正确的方向前进。

您需要获取从第一个视图传回的模型 - 最好在此处使用 ViewModels，而不是直接绑定到您的数据库模型。看看[http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/](http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/)我[为什么要使用视图模型？](https://stackoverflow.com/questions/4878937/why-should-i-use-view-models)至于为什么这些都是好东西。

最简单的方法是将模型作为参数传递给您的方法，例如

假设您的视图使用相同的 ViewModel（这可能是也可能不是），那么您可以将视图模型直接发送到您的新视图 - 否则您可以将元素复制到新的视图模型中并发送。

例如

```
[HttpPost]
public ViewResult Step1(MyViewModel viewModel)
{
    //Do some validation here perhaps
    MySecondViewModel secondViewModel = new MySecondViewModel{
                        Id = viewModel.Id,
                        // etc. etc.
                };  
return View("Step2", secondViewModel);
} 
```

然后您可以根据需要继续操作，直到您必须将实体持久保存到数据库中。注意，因为您不需要在表单中执行任何特殊操作以使其将模型作为参数发布，只要视图是对该 ViewModel 的强类型。

# firefox-addon - 检测 Firefox 扩展卸载事件

> ID：11202360
> 
> 赞同：1
> 
> 时间：2012-06-26T07:13:03.257
> 
> 标签：firefox-addon

我有一个引导扩展，并且`bootstrap.js`有一个卸载事件：

```
function uninstall(data, reason) {
     console.log('uninstall event');
} 
```

但是当我卸载我的扩展`uninstall`功能时，并没有在控制台上写“卸载事件”。

我已经`extensions.logging.enabled`开始`true`使用`about:config`. 卸载时会在控制台上打印：

> LOG addons.xpi：在 user@example.com 版本 1.4 上调用引导方法卸载

但是我在事件中编写的自定义消息`uninstall`没有打印出来。

# .net - Razor 客户端模板的好处

> ID：11202362
> 
> 赞同：1
> 
> 时间：2012-06-26T07:13:05.463
> 
> 标签：.net, asp.net-mvc-3, razor

我最近遇到了[Razor 客户端模板。](https://github.com/jchadwick/RazorClientTemplates)但我并不完全了解它的用途。我想向社区验证，我所了解的。

1.  客户端模板就像部分视图，但我们可以将其加载为 javascript。然后在需要时调用该javascript。

2.  它将节省服务器调用，因为 HTMl 标记现在位于浏览器/Javascript 中。

请让我知道，这是否会在性能方面有重大改进。**如何？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:50:58.460

有时您需要在服务器端和客户端创建相同的 html 标记。那时您将有两个模板：服务器端的剃须刀模板和客户端的 jquery 模板（或其他模板）。有两个版本来生成相同的标记会在维护和开发方面产生问题。

Razor 客户端模板库可帮助您拥有一个用 Razor 编写的模板，该模板也可以在客户端使用，因此易于维护。

重要的是该库还很年轻，因此当您尝试在客户端使用复杂的剃须刀模板时可能会遇到限制。

# java - 通过它连接 Java 到 MySQL 需要代理、用户名和密码

> ID：11202364
> 
> 赞同：2
> 
> 时间：2012-06-26T07:13:10.283
> 
> 标签：java, mysql, proxy, connection

我正在开发一个桌面应用程序，该应用程序连接到 godaddy.com 服务器中的 MySQL 数据库。

一切正常，除非在需要代理、用户名和密码的网络上工作

我需要从代码中设置代理吗？如何？
或者附近有没有？

这是我的数据库连接代码：

```
url = "jdbc:mysql://XXXXX.db.XXXXX.hostedresource.com/";
dbName = "XXXXXX";
driver = "com.mysql.jdbc.Driver";
unicode = "?useUnicode=yes&characterEncoding=UTF-8";
try{
    Class.forName(driver);
    connection = DriverManager.getConnection(url+dbName+unicode, "XXXXX", "XXXXX");
}catch (Exception e) {javax.swing.JOptionPane.showMessageDialog(null, e);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:23:34.660

HTTP 代理根本不会转发您的 JDBC（在本例中为 MySQL）。

您可以使用 SSH 隧道设置 HTTPS CONNECT 代理，但这是另一回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:19:36.093

第一步是确保 java 运行时能够通过您的代理访问 Internet，并查看[如何为 java 设置代理](http://www.java.com/en/download/help/proxy_setup.xml)。

您还应该为您的 shell 设置`HTTP_PROXY`环境变量。语法是

`HTTP_PROXY = http://username@password:proxy.server.com:8080/`

但是，请注意（至少对于 Windows），如果将上述内容添加到系统变量中，它们只会在下次重新启动时生效，并且您需要管理员权限才能修改系统变量。您可以将其添加到您的用户变量中，它们将在下次登录（或下次调用命令提示符）时生效。

# javascript - Javascript，字符串连接或数组哪种方式更好？

> ID：11202365
> 
> 赞同：0
> 
> 时间：2012-06-26T07:13:24.957
> 
> 标签：javascript

> **可能重复：**
> [为什么字符串连接比数组连接快？](https://stackoverflow.com/questions/7299010/why-is-string-concatenation-faster-than-array-join)

通常我们需要在Javascript中动态生成html内容。如下两种方式：

```
var s = "", a = [];
for (var i = 0, l = data.length; i < l; i++) {
  s += "<a href='#'>" + data[i].name + "</a>";
  a[i] = "<a href='#'>" + data[i].name + "</a>";
}
container.innerHTML = s; // or
container.innerHTML = a.join(""); 
```

哪种方式更好？主要关注性能，否则差异可以忽略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:16:33.417

这回答了您的问题：[JavaScript 中的高性能字符串连接](http://www.sitepoint.com/javascript-fast-string-concatenation/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:22:29.180

数组方法更好。

当您连接字符串时，您将在每次迭代时将整个前一个字符串复制到一个新字符串中。最后，您将复制比结果字符串的大小更多的数据。对于每一次额外的迭代，您复制的数据量大约会增加一倍，因此它会变得非常非常快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T08:08:26.610

这远非明确，作为必须支持 IE6/7 的遗留问题，我一直认为数组方法要快得多，但事实似乎并非如此。

这是一个使用小字符串 'a' 的测试：

*   [http://jsperf.com/concatenation-vs-array-join/16](http://jsperf.com/concatenation-vs-array-join/16)

这是一个使用大字符串的测试（lorem ipsum 的第一段）：

*   [http://jsperf.com/concat-vs-array-join-longer-strings](http://jsperf.com/concat-vs-array-join-longer-strings)

在所有现代浏览器（我测试过 IE9/Chrome19/FF12）中，连接速度更快，使用更长的字符串时速度更快。

重要的是要注意，虽然在 IE7 中，数组方法*要*快得多，所以如果你必须支持它（我现在会三思而后行支持 IE7），那么你可能应该使用数组方法，因为 IE7 就是这样字符串连接速度慢到可笑。

实际上，如果您必须支持 IE7，我会避免使用任何类型的重型客户端 JS！

# wpf - 从 ViewModel 发送事件到调用应用程序

> ID：11202370
> 
> 赞同：2
> 
> 时间：2012-06-26T07:13:43.287
> 
> 标签：wpf, events, mvvm, event-handling

我正在为现有应用程序实现一点扩展。现在我正在使用 mvvm 创建一个“wpf-library”，目前一切看起来都很好。

现在假设我有一个事件要从基础数据库中删除一些数据集。我不想在我的扩展应用程序中执行此操作，而是在调用应用程序中执行此操作。

所以我所取得的成就（以及什么工作）是用户点击我的“删除”按钮，视图模型实现了命令，在这里我可以触发一个事件。我想要的是将事件发送到调用应用程序。

调用应用程序现在可以看到的我的启动类如下所示：

```
 public UserControl ViewToShowInContainer { get; private set; }

    public StartMyExtensionApplication(Model.TransportClass dataToWorkWith)
    {
        ViewToShowInContainer = new View.MainView();
        (ViewToShowInContainer.DataContext as VehicleSearchWPF.ViewModel.MyMainViewModel).RemoveSelectStatementFromDB += new EventHandler<SelectStatementRemovedEventArgs>(StartVehicleSearch_RemoveSelectStatementFromDB);
        LocalDataToWorkWith.MapTransportClass(dataToWorkWith);
    }

    void StartVehicleSearch_RemoveSelectStatementFromDB(object sender, SelectStatementRemovedEventArgs e)
    {
        throw new NotImplementedException();
    } 
```

但在我的观点中，必须有一些更好/更清洁/更好的方法来实现这一点？

提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:37:21.387

这确实似乎不是使用正常事件的正确位置；其他几个选项：

- 不使用事件而是使用“服务”，imo 更清晰、更直接，同时仍然解耦。好处是您可以通过模拟数据库服务轻松测试您的视图模型（例如，测试执行 Remove 命令有效地调用数据库上的 Remove）。

```
 //a database interface
public interface IDataBase
{
  public void Remove( string entry );
  //etc
}

  //a concrete database
public class SqlDataBase : IDataBase
{
  //implementation of IDataBase
}

  //vm uses an IDataBase
class VehicleSearchViewModel
{
  public VehicleSearchViewModel( IDataBase dataBase );

  private void Remove( string id )
  {
    dataBase.Remove( id );
  }
}

  //so main app can pass it
public StartMyExtensionApplication( .... )
{
  var dataBase = CreateDataBase( .... );
  view.DataContext = new VehicleSearchViewModel( dataBase );
} 
```

- 使用 Prism 的 IEventAggregator 之类的东西

```
class VehicleSearchViewModel
{
  public VehicleSearchViewModel( IEventAggregator aggr );

  private void Remove( string id )
  {
    aggr.Publish( new RemoveFromDBEvent{ id = id } );
  }
}

public StartMyExtensionApplication( .... )
{
  aggr.Subscribe<RemoveFromDBEvent>( DoRemove );
}

private void DoRemove( RemoveFromDBEvent evt )
{
  dataBase.Remove( evt.id );
} 
```

# jquery - Jquery Inner div click在使用颜色框插件时不起作用

> ID：11202371
> 
> 赞同：0
> 
> 时间：2012-06-26T07:13:44.043
> 
> 标签：jquery

我在 div 上使用颜色框。我有嵌套的div。当我单击内部 div 时，它会在灯箱中弹出图像，但单击内部 div 时它必须进入下一页。

有没有办法做到这一点？

```
$(".x").colorbox({html:"<img src='test.jpg' />"});

<div class="x">
<div class="y" >
<a href="test.html" >link</a>
</div>
</div> 
```

当我单击链接时，我必须将用户重定向到 test.html。如何防止弹出窗口？

任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:44:59.957

首先点击innerdiv `e.stopPropagation()`。查看[http://jsfiddle.net/nmdsS/](http://jsfiddle.net/nmdsS/)中的演示。

# google-analytics - Google Analytics：使用实际页面名称作为虚拟页面名称

> ID：11202377
> 
> 赞同：0
> 
> 时间：2012-06-26T07:14:21.937
> 
> 标签：google-analytics, tracking

在这两个问题上需要帮助：

1.  如果我正在跟踪我的标签的虚拟综合浏览量，我可以在我的虚拟文件名中使用“#”吗？即_gaq.push(['_trackPageview', '/special/#tab1']);

2.  如果我为我的虚拟页面名使用实际页面名，结果会合并吗？即有一个名为 /special/one 的页面，我也做了一个 _gaq.push(['_trackPageview', '/special/one']);

任何人？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:38:46.227

1.  是的，你可以在你的字符串中放任何东西，只要你转义单引号

2.  是的，如果它们完全匹配（区分大小写，斜杠，...），它们将在 GA 中被视为同一页面，从而组合

# pdf - pdf 查看当前行尺

> ID：11202379
> 
> 赞同：1
> 
> 时间：2012-06-26T07:14:30.190
> 
> 标签：pdf, accessibility, acrobat

我正在寻找可访问性工具，以便更轻松地阅读 pdf。

简而言之，应该可以很容易地看到正在阅读哪一行（有点像尺子，当它归结为文本时），以避免丢失正在阅读的行。

我想知道是否有人知道任何解决方案，例如 Adob​​e Acrobat Reader 的插件等...

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:33:32.750

我认为 Acrobat Reader 没有插件。您可能想查看 ZoomText 或 ClaroRead。当然，这些仅在 PDF 包含文本而不是文本图像时才有效。

一个低技术的解决方案是打开一个记事本文档并根据需要调整大小。如果你在 Win7 上，你可以用便笺来做到这一点。

# gwt - 为什么我不能为覆盖类型轻量级集合定义接口？

> ID：11202382
> 
> 赞同：1
> 
> 时间：2012-06-26T07:14:50.237
> 
> 标签：gwt, interface, overlay

我想为轻量级集合定义一个接口为打击，但无法成功编译。这里有什么错误吗？

```
//...........................Interface...........................................

@SingleJsoImpl(JsArrayExtImpl.class)
public interface JsArrayExt<M>{

        public  void add(int addBefore, M model) ;

        public  void add(M model) ;

        public  void addAll(JsArrayExt<M> models);
}

//................................Implementation

public class JsArrayExtImpl<M extends JavaScriptObject> extends JsArray<M> implements    JsArrayExt<M>
{
  protected JsArrayExtImpl()
  {
  }

  @Override
  public final native void add(int addBefore, M model) /*-{
    this.splice(addBefore, 0, model);
  }-*/;

  @Override
  public final void add(M model)
  {
    ...
  }
} 
```

错误：

```
Exception in thread "Code server for gwttest from Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:13.0) Gecko/20100101 Firefox/13.0.1 on ...GWTTest.html?gwt.codesvr=127.0.0.1:9997 @ SR;E74|oFVbz;?F%" java.lang.NullPointerException
at com.google.gwt.dev.shell.ModuleSpace.dispose(ModuleSpace.java:146)
at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:215)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
at java.lang.Thread.run(Thread.java:722)` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:32:54.880

这是因为 JsArray 有一个受保护的构造函数。请参阅：[受保护的构造函数和可访问性](https://stackoverflow.com/questions/5150748/protected-constructor-and-accessibility)

你不能继承它。您需要将代码复制到您自己的类中。

# blackberry - 在黑莓中禁用和启用互联网

> ID：11202386
> 
> 赞同：2
> 
> 时间：2012-06-26T07:14:56.797
> 
> 标签：blackberry

我想知道通过编码在黑莓中启用和禁用互联网连接的方法是什么。

编辑

```
protected void disableConnection() {
    activeConn = RadioInfo.getActiveWAFs();
    if(activeConn == 0){
        activeConn = RadioInfo.getEnabledWAFs();
    }

    mystore.setContents(new Integer(activeConn));
    mystore.commit();

    Radio.deactivateWAFs(activeConn);
    Dialog.alert("Off internet");
}

protected void enableConnection() {
    if(RadioInfo.getState() == RadioInfo.STATE_ON){
        Dialog.alert("Internet on already");
    }else if(mystore.getContents() != null){
        if(Radio.activateWAFs(Integer.parseInt(mystore.getContents().toString())) == true){
            Dialog.alert("On Internet");
        }else{
            Dialog.alert("Unable to on internet");
        }
    }else{
        Dialog.alert("Unable to on internet");
    }
} 
```

这是我在打开和关闭按钮单击时调用的两种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T00:05:57.603

您询问了**互联网**连接，所以我认为您感兴趣的不仅仅是 Wi-Fi 连接。通话`Radio.deactivateWAFs(RadioInfo.WAF_WLAN);`只会禁用 Wi-Fi。

更好的实现可能会首先检查哪些无线电处于打开状态，然后关闭这些无线电。当您想再次打开服务时，请重新激活您关闭的无线电。像这样的东西：

```
/** we record which radios are active */
private int _activeWAFs = 0;

private void getActiveWAFs() {
    _activeWAFs = RadioInfo.getActiveWAFs();
    if (_activeWAFs == 0) {
        _activeWAFs = RadioInfo.getEnabledWAFs();
    }
}

/** turn radios off if they're currently on */
private void disableAll() {
   getActiveWAFs();
   Radio.deactivateWAFs(_activeWAFs);
}

/** turn radios on, if we turned them off with disableAll() */
private void enableAll() {
   boolean success = Radio.activateWAFs(_activeWAFs) && (RadioInfo.getState() == RadioInfo.STATE_ON);
   if (!success) {
      // do something?
   }
} 
```

此外，如果您想要关于这些操作的结果或收音机的外部更改的通知，您可以实现[RadioStatusListener](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/system/RadioStatusListener.html)：

```
public void networkStarted(int networkId, int service) {
   if (RadioInfo.getState() == RadioInfo.STATE_ON) {
      // network ready to use!
   }
} 
```

而且，**是**的，此调用将影响整个设备，而不仅仅是您的应用程序的互联网连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:25:15.890

Radio.deactivateWAFS() 将停用所有无线连接或仅停用互联网连接或蓝牙连接。

示例：禁用 WiFi 连接。

```
Radio.deactivateWAFs(RadioInfo.WAF_WLAN); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T09:42:59.177

试试这个 -

这将打开wifi-

```
Radio.activateWAFs(RadioInfo.WAF_WLAN); 
```

这将关闭wifi-

```
Radio.deactivateWAFs(RadioInfo.WAF_WLAN); 
```

# c# - 检查方法的实例是否已执行

> ID：11202393
> 
> 赞同：2
> 
> 时间：2012-06-26T07:15:20.540
> 
> 标签：c#, azure

我有一个大问题是我在我的 Windows azure 应用程序中实现了一个调度程序，它可以在 17.29 的每一天执行一个特定的任务。对于实现，我使用的是 Quartz 第三方工具。我使用以下代码来启用我的调度程序

```
ISchedulerFactory schedFact = new StdSchedulerFactory();
IScheduler sched = schedFact.GetScheduler();
sched.Start();
JobDetail jobDetail = new JobDetail("mySendMailJob", typeof(SendMailJob));
Trigger trigger = TriggerUtils.MakeDailyTrigger(17, 29); 
trigger.Name = "mySendMailTrigger";
sched.ScheduleJob(jobDetail, trigger); 
```

我将此代码放在我的应用程序启动中。

我的问题是，如果我执行此代码一次，那么我的调度程序就会开始工作。下次不用调用。那么如何检查调度程序是否已被调用？如果我将此代码放在应用程序启动中每次​​执行相同的代码，那是完全没用的。如果有什么方法。如果有人知道请帮助我。我正在使用 C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:21:01.080

这是“如何只执行一次”问题的变体。我建议大多数人使用自选控制器模式。[我在这个回复中](https://stackoverflow.com/questions/11119614/execute-methode-in-windows-azure-with-multiple-instances/11123160#11123160)解释了这一点。

# git - 由于忽略文件，Netbeans 无法合并

> ID：11202394
> 
> 赞同：1
> 
> 时间：2012-06-26T07:15:22.237
> 
> 标签：git, netbeans

我尝试将我的 git 存储库与远程存储库合并，我得到的是：

合并结果：由于以下文件，HEAD 与 remote-rep/master 的合并失败：/path/to/some/file.jpg

该文件所在的整个文件夹显示为被 git 忽略。我在 .gitignore 中检查了它，它就在那里。这些文件也从未在提交时添加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:13:16.403

该文件可能已被其他人添加到远程仓库中。如果您真的认为必须忽略该文件，请执行此操作。

1.  将文件（本地）移动到其他位置。
2.  将远程 repo 与您的 master 合并。
3.  取消跟踪文件。`git rm /path/to/some/file.jpg`
4.  提交和推送。
5.  将本地文件移回之前的位置。
6.  将此更改通知您的同事。;-)

避免此问题的最佳方法是**提交 .gitignore 文件**。这样每个人都共享相同的 .gitignore 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T16:38:29.610

请在 shell 中尝试 git 命令，而不是 Netbeans 中的选项。你会看到不同的！

# python - 需要建议以使用 python 脚本从 ssh 服务器获取 git clone 工作

> ID：11202395
> 
> 赞同：1
> 
> 时间：2012-06-26T07:15:27.980
> 
> 标签：python, git

我在这里需要一点帮助。我正在尝试通过 ssh 从我的公司服务器获取 git 存储库。

要运行的命令是`git clone ssh://username@someserver.com/somefile.git/`

我是 python 编程的新手，正在寻求帮助。

```
def getRepository():
    command =  'ssh://username@someserver.com/somefile.git'
    clone_process = subprocess.Popen(['git','clone',command],stdin = subprocess.PIPE, stdout = subprocess.PIPE,stderr=subprocess.PIPE)
    output,error = clone_process.communicate(input='password') 

if  __name__ == '__main__':
    getRepository() 
```

在此过程中，它会提示输入我认为communicate(input='password') 会注意的用户密码，但事实并非如此。

实际上，提示输入密码需要一些时间，我必须在输入密码之前阅读该行。我如何实现这一目标？

我尝试将标准输出写入文件并读取文件，直到我得到该行，但这也不起作用..

另外，当我手动输入密码时，我看不到终端上的下载进度。有没有办法得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:17:49.280

使用[pexpect 模块](http://www.noah.org/wiki/pexpect)提供交互式输入

请参阅我之前的一个示例以获得答案：[从 python 运行期望脚本的最简单方法](https://stackoverflow.com/questions/11160504/simplest-way-to-run-expect-script-from-python/11160553#11160553)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:34:33.570

您还可以使用带有非常好的[API的](http://www.lag.net/paramiko/docs/)[Paramiko 模块](http://www.lag.net/paramiko/)

# c# - 删除从任务栏关闭的能力

> ID：11202396
> 
> 赞同：10
> 
> 时间：2012-06-26T07:15:28.403
> 
> 标签：c#, .net, windows-7

我想删除用户从 Windows 7 的任务栏中关闭我的应用程序中的窗口的功能：

![在此处输入图像描述](../Images/e3b1950c035e8c58f9edf4cc3907b60d.png)

图像中的关闭按钮应该不可用。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T07:18:28.453

你不应该这样做。窗口管理/装饰留给窗口管理器，您应该以某种方式处理“关闭”事件，并避免应用程序退出。

此外，在该预览的任何部分中单击 (mouse2) 也会关闭窗口，因此不仅仅是隐藏**该**按钮。

# mysql - 在.Net中使用nihbernate时，汉字在mysql中存储不正确

> ID：11202401
> 
> 赞同：0
> 
> 时间：2012-06-26T07:15:46.157
> 
> 标签：mysql, database, utf-8, character-encoding, special-characters

我正在尝试通过网络表单存储汉字（指事字 zhǐshìzì）。但是mysql数据库将它们存储为这样的“??? zhishìzì”

*   值类型是 NVarChar
*   字符集是 utf8
*   mysql 版本是 5.1.52-community

我在stackoverflow上看到过类似的问题。但是找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:22:19.920

我找到了自己的答案。问题是连接字符串。

以前是这样的

```
<property name="connection.connection_string">Server=xxxxx;Database=xxxxx;User ID=xxx;Password=xxxx;Port=xxx</property> 
```

我将“CharSet = utf8”添加到它并且它可以工作:)

```
<property name="connection.connection_string">Server=xxxxx;Database=xxxx;User ID=xxx;Password=xxxxx;Port=xxxx;CharSet=utf8</property> 
```

谢谢您的帮助...！！

# paypal - 无法使用 Paypal 订阅按钮

> ID：11202405
> 
> 赞同：0
> 
> 时间：2012-06-26T07:15:56.887
> 
> 标签：paypal, paypal-subscriptions

我正在尝试使用 Paypal 实现一个简单的订阅按钮。我使用了他们的按钮生成器，然后将该代码复制粘贴到我的网页中。

表单看起来非常好，当我选择一个包然后单击订阅时，我需要登录到 Paypal，它也可以工作，但随后出现此错误：

```
The link you used to access the PayPal system is invalid. Check the link and try again. 
```

这是我的按钮代码。怎么了？

```
 <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
 <input type="hidden" name="cmd" value="_s-xclick">
 <input type="hidden" name="hosted_button_id" value="XXXXXX">
 <table>
 <tr><td><input type="hidden" name="on0" value="Packages">Packages</td></tr><tr><td><select name="os0">
 <option value="Donor">Donor: $5,00 USD</option>
 <option value="Vip">Vip: $10,00 USD</option>
 <option value="Svip">Svip: $15,00 USD</option>
 <option value="Elite">Elite: $20,00 USD</option>
 </select> </td></tr>
<tr><td><input type="hidden" name="on1" value="Minecraft username">Minecraft username</td></tr><tr><td><input type="text" name="os1" maxlength="200"></td></tr>
</table>

<input type="hidden" name="currency_code" value="USD">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_subscribe_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">

<img alt="" border="0" src="https://www.paypalobjects.com/sv_SE/i/scr/pixel.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:10:45.303

忘记填写我的 Paypal 公司帐户的所有设置。现在使用上面的代码可以正常工作。

# linux - 使用命令行的 Linux OpenWRT 麦克风流式传输

> ID：11202407
> 
> 赞同：0
> 
> 时间：2012-06-26T07:16:03.887
> 
> 标签：linux, command-line, streaming, audio-streaming, openwrt

我想通过网络传输我的 Linux OpenWRT 设备的麦克风输入。声卡已经在工作了。有什么简单的方法可以通过网络传输麦克风输入（没有压缩就可以......）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:30:20.943

通过 SSH 进入并获取原始音频数据`arecord`。

# android - 如何使用 Java 在安卓手机和笔记本电脑之间建立互联网链接

> ID：11202411
> 
> 赞同：-3
> 
> 时间：2012-06-26T07:16:37.950
> 
> 标签：android

我正在开发一种团队查看器类型的应用程序，以使用 android 手机访问远程计算机以用于学术目的。如何专门使用Internet在手机和PC之间建立连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:22:09.627

使用[套接字](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)。但是，您为什么要开发已经存在[非常好的解决方案的东西呢？](https://play.google.com/store/apps/details?id=com.logmein.joinme)

# c++ - 引用常量变量的用例

> ID：11202416
> 
> 赞同：1
> 
> 时间：2012-06-26T07:16:51.187
> 
> 标签：c++

我理解参考变量的概念。它是另一个变量的别名。

```
int varA = 100;
int &varB = varA; 
```

这`varB`是一个引用`varA`，都指向相同的内存位置。一个变量的变化反映在另一个变量上。

问题：

1.  a)`int &c = 100;`
    上述陈述的含义是什么，它与以下陈述有何不同？
    b)`int c = 100;`

2.  有没有我们需要使用 1(a) 而不是 1(b) 的场景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:19:09.120

一切都是正确的，除了这个：

```
int &c = 100; //error 
```

它会在 C++03 和 C++11 中给出编译错误。这是因为它试图将*非常量引用*`100`绑定到一个不允许的临时对象（从 中创建）。

但是，在 C++11 中，您可以这样做：

```
int && c = 100; //ok 
```

它被称为右值引用。

您可以将*const 引用*绑定到一个临时对象（在 C++03 和 C++11 中）：

```
int const & c = 100; 
```

-

```
int c = 100; 
```

它只是定义了一个名为的对象`c`并用`100`. 这里没有参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T07:19:15.103

```
 int &c = 100 
```

是无效代码，您不能将非常量引用绑定到临时。

为了使其有效，您需要一个`const`参考：

```
 const int &c = 100; 
```

尽管，

```
int c = 100 
```

是一个有效的代码。它创建一个以`c`该类型命名的变量`int`并用`100`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T07:19:01.817

1）`int& c = 100;`是非法的，而第二个不是。

> 我理解了参考变量的概念。

如果您真的了解引用，您是否期望在您执行`c = 101`常量之后`100`突然变成`101`？

2) 回答没有意义，因为 1) 是非法的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T07:24:11.453

```
int& i = 100; 
```

是非法的。

合法地说：

```
int const& i = 100;
const int& i = 100; // same as above 
```

Not particularly useful in this context, but it needs to work for the purposes of function calls:

```
 void foo(int const& i) { ... }
...
    foo(100); 
```

# jquery - 道场的树选择

> ID：11202417
> 
> 赞同：0
> 
> 时间：2012-06-26T07:16:53.580
> 
> 标签：jquery, dojo, dynatree

jquery 有一个插件[dynatree](http://code.google.com/p/dynatree/)来实现这一点。我想要[这种](http://wwwendt.de/tech/dynatree/doc/sample-select.html)dojo的效果。dojo 是否有插件或其他东西可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:51:49.970

我见过人们用 dijit.Tree 做那种事情，但我不认为有任何“内置”的东西......我建议你去 irc freenode #dojo 并尝试联系这些人以了解如何他们继续

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T18:23:24.160

[http://thejekels.com/dojo/cbtree_AMD.html](http://thejekels.com/dojo/cbtree_AMD.html)。我用过这个。

# .net - 在 VS2010 调试器中触发终结器

> ID：11202423
> 
> 赞同：1
> 
> 时间：2012-06-26T07:17:43.097
> 
> 标签：.net, visual-studio-2010, debugging, task-parallel-library, finalizer

对托管代码使用 VS2010 调试器是否可以触发终结器线程运行？

用例：

如果任务本身已引发异常并且未处理这些异常，则使用[任务](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)可能会在对象的终结器上引发异常。`Task`

验证导致未处理的错误修复可能非常耗时，因为您需要等待终结器线程启动，然后才能确保修复正常工作。

我自己通常不使用终结器进行编码，因为它会引起很多头痛，而且我还向 Microsoft 发送了有关此问题的邮件。但是虽然它是这样的：如何触发终结器代码*从调试器*运行，而不是从代码运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:22:41.423

AFAIK 没有特殊的方法可以从调试器中执行此操作。

您可以在代码中触发它：

```
 int i = 0, j = 1;
    new Task(() => Console.WriteLine(j/i)).Start();
    Thread.Sleep(1000); // make sure it has had plenty of time
    //GC.Collect(GC.MaxGeneration, GCCollectionMode.Forced);
    //GC.WaitForPendingFinalizers();
    Console.WriteLine("Did I explode yet?");
    Console.ReadKey(); 
```

现在取消注释这两行以查看异常出现。

请注意，*这只*应用于测试等场景；您不应该在常规代码中真正使用`GC`。

# java - 将 JAX-WS CXF Web 服务请求方法调用约束为每个客户端 IP 一个请求

> ID：11202424
> 
> 赞同：3
> 
> 时间：2012-06-26T07:17:44.460
> 
> 标签：java, servlets, locking, jax-ws, cxf

我有一个基于 CXF 的 Web 服务，使用单向方法说：Service.report()

在处理来自客户端的报告（）时，我想让来自同一客户端 IP 的另一个传入报告（）等到处理第一个请求。从客户端看，report() 是一个原子操作，对 report() 的连续调用应该按顺序处理。

我怎样才能最好地实现这种锁定机制？我需要实现每个客户端队列还是有一种简单的方法来完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:26:15.663

你不需要一个完整的队列。一个简单的对象同步应该可以工作

```
static ConcurrentMap syncMap = new ConcurrentHashMap();

public void report()
{
   String clientIp =  ...
   syncMap.putIfAbsent(clientIp, new Object()); // just new Object is good enough to sync on
   synchronized(syncMap.get(clientIp))
   {
      //do synchronized stuff.
   }
} 
```

# javascript - HTML 实体代码不显示在 MacO 上？

> ID：11202430
> 
> 赞同：2
> 
> 时间：2012-06-26T07:18:23.397
> 
> 标签：javascript, html, css

我在我的网页上使用 html 实体进行上一页和下一页导航。它将在 Windows、Linux 操作系统上正常显示，但在 Mac 操作系统上显示为空框。有什么问题，我该如何解决？

代码 ：

```
 &#9195; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:36:43.650

问题是字符，黑色上点双三角' (U+23EB)，出现在很少的字体中。显然，您对其进行测试的某些系统具有其中一种字体，而 Mac 系统则没有。或者，也许您以在 Mac 上失败的方式使用嵌入字体 via `@font face`。

该字符在 www 创作和数据交换中非常不安全。最近添加到 Unicode（在 6.0 版中），预计几年后它不会得到广泛支持。通过字体嵌入，也许可以使用它。

根据[http://www.fileformat.info/info/unicode/char/23eb/fontsupport.htm](http://www.fileformat.info/info/unicode/char/23eb/fontsupport.htm)该字符仅出现在 Everson Mono 和 Symbola 中。然而，Everson Mono 有一个错误的字形（一个指向左的双三角形）。另一方面，Quivira 也包含它。这三种字体都是特殊字体，几乎没有默认包含在任何计算机系统中；它们必须单独下载和安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:36:00.873

这与操作系统无关。这纯粹是字体问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:27:41.533

嘿，现在您可以使用**HTML 实体（十六进制）**值代码

我认为这个价值代码是`&#x23eb;`

有关您的代码的更多信息[http://www.fileformat.info/info/unicode/char/23eb/index.htm](http://www.fileformat.info/info/unicode/char/23eb/index.htm)

# mysql - mysql工作台中用户的只读权限

> ID：11202434
> 
> 赞同：3
> 
> 时间：2012-06-26T07:18:46.490
> 
> 标签：mysql, mysql-workbench

我想授予用户使用工作台“用户和权限”选项访问我的数据库的权限。现在我正在创建一个帐户，我想给这个帐户用户只读权限。但我很困惑给这个用户特权。请帮助我......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:23:02.297

只读使用 MySQL 客户端对吗？在“用户和权限”下选择一个用户，然后单击“模式权限”选项卡。单击“添加条目”，选择主机和架构。然后你要做的就是检查“选择”权限。该用户现在具有只读权限。

# mysql - Left Join 2 个表，只返回出现在第 2 个表上的记录

> ID：11202444
> 
> 赞同：1
> 
> 时间：2012-06-26T07:19:37.147
> 
> 标签：mysql

我要加入 2 张桌子（`table1`和`table2`）。

第一个表包含`globalcid`每条记录的唯一性，第二个表包含相同的多次出现`globalcid`。注：`globalcid`是table2对table1的引用字段。

> 表格1

```
globalcid  / itemdesc
1          / item 1
2          / item 2
3          / item 3
4          / item 4
5          / item 5 
```

> 表2

```
globalcid    /  recordcid
1            / 1
1            / 2
2            / 1
3            / 1
3            / 2
3            / 3
5            / 1 
```

我想要一个查询只返回来自 [table1] 的记录，其中记录在 [table2] GROUP BY table2.globalcid 但将返回每个 globalcid 的最后一条记录

在上面的示例中，它应该返回

```
globalcid  / itemdesc  / table2.globalcid
1          / item 1    / 2
2          / item 2    / 1
3          / item 3    / 3
5          / item 5    / 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:28:21.243

```
SELECT 
    a.*,
    MAX(b.recordcid) AS maxcid
FROM 
    table1 a
INNER JOIN 
    table2 b ON a.globalcid = b.globalcid
GROUP BY 
    a.globalcid 
```

如果您只关心`recordcid`并且不需要该表中的任何其他列，那么这应该没问题。但是，如果表中还有其他列，例如：

```
globalcid    /  recordcid   /  othercolumn 
------------------------------------------
1            / 1            /  bertrand
1            / 2            /  centipede
2            / 1            /  yarn
3            / 1            /  obviate
3            / 2            /  hyper
3            / 3            /  fish
5            / 1            /  larry 
```

...那么该`MAX()`值将不会与其对应的行数据`othercolumn`对齐，相反，您必须将选择的最大值包装在子选择中，如下所示：

```
SELECT
    a.*,
    c.recordcid,
    c.othercolumn
FROM
    table1 a
INNER JOIN
    (
        SELECT globalcid, MAX(recordcid) AS maxcid
        FROM table2
        GROUP BY globalcid
    ) b ON a.globalcid = b.globalcid
INNER JOIN
    table2 c ON b.globalcid = c.globalcid AND b.maxcid = c.recordcid 
```

导致：

```
globalcid    /  itemdesc    /  recordcid   /  othercolumn 
---------------------------------------------------------
1            /  item1       / 2            /  centipede
2            /  item2       / 1            /  yarn
3            /  item3       / 3            /  fish
5            /  item5       / 1            /  larry 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:25:36.447

您应该能够使用*内部联接*和聚合来实现此目的：

```
SELECT table1.globalcid, itemdesc, MAX(recordcid)
FROM table1 INNER JOIN table2 on table1.globalcid = table2.globalcid
GROUP BY table1.globalcid, itemdesc 
```

内连接排除了*table2中所有在**table1*中没有匹配 id 的记录。MAX / GROUP BY 将为每个*globalcid 提取**recordid*的最大值。

# java - antlr: missing package declaration in generated Lexer source

> ID：11202450
> 
> 赞同：1
> 
> 时间：2012-06-26T07:20:03.317
> 
> 标签：java, antlr

I am using one .g file for both lexer and parser. I have the following lines in the grammar file:

```
@header {
package foo.bar;
} 
```

However I found that package line is only put into the generated parser source file, and missing in the FooLexer.java file. Anyone know how to deal with this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T07:23:34.877

```
@header {
package foo.bar;
} 
```

is short for:

```
@parser::header {
package foo.bar;
} 
```

To put a package declaration in the lexer, do:

```
@lexer::header {
package foo.bar;
} 
```

The same goes for `@members { ... }`, which is short for `@parser::members { ... }`. There's also `@lexer::members { ... }` to put variables/methods etc. in the lexer.

# c# - 匹配“潜在危险的 Request.Form 值”的规则

> ID：11202452
> 
> 赞同：1
> 
> 时间：2012-06-26T07:20:11.893
> 
> 标签：c#, asp.net

我想知道使用什么规则来确定什么是潜在危险的表单值，以便我可以编写客户端验证以防止它到达服务器。理想情况下，我想知道框架如何确定什么是潜在危险的字符组合，因此我可以在我的自定义验证器中使用相同的规则来防止它们访问服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:26:26.213

**原因：**

1.  通常`valid html`在文本输入中输入 a 时会出现此错误。即带有**打开和关闭**html 标签`<****>`。

2.  这也是由于输入 html 实体等引起的`&nbsp;` `&amp;` `&lt;` `&gt;` `&quot;`。

3.  简单来说，你可以说 if`text-input`包含一些符号，如**">, &, <, ="** ; 等，它将被视为危险值。

**为了解决您可以使用：**

```
<system.web>
    <httpRuntime requestValidationMode="2.0" />
</system.web> 
```

在您的**web.config**中验证此类输入。

**或者**

您可以使用以下方法对输入进行**[htmlencode ：](http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx)**

```
String clean_value = Server.HtmlEncode(TextBox1.Text); 
```

**以下文章可以帮助您：**

**[如何捕获 HttpRequestValidationException](http://romsteady.blogspot.com/2007/06/how-to-catch-httprequestvalidationexcep.html)**

**[http://www.cryer.co.uk/brian/mswinswdev/ms_vbnet_server_error_potentially_dangerous.htm](http://www.cryer.co.uk/brian/mswinswdev/ms_vbnet_server_error_potentially_dangerous.htm)**

**[从客户端检测到潜在危险的 Request.Form 值](https://stackoverflow.com/questions/81991/a-potentially-dangerous-request-form-value-was-detected-from-the-client)**

希望这可以帮助。

# speech-recognition - 使用pocketsphinx提取音素

> ID：11202457
> 
> 赞同：0
> 
> 时间：2012-06-26T07:20:24.200
> 
> 标签：speech-recognition, cmusphinx, phoneme

是否可以在 pocketsphinx 的帮助下提取口语的音素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-15T21:45:47.780

从最初的问题来看，听起来您正在寻找一个字素到音素的解决方案（G2P）。

虽然 pocketsphinx 不包括一个，但 sphinxtrain 有。 [http://sourceforge.net/projects/cmusphinx/files/sphinxtrain/](http://sourceforge.net/projects/cmusphinx/files/sphinxtrain/)

另一个不错的选择： http: [//freetts.sourceforge.net/docs/index.php](http://freetts.sourceforge.net/docs/index.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:38:23.677

不，不支持此功能。

# mysql - 插入mysql数据库时出错

> ID：11202458
> 
> 赞同：0
> 
> 时间：2012-06-26T07:20:28.093
> 
> 标签：mysql, sql, coldfusion, insert, cfwheels

我正在使用 cfwheels（coldfusion orm 框架）。

我最近将一些数据从以前的主机移到了新主机。现在我正在尝试插入表中，但收到一条错误消息：“执行数据库查询时出错。键 'PRIMARY' 的重复条目 '13651'”

我查看了数据库，似乎已经存在 id 为 13651 的记录。所以我认为问题在于mysql生成正确的自动增量值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:51:10.047

看来 Auto_Increment 值已损坏或未设置为该列中的最大值。由于批量插入，这是可能的。

因此，根据解决方案，将最大 PK 值 + 1 设置为新的 AUTO_INCREMENT 值。现在，当您在此表中插入记录时，它们将自动正确选择下一个增量。

```
ALTER.TABLE tablename AUTO_INCREMENT = value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:22:44.790

该记录的其余数据是否与您尝试插入的数据相同？如果您可能只需要告诉 ORM 替换该值？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:27:52.723

如果主键开启了自增属性，请勿手动插入。从您的插入查询中删除该主键部分（根据您的 ORM 框架的风格使用什么语法）。

# android - Android 更新 OpenGL onclick

> ID：11202462
> 
> 赞同：1
> 
> 时间：2012-06-26T07:20:42.230
> 
> 标签：android, opengl-es, onclick

我有一个 GLSurfaceView，它有一个纹理，当我点击一个按钮时我需要更改它。我怎么能在安卓上做到这一点。我通过以下方式管理了一些东西：

```
 Intent intent = getIntent();
            finish();
            startActivity(intent); 
```

但我只需要刷新openGL而不是整个程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:22:09.490

这**不是**刷新视图的方法。您需要使用该`invalidate`功能。

更多：

1.  [http://developer.android.com/reference/android/view/View.html#Drawing](http://developer.android.com/reference/android/view/View.html#Drawing)

2.  [android 上的 openGL](http://developer.android.com/guide/topics/graphics/opengl.html)。

3.  [openGL 教程编号 1](http://www.droidnova.com/android-3d-game-tutorial-part-i,312.html)。

4.  [openGL 教程编号 2](http://www.youtube.com/watch?v=eB2gquFQ3Cc)。

# php - 如何在 Magento 模块中设置 cron 作业？

> ID：11202463
> 
> 赞同：17
> 
> 时间：2012-06-26T07:20:43.643
> 
> 标签：php, xml, magento

我想在我的模块中设置一个 cron 作业。我按照 Magento wiki - [how_to_setup_a_cron_job](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/how_to_setup_a_cron_job)上的说明进行操作，但我的 cron 作业根本没有执行。

这是我的 config.xml (app/code/local/Roomstory/Invoice/etc/config.xml)

```
<?xml version="1.0"?>
<config>    
    <modules>
        <Roomstory_Invoice>
            <version>0.1.1</version>
        </Roomstory_Invoice>
    </modules>
<!-- -->
    <crontab>
        <jobs>
            <roomstoryinvoice_setstatus>
                <schedule><cron_expr>*/10 * * * *</cron_expr></schedule>
                <run><model>roomstory_invoice/setstatus::run</model></run>
            </roomstoryinvoice_setstatus>
        </jobs>
    </crontab>
</config> 
```

这是我的课。(app/code/local/Roomstory/Invoice/Model/Setstatus.php)

```
<?php
class Roomstory_Invoice_Model_Setstatus {

  public function run() {
    return true;
  }

}
?> 
```

我已经安装了一个 Cron 调度程序模块，它显示了我的 cron 作业列出，但是当我尝试“立即运行”（用于调试）时，我收到错误 -

> 无效回调：roomstory_invoice/setstatus::run 不存在

这很简单，经过多次尝试，我仍然无法找到错误。请告诉其他一些方法，或在此代码中指出错误。

谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-26T07:35:52.323

在您的模块`config.xml`中放置以下内容：

```
<config>
    <global>
        <models>
            <roomstoryinvoicecron>
                <class>Roomstory_Invoice_Model</class>
            </roomstoryinvoicecron>                         
        </models>
    </global>
    <crontab>
        <jobs>
            <roomstoryinvoicecron>
                <schedule>
                    <cron_expr>*/10 * * * *</cron_expr>
                </schedule>
                <run>
                    <model>roomstoryinvoicecron/observer::setStatus</model>
                </run>
            </roomstoryinvoicecron>
        </jobs>
    </crontab>
</config> 
```

添加`app/code/local/Roomstory/Invoice/Model/Observer.php`以下内容：

```
<?php
class Roomstory_Invoice_Model_Observer {
    public function setStatus() {
        Mage::log("WORKS!");
    }
} 
```

确保启用了日志记录并且它应该可以工作，请检查日志以确保;)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-14T19:54:06.840

请务必在 crontab 中添加 Magento cron.sh 文件

```
crontab -e

*/5 * * * * /bin/sh /path-to-magento/cron.sh 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T08:08:40.303

```
 <crontab>
        <jobs>
            <CompanyName_ModuleName>
                <schedule>
                    <cron_expr>*/5 * * * *</cron_expr>
                </schedule>
                <run>
                    <model>ModuleName/observer::setStatus</model>
                </run>
            </CompanyName_ModuleName>
        </jobs>
    </crontab> 
```

并在模型中创建 Observer.php 文件

```
 class CompanyName_ModuleName_Model_Observer extends Mage_Core_Model_Abstract
{

   public function setStatus()
   { 

   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-06T05:20:08.170

您可以轻松地为 cron 作业创建模块，只需按照以下步骤操作：

创建 Config.xml 文件并在其中设置 cron 作业。

```
<?xml version="1.0"?>
<config>    
<crontab>
        <jobs>
            <Namespace_Module>
                <schedule>
                    <cron_expr>* * * * *</cron_expr>
                </schedule>
                <run>
                    <model>module/observer::method</model>
                </run>
            </Namespace_Module>
        </jobs>
    </crontab>
</config> 
```

你的观察者方法：

```
 class CompanyName_ModuleName_Model_Observer extends Mage_Core_Model_Abstract
{

   public function setStatus()
   { 
//your action
   }
} 
```

现在最后一步转到您的托管 cpanel 并在 cron 作业部分设置 cron.php 文件的路径和运行时间

`php -f /home/mercodec/public_html/cron.php`默认情况下，您可以像在 magento 中一样设置路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-31T13:02:22.463

在此之前，您必须在终端中运行此脚本。对于 ubuntu：*/1 * * * * /usr/bin/php /var/www/html/modulename/cron.php > /dev/null

# php - 如何将 MySQL 数据库迁移到新结构？！任何工具？

> ID：11202464
> 
> 赞同：0
> 
> 时间：2012-06-26T07:21:00.857
> 
> 标签：php, mysql

我需要将具有旧结构的旧数据库移动到新数据库。

两个数据库都是 MySQL 数据库 (InnoDB)。信息基本相同，但已移至不同的表格和类似的东西。

我现在正在搜索的是一个工具，它可以帮助我将数据移动到新结构中。类似于为我生成 php 代码的数据映射工具之类的东西。

有没有类似的东西，或者你知道更好的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:26:37.003

查看 ETL（提取转换负载）工具。流行（和免费）的是 Talend Open Studio 和 Pentaho Suite。

但不要指望奇迹。

复杂数据库模式的迁移不是一项简单的任务，您不会找到任何简单的点击工具。你需要花很多心思在里面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:27:27.557

[MySQL 工作台](http://www.mysql.com/products/workbench/)怎么样？

它旨在做这样的事情。

您可以设置与现有数据库的连接并进行逆向工程。

然后更改架构（重命名表、创建/删除列等...）。

最后一步是将新模式部署到数据库的正向工程。

它有自解释的 GUI，所以完全没有问题。

[http://en.wikipedia.org/wiki/MySQL_Workbench](http://en.wikipedia.org/wiki/MySQL_Workbench)

# .net - IBM.Data.DB2.DB2Exception: ERROR [08001] [IBM] SQL30081N 检测到通信错误。

> ID：11202465
> 
> 赞同：2
> 
> 时间：2012-06-26T07:21:12.210
> 
> 标签：.net, connection, db2

我的应用程序通过他们的 .net 提供程序 (FP5) 与 IBM DB2 一起工作。当我离开应用程序很长一段时间后，尝试从数据库中获取任何东西 - 我收到以下错误：

> ---> IBM.Data.DB2.DB2Exception: ERROR [08001] [IBM] SQL30081N 检测到通信错误。正在使用的通信协议：“TCP/IP”。正在使用的通信 API：“SOCKETS”。检测到错误的位置：“SERVER_IP”。检测错误的通信功能：“recv”。协议特定错误代码：“10054”、“*”、“0”。SQLSTATE=08001

我使用实体框架与数据库进行通信，在崩溃操作之前我总是有以下代码：

```
using (EEntities db =  EntitiesFactory.CreateEEntity())
                {
                    // ..some operations
                } 
```

在哪里：

```
public static EEntities CreateEEntity()
        {
            if (!string.IsNullOrEmpty(GlobalCommon.DBConnectionString))
                return CreateEEntity(GlobalCommon.DBConnectionString);
            return new EEntities();
        }

        public static EEntities CreateEEntity(string connectionString)
        {
            return new EEntities(connectionString);
        } 
```

和：

```
public static string DBConnectionString
        {
            get
            {
                if (!string.IsNullOrWhiteSpace(_DBConnectionString))
                    return _DBConnectionString;

                string providerConnectionString = "Database=" +
                    Settings.Default.DBDatabase + ";User ID=" +
                    DBUserID + ";Password=" +
                    DBPassword + ";Server=" +
                    DBServer + ";Max Pool Size=150;Min Pool Size=15;Connection Lifetime=80;Pooling=true;";

                // Initialize the EntityConnectionStringBuilder.
                EntityConnectionStringBuilder entityBuilder =
                    new EntityConnectionStringBuilder();

                //Set the provider name.
                entityBuilder.Provider = "IBM.Data.DB2";

                // Set the provider-specific connection string.
                entityBuilder.ProviderConnectionString = providerConnectionString;

                // Set the Metadata location.
                entityBuilder.Metadata = @"res://*/DAL.DBModel.csdl|
                            res://*/DAL.DBModel.ssdl|
                            res://*/DAL.DBModel.msl";
                _DBConnectionString = entityBuilder.ToString();

                return _DBConnectionString;
            }
            set
            {
                _DBConnectionString = value;
            }
        } 
```

所以我认为如果连接终止，我总是会重新连接。
池化或连接生存期会不会有问题？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:25:05.847

此错误通常意味着您的连接已被 DBA 终止，或者存在中断应用程序连接的网络故障。

如果您收到此错误，只需重新连接到数据库即可。

# facebook-graph-api - 通过图形 api 获取个人资料图片导致“达到应用程序请求限制”

> ID：11202466
> 
> 赞同：0
> 
> 时间：2012-06-26T07:21:24.683
> 
> 标签：facebook-graph-api

当页面显示大量用户的个人资料图片时，我们会收到“(#4) 已达到应用程序请求限制”错误。

是否仅仅因为通过图形 api 引用用户的个人资料图片而发生？例如“https://graph.facebook.com/{user-id}/picture”

如果我们使用直接图片链接（例如“http://profile.ak.fbcdn.net/...”）并使用实时更新进行更新，问题会解决吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:34:40.137

如果您一次对 facebook 应用程序进行过多的服务器调用，那么您很有可能得到错误。请检查平台的 Facebook 条款和条件是否允许获取直接链接。或者，当有人通过 facebook 在您的服务器中连接时，您可以存储图片，但同样，facebook 最近更改了隐私政策，所以也请检查一下。

# javascript - 中的行 to links with JQuery

My script is here : [jsfiddle](http://jsfiddle.net/pg8Pu/3/)

i have two attributes in my form that my script do edit on a

> ID：11202472
> 
> 赞同：1
> 
> 时间：2012-06-26T07:21:41.107
> 
> 标签：javascript, jquery, jquery-ui

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T22:46:10.483

参考这个**[LIVE DEMO 2](http://jsfiddle.net/SivaCharan/pg8Pu/12/)**

除了我之前的答案之外，我还修改了 JQuery 的某些部分来处理您的条件。

## HTML：

```
<table>
    <tbody>
        <tr>
            <td class="left">
                <label>Date: </label>
            </td>
            <td class="cartRight">
                <span id="status0" style="float:right;"/>2012-06-20
</td>
        </tr>
        <tr>
            <td class="left">
                <label>*Anchor Text </label>
            </td>
            <td class="cartRight">
                <input type="text" value="dasdas" onchange="immediateEditItemInCart(this.value,'anchor_text',0,'pr','35')" class="mandatory0" readonly="readonly" id="anchor_text0"/>
                <br/>
            </td>
        </tr>
        <tr>
            <td class="left">
                <label>*URL </label>
            </td>
            <td class="cartRight">
                <div style="padding:0 !important">
                    <div class="a0" style="padding:0 !important">
                        <a href="test1.com">test.com</a>
                    </div>
                    <input type="text" value="dsad.cas" onchange="immediateEditItemInCart(this.value,'url',0,'pr','35')" class="mandatory0" id="url0" style="display:none"/>
                </div>
                <br/>
            </td>
        </tr>
        <tr>
            <td class="left">
                <label>Address </label>
            </td>
            <td class="cartRight">
                <input type="text" value="dsada" onchange="immediateEditItemInCart(this.value,'address',0,'pr','35')" class="mandatory0" readonly="readonly" id="address0"/>
                <br/>
            </td>
        </tr>
        <tr>
            <td class="left">
                <label>Phone </label>
            </td>
            <td class="cartRight">
                <input type="text" value="432423" onchange="immediateEditItemInCart(this.value,'phone_number',0,'pr','35')" class="mandatory0" readonly="readonly" id="phone_number0"/>
                <br/>
            </td>
        </tr>
    </tbody>
</table>
<table>
    <tbody>
        <tr>
            <td class="left">
                <label>Date: </label>
            </td>
            <td class="cartRight">
                <span id="status4" style="float:right;"/>2012-06-22
</td>
        </tr>
        <tr>
            <td class="left">
                <label>*Anchor Text </label>
            </td>
            <td class="cartRight">
                <input type="text" value="dasdasd" onchange="immediateEditItemInCart(this.value,'anchor_text',4,'am','30')" class="mandatory4" readonly="readonly" id="anchor_text4"/>
                <br/>
            </td>
        </tr>
        <tr>
            <td class="left" style="vertical-align: top">
                <label>*URL </label>
            </td>
            <td class="cartRight">
                <div style="padding:0 !important;">
                    <div class="a0" style="padding: 0px ! important; display: block;width:200px;">
                        <a target="_blank" href="test1.com">test1.com</a><br/>
                        <a target="_blank" href="test2.com">test2.com</a><br/>
                    </div>
                    <textarea cols="82" onchange="immediateEditItemInCart(this.value,'url',4,'am','30');$(this).autoGrow();" class="mandatory4" id="url4" input="" style="height: auto; overflow: hidden; display: none;" rows="3">test1.com<br></br>test2.com<br></br></textarea>
                    <div class="clear">
        </div>
                </div>
            </td>
        </tr>
    </tbody>
</table>​ 
```

## 查询：

```
$('.a0 a').click(function(){
    var href = $(this).attr('href');

    // Redirect only after 500 milliseconds
    if (!$(this).data('timer')) {
        $(this).data('timer', setTimeout(function() {
            window.open(href, '_blank')
        }, 500));
    }
    return false; // Prevent default action (redirecting)
});

$('.a0').dblclick(function(){
    var txt = document.createElement('div');
    $.each($(this).find('a'), function(i, val) {
        clearTimeout($(val).data('timer'));
        $(val).data('timer', null);
        $(txt).append($(val).text()); 
        $("<br>").appendTo(txt);
    });
    var content = $(this).parent().find('input,textarea');
    var text = "";
    $.each($(txt).html().split("<br>"), function(i, val) {
        if (val != "")
            text += val + "\n"; 
    });
    $(content).html(text);
    $(this).hide();
    $(content).show().focus();
})

$('#url0, #url1, #url4').each(function(index, element) {
    $(element).blur(function(){
        if ($(this).val().length == 0)
            $(this).show();
        else
        {
            var ele = this;
            var lines = $(ele).val().split("\n");
            var divEle = $(ele).hide().prev().show().empty();
            $.each(lines, function(i, val) {
                $("<a />").html(val).attr({
                    'href': val, 
                    'target': '_blank'}).appendTo(divEle);
                $("<br/>").appendTo(divEle);
            });
        }
    });
});
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:53:20.253

另一种解决方案：

```
$('#url0, #url1,#url4').each(

    function(index, element){

        $(element).blur(function(){

             l = this.value.split(/\s+/);

             $(this).hide().prev().show().empty();

             txt = "";

             for(var i in l) {

                 txt += '<a href="'+l[i] +'">'+l[i] + '</a><br />';

             }

             $(this).parent().find('div').not('.clear').html(txt);

        })
    }    
); 
```

看到这个[小提琴](http://jsfiddle.net/Z4LjW/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T18:14:47.757

参考**[现场演示](http://jsfiddle.net/SivaCharan/pg8Pu/11/)**

我遇到了一些问题，`HTML`例如不关闭`<br>`，`<input>`.. 标签。无论我在 HTML 上看到什么问题，我都已修复。

在测试现场演示时，请按照以下步骤操作：-

1.  要编辑超链接，请双击虚线区域
2.  要打开链接，请单击链接

## HTML：

```
<table>
    <tbody>
        <tr>
            <td class="left">
                <label>Date: </label>
            </td>
            <td class="cartRight">
                <span id="status0" style="float:right;"/>2012-06-20
</td>
        </tr>
        <tr>
            <td class="left">
                <label>*Anchor Text </label>
            </td>
            <td class="cartRight">
                <input type="text" value="dasdas" onchange="immediateEditItemInCart(this.value,'anchor_text',0,'pr','35')" class="mandatory0" readonly="readonly" id="anchor_text0"/>
                <br/>
            </td>
        </tr>
        <tr>
            <td class="left">
                <label>*URL </label>
            </td>
            <td class="cartRight">
                <div style="padding:0 !important">
                    <div class="a0" style="padding:0 !important">
                        <a href="test1.com">test.com</a>
                    </div>
                    <input type="text" value="dsad.cas" onchange="immediateEditItemInCart(this.value,'url',0,'pr','35')" class="mandatory0" id="url0" style="display:none"/>
                </div>
                <br/>
            </td>
        </tr>
        <tr>
            <td class="left">
                <label>Address </label>
            </td>
            <td class="cartRight">
                <input type="text" value="dsada" onchange="immediateEditItemInCart(this.value,'address',0,'pr','35')" class="mandatory0" readonly="readonly" id="address0"/>
                <br/>
            </td>
        </tr>
        <tr>
            <td class="left">
                <label>Phone </label>
            </td>
            <td class="cartRight">
                <input type="text" value="432423" onchange="immediateEditItemInCart(this.value,'phone_number',0,'pr','35')" class="mandatory0" readonly="readonly" id="phone_number0"/>
                <br/>
            </td>
        </tr>
    </tbody>
</table>
<table>
    <tbody>
        <tr>
            <td class="left">
                <label>Date: </label>
            </td>
            <td class="cartRight">
                <span id="status4" style="float:right;"/>2012-06-22
</td>
        </tr>
        <tr>
            <td class="left">
                <label>*Anchor Text </label>
            </td>
            <td class="cartRight">
                <input type="text" value="dasdasd" onchange="immediateEditItemInCart(this.value,'anchor_text',4,'am','30')" class="mandatory4" readonly="readonly" id="anchor_text4"/>
                <br/>
            </td>
        </tr>
        <tr>
            <td class="left" style="vertical-align: top">
                <label>*URL </label>
            </td>
            <td class="cartRight">
                <div style="padding:0 !important;">
                    <div class="a0" style="padding: 0px ! important; display: block;width:200px;">
                        <a target="_blank" href="test1.comtest2.com">test1.com test2.com</a>
                    </div>
                    <textarea cols="82" onchange="immediateEditItemInCart(this.value,'url',4,'am','30');$(this).autoGrow();" class="mandatory4" id="url4" input="" style="height: auto; overflow: hidden; display: none;" rows="3">test1.com test2.com</textarea>
                    <div class="clear">
        </div>
                </div>
            </td>
        </tr>
    </tbody>
</table>​ 
```

## JS：

```
$('.a0 a').click(function(){
    var href = $(this).attr('href');

    // Redirect only after 500 milliseconds
    if (!$(this).data('timer')) {
        $(this).data('timer', setTimeout(function() {
            window.open(href, '_blank')
        }, 500));
    }
    return false; // Prevent default action (redirecting)
});

$('.a0').dblclick(function(){
    var txt = "";
    for(var i=0; i<$(this).find('a').length; i++) {
        clearTimeout($(this).find('a').data('timer'));
        $(this).find('a').data('timer', null);
        txt += $(this).find('a').text() + "<br/>"; 
    }

    $(this).parent().find('input,textarea').html(txt).show().focus();
    $(this).hide();
})

$('#url0, #url1, #url4').each(function(index, element) {
    $(element).blur(function(){
        if ($(this).val().length == 0)
            $(this).show();
        else
        {
            var ele = this;
            var lines = $(ele).val().split("\n");
            var divEle = $(ele).hide().prev().show().empty();
            $.each(lines, function(i, val) {
                $("<a />").html(val).attr({
                    'href': val, 
                    'target': '_blank'}).appendTo(divEle);
                $("<br/>").appendTo(divEle);
            });
        }
    });
});
​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T07:49:16.317

给定一个带有空格分隔值的字符串：

```
var str = "test1.com test2.com"; 
```

您可以通过拆分来检索各个值：

```
var vals = str.split(/\s+/); 
```

以上使用正则表达式在有一个或多个空白字符的地方进行拆分，并将设置`vals`为包含值的数组。

您当前的代码实际上与单个锚元素相关联，因此您需要更新它以创建需要的多个。也许如果您将现有的锚点包装在某个容器（跨度或 div）中，以便该容器可以容纳多个锚点，那么您可以执行以下操作：

```
var vals = this.value.split(/\s+/),
    $container = $(this).hide().prev().show().empty();

$.each(vals, function(i, val) {
    if (i > 0) $("<span> </span>").appendTo($container);
    $("<a />").html(val).attr('href',val).appendTo($container);
}); 
```

当然，您需要对获取锚文本并将其放入 textarea 进行编辑的代码进行相应的更改，但我已经在这个**工作演示**中做到了：http : [//jsfiddle.net/pg8Pu/4/](http://jsfiddle.net/pg8Pu/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T09:33:40.503

在您的示例中，您将整个文本从单个标签`textarea`的 url保存回来。`a`显然，当使用 html() 读取值时，它将从文本中删除 CR/LF，因为 CR/LF 在 html 中并不重要。

如果您需要两个标签，则需要更改功能并将 div 而不是标签作为容器，然后双击任何链接读取容器文本。将 textarea 文本保存为链接时，您需要创建一个链接 ( `a`) 标记并放入容器 div

# android - IdleConnectionHandler 删除我的 android 应用程序中从未存在的连接

> ID：11202473
> 
> 赞同：2
> 
> 时间：2012-06-26T07:21:45.497
> 
> 标签：android, android-networking

我的 android 应用程序不断记录此警告：

```
IdleConnectionHandler removing a connection that never existed 
```

这意味着什么？这是个大问题吗？我应该怎么做才能避免这种情况？我的应用在 AsyncTask 中建立了许多 http 连接，这有关系吗？

编辑：

我发现这个电话是这个消息的原因：

```
httpclient.getConnectionManager().closeIdleConnections(30, TimeUnit.SECONDS); 
```

所以也许它试图关闭一些不存在的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:22:20.240

听起来您的代码中存在逻辑错误。您可以使用这个名为 ARO 的 Android 工具来追踪问题。你可以在这里找到更多关于它的信息[http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312](http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312) 它将帮助你更多地了解你的应用程序是如何使用网络的，以及你如何改进这部分您的应用程序，使其更高效。您是否有理由需要一次建立多个 http 连接？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:34:42.793

我也遇到了这个错误，但我的应用程序仅使用互联网来加载广告。目前我没有允许我的应用程序可以使用互联网，所以这就是为什么它说“删除一个从未存在的连接”。这可能是此警告的原因之一。

# android - 如何动态修改Android布局XML

> ID：11202474
> 
> 赞同：2
> 
> 时间：2012-06-26T07:21:52.127
> 
> 标签：android, android-layout

我是 android 开发的新手，我将开发一个 android 应用程序。在这个应用程序中，我想动态生成 xml 布局。登录到应用程序后，服务器将发送带有控件描述的 xml 模板，包括不同的属性描述（每个控件的验证、最大长度、控件的大小等），这意味着不会有预定义的 xml 布局。

我的计划是，从下载的 xml 模板中，我将创建一个 xml 布局并将该 xml 存储在 sqlite 数据库中。当用户单击记录时，我想向用户显示这个动态创建的表单。

是否可以修改 xml 布局（如设置 innerxml）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:29:42.500

你可以尝试这样的事情：

```
LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View myView = inflater.inflate(myXmlPullParser, null);

setContentView(myView); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:37:21.073

基于[查看文档](http://developer.android.com/reference/android/view/LayoutInflater.html#inflate%28org.xmlpull.v1.XmlPullParser,%20android.view.ViewGroup%29)：

> **重要**出于性能原因，视图膨胀在很大程度上依赖于在构建时完成的 XML 文件的预处理。因此，目前无法在运行时在纯 XML 文件上使用带有 XmlPullParser 的 LayoutInflater。

**如果布局不在布局 res 目录中，则**不能膨胀布局。****

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:30:33.510

有可能。采用只有线性布局的 xml 布局，并在 onCreate 中访问具有 id 的布局并以编程方式创建所有视图并将作为子视图添加到线性布局中，然后将该 xml 布局设置为 setContentView。稍后您想在创建视图后添加更多视图，您可以运行 UI 线程并添加视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:11:00.657

我认为与其动态创建 xml，不如考虑以编程方式创建所需的视图，如果它是高级视图，您应该按照 TheWAlkingCube 的建议进行操作，动态扩展 xml 视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T08:11:30.983

Android 不完全支持您的工作方式，但您可以动态构建自己的布局。

创建您自己的*TemplateBuilder* -class。此类将从您的服务器检索布局文件（并可能将其保存在您的数据库中）。可以读取 XML 文件，并且可以在运行时添加每个定义的项目。如前所述，这不是您应该在 Android 中工作的传统方式，但它将是您的最佳选择。

如果您有某些 ViewGroup 或布局将更频繁地在布局中使用，您可以将它们定义为您的**res**文件夹中的 XML 文件，并在需要时对其进行扩充。创建预定义*的布局块*，您可以随时膨胀并逐字构建自定义布局。

有关在运行时添加视图的示例，您可以访问以下链接： [http ://www.dreamincode.net/forums/topic/130521-android-part-iii-dynamic-layouts/](http://www.dreamincode.net/forums/topic/130521-android-part-iii-dynamic-layouts/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-14T09:03:09.973

如果您坚持这样做，则必须在程序中解析收到的 xml 文件，并根据收到的文件中的请求方式以编程方式添加 xml 布局的每个视图**

# python - Google AppEngine 上的内存分析/监控 (python)

> ID：11202475
> 
> 赞同：18
> 
> 时间：2012-06-26T07:22:01.227
> 
> 标签：python, google-app-engine, memory-leaks

我已经使用应用引擎很长一段时间了，我知道有 appstats 但那些只显示数据存储/内存缓存和其他与实际内存使用统计信息无关的内容。

我尝试与[AppTrace](http://code.google.com/p/apptrace/)集成（与所有组件的最新版本），但我无法继续，因为我收到此错误：

```
ImportError: dlopen(../apptrace/guppy/sets/setsc.so, 2): Symbol not found: __PyLong_AsScaledDouble
Referenced from: ../apptrace/guppy/sets/setsc.so
Expected in: flat namespace 
```

**所以我的问题是：（在最新的 appengine sdk 上）分析/监控内存/捕获内存泄漏和其他与 python 内存相关的东西（在本地或 Google 服务器上）的最佳方法是什么？**

顺便说一句，我们使用 Python 2.7，我们正在使用 Mac OS X (10.7.4)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-11-16T22:09:52.660

这篇文章已有 3 年历史，但我认为这个答案仍然值得分享以帮助他人。我有高级 Google App Engine 支持，并就同样的问题与他们联系。

Google 工程师告诉我，Google App Engine[运行时 API](https://cloud.google.com/appengine/docs/python/refdocs/google.appengine.api.runtime.runtime)已被弃用，但仍然有效。它提供了一个名为 memory_usage 的方法。

```
from google.appengine.api.runtime import runtime
import logging

logging.info(runtime.memory_usage()) 
```

这将输出内存使用统计信息，其中数字以 MB 表示。例如：

```
current: 464.0859375
average1m: 464
average10m: 379.575 
```

通过将日志记录语句放在代码中的关键点，您可以找出导致内存泄漏的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T18:49:35.243

我认为 Google App Engine 中没有监控内存使用的工具，您可以分析程序、监控模块导入时间、代码覆盖率。所以不是检测小内存泄漏的工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-17T16:10:42.697

Pymler：[https](https://github.com/pympler/pympler) ://github.com/pympler/pympler 目前必须删除 asizeof.py 中第 1330 行的 except 块的“ImportError”部分（即它捕获所有异常），因为 statvfs 在 GAE 上不可用：

```
try:
    from os import statvfs
    _typedef_both(type(statvfs(curdir)), refs=_statvfs_refs,  # statvfs_result
                  item=_sizeof_Cvoidp, leng=_len)
except:  # ImportError: <- Comment out, or add an OSError except as well
    pass 
```

否则，完美运行：

```
import logging, traceback

try:
  from pympler.asizeof import asizeof
  for variables in [locals(), globals()]:
    logging.debug(str({k: asizeof(variables[k]) for k in variables})

except Exception as e:
  logging.warning('Could not perform memory check: %s\n%s' % (str(e), str(traceback.format_exc()))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T17:51:14.443

有关替代方案，请参阅[在 google 的 appengine 上配置/优化网站的最佳方式](https://stackoverflow.com/questions/679670/best-way-to-profile-optimize-a-website-on-googles-appengine)。

为了解决这个特定问题，这篇文章（虽然旧）[http://sourceforge.net/tracker/?func=detail&aid=3047282&group_id=105577&atid=641821](http://sourceforge.net/tracker/?func=detail&aid=3047282&group_id=105577&atid=641821)建议重新安装/更新 guppy。

ps: 下次能不能发一下完整的traceback，以及相关库的版本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T18:55:17.040

我认为这是最好的实用程序

appengine-profiler - Python 中的 Google App Engine 分析器 - Google 项目托管 -> [http://code.google.com/p/appengine-profiler/](http://code.google.com/p/appengine-profiler/)

```
08-13 12:40AM 04.586 /camstore/upload 200 508ms 351cpu_ms 293api_cpu_ms 0kb libwww-perl/5.825,gzip(gfe)
11.222.111.222 - - [13/Aug/2010:00:40:05 -0700] "POST /camstore/upload HTTP/1.1" 200 181 - "libwww-perl/5.825,gzip(gfe)"
"example.appspot.com:443" ms=508 cpu_ms=352 api_cpu_ms=293 cpm_usd=0.018512

[I] 08-13 12:40AM 05.021
  Request summary (uptime=161, ID=6C0D1DD1:1.999999999 : Google App Engine/1.3.6 @ na5):
  ms         =  425.66 (api_datastore_v3 =  98%, other =   2%)
  cpu_ms     =  326.67 (api_datastore_v3 =  95%, other =   5%)
  api_cpu_ms =  293.33 (api_datastore_v3 = 100%, other =   0%) 
```

你也可以使用 memcacheApi 和其他工作人员

# google-maps - 使用谷歌地图自动完成获取边界？不工作

> ID：11202481
> 
> 赞同：0
> 
> 时间：2012-06-26T07:22:13.370
> 
> 标签：google-maps, google-maps-api-3, autocomplete, maps, google-maps-autocomplete

我正在使用谷歌地图自动完成功能让用户输入地点。之后我`getPlace()`从自动完成对象调用 ,。

它显示以下错误。

> Uncaught TypeError: Object ((13.0284176, 80.23215529999993), (13.0501581, 80.2641701)) has no method 'lat' 这是我的代码：

**我的代码：**

```
autocomplete = new google.maps.places.Autocomplete(g,autoc_options);
google.maps.event.addListener(autocomplete,'place_changed',function() {
  var g=autocomplete.getPlace();
  var h=new google.maps.LatLngBounds(g.geometry.viewport);
  var l=new google.maps.LatLng(g.geometry.viewport.getSouthWest());
  alert(l.toString());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:07:00.810

您正在尝试使用`LatLng`现有的 LatLng 对象创建 LatLng 对象。

您可以参考西南坐标，只需将代码更改为：

```
var l =  g.geometry.viewport.getSouthWest(); 
```

这是因为`getSouthWest()`已经返回了一个`LatLng`对象。

# c# - 使用 StartDoc()/EndDoc() 时如何拦截 USB 打印机错误消息？

> ID：11202482
> 
> 赞同：1
> 
> 时间：2012-06-26T07:22:19.063
> 
> 标签：c#, windows-ce, printer-control-language

我希望有人能指出我在下面遇到的打印问题的正确方向：

设置：Win CE 5.0 尝试从自定义应用程序打印。

我在我的应用程序中编写了一个非常简单的打印类，它使用 pcl 驱动程序并打印到 HP USB 打印机。在正常情况下打印方面很好，但我看不到处理错误情况的明显方法，例如打印机中没有纸等。

我正在做这样的事情（为清楚起见，删除了一般错误检查和其他细节）：

```
// Get a DC to the printer. If printer isn't powered this will fail -
can print error stating "printer not found" or similar
hdcPrinter = CreateDC(@"pcl.dll", @"PCL Inkjet", @"LPT2:", ref mode);

// Signal the start of a document
StartDoc(hdcPrinter, &docInfo)
// Signal the start of a page
StartPage(hdcPrinter)

// Prepare the page to print/formatting etc

// Finished preparing the page
EndPage(hdcPrinter)

// This is the only page we are printing this time
EndDoc(hdcPrinter)

// Return the printer DC to the system as we are finished with it now.
DeleteDC(hdcPrinter); 
```

感谢您的任何帮助，您可以提供，

希尔帕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:42:29.233

即使打印机缺纸、卡纸或其他未准备好，您确定让 DC 成功吗？

一旦您开始打印作业，如果打印机出现问题，这不是您的问题。此时，操作系统应该与用户交互并让他们知道存在问题，必要时重新启动作业等......

# perl - 如何用另一个 div[ ] 元素替换 div[ ] 元素？

> ID：11202484
> 
> 赞同：0
> 
> 时间：2012-06-26T07:22:24.800
> 
> 标签：perl, html, selenium

```
for ($i=0; $i<10; $i++)
{
  my $v1 = $sel->get_text("//body[\@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/**div**/table/tbody/tr/td/div/div");

my $v2 = $sel->get_text("//body[@\id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/**div**/table/tbody/tr/td[2]/div/div")

print ($v1 . $v2);
} 
```

对于每次迭代，它必须找到从第 14 个元素开始`div[10]`并用增加的`div[ ]`元素替换它（例如：如果第 14 个元素是`div`，则将其替换为`div[2]`。在下一次迭代中找到第 14 个元素，即`div[2]`& 将其替换为`div[3]`& 依此类推）。

通过使用 PATTERN 匹配，它不能。有没有使用正则表达式查找特定元素并替换它的方法？我该怎么做 ？

```
 my $a = "//body[\@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/**div**/table/tbody/tr/td/div/div"; 
    my @arr = split ('/' , $a); 
    print "@arr \n"; 
    my $size1 = @arr; 
    print "$size1\n"; 
    print $arr[16]; 
    foreach my $a2 (@arr) 
    { 
    print "$a2 \n"; 
    }
my $b = "//body[\@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/**div**/table/tbody/tr/td[2]/div/div"; 
```

上述问题中提到的两个变量为 v1 和 v2（编辑为 $a 和 $b），修改必须同时适用于它们。我想我几乎接近你所说的。你能帮我进一步吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:07:17.683

```
use 5.010;
my $xpath = q(//body[@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div/table/tbody/tr/td/div/div);

for my $i (0..10) {
    my @nodes = split qr'/', $xpath;
    $nodes[16] .= "[$i]" unless 0 == $i;
    say join '/', @nodes;
} 
```

结果：

```
//body[@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div[1]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div[2]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div[3]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div[4]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div[5]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div[6]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div[7]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div[8]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div[9]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[10]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div[10]/table/tbody/tr/td/div/div 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T07:39:28.743

嗯，所有元素都用**/**分隔，对吧？所以可以使用原生的 split 方法，根据 / 来拆分 div[10] 后面的部分文本。将其存储在数组**$arr**中。合并它以查找字符串的长度，例如**$len**。找到**div[10]**的索引，比如**$orig_index**。然后找到第 14 个元素，进行正则表达式匹配以查看它的格式：

```
$arr[13] =~ /div([\d+])?/;
if ($1) {
  $arr[13] =~ /div[$1]/div[($1+1)]/e;
      }
else {
   $arr[13] = div[2];
   } 
```

现在第 14 个元素已更改，连接数组以从 div[10] 和第 14 个之间的部分获取新的输出字符串：

```
{
local $" = ''; 
$newstring = "@arr";
}
splice($originalstring,$orig_index,$len,$newstring); 
```

我认为会这样做。

# sql-server - SQL Server 上更好的数据库设计？

> ID：11202485
> 
> 赞同：0
> 
> 时间：2012-06-26T07:22:26.227
> 
> 标签：sql-server, database-design

在 SQL Server 中，我需要设计一个`User`表。它应该有一个`UserID (int)`，一个`RoleID (int)`和一个`UserName (nvarchar(255))`。

可以为用户分配一个名称，但也可以分配多个角色，因此 a`UserId`可能对应于多个`RoleID`s。这使得很难将主键分配给`UserID`可能`UserID`重复的对象。

除了把它分成多个表之外，还有什么更好的设计吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T07:27:00.930

你应该有：

```
1\. a user table with UsertId(int), UserName (Varchar)
2\. a role table with RoleId(int), RoleName(Varchar)
3\. a user_role table with user_id(int), role_id(int) 
```

并且不要忘记添加正确的索引和外键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:25:41.453

是的，有一个表 Roles，然后是具有 UserID 和 RoleID 的 RolesUsers，最后是一个 Users 表

编辑：其中 RolesUsers 中的 UserID + RoleID 是复合键

# c# - 使用 C# 反序列化嵌套 HTML 元素的 JSon

> ID：11202489
> 
> 赞同：1
> 
> 时间：2012-06-26T07:22:32.713
> 
> 标签：c#, json

我使用[了这个](https://stackoverflow.com/questions/2057328/jquery-serializing-hierarchical-structure-to-json)有用的 JQuery 函数来序列化嵌套元素。问题是如何使用 c# 反序列化它。

下面的代码给出

没有为“System.Collections.Generic.IList”类型定义无参数构造函数

```
string json = @"{""root"":{""id"":""main"",""text"":""150px"",""children"":
    [{""id"":""divcls"",""text"":""50px"",""children"":
    [{""id"":""qs1"",""text"":""0px"",""children"":[]}]},
     {""id"":""divcls2"",""text"":""50px"",""children"":[]},
     {""id"":""divcls3"",""text"":""50px"",""children"":[]}]}}";

IList<Commn.main1> objs = new JavaScriptSerializer()
    .Deserialize<IList<Commn.main1>>(json);
string blky = "";

foreach (var item in objs)
{
    blky += item.id;
}
Label1.Text = Convert.ToString(blky);

public class main1
{
    public string id { get; set; }
    public string text { get; set; }
    public sub1 children { get; set; }
}

public class sub1
{
    public string Qid { get; set; }
    public string Qval { get; set; }
} 
```

我的 Json 只有 2 级深如果解决方案是递归的，我怎么知道元素的**深度**

顺便说一句，类可以像这样引用自己

```
public class main1
{
    public string id { get; set; }
    public string text { get; set; }
    public  main1 children { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:25:05.800

首先，是的，一个类可以引用自己。在您的情况下，您需要有一个 main1[] 属性来代表它的孩子。

```
public class main1 
{    
    public string id { get; set; } 
    public string text { get; set; }
    public main1[] children { get; set; } 
} 
```

接下来，您的 json 字符串不仅包含一个 main1 对象，还包含一些其他具有 main1 类型的“根”属性的对象。很好，但是您需要另一个类来反序列化为：

```
public class foo
{
    public main1 root { get; set; }
} 
```

然后，您应该能够使用 Deserialize 方法获取 foo 的实例：

```
var myFoo = new JavaScriptSerializer().Deserialize<foo>(json); 
```

# qt - mvc（QSortFilterProxyModel）中的自定义排序仅适用一次

> ID：11202491
> 
> 赞同：3
> 
> 时间：2012-06-26T07:22:39.080
> 
> 标签：qt, pyqt, pyqt4, pyside

我正在尝试在 PySide 中为我的模型/视图结构设置自定义排序行为。所有项目都是字典，我需要按它们的键进行过滤（我不是在查看这些字典的表格视图，而是需要将它们分别呈现为一个实体）。

我继承自 QSortFilterProxyModel 并重新实现了 lessThan 方法。第一次更改排序小部件时它工作正常（触发代理的 sort() 方法），但之后不再调用 lessThan 方法。我不知道为什么，希望在这里得到一些帮助。如果解决方案所在，我非常乐意考虑如何以不同方式解决此问题的任何建议。

这是我的代理：

```
class ProxyModel ( QSortFilterProxyModel ):
    def __init__( self, parent=None ):
        super( ProxyModel, self).__init__( parent )
        self.setFilterCaseSensitivity( Qt.CaseInsensitive )
        self.setSortCaseSensitivity( Qt.CaseInsensitive )
        self.setDynamicSortFilter( True )

    def sortBy( self, attr ):
        print 'sorting by', attr
        self.__sortBy = attr
        self.sort( 0, Qt.AscendingOrder ) # THIS DOES NOT GET CALLED WHEN THE COMBO BOX CHANGES A SECOND TIME

    def lessThan( self, left, right ):
        '''Custom sorting behaviour'''
        leftTool = ( self.sourceModel().itemFromIndex( left ) )
        rightTool = ( self.sourceModel().itemFromIndex( right ) )
        leftData = leftTool.data()[ self.__sortBy ]
        rightData = rightTool.data()[ self.__sortBy ]
        return leftData < rightData 
```

这是完整的测试代码： import sys from PySide.QtGui import * from PySide.QtCore import *

```
class MainWidget( QWidget ) :
    def __init__( self, parent=None ):
        super( MainWidget, self ).__init__()

        self.listView = MyListView()
        model = MyModel()

        # MODELS AND VIEWS
        self.proxyModel = ProxyModel()
        self.proxyModel.setSourceModel( model )
        self.listView.setModel(self.proxyModel)

        # LAYOUTS
        verticalLayout = QVBoxLayout()
        filterLayout = QHBoxLayout()

        # SORTING WIDGET
        sortLayout = QHBoxLayout()
        sortLabel = QLabel( 'sort:' )
        self.sortWidget = QComboBox()
        self.sortWidget.addItems( ['title', 'author', 'downloads'] )
        self.sortWidget.currentIndexChanged.connect( self.sortTools )

        sortLayout.addWidget( sortLabel )
        sortLayout.addWidget( self.sortWidget )

        verticalLayout.addLayout( filterLayout )
        verticalLayout.addLayout( sortLayout )
        verticalLayout.insertWidget(0, self.listView)

        self.setLayout( verticalLayout )

    def sortTools( self ):
        text = self.sortWidget.currentText()
        self.proxyModel.sortBy( text )

class ProxyModel ( QSortFilterProxyModel ):
    def __init__( self, parent=None ):
        super( ProxyModel, self).__init__( parent )
        self.setFilterCaseSensitivity( Qt.CaseInsensitive )
        self.setSortCaseSensitivity( Qt.CaseInsensitive )
        self.setDynamicSortFilter( True )

    def sortBy( self, attr ):
        print 'sorting by', attr
        self.__sortBy = attr
        self.sort( 0, Qt.AscendingOrder ) # THIS DOES NOT GET CALLED WHEN THE COMBO BOX CHANGES A SECOND TIME

    def lessThan( self, left, right ):
        '''Custom sorting behaviour'''
        leftTool = ( self.sourceModel().itemFromIndex( left ) )
        rightTool = ( self.sourceModel().itemFromIndex( right ) )
        leftData = leftTool.data()[ self.__sortBy ]
        rightData = rightTool.data()[ self.__sortBy ]
        return leftData < rightData

class MyListView( QListView ):
    def __init__( self, parent=None ):
        super( MyListView, self).__init__( parent )
        self.setEditTriggers( QListView.NoEditTriggers )
        self.setViewMode( QListView.IconMode )
        self.setMovement( QListView.Static )
        self.setResizeMode( QListView.Adjust )
        self.setDragEnabled( True )

class MyModel( QStandardItemModel ):
    def __init__( self, parent=None ):
        super( MyModel, self).__init__( parent )
        self.init_data()

    def init_data(self):
        row = 0
        toolData = [ {'title':'ToolA', 'author':'John Doe', 'downloads':123, 'category':'color'},
                     {'title':'ToolB', 'author':'me', 'downloads':13, 'category':'color'},
                     {'title':'ToolC', 'author':'you', 'downloads':321, 'category':'transform'},
                     {'title':'ToolD', 'author':'unknown', 'downloads':2, 'category':'transform'}]

        for tool in toolData:
            item = QStandardItem( '%(title)s by %(author)s (%(category)s) - %(downloads)s downloads' % tool )
            item.setData( tool )
            self.setItem( row, 0, item )
            row += 1

if __name__ == '__main__':
    app = QApplication( sys.argv )

    mainWidget = MainWidget()
    mainWidget.resize( 400, 400 )
    mainWidget.show()

    sys.exit( app.exec_() ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:24:55.713

基本上Qt“认为”你的代理已经排序。准确地说，它在 C++ 中检查是否：

```
(d->dynamic_sortfilter && 
 d->proxy_sort_column == column && 
 d->sort_order == order) 
```

因此，要解决您的问题，您可以将 dynamic_sortfilter 设置为 False （它会产生副作用），或者更好的是，使您的排序无效：

```
def sortBy( self, attr ):
    print 'sorting by', attr
    self.__sortBy = attr
    self.invalidate() #invalidate helps 
    self.sort( 0, Qt.AscendingOrder ) 
```

# coffeescript - Coffeescript中switch case语句内的范围

> ID：11202492
> 
> 赞同：5
> 
> 时间：2012-06-26T07:22:41.160
> 
> 标签：coffeescript, handlebars.js

我在 Rails 3.2 jquery 移动应用程序中使用 Handlebar。

我正在尝试在 Coffeescript 方法中编写 switch case 语句，例如

```
Handlebars.registerHelper 'status', (blog) ->
  switch(parseInt(blog.status))
    when [0..20]
      status = "active"
    when [20..40]
      status = "Moderately Active"
    when [40..60]
      status = "Very Active"
    when [60..100]
      status = "Hyper Active"
  return status 
```

我没有得到任何结果。如何在 when 中使用范围。请建议

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-26T07:47:08.257

您`switch`不会像评论中的[Cygal](https://stackoverflow.com/users/481584/cygal)注释那样工作（即参见[issue 1383](https://github.com/jashkenas/coffee-script/issues/1383)）。A`switch`只是一个美化的`if(a == b)`结构，您需要能够说出以下内容：

```
a = [1,2,3]
switch a
... 
```

当你`switch`在一个阵列上时让它工作。CoffeeScript 设计者认为添加一个（脆弱的）特殊情况来处理数组（就是这样`[a..b]`）特别不值得。

您可以使用`if`：

```
Handlebars.registerHelper 'status', (blog) ->
  status = parseInt(blog.status, 10)
  if 0 <= status <= 20
    'Active'
  else if 20 < status <= 40
    'Moderately Active'
  else if 40 < status <= 60
    'Very Active'
  else if 60 < status <= 100
    'Hyper Active'
  else
    # You need to figure out what to say here 
```

或者像这样短路`return`：

```
Handlebars.registerHelper 'status', (blog) ->
  status = parseInt(blog.status, 10)
  return 'Something...'      if status <=   0
  return 'Active'            if status <=  20
  return 'Moderately Active' if status <=  40
  return 'Very Active'       if status <=  60
  return 'Hyper Active'      if status <= 100
  return 'Something else'    # This return isn't necessary but I like the symmetry 
```

请注意，您需要为以下三种特殊情况添加字符串：

1.  `status < 0`.
2.  `status > 100`.
3.  `status`是`NaN`。这种情况通常属于最终的“它不小于或等于 100”分支，因为`NaN => n`并且`NaN <= n`对于 all 都是错误的`n`。

是的，您绝对确定状态将始终在假设范围内。另一方面，不可能的事情总是发生在软件中（因此 comp.risks 邮件列表）并且没有充分的理由留下如此容易填补的漏洞。

还要注意在[`parseInt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)调用中添加了 radix 参数，你不希望前导零把事情弄得一团糟。是的，基数参数是可选的，但它确实不应该是，你的手指应该自动添加`, 10`到你所做的每个`parseInt`调用中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-26T09:37:19.240

在 mu 中添加一点点[是太短的答案](https://stackoverflow.com/a/11202858/581845)，您可以将其第二个代码片段转换为`switch`表达式：

```
Handlebars.registerHelper 'status', (blog) ->
  status = parseInt(blog.status, 10)
  switch
    when status <= 0   then 'Something...'      
    when status <= 20  then 'Active'
    when status <= 40  then 'Moderately Active'
    when status <= 60  then 'Very Active'
    when status <= 100 then 'Hyper Active'
    else 'Something else' 
```

这基本上相当于`switch (true)`在 JavaScript 中执行 a （尽管 CS 编译器将生成一个[`switch (false)`带有否定条件的语句](http://coffeescript.org/#try:Handlebars.registerHelper%20%27status%27%2C%20%28blog%29%20-%3E%0A%20%20status%20%3D%20parseInt%28blog.status%2C%2010%29%0A%20%20switch%0A%20%20%20%20when%20status%20%3C%3D%20%20%200%20then%20%27Something...%27%20%20%20%20%20%20%0A%20%20%20%20when%20status%20%3C%3D%20%2020%20then%20%27Active%27%0A%20%20%20%20when%20status%20%3C%3D%20%2040%20then%20%27Moderately%20Active%27%0A%20%20%20%20when%20status%20%3C%3D%20%2060%20then%20%27Very%20Active%27%0A%20%20%20%20when%20status%20%3C%3D%20100%20then%20%27Hyper%20Active%27%0A%20%20%20%20else%20%27Something%20else%27)以确保表达式的布尔结果......我认为）。

* * *

`switch`超出范围不起作用的原因是 CS 中的范围文字表示普通的旧 JS 数组（尽管编译器在执行类似的操作时会做一些优化技巧`for i in [1..something]`），所以当它们在 a 中被发现时，它们会`switch`被视为[正常数组值](http://coffeescript.org/#try:Handlebars.registerHelper%20%27status%27%2C%20%28blog%29%20-%3E%0A%20%20switch%28parseInt%28blog.status%29%29%0A%20%20%20%20when%20[0..20]%0A%20%20%20%20%20%20status%20%3D%20%22active%22%0A%20%20%20%20when%20[20..40]%0A%20%20%20%20%20%20status%20%3D%20%22Moderately%20Active%22%0A%20%20%20%20when%20[40..60]%0A%20%20%20%20%20%20status%20%3D%20%22Very%20Active%22%0A%20%20%20%20when%20[60..100]%0A%20%20%20%20%20%20status%20%3D%20%22Hyper%20Active%22%0A%20%20return%20status)：

```
// Generated JS for question's CS code:
switch (parseInt(blog.status)) {
  case [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]:
    status = "active";
    break;
  case [20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40]:
    status = "Moderately Active";
    break;
  case [40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60]:
    status = "Very Active";
    break;
  case (function() {
      _results = [];
      for (_i = 60; _i <= 100; _i++){ _results.push(_i); }
      return _results;
    }).apply(this):
    status = "Hyper Active";
} 
```

语句中的值`switch`基本上与 using 的每个`case`值进行比较`===`，它仅适用于基元，不适用于数组（即使它适用于数组，它也会测试数组相等性，而不是`switch`ed 值是否包含在`case`ed 数组中） .

# javascript - jQuery 18n 插件

> ID：11202494
> 
> 赞同：0
> 
> 时间：2012-06-26T07:22:43.537
> 
> 标签：javascript, jquery

我有一个 jQuery i18n 插件初始化：

```
jQuery.i18n.properties({
    name : 'appsConstants',
    path : '/gadgets/',
    mode : 'both',
    language : 'en'
}); 
```

如何像参数一样将语言变量取出到浏览器行中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:31:00.077

Scott Hanselman 的这篇文章谈到了全球化（文化/语言环境）

[http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx](http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx)

我用它来让我的 jQuery 了解用户文化（与 datepicker 等一起使用）我还下载了 i18n jQuery 插件并注册了它。

我选择了“检测”语言环境的“稍微少一点俗气 - 元标记”解决方案并注册了一个

```
<meta name="accept-language" content="en-US"> 
```

在 head 部分，然后我可以在我的 jQuery 中使用该标签来确定要使用的语言环境/语言。

这篇文章有点过时了，所以一些 javascript 需要在这里和那里更新，例如 Globalization.js 已从 $.global 更改。全球化。像这样的点点滴滴，您需要更新以使其全部正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:16:01.747

您在这里有几个选择：

*   通过解析从 URL 路径或 URL 查询参数中读取语言`window.location`
*   在 cookie 中设置语言
*   在服务器上动态生成您的 init Javascript 并在那里设置语言（将其存储在服务器上的会话中）。

# php - 如何使用特殊符号在 smarty 中拆分和打印 mysql 日期数组

> ID：11202509
> 
> 赞同：0
> 
> 时间：2012-06-26T07:23:41.903
> 
> 标签：php, smarty

我需要拆分并打印记录的日期值，我得到了夹板字符串，但我可以用 smarty 打印我的代码如下

询问

```
select  month(dob),day(dob),year(dob) from user_details 
```

输出

```
$us=array{["day(usr_dob)"]=>  string(1) "5" ["month(usr_dob)"]=>  string(1) "3" ["year(usr_dob)"]=>  string(1) "0"}`* 
```

我需要调用数组 inducitualy

```
{$us.day(usr_dob)} 
```

但是页面显示错误..我怎样才能打印该值我还需要检查该值是否与任何数值匹配

请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:57:28.673

为什么不使用别名？

```
select  month(dob) as month, day(dob) as day, year(dob) as year from user_details 
```

# iphone - 如果当前视图是 tableViewController，iOS TableView 不会重新加载

> ID：11202515
> 
> 赞同：0
> 
> 时间：2012-06-26T07:24:21.970
> 
> 标签：iphone, ios, xcode, tableview, reloaddata

```
- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif {
    // Handle the notificaton when the app is running

    NSLog(@"Recieved Notification %@",notif);

    NSLog(@"local notifications count = %d", [[[UIApplication sharedApplication] scheduledLocalNotifications] count]);
} 
```

这是来自应用委托的方法，当通知到达时我需要重新加载表格视图。

我该如何实现 reloadData，因为如果我写“[TableViewController.tableView reloadData];”，Xcode 将不接受？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:59:10.150

```
//Just do one thing, as you got the notification , post on more notification as follows in the method ....

- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif {

[[NSNotificationCenter defaultCenter] postNotificationName:@"RELOAD_DATA"object:nil];
}

//the add observer in viewDidLoad of that view controller where your table is added..

 [[NSNotificationCenter defaultCenter] addObserver:self
    selector:@selector(receiveTableNotification:) 
    name:@"RELOAD_DATA"
    object:nil];

//and make a method in the same class 

- (void)receiveTableNotification:(NSNotification *)pNotification{
    [your_table_view reloadData];
}

//now remove obser in dealloc in your view controller class where you add observer .. 

- (void) dealloc
{

    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:27:35.117

而不是`TableViewController.tableView`使用`[self.viewController.tableView reloadData]`；

如果您当前的视图控制器不是 tableView，请考虑使用`NSNotificationCenter`发布重新加载通知

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:29:00.360

使用`NSNotificationCenter postNotification:`机制来发布 reloadTable 通知，您可以在具有 tableViewController 的类中捕获该通知`observer`以触发`reloadData`您的 tableview

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T07:38:38.610

请在回调函数中的 app deligate 中调用它

```
- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif {

      UINavigationController *navControl = [[[self tableViewController] viewControllers] objectAtIndex:lastObject]; //
         id Obj = [[navControl viewControllers] lastObject];
                if([Obj isKindOfClass:[Required class]])
                {
                   [Obj reloadDataOfTable];// made an function to desired class.
                }
} 
```

# java - 如何使用 wsimport 生成 @HandlerChain

> ID：11202516
> 
> 赞同：3
> 
> 时间：2012-06-26T07:24:26.630
> 
> 标签：java, jax-ws, wsimport, handlers

我正在使用 wsimport (JAX-WS 2.1.3) 从 WSDL 生成 Java，并且需要使其生成 @HandlerChain 注释。所以我创建了一个 JAX-WS 绑定文件：

```
<jaxws:bindings
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
xmlns:jaxws="http://java.sun.com/xml/ns/jaxws"
xmlns:javaee="http://java.sun.com/xml/ns/javaee"
wsdlLocation="../etc/MessageStudio.wsdl">

<jaxws:bindings node="wsdl:definitions">
    <javaee:handler-chain>
        <javaee:handler-chain-name>StrongmailHandlers</javaee:handler-chain-name>               
            <javaee:handler>
                <javaee:handler-name>OrganizationTokenHandler</javaee:handler-name>         
                <javaee:handler-class>com.bossmedia.strongmailadapter.deliveryadapter.OrganizationTokenHandler</javaee:handler-class>           
            </javaee:handler>                     
    </javaee:handler-chain>
</jaxws:bindings> 
```

并运行 wsimport Ant 任务：

```
 <wsimport 
        wsdl="../etc/MessageStudio.wsdl"
        sourcedestdir="../src/gen"
        destdir="../classes"
        verbose="false"
        binding="../etc/jaxws.bindings.xml">
 </wsimport> 
```

但我没有得到注释，也没有处理程序链 XML 文件。谷歌搜索只能找到更改包、方法和参数的解决方案以及我复制 XML[的 JAX-WS RI 页面](http://jax-ws.java.net/nonav/2.1.3/docs/customizations.html#2.10_Handler_chain_customization)。

你能帮我找到我的配置中的缺陷，或者以其他方式，而不是修改生成的代码，让我的处理程序进入链吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T10:28:47.067

答案是 RI 示例**不正确**。需要有一个 handler-chains 包装标签：

```
<jaxws:bindings
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
xmlns:jaxws="http://java.sun.com/xml/ns/jaxws"
xmlns:javaee="http://java.sun.com/xml/ns/javaee"
wsdlLocation="../etc/MessageStudio.wsdl">

<jaxws:bindings node="wsdl:definitions">
    <javaee:handler-chains>
        <javaee:handler-chain>
            <javaee:handler-chain-name>StrongmailHandlers</javaee:handler-chain-name>               
            <javaee:handler>
                <javaee:handler-name>OrganizationTokenHandler</javaee:handler-name>         
                <javaee:handler-class>com.bossmedia.strongmailadapter.deliveryadapter.OrganizationTokenHandler</javaee:handler-class>           
            </javaee:handler>                     
        </javaee:handler-chain>
    </javaee:handler-chains>
</jaxws:bindings> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-26T21:16:26.353

事实证明，生成的处理程序链文件放在编译的类文件所在的输出目录（目标/包）中。如果你想改变它，你可以使用“destDir”选项来做到这一点。此外，将“xnocompile”设置为 false，否则生成的类文件将与处理程序文件位于同一目录中。希望他们没有在文档方面做这么半**的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-19T09:01:39.463

示例中仍然存在错误。[根据 XML 方案 ( http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/javaee_web_services_metadata_handler_2_0.xsd](http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/javaee_web_services_metadata_handler_2_0.xsd) ) ，该标签`<javaee:handler-chain-name>`不存在。

修正是：

```
<jaxws:bindings
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
xmlns:jaxws="http://java.sun.com/xml/ns/jaxws"
xmlns:javaee="http://java.sun.com/xml/ns/javaee"
wsdlLocation="../etc/MessageStudio.wsdl">

<jaxws:bindings node="wsdl:definitions">
    <javaee:handler-chains>
        <javaee:handler-chain>
            <javaee:handler>
                <javaee:handler-name>OrganizationTokenHandler</javaee:handler-name>         
                <javaee:handler-class>com.bossmedia.strongmailadapter.deliveryadapter.OrganizationTokenHandler</javaee:handler-class>           
            </javaee:handler>                     
        </javaee:handler-chain>
    </javaee:handler-chains> 
```

# testing - 瀑布模型测试与敏捷相比有什么优点吗？

> ID：11202519
> 
> 赞同：2
> 
> 时间：2012-06-26T07:24:38.867
> 
> 标签：testing, agile, waterfall

我已经阅读了很多关于敏捷和瀑布的信息，但我想不出今天有人应该做瀑布的任何理由。我特别关心测试过程。我是否错过了什么，是否有一些我忽略的明显优势？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T07:48:08.460

仍然存在适合使用瀑布的情况。典型示例包括军事、太空、医疗和安全关键系统，例如飞行控制软件，在这些系统中，您绝对需要首先详细确定规格，开发它，然后彻底测试完整的产品。

敏捷适用于大多数业务和产品软件（即大多数构建的软件），因为它允许用户从一个粗略的想法开始，并在他们进行时对其进行改进。如果他们的网站或内部业务线应用程序在几次迭代中并不完全正确（或存在错误），那么它通常被从有效的位中快速交付的业务价值所抵消。您不会想从一个核电站控制器系统的粗略构想开始，然后在进行过程中对其进行改进。

使用纯瀑布的权衡是在这些场景中开发软件的成本要高出几个数量级。然而，成本效益仍然是有利的，因为您无法承受（例如）您的航天器在进入轨道的中途遇到空指针异常。

两者之间当然有灰色阴影。可以在瀑布框架中使用敏捷技术（参见 RUP），并且可以在纯瀑布和纯敏捷之间扩大和缩小平衡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:38:41.763

瀑布式开发模型的主要优点之一是它已经被使用了多年。有用。尽管有很大的转变和对敏捷的关注，但瀑布是一个非常清晰的过程，每个开发部分都有起点和终点。

随着敏捷编程的引入，很容易看到瀑布的下降以及它如何不适应当今的编程需求。

只要您谨慎并提前计划并进行充分测试，我会说敏捷测试可以与瀑布式测试一样有效甚至更有效 - 当测试引发一些可能导致设计改变方式的错误时，使用敏捷当然更容易.

要考虑的另一件事是使用测试驱动开发进行开发。 [http://en.wikipedia.org/wiki/Test-driven_development](http://en.wikipedia.org/wiki/Test-driven_development)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T02:51:12.633

外包

我见过许多公司坚持使用瀑布进行外包项目。大多数供应商在报价方面都会非常具体。瀑布非常适合这个模型 - 你交出你想要的东西，他们会生产它。我不是这个的粉丝，但我可以理解执行这种方式的原因。我认为大多数外包公司最终会找到一种变得更加敏捷的方法，因为它越来越成为行业标准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-25T05:30:16.787

问题的答案取决于您为项目使用的开发方法。它是敏捷的/是瀑布式的/等等。在过去的三到四年里，我参与了仅涉及敏捷或仅涉及瀑布式的项目，因此将它们用作我的参考点。如果项目的需求不断变化，我们永远不应该进行瀑布设计，因为瀑布方法假设设计/分析/等已经完成，而如果我们采用敏捷，它是基于增量方法，我们将项目划分为随着我们进行增量故事和构建/测试，因此如果需求发生变化，它不会涉及开发人员和测试人员的大量返工。例如，假设我们必须创建四个新网页作为我们项目的一部分，然后瀑布假设他们的设计等已经完成，一旦所有四个页面都开发完毕，测试将开始，而在敏捷的情况下，我们首先开发一个页面并将其交给 QA 进行测试 [手动/自动化]，等等。因此，我们可以看到敏捷除了在开发时发现功能缺陷/错误之外，还通过使其不易于受到需求更改的影响为我们的项目增加了价值。

# asp.net - 如何访问页面控件的值到运行时添加的用户控件？

> ID：11202521
> 
> 赞同：0
> 
> 时间：2012-06-26T07:24:47.477
> 
> 标签：asp.net

我有一个在运行时集成到页面的用户控件，现在在页面上我有一些 HTML 控件，其值也需要保存，因为我已经将保存方法逻辑写入用户控件，因为它有很多内容他们保存在数据库中，但我缺少的是如何使用相同的保存方法将页面内容保存到数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:30:20.313

如果我的理解是正确的，您只需将值传递给 UC，只需在 UC 中声明公共属性并在运行时分配值即可：

检查以下示例：

## 公共财产法

**在 UC 代码后面**

```
public string Street
{
    get
    {
        return this.ViewState["c"] as string;
    }
    set
    {
        this.ViewState["c"] = value;
    }
}

public void Save()
{
    ...
    // your logic to save the UC data
    // save the custom properties too, this.Street
{ 
```

**在后面的 ASPX 代码中**

```
this.myAddressTemplateControl.Street = myOtherControl.Text; 
```

## 直接访问页面对象

**在 UC 代码后面**

```
 this.Page.FindControl("myPageControlID"); 
```

# php - 外部 wsdl 不是在 magento 中加载，而是在核心 php 中加载

> ID：11202522
> 
> 赞同：1
> 
> 时间：2012-06-26T07:24:52.357
> 
> 标签：php, api, wsdl, magento-1.6

这在核心 php 中运行良好，但在 magento 中运行良好。

```
$party_payment = new SoapClient('https://test.com/test.asmx?wsdl',array("trace" => 1, "exceptions" => 0)); 
```

过去 2 天我找到了解决方案和原因，但没有运气。

[也试过这个链接](http://www.magentogoreview.com/magento-api-soapclient-fatal-error-uncaught-soapfault-exception-wsdl-soap-error-parsing-wsdl-couldnt-load-from~84)

出现以下错误

```
<br />
<b>Fatal error</b>:  SOAP-ERROR: Parsing WSDL: Couldn't load from 'https://test.com/test.asmx?wsdl' : failed to load external entity &quot;https://test.com/test.asmx?wsdl&quot;
 in <b>E:\xampp\htdocs\magento\app\code\local\Namespace\Module\Model\Module.php</b> on line <b>9</b><br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:41:08.923

在使用 XAMPP 的 2 周之前，我遇到了同样的问题。也许您还没有启用 openssl php-module。

您尝试通过**https**获取资源，这仅在您激活 openssl 支持时才有效。

您可以尝试不使用 SSL 访问。

# actionscript-3 - 为样式属性创建设置器

> ID：11202523
> 
> 赞同：0
> 
> 时间：2012-06-26T07:24:53.670
> 
> 标签：actionscript-3, apache-flex, flex3, mxml

我想为 WrappedLabel 类的 fontSize 属性创建一个设置器，因为当有人更改它时我需要做一些额外的事情。因此，当有人像这样使用我的课程时：

```
<comp:WrappedLabel fontSize="10"/> 
```

我想知道。

我试图覆盖 setStyle 但看起来在 mxml 中初始化 fontSize 时它没有被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:16:00.537

这实际上比您想象的更容易完成，但它涉及元数据。您需要做的就是`Style`在类定义中添加元数据声明，如下所示：

```
[Style(name="fontSize", type="Number", inherit="no")]
public class WrappedLabel {
    ...
} 
```

如果您想了解有关元数据参数的更多信息，[请阅读文档](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf680e1-7ffe.html#WS2db454920e96a9e51e63e3d11c0bf69084-7a1a)。

# opa - Opa 经典语法的文档在哪里？

> ID：11202525
> 
> 赞同：1
> 
> 时间：2012-06-26T07:24:58.130
> 
> 标签：opa

介绍新语法的[博客文章](http://blog.opalang.org/2012/02/opa-090-new-syntax.html)说旧的 MLish 语法仍然可用并受支持，并且更改日志中没有任何内容表明它已被删除，但我在文档中找不到任何对它的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:35:36.173

您可以在此处查看旧文档：http: [//doc.s3.opalang.org/](http://doc.s3.opalang.org/)

正如您在[changelog](http://opalang.org/resources/changelog.xmlt)中看到的那样，在 0.9.0 版本中引入了新的类似 JS 的语法。

# ruby-on-rails - Rails 3.0 sms_fu

> ID：11202527
> 
> 赞同：1
> 
> 时间：2012-06-26T07:25:02.280
> 
> 标签：ruby-on-rails, sms

我应该在哪个文件中为 Rails 3 添加以下配置？

# sms_fu = SMSFu::Client.configure(:delivery => :action_mailer)

所以我可以在我的一个模型中执行 sms_fu.deliver("5558675309","at&t","message") 吗？

是否还有其他代码要添加，例如在某处包含 sms_fu？

从控制台访问 SMSFu 工作正常。但是执行 <%= carrier_collection %> 会产生无方法错误。

# javascript - 拉斐尔线图动画和更新图

> ID：11202532
> 
> 赞同：5
> 
> 时间：2012-06-26T07:25:28.017
> 
> 标签：javascript, graph, raphael, graphael

我是 raphael 库的新手，所以我仍在学习如何解决它，我能够按照我想要的方式设置我的图表，但现在我尝试做以下两件事，但我很难找到我想要的文档/示例.

这是我到目前为止所拥有的
[http://jsfiddle.net/PA67H/](http://jsfiddle.net/PA67H/)

1.  当图形加载类似于[此的内容时，为初始数据点设置动画](http://www.highcharts.com/demo/)
2.  动画数据点的变化，因此当按下按钮时，数据源将更改为 var2 但以动画方式像[这里](http://raphaeljs.com/chart.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T02:13:23.683

You are looking for [http://raphaeljs.com/reference.html#Raphael.animation](http://raphaeljs.com/reference.html#Raphael.animation)

may be you can find out what you wanted.

# ios - 使用协议应用程序崩溃 ipad

> ID：11202533
> 
> 赞同：0
> 
> 时间：2012-06-26T07:25:34.353
> 
> 标签：ios, ipad, protocols, uipopovercontroller

我有应用程序，我有两个视图控制器，我的第一个视图和第二个视图控制器在 uipopovercontroller 中。我想要第二个视图控制器在第一个视图中的值，因为我已经创建了协议。这是我的代码。#import #import "SearchPopoverController.h" #import "AppDelegate.h"

```
@interface ViewController : UIViewController<PassSearchValueDelegate>{
AppDelegate *appDelegate;

SearchPopoverController *popSearch;

IBOutlet UILabel *lblAdd;
}

-(IBAction)showpop:(id)sender;
@end

#import "ViewController.h"

// my ViewController.m file code

-(void) getLocationList:(NSString *)strSearch{
lblAdd.text = strSearch;
}
-(IBAction)showpop:(id)sender{
if(![appDelegate.delObjSearchPopoverCon isPopoverVisible]){
    SearchPopoverController *popser = [[SearchPopoverController alloc] init];
    popSearch = popser;
    [popSearch setDelegate:self];

    appDelegate.delObjSearchPopoverCon = [[UIPopoverController alloc] initWithContentViewController:popSearch] ;

    [appDelegate.delObjSearchPopoverCon setPopoverContentSize:CGSizeMake(400 , 150)];
    [appDelegate.delObjSearchPopoverCon presentPopoverFromRect:CGRectMake(0, 0, 1, 1) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

} 
```

}

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"

@protocol PassSearchValueDelegate 
@required
-(void) getLocationList:(NSString *)strSearch;
@end
@interface SearchPopoverController : UIViewController <UITextFieldDelegate>{
AppDelegate *appDelegate;
IBOutlet UITextField *txtSearchAdd;
IBOutlet UILabel *lblSearchAdd;

id<PassSearchValueDelegate> _delegate;
}
@property (retain) id _delegate;
@end

//  my SearchPopoverController.m file code

-(IBAction)btnDoneSearch_clicked:(id)sender{

NSString *strAdd = [txtSearchAdd.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
strAdd = [strAdd stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

[appDelegate.delObjSearchPopoverCon dismissPopoverAnimated:YES];

if (strAdd != nil || strAdd.length != 0) {
    [_delegate getLocationList:strAdd];
}
} 
```

我在这条线上收到警告。

```
[popSearch setDelegate:self]; 
```

并且应用程序在下一行崩溃了。

请帮助我。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:29:42.153

重命名`_delegate`为`delegate` 你需要改变

```
@property (retain) id delegate; 
```

至

```
@property (assign) id<PassSearchValueDelegate> delegate; 
```

也在`PassSearchValueDelegate.m`添加

```
@implementation PassSearchValueDelegate //After this 
@synthesize delegate; //add this 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:30:15.493

```
id<PassSearchValueDelegate> _delegate;
// ...
@property (retain) id _delegate; 
```

您的属性应该被命名`delegate`并且可能被合成以使用`_delegate`实例变量。您还应该在属性类型上指定协议。

此外，委托应该是`assign`（或`weak`在 ARC 下）属性。

# html - HTML WYSIWYG edtor：为什么在 iFrame 中移动可编辑内容

> ID：11202534
> 
> 赞同：12
> 
> 时间：2012-06-26T07:25:35.240
> 
> 标签：html, editor, tinymce, ckeditor, wysiwyg

为什么可编辑的 html 被移动到 iFrame 中？我分析了不同的编辑器（TinyMce、CKEditor 等）并将可编辑的内容移动到一个单独的 iFrame 中，它们覆盖在原始文本上。

这是什么技术原因。我尝试了`contenteditable="true"`，这也是所有这些编辑器的基础，但还没有找到这样做的理由。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T08:25:47.983

我是 CKEditor 核心开发人员。不是很长时间 - 只是今年下半年，但我学到了很多关于我们为什么使用 iframed 可编辑的 :)

1.  样式 - iframed 编辑器的内容不继承页面的样式。这非常重要，因为我们无法重置样式（原文如此！CSS 真的很烂）。更重要的是 - 在 iframe 中，我们可以自由添加自己的样式，这也很有帮助。

2.  只有在 iframed 可编辑中，我们才能处理带有头部、元数据、正文样式、标题等的整个页面。我们的一些用户需要这个。

3.  浏览器有很多错误（且不完整）的 contenteditable 实现。例如，猜猜当您将列表粘贴到 Firefox 上的可编辑元素中时会发生什么`<h1>`（您可以在此编辑器中检查 - [http://createjs.org/demo/hallo/](http://createjs.org/demo/hallo/)）？它将泄漏出可编辑区域并成为不可编辑的元素。我们必须在编辑器中手动处理这些情况，这真的很辛苦:)。

4.  我不确定这一点，但我相信`designMode`允许将整个文档切换到可编辑区域是最先出现的，`contenteditable`后来出现了。所以原因也可能是历史原因——很难从一种方法切换到另一种方法。

5.  我们使用 iframed 可编辑文件的原因可能更多。当我学习它们时，我会更新我的答案:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T08:41:33.653

[来自 tinymce from](http://www.tinymce.com/forum/viewtopic.php?pid=18451)

> 嗨扎皮诺！
> 
> 使用 IFrame 是 TinyMCE 等编辑器的本质，因为在框架中，您可以修改 HTML 文档的任何部分以满足您的需要，而不会破坏主页文档中的任何内容。特别是如果您想编辑一个完整的 HTML 文档，包括其中的部分，而没有 IFrame，您将无法做到这一点。
> 
> 如果您将 TinyMCE 的文件存储在与您嵌入编辑器的页面不同的（子）域中，则会发生跨域脚本。向我们展示您遇到问题的安装测试场景，有人可能会帮助您！
> 
> 来自德国的问候（回德国）
> 
> 菲利克斯·里斯特。

# java - 能够通过 DependencyInjectionTestExecutionListener 在 Spring TestContext 中避免重复加载应用程序上下文

> ID：11202535
> 
> 赞同：4
> 
> 时间：2012-06-26T07:25:35.363
> 
> 标签：java, spring-test

假设我有一个名为 ServiceTest 的测试类，它具有三个测试方法 test1、test2 和 test3。这三种方法都使用了一些由 spring 提供的资源。在当前的事态下，如果spring上下文的加载有问题，每个测试方法都会重试上下文加载。有没有一种方法可以让它在第一次失败时通过现有的挂钩而中止？这背后可能有充分的理由——但我不欣赏它。任何指针都会有所帮助。真正的问题是上下文加载需要几分钟，如果它已经第一次失败，并且只是试图延长 CI 引擎报告失败所需的时间，那么它对于继续重新尝试加载上下文是没有用的。

我正在考虑向 Spring Guy 提出一个补丁，该补丁可以在 org.springframework.test.context.TestContext 中维护一个尝试映射，该映射可用于跟踪所做的尝试并避免一遍又一遍地尝试。想法？

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:com/kilo/spring/test-context.xml" })
public class ServiceTest {

@Resource(name = "fibonacciService")
private FibonacciService fibonacciService;

@Test
public void test1() {
    long fibonacci = fibonacciService.getFibonacci(5);
}

@Test
public void test2() {
    long fibonacci = fibonacciService.getFibonacci(4);
}

@Test
public void test3() {
    long fibonacci = fibonacciService.getFibonacci(6);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:15:36.497

不，目前没有办法`ApplicationContext`在使用现有挂钩的第一次失败时中止加载。

随时根据您的建议针对**SPR**项目和**测试**组件[创建 JIRA 问题。](https://jira.springsource.org/secure/CreateIssue.jspa?pid=10000&issuetype=4)

 ****问候，

Sam（Spring TestContext 框架的作者）****

# windows-mobile-6.5 - Windows Mobile 6.5 中 Compact 和 SQL Server DB 之间的双向同步

> ID：11202540
> 
> 赞同：0
> 
> 时间：2012-06-26T07:25:45.293
> 
> 标签：windows-mobile-6.5

我点击了链接**http://mobileworld.appamundi.com/blogs/andywigley/archive/2008/12/08/building-a-sync-services-for-ado-net-solution-for-mobile-devices.aspx**

并能够同步数据库。

**问题**是它仅适用于我通过设计器向导提供的 SQL Server DB 所在的静态连接字符串和服务器 IP。现在我想更改某些文件中提供的连接字符串和服务器 IP。以便用户可以更改服务器数据库位置并同步。我不知道如何继续。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:35:56.940

在本教程中，MiddleTierServiceLibrary 项目有一个带有 DB 连接字符串的 App.Config 文件。您可以在那里设置数据库连接。

# funambol - 如何使用 j2se 客户端连接并从 funambol dm 服务器中提取数据？

> ID：11202542
> 
> 赞同：1
> 
> 时间：2012-06-26T07:25:47.637
> 
> 标签：funambol, oma-dm

我已经安装了 DM 服务器，它已启动并正在运行。还通过 koneki 模拟器添加了一些设备详细信息。

现在我想使用其中一个 j2se 客户端连接并从 DM 服务器中提取数据。

我对这部分感到震惊。任何代码示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:06:54.480

实际上，在 Koneki 模拟器下面有**一个**OMA-DM 客户端，您可能想重用它！

您可以从 OMA-DM 模拟器的 GitHub 镜像中获取源代码：[此处](https://github.com/eclipse/koneki.protocols)和[此处](https://github.com/eclipse/koneki.simulators)

*   `org.eclipse.koneki.simulators.omadm`用于运行新的 OMA-DM 会话。在类中查找`run()`方法`org.eclipse.koneki.simulators.omadm.basic.DMBasicSimulation`
*   `org.eclipse.koneki.protocols.omadm` 定义模拟期间使用的对象模型。
*   `org.eclipse.koneki.protocols.omadm.client` （你最感兴趣的）管理客户端（例如模拟器）和服务器之间交换的所有消息。寻找`org.eclipse.koneki.protocols.omadm.client.basic.DMBasicSession`班级。

如果您有任何其他问题，您应该访问[Koneki 论坛](http://www.eclipse.org/forums/eclipse.koneki)（我相信您会的！）

# java - 是否可以在具有不同 ID 的 Eclipse 插件中使用相同的包和类名？

> ID：11202548
> 
> 赞同：0
> 
> 时间：2012-06-26T07:26:25.110
> 
> 标签：java, eclipse, eclipse-plugin

我想创建插件的“克隆”。我要更改插件 ID 以同时加载它们，但我应该更改类的名称吗？Eclipse 能否为每个插件使用不同的类路径，或者它只是从单个堆中的包中加载所有类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:35:59.417

这是否有效取决于您在问题中未指定的因素，因此我将向您介绍 Eclipse 中类加载的工作原理，您可以自行决定。

Eclipse 在顶级 OSGi 上运行。每个 Eclipse 插件都是一个 OSGi 包。每个包都有自己的类加载器。这个类加载器会看到包含在包中的类以及来自包依赖项的类。捆绑包有两种指定依赖项的方法。这两种方法都通过 bundle 的 MANIFEST.MF 文件中的条目起作用。一种方法是使用 Require-Bundle 构造来依赖于整个其他包。使用此方法，捆绑包将看到其依赖项通过 Export-Package 导出的所有包。第二种方法是使用 Import-Package。使用这种方法，bundle 将找到这样一个包，任何 bundle 都通过 Export-Package 导出。您还可以在生产者端对捆绑包和包进行版本控制，并在依赖端限制版本。

所以，有了这些知识，你需要问自己这些问题......

1.  是您正在克隆的捆绑包，通过 Export-Package 导出任何包。如果没有，那么你会没事的。

2.  哪些捆绑包当前指定您的原始捆绑包并将通过 Require-Bundle 指定克隆？您要避免的是单个包在 Require-Bundle 中同时指定 Bundle.Original 和 Bundle.Clone 的情况。如果需要这样的安排，您将不得不重命名克隆的包。

3.  最后要检查的是任何包是否在任何导出包上使用 Import-Package。如果是这样，您将需要对原始包进行版本化并以不同方式克隆。这发生在 Export-Package 指令中。您还需要在 Import-Package 指令中仔细指定版本约束，以使其与原始版本或克隆版本相匹配。未能对包进行版本化和约束导入将导致在运行时找到哪个版本的看似随机的行为。同样，如果单个下游包需要导入原始包和克隆包，则需要重命名克隆包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:55:40.153

虽然您可以拥有具有相同类名的不同插件，并且所有插件都有不同的类加载器和类路径，但 JVM 不允许您实际加载具有相同名称的两个类。

# actionscript-3 - 一个非常简单的单例？

> ID：11202551
> 
> 赞同：0
> 
> 时间：2012-06-26T07:26:28.717
> 
> 标签：actionscript-3, flash, apache-flex

这在 actionscript 中作为 Singleton 是否有效？即是否有任何我应该注意的问题，在这种情况下是否只会创建一个 AVManager 实例：

请注意，我确实得到了预期的输出（只有一次“实例化的第一次”并且数字遵循顺序）：

> 第一次实例化！1
> 
> 文件 1：2
> 
> 文件 2：3
> 
> 最后是 4

这是文件....

AV_CONFIG.as：

```
package {
    public class AV_CONFIG {
        public static var AVM:AVManager = new AVManager();
    }
} 
```

AVManager.as：

```
package {
    import flash.events.EventDispatcher;

    public class AVManager extends EventDispatcher {
        public var someConstantData:uint = 1;

        public function AVManager() {
            trace('instantiated first time!', someConstantData);
        }

    }
} 
```

然后：

文件1.as：

```
package {
    import AV_CONFIG;
    import flash.display.Sprite;

    public class File1 extends Sprite {

        public function File1() {
            AV_CONFIG.AVM.someConstantData++
            trace('FILE 1:', AV_CONFIG.AVM.someConstantData);
        }

    }
} 
```

文件2.as：

```
package {
    import AV_CONFIG;
    import flash.display.Sprite;

    public class File2 extends Sprite {

        public function File2() {
            AV_CONFIG.AVM.someConstantData++
            trace('FILE 2:', AV_CONFIG.AVM.someConstantData);
        }

    }
} 
```

Main.as（文档类）：

```
package {
    import AV_CONFIG;
    import flash.display.Sprite;

    public class Main extends Sprite {

        public function Main() {
            var f1:File1 = new File1();
            var f2:File2 = new File2();
            AV_CONFIG.AVM.someConstantData++
            trace('and finally', AV_CONFIG.AVM.someConstantData);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T07:45:41.783

通常对于单身人士，您希望：

1.  限制或取消创建该类实例的能力。
2.  创建一种静态获取该类实例的方法。

例子：

```
public class AvManager
{

    private static var _instance:AvManager;
    internal static var created:Boolean = false;

    public function AvManager()
    {
        if(AvManager.created)
        {
            throw new Error("Cannot created instances of AvManager, use AvManager.instance.");
        }

        AvManager.created = true;
    }

    public static function get instance():AvManager
    {
        if(_instance == null)
        {
            _instance = new AvManager();
        }

        return _instance;
    }

    public function test():void
    {
        trace("Working.");
    }

} 
```

您现在可以在哪里使用：

```
AvManager.instance.test(); // Working. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:37:04.220

最大的问题是[允许全局访问某个东西，如果它的状态可以改变的话](http://misko.hevery.com/code-reviewers-guide/flaw-brittle-global-state-singletons/)。如果这是一个您希望代码库维护超过一周左右的项目，并且您认为它可能有超过 500 行代码，我强烈建议您避免这样做——我可以根据经验告诉您在一个大型项目中，很难甚至不可能弄清楚数百个可以访问您的单例的类中的哪一个对其状态进行了更改，从而导致了给定的错误。

其次，需求有一种变化的方式。如果你突然需要 2 个 AVManager 怎么办？你会发现你已经为你的静态创建了如此多的烘焙引用，以至于改变它会使整个项目崩溃。再次，我从这里的经验说起。如果您使用依赖注入（这只是一种可怕的说法，即需要 AVManager 的类具有从外部填充的属性），那么这些类型的更改变得容易......只需给它们一个不同的 AVManager，就完成了。

最后，如果您想要进行测试驱动开发，那么以这种方式使用全局变量/静态变量基本上会使所有代码无法测试。你不能提供一个替代的 AVManager 来测试，因为所有依赖它的类都是硬连线去获取那个特定的。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T07:42:47.370

是的，这很好用，另一种方法是将 AVManager 放在它自己的类文件的顶部：

```
private static var AVM:AVManager = new AVManager(); 
```

并在需要时使用 AVManager 类中的函数获取它，如下所示：

```
public static function GetInstance():AVManager {
    return AVM;
} 
```

此设置不是必需的，但通过禁止直接访问提供了一些不错的小保护。

祝你的项目好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:15:58.730

*将此代码视为创建不同内容的尝试。*

`Singleton`AS3 中的另一个：

首先一个`Interface`：

```
package test {
public interface Foo {

    function func0():void;

    function func1(arg:String):String;

}
} 
```

然后是`Singleton`：

```
package test {
public class BASIC_FOO {
    public static const BASIC_FOO:Foo = new BasicFoo();
}
}

import test.Foo;

class BasicFoo implements Foo {

    public function func0():void {
    }

    public function func1(arg:String):String {
        return arg;
    }
} 
```

# ruby-on-rails-3 - 引导资产应该只在管理员中工作 - Rails

> ID：11202552
> 
> 赞同：3
> 
> 时间：2012-06-26T07:26:31.890
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, asset-pipeline, sass

我在 rails 项目中使用 bootstrap 有点困惑。我想在管理区域而不是在家中使用引导程序。但它不起作用。我已将**@import "bootstrap"**添加到 stylesheet/admin/admin.css.scss - 不工作。但是，如果我将它添加到 stylesheet/application.css.scss 中，它可以工作，但它会覆盖所有其他 css 样式，并且也适用于我不想要的主页。！项目目录[图像](http://i.stack.imgur.com/q7Ni5.png)。

我已将 javascript 和 css 包含标签添加到 views/layout/admin.html.erb 与 application.html.erb 相同

```
<%= stylesheet_link_tag    "application", :media => "all" %>
<%= javascript_include_tag "application" %>
<%= csrf_meta_tags %> 
```

仅将 admin/*.css 文件包含到 admin 中的任何其他方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:31:55.767

在您的样式表文件夹中创建一个包含以下内容的 admin.css.scss 文件：

```
/**
 * admin.css.scss
 *
 *= require_self
 *= require_tree ./admin  
 */ 
```

然后，在您的管理布局中，您可以只包含新创建的 admin.css.scss 样式表，如下所示：

```
<%= stylesheet_link_tag "admin.css.scss", :media => "all" %> 
```

它将充当“admin”子文件夹中所有 css/scss 文件的加载器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:54:29.777

@svilenv 的答案是正确的，但您还需要在 config/environments/production.rb 上添加资产：

```
config.assets.precompile += %w[admin.css] 
```

# r - 根据开始和结束时间从时间序列中获取数据

> ID：11202554
> 
> 赞同：3
> 
> 时间：2012-06-26T07:26:49.363
> 
> 标签：r, time-series, zoo

我有 100 个文本文件，其中包含在不同时间点开始和结束的时间序列。我想提取系列中常见时间段的值。使用以下代码生成示例数据：

```
set.seed(1)
D1 = data.frame(time = seq(ISOdatetime(2012, 6, 26, 3, 15, 00), 
                       length = 500, by = 900),
            value = rnorm(500))
D2 = data.frame(time = seq(ISOdatetime(2012, 6, 24, 5, 30, 00),
                       length = 541, by = 900),
            value = rnorm(541))
D3 = data.frame(time = seq(ISOdatetime(2012, 6, 23, 5, 45, 00),
                       length = 700, by = 900),
            value = rnorm(700)) 
```

该数据将为您提供 3 个时间序列的开始和结束以及不同的时间。我希望只保留共同时间段的值并删除其余的值。即如果，

*   第一个系列以“2012-6-26 3:45:26”开头，以“2012-8-07 4:45:26”结尾
*   第二个以“2012-6-24 5:55:27”结尾，以“2012-7-28 7:45:26”结尾
*   第三个以“2012-6-23 5:04:30”结尾，以“2012-7-27 4:45:26”结尾

然后我希望保留三个时间序列的交集数据，即数据对应于：-

*   开始：“2012-6-26 3:45:26”
*   结束：“2012-7-27 4:45:26”
*   对于所有 3 系列并删除其余部分。

我搜索了 SO 和其他网站，但没有找到任何解决方案。需要帮助。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:54:51.673

看来您需要熟悉该`xts`软件包。将您的数据框转换为`xts`时间序列对象并使用`merge`. `merge`将合并所有值，因此如果您希望所有值都出现，您也可以使用`na.omit`.

```
require(xts)
D1 = xts(d1$Value, d1$Time)
D2 = xts(d2$Value, d2$Time)
D3 = xts(d3$Value, d3$Time)
temp = merge(D1, D2, D3) 
```

这是一些示例输出。对于`head`和`tail`，请注意`NA`值的存在。

```
head(temp)
#                              D1 D2 D3
# 2012-06-26 13:15:19 -0.50219235 NA NA
# 2012-06-26 13:30:19  0.13153117 NA NA
# 2012-06-26 13:45:19 -0.07891709 NA NA
# 2012-06-26 14:00:19  0.88678481 NA NA
# 2012-06-26 14:15:19  0.11697127 NA NA
# 2012-06-26 14:30:19  0.31863009 NA NA
tail(temp)
#                     D1 D2         D3
# 2012-07-04 05:45:19 NA NA  1.4799645
# 2012-07-04 06:00:19 NA NA -0.3942801
# 2012-07-04 06:15:19 NA NA -0.6767234
# 2012-07-04 06:30:19 NA NA -0.2425192
# 2012-07-04 06:45:19 NA NA  0.4547177
# 2012-07-04 07:00:19 NA NA  1.1712661
head(na.omit(temp))
#                             D1          D2          D3
# 2012-06-27 14:15:19 -0.3329234 -1.63230970  0.75619287
# 2012-06-27 14:30:19  1.3631137 -0.06299626 -1.36131851
# 2012-06-27 14:45:19 -0.4691473 -0.70544686 -0.60876462
# 2012-06-27 15:00:19  0.8428756 -0.31417818 -0.21174696
# 2012-06-27 15:15:19 -1.4579937 -0.26694627 -0.67847242
# 2012-06-27 15:30:19 -0.4003059  0.15315947  0.06665787
tail(na.omit(temp))
#                              D1         D2          D3
# 2012-07-01 16:45:19 -0.49419020  1.1911322  2.73143169
# 2012-07-01 17:00:19 -1.71111303  0.7613245  0.57057667
# 2012-07-01 17:15:19  0.04005805 -0.1210687  1.32083870
# 2012-07-01 17:30:19 -0.56114348 -1.2250590  0.09951626
# 2012-07-01 17:45:19 -2.55736206 -0.1637461 -0.39435301
# 2012-07-01 18:00:19 -0.69677881 -1.3138963  0.63649492 
```

# eclipse - 忽略 Eclipse 项目中的所有警告

> ID：11202561
> 
> 赞同：7
> 
> 时间：2012-06-26T07:27:22.030
> 
> 标签：eclipse, warnings, suppress-warnings

假设您的 Eclipse 工作区中有一堆项目。有些是 Java 项目，有些可能是 CDT 项目，有些可能来自第三方插件，例如 TeXlipse 或 EPIC。您长期努力地编写高质量的代码，但是在*一个*特定的项目中，您有几个警告，这不是您自己的过错——这些警告会向上传播到您的工作集并戳中您的眼睛。

1.  Eclipse 3.7 中是否有一种通用方法来告诉 IDE 它应该忽略（并保持安静）来自特定项目的所有警告，无论负责的插件可能提供或不提供任何支持？

2.  据我所知，Eclipse 3.8（还是 4.2？）将有更好的警告处理。是否会等待几天才能完全解决这个特定问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-16T07:49:11.733

Supernecro，但如果它仍然相关，并且您想阻止错误，因为您正在编辑另一个项目，请右键单击该项目并单击“关闭项目”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T11:10:54.603

对于 Java，我唯一能找到的是 Project Preferences -> Java Compiler -> Errors/Warnings Page。如果您将所有设置都设置为“忽略”，该项目应该是安静的。然而它是相当麻烦的。也许其他编译器也有类似的设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T11:06:22.380

我能建议的最好的方法是单击“问题视图”标题栏右侧的小向下三角形。从该下拉菜单中选择配置内容。我不认为您可以过滤掉特定项目的错误，但您可以过滤掉各种错误。

# c# - 如何修复调用自定义 actionlink 方法

> ID：11202563
> 
> 赞同：0
> 
> 时间：2012-06-26T07:27:26.590
> 
> 标签：c#, asp.net, asp.net-mvc-3

我创建了这个自定义操作链接

```
public static IHtmlString CustomActionLink(this HtmlHelper htmlHelper, int userId, string controller, string linkText, string action)
    {
        int userID = userId;
        bool isAllowed = checkPermission(userID,action,controller);
        if (isAllowed == false)
        {
            return MvcHtmlString.Empty;
        }
        return htmlHelper.ActionLink(linkText, action);
    } 
```

我尝试将此方法称为 Helper.CustomActionLink(4,"myController","text","MyAction") 但它要求我也传递第一个参数 'this HtmlHelper htmlHelper' 我如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:28:22.843

你应该这样称呼它：

```
@Html.CustomActionLink(4,"myController","text","MyAction") 
```

# java - 覆盖 Struts 2 消息

> ID：11202570
> 
> 赞同：1
> 
> 时间：2012-06-26T07:28:07.100
> 
> 标签：java, file-upload, error-handling, struts2

在我的 struts.xml 我有：

```
<action name="file_save" method="fileSave" class="FileActionBean">
                <interceptor-ref name="fileUpload">
                    <param name="maximumSize">
                        5242880
                    </param>
                    <param name="allowedTypes">
                        text/html
                    </param>
                </interceptor-ref>
                <interceptor-ref name="defaultStack"></interceptor-ref>
                <result name="success" type="redirect">file</result>
                <result name="error">error</result>
</action> 
```

当我上传大于 5MB 的文件时，不会引发错误。然后在我的 struts.xml 的顶部，我有：

```
<constant name="struts.multipart.maxSize" value="20971520" /> 
```

现在，当我上传大于 20MB 的文件时，会显示一条错误消息。这是正常行为吗？

如果是这样，我如何配置 struts 以显示拦截器的错误消息？

**编辑1：**

我正在使用 struts 2 版本 2.1.8.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:25:30.680

我在这篇文章中遇到了类似的问题：

[您如何覆盖 Struts 2 消息？](https://stackoverflow.com/questions/11154393/how-do-you-override-struts-2-messages)

我发现按照[这个例子](http://struts2-by-ash.blogspot.com/2012/06/override-struts-2-messages.html)我解决了这个问题和上面的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:36:25.273

你为什么不把你的文件大小验证代码带到你的动作类中，然后在验证方法中检查文件大小，如果它违反了然后`addActionError("your msg")`显示在你的jsp中。

```
<constant name="struts.multipart.maxSize" value="-1"/> 
```

尝试使用您的 struts 常量并将拦截器文件大小设置为您想要的大小。

# java - 阻止精灵通过另一个精灵重影

> ID：11202572
> 
> 赞同：0
> 
> 时间：2012-06-26T07:28:10.470
> 
> 标签：java, lwjgl, slick2d

好的，所以我刚刚开始学习 java（我通常用 Objective-C 编程）。我的第一个游戏是一个类似于 Pokémon 的游戏，但是，它显然要简化得多......

我遇到的麻烦是我找不到阻止 2 个精灵相互“重影”的方法。在屏幕上，我设置了边界（边界）、玩家精灵和敌人精灵。

```
public void playerUpdate(GameContainer gc, int delta) throws SlickException
{
    Input input = gc.getInput();

    // Right Key Pressed
    if (input.isKeyDown(Input.KEY_RIGHT) && (leftKeyPressed == false)
            && (upKeyPressed == false) && (downKeyPressed == false))
    {
        player = walkRight;
        playerX += speed * delta;
        rightKeyPressed = true;
        if (playerX >= Main.getWindowWidth() - pImageWidth)
        {
            playerX -= speed * delta;
        }
    } else if (rightKeyPressed == true) 
    {
        player = standRight; 
        rightKeyPressed = false;
    } 
```

^^ 这是我需要实现碰撞检测的地方。我已经为每个图像添加了矩形以进行碰撞检测，但是，我并不是在寻找一种让它们消失的方法。我需要一种方法来阻止一个精灵穿过另一个精灵。

有任何想法吗？

我试过使用

```
if (this.playerBoundingBox.intersects(Enemy.getEnemyBoundingBox())
{
    playerX += speed * delta;
} 
```

但是，当我实施此操作时，播放器会卡住并且无法释放。

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:10:06.513

碰撞检测是一个广泛而深入的话题，实现它的方法有很多。

我强烈建议您阅读[实现 2D 平台游戏指南](http://higherorderfun.com/blog/2012/05/20/the-guide-to-implementing-2d-platformers/)，它应该会给您一些很好的建议。我使用[Sonic Retro Physics Guide](http://info.sonicretro.org/Sonic_Physics_Guide)实现了一个 2D 平台引擎，这非常有用。

在我的游戏*Clover: A Curious Tale*我（不必要！）实现了一个更复杂的混合逐像素碰撞与边界框。该方法是计算出所需的移动路径，然后逐个像素检查是否有任何阻碍 - 如果有，只移动到那个像素减一的距离。

创建一个在所有情况下都完美无缺的 2D 引擎是一项非常艰巨的任务，而不是您应该尝试的事情。对演员的大小等事物进行一些限制，以及任何事物在单次滴答声中可以移动的最大速度将使您的生活更轻松。省略可以推动玩家的东西会容易得多，因为你只需要在一个“方向”上进行一次碰撞检测（即当玩家移动时，而不是当所有其他演员移动时）。

# javascript - Node.js 全局变量属性被清除

> ID：11202576
> 
> 赞同：2
> 
> 时间：2012-06-26T07:28:25.553
> 
> 标签：javascript, node.js, garbage-collection, global-variables, purge

我的问题不是关于“内存泄漏”，而是关于 node.js（expressjs）应用程序的“内存清除”。

我的应用程序应该在内存中维护一些对象，以便在服务期间进行快速查找。在启动应用程序后暂时（一两天），一切似乎都很好，直到突然我的网络客户端无法查找该对象，因为它已被清除（未定义）。我怀疑 Javascript GC（垃圾收集）。但是，正如您在 psedu 代码中看到的那样，我将对象分配给 node.js 的“全局”变量属性以防止 GC 清除它们。请给我一些线索是什么导致了这个问题。

非常感谢您的好意建议~

我的 node.js 环境是 node.js 0.6.12、expressjs 2.5.8 和 VMWare cloudfoundry 节点托管。

这是我的 app.js 伪代码：

```
var express = require("express");
var app = module.exports = express.createServer();

// myMethods holds a set of methods to be used for handling raw data.
var myMethods = require("myMethods");

// creates node.js global properties referencing objects to prevent GC from purging them
global.myMethods = myMethods();
global.myObjects = {};

// omited the express configurations

// creates objects (data1, data2) inside the global.myObjects for the user by id.
app.post("/createData/:id", function(req, res) {

    // creates an empty object for the user.
    var myObject = global.myObjects[req.prams.id] = {};

    // gets json data.
    var data1 = JSON.parse(req.body.data1);
    var data2 = JSON.parse(req.body.data2);

    // buildData1 & buildData2 functions transform data1 & data2 into the usable objects.
    // these functions return the references to the transformed objects.
    myObject.data1 = global.myMethods.buildData1(data1);
    myObject.data2 = global.myMethods.buildData2(data2);

    res.send("Created new data", 200);
    res.redirect("/");
});

// returns the data1 of the user.
// Problem occurs here : myObject becomes "undefined" after one or two days running the service.
app.get("/getData1/:id", function(req, res) {

    var myObject = global.myObjects[req.params.id];
    if (myObject !== undefined) {
        res.json(myObject.data1);
    } else {
        res.send(500); 
    }
});

// omited other service callback functions.

// VMWare cloudfoundry node.js hosting.
app.listen(process.env.VCAP_APP_PORT || 3000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:03:23.087

任何类型的缓存系统（无论是您自己的产品还是第三方产品）都应该考虑这种情况。您不应依赖内存缓存中始终可用的数据。有太多的事情会导致内存中的数据消失（机器重启、进程重启等等。）

在您的情况下，您可能需要更新代码以查看数据是否在缓存中。如果它不在缓存中，则从持久存储（数据库、文件）中获取它，缓存它，然后继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-13T21:02:46.130

就像 Haesung 一样，我想*保持我的程序简单，没有数据库*。和 Haesung 一样，我对 Node.js（和 express）的第一次体验就是观察这种奇怪的清除。虽然我很困惑，但我真的不接受我需要一个存储解决方案来管理一个几百行的 json 文件。对我来说，灯泡时刻是我读到这篇文章的时候

*如果你想让一个模块多次执行代码，那么导出一个函数，然后调用那个函数。*

取自[http://nodejs.org/api/modules.html#modules_caching](http://nodejs.org/api/modules.html#modules_caching)。所以我在所需文件中的代码从这里改变了

```
var foo = [{"some":"stuff"}];
export.foo; 
```

到那个

```
export.foo = function (bar) {
var foo = [{"some":"stuff"}];
return foo.bar;
} 
```

然后它工作得很好:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:20:45.040

然后我建议使用文件系统，我认为 4KB 开销对你的目标和硬件来说不是什么大问题。如果您熟悉前端 javascript，这可能会有所帮助[https://github.com/coolaj86/node-localStorage](https://github.com/coolaj86/node-localStorage)

# c# - for-loop / switch-statement的性能优化

> ID：11202580
> 
> 赞同：7
> 
> 时间：2012-06-26T07:28:36.227
> 
> 标签：c#, for-loop, logic, switch-statement

请帮我确定以下哪些是更优化的代码？

```
for(int i=0;i<count;i++)
{
    switch(way)
    {
        case 1:
            doWork1(i);
            break;
        case 2:
            doWork2(i);
            break;
        case 3:
            doWork3(i);
            break;
    }
} 
```

**或者**

```
switch(way)
{
    case 1:
        for(int i=0;i<count;i++)
        {
            doWork1(i);
        }
        break;
    case 2:
        for(int i=0;i<count;i++)
        {
            doWork2(i);
        }
        break;
    case 3:
        for(int i=0;i<count;i++)
        {
            doWork3(i);
        }
        break;
} 
```

在第一种情况下，碰巧在每次迭代中**总是**检查 switch case 条件的开销。在第二种情况下，开销不存在。我觉得第二种情况好多了。如果有人有任何其他解决方法，请帮助我提出建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T07:41:55.720

低的`switch`连续值**非常**快 - 这种类型的跳转具有高度优化的处理。坦率地说，在绝大多数情况下，你所问的都不会产生任何影响——任何事情**都会***淹没*`doWork2(i);`这个；哎呀，虚拟呼叫**本身**可能会淹没它。

如果它真的，真的，真的很重要（我很难在这里想到一个真实的场景），那么：测量它。在任何明显的情况下，衡量它的**唯一**方法是使用您**实际的、准确的**代码 - 您无法概括 pico 优化。

所以：

1.  没关系
2.  措施
3.  没关系

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:35:01.357

实际上，尽管这里有一些评论，它可能会更快一些。

让我们实际测试一下：

```
using System;
using System.Diagnostics;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            int count = 1000000000;

            Stopwatch sw = Stopwatch.StartNew();

            for (int way = 1; way <= 3; ++way)
                test1(count, way);

            var elapsed1 = sw.Elapsed;
            Console.WriteLine("test1() took " + elapsed1);

            sw.Restart();

            for (int way = 1; way <= 3; ++way)
                test2(count, way);

            var elapsed2 = sw.Elapsed;
            Console.WriteLine("test2() took " + elapsed2);

            Console.WriteLine("test2() was {0:f1} times as fast.", + ((double)elapsed1.Ticks)/elapsed2.Ticks);
        }

        static void test1(int count, int way)
        {
            for (int i = 0; i < count; ++i)
            {
                switch (way)
                {
                    case 1: doWork1(); break;
                    case 2: doWork2(); break;
                    case 3: doWork3(); break;
                }
            }
        }

        static void test2(int count, int way)
        {
            switch (way)
            {
                case 1:
                    for (int i = 0; i < count; ++i)
                        doWork1();
                    break;

                case 2:
                    for (int i = 0; i < count; ++i)
                        doWork2();
                    break;

                case 3:
                    for (int i = 0; i < count; ++i)
                        doWork3();
                    break;
            }
        }

        static void doWork1()
        {
        }

        static void doWork2()
        {
        }

        static void doWork3()
        {
        }
    }
} 
```

现在这是非常不现实的，因为 doWork() 方法不做任何事情。但是，它将给我们一个基准时间。

在我的 Windows 7 x64 系统上构建 RELEASE 得到的结果是：

```
test1() took 00:00:03.8041522
test2() took 00:00:01.7916698
test2() was 2.1 times as fast. 
```

因此，将循环移动到 switch 语句中可以使其速度快两倍。

现在让我们通过在 doWork() 中添加一些代码来让它更真实一点：

```
using System;
using System.Diagnostics;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            int count = 1000000000;

            Stopwatch sw = Stopwatch.StartNew();

            for (int way = 1; way <= 3; ++way)
                test1(count, way);

            var elapsed1 = sw.Elapsed;
            Console.WriteLine("test1() took " + elapsed1);

            sw.Restart();

            for (int way = 1; way <= 3; ++way)
                test2(count, way);

            var elapsed2 = sw.Elapsed;
            Console.WriteLine("test2() took " + elapsed2);

            Console.WriteLine("test2() was {0:f1} times as fast.", + ((double)elapsed1.Ticks)/elapsed2.Ticks);
        }

        static int test1(int count, int way)
        {
            int total1 = 0, total2 = 0, total3 = 0;

            for (int i = 0; i < count; ++i)
            {
                switch (way)
                {
                    case 1: doWork1(i, ref total1); break;
                    case 2: doWork2(i, ref total2); break;
                    case 3: doWork3(i, ref total3); break;
                }
            }

            return total1 + total2 + total3;
        }

        static int test2(int count, int way)
        {
            int total1 = 0, total2 = 0, total3 = 0;

            switch (way)
            {
                case 1:
                    for (int i = 0; i < count; ++i)
                        doWork1(i, ref total1);
                    break;

                case 2:
                    for (int i = 0; i < count; ++i)
                        doWork2(i, ref total2);
                    break;

                case 3:
                    for (int i = 0; i < count; ++i)
                        doWork3(i, ref total3);
                    break;
            }

            return total1 + total2 + total3;
        }

        static void doWork1(int n, ref int total)
        {
            total += n;
        }

        static void doWork2(int n, ref int total)
        {
            total += n;
        }

        static void doWork3(int n, ref int total)
        {
            total += n;
        }
    }
} 
```

现在我得到这些结果：

```
test1() took 00:00:03.9153776
test2() took 00:00:05.3220507
test2() was 0.7 times as fast. 
```

现在将循环放入开关变得更慢了！这种违反直觉的结果是这类事情的典型表现，并说明了为什么在尝试优化代码时应该始终执行时序测试。（并且像这样优化代码通常是你甚至不应该做的事情，除非你有充分的理由怀疑存在瓶颈。你最好花时间清理你的代码。;））

我做了一些其他测试，对于稍微简单的 doWork() 方法，test2() 方法更快。这在很大程度上取决于 JIT 编译器可以对优化做什么。

注意：我认为我的第二个测试代码的速度差异的原因是因为 JIT 编译器可以在内联对 doWork() 的调用时优化掉 'ref' 调用，当它们不在循环中时，如 test1() ; 而对于 test2() 它不能（出于某种原因）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T07:31:30.267

您可以执行以下操作：

```
Func(void, int> doWork;
switch(way) 
{ 
    case 1: 
        doWork = doWork1; 
        break; 
    case 2: 
        doWork = doWork2; 
        break; 
    case 3: 
        doWork = doWork3; 
        break; 
} 
for (int i=0;i<count;i++)  
{
     doWork(i);
} 
```

（写在这里，代码可能不太编译，只是为了给你一个想法......）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T07:49:24.183

我会问自己问题以进行优化

1.  首先，计数有多大？是 1,2,10, 10000000000 吗？
2.  运行代码的机器有多强大？
3.  我应该写更少的代码吗？
4.  我写完这段代码有人会看吗？如果是这样，他有多专业？
5.  我缺少什么？时间？速度 ？还有什么？
6.  是什么`way`？我从哪里得到它？`way`成为 1 或 2 或 3的概率是多少？

很明显，第一个代码片段将用于 switch 部分，直到`i`达到 count 但 count 有多大？如果它不是一个非常大的数字，那不会有关系吗？如果它太大并且运行时间很慢，那么它就没有用了。但是，正如我所说，如果您想要可读性并且可以保证计数很小，为什么不使用第一个呢？它比第二个更易读，而且我喜欢的代码更少。

第二个片段，看起来很丑，但如果 count 是一个巨大的数字，它应该是首选。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T07:47:33.190

您应该对其进行测量以查看是否值得优化（我很确定[它不是](http://www.dotnetperls.com/if-switch-performance)）。就可读性和简洁性而言，我个人更喜欢第一个（代码更少，更不容易出错，更“[干](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)”）。

这是另一种更简洁的方法：

```
for(int i = 0; i < count; i++)
{
    doAllWays(way, i); // let the method decide what to do next
} 
```

所有“方式”似乎都是相关的，否则它们不会出现在同一个`switch`. 因此，首先将它们捆绑在一种方法中是有意义的`switch`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T07:34:42.540

第二种方法效率更高；无论如何，您都必须完成完整的*for*循环。但是在第一种方法中，您不必要地重复*case*语句**计数**次数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-26T07:53:01.173

假设您在这里遇到性能问题（因为在大多数情况下 switch 真的非常快）：

如果你对你的 switch 语句感到困扰，我建议在这里应用重构。

switch 可以很容易地被策略模式替换（因为在 for 循环中切换的值没有改变，所以根本不需要切换）。

真正的优化目标是那些 for 循环，但如果没有上下文，很难说出可以做些什么。

这是有关重构开关的更多信息（例如，策略模式） [CodeProject Article on refactoring switch](http://www.codeproject.com/Articles/37588/Refactoring-Switch-Statements-Take-2)

# iphone - UITextField 的下拉框

> ID：11202584
> 
> 赞同：0
> 
> 时间：2012-06-26T07:28:51.583
> 
> 标签：iphone, ios, ipad

谁能让我知道如何为 UITextField 设置一个下拉框，几乎没有名称建议。

我怎样才能做到这一点？？？？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:03:38.400

为简单起见，您基本上可以只使用 Uipickerview+Textfield。

但是如果你想要下图中的东西

![在此处输入图像描述](../Images/8b21644c41fedcea775ac5af3bd7b321.png)

我建议你按照这个[教程](http://www.dalmob.org/2011/03/01/alternative-autocomplete-uitextfield/)

# telerik-grid - Telerik : radgrid onItemDatabound 事件

> ID：11202585
> 
> 赞同：0
> 
> 时间：2012-06-26T07:28:55.493
> 
> 标签：telerik-grid, itemtemplate

我们有一个带有一些 Telerik:GridTemplateColumns 的 RadGrid。我们得到一个数据源并绑定网格。对于第一页网格行为是一致的。但是在页面更改后，网格中的其他列会获得新值，但 itemtemplate 列会保留第一页的值。

网格设计代码：

```
<telerik:RadGrid ID="rgvTest" runat="server" AllowFilteringByColumn="false"
                                            AllowPaging="True" AllowSorting="True" MasterTableView-ShowHeadersWhenNoRecords="false"
                                            AllowCustomPaging="false" AutoGenerateDeleteColumn="false" AllowMultiRowSelection="true"
                                            AutoGenerateEditColumn="false" GridLines="None" ShowGroupPanel="True" OnItemDataBound="rgvTest_ItemDataBound"
                                            OnPageIndexChanged="rgvTest_PageIndexChanged" OnSortCommand="rgvTest_SortCommand"
                                            ClientSettings-ClientEvents-OnRowDblClick="GridRowDoubleclick" >

<Columns>
                                                    <telerik:GridClientSelectColumn UniqueName="ClientSelectColumn" ItemStyle-Width="20px" HeaderStyle-Width="20px"/>
                                                    <telerik:GridTemplateColumn HeaderImageUrl="../Images/priority_icon.png" UniqueName="Priority1"
                                                        HeaderTooltip="Priority">
                                                        <ItemStyle Width="20px" Wrap="false" />
                                                        <HeaderStyle Width="20px" Wrap="false" />
                                                        <ItemTemplate>
                                                            <asp:Image ID="PriorityImage" runat="server" />
                                                        </ItemTemplate>
                                                    </telerik:GridTemplateColumn>
</Columns> 
```

考虑到页面大小设置为 10。调试后，我得到 OnItemdataBound 事件在加载时调用了前 10 条记录。换页后，它被调用了20次，但第一页和第二页的20条记录被调用，前10条记录被调用了两次......奇怪但真实。如果有人对此有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:58:49.580

我得到了决议。实际上，在绑定项目时，我们使用的是 Item.ItemIndex 属性而不是 Item.dataIndex。ItemIndex 值从 0-10 不等，DataIndex 从 0 不等 - DataIndex 的长度...

# c++ - 如何使用 OpenCV 为图像添加水印？

> ID：11202588
> 
> 赞同：1
> 
> 时间：2012-06-26T07:29:04.447
> 
> 标签：c++, opencv, watermark

有没有办法使用 OpenCV 库将水印图像添​​加到另一个图像？

我正在使用 OpenCV 和 C++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T19:00:25.977

看看[这个教程](http://docs.opencv.org/doc/tutorials/core/adding_images/adding_images.html#adding-images)。

这是一些（未经测试的）代码：

```
 Mat watermark = imread("watermarkimage.png")
 Mat img = imread("yourimage.jpg");
 //assuming the watermark has same number of channel and size as your_image
 Mat watermarked = (0.8 * img) +  (0.2 * watermark) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:39:41.207

[您可以使用 opencv 的cv::putText](http://opencv.itseez.com/modules/core/doc/drawing_functions.html#puttext)函数在图像上添加文本水印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:58:22.867

简单：将原始图像 (90%) 和添加了水印文本/图形的副本 (10%) 混合。

# java - Maven中的错误“复制依赖项”

> ID：11202592
> 
> 赞同：3
> 
> 时间：2012-06-26T07:29:26.693
> 
> 标签：java, maven, m2e, maven-dependency-plugin

我想在安装项目时将 maven 中的 lib 依赖项复制到 lib 目录中。我在我的 pom 文件中使用了它。

```
<project>
    <dependencies>
        ...
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.4</version>
                <executions>
                    <execution>
                        <id>copy-dependencies</id>
                        <phase>package</phase>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.build.directory}/dependencies</outputDirectory>
                        </configuration>    
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

但以下是错误：

```
Description Resource    Path    Location    Type
maven-dependency-plugin (goals "copy-dependencies", "unpack") is not supported by m2e. pom.xml  /jasperreports-test line 60 Maven Project Build Lifecycle Mapping Problem 
```

我试着修复它。这是我项目中的 pom 文件。

```
<project>

    <groupId>com.vccorp.adtech</groupId>
    <artifactId>UserAgentService</artifactId>
    <version>14.06.201</version>

    <name>UserAgentService</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>            
        </dependency>
    </dependencies>
    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>1.0.0</version>
                    <configuration>
                        <lifecycleMappingMetadata>
                            <pluginExecutions>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.apache.maven.plugins</groupId>
                                        <artifactId>maven-dependency-plugin</artifactId>
                                        <versionRange>[1.0.0,)</versionRange>
                                        <goals>
                                            <goal>copy-dependencies</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore />
                                    </action>
                                </pluginExecution>
                            </pluginExecutions>
                        </lifecycleMappingMetadata>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>1.0</version>
                <executions>
                    <execution>
                        <id>copy</id>
                        <phase>install</phase>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>
                                ${project.build.directory}/lib
                            </outputDirectory>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

但是在安装它时会出现以下错误：

```
> [INFO] Building UserAgentService 14.06.201 [INFO]
> ------------------------------------------------------------------------ SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
> SLF4J: Defaulting to no-operation (NOP) logger implementation SLF4J:
> See http://www.slf4j.org/codes.html#StaticLoggerBinder for further
> details. Downloading:
> http://222.255.27.149:8081/nexus-maven/content/groups/public/org/apache/maven/plugins/maven-dependency-plugin/1.0/maven-dependency-plugin-1.0.pom
> [INFO]
> ------------------------------------------------------------------------ [INFO] BUILD FAILURE [INFO]
> ------------------------------------------------------------------------ [INFO] Total time: 4.716s [INFO] Finished at: Tue Jun 26 11:55:06 ICT
> 2012 [INFO] Final Memory: 5M/15M [INFO]
> ------------------------------------------------------------------------ [ERROR] Plugin org.apache.maven.plugins:maven-dependency-plugin:1.0 or
> one of its dependencies could not be resolved: Failed to read artifact
> descriptor for
> org.apache.maven.plugins:maven-dependency-plugin:jar:1.0: Could not
> transfer artifact
> org.apache.maven.plugins:maven-dependency-plugin:pom:1.0 from/to nexus
> (http://222.255.27.149:8081/nexus-maven/content/groups/public/):
> Connection refused: no further information to
> http://222.255.27.149:8081/nexus-maven/content/groups/public/org/apache/maven/plugins/maven-dependency-plugin/1.0/maven-dependency-plugin-1.0.pom
> -> [Help 1] [ERROR]  [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch. [ERROR] Re-run Maven using
> the -X switch to enable full debug logging. [ERROR]  [ERROR] For more
> information about the errors and possible solutions, please read the
> following articles: [ERROR] [Help 1]
> http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException 
```

这是我的 setting.xml 文件。

```
<settings>
    <servers>
        <server>
            <id>mjx-snapshot</id>
            <username>deployment</username>
            <password>deployment123</password>
        </server>
        <server>
            <id>vccorp-repository</id>
            <username>editor</username>
            <password>edxmaven</password>
        </server>
    </servers>
    <mirrors>
        <mirror>
            <id>nexus</id>
            <mirrorOf>*</mirrorOf>
            <url>http://192.168.5.149:8081/nexus-maven/content/groups/public/</url>
        </mirror>       
        <mirror>
            <id>public_nuxus</id>
            <mirrorOf>*</mirrorOf>
            <url>http://repository.jboss.org/nexus/content/groups/public-jboss/</url>
        </mirror>
    </mirrors>
    <profiles>
        <profile>
            <id>development</id>
            <repositories>
                <repository>
                    <id>central</id>
                    <url>http://central</url>
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>central</id>
                    <url>http://central</url>
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </pluginRepository>
            </pluginRepositories>
        </profile>
        <profile>
            <!--this profile will allow snapshots to be searched when activated -->
            <id>public-snapshots</id>
            <repositories>
                <repository>
                    <id>public-snapshots</id>
                    <url>http://public-snapshots</url>
                    <releases>
                        <enabled>false</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>public-snapshots</id>
                    <url>http://public-snapshots</url>
                    <releases>
                        <enabled>false</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </pluginRepository>
            </pluginRepositories>
        </profile>
    </profiles>
    <!-- <activeProfiles> <activeProfile>central</activeProfile> </activeProfiles> -->
</settings> 
```

请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:36:46.760

对我来说，它似乎正在尝试查找Maven Central`1.0`中[不可用的](http://central.maven.org/maven2/org/apache/maven/plugins/maven-dependency-plugin/)版本。使用您在粘贴的第一个 POM 片段中所做的版本，它应该没问题。`maven-dependency-plugin``2.4`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:36:38.720

我解决了这个错误。我使用的存储库不可用，因此 Maven 无法下载插件。

# c# - 如何解决 Visual Studio 中的 CA 1009 警告

> ID：11202593
> 
> 赞同：3
> 
> 时间：2012-06-26T07:29:31.733
> 
> 标签：c#, visual-studio-2010, code-analysis, .net-assembly

我有一些 C# 代码从某个路径加载程序集，如下所示：

`assembly = System.Reflection.Assembly.LoadFrom(assemblyPath);`

当我编译时，Visual Studio Code Analysis 会抛出这个[警告](http://msdn.microsoft.com/en-us/library/bb385973.aspx)：

`warning : CA2001 : Microsoft.Reliability : Remove the call to Assembly.LoadFrom ...`

我正在寻找一种解决此警告的方法（不抑制它）。有没有替代方案可以`LoadFrom`为我做到这一点（我知道`LoadFile` [不是](http://msdn.microsoft.com/en-us/library/bb385973.aspx)）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:26:29.980

这在实践中是一样的，但避免了 CA 警告：

```
assembly = Assembly.Load(new AssemblyName { CodeBase = fileToLoadFullName }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T07:36:22.743

如果您的代码*可以正常工作*并且*符合您的预期*，则否决警告。警告是为了让你注意可能有极端情况的事情。如果您已阅读*有关*CA 1009 的内容，并且了解其中的注意事项，那么：继续。

对于从特定路径加载，`LoadFrom`可能是正确的调用。完全消除它的唯一方法是：

*   删除从特定路径加载的要求
*   使用`AppDomain`具有不同探测路径的自定义，并用于`MarshalByRefObject`在它们之间聊天

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T07:36:15.547

根据您要实现的目标，您*可能*可以使用`Assembly.Load`. 这样，您的程序集可以位于 GAC 或本地 bin 目录中。

```
var sampleAssembly = Assembly.Load("SampleAssembly, Version=1.0.2004.0, Culture=neutral, PublicKeyToken=8744b20f8da049e3"); 
```

# winforms - 在vc++中以隐藏模式打开exe

> ID：11202598
> 
> 赞同：0
> 
> 时间：2012-06-26T07:29:43.387
> 
> 标签：winforms, visual-studio-2010, visual-c++, exe

我想在 VS2010 中使用 vc++ 以隐藏模式运行 .exe 文件。

我试过这段代码

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {

                 Process^ p = Process::Start("Ai.exe");

                 IntPtr calculatorWindowHandle = p->MainWindowHandle;
                 void *calculatorWindowHandle1 = calculatorWindowHandle.ToPointer();
               HWND pHandle = reinterpret_cast<HWND>(calculatorWindowHandle1);

                 ShowWindow(pHandle, SW_HIDE);                  
             } 
```

但它正在打开EXE但不是隐藏模式。

谁能告诉我如何做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:47:46.837

如果`Ai.exe`是您自己的应用程序，您可以通过没有任何窗口将其隐藏。将其设为 Windows 应用程序 ( `/SUBSYSTEM:Windows`)，但不要创建任何窗口。

如果`Ai.exe`不是您的应用程序，那么我的问题是 - 您想要实现什么？为什么要隐藏该应用程序？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:58:22.690

是的，我找到了解决方案。

我只需要使用

```
Sleep(60); 
```

后

```
Process^ p = Process::Start("Ai.exe"); 
```

因为启动一个进程需要几毫秒。

# three.js - 重叠时显示立方体？

> ID：11202599
> 
> 赞同：0
> 
> 时间：2012-06-26T07:29:45.797
> 
> 标签：three.js

大家好！
使用three.j 运行动画时出现问题。参见示例： http: [//jsfiddle.net/5ywdE/13/](http://jsfiddle.net/5ywdE/13/)
当绿色立方体旋转到蓝色立方体的位置时，红色立方体将旋转。
问题：为什么显示蓝色立方体，而绿色蓝色在它前面。我希望绿色立方体显示在蓝色立方体前面（就像红色立方体显示在所有前面一样）。如果重叠，我可以设置将显示在其他立方体前面的立方体吗？
我究竟做错了什么？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:13:53.097

所有立方体的`position.z`等于零。那么......必须首先/最后绘制哪个立方体？Three.js 不知道，把它们都画出来，大概按照添加到场景中的顺序。

您可以尝试更改将立方体添加到场景中的顺序：

```
scene.add(obj1);
scene.add(obj);
scene.add(rot); 
```

或者，如果您不打算移动相机，请为蓝色立方体使用不同的 z 值：

```
...
cube1.position.z = -0.1;
... 
```

`visible`或者，当绿色立方体完成动画时，您可以将蓝色立方体的属性设置为 false ：

```
...
run1= false;
three.cube1.visible = false;
... 
```

如果您可以使用`WebGLRenderer`, 而不是`CanvasRenderer`现在所做的那样，您可以使用该`renderDepth`属性为每个立方体指定“深度偏差”。

# matlab - Vedaldi 在 MATLAB 中的 SIFT - sift_compile 中的错误

> ID：11202600
> 
> 赞同：0
> 
> 时间：2012-06-26T07:29:49.863
> 
> 标签：matlab, mex, sift

当我尝试在 MATLAB 中编译 Vedaldi 的 SIFT 算法时，编译时出现以下错误：sift_compile

```
D:\PROGRA~1\MATLAB\R2010A~1\BIN\MEX.PL: Error: 'imsmooth.c' not found. 

??? Error using ==> mex at 222
Unable to complete successfully.

Error in ==> sift_compile at 33
mex('imsmooth.c',opts{:}) ; 
```

我确实让 mex 在其他情况下运行，我使用的编译器是 VS2008。而imsmooth.c等源代码的路径也包含在MATLAB路径中。有人可以给我一些提示，我应该如何让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:56:10.457

C:\Program Files\MATLAB\R2011a\sift\

添加路径名有帮助！

# iphone - 我们如何在 sqlite3 数据库中保存 AudioRecorded 文件（.caf）的数量

> ID：11202603
> 
> 赞同：0
> 
> 时间：2012-06-26T07:30:14.403
> 
> 标签：iphone, objective-c, ios

我正在开发一个应用程序，我想记录用户的声音，我已经在 NSTemporaryDirectory() 中记录了声音，但是在记录联盟之后，我想将记录的 .caf 文件保存在数据库中，并从数据库中检索该文件并播放该文件文件所以帮助我......我就是这样......

```
-(IBAction)recordbutton:(id)sender
{
    if(toggle)
    {

        toggle = NO;
        [btnStart setImage:[UIImage imageNamed:@"stopbtn.png"] forState:UIControlStateNormal];
        label1.text = @"Speak now";

        dotimageview.image = [UIImage imageNamed:@"record_dot.png"];
        timer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(hideLabel:) userInfo:nil repeats:YES];

        btnPlay.enabled = toggle;
        btnPlay.hidden = !toggle;

        //Begin the recording session.
        //Setup the dictionary object with all the recording settings that this 
        //This is a good resource: http://www.totodotnet.net/tag/avaudiorecorder/
        NSMutableDictionary* recordSetting = [[NSMutableDictionary alloc] init];
        [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];
        [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey]; 
        [recordSetting setValue:[NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];

        //Now that we have our settings we are going to instanciate an instance of our recorder instance.
        //Generate a temp file for use by the recording.
        //This sample was one I found online and seems to be a good choice for making a tmp file that
//      recordedTmpFile = [NSURL fileURLWithPath:[NSTemporaryDirectory() stringByAppendingPathComponent: [NSString stringWithFormat: @"%.0f.%@", [NSDate timeIntervalSinceReferenceDate] * 1000.0, @"caf"]]];

        recordedTmpFile = [NSURL fileURLWithPath:[NSHomeDirectory() stringByAppendingPathComponent: [NSString stringWithFormat: @"%.0f.%@", [NSDate timeIntervalSinceReferenceDate] * 1000.0, @"caf"]]];

        NSLog(@"Using File called: %@",recordedTmpFile);

        //Setup the recorder to use this file and record to it.
        recorder = [[ AVAudioRecorder alloc] initWithURL:recordedTmpFile settings:recordSetting error:&error];

        //Use the recorder to start the recording.
        [recorder setDelegate:self];
        [recorder prepareToRecord];

        //Start the actual Recording
        [recorder record];
        //There is an optional method for doing the recording for a limited time see 
        //[recorder recordForDuration:(NSTimeInterval) 29];

    }
    else
    {
        toggle = YES;
        label1.text = @"";
        btnPlay.enabled = toggle;
        btnPlay.hidden = !toggle;

        // stop the timer
        [timer invalidate];
        timer = nil;
        dotimageview.hidden = YES;
        label1.text = @"Listen";
        self.navigationItem.rightBarButtonItem.enabled = YES;

        NSLog(@"Using File called: %@",recordedTmpFile);
        NSString *soundFile = [NSString stringWithFormat:@"%@",recordedTmpFile];
        NSLog(@"str === %@",soundFile);

        //Stop the recorder.
        [recorder stop];

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:16:57.753

考虑将文件从临时文件夹移动到用户文档区域，并仅将文件名存储在 SQLite 中。SQLite 并非设计为二进制 blob 存储。在 SQLite 中存储大型二进制文件时，您将避免任何内存使用问题。

# c# - 在asp.net c#中删除桌面文件

> ID：11202605
> 
> 赞同：0
> 
> 时间：2012-06-26T07:30:15.430
> 
> 标签：c#, asp.net, file-io

我想要一个解决方案，我想使用 asp.net c# 删除驻留在我桌面上的文件，我使用了以下代码：

```
try 
{
    FileInfo TheFile = new FileInfo(MapPath(".") + "\\" + FileNameTextBox.Text);

    if (TheFile.Exists)
    {
        File.Delete(MapPath(".") + "\\" + FileNameTextBox.Text);
    }
    else
    {
        throw new FileNotFoundException();
    }
}
catch (FileNotFoundException ex)
{
    lblStatus.Text += ex.Message;
}
catch (Exception ex)
{
    lblStatus.Text += ex.Message;
} 
```

但它总是说找不到文件位置，请帮助我提前谢谢`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T07:34:52.513

如果您尝试使用 asp .net 页面删除用户的桌面文件，则无法执行此操作。代码在服务器端执行，路径将访问托管应用程序的服务器桌面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:34:15.017

我会尝试这样做：

```
 string desktopPath = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
    File.Delete(Path.Combine(desktopPath, "filetobedeleted")); 
```

# php - 具有权限结构的 PHP 网站

> ID：11202607
> 
> 赞同：2
> 
> 时间：2012-06-26T07:30:19.203
> 
> 标签：php, mysql, html, privileges

我正在使用 PHP 创建一个 Intranet。不同的用户（管理员、用户等）会有不同的权限。我计划在 MySql 中只使用 PHP 和一个具有不同表的数据库。

我想知道哪种方式是编写 Intranet 代码的最简单和“最适合”的解决方案，以将“用户”与“管理员”分开。

是否使用一个“index.php”，然后使用 if/else 方法根据权限显示内容？像这样：

```
if ($priv == 'admin')
  display content for admin

else if ($priv == 'user')
  display content for user 
```

或者我应该为不同的权限设置不同的文件，例如，使用一个文件首先检查权限，然后根据它的权限打开另一个页面：

```
If "admin"
    OPEN index_admin.php
else if "user"
    OPEN index_user.php 
```

只是需要一些关于去这里的方向的建议。

Intranet 将相当简单，具有时间报告/时间跟踪功能，供企业员工报告他们的时间。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:37:57.573

您已经掌握了所需内容的基本要点，但我建议您使用自处理页面。如果你沿着重定向路线走，人们可以在他们的浏览器中访问比如 index_admin.php。

我假设您为此使用登录系统 - 如果是这样，只需设置一个 SQL 表，并为管理员设置一个布尔值。那么我们可以这样做；

```
$sql = SELECT admin FROM users WHERE username = '{$user}';
$admin = mysqli_query($sql);

if ($admin == 1)
{
    // load the admin page
}

else
{
    // load the normal user page
} 
```

您可以通过将他们的管理员状态存储在 Session 中来提高效率，以避免不断的 SQL 查询。

希望这可以帮助。

*   伊根

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:39:00.633

查看会话并在每个页面的顶部都有这个

```
<?php session_start(); ?> 
```

在您的情况下处理会话变量

```
<?php if ($_SESSION['priv'] == $something) {
//Do stuff HERE
} else {
//And So Fourth
?> 
```

# iphone - 当用户在基于视图的应用程序中启动 UILocalNotification 时打开特定的视图控制器

> ID：11202610
> 
> 赞同：0
> 
> 时间：2012-06-26T07:30:21.400
> 
> 标签：iphone, objective-c, uilocalnotification

我正在使用 UILocalNotification。这里当我启动通知时，我需要在应用程序中使用特定视图。但我尝试过如下编码。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.
     [[UIApplication sharedApplication]setStatusBarHidden:NO];

    SplashView *mySplash = [[SplashView alloc] initWithImage:
                            [UIImage imageNamed:@"Splash.png"]];

    [window insertSubview:mySplash atIndex:1];

    [window makeKeyAndVisible];

    mySplash.delay = 5;
    mySplash.animation = SplashViewAnimationFade;
    [mySplash startSplash];
        [self.window insertSubview:viewController.view atIndex:0];
        [self.window makeKeyAndVisible];
        [mySplash release];

    // Add the view controller's view to the window and display.    [self.window addSubview:viewController.view];

    UILocalNotification *localNotification = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];

    if (localNotification) 
    {
        NSLog(@"Notification Body: %@",localNotification.alertBody);
        NSLog(@"%@", localNotification.userInfo);
    }
    [[UIApplication sharedApplication] cancelAllLocalNotifications];

    application.applicationIconBadgeNumber = 0;
    return YES;

}

- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {

UIApplicationState state = [application applicationState];
    if (state == UIApplicationStateInactive) {

showItemContrller = [[Showitem alloc] initWithNibName:@"Showitem" bundle:nil];
        [self.window addSubview:showItemContrller.view];
        [self.window bringSubviewToFront:showItemContrller.view];

}

} 
```

但是当我启动通知时，它会在几秒钟内显示上一个视图，它将显示ItemControllerView。

感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:43:25.623

```
 //comment this line.... 

//[self.window insertSubview:viewController.view atIndex:0]; 
```

# c# - 在c#中发送邮件时如何将文本框与图像结合起来？

> ID：11202613
> 
> 赞同：0
> 
> 时间：2012-06-26T07:30:29.613
> 
> 标签：c#, visual-studio-2010, email, signature

我想发送带有大小、字体、位置等文本的邮件，但也想包括签名，当然是图像。所以我尝试使用这段代码

```
 string htmlBody = "<html><body><h1>This is simple text.</h1><br><img src=\"cid:Pic1\"></body></html>";
    AlternateView avHtml = AlternateView.CreateAlternateViewFromString(htmlBody, null, MediaTypeNames.Text.Html);

    // Create a LinkedResource object for each embedded image
            LinkedResource pic1 = new LinkedResource("C:\\Users\\Admin\\Pictures\\a.jpg", MediaTypeNames.Image.Jpeg);
            pic1.ContentId = "Pic1";
            avHtml.LinkedResources.Add(pic1);

            mail.AlternateViews.Add(avHtml);

            mail.IsBodyHtml = true; 
```

但它只适用于简单的文本。

**如何发送从文本框中获取文本或从 word 中粘贴文本并包含签名的邮件？**

# php - 如何将两个列值相乘并在每行的末尾显示其结果？

> ID：11202617
> 
> 赞同：0
> 
> 时间：2012-06-26T07:30:56.297
> 
> 标签：php, mysql, html-table, rows, multiplication

[http://www.koolfree.com/ImageUpload/uploads/1340729929.jpg](http://www.koolfree.com/ImageUpload/uploads/1340729929.jpg)（表格图片）

您好，我已经链接到一张图片（因为 stackoverflow 不允许我上传，因为声誉低于 10），您可以在其中看到一个包含 9 列和 3 行的表格，并且该表格已连接到数据库和所有表中的值存储在数据库中。

如您所见，有一个总计的最后一列，我想在其中逐行显示天数和工资值的乘法结果。

**例如**

**user456**工作了**30**天，他的薪水是**100**，所以它应该将**30**乘以**100**并生成结果，即**3000**，结果应该显示在 Total **<>amount**的最后一列中。

相似地，

**user123**工作了**30**天，他的薪水是**250**，所以它应该将**30**乘以**250**并生成结果，即**7500**，结果应该显示在 Total **<>amount**的最后一列中。

我在表中使用了以下代码，并为您提供帮助。

```
<?php
/* 
        VIEW.PHP
        Displays all data from 'accounts' table
*/

        // connect to the database
        include('connect-db.php');

        // get results from database
        $result = mysql_query("SELECT * FROM accounts") 
                or die(mysql_error());  

        // display data in table
        echo "<p><b>View All</b> | <a href='view-paginated.php?page=1'>View Paginated</a></p>";

        echo "<table border='1' cellpadding='10'>";
        echo "<tr> <th>No</th> <th>Name & ID</th> <th>Days</th> <th>OverTime</th> <th>Date</th> <th>Salary</th> <th>Edit</th><th>Delete</th><th>Total</th></tr>";

        // loop through results of database query, displaying them in the table
        while($row = mysql_fetch_array( $result )) {

                // echo out the contents of each row into a table
                echo "<tr>";
                echo '<td>' . $row['id'] . '</td>';
                echo '<td>' . $row['keywords'] . '</td>';
                echo '<td>' . $row['title'] . '</td>';
                echo '<td>' . $row['description'] . '</td>';
                echo '<td>' . $row['date'] . '</td>';
                echo '<td>' . $row['salary'] . '</td>';
                echo '<td><a href="edit.php?id=' . $row['id'] . '">Edit</a></td>';
                echo '<td><a href="delete.php?id=' . $row['id'] . '">Delete</a></td>';
                echo '<td><>amount</a></td>';
                echo "</tr>"; 

        } 

        // close table>
        echo "</table>";

?> 
```

请告诉我应该对代码进行哪些添加或更改以生成必要的结果？

* * *

[http://www.koolfree.com/ImageUpload/uploads/1341093148.jpg](http://www.koolfree.com/ImageUpload/uploads/1341093148.jpg)

我附上了截图的链接。请查看屏幕截图并告诉我如何为每个用户 ID 添加多个作业？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:05:57.660

你有没有试过这个：

```
...
            echo '<td>' . $row['salary'] . '</td>';
            echo '<td><a href="edit.php?id=' . $row['id'] . '">Edit</a></td>';
            echo '<td><a href="delete.php?id=' . $row['id'] . '">Delete</a></td>';
            echo '<td>' . $row['title']*$row['salary'] . '</td>';
            echo "</tr>"; 
... 
```

要在一列中添加所有行的总数，您需要使用一个变量，该变量在每次 while 循环通过时递增：

```
 // Declare variable for the place where the value
    // of all the elements of the column are stored
    $Total_total=0;
    // loop through results of database query, displaying them in the table
    while($row = mysql_fetch_array( $result )) {
    ...
            echo '<td>' . $row['title']*$row['salary'] . '</td>';
            echo "</tr>"; 
            //Increment the value of the Total_total variable
            //by the salary value of one row till the while loop finishes
            $Total_total=$Total_total+$row['title']*$row['salary'];
    }

    // After the while loop add one more row where the "total's" will be shown

    echo "<tr>";
    echo '<td>' . Id column totals . '</td>';
    echo '<td>' . Totals . '</td>';
    echo '<td>' . Totals . '</td>';
    echo '<td>' . Totals . '</td>';
    echo '<td>' . Totals . '</td>';
    echo '<td>' . Totals . '</td>';
    echo '<td>' . Totals . '</td>';
    echo '<td>' . Totals . '</td>';
    echo '<td>' . $Total_total . '</td>';
    echo "</tr>"; 

// Do the same for all the other columns where a total count is needed.
// 1) Declare variable ("$Total_total=0;")
// 2) Increment it each time with itself and something you
// need the totals for when while loop goes through one time 
//  ("$Total_total=$Total_total+$row['salary'];")
// 3) Print out the results after the while loop
//  ("echo '<td>' . $Total_total . '</td>';") 
```

# iphone - 当我们单击表格视图单元格中的按钮时，如何检索该特定单元格标签中的文本

> ID：11202618
> 
> 赞同：3
> 
> 时间：2012-06-26T07:30:57.243
> 
> 标签：iphone

我是 iphone 新手。我有一个小疑问（即），我创建了一个表格视图，其中我将所有书名和下载选项放在每个单元格中的该特定书，如下所示

```
Genesis    Download
Exodus     Download
Leviticus  Download 
```

这是上面的Genesis，Exodus，Leviticus是书名，下载是下载这本书的按钮，我在表格视图中有66本不同的书。我的问题是当我们点击下载按钮时，我想获得相应的书名表格视图单元格。我的代码如下

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return 66;

}

- (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"Cell";
        UIButton *downloadButton = nil;
//this is the custom cell i have created one class for this in that i am place the string titlelabel.
        CustomCell *cell = [_tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil) 
        {
            cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
             downloadButton = [UIButton buttonWithType:UIButtonTypeCustom];
            downloadButton.frame = CGRectMake(220,10,50,30);
            [downloadButton setImage:[UIImage imageNamed:@"download.png"] forState:UIControlStateNormal];
            [downloadButton addTarget:self action:@selector(downloadButtonClicked:) forControlEvents:UIControlEventTouchUpInside];
            downloadButton.backgroundColor = [UIColor clearColor];
            downloadButton.userInteractionEnabled = YES;
            downloadButton.highlighted = YES;
            [cell.contentView addSubview:downloadButton];
      }    
        NSString *titleLabel = [[appDelegate getBookNames]objectAtIndex:indexPath.row];
        cell.TitleLabel.text = titleLabel;

        return cell;
    }

    -(void)downloadButtonClicked:(id)sender{

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:35:30.747

在按钮操作中，您可以通过访问 superView 来获取单元格

```
-(void)downloadButtonClicked:(id)sender{
    UIButton *button = (UIButton*)sender;
    UIView *view = button.superview; //Cell contentView
    UITableViewCell *cell = (UITableViewCell *)view.superview;
    cell.textLabel.text; //Cell Text
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:36:01.670

```
first set the tag of your label say it is 100.

//in the button click method...

UITableViewCell *cell = (UITableViewCell *)[[button superview] superview];

UILabel *lbl = (UILabel *)[cell viewWithTag:100];//this is for custom label 

NSLog(@"label text =%@",lbl.text);

else  NSLog(@"label text =%@",cell.titleLabel.text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:39:51.557

当您点击表格视图单元格时，将调用 Delegate 函数，它会为您提供索引路径部分和行值。当您将按钮放在表格单元格上时，只需将标签 - indexpath.row 分配给按钮标签。在调用按钮函数时找到这个标签，并找到数组索引以获取数组上该索引的值。

# android - 如何保存和加载混合数据类型？

> ID：11202619
> 
> 赞同：0
> 
> 时间：2012-06-26T07:31:00.227
> 
> 标签：android, save

我有几十条数据需要在应用程序启动时保存和加载。它们是 int、String、long 和数组数据类型。我很困惑，似乎有很多方法可以做到这一点。似乎每个变体都有不同的方法。一些数据在应用程序运行时被修改。可以说我有以下

```
 int WifiOn="1";
  private long Lasttime="00/00/00";
  private String UserId="12345678";
  private String URLResource[]= {"A","B","C");
  //I open file...
  FileOutputStream fos = openFileOutput("userPref.dat", Context.MODE_PRIVATE); 
```

接下来我该如何处理我的四种数据类型以将它们保存到内部存储中？那么加载它们的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:33:11.733

id 数据有限则可以使用`shared preference`，如果数据多可以使用 `SQLite database`

```
 dozen pieces of data 
```

最好使用简单高效的 SQLite 数据库，也可以满足您的需要

请参阅[链接](http://www.vogella.com/articles/AndroidSQLite/article.html)以了解如何使用它

根据[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

您的数据存储选项如下：

*   共享偏好

将私有原始数据存储在键值对中。

*   内部存储器

将私有数据存储在设备内存中。

*   外置储存

将公共数据存储在共享的外部存储上。

*   SQLite 数据库

将结构化数据存储在私有数据库中。

*   网络连接

使用您自己的网络服务器将数据存储在网络上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:48:27.057

除了`SharedPreference`s 和`SQLite databases`Dheeresh Singh 提到的之外，您还可以使用[`Serialization`](http://java.sun.com/developer/technicalArticles/Programming/serialization/)，因为您只使用简单的数据类型。

如何通过序列化将数据写入文件：

```
//create an ObjectOutputStream around your (file) OutputStream
ObjectOutputStream oos = new ObjectOutputStream(fos);
//The OOS has methods like writeFloat(), writeInt() etc.
oos.writeInt(myInt);
oos.writeInt(myOtherInt);
//You can also write objects that implements Serializable:
oos.writeObject(myIntArray);
//Finally close the stream:
oos.flush();
oos.close(); 
```

如何通过序列化从文件中读取数据：

```
//Create an ObjectInputStream around your (file) InputStream
ObjectInputStream ois = new ObjectInputStream(fis);
//This stream has read-methods corresponding to the write-methods in the OOS, the objects are read in the order they were written:
myInt = ois.readInt();
myOtherInt = ois.readInt();
//The readObject() returns an Object, but you know it is the same type that you wrote, so just cast it and ignore any warnings:
myIntArray = (int[]) ois.readObject();
//As always, close the stream:
ois.close(); 
```

附带说明一下，考虑将 In/OutStream 包装在 BufferedInput/OutputStream 中，以挤出一些额外的读/写性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T07:40:28.980

如果所有数据的格式都完全相同，您可能应该使用`JSON`, 在函数中创建对象，然后将它们写入文件。

```
public bool writeToFile(int wifiOn, long lastTime, String userId, String [] urlResources) {
   JSONObject toStore = new JSONObject();
   FileOutputStream fos = openFileOutput("userPref.dat", Context.MODE_PRIVATE);

   toStore.put("wifiOn", wifiOn);
   toStore.put("lastTime", lastTime);
   toStore.put("userId", userId);
   toStore.put("urlResources", urlResources);

   try {
       fos.write(toStore.toString().getBytes());
       fos.close();
       return true;
   } catch (Exception e) {
       e.printStackTrace();
   }
   return false;
} 
```

# javascript - “搜索”字段过滤内容

> ID：11202620
> 
> 赞同：2
> 
> 时间：2012-06-26T07:31:03.643
> 
> 标签：javascript, jquery

我正在尝试创建一个简单的“搜索字段”，它的作用是搜索输入的文本是否等于内容中框的任何数据属性，如果是，则隐藏所有内容，但找到的内容类似（这不工作）：

CSS：

```
.filter-div {
    display: none;
} 
```

html:

```
 <label for="search">Search Input:</label>
    <input type="search" name="filter" id="search" value="" />
    <div class="filter-div" data-filter="one">one</div>
    <div class="filter-div" data-filter="two">two</div>
    <div class="filter-div" data-filter="three">three</div>
    <div class="filter-div" data-filter="four">four</div>
    <div class="filter-div" data-filter="five">five</div> 
```

jQuery：

```
 // save the default value on page load
    var filter = $('.input').val();

    // on submit, compare
    if ( $('.input').val() = $("data-filter") {
         $(this).show();
    } ​ 
```

我也不确定是否应该通过单击按钮过滤内容，或者找到的内容应该在搜索中作为可点击文本弹出，还是应该全部自动发生？最后可能我将不得不根据多个数据属性检查它。

任何人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:33:53.853

```
$('#search').on('keyup', function() {
    var val = $.trim(this.value);
    if (val) {
        $('div[data-filter=' + val + ']').show();
    } else $('div[data-filter]').hide();
}); 
```

**[工作样本](http://jsfiddle.net/fKFJ5/6/)**

## 根据评论中的演示小提琴示例

```
var divs = $('div[data-filter]');
$('#search').on('keyup', function() {
    var val = $.trim(this.value);
    divs.hide();
    divs.filter(function() {
        return $(this).data('filter').search(val) >= 0
    }).show();
});

divs.on('click', function() {
    divs.not(this).hide();
    var text = $.trim($(this).text());
    $('#search').val(text);
}); 
```

**[工作样本](http://jsfiddle.net/fKFJ5/11/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:44:39.383

JavaScript：

```
var filter_div = $('[data-filter]');
$('#search').keyup(function(){
    var val = $.trim(this.value);
    filter_div.hide();
    if(val.length == 0) return;
    filter_div.filter(function(){            
        return $(this).data('filter').indexOf(val)>-1
    }).show();

}); 
```

小提琴：http: [//jsfiddle.net/iambriansreed/xMwS5/](http://jsfiddle.net/iambriansreed/xMwS5/)

​</p>

# google-app-engine - 如何使用批量上传器减小索引大小？

> ID：11202622
> 
> 赞同：1
> 
> 时间：2012-06-26T07:31:14.287
> 
> 标签：google-app-engine

在 App Engine 中使用 bulkloader，内置索引太大（257 个实体的 6662 个索引），尽管属性没有被索引，如下所述。另外，我没有将属性从索引更改为未索引，

有没有办法减少索引大小？

```
<kind>
----
class Content(db.Model):
    index       = db.StringProperty()
    path        = db.StringProperty(indexed=False)
    law         = db.StringProperty(indexed=False)
    appno       = db.StringProperty(indexed=False)
    page        = db.IntegerProperty(indexed=False) 
    applicant   = db.StringProperty(multiline=True,indexed=False)
    title       = db.StringProperty(indexed=False)
    ipc         = db.StringProperty(multiline=True,indexed=False)
    division    = db.StringProperty(indexed=False)
    examination = db.StringProperty(indexed=False)
    date        = db.DateTimeProperty(auto_now_add=True,indexed=False)
----
<bulkloader.yaml>
transformers:
- kind: Content
  connector: csv
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string

    - property: index 
      external_name: index 
      # Type: String Stats: 12 properties of this type in this kind.

    - property: path 
      external_name: path 
      # Type: String Stats: 12 properties of this type in this kind.
      .....
    - property: date
      external_name: date
      # Type: Date/Time Stats: 12 properties of this type in this kind.
      import_transform: transform.import_date_time('%Y-%m-%dT%H:%M:%S')
      export_transform: transform.export_date_time('%Y-%m-%dT%H:%M:%S')

 ----
 <Command>
 /appcfg.py upload_data --config_file=bulkloader.yaml --filename=foo.csv --kind=Content --url=​http://bar.appspot.com/_ah/remote_api

 ---- 
```

# trac - 将 trac 用于非软件项目

> ID：11202623
> 
> 赞同：0
> 
> 时间：2012-06-26T07:31:18.017
> 
> 标签：trac, time-tracking

我正在我的公司引入一个新的项目管理软件，并研究可能的开源软件。由于我熟悉 python，trac 将是我的首选。但看起来它主要用于软件项目，而我的公司并非如此。

此外，时间跟踪是一个大问题。我们有多个开发人员，每个人都应该能够跟踪他们在他从事的项目上的时间。这个时间应该在每个月底导出到 csv （虽然我认为我也可以直接从数据库导出）

那么有人在非软件项目中使用过 trac 吗？如果她能从你那里获得一些经验，那就太好了，为我节省了很多时间；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:28:55.097

我们目前为我们的 IT 团队使用 Trac。它使我们能够跟踪诸如帮助台票、服务器项目和网站更改之类的事情。我们已经这样做了一年多了，而且效果很好。它甚至开始扩展到其他团队来管理团队任务！

至于从 Trac 中提取小时数等，我们使用自定义字段，然后通过报告模块（现已弃用）提取数据并直接访问数据库。过去我们使用过诸如此类的插件。

*   [http://trac-hacks.org/wiki/TimingAndEstimationPlugin](http://trac-hacks.org/wiki/TimingAndEstimationPlugin)
*   [http://trac-hacks.org/wiki/TracHoursPlugin](http://trac-hacks.org/wiki/TracHoursPlugin)

我们还将 Trac 绑定到 AD 以进行身份​​验证，这允许 Trac 和我们的域使用单个共享密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:55:25.543

值得一提的是，我设置了几个与软件开发完全无关的 Trac 实例。Trac 作为我迄今为止遇到的任何东西的入门门槛都很低的平台。我们有各种各样的应用程序在运行，尤其是对*任何事情的 wikify*态度非常好 - 工单中的 wiki 标记、跨模块的一致链接语法（变更集评论、工单、wiki 页面）等。我可以确认病毒效应，即一个完善的 Trac 应用程序。

Trac 它在初始设置时非常纤薄，但采用大米和模块化设计，以满足不断增长的需求。对于时间跟踪之类的事情，您也可以使用Josh 之前提到的[TimingAndEstimationPlugin之类的解决方案。](http://trac-hacks.org/wiki/TimingAndEstimationPlugin)一般来说， [trac-hacks.org](https://trac-hacks.org)是一个拥挤的空间，不太容易选择你想要的东西，但无论如何都是一个有价值的资源。

如果遇到一些挑战，请务必在 irc.freenode.net 上的 trac-users[邮件列表和 IRC 频道 #trac 询问。](http://trac.edgewall.org/wiki/MailingList)这是一个小型的开发者社区，但却是一个友好的社区，如果有一些 Python 经验，您一定会找到自己的方式。trac.edgewall.org 上的源代码和 wiki 文档始终是您的朋友。

# iphone - iphone，将带有“renderInContext”的图像保存到设备时，图像模糊？

> ID：11202628
> 
> 赞同：8
> 
> 时间：2012-06-26T07:31:55.510
> 
> 标签：iphone, save, photolibrary, blurry

我正在使用此代码从视图中渲染图像。然后我将它保存到相册。图像模糊？为什么？有解决办法吗？

```
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

Tnx 全部。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-26T07:37:41.667

您可能正在使用视网膜设备，请更改以下内容

```
UIGraphicsBeginImageContext(self.view.bounds.size) 
```

到

```
UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, self.view.opaque, 0.0); 
```

# jquery - 在 jQuery 模态面板中显示长流程的当前步骤

> ID：11202629
> 
> 赞同：0
> 
> 时间：2012-06-26T07:32:00.820
> 
> 标签：jquery, jquery-plugins

在我的应用程序中，有一个页面，用户可以在其中生成 Excel 报告。这一代可能会比较长（从10秒到5分钟）。目前，当用户单击*Generate*按钮时，会出现一个带有加载图标（等待弹出窗口）的[jQuery 模式面板。](http://jqueryui.com/demos/dialog/#modal)

现在，我想提供 Excel 生成当前步骤的图形指示。例如，一旦用户点击了按钮，显示的模式面板将是：

```
+-------------------------------------+
|         ... Please wait ...         |
+-------------------------------------+
|  We are preparing your Excel file.  |
|                                     |
|  >> Finding unicorns in Database.   |
|  2\. Reading "Database for dummies"  |
|  3\. Downloading the Internet...     |
|  4\. Write fake data in Excel file.  |
+-------------------------------------+ 
```

然后，几秒钟后，模态面板将如下所示：

```
+-------------------------------------+
|         ... Please wait ...         |
+-------------------------------------+
|  We are preparing your Excel file.  |
|                                     |
|  1\. Finding unicorns in Database.   |
|  >> Reading "Database for dummies"  |
|  3\. Downloading the Internet...     |
|  4\. Write fake data in Excel file.  |
+-------------------------------------+ 
```

依此类推，直到 Excel 可供用户使用。

我的想法是通过 Ajax 请求定期轮询服务器。然后，服务器将返回一个 JSon 对象，其中包含步骤列表（使其有点通用）和处于活动状态的那个。然后，我将解析这个对象并显示/刷新步骤列表。

我在这里没有看到技术问题，因为 jQuery 提供了所有的元素来做到这一点。但也许已经有一个 jQuery 插件可以满足这种要求。你认识一个吗？

如果我必须开发它，您有什么建议（要避免的错误等）吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:04:54.877

你真的不需要插件，因为它非常简单。上周我做了一个类似的功能，您唯一需要做的就是在生成文件并从客户端向服务器发送连续请求以更新状态时，将要发送给客户端的数据保存在数据库中。您可以每秒发送一个请求，我只是等待从服务器获得响应，然后如果它没有完成，我会一次又一次地调用请求发送函数。

编辑：我会避免将生成状态消息存储在会话中，因为如果我没记错的话，会话在 http 请求期间被锁定，并且如果您还想在等待生成时发送其他请求，您将无法访问会议。

# css - 光标位置没有出现在文本输入中？

> ID：11202633
> 
> 赞同：0
> 
> 时间：2012-06-26T07:32:17.087
> 
> 标签：css, asp.net-mvc-3

在我的 asp.net MVC 应用程序中，我使用 HTML 文本输入，同时我应用样式来格式化 currecy 值，并且我希望它右对齐以便我也应用样式。

但是光标没有出现在文本框中？可能的原因是什么，请提供解决方案？

**HTML**

```
<input type="text" class="OnlyMoney" /> 
```

**脚本**

```
$(document).ready(function () {
       $("input[type=text].OnlyMoney").live('keydown', currenciesOnly)
           .live('blur',
           function() { $(this).formatCurrency(); });

   }); 
```

**CSS**

```
.OnlyMoney { text-align: right; } 
```

**注意：**如果我更改上述样式“文本对齐：左”，则光标在文本框中可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:11:37.123

我遇到了类似的问题并添加`padding`解决了我的问题。只需为您的班级提供一些填充权`.OnlyMoney`并检查

**CSS：**

```
 .OnlyMoney { text-align: right; padding: 0 2px 0 0; } 
```

# objective-c - 如何在 iOS 中不使用图像创建动画启动画面

> ID：11202635
> 
> 赞同：1
> 
> 时间：2012-06-26T07:32:25.803
> 
> 标签：objective-c, ios, ios5, core-animation

我想知道应该如何构建动画启动画面。我已经用图像制作了动画闪屏，但在这里我想添加自定义动画，比如在屏幕上绘制的东西等。任何人都可以指导我完成这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:36:54.257

只是你需要展示一个`UIViewController`它来保存你的动画并在你的应用程序准备好启动时关闭它。但我也认为最好跟随苹果[HIG](https://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW5) .. 正如苹果描述的那样，你应该

> 提供启动图像以改善用户体验。
> 
> 避免使用您的启动图像作为提供以下内容的机会：
> 
> “应用程序入口体验”，例如初始屏幕 关于窗口 品牌元素，除非它们是应用程序第一个屏幕的静态部分 因为用户可能经常在应用程序之间切换，所以您应该尽一切努力将启动时间缩短到最低限度，并且您应该设计一个淡化体验而不是引起人们注意的启动图像。
> 
> 通常，设计一个与应用程序的第一个屏幕相同的启动图像。
> 
> 例外：
> 
> 文本。启动图像是静态的，因此您在其中显示的任何文本都不会被本地化。
> 
> 可能会改变的 UI 元素。避免包含在应用程序完成启动时可能看起来不同的元素，以便用户不会在启动图像和第一个应用程序屏幕之间体验到闪光。

# c# - 如何在 asp.net mvc3 中使用 Nhibernate 进行更有效的查询

> ID：11202638
> 
> 赞同：0
> 
> 时间：2012-06-26T07:33:01.880
> 
> 标签：c#, sql, database, asp.net-mvc

我在数据库的联系人表中有大约 100 万条记录，现在我只需要获取 30 条记录。如何使以下查询更有效：

**获取联系人方法**

```
 private IQueryable<Contact> GetContacts()
    {

        return this.Query().Where(c => c.ActiveEmployer== true); // here ' this ' is the current service context 
    } 
```

**刚接触**

```
 var contactlist = GetContacts(); // this will get all records from db 
 var finalcontacts = contactlist.Skip(0).Take(30).Fetch(c.Roles).Fetch(c.SalaryInfo).ThenFetch(c.Employer); 
```

但是这个查询有时需要将近 10 秒或更长时间，并且将来我可以拥有 30 到 4000 万个联系人，那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:54:06.730

可能有些人可以在不需要更多信息的情况下对该查询提出一个很好的解决方案来帮助您，但是对于该查询和所​​有其他查询，您可能可以通过查看 NHibernate 创建的查询获得更多洞察力. 如果您在启用 Log4Net（可能还有 NLog）输出 NH 生成的 SQL 语句之前没有这样做，或者您可以分析 SQL Server 中的 SQL 连接。然后，您可以自己运行该 SQL 并选择显示查询计划。这将准确地告诉您查询正在做什么，并且您可以自己解决问题。它可能缺少索引、原始 WHERE 或一个或所有后续 FETCH 语句。另一个问题是，你是否手工制作了一个 SQL 语句来做类似的事情，这需要多长时间？

# iphone - XCode 错误“二进制表达式的无效操作数”

> ID：11202639
> 
> 赞同：8
> 
> 时间：2012-06-26T07:33:03.540
> 
> 标签：iphone, ios5, xcode4.3

我有一个存储为双精度的 NSTimeInterval。我想使用 % 运算符获取第二个值内的分钟数。

```
int remainingSeconds = scratch % 60; 
```

错误说“二进制表达式的无效操作数”指向 % Help。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-26T07:39:40.400

模数用于整数，因此要使您的代码正常工作，请执行以下操作

```
int remainingSeconds = (int)scratch % 60; 
```

要在浮点数上使用模数，请使用 fmod

```
int remainingSeconds = fmod(scratch, 60); 
```

在此处查看答案[如何在objective-c / cocoa touch中进行模运算？](https://stackoverflow.com/questions/1271102/how-to-make-a-modulo-operation-in-objective-c-cocoa-touch)

# language-features - 哪些语言特性对快速原型设计有用？

> ID：11202640
> 
> 赞同：1
> 
> 时间：2012-06-26T07:33:07.767
> 
> 标签：language-features, prototyping

在开始实际代码之前，哪些语言功能可用于项目的快速原型设计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:51:06.410

我建议研究模型驱动的工程。一些工具为您提供从高级（图形）模型中快速一键式原型设计。例如，[WebRatio](http://www.webratio.com)让您可以设计业务流程或用户界面模型，并为您生成一个正在运行的 Web 应用程序。它基于 BPMN 和[WebML](http://www.webml.org)图形符号。

[免责声明：我与 Politecnico di Milano 和 WebRatio 合作，也是 WebML 的发明者之一]

# iphone - 从 iphone 版本创建 ipad 版本？

> ID：11202644
> 
> 赞同：0
> 
> 时间：2012-06-26T07:33:27.770
> 
> 标签：iphone, objective-c, ipad

我开发了一个 iPhone 应用程序。我想制作与 iPad 相同的应用程序版本。您需要更改 iPhone 的版本吗？iPad版本需要什么？我只是更改我的 UI 设计还是代码中的任何地方必须更改？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:44:47.243

您需要更改摘要中的设备（项目导航器中的项目 -> 目标下的应用程序 -> 摘要 -> 设备 -> iPad/iPhone/Universal）。您可以使用此代码检查应用程序在哪个设备上运行。然后，您可以加载不同的 xib 文件并针对特定设备调整视图。

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
{
    viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
} else
{
   viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:01:44.793

选择目标并进一步进入捆绑设置

转到部署选项卡，然后在“目标设备系列”中选择“iPad”

然后将所有 Xib 转换为 ipad 分辨率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:40:14.937

在项目导航器中选择你的项目文件，然后选择你的目标 -> 摘要 -> iOS 应用程序目标 -> 确保它是 iPad 可卡的。然后就只剩下设计了...

# android - 安卓地图不显示

> ID：11202645
> 
> 赞同：-1
> 
> 时间：2012-06-26T07:33:32.787
> 
> 标签：android, google-maps

我想在 Android 中显示谷歌地图，我有地图 API，即使地图没有显示，也没有抛出任何错误。我使用了以下 **Java 代码**

```
public class GoogleMapActivity extends MapActivity {
    private Location myLocation;
    protected MapView myMapView = null;
    protected LocationManager myLocationManager = null;
    protected MapController mapController;
    List<Overlay> mapOverlays;

    protected boolean isRouteDisplayed() {
        return false;
    }

    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        this.myMapView = new MapView(this, "0jzIB6m5R1kLa_rGte-DS9PhF3KlSgqYHUZognA");    
        this.setContentView(myMapView);
        myMapView.setBuiltInZoomControls(true);
        myMapView.setSatellite(true);
        mapController = myMapView.getController();
        mapOverlays = myMapView.getOverlays();
        this.myLocation = new Location("gps");
        this.myLocation.setLongitude(77.52436144125092);
        this.myLocation.setLatitude(13.05096452223662);
        updateView();
    }

    private void updateView() {
        Double lat = myLocation.getLatitude();
        Double lng = myLocation.getLongitude();
        GeoPoint point = new GeoPoint(lat.intValue(), lng.intValue());
        mapController.setCenter(point);
    }
} 
```

**显现**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.googlemap"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_GPS" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".GoogleMapActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <uses-library android:name="com.google.android.maps" />
    </application>

</manifest> 
```

最后我得到输出空白。请看下面的屏幕

![图片](../Images/5adc2eab220123f7ab537308d5e2e7d5.png)

请建议我哪里错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:43:13.913

我认为您尚未在当前布局中添加 myMapView ............

你用java代码创建的

```
this.myMapView = new MapView(this,
                "0jzIB6m5R1kLa_rGte-DS9PhF3KlSgqYHUZognA"); 
```

但看起来没有添加到任何布局中..根据[链接](https://stackoverflow.com/questions/3517833/mapactivity-set-apikey-programmatically)

1.  如果您通过其构造函数动态创建 MapView，您可以通过 Java 代码以这种方式提供 API 密钥，但是您需要将其动态添加到您的布局中。
2.  您不能既在布局中拥有小部件，又在 Java 中设置 API 密钥。

解决方案：

*   选项 1 - 为 XML 创建一个线性布局并在其中添加 myMapView。
*   选项 2 - 在自己的 XML 中创建地图视图并通过 findViewById 获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:46:30.163

尝试将 mapview 放置在布局 xml 上，并将其 api 键放在那里，然后在活动上获取地图的引用并正常继续。

带有 mapView 的 main.xml：

```
 <com.google.android.maps.MapView android:id="@+id/mapView"
     android:layout_width="fill_parent" android:layout_height="fill_parent" android:enabled="true"
     android:layout_centerInParent="true" android:clickable="true" android:apiKey="YOUR MAP KEY"/> 
```

活动：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
mapView = (MapView)findViewById(R.id.mapView); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:51:22.580

下面的代码对我来说很好 -

```
public class MapTabView extends MapActivity 
{

    MapView map;

    String api = "02gY92RWvQgV-k5CUQvGPowJkw8HkN4Tmm-HDIQ";

    @Override
    protected void onCreate(Bundle icicle) 
    {
        super.onCreate(icicle);
        map = new MapView(this, api);
        map.setClickable(true);
        map.setEnabled(true);
        setContentView(map);
    }
    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem menu_item)
    {
        switch (menu_item.getItemId()) {
        case R.id.satelite:
            map.setSatellite(true);
            map.setTraffic(false);
            break;

        case R.id.traffic:
            map.setTraffic(true);
            map.setSatellite(false);
            break;

        default:
            break;
        }
        return true;
    }
} 
```

看看这个[TabMapsExample](http://www.ziddu.com/download/19766021/TabMapsExample.zip.html)

# batch-file - =/xyz 喜欢批处理文件的表达式

> ID：11202646
> 
> 赞同：1
> 
> 时间：2012-06-26T07:33:37.403
> 
> 标签：batch-file

```
set batVar_Parameters=/Developer /Test=0

if not '%batVar_Iteration%' equ '-1' (
    set batVar_Parameters=%batVar_Parameters%  /Iteration=%batVar_Iteration%
)

if not '%1' equ '' (
    set batVar_Parameters=%batVar_Parameters%  /DeveloperBuildIniFile=%1
) 
```

我正在将批处理文件转换为 C#，我面对的是上面描述的表达式“=/xyz”。究竟是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:00:47.020

“set abc=/xyz”没有什么特别的意思，只是“=”后面跟着变量的内容，恰好以“/”开头。它可能意味着作为程序的参数，例如在“dir /a”中。

尝试这个：

```
set batVar_Parameters=/Developer /Test=0

echo testing%batVar_Parameters%testing 
```

它会给你：

```
testing/Developer /Test=0testing 
```

# python - 使用 Python 生成演示文稿

> ID：11202648
> 
> 赞同：3
> 
> 时间：2012-06-26T07:33:39.900
> 
> 标签：python, powerpoint, openxml, openoffice-impress

我正在处理数据，并希望通过 Python 直接进行一些数据分析来生成 PowerPoint 或 OpenOffice Impress 演示文稿。是否有任何 Python 库可以做到这一点？我正在使用Unix环境。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-12T15:30:02.833

看起来这开始进展顺利：[https ://github.com/scanny/python-pptx/](https://github.com/scanny/python-pptx/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:36:22.103

是的。

你可以使用`odf`图书馆。

[http://opendocumentfellowship.com/projects/odfpy](http://opendocumentfellowship.com/projects/odfpy)

您将获得的文档将采用 ODF 格式，但您可以稍后使用[unoconv](http://dag.wieers.com/home-made/unoconv/)将其转换为 PPT 。

# javascript - 是否可以在 Chrome/Opera 中暂停 svg 错误

> ID：11202649
> 
> 赞同：1
> 
> 时间：2012-06-26T07:33:46.567
> 
> 标签：javascript, google-chrome, svg, opera

类似于[“暂停异常”的](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#js_exceptions)工作原理，是否可以在创建 svg 元素并在其上设置无效属性时暂停？

这个例子（[在 jsfiddle 上测试](http://jsfiddle.net/mkdRT/1/)）：

```
circle.setAttribute('fill', 'steelblue');
circle.setAttribute('r', 'big'); // A 'big' circle is obviously wrong 
```

将在 chrome 中生成以下错误，但没有映射回生成 svg 的 javascript 调用，因此很难找到错误：

![在此处输入图像描述](../Images/eaef88f65fb008dc08703acce1ebdb45.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T00:29:27.013

这是不可能的，因为 svg 在浏览器中是如何呈现的。想象一下 svg 就像 XML 或 (HTML) 一样。它不像代码行那样在一个步骤过程中执行。它读入快速渲染对象及其属性的渲染引擎。在此渲染期间，必须在引擎内部发生暂停，这将导致各种渲染问题。

参考您的示例，javascript不会对您传递给 setAttribute 值的内容进行任何类型的检查（我的意思是它确实不能因为不同的属性需要不同的类型），而是将该键值对添加到元素对象。（尝试记录圆形对象，之前和之后，你会明白我的意思）。稍后，当您将圈子添加到 DOM 时，它会像我上面所说的那样简单地获取对象并解析它。

基本上这种类型的错误处理在浏览器中永远不会存在，因为您在示例中的代码是正确的并且可以正确执行，但是作为程序员，您需要确保将正确类型的值传递给 setAttribute 方法。所以它不是 javascript 中的错误，这就是为什么你没有在那里得到断点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:34:52.510

您可以创建一个进行类型检查的包装器。阅读[SVG 规范](http://www.w3.org/TR/SVG/)以确定每个元素的属性允许使用哪些值。

# php - php - 数据输入和订单问题

> ID：11202650
> 
> 赞同：-5
> 
> 时间：2012-06-26T07:33:47.300
> 
> 标签：php

我制作的 php 脚本有点麻烦。

[您可以在http://click-media.co.uk/Client/Lisa/Admin/admin.php](http://click-media.co.uk/Client/Lisa/Admin/admin.php)看到所有相关信息（密码：“嘿”）

我基本上需要在创建新类时按天/时间对类进行排序，方法是通过将数据库中的列名更改为时间戳或其他内容，或者创建一个新列并按此排序.. 然后使用php 在管理员单击行旁边的“上移”/“下移”时切换订单值。

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:44:30.010

您可以通过执行以下操作来实现这一点：

*   在数据库中添加一列并调用它`class_order`
*   您的 SQL 查询应该有`ORDER BY class_order`
*   向上移动`UPDATE table set class_order = THE_ORDER_OF_THE_CLASS_ABOVE WHERE id = TARGET_CLASS`和`UPDATE table set class_order = TARGET_CLASS_ORDER WHERE id = THE_CLASS_ABOVE`
*   向下移动与向上移动相反

# jquery - ui jquery 可拖动元素

> ID：11202651
> 
> 赞同：2
> 
> 时间：2012-06-26T07:33:48.780
> 
> 标签：jquery, jquery-ui, jquery-selectors, drag-and-drop, jquery-ui-draggable

我想实现一个动态的方式来创建一个列表拖放，现在只是理论上的，我想拖一个“ul”标签（list2）到一个空的“ul”标签（mysortable），然后我想拖一个这两个“ul”标签内的“list”标签（list3），我希望“list”标签作为嵌套“ul”标签的子级或兄弟级坚持使用内部嵌套的“ul”标签。到目前为止，如果我更改代码“connectToSortable:”div.demo ul.mysortable”，我已经成功地让“list”标签成为内部嵌套“ul”标签的兄弟，但我无法弄清楚这个问题小时候，“list”标签没有粘在嵌套的“ul”标签上，请帮忙，提前谢谢。

html代码代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery UI Draggable + Sortable</title>
    <link rel="stylesheet" href="themes/base/jquery.ui.all.css" />
    <script type="text/javascript" src="jquery-1.7.2.js"></script>
    <script type="text/javascript" src="ui/jquery.ui.core.js"></script>
    <script type="text/javascript" src="ui/jquery.ui.widget.js"></script>
    <script type="text/javascript" src="ui/jquery.ui.mouse.js"></script>
    <script type="text/javascript" src="ui/jquery.ui.draggable.js"></script>
    <script type="text/javascript" src="ui/jquery.ui.droppable.js"></script>
    <script type="text/javascript" src="ui/jquery.ui.sortable.js"></script>
    <link rel="stylesheet" href="../demos.css" />
    <style>
    .demo ul { list-style-type: none; margin: 0; padding: 0; margin-bottom: 10px; margin: 5px; padding: 5px; width: 150px;}
    .demo li { margin: 5px; padding: 5px; width: 150px; }

    .mydemo ul { list-style-type: none; margin: 0; padding: 0; margin-bottom: 10px; margin: 5px; padding: 5px; width: 150px;}
    .mydemo li { margin: 5px; padding: 5px; width: 150px; }

    .background {color:red;}
    </style>
    <script type="text/javascript">
    $(function() {
        $(".sortable").sortable({
        connectWith: ".sortable",   
        });

        $(".mysortable").sortable({
        connectWith: ".mysortable", 
        receive: function (event, ui) {
        var arrList = $(".mysortable li").map(function() { return $(this).attr('type') }).get();
        var arrul = $(".mysortable ul").map(function() { return $(this).attr('type') }).get();
        var checkInsideMysortable = arrList[0];
        var checkInsideMysortable1 = arrList[1];
        var checkInsideMysortableul = arrul[0];
        if (checkInsideMysortableul == 'ulist')
        {
        }
        else if (checkInsideMysortable == 'link')
        {
        if (checkInsideMysortable1 == 'link')
        {
            alert("can't add another element if first element is a link");
            location.reload();
        }
        }
        else
        {
        }   
    }
    });

    $("#list2 ul").draggable({
    connectToSortable: ".mysortable",
    helper: "clone",
    });

    var selector = '.mysortable, .nestedClone';
    $("#list3 li").draggable({
    connectToSortable: "div.demo ul.mysortable ul.nestedClone",
    helper: "clone",
    });

    $( "ul, li" ).disableSelection();
    });

    function listOrder()
    {
    var arr = $(".mysortable li").map(function() { return $(this).attr('type') }).get();
    alert (arr);
    }
    </script>
</head>
<body>
<div id="myTest" class="demo">
    drag links here:
    <ul class="mysortable" style="background-color:yellow;"> </ul>
</div>
<button type="button" onclick="listOrder()">save list order</button>
<div class="mydemo">
<ul id="list2">

<ul id="11" type="ulist" class="nestedClone ui-state-default"><span>ul1</span></ul> 
<ul id="12" type="ulist" class="nestedClone ui-state-default"><span>ul2</span></ul> 
</ul>
</div>

<div class="mydemo">
<ul id="list3">
<li type="link" id="13"  class="ui-state-default">link</li> 
<li id="14" type="link" class="ui-state-default">link</li> 
</ul>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:12:46.740

尝试这个：

在 sortable 的接收事件中，获取要添加的列表项的 id。

例如

```
$('.selector').sortable({
  receive: function(event, ui) { ... }
}); 
```

在接收函数中，执行代码以获取列表项的 ID，然后：

```
$('#listitem').appendTo($('#nestedul')); 
```

这*应该*让你至少开始。

# c# - 在 C# 中设置 SelectList 中的所有值

> ID：11202654
> 
> 赞同：0
> 
> 时间：2012-06-26T07:33:56.920
> 
> 标签：c#, selectlist

在一个`SelectList`对象中，我希望 SelectList 的每个元素的 Text 属性也应该是值。例如：

```
SelectList s=new SelectList(some list);
s.ElementAt(i).Value=s.ElementAt(i).Text; 
```

有没有办法通过使用循环来做到这一点？有没有内置的方法或类似的东西来完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:58:13.827

您可以对 SelectList 使用以下构造函数重载：

```
public SelectList(
    IEnumerable items,
    string dataValueField,
    string dataTextField
) 
```

然后，您可以为 dataValueField 和 dataTextField 提供相同的列表成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:05:27.837

如果您真的想在没有循环的情况下执行此操作，只需使用 linq foreach （这是后台的循环）：

```
s.ToList().ForEach(c=>c.Text = c.Value) 
```

# javascript - 为什么不计算不跟踪这个简单的淘汰赛应用程序的变化？

> ID：11202658
> 
> 赞同：1
> 
> 时间：2012-06-26T07:34:08.283
> 
> 标签：javascript, knockout.js

![图片](../Images/9a9682882064e35f90a1702b955cf49e.png)

菜单是我想要的，当鼠标悬停在左边时，右边应该改变但不会。

这是我的简化视图模型：

```
var currentSelectIndex  = 0;

var AppModel = {
    CurrentIndex: ko.observable(currentSelectedIndex),
    OnMouseOver: function (data, event) {
        // change currentIndex or currentSelectedIndex here
        // CurrentSubCategory didn't updated
    },
    CurrentSubCategory: ko.computed({
        read: function() {
            return AppModel.Menu[AppModel.CurrentIndex()].subcategory;
        },
        deferEvaluation: true
    }),
    Menu: [
    {
        subcategory: [
            { name: '1', id: 50000436 },
            { name: '2', id: 50010402 },
            { name: '3', id: 50010159 }
        ],
    }
}; 
```

还有我的html：

```
<div class="categories" id="categories">
    <div class="first-category" id="first-category">
        <ul data-bind="foreach:Menu">
            <li data-bind="text:name,attr:{id:id,class:className},event{ mouseover: $root.myfunction}"></li>
        </ul>
    </div>
    <div class="sub-category" id="sub-category">
        <ul data-bind="foreach:CurrentSubCategory()">
            <li><a data-bind="text:name,attr:{href:getListUrl(id)}"></a></li>
        </ul>
        <div class="clear">
        </div>
    </div>
    <div class="clear">
    </div>
</div> 
```

抱歉，由于声望低于 10，无法发布图片。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:50:59.887

您的代码中有几个语法错误，我想这是您简化发布的结果。

我在这里发布了一个有效的 jsFiddle：http: [//jsfiddle.net/Gy6Gv/2/](http://jsfiddle.net/Gy6Gv/2/)

我将 Menu 更改为一个可观察的数组只是因为敲除提供了辅助方法 .indexOf 以便更容易地从鼠标悬停获取菜单的索引。除此之外，计算没有问题。我想您的实际代码中还有其他一些语法错误。

# c# - Bitmap.Save 上 GDI+ 的 C# 通用错误

> ID：11202659
> 
> 赞同：0
> 
> 时间：2012-06-26T07:34:13.027
> 
> 标签：c#, .net, image, file, bitmap

```
public void EditAndSave(String fileName) {
    Bitmap b = new Bitmap(fileName);
    /**
    * Edit bitmap b... draw stuff on it...
    **/
    b.Save(fileName); //<---------Error right here
    b.Dispose();
} 
```

我的代码与上面的代码类似。当我尝试保存刚刚打开的文件时，它不起作用。当我尝试用不同的路径保存它时，它工作正常。可能是该文件已在我的程序中打开，因此无法写入？我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:04:22.247

您是正确的，因为它被您的程序锁定，因此您无法写入它。Bitmap 类的 msdn 页面 (http://msdn.microsoft.com/en-us/library/3135s427.aspx) 对此进行了解释。

解决这个问题的一种方法（从我的头顶来看，可能是更简单的方法）是首先将图像缓存在内存流中并从那里加载它，从而能够关闭文件锁。

```
 static void Main(string[] args)
    {
        MemoryStream ms = new MemoryStream();
        using(FileStream fs = new FileStream(@"I:\tmp.jpg", FileMode.Open))
        {
            byte[] buffer = new byte[fs.Length];
            fs.Read(buffer, 0, buffer.Length);
            ms.Write(buffer, 0, buffer.Length);
        }

        Bitmap bitmap = new Bitmap(ms);

        // do stuff

        bitmap.Save(@"I:\tmp.jpg");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:49:24.313

我的情况与您的情况并不完全相同，但是我在打开的图像文件保持打开状态时遇到了问题。

一个建议是您使用 将图像加载到内存中`BitmapCacheOption.OnLoad`，请参阅我对这篇文章的回答：[锁定资源（图像文件）管理](https://stackoverflow.com/questions/11161653/locked-resources-image-files-management/11162040#11162040)。

然后，在编辑之后，可以使用 FileStream 将该图像保存到同一个文件中，例如此处所述：[将 BitmapImage 保存到文件](https://stackoverflow.com/questions/4161359/save-bitmapimage-to-file)。

我不确定这是最简单或最优雅的方式，但我想它应该适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:51:21.000

事实上，看到这个例外可能有很多原因。

请注意，如果您使用`PixelFormat.Format16bppGrayScale`，则 GDI+ 不支持它，并且会以所示方式失败。似乎使用正确的 16 位灰度的唯一解决方法是使用`System.Windows.Media`WPF 中较新的命名空间。

# java - 删除目录时显示问题

> ID：11202660
> 
> 赞同：2
> 
> 时间：2012-06-26T07:34:14.307
> 
> 标签：java, android

> **可能重复：**
> [删除 SD 卡上的文件夹](https://stackoverflow.com/questions/5701586/delete-a-folder-on-sd-card)

在我的应用程序中，我使用内部存储即文件保存了所有数据。因此，在第一个实例中，通过使用`ContextWrapper cw = new ContextWrapper(getApplicationContext());`该类，我将目录路径设置为`m_AllPageDirectoryPath = cw.getDir("AllPageFolder", Context.MODE_PRIVATE);`在此目录路径中，我将一些文件 File 保存为 Page01、page02、Page03 等。

再次在 Page01 内，我保存了一些文件，如 image01、image02 ......使用相同的概念`m_PageDirectoryPath = cw.getDir("Page01", Context.MODE_PRIVATE);`现在在删除 m_AllPageDirectoryPath 时，我想删除与之关联的所有文件。我尝试使用此代码，但它不起作用。

```
File file = new File(m_AllPageDirectoryPath.getPath()); 
file.delete(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:36:34.757

只有当您的**目录为空**时，您的代码才有效。

如果您的目录包含文件和子目录，那么您必须**递归删除所有文件**..

试试这个代码，

```
// Deletes all files and subdirectories under dir.
// Returns true if all deletions were successful.
// If a deletion fails, the method stops attempting to delete and returns false.
public static boolean deleteDir(File dir) {
    if (dir.isDirectory()) {
        String[] children = dir.list();
        for (int i=0; i<children.length; i++) {
            boolean success = deleteDir(new File(dir, children[i]));
            if (!success) {
                return false;
            }
        }
    }

    // The directory is now empty so delete it
    return dir.delete();
} 
```

（实际上你必须在互联网上搜索才能问这样的问题）

# c# - 如何配置模型中定义的具有一对零或一对关系的外键

> ID：11202661
> 
> 赞同：0
> 
> 时间：2012-06-26T07:34:15.040
> 
> 标签：c#, .net, ef-code-first, foreign-key-relationship, entity-framework-4.3

我首先对 ef 代码的关系有一些疑问。我的代码：

```
public class user
{
    public user()
    {
    }

    public int id { get; set; }
    public string code { get; set; }
    public string name { get; set; }
}

public class dep
{
    public int id { get; set; }
    public Nullable<int> UserId { get; set; }
    public virtual user User { get; set; }
}

modelBuilder.Entity<dep>()
            .HasOptional(t => t.User)
            .WithOptionalDependent(); 
```

代码首先自动生成的表 dep 有一个名为 User_Id 的外键，但这不是我想要的。我想使用我在模型中定义的列 UserId。我将如何更改我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:55:11.923

认为您可以添加一个属性

```
[ForeignKey("UserId")] 
```

在您的用户属性上。

现在，问题是为什么？您不在数据库中，而是在 ORM 中，这是一个对象世界。您应该使用用户导航属性，而不是使用 UserId。如果你需要 UserId，你应该使用 User.Id。

但是……那是你的灵魂；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:18:31.080

你能试试下面的吗？我没有测试它，但认为它应该工作：

```
 public class User
    {
        public int Id { get; set; }
        public string Code { get; set; }
        public string Name { get; set; }
        public Dep Dep { get; set; }
    }
    public class Dep
    {
        public int Id { get; set; }
        public User User { get; set; }
    }

    public class DepConfig : EntityTypeConfiguration<Dep>
    {
        public DepConfig()
        {
            this.HasRequired(t => t.User)
                    .WithOptional(t => t.Dep);
        }
    } 
```

这假设 Dep 必须有一个 User，但 User 不需要有 Dep。我将属性 Dep 添加到 User 类中，以便您可以双向导航。

希望能帮助到你。

# c++ - Arduino 的替代 IDE

> ID：11202668
> 
> 赞同：1
> 
> 时间：2012-06-26T07:34:45.303
> 
> 标签：c++, linux, arduino

**是否有用于为 Adruino 开发的替代 IDE**

我尝试使用 Ecipe 和 Arduino IDE，但我是`Sublime Text`.

`Arduino or Seeeduino`那么，我可以用它在 Linux 中 进行编程吗？

我的意思是我必须下载一些库并插入我的源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:41:04.007

您可以使用 AVR Studio [http://www.atmel.com/microsite/atmel_studio6/](http://www.atmel.com/microsite/atmel_studio6/)

这是一个使用 Arduino 的教程：

[http://www.engblaze.com/tutorial-using-avr-studio-5-with-arduino-projects/](http://www.engblaze.com/tutorial-using-avr-studio-5-with-arduino-projects/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T05:50:26.670

我使用[make 文件](https://github.com/sudar/Arduino-Makefile)来编译和上传程序到 Arduino。您可以使用任何您喜欢的 IDE（在您的情况下是 sublime Text，在我的情况下是 vim）

```
make upload
make screen # to view the serial monitor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:29:11.903

使用您喜欢的任何编辑器并从命令行构建/上传。就个人而言，我使用[arscons](https://github.com/kylegordon/arscons)来实现这一目标。当然，您需要[SCons](http://www.scons.org/)。构建就像运行一样简单

```
$ scons 
$ scons upload 
```

在命令行。在arscons项目提供的文件中还有很多其他的选项`SConstruct`，比如指定额外库的位置；您正在构建的 Arduino 类型；以及您插入的 USB 端口。我无法为使用它的 Arduino Fio 进行无线编程，但它与 Arduino Mega 和 Uno 配合得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T04:28:13.347

正如其他人所指出的，如果您正确设置了工具链，您可以将 Arduino 与任何 IDE 一起使用。如果您正在寻找可能性列表以及如何在特定平台上启动的文档，请查看 Arduino Playground 的[开发工具](http://playground.arduino.cc/Main/DevelopmentTools)部分。

要与 Sublime Text 一起使用，您可以调整现有的命令行构建脚本之一以与 Sublime 的[构建系统](http://www.sublimetext.com/docs/build)一起使用。

# browser - 如何将浏览器页面输出重定向到在不同机器上运行的另一个浏览器

> ID：11202672
> 
> 赞同：0
> 
> 时间：2012-06-26T07:34:54.697
> 
> 标签：browser

我想知道将 HTML 页面（例如 - [http://acid3.acidtests.org/](http://acid3.acidtests.org/)的输出）从一个浏览器（例如 A）重定向到在另一台机器上运行的另一个浏览器（例如 B）是否可行？谢谢和问候， 苏维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:39:01.213

简而言之，没有。

一个稍长的版本，让答案足够长以算作答案，如果可以的话，这将是一个安全风险。

# c# - 在 C# 中将字符串转换为浮点数

> ID：11202673
> 
> 赞同：124
> 
> 时间：2012-06-26T07:35:01.367
> 
> 标签：c#, .net, string, floating-point, type-conversion

我正在转换一个像“41.00027357629127”这样的字符串，我正在使用；

```
Convert.ToSingle("41.00027357629127"); 
```

或者

```
float.Parse("41.00027357629127"); 
```

这些方法返回*4.10002732E+15*。

当我转换为浮点数时，我想要“41.00027357629127”。这个字符串应该是一样的...

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2012-06-26T08:01:07.957

您的线程的语言环境设置为小数点为“，”而不是“.”的语言环境。

尝试使用这个：

```
float.Parse("41.00027357629127", CultureInfo.InvariantCulture.NumberFormat); 
```

但是请注意，浮点数不能容纳那么多位的精度。您必须使用 double 或 Decimal 来执行此操作。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-26T07:40:47.500

首先，它只是您在调试器中看到的数字的**表示。***实际*`float`值是近似准确的（尽可能多）。

 *注意：在处理浮点数与字符串时，**始终使用** [CultureInfo信息。](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)

```
float.Parse("41.00027357629127",
      System.Globalization.CultureInfo.InvariantCulture); 
```

这只是一个例子；为您的案例选择合适的文化。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-11-25T15:05:42.927

您可以使用以下内容：

```
float asd = (float) Convert.ToDouble("41.00027357629127"); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-26T07:39:37.470

利用`Convert.ToDouble("41.00027357629127");`

[`Convert.ToDouble`文件](https://msdn.microsoft.com/de-de/library/system.convert.todouble(v=vs.110).aspx)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-26T07:39:14.020

[float](http://msdn.microsoft.com/en-us/library/b1e65aza)的精度为 7 位。如果要保留全部，则需要使用保留 15-16 位的[double](http://msdn.microsoft.com/en-us/library/678hzkk9)类型。关于格式化，请查看有关[格式化双精度](https://stackoverflow.com/questions/1421520/formatting-doubles-for-output-in-c-sharp)的帖子。而且您需要担心[C# 中的小数分隔符](https://stackoverflow.com/questions/3870154/c-sharp-decimal-separator)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T07:38:16.170

你可以`double.Parse("41.00027357629127");`

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-06-26T07:41:07.667

您可以使用双精度而不是浮点解析来获得更高的精度值。*

# javascript - Javascript中标记的while循环

> ID：11202674
> 
> 赞同：2
> 
> 时间：2012-06-26T07:35:08.317
> 
> 标签：javascript, statements

我的困惑源于这个带有标签的示例：

```
myLoop : while (expression) {
    continue myLoop;
} 
```

以及一般标记语句的语法：

```
identifier : statement 
```

示例中究竟标记了什么？

不是整个代码块：

```
while (expression) 
    statement 
```

被认为是一个单一的陈述？还是它`while(expression)`本身就是一个声明？还是`while`声明本身？

为什么不是全部：

```
while (expression) {
    continue myLoop;
} 
```

标记在`myLoop`而不只是`while(expression)`。或者这是否正在发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:44:10.367

我以前从未见过标记的 while 循环，但根据这个[http://james.padolsey.com/javascript/looping-in-javascript/](http://james.padolsey.com/javascript/looping-in-javascript/)它*是*被标记的整个 while 循环。

它的用途是打破一个特定的循环，方便使用循环中的循环，例如（取自链接的示例）

```
myOuterLoop : while (condition) {
 myInnerLoop : while (condition) {
    if (whatever) {
        break myOuterLoop;
    }
    if (whatever2) {
        break; // Same as 'break myInnerLoop;'
    }
 }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:41:53.787

被标记的不是代码块，它只是一个特定的行。所以无论你的标签*myLoop*在哪里，写*continue myLoop*就像在说“跳转到那个地方并继续执行”。

但实际上，在这个例子中：

```
myLoop : while (expression) {
    continue myLoop;
} 
```

[标签](https://developer.mozilla.org/en/JavaScript/Reference/Statements/label)的使用完全是多余的。你可以这样写，效果是一样的：

```
while (expression) {
    continue;
} 
```

这是因为*[continue](https://developer.mozilla.org/en/JavaScript/Reference/Statements/continue)*默认情况下意味着，转到循环下一次迭代的开头。

# mysql - 无法在 mysql 中获得所需的输出

> ID：11202676
> 
> 赞同：0
> 
> 时间：2012-06-26T07:35:10.297
> 
> 标签：mysql, sql, phpmyadmin

我正在编写一个项目报告，该报告需要来自单个表的一些棘手的输出。

这是名为：**daily_visit_expenses的表的结构** ![daily_visit_expenses](../Images/8a97e5eba54dac58f9331f401f08b09a.png)

有这样的数据:: ![在此处输入图像描述](../Images/a6a93e3be16ce719e50e173b8c50f9f6.png)

现在我想要的输出是这三个查询在单个列（任何名称）中的组合，查询是：

```
SELECT DISTINCT(`cust_1`) FROM `daily_visit_expenses` WHERE user='sanjay' AND `purpose_1`='Sales'
SELECT DISTINCT(`cust_2`) FROM `daily_visit_expenses` WHERE user='sanjay' AND `purpose_2`='Sales'
SELECT DISTINCT(`cust_3`) FROM `daily_visit_expenses` WHERE user='sanjay' AND `purpose_3`='Sales' 
```

* * *

我想从单个查询中获取输出，该查询是上述三个查询在单个列中的组合，`customers`例如`DISTINCT`.

SQL 导出：

```
CREATE TABLE IF NOT EXISTS `daily_visit_expenses` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `user` varchar(255) NOT NULL,
  `date` date NOT NULL,
  `status` varchar(50) NOT NULL,
  `location` varchar(50) NOT NULL,
  `cust_1` varchar(255) NOT NULL,
  `cust_2` varchar(255) NOT NULL,
  `cust_3` text NOT NULL,
  `cust_4` text NOT NULL,
  `purpose_1` varchar(20) NOT NULL,
  `purpose_2` varchar(20) NOT NULL,
  `purpose_3` varchar(20) NOT NULL,
  `purpose_4` varchar(20) NOT NULL,
  `visit_type` varchar(20) NOT NULL,
  `expenses` bigint(20) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=15 ;

INSERT INTO `daily_visit_expenses` (`id`, `user`, `date`, `status`, `location`, `cust_1`, `cust_2`, `cust_3`, `cust_4`, `purpose_1`, `purpose_2`, `purpose_3`, `purpose_4`, `visit_type`, `expenses`) VALUES
(5, 'sanjay', '2012-06-15', 'Working', 'Customer', 'S.G.R.S. Chemical & Minral Industries', '', 'fatehpur foundry', '', 'Sales', '', 'Sales', '', 'Outstation', 2323),
(8, 'sanjay', '2012-06-25', 'Working', 'Office', '', '', '', '', '', '', '', '', '', 0),
(9, 'sanjay', '2012-06-09', 'Working', 'Office', '', '', '', '', '', '', '', '', '', 0),
(10, 'sanjay', '2012-06-05', 'Working', 'Customer', 'V.N INTERNATIONAL', 'G.SURGIWEAR', '', '', 'Sales', 'Sales', '', '', 'Outstation', 332),
(11, 'sanjay', '2012-06-30', 'Working', 'Customer', 'Ganesh Plywood-Sitapur', '', '', '', 'Service', '', '', '', 'Outstation', 434),
(12, 'sanjay', '2012-06-04', 'Absent', '', '', '', '', '', '', '', '', '', '', 0),
(13, 'sanjay', '2012-06-06', 'Absent', '', '', '', '', '', '', '', '', '', '', 0),
(14, 'sanjay', '2012-06-08', 'Leave', '', '', '', '', '', '', '', '', '', '', 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:55:30.823

```
mysql> SELECT DISTINCT(`customer`) FROM ( SELECT `cust_1` as `customer` FROM `daily_visit_expenses` WHERE user='sanjay' AND `purpose_1`='Sales' UNION ALL SELECT `cust_2` as `customer` FROM `daily_visit_expenses` WHERE user='sanjay' AND `purpose_2`='Sales' UNION ALL SELECT `cust_3` as `customer` FROM `daily_visit_expenses` WHERE user='sanjay' AND `purpose_3`='Sales') as t;
+---------------------------------------+
| customer                              |
+---------------------------------------+
| S.G.R.S. Chemical & Minral Industries |
| V.N INTERNATIONAL                     |
| G.SURGIWEAR                           |
| fatehpur foundry                      |
+---------------------------------------+
4 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:43:32.007

尝试使用[UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)

```
SELECT DISTINCT(`cust_1`) FROM `daily_visit_expenses` WHERE user='sanjay' AND `purpose_1`='Sales'
UNION DISTINCT
SELECT DISTINCT(`cust_2`) FROM `daily_visit_expenses` WHERE user='sanjay' AND `purpose_2`='Sales'
UNION DISTINCT
SELECT DISTINCT(`cust_3`) FROM `daily_visit_expenses` WHERE user='sanjay' AND `purpose_3`='Sales'; 
```

编辑：更改为 UNION DISTINCT

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:48:30.290

试试这个，如果我没有误解你的问题，我认为这就是你所需要的：

```
SELECT DISTINCT(`customer`) FROM
(
SELECT `cust_1` FROM `daily_visit_expenses` WHERE user='sanjay' AND `purpose_1`='Sales' UNION ALL
SELECT `cust_2` FROM `daily_visit_expenses` WHERE user='sanjay' AND `purpose_2`='Sales' UNION ALL
SELECT `cust_3` FROM `daily_visit_expenses` WHERE user='sanjay' AND `purpose_3`='Sales') 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-26T07:50:56.537

这应该工作：

```
SELECT DISTINCT(`cust_1`,`cust_2`,`cust_3`) FROM `daily_visit_expenses`  
WHERE user='sanjay' AND (`purpose_1`='Sales' OR `purpose_2`='Sales' OR 
`purpose_3`='Sales' ) 
```

# android - Android 应用程序从计算机接收数据

> ID：11202677
> 
> 赞同：0
> 
> 时间：2012-06-26T07:35:14.783
> 
> 标签：android, text, sms

我想知道是否有一种方法可以使用 Internet 将文本从我的 PC 发送到 Android 应用程序。我不需要发送短信，我需要发送将在该应用程序中显示的文本。

有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:37:50.590

简而言之，你必须使用[Android Cloud to Device Messaging Framework](https://developers.google.com/android/c2dm/?hl=fo)。

但你也可以试试[PubNub](http://www.pubnub.com/)，有一个[Android](http://www.pubnub.com/devcenter)库，虽然我自己从未尝试过。

# html - 隐藏的 DIV 位置

> ID：11202679
> 
> 赞同：2
> 
> 时间：2012-06-26T07:35:27.503
> 
> 标签：html, css

我有一些表格，在一些 DIV 中。DIV 被隐藏，并在您从选择框中选择一个选项时显示。我需要一种定位隐藏 DIV 的方法，因为默认位置位于上述选择框下方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:20:30.063

```
<table> 
<tr>
<td>
<select id = "opts" onchange = "showForm()">
<option value = "0">Select Option</option>
<option value = "1">Option 1</option>
<option value = "2">Option 2</option>
</select>
</td>
<td>
<div id = "f1" style="display:none">
<form name= "form1">
Content of Form 1
</form>
</div>

<div id = "f2" style="display:none">
<form name= "form2">
Content of Form 2
</form>
</div>
</td>
</tr>
</table> 
```

和

```
<script type = "text/javascript">
function showForm(){
var selopt = document.getElementById("opts").value;
if (selopt == 1) {
document.getElementById("f1").style.display="block";
document.getElementById("f2").style.display="none";
}
if (selopt == 2) {
document.getElementById("f2").style.display="block";
document.getElementById("f1").style.display="none";
}
}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:43:20.497

您可能需要使用 Z-index 将元素定位在选择框上方。很高兴先看到演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:23:45.217

试试这个[FIDDLE](http://jsfiddle.net/jUUuy/1/)。它可能会帮助你。
只需选择想法并与您的选择选项一起使用。
**这是jQuery：**

```
$('#testDiv').mouseenter(function () {
        $('.hoveruserinfo').fadeIn();
    });
    $('#testDiv').mouseleave(function () {
        $('.hoveruserinfo').fadeOut();
    }); 
```

**CSS：**

```
.hoveruserinfo
{
    background-color: #ccc;
    font-size: 11px;
    color: #333;
    border: 1px solid #ccc;
    font-weight: bold;
    border-radius: 4px;
    padding: 10px;
    margin-top: -2px;
} 
```

**HTML：**

```
<div id="testDiv">  
Test
</div>
<div class="hoveruserinfo" style="position:absolute;width:206px;display:none;margin-left:147px;">
James Smith <span>this is my data</span>           
</div> 
```

# c# - Infragistics.Win.UltraWinGrid.DoubleClickCellEvent c#

> ID：11202680
> 
> 赞同：1
> 
> 时间：2012-06-26T07:35:27.980
> 
> 标签：c#, infragistics, ultrawingrid

我正在做一个项目，当我在行上单击两次时，我需要读取 Infragistics GridList 中的一行。这就是我填充我的网格列表的方式

```
 try
        {
            if (txtAd.Text.Replace("'", "").Trim() == string.Empty && txtSoyad.Text.Replace("'", "").Trim() == string.Empty)
            {
                stBarMsg.Text = "ad soyad girilmeli!";
                return;
            }

            DataTable dt = PrePaidLib.getParaPuanGoruntulemeList(true, txtAd.Text.Replace("'", ""), txtSoyad.Text.Replace("'", ""));
            grdList.DataSource = dt;
            grdList.DataBind();
        }
        catch (Exception exp)
        {
            ErrorLib.ErrorHandle(exp, "frmParaPuanGoruntuleme.retrieveRecord");
        } 
```

在这里，你可以找到我的双击功能

```
 private void grdList_DoubleClickCell(object sender, Infragistics.Win.UltraWinGrid.DoubleClickCellEventArgs e)
    {
        try
        {
            txtKartno.Text = grdList.Selected.Columns[0].ToString();//Cells[1].ToString();
        }
        catch(Exception ex)
        {
            ErrorLib.ErrorHandle(ex, "grdList_DoubleClickCell");
        }
    } 
```

此行不起作用“txtKartno.Text = grdList.Selected.Columns[0].ToString();” 顺便说一句，我想逐个获取每个属性的值。我的网格列表中有 4 列。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:49:21.350

当您双击 Infragistics UltraWinGrid 中的单元格时，您会收到在`DoubleClickCellEventArgs.Cell`属性中单击的单元格。通过该属性，您可以使用语法到达当前行`e.Cell.Row`，从该行您可以使用语法到达任何其他单元格`e.Cell.Row.Cells[columnName or columnIndex].Value`。

所以你需要的数据可以这样读取

```
txtKartno.Text = e.Cell.Row.Cells[0].Value.ToString(); 
```

（我假设所需的单元格不是单击的单元格，并且该列的索引为零）

当然，如果单击的单元格是您需要的单元格，则语法更简洁

```
txtKartno.Text = e.Cell.Value.ToString(); 
```

要完成答案，请注意，UltraGridRow 有两种方法可用于从行中检索单元格值：

```
string textResult = e.Cell.Row.GetCellText(e.Row.Band.Columns[0]);
object objResult = e.Cell.Row.GetCellValue(e.Row.Band.Columns[1]); 
```

根据 Infragistics 的说法，这两种方法避免了创建不需要的单元格对象，因此性能更高。就您而言，尚不清楚这些方法是否真的有益。

# javascript - 如何在 Javascript 中移动子元素时触发一次鼠标事件？

> ID：11202681
> 
> 赞同：5
> 
> 时间：2012-06-26T07:35:29.733
> 
> 标签：javascript, dom, dom-events, addeventlistener, mouseover

进入 DOM 元素时，`mouseover`会发生事件。在当前元素周围移动鼠标时，不会发生任何事件，就像`mouseover`进入一样。

但是，子节点不遵守此规则。如果将鼠标移到子节点上，`mouseover`事件将一次又一次地触发，虽然没有新的事件，因为我们仍然在原来的父节点。

请参阅此[**示例**](http://jsfiddle.net/ww645/)。如果我们将鼠标移动到父元素上（实际上是在它的 textNode 上），没有任何新的事情发生，但是如果我们转到子元素（仍然在父元素上），它将`mouseover`一次又一次地触发事件。事实上，每次鼠标进入一个元素（甚至在原始父元素内）时，它都会触发鼠标事件。

我们如何才能使`mouseover`唯一一次移动到整个父级（中的原始元素`addEventListener`）？在给定的示例中，我的意思是避免在子元素上移动鼠标时触发事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T07:46:21.667

您真正需要的是[`mouseenter`](https://developer.mozilla.org/en/DOM/DOM_event_reference/mouseenter)不会冒泡的事件（与 不同`mouseover`）。来自 MDN：

> 当鼠标或其他指点设备进入分配给元素或其后代之一的物理空间时，将调度同步 mouseenter DOM 事件。
> 
> 与 mouseover 类似，它的不同之处在于**它不会冒泡**，并且当指针从其后代的物理空间之一移动到其自己的物理空间时不会发送。

不幸的是，它[没有得到广泛的支持](http://www.quirksmode.org/dom/events/index.html#t017)。一种解决方案是使用 jQuery（请参阅[`.mouseenter()`](http://api.jquery.com/mouseenter/)参考资料），它在它支持的所有浏览器中填充该事件。另一种选择是检查触发事件的元素：

```
document.getElementById("parent").addEventListener('mouseover', function(e) {
    if (e.target.id === "parent") { //Only execute following on parent mouseover
        document.getElementById("time").innerHTML = new Date;
        this.childNodes[1].style.display="block";
    }
}, false); 
```

或者[看看这里](http://blog.stchur.com/2007/03/15/mouseenter-and-mouseleave-events-for-firefox-and-other-non-ie-browsers/)乍一看是一个非常好的垫片。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T08:58:30.900

这在 chrome 和 ff 中对我有用

```
document.getElementById("parent").addEventListener('mouseover', function(event) {
    var e = event.fromElement || event.relatedTarget;
    if (e.parentNode == this || e == this) {
        return;
    }
    document.getElementById("time").innerHTML = new Date();
}, true); 
```

[小提琴演示](http://jsfiddle.net/3swb3/)

参考：[鼠标事件](http://www.quirksmode.org/js/events_mouse.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:46:09.527

在您的示例中，子元素没有触发任何事件，它是您的父元素，当您将鼠标悬停在其上时，它会运行您的脚本并在您的“时间”div 中显示结果。

# mysql - MySQL DATE_ADD INTERVAL 不适用于 Hibernate。

> ID：11202690
> 
> 赞同：1
> 
> 时间：2012-06-26T07:36:18.377
> 
> 标签：mysql, hibernate, hql, intervals

我在下面的查询显示休眠异常：

```
SELECT DATE_ADD(DATE_FORMAT(MIN(t.time),'%Y-%m-%d'), INTERVAL 6 DAY) FROM Table t; 
```

据我了解，hibernate 无法识别`INTERVAL`关键字。

任何人都可以帮我写一个 HQL 查询，它给我的结果与我上面的查询相同吗？

（我试图从我表中的最小日期开始 1 周后获取日期）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:21:24.200

HQL 和 SQL 是两个不同的东西。您可以使用本机 SQL 查询而不是 HQL 查询。或者您可以只执行以下查询：

```
select min(t.time) from SomeEntity e 
```

并在 Java 中添加 6 天：

```
Date minDate = (Date) query.uniqueResult();
minDate = DateUtils.addDays(d, 6); // using apache commons-lang 
```

# md5 - 以 MD5 格式发送数据

> ID：11202694
> 
> 赞同：3
> 
> 时间：2012-06-26T07:36:24.803
> 
> 标签：md5, jmeter

在我的项目中有一个场景

用户将登录 -> 浏览一些页面 -> 然后他将单击注销链接。

为了在 JMeter 中测试这个场景，我使用了 CSV 配置，这样我就可以为 50 个用户测试这个场景。在注销期间，每个用户唯一的用户 ID 作为请求以 MD5 格式发送。

如何在 JMeter 中发送 MD5 格式的用户 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:50:25.010

您可以轻松地使用[JMeter 插件](https://jmeter-plugins.org/)集中的自定义[MD5 函数。](https://jmeter-plugins.org/wiki/Functions/#MD5supfont-color-gray-size-1-since-0-4-2-font-sup) 这看起来像。
`${__MD5(${username})}`

[这里](http://groups.google.com/group/jmeter-plugins/browse_thread/thread/628ae248a082b5a8)还有来自插件作者的演示脚本，附在对话中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:42:42.993

您可以使用正则表达式获取动态用户/会话 ID，然后使用 BeanShell 预处理器计算 MD5。一些示例代码可以[在这里](http://jmeter.512774.n5.nabble.com/MD5-conversion-of-a-string-td531123.html)和[那里](http://jmeter.512774.n5.nabble.com/Need-helping-creating-a-md5-hash-td3273251.html)获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-27T12:23:30.487

实际上 MD5 函数已被删除，使用[__digest](http://jmeter.apache.org/usermanual/functions.html#__digest)和 MD5 作为第一个参数：

> ```
> ${__digest(MD5,Errare humanum est,,,)} 
> ```
> 
> 返回 c49f00b92667a35c63708933384dad52

# c++ - 如何设置我的 datetimepicker 日期？

> ID：11202702
> 
> 赞同：0
> 
> 时间：2012-06-26T07:36:51.537
> 
> 标签：c++, visual-studio-2010, visual-c++, c++-cli, datepicker

我正在 c++/cli visual studio 2010 中编写一个程序，但我不知道如何将特定日期设置到我的日期时间选择器中。

我还想知道如何将默认日期设置为今天，这样你就不能去已经过去的日期了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:48:47.487

使用[`Value`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.value.aspx)属性设置当前日期/时间，并[`MinDate`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.mindate.aspx)设置可以选择的最早日期。

```
dateTimePicker1->MinDate = DateTime::Today; 
```

# linux - 创建一个没有挂载的虚拟软盘映像？

> ID：11202706
> 
> 赞同：14
> 
> 时间：2012-06-26T07:36:59.057
> 
> 标签：linux, sudo, mount, dd, floppy

有很多帖子可以展示以超级用户或用户可以运行`sudo`命令的身份创建虚拟软盘映像文件。基本步骤是：

1.  `dd`通过命令创建空的 1.44MB 图像文件
2.  格式化图像文件`mkfs.msdos`
3.  将图像文件挂载到某个挂载点
4.  复制一些东西到挂载点
5.  `umount`虚拟软盘映像文件

我的问题是，如果我只是一个无法运行`sudo`命令的普通用户，我该如何按照上述步骤创建虚拟软盘映像并在其中写入内容？

非常感谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-26T07:41:30.010

是的，你当然可以这样做。用于`mtools`FAT 和`e2tools`/或`genext2fs`ext2 文件系统。

```
$ dd if=/dev/zero of=/tmp/disk1.img count=1440 bs=1k 
1440+0 records in
1440+0 records out
1474560 bytes (1.5 MB) copied, 0.00569719 s, 259 MB/s

$ /sbin/mkfs.msdos /tmp/disk1.img 
mkfs.msdos 3.0.12 (29 Oct 2011)

$ mdir -i /tmp/disk1.img
 Volume in drive : has no label
 Volume Serial Number is 9913-BFF6
Directory for ::/

No files
                          1 457 664 bytes free

$ mcopy -i /tmp/disk1.img /etc/issue.net ::/
$ mdir -i /tmp/disk1.img
 Volume in drive : has no label
 Volume Serial Number is 9913-BFF6
Directory for ::/

issue    net        28 2012-06-26  10:49 
        1 file                   28 bytes
                          1 457 152 bytes free 
```

当然，我没有根权限。

# javascript - 多次触发主干绑定事件

> ID：11202707
> 
> 赞同：6
> 
> 时间：2012-06-26T07:37:08.603
> 
> 标签：javascript, backbone.js

我正在尝试使用主干 js 构建一个切换视图，并在我切换视图几次时发现我的绑定事件被触发了多次。

以下是更好说明的代码：

html

```
<div id='container'>
    halo world
</div>

<button id='but1'>red view</button>
<button id='but2'>blue view</button> 
```

css

```
#red_view{
    width:400px;
    height:400px;
    background-color:red;        
}
#blue_view{
    width:400px;
    height:400px;
    background-color:blue;        
}
.button,.button2{
    width:300px;
    height:300px;
    background-color:gray;
} 
```

​ javascript

```
RedView = Backbone.View.extend({
    el: "#container",
    events:{"click .button":"clickme"},
    clickme:function(){
        alert('redview');                        
    },
    initialize: function(){
        this.$el.html("<div id='red_view'><div class='button'>Click Me</div></div>");            
    }
});

BlueView = Backbone.View.extend({
    el: "#container",
    events:{"click .button2":"clickme2"},
    clickme2:function(){
        alert('blueview');                        
    },    
    initialize: function(){
        this.$el.html("<div id='blue_view'><div class='button2'>Click Me</div></div>");            
    }
});

$(document).ready(function(){
    //var router = new SystemRouter();

    $('#but1').click(function(){
       var view = new RedView();
    });
    $('#but2').click(function(){
       var view = new BlueView();
    });    
}); 
```

如果您单击红色视图 3 次，然后按“单击我”。它也会弹出警报3次。我怀疑有必要在某处取消绑定事件，但找不到正确的方法来做到这一点。最好提供一些正确执行此操作的参考。

​这里是 jsfiddle 演示的链接。[http://jsfiddle.net/mochatony/DwRRk/31/](http://jsfiddle.net/mochatony/DwRRk/31/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T07:58:31.657

每次单击`red view`或- 按钮时，您每次`blue view`都会创建一个*新的红色或蓝色视图*。您绑定它们的事件哈希以响应源自具有类`button`和`button2`.

1.  按 'red view' 3 次 -> 创建了 3 个 RedView 实例
2.  单击带有“按钮”类的按钮-> DOM 事件
3.  3 个 RedView 实例监听所述 DOM 事件 -> 3 个警报

这是因为您在创建新视图之前没有清理视图，从而有效地留下了对事件做出响应的幽灵视图，即使它们不可见。[（有关事件哈希的更多信息）](http://backbonejs.org/#View-undelegateEvents)您可以使用类似的方法从视图中清除事件。

```
cleanup: function() {
  this.undelegateEvents();
  $(this.el).clear();
} 
```

这是您对视图进行清理的小提琴[http://jsfiddle.net/DwRRk/34/](http://jsfiddle.net/DwRRk/34/)

还有一个良好实践的提示：您应该使用诸如渲染方法之类的东西将东西附加到您的 DOM，使用初始化来初始化您的视图所需的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T02:06:47.820

这是删除鬼视图的另一种方法（我正在使用的）

```
disposeView: function(view){
   Backbone.View.prototype.close = function () {
      this.unbind();
      this.undelegateEvents();
   };

   /* --Destroy current view */
   if(this.currentView !== undefined) {
      this.currentView.close();
   }

   /* --Create new view */
   this.currentView = view;
   this.currentView.delegateEvents();

   return this.currentView;
}

disposeView(new view()); 
```

请务必始终在您的视图中返回“this”，否则这将不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T07:50:29.180

每次单击按钮时，您都会创建一个新视图，而不会破坏前一个视图。尝试使用像这样的单个视图：

[http://jsfiddle.net/DwRRk/32/](http://jsfiddle.net/DwRRk/32/)

```
var SomeModel = Backbone.Model.extend({});

var SomeView = Backbone.View.extend({
    el: "#container",
    model: SomeModel,
    events: {
        "click .button": "clickme"
    },
    clickme: function() {
        alert(this.model.get("color"));
    },
    colorChanged: function() {
        this.$el.html("<div id='" + this.model.get("color") + "_view'><div class='button'>Click Me</div></div>");
    },

    initialize: function() {
        _.bindAll( this, "colorChanged" );
        this.model.on("change:color", this.colorChanged );
        this.model.on("reset", this.colorChanged );
    }
});

$(document).ready(function() {
    //var router = new SystemRouter();
    var model = new SomeModel({color: "red"}),
        view = new SomeView({model: model})

    $('#but1').click(function() {
        model.set("color", "red");
    });
    $('#but2').click(function() {
        model.set("color", "blue");
    });
});​ 
```

# python - 如何判断串口是否关闭？

> ID：11202713
> 
> 赞同：1
> 
> 时间：2012-06-26T07:37:38.340
> 
> 标签：python, pyserial

我正在开发一个用于处理串行/USB 端口的多线程服务器应用程序。

问题是，如果拔下电缆，pyserial 会不断报告端口已打开且可用。阅读时我只收到`Empty`异常（由于阅读超时）。

我如何发现某个端口已断开连接，以便我可以处理这种情况？

编辑：操作系统是 Ubuntu 12.04

编辑 2：澄清 - 我通过串行到 USB 连接器连接到串行端口设备，因此被断开的设备是 USB 设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:44:35.733

串行端口没有“电缆连接”或未连接的真正概念。

根据您使用的设备，您可以尝试轮询 DSR 或 CTS 线路，并在这些线路在一定时间内保持低电平时确定没有连接设备。

来自维基百科：

> DTR 和 DSR 通常一直处于开启状态，并且根据 RS-232 标准及其后续标准，用于从每一端发出其他设备实际存在并已通电的信号

因此，如果您有符合要求的设备，那么 DSR 线可能就是您需要的东西。

编辑：由于您似乎使用 USB2Serial 转换器，您可以尝试检查设备节点是否仍然存在 - 您无需尝试打开它。

所以 os.path.exists(devNode) 就足够了。

# arrays - Perl：跨数组元素搜索模式

> ID：11202714
> 
> 赞同：0
> 
> 时间：2012-06-26T07:37:40.000
> 
> 标签：arrays, perl, bioinformatics

我是一个 Perl 新手，遇到了另一个需要帮助和输入的生物信息学问题。

**问题简述：**

1.  我有一个文件，其中包含 40,000 多个*独特的*DNA 序列。唯一的，我的意思是唯一的序列ID。我在我的帖子末尾附上了它的一部分，以帮助您展示它的外观。

2.  我需要将40,000 个序列中的*每一个*分成 3 个部分。因此，如果特定序列的长度为 999 个字符，则 3 个部分中的每个部分将有 333 个字符。

3.  我需要通过 3 个单独的部分中的每一个来寻找以下模式：

    $gpat = [G]{3,5}; $npat = [AZ]{1,25};
    $pattern = $gpat.$npat.$gpat.$npat.$gpat.$npat.$gpat;

4.  如果 $pattern 出现在 3 部分中的第一个，则增加“开始”的计数器，如果 $pattern 出现在 3 部分中的第二个，则增加“中间”的计数器，最后如果 $pattern 出现在第 3 部分，增加“结束”的计数器。

5.  打印“开始”、“中间”和“结束”的计数器，即基本上是每个序列的“开始”、“中间”、“结束”的总和。

    说在第一个序列中，值分别是'2'，'5'，'3'，在第二个序列中，值是'4'，'1'，'6'，最终计数应该是'7,6 ,9'。

**我遇到的问题：**

1.  如果一个特定的序列被分成 3 个部分，潜在的 $pattern 就会丢失。例如说一个像这样的序列：

gggatgtcgatgcatggggatgcatcgatgcggggactagctagcgggatgctacgatggggatgatgataatatcgcggcgcatatatgctagtctatatatta

拆分为 3 个部分会产生以下 3 个子部分，每个子部分长度为 35 个字符：

gggatgtcgatgcatggggatgcatcgatgcgggg
actagctagcgggatgctacgatggggatgatgat
aatatcgcggcgcatatatgctagtctatatatta

因此，*$pattern 被分成前两部分*。无论如何要说“如果 $pattern 从第一部分开始并在第二部分结束”，增加“开始”的数量？

**##UPDATE##**感谢Cupidvogel建议的代码，以下问题已得到解决

> 2.如果一个序列的长度不能被3整除，我如何将它分成3部分？我尝试使用`int`，但最后一部分短 1-2 个字符。

以下是我到目前为止编写的代码。

它读取文件，显示标题名称和序列，每个序列将被分成的长度，最后将序列分成 3 部分，如果序列长度可以被 3 整除，则可以正常工作，对于那些不能被 3 整除的部分，最后的第 3 部分短 1-2 个字符。

```
#Take Filename from user
print "Please enter file name : ";
$in =<>;
chomp $in;

open (FASTA,"$in") or die ;
while (<FASTA>)
{
$/=">";
@array = split '\n', $_;
$header=shift @array; # Header of the fasta sequence
print "\n\nNext sequence: \n";
print $header,"\n";

$seq= join '', @array; # sequence
$seq=~s/\s//g;
$seq=~s/\*//g;
$seq=~s/>//g;
print $seq,"\n\n";

$num = int(length($seq)/3);
@arr = unpack("A$num A$num A*",$seq);
print " New method gives this :", @arr;
print "\nThe first element is :", $arr[0]; 
print "\nThe second element is :",$arr[1]; 
print "\nThe third element is :",$arr[2] ;

#The following lines of code were originally written to split...
#...the sequence into 3 parts, albeit unsuccessfully                    
#my $split = (length $seq)/3;
#print $split,"\n\n";

#my $int = int $split;
#print $int,"\n\n";

#my @array2 = $seq =~ /(.{$int})/g;
#print join (" ", @array2),"\n\n";

#print $array2[0],"\n",$array2[1],"\n",$array2[2];

}

exit; 
```

我一直在尝试使用以下示例文件编写的代码：sample.fa

```
>ABC_123 2
atgtcgatcgatcggcgggcatgcgcgcgcggatg
atatatagcgcgcgctatatagcgcgactctacgc
atgctgctgactagctatagtcgctgactgcgcgt
gggaaaaagggcccgggccccgttttggggatcta
ggggatagctgatgctagcatgcatgctgactgca
>DEF_456 4
gggatgtcgatgcatggggatgcatcgatgcgggg
actagctagcgggatgctacgatggggatgatgat
aatatcgcggcgcatatatgctagtctatatatta
>GHI_789 1
atagctgctagtcgatcggcgcgggtatcgatcgg
ggatcgatcgatcggggatcgatcgggggatcgat 
```

实际的输入文件如下所示：

```
>NR_037701 1
aggagctatgaatattaatgaaagtggtcctgatgcatgcatattaaaca
tgcatcttacatatgacacatgttcaccttggggtggagacttaatattt
aaatattgcaatcaggccctatacatcaaaaggtctattcaggacatgaa
ggcactcaagtatgcaatctctgtaaacccgctagaaccagtcatggtcg
gtgggctccttaccaggagaaaattaccgaaatcactcttgtccaatcaa
agctgtagttatggctggtggagttcagttagtcagcatctggtggagct
gcaagtgttttagtattgtttatttagaggccagtgcttatttagctgct
agagaaaaggaaaacttgtggcagttagaacatagtttattcttttaagt
gtagggctgcatgacttaacccttgtttggcatggccttaggtcctgttt
gtaatttggtatcttgttgccacaaagagtgtgtttggtcagtcttatga
cctctattttgacattaatgctggttggttgtgtctaaaccataaaaggg
aggggagtataatgaggtgtgtctgacctcttgtcctgtcatggctggga
actcagtttctaaggtttttctggggtcctctttgccaagagcgtttcta
ttcagttggtggaggggacttaggattttatttttagtttgcagccaggg
tcagtacatttcagtcacccccgcccagccctcctgatcctcctgtcatt
cctcacatcctgtcattgtcagagattttacagatatagagctgaatcat
ttcctgccatctcttttaacacacaggcctcccagatctttctaacccag
gacctacttggaaaggcatgctgggtctcttccacagactttaagctctc
cctacaccagaatttaggtgagtgctttgaggacatgaagctattcctcc
caccaccagtagccttgggctggcccacgccaactgtggagctggagcgg
gagggaggagtacagacatggaattttaattctgtaatccagggcttcag
ttatgtacaacatccatgccatttgatgattccaccactccttttccatc
tcccagaagcctgctttttaatgcccgcttaatattatcagagccgagcc
tggaatcaaactgcctctttcaaaacctgccactatatcctggctttgtg
acctcagccaagttgcttgactattctcagtctcagtttctgcacctgtc
aaatagggtttatgttaacctaactttcagggctgtcaggattaaatgag
catgaaccacataaaatgtttggtgtatagtaagtgtacagtaaatactt
ccattatcagtccctgcaattctatttttcttccttctctacacagcccc
tgtctggctttaaaatgtcctgccctgctttttatgagtggataccccca
gccctatgtggattagcaagttaagtaatgacactcagagacagttccat
ctttgtccataacttgctctgtgatccagtgtgcatcactcaaacagact
atctcttttctcctacaaaacagacagctgcctctcagataatgttgggg
gcataggaggaatgggaagcccgctaagagaacagaagtcaaaaacagtt
gggttctagatgggaggaggtgtgcgtgcacatgtatgtttgtgtttcag
gtcttggaatctcagcaggtcagtcacattgcagtgtgtcgcttcacctg
gctccctcttttaaagattttccttccctctttccaactccctgggtcct
ggatcctccaacagtgtcagggttagatgccttttatgggccacttgcat
tagtgtcctgatagaggcttaatcactgctcagaaactgccttctgccca
ctggcaaagggaggcaggggaaatacatgattctaattaatggtccaggc
agagaggacactcagaatttcaggactgaagagtatacatgtgtgtgatg
gtaaatgggcaaaaatcatcccttggcttctcatgcataatgcatgggca
cacagactcaaaccctctctcacacacatacacatatacattgttattcc
acacacaaggcataatcccagtgtccagtgcacatgcatacacgcacaca
ttcccttcctaggccactgtattgctttcctagggcatcttcttataaga
caccagtcgtataaggagcccaccccactcatctgagcttatcaaccaat
tacattaggaaagactgtatttcctagtaaggtcacattcagtagtactg
agggttgggacttcaacacagctttttgggggatcataattcaacccatg
acagccactgagattattatatctccagagaataaatgtgtggagttaaa
aggaagatacatgtggtacaaggggtggtaaggcaagggtaaaaggggag
ggaggggattgaactagacacagacacatgagcaggactttggggagtgt
gttttatatctgtcagatgcctagaacagcacctgaaatatgggactcaa
tcattttagtccccttctttctataagtgtgtgtgtgcggatatgtgtgc
tagatgttcttgctgtgttaggaggtgataaacatttgtccatgttatat
aggtggaaagggtcagactactaaattgtgaagacatcatctgtctgcat
ttattgagaatgtgaatatgaaacaagctgcaagtattctataaatgttc
actgttattagatattgtatgtctttgtgtccttttattcatgaattctt
gcacattatgaagaaagagtccatgtggtcagtgtcttacccggtgtagg
gtaaatgcacctgatagcaataacttaagcacacctttataatgacccta
tatggcagatgctcctgaatgtgtgtttcgagctagaaaatccgggagtg
gccaatcggagattcgtttcttatctataatagacatctgagcccctggc
ccatcccatgaaacccaggctgtagagaggattgaggccttaagttttgg
gttaaatgacagttgccaggtgtcgctcattagggaaaggggttaagtga
aaatgctgtataaactgcatgatgtttgcaggcagttgtggttttcctgc
ccagcctgccaccaccgggccatgcggatatgttgtccagcccaacacca
caggaccatttctgtatgtaagacaattctatccagcccgccacctctgg
actccctcccctgtatgtaagccctcaataaaaccccacgtctcttttgc
tggcaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
aaa
>NM_198399 1
aacagattttaactctgaaaagccatttccagtgtctatagactattgtg
agcctggagaagtagcatttagttgggatagcttcactagagctgcctgc
caaagacttccttccacaggatcttgtcgcaccagcaactgacaggagct
tgggagctcgggagcttgggagagggcttatgtttttaataatgtagctg
tcagttcgaagcctggaaatgttgaccctcaaagggcataaaatcttgtt
attttaatttgcatctgggagaatgtctgagcaaggagacctgaatcagg
caatagcagaggaaggagggactgagcaggagacggccactccagagaac
ggcattgttaaatcagaaagtctggatgaagaggagaaactggaactgca
gaggcggctggaggctcagaatcaagaaagaagaaaatccaagtcaggag
caggaaaaggtaaactgactcgcagccttgctgtctgtgaggaatcttct
gccagaccaggaggtgaaagtcttcaggatcagactctctgaaaactgca
aatggaaaggaattcaaaagaatttagattaaaagttaaataaaaagtag
gcacagtagtgctgaattttcctcaaaggctctcttttgataaggctgaa
ccaaatataatcccaagtatcctctctccttccttgttggagatgtctta
cctctcagctccccaaaatgcacttgcctataagaaacacaattgctggt
tcatatgaaacttaggaaatagtgaataaggtgcatttaactttggagaa
atacttttatggctttggtggagatttctcaatactgcaaaagttgtcca
gaaatgaatctgagctgatggtgactttaagttaatattattaatatatc
actgcatatttttacccttatttttgctccttacagcaagattagtaggt
tataaaaatttaaatttaaacaaaattatttcatgacaaaatgggaaact
tcacatcatacttatttttgtttgcctttcaggcatcatattagctttta
taaaaaatggtcttgctgctgaaattgtacttattttatcagaggctggg
tgcagtcaagacaaaagtaaaatggtttacctgagcccaggggagggaaa
attgattaagatatcattatttttgtttggtttggttttgcttttttcct
cttactttaattgaaatactctgaattcccctcatggaaacagagagcat
tgagagcactttctttaaaaggaccaaaaataaattcctaatagattttg
tcctaagagagtgtttttttttctagcatcattttctttacatgccactc
atgtcataaggcatggacaggctatctttcagtggccattactatgtttc
gtacacatgctttattttacttgggctctgagaaatgtgtggctttcctt
cagcattttatttgtgcttctctttttaatggagattgaaaagggagaat
aatgtgaatatcacggcttatattattaaatgttgattgatggcttgtaa
tgtactgcacacaatatatgttaactctgcagaatgacagaccctgggag
aagtaatgccccagttgtcccccactcctaatgccaggcagagaaggaca
gcctttatagacttaatctgctttttgtcccatttgacaaggtaccagga
ggaaattttttaagggatcaactgtatcacagtgcccactctggacctaa
gtctagtgtatccatacaattggtgcagagaaataaggtgtaaatggtgc
tttgttcctgctggttccaagctcagaaaccaagactagctttgtaggag
agaatgagagcctgcaagcctctctttggattggctgaggagtggtggga
gcagggggttgatagaaaacatccagacacacatataagcaagtggccgt
gctacctttttagagaataaagaaacagacttttgagtttatatgcaatg
ccttcattaggtaccaccggcacttacaaaatgtgcggactgaatcccag
agaacactggcagatgtatacagtatatggattgtatcgcttccccaatg
tttgtaaattcacagtatttggaaaactgccttcattttccagtgtggga
aaaactcttgctacctgtattacttgatctcagacccatacctgatggtt
cagtctgtccttaagttaaaagaattttgcttttctaatgttatactatt
tacctgtcagtgtattactgcaacttgaatcactcttttactgttgttgg
atataaacttatcctgtaccaatgtatttattaacacttgtattttatta
ttgagcatatcaataaaaatattaaaaaataacagattgttttttaccaa
aaaaaaaaaaaaa
>NR_026816 1
caacccactctctgtgctatgacttcattactctttcccagcccagccct
gggcaagccccttacgaagtctcaggctacctggatgaccaccctttctt
atgatgctgcaaggagggcaggtgggcagagccccgtgcatcctgggctc
aggccagggacccaagagcttgggagaagctggttctcagactgaaggcc
agagcccagcaccttgtcaccatcccggggagcatcatggcacacaacaa
ccagagccaaggctacagctagagagttgactcctctatttgagattgac
aggcctcggaagtcaaaataagtggtttcctagaccgggtcgagagcaag
tctctattggtcccaactgagttttttcagctggtttttcaaccaaacag
cacctcatctcccagtgaggggaagggaaggctgggctgagagcagcaag
gctgctcatctcacctctccccacccagccatgccagccgcctcacctgg
tggggagaggtgggcctcacctgggtcccctggcagtgctctgtgaaggg
tcttgacattgcactgtaataataaaggtgtgtgtgaagtatcaaaaaaa
>NR_027917 1
atgaagatgattgagcagcacaatcaggaatacagggaagggaaacacag
cttcacaatggccatgaacgcctttggagaaatgaccagtgaagaattca
ggcaggtggtgaatggctttcaaaaccagaagcacaggaaggggaaagtg
ctccaggaacctctgcttcatgacatccgcaaatctgtggattggagaga
gaaaggctacgtgactcctgtgaaggatcagtgcagctggggctctgtaa
ggacagatgttaggaaaactgagaaactagtttcactgagtgtgcagacc
tggtggactgctctaggcttcaaggcaatgttggctgcatttttggagaa
ccattattttgcttccagtatgttgccgacaatggaggcctggactctga
ggaatccttttcatatgaagaaaagctctggagactggaaagtccaaggt
cacagaggtgcatctggtgagagccttcttgctagtggggaatctcagca
gagtcctgaggtggcacagtattctgggaagcatcaagtgcagtgtcatc
ttatcgaggaggctctgcagatgctaagtggtggggatgaggatcacgat
gaagacaaatggccccatgacatgaggaatcatctggctggagaggccca
ggtgtag
>NR_002777 3
cttgtcctttcagaagatcagagacaagtgatatctgtgccaatttggcc
ttttcagtgttataattatggtgtcttgggatcccaatatttctcctaat
gtttccctgatgtgatactttgagagcccaggatgccagtacaataattg
aaattcacaaatgtctggtatcttgtccctcgtgccccatatattatctg
tggtttcggagagctcacttgtctcttatcttcagaaatgacagcacatg
aaatgttgtttggagccactgtcacatcaactgtagaaaaattaacaggt
cagctaagggatataatgtaactttatttgtgatatgagagaaatcttga
taaagacttgagagaaaactgggaggaaccttgtttagaagttataagga
ggggtaagttatgtgtgtcttggaaggagaatcataaatcttaaaacatg
agcctaatagagaacataaaattctaaaagataaagataataataatgat
aagccgcagggtggcttatgataatgtgacttctccttaccccagtagcg
tcggacatctgtcagctctgaaatgataaaaatgcacaatattgaataca
aacaaaggagtcagcactgaaattcattttctctccagattagggaaaga
gtaggtatgccctatggtagggcagtaaattgctgaatgatgagatgaaa
cagccacctagccatttcccattaaatataatcccatcagcagcagacaa
tatctatcctcccctatcccctctatccatatttggaaactgcaccctct
tccctatttagcaccctaacaccacttgaattccataaccctgttgttga
tctagctctcctcacctctaaacacttctagcattcctttcagatcagga
gctcgaaacactctcctttgattttttggaaaagtttctggcttcttcaa
ggtcacgttctccgtcctaagaattaaaaaaaaaaaaaaaaacttccaaa
cctttgaccttgtgtccgtggaacacccctgacttcctatcatttcaacc
cattgaggcacttgaactctcttcttggggatcctgagaagggagagtgc
aaactcttgaccctggaggcaaacaaaatgttctcatgtttgccttccca
cttactttctgtgagaacgtgggaagatcttaacctctcagaagcacagt
ttcttccttctaaaatgaaataattaacctctccctgtctacattcttaa
actcataggacataaaaaaaaaaaaaa
>NR_033769 1
ggcctctggcgggcctccagccagttagaccatttgactaggacgtgtgc
agctcagccagccacagaactggaatttttcaggagcagggggagcatgg
agtttggactttgctgagcaactgaagtggagcgcagagcttgctcgctt
aggagagggcagcatggatggcaaacaagggggcatggatgggagcaagc
ccacggggccaagagactctcctgacaccaggcttctttcaaacccattg
atgggtgattctgtgtctgattggtctcctatgcctgaagctgcaatcta
cggacatcagctgtctctgaggaacctcatcagccacgggtggcttgtga
acatcatcatggcagatcatgtttccccactccatgaagcctgtctcaga
ggtcatccctctcgtgtaaagattttattaaagcatggagctcaggtgaa
tggcgtgacaacagactggcacactccactgtttaatgtttgtatcagca
gcagctgggattatgcttctgcagcatggagccagcgttcaacctgagag
tgatctggcatcccccgtccatgaagctgctaggagaggccacgtggagt
gtgtcgactctcttacagcttataggggcaaaaatgaccataacatcagc
cacgtgggcacttcactgtatttggcttgtgaaaaccagcagatagcctg
tgtcaagaagcttctggagtcaggagcagacctgaacccagggagaggtt
ccccacttcatgcagtggccttcatgaaggccctcatgaaggattcccca
cttcatgcagtggccaggacagccagtgaagagctggcctgcctgctcat
ggattttggagcagacacccaggccaagaatgctgaaggcaaatgtcatg
tggagctggtgcctccagagagccctttgatccagctcttcttggagaga
gaagggcccccttcttttgatgcagttatgcctagaaatcagaagggctt
tggaatccagcagcatcataagataaccaaagtcgtcctcccagaggatc
tgaaatggtttctcctacatctttgtatgtatcaatggaatggattcaca
aacaatgtgaaaacattattgagtgttgtagccactagaattttaaaatc
aagttaggtttatagagtttgactagttttttcgattagatttgtattag
ttataaatttgttcatagagtttgactaattttttcgattagatttgtat
ttgttaaactctgaagccagagtttaaacacactgcatacgtttgtatga
ttagttagaaggcatgaagacttttttccctgcttggagactgtctaaaa
taacagctattgttttgcatatccactgcaggccaagcactttcagcatc
atctaattcagccctcacagcaactgggtcaatctgtccaatttcccagg
gcaaggatagaggagtcagattcaaatacaggttttctgacgttaactta
tgtgatgatttgatcaaagcaggattttccagcatcactatccttgttcc
atctctgctatatgggaatgaaaataaagaaatgtatttcaaaaaaataa
aaagaaaagaaaaacagagacggtc
>NM_016326 3
atgcgcgcaagagagcgggaagccgagctgggcgagaagtaggggagggc
ggtgctccgccgcggtggcggttgctatcgcttcgcagaacctactcagg
cagccagctgagaagagttgagggaaagtgctgctgctgggtctgcagac
gcgatggataacgtgcagccgaaaataaaacatcgccccttctgcttcag
tgtgaaaggccacgtgaagatgctgcggctggtgtttgcacttgtgacag
cagtatgctgtcttgccgacggggcccttatttaccggaagcttctgttc
aatcccagcggtccttaccagaaaaagcctgtgcatgaaaaaaaagaagt
tttgtaattttatattactttttagtttgatactaagtattaaacatatt
tctgtattcttccacatattttctgcagttattttaactcagtataggag
ctagaggaagagatttccgaagtctgcaccccgcgcagagcactactgta
acttccaagggagcgctgggagcagcgggatcgggttttccggcacccgg
gcctgggtggcagggaagaatgtgccgggatccgcctcagggatctttga
atctctttactgcctggctggccggcagctccg
>NM_181641 2
atgcgcgcaagagagcgggaagccgagctgggcgagaagtaggggagggc
ggtgctccgccgcggtggcggttgctatcgcttcgcagaacctactcagg
cagccagctgagaagagttgagggaaagtgctgctgctgggtctgcagac
gcgatggataacgtgcagccgaaaataaaacatcgccccttctgcttcag
tgtgaaaggccacgtgaagatgctgcggctggcactaactgtgacatcta
tgaccttttttatcatcgcacaagcccctgaaccatatattgttatcact
ggatttgaagtcaccgttatcttatttttcatacttttatatgtactcag
acttgatcgattaatgaagtggttattttggcctttgcttgtgtttgcac
ttgtgacagcagtatgctgtcttgccgacggggcccttatttaccggaag
cttctgttcaatcccagcggtccttaccagaaaaagcctgtgcatgaaaa
aaaagaagttttgtaattttatattactttttagtttgatactaagtatt
aaacatatttctgtattcttccacatattttctgcagttattttaactca
gtataggagctagaggaagagatttccgaagtctgcaccccgcgcagagc
actactgtaacttccaagggagcgctgggagcagcgggatcgggttttcc
ggcacccgggcctgggtggcagggaagaatgtgccgggatccgcctcagg
gatctttgaatctctttactgcctggctggccggcagctccg
>NM_001144931 1
gtttccgttcctctgcccgccatgccgttcctagagctgcacacgaattt
ccccgccaaccgagtgcccgcggggctggagaaacggctgtgcgccgtcg
ctgcctccatcttgggcaaacctgcagaccttgtgaacgtgacggtacgg
ccgggcctggccagggcgctgagcgggtccaccgagccctgcgcgcagct
gtccatctcctccatcggcgtagtgggcaccgccgaggacaaccgcagcc
acagtgcccacttctttgagtttctcaccaaggagctagccctgggccag
gaccggtgcgcaggggtagtaggcccggaatattattctaaaacacaatc
agagtactccattcctgctaacagtttaaagccaaacacctaggcaggcc
atttaggcttctgaatgactgggtcttgaccaggagagctgctgtctagg
ttttctcttcctgaccagttcctcaagagaaatgcaaaactagtgattaa
cagtaagagtcaggcagggcgcggtggctcacgcctgtaatcccagcact
ttgggaggccgag
>NR_029429 1
ggacaccaccccaaaatttcctagtcctctttgatacgggttcctccaat
ctgtagctgccctccatctactgccagagccaagtctgctccaatcacaa
caggttcaatcccagcctgtcctccaccttcagaaacgatggacaaacct
atggactatcctatgggagtggcagcctgagtgtgttcctgggctatgac
actgtgactgttcataacatcgttgtcaataaccaggagtttggcctgag
tgagaatgagcccagcgaccccttttactattcagactttgacgggatcc
tgggaatggcctacccaaacatggcagaggggaattcccctacagtaatg
caggggatgctgcagcagagccagcttactcagcccgtcttcagcttcta
cttcacctgccagccaacccgccagtattgtggagagctcatccttggag
gtgtggaccccaactttattctggtcagatcatctggacccctgtcagcc
cgtaactgtactggcagattgccatcgaggaatttgccatcggtaaccag
gccactggcttgtgctctgagggttgccaggccattgtggataccgagac
cttcctgc
>NR_026551 1
tgtggcctgagaggacggccaggactggccagaaaagagagggacgtggc
taaacgtgagggggcgtggccaagatggccgcgtgcgggatcctcgggta
ccgggagcgaacgaggaggttctggctcagtgcatccactctgggagagc
gtggacctggttcctgggggcgatcgccagtcacccatcaacattcggtg
gagggacagtgtttatgatcccggcttaaaaccactgaccatctcttatg
acccagccacctgcctccacgtctggaataatgggtactctttcctcgtg
gaatttgaagattctacagataaatcagctgcacttagtgcattggaacg
cagtcaaatttgaaaactttgaggatgcagcactggaagaaaatggtttg
gctgtgataggagtatttttaaagatttcggaaacttctggcagcccagt
gtctactggaaggcccaagccgcttgccagaaagctgcgccccgcccaaa
agcactgggttctgcagtccaggcccttcctcagctcccaggtccaggag
aactgcaaggtcacctacttccacaggaagcactgggtccgcatccggcc
cctccgcaccactcctcccagctgggactacacccgcatctgcatccaga
gagagatggtccccgcccgcatccgcgtcctgagagagatggtccccgag
gcctggaggtgctttcccaacaggctgccgctgctgagcaacatcaggcc
tgatttctccaaggctcccctggcctacgtgaagcggtggctttggaccg
cccgccacccccacagcctgtccgcagcctggtgaccgtgaaaatcgccc
cgccagagagcagaggaagcccgacgcccaggccatctgccttcaggtct
gtgatgagaaacggagtggcctgttccgttgtgcccaggtctaggccgct
gagcagagccctcactcccaggcagagttgtctgaatccttcct
>NM_181640 2
atgcgcgcaagagagcgggaagccgagctgggcgagaagtaggggagggc
ggtgctccgccgcggtggcggttgctatcgcttcgcagaacctactcagg
cagccagctgagaagagttgagggaaagtgctgctgctgggtctgcagac
gcgatggataacgtgcagccgaaaataaaacatcgccccttctgcttcag
tgtgaaaggccacgtgaagatgctgcggctggatattatcaactcactgg
taacaacagtattcatgctcatcgtatctgtgttggcactgataccagaa
accacaacattgacagttggtggaggggtgtttgcacttgtgacagcagt
atgctgtcttgccgacggggcccttatttaccggaagcttctgttcaatc
ccagcggtccttaccagaaaaagcctgtgcatgaaaaaaaagaagttttg
taattttatattactttttagtttgatactaagtattaaacatatttctg
tattcttccacatattttctgcagttattttaactcagtataggagctag
aggaagagatttccgaagtctgcaccccgcgcagagcactactgtaactt
ccaagggagcgctgggagcagcgggatcgggttttccggcacccgggcct
gggtggcagggaagaatgtgccgggatccgcctcagggatctttgaatct
ctttactgcctggctggccggcagctccg
>NM_016951 3
atgcgcgcaagagagcgggaagccgagctgggcgagaagtaggggagggc
ggtgctccgccgcggtggcggttgctatcgcttcgcagaacctactcagg
cagccagctgagaagagttgagggaaagtgctgctgctgggtctgcagac
gcgatggataacgtgcagccgaaaataaaacatcgccccttctgcttcag
tgtgaaaggccacgtgaagatgctgcggctggcactaactgtgacatcta
tgaccttttttatcatcgcacaagcccctgaaccatatattgttatcact
ggatttgaagtcaccgttatcttatttttcatacttttatatgtactcag
acttgatcgattaatgaagtggttattttggcctttgcttgatattatca
actcactggtaacaacagtattcatgctcatcgtatctgtgttggcactg
ataccagaaaccacaacattgacagttggtggaggggtgtttgcacttgt
gacagcagtatgctgtcttgccgacggggcccttatttaccggaagcttc
tgttcaatcccagcggtccttaccagaaaaagcctgtgcatgaaaaaaaa
gaagttttgtaattttatattactttttagtttgatactaagtattaaac
atatttctgtattcttccacatattttctgcagttattttaactcagtat
aggagctagaggaagagatttccgaagtctgcaccccgcgcagagcacta
ctgtaacttccaagggagcgctgggagcagcgggatcgggttttccggca
cccgggcctgggtggcagggaagaatgtgccgggatccgcctcagggatc
tttgaatctctttactgcctggctggccggcagctccg
>NR_002773 1
cagcaccacaccaggaccctccagaggctgtgagaaacatcctgcaccca
ggtcctctctatctgtttatcattgtctattttgtattctgcattcagaa
ccaagagcctgaagacgacccaggagctttagctatggctgtcttcatta
ttttgtccctgtttagtgttctggtgacaggcatgggtgaaggtggggct
gggagtgagaaaggaggtgagagggaatgtaagctgaaccagcttcccca
ttgcccctccgtatctcccagtgcccagccttggacacaccctggccaga
gccagctgtttgcagacctgagccgagaggagctgacggctgtgatgcgc
tttctgacccagcagctggggccagggctggtggatgcagcccaggccca
gccctcggacaactgtgtcttctcagtggagttgcagctgcctcccaagg
ctgcagccctggctcacttggacagggggagccccccacctgcccgggag
gcactggccatcgtcttctttggcaggcaaccccagcccaacgtgagtga
gctggtggtggggccactgcctcacccctcctacatgcgggacgtgactg
tggagcgtcatggaggccccctgccctatcaccgacgccccatgttgttc
caagagtacctggacatagaccagatgatcttcgacagagagctgcccca
ggcttctgggcttctccatcactgttgcttctacaagcgccggggacgga
acctggtgacaatgaccacggctccccgtggtctgcaatcaggggaccgg
gccacctagtttggcctctactacaacatctcgggcgctgggttcttcct
gcaccacgtgggcttggagctgctagtgaaccacaaggcccttgaccctg
cccgctggactatccagaaggtgttctatcaaggccgctactatgacagc
ctggcccagctggaggcccagtttgaggccggcctggtgaatgtggtgct
gatcccagacaatggcacaggtgggtcctggtccctgaagtcccctgtgc
ccccgggtccagctccccctctgcagttccatccccaaggcccccgcttc
agtgtccagggaagtcgagtggcctcctcactgtggactttctcctttgg
cctcggagcattcagtggcccaaggatctttgacgttcccttccaagggg
agagggtggcctatgaagtcagtgtccaggcggccttggccatctatgga
ggcaattctccttctgctctacgaagccggtacatagatagtggctttgg
cttgggccacttctccacgcccctgacccatggggtggactgcccctacc
tggccacctacgtggactggcacttcctttttgagtcccaggccgccaag
acaatacgcgatgccttttgtatatttgaacagaaccagggcctccccct
gcggcgacaccactcagatctctactcccactactttgggggccttgcgg
aaacggtgctggtcatcagatctgtgtctactatgctcaactatgactat
gtgtgggatatggtcttccaccctaatggggccatagaaatcagactcca
caccaccggctacatcagctcagcattcccctttggtgctgcccagaggt
atggaaacaaagtttcagagcacaccctgggcacggtccacacccacagc
gcccacttcaaggtggacctggatgtagcaggtaaggcatcctggcagag
gcaaaagtgctggaggggtgagctgaagtctccatgcctagctttaaaag
ttttcgttgggctgggagcagtagcttatgcctgtaagcccaacactttg
ggagactgaggggggtggatcacttgaggtcaggagttcaaaaccagcct
ggccaacatggcgaaatcctgtctgtactaaaaatacaaaaattagctgg
gcatgggtatgctgtaatcctagctactcgggaggctgaggcaggagaat
cacttgaatctgggagtcagaggttgcagtgagctgagattgagccactg
cactccatcctgcgtgactgaac
>NR_037806 1
attcccagtcacccactcactcagaaagccgggagtcatcggacaccttg
ctggtcagaggtcctgggggtggttttgaaccatcagagcttggactttt
ctgacttccccagcaaggatcttcccacttcctgctccctgtgttcccac
cctccagtgttggcacaggcccacccctggctccaccagagccagaagca
gaggtagaatcaggcgggccccgggctgcactccgagcagtgttcctggc
catctttgctactttcctagagaacccggctgttgccttaaatgtgtgag
agggacttggccaaggcaaaagctggggagatgccagtgacaacatacag
ttcatgactaggtttaggaattgggcactgagaaaattctcaatatttca
gagagtccttcccttatttgggactcttaacacggtatcctcgctagttg
gttttaagggaaacactctgctcctgggtgtgagcagaggctctggtctt
gccctgtggtttgactctccttagaaccaccgcccaccagaaacataaag
gattaaaatcacactaataacccctggatggtcaatctgataataggatc
agatttacgtctaccctaattcttaacattgcagctttctctccatctgc
agattattcccagtctcccagtaacacgtttctacccagatcctttttca
tttccttaagttttgatctccgtcttcctgatgaagcaggcagagctcag
aggatcttggcatcacccaccaaagttagctgaaagcagggcactcctgg
ataaagcagcttcactcaactctggggaatgctaccattttttttccaaa
gtagaaaggaagcacttctgagccagtgaccactgaaagatgaacactct
tcctgatcctctcctctagaattcatctcctcctgctagcagccgcgtcc
tggaggagcagcggatggggaatccattctgtttcttcctggtgtttagg
aagttgccccacacacagattgccccgatgtccaaccagaagaagtgaaa
ctgctgctgggtctggagaggtgaagacccgtggccagcttctgttgttg
ccatcggccattgctttttgttcgcttgcttttggttttgcaagaagagc
ggcctctgtctctgatctgcttcaaatcatcattccatcagtgacagaag
tggctgttccatcagtggtcgcagccagttcagctcctgcatccatcccc
aagtgttctgagtggaatttgaggcctccccaaccacctaccaaaaaagg
agggtgaaatgaaaggaagaagaaaaactcagcattctttcctctgacaa
agagtaaaacgacaaggaatatcggcctgaattctcttcccaagaagaaa
gaaagcacaccaacgcaggcatttgtcttctgtccatggtgctgaagttt
attcactttcaaaccactttcagtaacagcaaattctttagaaaaggaaa
atacagggaaagggataaacctcactgacttggaggaaatcaagaggagt
gagcacagcatcagaaagccccctggccccagactgcacccgctttcctg
gccctaccttgaaatccatcaggtctgcgttggacacggcattgtacatg
ggattagctctg 
```

任何帮助和输入将不胜感激。

感谢您花时间解决我的问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:30:55.280

我认为这种工作方式不是将序列分成三部分，而是`$pattern`在完整序列中查找所有出现的 ，并确定模式从哪三分之一开始。

内置变量`$-[0]`包含最近成功匹配的开始偏移量。

下面的代码做了我认为你想要的。它通过累积每个序列（当找到新序列 ID 或到达文件末尾时结束）并将其传递给`process_seq`子例程来工作。

该子例程获取序列的长度并计算字符串每三分之一末尾的偏移量。惯用语`sprintf '%.0f', $value`用于将小数值四舍五入到最近的字符位置。

该数组针对序列中的`@counts`每次出现进行调整。`$regex`要增加的元素`@counts`是通过将匹配的起始位置与`$-[0]`序列的三个段中的每一个的结束偏移量进行比较来确定的。

处理完每个序列后，会将其中的值`@counts`累加到其中`@totals`，以给出所有序列的总体数字。

显示了使用样本数据时程序的输出。总和是`(9, 1, 6)`。

```
use strict;
use warnings;

my $gpat = '[G]{3,5}';
my $npat = '[A-Z]{1,25}';
my $pattern = $gpat.$npat.$gpat.$npat.$gpat.$npat.$gpat; 
my $regex = qr/$pattern/i;

open my $fh, '<', 'sequences.txt' or die $!;

my ($id, $seq);
my @totals = (0, 0, 0);

while (<$fh>) {

  chomp;

  if (/^>(\w+)/) {
    process_seq($seq) if $id;
    $id = $1;
    $seq = '';
    print "$id\n";
  }
  elsif ($id) {
    $seq .= $_;
    process_seq($seq) if eof;
  }
}

print "Total: @totals\n";

sub process_seq {

  my $sequence = shift;
  my $length = length $sequence;

  my @offsets = map {sprintf '%.0f', $length * $_ / 3} 1..3;

  my @counts = (0, 0, 0);

  while ($sequence =~ /$regex/g) {
    my $place = $-[0];
    for my $i (0..2) {
      next if $place >= $offsets[$i];
      $counts[$i]++;
      last;
    }
  }

  print "@counts\n\n";
  $totals[$_] += $counts[$_] for 0..2;
} 
```

**输出**

```
NR_037701
0 0 1

NM_198399
1 0 0

NR_026816
1 0 1

NR_027917
0 0 0

NR_002777
0 0 0

NR_033769
1 0 0

NM_016326
1 0 1

NM_181641
1 0 1

NM_001144931
0 0 0

NR_029429
0 1 0

NR_026551
1 0 0

NM_181640
1 0 1

NM_016951
1 0 1

NR_002773
1 0 0

NR_037806
0 0 0

Total: 9 1 6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T03:47:37.050

我解除了 Borodin 的 process_seq 函数，但使用 Bio:SeqIO 逐序列读取文件，这比手动逐行读取和确定各种处理的逻辑具有优势。我认为这些优势是：

*   由许多其他人开发和测试的代码
*   只要有可能，如果通过 Bio::SeqIO 模块完成输出，则可以使用 Bio::SeqIO read ( `next_seq`) 方法读取结果文件。
*   我现在想不出的其他原因:-)

我想生物遗传代码模块的 BioPerl 包对于开始编程的生物学家来说一定是压倒性的。他可能不愿意尝试挖掘他开始构建程序所需的信息。[BioPerl wiki](http://www.bioperl.org/wiki/Main_Page)是一个很好的起点，尤其是 Howto 部分，然后是针对初学者和其他人的 how to。您会发现大部分（？）有用的代码示例。[Bio::Seq](http://search.cpan.org/~cjfields/BioPerl-1.6.901/Bio/Seq.pm)在开头有一些很好的代码示例，并且是大多数通用序列函数所在的地方。此外，对于输入/输出，使用了[Bio::SeqIO](http://search.cpan.org/~cjfields/BioPerl-1.6.901/Bio/SeqIO.pm)模块，它在手册的开头有示例。

```
#!/usr/bin/perl
use strict;
use warnings;
use Bio::SeqIO;

my $gpat = '[G]{3,5}'; 
my $npat = '[A-Z]{1,25}'; 
my $pattern = $gpat.$npat.$gpat.$npat.$gpat.$npat.$gpat;  
my $regex = qr/$pattern/i; 

my $in = Bio::SeqIO->new ( -file   => "fasta_dat.txt",
                           -format => 'fasta');
my @totals;
while ( my $seq = $in->next_seq() ) {
    process($seq);
}

print "Totals:   ";
print "@totals\n";

sub process {
    my $seq = shift;
    my @offset = map {sprintf '%.0f', $seq->length * $_ / 3} 1..3;
    my $sequence = $seq->seq;

    my @count = (0,0,0);
    while ($sequence =~ /$regex/g) {
        my $place = $-[0];
        for my $i (0 .. 2) {
            next if $place >= $offset[$i];
            $count[$i]++;
            last;
        }
    }
    print $seq->id, "\n@count\n";
    $totals[$_] += $count[$_] for 0 .. $#count; 
} 
```

# c# - 处理从 web 服务到 SQL Server CE 数据库的大数据

> ID：11202717
> 
> 赞同：0
> 
> 时间：2012-06-26T07:37:50.777
> 
> 标签：c#, web-services, sql-server-ce

在 Windows 移动应用程序中，我正在调用 Web 服务来检索大量数据，这些数据以数组列表的形式返回数据。之后，我将数据插入设备内的 SQL Server CE 数据库。现在它花费了太多时间，因为每个表都有很多表和大量数据。请建议一种使用 Array list 将数据插入 SQL Server CE 数据库的更快方法。

```
ce_command.Connection = Database.GetDbConnection();
ce_command.CommandType = CommandType.TableDirect;
ce_command.CommandText = "NHH_SOURCE";
System.Data.SqlServerCe.SqlCeResultSet rsSource;
SqlCeUpdatableRecord recSource;
rsSource = ce_command.ExecuteResultSet(System.Data.SqlServerCe.ResultSetOptions.Updatable);
recSource = rsSource.CreateRecord();
NPFWebService.WebServiceGetNHH_Source[] get_source = null;
get_source = npf_WS.GetSourceData();

if (get_source.Length > 0)
{
    for (int i = 0; i < get_source.Length; i++)
    {
        recSource.SetValue(0, get_source[i].sourceID);
        recSource.SetValue(1, get_source[i].sourceName.Replace("'", "''"));
        recSource.SetValue(2, get_source[i].organizationID);
        recSource.SetValue(3,get_source[i].transferF);
        recS‌​ource.SetValue(4, get_source[i].transferDate);
        rsSource.Insert(recSource); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:02:50.237

看起来您已经在使用最快的方法。您的表是否有索引（或索引） - 您可以在插入完成后通过删除和重新创建来节省一些时间

# azure - 术语“Enable-Migrations”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称

> ID：11202718
> 
> 赞同：6
> 
> 时间：2012-06-26T07:37:52.947
> 
> 标签：azure, entity-framework-migrations

当我在包管理器控制台中输入此命令：'Enable-Migrations'时，我收到此错误：

“‘Enable-Migrations’一词未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。请检查名称的拼写，或者如果包含 apath，请验证路径是否正确，然后重试. 在 line:1 char:18 + Enable-Migrations <<<< + CategoryInfo : ObjectNotFound: (Enable-Migrations:String) [], CommandNotFoundException + FullyQualifiedErrorId : CommandNotFoundException"

我正在使用带有 EF 4.0 的 VS2010，我只是在做非常简单的测试项目，用于使用 Windows azure 部署网站，但由于某种原因，我无法启用迁移。

有人有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-13T21:22:01.663

尝试重新启动 Visual Studio。它对我的情况有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T20:39:05.910

首先你需要VS2010 Professional SP1。

之后，请使用命令**Install-Package EntityFramework -IncludePrerelease**重新安装应用程序包，它应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:16:08.680

如果您拥有最新的 EntityFramework 并且“启用迁移”命令仍然显示错误重新安装/升级 NuGet，请参阅文档：[http ://docs.nuget.org/docs/start-here/installing-nuget](http://docs.nuget.org/docs/start-here/installing-nuget)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-08T13:09:25.763

我遇到了这个确切的问题，并且使用的是旧版本的 NuGet，对我有用的是通过扩展接口更新 NuGet。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T15:48:53.923

确保您**打开了一个解决方案**。我收到此错误是因为我尝试在未打开任何解决方案的情况下运行它。当我打开一个解决方案时，它运行良好

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-20T09:16:39.860

我正在处理已经安装了 Entity Framework 5.x 的现有代码库。一些解决方案建议升级到最新版本并运行，但安装最新版本删除`System.Data.Entity`. 再次添加引用会导致我使用已弃用 API 的旧代码出现错误。

*如果您已经在解决方案中安装了框架，则解决*方案将以管理员身份运行

 ** * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-16T22:28:38.870

“Install-Package EntityFramework”也可以正常工作*

# c# - 在 Kinect for windows sdk 1.5 中调整骨架骨骼位置

> ID：11202723
> 
> 赞同：2
> 
> 时间：2012-06-26T07:38:25.287
> 
> 标签：c#, wpf, kinect

我正在使用 Kinect for windows sdk 1.5 制作一个 wpf 应用程序，我想知道如何根据站在 kinect 前面的人来调整骨架的骨骼，我的意思是，如果我首先站立，骨架看起来还可以，如果我哥哥的脖子和胳膊比我高，骨架骨头没有改变。

那么如何调整呢？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:44:59.363

只需运行 Skeleton-Basics 示例（Windows 开发人员工具包）。当然，看看它的代码。它缩放骨架。

# sql - 不区分大小写的架构对象名称，带有区分大小写的比较

> ID：11202725
> 
> 赞同：2
> 
> 时间：2012-06-26T07:38:31.607
> 
> 标签：sql, sql-server, schema, collation, case-sensitive

有没有办法在 SQL Server 中将**不区分大小写**的架构对象名称与区分**大小写的比较混合在一起？**

我的数据库中的所有字符串列都使用 CS（区分大小写）排序规则，但是我无法在数据库级别切换到 CS 排序规则，因为它是由遗留应用程序管理的，该应用程序在其进行的查询中使用不一致的模式对象名称大小写。

例如，我需要以下查询才能成功执行并返回 0：

```
select count(*) from PeRsOn where 'A' = 'a' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:43:29.430

您还可以为文字指定排序规则，然后使用它代替在实例、数据库或列级别上指定的排序规则：

```
SELECT count(*) 
FROM PeRsOn 
WHERE 'A' COLLATE Latin1_General_CS_AS = 'a' COLLATE Latin1_General_CS_AS 
```

# java - Quartz 调度器开始和结束时间

> ID：11202731
> 
> 赞同：1
> 
> 时间：2012-06-26T07:38:58.260
> 
> 标签：java, quartz-scheduler

我已经开始在我的应用程序中使用石英调度程序。我想知道我们是否可以找到调度程序的实际开始时间以及调度程序结束的实际时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:17:51.430

您可以为此使用[JobListener](http://quartz-scheduler.org/api/2.0.0/org/quartz/JobListener.html)。

方法 jobToBeExecuted 在作业开始前运行，jobWasExecuted 在作业结束后运行。

编辑：

进一步扩展该问题：

1.  您可以使用[JobDetail](http://quartz-scheduler.org/api/2.0.0/org/quartz/JobDetail.html)对象来存储有关作业的数据（查看[getJobDataMap](http://quartz-scheduler.org/api/2.0.0/org/quartz/JobDetail.html#getJobDataMap%28%29)）。
2.  每次作业即将执行时都会**自动**调用 jobToBeExecuted 方法，它接受一个[JobExecutionContext](http://quartz-scheduler.org/api/2.0.0/org/quartz/JobExecutionContext.html)，它有一个[getJobDetails](http://quartz-scheduler.org/api/2.0.0/org/quartz/JobExecutionContext.html#getJobDetail%28%29)方法（参见第 1 节）
3.  jobWasExecuted 也是如此，只有在作业完成后才调用这个。

[在这里](http://www.quartz-scheduler.org/documentation/quartz-2.x/tutorials/)查看更多信息。

# css - 如何将鼠标悬停在css中的整个按钮上

> ID：11202732
> 
> 赞同：0
> 
> 时间：2012-06-26T07:38:59.040
> 
> 标签：css

当我将鼠标悬停在整个按钮上时，我希望它出现在整个按钮上。因为按钮有背景图片，所以我无法正确操作。按钮如下所示：

![在此处输入图像描述](../Images/dedb1769e4f20a8673231c7a8f6463e5.png)

CSS 如下所示：

```
#tablist{
  padding: 0px auto 0px auto;
  height: 32px;
}

#tablist li{
    display: block;
    width: 150px;
    height: 35px;
    float: left;
    border-radius: 7px; 
    -moz-border-radius: 7px; 
    -webkit-border-radius: 7px; 
    margin: 0px auto 0px auto;
    text-align: center;
    padding-top: 5px;
    cursor: hand; 
    cursor: pointer;
}

#tablist ul:hover{
 background-color: red;
}

.tablink{
  text-decoration:none;
}

.locked{
    background: url('../img/DashboardButtonsLocked.png') no-repeat;
    background-position:5px -85px;
}
.unlocked{
    background: url('../img/DashboardButtonsLocked.png') no-repeat;
    background-position:4px -2px;
} 
```

我该如何纠正？需要一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:41:52.643

尝试在悬停时覆盖背景属性：

```
#tablist ul:hover{
   background: red;
} 
```

这是一个演示：http: [//jsfiddle.net/taQfU/](http://jsfiddle.net/taQfU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:45:42.617

嘿，我想你应该给`#tablist li:hover`

像这样

```
#tablist li:hover{
 background-color: red;
} 
```

# assembly - MIPS 中的堆栈。addi $sp,$sp,-4 中的 4 的目的是什么？

> ID：11202736
> 
> 赞同：3
> 
> 时间：2012-06-26T07:39:09.297
> 
> 标签：assembly, mips

我正在研究一个使用过程的 MIPS 代码，但我不明白堆栈（sp）和帧指针（fp）的目的是什么。

例如，我研究的代码如下所示。它会打印您输入的数字之前的所有数字，例如 3\. 3,2,1,0，并显示它使用了多少堆栈大小。在此示例中，它使用了 16。我将其更改`-4`为`-8`，但出现错误。但是，我注意到其他一些使用`-8`.

问题是我错过了什么？

```
proc:
    addi $sp,$sp,-4     # 
    sw   $ra,0($sp)     # push $ra 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:42:42.003

在调用函数之前将返回地址压入堆栈。这就是代码的作用。-4 表示通过向上移动堆栈指针在堆栈上“分配”4 个字节，以便可以写入返回地址。

上面的解释假设了寄存器的正常使用。

在我看到代码之前，我无法对 -8 的作用做出结论。但它可能会为函数的参数保留空间。

# asp.net-web-api - Web API 和组合媒体类型

> ID：11202737
> 
> 赞同：0
> 
> 时间：2012-06-26T07:39:11.463
> 
> 标签：asp.net-web-api, media-type

是否支持处理组合媒体类型？例子：

```
Content-Type: application/contact+xml
Content-Type: application/document+json 
```

我知道有可能使用**mediatypeformatter** / ***mediatypemapping***，但还有别的吗？我是否必须自己映射媒体类型和类，例如使用自定义属性？

```
[MimeType("application/document+json")]
class Mydocument
{
} 
```

“MediaTypeHeaderValue”类似乎不支持这种组合媒体类型。有没有“最佳实践”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:41:24.077

[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.7)允许为媒体类型定义附加参数。

所以这可能是：

```
Content-Type: application/xml;.NET-Type=Customer 
```

`<type>/<sub-subtype>+<subtype>`（分隔）形式的子子类型的约定`+`不是规范的 AFAIK，而只是一个约定。

在任何情况下，您都需要在两端做一些工作来实现媒体类型组合的一致性。但是根据规范，拥有多个内容类型是错误的。

# javascript - 如何从弹出页面打开新的弹出窗口

> ID：11202739
> 
> 赞同：0
> 
> 时间：2012-06-26T07:39:26.750
> 
> 标签：javascript, html

> **可能重复：**
> [从子窗口打开子浏览器窗口](https://stackoverflow.com/questions/2813561/open-child-browser-window-from-child-window)

我有一份与我们公司签约的所有客户的名单！单击页面上的“合同详细信息”，将打开一个弹出窗口，其中包含我们与他签订的合同的详细信息。单击“付款详细信息”按钮，我希望它会在新的弹出窗口中打开有关付款的详细信息，但我不明白。

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:40:26.510

试试这个

```
window.open('your_url','child','height='500',width='500'); 
```

或者

```
window.open('your_url','mychild','height='500',width='500'); 
```

# ruby-on-rails - 如何在迁移中的表中创建“collat e nocase”列？

> ID：11202745
> 
> 赞同：2
> 
> 时间：2012-06-26T07:39:54.393
> 
> 标签：ruby-on-rails, sqlite, migration, collation

这个回答[https://stackoverflow.com/a/973785/1297371](https://stackoverflow.com/a/973785/1297371)的问题：[How to set Sqlite3 to be case insensitive when string comparison?](https://stackoverflow.com/questions/973541/how-to-set-sqlite3-to-be-case-insensitive-when-string-comparing) 告诉如何使用“COLLATE NOCASE”列创建表。

我的问题是如何在 Rails 迁移中创建这样的列？即如何从

```
create table Test
(
  Text_Value  text collate nocase
);

create index Test_Text_Value_Index
  on Test (Text_Value collate nocase); 
```

做：

```
create_table :tests do
  #WHAT HERE?
end
add_index #... WHAT HERE? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:34:06.593

我添加了新的迁移，在其中删除并重新创建了索引，例如：

```
class AddIndexToWordVariations < ActiveRecord::Migration

  def change

    remove_index :word_variations, :variation_word

    add_index :word_variations, :variation_word, :COLLATE => :NOCASE

  end

end 
```

'word_variations' 是我的表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-06T07:59:31.760

对于搜索的人，如果您的 rails 版本中仍然没有“collat​​e”（您将获得“Unknown key: :COLLATE”），那么您必须手动创建索引：

```
execute("create index Test_Text_Value_Index on Test (Text_Value collate nocase);") 
```

在你的'def up'中（'drop_table'也会在你的'def down'中删除索引）

# php - php数组，循环获取确切值

> ID：11202747
> 
> 赞同：-2
> 
> 时间：2012-06-26T07:40:10.417
> 
> 标签：php, facebook-graph-api, foreach

我在这里有这段代码，其中`$friends`变量是一个输出如下的数组：

```
{
  "id": "1149862205",
  "name": "name",
  "first_name": "first_name",
  "last_name": "last_name",
  "link": "https://www.facebook.com/username",
  "username": "username",
  "birthday": "07/12/1990",
  "hometown": {
    "id": "108618265828550",
    "name": "name"
  }, 
```

而`$fbfriendlikes`变量由 id 生成`$friends`并具有以下结构：

```
{
  "data": [
    {
      "name": "Penelope-ns-test",
      "category": "Community",
      "id": "187099821418102",
      "created_time": "2012-06-14T15:00:59+0000"
    }, 
```

现在，我需要在 我的代码中打印所有`$friends`类似于特定 id 的 id，如下所示：`$fbfriendlikes`

```
$friends = $facebook->api('/me/friends');
if (!empty($friends['data'])) {
    $size = variable_get('facebook_graph_pic_size_nodes','square');
    $protocol = (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == 'on') ? 'https' : 'http';
    foreach ($friends['data'] as $data) {
        $fbid = $data['id'];
        $fbfriendlikes[$fbid]=$facebook->api('/'.$fbid.'/likes'); 
        $fbname = $data['name'];
        $path = $protocol . '://graph.facebook.com/' . $fbid . '/picture?type=' . $size;
        $image = theme('image', array('path' => $path, 'alt' => $fbname));

        if ($fbfriendlikes["id"] != 184759054887922) {
            $return .= '<div class="fimage">'.$image.'</div>';
            $link = '<a href="'.$protocol . '://www.facebook.com/profile.php?id='.$fbid.'" target="_blank">'.$fbname.'</a>';    
            $return .= '<div class="flink">'.$link.'</div>';
            break;
        }
    }
} 
```

我知道**我必须做一个 foreach 循环，`$fbfriendslikes`但我似乎无法让它工作**。你能给我一个建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:45:09.793

试试这个：

```
$return = '';
$friends = $facebook->api('/me/friends');
if (!empty($friends['data'])) {
    $size = variable_get('facebook_graph_pic_size_nodes','square');
    $protocol = (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == 'on') ? 'https' : 'http';
    foreach ($friends['data'] as $data) {
        $fbid = $data['id'];
        $fbfriendlikes[$fbid]=$facebook->api('/'.$fbid.'/likes'); 
        $fbname = $data['name'];
        $path = $protocol . '://graph.facebook.com/' . $fbid . '/picture?type=' . $size;
        $image = theme('image', array('path' => $path, 'alt' => $fbname));

        $likes = false;
        foreach($fbfriendlikes['data'] as $like) {
            if($like['id'] == '184759054887922') { // maybe $like->id will have to be used instead...
                $likes = true;
                break;
            }
        }

        if (!$likes) {
            $return .= '<div class="fimage">'.$image.'</div>';
            $link = '<a href="'.$protocol . '://www.facebook.com/profile.php?id='.$fbid.'" target="_blank">'.$fbname.'</a>';    
            $return .= '<div class="flink">'.$link.'</div>';
        }
    }
    echo $return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:37:50.487

您需要检查循环内部以获取不喜欢的循环。

```
$return = '';
$friends = $facebook->api('/me/friends');
if (!empty($friends['data'])) {
    $size = variable_get('facebook_graph_pic_size_nodes','square');
    $protocol = (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == 'on') ? 'https' : 'http';
    foreach ($friends['data'] as $data) {
        $fbid = $data['id'];
        $fbfriendlikes[$fbid]=$facebook->api('/'.$fbid.'/likes'); 
        $fbname = $data['name'];
        $path = $protocol . '://graph.facebook.com/' . $fbid . '/picture?type=' . $size;
        $image = theme('image', array('path' => $path, 'alt' => $fbname));

        foreach($fbfriendlikes['data'] as $like) {
            $likes = false; // set var to check for like
            if($like['id'] == '184759054887922') { // check if they liked it
                $likes = true; // set var to true because they liked it
            }
            if (!$likes) { // test var to see if false (they did not like)
                // print this if they did NOT like it, otherwise do nothing
                $return .= '<div class="fimage">'.$image.'</div>';
                $link = '<a href="'.$protocol . '://www.facebook.com/profile.php?id='.$fbid.'" target="_blank">'.$fbname.'</a>';    
                $return .= '<div class="flink">'.$link.'</div>';
            }
        }// go on to next in loop

    }
    echo $return;
} 
```

# jquery - 如何在 jquery 中使用 asp.net 按钮或控件

> ID：11202748
> 
> 赞同：1
> 
> 时间：2012-06-26T07:40:10.480
> 
> 标签：jquery, asp.net

在以下示例中，如何使用 jQuery 访问 ASP.Net 按钮或控件？

```
window.onload = body_load;
function body_load() {
    var btn = document.getElementById('<%=btn.ClientID %>');
}

$("#btn").click(function () {
}

<asp:Button ID="btn" Width="134px" runat="server" Text="Fix" CssClass="cssbutton" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:43:09.833

您可以像这样在文档上使用 jquery 将事件与 asp.net 按钮绑定。

```
$(function(){

    $('#<%=btn.ClientID %>').click(function() {

      alert("clicked");
      return false; // returning false will stop from postback to server, true will cause postback

    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:43:16.853

尝试...

```
$("#<%= btn.ClientID %>").click(function () {
}); 
```

# c - C：使用 float 和 double 时出现奇怪的错误

> ID：11202752
> 
> 赞同：-1
> 
> 时间：2012-06-26T07:40:22.697
> 
> 标签：c, floating-point

> **可能重复：**
> [float 与 float 文字](https://stackoverflow.com/questions/1839422/strange-output-in-comparision-of-float-with-float-literal)
> [比较的奇怪输出 float 和 double 变量的比较](https://stackoverflow.com/questions/3988821/comparison-of-float-and-double-variables)

我在 C 中使用 double 和 float 进行了测试，但我无法解释原因。

```
 float x = 3.4F;
    if(x==3.4)
        printf("true\n");
    else printf("false\n");
    double y = 3.4;
    if (y==3.4)
        printf("true\n");
    else printf("false\n"); 
```

结果将是 False 和 True。请为我解释一下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T07:42:41.850

`x == 3.4`应该是`x == 3.4F`，否则 3.4 是双精度的（默认情况下）。总是比较喜欢，而不是苹果和橘子。

编辑：不同精度类型之间的比较结果是真还是假取决于编译器的浮点表示。

浮点数，无论是单精度 (float) 还是双精度，都是近似值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T07:54:36.113

3.4 不能精确地表示为双精度数，原因与三分之一不能使用有限位数精确地表示为以 10 为底的十进制数的原因相同——这种表示重复出现。

因此，双精度字面`3.4`量实际上是最接近 3.4 的双精度值。`3.4F`是最接近 3.4 的浮点值，但这与最接近的双精度值不同。

当您将浮点数与双精度数进行比较时，浮点数将转换为双精度数，这不会改变其值。

因此，`3.4F != 3.4`，正如`0.3333 != 0.33333333`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T07:43:37.953

不能保证结果是假的和真的，但基本的想法很简单：`3.4`类型为 double。当你将它分配给 a`float`时，它会被四舍五入。当您比较时，该四舍五入的数字将被提升回双精度数，不一定*与*`3.4`.

在第二种情况下，一切都是双倍的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T07:43:54.750

比较相等 浮点数学并不精确。像 0.2 这样的简单值不能用二进制浮点数精确表示，而浮点数的精度有限意味着运算顺序的微小变化可能会改变结果。不同的编译器和 CPU 架构以不同的精度存储临时结果，因此结果会因环境的详细信息而异。如果您进行计算，然后将结果与某个预期值进行比较，那么您将不太可能得到您想要的结果。

换句话说，如果你做一个计算然后做这个比较： if (result == expectedResult)

那么这个比较不太可能是真的。如果比较结果为真，那么它可能是不稳定的——输入值、编译器或 CPU 的微小变化可能会改变结果并使比较结果为假。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T09:13:34.323

作为提示，在大多数情况下，将浮点数（float 或 double）与 '==' 进行比较是一种不好的编程习惯，因为您可能永远不会使语句为真。这两个数字的最低有效位可能不同。

最好使用类似的东西：

`abs(x - y) < EQUALITY_MARGIN`

`EQUALITY_MARGIN` 是一个足够小的数字。

# c# - 使用 c# 驱动程序从 mongo 集合中获取 DateTime

> ID：11202753
> 
> 赞同：4
> 
> 时间：2012-06-26T07:40:23.320
> 
> 标签：c#, mongodb

我有以下对象：

```
public class QueueItem
{
    public long _id { get; set; }
    public SiteMapRequestState State { get; set; }
    public int WorkerId { get; set; }
    public DateTime QueuedTime { get; set; }
    public DateTime StartWorkTime { get; set; }
} 
```

当我将对象保存到 mongo 时，日期显示正确（DateTime 字段包含我插入的正确日期）。但是，当我拉这个对象时，我会得到不同的时间（-3 小时）。

例如：我使用 StartWorkTime = 6/26/2012 **10:00:00 AM**保存对象，然后从集合 StartWorkTime 获取对象时等于 6/26/2012 **7:00:00 AM**。这使得处理时间的计算错误。

我正在使用最新的 c# 驱动程序 (1.4.2.4500) 并在同一台机器上运行代码和 mongo 服务器。

什么会导致差异？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T08:00:26.010

经过一番挖掘，我发现了这篇文章： [http ://alexmg.com/post/2011/09/30/DateTime-precision-with-MongoDB-and-the-C-Driver.aspx](http://alexmg.com/post/2011/09/30/DateTime-precision-with-MongoDB-and-the-C-Driver.aspx)

[http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-DateTimeSerializationOptions](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-DateTimeSerializationOptions)

我需要用 [BsonDateTimeOptions(Kind = DateTimeKind.Local)] 属性标记 DateTime 属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T17:21:46.570

我曾经遇到过这个问题。请务必将 DateTimeKind 参数指定为 DateTimeKind.Utc

希望有帮助。

# android - Android - 如何放大位图

> ID：11202754
> 
> 赞同：2
> 
> 时间：2012-06-26T07:40:23.957
> 
> 标签：android, bitmap, android-imageview

我通常会下载尺寸较大的图像并使用图像视图缩小它们，但最近我试图处理我的应用程序无法在较小的网络连接上运行，所以我想知道如何在图像到达设备后增加图像的大小. 我尝试在图像视图中调整图像大小，但图像视图不会大于原始图像。我确信有一种非常简单的方法可以增加或放大设备上的图像，但我还没有遇到过。

那么.....我怎样才能增加图像的大小。我想把它炸毁并在图像视图中使用它，但我处理的图像只有 128X256，我想将它们扩展到大约 512X1024。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T07:50:52.387

尝试使用此方法：

```
public static Bitmap scaleBitmap(Bitmap bitmapToScale, float newWidth, float newHeight) {   
if(bitmapToScale == null)
    return null;
//get the original width and height
int width = bitmapToScale.getWidth();
int height = bitmapToScale.getHeight();
// create a matrix for the manipulation
Matrix matrix = new Matrix();

// resize the bit map
matrix.postScale(newWidth / width, newHeight / height);

// recreate the new Bitmap and set it back
return Bitmap.createBitmap(bitmapToScale, 0, 0, bitmapToScale.getWidth(), bitmapToScale.getHeight(), matrix, true);  } 
```

参考我的回答：[ImageView OutofMemoryException](https://stackoverflow.com/questions/11133645/imageview-outofmemoryexception/11133787#11133787)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:04:07.787

使用矩阵来调整位图的大小。

检查此 [调整大小位图](http://thinkandroid.wordpress.com/2009/12/25/resizing-a-bitmap/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T22:47:28.460

The functionality to scale image up or down is readily available via android.graphics library:

```
Bitmap bitmapScaled = Bitmap.createScaledBitmap(Bitmap bitmapOrig, int widthNew, int heightNew, boolean filter); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:02:30.617

如果要手动缩放位图，[`Bitmap.createScaledBitmap()`](http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap%28android.graphics.Bitmap,%20int,%20int,%20boolean%29)可以使用一种方法。
如果您希望 ImageView 处理此问题，则必须将`layout_width`/设置`layout_height`为其他内容，`wrap_content`否则它将始终缩小到位图的大小。然后您需要将`scaleType`属性更改为实际缩放位图的类型。

# mysql - 数据库设计，创建其他表，或添加类别字段？

> ID：11202755
> 
> 赞同：2
> 
> 时间：2012-06-26T07:40:24.420
> 
> 标签：mysql, database-design

我有一个`size`在这里命名的表，如下所示：

```
size id | size name 
   1            S
   2            M
   3            L
   4            XL 
```

但是当我发现尺寸必须有任何类别时，我感到很困惑，我的意思是像`cloth_size`, `pant_size`, `sheets_size`。那将是不同的。行将是`6XL`, `5XL`, `4XL`. 我想我应该像这样装箱`sheets_size`：

```
size id size name 
1            S
2            M
3            L
4            XL
5            XXL 
```

或者我应该`category`像这样创建表：

```
category_id category_name
1              cloth
2              dress
3              pants
4              sheets 
```

表`size`：

```
size id | size name   | category
1            S              1
2            M              1
3            L              1
4            XL             1  
5            XXL            4 
```

哪个更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:53:12.387

我相信最好和最简单的方法是有一个包含所有类别的表格，就像你描述的那样：

```
category_id  |   category_name
    1        |      cloth
    2        |      dress
    3        |      pants
    4        |      sheets 
```

然后有一张各种尺寸的桌子（从 S 到 6XL）

```
 size id   |   size name 
      1      |       S
      2      |       M
     ...     |      ...
      10     |      6XL 
```

这两个表将是多对多的关系，因为一个类别可以有多个大小，一个大小可以属于多个类别。这意味着您将需要第三个表来保存每个表的主键。

```
 category_id   |   size_id
        1        |      1
        1        |      2
       ...       |     ... 
```

这基本上转化为类别 1，有 1 号和 2 号，就像布有 S 号和 M 号一样。

# iphone - 两个 UIView 可以一键处理吗？

> ID：11202759
> 
> 赞同：2
> 
> 时间：2012-06-26T07:40:41.333
> 
> 标签：iphone, uiview

说，我有两个重叠的 UIView 层：

```
----view-top
  --view-below 
```

当我触摸屏幕时，我希望通过这两个视图来处理触摸，而不仅仅是一个。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:57:23.857

尝试这个：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.nextResponder touchesBegan:touches withEvent:event];
} 
```

这会将触摸发送到链中的下一个响应者，在这种情况下，是您的视图！

# python - python正则表达式在两个字符串或短语之间查找内容

> ID：11202764
> 
> 赞同：0
> 
> 时间：2012-06-26T07:40:55.860
> 
> 标签：python, regex

如何在 python 中使用正则表达式来捕获两个字符串或短语之间的内容，并删除该行中的所有其他内容？

例如，下面是一个以单行标题开头的蛋白质序列。如何根据短语“FlyBase_Annotation_IDs：”之后和下一个逗号“，”之前的规定从下面的标题中筛选出“CG33289-PC”？

我需要用这个简化的结果“CG33289-PC”替换标题，而不是破坏蛋白质序列（在所有大写的标题行下方找到）。

**这是每个蛋白质序列条目的样子 - 一个标题后跟一个序列：**

> >FBpp0293870 类型=蛋白质;loc=3L:join(21527760..21527913,21527977..21528076,21528130..21528390,21528443..21528653,21528712..21529192,21529254..2);1926 ID=FBpp0293870；名称=CG33289-PC；父=FBgn0053289,FBtr0305327；dbxref=FlyBase:FBpp0293870,FlyBase_Annotation_IDs:CG33289-PC；MD5=478485a27487608aa2b6c35d39a3295c；长度=405；释放=r5.45；物种=Dmel；MEMLKYVISDNNYSWWIKLYFAIIFALVLFVAVNLAVGIYNKWDSTPVII GISSKMTPIDQIPFPTITVCNMNQAKKSKVEHLMPGSIRYAMLQKTCYKE SNFSQYMDTQHRNETFSNFILDVSEKCADLIVSCIFHQQRIPCTDIFRET FVDEGLCCIFNVLHPYYLYKFKSPYIRDFTSSDRFADIAVDWDPISGYPQ RLPSSYYPRPGVGVGTSMGLQIVLNGHVDDYFCSSTNGQGFKILLYNPID QPRMKESGLPVMIGHQTSFRIIARNVEATPSIRNIHRTKRQCIFSDEQEL LFYRYYTRRNCEAECDSMFFLRLCSCIPYYLPLIYPNASVCDVFHFECLN RAESQIFDLQSSQCKEFCLTSCHDLIFFPDAFSTPFSQKDVKAQTNYLTN FSRAV

**这是所需的输出：**

> CG33289-PC
> MEMLKYVISDNNYSWWIKLYFAIIFALVLFVAVNLAVGIYNKWDSTPVII GISSKMTPIDQIPFPTITVCNMNQAKKSKVEHLMPGSIRYAMLQKTCYKE SNFSQYMDTQHRNETFSNFILDVSEKCADLIVSCIFHQQRIPCTDIFRET FVDEGLCCIFNVLHPYYLYKFKSPYIRDFTSSDRFADIAVDWDPISGYPQ RLPSSYYPRPGVGVGTSMGLQIVLNGHVDDYFCSSTNGQGFKILLYNPID QPRMKESGLPVMIGHQTSFRIIARNVEATPSIRNIHRTKRQCIFSDEQEL LFYRYYTRRNCEAECDSMFFLRLCSCIPYYLPLIYPNASVCDVFHFECLN RAESQIFDLQSSQCKEFCLTSCHDLIFFPDAFSTPFSQKDVKAQTNYLTN FSRAV

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:06:39.133

使用正则表达式：

```
>>> s = """>FBpp0293870 type=protein;loc=3L:join(21527760..21527913,21527977..21528076,21528130..21528390,21528443..21528653,21528712..21529192,21529254..21529264); ID=FBpp0293870; name=CG33289-PC; parent=FBgn0053289,FBtr0305327; dbxref=FlyBase:FBpp0293870,FlyBase_Annotation_IDs:CG33289-PC; MD5=478485a27487608aa2b6c35d39a3295c; length=405; release=r5.45; species=Dmel; MEMLKYVISDNNYSWWIKLYFAIIFALVLFVAVNLAVGIYNKWDSTPVII
GISSKMTPIDQIPFPTITVCNMNQAKKSKVEHLMPGSIRYAMLQKTCYKE
SNFSQYMDTQHRNETFSNFILDVSEKCADLIVSCIFHQQRIPCTDIFRET
FVDEGLCCIFNVLHPYYLYKFKSPYIRDFTSSDRFADIAVDWDPISGYPQ
RLPSSYYPRPGVGVGTSMGLQIVLNGHVDDYFCSSTNGQGFKILLYNPID
QPRMKESGLPVMIGHQTSFRIIARNVEATPSIRNIHRTKRQCIFSDEQEL
LFYRYYTRRNCEAECDSMFFLRLCSCIPYYLPLIYPNASVCDVFHFECLN
RAESQIFDLQSSQCKEFCLTSCHDLIFFPDAFSTPFSQKDVKAQTNYLTN
FSRAV"""
>>> import re
>>> print re.sub(r'.*FlyBase_Annotation_IDs:([\w-]+).*;', r'\1\n', s)
CG33289-PC
 MEMLKYVISDNNYSWWIKLYFAIIFALVLFVAVNLAVGIYNKWDSTPVII
GISSKMTPIDQIPFPTITVCNMNQAKKSKVEHLMPGSIRYAMLQKTCYKE
SNFSQYMDTQHRNETFSNFILDVSEKCADLIVSCIFHQQRIPCTDIFRET
FVDEGLCCIFNVLHPYYLYKFKSPYIRDFTSSDRFADIAVDWDPISGYPQ
RLPSSYYPRPGVGVGTSMGLQIVLNGHVDDYFCSSTNGQGFKILLYNPID
QPRMKESGLPVMIGHQTSFRIIARNVEATPSIRNIHRTKRQCIFSDEQEL
LFYRYYTRRNCEAECDSMFFLRLCSCIPYYLPLIYPNASVCDVFHFECLN
RAESQIFDLQSSQCKEFCLTSCHDLIFFPDAFSTPFSQKDVKAQTNYLTN
FSRAV
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:47:39.280

不是一个优雅的解决方案，但这应该适合你：

```
>>> fly = 'FlyBase_Annotation_IDs'
>>> repl = 'CG33289-PC'
>>> part1, part2 = protein.split(fly)
>>> part2 = part2.replace(repl, "FooBar")
>>> protein = fly.join([part1, part2]) 
```

假设`FlyBase_Annotation_IDs`在数据中只能出现一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T07:49:12.083

我不确定文件的格式，但这个正则表达式将捕获您示例中的数据：

```
"FlyBase_Annotation_IDs:([A-Z0-9a-z-]*);" 
```

使用`findall`函数获取匹配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T08:07:10.397

假设标题后有一个换行符：

```
>>> import re
>>> protein = "..."
>>> r = re.compile(r"^.*FlyBase_Annotation_IDs:([A-Z0-9a-z-]*);.*$", re.MULTILINE)
>>> r.sub(r"\1", protein) 
```

`([A-Z0-9a-z-]*)`正则表达式中的组提取任何字母数字字符和破折号。如果 id 可以有其他字符，只需添加它们。

# c# - 双缓冲清除背景为黑色

> ID：11202769
> 
> 赞同：0
> 
> 时间：2012-06-26T07:41:09.650
> 
> 标签：c#, winforms, background, system.drawing, double-buffering

我正在使用 BufferedGraphics 在我的表单上绘制，当我开始绘制它时，它会清除背景黑色，仅在我第一次绘制时。我正在使用图片框，并将其图像设置为新位图。

我只是想知道为什么当我调用`BufferedGraphics.Graphics.DrawEllipse()`它时会清除背景黑色！？

* * *

```
GraphicsBufferedContext = BufferedGraphicsManager.Current;

GraphicsBuffer = GraphicsBufferedContext.Allocate(CurrentGraphics, new Rectangle(0, 0, CurrentPictureBox.Image.Width, CurrentPictureBox.Image.Height));

//Mouse Move
 GraphicsBuffer.Graphics.DrawEllipse
 GraphicsBuffer.Render(); 
```

# c# - 如何从网络浏览器中删除自动换行和/或设置较小的字体大小

> ID：11202770
> 
> 赞同：1
> 
> 时间：2012-06-26T07:41:14.523
> 
> 标签：c#

我正在使用 2 个网络浏览器来比较文本，当行变得很长时它会包裹我的文本，我想删除它或降低我的字体大小以避免这种情况。

有人可以告诉我如何删除单词扭曲或更改字体大小`web Browsers`吗？

**下面的自动换行完全错过了我的比较：**

![在此处输入图像描述](../Images/9c2ca4e0e0388d0758ddc9702a39a268.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:50:45.883

据我所知，网络浏览器控件没有属性可以做到这一点。网页的呈现完全由网页本身控制。

如果您无法更改网页本身，则最好的办法是缓存本地版本并使用`WebBrowser.Document.ExecCommand()`. `WebBrowser.Document.InvokeScript()`也可以，但需要已经定义的 JS，所以我们必须继续手动添加脚本。

```
HtmlElement head = webBrowser.Document.GetElementsByTagName("head")[0];
HtmlElement script = webBrowser.Document.CreateElement("script");
IHTMLScriptElement element = (IHTMLScriptElement)script.DomElement;
element.text = "function adjust { document.getElementById('yourIdHere').style.whiteSpace='nowrap'; }";
head.AppendChild(script);
webBrowser.Document.InvokeScript("adjust"); 
```

只需通过查看网页的源代码找到文本的 div id 就可以了。如果它没有 div id，你可以使用其他 JS 方法（例如 getElementsByTagName）来查找它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:31:19.650

您无法从 Web 控件自身调整字体大小或包装文本。因此，您应该调整 Web 浏览器中元素的样式。

我在设置绿色和红色突出显示的同一位置调整了样式。

```
 html.Append("<ins style=\"white-space:nowrap; display:inline; background:#e6ffe6;\">")
        .Append(text)
        .Append("</ins>"); 
```

> “空白：nowrap；显示：内联；

上面的代码是我添加来删除自动换行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-21T19:31:07.520

受到 Pomster's Answer 的启发，这就是我为获得最佳结果所做的事情：

```
String.Format("<div style='white-space:nowrap; display:inline;'>{0}</div>",text); 
```

c# 6.0 版本：

```
$"<div style='white-space:nowrap; display:inline;'>{text}</div>"; 
```

# java - 玩 2.0.1 自定义字段构造函数...额外参数？

> ID：11202774
> 
> 赞同：9
> 
> 时间：2012-06-26T07:41:34.743
> 
> 标签：java, twitter-bootstrap, playframework-2.0

我是 play 框架的新手，想编写自己的 twitter bootstrap 字段构造函数，其中包括 bootstrap [icon-classes](http://twitter.github.com/bootstrap/base-css.html#icons)的使用。为了使这个动态我需要通过额外的参数传递图标类。这甚至可能吗？我尝试了以下和其他一些变体：

**index.scala.html**

```
@(loginForm: Form[Login])

@import helper._
@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.render) } 
@main("Akquise") {

<div class="container row">
    <div class="span4 offset5">
        @form(routes.Application.login(), args = 'class -> "well"){
            <h3>Anmeldung</h3>
            <fieldset>
            @inputText(loginForm("username"), '_label -> "Nutzername", '_iconcls -> "icon-user")
            @inputPassword(loginForm("password"), '_label -> "Passwort", '_iconcls -> "icon-key")
            </fieldset>

            <button type="submit" class="btn btn-primary">Login</button>            
        }
    </div>
</div>

} 
```

**twitterBootstrapInput.scala.html**

```
@(elements: helper.FieldElements)

@************************************************** 
* Generate input according twitter bootsrap rules *
**************************************************@
<label for="@elements.id">@elements.label</label>
<div class="input-prepend">
    <span class="add-on" style="margin-right:-5px;">
        <i class="@elements.iconcls icon-size"></i>
    </span>
    @elements.input
</div> 
```

使用这些参数，编译器会抛出此错误：

`value iconcls is not a member of views.html.helper.FieldElements`

如果这不起作用，我该如何传递其他参数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T08:00:01.267

您以正确的方式传递参数。但附加参数存储在`@elements.args`. 所以你必须使用`@elements.args.get('_iconcls)`来读取你的参数。

# ios - 集成后 ShareKit Facebook 错误...无法发布消息

> ID：11202776
> 
> 赞同：0
> 
> 时间：2012-06-26T07:41:41.490
> 
> 标签：ios, sharekit

我已经能够使用 Sharekit 集成 Facebook API。但目前我正在显示以下错误。有人可以就此向我提供线索，说明这里出了什么问题。错误的屏幕截图如下所示：

![脸书错误](../Images/f80924211082bb1a44a5db7549369d70.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:59:53.807

在 SHKConfig.h 文件中输入 Facebook APIID

# objective-c - 电影播放器 的激活状态错误（一）

> ID：11202777
> 
> 赞同：5
> 
> 时间：2012-06-26T07:41:45.797
> 
> 标签：objective-c, ios, sdk

你好！我正在从视频网址捕获视频的缩略图。我正在使用以下代码来捕获缩略图

```
MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc]initWithContentURL:movieURL];
[moviePlayer setControlStyle:MPMovieControlStyleFullscreen];
[moviePlayer setFullscreen:YES];
moviePlayer.useApplicationAudioSession = NO;
UIImage *image = [moviePlayer  thumbnailImageAtTime:(NSTimeInterval)1.0 timeOption: MPMovieTimeOptionNearestKeyFrame]; 
```

我为此使用线程。我收到以下错误：

> 电影播放器​​的激活状态错误（一）

有谁能够帮我？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T21:38:17.443

当您`init`使用电影播放器​​时，您已经拥有一个。MPMoviePlayerController 只能有一个。您可能正在循环执行此操作。您需要将最后一个设置为`nil`或不断重复使用同一个。

# c# - 删除数组（与 textchange 事件相关）

> ID：11202778
> 
> 赞同：1
> 
> 时间：2012-06-26T07:41:49.773
> 
> 标签：c#, arrays, winforms, visual-studio-2010

我正在使用 TextChanged 事件，当我按下键盘时，数字将进入数组...问题是：当我删除任何我想在数组列表中删除的数字时，但由于 textchange 事件我已经添加了一个元素只想删除元素并添加另一个元素

我该怎么做呢？

```
 long i;
    long[] array1 = new long[11];
    private void textBox1_TextChanged(object sender, EventArgs e)
    {
        try
        {
            array1[i] = long.Parse(textBox1.Text) % 10;
            //MessageBox.Show(array1[i].ToString());
        }
        catch
        {
            if (i > 10)
            {
                //MessageBox.Show("it can be bigger than 11");
            }
        }
        i++;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:52:39.333

您不能从列表中删除元素。使用`List<T>`收藏。

```
List<long> list=new List<long>();
list.Add(100);
list.Add(200);
//To remove a number
list.Remove(100); 
```

编辑：

您可以分隔输入文本的每个数字（添加 textBox1 和 listBox1 控件）：

```
 int[] ar;
    private void textBox1_TextChanged(object sender, EventArgs e)
     {
      ar = textBox1.Text.Select(p => p - 48).ToArray();
      listBox1.DataSource = ar;
     } 
```

# c# - 如何使用原始扩展名将图像保存到磁盘？

> ID：11202786
> 
> 赞同：1
> 
> 时间：2012-06-26T07:42:14.903
> 
> 标签：c#, wpf

我正在使用以下代码获取 wpf 中图像的源代码（图像类型为`System.Windows.Controls.Image`）。我想用原始扩展名将此图像存储到磁盘，可以吗？

`System.drawing.image`提供保存方法有类似的东西`System.windows.controls.image`吗？

```
Image image=new Image();
BitmapImage bitmap = new BitmapImage();
bitmap.BeginInit();
bitmap.UriSource = new Uri(openFileDlg.FileName);
bitmap.EndInit();               
image.Source = bitmap; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:48:49.090

看看[RenderTargetBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx)和[BitmapEncoder](http://msdn.microsoft.com/en-us/library/ms619208)类。

以下实用程序类允许您`Image`根据选择的格式将您的光栅图形图像保存为：

```
public static class VisualToImg
{

    static VisualToImg()
    {
        DPI = 96;
        PixelFormat = PixelFormats.Default;
    }

    public enum eImageFormat
    { Bitmap, Png, Gif, Jpeg, Tiff, Wmp }

    static public bool SaveAs(FrameworkElement element, String filePath,
        eImageFormat imageFormat)
    {
        switch (imageFormat)
        {
            case eImageFormat.Bitmap:
                return SaveUsingEncoder(element, filePath, new BmpBitmapEncoder());
            case eImageFormat.Gif:
                return SaveUsingEncoder(element, filePath, new GifBitmapEncoder());
            case eImageFormat.Jpeg:
                return SaveUsingEncoder(element, filePath, new JpegBitmapEncoder());
            case eImageFormat.Png:
                return SaveUsingEncoder(element, filePath, new PngBitmapEncoder());
            case eImageFormat.Tiff:
                return SaveUsingEncoder(element, filePath, new TiffBitmapEncoder());
            case eImageFormat.Wmp:
                return SaveUsingEncoder(element, filePath, new WmpBitmapEncoder());
        }

        return false;
    }

    static public double DPI
    { get; set; }

    static public PixelFormat PixelFormat
    { get; set; }

    static private bool SaveUsingEncoder(FrameworkElement visual, string filePath,
        BitmapEncoder encoder)
    {
        try
        {
            RenderTargetBitmap bmp = new RenderTargetBitmap((int)visual.ActualWidth,
                (int)visual.ActualHeight, DPI, DPI, PixelFormat);

            bmp.Render(visual);
            encoder.Frames.Add(BitmapFrame.Create(bmp));

            using (var stream = File.Create(filePath))
            { encoder.Save(stream); }

            return true;
        }
        catch (Exception)
        { return false; }
    }

} 
```

你可以用它来保存你的`Image`，**或任何其他`FrameworkElement`**：

```
VisualToImg.SaveAs(image, "image1.png", VisualToImg.eImageFormat.Png);
VisualToImg.SaveAs(image, "image2.bmp", VisualToImg.eImageFormat.Bitmap);
VisualToImg.SaveAs(image, "image3.jpeg", VisualToImg.eImageFormat.Jpeg); 
```

# android - 如何在 Eclipse v3.7.2 中启用断言

> ID：11202787
> 
> 赞同：0
> 
> 时间：2012-06-26T07:42:16.050
> 
> 标签：android, eclipse, assert

我似乎无法在我的 eclipse android 项目中获得断言。我已按照[此站点上的说明进行操作](http://www.cs.utexas.edu/~scottm/cs307/handouts/Eclipse%20Help/EclipseIntroduction.html#assertions)

但我仍然无法让他们工作。我的代码如下所示：

```
assert(false) : "PROGRAM ERROR - invalid dialog call"; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:46:05.937

Dalvik VM 默认忽略 Java 断言。要启用它，必须更改`debug.assert`属性，例如通过在命令行中调用命令：

```
adb shell setprop debug.assert 1 
```

请注意，之后您必须重新启动VM（强制停止应用程序：设置->应用程序->单击应用程序->强制停止）。

另请注意，该设置不是持久的（手机重启后断言将再次被禁用）。`/data/local.prop`然而，在有根手机上，有一种方法可以通过放置包含行的文件来使其持久化

```
debug.assert=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:55:56.160

您希望在上面使用什么语言？

我会尝试：

```
assertTrue("Expected true", true);

assertFalse("Expected false", true);

assertEquals("Expected equal", "same", "same"); 
```

六月：

[junit-docs/junit/framework/Assert.html](http://www.cs.laurentian.ca/badams/c2006/junit-docs/junit/framework/Assert.html)

# iphone - UISplitViewController 从右侧而不是左侧显示弹出框

> ID：11202789
> 
> 赞同：1
> 
> 时间：2012-06-26T07:42:29.133
> 
> 标签：iphone, cocoa-touch, ios5, ios4, uisplitviewcontroller

所以我实现了一个 iPad 应用程序，它实现了 UISplitView。我正在使用滑动手势来显示弹出控制器而不是条形按钮。问题是，默认情况下，弹出框从左侧滑入，我希望滑块从右侧滑入。我已经尝试找到解决方案，但还没有找到任何东西，所以我想我最好自己问一下，看看它是否可能。

我知道这存在： http: [//mattgemmell.com/2010/07/31/mgsplitviewcontroller-for-ipad/](http://mattgemmell.com/2010/07/31/mgsplitviewcontroller-for-ipad/) 但我不太热衷于使用第 3 方库。

如果您知道任何可能的解决方案或解决方法，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:42:42.413

猜猜除了使用定制的 uisplitview 之外别无他法……最后我不得不重新设计我的整个应用程序，这一次我不得不从头开始创建一个定制的 UISplitViewController。

苹果应该在公开方面更加灵活一些

# ios - 2个同名iOS开发者证书

> ID：11202790
> 
> 赞同：9
> 
> 时间：2012-06-26T07:42:30.463
> 
> 标签：ios, iphone, enterprise, iphone-developer-program

我们这里有一个小问题，我希望你们能帮助我！

**情况：** 我们注册了 Apples Developer Program（用于在 App Store 中分发应用程序）。自上周以来，我们还加入了企业计划（用于内部应用程序分发）。

**问题：** 我们继续开发和构建应用程序。但是我们不知道我们必须为不同的程序使用两个不同的开发者证书。我们现在有 2 个同名证书，每次我们想要构建应用程序时，XCode 都会产生一条错误消息，说“证书无法准确分配”。

**问题：** 我们如何更改其中一个开发者证书的名称？

非常感谢您提前提供的帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-04T17:14:38.253

您已经拥有默认登录钥匙串，因此您可以在登录钥匙串中添加一个证书。然后创建**具有不同名称的新单独钥匙串并将您的第二个证书添加**到该钥匙串。现在在您的 Xcode 目标设置中找到要用于目标的钥匙串证书路径并选择适当的钥匙串路径。

例如对于一个证书路径……/登录/……

对于另一个证书更改路径 ......../mynewkeychain/......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-26T10:13:29.680

我感觉到你的痛苦，因为我以前也遇到过同样的情况。您不能轻易更改证书的名称。苹果通常不允许这样做。[Dhawal 的回答](https://stackoverflow.com/a/20924073/1329214)是正确的，因为您必须将证书放入不同的钥匙串中。

如果要编写构建过程的脚本，则必须`security unlock-keychain`在调用之前解锁并锁定适当的钥匙串`xcodebuild`。这样就只能访问您要签名的一个证书。

有两个非常好的项目可以让管理钥匙串和构建变得更加容易：

*   [Openbakery 的 Gradle Xcode 插件](http://openbakery.org/gradle.html)
*   [rayh](https://github.com/rayh/xcoder)用于 rake的 xcoder

# c - 在 OpenGL ES 2.0 中将字节数组转换为图像

> ID：11202791
> 
> 赞同：1
> 
> 时间：2012-06-26T07:42:32.470
> 
> 标签：c, arrays, image, opengl-es, opengl-es-2.0

```
glViewport ( 0, 0, 320, 480 );
byte* memory 
glDrawElements ( GL_TRIANGLES, 6, GL_UNSIGNED_SHORT, 1 );
glReadPixels(0, 0, width, height, GL_RGB, GL_UNSIGNED_BYTE, memory); 
```

我想将使用从帧缓冲区读取的字节数组转换`glreadpixel()`为 PNG/JPEG 的任何图像：

该`printf`语句表明`glreadpixel()`正在正确读取内存。
我可以通过什么方式将图像写入文件，例如：“C:\image.jpg”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:14:42.587

OpenGL（包括 ES）仅接受 RAW 纹理数据（即 RGB 三元组、RGBA 四元组或其他一些预定义格式）或一些具有 s3tc（S3 纹理压缩）的数据，但不接受文件格式。与输出相同。

编辑：

为了确保元素实际出现在帧缓冲区中，glFlush() 调用必须在 glReadPixels() 调用之前完成。它将强制更新缓冲区。

添加：

如果您只需要将缓冲区内容转储到文件中，我建议您使用 .bmp 文件格式。开头只有一个 54 字节的标头，然后是直接从 OpenGL 读取的数据（但请注意 GL_UNPACK_ALIGNMENT）。

这是一个适合您的 WriteBMP() 函数：

```
void WriteBMP(const char *fname, int w,int h,unsigned char *img)
{
    FILE *f = fopen(fname,"wb");

    unsigned char bfh[54] = {0x42, 0x4d,
    /* bfSize [2]*/ 54, 0, 0, 0, /**/
    /* reserved [6]*/ 0, 0, 0, 0, /**/
    /* biOffBits [10]*/ 54, 0, 0, 0, /**/
    /* biSize [14]*/ 40, 0, 0, 0, /**/
    /* width [18]*/ 0, 0, 0, 0, /**/
    /* height [22]*/ 0, 0, 0, 0, /**/
    /* planes [26]*/ 1, 0, /**/
    /* bitcount [28]*/ 24, 0,/**/
    /* compression [30]*/ 0, 0, 0, 0, /**/
    /* size image [34]*/ 0, 0, 0, 0, /**/
    /* xpermeter [38]*/ 0, 0, 0, 0, /**/
    /* ypermeter [42]*/ 0, 0, 0, 0, /**/
    /* clrused [46]*/ 0, 0, 0, 0, /**/
    /* clrimportant [50]*/ 0, 0, 0, 0 /**/};
    int realw = w * 3, rem = w % 4, isz = (realw + rem) * h, fsz = isz + 54;
    //bfh.bfSize = fsz;
    bfh[2] = (fsz & 0xFF); bfh[3] = (fsz >> 8) & 0xFF; bfh[4] = (fsz >> 16) & 0xFF; bfh[5] = (fsz >> 24) & 0xFF;
    //bfh.biSize = isz
    bfh[34] = (isz & 0xFF); bfh[35] = (isz >> 8) & 0xFF; bfh[36] = (isz >> 16) & 0xFF; bfh[37] = (isz >> 24) & 0xFF;
    //bfh.biWidth = w;
    bfh[18] = (w & 0xFF); bfh[19] = (w >> 8) & 0xFF; bfh[20] = (w >> 16) & 0xFF; bfh[21] = (w >> 24) & 0xFF;
    //bfh.biHeight = h;
    bfh[22] = (h & 0xFF); bfh[23] = (h >> 8) & 0xFF; bfh[24] = (h >> 16) & 0xFF; bfh[25] = (h >> 24) & 0xFF;

    // xpels/ypels
    // bfh[38] = 19; bfh[39] = 11;
    // bfh[42] = 19; bfh[43] = 11;

    fwrite((void*)bfh, 54, 1, f);

    unsigned char* bstr = new unsigned char[realw], *remstr = 0; 
    if(rem != 0) { remstr = new unsigned char[rem]; memset(remstr,0,rem); }

    for(int j = h-1 ; j > -1 ; j--){
            for(int i = 0 ; i < w ; i++)
                    for(int k = 0 ; k < 3 ; k++) { bstr[i*3+k] = img[(j*realw+i*3)+(2-k)]; }
            fwrite(bstr,realw,1,f); if (rem != 0) { fwrite(remstr,rem,1,f); }
    }

    delete [] bstr; if(remstr) delete [] remstr;

    fclose(f);
} 
```

然后只需拨打电话：

```
WriteBMP("C:\\image.bmp", 320, 480, memory); 
```

如果您确实需要 .jpg/.png 文件，您可以转换生成的 .bmp 文件或使用 FreeImage 库或 libjpng/libpng 本身。它们都处理特定的文件格式。

# eclipse - 如何在eclipse中制作源附件？

> ID：11202793
> 
> 赞同：0
> 
> 时间：2012-06-26T07:42:40.167
> 
> 标签：eclipse

背景：我正在尝试使用 google analytics api's for java，来制作他们简单的“helloAnalyticsApi”java 代码。但是，我什至无法通过设置 Eclipse 等的基本步骤。

请查看以下链接： [https ://code.google.com/p/google-api-java-client/wiki/Setup#google-api-client](https://code.google.com/p/google-api-java-client/wiki/Setup#google-api-client)

在那个链接中，他们说：

> Blockquote Eclipse 用户希望将每个类 jar 的“源附件”设置为其对应的“-sources”jar

我不知道这是什么意思。请告诉我如何按照他们在上面的句子中所说的去做。我尝试了一个非谷歌教程，它奏效了。但是，当我尝试制作他们的示例 java 代码时，我遇到了很多我在另一篇文章中提到的错误。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:41:39.330

下载提供的 API。

1.  下载提供的 API。
2.  解压某个目录下的文件
3.  制作一个 Eclipse 项目，例如 Analytics。
4.  转到项目选项卡单击属性并单击构建路径
5.  单击添加外部罐子
6.  使用项目所需的罐子（并非所有罐子都是必需的）。

你应该都准备好了...

他们通过使用“Eclipse 用户将希望将每个类 jar 的“源附件”设置为其相应的“-sources”jar...”这一行使简单的步骤变得非常复杂。

# android - android中两次之间的差异

> ID：11202796
> 
> 赞同：-3
> 
> 时间：2012-06-26T07:42:42.740
> 
> 标签：android, date-difference

我想得到两次之间的差异。我使用以下方法计算此值。

[使用这个](https://stackoverflow.com/questions/635935/how-can-i-calculate-a-time-span-in-java-and-format-the-output)

但我想计算三个差异。例如，我有 6 次如下。

时间1，时间2，时间3，时间4

我想计算两次之间的差异

`long difference1=time2-time1;`
`long difference2=time4-time3;`
`long difference3=time6-time5;`

然后我想添加这三个差异。比如差1+差2+差3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:13:30.253

```
long difference1 = date2.getTime()-date1.getTime();  
long difference2 = date4.getTime()-date3.getTime();  
long difference3 = date6.getTime()-date5.getTime();

ling totalDifference = difference1 + difference2 + difference3; 
```

此 totalDifference 以毫秒为单位，您可以将其转换为 Day:Hour:Min:Seconds

```
days = (int) (totalDifference / (1000 * 60 * 60 * 24));  
hours = (int) ((totalDifference - (1000 * 60 * 60 * 24 * days)) / (1000 * 60 * 60));  
min = (int) (totalDifference - (1000 * 60 * 60 * 24 * days) - (1000 * 60 * 60 * hours))/ (1000 * 60); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:35:44.690

最好使用 Calendar 类和 GregorianClaendar 而不是 Date 类。

```
Date time1, time2, time3, time4;
[...]
GregorianCalendar difference12 = new GregorianCalendar(0,0,0,0,0);
difference12.set(GregorianCalendar.MILLISECNOD, time1.getTime() - time2.getTime());

GregorianCalendar difference34 = new GregorianCalendar(0,0,0,0,0);
difference12.add(GregorianCalendar.MILLISECNOD, time3.getTime() - time4.getTime());

Date diff12 = difference12.getGregorianChange();
Date diff34 = difference34.getGregorianChange();
GregorianCalendar sum = new GregorianCalendar(0,0,0,0,0);
sum.add(GregorianCalendar.MILLISECOND, diff12.getTime() - time34.getTime()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:52:51.490

这是你想要的吗？

```
long totalTime = (date2.getTime()-date1.getTime() + date4.getTime()-date3.getTime() + date6.getTime()-date5.getTime());

Date totalDifDate = new Date(totalTimeMillis); 
```

# sql-server - 连接不可用时在 Excel 中显示消息

> ID：11202801
> 
> 赞同：0
> 
> 时间：2012-06-26T07:43:03.733
> 
> 标签：sql-server, excel-2007

我正在使用 Excel 2007 中的连接字符串连接到 SQL Server 2005。我想为无法访问我们数据库的客户提供相同的 excel。现在是否可以显示有意义的消息并能够保留数据？我已经在命令按钮单击上编写了代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:14:07.323

是的，这是可能的。尝试使用这样的东西

```
 On Error Goto ErrHandler

---Your Connection Code Here ----

ErrHandler:
    MsgBox "Cannot Establish Connection.", vbExclamation 
```

# c# - 垃圾回收无法回收 BitmapImage？

> ID：11202807
> 
> 赞同：7
> 
> 时间：2012-06-26T07:43:22.760
> 
> 标签：c#, wpf, bitmapimage

我有一个应用程序（WPF），它创建了大量的 BitmapImages（比如 25000）。似乎框架使用了一些内部逻辑，因此在创建后消耗了大约 300 mb 的内存（150 个虚拟和 150 个物理）。这些 BitmapImage 被添加到 Image 对象中，它们被添加到 Canvas 中。问题是当我释放所有这些图像时，内存并没有被释放。如何释放内存？

应用程序很简单：Xaml

```
 <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Canvas x:Name="canvas" Grid.ColumnSpan="2"></Canvas>
        <Button Content="Add" Grid.Row="1" Click="Button_Click"/>
        <Button Content="Remove" Grid.Row="1" Grid.Column="1" Click="Remove_click"/>
    </Grid> 
```

代码隐藏

```
 const int size = 25000;
        BitmapImage[] bimages = new BitmapImage[size];
        private void Button_Click(object sender, RoutedEventArgs e)
        {
            var paths = Directory.GetFiles(@"C:\Images", "*.jpg");
            for (int i = 0; i < size; i++)
            {
                bimages[i] = new BitmapImage(new Uri(paths[i % paths.Length]));
                var image = new Image();
                image.Source = bimages[i];
                canvas.Children.Add(image);
                Canvas.SetLeft(image, i*10);
                Canvas.SetTop(image, i * 10);
            }
        }

        private void Remove_click(object sender, RoutedEventArgs e)
        {
            for (int i = 0; i < size; i++)
            {
                bimages[i] = null;
            }
            canvas.Children.Clear();
            bimages = null;
            GC.Collect();
            GC.Collect();
            GC.Collect();
        } 
```

这是ResourceManager添加图片后的截图 ![在此处输入图像描述](../Images/a44476cd4b7b8572e038ed481706a1b6.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T08:10:20.490

Wpf 中有一个错误，我们被 BitmapImage 对象不释放的地方咬住了，除非你冻结它们。[https://www.jawahar.tech/home/finding-memory-leaks-in-wpf-based-applications](https://www.jawahar.tech/home/finding-memory-leaks-in-wpf-based-applications)是我们发现问题的原始页面。它应该已在 Wpf 3.5 sp1 中修复，但在某些情况下我们仍然看到它。尝试像这样更改您的代码，看看是否是问题所在：

```
bimages[i] = new BitmapImage(new Uri(paths[i % paths.Length]));
bimages[i].Freeze(); 
```

我们现在经常冻结我们的 BitmapImage 对象，因为我们在分析器中看到 Wpf 正在侦听 BitmapImage 上的事件并因此保持图像活动的其他实例。

如果 Feeze() 调用不是对您的代码的明显修复，我强烈建议使用诸如 RedGate Memory Profiler 之类的分析器 - 这将跟踪一个依赖树，该树将向您展示将您的 Image 对象保留在其中的原因记忆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T04:30:54.863

对我有用的是：

1.  将 Image 控件的 ImageSource 设置为 null
2.  **在从 UI 中删除包含图像的控件之前运行 UpdateLayout()。**
3.  确保在创建 BitmapImage 时 Freeze() 并且没有对用作 ImageSource 的 BitmapImage 对象进行非弱引用。

我对每个图像的清理方法最终就像这样简单：

```
img.Source = null;
UpdateLayout(); 
```

我能够通过实验来实现这一点，方法是保留一个包含指向我创建的每个 BitmapImage 的 WeakReference() 对象的列表，然后在应该清理它们之后检查 WeakReferences 上的 IsAlive 字段以确认它们d实际上已经清理干净了。

所以，我的 BitmapImage 创建方法如下所示：

```
var bi = new BitmapImage();
using (var fs = new FileStream(pic, FileMode.Open))
{
    bi.BeginInit();
    bi.CacheOption = BitmapCacheOption.OnLoad;
    bi.StreamSource = fs;
    bi.EndInit();
}
bi.Freeze();
weakreflist.Add(new WeakReference(bi));
return bi; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-24T20:34:47.193

我按照AAAA给出的答案。导致内存被填满的原始代码是：

```
if (overlay != null) overlay.Dispose();
overlay = new Bitmap(backDrop);
Graphics g = Graphics.FromImage(overlay); 
```

插入AAAA的代​​码块，C#添加“using System.Threading;” 和 VB 添加“导入 System.Threading”：

```
if (overlay != null) overlay.Dispose();
//--------------------------------------------- code given by AAAA
Thread t = new Thread(new ThreadStart(delegate
{
    Thread.Sleep(500);
    GC.Collect();
}));
t.Start();
//-------------------------------------------- \code given by AAAA
overlay = new Bitmap(backDrop);
Graphics g = Graphics.FromImage(overlay); 
```

重复循环此块现在可以稳定且低内存占用。此代码使用 Visual Studio 2015 社区工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-28T09:20:31.630

我只是在讲述我关于回收 BitmapImage 内存的经验。我使用 .Net Framework 4.5。
我创建简单的 WPF 应用程序并加载一个大图像文件。我尝试使用以下代码从内存中清除图像：

```
private void ButtonImageRemove_Click(object sender, RoutedEventArgs e)
    {

        image1.Source = null;
        GC.Collect();
    } 
```

但它没有用。我也尝试了其他解决方案，但我没有得到答案。经过几天的挣扎，我发现如果我按两次按钮，GC就会释放内存。然后我只需编写此代码以在单击按钮后几秒钟调用 GC 收集器。

```
private void ButtonImageRemove_Click(object sender, RoutedEventArgs e)
    {

        image1.Source = null;
        System.Threading.Thread thread = new System.Threading.Thread(new System.Threading.ThreadStart(delegate
        {
            System.Threading.Thread.Sleep(500);
            GC.Collect();
        }));
        thread.Start();

    } 
```

这段代码刚刚在 DotNetFr 4.5 中测试过。也许您必须为较低的 .Net Framework 冻结 BitmapImage 对象。
**除非布局得到更新，否则编辑**
此代码不起作用。我的意思是如果父控件被删除，GC 无法回收它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T07:58:56.687

这仍然是一个数组

```
BitmapImage[] bimages = new BitmapImage[size]; 
```

数组是连续的固定长度数据结构，一旦为整个数组分配了内存，就无法回收其中的一部分。尝试使用其他数据结构（如`LinkedList<T>`）或更适合您的情况

# java - JVM 是否创建了在不同应用程序中实现的两个单独的类实例？

> ID：11202808
> 
> 赞同：1
> 
> 时间：2012-06-26T07:43:23.663
> 
> 标签：java, jar, jvm

想象一下两个简单的 java 应用程序。他们都实现了同一个 JAR 文件，其中包含一个像这样的枚举文件：

```
enum enum1{
   value1;
} 
```

在这两个应用程序中，我都打印了 enum1.value1 的哈希码。

```
System.out.print(enum1.value1.hashCode()); 
```

即使两个应用程序实现的 JAR 文件相同，由于哈希码不相等，JVM 是如何工作的？

为什么哈希码不相等，因为它是两个应用程序实现的同一个 JAR 文件？

**编辑**
我有两个访问数据库的应用程序。它们在同一个 JVM 中运行。我想实现一种锁定机制，以便当应用程序 1 写入数据库时​​，应用程序 2 必须等待轮到它（即当应用程序 1 释放锁时）。如果可能的话，我的解决方案是创建一个声明了一些 ReentrantLocks 的接口或一个应该充当锁并由两个应用程序使用的枚举。但是接口/枚举的实例在两个应用程序中应该是相等的，因为你只能同步同一个对象。

**编辑 2**
这是架构：

```
App1.jar              Commons.jar         App2.jar
App1Main.class        Commons.class       App2Main.class 
```

App1 和 App2 都包含 Commons.jar。commons.class 只是一个简单的单例类。在 App1 和 App2 中，我打印公共实例哈希码：

```
System.out.println(Commons.getInstance().hashCode()); 
```

两个 java 应用程序都像“java -jar app1”和“java -jar app2”一样运行，因此它们运行时有两个进程。

但是它们打印不同的哈希码，也就是我相信的（如果我错了，请纠正我），因为它们是由不同的类加载器加载的。但是当我在两个应用程序中打印类加载器时，神秘感就来了：

```
System.out.print(ClassLoader.getSystemClassLoader().hashCode()); 
```

然后哈希码在两个应用程序中是相等的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:46:20.877

目前尚不清楚您是否在谈论同一进程中的两个应用程序。即使你是，如果这两个应用程序有不同`ClassLoader`的实例加载同一个 jar 文件，就 JVM 而言，这两种枚举类型是*不同的类型。*如果您想要两个应用程序使用的进程中的*单一*类型，则必须由单个类加载器加载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:01:56.260

请参阅[Object.hashCode()的 Javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)

> hashCode 的一般合约是：
> 
> 1.  **每当在 Java 应用程序执行期间**对同一个对象多次调用它时，hashCode 方法必须始终返回相同的 integer ，前提是没有修改对象上的 equals 比较中使用的信息。**该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。**
>     
>     
> 2.  如果两个对象根据 equals(Object) 方法相等，则对两个对象中的每一个调用 hashCode 方法必须产生相同的整数结果。
>     
>     
> 3.  如果根据 equals(java.lang.Object) 方法，如果两个对象不相等，则不需要对两个对象中的每一个调用 hashCode 方法都必须产生不同的整数结果。但是，程序员应该意识到，为不相等的对象生成不同的整数结果可能会提高哈希表的性能。

还

> 这通常通过将对象的内部地址转换为整数来实现

所以你的结果对我来说似乎完全合法。如果您需要哈希码保持一致，也许您做错了，因为 API 不打算以这种方式使用。也许你可以说出你的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:32:17.943

enum 只是一个关键字，它使声明的类型类（例如 enum Day 意味着您将拥有一个像 Day 扩展 Enum 之类的类），类是对象的简单模板，它将在 JVM 中构造，具有自己的哈希码所以很明显，当您创建一个新对象时，您将获得新的哈希码，这就是您获得新哈希码的原因，请参阅以下链接以获取更多详细信息......

[http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

清楚地观察“所有枚举都隐式扩展 java.lang.Enum。由于 Java 不支持多重继承，因此枚举不能扩展其他任何东西”这一点很清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T07:47:29.057

将 JAR 视为静态*资源*，其中包含可以运行的应用程序的*配方。*当应用程序实际运行时，所有*资源*都使用特定于操作系统的规则加载到计算机的内存中。这些规则不强制将类加载到相同的虚拟内存地址中。

# ios - 如何使用双组件 UIPickerview 调用转换

> ID：11202814
> 
> 赞同：0
> 
> 时间：2012-06-26T07:43:34.283
> 
> 标签：ios, nsmutablearray, uipickerview

我将在下面发布我的代码作为快速说明我在我的 .h 文件中定义了这两个组件，并且我需要在选择某些行时调用一个操作。例如，如果组件中的行 == 0 和其他组件 == 1 这样做？iPhone编程仍然是新手，谢谢！

```
-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{
return 2;

}

  -(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:    
 (NSInteger)component{
if (component==kapickerComponent) {
    return [parentarray count];

}
if (component == kbpickerComponent) {
    return [subarray count];
}

}

 -(NSString*) pickerView:(UIPickerView *)pickerView titleForRow: 
(NSInteger)rowforComponent:(NSInteger)component{
if (component == kapickerComponent) {
    return [self.parentarray objectAtIndex:row];
}
if (component == kbpickerComponent) {
    return [self.subarray objectAtIndex:row];
}

}

 - (BOOL)shouldAutorotateToInterfaceOrientation:
(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row 
inComponent:(NSInteger)component {

 if ( row. kapickerComponent ==0, and row.kbpickerComponent==1 ??????????? ){
    float number1 = ([initamount.text floatValue ]);
    initamount.text = [[NSString alloc]initWithFormat:@" ", number1];
    double answer = number1 *12;
    result.text = [[NSString alloc]initWithFormat:@" ", answer];

 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:57:51.043

这里：

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row 
       inComponent:(NSInteger)component {
    if ([thePickerView selectedRowInComponent:kapickerComponent] == 0 && [thePickerView selectedRowInComponent:kbpickerComponent] == 1) {
        float number1 = [initamount.text floatValue];
        initamount.text = [[NSString alloc]initWithFormat:@"%f", number1];
        double answer = number1 *12;
        result.text = [[NSString alloc] initWithFormat:@"%f", answer];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:55:50.520

if ( kapickerComponent.row == 0 && kbpickerComponent.row ==1){// 你的代码在这里}

# php - Socket php服务器不显示从android客户端发送的消息

> ID：11202816
> 
> 赞同：2
> 
> 时间：2012-06-26T07:43:39.273
> 
> 标签：php, android, sockets

嗨，我是这类东西的新手，但这就是我想做的。

我正在尝试实现一个聊天应用程序，用户将在其中从网站发送他们的查询，并且一旦网站用户发送消息。它将出现在将回答他们的查询的网站所有者的 android 移动应用程序中。简而言之，我想实现实时聊天。

现在我只是简单地尝试将消息从 android 应用程序发送到 php 服务器。但是，当我在 chrome 中从 Dreamweaver 运行我的 php 脚本时，浏览器会继续加载，并且在我从客户端发送消息时不显示任何输出。

有时，php脚本会显示一些我从android（客户端）发送的输出。但我不知道它何时有效，何时无效。

所以我想在我从客户端发送这些消息后立即在 php 脚本中显示这些消息，反之亦然（没有为客户端实现反之亦然，但我们将不胜感激）。

这是我到目前为止所做的。

php脚本：

```
 <?php

 set_time_limit (0);
 $address = '127.0.0.1';

 $port = 1234;

 $sock = socket_create(AF_INET, SOCK_STREAM, 0);
 socket_bind($sock, $address, $port) or die('Could not bind to address');
 socket_listen($sock);

 $client = socket_accept($sock);
 $welcome = "Roll up, roll up, to the greatest show on earth!\n? ";
 socket_write($client, $welcome,strlen($welcome)) or die("Could not send connect string\n");

do{
$input=socket_read($client,1024,1) or die("Could not read input\n");
echo "User Says:  \n\t\t\t".$input;

if (trim($input) != "")
    { 
    echo "Received input: $input\n";
    if(trim($input)=="END")
    {
        socket_close($spawn);
        break;
    }
}
else{

$output = strrev($input) . "\n"; 
socket_write($spawn, $output . "? ", strlen (($output)+2)) or die("Could not write output\n");              
echo "Sent output: " . trim($output) . "\n";

}
}
while(true);

socket_close($sock);
echo "Socket Terminated";
?> 
```

安卓代码：

```
 public class ServerClientActivity extends Activity {
   private Button bt;
   private TextView tv;
   private Socket socket;
   private String serverIpAddress = "127.0.0.1";

   private static final int REDIRECTED_SERVERPORT = 1234;

   @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    bt = (Button) findViewById(R.id.myButton);
    tv = (TextView) findViewById(R.id.myTextView);

    try
    {
        InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
        socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);
    } 
    catch (UnknownHostException e1) 
    {
        e1.printStackTrace();
    }
    catch (IOException e1)
    {
        e1.printStackTrace();
    }

    bt.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
           try
           {
              EditText et = (EditText) findViewById(R.id.EditText01);
              String str = et.getText().toString();
              PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())),true);
              out.println(str);
              Log.d("Client", "Client sent message");
           }
           catch (UnknownHostException e)
           {
              tv.setText(e.getMessage());
              e.printStackTrace();
           }
           catch (IOException e) 
           {
              tv.setText(e.getMessage());
              e.printStackTrace();
           }
           catch (Exception e) 
           {
              tv.setText(e.getMessage());
              e.printStackTrace();
           }
        }

     });       

   }
 } 
```

我刚刚粘贴了 Android 的 onclick 按钮事件代码。编辑文本是我要输入文本的文本框。ip地址和端口与php脚本中的相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:22:21.623

我建议使用事件驱动框架来处理您的连接。

有一个相当不错的例子叫做[React](https://github.com/react-php/react)，但是它里面有很多其他的东西你可能想要去掉，这样你的应用程序就不会依赖数百个外部组件。

React 根据`libevent`您是否安装了消息循环使用消息循环`stream_select`。

您使用闭包处理事件，例如：

```
 $client->on('read', function($data) use ($client) {
        $client->onRead($data);
    }); 
```

有了这个，您将能够处理大量同时连接，并且不会占用您所有的 CPU。

**当**发生某些事情时，您的代码将被执行。

如果不出意外，看看它是如何工作的，你会更好地理解如何创建一个非阻塞事件驱动的套接字服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:08:56.087

首先 - 您的服务器一次只能处理**一个客户端连接**，这对聊天没有意义。

我看不到您如何处理 Android 端的套接字连接，但无论如何，只要您的脚本执行不会执行“ **socket_accept()** ”并等待连接，它就不会允许您再次连接。

您应该运行 1 个循环进程来获取新的客户端连接并将每个连接的客户端分叉到单独的进程中。

看看我在这里编写的基于相同原理的相同轻量级 PHP 服务器： [https ://github.com/webdevbyjoss/Aaaaa---space-ships-combat-multiplayer-game/blob/master/server/server .php](https://github.com/webdevbyjoss/Aaaaa---space-ships-combat-multiplayer-game/blob/master/server/server.php)

忽略与 Websockets 相关的“ **doHandshake()** ”和“ **WebSocketFrame::decode/WebSocketFrame::encode** ”，但其余的应该没问题。

通常它运行循环

```
while (true) 

    if (($msgsock = socket_accept ( $sock )) === false) {
        echo "socket_accept() failed: reason: " . socket_strerror ( socket_last_error ( $sock ) ) . "\n";
    break;
    }

    // We got a client connected, lets process it in separate thread
    if (($pid = pcntl_fork()) === -1) {
        echo "pcntl_fork() failed. Make sure you are on Linux sustem, but not on Windows\n";
        break;
    }

    if (!$pid) { // client
        handleClient($msgsock);
        exit();
    }

    // parent server will wait to accept more clients connections in new loop
} 
```

在**handleClient()**函数中，您应该有一个单独的循环来与客户端通信。

```
while (true) {
    if (false === ($buf = socket_read ( $msgsock, 2048, PHP_BINARY_READ ))) {
        echo "socket_read() failed: reason: " . socket_strerror ( socket_last_error ( $msgsock ) ) . "\n";
        return;
    }

    if (empty($buf)) { // do disconnection check
        echo "Client disconnected\n";
        return;
    }

   // -------------------------------------------------------------
   // PUT YOUR BUSINESS LOGIC HERE
   // TO HANDLE MESSAGES OF THE CHAT AND GENERATE RESPONSE TO USER
   // I RECOMMEND TO USE SOMETHING LIKE MEMCACHE/REDIS/MONGO/MYSQL/TXT-FILES
   // FOR MULTIPROCESS DATA INTERCHANGE
   // -------------------------------------------------------------

// transfer data to client
    socket_write($msgsock, $returnText, strlen($returnFrame));
}

socket_close ( $msgsock ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T03:40:25.527

您的地址 127.0.0.1 将解析为运行代码的机器。所以应用程序实际上会尝试连接到自身。在 MSDOS 控制台上键入`ipconfig /all`并改用该地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:20:29.497

您是否尝试在发送到服务器之前将 '\r\n' 添加到 EditText 的值中？我认为问题不在于客户端和服务器之间的连接，因为连接失败时它不会显示错误。
也许在您的情况下**，socket_read($client,1024,1)** 必须在“\r\n”处停止读取。

**更新**：您的本地 ip 可能会导致连接错误。看看[这个链接](https://stackoverflow.com/questions/3243654/android-emulator-and-local-site)

# c - 抑制 WindRiver (Diab) 编译器中的指令重新排序

> ID：11202817
> 
> 赞同：4
> 
> 时间：2012-06-26T07:43:39.043
> 
> 标签：c, compiler-optimization

我正在寻找在 WindRiver C 编译器（AKA Diab C (?)）中禁止指令重新排序的正确且可接受的方法。问题是我必须在同一个函数中多次写入硬件寄存器，并且我不希望优化器重新排序序列或更糟，将多个写入收集到一个中。请不要推荐“volatile”，因为我不想依赖这个无形且不可靠的先决条件（主要是因为定义可能不在我的控制之下）。我目前正在使用一个空的内联汇编语句：

```
 asm volatile (" "); 
```

作为代理，因为编译器文档说这将防止重新排序，OTOH 也许有一种更常见的方式，每个 WindRiver C 的体面用户都应该知道。

提前致谢

# c# - Firebird 在 .NET 中发送所有事件

> ID：11202818
> 
> 赞同：4
> 
> 时间：2012-06-26T07:43:44.093
> 
> 标签：c#, .net, events, firebird, firebird-.net-provider

正常的firebird服务器是否会在引发任何注册事件时发送所有注册事件计数？

以火鸟网站为例，我这样做：

```
class FirebirdListenerTest
{
    public FirebirdListenerTest()
    {
        try
        {
            FbConnectionStringBuilder cs = new FbConnectionStringBuilder();
            cs.DataSource = "localhost";
            cs.Database = "C:\\FIREBIRD\\TEST.GDB";
            cs.UserID = "SYSDBA";
            cs.Password = "masterkey";
            cs.Charset = "NONE";

            FbConnection connection = new FbConnection(cs.ToString());
            connection.Open();

            FbRemoteEvent revent = new FbRemoteEvent(connection);
            revent.AddEvents(new string[] { "text_changed", "text_inserted", "justtest_event" });

            // Add callback to the Firebird events
            revent.RemoteEventCounts += new FbRemoteEventEventHandler(EventCounts);

            // Queue events
            revent.QueueEvents();

            Console.ReadLine();
            connection.Close();
        }
        catch (Exception e)
        {
            Debug.WriteLine(e.ToString());
        }
    }

    static void EventCounts(object sender, FbRemoteEventEventArgs args)
    {
        Console.WriteLine("Event {0} has {1} counts.", args.Name, args.Counts);
    }
} 
```

在这样的代码中，如果引发任何事件，我总是会得到所有事件的计数。它应该如何工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:02:39.900

是的。您可以根据 Counts 属性对其进行过滤，它可以是 0-n。

# javascript - 如何使用 OpenLayers 在地图上划线？

> ID：11202821
> 
> 赞同：0
> 
> 时间：2012-06-26T07:43:53.237
> 
> 标签：javascript, map, openlayers

是否可以使用 OpenLayers 在地图上划线？我尝试了一些示例，所有示例都是通过单击绘制的。我想通过刮擦来画画，就像在纸上画画一样。是否可以通过 OpenLayers 实现？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:47:34.710

[http://openlayers.org/dev/examples/draw-feature.html](http://openlayers.org/dev/examples/draw-feature.html)在按住 SHIFT 键的同时选择画线和划痕。

# mysql - 获取最多用户

> ID：11202822
> 
> 赞同：1
> 
> 时间：2012-06-26T07:43:54.300
> 
> 标签：mysql

我有一张满是用户的表，使用下面的查询，我可以得到最高分除以分数的结果：

`SELECT MAX(points/score) FROM table`

但是，我想获取与结果关联的用户；有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:49:04.827

```
SELECT * 
  FROM table
 ORDER BY points/score DESC
 LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:47:11.480

只需排序`points/score`并将结果限制为一个：

```
SELECT
  *
FROM
  table
ORDER BY
  points/score DESC
LIMIT 1 
```

# javascript - 为什么 v8 源代码的 JS 文件中的某些函数调用前面有一个 %？

> ID：11202824
> 
> 赞同：11
> 
> 时间：2012-06-26T07:44:07.330
> 
> 标签：javascript, syntax, v8

`%`我在很多代码中看到了。你能向我解释它的目的或它的作用吗？

编辑：我知道数学中的操作数，`13 % 10 = 3`但我看到的是`return %foo`.

[查看v8 源文件](https://github.com/v8/v8/blob/5.7.228/src/js/promise.js)时遇到此问题

为什么某些函数调用前面有一个 % 符号？

```
%CheckIsBootstrapping();
//---
// Only used by async-await.js
function RejectPromise(promise, reason, debugEvent) {
  %PromiseReject(promise, reason, debugEvent);
}
//---
var callbacks = %create_resolving_functions(promise, debugEvent); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T08:13:15.287

根据您在评论中提供的链接，该`%`字符似乎在某些[V8 JavaScript 引擎](http://code.google.com/p/v8/)源代码中用于指示将在解析 JavaScript 源代码时执行的 C++ 运行时方法。

例如，[string.js](http://code.google.com/searchframe#W9JxUuHYyMg/trunk/src/string.js&q=StringBuilderConcat%20package:v8%5C.googlecode%5C.com&ct=rc&cd=5&sq=)中的行：

```
return %StringBuilderConcat(parts, len + 1, ""); 
```

当解析器遇到时，该`StringBuilderConcat`方法将被执行。[您可以在runtime.h](https://github.com/v8/v8/blob/master/src/runtime/runtime.h#L826)中找到 V8 JavaScript 文件可用的运行时方法列表（注意，我没有使用 C++ 的经验，所以就我所知，这与*string.js*`StringBuilderConcat`中引用的方法无关，但我认为这是同一件事）：

 *```
#define RUNTIME_FUNCTION_LIST_ALWAYS_1(F) \
  /* Property access */ \
  F(GetProperty, 2, 1) \
  F(KeyedGetProperty, 2, 1) \
  /* ... */
  F(StringBuilderConcat, 3, 1) \
  /* ... */ 
```

如前所述，`return %foo`会在 JavaScript 中引发 SyntaxError。*

# jquery - goMap jquery插件重绘地图

> ID：11202825
> 
> 赞同：2
> 
> 时间：2012-06-26T07:44:07.873
> 
> 标签：jquery, jquery-plugins, google-maps-api-3

我正在使用[goMap](http://www.pittss.lv/jquery/gomap/) jQuery 插件来集成 Google Maps api v3。我想重绘地图时遇到问题。我有 2 个用于输入纬度和经度的输入框，然后是一个文本链接，我在该链接上触发 goMap javascript 代码......当第一次调用地图时，地图呈现正常，但是如果我更改纬度/经度值并再次调用相同的代码地图没有重绘到新坐标...我的代码看起来像

```
<input id="form_office_latitude" class="span4 office_latitude" type="text"  name="office_latitude" value="">
<input id="form_office_longitude" class="span4 office_longitude" type="text" name="office_longitude" value="">
<a class="check-map" href="javascript:{};">Preveri zemljevid</a>

$('.check-map').live('click', function(){
        $("#map_canvas").goMap({ 
            maptype: 'ROADMAP',
            zoom: 15,
            markers: [{
                icon: base_url+'assets/img/marker.png',
                latitude: $('.office_latitude').val(), 
                longitude: $('.office_longitude').val(), 
                id: 'test', 
                html: { 
                    content: 'Hello Word!', 
                    popup: true 
                }
            }], 
            hideByClick: false 
        });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:32:31.210

我不是 goMap 插件方面的专家，但您可能不想像现在这样重绘或重新创建地图（构建一个全新的地图）。相反，您想使用以下方式重新定位地图：

```
var center = new google.maps.LatLng($('.office_latitude').val(),
                                    $('.office_longitude').val());
$.goMap.map.setCenter(center); 
```

# objective-c - 是否可以检测 NSObject 的属性名称

> ID：11202835
> 
> 赞同：0
> 
> 时间：2012-06-26T07:45:18.483
> 
> 标签：objective-c

我有一个 NSObject

```
@interface MyObject : NSObject 
@property bool pName1;
@property NSString *pName2; 
```

我希望检测函数中属性的名称(pName1,pName2..)

```
-(void)dosomething:(id)a 
```

可能吗？欢迎任何评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:58:07.930

您可以使用运行时函数获取给定类的属性列表`class_copyPropertyList()`。还有一个运行时函数`property_getName()`将为您提供给定属性的名称。使用这两个函数，您可以获得给定对象的所有属性的名称。

# c# - 无法单击或选择控制 XAML 设计

> ID：11202836
> 
> 赞同：2
> 
> 时间：2012-06-26T07:45:23.630
> 
> 标签：c#, wpf, xaml, controls

我在 Window 7 上的 VS2010 WPF 上开发。我有一个项目不会引发任何错误或警告，编译正常，XAML 设计显示正常，但我无法在 XAML 设计视图中单击或选择任何控件。

是什么原因，或者我怎样才能找出问题或可能的异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-15T03:05:22.603

有同样的问题，我之前可以在 VS2012 WPF 项目中选择控件，但有些东西发生了变化。

算出它是 a `TabItem`in a `TabControl`，我已将可见性设置为折叠

```
<TabItem Visibility="Collapsed"> 
```

隐藏顶部的选项卡标题。将`TabItem`可见性设置回可见

```
<TabItem Visibility="Visible"> 
```

`TabItem`允许在 XAML 设计视图中选择包含在 中的控件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T12:16:42.540

我通过将一个空网格作为我的 "main" 的最后一个子元素来重现了这种行为`Grid`。在 VS2010 的设计器中，我无法选择任何`Button`s. 这可能是你的问题吗？

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Content="Button" Height="52" HorizontalAlignment="Left" Margin="93,74,0,0" Name="button1" VerticalAlignment="Top" Width="113" />
        <Button Content="Button" Height="38" HorizontalAlignment="Left" Margin="280,100,0,0" Name="button2" VerticalAlignment="Top" Width="96" />

        <Grid></Grid>             <!--   THIS IS THE PROBLEM!!!  -->

    </Grid>     
</Window> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T13:52:32.863

最近有这个，构建项目似乎解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:02:32.477

你的工具箱里有指针吗？有时工具箱内的指针项不见了。所以下一个项目（边框）被选中。因此，当您尝试单击时，实际上是在尝试为设计添加边框。您可以尝试重置工具箱。但请注意，自定义工具已经消失，必须再次添加。（我无法对这个问题发表评论，所以这就是我“回答”的原因）

# c# - asp.net 随机图片源

> ID：11202843
> 
> 赞同：0
> 
> 时间：2012-06-26T07:45:55.257
> 
> 标签：c#, asp.net, random, image

我想在加载页面时加载随机图像，但不确定 asp:image 或 img 的语法是什么。

这些文件都命名相同，但最后有一个数字，所以我可以这样做：

```
string Get_RandomImage()
{
   Random random = new Random();
   return "~/images/image" + random.Next(1, 23) + ".jpg";
} 
```

但是图像在里面`<ProgressTemplate>`，所以我不能只去 image.ImageURL = 后面代码中的东西。

如何调用我在 aspx 页面上声明 asp:Image 的随机方法？

```
ImageURL='<%#Get_RandomImage()%>' 
```

不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:01:41.603

首先，您需要`random`在方法之外初始化变量`Get_RandomImage`，使其成为静态并将该方法的可访问性级别更改为`protected`. 此外，只有在页面或图像的父控件上`ImageURL='<%#Get_RandomImage()%>`调用时，才能使用此类表达式。`DataBind`

```
<asp:UpdateProgress runat="server" >
     <ProgressTemplate>
          <asp:UpdatePanel runat="server" UpdateMode="Always" >
               <ContentTemplate>
                    <%--Put your image here--%>
                    <%= DateTime.Now %>
               </ContentTemplate>
          </asp:UpdatePanel>
     </ProgressTemplate>
</asp:UpdateProgress> 
```

# ajax - 如何在谷歌浏览器中调试失败的 ajax 请求？

> ID：11202846
> 
> 赞同：22
> 
> 时间：2012-06-26T07:46:05.420
> 
> 标签：ajax, debugging, google-chrome

我有一个 web 应用程序，它在使用 google chrome 的 ajax 请求时崩溃（它适用于它测试过的所有其他 web 浏览器）。调试后发现错误是由于 response.responseText 未定义造成的。xhr 对象如下所示：

```
argument: undefined
isAbort: false
isTimeout: undefined
status: 0
statusText: "communication failure"
tId: 3 
```

在“网络”选项卡的调试器中，我得到“（失败）”，但是所有标题都在那里，我什至可以将响应正文（这是一个有效的 JSON）复制到剪贴板。

我的问题是 - 我该如何调试这个问题？在哪里可以找到其他信息，是什么导致此请求失败？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T21:53:59.070

我终于找到了解决我的问题的方法：AdBlocks，当它阻止 ajax 请求时，它只是说“通信失败”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T02:42:17.437

我要仔细检查的第一件事是从响应返回的数据是有效的 JSON。只需通过像这样的在线 JSONLint 的 JSON 验证器：http: [//jsonlint.com/](http://jsonlint.com/)

我假设您正在使用 jQuery 之类的东西来发出 AJAX 请求。如果是这样，请确保您使用的是该库的开发版本。现在您正在使用脚本的开发版本（未压缩），找到您正在使用的特定函数（例如 $.ajax），然后在 Chrome 检查器中，在 AJAX 响应首先出现的代码中插入断点处理（例如[https://github.com/jquery/jquery/blob/master/src/ajax.js#L579](https://github.com/jquery/jquery/blob/master/src/ajax.js#L579)）。然后继续单步执行代码，检查各种返回值，看看到底出了什么问题。

如果您不使用 jQuery 之类的东西来进行 AJAX 调用，那么我建议您使用框架来避免可能出现的跨浏览器兼容性问题，就像您现在可能遇到的那样。

# java - 如何 xstream 到 java 对象的 xml 序列化？

> ID：11202851
> 
> 赞同：0
> 
> 时间：2012-06-26T07:46:25.640
> 
> 标签：java, xml, xstream

我有一个 java 应用程序，它产生 xml 输出，例如：我尝试了很多东西，但还没有运气。

```
<remittances>
<remittance>
<financialData_priAmnt_curr>a</financialData_priAmnt_curr>
<financialData_priAmnt_val>a</financialData_priAmnt_val>
<status_dateCreated>a</status_dateCreated>
<status_errorCode>a</status_errorCode>
<status_statusCode>a</status_statusCode>
<supplementaryData_key>a</supplementaryData_key>
<supplementaryData_value>a</supplementaryData_value>
<transactionId>a</transactionId>
<transactionType>a</transactionType>
</remittance>
</remittances> 
```

但我想以更格式化的方式展示它。喜欢：

```
 <person>
  <firstname>Joe</firstname>
  <lastname>Walnes</lastname>
  <phone>
    <code>123</code>
    <number>1234-456</number>
  </phone>
  <fax>
    <code>123</code>
    <number>9999-999</number>
  </fax>
</person> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:51:03.657

您可以使用注释来更改一些名称和行为：

```
@XStreamAlias("Person") -> this will change the class name to Person
@XStreamOmitField("password") -> to omit the password field. 
```

在此处查看更多信息：http: [//x-stream.github.io/annotations-tutorial.html](http://x-stream.github.io/annotations-tutorial.html)

如果这对您来说还不够，恐怕您将不得不编写自己的转换器来完成它。Xstream 允许这样做。 [http://x-stream.github.io/converter-tutorial.html](http://x-stream.github.io/converter-tutorial.html)

米海

# database - 使用应用引擎数据存储的父/子键关系设计

> ID：11202854
> 
> 赞同：0
> 
> 时间：2012-06-26T07:46:34.083
> 
> 标签：database, google-app-engine, database-design, google-cloud-datastore

我正在实现一个简单的费用报告应用程序。该应用程序将使用 GAE。在我的应用程序中，我有几个实体（类），例如年、月、日、费用、帐户等。图片如下：用户可以创建一个Account，然后用一个简单的表格开始报销费用。费用存储在 GAE Datasotre 中。每年都有几个月，每个月都有几天，每天都有一个声明的费用。问题是我不知道如何在 GAE 的非关系数据库中安排这些实体。我从 Google Developers 网站阅读了几篇教程和文章，但仍然不了解父/子关系和实体组的概念。任何人都可以提供一些教程、视频、有关如何设计关系并将实体存储在非关系数据库（如 GAE 数据存储）中的文章或书籍。提前致谢。我忘了提到我想使用 GAE 低级数据存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:11:48.917

如果您使用的是 java，我建议您使用 objectify。至少对我来说，它比 JPA 容易得多。

您是按读取和写入付费的，因此，例如，如果您可以将一个月的所有数据放入 1mb 中，那么我一天就没有单独的实体了。无论如何，我不明白您的要求，例如为什么 year 必须是一个实体，并且只能是您过滤的属性。我实际上会考虑只使用带有 Year 和 Month 属性的 Day 实体进行过滤。

[http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#Relationships](http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#Relationships)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:59:03.053

在 MongoDb 中，您将“嵌入”文档。我不知道 GAE 是否像 MongoDB 一样进化——我怀疑不是。如果您在此阶段遇到文档问题，也许您应该查看另一个文档记录更好的 NOSQL 数据库。无论如何，我都会看看 MongoDB 网站，所以如果你有 SQL 的背景，你可以看到两种文化之间的术语映射。当然，任何 NOSQL 数据库本质上都是非事务性的，因此当应用程序开发以跟踪费用支付时，以后可能会出现一些无法解决的问题。

# java - 使用 POI 时移除枚举类的依赖

> ID：11202855
> 
> 赞同：0
> 
> 时间：2012-06-26T07:46:50.537
> 
> 标签：java, excel, apache-poi

我想将结果集数据导出到 excelsheet。我正在使用下面的类。

```
public class ResultSetToExcel {
    private HSSFWorkbook workbook;
    private HSSFSheet sheet;
    private HSSFFont boldFont;
    private HSSFDataFormat format;
    private ResultSet resultSet;
    private FormatType[] formatTypes;

    public ResultSetToExcel(ResultSet resultSet, FormatType[] formatTypes, String sheetName) {
        workbook = new HSSFWorkbook();
        this.resultSet = resultSet;
        sheet = workbook.createSheet(sheetName);
        boldFont = workbook.createFont();
        boldFont.setBoldweight(HSSFFont.BOLDWEIGHT_BOLD);
        format = workbook.createDataFormat();
        this.formatTypes = formatTypes;
    }

    public ResultSetToExcel(ResultSet resultSet, String sheetName) {
        this(resultSet, null, sheetName);
    }

    private FormatType getFormatType(Class _class) {
        if (_class == Integer.class || _class == Long.class) {
            return FormatType.INTEGER;
        } else if (_class == Float.class || _class == Double.class) {
            return FormatType.FLOAT;
        } else if (_class == Timestamp.class || _class == java.sql.Date.class) {
            return FormatType.DATE;
        } else {
            return FormatType.TEXT;
        }
    }

    public void generate(OutputStream outputStream) throws Exception {
        try {
            ResultSetMetaData resultSetMetaData = resultSet.getMetaData();
            if (formatTypes != null && formatTypes.length != resultSetMetaData.getColumnCount()) {
                throw new IllegalStateException("Number of types is not identical to number of resultset columns. "
                        + "Number of types: " + formatTypes.length + ". Number of columns: "
                        + resultSetMetaData.getColumnCount());
            }
            int currentRow = 0;
            HSSFRow row = sheet.createRow(currentRow);
            int numCols = resultSetMetaData.getColumnCount();
            boolean isAutoDecideFormatTypes;
            if (isAutoDecideFormatTypes = (formatTypes == null)) {
                formatTypes = new FormatType[numCols];
            }
            for (int i = 0; i < numCols; i++) {
                String title = resultSetMetaData.getColumnName(i + 1);
                writeCell(row, i, title, FormatType.TEXT, boldFont);
                if (isAutoDecideFormatTypes) {
                    Class _class = Class.forName(resultSetMetaData.getColumnClassName(i + 1));
                    formatTypes[i] = getFormatType(_class);
                }
            }

            currentRow++; // Write report rows
            while (resultSet.next()) {
                row = sheet.createRow(currentRow++);
                for (int i = 0; i < numCols; i++) {
                    Object value = resultSet.getObject(i + 1);
                    writeCell(row, i, value, formatTypes[i]);
                }
            }
            // Autosize columns
            for (int i = 0; i < numCols; i++) {
                sheet.autoSizeColumn((short) i);
            }
            workbook.write(outputStream);
        } finally {
            outputStream.close();
        }
    }

    public void generate(File file) throws Exception {
        generate(new FileOutputStream(file));
    }

    private void writeCell(HSSFRow row, int col, Object value, FormatType formatType) throws NestableException {
        writeCell(row, col, value, formatType, null, null);
    }

    private void writeCell(HSSFRow row, int col, Object value, FormatType formatType, HSSFFont font)
            throws NestableException {
        writeCell(row, col, value, formatType, null, font);
    }

    private void writeCell(HSSFRow row, int col, Object value, FormatType formatType, Short bgColor, HSSFFont font)
            throws NestableException {
        HSSFCell cell = HSSFCellUtil.createCell(row, col, null);
        if (value == null) {
            return;
        }
        if (font != null) {
            HSSFCellStyle style = workbook.createCellStyle();
            style.setFont(font);
            cell.setCellStyle(style);
        }
        switch (formatType) {
        case TEXT:
            cell.setCellValue(value.toString());
            break;
        case INTEGER:
            cell.setCellValue(((Number) value).intValue());
            HSSFCellUtil.setCellStyleProperty(cell, workbook, HSSFCellUtil.DATA_FORMAT, HSSFDataFormat
                    .getBuiltinFormat(("#,##0")));
            break;
        case FLOAT:
            cell.setCellValue(((Number) value).doubleValue());
            HSSFCellUtil.setCellStyleProperty(cell, workbook, HSSFCellUtil.DATA_FORMAT, HSSFDataFormat
                    .getBuiltinFormat(("#,##0.00")));

            break;
        case DATE:
            cell.setCellValue((Timestamp) value);
            HSSFCellUtil.setCellStyleProperty(cell, workbook, HSSFCellUtil.DATA_FORMAT, HSSFDataFormat
                    .getBuiltinFormat(("m/d/yy")));
            break;
        case MONEY:
            cell.setCellValue(((Number) value).intValue());
            HSSFCellUtil.setCellStyleProperty(cell, workbook, HSSFCellUtil.DATA_FORMAT, format
                    .getFormat("($#,##0.00);($#,##0.00)"));
            break;
        case PERCENTAGE:
            cell.setCellValue(((Number) value).doubleValue());
            HSSFCellUtil.setCellStyleProperty(cell, workbook, HSSFCellUtil.DATA_FORMAT, HSSFDataFormat
                    .getBuiltinFormat("0.00%"));
        }
        if (bgColor != null) {
            HSSFCellUtil.setCellStyleProperty(cell, workbook, HSSFCellUtil.FILL_FOREGROUND_COLOR, bgColor);
            HSSFCellUtil
                    .setCellStyleProperty(cell, workbook, HSSFCellUtil.FILL_PATTERN, HSSFCellStyle.SOLID_FOREGROUND);
        }
    }

    public enum FormatType {
        TEXT, INTEGER, FLOAT, DATE, MONEY, PERCENTAGE
    }
} 
```

和实现上述代码的类

```
ResultSetToExcel resultSetToExcel = new ResultSetToExcel(rs,        new ResultSetToExcel.FormatType[] { ResultSetToExcel.FormatType.TEXT, ResultSetToExcel.FormatType.TEXT,            ResultSetToExcel.FormatType.INTEGER, ResultSetToExcel.FormatType.MONEY }, "Employee List");    resultSetToExcel.generate(new File("c:\\employees.xls")); 
```

参考： http: [//www.codereye.com/2009/09/converting-resultset-to-excel-table-in.html](http://www.codereye.com/2009/09/converting-resultset-to-excel-table-in.html)

上面的代码将数据写入 excel 文件，但我需要传递列的数据类型。我的问题是如何从上面的代码中删除 FormatType 类依赖项。FormatType 是枚举并保存所有数据类型。

# ruby - 使用 mkmf.rb 时在 Linux 上构建源代码 Ruby 1.9.2 的问题

> ID：11202856
> 
> 赞同：0
> 
> 时间：2012-06-26T07:46:51.267
> 
> 标签：ruby, mkmf

我使用 vanilla ./configure 命令在 Fedora 16 上构建了 Ruby 1.9.2-p320，安装在 /usr/local

包含文件在 /usr/local/include/ruby-1.9.1

这个程序说“不”：

```
require 'mkmf'
puts have_func('rb_thread_blocking_region') ? "yes" : "no" 
```

我认为这是因为构建 conftest.c 以查看是否存在 rb_thread_blocking_region 的命令行不包含 /usr/local/include/ruby-1.9.1 下各个目录的 -I 路径，因此构建失败。不过我不确定，因为 mkmf 使用自定义记录器，并且每当我尝试将 $stderr.puts 语句添加到某些方法时，我要么看不到输出，要么收到错误消息告诉我我需要安装开发工具。我在 linux 上使用了很多开发工具以及 Ruby 源代码，但是如果有人能告诉我如何在 try_func 方法中转储 headers 变量，那可能会有所帮助。

奇怪的是，到目前为止，我在构建其他二进制 gem 时没有遇到任何问题，包括 RMagick，但我被困在 mysql2 上，因为它认为 rb_thread_blocking_region 不存在，所以它会生成不正确的代码。

再深入一点，我可以使用适当的 -I 选项编译这个程序，所以 rb_thread_blocking_region 肯定存在。

```
$ cat conftest.c 
#include "ruby.h"
int main(int argc, char **argv) { return 1; }

int t() {
  void ((*volatile p)());
  p = (void ((*)())) rb_thread_blocking_region;
  return 0;
} 
```

啊，这是来自 mkmf.log 的问题：

```
“gcc -o conftest -I/usr/local/include/ruby-1.9.1/i686-linux
    -I/usr/local/include/ruby-1.9.1/ruby/backward  
    -I/usr/local/include/ruby-1.9.1 -I.  
    -I/usr/local/include/ruby-1.9.1/ -D_FILE_OFFSET_BITS=64    
    -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-括号  
    -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers  
    -Wno-long-long conftest.c -L。-L/usr/local/lib -Wl,-R/usr/local/lib  
    -L。-rdynamic -Wl,-export-dynamic -Wl,-R -Wl,/usr/local/lib  
    -L/usr/local/lib -lruby-static -lpthread -lrt -ldl -lcrypt -lm -lc"
/usr/lib/gcc/i686-redhat-linux/4.6.3/../../../libcrypt.a(md5-crypt.o)：  
    在函数“__md5_crypt_r”中：
(.text+0x96): 未定义的对“NSSLOW_Init”的引用
/usr/lib/gcc/i686-redhat-linux/4.6.3/../../../libcrypt.a(md5-crypt.o)：  
    在函数“__md5_crypt_r”中：

```

我应该想到这一点——crypt 和 openssl 库在 Fedora 上一直很麻烦。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-26T22:49:14.070

通过查看 mkmf.log 找到答案。仍然无法正常工作，但这是另一个问题。

# c# - OnPropertyChanged 抛出 NullReferenceException

> ID：11202857
> 
> 赞同：0
> 
> 时间：2012-06-26T07:46:55.857
> 
> 标签：c#, wpf, data-binding, devexpress

在我之前的问题中，我相信我并不清楚，所以我没有得到任何可以帮助的答案，所以也许我会发布一些代码示例。绿屏.xaml

```
<UserControl x:Class="WPFTut.GreenScreenView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid Background="Green">
    <Label Content="{Binding ScreenViewModel.ScreenName}"/>
    <Label Content="{Binding ScreenViewModel.UniqueProperty}"/>
</Grid> 
```

RedScreen.xaml

```
<UserControl x:Class="WPFTut.RedScreenView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid Background="Red">
    <Label Content="{Binding ScreenViewModel.ScreenName}"/>
</Grid> 
```

主文件

```
<Window x:Class="WPFTut.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid x:Name="LayoutRoot">
</Grid> 
```

IScreenViewModel.cs

```
namespace WPFTut
{
    interface IScreenViewModel
    {
        string ScreenName { get; set; }
    }
} 
```

RedScreenViewModel.cs

```
namespace WPFTut
{
    class RedScreenViewModel:IScreenViewModel
    {
        public string ScreenName
        {
            get; set;
        }
    }
} 
```

GreenScreenViewModel.cs

```
 namespace WPFTut
    {
    class GreenScreenViewModel : IScreenViewModel
    {
        public string ScreenName { get; set; }

        public string UniqueProperty { get; set; }
    }
   } 
```

ScreenViewModelWrapper.cs

```
using System.ComponentModel;

namespace WPFTut
{
    class ScreenViewModelWrappers : INotifyPropertyChanged
    {
        private IScreenViewModel screenViewModel;

        private IScreenViewModel ScreenViewModel
        {
            get { return screenViewModel; }
            set
            {
                if (screenViewModel != value)
                {
                    screenViewModel = value;
                    OnPropertyChanged("ScreenViewModel");
                }
            }
        }

        public void SwapViewModel(MainWindow mainWindow)
        {
            //Yeah it was done statically, but in my original code, it is actually dynamic to switch between 
            //any screens. Just to keep it simlpe
            mainWindow.LayoutRoot.Children.Clear();
            mainWindow.LayoutRoot.Children.Add(new GreenScreenView()); // here add randomly chosen screen from array of screens.
            mainWindow.UpdateLayout(); //it doesn't refresh the visual tree. So if a red screen was selected next, an exception is thrown
            ScreenViewModel = new GreenScreenViewModel(); //
        }
        protected void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            var s = new PropertyChangedEventArgs(propertyName);
            if (handler != null)
            {

                handler(this, s);
            }
        }
        public event PropertyChangedEventHandler PropertyChanged;
    }
} 
```

这就是我可以写的快速示例。同样，在 ViewModelWrapper 中，屏幕是根据用户输入动态选择的。现在假设首先选择了 GreenScreenView，当您删除并清除添加 RedScreen 并在尝试更新绑定时将 ScreenViewModel 更改为 RedScreenViewModel 时，它仍然会看到 GreenScreenView！因此它试图寻找这个：

```
<Label Content="{Binding ScreenViewModel.UniqueProperty}"/> 
```

但是该代码不属于 RedScreenView，那么如何更新可视化树以查看正确的 xaml 树？因为它抛出了 NullReferenceException。我真的不知道我是否可以更清楚。再次感谢。

**链接到上一个问题：** [Refresh View databindings using UpdateLayout or some other alternative](https://stackoverflow.com/questions/11195253/refresh-view-databindings-using-updatelayout-or-some-other-alternative/11199917#11199917)

# javascript - 获取 javascript ISO 格式的时差

> ID：11202872
> 
> 赞同：2
> 
> 时间：2012-06-26T07:47:57.013
> 
> 标签：javascript, jquery, datetime

我有一个 ISO 格式的日期时间，即

```
2012-06-26T01:00:44Z 
```

我想获得与当前时间的时差。如何使用 javascript 或 javascript 库 Date.js 或 jquery 来实现这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:52:14.120

这将为您提供以毫秒为单位的差异，然后您可以根据需要对其进行格式化

```
var diff = new Date("2012-06-26T01:00:44Z") - new Date(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:52:21.237

尝试这个：

```
var someDate = new Date("2012-06-26T01:00:44Z");
var now = new Date();
var one_day = 1000 * 60 * 60 * 24;
var diff = Math.ceil((someDate.getTime()-now .getTime())/(one_day))
alert(diff) 
```

[**示例小提琴**](http://jsfiddle.net/8eAQp/)

您显然可以修改`one_day`变量以获得所需单位的差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:03:38.967

我建议将 ISO 格式转换为可以跨浏览器使用的格式。

尝试这个，

```
var d = "2012-06-26T01:00:44Z"; 
var someDate = new Date(d.replace(/-/g,'/').replace('T',' ').replace('Z',''));
alert(someDate - new Date()); 
```

**编辑：**

我想，你需要`pretty time`

试试[这个](http://webdesign.onyou.ch/2010/08/04/javascript-time-ago-pretty-date/)很棒的代码

**编辑2：**

你需要反向，所以试试这个

```
var old_date = new Date();
alert('Old date: ' + old_date.toGMTString())
var new_date = new Date(old_date.setMinutes(old_date.getMinutes() - 5));
alert('Date 5 minutes before: ' + new_date.toGMTString()); 
```

如果您需要时间戳，

```
alert(new_date.getTime()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-13T05:21:02.807

为了格式化日期，您可以使用此功能获取所需的日期格式，您可以轻松更改日、月和年的位置。

```
function convertFormat(inputDate)
  var date = new Date(inputDate);     
  var day = date.getDate();
  var month = date.getMonth()+1;
  var year = date.getFullYear();
  var fullYear = year + '/' + month + '/' + day
  return fullYear; 
```

# sql - 分区函数 COUNT() OVER 可能使用 DISTINCT

> ID：11202878
> 
> 赞同：106
> 
> 时间：2012-06-26T07:48:12.023
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, sql-server-2014

我正在尝试编写以下内容以获得不同的 NumUsers 总数，如下所示：

```
NumUsers = COUNT(DISTINCT [UserAccountKey]) OVER (PARTITION BY [Mth]) 
```

管理工作室似乎对此不太高兴。当我删除`DISTINCT`关键字时，错误消失了，但它不会是一个不同的计数。

`DISTINCT`在分区函数中似乎是不可能的。我该如何找到不同的计数？我是否使用更*传统*的方法，例如相关子查询？

进一步研究一下，也许这些`OVER`函数与 Oracle 的工作方式不同，因为它们不能用于`SQL-Server`计算运行总计。

我在[SQLfiddle](http://sqlfiddle.com/#!3/a54aa/2)上添加了一个实时示例，我尝试使用分区函数来计算运行总计。

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2014-03-12T09:45:51.670

有一个非常简单的解决方案[`dense_rank()`](https://msdn.microsoft.com/en-us/library/ms173825.aspx)

```
dense_rank() over (partition by [Mth] order by [UserAccountKey]) 
+ dense_rank() over (partition by [Mth] order by [UserAccountKey] desc) 
- 1 
```

这将为您提供您所要求的内容：每个月内不同的 UserAccountKeys 的数量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-18T09:37:31.717

死灵术：

通过 DENSE_RANK 用 MAX 模拟 COUNT DISTINCT over PARTITION BY 相对简单：

```
;WITH baseTable AS
(
    SELECT 'RM1' AS RM, 'ADR1' AS ADR
    UNION ALL SELECT 'RM1' AS RM, 'ADR1' AS ADR
    UNION ALL SELECT 'RM2' AS RM, 'ADR1' AS ADR
    UNION ALL SELECT 'RM2' AS RM, 'ADR2' AS ADR
    UNION ALL SELECT 'RM2' AS RM, 'ADR2' AS ADR
    UNION ALL SELECT 'RM2' AS RM, 'ADR3' AS ADR
    UNION ALL SELECT 'RM3' AS RM, 'ADR1' AS ADR
    UNION ALL SELECT 'RM2' AS RM, 'ADR1' AS ADR
    UNION ALL SELECT 'RM3' AS RM, 'ADR1' AS ADR
    UNION ALL SELECT 'RM3' AS RM, 'ADR2' AS ADR
)
,CTE AS
(
    SELECT RM, ADR, DENSE_RANK() OVER(PARTITION BY RM ORDER BY ADR) AS dr 
    FROM baseTable
)
SELECT
     RM
    ,ADR

    ,COUNT(CTE.ADR) OVER (PARTITION BY CTE.RM ORDER BY ADR) AS cnt1 
    ,COUNT(CTE.ADR) OVER (PARTITION BY CTE.RM) AS cnt2 
    -- Not supported
    --,COUNT(DISTINCT CTE.ADR) OVER (PARTITION BY CTE.RM ORDER BY CTE.ADR) AS cntDist
    ,MAX(CTE.dr) OVER (PARTITION BY CTE.RM ORDER BY CTE.RM) AS cntDistEmu 
FROM CTE 
```

注意：
这假设有问题的字段是不可为空的字段。
如果字段中有一个或多个 NULL 条目，则需要减去 1。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-26T08:20:20.670

我认为在 SQL-Server 2008R2 中这样做的唯一方法是使用相关子查询或外部应用：

```
SELECT  datekey,
        COALESCE(RunningTotal, 0) AS RunningTotal,
        COALESCE(RunningCount, 0) AS RunningCount,
        COALESCE(RunningDistinctCount, 0) AS RunningDistinctCount
FROM    document
        OUTER APPLY
        (   SELECT  SUM(Amount) AS RunningTotal,
                    COUNT(1) AS RunningCount,
                    COUNT(DISTINCT d2.dateKey) AS RunningDistinctCount
            FROM    Document d2
            WHERE   d2.DateKey <= document.DateKey
        ) rt; 
```

这可以使用您建议的语法在[SQL-Server 2012中完成：](http://rextester.com/UZD47460)

```
SELECT  datekey,
        SUM(Amount) OVER(ORDER BY DateKey) AS RunningTotal
FROM    document 
```

但是，`DISTINCT`仍然不允许使用，所以如果需要 DISTINCT 和/或如果升级不是一个选项，那么我认为`OUTER APPLY`是你最好的选择

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-22T07:55:40.383

我使用的解决方案类似于上面[David](https://stackoverflow.com/users/3409975/david "大卫")的解决方案，但如果应将某些行从计数中排除，则会有额外的变化。这假定 [UserAccountKey] 永远不会为空。

```
-- subtract an extra 1 if null was ranked within the partition,
-- which only happens if there were rows where [Include] <> 'Y'
dense_rank() over (
  partition by [Mth] 
  order by case when [Include] = 'Y' then [UserAccountKey] else null end asc
) 
+ dense_rank() over (
  partition by [Mth] 
  order by case when [Include] = 'Y' then [UserAccountKey] else null end desc
)
- max(case when [Include] = 'Y' then 0 else 1 end) over (partition by [Mth])
- 1 
```

[可以在此处找到带有扩展示例的 SQL Fiddle。](http://sqlfiddle.com/#!6/6e5a8/4 "SQL小提琴")

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-28T22:42:58.013

简单的 SQL 中有一个解决方案：

```
SELECT time, COUNT(DISTINCT user) OVER(ORDER BY time) AS users
FROM users 
```

=>

```
SELECT time, COUNT(*) OVER(ORDER BY time) AS users
FROM (
    SELECT user, MIN(time) AS time
    FROM users
    GROUP BY user
) t 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-02-02T20:02:48.323

**我在这里徘徊，与whytheq**基本相同的问题并找到了**David**的解决方案，但随后不得不回顾我关于 DENSE_RANK 的旧自学笔记，因为我很少使用它：为什么 DENSE_RANK 而不是 RANK 或 ROW_NUMBER，以及它是如何做到的实际工作？在此过程中，我更新了该教程以包含我的**David**针对这个特定问题的解决方案版本，然后认为它可能对 SQL 新手（或像我这样忘记东西的其他人）有所帮助。

整个教程文本可以复制/粘贴到查询编辑器中，然后每个示例查询可以（单独）取消注释并运行，以查看它们各自的结果。（默认情况下，此问题的解决方案在底部未注释。）或者，可以将每个示例单独复制到它们自己的查询编辑实例中，但每个示例都必须包含**TBLx CTE。**

```
--WITH /* DB2 version */
--TBLx (Col_A, Col_B) AS (VALUES 
--     (  7,     7  ),
--     (  7,     7  ),
--     (  7,     7  ),
--     (  7,     8  ))

WITH /* SQL-Server version */
TBLx    (Col_A, Col_B) AS
  (SELECT  7,     7    UNION ALL
   SELECT  7,     7    UNION ALL
   SELECT  7,     7    UNION ALL
   SELECT  7,     8)

/*** Example-A: demonstrates the difference between ROW_NUMBER, RANK and DENSE_RANK ***/

  --SELECT Col_A, Col_B,
  --  ROW_NUMBER() OVER(PARTITION BY Col_A ORDER BY Col_B) AS ROW_NUMBER_,
  --  RANK() OVER(PARTITION BY Col_A ORDER BY Col_B)       AS RANK_,
  --  DENSE_RANK() OVER(PARTITION BY Col_A ORDER BY Col_B) AS DENSE_RANK_
  --FROM TBLx

  /* RESULTS:
    Col_A  Col_B  ROW_NUMBER_  RANK_  DENSE_RANK_
      7      7        1          1        1
      7      7        2          1        1
      7      7        3          1        1
      7      8        4          4        2

     ROW_NUMBER: Just increments for the three identical rows and increments again for the final unique row.
                 That is, it’s an order-value (based on "sort" order) but makes no other distinction.

           RANK: Assigns the same rank value to the three identical rows, then jumps to 4 for the fourth row,
                 which is *unique* with regard to the others.
                 That is, each identical row is ranked by the rank-order of the first row-instance of that
                 (identical) value-set.

     DENSE_RANK: Also assigns the same rank value to the three identical rows but the fourth *unique* row is
                 assigned a value of 2.
                 That is, DENSE_RANK identifies that there are (only) two *unique* row-types in the row set.
  */

/*** Example-B: to get only the distinct resulting "count-of-each-row-type" rows ***/

--  SELECT DISTINCT -- For unique returned "count-of-each-row-type" rows, the DISTINCT operator is necessary because
--                  -- the calculated DENSE_RANK value is appended to *all* rows in the data set.  Without DISTINCT,
--                  -- its value for each original-data row-type would just be replicated for each of those rows.
--                  
--    Col_A, Col_B,                
--    DENSE_RANK() OVER(PARTITION BY Col_A ORDER BY Col_B) AS DISTINCT_ROWTYPE_COUNT_
--  FROM TBLx

  /* RESULTS:
    Col_A  Col_B  DISTINCT_ROWTYPE_COUNT_
      7      7            1
      7      8            2
  */

/*** Example-C.1: demonstrates the derivation of the "count-of-all-row-types" (finalized in Example-C.2, below) ***/

--  SELECT
--    Col_A, Col_B,
--    
--    DENSE_RANK() OVER ( PARTITION BY Col_A ORDER BY Col_B DESC) AS ROW_TYPES_COUNT_DESC_,
--    DENSE_RANK() OVER ( PARTITION BY Col_A ORDER BY Col_B ASC) AS ROW_TYPES_COUNT_ASC_,
--    
--    -- Adding the above cases together and subtracting one gives the same total count for on each resulting row:
--    
--    DENSE_RANK() OVER ( PARTITION BY Col_A ORDER BY Col_B DESC)
--       +
--    DENSE_RANK() OVER ( PARTITION BY Col_A ORDER BY Col_B ASC)
--      - 1   /* (Because DENSE_RANK values are one-based) */
--      AS ROW_TYPES_COUNT_
--  FROM TBLx

  /* RESULTS:
    COL_A  COL_B  ROW_TYPES_COUNT_DESC_  ROW_TYPES_COUNT_ASC_  ROW_TYPES_COUNT_
      7      7            2                     1                    2
      7      7            2                     1                    2
      7      7            2                     1                    2
      7      8            1                     2                    2

  */

/*** Example-C.2: uses the above technique to get a *single* resulting "count-of-all-row-types" row ***/

  SELECT DISTINCT -- For a single returned "count-of-all-row-types" row, the DISTINCT operator is necessary because the
                  -- calculated DENSE_RANK value is appended to *all* rows in the data set.  Without DISTINCT, that
                  -- value would just be replicated for each original-data row.

--    Col_A, Col_B, -- In order to get a *single* returned "count-of-all-row-types" row (and field), all other fields
                    -- must be excluded because their respective differing row-values will defeat the purpose of the
                    -- DISTINCT operator, above.

    DENSE_RANK() OVER ( PARTITION BY Col_A ORDER BY Col_B DESC)
       +
    DENSE_RANK() OVER ( PARTITION BY Col_A ORDER BY Col_B ASC)
      - 1   /* (Because DENSE_RANK values are one-based) */
      AS ROW_TYPES_COUNT_
  FROM TBLx

  /* RESULTS:

    ROW_TYPES_COUNT_
          2
  */ 
```

# php - 具有多个画廊的 PHP 动态颜色框

> ID：11202880
> 
> 赞同：0
> 
> 时间：2012-06-26T07:48:14.230
> 
> 标签：php, jquery, gallery, colorbox

我有从 php 代码生成的动态图库，仅由一张图片表示。当您选择该图片时，它应该会打开一个包含多张照片的颜色框。

问题是，我的彩盒似乎无法识别我的 rel。

```
<script>
        $(document).ready(function(){
            //Examples of how to assign the ColorBox event to elements

            $("a.gallery").click(function(){
                var galleryRelative = $(this).attr("rel");
                alert(galleryRelative);

                $(this).colorbox({rel:galleryRelative});

            });
        });
    </script> 
```

还有我的 HTML

```
foreach($kittens as $key => $kitten){                 

    echo '<div class="block1 smallblock">';

    echo '<a class="gallery" rel="gallery0" title="blablabla" href="../img/block-03.jpg"> 
             <img src="../img/block-03.jpg" width="299" height="233" alt="kitten" />
          </a>';

    echo '<p><a href="../img/block-03.jpg" rel="gallery0" title="blabla"></a></p>';
    echo '<p><a href="../img/block-02.jpg" rel="gallery0" title="blabla"></a></p>';

    echo '</div>';
} 
```

我将毫无问题地生成gallery0（我在我的脚本中成功读取了我的a.gallery中的rel属性，但colorbox不会匹配它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:15:25.510

默认情况下，Colorbox 将使用您的 rel 属性。只需使用：

```
$("a.gallery").colorbox(); 
```

通过设置您自己的点击事件，您每次点击一个项目时都会将颜色框重新分配给您的元素，这将是低效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:57:56.760

您可以更好地尝试使用 Pretty Photo 插件，通过单击单个图像在灯箱中显示多张照片。[当我单击 PikaChoose 中的图像时，我使用了 Pikachoose 库，我使用 Pretty Photo Plugin演示](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)在灯箱内显示图像列表。希望这对你有用

# php - 从 MYSQL 输出表行

> ID：11202886
> 
> 赞同：-2
> 
> 时间：2012-06-26T07:48:34.920
> 
> 标签：php, mysql, html-table, rows

在 PHP 中，我想为每两个这样的 mysql 记录以特定格式输出表行。

因此，输出的数据将是数据库中的 1、2、3、4、5、6，但每两个数字都有一个新行。做这个的最好方式是什么？

```
 <table>
              <tr>
                <td>1</td>
                <td>2</td>
              </tr>
              <tr>
                <td>3</td>
                <td>4</td>
              </tr>
              <tr>
                <td>5</td>
                <td>6</td>
              </tr>
            </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:56:04.187

假设您的数据库查询返回一个数组...

```
for($i=0; $i<count($array)/2; $i++) {
  echo "<tr><td>{$array[2*$i]}</td><td>{$array[2*$i+1]}</td></tr>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:08:43.610

```
 $i=1;
            while ($row = mysql_fetch_array($query))
            {
                if ($i % 2 == 0)
                    echo '</td></tr>';
                $i++;
            } 
```

# combobox - excel中的activex控件与表单控件

> ID：11202893
> 
> 赞同：0
> 
> 时间：2012-06-26T07:48:57.660
> 
> 标签：combobox, excel, excel-2007, vba

我的 excel 2007 工作表上有一些 activex 和表单控件（用于测试目的的下拉列表）。我已经使用下面的代码绑定了数据：

```
Private Sub ComboBox1_Change()
    If ComboBox1.Value = 1 Then
        ComboBox2.List = Array("a", "b", "c")
        ComboBox2.Value = ComboBox2.List(0)
    ElseIf ComboBox1.Value = 2 Then
        ComboBox2.List = Array("A", "B", "C", "D")
        ComboBox2.Value = ComboBox2.List(0)        
    End If
End Sub

Private Sub Worksheet_Activate()
    ComboBox1.List = Array(1, 2)  
    ComboBox3.List = Array("Delhi", "Kolkata")
    ComboBox3.Value = ComboBox3.List(0)
    ComboBox4.List = Array("Delhi6", "Kolkata71")
    ComboBox4.Value = ComboBox4.List(0)
End Sub

Private Sub UserForm_Initialize()
    ComboBox1.List = Array(1, 2)
End Sub 
```

但是当我重新打开我的工作表时，组合框在它们关闭的状态下打开，并且下拉列表中没有数据。请告知我错过了哪个事件？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:45:54.683

我发现（从我的一个朋友那里得到帮助）我犯的错误......我在工作表中使用的 UserForm_Initialize 函数根本不应该使用。其次 Worksheet_Activate 也不会被使用。

所需的功能是

```
Private Sub Workbook_Open()
Sheets("Print_Sheet").ComboBox1.List = Array(1, 2, 3, 4)
Sheets("Print_Sheet").ComboBox3.List = Array("Delhi", "Kolkata")
Sheets("Print_Sheet").ComboBox3.Value = ComboBox3.List(0)
Sheets("Print_Sheet").ComboBox4.List = Array("Delhi6", "Kolkata71")
Sheets("Print_Sheet").ComboBox4.Value = ComboBox4.List(0)
End Sub 
```

这将在 Microsoft Excel 对象下的 ThisWorkbook 中使用。现在组合已正确填充。

# asp.net - jqGrid postdata 发送空值（mvc3 asp/net）

> ID：11202894
> 
> 赞同：0
> 
> 时间：2012-06-26T07:48:58.853
> 
> 标签：asp.net, asp.net-mvc-3, jqgrid

jqGrid 不会将 postdata 发送到我的控制器。我在stackoverflow上尝试了所有提供的解决方案，显然我在某处犯了错误。所以这里是代码：

```
     功能刷新网格（）{
        alert('CompanyNamePart=' + $("#CompanyNamePart").val()); // 检查这是否是正确的值
        $("#list").trigger('reloadGrid');
        返回假；
    }

    $（函数（）{
        var grid = jQuery("#list").jqGrid({
            数据类型：'json'，
            标题：“交易记录”，
            发布数据： {
                CompanyNamePart: function () { return $("#CompanyNamePart").val(); },
                UsernamePart: function () { return $("#UsernamePart").val(); },
            },
            url: '@Url.Action("GetTransactionLogData")',
            mtype: 'GET',
            colNames: ['Ref.', 'TradeDate', 'Status'],
            col型号：[
                {名称：'参考'，索引：'参考'，宽度：'60'}，
                {名称：'TradeDate'，索引：'TradeDate'，宽度：'70'}，
                {名称：'状态'，索引：'状态'，宽度：'80'}
            ],
            寻呼机：$（'#pager'），
            行数：10，
            高度：'100%'
        });
    });

```

在控制器方面，我有简单的代码：

```
[HttpGet]
        公共 ActionResult GetTransactionLogData(string sidx, string sord, int page, int rows, string CompanyNamePart, string UsernamePart)
        { 返回 Json(null); }

```

在调试模式下，当我通过单击按钮调用 refreshGrid() 时，我会收到一个警报，以确认它正确读取了文本字段的值，然后刷新网格。我收到了控制器的调用，但 CompanyNamePart 和 UsernamePart 变量的值都是空的，即使我填写了它们。

我用另一种方法尝试了 postdata 部分的另一种解决方案，首先我创建了返回所需值的函数并将它们放在网格的 postdata 部分中：

```
    函数 getCompanyNamePartVal() {
        返回 $("#CompanyNamePart").val();
    }

    函数 getUsernamePartVal() {
        返回 $("#UsernamePart").val();
    }

...在 jqgrid 定义中
    发布数据： {
                公司名称部分：getCompanyNamePartVal（），
                用户名部分：getUsernamePartVal()，
            },

```

但没有成功。

当我检查 Firebug 时，我可以看到 jqGrid 没有发送 postdata 值：

```
获取 Firebug 捕获的参数
_ 1340696638960
_搜索错误
nd 1340696638955
第 1 页
第 10 行
西德克斯    
升序

```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:55:55.810

该参数被称为`postData`，而不是`postdata`。不要忘记 javascript 是一种区分大小写的语言。所以试试这样：

```
postData: {
    CompanyNamePart: function () { return $("#CompanyNamePart").val(); },
    UsernamePart: function () { return $("#UsernamePart").val(); }
} 
```

另请注意，我`UsernamePart`在代码中具有的函数之后删除了一个尾随逗号，该函数会产生无效的 javascript。一些更敏感的浏览器可能不接受它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T04:37:57.937

```
$("#grid").jqGrid({
        url: "/DocumentoBalanza/GetBalanzaEmpresaMes",
        //postData: JSON.stringify(formDataParam),
        postData : {
            id: function () { return formDataParam.id; },
            strDate: function () { return formDataParam.strDate; },
        },
        datatype: 'json',
        mtype: 'GET', 
```

* * *

```
public JsonResult GetBalanzaEmpresaMes(string sidx, string sord, int page, int rows, int id, string strDate) 
```

代码确定。

# html - 缩放下的css错误

> ID：11202900
> 
> 赞同：0
> 
> 时间：2012-06-26T07:49:21.240
> 
> 标签：html, css

大家好，我坚持一个问题，我有一个没有 100% 缩放的标题，它看起来像这样：

[http://i.stack.imgur.com/S8tp8.png](http://i.stack.imgur.com/S8tp8.png)

但是当我放大标题时，标题会向右：

[http://i.stack.imgur.com/BapBA.png](http://i.stack.imgur.com/BapBA.png)

**HTML：**

```
<body>
  <div id="header">
<div id="logo"></div>
  </div>
</body> 
```

**CSS：**

```
body {
background:url(images/bg.png);
margin:0;
padding:0;}

#header {

margin-bottom:170px;
background:url(images/headerBg.png);
height:386px;
width:100%;}

#header #logo{
min-width:990px;
height:207px;
width:990px;
background:url(images/logo.png);
margin:0 auto;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:52:42.113

根据您的页面宽度给`min-width`您。`body`像这样写：

```
body{
 min-width:990px;
} 
```

# eclipse - 无法使用 x11 转发运行 eclipse

> ID：11202906
> 
> 赞同：2
> 
> 时间：2012-06-26T07:49:38.990
> 
> 标签：eclipse, ssh, x11

我正在尝试使用 x11 转发在远程 64 位 ubuntu 11.04 上运行 eclipse。我的客户端有 ubuntu。

我在服务器上的 /etc/ssh/ssh_config 包含：

```
Host *

ForwardX11 yes
SendEnv LANG LC_*
HashKnownHosts yes
GSSAPIAuthentication yes
GSSAPIDelegateCredentials no 
```

我在服务器上的回声`$DISPLAY`给出：

```
localhost:10.0 
```

我的客户端/本地机器上的 /etc/ssh/ssh_config 包含：

```
Host*
SendEnv LANG LC_*
HashKnownHosts yes
GSSAPIAuthentication yes
GSSAPIDelegateCredentials no 
```

我在客户端机器上的回声`$DISPLAY`给出

```
:0.0 
```

我使用命令登录系统`ssh -X username@domain`并尝试运行 eclipse `eclipse`。但我收到以下错误。

```
(.:2646): GLib-GObject-WARNING **: invalid (NULL) pointer instance

(.:2646): GLib-GObject-CRITICAL **: g_signal_connect_data: assertion `G_TYPE_CHECK_INSTANCE (instance)' failed

(.:2646): Gtk-CRITICAL **: IA__gtk_settings_get_for_screen: assertion `GDK_IS_SCREEN (screen)' failed

(.:2646): Gtk-WARNING **: Screen for GtkWindow not set; you must always set
a screen for a GtkWindow before using the window

(.:2646): Gtk-WARNING **: Screen for GtkWindow not set; you must always set
a screen for a GtkWindow before using the window

(.:2646): Gdk-CRITICAL **: IA__gdk_screen_get_display: assertion `GDK_IS_SCREEN (screen)'    failed

(.:2646): Gdk-CRITICAL **: IA__gdk_display_get_pointer: assertion `GDK_IS_DISPLAY (display)'     failed

(.:2646): Gtk-WARNING **: Screen for GtkWindow not set; you must always set
a screen for a GtkWindow before using the window

(.:2646): Gdk-CRITICAL **: IA__gdk_screen_get_n_monitors: assertion `GDK_IS_SCREEN (screen)' failed

(.:2646): Gtk-WARNING **: Screen for GtkWindow not set; you must always set
a screen for a GtkWindow before using the window

(.:2646): Gdk-CRITICAL **: IA__gdk_screen_get_monitor_geometry: assertion `GDK_IS_SCREEN (screen)' failed

(.:2646): Gdk-CRITICAL **: IA__gdk_screen_get_default_colormap: assertion `GDK_IS_SCREEN (screen)' failed

(.:2646): Gdk-CRITICAL **: IA__gdk_colormap_get_visual: assertion `GDK_IS_COLORMAP (colormap)' failed

(.:2646): Gdk-CRITICAL **: IA__gdk_screen_get_default_colormap: assertion `GDK_IS_SCREEN (screen)' failed

(.:2646): Gdk-CRITICAL **: IA__gdk_screen_get_root_window: assertion `GDK_IS_SCREEN (screen)' failed

(.:2646): Gdk-CRITICAL **: IA__gdk_screen_get_root_window: assertion `GDK_IS_SCREEN (screen)' failed

(.:2646): Gdk-CRITICAL **: IA__gdk_window_new: assertion `GDK_IS_WINDOW (parent)' failed
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007f2542574d4e, pid=2646, tid=139798099633920
#
# JRE version: 6.0_26-b03
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.1-b02 mixed mode linux-amd64 compressed oops)
# Problematic frame:
# C  [libgdk-x11-2.0.so.0+0x72d4e]  __float128+0xe
#
# An error report file with more information is saved as:
# /home/sparkuser/hs_err_pid2646.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

任何我缺少的线索。

请帮忙

# silverlight - 在 MVVM WP7 应用程序中显示提示

> ID：11202911
> 
> 赞同：0
> 
> 时间：2012-06-26T07:50:06.747
> 
> 标签：silverlight, windows-phone-7, mvvm

我有一个主 ViewModel 和一个 UserLoginViewModel。从用户视图模型中，我需要显示带有确定/取消选项的提示。我已经按照此链接 [http://www.deanchalk.me.uk/post/WPF-MVVM-e28093-Simple-e28098MessageBoxShowe28099-With-Action-Func.aspx](http://www.deanchalk.me.uk/post/WPF-MVVM-e28093-Simple-e28098MessageBoxShowe28099-With-Action-Func.aspx)中的说明完成了它。为了避免无效的跨线程异常，我使用了调度程序。代码是这样的

```
 mainDispatcher.BeginInvoke(new MessageBoxDelegate
                  (
                      (message, title) => { Popup(msg, ""); }
                  ), messageArgs); 
```

其中 mainDispatcher 是 MainView 的调度程序，而 Popup 是类型 `Func<string, string, MessageBoxResult>`

它工作正常。问题是我无法从`BeginInvoke`方法中获得结果。有没有办法从`BeginInvoke`方法中得到结果？如果没有，有什么建议我可以如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:55:47.257

我不确定它如何适合 MVVM 模型，但我建议您使用 code4fun 的[MessagePrompt](http://coding4fun.codeplex.com/wikipage?title=MessagePrompt)而不是 MessageBox

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:34:44.420

显然你得到的结果是*var result = Popup(msg, "");*

您需要在 BeginInvoke() 中评估结果，因为 BeginInvoke() 下面的任何代码都在 BeginInvoke() 之前运行。

# javascript - 圆形/径向进度条

> ID：11202920
> 
> 赞同：28
> 
> 时间：2012-06-26T07:50:47.177
> 
> 标签：javascript, jquery, html, css, progress-bar

您是否知道任何用于创建圆形/径向进度条的 jQuery 插件或 CSS 技术，例如：

![在此处输入图像描述](../Images/7f6505c5806695e44fac1f318cac54d0.png)

# silverlight - 带有动态添加控件的 Silverlight zindex

> ID：11202922
> 
> 赞同：0
> 
> 时间：2012-06-26T07:50:51.457
> 
> 标签：silverlight, layout, grid, z-index

我有一个带有一些文本框的网格和一个超出网格边界的图像，我在我的代码中动态地将这个网格添加到另一个网格中。

我想让我的图像在所有其他网格之上。不幸的是，我添加到根网格的每个网格都会悬停在我之前的网格图像上。

你能建议什么吗？！我已经尝试过使用 zindex，但在我的情况下它不起作用。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:36:55.233

ZIndex 仅适用于面板派生容器（Grid、Canvas、Stackpanel 等）的直接子级。否则，它取决于它们在可视树中存在的顺序（即最后一个显示在顶部）。

如果您有嵌套对象，您只需要考虑添加它们的顺序。最简单的方法是拥有两个顶级网格/面板，第一个包含*其他所有内容*，最后一个仅包含动态添加的子项。

这样，您放入第二个网格的任何内容都将始终位于所有其他项目之上（在第一个网格/容器中）。

# installation - 如何在 inno setup 中删除底部面板..并用自定义面板替换它

> ID：11202924
> 
> 赞同：2
> 
> 时间：2012-06-26T07:50:52.417
> 
> 标签：installation, inno-setup

我想用包含安装进度条的自定义面板替换我们显示下一步、后退按钮的底部面板。安装完成后，页面应自动重定向到下一页。下面是样机图像，我想如何制作这个页面。

![在此处输入图像描述](../Images/57ee91e4547963996d657cfb1327b292.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T02:55:53.397

这是脚本，还包括您的主面板标题[`previous question`](https://stackoverflow.com/q/11193811/960757)。将其保存到您的`..\InnoSetup\Examples\`文件夹以及您需要转换为 BMP 文件的以下图像，因为我找不到任何不会将图像转换为 PNG 或 JPG 格式的受信任文件共享站点：

*   [`this one`](https://i.stack.imgur.com/WK4rN.png)转换为 BMP 并另存为`Logo.bmp`
*   [`this one`](https://i.stack.imgur.com/ddHOv.png)转换为 BMP 并另存为`InstallBackground.bmp`

这是脚本（您应该[`commented version`](https://stackoverflow.com/revisions/11218782/1)首先遵循此脚本）：

```
[Setup]
AppName=ERPBO
AppVersion=1.5
DefaultDirName={pf}\My Program
DefaultGroupName=My Program
UninstallDisplayIcon={app}\MyProg.exe
Compression=lzma2
SolidCompression=yes
OutputDir=userdocs:Inno Setup Examples Output
WizardSmallImageFile=Logo.bmp

[Files]
Source: "MyProg.exe"; DestDir: "{app}"
Source: "MyProg.chm"; DestDir: "{app}"
Source: "InstallBackground.bmp"; Flags: dontcopy

[Icons]
Name: "{group}\My Program"; Filename: "{app}\MyProg.exe"

[Run]
Filename: "{app}\MyProg.chm"; Check: JustBlockTheInstallPage

[Messages]
SetupWindowTitle=Installere - %1
WizardInstalling=Installasjon pågår...

[Code]
function JustBlockTheInstallPage: Boolean;
begin
  Result := False;  
  WizardForm.StatusLabel.Caption := 'Pakker ut filer...';
  WizardForm.FilenameLabel.Caption :='C:\dnpr\Crystal reports setup\WindowShoppingNet.msi';
  MsgBox('Message just to see the install page :-)', mbInformation, MB_OK);
end;

var
  InnerNotebookBounds: TRect;
  OuterNotebookBounds: TRect;
  InstallBottomPanel: TPanel;
  InstallBackground: TBitmapImage;

function Rect(const ALeft, ATop, ARight, ABottom: Integer): TRect;
begin
  Result.Left := ALeft;
  Result.Top := ATop;
  Result.Bottom := ABottom;
  Result.Right := ARight;
end;

function GetBoundsRect(AControl: TControl): TRect;
begin
  Result.Left := AControl.Left;
  Result.Top := AControl.Top;
  Result.Right := AControl.Left + AControl.Width;
  Result.Bottom := AControl.Top + AControl.Height;
end;

procedure SetBoundsRect(AControl: TControl; const ARect: TRect);
begin
  AControl.Left := ARect.Left;
  AControl.Top := ARect.Top;
  AControl.Width := ARect.Right - ARect.Left
  AControl.Height := ARect.Bottom - ARect.Top;
end;

procedure CenterHorizontally(ASource, ATarget: TControl);
begin
  ATarget.Left := (ASource.Width - ATarget.Width) div 2;
end;

procedure CenterVertically(ASource, ATarget: TControl);
begin
  ATarget.Top := (ASource.Height - ATarget.Height) div 2;  
end;

procedure InitializeWizard;
begin              
  WizardForm.PageDescriptionLabel.Visible := False;

  WizardForm.PageNameLabel.Font.Size := 18;
  WizardForm.PageNameLabel.Font.Name := 'Comic Sans MS';
  WizardForm.PageNameLabel.AutoSize := True;
  WizardForm.PageNameLabel.Left := 18;
  CenterVertically(WizardForm.MainPanel, WizardForm.PageNameLabel); 

  WizardForm.WizardSmallBitmapImage.AutoSize := True;
  WizardForm.WizardSmallBitmapImage.Left := WizardForm.ClientWidth - WizardForm.WizardSmallBitmapImage.Width - 18;
  CenterVertically(WizardForm.MainPanel, WizardForm.WizardSmallBitmapImage); 

  WizardForm.InstallingPage.Color := clWhite;  

  InstallBottomPanel := TPanel.Create(WizardForm);
  InstallBottomPanel.Parent := WizardForm.InstallingPage;
  InstallBottomPanel.BevelOuter := bvNone;
  InstallBottomPanel.Align := alBottom;
  InstallBottomPanel.Caption := '';
  InstallBottomPanel.Color := $00C7CFD3;
  InstallBottomPanel.Height := 79;
  InstallBottomPanel.ParentBackground := False;

  ExtractTemporaryFile('InstallBackground.bmp');

  InstallBackground := TBitmapImage.Create(WizardForm);
  InstallBackground.Parent := WizardForm.InstallingPage;
  InstallBackground.AutoSize := True;
  InstallBackground.Bitmap.LoadFromFile(ExpandConstant('{tmp}\InstallBackground.bmp'));

  WizardForm.StatusLabel.Parent := InstallBottomPanel;
  WizardForm.StatusLabel.Left := 8;
  WizardForm.StatusLabel.Top := 8;
  WizardForm.FilenameLabel.Parent := InstallBottomPanel;
  WizardForm.FilenameLabel.Left := 8;
  WizardForm.FilenameLabel.Top := WizardForm.StatusLabel.Top + 16;
  WizardForm.ProgressGauge.Parent := InstallBottomPanel;
  WizardForm.ProgressGauge.Left := 8;
  WizardForm.ProgressGauge.Top := WizardForm.FilenameLabel.Top + 26;

  InnerNotebookBounds := GetBoundsRect(WizardForm.InnerNotebook);
  OuterNotebookBounds := GetBoundsRect(WizardForm.OuterNotebook);
end;

procedure CurPageChanged(CurPageID: Integer);  
begin
  if CurPageID = wpInstalling then
  begin
    SetBoundsRect(WizardForm.OuterNotebook, Rect(OuterNotebookBounds.Left, 
      OuterNotebookBounds.Top, OuterNotebookBounds.Right, WizardForm.ClientHeight));
    SetBoundsRect(WizardForm.InnerNotebook, Rect(OuterNotebookBounds.Left,
      WizardForm.Bevel1.Top + WizardForm.Bevel1.Height, OuterNotebookBounds.Right, 
      WizardForm.ClientHeight));          

    CenterHorizontally(WizardForm.InstallingPage, InstallBackground);
    InstallBackground.Top := InstallBottomPanel.Top - InstallBackground.Height;
    WizardForm.ProgressGauge.Width := InstallBottomPanel.Width - 16;
  end
  else
  begin
    SetBoundsRect(WizardForm.OuterNotebook, OuterNotebookBounds);
    SetBoundsRect(WizardForm.InnerNotebook, InnerNotebookBounds);
  end;
end; 
```

结果是安装页面的样子（是的，我使用了 Comic Sans :-)

![在此处输入图像描述](../Images/1f806c167629ae7b7db9d5db045482a5.png)

# symfony1 - Symfony - 如何在管理生成器中更改过滤器标题“过滤器”？

> ID：11202927
> 
> 赞同：0
> 
> 时间：2012-06-26T07:51:07.773
> 
> 标签：symfony1

我想知道如何更改管理生成器中的过滤器标题。我想将“过滤器”更改为另一个词...

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:07:29.060

这里最好的方法是去你项目的缓存，找到自动生成的文件'_filters.php'。将此文件复制到您的管理模板目录

```
模块/我的模块/模板/

```

如果这是一个新的管理模块，它应该是空的。编辑...

```
回声 __('过滤器')

```

根据您的喜好.. 这不应该影响对 generator.yml 中定义的过滤器的更改

# java - 将 PHP 函数转换为 Java

> ID：11202931
> 
> 赞同：-1
> 
> 时间：2012-06-26T07:51:43.233
> 
> 标签：java, php, function, email

我一直在尝试将 PHP 代码转换为 Java，但它没有按预期工作。运行几次后，循环中出现“字符串索引超出范围”错误`char nextchar = inprogresskey.charAt(ranpos);`

PHP代码是：

```
function munge($address)
    {
        $address = strtolower($address);
        $coded = "";
        $unmixedkey = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.@";
        $inprogresskey = $unmixedkey;
        $mixedkey="";
        $unshuffled = strlen($unmixedkey);
        for ($i = 0; $i <= strlen($unmixedkey); $i++)
        {
            $ranpos = rand(0,$unshuffled-1);
            $nextchar = $inprogresskey{$ranpos};
            $mixedkey .= $nextchar;
            $before = substr($inprogresskey,0,$ranpos);
            $after = substr($inprogresskey,$ranpos+1,$unshuffled-($ranpos+1));
            $inprogresskey = $before.''.$after;
            $unshuffled -= 1;
        }
        $cipher = $mixedkey;

        $shift = strlen($address);

        for ($j=0; $j<strlen($address); $j++)
        {
            if (strpos($cipher,$address{$j}) == -1 )
            {
                    $chr = $address{$j};
                    $coded .= $address{$j};
            }
            else
            {
                    $chr = (strpos($cipher,$address{$j}) + $shift) % strlen($cipher);
                    $coded .= $cipher{$chr};
            }
        }

        $txt = "<script type=\"text/javascript\" language=\"javascript\">\n";
        $txt .= "\ncoded = \"" . $coded . "\"\n" .
            "  key = \"".$cipher."\"\n".
            "  shift=coded.length\n".
            "  link=\"\"\n".
            "  for (i=0; i<coded.length; i++) {\n" .
            "    if (key.indexOf(coded.charAt(i))==-1) {\n" .
            "      ltr = coded.charAt(i)\n" .
            "      link += (ltr)\n" .
            "    }\n" .
            "    else {     \n".
            "      ltr = (key.indexOf(coded.charAt(i))-
    shift+key.length) % key.length\n".
            "      link += (key.charAt(ltr))\n".
            "    }\n".
            "  }\n".
            "document.write(\"<a href='mailto:\"+link+\"'>\"+link+\"</a>\")\n" .
            "\n".
            "//-"."->\n" .
            "<" . "/script><noscript>N/A" .
            "<"."/noscript>";
        return $txt;
    } 
```

我的Java代码是：

```
private String encryptEmail(String email)
    {
        String address = email.toLowerCase();
        String coded = "";
        String unmixedkey = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.@";
        String inprogresskey = unmixedkey;
        String mixedkey = "";
        int unshuffled = unmixedkey.length();

        for (int i = 0; i <= unmixedkey.length(); i++) {
           Random random = new Random();
           int ranpos = random.nextInt(unshuffled - 1);

           char nextchar = inprogresskey.charAt(ranpos);
           mixedkey += nextchar;

           String before = StringUtils.substring(inprogresskey, 0, ranpos);
           String after = StringUtils.substring(inprogresskey, ranpos + 1, unshuffled - (ranpos + 1));
           inprogresskey = before + "" + after;
           unshuffled -= 1;
        }

        String cipher = mixedkey;
        int shift = address.length();

        for (int j = 0; j < address.length(); j++) {
            int chr = -1;
            if (StringUtils.indexOf(cipher, address.substring(j - 1, j)) == -1) {
                coded += address.charAt(j);
            } else {
                chr = (cipher.charAt(j + shift)) % cipher.length();
                coded += cipher.charAt(chr);
            }
       }

       StringBuilder sb = new StringBuilder();
       sb.append("<script type=\"text/javascript\">\n");
       sb.append("var coded = \"" + coded + "\";\n");
       sb.append("var key = \"" + cipher + "\";\n");
       sb.append("var shift = coded.length;\n");
       sb.append("var link = \"\";\n");
       sb.append("for (i = 0; i < coded.length; i++) {\n");
       sb.append("  if (key.indexOf(coded.charAt(i))==-1) {\n");
       sb.append("      ltr = coded.charAt(i);\n");
       sb.append("      link += (ltr);\n");
       sb.append("  }\n");
       sb.append("  else {\n");
       sb.append("      ltr = (key.indexOf(coded.charAt(i))-shift+key.length) % key.length;\n");
       sb.append("      link += (key.charAt(ltr));\n");
       sb.append("  }");
       sb.append("}");
       sb.append("document.write(\"<a rel='nofollow' href='mailto:\" + link + \"'>\" + link + \"</a>\");\n");
       sb.append("</script>");

       return sb.toString();
    } 
```

我错过了一些功能（charAt，indexOf）吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:57:45.590

我怀疑这`unshuffled`等于`0`最后一次通过循环，所以`charAt(-1)`失败了。

您应该看看像 Eclipse 和调试器这样的 Java IDE。添加断点将使您能够在代码运行时单步执行代码，并查看所有变量的值，这将是未来解决此类问题的最快方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:06:29.653

> int ranpos = random.nextInt(unshuffled - 1);

终于`ranpos = 1`

你正在做`nextInt(1 - 1)`

```
char nextchar = inprogresskey.charAt(ranpos) 
```

这就是上面的方式给你错误

你需要做的是：

更新你的 for 循环 `for (int i = 0; i < unmixedkey.length(); i++)`

并在循环内添加以下代码行

```
 if(unshuffled==1)
      {
          ranpos = 1;
      }     
    else {
         ranpos = random.nextInt(unshuffled - 1);
        } 
```

以下是循环代码的完整功能。

```
for (int i = 0; i < unmixedkey.length(); i++) {
           Random random = new Random();
           int ranpos=0;
           if(unshuffled==1)
           {
               ranpos = 1;
           }else{
               ranpos = random.nextInt(unshuffled - 1);
           }
           char nextchar = inprogresskey.charAt(ranpos);
           mixedkey += nextchar;
           String before = StringUtils.substring(inprogresskey, 0, ranpos);
           String after = StringUtils.substring(inprogresskey, ranpos + 1, unshuffled - (ranpos + 1));
           inprogresskey = before + "" + after;
           unshuffled -= 1;
        } 
```

# java - 从给定的地址名称获取纬度和经度。不是地理编码器

> ID：11202934
> 
> 赞同：11
> 
> 时间：2012-06-26T07:52:00.663
> 
> 标签：java, android, google-maps

我有一个地址名称，我想为它获取准确的纬度和经度。我知道我们可以使用 Geocoder 的*getFromLocationName(address,maxresult)*得到这个。

问题是，我得到的结果总是空的——不像我们用[https://maps.google.com/](https://maps.google.com/)得到的结果。与 Geocoder 不同，这总能让我得到一些结果。

我还尝试了另一种方法：（ `"http://maps.google.com/maps/api/geocode/json?address=" + address + "&sensor=false"`这是[一个链接](https://stackoverflow.com/questions/4873076/get-latitude-and-longitude-from-city-name)！）它比地理编码器提供更好的结果，但经常返回错误`(java.net.SocketException: recvfrom failed: ECONNRESET (Connection reset by peer)`。这很无聊。

**我的问题是**：我们如何通过在 java 代码中搜索[https://maps.google.com/获得相同的 latlong 结果？](https://maps.google.com/)

**附加**：关于使用“ [http://maps.google.com/maps/api/geocode/json?address=”+](http://maps.google.com/maps/api/geocode/json?address=)地址+“&sensor=false”的***api文档***在哪里

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-21T07:44:28.870

阿尔伯特，我认为您担心的是您的代码无法正常工作。在这里，下面的代码非常适合我。我认为您缺少`URIUtil.encodeQuery`将字符串转换为 URI。

我正在使用 gson 库，下载它并将其添加到您的路径中。

要获取用于 gson 解析的类，您需要转到[jsonschema2pojo](http://www.jsonschema2pojo.org/)。只需在浏览器上触发**[http://maps.googleapis.com/maps/api/geocode/json?address=Sayaji+Hotel+Near+balewadi+stadium+pune&sensor=true ，获取结果并将其粘贴到此站点上。](http://maps.googleapis.com/maps/api/geocode/json?address=Sayaji+Hotel+Near+balewadi+stadium+pune&sensor=true)**它会为你生成你的 pojo。您可能还需要添加一个 annotation.jar。

相信我，工作很容易。不要沮丧。

```
try {
        URL url = new URL(
                "http://maps.googleapis.com/maps/api/geocode/json?address="
                        + URIUtil.encodeQuery("Sayaji Hotel, Near balewadi stadium, pune") + "&sensor=true");
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setRequestMethod("GET");
        conn.setRequestProperty("Accept", "application/json");

        if (conn.getResponseCode() != 200) {
            throw new RuntimeException("Failed : HTTP error code : " + conn.getResponseCode());
        }
        BufferedReader br = new BufferedReader(new InputStreamReader((conn.getInputStream())));

        String output = "", full = "";
        while ((output = br.readLine()) != null) {
            System.out.println(output);
            full += output;
        }

        PincodeVerify gson = new Gson().fromJson(full, PincodeVerify.class); 
        response = new IsPincodeSupportedResponse(new PincodeVerifyConcrete(
                gson.getResults().get(0).getFormatted_address(), 
                gson.getResults().get(0).getGeometry().getLocation().getLat(),
                gson.getResults().get(0).getGeometry().getLocation().getLng())) ;
        try {
            String address = response.getAddress();
            Double latitude = response.getLatitude(), longitude = response.getLongitude();
            if (address == null || address.length() <= 0) {
                log.error("Address is null");
            }
        } catch (NullPointerException e) {
            log.error("Address, latitude on longitude is null");
        }
        conn.disconnect();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

Geocode http 有效，我刚刚解雇了它，结果如下

```
{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "Pune",
               "short_name" : "Pune",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Pune",
               "short_name" : "Pune",
               "types" : [ "administrative_area_level_2", "political" ]
            },
            {
               "long_name" : "Maharashtra",
               "short_name" : "MH",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "India",
               "short_name" : "IN",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Pune, Maharashtra, India",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 18.63469650,
                  "lng" : 73.98948670
               },
               "southwest" : {
                  "lat" : 18.41367390,
                  "lng" : 73.73989109999999
               }
            },
            "location" : {
               "lat" : 18.52043030,
               "lng" : 73.85674370
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 18.63469650,
                  "lng" : 73.98948670
               },
               "southwest" : {
                  "lat" : 18.41367390,
                  "lng" : 73.73989109999999
               }
            }
         },
         "types" : [ "locality", "political" ]
      }
   ],
   "status" : "OK"
} 
```

**编辑**

关于“答案不包含足够的细节”

从所有研究中，您期望谷歌地图可以参考位置、区域、城市的每一种组合。但事实仍然是谷歌地图在其自身的上下文中包含地理和反向地理。你不能指望它有一个像`Sayaji Hotel, Near balewadi stadium, pune`. Web google maps 会为您找到它，因为它使用更广泛的`Search`丰富的 google 后端。google api 的唯一反向地理地址是从他们自己的 api 接收的。对我来说，这似乎是一种合理的工作方式，考虑到我们的印度地址系统有多复杂，第二个十字路口可能离第一个十字路口很远:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:00:53.170

[以下](http://www.geonames.org/export/reverse-geocoding.html)是提供此功能的 Web 服务列表。

我最喜欢的一个是[这个](http://www.geonames.org/export/web-services.html#findNearbyPlaceName)

你为什么不试试打。

[http://api.geonames.org/findNearbyPlaceName?lat=18.975&lng=72.825833&username=demo](http://api.geonames.org/findNearbyPlaceName?lat=18.975&lng=72.825833&username=demo)

它返回以下输出。（确保你把你的纬度和经度放在 URL 中）

![在此处输入图像描述](../Images/c9e941ab016d88f3fd970aeafe012aa7.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-25T06:42:34.823

希望这可以帮助你：

```
public static GeoPoint getGeoPointFromAddress(String locationAddress) {
        GeoPoint locationPoint = null;
        String locationAddres = locationAddress.replaceAll(" ", "%20");
        String str = "http://maps.googleapis.com/maps/api/geocode/json?address="
                + locationAddres + "&sensor=true";

        String ss = readWebService(str);
        JSONObject json;
        try {

            String lat, lon;
            json = new JSONObject(ss);
            JSONObject geoMetryObject = new JSONObject();
            JSONObject locations = new JSONObject();
            JSONArray jarr = json.getJSONArray("results");
            int i;
            for (i = 0; i < jarr.length(); i++) {
                json = jarr.getJSONObject(i);
                geoMetryObject = json.getJSONObject("geometry");
                locations = geoMetryObject.getJSONObject("location");
                lat = locations.getString("lat");
                lon = locations.getString("lng");

                locationPoint = Utils.getGeoPoint(Double.parseDouble(lat),
                        Double.parseDouble(lon));
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return locationPoint;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-21T07:53:50.583

我按顺序使用：
- Google Geocoding API v3（在少数情况下会出现[此处](https://stackoverflow.com/questions/16770659/google-maps-geocoding-api-v3-search-ok-with-wifi-but-responses-over-query-limit)描述的问题）
- Geocoder（在某些情况下会出现[此处](https://stackoverflow.com/questions/16655549/geocoder-getfromlocationname-throws-service-not-available-exception-on-andro)描述的问题）。

如果我没有收到来自 Google Geocoding API 的结果，我会使用 Geocoder。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-26T09:52:56.733

据我所知，Google Maps 正在使用 Google Places API 进行自动完成，然后获取可以从中获取坐标的位置的详细信息。

[https://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/) [https://developers.google.com/places/training/](https://developers.google.com/places/training/)

这种方法应该会给你预期的结果。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-10-23T15:31:57.953

```
String locationAddres = anyLocationSpec.replaceAll(" ", "%20");
URL url = new URL("https://maps.googleapis.com/maps/api/geocode/json?sensor=false&address="+locationAddres+"&language=en&key="YourKey");
try(InputStream is = url.openStream(); JsonReader rdr = Json.createReader(is)) {
    JsonObject obj = rdr.readObject();
    JsonArray results = obj.getJsonArray("results");
    JsonObject geoMetryObject, locations;

    for (JsonObject result : results.getValuesAs(JsonObject.class)) {
        geoMetryObject=result.getJsonObject("geometry");
        locations=geoMetryObject.getJsonObject("location");
        log.info("Using Gerocode call - lat : lng value for "+ anyLocationSpec +" is - "+locations.get("lat")+" : "+locations.get("lng"));
        latLng = locations.get("lat").toString() + "," +locations.get("lng").toString();
    }
} 
```

# delphi - Delphi (2007) ide 将 dproj 文件中的绝对路径更改为相对路径...为什么以及何时？

> ID：11202938
> 
> 赞同：3
> 
> 时间：2012-06-26T07:52:19.117
> 
> 标签：delphi

我们的 delphi 2007 IDE 有一个有点烦人的问题，delphi IDE 有时会无缘无故地将 <DCC_DependencyCheckOutputName> 节点中的绝对路径更改为相对路径。

例如，在我们保存项目之前，这是写在 dproj 文件中的：

> <DCC_DependencyCheckOutputName>D:\DcProgs\ProgUtils\ConvertToSmw\ConvertToSmw.exe</DCC_DependencyCheckOutputName>

并在 delphi 2007 ide 中保存后更改为

> <DCC_DependencyCheckOutputName>..\..\..\ProgUtils\ConvertToSmw\ConvertToSmw.exe</DCC_DependencyCheckOutputName>

我的问题是 delphi 为什么以及何时这样做，有没有办法阻止 delphi 这样做？

您会看到我们制作了一个自定义构建脚本，它为我们的项目进行夜间构建，并在成功构建后使用 upx 打包可执行文件。要知道 exe 文件的位置，我们使用“DCC_DependencyCheckOutputName”节点，但 upx 不喜欢相对路径，所以我们需要绝对路径。如果 delphi 停止更改这一点，或者我们至少知道何时或为什么会发生这种情况，这样我们就知道在 ide 内部不应该做什么来防止这种情况发生，那就太好了。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T13:28:34.257

当项目和引用的文件位于同一驱动器上时，IDE 会执行此操作。

Delphi 试图帮助您使用相对路径创建项目和引用，因此您可以更轻松地在目录树中移动到另一个位置或机器。

有时这会反击（例如，当您想要包含 Delphi 示例代码中的部分时）。

这样做的唯一方法是确保您希望具有绝对路径名的部分位于与主项目不同的驱动器号上。

也可能（我还没有尝试过）您可以通过将它们放在不同的 UNC 路径上来强制执行此操作。

# mips - 考试 - 机器码编码

> ID：11202942
> 
> 赞同：0
> 
> 时间：2012-06-26T07:52:42.400
> 
> 标签：mips, opcode

我发现了这个考试问题，我必须`beq`说明指令是如何用机器代码编码的。

这是代码：

```
loop:  addu    $8, $9, $10
    addiu   $8, $8, 0x00FF7A01
    beq    $8, $0, loop 
```

虽然我的第一个问题是`0x1100FFFD`正确的答案是`0x1100FFFB`。我相信这是因为`0x00FF7A01`大于 16 位并且`addiu $8, $8, 0x00FF7A01`必须在不止一条指令中“反编译”。

所以这是我的问题。

**Q1** - 在什么中`addiu $8, $8, 0x00FF7A01`解构？

**Q2** - 如果`beq`指令上的立即数字段大于 16 位怎么办？我必须使用`jumps`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:36:48.993

Q1)

对于您的第一个问题，您的意思是汇编，而不是反编译。

```
 addiu   $8, $8, 0x00FF7A01 
```

您的评估是正确的，因为即时值大于我们可以在单个指令中存储的值，我们需要使用多个指令。汇编器将为此使用 $at（Assembler Temporary，即 $1）寄存器。

```
lui    $at, 0x00FF
ori    $at, $at, 0x7A01
addu   $t0, $t0, $at 
```

Q2)

分支指令使用所谓的 PC 相对寻址 - 立即值不包含实际地址，而是字偏移量。由于我们知道指令必须是字 (2^2) 对齐的，因此低 2 位始终为零。实际地址将通过将偏移量左移 2 并将其添加到分支后面指令的地址来即时计算。最终值将是我们相对于 PC 的有效地址。所以我们实际上有 17 位可以使用（技术上是 18，但偏移量是有符号的）。

当偏移量超过该范围时，汇编器将使用远分支 - 一个分支后跟一个跳转。

```
beq $x, $y, label 
```

会变成

```
 beq   $x, $y, temp
      # ...
      j tskip
temp:
      j tlabel
      # ...
      # ...
tskip: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:17:44.670

不知道汇编器在这里是如何工作的，但要`addiu $8, $8, 0x00FF7A01`正确组装，正如您所料，需要多条指令。通常，`addiu`是仅接受 16 位整数的有效指令。

该指令`addiu $8, $8, 0x00FF7A01`被最低限度地重写为以下 3 条指令：

```
addiu $8, $8, 0x7A01
lui $11, 0x00FF // Assume nothing significant is stored in $11
addiu $8, $8, $11 
```

由于现在与分支指令有 5 条指令的差异，我们需要将 -5 放在 的立即数字段中`beq`，即 0xFFFB（[此处](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Mips/jump.html)详细说明）。

如果目标超出 -2 ^(17)到 2 ^(17) -1 字节的范围（或指令数的 15 次方），则必须使用跳转指令。

# java - 将 ByteBuffer 的一部分转换回 String

> ID：11202950
> 
> 赞同：2
> 
> 时间：2012-06-26T07:53:18.963
> 
> 标签：java, string, bytebuffer

我有一个大`String`的，曾经被转换为`ByteBuffer`& 然后在稍后阅读几次时，只`String`需要呈现一部分（文本的概述），所以我只想将一部分转换`ByteBuffer`为`String`.

是否可以仅将字节缓冲区的一部分转换为字符串而不是 [将整个转换`Bytebuffer`为`String`& 然后使用`substring()`]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:02:43.210

```
try {
    ByteBuffer bbuf = encoder.encode(CharBuffer.wrap(yourstr));
    bbuf.position(0);
    bbuf.limit(200);
    CharBuffer cbuf = decoder.decode(bbuf);
    String s = cbuf.toString();
    System.out.println(s);
} catch (CharacterCodingException e) {
} 
```

它应该从字节缓冲区返回从 0\. 字节开始到 200 结束的字符。

更确切地说：

```
 ByteBuffer bbuf = ByteBuffer.wrap(yourstr.getBytes());
    bbuf.position(0);
    bbuf.limit(200);

    byte[] bytearr = new byte[bbuf.remaining()];
    bbuf.get(bytearr);
    String s = new String(bytearr); 
```

其作用相同，但没有明确的字符解码/编码。

当然，解码确实发生在构造函数中，`String s`并且它依赖于平台，所以要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T04:09:55.850

```
// convert all byteBuffer to string
String fullByteBuffer = new String(byteBuffer.array());

// convert part of byteBuffer to string
byte[] partOfByteBuffer = new byte[PART_LENGTH];
System.arraycopy(fullByteBuffer.array(), 0, partOfByteBuffer, 0, partOfByteBuffer.length);
String partOfByteBufferString = new String(partOfByteBuffer.array()); 
```

# android - ICS 上的同步锁相错误

> ID：11202952
> 
> 赞同：0
> 
> 时间：2012-06-26T07:53:28.367
> 
> 标签：android, android-4.0-ice-cream-sandwich

我的问题如下，我拥有最新的所有库和所有东西（包括内核）来让新的 Qualcomm ICS Adreno 驱动程序在 ICS 上工作。

构建后，我在[logcat](http://pastebin.com/JUBfnhKL) (*) 第 435 行收到一个已知错误。

我的手机是名为 Galaxy 5 或 Europa 的 ARMv6。

欢迎任何帮助解决 logcat 上的任何问题。

(*)

```
E/msm7x27.gralloc( 4574): We support 2 buffers

I/msm7x27.gralloc( 4574): using (fd=34)

I/msm7x27.gralloc( 4574): id           = msmfb30_30001

I/msm7x27.gralloc( 4574): xres         = 240 px

I/msm7x27.gralloc( 4574): yres         = 320 px

I/msm7x27.gralloc( 4574): xres_virtual = 240 px

I/msm7x27.gralloc( 4574): yres_virtual = 640 px

I/msm7x27.gralloc( 4574): bpp          = 32

I/msm7x27.gralloc( 4574): r            = 24:8

I/msm7x27.gralloc( 4574): g            = 16:8

I/msm7x27.gralloc( 4574): b            =  8:8

I/msm7x27.gralloc( 4574): width        = 38 mm (160.421051 dpi)

I/msm7x27.gralloc( 4574): height       = 51 mm (159.372543 dpi)

I/msm7x27.gralloc( 4574): refresh rate = 0.00 Hz

D/CALCFPS ( 4574): DEBUG_CALC_FPS: 0

D/CALCFPS ( 4574): period: 10

D/CALCFPS ( 4574): ignorethresh_us: 500000

D/CALCFPS ( 4574): DEBUG_CALC_FPS: 0

D/CALCFPS ( 4574): period: 10

D/CALCFPS ( 4574): ignorethresh_us: 500000

D/FramebufferNativeWindow( 4574): mNumBuffers = 2

**E/libgenlock( 4574): genlock_create_lock: open genlock device failed (err=No such file or directory)** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:19:18.180

这是一个迟到的回复，但看起来您的错误源于您的内核没有内置到内核中的同步锁相。您是否将同步锁定设备驱动程序反向移植/合并到内核中？

不确定你运行的是什么 CPU，但它显然是 MSM/QCOM ..

所以这是一个很好的起点。

[https://github.com/ikarosdev/triumph-kernel-msm7x30/commit/d382ea0e23631bfce889425c0c3d7889df57bfbf](https://github.com/ikarosdev/triumph-kernel-msm7x30/commit/d382ea0e23631bfce889425c0c3d7889df57bfbf)

# c# - MVC 中的 MEF 和嵌入式视图

> ID：11202955
> 
> 赞同：3
> 
> 时间：2012-06-26T07:53:52.977
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, mef

我有一个使用 MEF 作为控制器的 MVC 应用程序，一切正常。

[http://bryanavery.co.uk/post/2012/03/12/Using-MEF-in-MVC-3.aspx](http://bryanavery.co.uk/post/2012/03/12/Using-MEF-in-MVC-3.aspx)

但我现在想采取下一步行动，将我的视图移动到嵌入到 DLL 中，并让 MEF 为 MVC 注入视图。

我有一组 DLL，它们将保存应用程序所需的不同视图。

我正在使用 Razor，这应该不会有太大的不同，有人设法做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:10:13.153

[MvcCodeRouting](http://mvccoderouting.codeplex.com/)支持嵌入式视图。另外，看看[这篇文章](http://maxtoroq.github.io/2012/02/aspnet-mvc-plugins.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:02:49.700

也许你想看看便携式领域，这里有一篇很好的文章 [http://lostechies.com/erichexter/2009/11/01/asp-net-mvc-portable-areas-via-mvccontrib/](http://lostechies.com/erichexter/2009/11/01/asp-net-mvc-portable-areas-via-mvccontrib/)

这是 mvccontrib [http://mvccontrib.codeplex.com/](http://mvccontrib.codeplex.com/)

# python - 如何使用 xmpppy 向 jabber 客户端发送消息？

> ID：11202959
> 
> 赞同：0
> 
> 时间：2012-06-26T07:54:10.590
> 
> 标签：python, xmpp, xmpppy

我必须发送基于 xmpp 的聊天客户端 (hipchat)，为此我使用[xmpp.py。](http://xmpppy.sourceforge.net/)现在，我正在尝试从 shell 发送消息。以下是我从 shell 执行的语句：

```
>>> import xmpp
>>> jid = xmpp.protocol.JID('99999_9999@chat.hipchat.com')
>>> cl=xmpp.Client(jid.getDomain(),debug=[])
>>> cl.connect()
'tls'
>>> cl.auth(jid.getNode(),'password')
'sasl'
>>> cl.send(xmpp.protocol.Message('99999_9999@chat.hipchat.com','hey!'))
'3' 
```

我使用相同的 jabber id 进行身份验证和作为接收者。我也在聊天室在线，但我没有收到任何消息。少了什么东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:57:08.247

一些较旧的 XMPP 服务器需要初始状态。在 之前使用以下调用发送状态`cl.send`：

```
cl.SendInitPresence(requestRoster=0) 
```

另请参阅 xmpppy 主页中的 xsend 示例：http: [//xmpppy.sourceforge.net/examples/xsend.py](http://xmpppy.sourceforge.net/examples/xsend.py)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:27:56.810

我错过了`typ`参数。添加它的价值`chat`解决了这个问题：

```
cl.send(xmpp.protocol.Message('99999_9999@chat.hipchat.com','hey!', typ='chat')) 
```

# c# - 'System.Configuration.ConfigurationErrorsException: 请求的数据库 WebBank 未在配置中定义

> ID：11202961
> 
> 赞同：0
> 
> 时间：2012-06-26T07:54:28.953
> 
> 标签：c#, .net, sql-server

请有人告诉我上述书面错误何时发生。我只是想获得更多关于这方面的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:04:27.717

检查`config`您提到的文件`connection string`并更正它... 提到的数据库可能不是有效的，或者服务器名称可能无效。您的连接字符串应如下所示

```
Server=myServerAddress;Database=myDataBase;User ID=myUsername;Password=myPassword;Trusted_Connection=False; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:10:14.397

1.  将连接字符串放置到宿主库或启动项目。
2.  很明显，您正在尝试访问配置条目，但未找到它，因此配置管理器/访问器会引发此错误。
3.  给我们一些代码来诊断问题，很难猜测是什么导致了错误。

# firefox - 使 CSS 过渡效果适用于所有浏览器

> ID：11202963
> 
> 赞同：9
> 
> 时间：2012-06-26T07:54:33.747
> 
> 标签：firefox, google-chrome, css, compatibility

我目前有以下 CSS，它适用于 Google Chrome (Webkit)，但不适用于任何其他浏览器。

使它与一切兼容的最佳方法是什么？

如您所见，它正在使用 webkit，但我不确定 moz 等价物是什么。

非常感谢

```
.card{
    margin-top: -50px;
}

.card {
    width: 286px; height: 224px;
    -webkit-transform-style: preserve-3d;
    -webkit-transition: 0.5s;
    -moz-transform-style: preserve-3d;
    -moz-transition: 0.5s;
}
    .container:hover .card {
        -webkit-transform: rotateY(180deg); 
        -moz-transform: rotateY(180deg);                

    }

.face {
    position: absolute;
    -webkit-backface-visibility: hidden;
    -moz-backface-visibility: hidden;
}

.megatron {
    float: left; top: 30px;
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
}
    .megatron .front {

    }
    .megatron .back {
        -webkit-transform: rotateY(180deg);
        -moz-transform: rotateY(180deg);

    }
        .megatron .back h2 {
            background: url(megatron-title.png); text-indent: -9999px; 
        }
        .megatron img {
            float: right;
        } 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-26T17:08:16.637

您的基本跨浏览器 CSS3 过渡声明：

```
-webkit-transition: all 500ms ease;
-moz-transition: all 500ms ease;
-ms-transition: all 500ms ease;
-o-transition: all 500ms ease;
transition: all 500ms ease; 
```

这是我最喜欢的帮助加快进程的工具之一：http: [//css3generator.com/](http://css3generator.com/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-13T03:57:54.097

也许你需要：

```
-webkit-...  // For Webkit browser(Chrome, Safari...)
-moz-...     // For Mozilla browser
-o-...       // For Opera browser
-ms-...      // For Microsoft browser
none...      // For all browser(Newest version) 
```

**例子：**

```
-webkit-transition: 3s ease;
-moz-transition: 3s ease;
-o-transition: 3s ease;
-ms-transition: 3s ease;
transition: 3s ease; 
```

希望这是有用的。

# java - Java Interposer 中的堆栈粉碎

> ID：11202965
> 
> 赞同：3
> 
> 时间：2012-06-26T07:54:35.030
> 
> 标签：java, c, linux, stack, interposing

我正在编写一个 Java 插入器来修改与网络通信相关的系统调用。基本上，我想修改预期收件人的 IP 和端口。

该代码在我的笔记本电脑上正常工作，但在大学电脑上，它给出了**堆栈粉碎错误**：

```
*** stack smashing detected ***: java terminated
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(__fortify_fail+0x45)[0xb7702dd5]
/lib/i386-linux-gnu/libc.so.6(+0xffd8a)[0xb7702d8a]
/home/mwaqar/vibe/ldinterposer_2.so(+0x28e4)[0xb77c98e4]
/home/mwaqar/vibe/ldinterposer_2.so(connect+0x9c5)[0xb77c9093]
/usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/libnet.so(+0xceff)[0x8b226eff]
/usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/libnet.so(Java_java_net_PlainSocketImpl_socketConnect+0x4c1)[0x8b227c51] 
```

相关代码（**connect**系统调用的插入）如下：

```
int connect(int fd, const struct sockaddr *sk, socklen_t sl)
{
struct sockaddr_in      *lsk_in  = (struct sockaddr_in *)  sk;
struct sockaddr_in6     *lsk_in6 = (struct sockaddr_in6 *) sk;

struct sockaddr_in      addr4;

unsigned int            len;
int                     nbytes, oport, tport, ret, i;
char                    ip_address[30];
char                    buffer[1024];   
char                    tempBuffer[1024];   

if((lsk_in->sin_family == AF_INET) || (lsk_in->sin_family == AF_INET6))
{
    if(lsk_in->sin_family == AF_INET)
    {
        oport = ntohs(lsk_in->sin_port);
        memcpy(&addr4.sin_addr.s_addr, &lsk_in->sin_addr.s_addr, sizeof(addr4.sin_addr.s_addr));
    }
    else if(lsk_in->sin_family == AF_INET6)
    {
        oport = ntohs(lsk_in6->sin6_port);
        memcpy(&addr4.sin_addr.s_addr, lsk_in6->sin6_addr.s6_addr+12, sizeof(addr4.sin_addr.s_addr));
    }

    memset(buffer, '\0', sizeof(buffer));
    sprintf(buffer, "%s%c%s%c%i", NAT_VM_CONNECT_RULE, NAT_VM_DELIMITER, (char *)inet_ntoa(addr4.sin_addr), NAT_VM_DELIMITER, oport);

    nbytes = send(sock, buffer, strlen(buffer), 0);
    if(DEBUG_MODE)
        fprintf(stdout, "[LD_INTERPOSER] Sent[%s]\n", buffer);

    memset(buffer, '\0', sizeof(buffer));
    nbytes = recv(sock, buffer, sizeof(buffer), 0);

    fprintf(stderr, "[LD_INTERPOSER] Received CONNECT [%s]\n", buffer);

    memset(ip_address, '\0', sizeof(ip_address));
    int pos = strrchr(buffer, NAT_VM_DELIMITER) - buffer;

    strncpy(ip_address, buffer, pos);
    ip_address[pos] = '\0';
    tport = atoi(buffer + pos + 1);

    if(lsk_in->sin_family == AF_INET)
    {
        lsk_in->sin_addr.s_addr = inet_addr(ip_address + 7);
        lsk_in->sin_port = htons(tport);
    }
    else if(lsk_in->sin_family == AF_INET6)
    {
        inet_pton(AF_INET6, ip_address, &(lsk_in6->sin6_addr));
        lsk_in6->sin6_port = htons(tport);
    }

    fprintf(stderr, "[LD_INTERPOSER] IP[%s], Port[%d] for VM[%s]\n", ip_address, tport, vm_ip);
}

int my_ret = real_connect(fd, sk, sl);
fprintf(stderr, "Done\n");
return my_ret;
} 
```

在这里，**sock**是我在共享库的“构造函数”中初始化的一个套接字。

该程序正常工作并打印**Done**。在最后（返回）行，它给出了堆栈粉碎错误。我不知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:20:37.293

我怀疑`strrcr`返回`NULL`线

```
int pos = strrchr(buffer, NAT_VM_DELIMITER) - buffer; 
```

然后`pos`将是巨大的，以下行将读取和写入无效地址。

始终检查函数的返回值（尤其是在从程序外部接收到的数据上运行它们时）。

另外，正如我在评论中所写，永远不要使用`sprintf`. 我不知道它是否失败，因为我不知道是什么`NAT_VM_CONNECT_RULE`。即使您计算了字节数并知道自己没事，您仍然应该小心并`snprintf`改用它。

# signalr - 无法获取属性“运输”的值 - SignalR

> ID：11202968
> 
> 赞同：0
> 
> 时间：2012-06-26T07:54:59.317
> 
> 标签：signalr

我在我的 asp.net 网络表单应用程序中使用信号器，一切似乎都很好，除了我在线上遇到异常

```
$.connection.hub.start(); 
```

但是，如果我在“Do you want to Debug”弹出窗口中单击否，信号器功能工作得很好。完整的错误信息是这样的

> 无法获取属性“运输”的值：对象为空或未定义

这是完整的js代码

```
var docStatusUpdate = $.connection.docstatus;

    docStatusUpdate.statusUpdate = function (msg, session) {
        var sessionId = $('input#sessionValue').val();
        if (sessionId == session) {
            $("#statusUpdateMsgContainer").text(msg);
        }
    };

    docStatusUpdate.endProcessing = function (session) {

        var sessionId = $('input#sessionValue').val();

        if (sessionId == session) {
            $('input[id*=btnRefresh]').click();
        }
    };

    $.connection.hub.start();

    function assignValues() {} 
```

我使用的是 Asp.net 4.0，signalr 是通过 nuget 安装的。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:33:30.937

我在[http://jabbr.net](http://jabbr.net)上就这个问题进行了讨论，结果发现这些建议都不起作用。主要是确保 jQuery 库不会被多次引用。无论如何，我刚刚删除了浏览器数据，它开始按预期工作。

# jasper-reports - 在 iReport 中显示一份报告的更多报告

> ID：11202970
> 
> 赞同：0
> 
> 时间：2012-06-26T07:55:10.507
> 
> 标签：jasper-reports, ireport

我需要在经典报告、图表等页面上显示多个报告。我怎么能用 iReport 做到这一点？（我正在使用 iReport v 4.1.1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:05:20.417

使用子报表。您的主报表仅包含两个或多个放置在页面上的子报表，您希望它们显示出来。

# php - php imap 电子邮件正文阅读

> ID：11202972
> 
> 赞同：0
> 
> 时间：2012-06-26T07:55:12.277
> 
> 标签：php, special-characters, imap

我通过 imap 收到我的电子邮件，但在我的收件箱中收到一封包含字母 Â 的电子邮件，而 imap 不会收到它的正文。其余的电子邮件可以正常阅读。它的标题很好，它会阅读。

我怎样才能用这种信件获得电子邮件正文

代码示例在这里

```
$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to mail server: ' . imap_last_error());
$emails = imap_search($inbox,'SUBJECT "UKPF - New Booking"'); 
$overview = imap_fetch_overview($inbox,$email_number,0);
$message  = imap_fetchbody($inbox,$email_number,2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-21T14:36:01.703

我已经使用这个引用的可打印解码 php 函数解决了这个问题。在你的情况下：

```
$message = quoted_printable_decode($imap_fetchbody($inbox,$email_number,2)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T08:02:54.227

我曾经在我的 php 表单中遇到某些字符的问题，这有帮助：

我把这个

```
"MIME-Version: 1.0; Content-Type: text/plain; charset=utf-8" 
```

在`mail()`参数中。我不知道 imap 是什么或它的工作原理有何不同，但希望这会有所帮助。

# hibernate - POJO（对象模型；setter 和 getter）和 Hibernate 映射的动态生成，当仅提供表名作为参数时

> ID：11202976
> 
> 赞同：0
> 
> 时间：2012-06-26T07:55:27.800
> 
> 标签：hibernate, orm, jboss, hibernate-mapping

我的问题有点棘手，我正在尽力让您了解我的要求。

问题：我想从数据库表中生成一个 csv 文件！怎么看。

仅用于理解的虚拟方法。

**public void convertToCsv(tablename , csv_file_path_name);**

场景：在运行时提供表名时，方法需要生成它的csv文件，（表名可以是数据库中任何可用的表。），为了完成这个任务，类需要动态生成POJO和hibernate映射，因为不同表的列不同，我们无法自己定义POJO（对象模型）和hibernate映射。

tablename 是在运行时提供的，所以该方法需要在运行时生成 POJO 和 hibernate 映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:12:55.247

这是不可能的。Hibernate 需要一组定义良好的实体类及其在启动时的映射。但实际上，如果您在表级别工作并且只需要 CSV 文件中表的所有列，那么 Hibernate 不是正确的工具。您应该只使用 JDBC。

从表中选择所有内容，获取结果集元数据以了解列的数字类型和名称，遍历 JDBC 结果集，并为结果集的每一行生成一个新的 CSV 行。

# c++ - 访问结构内容，当类型及其内容在不同 DLL 之间变化时

> ID：11202979
> 
> 赞同：2
> 
> 时间：2012-06-26T07:55:35.043
> 
> 标签：c++, dll

我有这些项目，我需要在其中连接几个代码生成的 dll（如果你想知道，来自 MATLAB）。dll 基本上是相似的，假设这两个函数和下面的两个结构是感兴趣的。

```
function1_ptr  = (void(*)(void)) GetProcAddress(libraryHandle, "NAME_function1");
function2_ptr  = (void(*)(void)) GetProcAddress(libraryHandle, "NAME_function1");
struct1_ptr    = (STRUCT1_TYPE*) GetProcAddress(libraryHandle, "NAME_var1");
struct2_ptr    = (STRUCT2_TYPE*) GetProcAddress(libraryHandle, "NAME_var2"); 
```

在 dll 之间，它们仅因名称前缀 ( *NAME* )、结构类型 (*STRUCTX_TYPE*​​) 和函数内容而异。

加载这些dll的代码的要求是它应该能够运行函数（没问题）并且能够获取和设置两个结构的成员变量（问题！！） *（如果他们可以使成员保持不变变化会产生问题）*

我的问题是： **考虑到这些（非常松散的）要求，连接这样一个 dll 集合的最简单方法是什么？** （如果描述不完整，请发表评论，我会编辑我的帖子）

下面是我对一个我不满意的解决方案的想法......

* * *

我当前的代码是这样的：

```
class Interface
{
    virtual void function1(void) = 0;
    virtual void function2(void) = 0;
    virtual void function3(void) = 0;

    virtual void setInput(STRUCT_MEMBERS_ENUM input, double value) = 0;
virtual double getOutput(STRUCT_MEMBERS_ENUM output) const = 0;
};

template <typename STRUCT1_TYPE, typename STRUCT2_TYPE>
class Model : public Interface 
{
    ...
}; 
```

这样做的缺点是，如果我想使用一个新的 dll 文件，我需要包含一个新的头文件，创建一个具有相关结构类型的模型的新实例，并使用结构的成员定义一个新的枚举......因为其中，dll中的*动态*有点丢失。

现在我知道 C++ 没有反射，但我希望得到一个提示，至少能够简化使用我拥有的 dll 内容的过程。

* * *

我希望已经清楚地解释了这个问题，我将非常感谢任何答案或答案方向！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:32:45.403

至少，您将需要要访问的 dll 的头文件。没有通用的方法可以了解变量的结构或内容。即使使用头文件，您也可能会被编译器实现之间的实现定义差异所困扰，甚至在编译 DLL 时编译器开关处于活动状态。

简而言之：**没有安全的方法可以做你想做的事。**

如果 DLL 旨在让您访问私有变量的成员，它应该为您提供访问器函数来获取和设置各种值。

# magento - 在后端显示空白页面，然后在 Magento 中将新模块添加到服务器

> ID：11202980
> 
> 赞同：0
> 
> 时间：2012-06-26T07:55:35.413
> 
> 标签：magento

有人帮我解决这个问题吗？我只是创建2模块：ReviewDesign和RatingDesign，结构和代码相同magento中的Review和Rating，我只更改所有名称文件和文件中的内容变成不同的名称，例如：Review -> Reviewdesign，Rating -> Ratingdesign ...好的，当我给 localhost 时，但那不行，当我最多 2 个模块到服务器时。登录管理员，显示徽标和右角，登录 - 注销...，下面的菜单和内容是空白的。我不知道为什么？所以非常非常好帮手！提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:31:22.883

注意你的信外壳。HTML区分大小写，因此 reviewDesign 与 reviewdesign 不同**。**

# mysql - MySQL：float将大值转换为指数

> ID：11202981
> 
> 赞同：0
> 
> 时间：2012-06-26T07:55:37.660
> 
> 标签：mysql

在我的数据库表中，我有一个字段浮动，如果我插入成本**4559006**保存为**4.55901e+006**并且当我对其执行数学运算时，它会产生错误，我会在其中存储项目成本。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:05:08.080

浮点类型不适合精确计算

利用`decimal(15,2)`

15 是有效位数，包括刻度 2。如果需要，您可以将其增加到 65。

[http://dev.mysql.com/doc/refman/5.1/en/fixed-point-types.html](http://dev.mysql.com/doc/refman/5.1/en/fixed-point-types.html)

# ruby-on-rails-3 - 如何在 Heroku 上使用 hstore

> ID：11202988
> 
> 赞同：3
> 
> 时间：2012-06-26T07:56:10.457
> 
> 标签：ruby-on-rails-3, postgresql, heroku, hstore

根据[https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/](https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/)我做了“heroku addons:add heroku-postgresql:dev”。但是当我这样做时

```
class CreateUsers < ActiveRecord::Migration 
  def up 
    create_table :users do |t| 
      execute "CREATE EXTENSION hstore" 
      t.hstore :access 
    end 
  end 

  def down 
    drop_table :users 
      execute "DROP EXTENSION hstore" 
    end 
  end
end 
```

然后“heroku run rake db:migrate”我得到这个错误：

PG::Error: ERROR: 在“EXTENSION” LINE 1 或附近出现语法错误：CREATE EXTENSION hstore ^ : CREATE EXTENSION hstore

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T05:09:12.243

终于让它工作了。原来我需要按照[https://devcenter.heroku.com/articles/heroku-postgres-dev-plan使用 heroku pg:promote 来“提升”数据库](https://devcenter.heroku.com/articles/heroku-postgres-dev-plan)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T19:34:46.733

我认为您想拆分迁移，一个添加 hstore，另一个使用它；

```
class SetupHStore < ActiveRecord::Migration 
  def self.up
    execute "CREATE EXTENSION hstore"
  end

  def self.down
    execute "DROP EXTENSION hstore"
  end
end 
```

启用扩展，您的用户迁移将只添加任何字段，然后在您想要的任何列上使用 hstore。

# javascript - Javascript parseInt 方法中的错误？

> ID：11202991
> 
> 赞同：1
> 
> 时间：2012-06-26T07:56:54.680
> 
> 标签：javascript, html, css

> **可能重复：**
> [JavaScript parseInt 八进制错误的解决方法](https://stackoverflow.com/questions/850341/workarounds-for-javascript-parseint-octal-bug)

使用 parseInt 方法解析字符串会返回无效的输出。

代码 ：

```
parseInt("08"); 
```

例外输出：

```
8 
```

实际输出：

```
0 
```

代码[正确返回输出]：

```
parseInt("8") 
```

输出 ：

```
8 
```

为什么会发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:59:09.483

您需要指定基数：

```
parseInt("08",10); //=>8 
```

否则 JavaScript 不知道你是十进制、十六进制还是二进制。（如果您使用 parseInt，这是您应该始终使用的最佳实践。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:01:50.350

另见[`Number`](https://developer.mozilla.org/en/JavaScript/Guide/Functions#Number_and_String_functions)：

```
Number("08"); // => 8 
```

*   [parseInt() 和 Number() 有什么区别？](https://stackoverflow.com/questions/4090518/string-to-int-use-parseint-or-number)
*   [JavaScript 中的 parseInt(string) 和 Number(string) 有什么区别？](https://stackoverflow.com/questions/4564158/what-is-the-difference-between-parseintstring-and-numberstring-in-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T07:59:23.693

你应该告诉 parseInt 它基于 10：

```
parseInt("08", 10); 
```

[JavaScript parseInt() 函数](http://www.w3schools.com/jsref/jsref_parseint.asp)

> 如果 radix 参数被省略，JavaScript 假设如下：
> 
> 如果字符串以“0x”开头，则基数为 16（十六进制）
> 
> 如果字符串以“0”开头，则基数为 8（八进制）。不推荐使用此功能如果字符串以任何其他值开头，则基数为 10（十进制）

[http://jsfiddle.net/YChK5/](http://jsfiddle.net/YChK5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:01:52.463

带有前导零的字符串通常被解释为八进制值。由于八进制表示只有 0-7 的数字才有意义，因此“08”将转换为“0”。指定解决此问题的基础：

```
parseInt("08", 10); // base 10 
```

像往常一样，MDN 是一个很好的信息来源： [https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt#Octal_Interpretations_with_No_Radix](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt#Octal_Interpretations_with_No_Radix)

# ruby-on-rails - Rails 3.2 response_with

> ID：11202993
> 
> 赞同：0
> 
> 时间：2012-06-26T07:57:01.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

`respond_with`接受一些参数，例如这些`respond_with(@resource, methods: [:method])` 选项应该在每个动作中使用。因此，与其手动将其放入每个方法中，是否有可能仅为此控制器设置一些默认选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T23:35:57.087

实现这一点的简单且可定制的方法是创建一个包装response_with 的新响应方法。

例如：

```
class ResourcesController < ApplicationController

  def index
    @resources = Resource.all

    custom_respond_with @resources
  end

private

  def custom_respond_with(data, options={})
    options.reverse_merge!({
      # Put your default options here
      :methods => [ :method ],
      :callback => params[:callback]
    })
    respond_with data, options
  end
end 
```

当然，您也可以完全覆盖respond_with，但是，如果您更改方法的名称，我发现它在代码中会更加清晰。它还允许您在大多数操作中使用 custom_respond_with，但如有必要，可以在一两个中使用标准 respond_with。

更进一步，如果您将 custom_respond_with 方法移动到 ApplicationController，您可以根据需要在所有控制器中使用它。

如果你想为每个控制器指定不同的默认选项，你可以很容易地做到这一点：

```
class ResourcesController < ApplicationController

  def index
    custom_respond_with Resource.all
  end

private

  def custom_respond_options
    { :methods => [ :method ] }
  end

end

class ApplicationController < ActionController::Base

protected

  def default_custom_respond_options
    {}
  end      

  def custom_respond_with(data, options={})
    options.reverse_merge! default_custom_respond_options
    respond_with data, options
  end

end 
```

# nsis - NSIS指南

> ID：11202994
> 
> 赞同：3
> 
> 时间：2012-06-26T07:57:02.923
> 
> 标签：nsis

我想让我的 NSIS 代码更具可读性。

我需要一些关于编写代码部分的指南（就像`#region` `#endregion`在 C# 中一样）或任何可以使编写 NSIS 代码变得有趣和容易的信息。

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T13:42:55.067

**还有一个名为Visual & Installer**的 Visual Studio（2008、2008、2010 和 2012）插件可用。

它提供了许多功能，如语法高亮、导航、（GoTo 定义、Goto 引用、导航栏、在光标处打开文件……）还有 IntelliSense 支持等等。

在这里试试：[http ://www.unsigned-softworks.sk/visual-installer/](http://www.unsigned-softworks.sk/visual-installer/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:38:20.103

如果您正在寻找一个 IDE，您可以尝试使用支持代码折叠、着色、从编辑器编译和编译错误解析的[SciTE 。](http://www.scintilla.org/SciTE.html "基于 Scintilla 的文本编辑器")`makensis`（顺便说一句：Scite 实际上并不是一个 IDE，而是一个非常轻巧但功能强大的文本编辑器，内置了对着色和编译编程语言的支持）

使用最新版本的 SciTE，您只需取消注释默认未启用的 NSIS 支持的加载。

此外，NSIS wiki 的[Development Environments 部分](http://nsis.sourceforge.net/Category%3aDevelopment_Environments)可以为您指出一些替代方案（例如将 NSIS 支持添加到 Eclipse）。

# javascript - 我应该使用什么事件在 jQuery 中异步提交表单？

> ID：11202995
> 
> 赞同：0
> 
> 时间：2012-06-26T07:57:18.610
> 
> 标签：javascript, jquery

我最近开始使用 jQuery/AJAX 向我的 PHP API 提交数据。

目前我使用的是 html 中的 input type="button" ，然后是 .click() jQuery 函数来提交它。

我不太确定这是最好的方法，我应该使用 input type="submit" 和 preventDefault() 代替吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T07:59:00.177

最好`.submit()`在表单上使用而不是`.click()`在提交按钮上使用。在这两种情况下`preventDefault`都是必要的。原因是用户可以`Enter`在编辑某些字段时通过按下来提交表单，如果您订阅了按钮的 .click 事件，则不会触发此事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:00:55.980

您可以使用`.submit()`，您只需`return false;`在回调中插入以防止实际提交表单并执行您自己的操作。

```
$('#target').submit(function() {
  alert('Handler for .submit() called.');
  return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:02:15.727

通过 jquery 提交不限于任何特定事件。您可以使用任何存在的事件，例如单击或您或其他人编写的自定义方法/函数，以根据用户行为（如悬停或任何其他行为）发送 ajax 请求。简单来说，你如何使用 jquery ajax 受限于你的想象力和实践。

# c - 带有 PQconnectdb 的 libpq 的奇怪行为

> ID：11202996
> 
> 赞同：1
> 
> 时间：2012-06-26T07:57:20.910
> 
> 标签：c, postgresql-8.4

在主程序中调用 PQconnectdb 时都运行得很好，但是如果我在函数内部调用它，则会出现段错误。这里是运行的代码

```
#include <stdio.h>
#include <stdlib.h>
#include <postgresql/libpq-fe.h>

#define PG_HOST    "127.0.0.1"
#define PG_USER    "postgres"
#define PG_DB      "postgres"
#define PG_PASS    "postgres"
#define PG_PORT    5432

static void
exit_nicely(PGconn *conn)
{
    PQfinish(conn);
    exit(1);
}

int main( void )

{

char       conninfo[250];
PGconn     *conn = NULL;
PGresult   *pgres = NULL;

sprintf(conninfo, "user=%s password=%s dbname=%s hostaddr=%s port=%d", PG_USER, PG_PASS, PG_DB, PG_HOST, PG_PORT);
conn = PQconnectdb(conninfo);

if (PQstatus(conn) != CONNECTION_OK)
{
    fprintf(stderr, "ERROR: Connection to database failed: %s", PQerrorMessage(conn));
    exit_nicely(conn);
}

PQfinish(conn);

return 0;
} 
```

这段代码运行得很好。

但是当我把 PQconnect 放在一个函数中时，程序会产生一个段错误

```
int connect(char* conninfo, PGconn* conn)
{

conn = PQconnectdb(conninfo);

if (PQstatus(conn) != CONNECTION_OK)
{
    fprintf(stderr, "ERROR: Connection to database failed: %s", PQerrorMessage(conn));
    exit_nicely(conn);
}

return 1;
}

int main( void )

{

char       conninfo[250];
PGconn     *conn = NULL;
PGresult   *pgres = NULL;

sprintf(conninfo, "user=%s password=%s dbname=%s hostaddr=%s port=%d", PG_USER, PG_PASS, PG_DB, PG_HOST, PG_PORT);

connect(conninfo, conn);
if(!conn)
 fprintf(stderr, "conn is null.\n");

PQfinish(conn);

return 0;

} 
```

这里是崩溃堆栈

```
(gdb) where
#0  __strlen_sse2 () at ../sysdeps/x86_64/multiarch/../strlen.S:32
#1  0x00007ffff7893086 in __GI___strdup (s=0x7 <Address 0x7 out of bounds>) at strdup.c:42
#2  0x00007ffff7bbbd87 in ?? () from /usr/lib/libpq.so.5
#3  0x00007ffff7bbc2a5 in ?? () from /usr/lib/libpq.so.5
#4  0x00007ffff7bbe389 in PQconnectStart () from /usr/lib/libpq.so.5
#5  0x00007ffff7bbe416 in PQconnectdb () from /usr/lib/libpq.so.5
#6  0x0000000000400912 in connect (conninfo=0x7 <Address 0x7 out of bounds>, conn=0x60a630) at pqconnect.c:25
#7  0x00007ffff7bbcadb in PQconnectPoll () from /usr/lib/libpq.so.5
#8  0x00007ffff7bbd77e in ?? () from /usr/lib/libpq.so.5
#9  0x00007ffff7bbe3b4 in PQconnectStart () from /usr/lib/libpq.so.5
#10 0x00007ffff7bbe416 in PQconnectdb () from /usr/lib/libpq.so.5
#11 0x0000000000400912 in connect (conninfo=0x7fffffffe600 "user=btel_user password=JwN5K9e18PsTb dbname=ULIC hostaddr=127.0.0.1 port=5432", conn=0x0) at pqconnect.c:25 
```

#12 0x00000000004009e3 in main () at pqconnect.c:49

当我将函数连接声明为静态时，不会发生段错误错误，但变量 conn 的返回指针为 NULL

为什么？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:28:54.353

我认为您的`connect`和标准库之间存在混淆`connect`。你`connect`的优先，所以当`PQconnectdb`试图打电话时`connect`，事情会变糟。
尝试重命名函数。
制作`connect`静态也可以防止混淆，这解释了为什么会删除崩溃。

此外，您将`conn`参数传递给`connect`错误。它是按值传递的，所以变量 in`main`没有改变，并且保持`NULL`.
您需要通过引用传递它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T10:00:40.630

注意：@Aleix ==> 此代码应该运行良好。

```
int pg_connect(char* conninfo, PGconn** conn)
{

    *conn = PQconnectdb(conninfo);
    if (PQstatus(*conn) != CONNECTION_OK) {
        fprintf(stderr,
                "ERROR: Connection to database failed: %s",
                PQerrorMessage(*conn));
        return 0;
    }

    return 1;
}

/* set correctely your values here */
#define PG_HOST    "127.0.0.1"
#define PG_USER    "postgres"
#define PG_DB      "postgres"
#define PG_PASS    "postgres"
#define PG_PORT    5432

int main(int argc, char *argv[])
{
    char        conninfo[250];
    PGconn     *conn  = NULL;
    PGresult   *pgres = NULL;

    sprintf(conninfo,
            "user=%s password=%s dbname=%s hostaddr=%s port=%d",
            PG_USER, PG_PASS, PG_DB, PG_HOST, PG_PORT);

    if (!pg_connect(conninfo, &conn)) {
        goto end;
    }

    /*
        Here fit your staff
     */

    end:
      PQfinish(conn);
      return 0;

} 
```