# StackOverflow 问答 10565000-10565999

# android - Android Eclipse Logcat 消息：ADT 如何获取 Application 列？

> ID：10565001
> 
> 赞同：1
> 
> 时间：2012-05-12T15:25:28.470
> 
> 标签：android, eclipse, logcat

我在命令窗口上运行 Logcat 并尝试了所有可能的格式：

*   **Brief** — 显示发出消息的进程的优先级/标签和 PID（默认格式）。*   **进程**— 仅显示 PID。*   **标记**— 仅显示优先级/标记。*   **raw** — 显示原始日志消息，没有其他元数据字段。*   **time** — 显示日期、调用时间、优先级/标签和进程的 PID。*   **thread** — 显示优先级、标签以及 PID 和 TID。*   **threadtime** — 显示日期、调用时间、优先级、标签以及 PID 和 TID。*   **long** — 显示所有元数据字段并用空行分隔消息。

    我在这些格式中都找不到**Eclipse ADT 的 Logcat 如何找出发出消息的应用程序的名称**。

    如果您使用 Eclipse，请查看 LogCat 选项卡，它有*Time、PID、Application、Tag*和*Text*列。
    它是否使用 TID 来识别应用程序？我在哪里可以获得系统中运行的 TID 和应用程序名称的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:18:24.200

我有同样的问题： [https ://stackoverflow.com/questions/10366709/android-using-logcat-in-the-command-line-application-info-exact-priority-f](https://stackoverflow.com/questions/10366709/android-using-logcat-in-the-command-line-application-info-exact-priority-f)

我不确定它在 eclipse 上是如何工作的，但您可以有一个解决方法：从日志中获取与包名称匹配的进程 ID。奇怪的是，这可能与它在那里的工作方式相同，因为对于某些日志消息，eclipse 不会显示哪个应用程序编写了日志消息。您也许还可以通过 pid 获取包名称，但我找不到执行此操作的方法。

# simperium - 从 SPManagedObject 继承

> ID：10565002
> 
> 赞同：2
> 
> 时间：2012-05-12T15:25:48.650
> 
> 标签：simperium

在您所说的 Simperiums iOS/OSX 教程中，每个建模对象都应继承自 SPManagedObject。

我还没有尝试过，但这不会导致 SQLite 数据库中的一个大表包含所有建模托管对象的所有字段的联合吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T16:15:19.367

是的，在底层核心数据将倾向于创建一个更大的表。一般来说，性能会受到关系的影响，而不是继承： [Using Parent Entity in CoreData Models](https://stackoverflow.com/questions/9072061/using-parent-entity-in-coredata-models)

我们已经完成了与相当复杂的继承层次结构的集成，并且没有看到大量数据的任何直接问题。

话虽如此，如果您需要对表结构进行更多控制，您可以避免为所有对象设置一个父对象，而是：

1.  手动将 ghostData 和 simperiumKey 属性添加到要同步的对象中，并确保它们的类是`SPManagedObject`（或确保它们的自定义类继承自`SPManagedObject`），或者

2.  使用 ghostData 和 simperiumKey 属性创建多个父实体，并从那些有意义的模型部分继承这些实体，具体取决于您希望如何构建基础表。

# c# - 带有异步等待操作怪异的循环

> ID：10565003
> 
> 赞同：0
> 
> 时间：2012-05-12T15:25:52.417
> 
> 标签：c#, wpf, sockets, async-await

我有以下将客户端传递给 HandleStationClients 的客户端侦听器。HandleStationClients 的构造函数在其他线程中启动一个带有连接的任务以进行侦听。

下面的代码使用异步函数在主线程上运行。当客户端连接时，下面的等待部分将继续并将客户端传递给新创建的 HandleStationClients 并挂钩事件。通常在连接事件之后，循环将重新开始并在等待时等待新的连接。问题是此代码为每个连接循环两次。因此，客户端连接并创建 HandleStationClients，事件将被挂钩，while 循环再次开始，然后继续运行相同的进程，再次创建新的 HandleStationClients 和事件挂钩。

处理完客户端后，等待者不会等待而是继续第二次。事件被触发两次。我不知道怎么了。有人有线索吗？

```
while (true)
{
    counter += 1;

    // Wait for new connection then do rest
    stationsClientSocket = await stationsServerSocket.AcceptTcpClientAsync();

    stationClients.Add(stationsClientSocket, 0);
    Debug.WriteLine("Client toegevoegd " + counter);

    HandleStationClients stationClient = new HandleStationClients(stationsClientSocket);

    stationClient.ConnectionEstabilished += stationClient_ConnectionEstabilished;
    stationClient.ConnectionClosed += stationClient_ConnectionClosed;
    stationClient.NewDataReceived += stationClient_NewDataReceived;
} 
```

HandleClient 看起来像

```
class HandleStationClients
{
    public HandleStationClients(TcpClient client)
    {
        Task.Factory.StartNew(() => { ProcessConnection(client); });
    }

    #region Event definitions
    public delegate void NewDataReceivedEventHandler(string newData);
    public event NewDataReceivedEventHandler NewDataReceived;

    public delegate void ConnectionClosedEventHandler();
    public event ConnectionClosedEventHandler ConnectionClosed;

    public delegate void ConnectionEstabilishedEventHandler(IPEndPoint endpoint);
    public event ConnectionEstabilishedEventHandler ConnectionEstabilished;
    #endregion

    public async void ProcessConnection(TcpClient stationsClientSocket)
    {
        byte[] message = new byte[1024];
        int bytesRead;

        NetworkStream networkStream = stationsClientSocket.GetStream();

        if (this.ConnectionEstabilished != null)
        {
            this.ConnectionEstabilished((IPEndPoint)stationsClientSocket.Client.RemoteEndPoint);
        }

        while ((true))
        {
            bytesRead = 0;

            try
            {
                bytesRead = await networkStream.ReadAsync(message, 0, 1024);
            }
            catch (Exception ex)
            {
                // some error hapens here catch it                    
                Debug.WriteLine(ex.Message);
                break;
            }

            if (bytesRead == 0)
            {
                //the client has disconnected from the server
                break;
            }

            ASCIIEncoding encoder = new ASCIIEncoding();

            if (this.NewDataReceived != null)
            {
                byte[] buffer = null;

                string incomingMessage = encoder.GetString(message, 0, bytesRead);

                this.NewDataReceived(incomingMessage);
            }
        }
        stationsClientSocket.Close();
        // Fire the disconnect Event
        this.ConnectionClosed();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:08:00.923

在构造函数中启动任务是个坏主意。这意味着在您注册事件处理程序时您的任务正在运行。很有可能有时您不会在需要触发之前注册事件。

您应该做的是等待启动任务，直到事件处理程序全部注册。您将需要创建一个`Start`方法来处理启动任务，并在注册事件后让代码调用它。

更新的类：

```
class HandleStationClients
{
    // Added a field to store the value until the Start method
    TcpClient _client;

    public HandleStationClients(TcpClient client)
    {
        this._client = client;
        // Moved the line from here...
    }

    public void Start()
    {
        // ...to here.
        Task.Factory.StartNew(() => { ProcessConnection(_client); });
    }

    #region Event definitions
    // ...
    #endregion

    public async void ProcessConnection(TcpClient stationsClientSocket)
    {
        byte[] message = new byte[1024];
        int bytesRead;

        NetworkStream networkStream = stationsClientSocket.GetStream();

        if (this.ConnectionEstabilished != null)
        {
            this.ConnectionEstabilished((IPEndPoint)stationsClientSocket.Client.RemoteEndPoint);
        }

        while ((true))
        {
            bytesRead = 0;

            try
            {
                bytesRead = await networkStream.ReadAsync(message, 0, 1024);
            }
            catch (Exception ex)
            {
                // some error hapens here catch it                    
                Debug.WriteLine(ex.Message);
                break;
            }

            if (bytesRead == 0)
            {
                //the client has disconnected from the server
                break;
            }

            ASCIIEncoding encoder = new ASCIIEncoding();

            if (this.NewDataReceived != null)
            {
                byte[] buffer = null;

                string incomingMessage = encoder.GetString(message, 0, bytesRead);

                this.NewDataReceived(incomingMessage);
            }
        }
        stationsClientSocket.Close();
        // Fire the disconnect Event
        // I added a line to check that ConnectionClosed isn't null
        if (this.ConnectionClosed != null)
        {
            this.ConnectionClosed();
        }
    }
} 
```

然后你需要改变调用代码如下。

```
while (true)
{
    counter += 1;

    // Wait for new connection then do rest
    stationsClientSocket = await stationsServerSocket.AcceptTcpClientAsync();

    stationClients.Add(stationsClientSocket, 0);
    Debug.WriteLine("Client toegevoegd " + counter);

    HandleStationClients stationClient = new HandleStationClients(stationsClientSocket);

    stationClient.ConnectionEstabilished += stationClient_ConnectionEstabilished;
    stationClient.ConnectionClosed += stationClient_ConnectionClosed;
    stationClient.NewDataReceived += stationClient_NewDataReceived;
    // Call Start manually
    stationClient.Start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T23:49:02.493

我将 Task start 从构造函数移到 Start 方法。问题解决了。

# vba - PowerPoint VBA - 屏幕上的 SlideRange 位置

> ID：10565005
> 
> 赞同：0
> 
> 时间：2012-05-12T15:26:20.873
> 
> 标签：vba, ms-office, powerpoint

我正在创建一个 PPT 加载项，我正在努力寻找是否可以确定屏幕上 SlideRange 位置的答案。

我想在特定位置打开一个用户表单（例如，从 SlideRange 的左上角开始，left = 10，top = 10）。不幸的是，它的位置是基于屏幕分辨率的。由于可以更改分辨率和修改 PPT 视图类型，我无法确定 SlideRange 的准确位置。

可以用VBA做吗？

提前致谢！乔丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:13:49.267

SlideRange 没有特定的位置......它是幻灯片的集合，当您要将表单定位在 10,10 时，不清楚您使用的是什么单位。但在正常的全屏视图中，您可以获得幻灯片放映窗口坐标，如下所示：

With SlideShowWindows(1) Debug.Print .Left Debug.Print .Top Debug.Print .Height Debug.Print .Width End With

要获取屏幕像素的结果，您必须使用 Win API 调用来获取屏幕 DPI（每英寸点数）。

英寸 = 点 / 72 像素 = 英寸 * DPI

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T03:34:47.560

<<你知道PPT中是否可以捕捉鼠标事件吗？

仅当鼠标单击更改选择时，并且如您所知，这并非总是如此。

可能有某种方法可以通过 Win API 来实现，但 PPT 本身并没有这种方法。

# java - Java 验证器和解析

> ID：10565006
> 
> 赞同：4
> 
> 时间：2012-05-12T15:26:47.077
> 
> 标签：java, jvm, resolution, verification

假设我们有以下定义：

```
public class Test {

    public static void main(String[] args) {
        System.out.println("------MAIN METHOD------");
        A a = new B();  
        a.a = 3;
        System.out.println(a.a);
    }

}

    public class A {

        int a;

        public void g(){
            System.out.println(a);
        }

    }

public class B extends A {} 
```

现在，假设我们构建上述内容，然后将 B 修改为

```
public class B {} 
```

并重建 JUST B。当我们关闭验证器时，该方法会打印 3！我知道验证器没有发现这一点，reslution 在 A 中检查是否有字段 a，就是这种情况......但是 B 没有为整数字段 a 分配空间！那它写到哪里呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T17:48:50.493

内存中的 java 对象被填充并对齐至少 16 个字节长，因此在仅包含 int 字段的类中存在一些未使用的空间。如果您向 A 添加更多字段，您可能会覆盖其他对象的存储空间，但这也可能不会导致立即崩溃，尤其是在立即退出的如此短的应用程序中。

通过像这样声明类，您可以享受更多乐趣：

```
public class A {
    int[] a = new int[1];
}

public class B {
    int a = 0x01020304;
}

public class Test {
    public static void main(String[] args) {
        A a = new B();  
        a.a[0] = 3;
        System.out.println(a.a[0]);
    }
} 
```

通过执行此代码的结果`java -Xverify:none Test`应该会导致如下所示的 JVM 错误，但原则上它应该允许您将任何位置写入 java 进程的内存：

```
------MAIN METHOD------
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007f9147d69532, pid=14785, tid=140262017775360
#
# JRE version: 6.0_26-b03
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.1-b02 mixed mode linux-amd64 compressed oops)
# Problematic frame:
# j  Test.main([Ljava/lang/String;)V+17 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:41:09.200

如果你真的只重建了 B，`A a = new B();`应该会失败 a `ClassCastException`，因为 B 将不再与 A 运行时兼容。检查重建的 B 是否在运行时类路径中，这是唯一的 B 。

更正：`VerifyError`，不是`ClassCastException`。

编译运行原代码： C:\TMP>%JAVA_HOME%\bin\javac -s 。*.java C:\TMP>%JAVA_HOME%\bin\java -cp 。测试------主要方法------ 3

然后更新 B.java，重新编译，再次运行： C:\TMP>%JAVA_HOME%\bin\javac -s 。B.java C:\TMP>%JAVA_HOME%\bin\java -cp 。线程“主”java.lang.VerifyError 中的测试异常：方法 Test.main([Ljava/lang/String;)V 在偏移 18 处的 putfield 中的操作数堆栈类型错误

# c++ - C++ SDL 分段错误

> ID：10565008
> 
> 赞同：0
> 
> 时间：2012-05-12T15:26:54.393
> 
> 标签：c++, debugging, opengl, segmentation-fault, sdl

我让我的游戏正常运行，然后决定尝试使用以下[教程](http://youtu.be/k-m0q_uVnno)实现一个菜单。

我没有使用该教程来创建他之前创建的教程中的游戏。

每当我编译并运行程序时，它会短暂加载，然后关闭并`Process terminated with status 3 (0 minutes, 1 seconds)`在`code::blocks`.

更新：我已将 pastebin 链接的代码更新为我现在所拥有的，我现在从调试器得到的错误是

```
Program received signal SIGSEGV, Segmentation fault.
In TTF_SizeUNICODE () (E:\game\pong\bin\Debug\SDL_ttf.dll)
At E:\game\pong\main.cpp:27 
```

更新 2： 似乎我尴尬地没有安装字体。我已经安装了字体，现在调试器到达屏幕显示“开始”和“退出”字体的位置，但是，在执行此操作后程序立即冻结，调试器中没有错误，并且如果我正常运行程序，它会在显示文本后停止响应，奇怪。从 启动程序后强制关闭窗口后才意识到`code::blocks`，它返回：`Process terminated with status -805306369 (0 minutes, 13 seconds)`。

更新 3：已解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:38:41.197

`screen`在将其传递给（第 224 行）之前，您没有初始化（第 220`showMenu`行）。AFAIK`SDL_SetVideoMode`返回一个可用于`screen`.

# android - 在 Android 上的该应用程序内检查应用程序的更新

> ID：10565011
> 
> 赞同：3
> 
> 时间：2012-05-12T15:27:15.350
> 
> 标签：android, notifications, google-play, updates

android 市场（或现在的 Google Play）是否为应用程序提供了一种检查其是否可更新的方法？

人们似乎需要很长时间才能注意到（或关心）更新他们的应用程序。我想在我的应用程序中显示一些“可用更新”通知。

我可以在网络服务器上有一些文件说明最新版本。但是，如果他们点击“可用更新”按钮然后被带到尚未有更新的市场，这显然会惹恼人们。

那么是否有一些不错的 API 或其他绝妙的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:58:49.810

实际上，Android Market 非常注重更新您的应用程序。一旦您的更新可用，用户就会收到通知，如果他们决定忽略通知，这是他们的决定。

如果您正在寻找更新应用程序的替代方法，我建议您查看[此线程](https://stackoverflow.com/questions/4308473/auto-update-for-private-android-apps)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-14T09:21:40.643

不，Google Play 商店是一个封闭系统，它不会公开 API 来检查版本号，因为它会在有可用更新时更新已安装的应用程序。然而，可以通过一个网络服务来完成，它可以让我们在 google play store 上更新当前版本的 android 应用程序，然后将安装的应用程序版本与我们从网络服务获得的版本进行比较。请查看[https://code.google.com/archive/p/android-query/wikis/Service.wiki](https://code.google.com/archive/p/android-query/wikis/Service.wiki)

# java - 如何在 Eclipse 中关闭自动生成的代码？

> ID：10565017
> 
> 赞同：0
> 
> 时间：2012-05-12T15:28:03.890
> 
> 标签：java, eclipse

我刚开始使用 eclipse classic (v3.7.2)，我承认我还是很迷茫。我现在要做的是关闭所有自动生成的代码 eclipse 当我创建一个类时（如果它在其他任何时候这样做，我也希望它消失。）我不是在谈论建议——它可以给我提供它想要的所有建议的下拉框，但我不希望它为我编写任何代码——甚至不包括大括号和圆括号。我在创建课程时想要一个空白屏幕，并且在大多数情况下（几乎除了自动缩进和下拉建议）我希望 eclipse 只管自己的事情，直到我问它。

我设法通过窗口 > 首选项 > java > 代码样式 > 代码模板选项摆脱了大部分自动生成的东西，但是当我创建一个类时它仍然生成类名和右大括号：

```
public class Contact
{

} 
```

此外，我无法弄清楚如何让它停止完成大括号和括号。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:38:40.010

在**Preferences > Java > Editor > Typing**中，您可以禁用各种事物的自动关闭，包括大括号、字符串等。但是您无法摆脱“New Class”模板的包声明或类型声明部分。我能想到的唯一选择是，不是选择创建一个新的 Java 类，而是根据您的包结构在适当的源文件夹中创建一个普通文件（将是空的）。

话虽如此，我已经编程了 20 多年，我无法想象为什么你不想要一个工具来插入样板，甚至是像类声明这样的最小样板。底线是 Eclipse 不会生成无法编译的无效类，并且空文件不是有效类。如果你不希望它创建一个类，不要让它创建一个类，而是让它创建一个空文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T15:32:18.107

ctrl-3，输入 Code Templates，选择 Code Templates -- Java/Code Style。将打开一个属性页面，您可以在其中将模板编辑为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-03T19:42:30.550

如果您不想要它不会在您的代码上自动键入任何内容的建议，只需在它出现时点击转义，并且框将消失，否则摆脱它不是一个好主意。

# emacs - Emacs 中的 Scheme 颠覆了配色方案

> ID：10565018
> 
> 赞同：6
> 
> 时间：2012-05-12T15:28:03.913
> 
> 标签：emacs, scheme, color-scheme

当我在 Emacs 中编辑方案 (.scm) 文件时，我似乎失去了我选择的颜色主题。我在 Ubuntu 11.10 上；Emacs 23.3.2 GTK+，这是我用于颜色主题的相关 .emacs：

```
(require 'color-theme)
(eval-after-load "color-theme"
'(progn
 (color-theme-initialize)
 (setq color-theme-is-global t)
 (color-theme-tm))) 
```

tm 主题看起来不错，而且很容易上眼（温暖的粉彩）。但是当我加载一个 .scm 文件时，方案模式似乎对颜色有自己的想法，并给我带来可怕的强烈刺眼的蓝色，更糟糕的是，为 parens 发出红色。我可以打开一个 .lisp 文件，它很好地符合 tm 主题——就像所有其他文件格式一样。我已经切换到 emacs -nw 控制台并设置了 term256 ......这似乎让光芒平息了一点，但在 GUI Emacs 中，就好像只有方案文件抛出了 tm 主题，甚至抛出了 256 种颜色恶狠狠地瞪着我。即使从 GUI Emacs 菜单选项中选择“工具/颜色主题”也不会改变糟糕的方案模式颜色主题。我也使用 quack.el，但注释掉似乎不会影响不好的颜色。这是切换到 Haskell 的预兆吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T01:19:49.713

这个问题是由 Quack 插件引起的。要修复它，请单击 Quack 菜单并转到选项->自定义。向下滚动到 Quack Fontify Style，单击 Value Menu，然后选择 Extended GNU Emacs Style 或 Emacs Default。向上滚动，单击“保存以供将来的会话”，然后退出。

# c++ - c++: 带有任意签名的 std::function 的 std::vector

> ID：10565019
> 
> 赞同：3
> 
> 时间：2012-05-12T15:28:08.750
> 
> 标签：c++, function, vector

是否有可能创建一个`std::vector`可以持有`std::function`任何签名的？（函数参数都是预先绑定的。）

我试过`std::vector<std::function<void()> >`了，因为如果我只有一种`std::function`类型，我可以将任何函数绑定到它。

这似乎在向量中不起作用：如果我尝试将函数添加`std::bind`到具有除 之外的签名的向量中`void()`，我得到：

```
No matching member function for call to 'push_back' 
```

有没有办法做到这一点？

**编辑：**

我只记得它`std::function<void()>`确实允许您绑定任何返回的函数，`void`只要参数预先绑定`std::bind`，它不允许您绑定任何签名，但出于我的目的，它足够通用，因此以下工作：

```
class A
{
public:
    void test(int _a){ return 0; };
};

A a;
std::vector<std::function<void()> > funcArray;
funcArray.push_back(std::bind(&A::test, std::ref(a), 0)); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T15:41:15.433

这应该有效：

```
#include <iostream>
#include <functional>
#include <vector>

void hello() { std::cout << "Hello\n"; }
void hello2(const char * name) { std::cout << "Hello " << name << '\n'; }

int main()
{

    std::vector<std::function<void()>> v;
    v.push_back(hello);
    v.push_back(std::bind(hello2, "tim"));
    v[0]();
    v[1]();
} 
```

你怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:16:45.857

> 是否可以创建一个可以保存带有任何签名的 std::function 的 std::vector？（函数参数都是预先绑定的。）

因此，您想知道是否可以使用向量来保存不同类型的对象，除非您将它们全部包装在一个类型中？

是的，您可以将一堆具有相同类型的项目存储在一个向量中。

* * *

或者，也许您想问“我如何包装可调用对象以使它们具有我需要的类型？”

bind 可以处理特殊情况，您只需删除或重新排序参数即可获得可转换为通用类型的内容。为了处理可能需要选择返回类型、添加参数等的一般情况，您只需编写新函数。Lambda 可以很容易地做到这一点：

```
std::vector<std::function<common_signature> F;

double foo(std::string);
// for a common signature of void()
F.push_back([]{ foo("hello"); });

int bar(void);
// for a common signature of int (int)
F.push_back( [](int i) { return bar() + i; });

int baz(void);
// for a common signature of std::complex<double> (void)
F.push_back( []() -> std::complex<double> { return {0,baz()}; }); 
```

# php - PDO 数据库插入

> ID：10565023
> 
> 赞同：-1
> 
> 时间：2012-05-12T15:29:09.683
> 
> 标签：php, mysql, database, pdo

嗨，我在 mysql 中有一个表，有六个字段

```
ID, mobileNumber, firstName, lastName, email, password , rollID 
```

ID 是自动增量的，我想使用 php 插入它

# php代码

```
public function run($firstName, $lastName, $mobileNumber, $email, $password, $rePassword) {
        if (!$this->db->isExistedMobile($mobileNumber)) {
            try {
               $query = "INSERT INTO user (firstName, lastName, mobileNumber, email, password, rollID)
                VALUES (:firstName, :lastName, :mobileNumber, :email, :password, 'rollID')";
                $sth = $this->db->prepare($query);
                $sth->execute(array(
                    ':firstName' => $firstName,
                    ':lastName' => $lastName,
                    ':mobileNumber' => $mobileNumber,
                    ':email' => $email,
                    ':password' => $password,
                    ':rollID' => "roma"
                ));
                header("location: " . URL . "index");
            } catch (PDOException $e) {
                die($e->getMessage());
                exit;
            }
        } else {
            include 'controlers/Error.php';
            $error = new Error();
            $error->index("you enterd a used mobile number");
        }
    } 
```

我有这个例外

```
SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens 
```

函数 isExistedMobile 总是返回 false 所以不用担心，我不知道哪里错了，是语法吗？或者在rollID cos中我让它成为静态的？谢谢你的帮忙 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:23:28.530

问题（使用[您的原始代码](https://stackoverflow.com/revisions/c1faa0ea-f96f-4984-a252-4fe137026c54/view-source)）是参数数组有一个尾随逗号，它在其中创建了一个附加`null`元素。

我建议`rollID`按照最初的预期恢复到该版本（使用 的文字值），但请确保在 之后删除尾随逗号`$password`：

```
public function run($firstName, $lastName, $mobileNumber, $email, $password, $rePassword) {
        if (!$this->db->isExistedMobile($mobileNumber)) {
            $query = "INSERT INTO user (firstName, lastName, mobileNumber, email, password, rollID)
                VALUES (:firstName, :lastName, :mobileNumber, :email, :password, 'ddd')";
            $sth = $this->db->prepare($query);
            $sth->execute(array(
                ':firstName' => $firstName,
                ':lastName' => $lastName,
                ':mobileNumber' => $mobileNumber,
                ':email' => $email,
                ':password' => $password  // , removed from here
            ));
            header("location: " . URL . "index");
        } else {
            include 'controlers/Error.php';
            $error = new Error();
            $error->index("you enterd a used mobile number");
        }
    } 
```

# ruby-on-rails - Rails 3 Facebook 用户模型？

> ID：10565025
> 
> 赞同：0
> 
> 时间：2012-05-12T15:29:22.320
> 
> 标签：ruby-on-rails, facebook, activerecord

在 Rails 3 中使用 ActiveRecord 为 Facebook 用户建模的最佳方法是什么？由于 id 字段是自动创建的，我怎样才能摆脱它的 auto_increment 并用每个用户的 fb_id 填充它？我还需要将类型从 int 更改为可以存储 Facebook 所需的更大值。

有没有人有这样做的事实上的方法？我想这一定是一个很常见的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:44:34.253

您可以像这样覆盖默认的主字段 (id)：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users, :primary_key => 'facebook_id' do |t|
      t.string :name

      t.timestamps
    end
  end
end 
```

然后在你的模型中：

```
class User < ActiveRecord::Base
  self.primary_key = "facebook_id"
end 
```

编辑：但是，您真的需要摆脱 id 字段吗？您可能需要一些时间。此外，如果您正在寻找 3rd 方身份验证解决方案（如 Facebook），则应考虑使用 OmniAuth：[https ://github.com/intridea/omniauth](https://github.com/intridea/omniauth)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T15:51:18.117

我建议继续使用 Rails 提供的默认 ID，并添加以下内容：

```
class AddUIDandProviderandTokenToUsers < ActiveRecord::Migration
  def up
    add_column :users, :UID, :string
    add_column :users, :provider, :string
    add_column :users, :token, :string
  end

  def down
   #
  end
end 
```

通过这样做，您将能够将其他外部身份验证系统添加到您的用户表中，而不仅仅是依赖 Facebook。

请记住将**UID**存储为字符串。

# android - 捕捉 TimePicker 的取消或关闭

> ID：10565030
> 
> 赞同：3
> 
> 时间：2012-05-12T15:29:47.733
> 
> 标签：android

我不确定如何为下面的代码实现 onCancel/onDismiss 侦听器。有人可以帮忙吗。

```
private TimePickerDialog.OnTimeSetListener mTimeSetListener =
            new TimePickerDialog.OnTimeSetListener() {
                public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
                    mHour = hourOfDay;
                    mMinute = minute;
                    time = ""+mHour+":"+mMinute;
                    notifications();
                }
    };

@Override
   protected Dialog onCreateDialog(int id) {
        switch (id) {
        case TIME_DIALOG_ID:
            return new TimePickerDialog(this,
                    mTimeSetListener, mHour, mMinute, false);
        }
        return null;
    } 
```

编辑：工作代码如下。当您单击设置时，它就完成了。它删除了复选框的任何其他内容。

```
 @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case TIME_DIALOG_ID:
            TimePickerDialog myTime = new TimePickerDialog(this,mTimeSetListener, mHour, mMinute, false);
            myTime.setOnCancelListener(new OnCancelListener(){
                CheckBox checkBox = (CheckBox) findViewById(R.id.checkBox1);
                public void onCancel(DialogInterface dialog) {
                    Log.d("IN HERE","HERE2");
                    cbChecked = false;
                    notValue = 0;
                    checkBox.setChecked(false);
                    checkBox.setText("Use reminders");
                }
            });
            return myTime;
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:50:30.157

`TimePickerDialog`不要像在方法上那样直接返回`onCreateDialog`，您应该实例化它并添加一个`onCancel`侦听器。

```
...
case TIME_DIALOG_ID:
   TimePickerDialog myTime = new TimePickerDialog(this,yourListener, h, m, false);
   myTime(new DialogInterface.OnCancelListener(){
      @Override
      public void onCancel(DialogInterface arg0) {
        //your stuff
      }
   );//For cancel button

   return myTime; //Return the dialog
break;
... 
```

# objective-c - 通过引用传递 NSIndexPath

> ID：10565031
> 
> 赞同：2
> 
> 时间：2012-05-12T15:29:56.167
> 
> 标签：objective-c, ios, automatic-ref-counting

我正在使用 ARC 并希望创建一个通过引用传入 indexPath 的方法，以便我可以更改其值：

```
-(void)configureIndexPaths:(__bridge NSIndexPath**)indexPath anotherIndexPath:(__bridge NSIndexPath**)anotherIndexPath
{
      indexPath = [NSIndexPath indexPathForRow:*indexPath.row + 1 inSection:0];
      anotherIndexPath = [NSIndexPath indexPathForRow:*anotherIndexPath.row + 1 inSection:0];
} 
```

但这给了我一个未找到属性行的错误。我该如何解决这个问题。

还有另一个概念性问题：如果我的目标只是更改传递给方法的 indexPath 的值，难道不能通过指针传递吗？为什么我会选择通过引用传递而不是通过指针传递？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:16:14.607

> 如果我的目标只是改变`indexPath`传递给方法的值，难道不能通过指针传递吗？

不是真的，因为索引路径是不可变的。您必须构造一个新的索引路径对象并返回它。

> 为什么我会选择通过引用传递而不是通过指针传递？

在 ObjC 中这样做的唯一真正原因是有多个返回值。这种技术最常见的用途是拥有一个返回对象或成功/失败指示符的方法，并且在必要时还可以设置错误对象。

在这种情况下，您有两个要从方法中取回的对象；一种方法是使用传递引用技巧。像现在这样传入两个索引路径可能会让你的生活更简单，但返回一个`NSArray`新的路径：

```
 - (NSArray *)configureIndexPaths:(NSIndexPath*)indexPath anotherIndexPath:( NSIndexPath*)anotherIndexPath
{
    NSIndexPath * newPath = [NSIndexPath indexPathForRow:[indexPath row]+1 inSection:0];
    NSIndexPath * anotherNewPath = [NSIndexPath indexPathForRow:[anotherIndexPath row]+1 inSection:0];
    return [NSArray arrayWithObjects:newPath, anotherNewPath, nil];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T16:11:55.853

这是你将如何做到这一点：

```
-(void) configureIndexPaths:(NSIndexPath*__autoreleasing *)indexPath anotherIndexPath:(__bridge NSIndexPath*__autoreleasing *)anotherIndexPath
{
    if (indexPath)
        *indexPath = [NSIndexPath indexPathForRow:[(*indexPath) row] + 1 inSection:0];
    if (anotherIndexPath)
        *anotherIndexPath = [NSIndexPath indexPathForRow:[(*indexPath) row] + 1 inSection:0];
} 
```

您应该使用`__autoreleasing`, 以便在创建对象时正确自动释放对象，并检查`NULL`传入的指针。如果您想要 true `pass-by-reference`，请查看 objc++ 和`NSIndexPath *&`.

# ruby-on-rails - Heroku 上的 Rails 代码参考检查器

> ID：10565035
> 
> 赞同：0
> 
> 时间：2012-05-12T15:30:46.063
> 
> 标签：ruby-on-rails, heroku

我注意到，当我将我的项目部署到 Heroku 时，它能够在我忘记更改对我重构的方法的调用（即更改方法名称或签名）的地方找到编码错误。它只是在代码修复之前无法部署。

这似乎表明 Heroku 内置了某种预处理器或解释器，可以在代码完成部署之前对代码进行伪“编译”。还有其他人知道吗？

是否有一个 gem 可以让我对我的代码进行快速的健全性检查？

当然，当然需要有规范/单元测试，但是在工具箱中拥有另一个工具不会有什么坏处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:57:53.900

我猜想这更多的是 Rails 应用程序在生产模式下加载/启动的不同行为，而不是开发模式。

如果您在本地以生产模式启动本地应用程序，您应该会看到与 Heroku 相同的行为。

# java - XPath 2.0 中的函数 Reverse()：如何使用它来计算表达式？

> ID：10565040
> 
> 赞同：2
> 
> 时间：2012-05-12T15:31:17.217
> 
> 标签：java, xml, xpath, xpath-2.0

请放轻松，这是我第一次使用`XPath 2.0`:)

给定以下代码：

```
import net.sf.saxon.expr.Expression;
import net.sf.saxon.expr.StaticContext;
import net.sf.saxon.functions.CompileTimeFunction;
import net.sf.saxon.sort.Reverser;
import net.sf.saxon.trans.XPathException;

public class MyReverse extends CompileTimeFunction {

    public Expression simplify(StaticContext env) throws XPathException {
        Reverser a = new Reverser(argument[0]);
        return a.simplify(env);
    }

} 
```

我想反转查询：

```
String query = "inventory/book/chapter[3]/preceding-sibling::chapter//title";
Object myQuery= xpath.evaluate(query,doc,XPathConstants.NODESET); 
```

对于我的 XML 文件（**如果您愿意，我可以附上 XML 文件，所以如果确实需要，请说出来！**）

现在根据我的理解，如果我这样做：

```
MyReverse rev = new MyReverse(); 
```

那么如果我尝试使用这样的方法`evaluateAsString`：`rev.evaluateAsString(arg0)` then`arg0`应该是一个`XPathContext`对象。

如何通过上述方法使用我的查询？

问候

***编辑1：***

在亲爱的@Dimitre Novatchev 先生写的示例中，需要的是从 node`X`到文档上侧的所有节点。

但是，如果其中一个兄弟姐妹有孩子，那么我需要展示兄弟姐妹，然后才展示他（兄弟姐妹的）孩子`X's`（然后转到下一个兄弟姐妹，然后再重复一遍），而**不是**兄弟姐妹 & 只有那时 - 兄弟姐妹。

很抱歉之前没有提及和解释这一点

再次感谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T17:09:03.083

**只需评估这个 XPath 2.0 表达式**：

```
reverse(/inventory/book/chapter[3]/preceding-sibling::chapter//title) 
```

**这是一个基于 XSLT 的验证**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     <xsl:sequence select=
     "reverse(/inventory/book/chapter[3]/preceding-sibling::chapter//title)
     "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（取自您之前的问题）：

```
<inventory>
    <book num="myBook1">
        <title>Lindsy Boxer</title>
        <author>James Patterson</author>
        <publisher>LittleBig</publisher>
        <price>18.21</price>
        <chapter>
            <title>Alex Cross Is Back - Chapter A</title>
            <paragraph>
                    This is the 
                <emph>first</emph> paragraph.
                <image file="alexCrossImage.gif"/>
                    afetr image...
            </paragraph>
            <paragraph>
                    This is the 
                <emph>second</emph> paragraph.
                <image file="alexCrossImageAnother.gif"/>
                    afetr image...
            </paragraph>
        </chapter>
        <chapter>
            <title>Along Came A Spider - Chapter B</title>
            <section>
                <title>Along Came A Spider - Chapter B - section 1</title>
                <paragraph>
                        This is the 
                    <emph>first</emph>paragraph for chapter TWO section ONE.
                    <image file="Chapter_B_firstParagraphImage.gif"/>
                        afetr image...
                </paragraph>
                <paragraph>
                        This is the 
                    <emph>second</emph> paragraph for chapter TWO section ONE.
                    <image file="Chapter_B_secondParagraphImage.gif"/>
                        afetr image...
                </paragraph>
            </section>
        </chapter>
        <chapter>
            <title>Chapter C</title>
            <paragraph>
                    This chapter has no images and only one paragraph
            </paragraph>
        </chapter>
    </book>
    <book num="myBook2">
        <title>Jack Reacher Series</title>
        <author>Lee Child</author>
        <author>Jonny White</author>
        <publisher>Pocket</publisher>
        <price>5.99</price>
        <chapter>
            <title>Jack Reacher - Chapter ONE</title>
        </chapter>
        <chapter>
            <title>Jack Reacher - Chapter TWO</title>
            <paragraph>
                    This is the 
                <emph>second</emph> paragraph of SECOND book chapter TWO.
                <image file="Jack_Reacher_Picture_Top_Sniper_US_Army.gif"/>
                    afetr image...
            </paragraph>
        </chapter>
    </book>
    <book num="myBook3">
        <title>Alex Cross - Double Cross</title>
        <author>James Patterson</author>
        <publisher>Spectra</publisher>
        <price>17.30</price>
        <chapter>
            <title>Alex Cross - Double Cross - Chapter A</title>
        </chapter>
    </book>
</inventory> 
```

**对上面的 XPath 表达式求值，并将生成的节点序列复制到输出：**

```
<title>Along Came A Spider - Chapter B - section 1</title>
<title>Along Came A Spider - Chapter B</title>
<title>Alex Cross Is Back - Chapter A</title> 
```

正如我们所见，该序列包含所需的元素，并且按照逆文档顺序——完全符合要求。

至于如何使用 Saxon 9.x 评估 XPath 表达式，请阅读相应的文档： http: [//www.saxonica.com/documentation/xpath-api/s9api-xpath.xml](http://www.saxonica.com/documentation/xpath-api/s9api-xpath.xml)其中有一个指向完整工作代码示例的指针.

**更新**：

在评论中，OP 表示他需要`chapter`以相反的文档顺序排列元素，但它们的标题元素需要以文档顺序排列。

要实现这一点，请使用：

```
reverse(/inventory/book/chapter[3]/preceding-sibling::chapter)//title 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:37:32.543

您正在摆弄内部的 Saxon 实现类，您不应该使用这些实现类，而且您显然不理解这些实现类。您应该在 XPath 表达式中而不是在调用 Java 代码中做您想要的工作（反转一组节点的顺序）。

# javascript - HTML 5 Canvas - 网格块填充

> ID：10565041
> 
> 赞同：5
> 
> 时间：2012-05-12T15:31:34.497
> 
> 标签：javascript, html

我已经创建了一个画布，并成功地写出了一个带有 X 和 Y 坐标的网格（类似于方格纸）。我现在要做的是：

-当有人用鼠标点击时，网格中的一个方块会变成不同的颜色 -
一旦选择了一个块，数据就不会改变

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T15:34:38.850

您需要一个单独的二维数组来维护每个 (x, y) 网格位置的状态。

发生单击时，检查该状态数组以查看之前是否单击了单元格，并根据需要更新画布。

我创建了一个小演示来向您展示：http: [//jsfiddle.net/alnitak/xN45K/](http://jsfiddle.net/alnitak/xN45K/)

# php - 父变量/类返回 null

> ID：10565043
> 
> 赞同：0
> 
> 时间：2012-05-12T15:31:43.897
> 
> 标签：php, oop, class, object

我有一个基类和一个扩展基类的第二个类。问题是我无法从子类访问 $db 对象，而是所有普通变量。知道为什么吗？

```
class Base_Login
{  
    protected $member_uri = 'member.php';
    protected $db;

    public function __construct($db_user, $db_password, $db_name, $db_host)
    {
        $this->db = new ezSQL_mysql($db_user, $db_password, $db_name, $db_host);
        var_dump($this->db); //Output: Object content's
    }   
}

class Facebook_Login extends Base_Login
{       
    public function __construct($app_id, $secret)
    {
        var_dump($this->db); //Output: NULL
        echo $this->member_uri //Output: member.php
    }
} 
```

这就是我所说的：

```
require("includes/config.php");
$base_login = new Base_Login($db_user,$db_password,$db_name,$db_host);
$base_login->Facebook_Login = new Facebook_Login($facebook_appID,$facebook_secret); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:38:34.650

在您的父类中，您已经定义了一个构造方法。并且数据库对象的初始化在您的父类中完成。当您定义一个子类并定义与父类同​​名的方法时，php在这里所做的就是覆盖父类的方法，例如

```
class Foo {
    public function a() {
        //some code execution are done here
    }
} 
```

现在你有另一个继承父类的类

```
class Bar {
    public function a() {

    }
} 
```

php 在这里所做的是忽略父类的方法，只调用子类。解决方法是使用 parent 关键字在子类中调用父类的方法

所以在你的孩子班

```
class Bar {
    public function() {
        //call to parent method.
        parent::a();
    }
} 
```

这将导致执行父方法和子方法。类构造函数也是如此。您需要通过使用在子类中对父构造函数方法进行分类`parent::__construct();`

希望这可以帮助您了解 php 如何处理方法覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:36:19.510

很简单，您需要调用父构造函数，例如：

```
 public function __construct($app_id, $secret, $db_user, $db_password, $db_name, $db_host)
 {
    parent::__construct($db_user, $db_password, $db_name, $db_host);
    var_dump($this->db); //Output: NULL
    echo $this->member_uri //Output: member.php
 } 
```

//然后创建facebook登录对象

```
 new Facebook_Login($facebook_appID, $facebook_secret, $db_user, $db_password, $db_name, $db_host); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T15:36:29.473

你需要在类中调用父类的构造函数`Facebook_Login`

只需添加`parent::__construct()`所需的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T15:54:44.570

用这个：

```
<?php
class Facebook_Login extends Base_Login
{       
    public function __construct($app_id, $secret)
    {
        parent::__construct();
        var_dump($this->db); 
        echo $this->member_uri ;
    }
}
?> 
```

# iphone - 无法识别的选择器发送到实例 0x6d79ed0

> ID：10565045
> 
> 赞同：0
> 
> 时间：2012-05-12T15:31:59.100
> 
> 标签：iphone, ios, delegates

我正在使用委托来获取用户在表格视图中选择的选项，但我经常收到如下错误：

2012-05-12 23:26:06.704 测试[4629:fb03]-[AddContentViewController catPickViewController:didSelectGame:]：无法识别的选择器发送到实例 0x6d79ed0

我在表格视图中记录了该选项，但无法在我的第一个视图中记录它。

这就是我在表格视图中所拥有的

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    if (selectedIndex != NSNotFound)
    {
        UITableViewCell *cell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:selectedIndex inSection:0]];
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

    selectedIndex = indexPath.row;
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.accessoryType = UITableViewCellAccessoryCheckmark;

    NSString *theGame = [games objectAtIndex:indexPath.row];
    NSLog(@"%@",theGame);
    [self.delegate catPickViewController:self didSelectGame:theGame];

} 
```

这就是我所拥有的 select 方法：

```
- (void)CatPickViewController:(CatPickViewController *)controller didSelectGame:(NSString *)theGame
{
    NSLog(@"%@",theGame);
    category = theGame;
    self.catDetails.text = category;

    [self.navigationController popViewControllerAnimated:YES];
} 
```

我知道问题出在 [self.delegate catPickViewController:self didSelectGame:theGame];

但是我该怎么办呢？

我忘了提到我有 catPickViewController.h 之类的

```
@class CatPickViewController;

@protocol CatPickViewControllerDelegate <NSObject>
- (void)catPickViewController:(CatPickViewController *)controller didSelectGame:(NSString *)game;
@end

@interface CatPickViewController : UITableViewController

@property (nonatomic, weak) id <CatPickViewControllerDelegate> delegate;
@property (nonatomic, strong) NSString *game;

@end 
```

所以你们提到的 catPickViewController 来自这里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:34:24.783

您正在调用`catPickViewController`，但方法名称是拼写的`CatPickViewController`。您应该将其更改为`catPickViewController`.

# java - JavaFX 2.0 可以用作科学图表包吗？

> ID：10565048
> 
> 赞同：11
> 
> 时间：2012-05-12T15:32:26.970
> 
> 标签：java, charts, jfreechart, google-visualization, javafx

我正在用 Java 编写一个包含 GUI 的科学实验控制程序。

我帮助为此任务选择图表库。该程序将包含两种类型的图表：

1.  具有大量数据点的折线图（每个图在 10^4-10^5 点的范围内），刷新率约为每 0.5-1 秒一次，因此性能是一个因素。该图表必须包含具有不同缩放比例的数据点集。

2.  没有许多数据点的散点图，必须包含误差线，或以某种方式指示点中的错误。最好同时在 X 和 Y 轴上，例如在十字准线样式中。

对数刻度也是必须的，一个好的缩放工具和导出工具也很好。我更愿意为这两个图表提供一个解决方案，其中包含一个可能的包。

从我所做的研究来看，一个近乎完美的选择似乎是 javaFX 2.0。从我阅读的内容来看，它具有良好的性能并且看起来也很棒，但我似乎无法找到错误栏的选项。由于我根本不了解 javaFX，因此扩展图表库以包含误差线有多简单，或者是否有一个开源插件包含我没有找到的这个？

另一种选择是谷歌图表库，它似乎具有所有必要的功能，但我担心在第一种图表类型中刷新率会出现问题。这是一个可行的问题吗？

我使用过 JFreeChart，但我担心性能，并且发现添加小的更改非常困难。其中包括一种在图表创建后在运行时更改绘制点颜色的方法，这在 matlab 中是可能的。所有这些都需要我试图避免的大量额外编码和时间消耗。

最后一个似乎最实用的选项是 JChart2D。它似乎具有我需要的大部分功能，而我唯一的问题是它看起来不太好。

有人对我有什么建议吗？我计划在尽可能短的时间内编写此代码，最坏的情况是我发现某些第三方软件包中的错误或我需要的选项不可用并且需要大量额外代码，尽管它会是很高兴学习新东西。

这个决定当然可能会影响我选择使用的整个 GUI 包，目前似乎是 Swing。

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T13:03:46.867

Java FX 2.0 和 JFreeChart 没有可比性。JFreeChart 是 Swing 的图表库，它是 Java 中的 GUI 环境。而 Java FX 2.0 是 Swing 的替代品。Java FX 2.0 恰好提供了一些图表对象作为其标准库的一部分，但它们肯定不如 JFreeChart 中可用的那些灵活/可定制。当然，Java FX 2.0 在 Java 中，没有什么能阻止您通过扩展可用组件来编写您需要的非常具体的图表。

Java FX 2.0

*   优点：比 Swing 更现代的外观和感觉（个人主观意见），可能会在几年内成为 Java 中的新 GUI 标准
*   缺点：您将不得不花费更多时间来增强现有的图表组件，使用较少 = 支持较少 + 如果您遇到困难，社区较小

摇摆：

*   优点：有很多可用的图表库（JFreeChart 是一个非常全面的库，但正如你提到的还有其他替代品）。活跃而广泛的社区。
*   缺点：我个人不太喜欢它的外观和感觉——在某个阶段可能会过时，但显然不会在明天。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T00:49:51.097

[`JFreeChart`](https://stackoverflow.com/tags/jfreechart/info)非常适合这些用途。因为它是开源的，所以很容易在上下文中进行测试；[在这里](https://stackoverflow.com/a/8533194/230513)`FastScatterPlot`讨论。在创建后更改绘图很简单，如下[所示](https://stackoverflow.com/a/5522583/230513)；和任意配色方案是可能的，如此处和[此处](https://stackoverflow.com/a/9875534/230513)[所示](https://stackoverflow.com/a/8002959/230513)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-20T09:09:46.790

为了使[JFreeChart](http://www.jfree.org/jfreechart/)和[Orson Charts](http://www.object-refinery.com/orsoncharts/)（基于 Java2D）能够在 JavaFX 中使用，我创建了一个新项目，该项目提供由 JavaFX Canvas 支持的 Graphics2D API。该项目是GitHub 上的[FXGraphics2D](https://github.com/jfree/fxgraphics2d)。它也可以用于其他 Java2D 库（代码在 BSD 样式许可下）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T11:05:28.883

您可以使用 Open Office 作为图表引擎，有一个 java/UNO 桥... JavaFX 很好，但图表不如 JFreeChart API 灵活，解决方案可能是在 FX patrick 中使用 JfreeCharts

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T15:52:26.227

The MathWorks 提供了最好的科学 Java 图表包。使用[MATLAB Builder JA](http://www.mathworks.ch/products/javabuilder/)，您可以对绘图进行编码，如果需要，还可以在 MATLAB 中编写计算部分并将其转换为 Java 类。

有一个缺点。上次我使用这个包时，没有选项可以在你的应用程序中包含绘图窗口。绘图始终显示在单独的窗口中。

另一个值得关注的问题是该解决方案的价格。

[matplolib](http://matplotlib.sourceforge.net/)是最接近 MATLAB 的竞争对手，但到目前为止还没有[Jython](http://www.jython.org/)实现。

# android - 加权布局的相对布局替代方案

> ID：10565049
> 
> 赞同：-1
> 
> 时间：2012-05-12T15:32:30.357
> 
> 标签：android, android-layout, android-widget, android-relativelayout

是否可以使用相对布局进行 1:3:6 的权重调整？

我有一个相对布局，我需要使用 1:3:6 的比例在其中放置 3 个 UI 组件。有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:35:48.730

在 this 中插入一个线性布局（垂直或水平，取决于您的需要）`RelativeLayout`，像往常一样确定它的位置。并且在里面`LinearLayout`给三个元素分配权重到你想要的比例。

它们将填充`LinearLayout`同时让您能够将其相对放置在您的布局中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:52:40.820

relativeLayout 用于将视图相互关联（this 在 that 的右侧，this 在 that 的顶部，...）。它与尺寸无关。如果您想拥有 weights ，请根据需要为每个孩子使用 LinearLayout 和 weights 。

# java - 无法将面板重置为初始状态

> ID：10565053
> 
> 赞同：2
> 
> 时间：2012-05-12T15:32:57.653
> 
> 标签：java, swing, jframe, jpanel, jbutton

我的按钮有问题`Play Again`，它是将面板重置为`initial`状态。

按钮应该重置面板，`Play Again`它会重新洗牌`gameList`，但不会重置面板，这意味着所有按钮都保留并失去了`ActionListener`功能。

这是我的程序：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import static java.util.Collections.*;

public class MemoryGame extends JFrame
{
    private JButton exitButton, replayButton;
    private JButton[] gameButton = new JButton[16];
    private ArrayList<Integer> gameList = new ArrayList<Integer>();
    private int counter = 0;
    private int[] buttonID = new int[2];
    private int[] buttonValue = new int[2];

    public static Point getCenterPosition(int frameWidth, int frameHeight)
    {
        Toolkit toolkit = Toolkit.getDefaultToolkit();
        Dimension dimension = toolkit.getScreenSize();

        int x = (dimension.width - frameWidth)/2;
        int y = (dimension.height - frameHeight)/2;
        return (new Point(x,y));
    }

    public MemoryGame(String title)
    {
        super(title);

        initial();      
    }

    public void initial()
    {
        for (int i = 0; i < gameButton.length; i++) 
        {
            gameButton[i] = new JButton();
            gameButton[i].setFont(new Font("Serif", Font.BOLD, 28));
            gameButton[i].addActionListener(new ButtonListener());
        }
        exitButton = new JButton("Exit");
        replayButton = new JButton("Play Again");
        exitButton.addActionListener(new ButtonListener());
        replayButton.addActionListener(new ButtonListener());

        Panel gamePanel = new Panel();
        gamePanel.setLayout(new GridLayout(4, 4));
        for (int i = 0; i < gameButton.length; i++) 
        {
            gamePanel.add(gameButton[i]);
        }

        Panel buttonPanel = new Panel();
        buttonPanel.add(replayButton);
        buttonPanel.add(exitButton);
        buttonPanel.setLayout(new GridLayout(1, 0));

        add(gamePanel, BorderLayout.CENTER);
        add(buttonPanel, BorderLayout.SOUTH);

        for (int i = 0; i < 2; i++) 
        {
            for (int j = 1; j < (gameButton.length / 2) + 1; j++) 
            {
                gameList.add(j);
            }
        }
        shuffle(gameList);

        int newLine = 0;
        for (int a = 0; a < gameList.size(); a++) 
        {
            newLine++;
            System.out.print(" " + gameList.get(a));
            if (newLine == 4) 
            {
                System.out.println();
                newLine = 0;
            }
        }  
    }

    public boolean sameValues() 
    {
        if (buttonValue[0] == buttonValue[1]) 
        {
            return true;
        }
        return false;
    }

    private class ButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent e) 
        {
            if (exitButton == e.getSource()) 
            {
                System.exit(0);
        }
        else if (replayButton == e.getSource()) 
        {
            initial();
        }
        for (int i = 0; i < gameButton.length; i++) 
        {
            if (gameButton[i] == e.getSource()) 
            {
                gameButton[i].setText("" + gameList.get(i));
                gameButton[i].setEnabled(false);
                counter++;

                if (counter == 3) 
                {
                    if (sameValues()) 
                    {
                        gameButton[buttonID[0]].setEnabled(false);
                        gameButton[buttonID[1]].setEnabled(false);
                    } 
                    else 
                    {
                        gameButton[buttonID[0]].setEnabled(true);
                        gameButton[buttonID[0]].setText("");
                        gameButton[buttonID[1]].setEnabled(true);
                        gameButton[buttonID[1]].setText("");
                    }
                    counter = 1;
                }
                if (counter == 1) 
                {
                    buttonID[0] = i;
                    buttonValue[0] = gameList.get(i);
                }
                if (counter == 2) 
                {
                    buttonID[1] = i;
                    buttonValue[1] = gameList.get(i);
                }
            }
        }
    }
    }

    public static void main(String[] args)
    {
        int x, y;
        int width = 500;
        int height = 500;

        Point position = getCenterPosition(width, height);
        x = position.x;
        y = position.y;

        JFrame frame = new MemoryGame("Memory Game");
        frame.setBounds(x, y, width, height);

        frame.setVisible(true);
        frame.setResizable(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }   
} 
```

我怎么解决这个问题？

编辑 ：

另一个问题是之后`reset()`，所有的按钮似乎都变成了`sameValue()`。我已经在按钮上插入了一些音频，它发生在`ButtonListener`. 这是部分：

```
if (counter == 3) 
    {
        if (sameValues()) 
        {
            gameButton[buttonID[0]].setEnabled(false);
            gameButton[buttonID[1]].setEnabled(false);
        } 
```

似乎满足条件`sameValue()`，但为什么呢？

最新更新 ：

问题解决了。最新代码未上传。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:50:44.853

在该`initial()`方法中，代码正在创建一个新的 GUI。最好保留原始控件的句柄，并将它们重置为“开始游戏”状态和正确的值（对于数字）。

您当前方法的替代方案是每个组件`remove()`的`add()`新方法（不推荐）或使用`CardLayout`（不必要 - 请参阅第一个建议）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T16:13:37.030

好的，我已经修复了你的代码。

请务必查看我对您的问题的评论，并让我知道它是否有效（我做了一个快速测试，一切正常）

```
package varie;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import static java.util.Collections.shuffle;
import javax.swing.JButton;
import javax.swing.JFrame;

public class MemoryGame extends JFrame {

private JButton exitButton, replayButton;
private JButton[] gameButton = new JButton[16];
private ArrayList<Integer> gameList = new ArrayList<>();
private int counter = 0;
private int[] buttonID = new int[2];
private int[] buttonValue = new int[2];

public static Point getCenterPosition(int frameWidth, int frameHeight) {
    Toolkit toolkit = Toolkit.getDefaultToolkit();
    Dimension dimension = toolkit.getScreenSize();

    int x = (dimension.width - frameWidth) / 2;
    int y = (dimension.height - frameHeight) / 2;
    return (new Point(x, y));
}

public MemoryGame(String title) {
    super(title);

    initial();
}

public void initial() {        
    for (int i = 0; i < gameButton.length; i++) {
        gameButton[i] = new JButton();
        gameButton[i].setFont(new Font("Serif", Font.BOLD, 28));
        gameButton[i].addActionListener(new ButtonListener());
    }
    exitButton = new JButton("Exit");
    replayButton = new JButton("Play Again");
    exitButton.addActionListener(new ButtonListener());
    replayButton.addActionListener(new ButtonListener());

    Panel gamePanel = new Panel();
    gamePanel.setLayout(new GridLayout(4, 4));
    for (int i = 0; i < gameButton.length; i++) {
        gamePanel.add(gameButton[i]);
    }

    Panel buttonPanel = new Panel();
    buttonPanel.add(replayButton);
    buttonPanel.add(exitButton);
    buttonPanel.setLayout(new GridLayout(1, 0));

    add(gamePanel, BorderLayout.CENTER);
    add(buttonPanel, BorderLayout.SOUTH);

    for (int i = 0; i < 2; i++) {
        for (int j = 1; j < (gameButton.length / 2) + 1; j++) {
            gameList.add(j);
        }
    }
    shuffle(gameList);

    int newLine = 0;
    for (int a = 0; a < gameList.size(); a++) {
        newLine++;
        System.out.print(" " + gameList.get(a));
        if (newLine == 4) {
            System.out.println();
            newLine = 0;
        }
    }

}

public boolean sameValues() {
    if (buttonValue[0] == buttonValue[1]) {
        return true;
    }
    return false;
}

public void reset() {        
    for(int i = 0; i< gameButton.length; i++){
        gameButton[i].setEnabled(true);
        gameButton[i].setText("");
        for(ActionListener al : gameButton[i].getActionListeners()){
            gameButton[i].removeActionListener(al);
        }
        gameButton[i].addActionListener(new ButtonListener());
    }
    buttonID = new int[2];
    buttonValue = new int[2];
    counter = 0;
    shuffle(gameList);
    int newLine = 0;
    for (int a = 0; a < gameList.size(); a++) {
        newLine++;
        System.out.print(" " + gameList.get(a));
        if (newLine == 4) {
            System.out.println();
            newLine = 0;
        }
    }
}

private class ButtonListener implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        if (exitButton.equals(e.getSource())) {
            System.exit(0);
        } else if (replayButton.equals(e.getSource())) {
            reset();
        } else {
            for (int i = 0; i < gameButton.length; i++) {
                if (gameButton[i].equals(e.getSource())) {
                    gameButton[i].setText("" + gameList.get(i));
                    gameButton[i].setEnabled(false);
                    counter++;

                    if (counter == 3) {
                        if (sameValues()) {
                            gameButton[buttonID[0]].setEnabled(false);
                            gameButton[buttonID[1]].setEnabled(false);
                        } else {
                            gameButton[buttonID[0]].setEnabled(true);
                            gameButton[buttonID[0]].setText("");
                            gameButton[buttonID[1]].setEnabled(true);
                            gameButton[buttonID[1]].setText("");
                        }
                        counter = 1;
                    }
                    if (counter == 1) {
                        buttonID[0] = i;
                        buttonValue[0] = gameList.get(i);
                    }
                    if (counter == 2) {
                        buttonID[1] = i;
                        buttonValue[1] = gameList.get(i);
                    }
                }
            }
        }
    }
}

public static void main(String[] args) {
    int x, y;
    int width = 500;
    int height = 500;

    Point position = getCenterPosition(width, height);
    x = position.x;
    y = position.y;

    JFrame frame = new MemoryGame("Memory Game");
    frame.setBounds(x, y, width, height);

    frame.setVisible(true);
    frame.setResizable(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}
} 
```

# php - 使用 php file_get_content 时错误访问被拒绝

> ID：10565054
> 
> 赞同：0
> 
> 时间：2012-05-12T15:33:19.823
> 
> 标签：php, file-get-contents, access-denied

我正在使用 php [file_get_contents](http://php.net/manual/en/function.file-get-contents.php)来获取网页。
当我从本地主机执行此操作时，一切正常。
但是，一旦我从共享主机中执行此操作，我就会收到以下错误消息：

> ERROR
> Access Denied
> Access Denied by security policy
> 您网络的安全策略此时不允许您的请求。如果您认为这不正确，请联系您的管理员。

这是我回来的标题

```
array(4) { [0]=> string(22) "HTTP/1.0 403 Forbidden" [1]=> string(23) 
"Content-Type: text/html" [2]=> string(17) "Connection: close" [3]=> string(19) 
"Content-Length: 353" } 
```

代码很简单

```
$page = file_get_contents('http://www.somedomain.com/'); 
```

如果我尝试当前页面，它可以工作

```
 $page = file_get_contents('http://stackoverflow.com/questions/10565054/error-access-denied-when-using-php-file-get-content'); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T16:14:31.810

远程网络服务器拒绝您的请求。没有具体说明它为什么拒绝你。它可以将服务器配置为拒绝包含共享主机所在位置的 IP 范围。可能是服务器需要某些标头信息（例如主机条目或某个 user_agent 或其他内容）。尝试设置一些 HTTP 上下文内容以安抚您尝试联系的服务器。[这是来自file_get_contents](http://php.net/manual/en/function.file-get-contents.php)页面的示例。

```
function file_get_contents_utf8($fn) { 
    $opts = array( 
        'http' => array( 
            'method'=>"GET", 
            'header'=>"Content-Type: text/html; charset=utf-8" 
        ) 
    ); 

    $context = stream_context_create($opts); 
    $result = @file_get_contents($fn,false,$context); 
    return $result; 
} 
```

如果您可以从浏览器访问目标，请尝试复制浏览器发送的所有标头。大多数浏览器都有某种插件，可以准确地向您显示请求中的标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:05:26.030

因此，该 Web 服务器检查了浏览器并拒绝了您的连接。您应该尝试 fsock 功能。

# php - 从 JS 中设置 PHP SESSION var

> ID：10565055
> 
> 赞同：0
> 
> 时间：2012-05-12T15:33:36.670
> 
> 标签：php, javascript, jquery, session

有没有办法从我的 JS 函数中设置会话变量？

我有以下JS代码：

```
$.ajax({
    url: "ajax.php",
    type: "POST",
    data: { 
        tid: '.$testID.',
        do:"'.$do.'"
    },
    success: function( html ) {
        $("#partBox").html( html ); 
        // add PHP here?            
    }
}); 
```

我想在会话中设置以下变量，成功：

```
$_SESSION['hgt'] = 'Math.ceil($("#partBox").height() / 2)'; 
```

我不知道这是否可能......或者我可以使用cookie......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T15:35:22.363

您不能在 JavaScript 中设置任何 PHP 变量。一旦页面完成加载，PHP 就完成了它的工作并且不在画面中。如果您想使用 JavaScript 设置会话变量，您可以通过以下两种方式之一进行：

1.  使用 Ajax 将值发送到 PHP 脚本以设置会话变量
2.  将其存储在 cookie 中，并在下一页加载时让 PHP 使用该 cookie 的值来创建会话变量

# asp.net - 如何在asp.net页面的标签中使用条件代码？

> ID：10565056
> 
> 赞同：0
> 
> 时间：2012-05-12T15:33:45.900
> 
> 标签：asp.net, data-binding

我在 page 上有一个中继器。我绑定它。我在其中添加了一个图像。

```
 <asp:Repeater ID="product" runat="server" >
 <ItemTemplate>
 <asp:Image ID="Image1" runat="server" Height="120px" Width="120px" ImageUrl='<%# Eval("Image") %>' />
 </ItemTemplate>
 </asp:Repeater> 
```

我想，如果 (Eval("Image")) 中的不退出图像显示一个特殊图像。

可以在图像标签中插入条件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:49:01.470

您应该能够`Eval("Image")`像这样测试是否为空：

```
<%# Eval("Image").ToString() != String.Empty ? Eval("Image") : "DefaultImagePath" %> 
```

# google-chrome - Javascript 控制 Chrome 扩展中 Background.html 中的音频标签

> ID：10565058
> 
> 赞同：0
> 
> 时间：2012-05-12T15:34:21.383
> 
> 标签：google-chrome, background, google-chrome-extension, popup

我想在 Chrome 扩展程序的背景页面中控制音频标签的音量。媒体播放良好，但默认音量（我认为它是 1 => 最大）但是我可以更改音量。

你知道怎么 ？

*背景.html：*

```
<!doctype html>
<html>
<head>
</head>
<body>
    <audio src="http://radio-contact.ice.infomaniak.ch/radio-contact-high.mp3" id="radio" 
    autoplay="true" oncanplay="document.getElementById('radio').volume = 0.1">
    </audio>
</body>
</html> 
```

此外，我想在 popup.html 中有 Pause/Volume+/Volume- 按钮来控制它。我尝试使用 chrome.extension.getBackgroundPage() 但我无法控制它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:14:50.663

你试过什么？发布您使用的代码可能会有所帮助。

无论如何，这是一个我累了并且似乎可以工作的简单代码

***背景.html***

```
<html>
<head>
<script>
function controlVolume(passedVolume)
{
    document.getElementById('radio').volume = passedVolume;
}
</script>
</head>
<body>
    <audio src="http://radio-contact.ice.infomaniak.ch/radio-contact-high.mp3"
    id="radio" autoplay="true" oncanplay="controlVolume(0.1);">
    </audio>
</body>
</html> 
```

***popup.html***

```
<html>
<head>
</head>
<body>
<input id="volume" type="text" />
<input type="button" value="change volume" onclick=
    "
        chrome.extension.getBackgroundPage().controlVolume
               (document.getElementById('volume').value);
    "
/>
</body>
</html> 
```

# xml - Titanium mobile - 文本到 strings.xml 显示变量名称而不是内容

> ID：10565064
> 
> 赞同：1
> 
> 时间：2012-05-12T15:34:48.413
> 
> 标签：xml, mobile, internationalization, titanium

在我的钛移动应用程序中使用命令 L('name_of_entry') 时出现问题。

模拟器 iOS 的预览工作正常。

该条目`<string name="name_of_entry">Hello</string>`显示“你好”。

但是进入android模拟器，mobileweb预览和ipod touch iOS 5.1，这只显示name_of_entry。

你知道是什么问题吗？

我向您展示了我用来调用它的代码。

第一的 ：

```
menuItemsTab[0] = new menuIconsItemModel(0, 'user_admin', pathImages + 'images/icon_user.png', L('user_admin_menu'),'UserAdminMainWindowController'); 
```

然后进入标签：

```
text : item.text, 
```

请帮忙^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:49:05.260

好的，我找到了问题所在……我！

模拟器查看了 en 文件夹中的 strings.xml 文件，但我的设备的语言是法语，并且... fr 文件夹中的 strings.xml 文件没有完成。

语言之间的切换是自动的，我不知道！

将尝试更改此设置并将此设置存储到文件或 sqlite db 中。

# php - 检查图像的大小

> ID：10565067
> 
> 赞同：0
> 
> 时间：2012-05-12T15:35:08.310
> 
> 标签：php, image, if-statement, image-size

我有一个问题，如何检查图片的大小是否在 1mb 和 4mb 之间？

我已经这样做了，但它给我带来了一个错误：

```
<?php
if (($_FILES['pic']['size'][$k] > 1000000) && ($_FILES['pic']['size'][$k] < 4000000))
{ // do sth here }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:50:54.863

```
$min_mb = 1;
$max_mb = 4;
if($_FILES['pic']['size'] > ($min_mb * 1000 * 1000) && $_FILES['pic']['size'] < ($max_mb * 1000 * 1000))
{
   //This image falls between the min and max successfully
} 
```

# ios - 如何将 sqlite 与 Phonegap 上的在线数据库连接

> ID：10565069
> 
> 赞同：3
> 
> 时间：2012-05-12T15:35:14.737
> 
> 标签：ios, database, sqlite, cordova

我在 IOS5 上使用 phonegap[cordova 1.7.0] sqlite 创建了一个数据库。但是我现在想用我已经在在线服务器上的一个数据库来切换这个数据库。有什么方法可以做到这一点吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:50:55.120

编写一个提供对数据库的访问的服务器端应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:29:31.530

如果我理解正确，您想使用当前逻辑来处理数据库访问以连接到远程 sqlite 数据库。

我认为这样的用例不可能开箱即用。Cordova 正在使用对内置于 iOS 和 Android 的 WebSQL 的支持（或提供自己的兼容实现）。

您的问题至少有两种解决方案：

1.  创建允许访问远程数据库的服务，然后创建在客户端和服务器上同步该服务的客户端同步服务。这样，您将获得完整的离线支持，并且数据将在服务器上备份。

2.  编写您自己的 Cordova 插件，该插件允许访问远程 sqlite 数据库，但使用 WebSQL 接口。我想您可以重用 iOS WebSQL 实现中的大部分当前逻辑，但不要访问设备上的本地 sqlite 文件，而是使用服务器上的数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T15:01:06.973

Phonegap 有一个 sqlite 插件。如果在线 sqlite 是（半）公开可用/可下载的，您可以让 Phonegap 下载 db 文件（我认为有一个下载插件），并让您的自定义 sqlite 插件使用这个 db。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T08:44:04.267

要么你也可以这样做。在服务器上创建一个 XML 文件 dbase 并对其进行解析，然后您可以通过读取 xml 文件内容来更改现有数据库。

# javascript - 使用 Masonry 进行无限滚动 (AJAX) 后 jQuery 函数不起作用

> ID：10565074
> 
> 赞同：4
> 
> 时间：2012-05-12T15:35:29.510
> 
> 标签：javascript, jquery, ajax

这可能会变得复杂，所以我会尽力解释我的情况。

我正在使用这个 jquery 插件[http://www.infinite-scroll.com/](http://www.infinite-scroll.com/)以及砌体： http: [//masonry.desandro.com/](http://masonry.desandro.com/)

一切正常。

但是，当您将鼠标悬停在帖子上时，我试图让与每个帖子相关的一些信息出现。这是我的代码：

```
$(".main").hover(function(){
    $(this).next(".info").slideToggle("fast");
}); 
```

这仅适用于第一页内容，而不适用于无限滚动加载的额外内容。

所以我尝试将该函数添加到我的砌体代码的回调中：

```
 // trigger Masonry as a callback
function(newElements) {
    // hide new items while they are loading
    var $newElems = $(newElements).css({opacity: 0});
    // ensure that images load before adding to masonry layout
    $newElems.imagesLoaded(function(){
        // show elems now they're ready
        $newElems.animate({opacity: 1});
        $container.masonry('appended', $newElems, true); 
    });
    $(".main").hover(function(){
        $(this).next(".info").slideToggle("fast");
    });     
}); 
```

（如果我做错了，请原谅，我以前从未使用过 Ajax，只是在试验）

这使得悬停功能适用于无限滚动加载的新额外内容，但随后与原始内容发生冲突。

那么，实现悬停功能的最佳方式是什么，以便它可以在 Ajax 调用之前和之后加载的所有帖子正常工作？

谢谢。

* * *

编辑：

通过将我的方法更改为此解决了这个问题：

```
 $(document).on("click",".main",function(){
    $(this).next(".info").slideToggle("fast");
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

我将把原始问题留在这里，以防遇到类似问题的人发现它很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:43:35.693

```
$(document).on("click",".main",function(){
    $(this).next(".info").slideToggle("fast");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-29T10:17:58.493

对于最新版本的[http://www.infinite-scroll.com/](http://www.infinite-scroll.com/)以及砌体： http: [//masonry.desandro.com/](http://masonry.desandro.com/)以下代码对我有用：

```
 $grid.on( 'append.infiniteScroll', function( event, response, path, items ) {
        $(this).next(".info").slideToggle("fast"); 
      // OR your code you want to load after infinite scroll loads
    }); 
```

在此处查看更多信息[https://infinite-scroll.com/events.html#append](https://infinite-scroll.com/events.html#append)

# php - PHP函数不返回结果

> ID：10565075
> 
> 赞同：1
> 
> 时间：2012-05-12T15:35:30.227
> 
> 标签：php, mysql, function, return

我有一个函数`loadContent()`，当被调用时，它会查询数据库、格式化数据并返回结果。这用于构建一个非常原始的 CMS，此功能用于从数据库中加载文章。

这是功能问题：

```
 $articles = mysql_query("SELECT `id`, `name`, `content`, `keywords`, `description`, `access_level` FROM `tb_articles` WHERE `page_id`='$pageID'");
            if(!$articles){
                die('Error!: ' . mysql_error());
            }
            while($arts = mysql_fetch_assoc($articles)){
                $content .= '<div class="article" id="art-' . $arts['id'] . '">';
                $content .= '<h1>' . $arts['name'] . '</h1>';
                $content .= $arts['content'];
                $content .= '</div>';
            }
        return $content; 
    }else{ 
```

我的问题是没有任何东西被退回。SQL 已验证，它应该返回两行。我已经注释掉了循环中的所有内容并添加了该行`$content .= 'test';`并将返回语句更改为`echo $content;`并且该函数成功地回显了两次“测试”。那么我所做的有什么问题呢？

感谢您帮助我，我对 PHP 很陌生。

**更新：**

该帖子现在代表所有有效的更改。

我得到了某个地方`var_dump`。我`$content`在声明之前就放弃了`return`。数据库中的所有文章（其中 2 篇）都显示在`string(2445) ""`. 这确认查询没有问题。我现在认为这与 return 语句有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:40:21.177

不确定这是否相关，但看起来您从未关闭过第一个`div`标签。您也不会关闭 id 属性引号（以撇号开头，然后连接引号）。

进一步来说：

```
... id='art-" . $arts['id'] . "'></div>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T15:44:50.817

尝试将您的代码更新为此：

```
function loadContent(){
   $content = '';
   $pageID = 1;
   //
   $articles = mysql_query("SELECT `id`, `name`, `content`, `keywords`, `description`, `access_level` 
                            FROM `tb_articles` 
                            WHERE `page_id`='$pageID'");

        // you only need the associative array
        while($arts = mysql_fetch_array($articles, MYSQL_ASSOC)){
            // close your tag properly and use the concat operator
            $content .= '<div class="article" id="art-' . $arts['id'] . '">';
            $content .= '<h1>' . $arts['name'] . '</h1>';
            $content .= $arts['content'];
            $content .= '</div>';
        }

    return $content;

 } 
```

您也可以尝试`mysql_error()`在通话后运行`mysql_query()`以查看是否有任何问题。

您应该检查的另一件事是，您的数据库中实际上有一行 page_id 等于 1。您还应该确保您的列名是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T16:25:58.870

```
$content .= "<div class='article' id='art-" . $arts['id'] . '"'; 
```

它应该是

```
$content .= "<div class='article' id='art-" . $arts['id'] . "'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T16:14:17.197

试试这个

```
error_reporting(E_ALL);
ini_set("display_errors", 1);

function loadContent(){
   $content = '';
   $pageID = 1;
   $myQuery = "SELECT `id`, `name`, `content`, `keywords`, `description`, `access_level` FROM `tb_articles` WHERE `page_id`='{$pageID}'";
   echo $myQuery;
   $myQuery = "SELECT `id`, `name`, `content`, `keywords`, `description`, `access_level` FROM `tb_articles` WHERE `page_id`=" . $pageID;
   echo $myQuery;
   $articles = mysql_query($myQuery) or die("Error found with the Query" . mysql_error());

        while($arts = mysql_fetch_assoc($articles)){
                $content .= "<div class='article' id='art-" . $arts['id'] . '"';
            $content .= '<h1>' . $arts['name'] . '</h1>';
            $content .= $arts['content'];
            $content .= '</div>';
        }

    return $content;

} 
```

试着告诉我，如果可行，我会更新解释。

***更新***

代码已经更新，现在有两个查询，分别执行并检查。

# android - 在 android 应用程序中发推文而不是对用户进行身份验证

> ID：10565076
> 
> 赞同：-1
> 
> 时间：2012-05-12T15:35:45.267
> 
> 标签：android, twitter

我正在开发一个 android 应用程序，我想在推文中分享一张图片。我搜索教程，所有教程都必须先对用户进行身份验证，然后才能发布推文。有没有办法使用存储在手机上的帐户而不是再次验证用户身份？

我不想有分享按钮，我希望像在 iPhone 中一样可以发布推文。

如果有人知道其他可行的方法并且更好，请告诉我，我不想要分享按钮，我只想发推文。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:13:46.377

使用 shareIntent，如此处[所述](https://stackoverflow.com/questions/8308666/how-to-force-share-intent-to-open-a-specific-app/8312422#8312422)：

```
public void shareTwitter() {
        String message = "Your message to post";
        try {
            Intent sharingIntent = new Intent(Intent.ACTION_SEND);
            sharingIntent.setClassName("com.twitter.android","com.twitter.android.PostActivity");
            sharingIntent.putExtra(Intent.EXTRA_TEXT, message);
            startActivity(sharingIntent);
        } catch (Exception e) {
            Log.e("In Exception", "Comes here");
            Intent i = new Intent();
            i.putExtra(Intent.EXTRA_TEXT, theObject.getName());
            i.setAction(Intent.ACTION_VIEW);
            i.setData(Uri.parse("https://mobile.twitter.com/"));
            startActivity(i);
        }
    } 
```

# python - 使用 pydev 时，我在 Eclipse 中获得了不兼容的调试器版本

> ID：10565079
> 
> 赞同：0
> 
> 时间：2012-05-12T15:36:05.203
> 
> 标签：python, eclipse, pydev

我在使用 pydev 时在 eclipse 中得到一个不兼容的调试器版本我的 pydev 调试器的默认端口是 5678

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:52:10.590

也许您的 pythopath 中有旧版本的调试器？

请检查您的解释器配置，看看您是否不小心添加了它。

# php - 将新评论附加到旧评论部门

> ID：10565086
> 
> 赞同：0
> 
> 时间：2012-05-12T15:37:14.957
> 
> 标签：php, jquery, ajax, html

我正在尝试将新评论附加到旧评论框中。这是我的代码，不知道为什么它不起作用

```
<script type="text/javascript">
    $(document).ready(function () {

        $(function () {
            $(".bsubmit").click(function () {
                var id = $(this).parent().parent().attr("id");
                var comm = document.getElementById(id).getElementsByClassName("commentadd")[0].value;
                $.ajax({
                    type: "POST",
                    url: "comment.php",
                    data: {
                        id: id,
                        comm: comm
                    },
                    cache: false,
                    success: function () {
                        $('.addcomment').slideUp('slow', function () {

                            //  POSTED IN DATABASE SUCCESS NOW APPEND The comment with other COMMENTS 

                            document.getElementById(id).getElementsByClassName(".itemcomment").append('<div class="comm">
    <a href="profile.php?id=<?php echo $_SESSION['
                            fbid ']; ?> class="comm_img"><img src=" <?php echo $_SESSION['
                            smallest ']; ?> width="50" height="50" /></a>
    <p width="50"><strong>
     </strong></p>
     </div>');

                        });
                        $('#load').fadeOut();
                    }
                });
                return false;
            });
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:09:26.237

我认为错误出现在“slideUp”回调中的代码中，所以我认为正确的方法是：

使用常规 JavaScript：

```
$('.addcomment').slideUp('slow', function () {

    var elem = getElementById(id).getElementsByClassName(".itemcomment")[0],
        div = document.createElement("div"),
        a = document.createElement("a"),
        p = document.createElement("p"),
        img = document.createElement("img"),
        strong = document.createElement("strong");

        div.className = "comm";
        a.className = "comm_img";
        a.href = "profile.php?id=<?php echo $_SESSION['fbid ']; ?>";
        img.src = "<?php echo $_SESSION['smallest ']; ?>";
        img.width = "50";
        img.height = "50";
        p.width = "50";

        p.appendChild(strong);
        a.appendChild(img);
        div.appendChild(a);
        div.appendChild(p);
        elem.appendChild(div);
}); 
```

使用 JQuery：

```
$('.addcomment').slideUp('slow', function () {
    var html = '<div class=comm>';
    html += '<a href="profile.php?id=' + "<?php echo $_SESSION['fbid'];?>" + 'class=comm_img>';
    html += '<img src="' + "<?php echo $_SESSION['smallest']; ?>" + 'width="50" height="50" /></a>';
    html += '<p width="50"><strong></strong></p></div>';

    $(".itemcomment", "#"+id).append(html);        
}); 
```

希望能帮助到你！

# windows-phone-7 - 在 TeamCity 中构建 WP7

> ID：10565088
> 
> 赞同：1
> 
> 时间：2012-05-12T15:37:35.017
> 
> 标签：windows-phone-7, teamcity, msbuild-4.0

我一直在努力尝试在 Teamcity 中构建我的 WP7 应用程序。为此，我设法获得了成功构建应用程序所需的 dll 和 .target 文件。

我遇到的问题是 Xap 包装。Xap 打包步骤如下：

```
[16:18:03]: [XapPackager] XapPackager
[16:18:03]: [XapPackager] Begin Xap packaging
[16:18:03]: [XapPackager] Creating file MyApp.xap
[16:18:03]: [XapPackager] Adding WMAppManifest.xml
[16:18:03]: [XapPackager] Adding Background.png
[16:18:03]: [XapPackager] Adding ApplicationIcon.png
[16:18:03]: [XapPackager] Adding Caliburn.Micro.dll
[16:18:03]: [XapPackager] Adding Caliburn.Micro.Extensions.dll
[16:18:03]: [XapPackager] Adding Hammock.WindowsPhone.Mango.dll
[16:18:03]: [XapPackager] Adding ICSharpCode.SharpZipLib.WindowsPhone.dll
[16:18:03]: [XapPackager] Adding Newtonsoft.Json.dll
[16:18:03]: [XapPackager] Adding Telerik.Windows.Controls.Primitives.dll
[16:18:03]: [XapPackager] Adding Telerik.Windows.Core.dll
[16:18:03]: [XapPackager] Adding TombstoneHelper.dll
[16:18:03]: [XapPackager] Adding YourLastAboutDialog.dll
[16:18:03]: [XapPackager] Adding Content\About\Data.xml
[16:18:03]: [XapPackager] Adding Resources\Iconography\appbar.check.rest.png
[16:18:03]: [XapPackager] Adding Resources\Iconography\appbar.delete.rest.png
[16:18:03]: [XapPackager] Adding Resources\Iconography\appbar.feature.email.rest.png
[16:18:03]: [XapPackager] Adding Resources\Iconography\appbar.feature.settings.rest.png
[16:18:03]: [XapPackager] Adding Resources\Iconography\appbar.refresh.rest.png
[16:18:03]: [XapPackager] Adding Resources\Iconography\appbar.save.rest.png
[16:18:03]: [XapPackager] Adding Resources\Images\fail.png
[16:18:03]: [XapPackager] Adding Resources\Images\Icon_External_Link.png
[16:18:03]: [XapPackager] Adding Resources\Images\lock.png
[16:18:03]: [XapPackager] Adding Resources\Images\success.png
[16:18:03]: [XapPackager] Adding Resources\Images\Thumbs\fail.png
[16:18:03]: [XapPackager] Adding Resources\Images\Thumbs\success.png
[16:18:03]: [XapPackager] Adding Resources\Images\Thumbs\unknown.png
[16:18:03]: [XapPackager] Adding Resources\Images\unknown.png
[16:18:03]: [XapPackager] Adding SplashScreenImage.jpg
[16:18:03]: [XapPackager] Adding SubmissionInfo\ManualTestResults.xml
[16:18:03]: [XapPackager] Adding SubmissionInfo\Settings.xml
[16:18:03]: [XapPackager] Adding Content\About\AboutStyles.xaml
[16:18:03]: [XapPackager] Adding AppManifest.xaml
[16:18:03]: [XapPackager] Adding SplashScreenImage.jpg
[16:18:03]: [XapPackager] (1, 1): Xap packaging failed. Cannot access a closed Stream. 
```

它谈到 xap Packaging 失败的最后一行并没有很好的描述性。xap文件上没有锁

在本地使用 Visual Studio，最后一行应如下所示：

```
Xap packaging completed successfully 
```

这令人沮丧 - 有人见过类似的东西吗？我在 Teamcity 中使用了一个简单的 MSbuild 4.0 运行器

谢谢

保罗

# c# - 获取异步 HttpWebRequest 的响应

> ID：10565090
> 
> 赞同：21
> 
> 时间：2012-05-12T15:37:51.053
> 
> 标签：c#, asynchronous, httpwebrequest, httpwebresponse

我想知道是否有一种简单的方法来获得异步 httpwebrequest 的响应。

我已经[在这里](https://stackoverflow.com/questions/9877120/how-do-i-actually-get-the-response-of-an-async-web-request-from-outside-the-meth)看到了这个问题，但我想做的只是将响应（通常是 json 或 xml）以字符串的形式返回到另一个方法，然后我可以在其中解析它/相应地处理它。

继承人一些代码：

我在这里有这两个静态方法，我认为它们是线程安全的，因为所有参数都被传入并且这些方法没有使用共享的局部变量？

```
public static void MakeAsyncRequest(string url, string contentType)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    request.ContentType = contentType;
    request.Method = WebRequestMethods.Http.Get;
    request.Timeout = 20000;
    request.Proxy = null;

    request.BeginGetResponse(new AsyncCallback(ReadCallback), request);
}

private static void ReadCallback(IAsyncResult asyncResult)
{
    HttpWebRequest request = (HttpWebRequest)asyncResult.AsyncState;
    try
    {
        using (HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asyncResult))
        {
            Stream responseStream = response.GetResponseStream();
            using (StreamReader sr = new StreamReader(responseStream))
            {
                //Need to return this response 
                string strContent = sr.ReadToEnd();
            }
       }
       manualResetEvent.Set();
    }
    catch (Exception ex)
    {
        throw ex;
   }
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-12T15:58:16.957

假设问题是您很难获得返回的内容，那么最简单的路径可能是使用 async/await 如果您可以使用它。如果您使用.NET 4.5，最好切换到 HttpClient，因为它是“本机”异步的。

使用 .NET 4 和 C# 4，您仍然可以使用 Task 来包装它们，并使其更容易访问最终结果。例如，一个选项如下。请注意，在内容字符串可用之前，它会阻塞 Main 方法，但在“真实”场景中，您可能会将任务传递给其他东西，或者将另一个 ContinueWith 串起来，或者其他什么。

```
void Main()
{
    var task = MakeAsyncRequest("http://www.google.com", "text/html");
    Console.WriteLine ("Got response of {0}", task.Result);
}

// Define other methods and classes here
public static Task<string> MakeAsyncRequest(string url, string contentType)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    request.ContentType = contentType;
    request.Method = WebRequestMethods.Http.Get;
    request.Timeout = 20000;
    request.Proxy = null;

    Task<WebResponse> task = Task.Factory.FromAsync(
        request.BeginGetResponse,
        asyncResult => request.EndGetResponse(asyncResult),
        (object)null);

    return task.ContinueWith(t => ReadStreamFromResponse(t.Result));
}

private static string ReadStreamFromResponse(WebResponse response)
{
    using (Stream responseStream = response.GetResponseStream())
    using (StreamReader sr = new StreamReader(responseStream))
    {
        //Need to return this response 
        string strContent = sr.ReadToEnd();
        return strContent;
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-01T19:35:51.873

`HttpClient`“如果你使用的是 .Net 4.5，那就更好了，因为它是‘本机’的`async`。” - 詹姆斯曼宁绝对正确的答案。

这个问题是大约 2 年前提出的。现在我们有了 .Net Framework 4.5，它提供了强大的异步方法。使用`HttpClient`. 考虑以下代码：

```
 async Task<string> HttpGetAsync(string URI)
    {
        try
        {
            HttpClient hc = new HttpClient();
            Task<Stream> result = hc.GetStreamAsync(URI);

            Stream vs = await result;
            StreamReader am = new StreamReader(vs);

            return await am.ReadToEndAsync();
        }
        catch (WebException ex)
        {
            switch (ex.Status)
            {
                case WebExceptionStatus.NameResolutionFailure:
                    MessageBox.Show("domain_not_found", "ERROR",
                    MessageBoxButtons.OK, MessageBoxIcon.Error);
                break;
                    //Catch other exceptions here
            }
        }
    } 
```

要使用 HttpGetAsync()，请创建一个“异步”的新方法。async 是必需的，因为我们需要在 GetWebPage() 方法中使用“await”：

```
async void GetWebPage(string URI)
        {
            string html = await HttpGetAsync(URI);
            //Do other operations with html code
        } 
```

现在，如果您想异步获取网页 HTML 源代码，只需调用`GetWebPage("web-address...")`. 甚至`Stream`阅读也是异步的。

注意：需要使用`HttpClient`.Net Framework 4.5。此外，您需要`System.Net.Http`在项目中添加引用并添加“ `using System.Net.Http`”以便于访问。

如需进一步了解此方法的工作原理，请访问：http: [//msdn.microsoft.com/en-us/library/hh191443 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hh191443(v=vs.110).aspx)

使用异步：[4.5 中的异步：值得等待](http://blogs.msdn.com/b/dotnet/archive/2012/04/03/async-in-4-5-worth-the-await.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T15:42:18.327

一旦你去异步，你就再也回不去了。从那里你只能真正访问异步的回调。你可以增加它的复杂性并做一些线程和等待句柄，但这可能是一个相当痛苦的努力。

从技术上讲，你也可以在需要等待结果的时候让线程休眠，但我不建议这样做，你还不如在那个时候做一个普通的 http 请求。

在 C# 5 中，它们具有 async/await 命令，可以更轻松地获取对主线程的异步调用的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-11T20:27:20.063

```
public static async Task<byte[]> GetBytesAsync(string url) {
    var request = (HttpWebRequest)WebRequest.Create(url);
    using (var response = await request.GetResponseAsync())
    using (var content = new MemoryStream())
    using (var responseStream = response.GetResponseStream()) {
        await responseStream.CopyToAsync(content);
        return content.ToArray();
    }
}

public static async Task<string> GetStringAsync(string url) {
    var bytes = await GetBytesAsync(url);
    return Encoding.UTF8.GetString(bytes, 0, bytes.Length);
} 
```

# .htaccess - 在 URL 地址中的特定子文件夹部分之后删除正斜杠

> ID：10565095
> 
> 赞同：0
> 
> 时间：2012-05-12T15:38:26.443
> 
> 标签：.htaccess, rewrite

我有一个将成员数据组织到子文件夹中的网站。要访问数据，用户需要访问以下内容：-

**www.domain.com/members/so/me/on/esfolder**

我的问题是，我可以在 .htaccess 文件中使用一个函数，让用户只需键入以下内容即可访问同一页面：-

**www.domain.com/members/someonesfolder**

我已经阅读了重写语法，但很难理解如何做到这一点。这只是在特定点之后删除正斜杠的情况。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T15:00:55.450

经过几个小时的不间断混乱后，我自己弄清楚了……对于那些可能想知道的人，这是我使用的代码……

**RewriteRule ^members/([A-Za-z0-9]{1,2})([A-Za-z0-9]{1,2})([A-Za-z0-9]{1,} ) 会员/$1/$2/$3/ [L]**

在上面，只有三个子文件夹钻取（这是我决定做的，而不是我原来问题中的四个）。

希望这对其他人有帮助！

# html - 一切问题之上的 chrome 对象元素

> ID：10565098
> 
> 赞同：0
> 
> 时间：2012-05-12T15:38:35.653
> 
> 标签：html, flash, google-chrome

嗨，谢谢你的访问。我尝试并挖掘了网络，但这是我真的无法开始工作的事情。

所以我通过它的提要从另一个网站获取这个对象（所以我不能编辑源材料）

```
<object width="100%" height="420" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">
    <param name="allowFullScreen" value="true" />
    <param name="allowscriptaccess" value="always" />
    <param name="src" value="http://www.youtube.com/v/8UFhdYhE9ko?version=3&amp;hl=de_DE" />
    <param name="allowfullscreen" value="true" />
    <embed width="100%" height="420" type="application/x-shockwave-flash" src="http://www.youtube.com/v/8UFhdYhE9ko?version=3&amp;hl=de_DE" allowFullScreen="true" allowscriptaccess="always" allowfullscreen="true" />
</object> 
```

现在，在 chrome 中，无论 z-index 是什么，这个对象都高于其他所有对象。这是因为没有定义 wmode。我知道，我知道我可以通过 jquery 修改源并将这个 wmode 放入其中，类似于

```
$("object").each(function() {
    $(this).children("embed").attr("wmode", "opaque");
}); 
```

​但在好老丁目里什么都没有改变。我的 iframe 工作正常，我做了几乎同样的事情，一切都很好。但在对象上，我无法让它工作。可能是，jquery 移动为时已晚..？在我下面的 js fiddle 中，我必须观看视频，其中一个在 embed 标记中具有 wmode 属性，而这个可以正常工作，所以我知道这是正确的属性和放置它的正确位置。但另一个应该通过jquery获取属性，根本没有改变。

这是一个[jsfiddle](http://jsfiddle.net/honk1/WTE7X/)。它是对象上方的一个红色框。在“普通”浏览器中，该框位于两个对象上方，在 chrome 中，上方影片位于红色框上方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:05:38.203

您可以使用此函数复制所有对象，插入 wmode 参数并用新对象替换旧对象：

```
$("object").each(function() {
    var $newObject = $(this).clone(true);
    $newObject.children("embed").attr("wmode", "opaque");
    $(this).replaceWith($newObject);
}); 
```

​​小提琴：http: [//jsfiddle.net/WTE7X/3/](http://jsfiddle.net/WTE7X/3/)

如果您使用的是 PHP，则可以非常简单地执行此操作，如果`$html`是包含对象的字符串：

```
$doc = new DOMDocument();
$doc->loadHTMLFile('html');
$finalDoc = new DOMDocument();
$objects = $doc->getElementsByTagName('object');
for($i = 0; $i < $objects->length; $i++)
{
    $embeds = $objects->item($i)->getElementsByTagName('embed');
    for($j = 0; $j < $embeds->length; $j++)
    {
        $embeds->item($j)->setAttribute('wmode', 'opaque');
    }
    $finalDoc->appendChild($finalDoc->importNode($objects->item($i), true));
}

$fixedHTML = $finalDoc->saveHTML(); // This holds the new HMTL to output 
```

# android - Android：如何知道 SoundPool 的播放已经结束？

> ID：10565110
> 
> 赞同：0
> 
> 时间：2012-05-12T15:40:52.480
> 
> 标签：android, soundpool

也许有人遇到过这个问题。
我使用[SoundPool](http://developer.android.com/reference/android/media/SoundPool.html)在我的应用程序中播放声音。
播放声音后，我需要做进一步的动作。但是如何确定声音已经停止呢？
应用程序中的所有声音都有不同的长度，所以我无法计算时间。我需要一种不同的方法。
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:56:54.093

soundpool 的目的是加载和播放简单的小声音，而无需对其进行监控。

您可能需要的是 MediaPlayer 和 setOnCompletionListener() ：

*   [http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

*   [http://developer.android.com/reference/android/media/MediaPlayer.html#setOnCompletionListener(android.media.MediaPlayer.OnCompletionListener](http://developer.android.com/reference/android/media/MediaPlayer.html#setOnCompletionListener(android.media.MediaPlayer.OnCompletionListener) )

# php - 添加带有逗号的负值

> ID：10565111
> 
> 赞同：0
> 
> 时间：2012-05-12T15:40:59.047
> 
> 标签：php, html

我在一个数组中循环并添加一个数字。

`-1,400`我的数组中有一个值。所有其他值都有效（即，如果它都是正数并且其中没有 a `,`），但由于某种原因，以下代码将 as 解释`-1,400`为`"-1"`。

```
$totregcat = 0;
while($v=mysql_fetch_array($listreg)) {
    print $v['amount']."-";
    $totregcat = $v['amount']+$totregcat; 
    print $totregcat."<br/>;
    $regtagid = $v['tagid'];
} 
```

当我打印时，`"$v['amount']"`我得到了正确的数字，但是将它添加到变量中似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T15:43:14.140

试试`(float) str_replace(",", "", $v['amount'])+$totregcat`。那应该删除逗号并将结果转换为浮点数。

# oop - “许多功能在少数抽象上运行”原则与 OOP

> ID：10565116
> 
> 赞同：15
> 
> 时间：2012-05-12T15:41:25.653
> 
> 标签：oop, clojure, functional-programming, reusability

Clojure 语言的创建者[声称](http://www.codequarterly.com/2011/rich-hickey/)“开放的大型函数集在开放的小型可扩展抽象集上运行是算法重用和库互操作性的关键”。显然，它与典型的 OOP 方法相矛盾，在这种方法中，您创建了许多抽象（类）和一组相对较小的在它们上运行的函数。请推荐一本书、书中的一章、一篇文章或您的个人经历，详细说明这些主题：

1.  激励 OOP 中出现的问题的示例，以及如何使用“在少数抽象上使用多个函数”来解决这些问题
2.  如何有效地进行 MFUFA* 设计
3.  如何重构面向 MFUFA 的 OOP 代码
4.  OOP 语言的语法如何妨碍 MFUFA

[*MFUFA：“基于少量抽象的许多功能”]

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-12T16:41:22.163

编程中有两个主要的“抽象”概念：

1.  参数化（“多态性”，泛型）。
2.  封装（数据隐藏），

[编辑：这两个是双重的。第一个是*客户端*抽象，第二个是*实现者端*抽象（如果您关心这些事情：就形式逻辑或类型论而言，它们分别对应于*普遍*和*存在*量化）。

在 OO 中，类是实现这两种抽象的厨房水槽功能。

广告 (1)，对于几乎每个“模式”，您都需要定义一个自定义类（或多个）。另一方面，在函数式编程中，您通常有更轻量级和直接的方法来实现相同的目标，特别是函数和元组。例如，经常有人指出，GoF 中的大多数“设计模式”在 FP 中都是多余的。

广告 (2)，如果您没有需要检查的可变状态在各处徘徊，则需要较少的封装。您仍然在 FP 中构建 ADT，但它们往往更简单、更通用，因此您需要的数量更少。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-12T21:13:41.100

当您以面向对象的风格编写程序时，您会强调**用数据类型来表达领域**。乍一看，这似乎是个好主意——如果我们与用户一起工作，为什么不开设课程`User`呢？如果用户买卖汽车，为什么不上课`Car`呢？这样我们就可以轻松地维护数据和控制流——它只是反映了现实世界中事件的顺序。*虽然这对于领域对象*来说非常方便，但对于许多*内部*对象（即不反映来自现实世界的任何东西，但只出现在程序逻辑中的对象）来说，它并不是那么好。也许最好的例子是 Java 中的一些集合类型。在 Java（和许多其他 OOP 语言）中，有两个数组，`List`s。在 JDBC 中有`ResultSet`这也是一种集合，但不实现`Collection`接口。对于输入，您将经常使用`InputStream`它为顺序访问数据提供接口 - 就像链表一样！但是它也没有实现任何类型的集合接口。因此，如果您的代码与数据库一起使用并使用`ResultSet`它，那么将其重构为文本文件和`InputStream`.

MFUFA 原则告诉我们*少关注类型定义*，多关注**常见抽象**。出于这个原因，Clojure 为所有提到的类型引入了单一抽象 - 序列。任何可迭代对象都会自动强制进行排序，流只是惰性列表，结果集可以轻松转换为以前的类型之一。

另一个例子是使用`PersistentMap`结构和记录的接口。有了这样的通用接口，创建可重用的子例程就变得非常容易，并且不需要花费大量时间进行重构。

总结并回答您的问题：

1.  OOP 中经常出现的问题的一个简单示例：从许多不同的来源（例如数据库、文件、网络等）读取数据并以相同的方式处理它。
2.  为了做出好的 MFUFA 设计，尽量使抽象尽可能通用并避免临时实现。例如，避免类型 a-la `UserList`-`List<User>`在大多数情况下就足够了。
3.  遵循第 2 点的建议。此外，尝试向您的数据类型（类）添加尽可能多的接口。例如，如果你真的需要`UserList`（例如当它应该有很多额外的功能时），在它的定义中添加`List`和`Iterable`接口。
4.  OOP（至少在 Java 和 C# 中）不太适合这一原则，因为它们在初始设计时试图封装整个对象的行为，因此很难向它们添加更多功能。在大多数情况下，您可以扩展有问题的类并将所需的方法放入新对象中，但是 1）如果其他人实现了他们自己的派生类，它将与您的不兼容；2) 有时类`final`或所有字段都已创建`private`，因此派生类无法访问它们（例如，向类添加新功能`String`应实现附加类`StringUtils`）。尽管如此，我上面描述的规则使得在 OOP 代码中使用 MFUFA 变得更加容易。最好的例子是 Clojure 本身，它以 OO 风格优雅地实现，但仍然遵循 MFUFA 原则。

**UPD。**我记得对面向对象和函数式风格之间差异的另一种描述，这可能更好地总结了我上面所说的一切：以OO风格设计程序是**根据数据类型**（名词）来思考，而以函数式设计是**根据操作来思考**（动词）。您可能会忘记一些名词是相似的（例如忘记继承），但您应该始终记住许多动词在实践中做同样的事情（例如具有相同或相似的接口）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-12T18:17:21.617

引用的更早版本：

*“列表的简单结构和自然适用性反映在令人惊讶的非异质性函数中。在 Pascal 中，过多的可声明数据结构会导致函数内部出现专门化，从而抑制和惩罚随意合作。最好让 100 个函数在一个数据结构上运行而不是让 10 个函数对 10 个数据结构进行操作。”*

...来自著名的[SICP](http://mitpress.mit.edu/sicp/full-text/sicp/book/node1.html)书的前言。我相信这本书有很多关于这个主题的适用材料。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T15:51:01.173

我认为您没有意识到图书馆和程序之间存在差异。

运行良好的 OO 库通常会生成少量抽象，程序使用这些抽象来为其领域构建抽象。较大的 OO 库（和程序）使用继承来创建不同版本的方法并引入新方法。

所以，是的，同样的原则也适用于 OO 库。

# c++ - 对 boost::timer::auto_cpu_timer 的未定义引用

> ID：10565117
> 
> 赞同：10
> 
> 时间：2012-05-12T15:41:49.103
> 
> 标签：c++, boost, compiler-construction

我尝试使用 g++ 4.4 在 Debian 上的远程服务器上编译带有 boost 库的小型 .cpp 文件。为此，我使用 Netbeans。我的家用机器在 Windows 7 上。解决了链接下一个代码的一些问题后

```
#include <boost/timer/timer.hpp>
#include <iostream>
#include <string>

int main()
{
    boost::timer::auto_cpu_timer ac; //line 5
    return 0; //line 6
} 
```

产生 2 个错误：
第 5`undefined reference to boost::timer::auto_cpu_timer::auto_cpu_timer(short)'`
行：第 6 行：`undefined reference to boost::timer::auto_cpu_timer::~auto_cpu_timer()'`

如果我使用标头`boost/thread.hpp`但用于线程构造函数/析构函数，则结果相同。但是例如`boost/shared_ptr`编译没有任何问题。netbeans 中的结果编译命令是

```
g++ -m64 -I/usr/include/boost/boost_1_49_0    -lboost_system -o dist/Debug/GNU-Linux-x86/test build/Debug/GNU-Linux-x86/main.o
-L/usr/include/boost/boost_1_49_0/stage/lib -Wl,-rpath /usr/include/boost/boost_1_49_0/stage/lib  build/Debug/GNU-Linux-x86/main.o 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-12T15:45:47.290

您需要链接到 boost_timer。添加`-lboost_timer`到 gcc 命令行。有关如何将库添加到项目的信息，请参阅 Netbeans 文档。

# javascript - Jquery 对话框高度和垂直滚动条

> ID：10565119
> 
> 赞同：9
> 
> 时间：2012-05-12T15:42:03.423
> 
> 标签：javascript, jquery, css, dialog

我通过 ajax 返回数据以填充 jquery 对话框。ajax 基本上是一个具有可变行数的 html 表。

我希望对话框展开以显示行，最多达到一定的垂直大小（350px），此时它应该显示一个垂直滚动条。

因此，这似乎工作正常 - 对话框根据行数正确调整大小。但是，我从来没有得到垂直滚动条——所以如果我有 20 行，那么我只能看到最后 9 行。

如果高度超过 350 像素，如何强制垂直滚动条？

```
$.ajax({
    type: 'POST',
    url: 'myurl',
    data: postdata,
    dataType: 'json',
    success: function (result) {
        if (result.success && result.data) {
            var $dialog = $('<div></div>').html(result.data).dialog({
                autoOpen: false,
                title: 'History',
                modal: true,
                height: Math.min((result.rows * 25) + 150, 350),
                width: 800
            });
            $dialog.dialog('open');

        }
        event.preventDefault();
    }
}); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-12T15:47:01.647

您应该为内容 div 添加 css 属性`overflow:auto`。

```
$("<div></div>").css({height:"350px", overflow:"auto"}); 
```

如果您只需要垂直滚动`overflow-y:auto`和`overflow-x:hidden`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T15:48:33.373

使用 css 最大高度：350px；和溢出：自动；.. 应该没事

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-01T04:06:03.853

我知道这有点旧，但这些都不适合我。这是从 jQuery UI 1.10 开始工作的内容。

```
 $("#helptext").dialog({
        title: 'Blog Help',
        autoOpen: false,
        width: '90%',
        height: ($(window).height() - 200),
        modal: true
  }); 
```

根据需要调整高度和宽度。我的对话框中有很多文本，不想滚动整个页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-02T15:04:40.337

我不想给出固定的 px 高度，所以我找到了一个解决方案，为模型提供以下 css 规则。

```
.modal {
  display: inline-block !important;
  max-height: 90%;
  overflow: auto;/* Or scroll, depending on your needs*/} 
```

我希望这个对你有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-12T11:08:54.343

对我来说工作：

```
 .jconfirm-holder { 
       overflow-y: auto; 
   } 
```

# facebook - 在 Facebook 应用程序中访问社交读者的帖子

> ID：10565121
> 
> 赞同：1
> 
> 时间：2012-05-12T15:42:16.013
> 
> 标签：facebook, facebook-graph-api, facebook-fql

facebook 应用程序如何访问订阅源中的社交读者帖子？例如，我想从我正在编写的应用程序中访问华盛顿邮报的社交阅读器帖子（当其他人在那里阅读一篇文章并显示在我的新闻提要中时）。是否可以这样做，使用 FQL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:58:23.197

它在 Graph API 中很容易获得（我会检查它是否在 FQL 中）

基本上，无论哪种方式，您都需要向`user_actions.reads`用户请求许可。（注意：`user_actions:reads`这不适用于命名空间为“reads”的应用程序，对于使用内置操作的新闻、音乐和视频应用程序有一个特殊的范围）

然后，对于 Graph API，只需调用`/USER_ID/news.reads`- 响应包括使用内置“读取”操作从所有应用程序中最近阅读的文章，下面是我帐户的示例响应：

```
{
  "data": [
    {
      "id": "REMOVED_ID", 
      "from": {
        "id": "REMOVED_MY_USER_ID", 
        "name": "REMOVED_MY_NAME"
      }, 
      "start_time": "2012-05-10T00:05:10+0000", 
      "end_time": "2012-05-10T00:05:10+0000", 
      "publish_time": "2012-05-10T00:05:10+0000", 
      "application": {
        "id": "235586169789578", 
        "name": "The Independent"
      }, 
      "data": {
        "article": {
          "id": "10150697347986736", 
          "url": "http://www.independent.co.uk/life-style/food-and-drink/features/the-10-best-scotch-whiskies-1488408.html", 
          "type": "article", 
          "title": "The 10 Best Scotch Whiskies"
        }
      }, 
      "likes": {
        "count": 0
      }, 
      "comments": {
        "count": 0
      }
    }, 
.... //more articles 
```

# php - PHP Wamp 不运行

> ID：10565125
> 
> 赞同：0
> 
> 时间：2012-05-12T15:42:47.130
> 
> 标签：php, wamp

我正在尝试在我的 XP 下运行 WAMP。我将它安装到 C:/wamp，然后将旧的 php 文件（例如 test.php）复制到 wamp 文件夹中的 www 文件夹，然后通过浏览器从地址文件：///C:/wamp/www/test.php 运行它. 它包括 < ?echo("a");? >

但它仍然像 html 一样运行，无需运行代码并在源代码中显示 php。

我究竟做错了什么？

我在想是否存在一些会自动执行 php 并包含 mysql 数据库 apache 的浏览器。

有什么事吗？

最好运行 ajax 和 asp 服务器端部分

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T15:48:13.397

您直接通过浏览器显示文件，与 wamp 无关。

你应该做的是启动 wamp （可能需要一些配置，例如路径，端口。）

然后访问您的页面，例如：`http://localhost/test.php`。

# c# - ListView 和 AppBar 的合作。最简单的多选场景

> ID：10565131
> 
> 赞同：2
> 
> 时间：2012-05-12T15:43:45.333
> 
> 标签：c#, xaml, windows-8, windows-store-apps, appbar

与 AppBar 一起实现列表视图多选场景的最简单方法是什么？So that it behaves exactly as the Windows 8 start screen when multiple items selected (eg via the mouse right-click).

我想将应用栏与第一个选定的列表视图项一起显示，我想用第二个、第三个等保持打开状态，我想通过任何应用栏按钮操作（执行的上下文操作）或通过其他系统范围的应用栏关闭操作（例如，右键单击其他位置，这意味着上下文操作已取消）。

我目前的实现太复杂了。我相信我一定错过了一些东西——这样一个基本和常见的场景必须可以以标准化的方式实现。

脚手架代码准备如下。如果仅使用此代码，则应用栏在右键单击第二个列表视图项之前隐藏，并且需要再次右键单击列表视图（不可接受）。如果与 IsSticky 结合使用，则根本无法选择第二个列表视图项。

```
<Page
    x:Class="ListViewAndAppBar.ExamplePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ListViewAndAppBar"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    DataContext="{Binding ExamplePageViewModel, Source={StaticResource Locator}}">

    <Grid Background="Gray">
        <ListView
            x:Name="ListView"
            ItemsSource="{Binding Persons}"
            SelectionMode="Multiple"
            SelectionChanged="ListView_SelectionChanged">
        </ListView>
    </Grid>

    <Page.BottomAppBar>
        <AppBar x:Name="BottomAppBar" Padding="10,0,10,0">
            <Button x:Name="BottomAppBarBack" Tag="Back" Style="{StaticResource BackAppBarButtonStyle}" HorizontalAlignment="Left" />
        </AppBar>
    </Page.BottomAppBar>
</Page>

private void ListView_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    this.BottomAppBar.IsOpen = true;
    //this.BottomAppBar.IsSticky = true;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T06:12:18.223

回答我自己的问题。发布问题后，我很快找到了解决方案。我会把它留在这里，以防有人犯同样的初学者错误。

解决方案再简单不过了：**必须在 IsOpen 之前调用 IsSticky**。在此切换后，一切都按预期工作。

```
private void ListView_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (this.ListBox.SelectedItems.Count > 0)
    {
        this.BottomAppBar.IsSticky = true;
        this.BottomAppBar.IsOpen = true;
    }
    else
    {
        this.BottomAppBar.IsOpen = false;
        this.BottomAppBar.IsSticky = false;
    }

    // Or the following if you wish...
    // this.BottomAppBar.IsOpen = this.BottomAppBar.IsSticky = this.ListView.SelectedItems.Count > 0;
} 
```

# java - RMI access denied 一直报错

> ID：10565132
> 
> 赞同：1
> 
> 时间：2012-05-12T15:43:53.960
> 
> 标签：java, rmi

我在创建 RMIserver 类时遇到问题，因为我不断收到此错误：访问被拒绝（java.net.SocketPermission 127.0.0.1:1099 connect,resolve）

现在我在谷歌上读到一些关于创建新政策文件的内容，但我真的不明白该怎么做，请有人帮助我吗？

这是我的服务器代码：

```
import java.rmi.Naming;
import java.rmi.RemoteException;
import java.rmi.RMISecurityManager;
import java.rmi.server.UnicastRemoteObject;
import java.rmi.registry.*; 
import java.security.Permission;
import java.security.Security;

public class RmiServer extends UnicastRemoteObject 
    implements RmiServerIntf 
    {
    public static final String MESSAGE = "Hello world";

    public RmiServer() throws RemoteException
    {
    }

    public String getMessage()
    {
        return MESSAGE;
    }

    public static void main(String args[])
    {
        System.out.println("RMI server started");

        // Create and install a security manager
        if (System.getSecurityManager() == null)
        {
            System.setSecurityManager(new RMISecurityManager());
            System.out.println("Security manager installed.");
        }
        else
        {
            System.out.println("Security manager already exists.");
        }

        try
        { //special exception handler for registry creation
            LocateRegistry.createRegistry(1099); 
            System.out.println("java RMI registry created.");
        } 
        catch (RemoteException e)
        {
            //do nothing, error means registry already exists
            System.out.println("java RMI registry already exists.");
        }

        try 
        {
            //Instantiate RmiServer
            RmiServer obj = new RmiServer();

            // Bind this object instance to the name "RmiServer"
            Naming.rebind("//localhost/RmiServer", obj);

            System.out.println("PeerServer bound in registry");
        } 
        catch (Exception e) 
        {
            System.err.println("RMI server exception:" + e);
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:55:46.487

您正在使用 SecurityManager（为什么？），但您的安全策略未授予您在异常中指定的权限。除非您打算使用 RMI 代码库功能，否则您根本不需要 SecurityManager：是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:56:14.543

您*确实*需要阅读 RMI 的手册，以及如何创建策略文件：

[http://docs.oracle.com/javase/tutorial/rmi/running.html](http://docs.oracle.com/javase/tutorial/rmi/running.html)

# c# - 如何在没有查询部分的情况下获取基本文件名？

> ID：10565136
> 
> 赞同：1
> 
> 时间：2012-05-12T15:44:43.890
> 
> 标签：c#, filepath

给定一个~~文件路径~~ *URL*之类的`http://example.com/video.flv?start=5`，我想出去`video.flv`。

`Path.GetFileName("http://example.com/video.flv?start=5")`产量`video.flv?start=5`，这比我想要的要多。`Uri`我在课堂上也找不到任何相关的东西。我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T15:47:51.050

多种方式，但一种选择：

```
new Uri("http://example.com/video.flv?start=5").Segments.Last() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:51:07.030

使用`Uri.AbsolutePath`我能够达到预期的结果。

```
Uri t = new Uri("http://example.com/video.flv?start=5");
Console.WriteLine(t.AbsolutePath);
Console.ReadLine(); 
```

打印`/video.flv`

# java - 二进制输入的频率

> ID：10565144
> 
> 赞同：0
> 
> 时间：2012-05-12T15:46:03.657
> 
> 标签：java, android

背景：我有一个 IOIO，我用它来测量光电二极管的输出，这是转换成数字输出的。我需要找到信号在 1 和 0 之间变化的频率。到目前为止我所尝试的一切都挂起我的测试应用程序，有什么建议吗？

当前代码：

```
if(diode == 1 && frequencyFound == false){
  startTime = System.currentTimeMillis();
  while((frequencyFound == false)){
     if(diode == 0){
        while(frequencyFound == false){
            if(diode == 1){
                double endTime = System.currentTimeMillis();
                time = endTime - startTime;
                frequency = (long) (1.0 / time);
                frequencyFound = true;
            }
            Thread.sleep(100);
        }
     }
     Thread.sleep(100);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:03:22.090

这里有几个问题。

首先，Android 是一个多任务系统，您可能会发现您的计时线程休眠的时间足够长，以至于错过了一些信号转换。有没有办法通知前沿（或后沿）转换，而不是在循环中对输入进行采样？

你在看什么样的频率？100 毫秒的采样间隔是否足够好？

不要指望 Thread.sleep() 在您指定的时间内准确睡眠。如果间隔太短，系统可能会决定立即返回，或者可能会将睡眠时间四舍五入到更大的量。

您的计时循环不会以任何优于 100 毫秒的精度（最多）记录时间，因此您对频率的估计将非常差。

Zapl 是对的，您必须从与您的 UI 线程不同的线程运行它。

观察一个单一的转变会给你一个非常不精确的频率估计。尝试这样的事情：

```
// Find frequency to the nearest hz (+/- 10%)
// It's assumed that some other process is responsible for updating the "diode"
// variable.  "diode" must be declared volatile.
long duration = 1000;   // 1 second
final int interval = 100;    // sampling inteval = .1 second
int oldState = diode;
int count = 0;
final long startTime = System.currentTimeMillis();
final long endtime = startTime + duration;
while (System.currentTimeMillis() < endtime) {
  // count all transitions, both leading and trailing
  if (diode != oldState) {
    ++count;
    oldState = diode;
  }
  Thread.sleep(interval);
}
// find the actual duration
duration = System.currentTimeMillis() - startTime;
// Compute frequency. The 0.5 term is because we were counting both leading and
// trailing edges.
float frequency = 0.5 * count / (duration/1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:10:08.920

关于解决 Edward 提出的一些计时精度问题，还有两个极端的建议：

*   在中断下测量 IOIO 板上的间隔时间，您大概可以完成（至少接近）实时操作。将这些时间测量值报告给 Android 设备。

*   跳过ioio板并构建一些简单的东西来将信号路由到耳机连接器作为打开或关闭的音调。使用音频系统的内置时序保证录制音频，然后分析音频缓冲区（不再需要实时）以确定干预音频样本次数的间隔（与您的任何东西相比相对可靠）可以在 android 应用程序中执行）音频采样率。您还可以通过使用光传感器改变音频振荡器的频率轻松获得模拟输入。

# php - 有人知道如何将 jpgraph 包含到 dompdf 中吗？

> ID：10565145
> 
> 赞同：0
> 
> 时间：2012-05-12T15:46:53.403
> 
> 标签：php, dompdf, jpgraph

有人知道如何将 jpgraph 包含到 dompdf 中吗？

这是我的 DOMPDF 代码：

```
//generamos el PDF
require_once("../dompdf/dompdf_config.inc.php");
    if ( get_magic_quotes_gpc() ) {
        $html = stripslashes($html);
        $old_limit = ini_set("memory_limit", "64M");
        $dompdf = new DOMPDF();
        $dompdf->load_html($html);
        $dompdf->set_paper('letter', 'portrait'); //landscape , portrait
        $dompdf->render();
        $dompdf->stream("TPE - Reporte F.E.A. $asignaturashort.pdf");       
        exit(0);
        }
    } 
```

DOMPDF 运行良好，但我需要在使用 jpgraph 库创建 PDF 之前添加一个图表。有人知道该怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:47:53.057

您需要以与在常规 HTML 文档中完全相同的方式执行此操作。像[这样](http://jpgraph.net/doc/faq.php#F2-5)的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-23T07:34:02.050

这是迄今为止我在这里发表的第一篇文章......无论如何，您首先需要生成图形并将其保存在您的 Web 服务器的任何首选目录中，然后从 dompdf 引用图像。

这会将图像保存为我的 /tmp 目录中的 png 格式 $myGraph->Stroke("/tmp/myimage.png") 请参阅[安装后，当我尝试任何示例时，我得到的只是一个空页面？](http://jpgraph.net/doc/faq.php#F1-4)

然后我在 dompdf 上使用下面的代码引用图像

```
$html.="&lt;img width='500px' height='300px' src='/tmp/myimage.png' /&gt;&lt;br /&gt;"; 
```

希望有帮助

# java - 除了线程“主”java.lang.NullPointerException-part2

> ID：10565155
> 
> 赞同：-1
> 
> 时间：2012-05-12T15:48:24.163
> 
> 标签：java, nullpointerexception

**我按照 Dan 的建议更改了我的代码，**我现在可以编译该程序，但是，无论输入是什么，结果始终为 2。我将该程序的第二部分放在新代码的下方。请帮忙。

这是新代码。

```
 public class VowelCons 
        {
    private final String str;
    private final int totalConsonants;
    private final int totalVowels;

        public VowelCons(final String s) 
    {
             this.str = s;
                int totalConsonants = 0;
                int totalVowels = 0;
                if (null != s) 
        {
                    for (final char c : s.toCharArray()) 
            {
                                switch (c) 
                    {
                                        case 'A':
                                        case 'a':
                                        case 'E':
                                        case 'e':
                                        case 'I':
                                        case 'i':
                                        case 'O':
                                        case 'o':
                                        case 'U':
                                        case 'u':

                        totalVowels++;
                                            break;

                        default:

                        if (Character.isLetter(c)) 
                        {
                                                    totalConsonants++;
                                            }
                                            break;
                                    }
                        }
                }
            this.totalConsonants = totalConsonants;
            this.totalVowels = totalVowels;
        }

    public String getString() 
    {
             return str;
    }

    public int getNumConsonants() 
    {
                return this.totalConsonants;
    }

    public int getNumVowels() 
    {
                return this.totalConsonants;
    }
} 
```

该程序的另一部分获取用户的输入并将其传递给此类。这是代码。【**此部分不能按规定更改**】

```
 import java.util.Scanner;

    public class VowelConsCounter
    {
        public static void main(String[] args)
        {
         String input;        // User input
         char selection;      // Menu selection

         Scanner keyboard = new Scanner(System.in);

         System.out.print("Enter a string: ");
         input = keyboard.nextLine();

         VowelCons vc = new VowelCons(input);

        do
        {
          selection = getMenuSelection();

          switch(Character.toLowerCase(selection))
          {
            case 'a' :  System.out.println("\nNumber of vowels: " +
                        vc.getNumVowels());
                        break;
            case 'b' :  System.out.println("\nNumber of consonants: " +
                        vc.getNumConsonants());
                        break;
            case 'c' :  System.out.println("\nNumber of vowels: " +
                        vc.getNumVowels());
                        System.out.println("Number of consonants: " +
                        vc.getNumConsonants());
                        break;
            case 'd' :  System.out.print("Enter a string: ");
                        input = keyboard.nextLine();
                        vc = new VowelCons(input);
         }

      } while (Character.toLowerCase(selection) != 'e');

   }

   public static char getMenuSelection()
   {
      String input;     
      char selection;   

      Scanner keyboard = new Scanner(System.in);

      System.out.println("a) Count the number of vowels in the string.");
      System.out.println("b) Count the number of consonants in the string.");
      System.out.println("c) Count both the vowels and consonants in the string.");
      System.out.println("d) Enter another string.");
      System.out.println("e) Exit the program.");

      input = keyboard.nextLine();
      selection = input.charAt(0);

      while (Character.toLowerCase(selection) < 'a' || Character.toLowerCase(selection) > 'e')
      {
         System.out.print("Only enter a, b, c, d, or e: ");
         input = keyboard.nextLine();
         selection = input.charAt(0);
      }

      return selection;
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:51:17.080

看起来您正在初始化本地数组`result`，但随后尝试从成员数组中读取`result`。由于您尚未初始化成员之一，因此它仍然是`null`，因此`java.lang.NullPointerException`您正在看到。

您可能希望更改`countVowelsAndCons`为具有`void`返回类型，并摆脱本地`result`. 然后，您需要确保在尝试调用`getNumVowels`或之前调用它`getNumConsonants`。顺便说一句，像这样的东西`index`应该是成员函数中的局部变量——它们不属于类范围。

但更重要的是，这可能甚至不应该是一个类。你可能想要这样的东西：

```
private static boolean isVowel(char c)
{
    return c == 'a' || c == 'e' || c == 'i' || c == 'o' || c == 'u';
}

public static int countConsonants(String s)
{
    int count = 0;
    for(int i=0, len=s.length(); i<len; ++i)
    {
        if(!isVowel(s.charAt(i))) ++count;
    }
    return count;
}

public static int countVowels(String s)
{
    int count = 0;
    for(int i=0, len=s.length(); i<len; ++i)
    {
        if(isVowel(s.charAt(i))) ++count;
    }
    return count;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:51:29.257

您得到 a`NullPointerException`因为您没有初始化实例变量`result`。

我建议使用以下内容：

```
public class VowelCons {
    private final String str;
    private final int totalConsonants;
    private final int totalVowels;

    public VowelCons(final String s) {
        this.str = s;
        int totalConsonants = 0;
        int totalVowels = 0;
        if (null != s) {
            for (final char c : s.toCharArray()) {
                switch (c) {
                    case 'A':
                    case 'a':
                    case 'E':
                    case 'e':
                    case 'I':
                    case 'i':
                    case 'O':
                    case 'o':
                    case 'U':
                    case 'u':
                        totalVowels++;
                        break;
                    default:
                        if (Character.isAlphabetic(c)) {
                            totalConsonants++;
                        }
                        break;
                }
            }
        }
        this.totalConsonants = totalConsonants;
        this.totalVowels = totalVowels;
    }

    public String getString() {
        return str;
    }

    public int getTotalConsonants() {
        return this.totalConsonants;
    }

    public int getTotalVowels() {
        return this.totalConsonants;
    }

    public String toString() {
        return (null == str ? "" : str) + " [consonants=" + totalConsonants + ", vowels=" + totalVowels + "]";
    }

    public static void main(final String[] args) {
        for (final String arg : args) {
            final VowelCons vc = new VowelCons(arg);
            System.out.println(vc.toString());
        }
    }
} 
```

例如，这将输出：

```
$ java VowelCons foo BaR "Lady GODIVA"
foo [consonants=1, vowels=2]
BaR [consonants=2, vowels=1]
Lady GODIVA [consonants=6, vowels=4] 
```

以下是此示例应该可以帮助您学习的一些要点：

1.  局部变量可以隐藏实例变量（参见[[1]](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)和[[2]](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)）。
2.  用于`this`引用实例变量（参见[[1]](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)）。您应该始终使用 引用实例变量`this`，这可以防止在您将来进行代码更改时意外隐藏它，并允许 IDE 提供仅包含实例成员的上下文敏感建议。
3.  `null` `String`传递给构造函数的句柄。
4.  用于`switch`简化逻辑，减少逻辑中的冗余代码`if-else`。
5.  检查小写和大写元音。
6.  忽略元音/辅音计数中的非字母字符。
7.  实现一个自定义`toString()`.

# html - JPlayer mp3 不工作（铬）

> ID：10565161
> 
> 赞同：4
> 
> 时间：2012-05-12T15:49:16.557
> 
> 标签：html, google-chrome, audio, jplayer

我正在尝试在 Chrome 的网站上设置 JPlayer。

我在服务器上有一个 mp3 和 ogg 文件，名为：test.mp3 和 test.ogg。

如果我将媒体设置为提供的 mp3 和 mp3 路径，它就不起作用。如果我对 ogg 文件做同样的事情，它就可以工作。我也可以访问 www.website.com/test.ogg 并播放音频。但是，如果我点击 www.website.com/test.mp3，它不会播放 mp3 音频。

这是我的 HTACCESS：AddType 音频/mpeg mp3

服务器似乎接受范围请求：Response Headersview source Accept-Ranges:bytes

我的 htaccess 有什么小问题还是我忽略了其他东西？到目前为止，我已经研究了几乎所有我发现的解决方案，但无济于事。

网址是：radiosmasher.com（radiosmasher.com/test.ogg等）

编辑：似乎对 MP3 的请求被取消了，如果它们具有一定的大小。他们在下载大约 2MB 的 10MB 歌曲后被取消。有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:10:17.610

我对 jPlayer 和 MediaElement 都有同样的问题。感谢本页其他地方的评论，我发现**顺序**对 Chrome 很重要，但对 Firefox 不重要。这可能是 Chrome 中的错误。

所以更具体地说，这适用于两种浏览器：

```
<audio controls="controls" preload="auto">
    <source type="audio/ogg" src="clips/clip1.oga" preload="none"/>
    <source type="audio/mpeg" src="clips/clip1.mp3" preload="none"/>
</audio> 
```

但这仅适用于 Firefox：

```
<audio controls="controls" preload="auto">
    <source type="audio/mpeg" src="clips/clip1.mp3" preload="none"/>
    <source type="audio/ogg" src="clips/clip1.oga" preload="none"/>
</audio> 
```

唯一的区别是 Chrome 似乎对 MP3 有问题（不知道为什么），并且通过将 ogg 放在首位，这个问题被隐藏了。

*[在 Ubuntu12.04 上使用 Firefox v15 和 Chromium v​​20]*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:12:52.803

~~Chrome 不支持 MP3。~~

但是，您可以在 jPlayer 中同时提供`.ogg`和文件。`.mp3`

把它放在你的`http://radiosmasher.com/js/main.js`文件中而不是当前的`jPlayer`实现中：

```
$("#jquery_jplayer_1").jPlayer({
    ready: function () {
        $(this).jPlayer("setMedia", {
            mp3: "http://www.radiosmasher.com/test.mp3",
            ogg: "http://www.radiosmasher.com/test.ogg"
        });
    },
    swfPath: "/js",
    supplied: "mp3, ogg",
    cssSelectorAncestor: "",
    cssSelector: {
        play: "#play",
        pause: "#pause",
        stop: "#stop",
        mute: "#mute",
        unmute: "#unmute",
        currentTime: "#currentTime",
        duration: "#duration"
    },
    size: {
        width: "320px",
        height: "180px"
    },
    errorAlerts: true
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-21T14:37:58.350

我刚刚面对（谢天谢地解决了）这个确切的问题。事实证明，jPlay 期望 OGG 支持的媒体密钥是`oga`（用于 OGG 音频）来解决这个问题，我将 jPlayer 初始化代码更改为这个（[演示](http://sndtst.com/Actraiser)）：

```
$("#jplayer_1").jPlayer({
  ready: function() {
           /*My site specific init code*/
         },
  swfPath: "/js",
  supplied: "oga, mp3"
}); 
```

我设置的媒体代码是这样的：

```
$("#jplayer_1").jPlayer("setMedia", {
  "mp3": "/song.mp3",
  "oga": "/song.ogg"
}).jPlayer("play"); 
```

我已经在 OSX 的 Chrome 构建版本 36.0.1985.125 上对此进行了测试，到目前为止它似乎工作得很好:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-27T05:39:23.903

我遇到了一个问题，Chrome 有时会播放我们的音频 (mp3)，有时不会。在 Safari、FireFox 等中运行良好。

最终为我工作的是在配置中设置 {solution: "flash,html"}。借用@Tyilo 发布的.js：

```
$("#jquery_jplayer_1").jPlayer({
    ready: function () {
        $(this).jPlayer("setMedia", {
            mp3: "http://www.radiosmasher.com/test.mp3",
            ogg: "http://www.radiosmasher.com/test.ogg"
        });
    },
    swfPath: "/js",
    solution: "flash,html",
    supplied: "mp3, ogg",
    cssSelectorAncestor: "",
    cssSelector: {
        play: "#play",
        pause: "#pause",
        stop: "#stop",
        mute: "#mute",
        unmute: "#unmute",
        currentTime: "#currentTime",
        duration: "#duration"
    },
    size: {
        width: "320px",
        height: "180px"
    },
    errorAlerts: true
}); 
```

# iphone - 通过短信发送图像，他们是怎么做到的？

> ID：10565168
> 
> 赞同：0
> 
> 时间：2012-05-12T15:51:11.360
> 
> 标签：iphone, image, sms

我已经在这里和那里阅读了很多答案，所有这些都确认我们无法从 iPHone 应用程序发送彩信或附有短信的图像。但例如，这个应用程序是如何做到的？

[http://itunes.apple.com/us/app/justwink-greeting-cards/id439880532?mt=8](http://itunes.apple.com/us/app/justwink-greeting-cards/id439880532?mt=8)

![在此处输入图像描述](../Images/d6813647f98cab3d0a7d6ffae50a03e2.png)

这就是为什么我要问，如果有人可能有一些提示。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:52:22.030

他们可能会向他们的服务器发送一个请求，从那里发送一个 mms？

# java - 暂停一个方法，直到它再次被调用

> ID：10565172
> 
> 赞同：1
> 
> 时间：2012-05-12T15:51:32.147
> 
> 标签：java, multithreading

我有这个方法`run()`可以执行很多其他方法。在这些子方法中，有一个计数器在某些子方法中以 1 递增。当这个计数器达到一个给定的数字`n`时，该方法`run()`应该暂停一段不确定的时间。当它再次被调用时，它应该在暂停前从它离开的地方开始执行。

这在Java中可能吗？

**编辑**：Andersoj 询问的更多信息

我试图剥离我的代码很多。这是一个非常基本的例子。

```
public void run(int n) {
   executeA();
}

public void executeA() {
   while (randomCondition) {
      executeB();
      counter++;
   }
   executeC();
   if (counter <= 100)
      executeD();
} 
```

中的代码`executeA()`应该运行到`counter`equals `n`。直到它在哪里执行才重要，它应该暂停（这可能发生在`executeA()`.

过了一会儿，`run()`再次调用，代码应该从线程先前停止的地方恢复`executeA()`。

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:02:10.793

如果您的停止和恢复是基于给定条件的，并假设该方法将被其他可能使条件改变的线程唤醒（您的问题中没有一个前提是明确的）：

```
public void run() {
   synchronized(mutex){
      while(condition){
         try {
            mutex.wait();
         }catch(InterruptedException e) {//...}
      }
      goOn();
   }
} 
```

或者，您可以使用`mutex.wait(waitTime)`.

你的其他线程会在条件发生变化时唤醒等待线程，或者等待时间到后它会再次唤醒，在这种情况下，条件将被重新评估，如果条件有，它可能会再次进入等待状态没有改变。

```
public void run() {
   synchronized(mutex){
     if(condition){
         mutex.notify();
     }
   }
} 
```

# c# - 在 c# 中帮助 opengl 或 opentk

> ID：10565174
> 
> 赞同：0
> 
> 时间：2012-05-12T15:51:45.207
> 
> 标签：c#, opengl, opentk

我正在使用 OpenTK 工具在 c# 中使用 OpenGL。

我的问题是：首先，我们想在 glwindows 中用线条绘制一些形状，我们开始绘制线条，使用按钮 MouseDown 事件并用 key(e) 完成它，当我们完成绘制线条时，接下来我们将要绘制新的行，windowsframe（ColorBufferBit）将清除，我不知道我必须做什么？

为了更多的解释，我必须说，当我们画线时，我们调用
`GL.Clear(ClearBufferMask.ColorBufferBit | ClearBufferMask.DepthBufferBit);` ，当我们完成它时，我们会想要绘制新的线，强制，我必须调用
`GL.Clear(ClearBufferMask.AccumBufferBit | ClearBufferMask.DepthBufferBit);`
我必须做什么？这是代码

```
using System;
using OpenTK;
using OpenTK.Graphics;
using OpenTK.Graphics.OpenGL;
using OpenTK.Audio;
using OpenTK.Audio.OpenAL;
using OpenTK.Input;
using System.Drawing;
using System.Drawing.Imaging;

namespace FarmApp
{
class openGLfarm : GameWindow
{
    bool flage, chechFirst;
    float XMouseBegin_first, YMouseBegin_first;
    //-----------------------------
    public openGLfarm(GraphicsMode mode)
        : base(700, 700, GraphicsMode.Default, "O Sample")
    {
        VSync = VSyncMode.On;
        chechFirst = true;
        Mouse.ButtonDown += new EventHandler<MouseButtonEventArgs>(Mouse_ButtonDown);
        Mouse.ButtonUp += new EventHandler<MouseButtonEventArgs>(Mouse_ButtonUp);
        Mouse.Move += new EventHandler<MouseMoveEventArgs>(Mouse_Move);

        Mouse.ButtonDown += new EventHandler<MouseButtonEventArgs>(Mouse_ButtonDown);
        Mouse.ButtonUp += new EventHandler<MouseButtonEventArgs>(Mouse_ButtonUp);
        Mouse.Move += new EventHandler<MouseMoveEventArgs>(Mouse_Move);

    }
    //-------------------------------
         public openGLfarm()
    {
        // TODO: Complete member initialization
    }

    void Mouse_Move(object sender, MouseMoveEventArgs e)
    {
        // Now use mouse_delta to move the camera
    }

    void Mouse_ButtonUp(object sender, MouseButtonEventArgs e)
    {
        switch (e.Button)
        {
            case MouseButton.Left:
                {
                    flage = true;
                    if (chechFirst)
                    {
                        chechFirst = false;
                        XMouseBegin_first = Mouse.X;
                        YMouseBegin_first = Mouse.Y;

                    }
                    break;
                }
            case MouseButton.Middle:
                ///camera_mode = ECameraMode.CAMERA_DOLLY;
                break;
            case MouseButton.Right:
                //camera_mode = ECameraMode.CAMERA_ORBIT;
                break;
        }

    }

    void Mouse_ButtonDown(object sender, MouseButtonEventArgs e)
    {
        switch (e.Button)
        {
            case MouseButton.Left:
                {
                    break;
                }
            case MouseButton.Middle:
                ///camera_mode = ECameraMode.CAMERA_DOLLY;
                break;
            case MouseButton.Right:
                //camera_mode = ECameraMode.CAMERA_ORBIT;
                break;
        }
    }

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
    }

    protected override void OnResize(EventArgs e)
    {
        base.OnResize(e);

    }

    protected override void OnUpdateFrame(FrameEventArgs e)
    {
        base.OnUpdateFrame(e);
        if (Keyboard[Key.Escape])
            Exit();
        if (Keyboard[Key.E])
        {
            flage = false;
            chechFirst = true;

       }
    }

    void table(float count)
    {
        float x, y;
        GL.Color4(Color4.Wheat);

        float z = (2f) / (count);
        x = -1;
        y = -1;
        for (double i = 0; i < count; i++)
        {
            GL.Begin(BeginMode.Lines);

            GL.Vertex2(x + (z), -1);
            GL.Vertex2(x + (z), 1);

            GL.End();
            x = x + (z);
        }

        for (double i = 0; i < count; i++)
        {
            GL.Begin(BeginMode.Lines);

            GL.Vertex2(-1, y + (z));
            GL.Vertex2(1, y + (z));

            GL.End();
            y = y + (z);
        }

    }
    public void DrawLine(float Xbegin, float Ybegin, float Xend, float Yend)
    {
        GL.Begin(BeginMode.Lines);
        GL.Vertex2(Xbegin, Ybegin);
        GL.Vertex2(Xend, Yend);
        GL.End();

    }
    protected override void OnRenderFrame(FrameEventArgs e)
    {
        //base.OnRenderFrame(e);
        if (chechFirst)
            GL.Clear(ClearBufferMask.AccumBufferBit | ClearBufferMask.DepthBufferBit);

        else
            GL.Clear(ClearBufferMask.ColorBufferBit | ClearBufferMask.DepthBufferBit);
        GL.MatrixMode(MatrixMode.Modelview);
        GL.LoadIdentity();
        table(Form1.co);
        if (flage)
        {
            //flage = false;
            DrawLine((XMouseBegin_first / 350f - 1f), -(YMouseBegin_first / 350f - 1f), (Mouse.X / 350f - 1f), -(Mouse.Y / 350f - 1f));
        }
        SwapBuffers();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:20:13.710

例如，您可以创建一个 Vector2 数组并保存它的起点和终点。然后在绘制线条的函数中创建一个 for 并绘制所有线条。

# android - Android 秒表 - 如何恢复我的时间

> ID：10565175
> 
> 赞同：0
> 
> 时间：2012-05-12T15:51:47.773
> 
> 标签：android, timer, resume, stopwatch

我正在为 Android 制作秒表应用程序。我想要单击停止时停止的时间，以及再次单击开始时要恢复的时间。我正在使用[http://www.goldb.org/stopwatchjava.html](http://www.goldb.org/stopwatchjava.html)类。目前，单击“开始”按钮会恢复时间，但是当我第二次单击“停止”时，它会显示错误的时间。再次在开始按钮上，时间正确恢复。这是我的代码：

```
Handler mHandler = new Handler()
{
    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);
        switch (msg.what) {
        case MSG_START_TIMER:
            timer.start(); //start timer
            mHandler.sendEmptyMessage(MSG_UPDATE_TIMER);
            break;

        case MSG_UPDATE_TIMER:

            time = timer.getElapsedTime() + timeStoped;

            hh = time / 3600000;
            hours.setText("" + formatter.format(hh));
            time = time - hh * 3600000;

            mm = time / 60000;
            minutes.setText("" + formatter.format(mm));
            time = time - mm * 60000;

            ss = time / 1000;
            seconds.setText("" + formatter.format(ss));
            time = time - ss * 1000;

            millis.setText("" + formatter.format(time / 10));

            mHandler.sendEmptyMessageDelayed(MSG_UPDATE_TIMER,REFRESH_RATE); //text view is updated every second, 
            break;      
                                                                             //though the timer is still running
        case MSG_STOP_TIMER:

            mHandler.removeMessages(MSG_UPDATE_TIMER); // no more updates.
            timer.stop();//stop timer

            time = timer.getElapsedTime();
            timeStoped = timeStoped + time;

            hh = time / 3600000;
            hours.setText("" + formatter.format(hh));
            time = time - hh * 3600000;

            mm = time / 60000;
            minutes.setText("" + formatter.format(mm));
            time = time - mm * 60000;

            ss = time / 1000;
            seconds.setText("" + formatter.format(ss));
            time = time - ss * 1000;

            millis.setText("" + formatter.format(time / 10));

            break;

        default:
            break;
        }
    }
}; 
```

按钮 Start/Stop 的监听器：

```
startBtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (!startIsPressed) {
                mHandler.sendEmptyMessage(MSG_START_TIMER);
                startIsPressed = true;
                startBtn.setText(R.string.stop);
            } else {
                startIsPressed = false;
                startBtn.setText(R.string.start);
                mHandler.sendEmptyMessage(MSG_STOP_TIMER);
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:13:40.550

解决方法是更换：

```
 time = timer.getElapsedTime();
    timeStoped = timeStoped + time; 
```

和：

```
 time = timer.getElapsedTime() + timeStopped;
    timeStopped = time; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:26:08.857

以小时：分钟：秒格式设置时间的更简单方法可能是：

```
Format formatter = new SimpleDateFormat("hh mm ss SSS");
String[] parsedTime = formatter.format(time).split(" ");
hours.setText(parsedTime[0]);
minutes.setText(parsedTime[1]);
seconds.setText(parsedTime[2]);
millis.setText(parsedTime[3]); 
```

为了在多次停止后保持准确的时间，您需要更改此设置：

```
 time = timer.getElapsedTime();
        timeStoped = timeStoped + time; 
```

对于检查以前经过的东西`time`，可能是这样的：

```
 time = timer.getElapsedTime() + time;
        timeStoped = timeStoped + time; 
```

这些与以下内容相同：

```
 time += timer.getElapsedTime();
        timeStoped += time; 
```

# iphone - ASIHttpRequest。关闭缓存

> ID：10565176
> 
> 赞同：2
> 
> 时间：2012-05-12T15:51:49.517
> 
> 标签：iphone, objective-c, asihttprequest

我正在为我的 iphone 应用程序使用 ASIHttpRequest。我如何关闭缓存，所以没有缓存？

我发现了一些看起来不错的东西，但我不知道它是否正确。

```
[request setCachePolicy: ASIDoNotWriteToCacheCachePolicy | ASIDoNotReadFromCacheCachePolicy]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:55:46.597

是的，没关系。

（请参阅此处的文档：http: [//allseeing-i.com/ASIHTTPRequest/How-to-use#about_cache_policies](http://allseeing-i.com/ASIHTTPRequest/How-to-use#about_cache_policies)，在“关于缓存策略”部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:56:37.893

它看起来确实正确。[您可以在此处](http://allseeing-i.com/ASIHTTPRequest/How-to-use#about_cache_policies)找到有关缓存和 ASIHTTPRequest的更多信息

# audio - 建议使用哪些便携式工具和库在保持元信息的同时通过时间拉伸/压缩对音频进行转码？

> ID：10565177
> 
> 赞同：1
> 
> 时间：2012-05-12T15:52:17.473
> 
> 标签：audio, portability, transcode

我希望实现一个使用尽可能多的现有工具的播客转码工具/脚本。你会推荐什么工具和库的组合？

目标：

1.  自动将音频订阅（口语播客）转码为更小的尺寸（Ogg Vorbis 和 Speex），并使其可同步到多个设备（Android 手机和带有 Rockbox 的 iPod）；
2.  时间紧缩文件，带有速度调整保持音高（1.5x 到 2.5x，至少 0.1x 增量）；
3.  将所有元信息（id3 和图像）保留在转码文件上；
4.  最好使用小型可移植 Unix/Linux 工具和兼容库（Windows 上的 Cygwin，或 Wine 兼容的调用也是可能的）；
5.  一次同时解码/编码和时间紧缩将是节省计算时间的一个好处。

SoX 不支持 Speex。以 -speed 作为参数的 MPlayer 可以对 WAV 进行解码和速度调整，然后是 ogg/speex 标准编码器，并以 id3tool 或其他一些元信息操作工具结尾。是否有其他符合要求的替代转码管道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:00:01.030

如果您发现需要开始编写程序，那么一些好的起点将是：

*   用于格式转换和访问属性的[libsndfile](http://www.mega-nerd.com/libsndfile/)
*   用于时间压缩/扩展的[狄拉克](http://www.dspdimension.com/technology-licensing/dirac2/)
*   并且可能是您输入的采样率转换器

您的问题的一个问题是它的输入格式和文件属性似乎没有被绑定。例如，某些格式能够定义区域 - 您应该如何处理这种情况？省略这些信息？保持原样（即使拉伸后会不正确）？根据比例因子调整区域？最后一个是最好的，但如果需要这种级别的支持，您可能需要使用 C 或 C++。

# xcode - 尝试连接到 GitHub 时出现密码提示问题

> ID：10565178
> 
> 赞同：2
> 
> 时间：2012-05-12T15:52:21.580
> 
> 标签：xcode, git, github

我已经在 GitHub 上配置了我的帐户来托管我的 Xcode 项目。我[在 GitHub 官方网站上关注了这篇文章](http://help.github.com/mac-set-up-git/)。一切都很好，直到我尝试测试一切：

```
$ ssh -T git@github.com 
```

在这里，我收到以下密码提示：`Enter the password for the SSH key <<id_rsa>>`

我用文本编辑器打开了`id_rsa`文件，但我没有找到这样的密码。

我的 Mac 操作系统是`Lion 10.7.4`

我错过了什么吗？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:01:10.433

创建 ssh 密钥时，您输入了密码。这是您要查找的密码。

如果您不想输入任何密码，您可以再次输入 ssh 密钥并不指定密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T10:32:36.433

如果您使用 OS X 钥匙串配置了 SSH 密码，您可能能够恢复它。

[https://help.github.com/articles/how-do-i-recover-my-ssh-key-passphrase/](https://help.github.com/articles/how-do-i-recover-my-ssh-key-passphrase/)

# api - 如何使用 Amazon API 获取商品的 URL

> ID：10565182
> 
> 赞同：0
> 
> 时间：2012-05-12T15:52:29.557
> 
> 标签：api, amazon-web-services, amazon

我正在使用关键字和响应组“EditorialReview”和“Images”发出 ItemSearch 请求，但我没有取回 DetailsPageURL，它始终为空。我认为这将是返回亚马逊的链接（包括我的附属标签）。我浏览了所有的响应组，但我似乎找不到可以提供此信息的组！

有谁知道如何将会员链接返回到产品？还是你必须自己建造一个？

谢谢，

安迪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:09:05.290

可以从 itemSearch 请求中找到每个项目的 Url。

我通过使用 item.ItemLinks 得到它，如下所示：

```
string strLink = item.ItemLinks[0].URL; 
```

如果您查看文档：

[http://s3.amazonaws.com/awsdocs/Associates/2011-08-01/prod-adv-api-gsg-2011-08-01.pdf](http://s3.amazonaws.com/awsdocs/Associates/2011-08-01/prod-adv-api-gsg-2011-08-01.pdf)

itemLinks 从 API 以 XML 形式返回

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-27T02:44:14.627

它是`DetailPageURL`- 没有`s`. 它是节点的直接子`Item`节点。您在帖子中写道您正在寻找`DetailsPageURL`。

正如 Standage 所说，它与在下面找到的 URL 相同`item.ItemLinks[0]`

# java - 打开新页面时排除第一列

> ID：10565183
> 
> 赞同：0
> 
> 时间：2012-05-12T15:52:42.740
> 
> 标签：java, javascript, jsf, jsf-2

我有一个带有行点击的 JSF 表。当我单击选择框时，会打开新页面。如何修改`Select`要从选择中排除的列。

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
        <script type="text/javascript">
            function addOnclickToDatatableRows() {
                //gets all the generated rows in the html table
                var trs = document.getElementById('form:dataTable').getElementsByTagName('tbody')[0]
                .getElementsByTagName('tr');
                //on every row, add onclick function (this is what you're looking for)
                for (var i = 0; trs.length > i; i++) {
                    trs[i].onclick = new Function("rowOnclick(this)");
                }
            }

            function rowOnclick(tr) {   
                var elements = tr.cells[0].childNodes;
                for(var i = 0; elements.length > i; i++) {
                    if ((typeof elements[i].id !== "undefined") &amp;&amp;
                    (elements[i].id.indexOf("lnkHidden") > -1)) {
                        //opne in a new window//  window.open(elements[i].href);
                        location.href=elements[i].href
                        break;
                    }
                }
                return false;
            }
        </script>
    </h:head>
    <h:body  onload="addOnclickToDatatableRows();">
        <!-- Demo click on row -->
        <h1><img src="resources/css/images/icon.png" alt="DX-57" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>

        </div>  

        <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Demo Click on row"  style="position:relative; top:-20px; left:9px;"  value="" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form">

                        <ui:debug />

                        <!-- The sortable data table -->
                        <h:dataTable id="dataTable" value="#{SessionsController.dataList}" binding="#{table}" var="item">
                            <!-- Check box -->
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Select" />
                                </f:facet>
                                <h:selectBooleanCheckbox onclick="highlight(this)" value="#{SessionsController.selectedIds[dataItem.id]}" />
                                <!-- Click on table code -->
                                <h:outputLink id="lnkHidden" value="AnotherPage.xhtml"
                                              style="display:none">
                                    <f:param name="id" value="#{item.aSessionID}" />
                                </h:outputLink>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="№" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="№" value="№" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{table.rowIndex + SessionsController.firstRow + 1}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.aSessionID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.userID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityStart}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityEnd}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activity}" />
                            </h:column>
                        </h:dataTable>

                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>    

                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <ui:repeat value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" >
                                <f:ajax render="@form" execute="@form"></f:ajax>   
                            </h:commandLink>
                            <h:outputText value="#{page}" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </ui:repeat>
                        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                    </h:form>                  

                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>   
            </div>  
        </div>

        <script type="text/javascript">
            $("tr").not(':first').hover(
            function () {
                $(this).css("background","#707070");
            }, 
            function () {
                $(this).css("background","");
            }
        );              

            function highlight(param) {  
                var row = jQuery(param).parent().parent().children();
                row.toggleClass('highlited');
            }        
        </script>

    </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:32:07.050

只是一个愚蠢的答案，希望我得到你的要求。

你为什么不改变

```
for (var i = 0; trs.length > i; i++) {
    trs[i].onclick = new Function("rowOnclick(this)");
} 
```

到

```
for (var i = 1; trs.length > i; i++) {
        trs[i].onclick = new Function("rowOnclick(this)");
    } 
```

?

从 1 开始循环应该`onClick`从第二行分配函数，避免将其绑定到第一行。

编辑：

我已经使用提供的 HTML 测试了这个脚本，它似乎可以工作。单击复选框不会启动重定向，而单击其他列则会启动。

在您的页面上进行测试并告诉我！

```
<script type="text/javascript">
        <!-- http://stackoverflow.com/questions/10566980/modify-javascript-to-exclude-first-column-from-opening-new-page -->

        function addOnclickToDatatableRows() {
            //gets all the generated rows in the html table
            var trs = document.getElementById('form:dataTable').getElementsByTagName('tbody')[0]
            .getElementsByTagName('tr');
            //on every row, add onclick function (this is what you're looking for)
            for (var i = 0; trs.length > i; i++) {
                var cells = trs[i].cells;                    
                for(var j=1; j<cells.length; j++){
                    cells[j].onclick = new Function("rowOnclick(this.parentElement)");
                }                    
            }
        }

        function rowOnclick(tr) {
                var elements = tr.cells[0].childNodes;
                for(var i = 0; elements.length > i; i++) {                           
                    if ((typeof elements[i].id != "undefined") && (elements[i].id.indexOf("lnkHidden") > -1)) {
                        //opne in a new window//  window.open(elements[i].href);
                        location.href=elements[i].href
                        break;
                    }
                }                
            return false;
        }
    </script> 
```

# c++ - C++ 没有合适的默认构造函数可用 C2152 ，但我没有指定任何构造函数？

> ID：10565186
> 
> 赞同：0
> 
> 时间：2012-05-12T15:53:33.227
> 
> 标签：c++, constructor

我遇到了“没有适当的默认构造函数可用”错误的问题，这可能只是我遗漏的一件小事。我对 C++ 很陌生，但我正在慢慢掌握它。

据我了解，如果您不指定任何构造函数，C++ 将创建一个默认构造函数。但是，即使我没有指定任何构造函数，我也会收到错误消息。我试过用谷歌搜索解决方案，但其他人要么扩展了错误的类，要么指定了构造函数，因此他们得到了这个错误。我没有指定任何构造函数，但我还是得到了这个错误。DirectXGame 类如下。

DirectXGame.h

```
#include "StdAfx.h"
#include "DirectInputHelper.h"

class DirectXGame
{
public:
    //DirectXGame();

    bool Initialize(HINSTANCE hInstance, HWND windowHandle);
    void ShutDown();

    bool LoadContent();
    void UnloadContent();

    void Update(float timeDelta);
    void Render();

private:
    HINSTANCE progInstance;
    HWND winHandle;

    D3D_DRIVER_TYPE driverType;
    D3D_FEATURE_LEVEL featureLevel;

    ID3D11Device* pDev;
    ID3D11DeviceContext* pDevContext;
    ID3D11RenderTargetView* pBackBufferTarget;
    IDXGISwapChain* pSwapChain;

    DirectXInput::DirectInputHelper inputHelper;
    DirectXInput::KeyboardState* keyboardDevice;
    DirectXInput::MouseState* mouseDevice;

    bool isShutDown;
}; 
```

请注意，我没有指定任何构造函数，因为它们已被注释掉。实际错误是在我创建类的新实例的主要方法中抛出的。

DirectXApp.cpp

```
int WINAPI wWinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, LPWSTR lpCmdLine, int nCmdShow )
{

    UNREFERENCED_PARAMETER( hPrevInstance );
    UNREFERENCED_PARAMETER( lpCmdLine );

    if( FAILED( InitWindow( hInstance, nCmdShow ) ) )
        return 0;

    //std::auto_ptr<DirectXGame> DirectXGame( new DirectXGame() );
    DirectXGame* game = new DirectXGame(); //The compile error is on this line.

    bool result = game->Initialize(g_hInst, g_hWnd);

    if(!result)
    {
        game->ShutDown();

return -1;
}

// Main message loop
MSG msg = {0};
while(TRUE)
{
    if(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);

        if(msg.message == WM_QUIT)
            break;
    }
    else
    {
        game->Update(0.0f);
        game->Render();
    }
}

game->ShutDown();

//Don't forget to delete the game object, as it is a pointer.
delete game;

return static_cast<int>(msg.wParam); 
```

}

我可能只是遗漏了您在 C++ 中必须注意的许多小细节之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:10:11.203

您缺少空白/默认构造函数，编译器无法猜测如何自动为您实现一个。

如果 C++ 是一个普通（非复杂）类，C++ 将为您创建一个空白构造函数。如果你的类是另一个类的后代，那么它的祖先必须实现默认构造函数或者本身就是微不足道的。

如果您的类包含其他类，则包含的类必须为它们定义默认构造函数，或者它们本身必须是平凡的，以便编译器也可以为它们实现平凡的构造函数。

在您的情况下，罪魁祸首可能是`DirectXInput::DirectInputHelper inputHelper;`因为您的类没有任何祖先，并且您的所有数据成员都是指针、基本数据类型或定义的数据类型，而不是一个类数据变量。

# php - 解密，加密

> ID：10565190
> 
> 赞同：-2
> 
> 时间：2012-05-12T15:54:09.877
> 
> 标签：php

这就是我想要做的：

我有一个 CMS 网站，在我的管理面板中，我可以添加一些用户可以从我的网站购买的软件包。所以在我的Choose.php 页面中，用户可以选择想要购买的包。当然，每个包裹的价格不是由他们设定的，而是由我设定的。

如果他们点击一个包，该页面会将数据发送到另一个页面，如下所示：

```
$form  = '<form action="/buy.php?'product_name='.$name.'&product_id='.$product_id.'&price='.$ammount.'" method="post" target="_parent" ><input type="submit"     style="background-image:url(images/p.png);height: 55px;width: 118px;" value=""/></form>'; 
```

所以用户只点击预定义的包。如果用户是 PHP 甚至脚本方面的专家，他可以轻松更改 url，例如：

> product_name=MYPRODUCT&product_id=1&price=1000$

像这样：

> product_name=MYPRODUCT&product_id=1&price=10$

这意味着，他们可以用 10 美元而不是 1000 美元购买相同的包裹。

所以我需要将这个为每个包分别生成的 url 加密为如下所示：

```
$form  = '<form action="/buy.php?MVNnaPgxpQizqwv7YElroi5E" method="post" target="_parent" ><input type="submit"     style="background-image:url(images/p.png);height: 55px;width: 118px;" value=""/></form>'; 
```

然后在我的 Buy.php 页面中，这个加密字符串 deycrypts。

但问题在于解密部分，因为当我解密它时，它说它是一个数组（因为我使用 $_GET 来获取 url）。

当我使用数组解密方法时，我的第一页出现错误，它说我正在加密的值是字符串而不是数组。（记住：product_name=MYPRODUCT&product_id=1&price=1000$ 这是一个字符串。）

那么如何在一个页面中加密一个字符串，通过 url （使用 $_POST ）发送它，然后在 Buy.php 页面中，使用 $_GET 并将其解密为数组。

对不起，如果它变成一个长帖子。我需要一个加密/解密代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:00:27.063

出于安全原因，我建议您不要通过 GET/POST 参数转发任何敏感数据！即使它们是加密的，攻击者也可能有办法对其进行加密并给您带来很大的损害。

您应该将产品的价格存储在数据库中。当用户选择您转发的产品时。像

$form = '<form action="/buy.php?id=34">'

然后在 buy.php 中，您从数据库中检索价格和其他信息。

我的建议是阅读或至少看看[PHP 安全指南](http://phpsec.org/projects/guide/)

# gcc - 如何为项目创建配置脚本？

> ID：10565197
> 
> 赞同：1
> 
> 时间：2012-05-12T15:54:56.477
> 
> 标签：gcc, cygwin, autotools, configure, polarssl

我想使用构建[PolarSSL](http://polarssl.org)

```
./configure --host=i686-w64-mingw32 
```

但没有配置脚本。我读过关于[使用 Autoconf 创建一个](http://www.nondot.org/sabre/Mirrored/autoconf-2.12/autoconf_2.html)，但我没有运气。澄清一下，`--host`一直为我工作，因为它为你设置了一切，例如

```
i686-w64-mingw32-gcc
i686-w64-mingw32-cc
i686-w64-mingw32-ar
i686-w64-mingw32-ranlib 
```

无需显式设置所有这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:01:00.590

查看 PolarSSL tarball，您似乎不走运。PolarSSL 的构建系统是 CMake，与仅显式设置交叉编译工具相比，将其转换为 Autotools 构建系统需要付出更多的努力。[这](http://www.cmake.org/Wiki/CMake_Cross_Compiling)是来自 CMake wiki 的交叉编译信息。

PS。如果您确实使用过 Autoconf，那么您链接到的那个页面已经过时了。

# jquery - 加载 x 更多结果？

> ID：10565198
> 
> 赞同：0
> 
> 时间：2012-05-12T15:55:12.217
> 
> 标签：jquery, xml

我有以下代码片段，用于通过 jQuery 从 xml 文件加载 xml：

```
 $.ajax({
    type: "GET",
    url: "myxml.xml",
    dataType: "xml",
    success: function (data) {
        $(data).find("seperator").each(function () {
                $("body").append($(this).attr("MyAttr"));
        });
    }
}); 
```

xml 文件可以包含数百个结果。因此，我不想一次全部显示它们，而是想在页面上添加一个“再加载 20 个……”按钮，这将……再加载 20 个结果。因此，当页面初始加载时，它会显示前 20 个结果，单击按钮，它会从 xml 加载并附加 20 个等。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:54:45.347

**注意：**只是一个演示代码代表一个示例，可以帮助您找到正确的方法。

```
var items = [];

// creating some demo items
for (var i = 0; i < 100; i++) {
    items.push($('<div>Index ' + i + '</div>'));
}

var alreadyAdded = 0,
    // keep index of last added item
    total = items.length; // total # of items
// function that will add element

function add() {
    $.each(items, function(index, item) {
        $('#container').append(items[alreadyAdded]); // adding element
        alreadyAdded++; // increasing index to keep record of last one added
        if (alreadyAdded % 20 == 0) { // checking that if 20 items added
            return false;
        }
        if (alreadyAdded == total - 1) $('.load').hide(); // hide load button when all items added
    });
}

$('.load').on('click', function() {
    add(); // call on load more click
});

add(); // initial call for add first 20 items​ 
```

**[演示](http://jsfiddle.net/9MKaQ/1/)**

# mysql - 可以通过 db-mysql (node.js) 连接到远程 MySQL

> ID：10565201
> 
> 赞同：0
> 
> 时间：2012-05-12T15:55:20.827
> 
> 标签：mysql, node.js

我写了一个小`node.js`代码来尝试将东西插入我的远程 MySQL 服务器，但我不断收到以下错误：

```
CONNECTION error: Can't connect to MySQL server on '**********.com' (60) 
```

我尝试为此编写一个`PHP`脚本，它适用于相同的`hostname`和`database`. 我错过了什么吗？这是我的`node.js`代码：

```
var mysql = require('db-mysql');
new mysql.Database({
    hostname: '*********.com',
    user: '**********',
    password: '*********',
    database: '**********'
}).connect(function(error) {
    if (error) {
        return console.log('CONNECTION error: ' + error);
    }
    this.query().
        insert('MainUserDatabase',
            ['email', 'password', 'first_name', 'last_name'],
            ['xyzh@gmail.com', 'password', 'Oeem', 'Stosh']
        ).
        execute(function(error, result) {
                if (error) {
                        console.log('ERROR: ' + error);
                        return;
                }
                console.log('GENERATED id: ' + result.id);
        });
}); 
```

# java - Java中操作系统的不同图标大小

> ID：10565204
> 
> 赞同：3
> 
> 时间：2012-05-12T15:55:42.560
> 
> 标签：java, windows, macos, swing, icons

我刚刚意识到，在不同版本的 Windows 中，出于不同的目的，使用了不同大小的图标。例如，窗口标题栏中的图标比程序的任务栏图标小得多，尤其是在 Windows 7 中。

我发现[我的 Windows 应用程序的图标应包括哪些图标尺寸？](https://stackoverflow.com/questions/3236115/which-icon-sizes-should-my-windows-applications-icon-include/)Windows 使用的非常有用的图标大小列表，但我不知道如何提供它们，以便 Windows 可以选择某些任务所需的大小。

我将不胜感激任何人就此事提供的任何建议或帮助。我不知道我说得有多清楚，所以如果有人想让我澄清任何事情，请不要犹豫。

另外，如果有人知道这是否适用于 Mac，或者我如何调整我的代码以使其适用于 OS X，请你也告诉我。

更新：这是针对我的 Java Swing 应用程序的

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T16:04:25.033

见[`Window.setIconImages(List)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setIconImages%28java.util.List%29)。根据平台功能，不同尺寸的几个图像之一可能用作窗口的图标。[文件浏览器 GUI](https://codereview.stackexchange.com/questions/4446/file-browser-gui)线程上有一个示例。此图显示了用于 GUI 的小图标，在窗口之间使用 alt-tab 键时可以看到较大的图标。

![](../Images/23cdb3ac31746680c2928b202bef1f23.png)

如果图像不是正方形，Windows 将填充它。

[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)为用于桌面快捷方式和菜单项的多种图标大小提供了类似的选项。

* * *

回复：图片名称：

1.  `fb-icon-16x16.png` ![fm-icon-16x16.png](../Images/b70b6c581504fa7ceb1c0153fe2d2528.png)
2.  `fb-icon-32x32.png` ![fm-icon-32x32.png](../Images/6d1ddbcab5f94254e66731392f90f0ab.png)

> ..文件名或任何东西都没有关系 - Windows 只是根据图像大小选择图标？

是的，为了开发人员的利益，选择了文件名以包含大小信息。我们可以将图像称为：

*   `icon-small.png`
*   `icon-medium.png`

..它的工作原理是一样的。JRE 将根据加载后测量的图像的*实际*大小进行选择。但是，我强烈建议在图标图像名称中添加类似`-16x16`名称以使其明确。“小图标”的大小会随着时间和设备的变化而变化。

> 当您不提供多种尺寸时会发生什么？

JRE 或系统将根据不受开发人员控制的算法缩放一个图像。例如如上。

> 如果图像不是矩形，Windows 将填充它。

我有一个 DukeBox 播放器，它试图拾取适用于正在播放的曲目的曲目或专辑封面。它不仅在声音轨迹的顶部显示图像，而且将其设置为（单）帧图标。Windows（至少）将缩放到大小，并为任何非方形图像填充透明度。Windows 甚至可以处理具有部分透明度的 PNG。

OTOH，AFAIU OS X 不显示框架图标。由设计决定。我不知道这是否会导致图标根本不出现。你需要 Mac 的建议。大师以获得更好的信息。在那。

由于系统对如何缩放图标做出自己的（不一定是最佳的）决定，因此最好尽可能少地抓住机会，并尝试为每个平台提供正确大小的图标。如果他们有一个共同的大小或 3，你很幸运。

**另请参阅：**[Swing](https://stackoverflow.com/q/18224184/418556) Q&A中使用的框架图标大小。

![](../Images/35c52cbefcb5ae4cc7efaa90cbe45f48.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T15:59:18.267

如果您使用 SWT 开发 java 应用程序，您可以在 shell 上设置一个图像数组。

# ruby-on-rails - Rails 数据库结构建议？

> ID：10565205
> 
> 赞同：0
> 
> 时间：2012-05-12T15:55:43.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我需要在 Rails 中创建一个网站结构，其中有管理员、工作人员和客户。管理员需要控制一切，可以查看所有内容，工作人员需要仅控制客户端并能够查看所有客户端信息，客户端无法控制任何内容，但可以查看自己的数据。

实现这一目标的最佳方法是什么？

我正在考虑制作一个管理员模型，`has_many :workers`然后`has_many :clients`创建一个工作模型，`has_many :clients`然后`belongs_to :administrator`创建一个客户端模型`belongs_to :worker`。这是最有效的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:07:17.563

标准方式是品牌`User`和`Role`型号。然后添加一些像设计这样的身份验证宝石[和像](https://github.com/plataformatec/devise)[cancan](https://github.com/ryanb/cancan)这样的自动化宝石，您可以在其中设置特定角色的能力。

在你的情况下

```
class Role < ActiveRecord::Base
  has_many :users
end

class User < ActiveRecord::Base 
  belongs_to :role
end

class Ablility
  include CanCan::Ability  

  def initialize(user) 
    case user.role.name.to_sym
    when :admin          
      can :manage, :all
    when :worker
      can :manage, User, :role => { :name => 'client' }
    when :client
      can :read, User, :user_id => user.id
    end
  end
end 
```

# visual-studio - 如何安装“Visual Studio 安装程序”？

> ID：10565208
> 
> 赞同：1
> 
> 时间：2012-05-12T15:55:47.550
> 
> 标签：visual-studio, vb6

我采用了一个旧的 VB6 程序，现在需要做一些代码更改，我正在安装 Visual Studio 6.0 和服务包 6，当我打开解决方案文件时，我收到一条错误消息“'xxx.wip' 的应用程序不是已安装”，所以我想这可能是因为我错过了 Visual Studio 安装程序。

然后我在网上找到了一个“Visual Studio Installer 2”，下载后文件大小约为8.52 MB，是一个Win32 Cabinet Self-Extractor，我双击它并精确到一个地方，但我得到了一个“ VSI2.cab”文件。

所以在精确之后没有任何安装可执行文件，我的问题是如何安装我下载的 Visual Studio 安装程序？Visual Studio 6.0 如何知道它并能够正确打开“.SLN”文件，我需要方便地将其复制到特定文件夹，甚至下载错误？如果是这样，请将链接分享给我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:15:26.803

Microsoft 不再提供 Visual Studio 安装程序（真正的安装程序），并且 VSI2.cab 似乎只是 VSI 安装程序包的一部分。

我有一个[暂时可供下载](http://dl.dropbox.com/u/2931731/Visual%20Installer.zip)的副本（假设您同意微软的所有原始条件，我在这里记不得了），但我仍然建议[使用本世纪甚至本世纪建造的东西](https://stackoverflow.com/a/10380864/588306):)

# c++ - 由于堆/堆栈损坏导致的分段错误

> ID：10565209
> 
> 赞同：0
> 
> 时间：2012-05-12T15:55:52.817
> 
> 标签：c++, segmentation-fault

```
#include <stdio.h>
      #include <dirent.h> 
      #include <sys/types.h> 
      #include <sys/param.h> 
      #include <sys/stat.h> 
      #include <unistd.h> 
      #include <string.h>
      #include <string>
      #include <stdlib.h>
      #include <limits.h>
      #include <list>
      #include <math.h>
      #include <vector>
      #include <iostream>

      using namespace std;

      enum ElementType { NONE,SIMPLEFILE, DIRECTORY, SYMBOLICLINK };

      class Element{
      public:
          Element():exists(false){
        name=std::string("");
        full_path_name=std::string("");;
        element_type=NONE;
        element_size=0;
        exists=false;

          };

          std::string name;
          std::string full_path_name;
          ElementType element_type;
          long element_size;
          bool exists;

      };

      int inspect( std::list<Element>& result_element_array, long *dir_size,std::string full_path ) {

        std::list<Element> result_element_array_temp;
        result_element_array.clear();
        DIR *d;
        struct dirent *dir;
        struct stat buf;
        std::string mynamebuf;

        long dir_size_temp=0;
        std::string full_path_temp;
        std::string full_path_dummy;

        d = opendir( full_path.c_str());

        if( d == NULL ) {
          return 1;
        }
        while( ( dir = readdir( d ) )) {
        if( strcmp( dir->d_name, "." ) == 0 || 
            strcmp( dir->d_name, ".." ) == 0 ) {
            continue;
        }

        mynamebuf=full_path;
        mynamebuf+=std::string(full_path.at(full_path.size() - 1) == '/' ? "" : "/");
        mynamebuf+=std::string(dir->d_name);

        if (stat(mynamebuf.c_str(), &buf) != 0) {
            perror(mynamebuf.c_str());
            continue;
        }

        if( S_ISDIR(buf.st_mode) ) {//if dir

            chdir( dir->d_name );
            full_path_temp=full_path;
            full_path_temp+=std::string("/");
            full_path_temp+=std::string(dir->d_name);
            (dir_size_temp)=0;
            inspect(result_element_array_temp, &dir_size_temp, full_path_temp  );

            chdir( ".." );
            full_path_dummy=full_path_temp;
            Element element;
            element.name=dir->d_name;
            element.full_path_name=full_path_dummy;
            element.element_type=DIRECTORY;
            element.element_size=dir_size_temp;
            element.exists=true;
            result_element_array.push_back(element);
            result_element_array.insert( result_element_array.end(), result_element_array_temp.begin(), result_element_array_temp.end() );
            (*dir_size)+=(dir_size_temp);

        }else if( S_ISREG(buf.st_mode)) {//if file
            full_path_dummy=full_path;
            full_path_dummy+=std::string("/");
            full_path_dummy+=std::string(dir->d_name);

            Element element;
            element.name=dir->d_name;
            element.full_path_name=full_path_dummy;
            element.element_type=SIMPLEFILE;
            element.element_size=buf.st_size;
            element.exists=true;

            result_element_array.push_back(element);
            (*dir_size)+=buf.st_size;

        } else if( S_ISLNK(buf.st_mode) ) {//if link
            full_path_dummy=full_path;
            full_path_dummy+=std::string("/");
            full_path_dummy+=std::string(dir->d_name);

            Element element;
            element.name=dir->d_name;
            element.full_path_name=full_path_dummy;
            element.element_type=SYMBOLICLINK;
            element.element_size=0;
            element.exists=true;

            result_element_array.push_back(element);
        } else {
          continue;
        }
        }
      closedir(d);
        return 0;
      }

      int prime(int n) {
        int i=0;
        double sqrt_n = sqrt(static_cast<double>(n));

        for (i = 2; i <= sqrt_n; i++) {
            if (n % i == 0)           
                return false;         
        }
        return true;   
    }

      int stringIntValue(std::string key){
        int code=0;
        for(int i=key.size()-1;i>=0;i--){
          code+=key.at(i)*i;
        }
        return code;
      }

      int findmforhash(int sizeoflist){
        int m=sizeoflist;
        if(m % 2 !=1){ m++;}
        while(m<sizeoflist*2 && !prime(m)){
          m+=2;
        }
        return m;
      }

      int hash_func(int keyIntValue, int m, int i){
        int code=((keyIntValue % m)+(i*(keyIntValue%(m-2)))%m);
        return code;
      }

      void locatetohashtable(std::list<Element> elist,int m,std::vector<Element>& table, std::list<std::string>& keylist ){

        std::vector <Element>::iterator It2=table.begin();
        int i=0;
        int k=0;
        std::list <Element>::iterator It;
        for(It = elist.begin(); It != elist.end(); ++It){
          int code=hash_func(stringIntValue((*It).name),m,i);
        while((*(It2 + code)).exists){
          i++;
        }
        table.insert((It2+code), (*It));
        keylist.push_back((*It).name);
        k++;
         }
      }

      void usage(void)
      {
          printf("Usage:\n");
          printf("./traversedir -d <directory_to_explore>\n");
          exit (8);
      }

      void searchtable(std::string searchparam,std::vector<Element> table, std::list<std::string> keylist, int m ){
        std::list <string>::iterator Itkey;
        int code=0;
         for(Itkey = keylist.begin(); Itkey != keylist.end(); ++Itkey){
          if((*Itkey).find(searchparam)!=-1){
        int j=0;
        do{
          code=hash_func(stringIntValue(*Itkey),m,j);
          j++;
        }while((*(table.begin()+code)).name.compare(*Itkey)!=0);

        printf("%s",(*(table.begin()+code)).full_path_name.c_str());
        printf("%ld",(*(table.begin()+code)).element_size);
        printf("%d",(*(table.begin()+code)).element_type);
          }
        }

      }

      int main(int argc, char *argv[]){

        if ((argc > 1) && (argv[1][0] == '-'))
        {
            switch (argv[1][1])
            {
                case 'd':
                    printf("\n");
                    if(argc>=3){
                      std::vector<Element> table;
                      std::list<std::string> keylist;
                      std::list<Element> result_element_array;

                      int m;
                      long dir_size=0;
                      inspect( result_element_array, &dir_size,std::string(argv[2]) );
                      m=findmforhash(result_element_array.size());
                      table.reserve(m);
                      std::vector <Element>::iterator It;
                      for(It = table.begin(); It != table.end(); ++It){
                        Element element; 
                        element.exists=false;
                        table.insert(It, element);
                      }
                      locatetohashtable(result_element_array, m, table, keylist );
                      std::string searchparam;
                      printf("Please enter a file name:");
                      std::cin >> searchparam ;
                      searchtable(searchparam,table, keylist, m );

                    }
                case 'h':
                    usage();
                    break;

                default:
                    printf("Wrong Argument: %s\n", argv[1]);
                    usage();
            }

        }else {
          usage();
        }

        return 0;
      } 
```

抱歉粘贴了整个代码，我在主线上遇到了段错误

```
 for(It = table.begin(); It != table.end(); ++It){ 
```

你能有个主意吗？您还可以建议在 linux、ubuntu 上的 gdb 旁边的调试工具吗？特别是看到内存损坏？

提前致谢。

* * *

**编辑**

感谢 Naveen，我编辑了代码并且该部分工作正常更改为不在循环内使用向量，您迭代该向量：

在主函数中；

```
table.resize(m);
                  for(int y=0;y<m;y++){
                    Element element; 
                    element.exists=false;
                        table.push_back(element);

                  } 
```

将某物放在向量处的特定索引上

[c++ 在已知位置插入向量](https://stackoverflow.com/questions/2330551/c-insert-into-vector-at-known-position)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T16:08:01.163

您正在循环中迭代`vector`并插入到相同`vector`的循环内。当您插入向量时，`It`由于向量重新分配，向量可能会变得无效。所以当你这样做时`It++`它会崩溃。

如果您尝试将默认值`Element`插入向量中，请使用该`vector::resize`方法而不是`reserve`.

# javascript - 为什么 fbAsyncInit 不触发？

> ID：10565210
> 
> 赞同：0
> 
> 时间：2012-05-12T15:56:06.943
> 
> 标签：javascript, html, facebook-javascript-sdk

我正在尝试在以下代码中使用 Facebook Javascript SDK，但是无论我将它放在 fbAsyncInit 的哪个位置，都不会显示警报...

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">
<head>
</head>
<body>
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '205116556256919', // App ID
      channelUrl : 'http://lolkitten.org/', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
     alert('loading complete');
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>

<fb:like send="true" width="450" show_faces="true" />

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-07T22:29:27.807

当我运行 Chrome 扩展程序“断开连接”时遇到了这个问题。单击扩展程序，然后单击“白名单”站点以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T10:56:45.697

问题是我是从计算机上的本地文件运行它。结果，像（不记得确切）这样的链接`//connect.facebook.com/all.js`没有按要求解析，也没有找到预期的 JS。

# .net - VB silverlight for windows phone "System.IO"

> ID：10565211
> 
> 赞同：0
> 
> 时间：2012-05-12T15:56:24.040
> 
> 标签：.net, windows, vb.net, windows-phone-7.1

你好我有一个错误：“尝试访问该方法失败：System.IO.File.Exists(System.String)”

我必须注意，这条线有一个外部网址

`If File.Exists("http://www.demo.com/demo.xml") Then blah end if`

在我第一次尝试时它起作用了，但现在它似乎有问题：S 它没有意义！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T15:58:20.593

听起来您应该`WebClient`改为发出网络请求（例如 with ）。

您正在使用`File.Exists`并向其传递 URL。`File.Exists`用于*文件系统*路径。事实上，您根本不打算`File.Exists`在 Windows Phone 7 上打电话。如有疑问，请查阅[文档](http://msdn.microsoft.com/en-us/library/system.io.file.exists%28v=vs.95%29.aspx)：

> 此成员在 Silverlight for Windows Phone 上具有 SecurityCriticalAttribute 属性，因为该属性存在于 Silverlight 3 中。此属性将此成员限制为内部使用。使用此成员的应用程序代码会引发 MethodAccessException。

# silverlight - 如何在 TargetNullValue 属性中绑定本地化字符串？

> ID：10565213
> 
> 赞同：6
> 
> 时间：2012-05-12T15:56:37.533
> 
> 标签：silverlight, windows-phone-7, xaml

我有一个 Textblock，它的 Text 属性绑定到 DateTime？输入数据，我想在 DateTime? 数据为空。
下面的代码效果很好。

```
 < TextBlock Text="{Binding DueDate, TargetNullValue='wow,It's null'}"/> 
```

但是，如果我想将 Localizedstring 绑定到 TargetNullValue 怎么办？
下面的代码不起作用:(
怎么办？

```
 < TextBlock Text="{Binding DueDate, TargetNullValue={Binding LocalStrings.bt_help_Title1, Source={StaticResource LocalizedResources}} }"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T17:08:10.527

我看不出有任何方法可以用 TargetNullValue 做到这一点。作为一种解决方法，您可以尝试使用转换器：

```
public class NullValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value != null)
        {
            return value;
        }

        var resourceName = (string)parameter;

        return AppResources.ResourceManager.GetString(resourceName);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

然后将其添加到页面的资源中：

```
<phone:PhoneApplicationPage.Resources>
    <local:NullValueConverter x:Key="NullValueConverter" />
</phone:PhoneApplicationPage.Resources> 
```

最后，使用它代替 TargetNullValue：

```
<TextBlock Text="{Binding DueDate, Converter={StaticResource NullValueConverter}, ConverterParameter=bt_help_Title1}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:08:30.800

由于您不能在另一个绑定中进行绑定，因此您需要使用多重绑定。

就像是：

```
<Window.Resources>
    <local:NullConverter x:Key="NullConverter" />
</Window.Resources>

<TextBlock>
    <TextBlock.Text>
        <MultiBinding Converter="{StaticResource NullConverter}">
            <Binding Path="DueDate"/>
            <!-- using a windows resx file for this demo -->
            <Binding Source="{x:Static local:LocalisedResources.ItsNull}" />
        </MultiBinding>
    </TextBlock.Text>
</TextBlock>

public class NullConverter : IMultiValueConverter
{
    #region Implementation of IMultiValueConverter

    public object Convert(object[] values, Type targetType, 
                          object parameter, CultureInfo culture)
    {
        if (values == null || values.Length != 2)
        {
            return string.Empty;
        }

        return (values[0] ?? values[1]).ToString();
    }

    public object[] ConvertBack(object value, Type[] targetTypes, 
                                object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

# php - 从数组中的数据库中检索数据

> ID：10565215
> 
> 赞同：0
> 
> 时间：2012-05-12T15:56:50.140
> 
> 标签：php, mysql, arrays

是否有任何 php 函数可以让我从数字数组中的 mysql 检索数据。如果没有功能，我该怎么做？

我正在尝试从数据库中检索电子邮件列表，但我需要在数字数组中检索这些电子邮件。我试过这个，但它不工作。

```
 $a=mysql_connect("X","X","X");
    mysql_select_db("X",$a);
    function num(){
     $email=mysql_query("select email from X");
     while($re=mysql_fetch_array($email)){
      print $re[0];
      print "<br>";
     }
    }
    num(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T15:57:36.457

替换这一行：

```
while($re=mysql_fetch_array($email)){ 
```

有了这个：

```
while($re=mysql_fetch_array($email, MYSQL_NUM)){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T16:01:35.240

mysql_fetch_array 返回数字和关联索引。Jeroen 是正确的，因为您可以设置第二个参数来定义您想要的索引类型，但请考虑将其用于数字索引：

```
while($re=mysql_fetch_row($email)){ 
```

这用于关联索引：

```
while($re=mysql_fetch_assoc($email)){ 
```

至于你的功能，你可以这样做：

```
$a=mysql_connect("X","X","X");
mysql_select_db("X",$a);
$emails = num("select email from X");
function num($query){
    $email=mysql_query($query);
    $results = array();
    while($re=mysql_fetch_assoc($email)){
        $results[] = $re;
    }
    return $results;
}
print $emails[8]['email']; 
```

您还应该停止使用 mysql_* 函数，并考虑改用 PDO 之类的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T16:32:37.627

对于带有数字键的数组：

```
mysql_fetch_row() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T16:00:06.037

```
function num(){
 $email=mysql_query("select email from X");
 $result = array();
 while($re=mysql_fetch_array($email)){
  $result[] = $re[0];
 }
 return $result;
} 
```

# git - 你推送每一个提交吗？

> ID：10565217
> 
> 赞同：58
> 
> 时间：2012-05-12T15:57:19.657
> 
> 标签：git, repository, push, commit

我想，如果有人可以给我更多关于使用 git 和远程存储库的详细信息。我还没有使用过远程存储库。

向本地存储库提交较小的更改，这些更改可能不会太震撼世界。什么被推送到远程存储库？每个本地提交？还是已经完成的整体工作，然后与其他人的整体工作合并？如果每个人都推送每个提交，我认为远程存储库的日志一定会令人困惑。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-12T16:04:40.193

从远程存储库推送和拉取并不像本地提交那么重要。通常每天推拉几次就足够了。就像@earlonrails 所说，更频繁的推送意味着发生冲突更改的可能性更小，但通常这没什么大不了的。

这样想，通过提交到本地存储库，您基本上是在说“我信任此代码。它是完整的。它可以运行。我已经对其进行了测试。我准备好让其他人看到它。” 如果您想在每次提交后推送到远程存储库，那很好，但只要您定期执行，这并不重要。

本地存储库是关于跟踪您的更改以保护您所做的工作。远程存储库用于将工作分发给您的所有队友并跟踪每个人的更改。您的队友需要访问您的代码，但通常并不紧急，可以等到一天结束或您想要推动的时候。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-12T16:00:39.060

您可以在方便时推送到远程。一次推送一堆提交的唯一问题是您可能需要将更多冲突与更多受影响的文件合并。如果你是 git 新手，我推荐[git ready](http://gitready.com/)。

遥控器就像本地仓库一样工作，但你必须与他人相处融洽。如果其他人在您推送之前推送到远程。然后，您必须先拉动他们的更改，然后才能推动。如果你们都触摸同一个文件，因为他们的更改首先出现，您需要将这两个更改合并在一起。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-12T16:06:42.210

我尝试尽可能推送每个本地提交（我使用 Git）。我很少在本地有 2 个或更多提交。否则，存在冲突的风险，解决起来并不那么愉快。

我更喜欢使用变基而不是合并，以保持历史更加线性。如果我在本地有 2 次提交 A 和 B（B 较旧），并且 B 与即将发生的更改发生冲突，则在解决 rebase 上的冲突后，我必须检查 B，检查编译，也许运行测试，然后才切换到 A 并推送所有.

这就是为什么我更喜欢尽快推动我拥有的一切。请注意，这些问题主要出现在与其他几个人处理大型代码库时。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-09-14T16:07:23.077

我通常不同意最佳答案和一些评论。提交和推送都不必对代码的质量负责。

在svn时代，每个人都在同一个分支工作。您的代码中的故障很快就会传播给其他人。在这种情况下，你肯定要保证你的代码质量，这就是为什么在许多公司和组织中 svn 被 git 取代的原因。

我们需要弄清楚什么是典型的 Git 工作流程。假设你的 master 分支有一个可行的软件版本。有些人喜欢将 master 分支用作发布分支，而另一些人则将其用作开发分支。不要紧。每当您需要添加功能或修复错误时，您都可以从主（或另一个）分支创建一个分支。该功能应该足够小，可以在不涉及对代码库进行大量修改的情况下进行处理。如果修改较大，应创建多层分支，使分支的最后一层足够小。

如果每个分支都添加一个小功能，那么在同一个分支中工作的可能性不大。如果不止一个人在开发一个功能，那么该团队应该非常小并且经常交流，因此应该很容易解决冲突。如果一个提交或推送有问题，那么只有你或你的小团队会有问题。

那么我们应该在哪里保证代码的质量。我的回答是拉取请求。在 Github 中，您修改代码并提交拉取请求。在您提交拉取请求时，您需要保证您的代码可以编译并通过测试。在 Gitlab 中，您在修改代码之前创建一个合并请求，但使用 WIP 标记（正在进行中）。然后你修改代码。在移除 WIP 标记之前，您需要保证您的代码质量良好。此外，代码审查员将是另一层保护。

冲突应该很少发生在您的分支中，但是当您将分支合并到基础分支时可能会发生冲突。您应该在合并发生之前修复它。

唯一的事情与变基有关。许多开发人员喜欢在提交合并冲突之前重新调整他们的分支，以使 git 提交历史看起来更好。如果你推送到远程并且其他人使用了你的代码，rebase 会导致令人讨厌的问题得到修复。但是，如果您总是在只修复一个小功能的分支上工作，那么无论如何都不会有人想要使用您的分支。另外，我个人不太喜欢变基，因为它会修改历史。

所以我的结论和其他人类似，经常提交，经常推送，但原因不同。

# javascript - javascript canvas toDataURL() chrome和firefox上的不同输出

> ID：10565218
> 
> 赞同：4
> 
> 时间：2012-05-12T15:57:26.970
> 
> 标签：javascript, firefox, google-chrome

我在画布上绘制一些形状并在服务器上发送 te toDataURL() 输出，该服务器必须将 base64 编码字符串转换为 rgb 元素数组。使用firefox它工作正常，但如果我使用chrome，重建的图像略有不同..我认为这是我使用的转换脚本中的一个错误，但即使使用opera它也能正常工作（还没有尝试过IE）..我然后检查 toDataURL() 的输出，我发现它非常不同，特别是在 chrome 上它是[http://pastebin.com/guSiP6Jc](http://pastebin.com/guSiP6Jc)而在 firefox [http://pastebin.com/vEDLwHRP](http://pastebin.com/vEDLwHRP)... Firefox 的输出对我来说似乎更合理，因为画布有一个黑色的背景，一个橙色的正方形在里面移动。另一个奇怪的事情是，如果我使用编码字符串作为图像元素的 src，它在 FF 和 chrome 上都可以正常工作（甚至在两个浏览器之间交换编码字符串）......

关于他们为什么有如此不同的行为的任何想法，以及如何正确解码来自 chrome 的编码字符串以获得 rgb 数组？谢谢！！！

# jquery - jQuery动画在每个浏览器上左闪烁

> ID：10565225
> 
> 赞同：0
> 
> 时间：2012-05-12T15:58:01.777
> 
> 标签：jquery, html, animation

我不知道这段代码有什么问题。它让我头疼。当我通过图像制作动画时。它像疯了一样闪烁，我不知道为什么。我正在使用更大尺寸的图像。例如，我只是使用小尺寸的。我希望有人能帮助我。

这是我的代码。

```
http://jsfiddle.net/neoragex/27uyv/1/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:12:10.357

问题不在于您的代码，您所需要的只是一台速度更快、具有良好图形支持的 PC 和最新的浏览器。

始终牢记将轻量级图像传送到用户的浏览器，并在需要时提供访问高分辨率图像的选项（如下载），否则页面将消耗大量资源。

# ios - iOS GKSession 语音聊天卡顿

> ID：10565226
> 
> 赞同：0
> 
> 时间：2012-05-12T15:58:06.643
> 
> 标签：ios, chat, voip, livechat, gksession

我使用 GameKit 连接作为基础向我的 iOS 应用程序添加了语音聊天，传输延迟（通过蓝牙）似乎约为 4 秒，这意味着 8 秒才能收到问题的回复。

虽然我不完全确定是什么导致了如此大的延迟，但我有几个嫌疑人。

首先，我注意到它使用了一种`voiceChatService:sendData:toParticipantID:`来自`GKVoiceChatClient`while的方法`voiceChatService:sendRealTimeData:toParticipantID:`。`RealTimeData`然而，即使我实现了它，我也没有看到任何明显的方法可以让它使用该方法的版本。我该怎么做？它可能会有所帮助吗？

此外，我将数据模式更改`GKSendDataUnreliable`为`GKSendDataReliable`有时我会听到两次相同的声音，因为应用程序可能会重新发送未确认的位。这消除了类似回声的效果，但没有改善滞后。

我还能做些什么来提高实时性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:39:30.973

嗯，从那以后我就知道问题出在哪里了。要更改的相关项目是：

```
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
[audioSession setMode: AVAudioSessionModeVoiceChat error:NULL]; 
```

该`VoiceChat`模式使延迟显着减小，类似于我在手机通话时的体验。

# jquery - jQuery，切换内切换

> ID：10565227
> 
> 赞同：2
> 
> 时间：2012-05-12T15:58:15.873
> 
> 标签：jquery

我正在尝试为论坛创建某种“剧透”。这很简单，虽然我对 jquery 还很陌生。但是现在我在另一个切换 div 元素中放置一个切换 div 元素时遇到了这个问题，第二个切换不起作用。谁能指出我正确的方向？

jQuery

```
$(document).ready(function(){
    $('.head').click(function() {
  $('.body').toggle('slow')
  });
}); 
```

HTML

```
<div class="head">
Show Content
</div>
<!--1st toggle div-->
 <div class="body" style="display:none;">
  Content
    <div class="head">
     Show Content
    </div>
     <!--2nd toggle div-->
     <div class="body" style="display:none;">
     Content
     </div>
 </div> 
```

[JSFiddle在这里。](https://jsfiddle.net/ufC5B/)

感谢所有试图提供帮助的人:)

编辑：

在我发布之后，我发现我在 HTML 代码中使用了多个 ID。我已将 div id 更改为类，但现在当我单击显示 content1 时，也会显示 content2。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:22:05.883

两个 div 都会显示，因为`$('.body')`将匹配 DOM 中具有类的所有元素并在所有这些元素上`body`执行功能。

为避免这种情况，请使用专门命名的 div 或向元素添加另一个标识符，如下例所示。

```
<div class="head" data-depth="1">
    Show Content 1
</div>
<!--1st toggle div-->
<div class="body" data-depth="1" style="display:none;">
    Content
    <div class="head" data-depth="2">
        Show Content 2
    </div>
    <!--2nd toggle div-->
    <div class="body" data-depth="2" style="display:none;">
        Content
    </div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​

$(document).ready(function(){
    $('.head').click(function() {
        var depth = $(this).attr('data-depth');
        $('.body[data-depth=' + depth + ']').toggle('slow');
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T16:07:38.490

是的，试试这个[https://jsfiddle.net/ufC5B/2/](https://jsfiddle.net/ufC5B/2/)

```
$(document).ready(function(){
    $('.head').click(function() {
        $(this).siblings('.body:first').toggle('slow')
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T16:11:51.827

您需要按类将其分开，然后使用一些不错的 jQuery Traversal 方法使其更干净。

我们将使用 .next 选择器，这是一个实时的 jsFiddle。

[工作 JSFiddle](https://jsfiddle.net/Hx7wd/)

这是我用来使它工作的代码；将头部和身体更改为类而不是 ID。

```
$(document).ready(function(){
  $('.head').click(function() {
    $(this).next('.body').toggle('slow')
  });
}); 
```

# android - Android，如果有多个活动，性能会下降

> ID：10565240
> 
> 赞同：0
> 
> 时间：2012-05-12T15:59:26.067
> 
> 标签：android, performance, opengl-es, android-activity

我有一个基于 OpenGL 的应用程序，到目前为止一切正常。该应用程序由 2 个活动组成，主要活动包含 OpenGL 视图和一个附加活动，其中包含用于某些过场动画的电影播放器​​。

在某些低端设备（例如 LG P690、Android 2.3.4）上，电影活动运行后性能会显着下降。之后，主要活动运行如此缓慢，仅达到约 30 fps 而不是 50 fps。

如果您通过按下主页按钮离开应用程序并重新启动它，您可以“修复”它再次变得更快。然后一切又好了-直到再次显示电影查看活动...

我做了一些测试，不管活动#2 实际做了什么，这种效果也会发生，即使它只是一个闪屏或其他什么。如果我从不调用第二个活动，那么性能总是很高。

注意：OpenGL 活动*不会*多次实例化，这可能会导致类似的效果。

有人遇到过相同或类似的问题并且知道补救措施吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:28:50.127

我在我的两台设备上发现了同样的问题：

*   acer 液态金属 (android 2.3) 在我的应用程序中从 50 fps 下降到 45 fps

*   'cube' 10.1" 平板电脑 (android 4.0) - 在我的应用程序中从 60 fps 下降到 30 fps

但是，我正在使用画布方法，将 SurfaceView 作为子项直接附加到我的 Activity。

我进行了调查，并且使用 a`dialog`而不是活动有效。另一件似乎可行的事情是将您的活动的清单条目更改为具有如下属性：

`android:theme="@android:style/Theme.Dialog"`

请注意：使用这些技术中的任何一种都可以解决问题，但是您的调用活动的生命周期事件将不会像以前那样运行。即不会调用 onPause 等。您需要将自定义代码从这些方法移动到您的对话框打开代码中。

这是发现和调试的真正痛苦。我希望这个问题不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:51:27.993

不幸的是，我缺乏声誉，无法发表评论。

我可以想象当您从第二个返回时，您的 opengl 活动的一个新实例会启动。

您可能想提出一个特定的意图来避免这种情况。

例如，我会尝试 FLAG_ACTIVITY_CLEAR_TOP。

给开发人员页面上的意图看看：http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

那里列出了所有标志并附有说明。

希望这会为您提供解决方案！

# asp.net - ASP.net 将用户 GUID 反转为用户名

> ID：10565241
> 
> 赞同：0
> 
> 时间：2012-05-12T15:59:32.213
> 
> 标签：asp.net, asp.net-3.5, membership

努力寻找将 GUID 反转为用户名的最佳方法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:05:29.897

只要您使用`SqlMembershipProvider`, 使用

```
var user = Membership.GetUser((object)yourGuid);
var userName = user.UserName; 
```

# android - Android：如何与 microSD 卡进行 SPI 通信

> ID：10565244
> 
> 赞同：3
> 
> 时间：2012-05-12T15:59:49.793
> 
> 标签：android, sd-card, spi

我在 Galaxy S（来自三星）上使用 Android 2.3.3（Java）编程。我想使用 microSD 卡作为 GPIO 端口，通过 SPI 与设备进行通信。

我需要使用哪个库来执行此任务？如何执行 SPI 通信（现在我使用经典的 SPI 通信与微控制器和 Android 语言（简单应用程序））。是否有可能做到这一点？如何从 SD 卡引脚读取值（如何声明它们）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-20T19:25:39.623

如果不编写内核模块，您将不得不使用 Android GPIO 库来对 GPIO 进行 bit bang SPI。看看这里：[https](https://developer.android.com/things/sdk/pio/gpio) ://developer.android.com/things/sdk/pio/gpio 。

# debian - AR9300 Debian 注册问题

> ID：10565246
> 
> 赞同：1
> 
> 时间：2012-05-12T16:00:17.353
> 
> 标签：debian, driver, wireless

我得到了基于 Atheros AR9300 的 TP-Link WND-4800。我正在尝试将 AP 设置为 5 GHz。但是有一些限制：

```
# iw list
                        * 5180 MHz [36] (20.0 dBm) (passive scanning, no IBSS)
                        * 5200 MHz [40] (20.0 dBm) (passive scanning, no IBSS)
                        * 5220 MHz [44] (20.0 dBm) (passive scanning, no IBSS)
                        * 5240 MHz [48] (20.0 dBm) (passive scanning, no IBSS)
                        * 5260 MHz [52] (disabled)
                        * 5280 MHz [56] (disabled)
                        * 5300 MHz [60] (disabled)
                        * 5320 MHz [64] (disabled)
                        * 5500 MHz [100] (disabled)
                        * 5520 MHz [104] (disabled)
                        * 5540 MHz [108] (disabled)
                        * 5560 MHz [112] (disabled)
                        * 5580 MHz [116] (disabled)
                        * 5600 MHz [120] (disabled)
                        * 5620 MHz [124] (disabled)
                        * 5640 MHz [128] (disabled)
                        * 5660 MHz [132] (disabled)
                        * 5680 MHz [136] (disabled)
                        * 5700 MHz [140] (disabled)
                        * 5745 MHz [149] (20.0 dBm) (passive scanning, no IBSS)
                        * 5765 MHz [153] (20.0 dBm) (passive scanning, no IBSS)
                        * 5785 MHz [157] (20.0 dBm) (passive scanning, no IBSS)
                        * 5805 MHz [161] (20.0 dBm) (passive scanning, no IBSS)
                        * 5825 MHz [165] (20.0 dBm) (passive scanning, no IBSS)

# iw reg get
country 00:
        (2402 - 2472 @ 40), (6, 20)
        (2457 - 2482 @ 20), (6, 20), PASSIVE-SCAN, NO-IBSS
        (2474 - 2494 @ 20), (6, 20), NO-OFDM, PASSIVE-SCAN, NO-IBSS
        (5170 - 5250 @ 40), (6, 20), PASSIVE-SCAN, NO-IBSS
        (5735 - 5835 @ 40), (6, 20), PASSIVE-SCAN, NO-IBSS
# iw reg set RU
# iw reg get
country 00:
        (2402 - 2472 @ 40), (6, 20)
        (2457 - 2482 @ 20), (6, 20), PASSIVE-SCAN, NO-IBSS
        (2474 - 2494 @ 20), (6, 20), NO-OFDM, PASSIVE-SCAN, NO-IBSS
        (5170 - 5250 @ 40), (6, 20), PASSIVE-SCAN, NO-IBSS
        (5735 - 5835 @ 40), (6, 20), PASSIVE-SCAN, NO-IBSS 
```

所以我无法改变它。我试过新内核，安装 Debian Wheezy，安装 crda 和 wireless-regdb，修改驱动程序（但我不确定我选择正确）。

```
#COUNTRY="RU" crda
Failed to set regulatory domain: -22 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-15T21:19:03.233

你有`CRDA`安装包吗？`/sbin/crda`在我的系统上安装之前，我遇到了同样的问题。

# django - Django 1.4 说“没有指定数据库夹具。请在命令行中提供至少一个夹具的路径。”

> ID：10565254
> 
> 赞同：6
> 
> 时间：2012-05-12T16:01:13.243
> 
> 标签：django, unit-testing, fixtures

虽然所有测试都没有错误地完成，并且实际加载了固定装置。是 Django 1.4 的问题吗？

请注意，只有部分应用程序会引发此错误消息（应用程序的单元测试与其相应的固定装置之间没有概念上的差异）。

**更新 1：***fasttest.py*内容：

```
DATABASES = {'default':
  {
    'ENGINE': 'django.db.backends.sqlite3',
    'NAME': ':memory:',
  }
}

~/django_project$ ./manage.py test appname --traceback --settings=fasttest
Creating test database for alias 'default'...
.....................No database fixture specified. Please provide the path of at least one fixture in the command line.
 .
----------------------------------------------------------------------
Ran 22 tests in 8.426s

OK
Destroying test database for alias 'default'... 
```

**更新 2：**显然，尽管我很感谢这些尝试，但这些评论只是在黑暗中拍摄。数据库无关紧要，SQLite3 和 Postgres 测试数据库都不能解决问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T15:27:41.617

对于在 1.4 下运行良好的测试装置，我也遇到了同样的问题。

对我来说，我有一个没有使用夹具的测试用例，所以我将夹具设置为一个空集，如下所示：

```
class MyTestCase(TestCase):
    fixtures = [] 
```

当我注释掉该行时，错误消失了：

```
class MyTestCase(TestCase):
#    fixtures = [] 
```

# javascript - 高亮文本 CSS

> ID：10565258
> 
> 赞同：-4
> 
> 时间：2012-05-12T16:01:19.610
> 
> 标签：javascript, jquery, css

我想知道是否可以在 JQuery 中定义各种高亮类。我想要做的是用橙色突出显示选择器 1 选择的一些标签，以及用红色选择器 2 选择的其他标签。

这是我的CSS代码：

```
tag.highlight { background: orange; } //class toggled for tags selected by selector1

tag.highlight_red { background: red; }//class toggled for tags selected by selector2 
```

tag.highlight 有效，但 tag.highlight_red 无效。任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:35:04.943

也许我错过了你想要完成的事情。你是想改变元素本身的背景颜色还是只是它的选择颜色？我想，定义选择。

如果只是文本选择颜色，请尝试此处的提示：http: [//css-tricks.com/overriding-the-default-text-selection-color-with-css/](http://css-tricks.com/overriding-the-default-text-selection-color-with-css/)

```
p.red::selection {
    background: #ffb7b7;
}
p.red::-moz-selection {
    background: #ffb7b7;
}
p.blue::selection {
    background: #a8d1ff;
}
p.blue::-moz-selection {
    background: #a8d1ff;
}
p.yellow::selection {
    background: #fff2a8;
}
p.yellow::-moz-selection {
    background: #fff2a8;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:07:35.123

尝试：

```
tag.highlight { background-color: orange; } //class toggled for tags selected by selector1

tag.highlight_red { background-color: red !important; }//class toggled for tags selected by selector2 
```

# objective-c - UItableviewcell 中的按钮

> ID：10565261
> 
> 赞同：1
> 
> 时间：2012-05-12T16:01:43.877
> 
> 标签：objective-c, ios, xcode, uitableview

我有一个tableview，我必须在其中使用按钮。基于tableViewCell，我必须对不同的单元格执行不同的操作。如何区分单击了哪个单元格的按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:06:28.473

您所要做的就是为 UITableViewCell 的 cellforrowatindex 委托中的按钮设置一个标签，然后您必须在按钮的操作中检查标签是否相同。

```
if(((UIButton *)sender).tag==someIntValue)
{
//your statement
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T16:05:45.090

您可以将 UIButton 的 tag 属性设置为单元格的 indexPath.row：

```
button.tag = indexPath.row 
```

然后在您的按钮选择器方法中，您可以执行以下操作：

```
-(void)handleButtonClick:(id)sender
{
   UIButton *button = (UIButton*)sender;
   indexPathRow = button.tag;
} 
```

# java - 在 JTable 中使用 setAutoCreateRowSorter 对不同的数据类型进行排序

> ID：10565262
> 
> 赞同：0
> 
> 时间：2012-05-12T16:02:02.243
> 
> 标签：java, swing, jtable, tablerowsorter

我正在通过 Java 查询 MySQL 数据库，从结果集中提取数据并将其放入 DefaultTableModel 中，然后将其放入 JTable 中，然后放入 JScrollPane 中进行显示。

在 JTable 中，我通过

```
table.setAutoCreateRowSorter(true); 
```

但是，如果我要排序的行中的单元格不是 String 类，那么我会得到 java.lang.ClassCastException。我表中的数据有以下几类：

```
java.sql.Date
java.sql.Time
java.lang.Double
java.lang.Boolean
java.lang.String 
```

下面是当我尝试对类 java.lang.Double 的列进行排序时得到的错误，然后是将结果集作为输入输出的类输出 JTable。如果有人对如何解决我的排序问题有任何想法，将不胜感激。

```
Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: java.lang.Double `enter code here`cannot be cast to java.lang.String
    at java.text.Collator.compare(Collator.java:327)
    at javax.swing.DefaultRowSorter.compare(DefaultRowSorter.java:968)
    at javax.swing.DefaultRowSorter.access$100(DefaultRowSorter.java:112)
    at javax.swing.DefaultRowSorter$Row.compareTo(DefaultRowSorter.java:1376)
    at javax.swing.DefaultRowSorter$Row.compareTo(DefaultRowSorter.java:1366)
    at java.util.ComparableTimSort.countRunAndMakeAscending(ComparableTimSort.java:290)
    at java.util.ComparableTimSort.sort(ComparableTimSort.java:157)
    at java.util.ComparableTimSort.sort(ComparableTimSort.java:146)
    at java.util.Arrays.sort(Arrays.java:472)
    at javax.swing.DefaultRowSorter.sort(DefaultRowSorter.java:607)
    at javax.swing.DefaultRowSorter.setSortKeys(DefaultRowSorter.java:319)
    at javax.swing.DefaultRowSorter.toggleSortOrder(DefaultRowSorter.java:480)
    at javax.swing.plaf.basic.BasicTableHeaderUI$MouseInputHandler.mouseClicked(BasicTableHeaderUI.java:112)
    at java.awt.AWTEventMulticaster.mouseClicked(AWTEventMulticaster.java:270)
    at java.awt.AWTEventMulticaster.mouseClicked(AWTEventMulticaster.java:269)
    at java.awt.Component.processMouseEvent(Component.java:6508)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4501)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

这是该课程的来源：

```
import java.awt.Component;
import java.awt.Dimension;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.JTable;
import javax.swing.JToggleButton;
import javax.swing.UIManager;
import javax.swing.event.TableModelEvent;
import javax.swing.event.TableModelListener;
import javax.swing.table.*;

public class ResultSetToCheckBoxTable {
    private int numberOfColumns;
    private DefaultTableModel model;
    private ResultSetMetaData metaData;
    private JTable table;
    private ResultSet rs;
    private TableColumn tc;

    public JTable getTable() {
        return table;
    }
    public ResultSetToCheckBoxTable(ResultSet rs) {
        try {
            this.rs = rs;
            //overrides getColumnClass method in DefaultTableModel to help make checkbox
            model = new DefaultTableModel() {
                @Override
                public Class<?> getColumnClass(int columnIndex) {
                    if (columnIndex == numberOfColumns) {
                        return Boolean.class;
                    } else {
                        //return getValueAt(0, columnIndex).getClass();
                        return String.class;
                    }
                }
            };
            // Get the column names
            metaData = this.rs.getMetaData();
            numberOfColumns = metaData.getColumnCount();
            for (int column = 1; column <= numberOfColumns; column++) {
                model.addColumn(metaData.getColumnLabel(column));
            }
            model.addColumn("");
            // Get the table info
            while (rs.next()) {
                Vector tableRow = new Vector();
                for (int i = 1; i <= numberOfColumns; i++) {
                    tableRow.addElement(rs.getObject(i));
                }
                tableRow.addElement(true);
                model.addRow(tableRow);
            }
            //Create JTable using the model & set options
            table = new JTable(model) {
                @Override
                public boolean isCellEditable(int row, int column) {                
                return false;               
                };
            };
            table.setAutoCreateRowSorter(true);
            table.setPreferredScrollableViewportSize(new Dimension(320, 160));
            //Rest of the stuff
            tc = table.getColumnModel().getColumn(numberOfColumns);
            tc.setHeaderRenderer(new SelectAllHeader(table, numberOfColumns));
        }
        catch (SQLException ex) {
            Logger.getLogger(ResultSetToCheckBoxTable.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    public static void main(String[] args) {
    }
}
/**
* A TableCellRenderer that selects all or none of a Boolean column.
* 
* @param numberOfColumns the Boolean column to manage
*/
class SelectAllHeader extends JToggleButton implements TableCellRenderer {

    private static final String ALL = "✓ Select all";
    private static final String NONE = "✓ Select none";
    private JTable table;
    private TableModel tableModel;
    private JTableHeader header;
    private TableColumnModel tcm;
    private int targetColumn;
    private int viewColumn;

    public SelectAllHeader(JTable table, int targetColumn) {
        super(ALL);
        this.table = table;
        this.tableModel = table.getModel();
        if (tableModel.getColumnClass(targetColumn) != Boolean.class) {
            throw new IllegalArgumentException("Boolean column required.");
        }
        this.targetColumn = targetColumn;
        this.header = table.getTableHeader();
        this.tcm = table.getColumnModel();
        this.applyUI();
        this.addItemListener(new ItemHandler());
        header.addMouseListener(new MouseHandler());
        tableModel.addTableModelListener(new ModelHandler());
    }

    @Override
    public Component getTableCellRendererComponent(
        JTable table, Object value, boolean isSelected,
        boolean hasFocus, int row, int column) {
        return this;
    }

    private class ItemHandler implements ItemListener {

        @Override
        public void itemStateChanged(ItemEvent e) {
            boolean state = e.getStateChange() == ItemEvent.SELECTED;
            setText((state) ? NONE : ALL);
            for (int r = 0; r < table.getRowCount(); r++) {
                table.setValueAt(state, r, viewColumn);
            }
        }
    }

    @Override
    public void updateUI() {
        super.updateUI();
        applyUI();
    }

    private void applyUI() {
        this.setFont(UIManager.getFont("TableHeader.font"));
        this.setBorder(UIManager.getBorder("TableHeader.cellBorder"));
        this.setBackground(UIManager.getColor("TableHeader.background"));
        this.setForeground(UIManager.getColor("TableHeader.foreground"));
    }

    private class MouseHandler extends MouseAdapter {

        @Override
        public void mouseClicked(MouseEvent e) {
            viewColumn = header.columnAtPoint(e.getPoint());
            int modelColumn = tcm.getColumn(viewColumn).getModelIndex();
            if (modelColumn == targetColumn) {
                doClick();
            }
        }
    }

    private class ModelHandler implements TableModelListener {

        @Override
        public void tableChanged(TableModelEvent e) {
            if (needsToggle()) {
                doClick();
                header.repaint();
            }
        }
    }

    // Return true if this toggle needs to match the model.
    private boolean needsToggle() {
        boolean allTrue = true;
        boolean allFalse = true;
        for (int r = 0; r < tableModel.getRowCount(); r++) {
            boolean b = (Boolean) tableModel.getValueAt(r, targetColumn);
            allTrue &= b;
            allFalse &= !b;
        }
        return allTrue && !isSelected() || allFalse && isSelected();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T16:07:42.797

问题是您告诉 JTable 您的所有列都包含字符串（escpt 最后一个），这是不正确的：

```
public Class<?> getColumnClass(int columnIndex) {
    if (columnIndex == numberOfColumns) {
        return Boolean.class;
    } else {
        //return getValueAt(0, columnIndex).getClass();
        return String.class;
    }
} 
```

把真相告诉JTable，它会很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-29T20:10:45.937

这是因为一列中的某些数据是 String 和 Integer 或 Double 和 Date .... 等两类类型，此代码可以解决您的问题：

```
private void Change_Table_Data_Class (ArrayList<ArrayList<Object>> table) {
    for (int rowIndex = 0; rowIndex < table.size(); rowIndex++) {
        for (int columnIndex = 0; columnIndex < table.get(rowIndex).size(); columnIndex++) {
            Object cellDataType = table.get(0).get(columnIndex);
            Object cellData = table.get(rowIndex ).get(columnIndex);
                if (!(cellDataType instanceof Double)) {
                    DecimalFormat df = new DecimalFormat("#.##");                                
                        String formattedMerging = df.format(cellData);
                            table.get(rowIndex).set(columnIndex, Double.valueOf(formattedMerging));
                } else if (!(cellDataType instanceof String)) {
                         table.get(rowIndex).set(columnIndex, String.valueOf(cellData));
                }
        }
    }
} 
```

# visual-studio - CMake 和 Visual C++ 2010 的问题

> ID：10565265
> 
> 赞同：12
> 
> 时间：2012-05-12T16:03:00.497
> 
> 标签：visual-studio, visual-studio-2010, cmake

我正在尝试开始使用 Cmake，并从网站上的一个简单教程开始。c++ 代码在这里尽可能简单：

```
#include <iostream>

int main(int argc, char *argv[])
{
std::cout << "Hello, World!" << std::endl;
return 0;
} 
```

Cmake 文件是：

```
cmake_minimum_required (VERSION 2.6)
project (Tutorial)
add_executable(Tutorial main.cpp) 
```

我使用 cmake-gui 生成 Visual Studio C++ 解决方案和项目文件。我能够构建该项目，但是当我尝试运行该项目时，我收到一条提示，指出 ZERO_CHECK 项目已过期并询问我是否要重新构建它。当我选择“是”时，我收到一条错误消息：“无法启动程序 ..Path../Debug/ALL_BUILD 系统找不到指定的文件”。我做了很多搜索，但找不到任何有类似错误的人。有没有人遇到过这样的事情？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-12T17:21:38.017

通常 CMake 将 ALL_BUILD 项目设置为启动项目。您应该在解决方案资源管理器中右键单击您的教程项目并将其设置为启动项目。然后它应该工作。

# asp.net-mvc - 无法检索“MyService.Entities.Email”的元数据。'System.Data.Entity.Internal.AppConfig' 的类型初始化程序引发异常

> ID：10565266
> 
> 赞同：3
> 
> 时间：2012-05-12T16:03:28.770
> 
> 标签：asp.net-mvc, entity-framework, controller, metadata, asp.net-mvc-4

我正在使用 MVC 4.0 和 EF 4.3.1 试用新的 Visual Studio 11 Beta。

添加控制器时，我收到以下消息“无法检索 'MyService.Entities.Email' 的元数据。'System.Data.Entity.Internal.AppConfig' 的类型初始化程序引发异常”

复制品

我有一个基本的解决方案，它有一个实体项目（MyService.Entities）和 MVC 项目（MyService.Website）。

在 Entities 项目中，我首先拥有用于“电子邮件”的类和用于 DbContext 的类的代码。这两个类看起来像： **EntityDb**

```
 namespace MyService.Entities
{
    public class EntitiesDb : DbContext
    {
        public EntitiesDb(string nameOrConnectionString)
            : base(nameOrConnectionString)
        { }

        public EntitiesDb()
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            // Sets up the defaults for the model builder
            // Removes the metadata being written to the database, This is being depreciated anyhow 
            modelBuilder.Conventions.Remove<IncludeMetadataConvention>();

            // Sets the table names so that they are named as a none plural name 
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

            // Creates the database from scratch when it builds
            base.OnModelCreating(modelBuilder);
        }

        public DbSet<Email> Emails { get; set; }
    }
} 
```

**电子邮件**

```
namespace MyService.Entities
{
    public class Email
    {
        public Email()
        {
        }

        [Key, DatabaseGenerated(System.ComponentModel.DataAnnotations.DatabaseGeneratedOption.Identity)]
        public int EmailId { get; set; }
        public string Subject { get; set; }
        public string BodyHTML { get; set; }
    }
} 
```

我在 MyService.Website MVC 项目中引用了 MyService.Entities 项目，并将连接字符串设置为适合我的数据库名称

```
<add name="EntitiesDb" connectionString="Data Source=localhost;Integrated Security=SSPI;Initial Catalog=EntitiesDb;MultipleActiveResultSets=True" providerName="System.Data.SqlClient" /> 
```

当我通过执行以下操作创建 MVC 脚手架时：

*   *右键单击*控制器**文件**夹 >**添加**>**控制器**
*   将控制器名称设置为**EmailController**
*   使用实体框架将模板设置为**具有读/写操作和视图的控制器**
*   将模型类设置为**电子邮件（MyService.Entities）**
*   将数据上下文类设置为**EntitiesDb (MyService.Entities)**
*   将视图设置为**Razor**

它显示一条消息

**“无法检索 'MyService.Entities.Email' 的元数据。'System.Data.Entity.Internal.AppConfig' 的类型初始化程序引发异常”**

令人困惑的是，它最初有效，然后我开始向数据库中添加更多实体和属性，然后它不允许我这样做。我现在已经缩小了规模，它仍在这样做。

在查看论坛后，我尝试了一些事情：

*   在 MVC 项目中检查连接字符串是否正确
*   实体项目中的连接字符串
*   重新安装 Visual Studio 11 Beta，以防任何更新影响它
*   检查引用是否匹配（它们都是 EntityFramework 版本 4.3.1.0）
*   删除数据库以重建（现在我没有；o））

这是VS11中的错误吗？我是否在某处缺少对元数据的引用？

非常感谢任何帮助。

**编辑：通过卸载 EntitiesFramework 并重新安装 NuGet 包解决了问题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T07:12:48.760

从 webconfig 中删除此部分

```
<entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory,    EntityFramework" />
<providers>
 </providers>
</entityFramework> 
```

# r - 在 R 中自定义 timeSeries 日期图的 X 轴中的日期格式？

> ID：10565267
> 
> 赞同：2
> 
> 时间：2012-05-12T16:03:31.843
> 
> 标签：r, plot

请原谅我这个基本问题。我在 R 中加载了一组数据作为 timeSeries。

```
> class(Return)

[1] "timeSeries"
attr(,"package")
[1] "timeSeries"

> head(Return[,1])

GMT
           Overall
2005-09-21  1.8714
2005-09-22  0.2049
2005-09-23 -1.5924
2005-09-26 -4.3111
2005-09-27 -0.2416
2005-09-28 -1.1924 
```

当我绘制这个时间序列数据时，它给了我一个带有日期的图形作为 x 轴的标签，格式为`"2006-01-01"`, `"2007-01-01"`。如何将其自定义为`"2006-01"`or`"2006"`或`"2006 Jan"`以及如何修改频率？例如，我想每半年而不是每年打勾？

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T17:08:32.923

对于标签格式，您可以使用`format`参数（有关格式选项的信息，请查看[此页面](http://stat.ethz.ch/R-manual/R-devel/library/base/html/strptime.html)）：

```
plot(Ts,format="%Y-%m") # 2006-01
plot(Ts,format="%Y-%b") # 2006-Jan
plot(Ts,format="%Y")    # 2006 
```

而对于标签，您可以使用`at`参数设置自定义标签，例如：

```
# compute the desired dates to show:
minDate <- timeCalendar(y=as.integer(format(min(time(Ts)),'%Y')),m=1,d=1)
maxDate <- max(time(Ts))
datesToShow = timeSequence(from=minDate,to=maxDate,by="1 year")

plot(Ts,format="%Y-%m",at=datesToShow) 
```

有关对象`plot`参数的更多信息`timeSeries`，只需键入：

```
?timeSeries::plot 
```

# c# - 使用长线标记增强 WPF 文本框？

> ID：10565271
> 
> 赞同：2
> 
> 时间：2012-05-12T16:04:03.250
> 
> 标签：c#, wpf, xaml

我`TextBox`在 WPF 中有一个像这样的：

```
<TextBox Height="48" /> 
```

没什么特别的，看起来像这样：

![在此处输入图像描述](../Images/6d521cf11798c111207b5f9a1e8fc3b9.png)

现在我需要完成的是有清晰漂亮的长线标记：

![在此处输入图像描述](../Images/62db01afb2b6e741571145b0b20c224d.png)

所以基本上我想在位置 50 处画一个线标记。我将使用一个固定宽度的字体来使这对我自己更容易，这样我就可以轻松地计算位置。

现在的问题是，我不想限制在它上面输入，但我希望它在达到 50 个字符的限制时提供视觉粘合。

为了使事情变得更困难，我需要对以下行/行（72 个字符）设置更高的限制，如下所示：

![在此处输入图像描述](../Images/d9f0426e38b3fa31d797e13ac59e2863.png)

共享相同位置的线标记（第 2 - n 行）可以是单行而不是多行。

我也对其他建议持开放态度，但只要它提供一种干净的方式来告诉用户他即将超过限制，我对此很满意。

注意：我不希望有任何文字说“你还剩 x 个字符”之类的。空间有限，我希望它是视觉的。

更新：如果可以添加工具提示，以便在悬停标记时向用户说明其用途，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T16:33:37.673

既然你想在视觉上装饰文本框，我想到的第一件事就是恰当地命名为[Adnorner](http://msdn.microsoft.com/en-us/library/ms743737.aspx)。

我写了一个快速演示来展示如何装饰文本框。画线部分很容易，棘手的部分是弄清楚应该在哪里画线。我在示例中对行位置进行了硬编码。我想你必须做一些文本测量来找出你的文本有多高（对于行高）以及 50 个字符的价值是多少（以抵消你的行）。

![在此处输入图像描述](../Images/8273dde172746555efe4a1c7cd9aab52.png)

这是xaml：

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid  HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" >
        <AdornerDecorator>
            <TextBox TextWrapping="Wrap"  AcceptsReturn="True" x:Name="myTextBox" Width="200px" Height="200px">hello</TextBox>
        </AdornerDecorator>
    </Grid>
</Window> 
```

以及背后的代码

```
using System.Windows;
using System.Windows.Documents;
using System.Windows.Media;

namespace WpfApplication4
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            AdornerLayer myAdornerLayer = AdornerLayer.GetAdornerLayer(myTextBox);
            myAdornerLayer.Add(new LineAdorner(myTextBox));
        }

        // Adorners must subclass the abstract base class Adorner.

        #region Nested type: LineAdorner

        public class LineAdorner : Adorner
        {
            // Be sure to call the base class constructor.
            public LineAdorner(UIElement adornedElement)
                : base(adornedElement)
            {
            }

            // A common way to implement an adorner's rendering behavior is to override the OnRender
            // method, which is called by the layout system as part of a rendering pass.
            protected override void OnRender(DrawingContext drawingContext)
            {
                var adornedElementRect = new Rect(AdornedElement.DesiredSize);

                var renderPen = new Pen(new SolidColorBrush(Colors.Red), 1.5);

                // Draw lines.
                drawingContext.DrawLine(renderPen,
                                        new Point(adornedElementRect.TopLeft.X + 75, adornedElementRect.TopLeft.Y),
                                        new Point(adornedElementRect.TopLeft.X + 75, adornedElementRect.TopLeft.Y + 20));
                drawingContext.DrawLine(renderPen,
                                        new Point(adornedElementRect.TopLeft.X + 120, adornedElementRect.TopLeft.Y + 20),
                                        new Point(adornedElementRect.TopLeft.X + 120, adornedElementRect.TopLeft.Y + 40));
                drawingContext.DrawLine(renderPen,
                                        new Point(adornedElementRect.TopLeft.X + 120, adornedElementRect.TopLeft.Y + 40),
                                        new Point(adornedElementRect.TopLeft.X + 120, adornedElementRect.TopLeft.Y + 60));
            }
        }

        #endregion
    }
} 
```

# ruby-on-rails - 在路由中接受单个动态但未使用的元素

> ID：10565274
> 
> 赞同：0
> 
> 时间：2012-05-12T16:04:24.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, url-routing

我想接受我的对象的 URL，这些 URL 包含一个未使用的元素，但出于 SEO 的原因，这会很好。例如，我想接受如下网址：

`http://localhost:3000/people/USA/123-joe-schmoe`

..“/USA”位根本没有任何意义，除了向用户和搜索引擎发出此人居住在美国的信号。

我已经尝试使用通配符设置我的规则，以及例如做类似的事情

`match "people/:whatever/:id" => "people#show", :constraints => {:id => /\d+-.*/}, :as => "person"`

但这会导致尝试路由到`:controller => people, :action => "show", :whatever => #<Person id: 123 ...>`哪个失败。

是否可以让路由忽略 :whatever 部分并改为传递我的 :id ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:41:58.883

您可以尝试使用通配符匹配

```
match "people/*/:id => "doctors#show", :constraints=> {:id=>/\d+=.*/}, :as=>"person" 
```

# c - 明确绑定（）套接字函数

> ID：10565279
> 
> 赞同：5
> 
> 时间：2012-05-12T16:04:56.160
> 
> 标签：c, sockets

当我在阅读如何在 C 中建立 TCP 客户端/服务器连接时，我对 bind() 函数有疑问。

我读到您需要此函数将您创建的套接字“绑定”到本地 IPEndPoint，因为客户端/服务器连接需要一个*套接字对*，由**LocalIP:LocalPort, RemoteIP:RemotePort 创建**。因此我的问题是：

1.  当客户端不调用 bind() 而是在创建套接字后立即调用 connect() 时会发生什么以及内核会做什么（这是常见的事情；我也在客户端程序中这样做，但我没有明白为什么我不需要绑定）？

    ……最重要的是……

2.  为什么服务器程序调用 bind()，将 INADDR_ANY 指定为 LocalIP 地址？我读到这个常量对于指定一个通用 IP 地址很有用，即服务器接受来自 Internet 上任何地方的数据。但是...这是本地 IP 地址的规范，还是表明客户端可以到达服务器的位置？我变得非常困惑...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T16:22:52.253

1) 如果要创建服务器套接字，通常只需要调用 Bind。在某些情况下需要建立客户端套接字，但通常不需要客户端套接字。如果要等待某个端口上的传入连接，则必须绑定到它。如果您想连接到某个 IP 和端口，则无需绑定。服务器套接字的绑定对 TCP 端口进行独占访问。在您的应用程序关闭或套接字被您关闭之前，没有其他东西可以联机并绑定到该端口。

2）您正在指定要绑定到本地计算机上的哪个 IP。一台计算机可以有多个 IP 地址。您的计算机可能具有有线和无线连接。每个在本地网络上都有自己的 IP。您可以专门绑定到其中一个 IP，而不是另一个。您甚至可以将一个应用程序绑定到一个 IP 上的端口 473（例如），而将一个完全不同的应用程序绑定到另一个 IP 上的端口 473。如果您指定 INADDR_ANY，您将绑定到机器拥有的所有有效 IP。因此，客户端用来获取您的 IP 无关紧要，它会起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T16:35:10.043

> 当客户端不调用 bind() 而是在创建套接字后立即调用 connect() 时会发生什么以及内核会做什么（这是常见的事情；我也在客户端程序中这样做，但我没有明白为什么我不需要绑定）？

当您在没有先将套接字绑定到 IP/端口的情况下进行出站连接时，内核将根据路由表和可用端口自动选择源 IP 和端口。

> 为什么服务器程序调用 bind()，将 INADDR_ANY 指定为 LocalIP 地址？我读到这个常量对于指定一个通用 IP 地址很有用，即服务器接受来自 Internet 上任何地方的数据。但是...这是本地 IP 地址的规范，还是表明客户端可以到达服务器的位置？我变得非常困惑...

您所读到的内容不准确 - sockaddr 中传递给的 IP 地址`bind()`并不表示服务器将从何处接受*连接*。它指示套接字应附加到的本地 IP 地址。INADDR_ANY 表示您希望在连接到机器的任何和所有 IP 地址上的指定端口上侦听连接。在具有多个 IP 地址的服务器上，指定一个 IP 地址通常很有用`bind()`，以便其他套接字可以绑定到其他 IP 上的同一端口。仅绑定到本地主机上的端口通常也很有用。

# python - pandas，python - 如何在时间序列中选择特定时间

> ID：10565282
> 
> 赞同：16
> 
> 时间：2012-05-12T16:05:17.147
> 
> 标签：python, indexing, time-series, pandas

我现在工作了很长一段时间，使用 python 和 pandas 分析一组每小时数据，发现它非常好（来自 Matlab。）

现在我有点卡住了。我创造了`DataFrame`这样的：

```
SamplingRateMinutes=60
index = DateRange(initialTime,finalTime, offset=datetools.Minute(SamplingRateMinutes))
ts=DataFrame(data, index=index) 
```

我现在要做的是在 10 点到 13 点和 20 点到 23 点选择所有日期的数据，以使用这些数据进行进一步计算。到目前为止，我使用切片数据

```
 selectedData=ts[begin:end] 
```

而且我肯定会得到某种脏循环来选择所需的数据。但是必须有一种更优雅的方式来准确索引我想要的内容。我确信这是一个常见问题，伪代码中的解决方案应该看起来像这样：

```
myIndex=ts.index[10<=ts.index.hour<=13 or 20<=ts.index.hour<=23]
selectedData=ts[myIndex] 
```

提到我是一名工程师而不是程序员:) ...然而

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-12T20:46:40.990

在即将发布的 pandas 0.8.0 中，您将能够编写

```
hour = ts.index.hour
selector = ((10 <= hour) & (hour <= 13)) | ((20 <= hour) & (hour <= 23))
data = ts[selector] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-12T17:03:18.753

这是一个可以满足您要求的示例：

```
In [32]: from datetime import datetime as dt

In [33]: dr = p.DateRange(dt(2009,1,1),dt(2010,12,31), offset=p.datetools.Hour())

In [34]: hr = dr.map(lambda x: x.hour)

In [35]: dt = p.DataFrame(rand(len(dr),2), dr)

In [36]: dt 

Out[36]: 
<class 'pandas.core.frame.DataFrame'>
DateRange: 17497 entries, 2009-01-01 00:00:00 to 2010-12-31 00:00:00
offset: <1 Hour>
Data columns:
0    17497  non-null values
1    17497  non-null values
dtypes: float64(2)

In [37]: dt[(hr >= 10) & (hr <=16)]

Out[37]: 
<class 'pandas.core.frame.DataFrame'>
Index: 5103 entries, 2009-01-01 10:00:00 to 2010-12-30 16:00:00
Data columns:
0    5103  non-null values
1    5103  non-null values
dtypes: float64(2) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-28T00:16:44.100

由于在我上面的评论中看起来很乱，我决定提供另一个答案，即 Marc 的答案中 pandas 0.10.0 的语法更新，并结合 Wes 的提示：

```
import pandas as pd
from datetime import datetime

dr = pd.date_range(datetime(2009,1,1),datetime(2010,12,31),freq='H')
dt = pd.DataFrame(rand(len(dr),2),dr)
hour = dt.index.hour
selector = ((10 <= hour) & (hour <= 13)) | ((20<=hour) & (hour<=23))
data = dt[selector] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-24T14:55:54.413

Pandas DataFrame 有一个内置函数 [pandas.DataFrame.between_time](https://pandas.pydata.org/pandas-docs/version/0.18.1/generated/pandas.DataFrame.between_time.html)

```
df = pd.DataFrame(np.random.randn(1000, 2),
                  index=pd.date_range(start='2017-01-01', freq='10min', periods=1000)) 
```

为每个时间段创建 2 个数据帧：

```
df1 = df.between_time(start_time='10:00', end_time='13:00') 
df2 = df.between_time(start_time='20:00', end_time='23:00') 
```

您想要的数据框被合并并排序 df1 和 df2：

```
pd.concat([df1, df2], axis=0).sort_index() 
```

# python - AttributeError：“NoneType”对象没有属性“_columns”

> ID：10565288
> 
> 赞同：1
> 
> 时间：2012-05-12T16:05:42.690
> 
> 标签：python, openerp

我正在编写一个继承自 Accounts 模块的 OpenERP 模块。下面是我的简化代码

```
from osv import fields, osv
import decimal_precision as dp

class account_molly(osv.osv):

    def __computeOB(self, cr, uid, ids, context=None):
        res = []
        return 0

    def __computeCB(self, cr, uid, ids, context=None):
        res = []
        return 0

    _name = "account.molly"
    _description = "This is Molly Special Account View"
    _inherit = "account.account"
    _columns = {
        'opening_balance': fields.function(__computeOB, digits_compute=dp.get_precision('Account'), method=True, string='Opening Balance'),
        'end_balance': fields.function(__computeCB, digits_compute=dp.get_precision('Account'), method=True, string='End Balance'),
    }   

account_molly()

# vim:expandtab:smartindent:tabstop=4:softtabstop=4:shiftwidth=4: 
```

当我尝试安装模块时，我得到

```
AttributeError: 'NoneType' object has no attribute '_columns'
```

请问可能是什么问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T05:04:52.510

请检查您创建的模块的依赖关系。在**openerp** .py 文件中，如果没有添加'account'，请在依赖列表中添加。如果这没有解决您的问题，请提供错误日志

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-12T19:22:15.087

这能解决问题吗？

```
class account_molly(osv):
    ... 
```

你似乎混合了模块和类以及类属性

# inequality - 如何计算（使用程序）一列总和或测试不等式？

> ID：10565290
> 
> 赞同：0
> 
> 时间：2012-05-11T15:16:49.470
> 
> 标签：inequality, math

每个表达式都在单独的行上。给定

```
34-2
34-5
34-3 
```

我正在寻找

```
34-2=28
34-5=29
34-3=31 
```

或者，这也会有所帮助：鉴于：

```
34-2=5
34-5<=34
34-3=31 
```

我正在寻找

```
!   34-2=5
    34-5<=34
    34-3=31 
```

在哪里 ！是一些表明不平等或平等是错误的迹象。我正在寻找处理文本文件的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:54:22.333

[Chris Taylor](https://stackoverflow.com/users/546084/chris-taylor)是完全正确的，这是它在 python 中给出的：

```
>>> s="""34-2
34-5
34-3
34-2==5
34-5<=34
34-3==31
"""
>>> for line in s.split('\n'):
    # Test line is not empty
    if line:
        operators = ('!=', '<=', '>=', '==', '<', '>')
        op_found = False
        # Stop at 1st operator found
        for op in operators:
            if op in line:
                op_found = True
                if not eval(line):
                    print '!', line
                else:
                    print '+', line
                break
        # If no operator found, we assume we want the result of the operation
        if not op_found:
            print '{0}={1}'.format(line, eval(line))

34-2=32
34-5=29
34-3=31
! 34-2==5
+ 34-5<=34
+ 34-3==31
>>> 
```

几点说明：

*   我使用`==`而不是`=`因为这就是python中的平等方式（`=`仅用于分配）
*   我还曾经`+`表明断言对于可读性是正确的
*   我使用了一个字符串`s`，但你当然可以使用一个文件（你可以`for line in s.split('\n'):` 用`for line in open(file_path):`
*   请记住，每次使用时`eval`，您都可能被黑客入侵（请注意文件中的行...）

# ruby-on-rails - Ruby on Rails - 如何制作嵌套对象

> ID：10565294
> 
> 赞同：0
> 
> 时间：2012-05-12T16:06:06.720
> 
> 标签：ruby-on-rails, architecture, nested-class

我想构建嵌套对象的结构**而不为每个对象创建模型**。此结构应用于中间计算，仅用于显示目的，**不保留在数据库中**。

用嵌套对象数组制作对象的正确 Rails 方式是什么？

可以在无意中创建模型以保留在数据库中吗？这是创建对象的正确方法吗？

Ruby 是动态类型语言。如何**将**嵌套数组中的对象**仅限于特定类**？

据我了解，**attr_accessor**相当于其他编程语言中的对象字段。如何声明这个字段应该是**特定的类类型**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:38:48.713

你可以看看[http://datamapper.org/](http://datamapper.org/)

它应该能够做你正在寻找的东西

# dynamic - UILabel 在 LayoutSubview 中错误地调整大小

> ID：10565295
> 
> 赞同：1
> 
> 时间：2012-05-12T16:06:10.673
> 
> 标签：dynamic, uilabel, layoutsubviews

我有一个 UITableViewCell 的子类来显示自定义单元格。此类与 Storyboard 集成，因此属性的框架已在 IB 中设置。

我的目标是根据标签包含的文本动态设置标签的宽度，并使用 setNeedsLayout 重新绘制标签。

自定义单元格的 .m 文件的一部分：

```
static CGFloat const kHorizontalEdgeOffset = 74.0;
static CGFloat const kVerticalEdgeOffset = 10.0;
static CGFloat const kNameLabelHeight = 22.0;

- (void)setFriend:(Person *)friend
{
    if (_friend != freeDomeFriend) {
        _friend = friend;
        self.friend = friend;
    }

    // Set the text for the first name and save the size to fit the text.
    self.firstNameLabel.text = friend.firstName;
    self.firstNameLabelSize = [self.firstNameLabel.text sizeWithFont:[UIFont fontWithName:@"Helvetica-Bold" size:17.0]];
    // Set the text for the last name and save the size to fit the text.
    self.lastNameLabel.text = friend.lastName;
    self.lastNameLabelSize = [self.lastNameLabel.text sizeWithFont:[UIFont fontWithName:@"Helvetica" size:17.0]];

    // Ask the view to layout the view with the changes.
    [self setNeedsLayout];
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

- (void)layoutSubviews
{    
    [super layoutSubviews];

    // Set the new frames according to the caluclated size for the labels.
    self.firstNameLabel.frame = CGRectMake(kHorizontalEdgeOffset, kVerticalEdgeOffset, kNameLabelHeight, self.firstNameLabelSize.width);
    self.lastNameLabel.frame = CGRectMake(kHorizontalEdgeOffset + self.firstNameLabelSize.width + 2.0,
                                          kVerticalEdgeOffset, kNameLabelHeight, self.lastNameLabelSize.width);

    NSLog(@"FN: %@ \n LN: %@ \n ------------------", self.firstNameLabel, self.lastNameLabel);
} 
```

我的 NSLog 给了我正确的输出：

```
2012-05-12 23:56:36.741 MyProject[11421:16403] FN: <UILabel: 0xa888eb0; frame = (74 10; 22 57); text = 'Callum'; clipsToBounds = YES; opaque = NO; autoresize = LM+RM+TM+BM; userInteractionEnabled = NO; layer = <CALayer: 0xa880fa0>> 
 LN: <UILabel: 0xa8890c0; frame = (133 10; 22 45); text = 'Webb'; clipsToBounds = YES; opaque = NO; autoresize = LM+RM+TM+BM; userInteractionEnabled = NO; layer = <CALayer: 0xa889130>> 
 ------------------
2012-05-12 23:56:36.742 MyProject[11421:16403] FN: <UILabel: 0xa88abf0; frame = (74 10; 22 48); text = 'Hervé'; clipsToBounds = YES; opaque = NO; autoresize = LM+RM+TM+BM; userInteractionEnabled = NO; layer = <CALayer: 0xa88ac60>> 
 LN: <UILabel: 0xa88ad00; frame = (124 10; 22 86); text = 'Fahendrich'; clipsToBounds = YES; opaque = NO; autoresize = LM+RM+TM+BM; userInteractionEnabled = NO; layer = <CALayer: 0xa88ad70>> 
 ------------------
2012-05-12 23:56:36.743 MyProject[11421:16403] FN: <UILabel: 0xa88b4a0; frame = (74 10; 22 41); text = 'John'; clipsToBounds = YES; opaque = NO; autoresize = LM+RM+TM+BM; userInteractionEnabled = NO; layer = <CALayer: 0xa88b510>> 
 LN: <UILabel: 0xa88b5b0; frame = (117 10; 22 50); text = 'Clema'; clipsToBounds = YES; opaque = NO; autoresize = LM+RM+TM+BM; userInteractionEnabled = NO; layer = <CALayer: 0xa88b620>> 
 ------------------
2012-05-12 23:56:36.743 MyProject[11421:16403] FN: <UILabel: 0xa88bf30; frame = (74 10; 22 40); text = 'Luke'; clipsToBounds = YES; opaque = NO; autoresize = LM+RM+TM+BM; userInteractionEnabled = NO; layer = <CALayer: 0xa88bfa0>> 
 LN: <UILabel: 0xa88c040; frame = (116 10; 22 74); text = 'McManus'; clipsToBounds = YES; opaque = NO; autoresize = LM+RM+TM+BM; userInteractionEnabled = NO; layer = <CALayer: 0xa88c0b0>> 
 ------------------ 
```

然而，这就是我在视觉上得到的（我无法上传图片，所以我会尽力描述它）：标签的尺寸非常小（宽度和高度），并且来源似乎是随机的。有时 lastName 将位于单元格的底部，而名字则位于中间。

我究竟做错了什么？我已经做了好几个小时了。

感谢您的帮助。

# c# - 从另一个表中获取具有不同属性组合的行

> ID：10565296
> 
> 赞同：0
> 
> 时间：2012-05-12T16:06:15.333
> 
> 标签：c#, sql-server-2008, tsql

我在做什么：

我正在编写一个 C# 应用程序，它将帮助员工处理电子邮件。我有一个包含邮件的数据库（MS SQL Server 2008 Express）。一个表包含邮件本身（每一行都有 msgId、发件人、收件人、主题、正文等列），另一个表包含员工如何处理邮件的数据 - 每当电子邮件分配了某些属性时，都会有一个新行与属性保存到第二个表。第二个表包含列：msgId、forTeam、notForTeam、processedByTeam。每当员工将消息标记为与其团队相关时，都会在 forTeam 列中保存一行带有 TEAMXX 值的行。每当员工对电子邮件执行其他操作时，都会将具有 TEAMXX 值的行保存在 processesByTeam 列中。

我正在尝试获取具有以下值的电子邮件：
forTeam：'TEAM01'
notForTeam：与'TEAM01'不同的
所有内容 processesByTeam：与'TEAM01'不同的所有内容

我使用 MailAssignments 表在 Mails 表上执行 LEFT JOIN，然后在 WHERE 之后放置上述条件。结果应该显示已分配给 TEAM01 但尚未由该团队的员工处理的消息。

问题：

我无法让 SQL 查询正常工作。条件的任何组合都将返回额外的行（例如，当我想省略这些时，使用属性 notForTeam='TEAM01'！）或给我一个错误，即日期时间由于某种原因格式不正确（我正在按接收时间对电子邮件进行排序）。

示例查询：

```
SELECT TOP 30 Mails.* 
FROM Mails 
LEFT JOIN MailAssignments 
ON Mails.msgId = MailAssignments.msgId 
WHERE
(MailAssignments.forTeam='TEAM01') 
AND (MailAssignments.notForTeam<>'TEAM01' OR MailAssignments.notForTeam IS NULL) 
AND (MailAssignments.processedByTeam<>'TEAM01' OR MailAssignments.processedByTeam IS NULL)
ORDER BY Mails.sortingTime DESC 
```

即使我将 WHERE 之后（以及 ORDER BY 之前）的条件减少到`(MailAssignments.notForTeam<>'TEAM01')`进行测试，由于某种原因，我仍然会收到错误消息。

我错过了什么或做错了什么？

更新：

似乎这`(MailAssignments.notForTeam<>'TEAM01')`以某种方式导致了问题。其他一切正常（等号也可以：MailAssignments.notForTeam='TEAM01'）但是当我添加`notForTeam<>`条件时，我得到不正确的日期时间错误（WTF？：/）

**System.Data.SqlTypes.SqlTypeException：SqlDateTime 溢出。必须介于 1753 年 1 月 1 日上午 12:00:00 和 9999 年 12 月 31 日晚上 11:59:59 之间。**

更新 - 示例：

```
table with mails ("Mails"):
msgId sender  subject body  received (sortingTime)
53    x@x.com test    test  2012-05-11 11:00
54    b@b.com test2   test2 2012-05-10 10:00
55    h@h.com blah    blah  2012-05-11 12:00
56    t@t.com dfgg    dfgg  2012-05-11 12:30

table with assignments ("MailAssignments"):
msgId forTeam notForTeam  processedByTeam
54    null    TEAM02      null            - this means TEAM02 hid the mail from their view
54    TEAM01  null        null            - this means TEAM01 assigned the mail to them
54    null    null        TEAM01          - TEAM01 has processed the mail

53    TEAM01  null        null            - invisible to other teams
53    null    TEAM01      null            - invisible for TEAM01 (and also for others because of the above)

56    TEAM01  null        null
56    null    null        TEAM01          - mail processed by TEAM01

55    TEAM02  null        null            - assigned to TEAM02 but not processed yet

Now, I want my C# app to have a view which will display mails as "This Team's", ie.:
1\. mail 54 was first hidden for TEAM02 - should be invisible for them
2\. mail 54 was assigned to TEAM01 - should be now visible for them in "This Team's" view
3\. mail 54 was processed by TEAM01 - should be now invisible in "This Team's" view

4\. mail 53 was assigned to TEAM01 - should visible in their "This Team's" view (and ONLY for them)
5\. mail 53 was hidden for TEAM01 - should be invisible to TEAM01 (and for anyone else because of prev. action)

6\. mail 56 was assigned to TEAM01 - should be now visible only to TEAM01 in "This Team's"
7\. mail 56 was processed by TEAM01 - should be now invisible for TEAM01 in "This Team's"

So, with the present data in both tables, finally, TEAM02 for example should see in their "This Team's" view only:
mail 55 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:28:45.523

```
Select TOP 30 *
From Mails As M
Where Exists    (
                Select 1
                From MailAssignments As MA1
                Where MA1.msgid = M.msgid
                    And MA1.forTeam = 'TEAM01'
                Except
                Select 1
                From MailAssignments As MA1
                Where MA1.msgid = M.msgid
                    And ( MA1.processedByTeam = 'TEAM01' 
                         Or MA1.notForTeam = 'TEAM01' )
                )
Order By M.received Desc 
```

[SQL 小提琴](http://sqlfiddle.com/#!3/fbfe5/5)版本。

拥有示例数据和模式会使世界变得与众不同。`MailAssignments`错过的是每行有多行`Mails`。因此，当您说要排除 where 行时`notForTeam = 'TEAM01'`，真正的意思是排除任何具有该值的关联 msgid。我已经更新了我的查询以适应该请求。您可能怀疑的`Except`子句消除了第二个查询中存在于第一个查询中的任何匹配值。由于我在两个查询中都使用了常量，如果第二个查询返回给定 msgid 的任何行，它将使整个 Exists 查询不返回任何行并排除 msg。

也就是说，我们没有得到任何行，`TEAM01`因为：

```
MsgId = 54 is excluded because according to Rule #3, messages 
    that were processed by the team should be excluded.
MsgId = 53 is excluded because notForTeam = 'TEAM01' (Rule #5)
MsgId = 56 is excluded because processedBy = 'TEAM01' (Rule #7)
MsgId = 55 is excluded because forTeam = 'TEAM02' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:24:00.947

尝试：

```
WHERE
MailAssignments.forTeam='TEAM01'
AND MailAssignments.notForTeam<>'TEAM01'
AND MailAssignments.processedByTeam<>'TEAM01'
ORDER BY Mails.sortingTime DESC 
```

这应该可以解决问题

# android - 服务不起作用？

> ID：10565299
> 
> 赞同：0
> 
> 时间：2012-05-12T16:06:37.090
> 
> 标签：android, service, gps

我有由 BrodcastReceiver 运行的服务，它应该运行并给我我请求的 GPS 数据，我在做了应该做的事情后停止了它，但我注意到它没有向我提供请求的数据并且没有也停止，任何机构都可以帮助我找出我的问题，代码如下和在真实设备中测试的服务：

```
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.IBinder;
import android.os.SystemClock;
import android.widget.Toast;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;

public class GpsService extends Service implements LocationListener{
    static LocationManager mlocManager;

    }    
    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }
    public void onCreate() {

    }

    @Override
    public void onDestroy() {

    }

    @Override
    public void onStart(Intent intent, int startid) {
        mlocManager = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
        mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER,0, 0,this);

    }

        @Override
    public void onLocationChanged(Location loc)
    {
    loc.getLatitude();
    loc.getLongitude();
    String Text = "My current location is: " +"Latitud = " + loc.getLatitude() +"Longitud = " + loc.getLongitude();
   Toast.makeText( getApplicationContext(),Text,Toast.LENGTH_SHORT).show(); 
    // Here to stop the service and make it finish its task
    SystemClock.sleep(40000);
    // stop the Gps system by this application
    mlocManager.removeUpdates(this);
    //Here to stop the service by itself
    stopSelf();

    }
    @Override
    public void onProviderDisabled(String provider)
    {
    Toast.makeText( getApplicationContext(),"Gps Disabled",Toast.LENGTH_SHORT ).show();
    }

    @Override
    public void onProviderEnabled(String provider)
    {
    Toast.makeText( getApplicationContext(),"Gps Enabled",Toast.LENGTH_SHORT).show();
    }
    @Override

    public void onStatusChanged(String provider, int status, Bundle extras)
    {
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:14:59.740

1.  您对清单有正确的权限吗？
2.  你为什么让服务休眠这么长时间？该服务在UI线程上工作，这样的事情可能会导致服务在大约5秒后被系统自动杀死，因为ui线程没有响应。
3.  如果您想延迟 toast 的停止和/或显示，请使用 Handler (和 postDelayed) ，或使用 asyncTask ，或您自己的东西。
4.  你的gps打开了吗？您是否考虑过使用假定位应用程序或模拟器来完成此任务？
5.  祝你好运 。

# prolog - 在 Prolog 中猜猜喜欢谁的游戏

> ID：10565302
> 
> 赞同：4
> 
> 时间：2012-05-12T16:06:48.943
> 
> 标签：prolog

我正在开发[猜猜谁？](http://en.wikipedia.org/wiki/Guess_Who?)使用 Prolog 的游戏。游戏的机制非常简单。一个玩家（在这种情况下是人类）从许多可能的人中选择一个人，而另一个玩家（计算机）开始就该人的某些属性提出是/否问题。最终，有了给定的答案，将只有一个可能的人。

到目前为止，我已经能够制定一套规则和谓词，以便计算机可以根据迄今为止提出的问题来猜测这个人。我有一组嫌疑人——这些人只要有可用的线索，就可能适合。

```
suspect('Person 1') :- eyes(blue) , age(old) , gender(male). 
```

属性的谓词被定义为，如果关于该属性的问题还没有被问到，或者如果问题已经被问过并且答案与嫌疑人的属性相匹配，它们就会为真。

```
gender(X) :- not(asked_gender) ; value_of(gender, X). 
```

这样一来，如果两个嫌疑人的眼睛、年龄相同、性别不同，只要不问性别，他们都是合理的嫌疑人。

然而，现在最困难的部分是自动化提出这些问题的过程。基本上，我期待 Prolog 能够从嫌疑人的谓词中获取属性的可能值的解决方案，而不是在其他地方列出主题。我很确定必须有一种方法可以做到这一点，因为 prolog 能够将程序的代码用作数据本身。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T21:49:18.383

这适用于 SWI-Prolog ：

```
:- dynamic value/1.

suspect('Person 1') :- eyes(blue) , age(old) , gender(male).

suspect('Person 2') :- eyes(green) , age(young) , gender(male).

suspect('Person 3') :- eyes(brown) , age(young) , gender(male).

fetch(Criterion, Value) :-
    retractall(value(_)),
    assert(value([])),
    forall(clause(suspect(_), Body),
    check(Body, Criterion)),
    retract(value(Value)).

check((F, T), Criterion) :-
    F =..[Criterion, V1],
    retract(value(V2)),
    (   member(V1, V2) -> V3 = V2; V3 = [V1 | V2]),
    assert(value(V3)).
    check(T, Criterion).

check((_F, T), Criterion) :-
    check(T, Criterion).

check((F), Criterion) :-
    F =..[Criterion, V1],
    retract(value(V2)),
    (   member(V1, V2) -> V3 = V2; V3 = [V1 | V2]),
    assert(value(V3)).

check((_F), _Criterion). 
```

例如：?- fetch(gender, Value)。值 = [男性]。

?- 获取（眼睛，价值）。值 = [棕色、绿色、蓝色]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:52:31.353

好吧，我想像这样的结构：

```
go :-
    findall(People,suspect(People),SuspectList),
    length(SuspectList,1),
    member(Perb,SuspectList),
    write('It is '),write(Perb),write('!!'),nl,!.

go :-
    askQuestion,
    go. 
```

在 askQuestion/0 中，您将使用 read/1 谓词和 assert/1 提出问题的答案。这是您可以尝试使其“智能”的地方，或者您可以迭代不同的问题。

# delphi - 带有 Unicode 数据的 LoadFromFile

> ID：10565303
> 
> 赞同：8
> 
> 时间：2012-05-12T16:07:06.483
> 
> 标签：delphi, delphi-xe

我的输入文件 (f) 有一些未正确读取的 Unicode（瑞典语）。

这些方法都不起作用，尽管它们给出了不同的结果：

```
 LoadFromFile(f); 
```

或者

```
 LoadFromFile(f,TEncoding.GetEncoding(GetOEMCP)); 
```

我正在使用德尔福 XE

我怎样才能 LoadFromFile 一些 Unicode 数据....以及我如何随后 SaveToFile？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T16:44:51.330

为了加载一个 Unicode 文本文件，您需要知道它的编码。如果文件有字节顺序标记 (BOM)，那么您可以简单地调用`LoadFromFile(FileName)`，RTL 将使用 BOM 来确定编码。

如果文件没有 BOM，那么您需要明确指定编码，例如

```
LoadFromFile(FileName, TEncoding.UTF8);
LoadFromFile(FileName, TEncoding.Unicode);//UTF-16 LE
LoadFromFile(FileName, TEncoding.BigEndianUnicode);//UTF-16 BE 
```

出于某种原因，我不知道，没有对 UTF-32 的内置支持，但如果你有这样的文件，那么添加一个`TEncoding`实例来处理它就很容易了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-12T16:08:33.393

当您说“Unicode”时，我假设您的意思是“UTF-8”。

如果您知道该文件是 UTF-8，则执行

```
LoadFromFile(f, TEncoding.UTF8). 
```

保存：

```
SaveToFile(f, TEncoding.UTF8); 
```

（`GetOEMCP`WinAPI 函数适用于旧的 255 个字符的字符集。）

# c++ - Arduino 锁定

> ID：10565305
> 
> 赞同：3
> 
> 时间：2012-05-12T16:07:25.963
> 
> 标签：c++, embedded, arduino

下面程序的目的是定期在串行上输出一个数据帧。该周期由每秒一次的定时中断定义。

该代码在 Arduino IDE 版本 0022 上工作，但在 1.0 上我无法让它工作。当使用定时器例程并`maxFrameLength`设置为`0x40`或更高时，控制器锁定。使用 0x39 或更低时，程序继续运行（由闪烁的 LED 指示）。

这里出了什么问题，为什么？它是一个错误吗？难道我做错了什么？

我在Mega1280 上使用[http://code.google.com/p/arduino-timerone/downloads/detail?name=TimerOne-v9.zip作为定时器例程。](http://code.google.com/p/arduino-timerone/downloads/detail?name=TimerOne-v9.zip)

```
#include "TimerOne.h"

#define LED 13
#define maxFrameLength 0x40

boolean stateLED = true;
byte frame[ maxFrameLength ];

void sendFrame() {
  digitalWrite( LED , stateLED );
  stateLED = !stateLED;
  Serial.write( frame, maxFrameLength ); // ptr + bytes to send
}

void setup() {
  pinMode( LED , OUTPUT );
  Timer1.initialize( 1000000 );  // initialize timer1 with 1 second period
  Timer1.attachInterrupt( sendFrame );
  Serial.begin( 9600 );
};

void loop() {
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T09:31:30.557

有许多问题可能会或可能不会导致问题，但无论如何都应该解决。这些评论是一般性的；我不熟悉 Arduino 或其库。

在中断处理程序 (ISR) 中发出`Serial.write()`调用几乎肯定是不合适的。如果串行对象是中断驱动的，它将有一个关联的缓冲区。如果该缓冲区不够大，无法接收所有数据，则函数可能会*阻塞*，这在中断处理程序中是*不可以的。*此外，如果定时器中断的优先级高于串行中断，则会在`Serial.write()`阻塞时造成死锁。0x40（64 字节）似乎是串行输出的可能缓冲区大小，因此这可能是主要原因。如果您可以增加可能使其工作的缓冲区大小，但在 ISR 中执行潜在的阻塞操作仍然是一个坏主意。

即使轮询串行输出而不是中断驱动，您的中断处理程序也会花费相当长的时间，这也是一个坏主意，但在这种情况下可能不是问题，但在*9600,n,8,1*，64 个字符将需要 67毫秒清除发送寄存器。

`stateLED`并且`frame`是共享变量（在中断和主上下文之间），因此应该声明为[volatile](http://www.eetimes.com/discussion/beginner-s-corner/4023801/Introduction-to-the-Volatile-Keyword)。

您的片段中没有显示`frame`更新的方式和位置，但由于中断将异步发生，因此任何更新都`frame`应该在*[关键部分](https://en.wikipedia.org/wiki/Critical_section)*- 至少禁用 timer1 中断。

* * *

**更新**

鉴于AH的回复，我下载了源码看了一下。是在 \arduino-1.0\hardware\arduino\cores\arduino\hardwareSerial.cpp/.h 中定义`Serial`的类的静态对象。`HardwareSerial`传输缓冲区长度确实是 64 字节，`HardwareSerial::write()`如果缓冲区已满，函数会“忙等待”。您将需要修改并重新构建源以扩展缓冲区或添加非阻塞版本的`write()`.

然而，这肯定是锁定的原因 - 缓冲区永远不会清空，因为在 timer1 中断运行时无法处理发送中断。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T10:08:04.767

1.0[的发行说明告诉您：](http://arduino.cc/en/Main/ReleaseNotes)

*   串行传输现在是异步的——也就是说，调用 Serial.print() 等将数据添加到在后台传输的传出缓冲区。此外， Serial.flush() 命令已重新用于等待传出数据的传输，而不是丢弃接收到的传入数据。

因此，您的代码在 1.0 之前工作，因为`HardwareSerial::write(uint8_t)`（这是所有输出的基础）没有缓冲区并且仅在传输字节后才返回。

我发现令人惊讶的是，[参考页面](http://arduino.cc/en/Serial/Write)`Serial`没有提到这种行为。

# sql - 对查询语言的作用感到困惑

> ID：10565313
> 
> 赞同：2
> 
> 时间：2012-05-12T16:07:58.367
> 
> 标签：sql, database, vb6

因此，我没有任何运气找到任何文章或论坛帖子，这些文章或论坛帖子向我解释了查询语言如何与 c++ 或 vb 等通用编程语言结合使用。所以我想问不会有什么坏处>.<

基本上，如果我正在创建一个填充表格的简单数据库查询，我一直很难理解查询语言的作用（我们将使用 SQL 作为查询语言的示例，使用 VB6 作为规范语言的示例）带有普通信息（名字、姓氏、地址等）。我有点知道使用 ado 对象进行连接和诸如此类的程序设置这样的程序的步骤，但是我们如何决定将 2 中的哪种语言用于某些事情？vb6 是否专门处理循环、if else、变量声明等基础知识，而 SQL 专门处理连接数据库和进行搜索、过滤和排序等事情？是否可以在 SQL 语法中执行某些通用的 vb6 操作（循环或条件）？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T16:28:54.820

SQL 是一种查询数据库的语言。SQL 是[ISO 标准](http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=53681)，关系数据库供应商根据 ISO 标准实施，然后添加他们自己的定制。例如，在 SQL Server 中称为 T-SQL，在 Oracle 中称为 PL-SQL。他们都实施了 ISO 标准，因此每个人都会对简单的选择有相同的查询，例如

```
select columname from tablename where columnname=1 
```

但是，对于字符串函数、日期函数等，每个函数都有不同的语法......

ISO SQL 标准的设计不是像 VB 这样的完整过程语言那样具有循环、子例程等的完整过程语言。

但是，每个供应商都在其版本中添加了一些功能，以添加其中的一些功能。

例如，T-SQL 和 PL-SQL 都可以使用其语言中的各种结构“循环”记录。

在处理许多开发人员没有很好地调整的数据时也存在差异。那是基于集合的操作与基于程序的操作。

数据库可以使用过程构造，但通常使用基于集合的性能更高。不熟悉此概念的开发人员最终可能会创建一个非常低效的查询。 [这是这个讨论的一个例子](http://ask.sqlservercentral.com/questions/2019/set-based-vs-procedural.html)。

在任何情况下，您都必须权衡专业人士/劣势人士在哪里最好做这项工作。

我倾向于在我使用的语言中使用过程构造，例如循环而不是 SQL。我发现它更容易维护，并且我使用的语言为我提供了更强大的语法来完成工作。

但是，我将这两个选项都保留为工具箱中的工具。例如，我用 SQL 编写了数据转换脚本，在这种情况下，我使用了 SQL 中的循环结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T16:13:02.233

通常编程语言在客户端（应用服务器也是）执行，查询语言在数据库服务器中执行，所以最终取决于你想把所有工作放在哪里。有时您可以通过使用编程语言进行所有计算来在客户端进行大量工作，而其他时候您想使用更多的数据库服务器，最终您会使用查询语言甚至更好的 tsql/psql 或其他语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T16:17:17.960

关系数据库旨在管理数据。特别是，它们提供了一种有效的机制来管理大量数据的内存、磁盘和处理器。此外，关系数据库可以处理多个客户端，保证事务完整性、安全性、备份、持久性和许多其他功能。

一般来说，如果你在使用另一种语言的 RDBMS，你首先要设计数据结构，然后考虑两者之间的 API（应用程序编程接口）。当您有应用程序/服务器关系时尤其如此。

对于“简单”类型的应用程序，它使用大量数据但对其进行了最小或批量更改，您希望将尽可能多的处理转移到数据库中。以下是您不想做的事情：

1.  使用查询将事物加载到数组中，然后在语言级别进行数组操作。SQL 为此提供了连接。
2.  将数据加载到数组中并对数组进行操作和汇总。SQL 为此提供了聚合。
3.  将数据保存到文件中以进行备份。数据库提供备份机制。

如果您的数据适合数组或 Excel 电子表格，则通常从那里存储的数据开始就足够了。只有当您开始扩展需求（多客户端、安全性、与其他数据的集成）时，数据库的优势才会更加明显。

这些只是为了指导和给你一些想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T16:37:20.120

至于在哪里做什么，尽你所能在 SQL 中做尽可能多的事情（假设它在服务器上运行）。

所以例如不要做这样的事情（伪代码）

```
foreach(row in "Select * from Orders")
  if (row[CustomerID] = 876)
    Display(row) 
```

做

```
foreach(row in "Select * from Orders where CustomerId = 876")
  Display(row) 
```

首先，订单可能由 CustomerID 索引，因此它会更快地找到所有 876 订单。

第二个是做第一个，你刚刚将该表中的每条记录都吸进了客户端的内存空间，可能是通过你的网络。

使用什么语言本质上是无关紧要的，您可以用自己的语言发明自己的 DBMS。

这是您进行重要处理的地方。这是有例外的规则，但基本的想法是让你的后端尽可能多地做。

# android - 使用 Fragment 的 Android SwitchPreference

> ID：10565317
> 
> 赞同：1
> 
> 时间：2012-05-12T16:08:30.683
> 
> 标签：android, android-layout

我有一个活动来使用一个 FragmentPreference 来表示首选项屏幕。

**活动布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<fragment
    android:id="@+id/frag"
    android:name="com.test.preference.Frag"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

**偏好xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
<PreferenceCategory android:title="General">
    <SwitchPreference android:title="Enable module" android:key="asd" android:summaryOff="Turn on module" android:summaryOn="Turn off module"/>
    <SwitchPreference android:title="Post in application" android:key="qwe" android:summary="Show posts in application"/>
    <SwitchPreference android:title="Post in widget" android:key="zxc" android:summary="Show posts in widget"/>
</PreferenceCategory> 
```

**活动类：**

```
public class TestActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}
} 
```

最后**是片段类：**

```
public class Frag extends PreferenceFragment{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.test);
}
} 
```

活动正常启动，但是当我单击第一个 SwitchPreference 时，它​​的状态保持不变，而其他两个 SwitchPreference 改变了它们的状态！

如果我使用不推荐使用的方法（没有片段的 PreferenceActivity）它可以工作。

有人可以帮助我吗？

朱利奥

# jquery - jQuery UI 自动完成仅弹出 minLength: 0

> ID：10565321
> 
> 赞同：2
> 
> 时间：2012-05-12T16:08:49.070
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

[我在http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)上使用了“自定义数据和显示”示例，并对其进行了一些简化，因此我可以拥有如下值和 ID：

```
$(function() {
    var prd = [
        { s: "hallo", v: "1" },
        { s: "hey", v: "2" },
        { s: "alloh", v: "3" }
    ];
    $("#product").autocomplete({
        source: prd,
        minLength: 0,
        focus: function(event, ui) {
            $("#product").val(ui.item.s);
            return false;
        },
        select: function(event, ui) {
            $("#product").val(ui.item.s);
            $("#productId").val(ui.item.v);
            return false;
        }
    }).data("autocomplete")._renderItem = function(ul, item) {
        return $("<li></li>")
            .data("item.autocomplete", item)
            .append("<a>" + item.s + "</a>")
            .appendTo(ul);
    };
}); 
```

问题是没有 minLength:0 它永远不会弹出，而使用 minLength:0 它只会弹出一个空文本框（键入一个字符然后删除它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:32:20.640

Jqueryui 自动完成对“标签”和“值”的使用几乎是自动的。将“s”和“v”改回“label”和“value”，一切都会按预期工作：

```
 <script>
    $(function() {
        var prd = [
            { label: "hallo", value: "1" },
            { label: "hey", value: "2" },
            { label: "alloh", value: "3" }
        ];
        $("#product").autocomplete({
            source: prd,
            minLength: 0,
            focus: function(event, ui) {
                $("#product").val(ui.item.label);
                return false;
            },
            select: function(event, ui) {
                $("#product").val(ui.item.label);
                $("#productId").val(ui.item.value);
                return false;
            }
        }).data("autocomplete")._renderItem = function(ul, item) {
            return $("<li></li>")
                .data("item.autocomplete", item)
                .append("<a>" + item.label + "</a>")
                .appendTo(ul);
        };
    });
  </script> 
```

# java - juScanner 使用中的 NullPointerException

> ID：10565323
> 
> 赞同：0
> 
> 时间：2012-05-12T16:08:59.350
> 
> 标签：java, nullpointerexception, jframe

我正在尝试使用扫描仪来编辑我的塔防游戏的级别。但是，它不会将级别（平铺图像）更新为自定义文件的级别（0 是草 1 是石头 -1 什么都不是，等等）。我发现了错误，但我该如何解决它，我需要添加/更改什么来摆脱它？我解决了第一个错误，但现在我明白了：

```
java.lang.NullPointerException
    at Levels.loadLevels(Levels.java:13)
    at Window.define(Window.java:28)
    at Window.paintComponent(Window.java:44) 
```

第 13`Window.room.block[y][x].groundID = loadLevelsScanner.nextInt();` 行： 第 28`levels.loadLevels(new File("levels/level1.level"));` 行： 第 44 行：`define();`

这是扫描仪文件：

```
import java.io.*;
import java.util.*;

public class Levels {
    public void loadLevels(File loadPath) {
        try {
            Scanner loadLevelsScanner = new Scanner(loadPath);

            while(loadLevelsScanner.hasNext()) {

                for(int y=0;y<Window.room.block.length;y++) {
                    for(int x=0;x<Window.room.block[0].length;x++) {
                        Window.room.block[y][x].groundID = loadLevelsScanner.nextInt();
                    }
                }

                for(int y=0;y<Window.room.block.length;y++) {
                    for(int x=0;x<Window.room.block[0].length;x++) {
                        Window.room.block[y][x].airID = loadLevelsScanner.nextInt();
                    }
                }

            }

            loadLevelsScanner.close();

        } catch(Exception e) {

        }
    }
} 
```

这是窗口文件：

```
import javax.swing.*;
import java.awt.*;
import java.awt.image.*;
import java.io.*;

public class Window extends JPanel implements Runnable {

    public Thread thread = new Thread(this);

    public static Image[] tileset_ground = new Image[100];
    public static Image[] tileset_air = new Image[100];

    public static int myWidth, myHeight;

    public static boolean isFirst = true;

    public static Room room;
    public static Levels levels;

    public Window() {
        thread.start();
    }

    public void define() {
        room = new Room();
        levels = new Levels();

        levels.loadLevels(new File("levels/level1.level"));

        for(int i=0;i<tileset_ground.length; i++) {
            tileset_ground[i] = new ImageIcon("resources/tileset_ground.png").getImage();
            tileset_ground[i] = createImage(new FilteredImageSource(tileset_ground[i].getSource(), new CropImageFilter(0, 32 * i, 32, 32)));
        }

        for(int i=0;i<tileset_air.length; i++) {
            tileset_air[i] = new ImageIcon("resources/tileset_air.png").getImage();
            tileset_air[i] = createImage(new FilteredImageSource(tileset_air[i].getSource(), new CropImageFilter(0, 32 * i, 32, 32)));
        }

    }

    public void paintComponent(Graphics g) {
        if(isFirst) {
            define();

            isFirst = false;
        }

        g.clearRect(0, 0, getWidth(), getHeight());

        room.draw(g);
    }

    public void run() { 
        while(true) {

            if(!isFirst) {
                room.physic();
            }

            repaint();

            try {
                Thread.sleep(1);
            } catch(Exception e) {

            }

        }

    }

} 
```

这是房间文件：

```
import java.awt.*;

public class Room {
    public int worldWidth = 40;
    public int worldHeight = 20;
    public int blockSize = 32;

    public Block[][] block;

    public Room() {
        block = new Block[worldHeight][worldWidth];
    }

    public void define() {

    }

    public void physic() {

    }   

    public void draw(Graphics g) {

        for(int y=0;y<block.length;y++) {
            for(int x=0;x<block[0].length;x++) {
                block[y][x] = new Block(x * blockSize, y * blockSize, blockSize, blockSize, Value.groundGrass, Value.airAir);
                block[y][x].draw(g);
            }
        }
    }

} 
```

这是块文件：

```
import java.awt.*;

public class Block extends Rectangle {
    public int groundID;
    public int airID;

    public Block(int x, int y, int width, int height, int groundID, int airID) {
        setBounds(x, y, width, height);

        this.groundID = groundID;
        this.airID = airID;
    }

    public void draw(Graphics g) {
        g.drawImage(Window.tileset_ground[groundID], x, y, width, height, null);

        if(airID != Value.airAir) {
            g.drawImage(Window.tileset_air[airID], x, y, width, height, null);
        }

    }

} 
```

最后这是扫描仪应该读取的自定义文件：

```
1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0

-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:11:55.073

阅读错误信息：

```
java.lang.NullPointerException
    at Levels.loadLevels(Levels.java:11) 
```

Levels.java 的第 11 行是

```
for(int y=0;y<Window.room.block.length;y++) { 
```

所以，要么`Window.room`为空，要么`Window.room.block`为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T16:12:44.563

您还*没有*实例化`Room`，这部分是导致`NPE`: `Window.room`。有两点需要注意：

1.  将所有属性都作为`static`成员是个坏主意
2.  您需要在第一次使用*之前*`static`在某处实例化所有（或实例）属性

 *在您的代码中，您需要确保在`define()`in方法`Window`之前调用`loadLevels()`in 方法`Levels`。*

# android - Android：如何使用 dmtracedump

> ID：10565332
> 
> 赞同：2
> 
> 时间：2012-05-12T16:10:40.273
> 
> 标签：android

尝试使用 dmtracedump 工具。

在命令行中我写： dmtracedump -0 path_to_trace

我得到了错误：无法从跟踪文件中读取 1333896 字节

该工具是否有效？还是我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T10:45:05.837

您是否尝试`dmtracedump`在 Windows 操作系统中使用 ' ' 工具？

我认为“ `dmtracedump`”工具无法处理大文件..在我的情况下.. Windows 7 32 位。

> Cmd> dmtracedump -g abc.png Large_Log.trace
> 
> 错误：无法从跟踪文件中读取 8910087 字节
> 
> 无法读取跟踪。

但是，我成功地在 ubuntu 64 位操作系统中生成了调用图图像文件。

生成的 abc.png 文件大小约为 6 MB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T14:18:56.543

短版：*在 Windows 上，该工具根本不起作用*。[自从traceview](http://developer.android.com/tools/help/traceview.html)可用（无论是从命令行还是从 Eclipse DDMS），它显然不再被维护。

Ubuntu、Mac OSX 等应该没问题，但这可能对你没有多大帮助。

作为旁注，您的示例命令行有一个错字：它是-o，而不是-0。

# java - 如何将在一行中输入的以逗号分隔的数字放入Java中的数组中

> ID：10565335
> 
> 赞同：1
> 
> 时间：2012-05-12T16:11:29.213
> 
> 标签：java, arrays, numbers, comma

如何将用户 eq: 1、3、400、444 等在单行中输入的值放入数组中。我知道在这种情况下我必须声明一个分隔符，即逗号“，”。有人可以帮忙吗

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T16:16:18.210

```
String input = "1, 3, 400, 444";
String[] numbers = input.split("\\s*,\\s*"); 
```

您可以在[`String.split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String))like中使用更简单的分隔符，`","`但更复杂的分隔符`"\\s*,\\s*"`还会去除逗号周围的空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T16:15:38.257

你想使用[split](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)：

```
userInput.split(","); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T16:19:36.557

尝试这个：

```
String line = "1, 3, 400, 444";

String[] numbers = line.split(",\\s+");
int[] answer = new int[numbers.length];

for (int i = 0; i < numbers.length; i++)
    answer[i] = Integer.parseInt(numbers[i]); 
```

现在`answer`是一个数组，字符串中的数字为整数。其他答案只是拆分字符串，如果您需要实际*数字*，则需要转换它们。

```
System.out.println(Arrays.toString(answer));
> [1, 3, 400, 444] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T16:21:56.283

```
String line = "1, 3, 400, 444";
for(String s : line.split(","))
   System.out.println(s); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-12T16:22:43.560

```
String input = "1, 3, 400, 444";
String[] numbers = input.split("\\s*,\\s*"); 
```

这是正确的答案，“\\s*,\\s*”是一个正则表达式，正则表达式对于字符串解析非常有用。

# ruby-on-rails - Rails 3 - 提交后保留参数

> ID：10565336
> 
> 赞同：3
> 
> 时间：2012-05-12T16:11:29.363
> 
> 标签：ruby-on-rails, parameters, ruby-on-rails-3.2

我想在提交后保留我的参数。

在我的 Rails 3.2.0 应用程序中，我有类似的东西：

```
http://0.0.0.0:3000/journals?class_code=11v&subject_name=Math 
```

我有形式：

```
<%= form_for @lesson, :html => {:class => "form-horizontal"} do |f| %>
  <%= field_set_tag do %>
    ....
    <%= f.submit "Create", :class => "btn btn-large btn-success" %>
  <% end %>
<% end %> 
```

我想在之后保留我的参数（`class_code`和`subject_name`）`f.submit`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T16:18:19.833

隐藏字段

```
 ....
  <%= hidden_field_tag :class_code, params[:class_code] %>
  <%= hidden_field_tag :subject_name, params[:subject_code] %>
  <%= f.submit "Create", :class => "btn btn-large btn-success" %>
<% end %> 
```

但是 - 如果这些是您模型的属性，则在控制器的新操作中分配它们

```
def new
  @lesson = Lesson.new(:class_code => params[:class_code], :subject_code => params[:subject_code])
end

# in this case the view code is slightly different
<%= f.hidden_field :class_code %>
<%= f.hidden_field :subject_code %> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T09:20:27.643

要将所有参数存储在一个字段中，您可以使用：

```
<%= hidden_field_tag :parameters, request.query_string  %> 
```

然后你可以在控制器中访问它们，使用：

```
parameters = parse_nested_query(params[:parameters]) 
```

# google-api - 非 Google+ 用户使用 Google API 简单登录？

> ID：10565337
> 
> 赞同：1
> 
> 时间：2012-05-12T16:11:33.880
> 
> 标签：google-api

我刚刚开始尝试使用 Google API。我希望人们能够使用他们的 Google 登录名登录我的网站。我已经下载了站点代码及其示例：

```
<?php
/*
 * Copyright 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
require_once '../src/apiClient.php';
require_once '../src/contrib/apiPlusService.php';

session_start();

$client = new apiClient();
$client->setApplicationName("Google+ PHP Starter Application");
// Visit https://code.google.com/apis/console to generate your
// oauth2_client_id, oauth2_client_secret, and to register your oauth2_redirect_uri.
$client->setClientId('thing here');
$client->setClientSecret('thing here');
$client->setRedirectUri('http://www.pagetworld.co.uk/plustest/index.php');
$client->setDeveloperKey('thing here');
$plus = new apiPlusService($client);

if (isset($_REQUEST['logout'])) {
  unset($_SESSION['access_token']);
}

if (isset($_GET['code'])) {
  $client->authenticate();
  $_SESSION['access_token'] = $client->getAccessToken();
  header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
}

if (isset($_SESSION['access_token'])) {
  $client->setAccessToken($_SESSION['access_token']);
}

if ($client->getAccessToken()) {
  $me = $plus->people->get('me');

  // These fields are currently filtered through the PHP sanitize filters.
  // See http://www.php.net/manual/en/filter.filters.sanitize.php
  $url = filter_var($me['url'], FILTER_VALIDATE_URL);
  $img = filter_var($me['image']['url'], FILTER_VALIDATE_URL);
  $name = filter_var($me['displayName'], FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_HIGH);
  $personMarkup = "<a rel='me' href='$url'>$name</a><div><img src='$img'></div>";

  $optParams = array('maxResults' => 100);
  $activities = $plus->activities->listActivities('me', 'public', $optParams);
  $activityMarkup = '';
  foreach($activities['items'] as $activity) {
    // These fields are currently filtered through the PHP sanitize filters.
    // See http://www.php.net/manual/en/filter.filters.sanitize.php
    $url = filter_var($activity['url'], FILTER_VALIDATE_URL);
    $title = filter_var($activity['title'], FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_HIGH);
    $content = filter_var($activity['object']['content'], FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_HIGH);
    $activityMarkup .= "<div class='activity'><a href='$url'>$title</a><div>$content</div></div>";
  }

  // The access token may have been updated lazily.
  $_SESSION['access_token'] = $client->getAccessToken();
} else {
  $authUrl = $client->createAuthUrl();
}
?>
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <link rel='stylesheet' href='style.css' />
</head>
<body>
<header><h1>Google+ Sample App</h1></header>
<div class="box">

<?php if(isset($personMarkup)): ?>
<div class="me"><?php print $personMarkup ?></div>
<?php endif ?>

<?php if(isset($activityMarkup)): ?>
<div class="activities">Your Activities: <?php print $activityMarkup ?></div>
<?php endif ?>

<?php
  if(isset($authUrl)) {
    print "<a class='login' href='$authUrl'>Connect Me!</a>";
  } else {
   print "<a class='logout' href='?logout'>Logout</a>";
  }
?>
</div>
</body>
</html> 
```

这在我测试时工作正常，但如果我尝试以我的妻子（她是 Gmail 用户但不是 Google+ 用户）身份登录，我会在她的数据上收到 404 错误。

此 API 不适用于普通的 Google 帐户吗？我应该完全尝试其他东西吗？我在他们的网站上找不到普通的 Google 版本。

# python - 跳过初始列表项的更紧凑的方法？（或基于项目的分区列表）

> ID：10565339
> 
> 赞同：2
> 
> 时间：2012-05-12T16:11:54.107
> 
> 标签：python, list

我编写了这个函数来过滤列表以在看到给定项目后显示所有项目。有点类似于内置的字符串方法`str.rpartition(sep)`。我觉得有一种更紧凑的方法可以做到这一点，也许使用列表理解。有任何想法吗？

```
def ignore_until(the_list, match):
    # Ignore all items in the_list prior to match
    found = False
    for index, item in enumerate(the_list):
        if item == match:
            found = True
            break
    if found:
        return the_list[index:]
    else:
        return []

my_list = ['red','orange','yellow','green']
assert ignore_until(my_list, 'yellow') == ['yellow','green']
assert ignore_until(my_list, 'blue') == [] 
```

编辑：

在看到上述问题的答案后，我意识到 6 个答案中有 5 个侧重于`index()`列表数据类型的内置方法。实际上，我需要使用正则表达式，并且没有意识到从我的问题中省略它会影响人们的答案。这是正则表达式代码：

```
import re
def ignore_until(the_list, pattern):
    # Ignore all items in the_list prior to the item containing pattern.
    found = False
    for index, item in enumerate(the_list):
        if re.search(string=item, pattern=pattern):
            found = True
            break
    if found:
        return the_list[index:]
    else:
        return []

my_list = ['red','orange','yellow','green']
assert ignore_until(my_list, 'yellow') == ['yellow','green']
assert ignore_until(my_list, 'blue') == [] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T16:19:41.910

它并没有更紧凑，但是怎么样：

```
def ignore_until(the_list, match):
    try:
        return the_list[the_list.index(match):]
    except ValueError:
        return []

my_list = ['red','orange','yellow','green']

print ignore_until(my_list, 'yellow') # => ['yellow','green']
print ignore_until(my_list, 'blue') # => [] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T16:17:47.143

为什么不使用 python`yourlist.index(match)`查找索引然后应用列表切片。如果找不到匹配项，python`yourlist.index`会抛出错误，因此您需要注意这一点。

```
def ignore_until(yourlist, match):
    try:
        return yourlist[yourlist.index(match):]
    except ValueError:
        return [] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T16:43:47.760

这是一个重现 str.partition 所做的版本（即返回三个列表）：

```
def partition(lst, item):
    if item in lst:
        n = lst.index(item)
        return lst[:n], [item], lst[n+1:]
    else:
        return lst, [], []

print partition(range(10), 7) 
```

这是一个适用于任意迭代的版本，而不是必要的列表：

```
def partition(it, item):
    a = [[]]
    for x in it:
        if x == item and len(a) == 1:
            a.append([item])
            a.append([])
        else:
            a[-1].append(x)
    return a

print partition((x for x in range(10)), 7) 
```

改良版：

```
def partition(it, item):
    a = []
    for x in it:
        if x == item:
            return a, [item], list(it)
        a.append(x)
    return a, [], []

print partition((x for x in range(10)), 7)
print partition((x for x in range(10)), 17) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T16:19:05.260

```
def ignore_until(the_list, match):
    try:
        return my_list[the_list.index(match):]
    except ValueError:
        return [] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-12T16:21:23.367

试试这个：

```
def ignore_until(the_list, match):
    try:
        return [the_list[the_list.index(object):] for object in l if object == match][0]
    except IndexError:
        return [] 
```

有点难读，但很紧凑。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-12T16:22:23.070

您是否考虑过使用 list.index() 方法？它返回指定项的第一个实例的索引（否则它会引发错误）

```
def ignore_until(the_list, match):
    if match in the_list:
        index = the_list.index(match)
        return the_list[index:]

    else:
        return [] 
```

来源：[http ://docs.python.org/tutorial/datastructures.html](http://docs.python.org/tutorial/datastructures.html)

# php - 如何包含php变量url？

> ID：10565343
> 
> 赞同：0
> 
> 时间：2012-05-12T16:12:04.590
> 
> 标签：php, variables, include

目前，作为一个例子，我的一个页面上有这个 php 代码。

```
<?php include("codes/games/scripts/titles/angrybirds.php"); ?> 
```

我将如何更改它以使我的变量：

```
$gametitle = "angrybirds"; 
```

像这样工作：

```
<?php include("codes/games/scripts/titles/$gametitle.php"); ?> 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T16:13:09.103

该代码应该按原样工作，因为`.`不会被解释为变量名的一部分。你可以在这里看到它的输出：http: [//codepad.org/ZbtiOPgB](http://codepad.org/ZbtiOPgB)

但是，为了可读性，我鼓励您使用明确的连接：

```
<?php include("codes/games/scripts/titles/".$gametitle.".php"); ?> 
```

或将您的变量名称包装在`{`and中`}`：

```
<?php include("codes/games/scripts/titles/{$gametitle}.php"); ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T16:14:35.730

```
<?php include('codes/games/scripts/titles/'.$gametitle.'.php'); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T16:14:54.793

或者：

```
<?php include('codes/games/scripts/titles/'.$gametitle.'.php'); ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T16:16:23.267

```
<?php 
$file = 'codes/games/scripts/titles/' . $gametitle . '.php';

if (file_exists($file))
    require_once($file);
?> 
```

# c++ - c++成员函数线程安全

> ID：10565348
> 
> 赞同：1
> 
> 时间：2012-05-12T16:13:01.757
> 
> 标签：c++

我正在编写一个记录消息的函数。我将从不同的线程调用这个打印函数。我的代码如下：

```
MyLog::printLog(const char* s)
    {

            std::string myline(s);
            //m_Mutex is class member and there will be only object for this class
            // shared by all threads
            int ret = pthread_mutex_lock(&m_Mutex);
            if ( ret != 0 )
            {
                    std::cout<<" trying to lock same mutex char* "<<std::endl;

            }

            //code to log message in File

            pthread_mutex_unlock(&m_Mutex);
     } 
```

我的问题是，如果上面的函数是从不同的线程调用的，参数是 "from thread1" ， "from thread 2" ，......是否有可能 const char *s 会混淆打印错误的值。？我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T16:16:53.750

您的函数将按您的预期工作，因为`myline`它是一个局部变量（每个线程都有自己的堆栈，因此会有自己的实例`myline`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T16:16:45.807

如果您从不同的线程调用此函数，并且您对参数所做的任何更改`const char* s`都受到互斥锁的保护，`m_Mutex`那么您会很好，不会有任何混乱。

**编辑**

实际上，当从不同的线程调用时，对这个函数的每次调用都会有它自己的堆栈，并且看到它`const char*`你不能改变你的参数，所以没有必要用互斥锁来保护它。

您`s`的变量是调用它的线程的本地变量，它是`const`.

然后复制到局部变量`myline`绝对不会弄乱任何东西，因为每个线程都有它的调用堆栈，其中存在一个调用`myline`此函数时的实例，它完全独立于任何其他线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T17:52:01.467

这取决于您如何调用该`printLog`函数。如果您传递给函数的地址的字符串被不同的线程改变，那么您可能无法在 log 函数中看到一致的视图。如果你传入一个指向不可变字符串的指针，例如文字，那么你就可以了。

这是一个很好的例子：

```
void from_thread_one()
{
    MyLog::printLog("Hello World");  // immutable string
}

void from_thread_two()
{
    MyLog::printLog("Another text");  // ditto
} 
```

另一方面，这是一个不正常且有比赛的示例：

```
char globalString[] = "This is a really long string";

void from_thread_one()
{
    globalString[5] = 'A';
    MyLog::printLog(globalString);
}

void from_thread_two()
{
    globalString[8] = 'Q';
    MyLog::printLog(globalString);
} 
```

在此设置中，您正在制作字符串的副本（通过`std::string myline(s);`），而指向的数组的内容`s`可以同时在另一个线程中更改。在这种情况下，取消对 char 指针的引用也必须发生在临界区内。

您的设置的基本问题是原始 char 指针没有隐含的语义来告诉用户哪些行为是可接受的，哪些是不可接受的。如果您通过实际`std::string`值传递，您将消除从函数同步访问字符串的不确定性，`printLog`并将责任完全转移到调用者身上。

# php - 推文中的西里尔符号

> ID：10565355
> 
> 赞同：5
> 
> 时间：2012-05-12T16:13:41.143
> 
> 标签：php, api, twitter

我使用 EpiTwitter ，它工作正常，但是当 $varx 有西里尔符号时

```
$varx="Привет";
$status=$Twitter->post_statusesUpdate(array('status' => $varx)); 
```

api 答案

```
'error' => string 'Could not authenticate with OAuth.' 
  'request' => string '/statuses/update.json' 
```

我在 $varx 上尝试了很多变体，例如 urlencode,json_encode，但它发布了这个函数的答案我的文件是没有 BOM 的 utf-8，我也尝试过 ansi

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:02:27.153

Artem，我认为问题不在西里尔符号中。您是否在 twitter (http://twitter.com/oauth_clients) 中注册了您的应用程序？您将获得*consumer key*和*consumer secret*。然后在您的 php 应用程序中定义它：

```
define('TWITTER_CONSUMER_KEY', 'your_consumer_key');  
define('TWITTER_CONSUMER_SECRET', 'your_consumer_secret'); 
```

更多信息[在这里](http://www.jaisenmathai.com/articles/twitter-async-documentation.html#create)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:42:54.640

问题是您没有经过身份验证，首先进行身份验证然后尝试发布更新。我没有使用 EpiTwitter，但这个错误似乎与不同的字符集无关，

# jaxb - jaxb annox 插件不工作

> ID：10565360
> 
> 赞同：2
> 
> 时间：2012-05-12T16:14:31.663
> 
> 标签：jaxb, annox

我在用于 jaxb 生成的 annox 插件上收到以下错误

```
[ERROR] file:/Users/dhiller/Space/ifp-core/framework/src/main/resources/schemas/common_2012_04.xsd[5,136]
org.xml.sax.SAXParseException: Unsupported binding namespace "http://annox.dev.java.net". Perhaps you meant "http://java.sun.com/xml/ns/jaxb/xjc"? 
```

这是我的代码。版本必须以某种方式搞砸？任何人都有一些包含所有版本号的工作示例

```
 <plugin>
            <groupId>org.jvnet.jaxb2.maven2</groupId>
            <artifactId>maven-jaxb21-plugin</artifactId>
            <version>0.8.1</version>
            <executions>
                <execution>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <args>
                    <arg>-XtoString</arg>
                    <arg>-Xequals</arg>
                    <arg>-XhashCode</arg>
                    <arg>-Xcopyable</arg>
                </args>
                <plugins>
                    <plugin>
                        <groupId>org.jvnet.jaxb2_commons</groupId>
                        <artifactId>jaxb2-basics</artifactId>
                        <version>0.6.3</version>
                    </plugin>
                </plugins>
            </configuration>
        </plugin>       
        <plugin>
           <groupId>org.codehaus.mojo</groupId>
           <artifactId>jaxb2-maven-plugin</artifactId>
           <version>1.3.1</version>
           <executions>
              <execution>
                 <goals>
                    <goal>xjc</goal>
                 </goals>
              </execution>
           </executions>
           <configuration>
              <clearOutputDir>false</clearOutputDir>
              <schemaDirectory>${basedir}/src/main/resources/schemas</schemaDirectory>
              <schemaFiles>externalaction_2012_03.xsd,common_2012_04.xsd,utilities_2012_03.xsd</schemaFiles>
              <outputDirectory>${project.build.directory}/generated-sources</outputDirectory>
              <bindingDirectory>${basedir}/src/main/xjb</bindingDirectory>
              <bindingFiles>bindings.xjb.xml</bindingFiles>
              <extension>true</extension>
           </configuration>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-03T07:32:04.107

我认为您缺少`<plugin>`. 试试这个代码：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>jaxb2-maven-plugin</artifactId>
    <version>1.5</version>
    <executions>
        <execution>
            <id>xjc</id>
            <goals>
                <goal>xjc</goal>
            </goals>
            <configuration>
                <extension>true</extension>
                <arguments>-Xannotate</arguments>
            </configuration>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>org.jvnet.jaxb2_commons</groupId>
            <artifactId>jaxb2-basics-annotate</artifactId>
            <version>0.6.4</version>
        </dependency>
        <dependency>
            <groupId>com.sun.codemodel</groupId>
            <artifactId>codemodel</artifactId>
            <version>2.6</version>
        </dependency>
    </dependencies>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:52:21.473

为什么这个帖子是评论。试图发布我在这里发布的答案

[JAXB 外部自定义绑定 XJC 问题 - 解析结果为空节点](https://stackoverflow.com/questions/4785454/jaxb-external-custom-binding-xjc-issue-parsing-results-in-empty-node/10565944#10565944)

# jquery-mobile - 在 android 设备中使用带有 jQ uery Mobile 的远程链接时出现 411 Length Required 错误

> ID：10565361
> 
> 赞同：0
> 
> 时间：2012-05-12T16:14:33.097
> 
> 标签：jquery-mobile, ruby-on-rails-3.1, passenger, thin, webrick

当我在 android 设备中打开一个带有 put/post ajax(remote) 链接的 jQuery Mobile Web 并尝试点击这些链接时，我收到了这个错误。在 WebRick 和 Passenger 上运行的 Rails 3.1 会出现问题。如果我使用薄，问题似乎消失了。不过，我更喜欢将Passenger 用于生产服务器。

我应该在Passenger中调整什么来消除这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:56:13.853

事实证明，jQuery Mobile + Android Webkit 的组合存在一些问题，导致带有空正文的 POST 请求引发此错误。我对 Rails ujs 进行了破解，以使用时间戳 ( `{ timestamp: (new Date()).getTime() }`) 的哈希作为任何具有空正文的非 GET 请求的正文，问题就消失了。

# android - 单击android项目中的按钮后如何在地图上获取当前位置？

> ID：10565365
> 
> 赞同：0
> 
> 时间：2012-05-12T16:14:42.847
> 
> 标签：android, android-maps

我是android新手，我需要你的帮助。我有两个输入纬度和经度的编辑文本和一个按钮搜索。我的问题是单击按钮搜索后如何在地图上显示位置？请在此处提供一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:14:57.327

据我了解，您希望将 MapView 设置为用户放入 EditText 的坐标。

```
float latitude = new Float(lat.getText().toString()); //Check for errors here
float longitude = new Float(long.getText().toString()); //Check for errors here

//Create a GeoPoint, which takes lat/long in microdegrees:
GeoPoint point = new GeoPoint((int)(lat * 1E6), (int)(lng * 1E6));

//Use MapController to move your mapview
MapController controller = yourMapView.getController();
controller.animateTo(point);
//Or, without the scroll animation:
//controller.setCenter(point); 
```

您可以在此处阅读有关 MapView 和 MapController 类的更多信息： [https ://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapController](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapController) [https://developers.google.com/maps /documentation/android/reference/com/google/android/maps/MapView](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:38:20.697

```
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_COARSE);
criteria.setPowerRequirement(Criteria.POWER_LOW);
LocationManager locManager =
    (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
if(locManager.getBestProvider(criteria,true) != null){
    Location myLocation= locManager.getLastKnownLocation(locManager.getBestProvider(criteria, true));
    String latitude = Double.toString(myLocation.getLatitude());
    String longitude = Double.toString(myLocation.getLongitude());
    String altitude = Double.toString(myLocation.getAltitude());
} 
```

# java - 安卓标签太大了

> ID：10565366
> 
> 赞同：-4
> 
> 时间：2012-05-12T16:14:48.117
> 
> 标签：java, android

## 按照一组模组的建议改写一个老问题。

为什么android标签太大了，特别是在这么小的设备上？例如。[http://developer.android.com/resources/tutorials/views/hello-tabwidget.html](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)

我正在将一个 java Swing 应用程序转换为 android，而选项卡给我带来了最大的麻烦。除了看起来丑陋之外，每个页面似乎也需要单独的活动。我的意思是对于 JtabbedPane，我所做的只是将任何组件放在单独的 JPanel 上并将它们添加到主机窗格中。

## 谢谢

首先，我相信我的两个问题在上面的帖子中都清楚地说明了，但我还是会改写

a) 与其他组件相比，为什么默认的 android 选项卡如此之大。它占用了有限的可用空间中的大量空间。如果要让用户感到舒适，为什么其他组件不一样大？

b) [已回答]为什么每个页面都需要启动一个单独的活动。例如，在我的应用中，我只需要显示一些聊天。这已经得到回答，即使用片段。

希望现在足够清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:06:04.880

关于多活动问题，请查看自 android 3.x 以来 google 提供的 Fragments 解决方案[。](http://developer.android.com/guide/topics/fundamentals/fragments.html)他们还为较旧的 android 设备提供了兼容性包（需要 android API4+，这是绝大多数）。

他们甚至有一个与 android 市场应用程序（又名“play store”）非常相似的选项卡示例，因此您只需查看示例即可。

关于标签大小，您可以根据需要对其进行自定义（例如[此处](http://joshclemm.com/blog/?p=136)），但请注意，这要求用户实际上能够触摸它，即使是大手指... :)

# linux - 为什么我无法访问此文件夹？

> ID：10565367
> 
> 赞同：1
> 
> 时间：2012-05-12T16:14:49.223
> 
> 标签：linux, directory, ext4, home-directory

不久前我买了一个 1TB USB 外置驱动器。我在 Ubuntu 中将其格式化为 ext4，并从几台机器上复制了一堆文件/文件夹，分别复制到 /home/machinename/whatever。

在某些时候，我在其上运行了一个 chmod -R shell 命令来更改权限。那是几个月前的事了，我不记得我输入了什么，但它是驱动器，所以我只能以 root 身份访问它的 /home 文件夹。这不是问题，因为我仍然可以访问所有内容，但今天我决定尝试修复它。

我以 root 身份进入我的 shell，进入该驱动器并输入：

```
chown -R rick:rick ./
chmod -R 666 ./ 
```

它似乎奏效了。该主目录及其中的所有其他内容现在都显示为 rw ：

```
rick@rick64:/media/aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee$ ls -l
drw-rw-rw- 7 rick rick 4096 2012-03-04 13:08 home 
```

因此，如果我尝试使用 shell 访问该目录，我会得到：

```
rick@rick64:/media/aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee$ ls -l
drw-rw-rw- 7 rick rick 4096 2012-03-04 13:08 home
rick@rick64:/media/aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee$ cd home
bash: cd: home: Permission denied
rick@rick64:/media/aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee$ _ 
```

当我使用 nautilus 访问它时，我可以在 /home/ 文件夹中看到多个机器名称，但它们都带有一个文件图标。我可以右键单击它们并选择“属性”，但它不会让我看到权限。

我很困惑。为什么我无法访问该文件夹？我是楼主？我什至是组。我有读写权限。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T16:18:05.200

您既不尝试读取（列出）也不尝试写入（创建新条目）目录。您想输入它，因此您需要（在目录的情况下稍微命名错误）e`x`执行权限。

# ruby-on-rails - Rails：在初始化文件中创建哈希并使用它

> ID：10565369
> 
> 赞同：0
> 
> 时间：2012-05-12T16:15:09.190
> 
> 标签：ruby-on-rails, ruby

我正在使用初始化程序目录中的一个文件来声明用于应用程序不同部分的常量。

```
FIRST_STR = "First Name"
LAST_STR = "Last Name"
new_user_hash = Hash.new
new_user_hash[ "first" ] = FIRST_STR
new_user_hash[ "last" ] =  LAST_STR 
```

`FIRST_STR`我在应用程序的不同部分使用和没有问题`LAST_STR`，但是当我尝试使用`new_user_hash`，我收到以下错误消息：

> #<#:0x007f8da5752da0> 的未定义局部变量或方法“new_user_hash”

是否不可能在一个文件中定义/声明哈希并在另一个文件中使用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T16:51:14.560

我认为您可能遇到了范围界定——<code>new_user_hash 是本地的，可能对应用程序的其余部分不可用。如果您将其设为全局（通过调用它`$new_user_hash`），它将可用。在 和 的情况下`FIRST_STR`，`LAST_STR`它们是有效的全局常量。

将您的代码更新为：

```
$new_user_hash = { "first" => FIRST_STR, "last" => LAST_STR } 
```

或者

```
NEW_USER_HASH  = { "first" => FIRST_STR, "last" => LAST_STR } 
```

而且您将能够访问`$new_user_hash`或`NEW_USER_HASH`从您的应用程序的其他部分。

另一种策略是定义一个模块：

```
module MyAppConfig
  NEW_USER_HASH = { "first" => FIRST_STR, "last" => LAST_STR } 
end 
```

然后在其他地方你可以通过在它前面加上模块名称来访问它：

```
MyAppConfig::NEW_USER_HASH["first"] 
```

这是一种更被接受的方法，因为它不会创建更多的全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:38:22.993

您应该使用配置管理 gem：[https ://www.ruby-toolbox.com/categories/Configuration_Management](https://www.ruby-toolbox.com/categories/Configuration_Management)

# asp.net-mvc - MVC3 Contrib 在剃须刀页面中不起作用，但在控制器中很好

> ID：10565375
> 
> 赞同：1
> 
> 时间：2012-05-12T16:15:53.617
> 
> 标签：asp.net-mvc, mvccontrib

我已经安装了 MVC3Contrib .. 奇怪的是，这些示例表明我可以使用它们来呈现剃须刀页面中的链接，如下所示：

```
@( Html.ActionLink<HomeController>(c => c.Index(), "Go home") ) 
```

这不知何故对我不起作用..虽然，在我的控制器中，我可以做到

```
return new RedirectToRoute<MyController>(c => c.Index()); 
```

很好..我得到的错误是`The non generic link ActionLink cannot be used with type arguments`

好像没有安装contrib..事实上，我什至没有在intellisense中看到mvc未来操作链接选项

![在此处输入图像描述](../Images/6142824b50177d38299da4833d7c7506.png)

我只是不知道为什么会这样，我需要在这里做些什么吗？

如果您需要任何其他信息，请询问，我不知道我还应该在这里提供什么..

* * *

**编辑**
哦，顺便说一句，我正在使用 MVC 区域，如果这很重要，我有大约 3 个区域，然后是主控制器等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T08:04:25.310

确保`Microsoft.Web.Mvc`命名空间在定义扩展方法的范围内：

![在此处输入图像描述](../Images/239931936056c7c3cd35255ae40f3279.png)

或将其添加到文件的`<namespaces>`部分，`~/Views/web.config`以便在所有视图中引入此命名空间：

```
<system.web.webPages.razor>
  <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <pages pageBaseType="System.Web.Mvc.WebViewPage">
    <namespaces>
      <add namespace="System.Web.Mvc" />
      <add namespace="System.Web.Mvc.Ajax" />
      <add namespace="System.Web.Mvc.Html" />
      <add namespace="System.Web.Routing" />
      <add namespace="Microsoft.Web.Mvc" />
    </namespaces>
  </pages>
</system.web.webPages.razor> 
```

我想在您添加的控制器代码中，`using MvcContrib.ActionResults;`这就是您能够看到`RedirectToRouteResult<T>`可用类的原因。

# iphone - 如何将模态转场动画设置为与推送转场动画相同？

> ID：10565379
> 
> 赞同：2
> 
> 时间：2012-05-12T16:16:44.813
> 
> 标签：iphone, ios, animation, segue

苹果提供了四种带有模态segue的动画。但这两个都不是我最喜欢的，我更喜欢push segue动画之类的动画？我怎么能存档呢？是否有任何用于具有不同动画的自定义 segue 的开源代码？提前致谢！

附言。实际上，我有一个带有多个子视图的 tabView，其中一个是 tableView，每个单元格都会在详细视图中钻取。推送详细视图是正常的，但我不希望标签栏也进入详细视图。然后我选择模态的详细视图。但我更喜欢推送动画。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T17:20:58.947

看到你的评论后，我想这会有所帮助。有一个设置可以在推送时隐藏您的 tabBar，而不必使用模态转换来伪造推送。

![在此处输入图像描述](../Images/801ce5cb8c6a6bce72e1a714c86186d7.png)

在代码中也可以更容易。推送 UIView 时查看此 SO [Hiding UITabBar](https://stackoverflow.com/questions/675887/hiding-uitabbar-when-pushing-a-uiview)

# jquery - 使用 Jquery 控制 div 内的表单提交操作

> ID：10565392
> 
> 赞同：1
> 
> 时间：2012-05-12T16:18:13.450
> 
> 标签：jquery, forms, html, fadein, fadeout

我正在尝试将我网站中的所有内容加载到具有渐变效果的 div 中，我制作了一个 jquery 函数来处理 div 内的所有点击事件，例如链接、按钮和表单提交。除了表单提交外，一切正常，例如我的一个页面中有这个表单：

```
<form name="form" method="post" action="">
                <p>Enter a Start date for review <font color="red"><b>(mm/dd/yyyy)</b></font>
                    :
                    <input type="text" name="StartDate" id="startDate" maxlength="10" size="15">
                    <br /> <label id="label1" style="color: red"></label>
                <p>Enter a deadline for review <font color="red"><b>(mm/dd/yyyy)</b></font>
                    :
                    <input type="text" name="txtDate" id="txtDate" maxlength="10" size="15">
                    <br /> <label id="label2" style="color: red"></label>
                </p>
                </br>
                </br>
                </br>
                <input type ="submit" name="submitCrit" value="submit"></input></br>
            </form>
            <?php
            if (isset($_POST['txtDate']) && isset($_POST['StartDate'])) { // checking if values passed
                $todays_date = date("m/d/Y"); // getting today's date to check with it
                $today = strtotime($todays_date); // parsing it to timestamp
                $to = date('Y-m-d', str_replace('-', '/', $today)); // replacing / with -
                $date = strtotime($_POST['txtDate']); // parsing enddate to timestamp
                $newdate = date('Y-m-d', str_replace('-', '/', $date)); // replacing / with -
                $startdate = strtotime($_POST['StartDate']); // parsing startdate to timestamp
                $startnewdate = date('Y-m-d', str_replace('-', '/', $startdate)); // replacing / with -
                if ($newdate != null && $newdate > $to
                        && $startnewdate != null && $startnewdate < $newdate
                        && $startnewdate > $to) {
                    $con = mysql_connect('localhost', 'root', ""); //db connection
                    if (!$con) {
                        die('connection error');
                    } else {
                        mysql_select_db("mydb", $con);
                        $query = "
                        UPDATE conference
                        SET rev_startDate = '{$startnewdate}', rev_endDate = '{$newdate}'
                        WHERE conference_id = {$confID}
                        ";
                        echo '<script type="text/javascript">'
                        , 'ChangeText("deadline set successfuly");'
                        , '</script>';

                        if (!mysql_query($query, $con)) {
                            echo "query not run";
                        }
                        mysql_close($con);
                    }
                } else {
                    echo '<script type="text/javascript">'
                    , 'ChangeText("invalid deadline");'
                    , '</script>';
                }
            }
            ?> 
```

和这个处理点击事件的函数：

```
$(document).ready(function() {
               $('#mydiv').delegate('form', 'submit', function() {
                    var page = $(this).attr('action');
                    if (page == "") {
                        return true;
                    }
                    else {
                    $('#mydiv').fadeOut('slow',function() {
                    $('#mydiv').load(page, function () {
                        $(this).fadeIn('slow');
                });
                });
                return false;
                    }
          });
          return false;
          }); 
```

但是，当我单击提交时，div 中只加载了空白页面，并且 php 脚本不起作用，并且网站中的所有其他表单都会出现同样的问题。有谁知道问题出在哪里？

# javascript - 如何通过 Facebook JS-SDK 注销？

> ID：10565395
> 
> 赞同：0
> 
> 时间：2012-05-12T16:18:31.353
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我需要从我的应用程序中退出 Facebook。我试图看其他帖子，但我没有找到我需要的...

我已经实现了一个类似的链接`<a href="javascript: FB_LOGOUT()">LOGOUT</a>`并且我已经编写了一个函数，但是它不起作用......我尝试了这 3 种方法，但它们都不起作用。

```
function FB_LOGOUT(){
//FB.logout(function(response) {
//    window.location.reload(true);
//});

//FB.Event.subscribe('auth.logout', function(response) {
//  window.location.reload();
//});

//FB.logout(function()
    //{
    //    top.location.href = 'http://google.com/';
    //});
 } 
```

你能告诉我如何从我的应用程序中退出 Facebook 吗？请解释你认为我最好知道的一切，我在这个领域真的很无知......谢谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-04T13:15:45.743

对不起，我不能写评论，试试这个

```
FB.logout(function(response) {
  FB.Auth.setAuthResponse(null, 'unknown');

}); 
```

这是指 [Facebook JS SDK FB.logout() 不会终止用户会话](https://stackoverflow.com/questions/8817569/facebook-js-sdk-fb-logout-doesnt-terminate-user-session)

# css - 使用 GWT 为小部件设计样式：将样式规则放在哪里？

> ID：10565397
> 
> 赞同：0
> 
> 时间：2012-05-12T16:18:34.500
> 
> 标签：css, gwt, styling

我的一个小部件包含一个以编程方式生成的`ToggleButton`s 列表。我想为它们设计样式，但我不确定最好的方法是什么。GWT 提供`.gwt-ToggleButton-up`了`.gwt-ToggleButton-Down`我可以覆盖的规则。我可以通过将我的规则放在一个`style.css`文件中并从我的 HTML 文件中引用它来覆盖这些（尽管这种方法已被弃用）。

如果我在包含按钮的 UiBinder 中包含以下内容，则不会应用样式：

```
<ui:style>
  .gwt-ToggleButton-down {
      color: red;
  }

  .gwt-ToggleButton-up {
      color: red;
  }
</ui:style> 
```

（我猜这与 GWT 如何混淆 CSS 名称有关。）

我还可以创建一个新的 UiBinder 组件，它只是包装`ToggleButton`以应用我自己的样式规则，但这可能会不必要地麻烦。

我应该完全忽略这些`.gwt-ToggleButton-*`规则并定义我自己的规则，并应用它们`toggleButton.addStyleName()`吗？还是另一种方法更可取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:08:08.150

`@external`如果那是您要走的路线，将防止混淆。

```
<ui:style>
  @external gwt-ToggleButton-down, gwt-ToggleButton-up;
  .gwt-ToggleButton-down {
      color: red;
  }
  .gwt-ToggleButton-up {
      color: red;
  }
</ui:style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:11:07.050

您需要将所有样式放入位于**war文件夹下的****.css**文件中。

# c# - 雅虎管理的财务报表

> ID：10565402
> 
> 赞同：-2
> 
> 时间：2012-05-12T16:19:40.800
> 
> 标签：c#, .net, finance, yahoo-finance

有没有办法从雅虎管理中获取资产负债表/损益表/等？如果没有，有人知道任何替代方案吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-13T02:29:35.180

```
using MaasOne.Finance.YahooFinance

    CompanyStatisticsDownload dl = new CompanyStatisticsDownload();
    dl.Settings.ID = "YHOO";
    Response<CompanyStatisticsResult> resp = dl.Download();
    if (resp.Connection.State == ConnectionState.Success)
    {
        CompanyFinancialHighlights hl = resp.Result.Item.FinancialHighlights;
        double ebitda = hl.EBITDAInMillion * Math.Pow(10, 6);
        //...
    } 
```

# c++ - 作业：一组位的快速操作（表示为字符数组）

> ID：10565405
> 
> 赞同：1
> 
> 时间：2012-05-12T16:20:15.697
> 
> 标签：c++, search

在现场采访街上有一些练习题，占用了我很多时间……

以下代码仅跨越 8/11 测试用例。其余超过时限。如果您能提出一些优化建议，我将不胜感激

问题如下......

```
there are two binary numbers of length n             
there are three kinds of operation     
set_a idx x : it sets A[idx] = x   
set_b idx x : sets B[idx] = x   
get_c idx : Print C[idx], where C=A+B, and 0<=idx

Sample Input
5 5
00000
11111
set_a 0 1
get_c 5
get_c 1
set_b 2 0
get_c 5

Sample Output
100 
```

所以我需要优化get_c操作

```
void reverse(char*a, int len)
{
     //this function reverses the string
}

void get_c(int i)
{
     k = i-1;
     f = 0;
     while (k>=0)
     {
           if (a[k] == '1' && b[k] == '1')
           {
              f = 1;
              break;
           }
           else if (a[k] == '0' && b[k] == '0')
                break;
           --k;
     }
     if (f==0)
        cout<<(a[i] == b[i]?0:1);
     else if (f==1)
          cout<<(a[i] == b[i]?1:0);
}

int main()
{
    scanf("%d %d", &n, &q); // n = number of bits in number, q = number of operations
    // enter the strings a and b
    reverse(a, n);
    reverse(b, n);
    while (q--)
    {
          scanf("%s", query);
          scanf("%d", &idx);
          if (query is get_c)
          {
             get_c(idx);
          }
          else if (query is set_a)
          {
               cin>>x;
               a[idx] = x;
          }
          else if (query is set_b)
          {
               cin>>x;
               b[idx] = x;
          }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T23:58:47.823

似乎您已经使用数组实现了二进制数，而将它们简单地实现为数字并使用位掩码和位移位查询/修改它们会更快。这将消除您在`get_c`;中使用迭代方法的需要。您的`get_c`函数将是恒定时间而不是线性时间。

# c# - 操作 XML 文档的属性

> ID：10565409
> 
> 赞同：1
> 
> 时间：2012-05-12T16:21:03.630
> 
> 标签：c#, xml

我有一个以下通用格式的 XML 文档：

```
<Alpha>
    <Beta>
        <Gamma>
            <Delta id="1">
                ...
            </Delta>
            <Delta id="2">
                ...
            </Delta>
            ...
         </Gamma>
    </Beta>
</Alpha> 
```

我正在寻找一种方法来查找所有`Delta`元素（无论有多少）并将`id`属性的值增加特定值，`x`然后保存文档。实现这一目标的最快方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T16:33:24.097

在最短的代码量方面最快？

```
XDocument doc = XDocument.Load("test.xml");
foreach (var id in doc.Descendants("Delta").Attributes("id"))
{
    id.SetValue((int) id + 1);
}
doc.Save("test.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:36:11.447

您可以使用 LINQ to Xml（即您使用的是什么 .net 版本？？）。如果是这样，那么使用 Linq 就很容易了：

```
XDocument doc = XDocument.Load(source);
foreach (var deltaNode in doc.Descendants().Where(e => e.Name.LocalName == "Delta"))
    deltaNode.SetAttributeValue("id", "Whatever"); 
```

# mailman - 未为用户 x@yz 设置批准位，但来自 x@yz 的消息需要批准。为什么？

> ID：10565410
> 
> 赞同：0
> 
> 时间：2012-05-12T16:21:05.283
> 
> 标签：mailman

见附图

我在邮件列表中有一个用户列表。他们的批准位已关闭，但邮递员无论如何都需要批准。我希望不在名单上的人无法发送消息，而名单上的人则在未经批准的情况下发送消息。

谢谢！

![批准有点偏离，但要求批准，为什么？](../Images/d95bdbf54eb913bfbb258686a22fc023.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:48:55.753

我将下一页上的值设置为 no 并且它似乎工作......现在：

[https://example.com/cgi-bin/mailman/admin/email-example.com/?VARHELP=privacy/sender/default_member_moderation](https://example.com/cgi-bin/mailman/admin/email-example.com/?VARHELP=privacy/sender/default_member_moderation)

在上面的 URL 中，将 example.com 更改为您的实际域，将 email-example.com 更改为您邮递员列表的实际电子邮件。例如，a@b.com 应该是 ab.com

# web-services - 如何集成 ServiceStack 和 DotNetNuke 以在 DNN 身份验证的上下文中提供 REST 服务？

> ID：10565412
> 
> 赞同：2
> 
> 时间：2012-05-12T16:21:33.187
> 
> 标签：web-services, asp.net-mvc-2, dotnetnuke, servicestack

DotNetNuke 6.2 有一个服务框架，可以做类似的事情 [http://www.dotnetnuke.com/Resources/Wiki/Page/DotNetNuke-6-2-Developer-Quick-Start.aspx#Services_Framework_18](http://www.dotnetnuke.com/Resources/Wiki/Page/DotNetNuke-6-2-Developer-Quick-Start.aspx#Services_Framework_18)

> > 服务框架最大的便利是身份验证、授权和建立 DotNetNuke 上下文都内置。

如何将 ServiceStack (http://servicestack.net) 与 DotNetNuke 集成以提供身份验证、授权和建立 DotNetNuke 上下文？任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T16:36:41.593

我编写了 DNN 实现，所以我可以告诉你它是如何工作的。我不知道 ServiceStack 的细节，所以我不能告诉你如何在那里应用它。当我第一次着手构建它时，我预计它会比实际复杂得多。你真的只需要少数调用核心。

在 DnnController 初始化期间建立上下文和身份验证。DNN 完全开源的一大优点是所有这些细节都是公开的。这是[DnnController.cs的链接](http://dotnetnuke.codeplex.com/SourceControl/changeset/view/67071#1116564)

以下是最有趣的部分：

```
 protected override void Initialize(RequestContext requestContext)
    {
        base.Initialize(requestContext);

        LoadDnnContext(requestContext.HttpContext);
        AuthenticateRequest(requestContext.HttpContext, PortalSettings.PortalId);
    }

    protected virtual void AuthenticateRequest(HttpContextBase context, int portalId)
    {
        if (!context.Request.IsAuthenticated)
        {
            BasicAuthenticator.Instance.TryToAuthenticate(context, portalId);
        }

        if (!context.Request.IsAuthenticated)
        {
            DigestAuthenticator.Instance.TryToAuthenticate(context, portalId);
        }

        MembershipModule.AuthenticateRequest(context, true /*allowUnknownExtension*/);
    }

    protected virtual void LoadDnnContext(HttpContextBase context)
    {
        var domainName = TestableGlobals.Instance.GetDomainName(context.Request);
        var alias = TestablePortalAliasController.Instance.GetPortalAliasInfo(domainName);

        int tabId;
        ValidateTabAndModuleContext(context, alias.PortalID, out tabId);

        var portalSettings = new PortalSettings(tabId, alias);

        context.Items["PortalSettings"] = portalSettings;
    } 
```

服务框架将所有路由强制为 {unique portal path}/DesktopModules/{ModuleName}/API/{url} 形式。唯一的门户路径对于轻松识别请求发送到的门户非常重要。在大多数情况下，DNN 将允许 /Default.aspx?portalid=n 形式的 URL，但服务框架不会接受，它要求请求路径与门户别名匹配，例如 mysite.com/childportal/...要求确保 GetDomainName() 将起作用。

我应该提到 TestableXXX 类位于 Internal 命名空间中，因此不是官方公共 API 的一部分，并且会在版本之间发生重大变化。类上的大多数方法都有一个公共模拟，它更难模拟，但在其他方面是等效的。如果您在升级服务器之前进行小的代码修复是合理的，请随意使用 Testables。如果您无法完全控制服务器的升级，则应避免使用 .Internal 命名空间。

服务框架支持针对特定模块实例的权限进行身份验证。绑定到模块的服务必须提供选项卡和模块 ID。如果您的服务不是特定于模块的，您可以忽略它，并在 PortalSettings 中使用 tabid 为 -1。

ServiceFramework 有自己的基本和摘要身份验证实现，因为 MVC 不提供它们。我相信 ServiceStack 确实提供了 Basic 和 Digest，所以您可能只需要调用 MembershipModule.AuthenticateRequest()。

# jquery - 带有缩略图的 jQuery 工具库需要滑动而不是淡出

> ID：10565414
> 
> 赞同：0
> 
> 时间：2012-05-12T16:21:50.177
> 
> 标签：jquery, jquery-tools

我目前正在尝试在 jQuery 工具上获取此图像库以切换滑动库而不是淡出。

[http://jquerytools.org/demos/scrollable/gallery.html](http://jquerytools.org/demos/scrollable/gallery.html)

我很好奇我将如何去做。

```
$(".items img").click(function() {
// see if same thumb is being clicked
if ($(this).hasClass("active")) { return; }

// calclulate large image's URL based on the thumbnail URL (flickr specific)
var url = $(this).attr("src").replace("_t", "");

// get handle to element that wraps the image and make it semi-transparent
var wrap = $("#image_wrap").fadeTo("medium", 0.5);

// the large image from www.flickr.com
var img = new Image();

// call this function after it's loaded
img.onload = function() {

    // make wrapper fully visible
    wrap.fadeTo("fast", 1);

    // change the image
    wrap.find("img").attr("src", url);

};

// begin loading the image from www.flickr.com
img.src = url;

// activate item
$(".items img").removeClass("active");
$(this).addClass("active");

// when page loads simulate a "click" on the first image
}).filter(":first").click(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:06:17.317

尝试`var wrap = $("#image_wrap").animate("width", 0);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:29:09.133

您可以使用以下事件之一，

```
 $(<element>).slideIn(); // display image
 $(<element>).slideOut(); //remove image 
```

# cuda - 将 CUDA 纹理绑定到浮动图像

> ID：10565420
> 
> 赞同：2
> 
> 时间：2012-05-12T16:22:19.707
> 
> 标签：cuda, textures

我在 C 端有一个 1 通道的浮动图像，如下所示：

```
int width, height;
float* img; 
```

我想将此图像传递给 CUDA 纹理。我正在阅读[NVIDIA CUDA C 编程指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)（第 42-43 页）并使用教程，编写了如下代码：

> **主.cpp：**

```
int main()
{
     int width, height;
     float* h_Input;
     ReadImage(&h_Input, &width, &height); // My function which reads the image.
     WriteImage(h_Input, width, height); // works perfectly...

     float* h_Output = (float*) malloc(sizeof(float) * width * height);

     CalculateWithCuda(h_Input, h_Output, width,height);
     WriteImage(h_Output, width, height); // writes an empty-gray colored image.... *WHY???* 
} 
```

> **内核.cu：**

```
texture<float, cudaTextureType2D, cudaReadModeElementType> texRef; // 2D float texture

__global__ void Kernel(float* output, int width, int height)
{
    int i = blockIdx.y * blockDim.y + threadIdx.y; // row number 
    int j = blockIdx.x * blockDim.x + threadIdx.x; // col number

    if(i < height && j < width)
    {
           float temp = tex2D(texRef, i + 0.5f, j + 0.5f);
           output[i * width + j] = temp ;
    }
} 

void CalculateWithCuda(const float* h_input, float* h_output, int width, int height)
{
    float* d_output;

    // Allocate CUDA array in device memory
    cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc(32, 0, 0, 0,cudaChannelFormatKindFloat);
    cudaArray* cuArray;
    cudaMallocArray(&cuArray, &channelDesc, width, height);
    // Copy to device memory some data located at address h_data in host memory 
    cudaMemcpyToArray(cuArray, 0, 0, h_input, width * height * sizeof(float) , cudaMemcpyHostToDevice);
    // Set texture parameters
    texRef.addressMode[0] = cudaAddressModeWrap;
    texRef.addressMode[1] = cudaAddressModeWrap;
    texRef.filterMode     = cudaFilterModeLinear;
    texRef.normalized     = true;

    // Bind the array to the texture reference
    cudaBindTextureToArray(texRef, cuArray, channelDesc);

    // Allocate GPU buffers for the output image ..
    cudaMalloc(&d_output, sizeof(float) * width * height);

    dim3 threadsPerBlock(16,16);
    dim3 numBlocks((width/threadsPerBlock.x) + 1, (height/threadsPerBlock.y) + 1);

    Kernel<<<numBlocks, threadsPerBlock>>>(d_output, width,height);

    cudaDeviceSynchronize();

    // Copy output vector from GPU buffer to host memory.
    cudaMemcpy(h_output, d_output, sizeof(float) * width * height, cudaMemcpyDeviceToHost);

    // Free GPU  memory ...
} 
```

正如我在代码中所说；这个内核必须从纹理中读取并给我与输出相同的图像。但是，我正在为输出拍摄一张空的（灰色）图像。我只是在教程中实现了相同的方式，为什么这个纹理不起作用？

如果有人向我展示解决此问题的方法，我将不胜感激...

> PS：当然，这不是所有的代码。我只是复制了必要的部分。如果您需要其他详细信息，我也会支持。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T18:25:15.970

当您使用归一化坐标时，通过从 0 到 1（不包括）的坐标访问纹理。您忘记将基于 threadIdx 的整数坐标转换为标准化坐标。

```
unsigned int x = blockIdx.x * blockDim.x + threadIdx.x;
unsigned int y = blockIdx.y * blockDim.y + threadIdx.y; 
float u = x / (float)width;  
float v = y / (float)height; 
```

# php - 脸书 PHP API

> ID：10565422
> 
> 赞同：1
> 
> 时间：2012-05-12T16:22:23.610
> 
> 标签：php, facebook, api

我正在运行这个简单的代码：

```
<?php
$keyword = 'iPhone';
$graph_url = "https://graph.facebook.com/search?";
$graph_url .= "&type=post";
$graph_url .= "&q=$keyword";
$results = file_get_contents( $graph_url );

$json = json_decode($results);

foreach($json->data as $show ) {
echo '<img src="'.$show->picture.'" alt="some_text"/><br />';
echo $show->from->name . "<br />";
echo $show->message . "<br />";
echo $show->created_time . "<br />";
echo "<hr>";
}
?> 
```

它正在检索关键字“iPhone”的所有 Facebook 帖子，为什么有些内容是空的，Facebook 个人资料图片并未显示在所有帖子上，我将如何限制帖子。我该如何解决这个问题，有人指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:43:30.737

```
<?php
$keyword = 'iPhone';
$graph_url = "https://graph.facebook.com/search?";
$graph_url .= "&type=post";
$graph_url .= "&q=$keyword"; 
```

//添加这些行

```
 $graph_url .= "&fields=from,caption,created_time,picture";
 $graph_url .= "&limit=$number"; 
```

//

$results = file_get_contents($graph_url);

```
$json = json_decode($results);

foreach($json->data as $show ) {
echo '<img src="'.$show->picture.'" alt="some_text"/><br />';
echo $show->from->name . "<br />";
echo $show->caption. "<br />";
echo $show->created_time . "<br />";
echo "<hr>";
}
?> 
```

# perl - 延迟测量

> ID：10565423
> 
> 赞同：-1
> 
> 时间：2012-05-12T16:22:24.587
> 
> 标签：perl

我想测量从 Web 服务器下载图片所需的时间。我想使用 Perl、python 或 PHP，但更喜欢 Perl。时间以毫秒为单位。我会从 HTML 运行脚本。

谢谢

乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:27:06.160

Perl 不能在浏览器中运行，如果这是您说“来自 HTML”时所指的内容。

我建议您查看[Javascript 中的 onload 事件。](http://www.w3schools.com/jsref/event_img_onload.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:47:54.293

你会从 HTML 运行脚本吗？你的意思是你会调用某种CGI？

您的“问题”在任何具有某种阻塞 HTTP GET 请求方法的编程语言中都应该非常直截了当；例如在 Perl 中：

```
use LWP::Simple;
use Time::HiRes qw/gettimeofday tv_interval/;

my $b = [gettimeofday];
get("http://stackoverflow.com/questions/10565423/latency-measurement");

print "Took me: ",  tv_interval($b), "\n"; 
```

但这并不代表下载文件需要多长时间。它仅显示 GET 请求的特定实现（通过 LWP::Simple）花费了多长时间。如果你真的只想要请求的时间，你将不得不更深入地挖掘。（虽然我怀疑它有很大的不同......）

# php - Android 和 PHP 网络服务之间的安全性

> ID：10565424
> 
> 赞同：0
> 
> 时间：2012-05-12T16:22:25.107
> 
> 标签：php, android, security, rsa, public-key-encryption

我有一个 Android 应用程序和一个应用内购买。

我想通过 php 文件将购买它的用户的 user_id 发布到我的远程数据库中。

我知道一些聪明的用户可以监听网络并查看我的 php 服务的地址。他们甚至可能会找出我发送的变量。我当然知道如何加密 user_id。我可以使用 RSA 或 AES 来做到这一点。但我需要在应用程序中保留 RSA 的公钥。

这是我的问题：更聪明的攻击者可以轻松获取公钥并加密他的用户 ID 并发布到我的 Web 服务。如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:54:29.990

我已经解决了我的问题。我需要的是在服务器端进行签名验证。我只需要将签名和签名数据发送到我的服务器。没有人可以欺骗这些数据。他们直接来自谷歌。签名验证完成后，我只是将用户添加到我的 mysql 表中。

# objective-c - __block 实例变量问题的属性。

> ID：10565431
> 
> 赞同：3
> 
> 时间：2012-05-12T16:23:13.563
> 
> 标签：objective-c, ios, objective-c-blocks

我在编译 Objective-C 类时遇到了以下错误：

```
VideoView.h:7: error: __block attribute can be specified on variables only 
```

这里也是头文件的重要部分：

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
@interface VideoView :UIView{
@private
    __block AVPlayer *player;   
}
... 
```

有什么解释为什么 g++ 认为我将 __block 属性应用于非变量对象？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-12T18:23:27.713

您不能拥有`__block`实例变量，因为它完全没有必要。

也就是说，当你这样做时：

```
^{
     someIvar = ....;
 }(); 
```

该块正在捕获一个不可变的、保留的、对`self`iVar 的间接引用和引用，因此，`__block`由于该变量既不是 const 复制的也不是只读的，因此什么也不做。

顺便说一句，这也是为什么在 ARC 下，您在使用 iVar 时可能会收到“循环引用”警告。

*注意：*我们试图在定义块语法时考虑一种表示这种微妙之处的语法，但我们决定，除非有任何明显的（没有明显的），否则 ARC 环境和/或 LLVM 的改进内存管理分析静态分析器使它变得不必要。

# mysql - 使用 MySQL 连接两个 SELECT 查询

> ID：10565433
> 
> 赞同：1
> 
> 时间：2012-05-12T16:23:30.523
> 
> 标签：mysql

我试图弄清楚将两个查询合并为一个。或者如果我应该或需要。

我有这个...

```
 SELECT      
    cd.SalesRep_ID AS CustomersSalesRep_ID
    FROM `CustomerDetails` cd
    WHERE cd.Customer_ID = $Customer_ID 
```

这很好用，并为我提供了我正在寻找的“SalesRep_ID”。

但是我需要'SalesRep_ID'来进行下一个这样的查询......

```
 SELECT      
    cd.IsSalesRep, cd.RepCom, cd.SalesRep_ID, sr.RepDispName, sr.DefaultRepCom

    FROM `CustomerDetails` cd
    LEFT JOIN `SalesReps` sr
    ON cd.SalesRep_ID = sr.SalesRep_ID
    WHERE cd.Customer_ID = $Customer_ID
    AND sr.SalesRep_ID = $CustomersSalesRep_ID 
```

使用这两者会产生我正在寻找的结果。然而，它们可以结合在一起，还是真的可以结合在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:37:32.220

如果我理解正确，这就是你所追求的：

```
SELECT cd.SalesRep_ID AS CustomersSalesRep_ID,
       cd.IsSalesRep,
       cd.RepCom,
       cd.SalesRep_ID,
       sr.RepDispName,
       sr.DefaultRepCom
FROM   CustomerDetails AS cd LEFT JOIN SalesReps AS sr USING(SalesRep_ID)
WHERE  cd.Customer_ID = $Customer_ID 
```

# java - 插入尝试后从 java 中的 mongod 读取错误结果

> ID：10565434
> 
> 赞同：-1
> 
> 时间：2012-05-12T16:23:37.900
> 
> 标签：java, mongodb, atomic

我开始使用 mongodb，我想做一个操作，尝试使用`username`、`password`和插入用户`email`。我已经建立了唯一索引`username`，`email`因此如果指定的用户名或电子邮件已经存在，则插入将失败。

所以现在我想向用户报告，他们的电子邮件已经注册，或者选择的用户名已被使用。所以我已经做到了：

```
CommandResult result = db.getLastError(); 
```

但是，除了解析它给我的单个错误消息之外，我没有看到一种简单的方法来读取错误。

```
{ "serverUsed" : "127.0.0.1:27017" , 
  "err" : "E11000 duplicate key error index: mojulo.users.$username_1  dup key: { : \"blahblah\" }" ,
  "code" : 11000 , 
  "n" : 0 , 
  "connectionId" : 12 , 
  "ok" : 1.0} 
```

此外，这似乎只是报告它遇到的第一个错误，是否有办法在单个查询中同时检查电子邮件和用户名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:42:51.867

如果您想对两者都进行检查，则必须自己发出查询以进行检查。如果您只是插入文档，那么它将仅报告第一次违反唯一索引的情况。代码`E11000`应该只指出一个重复的键错误，这样可以很容易地发现它发生了。您将需要解析错误消息以找出集合。

# python - 遍历目录并检查文件的大小

> ID：10565435
> 
> 赞同：2
> 
> 时间：2012-05-12T16:23:46.217
> 
> 标签：python

我想遍历目录和子目录，并检查每个文件的文件大小。如果它与定义的文件大小匹配，它将被删除。

我知道，我必须使用 os.walk，但我不太确定，以哪种方式。

我用于目录列表的代码是：

```
import os
path = "C:\\Python27"
i=0
for (path,dirs,files) in os.walk(path):
    print files
    i=i+1
    if i>10:
        break 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T16:35:23.413

尝试这个：

```
import os

for root, dirs, files in os.walk('/path/to/dir', topdown=False):
    for name in files:
        f = os.path.join(root, name)
        if os.path.getsize(f) == filesize:
            os.remove(f) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T16:32:08.800

这应该有效：

```
from __future__ import print_function # => For Python 2.5 - 2.7
import os

def delete_files_with_size(dirname, size):
    for root, _, files in os.walk(dirname):
        for filename in files:
            filepath = os.path.join(root, filename)
            if os.path.getsize(filepath) == size:
                print('removing {0}'.format(filepath))
                os.remove(filepath) 
```

就像你说的那样，[os.walk](http://docs.python.org/library/os.html#os.walk)是解决这类事情的方法。`os.walk`返回一个包含根路径、目录列表和文件列表的元组。由于我们对目录不感兴趣，所以我们`_`在解包返回值时使用常规的变量名。

由于文件名本身不包含路径，因此您可以使用`os.path.join`with`root`和`filename`. [os.path.getsize](http://docs.python.org/library/os.path.html#os.path.getsize)将返回文件的大小，`os.remove`如果它匹配大小将删除该文件。

# xcode - Xcode：如何使用 -bundle_loader 进行链接的嵌入式插件包归档 Mac 应用程序？

> ID：10565439
> 
> 赞同：3
> 
> 时间：2012-05-12T16:24:13.377
> 
> 标签：xcode, macos, cocoa, xcode4.3, nsbundle

我的设置：

Mac OS X 10.7.4
Xcode 4.3.2

我有一个 Mac OS X 应用程序，它加载嵌入式 Cocoa 可加载捆绑包以用作插件。插件包含在`.app`标准位置 ( `MyApp.app/Contents/PlugIns`) 的 Mac 应用程序包中，并通过标准 Cocoa `NSBundle`API 加载。插件被复制到标准“复制文件”构建阶段中的最终 Mac 应用程序包中，目标设置为`PlugIns`. 我会将其描述为 Mac 应用程序的标准 Cocoa 插件设置。

然而，有一件事有点不寻常。我正在使用该`-bundle_loader`选项在构建时将插件包链接到我的主应用程序中的公共符号。我最初是在 Xcode 3 中设置的，它一直运行良好。

以下是 Xcode 的描述`-bundle_loader`：

```
Bundle Loader
BUNDLE_LOADER
Specifies the executable that will be loading the bundle output file being linked. Undefined symbols from the bundle are checked against the specified executable like it was one of the dynamic libraries the bundle was linked with. [BUNDLE_LOADER, -bundle_loader] 
```

在 Xcode 4 中，我仍然可以在**调试**和**发布**构建配置中成功构建和运行我的 Mac 应用程序。没问题。（我通过将默认**运行**操作的构建配置设置为调试或发布来做到这一点）。两种配置都可以正常构建和运行。

**这是我的问题：在 Xcode 4 中，我无法成功归档我的 Mac 应用程序。插件包不会在链接时链接到主应用程序可执行文件（在构建过程中编译后立即）。**

我的存档操作设置为使用**发布**构建配置进行构建（当然）。**正如我所提到的，使用Run** Action使用 Release Build Configuration 构建没有问题。该问题仅在执行**存档**操作时出现。

这是我在尝试存档时收到的链接错误（在编译第一个插件包的源代码后立即发生）：

```
Ld /Users/<myusername>/Library/Developer/Xcode/DerivedData/Fluidium-ajljctlwoiqpcodskkcwxrxngeyo/Build/Intermediates/ArchiveIntermediates/Fake/InstallationBuildProductsLocation/Users/<myusername>/Library/Developer/Xcode/DerivedData/Fluidium-ajljctlwoiqpcodskkcwxrxngeyo/Build/Intermediates/ArchiveIntermediates/Fake/BuildProductsPath/Release/Fake.app/Contents/PlugIns/Tabs.fluidplugin/Contents/MacOS/Tabs normal x86_64
    cd /Volumes/SystemY/Users/<myusername>/work/fluidium/trunk/Fluidium
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch x86_64 -bundle -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk -L/Users/<myusername>/Library/Developer/Xcode/DerivedData/Fluidium-ajljctlwoiqpcodskkcwxrxngeyo/Build/Intermediates/ArchiveIntermediates/Fake/BuildProductsPath/Release -F/Users/<myusername>/Library/Developer/Xcode/DerivedData/Fluidium-ajljctlwoiqpcodskkcwxrxngeyo/Build/Intermediates/ArchiveIntermediates/Fake/BuildProductsPath/Release -filelist /Users/<myusername>/Library/Developer/Xcode/DerivedData/Fluidium-ajljctlwoiqpcodskkcwxrxngeyo/Build/Intermediates/ArchiveIntermediates/Fake/IntermediateBuildFilesPath/Fluidium.build/Release/TabsPlugIn.build/Objects-normal/x86_64/Tabs.LinkFileList -mmacosx-version-min=10.6 -bundle_loader /Users/<myusername>/Library/Developer/Xcode/DerivedData/Fluidium-ajljctlwoiqpcodskkcwxrxngeyo/Build/Intermediates/ArchiveIntermediates/Fake/BuildProductsPath/Release/FluidApp.app/Contents/MacOS/FluidApp /Users/<myusername>/Library/Developer/Xcode/DerivedData/Fluidium-ajljctlwoiqpcodskkcwxrxngeyo/Build/Intermediates/ArchiveIntermediates/Fake/BuildProductsPath/Release/TDAppKit.framework/TDAppKit -framework Quartz -framework WebKit -framework Cocoa -o /Users/<myusername>/Library/Developer/Xcode/DerivedData/Fluidium-ajljctlwoiqpcodskkcwxrxngeyo/Build/Intermediates/ArchiveIntermediates/Fake/InstallationBuildProductsLocation/Users/<myusername>/Library/Developer/Xcode/DerivedData/Fluidium-ajljctlwoiqpcodskkcwxrxngeyo/Build/Intermediates/ArchiveIntermediates/Fake/BuildProductsPath/Release/Fake.app/Contents/PlugIns/Tabs.fluidplugin/Contents/MacOS/Tabs

Undefined symbols for architecture x86_64:
  "_OBJC_IVAR_$_FUPlugIn.aboutInfoDictionary", referenced from:
      -[FUTabsPlugIn aboutInfoDictionary] in FUTabsPlugIn.o
  "_OBJC_CLASS_$_FUPlugIn", referenced from:
      _OBJC_CLASS_$_FUTabsPlugIn in FUTabsPlugIn.o
  "_OBJC_METACLASS_$_FUPlugIn", referenced from:
      _OBJC_METACLASS_$_FUTabsPlugIn in FUTabsPlugIn.o
  "_FUTabControllerProgressDidStartNotification", referenced from:
      -[FUTabsViewController startObserveringTabController:] in FUTabsViewController.o
      -[FUTabsViewController stopObserveringTabController:] in FUTabsViewController.o
  "_FUTabControllerProgressDidChangeNotification", referenced from:
      -[FUTabsViewController startObserveringTabController:] in FUTabsViewController.o
      -[FUTabsViewController stopObserveringTabController:] in FUTabsViewController.o
  "_FUTabControllerProgressDidFinishNotification", referenced from:
      -[FUTabsViewController startObserveringTabController:] in FUTabsViewController.o
      -[FUTabsViewController stopObserveringTabController:] in FUTabsViewController.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

最后一点：我在用作“捆绑加载器”的 Mac App 目标上设置了以下构建设置：

**复制期间剥离调试符号：否**（对于调试和发布）
**默认隐藏符号：否**（对于调试和发布）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:01:15.077

解决了！

在为发布而构建时，我的主要应用目标上没有执行“剥离”阶段。但是，存档时，*在*我的主要应用目标上执行了“剥离”阶段。（不知道为什么这是不同的，因为两者都是通过发布构建配置构建的，但*它是*）。

归档时的剥离阶段是插件无法通过 bundle_loader 链接的原因：符号已从主应用程序的二进制文件中剥离。

解决方案是在我的主应用程序（用作捆绑加载程序的那个）的构建设置中设置以下设置：

**条带样式：调试符号**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T16:46:42.790

试试这个：在你的方案的构建设置中禁用查找隐式依赖项和并行化构建。并将插件添加到其目标列表中。验证它是否正确构建，然后查看您的档案问题是否已解决。

# objective-c - 同一视图中的静态 TableView 和动态表视图

> ID：10565442
> 
> 赞同：-6
> 
> 时间：2012-05-12T16:24:34.230
> 
> 标签：objective-c, ios

我有问题，

我需要在同一个视图中有 2 个表视图。

第一个必须是静态表格视图，第二个必须是动态的。

视图应如下所示

![视图应如下所示](../Images/e5da86eea1dae438de4478c0cb0b120d.png)

![在此处输入图像描述](../Images/2f64339d2810cc66b760602587dcae93.png)

感谢您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:58:03.250

静态 tableView**必须**嵌入在 UITableViewController 中，它会自动将其扩展为完整的可用大小，因此您不能在其中拥有另一个视图。

但是，您可以通过使用两个动态表视图并将它们嵌入到标准视图控制器中来完成您想要做的事情。您将必须制作多个原型单元格并根据要求的行而不是静态表格视图返回适当的单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:10:43.270

解决方法：在静态tableview上调用super tableviewdatasource和delegate方法，在动态tableview上，返回你自己的东西

您必须检查每个 tableviewdelegate 和数据源函数中的情况。

例如：

```
- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section 
{
    //messagetableview is one with dynamic content
    if(tableView != messageTableview)
    {
        //super is called when static content is in case
        return [super tableView:tableView numberOfRowsInSection:section]; 

    }
    else 
    {
       //return dynamic count
       return [conversation messagecount];
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T16:33:22.237

创建两个 UITableView 实例并合成它们。将两者的委托和数据源设置为self。定义框架并将它们添加到您的视图中。符合 UITableAViewDelegate。他们使用委托方法自定义您的 tableview

# android - MonoDroid：解压缩资产

> ID：10565447
> 
> 赞同：0
> 
> 时间：2012-05-12T16:25:05.413
> 
> 标签：android, mono, monodevelop, xamarin.android

MonoDroid 似乎缺少 Android.Uitl.Zip 命名空间。

Mono for Android 有没有办法将资产解压缩到文档文件夹？

以下是 Java 中的方法： [http](http://www.jondev.net/articles/Unzipping_Files_with_Android_(Programmatically) ://www.jondev.net/articles/Unzipping_Files_with_Android_(Programmatically )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:24:55.743

我试图做同样的事情，不得不求助于第三方库。其他人建议使用 SharpZipLib，但如果您不从事开源项目，许可证可能会成为问题。DotNetZip 也是开源的，但它有一个更宽松的许可证，我能够在 Mono for Android 中使用源代码，而不会让人头疼。到目前为止，我只使用它来提取 zip，因此如果您想使用任何其他功能，您可能需要进行一些调试。

这是我使用的程序：

1.  [从http://dotnetzip.codeplex.com/SourceControl/list/changesets 获取](http://dotnetzip.codeplex.com/SourceControl/list/changesets)源代码。

2.  将 Zip、Zlib 和 CommonSrc 目录复制到您的 Android Mono 项目中。只复制 .cs 文件，不要复制任何子目录。

4.  从 Zip 目录中删除 ZipFile.SaveSelfExtractor.cs 文件。

5.  从 ZipEntry.Extract.cs 中的 ValidateOutput 函数中注释掉这一行。

    ```
    outFileName = outFileName.Replace("/","\\"); 
    ```

一旦我完成了所有这些，提取就非常简单了：

```
using Ionic.Zip;
Zipfile zip = ZipFile.Read(archivepath);
zip.ExtractAll(extractpath); 
```

# javascript - 循环播放嵌入的 youtube 视频

> ID：10565448
> 
> 赞同：12
> 
> 时间：2012-05-12T16:25:07.083
> 
> 标签：javascript, html, youtube

有谁知道如何制作嵌入的 youtube 视频以循环播放？

我已经尝试[过从官方 youtube 开发者网站](https://developers.google.com/youtube/youtube_player_demo)生成的代码，但它根本不起作用。视频在 Firefox 和 Chrome 中结束后不会重播。这是生成的代码不起作用。

```
<object style="height: 390px; width: 640px">
    <param name="movie" value="https://www.youtube.com/v/u1zgFlCw8Aw?version=3&feature=player_embedded&loop=1">
    <param name="allowFullScreen" value="true">
    <param name="allowScriptAccess" value="always">
    <embed src="https://www.youtube.com/v/u1zgFlCw8Aw?version=3&feature=player_embedded&loop=1" type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always" width="425" height="344">
</object> 
```

我试图用谷歌搜索它，但没有任何好的指导。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-12T16:27:51.517

试试看这里[https://developers.google.com/youtube/player_parameters#loop](https://developers.google.com/youtube/player_parameters#loop)

取自链接

**目前，loop 参数仅在与 playlist 参数结合使用时才在 AS3 播放器中起作用。**要循环播放单个视频，请将循环参数值设置为 1，并将播放列表参数值设置为已在 Player API URL 中指定的相同视频 ID：

`http://www.youtube.com/v/VIDEO_ID?version=3&loop=1&playlist=VIDEO_ID`

看来您可能缺少与循环参数一起使用的播放列表参数。

演示链接：http: [//jsfiddle.net/E3Euv/](http://jsfiddle.net/E3Euv/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T23:50:31.910

我不能对 Chase 接受的答案发表评论，但要让播放列表只显示一个视频而不是两个，只需使用逗号分隔视频 ID 并允许实现**1 的播放列表**。

示例：
**&播放列表=，**

jsfiddle 更新：http:
[//jsfiddle.net/E3Euv/1/](http://jsfiddle.net/E3Euv/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-02T13:12:37.547

我已经用尽了 Youtube 的可能性。如果没有别的，那就是带宽吸盘，因为每次都会重新加载视频。

我已将循环视频上传到 Vimeo。问题解决了。

# c# - 使用模板模式创建数据访问层

> ID：10565450
> 
> 赞同：0
> 
> 时间：2012-05-12T16:25:29.690
> 
> 标签：c#, data-access-layer

我在模板模式样式中编写方法时遇到了一些问题。但首先我的代码：

我正在使用的 Base 类如下所示：

```
public abstract class DbBase<T> where T : new()
{
    protected abstract Value CommandValue { get; }
    protected abstract CommandType CommandType { get; }
    protected abstract Mapper<T> GetMapper();
    protected abstract IDbConnection GetConnection();
    protected abstract Collection<IDataParameter> GetParameters(IDbCommand command);

    public Collection<IDataParameter> Paramaters { get; set; }

    #region Public Methods
    public T Single(int id)
    {
        return ExecuteReader(id).SingleOrDefault();
    }

    public Collection<T> All()
    {
        return ExecuteReader();
    }
    #endregion

    #region Private Methods
    private Collection<T> ExecuteReader(int? id = null)
    {
        var collection = new Collection<T>();

        using (var connection = GetConnection())
        {
            var command = connection.CreateCommand();
            command.Connection = connection;
            command.CommandType = CommandType;

            if (id.HasValue && id.Value > 0)
                command.CommandText = CommandValue.Single;
            else
                command.CommandText = CommandValue.All;

            var parameters = GetParameters(command);
            if (parameters != null)
            {
                foreach (var param in GetParameters(command))
                    command.Parameters.Add(param);
            }

            try
            {
                connection.Open();

                using (var reader = command.ExecuteReader())
                {
                    try
                    {
                        var mapper = GetMapper();
                        collection = mapper.MapAll(reader);
                        return collection;
                    }
                    finally
                    {
                        if (!reader.IsClosed)
                            reader.Close();
                    }
                }
            }
            catch (Exception ex)
            {
                throw new DbBaseException(ex.Message, ex);
            }
            finally
            {
                if (connection.State != ConnectionState.Closed)
                    connection.Close();
            }
        }
    }
    #endregion
} 
```

所以现在对于每一段可能会改变的代码，我都有一个继承的细节类：

```
public class UserDb : DbBase<User>
{
    private static readonly string ALL = "SELECT * FROM [USER]"; //don't use star!
    private static readonly string SINGLE = "SELECT * FROM [USER] WHERE USER_ID = @USER_ID";
    private static readonly CommandType commandType = CommandType.Text;

    protected override Value CommandValue
    {
        get
        {
            var value = new Value
            {
                Single = SINGLE,
                All = ALL
            };
            return value;
        }
    }

    protected override CommandType CommandType
    {
        get { return commandType; }
    }

    protected override Mapper<User> GetMapper()
    {
        return new UserMapper();
    }

    protected override Collection<IDataParameter> GetParameters(IDbCommand command)
    {
        var parameters = new Collection<IDataParameter>();
        var param = command.CreateParameter();
        param.ParameterName = "@USER_ID";
        param.Value = 2;
        parameters.Add(param);
        return parameters;
    }
} 
```

调用代码：

```
 var userDb = new UserDb();
 var user = userDb.Single(1);

 if (user != null)
     Console.WriteLine(string.Format("{0}, {1}, {2}", user.UserId, user.Username, user.Password)); 
```

正如你所看到的，我已经实现了一个名为 Single 的方法，它通过 id 给我一个特定的行。我的问题是如何在不破坏模板模式的情况下将 id 推送到我的 ExecuteReader 方法中？

我希望你们能帮助我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:43:26.643

为什么不为所有实体使用具有相同名称的参数，例如`@id`. 那么你将不再需要这些`GetParameters`东西。只需调用

```
command.Parameters.AddWithValue("@id", id); 
```

* * *

**更新**

如果您希望能够使用不同数量的参数，可以使用`params`关键字，它使您能够传递不同数量的参数（包括零个）。

```
public T Single(params int[] id)
{ 
    return ExecuteReader(id).SingleOrDefault();         
} 
```

和

```
private Collection<T> ExecuteReader(params int[] id)
{
    ...
    for (int i = 0; i < id.Length; i++) {
        command.Parameters.AddWithValue("@id" + i, id[i]);
    }
    ...
} 
```

你将不得不命名你的参数`@id0, @id1, @id2, ...`

```
var coll = ExecuteReader();
var coll = ExecuteReader(2);
var coll = ExecuteReader(5, 77);
...

var result = db.Single(1);
var result = db.Single(4, 13);
var result = db.Single(5, 100, 1);
... 
```

* * *

**更新#2**

您还可以从 SQL 文本中提取参数名称

```
private Collection<T> ExecuteReader(params object[] p)
{
    ...
    var matches = Regex.Matches(sql, @"@\w+");
    if (matches.Count != p.Length) {
        throw new ArgumentException("The # of parameters does not match ...");
    }
    for (int i = 0; i < p.Length; i++) {
        command.Parameters.AddWithValue(matches[i].Value, p[i]);
    }
    ...
} 
```

# android - Android：在 Flickr 上上传图片

> ID：10565456
> 
> 赞同：3
> 
> 时间：2012-05-12T16:26:17.743
> 
> 标签：android, upload, flickr

我必须制作一个 android 应用程序才能将图片从手机上传到 Flickr。我开始阅读[API Flickr 文档](http://www.flickr.com/services/api/)，但仍然想念如何验证和上传。我也在这里阅读了类似的问题，但它们显示的代码片段不完整，所以我无法测试它们。谁能帮我？有什么链接可以开始吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:21:23.630

看看[flickrj](https://code.google.com/p/flickrj-android/)库。它旨在与 Android 配合使用。它附带了[可](https://play.google.com/store/apps/details?id=com.gmail.charleszq)在 Google Play 市场上获得的示例应用程序的[源代码。](http://code.google.com/p/flickr-viewer-for-honeycomb/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T09:19:11.143

[Full Demo](https://github.com/luminousman/Flickr) application and working example... For details see [https://stackoverflow.com/a/12524440/1136023](https://stackoverflow.com/a/12524440/1136023)

# node.js - 使用命名空间模块范式在 Mocha/Chai 中编写测试

> ID：10565459
> 
> 赞同：0
> 
> 时间：2012-05-12T16:26:50.283
> 
> 标签：node.js, coffeescript, mocha.js

我正在编写一系列用于进行数学运算的咖啡脚本文件，我需要编写一些测试。我认为摩卡和柴是要走的路。目前，我使用命名空间方法将所有单独的函数组合在一起以保持整洁：

```
namespace = (target, name, block) ->
  [target, name, block] = [(if typeof exports isnt 'undefined' then exports else window), arguments...] if arguments.length < 3
  top    = target
  target = target[item] or= {} for item in name.split '.'
  block target, top

exports? exports.namespace = namespace 
```

我现在想测试的是我的矩阵类，它看起来有点像这样：

```
namespace "CoffeeMath", (exports) ->

  class exports.Matrix4
    for name in ['add', 'subtract', 'multiply', 'divide', 'addScalar', 'subtractScalar', 'multiplyScalar', 'divideScalar', 'translate']
        do (name) ->
          Matrix4[name] = (a,b) ->
          a.copy()[name](b)

    Matrix4.DIM = 4

    # Take a list in column major format
    constructor: (@a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]) ->
      # etc etc ... 
```

现在用可爱的coffeescript编译器编译所有这些都很好。我有一个这样的测试：

```
chai = require 'chai'
chai.should()

{namespace} = require '../src/aname'
{Matrix4} = require '../src/math'

describe 'Matrix4 tests', ->
  m = null
  it 'should be the identity matrix', ->
    m  = new exports.Matrix4()
    m.a.should.equal '[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]' 
```

问题是，我收到以下错误：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
ReferenceError: namespace is not defined
    at Object.<anonymous> (/Users/oni/Projects/Saito.js/src/math.coffee:3:3)
    at Object.<anonymous> (/Users/oni/Projects/Saito.js/src/math.coffee:631:4)
    at Module._compile (module.js:441:26) 
```

我相信应该包含 aname 并且导出命名空间函数，所以我看不出为什么没有定义命名空间。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:16:30.243

来自[精美手册](http://nodejs.org/api/modules.html#modules_modules)：

> 要导出对象，请添加到特殊`exports`对象。

然后，[`exports`由返回`require`](https://stackoverflow.com/a/5311377/479863)：

> `module.exports`是作为`require`调用结果实际返回的对象。

所以，当你这样说时：

```
namespace = require '../src/aname' 
```

你`namespace.namespace`在你的测试中有空。

CoffeeScript 将每个文件包装在一个[函数包装器](http://coffeescript.org/#lexical_scope)中，以避免污染全局命名空间：

> 所有 CoffeeScript 输出都包装在一个匿名函数中： `(function(){ ... })();`这个安全包装器与`var`关键字的自动生成相结合，使得意外污染全局命名空间变得极其困难。

这意味着你在编译的 JavaScript 中有这样的东西：

```
(function() {
    exports.namespace = ...
})();
(function() {
    # Matrix4 definition which uses the 'namespace' function
})();
(function() {
    var namespace = ...
})(); 
```

结果是自测试以来`namespace`在您定义的地方不可见，并且存在于单独的函数中，因此存在于单独的范围中。`Matrix4``Matrix4`

如果你想`namespace`在你的数学文件中使用它，那么你必须在`require`那里而不是在`require`你的数学文件的代码中。

# google-docs-api - 通过“Google Document List API”将作者添加到电子表格

> ID：10565463
> 
> 赞同：1
> 
> 时间：2012-05-12T16:27:41.340
> 
> 标签：google-docs-api, google-apps-script

我正在用 Google Aps (GAS) 编写脚本，我需要将用户（/writer）（域管理员）添加到另一个用户的电子表格中。

该脚本正在管理员权限下运行/调用。

首先，我使用“Google Apps 管理访问权限来模拟域的用户”，我得到了他的文档列表（电子表格），我得到了文档的 ID。

var oauthConfig = UrlFetchApp.addOAuthService("docs"); oauthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken"); oauthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken? (...)

这部分工作正常并获得所需的 ID。

现在，我想将自己 (administrator@example.com) 添加到此文档中

我正在尝试这个：

```
var optAdvancedArgs = {
"contentType": "application/atom+xml",
"method": "POST",
"headers": {  "GData-Version": "3.0" }, 
              "oAuthServiceName": "docs", 
              "oAuthUseToken": "always",
           }; 
```

var url_set = "https://docs.google.com/feeds/" + 用户 + "/private/full/document:" + matriu2[0][6] + '/acl/user:administrator@example.com'

var 结果 = UrlFetchApp.fetch(url_set, optAdvancedArgs);

“user”是文档的所有者，活动用户（Session.getActiveUser().getUserLoginId()）和“matriu2[nm][6]”是文档的 ID。

这行不通，

有任何想法吗 ？

塞尔吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:37:03.570

花了一个小时的时间后，这是我得到的这个功能会将文档共享给自己（域管理员）。您可以更改 xml 中的其他参数以具有读取、写入权限等

```
function shareDocumentToMe(){
  var base = 'https://docs.google.com/feeds/';
  var fetchArgs = googleOAuth_('docs', base);
  var writerID = Session.getEffectiveUser().getEmail();
  fetchArgs.method = 'POST';
  var rawXml = "<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gAcl='http://schemas.google.com/acl/2007'>"
      +"<category scheme='http://schemas.google.com/g/2005#kind' "
      +"term='http://schemas.google.com/acl/2007#accessRule'/>"
      +"<gAcl:role value='writer'/>"
      +"<gAcl:scope type='user' value='"+writerID+"'/>"
      +"</entry>";
  fetchArgs.payload = rawXml;
  fetchArgs.contentType = 'application/atom+xml';
  var url = base + 'user@yourdomain.com/private/full/'+yourDocumentID+'/acl?v=3&alt=json';
  var content = UrlFetchApp.fetch(url, fetchArgs).getContentText();
  Logger.log(content);
}

//Google oAuth
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey("anonymous");
  oAuthConfig.setConsumerSecret("anonymous");
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

我在我的 Google 网站上设置了相同的代码。你可以看看这里。 [https://sites.google.com/site/appsscripttutorial/urlfetch-and-oauth](https://sites.google.com/site/appsscripttutorial/urlfetch-and-oauth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:04:52.197

我永远不会发现这个。非常感谢你。

我修改了以下内容（var url = ...）：

```
'user@yourdomain.com/private/full/' 
```

经过
`user + '/private/full/'`

在哪里

```
user = Session.getActiveUser (). getUserLoginId () 
```

而且在`googleOAuth_`我把我的域值​​​​：

```
oAuthConfig.setConsumerKey ("mydomain.com");

oAuthConfig.setConsumerSecret ("xXxXxXxXxXxXxXxXx"); 
```

而且效果很好！

我认为非常有趣的是，域管理员可以代表用户（一旦我们获得许可）处理组织的一些文件，但这些文件是由用户创建的。

还有用户资源（文档，电子表格，...），以便程序可以访问（以管理员权限运行）而无需用户的注意（或您没有足够的专业知识），例如安全副本，...

就我而言，我编写了一个程序来评估用户（教师）创建的 Google Docs 表单，就像小工具“Flubaroo”一样，但在由 Google 协作平台使用 Google Apps Script (GAS) 编程的图形环境 (GUI) 中.

感谢你的宝贵时间。

塞尔吉

# css - 与 Chrome/Firefox 相比，IE 中的表格单元格移动了

> ID：10565465
> 
> 赞同：2
> 
> 时间：2012-05-12T16:27:45.143
> 
> 标签：css, google-chrome, internet-explorer, html-table

我在 IE 中的表格有一些问题。有趣的是，它只是选择这样做的一些表，但无论如何，我不知道为什么。真的，并不是说它破坏了布局或其他什么，但我仍然想知道它为什么会这样做。我附上了一张图片，所以你可以明白我的意思：

![在此处输入图像描述](../Images/95be857e340342ec3155343b8d6ef646.png)

顶部是 Chrome/Firefox，底部是 IE。我知道表格等在不同的浏览器中有些不同，但通常差异是几个像素左右。我已经使用了我能找到的所有重置 CSS 方法，因此每个浏览器中的所有内容都应该相同。

表格是这样形成的：

```
<table class="AdminAccess">
            <tr>
                <td>********</td>
                <td><img alt="" height="16" src="../images/edit.png" width="16"></td>
                <td><a href="admins_edit.html">Edit</a></td>
                <td><img alt="" height="16" src="../images/mail.png" width="16"></td>
                <td><a href="#">Send new password</a></td>
                <td><img alt="" height="16" src="../images/delete.png" width="16"></td>
                <td><a href="#">Delete</a></td>
            </tr>
            <tr>
                <td>********</td>
                <td><img alt="" height="16" src="../images/edit.png" width="16"></td>
                <td><a href="admins_edit.html">Edit</a></td>
                <td><img alt="" height="16" src="../images/mail.png" width="16"></td>
                <td><a href="#">Send new password</a></td>
                <td><img alt="" height="16" src="../images/delete.png" width="16"></td>
                <td><a href="#">Delete</a></td>
            </tr>
            <tr>
                <td>********</td>
                <td><img alt="" height="16" src="../images/edit.png" width="16"></td>
                <td><a href="admins_edit.html">Edit</a></td>
                <td><img alt="" height="16" src="../images/mail.png" width="16"></td>
                <td><a href="#">Send new password</a></td>
                <td><img alt="" height="16" src="../images/delete.png" width="16"></td>
                <td><a href="#">Delete</a></td>
            </tr>
            <tr>
                <td>********</td>
                <td><img alt="" height="16" src="../images/edit.png" width="16"></td>
                <td><a href="admins_edit.html">Edit</a></td>
                <td><img alt="" height="16" src="../images/mail.png" width="16"></td>
                <td><a href="#">Send new password</a></td>
                <td><img alt="" height="16" src="../images/delete.png" width="16"></td>
                <td><a href="#">Delete</a></td>
            </tr>
        </table> 
```

表格本身有 70% 的宽度，而 AdminAccess 类得到了这个 CSS：

```
table.AdminAccess tr td:nth-child(1) {width:48%;}
table.AdminAccess tr td:nth-child(2) {width:3%; padding:4px 0px 0px 0px;}
table.AdminAccess tr td:nth-child(3) {width:11%;}
table.AdminAccess tr td:nth-child(4) {width:3%; padding:4px 0px 0px 0px;}
table.AdminAccess tr td:nth-child(5) {width:30%;}
table.AdminAccess tr td:nth-child(6) {width:3%; padding:4px 0px 0px 0px;}
table.AdminAccess tr td:nth-child(7) {width:2%; text-align:right}
table.AdminAccess tr td {
    vertical-align:middle;
    padding:5px;
} 
```

然后是一些在这里应该不重要的背景 CSS。

所以基本上，我不知道为什么它在 IE 中的行为如此，而不是在其他浏览器中。就像我说的。这只是我的一些桌子。一些，完全像这样的风格，但内容不同，不要这样做。所以，我迷路了。同样，这对布局本身并不重要，但很高兴知道出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:47:06.793

对于`table.AdminAccess tr td:nth-child(7)`，您已指定`width: 2%`。

表格宽度的 2% 不足以包含“删除”。

因此，浏览器必须调整*其他*列的宽度以进行补偿。碰巧 Chrome/Firefox 对 IE9 进行了不同的调整。

这是我制作的测试用例：http: [//jsfiddle.net/thirtydot/hC53w/show/](http://jsfiddle.net/thirtydot/hC53w/show/)

Chrome/IE9 之间的列不对齐：

![](../Images/7805dfdbed24adcc47aef997a0ca0669.png)

一旦我将“删除”更改为“！”，它们就会对齐：http: [//jsfiddle.net/thirtydot/hC53w/1/show/](http://jsfiddle.net/thirtydot/hC53w/1/show/)

![](../Images/50dd253fc53de5d7041cf761b0bc5b11.png)

# multithreading - 在 Linux 中使用多队列 NIC

> ID：10565468
> 
> 赞同：2
> 
> 时间：2012-05-12T16:28:38.183
> 
> 标签：multithreading, networking, network-programming, multiprocessing, packet-capture

我已经阅读了很多关于接收端缩放 (RSS)、接收数据包控制 (RPS) 和类似技术的内容，但我对如何在我的程序中实际使用这些技术感到茫然，即将传入的数据包在不同的线程/进程。

我确实知道 PF_RING，但我想 Linux 内核本身必须有一些基本支持。毕竟，例如，Interl 在其网站上吹嘘其 RSS 技术并声称支持 Linux。此外，RPS 不在 PF_RING 的范围内。我不愿意使用 PF_RING 的另一个原因是他们已经修补了网络驱动程序，而其中一些修补过的驱动程序似乎已经过时了。

我已经广泛地搜索了这个主题，但我发现最好的是关于启用 RSS 或 RPS 支持，而不是我如何以编程方式使用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-22T12:15:41.083

内核 3.19 引入了 SO_INCOMING_CPU 套接字选项。这样，该进程就可以确定数据包最初被传递到哪个 CPU。

> RPS/RFS 的替代方案是对多队列使用硬件支持。
> 
> 然后将一组百万个套接字拆分为工作线程，每个工作线程使用 epoll() 来管理自己的套接字池上的事件。
> 
> 理想情况下，我们希望每个 RX/TX 队列/cpu 有一个线程，但是在接受（）或 connect（）之后，我们无法知道套接字在哪个队列/cpu 上管理。
> 
> 我们通常每个 RX 队列使用一个 cpu（IRQ smp_affinity 已正确设置），因此记住 cpu 传递最后一个数据包的套接字结构足以解决问题。
> 
> 在 accept()、connect() 甚至文件描述符传递进程之后，应用程序可以使用：
> 
> 诠释中央处理器；socklen_t len = sizeof(cpu);
> 
> getsockopt(fd, SOL_SOCKET, SO_INCOMING_CPU, &cpu, &len);
> 
> 并使用此信息将套接字放入正确的筒仓以获得最佳性能，因为所有网络堆栈都应在适当的 cpu 上运行，而无需发送 IPI (RPS/RFS)。

[ [https://patchwork.ozlabs.org/patch/408257/][1]](https://patchwork.ozlabs.org/patch/408257/][1])

# java - 无法在显示按钮列表的表单上添加背景颜色或图像 - 黑莓

> ID：10565471
> 
> 赞同：0
> 
> 时间：2012-05-12T16:28:56.197
> 
> 标签：java, layout, blackberry, button, user-interface

我正在处理以下代码，它有一个带有 6 个按钮的欢迎表单。

单击每个按钮时，它会打开一个新表单。

```
 class MyAPP extends UiApplication {
    public static void main(String[] args) {
            UiApplication instance = new MyAPP();
            instance.enterEventDispatcher();
    }
    private ButtonField btntest,btntest1,btntest2,btntest3,btntest4,btntest5;
    public MyAPP() {

            MainScreen testScreen = new MainScreen();

            final LabelField field  = new LabelField("Company",LabelField.FIELD_HCENTER | LabelField.NON_FOCUSABLE)
    {
        protected void paint(Graphics g)
            {       
                     g.clear();
                    g.drawRect(0,0, 50, 50);
                    int oldColor = g.getColor();
                    g.setColor(Color.DODGERBLUE);
                    g.fillRect(0, 0, this.getPreferredWidth(), this.getPreferredHeight());
                    g.setColor(oldColor);
                    g.drawRect(100, 100, 50, 50);
                    super.paint(g);
             }
    };
    testScreen.setTitle(field);

    //Add status field to bottom of screen in blue color

    final LabelField field1  = new LabelField(" Copyright")
    {
        protected void paint(Graphics g)
            {       
                  //   g.clear();
                    g.drawRect(0,0, 50, 50);
                    int oldColor = g.getColor();
                    g.setColor(Color.DODGERBLUE);
                    g.fillRect(0, 0, this.getPreferredWidth(), this.getPreferredHeight());
                    g.setColor(oldColor);
                    g.drawRect(100, 100, 50, 50);
                    super.paint(g);
             }

    };
    //field1.setFontColor(Color.WHITE);

        btntest1 = new ButtonField("Customer",ButtonField.FIELD_HCENTER | ButtonField.CONSUME_CLICK);  
        btntest = new ButtonField("Bills  ",ButtonField.FIELD_HCENTER | ButtonField.CONSUME_CLICK);
        btntest2 = new ButtonField("Ledger ",ButtonField.FIELD_HCENTER | ButtonField.CONSUME_CLICK); 
        btntest3 = new ButtonField("Receipts",ButtonField.FIELD_HCENTER | ButtonField.CONSUME_CLICK);

         btntest1.setChangeListener(new FieldChangeListener()
      {
           public void fieldChanged(Field field,int context) 
           {
              pushScreen(new NextScreen2());
           }
      });

     btntest.setChangeListener(new FieldChangeListener()
      {
           public void fieldChanged(Field field,int context) 
           {
              pushScreen(new NextScreen1());
           }
      });

      btntest2.setChangeListener(new FieldChangeListener()
      {
           public void fieldChanged(Field field,int context) 
           {
              pushScreen(new NextScreen4());
           }

      }); 
```

我也尝试过放置一个位于表单中心的图像位图，但它不会出现在任何地方。

在当前代码中，我添加了标题和状态字段，并且还添加了

1.  带有欢迎标题的屏幕顶部的图像。
2.  有 6 个按钮居中对齐。

是不是因为按钮在中心并且没有空间让颜色实现不可见？而且我无法添加一个作为整个表单背景的图像。任何知道解决方案的人请指导。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:36:07.940

试试下面的代码：

```
// initialize background
Bitmap bm = Bitmap.getBitmapResource("myImage");
Background bg = BackgroundFactory.createBitmapBackground(bm);

// getMainManager(), apply background
testScreen.getMainManager().setBackground(bg); 
```

# objective-c - 在 UIImage 中转换 UIScrollView 的内容

> ID：10565474
> 
> 赞同：1
> 
> 时间：2012-05-12T16:29:20.157
> 
> 标签：objective-c, uiscrollview, uiimage, photolibrary

在我的应用程序中，用户可以添加`UIImageView`我的子视图`UIScrollView`。当用户点击“保存”按钮时，我想将我的所有内容保存`UIScrollView`为`UIImage`照片库。

我一直在看谷歌，但关于这个主题的内容并不多。

编辑：下面的代码完成了这项工作

```
 CGRect rect = self.mainView.frame;
        [self.mainView setFrame:CGRectMake(0, 0, 824, self.mainView.contentSize.height)];
        UIGraphicsBeginImageContext(self.mainView.bounds.size);
        [self.mainView.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        UIImageWriteToSavedPhotosAlbum(image , nil, nil, nil);
        [self.mainView setFrame:rect]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:34:52.647

似乎您需要截取屏幕截图，您可以在完成操作时尝试此代码 -

```
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
NSData * data = UIImagePNGRepresentation(image);
[data writeToFile:@"myImage.png" atomically:YES]; 
```

# scala - 期货在程序终止之前不运行

> ID：10565475
> 
> 赞同：9
> 
> 时间：2012-05-12T16:29:34.197
> 
> 标签：scala, concurrency, future

我试图在新的 Scala 2.10[期货功能](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/scala/concurrent/Future.html)上重现该示例。我使用的代码是：

```
import scala.concurrent.Future
import scala.concurrent.future

object Test {
    def main(args: Array[String]) {
     println("Test print before future")
     val s = "Hello"
     val f = future {s + " future!"}
     f onSuccess {case v => println(v)}
     println("Test print after future")
    }
} 
```

而不是打印：

```
Test print before future
Hello future!
Test print after future 
```

它只是打印：

```
Test print before future
Test print after future 
```

知道为什么我有这种行为吗？我的 scala 编译器版本是 2.10.0-20120507。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-12T19:03:15.623

问题是您将其作为独立程序执行，其主线程在其中一个工作线程可以执行“Hello future！”之前终止。`println`. （新的期货库产生的线程是守护线程）。

您还可以使用`Await`对象（也在 中`scala.concurrent`）等到未来`f`完成：

```
import scala.concurrent._
import scala.concurrent.util._

object Test {
  def main(args: Array[String]) {
    println("Test print before future")

    val s = "Hello"
    val f = future {s + " future!"}
    f onSuccess {case v => println(v)}
    println("Test print after future")

    Await.ready(f, Duration.Inf)
  }
} 
```

这可以打印：

```
Test print before future
Test print after future
Hello future! 
```

或者，它可以打印“Hello future！” 在“未来之后的测试打印”之前，具体取决于线程调度。

同样，您可以强制主线程等到`f`最后一个完成之前`println`，如下所示：

```
import scala.concurrent._
import scala.concurrent.util._

object Test {
  def main(args: Array[String]) {
    println("Test print before future")

    val s = "Hello"
    val f = future {s + " future!"}
    f onSuccess {case v => println(v)}

    Await.ready(f, Duration.Inf)        

    println("Test print after future")
  }
} 
```

哪个会打印：

```
Test print before future
Hello future!
Test print after future 
```

但是，请注意，当您使用 时`Await`，您是在阻塞。这当然可以确保您的主应用程序线程不会终止，但除非另有必要，否则通常不应使用。

（`Await`对于此类情况，该对象是必要的逃生舱口，但在整个应用程序代码中使用它而不考虑其语义可能会导致更慢、更少并行执行。例如，如果您需要确保回调以某些指定的顺序执行， ，还有其他替代方法，例如`andThen`和`map`上的方法`Future`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:06:02.050

我认为这里的问题是时机。您未来的代码很可能在单独的守护线程中运行。我认为应用程序完成得非常快，并且这个守护线程没有足够的时间来正确执行（应用程序不会等待守护线程完成）。但这也是非常依赖系统的行为。对我来说，它打印：

```
Test print before future
Test print after future
Hello future! 
```

然后退出（我使用的是 Scala 2.10.0-M3）。您可以尝试以下以对其进行测试 - 只需将主执行线程置于睡眠状态几秒钟，然后查看是否`Hello future!`打印：

```
import scala.concurrent.Future
import scala.concurrent.future

object Test {
    def main(args: Array[String]) {
        println("Test print before future")

        val s = "Hello"
        val f = future {s + " future!"}
        f onSuccess {case v => println(v)}

        println("Test print after future")

        Thread.sleep(3000) 
        println("Test print at the end.")
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-27T14:33:19.150

我只想补充一点，一般来说，期货没有运行的另一种可能性是：达到线程池限制。

在您的情况下，正如其他人所指出的那样，这可能只是一个时间问题，但作为未来参考，请考虑以下示例：

```
import scala.concurrent._
import scala.concurrent.ExecutionContext.Implicits.global
import scala.concurrent.duration.Duration

object FutureDebug {
  def main( args: Array[String] ) {

    for (i <- Range(0, 4)) {
      future {
        while (true) {
          Thread.sleep(1000)
          println("I'm doing stupid things in a future")
        }
      }
    }

    println("(1) reached? yes")
    val fut = future {
      for (i <- Range(0, 1000)) {
        println("never reached " + i)
      }
      3.14
    }    
    println("(2) reached? yes")
    Await.result(fut, Duration.Inf)
    println("(3) reached? no")
  }
} 
```

在我的机器上，默认的全局执行上下文只有 4 个线程。由于工作线程忙于执行 4 个无意义的 future，因此下面的 future 将永远不会运行。这就是为什么人们应该小心默认执行上下文，并且在处理多个（真正）长时间运行的期货时最好[指定自己的执行上下文。](https://stackoverflow.com/a/15285441/1804173)

# jquery - 如何在 jQuery UI 中创建左滑效果？

> ID：10565477
> 
> 赞同：2
> 
> 时间：2012-05-12T16:29:42.277
> 
> 标签：jquery, jquery-ui

我一直在尝试创建向左滑动的效果以在加载栏后显示我的页面。我试图修改从网站下载的一段代码。我使用以下代码行来显示除法...

```
$("#wrapper").show("slide", { direction: "left" }, 1000); 
```

该代码在 tryit 编辑器 ( [http://www.w3schools.com/js/tryit.asp?filename=tryjs_statements](http://www.w3schools.com/js/tryit.asp?filename=tryjs_statements) ) 中运行良好，但在浏览器中运行良好。

这是我的演示页面...

[http://dl.dropbox.com/u/39803954/loading/index.html](http://dl.dropbox.com/u/39803954/loading/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:38:59.700

您在页面中包含了 JQuery 库两次。在第*7*行和*第 12*行。它会导致错误。

只需删除第*12*行的那些，因为它是旧版本（v1.3.1）。

# spring - 关于 Spring 3 框架的一堆问题

> ID：10565481
> 
> 赞同：3
> 
> 时间：2012-05-12T16:30:36.160
> 
> 标签：spring, spring-mvc, spring-aop, spring-annotations

以下是阅读 Spring Reference 产生的问题，请帮助。

(1) 我是否需要手动创建 ApplicationContext？我是否需要第二个 AplicationContext 实例？

(2) 我们有以下配置说明：

```
<context:annotation-config/> 
<context:component-scan base-package=".."/> 
<mvc:annotation-driven/> 
```

这些说明是否重复？在哪些情况下是，在哪些情况下不是？

(3) 我对 Spring 引入的从字符串转换为对象的所有方式感到有些困惑：PropertyEditor、Conversions、Formatting.. 这是一个简单的用例：我有一个 Spring MVC 控制器来处理一些 POST 请求。该请求是填写某些表格的结果。表单是某个实体的 Web 表示。因此，假设用户提交了一个新的项目表单。在该表单中存在要从现有经理列表中选择的日期字段和经理姓名字段。输入的日期应转换为 Project 对象的 Date 属性，并将经理的名称转换为 Manager 属性，由该名称创建或定位（即我想将 Manager 注入到他的项目中）。在这种情况下我应该使用什么？属性编辑器、格式化程序，还有别的吗？

（4）一般情况下，我可以说所有在classpath上找到的@interface类都可以被Spring用作注解吗？换句话说，我怎么知道哪些注解可以在我的项目中使用？所有这些都可以在我的类路径中找到，或者我需要以某种方式注册它们？

（5）我尝试在没有aspectj.jar的情况下使用spring aop：刚刚创建了一个Aspect并为这个aspect添加了XML定义（没有任何注释）。结果它抛出“找不到类异常：org/aspectj/weaver/BCException”。所以看起来我不能在没有 aspectJ 库的情况下使用 Spring AOP？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T16:46:45.257

> (1) 我是否需要手动创建 ApplicationContext？我是否需要第二个 AplicationContext 实例？

Spring 通常用于两种环境——Web 开发和桌面应用程序/独立服务器。在前一种情况下，`ApplicationContext`它是通过[`ContextLoaderListener`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/context/ContextLoaderListener.html)定义在 Servlet 3.0 容器中`web.xml`或容器中自动创建的。[`WebContextInitializer`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/WebApplicationInitializer.html)

在后一种情况下（独立应用程序），您负责创建*和销毁*应用程序上下文。

* * *

> (2) 我们有以下配置说明：

`<context:component-scan base-package=".."/>`提供`<context:annotation-config/>`加（惊喜！）组件扫描的所有功能。`<mvc:annotation-driven/>`是完全独立的，它可以识别[spring-mvc](/questions/tagged/spring-mvc "显示标记为“spring-mvc”的问题")注释，如`@Controller`.

* * *

> [...]输入的日期应转换为 Project 对象的 Date 属性[...]

在以下范围内注册自定义编辑器`@Controller`：

```
@Controller
public class FooController {
    @InitBinder
    public void binder(WebDataBinder binder) {
        binder.registerCustomEditor(Date.class, new PropertyEditorSupport() {
            public void setAsText(String value) {
                try {
                    setValue(new SimpleDateFormat("yy-MM-dd HH:mm:ss").parse(value));
                } catch (ParseException e) {
                    setValue(null);
                }
            }
        });
    }
} 
```

* * *

> [...]我怎么知道哪些注解可以在我的项目中使用？[...]

前段时间我发现了这个[很棒的注释支持表（我不是作者）。](https://spreadsheets.google.com/pub?hl=en_US&hl=en_US&key=0Am_zV4_vRvfVdF9abzkwTTFCRkQwY3hrLVh6SE05ZHc&output=html)它会告诉您何时启用哪些注释。

* * *

> 所有这些都可以在我的类路径中找到

[`@Inject`](http://docs.oracle.com/javaee/6/api/javax/inject/Inject.html)如果在 CLASSPATH 上找到则启用，其他注解需要手动启用，见上文。

* * *

> 所以看起来我不能在没有 aspectJ 库的情况下使用 Spring AOP？

如果您只使用接口代理（即您只在实现至少一个接口的类上应用方面），您可以在没有 CGLIB 的情况下使用 Spring。否则，您需要 CGLIB 来动态创建子类。

# linux - 为什么linux重定向丢失信息？

> ID：10565482
> 
> 赞同：0
> 
> 时间：2012-05-12T16:30:40.913
> 
> 标签：linux, shell, redirect

我写了一个这样的脚本：

```
#!/bin/bash
LOG_PATH=/root/cngiqos-log
LOG_NAME=term.log
TERM_PATH=/home/bnrcqos/qos_M11/term
test -d $LOG_PATH || mkdir -p $LOG_PATH
routeID='M11'
if [ `ps -ef | grep 'term$' | grep -v grep | wc -l` -gt 0 ]; then
    echo $routeID' term process is already running'
else
    cd $TERM_PATH
    (nohup ./term > $LOG_PATH/$LOG_NAME 2>&1 &)
fi 
```

然后我输入“tail -f /root/cngiqos-log/term.log”，查看日志，日志丢失信息，日志只输出部分日志，不再输出。但是当我输入“./term”并在fg中运行它时，输出很好。有没有人知道为什么？是系统错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:40:22.567

也许你只是得到你所要求的？`tail`默认情况下只给出最后 10 行。

# php - 如何使用 php 解析图像提要

> ID：10565483
> 
> 赞同：1
> 
> 时间：2012-05-12T16:30:42.997
> 
> 标签：php, xml, parsing

使用 Wikipedia API 链接获取有关一些世界知名人物/事件的主要图像。

示例：（[斯坦尼斯劳·马泰](http://en.wikipedia.org/w/api.php?action=query&list=allimages&aiprop=url&format=xml&ailimit=1&aifrom=Stanislao%20Mattei)）

这将显示如下 ![维基百科 API Stanislao Mattei](../Images/1db247df91c6c4fad339ecda3dd9dfbd.png)

**现在我的问题** 是我想解析 xml 以显示要显示的图像 url

这是我愿意使用的代码~感谢[ccKep](https://stackoverflow.com/users/1179287/cckep) ~

```
<?PHP
ini_set("user_agent","Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1");

$url = "http://en.wikipedia.org/w/api.php?action=query&list=allimages&aiprop=url&format=xml&ailimit=1&aifrom=Stanislao Mattei";

$xml = simplexml_load_file($url);

$extracts = $xml->xpath("/api/query/allimages");

var_dump($extracts);
?> 
```

它应该以数组形式给出结果

我如何才能在其中获得要显示的图像的确切网址应该是：

```
http://upload.wikimedia.org/wikipedia/en/a/a1/Stanislaus.jpg 
```

把它放在html代码中

```
<img src="http://upload.wikimedia.org/wikipedia/en/a/a1/Stanislaus.jpg"> 
```

~ 非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:43:16.493

你试过了吗`$xml->query->allimages->img->attributes()->url`

* * *

您的代码将如下所示：

```
<?php
ini_set("user_agent","Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1");

$url = "http://en.wikipedia.org/w/api.php?action=query&list=allimages&aiprop=url&format=xml&ailimit=1&aifrom=Stanislao Mattei";

$xml = simplexml_load_file($url);

$url = $xml->query->allimages->img->attributes()->url;

echo "URL: ".$url . "<br/>";
echo '<img src="'.$url.'">';

?> 
```

# matlab - MATLAB：更改 XTickLabel、YTickLabel 等的字体

> ID：10565484
> 
> 赞同：4
> 
> 时间：2012-05-12T16:30:46.247
> 
> 标签：matlab

在 MATLAB 中，可以更改绘图的 、 、 等`ylabel`事物`xlabel`的字体名称，例如`title`

```
ylabel(y_string, 'FontName', 'Palatino') 
```

但是，是否可以更改 XTicks、YTicks 等的字体？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T16:54:04.957

我以前曾与刻度字体打架。我认为他们通常使用轴字体，在这种情况下是这样的：

```
set(gca, 'FontName', 'Palatino'); 
```

应该管用。如果这不成功，您可以尝试从文件交换中[格式化刻度标签。](http://www.mathworks.com/matlabcentral/fileexchange/15986)它将刻度替换为文本对象，因此可以像使用任何文本对象一样完全自定义格式（我似乎记得前一段时间看过它；您可能需要修改代码来选择字体）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-05T08:53:39.040

```
set(gca,'XTickLabel',{labelList}, 'FontSize',8,'FontName','Times') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T16:54:08.443

您需要使用以下`gca`命令获取当前轴的句柄：

```
set(gca, 'FontName', 'Palatino'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-29T05:16:58.297

在这里回答：[如何更改x轴的字体大小？](https://stackoverflow.com/questions/21711606/how-to-change-font-size-of-x-axis)

感谢用户 Marc Manzano，这是该帖子的答案。请注意，它会更改字体（您要求的）和字体大小（这是我找到此线程的方式）：

```
plot(X)
set(gca, 'FontName', 'Arial')
set(gca, 'FontSize', 12)
ylabel('Label Y axis')
xlabel('Label X axis') 
```

重要的一点是您在and命令`set()`之前执行命令。我不确定它*究竟*为什么/如何工作，但它在对数图上对我有用。`ylabel``xlabel`

# c# - 跟踪和检测系列中缺失数据的技术（例如安全日志数据）

> ID：10565487
> 
> 赞同：2
> 
> 时间：2012-05-12T16:31:01.740
> 
> 标签：c#, algorithm, data-structures, computer-science, validation

我有一个数据流向我发送具有不断增加的索引 (n++) 的数据。其中一些数据可能会乱序发送、丢失或需要重新传输。

**例子**

1.  假设我有一个由我的应用程序监控的安全日志文件。坏人可能会抑制或阻止一些条目的传输。我想警惕这个事实。

2.  还假设此数据可能会乱序发送到日志记录器。

似乎这种逻辑无处不在，我不想重新发明轮子并做一些效率不高的事情。

**问题**

我应该如何实现（或存在哪些参考实现）以允许我跟踪乱序接收的数据并可能包含序列中的缺失数据？

（也感谢您在标记此问题方面的帮助）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:24:34.493

好的，我使用链表做到了这一点。必须在某个地方*为此*进行先前的工作……无论哪种方式，这都针对本质上或多或少增加的输入序列进行了优化。

如果您发现任何错误或我可以进行的改进，请告诉我

```
 public class ContiguousDataValue
    {
        public int UpperInt { get; set; }
        public int LowerInt { get; set; }

        public override string ToString()
        {
            return "Upper" + UpperInt + " Lower" + LowerInt; 
        }
    }

public class ContiguousData 
{
    LinkedList<ContiguousDataValue> ranges = new LinkedList<ContiguousDataValue>();

    public void AddValue(int val)
    {
        for (LinkedListNode<ContiguousDataValue> range = ranges.Last; range != null; range = range.Previous)
        {
            if (val > range.Value.UpperInt)
            {
                // increment current node if applicable 
                if (val == range.Value.UpperInt + 1)
                    range.Value.UpperInt = val;
                else
                    ranges.AddAfter(range, new ContiguousDataValue() { UpperInt = val, LowerInt = val });
                return;
            }
            else if (val < range.Value.LowerInt)
            {
                if (val == range.Value.LowerInt - 1)
                {
                    range.Value.LowerInt = val;
                    return;
                }
                else
                {
                    continue;
                }
            }
        }
        // Anything that reaches this line is either a very new low value, or the first entry
        ranges.AddLast(new ContiguousDataValue() { UpperInt = val, LowerInt = val });
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:53:39.940

首先，如果你有潜在的竞争条件，你应该修复它。

TCP通过等待克服了数据乱序的问题。如果数据包 6 在数据包 4 之后到达，TCP 将一直等到数据包 5 到达。如果数据包 5 在一段时间内没有到达，TCP 将要求重新传输数据包 5，这将导致数据包 5 被重新发送。

（注意 - 我知道 TCP/IP 计算字节而不是数据包，这在这里无关紧要）

如果您可以要求您的“哑嵌入式设备”重新传输，您可以使用相同的技术。我打赌你不能这样做，所以你需要求助于另一种机制。它可以类似于 TCP 所做的。您只需要决定要等多长时间，直到您决定缺少一个条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T16:39:53.967

您在 OQ 中提到了规范实现：TCP。所以通过 TCP 发送数据有一些受欢迎的结果，

*   每当（如果）数据不按顺序到达时，您可以放心地假设您的发送或接收过程行为不端。
*   每当序列中缺少数据时，您可以假设相同
*   确认也是如此，因此您的发送过程始终具有完美的最后已知良好状态。

我强烈建议简单地使用 TCP 作为您的传输，并且（如果这不是直接可行的）简单地将 TCP 数据报封装到您的其他网络流中。

简而言之：使规范实现成为您的实现。

# c# - C# 中的线程异常错误：跨线程操作无效：从跨线程操作访问的控件“lblp4”无效

> ID：10565488
> 
> 赞同：2
> 
> 时间：2012-05-12T16:31:02.317
> 
> 标签：c#, multithreading

首先，对不起我的英语语言不好，我是初学者程序员。在我的项目中，我使用线程类，但是完成后我看到了这个异常：

> 跨线程操作无效：控件“lblp4”从创建它的线程以外的线程访问。

在我的项目中，我`Synchronize`从`Philosopher`类中调用 5 个函数`Form1`：

`Philosopher`班级：

```
namespace AZsys 
{
class Philosopher 
{
    public Int32 i;

    public bool e, th;
    public Philosopher()
    {

    }
    public void main()
    {
        lock (AZsys.Program.frm.locker)
        {
            while (true)
            {
                if (i < 0 || i > 4)
                {
                    System.Windows.Forms.MessageBox.Show("error");
                    break;
                }
                else
                {
                    think();
                    AZsys.Program.frm.chopstick[i].WaitOne();
                    AZsys.Program.frm.chopstick[(i + 1) % 5].WaitOne();
                    eat();
                    AZsys.Program.frm.chopstick[(i + 1) % 5].Release();
                    AZsys.Program.frm.chopstick[i].Release();
                }
            }
        }
        Thread.Sleep(100);
    }
    private void eat()
    {
            switch (i)
            {
                case 1:
                    AZsys.Program.frm.lblp1.Text = "Eating...";
                    break;
                case 2:
                    AZsys.Program.frm.lblp2.Text = "Eating...";
                    break;
                case 3:
                    AZsys.Program.frm.lblp3.Text = "Eating...";
                    break;
                case 4:
                    AZsys.Program.frm.lblp4.Text = "Eating...";
                    break;
                case 5:
                    AZsys.Program.frm.lblp5.Text = "Eating...";
                    break;
            }
        e = true;

        for (int j = 0; j < 992; j++)
        {
            if (j % 8 == 0)
                e = true;
        }
        e = false;
    }

    private void think()
    {
            switch (i)
            {
                case 1:
                    AZsys.Program.frm.lblp1.Text = "Thinking..."+Thread.CurrentThread.Name.ToString();
                    break;
                case 2:
                    AZsys.Program.frm.lblp2.Text = "Thinking..."+Thread.CurrentThread.Name.ToString();
                    break;
                case 3:
                    AZsys.Program.frm.lblp3.Text = "Thinking..."+Thread.CurrentThread.Name.ToString();
                    break;
                case 4:
                    AZsys.Program.frm.lblp4.Text = "Thinking..."+Thread.CurrentThread.Name.ToString();
                    break;
                case 5:
                    AZsys.Program.frm.lblp5.Text = "Thinking..." + Thread.CurrentThread.Name.ToString();
                    break;
            }

        th = true;

        for (int j = 0; j < 9924; j++)
        {
            if (j % 8 == 0)
                th = true;
        }
        th = false;
    }
} 
```

即使在这段代码中，我也使用了 lock ( `locker`) 但不起作用！！！

`Form1`班级：

```
 public partial class Form1 : Form
{
    public  Semaphore[] chopstick;
    public  object locker;

    private Philosopher ph1;
    private Philosopher ph2;
    private Philosopher ph3;
    private Philosopher ph4;
    private Philosopher ph5;

    public Form1()
    {
        InitializeComponent();
        chopstick = new Semaphore[5];

    }

    private void Form1_Load(object sender, EventArgs e)
    {
        locker = new object();
        ph1 = new Philosopher();
        ph1.i = 1;
        ph2 = new Philosopher();
        ph2.i = 2;
        ph3 = new Philosopher();
        ph3.i = 3;
        ph4 = new Philosopher();
        ph4.i = 4;
        ph5 = new Philosopher();
        ph5.i = 5;
    }

    private void lblp2_Click(object sender, EventArgs e)
    {

    }

    private void btnstart_Click(object sender, EventArgs e)
    {
        Thread.CurrentThread.Priority = ThreadPriority.Lowest;

        Thread t1 = new  Thread(ph1.main);
        Thread t2 = new  Thread(ph2.main);
        Thread t3 = new Thread(ph3.main);
        Thread t4 = new Thread(ph4.main);
        Thread t5 = new Thread(ph5.main);

        t1.Name = "t1";

        t2.Name = "t2";

        t3.Name = "t3";

        t4.Name = "t4";

        t5.Name = "t5";

      t1.Priority = ThreadPriority.Highest;
      t2.Priority = ThreadPriority.Highest;
      t3.Priority = ThreadPriority.Highest;
      t4.Priority = ThreadPriority.Highest;
      t5.Priority = ThreadPriority.Highest;
     // Thread.Sleep(100);
        t4.Start();
        Thread.Sleep(100);
        t1.Start();
        Thread.Sleep(100);
        t2.Start();
        Thread.Sleep(100);
        t3.Start();
        Thread.Sleep(100);
        t5.Start();
        Thread.Sleep(100);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T16:42:08.153

正如异常所暗示的，您正在从创建控件的线程以外的线程访问控件（具体来说，您的 ph1..5 线程都尝试访问 UI）。

要更正此问题，您需要`Invoke()`在控件上使用该方法，以便在主 UI 线程上执行访问。

也许添加一个函数`Philosopher`如下：

```
private void UpdateText(Label label, string text)
{
    // If the current thread is not the UI thread, InvokeRequired will be true
    if (label.InvokeRequired)
    {
        // If so, call Invoke, passing it a lambda expression which calls
        // UpdateText with the same label and text, but on the UI thread instead.
        label.Invoke((Action)(() => UpdateText(label, text)));
        return;
    }
    // If we're running on the UI thread, we'll get here, and can safely update 
    // the label's text.
    label.Text = text;
} 
```

然后，每当你有类似的东西：

```
AZsys.Program.frm.lblp1.Text = "Eating..."; 
```

将其替换为：

```
UpdateText(AZsys.Program.frm.lblp1, "Eating..."); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-03T23:48:57.217

在我的情况下，目的是更改组件“Janus.Windows.Ribbon.CommandBase”（适用于任何其他类型）的行为，以从其他表单启用或禁用。并且行为更改是通过监听组件更改的 onchange 方法完成的。

此实现是按照 Microsoft 文档 ( [https://docs.microsoft.com/es-es/dotnet/desktop/winforms/controls/how-to-make-thread-safe-calls-to-](https://docs.microsoft.com/es-es/dotnet/desktop/winforms/controls/how-to-make-thread-safe-calls-to-) ) 建议的步骤执行的windows-forms-controls?view = netframeworkdesktop-4.8)

首先，使用必须是要更改的属性的数据类型的参数声明安全调用。

```
private delegate void SaveCallDelegate(bool enable); 
```

用于捕获正在修改的组件的属性的变量

```
private CommandBase cm; 
```

OnChange 事件查询是否应该安全地调用组件，如果是，它会调用“SaveCallChange”方法并使用要更改的值。

```
protected override void OnChanged(Command command){
   base.OnCommandChanged(command);

   foreach (KeyValuePair<CommandBase, List<string>> p in Invokers)
   {
      if (p.Key.Ribbon != null && p.Key.Ribbon.InvokeRequired)
      {
         cm = p.Key;
         SaveCallChange((command.Status == CommandStatus.Enabled));
      }
      else {
         p.Key.Enabled = (command.Status == CommandStatus.Enabled);
      }
   }
} 
```

Invokers 来自继承主类的 EventCommandAdapter 类（“Microsoft.Practices.CompositeUI.Commands”）。

最后有两种方法可以进行安全的变更过程

```
private void SaveCallChange(bool enable){
    var e = new SaveCallDelegate(setEnable);
    cm.Ribbon.Invoke(e, new object[] { enable });
}

private void setEnable(bool enable) {
    this.cm.Enabled = enable;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T16:43:35.000

我可以看到的主要问题是从线程访问用户界面

# javascript - 放大后保持 SVG 中的文本可见

> ID：10565490
> 
> 赞同：-1
> 
> 时间：2012-05-12T16:31:19.673
> 
> 标签：javascript, text, svg, zooming

我在我的 SVG 中定义了以下文本元素：

```
var data = document.createTextNode("Testing text in SVG");  
var text = document.createElementNS(xmlns, "text");
text.setAttributeNS(null, "font-size",'60');
text.setAttributeNS(null, "x", 2000);
text.setAttributeNS(null, "y", 100);
text.setAttributeNS(null, "fill", "black");
text.setAttributeNS(null, "text-anchor", "middle");
text.setAttributeNS(null, "id", "textLabel");
text.appendChild(data);
Root.appendChild(text); 
```

不幸的是，一旦我放大 SVG，文本就不再可见，这是有道理的，因为 x 和 y 坐标是硬编码的。我该如何解决这个问题，因为无论我放大和缩小多少，我都希望文本始终在 SVG 的顶部中间区域可见？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:39:33.087

尝试将您的文本元素添加到`svg`命名空间，而不是`xmlns`：

```
var text = document.createElementNS("http://www.w3.org/2000/svg", "text"); 
```

“硬编码”坐标无关紧要。如果元素添加正确，这些应该是相对于 svg 画布的坐标。

# android - 在android中建立与MySQL的池连接

> ID：10565491
> 
> 赞同：2
> 
> 时间：2012-05-12T16:31:31.373
> 
> 标签：android, mysql, connection-pooling

我需要从我的 android 应用程序访问 MySQL 数据库。现在所有的工作都通过

```
DriverManager.getConnection(url); 
```

等等。但是我必须从多个线程访问数据库，所以我必须使用连接池。

问题 1\. 是

```
com.mysql.jdbc.jdbc2.optional.MysqlDataSource ds = new com.mysql.jdbc.jdbc2.optional.MysqlDataSource(); 
```

创建数据源的正确方法？

问题 2\. 如果我编写上一行代码，我的应用程序可以编译并安装在设备（不是模拟器）上，但我得到一个奇怪的

```
java.lang.NoClassDefFoundError: com.mysql.jdbc.jdbc2.optional.MysqlDataSource` 
```

，我无法使用 try/catch 处理程序捕获：

```
try
{
com.mysql.jdbc.jdbc2.optional.MysqlDataSource a = new com.mysql.jdbc.jdbc2.optional.MysqlDataSource();
}
catch (Exception e)
{
I don't get here. The app just crashes, as if I had no try/catch block.
} 
```

问题3、我将mysql-connector-java-5.1.20-bin.jar复制到设备中，写了如下代码：

```
try
{
final String str = Environment.getExternalStorageState();
final File sd = getActivity().getExternalFilesDir(null);
final File file = new File(sd, "mysql-connector-java-5.1.20-bin.jar");

boolean b = file.exists();

final URLClassLoader cl = URLClassLoader.newInstance(new URL[] {file.toURI().toURL()} );
cl.loadClass("com.mysql.jdbc.jdbc2.optional.MysqlDataSource"); //$NON-NLS-1$
}

catch (Exception e)
{
new AlertDialog.Builder(getActivity())
.setMessage(ObjectConverter.throwable2String(e))
.show();
} 
```

该文件已找到，但

```
cl.loadClass() 
```

失败了

```
java.lang.NullPointerException
at java.net.URLClassLoader.getPermissions(URLClassLoader.java:614)
at java.security.SecureClassLoader.getPD(SecureClassLoader.java:140)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:93)
at java.net.URLClassLoader.access$600(URLClassLoader.java:55)
at java.net.URLClassLoader$URLJarHandler.createClass(URLClassLoader.java:364)
at java.net.URLClassLoader$URLJarHandler.findClass(URLClassLoader.java:303)
at java.net.URLClassLoader.findClass(URLClassLoader.java:748)
at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
at ru.mypkg.myapp.func(myapp.java:367)
at android.view.View.performClick(View.java:3511)
at android.view.View$PerformClick.run(View.java:14110)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-24T16:35:12.813

这个问题已有 6 年的历史，Mark 是正确的，几乎在您能想到的所有场景中，Android 上的 JDBC 都与尝试在浴缸中使用烤面包机一样明智。然而，有时我们做事情是因为我们可以而不是因为我们必须这样做，今天我有一个正当的理由想要这样做（对于在不寻常的环境中运行的特定非常小众的应用程序），这就是我发现这个问题的方式。

解决第一个问题`NoClassDefFoundError`，它没有被`catch`块捕获的原因是因为它`Error`不是一个`Exception`. 两者都`Error`继承`Exception`自`Throwable`，所以你可以抓住它：

```
catch (Throwable t)
{
    // This will catch NoClassDefFoundError
} 
```

我相信不是`MySqlDataSource`它找不到，而是它所依赖的类或接口之一——在我的例子中是`javax.naming.Referenceable`. Android 不提供该`javax.naming`包，因此尝试使用 MySQL 的 Connector/J JDBC 驱动程序的池化功能不会让您走得太远（您可以尝试提供缺少的依赖项，但这条路可能会导致疯狂）。

相反，您可能会更幸运地使用第三方连接池实现。有各种 Java 库可以做到这一点。其中一些将在 Android 上运行。我已经验证确实有效的一个是[HikariCP](https://brettwooldridge.github.io/HikariCP/)。[这里](https://github.com/brettwooldridge/HikariCP#initialization)有配置它的说明，特别是对于 MySQL，[这里](https://github.com/brettwooldridge/HikariCP/wiki/MySQL-Configuration)。

# javascript - CSS / jQuery 改进的页面流

> ID：10565493
> 
> 赞同：0
> 
> 时间：2012-05-12T16:31:55.537
> 
> 标签：javascript, jquery, html, css

我想让我的网页更流畅，但我不知道我在搜索它叫什么！

假设我有以下 HTML：

```
<section>
  <article>
    <h1>Article Header</h1>
    <p>Article content</p>
  </article>
  <article>
    <h1>Article Header</h1>
    <p>Article content</p>
    <p>More content</p>
  </article>
  <article>
    <h1>Article Header</h1>
    <p>Article content</p>
    <p>More content</p>
    <p>More content</p>
  </article>
  <article>
    <h1>Article Header</h1>
    <p>Article content</p>
    <p>More content</p>
    <p>More content</p>
    <p>More content</p>
  </article>
  <article>
    <h1>Article Header</h1>
    <p>Article content</p>
    <p>More content</p>
    <p>More content</p>
  </article>
  <article>
    <h1>Article Header</h1>
    <p>Article content</p>
    <p>More content</p>
  </article> 
```

和以下CSS

```
section article {
  width: 49%;
  display: inline-block;
} 
```

这使得文章在该部分中并排显示，但文章大小不同时存在间隙。

我将如何使它流动，以便没有间隙（即填充可用空间）？

如果需要，我对使用 jQuery / JavaScript 的解决方案持开放态度。

小提琴补充说：

[http://jsfiddle.net/Yn4et/](http://jsfiddle.net/Yn4et/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:49:42.500

我不确定我是否正确理解您想要的内容，但我认为这是以下问题的重复：

[如何使用 CSS 创建网格/平铺视图？](https://stackoverflow.com/questions/8470070/how-to-create-grid-tile-view-with-css)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:39:28.763

```
section {
   width: 100%;
}

article {
  width: 50%;
  display: inline-block;
  margin: 0;
  padding:0;
} 
```

# zend-framework - Zenx Jquery Datepicker 禁用星期日和节假日

> ID：10565496
> 
> 赞同：0
> 
> 时间：2012-05-12T16:32:08.847
> 
> 标签：zend-framework, jquery-ui-datepicker, zendx

我正在使用 Zendx Jquery 来实现数据选择器。我需要禁用某些日期，我可以通过手动方式将 JS 添加到布局 html 页面，但 Zendx 会为您在页面上呈现它。

将 JS 添加到布局页面时，以下代码有效：

```
var unavailableDates = [
new Date(2012, 1, 20).valueOf(),
new Date(2012, 1, 27).valueOf()
];

function unavailable(date) {
if (date.getDay() === 1 && $.inArray(date.valueOf(), unavailableDates) < 0) {
    return [true, ""];
} else {
    return [false, "", "Unavailable"];
}

$(document).ready(function() {
$("#date").datepicker({
    beforeShowDay: unavailable
});
});​ 
```

当我使用 Zendx 执行此操作时，我的表单代码如下：

```
$birthdate = new ZendX_JQuery_Form_Element_DatePicker('birthdate');
    $birthdate->setLabel('Return Date:')                    
                ->setJQueryParam('dateFormat', 'dd.mm.yy')
                ->setJQueryParam('changeYear', 'false')
                ->setJqueryParam('changeMonth', 'true')
                ->setJqueryParam('regional', 'en')
                ->setJqueryParam('yearRange', "2012:2012")  
                ->setJqueryParam('minDate', +1)
                ->setJqueryParam('maxDate', "+1m +10d")                 
                //->setValue(Zend_Date::now()->toString('dd.MM.yyyy'))              
                //->setJqueryParam('beforeShowDay', unavailableDates)
                ->addValidator(new Zend_Validate_Date(
                array(
                'format' => 'dd.mm.yyyy',
                )))
                ->setRequired(true); 
```

它呈现在页面顶部：

```
<script type="text/javascript"> 
```

//

$(document).ready(function() { $("#birthdate").datepicker({"dateFormat":"dd.mm.yy","changeYear":"false","changeMonth":"true", "regional":"en","yearRange":"2012:2012","minDate":1,"maxDate":"+1m +10d","beforeShowDay":"unavailableDates"}); }); //]]>

我得到一个控制台错误：

未捕获的类型错误：对象不可用日期没有“应用”方法

它不会调用函数availableDates，但它不会工作。有人有同样的问题吗？

干杯

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:59:02.047

我通过更改视图禁用 Zend Rendering Javascript onLoad 对其进行了排序。所以现在 Zendx 只加载到库中，我可以在布局中运行我自己的 datepicker 代码:)！

this->view->jQuery() ->setRenderMode(ZendX_JQuery::RENDER_LIBRARY);

# line - Notepad++ 哪个正则表达式或宏可以在不手动选择的情况下为下一行[先前搜索的单词]添加书签？

> ID：10565499
> 
> 赞同：1
> 
> 时间：2012-05-12T16:32:18.343
> 
> 标签：line, notepad++

**哪个正则表达式或宏可以在不手动选择下一行的情况下为下一行添加书签？** 我的意思是：

1.  **之前**：
    ![](../Images/acde2d51bd15a7dc636a9e722c0a7be0.png)

2.  **之后**：
    ![](../Images/5549061d440c5b65b679520e7ca8e8f7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-21T21:15:27.127

宏是：`F3`, `Down arrow`, `Ctrl+F2`.

# facebook - Foursquare 如何在其 Open Graph 地图上添加自定义图像注释？

> ID：10565510
> 
> 赞同：7
> 
> 时间：2012-05-12T16:33:42.683
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, foursquare

当用户在其应用程序上执行签入（并假设所述用户链接到 Facebook）后，foursquare 使用 Open Graph 时，foursquare 会向 Open Graph 发布此签入数据的样本。有趣的是他们没有标准地图。他们的地图上有一个针点，其中注释嵌入了自定义图像。它看起来有点像这样：

![在此处输入图像描述](../Images/603bcd2531e59b227f600155e7d16826.png)

我很好奇这是怎么做到的？我可以获得一个带有针点或简单图像视图的常规地图，但我无法将此自定义注释嵌入到地图视图中。

据我所知，文档中没有任何内容显示如何进一步自定义地图布局或将任何其他元数据添加到 GeoPoint 对象以获得此附加功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T18:25:19.570

它目前仅由 Foursquare 使用 - 实际上它现在是一个测试。

有计划更广泛地开放它，但现在没有什么要宣布的 - 进一步开放时将在博客上宣布 - [https://developers.facebook.com/blog/](https://developers.facebook.com/blog/)

# asp.net - 繁忙网站中的随机数冲突

> ID：10565511
> 
> 赞同：0
> 
> 时间：2012-05-12T16:33:48.243
> 
> 标签：asp.net

我有一个 ASP.net 网站，其中包含以下代码：

```
Random r = new Random();

string mustBeUnique = DateTime.Now.Ticks + r.Next(1000); 
```

似乎认为由于 Random 是基于时间的，因此同时发生的两个请求会生成相同的随机数。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:38:44.643

如果您只是在寻找唯一标识符，我建议您改用“Guid”。

它的目的是成为一个全球唯一的标识符：

```
string mustBeUnique = Guid.NewGuid().ToString(); 
```

[http://msdn.microsoft.com/en-us/library/system.guid.aspx](http://msdn.microsoft.com/en-us/library/system.guid.aspx)

# php - 无法解释为什么 PHP 中的“if else”不能正常工作

> ID：10565512
> 
> 赞同：1
> 
> 时间：2012-05-12T16:34:09.873
> 
> 标签：php, sql

这是表单处理

```
if(isset($_POST['clear'])) {
    mysql_query("DELETE FROM md5dictionary");
}

if(isset($_POST['submit'])) {
    if(strlen($_POST['keywords']) < 1 || ctype_space($_POST['keywords']) == true) {
        $errors['blank'] = "<span class='error'> Please insert a word </span>";
    } else {
        $newword = $_POST['keywords'];
        $db_checkExist = mysql_query('SELECT * FROM md5dictionary WHERE keywords="' . $newword . '"');
        echo mysql_num_rows($db_checkExist) . "<br />";
        if(mysql_num_rows($db_checkExist) > 0) {
            echo "outside else " . mysql_num_rows($db_checkExist);
            $finalResult = "<span class='error'> Failed!!! </span>";
        } else {
            echo "inside else " . mysql_num_rows($db_checkExist);
            $md51 = md5($newword);
            $md52 = md5($md51);
            mysql_query('INSERT INTO md5dictionary(keywords, mdFive, mdFive2) VALUES ("' . $newword . '", "' . $md51 . '", "' . $md52 . '")');
            $finalResult = "<span class='success'> Thank you! Wanna add another one? </span>";
        }
    }
} 
```

这是表格

```
<form action="<?php echo $_SERVER["PHP_SELF"]; ?>" method="post">
    <fieldset> Input Form </fieldset>
    <label for="keywords"> Input new Keywords into dictionary: </label>
     <?php echo $finalResult; ?>
     <?php echo $errors['blank']; ?>
        <input name="keywords" type="text" />
        <input name="submit" type="submit" value="Add!!" />
        <input name="clear" type="submit" value="Clear Database" />
</form>
<h1> Datas: </h1>
<?php
    $result = mysql_query("SELECT * FROM md5dictionary");
    $rows = mysql_num_rows($result);
    for ($i = 0; $i < $rows; ++$i) {
        echo "Data " . $i . "<br />";
        echo "keywords: " . mysql_result($result, $i, "keywords") . "<br />";
        echo "md5: " . mysql_result($result, $i, "mdFive") . "<br />";
        echo "md5_2: " . mysql_result($result, $i, "mdFive2") . "<br />";
    }
?> 
```

结果如下：http: [//md5dictionary.hoangminhdat.com](http://md5dictionary.hoangminhdat.com)

问题：为什么它一直说“失败！” 为什么它已成功地将信息插入到我的数据库中？应该没有拼写错误

我知道解决我的愚蠢问题会很耗时，但请，我自己无法解释！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:41:44.533

我已经测试了您提供的网络链接。

如果我插入一个单词，那么我会得到“在其他内部”，它看起来像是被插入了。

如果我很快再次输入这个词，那么我会“失败”。

所以我认为没有问题，这不是你想要实现的吗？否则，请重新考虑您的问题并细化什么不适合您以及何时。

**编辑：** 如果你想要成功的消息，那么你需要另一个：

```
echo $finalResult; 
```

在你定义了 $finalResult.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:42:25.983

当您说它插入并且给出“失败”时，我不确定您的意思。你真的是说“INSERT INTO md5dictionary ...”被执行了，你有“失败！！！”代码显示？

如果是这样，我建议您调查并修改您的表单流程，因为最有可能调用自身，表单尝试运行两次，第二次具有空值。

这就是我想出的。

祝你有美好的一天，S。

# c - 在自定义 malloc 中附加调试标头

> ID：10565516
> 
> 赞同：2
> 
> 时间：2012-05-12T16:34:43.007
> 
> 标签：c, pointers, malloc, void-pointers, pointer-arithmetic

我仍然对我的 C 生锈了，我只是没有弄清楚这一点。我想做的是实现我自己的 malloc，这样我就可以跟踪分配并调试对 free() 的丢失调用。我有一个这样的标题：

```
typedef struct MemoryInfo {
  mem_Kind kind;
  unsigned int id;
  struct MemoryInfo* prev;
  struct MemoryInfo* next;
} MemoryInfo; 
```

我的自定义 malloc 看起来像这样：

```
void* my_malloc(mem_Kind kind, unsigned int size) {
  MemoryInfo* mem;

  allocCount++;
  mem = (MemoryInfo*)malloc(sizeof(MemoryInfo) + size);
  mem->id = id;
  mem->kind = kind;
  // set prev/next...

  return mem + sizeof(MemoryInfo); // return pointer to memory after header
} 
```

但我显然弄错了我的指针算术，因为它很快就爆炸了。但是，如果我将 a 添加`void* memory`到我的结构的末尾并执行另一个 malloc ，那么它似乎做得很好，问题是`my_free`如果我这样做我真的无法找到标题。我试图基本上预先添加标题，以便我可以做一些反向指针算法来免费获取标题。

```
void my_free(void* memory) {
  MemoryInfo* mem = memory - sizeof(MemoryInfo); // not correct either
  allocCount--;
  free(mem);
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:45:39.633

我认为您在添加指针时遇到问题。它必须是这样的：

```
return (char*)mem + sizeof(MemoryInfo); // return pointer to memory after header 
```

和

```
void my_free(void* memory) {
  MemoryInfo* mem = (MemoryInfo*)((char*)memory - sizeof(MemoryInfo)); // not correct either
  allocCount--;
  free(mem);
} 
```

顺便一提。看看这个程序。

```
#include <stdio.h>

typedef struct MemoryInfo {
  int kind;
  unsigned int id;
  struct MemoryInfo* prev;
  struct MemoryInfo* next;
} MemoryInfo;

int main()
{
  MemoryInfo* ptr = 0;

  printf("sizeof: %d\n",sizeof(MemoryInfo));
  printf("%d\n",ptr+3);
  return 0;
} 
```

我已将 3 添加到指向 MemoryInfo 的指针，但它的值变为 3*sizeof(MemoryInfo)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:04:49.953

你的指针算法是错误的。在`ptr+1`+1 中已经使用了正确的增量（sizeof *ptr）。如果 ptr 是 char 指针，则必须递增`sizeof *ptr`，但事实并非如此。

```
void *my_malloc(mem_Kind kind, unsigned int size) {
  MemoryInfo  mem;

  allocCount++;
  mem = malloc(sizeof *mem + size);
  mem->id = id;
  mem->kind = kind;
  // set prev/next...

  return mem + 1; // return pointer to memory after header
}

void my_free(void *memory) {
  MemoryInfo *mem = memory; // not correct either
  mem -= 1;
  allocCount--;
  free(mem);
} 
```

另外，请注意 malloc() 和朋友应该返回一个适合每个对象的指针，并且必须与任何对象的*自然*边界对齐。（这可能是 32 位、64 位或您的平台规定的任何内容）例如，您的尺寸可能会因 sizeof (int)==2 和 sizeof (void*) == 8 而失败。（但幸运的是，这似乎是一种非常罕见的情况）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T18:05:59.127

好的做法是这样定义的：

```
struct some_struct {
  size_t data_size;
  struct some_struct  *next, *prev;
  void * struct_data[];
} 
```

我们就是这样：

```
struct some_struct *get_some_struct ( void *buf,size_t buflen,struct some_struct **next){
  *next=0;
  struct some_struct *s=(struct some_struct *)buf;
  if ( s && buflen < sizof(*s) + s->data_size )
    *next = (char*)s + s->data_size;
    return s;
  else
    return 0;
} 
```

因此，如果您需要遍历结构，您可以正确获取缓冲区中下一个结构的偏移量。我只是想让你得到方法。如果你能得到它会很高兴

# mysql - MySQL 无法建立连接

> ID：10565517
> 
> 赞同：0
> 
> 时间：2012-05-12T16:34:45.567
> 
> 标签：mysql, database, connect

我最近创建了一个网页，同时使用了一个 usbWebserver，所以基本上是一个本地服务器。昨天，我购买了一个域和主机，我想将我的文件移动到服务器上。

我已经更改了我的用户名、密码和 url，但是我无法让 mysql_connect 工作。

```
<?php

    $mysqlhost = "mysql04.totaalholding.nl"; 
    $user = "a";
    $passwd = "";

    $mysql = mysql_connect($mysqlhost, mysql_real_escape_string($user), mysql_real_escape_string($passwd));
    if (!$mysql) {
        die('Could not connect: ' . mysql_error());
    }

    $db_selected = mysql_select_db('a_turfjes', $mysql);
    if (!$db_selected) {
        die('Could not connect: ' . mysql_error());
    }

?> 
```

上面的代码是我连接到数据库的方式，它应该可以工作。（请注意，a 不是我的用户名，我的密码也不是空的）。

这些是数据库的属性：

数据库：a_turfjes

外部 MySQL 主机：mysql04.totaalholding.nl

用户：a_admin

我不太确定应该使用哪个用户名，我应该使用来自 cpanel 的用户名和密码（访问 PHPMyAdmin 所必需的），还是使用数据库本身的用户名和密码。

我想要一些关于这个错误的帮助。访问我的 index.php（其中包括 db.php（上面的文件））时，我收到以下错误：

```
Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: Access denied for user 'root'@'localhost' (using password: NO) in /home/a/public_html/turfjes/db.php on line 8

Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: A link to the server could not be established in /home/a/public_html/turfjes/db.php on line 8

Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: Access denied for user 'root'@'localhost' (using password: NO) in /home/a/public_html/turfjes/db.php on line 8

Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: A link to the server could not be established in /home/a/public_html/turfjes/db.php on line 8

Warning: mysql_connect() [function.mysql-connect]: Access denied for user 'root'@'www30.totaalholding.nl' (using password: NO) in /home/a/public_html/turfjes/db.php on line 8
Could not connect: Access denied for user 'root'@'www30.totaalholding.nl' (using password: NO) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:06:26.277

使用数据库本身的用户名和密码，而不是 cpanel。

使用以下方法测试连接：

```
$mysql_host = "localhost"; # Usually doesn"t need modified
$mysql_db = "a_turfjes"; # Database name
$mysql_user = ""; # Username
$mysql_pass = ""; # Password
$link = mysql_connect ($mysql_host,$mysql_user,$mysql_pass);
if (!$link) {
  die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link); 
```

如果成功，访问记录：

```
$query = "SELECT * FROM TableName";
$result = mysql_db_query ($dbname, $query, $link); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:25:12.423

使用数据库用户名和密码。如果数据库托管在另一台服务器上，请将主机名指定给该服务器名

# php - PHP5中的错误..无法加载动态库

> ID：10565521
> 
> 赞同：72
> 
> 时间：2012-05-12T16:35:08.733
> 
> 标签：php

```
root@ip-10-131-9-200:/etc/php5/apache2# php -a
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626+lfs/curl.so' - /usr/lib/php5/20090626+lfs/curl.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626+lfs/mcrypt.so' - /usr/lib/php5/20090626+lfs/mcrypt.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626+lfs/mysql.so' - /usr/lib/php5/20090626+lfs/mysql.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626+lfs/mysqli.so' - /usr/lib/php5/20090626+lfs/mysqli.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626+lfs/pdo.so' - /usr/lib/php5/20090626+lfs/pdo.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626+lfs/pdo_mysql.so' - /usr/lib/php5/20090626+lfs/pdo_mysql.so: cannot open shared object file: No such file or directory in Unknown on line 0
Interactive shell 
```

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-06-09T03:39:02.457

即使其他几个答案表明了这一点，安装更多不必要的软件通常**也不**是最好的解决方案。相反，您应该解决根本问题。出现这些消息的原因是您尝试加载这些扩展，但未安装它们。所以简单的解决方案就是告诉 PHP 停止尝试加载它们：

首先，找出哪些文件正在尝试加载上述扩展：

```
$ grep -Hrv ";" /etc/php5 | grep -E "extension(\s+)?=" 
```

Ubuntu 的示例输出：

```
/etc/php5/mods-available/gd.ini:extension=gd.so
/etc/php5/mods-available/pdo_sqlite.ini:extension=pdo_sqlite.so
/etc/php5/mods-available/pdo.ini:extension=pdo.so
/etc/php5/mods-available/pdo_mysql.ini:extension=pdo_mysql.so
/etc/php5/mods-available/mysqli.ini:extension=mysqli.so
/etc/php5/mods-available/mysql.ini:extension=mysql.so
/etc/php5/mods-available/curl.ini:extension=curl.so
/etc/php5/mods-available/sqlite3.ini:extension=sqlite3.so
/etc/php5/conf.d/mcrypt.ini:extension=mcrypt.so
/etc/php5/conf.d/imagick.ini:extension=imagick.so
/etc/php5/apache2/php.ini:extension=http.so 
```

现在只需找到正在加载导致错误的扩展名的文件，并用`;`. 出于某种原因，默认安装的 Ubuntu 发生在我身上，所以希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-08-01T19:32:49.410

```
sudo apt-get install php5-mcrypt
sudo apt-get install php5-mysql 
```

...等为我解决了它:)

希望能帮助到你

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-13T14:21:31.910

查看 /etc/php5/cli/conf.d/ 并删除对应的 *.ini 文件。当您删除一些不那么干净的 php 包时会发生此错误。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-01-28T21:23:58.770

好像您**将 PHP 升级**到较新版本，并且旧的 .ini 文件仍指向旧位置。

**解决方案**：找出模块现在的位置

```
ls -l /usr/lib/php5 
```

应该有一个类似于 old 的目录`20090626`。就我而言，现在是`20131226`

给您错误的 .ini 文件位于`/etc/php5/cli/conf.d/`

只需编辑那些模块给您错误的 .ini 文件。例如，如果错误是针对 mcrypt 模块的：

```
sudo vi /etc/php5/cli/conf.d/20-mcrypt.ini 
```

换行：

```
extension=/usr/lib/php5/20090626/mcrypt.so 
```

反映 .so 文件的新路径。在我的情况下，正确的路径应该是：

```
extension=/usr/lib/php5/20131226/mcrypt.so 
```

而已！错误消失了。Ofc 你必须对每个模块都做这件事，给你一个错误。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-02-02T13:17:13.987

如果你把 ; 符号，此操作使扩展无效。

我遇到了同样的问题并做了以下事情：

1.  使用 purge 参数卸载 php：

    ```
    sudo apt-get --purge remove php5-common 
    ```

2.  并再次安装：

    ```
    sudo apt-get install php5 php5-mysql 
    ```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-13T06:07:16.680

我通过[blog.tordeu.com](http://blog.tordeu.com/)找到了这个解决方案，它是

```
sudo aptitude purge php5-suhosin 
```

我不确定，但似乎`suhosin`不再需要它，它适用于我的 PHP 版本：

```
PHP 5.4.34-1+deb.sury.org~lucid+1 (cli) (built: Oct 17 2014 15:26:51)
Copyright (c) 1997-2014 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2014 Zend Technologies 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-14T03:53:29.943

我的问题已通过以下命令解决

```
sudo apt-get install php5-mcrypt 
```

我有

*   PHP 5.3.10-1ubuntu3.4 与 Suhosin-Patch (cli)
*   Ubuntu 桌面 12.04
*   mysql 5.5

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-01-09T17:44:00.510

如果您使用的是 5.6 php，

sudo apt-get install php5.6-curl

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-24T16:31:51.560

好吧，对于 Ubuntu 14.04，我只是为 mcrypt 得到了这个错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20121212/mcrypt.ini' - /usr/lib/php5/20121212/mcrypt.ini: cannot open shared object file: No such file or directory in Unknown on line 0 
```

如果您仔细查看错误，则 php 正在该位置寻找 mcrypt.ini 而不是 mcrypt.so。我只需将 mcrypt.so 复制到 mcrypt.ini 就可以了，警告消失了，现在扩展程序已正确安装。它可能看起来有点脏，但它有效！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-12T14:59:41.053

不知何故，该`gmp.so`文件似乎已从我的系统中删除。这就是为我解决的问题：

`sudo apt-get install --reinstall php5-gmp`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-24T11:55:03.240

（对于 Ubuntu 用户）

我有同样的问题，但上面的答案都没有解决这个问题。这是我解决问题的方法。

打开你的`php.ini`文件（我的文件在`/etc/php/7.3/cli/php.ini`）。

你可能有这样的事情：

```
extension=pdo_mysql 
```

或者可能：

```
extension=/here/is/the/path/to/your/file/pdo_mysql.so 
```

在前面添加以下行`extension=pdo_mysql`

```
extension=pdo 
```

因此，您将拥有：

```
extension=pdo
extension=pdo_mysql 
```

似乎问题是（至少在我的情况下）我们需要先加载`pdo`扩展才能加载`pdo_mysql`扩展。

希望有帮助！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-03-16T07:58:03.213

我通过取消注释启用了 php.ini 中的 extension_dir，

```
 extension_dir = "ext"
  extension=phpchartdir550.dll 
```

并将 phpchartdir550 dll 复制到 extension_dir (/usr/lib/php5/20121212)，导致同样的错误。

```
 PHP Warning:  PHP Startup: Unable to load dynamic library 'ext/phpchartdir550.dll' - ext/phpchartdir550.dll: cannot open shared object file: No such file or directory in Unknown on line 0
  PHP Warning:  PHP Startup: Unable to load dynamic library 'ext/pdo.so' - ext/pdo.so: cannot open shared object file: No such file or directory in Unknown on line 0
  PHP Warning:  PHP Startup: Unable to load dynamic library 'ext/gd.so' - ext/gd.so: cannot open shared object file: No such file or directory in Unknown on line 0 
```

正如@Mike 指出的那样，当应用程序中实际上不需要它们时，没有必要安装所有东西。

更简单的方法是在将库复制到正确位置后提供要加载的扩展的完整路径。

将 phpchartdir550.dll 复制到 /usr/lib/php5/20121212，这是我的 Ubuntu 14.04 中的 extension_dir（可以使用 phpinfo() 看到），然后在 php.ini 中提供库的完整路径，

```
;   extension=/path/to/extension/msql.so
extension=/usr/lib/php5/20121212/phpchartdir550.dll 
```

重启 apache：sudo service apache2 restart

即使其他 .so 存在于同一目录中，也只能有选择地加载所需的。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-04-02T12:45:24.650

我有一个类似的问题，这导致我来到这里：

```
$ phpunit --version
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20131226/profiler.so' - /usr/lib/php5/20131226/profiler.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHPUnit 5.7.17 by Sebastian Bergmann and contributors. 
```

与上述不同，安装该软件并没有解决我的问题，因为我已经有了它。

```
$ sudo apt-get install php5-uprofiler
Reading package lists... Done
Building dependency tree       
Reading state information... Done
php5-uprofiler is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 52 not upgraded. 
```

我通过以下方式找到了我的解决方案：[Debian Bug report logs](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=784774 "Debian 错误报告日志")

```
$ sudo vim /etc/php5/mods-available/uprofiler.ini 
```

我编辑了 ini 文件，将*extension=profiler.so*更改为*extension=uprofiler.so* .... 结果，很高兴：

```
$ phpunit --version
PHPUnit 5.7.17 by Sebastian Bergmann and contributors. 
```

即没有更多的警告。

# python - 如何访问 Python nosetests 设置函数中设置的变量

> ID：10565523
> 
> 赞同：21
> 
> 时间：2012-05-12T16:35:15.943
> 
> 标签：python, nose

我认为我正在尝试做的事情相当简单。我想在测试设置函数中初始化几个变量，然后在用该设置修饰的测试函数中使用它们。以下简单示例说明了我的意思：

```
from nose.tools import *

def setup():
    foo = 10

def teardown():
    foo = None

@with_setup(setup, teardown)
def test_foo_value():
    assert_equal(foo, 10) 
```

这导致：

```
$ nosetests tests/test_foo.py
E
======================================================================
ERROR: test_foo.test_foo_value
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/mtozzi/.virtualenvs/foo/local/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
self.test(*self.arg)
  File "/home/mtozzi/code/foo/tests/test_foo.py", line 12, in test_foo_value
assert_equal(foo, 10)
NameError: global name 'foo' is not defined

----------------------------------------------------------------------
Ran 1 test in 0.006s

FAILED (errors=1) 
```

使用旧的 unittest 风格，我可以将这些设置为测试类的实例变量，但我认为鼻子测试不需要你使用类。我还考虑将它们设置为包全局变量，但这似乎不是一个非常好的做法。我希望这样做有一些明显的我想念的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T17:27:37.923

正如您对问题的评论已经建议的那样，只需切换到类并使用实例变量，例如`self.foo`. 这就是它应该做的方式。

如果您坚持不使用类，请尝试使用`global`变量。不过，你没有从我这里听到。

```
from nose.tools import *

foo = None

def setup():
    global foo  # Ugly.
    foo = 10

def teardown():
    global foo  # Ugly.
    foo = None

@with_setup(setup, teardown)
def test_foo_value():
    assert_equal(foo, 10) 
```

第三种变体可能是为您的值使用字典。这稍微不那么难看，但非常笨拙：

```
from nose.tools import *

_globals = {'foo': None}

def setup():
    _globals['foo'] = 10

def teardown():
    _globals['foo'] = None

@with_setup(setup, teardown)
def test_foo_value():
    foo = _globals['foo']
    assert_equal(foo, 10) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-12T19:27:43.010

我使用了一个自定义的 with_setup 装饰器，它使用了穷人的非本地：[https ://gist.github.com/garyvdm/392ae20c673c7ee58d76](https://gist.github.com/garyvdm/392ae20c673c7ee58d76)

```
def setup():
    foo = 10
    return [foo], {}

def teardown(foo):
    pass

@with_setup_args(setup, teardown)
def test_foo_value(foo):
    nose.tools.assert_equal(foo, 10) 
```

对于仅 Python 3 的项目，我使用非本地而不是 .extend/.update 作为参数，kwargs。

# firewall - 需要windows的包过滤和包编辑api

> ID：10565525
> 
> 赞同：-1
> 
> 时间：2012-05-12T16:35:23.537
> 
> 标签：firewall, packet, iptables

正如标题所说，我需要一个适用于 Windows 的数据包过滤（防火墙）和数据包编辑 API

我做了很多谷歌搜索并找到了一些包过滤API，比如

1.Winpcap 2.WIPFW 3.Pktfilter

但是对于数据包编辑没有任何作用，似乎我必须编写内核级驱动程序才能实现这一点......我知道一些编程但不知道如何编程驱动程序

我知道我可以使用 iptables 在 linux 中做到这一点。

Windows中有什么相当于iptable的东西吗？是否有任何用于 Windows 的 API 来进行数据包过滤（防火墙）和编辑数据包？

（基本上我试图在数据包的 ip 标头中编辑源 ip，以便我可以使数据包使用不同的网络接口）

我不想为此编写任何内核级驱动程序，因为我不知道该怎么做。

来人帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:05:19.553

从 XP 开始，Windows 就配备了防火墙。

XP、2k 和 2k3 可以在 cli 上使用“netsh firewall ....”进行配置，在更高版本的 Windows 上，它是“netsh advfirewall ....”。

这是一个带有介绍的链接 - [http://blog.commandlinekungfu.com/2009/05/episode-30-twiddling-with-firewall.html](http://blog.commandlinekungfu.com/2009/05/episode-30-twiddling-with-firewall.html)。

您还可以编写一个 powershell 脚本来与 Windows 防火墙集成。这是一些示例配置[http://blogs.technet.com/b/jamesone/archive/2009/02/18/how-to-manage-the-windows-firewall-settings-with-powershell.aspx](http://blogs.technet.com/b/jamesone/archive/2009/02/18/how-to-manage-the-windows-firewall-settings-with-powershell.aspx)

# email - 在 Rails 中，如何在给定时间段内仅发送一次“新关注者”电子邮件通知？

> ID：10565527
> 
> 赞同：1
> 
> 时间：2012-05-12T16:36:09.653
> 
> 标签：email, ruby-on-rails-3.1, notifications

我有一个带有追随者模型的应用程序，以便用户可以通过单击“关注”按钮关注其他用户（他们可以通过单击“取消关注”按钮取消关注）。**我想向新关注的用户发送一封电子邮件，但我只想在给定的时间范围内发送该特定电子邮件一次。**

我担心的是我正在使用 AJAX 来切换“关注”和“取消关注”按钮，并且用户（恶意或其他方式）很容易重复点击该按钮，从而发送“新关注者”电子邮件给特定的用户。如果关注是偶然的，我也想避免给新关注的人发送电子邮件。

以下是一些我关心的用例。假设“John Doe”是“新追随者”，“Tommy”是 John Doe 关注的人。

1.  John Doe 点击“关注”，意识到他不是有意关注汤米，并迅速点击“取消关注”。在这种情况下，我不想向 Tommy 发送“新关注者通知”。
2.  John Doe 点击“关注”，觉得按钮自动切换到“取消关注”真的很漂亮，然后开始一次又一次地点击“关注”、“取消关注”、“关注”、“取消关注”。我不想在 John Doe 每次点击“关注”时向 Tommy 发送“新关注者通知”电子邮件。如果在约翰完成按钮操作后约翰最终关注他，我只想将那封电子邮件发送给汤米。

似乎有几件事我可以做。

1.  为了避免切换，我可以在单击“取消关注”后禁用“关注”按钮一段时间（可能是一分钟）。
2.  我可以将“新关注者”电子邮件推迟一点（五分钟，一个小时），然后在发送之前仔细检查“关注者”关系是否仍然存在。（这似乎是一种常见的事情，但我不知道该怎么做。）
3.  我可以记录哪个关系触发了这封电子邮件，并且每天只允许一封关于该关系的电子邮件。（这可能会很复杂，因为单击“取消关注”时关系记录会被破坏。我不确定将其存储在哪里。）

**关于如何做到这一点的任何建议？我正在寻找概念性建议和具体的技术建议（“使用这样那样的 gem”或“在关系控制器中的“创建”操作上尝试这个 after_filter”）。**

这是用于生成此电子邮件的代码：

```
#relationships_controller.rb
class RelationshipsController < ApplicationController
  before_filter :authenticate

  def create
    @user = User.find(params[:relationship][:followed_id])
    if current_user.follow!(@user)
      # Send new_follower email if followed user has opted in to that email
      UserMailer.new_follower_notification(@user, current_user).deliver if @user.master_switch && @user.new_follower_notification
    end

    respond_to do |format|
      format.html { redirect_to @user }
      format.js
    end

    def destroy
      ...
    end
  end

#user_mailer.rb
class UserMailer < ActionMailer::Base
  def new_follower_notification(user, follower)
    @user = user
    @follower = follower
    mail(:from => "Example <example@example.com", :to => "#{@user.name} <#{@user.email}>", :subject => "#{@follower.name} (#{@follower.username}) is now following you!")
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T05:35:20.763

*   创建一个新模型。

*   每次有人点击“关注”按钮时添加一个时间戳。

*   当有人单击“关注”按钮时，如果存在时间戳，请将 DateTime.now 与该时间戳进行比较。

*   如果它在某个分钟/天/周范围内，请不要发送另一封电子邮件。

# javascript - 在谷歌地图上旋转标记

> ID：10565529
> 
> 赞同：4
> 
> 时间：2012-05-12T16:36:21.870
> 
> 标签：javascript, html, canvas

我使用这个[在谷歌地图上显示风向](https://stackoverflow.com/questions/2278534/show-wind-direction-on-google-maps?answertab=votes#tab-top)来旋转谷歌地图上的标记，但是角度设置为 220。现在我有一个输入文本框，用户在其中输入角度，当点击按钮时在谷歌地图上显示旋转标记. 如何编辑此代码以从文本框中获取值？这可能`<canvas>`吗？

代码在这里：

```
<body onload="xz()" onunload="GUnload()">

<div id="map" style="width: 400px; height: 300px"></div> 

<script type="text/javascript"> 

function xz()
{

if (GBrowserIsCompatible()) {   
    var angleDegrees = document.getElementById('angle').value;
    var map = new GMap2(document.getElementById("map"));
    var arrowIcon = new Image();

    var marker = new ELabel( new GLatLng(55.50, 2.50), '<canvas id="arrowcanvas" width="32" height="32"><\/canvas>', null, new GSize(-16, 16));

    arrowIcon.src = "http://i49.tinypic.com/mafqee.png";

    map.addOverlay(marker);

    map.setCenter(new GLatLng(53.85, -1.80), 3);

    var canvas = document.getElementById("arrowcanvas").getContext('2d');
    var angleRadians = (angleDegrees / 180) * Math.PI;

    var cosa = Math.cos(angleRadians);
    var sina = Math.sin(angleRadians);

    canvas.clearRect(0, 0, 32, 32);
    canvas.save();
    canvas.rotate(angleRadians);
    canvas.translate(16 * sina + 16 * cosa, 16 * cosa - 16 * sina);
    canvas.drawImage(arrowIcon, -16, -16);
    canvas.restore();
}
}
</script>

<form> 
    <input type="text" size="13" id="angle" name="angle" value=""> </input>

    <input type="submit" id="button2" value="Prika?i" class="btnsearch" onsubmit="xz(); return false;">

</form> 
 </body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T16:54:50.527

您可以复制他的代码并替换此行：

```
var angleDegrees = 220; 
```

有类似的东西：

```
var angleDegrees = document.getElementById('myTextbox').value; 
```

其中“myTextbox”是分配给您的输入字段的 ID。

# php - 表单中的会话变量未显示在下一页上

> ID：10565530
> 
> 赞同：-1
> 
> 时间：2012-05-12T16:36:31.277
> 
> 标签：php, session

我可以设置会话变量并在另一个页面上使用它们。但是，当我尝试使用带有用户名和电子邮件地址的简单联系表单并尝试将它们存储到会话变量中时，它们不会出现在其他页面上。一定有一些基本的东西我错过了。

这是表格：

```
<?php
session_start();
$submit = $_POST["submit"];
if($submit){setSessionVars();}
function setSessionVars() {
    $_SESSION['name'] = $_POST['name'];
    $_SESSION['email'] = $_POST['email'];
    header('Location: session.php');
}
?>

<html>
<body>
  <form action="session.php" method"post">
    <input name="name" type="text" value="Name" size="11" /><br />
    <input name="email" type="text" value="Email" size="11" /><br /><br />
    <input name="submit" type="submit" value="Submit" size="11" />
  </form>
</body>
</html> 
```

这是 session.php：

```
<?php
session_start();
echo $_SESSION['name'];
echo $_POST['name'];
?> 
```

还

```
header('Location: session.php'); 
```

不管用。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T16:47:34.320

乍一看，我发现一个直接的问题会阻止表单发布。

```
<form action="session.php" method"post"> 
```

在方法和“post”之间需要一个“=”符号。

单独改变它会给你 session.php 中的“t”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T16:42:45.197

您将表格发布到`session.php`：

```
<form action="session.php" method"post"> 
```

我将其更改为：

```
<form method="post"> 
```

这样，页面就会发布到自身。然后它可以注册会话变量并将用户重定向到`session.php`.

编辑：另外，您忘记了`=`登录`method"post"`。

# django - 如何在 Python Django 中配置 Mathjax

> ID：10565532
> 
> 赞同：2
> 
> 时间：2012-05-12T16:36:57.797
> 
> 标签：django, mathjax

我想知道如何在问答系统中配置 Django 中的 Mathjax，其中问答系统将基于 LaTeX 格式。

我试图添加：

```
<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> 
```

进入html模板，其中问题和答案将无济于事。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T23:28:42.377

如果页面的内容是动态创建的，则需要在加载内容后调用 MathJax。有关详细信息，请参阅[文档](http://www.mathjax.org/docs/2.0/typeset.html)。主要思想是你必须包括

```
MathJax.Hub.Queue(["Typeset",MathJax.Hub]); 
```

在内容到位后执行的 javascript 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-29T09:48:07.823

对于**动态内容**，这是可行的解决方案。[我在包含ASCIIMathML](https://en.wikipedia.org/wiki/AsciiMath)的 mathjax 中使用 AsciiMath Input 作为输入格式。在 base.html 中添加以下脚本：

```
<script>
  MathJax = {
    loader: {load: ['input/asciimath', 'output/chtml']}
  }
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> 
```

并记住用反引号括起来动态文本”，即`...`所以在django-admin中你可以简单地输入sqrt(50)为`sqrt(50)`或`x^2`和动态从视图传递到模板的内容，在模板中用反引号括起来 {{e1}}

## ` {{ e1 }} `

而不是
{{ e1 }} 其中 e1 是动态内容。因此，如果之前以纯文本形式显示为 2*sqrt(2) 的 e1 现在将显示为 2√2。

更多详情：[http ://docs.mathjax.org/en/latest/input/asciimath.html#asciimath-support](http://docs.mathjax.org/en/latest/input/asciimath.html#asciimath-support)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-31T15:35:08.347

见[https://docs.mathjax.org/en/latest/web/configuration.html](https://docs.mathjax.org/en/latest/web/configuration.html)。[要使此处](https://www.mathjax.org/#demo)指示的演示正常工作，您还应该添加`['\(', '\)']`到 inlineMath：

```
 <script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script> 
```

# javascript - 使用jQuery在数据库中的特定时间段交替显示文本

> ID：10565533
> 
> 赞同：1
> 
> 时间：2012-05-12T16:37:07.650
> 
> 标签：javascript, jquery

我对 jQuery 很陌生。我需要在某个时间间隔内显示来自数据库的*客户推荐。*类似于此[站点](http://www.subhashsarees.com/products.aspx)上显示的内容。本站有一个*Testimonials*容器，在该容器中，从数据库中在特定时间段内一一显示推荐。我在 Google 上尝试了很长时间，但没有成功。如果您知道我可以下载此类脚本的任何链接，那将对我非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:40:48.560

好吧，你可以在你链接的网站上看看它是如何完成的，就[在这里](http://www.subhashsarees.com/scripts/testimonials.js)

```
(function ($) {
    $(document).ready(function () {
        var el = $("#testimonial");
        if (el) {
            RotateTestimonial();
            setInterval(RotateTestimonial, 20000);
        }
    });

    function RotateTestimonial() {
        var pageUrl = "RandomTestimonial.php"
        $.ajax({
            type: "GET",
            url: pageUrl,
            cache: false,
            success: function (msg) {
                $("#testimonial").slideUp('slow').fadeOut(3000, function () {
                    var el = $("#testimonial");  //Refers to some container tag like <div> or <span> where the random message is to be written.
                    el.html(msg);
                    el.slideDown('slow').fadeIn('slow');
                });
            }
        });
    }
})(jQuery) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:18:01.007

此代码设置了一个 20 秒的计时器，以将从 YourPageHereReturnsHTML.aspx 返回的 HTML 加载到推荐 div 中。

```
<div id="testimonial">
</div>

<script>
(function($){
$(document).ready(function(){
    var el = $("#testimonial");
    if (el){
    RotateTestimonial();
    setInterval(RotateTestimonial, 20000);
    }
});

function RotateTestimonial(){
    var pageUrl = "YourPageHereReturnsHTML.aspx"
    $.ajax({
            type: "GET",
            url: pageUrl,
            cache:false,
            success: function(msg) {                   
                $("#testimonial").slideUp('slow').fadeOut(3000, function (){
                    var el = $("#testimonial"); 
                    el.html(msg);
                    el.slideDown('slow').fadeIn('slow');
                });
            }
    });
}
})(jQuery)
</script> 
```

# nlp - 在这个例子中如何理解和添加音节中断？

> ID：10565544
> 
> 赞同：2
> 
> 时间：2012-05-12T16:38:25.063
> 
> 标签：nlp, machine-learning

我是机器学习和计算概率的新手。这是[Lingpipe 的一个示例，](http://alias-i.com/lingpipe/demos/tutorial/hyphenation/read-me.html)用于通过训练数据在单词中添加音节。

```
Given a source model p(h) for hyphenated words, and a channel model p(w|h) defined so that p(w|h) = 1 if w is equal to h with the hyphens removed and 0 otherwise. We then seek to find the most likely source message h to have produced message w by:

    ARGMAXh p(h|w) = ARGMAXh p(w|h) p(h) / p(w)
                   = ARGMAXh p(w|h) p(h)         
                   = ARGMAXh s.t. strip(h)=w p(h)

where we use strip(h) = w to mean that w is equal to h with the hyphenations stripped out (in Java terms, h.replaceAll(" ","").equals(w)). Thus with a deterministic channel, we wind up looking for the most likely hyphenation h according to p(h), restricting our search to h that produce w when the hyphens are stripped out. 
```

我不明白如何使用它来构建音节模型。

如果有一个训练集包含：

```
a bid jan
a bide
a bie
a bil i ty
a bim e lech 
```

如何有一个可以音节化单词的模型？我的意思是为了找到一个新单词的可能的音节中断要计算什么。

首先计算什么？然后计算什么？你能具体举个例子吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T03:03:24.327

**本文中描述的方法**基于统计定律，允许计算观察*噪声值的**正确*值。换句话说，非音节词是*嘈杂*的或*不正确*的，例如，目标是找到一个可能*正确*的值，即。***`picnic`*`pic-nic`****

 ***[这](https://class.coursera.org/nlp/lecture/preview_view?lecture_id=22_)是关于这个主题的精彩视频课程（滚动到 1:25，但整套讲座值得观看）。

这种方法对分词特别有用，但有些人也将其用于音节。中文只有用于逻辑结构的空格分隔符，但大多数单词之间没有分隔符。但是，每个字符都是一个音节，也不例外。

还有其他语言的语法更复杂。例如，泰语单词之间没有空格，但每个音节可以由多个符号构成，例如`สวัสดี`-> `ส-วัส-ดี`。基于规则的音节可能很难但可能。

**根据 English**，我不会打扰[马尔可夫链](http://en.wikipedia.org/wiki/Markov_chain)和[N-gram](http://en.wikipedia.org/wiki/N-gram)，而是使用几个简单的规则来提供相当好的匹配率（但是并不完美）：

1.  两个元音之间的两个辅音`VCCV`- 在它们之间分开，`VC-CV`如 c **of-fe** e, p **ic-ni** c，**除了**代表单个声音的“簇辅音”：m **eth-o** d、R **o-che** ster、h **ang-输出**_
2.  元音之间的三个或更多辅音`VCCCV`- 分裂保持混合在一起，如 m **on-ster**或 ch **ild-re** n *（这似乎是最困难的，因为你无法避免字典）*
3.  两个元音之间的一个辅音`VCV`- 在第一个元音之后拆分，`V-CV`如 b **a-con** , **a-ri** d
4.  上面的规则也有一个基于混合的例外：co **ur-a** ge, **play-time** me
5.  两个元音在一起`VV`- 分开，除了它们代表一个“集群元音”：p **o-e** m，but **gla cier**，earl- **ier**

我会先从“主要”规则开始，然后用“保护”规则覆盖它们，防止簇元音和辅音被分裂。此外，将有一个明显的保护规则来防止单个辅音成为音节。完成后，我会添加另一个基于字典的保护规则。***

# c# - 编写一个长时间运行的 pubsub 服务器/服务 c#

> ID：10565545
> 
> 赞同：1
> 
> 时间：2012-05-12T16:38:42.973
> 
> 标签：c#, .net, system.reactive, publish-subscribe, pubnub

我一直在玩 pubsub，到目前为止它看起来很适合我需要的东西（一个基本的游戏实验）。

从 Javascript 和移动（通过 Appcelerator 的 Titanium）的角度来看，我真的可以看到使用 pubsub 的价值。

但是，我需要在 c#/.NET 中编写一个服务器应用程序（尽管对其他想法持开放态度）来监听我拥有的订阅者队列，并处理消息..这涉及一些决策等，然后可能会写入另一条消息例如发布队列。

到目前为止，我已经使用了 C# 的 RX（反应式扩展），它在我的订阅频道上收听。到目前为止一切顺利，我看到了消息，虽然现在我只是写了一个 C# 控制台应用程序来测试。

我的问题是等待和收听 pubsub 订阅者消息的最佳方式是编写一个 Windows 服务应用程序吗？还是有另一种更合适的技术？显然在某些可能的点上，我可能不得不将服务器扩展到 2-3 个服务器，但是鉴于 pubsub 队列/消息传递的性质，如果我有一些负载平衡等，我看不到问题。

欢迎任何想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T08:37:24.473

使用服务总线。当云对你有好处时，比 Azure 服务总线好。如果没有，那么 nServiceBus。还可以看看 RabbitMQ，它是 AMQP 框架，并且能够比 pubsub 做更多的事情。此外，rabbit 在多个平台上有多个客户端。例如，纯粹用于 JavaScript 的方法之一是 RabitMQ + Node.js + WebSockets。

所有客户端和开发工具，以及关于不同平台和语言的 RabbitMQ 的文章都[在这里](http://www.rabbitmq.com/devtools.html)。

还有用于 .NET 的特殊 RabbitMQ 绑定，请在[此处](http://www.rabbitmq.com/dotnet.html)找到。

NServiceBus PubSub 解释在[这里](http://docs.particular.net/nservicebus/messaging/publish-subscribe/)。它是 .NET 服务总线，但不像 RabbitMQ 那样免费。无论如何，RabbitMQ 与平台无关。

任何服务总线实现都已经具有 PubSub，这就是它们存在的原因。因此没有理由实施，已经实施的

# asp.net-mvc - 实施 IPrincipal 的问题

> ID：10565547
> 
> 赞同：0
> 
> 时间：2012-05-12T16:38:46.540
> 
> 标签：asp.net-mvc, iprincipal

尝试实现 IPrincipal (ASP.NET MVC 3) 并遇到问题：我的自定义 IPrincipal：

```
 interface IDealsPrincipal: IPrincipal
    {
        int UserId { get; set; }
        string Firstname { get; set; }
        string Lastname { get; set; }
    }

public class DealsPrincipal : IDealsPrincipal
    {

        public IIdentity Identity { get; private set; }
        public bool IsInRole(string role) { return false; }

        public DealsPrincipal(string email)
        {
            this.Identity = new GenericIdentity(email);
        }

        public int UserId { get; set; }
        public string Firstname { get; set; }
        public string Lastname { get; set; }

    } 
```

要序列化/反序列化，我使用以下类：

```
public class DealsPrincipalSerializeModel
    {
        public int UserId { get; set; }
        public string Firstname { get; set; }
        public string Lastname { get; set; }
    } 
```

应用程序身份验证事件如下（工作正常！）

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
        {
            HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];
            if (authCookie != null)
            {
                //get the forms ticket
                FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);
                //instantiate a new Deserializer
                JavaScriptSerializer serializer = new JavaScriptSerializer();
                //deserialize the model
                DealsPrincipalSerializeModel serializeModel = serializer.Deserialize<DealsPrincipalSerializeModel>(authTicket.UserData);
                //put the values of the deserialized model into the HttpContext
                DealsPrincipal newUser = new DealsPrincipal(authTicket.Name); //this implements IPrincipal
                newUser.UserId = serializeModel.UserId;
                newUser.Firstname = serializeModel.Firstname;
                newUser.Lastname = serializeModel.Lastname;

                HttpContext.Current.User = newUser;                
            }
        } 
```

正如您在最后一条语句中看到的，HttpContext 被分配了这个新的 DealsPrincipal（工作正常）。

问题是，如果想在 Controller(Action) 中访问此用户，我总是会得到一个基类对象。如果我按如下方式投射用户：

```
User as DealsPrincipal 
```

获取例如 UserId（示例：

```
( User as DealsPrincipal).UserId 
```

这总是空的！为什么？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:21:39.770

我需要进行更多调查才能为您提供正确答案，但请查看这部分代码，它可以帮助您（WindowsAuthenticationModule.cs 的部分来源）

```
void OnAuthenticate(WindowsAuthenticationEventArgs e) {
        //////////////////////////////////////////////////////////// 
        // If there are event handlers, invoke the handlers 
        if (_eventHandler != null)
             _eventHandler(this, e); 

        if (e.Context.User == null)
        {
            if (e.User != null) 
                e.Context.User = e.User;
            else  if (e.Identity == _anonymousIdentity) 
                e.Context.SetPrincipalNoDemand(_anonymousPrincipal, false /*needToSetNativePrincipal*/); 
            else
                e.Context.SetPrincipalNoDemand(new WindowsPrincipal(e.Identity), false /*needToSetNativePrincipal*/); 
        }
    } 
```

从这段代码中，我建议您在分配自定义 IPrincipal 实现的实例之前检查用户是否是匿名的。此外，不确定此方法是在“protected void Application_AuthenticateRequest”之前还是之后执行。将尝试花更多时间对此进行调查。

另外，请看这篇文章：

[http://msdn.microsoft.com/en-us/library/ff649210.aspx](http://msdn.microsoft.com/en-us/library/ff649210.aspx)

# c++ - 包括 似乎会导致命名空间问题？

> ID：10565550
> 
> 赞同：1
> 
> 时间：2012-05-12T16:39:07.203
> 
> 标签：c++, templates

我试图理解为什么包含 iosfwd 会导致包含标准字符串的输出流不起作用。

```
// hc_list.h file
#ifndef HC_LIST_H
#define HC_LIST_H

#include <cstdlib>
#include <iosfwd> // including this file makes the output operator throw errors
#include <list>

template <typename T>
class hcList
{
    private:
    std::list<T> selfList ; // a single internal STL list to hold the values

    public:
    hcList(void) {} ;
    ~hcList(void){} ;
    template <typename U> friend std::ostream& operator<<(std::ostream &, const hcList<U> &) ;
} ;

template <typename U>
std::ostream& operator<<(std::ostream &out, const hcList<U> &outList)
{
    out << "test" << std::endl ; // this line throws two errors, stated below
    return out ;
}
#endif // HC_LIST_H 
```

此代码包含在 main.cpp 文件中，其中 main 函数如下：

```
// main.cpp file
#include <iostream>
#include "hc_list.h"
int main()
{
    std::cout << "Begin Test" << std::endl;
    return 0;
} 
```

为了实际使用此代码并生成错误，需要一个包含列表头文件的空 cpp 文件。

```
// anyNamedFile.cpp file
#include "hc_list.h" 
```

当我尝试编译时，我收到以下错误：

```
error: no match for 'operator<<' in 'out<< "test"'
error: 'endl' is not a part of 'std' 
```

是什么导致 std 命名空间被搞砸并且不再允许我输出字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T17:02:59.880

你这里有两个问题。第一个问题是您正在使用`std::endl`，但在 中定义`<ostream>`，不包括在内。

第二个问题是您只包含 header `<iosfwd>`，它转发声明了许多 iostream 类型。前向声明让编译器知道类型*存在*。但是，您正在尝试使用这些类型的*功能*。既然你这样做了，你应该包括`<ostream>`，而不是`<iosfwd>`。`<ostream>`contains `std::endl`，所以应该照顾一切。

# .net - 在单独的 appdomain 中运行的 MSBuild 任务无法加载程序集

> ID：10565552
> 
> 赞同：5
> 
> 时间：2012-05-12T16:39:24.783
> 
> 标签：.net, msbuild

我有一个 MSBuild 任务，它具有`LoadInSeparateAppDomainAttribute`并继承自`AppDomainIsolatedTask`.

此任务在成功构建后运行。它加载新编译的程序集并使用它执行一些工作。因此需要一个单独的 appdomain，否则 Visual Studio 将加载程序集并将其锁定。

但是，创建的 appdomain 不知道`Web.config`应用程序的文件。此配置包含成功加载程序集引用的 DLL 所需的绑定重定向。

有没有办法以编程方式将绑定重定向添加到 appdomain？

# c# - 从 iOS 使用 AD 进行身份验证

> ID：10565559
> 
> 赞同：1
> 
> 时间：2012-05-12T16:40:35.640
> 
> 标签：c#, asp.net, ios

好的，我环顾四周，找不到解决此问题的方法。我有一个使用 Windows 身份验证的 ASP.NET Web 应用程序。

我有一个公共网络服务，用于我开发的 iPad 应用程序。出于安全原因，我的所有 Web 服务都需要带有登录信息的标题。

现在，我有一个单独的数据库，用于对用户进行身份验证。它是使用表单身份验证安装我的应用程序时的内置身份验证。

我想做的是，当 iPad 上的用户登录系统时，它会将登录名和密码传递给听者中的 Web 服务......它现在就是这样做的。

但是，如何针对 Active Directory 验证该用户和密码以确保用户具有访问权限？

谢谢，科里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:24:30.330

> 但是，如何针对 Active Directory 验证该用户和密码以确保用户具有访问权限？

这在 c# 中很简单：[针对 Active Directory 验证用户名和密码？](https://stackoverflow.com/questions/290548/c-sharp-validate-a-username-and-password-against-active-directory)

[c# 中的更多 AD 任务（包括身份验证）](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C#35)

> 现在，我有一个单独的数据库，用于对用户进行身份验证。它是使用表单身份验证安装我的应用程序时的内置身份验证。

根据此声明，听起来您有一个凭据数据库，该数据库与 AD 中的凭据重复？如果是这样，不确定这是一个好主意。

和/或听起来像是在传递与 AD 中的凭据相匹配的凭据（可能是纯文本？）这可能是业务需求，但我建议所有通信都通过 SSL 完成，并且 AD 帐户属于专门用于此目的的域设置，网络的其余[部分不信任（或仅部分信任） 。](http://en.wikipedia.org/wiki/Active_Directory#Trust)

# c# - 防御 System.Collections.Concurrent.ConcurrentDictionary 中的竞争条件

> ID：10565560
> 
> 赞同：4
> 
> 时间：2012-05-12T16:40:45.847
> 
> 标签：c#, multithreading, .net-4.0, race-condition, concurrentdictionary

.NET ConcurrentDictionary 容易受到可能导致意外数据的竞争条件的影响，如[本 MSDN 文章底部所述。](http://msdn.microsoft.com/en-us/library/dd997369) 我假设有几个因素需要考虑。

**问：**我应该如何编写不易受到可能导致数据丢失的竞争条件的代码？

在我的场景中，我有一个输入流，它的索引总是增加（n++）。我的想法是，如果出现竞争条件并重新发送它，我可以[检测到丢失的数据。](https://stackoverflow.com/q/10565487/328397)另一方面，我不知道可能有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T16:49:55.600

人们必须意识到并发集合（不限于 .net）的一个普遍缺陷，即**单个操作可能是线程安全的，但操作序列不是原子的**。我的意思如下：假设在这种情况下，我有一个带有 a`Check`和一个`Add`操作的并发集合，两者都是原子的。

我想要做的是检查一个值是否存在，如果不存在，添加它。所以我可以这样写：

```
if(!collection.Check(value)) 
{
    collection.Add(value);
} 
```

虽然这两个操作都是原子的，但上述顺序不是，因为一个线程可能会在检查和添加之间被另一个线程中断，从而导致结果不一致。因此，整个序列应该是原子的，例如将其包装在一个`lock`语句中。

```
lock(locker)
{
   if(!collection.Check(value)) 
   {
       collection.Add(value);
   }
} 
```

# c# - 图片框上的图片框

> ID：10565562
> 
> 赞同：4
> 
> 时间：2012-05-12T16:40:59.400
> 
> 标签：c#, winforms, visual-studio-2008, transparency, picturebox

这是关于 C# 编码的，我对这种编程语言很陌生，对其他的也不太了解，但我想要实现的是有一个图片框作为背景，并有另一个图片框研磨它，但透明部分必须显示后面的图片框。我已经能够有一个透明的图片框，但问题是它只显示表单的背面颜色而不是它后面的图片框。有人能帮忙吗？

换句话说，一个图片框在一个图片框之上，但能够通过第一个图片框看到清晰的地方，并看到后面的图片框。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:54:59.270

转到项目-> 添加用户控件。为该用户控制 BackGroundImage。将您的图片框拖到用户控件上。使 PictureBox 的背景色透明。构建项目。

在设计器中，您应该能够将新的用户控件拖到表单上。这将做你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:08:15.933

对于背景，您可以使用 Graphics。直观地为您的表单构建一个绘制事件：

```
private void Form1_Paint(object sender, PaintEventArgs e)
{
    Graphics g = e.Graphics;
    g.DrawImage(Image.FromFile("address of image"), 0, 0, this.Width, this.Height);
} 
```

它将为表单着色，并且您不需要图片框作为背景。

# lwuit - 如何刷新文件树？

> ID：10565564
> 
> 赞同：0
> 
> 时间：2012-05-12T16:41:12.687
> 
> 标签：lwuit

当我从 FileTree 删除一个文件时，该文件被删除但它仍然显示在树中，直到我关闭并重新打开包含该文件的目录有没有办法刷新 FileTree？
另一件事是 FileTree 不显示名称用阿拉伯语编写的文件或文件夹，它只显示没有名称的文件或文件夹如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:42:17.593

作为一种解决方法，您可以尝试类似的方法，`tree.setModel(tree.getModel());`但我猜它会使树倒塌。树是一个简单的组件，并非旨在支持对底层模型的更改。它可能可以通过子类化来增强。

# jsf - 如何将 h:message 定位到 ah:inputText 的右侧？

> ID：10565567
> 
> 赞同：4
> 
> 时间：2012-05-12T16:41:23.363
> 
> 标签：jsf, facelets

我的 xhtml 页面代码：

```
<h:outputLabel value="Email address: " />
<h:inputText id="email" value="#{userBean.emailAddressBeingEdited}" required="true" requiredMessage="*" />
<h:message for="email" id="emailM"/> 
```

我的java代码：

```
FacesContext.getCurrentInstance().addMessage("email", new FacesMessage("Email already in use")); 
```

我尝试将 h:message 嵌套在 h:inputText 中，但这不起作用。如果我需要提供更多信息，请询问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T17:10:54.803

您指定的客户端 ID`addMessage()`必须是真实的客户端 ID，而不是组件 ID。输入组件的客户端 ID 通常以父表单组件的 ID 为前缀。对于尚未记住 JSF 组件实现[`NamingContainer`](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)以及如何生成客户端 ID 的初学者来说，找出真实客户端 ID 的最简单方法是在浏览器中打开页面，查看其源代码并找到生成的 HTML`<input type="text">`元素，最后获取其`id`. 如果您提供了`<h:form>`的 ID `formId`，它将是`formId:email`。这是您需要在 中指定的真实客户端 ID `addMessage()`。

```
context.addMessage("formId:email", message); 
```

如果您未指定正确的客户端 ID，则消息将保持未处理状态。如果 JSF 项目阶段设置为`Development`，则 JSF 将自动将其附加到正文末尾的“未处理消息”列表中。这就是你所看到的。查看生成的 HTML 源代码自己看，它是自动生成的 HTML 列表`<ul id="javax_faces_developmentstage_messages">`。

* * *

**与具体问题无关**，您似乎正在 JSF bean 操作方法中进行验证。这不是正确的方法。您应该`Validator`为此使用 a 。这样您就无需担心客户端 ID。你只需要用 a 抛出`ValidatorException`a `FacesMessage`。例如

```
@FacesValidator("uniqueEmailValidator")
public class UniqueEmailValidator implements Validator {

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        // ...

        if (emailIsAlreadyInUse) {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR, "Email is already in use", null));
        }
    }

} 
```

然后您将其注册为`<f:validator validatorId="uniqueEmailValidator" />`输入组件内部。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T16:50:48.710

```
<h:panelGrid columns="3">
   <h:outputLabel value="Email address: " />
   <h:inputText id="email" value="#{userBean.emailAddressBeingEdited}" required="true" requiredMessage="*" />
   <h:message for="email" id="emailM"/>
</h:panelGrid> 
```

这个？？

# c++ - 如何学习linux网络栈源码

> ID：10565578
> 
> 赞同：2
> 
> 时间：2012-05-12T16:42:33.637
> 
> 标签：c++, linux, networking, stack

最近，我的一项工作是在我团队开发的一个与 linux 完全不同的操作系统中使用 C++ 编写网络堆栈。但是，我认为对 linux 网络堆栈的深入了解可能有助于设计和实现一个好的网络堆栈。

有什么建议或有用的材料吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T16:45:00.057

W. Richard Stevens 的[Unix 网络编程](https://rads.stackoverflow.com/amzn/click/com/0131411551)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T17:12:09.777

[LwIP](http://en.wikipedia.org/wiki/LwIP)或[UIP](http://en.wikipedia.org/wiki/UIP_%28micro_IP%29)均由 Adam Dunkels 原创。特别是`LwIP`- 它们很小，有据可查，并且已被移植到嵌入式设备。尝试从 BSD / Linux 网络堆栈源代码中学习需要大量工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T02:07:25.740

[TCP/IP 图解，卷。2：实现](https://rads.stackoverflow.com/amzn/click/com/020163354X)它使用FreeBSD 4.X源代码作为真实世界的例子。

# asp.net-mvc-3 - 如何将假数据传递给我的视图（测试类 - 我知道你不测试视图）

> ID：10565580
> 
> 赞同：0
> 
> 时间：2012-05-12T16:42:59.050
> 
> 标签：asp.net-mvc-3

我有一个带有一堆“步骤”的向导，并且在每个步骤中都有一堆“输入”（文本框、单选按钮列表、复选框列表、下拉菜单）。

一切都很好，但我现在正试图对向导的最后“提交”步骤执行一些计算，我需要做两件事：

1) 计算出 a+b+(c*2) 等的逻辑。我不需要“测试”这个，我只有一堆 if/else 子句，并且正在映射计算。

2）为了方便上述操作，并快速查看输出（包括 CSS / UI 和其他内容），我想传递所有步骤的假数据。如何最好地做到这一点？

我正在使用一堆模型/视图模型，所以`MyModel`可能有：

```
public string FirstName { get; set; } 
```

并且`MyViewModel`会有：

```
public MyModel MyModel { get; set; } 
```

现在，大约有 10 个模型被拉入一个视图模型，基本上有 50 多个输入。我的问题是，如果我想看到“提交”的最终结果，我每次都必须通过向导。

为此我想跳过它，传递虚假数据而不通过整个向导（假设我的入口点是我的“确认”步骤，其中有一个“提交”按钮，所以我想从“确认”，然后单击“提交”（否则，也许我可以从“提交”步骤开始））。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:50:50.130

听起来您没有对此进行单元测试，因此您可以伪造它的一种方法是在控制器的确认获取操作中创建一个虚拟视图模型：

```
 var MyViewModel dummyModel;

    var infoStepModel info;
    info.property = xxx;

    dummyModel.Property = XXX;
    dummyModel.Property = 123;
    dummyModel.infoStep = info;

    return View(dummyModel); 
```

然后将属性更改为您需要的设置，以测试您的帖子逻辑的每个部分。它会有点慢，因为您需要在每次运行时更改属性，直到您测试了所有逻辑流程。

如果没有测试框架，您将被迫运行程序并按照您的描述输入每个步骤。有了这个，您至少可以放弃一遍又一遍地执行每个步骤，您可以直接进入确认步骤并准备好假数据。

此外，如果您将逻辑从控制器的 post 操作中移出并放入一个接受模型的类中，如果您使用的是测试框架，您也可以更轻松地进行测试。然后，您将使用控制器仅传递数据，并可能响应它传回的类结果。

# ios - 如何使应用程序崩溃

> ID：10565581
> 
> 赞同：-7
> 
> 时间：2012-05-12T16:43:01.207
> 
> 标签：ios, crash

> **可能重复：**
> [退出 iPhone 应用程序的正确方法？](https://stackoverflow.com/questions/355168/proper-way-to-exit-iphone-application)

如何使我的应用程序崩溃？

如果用户在此代码中按下关闭，我想使应用程序崩溃

```
 UIAlertView *alertView = [[UIAlertView alloc] 
                              initWithTitle:@"Alert!" 
                              message:@"What To Do To You App!" 
                              delegate:self 
                              cancelButtonTitle:@"Close"
                              otherButtonTitles:@"Open In Safari",nil];

- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
// the user clicked one of the OK/Cancel buttons
if (buttonIndex == 1)
{
    NSLog(@"Open in Safari");
}
else
{
    NSLog(@"Close");
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T16:45:18.087

在代码附近除以零怎么样！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T16:46:11.340

利用-

```
[[NSThread mainThread] exit]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T17:04:32.697

你不应该在 iOS 上添加一个按钮来关闭/退出你的应用程序。

# java - 以编程方式调用注释处理器

> ID：10565586
> 
> 赞同：7
> 
> 时间：2012-05-12T16:43:31.427
> 
> 标签：java, annotations, annotation-processing

这是我第一次编写注释处理器，我想以编程方式调用它。可能吗？

我为处理器编写了小代码：

```
@SupportedAnnotationTypes({"app.dev.ems.support.annotation.HBMModel"})
public class HBMModelProcessor extends AbstractProcessor {

    @Override
    public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment roundEnv) {
        Set<? extends Element> elements = roundEnv.getElementsAnnotatedWith(HBMModel.class);
        System.out.println(elements);
        return true;
    }

} 
```

现在如果我想调用 process 方法，那我该怎么做呢？我可以通过以下方式做到这一点：

```
HBMModelProcessor modelProcessor = new HBMModelProcessor();
modelProcessor.process(annotations, roundEnv) 
```

任何信息都会对我很有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-21T13:30:01.137

您可以在同一进程内以编程方式调用带有注释处理器的 Java 编译器，如下所示：

```
import com.sun.tools.javac.processing.PrintingProcessor;
import fi.jumi.actors.generator.JavaSourceFromString;
import org.junit.*;
import org.junit.rules.TemporaryFolder;

import javax.annotation.processing.Processor;
import javax.tools.*;
import javax.tools.JavaCompiler.CompilationTask;
import java.io.IOException;
import java.util.Arrays;

import static org.hamcrest.MatcherAssert.assertThat;
import static org.hamcrest.Matchers.is;

public class ExampleTest {

    @Rule
    public final TemporaryFolder tempDir = new TemporaryFolder();

    @Test
    public void example() throws IOException {
        JavaFileObject src = new JavaSourceFromString(
                "com.example.GuineaPig",
                "package com.example;\n" +
                "public interface GuineaPig {\n" +
                "    void foo();\n" +
                "}"
        );
        compile(new PrintingProcessor(), src);
    }

    private void compile(Processor processor, JavaFileObject... compilationUnits) throws IOException {
        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<JavaFileObject>();
        StandardJavaFileManager fileManager = compiler.getStandardFileManager(diagnostics, null, null);
        fileManager.setLocation(StandardLocation.CLASS_OUTPUT, Arrays.asList(tempDir.getRoot()));

        CompilationTask task = compiler.getTask(null, fileManager, diagnostics, null, null, Arrays.asList(compilationUnits));
        task.setProcessors(Arrays.asList(
                processor
        ));
        boolean success = task.call();
        for (Diagnostic<? extends JavaFileObject> diagnostic : diagnostics.getDiagnostics()) {
            System.err.println(diagnostic);
        }
        assertThat("compile succeeded", success, is(true));
    }
} 
```

如果您删除对的调用，`setProcessors`那么它将根据`META-INF/services/javax.annotation.processing.Processor`类路径上的文件自动检测注释处理器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-12-07T14:43:00.790

[jOOR](https://github.com/jOOQ/jOOR)有一个 API 来简化[访问，`javax.tools.JavaCompiler`如本答案所示](https://stackoverflow.com/a/27062558/521799)。您可以按如下方式轻松触发它：

```
Reflect.compile(
    "com.example.MyClass",
    "package com.example; "
  + "@app.dev.ems.support.annotation.HBMModel "
  + "class MyClass {}",
    new CompileOptions().processors(new HBMModelProcessor())
); 
```

这对于单元测试注释处理器特别有用。另请参阅此博客文章： [https ://blog.jooq.org/2018/12/07/how-to-unit-test-your-annotation-processor-using-joor](https://blog.jooq.org/2018/12/07/how-to-unit-test-your-annotation-processor-using-joor)

免责声明，我在 jOOR 背后的公司工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T17:45:57.823

这是[我对类似问题的回答](https://stackoverflow.com/a/3644624/348975)的链接。

您可以按照您在问题中建议的方式进行注释处理，但您必须以某种方式生成`annotations`and `roundEnv`。

注释处理的预期用途是在编译期间。我推荐一个两步编译过程。

1.  以通常的方式编译您的注释处理器和相关文件。
2.  编译其他文件（使用支持注释处理的编译器）。您可能需要向编译器提供一些参数：处理器路径、处理器的类名等。

编译器将生成`annotations`和`roundEnv`变量以及处理器的实例。（大多数编译器要求您的处理器是公共的并具有公共构造函数。）然后编译器将调用该`process`方法。

# css - CSS：鼠标移出时的过渡不透明度？

> ID：10565587
> 
> 赞同：120
> 
> 时间：2012-05-12T16:43:32.100
> 
> 标签：css, css-transitions

```
.item:hover {
        zoom: 1;
        filter: alpha(opacity=50);
        opacity: 0.5;
        -webkit-transition: opacity .15s ease-in-out;
        -moz-transition: opacity .15s ease-in-out;
        -ms-transition: opacity .15s ease-in-out;
        -o-transition: opacity .15s ease-in-out;
        transition: opacity .15s ease-in-out;
    } 
```

为什么这只会在我悬停时为不透明度设置动画，而当我用鼠标离开对象时却没有？

在这里演示：[https ://jsfiddle.net/7uR8z/](https://jsfiddle.net/7uR8z/)

​</p>

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-05-12T16:57:15.510

您仅将转换应用于`:hover`伪类，而不是元素本身。

```
.item {   
  height:200px;
  width:200px;
  background:red; 
  -webkit-transition: opacity 1s ease-in-out;
  -moz-transition: opacity 1s ease-in-out;
  -ms-transition: opacity 1s ease-in-out;
  -o-transition: opacity 1s ease-in-out;
  transition: opacity 1s ease-in-out;
}

.item:hover {
  zoom: 1;
  filter: alpha(opacity=50);
  opacity: 0.5;
} 
```

演示：[https ://jsfiddle.net/7uR8z/6/](https://jsfiddle.net/7uR8z/6/)

如果您不希望转换影响`mouse-over`事件，而只影响事件`mouse-out`，您可以关闭`:hover`状态的转换：

```
.item:hover {
  -webkit-transition: none;
  -moz-transition: none;
  -ms-transition: none;
  -o-transition: none;
  transition: none;
  zoom: 1;
  filter: alpha(opacity=50);
  opacity: 0.5;
} 
```

演示：[https ://jsfiddle.net/7uR8z/3/](https://jsfiddle.net/7uR8z/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T15:02:28.693

我设法使用 css/jQuery 找到了一个我觉得很舒服的解决方案。最初的问题：我不得不在制作动画时强制显示可见性，因为我有元素悬挂在该区域之外。这样做，大块文本现在在动画期间也挂在内容区域之外。

解决方案是以不透明度为 0 开始主要文本元素，并用于`addClass`注入和过渡到不透明度为 1。然后`removeClass`再次单击时。

我敢肯定有一个全 jQquery 的方式来做到这一点。我只是不适合这样做。:)

所以这是最基本的形式......

```
.slideDown().addClass("load");
.slideUp().removeClass("load"); 
```

感谢大家的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-11T17:49:13.980

```
$(window).scroll(function() {    
    $('.logo_container, .slogan').css({
        "opacity" : ".1",
        "transition" : "opacity .8s ease-in-out"
    });
}); 
```

检查小提琴：[https ://jsfiddle.net/2k3hfwo0/2/](https://jsfiddle.net/2k3hfwo0/2/)

# android - 放大android上的布局？

> ID：10565589
> 
> 赞同：1
> 
> 时间：2012-05-12T16:43:43.783
> 
> 标签：android, android-layout

我想在双击屏幕时放大我的布局。（包含按钮、图像等的布局）。我如何在 android 上实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:11:13.200

我已经做到了。我是如何做到这一点的，我创建了一个自定义布局来保存我的图像和按钮，当我缩放时我重新布局自定义布局。在布局过程中，我重新调整图像大小并相应地定位按钮.

万一有人有更好的解决方案，请告诉我。

谢谢。

# actionscript-3 - 对于 AS3 v2.1a，Box2D 中的 b2XForm 等效项是什么？

> ID：10565590
> 
> 赞同：0
> 
> 时间：2012-05-12T16:43:46.590
> 
> 标签：actionscript-3, flash, flash-cs5, box2d

我正在按照本教程使用 Box2D 创建自上而下的汽车：链接：[制作 Box2D 汽车的两种方法](http://www.emanueleferonato.com/2009/04/06/two-ways-to-make-box2d-cars/)

一切都很好，直到我到达`killOrthogonalVelocity`函数，第 152 行。此代码使用`b2XForm`当前版本的 Box2D 中不可用的代码。

v2.1a 中它的等价物是什么？还是没有解决方法？

我已经尝试在网上搜索解决方案，甚至在 2-3 天前给房东发了电子邮件，但无济于事......

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:54:05.843

NVM，我已经解决了。

`b2XForm``b2Tranform`在 v2.1a中已重命名为。

所有功能和其他东西都是一样的......

# php - 如何在Mysql中相邻表

> ID：10565594
> 
> 赞同：0
> 
> 时间：2012-05-12T16:44:21.850
> 
> 标签：php, mysql

我在 Mysql 中有这个查询

```
SELECT z.virtuemart_product_id,z.product_name,d.product_price FROM x5lui_virtuemart_products x
  inner join x5lui_virtuemart_products_en_gb z on x.virtuemart_product_id=z.virtuemart_product_id
  inner join x5lui_virtuemart_product_prices d on d.virtuemart_product_id=z.virtuemart_product_id
where x.published=1; 
```

结果是

```
18, 'Product 1', 600.00000
19, 'Product 2', 1200.0000
20, 'Product 3', 1800.00000 
```

但我需要结果是这样的

```
'18', '19', '20'
'Product 1', 'Product 2', 'Product 3'
600.00000 , 1200.0000, 1800.00000 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:51:56.447

我不确定你为什么需要这个，但你唯一能做的就是循环你的查询结果：

```
foreach( $results as $result ){
   $array['ids'][]    = $result['virtuemart_product_id'];
   $array['names'][]  = $result['product_name'];
   $array['prices'][] = $result['product_price'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T16:54:45.933

或者，您可以使用 GROUP_CONCAT 在查询结果中获取这些结果。这是一个简单的 Virtumart 示例，您必须适应在您的问题中使用所有其他表格。

```
SELECT GROUP_CONCAT(product_id SEPARATOR '|') FROM jos_vm_product WHERE product_publish='Y'
UNION
SELECT GROUP_CONCAT(product_name SEPARATOR '-') FROM jos_vm_product WHERE product_publish='Y'
UNION
SELECT GROUP_CONCAT(product_price SEPARATOR '^') FROM jos_vm_product_price 
```

好的，我找到了

```
SELECT GROUP_CONCAT(product_id, '{ITEM}') FROM jos_vm_product WHERE product_publish='Y'
UNION
SELECT GROUP_CONCAT(product_name, '{ITEM}') FROM jos_vm_product WHERE product_publish='Y'
UNION
SELECT GROUP_CONCAT(product_price, '{ITEM}') FROM jos_vm_product_price 
```

# c - 使用 sigaction 处理信号

> ID：10565597
> 
> 赞同：6
> 
> 时间：2012-05-12T16:44:35.607
> 
> 标签：c, unix, signals

我需要用 sigaction 处理一些信号，但是当我编译我的代码时，我得到了这个错误：

> 警告：来自不兼容的指针类型的赋值

代码是：

```
struct sigaction hup_act;
...
hup_act.sa_flags=SA_SIGINFO;
hup_act.sa_sigaction = sighupHandler;
sigaction(SIGHUP, &hup_act, NULL); 
```

警告是关于 hup_act.sa_sigaction 分配的。当我向我的应用程序发送 sighup 时，此警告会导致分段错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T17:24:19.670

如果`SA_SIGINFO`在`struct sigaction`的成员中设置，则`sa_flags`使用类型的方法

```
void signalhandler(int, siginfo_t *, void *); 
```

作为处理函数分配给`struct sigaction`的成员`sa_sigaction`

否则使用类型的方法

```
void signalhandler(int); 
```

作为要分配给`struct sigaction`成员的处理函数`sa_handler`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-12T17:05:34.507

您的 sighupHandler 必须是以下两个之一：

```
void sighupHandler(int) //for sa_handler 
```

或者

```
void sighupHandler(int, signinfo_t *, void *) //for sa_sigaction which is your case 
```

有关这方面的更多信息，请参阅[此处](http://www.kernel.org/doc/man-pages/online/pages/man2/sigaction.2.html)和[此处](http://pubs.opengroup.org/onlinepubs/7908799/xsh/signal.h.html)

编辑：请参阅下面和我上面建议的链接以获得更好的清晰度。我认为在您的情况下，由于下面建议的通用存储，编译器只会生成警告，否则会生成错误。

> sigaction 结构定义为：

```
struct sigaction {
    void     (*sa_handler)(int);
    void     (*sa_sigaction)(int, siginfo_t *, void *);
    sigset_t   sa_mask;
    int        sa_flags;
    void     (*sa_restorer)(void);
}; 
```

> 在某些架构上，涉及联合：不要同时分配`sa_handler`和`sa_sigaction`。

# python - Numpy：如何检查数组是否包含某些数字？

> ID：10565598
> 
> 赞同：10
> 
> 时间：2012-05-12T16:44:35.713
> 
> 标签：python, numpy

例如：我有`a = np.array([123, 412, 444])` 并且`b = np.array([123, 321])`

**我**想知道是否`a`包含. 有这个简单的操作吗？在这种情况下，这是不正确的。**`b`**

 *** * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-12T16:56:13.887

你总是可以使用一组：

```
>>> a = numpy.array([123, 412, 444])
>>> b = numpy.array([123, 321])
>>> set(b) in set(a)
False 
```

或者使用更新版本的 numpy：

```
>>> numpy.in1d(b,a)
array([ True, False], dtype=bool) 
```

如果您只想要“答案”而不是数组：

```
>>> numpy.in1d(b,a).all()
False 
```

或（最不希望的）：

```
>>> numpy.array([x in a for x in b]) 
array([ True, False], dtype=bool) 
```

循环在 numpy 数组上很慢，应该避免。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-12T16:50:03.493

您可以使用设置差异来确定您要查找的内容。[Numpy 有一个名为numpy.setdiff1d(ar1, ar2)](http://docs.scipy.org/doc/numpy/reference/generated/numpy.setdiff1d.html)的内置函数：

> 返回 ar1 中不存在于 ar2 中的排序后的唯一值。

您的案例示例：

```
>>> a = np.array([123, 412, 444])
>>> b = np.array([123, 321])
>>> diff = np.setdiff1d(b, a)
>>> print diff
array([321])
>>> if diff.size:
>>>    print "Not passed" 
```

因此，对于您的情况，您将做一组差异，您将从 b 中减去 a 并获得一个数组，其中 b 中的元素不在 a 中。然后你可以检查它是否为空。如您所见，输出是，这是一个存在于但不`312`存在于的条目；它的长度现在大于零，因此存在其中不存在的元素。`a``b``b``a`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-12T16:54:43.443

这意味着您要检查 b 的每个元素是否包含在 a 中。 [`in1d`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.in1d.html#numpy.in1d)这样做：

```
from numpy import array, in1d
a = array([123, 412, 444])
b = array([123, 321])
print in1d(b, a).all() 
```

2021 年更新：现在[`np.isin`](https://numpy.org/doc/stable/reference/generated/numpy.isin.html#numpy.isin)推荐

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-12T16:50:52.713

你可以这样做：

```
 a = an_array
 b = another_array
 for i in b:
    if i not in a:
        return False
return True 
```**

# c# - Visual C#，如何在标签中显示“Unicode 字符”？

> ID：10565604
> 
> 赞同：0
> 
> 时间：2012-05-12T16:45:10.710
> 
> 标签：c#, winforms, unicode

我有一个`Label`，我希望它显示一个音符。本[注](http://www.fileformat.info/info/unicode/char/1d163/index.htm)。

问题是，我没有任何可以显示此注释的字体。支持的字体是`LastResort` `Quivira`和`Symbola`。

如何显示此字符并使其编译后的程序能够在另一台计算机上显示此字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:17:24.623

不确定您使用的是什么 UI 框架（WPF？WinForms？浏览器？），但您可以使用图形软件制作便笺的 PNG 或 GIF 并以这种方式显示吗？如果您将图像作为嵌入式资源包含在内，则可以很容易地使用您的应用程序进行部署。

我还从您的链接中看到该图像以[SVG](http://www.fileformat.info/info/unicode/char/1d163/musical_symbol_sixtyfourth_note.svg)格式提供。有一些库可用于在[WPF](http://svg2xaml.codeplex.com/)和[WinForms](http://svg.codeplex.com/)中呈现 SVG 。

# asp-classic - 经典 ASP LocaleID

> ID：10565606
> 
> 赞同：0
> 
> 时间：2012-05-12T16:45:12.750
> 
> 标签：asp-classic

我有一个旧的经典 asp 应用程序，我想在 IIS 7.5 上安装我使用 LocaleID 2057，因为我认为它具有最适合我的设置（日期、数字等）。问题是我想将默认的“数字分组符号”从逗号更改为这个字符：`（ESC下的键）。

我已经直接在 IIS 上的 ASP 设置下更改了 LocaleID。

您知道 IIS 从哪里获取每个 LocaleID 的默认值？或者是否可以更改这些设置。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:53:28.117

我认为 2057 是一个代码页，因此您可以将其设置在页面顶部：

```
<%@LANGUAGE="VBSCRIPT" CODEPAGE="2057"%> 
```

# ios - 自定义段控制

> ID：10565609
> 
> 赞同：1
> 
> 时间：2012-05-12T16:45:29.783
> 
> 标签：ios, uisegmentedcontrol

我创建了一个自定义段控件。我正在创建一个 customSegmentControl 实例并将其添加到我的视图控制器中。但是段控制的委托方法没有被触发。相同的代码在 xcode 3.2 中工作，但在 4.2 中没有。我是 ARC 的新手。会有什么问题？

```
-(void) ViewDidLoad
{
   CustomSegmentControl *objSegmentControl=[[CustomSegmentControl alloc]init];
   objSegmentControl.frame=FrameForSegmentControl;
  [self.view addSubView:objSegmentControl];
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T16:51:02.540

当然，您没有获得委托代码，因为您不是委托！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:01:46.060

您无法获得委托，因为委托必须已在自定义类中实现，因此操作应该在您的主 viewController 中执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T11:25:29.360

最后我明白了..我只需要将我的自定义段控制器的对象作为类变量而不是本地变量。

# java - java - 在 spring/tomcat/jboss 库中清理临时文件的正确方法

> ID：10565610
> 
> 赞同：3
> 
> 时间：2012-05-12T16:45:31.043
> 
> 标签：java, spring, tomcat, jboss, shutdown

我有一个库，它在运行时在 java.io.tempdir 中创建一些临时文件。第一个问题是 linux/centos 是否会在打开时自动删除 /tmp 中的临时文件。希望不是！

第二个问题，我想确保在 JVM 退出或中止时自动清理我的临时文件。File.deleteOnExit 不是一个选项，因为通常当库的客户端关闭他的“流”时，我的临时文件会被删除。它们是非常短暂的文件，在正确使用的情况下，永远不会有任何混乱，但可能会出现崩溃和其他原因导致我的临时文件没有被删除。

第一个想法是，最好的方法是在 /tmp 中创建我自己唯一命名的文件夹（名称的随机部分），并在此文件夹中创建我的所有临时文件，而不是使用 File.createTempFile。然后我注册了一个关机钩子，并且知道我的 vm 实例使用的文件夹的路径，我在关机时迭代这个文件夹并删除其中的所有文件，然后删除该文件夹。

这似乎适用于 linux，基于您可以删除打开的文件这一事实，但我的库不能保证临时文件流的客户端在调用关闭挂钩之前将关闭所有流，依此类推windows 文件不会被删除。那是个问题。

此外，某些容器可能不允许关闭钩子，即使它们允许，也不能绝对保证调用了关闭钩子。

我希望有一些可靠的方法来清理我的库在启动时创建的垃圾，这样这种方法将适用于在同一台机器上运行的多个 JVM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T23:55:51.733

> 我有一个库，它在运行时在 java.io.tempdir 中创建一些临时文件。第一个问题是 linux/centos 是否会在打开时自动删除 /tmp 中的临时文件。希望不是！

这取决于是否有清理脚本正在运行。但是在 UN*X 机器上，这无关紧要，因为 JVM 将保存打开的文件描述符——这允许它被读/写，直到它被关闭。一旦关闭，文件系统将自动释放空间。

> 第二个问题，我想确保在 JVM 退出或中止时自动清理我的临时文件。File.deleteOnExit 不是一个选项，因为通常当库的客户端关闭他的“流”时，我的临时文件会被删除。它们是非常短暂的文件，在正确使用的情况下，永远不会有任何混乱，但可能会出现崩溃和其他原因导致我的临时文件没有被删除。

UN*X 服务器下的一个常见技巧是打开文件，然后使用 File.remove() 从文件系统中删除条目，同时仍然能够读取/写入它。如果JVM崩溃或正常退出，空间会自动释放，文件系统上没有垃圾临时文件。在 Windows 中，问题会更大一些，您可能需要实施定期扫描，尝试 File.remove() [忽略失败]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:02:32.230

是的，为临时文件创建临时文件夹是不错的选择，我认为这样做没有害处。您可以在库中构建自动删除例程以删除早于 x 天或小时的临时文件，并且您可以将此时间配置为用户指定此时间并创建默认值。

我也在 DataSynapse 服务器中看到了这种方法。

# java - 二维字符串数组声明，线程“main”中的异常 java.lang.NullPointerException java

> ID：10565617
> 
> 赞同：1
> 
> 时间：2012-05-12T16:46:15.577
> 
> 标签：java, arrays, string, nullpointerexception, declaration

我是 java 编程新手，我找不到解决问题的方法。我认为这是一个非常简单的问题，但我无法弄清楚我做错了什么，所以我希望你们中的一个可以帮助我。问题是当我尝试将一些数据存储在数组中时，它会返回以下错误：

```
Exception in thread "main" java.lang.NullPointerException 
```

## 代码

```
public class FetchData{
    private String rows[][];
    private int rowCount;

    public FetchData(){
        rowCount = 0;
    }

    public boolean ConnectAndFetch(String start, String end){

        //not relevant to the problem
        for(...){
            List<WebElementdivList = driver.findElements(By.tagName("div"));

            int divCount = 0;
            int colCount = 0;
            for (WebElement elem : divList) {
                if(divCount 24){ 
                    if(colCount < 17){
                        System.out.println(elem.getText());
                        //System.out.println(colCount);
                        //System.out.println(rowCount);
                        rows[rowCount][colCount] = elem.getText();
                        colCount++;
                    } else { 
                        rowCount += 1;
                        colCount = 0;
                    }
                }
                divCount++;
            }
        }
        return true;
    } 
```

我认为这与声明有关，`private String rows[][];`但我不知道如何解决。感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T16:48:39.640

您需要先初始化`rows`数组，然后才能在其中存储值：

```
String[][] rows = new String[10][10]; 
```

使用您需要的任何尺寸。我`10`随机选择的。我建议在你的类构造函数中初始化数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T16:54:37.427

您声明了字符串数组但未对其进行初始化...在使用它之前，您必须将其初始化为
row=new String [1][1]。由于您将数组声明为实例变量，因此分配给它的默认值是 null 这就是您收到空指针异常的原因。有关数组的更多信息，请访问以下链接：
[http ://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

# android - 应用程序移出屏幕

> ID：10565618
> 
> 赞同：0
> 
> 时间：2012-05-12T16:46:39.333
> 
> 标签：android, screen, listadapter

我正在为 android 开发一个应用程序并且遇到了一个小问题。我有一个带有四个选项卡的水平方向活动，每个选项卡调用一个单独的列表适配器。问题是当我关闭屏幕然后重新打开时，整个屏幕向下移动。有没有人遇到过类似的问题，如果有，你是怎么解决的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:07:54.027

我在摩托罗拉 xoom 上遇到了类似的问题，因为系统栏，gridview 超出了屏幕。我不知道什么是最好的解决方法，但我所做的是让窗口超出它的限制。奇怪的是，我只在摩托罗拉 xoom 上遇到了这些问题，而且只有在带有 gridview 的活动上。你能提供更多细节吗？

试试这个并告诉我它是否有帮助（把它放在活动的 onCreate 方法上）：

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS, WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS); 
```

糟糕的是，在亚马逊kindle fire上，它导致了一个错误，即由于kindle的系统栏，屏幕底部被隐藏了。在我使用的所有其他设备上，它工作得很好。

# javascript - 完成当前网页的相对 URL

> ID：10565624
> 
> 赞同：1
> 
> 时间：2012-05-12T16:47:31.097
> 
> 标签：javascript, uri

如何编写一个 javascript 函数，它采用一个字符串参数，它是一个相对 url，就好像它是一个相对路径，例如您可能在 Linux bash 脚本中看到的，并将它与当前网页的 url 结合以查找相对于的资源当前网页。

相对网址示例：

*   文件2.html
*   ./file2.html
*   ../foo/file2.html
*   ././file2.html

示例结果：

1.  基本情况

    *   在网页[http://mysite.com/dir1/index.html](http://mysite.com/dir1/index.html)
    *   相对网址 foo.html
    *   结果[http://mysite.com/dir1/foo.html](http://mysite.com/dir1/foo.html)
2.  多余的当前目录点（和本地网页）

    *   在网页文件中：///C:/Users/Me/dir1/dir2/page.html
    *   相对网址 ././foo.html
    *   结果文件：///C:/Users/Me/dir1/dir2/foo.html
        *   或第二个偏好文件：///C:/Users/Me/dir1/dir2/././foo.html
3.  父目录（以及一些偶然多余的点，以及另一种本地网页格式）

    *   在网页文件中：///C|/Users/Me/dir1/dir2/anotherpage.html
    *   相对网址 ./../././foo.html
    *   结果文件：///C:/Users/Me/dir1/foo.html
        *   或第二个偏好文件：///C:/Users/Me/dir1/dir2/./../././foo.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:56:03.480

你可以试试[URI js 库](http://medialize.github.com/URI.js/)

试试`relativeTo`，`absoluteTo`那里的功能。

例如：

```
var uri = new URI("../../foo.html");
var newUri = uri.absoluteTo("file://C:/Users/Me/dir1/dir2/page.html"); 
// newUri == "file://C:/Users/Me/foo.html" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:06:52.540

如果你知道访问锚的`href` *属性总是给你绝对 URL，你可以简单地创建一个临时的并读取属性：*

```
function to_absolute_url(relative) {
    var a = document.createElement('a');
    a.href = relative;
    return a.href;
} 
```

这当然只有当您要完成的 URL 始终是当前页面的 URL 时才有效。

[**演示**](http://jsfiddle.net/wNTUH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T17:01:48.317

这是有效的通用解决方案：

```
function makePath(path, rel) {
    path = path.substring(0, path.lastIndexOf("/") + 1) + rel;
    var dirs = path.split("/");
    var result = [];
    for (var i = 0; i < dirs.length; i++) {
        if (dirs[i] == ".") continue;
        if (dirs[i] == "..") result.pop();
        else result.push(dirs[i]);
    }
    return result.join("/");
} 
```

**​演示：http:** [//jsfiddle.net/h22SA/](http://jsfiddle.net/h22SA/)

应用到当前页面，您应该使用：

```
makePath(location.href, "././foo.html") 
```

# asp-classic - 经典的 ASP 变量范围 - 我想我已经失去了理智

> ID：10565626
> 
> 赞同：1
> 
> 时间：2012-05-12T16:47:35.977
> 
> 标签：asp-classic, iis-7.5, scope

自从我使用经典的 asp 以来已经有一段时间了，我对可变范围有完全的大脑衰退。

我在这里做错了什么？

```
<SCRIPT LANGUAGE=vbscript RUNAT=Server>
dim test
test = "Test it"

function testAsp()
   testasp = "Should be a result here " & test
end function
</SCRIPT>

<html>
<body>
<%
   response.write(testAsp())
%>
</body>
</html> 
```

如果我将声明移到块内，一切都很好。运行服务器 2008 R2，IIS 7.5。有什么改变吗？还是我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T16:55:50.827

将您的更改`<SCRIPT LANGUAGE=vbscript RUNAT=Server>`为 a`<%`并将您的更改为`</SCRIPT>`a `%>`，您应该会很好。

您会被经典 ASP 生命周期中脚本引擎的执行顺序所吸引。这很令人困惑，但是该`<SCRIPT />`块将在该`<% %>`块之后执行，即使它按源的顺序排在第一位。我无法轻易解释为什么在`<% %>`块中定义函数，但我希望它与函数提升有关。

为了进一步澄清，这是您开箱即用的顺序（假设 VBScript 被配置为您的默认语言）：

1.  JScript 包含在`<script runat="server" language="jscript" />`
2.  内联 VBscript，包含在`<% %>`块中
3.  VBScript 包含在`<script runat="server" language="vbscript" />`

# android - Android MediaPlayer：视频搜索导致 onSeekComplete 被调用两次

> ID：10565627
> 
> 赞同：3
> 
> 时间：2012-05-12T16:47:51.660
> 
> 标签：android, android-mediaplayer

我在这里做错了什么？我设置了 onSeekCompleteListener，我准备了一部电影，我进行了一次搜索。马上 onSeekComplete 被调用。然后延迟播放电影。然后再次调用 onSeekComplete ！为什么又来了？这是我的代码：

```
package com.test.seek;

import java.io.IOException;

import android.app.Activity;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;

public class SeekTestActivity extends Activity implements SurfaceHolder.Callback, MediaPlayer.OnSeekCompleteListener {

    private SurfaceView sv;
    private MediaPlayer mp = new MediaPlayer();
    private static final String TAG = SeekTestActivity.class.getSimpleName();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        sv = new SurfaceView(this);
        setContentView(sv);
        sv.getHolder().addCallback(this);
        sv.getHolder().setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        mp.setOnSeekCompleteListener(this);
        try {
            mp.setDataSource( this, Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.coverbutton_600x1024_05) );
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (SecurityException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceCreated(SurfaceHolder arg0) {
        mp.setDisplay( sv.getHolder() );
        Log.d(TAG,"preparing movie");
        try {
            mp.prepare();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.d(TAG,"seeking");
        mp.seekTo(0);
        final Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                Log.d(TAG,"playing movie");
                mp.start();
            }
        }, 1000);

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onSeekComplete(MediaPlayer mp) {
        Log.d(TAG,"seek complete");

    }
} 
```

这是 LogCat：

```
05-12 09:18:38.446: D/SeekTestActivity(3857): preparing movie
05-12 09:18:38.446: D/AwesomePlayer(3543): AwesomePlayer Not VPX decoder = **video/avc** and video is = 600X1024
05-12 09:18:38.446: D/OMX_CORE(3543): TIOMX_GetHandle
05-12 09:18:38.446: E/OMX_PROXYDEC(3543): ___INSISDE VIDEO DECODER PROXY WRAPPER__
05-12 09:18:38.571: D/OMXCodec(3543): Flash Clip: Profile: 77, Level: 31, Interlaced: 0, RefFrames: 2
05-12 09:18:38.571: D/OMXCodec(3543): Updated. H264 Component profile 2 level 512 NRefFrames 2
05-12 09:18:38.571: D/OMXCodec(3543): initOutputFormat WxH 600x1024 Padded 768x1120
05-12 09:18:38.571: D/AwesomePlayer(3543):  initRenderer_l 768x1120
05-12 09:18:38.571: D/AwesomePlayer(3543):  initRenderer_l 600x1024
05-12 09:18:38.571: D/OMXCodec(3543): CodecRecommended O/P BufferCnt[9]
05-12 09:18:38.571: D/AwesomePlayer(3543): Codec Recommended outputBuffer count 9
05-12 09:18:38.571: D/TIOverlay(1419): Enabling the OVERLAY[0]
05-12 09:18:38.571: I/Overlay-V4L2(1419): Openning /dev/video1
05-12 09:18:38.571: D/TIOverlay(1419): Creating overlay from W768/H1120/FMT33 ...
05-12 09:18:38.571: D/TIOverlay(1419): mZorderUsage[0] is assigned to 0
05-12 09:18:38.571: I/TIOverlay(1419): Setting position X65/Y0/W959/H600
05-12 09:18:38.571: D/TIOverlay(1419): REQUEST FOR LCD1
05-12 09:18:38.571: D/TIOverlay(1419): found Panel Id @ [0], displayname [lcd2]
05-12 09:18:38.571: D/TIOverlay(1419): found Display Manager @ [2], managername [2lcd]
05-12 09:18:38.571: I/TIOverlay(1419): Position/X65/Y0/W959/H600/R270/A255/Z1
05-12 09:18:38.571: I/TIOverlay(1419): Adjusted Position/X65/Y0/W600/H958
05-12 09:18:38.571: D/TIOverlay(3543): Num of Buffers = 2
05-12 09:18:38.571: D/TIOverlay(3543): LCD[0] NAME[lcd2]
05-12 09:18:38.571: D/TIOverlay(3543): LCD[0] PATH[/sys/devices/platform/omapdss/display0/enabled]
05-12 09:18:38.571: D/TIOverlay(3543): LCD[0] timings[46000,1024/160/150/10,600/12/20/3
05-12 09:18:38.571: D/TIOverlay(3543): ]
05-12 09:18:38.571: E/TIOverlay(3543): Can't open the file[/sys/devices/platform/omapdss/display1/name]
05-12 09:18:38.571: D/TIOverlay(3543): lcd name get failed (maybe because device has less displays than max allowed)
05-12 09:18:38.571: D/TIOverlay(3543): MANAGER[0] NAME[lcd]
05-12 09:18:38.571: D/TIOverlay(3543): MANAGER[1] NAME[tv]
05-12 09:18:38.579: D/TIOverlay(3543): MANAGER[2] NAME[2lcd]
05-12 09:18:38.579: D/TIHardwareRenderer(3543): Overlay Buffer Count [as recommneded] 9
05-12 09:18:38.579: D/TIOverlay(3543): overlay_resizeInput 768x1120 9
05-12 09:18:38.602: I/OMXCodec(3543): [OMX.TI.DUCATI1.VIDEO.DECODER] allocating 4 buffers of size 622592 on input port
05-12 09:18:38.633: I/OMXCodec(3543): [OMX.TI.DUCATI1.VIDEO.DECODER] allocating 9 buffers of size 6881280 on output port
05-12 09:18:38.641: D/SeekTestActivity(3857): seeking
05-12 09:18:38.657: I/ActivityManager(1419): Displayed com.test.seek/.SeekTestActivity: +358ms
05-12 09:18:38.657: I/LAB126(1481): StatusBarService hears intent. action: com.lab126.intent.TOP_WINDOW_CHANGED
05-12 09:18:38.657: I/LAB126(1481):  window changed
05-12 09:18:38.672: D/SeekTestActivity(3857): seek complete
05-12 09:18:38.688: I/TIOverlay(1419): Setting position X65/Y0/W899/H600
05-12 09:18:38.688: D/TIOverlay(1419): REQUEST FOR LCD1
05-12 09:18:38.688: D/TIOverlay(1419): found Panel Id @ [0], displayname [lcd2]
05-12 09:18:38.688: D/TIOverlay(1419): found Display Manager @ [2], managername [2lcd]
05-12 09:18:38.688: I/TIOverlay(1419): Position/X65/Y0/W899/H600/R270/A255/Z1
05-12 09:18:38.688: I/TIOverlay(1419): Adjusted Position/X65/Y0/W600/H898
05-12 09:18:38.727: D/dalvikvm(1481): GC_CONCURRENT freed 1095K, 51% free 3456K/7047K, external 2508K/2989K, paused 2ms+3ms
05-12 09:18:39.641: D/SeekTestActivity(3857): playing movie
05-12 09:18:39.696: D/Omap4ALSA(3543): open called for devices 00000002 in mode 0 channels 00000000...
05-12 09:18:39.719: I/Omap4ALSA(3543): Using ping-pong!
05-12 09:18:39.719: I/Omap4ALSA(3543): Buffer size: 4096
05-12 09:18:39.719: I/Omap4ALSA(3543): Latency: 92879
05-12 09:18:39.758: D/TIOverlay(3543): Crop Win/X32/Y24/W600/H1024
05-12 09:18:39.758: D/TIOverlay(3543): REQUEST FOR LCD1
05-12 09:18:39.758: D/TIOverlay(3543): found Panel Id @ [0], displayname [lcd2]
05-12 09:18:39.758: D/TIOverlay(3543): found Display Manager @ [2], managername [2lcd]
05-12 09:18:39.766: I/Omap4ALSA(3543): Initialized ALSA PLAYBACK device 'plughw:0,0'
05-12 09:18:39.766: E/AudioHardwareALSA(3543): RE-OPEN AFTER STANDBY:: took 70 msecs
05-12 09:18:39.774: D/SeekTestActivity(3857): seek complete 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:13:46.560

不幸的是，我无法对您的问题添加评论，但我遇到了同样的问题。我还注意到，当`onSeekComplete`第一次调用时输出`currentMediaPostition()`，它返回与调用时相同的媒体位置`seekTo(msec)`；这很好。

但是第二次调用`onSeekComplete`（当媒体启动时）将输出另一个值（最多多秒甚至更少）。

所以我认为第二个调用来自`start()`方法。如果您将延迟从 1000 毫秒提高到 3000 毫秒，呼叫也会稍后到来。

# jquery - Rails：after_create 导致 ajax 的性能问题

> ID：10565631
> 
> 赞同：1
> 
> 时间：2012-05-12T16:48:02.730
> 
> 标签：jquery, ruby-on-rails, ajax, devise

我正在使用本教程构建一个预发布注册站点。[http://railsapps.github.com/tutorial-rails-prelaunch-signup.html](http://railsapps.github.com/tutorial-rails-prelaunch-signup.html)。在用户输入他们的电子邮件以请求邀请后，它使用 ajax 呈现`_thankyou.html`部分内容，该部分内容是从重写的 Devise 注册控制器呈现的。

但是，该站点还使用`after_create :send_welcome_email`回调来发送欢迎“感谢请求邀请”电子邮件。这会显着降低 ajax 的性能。如果没有 after_create 回调，ajax（至少在本地主机上）工作得非常快，表单很快消失，感谢部分几乎立即呈现。但是，如果我包含 after_create 回调，表单需要很长时间才能消失（这会导致用户多次单击提交按钮，从而产生更多问题），并且感谢部分也需要很长时间......

有没有办法安排事情，以便在呈现感谢部分后触发电子邮件？

**新设计创建方法**

```
 # ovverride #create to respond to AJAX with a partial
  def create
    build_resource

    if resource.save
      if resource.active_for_authentication?
        sign_in(resource_name, resource)
        (render(:partial => 'thankyou', :layout => false) && return)  if request.xhr?
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        expire_session_data_after_sign_in!
        (render(:partial => 'thankyou', :layout => false) && return)  if request.xhr?
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      render :action => :new, :layout => !request.xhr?
    end
  end 
```

**请求邀请提交时触发的ajax。**

```
// use AJAX to submit the "request invitation" form
  $('#invitation_button').live('click', function() {
    var email = $('form #user_email').val();
    var password = $('form #user_password').val();
    var dataString = 'user[email]='+ email + '&user[password]=' + password;
    $.ajax({
      type: "POST",
      url: "/users",
      data: dataString,
      success: function(data) {
        $('#request-invite').html(data);
      }
    });
    return false;
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T16:52:11.970

我的猜测是发送电子邮件是最耗时的，尝试使用延迟作业或其他一些后台处理来执行电子邮件的实际发送，因此 after_create 只会将要发送的电子邮件排队，但它实际上是由后台进程

[https://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)

# python - Python - 需要一个字符缓冲区对象？

> ID：10565633
> 
> 赞同：2
> 
> 时间：2012-05-12T16:48:27.867
> 
> 标签：python, email, imap

我有以下代码：

```
import imaplib
import email
import codecs
mail = imaplib.IMAP4_SSL('imap.gmail.com')
mail.login('email@gmail.com', 'pass')
mail.list()

mail.select("inbox") 

result, data = mail.uid('search', None, "ALL")
i = len(data[0].split())

for x in range(i):
    latest_email_uid = data[0].split()[x]
    result, email_data = mail.uid('fetch', latest_email_uid, '(RFC822)')
    raw_email = email_data[0][1]
    email_message = email.message_from_string(raw_email)
    save_string = str("/Users/Me/Desktop/Email/" + str(x) + ".txt") 
    myfile = open(save_string, 'a')
    myfile.write(email_message)
    myfile.close() 
```

（我正在尝试将所有电子邮件导出为 txt 文件。）

我得到错误`expected a character buffer object`。

有谁知道为什么会这样？

谢谢

编辑：错误在行`myfile.write(email_message)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T16:59:29.673

`email.message_from_string(raw_email)`不是返回一个字符串，而是一个`Message`对象。如果不`Message`以某种方式将它们序列化，就不能将对象直接写入文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T04:09:09.340

您所要做的就是转换`email_message`为字符串。

```
myfile.write(str(email_message)) 
```

# java - App Engine 多对多关系 JAVA

> ID：10565638
> 
> 赞同：0
> 
> 时间：2012-05-12T16:49:47.180
> 
> 标签：java, google-app-engine, datastore, relationships

我一直在努力尝试正确配置多对多关系，这应该是直截了当的。

我有一个*购物清单*类和一个*项目*类。我只是希望购物清单能够保存物品清单。

请不要回复 Google App 引擎文档链接，我正在寻找有人在他们自己的项目中使用过的工作示例，而不是 Google 松散地抛出的理论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:29:29.550

您不能像在 mongodb 中那样在父项中“保留”项。

但是，您可以从购物清单类中引用您的项目类

从您的项目类中获取 ID，并将它们添加到您的购物清单类中。它看起来像：

[db.ListProperty(db.Key)](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#ListProperty)

我知道你不想要 gae 文档，但他们有一个用于建模关系的页面[here](https://developers.google.com/appengine/articles/modeling)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:59:08.957

这很简单。

创建一个持有多对多关系的类。在你的情况下：

```
class ShoppingListItems(){

  @Id
  private String id;
  private Long shoppingListId;
  private Long itemId;

  public ShoppingListItems(Long shoppingListId, Long itemId) {
    this.id = shoppingListId.toString() + "-" + itemId.toString();
    this.shoppingListId = shoppingListId;
    this.itemId = itemId;
  }

  public String getId() {
    return id;
  }

  public static void addItemToList(Long shoppingListId, Long itemId, DAO dao) {
        // add shopping list and itemsr IDs to the ShoppingListItems 'join' table
        ShoppingListItems record = new ShoppingListItems(shoppingListId, itemId);
        dao.ofy().put(record);   
  } 
```

这里 @Id 和 dao.ofy().put(record) 来自 Objectify 术语，但您可以根据需要使用 JPA 或 JDO。

# jquery - 无法编辑自定义格式化程序单元格的值

> ID：10565642
> 
> 赞同：1
> 
> 时间：2012-05-12T16:50:10.890
> 
> 标签：jquery, jqgrid

使用自定义格式化程序将文本框添加到网格中的列后，我无法在网格呈现后以任何方式选择或更改文本。我不想在线编辑，也不想让网格将更改保留回服务器，我只是希望能够更改此列的文本，然后让独立于网格的另一个操作询问行并更新服务器。

谢谢你，斯蒂芬

网格：

```
var favoriteGrid;
var colNames = ['Qty', 'Attributes', 'Item #', 'Brand', 'Product', 'Catalog', 'Price', 'UOM', 'Case', 'Remarks', 'Wt.', 'Par', 'Date', 'ProductId', '', 'CatalogId'];
var colModel = [
{ name: 'Quantity', index: 'Quantity', width: 22, formatter: quantityFormatter/*, editable:true, edittype:'text'*/ },
{ name: 'ProductAttributes', index: 'ProductAttributes', sortable: false, width: 50, title: false, formatter: productFormatter },
{ name: 'ItemNum', index: 'ItemNum', width: 50, align: "right" },
{ name: 'BrandName', index: 'BrandName', width: 100 },
{ name: 'ProducName', index: 'ProducName', width: 150 },
{ name: 'Catalog', index: 'Catalog', width: 100 },
{ name: 'Price', index: 'Price', width: 40, sorttype: "number", align: "right" },
{ name: 'UOM', index: 'UOM', width: 30 },
{ name: 'CasePack', index: 'CasePack', width: 30 },
{ name: 'PackageRemarks', index: 'PackageRemarks', width: 80 },
{ name: 'AveWeight', index: 'AveWeight', width: 30, title: false, align: "right" },
{ name: 'Par', index: 'Par', width: 25, title: false, align: "right"},
{ name: 'LastPurchaseDate', index: 'LastPurchaseDate', width: 44, align: "right", formatter: 'date', formatoptions: { newformat: 'm/d/Y'} },
{ name: 'ProductId', index: 'ProductId', hidden: true, key: true },
{ name: 'SortPriority', index: 'SortPriority', width: 20, sorttype: "number", align: "right" },
{ name: 'CatalogId', index: 'CatalogId', hidden: true }
 ];

function quantityFormatter(cellvalue, options, rowObject) {
    return '<input type="text" class="qty-order" value="' + cellvalue + '" class="text" title="' + rowObject[13] + '" id="qty-' + rowObject[13] + '"/>';
};

function productFormatter(cellvalue, options, rowObject) <Omitted...>

favoriteGrid = $('#favoriteGrid');

$.jgrid.no_legacy_api = true;

favoriteGrid.jqGrid({
    url: '/Buyer/Favorite/ItemsService/' + urlIndex,
    datatype: 'json',
    mtype: 'GET',
    ajaxGridOptions: { contentType: "application/json" },
    jsonReader: {
        id: "ProductId",
        cell: "",
        root: function (obj) { return obj.rows; },
        page: function () { return 1; },
        total: function () { return 1; },
        records: function (obj) { return obj.rows.length; },
        repeatitems: true
    },
   /*        
    cellEdit: true,
    cellSubmit: null,
    cellurl: null,
   */
    colNames: colNames,
    colModel: colModel,
    pager: $('#favoritePager'),
    pginput: true,
    rowNum: 1000,
    autowidth: true,
    height: getProposedHeight(),
    sortable: true,
    multiselect: true,
    viewrecords: true,
    ignoreCase: true,
    loadonce: true,
    loadui: 'block',
    emptyrecords: 'Nothing to display',
    ondblClickRow: function (rowid, e) {
        myClickHandle.call(this, rowid);
    },
    loadComplete: function () {
        var gd = $('#favoriteGrid');
        fixGridSize(gd);

        /*var ids = favoriteGrid.jqGrid('getDataIDs');*/
    }
}).jqGrid('navGrid', '#favoritePager',
    { add: false, edit: false, del: false, search: true, refresh: false },
    {},
    {},
    {},
    { multipleSearch: true, showQuery: false },
    {}).jqGrid('sortableRows', {
        update: function (ev, ui) {
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:23:01.283

我在您发布的自定义格式化程序的当前实现中看到至少一个问题

```
function quantityFormatter(cellvalue, options, rowObject) {
    return '<input type="text" class="qty-order" value="' + cellvalue +
               '" class="text" title="' + rowObject[13] +
               '" id="qty-' + rowObject[13] + '"/>';
} 
```

问题是自定义格式化程序可以用**3 种不同格式**`rowObject`调用。

你用`jsonReader: {cell: "", repeatitems: true, ...}`. 因此，在第一次加载时，`rowObject`将是真正的数组，其中包含表示该行的数据（通常是字符串数组）。

你用`loadonce: true`. 所以在第一次加载网格内部`data`参数时会被填充。`data`将是项目数组，但项目将是具有列名等属性的*对象*`name`（请参阅项目中的属性`colModel`）。例如，如果用户单击列标题，则需要对网格进行排序，并且必须从本地`data`参数重新填充网格主体。在这种情况下，自定义格式化程序`quantityFormatter`将使用`rowObject`which 表示 item of来调用，`data`并且您必须使用`rowObject.ProductId`而不是`rowObject[13]`.

如果您要使用`setCell`或`setRowData`更改“数量”列的值，则格式`rowObject`将是第三个（!!!???）。包含参数[的行将](https://github.com/tonytomov/jqGrid/blob/v4.3.2/js/grid.base.js#L3269)作为. 将在[该行](https://github.com/tonytomov/jqGrid/blob/v4.3.2/js/grid.base.js#L3265)之前设置：`setCell``ind``rowObject``ind`

```
var ind = $t.rows.namedItem(rowid); 
```

因此，您将拥有`rowObject`代表行 ( `<tr>`) 的 DOM 元素。所以你应该使用类似的东西`$(rowObject).find(">td:nth-child(13)").text()`而不是`rowObject[13]`.

要编写通用代码，您必须测试`rowObject`. 例如

```
function quantityFormatter(cellvalue, options, rowObject) {
    var productId = typeof rowObject.ProductId !== "undefined" ?
            rowObject.ProductId :
            (rowObject instanceof HTMLTableRowElement ?
                $(rowObject).find(">td:nth-child(13)").text() :
                rowObject[13]);
    return '<input type="text" class="qty-order text" value="' + cellvalue +
               ' title="' + productId + '" id="qty-' + productId + '"/>';
} 
```

在您的情况下，您可以简化上面的代码，因为行`key: true`的`'ProductId'`id 和列的包含相同`'ProductId'`。`options`rowid在`rowId`属性的输入参数中分配。所以你可以重写你的格式化程序实现如下

```
function quantityFormatter(cellvalue, options) {
    var productId = options.rowId;
    return '<input type="text" class="qty-order text" value="' + cellvalue +
               ' title="' + productId + '" id="qty-' + productId + '"/>';
} 
```

现在我们根本不使用`rowObject`它，它适用于调用自定义格式化程序的所有树案例。

# html - 使用亚马逊云进行网络托管？

> ID：10565644
> 
> 赞同：0
> 
> 时间：2012-05-12T16:50:19.873
> 
> 标签：html, amazon-ec2

是否可以使用 Amazon ECS 托管网页？我尝试访问我的页面[http://ec2-xx-xx-xxx-xxx.compute-1.amazonaws.com/](http://ec2-xx-xx-xxx-xxx.compute-1.amazonaws.com/)并没有任何反应。

我的老板给了我一个用户名和 SSH 密钥。我不确定我可以将 index.html 放在哪里，以便它可以显示在网络上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:07:18.297

当然。我将我的网站托管在一个 ec2 微型实例上，我也将它用于其他事情。

您的 EC2 实例只是一个 Linux（或 Windows）虚拟机。如果要提供页面，则需要安装 Web 服务器。例如，在 Linux 上，您可以安装 apache、nginx 或类似的。在 Windows 上，您还可以安装 IIS。您还需要将您想要在服务器上提供的页面放在您的 DocRoot 中，并确保您已经向外界开放了端口 80（如果使用 ssl，则为 443）。

您没有提及您正在运行哪个 AMI，所以我假设 Amazon Linux AMI，它可能是示例中最基本和最常用的。在作为 Fedora/RedHat 衍生产品的 Amazon Linux AMI 上，您可以像这样安装 apache

```
sudo yum install httpd 
```

然后页面进入`/var/www/html`。

您可以通过命令行或 aws 控制台打开端口。控制台可能更容易。假设您的安全组被称为`default`从命令行打开端口 80 只是

```
ec2-authorize default -p 80 
```

开箱即用，没有理由期望会有一个 Web 服务器，除非您当然启动了一个预先配置了一个的 AMI，并且有很多。AMI 范围从原始操作系统映像到作为设备的完整应用程序堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T22:04:09.957

如果站点是静态的，您可以更简单地[将其托管在 S3 上](http://aws.typepad.com/aws/2011/02/host-your-static-website-on-amazon-s3.html)并放弃任何 EC2 实例。

# blackberry - 在黑莓中添加下拉屏幕

> ID：10565645
> 
> 赞同：0
> 
> 时间：2012-05-12T16:50:22.153
> 
> 标签：blackberry, drop-down-menu

我想知道是否可以创建一个下拉屏幕（不是启动屏幕或下拉列表），当单击类似组件的小三角形时，用户可以将其拉下，从而打开一个新的屏幕或菜单列表。

我在 iphone 和网站上也注意到了这种功能。但我不确定是否可以为黑莓应用程序做任何事情。任何了解此类编程组件的人请提供建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:00:27.833

对于 BB 5.0 及更高版本，请查看`EyelidFieldManager`下拉效果的控件。不过，它没有三角形。我一直在尝试自己弄清楚那个，但运气不佳。

# javascript - Meteor 文档中的消息计数示例如何工作？

> ID：10565654
> 
> 赞同：41
> 
> 时间：2012-05-12T16:51:11.387
> 
> 标签：javascript, mongodb, meteor, publish-subscribe

无法从[文档](http://docs.meteor.com/#meteor_publish)中完全理解这个例子......我尝试以多种不同的方式运行它，以便观察它是如何工作的，等等。

你怎么订阅这个？我们可以包含完成这项工作所需的客户端代码吗？

有没有一个集合叫`messages-count`？是`Room`消息的集合吗？我们可以在示例中包含集合定义吗？

这方面的任何提示都会很棒！

*注意*：这是最初发布此问题时出现的代码（2012 年 5 月）。现在更简单了。

```
// server: publish the current size of a collection
Meteor.publish("messages-count", function (roomId) {
  var self = this;
  var uuid = Meteor.uuid();
  var count = 0;

  handle = Room.find({room_id: roomId}).observe({
    added: function (doc, idx) {
      count++;
      self.set("messages-count", uuid, "count", count);
      self.flush();
    },
    removed: function (doc, idx) {
      count--;
      self.set("messages-count", uuid, "count", count);
      self.flush();
    }
    // don't care about moved or changed
  });

  // remove data and turn off observe when client unsubs
  self.onStop(function () {
    handle.stop();
    self.unset("messages-count", uuid, "count");
    self.flush();
  });
}); 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-12T19:47:34.007

感谢您促使我写一个更清晰的解释。这是我评论的更完整示例。我已经清理了一些错误和不一致之处。下一个文档版本将使用它。

[`Meteor.publish`](http://docs.meteor.com/#meteor_publish)相当灵活。它不仅限于向客户端发布现有的 MongoDB 集合：我们可以发布任何我们想要的内容。具体来说，`Meteor.publish`定义了一组客户端可以订阅*的文档。*每个文档都属于某个集合名称（一个字符串），有一个唯一的`_id`字段，然后有一些 JSON 属性。随着集合中的文档发生更改，服务器会将更改发送到每个订阅的客户端，使客户端保持最新。

我们将在此处定义一个名为 的文档集`"counts-by-room"`，其中包含名为 的集合中的单个文档`"counts"`。该文档将有两个字段：a`roomId`带有房间的 ID，以及`count`：该房间中的消息总数。没有真正的 MongoDB 集合名为`counts`. 这只是我们的 Meteor 服务器将向下发送到客户端的集合的名称，并存储在名为 的*客户端*集合`counts`中。

为此，我们的发布函数采用`roomId`来自客户端的参数，并观察该房间中所有消息（在其他地方定义）的查询。我们可以在`observeChanges`这里使用更有效的形式来观察查询，因为我们不需要完整的文档，只需要添加或删除新文档的知识。`roomId`任何时候添加我们感兴趣的新消息，我们的回调都会增加内部计数，然后使用更新后的总数向客户端发布一个新文档。当一条消息被删除时，它会减少计数并将更新发送给客户端。

当我们第一次调用时，对于已经存在的每条消息`observeChanges`，一些回调将立即运行。`added`然后，无论何时添加或删除消息，都会触发未来的更改。

我们的发布函数还注册了一个`onStop`处理程序，以便在客户端取消订阅（手动或断开连接）时进行清理。此处理程序从客户端删除属性并拆除正在运行的`observeChanges`.

每次新客户端订阅时都会运行一个发布函数`"counts-by-room"`，因此每个客户端都会`observeChanges`代表它运行一个。

```
// server: publish the current size of a collection
Meteor.publish("counts-by-room", function (roomId) {
  var self = this;
  var count = 0;
  var initializing = true;

  var handle = Messages.find({room_id: roomId}).observeChanges({
    added: function (doc, idx) {
      count++;
      if (!initializing)
        self.changed("counts", roomId, {count: count});  // "counts" is the published collection name
    },
    removed: function (doc, idx) {
      count--;
      self.changed("counts", roomId, {count: count});  // same published collection, "counts"
    }
    // don't care about moved or changed
  });

  initializing = false;

  // publish the initial count. `observeChanges` guaranteed not to return
  // until the initial set of `added` callbacks have run, so the `count`
  // variable is up to date.
  self.added("counts", roomId, {count: count});

  // and signal that the initial document set is now available on the client
  self.ready();

  // turn off observe when client unsubscribes
  self.onStop(function () {
    handle.stop();
  });
}); 
```

现在，在客户端，我们可以将其视为典型的 Meteor 订阅。首先，我们需要一个`Mongo.Collection`保存我们计算的计数文档。由于服务器正在发布到名为 的集合`"counts"`中，因此我们将`"counts"`作为参数传递给`Mongo.Collection`构造函数。

```
// client: declare collection to hold count object
Counts = new Mongo.Collection("counts"); 
```

然后我们就可以订阅了。（实际上，您可以在声明集合之前订阅：Meteor 会将传入的更新排队，直到有地方放置它们。）*订阅*的名称是`"counts-by-room"`，它有一个参数：当前房间的 ID。我已经把它包裹在里面`Deps.autorun`，以便随着`Session.get('roomId')`更改，客户端将自动取消订阅旧房间的计数并重新订阅新房间的计数。

```
// client: autosubscribe to the count for the current room
Tracker.autorun(function () {
  Meteor.subscribe("counts-by-room", Session.get("roomId"));
}); 
```

最后，我们获得了文档，`Counts`我们可以像在客户端上的任何其他 Mongo 集合一样使用它。每当服务器发送新计数时，任何引用此数据的模板都会自动重绘。

```
// client: use the new collection
console.log("Current room has " + Counts.findOne().count + " messages."); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:36:51.723

正如 Leonhardt Wille 所说，这个解决方案的缺点是流星从 Mongo 服务器下载整个项目集合只是为了计算它们。他在 [gist.github.com/3925008](http://gist.github.com/3925008)上的解决方案更好，但插入新项目时计数器不会更新。

这是我的反应式解决方案

收藏：

```
Players = new Meteor.Collection("players");
PlayersCounts = new Meteor.Collection("players_counts") 
```

服务器：

```
Meteor.publish("players_counts", function(){
    var uuid = Meteor.uuid()
    var self = this;

    var unthrottled_setCount = function(){
        cnt = Players.find({}).count()
        self.set("players_counts", uuid, {count: cnt})
        self.flush()
    }

    var setCount = _.throttle(unthrottled_setCount, 50)

    var handle = Meteor._InvalidationCrossbar.listen({collection: "players"}, function(notification, complete){
        setCount();
        complete();
    })

    setCount();
    self.complete()
    self.flush()

    self.onStop(function(){
        handle.stop();
        self.unset("players_counts", uuid, ["count"]);
        self.flush();
    });
}); 
```

客户：

```
Meteor.subscribe("players_counts")

Template.leaderboard.total = function(){
    var cnt = PlayersCounts.findOne({})
    if(cnt) {
        return cnt.count;
    } else {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:12:47.547

刚刚找到解决 self.flush() 向客户端发送数千个更新的问题的解决方案 - 计数时使用 _.debounce ：

```
count = 0
throttled_subscription = _.debounce =>
  @set 'items-count', uuid, count: count
  @flush()
, 10
handle = Items.find(selector).observe
  added: =>
    count++
    throttled_subscription()
  removed: =>
    count--
    throttled_subscription() 
```

这只会在 10ms 没有变化后设置计数并刷新订阅。

感谢#meteor 上的@possibilities 的提示。

# java - 在照片上绘图

> ID：10565662
> 
> 赞同：-1
> 
> 时间：2012-05-12T16:52:12.733
> 
> 标签：java, android, eclipse, camera

我正在制作一个使用平板电脑/手机内置摄像头的安卓应用程序。我需要帮助来制作我刚刚拍摄的照片“可编辑”。想法是用户可以在图片上绘制东西，就像您在绘画中所做的那样，然后能够保存带有这些绘图的图片。

我需要做什么才能使这成为可能？

代码的主干是#38-#41，来自：[http ://thenewboston.org/list.php?cat=6](http://thenewboston.org/list.php?cat=6)

我的主类如下所示：[http](http://pastebin.com/FH0J7u1A) : //pastebin.com/FH0J7u1A 我的布局 xml 文件中有一个按钮和一个 imageview。当我按下按钮时，相机启动，我可以保存一张图片，然后保存在 imageviewer 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T17:20:17.177

这是一个非常模糊的问题，但我理解，因为六个月前我也想知道同样的事情。可悲的是，模糊的问题得到了模糊的答案，最重要的是，SO 上没有人会为您编写此代码。你有很多研究要做。这是我将如何开始的基本描述。

首先查看将应用程序与相机绑定。这很简单，您可以调用一个意图，并且 onActivityResult 您可以接收到他们拍摄的图像文件的路径。

编辑图片的编辑活动的布局必须有一个 Canvas 对象，并且您可能需要在其下方或上方的一些按钮来选择他们的绘图工具。

布局的Canvas必须在一个单独的类中实现，并且需要实现runnable。这需要您`run()`在 Canvas 类中创建一个函数，并且在其中您将有一个循环。通过该循环的每次迭代，您将清除画布，绘制`drawBitmap()`用于填充屏幕的图片，然后绘制用户绘制的所有内容。

现在，在编辑活动中，您必须实现一个触摸监听器。这将要求您制定一种`onTouch()`方法，`MotionEvent`告诉您触摸发生的位置和方式。每次触摸屏幕时，您都需要查看他们当前选择的工具，并将其添加到画布上绘制的绘图中。

完成后，保存画布的结果。我并不是说这是创建您心目中的应用程序的最佳方式，我绝不是专家。这只是我作为初学者开始思考的建议。

就像我说的，你有很多东西要学！我建议搜索我提到的任何您不理解的术语或您没有听说过的小部件，并查看与它们相关的教程。有人提到newboston，他们是对的，他有很好的教程。我还推荐了一些来自 Apress 的书籍，尤其是我大量提到了“Beginning Android Games”，以了解任何涉及 Canvas 交互的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T15:23:27.563

查看 sdk 示例目录中的 api 演示，您应该找到原始绘画的示例代码。

# c# - 从 Windows 小工具拨打电话号码

> ID：10565665
> 
> 赞同：0
> 
> 时间：2012-05-12T16:52:45.443
> 
> 标签：c#, javascript

我正在从我的小工具应用程序中调用 JavaScript 函数来拨打电话号码。

C#代码：

```
HtmlPage.Window.Invoke("CallPhone", string.Format("callto://{0}", Number)); 
```

Java脚本代码：

```
function CallPhone(Number) {
wnd = window.open(Number); 
```

}

该功能运行良好，但它打开 Internet Explorer 窗口，我不知道 JavaScrip，乍一看没有找到任何其他解决方案。那么有没有更好的解决方案可以在不打开浏览器窗口的情况下拨打号码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:39:51.523

callto **://**链接格式将始终启动您的默认 Internet 浏览器，因此是否打开新窗口取决于它。

这应该启动Skype吗？

好的，只需使用 callto 参数启动 skype.exe 进程。

# objective-c - 如何将 NSData 转换为 NSString？

> ID：10565666
> 
> 赞同：31
> 
> 时间：2012-05-12T16:52:51.517
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [将 UTF-8 编码的 NSData 转换为 NSString](https://stackoverflow.com/questions/2467844/convert-utf-8-encoded-nsdata-to-nsstring)

我需要将从文件读取的 NSData 转换为 NSString。怎么做？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-12T16:57:04.263

`NSString`为此目的提供了一个初始化程序。

```
// NSData *data = [NSData data];
NSString *string = [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-12T16:58:29.980

你可以这样做

```
NSString *yourStr= [[[NSString alloc] initWithData:data
                                         encoding:NSUTF8StringEncoding] autorelease]; 
```

或者当数据以空值结尾时使用它的其他方法是：-

```
NSString *yourStr= [NSString stringWithUTF8String:[theData bytes]]; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-12T16:56:50.033

```
NSString *convertedString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] 
```

# ruby-on-rails - 如何链接到 Rails 中的 README_FOR_APP 和自述文件？

> ID：10565667
> 
> 赞同：0
> 
> 时间：2012-05-12T16:53:00.903
> 
> 标签：ruby-on-rails, static, documentation

我认为这应该是一个简单的问题，我的所有 Rails 文档都在 doc/app 目录中，我可以在浏览器中手动加载和查看。我只想从另一个视图链接到此文档。我尝试非常简单地制作另一个控制器来打开静态 HTML 自述文件页面。

```
class DocController < ApplicationController
  def show
      open ("/doc/app/doc/README_FOR_APP.html")
  end
end 
```

我已经尝试了上述各种变化。该页面已加载，但未应用 CSS 样式，并且尝试链接到各个页面会弹出一个错误，表明该应用程序希望我尝试链接到的每个页面都有一个操作。

看来我所采用的方法实际实施起来非常乏味。为每一页都做一个动作听起来是个糟糕的选择。有没有更简单的方法？

如果不清楚，所有内容都使用自动记录

```
rake doc:app 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:02:43.400

您的网络服务器不会提供 doc 目录，但您可以符号链接`#{Rails.root}/public/docs`->`#{Rails.root}/doc`然后它可以在以下位置访问`http://localhost:3000/docs`

# ruby-on-rails - Rails 3 - 嵌套属性和继承

> ID：10565674
> 
> 赞同：1
> 
> 时间：2012-05-12T16:54:15.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, inheritance, nested-attributes

嗨，

我有一个嵌套形式的问题。实际上，我有两个问题，但第二个问题很小。基本结构是这样的：

```
class Connectable
  has_one :web_account
  accepts_nested_attributes_for :web_account
end

class Person < Connectable
end

class WebAccount
   belongs_to :owner, class_name => `Connectable`
end 
```

现在，我想创建一个嵌套表单来同时创建一个 Person 和一个 WebAccount。我有以下代码：

```
<%= form_for @person do |f| %> 
   ...
   <%= f.fields_for web_accounts do |child| %>
      ....
   <end>
<end> 
```

WebAccount 的唯一重要属性是名称并且是一个字符串。

还要注意定义 child_form 时使用的复数形式。我不知道为什么，但是当我使用单数（这对我来说似乎是正确的）时，rails 只会打印出一个空表格，而使用复数就可以了。我在控制器中添加了一些代码，用 :web_account 替换表单给出的 :web_accounts 哈希条目。

更重要的是，我收到以下错误：

```
WebAccount(#97097470) expected, got ActiveSupport::HashWithIndifferentAccess(#83887850) 
```

我还尝试在控制台中执行此操作，定义以下哈希：

```
p = { :name => "ab", :lastname => "cd", :web_account => { :name => "ab.cd" }} 
```

但结果相同。

这是我的控制器中的代码：

```
def create
  params[:person][:status] = Status.where(:name => params[:person][:status]).first

  # Transforms the web_accounts entry into web_account
  params[:person][:web_account] = params[:person][:web_accounts]
  params[:person].delete(:web_accounts)

  @person = Person.new(params[:person])

  .... (the rest is the standard response)

end 
```

错误在第 58 行给出，即上面代码中的 Person.new(...) 行。如果需要，我可以打印出完整的框架跟踪，但和往常一样，它相当长。

为什么这不起作用？我只是无法理解它，因为在我看来，我已经遵循了所有在线教程......这可能是继承吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T17:31:58.347

您应该使用`web_account_attributes`而不是`web_account`. [文档](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

在控制台中尝试：

```
p = { :name => "ab", :lastname => "cd", :web_account_attributes => { :name => "ab.cd" }} 
```

# angle - 角度从 360 变回 0 时的问题

> ID：10565675
> 
> 赞同：1
> 
> 时间：2012-05-12T16:54:25.620
> 
> 标签：angle

我试图确定一个物体相对于另一个物体是顺时针还是逆时针移动

我通过制作两个向量来做到这一点。

第一个从中心对象到玩家对象 第二个从中心对象到玩家对象加上它的速度矢量

然后我得到这些向量的角度并比较它们。+ 差异是逆时针方向，- 差异是顺时针方向。

当其中一个角度从 360-0 传递过来时，问题就出现了，反之亦然，因为这样比较就会中断；

即 360-350 是逆时针 +10 10 - 360 是顺时针 -350

确定一个角度是否大于另一个避免此问题的最佳方法是什么？

# php - 如何在一个文件中缓存 css/js 并从缓存文件夹中调用该文件？

> ID：10565676
> 
> 赞同：1
> 
> 时间：2012-05-12T16:54:27.237
> 
> 标签：php

> **可能重复：**
> [在缓存文件夹中缓存 css 和 js 并从该文件夹调用 css 是否可能？](https://stackoverflow.com/questions/10587376/cache-css-and-js-in-cache-folder-and-call-css-from-that-folder-is-it-possible)

如何在一个文件中缓存 css/js 并从缓存文件夹中调用该文件？像css“ [http://http](http://http) ref/css.r235436346.css”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:22:27.810

将此添加到 .htaccess 文件

```
<FilesMatch "main.css">
AddHandler application/x-httpd-php5 .css
Header Set Content-Type "text/css"
</FilesMatch> 

<?php
$last_modified = date("D, d M Y H:i:s \G\M\T", filemtime("<name of the css file>"));
$expiration = date("D, d M Y H:i:s \G\M\T", strtotime('+1 year'));

 header("Cache-Control: public, no-transform");  
 header("Expires: $expiration");
 header("Last-Modified: $last_modified");
 ?> 
```

我认为同样的解决方案适用于 js。

参考。从这里的一些线程，但找不到链接。一直在使用它。

# c# - 在会话中存储每页状态

> ID：10565684
> 
> 赞同：1
> 
> 时间：2012-05-12T16:54:48.403
> 
> 标签：c#, asp.net, session, viewstate

在我的场景中，我需要维护差异页面的状态。例如排序，网格视图的分页。当用户导航到另一个页面时，他们会返回到 gridview 页面。他们将看到 Grid 具有相同的分页/排序/过滤他们之前离开页面的内容。

我找到了一个解决方案：

[http://www.codeproject.com/Articles/18445/Maintaining-State-Per-Page-in-ASP-NET-Web-Applic](http://www.codeproject.com/Articles/18445/Maintaining-State-Per-Page-in-ASP-NET-Web-Applicat)

但我真的不明白编码。

这是我不明白的部分？

```
protected override void OnPreRender(EventArgs e)
    {
        if (System.Web.HttpContext.Current != null)
        {
            PullStated();
            PageState.SetPageState(this, this.PageState);
        }

        base.OnPreRender(e);
    }

 protected virtual void PullStated()
    {
    } 
```

为什么内部 PullStated() 方法是空的？PullStated() 的目的是什么？

# image - AS3 保持图像纵横比

> ID：10565686
> 
> 赞同：1
> 
> 时间：2012-05-12T16:54:54.967
> 
> 标签：image, actionscript-3

我正在尝试调整人们 Facebook 图像的大小以在 Flash 应用程序中使用，问题是应用程序将图像从其原始形式缩小到 68px - 68px 正方形，这会破坏比例。

有没有办法解决这个问题？

*代码：*

```
var ImgWidth:Number = 68;
var ImgHeight:Number = 68;

fb_profile_img.width = ImgWidth;
fb_profile_img.height = ImgHeight;
MovieClipName[InstanceName].addChild(fb_profile_img); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:12:19.043

```
var ImgWidth:Number = 68;
var ImgHeight:Number = 68;

var k:Number = ImgHeight / ImgWidth;
if( fb_profile_img.width * k > fb_profile_img.height ){
    k = ImgWidth / fb_profile_img.width;
}else{
    k = ImgHeight / fb_profile_img.height;
}
fb_profile_img.width *= k;
fb_profile_img.height *= k;
MovieClipName[InstanceName].addChild(fb_profile_img); 
```

# c++ - LPTSTR 和 LPCSTR C++

> ID：10565692
> 
> 赞同：6
> 
> 时间：2012-05-12T16:55:40.160
> 
> 标签：c++, lpcstr, lptstr

因此函数 GetUserName() 的输出将用户名作为 LPTSTR 提供。我需要将其转换为 LPCSTR，因为我希望用户名是 ftp 目录的名称。

```
TCHAR id [UNLEN+1];
DWORD size = UNLEN+1;
GetUserName(id, &size); // this is an LPTSTR

FtpCreateDirectory(hFtpSession,id) // 2d parameter should be an LPCSTR 
```

问题是我需要将 LPTSTR 字符串转换为 LPCSTR 字符串。现在我知道了：

*LPTSTR 是（非常量）TCHAR 字符串，LPCSTR 是 const 字符串。*

**但是如何将 TCHAR 转换为 const 字符串？**

我应该注意我没有丰富的编程/C++ 背景，我还应该注意我正在编译多字节，而不是 unicode。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T16:58:08.807

当您编译多字节而不是 unicode 时，您无需执行任何操作。`LPTSTR`将隐式转换为，`LPCSTR`因为它只是一个`char*`转换`const char*`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T16:58:40.093

如果你不是为 Unicode 编译，`TCHAR`= `char`，所以你不需要转换任何东西。另一方面，在为 Unicode 编译时，您必须执行转换；有几种选择，看看[这里](https://stackoverflow.com/questions/1525456/converting-unicode-to-multibyte)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T19:15:41.277

```
TCHAR id [UNLEN+1];
DWORD size = UNLEN+1;
GetUserName(&id[0], &size); // this is an LPTSTR

FtpCreateDirectory(hFtpSession,&id[0]); 
```

此代码应在 unicode 或多字节构建中工作。

# objective-c - 在循环中添加延迟

> ID：10565695
> 
> 赞同：1
> 
> 时间：2012-05-12T16:55:55.243
> 
> 标签：objective-c, ios4, cocos2d-iphone

有什么方法可以将几分之一秒的延迟添加到循环中（例如 A for 循环）。即我希望每次迭代后有一个短暂的延迟。

我知道 cocos2d 允许您延迟安排选择器。但我不确定在这种情况下如何使用它。

我也知道睡眠是昂贵的，不可取的。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:28:13.880

你不应该在 cocos2d 中使用 NSTimers。如果您想暂停游戏，那将造成麻烦。

如果你想在迭代之间以固定的延迟循环一些动作，你可以自由地使用 scedule:interval: 需要延迟的方法。

```
[self schedule:@selector(methodToScedule) interval:yourDelay] 
```

或者如果你必须做随机延迟，你可以使用 cocos2d 动作的序列。例如

```
- (void) sceduleMethod
{
    // do anything you want

    ccTime randomDuration = // make your random duration
    id delayAction = [CCDelayTime actionWithDuration: randomDuration];
    id callbackAction = [CCCallFunc actionWithTarget:self selector:@selector(scheduleMethod)];
    id sequence = [CCSequenece actionOne: delayAction actionTwo: callbackAction];
    [self runAction: sequence];
} 
```

在这种情况下，您只能调用您的方法一次。然后它会以给定的延迟调用自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:59:41.290

你可以使用 C 的 sleep 函数：

```
sleep(seconds); 
```

但是您也可以查看`UITimer`，或者可能是基于块的`performSelector:withObject:afterDelay:`方法。

有关更多基于 NSObject 的方法，请参阅此：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/ NSObject/performSelector:withObject:afterDelay](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelector:withObject:afterDelay)

# python - 循环遍历可迭代类的开销

> ID：10565700
> 
> 赞同：7
> 
> 时间：2012-05-12T16:56:54.043
> 
> 标签：python, performance, benchmarking

我在摆弄 Python 的生成器和可迭代类，只是为了好玩。基本上，我想测试一些我从来都不太确定的东西：Python 中的类有一些显着的开销，如果可以的话，最好依赖实现的方法`yield`而不是实现迭代器协议的类。

我在 Google 中找不到关于这个主题的令人满意的解释，所以我决定使用这两个简单的脚本自己测试它们：`func_iter.py`和`class_iter.py`

这是`func_iter.py`：

```
#!/usr/bin/env python

import time  

x = 0
def create_generator(num):
    mylist = range(num)
    for i in mylist:
        yield i

t = time.time()
gen = create_generator(100000)

for i in gen:
    x = x + i

print "%.3f" % (time.time() - t) 
```

这是`class_iter.py`：

```
#!/usr/bin/env python

import time

x = 0

class Generator(object):

    def __init__(self, num):
        self.start = 0
        self.end = num

    def __iter__(self):
        return self

    def next(self):
        if self.start == self.end:
            raise StopIteration
        else:
            self.start = self.start + 1
            return self.start

t = time.time()
gen = Generator(100000)

for i in gen:
    x = x + i

print "%.3f" % (time.time() - t) 
```

然后我在 bash 中使用它运行了它们每个 10 次（`class_iter.py`例如）：

```
for i in {1..10}; do ./class_iter.py; done 
```

以下是他们每个人的平均运行时间：

```
class_iter.py: 0.0864
func_iter.py: 0.0307 
```

现在，我的问题是：

1.  我的方法正确吗？我的比较公平吗？
2.  如果是这样，为什么会有很大的不同？为什么`class_iter.py`要花将近三倍的时间`func_iter.py`才能运行？
3.  如果没有，我该如何改进我的方法或提出更好的比较？

编辑：正如 Dacav 建议的那样，我也尝试`func_iter.py`使用`xrange`而不是`range`. 这将其平均运行时间减少到 0.0263 秒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T17:07:15.050

类版本花费大量时间访问它自己的变量。每个`self.whatever`成本周期。如果您将您的定义`__iter__`为生成器并最小化实例变量的使用，则类和函数版本之间的差异可以忽略不计：

```
setup = """
def create_generator(num):
    mylist = range(num)
    for i in mylist:
        yield i

class Generator(object):

    def __init__(self, num):
        self.start = 0
        self.end = num

    def __iter__(self):
        return self

    def next(self):
        if self.start == self.end:
            raise StopIteration
        else:
            self.start = self.start + 1
            return self.start

class Generator2(object):

    def __init__(self, num):
        self.mylist = range(num)

    def __iter__(self):
        for i in self.mylist:
            yield i
"""

import timeit

print timeit.timeit('for p in create_generator(1000):p', setup, number=1000)
print timeit.timeit('for p in Generator(1000):p', setup, number=1000)
print timeit.timeit('for p in Generator2(1000):p', setup, number=1000) 
```

结果：

```
0.158941984177
0.696810007095
0.160784959793 
```

所以第二个生成器类几乎和函数版本一样快。

请注意，`Generator`和`Generator2`在示例中并不完全等效，在某些情况下您不能简单地用生成器替换“普通”迭代器（例如编组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:02:25.967

如果您使用 python，那么您很有可能不是针对软件性能，而是更关心开发的快速和敏捷。

话虽如此，我认为比较方法是相当公平的，只要您的代码足够聪明以避免对一种解决方案产生偏见。

例如，`yield`基于 - 的版本的可能改进可能是删除函数并改为`range`使用该`xrange`函数。不同之处（在 python 2.x 中）是`range`构建一个值列表（因此它必须为其分配内存空间），同时`xrange`构建一个范围为给定值的可迭代对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T17:11:14.877

你似乎是完全正确的，你的比较是公平的。当您只比较开销时，支持迭代器协议的类将比生成器函数慢。

然而，在现实世界中，如果代码复杂到足以证明一个类的合理*性，那么算法的运行时间将使开销相形见绌*，因此它与程序的运行时间完全无关。

您在这里担心微优化。你不应该。专注于编写好的、可读的代码，并为工作使用正确的算法。类版本中属性查找和方法调用所花费的时间不会成为您的瓶颈。

# html - 如何在HTML中左右对齐多行？

> ID：10565709
> 
> 赞同：1
> 
> 时间：2012-05-12T16:58:15.290
> 
> 标签：html, css, alignment

我如何在多行上左右对齐文本，例如：

```
┌─────────────────────────────────────┐
│ Tums                                 29 │
│ Oxydativedecarboxilization          ATP │
│ appdata      C:\Users\Ian\AppData\Local │
└─────────────────────────────────────┘ 
```

例如：

> ![在此处输入图像描述](../Images/d3c926d28f05f53f4ffc0f43c69e3bf9.png)

**注意**：之前已询问过此问题的单行变体

这是我在 SO 和其他地方发现的一些尝试的示例，以及尝试左+右对齐的情况：

```
<!DOCTYPE html>
<HTML>
<HEAD>
<HEAD>
    <TITLE>Home Page</TITLE>
    <STYLE type="text/css">
        .left {
            float: left;
        }
        .right {
            float: right;
        }
    </STYLE>
</HEAD>
<BODY>
    <DIV>
        <P><SPAN class='left'>Tums</SPAN><SPAN class='right'>29</SPAN>
        <P><SPAN class='left'>Oxydativedecarboxilization</SPAN><SPAN class='right'>42</SPAN>
        <P><SPAN class='left'>appdata</SPAN><SPAN class='right'>C:\Users\Ian\AppData\Local</SPAN>
    </DIV>

    <UL>
        <LI class='line1'><P class='left'>Tums<P class='right'>29
        <LI class='line2'><P class='left'>Oxydativedecarboxilization<P class='right'>42
        <LI class='line3'><P class='left'>appdata<P class='right'>C:\Users\Ian\AppData\Local
    </UL>

    <DIV>
        <P class='left'>Tums<P class='right'>29
        <P class='left'>Oxydativedecarboxilization<P class='right'>42
        <P class='left'>appdata<P class='right'>C:\Users\Ian\AppData\Local
    </DIV>
</BODY>
</HTML> 
```

错误地呈现为：

> ![在此处输入图像描述](../Images/45d96e927651d821de35732cfaf69155.png)

所需的渲染：

> ![在此处输入图像描述](../Images/d3c926d28f05f53f4ffc0f43c69e3bf9.png)

**额外阅读**

*   [HTML/CSS - 左右对齐在同一行？](https://stackoverflow.com/questions/1639705/html-css-right-and-left-align-on-the-same-line)
*   [左对齐和右对齐的跨浏览器 CSS 在同一行](https://stackoverflow.com/questions/3324694/cross-browser-css-for-left-align-and-right-align-on-the-same-line)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:10:42.070

你只需要清除你的花车。[http://jsfiddle.net/P7KuB/2/](http://jsfiddle.net/P7KuB/2/)

```
<div>
<p><span class='left'>Tums</span><span class='right'>29</span></p>
<p><span class='left'>Oxydativedecarboxilization</span><span class='right'>42</span></p>
<p><span class='left'>appdata</span><span class='right'>C:\Users\Ian\AppData\Local</span></p> 
```

```
.left { float: left; }
.right { float: right; }
p { overflow: hidden; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:06:27.720

.wrap { 清除：两者；}

```
<DIV>
    <P class="wrap"><SPAN class='left'>Tums</SPAN><SPAN class='right'>29</SPAN>
    <P class="wrap"><SPAN class='left'>Oxydativedecarboxilization</SPAN><SPAN class='right'>42</SPAN>
    <P class="wrap"><SPAN class='left'>appdata</SPAN><SPAN class='right'>C:\Users\Ian\AppData\Local</SPAN>
</DIV> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T17:10:12.320

**见：http:** [//jsfiddle.net/thirtydot/HkybR/2/](http://jsfiddle.net/thirtydot/HkybR/2/)

**HTML：**

```
<div class="info">
    <div>
        <span class="left">Tums</span><span class="right">29</span>
    </div>
    <div>
        <span class="left">Oxydativedecarboxilization</span><span class="right">ATP</span>
    </div>
    <div>
        <span class="left">appdata</span><span class="right">C:\Users\Ian\AppData\Local</span>
    </div>
</div>​ 
```

可能更语义化。

**CSS：**

```
.info {
    margin: 16px;
    padding: 8px;
    background: #fff;
    float: left;
    font-size: 21px;
    clear: both;
}
.info > div {
    overflow: hidden;
    text-align: right;
}
.info .left {
    float: left;
    padding-right: 10px;
}​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T17:35:25.670

```
<UL style="list-style-type: none;">
    <LI class='line1'>Tums<div class='right'>29</div></LI>
    <LI class='line2'>Oxydativedecarboxilization<div class='right'>42</div></LI>
    <LI class='line3'>appdata<div class='right'>C:\Users\Ian\AppData\Local</div></LI>
</UL> 
```

呈现为...
![以上的输出](../Images/7237e757d9d8b78ab3aca565bef4cd05.png)

您可能还需要更改 UL 元素的边距。

编辑：我想 clear 方法是一个更优雅的解决方案！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T17:06:20.320

你的测试用例太复杂了。这是一个有效的多行版本：

```
<!DOCTYPE html>
<HTML>
<HEAD>
<HEAD>
    <TITLE>Home Page</TITLE>
    <STYLE type="text/css">
        .left {
            float: left;
        }
        .right {
            float: right;
        }
        .clear {
            clear:both;
        }            
    </STYLE>
</HEAD>
<BODY>
    <DIV>
        <P class="left clear">Left</P>
        <P class="right">Right</P>
        <P class="left clear">Left</P>
        <P class="right">Right</P>
        <P class="left clear">Left</P>
        <P class="right">RightRightRightRightRightRight RightRight RightRight RightRight</P>
    </DIV>
</BODY>
</HTML>​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-12T17:08:22.173

CSS 添加

```
p, li { overflow:hidden; } 
```

示例：http: [//jsbin.com/asulih/](http://jsbin.com/asulih/)

# matlab - 如何在多条图中添加标签或更改某些条的颜色

> ID：10565712
> 
> 赞同：1
> 
> 时间：2012-05-12T16:58:34.013
> 
> 标签：matlab, plot

假设我有一个多重栏，看起来像这样：

```
aa = repmat([1 2 10 5 15 3], 5,1)
aa =

     1     2    10     5    15     3
     1     2    10     5    15     3
     1     2    10     5    15     3
     1     2    10     5    15     3
     1     2    10     5    15     3

bar(aa) 
```

![在此处输入图像描述](../Images/cf65692380929548f43e19be1130575b.png)

我需要的是在满足某些条件的某些列上放一个星号或标签。另一种选择是更改该条的颜色。

如果我能得到每列的坐标，我可以使用 plot. 或者也许我可以以某种方式修改错误栏？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:55:40.093

## 问题

您可以使用以下方法获取条形图的 x 和 y 值（x=水平位置，y=每个条形图的高度）：

```
hb=bar(aa);
x=cell2mat(get(hb,'Xdata'));
y=cell2mat(get(hb,'Ydata')); 
```

然后您可以使用它来绘制带有[text](http://www.mathworks.nl/help/techdoc/ref/text.html)的 textlabel ，或者甚至只是使用 plot 绘制标记符号：

```
plot(x,y,'*',Markersize',12) 
```

不幸的是，这仅在您只有一个数据系列时才能正常工作，因为 Xdata 包含系列中的索引（1、2、3 等）。对于多个系列，matlab 将条形分布在该索引周围，但 Xdata 值都是相同的（尽管在图中，它们并未绘制在完全相同的位置）。

## 解决方案

将选项添加`'hist'`到条形图：

```
hb=bar(aa,'hist') 
```

这会创建补丁而不是 bareries，并且

```
x=cell2mat(get(hb,'Xdata'));
y=cell2mat(get(hb,'Ydata')); 
```

现在包含这些补丁的（实际）角落。提取 x 中心如下：

```
xcenter = 0.5*(x(2:4:end,:)+x(3:4:end,:)); 
```

高度可通过补丁的上角之一获得：

```
ytop = y(2:4:end,:); 
```

现在您可以将其用于绘图：

```
idx_mark = 3;
plot(xcenter(idx_mark ,:),ytop(idx_mark ,:),'*','Markersize',12) 
```

![在此处输入图像描述](../Images/bb40521a5279c2f89ef909739b7697eb.png)

或用于注释：

```
text(xcenter(idx_mark ,2),ytop(idx_mark ,2),'MARKED',...
    'HorizontalAlignment','center', ...
    'VerticalAlignment','bottom' ) 
```

![在此处输入图像描述](../Images/26be90ee444f30dbcd8d471c63dbfc4b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:52:06.730

我认为你可以通过使用 bar 函数属性来做到这一点（对于颜色）。

这也完全取决于你是否或多或少地知道你的情节会是什么样子；如果您事先知道，我认为您可以使用 XTick 和 XTicklabel 来标记您的列。

[http://www.mathworks.nl/help/techdoc/ref/bar.html](http://www.mathworks.nl/help/techdoc/ref/bar.html)

# php - PHP - 如何打开按文件类型在页面上流式传输的文件

> ID：10565714
> 
> 赞同：2
> 
> 时间：2012-05-12T16:58:51.077
> 
> 标签：php, http, mp3, file-type

我想在不知道文件名或位置的情况下使用 PHP 按文件类型下载文件，这可能吗？该文件将由另一个正在流式传输该文件的 HTML 页面打开/包含。

我要制作的脚本将能够通过单独的 HTML 页面找到流/打开/包含的特定文件类型的所有文件的 URL（对不起，我不知道正确的术语）。

因此 PHP 脚本必须打开页面，确定该页面正在流式传输哪些文件，并选择具有正确文件类型的文件。那是我不知道如何写的部分，或者即使可能。

如果这不能很好地解释问题，我会添加更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:16:37.447

如果您正在寻找适用于特定 html 页面的解决方案，那么您应该手动处理 html 并提取您需要的内容。

如果你想要一个适用于*所有网页*的通用解决方案......我认为唯一真正好的工作解决方案是挂钩原始网络数据，例如通过数据包嗅探器，然后让你的 php 脚本告诉安装在您的服务器上的网络浏览器要加载哪个网页。原因是媒体流通常涉及浏览器插件（java、flash、silverlight 等）或 javascript。在大多数情况下，它们需要在生成所需的 url 之前执行，因为 url 可能是从数据片段中组装而成的，或者 url 可能位于需要首先下载的外部文件中……可能性是很多的。

但是......网络浏览器可以解决这一切。让它开始流式传输一秒钟，然后您一直通过数据包嗅探器观看并寻找您感兴趣的 mime 类型，它的 url 将在数据中，所有这些都已解析并为您准备好。

再三考虑——忘记数据包嗅探器。只需编写一个浏览器扩展程序。如果萤火虫可以看到所有被请求的网址，那么您的扩展程序也可以。firebug 也是开源的，所以你可以看到他们是如何做到的。让您的扩展程序将 url 发送到本地文件或脚本。

仅供参考 - 这是一个经验丰富的程序员的任务，而不是初学者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:17:34.483

**确定文件类型的最佳方法是检查文件的前几个字节——称为 [magic bytes]。**

```
<?php
      $file = "/path/to/file";

    // in PHP 4, we can do:
    $fhandle = finfo_open(FILEINFO_MIME);
    $mime_type = finfo_file($fhandle,$file); // e.g. gives "image/jpeg" 

    // in PHP 5, we can do:

    $file_info = new finfo(FILEINFO_MIME);  // object oriented approach!
    $mime_type = $file_info->buffer(file_get_contents($file));  // e.g. gives "image/jpeg"

    switch($mime_type) {
        case "image/jpeg":
            // your actions go here...
    }
?> 
```

这是所有 mime 类型的数组：

```
$mime_types = array("323" => "text/h323",
"acx" => "application/internet-property-stream",
"ai" => "application/postscript",
"aif" => "audio/x-aiff",
"aifc" => "audio/x-aiff",
"aiff" => "audio/x-aiff",
"asf" => "video/x-ms-asf",
"asr" => "video/x-ms-asf",
"asx" => "video/x-ms-asf",
"au" => "audio/basic",
"avi" => "video/x-msvideo",
"axs" => "application/olescript",
"bas" => "text/plain",
"bcpio" => "application/x-bcpio",
"bin" => "application/octet-stream",
"bmp" => "image/bmp",
"c" => "text/plain",
"cat" => "application/vnd.ms-pkiseccat",
"cdf" => "application/x-cdf",
"cer" => "application/x-x509-ca-cert",
"class" => "application/octet-stream",
"clp" => "application/x-msclip",
"cmx" => "image/x-cmx",
"cod" => "image/cis-cod",
"cpio" => "application/x-cpio",
"crd" => "application/x-mscardfile",
"crl" => "application/pkix-crl",
"crt" => "application/x-x509-ca-cert",
"csh" => "application/x-csh",
"css" => "text/css",
"dcr" => "application/x-director",
"der" => "application/x-x509-ca-cert",
"dir" => "application/x-director",
"dll" => "application/x-msdownload",
"dms" => "application/octet-stream",
"doc" => "application/msword",
"dot" => "application/msword",
"dvi" => "application/x-dvi",
"dxr" => "application/x-director",
"eps" => "application/postscript",
"etx" => "text/x-setext",
"evy" => "application/envoy",
"exe" => "application/octet-stream",
"fif" => "application/fractals",
"flr" => "x-world/x-vrml",
"gif" => "image/gif",
"gtar" => "application/x-gtar",
"gz" => "application/x-gzip",
"h" => "text/plain",
"hdf" => "application/x-hdf",
"hlp" => "application/winhlp",
"hqx" => "application/mac-binhex40",
"hta" => "application/hta",
"htc" => "text/x-component",
"htm" => "text/html",
"html" => "text/html",
"htt" => "text/webviewhtml",
"ico" => "image/x-icon",
"ief" => "image/ief",
"iii" => "application/x-iphone",
"ins" => "application/x-internet-signup",
"isp" => "application/x-internet-signup",
"jfif" => "image/pipeg",
"jpe" => "image/jpeg",
"jpeg" => "image/jpeg",
"jpg" => "image/jpeg",
"js" => "application/x-javascript",
"latex" => "application/x-latex",
"lha" => "application/octet-stream",
"lsf" => "video/x-la-asf",
"lsx" => "video/x-la-asf",
"lzh" => "application/octet-stream",
"m13" => "application/x-msmediaview",
"m14" => "application/x-msmediaview",
"m3u" => "audio/x-mpegurl",
"man" => "application/x-troff-man",
"mdb" => "application/x-msaccess",
"me" => "application/x-troff-me",
"mht" => "message/rfc822",
"mhtml" => "message/rfc822",
"mid" => "audio/mid",
"mny" => "application/x-msmoney",
"mov" => "video/quicktime",
"movie" => "video/x-sgi-movie",
"mp2" => "video/mpeg",
"mp3" => "audio/mpeg",
"mpa" => "video/mpeg",
"mpe" => "video/mpeg",
"mpeg" => "video/mpeg",
"mpg" => "video/mpeg",
"mpp" => "application/vnd.ms-project",
"mpv2" => "video/mpeg",
"ms" => "application/x-troff-ms",
"mvb" => "application/x-msmediaview",
"nws" => "message/rfc822",
"oda" => "application/oda",
"p10" => "application/pkcs10",
"p12" => "application/x-pkcs12",
"p7b" => "application/x-pkcs7-certificates",
"p7c" => "application/x-pkcs7-mime",
"p7m" => "application/x-pkcs7-mime",
"p7r" => "application/x-pkcs7-certreqresp",
"p7s" => "application/x-pkcs7-signature",
"pbm" => "image/x-portable-bitmap",
"pdf" => "application/pdf",
"pfx" => "application/x-pkcs12",
"pgm" => "image/x-portable-graymap",
"pko" => "application/ynd.ms-pkipko",
"pma" => "application/x-perfmon",
"pmc" => "application/x-perfmon",
"pml" => "application/x-perfmon",
"pmr" => "application/x-perfmon",
"pmw" => "application/x-perfmon",
"pnm" => "image/x-portable-anymap",
"pot" => "application/vnd.ms-powerpoint",
"ppm" => "image/x-portable-pixmap",
"pps" => "application/vnd.ms-powerpoint",
"ppt" => "application/vnd.ms-powerpoint",
"prf" => "application/pics-rules",
"ps" => "application/postscript",
"pub" => "application/x-mspublisher",
"qt" => "video/quicktime",
"ra" => "audio/x-pn-realaudio",
"ram" => "audio/x-pn-realaudio",
"ras" => "image/x-cmu-raster",
"rgb" => "image/x-rgb",
"rmi" => "audio/mid",
"roff" => "application/x-troff",
"rtf" => "application/rtf",
"rtx" => "text/richtext",
"scd" => "application/x-msschedule",
"sct" => "text/scriptlet",
"setpay" => "application/set-payment-initiation",
"setreg" => "application/set-registration-initiation",
"sh" => "application/x-sh",
"shar" => "application/x-shar",
"sit" => "application/x-stuffit",
"snd" => "audio/basic",
"spc" => "application/x-pkcs7-certificates",
"spl" => "application/futuresplash",
"src" => "application/x-wais-source",
"sst" => "application/vnd.ms-pkicertstore",
"stl" => "application/vnd.ms-pkistl",
"stm" => "text/html",
"svg" => "image/svg+xml",
"sv4cpio" => "application/x-sv4cpio",
"sv4crc" => "application/x-sv4crc",
"t" => "application/x-troff",
"tar" => "application/x-tar",
"tcl" => "application/x-tcl",
"tex" => "application/x-tex",
"texi" => "application/x-texinfo",
"texinfo" => "application/x-texinfo",
"tgz" => "application/x-compressed",
"tif" => "image/tiff",
"tiff" => "image/tiff",
"tr" => "application/x-troff",
"trm" => "application/x-msterminal",
"tsv" => "text/tab-separated-values",
"txt" => "text/plain",
"uls" => "text/iuls",
"ustar" => "application/x-ustar",
"vcf" => "text/x-vcard",
"vrml" => "x-world/x-vrml",
"wav" => "audio/x-wav",
"wcm" => "application/vnd.ms-works",
"wdb" => "application/vnd.ms-works",
"wks" => "application/vnd.ms-works",
"wmf" => "application/x-msmetafile",
"wps" => "application/vnd.ms-works",
"wri" => "application/x-mswrite",
"wrl" => "x-world/x-vrml",
"wrz" => "x-world/x-vrml",
"xaf" => "x-world/x-vrml",
"xbm" => "image/x-xbitmap",
"xla" => "application/vnd.ms-excel",
"xlc" => "application/vnd.ms-excel",
"xlm" => "application/vnd.ms-excel",
"xls" => "application/vnd.ms-excel",
"xlt" => "application/vnd.ms-excel",
"xlw" => "application/vnd.ms-excel",
"xof" => "x-world/x-vrml",
"xpm" => "image/x-xpixmap",
"xwd" => "image/x-xwindowdump",
"z" => "application/x-compress",
"zip" => "application/zip"); 
```

**在这里检查： [在 php 中识别文件类型的最佳方法](https://stackoverflow.com/questions/457797/best-way-to-recognize-a-filetype-in-php)**

# mysql - VB.NET MySqlCommand 存储过程参数顺序？

> ID：10565716
> 
> 赞同：0
> 
> 时间：2012-05-12T16:59:10.990
> 
> 标签：mysql, vb.net, mysql-connector

我在传递给执行存储过程的函数的函数中创建了一个字典。

```
 Dim PParamDict As New Dictionary(Of String, String)
    PParamDict.Add("sname", name)
    PParamDict.Add("sdescription", description)
    PParamDict.Add("sLoggedInID", LoggedInID)
    PParamDict.Add("sCompanyID", CompanyID) 
```

字典被传递给函数 PParamDict -> ParameterDict

```
 Dim dbComm As New MySqlCommand(ProcedureName, PConnection)

    Dim pair As KeyValuePair(Of String, String)
    For Each pair In ParameterDict
        dbComm.Parameters.AddWithValue(pair.Key, pair.Value)
    Next 
```

参数是从字典中添加的。

这是一个简单的存储过程，没什么特别的，一个简单的插入。

```
CREATE PROCEDURE `NewCollection`(
IN `sLoggedInID` INT(5), 
IN `sCompanyID` INT(5), 
IN `sname` VARCHAR(20),  
IN `sdescription` VARCHAR(500))

BEGIN
INSERT INTO `collection`
(`userid`, `companyid`, `name`, `description`, `generated`) 
VALUES 
(sLoggedInID, sCompanyID, sname, sdescription, CURRENT_TIMESTAMP);
END 
```

只要 PParamDict.Add 语句按该顺序，这将起作用。如果它们的顺序不同，它们就会在进来时通过。这是我见过的最荒谬的事情，我将这些该死的键传递给 MySqlCommand，它们是在存储过程中逐个字母定义的。我一定错过了什么，请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T11:23:42.340

我有一个类似的问题，但是我的参数值列表是通过反射来的，所以我没有手动构建列表并且无法控制顺序。

在 Pete 的回答中，参数的绑定将始终以正确的顺序进行，因为它不是存储过程，而是一个文本命令，其中参数名称用作占位符，因此添加它们的顺序无关紧要。

为了解决排序问题，我只是明确地将过程称为文本（如 Pete 的 INSERT），而不是像这样使用 command.CommandType = System.Data.CommandType.StoredProcedure：

```
command.CommandText = "call procname (@param1, @param2, @param3 ... );" 
```

然后我可以按我想要的任何顺序添加我的参数

```
command.Parameters.AddWithValue("@param3", 123)
command.Parameters.AddWithValue("@param2", 456)
command.Parameters.AddWithValue("@param1", 789) 
```

希望这可以帮助。

编辑：如果您有输出参数，此方法将不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:49:34.377

也许这会有所帮助。A `StringDictionary`“[实现了一个哈希表，其中键和值被强类型化为字符串而不是对象](http://msdn.microsoft.com/en-us/library/system.collections.specialized.stringdictionary.aspx)”。

一个`HashTable`“[表示基于键的哈希码组织的键/值对的集合](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)”。

当您将对添加到您的`StringDictionary`中时，它会由密钥字符串的哈希码重新组织。

如果您构建 a`SqlParameterCollection`而不是 a `StringDictionary`，则您的参数被命名并且`for each`迭代器应该很好地匹配您的存储过程中的参数。

**更新**

添加代码示例。

```
Private Function GetParameters(ByVal name As String, ByVal description As String, ByVal LoggedInID As Integer, ByVal CompanyID As Integer) As SqlParameterCollection
    Dim cmd As SqlCommand = New SqlCommand()
    Dim pc As SqlParameterCollection = cmd.Parameters 'SqlParameterCollection constructor is marked as "Friend" so it has to be instantiated this way.'

    pc.AddWithValue("sname", name)
    pc.AddWithValue("sdescription", description)
    pc.AddWithValue("sLoggedInID", LoggedInID)
    pc.AddWithValue("sCompanyID", CompanyID)

    Return pc
End Function

Private Sub ExecuteStoredProcedure(ByVal pc As SqlParameterCollection)
    Dim sp As String = String.Empty
    Dim conn As SqlConnection = Nothing
    Dim cmd As SqlCommand = Nothing
    Dim da As SqlDataAdapter = Nothing
    Dim ds As DataSet = Nothing
    Dim p As SqlParameter = Nothing

    Try
        sp = "INSERT INTO `collection` (`user_id`, `company_id`, `name`, `description`, `generated`) VALUES (`sLoggedInID`, `sCompanyID`, `sname`, `sdescription`, CURRENT_TIMESTAMP)"
        conn = New SqlConnection("your connection string here")
        cmd = New SqlCommand(sp, conn)
        For Each p In pc
            cmd.Parameters.Add(p)
        Next

        da = New SqlDataAdapter(cmd)
        ds = New DataSet
        da.Fill(ds)

    Catch ex As SqlException
        'handle exception'
    Catch ex As Exception
        'handle exception'
    Finally
        If conn IsNot Nothing Then
            conn.Dispose()
        End If
        If cmd IsNot Nothing Then
            cmd.Dispose()
        End If
        If da IsNot Nothing Then
            da.Dispose()
        End If
    End Try
End Sub 
```

# iphone - 对 plist 文件中的数组进行排序

> ID：10565721
> 
> 赞同：0
> 
> 时间：2012-05-12T16:59:34.980
> 
> 标签：iphone, ios, xcode, ipad, plist

我有一个包含字典的自定义 plist 文件。每个字典都包含有关一辆车的信息：

```
 <key>Ford</key>
<dict>
    <key>name</key>
    <string>Ford</string>
    <key>color</key>
    <string>green</string>
    <key>price</key>
    <integer>45000</integer>
</dict

    <key>Toyota</key>
<dict>
    <key>name</key>
    <string>Toyota</string>
    <key>color</key>
    <string>blue</string>
    <key>price</key>
    <integer>40000</integer>
</dict

    <key>BMW</key>
<dict>
    <key>name</key>
    <string>BMW</string>
    <key>color</key>
    <string>blue</string>
    <key>price</key>
    <integer>40000</integer>
</dict> 
```

我还有一个 UITableView，我用这个 plist 中的一些汽车填充它。

```
 NSEnumerator *enumerator = [dictionary objectEnumerator];
    id returnValue;

    while ((returnValue = [enumerator nextObject])) 
    {

        if ([[returnValue valueForKey:@"color"]isEqualToString:@"blue")
        {  
            [array addObject:[returnValue valueForKey:@"name"]];
        } 
```

**问题：**当我得到一个包含一些汽车的 UITableView 时，我现在如何按价格对它们进行排序？例如，宝马比福特便宜，所以它应该在第一个单元格中，而福特必须在第二个单元格中。我知道 Apple 已经创建了对数组进行排序的简单方法，但是我如何在这里使用它呢？谢谢 ！最大限度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T17:11:16.920

试试[这个](https://stackoverflow.com/a/2393745/251513)：

```
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"price"  ascending:YES];
[array sortUsingDescriptors:[NSArray arrayWithObjects:descriptor,nil]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:29:49.713

首先将 price 的值提取到列表中。然后使用 NSSorDescriptor。

```
{
   NSArray *carArray=[[NSArray alloc] initwithContentsofFile:@"youFileName"    ofType:@"plist"];
   NSmutableArray *priceList=[[NSMutableArray alloc] init];
   for(int index=0;index<[carArray count];index++)
   {
      NSDictionary *valueList=[carArray objectAtIndex:index];
      [priceList addObject:[valueList objectForKey:@"Price"]];

   }
   NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"price"  ascending:YES];
   [priceList sortUsingDescriptors:[NSArray arrayWithObjects:descriptor,nil]]; 
```

现在您将获得基于价格的排序数组。}

# c++ - 在地图中查找集合的元素

> ID：10565723
> 
> 赞同：3
> 
> 时间：2012-05-12T17:00:00.220
> 
> 标签：c++

我有两张地图，`tk1`结构`tk2`如下：

```
std::map<std::string, double>tk1;
std::map<std::string, double>tk2; 
```

`tk1`包含以下数据：

```
 2011-01-03 2200
    2011-01-04 2209
    2011-01-05 2300 
```

并`tk2`包含以下数据：

```
2011-01-03 2450
2011-01-04 2465
2011-01-06 2476
2011-01-07 2457 
```

我创建了一个包含日期字符串的集合，如

```
std::set<std::string>dateset;
std::set<std::string>new_dateset; 
```

我通过遍历 2 个地图并插入到集合中来创建它

```
dateset.insert(it->first); 
```

`dateset`具有以下值：

```
2011-01-03
2011-01-04
2011-01-05
2011-01-06
2011-01-07 
```

我想填充 new_dateset 所以它只包含两个`tk1`和中的日期`tk2`，即 new_dateset 应该只包含

```
2011-01-03
2011-01-04 
```

我写了以下内容：

```
std::set<std::string>::iterator it1=dateset.begin(), end1=dateset.end();
std::map<std::string, double>::iterator it2=tk1.begin(), end2=tk1.end();
std::map<std::string, double>::iterator it3=tk2.begin(), end3=tk2.end();
while (it1 != end1) {
if (it2->first == *it1) 
new_dateset.insert(it2->first);
++it1;
} 
```

但显然我没有正确地做到这一点。有人可以建议最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T17:14:42.647

您可能会考虑`std::set_intersection`使用以前`key_iterator`的[答案](https://stackoverflow.com/a/2389291/179910)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:04:35.973

迭代`it1`，检查`first`每个元素是否在`tk2`使用该`find()`方法，如果存在则将其插入集合中。您在示例中所做的是检查 中的元素`dataset`，其中包含`tk1`OR中的键`tk2`。

```
for(; it2 != end2; ++it2) {
  if(tk2.find(it2->first) != end3) new_dataset.insert(it2->first);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T17:03:37.630

您应该按如下方式比较字符串：

```
if(it2->first.compare(*it) == 0)
{
  //strings match, do something.
}
else
{
  // no match do something else.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T17:06:49.610

遍历 tk1 中的元素并查看键是否存在于`tk2`. 如果是，则插入。

```
for(; it2 != end2; ++it2)
{
  if(tk2.find(it2->first) != end3)
  {
    new_dataset.insert(it2->first);
  }
} 
```

# gwt - 在 GWT 应用程序中通过 SSH 与 DB 通信（使用 RPC）

> ID：10565724
> 
> 赞同：0
> 
> 时间：2012-05-12T17:00:00.810
> 
> 标签：gwt, servlets, ssh, rpc, jsch

我正在尝试使用 Java servlet 的 RPC 模型编写 GWT 后端。是否可以在 RPC 中通过 ssh 隧道与远程 sql 数据库通信？

我尝试执行的代码如下，使用 Jsch。错误发生在“session.connect();”上

```
String host="xxxxx.xxx.edu";

String user="username";
String password="password";

Session session= null;
try{
            //Set StrictHostKeyChecking property to no to avoid UnknownHostKey issue
            java.util.Properties config = new java.util.Properties();
            config.put("StrictHostKeyChecking", "no");
            JSch jsch = new JSch();
            session=jsch.getSession(user, host, 22);
            session.setPassword(password);
            session.setConfig(config);
            session.connect();
} 
```

我在“session.connect()”行上得到的运行时错误如下：（向右滚动查看整个错误）

```
com.jcraft.jsch.JSchException: java.security.AccessControlException: access denied (java.net.SocketPermission xxxxx.xxx.edu resolve)
at com.jcraft.jsch.Util.createSocket(Util.java:341)
at com.jcraft.jsch.Session.connect(Session.java:194)
at com.jcraft.jsch.Session.connect(Session.java:162)
at com.front.server.GameServiceImpl.createGame(GameServiceImpl.java:39) 
```

令人沮丧的部分是我将完全相同的代码复制/粘贴到一个简单的 java 程序中并且它可以工作。所以我知道代码是正确的；显然，GWT 为本地测试创建的码头服务器在执行代码时存在问题。在使用 GWT 的这种情况下，我还能做什么/我应该做什么？GWT 应用程序的后端不应该有 ssh 的能力吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T05:29:58.643

我建议您尝试使用不同的 Web 容器（Tomcat、JBoss）运行您的 gwt 应用程序。您仍然可以通过使用 -noserver 标志运行托管模式来使用调试功能。看[这里](https://developers.google.com/web-toolkit/doc/1.6/FAQ_DebuggingAndCompiling#How_do_I_use_my_own_server_in_hosted_mode_instead_of_GWT%27s)

# php - 在 move_uploaded_file() php 中使用 href 上传图片文件

> ID：10565725
> 
> 赞同：1
> 
> 时间：2012-05-12T17:00:03.510
> 
> 标签：php

我需要一些建议和指导方针。我正在尝试使用链接将图像上传到文件夹中。而且我无法上传图片。我正在尝试这段代码。这显示错误消息：

> [function.move-uploaded-file]：打开流失败：HTTP wrapper 不支持可写连接

```
<?php

  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {

    if (file_exists("http://localhost.myimage.com/uploads/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "http://localhost.myimage.com/uploads/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }

?>
<html>
<body>

<form action="" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" />
<br />
<input type="submit" name="submit" value="Submit" />
</form>

</body>
</html> 
```

可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:08:16.773

移动文件的目的地需要是服务器的绝对路径，即

```
move_uploaded_file( $_FILES["file"]["tmp_name"], $_SERVER['DOCUMENT_ROOT'] ."/uploads/" . $_FILES["file"]["name"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:05:40.857

您正在提供`file_exists`一个`move_uploaded_file`URL。尝试在硬盘驱动器上提供文件。改变：

```
file_exists("http://localhost.myimage.com/uploads/" . $_FILES["file"]["name"]) 
```

至

```
file_exists($_SERVER['DOCUMENT_ROOT'] . "uploads/" . $_FILES["file"]["name"]) 
```

并且类似于`move_uploaded_file`因为那是错误的起源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T17:07:31.137

不，这是不可能的。

您尝试将上传的文件存储在错误的目的地。

我假设您拥有“http://localhost.myimage.com/uploads/”并且不想将文件存储在服务器中的“/uploads/”下。

如果您的项目安装在 /var/www/my_prj/ 下

并且您的上传位于 /var/www/my_prj/uploads 下，那么您的代码应如下所示：

```
move_uploaded_file($_FILES["file"]["tmp_name"],
      "/uploads/" . $_FILES["file"]["name"]); 
```

这仅适用于“/var/www/my_prj/”是您的 apache 配置主机的 DocumentRoot 时。

# java - 文件对象和不同的 NetBeans 包

> ID：10565726
> 
> 赞同：0
> 
> 时间：2012-05-12T17:00:16.030
> 
> 标签：java, file, netbeans, file-io

我喜欢将我的应用程序数据和代码保存在 NB 的不同源包中（不要误认为 java 包）。

所以我这次做了。不幸的是，它无法通过 File 对象从一个包到另一个包获取文件。这是我的包结构

```
Source Packages
    |-[J]basicstuff
    |-[J]net.abc.utils
  assets
    |-[F]Images
    |-[F]Layouts 
```

传奇：

*   无指示 - 在 NB 的项目属性中添加了源包
*   [J] 标准java包
*   [F] - 使用文件管理器制作的数据文件夹

问题是，当我使用自己的 GUI 系统时，我有我的自定义布局加载器。布局是放置在 assets/Layouts 中的 JSON 文本文件。不幸的是，我的布局管理器（net.abc.utils 中的另一个类）无法加载它们。无论我做什么，我都无法加载那些。

我试过了

```
File layout = new File("assets/Layouts/layout.txt"); 
```

然后

```
File layout = new File("../../../assets/Layouts/layout.txt"); 
```

然后我记得是上面四个目录，包括src dir。

```
File layout = new File("../../../../assets/Layouts/layout.txt"); 
```

但它也没有奏效。

甚至尝试过

```
File layout = new File("../../../../Layouts/layout.txt"); 
```

和

```
File layout = new File("../../../Layouts/layout.txt"); 
```

但是那些当然也没有用。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:25:00.660

根据您的应用程序所在的*环境*（*独立*、*应用*服务器），您将需要使用**适当** `ClassLoader`的.

尝试这样的事情：

```
private static InputStream getResourceAsStream(String resource) throws FileNotFoundException {
    String stripped = resource.startsWith("/") ? resource.substring(1) : resource;
    InputStream stream = null;
    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
    if (classLoader != null) {
        stream = classLoader.getResourceAsStream(stripped);
    }
    if (stream == null) {
        stream = MyClass.class.getResourceAsStream(resource);
    }
    if (stream == null) {
        stream = MyClass.class.getClassLoader().getResourceAsStream(stripped);
    }
    if (stream == null) {
        throw new FileNotFoundException("Resource not found: " + resource);
    }
    return stream;
} 
```

用来：

```
MyClass.getResourceAsStream("Layouts/layout.txt"); 
```

# asp.net-mvc - 图表助手主题 XML 规范？

> ID：10565728
> 
> 赞同：3
> 
> 时间：2012-05-12T17:01:27.143
> 
> 标签：asp.net-mvc, mschart

MVC Chart 助手中的 Chart 主题是否有所有可能的权威描述？我看过半打教程，但没有像 MSDN 风格的完整参考。这存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:24:35.973

我已经搜索了几天的信息，我不相信有可用的架构，但在 MSDN 上有完整的参考 - [http://msdn.microsoft.com/en-us/library /system.web.ui.datavisualization.charting.chart.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.datavisualization.charting.chart.aspx)

幸运的是，您可以使用代码创建图表，然后将其序列化为 XML - 这将产生可以直接在您的 theme.xml 文件或字符串中使用的输出。

这是一个带有一些属性集的示例饼图：

```
Chart Chart1 = new Chart();

double[] yValues = { 71.15, 23.19, 5.66 };
string[] xValues = { "AAA", "BBB", "CCC" };

Chart1.Series.Add(new Series("Default"));
Chart1.Series["Default"].Points.DataBindXY(xValues, yValues);
Chart1.Series["Default"].Points[0].Color = Color.MediumSeaGreen;
Chart1.Series["Default"].Points[1].Color = Color.PaleGreen;
Chart1.Series["Default"].Points[2].Color = Color.LawnGreen;
Chart1.Series["Default"].ChartType = SeriesChartType.Pie;
Chart1.Series["Default"]["PieLabelStyle"] = "Disabled";

Chart1.ChartAreas.Add(new ChartArea("ChartArea1"));
Chart1.ChartAreas["ChartArea1"].Area3DStyle.Enable3D = true;

Chart1.Legends.Add(new Legend());
Chart1.Legends[0].Enabled = true; 
```

然后是序列化它的相关代码：

```
StringBuilder sb = new StringBuilder();
using (StringWriter writer = new StringWriter(sb)) {
    Chart1.Serializer.Content = SerializationContents.Default;
    Chart1.Serializer.Save(writer);
} 
```

# mercurial - 如何自动更新 Mercurial 推送

> ID：10565741
> 
> 赞同：0
> 
> 时间：2012-05-12T17:03:17.147
> 
> 标签：mercurial, tortoisehg

下面的钩子不会自动更新我推送的存储库。我已经验证我拥有适当的权限，因为我正在通过 ssh 与文件的所有者进行更新。

```
[hooks]
changegroup = hg update >&2 
```

当我尝试这个时，`>&2`我也没有得到任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:09:45.007

在哪个 .hgrc 文件中找到了那个钩子？尝试将其更改为：

```
[hooks]
changegroup = echo I RAN 
```

看看它是否正在运行

# c++ - C++ 回调中局部变量范围的最佳实践

> ID：10565746
> 
> 赞同：8
> 
> 时间：2012-05-12T17:03:41.970
> 
> 标签：c++

我有一个功能正常的 C++ 回调函数，由用户“鼠标按下”事件触发。（IDE是VS2010。）

每次调用时，我想增加一个简单的计数变量，该变量是回调范围的本地变量。简而言之，执行此操作的“最佳实践”方法是什么？

提前感谢您的任何意见或指示。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-12T17:09:49.723

用仿函数替换你的回调函数——它们可以存储状态。一个示例函子：

```
#include <iostream>
#include <memory>

class Functor
{
private:
    std::shared_ptr<int> m_count;

public:
    Functor()
    :    m_count(new int(0))
    {}

    void operator()()
    {
        ++(*m_count);
        // do other stuff...
    }

    int count() const
    {
        return *m_count;
    }
};

template <typename F>
void f(F callback)
{
    // do stuff
    callback();
    // do other stuff
}

int main()
{
    Functor callback;
    f(callback);
    f(callback);
    std::cout << callback.count();    // prints 2
    return 0;
} 
```

请注意在仿函数内部使用 a `shared_ptr`- 这是因为`f`具有仿函数的本地副本（注意传递值），并且您希望该副本`int`与您有权访问的仿函数共享它。另请注意，`f`必须按值获取其参数，因为您希望支持所有可调用对象，而不仅仅是函子。

# database - 在磁盘上物理组织表数据的不同方式

> ID：10565748
> 
> 赞同：-2
> 
> 时间：2012-05-12T17:03:54.907
> 
> 标签：database, disk, database-table

任何人都可以帮我解决这个问题吗？

表数据在磁盘上的物理组织方式有哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:02:11.557

有不同类型的文件组织最流行

堆文件 排序文件 散列文件

# django - 通过extend覆盖一个django第三方应用模板

> ID：10565751
> 
> 赞同：1
> 
> 时间：2012-05-12T17:04:24.433
> 
> 标签：django, django-templates, overriding, pinax

我正在使用第三方应用程序（通过 Pinax），并且我正在尝试覆盖第三方模板扩展的模板文件。

那是 -

```
Third party app:
    templates/app/a.html
    templates/base.html

My project:
    templates/app/b.html
    templates/base.html 
```

我`base.html`从第三方应用程序复制和修改以用于我自己的项目以及第三方`app/a.html`和我自己`app/b.html`的项目`{% extends "base.html" %}`。

当前的行为是，当`app/a.html`extends时`base.html`，它当前正在加载第三方`base.html`，而`app/b.html`正在加载我自己的`base.html`. 首选行为是同时加载`app/a.html`和`app/b.html`加载我的`base.html`.

有没有办法为我自己的模板文件设置优先级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:20:24.313

你可以看到[django-templateloaderwithpriorities](http://pypi.python.org/pypi/django-templateloaderwithpriorities)或[django-smart-extends](http://pypi.python.org/pypi/django-smart-extends)

# c++ - 将字符串截断为长度 N 的有效方法

> ID：10565752
> 
> 赞同：17
> 
> 时间：2012-05-12T17:04:26.603
> 
> 标签：c++, string

例如，假设我`std::string`包含某个文件的 UNIX 样式路径：

```
string path("/first/second/blah/myfile"); 
```

假设现在我想丢弃与文件相关的信息并从此字符串中获取“blah”文件夹的路径。那么是否有一种有效的（说“高效”我的意思是“没有任何副本”）截断这个字符串以便它只包含的方式`"/first/second/blah"`？

提前致谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-12T17:08:41.487

如果 N 已知，则可以使用

```
path.erase(N, std::string::npos); 
```

如果 N 未知并且您想找到它，您可以使用任何搜索功能。在这种情况下，您需要找到最后一个斜杠，因此您可以使用[`rfind`](http://en.cppreference.com/w/cpp/string/basic_string/rfind)or [`find_last_of`](http://en.cppreference.com/w/cpp/string/basic_string/find_last_of)：

```
path.erase(path.rfind('/'), std::string::npos);
path.erase(path.find_last_of('/'), std::string::npos); 
```

甚至还有一个基于迭代器的变体：

```
path.erase (path.begin() + path.rfind('/'), path.end()); 
```

也就是说，如果您打算以操纵路径为生，最好使用为此任务设计的库，例如[Boost Filesystem](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/index.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-03T23:47:50.473

虽然公认的答案肯定有效，但丢弃字符串结尾的最有效方法是调用该`resize`方法，在您的情况下只是：

```
path.resize(N); 
```

# c++ - inner_product 和复向量

> ID：10565755
> 
> 赞同：1
> 
> 时间：2012-05-12T17:04:45.667
> 
> 标签：c++, complex-numbers, dot-product

看来我在这里做错了什么。你能帮助我吗？目的是将 inner_product 用于复杂向量。

```
#include<iostream>
#include<vector>
#include <numeric>
#include <complex>

using namespace std; 

template<class T>
complex< T > complex_prod(complex< T > a, complex< T > b)
{
 return conj<T>(a)*b; 
}

template<class T>
complex< T > add_c(complex< T > a, complex< T > b)
{
  return a+b;
}

int main()
{
  complex<double> c1(1.,3.);
  complex<double> c2(2.,4.);

  vector<complex<double> > C1(3,c1);
  vector<complex<double> > C2(3,c2);

 cout<<inner_product(C1.begin(),C2.end(),C2.begin(),0.,add_c<double>,complex_prod<double>) <<endl;

return 0;
} 
```

我不明白为什么会出现转换问题，一切似乎都已定义，迭代应该没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T17:11:48.357

问题是`inner_product`需要知道初始值的类型，所以你需要传递它`std::complex`而不是 a `0.`：

```
inner_product(C1.begin(),C2.end(),C2.begin(),std::complex<double>(0.,0.),add_c<double>,complex_prod<double>); 
```

或者简单地说，

```
inner_product(C1.begin(),C2.end(),C2.begin(),std::complex<double>(),add_c<double>,complex_prod<double>); 
```

尽管 an`std::complex<double>`可以从单个数字类型隐式构造

```
std::complex<double> c = 2.*4.*300; 
```

`inner_product`模板看起来像

```
template<
    class InputIterator1,
    class InputIteratorr2,
    class T,
    class BinaryOperation1,
    class BinaryOperation2
> T inner_product( InputIterator1 first1, InputIterator1 last1,
                   InputIterator2 first2, T value,
                   BinaryOperation1 op1,
                   BinaryOperation2 op2 ); 
```

所以有一个模板参数`value`。所以编译器无法知道你的意思`std::complex<double>`，它只是解释`0.`为`double`.

# java - Gin AssistedInject：延迟绑定结果类型“Foo”不应该是抽象的

> ID：10565758
> 
> 赞同：2
> 
> 时间：2012-05-12T17:05:13.790
> 
> 标签：java, gwt, dependency-injection, gwt-gin, assisted-inject

我正在尝试在 GWT 2.4.0 中将 AssistedInject 与 Gin 一起使用：

```
 public interface ElevatorButtonFactory {
    ElevatorButton create(int shownFloorNumber, Action<Integer> onClick);
  }

  @Inject
  ElevatorButton(GameHost gameHost, @Assisted int shownFloorNumber,
      @Assisted Action<Integer> onClick) {
    // ...
  } 
```

在我的杜松子酒模块中：

```
install(new GinFactoryModuleBuilder().implement(ElevatorButton.class, ElevatorButton.class)
        .build(ElevatorButtonFactory.class)); 
```

这似乎应该足够了，对吧？但是当我尝试将`ElevatorButtonFactory`其作为注入参数时，出现以下错误：

> [错误] [foo] - 延迟绑定结果类型“com.foo.html.client.components.floorpicker.ElevatorButton.ElevatorButtonFactory”不应该是抽象的

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:54:57.163

似乎这个问题与 GIN 无关。这是关于你如何使用你的`ElevatorButtonFactory`班级。您的注入器界面应如下所示：

```
@GinModules(YourGinModule.class)
public interface InjectorService extends Ginjector {

    ElevatorButtonFactory getElevatorButtonFactory();

} 
```

创建`ElevatorButton`实例：

```
GWT.create(InjectorService.class).getElevatorButtonFactory().create(...) 
```

您是否尝试通过 GWT.create() 或其他方式实例化您的工厂？如果问题不会消失 - 让我看看完整的堆栈跟踪。

# android - 从 AccountManager 获取基本的 google auth-token

> ID：10565759
> 
> 赞同：6
> 
> 时间：2012-05-12T17:05:13.900
> 
> 标签：android, google-api, accountmanager

我想从 AccountManager 获取一个 Google Authtoken，我可以将其发送到我的 Web 服务（未托管在 App Engine 上）以验证用户（如果不需要此权限，我只需要电子邮件地址和最终他的姓名）。

“getAuthToken”方法的“authTokenType”参数我必须使用什么？

我必须使用哪个 google Api 来获取用户电子邮件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T02:58:53.000

使用 OpenID Connect 可以做到这一点，但是它是一种实验性的，所以未来可能会改变细节。如果您获得“https://www.googleapis.com/auth/userinfo.email”或“https://www.googleapis.com/auth/userinfo.profile”范围的 OAuth 令牌，您可以使用它来获取来自[https://www.googleapis.com/oauth2/v1/userinfo](https://www.googleapis.com/oauth2/v1/userinfo)的用户信息（包括电子邮件）。当然，用户需要对此进行授权。

理论上，您应该能够通过`AcccountManager`使用“oauth2：https://www.googleapis.com/auth/userinfo.profile”作为令牌类型来获取令牌，但这似乎不适用于我的设备（Galaxy Nexus库存 4.0.4)。由于通过 获取令牌`AccountManager`不起作用（至少目前如此），唯一可靠的方法是使用 WebView 并通过浏览器获取一个，如下所述：[https ://developers.google.com/accounts/docs/移动应用](https://developers.google.com/accounts/docs/MobileApps)

这里有一个演示网络应用程序可以执行此操作：[https ://oauthssodemo.appspot.com](https://oauthssodemo.appspot.com)

（后期）更新：Google Play 服务已经发布，它是获取 OAuth 令牌的首选方式。它应该可以在所有装有 Android 2.2 及更高版本的设备上使用。获取配置文件令牌确实可以使用它，实际上他们在演示应用程序中使用它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T10:47:53.750

I have had problems with this as well, since I was not able to find anything like a reference. Perhaps this can help you (code copied from an Android example on using the account manager):

1.  Somewhere in an event handler of your Android app, issue a request for an auth token to get the user's email address in Android:

    ```
    _accountMgr = AccountManager.get(this);
    Account [] accounts = _accountMgr.getAccounts();                
    Account account = accounts[0];   // For me this is Google, still need to figure out how to get it by name.
    _accountMgr.getAuthToken(account, AUTH_TOKEN_TYPE, false, new GetAuthTokenCallback(), null); 
    ```

2.  In the callback, extract the access token:

    ```
    private class GetAuthTokenCallback implements AccountManagerCallback<Bundle> {
        public void run(AccountManagerFuture<Bundle> result) {
            Bundle bundle;
            try {
                bundle = result.getResult();
                final String access_token = bundle.getString(AccountManager.KEY_AUTHTOKEN);
                // store token somewhere you can supply it to your web server.
            } catch (Exception e) {
                // do something here.
            }
        }
    } 
    ```

3.  Make some request to your web server, supplying the access token.

4.  On the web server, validate the access token and obtain the email address:

    ```
    curl -d 'access_token=<this is the token the app sent you>' https://www.googleapis.com/oauth2/v1/tokeninfo 
    ```

    You should get something like this:

    ```
    {
      "issued_to": "<something>.apps.googleusercontent.com",
      "audience": "<something>.apps.googleusercontent.com",
      "scope": "https://www.googleapis.com/auth/userinfo.email",
      "expires_in": 3562,
      "email": "<users email address>",
      "verified_email": true,
      "access_type": "online"
    } 
    ```

    or if something went wrong:

    ```
    {
      "error": "invalid_token",
      "error_description": "Bad Request"
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T20:02:21.410

您可以使用 Google+ People API 获取用户的姓名。（它不会提供用户的电子邮件地址）。

如果没问题，您可以使用“知道您在 Google 上的身份”作为 authTokenType。

Google 提供了一个示例应用程序，演示了如何将 AndroidAccountManager 与 Google+ API 结合使用。

链接：[http ://code.google.com/p/google-plus-java-starter/source/browse/#hg%2Fandroid](http://code.google.com/p/google-plus-java-starter/source/browse/#hg%2Fandroid)

# html - 如何将应用程序链接到 Web 数据库？

> ID：10565765
> 
> 赞同：0
> 
> 时间：2012-05-12T17:05:49.813
> 
> 标签：html, mobile

我正在尝试制作一个可以显示当天菜单的移动应用程序，该菜单以前只能在网站上使用。我想知道如何将我的移动应用程序连接到网站数据库？我知道这对你们来说可能很愚蠢，但我是新手。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:07:50.333

您需要构建一个 API 供您的应用使用。我最近写了一篇关于[使用 ExpressionEngine 通过 JSON执行此操作的博客文章](http://paramore.is/think/entry/a-simple-rest-server-with-expressionengine/)

# comparison - 在 awk 中，如何为 X 列中的每个不同元素找到 Y 列中的最大浮点数

> ID：10565776
> 
> 赞同：1
> 
> 时间：2012-05-12T17:07:03.557
> 
> 标签：comparison, awk, numbers

如果 Y 列仅包含正值，则以下 awk 命令可以正常工作：

```
$ echo -e "g1 2\ng1 3\ng2 4\ng2 1\ng3 1" > input_pos.txt
$ cat input_pos.txt
g1 2
g1 3
g2 4
g2 1
g3 1
$ awk '{if(! $1 in a)a[$1]=$2; else if($2 > a[$1])a[$1]=$2} END{for(i in a) print i,a[i]}' input_pos.txt
g1 3
g2 4
g3 1 
```

只要至少有一个正数，它也可以很好地工作：

```
$ echo -e "g1 2\ng1 -3\ng2 4\ng2 1\ng3 1" > input_pos-neg.txt
$ cat input_pos-neg.txt
g1 2
g1 -3
g2 4
g2 1
g3 1
$ awk '{if(! $1 in a)a[$1]=$2; else if($2 > a[$1])a[$1]=$2} END{for(i in a) print i,a[i]}' input_pos-neg.txt
g1 2
g2 4
g3 1 
```

但是，当只有负数时它不起作用：

```
$ echo -e "g1 -2\ng1 -3\ng2 -4\ng2 -1\ng3 -1" > input_neg.txt
$ cat input_neg.txt
g1 -2
g1 -3
g2 -4
g2 -1
g3 -1
$ awk '{if(! $1 in a)a[$1]=$2; else if($2 > a[$1])a[$1]=$2} END{for(i in a) print i,a[i]}' input_neg.txt
g1
g2
g3 
```

在这个例子中同上：

```
$ echo -e "g1 -2\ng1 -3\ng2 4\ng2 1\ng3 1" > input_neg2.txt
$ cat input_neg2.txt
g1 -2
g1 -3
g2 4
g2 1
g3 1
$ awk '{if(! $1 in a)a[$1]=$2; else if($2 > a[$1])a[$1]=$2} END{for(i in a) print i,a[i]}' input_neg2.txt
g1
g2 4
g3 1 
```

我查看了 gawk 手册（[字符串和数字的转换](http://www.gnu.org/software/gawk/manual/gawk.html#Conversion)），并尝试将 +0 添加到 $2 以强制 > 比较以数字形式执行，但仍然找不到解决我的问题的方法。欢迎任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:39:27.750

您的问题是`!`运算符的关系比 更难`in`，因此如果您用括号括起来`(! $1 in a)`，即`(! ($1 in a))`它可以工作。

# css - 我的背景颜色渗到页面底部，我希望我的页脚颜色在不滚动时填充底部

> ID：10565777
> 
> 赞同：1
> 
> 时间：2012-05-12T17:07:11.127
> 
> 标签：css, background, footer

这是一个例子...... [http://imgur.com/5mcCB](http://imgur.com/5mcCB)

页面内容不多，所以高度很小。正文 BG 颜色填充了页面底部，甚至超过了页脚 - 最终看起来很荒谬......

当内容很小（用户屏幕上没有滚动条）时，如何使页脚颜色完成页面？我不想为每一页永久地制作一个巨大的页脚，因为那会分享可笑性。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:46:40.633

我会给正文和页脚相同的背景颜色，然后将您的“正文”背景颜色应用到正文本身内的包装元素。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Alternative Background Method</title>
    <style>
      body, 
      body > footer {
        background: /* bgcolor */
      }
      #content {
        background: /* original body background color */
      }
    </style>
  </head>
  <body>
    <section id="content">
      <!-- main content --->
    </section>
    <footer>
      <!-- footer contents -->
    </footer>
    <!--

      Any visible space between the bottom of the viewport and the 
      footer element will have the same background as the footer
      element itself.

    -->
  </body>
</html> 
```

# performance - 最昂贵的分拣操作

> ID：10565780
> 
> 赞同：1
> 
> 时间：2012-05-12T17:07:23.127
> 
> 标签：performance, sorting

任何排序算法中最昂贵的操作是什么？是交换操作还是比较操作？

我认为它是交换，但我的朋友认为它是比较。我可以证明比较是成本更高的操作的唯一方法是每个元素都需要比较，但不是每个元素都需要交换（即，如果元素已经在正确的位置，则不必交换）。因此，总体而言，与少数昂贵的互换相比，便宜的比较更多。但我不确定答案。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:19:03.647

假设一切都在 RAM 中完成，那么交换操作比比较操作要快得多。（这很明显，2 次读取然后是 cpu 操作与 2 次读取、2 次写入以及介于两者之间的所有内容，包括注册表操作）。

这显然取决于您的排序算法，有些比较少，因为元素较少，但交换比较频繁。

采用快速排序，它几乎不会进行比较，然后交换几乎所有内容，以及一个更简单的算法，如冒泡排序，将所有元素相互比较，然后减少交换频率。这也取决于基本数组，如果所有内容都已接近排序，则冒泡排序不会交换任何内容，但仍会比较所有内容，而堆排序（例如）仍然必须“交换”所有内容。

最后，（交换操作的平均数量）*（交换操作的时间成本）/（comp 操作的平均数量）*（comp 操作的时间成本）对于一个算法来说是相当难以估计的，而且要外推到所有的算法。

我个人认为，任何排序算法的总交换成本总是高于比较成本，但我无法用任何证据支持这一说法（这只是个人见解）。

# statistics - 统计均值居中 - 使用总均值或属性均值

> ID：10565787
> 
> 赞同：0
> 
> 时间：2012-05-12T17:08:01.263
> 
> 标签：statistics, centering, mean

我有一组数据，超过 1000 行和 20 个属性（显示在列中）。我想要使​​用均值居中，其中包括从每个值中取出均值以给出均值 0。我是在逐个属性的基础上删除均值，还是从每个属性中删除所有属性的均值？

例如，如果属性 A 的平均值为 500，而属性 B 的平均值为 1,000。对于 AI 中的所有值都可以删除 500，这使 A 属性的平均值为 0。然后我可以对属性 B 执行相同的操作。

或者

我可以从这两个属性的所有值中减去 750。

哪个在统计上更正确？

我的问题是由于这个：如果我从不同的属性中减去不同的值，那么这些属性就不再具有可比性，因为从每个属性中获取了不同的数量。如果我从所有值中减去相同的值，那么某些列可能只有负数（因此否定了均值居中的影响）。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T21:34:41.763

通常，您会将每个属性单独居中。
如果将每个属性分别居中，则假设对于个人而言，重要的是每个度量与该属性的平均值有何不同，并且您将失去该个人的属性的绝对比较。
例如，如果您有一个人的身高、体重，将它们分别居中，那么您可以询问“对于一个高于平均水平的人，体重是否也大于平均体重”。平均身高和体重是没有意义的。
一种思考方式是，您正在创建一个普通的个体，您现在可以将其用作所有观察的基准。
现在，如果 2 个度量的绝对值具有可比性，例如产品价格和成本，您将无法再比较它们，因为它们会发生偏移。如果您关心的是使用绝对比较进行单个观察的度量，则您需要创建一个辅助度量，例如利润百分比。在这种情况下，居中的值将允许您询问“价格较高的产品是否比平均水平更有利可图”。

# zigbee - 与 MikroC 兼容的 ZigBee 堆栈/库

> ID：10565802
> 
> 赞同：0
> 
> 时间：2012-05-12T17:09:44.280
> 
> 标签：zigbee, mikroc

是否有与 MikroC 兼容的现有 ZigBee 库/堆栈？我计划使用 Microchip 的 MRF24J40B 作为收发器，使用 PIC18F27J53 微控制器作为 ZigBee 堆栈控制器。我似乎找不到与 MikroC 兼容的 ZigBee 堆栈。尽管 Microchip 提供了 ZigBee 堆栈，但碰巧 MikroC 不是受支持的编译器。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T17:54:04.503

除非您认为可以将 Microchip 的 ZigBee 堆栈从他们的编译器移植到 mikroC，否则您应该考虑使用他们的开发环境来构建您的应用程序。

根据我在嵌入式开发方面的经验，您最好使用硬件公司的工具，特别是如果您打算使用他们的代码库。

如果您认为使用 mikroC 比使用 Microchip 的工具有好处，那么您应该联系那里的销售代表并询问相关情况。如果你能就使用 mikroC 的好处提出强有力的论据，并说服他们一旦你有一个出货的产品你会购买大量的芯片，他们可能会帮助你让它与那个编译器一起工作.

# php - jquery.ajax() 成功后如何将变量传递给另一个 php 文件？

> ID：10565806
> 
> 赞同：0
> 
> 时间：2012-05-12T17:10:21.790
> 
> 标签：php, json, jquery, session-variables

我有一个用于登录用户的 index.php，当按下提交时，会发生以下过​​程......

1.- 用户输入号码和密码

2.- 使用 jQuery.ajax 方法 () 连接到文件 doLogin.php 以处理数据，如果正确，则打印**“echo 'success'”**并使这些变量会话：nControl、name、lastname 和 typeUser

3.- 然后在 jQuery.ajax () 方法中获取“成功”并调用dashboard.php，因此：“document.location.href = 'dashboard.php'”

**基本结构：** Index.php（用于登录）->functions.js（使用 jQuer.ajax() 处理 index.php 的输入）->dashboard.php（我想从 index.php 接收数据以显示详细信息用户）

**所以出现的问题是：** 那个方法最适合你，在jQuery.ajax方法()成功后将数据发送到dashboard.php文件？因为像name、lastname、typeUser和nControl这样的数据，我想打印一个div，让用户看到你登录的详细信息。

也许我可以是 JSON 格式，但不是。我希望我已经解释了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:23:25.370

```
// take username and password on button click

$('#submit').on('click', function(e) {
  e.preventDefault();
  var uname = $.trim($('input[name="username"]').val()),
    password = $.trim($('input[name="password"]').val());

  if(uname.length && password.length){ // checking that username and password not empty
    $.ajax({
      url : 'doLogin.php',
      data: {username: uname, password: password},
      dataType: 'json', // if you get response from server as json
      success: function(response) {

        // receive the response as json object

        if(response.status == 'success') {

           alert('You have been successfully authenticated');

           /**
             * assume that you get other 
             * data with response
             */ 

            var name = response.name,
                lastname = response.lastname,
                typeUser = response.typeUser,
                nControl = response.nControl;

           // make navigation to dashboard.php with data you've got using GET method
           // you may have need to location url as you need
           window.location = 'dashboard.php?name=' + name + '&lastname=' + lastname + '&typeUser=' + typeUser + '&nControl=' + nControl;

        } else {
           alert('Error is authentication..');
        }
      }
    });
  } else {
     // make alert if username or password not provided by user
     alert('Please enter password and username both.');
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:13:09.820

没时间测试。我在测试服务器上没有 php。您需要用于 JQuery 的 jquery.form.js 插件。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/jquery.form.js"></script>

<script type="text/javascript">
$('#loginbutton').click(function(){
$('#error').empty();
$('#loginform').ajaxForm(function(data, textStatus){
$('#error').append(data);
});
});
</script>

<div id="error"></div>

<form id="loginform" method="post" action="login.php">
<input type="text" name="username" />
<input type="password" name="password" />
<button id="loginbutton">Log In</button>
</form> 
```

在 login.php 页面上检查数据库以获取正确的用户名和密码（我的 php 有点生锈）

```
$connect = mysql_connect("$server","$username","$password") or die("not connecting");
mysql_select_db("users") or die("no db :'(");
$query = mysql_query("SELECT * FROM $tablename WHERE username='$user' AND password='$password'");

$numrows = mysql_num_rows($query);

if ($numrows!=0)
{
//if row returned send them to home page
<script type="text/javascript">
window.location.replace("dashboard.php");
</script>
}
else
//If not correct login then the error div reports this message
echo "Incorrect Login Information";
} 
```

# android - RTP 有效载荷和 NAL 单元

> ID：10565814
> 
> 赞同：0
> 
> 时间：2012-05-12T17:11:24.343
> 
> 标签：android, rtp

TL;博士：

*   安卓平台；
*   MediaRecorder，使用 H264 和 3gp；
*   MediaRecorder 流到 localSocketServer；
*   读取流；
    *   跳过第一个 MPEG 标头（40 字节）；
    *   搜索 NAL 单元，但没有

在这里[http://code.google.com/p/spydroid-ipcamera/source/browse/tags/2.0/trunk/src/net/majorkernelpanic/librtp/H264Packetizer2.java](http://code.google.com/p/spydroid-ipcamera/source/browse/tags/2.0/trunk/src/net/majorkernelpanic/librtp/H264Packetizer2.java)

如何从 android 相机流中提取信息以形成[http://www.ietf.org/rfc/rfc3984.txt](http://www.ietf.org/rfc/rfc3984.txt)中定义的 NAL 标头？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T23:49:30.503

第一个 NAL 单元位于 MPEG4 / H264 标头中的“mdat”原子之后。然后你得到了 NAL 单元长度（可能是 4 个字节），然后是 NAL 单元头（1 个字节）。

# c# - 如何将日期转换为word格式？

> ID：10565815
> 
> 赞同：6
> 
> 时间：2012-05-12T17:11:29.883
> 
> 标签：c#, asp.net, datetime

我有一个日期，例如 12/05/2012 现在我想将该格式更改为简单的字符串。

例如。

```
string newdate = new string();
newdate = "12/05/2012";
DateTime Bdate = DateTime.ParseExact(Newdate, "dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture); 
```

现在我的 BDate 是`DateTime` ie。`BDate= 2012/05/12`

现在我想做类似的事情

如果我的日期是 2012 年 5 月 12 日，那么我想要一个类似于“12 May 2012”的字符串

我怎样才能做到这一点？

请帮我...

提前致谢....

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T17:38:12.353

您需要查看每个日期部分并使用函数来获取书面等价物。我在下面包含了一个将整数转换为书面文本的类，并将其扩展为支持`DateTime`转换：

```
public static class WrittenNumerics
{
    static readonly string[] ones = new string[] { "", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine" };
    static readonly string[] teens = new string[] { "Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen" };
    static readonly string[] tens = new string[] { "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety" };
    static readonly string[] thousandsGroups = { "", " Thousand", " Million", " Billion" };

    private static string FriendlyInteger(int n, string leftDigits, int thousands)
    {
        if (n == 0)
            return leftDigits;

        string friendlyInt = leftDigits;
        if (friendlyInt.Length > 0)
            friendlyInt += " ";

        if (n < 10)
            friendlyInt += ones[n];
        else if (n < 20)
            friendlyInt += teens[n - 10];
        else if (n < 100)
            friendlyInt += FriendlyInteger(n % 10, tens[n / 10 - 2], 0);
        else if (n < 1000)
            friendlyInt += FriendlyInteger(n % 100, (ones[n / 100] + " Hundred"), 0);
        else
            friendlyInt += FriendlyInteger(n % 1000, FriendlyInteger(n / 1000, "", thousands + 1), 0);

        return friendlyInt + thousandsGroups[thousands];
    }

    public static string DateToWritten(DateTime date)
    {
        return string.Format("{0} {1} {2}", IntegerToWritten(date.Day), date.ToString("MMMM"), IntegerToWritten(date.Year));
    }

    public static string IntegerToWritten(int n)
    {
        if (n == 0)
            return "Zero";
        else if (n < 0)
            return "Negative " + IntegerToWritten(-n);

        return FriendlyInteger(n, "", 0);
    }
} 
```

> [**免责声明：**[@Wedge](https://stackoverflow.com/a/3267/879420)提供的基本功能]

使用此类，只需调用 DateToWritten 方法：

```
var output = WrittenNumerics.DateToWritten(DateTime.Today); 
```

上面的输出是：`Twelve May Two Thousand Twelve`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T17:24:18.147

这不是您想要的，但我可以建议使用内置功能的最接近的方法是[`ToLongDateString`](http://msdn.microsoft.com/en-us/library/system.datetime.tolongdatestring)，它为您提供月份的名称，并且显然对文化敏感。

```
string str = bdate.ToLongDateString();
// Assuming en-US culture, this would give: "Saturday, May 12, 2012" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T17:30:52.540

假设 12/05/2012 是一个字符串，那么您必须将其**标记**为以斜杠“/”分隔的元素。例如：

> “12/05/2012”-> [“12”、“05”、“2012”]

接下来，您为自己定义一个规则，将这些元素解析为您所期望的。比如说，“12”是“十二”，“05”是“五”或“五月”等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-03T06:15:43.400

```
string MyDate = "12/05/2012";
DateTime expected = Convert.ToDateTime(MyDate);
string MyNewDate = expected.ToString("dd MMM yyyy"); 
```

检查本网站上的其他日期格式[https://www.mikesdotnetting.com/article/23/date-formatting-in-c](https://www.mikesdotnetting.com/article/23/date-formatting-in-c)。

# sql - 分析范围，如果是真的告诉我

> ID：10565816
> 
> 赞同：0
> 
> 时间：2012-05-12T17:11:33.087
> 
> 标签：sql, database, postgresql

我想看看这周股票的价格是否变化了 5%。我有每天捕捉价格的数据。我可以通过执行以下操作获取过去 7 天的行：

```
select price from data where date(capture_timestamp)>date(current_timestamp)-7; 
```

但是，我该如何分析，看看价格是上涨还是下跌了 5%？是否可以使用一条 sql 语句完成所有这些操作？我希望能够将它的任何结果插入到一个新表中，但我只想专注于首先在 shell 中打印出来。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:22:33.623

在名为 data 的表中只有一只股票似乎很奇怪。您需要做的是将上周和今天的值的两行放在一起，如以下查询所示：

```
select d.price
from data d cross join
     data dprev
where cast(d.capture_timestamp as date = date(current_timestamp) and
      cast(dprev.capture_timestamp as date) )= cast(current_timestamp as date)-7 and
      d.price > dprev.price * 1.05 
```

如果数据表包含股票代码，则交叉联接将是等值联接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:50:21.330

您可以使用来自以下子查询的查询来进行您想要执行的任何计算。这是假设每天一条记录。前 7 行是文字。

```
SELECT ticker, price, capture_ts
      ,MIN(price) OVER (PARTITION BY ticker ORDER BY capture_ts ROWS BETWEEN 7 PRECEDING AND CURRENT ROW) AS min_prev_7_records
      ,MAX(price) OVER (PARTITION BY ticker ORDER BY capture_ts ROWS BETWEEN 7 PRECEDING AND CURRENT ROW) AS max_prev_7_records
  FROM data 
```

# javascript - 以 DRY 方式预渲染 AJAX 填充的视图

> ID：10565820
> 
> 赞同：1
> 
> 时间：2012-05-12T17:11:59.310
> 
> 标签：javascript, ajax, ruby-on-rails-3, dry

我们应用程序中的许多 Rails 视图通过 AJAX 填充它们自己，并且它们的数据的第一次呈现来自在 jquery`$(document.ready)`事件上运行的 javascript 调用。我们对此感兴趣的视图本质上显示了一个表格数据列表（例如收件箱、搜索结果列表等）。

我们希望在不进行 AJAX 调用的情况下预渲染结果的第一页，但我们希望能够在不重新加载整个页面的情况下重新填充视图。这并不难，但它似乎需要在应用程序的不同部分编写单独的代码来做同样的事情：一次在视图中绘制初始数据集（来自初始`render`调用），再一次在用于绘制新数据集的 Javascript（动态清除旧 DOM 并用新的 HTML 替换它）。

目前，javascript 会克隆一个隐藏的（带有`style='display: none'`）模板元素（通常是 a `div`），设置每个字段的值，并将新元素添加到 DOM。这很好用，但是如果我们想在渲染之前预填充视图，我们必须在 ruby​​fied ERB 块中编写模板对象的另一个副本（例如`@messages.each do |m|`）。如果模板被更改，则 ERB 块中的代码必须更改以匹配 -**不是很 DRY**。

有没有更好的办法？如果是这样，它是什么？

谢谢

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:10:58.243

在您的文档（准备好）中，您可以明确地进行第一个不绑定到事件处理程序的 AJAX 调用。或者类似地，您可以显式触发事件处理程序。

未初始化的索引视图：

index.html.haml（初始）

```
.span12
  #book-table 
```

现在这里是用于填充的 DRYed 部分`div#book-table`

_table.html.haml

```
%table
  %tr
    %th Title
    %th Author
  - books.each do |book|
    %tr
      %td= link_to book.title, book_path(book)
      %td= book.author 
```

接下来，您将拥有响应它的 JS。请注意，这样做是在 AJAX 调用索引操作期间呈现部分。

index.js.erb

```
$('#book-table').html('<%= escape_javascript(render(partial: "table", locals: { books: @books })) %>'); 
```

我们现在需要调整索引视图来初始化这个视图：

index.html.haml（最终）

```
:javascript
  $(document).ready (function() {
    $.get("/books.js");
  });

.span12
  #book-table 
```

如您所见，document.ready 执行初始 AJAX 调用，点击您的 .js.erb 并填充 div 而不显式填充 .html.haml 中的 div

# ruby-on-rails - 更新我的数据库中的现有条目不起作用

> ID：10565823
> 
> 赞同：0
> 
> 时间：2012-05-12T17:12:19.123
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, foreign-keys, database-relations

我正在尝试在名为 Jobs 的新模型中使用从我的客户端模型创建的客户端列表。

基本上。用户应该能够查看当前分配给任何一个客户的作业列表，然后深入了解更多信息。

我在我的作业数据库中插入了一个名为 client_id 的新列，并在我的`_form`视图中插入了以下代码，以便能够看到所有客户端的下拉列表

```
<%= f.label :client_id %><br />
<%= f.collection_select :client_id, @clients, :id, :name, :prompt => 
    "Select" %> 
```

然而。当我点击提交时，它会尝试`jobs/new`根据我的资源路由将其发布到哪个位置。不存在。

我还在数据库中插入了一些虚拟数据，尽管当我尝试编辑它时显示效果很好。按保存不会对记录做任何事情。

```
 Parameters: {"utf8"=>"✓", "authenticity_token"=>"0ZVYpM9vTgY+BI55Y9yJDwCJwrwSgGL9xjHq8dz5OBE=", "job"=>{"name"=>"Sample Monthly", "client_id"=>"2", "frequency"=>"Monthly", "owner"=>"Me"}, "commit"=>"Save Job", "id"=>"1"}
  Job Load (0.3ms)  SELECT "jobs".* FROM "jobs" WHERE "jobs"."id" = ? LIMIT 1  [["id", "1"]]
   (0.1ms)  begin transaction
   (0.5ms)  UPDATE "jobs" SET "name" = 'Sample Monthly', "frequency" = 'Monthly', "updated_at" = '2012-05-12 17:04:23.818967' WHERE "jobs"."id" = 1
   (108.3ms)  commit transaction
Redirected to http://localhost:3000/jobs/1 
```

这是我的控制器..

```
class JobsController < ApplicationController
  before_filter :load_clients, :only => [ :new, :create, :edit ]

  def index
    @job = Job.find(:all)

    respond_to do |format|
      format.html # index.html.erb
      format.xml { render :xml => @job }
    end
  end

  def new
    @job = Job.new
    respond_to do |format|
      format.html # new.html.erb
      format.xml  { render :xml => @Job }
    end
  end

  def create
    @job = Job.new(params[:job])

    respond_to do |format|
      if @job.save
        format.html { redirect_to @job, notice: 'Job was successfully created.' }
        format.json { render json: @job, status: :created, location: @job }
      else
        format.html { render action: "new" }
        format.json { render json: @job.errors, status: :unprocessable_entity }
      end
    end
  end

  def show
    @job = Job.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @job }
    end
  end

  def update
    @job = Job.find(params[:id])

    respond_to do |format|
      if @job.update_attributes(params[:job])
        format.html { redirect_to @job, notice: 'Job was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @job.errors, status: :unprocessable_entity }
      end
    end
  end

  private
    def load_clients
        @client = Client.find(:all)
    end
  end 
```

我想得到这个工作是一个相对容易的修复，但这是我的 forst Rails 应用程序，我不知道从哪里开始。

编辑：

按照要求。这是我的工作表：

```
<%= form_for(:job) do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
     <%= f.label :client_id %><br />
     <%= f.collection_select :client_id, @client, :id, :name, :prompt => 
    "Select" %>
  </div>
  <div class="field">
    <%= f.label :frequency %><br />
    <%= f.text_field :frequency %>
  </div>
  <div class="field">
    <%= f.label :owner %><br />
    <%= f.text_field :owner %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

Edit2：这是我的工作模型。

```
class Job < ActiveRecord::Base
  belongs_to :clients
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:25:06.840

尝试在您的表单中替换`:job`为。`@job`

而且看起来您`edit`在控制器中缺少操作。

# mysql - 是否可以在 mysql 中执行此查询？

> ID：10565828
> 
> 赞同：2
> 
> 时间：2012-05-12T17:12:33.757
> 
> 标签：mysql, sql, database

假设我有一个名为 students 的表，其中包含所有学生的列表。每个学生可以有许多课程存储在另一个表中，由学生 ID 标识。

我想做一个查询，该查询将从学生表中获取包含学生信息的行，并在一个查询中获取他的所有课程。我想要的输出是这样的：

```
Array
(
    [0] => Array
        (
            [id] => 5
            [firstName] => Bob
            [lastName] => Smith
            [email] => ....
            [courses] => Array
                (
                    [0] => Array
                        (
                            [id] => 30
                            [name] => Test Course
                            [price] => 400
                        )

                    [1] => Array
                        (
                            [id] => 30
                            [name] => Test Course 2
                            [price] => 300
                        )

                )

        )

) 
```

要获取学生的信息，我会执行以下查询：

```
SELECT * FROM students WHERE something ='something' 
```

为了获得学生的课程，我会这样做：

```
SELECT * FROM courses WHERE studentId = '5' 
```

是否可以同时执行两个查询并获得像上面的数组一样的输出，或者我是否必须遍历每个学生并获取其课程，然后手动将其附加到数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:24:53.357

您可以通过将表连接在一起来做到这一点：

```
select s.*, c.*
from students s join
     courses c
     on s.studentid = c.studentid
where s.something = 'something' 
```

如果您希望学生信息在一行，课程在另一行，那么这是不可能的。所有行必须具有相同的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:28:03.770

```
$query = "select * from students inner join courses on studentID = '5' where something  = 'something'"; 
$result = mysql_db_query ($dbname, $query, $link); 
$id = $row[0]; # corresponding to row in students database
$firstName= $row[1]; # corresponding to row in students database
$lastName = $row[2]; # corresponding to row in students database
$email = $row[3]; # corresponding to row in students database
while($row = mysql_fetch_array($result)) {
  echo 'id: '.$row[id];
  echo '<br>';
  echo 'name: '.$row[name];
  echo '<br>';
  echo 'price: '.$row[price];
  echo '<br>';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T17:57:22.327

基本上新代码将是：

```
$query = "select * from students"; 
$result = mysql_db_query ($dbname, $query, $link); 
while($row = mysql_fetch_array($result)) {
   $id = $row[0]; # corresponding to row in students database
   $firstName= $row[1]; # corresponding to row in students database
   $lastName = $row[2]; # corresponding to row in students database
   $email = $row[3]; # corresponding to row in students database
   echo 'id: '.$id;
   echo '<br>';
   echo 'firstName: '.$firstName;
   echo ' ';
   echo 'lastName: '.$lastName;
   echo '<br>';
   echo 'email: '.$email;
   echo '<br>';
   $query = "select * from courses where id  = '".$id."'"; 
   $result2 = mysql_db_query ($dbname, $query, $link); 
   while($row2 = mysql_fetch_array($result2)) {
     echo 'name: '.$row2[1]; # corresponding to row in courses database
     echo '<br>';
     echo 'price: '.$row2[2]; # corresponding to row in courses database
     echo '<br>';
   }
} 
```

# jquery - div 附加带有动画的文本

> ID：10565832
> 
> 赞同：1
> 
> 时间：2012-05-12T17:13:15.877
> 
> 标签：jquery, html, css

我知道这已经在这里被问过几次了，但是大多数答案都没有解决人们可以始终如一地附加信息并且该框从一开始就可见的情况（而且我不知道我想要的新高度动画到（因为它的文本即时添加））

假设我有一个 div，我将文本附加到它我将如何为它设置动画

```
<div id="mybox">
Text
</div> 
```

Javascript代码（使用JQuery库）

```
function appendAndAnimate(text)
    $('#mybox').append(text +"<br/>")
end 
```

我想多次调用它，而不是将它猛拉到新的高度，而是慢慢地扩展到它。（盒子一开始并没有被隐藏或任何东西）。我已经尝试过`-webkit-transition`，`transition`但无济于事。我也尝试过捕捉前后的高度并来回移动它，但这里没有优雅，它更像是一个肮脏的解决方案

因为它的文本我不想在 div 框上添加带有动画的高度，因为人们可能在他们的浏览器上设置了不同的字体缩放。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T17:23:46.170

据我了解，您希望`mybox`在附加文本时制作动画。我可以看到它就像添加一个新的文本块并以动画为例`mybox`显示它。`slideDown`然后它看起来像这样：

```
$("button").click(function() {
    var el = $("<div />").css("display", "none").text("New Text")
    $("#mybox").append(el);
    el.slideDown(1000);
});​ 
```

**演示：http:** [//jsfiddle.net/YRuqP/](http://jsfiddle.net/YRuqP/)

* * *

**更新。**事实上，我有更好的解决方案。如果您不想添加文本块。您可以使用其他变体。这里我们需要在里面添加一个额外的块`mybox`，所以标记看起来像这样：

```
<div id="mybox">
    <div>
        Text
    </div>
</div> 
```

并设置为`mybox`style `overflow: hidden`。

然后我们可以稍微更新一下代码，以便在插入任何文本时获得漂亮的滑动动画。

```
var block = $("#mybox");
var child = block.children();
block.css("height", block.height());

$("button").click(function() {
    child.append(text);
    block.animate({
        height: child.height()
    });
});​ 
```

**演示：http:** [//jsfiddle.net/YRuqP/1/](http://jsfiddle.net/YRuqP/1/)

# php - 在 PHP 中对 MongoCollection 组函数进行排序

> ID：10565833
> 
> 赞同：0
> 
> 时间：2012-05-12T17:13:17.153
> 
> 标签：php, mongodb

我需要使用 MongoCollection-Group 函数对 mongoDB 数据库进行复杂查询，然后我需要对结果进行排序

他们说 mongoCursor 有一个内置的 sort() 函数。(http://www.mongodb.org/display/DOCS/Advanced+Queries)

但是在 PHP 库中，我看到只有 find() 函数返回一个光标。group() 函数返回一个数组。(http://www.php.net/manual/en/class.mongocollection.php)

我必须手动完成吗？它有点乏味，因为它有嵌套文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:38:39.170

您必须在应用程序代码中手动执行此操作。group() 函数的结果是一个文档，在其`results`字段中包含形成结果的文档数组。您必须自己对该数组进行排序。

# c# - 简单的 WCF REST 客户端 - 添加服务引用错误？

> ID：10565836
> 
> 赞同：4
> 
> 时间：2012-05-12T17:13:59.823
> 
> 标签：c#, .net, wcf, rest

我想做一个简单的 WCF Hello world 客户端，它可以连接到 WCF REST 服务。

但我有以下错误：

“在 ServiceModel 客户端配置部分中找不到引用合同‘ServiceReference1.IService1’的默认端点元素。这可能是因为找不到您的应用程序的配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。”

我做了什么：

-我使用“WCF 服务应用程序”模板创建了一个名为“WCFerror”的新项目

-我的 web.config 是这样的：http: [//pastebin.com/KEGqRgPr](http://pastebin.com/KEGqRgPr)

-我的服务接口也很简单：

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    [WebGet(UriTemplate = "GetData?value={value}", ResponseFormat = WebMessageFormat.Json)]
    string GetData(int value);
} 
```

-我创建了一个新的控制台应用程序。

-我启动了我的 WCFerror 服务的一个新实例（通过“开始调试”），它是托管的，我在 Web 浏览器中进行了尝试（例如：）`http://localhost:58475/Service1.svc/GetData?value=4`，它运行良好。

- 然后我添加了一个对控制台应用程序的服务引用（地址是`http://localhost:58475/Service1.svc`：），在后台，svcutil 生成了客户端代码和一个 app.config——但是一个空的 app.config！

- 所以我的客户不工作：

```
ServiceReference1.Service1Client client = new ServiceReference1.Service1Client();
Console.WriteLine(client.GetData(4)); 
```

-我尝试通过命令提示符运行 svcutil，如下所示：

```
svcutil.exe /language:cs /out:GeneratedProxy.cs /config:app.config http://localhost:58475/Service1.svc 
```

但它会生成相同的空 app.config。

我做错什么了？:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T18:34:49.560

添加服务参考使用 WSDL 或 WS-MetadataExchange。这两个都是 SOAP 结构。REST 没有元数据标准。您必须自己滚动消息，最好使用框架。您是否查看过作为新 Web API 一部分的 HttpClient？[它可以通过 Nuget 获得](http://blogs.msdn.com/b/henrikn/archive/2012/02/20/asp-net-web-api-and-httpclient-available-on-nuget.aspx)

# c# - C#/winforms 中的客户端/服务器聊天程序 IP 地址问题

> ID：10565837
> 
> 赞同：0
> 
> 时间：2012-05-12T17:14:05.110
> 
> 标签：c#, winforms, ip-address, tcpclient

我正在尝试制作一个 winforms 客户端/服务器聊天应用程序。我已经有一个客户端和一个服务器，两者都工作正常，我可以登录，发送消息等。问题是它只有在我连接到我的本地 IP 时才有效。当我尝试使用我的外部 IP 运行程序时，我收到以下错误：

```
"The requested address is not valid in its context". 
```

换句话说，我可以在自己的计算机上运行服务器，启动（例如）3 个客户端并让它们连接到正在运行的服务器。这基本上意味着我在自言自语。我想做的是在我的电脑上运行聊天服务器，让其他人运行客户端程序并通过互联网连接到服务器。

这是我输入外部 IP 时出错的部分：

```
public void StartListening()
    {

        // Get the IP of the first network device, however this can prove unreliable on certain configurations
        IPAddress ipaLocal = ipAddress;

        // Create the TCP listener object using the IP of the server and the specified port
        tlsClient = new TcpListener(ipaLocal, 50702);

        // Start the TCP listener and listen for connections
        tlsClient.Start(); <--- THINGS GO SOUTH HERE

        // The while loop will check for true in this before checking for connections
        ServRunning = true;

        // Start the new tread that hosts the listener
        thrListener = new Thread(KeepListening);
        thrListener.Start();
    } 
```

我不确定我想做的事情是否可行？我无法想象它是，但我有点不知道如何进行。我是网络编程的新手，因此将不胜感激。

亲切的问候，简

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:45:12.277

简，

我认为您的问题与您的 IP 地址设置有关。这是网络连接问题。您需要外部 IP 地址，以便外部客户端可以联系您的 PC。您需要更高级的网络。您的 ISP 提供的 IP 地址用于家庭用途。您需要专门的公共 IP 地址，以便客户端可以在防火墙之外找到您。这是网络/ISP/外部 IP 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:19:37.817

您的服务器应用程序需要在指定的本地安装的 NIC 上侦听指定端口上的传入连接。这就是为什么`TcpListener`总是需要使用**本地**IP 地址创建的原因：因为它只关心应该使用哪个 NIC（如果您安装了多个）。

MSDN 页面[`TcpListener`](http://msdn.microsoft.com/en-us/library/c6z86e63.aspx)也明确指出：

> TcpListener 构造函数 (IPAddress, Int32) 初始化 TcpListener 类的新实例，该实例侦听指定**本地**IP 地址和端口号上的传入连接尝试。

外部 IP 地址与 TCP/IP 服务器完全无关。一路上您可以拥有许多路由器和网络设备，然后它们可以将传入的连接转发到您的机器。

只需确保您的防火墙和路由器配置正确，以允许指定端口上的传入连接。为此，请启动 TCP/IP 服务器以打开端口，然后使用[CanYouSeeMe 之](http://www.canyouseeme.org/)类的服务查看是否可以从外部访问服务器。

关于您的评论（*这在某些配置上可能被证明是不可靠的*），当您考虑它时，它显然是“不可靠的”：笔记本电脑可以很容易地拥有一个 IP 地址与 Wifi 网络适配器完全不同的以太网网络控制器。您的服务器应用程序应允许**用户**选择要使用的 IP 地址，而不是选择它获得的第一个地址。

# c# - C# 中的空合并运算符 (??) 是线程安全的吗？

> ID：10565838
> 
> 赞同：13
> 
> 时间：2012-05-12T17:14:23.970
> 
> 标签：c#, .net, multithreading, thread-safety, null-coalescing-operator

以下代码中是否存在可能导致`NullReferenceException`?

- 或者 -

`Callback`在 null 合并运算符检查 null 值之后但在调用函数之前，是否可以将变量设置为 null？

```
class MyClass {
    public Action Callback { get; set; }
    public void DoCallback() {
        (Callback ?? new Action(() => { }))();
    }
} 
```

**编辑**

这是一个出于好奇而提出的问题。我通常不会这样编码。

我不担心`Callback`变量变得陈旧。我担心`Exception`被扔掉`DoCallback`。

**编辑#2**

这是我的课：

```
class MyClass {
    Action Callback { get; set; }
    public void DoCallbackCoalesce() {
        (Callback ?? new Action(() => { }))();
    }
    public void DoCallbackIfElse() {
        if (null != Callback) Callback();
        else new Action(() => { })();
    }
} 
```

该方法`DoCallbackIfElse`有一个竞争条件，可能会抛出一个`NullReferenceException`. 该`DoCallbackCoalesce`方法是否具有相同的条件？

这是 IL 输出：

```
MyClass.DoCallbackCoalesce:
IL_0000:  ldarg.0     
IL_0001:  call        UserQuery+MyClass.get_Callback
IL_0006:  dup         
IL_0007:  brtrue.s    IL_0027
IL_0009:  pop         
IL_000A:  ldsfld      UserQuery+MyClass.CS$<>9__CachedAnonymousMethodDelegate1
IL_000F:  brtrue.s    IL_0022
IL_0011:  ldnull      
IL_0012:  ldftn       UserQuery+MyClass.<DoCallbackCoalesce>b__0
IL_0018:  newobj      System.Action..ctor
IL_001D:  stsfld      UserQuery+MyClass.CS$<>9__CachedAnonymousMethodDelegate1
IL_0022:  ldsfld      UserQuery+MyClass.CS$<>9__CachedAnonymousMethodDelegate1
IL_0027:  callvirt    System.Action.Invoke
IL_002C:  ret         

MyClass.DoCallbackIfElse:
IL_0000:  ldarg.0     
IL_0001:  call        UserQuery+MyClass.get_Callback
IL_0006:  brfalse.s   IL_0014
IL_0008:  ldarg.0     
IL_0009:  call        UserQuery+MyClass.get_Callback
IL_000E:  callvirt    System.Action.Invoke
IL_0013:  ret         
IL_0014:  ldsfld      UserQuery+MyClass.CS$<>9__CachedAnonymousMethodDelegate3
IL_0019:  brtrue.s    IL_002C
IL_001B:  ldnull      
IL_001C:  ldftn       UserQuery+MyClass.<DoCallbackIfElse>b__2
IL_0022:  newobj      System.Action..ctor
IL_0027:  stsfld      UserQuery+MyClass.CS$<>9__CachedAnonymousMethodDelegate3
IL_002C:  ldsfld      UserQuery+MyClass.CS$<>9__CachedAnonymousMethodDelegate3
IL_0031:  callvirt    System.Action.Invoke
IL_0036:  ret 
```

在我看来，`call UserQuery+MyClass.get_Callback`在使用运算符时只被调用一次`??`，但在使用`if...else`. 难道我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T17:17:01.560

## 更新

如果我们在您的编辑澄清时排除了获取陈旧值的问题，那么 null-coalescing 选项将始终*可靠地*工作（即使无法确定确切的行为）。然而，替代版本（如果没有`null`，则调用它）不会，并且冒着`NullReferenceException`.

null-coalescing 运算符导致`Callback`只被评估一次。[代表是不可变的](http://msdn.microsoft.com/en-us/library/system.delegate.aspx)：

> 组合操作（例如 Combine 和 Remove）不会改变现有的委托。相反，此类操作会返回一个包含操作结果的新委托、未更改的委托或 null。当操作的结果是不引用至少一个方法的委托时，组合操作返回 null。当请求的操作无效时，组合操作返回未更改的委托。

此外，委托是引用类型，因此简单的读取或写入保证是原子的（C# 语言规范，第 5.5 段）：

> 以下数据类型的读写是原子的：bool、char、byte、sbyte、short、ushort、uint、int、float 和引用类型。

这证实了 null-coalescing 运算符无法读取无效值，并且因为只有在没有出错的可能性时才会读取该值。

另一方面，条件版本读取委托一次，然后调用第二次独立读取的结果。如果第一次读取返回非空值，但委托在第二次读取发生之前（原子地，但这无济于事）被覆盖`null`，编译器最终会调用`Invoke`空引用，因此将引发异常。

所有这些都反映在这两种方法的 IL 中。

## 原始答案

相反，如果没有明确的文档，那么是的，这里有一个竞争条件，因为在更简单的情况下也会有

```
public int x = 1;

int y = x == 1 ? 1 : 0; 
```

原理是一样的：首先计算条件，然后产生表达式的结果（然后使用）。如果发生了使情况发生变化的事情，那就太晚了。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-12T20:29:25.733

```
public void DoCallback() {
    (Callback ?? new Action(() => { }))();
} 
```

保证等于：

```
public void DoCallback() {
    Action local = Callback;
    if (local == null)
       local = new Action(() => { });
    local();
} 
```

这是否可能导致 NullReferenceException 取决于内存模型。Microsoft .NET 框架内存模型被记录为永远不会引入额外的读取，因此测试`null`的值与将被调用的值相同，并且您的代码是安全的。但是，ECMA-335 CLI 内存模型不那么严格，并且允许运行时消除局部变量并访问该`Callback`字段两次（我假设它是访问简单字段的字段或属性）。

您应该标记该`Callback`字段`volatile`以确保使用正确的内存屏障 - 这使得代码即使在弱 ECMA-335 模型中也是安全的。

如果它不是性能关键代码，只需使用锁（将回调读入锁内的局部变量就足够了，您不需要在调用委托时持有锁） - 其他任何事情都需要有关内存模型的详细知识才能知道是否它是安全的，并且确切的细节可能会在未来的 .NET 版本中发生变化（与 Java 不同，Microsoft 尚未完全指定 .NET 内存模型）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T17:22:47.997

我在这段代码中没有看到竞争条件。有几个潜在的问题：

*   `Callback += someMethod;`不是原子的。简单的分配是。
*   `DoCallback`可以调用一个陈旧的值，但它会是一致的。
*   只有在回调的整个过程中保持锁定才能避免陈旧值问题。但这是一种非常危险的模式，会导致死锁。

更清晰的写作`DoCallback`方式是：

```
public void DoCallback()
{
   var callback = Callback;//Copying to local variable is necessary
   if(callback != null)
     callback();
} 
```

它也比您的原始代码快一点，因为它不会创建和调用无操作委托，如果`Callback`是`null`.

* * *

您可能希望用事件替换属性，以获得原子`+=`和`-=`：

```
 public event Action Callback; 
```

调用`+=`属性时，会发生`Callback = Callback + someMethod`. 这不是原子的，因为`Callback`可能会在读取和写入之间更改。

当调用`+=`像事件这样的字段时，会发生`Subscribe`对事件方法的调用。对于类似字段的事件，事件订阅保证是原子的。在实践中，它使用一些`Interlocked`技术来做到这一点。

* * *

空合并运算符的使用在`??`这里并不重要，而且它本身也不是线程安全的。重要的是您`Callback`只阅读一次。还有其他类似的模式`??`以任何方式都不是线程安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T17:17:23.237

我们假设它是安全的，因为它是一条线？通常情况并非如此。您确实应该在访问任何共享内存之前使用 lock 语句。

# php - 构造父类时设置对象的子类（动态子类）

> ID：10565843
> 
> 赞同：2
> 
> 时间：2012-05-12T17:15:00.117
> 
> 标签：php, oop

编辑：为了消除一些混乱，我实际上并没有使用`Male`and `Female`。一个更好的例子是父类`Animal`和子类`Cat`和`Dog`.
我对 OOP 有点陌生，但到目前为止我已经很好地掌握了它。但是，有一件事我完全可以找到一种方法。
首先，我创建了一个基于用户的新对象。用户可以是（对于这个例子）男性或女性，但如果不检查数据库，我无法检查他们是否是。然后我需要用他们的性别的子类创建一个新的用户对象。
例如，这是我当前的（凌乱的）代码：

```
$user = new Person();
$userType = $user->GetUserType($userid);
if ($userType == 'Male') {
    $user = new Male($userid);
} else {
    $user = new Female($userid);
} 
```

如果我想制作一个新对象，我必须每次都这样做，这是我不想做的事情。
这里有更多代码可以帮助您了解这一点：

```
class Person {
function GetUserType($userid) {
        $db = mysqlConnect();
        $stmt = $db->stmt_init();
        // Get the players information
        $stmt->prepare("SELECT user_type FROM user_information WHERE user_id = ?");
        $stmt->bind_param('i', $userid);
        $stmt->execute();
        $stmt->bind_result($userType);
        $stmt->fetch();
        $stmt->close();
        $db->close();
        return $userType;
    }
}
class Male extends Person {
    // Male based things here
}
class Female extends Person {
    // Female based things here
} 
```

所以，在`__construct`课堂`Person`上，我希望它检查用户的性别并设置适当的子类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:33:00.483

> 因此，在`__construct`Person 类中，我希望它检查用户的性别并设置适当的子类。

就像在别处已经说过的那样，演员不会回来，所以你不能那样做。无论如何，ctors 都不应该查询数据库，因为[那样会起作用](http://misko.hevery.com/code-reviewers-guide/flaw-constructor-does-real-work/)。如果您不能/不想立即通过[DataMapper](http://martinfowler.com/eaaCatalog/dataMapper.html)或[Repository](http://martinfowler.com/eaaCatalog/repository.html)创建正确的子类型，则可以使用[State Pattern](http://sourcemaking.com/design_patterns/state)：

> 允许对象在其内部状态发生变化时改变其行为。该对象将出现更改其类。

这是《四人帮》书中的行为[模式](https://en.wikipedia.org/wiki/Design_Patterns)[之一](http://sourcemaking.com/behavioral_patterns)。显然，这里的关键字是行为。状态模式不是关于不同的子类型（猫、狗）本身，而是关于它们所具有的行为的差异。因此，我对您的问题发表了评论。

### 例子：

```
interface GenderBehavior
{
    public function someBehavior();
    // can add more methods here
}

class FemalePersonBehavior implements GenderBehavior
{
    public function someBehavior()
    {
        // female specific behavior
    }
}

class MalePersonBehavior implements GenderBehavior
{
    public function someBehavior()
    {
        // male specific behavior
    }
}

class UnknownGenderBehavior implements GenderBehavior
{
    public function someBehavior()
    {
        // either implement a neutral behavior or
        throw new LogicException('Unknown Gender set');
    }
} 
```

要创建这些实例，您添加一个[工厂](http://sourcemaking.com/design_patterns/abstract_factory)

```
class GenderBehaviorFactory
{
    public static function create($sex = null)
    {
        switch ($sex) {
           case 'male':
               return new MalePersonBehavior;
           case 'female':
               return new FemalePersonBehavior;
           default:
               return UnknownGenderBehavior;
        }
    }
} 
```

然后将`GenderBehavior`接口添加到`Person`类中，并将对接口方法的所有访问都隧道化到 Behavior 实例：

```
class Person implements GenderBehavior
{
    private $behavior;

    public function __construct()
    {
        $this->behavior = GenderBehaviorFactory::create();
    }

    public function changeGender($sex)
    {
        $this->behavior = GenderBehaviorFactory::create($sex);
    }

    public function someBehavior()
    {
        $this->behavior->someBehavior();
    }
} 
```

现在，当您第一次创建 Person 时，它将使用 an 实例化，`UnknownGenderBehavior`如果您尝试调用`someBehavior`，它将引发异常。当您`changeGender`使用男性或女性作为参数调用时，`GenderBehavior`将创建适当的并将其设置为`Person`。然后你就可以打电话了`someBehavior`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:23:38.033

您不能选择从构造函数返回什么，但您可以按原样获取层次结构（`Person`性别未知，`Male`并且`Female`已知）并使用类似以下模式的内容：

```
public class Person {
    public function ensureHasGender() {
        if ($this instanceof Male || $this instanceof Female) {
            return $this;
        }

        // now construct a Male or Female object from $this and return it
        $userType = $user->GetUserType($this->userid);
        return new $userType($this->userid);
    }
} 
```

因此，您现在可以随意调用`$user->ensureHasGender()`多次，并且它只会在第一次构建一个特定于性别的实例。

但是，我认为这种策略是有问题的。你能从分开`Male`和`Female`上课中得到什么？如果他们的行为如此不同，那么这可能是合理的，但这听起来不太可能。也许使用延迟加载和适当的条件在类内部处理问题会更好。

# php - 使用按钮获取数据

> ID：10565845
> 
> 赞同：-1
> 
> 时间：2012-05-12T17:15:07.093
> 
> 标签：php

我使用`input[type="button"]`. 我的问题是，我想使用它删除数据库中的数据`type="button"`，但我对使用它感到困惑。我出于某种原因使用了这个按钮。

这是我的代码。

```
<html>
    <head>
        <script type="text/javascript">
            function del()
            {
                window.location.href='recdelete.php';
            }
        </script>
    </head>
    ......
    ......
    while ( $field = $count->fetch( PDO::FETCH_OBJ ) )
    {
        echo '<tr>';
        echo '<td>'.$field->fld1.'</td>';
        echo '<td><input type="button" name="delete" value="Delete" onclick="del()"></input></</td>';
        echo '</tr>';
    } 
```

在我的`recdelete.php`我不知道如何删除这个特定的记录。你能给我一些指示吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:25:14.870

您可以将字段名称放在删除按钮的值中，通过 JavaScript 读取，然后将其附加到 URL。您可能会从使用 jQuery 和 Ajax 来处理此类事情中受益。您还可以从参加一两门编程课程来学习解决问题的技能中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:55:08.027

为按钮提供与该行中显示的数据相关的特定 ID。然后，您可以自定义删除 URL，例如：

```
<script type="text/javascript">
function del(id)
 {
   window.location.href='recdelete.php?id='+id;
 }
</script> 
```

通过制作

```
<input type="button" id="specificid" name="delete" value="Delete" onclick="del(this.id)"></input> 
```

# mysql - 使用复合主键作为外键

> ID：10565846
> 
> 赞同：13
> 
> 时间：2012-05-12T17:15:07.460
> 
> 标签：mysql, sql, oracle, constraints

如何使用复合主键作为外键？看来我的尝试不起作用。

```
create table student
(
student_id varchar (25) not null ,
student_name varchar (50) not null ,
student_pone int ,
student_CNIC varchar (50),
students_Email varchar (50),
srudents_address varchar(250),
dept_id varchar(6),
batch_id varchar(4),
FOREIGN KEY (dept_id) REFERENCES department(dept_id),
FOREIGN KEY (batch_id) REFERENCES batch(batch_id),
CONSTRAINT pk_studentID PRIMARY KEY (batch_id,dept_id,student_id) ) 
```

* * *

```
create table files
(
files_name varchar(50) not null ,
files_path varchar(50),
files_data varchar(max),
files_bookmarks xml ,
FOREIGN KEY (pk_studentID ) REFERENCES student(pk_studentID ),
CONSTRAINT pk_filesName PRIMARY KEY (files_name) ) 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-12T18:47:11.960

该行：

```
FOREIGN KEY (pk_studentID ) REFERENCES student(pk_studentID ), 
```

是错的。不能这样用`pk_studentID`，这只是父表中PK约束的名称。要将复合主键用作外键，您必须向子表添加具有相同数据类型的相同数量的列（组成 PK），然后在`FOREIGN KEY`定义中使用这些列的组合：

```
CREATE TABLE files
(
  files_name varchar(50) NOT NULL, 

  batch_id varchar(4) NOT NULL,         --- added, these 3 should not
  dept_id varchar(6) NOT NULL,          --- necessarily be NOT NULL
  student_id varchar (25) NOT NULL,     --- 

  files_path varchar(50),
  files_data varchar(max),              --- varchar(max) ??   
  files_bookmarks xml,                  --- xml ??
                                        --- your question is tagged MySQL, 
                                        --- and not SQL-Server

  CONSTRAINT pk_filesName 
    PRIMARY KEY (files_name),

  CONSTRAINT fk_student_files                     --- constraint name (optional)
    FOREIGN KEY (batch_id, dept_id, student_id)  
      REFERENCES student (batch_id, dept_id, student_id)
) ENGINE = InnoDB ; 
```

# javascript - Dojo Mobile - 使用 1.7+ 首选 api 的轮播幻灯片？

> ID：10565851
> 
> 赞同：0
> 
> 时间：2012-05-12T17:16:19.690
> 
> 标签：javascript, mobile, carousel, dojo

使用 Dojo Mobile 1.7.2，我无法让简单的轮播幻灯片工作。我现在大部分时间都在处理这个问题

基本上，我正在尝试重新创建此示例：-

[http://download.dojotoolkit.org/release-1.7.2/dojo-release-1.7.2/dojox/mobile/tests/test_Carousel-slideshow.html](http://download.dojotoolkit.org/release-1.7.2/dojo-release-1.7.2/dojox/mobile/tests/test_Carousel-slideshow.html)

但使用 1.7+ 首选 api（来自[http://dojotoolkit.org/reference-guide/1.7/dojox/mobile.html](http://dojotoolkit.org/reference-guide/1.7/dojox/mobile.html)）： -

```
require([
  "dojox/mobile/parser", // (Optional) This mobile app uses declarative programming with fast mobile parser
  "dojox/mobile",        // (Required) This is a mobile app.
  "dojox/mobile/compat"  // (Optional) This mobile app supports running on desktop browsers
], function(parser, mobile, compat){ Optional module aliases that can then be referenced inside callback block
  // Do something with mobile api's.  At this point Dojo Mobile api's are ready for use.
); 
```

我已经使用这种方法管理了所有其他内容，所以不想恢复到 1.7 之前的样式 api，因为这只是倒退......但不幸的是，大多数演示（即使是 1.7.2）仍然使用旧式 api。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:45:26.983

这在 dojo 1.7 中被破坏了。1.8 修复了这个问题。

# css - 下拉菜单显示在页面左上角

> ID：10565852
> 
> 赞同：0
> 
> 时间：2012-05-12T17:16:22.037
> 
> 标签：css, drop-down-menu

我在这个[网站](http://www.adamlowe.org/)上工作，正在尝试添加下拉功能。主题是 David Airey，我正在使用来自 20 的下拉功能。将 CSS 从 20 粘贴到 David Airey 的 menu.css 中，但是当您将鼠标悬停在“广播”（唯一使用下拉菜单的选项）上时，该框会出现在左上角。检查了三次，但找不到哪里出了问题，多加一双眼睛可能会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:18:09.260

添加`position: relative`到`<li>`包含子菜单的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:17:31.367

您需要添加`position: relative`到`.nav li`.

这将使子菜单*相*对于`li`, 而不是窗口绝对定位。

图表在这里：[http ://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

# xml - 将 XML 加载到 Flex AS3

> ID：10565859
> 
> 赞同：0
> 
> 时间：2012-05-12T17:16:54.953
> 
> 标签：xml, actionscript-3, apache-flex, loader

我试图能够从 XML 文档中加载所有 XML 数据，并且即使进行了研究，它也一直失败

这是我尝试加载的 XML 片段：

```
<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <id>urn:uuid:5762c9e8-4e65-3b0c-83b3-7874683f3dbe</id>
  <link href="/v1/espi_third_party_batch_feed" rel="self">
  </link>
  <title type="text">Opower ESPI Third Party Batch Feed v1</title>
  <updated>2012-04-03T22:55:36.364Z</updated>

  <entry>
    <id>urn:uuid:baa6a50a-1306-3680-80a4-51d228db8f25</id>
    <link href="/v1/User/3560606/UsagePoint/6403112/MeterReading/1/IntervalBlock/1" rel="self">
    </link>
    <content type="xml">
      <IntervalBlock xmlns="http://naesb.org/espi">
        <interval>
          <duration>3600</duration>
          <start>1299128400</start>
        </interval>
        <IntervalReading>
          <timePeriod>
            <duration>3600</duration>
            <start>1299128400</start>
          </timePeriod>
          <value>436</value>
        </IntervalReading>
      </IntervalBlock>
    </content>
  </entry>
</feed> 
```

这是我在 XmlLoader 中困惑的 AS3 代码片段：

```
 public function returnArray():Array
    {           
        var ATOM:Namespace = new Namespace("http://www.w3.org/2005/Atom");
        var NAESB:Namespace = new Namespace("http://naesb.org/espi");
        trace("entered returnArray");
        var tempArray:Array = new Array();
        var x:Number = 0;
        var y:Number = 0;
        var entries = this.docXML.ATOM::entry;
        trace(entries.length());                //returns 4 and supposed to
        trace(entries[3].content.length());     //returns 0 supposed to return 1
        trace(this.docXML.ATOM::entry[3].content.NAESB::interval.length()); //returns 0`enter code here` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T02:01:38.023

这个问题的答案感谢 frankhermes 和 www.Flextras.com 帮助我学习是为了继续遍历需要在 xml 中添加另一个 ATOM 命名空间来继续遍历

```
var entries = this.docXML.ATOM::entry;
trace(entries[3].content.length()); 
```

应该

```
var entries = this.docXML.ATOM::entry;
trace(entries[3].ATOM::content.length()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:48:39.467

首先，您应该查看[e4x 的文档](http://livedocs.adobe.com/flex/3/html/help.html?content=13_Working_with_XML_01.html)。其次：你到底想做什么？

您可以更改为最后一行，`this.docXML.ATOM::entry.content..NAESB::interval.length()`但我不确定您真正想从 xml 文档中得到什么。获取节点的长度对于从 xml 文件中获取实际数据并不是很有用。

# java - 字节还是整数？通过套接字发送哪个更快？

> ID：10565865
> 
> 赞同：0
> 
> 时间：2012-05-12T17:17:48.993
> 
> 标签：java, sockets

我正在编写一个应用程序，旨在集中在 mysql 数据库中生成的与项目管理相关的所有数据。该应用程序可以分为 3 个部分/项目，如下所示：

*   服务器层：

充当多个客户端之间的层并保持与数据库（mysql）的连接。它监听协议类，然后执行诸如 INSERT、UPDATE、DELETE、SELECT 等操作。它是用纯 java 2SE 而不是 2EE 编写的，因为它是一个非常简单的类并且可以独立于服务器。

*   通讯协议：

扩展 java.util.EventObject 并实现 Serializable 接口的类。它用于存储与客户端和服务器之间的通用协议相关的信息。这是实际上通过套接字“旅行”的类，因为它的工作方式类似于协议。

*   客户申请：

基本上是gui。它是用 javafx 2.1 编写的，旨在提供一个漂亮而美观的界面来收集信息。

我的问题是，为了通过代码提高可读性，我在通信协议类上创建了一些静态最终字段，然后声明为 int，我想知道使用 byte 是否可以改进代码，因为（再次）它将通过套接字. 我知道 JVM 会将等效空间与字节、短裤和整数变量分开，但是当通过套接字发送数据时会发生这种行为吗？因此，在这种情况下，哪个更好：

```
/**
 * 
 */
private static final long serialVersionUID = 7530533341506425480L;

public static final int CLIENT_DISCONNECTED = -1;
public static final int NEW_INFO_INSERTED = 0;
public static final int SHUTDOWN_ORDER = 1;

public static final int INFO_NOT_INSERTED = 100;

public static final int CLIENT_CONNECT = 10000;
public static final int CLIENT_LOGIN = 10001;

public static final int SERVER_LOGIN_OK = 20001;
public static final int SERVER_LOGIN_FAILED = 20002;
public static final int SERVER_SAYS = 20003;
public static final int SERVER_IMAGE_INSERTED = 20004;

public final static int DB_WORKERS = 1001;
public final static int DB_PROJECTS = 1002;
public final static int DB_SECTORS = 1003;
public final static int DB_ACTIVITIES = 1004;
public final static int DB_SUBACTIVITIES = 1005;
public final static int DB_INSERTION = 1006;
public final static int DB_REL_COST = 1007;
public final static int DB_FUNCTIONS = 1008;
public final static int DB_INSERTION_ID = 1009;
public final static int DB_INSERTION_IMG = 1010;

public final static int DB_WORKER_INSERTED = 4010;
public final static int DB_ACTIVITY_INSERTED = 4011;
public final static int DB_SECTOR_INSERTED = 4012;
public final static int DB_SUBACTIVITY_INSERTED = 4013;
public final static int DB_FUNCTION_INSERTED = 4014;
public final static int DB_IMAGE_INSERTED = 4015;
public final static int DB_PARENTS_INSERTED = 4016; 
```

或使用字节？干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T17:26:31.820

正如 ColeJohnson 所说，字节比整数小，因此在技术上发送速度更快。但是，除非您一次发送 10 万或数百万个这些值，否则大小差异*无关紧要*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T17:18:54.077

字节更小，因此发送速度更快。但是，这些值都不适合一个字节......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T17:28:56.583

字节更小，因此它们的传输速度更快，但对于许多应用程序，它们的处理速度比 int 慢。我认为这将取决于网络的瓶颈吞吐量和发送的字节/整数数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T17:24:42.157

一个 int 使用 4 个字节，因此字节是最高效的。

但是您必须手动将 int 转换为字节数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T17:41:54.120

答案是字节，我认为它也很灵活

# machine-learning - 多层感知器（MLP）架构：选择隐藏层数量和隐藏层大小的标准？

> ID：10565868
> 
> 赞同：108
> 
> 时间：2012-05-12T17:18:08.477
> 
> 标签：machine-learning, neural-network, deep-learning, perceptron

如果我们有 10 个特征向量，那么我们可以在输入层有 10 个神经节点。如果我们有 5 个输出类，那么我们可以在输出层有 5 个节点。但是在 MLP 中选择隐藏层数和多少神经元的标准是什么？ 1个隐藏层中的节点？

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-05-13T02:44:36.913

***有多少隐藏层*？**

具有*零*隐藏层的模型将解析*线性可分*数据。因此，除非您已经知道您的数据不是线性可分的，否则验证这一点并没有什么坏处——为什么要使用比任务要求更复杂的模型呢？如果它是线性可分的，那么更简单的技术将起作用，但感知器也可以完成这项工作。

假设您的数据确实需要通过非线性技术进行分离，那么***总是从一个隐藏层开始***。几乎可以肯定，这就是您所需要的。如果您的数据可以使用 MLP 进行分离，那么该 MLP 可能只需要一个隐藏层。这有理论上的理由，但我的理由纯粹是经验性的：使用单隐藏层 MLP 解决了许多困难的分类/回归问题，但我不记得遇到过任何用于成功建模数据的多隐藏层 MLP - - 无论是在 ML 公告板、ML 教科书、学术论文等上。它们当然存在，但证明使用它们的情况在经验上非常罕见。

***隐藏层有多少个节点？***

来自 MLP 学术文献。我自己的经验等，我收集并经常依赖几个经验法则（*RoT*），我也发现它们是可靠的指南（即，指导是准确的，即使不是，它通常很清楚下一步该做什么）：

基于改进收敛的[RoT ：](http://en.wikibooks.org/wiki/Artificial_Neural_Networks/Neural_Network_Basics)

> 当您开始构建模型时，会在隐藏层中的**更多节点方面犯错。**

为什么？首先，隐藏层中的一些额外节点不太可能造成任何伤害——您的 MLP 仍然会收敛。另一方面，隐藏层中的节点太少会阻碍收敛。这样想，额外的节点提供了一些额外的容量——在迭代（训练或模型构建）期间用于存储/释放信号到网络的额外权重。其次，如果您从隐藏层中的其他节点开始，那么以后（在迭代过程中）很容易修剪它们。这很常见，并且有一些诊断技术可以帮助您（例如，Hinton 图，它只是权重矩阵的直观描述，权重值的“热图”）。

基于输入层大小和输出层大小的[RoT ：](ftp://ftp.sas.com/pub/neural/FAQ3.html#A_hu)

> *经验法则是这个[隐藏]层的大小介于输入层大小...和输出层大小...之间。*
> 
> *为了计算隐藏节点的数量，我们使用以下一般规则：（输入数量 + 输出数量）x 2/3*

基于主成分的[RoT ：](ftp://ftp.sas.com/pub/neural/FAQ3.html#A_hu)

> *通常，我们指定与捕获输入数据集 70-90% 方差所需的维度 [主要组件] 一样多的隐藏节点*。

然而，[NN FAQ](ftp://ftp.sas.com/pub/neural/FAQ3.html#A_hu)作者称这些规则为“无稽之谈”（字面意思），因为它们：忽略了训练实例的数量、目标中的噪声（响应变量的值）以及特征空间的复杂性。

在他看来（在我看来，他总是知道自己在说什么），*根据您的 MLP 是否包含某种形式的正则化或提前停止来选择隐藏层中的神经元数量*。

***优化隐藏层中神经元数量的唯一有效技术：***

在你的模型构建过程中，痴迷地测试；测试将揭示“不正确”网络架构的特征。例如，如果您从具有由少量节点组成的隐藏层的 MLP 开始（根据测试结果，您将根据需要逐渐增加），您的训练和泛化误差都将由偏差和欠拟合引起。

然后增加隐藏层中的节点数，一次一个，直到泛化误差开始增加，这一次是由于过拟合和高方差。

* * *

在实践中，我这样做：

**输入层**：我的数据变量的大小（我的模型中的特征数量）+ 1 用于偏置节点，当然不包括响应变量

**输出层**：由我的模型确定：回归（一个节点）与分类（节点数等于类数，假设为softmax）

**隐藏层**：*开始*，*一个隐藏层*节点数等于输入层的大小。“理想”大小更可能更小（即，输入层中的数字和输出层中的数字之间的一些节点数）而不是更大 - 再次，这只是一个经验观察，并且大部分这个观察是我自己的经验。如果项目证明需要额外的时间是合理的，那么我从一个由少量节点组成的单个隐藏层开始，然后（正如我上面解释的）我将节点添加到隐藏层，一次一个，同时计算泛化误差、训练误差、偏差和方差。当泛化误差下降并且在它再次开始增加之前，此时的节点数量是我的选择。见下图。

![在此处输入图像描述](../Images/1483773aea7253c4e087e9e31934d652.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T17:31:25.820

选择隐藏层中的神经元数量以及选择神经网络中隐藏层的数量非常困难。

通常，对于大多数应用程序，一个隐藏层就足够了。此外，该隐藏层中的神经元数量应介于输入数量（在您的示例中为 10）和输出数量（在您的示例中为 5）之间。

但是选择神经元和隐藏层数量的最佳方法是实验。用不同数量的隐藏层和隐藏神经元训练几个神经网络，并使用[交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)测量这些网络的性能。您可以坚持使用产生最佳性能网络的数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-03T18:57:47.757

要自动为每一层选择最佳层数和最佳神经元数，您可以使用**[遗传优化](https://en.wikipedia.org/wiki/Genetic_algorithm)**。

关键部分是：

1.  **Chromosome**：定义每个隐藏层中有多少个单元的向量（例如，[20,5,1,0,0] 表示第一个隐藏层中有 20 个单元，第二个隐藏层中有 5 个单元，...，缺少第 4 层和第 5 层）。您可以设置要尝试的最大层数以及每层中的最大单元数。您还应该限制染色体的生成方式。例如，不应生成 [10, 0, 3, ... ]，因为缺失层（'3,...'）之后的任何单元都是不相关的，并且会浪费评估周期。
2.  **适应度函数**：返回由给定染色体定义的网络的交叉验证集中最低训练误差的倒数的函数。如果您想找到“最小/最快但最准确的网络”，您还可以包括总单位数或计算时间。

您还可以考虑：

*   **修剪**：从大型网络开始，然后减少层和隐藏单元，同时跟踪交叉验证集的性能。
*   **成长**：从一个非常小的网络开始，然后添加单元和层，并再次跟踪 CV 集的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-09T00:29:46.123

最近有关于这个[https://arxiv.org/abs/1809.09953](https://arxiv.org/abs/1809.09953)的理论工作。假设您使用 RELU MLP，所有隐藏层都具有相同数量的节点，并且您使用神经网络逼近的损失函数和真实函数遵循一些技术特性（在论文中），您可以选择深度为顺序 $\log(n)$ 和隐藏层的宽度顺序为 $n^{d/(2(\beta+d))}\log^2(n)$。这里 $n$ 是您的样本大小，$d$ 是输入向量的维度，$\beta$ 是您的真实函数的平滑度参数。由于 $\beta$ 是未知的，您可能希望将其视为超参数。

这样做可以保证随着样本大小的函数收敛到 $1$ 的概率，您的近似误差作为样本大小的函数收敛到 $0$。他们给出率。请注意，这不能保证是“最佳”架构，但它至少可以为您提供一个很好的起点。此外，我自己的经验表明，像 dropout 这样的事情在实践中仍然可以提供帮助。

# sql - 将一个字段内连接到表中的多个列

> ID：10565870
> 
> 赞同：3
> 
> 时间：2012-05-12T17:18:18.727
> 
> 标签：sql, sql-server-2008

我有保存买家个人数据的 SQL 表，例如 FirstName、LastName、OGCard；OGCard - 表示客户个人卡号的字段。

接下来我有一个名为 Cards 的表，其中包含有关以下列格式购买的十个项目的数据：OGCard、Item1ID、...、Item10ID、Item1Quantity、...、Item10Quantity

在表 Items 我得到了这样的结构 ItemID, ItemName

我想从 CardNumber 获得所有购买

我想我应该做这样的事情

```
SELECT Buyers.FirstName, Items.Name, Cards.Item1Quantity
FROM Buyers
INNER JOIN Cards ON Buyers.OGCard=Cards.OGCard
INNER JOIN Items ON Cards.Item1ID=Items.ItemName
WHERE OGCard=13451 
```

通过这种方式，我可以看到第一项的名称和数量。但是我不能对列 Item2ID 执行相同的连接，依此类推。你能给我一些解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T17:32:43.833

在不知道如何设置 Items 表的情况下，您可以执行以下操作：

```
SELECT Buyers.FirstName
     , Items.Name
     , Cards.Item1Quantity 
     , C2.Item2Quantity
     , C3.Item3Quantity
     , C4.Item4Quantity
     , C5.Item5Quantity
     , C6.Item6Quantity
     , C7.Item7Quantity
     , C8.Item8Quantity
     , C9.Item9Quantity
     , C10.Item10Quantity 
  FROM Buyers 
 INNER JOIN Cards ON Buyers.OGCard=Cards.OGCard 
 INNER JOIN Items ON Cards.Item1ID=Items.ItemName  
  LEFT OUTER JOIN Items ON Cards.Item2D=Items.ItemName C2
  LEFT OUTER JOIN Items ON Cards.Item3D=Items.ItemName C3
  LEFT OUTER JOIN Items ON Cards.Item4D=Items.ItemName C4
  LEFT OUTER JOIN Items ON Cards.Item5D=Items.ItemName C5
  LEFT OUTER JOIN Items ON Cards.Item6D=Items.ItemName C6
  LEFT OUTER JOIN Items ON Cards.Item7D=Items.ItemName C7
  LEFT OUTER JOIN Items ON Cards.Item8D=Items.ItemName C8
  LEFT OUTER JOIN Items ON Cards.Item9D=Items.ItemName C9
  LEFT OUTER JOIN Items ON Cards.Item10D=Items.ItemName C10
 WHERE OGCard=13451 
```

如果没有表格布局，这只是一个猜测，我猜如果这可行，您需要查看架构的布局方式......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T17:21:42.240

使用别名可以将同一个表连接两次：

```
SELECT
    Buyers.FirstName,
    Items1.Name, Cards.Item1Quantity,
    Items2.Name, Cards.Item2Quantity,
    Items3.Name, Cards.Item3Quantity,
    Items4.Name, Cards.Item4Quantity
FROM Buyers
INNER JOIN Cards ON Buyers.OGCard=Cards.OGCard
INNER JOIN Items AS Items1 ON Cards.Item1ID=Items.ItemName
INNER JOIN Items AS Items2 ON Cards.Item2ID=Items.ItemName
INNER JOIN Items AS Items3 ON Cards.Item3ID=Items.ItemName
INNER JOIN Items AS Items4 ON Cards.Item4ID=Items.ItemName
WHERE OGCard=13451 
```

如果某些`Items_n_ID`s 可能会丢失，您可以使用 a`LEFT JOIN`而不是 an `INNER JOIN`，这样您仍然可以获得当前值的结果。

但是，我强烈建议您规范化您的数据库，而不是采用这种方法。

# clojure - 在 Clojure 中创建惰性序列的非线性减速

> ID：10565874
> 
> 赞同：3
> 
> 时间：2012-05-12T17:18:35.063
> 
> 标签：clojure, lazy-sequences

我实现了一个函数，它将给定输入集合的 n-gram 作为惰性序列返回。

```
(defn gen-ngrams
  [n coll]
  (if (>= (count coll) n)
    (lazy-seq (cons (take n coll) (gen-ngrams n (rest coll)))))) 
```

当我用更大的输入集合调用这个函数时，我希望看到执行时间线性增加。但是，我观察到的时机比这更糟：

```
user> (time (count (gen-ngrams 3 (take 1000 corpus))))
"Elapsed time: 59.426 msecs"
998
user> (time (count (gen-ngrams 3 (take 10000 corpus))))
"Elapsed time: 5863.971 msecs"
9998
user> (time (count (gen-ngrams 3 (take 20000 corpus))))
"Elapsed time: 23584.226 msecs"
19998
user> (time (count (gen-ngrams 3 (take 30000 corpus))))
"Elapsed time: 54905.999 msecs"
29998
user> (time (count (gen-ngrams 3 (take 40000 corpus))))
"Elapsed time: 100978.962 msecs"
39998 
```

`corpus`是一个`Cons`字符串标记。

是什么导致了这种行为，我该如何提高性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T20:36:12.500

我认为您的问题与“（count coll）”有关，它在每次调用 ngram 时遍历 coll。

解决方案是使用内置分区函数：

```
user=> (time (count (gen-ngrams 3 (take 20000 corpus))))
"Elapsed time: 6212.894932 msecs"
19998
user=> (time (count (partition 3 1 (take 20000 corpus))))
"Elapsed time: 12.57996 msecs"
19998 
```

如果对实现感到好奇，请查看分区源[http://clojuredocs.org/clojure_core/clojure.core/partition](http://clojuredocs.org/clojure_core/clojure.core/partition)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:38:46.970

我远非 Clojure 专家，但我认为 cons 函数会导致这个问题。尝试使用 list 代替：

```
(defn gen-ngrams
  [n coll]
  (if (>= (count coll) n)
    (lazy-seq (list (take n coll) (gen-ngrams n (rest coll)))))) 
```

我认为 cons 构造了一个比列表更通用的新 seq，因此速度较慢。

编辑：如果“语料库是字符串标记的缺点”，则尝试将其列为列表...

# shell - 如何用sed一次替换两件事？

> ID：10565877
> 
> 赞同：31
> 
> 时间：2012-05-12T17:19:19.913
> 
> 标签：shell, sed

给定的是字符串：`dog apple orange banana`

我需要做到：`monkey apple cow banana`

那就是没有调用 sed 两次。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-12T17:21:52.953

以下 sed 示例应该可以解决您的问题。sed 允许多个 -e 开关，这允许您一次替换多个东西。

```
sed -e 's/dog/monkey/g' -e 's/orange/cow/g' 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-05-12T17:28:52.007

用于`;`对命令进行排队：

```
sed -e 's/dog/monkey/g;s/orange/cow/g' 
```

# asp.net - 如何组合所有这些 scriptmanager 脚本？

> ID：10565878
> 
> 赞同：2
> 
> 时间：2012-05-12T17:19:52.533
> 
> 标签：asp.net, asp.net-4.0

我在我的页面上运行了 YSlow，它抱怨我的页面上有太多脚本。在使用 Firebug 进行检查时，我发现其中大部分是 Validation 和 ScriptManager 脚本：

![在此处输入图像描述](../Images/c5f504d776b2fdafda50344e785109d1.png)

我如何/我可以将所有这些脚本合二为一吗？其次，当我下载 WebForms.js 的内容时，它根本没有缩小。这是它的内容：

```
function WebForm_PostBackOptions(eventTarget, eventArgument, validation, validationGroup, actionUrl, trackFocus, clientSubmit) {
    this.eventTarget = eventTarget;
    this.eventArgument = eventArgument;
    this.validation = validation;
    this.validationGroup = validationGroup;
    this.actionUrl = actionUrl;
    this.trackFocus = trackFocus;
    this.clientSubmit = clientSubmit;
}
function WebForm_DoPostBackWithOptions(options) {
    var validationResult = true;
    if (options.validation) {
        if (typeof(Page_ClientValidate) == 'function') {
            validationResult = Page_ClientValidate(options.validationGroup);
        }
    }
    if (validationResult) {
        if ((typeof(options.actionUrl) != "undefined") && (options.actionUrl != null) && (options.actionUrl.length > 0)) {
            theForm.action = options.actionUrl;
        }
        if (options.trackFocus) {
            var lastFocus = theForm.elements["__LASTFOCUS"];
            if ((typeof(lastFocus) != "undefined") && (lastFocus != null)) {
                if (typeof(document.activeElement) == "undefined") {
                    lastFocus.value = options.eventTarget;
                }
                else {
                    var active = document.activeElement;
                    if ((typeof(active) != "undefined") && (active != null)) {
                        if ((typeof(active.id) != "undefined") && (active.id != null) && (active.id.length > 0)) {
                            lastFocus.value = active.id;
                        }
                        else if (typeof(active.name) != "undefined") {
                            lastFocus.value = active.name;
                        }
                    }
                }
            }
        }
    }
    if (options.clientSubmit) {
        __doPostBack(options.eventTarget, options.eventArgument);
    }
}
var __pendingCallbacks = new Array();
var __synchronousCallBackIndex = -1;
function WebForm_DoCallback(eventTarget, eventArgument, eventCallback, context, errorCallback, useAsync) {
    var postData = __theFormPostData +
                "__CALLBACKID=" + WebForm_EncodeCallback(eventTarget) +
                "&__CALLBACKPARAM=" + WebForm_EncodeCallback(eventArgument);
    if (theForm["__EVENTVALIDATION"]) {
        postData += "&__EVENTVALIDATION=" + WebForm_EncodeCallback(theForm["__EVENTVALIDATION"].value);
    }
    var xmlRequest,e;
    try {
        xmlRequest = new XMLHttpRequest();
    }
    catch(e) {
        try {
            xmlRequest = new ActiveXObject("Microsoft.XMLHTTP");
        }
        catch(e) {
        }
    }
    var setRequestHeaderMethodExists = true;
    try {
        setRequestHeaderMethodExists = (xmlRequest && xmlRequest.setRequestHeader);
    }
    catch(e) {}
    var callback = new Object();
    callback.eventCallback = eventCallback;
    callback.context = context;
    callback.errorCallback = errorCallback;
    callback.async = useAsync;
    var callbackIndex = WebForm_FillFirstAvailableSlot(__pendingCallbacks, callback);
    if (!useAsync) {
        if (__synchronousCallBackIndex != -1) {
            __pendingCallbacks[__synchronousCallBackIndex] = null;
        }
        __synchronousCallBackIndex = callbackIndex;
    }
    if (setRequestHeaderMethodExists) {
        xmlRequest.onreadystatechange = WebForm_CallbackComplete;
        callback.xmlRequest = xmlRequest;
        // e.g. http:
        var action = theForm.action || document.location.pathname, fragmentIndex = action.indexOf('#');
        if (fragmentIndex !== -1) {
            action = action.substr(0, fragmentIndex);
        }
        if (!__nonMSDOMBrowser) {
            var queryIndex = action.indexOf('?');
            if (queryIndex !== -1) {
                var path = action.substr(0, queryIndex);
                if (path.indexOf("%") === -1) {
                    action = encodeURI(path) + action.substr(queryIndex);
                }
            }
            else if (action.indexOf("%") === -1) {
                action = encodeURI(action);
            }
        }
        xmlRequest.open("POST", action, true);
        xmlRequest.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=utf-8");
        xmlRequest.send(postData);
        return;
    }
    callback.xmlRequest = new Object();
    var callbackFrameID = "__CALLBACKFRAME" + callbackIndex;
    var xmlRequestFrame = document.frames[callbackFrameID];
    if (!xmlRequestFrame) {
        xmlRequestFrame = document.createElement("IFRAME");
        xmlRequestFrame.width = "1";
        xmlRequestFrame.height = "1";
        xmlRequestFrame.frameBorder = "0";
        xmlRequestFrame.id = callbackFrameID;
        xmlRequestFrame.name = callbackFrameID;
        xmlRequestFrame.style.position = "absolute";
        xmlRequestFrame.style.top = "-100px"
        xmlRequestFrame.style.left = "-100px";
        try {
            if (callBackFrameUrl) {
                xmlRequestFrame.src = callBackFrameUrl;
            }
        }
        catch(e) {}
        document.body.appendChild(xmlRequestFrame);
    }
    var interval = window.setInterval(function() {
        xmlRequestFrame = document.frames[callbackFrameID];
        if (xmlRequestFrame && xmlRequestFrame.document) {
            window.clearInterval(interval);
            xmlRequestFrame.document.write("");
            xmlRequestFrame.document.close();
            xmlRequestFrame.document.write('<html><body><form method="post"><input type="hidden" name="__CALLBACKLOADSCRIPT" value="t"></form></body></html>');
            xmlRequestFrame.document.close();
            xmlRequestFrame.document.forms[0].action = theForm.action;
            var count = __theFormPostCollection.length;
            var element;
            for (var i = 0; i < count; i++) {
                element = __theFormPostCollection[i];
                if (element) {
                    var fieldElement = xmlRequestFrame.document.createElement("INPUT");
                    fieldElement.type = "hidden";
                    fieldElement.name = element.name;
                    fieldElement.value = element.value;
                    xmlRequestFrame.document.forms[0].appendChild(fieldElement);
                }
            }
            var callbackIdFieldElement = xmlRequestFrame.document.createElement("INPUT");
            callbackIdFieldElement.type = "hidden";
            callbackIdFieldElement.name = "__CALLBACKID";
            callbackIdFieldElement.value = eventTarget;
            xmlRequestFrame.document.forms[0].appendChild(callbackIdFieldElement);
            var callbackParamFieldElement = xmlRequestFrame.document.createElement("INPUT");
            callbackParamFieldElement.type = "hidden";
            callbackParamFieldElement.name = "__CALLBACKPARAM";
            callbackParamFieldElement.value = eventArgument;
            xmlRequestFrame.document.forms[0].appendChild(callbackParamFieldElement);
            if (theForm["__EVENTVALIDATION"]) {
                var callbackValidationFieldElement = xmlRequestFrame.document.createElement("INPUT");
                callbackValidationFieldElement.type = "hidden";
                callbackValidationFieldElement.name = "__EVENTVALIDATION";
                callbackValidationFieldElement.value = theForm["__EVENTVALIDATION"].value;
                xmlRequestFrame.document.forms[0].appendChild(callbackValidationFieldElement);
            }
            var callbackIndexFieldElement = xmlRequestFrame.document.createElement("INPUT");
            callbackIndexFieldElement.type = "hidden";
            callbackIndexFieldElement.name = "__CALLBACKINDEX";
            callbackIndexFieldElement.value = callbackIndex;
            xmlRequestFrame.document.forms[0].appendChild(callbackIndexFieldElement);
            xmlRequestFrame.document.forms[0].submit();
        }
    }, 10);
}
function WebForm_CallbackComplete() {
    for (var i = 0; i < __pendingCallbacks.length; i++) {
        callbackObject = __pendingCallbacks[i];
        if (callbackObject && callbackObject.xmlRequest && (callbackObject.xmlRequest.readyState == 4)) {
            if (!__pendingCallbacks[i].async) {
                __synchronousCallBackIndex = -1;
            }
            __pendingCallbacks[i] = null;
            var callbackFrameID = "__CALLBACKFRAME" + i;
            var xmlRequestFrame = document.getElementById(callbackFrameID);
            if (xmlRequestFrame) {
                xmlRequestFrame.parentNode.removeChild(xmlRequestFrame);
            }
            WebForm_ExecuteCallback(callbackObject);
        }
    }
}
function WebForm_ExecuteCallback(callbackObject) {
    var response = callbackObject.xmlRequest.responseText;
    if (response.charAt(0) == "s") {
        if ((typeof(callbackObject.eventCallback) != "undefined") && (callbackObject.eventCallback != null)) {
            callbackObject.eventCallback(response.substring(1), callbackObject.context);
        }
    }
    else if (response.charAt(0) == "e") {
        if ((typeof(callbackObject.errorCallback) != "undefined") && (callbackObject.errorCallback != null)) {
            callbackObject.errorCallback(response.substring(1), callbackObject.context);
        }
    }
    else {
        var separatorIndex = response.indexOf("|");
        if (separatorIndex != -1) {
            var validationFieldLength = parseInt(response.substring(0, separatorIndex));
            if (!isNaN(validationFieldLength)) {
                var validationField = response.substring(separatorIndex + 1, separatorIndex + validationFieldLength + 1);
                if (validationField != "") {
                    var validationFieldElement = theForm["__EVENTVALIDATION"];
                    if (!validationFieldElement) {
                        validationFieldElement = document.createElement("INPUT");
                        validationFieldElement.type = "hidden";
                        validationFieldElement.name = "__EVENTVALIDATION";
                        theForm.appendChild(validationFieldElement);
                    }
                    validationFieldElement.value = validationField;
                }
                if ((typeof(callbackObject.eventCallback) != "undefined") && (callbackObject.eventCallback != null)) {
                    callbackObject.eventCallback(response.substring(separatorIndex + validationFieldLength + 1), callbackObject.context);
                }
            }
        }
    }
}
function WebForm_FillFirstAvailableSlot(array, element) {
    var i;
    for (i = 0; i < array.length; i++) {
        if (!array[i]) break;
    }
    array[i] = element;
    return i;
}
var __nonMSDOMBrowser = (window.navigator.appName.toLowerCase().indexOf('explorer') == -1);
var __theFormPostData = "";
var __theFormPostCollection = new Array();
function WebForm_InitCallback() {
    var count = theForm.elements.length;
    var element;
    for (var i = 0; i < count; i++) {
        element = theForm.elements[i];
        var tagName = element.tagName.toLowerCase();
        if (tagName == "input") {
            var type = element.type;
            if ((type == "text" || type == "hidden" || type == "password" ||
                ((type == "checkbox" || type == "radio") && element.checked)) &&
                (element.id != "__EVENTVALIDATION")) {
                WebForm_InitCallbackAddField(element.name, element.value);
            }
        }
        else if (tagName == "select") {
            var selectCount = element.options.length;
            for (var j = 0; j < selectCount; j++) {
                var selectChild = element.options[j];
                if (selectChild.selected == true) {
                    WebForm_InitCallbackAddField(element.name, element.value);
                }
            }
        }
        else if (tagName == "textarea") {
            WebForm_InitCallbackAddField(element.name, element.value);
        }
    }
}
function WebForm_InitCallbackAddField(name, value) {
    var nameValue = new Object();
    nameValue.name = name;
    nameValue.value = value;
    __theFormPostCollection[__theFormPostCollection.length] = nameValue;
    __theFormPostData += WebForm_EncodeCallback(name) + "=" + WebForm_EncodeCallback(value) + "&";
}
function WebForm_EncodeCallback(parameter) {
    if (encodeURIComponent) {
        return encodeURIComponent(parameter);
    }
    else {
        return escape(parameter);
    }
}
var __disabledControlArray = new Array();
function WebForm_ReEnableControls() {
    if (typeof(__enabledControlArray) == 'undefined') {
        return false;
    }
    var disabledIndex = 0;
    for (var i = 0; i < __enabledControlArray.length; i++) {
        var c;
        if (__nonMSDOMBrowser) {
            c = document.getElementById(__enabledControlArray[i]);
        }
        else {
            c = document.all[__enabledControlArray[i]];
        }
        if ((typeof(c) != "undefined") && (c != null) && (c.disabled == true)) {
            c.disabled = false;
            __disabledControlArray[disabledIndex++] = c;
        }
    }
    setTimeout("WebForm_ReDisableControls()", 0);
    return true;
}
function WebForm_ReDisableControls() {
    for (var i = 0; i < __disabledControlArray.length; i++) {
        __disabledControlArray[i].disabled = true;
    }
}
function WebForm_FireDefaultButton(event, target) {
    if (event.keyCode == 13) {
        var src = event.srcElement || event.target;
        if (src &&
            ((src.tagName.toLowerCase() == "input") &&
             (src.type.toLowerCase() == "submit" || src.type.toLowerCase() == "button")) ||
            ((src.tagName.toLowerCase() == "a") &&
             (src.href != null) && (src.href != "")) ||
            (src.tagName.toLowerCase() == "textarea")) {
            return true;
        }
        var defaultButton;
        if (__nonMSDOMBrowser) {
            defaultButton = document.getElementById(target);
        }
        else {
            defaultButton = document.all[target];
        }
        if (defaultButton && typeof(defaultButton.click) != "undefined") {
            defaultButton.click();
            event.cancelBubble = true;
            if (event.stopPropagation) event.stopPropagation();
            return false;
        }
    }
    return true;
}
function WebForm_GetScrollX() {
    if (__nonMSDOMBrowser) {
        return window.pageXOffset;
    }
    else {
        if (document.documentElement && document.documentElement.scrollLeft) {
            return document.documentElement.scrollLeft;
        }
        else if (document.body) {
            return document.body.scrollLeft;
        }
    }
    return 0;
}
function WebForm_GetScrollY() {
    if (__nonMSDOMBrowser) {
        return window.pageYOffset;
    }
    else {
        if (document.documentElement && document.documentElement.scrollTop) {
            return document.documentElement.scrollTop;
        }
        else if (document.body) {
            return document.body.scrollTop;
        }
    }
    return 0;
}
function WebForm_SaveScrollPositionSubmit() {
    if (__nonMSDOMBrowser) {
        theForm.elements['__SCROLLPOSITIONY'].value = window.pageYOffset;
        theForm.elements['__SCROLLPOSITIONX'].value = window.pageXOffset;
    }
    else {
        theForm.__SCROLLPOSITIONX.value = WebForm_GetScrollX();
        theForm.__SCROLLPOSITIONY.value = WebForm_GetScrollY();
    }
    if ((typeof(this.oldSubmit) != "undefined") && (this.oldSubmit != null)) {
        return this.oldSubmit();
    }
    return true;
}
function WebForm_SaveScrollPositionOnSubmit() {
    theForm.__SCROLLPOSITIONX.value = WebForm_GetScrollX();
    theForm.__SCROLLPOSITIONY.value = WebForm_GetScrollY();
    if ((typeof(this.oldOnSubmit) != "undefined") && (this.oldOnSubmit != null)) {
        return this.oldOnSubmit();
    }
    return true;
}
function WebForm_RestoreScrollPosition() {
    if (__nonMSDOMBrowser) {
        window.scrollTo(theForm.elements['__SCROLLPOSITIONX'].value, theForm.elements['__SCROLLPOSITIONY'].value);
    }
    else {
        window.scrollTo(theForm.__SCROLLPOSITIONX.value, theForm.__SCROLLPOSITIONY.value);
    }
    if ((typeof(theForm.oldOnLoad) != "undefined") && (theForm.oldOnLoad != null)) {
        return theForm.oldOnLoad();
    }
    return true;
}
function WebForm_TextBoxKeyHandler(event) {
    if (event.keyCode == 13) {
        var target;
        if (__nonMSDOMBrowser) {
            target = event.target;
        }
        else {
            target = event.srcElement;
        }
        if ((typeof(target) != "undefined") && (target != null)) {
            if (typeof(target.onchange) != "undefined") {
                target.onchange();
                event.cancelBubble = true;
                if (event.stopPropagation) event.stopPropagation();
                return false;
            }
        }
    }
    return true;
}
function WebForm_TrimString(value) {
    return value.replace(/^\s+|\s+$/g, '')
}
function WebForm_AppendToClassName(element, className) {
    var currentClassName = ' ' + WebForm_TrimString(element.className) + ' ';
    className = WebForm_TrimString(className);
    var index = currentClassName.indexOf(' ' + className + ' ');
    if (index === -1) {
        element.className = (element.className === '') ? className : element.className + ' ' + className;
    }
}
function WebForm_RemoveClassName(element, className) {
    var currentClassName = ' ' + WebForm_TrimString(element.className) + ' ';
    className = WebForm_TrimString(className);
    var index = currentClassName.indexOf(' ' + className + ' ');
    if (index >= 0) {
        element.className = WebForm_TrimString(currentClassName.substring(0, index) + ' ' +
            currentClassName.substring(index + className.length + 1, currentClassName.length));
    }
}
function WebForm_GetElementById(elementId) {
    if (document.getElementById) {
        return document.getElementById(elementId);
    }
    else if (document.all) {
        return document.all[elementId];
    }
    else return null;
}
function WebForm_GetElementByTagName(element, tagName) {
    var elements = WebForm_GetElementsByTagName(element, tagName);
    if (elements && elements.length > 0) {
        return elements[0];
    }
    else return null;
}
function WebForm_GetElementsByTagName(element, tagName) {
    if (element && tagName) {
        if (element.getElementsByTagName) {
            return element.getElementsByTagName(tagName);
        }
        if (element.all && element.all.tags) {
            return element.all.tags(tagName);
        }
    }
    return null;
}
function WebForm_GetElementDir(element) {
    if (element) {
        if (element.dir) {
            return element.dir;
        }
        return WebForm_GetElementDir(element.parentNode);
    }
    return "ltr";
}
function WebForm_GetElementPosition(element) {
    var result = new Object();
    result.x = 0;
    result.y = 0;
    result.width = 0;
    result.height = 0;
    if (element.offsetParent) {
        result.x = element.offsetLeft;
        result.y = element.offsetTop;
        var parent = element.offsetParent;
        while (parent) {
            result.x += parent.offsetLeft;
            result.y += parent.offsetTop;
            var parentTagName = parent.tagName.toLowerCase();
            if (parentTagName != "table" &&
                parentTagName != "body" && 
                parentTagName != "html" && 
                parentTagName != "div" && 
                parent.clientTop && 
                parent.clientLeft) {
                result.x += parent.clientLeft;
                result.y += parent.clientTop;
            }
            parent = parent.offsetParent;
        }
    }
    else if (element.left && element.top) {
        result.x = element.left;
        result.y = element.top;
    }
    else {
        if (element.x) {
            result.x = element.x;
        }
        if (element.y) {
            result.y = element.y;
        }
    }
    if (element.offsetWidth && element.offsetHeight) {
        result.width = element.offsetWidth;
        result.height = element.offsetHeight;
    }
    else if (element.style && element.style.pixelWidth && element.style.pixelHeight) {
        result.width = element.style.pixelWidth;
        result.height = element.style.pixelHeight;
    }
    return result;
}
function WebForm_GetParentByTagName(element, tagName) {
    var parent = element.parentNode;
    var upperTagName = tagName.toUpperCase();
    while (parent && (parent.tagName.toUpperCase() != upperTagName)) {
        parent = parent.parentNode ? parent.parentNode : parent.parentElement;
    }
    return parent;
}
function WebForm_SetElementHeight(element, height) {
    if (element && element.style) {
        element.style.height = height + "px";
    }
}
function WebForm_SetElementWidth(element, width) {
    if (element && element.style) {
        element.style.width = width + "px";
    }
}
function WebForm_SetElementX(element, x) {
    if (element && element.style) {
        element.style.left = x + "px";
    }
}
function WebForm_SetElementY(element, y) {
    if (element && element.style) {
        element.style.top = y + "px";
    }
} 
```

如何缩小此脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:20:29.730

看看[这个](http://shinkansen.codeplex.com/)使用 .NET 端口的 YUI 脚本和 css 压缩器的项目。我们在我参与的一个项目中使用了类似的东西，结果很好。确保在最小化它之前使用 JSLint 或类似的东西来验证你的 JavaScript，因为非常小的东西可能会搞砸（比如缺少一个结束分号）。

# wcf - 服务需要特定签名

> ID：10565880
> 
> 赞同：0
> 
> 时间：2012-05-12T17:20:09.617
> 
> 标签：wcf, windows-services, soa

我一直在进入 WCF 并注意到无论我下载并尝试什么服务代码，它们都不会出现在服务下的任务管理器中，即使我选择“显示所有用户的进程”也是如此。我想让我的服务在“服务”下可见，并且我希望能够控制名称和描述。因此，当管理员登录到该框时，他们将能够在那里检查以找到它并很容易看到它正在运行或未运行。

当我开始阅读我的 WCF 书时，我只是假设非 IIS 托管的 Windows 服务自然会以这种方式连接到 Windows。有什么我想念的吗？它是像注册表项一样简单，还是服务编程的范例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:28:26.463

您在任务管理器中看到的服务是 Windows 服务 - 无需用户登录即可运行的无 UI 守护程序。这些与 WCF 服务完全不同，WCF 服务是一种通过定义的端点公开功能的方式。不幸的是，IT 世界有许多这样的名称冲突——当人们第一次开始使用一项技术时，这可能会使他们感到困惑

有点令人困惑的是，您还可以在 Windows 服务中托管多个 WCF 服务之一

没有用于查看正在运行的非 IIS 托管服务的 UI（IIS 托管具有 Windows Server AppFabric）。如果你想要这个功能，你必须自己构建它

您可以使用 Visual Studio 中的 Windows 服务项目类型创建 Windows 服务。

WCF 服务需要一个进程来承载它。对于演示，通常使用控制台应用程序。但是，对于生产用途，人们使用 IIS 或 Windows 服务。使用控制台应用程序或 Windows 服务称为自托管。使用 IIS 称为 IIS 或 WAS 托管

[这里](http://msdn.microsoft.com/en-us/library/ms731758.aspx)有一个在 Windows 服务中托管 WCF 的方法

[这里](http://msdn.microsoft.com/en-us/library/ms730158)有一些关于托管选项的一般信息

# javascript - javascript 对象，使用两种不同的调用函数方式查看预期结果

> ID：10565883
> 
> 赞同：0
> 
> 时间：2012-05-12T17:20:32.590
> 
> 标签：javascript, javascript-events

我不明白为什么会这样……

我需要获取`startPoint`在 mousedown 上设置的对象和`e.pageY`来自 mousemove 的电流来进行一些计算。

```
var adjustHeight = {
    change: function(e) {
        console.log(this.startPoint)
        console.log(e.pageY);
    },
};

$('#dragger').mousedown(function(e) {
    e.preventDefault();

    adjustHeight.startPoint = e.pageY;

    $(window).on('mousemove', adjustHeight.change());

    $(window).on('mouseup', function() {
        $(window).off('mousemove', adjustHeight.change())
    });
}) 
```

然而，控制台打印出`startPoint`我所期望但`e.pageY`未定义的对象

但是当我改用这条线时

```
...
    $(window).on('mousemove', adjustHeight.change);

    $(window).on('mouseup', function() {
        $(window).off('mousemove', adjustHeight.change)
    });
... 
```

我得到了`e.pageY`预期的结果，但现在`startPoint`未定义。当我检查`this`指向它的是 DOMWindow ....

我的问题是为什么会发生这种情况，我将如何同时获取对象属性和函数`e`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:28:17.307

```
$(window).on('mousemove', adjustHeight.change()); 
```

正在`adjustHeight.change`立即执行并将*返回值*传递给`.on()`. 由于您没有将任何参数传递给`adjustHeight.change`,`e`将会`undefined`（并且`e.pageY`将不可用）。

* * *

```
$(window).on('mousemove', adjustHeight.change); 
```

正确地将函数传递给`.on`，因此稍后将事件对象传递给处理程序并且您可以访问`e.pageY`. 但是上下文 ( `this`)`adjustHeight`不再存在，它是您将处理程序绑定到的 DOM 元素。`window`在这种情况下，它`window`没有`startPoint`属性。

MDN 文档有[一篇关于`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)（一般而言）的优秀文章，[quirksmode.org 也是如此](http://www.quirksmode.org/js/this.html)（关于事件处理程序）。

* * *

**解决方案**：

传递一个新函数作为处理程序，它调用`adjustHeight.change`并传递`event`对象：

```
$(window).on('mousemove', function(event) {
    adjustHeight.change(event);
}); 
```

或*绑定* `adjustHeight.change`到`adjustHeight`使用[`$.proxy` *^([docs])*](http://api.jquery.com/jQuery.proxy/)：

```
$(window).on('mousemove', $.proxy(adjustHeight.change, adjustHeight)); 
```

由于您还想稍后取消绑定处理程序，您应该将其分配给变量或使用[命名空间事件*^([docs])*](http://docs.jquery.com/Namespaced_Events)。

例子：

```
$(window).on('mousemove.dragger', $.proxy(adjustHeight.change, adjustHeight));

$(window).on('mouseup.dragger', function() {
    // removes both, the mousemove and mousup event handlers
    $(window).off('.dragger');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:30:28.223

首先，这是错误的：

```
$(window).on('mousemove', adjustHeight.change()); 
```

然后，默认情况下`change()`不绑定`adjustHeight`。您必须执行以下操作：

```
$(window).on('mousemove', function() {
    adjustHeight.change();
}); 
```

或者，在现代浏览器中：

```
$(window).on('mousemove', adjustHeight.change.bind(adjustHeight)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T18:09:11.760

...

```
$(window).on('mousemove', adjustHeight.change);

$(window).on('mouseup', function() {
    $(window).off('mousemove', adjustHeight.change)
}); 
```

...

（行：3）

```
console.log("start:" + adjustHeight.startPoint) 
```

# c++ - 错误 /var/tmp/kdecache 属于 uid 1000 而不是 uid 0

> ID：10565885
> 
> 赞同：2
> 
> 时间：2012-05-12T17:20:45.890
> 
> 标签：c++, qt, netbeans, segmentation-fault, kde

我正在使用 Kubuntu 12.04 中的 NetBeans 7.1 编写 Qt 4.8 程序（[http://code.google.com/p/image-feature-detector/](http://code.google.com/p/image-feature-detector/)）（尽管在 Kubuntu 11.10 中也会发生同样的情况），我感到很抓狂当我尝试运行已编译的可执行文件时出错。该程序编译并完美运行，但突然有一天，在正确编译后，我尝试运行它时出现此错误。

如果我使用以下命令运行可执行文件，这就是我得到的`sudo`：

```
error /var/tmp/kdecache-myuser is owned by uid 1000 instead of uid 0 
```

如果我在没有得到的情况下运行可执行文件`sudo`：

```
Segmentation fault (core dumped) 
```

如果我用 运行可执行文件`kdesudo`，在提示密码出现窗口后，什么也没有发生。

如果我调试程序，调试会在到达 NetBeans 显示给我的程序反汇编部分的第二行的任何源代码行之前停止：

```
_ZN15QAbstractButton10setCheckedEb()
Stops here->_ZN15QAbstractButton10setCheckedEb+22: mov    0x8(%rdi),%rbp
_ZN15QAbstractButton10setCheckedEb+26: mov    %esi,%r12d
_ZN15QAbstractButton10setCheckedEb+29: movzbl 0x214(%rbp),%eax
_ZN15QAbstractButton10setCheckedEb+36: test   $0x1,%al
_ZN15QAbstractButton10setCheckedEb+38: je     0x7ffff74a10d0 <_ZN15QAbstractButton10setCheckedEb+192>
_ZN15QAbstractButton10setCheckedEb+44: mov    %eax,%edx
_ZN15QAbstractButton10setCheckedEb+46: shr    %dl
_ZN15QAbstractButton10setCheckedEb+48: and    $0x1,%edx
_ZN15QAbstractButton10setCheckedEb+51: cmp    %sil,%dl
_ZN15QAbstractButton10setCheckedEb+54: je     0x7ffff74a10d0 <_ZN15QAbstractButton10setCheckedEb+192>
_ZN15QAbstractButton10setCheckedEb+60: test   %sil,%sil
_ZN15QAbstractButton10setCheckedEb+63: je     0x7ffff74a1100 <_ZN15QAbstractButton10setCheckedEb+240>
_ZN15QAbstractButton10setCheckedEb+69: mov    %rsp,%rdi
_ZN15QAbstractButton10setCheckedEb+72: mov    %rbx,(%rsp)
_ZN15QAbstractButton10setCheckedEb+76: callq  0x7ffff70bd220 <_ZN11QMetaObject8addGuardEPP7QObject@plt>
_ZN15QAbstractButton10setCheckedEb+81: movzbl 0x214(%rbp),%eax
_ZN15QAbstractButton10setCheckedEb+88: mov    %r12d,%edx
_ZN15QAbstractButton10setCheckedEb+91: and    $0x1,%edx
_ZN15QAbstractButton10setCheckedEb+94: add    %edx,%edx
_ZN15QAbstractButton10setCheckedEb+96: and    $0xfffffffd,%eax
_ZN15QAbstractButton10setCheckedEb+99: or     %edx,%eax
_ZN15QAbstractButton10setCheckedEb+101: test   $0x20,%al
_ZN15QAbstractButton10setCheckedEb+103: mov    %al,0x214(%rbp)
_ZN15QAbstractButton10setCheckedEb+109: je     0x7ffff74a10e8 <_ZN15QAbstractButton10setCheckedEb+216>
_ZN15QAbstractButton10setCheckedEb+111: mov    %rbp,%rdi
_ZN15QAbstractButton10setCheckedEb+114: callq  0x7ffff749f9f0
_ZN15QAbstractButton10setCheckedEb+119: cmpq   $0x0,(%rsp) 
```

我进行了实验并将所有权更改`/var/tmp/kdecache-myuser/`为`root`（uid 0）。然后我运行我的可执行文件，`sudo`我得到一个“分段错误”错误，就像我在没有`sudo`. 另外，当我更改原始文件夹的权限时，`/var/tmp/kdecache-looksLikeMd5Number/`会创建一个具有权限的新文件夹。`myuser``/var/tmp/kdecache-myuser/`

我很感激任何关于如何解决这个让我发疯的错误的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T15:46:19.273

这不是一个答案，但它可能是重现您的问题的简单方法，同时证明这不是您自己的代码的问题。（你的问题的标题是我关注的地方：“错误：“/var/tmp/kdecache-your_user”归 uid 1000 而不是 uid 0 拥有。）

我认为您可以使用 kdialog（Ubuntu 上的包 kdebase-bin 的一部分）来复制此错误。我可以这样做，我希望找到一个解决方案（这就是我遇到你的问题的方式）。

脚步：

1.  打开一个终端
2.  sudo apt-get install kdebase-bin
3.  仍在终端中，输入：

    `kdialog --error "blah blah blah."`

4.  预期结果：以普通用户身份执行此 kdialog 时没有错误。这就是我的实际结果。

5.  sudo -s (输入你的密码)
6.  重复上面的命令：

    `kdialog --error "blah blah blah."`

7.  预期结果 - 它应该可以正常工作。但是，您可能会看到与您的问题相同的错误。

这是我的实际结果：

```
$ kdialog --error "blah blah blah"
$ sudo -s
root> kdialog --error "blah blah blah"
Error: "/var/tmp/kdecache-computeruser" is owned by uid 1000 instead of uid 0. 
```

您甚至可能会看到更多这样的错误。我已经通过各种 kdialog 测试得到了这些，就像上面的测试一样。

```
Error: "/var/tmp/kdecache-your_user" is owned by uid 1000 instead of uid 0.
Error: "/tmp/kde-your_user" is owned by uid 1000 instead of uid 0.
Error: "/tmp/ksocket-your_user" is owned by uid 1000 instead of uid 0.
kdeinit4: Shutting down running client.
Connecting to deprecated signal QDBusConnectionInterface::serviceOwnerChanged(QString,QString,QString)
Error: "/tmp/ksocket-your_user" is owned by uid 1000 instead of uid 0.
Error: "/tmp/kde-your_user" is owned by uid 1000 instead of uid 0.
QDBusConnection: session D-Bus connection created before QCoreApplication. Application may misbehave.
QDBusConnection: session D-Bus connection created before QCoreApplication. Application may misbehave.
Error: "/var/tmp/kdecache-your_user" is owned by uid 1000 instead of uid 0.
kbuildsycoca4 running...
Error: "/var/tmp/kdecache-your_user" is owned by uid 1000 instead of uid 0.
Error: "/var/tmp/kdecache-your_user" is owned by uid 1000 instead of uid 0.
QDBusConnection: session D-Bus connection created before QCoreApplication. Application may misbehave.
QDBusConnection: session D-Bus connection created before QCoreApplication. Application may misbehave.
Error: "/var/tmp/kdecache-your_user" is owned by uid 1000 instead of uid 0.
Home directory /home/your_user not ours. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:28:30.863

哦，这个错误是一个愚蠢的错误。它在我的代码中，而不是在 KDE 中（是的，我们总是倾向于认为“这不是我的错！”......）而且它与`su`特权无关。正如我所怀疑的，它与指针有关。我只是想使用一个`null`指针函数，正是`setChecked()`来自`QAbstractdButton`实例的函数。是的，完全 -.- ... 程序编译正确，但是通过运行它，我得到了一个`Segmentation fault`，合乎逻辑的。

有趣的是，如果我使用`sudo`:运行程序会出现错误`error /var/tmp/kdecache is owned by uid 1000 instead of uid 0`。目前，如果我使用 运行程序，我会在控制台上收到相同的错误`sudo`，但之后程序运行正常。

# c# - SaveFileDialog CLI / CLR / C# 中的非标准文件扩展名

> ID：10565888
> 
> 赞同：1
> 
> 时间：2012-05-12T17:20:56.540
> 
> 标签：c#, c++-cli, command-line-interface

我正在使用 CLI/CLR 和非托管代码，但这个问题与 CLI/CLR 部分有关，我观察到与 c# 代码相同的行为。

我正在尝试使用不符合标准文件扩展名规则的旧文件名保存文件。文件扩展名是“-C2.txt”，不幸的是，当我使用 SaveFileDialog::Filter 方法时，文件名不包含“-C2”部分。SaveFileDialog 中是否有解决方法可以让我这样做？

```
SaveFileDialog^ cDlg = gcnew SaveFileDialog;
cDlg->Filter = "csv file (*.csv)|*.csv|-C2.txt file (*-C2.txt)|*-C2.txt|All Files (*.*)|*.*"; 
```

例子：

1.  在 SaveFileDialog 框中，我选择了一个现有文件“File01.csv”，然后将其放置在 SaveFileDialog 框中的现有“文件名：”文本框中。

2.  listView 框仅显示那些适合过滤器的文件，例如仅显示 *-C2.txt 文件而不显示 *.txt 文件。

3.  但是，我将“另存为类型：”组合框更改为“-C2.txt”，新文件名是“file01.txt”而不是“file01-C2.txt”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:57:38.233

不，没有办法让对话框为您执行此操作。正如 Jeff Mercado 正确指出的那样“`-ct.txt`不是扩展，`.txt`部分是......”。

我可以为您提供的最佳解决方案是自己更改选定的文件路径，就像这样

```
string strFullPath = FileBrowser.Filename; // Has your "SomeFile.txt
string[] strTmpArr = strFullPath.Split('.');
strFullPath = String.Format("{0}-C2.txt", strTmpArr[0]); 
```

请注意，这假设您没有“。” 文件路径中的任何其他位置。你不能使用`Path.ChangeExtension()`你`-C2.txt`会做的`.-C2.txt`。

我希望这有帮助。

# c# - 具有多种不同类型的值的列表/数组

> ID：10565890
> 
> 赞同：-2
> 
> 时间：2012-05-12T17:21:11.880
> 
> 标签：c#, types, casting

我需要暂时将多个值存储在列表或数组中。这些值是多种类型，如字符串、整数、日期时间等。

我有两个选择：

选项 1：

声明一个对象类型的数组，如下所示：

```
object[] values; 
```

选项 2：

为接口声明数组并为要保存的每种类型实现自己的类。

```
interface IType
{
}

IType[] values;

class StringValue : IType
{
    public string StringValue { get; set; }  // not declared in interface!
}

class IntValue : IType
{
    public int IntValue { get; set; }  // not declared in interface!
} 
```

**问题：**

每个实施选项的性能优势和/或影响是什么？据我所知（或 quessing），boxinq 在使用`object[]`.

选项二呢？至少使用`StringValue`或`IntValue`属性需要更多代码，必须确定第一个类型，`IType`必须强制转换为 StringValue 或 IntValue 等...

使用对性能有这么大的影响`object[]`吗，我真的应该考虑一下选项 2 之类的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:41:14.890

您提出的类`IntValue`本质上是一个整数......它将它封装在一个对象中，以便它可以参与一个对象[]。我预计这种情况不会*提高*性能，并且根据您的实现，它可能比编译器实现的装箱更糟糕。

话虽如此，我同意评论者的观点，即您的努力可能更好地集中在改进代码的其他领域。在极少数情况下，拳击开销将成为最重要的关注领域。

我确实遇到了一个场景（使用许多可能是 int、float 或 double 的数字），其中装箱对用户体验很重要。[我使用表达式树](https://stackoverflow.com/questions/4039694/generic-c-sharp-code-and-the-plus-operator/8812486#8812486)解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:42:06.753

我认为不会对性能产生太大影响。如果您使用 object[] _objects，则用于查找对象类型的反射可能会减慢它的速度。.GetType() 函数。

# jquery - $each 的 jQuery 弹出窗口分开？

> ID：10565892
> 
> 赞同：1
> 
> 时间：2012-05-12T17:21:37.290
> 
> 标签：jquery, popup, jquery-hover

谁能解释为什么这些弹出窗口一起显示而不是单独显示？

我的意图是弹出窗口仅在相邻推文悬停时显示。

[http://jsfiddle.net/P2FsR/](http://jsfiddle.net/P2FsR/)

```
 var twitterURL = "http://search.twitter.com/search.json?q=%23CM0655";
    function twitterSearch() { // Create the weather function   
        $.ajax({
        url: twitterURL, //http request string for the weather service
        dataType: "jsonp",                                                                                                  
        success: function(JSON) {                      // If successful parse the JSON data
            $('#twitterSearch').html("");
            $.each(JSON.results, function(i,tweet){
                    var tweeterID  = tweet.from_user_id;
                    var dateFormat = tweet.created_at;
                    var newDate    = dateFormat.replace('+0000', '');
                    var title      = 'title="Tweeted from"';
                    var id         = tweet.id;
                    var locData    = tweet.geo;
                    getCordsData(locData);

    $(function() {
    $('#twitterSearch li').hover(function(e) {
        $('div#pop-up').show();

    }, function() {
        $('div#pop-up').hide();
    });

    $('#twitterSearch').mousemove(function(e) {
        $("div#pop-up");
    });

});

                    $('#twitterSearch').append('<li id="tweet' + id + '" class="tweet"><img class="tweetImage" src="'+ tweet.profile_image_url +'" height="35" width="35" /> <a class="tweetLink" href="http://twitter.com/' + tweet.from_user + '" target="_blank">' + tweet.from_user + '</a> on the ' + newDate + ' <br /> tweeted<span id="tweetTextColor">: ' + tweet.text + tweet.geo +'</span></li><div id="pop-up"><p>' + tweet.from_user + '</p><div>');
            });
        //alert("Ajax text");
        setTimeout(twitterSearch, 10000);

        }
        }); // End of ajax
     } // End of function

    function getCordsData(data){
        if(data == null){
            data = "No location data found!";
            //$('#pop-up').append('<p>Cow</p>');
            //alert(data);
        }else{
            var long = data['coordinates'][0];
            var lat = data['coordinates'][1];
            $('#pop-up').html($('#pop-up').html() + "long:" + long + "<br />Lat:" + lat);
            //alert("long:" + long + "Lat:" + lat);
        }
    }

         twitterSearch(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:27:18.560

您应该在每个 li 和[$(this).next()](http://jqapi.com/#p=next)`$(this)`的悬停上使用来访问每个 div#popup 这是下一个元素是 li

[演示小提琴](http://jsfiddle.net/dhirajbodicherla/cDTWg/)

希望这可以帮助

PS：我只是编辑了悬停功能，希望你能对其余部分做同样的事情

# c# - 在 Python 中解密使用 .NET 加密的字符串

> ID：10565896
> 
> 赞同：10
> 
> 时间：2012-05-12T17:21:47.543
> 
> 标签：c#, .net, python, string, encryption

我正在尝试使用 C# 加密字符串并使用 Python 对其进行解密。加密/解密部分按预期工作（即我能够解密我最初加密的字符串）。但是 Python 返回的字符串开头有 2 个额外字节，每个字符用空格分隔。

```
**Original string** (before encryption -- encrypted using C#) = "Something you want to keep private with AES"

**Decrypted string** (using Python) = "��S o m e t h i n g  y o u   w a n t   t o   k e e p   p r i v a t e   w i t h  A E S" 
```

为什么我在字符串的开头得到这两个额外的字节？为什么解密字符串中的所有这些空格？知道为什么吗？

谢谢！

**使用 C# 加密**

```
public static string Encrypt<T>(string value, string password, string salt)
         where T : SymmetricAlgorithm, new()
{
    DeriveBytes rgb = new Rfc2898DeriveBytes(password, Encoding.Unicode.GetBytes(salt));

    SymmetricAlgorithm algorithm = new T();

    byte[] rgbKey = rgb.GetBytes(algorithm.KeySize >> 3);
    byte[] rgbIV = rgb.GetBytes(algorithm.BlockSize >> 3);

    ICryptoTransform transform = algorithm.CreateEncryptor(rgbKey, rgbIV);

    using (MemoryStream buffer = new MemoryStream())
    {
        using (CryptoStream stream = new CryptoStream(buffer, transform, CryptoStreamMode.Write))
        {
            using (StreamWriter writer = new StreamWriter(stream, Encoding.Unicode))
            {
                writer.Write(value);
            }
        }

        return Convert.ToBase64String(buffer.ToArray());
    }
}

string plain = "Something you want to keep private with AES";
string encrypted = CipherUtility.Encrypt<AesManaged>(plain, "password", "salt"); 
```

**使用 Python + pycrypto 解密**

```
import base64, sys
import Crypto.Cipher.AES

password = base64.b64decode('PSCIQGfoZidjEuWtJAdn1JGYzKDonk9YblI0uv96O8s=') # See rgbKey
salt = base64.b64decode('ehjtnMiGhNhoxRuUzfBOXw==') # See rgbIV
aes = Crypto.Cipher.AES.new(password, Crypto.Cipher.AES.MODE_CBC, salt)
text = base64.b64decode('QpHn/fnraLswwI2Znt1xTaBzRtDqO4V5QI78jLOlVsbvaIs0yXMUlqJhQtK+su2hYn28G2vNyLkj0zLOs+RIjElCSqJv1aK/Yu8uY07oAeStqRt4u/DVUzoWlxdrlF0u')

print aes.decrypt(text) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T17:25:40.260

使用 UTF-16 编码将字符串编码为字节。前两个字节是 BOM。然后每个字符被编码为两个字节。

从文档中[`Encoding.Unicode`](http://msdn.microsoft.com/en-us/library/system.text.encoding.unicode.aspx)：

> 使用 little endian 字节顺序获取 UTF-16 格式的编码。

要获取原始字符串，您需要将其从 UTF-16 字节解码回 Unicode 字符串。

```
print aes.decrypt(text).decode('utf-16') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-28T15:19:23.350

```
 def decrypted(self) -> str:
    _pwd = base64.b64decode(self._key)
    _salt = base64.b64decode(self._salt)
    _aes = Crypto.Cipher.AES.new(_pwd, Crypto.Cipher.AES.MODE_CBC, _salt)
    _text = base64.b64decode(self._encrypted_str)
    _decode = _aes.decrypt(_text).decode('utf-16')
    _regex = '[a-zA-Z0-9 +-,\/ ]+'
    return re.findall(_regex, _decode) 
```

正在使用正则表达式

# ios - 获取 NSArray 键值

> ID：10565904
> 
> 赞同：0
> 
> 时间：2012-05-12T17:22:56.967
> 
> 标签：ios, json

我仍然是客观 c 代码（PHP 背景）的菜鸟。所以我正在构建这个连接到网络服务的 iphone 应用程序。到目前为止，我已经设法检索 JSON 结果并通过 SBJson 对其进行解析。但是我的问题是数组看起来或多或少是这样的：

```
MP = {
        name = "Muscle Power";
        desc = "";
        price = "100";
     };
A9 = {
        name = "Armotech 9000";
        desc = "";
        price = "200";
     };
T10 = {
        name = "Titanium 10";
        desc = "";
        price = "300";
      }; 
```

如何获取密钥的值？因为它们是每个项目的代码。计划在 UITableview 中显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:29:37.397

首先，您所指的数据结构是字典，或者`NSDictionary`在 Objective-C 中。尽管许多语言使用该术语`array`来指代对象列表，但[PHP 数组](http://php.net/manual/en/language.types.array.php)是具有键和值的有序映射。

`NSDictionary`提供了一个名为 的方法`allKeys`，它返回`NSArray`字典中的一个键。例如：

```
// Create a dictionary for the purposes of this example.
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
                      @"one", @"key1",
                      @"two", @"key2",
                      nil];
NSLog(@"%@", [dict allKeys]); // => ("key1", "key2") 
```

虽然这个答案并不特定于`SBJson`，但如果我没记错的话 JSON 结果会作为`NSDictionary`该库中的对象返回，因此您应该能够使用`allKeys`. 希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:07:12.263

[您可以使用此处](http://jasarien.com/?p=428)显示的自定义对象 尝试它并让我知道它是否有帮助。

# jquery - 你可以在 jquery ajax 完成函数上使用 $(this) 吗？

> ID：10565906
> 
> 赞同：0
> 
> 时间：2012-05-12T17:23:09.923
> 
> 标签：jquery, ajax, post, request, return

现在，当我从我的 ajax 发布请求中取回数据时，我正在尝试使用 $(this).insertFUnctionNameHere()。我试着做一些测试，比如 $(this).parent().hide(); $(this).slideUp(); 看看它在哪里选择，但它似乎什么也没选择？这是正常的还是我有办法让 $(this) 实际上选择一些东西。

这是我的代码。

```
/*
         * This is the ajax
         */
        $(".reply").on( "submit" , function(){
        // Intercept the form submission
        var formdata = $(this).serialize(); // Serialize all form data
        // Post data to your PHP processing script
        $.post( "/comment.php", formdata, function( data ) {
            // Act upon the data returned, setting it to .success <div>
            $(this).children().slideUp();
            $(this).children('.success').prepend(data);
            $('.hidden').hide();
        });
        return false;
        });
        /*
         * End ajax
         */ 
```

我使用它的网站的链接也在[这里（readysetfail.com）](http://readysetfail.com)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T17:26:06.770

试试这个：

```
$(".reply").on( "submit" , function(){
    var reply = $(this);
    ...
    $.post( "/comment.php", formdata, function( data ) {
        reply.children().slideUp();
        reply.children('.success').prepend(data);
        ...
    });
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:26:35.687

我不知道您是否决定使用 $(this)，但如果没有，我会将引用表单的 jQuery 对象（通过在事件处理程序中使用 $(this) 检索）保存在变量中并在完成函数，如下所示：

```
$(".reply").on( "submit" , function(){
// Intercept the form submission
var formdata = $(this).serialize(); // Serialize all form data
var theForm = $(this);
// Post data to your PHP processing script
$.post( "/comment.php", formdata, function( data ) {
    // Act upon the data returned, setting it to .success <div>
    theForm.children().slideUp();
    theForm.children('.success').prepend(data);
    $('.hidden').hide();
});
return false;
}); 
```

# iphone - 写入相机胶卷时跳过 EXIF 数据

> ID：10565909
> 
> 赞同：2
> 
> 时间：2012-05-12T17:23:44.210
> 
> 标签：iphone, objective-c, ios5, avfoundation, alassetslibrary

我正在使用 ALAssetsLibrary 将任意 UIImage 写入相机胶卷：

```
 NSMutableDictionary exifAttachments = [[NSMutableDictionary alloc] init];
        }

        [exifAttachments setValue:[NSNumber numberWithInt:imgWidth] forKey:(NSString*)kCGImagePropertyExifPixelXDimension]; //OK
        [exifAttachments setValue:[NSNumber numberWithInt:imgHeight] forKey:(NSString*)kCGImagePropertyExifPixelYDimension]; //OK
        [exifAttachments setValue:[NSDate date] forKey:(NSString*)kCGImagePropertyExifDateTimeDigitized]; //NOT OK

    _assetsLibrary writeImageToSavedPhotosAlbum:[img CGImage] metadata:exifAttachments completionBlock:^(NSURL *assetURL, NSError *error) {
            NSLog(@"Big error: %@", [error description]);
        }]; 
```

这适用于某些参数，但所有与相机相关的参数，如“时间数字化”、“白平衡”等都将被忽略。我的代码有问题吗？如何**手动**添加相机特定的 EXIF 元数据？

**[编辑]** 我自己找到了解决方案。对于所有 EXIF 数据，必须添加 child-NSDictionary：

```
 [exifAttachments setObject:[NSMutableDictionary dictionaryWithCapacity:1] forKey:(NSString*)kCGImagePropertyExifDictionary]; 
```

向这个孩子添加数据时，一切正常。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T13:20:03.483

见上面的编辑：

```
[exifAttachments setObject:[NSMutableDictionary dictionaryWithCapacity:1] forKey:(NSString*)kCGImagePropertyExifDictionary]; 
```

# javascript - 如何缩小长语句？

> ID：10565912
> 
> 赞同：1
> 
> 时间：2012-05-12T17:24:03.987
> 
> 标签：javascript, minify

我试过同时使用[Google Closure](http://closure-compiler.appspot.com/home)和[Yahoo's YUI](http://refresh-sf.com/yui/)，但重复的长行并没有被缩小。为了解决这个问题，我添加了：

```
var M = 
{
    m1:  function( html_id, method_call )
    {
        return ( document.getElementById( html_id ).onclick = method_call );
    }
}; 
```

所以而不是写

```
document.getElementById(test).onclik = test; 
```

我可以写

```
M.m1(test,test); 
```

然而，这使得代码难以阅读。有没有我想念的选项可以为我做这件事。Google 或 Yahoo 肯定知道如何自动执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:12:18.027

也许闭包和 YUI 在处理时不够“最佳”。您可以查看[js1k 竞赛](http://js1k.com/)条目以获得一些灵感。

[这篇文章](http://nooshu.com/js1k-javascript-optimisations)概述了您可以手动执行的一些操作。

[这是一个压缩器工具的示例，](http://javascriptcompressor.com/)它在最小化方面可能做得更好（例如闭包或 YUI）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:34:24.070

问题不在于没有缩小长行，而在于“文档”是一个主机对象，其属性名称由 JS 环境固定。缩小器通过用较短的名称重命名变量来工作，但它不能重命名“文档”或其他主机对象的属性。

如果您的大部分代码被这些重复的行占用，您应该将功能包装在一个您在所有这些地方调用的函数中，而不是每次都直接使用“文档”。您的代码的一些示例将有助于更具体地了解如何执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T17:37:19.533

1.  列出您在 JS 中执行的重复操作

2.  定义所有这些函数，在脚本的开头给它们一个自定义名称，并在任何你想要的地方使用这些函数（看看[这里](http://www.yourhtmlsource.com/javascript/functions.html)）

3.  **[在此处](http://www.minifyjavascript.com/)**压缩/缩小您的 JavaScript

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-15T11:15:14.333

它不可读，因为您创建了不可读的变量名，为什么不创建相关的变量名然后编译它。

`document.getElementById`不能重命名，但您可以创建一个返回的函数，该函数`document.getElementById`可以重命名。

```
var getElementById = function(id){
  return document.getElementById(id);
}
var getElementByIdClick = function(id, method_call){
    return getElementById(id).onclick = method_call;
} 
```

这可以编译为

```
function f(h) {
  return document.getElementById(h);
}
function g(h, k) {
  return f(h).onclick = k;
} 
```

或者

```
function f(h){return document.getElementById(h)}function g(h,k){return f(h).onclick=k} 
```

闭包编译器的诀窍是尽可能多地使用变量，这通常不是一个好主意，但闭包非常好，它会决定什么是最好的。

因此，除了将重复出现的代码移动到函数中之外，您还可以将每个“点符号”交换为“方括号符号”，并为每个属性和方法名称使用一个变量。

这是一个极端的例子。

```
var _document=document,getElementById='getElementById', id='test',onclick='onclick',method_call=function(){};
_document[getElementById](id)[onclick] = method_call; 
```

闭包编译器将决定是否使用括号，如果使用它将重命名您的变量。

你可能会得到这个；

```
var a=document,b='getElementById',c='test',d='onclick',e=function(){};
a[b](c)[d]=e; 
```

或者它可能会用点符号替换它并删除所有变量，但至少你已经给了它选项。

```
document.getElementById('test').onclick=function(){} //method_call 
```

`document.getElementById('test')`永远不能编译成这个`a[b](c)`

[闭包编译](http://closure-compiler.appspot.com/)`ADVANCED_OPTIMIZATIONS`选项将重命名函数，但它确实考虑了函数的使用次数。它可能会完全删除该功能而只使用它。`document.getElementById`

# cgpath - 使用 cakeyframeanimation 移动动画

> ID：10565913
> 
> 赞同：-1
> 
> 时间：2012-05-12T17:24:04.043
> 
> 标签：cgpath, cakeyframeanimation

我尝试创建 CAKeyframeAnimation 以移动图像以实现弯曲路径的一半，任何人都可以帮助正确创建它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T14:36:04.113

当然，我对关键帧动画非常熟悉，但你需要描述你想要做什么。

您是否尝试沿着使用 CGPathAddArc 创建的弧线移动图像？您希望图像遵循什么形状，“弯曲路径的一半”是什么意思？

# objective-c - 电子邮件表不能取消？

> ID：10565915
> 
> 赞同：0
> 
> 时间：2012-05-12T17:24:17.523
> 
> 标签：objective-c, cocos2d-iphone

我正在打开电子邮件表以发送文件。它工作得很好，只是我不能回到我的应用程序。

当我点击取消按钮时，它会询问是否删除或保存草稿，并留在那里。它不会返回应用程序页面。

代码：

```
//send email log-------------------------
    NSLog(@"mail");
    [[CCDirector sharedDirector] pause];

    picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    //Fill in the email as you see fit
    NSArray *toRecipients = [NSArray arrayWithObject:@"name@gmail.com"]; 
    [picker setToRecipients:toRecipients];

    NSArray *paths2 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *dataPath = [[paths2 objectAtIndex:0] stringByAppendingPathComponent:@"Test.txt"];
    NSData *data = [NSData dataWithContentsOfFile:dataPath];
    [picker addAttachmentData:data mimeType:@"text/txt" fileName:@"Test.txt"];

    NSString *emailBody = @"Test   ";
    [picker setMessageBody:emailBody isHTML:NO];
    [picker setSubject:@"hardware test ##   "];

    //display the view
    [[[CCDirector sharedDirector] openGLView] addSubview:picker.view];
    [[CCDirector sharedDirector] stopAnimation]; 
```

**编辑：**

我在这里添加了答案中建议的函数，当我点击取消时，他调用了该函数，但它保留在该表中。我不得不说我使用的是 cclayer (cocos2d)，所以该层定义为：

```
@interface HelloWorldLayer : CCLayer< MFMailComposeViewControllerDelegate> 
```

还有什么建议吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T17:29:44.520

您必须实现委托方法

```
- (void)mailComposeController:(MFMailComposeViewController*)controller
        didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
```

并在那里关闭视图控制器：

```
[picker dismissViewControllerAnimated:YES completion:^{}]; 
```

更新：

```
- (void)mailComposeController:(MFMailComposeViewController*)controller
            didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error {
    [picker dismissViewControllerAnimated:YES completion:^{}];
} 
```

# java - 堆栈上 this 和参数的 Java 字节码排序

> ID：10565921
> 
> 赞同：7
> 
> 时间：2012-05-12T17:24:34.027
> 
> 标签：java, parameters, jvm, stack, bytecode

在java字节码中，为什么接收者首先被推入堆栈，然后是所有参数？我似乎记得它与效率有关。

对于方法调用和设置字段都是如此。

方法调用

```
class X {

    int p(int a) {
        //Do something
    }
    int main() {
        int ret = p(1);
    }

} 
```

主要方法编译为：

```
aload_0 // Load this onto the stack
iconst_1 // Load constant 1 onto the stack
invokevirtual <int p(int)> from class X 
```

设置字段：

```
class X {
    int x;
    int main() {
        x = 1;
    }

} 
```

主要方法编译为：

```
aload_0 // Load this onto the stack
iconst_1 // Load constant 1 onto the stack
putfield <int x> from class X 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:42:16.170

你是在问为什么它被推？在这两种情况下，您都在访问属于类实例的东西，因此`this`必须是该过程的一部分。

你问为什么先推送？只是Java约定。`this`我想不管后面有多少事情，总是先拥有是很方便的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:40:07.640

先推有优势

*   目标方法可以使用更密集的“aload0”字节码（比在参数列表中更晚的情况要小，并且必须使用 aload 字节码的参数版本。因为“this”经常在用于字段和方法访问的方法中引用，它导致了真正的代码密度提高。
*   一个经常做的级联方法发送像“foo.bar().baz()”。当 bar() 返回时，如果您像在 Java 中那样安排事情，那么 .baz() 的未来“this”就神奇地已经在堆栈上的正确位置了。

# mysql - MYSQL 选择日期早于日期时间的行

> ID：10565924
> 
> 赞同：16
> 
> 时间：2012-05-12T17:24:53.187
> 
> 标签：mysql, datetime, where-clause

我正在为网站编写状态项，需要加载比包含日期时间的变量更早的状态。

所以数据库有一个称为添加日期的字段，它是一个日期时间字段，我有一个日期时间格式的字符串，我想选择比我的日期时间格式字符串更早的所有行。

这将如何在 MYSQL 中构造？

提前致谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-12T17:27:05.027

```
 select status_column from your_table
 where added_date < '2012-05-12' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-12T17:47:01.400

mysql DATETIME 类型用于包含日期和时间部分的值。

尝试这个

```
SELECT datecolumn 
FROM table
WHERE datetime_date > '2012-05-12 01-32-56' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T17:33:27.100

尝试这个

```
$today = date('Y-m-d');

 SELECT column_name FROM table_name WHERE year(added_date) > $today AND month(added_date) > $today 
```

# javascript - 在 Jquery 中触发幻灯片更改

> ID：10565926
> 
> 赞同：1
> 
> 时间：2012-05-12T17:24:56.777
> 
> 标签：javascript, jquery, html

我正在使用横​​幅滑块这个[横幅滑块](http://manos.malihu.gr/slidebox-jquery-banner-rotator)我想在其中触发一些事件 onSlide Change，默认情况下它不适用于此插件。

```
(".slidebox").mSlidebox(function()
{
   //My action trigger here
}); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:32:04.853

你可以在这里定义你的功能

```
slideboxNext.click(function(e){
    e.preventDefault();
    SlideboxAction("next","stop");
        YOUR FUNCTION HERE
});
slideboxPrevious.click(function(e){
    e.preventDefault();
    SlideboxAction("previous","stop");
        YOUR FUNCTION HERE
}); 
```

并处于自动播放模式；

```
slideboxSlide.each(function(index){
    if(options.numberedThumbnails){
        slideboxThumbs.append("<a href='#' class='slideboxThumb' rel='"+(index+1)+"'>"+(index+1)+"</a>");
    }else{
        slideboxThumbs.append("<a href='#' class='slideboxThumb' rel='"+(index+1)+"' />");
    }
    $(this).attr("rel",index+1).addClass("slideboxSlide slideboxSlide_"+(index+1)).children().addClass("slideboxCaption");
    slideboxTotalWidth=(index+1)*slideboxWidth;
    slideboxSlides.css("width",slideboxTotalWidth);
    slideboxEnd=index*slideboxWidth;
    YOUR FUNCTION HERE
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:49:41.490

`slideboxSlides`正如您在每张幻灯片上看到的那样，更改了 class of 元素的样式属性，您可以使用`DOMAttrModified`该元素的事件：

```
(".slidebox").mSlidebox(function()
{

document.getElementsByClassName('slideboxSlides').addEventListener('DOMAttrModified', function(e){
  if (e.attrName === 'style') {
    // My action trigger here...
  }
}, false);

}); 
```

# python - 出现内部错误时如何在 web2py 和 GAE SDK 上找到错误 - 已发出票证：未知

> ID：10565929
> 
> 赞同：2
> 
> 时间：2012-05-12T17:25:02.153
> 
> 标签：python, google-app-engine, web2py

我正在使用 Web2py 和 Google App Engine SDK。我有一个使用 WSGI 版本的操作，但在 SDK 上运行时失败。

在此操作中，没有来自 GAE 库的特定导入...但我无法弄清楚出了什么问题，因为我只收到了以下消息：

发出内部错误票：未知

并且没有显示错误的票证。

在使用 GAE 时，特别是在这种情况下，如何调试 web2py？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:14:25.160

您必须阅读 GAE 仪表板上的日志才能找出它抛出的 Python 异常

# matlab - 在 Matlab 中用逗号分隔字符串

> ID：10565938
> 
> 赞同：0
> 
> 时间：2012-05-12T17:26:16.843
> 
> 标签：matlab, csv, comma, data-processing

我正在寻找在 Matlab 中用逗号分隔文本文件中的字符串，到目前为止，我已经使用了“csvwrite”和“dlmwrite”。

他们通常采用这种形式：

```
myFile - input ('Please enter file's directory','s');
readMatrix - csvread(myFile);
csvwrite('newdatafile.dat', readMatrix); 
```

为了澄清，我想要做的是：

打开一个如下所示的文本文件：

```
0.3
0.1
0.5
etc 
```

对此：

```
0.3,
0.1,
0.5,
etc, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:46:20.533

MATLAB 的 csvwrite 函数将矩阵数据写入以逗号分隔的文件。不幸的是，MATLAB 中的字符串没有自己单独的数据类型，并且也表示为矩阵，因此当您在它们上运行 csvwrite 时，它​​们会将每个字母视为一个元素并在每个字母之间放置一个逗号。

您有两个选择：将输入存储为双精度并在其上运行 csvwrite，或者使用更原始的函数将它们输出到文件（sprintf 后跟 fprintf 到文件句柄）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:47:39.357

为什么行尾需要逗号？ [csvread](http://www.mathworks.nl/help/techdoc/ref/csvread.html)也适用于行包含逗号分隔数字的文件，即：

```
file1.dat:
02, 04, 06, 08, 10, 12
03, 06, 09, 12, 15, 18
05, 10, 15, 20, 25, 30
07, 14, 21, 28, 35, 42
11, 22, 33, 44, 55, 66

--and then in matlab:
readMatrix = csvread('file1.dat') 
```

将读取文件并导致`size(readMatrix) = [5 6]`（尽管每行末尾缺少逗号）如果文件仅包含一列数字（因此没有逗号），同样适用。

但是，如果您确实需要逗号，则可以使用[fprintf](http://www.mathworks.nl/help/techdoc/ref/fprintf.html)读取数据并将其打印到文件中：

```
readMatrix = csvread('file1.dat');
fid=fopen('file1withcommas.dat','w');
for ii=1:size(readMatrix,1)
    fprintf(fid,'%g,\n',readMatrix(ii,:));
end
fclose(fid) 
```

# svg - d3.js - 如何在时间刻度轴上更改矩形的 x 位置？

> ID：10565952
> 
> 赞同：0
> 
> 时间：2012-05-12T17:28:55.617
> 
> 标签：svg, d3.js

我在时间尺度 x 轴上绘制条形图。例如，

```
var x = d3.time.scale()
    .domain([minDate, maxDate])
    .range([0, width]);

chart.selectAll(".bar")
    .data(data)
  .enter().append("rect")
    .attr("x", bar_graph.x())
    .attr("y", d.value)
    .attr("width", 10); 
```

矩形的**左角**从分配的 x 点开始，但我想将 x 点分配给矩形的**中心**。

由于是时间尺度，简单的减法 x-5（假设宽度为 10px）不起作用。我尝试了 invert()，也检查了 svg 参考，但失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T04:12:05.847

问题确实在于设置 x 属性，看来问题在于 bar_graph.x() 语句，尝试执行以下操作：

```
.attr("x", function(d) {return x(d.dateVal)-barwidth/2;}) 
```

在这里查看完整的实现：http: [//jsfiddle.net/qAHC2/4/](http://jsfiddle.net/qAHC2/4/)

# mysql - 登录页面上的 mcrypt/mysql 语法错误

> ID：10565954
> 
> 赞同：0
> 
> 时间：2012-05-12T17:29:03.290
> 
> 标签：mysql, login, passwords, mcrypt

我在登录页面上有我的 CMS 的身份验证文件这样的代码：

```
 //$login=true;
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $key_hex = '6ee92bd4ef85c73b834cfa59ca343b7c';
    $key_bin = pack('H*', $key_hex);
    $pas = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key_bin, $_SESSION['p'], MCRYPT_MODE_ECB, $iv);
    $pas=trim($pas);
    $query="select *,PASSWORD('{$pas}') as password, UNIX_TIMESTAMP() as now from adm where login='{$_SESSION['l']}' LIMIT 1"; 
```

它在大多数服务器上都很好用，但在 Hostgator 上却不行：/

> 查询错误 select *,PASSWORD('ŃÇBňzŐO<~îĂ¸q'Ńsč:Á(ě/ę') as haslo, UNIX_TIMESTAMP() as now from adm where login='admin' LIMIT 1 你的语法有问题 obok ' Ńsč:Á(ě/ę') 作为密码，UNIX_TIMESTAMP() 现在来自 adm where login='admin' LI' on line 1 登录错误！

我看到密码是这样生成的：

```
*4ACFE3202A5FF5CF467898FC58AAB1D615029441 
```

而不是这样：

```
1ce99313667de467 
```

如何纠正这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:12:55.933

这是 register_globals 问题。开机后一切正常。

# java - Android - Jave 服务器 AES 加密不起作用 - 不同的密钥

> ID：10565956
> 
> 赞同：0
> 
> 时间：2012-05-12T17:29:14.097
> 
> 标签：java, android, encryption, aes

我正在尝试加密 android 上的图像，将它们发送到服务器以便处理它们。服务器必须解密收到的消息。[我已经在这个问题](https://stackoverflow.com/questions/10562908/encryption-of-strings-works-encryption-of-byte-array-type-does-not-work/)中发布了代码

我在 Android 端调用了加密函数，在 java 服务器端调用了解密函数（图像通过 TCP 发送）。

但是，我收到错误：

```
javax.crypto.BadPaddingException: Given final block not properly padded 
```

我在android上输出密钥并得到：

```
 javax.crypto.spec.SecretKeySpec@652 
```

而在 Java 服务器上（使用 Netbeans 开发）我得到：

```
javax.crypto.spec.SecretKeySpec@148dd 
```

我认为填充不同，所以我使用了

```
AES/ECB/PKCS5Padding 
```

而不是 AES

但 Java 服务器输出错误：

```
should use AES. 
```

我该如何解决这个问题？

对于在 android 端发送：

```
 public void send(Bitmap mRgbImage1_array, int port_number)
        throws IOException {

socket = new Socket("192.168.0.107", port_number);
boolean encrypt = HomeScreen.checkbox2.isChecked();
ByteArrayOutputStream stream = new ByteArrayOutputStream();

mRgbImage1_array.compress(CompressFormat.JPEG, 100, stream);
InputStream photoStream = new ByteArrayInputStream(stream.toByteArray());
BufferedInputStream bis = new BufferedInputStream(photoStream);
byte[] mybytearray = new byte[photoStream.available()];
bis.read(mybytearray, 0, mybytearray.length);
photoStream.close();

if(encrypt)
   {
 try {
byte[] dst = Security.encrypt(mybytearray);
mybytearray = new byte[10000];
for(int i=0; i<dst.length;i++)
{
     mybytearray[i] = dst[i];   
}

 } catch (Exception e1) {
    /// TODO Auto-generated catch block
    e1.printStackTrace();
}

}
    os = socket.getOutputStream();
    os.write(mybytearray);
            os.flush();
    os.close();
if (os != null)
{
try {
os.close();
    } 

    catch (IOException e) 
       {
            // TODO Auto-generated catch block
            e.printStackTrace();
    }
 }

} 
```

在 Java 服务器端接收：

```
 public static void receive(int port_number) {
    boolean received = false;

    Socket socket = null;
    InputStream is = null;
    int bytesRead;
    int current = 0;

    BufferedOutputStream bos = null;
    try {
        if (serverSocket == null) {
            serverSocket = new ServerSocket(port_number);
        }
        System.out.println("Listening :" + port_number);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    while (!received) {
        try {
            socket = serverSocket.accept();
            InetAddress ip = socket.getInetAddress();
            String[] ip1 = ip.toString().split("/");
            ip2 = ip1[1];
            System.out.println("ip is " + ip2);
            byte[] mybytearray = new byte[10000000];
            is = socket.getInputStream();
            FileOutputStream fos = new    FileOutputStream("source-image.jpeg");
            bos = new BufferedOutputStream(fos);
            bytesRead = is.read(mybytearray, 0, mybytearray.length);
           current = bytesRead;
            do {
                bytesRead =
                        is.read(mybytearray, current, (mybytearray.length - current));
                if (bytesRead >= 0) {
                    current += bytesRead;
                }

            } while (bytesRead > -1);
if(Networker.should_encrypt)
            {
         try {
     mybytearray = Security1.decrypt(mybytearray);
        } catch (Exception e1) {
            /// TODO Auto-generated catch block
            e1.printStackTrace();
        }
            }
            bos.write(mybytearray, 0, current);
            bos.flush();
            bos.close();

            received = true;
        } catch (IOException ex) {
            Logger.getLogger(MyServer1.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
            if (socket != null) {
                try {
                    socket.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            if (is != null) {
                try {
                    is.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T17:50:02.123

我相信这是问题所在：

```
mybytearray = Security1.decrypt(mybytearray); 
```

这*总是*会解密 10000000 个字节，即使您实际上只*写入*了少量数据。您应该更改`decrypt`方法以说明要解密多少数据，然后调用`doFinal(byte[], int, int)`.

我还建议尝试以流方式处理加密/解密，而不是预先分配 10MB（这在大多数情况下会很浪费，在其他情况下可能太短），但这是一个更大的变化。

此外，这在加密代码中是一个坏主意：

```
byte[] mybytearray = new byte[photoStream.available()];
bis.read(mybytearray, 0, mybytearray.length);
photoStream.close(); 
```

您*假设*可用于开始的数量是整个文件。情况可能并非如此。您通常应该循环，从文件流中读取并写入加密流。哦，`close()`调用应该在 finally 块中。

如果您*真的*`ByteArrayOutputStream`想在一次调用中完成所有加密/解密，您可以循环读取文件或网络流并写入`available()`. 然后用于`ByteArrayOutputStream.toByteArray()`获取正确大小的字节数组。（诚​​然，这涉及额外的副本。）

# actionscript-3 - 我似乎无法访问自动命名的对象（实例##）放置在 AS3 的舞台上，我错过了什么吗？

> ID：10565964
> 
> 赞同：0
> 
> 时间：2012-05-12T17:30:47.117
> 
> 标签：actionscript-3, flash, flash-cs5

我在库中有一个movieclip，它在文档类的actionscript 中动态添加到舞台。此影片剪辑包含许多子图像，这些子图像是直接从 Photoshop 导入的原始位置（*必须*保留）。

我不想手动命名每一个图像实例，因为有几十个。

我已经完成并手动将图像转换为符号，因为显然 flash 不会将“位图”对象识别为 AS3 中父动画剪辑的子对象（numChildren 看不到位图，但它会看到符号）。

我有一个数组，里面有几十个孩子的引用，我循环遍历它，检查点击时是否每个孩子都在鼠标下方。**但是，不知何故，除非我手动命名子符号**（我通过手动命名其中一些进行测试——那些对点击敏感） ，否则它不会检测到我何时单击项目。

我已经完成`trace()`了整个代码的调试，验证了我的数组是否充满了数据，数据实际上是实例的名称（自动命名，IE instance45、instance46、instance47 等），验证了函数在单击时运行，如果我手动命名符号，则验证代码是否正常工作。

任何人都可以看到出了什么问题，或者我无法理解闪存的哪些方面？

这是代码：

```
 //check each animal to see if it was clicked on
    private function check_animal_hits():void
    {

        var i:int = 0;
        var animal:Object = this.animal_container;

        for (i=0; i<animal.mussels.length; i++)
        {

            if (this.instance_under_cursor(animal.mussels[i].name))
            {

                var animal_data = new Object();
                animal_data.animal = "mussel";
                this.send_data(animal_data);

            }
        }

    } 
```

这是该`instance_under_cursor()`方法的代码：

```
 // Used for finding out if a certain instance is underneath the cursor the instance name is a string 
    private function instance_under_cursor(instance_name)
    {
        var i:Number;
        var pt:Point = new Point(mouseX,mouseY);
        var objects:Array = stage.getObjectsUnderPoint(pt);
        var buttons:Array = new Array  ;
        var o:DisplayObject;
        var myMovieClip:MovieClip;

        // add items under mouseclick to an array
        for (i = 0; i < objects.length; i++)
        {
            o = objects[i];
            while (! o.parent is MovieClip)
            {
                o = o.parent;
            }
            myMovieClip = o.parent as MovieClip;

            buttons.push(myMovieClip.name);
        }

        if (buttons.indexOf(instance_name) >= 0)
        {
            return true;
        }

        return false;
    } 
```

## 更新：

我相信我已经将其范围缩小到[`getObjectsUnderPoint()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#getObjectsUnderPoint%28%29) 无法检测到对象的问题，除非它们是手动命名的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:57:31.953

这是在鼠标指针下查找对象的最奇怪的方法......有一个内置函数可以做到这一点。但是，除此之外，您可能不应该依赖实例名称，因为它们无关紧要/可以更改/仅出于历史原因保留。使用此属性的代码需要重构。

但是，您观察到的情况可能是这样的：当您在 Flash CS 中将图像放在场景中时，Flash 会尝试通过将它们全部缩小为使用位图填充的形状来优化它。一旦将它们转换为符号，它将无法执行（因为它假定您以后要使用它们），但它将创建 Bitmpas - Bitmap 不是交互式对象 - 即它不注册鼠标事件- 将它添加到从 getObjectsUnderPoint() 返回的内容中毫无意义。显然，您想要做的是使它们具有交互性——例如 Sprite。因此，您对作为 MovieClip 的父级的测试没有抓住重点——因为父级不需要是 MovieClip（可以是 Sprite 或 SimpleButton 或 Loader）。

但是，如果您可以解释您需要该`instance_under_cursor`功能的用途，那么可能会有更好的方法来完成它的本意。

# ios - 链接到框架如何在 iOS 中工作？

> ID：10565967
> 
> 赞同：4
> 
> 时间：2012-05-12T17:31:07.513
> 
> 标签：ios, frameworks, linker, runtime

我正在寻找有关链接到框架的工作原理的深入解释。在构建期间的链接阶段会发生什么与运行时会发生什么？可选链接框架与必需链接有何不同？有谁知道对解释这一点的文章的参考？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-12T18:14:59.873

好吧，就库或框架链接而言，没有什么比弱链接和强链接更重要了。

强引用和弱引用用于变量。参见[Apple 文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW1)

此外，内置库和自定义库的链接是不同的。静态库只能在 iPhone 中构建和链接，不能在动态库中构建和链接。

如果您谈论的是编译器级别的库绑定，那么苹果肯定会指导您完成此操作（编译器级别的链接和绑定对于几乎所有编译器都是相同的，并且超出了本讨论的范围）。要链接静态库，您需要更改标头搜索路径，将其添加到目标，添加依赖项等这是[创建和链接静态库的示例](http://www.cocoanetics.com/2010/04/universal-static-libraries/)

当你第一次编译代码时，编译器会引用静态库和头文件中的编译类，除非它有变化，否则它不会每次都编译。

# android - Android 屏幕分辨率 px 和 dp

> ID：10565976
> 
> 赞同：2
> 
> 时间：2012-05-12T17:32:35.850
> 
> 标签：android, resolution, pixel

对于图标，它们是：36x36px 48x48px 72x72px 96x96px

对于屏幕尺寸，它们是：426x320 470x320 640x480 960x720

但我想我可能从网站上听说这些屏幕尺寸以 dp 为单位。我知道“dp”是维度像素。但我的问题是：当我进入 Adob​​e Illustrator 为小屏幕尺寸（426x320）创建背景时，我应该使用 PIXELS 单位还是需要将这些数字转换为其他数字。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T18:42:48.253

dp 不是“维度像素”。它是“（密度）独立像素”（参见[**此处**](https://developer.android.com/guide/topics/resources/more-resources.html#Dimension)和[**此处**](https://en.wikipedia.org/wiki/Device-independent_pixel)）。它们基于设备的密度，而不是分辨率。

例如，对于应用程序图标，它始终为 48 dp，因为在 mdpi(160 dpi) 上，48 dp== 48 像素。因此，在 hdpi (240 dpi) 上是 48*1.5=72 像素，在 ldpi(120 dpi) 上是 48*0.75=36 ，在 xhdpi (320 dpi) 上是 48*2=96 像素。

如果您希望获得最佳的图像显示效果，请根据目标设备的 dpi 级别创建图像。这意味着对于每个 dpi 级别，您需要创建一个最适合它的图像，并将其放在“res”文件夹中的正确文件夹中。

这可能需要 x4 次，而您可能更喜欢使用单个文件。这一切都取决于你看到的结果。如果您无法区分 mdpi 设备和 xhdpi 设备上的图像，则无需进行任何更改。

有关 android 图形设计的更多信息，请阅读：http: [//developer.android.com/design/index.html](http://developer.android.com/design/index.html)

# android - 捏缩放视图

> ID：10565981
> 
> 赞同：0
> 
> 时间：2012-05-12T17:32:51.510
> 
> 标签：android, android-layout

我正在开发我的第一个应用程序，它使用显示名称的列表活动。

当我单击其中一个列表项时，它会打开一个新的意图（活动？），它调用包含 textview 的 xml 布局。

我想要实现的是让 pinchzoom 与 textviews（或类似的东西）一起工作

今天，终于，我遇到了一个用 textviews 来做的版本，但是我的语言还不够好，还不能自己实现整个类。

我找到了本教程，但我似乎无法弄清楚如何使用它： [http ://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part -6-实现捏缩放手势/1847](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part-6-implementing-the-pinch-zoom-gesture/1847)

任何人都可以帮助我使用 MyGestureDetector() 获取此代码：

```
private GestureDetector gestureDetector;
private View.OnTouchListener gestureListener; 
```

在 onCreate 中：

```
// Zoom handlers
gestureDetector = new GestureDetector(new MyGestureDetector());
gestureListener = new View.OnTouchListener() {

    // We can be in one of these 2 states
    static final int NONE = 0;
    static final int ZOOM = 1;
    int mode = NONE;

    static final int MIN_FONT_SIZE = 10;
    static final int MAX_FONT_SIZE = 50;

    float oldDist = 1f;

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        TextView textView = (TextView) findViewById(R.id.text);

        switch (event.getAction() & MotionEvent.ACTION_MASK) {
            case MotionEvent.ACTION_POINTER_DOWN:
                oldDist = spacing(event);
                Log.d(TAG, "oldDist=" + oldDist);
                if (oldDist > 10f) {
                   mode = ZOOM;
                   Log.d(TAG, "mode=ZOOM" );
                }
                break;
            case MotionEvent.ACTION_POINTER_UP:
                mode = NONE;
                break;
            case MotionEvent.ACTION_MOVE:
                if (mode == ZOOM) {
                    float newDist = spacing(event);
                    // If you want to tweak font scaling, this is the place to go.
                    if (newDist > 10f) {
                        float scale = newDist / oldDist;

                        if (scale > 1) {
                            scale = 1.1f;
                        } else if (scale < 1) {
                            scale = 0.95f;
                        }

                        float currentSize = textView.getTextSize() * scale;
                        if ((currentSize < MAX_FONT_SIZE && currentSize > MIN_FONT_SIZE)
                                ||(currentSize >= MAX_FONT_SIZE && scale < 1)
                                || (currentSize <= MIN_FONT_SIZE && scale > 1)) {
                            textView.setTextSize(TypedValue.COMPLEX_UNIT_PX, currentSize);
                        }
                    }
                }
                break;
            }
        return false;
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T03:05:07.510

查看 ScaleGestureDetector ( [ScaleGestureDetector](http://developer.android.com/reference/android/view/ScaleGestureDetector.html) )。它可以很好地处理捏合，为您提供比例因子、焦点和其他内容。

# android - 如何将单选按钮添加到单选组

> ID：10565989
> 
> 赞同：7
> 
> 时间：2012-05-12T17:34:12.823
> 
> 标签：android, radio-button

我有一个 TableLayout 并且在每一行的第三列中我想放置一个单选组。我像这样构建 RadioButtons：

```
rg = (RadioGroup) findViewById(R.id.radioGroup1);

for (int k = 0; k < size; k++) {
    rb[k] = new RadioButton(context);
    rg.addView(rb[k]);
} 
```

但是，这会导致我的应用程序崩溃，有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T18:36:40.403

您正在构建一个长度为 的原始数组`megethos`，但您的循环使用长度`size`。如果`megethos`和`size`是不同的值，这可能会导致许多不同类型的错误......但是所有这些都是多余的，因为 RadioGroup 会为您保持这个数组是最新的。

我会尝试这样的事情：

```
RadioGroup group = (RadioGroup) findViewById(R.id.radioGroup1);
RadioButton button;
for(int i = 0; i < 3; i++) {
    button = new RadioButton(this);
    button.setText("Button " + i);
    group.addView(button);
} 
```

当您想在以下位置引用按钮时`index`：

```
group.getChildAt(index); 
```

另外，请始终发布您的 logcat 错误，它会准确地告诉我们*出了*什么问题以及在哪里查看。否则我们必须这样猜测。

**更新**

该错误是因为您试图将相同的按钮添加到两个不同的布局中：

```
tr[k].addView(rb[k]);
rg.addView(rb[k]); 
```

一个视图只能有一个父级。据我所知，如果没有首先进行大量定制，您无法将 RadioGroup 拆分为多个视图。然而，ListView 已经具有类似于 RadioGroup 的内置功能 setChoiceMode()：

```
List<String> list = new ArrayList<String>();
list.add("one");
list.add("two");
list.add("three");

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_checked, list);
ListView listView = (ListView) findViewById(R.id.list);
listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
listView.setAdapter(adapter); 
```

您可以轻松适应`simple_list_item_checked`显示 SSID 和信号强度。希望有帮助。（如果您等待足够长的时间，imran khan 可能会通过图形更改剪切并粘贴我的答案，然后再次将其声明为他自己的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-09T12:40:04.913

我创建了一个演示应用程序，其中我动态添加了单选按钮并处理了点击事件。

公共类 MainActivity 扩展 AppCompatActivity {

```
RadioGroup radioGroup2;
ArrayList<String> buttonNames;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    radioGroup2 = (RadioGroup) findViewById(R.id.radioGroup2);
    buttonNames = new ArrayList<>();
    buttonNames.add("No Tip");
    buttonNames.add("10%");
    buttonNames.add("20%");
    buttonNames.add("30%");
    radioGroup2.setWeightSum(Float.parseFloat(buttonNames.size() + ""));
    radioGroup2.setBackgroundColor(Color.BLUE);

    for (int i = 0; i < buttonNames.size(); ++i) {

        RadioButton radioButton = new RadioButton(this);
        radioButton.setId(i);
        RadioGroup.LayoutParams childParam1 = new RadioGroup.LayoutParams(0, LinearLayout.LayoutParams.MATCH_PARENT, 1f);
        childParam1.setMarginEnd(2);
        radioButton.setGravity(Gravity.CENTER);
        radioButton.setLayoutParams(childParam1);
        radioButton.setBackground(null);
        radioButton.setText(buttonNames.get(i));
        radioButton.setTextColor(Color.BLUE);
        radioButton.setBackgroundColor(Color.WHITE);
        radioButton.setButtonDrawable(null);
        if (buttonNames.get(i).equals("20%")) {
            radioButton.setChecked(true);
            radioButton.setBackgroundColor(Color.BLUE);
            radioButton.setTextColor(Color.WHITE);
        }
        radioGroup2.addView(radioButton, childParam1);

    }

    radioGroup2.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(RadioGroup radioGroup, int i1) {
            RadioButton button = null;

            for (int i = 0; i < buttonNames.size(); ++i) {
                if (i1 == i) {
                    button = (RadioButton) findViewById(i1);
                    button.setChecked(true);
                    button.setBackgroundColor(Color.BLUE);
                    button.setTextColor(Color.WHITE);
                    Toast.makeText(getApplicationContext(), button.getText() + " checked", Toast.LENGTH_SHORT).show();
                } else {
                    button = (RadioButton) findViewById(i);
                    button.setChecked(false);
                    button.setBackgroundColor(Color.WHITE);
                    button.setTextColor(Color.BLUE);
                }
            }
        }
    });

} 
```

}

# php - 将字符串（类似json格式）转换为对象或数组

> ID：10565990
> 
> 赞同：1
> 
> 时间：2012-05-12T17:34:20.500
> 
> 标签：php, curl, double, quotes

我通过 CURL 收到字符串“{success: false, errors: { reason: 'text text text' }}”，如何将此字符串转换为数组或对象？

字符串 '{"success": "false"....}' 可以通过 json_decode 转换为对象，但我有没有 qoutes 的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:39:19.863

首先使用这个正则表达式（它添加引号）

```
$json = preg_replace ('/(?<!")(?<!\w)(\w+)(?!")(?!\w)/u', '"$1"', $string); 
```

之后，您可以简单地使用 json_decode()

```
$array = json_decode ($json); 
```

## 更新

我在某处找到了这个脚本：

```
function json_fix_quotes ($string){
    $string = str_replace("{",'{"',$string);
    $string = str_replace(":'",'":"',$string);
    $string = str_replace("',",'","',$string);
    $string = str_replace("'}",'"}',$string);
    return $string;
} 
```

试试这个而不是正则表达式