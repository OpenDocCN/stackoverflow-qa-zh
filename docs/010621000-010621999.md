# StackOverflow 问答 10621000-10621999

# java - 任何基于 java 语法和功能的低级编程语言？

> ID：10621001
> 
> 赞同：2
> 
> 时间：2012-05-16T14:44:53.623
> 
> 标签：java, c, programming-languages

是否有任何基于 java 语法和特性的低级编程语言可用？

基本上不应该有内存管理，用户应该能够直接访问内存。

但是应该保持java的以下特性：
1）平台独立性（应该根据机器架构直接编译为本机代码以保持平台独立性，而不是编译成字节码）
2）不应该有JVM来管理内存和资源。
3）应该有异常抛出和捕获机制。
4) 应该有内置的多线程和并发支持。
5) 利用 Java-API。
6) 应该有像 C 一样的指针支持。

基本上，我正在寻找 C 和 Java 的混合体，具有语法和编码约定，如 Java、面向对象（可能不是严格面向对象），但应该与 C 一样快。

是否已经构建或正在开发任何此类语言？具有上面列出的一项或多项功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T14:46:39.573

C++ 听起来是您最接近的选择，但是您不会得到所有想要的东西。具体来说，您不会获得平台独立性、本机多线程和 Java-API。但是，您可以使用 boost 库来帮助解决这些问题。

如果您的动机纯粹是基于性能，那么您应该知道 Java 现在非常快。你绝对确定它对于你想要做的任何事情都会太慢吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:51:30.460

您描述的功能没有语言。

类 C 语言：

*   编译为目标代码
*   需要手动内存管理
*   不要使用虚拟机
*   对异常的支持有限
*   有指针

他们没有：

*   内置多线程（尽管参见 pthreads）
*   不要“利用 Java API”

Go 和 D 类似于 C，但支持多线程和并发，尽管带有垃圾收集器。其他面向系统的语言，如 ATS、Java 和 Haskell 是类似的——你要么得到原始机器，要么得到一些不错的特性和垃圾收集。所有这些都被用于系统编程。

所以，要么你使用 C 或 C++，而这带来的痛苦，要么你接受内存管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T14:49:37.173

[Vala](http://live.gnome.org/Vala)编程语言可能与您的意思相近。

它不是独立于平台的（这对于任何低级系统编程语言来说都是非常困难的）。它确实有半自动内存管理，但不是通过垃圾收集。它是一种面向对象的编程语言，可以编译为纯 C，并使用 GNOME GObject 系统来实现其面向对象的特性。

它与 Java 没有任何关系，因此它没有为您提供标准的 Java API。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-26T00:08:57.170

我认为唯一相关的语言是 Objective C，因为它将 C 与 SmallTalk 的想法和受启发的 Java 结合在一起。

虽然您可以像 C 一样独立于平台使用它，但现在大多数生态系统都是针对 Apple 平台的——但这不是该语言的属性。

它不能使用 Java API，但是没有非 JVM 语言可以。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T14:59:06.320

另一种选择是“D”：

[http://dlang.org/index.html](http://dlang.org/index.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T17:25:42.793

> 是否有任何基于 java 语法和特性的低级编程语言可用？

我会并且已经为此使用了Java。;)

> 基本上应该没有内存管理

没有什么会强迫您创建垃圾，您可以自己回收所有东西（或几乎所有东西），并且伊甸园大小很大，避免使用 GC 一天甚至一周。（或重新启动应用程序，永远不要使用它）

> 用户应该能够直接访问内存。

为此，我使用 ByteBuffers（支持）或 Unsafe（不支持）

> 但是应该保持java的以下特性： 1）平台独立性（应该根据机器架构直接编译为本机代码，以保持平台独立性，而不是编译成字节码）

JVM 执行此操作。

> 2）不应该有JVM来管理内存和资源。

您不必直接使用 JVM。

> 3）应该有异常抛出和捕获机制。

JVM 执行此操作。

> 4) 应该有内置的多线程和并发支持。

JVM 执行此操作。

> 5) 利用 Java-API。

JVM 执行此操作。

> 6) 应该有像 C 一样的指针支持。

您可以使用具有 Unsafe 可用的 JVM 来执行此操作。但是，您可能会发现直接 ByteBuffers 会安全地执行您想要的操作。

> 但应该和 C 一样快。

考虑到任何时间和资源，Java 不如 C 快。但是，如果您的时间和资源有限，与较低级别的语言相比，Java 可以帮助您在更短的时间内获得足够快、工作和可维护的程序。（同样的论点适用于高级语言，例如 Scala vs Java BTW）

# c# - 从 AutomationPattern 对象列表中获取实际的 InvokePattern 对象

> ID：10621002
> 
> 赞同：1
> 
> 时间：2012-05-16T14:44:58.760
> 
> 标签：c#, user-interface, design-patterns, microsoft-ui-automation

我有一个从该方法中`AutomationPattern`检索到的对象列表。`AutomationElement.GetSupportedPatterns()`现在我需要知道那里有什么样的模式，我的意思是单项`InvokePattern`或`ExpandCollapsePattern`. 更具体地说，假设我们有一个`AutomationPattern`对象，并且我们知道`ProgrammaticName`该对象的属性是“InvokePatternIdentifiers.Pattern”字符串，我能以某种方式获得类型的对象`InvokePattern`吗？

我已经使用属性和一个大的 switch 语句实现了我自己解决这个问题的方法`AutomationPattern.ProgrammaticName`，还有其他方法可以做到这一点吗？

这是我的实现：

```
 public object GetActualAutomationPattern(AutomationElement element, AutomationPattern pattern)
    {
        switch (pattern.ProgrammaticName)
        {
            case "DockPatternIdentifiers.Pattern":
                return element.GetCurrentPattern(DockPattern.Pattern) as DockPattern;
            case "ExpandCollapsePatternIdentifiers.Pattern":
                return element.GetCurrentPattern(ExpandCollapsePattern.Pattern) as ExpandCollapsePattern;
            case "GridPatternIdentifiers.Pattern":
                return element.GetCurrentPattern(GridPattern.Pattern) as GridPattern;
            case "GridItemPatternIdentifiers.Pattern":
                return element.GetCurrentPattern(GridItemPattern.Pattern) as GridItemPattern;
            case "InvokePatternIdentifiers.Pattern":
                return element.GetCurrentPattern(InvokePattern.Pattern) as InvokePattern;
            case "MultipleViewPatternIdentifiers.Pattern":
                return element.GetCurrentPattern(MultipleViewPattern.Pattern) as MultipleViewPattern;
            case "RangeValuePatternIdentifiers.Pattern":
                return element.GetCurrentPattern(RangeValuePattern.Pattern) as RangeValuePattern;
            case "ScrollPatternIdentifiers.Pattern":
                return element.GetCurrentPattern(ScrollPattern.Pattern) as ScrollPattern;
            case "ScrollItemPatternIdentifiers.Pattern":
                return element.GetCurrentPattern(ScrollItemPattern.Pattern) as ScrollItemPattern;
            case "SelectionPatternIdentifiers.Pattern":
                return element.GetCurrentPattern(SelectionPattern.Pattern) as SelectionPattern;
            case "SelectionItemPatternIdentifiers.Pattern":
                return element.GetCurrentPattern(SelectionItemPattern.Pattern) as SelectionItemPattern;
            case "TablePatternIdentifiers.Pattern":
                return element.GetCurrentPattern(TablePattern.Pattern) as TablePattern;
            case "TableItemPatternIdentifiers.Pattern":
                return element.GetCurrentPattern(TableItemPattern.Pattern) as TableItemPattern;
            case "TogglePatternIdentifiers.Pattern":
                return element.GetCurrentPattern(TogglePattern.Pattern) as TogglePattern;
            case "TransformPatternIdentifiers.Pattern":
                return element.GetCurrentPattern(TransformPattern.Pattern) as TransformPattern;
            case "ValuePatternIdentifiers.Pattern":
                return element.GetCurrentPattern(ValuePattern.Pattern) as ValuePattern;
            case "WindowPatternIdentifiers.Pattern":
                return element.GetCurrentPattern(WindowPattern.Pattern) as WindowPattern;
            default:
                return pattern;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T01:14:40.243

您可以执行以下操作：

```
object patternObj = element.TryGetCurrentPattern(pattern); 
```

然后只需测试类型是否是您想要的：

```
if (patternObj != null && patternObj is InvokePattern) {...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T09:33:31.670

我希望这能帮到您。

```
/// <summary>  
/// Gets the toggle state of an element in the target application.  
/// </summary> 
/// <param name="element">The target element.</param>  

private bool IsElementToggledOn(AutomationElement element)
{
if (element == null)
{
    // TODO: Invalid parameter error handling. 
    return false;
}

Object objPattern;
TogglePattern togPattern;
if (true == element.TryGetCurrentPattern(TogglePattern.Pattern, out objPattern))
{
    togPattern = objPattern as TogglePattern;
    return togPattern.Current.ToggleState == ToggleState.On;
}
// TODO: Object doesn't support TogglePattern error handling. 
return false;
} 
```

我从[这里拿走了这个](http://msdn.microsoft.com/en-us/library/ms750424%28v=vs.110%29.aspx)

# android - 如何在 Android 中调用 BUILD_EXECUTABLE 之前运行命令？

> ID：10621004
> 
> 赞同：0
> 
> 时间：2012-05-16T14:45:13.067
> 
> 标签：android, build, makefile, cmake

我正在 Android-4.0.4 (https://github.com/oNaiPs/droid-VNC-server) 上构建 droid-VNC-server。这个应用程序使用 cmake 创建一些头文件。`BUILD_EXECUTABLE`Android.mk 只是使用Android 定义构建一些二进制文件。但首先我需要在内部目录中运行 cmake `droidvncdaemon/vnc/libvncserver-kanaka`。

1.  我尝试使用`CleanSpec.mk`，但它的用途主要是 `out/`在构建之前清理目录。
2.  我试图添加一个shell命令，`$(shell ...)`但我不知道如何对`BUILD_EXECUTABLE`目标建立依赖关系。
3.  可能我应该 create `droidvncdaemon/vnc/libvncserver-kanaka/Android.mk`，但我不知道要输入什么来运行一个简单的 cmake 命令，并使 `droidvncdaemon/vnc/Android.mk`依赖于它。

有谁知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:19:58.493

无需任何更改即可为 Android 构建基于 CMake 的应用程序。[从http://code.google.com/p/android-cmake/](http://code.google.com/p/android-cmake/)获取工具链 并将其传递给您的 cmake 命令：

```
cmake -DCMAKE_TOOLCHAIN_FILE=./path/to/android.toolchain.cmake ./path/to/your/source/tree 
```

# c++ - 执行程序时找不到 DLL (c++)

> ID：10621005
> 
> 赞同：1
> 
> 时间：2012-05-16T14:45:14.477
> 
> 标签：c++, dll

我创建了一个项目，其中包括 Assimp 项目的头文件和 lib 文件以及 dll。我在 VS2008 项目中包含了 lib 文件，它编译时没有错误。我还将 assimp dll 复制到输出文件夹，但是当我尝试运行可执行文件时，它说找不到 Assimp32d.dll。

我完全不知道为什么可执行文件不能“看到” dll。做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:20:35.927

如果您正在运行 MSVS2008，请检查工作目录。

```
property->Debugging->Working Directory // you could access to right button on the project menu. 
```

此外，检查 dll 的名称。

```
assimp32.dll != assimp32 **d** .dll 
```

[此外，您可以通过http://www.dependencywalker.com/](http://www.dependencywalker.com/)检查您的程序是否可以访问所有 dll ，只需打开您的 exe 并播种 dll 依赖项，以及是否可以访问。

如果不是全部都可以访问，请复制 (dll) 或将 dll 目录添加到 %PATH% 变量中

> 控制面板\系统和安全\系统\高级\环境变量

# devexpress - AspxGridView：如何从客户端更新控件

> ID：10621006
> 
> 赞同：0
> 
> 时间：2012-05-16T14:45:15.647
> 
> 标签：devexpress

我正在使用 DevExpress v 10.2。

我需要一个建议：以下问题的最佳解决方案是什么。我有一个 ASP.NET Web 应用程序。那里的页面包含一个`AspxGridView`控件和 AspxCheckBox 控件。我需要以下内容：当`AspxCheckBox`控件的状态发生变化时，立即重新加载`AspxGridView`.

重新加载可能会更改`rows`AspxGridView 显示的计数。此外，EditForm 的一个实例可能会在`AspxCheckBox`控件更改时打开。

这里最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:57:35.073

Use [ClientSideEvents.CheckedChanged](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxEditorsCheckEditClientSideEvents_CheckedChangedtopic) for handling ASPxCheckBox state change.
For refreshing ASPxGridView use [ASPxClientGridView.Refresh](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewScriptsASPxClientGridView_Refreshtopic).
For closing edit form use [ASPxClientGridView.CancelEdit](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewScriptsASPxClientGridView_CancelEdittopic) method.

You should post your code if you need more info.

# c# - 我应该使用多个事件还是更详细的 eventargs 类？

> ID：10621007
> 
> 赞同：0
> 
> 时间：2012-05-16T14:45:17.697
> 
> 标签：c#, events, eventargs

我的程序正在串行端口上接收数据，在接收到数据后，它可以用八种不同的方式之一进行解释。

如果我想在收到数据后触发一个事件，我应该使用一个事件并在我的自定义事件 arg 类中使用类似枚举的东西，还是应该创建 8 个单独的事件？基本上我想知道创建事件的约定是什么。

我的假设是，当新事件与当前事件有区别时，应该创建一个新事件，但我不确定我的示例应该采用哪种方式。

编辑：为了澄清情况，程序主要通过串口与设备通信，接收输入的方法如下：

我应该这样做吗？

```
void receive(byte[] somebytes)
{
    // After checking to make sure all bytes expected are received
    switch(somecase)
    {
        case 0: TriggerEvent(SomeEventArgs);break;
        case 1: TriggerEvent(SomeEventArgs);break;
        case 2: TriggerEvent(SomeEventArgs);break;
        case 3: TriggerEvent(SomeEventArgs);break;
        case 4: TriggerEvent(SomeEventArgs);break;
        case 5: TriggerEvent(SomeEventArgs);break;
        case 6: TriggerEvent(SomeEventArgs);break;
        case 7: TriggerEvent(SomeEventArgs);break;
        case 8: TriggerEvent(SomeEventArgs);break;
    }
} 
```

或这个：

```
void receive(byte[] somebytes)
{
    // After checking to make sure all bytes expected are received
    switch(somecase)
    {
        case 0: Event0(LessEventArgs);break;
        case 1: Event1(LessEventArgs);break;
        case 2: Event2(LessEventArgs);break;
        case 3: Event3(LessEventArgs);break;
        case 4: Event4(LessEventArgs);break;
        case 5: Event5(LessEventArgs);break;
        case 6: Event6(LessEventArgs);break;
        case 7: Event7(LessEventArgs);break;
        case 8: Event8(LessEventArgs);break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:50:34.787

这实际上取决于您在做什么以及您的程序的更大背景。这可能有点风格问题，但请这样想：如果您处理的是常规变量而不是事件，最好将它们分成八个不同的类，还是让它们都使用相同的类但有八个不同的值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:26:58.517

我个人的偏好是“少即是多”的方法，我会创建一个事件，如您所描述的那样通过 eventargs 传递一个枚举。

我会将其与`KeyPressDown`用于桌面开发的 .NET 库进行比较。没有`AKeyPressed`, `BKeyPressed`, `EnterKeyPressed`- 它被封装在一种方法中，以实现简洁直观的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:01:43.760

两种解决方案都可以，但我认为举办一个活动要容易得多。

如果你有一个事件，你只需要`EventArgs<T>`在你的类中定义一个唯一的发布一个事件，并处理一个事件。

决定要做什么的所有逻辑都在订阅事件的“客户端类”中。这使得测试和调试更容易。

所以你需要：

*   发布单个事件的类
*   处理该事件并将执行分派到正确方法的方法，具体取决于事件 arg
*   处理这8个案例中的每一个的方法。

如果你这样做，很容易创建一个单元测试来测试调度程序方法，并创建不同的单元测试来测试 8 个方法中的每一个。

依赖于外部资源的“服务器类”很简单。这很重要，因为很难调试在八个事件之间选择的调度程序的测试。

想想另一个实现，使用 8 个事件：你会得到一个更加混乱和难以测试和调试的代码。

作为旁注，我鼓励您阅读这篇关于[“C# 事件实现基础、最佳实践和约定”的详尽文章](http://www.codeproject.com/Articles/20550/C-Event-Implementation-Fundamentals-Best-Practices)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T14:49:04.843

不知道你的程序到底是什么样子，有点难以判断。但我建议您创建 8 个单独的事件以保持概览并防止通过事件处理程序方法制作一个。

# knockout.js - Knockout 绑定不会使用简单的 observables 数组进行更新

> ID：10621008
> 
> 赞同：4
> 
> 时间：2012-05-16T14:45:18.020
> 
> 标签：knockout.js

我的视图模型中有一个字符串列表。要编辑它们，我希望每个都显示为`<li>`带有文本框的 a，并`<button>`删除该项目。所以，对于 list `['A', 'B']`，我想要这样的东西：

```
<ul data-bind="foreach: titles">
    <li>
        <input value="A" data-bind="value:$data" />
        <button data-bind="click: $root.remove">remove</button>
    </li>
    <li>
        <input value="B" data-bind="value:$data" />
        <button data-bind="click: $root.remove">remove</button>
    </li>
</ul>
<button data-bind="click: add">add</button> 
```

我最初可以创建它，但没有更新值以反映在视图模型中，并且无法使删除按钮正常工作。

我最初有一个`observableArray`纯字符串，然后更新为一个`observableArray`字符串`observable`。使用纯字符串，删除按钮可以工作，但可以预见的是，它没有更新视图模型。

**我已经设置了一个 JS fiddle，这个问题相当孤立：http: [//jsfiddle.net/bdukes/uvyH3/2/](http://jsfiddle.net/bdukes/uvyH3/2/)**

如果有一种既定或更好的方法可以做到这一点，我很想知道。

此外，作为一个不相关（且不太重要）的问题，该`stringifyJson`实用程序似乎总是给我数组中每个项目的空结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T15:02:58.560

Knockout 目前不能很好地与一系列纯 observables 一起工作（[在此处](https://github.com/SteveSanderson/knockout/issues/482)记录的问题）。

为了使其正常工作，您需要您的项目是包含可观察对象的对象，例如：

```
{ val: ko.observable("something") } 
```

这是您更新的小提琴以使用这些类型的对象：http: [//jsfiddle.net/rniemeyer/GgFa9/](http://jsfiddle.net/rniemeyer/GgFa9/)

# java - Struts2 prepare方法无法处理

> ID：10621009
> 
> 赞同：1
> 
> 时间：2012-05-16T14:45:18.107
> 
> 标签：java, struts2

当我使用`implements Preparable`和覆盖`prepare()`方法时，如果在准备过程中遇到任何问题，我会使用`com.opensymphony.xwork2.ActionSupport addActionError`.

在准备方法设置错误消息后，我想在真正的初始化方法中处理此消息。

```
public class TestClass implements Preparable {

    public void prepare() {
        // ...
        if (error) {
            addActionError("error");
        }
    }

    public String initializeAndDo() {
        String target = ERROR;
        // ...
        return target;
    }

} 
```

当我调试它时，它永远不会到达`initiliazeAndDo`方法并自动返回 INPUT。

struts.xml：动作块中没有拦截器。

```
 <action name="action_name" method="initializAndDo" class="TestClass">
    <result name="input">/pages/input.jsp</result>
    <result name="error">/pages/error.jsp</result>
 </action> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:03:30.757

当然; 这是正常行为。

如果有错误，`"workflow"`拦截器会看到并转发`"input"`结果。

如果您不想中断（非标准）工作流程，请不要在`prepare()`方法中设置错误。一种替代方法是设置一个`prepare()`可以在方法中检查的标志`initializeAndDo`- 这将防止`"workflow"`短路请求。

# ruby - 弹出窗口阻止 watir-webdriver 脚本进一步执行

> ID：10621012
> 
> 赞同：1
> 
> 时间：2012-05-16T14:45:28.850
> 
> 标签：ruby, watir-webdriver, selenium-chromedriver

好的，所以我有一个脚本应该打开一个弹出窗口并在该窗口上执行一些操作。我在窗口打开的地方遇到了一些麻烦，但是脚本停止，直到我手动单击窗口，然后它找到它，我可以继续。

我正在使用最新的 Watir-Webdriver 和 ChromeDriver（因为它的执行速度比 IE 或 Firefox 快得多）

```
#problem area of the script
#use send keys due to modal window
b.frame(name: 'MainBody').link(text: 'Add Event').send_keys :return
b.window(title: 'Add Event').use do
  #do some stuff
end
b.window(title: 'Add Event').wait_while_present 
```

单击按钮后，窗口打开，没有任何反应。我手动单击窗口，脚本会重新唤醒并继续前进。

我尝试在 send_keys 之后放置一个 puts 语句，但是直到我单击窗口之后它才会执行，并且在手动单击窗口之前这些语句也不起作用。我还尝试了一个猴子修补的 click_no_wait 方法来救援。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:29:36.823

一个肮脏的方法是：

```
 b.windows.last.use        #to switch to the new tab/pop-up window
        b.window(title: 'Add Event').use do
            #do some stuff
        end
    b.windows.last.close    #to close the new tab/pop-up window
    b.windows.first.use     #to return to initial tab/pop-up window 
```

100% 的时间为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T22:01:29.933

也许它试图走得太快？你可以尝试类似的东西

b.window(title: 'Add Event').when_present.use do #do some stuff end

# ruby-on-rails - 无法破坏现有的嵌套关联

> ID：10621013
> 
> 赞同：1
> 
> 时间：2012-05-16T14:45:50.653
> 
> 标签：ruby-on-rails, ruby, cocoon-gem

我有三个模型：

```
class Answer < ActiveRecord::Base
  belongs_to :question
  belongs_to :profile
  belongs_to :theme
  has_many :linked_sources

  attr_accessible :body, :theme_id, :question_id, :linked_sources_attributes
  validates_presence_of :body, :profile, :question, :theme
  has_paper_trail :on => [:update]

  accepts_nested_attributes_for :linked_sources, reject_if: :all_blank
end

class Answer::LinkedSource < ActiveRecord::Base
  belongs_to :answer
  belongs_to :source

  validates :source, :description, presence: true
  validates_presence_of :answer_id, :unless => :nested
  attr_accessor :nested
  accepts_nested_attributes_for :source, reject_if: :all_blank, allow_destroy: true
end

class Source < ActiveRecord::Base
  SOURCE_TYPES = %w(book film)

  has_many :linked_sources, class_name: 'Answer::LinkedSource'
  has_many :answers, through: :linked_sources

  validates :source_type, inclusion: {in: SOURCE_TYPES}
  validates :source_type, :title, presence: true
end 
```

我有一个表格，其中包含两个嵌套的现有链接源 + 现有答案的源。在我的 _linked_source_fields 部分中，我有 link_to_remove_association 并且它工作正常，将“_destroy”输入的值设置为“1”。

当我删除两个资源并按下提交按钮时，我收到以下表单数据：

```
utf8:✓
_method:put
authenticity_token:726c1e7NIb0Je2uUZYeKLXmqgFHxgakfcF6fzpjFb38=
answer[theme_id]:2
answer[body]:retert
_wysihtml5_mode:1
answer[question_id]:22
answer[linked_sources_attributes][0][source_id]:3
answer[linked_sources_attributes][0][nested]:
answer[linked_sources_attributes][0][source_attributes][source_type]:book
answer[linked_sources_attributes][0][source_attributes][title]:erger
answer[linked_sources_attributes][0][source_attributes][id]:3
answer[linked_sources_attributes][0][description]:erger ter
answer[linked_sources_attributes][0][_destroy]:1
answer[linked_sources_attributes][0][id]:3
answer[linked_sources_attributes][1][source_id]:4
answer[linked_sources_attributes][1][nested]:
answer[linked_sources_attributes][1][source_attributes][source_type]:film
answer[linked_sources_attributes][1][source_attributes][title]:terter
answer[linked_sources_attributes][1][source_attributes][id]:4
answer[linked_sources_attributes][1][description]:retr
answer[linked_sources_attributes][1][_destroy]:1
answer[linked_sources_attributes][1][id]:4
commit:Готово 
```

这似乎是正确的数据。

但是，保存此表单后，两个linked_sources 仍然存在。服务器端只是忽略“_destroy”参数。

怎么了？我在这个项目中为另一个具有更简单嵌套（只有一层）的模型提供了另一种茧形式，它工作正常，但在另一种情况下却不行。

（如你所见，我的英语并不完美——对此感到抱歉——如果你能改正就好了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:10:01.163

您必须添加`allow_destroy: true`到协会的`accepts_nested_attributes_for`：

```
accepts_nested_attributes_for :linked_sources, 
                              reject_if: :all_blank,
                              allow_destroy: true 
```

有关更多详细信息，请参阅[文档](http://apidock.com/rails/ActiveRecord/NestedAttributes/ClassMethods/accepts_nested_attributes_for)。

# php - 休息; PHP函数中的语句

> ID：10621019
> 
> 赞同：1
> 
> 时间：2012-05-16T14:46:17.057
> 
> 标签：php

我正在阅读我刚刚分配的代码，在许多`case`语句中只有一个单独的`break;`. 它没有包含在任何`switch`语句中。它就在那里，似乎没有任何目的。我是 PHP 新手，这是一些高级代码的使用，还是只是剩余代码？

这是代码：

```
function foo() {
...many for/switch statements (all with closing brackets)...
    break;
...other code....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:53:19.880

使用此测试代码：

```
function testing() {
    echo('begin...<br>');
    break;
    echo('end.<br>');
}

testing(); 
```

我得到输出（Windows 上的 PHP 5.3.10）：

```
begin...
Fatal error: Cannot break/continue 1 level in E:\Dev\Webstore Dev\test.php on line xx 
```

这意味着如果您没有遇到致命错误，那么它很可能包含在它想要突破的某个结构中，或者正如 DaveRandom 指出的那样，永远无法到达该行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:46:57.723

它在循环中吗？如果是这样，它将停止循环循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:56:18.713

如果有`switch`表达式，则知道 switch 通常包含`break;`表达式，如下所示：

```
switch($conditions) {
    case $case1 :
        //do something and finish
        break;
    case $case2 :
        // do something else and finish
        break;
    case $case3 :
        //do something elser and continue with next case
    case $case4 :
        //finally do something else and finish
        break;
    default:
        //if no case is matched, then do something here...
} 
```

这就是为什么有`break`礼物...

它也可以出现在循环中（,`while`或）以停止进一步循环......`for``foreach``do-while`

# objective-c - iOS：编译静态库

> ID：10621020
> 
> 赞同：2
> 
> 时间：2012-05-16T14:46:17.967
> 
> 标签：objective-c, xcode, static-libraries, test-project

我正在尝试构建我的第一个静态库，但遇到了编译问题。我的意思是我可以编译我的库并且一切看起来都很好，但是当我设置一个测试项目来测试它时，我得到了这种错误：

> ld：警告：忽略文件 /Users/ ***** /Desktop/TestApp/LibProva/libProva.a，文件是为存档而构建的，它不是被链接的架构 (i386) 架构 i386 的未定义符号：“_OBJC_CLASS_$_Prova”，引用自：AppDelegate.o ld 中的 objc-class-ref：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）
> 
> ld：警告：忽略文件/Users/**/Desktop/TestApp/LibProva/libProva.a，文件是为存档而构建的，它不是被链接的架构（i386）

所以我想编译有问题（由于模拟器和设备中的架构不同），但我不知道如何以正确的方式去做。有人可以解释我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:13:05.293

您必须使用 lipo 创建通用二进制文件：

```
#!/bin/bash
#build the device
echo building for ARM architecture
xcodebuild -sdk iphoneos4.3 "ARCHS=armv6 armv7" build > /dev/null
#build the simulator
echo building for the i386 architecture
xcodebuild -sdk iphonesimulator4.3 "ARCHS=i386 x86_64" "VALID_ARCHS=i386 x86_64" build > /dev/null
#make the folder
mkdir "Fat Binary"
#lipo suck it together
echo lipo binaries together
lipo -output Fat\ Binary/libmylib.a  -create build/Release-iphoneos/libprefuse_visual_iOS.a build/Release-iphonesimulator/libmylib.a
echo lipo binary saved at $./Fat Binary/libmylib.a
echo copying headers
cp -R build/Release-iphoneos/usr "Fat Binary"
echo [COMPLETE] 
```

请务必将实例替换为生成者`libmylib.a`的实际名称。`.a``xcodebuild`

# python - Python 列表（切片方法）

> ID：10621021
> 
> 赞同：3
> 
> 时间：2012-05-16T14:46:20.770
> 
> 标签：python

我是 python 的新手，在我读到关于列表方法的所有地方我都看到一件事

**slice 方法返回一个“新”列表**

这里的“新”列表是什么意思，为什么它比更改原始列表更快？

如果python操纵原始列表真的很重要吗，我的意思是我无论如何都不能使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:48:34.413

使用列表，您可以同时执行以下操作：

1）创建一个新列表（原样保持不变）：

```
In [1]: l = [1, 2, 3, 4, 5]

In [2]: l[:3]
Out[2]: [1, 2, 3]

In [3]: l
Out[3]: [1, 2, 3, 4, 5] 
```

2）就地修改列表：

```
In [6]: del l[3:]

In [7]: l
Out[7]: [1, 2, 3]

In [8]: l.append(15)

In [9]: l
Out[9]: [1, 2, 3, 15] 
```

您可以选择哪种方式对您的问题更有意义。

与列表相比，元组是不可变的，这意味着您可以对它们进行切片，但不能就地修改它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:56:47.490

我希望这有助于通过制作一个新列表来解释它的含义：

```
>>> lista = [1, 2, 3, 4]         
>>> listb = lista
>>> print lista
[1, 2, 3, 4]
>>> print listb
[1, 2, 3, 4]
>>> lista[0] = 3
>>> print listb
[3, 2, 3, 4]
>>> listc = lista[:]
>>> print listc
[3, 2, 3, 4]
>>> lista[0] = 1
>>> print listc
[3, 2, 3, 4] 
```

这样做时，`listb = lista`您不是在制作新列表，而是在对同一列表进行额外引用。这通过用 更改 lista 中的第一个元素来显示`lista[0] = 3`，这也更改了 listb 中的第一个元素。但是，当您将 lista 切片到 listc 时，`listc = lista[:]`您正在复制这些值。当用 将 lista 的第一个元素改回 1 时`lista[0] = 1`，listc 的第一个元素仍然是 3。

对于速度，我希望切片会更慢，但这**不**应该是使用哪一个的考虑因素。正如我所展示的，它们都有非常不同的含义，这取决于您要对列表做什么，而不是速度（*这是一般情况。在某些情况下速度可能很重要*）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:57:26.373

1.  “新”表示您切片的列表部分的浅表副本。

2.  这取决于你想要做什么。对于您的特定实现，您可能不关心原始数据，但我相信您可以想出想要在不修改原始数据的情况下使用数据子集的场景（尽管请记住它只是一个浅复制，因此在很多情况下，您将在处理切片时修改原始数据和切片中的数据）。此外，它并不快。事实上，它实际上更慢，因为系统需要分配内存并构造新对象。增益不是速度，而是功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T14:57:44.710

当一个函数/方法创建一个新列表时，这意味着您的脚本必须消耗双倍的内存，并且在创建旧列表的副本时有一点（或不是那么少）开销。

如果列表真的很大，你的脚本的性能会下降得很快。这就是为什么当您拥有大量数据时首选就地更改列表的原因。

# bash - 在 AppleScript 中显示带有文本输入字段和图像的对话框

> ID：10621022
> 
> 赞同：2
> 
> 时间：2012-05-16T14:46:20.757
> 
> 标签：bash, dialog, applescript

我对 AppleScript 很陌生。我正在编写一个`bash`脚本，我需要用户输入一个验证码。我正在尝试使用 AppleScript 向用户显示带有验证码图像（简单`.png`图像）和文本输入框的对话框，然后获取结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T18:00:28.307

AppleScript 的原生对话框显示工具（又名[display dialog](http://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptLangGuide/reference/ASLR_cmds.html#//apple_ref/doc/uid/TP40000983-CH216-SW12)和[display alert](http://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptLangGuide/reference/ASLR_cmds.html#//apple_ref/doc/uid/TP40000983-CH216-SW11)）相当有限，不允许您显示图像，除非您将其定义为`.icns`大小合适的 OS X 图标文件 ( )，这可能不太实用验证码。

但是，我知道至少有一种选择：[Carsten Blüm 的*Pashua*](http://www.bluem.net/en/mac/pashua/)将允许您创建包含`textfield`和`image`元素的原生 Cocoa 对话框。由于这些是在 DSL 中定义并由 Pashua 创建的，因此可以直接从 shell 脚本中使用它们（无需插入 AppleScript——查看文档和随 Pashua 分发的示例 shell 脚本）。

# html - 表格或列表：我应该在这里使用什么？

> ID：10621024
> 
> 赞同：12
> 
> 时间：2012-05-16T14:46:27.447
> 
> 标签：html, css, html-lists, html-table

我想知道我应该为这样的布局使用哪些标签。语义上对我来说既是表格又是列表。我如何才能实现这些下划线并保持标记正确？

![在此处输入图像描述](../Images/5ac40d7708c27bf095c9512e2ccd6449.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T14:50:47.213

我个人会使用有序列表来实现这一点，Suma skladki 下的子列表意味着它不是真正的表格数据。

这个链接应该给你你需要的东西：

[http://thepcspy.com/read/css_table_of_contents/](http://thepcspy.com/read/css_table_of_contents/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:50:39.633

就我个人而言，这看起来更像是一个列表而不是一个表格（尽管您仍然可以将它构建为一个表格，并且这样做是合理的）。我会将其构建为嵌套列表。

```
<ul>
  <li>Suma skladki <span class="price">900 PLN</span>
    <ul>
      <li>Skladka podstawawa 
          <span class="desc">(dia przychodu 250 000 PLN)</span> 
          <span class="price">550 PNL</span>
      </li>
    </ul>
  </li>
</ul> 
```

`table`与使用元素相比，这也将在未来为您提供更多的设计灵活性。我不太确定 a 是否`table`传达了您在此处拥有的嵌套层次结构以及一系列列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:12:52.837

*   仅仅因为您有子数据，并不意味着它是一个列表；有很多表都有子类别（只需查看总帐）
*   您有多条结构化信息，以*一致*的方式排列，构成表格或表格数据
*   您在上面显示的内容相当于 TOC（*目录****）***，它是一个有原因的表格（您有一个标签和一个值）

 *话虽如此，在这个时代，只要你能保护它，你使用什么并不重要，特别是因为列表/div 可以采用表格的形状。

*`table`将 a用于不是表格的东西比将列表用于可以使用表格的东西更不合适。**

# flash - 在 flash actionscript 中使用 cast3d 错误：

> ID：10621025
> 
> 赞同：0
> 
> 时间：2012-05-16T14:46:28.617
> 
> 标签：flash

我是 Flash 新手，我正在尝试将模型放到网上，并尝试使用 cast3D 框架。当我尝试第一个教程时，出现了这个错误：“1046：找不到类型或不是编译时常量：LoadEvent。” 发生错误的代码区域：

```
private function cast3dLoadComplete(event: LoadEvent): void
    {
        trace("cast3dLoadComplete ");
        this.manipulator = new TrackBall(this.animator,this.stage,
                                 this.stage.stageWidth, this.stage.stageHeight,
                                 Manipulator.Y_UP);
                       this.loaded = true;
                       removeTimer();                                   
                      if (loader.loaderror.length)
                      {
            statusText.textColor = 0xff0000;                                
            statusText.text = loader.loaderror;            
                       }
                      else
                      {                                 
            statusText.visible = false;
                      }
    }

    /**
     * Handles the load Error event
     */     
    private function cast3dLoadError(event: LoadEvent): void
    {
        trace("cast3dLoadError ", event.message );
                    removeTimer();
        statusText.textColor = 0xff0000;                                
        statusText.text = event.message;
    }               
}
} 
```

有人可以告诉我代码有什么问题吗？非常感谢阿德里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:56:04.090

此错误告诉您它找不到`LoadEvent`属于 cast3D 框架的类。我怀疑你没有包括包含类的 cast3D swc。

可以从[这里下载 - cast3D SWC](http://cast3d.com/demos/tutorials/intro/cast3d.swc)

如果您仍然有问题，那么您将如何包含它们的类，并且该方法取决于您使用的是 Flash IDE、Flash Develop 还是 Flash Builder。

**编辑：**

我正在使用 CS5，但在 CS3 上应该类似，进入菜单：

> 编辑 -> 首选项 -> Actionscript 3 -> 库路径 -> 浏览 SWC

应该会在下面看到一个与此类似的面板！

![在此处输入图像描述](../Images/1ba44f145712ad0371b10ee1e639a029.png)

# java - 从 Spring 中的另一个会话获取会话 bean

> ID：10621028
> 
> 赞同：0
> 
> 时间：2012-05-16T14:46:40.770
> 
> 标签：java, spring, session, tomcat

在 Spring 中有没有办法可以从另一个会话访问一些会话 bean？例如，是否可以为两个用户更改会话 bean 中的某些单音数据，或者一个用户的操作可以为第二个用户更改会话 bean 中的某些数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:42:04.000

不，你不能，这会破坏拥有会话范围 bean 的意义。如果用户需要查看跨会话的更改，您应该使用对会话范围的 bean（或其他一些持久性存储）都可访问的有状态单例 bean。

# actionscript-3 - FlashBuilder 变量视图中没有“继承”项

> ID：10621032
> 
> 赞同：1
> 
> 时间：2012-05-16T14:46:56.593
> 
> 标签：actionscript-3, apache-flex, flash-builder

我现在注意到在 flash builder 的变量视图中，当我在断点处停止时，“继承”变量没有出现。是否有原因有时可能不会出现“继承”？我在该视图的菜单中选择了“组继承成员”。

# java - 我如何标记读取的文件以避免在 java 中再次读取它们？

> ID：10621046
> 
> 赞同：0
> 
> 时间：2012-05-16T14:48:05.547
> 
> 标签：java, file, csv

我有一个读取 CSV 文件并将其内容存储到数据库中的代码。该代码定期运行，它应该只读取新添加的文件。我想在阅读后在每个文件的第一行添加一个标志，但这需要一个一个地加载所有文件并检查它们的第一行以确定应该读取哪个文件。有没有更好的主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:51:44.473

同一目录中的索引文件，其中包含读取文件的列表，

这样你只需要阅读那个文件来决定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:51:32.487

有一种更好的方法：将您处理的所有文件（名称）存储在数据库表中，并使用该表来决定是否处理文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:52:30.583

不太了解您的情况，但是您能否询问数据库存储了哪些文件，然后只处理尚未存储的文件？或者您可以在下次运行代码时将已处理文件的列表存储在内存中？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T14:56:04.440

删除读过的文件，没有办法混淆

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T14:56:29.973

我的两个解决方案：

1.  将处理后的文件复制到另一个目录。
2.  使用文件的哈希代码（冷名称）创建一个索引文件，您可以在其中检查文件是否已处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T14:57:59.307

如果您使用的是 Windows 文件系统（FAT、NTFS），则有一个名为“存档”的文件属性用于此目的。对文件的任何更改都会导致它被设置，一旦将其添加到数据库中，您就可以清除它。

对于跨平台的目的，最好的选择是跟踪在数据库中查看了哪些文件（以及它们的最后修改日期），然后您可以在查看目录列表时进行检查，而无需打开每个文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T15:02:56.487

尽量不要篡改这些文件。那是个坏主意。尝试[设置文件的某些属性](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#setAttribute%28java.nio.file.Path,%20java.lang.String,%20java.lang.Object,%20java.nio.file.LinkOption...%29)以指示其已处理。因此，您可以快速区分要读取/处理的文件。

# ffmpeg - FFMPEG：在 Windows Vista 中找不到预设

> ID：10621048
> 
> 赞同：0
> 
> 时间：2012-05-16T14:48:08.550
> 
> 标签：ffmpeg, windows-vista

[我从http://www.videohelp.com/tools/ffmpeg#download](http://www.videohelp.com/tools/ffmpeg#download)下载 FFMPEG并将其保存在我的 c:\program files\ffmpeg (Windows Vista) 中。我`Path`的前 2 个条目是：

```
c:\program files\ffmpeg\bin;c:\program files\ffmpeg\presets; 
```

我在网上找到了以下命令（http://paulrouget.com/e/converttohtml5video/）

```
ffmpeg -i input.avi -acodec libvorbis -ab 96k -vcodec libx264 -vpre main -level 21 -refs 2 -b 345k -bt 345k -threads 0 -s 320x240 output.mp4 
```

当我在命令行上运行它时，我收到以下错误：

`File for preset main not found`

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:17:50.353

根据[http://ffmpeg-users.933282.n4.nabble.com/Presets-location-on-Windows-td2253144.html](http://ffmpeg-users.933282.n4.nabble.com/Presets-location-on-Windows-td2253144.html)基本上当前的 ffmpeg 发行版在“错误的位置”有它的预设，所以你需要设置 FFMPEG_DATADIR环境变量，或指定预设的完整路径，例如

```
 ffmpeg.exe -i a.avi -fpre g:\installs\ffmpeg-20120519-git-31dfe20-win32-static\ffpresets\libvpx-1080p.ffpreset -f webm yo.webm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T18:04:16.600

您提供的链接中的示例使用较旧的 ffmpeg 语法。此外，`main`不是预设而是配置文件。所以而不是`-vpre main`使用`-profile main`. 如果您省略预设，则将使用默认值，即`-preset medium`.

一般用法是使用您有耐心的最慢预设。请参阅[FFmpeg：终极视频和音频操作工具](http://blog.superuser.com/2012/02/24/ffmpeg-the-ultimate-video-and-audio-manipulation-tool/)，以获得良好且最新的使用指南以及有关使用预设的更多信息。

其他垃圾：我不确定哪些浏览器会支持 MP4 容器格式的 Vorbis。libx264 忽略`-bt 345k`并 `-threads 0`现在自动应用，因此这些选项是多余的。

# r - 使用 R 时在 Bash 中突出显示颜色语法

> ID：10621049
> 
> 赞同：2
> 
> 时间：2012-05-16T14:48:09.390
> 
> 标签：r

我在 Ubuntu 下的 Bash 中运行 R。有没有办法在运行 R 时在 Bash 中使用颜色语法突出显示？我将非常感谢有关该主题的任何信息，并希望这个问题不是令人讨厌的无知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:52:51.540

你可以试试这个`colorout`包。

# java - 将字符串转换为短数组 - Java

> ID：10621050
> 
> 赞同：0
> 
> 时间：2012-05-16T14:48:14.823
> 
> 标签：java, android, string, short

我正在尝试将一串数字（例如“34 4 5 6 67 45 34”）转换为短裤数组。

我写了以下代码：

```
//Split the string and then build a short array with the values.
            String[] tabOfShortString = finalString.split(" ");
            int length = tabOfShortString.length;
            System.out.println("Length of float string is" + length);
            short[] shortsArray = new short[length];
            for (int l = 0; l < length; l++) {
                //System.out.println("l is currently "+l);
                Short res = new Short(tabOfShortString[l]);
                System.out.println("Indice Short Value is " + res);
                shortsArray[l] = res;
            } 
```

问题是完成的数组（shortsArray）没有准确地捕获我的字符串。谁能发现可能出了什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:24:38.873

您的解决方案对我有用，这就是我所拥有的：

```
public static short[] toShorts(String finalString) {
    String[] tabOfShortString = finalString.split(" ");
    int length = tabOfShortString.length;
    System.out.println("Length of float string is" + length);
    short[] shortsArray = new short[length];
    for (int l = 0; l < length; l++) {
        //System.out.println("l is currently "+l);
        Short res = new Short(tabOfShortString[l]);
        System.out.println("Indice Short Value is " + res);
        shortsArray[l] = res;
    }

    return shortsArray;

} 
```

然后我称之为：

```
short[] qux = toShorts("34 4 5 6 67 45 34"); 
```

qux 的输出是：

```
[34, 4, 5, 6, 67, 45, 34] 
```

我看不出问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:28:21.500

首先使用 StringTokenizer 打破它，您必须计算字符串中空格的数量，然后应用循环从字符串中提取值

```
int count=0;
String text= "34 4 5 6 67 45 34";

for(int i=0; i<text.length(); i++)
{
while(text.charAt(i)==' ')
{
count++;
}
}

StringTokenizer st = new StringTokenizer(String);

for(int j=0;j<count;j++){
Short res[] = new Short(st.nextToken());

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T14:51:51.987

也许是因为您的数组是原始类型`short`并且您尝试添加一个`java.lang.Short`对象。

**编辑**我错了...

# eclipse - Eclipse 拼写检查器 - 如何删除我没有添加的单词？

> ID：10621053
> 
> 赞同：0
> 
> 时间：2012-05-16T14:48:23.873
> 
> 标签：eclipse, spell-checking

我注意到当我键入一个单词时，Eclipse 拼写检查器不会将它标记为拼写错误，但我希望它是这样。我的用户词典里没有这个词。我如何告诉 Eclipse 我希望将该词标记为拼写错误？这可能吗？

我遇到了这个类似的问题，但它只描述了如何删除我自己意外添加的单词... [Eclipse 拼写检查器 - 如何删除我添加的单词？](https://stackoverflow.com/questions/1362400/eclipse-spell-checker-how-do-i-remove-a-word-i-added)

我想，更具体地说，我想做的是更新我的平台字典副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:06:24.563

平台字典位于`%eclipse%/configuration/org.eclipse.osgi/bundles/70/1/.cp/dictionaries`我的案例中。如果您的数字不同，只需搜索“dict”，就会只有一个结果。这些文件是纯文本的，就像您的用户字典一样。

顺便说一句，只是想知道平台字典错误地将哪个单词标记为正确。

# sql - 选择语句设置日期时间精度

> ID：10621054
> 
> 赞同：1
> 
> 时间：2012-05-16T14:48:28.673
> 
> 标签：sql, sql-server, sql-server-2008

我试图在我的 SQL 选择语句中设置我的 DateTime 的精度。在进行查询之前，我无法执行此操作。我正在使用 SQL Server 2008。

当前格式为：

```
2012-05-14 14:54:45.307 
```

我想继续从 DateTime 中删除毫秒和秒，给我：

```
2012-05-14 14:54 
```

我不确定这是否可以做到，我真的希望如此，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:14:19.170

看起来这比其他选项更简单（没有字符串转换或日期数学）：

```
SELECT CONVERT(SMALLDATETIME, GETDATE()); 
```

如果您仍然需要它是一个显式的 DATETIME（例如，如果您的应用程序会因为较小的类型更改而出错），您可以将其包装在另一个转换中：

```
SELECT CONVERT(DATETIME, CONVERT(SMALLDATETIME, GETDATE())); 
```

这仍将具有微小的粒度，但将是正确的 DATETIME 类型，其余部分为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:53:27.750

只需删除它们：

```
update tablename
set datecolumn = DATEADD(ms, -DATEPART(ms, datecolumn), datecolumn) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:53:40.613

您不能保留 DateTime 投射。但是，如果您希望将其格式化为显示 (VARCHAR)，您可以像这样使用 CONVERT：

```
CONVERT(VARCHAR(16),GETDATE(),120) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T14:57:24.113

```
SELECT SUBSTRING(CONVERT(VARCHAR, GETDATE(), 120), 1, 16) 
```

或者为了避免声明没有长度的 VARCHAR：

```
SELECT SUBSTRING(CONVERT(VARCHAR(16), GETDATE(), 120), 1, 16) 
```

# cakephp-2.0 - 安装 PayPal 插件后，CakePHP 站点无法运行 - 我从哪里开始？

> ID：10621055
> 
> 赞同：1
> 
> 时间：2012-05-16T14:48:29.583
> 
> 标签：cakephp-2.0

我的 CakePHP 网站一直运行良好，直到昨天我从[https://github.com/webtechnick/CakePHP-Paypal-IPN-Plugin](https://github.com/webtechnick/CakePHP-Paypal-IPN-Plugin)上传了 PayPal 插件。

它在本地仍然可以正常工作，但是实时站点现在根本无法正常工作 - 我只是收到一条错误消息

> 连接被重置
> 
> 加载页面时重置与服务器的连接。

如果我从 AppController.php 的 helpers 数组中删除插件名称

```
var $helpers = array('Html','Form','PaypalIpn.Paypal') 
```

然后它又可以正常工作了。

我真的不知道从哪里开始调试这个 - 我认为它与 PHP 库或版本或其他东西发生了某种冲突，但我不知道该怎么做才能找到它。通常我会注释掉一些东西，然后一次重新引入一行，但我想不出一种方法来做到这一点，因为我不知道哪个文件是插件中的“主”文件。

我可以尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-08T16:54:46.350

我有同样的问题。我在这里找到了答案：[https ://github.com/webtechnick/CakePHP-Paypal-IPN-Plugin/issues/19](https://github.com/webtechnick/CakePHP-Paypal-IPN-Plugin/issues/19)

在`app/Plugin/PaypalIpn/View/Helper/PaypalHelper.php`中，将第 34 行更改为：

```
'file' => APP . DS .'Plugin'. DS .'PaypalIpn'. DS .'Config' . DS . 'paypal_ipn_config.php' 
```

# javascript - jQuery +检查数组是否仅包含IP地址

> ID：10621058
> 
> 赞同：0
> 
> 时间：2012-05-16T14:48:32.907
> 
> 标签：javascript, jquery, ip

我有一个这样的数组（console.log 的输出）：

```
["122.42.123.1", "122.42.123.1", "122.42.123.1", "awdawd", "awdawd"] 
```

我如何检查它是否只包含 IP 地址，如果是的话`return true`？如果它没有（如上面的例子）`return false`？

我尝试了在这里和谷歌上找到的各种功能（[比如这个](http://moblog.bradleyit.com/2009/06/javascript-ip-address-validation.html)），并在每个循环中使用它们，但这不起作用：

```
//Get ip list from a textarea (each row = 1 ip)
var content = $("#banUList").val();
var ips = content.split("\n");
console.log(ips);

$(ips).each(function(){

    if(checkFunction($(this)) == false){
        //Wrong
    }else{
        //correct
    }

}); 
```

如果可能的话，我想完全**避免**这个循环，并有一个函数来检查整个数组是否有任何`var`不是 IP 的。不管有多少`vars`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:57:32.687

此功能将按您的意愿执行：

```
function ipOnly(arr) {
    for(var i=0,l=arr.length;i<l;i++)
        if(!/^([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\d?|2[0-4]\d|25[0-5])$/.test(arr[i])) 
            return false;
    return true;
} 
```

小提琴：http: [//jsfiddle.net/DWQzm/](http://jsfiddle.net/DWQzm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:52:24.810

```
function isValidIp(value){
    // The code you got from google
    return true/false;
}

var valids = [];

$.each(ips, function(){
  if (isValidIp(this))  
      valids.push(this);
}); 
```

或者使用 jQuery`grep`工具：

```
var valids = $.grep(ips, function(element){
                 return isValidIp(element);
             }); 
```

* * *

如果您只想在所有地址都有效\无效时获得真\假：

```
var areAllValid = $.grep(ips, function(element){
                        return !isValidIp(element);
                     }).length === 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T14:52:30.797

您可以使用正则表达式来验证 IP 地址：

```
\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b 
```

[http://www.regular-expressions.info/examples.html](http://www.regular-expressions.info/examples.html)

挑战：比我更有经验的正则表达式可能会编写一个多行感知正则表达式，可以在一次扫描中验证整个文本区域，而无需使用任何循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T14:55:09.760

不使用循环就不可能检查列表的*所有*条目。要完成您的源代码：

```
function arrayConsistsOfIPAddresses(ips) {
   var result = true;
   $(ips).each(function() {
     result &= isIPAddress($(this));
   }
   return result;
} 
```

您可以使用 jbabey 发布的正则表达式来实现该功能`isIPAddress`：

```
function isValidIPAddress(value) {
    var ipRegex = /b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/b
    return value.match(ipRegex); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T15:10:32.457

这个不使用循环 [演示的版本怎么样](http://jsfiddle.net/mplungjan/Tqz9M/)

```
// regex from http://tools.netshiftmedia.com/regexlibrary/
var re = /((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})/g; 

function isArrIpOnly(arr) {
  return arr.toString().match(re).length==arr.length;
}

var arr = ["122.42.123.1", "122.42.123.1", "122.42.123.1", "awdawd", "awdawd"];   

alert(isArrIpOnly(arr)); 
```

# objective-c - outlineView:dataCellForTableColumn:tableColumn 被调用超过必要？

> ID：10621062
> 
> 赞同：0
> 
> 时间：2012-05-16T14:48:42.503
> 
> 标签：objective-c, cocoa

每次单击 NSOutlineView 的一行时都会调用此方法。我认为应该为每个列行只调用一次以创建单元格：

```
 - (NSCell *)outlineView:(NSOutlineView *)outlineView dataCellForTableColumn:(NSTableColumn *)tableColumn item:(id)item
 {

      if ([[tableColumn identifier] isEqualToString:@"title"]) {
          CBImageTextCell *cell = [[CBImageTextCell alloc] init];
          ...
          return [cell autorelease];
      }
 } 
```

因此，我是否初始化了不必要的单元格？

我深入研究此代码的原因是，当我单击一个单元格时，会调用**hitTestForEvent**两次。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:46:20.517

预计每当大纲视图需要单元格时都会调用它。大纲视图不一定存储单元格。当然，它不会为每个列行存储一个单元格。表格和大纲视图存储的很少。他们每次需要时都从数据源获取内容，并且每次都向代表或列询问单元格，等等。

如果单元格始终属于同一个类，您可能应该只将该类的一个实例设置为列的单元格，而不是实现此委托方法。您可以在 IB 或代码中设置它。如果您只需要调整每一行的单元格，请`-outlineView:willDisplayCell:forTableColumn:item:`改为实施。

# url - 我如何获得完整的 url 以包含在使用 Symfony2 发送的时事通讯中？

> ID：10621068
> 
> 赞同：22
> 
> 时间：2012-05-16T14:48:55.607
> 
> 标签：url, symfony, permalinks, swiftmailer

我将使用 Symfony2 定期向许多用户发送时事通讯。对于那些在使用电子邮件客户端阅读时遇到问题的人，我必须包含一个指向 HTML 电子邮件的永久链接。

无论如何，假设我以这种方式发送时事通讯：

```
// Assume success and create a new SentMessage to store and get permalink
$sent = new SentMessage();

$sent->setRecipients(/* ... */);
$sent->setSubject(/* ... */);
$sent->setContent(/* ... */);

// Get the slug for the new sent message
$slug = $sent->getSlug(); // Like latest-product-offers-546343

// Construct the full URL
// e.g. http://mydomain.com/newsletter/view/latest-product-offers-546343

// Actually send a new email
$mailer->send(/* .. */); 
```

如何构建完整的 URL（域 + 控制器 + 操作 + slug）以将其包含在新电子邮件中？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-16T15:16:04.063

当然是[路由器](http://symfony.com/doc/current/book/routing.html#generating-absolute-urls)

> 默认情况下，路由器会生成相对 URL（例如`/blog`）。要生成绝对 URL，只需传递`true`给`generate()`方法的第三个参数：

也许您的代码可能看起来像这样

## Symfony2

```
$url = $router->generate(
    'slug_route_name',
    array('slug' => $sent->getSlug()),
    true // This guy right here
); 
```

## Symfony3

```
use Symfony\Component\Routing\Generator\UrlGeneratorInterface;

$url = $router->generate(
    'slug_route_name',
    array('slug' => $sent->getSlug()),
    UrlGeneratorInterface::ABSOLUTE_URL // This guy right here
); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-03-09T22:26:46.950

Symfony 3 更新：

```
use Symfony\Component\Routing\Generator\UrlGeneratorInterface;

$this->generateUrl('blog_show', array('slug' => 'my-blog-post'), UrlGeneratorInterface::ABSOLUTE_URL);
// http://www.example.com/blog/my-blog-post 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-01-13T11:14:16.867

**枝条**

如果这是在 twig 模板中，请使用`url('your route')`而不是`path('your route')`获取绝对 URL。

# jquery - 切换导航侧边栏（CSS 和 JQuery）

> ID：10621075
> 
> 赞同：1
> 
> 时间：2012-05-16T14:49:05.590
> 
> 标签：jquery, css, toggle

我需要一些帮助。我希望有一个侧边栏，可以在按下特定按钮时切换。侧边栏将显示，内容 div 的宽度将减小，以便为侧边栏腾出空间。一旦单击侧边栏按钮以再次隐藏它，内容 div 将变宽。我似乎根本无法让侧边栏工作。

[http://jsfiddle.net/jhacks/P3Ckk/54/](http://jsfiddle.net/jhacks/P3Ckk/54/)

我不得不稍作改动以使其适合小提琴盒，不幸的是，这似乎使事情变得更糟。例如，使“内容” div 更宽会出于某种原因将其向下推？但我离题了......我要解决的主要问题：

1.  当我单击“sidetoggleshow”按钮时，我什至无法显示侧边栏。我的 jquery 代码显然做错了什么？

2.  我不确定正确的解决方案是在隐藏侧边栏时让内容 div 扩展以填充其容器 div 的剩余空间。但是，当侧边栏出现时，我希望将内容推送过来。我的侧边栏在 html 中的定位可能是部分问题。目前，我将它设为切换按钮的兄弟，因此它位于顶部栏 div 中。但是，也许它必须是容器 div 的一部分？以便它占用内容所在的同一 div 内的空间？我会在 jquery 中引用什么？我想既然它是一个唯一的 ID，那么我根本不需要任何“兄弟姐妹”或“孩子”标签吗？再次，我确实尝试过，但它没有用......再一次，它也不适用于兄弟姐妹方法

非常感谢任何和所有帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:19:11.137

好像您知道您需要有两种状态，但您需要在 .click() 方法本身中区分它们，而不是两次注册点击处理程序。

我稍微修改了一下代码片段并编辑了 JS 和 CSS 代码并添加了注释，所以它应该很容易解释。另外，我假设您希望默认情况下隐藏侧边栏。

[http://jsfiddle.net/P3Ckk/78/](http://jsfiddle.net/P3Ckk/78/)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:54:15.950

您的 jQuery click 函数末尾有一个逗号 - 您还没有指定第二个参数...

```
$('div#sideToggleShow').click(

   function() {         
    $('div#sideToggleShow').hide();
    $('div#sideToggleHide').show();
    $(this).siblings('div#side').show();
}, ); <-- what's this!? 
```

应该

```
$('div#sideToggleShow').click(

   function() {         
    $('div#sideToggleShow').hide();
    $('div#sideToggleHide').show();
    $(this).siblings('div#side').show();
}); 
```

我相信你可以从这里拿走它！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:00:14.913

我已经编辑了你的代码。如果你喜欢它，就抓住它，如果不喜欢，告诉我你想要什么。[jsFIDDLE](http://jsfiddle.net/shehovn/P3Ckk/56/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T15:21:05.520

做了几个css编辑。[JSFiddle](http://jsfiddle.net/L8rrE/1/ "jsfiddle")

# database - 什么是数据库中的基数？

> ID：10621077
> 
> 赞同：95
> 
> 时间：2012-05-16T14:49:07.903
> 
> 标签：database, database-design, cardinality

有人可以借助示例向我解释一下数据库中的基数是什么吗？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-05-16T14:51:57.980

混淆的来源可能是在两种不同的上下文中使用该词 - 数据建模和数据库查询优化。

在数据建模术语中，基数是一个表与另一个表的关系。

*   1-1（表A中的一行对应表B中的一行）
*   1-Many（表 A 中的一行与表 B 中的多行相关）
*   多对多（表 A 中的许多行与表 B 中的许多行相关）

以上还有可选的参与条件（一个表中的一行根本不必*与*另一个表相关）。

请参阅 Wikipedia on [Cardinality（数据建模）](http://en.wikipedia.org/wiki/Cardinality_%28data_modeling%29)。

* * *

在谈到数据库查询优化时，基数是指表的一列中的数据，特别是其中有多少个唯一值。此统计信息有助于规划查询和优化执行计划。

请参阅 Wikipedia on [Cardinality（SQL 语句）](http://en.wikipedia.org/wiki/Cardinality_%28SQL_statements%29)。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-05-16T14:58:09.503

这有点取决于上下文。基数意味着某物的数量，但它被用于各种环境。

*   在构建数据模型时，基数通常是指表 A 中与表 B 相关的行数。也就是说，B 中是否有 1 行对应 A 中的每一行 (1:1)，是否有 N 行对于 A 中的每一行 (1:N) 在 B 中，对于 A (N:M) 中的每 N 行，B 中是否有 M 行，等等。
*   当您查看诸如使用 ab*-tree 索引还是位图索引是否更有效或谓词的选择性等问题时，基数是指特定列中不同值的数量。`PERSON`例如，如果您有一个表，`GENDER`它可能是一个非常低的基数列（可能只有两个值`GENDER`），而`PERSON_ID`可能是一个非常高的基数列（每一行都有不同的值）。
*   当您查看查询计划时，基数是指预期从特定操作返回的行数。

可能还有其他情况，人们使用不同的上下文谈论基数并表示其他含义。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-07-15T11:34:19.907

> 在数据库中，表中的**基数**行数。

[![在此处输入图像描述](../Images/706076f54d45bce119c3f56461616d40.png)](https://i.stack.imgur.com/2Fcer.gif) [图片来源](http://people.cs.pitt.edu/~chang/156/04reldb.html)

* * *

[![在此处输入图像描述](../Images/2c180b4b4b81adb5a112e6db55a75c67.png)](https://i.stack.imgur.com/uuDiz.jpg) [图片来源](https://www.slideshare.net/NikhilDeswal/cardinality-and-participation-constraints)

* * *

*   关系根据它们的**基数**（即[集合中元素的数量](https://en.wikipedia.org/wiki/Cardinality)）来命名和分类。
*   靠近实体出现的符号是**最大基数**，另一个是**最小基数**。
*   实体关系，显示**关系线**的末端如下：
    [![在此处输入图像描述](../Images/8e0bbd0728b469d3ed630ed6476fa08f.png)](https://i.stack.imgur.com/Xj3Fv.jpg)

[![在此处输入图像描述](../Images/9064748526b69d055b6ed53bce394174.png)](https://i.stack.imgur.com/a5Obj.png)

图片[来源](http://conceptdraw.com/solution-park/resource/images/solutions/entity-relationship-diagram-(erd)/Design_Elements(Crows-Foot-ERD).png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-16T14:54:26.727

基数是指列中包含的数据的唯一性。如果一列有很多重复数据（例如存储“真”或“假”的列），则它的基数较低，但如果值高度唯一（例如社会安全号码），则它具有高基数。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-10-26T21:04:31.533

集合的基数是集合中元素的数量，因为我们有一个集合 a > a,b,c < 所以这个集合包含 3 个元素 3 是该集合的基数

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-11-08T04:29:09.827

Definition: We have tables in database. In relational database, we have relations among the tables. These relations can be one-to-one, one-to-many or many-to-many. These relations are called 'cardinality'.

Significant of cardinality:

Many relational databases have been designed following stick business rules.When you design the database we define the cardinality based on the business rules. But every objects has its own nature as well.

When you define cardinality among object you have to consider all these things to define the correct cardinality.

# ruby-on-rails-3 - 表单未在 Rails 生产中的 GET 提交中添加参数

> ID：10621081
> 
> 赞同：0
> 
> 时间：2012-05-16T14:49:22.557
> 
> 标签：ruby-on-rails-3, forms, get, url-parameters

我有这样的表格：

```
<%= form_tag how_it_works_path, :method=>:get do %>
            <fieldset>
              <select id="location" name="location">
                <option value="">Please select your location</option>
                <optgroup label="Area 1">
                  <option value="city1">City1</option>
                  <option value="city2">City2</option>
                </optgroup>
                <optgroup label="Area 2">
                  <option value="city3">City3</option>
                  <option value="city4">City4</option>
                </optgroup>
              </select>
              <input class="button" name="commit" type="submit" value="How it works?" />
            </fieldset>
          <% end %> 
```

正在`welcome#index`查看中。当我在开发环境中提交（转到**pages#how_it_works**）时，它会在 URL 中正确添加**location**参数。但是，在生产中执行此操作时，它不会。为什么会发生这种情况？

**我在pages#how_it_works**中使用完全相同的表单，并且提交正确完成。

# c# - Wix 服务安装参数

> ID：10621082
> 
> 赞同：6
> 
> 时间：2012-05-16T14:49:23.353
> 
> 标签：c#, wix

有谁知道如何让我在 ServiceInstall 中声明的参数在服务启动时传递给服务？它们在我的 OnStart(string[] args) 中似乎总是为空。

```
<ServiceInstall
              Id="ServiceInstaller"
              Type="ownProcess"
              Vital="yes"
              Name="MyService"
              DisplayName="MyService"
              Description="MyService Desc"
              Start="auto"
              Account="LocalSystem"
              ErrorControl="ignore"
              Interactive="yes"
              Arguments="MY ARGS HERE"
              >
              </ServiceInstall>
              <ServiceControl Id="ServiceControl" Start="install" Stop="both" Remove="uninstall" Name="MyService" Wait="yes" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-21T22:16:45.983

有点旧，但这是你可以做的

```
 <ServiceInstall
            Id="SomeService"
            Type="ownProcess"
            Vital="yes"
            Name="Some Service"
            DisplayName="Some Service"
            Description="Monitoring and management of some service"
            Start="auto"
            Account="LocalSystem"
            ErrorControl="normal"
            Interactive="no"/>
          <ServiceControl Id="StartSomeService" Start="install" Stop="both" Remove="uninstall" Name="Some Service" Wait="yes">
            <ServiceArgument>[P_USEREMAIL]</ServiceArgument>
            <ServiceArgument>[P_USERPASSWORD]</ServiceArgument>
            <ServiceArgument>[P_DEFAULTNAMINGCONTEXT]</ServiceArgument>
            <ServiceArgument>[P_USEHTTPPROXY]</ServiceArgument>
            <ServiceArgument>[P_PROXYADDRESS]</ServiceArgument>
            <ServiceArgument>[P_PROXYDOMAIN]</ServiceArgument>
            <ServiceArgument>[P_PROXYUSERNAME]</ServiceArgument>
            <ServiceArgument>[P_PROXYPASSWORD]</ServiceArgument>
          </ServiceControl> 
```

[更新：当涉及到这个](http://wixtoolset.org/documentation/manual/v3/xsd/wix/serviceargument.html)元素时，WIX 文档可悲地令人失望。

基本上，您可以设置（公共）WIX 变量，通常定义为 [P_*]（例如 msiexec 参数、静态或在 CA 中）。这些值在启动时以相同的方式传递给服务，就像您在从服务控制台启动服务时（或者我想象的使用 net start）启动服务时将这些值连接到一个字符串中一样。在我的例子中，这些是空格分隔的值，例如 [P_USERMAIL] 是“--useremail some@email.com”，尽管这是任意的，因为您将在您发布的服务启动代码中处理这个问题。

您可能知道，这些值不会持久化。如果服务无法使用您提供的值进行初始化，您将需要重新安装/修复或以其他方式将它们传递给服务（即服务控制台、网络启动）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T07:11:11.473

有人在这方面取得进展吗？我没有看到这个论点在启动时影响我的服务：

```
 <ServiceInstall
            Id="ServiceInstaller"
            Type="ownProcess"
            Vital="yes"
            Name="Service"
            DisplayName="Service"
            Description="a service" 
            Arguments="-p stuff"
            Start="auto"
            Account="LocalSystem"
            ErrorControl="normal"
            Interactive="yes"/> 
```

我的服务总是得到一个空的 arg 数组：

```
 partial class PrintMonitorService : ServiceBase
    {
    private readonly PrintMonitorServiceManager _serviceManager;

    public PrintMonitorService()
    {
        InitializeComponent();
        _serviceManager = new PrintMonitorServiceManager();
    }

    protected override void OnStart(string[] args)
    {
        _serviceManager.StartHosting(args);
    }

    protected override void OnStop()
    {
        _serviceManager.StopHosting();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-29T20:31:54.337

在这里还没有真正找到答案，所以这就是我解决同样问题的方法：

有[两组可用于 Windows 服务的参数](https://i.stack.imgur.com/UmrJ9.png)：

1）当您使用`<ServiceInstall .. Arguments="YOUR Service Args">`元素时，您的参数将被添加到服务的“**可执行文件路径**”（注册表中的“ImagePath”）中。

使用[Environment.GetCommandLineArgs](https://docs.microsoft.com/en-us/dotnet/api/system.environment.getcommandlineargs?view=netframework-4.8)方法获取参数（注意该方法返回的第一个参数是服务名称）。

**请记住将参数保存到配置文件或注册表并在安装前阅读它们！**因为如果您运行修复/更改安装功能，这些参数将消失。

2）*启动参数*（一次性参数）。

这些参数是运行服务时在 OnStart(string[] args) 方法中可用的参数。

# highcharts - 在 highcharts 上设置初始图表

> ID：10621083
> 
> 赞同：3
> 
> 时间：2012-05-16T14:49:30.413
> 
> 标签：highcharts

当我说的时候相信我，我已经在这里和网上寻找这个简单问题的解决方案。

我在我的网站上安装了一个 highchart 解决方案。highcharts 中的用户可以在图表加载后动态显示/隐藏图表。我想加载，比方说，3组图形数据，但要隐藏（用户可以在之后显示）其中的1组。

所以我想加载 3 个图表，但只显示其中 2 个。

```
 chart1 = new Highcharts.Chart({ chart: {renderTo: "graphDiv2", zoomType: "xy" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T19:05:25.563

尝试显示您的 3 个图表并隐藏它们的 div 内容。然后，例如，当用户想要查看第二个图表时，您会显示放置它的 div。
您可以使用**[jQuery.hide()](http://api.jquery.com/hide/)**和**[jQuery.show()](http://api.jquery.com/show/)**来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:18:12.447

如果您想隐藏系列，请将其添加到您的图表中

```
 legend: {
        enabled: true,
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        y: 150 ,
      }, 
```

如果您想隐藏图表，它自己就像richardo 所说的，在您的代码中添加一个 hide() / show() 按钮

# jquery - Jquery/Ajax - XML Parsing - 根据标准提取记录

> ID：10621087
> 
> 赞同：0
> 
> 时间：2012-05-16T14:50:06.613
> 
> 标签：jquery, xml, ajax, parsing, xml-parsing

是否可以从 xml 中提取与查询字符串条件匹配的记录？

例如，我有以下解析 xml 文件的解析脚本，页面 url 可以包含几个不同的查询字符串，例如音乐 - 是否可以读取查询字符串，然后只解析与查询字符串中的短语匹配的记录？

```
$.ajax({
    type: "GET",
url: "#",
dataType: "xml",
success: function(xml) {

    $(xml).find("catalogueResult").each(function(i) {

        var mediaArtist = $("artist", this).text()
        var imgSrc   = $("imageUrl", this).text()
        var title = $("title", this).text()
        var priceCode = $("priceCode", this).text()
        var mediaRow= $('<div class="mediaBlock"><div class="promoImg floL"><img src="'+imgSrc+'" width="75" alt="'+title+'"/></div><div class="promoContent"><h2>'+title+'</h2><h2 class="red">'+mediaArtist+'</h2><div class="buyBtn"><span><A href="http://www.mobilechilli.com">Buy Now</a></span></div></div></div>');
        var compiledData = $(mediaRow);
        $(".recommends").append(compiledData);

    });
} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:59:49.587

尝试这样的事情。尽管您可能必须根据您构建 xml 的方式更改一些变量。

```
$(document).ready(function(){

$.ajax({
  type: "GET",
  url: "( URL to your xml )",
  dataType: "xml",
  success: parseXml
});

// function that parses XML
function parseXml(xml){

    // find node with name "catalogueResult" and run function for each
    $(xml).find("catalogueResult").each(function(){

    // variables
    var mediaArtist = $(this).find("artist").text();
    var imgSrc = $(this).find("imageUrl").text();
    var title = $(this).find("title").text();

    var priceCode = $(this).find("priceCode").text();
    var mediaRow= '<div class="mediaBlock"><div class="promoImg floL"><img src="'+imgSrc+'" width="75" alt="'+title+'"/></div><div class="promoContent"><h2>'+title+'</h2><h2 class="red">'+mediaArtist+'</h2><div class="buyBtn"><span><A href="http://www.mobilechilli.com">Buy Now</a></span></div></div></div>';

    $(".recommends").append(mediaRow);

    });
} 
```

# windows - 为什么我的用户的下载在 IE 中随机停止？

> ID：10621089
> 
> 赞同：8
> 
> 时间：2012-05-16T14:50:26.307
> 
> 标签：windows, internet-explorer

我有由 iframe 中的重定向触发的下载。

1.  用户点击“下载”按钮
2.  我们的 JS 从服务器获取下载 URL（这是一个超时 URL，所以必须这样做）
3.  iframe 被重定向到具有附件内容配置的下载 url，因此浏览器在不更改页面位置的情况下开始下载。

这适用于所有用户和浏览器......除了一些 IE 用户。

我试图重现这个问题，这就是我想出的：

*   如果快速单击“保存或打开”对话框，则下载始终有效
*   如果“保存或打开”对话框的点击速度很慢（如 10-20 秒），则下载有时有效，有时无效。我一直找不到模式。

这是卡住时的样子：

![在此处输入图像描述](../Images/6435ce40e9f9b4ee289d484886b576d7.png)

问题不在于 S3 上的链接超时——我上面的实验完全在时间窗口内。

什么可能导致这些零星的下载失败？

**更新**

服务器日志表明下载内容已完全发送给用户。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T04:45:16.387

我做了一些测试，下载了[LLVM 测试套件](http://llvm.org/releases/3.1/test-suite-3.1.src.tar.gz)，这是一个 78 Megs 文件，在 Windows 7 中使用 IE 9。单击链接时开始下载。Internet Explorer 不会等待您确认或取消。IE 将字节保存到您的下载目录中名为 fizzbuz 的文件中。*部分*。IE 将通过在文件完成后重命名文件或在您取消文件时将其删除来赶上您的选择。

这可能是时间问题或 HTTP 问题。

**时间问题**

是否有可能另一个进程打开文件，甚至锁定它？也许是过分热心的杀毒软件或实时备份软件？关闭和重命名操作（必须在服务器发送整个文件后进行）可能是这样的：

1.  将最后一个有效字节写入 fizzbuzz。*部分*文件
2.  关闭文件
3.  重命名文件

如果一个进程在 2 和 3 之间获取文件以进行独占读取怎么办？也许该应用程序对文件进行了一些更改，例如写入使 IE 感到困惑的备用 NTFS 流？

请记住，浏览器插件也会收到下载结束的通知。[另一种计时问题可能是由一个监控下载](http://msdn.microsoft.com/en-us/library/cc136550%28v=vs.85%29)的插件引起的，看到它结束，做一些操作。在某些情况下，该操作可能会失败或永远不会返回。

尝试在不运行任何防病毒软件（比将文件列入白名单更好的测试）且不加载任何浏览器插件的情况下重现问题。

**HTTP问题**

服务器和客户端必须就结束连接的方式达成一致。您必须：

1.  在传输结束时关闭连接
2.  指定下载的长度

很难从远处调试它，但如果可能的话，捕获下载的网络跟踪并寻找这些线索：

1.  Content-length 标头不存在或可能偏离 N （浏览器将永远等待 N 个字节，但不会出现）？
2.  每个客户端是否具有相同的代理配置？
3.  非工作客户端是否已降级到 HTTP 1.0 ？（有一个名为“始终通过代理使用http 1.0”的设置

从您的屏幕截图来看，浏览器似乎无法计算预计到达时间，但它与下载之间没有关联。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T15:58:48.053

我不知道 IE 是如何处理它的，但是在其他浏览器中，当您选择要存储文件的位置时，下载已经开始。您的下载 URL 的超时时间是多少？您是否尝试将其设置得更高？它不止一次起作用吗？（如果没有，请检查您的日志以了解失败的访问尝试）。祝你好运。

PS：如果没有任何效果，[试试这个](https://developers.google.com/chrome/chrome-frame/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T04:55:18.130

尝试设置`cache-control: max-age`为大于 0 的值。我注意到 IE 可能会像这样在设置为立即过期的内容上搞砸（即，通过使用无缓存）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T16:54:35.790

哪个版本的IE？如果您在下载完成之前没有决定如何处理下载，IE8 有时会出现异常行为......

如果服务器记录数据已发送到客户端/浏览器，那么接下来要调查的是代理和浏览器。

而且您的屏幕截图实际上看起来像尚未进行选择时的下载对话框。后台某处是否有选择屏幕？

# java - 用于在 HTML5 中绘制图形（不是图表，而是 DAG）的 JSF

> ID：10621091
> 
> 赞同：3
> 
> 时间：2012-05-16T14:50:26.713
> 
> 标签：java, html, jsf, canvas, graph

我想画一些节点（可能被小缩略图代替）并用线条连接它们。我还想在每个节点上写一些东西并使节点可点击。然后单击将引导我进入包含其他信息的新页面。

我的技术设置为 Java 网络服务器。业务逻辑完全来自 JPA，所以我认为使用 JSF 是正确的方法。

这可以用 HTML5 画布和一些不错的新 JSF 组件来完成吗？我愿意接受任何建议，但它应该看起来很漂亮。

拖放节点作为未来的扩展会很酷，但现在并不那么重要。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T15:05:05.430

我们为图形可视化创建了一个 Primefaces JSF 组件。使用 CytoscapeWeb（flash 版本）完成渲染。

也许我们将为新的 CytoscapeWeb 库（HTML5 和 JQuery）创建适配器

组件是为学习 Primefaces 组件开发而创建的，它需要一些改进，但我希望它会对你有所帮助。

[Primefaces 论坛](http://forum.primefaces.org/viewtopic.php?f=3&t=19316&p=81859#p81858)提供演示和下载链接

* * *

2012/11/12：最后我们为 CytoscapeWeb 2 库（HTML5 和 JQuery）创建了新的适配器，并且一个名为 Graphvis2 的新版本可用。

在线演示：

*   [http://www.sysord.com/Sysord/ressource_graphvis2_demo_clientSideEvents.jsf](http://www.sysord.com/Sysord/ressource_graphvis2_demo_clientSideEvents.jsf)
*   [http://www.sysord.com/Sysord/ressource_graphvis2_demo_ajaxBehaviors.jsf](http://www.sysord.com/Sysord/ressource_graphvis2_demo_ajaxBehaviors.jsf)
*   [http://www.sysord.com/Sysord/ressource_graphvis2_demo_dijkstra.jsf](http://www.sysord.com/Sysord/ressource_graphvis2_demo_dijkstra.jsf)

下载： [https ://github.com/sysord/Graphvis](https://github.com/sysord/Graphvis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:55:33.677

我很喜欢 primefaces 的图表[http://www.primefaces.org/showcase/ui/lineChart.jsf](http://www.primefaces.org/showcase/ui/lineChart.jsf)。而且它们真的很容易使用。

# java - 获取应用程序元素

> ID：10621092
> 
> 赞同：0
> 
> 时间：2012-05-16T14:50:27.190
> 
> 标签：java, eclipse, rcp

我有一个工具栏按钮和一个绑定到该按钮的命令。我需要在此命令中禁用和启用此按钮。如何从命令中获取此按钮？更一般地说：如何获得 eclipse rcp 应用程序的元素？例如，通过 id 获取视图，通过 id 获取命令，获取活动视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:57:16.920

假设您的按钮名称是 button1，您可以通过以下方式启用它：

button1.setEnabled(true);

并通过以下方式禁用它：

button1.setEnabled(false);

# javascript - jQuery UI Sortable：无法将第一个元素添加到链接元素

> ID：10621093
> 
> 赞同：2
> 
> 时间：2012-05-16T14:50:30.443
> 
> 标签：javascript, jquery, jquery-ui

我有两个元素列表，并且我已经启用了对它们都可排序的 jQuery UI。我用`connectWith`选项使我能够在两个列表之间拖动。

一个列表中有很多元素，所以我添加`overflow-y: scroll`了它。我使用了一个自定义`helper`函数来允许我在拖动元素时滚动整个页面。

```
helper: function(event, element){
    // From: http://stackoverflow.com/a/8512783/206403
    return element.clone().appendTo('body');
} 
```

如果顶部列表中没有元素，则很难将元素拖入其中。如果顶部列表中已经有一个元素，它可以正常工作。

这是一个演示：http: [//jsfiddle.net/MCcuc/5/](http://jsfiddle.net/MCcuc/5/)。向下滚动，并尝试将“项目 Q”（从红色列表的底部）移动到绿色列表（尝试将元素移到绿色列表上，然后再次退出）。您会发现将其附加到绿色列表并非易事。

我认为这与我的`helper`功能有关。我怎样才能让它让我将第一个元素拖到绿色列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:08:37.867

我不确定它是否有帮助，但我发现“真正的”问题更早开始，而不是在占位符消失时开始。发生的情况是内部滚动条不滚动，但在后台，光标的位置仍会触发非活动列表中的重新排序。所以在视觉上你的项目在 Active 列表之上，但它的位置仍然在 Inactive 列表的前 2 个元素之上。然而，由于视觉上的“过度”放置，占位符已经在活动列表中。因此，当该位置离开非活动列表的第一项的“虚拟位置”时，占位符将被删除。不幸的是，此时它在活动列表中，而不是在非活动列表中。

所以我所说的“问题开始得早”的意思是占位符应该留在 Inactive 列表中并使其向上滚动而不是过早移动到 Active 列表中，这可能是您想要的：首先使用滚动条列表的然后使用正文的滚动条。但这意味着移动辅助项的要求是当它在它上面时是旧列表的子元素，当它离开旧列表的区域时成为“body”的子元素。

我不认为你可以做到这一点（使用这个插件）。

可能的情况：如果您不想在非活动列表中重新排列，而只想通过页面滚动将项目移动到活动列表中。在这种情况下，您可以做的例如是使用“out”事件，当它被触发时，向上滚动非活动列表。不幸的是，“out”事件似乎没有在第一次触发时触发。看起来像一个错误:(

```
...
appendTo: 'body',
helper: 'clone',
out: function() {$('#Inactive')[0].scrollTop = 0;},
... 
```

更新：找到了解决方法。我不是在打磨它（特殊情况：当占位符是列表中的第一项时），但这是我的想法：

```
appendTo: 'body',
helper: 'clone',
placeholder: 'addBox',
change: function() {
    $('.addBox').prev()[0].scrollIntoView();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T02:54:21.337

坦率地说，我建议从根本上改变你的 UI 以消除对滚动条的需求。

与滚动条的存在相关的可排序插件有很多未解决的问题（请参阅# [3173](http://bugs.jqueryui.com/ticket/3173)、[#5881](http://bugs.jqueryui.com/ticket/5881)、[#7033](http://bugs.jqueryui.com/ticket/7033)、[#7065](http://bugs.jqueryui.com/ticket/7065)、[#7351](http://bugs.jqueryui.com/ticket/7351)、[#7546](http://bugs.jqueryui.com/ticket/7546)、[#7581](http://bugs.jqueryui.com/ticket/7581)、[#7784](http://bugs.jqueryui.com/ticket/7784)和[#8039](http://bugs.jqueryui.com/ticket/8039)例子）。开发团队目前没有优先考虑这些，因为插件[设置为在 2.0 中重写](http://wiki.jqueryui.com/w/page/12138038/Roadmap)（这还有很长的路要走）。

即使您能够解决当前遇到的问题（我确实尝试过...），我感觉当您进行更彻底的跨浏览器测试时，您会感到非常痛苦。我个人也觉得从可用性的角度来看，带有滚动条的可排序元素很奇怪。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T14:57:35.573

将列表并排放置怎么样，这消除了问题。 [http://jsfiddle.net/MCcuc/18/](http://jsfiddle.net/MCcuc/18/)

```
 <table>
      <tr>
       <td><div id="Active" class="sort">
          </div>
      </td>
      <td>
          <div id="Inactive" class="sort">
            <div class="box">
               <div class="handle"></div>
               <span>Item B</span>
            </div>
         </div>
​       </td>
     </tr>
    </table>​​​​​​​​ 
```

当底部列表向下滚动时，溢出是不可见的，但仍然影响顶部列表所在的空间。下部列表不可见，当尝试删除 Q 项目时，由于溢出，它仍然被丢弃在下部列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T09:39:47.220

试试这个：http: [//jsfiddle.net/KaBB7/](http://jsfiddle.net/KaBB7/)

主要思想是 - 您不需要将可排序列表与其自身连接，因此只需分别初始化您的列表并相互连接。

# asp.net - Nlog没有创建相对于网站项目的文件

> ID：10621094
> 
> 赞同：28
> 
> 时间：2012-05-16T14:50:30.613
> 
> 标签：asp.net, webforms, nlog

我正在使用一个网站项目，我从 Nuget 添加了 Nlog，并使用了以下 NLog 配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog autoReload="true" 
      throwExceptions="true" 
      xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <targets>
        <target name="logfile" xsi:type="File" fileName="log.txt" />
    </targets>

    <rules>
        <logger name="*" minlevel="Info" writeTo="logfile" />
    </rules>
</nlog> 
```

我运行了 ProcessMonitor，它显示 Nlog 正在尝试在 IISExpress 文件夹而不是我的网站项目文件夹中创建 log.txt。

> C:\Program Files (x86)\IIS Express\log.txt

如何让 NLog 将我的日志文件 ,`log.txt`放在我的网站项目文件夹而不是 IISExpress 文件夹中？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-16T15:02:49.980

我们想通了。

添加`${basedir}`到文件名

```
filename="${basedir}/log.txt" 
```

# translation - web2py - 翻译长文本

> ID：10621097
> 
> 赞同：1
> 
> 时间：2012-05-16T14:50:34.927
> 
> 标签：translation, web2py

我（想我）了解如何在 web2py 中翻译字符串。我的问题是：翻译大文本的首选方式是什么。例如“我们公司的历史......”将它们包含在字典中对我来说似乎很奇怪......也许为不同的语言创建不同的 html 片段并根据会话变量将它们包含在视图中？

还有一个问题：当网站变大，词句数量巨大时，这种基于字典的翻译效率高吗？

谢谢，格格利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:00:45.010

我猜你的问题是关于 web2py 中的国际化支持。[不久前我有一个类似的问题。](https://groups.google.com/forum/?fromgroups#!topic/web2py/M37dUVosJkE)

首先，您可以查看[flatpages 插件](https://groups.google.com/forum/?fromgroups#!topic/web2py/sgbPpPZ4QX8)

# amazon-web-services - CloudFront 中的 TTL 0 有什么用？

> ID：10621099
> 
> 赞同：81
> 
> 时间：2012-05-16T14:50:43.117
> 
> 标签：amazon-web-services, cdn, amazon-cloudfront

几周前，亚马逊宣布他们已经降低了内容的有效期：

[Amazon CloudFront 降低了最短内容过期时间](http://aws.amazon.com/about-aws/whats-new/2012/03/19/amazon-cloudfront-lowers-minimum-expiration-period/)

如此之多，以至于您现在实际上可以将 CloudFront 中的 TTL 设置为 0。所以我的问题是，为什么将 TTL 设置为 0 的 CloudFront 分配很有用。对我来说，这意味着根本没有缓存，因此每个到达 CloudFront 的请求最终会击中原点。

我错过了什么？

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-05-16T15:47:59.620

[Amazon CloudFront](http://aws.amazon.com/cloudfront/)的这一新功能实际上对许多用例都非常有用，因为*命中源的*工作方式与乍一看有点不同，而且不一定是问题，相反；虽然此功能已较早发布，但它与最近发布的[Amazon CloudFront - Support for Dynamic Content](http://aws.typepad.com/aws/2012/05/amazon-cloudfront-support-for-dynamic-content.html)结合在一起，例如针对手头的问题：

> **可变生存时间 (TTL)** - 在许多情况下，动态内容要么不可缓存，要么在很短的时间内（可能只有几秒钟）可缓存。过去，CloudFront 的最短 TTL 为 60 分钟，因为所有内容都被认为是静态的。新的最小 TTL 值为 0 秒。**如果您将特定源的 TTL 设置为 0，CloudFront 仍将缓存**来自该源的内容。**然后，它将发出一个带有 If-Modified-Since 标头的 GET 请求**，从而使源有机会**表明 CloudFront 可以继续使用缓存的内容（如果它在源处没有更改）**。*[强调我的]*

换句话说，使用 0 的 TTL 主要意味着 CloudFront 将缓存控制的权限委托给源，即源服务器决定 CloudFront 是否缓存对象以及是否缓存对象多长时间；请特别注意，*带有 If-Modified-Since 标头的 GET 请求*并不一定意味着对象本身是从源检索的，而是源可以（并且应该）返回HTTP 状态代码 304 -适用时[未修改](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection)：

> 表示资源自上次请求后未修改。[...] 使用它可以节省服务器和客户端的带宽和重新处理，因为与服务器重新处理的整个页面相比**，只有标题数据必须发送和接收**，然后使用更多带宽再次发送服务器和客户端的。 *[强调我的]*

有关 HTTP 缓存控制的机制和好处的详细信息，请参阅 Mark Nottingham 的出色[缓存教程](http://www.mnot.net/cache_docs/)，这是 HTTP 体系结构中非常重要且有效的部分。

了解所有这些部分如何协同工作确实有点困难，因此在[指定对象在 CloudFront 边缘缓存中停留多长时间（对象过期）](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/Expiration.html)中指定*CloudFront 缓存对象以进行下载分配的最短时间*部分中的表格试图总结效果当在 CloudFront 的上下文中应用时，有或没有 TTL = 0。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-26T21:23:48.997

请注意，亚马逊不是说“TTL 为 0”，而是说“最小 TTL 为 0”。这是非常不同的。上面的描述非常可取，但不能保证 Cloudfront 确实做到了。

根据我现在的经验，我可以看到缓存的图像在边缘停留了几分钟，而我的原点已经改变了。

所以，我认为说“最小 TTL 为 0”可能更像是“亚马逊没有严格的意图将其保存在缓存中”，也许“它会经常重新获取”。

对于网络用户发布新内容的 CMS 等应用程序，我认为 TTL-0 仍然不够。您仍然必须从 CMS 调用失效，或者为不同的版本号使用不同的路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-26T14:42:18.837

CloudFront 可以与证书管理器结合使用，为 S3 网站添加 HTTPS 支持。您可能想要这个，但零缓存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-18T21:32:01.807

另一个用例是如果您想使用 lambda 边缘[https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/lambda-at-the-edge 操作不可缓存内容请求的标头。 .html](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/lambda-at-the-edge.html) _ 例子`x-api-key`。

# c# - AxWindowsMediaPlayer，播放 Midi 文件时没有发生音量变化

> ID：10621102
> 
> 赞同：2
> 
> 时间：2012-05-16T14:50:44.920
> 
> 标签：c#, winforms, visual-studio-2010, midi, axwindowsmediaplayer

我正在尝试更改`AxWindowsMediaPlayer`对象的音量。像这样。

```
//Change Volume
private void VolumeTrackBar_ValueChanged(object sender, EventArgs e)
{
   if (MidiAxWindowsMediaPlayer != null && VolumeTrackBar != null)
       MidiAxWindowsMediaPlayer.settings.volume = VolumeTrackBar.Value*10;
} 
```

如果我在该语句中放置一个断点`if`，我可以看到它按我的意图执行。但是在播放过程中不会反映音量变化。无论我在之前、期间或之后更改音量，它总是以相同的音量播放。

有一个从 0 到 10的`TrackBar`范围，所以当我将它的值乘以 10 时，我总是会得到 0-100 范围内的东西，这是`AxWindowsMediaPlayer`Object 所需的范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-22T04:46:04.137

你可以在代码下使用

```
axWindowsMediaPlayer1.settings.volume = 100; 
```

更改您的请求的代码

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:31:22.587

在搜索并找不到解决方案（以及其他有同样问题的人）之后，我找到了解决方案。

不引用 AxWMPLib，而是引用 WMPLib

然后像这样创建媒体播放器对象

```
WMPLib.WindowsMediaPlayer MidiWindowsMediaPlayer = new WMPLib.WindowsMediaPlayer(); 
```

这`Object`将允许对 Midi Playback 进行音量更改。

# ruby-on-rails - 找不到没有 ID 的用户

> ID：10621103
> 
> 赞同：1
> 
> 时间：2012-05-16T14:50:45.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

使用 Rspec/Device/Cucumber 模板应用程序登录后，我希望用户被重定向到 users#index 我的路由文件

```
Engage::Application.routes.draw do
  authenticated :user do
    root to: 'users#show'
  end
  root :to => "home#index"
  devise_for :users
  resources :users, only: [:index]
  resources :agendas, only: [:create, :destroy]
end 
```

登录时出现错误

```
ActiveRecord::RecordNotFound in UsersController#show

Couldn't find User without an ID 
```

我的 users_controller

```
class UsersController < ApplicationController
  before_filter :authenticate_user!

  def index
    @user = current_user
    @agendas = @user.agendas
  end
end 
```

我尝试添加“@user = User.find(params[:id])”而不是使用 current_user 辅助方法，但我仍然遇到问题

我在视图下的用户文件夹中的显示视图是

```
<div class="row">
    <div class="span8">
        <% if @user.agendas.any? %>
            <h2>Agendas (<%= @user.agendas.count %>)</h2>
            <ol class="agendas">
                <%= render @agendas %>
            </ol>
        <% end %>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:35:30.827

要在登录后重定向用户，您是否看到此帮助：

[https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-in-out](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-in-out)

# c# - Asp.net 将值传递给用户控件然后显示它们

> ID：10621112
> 
> 赞同：0
> 
> 时间：2012-05-16T14:51:11.557
> 
> 标签：c#, asp.net, user-controls

我正在尝试制作一个通用的 Search UserControl，它可以根据搜索结果将显示的这些值赋予一些值。但是，我目前正在尝试显示我的值的结果，它们总是显示为我的默认值。

我的用户控制代码：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ProductSearch.ascx.cs" Inherits="..." %>
<asp:Label ID="lblSearchWord" runat="server" />
<asp:Label ID="lblSearch" runat="server" /> 
```

代码背后：

```
private string _searchWord = string.Empty;
private int _search = -1;
public string SearchWord
      {
         get { return _searchWord; }
         set { _searchWord = value; }
      }

      public int Search
      {
         get { return _search; }
         set { _search = value; }
      }
protected void Page_Load(object sender, EventArgs e)
      {
         lblGroupId.Text = LevelId.ToString();
         lblSearchWord.Text = SearchWord;
} 
```

当我按下主 aspx.cs 页面上的搜索按钮时，我执行以下操作：

```
 protected void btnSearch_Click(object sender, EventArgs e)
      {
          ucPS.SearchWord = txtProductSearch.Text;
          ucPS.Search = 1
} 
```

我的 aspx 页面包含以下内容

```
<%@ Register src="UserControls/ProductSearch.ascx" tagname="ProductSearch" tagprefix="ps" %>
<ps:ProductSearch id="ucPS" runat="server" /> 
```

我的问题是我不能使用查询字符串，因为用户可能在此页面上选择了我需要保持状态的其他一些东西，但是我确实测试了它并发现它可以正常工作。

我哪里错了？还是有更好的选择（查询字符串除外）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:56:04.783

页面中的所有变量都在[page-lifecycle](http://www.codeproject.com/Articles/73728/ASP-NET-Application-and-Page-Life-Cycle)结束时处理。因此`SearchWord`将始终在每次回发时使用默认值进行初始化。

您需要将它保存在其他地方，例如在`ViewState`变量中。

```
public string SearchWord
{
    get
    {
        if (ViewState["SearchWord"] == null)
            return "";
        else
            return (String)ViewState["SearchWord"];
    }
    set { ViewState["SearchWord"] = value; }
} 
```

[在 ASP.NET 应用程序中管理持久用户状态的九个选项](http://msdn.microsoft.com/en-us/magazine/cc300437.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T15:06:14.677

```
public string SearchWord
{
    get
    {
        if (ViewState["SearchWord"] == null)
           ViewState["SearchWord"] = string.Empty;

        return ViewState["SearchWord"];
    }
    set
    {
        ViewState["SearchWord"] = value;
    }
} 
```

我使用数据绑定而不是页面加载，这样你的用户控件不会加载，除非你调用它。

```
protected override DataBind()
{
     //you can add a condition here if you like
     if(SearchWord != string.Empty)
        lblSearchWord.Text = SearchWord;
} 
```

从 aspx 调用它：

```
usercontrol.SearchWord = "my word";
usercontrol.DataBind(); 
```

就是这样..

# c# - 如何防止数字从波浪中变大

> ID：10621113
> 
> 赞同：1
> 
> 时间：2012-05-16T14:51:17.167
> 
> 标签：c#, audio, microphone, wave

所以这可能会变得过于复杂，无法解释，但我会尽量保持简单但信息丰富。我的程序是用 C#.net 编写的，它监视麦克风 2 秒并从样本中返回最大值。我对如何从 winmm.dll 生成声音等不是非常精通，但我的程序大致基于 NAudio 和 CodeProject 的另一个项目来可视化波浪。我使用的波形格式是这个

```
 //WaveIn.cs
    private WaveFormat Format= new WaveFormat(8000, 16,1);
    //waveFormat.cs
[StructLayout(LayoutKind.Sequential)] 
public class WaveFormat
{
    public short wFormatTag;
    public short nChannels;
    public int nSamplesPerSec;
    public int nAvgBytesPerSec;
    public short nBlockAlign;
    public short wBitsPerSample;
    public short cbSize;

    public WaveFormat(int rate, int bits, short channels)
    {
        wFormatTag = (short)WaveFormats.Pcm;
        nChannels = channels;
        nSamplesPerSec = rate;
        wBitsPerSample = (short)bits;
        cbSize = 0;

        nBlockAlign = (short)(nChannels * (wBitsPerSample / 8));
        nAvgBytesPerSec = nSamplesPerSec * nBlockAlign;
    } 
```

（我想我可能刚刚发现了我的问题，通过发布这个但我仍然要问）

所以然后我在我的wavein文件中设置了一个最大声级事件。如果我正确理解源代码，它会在缓冲区已满时触发。这是那个代码

```
 private void CallBack(IntPtr waveInHandle, WaveMessage message, int userData, ref WaveHeader waveHeader, IntPtr reserved)
    {
        if (message == WaveMessage.WIM_DATA)
        {
            GCHandle hBuffer = (GCHandle)waveHeader.dwUser;
            WaveInBuffer buffer = (WaveInBuffer)hBuffer.Target;
            Exception exception = null;
            if (DataAvailable != null)
            {
                DataAvailable(buffer.Data, buffer.BytesRecorded);
            }
            if (MaxSoundLevel != null) //FOLLOW THIS ONE
            {
                byte[] waveStream = new byte[buffer.BytesRecorded];
                Marshal.Copy(buffer.Data, waveStream, 0, buffer.BytesRecorded);
                MaxSoundLevel(GetMaxSound(GetWaveChannels(waveStream)));
            }
            if (recording)
            {
                try
                {
                    buffer.Reuse();
                }
                catch (Exception e)
                {
                    recording = false;
                    exception = e;
                }
            }
        }
    }
    private short[] GetWaveChannels(byte[] waveStream)
    {
        short[] monoWave = new short[waveStream.Length/2];
        int h=0;
        for (int i = 0 ; i < waveStream.Length; i += 2)
        {
            monoWave[h] = BitConverter.ToInt16(waveStream, i);
            h++;
        }
        return monoWave;
    }

    private int GetMaxSound(short[] wave)
    {
        int maxSound = 0;
        for (int i = 0; i < wave.Length; i++)
        {
            maxSound = Math.Max(maxSound, Math.Abs(wave[i]));
        }
        return maxSound;
    } 
```

所以当我在这里从这个测试中监控它时，如果我将声级保持在“正常”，它就不会崩溃

```
 [Test]
    public void TestSound()
    {
        var waveIn = new WaveIn();
        waveIn.MaxSoundLevel += new WaveIn.MaxSoundHandler(waveIn_MaxSoundLevel);
        waveIn.StartRecording();
        Console.WriteLine("Starting to record");
        Thread.Sleep(4800); //record for 4.8 seconds.
        waveIn.StopRecording();
        Console.WriteLine("Done Recording");

    }
    void waveIn_MaxSoundLevel(int MaxSound)
    {
        Console.WriteLine("MaxSound:{0}", MaxSound);
    } 
```

这是我的输出

最大声音：28 最大声音：24 最大声音：31 最大声音：17 最大声音：18760

未处理的异常：System.OverflowException：取反二进制补码的最小值无效。

我曾经得到它给我 MaxSound:32767 (0x7FFF)。

所以我认为我的问题在于它试图将 32 位数字转换为 16 位数字，这就是我将 GetMaxSound 从 short 切换为 int 的原因。所以我不知道。我难住了。那么为什么我会遇到这个问题呢？我的 wave 不是建议它的最大值是 32,767 并且 winmm.dll 会知道并且不会超过那个吗？并且由于它只是将 2 个字节的数据转换为一个短字节，它应该永远不会遇到这个问题吗？请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:17:38.033

对于那些可能正在研究这个问题的人来说，我的解决方案本质上是相当简单的。16 位有符号数的最大正值为 32767。它的最大负数为 -32768。如果您取 32768 的绝对值并尝试将其放入 16 位数字中，则会导致引发溢出异常。所以解决方案是在我尝试取它的绝对值之前将短值转换为 32 位数字。这是修正后的功能

```
 private int GetMaxSound(short[] wave)
    {
        int maxSound = 0;
        for (int i = 0; i < wave.Length; i++)
        {
            maxSound = Math.Max(maxSound, Math.Abs((int)wave[i]));
        }
        return maxSound;
    } 
```

通过使用 ushort，我可能也会坚持使用无符号数，但 Math.Abs​​ 确实如此

# javascript - 将 SVG 中的组拆分为位于内容周围的子图像

> ID：10621118
> 
> 赞同：3
> 
> 时间：2012-05-16T14:51:22.130
> 
> 标签：javascript, jquery, svg

我在使用导入的 SVG 时遇到了个别元素的问题，希望能以某种方式提供建议。

我在 Illustrator 中创建了一个 SVG，有几个图层，最终成为组元素。当我从我的服务器检索 SVG 时，我得到了类似的东西。

```
<svg>
  <g>
  <g>
</svg> 
```

我不想将图像作为一个放置，所以我按组将其分解，并用自己的 svg 标签围绕每个组，然后放置在页面上。

```
<svg>
  <g>
</svg>

<svg>
  <g>
</svg> 
```

这太棒了，像我想要的那样工作。

我的问题在于，每个项目的路径都绘制在原始文件中。它们都是从 Illustrator 文件中提取的 (0,0)，所以当我尝试放置它们时，它们的左侧都有大量的空白区域，其他元素曾经存在的地方。

我尝试过使用 transform="translate(-50,-50)" 或其他方法，它确实会移动元素，但由于它们没有 x,y 属性，我不知道在哪里移动它们。

有谁知道抵消绘制路径的方法？或者是否有一种方法可以读取 SVG 并将其分解为每个单独的元素并使用？

使用 firebug 或 chrome 时，它​​们会向我显示具有正确尺寸的单个元素，但由于 Illustrator 中绘制的路径的位置，它们被放置有很多空白区域。

我试过了`contentDocument`，`documentElement`这两个都为空。也许我用错了？

我是一个沉重的 Actionscript 开发人员，现在使用 Javascript 和 jQuery，所以我习惯于 x,y 坐标系统和放置元素，但这似乎不是它应该工作的方式：/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T16:09:58.307

如果您真的想获得路径的 XY 部分，我编写了一个[函数来将路径转换为使用全绝对命令](https://stackoverflow.com/questions/9677885/convert-svg-path-to-absolute-commands)。有了这个，您可以运行路径命令（使用[`pathSegList`](http://objjob.phrogz.net/svg/property/1720)DOM 接口，而不是原始字符串属性）并提取所有 X/Y 值并按照您的意愿处理它们。

然而，更容易的是简单地[计算路径的边界框](http://my.opera.com/MacDev_ed/blog/2009/01/21/getting-boundingbox-of-svg-elements)[`viewBox`](http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute)并将元素设置为`<svg>`直接适合它：

```
// In case you want to leave the old SVG document unchanged
var newGroup = oldGroup.cloneNode(true);
var newSVG = document.createElementNS('http://www.w3.org/2000/svg','svg');
newSVG.appendChild(newGroup);

var bbox = newGroup.getBBox();
newSVG.setAttribute(
  'viewBox',
  [bbox.x,bbox.y,bbox.width,bbox.height].join(' ')
); 
```

上面的答案没有正确解释 a`transform`已经应用于您要移动的组的情况。（边界框在元素的未转换空间中返回。）我创建了一个演示来解决这个问题，计算转换元素的正确边界框。

## 演示： http: [//phrogz.net/SVG/explode_svg_components.xhtml](http://phrogz.net/SVG/explode_svg_components.xhtml)

```
// Find all the root groups in the original SVG file
var rootGroups = document.querySelectorAll('svg > g');
for (var i=rootGroups.length;i--;){
  var newSVG = elementToSVG(rootGroups[i]);
  document.body.appendChild(newSVG);
}

// Create a new SVG wrapping around a copy of the element
// with the viewBox set to encompass the element exactly
function elementToSVG(el){
  var old = el.ownerSVGElement,
      svg = document.createElementNS(old.namespaceURI,'svg'),
      css = old.querySelectorAll('style,defs');

  // Preserve elements likely needed for correct appearance
  [].forEach.call(css,copyToNewSVG);

  copyToNewSVG(el);

  var bb = globalBoundingBox(el);
  svg.setAttribute('viewBox',[bb.x,bb.y,bb.width,bb.height].join(' '));
  return svg;

  function copyToNewSVG(e){
    svg.appendChild(e.cloneNode(true));
  }
}

// Calculate the bounding box of an element in global SVG space
// accounting for transforms applied to the element
function globalBoundingBox(el){
  var bb  = el.getBBox(),
      svg = el.ownerSVGElement,
      m   = el.getTransformToElement(svg);
  var pts = [
    svg.createSVGPoint(), svg.createSVGPoint(),
    svg.createSVGPoint(), svg.createSVGPoint()
  ];
  pts[0].x=bb.x;          pts[0].y=bb.y;
  pts[1].x=bb.x+bb.width; pts[1].y=bb.y;
  pts[2].x=bb.x+bb.width; pts[2].y=bb.y+bb.height;
  pts[3].x=bb.x;          pts[3].y=bb.y+bb.height;

  var xMin=Infinity,xMax=-Infinity,yMin=Infinity,yMax=-Infinity;
  pts.forEach(function(pt){
    pt = pt.matrixTransform(m);
    xMin = Math.min(xMin,pt.x);
    xMax = Math.max(xMax,pt.x);
    yMin = Math.min(yMin,pt.y);
    yMax = Math.max(yMax,pt.y);
  });

  bb = {}; //IE9 disallows mutation of the original bbox
  bb.x = xMin; bb.width  = xMax-xMin;
  bb.y = yMin; bb.height = yMax-yMin;
  return bb;
} 
```

# javascript - VB.Net Json 序列化格式

> ID：10621121
> 
> 赞同：0
> 
> 时间：2012-05-16T14:51:32.070
> 
> 标签：javascript, asp.net, vb.net, json, serialization

我希望有人能够为我指出关于 Json 格式的正确方向。

我以前从未真正使用过 Json 和序列化，所以它有点新。

我需要以以下格式从 .Net 返回一个 Json。

```
[[Date.UTC(2011,12,14,8), 8], [Date.UTC(2011,12,14,9), 1]] 
```

我快到了，但我正在为字符串的格式而苦苦挣扎，因为默认情况下，字符串是被引用的。这就是我所拥有的：

```
 Dim oSerializerDt As New JavaScriptSerializer()

        Dim dt As New DataTable
        dt.Columns.Add("Date", GetType(String))
        dt.Columns.Add("Count", GetType(Integer))

        objresults.GetResults(id, period)

        Dim listResults As New List(Of Object())

        Dim newDate As String
        For Each result As Application.NewResults In objresults
            newDate = "Date.UTC(" + result.EventDate.Year.ToString + "," + result.EventDate.Month.ToString + "," + result.EventDate.Day.ToString + "," + result.EventDate.Hour.ToString + ")"
            listResults.Add({newDate, result.Count})
        Next

        Return oSerializerDt.Serialize(listResults) 
```

这将返回 Json，如下所示，除了环绕时间字符串的双引号之外，它是完美的。

```
[["Date.UTC(2011,12,14,8)",8],["Date.UTC(2011,12,14,9)",11]] 
```

如果有人能指出我如何更改代码以便正确格式化字符串的正确方向，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:05:22.010

您想要的不是有效的 JSON（引号之外的“日期” - 请参阅[http://www.json.org](http://www.json.org)上的规范），因此您不能真正使用 JSON 序列化程序来做到这一点。您可能需要做的是进行一些简单的字符串操作：

```
Dim dt As New DataTable 
dt.Columns.Add("Date", GetType(String)) 
dt.Columns.Add("Count", GetType(Integer)) 

objresults.GetResults(id, period) 

Dim listResults As New List(Of String)

Dim newDate As String 
For Each result As Application.NewResults In objresults 
    newDate = "Date.UTC(" + result.EventDate.Year.ToString + "," + result.EventDate.Month.ToString + "," + result.EventDate.Day.ToString + "," + result.EventDate.Hour.ToString + ")" 
    listResults.Add(String.Format("[{0}, {1}]", newDate, result.Count)
Next

Return "[" + String.Join(", ", listResults) + "]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:28:11.740

像这样将 Linq 与 StringBuilder 一起使用：

```
 Dim query = db.Employees.Select(Function(q) New With {q.EmployeeID, q.LastName}).ToList()
    Dim json As New JavaScriptSerializer
    Dim sb As New StringBuilder
    For Each rows In query
    sb.Append(rows.LastName)
    Next
    Dim strjson As String = json.Serialize(Convert.ToString(sb))
    Response.Write(strjson) 
```

# ios - 测试是否有任何应用程序可以在 iOS 上的移动 Safari 中处理 url 方案

> ID：10621131
> 
> 赞同：3
> 
> 时间：2012-05-16T14:52:09.917
> 
> 标签：ios, mobile, url-scheme

有什么方法可以测试 iOS 是否可以处理自定义 URL 方案？我有一个注册了自定义 url 方案的应用程序，以便能够从移动 safari 中的超链接打开该应用程序。但是，我想告诉用户，如果他们没有安装该应用程序，他们需要去应用商店下载该应用程序。

有没有一种聪明的方法来测试一个 URL 并在它失败时捕获它以及它失败的原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T16:01:06.543

这是我能想到的最好的，但它只在 iOS 5 中测试过：

如果您在移动 Safari 中的链接是`<a href="myapp://path">link text</a>`，请将其更改为：`<a href="http://mydomain.com/launchapp?location=path">link text</a>`，然后在`/launchapp`页面顶部，放置一个带有所需 URL 的隐藏 iframe：`<iframe src="myapp://path" style="display:none"></iframe>`。在页面的正文中，输入您需要前往应用商店下载应用的消息。

如果用户有应用程序：他们将看不到`launchapp`页面，他们将被无缝定向到应用程序 url。如果用户没有该应用程序：他们将收到关于“无法加载 URL”的令人讨厌的警报，单击“确定”，然后他们将查看您的“您需要下载该应用程序”页面。

**更新**- 2013 年 3 月

查看有关相关 SO 答案的[评论。](https://stackoverflow.com/questions/1108693/is-it-possible-to-register-a-httpdomain-based-url-scheme-for-iphone-apps-like?lq=1#comment-2369319)显然，如果您的应用尚未安装，您可以使用以下方法无缝重定向到 App Store 中的应用*（未经测试）*：

```
// setup fallback (redirect to App Store)
var start = (new Date()).valueOf();
setTimeout(function() {
    var end = (new Date()).valueOf();

    // prevent App Store redirect upon returning to safari from myapp
    if (end - start > 1000) return;

    // get a seamless redirect if you use itms://... instead of http://itunes.com/...
    window.location = 'itms://my/app/URI';
}, 25);

// Attempt to load my custom url scheme
window.location = 'myapp://my/path' 
```

# ios - 当客户不想让您访问他们的开发者帐户时，您如何为客户提供构建？

> ID：10621133
> 
> 赞同：2
> 
> 时间：2012-05-16T14:52:23.610
> 
> 标签：ios, xcode

我有一个拥有自己的企业分发帐户的客户。出于安全原因，他们不想让我访问他们的帐户，出于明显的原因，我不想给他们未签名的源代码。

处理这种情况为他们创建示例构建的最佳方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:57:01.850

像 [testflight](http://www.testflightapp.com)这样的服务将是我的起点。

您构建一个临时构建，注册他们的设备，并将其分发给他们进行测试。

您不需要他们的分发配置文件，他们也不需要您的代码。大家还蛮开心的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:09:15.147

我在 Apple Developer Website 上做了一些研究，我想我已经找到了我的问题的答案

**我是一名承包商，想为我的客户创建一个内部应用程序。我可以加入 iOS 开发者企业计划来做到这一点吗？**

*不可以。iOS 开发者企业计划适用于公司/组织开发和分发专有的内部应用程序给他们的员工。您的客户应注册 iOS 开发者企业计划并将您公司的适当开发者添加到他们的 iOS 开发团队。*

从读到这听起来我需要让他们将我添加为团队中的开发人员，这将给我一些有限的访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:58:11.327

您可以将他们的测试设备添加到您自己的临时配置文件中，并使用您的临时证书分发应用程序。

# .net - 如何创建 Visual Studio 解决方案文件 (.sln) 并添加更多项目

> ID：10621134
> 
> 赞同：4
> 
> 时间：2012-05-16T14:52:23.830
> 
> 标签：.net, visual-studio-2010, visual-studio-2008

我正在尝试创建 Visual Studio 解决方案文件 (.sln) 并将其添加到多个项目中。当我添加一个项目时，（.sln）文件消失，我无法插入其他项目。

有人知道吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T14:55:46.340

文件 -> 新项目

然后右键单击解决方案文件，并添加项目

![将项目添加到解决方案](../Images/147347f0a366a32707eb81a978d72e85.png)

确保在选项中选中“始终显示解决方案”。

![始终显示解决方案、选项、项目和解决方案](../Images/8aea9d74cbb4ae11ab2d8d180cd72b8b.png)

# c# - 关于绑定到非属性（即字段）的官方说法是什么？

> ID：10621140
> 
> 赞同：2
> 
> 时间：2012-05-16T14:52:31.287
> 
> 标签：c#, wpf, xaml, data-binding

从 WPF 4 Unleashed 一书中：

> 尽管源属性可以是任何 .NET 对象上的任何 .NET 属性，但对于数据绑定目标则不然。目标属性必须是依赖属性。另请注意，源成员必须是一个真实的（和公共的）属性，而不仅仅是一个简单的字段。

然而，这里有一个反例来反驳源必须是属性的说法。`Label`该程序将 a和 a绑定`ListBox`到类型为 的普通字段`ObservableCollection<int>`。

xml:

```
<Window x:Class="BindingObservableCollectionCountLabel.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <DockPanel>

        <StackPanel>
            <TextBox Name="textBox" Text="10"/>
            <Button Name="add" Click="add_Click" Content="Add"/>
            <Button Name="del" Click="del_Click" Content="Del"/>
            <Label Name="label" Content="{Binding Source={StaticResource ints}, Path=Count}"/>
            <ListBox ItemsSource="{Binding Source={StaticResource ints}}"/>
        </StackPanel>

    </DockPanel>
</Window> 
```

C＃：

```
using System;
using System.Windows;
using System.Collections.ObjectModel;

namespace BindingObservableCollectionCountLabel
{
    public partial class MainWindow : Window
    {
        public ObservableCollection<int> ints;

        public MainWindow()
        {
            Resources.Add("ints", ints = new ObservableCollection<int>());

            InitializeComponent();
        }

        private void add_Click(object sender, RoutedEventArgs e)
        {
            ints.Add(Convert.ToInt32(textBox.Text));
        }

        private void del_Click(object sender, RoutedEventArgs e)
        {
            if (ints.Count > 0) ints.RemoveAt(0);
        }
    }    
} 
```

那么关于什么是数据绑定源的官方说法是什么？我们应该只绑定到属性吗？还是在技术上也允许字段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T14:55:37.793

不，这不会**esplicitly**绑定到字段，它通过使用 a 绑定到字段`static resource`：

```
Binding Source={StaticResource ints //StaticResource !! 
```

您可以（基本上）定义任何您想要的静态资源并绑定到它。如果你想*直接*绑定到你的类，你需要`properties`按照文档的建议使用。

# svn - 如何合并多个 SVN 存储库并保留一个分支和标签文件夹

> ID：10621141
> 
> 赞同：0
> 
> 时间：2012-05-16T14:52:34.677
> 
> 标签：svn, merge, repository

我被要求将多个（数百个）svn 存储库合并到一个存储库中。（管理决策）

我需要导入完整的修订历史记录，但不是拥有多个主干、分支、标签树，我需要一个位于顶层的主干、分支和标签文件夹。每个现有存储库都将成为这些文件夹下的一个文件夹。

管理层希望导入完整的历史记录。（如果可能，他们希望将旧版本号存储为属性）

有人做过吗？有工具可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:03:51.447

我不知道工具，但是您可以将每个项目的主干复制到组合项目的主干中的适当文件夹（与分支和标签相同）。如果没有其他人建议更好的方法，您可以编写一个脚本来使用 svn 的命令行版本来发现文件夹（例如，使用 linux 机器或 cygwin 在 Windows 上实现此目的）。

# vb.net - .NET 代码优先纬度经度接口

> ID：10621142
> 
> 赞同：0
> 
> 时间：2012-05-16T14:52:35.963
> 
> 标签：vb.net, entity-framework-mapping

我正在用 VB.NET-Code First 开发一个数据库。我想在位置和邮政编码中添加纬度和经度。现在我正在为每个班级添加一个地理坐标。

```
Public Interface ILocation
    Property Street As String
    Property City As ICity
    Property State As IState
    Property Postal_Code As IPostalCode
    Property Country As ICountry
    Property Coordinate As IGeographicCoordinate

Public Interface IPostalCode
    Property ZIP As String
    Property Time_Zone As ITimeZone
    Property Coordinate As IGeographicCoordinate

Public Interface IGeographicCoordinate
    Property Latitude As Decimal
    Property Longitude As Decimal 
```

我的问题是让 Location 和 Postal Code 继承 GeographicCoordinate 接口会更好。我认为在我当前的实现中，我将拥有一个 GeographicCoordinates 表，其中包含两个外键（对于其他对象可能更多）。如果我使用 inhearaance 实现，我可以找到任何两个 IGeographicCoordinate 类之间的距离......

```
Public Function Distance(byval LHS as IGeographicCoordinate, _
    byval RHS as IGeographicCoordinate) 
```

使用 inhearaance 实现会将两个实体绑定在两个 IGeographicCoordinates 的实现中。我也可以让这些类继承 GeographicCoordinate 类......

```
Public Class Location
    Inherits GeographicCoordinate
    Implements ILocation 
```

我倾向于远离做这样的事情，因为我被锁定没有任何具有 lat 和 long 的类继承自其他任何东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:17:39.343

我喜欢你已经拥有它的方式。除非出于某种原因，您很难将这些实体读写到数据库中，否则不应该这样，我认为这会给您带来最大的灵活性。如您所说，如果您在邮政编码和位置上实现接口，则无法轻松提供与坐标相关的功能。如果你继承，你就会限制你从其他类继承的能力。那么，如果其他两个选项都有缺点，而您提出的想法没有，为什么不使用它呢？除非你能想到一些你没有提到的缺点？

# c++ - 将值 C#/COM 返回到 C++ 客户端？

> ID：10621148
> 
> 赞同：1
> 
> 时间：2012-05-16T14:52:54.750
> 
> 标签：c++, .net, com

我们有一个旧的 C++ COM .dll，客户从他们的 C++ 客户端调用它。

我们正在尝试用一个用 .NET 编写的新 COM 注册的替换旧的 .dll。

C++ 客户端可以调用我们的新 .dll，但在调用特定方法后崩溃。

似乎我们在变量“outNoOfChildren”或下面的 outChildList 数组中返回了错误。

（客户端中的错误消息为：“捕获到未知异常。测量的子节点数：-2147467259 限制：= 2”，它期望我们尝试返回 2。）

奇怪的是，我们新的 .NET .dll 中的方法调用似乎可以在我们拥有的另一个测试客户端（VB6）上工作。

这是我们试图替换的 C++ .dll 中的函数：

```
STDMETHODIMP marcomBase::XgetChildren(VARIANT inUser,
                                  VARIANT inId,
                                  VARIANT *outNoOfChildren,
                                  VARIANT *outChildList,
                                  VARIANT *outErrMsg,
                                  VARIANT *status)
  long stat= 1;
  char user[255+1];
  char id[255+1];
  long noOfChildren = 0;
  char errMsg[255+1] = "";
  _bstr_t temp_bstr;
  long inparamType;
  long dumInt;
  SAFEARRAY *pArray;
  long ix[2];
  VARIANT var;
  SAFEARRAYBOUND rgsabound[2];
  ChildT childList;
  ChildT *childListTemp = NULL;
  ChildT *childListTempNext = NULL;

  childList.nextChild = NULL;

  getInParam( inUser, &inparamType, user, &dumInt);
  if (inparamType != VT_BSTR)
  {
    strcpy(errMsg, "Parameter 1 incorrect, type must be VT_BSTR");
    stat = 0;
  }

  if (stat == 1)
  {
    getInParam( inId, &inparamType, id, &dumInt);
    if (inparamType != VT_BSTR)
    {
      strcpy(errMsg, "Parameter 2 incorrect, type must be VT_BSTR");
      stat = 0;
    }
  }

  if (stat == 1)
  {
    stat = barApiObj.getChildren(user, id, &noOfChildren, childList, errMsg);
  }

  outNoOfChildren->vt = VT_I4;
  outNoOfChildren->lVal = noOfChildren;

  rgsabound[0].lLbound = 1;
  rgsabound[0].cElements = noOfChildren;
  rgsabound[1].lLbound = 1;
  rgsabound[1].cElements = 3;

  pArray = ::SafeArrayCreate(VT_VARIANT, 2, rgsabound);
  outChildList->vt = VT_ARRAY|VT_VARIANT;
  outChildList->parray = pArray;

  ix[0] = 1;

  childListTemp = childList.nextChild;

  while (childListTemp != NULL)
  {
    temp_bstr = childListTemp->child;
    var.vt = VT_BSTR;
    var.bstrVal = temp_bstr.copy();
    ix[1] = 1;
    ::SafeArrayPutElement(pArray, ix, &var);

    temp_bstr = childListTemp->prodNo;
    var.vt = VT_BSTR;
    var.bstrVal = temp_bstr.copy();
    ix[1] = 2;
    ::SafeArrayPutElement(pArray, ix, &var);

    temp_bstr = childListTemp->rev;
    var.vt = VT_BSTR;
    var.bstrVal = temp_bstr.copy();
    ix[1] = 3;
    ::SafeArrayPutElement(pArray, ix, &var);

    ix[0] = ix[0] + 1;

    childListTempNext = childListTemp->nextChild;
    delete childListTemp;
    childListTemp = childListTempNext;
  }

  temp_bstr = errMsg;
  outErrMsg->vt = VT_BSTR;
  outErrMsg->bstrVal = temp_bstr.copy();

  status->vt = VT_I4;
  status->lVal = stat;

  return S_OK;
} 
```

这是我们编写的 .NET .dll：

.NET 接口：

```
...
[DispId(12)]
 [Description("method XgetChildren")]
object XgetChildren(object inUser, object inId, out object outNoOfChildren, out object outChildList, out object outErrMsg);
... 
```

.NET 类

```
public object XgetChildren(object inUser, object inId, out object outNoOfChildren, out object outChildList, out object outErrMsg)
{
    outNoOfChildren = 0;
    outChildList = null;
    outErrMsg = "";

    List<IndividualInfo> children = null;
    try
    {
        PrevasMesExternalServiceClient client = getClient();
        children = client.GetChildren(new SerialNo() { Number = inId.ToString() });
    }
    catch (Exception ex)
    {
       return Constants.STATUS_FAIL;
    }

    int[] myLengthsArray = { children.Count, 3 }; //Length of each array 
    int[] myBoundsArray = { 1, 1 }; //Start index of each array

    Array myArray = Array.CreateInstance(typeof(string), myLengthsArray, myBoundsArray); //Create 1-based array of arrays

    for (int i = 0; i < children.Count; i++)
    {
        myArray.SetValue(Utils.getStrValue(children[i].SerialNumber, Constants.pmesIDNO_LENGTH), i+1, 1);
        myArray.SetValue(Utils.getStrValue(children[i].ProductNumber, Constants.pmesPRODUCTNO_LENGTH), i+1, 2);
        myArray.SetValue(Utils.getStrValue(children[i].Revision, Constants.pmesRSTATE_LENGTH), i+1, 3);
    }

    outChildList = myArray;
    outNoOfChildren = children.Count;

    return Constants.STATUS_OK;
} 
```

更新：原始 C++ .dll 在 OLE/COM 对象查看器中如下所示：

```
 [id(0x0000000c), helpstring("method XgetChildren")]
    HRESULT XgetChildren(
                    [in] VARIANT inUser, 
                    [in] VARIANT inId, 
                    [out] VARIANT* outNoOfChildren, 
                    [out] VARIANT* outChildList, 
                    [out] VARIANT* outErrMsg, 
                    [out, retval] VARIANT* status); 
```

注册我们的新 .NET .dll 后，它在 OLE/COM 对象查看器中如下所示：

```
 [id(0x0000000c), helpstring("method ")]
    HRESULT XgetChildren(
                    [in] VARIANT inUser, 
                    [in] VARIANT inId, 
                    [out] VARIANT* outNoOfChildren, 
                    [out] VARIANT* outChildList, 
                    [out] VARIANT* outErrMsg, 
                    [out, retval] VARIANT* pRetVal); 
```

更新2：我开始怀疑错误可能不在“outNoOfChildren”中，而是在数组“outChildList”中。我已经更新了问题并为此修改了代码示例。

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:09:07.723

> 测量：-2147467259 限制：= 2"

这是一个神奇的数字。将其转换为十六进制，您将得到 0x80004005。这是一个**错误代码**，臭名昭著的 E_FAIL 或“未指定错误”。因此，在我们看不到的点中，您将错误返回值解释为数字。可能是 vtError 类型的变体并忽略变体类型。这就是从问题中可以得出的全部结论，请查看代码中的错误处理。

# php - MySQL - 获取组的 sum()

> ID：10621151
> 
> 赞同：0
> 
> 时间：2012-05-16T14:53:05.220
> 
> 标签：php, mysql, group-by, subquery

我有这个类似于[MySQL 的表 - 得到 sum() grouped max() of group](https://stackoverflow.com/questions/6553531/mysql-get-sum-grouped-max-of-group)

```
id  |  person  |  score  |   date  |   g   |   b   |   m   |
-----------------------------------------------------------
1   |    32    |  444    | 2011-05 |   0   |   1   |   o   |
2   |    65    |  528    | 2011-05 |   1   |   0   |   1   |
3   |    77    |  455    | 2011-05 |   0   |   0   |   1   |
4   |    32    |  266    | 2011-05 |   1   |   1   |   0   |
5   |    77    |  100    | 2011-05 |   0   |   0   |   1   |
6   |    77    |  457    | 2011-05 |   1   |   0   |   0   |
7   |    77    |  457    | 2011-05 |   1   |   0   |   1   |
8   |    65    |  999    | 2011-05 |   0   |   0   |   1   |
9   |    32    |  222    | 2011-05 |   0   |   1   |   1   | 
```

结果应该是：

```
person  |  score  |   date  |   g   |   b   |   m   |
-----------------------------------------------------
  32    |   932   | 2012-05 |   1   |   3   |   1   |
  66    |  1527   | 2012-05 |   1   |   0   |   2   |
  77    |  1469   | 2012-05 |   2   |   0   |   3   | 
```

但我无法实现我想要的。我试图为每个人获取每个月的分数、g、m 和 b 字段的总和。我是关于子查询的新手。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:55:31.117

你不能只按月分组，因为同一个月可能会出现超过一年，所以也可以按年分组，例如：

```
SELECT person, YEAR(`date`), MONTH(`date`), 
    SUM(score), SUM(b), SUM(g), SUM(m)
FROM MyTable
GROUP BY person, YEAR(`date`), MONTH(`date`) 
```

如果您的`date`列实际上不是日期类型，而是 varchar 或类似类型，并且它包含`yyyy-dd`如图所示，那么您可以这样做：

```
SELECT person, `date`, 
    SUM(score), SUM(b), SUM(g), SUM(m)
FROM MyTable
GROUP BY person, `date` 
```

# jquery - 如何使用 jPlayer 嵌入 .swf 文件

> ID：10621158
> 
> 赞同：0
> 
> 时间：2012-05-16T14:53:21.587
> 
> 标签：jquery, swfobject, jplayer

我正在尝试使用 jPlayer。当我看到该网站时，我可以看到媒体支持许多格式，除了`.swf`. 但我想嵌入 .swf 文件，并且我的目标是安装了 flash 的浏览器。如果有人遇到同样的问题，请告诉我如何使用 jPlayer 嵌入 .swf 文件。我试过了`SwfObject`。但我找不到用于暂停和停止和重复的 api。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:02:03.370

那是因为 jPlayer 像这样宣传自己：“jQuery **HTML5**音频/视频库”。它支持 Flash，但仅作为后备。这意味着，不支持您提供的任何媒体类型或不支持 HTML5 音频/视频标签的浏览器将获得其中的 Flash 后备部分。仔细阅读有关[**文件的**](http://jplayer.org/latest/developer-guide/#jPlayer-files)[**开发人员指南**](http://jplayer.org/latest/developer-guide/)并注意以下内容：[](http://jplayer.org/latest/developer-guide/#jPlayer-files)

 **```
$("#jpId").jPlayer( {
    swfPath: "/scripts/jPlayer"
}); 
```

你需要下载合适的皮肤（你喜欢的那个），它会自带。**

# tomcat - Tomcat 可以为不同的路径提供不同的 cookie 吗？

> ID：10621160
> 
> 赞同：1
> 
> 时间：2012-05-16T14:53:38.327
> 
> 标签：tomcat, cookies, session-cookies

我用谷歌搜索的一些东西非常令人困惑。基本上我想要的是：

*   /something 的 cookie
*   /someotherthing 的另一个 cookie，等等...没有多个 webapps...

有谁知道/如果我可以为Tomcat定义这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:47:39.340

我假设您在 Tomcat 服务器中部署了一个 Java EE 应用程序。如果是这样，您可以在请求级别设置 cookie。基本上有一个 servlet 过滤器生成一个 cookie 并为您正在访问的每个 /URL 发送它。

请记住，cookie 用于下次识别请求。因此，如果您为请求引入不同的 cookie .. 您可能无法识别请求。

# java - 读取多张工作表 - CSV - 使用 Java

> ID：10621163
> 
> 赞同：0
> 
> 时间：2012-05-16T14:53:47.967
> 
> 标签：java, csv

我有一个包含 5 张纸的 CSV 文件。我想阅读第二张纸。（基本上指定在我的代码中阅读哪张纸）。

目前使用 CsvReader 和 CsvWriter java 包来读取/写入 csv 文件。哪个好用！！！

但是无论如何我可以指定我想阅读哪张纸吗？

有人试过这个吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:25:13.497

CSV 文件格式不支持多张工作表。每个文件只能以 CSV 文件格式保存一张纸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:54:29.807

这是我读取 excel 文件的代码，您可以循环读取许多工作表。但是你必须使用插件jxl。只需下载并导入到 lib。这是我的链接可以帮助你：[http](http://www.mediafire.com/?fr1xkgdtx49awa8) ://www.mediafire.com/? fr1xkgdtx49awa8 。抱歉英语不好。

```
public List<Result> read(File inputWorkbook) throws IOException  {
    List<Result> list = new ArrayList<Result>();
    Workbook w;
    try {
        w = Workbook.getWorkbook(inputWorkbook);
        // Get the first sheet
        Sheet sheet = w.getSheet(0);
        // Loop over first 10 column and lines
        for (int j = 1; j < sheet.getRows(); j++) {
            Result rs= new Result(); 
            Cell cell0 = sheet.getCell(0, j);
            for (int i = 0; i < sheet.getColumns(); i++) 
            {
                Cell cell = sheet.getCell(i, j);
                CellType type = cell.getType();
                if (cell.getType() == CellType.LABEL) {
                    System.out.println("I got a label " + cell.getContents());
                }

                if (cell.getType() == CellType.NUMBER) {
                    System.out.println("I got a number " + cell.getContents());
                }
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return list;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:44:20.990

我认为您需要使用[Apache POI](https://poi.apache.org/spreadsheet/how-to.html)打开 exel 文档并使用

```
workbook.getSheet(sheetNumber); 
```

这是来自 apache 的关于读取/写入 excel的[示例](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/hssf/usermodel/examples/HSSFReadWrite.java)

# ruby - 如何杀死 Ruby-Java Bridge (Rjb) 加载的 JVM

> ID：10621164
> 
> 赞同：0
> 
> 时间：2012-05-16T14:53:50.493
> 
> 标签：ruby, jruby, rjb

*   我正在使用 Rjb 访问 Ruby 中的外部 Java 库。
*   我使用的 Java 类只能在每次 JVM 运行时配置一次。
*   在我的测试中，我需要针对不同的配置设置测试 Java 类。
*   因此，我正在寻找一种“重置”Rjb 的方法，即杀死 JVM 并启动一个新的。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T23:45:27.567

我使用VisualVM 检测JVM 的存在与否，发现Rjb::unload 有效。但是，当我尝试重新加载 JVM 时，它失败了。这是显示这一点的 irb 会话：

```
➜  ~  irb --prompt simple
>> require 'rjb'
=> true
>> Rjb::load
=> nil
>> Rjb::unload
=> 0
>> Rjb::load
RuntimeError: can't create Java VM
    from (irb):4:in `load'
    from (irb):4
    from /Users/kbennett/.rvm/rubies/ruby-1.9.3-p392/bin/irb:16:in `<main>'
>> 
```

——基思

* * *

[http://about.me/keithrbennett](http://about.me/keithrbennett)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:59:15.413

（免责声明：当我使用 rjb 时，它从来没有坚如磐石的稳定性。）

我将 Ruby 实例变量设置为 Java 类的实例。完成后，我将 Ruby 实例变量设置为`nil`.

# iphone - 解析 NSString。如何使用 if & else 语句检查特定字符串？

> ID：10621165
> 
> 赞同：-1
> 
> 时间：2012-05-16T14:53:53.130
> 
> 标签：iphone, objective-c, ios, ios5, nsstring

我正在解析场地元素，但是当其中一个场地未知时，它会返回“未知场地”的值。有些是已知的，有些则不是。我已完成以下操作以获取所有值，但如果找到“未知地点”字符串，则将其替换为“待宣布”。

这是我正在尝试的，但它不起作用：

```
if (event.venue != @"Unknown venue") {

    NSString *venue = event.venue;
    cell.venueLabel.text = venue;

    if (event.venue = @"Unknown venue") {

        NSString *venue = @"To Be Announced";
        cell.venueLabel.text = venue;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:55:30.470

```
if ([event.venue isEqualToString:@"Unknown venue"]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:55:44.343

比较字符串应该使用

```
 [event.venue isEqualToString:@"yourstring"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T15:41:20.303

注意常量的使用。但是，`nil`将更适合“uknown”而不是自定义文本。

```
#define VENUE_UNKNOWN @"Uknown venue"
#define VENUE_ANNOUNCED @"To Be Announced"

NSString *venue = event.venue;

if ([venue isEqualToString:VENUE_UNKNOWN]) {
    venue = VENUE_ANNOUNCED;
}

cell.venueLabel.text = venue;
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T14:59:13.933

使用下面的代码替换您的代码...

```
if ([event.venue isEqualToString:@"Unknown venue"]) {

        NSString *venue = @"To Be Announced";
        cell.venueLabel.text = venue;
}
else{
   NSString *venue = event.venue;
    cell.venueLabel.text = venue;
} 
```

# sqlite - SQLite [Err] 21 - 不是错误

> ID：10621166
> 
> 赞同：1
> 
> 时间：2012-05-16T14:53:54.393
> 
> 标签：sqlite, schema

我在 SQL 中有以下代码

```
-- SCHEMA VERSION: 2

-- Pre-update actions
PRAGMA foreign_keys = OFF;
-- end

-- Create HARVEST_PERIOD table
CREATE TABLE "main"."HARVEST_PERIOD" (
"ID"  INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
"CODE"  TEXT(64) NOT NULL,
"PERIOD"  TEXT(64) NOT NULL,
"CURRENT_STATE"  TEXT(128)
)
;

-- Post-update actions
INSERT OR REPLACE INTO "main"."SETTINGS" ("NAME", "VALUE") values ("SchemaVersion", "2");
PRAGMA foreign_keys = ON;
-- end 
```

新表按预期创建，设置表也按预期更新。得到这个的原因可能是什么：**[Err] 21 - 不是错误** 有没有更好的建议方法来创建新模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-14T06:14:47.000

我也遇到这个错误。后来我想通了。这是因为另一个应用程序连接到同一个数据库。所以，我的应用程序不能修改数据库——创建一个表。我通过关闭另一个数据库连接成功创建了它。

# python - 在文件中读取 NUL 的 Pythonic 方式

> ID：10621170
> 
> 赞同：1
> 
> 时间：2012-05-16T14:54:25.950
> 
> 标签：python, ascii, binary-data, filereader, non-ascii-characters

我正在使用 python 读取带有以下段的文本文件

（因为我是菜鸟，所以无法发布屏幕截图）但这是记事本++中的样子：

```
NULSOHSOHNULNULNULSUBMesssage-ID: 
```

错误：

```
Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    print(f.readline())
  File "C:\Python32\lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 7673: character maps to <undefined> 
```

以二进制形式打开文件：

```
f = open('file.txt','rb')
f.readline() 
```

给我文本作为二进制

> b'\x00\x01\x01\x00\x00\x00\x1a\xb7消息ID：

但我如何将文本获取为 ascii ？处理这个的最简单/pythonic的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:12:31.803

在文本模式下打开文件时，您可以明确告知使用哪种编码：

```
f = open('file.txt','r',encoding='ascii') 
```

但是，您的真正问题是不同的：您引用的二进制文件不能被读取为 ASCII，因为该字节`\xb7`超出了 ASCII 范围（0-127）。异常回溯告诉 Python 默认使用 cp1252 编解码器，它也无法解码您的文件。

您需要确定文件具有哪种编码，或者始终将其作为二进制处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:14:04.490

问题在于“位置 7673 中的字节 0x8f”，而不是“位置 1 中的字节 0x00”。即，您的 NUL 不是问题。如果您查看[wikipedia 上的 cp-1252 代码页](http://en.wikipedia.org/wiki/Windows-1252)，您会发现 0x8f 没有对应的字符。

更大的问题是您的文件不是单一编码：它似乎是文本段的二进制框架的混合。你真正需要做的是弄清楚这个文件的格式并将其解析为二进制片段（或者可能是一些更丰富的数据结构，如元组、列表、字典、对象等），然后将文本片段解码为 un​​icode需要进一步处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:06:18.487

也许以正确的阅读模式打开它？

```
f = open('file.txt','r')
f.readline() 
```

# c# - 为什么对象没有在键盘上移动键盘右/左键 Press XNA

> ID：10621173
> 
> 赞同：0
> 
> 时间：2012-05-16T14:54:33.740
> 
> 标签：c#, windows-phone-7, xna

我正在创建一个简单的 XNA 游戏，您可以在其中移动积木。但是该块没有在按键上移动我不知道为什么。

这是我的整体代码：

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    Texture2D ball;
    Texture2D bar;
    Vector2 ballPos;
    Vector2 barPos;
    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
        // Frame rate is 30 fps by default for Windows Phone.
        TargetElapsedTime = TimeSpan.FromTicks(333333);

        // Extend battery life under lock.
        InactiveSleepTime = TimeSpan.FromSeconds(1);
    }

    /// <summary>
    /// Allows the game to perform any initialization it needs to before starting to run.
    /// This is where it can query for any required services and load any non-graphic
    /// related content.  Calling base.Initialize will enumerate through any components
    /// and initialize them as well.
    /// </summary>
    protected override void Initialize()
    {
        // TODO: Add your initialization logic here
        ballPos = new Vector2(10, 10);
        barPos=new Vector2(10,GraphicsAdapter.DefaultAdapter.CurrentDisplayMode.Width - 20);

        base.Initialize();
    }

    /// <summary>
    /// LoadContent will be called once per game and is the place to load
    /// all of your content.
    /// </summary>
    protected override void LoadContent()
    {
        ball = Content.Load<Texture2D>("ball");
        bar = Content.Load<Texture2D>("bar");

        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);

        // TODO: use this.Content to load your game content here
    }

    /// <summary>
    /// UnloadContent will be called once per game and is the place to unload
    /// all content.
    /// </summary>
    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    /// <summary>
    /// Allows the game to run logic such as updating the world,
    /// checking for collisions, gathering input, and playing audio.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        UpdateBarLocation();
        // TODO: Add your update logic here

        base.Update(gameTime);
    }
    private void UpdateBarLocation()
    {
        KeyboardState newState = Keyboard.GetState();

        if (newState.IsKeyDown(Keys.Right) && (barPos.Y < GraphicsAdapter.DefaultAdapter.CurrentDisplayMode.Height))
            barPos.Y = barPos.Y + 5;
        else if (newState.IsKeyDown(Keys.Left) && (barPos.Y > 2))
            barPos.Y = barPos.Y - 5;
    }

    /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        // TODO: Add your drawing code here
        spriteBatch.Begin();
        spriteBatch.Draw(ball,ballPos, Color.White);
        spriteBatch.Draw(bar, barPos, Color.White);
        spriteBatch.End();

        base.Draw(gameTime);
    }
} 
```

您可以在 updateBarLocation 函数中看到我正在尝试移动栏，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:13:48.253

屏幕分辨率是多少？

这是行不明确

```
barPos=new Vector2(10,GraphicsAdapter.DefaultAdapter.CurrentDisplayMode.Width - 20); 
```

第一个参数是 x 轴，第二个是 y 轴。所以宽度通常在x轴上处理。你确定你分配的东西没问题吗？如果是，那么屏幕上最初的位置是什么？

> 但是该块没有在按键上移动我不知道为什么。

你甚至没有更新 Block 的位置

# intellij-idea - 智能快捷方式

> ID：10621175
> 
> 赞同：0
> 
> 时间：2012-05-16T14:54:54.697
> 
> 标签：intellij-idea

我想知道，如果有人知道这种快捷方式：假设我正在搜索某些内容并获得一个包含许多结果的结果窗口，是否有一个快捷方式可以在没有鼠标帮助的情况下在列表中导航我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:17:43.453

在 IntelliJ IDEA 11.0.2 中

每当我使用 Ctrl+Shift+F 执行“在路径中查找”并且搜索完成时，焦点已经在搜索结果中，并且可以使用箭头键进行导航。

如果焦点不在搜索窗口中，则可以使用 Alt+# 组合将您带到窗口。在我的设置中，它是 Alt+3（我的“查找”选项卡上的标签是“3：查找”，因此很容易看出 Alt-3 是正确的组合。）

我怀疑我可能不明白您在寻找什么，但也许它会有所帮助。

# java - Eclipselink 未将更新保存到实体内的字段

> ID：10621176
> 
> 赞同：1
> 
> 时间：2012-05-16T14:54:56.497
> 
> 标签：java, jpa, eclipselink

我正在使用 Eclipselink，并且我有一个 JPA 实体，它基本上是一个 gzip 压缩数据的字节数组，作为 blob 存储在数据库中。但是，这些数据被包装在一个管理字节数组并可以正确解码的类（GzipByteArray）中。我使用 @Converter 和 @Convert 注释将数据库中的内部 byte[] 数组转换为我的 GzipByteArray 包装类。Entity 实际上将 GzipByteArray 类存储为变量类型。一切正常。

但是，当我想将一些文本附加到 GzipByteArray 时，我会在其上调用一个方法来附加文本。Eclipselink 未检测到对父实体类的此参数的更改。

我在我的 GzipByteArray 上放置了一个 .equals() 和 .hashCode() 方法，以确保它考虑到内部 byte[] 数组的变化。那没有帮助。根据我的日志记录，Eclipselink 甚至没有调用 .equals()。

我可以检测到更改的唯一方法是创建一个新的 GzipByteArray 实例并使用 setter 对其进行修改。

我假设 Eclipselink 正在使用默认的[DeferredChangeDetectionPolicy](http://wiki.eclipse.org/Introduction_to_EclipseLink_Transactions_%28ELUG%29#Deferred_Change_Detection_Policy "DeferredChangeDetectionPolicy")。这是如何运作的？我什至下载了Eclipselink的源代码，但我无法弄清楚。我可以以某种方式手动强制将此字段标记为“脏”吗？对象的实例 ID 是否必须更改才能让 Eclipselink 检测到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:31:45.337

在您的转换器中，您需要为 isMutable() 返回 true，这将确保 EclipseLink 使用延迟更改检测。您还可以将 @Mutable 添加到您的映射中。

如果可能，在更改值时调用 set 方法而不是使用 mutable 会更有效。这将允许 EclipseLink 使用属性更改跟踪，而不必在每次提交时比较整个字节数组的更改。

# powershell - PowerShell 代码以交互方式工作，但不在脚本内

> ID：10621182
> 
> 赞同：2
> 
> 时间：2012-05-16T14:55:11.677
> 
> 标签：powershell, wmi, winrm

问候！

所以，我只是在进行一些 powershell 编程的日常工作，然后遇到了这个小家伙：

```
Get-WmiObject : Invalid class 
At line:184 char:19
+ $RECApp = gwmi <<<<  Win32_product | ? {$_.Name.Contains($Application)}
+ CategoryInfo          : InvalidOperation: (:) [Get-WmiObject], ManagementException
+ FullyQualifiedErrorId: GetWMIManagementException,Microsoft.PowerShell.Commands.GetWmiObjectCommand 
```

有趣的是，此错误仅在从脚本执行代码时显示，但当手动输入命令行时，相同的代码可以工作。我不知道这是否与我正在执行脚本的远程计算机有关，但是为什么要这样做，如果手动输入时它可以工作，但从脚本执行时却不能。我会在这里给你一段我的代码：

```
Enter-PSSession -ComputerName $serverName
$App = gwmi Win32_product | ? {$_.Name.Contains($Application)}
$App.Uninstall();
exit 
```

总而言之，为什么当手动输入到命令行时，这段代码会像魅力一样工作，但是当从脚本执行时，我会得到上述错误？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T15:00:46.837

`Enter-PSSession`仅供交互使用。如果将该行放在脚本中，则后续行*不会*在远程会话中运行。如果你想在一个脚本中远程运行一些脚本，你可以这样做：

```
$session = New-PSSession -ComputerName $serverName
Invoke-Command -Session $session {
    param($name)

    $App = gwmi Win32_product | ? {$_.Name.Contains($name)}
    $App.Uninstall();
} -arguments $application 
```

那里有一点问题，因为我必须将`$application`其作为参数传递给，`Invoke-Command`因为远程会话中不存在该变量。退后一步，您可以将上面的代码写得更简单一些，如下所示：

```
$app = gwmi -computer $servername win32_product | ? {
      $_.name.contains($application)
} 
```

现在，问题在于您`win32_product`要从服务器拉回所有对象并在本地计算机上进行过滤。这是很多不必要的网络流量。如果你可以在*远程*机器上过滤会更快，所以让我们再修改一下：

```
$app = gwmi -computer $servername -query `
    "select * from win32_product where name = '$application'"
$app.Uninstall() 
```

Now only the `win32_product` you want will be retrieved from the remote machine. I haven't tested the above `gwmi -computer` variants, so it's more illustrative of technique and syntax. You may have to play a bit with it.

# javascript - Android WebView canGoBack 始终为真

> ID：10621192
> 
> 赞同：11
> 
> 时间：2012-05-16T14:55:39.523
> 
> 标签：javascript, android, webview, back

我有一个正在加载社交媒体页面的 WebView。我已经重写了 Back 按钮来调用`goBack`WebView 上的方法，直到`canGoBack()`返回`false`。然后它调用`super.onBackPressed()`. 问题是 Twitter 和 YouTube 使用 Javascript 的方式会`canGoBack()`返回`true`，除非你非常快速地点击返回按钮 4 次。

我尝试使用当前 url 检查原始 url，但该页面的 url 与传入的不同。

有谁知道让后退按钮调用 WebView 的`goBack`方法的方法，直到你一开始，然后调用`super.onBackPressed`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-02T11:06:14.117

好吧，这并不理想，但是您可以通过使用数组（或只是要增加和减少的整数）手动跟踪导航历史记录，并在每次更改时将当前 url 推入其中，并在您按下时弹出最后一个 url后退按钮，如果数组为空（或整数为 0），则调用`super.onBackPressed()`.
要在 url 更改时执行代码，您可以覆盖（[链接到文档](https://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading(android.webkit.WebView,%20android.webkit.WebResourceRequest))）`boolean shouldOverrideUrlLoading (WebView view, WebResourceRequest request)`的 方法。 这样，网页的 javascript 就不会干扰您处理后退按钮的方式。`WebViewClient`

# python - 遍历字典并以某种格式打印

> ID：10621198
> 
> 赞同：3
> 
> 时间：2012-05-16T14:55:49.897
> 
> 标签：python, dictionary

我有以下字典：

```
# a small DB of people who stole my books

dic = {
'Cohen'     : 'Calvino' 'Evertt' 'Borges',
'Larry'     : 'The Bible', 
'Volanski'  : 'Phone Book'
}

# here's an abortive attempt to print it in a CSV format
for k in dic.keys():
    print (k, '\t')
for v in dic.keys():
    print (dic[v], ' ') 
```

**这是丑陋的输出：**

```
Volanski    
Phone Book  
CalvinoEverttBorges  
The Bible  
Cohen   
Phone Book  
CalvinoEverttBorges  
The Bible  
Larry   
Phone Book  
CalvinoEverttBorges  
The Bible 
```

**这就是我希望输出的样子：**

```
Cohen      Larry       Volanski  
Calvino    The Bible   Phone Book  
Evertt  
Borgest 
```

（只有制表符分隔，我没有在这里展示）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:25:04.120

```
dic = {
   'Cohen'     : ['Calvino', 'Evertt', 'Borges'],
   'Larry'     : ['The Bible'],
   'Volanski'  : ['Phone Book']
}

ordered = []
maxlen = 0

for k in sorted(dic.keys()):
    lst = [k] + dic[k]
    maxlen = max(len(lst), maxlen)
    ordered.append(iter(lst))

for i in range(maxlen):
    print "\t".join(next(j, '') for j in ordered) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:35:12.920

您可以制定更整洁的格式

```
dic = {'Cohen'     : ['Calvino', 'Evertt', 'Borges'],
       'Larry'     : ['The Bible'],
       'Volanski'  : ['Phone Book']}

# Get max name size
mx_nm_len = len(max(dic,key=len))
mx_bk_len = max([len(max(books, key=len)) for books in dic.itervalues()])

# Store max name size + 1
mx = max([mx_nm_len, mx_bk_len]) + 1

# Store people
keys = dic.keys()

# Create generic format code to print neat list
fmat = ("%-"+str(mx)+"s")*len(keys)

# Print header line
print fmat % tuple(keys)

# similar to zip command but works for any number of lists
# Assumes all dic.values() are lists
# "zips" to longest list and uses None when any given list runs out of values
books = map(None, *dic.values())

# replaces None values in row outputs with empty strings and prints result using
# string format code (fmat)
for row in books:
    row = tuple([book if book!= None else "" for book in row])
    print fmat % row 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:08:48.797

关键是您没有以正确的方式开始定义数据。您定义第一个条目的方式被 Python 准确地理解为它的打印方式：单个字符串。如果你想要多个元素，你需要将你的元素定义为包含多个元素：

```
dic = {
  'Cohen'     : ['Calvino', 'Evertt', 'Borges'],
  'Larry'     : ['The Bible'], 
  'Volanski'  : ['Phone Book']
} 
```

现在您可以简单地执行此操作：

```
for key, value in dic.items():
    print "%s\t%s" % (key, "\t".join(value)) 
```

**编辑**好的，没有看到您想要顶部的名称和向下的标题。有点棘手，但这会做到：

```
import itertools
print "\t".join(dic.keys())
for books in itertools.izip_longest(*dic.values(), fillvalue=''):
    print "\t".join(books) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:52:44.580

此解决方案可确保对输出进行排序，并且项目会出现在正确的列中。我`expandtabs()`用来设置标签长度，使其打印得很好。

```
import itertools

dic = {'Cohen':['Calvino', 'Evertt','Borges'],'Larry': ['The Bible'], 'Volanski'  :['Phone Book']}

sorted_keys = sorted(dic.keys())
for name in sorted_keys:
    print (name+'\t').expandtabs(15),
print
zippp = list(itertools.izip_longest(*[dic[i] for i in sorted_keys]))
for i in xrange(len(zippp[0])):
    for j in xrange(len(zippp)):
        if zippp[i][j]:
            print (zippp[i][j]+'\t').expandtabs(15),
    print 
```

产生：

```
Cohen           Larry           Volanski       
Calvino         The Bible       Phone Book     
Evertt         
Borges 
```

# c# - 在for循环中更新表

> ID：10621202
> 
> 赞同：1
> 
> 时间：2012-05-16T14:55:59.447
> 
> 标签：c#, mysql

我正在尝试在 ac# for 循环和 if 语句以及一些 if 语句中更新 mysql 表。在使用断点运行时，它将运行 executenonquery 一次，但在下一个循环中它不会命中。即使我确实点击了非查询，它也不会更改表信息。

ffi 字符串是我表中列的名称，字符串 val 是我要输入的内容。我知道这不是安全的方法，但是当我可以让它按应有的方式工作时，我会更改它。更新了代码，它现在每次应该运行 NONQUERY，但仍然没有更新表代码：

```
for (a = 0; a <= z; a++)
 {

   if (ds3.Tables[0].Rows[a][1].ToString() == dataGridView1.Rows[i].Cells[0].Value.ToString())
     {
      if (ds3.Tables[0].Rows[a][2].ToString() == dataGridView1.Rows[i].Cells[1].Value.ToString())
         {
           if (ds3.Tables[0].Rows[a][3].ToString() == dataGridView1.Rows[i].Cells[2].Value.ToString())
            {
              MessageBox.Show("We have a match " +  dataGridView1.Rows[i].Cells[0].Value.ToString() + " " + dataGridView1.Rows[i].Cells[1].Value.ToString() + " " + dataGridView1.Rows[i].Cells[t].Value.ToString());
                     try
                       {
                         string ffi = textBox1.Text;
                          decimal val = decimal.Parse(dataGridView1.Rows[i].Cells[t].Value.ToString());

                                                MySqlCommand cmd = new MySqlCommand("Update spt_results  SET " + ffi + " = " + val + " where project_Id =" + dataGridView1.Rows[i].Cells[0].Value.ToString() + "",connection2);
                                                //cmd.Connection = connection2;'
                                               // cmd.Connection.Open();

                                                cmd.ExecuteNonQuery();
                                                //cmd.Connection.Close();
                        }
                      catch
                      {

                      } 
```

消息框确实显示每个循环，connection2.open 每次都会运行 感谢您的查看和您的帮助 更新字符串在运行时看起来像“update spt_results SET FFI 300 = '15' where project_Id =AAA007”

布伦特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:00:19.297

看看你的代码：

```
MySqlCommand cmd = new MySqlCommand();
cmd.CommandText = // ... snip SQL injection invitation
connection2.Open();
cmd.ExecuteNonQuery();
connection2.Close(); 
```

`MySqlCommand`没有联系。您正在打开和关闭*连接*，但这与命令无关。我实际上希望`cmd.ExecuteNonQuery()`抛出一个异常，因为它没有连接......

请注意，您应该`using`为命令和连接使用语句，以确保即使面对异常也能清理所有资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:58:55.307

`cmd.Connection = connection2;`之后使用 `connection2.Open();`。

当您尝试执行时`cmd.ExecuteNonQuery()`，它会引发错误，因为没有与 Command 绑定的 Connection 并且错误被捕获在 catch 块中。你不知道是因为你没有在 catch 块中为错误做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:52:20.773

如果取消注释您的代码：*连接正确打开并且您的代码应该可以工作。但是我建议您在循环之前打开一次连接，然后在最后关闭它。*

另一点是你捕获了所有异常，这不好。问题可能出在查询上，尝试在控制台或其他 MySQL 客户端中运行“update spt_results SET FFI 300 = '15' where project_Id =AAA007”。它会抛出一个错误。必须引用字段名称“FFI 300”，因为它包含一个空格，并且值“AAA007”必须作为字符串文字引用。试试这个查询 -

```
UPDATE spt_results SET `FFI 300` = '15' WHERE project_Id = 'AAA007' 
```

# reporting-services - SSRS 2012 报告服务安全问题

> ID：10621205
> 
> 赞同：0
> 
> 时间：2012-05-16T14:56:10.960
> 
> 标签：reporting-services, reporting-services-2012

我试图在我的 SSRS 服务器上设置一些安全和邮件设置，但是我收到以下错误：

> SQL Server 报告服务
> 
> 错误
> 
> 报表服务器数据库中发生错误。这可能是由于数据库中的连接失败、超时或磁盘不足造成的。(rsReportServerDatabaseError) 获取联机帮助过程或函数“SetPolicy”需要未提供的参数“@PrimarySecDesc”。
> 
> 家

不确定发生了什么，因为 SETPOLICY 似乎在我的数据库中作为存储过程......

我认为这是 .config 文件的问题，这些文件已被修改以使报告与匿名登录一起工作，但是当这样做时，报告管理器不再工作。有没有办法重置所有 .config 文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:34:32.063

SETPOLICY 与安全有关。尝试检查 rsreportserver.config 文件中的标记。

我的看起来像这样：

```
<Authentication>
    <AuthenticationTypes>
        <RSWindowsNegotiate/>
        <RSWindowsNTLM/>
    </AuthenticationTypes>
    <EnableAuthPersistence>true</EnableAuthPersistence>
</Authentication> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:07:26.003

问题是 .config 文件中的错误 - 重新安装 SSRS 2012 解决了问题:)

# javascript - 从 Javascript 调用 commandlink 操作

> ID：10621209
> 
> 赞同：2
> 
> 时间：2012-05-16T14:56:25.877
> 
> 标签：javascript, jsf, jakarta-ee

我试图使用 ah:commandLink 从 javascript 调用 bean。

我有一个 commandLink

```
 <h:commandLink action="#{bean.go()}"
                    styleClass="simple-submit-button" id="uLink">
                    <f:param name="userId" value="#{param['userId']}" />
                </h:commandLink> 
```

这叫我的豆子。

并想从 javascript 调用此 commandLink，如下所示：

```
document.getElementById('uLink').click(); 
```

但我总是收到错误：document.getElementById('uLink') 为空。

我试过这个：

*   设置 h:commandLink immediate="false" 而不是 document.getElementById('uLink').click() 我使用 document.getElementById('uLink').immediate=true;
*   使用 h:commandButton 代替。
*   使用 document.getElementById('formId:uLink').click();

有谁知道我如何得到这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:09:13.037

在您的浏览器中执行`view source`并查看按钮的确切 ID，它可能看起来像`someContainerID:uLink`或`someFormID:uLink`不仅`uLink`如此，您可能需要使用

```
document.getElementById('someFormID:uLink').click(); 
```

或者

```
document.getElementById('someContainerID:uLink').click(); 
```

# php - SVN 如何告诉您要添加哪些文件

> ID：10621212
> 
> 赞同：0
> 
> 时间：2012-05-16T14:56:30.853
> 
> 标签：php, svn, batch-file

我的工作副本中有很多修改过的文件。

*   我如何知道哪些文件是新的（SVN 中不存在），以及如何添加这些文件？

*   如果我在我的工作副本中删除一个文件，我怎样才能在 SVN 中删除它？

我使用 Windows 并且想要 DOS 或 PHP 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:57:39.173

`svn status`将告诉您哪些文件当前不在您的存储库中，哪些文件将被合并等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:05:47.250

如果您导航到版本控制下的文件夹并运行

```
svn status 
```

应列出已添加（旁边的 A）、已删除 (D)、已修改文件 (M) 和全新 (?) 的列表。

不要在 SVN 之外删除，使用 SVN 通过运行删除文件

```
svn delete "filename" 
```

如果您在更新时不这样做，他们将继续回来。

完整的命令列表：

[http://www.linuxfromscratch.org/blfs/edguide/chapter03.html](http://www.linuxfromscratch.org/blfs/edguide/chapter03.html)

# javascript - 我的一些应用程序初始化程序似乎没有触发？

> ID：10621213
> 
> 赞同：0
> 
> 时间：2012-05-16T14:56:35.203
> 
> 标签：javascript, ruby-on-rails, backbone.js, coffeescript, marionette

我有一个名为的顶级应用程序`SearchApp`，它有一个名为`TeamApp`. 这些文件的结构如下：

```
search_app.js.coffee # The top-level application.
team_app/
  app.js.coffee
  team_list.js.coffee
  team_invite.js.coffee 
```

我在以下位置初始化我的应用程序`search_app.js.coffee`：

```
window.Domainer = {}

# This is the top level application.
Domainer.SearchApp = new Backbone.Marionette.Application()

# Assign a region to the Application.
Domainer.SearchApp.addRegions(stage: '#stage') 
```

并在 html 视图中启动它：

```
<script>Domainer.SearchApp.start({});</script> 
```

子模块`TeamApp`分布在几个文件中（如下）。问题是`TeamApp`模块中的某些文件似乎无法将初始化程序添加到`SearchApp`. 事实证明，我可以`console.log`在一个文件中进行初始化，但不能在另一个文件中进行初始化。

```
# team_app/app.js.coffee
Domainer.SearchApp.module "TeamApp", (TeamApp, SearchApp, Backbone, Marionette, $, _) ->

  # Initializers
  # ----------

  SearchApp.addInitializer (options) ->
    console.log "This will log when I call Domainer.SearchApp.start()"

  # In coffeescript it's important to explicitly return.
  return TeamApp

# team_app/team_list.js.coffee
Domainer.SearchApp.module "TeamApp", (TeamApp, SearchApp, Backbone, Marionette, $, _) ->

  class CompactSearcher extends Marionette.ItemView
    # ... various code relating to this view.

  class TeamList extends Marionette.CollectionView
    # various code relating to this view.

  SearchApp.addInitializer (options) ->
    console.log "This will never log for some reason."

  return TeamApp

# team_app/invite_view.js.coffee
Domainer.SearchApp.module "TeamApp", (TeamApp, SearchApp, Backbone, Marionette, $, _) ->

  class InviteView extends Marionette.ItemView
    # ... various code relating to this view.

  SearchApp.addInitializer (options) ->
    console.log "This will never log either."

  return TeamApp 
```

不能将一个模块拆分为多个文件吗？这是我能想到的唯一事情发生在这里。还有什么可能导致问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:39:02.893

仅供参考 - 我现在更新了 Marionette 以支持这种情况。

```
 MyApp = new Backbone.Marionette.Application();

MyApp.module("Foo", function(Foo){
  Foo.def1 = true;
});

MyApp.module("Foo", function(Foo){
  Foo.def2 = true;
});

MyApp.Foo.def1; //=> true
MyApp.Foo.def2; //=> true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:39:04.307

你问：

> 不能将一个模块拆分为多个文件吗？

检查[骨干木偶源](https://github.com/derickbailey/backbone.marionette/blob/master/lib/backbone.marionette.js#L705)确认这正是正在发生的事情：

```
// Get the module name, and check if it exists on
// the current parent already
moduleName = moduleNames[i];
module = parentModule[moduleName];

if (!module){ 
  // This is where the module definition is used...
}

return module; 
```

因此，如果您尝试多次定义同一个模块，则只会使用第一个定义。

# html - Notepad++ 中的正则表达式用于替换

> ID：10621215
> 
> 赞同：0
> 
> 时间：2012-05-16T14:56:51.173
> 
> 标签：html, regex, notepad++

我已经搜索了该信息，但无法弄清楚如何正确理解正则表达式。我有一个 html 文件，并且有多个`<img>`标签。这些标签中的每一个都`src`具有以下数据的属性：`/newsletter/images/light/b/NUMERICVALUE/IMAGENAME.jpg`

假设 the`NUMERICVALUE`和 the在每个属性`IMAGENAME`中总是不同的值。`src`

我需要的是`/NUMERICVALUE`从每个网址中删除。我想怎么做？

感谢您的任何建议。

以下是示例列表：

> `/newsletter/images/light/b/617359405/lf-header.jpg` `/newsletter/images/light/b/617359406/up-logo.jpg` `/newsletter/images/light/b/617359407/logo-header.jpg`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:04:10.603

搜索：`src=\"\/newsletter\/images\/light\/b\/[^\/]*\/([^\"]*)\"`
替换：`src="/newsletter/images/light/b/\1"`

解释：

*   定义完整的 URI：`\/newsletter\/images\/light\/b\/[^\/]*\/([^\"]*)`
*   这将找到没有 / 斜线的任何内容`[^\/]*`
*   这将找到没有 " 引用的任何内容`([^\"]*)`
*   `(`and告诉正`)`则表达式引擎捕获它的内容
*   在替换中`\1`强制正则表达式引擎`1`在此位置插入捕获

**编辑**：更新以用于`src=`评论中提到的所有属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:05:44.447

我猜 NUMERICVALUE 是一个实际的数值，所以一个简单的解决方案：

```
Find what: /newsletter/images/light/b/\d+/([a-zA-Z0-9_]+).jpg
Replace with: /newsletter/images/light/b/\1.jpg 
```

将内容更改`[a-zA-Z0-9_]`为您需要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:00:21.767

这几乎没有编程相关，但无论如何：

```
Find what: (<img src=.*/)\d+/
Replace with: \1 
```

输入：

```
<img src="/newsletter/images/light/b/654/IMAGENAME.jpg"/>
<img src="/newsletter/images/light/b/5752/IMAGENAME.jpg"/>
<img src="/newsletter/images/light/b/78697345/IMAGENAME.jpg"/>
<img src="/newsletter/images/light/b/7896789/IMAGENAME.jpg"/>
<img src="/newsletter/images/light/b/45/IMAGENAME.jpg"/>
<img src="/newsletter/images/light/b/8/IMAGENAME.jpg"/>
<img src="/newsletter/images/light/b/4567837/IMAGENAME.jpg"/> 
```

输出：

```
<img src="/newsletter/images/light/b/IMAGENAME.jpg"/>
<img src="/newsletter/images/light/b/IMAGENAME.jpg"/>
<img src="/newsletter/images/light/b/IMAGENAME.jpg"/>
<img src="/newsletter/images/light/b/IMAGENAME.jpg"/>
<img src="/newsletter/images/light/b/IMAGENAME.jpg"/>
<img src="/newsletter/images/light/b/IMAGENAME.jpg"/>
<img src="/newsletter/images/light/b/IMAGENAME.jpg"/> 
```

# wpf - 将 WPF MVVM 和 ADO.Net 实体框架

> ID：10621227
> 
> 赞同：0
> 
> 时间：2012-05-16T14:57:33.793
> 
> 标签：wpf, mvvm, ado.net-entity-data-model

我正在尝试使用 MVVM 和 ADO.Net Entity Framework 创建一个 WPF 项目。不过，我确实有几个问题。

1.  我是否在 MVVM 设计的模型文件夹中创建实体框架模型？
2.  或者我是否必须为 MVVM 模型的每个项目创建一个新项目（即 Views Project 作为 WPF 项目，Model Project 作为类库，ViewModel 项目作为类库）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:31:20.670

你把东西放在哪里并不重要，但是是的，我通常把我所有的 EF 或 Linq-Sql 东西放在一个模型文件夹中，因为它们通常会存放我所有的模型类，并将它们放在一起。虽然它有点灰色地带，因为它也在做 DataLayer 的东西，所以也要记住这一点。

关于你的第二点，不。模型、视图模型和视图都应该在同一个项目中。

看看[这个](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)以获得关于 MVVM 的一些指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:42:54.513

> 我是否在 MVVM 设计的模型文件夹中创建实体框架模型？

我通常为模型创建一个单独的项目，该模型对存储无知（使用 POCO）并且对使用无知。

> 或者我是否必须为 MVVM 模型的每个项目创建一个新项目（即 Views Project 作为 WPF 项目，Model Project 作为类库，ViewModel 项目作为类库）？

如果您计划每个模型拥有一种以上类型的视图模型（例如，一种用于 WPF，一种用于服务，一种用于另一种服务），那么将您的视图模型分离到它们自己的程序集中。

如果您的视图仅代表一个模型层，那么您可以在同一个程序集中开始您的视图和视图模型，然后如果您遇到在同一视图下有多个模型的情况（每个模型都有自己的视图-模型）。

* * *

您还应该考虑是否希望 ADO.NET 的模型成为您的主要模型（您的视图模型基于该模型），或者您是否想将其视为一种用于存储的视图模型（存储服务所在的位置）一种观点）。

# c# - ASP.NET 创建 RSS 提要，没有错误但没有数据

> ID：10621228
> 
> 赞同：0
> 
> 时间：2012-05-16T14:57:36.013
> 
> 标签：c#, asp.net, .net, rss

作为记录，我对 Java 和 RnR 比任何 .NET 都熟悉得多。我在这里和那里修复了一个函数中的一些错误，并在这里和那里搜索了一些新的“功能”，但这不是我的专长。好的，请注意，这是我的问题，我需要为我们在 ASP.NET 中构建的网站创建一个 RSS 提要。谷歌提供了一些解决方案，但我以这个为例： [http ://www.aspfree.com/c/a/C-Sharp/Creating-an-RSS-Feed-with-ASP-Net-Written-在-C-夏普/](http://www.aspfree.com/c/a/C-Sharp/Creating-an-RSS-Feed-with-ASP-Net-Written-in-C-Sharp/)

奇怪的是，我完全可以正常工作，没有看到任何错误，但是运行它时我只得到一个空白页。我已经测试了 SQL，它可以工作并返回我想要的行，但我不知道如何诊断它是否连接到数据库或为什么它没有返回任何内容。这是代码：

asp.aspx.cs：

```
using System;
using System.Text;
using System.Collections;
using System.ComponentModel;
using System.Data;
using System.Data.SqlClient;
using System.Drawing;
using System.Xml;
using System.Web;
using System.Web.SessionState;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.HtmlControls;
using System.Diagnostics;

       //Class for returning RSS feed Data

   public partial class rss : System.Web.UI.Page
{

    private void Page_Load(object sender, System.EventArgs e)
    {
        string sSource;
        string sLog;
        string sEvent;
        sSource = "RSS Feed";
        sLog = "Application";
        sEvent = "Database Connectiont";
       // Connect to the Database
       SqlConnection myConnection = new SqlConnection("Data Source=localhost;Initial Catalog=events;Persist Security Info=True;User ID=wa;Password=password;");
       // Retrieve the SQL query results and bind it to the Repeater
       const string SQL_QUERY = "SELECT EventName, Comments, URL, StartDate FROM event WHERE SaleDateTo > getdate() AND SaleDateFrom < getdate() AND redirecttourl is not null ORDER BY EventDate";
       SqlCommand myCommand = new SqlCommand(SQL_QUERY, myConnection);
       bool IsDbAvailable = true;
       try {
           myConnection.Open();
           rptRSS.DataSource = myCommand.ExecuteReader(CommandBehavior.CloseConnection);
           rptRSS.DataBind();
           myConnection.Close();
           }
           catch {
                IsDbAvailable = false;
                if (!EventLog.SourceExists(sSource))
                        EventLog.CreateEventSource(sSource,sLog);
            }
        finally {
            myConnection.Close();
        }     
    }

    protected string FormatForXML(object input)
    {
       string data = input.ToString(); //cast input to string

       // replace those characters disallowed in XML documents
       data = data.Replace("&", "&amp;");
       data = data.Replace("\"", "&quot;");
       data = data.Replace("'", "&apos;");
       data = data.Replace("<", "&lt;");
       data = data.Replace(">", "&gt;");

       return data;
    }
} 
```

rss.aspx：

```
 <%@ Page language="c#" CodeFile="rss.aspx.cs" ContentType="text/xml" AutoEventWireup="false" Inherits="rss"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >

<asp:Repeater id="rptRSS" runat="server">

  <HeaderTemplate>
    <rss version="2.0">
      <channel>
        <title>TA On-Sale Feed</title>
        <link>http://www.website.com/rss.aspx</link>
        <description>All events current on-sale</description>
  </HeaderTemplate>

    <itemTemplate>
    <event>
    <title><%#FormatForXML(DataBinder.Eval(Container.DataItem,"EventName"))%>
    </title>
    <description>
    <%#FormatForXML(DataBinder.Eval(Container.DataItem, "Comments"))%>
    </description>
    <link>http://order.ticketalternative.com<%#DataBinder.Eval(Container.DataItem, "url")%>
    </link>
    <eventdate>
    <%#DataBinder.Eval(Container.DataItem, "StartDate")%>
    <eventdate>
    </event>
    </ItemTemplate>
     <FooterTemplate>
          </channel>
        </rss>
      </FooterTemplate>
    </asp:Repeater>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:12:25.020

使用 SQLDataAdpter 将结果集填充到 DataTable/Dataset 中，然后将 Dataset/Table 分配给 rtpRSS.DataSource。

# javascript - Codeigniter 文件上传 - 可以使用回调吗？(v2)

> ID：10621230
> 
> 赞同：0
> 
> 时间：2012-05-16T14:57:42.537
> 
> 标签：javascript, codeigniter, frameworks, upload

是否可以使用 Codeigniter 框架放入某种形式的回调，以检查上传的文件是否存在，如果存在，则给出 javascript 确认警报，说明“覆盖”。

如果他们单击“确定”-它将覆盖文件，如果“取消”它将在文件中附加一个数字（而不是覆盖现有文件）。

本质上，在用户单击确认警报上的确定/取消后，必须调用下面的 config['overwrite'] - 这可能吗？

```
$config['overwrite']    = FALSE;        
$this->load->library('upload', $config); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:17:45.540

您创建一个进行检查的控制器/方法，

使用 javascript 创建一个简单的按钮（不是 type="submit"，因为您将手动触发 form.submit()）您通过 ajax 将文件名发送到您的控制器/方法，并根据在客户端显示一个确认框对于您收到的响应，如果他单击“确定”取消，则向表单（通过 javascript）添加一个“覆盖”参数，然后提交。

我在这里提供的解决方案是基于我对您所解释的内容的理解，当他单击取消时，我并没有真正理解在文件中附加一个数字的意义，但是如果您解释得更多，您可能会得到更好的答案，

祝你好运。

# r - 输入变量列表，无需在它们之间手动添加逗号

> ID：10621233
> 
> 赞同：3
> 
> 时间：2012-05-16T14:57:53.853
> 
> 标签：r, list, variables

基本上我想实现这一点：

```
vars <- c(x1, x20, x37, etc)
summary(data[vars]) 
```

但是，我的变量列表很长，并且*它们之间没有逗号*。

编辑：`Data`有 500 个变量，`vars`是我要选择的列表。变量名称不遵循任何模式。该列表的格式为`x1 x20 x37 etc`，即用空格分隔。此列表来自 SAS 语法文件，不是 R 工作区的一部分。

我研究了使用分隔符连接变量的函数，例如`cat()`. 然而，这从一开始就需要一个对象。另一种方法是在编辑器中使用查找/替换（逗号空格），但我认为这是一个肮脏的黑客。

显然，我在定义变量列表时遗漏了一些东西；必须有一个简单的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T15:26:41.373

用这个：

```
data <- data.frame(x1 = rnorm(10), x2 = rnorm(10))
vars <- "x1 x2"
data[unlist(strsplit(vars, ' '))] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:54:40.770

看起来它们已经是您工作区中变量的名称？

```
x <- ls()[grep('^x\\d', ls())] 
```

如果您没有其他任何以 x 和您想要包含的数字开头的东西，那可能会让您到达那里。

如果它们是您要粘贴的文本字符串或其他东西，那么也许

```
x <- scan() 
```

（总的来说，你的问题很模糊）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:28:27.147

假设您可以将文件放入文本文件（很难说不知道数据来自哪里）：将变量保存为纯文本文件。使用扫描将它们读入数据文件：

```
df <- read.table("foo.txt", sep=" ") 
```

然后，您可以使用`names(df)`;命名数据框中的列。或者，如果您可以获得包含列名的文本文件，您可以使用

```
df <- read.table("foo.txt", header=TRUE, sep=" ") 
```

# jquery - Jquery .on click 在第一次点击时不起作用

> ID：10621234
> 
> 赞同：8
> 
> 时间：2012-05-16T14:57:59.137
> 
> 标签：jquery, forms, click

我有一个文本字段，当用户从选择字段中选择一个选项或在文本字段中输入文本并点击链接时，我需要设置该值。然后，这两个事件都会关闭包含选择和文本字段/链接的 div。

选择选项有效

```
$(document).on("change", ".select_choice", function(event) {
    var string = $(this).find("option:selected").text();
    $(this).closest(".select_toggle_area").find(".toggle_choices").toggle();
    $(this).closest(".select_toggle_area").find(".target_input").val(string);
}); 
```

文本字段/链接在第二次单击时起作用。任何时候在该字段中输入某些内容时，链接在第一次单击时都不起作用。它隐藏了 div，但不更新目标字段的值。

```
$(document).on("click", ".text_choice_button", function(event) {
    event.preventDefault();
    var string = $(this).closest(".select_toggle_area").find(".text_choice").val();
    $(this).closest(".select_toggle_area").find(".target_input").val(string);
    $(this).closest(".select_toggle_area").find(".toggle_choices").toggle();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:30:22.477

## 无法复制

我已经摆弄了这个并且无法复制它：http: [//jsfiddle.net/DCM48/](http://jsfiddle.net/DCM48/)

请上传有关该问题的完整小提琴以获得进一步的帮助。

-莱德杰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:02:44.897

尝试使用委托

```
$(document).ready(function() {
    $("body").delegate("click", ".text_choice_button", function() {
           your code......
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:40:53.727

我对'onclick'处理程序usign jquery有问题。我发现 mousedown 是一个更可靠的解决方案。我发现可以更好地捕捉点击次数。[http://api.jquery.com/mousedown/](http://api.jquery.com/mousedown/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:14:05.567

我总是使用这种模式，也许你也应该尝试一下。

```
$(element).click(function() {}); 
```

还要在此处发布您使用 javascript 的 html 代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T10:34:16.240

```
$(function(){
    $("body").click("a, div", function(){
        $("body").append("ping");
    });
}); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-05-16T15:03:16.750

用“live”试试

```
$(".text_choice_button").live('click', function(event) {
    event.preventDefault();
    var string = $(this).closest(".select_toggle_area").find("text_choice").val();
    $(this).closest(".select_toggle_area").find(".target_input").val(string);
    $(this).closest(".select_toggle_area").find(".toggle_choices").toggle();
}); 
```

# javascript - 隐藏和显示跨度

> ID：10621241
> 
> 赞同：1
> 
> 时间：2012-05-16T14:58:32.577
> 
> 标签：javascript, jquery

这是我的由 PHP 生成的 HTML 代码。

```
<p id="resp19" class="resp">
<img src="logos/RO.png"><br>
<b>CompanyRO</b>
<span class="fprice">XXXXXX</span>
<span class="f_row">
<input name="first_row" type="radio">AAAAAAAAAA</span><br>
<span class="buts"><input class="f_det" value="Details" onclick="ShowDetails(resp19)" type="button">                                             
<input class="f_det" value="Share" type="button"></span>
<span style="display: none;" class="details_content">
Detalii
</span> 
```

在此之后，我隐藏了这个 span `$('.details_content').hide();`。我希望当我按下 Details 按钮时，会显示带有 details_content 的跨度，仅用于 this `<p>`。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:02:23.697

您需要将字符串传递给函数`onclick="ShowDetails(resp19)"`：

```
onclick="ShowDetails('resp19')" 
```

然后在函数中`ShowDetails`写：

```
function ShowDetails(someId) {
    $('#' + someId + ' span.details_content').show();
} 
```

此外，当您使用 jQuery 更好地`click`使用方法附加事件时`click()`：

html:

```
<input id="details_button" class="f_det" value="Details" type="button"> 
```

JS：

```
$('#details_button').click(function() {
    ShowDetails('resp19');
}); 
```

请注意，您使用`<p>`的是用于*段落*的元素，它们是内联元素。更好的使用将是`<div>`或其他块元素。

# java - Java：根据给定的详细信息生成可能性列表

> ID：10621243
> 
> 赞同：0
> 
> 时间：2012-05-16T14:58:44.313
> 
> 标签：java, math, arraylist

```
import java.util.*;

public class PossibilityGame
{
    private  List<String> list1, list2, list3, list4;

    public PossibilityGame()
    {

        list1 = new ArrayList();
        list1.add("one");
        list1.add("two");
        list1.add("three");
        list1.add("four");

        list2 = new ArrayList();
        list2.add("red");
        list2.add("yellow");
        list2.add("green");
        list2.add("white");

        list3 = new ArrayList();
        list3.add("shirt");
        list3.add("T-Shirt");
        list3.add("denim");
        list3.add("skirt");
        list3.add("short");

        list4 = new ArrayList();
        list4.add("karate");
        list4.add("tennis");
        list4.add("foot ball");
        list4.add("chess");

    }

    void generatePossibilities()
    {
        //Possibility Method Goes here
    }

    public static void main(String[]args)
    {
        System.out.println("Generating Possibilities");

        PossibilityGame p = new PossibilityGame();
        p.generatePossibilities();

    }
} 
```

在这里，我有 4 个数组列表，每个包含 4 个字符串。我想生成可以打印这些字符串的可能性列表。举个例子，看看下面

one, red, shirt, karate //这里，“one”取自list1，位置1；红色取自 list2，位置 1；衬衫取自 list3 位置 1；空手道取自 list4 location1

one,yellow,T-shirt,tennis //这里，“一”取自list1，位置1；黄色取自 list2，位置 2；T 恤取自 list3 位置 2；网球取自 list4 location2

我想生成上述示例的所有可能性。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:02:27.203

```
for(String s1 : list1)
    for(String s2 : list2)
        for(String s3 : list3)
            for(String s4 : list4)
                System.out.println(String.format("%s %s %s %s", s1, s2, s3, s4)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:01:13.700

我会使用四个嵌套的 for 循环。

# sql - 在联结表中查找缺失值，纠正 SQL Server 2008

> ID：10621244
> 
> 赞同：2
> 
> 时间：2012-05-16T14:58:44.470
> 
> 标签：sql, tsql

我正在处理两个表，`patientTbl`其中包括一个名为 patientID 的 PK 和一个名为`icdJxn`. 下面的查询设置为在 NOT present in 中查找`patientID`present in`patientTbl`的值`icdjxn`。

```
select patienttbl.patientid, icdjxn.patientID as [nulls?]
from patientTbl left outer join icdjxn on patientTbl.patientID = icdjxn.patientID
where (icdjxn.patientID is null) 
```

我很确定这给了我`patientTbl.patientID`不存在于`icdjxn.patientID`. 有没有办法进行`insert into`这个查询，所以我不会遇到任何 PK/FK 问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:18:21.153

如果您使用的是 SQL Server 2008 或更高版本，则合并可以完成这项工作。

```
merge icdjxn as S
using patientTbl as T
on S.patientID = T.patientID
when not matched then
  insert (patientID) values (patientID); 
```

# routing - 特定于应用程序的路由？

> ID：10621245
> 
> 赞同：0
> 
> 时间：2012-05-16T14:58:45.017
> 
> 标签：routing

我的公司有 2 个网络。首先，我有一个多年来一直使用的专用 IP，效果很好。另一种是具有不同 IP 的新服务，根据我的 DHPC 租约和轮换频率，它可能保持不变，也可能不保持不变。

我的第一个服务的 IP 地址目前是我的许多客户在过去几年中明确授予访问其敏感数据的 IP 地址。

我的问题是我已经将我的两个网络都连接到了我的服务器/工作站，但是因为新服务优先作为默认网关，我得到了很多访问被拒绝，因为我使用了错误的外部 IP 地址。

我确实希望大多数“正常”流量（用户浏览、下载、应用程序更新等）通过新服务，但我希望能够在我的工作站上使用某些应用程序并要求他们使用 First网络。

我试图避免挖掘我所有的客户端 IP 地址（很多）并将它们作为静态路由或防火墙规则添加到网络 1 的 NIC。

是否有任何应用程序或防火墙软件可以在我的工作站（Windows 7 64 位）上使用，允许我指定给定的应用程序将通过网络 1 的 NIC 连接出站？

提前致谢，

银虎

# android - 如何使用数据库解决选项卡菜单中的此错误？

> ID：10621246
> 
> 赞同：1
> 
> 时间：2012-05-16T14:58:48.190
> 
> 标签：android, database, android-listview, android-inflate

在我的应用程序中，我有选项卡菜单：添加选项卡，查看选项卡。

在添加选项卡中：我将数据添加到数据库在视图选项卡中：我从数据库中选择数据到列表视图中

**现在**我有问题：当我从添加选项卡添加数据并切换到视图选项卡时，我无法查看最后一次添加到数据库中，但是如果我关闭应用程序并重新打开它，我可以得到最后一次添加

关于解决这个问题的任何想法请

代码 ：

`查看标签代码：

公共类 ViewEvents 扩展 Activity {

```
DBAdapter DB=new DBAdapter(this);

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewevents);

    final ListView myListView = (ListView)findViewById(R.id.MyList);

    //  final EditText myEditText = (EditText)findViewById(R.id.myEditText);

      // Create the array list of to do items
      final ArrayList<String> todoItems = new ArrayList<String>();
      final ArrayAdapter<String>  aa = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, todoItems);

       DB.open();
     Cursor c=DB.select();
      c.moveToFirst();
      Integer n=new Integer(c.getCount());

    for(int i=0;i<c.getCount();i++)
    {
         todoItems.add(0, c.getString(0));
         c.moveToNext();
    }

       // todoItems.add(0, c.getString(0));
        aa.notifyDataSetChanged();
        myListView.setAdapter(aa);

} 
```

## }

添加标签代码：

public View getView(int position, View convertView, ViewGroup parent) {

```
 ButtonHolder holder2;
        if (convertView == null) {

            holder2 = new ButtonHolder();       

            convertView = mInflater.inflate(R.layout.item, null);

            holder2.caption = (Button) convertView.findViewById(R.id.Bte);

            convertView.setTag(holder2);

        } else {

            holder2 = (ButtonHolder) convertView.getTag();

        }

        holder2.caption.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                TextView names = holderpartner.caption;
                TextView date = holderdv.caption;
                TextView time = holderviewmtime.caption;
                String address = "sdfgkhj";

                event e=new event( names.getText().toString(), address,date.getText().toString(), new java.sql.Time(9, 30, 30));

                DB.open();
                DB.insertTask(e);

                date.setText("");
                time.setText("");

                Toast.makeText(getBaseContext(), "Done",Toast.LENGTH_LONG).show();

            }
        });` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:28:51.343

`addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`在您的意图中添加标志`TabHostActivity`，因此每次您选择标签时，它的内容都会刷新。做类似的事情：

```
intent = new Intent().setClass(this, Notices.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        spec = tabHost.newTabSpec("notices").setIndicator(getString(R.string.notices),
                res.getDrawable(R.drawable.ic_tab_notices))
            .setContent(intent);
        tabHost.addTab(spec); 
```

在我的情况下，它正在工作。

# javascript - 从具有更改索引的对象中删除元素

> ID：10621249
> 
> 赞同：0
> 
> 时间：2012-05-16T14:58:52.707
> 
> 标签：javascript

由于索引不断变化，我无法从样式表对象中删除规则。

我有这个功能：

```
function delete_styles(delete_array){

    console.log(delete_array); // ["0,0", "0,1", "0,2", "0,6", "0,7", "0,8", "0,9", "0,10", "0,14", "0,15", "0,16"]

    for(var i in delete_array){

        var pair = delete_array[i].split(',');
        var p1 = parseInt(pair[0]);
        var p2 = parseInt(pair[1]);

        document.styleSheets[p1].deleteRule(p2);

    }
} 
```

但是，一旦我删除`(0,0)`，索引`(0,1)`就无效了，因为它变成了`(0,0)`！

我不能只使用计数器并每次都采用递增量，因为 CSS 规则中可能存在更大的差距。

这里的逻辑有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:01:24.293

考虑从头开始，而不是从头开始，然后往下走。这样，您刚刚删除的地方就没有样式了。

另外，使用数组时，不要使用`for in`. 改用通常的`for`循环（或`while`）。

```
var i = delete_array.length;
while(i--){
    var pair = delete_array[i].split(',');
    var p1 = parseInt(pair[0]);
    var p2 = parseInt(pair[1]);

    document.styleSheets[p1].deleteRule(p2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:01:40.960

使用`while`循环：

```
var pair;
while (pair = delete_array.shift()) {
    pair = pair.split(',');
    var p1 = parseInt(pair[0]);
    var p2 = parseInt(pair[1]);
    document.styleSheets[p1].deleteRule(p2);    
} 
```

# iphone - UITableCellView viewWithTag

> ID：10621250
> 
> 赞同：0
> 
> 时间：2012-05-16T14:58:55.197
> 
> 标签：iphone, ios5, uitableview, prototype

我的问题：我使用 IOS 5 和原型单元。在“cellForRowAtIndexPath”函数中，我这样设置我的单元格：

```
 cell = [aTableView dequeueReusableCellWithIdentifier:@"datiInvioCell"];   
        UITextField *testo = (UITextField*)[cell viewWithTag:1];    
        testo.placeholder = iv.descrizione;
        testo.text = iv.valore; 
```

现在，我必须将单元格编辑的结果存储到一个数组中。我曾经这样做过：

```
 -(void) textFieldDidEndEditing:(UITextField *)textField {
              InputInvio *iv = [self.cellDettagli objectAtIndex:textField.tag]; 
              iv.valore = textField.text;
        } 
```

但我不能再使用 textField.tag 了！任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:10:35.283

在这里，您为每个 textField 使用静态标签，因此它只能获得一个持续的值.....所以在这里，当您使用波纹管时，只需替换它就可以工作了..

```
UITextField *testo = (UITextField*)[cell viewWithTag:indexPath.row]; 
```

这里每个文本字段都有自己的标签......希望，这对你有帮助.. :)

# css - 一页上是否可以有两个或多个 :target 选择器而不会相互干扰？

> ID：10621257
> 
> 赞同：1
> 
> 时间：2012-05-16T14:59:11.967
> 
> 标签：css, css-selectors

是否可以仅使用 CSS 来实现？每个新的 :target 似乎都会更改 URI（.html#*我的目标名称在这里*），自然会弄乱/重置其他先前的行为。

如果只有一种方法可以将其他 :target 分配为“静默”或“不可见”，这样它就不会影响 URI 并且两个 :targets 都可以在各自的权限上运行。或者这会破坏这个选择器的全部目的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:02:21.437

在符合标准的 HTML 页面中，一次只能有一个`:target`元素。

当您导航到另一个目标时，URI 中的哈希片段会发生变化，从而使前一个成为历史（不是双关语）并且不再与 URI 相关。同样，`:target`将不再适用于以前是目标元素的任何元素。

因此，确实，您尝试实现的行为会破坏`:target`HTML 文档选择器的目的。目前无法继续基于仅使用 CSS 的此类行为对其应用样式。

# java - 带有大型 XML 文件的 Android StringBuilder 内存不足

> ID：10621261
> 
> 赞同：1
> 
> 时间：2012-05-16T14:59:41.970
> 
> 标签：java, android, out-of-memory

我在 android 设备上使用肥皂服务，作为响应，我从服务器获得 7mb 文件。这会导致我的应用程序在将输入流转换为字符串时因内存不足错误而崩溃。MemoryAnalyzer 显示内存已分配给 StreamBuilder。处理如此大的反应的最佳方法是什么？

```
HttpEntity entity = new StringEntity(soap.toString());
httppost.setEntity(entity);
HttpResponse response = httpclient.execute(httppost);
HttpEntity r_entity = response.getEntity();
if( r_entity != null ) {
   result = inputStreamToString(r_entity.getContent());
}
...
//convert stream to string
public static String inputStreamToString(InputStream stream) throws IOException {
    BufferedReader br = new BufferedReader(new InputStreamReader(stream));
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = br.readLine()) != null) {
          sb.append(line + "\n");
    }
    br.close();
    return sb.toString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:06:24.503

最明显的答案是使用流并解析结果。如果它是您正在解析的 XML 文件，那么 SAX 可能是您的最佳途径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T06:57:59.133

`StringBuilder`需要两倍于扩展时的数据的内存。将分配一个新的、更大的（几乎肯定大于所需的）字符数组并制作一个副本，然后才能丢弃旧数组。

将所有行收集`ArrayList<String>`到增长成本较低的位置，每行只需一个字符串引用的大小。完成阅读后，您可以计算循环中的确切长度并分配确切需要大小的 StringBuilder。先关闭流。或者，也许您可​​以直接重用列表而不转换为字符串。

# c# - 用户帐户页面的 User.Identity

> ID：10621267
> 
> 赞同：0
> 
> 时间：2012-05-16T14:59:55.897
> 
> 标签：c#, asp.net, user-identification

在我`User.Identity`用来获取登录用户的用户名的应用程序中，我想知道是否可以使用它来获取电子邮件和密码信息，因为我想要一个用户帐户页面，用户可以在其中查看电子邮件用户名等并更改他们的密码。

我还有一个名为***getusers***的 Web 服务，它从我的数据库中的用户表中获取所有信息，但是如果我这样做，我不确定如何从数据库中获取登录用户的帐户信息。

到目前为止，我有这个：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (User.Identity.IsAuthenticated)
    {
        username.Text = User.Identity.Name;
    }

    localhost.Service1 myws = new localhost.Service1();
    ds = myws.GetUsers();

} 
```

这很好，因为我得到了用户名，但我需要其余的。

哦，这里是 Web 服务 GetUsers：

```
[WebMethod]
    public DataSet GetUsers()
    {
        DataSet ds = new DataSet();
        string database = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|/dvd_forum.accdb;Persist Security Info=True";
        string queryStr = "select * from Users";
        OleDbConnection myConn = new OleDbConnection(database);
        OleDbDataAdapter myDataAdapter = new OleDbDataAdapter(queryStr, myConn);
        myConn.Open();
        myDataAdapter.Fill(ds, "Users");
        myConn.Close();
        return ds;
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:07:21.543

首先，我必须警告您，您的`GetUsers()`方法对 SQL 注入开放。那一边...

如果您`GetUsers()`稍微修改该方法以接受参数并将搜索范围缩小到唯一用户，您可以：

```
[WebMethod] 
public DataSet GetUser(string UserName) 
{ 
    DataSet ds = new DataSet(); 
    string database = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|/dvd_forum.accdb;Persist Security Info=True"; 
    string queryStr = "select * from Users WHERE UserName=" + UserName; 
    OleDbConnection myConn = new OleDbConnection(database); 
    OleDbDataAdapter myDataAdapter = new OleDbDataAdapter(queryStr, myConn); 
    myConn.Open(); 
    myDataAdapter.Fill(ds, "Users"); 
    myConn.Close(); 
    return ds; 
} 
```

现在你需要做的就是打电话

```
GetUser(User.Identity.Name); 
```

假设用户名存储在数据库中，您将在数据集中返回您的用户记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:07:53.713

如果您在 asp.net 应用程序中使用 MembershipUser 类，那么您可以检查此[链接](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.aspx)。

这是一段代码。

```
public void Page_Load(object sender, EventArgs args)
{
  u = Membership.GetUser(User.Identity.Name);

  if (!IsPostBack)
  {
    EmailTextBox.Text = u.Email; 
  }
} 
```

# c# - 从另一个表单设置组合框 selectedindex 时遇到问题

> ID：10621268
> 
> 赞同：0
> 
> 时间：2012-05-16T14:59:58.180
> 
> 标签：c#, winforms, combobox, selectedindex

我正在尝试根据用户在第一个表单（form1）上选择的索引在另一个表单（form2）上设置 selectedindex。

我正在使用此代码获取值，但它返回一个负数。

```
public int SelectedComboIndex
{
   get { return comboBox1.SelectedIndex; }
} 
```

我正在尝试设置组合框索引

```
comboBox1.SelectedIndex = form1.SelectedComboIndex; 
```

谁能指出我如何做到这一点的正确方向？

编辑：更多代码，用于调用 form1 上的代码

```
Form1 form1 = null;
public Form2(Form1 parentForm1) : this()
{
    form1 = parentForm1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:08:47.673

如果未选择任何索引，组合框将返回负值（通常为 -1）。

所以我相信（我没有检查过）如果你为 SelectedIndex 属性设置了一个负值，你要做的就是清除组合框中的选择。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T17:33:14.280

最佳实践是通常`Load`在表单的方法中保留任何类型的 UI 更改，这样表单就有机会正确初始化，并且在您实际进行更改之前设置所有绑定。构造函数只能用于设置内部状态。

```
private Form1 _parentForm;
public Form2(Form1 parentForm) : this()
{
    _parentForm = parentForm;
}

public Form2()
{
    InitializeComponents();
}

private void Form2_Load(object sender, EventArgs e)
{
    richTextBox1.Font = new Font("Times New Roman", 12f, FontStyle.Regular); 
    dropdown(); 
    if(_parentForm != null)
        comboBox1.SelectedIndex = _parentForm.SelectedComboIndex; 
    comboBox1.DropDownStyle = ComboBoxStyle.DropDownList; 
} 
```

试试看它是否有效。只需确保将 Load 处理程序正确添加到表单中（通过设计器或在代码中通过`this.Load += new EventHandler(Form2_Load)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:16:56.267

`Note: You should rename all your components to something more useful than controlType1, controlType2 etc. This is good for both you and us.`

正如其他人所说，如果`form1.SelectedComboIndex`返回 -1（因为`form1.comboBox1`没有选择任何内容），那么该行将`comboBox1.SelectedIndex = form1.SelectedComboIndex`（正确地）将`comboBox1`' 值设置为空。

此外，仅仅因为您的文本中存在文本`ComboBox`并不意味着它具有选定的值。确保您的组合框实际选择了一个值（而不仅仅是更改了它的文本）。`DropDownStyle`您可以通过将 设置为来强制选择一个值`DropDownList`。其他两种样式都允许用户输入自定义值。

如果您希望用户能够输入，请考虑设置`AutoCompleteMode`to`SuggestAppend`和`AutoCompleteSource`to `ListItems`。这样可以更轻松地从组合框中正确选择值，而不仅仅是更改文本（不小心将其保留为空）。

# php - Mysql排序然后在mysql中对查询进行分组

> ID：10621275
> 
> 赞同：-1
> 
> 时间：2012-05-16T15:00:30.117
> 
> 标签：php, mysql

我需要先按日期订购我的查询...

所以我用了这个：

```
SELECT * FROM `mfw_navnode` order by `id` DESC 
```

我想将我的结果从最后到第一个排序。

然后我想做的事

是在它上面添加一个查询，它将按 node_name 对我的结果进行分组。

结果应该是..所有按“类别/节点名称类型”分组的顶级节点，而我看到的第一个节点在第一个查询中对其类别的排序最高..

我想做这样的事情：

```
SELECT * FROM( 
SELECT * FROM `mfw_navnode` order by `id` DESC) AS DD
WHERE (node_name='Eby' OR node_name='Laa'  OR node_name='MIF' OR node_name='Amaur' OR node_name='Asn' )
GROUP BY DD.node_name 
```

当我输入该结果时，我没有得到任何结果..或来自 phpmyadmin 的任何响应..

我哪里错了？

请注意，我不想对我的结果进行分组然后对它们进行排序..

我希望它们被订购，然后分组。分组后..我希望每个组的结果具有最高值..来自组中的其他行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:11:04.143

首先执行排序是不够的，因为即使这样 MySQL 也不保证它将为每个组选择哪个记录。从[手册](http://dev.mysql.com/doc/en/group-by-hidden-columns.html)：

> 服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。

您必须改为使用子查询识别感兴趣的记录，然后再次将结果与您的表连接以获得相关值：

```
SELECT *
FROM   mfw_navnode NATURAL JOIN (
         SELECT node_name, MAX(id) AS id FROM mfw_navnode GROUP BY node_name
       ) AS DD
WHERE  node_name IN ('Eby', 'Laa', 'MIF', 'Amaur', 'Asn') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:08:50.633

按 ID 排序，按 node_name 分组

```
SELECT * FROM `mfw_navnode`
WHERE (node_name='Eby' OR node_name='Laa'  OR node_name='MIF' OR node_name='Amaur' OR node_name='Asn' )
GROUP BY DD.node_name
ORDER BY `id` DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:09:47.953

当您使用某些聚合函数（sum、max、min、count 等）时，通常会使用分组。如果您在查询中不使用此类功能，那么您为什么要对结果进行分组？

无论如何，这应该可以解决问题：

```
SELECT *
FROM mfw_navnode
WHERE id IN (SELECT id
    FROM mfw_navnode
    WHERE node_name IN ('Eby', 'Laa', 'MIF', 'Amaur', 'Asn')
    GROUP BY node_name)
ORDER BY id 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T15:06:11.637

以下 SQL 可能会为您提供所需的输出：

```
SELECT node_name, MAX(id)
FROM mfw_navnode
GROUP BY node_name
ORDER BY node_name 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-16T15:12:46.237

我发现您的 SQL 存在两个问题。

1）在内联选择中下订单没有任何作用（并且可能导致错误）2）您正在对 node_name 进行分组，但您没有聚合任何内容

```
SELECT COUNT(id) as row_count, node_name FROM( SELECT * FROM mfw_navnode ) AS DD
WHERE (node_name='Eby' OR node_name='Laa'  OR node_name='MIF' OR node_name='Amaur' OR node_name='Asn' )
GROUP BY DD.node_name
order by node_name desc 
```

此外，我不确定为什么您需要内联选择，因为 where 可能只是在原始选择上（也许您有更复杂的事情发生，您没有显示）

```
SELECT COUNT(id) as row_count, node_name 
from mfw_navnode
WHERE node_name='Eby' OR node_name='Laa'  OR node_name='MIF' OR node_name='Amaur' OR node_name='Asn' 
GROUP BY node_name
order by node_name desc 
```

# javascript - 优化慢搜索算法 - javascript、JSON 和 localstorage

> ID：10621278
> 
> 赞同：3
> 
> 时间：2012-05-16T15:00:49.763
> 
> 标签：javascript, json, performance, search, local-storage

我正在使用 PHP、Javascript/jQuery/Ajax、JSON 和 localstorage 为我的公司构建一个访客列表应用程序。它将用于智能手机：主要是 Iphone 4。我使用 localstorage 作为我的缓存，因为应用程序的搜索部分必须在离线模式下工作。

我在搜索来宾列表时遇到性能问题。

该应用程序的流程如下所示（例如，我正在使用包含 600 位客人的客人列表）

**1.** 使用 PHP 编码 JSON 从服务器检索所有客人，并通过 AJAX 发送回 js。这工作正常。

**2.**使用 JSON.Parse 解析 PHP responseText（称为 phpData）：

```
var parsedMysqlData = JSON.parse(phpData); 
```

这给了我们一个包含 600 个对象的 JSON.Array，如下所示：

```
Object:  {
Id: Int
EventId: int
guestInfo: string
guestlist: string
guestName: string
reference: string
total: int
used: int
} 
```

**3.**使用 JSON.Stringify 将 JSON.Array 保存到用户的本地存储中：

```
 localStorage.setItem(0, JSON.stringify(parsedMysqlData)); 
```

**4.**当用户开始搜索时，我们得到他的搜索字符串，然后在 localstorage 中使用 JSON.parse 检索我们的客人列表，如下所示：

```
 var currentGuestlist = JSON.parse(localStorage.getItem(0)); 
```

然后使用这个 for 循环遍历我们的对象，尝试将他的搜索字符串与我们的客人数组 currentGuestlist 匹配：

```
 for (i=0; i<currentGuestlist.length; i++) {
 // match 'currentGuestList[i]['name']' with what the user typed in search form 
} 
```

出于某种原因，这在 iPhone 4 上需要很长时间。搜索 600 个对象会使 iphone 在返回匹配项之前冻结大约 4 秒。

**在将包含 JSON 对象的数组存储在 localStorage 中并使用 JSON 解析之前，我只是将无序字符串存储在 localStorage 中，它的工作速度要快得多。JSON 对象广告结构到存储在 localStorage 中的数据，这是至关重要的。所以我想速度问题与我使用 JSON 对象的事实有关吗？如何以有组织的方式构建我的本地存储数据，同时仍保持与以前一样好的速度性能？**

最后，非常感谢您提供有关您将使用哪些技术使该应用程序尽可能轻巧和快速的任何提示或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:10:24.613

您是否从本地存储中获取每次搜索的列表？不要那样做，而是仅在需要时（无论何时更改）将其存储在本地存储中，并始终将其保留为数据结构。

简单地使用对象而不是普通字符串不能成为缓慢的原因，因为 JavaScript 中的所有内容都已经是一个对象，因此它应该只以一个常数因子减慢。

此外，如果这是关于自动完成类型的行为，那么我建议您放慢搜索速度，并考虑如果用户在“Ma”框中键入，则列表被过滤，并且用户添加“tt”为“马特”，只需要考虑以前过滤的匹配...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:08:57.117

也许您的设置更适合使用 WebSQL 数据库，而不是在本地存储中存储 JSON 对象。WebSQL 现在已被弃用，但它在 webkit-browsers 中得到了很好的支持。我在几个项目中使用它并取得了很好的效果。

你可以在这里阅读更多关于它的信息：http: [//html5doctor.com/introducing-web-sql-databases/](http://html5doctor.com/introducing-web-sql-databases/)

# java - 简单的 Java 正则表达式

> ID：10621281
> 
> 赞同：1
> 
> 时间：2012-05-16T15:01:02.473
> 
> 标签：java, regex

我有很多：

```
FooModel f = new FooModel();
..
Bar Model b = new BarModel(); 
```

我需要从 Java 源代码中检索任何模型对象，但我不想完成声明。我只想要对象声明。

我尝试使用正则表达式（其中 strLine 是 InputStreamReader 中的字符串行）：

```
String pattern = ".*Model (.+)";
Pattern p = Pattern.compile(pattern);
Matcher m = p.matcher(strLine);

if(m.find())
    System.out.print(m.group(1) + "\n"); 
```

我能够得到实例化。但我会做同样的事情，但对象声明（在“=”之前）。

我怎样才能做到这一点？

我能做到

```
m.group(0).replace(m.group(1),""); 
```

但这不是真正的正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:44:48.823

```
(\\w+ \\w+)\\s*=.*new.*Model.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:34:23.500

如果您在一行中有一个启动语句：

```
import java.util.regex.*;

class  FindModel
{
    public static void main(String[] args) 
    {
        String s = "  FooModel f = new FooModel();";
        String pattern = "([^\\s]*?Model[^=]*)=";
        Pattern p = Pattern.compile(pattern);
        Matcher m = p.matcher(s);

        if(m.find())
            System.out.print(m.group(1) + "\n");
     }
} 
```

如果一行中有多个语句：

```
import java.util.regex.*;

class  FindModel
{
    public static void main(String[] args) 
    {
        String s = "  FooModel f = new FooModel();int i=0,j; BarModel b = new BarModel();";
        String pattern = "([^;\\s]*?Model[^=]*)=.*?;";
        Pattern p = Pattern.compile(pattern);
        Matcher m = p.matcher(s);

        while(m.find())
            System.out.print(m.group(1) + "\n");
     }
} 
```

输出：

```
FooModel f
BarModel b 
```

# ruby-on-rails - 我如何在 ipod 上运行开发 Rails 应用程序/网站

> ID：10621282
> 
> 赞同：13
> 
> 时间：2012-05-16T15:01:06.257
> 
> 标签：ruby-on-rails, macos, ipad, apache, ios5

我有一个在本地 imac 上运行的应用程序/网站，我想在我的 ipad 浏览器上对其进行测试。

可以用我的 ipad 通过 wifi 连接到我的 imac localhost rails 应用程序吗？如果有怎么办！！?

我的应用程序是一个使用子域的多租户应用程序，因此我使用我的主机文件将例如 achme.mycompany.dev 指向本地主机。

我如何在 ipad 上执行此操作以在浏览器中转到 achme.mycompany.dev 并在我的 imac 上运行本地应用程序？

希望这一切都有意义！请帮忙。

最好的问候瑞克

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-07-16T11:00:12.363

我正在为使用 Rails 4、已按照已接受答案中的步骤操作但仍无法通过`development_machine_ip:3000`. 原因是在版本 4 左右，Rails 将默认绑定地址从更改`0.0.0.0`为 only `localhost`。默认情况下，这仅允许您通过`localhost:3000`or访问 Rails 应用程序`127.0.0.1:3000`- 在大多数情况下都可以。

现在，如果您想从网络上的其他设备访问该应用程序，您可以`-b`在启动服务器时使用该选项并指定绑定地址`0.0.0.0`

```
rails s -b 0.0.0.0 
```

这将绑定到所有接口，包括本地主机和网络分配的 IP。您现在应该可以通过`development_machine_ip:3000`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-16T16:10:49.050

我希望你的 macbook 和 iPad 在同一个网络上。现在转到“打开网络首选项”。检查屏幕截图。

你会看到一个ip。

![在此处输入图像描述](../Images/e135efb979630740d3c905fd11a377c4.png)

然后从 ipad 打开：your_ip:3000

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-16T16:14:17.253

我为此使用~~[proxylocal](http://proxylocal.com/)~~ [ngrok](https://ngrok.com/)：

```
$ ngrok http 3000
ngrok by @inconshreveable                                                                                                                       (Ctrl+C to quit)

Session Status                online
Account                       Sergio (Plan: Free)
Version                       2.2.8
Region                        United States (us)
Web Interface                 http://127.0.0.1:4040
Forwarding                    http://be278635.ngrok.io -> localhost:3000
Forwarding                    https://be278635.ngrok.io -> localhost:3000

Connections                   ttl     opn     rt1     rt5     p50     p90
                              0       0       0.00    0.00    0.00    0.00 
```

现在您可以从您的 ipad 中打开[http://be278635.ngrok.io](http://be278635.ngrok.io)，而无需担心您机器的 IP 地址。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-16T15:08:06.370

如果子域只是去 127.0.0.1:3000 （或其他），您应该能够通过使用相同提供的端口号访问您机器的本地 IP 地址以相同的方式访问它。我一直在手机上查看我的 Rails 应用程序。

如果您有虚拟主机或其他设置，它可能会比这更复杂。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-16T15:08:03.133

为此，您需要越狱 iPad 以编辑 /etc/hosts 文件，或者在路由器中添加 DNS 条目（假设您的路由器是您的 DNS 服务器）。

这两个听起来最简单的一个。

# reporting-services - 如何在单个报告中使用多个服务器

> ID：10621284
> 
> 赞同：0
> 
> 时间：2012-05-16T15:01:06.613
> 
> 标签：reporting-services

我有一个报告，我必须使用两台服务器来访问两个不同的表数据。为此，我使用 2 个数据集，一个用于服务器 A 中的查询 A，另一个用于服务器 B 中的查询 B。

我在服务器 A 中使用的查询 A 的结果必须传递给服务器 B 中的查询 B。我需要在不使用链接服务器的情况下执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:48:04.323

我理解正确，您只是在服务器 A 和服务器 B 的报告之间传递参数，因为对于所有报告，我们只使用 SELECT 语句或从不同服务器获取的任何存储过程应该不是问题，您不需要创建链接服务器。

如果您可以发布在实现此目标时遇到的任何错误，请随意。

我还使用了 3 个数据集（3 个不同的服务器）来生成报告，我没有遇到任何问题。

# c# - C#如何在命令行应用程序中接收系统关闭或退出事件

> ID：10621287
> 
> 赞同：4
> 
> 时间：2012-05-16T15:01:14.050
> 
> 标签：c#, command-line, exit

我正在尝试，但到目前为止我发现的一切似乎都以 GUI 和表单应用程序为中心。那不是我正在使用的。

最终它将成为一项服务，但在完成之前我将它作为一个普通应用程序运行，问题是如果我只是不小心关闭它，它会使另一个服务挂起长达 30 分钟，并出现错误数据. 我虽然很容易添加一个监听器来捕捉正在关闭的应用程序。

但我就是想不通。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:12:56.127

在这里，您有一个完美的解决方案来满足您的需求：

[在 C# 中检测控制台应用程序退出](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/707e9ae1-a53f-4918-8ac4-62a1eddb3c4a/)

该代码检测将关闭应用程序的所有可能事件：

*   控制+C
*   控制+中断
*   关闭事件（程序的“正常”关闭，带有关闭按钮）
*   注销事件（使用注销）
*   关机事件（系统关闭）

```
namespace Detect_Console_Application_Exit2
{
  class Program
  {
    private static bool isclosing = false;

    static void Main(string[] args)
    {
      SetConsoleCtrlHandler(new HandlerRoutine(ConsoleCtrlCheck), true);
      Console.WriteLine("CTRL+C,CTRL+BREAK or suppress the application to exit");
      while (!isclosing) ;
    }

    private static bool ConsoleCtrlCheck(CtrlTypes ctrlType)
    {
      // Put your own handler here
      switch (ctrlType)
      {
        case CtrlTypes.CTRL_C_EVENT:
          isclosing = true;
          Console.WriteLine("CTRL+C received!");
          break;

        case CtrlTypes.CTRL_BREAK_EVENT:
          isclosing = true;
          Console.WriteLine("CTRL+BREAK received!");
          break;

        case CtrlTypes.CTRL_CLOSE_EVENT:
          isclosing = true;
          Console.WriteLine("Program being closed!");
          break;

        case CtrlTypes.CTRL_LOGOFF_EVENT:
        case CtrlTypes.CTRL_SHUTDOWN_EVENT:
          isclosing = true;
          Console.WriteLine("User is logging off!");
          break;
      }
      return true;
    }

    #region unmanaged

    // Declare the SetConsoleCtrlHandler function
    // as external and receiving a delegate.
    [DllImport("Kernel32")]
    public static extern bool SetConsoleCtrlHandler(HandlerRoutine Handler, bool Add);

    // A delegate type to be used as the handler routine
    // for SetConsoleCtrlHandler.
    public delegate bool HandlerRoutine(CtrlTypes CtrlType);

    // An enumerated type for the control messages
    // sent to the handler routine.
    public enum CtrlTypes
    {
      CTRL_C_EVENT = 0,
      CTRL_BREAK_EVENT,
      CTRL_CLOSE_EVENT,
      CTRL_LOGOFF_EVENT = 5,
      CTRL_SHUTDOWN_EVENT
    }

    #endregion

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:16:08.747

尝试这个：

[编辑] 这是上面发布的链接的修改版本。

注意：如果用户单击红色 X 关闭控制台窗口，在您的应用程序被终止之前，您的响应时间非常有限！如果您运行以下程序，请查看消息框在消失之前显示了多长时间。

```
using System;
using System.Runtime.InteropServices;
using System.Threading;
using System.Windows.Forms;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            SetConsoleCtrlHandler(ConsoleCtrlCheck, true);
            Console.WriteLine("CTRL+C,CTRL+BREAK or suppress the application to exit");

            while (!isclosing)
            {
                Thread.Sleep(1000);
            }
        }

        private static bool ConsoleCtrlCheck(CtrlTypes ctrlType)
        {
            // Put your own handling here:

            switch (ctrlType)
            {
                case CtrlTypes.CTRL_C_EVENT:

                    isclosing = true;

                    Console.WriteLine("CTRL+C received!");

                    break;

                case CtrlTypes.CTRL_BREAK_EVENT:

                    isclosing = true;

                    Console.WriteLine("CTRL+BREAK received!");

                    break;

                case CtrlTypes.CTRL_CLOSE_EVENT:

                    isclosing = true;

                    Console.WriteLine("Program being closed!");
                    MessageBox.Show("AHA!");

                    break;

                case CtrlTypes.CTRL_LOGOFF_EVENT:
                case CtrlTypes.CTRL_SHUTDOWN_EVENT:

                    isclosing = true;

                    Console.WriteLine("User is logging off!");

                    break;
            }

            return true;
        }

        #region unmanaged

        // Declare the SetConsoleCtrlHandler function as external and receiving a delegate.

        [DllImport("Kernel32")]

        public static extern bool SetConsoleCtrlHandler(HandlerRoutine Handler, bool Add);

        // A delegate type to be used as the handler routine for SetConsoleCtrlHandler.

        public delegate bool HandlerRoutine(CtrlTypes CtrlType);

        // An enumerated type for the control messages sent to the handler routine.

        public enum CtrlTypes
        {

            CTRL_C_EVENT = 0,
            CTRL_BREAK_EVENT,
            CTRL_CLOSE_EVENT,
            CTRL_LOGOFF_EVENT = 5,
            CTRL_SHUTDOWN_EVENT
        }

        #endregion

        private static bool isclosing;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:18:34.203

如果要在应用程序内部处理事件，

1.  如果是windows服务，

    可以使用[ServiceBase.OnStop](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstop.aspx)

2.  如果是 WCF 服务 ，可以使用[ServiceHost.Closed事件。](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.communicationobject.closed.aspx)ServiceHost 从 Communication Host 继承 Closed（和相关事件）

如果要在单独的应用程序中处理事件，可以使用[Process.Exited事件。](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)

```
var serviceProcesses = Process.GetProcessesByName("service.exe");
if(serviceProcesses != null && serviceProcesses.Length>0)
{
    serviceProcesses[0].Exited += OnServiceClosed;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:15:02.113

`AppDomain.CurrentDomain.ProcessExit`事件？

# yum - vagrant 使用 yum 而不是 apt-get 用于 centos 盒子

> ID：10621290
> 
> 赞同：1
> 
> 时间：2012-05-16T15:01:37.750
> 
> 标签：yum, vagrant

并发现它很有用。我一直在关注文档，但是我不想使用 lucid32 机器，而是想使用 centos 6 机器并尝试使用 chef 配置，但是一旦 vm 加载，它似乎使用 apt-get 而不是 yum 来下载 chef . 我怎样才能让 vagrant 使用 yum 代替？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T16:23:05.097

您使用的是什么供应商？我在使用 Chef 时遇到了同样的问题，并通过将 apt-get 食谱替换为 yum 解决了这个问题，然后更新了包含的食谱。

如果您使用的是 Chef，您可以从[opscode-cookbooks/yum](https://github.com/opscode-cookbooks/yum)下载 yum 食谱并将其放入您的食谱文件夹（例如`./vagrant_guide/cookbooks/yum/`），然后只需将 apt-get recipe 调用替换为 yum。

如果您遵循[入门指南](http://vagrantup.com/docs/getting-started/provisioning.html)，您的项目可能如下所示：

**./vagrant_guide/Vagrantfile**

```
Vagrant::Config.run do |config|
    config.vm.box = "centos"

    config.vm.provision :chef_solo do |chef|
        chef.add_recipe "vagrant_main"
        # You could optionally just call chef.add_recipe "yum"
        # here instead of doing it in the vagrant_main recipe
    end
end 
```

**./vagrant_guide/cookbooks/vagrant_main/recipes/default.rb**

```
require_recipe "yum" 
```

# sencha-touch - 突出显示 ComponentView 中的选定行？

> ID：10621294
> 
> 赞同：0
> 
> 时间：2012-05-16T15:01:54.797
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在使用这个 ComponentView 示例： [Kitten ComponentView](http://robertdougan.com/posts/taking-advantage-of-componentview-in-sencha-touch-2)

在我的变体中，我想在用户点击它时突出显示选定的行，就像在`xtype: 'list'`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:24:46.300

您可以通过使用`tpl`属性来实现这一点，然后在标签`class`内设置 css`<div>`

像这样的东西，

```
....
xtype: 'list',
tpl: '<div class="clickedItem"> ...'
.... 
```

然后将您的css代码编写为，

```
.clickedItem{
   background: // some color value;
   text-shadow: // some color value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:32:52.203

在他们的示例目录中检查[Sencha Kiva 示例](http://docs.sencha.com/touch/2-0/#!/example/kiva)后，它看起来像是 .x-dataview-UI_NAME 类与 .x-list-item 的组合，其中 UI_NAME 定义为 dataview 视图配置。在 Kiva 示例中，它是行 ' **ui: loan** '。所以，CSS 部分看起来像这样：

```
.x-dataview-贷款.x-list-item {
 ...
}

```

在视图中定义 UI 后缀：

```
Ext.define('Kiva.view.LoansList', {
    扩展：'Ext.DataView'，
    xtype : '贷款清单',
    要求：[
        'Kiva.view.LoansListItem'
    ],

    配置：{
        ui : '贷款',
        商店：“贷款”，
        使用组件：真，
        defaultType: 'loanslistitem',
        取消选择容器点击：假
    },

    onItemTap：函数（容器，目标，索引，e）{
        变我=这个；
        me.callParent（参数）；// 警告：没有这个调用，该行将不会被选中
    }

```

application.css 中的相关代码

```
.x-dataview-贷款 .x-img {
    右边距：1em；
    背景位置：中心中心；
    宽度：60px；
    高度：60 像素
}

.x-dataview-loans .x-list-item {
    填充：1em；
    边框底部：1px 实心#e1e1e1；
    -webkit-transition：线性 .2s 背景
}

.x-dataview-loans .x-list-item .name div {
    字体粗细：粗体
}

.x-dataview-loans .x-item-selected {
    背景：#fff
}

.x-dataview-loans .completion {
    显示：-webkit-box；
    展示：盒子；
    -webkit-box-align：居中；
    框对齐：居中
}

.x-dataview-loans .完成 .x-innerhtml {
    显示：-webkit-box；
    展示：盒子；
    -webkit-box-align：拉伸；
    框对齐：拉伸；
    高度：1em；
    宽度：100%；
    边框：1px 实心#bbb；
    -webkit-box-shadow: 插图 0 0 1px #fff;
    填充：1px；
    -webkit-border-radius：1em；
    边界半径：1em；
    背景颜色：#e2e2e2；
    背景图像：-webkit-渐变（线性，50% 0%，50% 100%，颜色停止（0%，#c9c9c9），颜色停止（10%，#d5d5d5），颜色停止（65%， #e2e2e2), 颜色停止(100%, #e3e3e3));
    背景图像：-webkit-线性渐变（#c9c9c9，#d5d5d5 10%，#e2e2e2 65%，#e3e3e3）；
    背景图像：线性渐变（#c9c9c9，#d5d5d5 10%，#e2e2e2 65%，#e3e3e3）
}

.x-dataview-loans .completion .x-innerhtml .bar {
    最小宽度：1em；
    边框：1px 实心#4b9123；
    -webkit-border-radius：1em；
    边界半径：1em；
    背景颜色：#74b446；
    背景图像：-webkit-渐变（线性，50% 0%，50% 100%，颜色停止（0%，#c6e1b2），颜色停止（2%，#87c05e），颜色停止（100%， #639a3c));
    背景图像：-webkit-linear-gradient(#c6e1b2, #87c05e 2%, #639a3c);
    背景图像：线性渐变（#c6e1b2，#87c05e 2%，#639a3c）
}

```

# php - 当包含链接时，使用 codeigniter 发送电子邮件不起作用

> ID：10621295
> 
> 赞同：0
> 
> 时间：2012-05-16T15:01:55.057
> 
> 标签：php, email, codeigniter, hyperlink, gmail

我有一个脚本设置，当用户将他们的电子邮件插入提供的输入时，它将通过电子邮件向用户发送激活链接。

我正在使用 CodeIgniter 的电子邮件类来发送多部分电子邮件，而我遇到的问题是，当发送电子邮件时，调试器说电子邮件已成功发送，但从未收到消息。

当我将电子邮件发送到我的内部工作电子邮件时，它发送得很好。但是当我将它发送到我的 gmail 帐户时，它永远不会通过。

我已经设法将问题归结为在电子邮件中插入链接的问题。当我删除链接时，电子邮件发送正常。我把链接放回去了，我的 gmail 帐户从未收到过电子邮件。

有没有人遇到过这个问题，或者您对如何解决这个问题有任何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:04:56.750

您的电子邮件被拒绝..这不是 CI 问题..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:14:10.293

好的，听起来问题不在于 CodeIgniter 或您的代码，而在于服务器的邮件传输代理将其发送到 Gmail 服务器。

发生的事情是 CodeIgniter 将一封电子邮件放在一起并将其提供给 PHP 引擎，PHP 引擎将其传递给服务器上的邮件传输代理进行发送。MTA 将向 PHP 和 CodeIgniter 报告它已正确收到电子邮件。由于此时 PHP & CodeIgniter 的工作已经完成，他们会报告他们已经发送成功。

检查您的 Gmail 中的垃圾邮件文件夹，看看它是否已放入其中..？我有一段时间没有使用 CI，所以记不清了，但我认为您可能需要在发送之前设置一个 HTML 电子邮件参数。如果是这样，Gmail 可能也希望这样设置。

在此处向下滚动到“电子邮件首选项”：http: [//codeigniter.com/user_guide/libraries/email.html](http://codeigniter.com/user_guide/libraries/email.html)并将邮件类型设置为 HTML。

如果这不起作用，您将需要完全调试。

要正确调试问题，您需要能够访问 MTA 日志。这是本地开发服务器还是现场生产机器？是 Linux 还是 Windows？如果是Linux，哪个发行版？您知道您使用的是哪个 MTA 吗？您是否具有对服务器的 SSH 访问权限？

如果您能够获得 SSH 访问权限并找出您拥有的 MTA，那么查找起来会容易得多，并且您将能够监控传出消息和目标服务器的响应，因为它们发生了。

# macros - 如何使用批处理文件打开和运行 Excel 宏

> ID：10621299
> 
> 赞同：2
> 
> 时间：2012-05-16T15:02:03.040
> 
> 标签：macros, batch-file, command-line-arguments

我有一个批处理文件，它可以做几件事，最后一步是打开一个 excel 文档并运行其中包含的宏来更新文件的内容。单击按钮即可完美运行宏，但我希望在运行 .bat 文件时完成所有操作。

我知道我可以将宏附加到打开事件中，以便在您打开宏时运行它，但我只希望它在您运行 bat 文件时自动更新，而不是每次打开时。

也许我可以传递一个参数让它知道它是从 .bat 运行的？还是直接用excel命令运行？

```
like this?
run excel.exe /runMacro "mymacro" 
```

我在任何地方都找不到我需要的东西，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T15:10:46.687

是的，基本上最简单的方法是将“mymacro”的内容移动到 ThisWorkBook

```
Private Sub Workbook_Open() 
```

出于安全考虑，除非您希望无人看管，否则用户可能仍需单击启用宏按钮。如果要将参数传递到打开的工作簿中，则可以通过解析命令行来执行此操作。您可以在 Google 上搜索“excel GetCommandLineW”的代码示例

```
Private Declare Function GetCommandLine Lib "kernel32" Alias "GetCommandLineW" () As Long
Private Declare Function lstrlenW Lib "kernel32" (ByVal lpString As Long) As Long
Private Declare Sub CopyMemory Lib "kernel32" Alias "RtlMoveMemory" (MyDest As Any, MySource As Any, ByVal MySize As Long)

Function CmdToSTr(cmd As Long) As String
Dim Buffer() As Byte
Dim StrLen As Long
    If cmd Then
    StrLen = lstrlenW(cmd) * 2
    If StrLen Then
        ReDim Buffer(0 To (StrLen - 1)) As Byte
        CopyMemory Buffer(0), ByVal cmd, StrLen
        CmdToSTr = Buffer
        End If
    End If

End Function

Private Sub Workbook_Open()
    Dim CmdRaw As Long
    Dim CmdLine As String
    CmdRaw = GetCommandLine
    CmdLine = CmdToSTr(CmdRaw)
    ' From here you can parse the CmdLine
    ' ...snip... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-18T21:41:44.550

在我的 Excel 2013 版本（15.0.4649.1000 64 位）上，我必须编写以下代码：

```
#If VBA7 Then
 Private Declare PtrSafe Function GetCommandLine Lib "kernel32" Alias "GetCommandLineW" () As LongPtr
 Private Declare PtrSafe Function lstrlenW Lib "kernel32" (ByVal lpString As LongPtr) As Long
 Private Declare PtrSafe Sub CopyMemory Lib "kernel32" Alias "RtlMoveMemory" (MyDest As Any, MySource As Any, ByVal MySize As LongPtr)
#Else
' Declare Function GetCommandLine Lib "kernel32" Alias "GetCommandLineW" () As Long
' Declare Function lstrlenW Lib "kernel32" (ByVal lpString As Long) As Long
' Declare Sub CopyMemory Lib "kernel32" Alias "RtlMoveMemory" (MyDest As Any, MySource As Any, ByVal MySize As Long)
#End If

#If VBA7 Then
 Function CmdToSTr(Cmd As LongPtr) As String
#Else
 Function CmdToSTr(Cmd As Long) As String
#End If
 Dim Buffer() As Byte
 Dim StrLen As Long
 If Cmd Then
  StrLen = lstrlenW(Cmd) * 2
  If StrLen Then
   ReDim Buffer(0 To (StrLen - 1)) As Byte
   CopyMemory Buffer(0), ByVal Cmd, StrLen
   CmdToSTr = Buffer
  End If
 End If
End Function

Private Sub Workbook_Open()
  Dim CmdRaw As LongPtr
  Dim CmdLine As String
  Dim TabName As String

  CmdRaw = GetCommandLine
  CmdLine = CmdToSTr(CmdRaw)
  MsgBox(CmdLine)
End Sub 
```

# jquery - “Tab Slide Out”插件在 IE8 或更低版本中不可见

> ID：10621303
> 
> 赞同：1
> 
> 时间：2012-05-16T15:02:16.007
> 
> 标签：jquery, jquery-plugins

我一直在处理一个包含“Tab Slide Out”jquery 插件以及“Wow Slider”插件的页面。除了 IE8 和更低版本，我在所有浏览器中都可以正常工作这两个项目。

标签图像应显示在页面的右侧，并在展开时显示在 Wow Slider 上方。目前这发生在除 IE 8 或更低版本之外的所有浏览器中。在这些浏览器中，该选项卡根本不显示。

包含所有代码的页面链接可在此处获得：http: [//www.naturalchanges.com/index2.html](http://www.naturalchanges.com/index2.html)。

我已经尝试重新安排 jquery 和 java 调用以使所有内容都正确加载，但是如果您在选项卡周围移动调用，则会加载并且 Wow Slider 将无法正常工作。

# playframework - 覆盖 mvc.Controller.template()

> ID：10621308
> 
> 赞同：0
> 
> 时间：2012-05-16T15:02:28.750
> 
> 标签：playframework, playframework-1.x

我想为单独的移动视图和桌面视图覆盖方法 template()。我在 mvc.Controller 中创建了一个新方法 (isMobile()) 来了解访问者是否使用手机。

isMobile() 如果是手机则返回 true。

在 template() 中，我调用 isMobile()，如果返回 true，我会更改路径。

通常这应该工作。但不是。即使我破坏了模板方法，应用程序仍然可以正常工作。

我试图停止并重新启动该应用程序，但该应用程序仍然有效。

谢谢

编辑：好的，我想我需要知道如何重新编译播放库以保存我的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:27:45.973

如果要重新编译对框架核心代码的更改，请转到框架文件夹并键入“ant”。

[你也可以在https://github.com/greenlaw110/play](https://github.com/greenlaw110/play)查看我的 fork（更新到 1.2.5RC3）。

将以下代码添加到您的任何控制器：

```
@OnApplicationStart
public static class BootLoader extends Job<Object> {
    @Override
    public void doJob() {
        Controller.registerTemplateNameResolver(new ITemplateNameResolver(){
            @Override
            public String resolveTemplateName(String templateName) {
                // replace the following statement with your user agent detect logic
                return UserAgent.isMobile() ? "mobile/" + templateName : templateName;
            }
        });
    }
} 
```

确保`git checkout 1.2.x`在克隆我的 fork 之后执行此操作，然后`cd framework;ant`进行编译。

# c++ - openCV过滤器图像 - 用局部最大值替换内核

> ID：10621312
> 
> 赞同：4
> 
> 时间：2012-05-16T15:02:40.837
> 
> 标签：c++, opencv, image-processing, filter, max

**关于我的问题的一些细节：**

我正在尝试在 openCV 中实现角检测器（另一种内置算法：Canny、Harris 等）。

我有一个填充了响应值的矩阵。最大的响应值是 - 检测到角点的最大概率是。

我有一个问题，在一个点附近检测到几个角（但只有一个）。我需要减少错误检测到的角落的数量。

**确切的问题：**

我需要用内核遍历矩阵，计算每个内核的最大值，留下最大值，但内核中的其他值等于零。

是否有内置的 openCV 函数可以做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T15:26:36.030

我会这样做：

1.  创建一个内核，它定义了一个像素邻域。
2.  通过使用此内核扩展图像来创建新图像。该膨胀图像包含每个点的最大邻域值。
3.  在这两个数组之间进行相等比较。它们相等的地方是一个有效的邻域最大值，并`255`在比较数组中设置为。
4.  将比较数组和原始数组相乘（适当缩放）。
5.  这是您的最终数组，仅包含邻域最大值。

这些放大的图像说明了这一点：

9 像素 x 9 像素原始图像：

![在此处输入图像描述](../Images/170b78920e717a1b532dc3882d8bb24d.png)

使用 5 x 5 像素内核处理后，仅保留局部邻域最大值（即，最大值与具有更大值的像素相隔超过 2 个像素）：

![在此处输入图像描述](../Images/79d603843a0ccfbb6f28645c409651cd.png)

有一个警告。如果两个附近的最大值具有相同的值，那么它们都将出现在最终图像中。

这是一些 Python 代码，它应该很容易转换为 c++：

```
import cv

im = cv.LoadImage('fish2.png',cv.CV_LOAD_IMAGE_GRAYSCALE)
maxed = cv.CreateImage((im.width, im.height), cv.IPL_DEPTH_8U, 1)
comp = cv.CreateImage((im.width, im.height), cv.IPL_DEPTH_8U, 1)
#Create a 5*5 kernel anchored at 2,2
kernel = cv.CreateStructuringElementEx(5, 5, 2, 2, cv.CV_SHAPE_RECT)

cv.Dilate(im, maxed, element=kernel, iterations=1)
cv.Cmp(im, maxed, comp, cv.CV_CMP_EQ)
cv.Mul(im, comp, im, 1/255.0)

cv.ShowImage("local max only", im)
cv.WaitKey(0) 
```

直到现在我才意识到，但这就是@sansuiso 在他/她的回答中所建议的。

之前用这张图片可能会更好地说明这一点：

![在此处输入图像描述](../Images/a0ad2c846f21922e083453ea10d15793.png)

使用 5 x 5 内核处理后：

![在此处输入图像描述](../Images/60008fa8bf4eb2b687e87c1df48f275d.png)

实心区域是由于共享的局部最大值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T21:06:41.693

我建议使用 opencv 内置函数的原始两步程序（可能存在更有效的方法）：

1.  第 1 步：使用方形核（对应于您的邻域）进行形态膨胀。在将每个像素值替换为内核中的最大值之后，此步骤会为您提供另一个图像。

2.  步骤2：测试原始响应图像的每个像素的角点值是否等于膨胀步骤给出的最大值。如果不是，那么显然附近有一个更好的角落。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T09:36:47.683

如果您正在寻找一些内置功能，FilterEngine 将帮助您制作自定义过滤器（内核）。

[http://docs.opencv.org/modules/imgproc/doc/filtering.html#filterengine](http://docs.opencv.org/modules/imgproc/doc/filtering.html#filterengine)

另外，我建议在所有处理之前进行某种降噪，通常是模糊处理。那是除非你真的想要原始图像。

# c# - 有什么方法可以忽略 contentpresenter 中的应用程序资源

> ID：10621313
> 
> 赞同：2
> 
> 时间：2012-05-16T15:02:41.447
> 
> 标签：c#, wpf, inheritance, styling

与问题相关的一些信息：[http ://www.11011.net/archives/000692.html](http://www.11011.net/archives/000692.html)

具体情况是：在第三方应用程序中的 app.xaml 中声明了一些通用文本块（键等于类型）样式，在我看来，它们被所有内容呈现者使用，而忽略了我自己的样式。

我发现了几个可能的解决方案：

1.  显式地为所有元素分配一个具有覆盖模板的样式并将具有我的样式的资源字典添加到 contentpresenter 资源。

2.  为字符串添加数据模板，但访问文本检测存在问题（可以通过将 contentpresenter 与 ref 放置到我自己的资源中来解决，这不是一个好的解决方案，因为我们增加可视化树只是为了解决这个问题）

可能还有其他解决方案吗？

PS：已经有很多视图，所以第一个选项是很多工作！

**要重现创建新的 wpf 项目并修改下一个文件：**

**App.xaml 添加通用样式：**

```
<Application.Resources>
    <Style TargetType="TextBlock">
        <Setter Property="FontSize" Value="20"/>
    </Style>
</Application.Resources> 
```

**MainWindow.xaml 内容为：**

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Dictionary.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>     
</Window.Resources>
<StackPanel>
    <Button Content="Hello world">
        <Button.ContextMenu>
            <ContextMenu>
                <MenuItem Header="Access_Text"/>
                <MenuItem Header="NormalText"/>
            </ContextMenu>
        </Button.ContextMenu>
    </Button>        
    <TextBlock Text="WELCOME TO BLACK MESA"/>
</StackPanel> 
```

**添加 Dictionary.xaml 资源字典并在里面添加下一个样式：**

```
<Style TargetType="TextBlock">
    <Setter Property="FontSize" Value="8"/>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:40:24.900

不知道你可以在哪里做，因为我不了解你的应用程序的结构，但如果你想从应用程序资源中删除样式，你可以像这样以编程方式进行

```
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        ResourceDictionary dic = App.Current.Resources;
        dic[typeof (TextBlock)] = null;
    }
} 
```

使用您在测试 WPF 项目中提供的 XAML，这使我的默认字体大小为**12**而不是**20**。

# objective-c - UIPageViewController 工具栏上的页码

> ID：10621318
> 
> 赞同：0
> 
> 时间：2012-05-16T15:03:00.563
> 
> 标签：objective-c, ios

我有一个正在编写的 PageViewApplication，而且我已经快到了！但我无法将页码显示为工具栏中的按钮标题。

当用户在 pageviewcontroller 中的图像上点击一次时，工具栏被激活，并且在此工具栏上是一个按钮，据我所知，这是显示页码的最佳方式。

我写了以下内容，其中`_currentPageNumber`是当前索引的整数

```
NSString *strTotalPages = [NSString stringWithFormat:@"%d", NrOfImages];
_pageNumbering.title = [NSString stringWithFormat:@"%d / %@", _currentPageNumber, strTotalPages]; 
```

我的问题是在哪里放置它，因为它现在只显示 0

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:40:36.723

我使用此功能并且工作正常

```
- (NSUInteger)indexOfViewController:(LeafletPageContentViewController *)viewController {   

return [self.modelArray indexOfObject:viewController.dataObject]; } 
```

modelArray 是包含每个视图数据的数组

然后，当我想知道当前索引时使用这个

```
ClassOfMyViewController *currentViewController = [self.pageViewController.viewControllers objectAtIndex:0];

NSUInteger retreivedIndex = [self indexOfViewController:currentViewController]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:11:51.850

如果要更改工具栏上按钮的标题，则需要删除/重新创建按钮并将其添加到工具栏，因为它不像使用字符串值更改按钮的标题那么简单.

基本上重绘它应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T18:21:38.660

我遇到了这个问题，但是 pageViewController 没有提供检索当前页面的方法。所以，如果你使用这个方法`pageControllerAfterPageController`或者`pageControllerBeforePageController`你应该得到一个错误的页码：实际上，如果你用手指滑动改变页面，但你没有完成滑动，显示的页面保持不变，但你的计数器显示上一个或下一页编号。

因此，您可以尝试使用`viewDidLoad`您`contentViewController`的方法更新计数器和按钮！

# ldap - change distinguished name format in OpenLDAP

> ID：10621319
> 
> 赞同：4
> 
> 时间：2012-05-16T15:03:04.143
> 
> 标签：ldap, alfresco, distinguishedname

i have the following problem: i have installed and OpenLDAP server in which in the people/users tree the distinguished name have the following format:

```
Distinguished Name: cn=Luigi Rossi,ou=people,dc=prisma,dc=local 
```

The problem is i wish to replace it using the uid (a.k.a. the account username) instead of the CN in order to have something like this

```
Distinguished Name: uid=lrossi,ou=people,dc=prisma,dc=local 
```

I need this because i'm configuring ldap authentication for Alfresco Community 4.0.d and it need the username

```
ldap.authentication.userNameFormat=uid=%s,ou=people,dc=prisma,dc=local 
```

Any help?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-06T11:50:27.397

It's an old post but I ran into this myself. The answer was actually pretty simple. If you're using phpldapadmin to create accounts, you need to edit the posixAccount template. Look for the `<rdn></rdn>` tags. Replace the cn with uid and save. Your accounts will now be created with a DN in the "uid=%s,dc=example,dc=com" form instead of "cn=%s,dc=example,dc=com"

[http://phpldapadmin.sourceforge.net/wiki/index.php/Templates#Template_Header_Configuration](http://phpldapadmin.sourceforge.net/wiki/index.php/Templates#Template_Header_Configuration)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T15:05:50.373

Use the `modify DN` LDAP request (in this case using the legacy OpenLDAP `ldapmodify` tool):

The `uid` attribute may need to be added:

```
ldapmodify -h host -p port -D bind-dn -w password <<!
dn: cn=Luigi Rossi,ou=people,dc=prisma,dc=local
changetype: modify
add: uid
uid: lrossi
!

ldapmodify -h host -p port -D bind-dn -w password <<!
dn: cn=Luigi Rossi,ou=people,dc=prisma,dc=local
changetype: moddn
newrdn: uid=lrossi,ou=people,dc=prisma,dc=local
deleteoldrdn: 1
! 
```

### see also

*   [LDAP: modify DN](http://ff1959.wordpress.com/2011/08/01/mastering-moddn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T00:16:21.203

How to do this per object (not changing the format globally) in phpLDAPadmin:

*   click on the object in the hierarchy on the left to show up on the right
*   the title of the object is shown as: cn=Luigi Rossi
*   the subtitle just below contains "Distinguished Name: cn=Luigi Rossi,ou=people,dc=prisma,dc=local"
*   now click on "Rename" link just 4 lines below
*   change value "cn=Luigi Rossi" to "uid=lrossi"
*   that's it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-21T17:02:26.277

Worth mentioning is the [ldapmodrdn](http://linux.die.net/man/1/ldapmodrdn) tool, which e.g. in Debian is part of the ldap-utils package. It can read in a simple file where on first line is the old CN as a DN, and on the second line the new CN as an RDN. If there are many users to change, they can be all included in the same file, separated with empty lines.

With that tool its quite easy to process all the existing accounts and change their DNs.

# ruby - 如何形成 Github API POST 请求以向 gist 添加新评论？

> ID：10621320
> 
> 赞同：0
> 
> 时间：2012-05-16T15:03:05.740
> 
> 标签：ruby, github

我正在这个 url 向 github 发出 Post 请求：

`https://api.github.com/gists/2710948/comments`

从理论上讲，这应该创建一个评论，其中的文本是由请求正文中的内容形成的。但是，当我尝试发布该帖子时，出现 404 错误。这使我相信没有找到要点，但是，如果您在同一地址执行 Get 请求，它会很好。

我需要做身份验证吗？我尝试在我的标题集合中添加用户名和密码，但我不知道我是否使用了正确的格式。我已经尝试通过 Ruby、HTTP 客户端和 curl 进行这项工作，但无论哪种方式我都会遇到相同的错误。

我正在使用的 curl 命令是这样的：

`curl -X POST -d "This is my sample comment" https://api.github.com/gists/2710948/comments`

我认为如果我可以让 curl 命令正常工作，我将能够找出 HTTP 客户端，然后是 Ruby。这将是我第一次尝试使用 API，所以没有什么太基础的东西让我仔细检查；所有建议都会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:31:59.663

```
curl -d '{ "body": "Test comment" }' -u "Username:Pass" -X POST https://api.github.com/gists/2710948/comments 
```

红宝石代码：

```
require 'net/http'

uri = URI("https://api.github.com/gists/2710948/comments")
req = Net::HTTP::Post.new(uri.to_s)
req.basic_auth("Username", "Pass")
req.body = '{"body": "Test message"}'  # `to_json` can be used
req["content-type"] = "application/json"
Net::HTTP.start(uri.host, uri.port, :use_ssl => true) do |http|
  p response = http.request(req)
end 
```

另请参阅[http://developer.github.com/v3/gists/comments/](http://developer.github.com/v3/gists/comments/)

# sql - 如何添加代码来初始化sql数据库

> ID：10621322
> 
> 赞同：7
> 
> 时间：2012-05-16T15:03:14.800
> 
> 标签：sql, sql-server, asp.net-mvc-3, ef-code-first

我使用 codefirst，我使用 Elmah。我每次重新创建数据库时，都必须从文件中手动添加代码：

```
/*

   ELMAH - Error Logging Modules and Handlers for ASP.NET
   Copyright (c) 2004-9 Atif Aziz. All rights reserved.

    Author(s):

        Atif Aziz, http://www.raboof.com
        Phil Haacked, http://haacked.com

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

*/

-- ELMAH DDL script for Microsoft SQL Server 2000 or later.

-- $Id: SQLServer.sql 677 2009-09-29 18:02:39Z azizatif $

DECLARE @DBCompatibilityLevel INT
DECLARE @DBCompatibilityLevelMajor INT
DECLARE @DBCompatibilityLevelMinor INT

SELECT 
    @DBCompatibilityLevel = cmptlevel 
FROM 
    master.dbo.sysdatabases 
WHERE 
    name = DB_NAME()

IF @DBCompatibilityLevel <> 80
BEGIN

    SELECT @DBCompatibilityLevelMajor = @DBCompatibilityLevel / 10, 
           @DBCompatibilityLevelMinor = @DBCompatibilityLevel % 10

    PRINT N'
    ===========================================================================
    WARNING! 
    ---------------------------------------------------------------------------

    This script is designed for Microsoft SQL Server 2000 (8.0) but your 
    database is set up for compatibility with version ' 
    + CAST(@DBCompatibilityLevelMajor AS NVARCHAR(80)) 
    + N'.' 
    + CAST(@DBCompatibilityLevelMinor AS NVARCHAR(80)) 
    + N'. Although 
    the script should work with later versions of Microsoft SQL Server, 
    you can ensure compatibility by executing the following statement:

    ALTER DATABASE [' 
    + DB_NAME() 
    + N'] 
    SET COMPATIBILITY_LEVEL = 80

    If you are hosting ELMAH in the same database as your application 
    database and do not wish to change the compatibility option then you 
    should create a separate database to host ELMAH where you can set the 
    compatibility level more freely.

    If you continue with the current setup, please report any compatibility 
    issues you encounter over at:

    http://code.google.com/p/elmah/issues/list

    ===========================================================================
'
END
GO

/* ------------------------------------------------------------------------ 
        TABLES
   ------------------------------------------------------------------------ */

CREATE TABLE [dbo].[ELMAH_Error]
(
    [ErrorId]     UNIQUEIDENTIFIER NOT NULL,
    [Application] NVARCHAR(60)  COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [Host]        NVARCHAR(50)  COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [Type]        NVARCHAR(100) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [Source]      NVARCHAR(60)  COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [Message]     NVARCHAR(500) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [User]        NVARCHAR(50)  COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [StatusCode]  INT NOT NULL,
    [TimeUtc]     DATETIME NOT NULL,
    [Sequence]    INT IDENTITY (1, 1) NOT NULL,
    [AllXml]      NTEXT COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL 
) 
ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO

ALTER TABLE [dbo].[ELMAH_Error] WITH NOCHECK ADD 
    CONSTRAINT [PK_ELMAH_Error] PRIMARY KEY NONCLUSTERED ([ErrorId]) ON [PRIMARY] 
GO

ALTER TABLE [dbo].[ELMAH_Error] ADD 
    CONSTRAINT [DF_ELMAH_Error_ErrorId] DEFAULT (NEWID()) FOR [ErrorId]
GO

CREATE NONCLUSTERED INDEX [IX_ELMAH_Error_App_Time_Seq] ON [dbo].[ELMAH_Error] 
(
    [Application]   ASC,
    [TimeUtc]       DESC,
    [Sequence]      DESC
) 
ON [PRIMARY]
GO

/* ------------------------------------------------------------------------ 
        STORED PROCEDURES                                                      
   ------------------------------------------------------------------------ */

SET QUOTED_IDENTIFIER ON 
GO
SET ANSI_NULLS ON 
GO

CREATE PROCEDURE [dbo].[ELMAH_GetErrorXml]
(
    @Application NVARCHAR(60),
    @ErrorId UNIQUEIDENTIFIER
)
AS

    SET NOCOUNT ON

    SELECT 
        [AllXml]
    FROM 
        [ELMAH_Error]
    WHERE
        [ErrorId] = @ErrorId
    AND
        [Application] = @Application

GO
SET QUOTED_IDENTIFIER OFF 
GO
SET ANSI_NULLS ON 
GO

SET QUOTED_IDENTIFIER ON 
GO
SET ANSI_NULLS ON 
GO

CREATE PROCEDURE [dbo].[ELMAH_GetErrorsXml]
(
    @Application NVARCHAR(60),
    @PageIndex INT = 0,
    @PageSize INT = 15,
    @TotalCount INT OUTPUT
)
AS 

    SET NOCOUNT ON

    DECLARE @FirstTimeUTC DATETIME
    DECLARE @FirstSequence INT
    DECLARE @StartRow INT
    DECLARE @StartRowIndex INT

    SELECT 
        @TotalCount = COUNT(1) 
    FROM 
        [ELMAH_Error]
    WHERE 
        [Application] = @Application

    -- Get the ID of the first error for the requested page

    SET @StartRowIndex = @PageIndex * @PageSize + 1

    IF @StartRowIndex <= @TotalCount
    BEGIN

        SET ROWCOUNT @StartRowIndex

        SELECT  
            @FirstTimeUTC = [TimeUtc],
            @FirstSequence = [Sequence]
        FROM 
            [ELMAH_Error]
        WHERE   
            [Application] = @Application
        ORDER BY 
            [TimeUtc] DESC, 
            [Sequence] DESC

    END
    ELSE
    BEGIN

        SET @PageSize = 0

    END

    -- Now set the row count to the requested page size and get
    -- all records below it for the pertaining application.

    SET ROWCOUNT @PageSize

    SELECT 
        errorId     = [ErrorId], 
        application = [Application],
        host        = [Host], 
        type        = [Type],
        source      = [Source],
        message     = [Message],
        [user]      = [User],
        statusCode  = [StatusCode], 
        time        = CONVERT(VARCHAR(50), [TimeUtc], 126) + 'Z'
    FROM 
        [ELMAH_Error] error
    WHERE
        [Application] = @Application
    AND
        [TimeUtc] <= @FirstTimeUTC
    AND 
        [Sequence] <= @FirstSequence
    ORDER BY
        [TimeUtc] DESC, 
        [Sequence] DESC
    FOR
        XML AUTO

GO
SET QUOTED_IDENTIFIER OFF 
GO
SET ANSI_NULLS ON 
GO

SET QUOTED_IDENTIFIER ON 
GO
SET ANSI_NULLS ON 
GO

CREATE PROCEDURE [dbo].[ELMAH_LogError]
(
    @ErrorId UNIQUEIDENTIFIER,
    @Application NVARCHAR(60),
    @Host NVARCHAR(30),
    @Type NVARCHAR(100),
    @Source NVARCHAR(60),
    @Message NVARCHAR(500),
    @User NVARCHAR(50),
    @AllXml NTEXT,
    @StatusCode INT,
    @TimeUtc DATETIME
)
AS

    SET NOCOUNT ON

    INSERT
    INTO
        [ELMAH_Error]
        (
            [ErrorId],
            [Application],
            [Host],
            [Type],
            [Source],
            [Message],
            [User],
            [AllXml],
            [StatusCode],
            [TimeUtc]
        )
    VALUES
        (
            @ErrorId,
            @Application,
            @Host,
            @Type,
            @Source,
            @Message,
            @User,
            @AllXml,
            @StatusCode,
            @TimeUtc
        )

GO
SET QUOTED_IDENTIFIER OFF 
GO
SET ANSI_NULLS ON 
GO 
```

我自动执行此代码？我尝试使用`db.Database.ExecuteSqlCommand`，但我得到了很多形式的错误：

```
Incorrect syntax near 'GO'.
Incorrect syntax near the keyword 'ALTER'.
Incorrect syntax near the keyword 'ALTER'.
Incorrect syntax near 'GO'.
Incorrect syntax near the keyword 'SET'.
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
Must declare the scalar variable "@ErrorId".
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
Must declare the scalar variable "@TotalCount".
Must declare the scalar variable "@PageIndex".
Must declare the scalar variable "@TotalCount".
Must declare the scalar variable "@Application".
Must declare the scalar variable "@PageSize".
Must declare the scalar variable "@PageSize".
Must declare the scalar variable "@Application".
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
Must declare the scalar variable "@ErrorId".
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-11T01:55:55.963

尝试此迁移，请记住它希望所有 GO 语句都在一行上，并且文件使用 \r\n 行结尾。我使用*elmah.sqlserver* NuGet 包安装了 Elmah，它将 SqlServer.sql 文件放在适当的位置。您将需要更改资源名称以匹配您的项目。

```
public partial class Elmah : DbMigration
{
    public override void Up()
    {
        var sqlStream = Assembly.GetExecutingAssembly().GetManifestResourceStream("MyProject.App_Readme.Elmah.SqlServer.sql");
        using(var sqlStreamReader = new StreamReader(sqlStream))
        {
            string sqlScript = sqlStreamReader.ReadToEnd();
            ExecuteSqlScript(sqlScript);
        }
    }

    void ExecuteSqlScript(string sqlScript)
    {
        string[] sql = sqlScript.Split(new[] {"\r\nGO\r\n"}, StringSplitOptions.RemoveEmptyEntries);

        foreach (var sqlCommand in sql)
        {
            if (!string.IsNullOrWhiteSpace(sqlCommand))
                Sql(sqlCommand);
        }
    }

    public override void Down()
    {
        DropTable("ELMAH_Error");
        Sql("DROP PROCEDURE ELMAH_GetErrorXml");
        Sql("DROP PROCEDURE ELMAH_GetErrorsXml");
        Sql("DROP PROCEDURE ELMAH_LogError");
    }
} 
```

我

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T20:31:45.087

只是为了将我对 OP 的评论正式化为答案；

我认为这里的最佳实践是只有您的代码优先数据库应该受到任何根本性更改的影响（即在模型更改时重新创建数据库）。与此无关的所有其他表应该在 ApplicationServices 数据库或类似数据库中，而不是在核心数据库中。这样，您就不会在每次需要使用简单的属性或数据类型更改来更新模型时创建支持噩梦。另外，每次进行更改时，您当然最终会丢失日志记录（和其他）数据库表的整个历史记录。

所以，总而言之，我认为你正在用一个可能不合适的解决方案来解决错误的问题。

这当然是我们在我们的商店和我之前参与过的项目中的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:38:09.547

您需要解析脚本，将其拆分为单独的 SQL 命令，并通过`SqlCommand`. 不幸的是，我不知道有一种方法可以自动执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T20:02:34.200

该脚本要求您分隔批次（`GO`是批次分隔符）并将每个批次单独发送到 SQL Server。我实际上有一个示例项目[dbutilsqlcmd](http://code.google.com/p/dbutilsqlcmd/)可以做到这一点，并且还支持更多的 sqlcmd 扩展，例如脚本中`:setvar`的`$(variable)`替换，这在部署时非常有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T15:09:16.190

这是由 GO 语句分隔的一系列 SQL 命令（严格来说不是 T-SQL 命令）

可以使用 SQL Managment Studio 执行脚本，也可以使用命令行工具 SQLCMD.exe

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T15:17:31.263

我认为您不应该在 ExecuteSqlCommand 上运行那么多批次。

为什么不简单地在 SSMS 上执行呢？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-03T19:37:39.857

现在有一个 nuget 包可以为您初始化 Elmah 表和过程：[https](https://www.nuget.org/packages/Elmah.SqlServer.EFInitializer/ "EFInitializer") ://www.nuget.org/packages/Elmah.SqlServer.EFInitializer/ 。将其添加到您的 Web 项目中。然后它将首先使用 EF 代码为您创建它。它将 Initializer 添加到您的 App_Start 文件夹中，因此您实际上不必添加任何代码。它将向您的数据库添加迁移，以确保它只添加一次。

# python - 使用 Open CV 在 Python 中提取背景

> ID：10621324
> 
> 赞同：1
> 
> 时间：2012-05-16T15:03:17.577
> 
> 标签：python, opencv, background

我正在尝试从视频中提取背景图像，以便检测其中的移动物体。我找到了 cv2.BackgroundSubtractorMOG() 之类的函数，但是我无法让它工作。有人有使用这个的经验吗？

我创建了对象`mog = cv2.BackgroundSubtractorMOG(300,-1,-1,-1)`

然后我尝试`mog.apply(Nmat,Nforemat,-1)`，但这似乎不起作用，我收到以下错误：

> ......\OpenCV-2.4.0\modules\video\src\bgfg_gaussmix.cpp:117: 错误: (-215) CV_MAT_DEPTH(frameType) == CV_8U

Nmat 和 N foremat 是 numpy 数组，因为如果不是，我也会收到错误消息。

这是正在进行的工作...

```
import cv
import cv2
import numpy as np

if __name__ == '__main__':
  cv.NamedWindow("test1", cv.CV_WINDOW_AUTOSIZE)
  cv.NamedWindow("test2", cv.CV_WINDOW_AUTOSIZE)
  capture = cv.CreateFileCapture('test.avi')
  frame = cv.QueryFrame(capture)

  img = cv.CreateImage(cv.GetSize(frame),8,1)
  thresh = cv.CreateImage(cv.GetSize(frame),8,1)
  foreground = cv.CreateImage(cv.GetSize(frame),8,1)
  foremat = cv.GetMat(foreground)
  Nforemat = np.array(foremat, dtype=np.float32)

  thresh = cv.CreateImage(cv.GetSize(img),8,1)
  mog = cv2.BackgroundSubtractorMOG()

  loop = True
  nframes=0
  while(loop):
    frame = cv.QueryFrame(capture)
    mat = cv.GetMat(frame)
    Nmat = np.array(mat, dtype=np.float32)

    cv.CvtColor(frame,img,cv.CV_BGR2GRAY)

    if (frame == None):
        break

    mog.apply(Nmat,Nforemat,-1)
    cv.Threshold(img,thresh,100,255,cv.CV_THRESH_BINARY)

    cv.ShowImage("test1", thresh)
    cv.ShowImage("test2",frame)
    char = cv.WaitKey(50)
    if (char != -1):
        if (char == 27):
                break
  cv.DestroyWindow("test1")
  cv.DestroyWindow("test2") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:53:53.620

改变

```
Nmat = np.array(mat, dtype=np.float32) 
```

为了

```
Nmat = np.array(mat, dtype=np.uint8) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T16:35:10.780

你为什么使用这些行：

```
thresh = cv.CreateImage(cv.GetSize(img),8,1) 
```

和

```
cv.Threshold(img,thresh,100,255,cv.CV_THRESH_BINARY) 
```

?

# java - 如何决定标记或不标记的字段（光学标记识别）？

> ID：10621330
> 
> 赞同：2
> 
> 时间：2012-05-16T15:03:30.513
> 
> 标签：java, image, jai

我正在制作一个 java **OMR**（光学标记识别）应用程序，让用户设计他需要的模板（绘制标记区域）然后当他扫描文档时，应用程序使用模板来获取区域的坐标（检查框）我的问题是如果我有图像和矩形（X，Y，宽度，高）如何决定是否标记区域

我正在使用 Java 高级成像 (JAI)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:13:54.203

据我了解您的问题，您知道扫描纸上每个复选框的位置。您只需要提前计算未填写表格中每个复选框的平均像素强度。

然后对于填充和扫描的表格，计算每个框内的平均像素密度。将阈值应用于每个框内的每组像素。选中平均框，平均值>阈值，未选中框。

我假设你有一个灰度图像（一个色带）。否则将您的彩色图像转换为灰度图像（有这样做的标准方法），并将阈值应用于每个复选框像素平均值。瞧！

# javascript - 请翻译这个 JavaScript 乱码？

> ID：10621334
> 
> 赞同：1
> 
> 时间：2012-05-16T15:03:37.897
> 
> 标签：javascript, regex, pattern-matching

我正在尝试修改和更新旧的 Greasemonkey 脚本，目的是为所有亚马逊链接自动添加会员 ID。当谈到 JavaScript 时，我是一个新手，但我通常很擅长修改任何语言的现有脚本。这里只有一条线，我无法绕开。

我开始的脚本已经过时了，所以我不知道是语法有问题还是链接格式发生了变化。有人可以帮我理解这条线在做什么，以便我可以对其进行更改吗？

```
const affiliateLink = /(obidos.(ASIN.{12}([^\/]*(=|%3D)[^\/]*\/)*|redirect[^\/]*.(tag=)?))[^\/&]+/i; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T15:18:11.590

好吧，你要求的:)

启动正则表达式：

> /

开始组操作：

> (

搜索文本“obidos”，后跟任何单个字符

> 奥比都斯

打开另一个组运算符：

> (

搜索文本“ASIN”，后跟任意 12 个字符

> ASIN。{12}

另一组操作：

> (

后跟 0 个或多个非斜杠字符：

> [^\/]*

搜索 '=' 字符或 url 编码的 '=' (%3D) 的组操作：

> (=|%3D)

后跟 0 个或多个非斜杠字符：

> [^\/]*

后跟斜线（并关闭当前组），可以重复 0 次或更多次：

> \/)*

如果找到前一个组或匹配栏右侧的所有内容，则允许模式匹配：

> |

匹配文本“redirect”，后跟 0 个或多个非斜杠的字符：

> 重定向[^\/]*

匹配任何单个字符，后跟可选的文本“tag=”：

> .（标签=）？

关闭我们目前仍在其中的两个组操作：

> ))

后跟一个或多个不是斜杠或 & 的字符：

> [^\/&]+

关闭正则表达式：

> /

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:08:32.470

下载 expresso 的副本，它是一个很好的实用程序，并且对所有这些东西都派上用场。然后只需将正则表达式放入其中（起始斜杠和结束斜杠之间的所有内容）。

我将描述它匹配的字符串等，但它相当复杂，因为它有很多组件。你自己看它更容易。expresso 为每个模式提供了更英文的解释

# java - Spring，Hibernate，事务管理，未提交

> ID：10621337
> 
> 赞同：2
> 
> 时间：2012-05-16T15:04:00.023
> 
> 标签：java, spring, hibernate, transactions

所以，我尝试使用 Spring 进行事务管理。最后我的应用程序工作了，但删除不提交。在使用 Spring 之前，我在 DAO 中管理事务，我认为在我可以删除此代码之后。但现在删除不提交到数据库。

我的道：

```
protected Session getSession() {
    Session session = sessionFactory.openSession();
    ThreadLocalSessionContext.bind(session);
    return session;
}
public void delete(T t) {
    Session session = getSession();
// **this approach I used before**
//  session.beginTransaction();
//  try {
//  session.delete(t);
//  session.getTransaction().commit();
//  } catch (Exception e) {
//      session.getTransaction().rollback();
//  }
    session.delete(t);
    } 
```

我的应用程序上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation=" http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/tx
     http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
     http://www.springframework.org/schema/aop 
     http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url"
            value="jdbc:mysql://ngs-java-srv.synapse.com:3306/mybase" />
        <property name="username" value="user" />
        <property name="password" value="password" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <!-- <property name="configLocation" value="hibernate.cfg.xml" /> -->

        <property name="packagesToScan" value="todolist.entity" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</prop>
                <prop key="hibernate.show_sql">false</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
    </bean>

    <!-- dao beans -->
    <bean id="userDao"
        class="todolist.dao.hibernate.UserDaoImpl">
        <constructor-arg>
            <value>todolist.entity.User</value>
        </constructor-arg>
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean id="itemDao"
        class="todolist.dao.hibernate.ItemDaoImpl">
        <constructor-arg>
            <value>todolist.entity.Item</value>
        </constructor-arg>
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <!-- service bean -->
    <bean id="userService" class="todolist.service.UserServiceImpl">
        <property name="userDao" ref="userDao" />
        <property name="itemDao" ref="itemDao" />
    </bean>

    <!-- transaction manager -->
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

     <tx:annotation-driven transaction-manager="transactionManager" mode="aspectj"/>

    <!-- <tx:annotation-driven/> -->

<!--    <aop:config>
        <aop:pointcut id="serviceMethods"
            expression="execution(* todolist.service.UserService.*(..))" />
        <aop:advisor advice-ref="txAdvice" pointcut-ref="serviceMethods" />
    </aop:config>
    <tx:advice id="txAdvice" transaction-manager="transactionManager">
        <tx:attributes>
            <tx:method name="*" propagation="REQUIRES_NEW" />
            <tx:method name="deleteItem" no-rollback-for="Exception" />
        </tx:attributes>
    </tx:advice> -->

    <!-- backbeans -->
    <bean id="userLogin" class="todolist.jsf.UserLogin"
        scope="request">
        <property name="userService" ref="userService" />
    </bean>

    <bean id="userLogged" class="todolist.jsf.UserLogged"
        scope="session">
        <aop:scoped-proxy />
    </bean>

    <bean id="userRegister" class="todolist.jsf.UserRegister"
        scope="request">
        <property name="userService" ref="userService" />
    </bean>

    <bean id="createItem" class="todolist.jsf.CreateItem"
        scope="request">
        <property name="userService" ref="userService" />
    </bean>

    <bean id="todoList" class="todolist.jsf.TodoList"
        scope="request">
        <property name="userService" ref="userService" />
    </bean>

</beans> 
```

UserServiceImpl 类

```
package todolist.service;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import org.apache.log4j.Logger;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

import todolist.exception.AuthorizationError;
import todolist.exception.DuplicateLoginsException;
import todolist.service.StringToHashTool;
import todolist.dao.ItemDao;
import todolist.dao.UserDao;
import todolist.entity.Item;
import todolist.entity.User;

public class UserServiceImpl implements UserService {

    //private static final Logger log = Logger.getLogger(UserServiceImpl.class);

    private UserDao userDao;
    private ItemDao itemDao;

    public void setItemDao(ItemDao itemDao) {
    this.itemDao = itemDao;
    }

    public void setUserDao(UserDao userDao) {
    this.userDao = userDao;
    }

    @Override
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public boolean isUserExists(String login) {
    return (userDao.getUserByLogin(login) != null);
    }

    @Override
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public boolean isPasswordCorrect(String login, String password) {
    if (isUserExists(login)) {
        return userDao.getUserByLogin(login).getPassword()
            .equals(StringToHashTool.getHash(password));
    } else {
        return false;
    }
    }

    @Override
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public User login(String login, String password) {
    if (isPasswordCorrect(login, password)) {
        return userDao.getUserByLogin(login);
    } else {
        throw new AuthorizationError("Incorrect password");
    }
    }

    @Override
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public boolean register(String login, String password) {
    if (isUserExists(login)) {
        throw new DuplicateLoginsException("Login " + login + " is already used.");
    } else {
        User user = new User();
        user.setLogin(login);
        user.setPassword(StringToHashTool.getHash(password));
        userDao.save(user);
        return true;
    }
    }

    @Override
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public void logout() {

    }

    @Override
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public Item createItem(Long creator_id, Long performer_id,
        String description, Date dueDate) {

    Item item = new Item();
    User user = userDao.getById(creator_id);

    item.setCreator(user);

    user = userDao.getById(performer_id);

    item.setPerformer(user);
    item.setDescription(description);
    item.setStartDate(new Date());
    item.setDueDate(dueDate);

    itemDao.save(item);

    return item;
    }

    @Override    
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public void deleteItem(Long item_id) {
    Item item = itemDao.getById(item_id);
    itemDao.delete(item);
    }

    @Override
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public List<Item> getUserItems(String login) {
    User user = userDao.getUserByLogin(login);
    return itemDao.getItemsByPerformer(user.getId());
    }

    @Override
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public List<User> getUsers() {
    return userDao.getUsers();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:22:12.267

```
<aop:pointcut 
    id="serviceMethods"
    expression="execution(*todolist.service.UserService.*(..))" 
/> 
```

第一步：

将其更改为：

```
<aop:pointcut 
    id="serviceMethods"
    expression="todolist.service.UserServiceImpl.delete()" 
/> 
```

查看删除是否开始提交。我只是想确保你清除任何错别字和你有什么。如果这个显式配置失败，那么配置肯定有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:04:40.103

我使用 Spring HibernateTransactionManager 对象和注释驱动配置取得了成功。在我的应用程序上下文中，我简单地声明了以下两个 bean：

```
<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="session_factory" />
</bean>
<tx:annotation-driven transaction-manager="transactionManager" /> 
```

然后在我的服务层中，您的 UserServiceImpl 例如：

```
public class UserServiceImpl implements UserService {

private final UserDao userDao;
private final ItemDao itemDao;

public UserServiceImpl(UserDao userDao, ItemDao itemDao) {
    this.userDao = userDao;
    this.itemDao = itemDao;
}

@Override
@Transactional(propagation = Propagation.REQUIRES_NEW)
public boolean isUserExists(String login) {
    return (userDao.getUserByLogin(login) != null);
}

... 
```

将事务注释尽可能靠近视图（在 MVC 中）移动是很重要的。原因是 1) 性能和 2) 原子事务。如果调用 UserService 的调用在单个函数调用中调用 isUserExists、isPasswordCorrect 和 login 方法，您可能希望它们在单个事务中执行。为此，请从 UserServiceImpl 中删除 @Transactional 注释并将其移至调用类。这确保了单个事务用于所有三个方法调用。对于原子执行，这也有效。想想经典的银行汇款示例。如果您在 UserService 上有两个单独的事务，则前两个方法调用可以成功，最后一个方法调用失败。前两个事务将被提交，因为它们位于单独的事务块中，这会使您的数据库处于不一致的状态。当然，原子事务主要与写入数据的事务相关。

此外，不要将事务注释添加到接口，将它们保留在实现中。

然后在我的 DAO 中，我只需执行 sessionFactory.getCurrentSession() 并从那里开始。getCurrentSession() 是线程安全的，但对您的 DAO 保密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T17:17:15.147

在您的 DAO 中使用`getCurrentSession`代替`openSession`，以便 getSession 方法如下所示：

```
protected Session getSession() {
    return sessionFactory.getCurrentSession();
} 
```

您正在创建一个使用不同数据库连接的新会话，因此为服务设置的事务不适用。

同样，当您配置它们时，DAO 将具有默认的单例范围；将实体作为构造函数参数传递是没有意义的。单例不应该具有特定于某个单独事务的实例状态。

# java - 带有 Hibernate 的独立数据库

> ID：10621343
> 
> 赞同：1
> 
> 时间：2012-05-16T15:04:37.953
> 
> 标签：java, database, hibernate, orm

我必须开发一个 Spring MVC 项目。这使用户可以使用正常的 Web 访问在线工作。我还需要为用户提供离线工作的可能性。

所以我想开发一个独立的java应用程序，用户可以安装在他们的电脑上。例如，他们可以使用 JSON 与 Jackson 与服务器交换数据。

我的问题是关于客户端的。假设使用像 Hibernate 这样的 ORM 处理数据，哪个独立 db 最适合避免安装 DBMS（如 mysql、mssql、...）？

我想避免在客户端上安装许多软件。

我开发了一个这样的项目，其中客户端是 Android 平板电脑，ORM 工具是 ormlite 和 db sqlite。数据库包含在一个文件中。

感谢您的任何回复！马可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:07:19.947

[**Apache Derby**](http://db.apache.org/derby/)在本地运行良好，可嵌入、快速且小巧 (2.5 MB)。

如果您更愿意使用“官方支持”的产品，您可以使用[**JavaDB——**](http://www.oracle.com/technetwork/java/javadb/overview/index.html)它是伪装的 Derby。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:38:27.140

我实际上会推荐[`H2 Database`](http://www.h2database.com/html/main.html)over `Apache Derby`。我两者都用过，发现`Derby`很难以非嵌入式方式配置和访问（这对你来说可能不是问题，但对我来说是）。

`H2`也更快。

# java - Java 的多租户/条件配置有哪些库？

> ID：10621344
> 
> 赞同：2
> 
> 时间：2012-05-16T15:04:40.933
> 
> 标签：java, configuration, velocity, apache-commons-config

我正在尝试找到一种配置服务器端 Java 应用程序的解决方案，以便系统的不同用户与系统进行交互，就好像它的配置不同（[多租户](http://en.wikipedia.org/wiki/Multitenancy)）。例如，当我的应用程序为来自 user1 的请求提供服务时，我希望我的应用程序以克林贡语响应，但对于所有其他用户，我希望它以英语回复。（我故意选择了一个荒谬的例子，以避免细节：重要的是我希望应用程序针对不同的请求表现不同）。

理想情况下，有一个通用的解决方案（即一个允许我将用户特定的覆盖添加到我的配置的*任何*部分而无需更改代码的解决方案）。

我看过 Apache Commons Configuration，它[内置了对多租户配置的支持](http://commons.apache.org/configuration/userguide/howto_multitenant.html)，但据我所知，这是通过将*一些基本配置*与*一些覆盖*组合来完成的。这意味着我将有一个配置指定：

```
application.lang=english 
```

并且，说一个`user1.properties`覆盖文件：

```
application.lang=klingon 
```

不幸的是，如果我们的支持团队可以在一个地方查看所有相关配置，并且以某种方式内联指定覆盖，而不是为*base和**overrides*分别设置文件，那么他们会容易得多。

[我认为 Commons Config 的多租户 + 类似Velocity 模板](http://velocity.apache.org/engine/devel/index.html)的某种组合来描述底层配置中的条件元素是我的目标 - Commons Config 用于轻松与我的配置交互， Velocity 用于非常有表现力地描述任何覆盖，在单一配置中，例如：

```
#if ($user=="user1")
 application.lang=klingon
#else
 application.lang=english
#end 
```

**人们使用什么解决方案来解决这类问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:10:35.453

您可以像下面这样对每个服务器操作进行编码吗？

```
void op1(String username, ...)
{
    String userScope = getConfigurationScopeForUser(username);
    String language = cfg.lookupString(userScope, "language");
    int    fontSize = cfg.lookupInt(userScope, "font_size");
    ... // business logic expressed in terms of language and fontSize
} 
```

（上面的伪代码假定用户名作为参数传递，但您可以通过另一种机制传递它，例如线程本地存储。）

如果以上可以接受，那么[Config4*](http://www.config4star.org/)可以满足您的要求。使用Config4*，`getConfigurationScopeForUser()`上述伪代码中使用的方法可以实现如下（这里假设`cfg`是一个Configuration对象，之前已经通过解析配置文件进行了初始化）：

```
String getConfigurationScopeForUser(String username)
{
    if (cfg.type("user", username) == Configuration.CFG_SCOPE) {
        return Configuration.mergeNames("user", username);
    } else {
        return "user.default";
    }

} 
```

这是与上述内容一起使用的示例配置文件。大多数用户从“u​​ser.default”范围获取他们的配置，但 Mary 和 John 对其中一些默认值有自己的覆盖：

```
user.default {
    language = "English";
    font_size = "12";
    # ... many other configuration settings
}

user.John {
    @copyFrom "user.default";
    language = "Klingon"; # override a default value
}

user.Mary {
    @copyFrom "user.default";
    font_size = "18"; # override a default value
} 
```

如果以上听起来可能满足您的需求，那么我建议您阅读“入门指南”的第 2 章和第 3 章，以充分了解 Config4* 语法和 API，以便能够确认/反驳适用性Config4* 满足您的需求。[您可以在 Config4*网站](http://www.config4star.org/)上找到该文档。

免责声明：我是 Config4* 的维护者。

**编辑：我正在提供更多详细信息以回应 bacar 的评论。**

我没有将 Config4* 放在 Maven 存储库中。但是，使用其捆绑的 Ant 构建文件构建 Config4* 是微不足道的，因为 Config4*对第三方库*没有任何依赖关系。*

使用 Config4* 在服务器应用程序（由 bacar 的评论提示）中使用 Config4* 的另一种方法如下...

像下面的伪代码一样实现每个服务器操作：

```
void op1(String username, ...)
{
    Configuration cfg = getConfigurationForUser(username);
    String language = cfg.lookupString("settings", "language");
    int    fontSize = cfg.lookupInt("settings", "font_size");
    ... // business logic expressed in terms of language and fontSize
} 
```

上面使用的`getConfigurationForUser()`方法可以实现如下伪代码所示：

```
HashMap<String,Configuration>  map = new HashMap<String,Configuration>();

synchronized String getConfigurationForUser(String username)
{
    Configuration cfg = map.get(username);
    if (cfg == null) {
        // Create a config object tailored for the user & add to the map
        cfg = Configuration.create();
        cfg.insertString("", "user", username); // in global scope
        cfg.parse("/path/to/file.cfg");
        map.put(username, cfg);
    }
    return cfg;    
} 
```

这是与上述内容一起使用的示例配置文件。

```
user ?= ""; // will be set via insertString()
settings {
    @if (user @in ["John", "Sam", "Jane"]) {
        language = "Klingon";
    } @else {
        language = "English";
    }
    @if (user == "Mary") {
        font_size = "12";
    } @else {
        font_size = "10";
    }
    ... # many other configuration settings
} 
```

我对这两种方法的主要评论如下：

1.  第一种方法（一个`Configuration`包含大量变量和范围的对象）可能比第二种方法（许多`Configuration`对象，每个对象包含少量变量）使用的内存略少。但我的猜测是，任何一种方法的内存使用量都将以 KB 或数十 KB 为单位，与服务器应用程序的整体内存占用量相比，这将是微不足道的。

2.  我更喜欢第一种方法，因为单个`Configuration`对象只初始化一次，然后通过只读`lookup()`样式的操作访问它。这意味着您不必担心对`Configuration`对象的同步访问，即使您的服务器应用程序是多线程的。相反，`HashMap`如果您的服务器应用程序是多线程的，则第二种方法需要您同步访问。

3.  - 样式操作的开销`lookup()`大约是纳秒或微秒，而解析配置文件的开销大约是毫秒或数十毫秒（取决于文件的大小）。第一种方法只执行一次配置文件的相对昂贵的解析，并且在应用程序的初始化中完成。相比之下，第二种方法对配置文件执行“N”次相对昂贵的解析（对于“N”个用户中的每个用户一次），并且在服务器处理来自客户端的请求时会发生重复开销。对您的应用程序而言，这种性能下降可能是也可能不是问题。

4.  我认为易用性比易于实施更重要。所以，如果你觉得第二种方法更容易维护配置文件，那么我建议你使用那种方法。

5.  在第二种方法中，您可能想知道为什么我将大多数变量放在命名范围 ( `settings`) 中，而不是与“注入”`user`变量一起放在全局范围中。我这样做的原因超出了您的问题范围：将“注入”变量与应用程序可见变量分开可以更轻松地对应用程序可见变量执行模式验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T17:39:34.653

通常，用户配置文件会进入数据库，并且用户必须使用登录名打开会话。用户名可能会进入 HTTPSession (=Cookies)，并且在每次请求时，服务器都会获取用户名并可以从数据库中读取配置文件。Shure，数据库可以是一些配置文件，如 joe.properties、jim.properties、admin.properties 等。

# php - 使用 php mysql 按半径搜索经纬度数据库

> ID：10621345
> 
> 赞同：5
> 
> 时间：2012-05-16T15:04:51.933
> 
> 标签：php, sql, json, jquery

我正在尝试开发一个小型站点，该站点通过设定的半径从数据库中检索结果并将它们放置在地图上。我使用谷歌地图 api 从那里获取经纬度搜索条件，将它们传递给我的 php 脚本，该脚本查询数据库并将结果集作为 JSON 对象返回。

我在使用 json 将 lat 和 long 发送到 php 时遇到了一个小问题。

我的主要问题是我搜索数据库的 sql 似乎是错误的，因为它只检索我数据库中的前 10 个结果。我希望它从搜索点返回半径内的前 10 个结果。

这是我的ajax代码

```
function showCarPark(location)
{
    var lat = location.lat();
    var lng = location.lng();
    //alert("Lat: " +lat.toFixed(6));
    //alert("Lng: " +lng.toFixed(6));
    document.getElementById('carParkResults').innerHTML = "";
    var criterion = document.getElementById("address").value;
    var count = 0;
    $.ajax({    
              url: 'process.php',
              type: 'GET',
              data: "lat=" + lat + "&lng=" + lng,
              dataType: 'json',
              success: function(data) 
              {
                  jQuery.each(data, function()
                  {
                    $('<p>').text("Car Park: " + data[count].name).appendTo('#carParkResults');
                    placeCarParks(data[count].postcode,data[count].name, data[count].street, data[count].type);
                    count++;
                  });
              },
              error: function(e) 
              {
                //called when there is an error
                console.log(e.message);
                alert("error" + e.message);
              }
    }); 
```

这是我的 php 脚本

```
$rad = 20;
$lat = $_GET['lat'];
$lng = 1.4681464; //put a temporary number in as it wont pass the lng in the JSON

$sql="SELECT *, (3959 * acos(cos(radians('".$lat."')) * cos(radians(lat)) * cos( radians(long) - radians('".$lng."')) + sin(radians('".$lat."')) * 
sin(radians(lat)))) 
AS distance 
FROM carpark HAVING distance < 15 ORDER BY distance LIMIT 0 , 10";

$result = mysql_query($sql);

while($r = mysql_fetch_assoc($result)) $rows[] = $r;

echo json_encode($rows); 
```

我表中的列称为 lat 和 long 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T15:15:38.773

对于您的情况，请尝试使用`WHERE`而不是`HAVING`

```
SELECT *, (3959 * acos(cos(radians('".$lat."')) * cos(radians(lat)) * cos( radians(long) - radians('".$lng."')) + sin(radians('".$lat."')) * 
sin(radians(lat)))) 
AS distance 
FROM carpark WHERE distance < 15 ORDER BY distance LIMIT 0 , 10 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-08T03:51:44.050

我使用 HAVING 没有任何问题。iLLin 的回答具有误导性。下面是一个正确查询到纽约市距离的示例：

```
SELECT *, (3959 * acos(cos(radians('40.7142')) * cos(radians(latitudeColName)) * cos( radians(longitudeColName) - radians('-74.0064')) + sin(radians('40.7142')) * sin(radians(latitudeColName)))) AS distance FROM myTable HAVING distance < 15 ORDER BY distance LIMIT 0 , 10 
```

更改 jQuery 请求中的行以使用此表示法 {name : value, name : value}：

```
 data: {lat : lat, long : long}, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:15:05.000

Larry Ullman 在他的“PHP 5 Advanced: Visual Quickpro Guide”一书中做了非常相似的事情。

看看他的示例代码，试试这个来计算距离：

```
ROUND(DEGREES(ACOS(SIN(RADIANS($lat)) 
* SIN(RADIANS(latitude)) 
+ COS(RADIANS($lat))  
* COS(RADIANS(latitude))
* COS(RADIANS($long - longitude)))) * 69.09) AS distance 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:20:37.427

```
"SELECT *, ( 3959 * acos( cos( radians(".$lat.") ) * cos( radians( ".$lat." ) ) * cos( radians( ".$long." ) - radians(".$long.") ) + sin( radians(".$lat.") ) * sin( radians( ".$lat." ) ) ) ) AS distance FROM carpark HAVING distance < 15 ORDER BY distance LIMIT 0, 10" 
```

您需要修复查询以获取纬度和经度值。你只是在几个地方传递了 lat/long 这个词。将此查询与您的进行比较，以了解我的意思。

# objective-c - Objective-c：如何使用 NSPipe 在 NSTask 中输出非法命令 echo？

> ID：10621348
> 
> 赞同：0
> 
> 时间：2012-05-16T15:04:58.247
> 
> 标签：objective-c, shell, nstask, nspipe

我有如下代码，没关系，但我有两个问题。

**1) 如果我为sh**分配了一些非法参数，例如 @"ls - l"，那么**outString**为空。也就是说，它无法捕获错误警告“ls: -: No such file or directory ls: l: No such file or directory”。我该如何处理？

2）如何实现这个功能：假设app的当前目录是**"/user/Doc"**，我执行**sh = @"cd /"**，那么我执行**sh = @"ls -l"**可以看到下面的内容下一个循环中的“/”目录。但是当新循环开始时，当前目录恢复到“/user/Doc”。我怎样才能保持上一个循环的任务环境？

此外，我可以像直接在终端上工作一样，继续运行“/bin/sh”吗？

```
NSString *sh = @"ls -l";
while(sh != @"end"){
    NSTask *shData = [[NSTask alloc] init];
    [shData setLaunchPath: @"/bin/sh"];

    NSArray *args;
    args = [NSArray arrayWithObjects: @"-c", sh, nil];
    [shData setArguments: args];

    NSPipe *myPipe;
    myPipe = [NSPipe pipe];
    [shData setStandardOutput: myPipe];
    [shData setStandardInput:[NSPipe pipe]];

    NSFileHandle *file;
    file = [myPipe fileHandleForReading];

    [shData launch];

    NSData *data1;    
    data1 = [file readDataToEndOfFile];

    NSString *outString;
    outString = [[NSString alloc] initWithData: data1 encoding: NSUTF8StringEncoding];

    NSLog(@"%@",outString);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:25:36.730

1.  该字符串是标准错误，而不是标准输出。由于您不检查错误流，因此您将找不到它。

2.  这不是子shell的工作方式。谷歌“为什么 cd 是一个内置的 shell”以获得大量信息。

# php - PHPExcel从链接加载文件

> ID：10621349
> 
> 赞同：2
> 
> 时间：2012-05-16T15:05:01.327
> 
> 标签：php, excel

有没有办法可以从 url 加载文件，而不是从本地目录？我在这里某处发红，它不接受 http 协议，但我需要更改什么来解决这个问题？或者也许使用 curl 之类的东西以某种方式将文件解析为加载事件？

只是我需要一些方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:07:27.440

你总是可以这样做（php5）：

```
file_put_contents('filename.xls', ­ 
  file_get_contents('http://www.mysite.com/file.xls')
); 
```

然后继续在 PHPExcel 中使用 filename.xls。最后，您可以删除临时 filename.xls 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:07:41.463

使用 cURL 或 file_get_contents 将文件下载到本地，然后使用 PHPExcel 执行您需要执行的操作

# javascript - 如果存在#，则计算总数，如果没有计算所有#，则仍然计算总数

> ID：10621366
> 
> 赞同：1
> 
> 时间：2012-05-16T15:06:15.180
> 
> 标签：javascript, jquery

正如您在图片中看到的那样，用户必须输入所有 5 个请求的品牌（因为这不是必需的）是很愚蠢的。也许他们只想选择一个请求品牌。按照目前的设置，仅当用户输入 5 个单位成本和 5 个数量时才计算小计……不好。如果他们没有输入全部 5，则小计返回 NaN。

![要求品牌](../Images/4db36eeb9e7896443f39834f95bb9e86.png)

```
$("a#full_sub_total").click(function(event){
  event.preventDefault();

  var first = $("div#total_result").text();
  var second = $("div#total_result1").text();
  var third = $("div#total_result2").text();
  var fourth = $("div#total_result3").text();
  var fifth = $("div#total_result4").text();

  $("#full_total_results p").text((parseInt(first,10) + parseInt(second,10) + parseInt(third,10) + parseInt(fourth,10) + parseInt(fifth,10)));

}); 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:14:11.043

基本技术：

```
var sum = 0;

var num1 = parseInt(text1, 10);
if (!isNaN(num1)) sum += num1;
// ... 
```

（循环：更好的主意。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:19:04.597

我会遍历这些`total_result`字段，并将它们的解析值增量添加到总变量中：

```
$("a#full_sub_total").on("click", function(){
  var total = 0;
  $("div[id^=total_result]").text(function(i,t){
    total += parseInt( t, 10 ) || 0;
  });
  $(".full_total").text("$" + total);
}); 
```

请注意所有这些的主要部分：

```
total += parseInt( t, 10 ) || 0; 
```

当尝试从元素的文本中解析整数失败时，我们在其位置返回 0。这不会抵消总价值，并且将允许我们继续进行，而不会`NaN`在以后出现任何情况。

演示：http: [//jsbin.com/axowew/2/edit](http://jsbin.com/axowew/2/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:36:09.060

您在 NaN 中的总体总计结果的问题是，任何时候一个或多个单行总计为空，它会导致您的总体结果总计等于 NaN 在您尝试添加时（即#+#=#，#+NaN=Nan）

简化您的问题的解决方案：

```
$('#subtotal').click(function(e) { 
e.preventDefault();

// Clear overall total
$('#overallTotal').empty();

// Loop through each line total
$('div.lineTotal').each(function() {
// If line total is not empty, add
if ($(this).text() != ''){
$('#overallTotal').text(parseInt($('#overallTotal').text) += parseInt($(this).text()));
}
}); 
```

});

# video - 从 ISO 文件渲染帧

> ID：10621371
> 
> 赞同：1
> 
> 时间：2012-05-16T15:06:28.220
> 
> 标签：video, decode, h.264, mpeg, decoder

我有一个 video_file.mp4 并且我知道**mdat**原子包含 H.264 帧。我的项目中还有一个 H.264 编解码器库。那么，如果我将**mdat**原始数据放入我的 lib 的 byte * decode(byte * data, int timeMsec) 方法中，我会得到一个解码帧，我对吗？或者我需要额外的操作？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:58:20.117

有两种常见的 H.264 比特流打包格式。1\. 附件 B 2\. MP4。对于 MP4，打包模式不同，通常解码器更喜欢附件 B，但并非总是如此。MP4 以长度为前缀，附件 B 包含起始代码。一些 MP4 解包器会将比特流转换为附件 B，但不是全部。在不同的打包格式之外——如果你的 mp4 文件包含任何其他流——比如——音频——你的整个方法都行不通。mdat 框包含所有交错的流。

# graphics - 减少脂肪中风

> ID：10621372
> 
> 赞同：3
> 
> 时间：2012-05-16T15:06:33.383
> 
> 标签：graphics, canvas, 2d, spline, stroke

我想画这个： ![在此处输入图像描述](../Images/504dd34611356028f6db49d3babcfc33.png) 两条线沿着一条等距的贝泽路径。粗线是我想要的，小虚线是引导路径。

上图是先用宽度 30 抚摸路径，然后用与背景颜色相同的宽度 25 来完成。有时这可以正常工作，但如果背景不是纯色则不行。

我想要像“剪辑”这样的形状。而且我更愿意使用标准图形库来做到这一点。大多数 2d 图形画布中的工具更好。

笔记：

*   我正在使用 HTML 画布，但我认为这对问题并不重要。
*   我可以上下平移路径，但这不会让我到各处的中心距离相同。
*   也许它可以用渐变笔画来完成，但我不确定它们是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:00:05.423

我可以想办法在 HTML5 Canvas 中做到这一点。

您要做的是**在内存中的临时画布上**绘制一条曲线，然后在同一画布上绘制一条厚度较小且`globalCompositeOperation`设置为的相同曲线`destination-out`。

这会给你你想要的形状，基本上是两条线，它们之间是透明的。

*然后*将该画布绘制到上面有任何东西（复杂背景等）的真实画布上。

这是一个例子：

[http://jsfiddle.net/at3zR/](http://jsfiddle.net/at3zR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T20:52:31.680

以下应该更好地说明我的意思。需要添加一个简单的算法来根据控制点相对于彼此的位置来调整偏移量。如果我有更多时间并记住，我会添加它。

```
bezier.js
/* 
 * 
 * This code was Shamlessly stolen from:
 * Canvas curves example
 *
 * By Craig Buckler,        http://twitter.com/craigbuckler
 * of OptimalWorks.net      http://optimalworks.net/
 * for SitePoint.com        http://sitepoint.com/
 * 
 * Refer to:
 * http://blogs.sitepoint.com/html5-canvas-draw-quadratic-curves/
 * http://blogs.sitepoint.com/html5-canvas-draw-bezier-curves/
 *
 * This code can be used without restriction. 
 */

(function() {

    var canvas, ctx, code, point, style, drag = null, dPoint;

    // define initial points
    function Init(quadratic) {

        point = {
            p1: { x:100, y:250 },
            p2: { x:400, y:250 }
        };

        if (quadratic) {
            point.cp1 = { x: 250, y: 100 };
        }
        else {
            point.cp1 = { x: 150, y: 100 };
            point.cp2 = { x: 350, y: 100 };
        }

        // default styles
        style = {
            //#333
            curve:  { width: 2, color: "#C11" },
            cpline: { width: 1, color: "#C11" },
            point: { radius: 10, width: 2, color: "#900", fill: "rgba(200,200,200,0.5)", arc1: 0, arc2: 2 * Math.PI }
        }

        // line style defaults
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        // event handlers
        canvas.onmousedown = DragStart;
        canvas.onmousemove = Dragging;
        canvas.onmouseup = canvas.onmouseout = DragEnd;

        DrawCanvas();
    }

    function controlLine(offset) {
        // curve
        ctx.lineWidth = style.curve.width;
        ctx.strokeStyle = style.curve.color;
        ctx.beginPath();
        ctx.moveTo(point.p1.x+offset, point.p1.y+offset);
        ctx.bezierCurveTo(point.cp1.x+offset, point.cp1.y+offset, point.cp2.x+offset, point.cp2.y+offset, point.p2.x+offset, point.p2.y+offset);
        ctx.stroke();
    }

    function controlPoints(/*hidden*/) {
        // control point tethers
        ctx.lineWidth = style.cpline.width;
        ctx.strokeStyle = style.cpline.color;
        ctx.beginPath();
        ctx.moveTo(point.p1.x, point.p1.y);
        ctx.lineTo(point.cp1.x, point.cp1.y);
            ctx.moveTo(point.p2.x, point.p2.y);
            ctx.lineTo(point.cp2.x, point.cp2.y);
        ctx.stroke();

        // control points
        for (var p in point) {
            ctx.lineWidth = style.point.width;
            ctx.strokeStyle = style.point.color;
            ctx.fillStyle = style.point.fill;
            ctx.beginPath();
            ctx.arc(point[p].x, point[p].y, style.point.radius, style.point.arc1, style.point.arc2, true);
            ctx.fill();
            ctx.stroke();
        }
    } 

    // draw canvas
    function DrawCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        controlLine(-10);
        controlLine(+10);
        controlPoints();
    }

    // start dragging
    function DragStart(e) {
        e = MousePos(e);
        var dx, dy;
        for (var p in point) {
            dx = point[p].x - e.x;
            dy = point[p].y - e.y;
            if ((dx * dx) + (dy * dy) < style.point.radius * style.point.radius) {
                drag = p;
                dPoint = e;
                canvas.style.cursor = "move";
                return;
            }
        }
    }

    // dragging
    function Dragging(e) {
        if (drag) {
            e = MousePos(e);
            point[drag].x += e.x - dPoint.x;
            point[drag].y += e.y - dPoint.y;
            dPoint = e;
            DrawCanvas();
        }
    }

    // end dragging
    function DragEnd(e) {
        drag = null;
        canvas.style.cursor = "default";
        DrawCanvas();
    }

    // event parser
    function MousePos(event) {
        event = (event ? event : window.event);
        return {
            x: event.pageX - canvas.offsetLeft,
            y: event.pageY - canvas.offsetTop
        }
    }

    // start
    canvas = document.getElementById("canvas");
    code = document.getElementById("code");
    if (canvas.getContext) {
        ctx = canvas.getContext("2d");
        Init(canvas.className == "quadratic");
    }

})(); 
```

贝塞尔.html

```
<!--
   bezier.html

   Copyright 2012 DT <dtyree@inkcogito>

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
   MA 02110-1301, USA.

-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

 <head>
    <title>untitled</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta name="generator" content="Geany 0.21" />
     <meta charset="UTF-8" />
     <title>B&#233;zier Example</title>
 </head>

 <link rel="stylesheet" type="text/css" media="all" href="styles.css" />

 <body>

    <h1>Canvas B&#233;zier Curve Example</h1>

    <canvas id="canvas" height="500" width="500" class="bezier"></canvas>
    <pre id="code">code</pre>

    <p>This demonstration shows how parallel b&#233;zier curves can be drawn on a canvas element. Drag the line ends or the control points to change the curve.</p>

    <script type="text/javascript" src="bezier.js"></script>

 </body>

 </html> 
```

styles.css
/* CSS */ body { font-family: arial, helvetica, sans-serif; 字体大小：85%；边距：10px 15px；颜色：#333；背景颜色：#ddd；}

```
 h1
 {
    font-size: 1.6em;
    font-weight: normal;
    margin: 0 0 0.3em 0;
 }

 h2
 {
    font-size: 1.4em;
    font-weight: normal;
    margin: 1.5em 0 0 0;
 }

 p
 {
    margin: 1em 0;
 }

 #canvas
 {
    display: inline;
    float: left;
    margin: 0 10px 10px 0;
    background-color: #fff;
 } 
```

# php - 如何在 Yii 的 chtml::image htmloptions 中添加非 HTML 属性

> ID：10621373
> 
> 赞同：4
> 
> 时间：2012-05-16T15:06:39.713
> 
> 标签：php, html, yii

我正在尝试在 Yii 的 htmlOptions 数组中添加非 HTML 属性`CHTML::image($url, $alt, $htmlOptions)`，但是在呈现的页面中这些属性没有被添加。

基本上我想使用延迟加载需要存储原始图像 url`'data-origional'`和 SRC 标签中的占位符的图像。属性。由于某些原因，我不能`<img />`在我的代码中使用直接的 HTML 标记。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T15:33:13.023

此代码工作正常：

```
echo CHtml::image('http://google.com/images/srpr/logo3w.png', '', array(
    'data-original' => 'original',
    'another-attribute' => 'bla-bla-bla',
)); 
```

它返回：

```
<img 
     alt="" src="http://google.com/images/srpr/logo3w.png"
     another-attribute="bla-bla-bla"
     data-original="original"
> 
```

# random - 如何在 selenium ide 中创建随机字母？

> ID：10621375
> 
> 赞同：0
> 
> 时间：2012-05-16T15:06:44.077
> 
> 标签：random, selenium, ide, names

我不是 Selenium IDE 的专家，我想在 Selenium IDE HTML 中声明一个数组并在下一行调用它。

```
<tr>
  <td>storeEval</td>
  <td>new Array('en','de','da','cs','fi','fr','it','ja','ko','nl','no','pl','pt','ru','sv','tr')</td>
  <td>myArray</td>
</tr>
<tr>
  <td>type</td>
  <td>FieldName</td>
  <td>${myArray}</td>
</tr> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:44:31.270

下面的代码将从数组中随机选择项目并将其键入到元素中`id=FieldName`：

```
<tr>
  <td>storeEval</td>
  <td>var chars = 'en de da cs fi fr it ja ko nl no pl pt ru sv tr'.split(' '); str = chars[Math.floor(Math.random() * chars.length)];</td>
  <td>item</td>
</tr>
<tr>
  <td>type</td>
  <td>FieldName</td>
  <td>${item}</td>
</tr> 
```

要访问初始数组中的项目（比如说第二个项目），您可以再添加一个命令：

```
<tr>
  <td>storeEval</td> 
  <td>new Array('en','de','da','cs','fi','fr','it','ja','ko','nl','no','pl','pt','ru','sv','tr')</td>
  <td>myArray</td>
</tr>
<tr> 
  <td>getEval</td> 
  <td>storedVars['item'] = storedVars['myArray'][2]</td> 
  <td></td> 
</tr>
<tr> 
  <td>type</td> 
  <td>FieldName</td> 
  <td>${item}</td> 
</tr> 
```

您可以在范围内传递 random int 以`[0 .. length_of_array]`随机`storedVars['myArray'][randomInt]`检索值。

# ruby-on-rails - 在这种情况下 OAuth 是否矫枉过正？

> ID：10621376
> 
> 赞同：0
> 
> 时间：2012-05-16T15:06:46.713
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ssl, oauth

我有一个 RoR 应用程序，它需要通过一些经过身份验证的 SSL 协议将数据发送到另一个应用程序。另一个应用程序位于 Windows 堆栈上（以防万一）。用户将无法访问任一端点 - 我需要在这两个应用程序之间建立一个安全的端点 <> 端点管道（最好通过 Web 服务）。您认为在这种情况下应该使用 OAuth 吗？

我对应用程序开发有点陌生；抱歉，如果这是一个新手问题。谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:41:54.840

不确定您的用例是什么，但 OAuth 旨在允许外部应用程序在不放弃用户密码的情况下访问用户数据，并且它是由用户授予的。

如果您只是在两台服务器之间来回发送信息，您可以只使用 HTTPS 和基本身份验证。

# sql-server-2008 - 根据列的名称为列中的单元格分配值 - 矩阵

> ID：10621379
> 
> 赞同：1
> 
> 时间：2012-05-16T15:06:56.767
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008, ssrs-tablix

我有一个动态显示列和行的矩阵。（呸）

我将始终拥有一个名为“每个人”的（动态）列。现在我正在寻找将值 > 0 并且列名称为“每个人”的那些单元格着色为绿色

我认为我应该使用 IIF 语句做一些事情，但是如何找到特定单元格的列名？

谢谢你和我一起思考！

亨罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:28:19.790

您可以使用 InScope 表达式检查列是否在组（列/行组）的范围内 - 您应该能够对违规单元格的背景颜色表达式执行此操作

列是如何定义的？是使用分组还是使用高级编辑器添加静态列？无论哪种方式，您都应该能够使用 InScope 函数来检查单元格是否属于某个列

例如

```
=iif(someColumn.Value > 0 AND InScope("ColumnGroup"), "Green", Nothing) 
```

提供有关组/布局的更多信息，我可能会提供更多帮助

# math - 从图形生成三角道路几何图形

> ID：10621381
> 
> 赞同：3
> 
> 时间：2012-05-16T15:07:02.870
> 
> 标签：math, gis, computational-geometry, mesh, triangulation

**我想要达到的目标：**

看看[这篇论文中的下图](http://www.chrisleung.org/documents/UCL%20RG/Survey%20of%20Procedural%20City%20Generation.pdf)

![多边形化](../Images/232ed8595457278fd40a5f4a2a089edd.png)

它采用可能表示为路段/交叉点的道路图，给出线宽（称其为您喜欢的，扫地，加厚），然后为道路生成三角几何。

**为什么我要问这个问题：**

这个操作似乎是一个相当标准的事情，但我不能直接处理如何做的任何论文。大多数 GIS / 程序城市生成论文专注于道路图本身的生成（例如创建有趣的拓扑），但涉及获取图形数据和生成三角形网格 / UV 的步骤总是被掩盖。

这是[一段非常棒的视频，展示了复杂的道路交叉口](http://www.youtube.com/watch?feature=player_detailpage&v=pzOahJQuFVY#t=268s)，具有漂亮的纹理和漂亮的交叉口。这是我最终想要达到的质量水平，但朝着这个目标迈出的一步对我来说是完全可以接受的。这是[另一个视频](http://www.youtube.com/watch?v=yrqm9qK_Mlo&feature=player_detailpage#t=57s)，展示了使用 3D 可视化创建交互式路线图。

该视频有一篇论文，但没有提到三角测量策略:(

我有我自己的尝试方法，在这里详细介绍太冗长了，但如果存在的话，我更愿意实施现有的解决方案/算法，因为它比我在接下来的几周内做的任何事情都要好。

谁能指出我正确的方向？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:29:20.487

您正在寻找的是每个以道路为界的区域的*偏移多边形。*如果所有这些区域都是凸的，那么这很容易计算。如果有些是非凸的，那么它会更困难，但仍然经过充分研究。您可以在 Wikipedia上的*[直骨架](http://en.wikipedia.org/wiki/Straight_skeleton)*下找到链接，或在 StackOverflow 上的“[用于膨胀/放气（偏移、缓冲）多边形的算法](https://stackoverflow.com/questions/1109536/)”下找到链接。

# ios - 如何将预编译的头文件添加到我的 ios 项目中？

> ID：10621382
> 
> 赞同：18
> 
> 时间：2012-05-16T15:07:05.003
> 
> 标签：ios, precompiled-headers

我正在寻找创建一个预编译的头文件，以避免在项目的每个头文件中都包含相同的调试和跟踪库。

我创建了一个名为 -Prefix.pch 的文件：

```
#ifdef __OBJC__
#import "Blah.h"
#import "Blarg.h"
#endif 
```

并将其添加到项目中。还有什么我应该做的，或者现在应该做的事情（假设我做了一个项目清理并重新编译）？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-16T15:10:41.807

如下设置目标的构建设置：

```
GCC_PRECOMPILE_PREFIX_HEADER=YES
GCC_PREFIX_HEADER="Prefix.pch" 
```

请注意，如果您更喜欢使用 Xcode 的 UI 进行构建设置，您可以在 Build Settings 搜索字段中添加这些键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-21T02:07:28.070

使用库 flutter_inappwebview 并尝试将 Runner > General 中的 ios 部署版本设置为 12.0 时，我的 Flutter 应用程序出现此错误。

我将它设置回 11.4 并且它构建没有问题。

# javascript - 如何在设置为日期选择器输入字段之前格式化日期值？

> ID：10621383
> 
> 赞同：0
> 
> 时间：2012-05-16T15:07:09.553
> 
> 标签：javascript, jquery, datebox

使用 JQuery，我创建了一个简单的日期文本字段`dateFormat: "mmddyy"`。它的工作方式没有问题。但相应的数据库字段是 DATE 类型，并以“YYYY-MM-DD”格式存储值。因此，当我从数据库中读取值并将其设置为日期文本字段时，日期格式似乎是“YYYY-MM-DD”，而不是“mmddyy”。那么，在将其设置为日期字段之前，我们如何在 JQuery 中格式化该数据库日期值？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T18:25:50.207

将此代码放入您的`datebox`

```
data-options="formatter:myformatter" 
```

并添加如下功能

```
 <script type="text/javascript">
    function myformatter(date){
       var y = date.getYear();
       var m = date.getMonth()+1;
       var d = date.getDate();
       return (m<10?('0'+m):m)+(d<10?('0'+d):d)+y;
    }

 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:08:24.523

尝试使用 Jquery 日期格式插件来完成它。

[http://archive.plugins.jquery.com/project/jquery-dateFormat](http://archive.plugins.jquery.com/project/jquery-dateFormat)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:09:23.440

如果您使用 jQuery UI，请查看此页面[jqueryui.com/demos/datepicker/#option-altFormat](http://jqueryui.com/demos/datepicker/#option-altFormat)

# android - Android 动画直到第二次触摸才开始

> ID：10621389
> 
> 赞同：1
> 
> 时间：2012-05-16T15:07:23.697
> 
> 标签：android, android-listview, android-animation

当您单击右侧的红色按钮（区域 2）时，我有一个动画。当您单击按钮时，不会启动动画。当您单击区域 1 中的零件时，动画开始。我不知道我做错了什么。任何人的解决方案？

动画：rotate.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:toDegrees="90"
    android:pivotX="50%"
    android:pivotY="50%"
    android:duration="100"
    android:fillAfter="true">
</rotate> 
```

开始动画的 Java 代码：

```
Animation animturn = AnimationUtils.loadAnimation(getContext(), R.anim.rotate);
v.setAnimation(animturn);
animturn.start(); 
```

![在此处输入图像描述](../Images/c63b28c28fbf9c84feb80e00e4bb10da.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-23T15:59:01.693

在 start() 之后尝试使用 Invalidate() 您的 View (v) ：

```
...
animturn.start();
v.Invalidate(); 
```

# selenium - 如何使用 chrome 驱动程序在弹出窗口中单击框架中的按钮，然后返回到我的原始窗口？

> ID：10621395
> 
> 赞同：0
> 
> 时间：2012-05-16T15:07:54.317
> 
> 标签：selenium, automated-tests, selenium-chromedriver

我天真地似乎希望这段代码点击一个打开弹出窗口的按钮，切换到弹出窗口，找到结果框架（感谢销售人员！）点击一个按钮，然后最终将焦点切换回原始页面。

相反，我在最终切换到“家”时收到 500 服务器错误。

我应该做什么？我正在使用 ChromeDriver 19.0.1068.0

谢谢

```
PageHelper.CountryButton.Click();
var home = _driver.CurrentWindowHandle;

           foreach (var window          in _driver.WindowHandles)
            {
                if (_driver.SwitchTo().Window(window).Title.Contains("Search"))
                {
                    _driver.SwitchTo().Frame("resultsFrame");
                   PageHelper.Country.Click();
                    break;
                }
            }

           _driver.SwitchTo().Window(home); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:10:02.180

我对此没有解决方案，但我希望它与此问题有关

[http://code.google.com/p/selenium/issues/detail?id=1167](http://code.google.com/p/selenium/issues/detail?id=1167)

# mysql - 查询数据库中价格接近输入价格的笔记本电脑

> ID：10621402
> 
> 赞同：0
> 
> 时间：2012-05-16T15:08:34.880
> 
> 标签：mysql

我们现在正在为一个小型本地网站进行嵌入式 mysql 查询。我想知道如何执行此查询“向用户询问价格并找到价格最接近所需价格的 PC。打印 PC 的制造商、型号和速度。”

我怎样才能找到价格最接近用户输入价格的电脑？我知道我需要在产品和电脑之间做一个自然的连接，沿着这些思路

```
SELECT maker, model, speed FROM 
(SELECT * FROM product NATURAL JOIN pc) AS t1 
WHERE price (is close to) '$p'; 
```

关系：

```
product(maker, model, type(pc, printer, laptop))
pc(model, price, speed, ram, hd size) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:18:32.667

通过获取价格并减去输入的价格来创建一个偏移变量。将此设为绝对值（无否定），然后按此排序并限制

```
SELECT product.maker, pc.model, pc.speed, ABS(pc.price - '$p') AS offset FROM pc LEFT JOIN product ON pc.model=product.model ORDER BY offset ASC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:12:25.067

```
SELECT maker, model, speed FROM 
( SELECT model FROM pc NATURAL JOIN product )
WHERE price
BETWEEN value1 AND value2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:15:16.833

您没有提供非常好的架构信息，所以我假设这些表在模型列上连接。

```
select p.maker, pc.model, pc.speed
from product p
inner join pc on p.model = pc.model
order by abs(pc.price - '$p')
limit 10 
```

另外，我不知道如何从结果列表中消除您正在比较的产品。它可能是这样的：

```
select p.maker, pc.model, pc.speed
from product p
inner join pc on p.model = pc.model
where pc.model <> '$model'
order by abs(pc.price - '$p')
limit 10 
```

# java - Jsoup 格式错误的网址

> ID：10621403
> 
> 赞同：3
> 
> 时间：2012-05-16T15:08:37.483
> 
> 标签：java, jsoup

我在使用 JSoup 连接到 url 时遇到问题。

我要测试的网址是 www.xbox.com/en-US/security，这是一个 302（我认为）重定向到 [http://www.xbox.com/en-US/Live/Account-Security](http://www.xbox.com/en-US/Live/Account-Security)。我已经设置了 jsoup 来跟踪重定向并使用 .headers("location") 获取新的 url。返回的 url 是 /en-US/Live/Account-Security。我不知道如何处理它，我的代码如下：

```
while (i < retries){
        try {
            response = Jsoup.connect(checkUrl)
                    .userAgent("Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.21 (KHTML, like Gecko) Chrome/19.0.1042.0 Safari/535.21")
                    .followRedirects(false)
                    .timeout(10000)
                    .execute();
            success = true;
            break;
        } catch (SocketTimeoutException ex){
            timeout = true;
        }  catch (MalformedURLException ep){
            malformedUrl = true;
        }catch (IOException e) {
            statusCode = 404;
        }
    }

private void getStatus(){
    if (success){
        statusCode = response.statusCode();
        success = false;
    }
    if (statusCode >= 300 && statusCode <= 399){
        //System.out.println("redirect: " +statusCode + " " +checkUrl);
        checkUrl = response.header("location");
        //System.out.println(checkUrl);
        connect();
        getStatus();
    }
} 
```

有没有人对如何处理这个问题提出建议？或者我应该检查一下我的 checkUrl = response.header("location"); 看看它是否是一个有效的 url，如果不是，不测试它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T18:02:21.310

首先要做的事情：如果您尝试访问“www.xbox.com/en-US/security”，它会向您抛出 MalformedException，因此不会将您重定向到您想要的位置。

还有一个问题是我只使用布尔变量success，如果捕获到任何异常，则将其设置为false。再说一次，我不知道您是否使用了超时或格式错误的变量。

在那之后，我会说 IOException 之后的那一行永远不会有用。我又说不出来，因为我看不到完整的代码。

现在...对于您的问题：返回的字符串是您提供的第一个 URL 中的域。它会像这样简单地进行：

```
//Assuming you won't ever change it, make it a final
//variable for less memory usage.
final String URL = "http://www.xbox.com/en-US/security";

//Whatever piece of processing here

//Some tests just to make sure you'll get what you're
//fetching:
String newUrl = ""
if (checkUrl.startsWith("/"))
    newUrl = URL + checkUrl;

if (checkUrl.startsWith("http://"))
    newUrl = checkUrl;

if (checkUrl.startsWith("www"))
    newUrl = "http://" + checkUrl; 
```

这段代码基本上可以确保您可以浏览 url，而不会出现 MalformedUrlException。我建议在某处放置一个 manageUrl() 方法并测试获取的 URL 是否在您正在搜索的域中，或者您可能最终进入电子商务或公共网站。

希望它有帮助=)

# sql-server-2008 - Service Broker 在 30 分钟后将关闭的项目留在 sys.conversation_endpoints

> ID：10621404
> 
> 赞同：5
> 
> 时间：2012-05-16T15:08:37.627
> 
> 标签：sql-server-2008, service-broker

我有一个使用内部激活设置的单机服务代理，该代理正在处理放置在队列中的项目，并且似乎正在正确关闭对话（请参阅下面的配置文件详细信息）。

sys.conversation_endpoints 中的单个记录以 CD - CLOSED 状态保留，security_timestamp 设置为未来 30 分钟，但该记录永远不会被删除。

我也有我自己的日志显示它发生了什么唯一看起来很奇怪的是发起程序被调用时调用了会话句柄、消息类型和消息主体的空值（我的日志信息中的最后一项）

我已经包含了一个脚本（名称更改不表示实际名称），它将创建我正在使用的所有对象，并模仿我如何使用它们只需执行：

```
dbo.usp_QueueRequest 2, null, 'Trial' 
```

那应该会给你我一直看到的相同结果

痕迹：

```
EventClass                TextData              SPID Event Sequence EventSubClass
Broker:Activation                               30   1394           1 - Start
Broker:Conversation       CONVERSING            30   1395           1 - SEND Message
Broker:Message Classify                         30   1396           1 - Local
Broker:Conversation       CONVERSING            30   1397           6 - Received Sequenced Message
Broker:Activation                               31   1398           1 - Start
Broker:Conversation       DISCONNECTED_OUTBOUND 31   1399           2 - END CONVERSATION
Broker:Conversation Group                       31   1400           2 - Drop
Broker:Message Classify                         31   1401           1 - Local
Broker:Conversation       DISCONNECTED_INBOUND  31   1402           7 - Received END CONVERSATION
Broker:Conversation       CLOSED                31   1403           10 - Received END CONVERSATION Ack
Broker:Conversation       CLOSED                30   1404           2 - END CONVERSATION
Broker:Conversation Group                       30   1405           2 - Drop
Broker:Activation                               30   1406           2 - Ended
Broker:Activation                               31   1407           2 - Ended 
```

我的日志

```
Sequence Description
1        Target activation for message type: RequestMessage
2        Call fake processing procedure
3        In fake processing procedure
4        Send ReplyMessage for conversation 8B355311-5D9F-E111-93EC-A4BADBFBB13B
5        Initiator activation
6        Initiator conversation 88355311-5D9F-E111-93EC-A4BADBFBB13B message type: ReplyMessage
7        Initiator received reply from target, end converstion
8        Initiator activation
9        Target activation for message type: http://schemas.microsoft.com/SQL/ServiceBroker/EndDialog
10       Target received end dialog
11       Initiator No conversation message type:No message type 
```

sys.convertation_endpoints 记录（缩短）

```
conversation_handle                     is_initiator state  state_desc far_service      security_timestamp      dialog_timer
8B355311-5D9F-E111-93EC-A4BADBFBB13B    0            CD     CLOSED     InitiatorService 2012-05-16 14:13:38.923 1900-01-01 00:00:00.000 
```

创建对象的脚本（名称已更改，而不是实际名称）

```
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Log]') AND type in (N'U'))
DROP TABLE [dbo].[Log]
GO

CREATE TABLE [dbo].[Log](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Description] [varchar](max) NULL,
    [DateTime] [date] NULL  DEFAULT (getdate()))

GO

IF  EXISTS (SELECT * FROM sys.database_principals WHERE name = N'BrokerUser')
DROP USER [BrokerUser]
GO

CREATE USER [BrokerUser] WITHOUT LOGIN WITH DEFAULT_SCHEMA=[dbo]
GO

IF NOT EXISTS (SELECT * FROM sys.service_message_types WHERE name = N'RequestMessage')  
    CREATE MESSAGE TYPE [RequestMessage] VALIDATION = WELL_FORMED_XML

IF NOT EXISTS (SELECT * FROM sys.service_message_types WHERE name = N'AReplyMessage')   
    CREATE MESSAGE TYPE [ReplyMessage] VALIDATION = WELL_FORMED_XML
GO

IF NOT EXISTS (SELECT * FROM sys.service_contracts WHERE name =N'MessageContract')
    CREATE CONTRACT [MessageContract]
        ([RequestMessage] SENT BY INITIATOR,
        [ReplyMessage] SENT BY TARGET)
GO  

IF NOT EXISTS (SELECT * FROM sys.service_queues WHERE name = N'TargetQueue')
    CREATE QUEUE TargetQueue
GO

IF EXISTS (SELECT * FROM sys.service_queues WHERE name = N'TargetQueue')
    GRANT RECEIVE ON [TargetQueue] TO [BrokerUser]
GO

IF NOT EXISTS (SELECT * FROM sys.services WHERE name = N'TargetService')
    CREATE SERVICE [TargetService]
                   ON QUEUE TargetQueue
                   ([MessageContract])
GO

IF EXISTS (SELECT * FROM sys.services WHERE name = N'TargetService')
    GRANT SEND ON SERVICE::[TargetService] TO [BrokerUser]
GO

IF NOT EXISTS (SELECT * FROM sys.service_queues WHERE name = N'InitiatorQueue')
    CREATE QUEUE InitiatorQueue;
GO  

IF EXISTS (SELECT * FROM sys.service_queues WHERE name = N'InitiatorQueue')
    GRANT RECEIVE ON [InitiatorQueue] TO [BrokerUser]
GO

IF NOT EXISTS (SELECT * FROM sys.services WHERE name = N'InitiatorService')
CREATE SERVICE [InitiatorService]
               ON QUEUE InitiatorQueue
GO

IF EXISTS (SELECT * FROM sys.services WHERE name = N'InitiatorService') 
    GRANT SEND ON SERVICE::[InitiatorService] TO [BrokerUser]
GO

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[usp_FakeProcessing]') AND type in (N'P', N'PC'))
DROP PROCEDURE [dbo].[usp_FakeProcessing]
GO

CREATE PROCEDURE [dbo].[usp_FakeProcessing]
AS
BEGIN

    insert [Log] ([Description])
    VALUES ('In fake processing procedure');

END
GO

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[usp_TargetActivation]') AND type in (N'P', N'PC'))
DROP PROCEDURE [dbo].[usp_TargetActivation]
GO

CREATE PROCEDURE [dbo].[usp_TargetActivation]
AS
  DECLARE @Handle UNIQUEIDENTIFIER;
  DECLARE @Message XML;
  DECLARE @MessageType sysname;

  WHILE (1=1)
  BEGIN

    BEGIN TRANSACTION;

    WAITFOR
    ( RECEIVE TOP(1)
        @Handle = conversation_handle,
        @Message = message_body,
        @MessageType = message_type_name
      FROM TargetQueue
    ), TIMEOUT 5000;

    IF (@@ROWCOUNT = 0)
    BEGIN
      ROLLBACK TRANSACTION;
      BREAK;
    END

    INSERT [Log] ([Description]) VALUES ('Target activation for message type: ' + + COALESCE(@MessageType,'No message type'))

    -- it's an error message (some error occurred on the initiator side).  
    --This type of message is automatically created by SB when an END CONVERSATION command is executed with the WITH ERROR clause for the initiator
    IF @MessageType =N'http://schemas.microsoft.com/SQL/ServiceBroker/Error' 
    BEGIN

        ROLLBACK TRANSACTION; -- roll back the message transaction.  In this example there was nothing done to roll back but it is good practice
                              -- in the event of an error

        INSERT [Log] ([Description]) VALUES ('Error occured with SB')
       END CONVERSATION @Handle; -- and end the conversation (dialog) on this side (target)
       BREAK; -- break out of the loop (and end the stored proc)

    END
    ELSE IF @MessageType = N'RequestMessage'
    BEGIN

        INSERT [Log] ([Description]) VALUES ('Call fake procedure')

        EXEC [usp_FakeProcessing]; 

        INSERT [Log] ([Description]) VALUES ('Add reply message for conversation ' + CAST(@Handle AS varchar(80)) + ' with message : ' + CAST(@Message as VARCHAR(4000)));

        SEND ON CONVERSATION @Handle
                MESSAGE TYPE [ReplyMessage] (@message)

    END
    ELSE IF @MessageType = N'http://schemas.microsoft.com/SQL/ServiceBroker/EndDialog'
    BEGIN
        INSERT [Log] ([Description]) VALUES ('Target received end dialog')
       END CONVERSATION @Handle;
    END    

    COMMIT TRANSACTION;

  END
GO

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[usp_InitiatorActivation]') AND type in (N'P', N'PC'))
DROP PROCEDURE [dbo].[usp_InitiatorActivation]
GO

CREATE PROCEDURE [dbo].[usp_InitiatorActivation]
AS

  DECLARE @Handle UNIQUEIDENTIFIER;
  DECLARE @Message XML;
  DECLARE @MessageType sysname;

BEGIN

    INSERT [Log] ([Description]) VALUES ('Initiator activation')

    WAITFOR
    ( RECEIVE TOP(1)
        @Handle = conversation_handle,
        @Message = message_body,
        @MessageType = message_type_name
      FROM InitiatorQueue
    ), TIMEOUT 5000;

    INSERT [Log] ([Description]) VALUES ('Initiator ' + ISNULL(CAST(@Handle AS VARCHAR(100)) , 'No handle') + ' message type:' + COALESCE(@MessageType,'No message type') + ' Body: ' + COALESCE(CAST(@Message AS varchar(1000)),'No body'))

    IF  @Handle IS NOT NULL
    BEGIN

        IF @MessageType = N'ReplyMessage'
        BEGIN
            INSERT [Log] ([Description]) VALUES ('Initiator received reply from target, end converstion')
           END CONVERSATION @Handle;
        END  

        IF @MessageType = N'http://schemas.microsoft.com/SQL/ServiceBroker/EndDialog'
        BEGIN
            INSERT [Log] ([Description]) VALUES ('Initiator received end dialog message')
           END CONVERSATION @Handle;
        END  
    END
END
GO

GRANT EXECUTE ON [usp_TargetActivation] to [BrokerUser]
GO

GRANT EXECUTE ON [usp_InitiatorActivation] to [BrokerUser]
GO

IF EXISTS (SELECT * FROM sys.service_queues WHERE name = N'TargetQueue')
ALTER QUEUE TargetQueue
    WITH ACTIVATION
    ( STATUS = ON,
      PROCEDURE_NAME = [usp_TargetActivation],
      MAX_QUEUE_READERS = 1,
      EXECUTE AS 'BrokerUser'
    );
GO

IF EXISTS (SELECT * FROM sys.service_queues WHERE name = N'InitiatorQueue')
ALTER QUEUE InitiatorQueue
    WITH ACTIVATION
    ( STATUS = ON,
      PROCEDURE_NAME = [usp_InitiatorActivation],
      MAX_QUEUE_READERS = 1,
      EXECUTE AS 'BrokerUser'
    );
GO

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[usp_QueueRequest]') AND type in (N'P', N'PC'))
DROP PROCEDURE [dbo].[usp_QueueRequest]
GO

CREATE PROCEDURE [dbo].[usp_QueueRequest]
    @numericvalue INT,
    @StartDate DATE,
    @TriggeredBy VARCHAR(50)
AS
BEGIN
    DECLARE @Handle UNIQUEIDENTIFIER;
    DECLARE @RequestMsg NVARCHAR(100);

    DECLARE @MessageBody XML
    DEClare @Params TABLE
    (
        ReadingDate SMALLDATETIME,
        SiteNumber INT,
        TriggeredBy VARCHAR(50)
    )
    INSERT INTO @Params(ReadingDate,SiteNumber, TriggeredBy)
    VALUES(@StartDate, @numericvalue, @TriggeredBy)

    SELECT @MessageBody = (SELECT * FROM @Params FOR XML PATH ('Params'), TYPE);

    BEGIN TRANSACTION;

    BEGIN DIALOG @Handle
            FROM SERVICE [InitiatorService]
            TO SERVICE  'TargetService'
            ON CONTRACT [MessageContract]
            WITH ENCRYPTION = OFF;

    SEND ON CONVERSATION @Handle
         MESSAGE TYPE 
            [RequestMessage]
            (@MessageBody);

    COMMIT TRANSACTION;
END
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:23:58.213

根据我的理解和经验，一旦对话结束，你就什么也做不了。SQL Server 将自动为您管理对话的清理。

如果您真的希望这些行消失；当你打电话时，`END CONVERSATION`你应该追加`WITH CLEANUP`这将导致 SQL Server 清理会话作为该事务的一部分。然而，我的理解是，让 SQL Server 为您管理清理工作可以获得更好的性能。

# android - Android 计算错误 - 解析几何

> ID：10621411
> 
> 赞同：0
> 
> 时间：2012-05-16T15:08:49.297
> 
> 标签：android, arrays, math, geometry, touch-event

在尝试计算接触点（dx、dy）之间的函数时，我在调用计算函数时收到错误消息。

这是我的移动功能：

```
public class Mice {

public Movement getRatio;
public static float MX;
public static float MY;

public Mice(float x, float y){
    MX = x;
    MY = y;
}

public void move(float dx, float dy){
    float[] ratio = new float[2];
    //below this comment is my error:
    ratio = getRatio.getPath(dx, dy, MX, MY);
    MX++;
    MY = MY + ratio[1];
    GameActivity.mpx = MX;
    GameActivity.mpy = MY;
}

} 
```

(MX, MY) 是对象现在在屏幕上的另一个点。

这是我的计算函数：

```
public class Movement {

public float[] getPath(float dx, float dy, float mX, float mY){
    float[] ratio = new float[2];
    ratio[0] = 1;
    float a;
    float Ry1;
    float Ry2;
    float Rx1 = 1;
    float Rx2 = 2;
    a = (dy-mY)/(dx-mX);
    Ry1=a*(Rx1-dx)+dy;
    Ry2=a*(Rx2-dx)+dy;
    ratio[1] = Math.abs(Ry1-Ry2);

    return ratio;
}

} 
```

我的 onTouchEvent

```
@Override
public boolean onTouchEvent(MotionEvent event){

dx = event.getX();
dy = event.getY();

if(event.getAction()==1){
thread = new MiceThread(mice, mview, dx, dy);
thread.start();
}

return true;
} 
```

这是我的线程：

```
public class MiceThread extends Thread {

private Mice gameMice;
private MiceView gameView;
private float x;
private float y;

public MiceThread(Mice theMice, MiceView theView, float x, float y){
    this.gameMice = theMice;
    this.gameView = theView;
    this.x = x;
    this.y = y;
}

public void run(){
    while(1<2){
        this.gameMice.move(x, y);
        this.gameView.postInvalidate();

        try
        {
            MiceThread.sleep(5);

        }
        catch (InterruptedException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
}

} 
```

我收到第一个代码块中指定的错误。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:20:23.390

如果你得到一个空指针，我看到你从来没有初始化你的`Movement getRatio`

将其添加到您的构造函数中：

```
public Mice(float x, float y){
MX = x;
MY = y;
getRatio = new Movement();
} 
```

并填写您的运动所需的任何参数...

您还可以`static`像这样在运动中创建一个方法：

```
public class Movement {

    public static float[] getPath(float dx, float dy, float mX, float mY){
       ...
    }
} 
```

并像这样使用它：

```
public void move(float dx, float dy){
    float[] ratio = Movement.getPath(dx, dy, MX, MY);
    MX++;
    MY = MY + ratio[1];
    GameActivity.mpx = MX;
    GameActivity.mpy = MY;
} 
```

你的`getPath(...)`功能与它无关。

编辑：

无法真正提供帮助，因为缺乏信息。只有几个注释...

避免

```
if(event.getAction()==1){
  thread = new MiceThread(mice, mview, dx, dy);
  thread.start();
} 
```

试试看

```
if(event.getAction()==1){
    if (thread =! null){
        //kill Thread First. instead of while(1<2) add a boolean inside MiceThread.run 
        // and set it to false at this point.... 
        // if you don't this Thread may live as long as GC doesn't kill it.
    }
    thread = new MiceThread(mice, mview, dx, dy);
    thread.start();
} 
```

然后

```
public void run(){
while(someBool){
    this.gameMice.move(x, y);
    //does your Mice View has a reference to this.gameMice???
    //if not update your Mice inside this.gameView....
    // I Cannot tell you how, because I don't know what MiceView is doing...
    //postInvalidate() works ONLY, if Something inside the VIEW had changed...
    this.gameView.postInvalidate();

    try
    {
        MiceThread.sleep(5);

    }
    catch (InterruptedException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
} 
```

# sql-server-2008 - 实体框架没有来自简单查询的列

> ID：10621420
> 
> 赞同：0
> 
> 时间：2012-05-16T15:09:22.727
> 
> 标签：sql-server-2008, entity-framework, stored-procedures, edmx

我有以下存储过程：

```
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[GetData]
    @taskName VARCHAR(205) = NULL
AS
BEGIN
    SELECT  *
    FROM    [dbo].[Table] WITH (NOLOCK)
    WHERE   @taskName IS NULL 
            OR @taskName = '' 
            OR Name LIKE '%' + @taskName + '%'
    ORDER BY Name
END 
```

现在我创建了一个`File.edmx`生成的模型，选择了`GetData`存储过程，当我执行函数导入并得到“**获取列信息**”时，它说

> 选定的存储过程不返回任何列

我`dbo_owner`在数据库中，生成时是我的用户在 app.config 中，我什至将密码`app.config`（临时）存储在其中，当我从 Management Studio 运行该过程时，它会显示列..

**我很困惑！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:29:08.567

尝试

```
ALTER PROCEDURE [dbo].[GetData]
@taskName VARCHAR(205) = NULL
AS
BEGIN
    exec ('SELECT * FROM [dbo].[Table] WITH (NOLOCK) WHERE ' + @taskName + 'IS NULL OR ' + @taskName + ' = \'\' OR Name LIKE \'%' + @taskName + '%\' ORDER BY Name')
END
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:14:14.343

您需要在 select 语句中指定字段名称，而不仅仅是使用 *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:50:19.063

我会尝试相同的过程，但只使用

```
SELECT  *
FROM    [dbo].[Table] WITH (NOLOCK) 
```

而不是完整的查询。然后您可以更改您的过程以添加位置。

有时，由于 were 子句，EF 在识别返回列时遇到问题

# postgresql - SymmetricDS 系统表在公共以外的不同模式上

> ID：10621428
> 
> 赞同：4
> 
> 时间：2012-05-16T15:09:40.217
> 
> 标签：postgresql, symmetricds

有没有办法让 SymmetricDS 系统表放在任何其他模式上，除了 PostgreSQL 中的默认“公共”模式之外，说“复制”？我不想将对称系统表与公共模式中存在的表混合。

SymmetricDS 版本 2.5 PostgreSQL 9.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T23:40:17.987

您可以只添加一个用户说“对称”并将复制模式设置为用户默认的 search_path

# css - SASS 3.2 媒体查询和 Internet Explorer 支持

> ID：10621430
> 
> 赞同：7
> 
> 时间：2012-05-16T15:09:45.237
> 
> 标签：css, sass, responsive-design

我最近使用 SASS 3.2 在我一直从事的项目中使用块实现[了这项技术](http://thesassway.com/intermediate/responsive-web-design-in-sass-using-media-queries-in-sass-32)`@content`，并且我刚刚达到需要包括对旧浏览器（如 IE7 和 8）的支持的地步。

例子：

```
.overview {
  padding: 0 0 19px;

  @include respond-to(medium-screens) {
    padding-top: 19px;
  } //medium-screens

  @include respond-to(wide-screens) {
    padding-top: 19px;
  } //medium-screens
} 
```

它们都不支持媒体查询，过去我经常通过为这些浏览器提供所有样式来处理这个问题，当我将媒体查询分成单独的部分文件（例如 _320.scss、_480.scss 和我的IE 样式表像这样加载它们：

```
@import 320.scss;
@import 480.scss;
etc. 
```

它将加载所有样式，并始终为 IE7 - 8 分配 940 像素（或任何最大宽度）的布局和样式。通过像这样在 SASS 3.2 内嵌样式中嵌套样式，它消除了对单独的部分样式表的需要，但完全搞砸了我为 IE 加载样式的方式。

关于如何解决这个问题的任何想法或解决方案？我可以使用诸如 respond.js 之类的 polyfill 来强制 IE 使用媒体查询，但我更愿意只为 IE 提供一个不灵活的站点。

关于如何最好地组织这些文件或更好的解决方案的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T14:48:13.900

您可以为 IE<9 生成一个单独的样式表，其中包含您的正常工作表所具有的所有内容，但具有基于设置宽度的扁平媒体查询。

完整的解释在这里[http://jakearchibald.github.com/sass-ie/](http://jakearchibald.github.com/sass-ie/)，但基本上你有这个mixin：

```
$fix-mqs: false !default;

@mixin respond-min($width) {
    // If we're outputting for a fixed media query set...
    @if $fix-mqs {
        // ...and if we should apply these rules...
        @if $fix-mqs >= $width {
            // ...output the content the user gave us.
            @content;
        }
    }
    @else {
        // Otherwise, output it using a regular media query
        @media screen and (min-width: $width) {
            @content;
        }
    }
} 
```

你会像这样使用它：

```
@include respond-min(45em) {
    float: left;
    width: 70%;
} 
```

这将在 inside `all.scss`，它将`all.css`与媒体查询一起编译。但是，您还有一个附加文件`all-old-ie.scss`：

```
$fix-mqs: 65em;
@import 'all'; 
```

这只是导入所有内容，但在给定 65em 的假宽度的情况下会展平媒体查询块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-31T09:59:21.367

我在很多工作中都使用 LESS，但在较大的项目中，有很多人在跨文件工作，我不喜欢使用断点文件，例如 1024.less。

我和我的团队使用模块化方法，例如 header.less，其中包含仅针对标头的所有代码，包括相关的断点。

为了解决 IE 问题（我们在公司环境中工作），我使用这种方法：

```
@media screen\9, screen and (min-width: 40em) {
    /* Media queries here */
} 
```

媒体查询中的代码始终由 IE7 及更少版本执行。IE9 及更高版本会像适当的浏览器一样遵循媒体查询。问题是IE8。要解决这个问题，你需要让它表现得像 IE7

```
X-UA-Compatible "IE=7,IE=9,IE=edge" 
```

我发现如果在 HTML 的元标记中设置，这并不总是有效，所以使用服务器标头进行设置。

请参阅此处的要点： [https ://gist.github.com/thefella/9888963](https://gist.github.com/thefella/9888963)

让 IE8 像 IE7 一样运行并不是一个适合所有人的解决方案，但它适合我的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:43:20.600

[Jake Archibald 拥有](http://jakearchibald.github.com/sass-ie/)迄今为止我所见过的最好的技术来实现这一点。这种技术会自动为 IE 创建一个单独的样式表，在您的媒体查询中具有所有相同的样式，但没有媒体查询本身。

如果您有兴趣使用它，我还努力将这种技术内置到[Sass 的流行断点扩展中！](https://github.com/canarymason/breakpoint#no-query-fallback)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T15:37:16.677

如果您想将所有内容集中在一个屋檐下，并且对旧的浏览器访问者只有一个 http 请求，您可以执行以下操作

设置你对 mixin 的初始响应

```
// initial variables set-up

$doc-font-size: 16;
$doc-line-height: 24;

// media query mixin (min-width only)

@mixin breakpoint($point) {
    @media (min-width: $point / $doc-font-size +em) { @content; }
} 
```

这将创建一个最小宽度媒体查询并将您的 px 值 ($point) 作为 em 值输出。

从这里你需要创建这个mixin

```
@mixin rwdIE($name, $wrapper-class, $IE: true) {
  @if $IE == true {
      .lt-ie9 .#{$wrapper-class} {
        @content;
      }
    .#{$wrapper-class}  {
       @include breakpoint($name) {
         @content;
       }
    }
  }
  @else if $IE == false {
    .#{$wrapper-class}  {
      @include breakpoint($name) {
          @content;
      }
    }  
  }
} 
```

在这里，如果你像这样传递一段 Sass(SCSS)

```
@include rwdIE(456, test) {
  background-color: #d13400; 
} 
```

它将返回此代码

```
.lt-ie9 .test {
  background-color: #d13400;
}

@media (min-width: 28.5em) {
  .test {
    background-color: #d13400;
  }
} 
```

这将在一个文件中为您提供 IE 和“新浏览器”CSS。如果你写 -

```
@include rwdIE(456, test, false) {
  background-color: #d13400; 
} 
```

你会得到 -

```
@media (min-width: 28.5em) {
  .test {
    background-color: #d13400;
  }
} 
```

我希望这会有所帮助，我在这里的代码笔上也有这个 - [http://codepen.io/sturobson/pen/CzGuI](http://codepen.io/sturobson/pen/CzGuI)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T14:41:56.270

我使用的[CSS3 Mixin](https://github.com/madr/css3-sass-mixins/blob/master/_all.scss)有一个用于 IE 过滤器的变量。您可以通过使用全局变量 $forIE 或其他东西来做类似的事情，将媒体查询 mixin 包装在 if 中，然后生成带有或不带查询的样式表。

```
@if $forIE == 0 {
    // Media Query Mixin
} 
```

或者使用@if 导入第三个 scss (_forIE.scss?)，它将覆盖您的 IE 特定样式的内容。

# javascript - jQuery 使用通配符查找 xml 标记名？

> ID：10621431
> 
> 赞同：1
> 
> 时间：2012-05-16T15:09:45.253
> 
> 标签：javascript, jquery, html, xml, regex

整个下午，

我试图找到包含特定单词的所有 xml 标记 - 即使用通配符。

xml 是这样使用的：

```
xml = $('<elements>' + $('#form_template').val() + '</elements>'); 
```

#form_template 中包含 xml 内容的位置。*然后我想在整个 xml 树中搜索以item*开头的标记名。我试过`xml.match(/item_[0-9]+/)`了，但这返回匹配不是一个函数。

任何线索如何在整个 xml 中搜索包含项目的标签？

问候，

**编辑：代码示例** 这用于创建 zend 表单。html 与示例无关。

```
<QUESTION1>
<type>MultiCheckbox</type>
<options>
<class>rulem1 type-1 standard</class>
<label>Fabs and Equipments</label>
<multioptions>
<item-separate_equipments>Separate Equipments</item-separate_equipments>
<item-lasers>Lasers</item-lasers>
<item-metrology>Metrology / Inspection</item-metrology>
<item-turnkey>Turnkey Lines</item-turnkey>
<item-factory>Factory Design</item-factory>
</multioptions>
</options>
</QUESTION1>
<QUESTION2>
<type>MultiCheckbox</type>
<options>
<class>rulem1 type-1 standard</class>
<label>Material and Components</label>
<multioptions>
<item-backsheets>Backsheets</item-backsheets>
<item-raw_materials>Raw Materials</item-raw_materials>
<item-auxiliary>Auxiliary Materials</item-auxiliary>
<item-cell_coating>Coating</item-cell_coating>
<item-pastes>Pastes / Metallisation</item-pastes>
<item-tf>TF Gas</item-tf>
<item-foils>Foils</item-foils>
<item-encapsulation>Encapsulation</item-encapsulation>
<item-aluminium>Aluminium</item-aluminium>
<item-junction>Junction Box and Connection Systems</item-junction>
<item-materials_others>Others</item-materials_others>
</multioptions>
</options>
</QUESTION2> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:19:13.290

您应该能够使用`.find(*)`递归查找所有标签，然后自己过滤它们，例如：

```
var res = xml.find('*').filter(function() {
    return this.nodeName.match(/item_[0-9]+/i);
}); 
```

# maven - 使用 maven scm 插件

> ID：10621433
> 
> 赞同：3
> 
> 时间：2012-05-16T15:09:49.293
> 
> 标签：maven, plugins, version-control

是否可以使用 maven scm 插件来标记发布，而不必使用发布插件？

我正在尝试执行以下操作，但它不起作用

从 pom 文件中提取

```
<scm>
  <connection>scm:git:ssh://myuser@gerrit/tutorial.git</connection>
  <developerConnection>scm:git:ssh://myuser@gerrit/tutorial.git</developerConnection>
</scm>

<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-scm-plugin</artifactId>
  <version>1.7</version>
  <executions>
    <execution>
      <goals>
        <goal>tag</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

从命令行我做

```
mvn clean install scm:tag 
```

Maven 返回以下错误

[INFO] 'scm:tag' 的一个或多个必需的插件参数无效/缺失

[0] 在插件“maven-scm-plugin”的定义中指定以下内容：

... 价值

-或者-

在命令行上，指定：'-Dtag=VALUE'

```
[INFO] ------------------------------------------------------------------------
[INFO] Trace 
org.apache.maven.lifecycle.LifecycleExecutionException: Error configuring: org.apache.maven.plugins:maven-scm-plugin. Reason: Invalid or missing parameters: [Mojo parameter [name: 'tag'; alias: 'null']] for mojo: org.apache.maven.plugins:maven-scm-plugin:1.7:tag
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:723)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:284)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.PluginParameterException: Error configuring: org.apache.maven.plugins:maven-scm-plugin. Reason: Invalid or missing parameters: [Mojo parameter [name: 'tag'; alias: 'null']] for mojo: org.apache.maven.plugins:maven-scm-plugin:1.7:tag
    at org.apache.maven.plugin.DefaultPluginManager.checkRequiredParameters(DefaultPluginManager.java:1117)
    at org.apache.maven.plugin.DefaultPluginManager.getConfiguredMojo(DefaultPluginManager.java:722)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:468)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
    ... 17 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T15:14:30.517

[http://maven.apache.org/scm/maven-scm-plugin/tag-mojo.html](http://maven.apache.org/scm/maven-scm-plugin/tag-mojo.html)显示了两个必需的参数。您需要对它们进行 -D 或将它们放入 pom 中。

# asp.net - Visual Studio 2010 设计器未正确显示 AJAX 选项卡容器

> ID：10621435
> 
> 赞同：1
> 
> 时间：2012-05-16T15:09:54.350
> 
> 标签：asp.net, html, css, visual-studio-2010, visual-studio-designer

**概述**

我在使用 Ajax 选项卡容器时遇到问题，我在其中添加了三个选项卡，即“添加用户”、“删除用户”和“更新用户”。我不得不使用“源视图”添加它们，因为我无法找到 Ajax Tab Container 的智能标签。

*   我不能修改标签，
*   无法添加事件处理程序，

**问题**
所以问题是 Visual Studio 2010 没有在设计器中正确显示 AJAX 选项卡容器，我必须手动修改“源视图”中的控件，这很耗时。

*在 Visual Studio Ajax 选项卡渲染中*
![在 Visual Studio Ajax 选项卡渲染中](../Images/7f4b29bb94894e695ac30e170f018d2a.png)

尽管 Tab 容器在浏览器中正确呈现。

*FireFox Ajax Tab 容器内部渲染* ![FireFox 渲染内部](../Images/07b10c17ec86f24d259a6c1659fe4d9b.png)

**如何解决？**

**更新：** [发现这篇文章相关](http://blogs.msdn.com/b/carloc/archive/2009/01/05/tabcontainer-rendered-incorrectly-in-design-view.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:13:32.210

> 我必须手动修改“源视图”中的控件，这是浪费时间。

这不是浪费时间。就我个人而言，我认为根本不应该使用设计模式，并且您应该熟悉了解代码，以便自己可视化。

如果您有兴趣成为专业的 Web 开发人员，那么我建议您从 Visual Studio 中删除设计模式（这可以通过“工具”选项*）。这将解决您的问题。

*转到`Tools`> `HTML Designer`> 取消勾选`Enable HTML Designer`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:13:46.007

VS 设计器无法呈现浏览器可以呈现的所有内容。它不是为（对不起，糟糕的双关语）而设计的。它是作为设计时参考的，但在您在各种浏览器中运行页面之前，您无法看到真正呈现的内容。

大多数专业的 Web 开发人员无论如何都不使用设计器，因为您可以手动生成更清晰的代码。

# lisp - 保存宏/函数调用的任何提示？

> ID：10621436
> 
> 赞同：3
> 
> 时间：2012-05-16T15:10:12.520
> 
> 标签：lisp, common-lisp

前段时间，对于一个基于动物园的小示例，我编写了一个基类 ANIMAL，一些子类 CAT、MOUSE 等。一个通用方法 FEED 采用 ANIMAL 参数和一些专门针对每个 ANIMAL 子类型的方法。

在编写了第二和第三类方法对之后，我意识到我一遍又一遍地写同样的东西，并决定编写一个宏 DEF-ANIMAL-SUBCLASS，它扩展为一个定义新子类和适当方法的 PROGN。

然后我意识到我刚刚为我的用户提供了一种定义他们自己的 ANIMAL 子类型的方法，他们可能会觉得这很有用！然而，虽然他们可能只是在运行的图像中这样做，但我没有办法保存他们的新 ANIMAL 类型，以便在重新启动图像时，将为他们重新创建任何新的 ANIMAL 类型（无需他们重新评估宏）。

有没有传统的方法可以做到这一点？

这是不应该做的事情吗？

任何提示将不胜感激！

干杯，

磷

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T20:02:20.090

如果你用宏定义你的动物类，那么你可以让宏记录源代码。

示例（在 LispWorks 中工作）：

例如，我们可以使用 alist 将源代码存储在类分配的插槽中。或者，您可以只使用一个简单的全局变量。

```
(defclass animal ()
  ((source :allocation :class :initform nil))) 
```

上面有一个插槽，它应该指向一个类名和源代码的列表。

```
(defmacro def-animal-class (&whole code name feeding )
  `(progn
     (defclass ,name (animal) ())
     (defmethod feed ((animal ,name)) ,@feeding)
     (let ((item (assoc ',name
                        (slot-value (class-prototype (find-class 'animal))
                                    'source))))
       (if item
           (setf (cdr item) ',code)
         (setf (slot-value (class-prototype (find-class 'animal))
                           'source)
               (list (cons ',name ',code)))))
     ',name)) 
```

生成的代码是什么样的？

```
CL-USER > (pprint (macroexpand-1 '(def-animal-class cat ((print "feeding a cat")))))

(PROGN
  (DEFCLASS CAT (ANIMAL) NIL)
  (DEFMETHOD FEED ((ANIMAL CAT)) (PRINT "feeding a cat"))
  (LET ((ITEM (ASSOC 'CAT (SLOT-VALUE (CLASS-PROTOTYPE (FIND-CLASS 'ANIMAL))
                                      'SOURCE))))
    (IF ITEM
        (SETF (CDR ITEM) '(DEF-ANIMAL-CLASS CAT ((PRINT "feeding a cat"))))
      (SETF (SLOT-VALUE (CLASS-PROTOTYPE (FIND-CLASS 'ANIMAL)) 'SOURCE)
            (LIST (CONS 'CAT '(DEF-ANIMAL-CLASS CAT ((PRINT "feeding a cat"))))))))
  'CAT) 
```

使用它：

```
CL-USER 75 > (def-animal-class cat ((print "feeding a cat some more")))
CAT

CL-USER 76 > (cdr (first (slot-value (class-prototype (find-class 'animal))
                                     'source)))

(DEF-ANIMAL-CLASS CAT ((PRINT "feeding a cat some more"))) 
```

因此，每当使用宏时，都会记录最后一个源代码`DEF-ANIMAL-CLASS`。然后，您可以例如将代码写入文件：

```
(with-open-file (s "~/animals.sexp" :direction :output :if-exists :supersede)
  (pprint (slot-value (class-prototype (find-class 'animal)) 'source) s)) 
```

一个简单的`READ`把它带回来。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T16:30:47.483

执行此操作的常规方法是使用数据库来存储您的动物子类。选择一个，连接 CLSQL 并让它以您可以解释回它们各自定义的格式存储动物记录。

根据规模和部署情况，您也可能只是在平面文件中处理它。

也就是说，除了定义一个新的子类和方法之外，还要将`def-animal-subclass`它们的语句序列化`def...`到一个单独的`.lisp`文件中。然后，您的程序将在处理其配置时加载该文件。（请务必仔细考虑一下。例如，如果您的用户定义了一个已经存在的动物子类会发生什么？）看看 Emacs 如何存储一些想法的自定义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T19:35:47.157

Common Lisp 是一种基于图像的语言，因此，除了 Inaimathi 的答案中给出的解决方案之外，您还可以只保存图像和所有用户定义的类（以及其他状态，除了网络连接等短暂的东西。 ) 将在那里，如果你重新启动它。

如何做到这一点取决于您的 CL 实现，因此您必须检查其文档。CCL 使用[`ccl:save application`](http://ccl.clozure.com/manual/chapter4.9.html)、 SBCL [`sb-ext:save-lisp-and-die`](http://www.sbcl.org/manual/#Saving-a-Core-Image)、 CLISP[`ext:saveinitmem`](http://www.clisp.org/impnotes/image.html)等。

当然，选择哪种方法（Inaimathi 建议的方法或保存图像）取决于您的应用程序和需求，因为每种方法都有不同的优点和缺点。

# winforms - 如何从 System.Windows.Forms.Form 中获取 HWND 句柄

> ID：10621437
> 
> 赞同：16
> 
> 时间：2012-05-16T15:10:13.477
> 
> 标签：winforms, visual-studio, visual-c++, handle

鉴于形式

```
System.Windows.Forms::Form Form1; 
```

和窗把手

```
HWND hWnd; 
```

[根据Microsoft 的 System.Windows.Forms 文档，](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx)如何将 hWnd 设置为 Form1 的 Handle 属性，该属性确实作为“获取控件绑定到的窗口句柄。（继承自 Control。）”的公共属性存在[::表格](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx)？在我的 Form Form1 的构造函数中，我尝试过

```
hWnd = this.Handle; 
```

但编译器抱怨：

错误 C2228：'.Handle' 的左侧必须有类/结构/联合类型是 'MyNamespace::Form1 ^const' 你打算改用 '->' 吗？

所以我尝试

```
hWnd = this->Handle; 
```

并且只是

```
hWnd = Handle; // Since I'm in the Form 
```

然后编译器说：

错误 C2440：“=”：无法从“System::IntPtr”转换为“HWND”没有可以执行此转换的用户定义转换运算符，或者无法调用该运算符

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-16T15:25:27.907

我找到了一个解决方案，并且不在乎它是否是一个kludge。

```
hWnd = static_cast<HWND>(Handle.ToPointer()); 
```

作品。

# android - 如何动画滚动位置？如何平滑滚动？

> ID：10621439
> 
> 赞同：28
> 
> 时间：2012-05-16T15:10:18.293
> 
> 标签：android, animation, scroll, drawing

我希望在我的自定义视图中顺利移动到下一个滚动位置（在按钮按下或事件时）。如何实施？首先，我看不到滚动动画类（只有 alpha、旋转、缩放和平移）。其次，有动画类，我看不到迭代的（比如滚动 100 像素，无论我们有什么位置）只有绝对的（即从一个常量值动画到另一个）。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-16T15:14:50.720

假设您使用的是 ScrollView，smoothScrollTo(...) 是否适合您？

[http://developer.android.com/reference/android/widget/ScrollView.html#smoothScrollTo%28int,%20int%29](http://developer.android.com/reference/android/widget/ScrollView.html#smoothScrollTo%28int,%20int%29)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-02-05T10:03:58.567

使用`ObjectAnimator`，这是滚动到顶部的示例：

```
public void scrollToTop() {
    int x = 0;
    int y = 0;

    ObjectAnimator xTranslate = ObjectAnimator.ofInt(mScrollView, "scrollX", x);
    ObjectAnimator yTranslate = ObjectAnimator.ofInt(mScrollView, "scrollY", y);

    AnimatorSet animators = new AnimatorSet();
    animators.setDuration(1000L);
    animators.playTogether(xTranslate, yTranslate);

    animators.addListener(new AnimatorListener() {

        @Override
        public void onAnimationStart(Animator arg0) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onAnimationRepeat(Animator arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationEnd(Animator arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationCancel(Animator arg0) {
            // TODO Auto-generated method stub

        }
    });
    animators.start();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-08T02:21:18.233

动画滚动是通过结合使用**Scroller/OverScroller**（计算滚动偏移的时间插值）、**GestureDetectors**（启动滚动对象）和 View 的**onComputeScroll**方法（隐含地是动画循环）来完成的。

官方的 android 文档现在有一个关于这个主题的详细教程。[http://developer.android.com/training/gestures/scroll.html](http://developer.android.com/training/gestures/scroll.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:37:24.217

请参阅[view_cache_demo](https://github.com/ldo/view_cache_demo_android)示例代码以了解如何进行动画滚动。它在 2D 中工作，缓存复杂的绘图，还可以处理投掷手势，但您可以根据需要简化所有这些。

# magento - Magento 的时间

> ID：10621447
> 
> 赞同：0
> 
> 时间：2012-05-16T15:10:40.923
> 
> 标签：magento, time

我正在处理 Magento 的时间，想看看是否有人遇到过这个问题并可以解释一下。

2012-01-24 06:35:43 是在东部标准时间 2012 年 1 月 24 日凌晨 1:35:43 下的订单的 created_at 戳记。

这是否意味着我的服务器处于 UTC 时间并且我的 Magento 以 UTC 保存所有内容并在显示时转换为东部时间？

如果 Magento 正在转换值（我假设是这种情况），那么处理这个的方法/类/助手是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:35:50.137

我没有深入研究这个，但据我了解，大多数 Magento 日期/时间的东西都是由`Mage_Core_Model_Date`班级处理的

```
app/code/core/Mage/Core/Model/Date.php 
```

如果某些模块具有自己的日期处理功能，我不会感到惊讶。这种事情往往发生在像 Magento 这样模块化的系统中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T23:10:11.283

是的。Magento 将其内部时间戳存储为 UTC。通过转到系统 -> 配置 -> 常规 -> 区域设置选项，可以为各个商店配置自己的时区。

您可以通过执行以下操作获取商店的调整时间戳：

```
$date = Mage::app()->getLocale()->storeDate(<store_id>, <utc_timestamp>); 
```

这将返回一个`Zend_Date`对象。

您还可以通过执行以下操作获取商店的当前时间戳：

```
$timestamp = Mage::app()->getLocale()->storeTimeStamp(<store_id>); 
```

这将返回一个整数时间戳。

# java - 错误：未找到元素 q...Eclipse 中的 SeleniumRC...提供的堆栈跟踪和代码..解决方案？

> ID：10621449
> 
> 赞同：0
> 
> 时间：2012-05-16T15:10:44.247
> 
> 标签：java, eclipse, selenium

下面的代码是用 Java 为 Selenium 编写的代码，并尝试在 Selenium Standalone 服务器中执行/运行。但是，收到一个错误，附加了堆栈跟踪。

```
package package1_IdentifyPageOpened;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import com.thoughtworks.selenium.*;

public class Class1 {

Selenium selenium=null;
@Before
public void setUp() throws Exception {

selenium = new DefaultSelenium("localhost", 4444, "*firefox", "http://www.portware.com");
selenium.setSpeed("1000");
selenium.start();
//selenium.open();
}
@Test
public void testExported() throws Exception {
selenium.open("/selenium/search.php");
selenium.type("q", "Selenium-RC");
selenium.click("btnG");
}
@After
public void tearDown() throws Exception {
selenium.stop();
}

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

} 
```

}

**堆栈跟踪：**

```
com.thoughtworks.selenium.SeleniumException: ERROR: Element q not found
at com.thoughtworks.selenium.HttpCommandProcessor.throwAssertionFailureExceptionOrError(HttpCommandProcessor.java:112)
at com.thoughtworks.selenium.HttpCommandProcessor.doCommand(HttpCommandProcessor.java:106)
at com.thoughtworks.selenium.DefaultSelenium.type(DefaultSelenium.java:317)
at package1_IdentifyPageOpened.Class1.testExported(Class1.java:24)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

*已尝试打开浏览器“firefox”（代码中给出的浏览器）然后执行测试用例，并给出执行测试用例的时间（iesetSpeed-1000），因为这些是在早期实例中提供的一些解决方案. 但是，还是解决不了。请帮助..！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:14:05.570

此 URL 无效 - [http://www.portware.com/selenium/search.php](http://www.portware.com/selenium/search.php)。Selenium 打开此 URL 并检查名为“q”的元素。由于该页面不存在，因此它无法找到该元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:11:08.527

此 URL 不存在，因此 selenium 无法找到该元素。请验证您的网址。

# java - 如何从 java.sql.Timestamp 转换为 java.util.Date？

> ID：10621451
> 
> 赞同：50
> 
> 时间：2012-05-16T15:10:45.033
> 
> 标签：java, date, timestamp

**即**这段代码

```
startDate = new Date(timestampValue.getTime)); 
```

给我 ：

**2012-16-02 05:16:17**

什么时候

```
System.out.println(timestampValue); 
```

返回 ：

**2012-01-02 05:16:17.0**

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-08-06T12:42:27.890

类`java.sql.TimeStamp`从`java.util.Date`.

您可以直接分配一个`TimeStamp`对象来`Date`引用：

```
TimeStamp timeStamp = //whatever value you have;
Date startDate = timestampValue; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-16T15:25:21.793

您应该改用[日历](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)：

```
Calendar start = Calendar.getInstance();
start.setTimeInMillis( timeStampValue.getTime() ); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-06-18T23:36:24.790

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-16T15:17:50.803

问题可能来自于 Date 已被弃用的事实。

考虑使用

java.util.日历

或者

[乔达时间](http://www.joda.org/joda-time/)

**2015年编辑：**

Java 8 及更高版本内置了新的[java.time 包](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)，类似于[Joda-Time](http://www.joda.org/joda-time/)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-18T21:06:15.197

花哨的新 Java 8 方式是`Date.from(timestamp.toInstant())`. [请参阅我在其他地方](https://stackoverflow.com/a/30925798/421049)的类似答案。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-04-20T15:56:23.003

```
public static Date convertTimestampToDate(Timestamp timestamp)  {
        Instant ins=timestamp.toLocalDateTime().atZone(ZoneId.systemDefault()).toInstant();
        return  Date.from(ins);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-19T09:56:57.333

```
java.sql.ResultSet rs;
//fill rs somehow
java.sql.Timestamp timestamp = rs.getTimestamp(1); //get first column
long milliseconds = timestamp.getTime() + (timestamp.getNanos() / 1000000);
java.util.Date date = return new java.util.Date(milliseconds); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-18T16:28:41.733

时间戳是一个日期：[https ://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html](https://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html)

```
java.lang.Object
    java.util.Date
        java.sql.Timestamp 
```

# windows-phone-7 - 'VisualTree' 设置不止一次

> ID：10621454
> 
> 赞同：14
> 
> 时间：2012-05-16T15:10:53.990
> 
> 标签：windows-phone-7, xaml

我在这个 xaml 文件中不断收到错误：

> 属性“VisualTree”被设置了不止一次。

```
<ListBox x:Name="lstHistory" HorizontalAlignment="Left" Margin="12,284,0,90" Width="460"
                 ItemsSource="{Binding
                                Source={StaticResource SongCollection},
                                Path=DataCollection}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Image Margin="5" VerticalAlignment="top" Source="{Binding Path=Image}" />
                    </StackPanel>
                    <TextBlock Margin="8" Width="250"
                  TextWrapping="Wrap"
                  VerticalAlignment="Top"
                  HorizontalAlignment="Left"
                  Text="{Binding Path=Name}" />
                    <TextBlock Width="100"
                  Margin="8,0,8,8"
                  VerticalAlignment="Top"
                  HorizontalAlignment="Left"
                  Text="{Binding Path=Artist}" />
                </DataTemplate>
            </ListBox.ItemTemplate>

        </ListBox> 
```

有谁能帮忙吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-16T15:30:01.710

DataTemplate 只能有 1 个孩子。你有 2 个（堆栈面板和文本块）。把它们包在一个容器里，一切都会好起来的

# c# - 在另一台机器上运行 c# 应用程序的问题

> ID：10621457
> 
> 赞同：1
> 
> 时间：2012-05-16T15:11:02.277
> 
> 标签：c#, .net, deployment

我刚刚完成了一个`C#`针对 .Net v4 的项目的编码。我试图把这个程序放到运行 windows server 2003 的服务器上，但我遇到了问题。

我将项目的 Release 目录的内容复制到服务器上，运行 .exe，然后弹出一个错误，告诉我为了运行应用程序，我必须安装 .Net 框架的 v4，并询问我是否愿意喜欢现在开始安装。

不过，我相当确定.Net v4 在这台机器上。查看注册表，我看到了

```
HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\NET FRAMEWORK SETUP\NDP\ 
```

在此之下，有

v1.1。...，v2.0。...，v3.0，v4\客户端\1033

在添加和删除程序下，有一个 Microsoft .Net Framework 4 客户端配置文件条目。有人知道为什么这台机器说我需要安装 .net 4，而它似乎已经安装了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:14:20.903

[.Net 框架客户端配置文件](http://msdn.microsoft.com/en-us/library/cc656912.aspx)是 .Net 4 框架的“精简”版本，具有减小的安装程序大小。

如果您的应用程序以*完整*的.Net 框架 4 为目标，那么您需要在目标计算机上安装它才能运行。您可以在 Visual Studio 的属性页中查看应用程序的目标：

![目标框架下拉](../Images/80b5ea674eaff71bbf02453fcfaa7318.png)

# c++ - 调试 C++ 程序时出现奇怪的 gdb 消息

> ID：10621461
> 
> 赞同：5
> 
> 时间：2012-05-16T15:11:11.307
> 
> 标签：c++, c++11, gdb, osx-snow-leopard

我用的是苹果的gdb，版本如下

```
GNU gdb 6.3.50-20050815 (Apple version gdb-1344) (Fri Jul  3 01:19:56 UTC 2009)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin". 
```

我不使用 Xcode IDE，因为我需要 makefile 管理的项目更方便，特别是因为我经常需要在远程机器上编译和运行程序。我最近开始使用以下 c++11 功能（在 macports 的 g++-4.6 和 4.7 上）：移动构造函数、nullptr、auto 和 decltype。我最近需要对我的代码进行 d3bug，然后出现了以下奇怪的消息，而不是单步执行函数：

```
Die: DW_TAG_unspecified_type (abbrev = 36, offset = 4315)
        has children: FALSE
        attributes:
                DW_AT_name (DW_FORM_string) string: "decltype(nullptr)" 
```

自从出现此消息以来，所有以下 gdb 命令都由相同的奇怪消息回答，因此无法再进行调试。似乎与c ++ 11有关。我的问题是，您是否遇到过此消息，以及如何摆脱它？

提前致谢

朱利亚诺

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T17:31:38.123

[http://gcc.gnu.org/gcc-4.5/changes.html](http://gcc.gnu.org/gcc-4.5/changes.html)说

> GCC 现在也为结语生成展开信息。由 GCC 生成的 DWARF 调试信息现在比以前使用了更多 DWARF3 的特性，以及一些 DWARF4 特性。早于 7.0 的 GDB 无法处理其中任何一个，因此要调试 GCC 4.5 生成的二进制文件或库，需要 GDB 7.0 或更高版本。您可以通过选项禁用 DWARF4 功能`-gdwarf-3 -gstrict-dwarf`，或使用`-gdwarf-2 -gstrict-dwarf`将 GCC 限制为仅 DWARF2，但无论何时发出展开信息，都会无条件地发出结尾展开信息。

但是您已经知道了，因为每个人在升级编译器时都会阅读发行说明，对吧？！;-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T15:30:00.657

您使用的 GDB 版本（Apple 版本）似乎不支持您从 macports 安装的编译器的新功能。

错误消息是报告 GDB 不理解它在程序中遇到的一些调试信息。它显示的调试信息是 C++11 功能。

解决方案是升级到较新的 GDB（可能从 macports，如果有的话），不使用 GDB 不理解的功能，或者接受您拥有的 GDB 版本将无法理解这一点。

# php - 使用 setFollow 时 Phirehose 退出

> ID：10621462
> 
> 赞同：0
> 
> 时间：2012-05-16T15:11:15.337
> 
> 标签：php, twitter-streaming-api, phirehose

目前我正在使用 Phirehose 来跟踪 Twitter 流中的关键字，并且也想跟踪用户。

但是当我`setFollow()`在我的`checkFilterPredicates()`方法中使用时，Phiehose 在初始连接后停止工作。

```
public function checkFilterPredicates() {
    $this->setFollow(array(12));
} 
```

这是控制台输出：

```
Phirehose: Connecting to twitter stream: https://stream.twitter.com/1/statuses/f
ilter.json with params: array (  'delimited' => 'length',  'follow' => '12',)
Phirehose: Resolved host stream.twitter.com to 199.59.148.138
Phirehose: Connecting to ssl://199.59.148.138, port=443, connectTimeout=5
Phirehose: Connection established to 199.59.148.138
Phirehose: POST /1/statuses/filter.json HTTP/1.0

Phirehose: Host: stream.twitter.com:443

Phirehose: Content-type: application/x-www-form-urlencoded

Phirehose: Content-length: 26

Phirehose: Accept: */*

Phirehose: Authorization: Basic: dHdpenlvbjpUZW1wbzEyMw==

Phirehose: User-Agent: Phirehose/0.2.gitmaster +https://github.com/fennb/phireho
se

Phirehose:

Phirehose: delimited=length&follow=12

Phirehose:

c:\devel\stream> 
```

如果我改用`setTrack()`an `array('keyword1', 'keyword2')`，则相同的代码可以工作。

我使用 setFollow 错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T23:26:33.997

听起来您使用`setFollow()`正确 - 假设您的意思是在 call 后没有收到任何推文`setFollow()`，这可能仅仅是因为您关注的用户 ID 没有发推文。

也就是说，流 API 应该返回与*一个或多个*过滤器匹配的推文，因此任何现有的跟踪关键字都应该继续通过。

上面粘贴中生成的 URL 参数是正确的。

尝试将您自己的用户 ID 添加到关注列表并自己发推文 - 您应该会看到推文通过。

# bash - Http 在 bash 中获取 ungzip 响应

> ID：10621463
> 
> 赞同：1
> 
> 时间：2012-05-16T15:11:24.600
> 
> 标签：bash, unix, gzip, deflate, zcat

我需要手动解压缩以下页面的响应：http: [//muaban.net/ho-chi-minh.html](http://muaban.net/ho-chi-minh.html)

我正在做

```
echo -e "GET /ho-chi-minh.html HTTP/1.1\r\nHost: muaban.net\r\nAccept-Encoding: gzip\r\n" | nc muaban.net 80 > response.txt 
```

直到响应实际包含`Content-Encoding: gzip`或`Content-Encoding: deflate`标题（有时它只是纯文本），然后

```
cat response.txt | sed '1,14d' | zcat 
```

但它说输入不是 gzip 格式。

以下是标题：

```
HTTP/1.1 200 OK
Cache-Control: public, max-age=67
Content-Type: text/html
Content-Encoding: deflate
Expires: Wed, 16 May 2012 15:20:31 GMT
Last-Modified: Wed, 16 May 2012 15:18:31 GMT
Vary: *
Server: Microsoft-IIS/7.5
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET
X-Proxy: 162
Date: Wed, 16 May 2012 15:19:23 GMT
Content-Length: 12618 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:44:38.600

有关“deflate”作为 HTTP 内容编码的含义的混淆，请参阅[此处](https://stackoverflow.com/a/9170338/9186091)的答案。

最好干脆[不接受](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3)deflate，只接受gzip。然后服务器将不会提供放气。

如果您接受 deflate，那么您必须准备尝试将其解码为 zlib 流（这是 HTTP 标准指定的内容）或原始 deflate 流（这是 Microsoft 服务器显然会错误地提供的内容）。然后使用正确解码的那个。

zlib 和 raw deflate 格式都不是 gzip，因此 zcat 也不能​​工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:55:13.810

另一个问题的[答案](https://stackoverflow.com/a/240104/900873)表明 IIS 使用了错误的紧缩格式。但似乎有问题的网站随机返回`deflate`or (the correct) `gzip`，这就是为什么 David Souther 能够做到`zcat`这一点（我在几次尝试中得到了 gzip 一次）。所以你可能想要循环并获取它，直到你得到一个 gzip 版本（可能应该包括延迟和/或最大尝试）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:20:19.833

您可以将编码设置为“身份”，该站点将纯文本返回给您。

# c# - WMI Win32_NetworkAdapterConfiguration“EnableStatic”调用失败，返回结果 0x80041003

> ID：10621465
> 
> 赞同：0
> 
> 时间：2012-05-16T15:11:35.703
> 
> 标签：c#, wmi

我在为连接到我的系统并宣传网络适配器的设备分配静态 IP 地址时遇到问题。每当我使用 IP 和子网掩码在设备上调用 EnableStatic 时，它都会返回错误代码 0x80041003，我认为这意味着“访问被拒绝”。我可以在 Windows 中更改 IP 地址而无需提升。

我用来设置 IP 地址的代码如下所示：

```
 /// <summary>
    /// Set's a new IP Address and subnet mask for the adapter with the given description.
    /// </summary>
    /// <param name="description">Description string used to ID the adapter.</param>
    /// <param name="ip_address">The IP Address.</param>
    /// <param name="subnet_mask">The Submask IP Address</param>
    public static void SetIP(string description, string ip, string mask)
    {
        ManagementClass findAdapters = 
                                    new ManagementClass("Win32_NetworkAdapterConfiguration");
        ManagementObjectCollection adapters = findAdapters.GetInstances();

        foreach (ManagementObject adapter in adapters)
        {
            string name = (string)adapter["Description"];

            if (name != description)
            {
                continue;
            }

            try
            {
                ManagementBaseObject newIP = 
                                           adapter.GetMethodParameters("EnableStatic");

                newIP["IPAddress"] = new string[] { ip };
                newIP["SubnetMask"] = new string[] { mask };

                ManagementBaseObject setIP = 
                                            adapter.InvokeMethod("EnableStatic", newIP, null);

                UInt32 result = (UInt32)(setIP["returnValue"]);
            }
            catch (Exception)
            {
                throw;
            }                
        }
    } 
```

我在互联网上四处寻找解决方案。最有可能的是，我需要在一切启动并运行之前执行 CoInitializeSecurity 之类的操作。但这对我来说似乎很奇怪。我正在使用 WMI 命名空间，如果 WMI 在某种程度上依赖于这样的东西，那肯定也应该在命名空间中吗？

我在这里缺少一些东西....

顺便说一句，在域上以用户身份运行 Windows 7，但如果有帮助，我是本地管理员！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:27:24.437

您需要以管理员身份运行。

如果您想避免 UAC 提示，您可以执行类似的操作

制作并安装能够更改 IP 并以管理员身份运行的服务

根据需要告诉服务新 IP

# javascript - 如何使用 Object.defineProperty 通知 json 对象值的变化？

> ID：10621466
> 
> 赞同：3
> 
> 时间：2012-05-16T15:11:37.523
> 
> 标签：javascript

我知道如何使用 Object.defineProperty 通知对象中的值更改，但我想知道如何通知 json 对象值更改？

更多关于这个

当为 strore 创建一个新实例并将值设置为 price 时，notifyPriceChange 将调用 ..

```
function store(){
    var price
    Object.defineProperty(this, "price", 
    {
        get : function(){
            return price;
        },
        set : function(newValue){

            price = newValue;
            notifyPriceChange();
        },

        enumerable : true,
        configurable : true
    });
} 
```

我想在这里做同样的事情。

```
var obj = jQuery.parseJSON( '{"price":"120"}' );
obj.price = "John" 
```

当我将值设置为价格时意味着我要通知。这该怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:57:24.230

对 JSON 的引用与问题无关。

您的问题是您有一个`obj`具有现有属性的对象，`price`并且您希望能够在该值发生更改时建立对函数的调用。

您的存储过程可以进行如下调整：

```
function store () {
    var price;

    // if this.price exists, save its value and delete it
    if (this.hasOwnProperty ('price')) { 
      price = this.price;
      delete this.price;
    }

    // Now define the price property specifying the callback on change  
    Object.defineProperty (this, "price", {
        get : function(){
            return price;
        },
        set : function (newValue) {
            price = newValue;
            notifyPriceChange ();
        },

        enumerable : true,
        configurable : true
    });
}

// call as follows :

var obj = jQuery.parseJSON ('{"price":"120"}');
store.apply (obj); // establish new price property with callback on change
obj.price = "John" 
```

本质上，我们删除现有属性，保存其值，然后创建具有我们想要的属性的属性。

# deployment - SSRS：将报告部署到我的报告服务器

> ID：10621468
> 
> 赞同：0
> 
> 时间：2012-05-16T15:11:42.150
> 
> 标签：deployment, reporting-services

我有一个报告项目，里面有一堆报告。所有这些报告都部署到我的登台服务器上。现在我创建了一个新报告，我希望它也可以部署到服务器上。任何人都可以帮助我执行相同的步骤吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:38:53.300

如果您创建了新的报告解决方案，则：

第 1 步：右键单击解决方案，您将找到报表服务器 URL 和目标文件夹路径，这两个属性都是您需要设置的，只需在解决方案资源管理器中右键单击报表即可单击部署。

第 2 步：如果您已添加到现有解决方案中，则只需以简单的方式部署即可。

这两个步骤请确保数据源连接相同，如果它们不是那么只需部署连接也没什么大不了的。

请参阅图像以获得更好的清晰度。

![部署整个解决方案](../Images/84d0f938c410d027f64a255ccea12cf7.png)

![为新报告的报告部署设置属性](../Images/89a1ee474e9cf8e360a108663ac16a16.png)

# java - 量产 JTables

> ID：10621470
> 
> 赞同：0
> 
> 时间：2012-05-16T15:11:54.130
> 
> 标签：java, swing, jtable, names, tablemodel

我想制作 25 个 JTable。我通过执行以下操作生成表名：

```
for(int i=0; i < 26; i++)
{
    TableNames[i] = "Table" + i + "";
    ... 
```

如何将数组中的这些字符串名称用作新的 JTable 名称？IE

```
TableNames[i] = new JTable(model){ ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:53:06.193

`List<JTable>`考虑使用or代替数组`List<TableModel>`。将名称传递给表的构造函数或工厂方法。下面的示例使用`Component`' 的名称，但 a`JComponent`的客户端属性可能更通用。

**更新**：下面修改后的 Java 8 示例说明了如何动态添加新表。

![图片](../Images/46cfb205ae306913f045ff563a7a08ab.png)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.util.ArrayList;
import java.util.List;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollBar;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.event.ListSelectionEvent;
import javax.swing.table.DefaultTableModel;

/**
 * @see http://stackoverflow.com/a/10623134/230513
 */
public class NamedTableTest extends JPanel {

    private static final int N = 25;
    private final List<JTable> list = new ArrayList<>();

    public NamedTableTest() {
        super(new GridLayout(0, 1));
        for (int i = 0; i < N; i++) {
            list.add(new NamedTable("Table " + String.valueOf(i)));
            this.add(list.get(i));
        }
    }

    private static class NamedTable extends JTable {

        public NamedTable(final String name) {
            super(new DefaultTableModel(1, 1) {

                @Override
                public Object getValueAt(int row, int col) {
                    return name + ", " + row + ", " + col;
                }
            });
            this.setName(name);
        }

        @Override
        public void valueChanged(ListSelectionEvent e) {
            if (!e.getValueIsAdjusting()) {
                System.out.println(NamedTable.this.getName());
            }
        }
    }

    private void display() {
        JFrame f = new JFrame("NamedTable");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JScrollPane jsp = new JScrollPane(this);
        f.add(jsp);
        f.add(new JButton(new AbstractAction("Add") {

            @Override
            public void actionPerformed(ActionEvent e) {
                list.add(new NamedTable("Table " + String.valueOf(list.size())));
                NamedTableTest.this.add(list.get(list.size() - 1));
                NamedTableTest.this.validate();
                EventQueue.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        JScrollBar sb = jsp.getVerticalScrollBar();
                        sb.setValue(sb.getMaximum());
                    }
                });
            }
        }), BorderLayout.SOUTH);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(() -> {
            new NamedTableTest().display();
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:17:41.373

```
TableNames[i] = new JTable(model) 
```

放入 for 循环我同意前面的语句 make error 试试这个

```
for(i=0;i<TableNames.length();i++)
{
new JTable(TableName[i]);
} 
```

# javascript - 滚动时滚动到

> ID：10621471
> 
> 赞同：8
> 
> 时间：2012-05-16T15:12:04.460
> 
> 标签：javascript

我尽可能地将我的代码隔离到这个：http: [//jsfiddle.net/uXVWu/](http://jsfiddle.net/uXVWu/)

HTML：

```
<a id="stopHere" >Hi !</a>
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /> 
```

JS：

```
var theAnchor=document.getElementById("stopHere");
var tempX,tempY;

function stopScroll(e)
{
    var c=parseInt(document.getElementById('stopHere').offsetWidth);
    var d=parseInt(document.getElementById('stopHere').offsetHeight);
    if(tempX<=c&&tempY<=300+d&&0<=tempX&&300<=tempY)window.scrollTo(0,200);
}

function update(e)
{
    var doc=document.documentElement;
    var body=document.body;
    tempX=(e.pageX)?e.pageX:e.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);
    tempY=(e.pageY)?e.pageY:e.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);
}

window.onscroll=stopScroll;
window.onmousemove=update; 
```

CSS：

```
#stopHere
{
    float:left;
    width:100%;
    border:1px solid black;
    text-align:center;
} 
```

该程序的作用是，如果光标在 上`<a>`，则滚动，`<a>`将在顶部。我想要的是你滚动它并且它在顶部。它如何运作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:51:32.133

如果我理解正确，您可以使用以下内容在页面顶部更简单地设置它：

```
document.getElementById('stopHere').style.position="fixed"
document.getElementById('stopHere').style.top="0" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:41:42.333

你的意思是这样的：http: [//jsfiddle.net/GTSaz/1/](http://jsfiddle.net/GTSaz/1/)

因此，当您滚动时，如果您的鼠标悬停在元素上方，则滚动将向下跳转以使该元素位于视口的顶部（在本例中为 0,300）。

此外，如果您不想硬编码位置 (0,300)，那么您可以在脚本中检测到，请参阅[http://www.quirksmode.org/js/findpos.html](http://www.quirksmode.org/js/findpos.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T15:22:12.490

我不太确定你想要什么。你想要一个`fixed`div 还是`window.scroll(0,0)`

但是，我结合了你和亚当的代码来解决这种情况。

[http://jsfiddle.net/c3CJF/1/](http://jsfiddle.net/c3CJF/1/)

**标记：**

```
<a id="stopHere" >Hi !</a>
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /> 
```

**CSS：**

```
#stopHere
{
    position:absolute;
    top:300px;
    left:0px;
    width:100%;
    border:1px solid black;
    text-align:center;
} 
```

**Javascript：**

```
var theAnchor=document.getElementById("stopHere");
var tempX,tempY;
var docBody = document.body,
    docEl = document.documentElement,
    scrollElement = /WebKit/.test(navigator.userAgent) || document.compatMode == 'BackCompat' ? docBody : docEl;
var lastScrollTop = scrollElement.scrollTop;
function stopScroll(e)
{
    // Extra check to make if your scroll passes the element on its movement
    if((scrollElement.scrollTop - lastScrollTop + tempY) >= 300){
       window.scrollTo(0,300);
    }
    lastScrollTop = scrollElement.scrollTop;
    var c=parseInt(document.getElementById('stopHere').offsetWidth);
    var d=parseInt(document.getElementById('stopHere').offsetHeight);
    /* the if is to test if the mouse is over the anchor */
    if(tempX<=c&&tempY<=300+d&&0<=tempX&&300<=tempY)window.scrollTo(0,300);
}

function update(e)//to have the x and y of the mouse
{
    var doc=document.documentElement;
    var body=document.body;
    tempX=(e.pageX)?e.pageX:e.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);
    tempY=(e.pageY)?e.pageY:e.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);

}

window.onscroll=stopScroll;
window.onmousemove=update; 
```

# delphi - 类似于 Ribbon 的菜单栏

> ID：10621473
> 
> 赞同：0
> 
> 时间：2012-05-16T15:12:13.773
> 
> 标签：delphi, user-interface, menubar

是否有用于 Delphi 应用程序的菜单系统，类似于“Ms Ribbon”，我可以在其中放置不同的图标大小、主动和被动信息，并且可由开发人员管理和用户自定义？

我目前使用 DevExpress 菜单栏。我正在考虑功能区菜单方法，尽管我不了解有关此方法的法律问题。

我当前的应用程序是几个可以放在菜单中的图标。我喜欢根据几个应用程序问题允许不同的 ICO 大小，ICO 可以改变大小。能够放置大徽标，例如左上角的 Windows 开始按钮。还有几个活动组件，根据应用程序、数据和状态显示信息、颜色等，还允许用户自定义，他想看到什么。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:41:13.417

[你可以用丝带](http://docwiki.embarcadero.com/RADStudio/en/Creating_an_Application_that_Uses_Ribbon_Controls)。这与丝带非常相似:)

[DevExpress 也有一个](http://www.devexpress.com/Products/VCL/ExBars/Ribbon.xml)，因此您可以将其添加到现有的 DevExpress 菜单中。

Marjan 在评论中指出，[TMS Software 也有一个功能区组件](http://www.tmssoftware.com/site/advtoolbar.asp)。

我可能会误解，因为这似乎太简单了一个答案。你说你想要类似于 MS 功能区的东西。你想要什么不*一样？* 功能区控件可以吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:55:32.303

我不确定我是否正确理解了您的所有要求，但 Synopse 的[菜单系统](http://synopse.info/forum/viewtopic.php?id=280)类似于 MS 功能区，但并非完全相似： ![截屏](../Images/8b7bb1ec832fd97e0b3d4536bb86268d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:15:25.870

最简单的选择是使用 Alphaskin 的功能区控件。

[http://www.alphaskins.com/](http://www.alphaskins.com/)

![在此处输入图像描述](../Images/ab4a086d4357c739b671e68cad994159.png)

# php - 简单抽象类概念

> ID：10621477
> 
> 赞同：2
> 
> 时间：2012-05-16T15:12:16.700
> 
> 标签：php, oop

我对 PHP OOP 有点陌生，所以我需要你们的帮助。我试图了解何时在抽象类中使用抽象函数。

例如

```
abstract class User{
    abstract function login();
    //how do I decide if I should make login function as abstract or regular function.              
    abstract function permission();

    function AccountCredit (){
       echo 'show account credits';
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:17:14.593

抽象类是一个实际上创建（实例化）没有意义的类，就像你的类是“Beagle”和“Terrier”，“Dog”实际上没有意义。

颜色和发型只适用于“Beagle”和“Terrier”，但不适用于“Dog”，对吧？所以它在 Dog 级别是抽象的。

任何只适用于单一品种的方法根本不存在于“狗”中。

numberOfLegs 将在“Dog”级别（不是抽象）有一个实现，并且孩子们可以继承它（不说任何关于它的内容）。

请注意，如果您正在实例化实际的狗，则品种将变得抽象——同样，如果您正在实例化实际的狗，它们可能需要覆盖 numberOfLegs 以说明发生事故的个别狗。

但是，如果您是 OO 新手，我可以提个建议吗？将所有继承保持在最低限度，只有在你真的被迫时才这样做。似乎当一个优秀的程序员“获得”OO时，他们的第一个想法是将所有内容链接到一个巨大的对象树中——结果证明这不是很好。你最好使用封装而不是几乎每次都扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:14:38.950

如果没有*所有*子类可以使用的合理默认行为（如果他们选择或覆盖），则您可以创建一个抽象方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:15:14.063

当您在一个类中定义抽象函数时（也必须声明为抽象），这意味着该函数必须在扩展此抽象类的类中实现。

如果功能非常不同或取决于扩展抽象类的类，您可以定义抽象函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T15:15:54.080

所有用户的登录功能都相同吗？如果是这样，那么它应该尽可能低地实现（在这个抽象类中）。

如果有多种类型的用户，每一种都需要不同的登录功能，那么将其抽象化并在每个实现超类中以不同的方式实现它以满足每种用户类型的需求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T15:33:48.267

A abstract class is a contract between the abstract class and all classes that inherit from abstract class.

The diference between abstract class and an interface is that the interface don't implements any method, only the signatures of the methods.

When you inherit from a abstract class, you must implement all abstract methods. All the rest of not abstract methods, you will inherit it, the rest you extends how in a normal class

# sql - 带分组的 SQL 更新

> ID：10621478
> 
> 赞同：0
> 
> 时间：2012-05-16T15:12:19.683
> 
> 标签：sql, sql-server-2008, aggregate-functions

好的，我查看了一些关于使用 group by 更新的问题，发现 sql 没有这样做，但我不知道如何对这个特定查询执行更新。

我有一个带有大量交易的现金簿，它们与银行对账单相匹配，但问题是银行对账单是一个汇总值，所以我需要以特定方式按交易金额分组并匹配这些总和值. 一旦有一个肯定的匹配，我就需要更新现金簿上该组中的每一行以进行核对。

到目前为止我所做的是获得正确的分组，然后对银行结单进行内部连接，以恢复所有匹配但显然不知道如何更新这些行的值......

有人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T02:56:48.653

如果我理解正确，您可以使用选择查询确定要更新的用户，然后只更新这些。我认为以下查询符合您的意图：

```
with toupdate as (select userid
                  from (select userid, sum(value) as sumvalue
                        from cashbook cb
                        group by userid
                       ) join
                       bankstatement bs
                       on cb.userid = bs.userid 
                  where cb.sumvalue = bs.value
                 )
update cashbook
    set reconciled = 1
from toupdate
where cashbook.userid = toupdaqte.userid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:34:19.710

You can store your results in a temporary table (CREATE TEMPORARY TABLE in MySQL) and then use it to filter your update.

```
SELECT id, name, firstname INTO #tmp FROM stuff;
UPDATE other SET count='new value' WHERE id IN (SELECT id FROM #tmp); 
```

The Syntax maybe wrong since I don't use MSSQL

# bash - 改变目录的bash函数

> ID：10621483
> 
> 赞同：4
> 
> 时间：2012-05-16T15:12:32.770
> 
> 标签：bash, cd

我有一个常见的用例，我想为其编写一个函数：我经常想 cd 到与某个文件相关的某个目录。

## 我当前的工作流程如下所示：

```
$ gem which rspec/core | xargs echo -n | pbcopy
$ cd *paste and delete end until direcory looks right* 
```

[*注意：`gem which rspec/core`打印类似“/Users/joshcheek/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.10.0/lib/rspec/core.rb”的内容*]

## 我希望它看起来像这样：

```
$ gem which rspec/core | 2dir 3 
```

这将使我进入“/Users/joshcheek/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.10.0”（传递参数“3”告诉它删除“lib/rspec/ core.rb" 从最后）

## 这是迄今为止我得到的最好的：

```
2dir() {
  read dir
  for i in $(seq 1 $1)
    do
      dir="${dir%/*}"
  done
  cd "$dir"
} 
```

**但是 cd 改变了函数的目录，而不是我的。**我试过用别名交换它，但不知道如何制作匿名函数或传递参数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T15:18:47.317

我会使用：

```
2dir()
{
    name=${2:?'Usage: 2dir count path'}
    count=$1
    while [[ $count -gt 0 ]]; do name=$(dirname "$name"); ((count--)); done
    cd "$name"
} 
```

并将其用作：

```
2dir 3 $(gem which rspec/core) 
```

这适用于您的管道无法做到的地方。管道中的`cd`进程会影响该（子）shell，但不会影响父进程的当前目录。可以使此功能起作用。

如果您愿意，您可以使用 your`dir="${dir%/*}"`代替 my `dirname`，除非您指定 10当只有 5 个组件时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T18:09:57.137

这是@Jonathan Leffler 建议简化使用的一个变体——它使 count 参数是可选的，并且避免了`$( )`围绕命令的需要：

```
2dir() {
# If first arg is a number, use it as a trim count; otherwise assume 2
if [[ "$1" =~ ^[0-9]+$ ]]; then
    count="$1"
    shift
else
    count=2
fi

if [[ $# -lt 1 ]]; then  # Make sure a command was specified
    echo "Usage: 2dir [count] command [commandargs ...]" >&2
    return 1
fi

name="$("$@")"  # Execute the remaining args as a command to get the target directory
while [[ $count -gt 0 ]]; do name=$(dirname "$name"); ((count--)); done
cd "$name"
} 
```

示例用途：

```
2dir 3 gem which rspec/core
2dir gem which rspec/core 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:21:38.850

该命令 `gem which rspec/core | 2dir 3` 在 shell 用语中称为“管道”。管道中的每个命令都作为单独的进程执行。如果管道中的命令之一是 shell 函数，则它可以由当前（交互式）shell 进程执行。但这不能保证，在您的情况下，这不会发生。

要解决您的问题，您只需要确保在交互式 shell 中评估该函数。您只需要修复该功能，然后以不同的方式使用它。这是更新的功能：

```
2dir() {
  declare -ir snip="$1"
  declare dir="$2"
  for i in $(seq 1 "$snip"); do
      dir="${dir%/*}"
  done
  cd "$dir"
} 
```

你像这样使用它：

```
$ 2dir 3 "$(gem which rspec/core)" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:16:59.970

shell 脚本不能更改交互式 shell 的工作目录。只有别名才能做到这一点，因为它在您尝试更改其目录的 shell 中运行。

换句话说：

有一个 Linux 进程运行 shell 并接受您的命令。它有一个工作目录。当您告诉它执行 shell 脚本时，它会创建一个具有独立工作目录的全新进程，与第一个进程断开连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T03:51:21.890

基于 Jonathan Leffler 的回答，但没有循环：

```
2dir () {
    local levels name=${2:?"Usage: $FUNCNAME count path"};
    printf -v levels '%*s' "$1" '';
    cd "/${name%${levels// //*}}"
} 
```

一个烦恼是它会生成带有[前导双斜杠的](https://superuser.com/a/188523/310)[完全有效](https://superuser.com/a/55407/310)的目录（例如，在使用该函数后输出“//foo/bar/baz”）。`echo "$PWD"`

另一个是它“太聪明了一半”。

**编辑：**

修复了双斜线问题：

```
2dir () {
    local levels name=${2:?"Usage: $FUNCNAME count path"};
    printf -v levels '%*s' $1 '';
    name=/${name%${levels// //*}};
    cd "${name/\/\///}"
} 
```

# php - 没有循环的数组的回显值

> ID：10621486
> 
> 赞同：0
> 
> 时间：2012-05-16T15:12:38.010
> 
> 标签：php, arrays

我有一个数组，如下所示。我想回显一个特定的值。现在我正在做的是：

```
$array[0]->Question 
```

所以，它输出： Question1

但我不想要这个解决方案。

有没有办法在没有键的情况下回显特定值，例如（它不是解决方案）：

```
$array[]->Field == 'Field1' ? $array[]->Question : ''; 
```

请提出解决方案。

谢谢！

```
[Required] => Array
(
    [0] => stdClass Object
        (
            [Field] => Field1
            [Question] => Question1
            [DataType] => Boolean
        )

    [1] => stdClass Object
        (
            [Field] => Field2
            [Question] => Question2
            [DataType] => varchar
        )

    [2] => stdClass Object
        (
            [Field] => Field3
            [Question] => Question3
            [DataType] => Boolean
        )

    [3] => stdClass Object
        (
            [Field] => Field4
            [Question] => Question5
            [DataType] => Int
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:28:02.547

听起来您想`Question`通过提供`Field`. 尝试类似：

```
function getQuestion($field, $array){
    // Default to false if value not found
    $question = false;

    foreach($array as $data){
        if($data->Field == $field){
            $question = $data->Question;
            break;
        }
    }

    return $question;
} 
```

...接着：

```
if($question = getQuestion('Feild1', $required)){
   // Do something with it...
} 
```

有很多方法可以做到这一点，但这种简单的方法应该有效。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:18:27.107

`SELECT`这与简单的 SQL查询基本相同。此函数将提供类似的结果：

```
function array_select ($array, $searchField, $searchVal, $selectField = '*') {

  // Loop the "table" (array)
  foreach ($array as $obj) {

    // If the "row" (item) is an object, has the field present and the value matches...
    if (is_object($obj) && isset($obj->{$searchField}) && $obj->{$searchField} == $searchVal) {

      // Return the value of the requested field, or the entire "row" if * was passed
      return $selectField == '*' ? $obj : (isset($obj->{$selectField}) ? $obj->{$selectField} : NULL);

    } // if

  } // foreach

  // We didn't find it
  return NULL;

} 
```

像这样使用它：

```
if (($val = array_select($array, 'Field', 'Field1', 'Question')) !== NULL) {
  // Value was found
  echo $val;
} else {
  // Value not found
  echo "Not found!";
} 
```

这与以下 SQL 查询大致相同：

```
SELECT Question
FROM $array
WHERE Field = 'Field1' 
```

这也支持传递`'*'`或省略最后一个参数返回整个对象，大致如下：

```
SELECT *
FROM $array
WHERE Field = 'Field1' 
```

[看到它工作](http://codepad.org/NFfYuC3M)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:50:05.050

利用 PHP 5.3 检查整个数据集并返回匹配事件。

```
$arr = array(
    0 => (object) array('Field' => 'Field1', 'Question' => 'Question1', 'DataType' => 'Boolean'),
    1 => (object) array('Field' => 'Field2', 'Question' => 'Question2', 'DataType' => 'varchar')
);

function get_value($needle, $haystack)
{
    return array_filter($haystack, function($item) use ($needle) {
        return in_array($needle, get_object_vars($item));
    });
}

print_r(get_value('Field1', $arr)); 
```

输出：

```
Array
(
    [0] => stdClass Object
        (
            [Field] => Field1
            [Question] => Question1
            [DataType] => Boolean
        )

) 
```

# algorithm - 根据元素的特定属性的计数评估指示一组元素状态的分数

> ID：10621493
> 
> 赞同：0
> 
> 时间：2012-05-16T15:12:58.033
> 
> 标签：algorithm, statistics

我有一个程序可以处理几个元素列表（总是长度> 4），每个元素可以有一个“向上”或“向下”属性。

将其放入代码中：

```
 mylist = [element1, element2, element3] 
```

并且每个元素都有“向上”或“向下”元素（实际问题的简化）：

```
element1 = ["up", "down", "up", "up"]
element2 = ["down", "down","down", "down", "up"]
element3 = ["up", "up", "down", "down", "up", "up", "up"] 
```

我试图找出是否有算法或某种方法可以通过使用“向上”和“向下”元素的计数来推断可能指示列表本身的“方向”的分数。现有代码（我没有编写）使用这两个计数的简单比较：

```
 if count_up > count_down
     return "up"
 else if count_down > count_up
     return "down" 
```

当然，这很容易产生非常严重的大小影响（一些列表可以包含近 100 个元素，而其他列表只有 5 个）并且当两个计数相等时也会失败。我更喜欢数字分数。我查看了威尔逊分数（Reddit 使用的分数），但它考虑了（据我所知）成功/失败，而我提到的两种状态不能这样定义。

我可以使用任何现有的统计数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:30:05.593

评估在很大程度上取决于您的计划的目的和需求。作为一般评分方法，我将“向上”定义为正分 1，将“向下”定义为负分 1。

然后简单地计算平均值：Sum / Count。Mb 将其缩放到 100。只有 ups 的数组将有 100，只有 downs 的数组将有 -100，如果相等，它将为 0。

这个分数应该让您很好地了解数组中的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:30:12.600

我的直接反应是`(number_up - number_down) / (number_up + number_down)`。这基本上放弃了占整体的百分比。明显的缺点是，对于一个非常短的列表，百分比可以从一个相当小的绝对差异（例如，3 上升，1 下降）相当高。

编辑：防止小列表过度影响整体分数的一种可能方法是在等式中添加几个常数：

```
min_denom = 20;
factor = 10; 

result = ((number_up - number_down) / (number_up + number_down + min_denom)) * factor; 
```

这使您可以在一定程度上考虑相对差异和绝对差异。例如，3 向上/1 向下，它将给出 0.833。6 上/2 下（相同的比率，但每个的两倍）它会给出 1.4。同时，仍然考虑到相对差异，因此（例如）10 up/1 down 将得到 2.9。

实际上，这保留了相同的一般概念，但允许您选择某种程度（可通过更改 min_denom 进行调整），从而为较大的样本赋予额外的权重。严格来说，`factor`这不是完全必要的——它只是有助于将结果保持在一个方便的范围内。

当然，这可能不合适——对于您正在处理的内容，四个样本的权重可能与 100 个样本的权重相同。另一个可能的缺点是结果值变得更加开放，而不是不错，整洁-1..1。

# javascript - 传递变量值

> ID：10621495
> 
> 赞同：2
> 
> 时间：2012-05-16T15:13:04.833
> 
> 标签：javascript

这是简单的脚本：

```
function parentFunc() {
    var x = 15;
    process(x);
}

parentFunc();

function process(x) {
    alert(x);
}​ 
```

现在，当页面加载时，`parentFunc()`正在执行调用`process()`函数并将参数发送给它；有没有办法让它在`parentFunc()`被调用时只是将参数发送到`process()`函数而不执行它？我需要一个没有全局变量的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:22:07.193

如果我正确理解您的问题，您想绑定某个参数`process`并稍后执行该函数吗？

你可以用[`.bind()` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)做到这一点。它接受上下文和参数并创建一个新函数：

```
var process_bound = process.bind(null, x);
// later
process_bound(); 
```

对于不支持的浏览器的实现，请`.bind()`查看 MDN 文档（或查看 Rocket 的评论）。

* * *

以下是您应该如何使用它：

```
function process(x) {
    alert(x);
}​

function parentFunc() {
    var x = 15;
    return process.bind(null, x);
}

var process_bound = parentFunc();

// now bind the event handler to the element

var element = document.getElementById('someId');
element.onclick = function() {
    process_bound();
    return false;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:35:45.730

使用闭包 - 您可以将不同的值传递给 x 并在每次调用 parentscript 时创建不同的参考框架。

```
function parentscript(x) {
process = function(){
    alert(x)
}
return process
}
f = parentscript(23);
f(); //alerts 23 
```

# objective-c - 更改目标的超级视图后检测 TouchesEnded

> ID：10621496
> 
> 赞同：2
> 
> 时间：2012-05-16T15:13:10.033
> 
> 标签：objective-c, ios, uiview, uiscrollview, uipangesturerecognizer

在 iOS 中，我在两个父 UIView 之间拖动一个 UIView。我正在使用 UIPanGestureRecognizer 来管理拖动。当拖动仍在进行时，我使用以下方法切换正在拖动的视图的父级：

```
- (IBAction)handlePanGesture:(UIPanGestureRecognizer *)sender {
    ...
    [viewBeingDragged removeFromSuperview];
    UIView* page2 = [self.view viewWithTag:pageTag];
    [page2 addSubview:viewBeingDragged];
    // Now scroll page 2 into view
    [pageContainerScrollView setContentOffset:CGPointMake(xcoord, 0) animated:YES];
    ... 
```

这似乎终止了平移事件。然而，我的手指仍然“向下”。在这一点上，我怎样才能检测到我的手指抬起？我尝试了一个单独的 UITapGestureRecognizer，如果没有发生平移，它会很好地触发，但如果平移已经开始，它不会触发。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:25:24.467

我有[同样的问题](https://stackoverflow.com/questions/12161047/changing-superview-breaks-uipangesturerecognizer)。您只需要删除该行：`[viewBeingDragged removeFromSuperview];`。

一个 UIView 只能有一个 superview，所以当你调用UIView 时，`[page2 addSubview:viewBeingDragged]`它`viewBeingDragged`会首先从它当前的 superview 中移除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:52:14.853

尝试这个：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        ...
    }

    UIPanGestureRecognizer *recognizer;
    recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanFrom:)];        
    [self addGestureRecognizer:recognizer];
} 
```

和

```
-(void)handlePanFrom:(UIPanGestureRecognizer *)recognizer {

    if ( [recognizer state] == UIGestureRecognizerStateEnded )
    {
        NSLog(@"Ended");
    }
} 
```

[你可以在这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html)找到所有的状态：

希望能帮助到你。

# wxpython - Python继承--Frames

> ID：10621498
> 
> 赞同：0
> 
> 时间：2012-05-16T15:13:26.113
> 
> 标签：wxpython

有人可以解释下面的代码。根据我的阅读， Myframe 继承了 wx.frame 但我不明白的是 init 方法中给出的以下几行，

```
 super(MyFrame, self).__init__(parent, id, title,
                                      pos, size, style, name) 
```

代码

```
class MyFrame(wx.Frame):
    def __init__(self, parent, id=wx.ID_ANY, title="", 
                 pos=wx.DefaultPosition, size=wx.DefaultSize,
                 style=wx.DEFAULT_FRAME_STYLE,
                 name="MyFrame"):
        super(MyFrame, self).__init__(parent, id, title,
                                      pos, size, style, name)
        # Attributes
        self.panel = wx.Panel(self)
        self.panel.SetBackgroundColour(wx.BLACK)
        self.button = wx.Button(self.panel,
                                label="Push Me",
                                pos=(50, 50)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:34:15.310

那段代码只允许您使用父类的`__init__()`方法。
因此，对于这些特定属性，不必在子类中重复属性分配代码。

你也可以这样做：

```
 wx.Frame.__init__() # just an example, args omitted 
```

但是随后您对父类名称进行了硬编码，并且您的代码变得不那么灵活。

* * *

另外：
在 Python 3 中，调用`super()`被简化为：

```
 super().__init__() # just an example, args omitted 
```

# jquery - 在 DIV 中加载网页

> ID：10621501
> 
> 赞同：1
> 
> 时间：2012-05-16T15:13:31.540
> 
> 标签：jquery, cross-domain, same-origin-policy

我尝试使用 jQuery 加载`$get`，`$ajax`但遇到了 Origin 问题。

我看了`JSON-p`，但它只适用于 JSON 数据。

我试过了`yahooApi`，但是 yahooApi 的稳定性和可靠性如何？我的意思是，将来如果我实现使用它并且如果他们停止支持它，我的代码将停止工作。

难道我们没有其他替代方法可以在 DIV 中加载外部页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:26:15.973

如果您可以更改外部服务器上的内容，那么您可以创建一个 JavaScript 来返回 a 中的隐私政策，`document.write()`您可以从任何您想要的地方检索它。（这基本上就是 JSONP 的工作原理。）

但是，在另一台服务器上提取 HTML 文档的全部内容将需要服务器端脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:24:09.430

您可能正在寻找加载功能

[http://api.jquery.com/load/](http://api.jquery.com/load/)

我不确定它是否可以跨域。

# c# - 有没有办法让多个程序在 Windows 上订阅同一个多播组？

> ID：10621506
> 
> 赞同：4
> 
> 时间：2012-05-16T15:13:48.723
> 
> 标签：c#, windows, multicast

我有两个应用程序需要订阅相同的多播组/端口组合。目前，我可以处理此问题的唯一方法是构建一个代理应用程序，该应用程序订阅多播组并通过单独的 TCP 连接将接收到的流量转发到每个应用程序。我想摆脱代理应用程序并让每个应用程序自己订阅多播组，但我得到一个套接字异常“通常只允许每个套接字地址的一次使用”。

有没有办法解决？为什么每台计算机只允许订阅一个给定的多播组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T15:27:47.100

不完全确定是否允许，但在这里寻找可能的解决方案：

[在同一台计算机上的两个程序之间发送和接收 UDP 数据包](https://stackoverflow.com/questions/687868/sending-and-receiving-udp-packets-between-two-programs-on-the-same-computer)

最终，您不会`UdpClient`使用指定的端点实例化 。您将改为实例化一个新的 UdpClient，设置 SocketOptions 以重用端点，然后绑定：

```
IPEndPoint localpt = new IPEndPoint(IPAddress.Any, 6000);
UdpClient udpListener = new UdpClient();
udpListener.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
udpListener.Client.Bind(localpt); 
```

上面的答案是在同一个端口上发送/接收，所以不确定它是否适用于在同一个端口上的 2 个单独的应用程序中接收。试一试，让我们知道。

# c++ - recvfrom 函数返回 -1 且没有错误

> ID：10621508
> 
> 赞同：2
> 
> 时间：2012-05-16T15:13:57.137
> 
> 标签：c++, network-programming, udp, winsock

标题基本概括了所有内容。我有一个接收线程等待来自客户端的输入，但是当没有读取任何内容时，它没有返回读取的 0 字节，而是返回 -1 但没有返回错误。

任何提示都说明为什么这个函数会这样？

谢谢

编辑：

这是接收代码

```
sockaddr_in remote;
remote.sin_family = AF_UNSPEC;
remote.sin_addr.s_addr = inet_addr( _host.c_str() );
remote.sin_port = htons( atoi( _port.c_str() ) );
int remoteSize = sizeof(remote);

bytesRead = recvfrom(_os.socket, 
    (char*)buffer, 
    bufferSize, 
    0,(SOCKADDR*)&remote, &remoteSize);

_error = WSAGetLastError(); 
```

当我执行时，`bytesRead`是-1并且`_error`是0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:47:23.987

您可以尝试的另一件事是调用[`getsockopt()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738544%28v=vs.85%29.aspx)以`SO_ERROR`检查*特定于套接字的*错误（与任何线程套接字上的最后一个错误相比）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T17:55:34.487

`WSAGetLastError()`返回时不应返回`recvfrom()`0 `SOCKET_ERROR`。这表明您可能在两次调用之间做了一些事情，在您阅读之前间接清除了 WinSock 的错误代码。

附带说明，您无需填写`sockaddr_in`before call `recvfrom()`。它会为您填写`sockaddr_in`有关发件人的信息。无论`recvfrom()`需要执行什么信息，工作都是从`SOCKET`句柄中获取的。

# c# - Silverlight/OSX：TCP Socket 在一端停止工作？

> ID：10621510
> 
> 赞同：0
> 
> 时间：2012-05-16T15:14:02.367
> 
> 标签：c#, silverlight, macos, sockets, tcp

什么可能导致套接字在一端停止工作？

例如：我正在使用一个`System.Net.Sockets.Socket`并用它来传输二进制数据。但是，在某些情况下，套接字的客户端会停止工作。数据仍然从服务器接收并按预期工作。客户端代码似乎也可以正常工作（实际写入没有例外），但数据神奇地丢失并且永远不会到达服务器。

**补充：**

我们软件的一项功能允许人们通过浏览器外的 silverlight 应用程序上传文件。

当在 Mac OSX 上使用应用程序并上传多个文件时，会特别发生此错误。这在 Windows 上运行良好！在 OSX 上只上传一个文件也可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:24:43.203

种种原因。可能存在中断连接的网络中断；客户端可能会失败，等等。

与客户端上的套接字通信时是否捕获异常？

# android - 画布画得慢吗？

> ID：10621511
> 
> 赞同：0
> 
> 时间：2012-05-16T15:14:02.690
> 
> 标签：android, performance, drawing

我有我的自定义视图类，它在屏幕上显示游戏地图。我正在使用`onDraw()`覆盖和使用`Canvas`内部的绘图方法来绘制它。

现在我不想为我的地图设置动画，例如平滑滚动。

`onDraw()`在大多数设备上运行速度够快吗？还是我应该选择其他一些绘图方法？哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-04T11:35:28.727

只要你有一个以 30 FPS 渲染的游戏线程，所有现代设备都会处理它。30 FPS 也计入更新频率，因此增加 FPS 也会使移动速度更快。今天所有的安卓设备都将能够处理 30 和 60 FPS。您完全不必担心。画布绘制速度足够快，动画效果也很好

# android - 使用 Proguard 时出错

> ID：10621513
> 
> 赞同：0
> 
> 时间：2012-05-16T15:14:10.057
> 
> 标签：android, eclipse, proguard

我正在尝试在 Eclipse 中导出 android 应用程序，但 proguard 抛出以下错误。

1）注意：库类的重复定义 2）可能这是程序方法 3）找不到引用的类

控制台日志显示执行以下命令

> E:\Android\android-sdk-windows\tools\proguard\bin\proguard.bat -include E:\Android\projects\RssAggregator\proguard.cfg -injars C:\DOCUME~1\a\LOCALS~1\Temp \android_8098594418862383902.jar;E:\Android\android-sdk-windows\tools\support\annotations.jar;E:\Android\projects\RssAggregator\lib\android-rome-feed-reader-1.0.0.jar;E :\Android\projects\RssAggregator\lib\db4o-8.0.236.16058-core-java5.jar;E:\Android\projects\RssAggregator\lib\GoogleAdMobAdsSdk-4.3.1.jar;E:\Android\projects\RssAggregator\ lib\jdom-1.0.jar -outjars C:\DOCUME~1\a\LOCALS~1\Temp\android_7777420202923478025.jar -libraryjars E:\Android\android-sdk-windows\platforms\android-13\android.jar -转储 E:\Android\projects\RssAggregator\proguard\dump.txt -printseeds E:\Android\projects\RssAggregator\proguard\seeds.txt -printusage E:\Android\projects\RssAggregator\proguard\usage.txt -printmapping E ：\Android\projects\RssAggregator\proguard\mapping.txt

现在，如果我从 -injars 中排除以下罐子，它似乎可以工作

> E:\Android\projects\RssAggregator\lib\android-rome-feed-reader-1.0.0.jar;E:\Android\projects\RssAggregator\lib\db4o-8.0.236.16058-core-java5.jar;E: \Android\projects\RssAggregator\lib\GoogleAdMobAdsSdk-4.3.1.jar;E:\Android\projects\RssAggregator\lib\jdom-1.0.jar

现在我的问题是如何配置eclipse以排除上述jar，否则每次我都必须手动运行命令

基本上 eclipse 包括我的“eclipse lib jars”到proguard构建的-injars。我怎样才能排除这个？我尝试将我的 lib jar 包含在 proguard.cfg 的 -libraryjars 中，但也没有用。

# android - 在 OpenGL 中模拟屏幕尺寸并显示缩放图像

> ID：10621520
> 
> 赞同：0
> 
> 时间：2012-05-16T15:14:22.573
> 
> 标签：android, opengl-es, canvas, surfaceview

根据我在开始开发我目前正在开发的游戏时所读到的内容，我得出的结论是，只有当我在 3D 中做东西时，android 上的 openGL 才是好的。我还得出结论，surfaceView 上的画布是构建 2D 游戏的最佳方式。

在这种想法下，我编写了一个自定义图像类，理论上它会根据我的开发手机屏幕与目标手机的比例来缩放每个加载的图像。这个 scaleX 和 scaleY 的想法在整个游戏中是一致的。每个点、图像、速度等都乘以比例因子。

当我将游戏部署到另一台设备时，它每次都会强制关闭。在庞大的代码网络中的某个地方，我的自定义自动缩放系统出错了。在最近的阅读中，我决定调整一切并使用 OpenGL。这就是我的问题所在。

有没有办法让游戏认为它是以原始分辨率播放的，IE 可以轻松地将所有输入坐标转换为它们在我手机屏幕上表示的坐标。 **本质上，我想模拟一个 540 x 960 的屏幕，拍一张照片，然后在用户的屏幕上显示相应缩放的照片。**

**我将如何制作一个以绝对坐标绘制所有内容的画布，然后在 540 x 960 区域中拍摄该画布的照片，以便我可以将第一个画布的图片绘制到显示给用户的画布上?**

编辑：

我最终希望： 1\. 创建一个图像/画布/事物，它是我的游戏的原始分辨率。2\. 将所有内容绘制到所述图像，以原始分辨率创建当前游戏状态。3\. 拍摄该图像并将其缩放到设备屏幕尺寸 4\. 向用户显示游戏板。

对于触摸输入，我只需抓住用户正在触摸的坐标，并将其乘以比例因子（本机宽度与当前宽度的比率，y 与高度的比率相同）

这使我可以进行简单的更改以保持游戏正常运行，而无需重新编码整个事物。如果这会让我的性能下降，我可能需要使用 OpenGL，否则我会坚持使用那个系统。

我的计划是做这样的事情：

```
Canvas canvas = new Canvas(bitmap); 
```

其中位图是本机屏幕大小的图像，然后使用我现有的所有代码。

EDI2：

要使用矩阵进行缩放，我会做这样的事情：

```
Canvas canvas; 
Matrix matrix = new Matrix();
matrix.postScale(screenWidth/stockWidth, screenHeight/stockHeight);
canvas.setMatrix(matrix);

....

Game Loop Logic with no image scaling, just drawing and updating of canvas based on   
stock size. 
```

那是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:44:05.583

您可以在 Canvas 上使用 setMatrix 方法，计算一次所需的缩放比例，并在您的代码中使用固定坐标系。

至于用于 2D 的 openGL，它的运行速度比 Canvas 快得多，并且为位图提供了更大的内存缓冲区。Canvas 适用于小型游戏，但不适用于密集型游戏。

# eclipse - 在构建项目时监控 m2e 调用了哪些目标

> ID：10621522
> 
> 赞同：1
> 
> 时间：2012-05-16T15:14:29.540
> 
> 标签：eclipse, debugging, m2eclipse

在设置生命周期映射之后，Eclipse 将调用一些 Maven 目标（在生命周期映射中描述）作为构建过程的一部分。我想知道的是在项目构建过程中实际调用了哪些目标。

当我将其切换到`Maven Console`模式时，我可以在 Eclipse 控制台上看到一些 Maven 输出，但我仍然不知道是否调用了不记录任何内容（或不以足够高的级别记录）的目标。我认为也许检查`Debug output`Eclipse Maven 设置可能会有所帮助，但它并没有改变任何东西。

所以问题是，作为项目构建过程的一部分，我如何监控 m2e 调用的确切目标（以及来自哪些插件）。

# php - 文件名未定义

> ID：10621526
> 
> 赞同：1
> 
> 时间：2012-05-16T15:14:41.287
> 
> 标签：php, javascript, jquery, ajax, dom

对，这就是我想要的解决方案。当用户单击“取消”按钮时，它会尝试查找要取消的文件的文件名，然后删除包含该文件名的数据库行。

问题是它没有识别文件名，因为它声明`imagecancelname=undefined`. 由于这是未定义的，因此它无法删除包含文件名的数据库行，因为它无法识别文件名。通过执行打印 $imagecancelsql 在我取消上传文件后，它会在下面显示：

```
DELETE FROM Image WHERE ImageFile = 'ImageFiles/undefined' 
```

所以问题是我怎样才能`imagecancelname`识别将要被取消的文件的名称，然后它可以用来删除包含文件名的数据库行？

以下是当前的表单代码：

```
var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return startImageUpload(this);' class='imageuploadform' >" + 
  "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
  "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" +     
  "</p><p class='imagef1_cancel' align='center'></p>" +
  "<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>"); 
```

下面是 startImageUpload 函数，它在文件上传时显示取消按钮，如果用户单击取消按钮，它包含取消按钮功能：

```
 var sourceImageForm; 

         function startImageUpload(imageuploadform, imagecancelname){

  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_cancel').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  sourceImageForm = imageuploadform;

/*The above would show and hide elements within the form the file is being uploaded.
For example if I have three forms and the second form is uploading a file, then it
shows and hides the elements within the second form only */

        $(imageuploadform).find('.imagef1_cancel').html('<div><button type="button" class="imageCancel" id="image_cancel_' + imagecancelname + '">Cancel</button></div>').find(".imageCancel").on("click", function(event) {
        $.ajax("cancelimage.php?imagecancelname=" + $(this).attr('id').slice(13));

});       
      return true;
} 
```

最后是cancelimage.php 脚本，当用户单击Cancel 按钮时，它将导航到该脚本，该脚本用于通过使用$GET 方法查找文件名来删除数据库行。

```
<?php

  // ... connected to DB

  $image_cancel_ = $_GET["imagecancelname"];
  $imagecancelsql = "
    DELETE FROM Image 
    WHERE ImageFile = 'ImageFiles/".mysql_real_escape_string($image_cancel_)."'
  ";

  print $imagecancelsql;

  mysql_close();

?> 
```

以下是查询的打印：

注意：未定义索引：第 19 行 /web/stud/xxx/Mobile_app/cancelimage.php 中的 imagecancelname array(0) { } DELETE FROM Image WHERE ImageFile = 'ImageFiles/'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:45:13.180

我认为图像不应该在完整上传之前存储在您的数据库中。如果图像被取消，那么它将不在数据库中。

要回答未定义的精确问题，在 jquery 中，attr 是获取标记属性。( )。

您应该在文件上传输入中添加一个 id ：

```
<input id='fileImage' name='fileImage' type='file' class='fileImage' /> 
```

然后用它来获取值

```
var image_cancel = $('#fileImage').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:49:50.257

我的猜测是浏览器不喜欢您在按钮上定义的自定义属性来保存文件路径。但是，您可以轻松地将此信息存储在标准属性中 - `id`. 试试这个 JS：

```
function startImageUpload(imagecancelname){
  // All this can be chained into one since .html() returns the correct jQuery object
  $('.imagef1_cancel').eq(window.lastUploadImageIndex).html('<div><button type="button" class="imageCancel" id="image_cancel_' + imagecancelname + '">Cancel</button></div>').find(".imageCancel").on("click", function(event) {
    $.ajax("cancelimage.php?imagecancelname=" + $(this).attr('id').slice(13));
  });     
  return true;
} 
```

# jquery - 如何定期更新 portlet 内容？

> ID：10621530
> 
> 赞同：1
> 
> 时间：2012-05-16T15:14:50.713
> 
> 标签：jquery, plone, kss

我正在开发一个 portlet 来显示来自多个 RSS 提要的内容，并在特定超时后定期更新它们。所以我正在研究 plone 的 RSS portlet (plone.app.portlets.portlets.rss)。

它使用了 IDeferredPortletRenderer 接口，看起来很棒。他们有一个方法 deferred_update() “刷新关于 KSS 事件的 portlet 数据（并且只有在那时）”，这似乎是我正在寻找的。我找不到的是 KSS 电话。

更新 RSS portlet 的 KSS 调用在哪里？这是正确的方法还是应该使用 jQuery 定期更新 portlet 片段？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:11:15.190

您可以调用特殊的 KSS 视图`@@refreshPortlet`来通过 AJAX 加载 portlet。响应是一个 XML 文档，其中包含一个`<param name="html">`包含新 HTML 片段的元素。您可以在站点根目录或当前上下文中调用它，无论哪种方式更适合您的可缓存性。

以下内容来自生产站点，并不完整，但应该可以让您有所了解：

```
// $wrapper is the portlet wrapper div
var portlethash = $wrapper.attr('id').split('-')[1];
var base = $wrapper.data('baseurl') || $('link[rel=kss-base-url]').attr('href');
$.ajax({url: base + '/@@refreshPortlet', type: 'GET', dataType: 'xml',
    data: { portlethash: portlethash },
    success: function(data) {
        var contents = $('dd.portletItem', $(data).find('param[name="html"]').text());
        $wrapper.find('dd.portletItem')
            .replaceWith(contents);
    }
}); 
```

变量`$wrapper`指的是`portletWrapper`div：

```
<div id="portletwrapper-[long string of characters]"
     class="portletWrapper kssattr-portlethash-[long string of characters]">
  <dl class="portlet portletSpecificClass">
    <dt class="portletHeader">
        ...
    </dt>
    <dd class="portletItem">
        ...
    </dd>
    <dd class="portletFooter">
        ...
    </dd>
  </dl>
</div> 
```

请注意，我们使用`id`属性中的 portlet 散列，这就是 KSS`@@refreshPortlet`视图知道如何仅呈现 portlet 的方式。

我将包装器上的 portlet 基本 url 存储在某个数据属性中，以确保我在正确的上下文中检索 portlet，否则它会显示错误的信息。

# iphone - 同一应用程序的多个版本可以同时提交给 Apple 审核吗？

> ID：10621532
> 
> 赞同：7
> 
> 时间：2012-05-16T15:14:52.260
> 
> 标签：iphone, ios, app-store-connect, appstore-approval

假设我有一个应用程序版本，我今天提交给苹果审查，它将在 3 周后向公众发布。同时我还有下一个版本，需要一个月后审核并发布给公众。

所以，我的问题是我们可以同时提交两个版本的相同申请进行审核（在第一个发布之前）吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T15:16:55.187

你不能。对于每个唯一的应用 ID，您可以同时销售 1 个版本和 1 个正在审核的版本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T15:17:05.723

不，您将不得不等待第一个被审查

# python - 将 python 库绑定到 C

> ID：10621536
> 
> 赞同：9
> 
> 时间：2012-05-16T15:15:07.310
> 
> 标签：python, c, binding

我想做的与大多​​数人想做的*相反*：我有一个用 Python 编写的库，我想让它可用于 C（可能还有其他语言）。

我知道对此的典型答案是使用 C 语言的 Python 库，即：

```
#include <Python.h>

int
main(int argc, char *argv[])
{
  Py_Initialize();
  PyRun_SimpleString("from time import time,ctime\n"
                     "print 'Today is',ctime(time())\n");
  Py_Finalize();
  return 0;
} 
```

（来源：[http](http://docs.python.org/extending/embedding.html#very-high-level-embedding) ://docs.python.org/extending/embedding.html#very-high-level-embedding ）

但是，这对我来说似乎不太理想：

*   很丑
*   只是为了C

相反，我想要的是一种将我的库绑定到很多语言的方法，包括 C。我不关心自动包装器生成：我的库非常简单，所以我可以编写胶水代码。

目前，我想出的唯一解决方案是使用类似于上面的代码将我的库绑定到 C。然后使用[SWIG](http://www.swig.org/)将 C 库绑定到其他语言。

有更好的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:29:47.787

C 是编程的[通用语言](https://en.wikipedia.org/wiki/Lingua_franca)。所以我会说你的方法是正确的。为 C 创建一个绑定，然后使用 SWIG 和其他语言的 FFI 等工具绑定到 C。

脑海中只有一个想法。今天，我们看到 HTTP 正在成为各种 API 和接口的新[通用语言](https://en.wikipedia.org/wiki/Lingua_franca)。因此，可以考虑创建一个用 python 编写的小 Web 服务，提供一些 REST 接口。但很明显，这仅在某些情况下才有意义。

当然，一旦你决定在一个单独的进程中运行你的 python 库，就会有进程间通信的所有可能性，比如命名管道或套接字，以及像[Apache Thrift](https://thrift.apache.org/)、[Google Protocol Buffers](https://en.wikipedia.org/wiki/Protocol_Buffers)或[0MQ](http://www.zeromq.org/)这样的工具包。

# vba - 如何在 Excel 文件中插入图片和文本

> ID：10621537
> 
> 赞同：0
> 
> 时间：2012-05-16T15:15:08.033
> 
> 标签：vba, vbscript, excel, qtp

我需要使用 VBscript（来自 QTP）将图片前后插入文本到 Excel 文件中。

我不能使用 ActiveCell.Worksheet.Pictures.Insert，因为此命令不会将图片保留在 Excel 文件中（自 Excel 2007 起）。

使用方法： `objExcel.ActiveSheet.Shapes.AddPicture ImagePath, False, True, 0, PrevHeight, ptWidth, ptHeight`

我需要找到插入图片的单元格名称，或者如何在某些单元格上方插入图片而不是坐标，或者如何获取与坐标对应的单元格。

找到 Shape 的 TopLeftCell 和 BottomRightCell 属性，但似乎无法让它们在 VBSCript 中返回实际值。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:45:55.930

也许（来自 QTP）的评论是把它扔掉了，但我刚刚制作了一个 vbScript 来完全使用图片插入来完成您想要的操作。我的结果是一张漂亮的胖图片，排列在 B2 的左上角和 F16 的左下角 - 值得注意的是它正好在 F16，但可能足够接近！- 在我的图片上方和下方有文字。另外，当我关闭文件并重新打开时，图片仍然存在。

```
Set objXL = CreateObject("Excel.Application")
objXL.visible = true

Set wkb = objXL.Workbooks.Open("P:\Script\vbScript\Help\InsertPicture.xlsx")
Set ws = wkb.Sheets("Sheet1")
Set p = ws.Pictures.Insert("C:\Blue.jpg")

Set objRng = ws.Range("B2:F15")
With p
   .Top = objRng.Top
   .Left = objRng.Left
   .Width = objRng.Width 
   .Height = objRng.Height
End With

ws.Range("B1").Value = "myTop"
ws.Range("B16").Value = "myBottom" 
```

# .net - Windbg无法获取当地人的价值

> ID：10621538
> 
> 赞同：1
> 
> 时间：2012-05-16T15:15:10.093
> 
> 标签：.net, windbg, sos

我正在使用 Windbg 调试我的 .net 应用程序并加载 SOS.dll。设置断点并使用命令“P”点击它以进入代码。每次使用命令“P”时，我也使用命令“！CLRStack -a”来获取参数和本地变量的值或地址，但始终是本地的。我希望任何人都可以帮助我。先感谢您

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-17T04:16:54.537

如果您使用的是发布版本，您将不会获得局部变量值。要拥有此功能，您应该分析调试版本或为您的应用程序提供私有符号

# javascript - Ajax Html Editor Extender - 无法获得高度

> ID：10621551
> 
> 赞同：0
> 
> 时间：2012-05-16T15:16:13.837
> 
> 标签：javascript, html, css, ajax, editor

好吧，所以我在使用相对较新的 Ajax Html Editor Extender（不是 Ajax Html Editor），但我遇到了问题。

基本上我想通过javascript获得编辑器的高度，但无论我做什么，它都不会告诉我高度是多少。我需要编辑器高度的原因是因为它位于具有相对位置的 div（包装器 div）内。我需要那个 div 来“跟随”编辑器，但编辑器只是“跳”出 div，如下图所示：

![例子](../Images/8a9cba9498f145e70b26c50a59652cec.png)

我尝试了多种方法来获取编辑器的高度： - 使用我放置扩展器的文本框的 id（返回 16） - 以及我在页面的 DOM 代码中看到的许多其他 id。- 但他们都不会告诉我真正的高度。

然后我查看了 ajax 工具包的源代码，类名如下：

`.ajax__html_editor_extender_buttoncontainer`

`.ajax__html_editor_extender_container`

等等...

但是尝试使用 jQuery 获得这些高度只会返回 null。

所以我的问题是我如何获得实际编辑器的高度，或者我如何使它相对，所以它会（以一种或另一种方式）被包装器 div 跟随？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:14:44.560

好吧，显然我可以使用这个 id 来获取可编辑表的高度：

HtmlEditorExtender1_ExtenderContentEditable

尽管这不是我所看到的最好的方式，因为那样你必须一直使用 javascript 设置包装器高度 - 但仍然是一个解决方案......

# java - Eclipse RCP 多线程

> ID：10621554
> 
> 赞同：4
> 
> 时间：2012-05-16T15:16:23.080
> 
> 标签：java, eclipse, multithreading, rcp

我有一个 Eclipse rcp 应用程序。当这个命令正在执行时，我有一个命令。我需要启动一个线程。执行此线程后，必须更新 GUI。但我想这个线程或其他非 SWT 线程无法更新 GUI。但这似乎是合理的。当我试图这样做时，我得到了`Exception in thread "Thread-5" org.eclipse.swt.SWTException: Invalid thread access`. 我怎样才能实现这个目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T15:19:10.290

使用 SWT，您需要在主线程上完成任何更新 GUI 的操作，或者在 Eclipse 中，它被称为 UI 线程（它是同一个线程）。您收到此错误是因为您试图访问另一个线程上的 SWT 对象。考虑使用`Display.syncExec()`或`Display.asyncExec()`将 SWT 相关处理移至主线程。你要小心`syncExec()`不要导致死锁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-01T05:29:02.873

通常我不会在 RCP 应用程序中使用 java.lang.Thread，因为 Eclipse 通过 Jobs API ( [https://eclipse.org/articles/Article-Concurrency/jobs-api提供了不同级别的抽象和对长时间运行的操作的控制.html](https://eclipse.org/articles/Article-Concurrency/jobs-api.html)）。这是您的问题的解决方案：

```
 Runnable uiUpdater = new Runnable() {
        public void run() {
            // update SWT UI safely here
            // ...
        }
    };
    Job longRunningOperation = new Job("My command") {
        protected IStatus run(IProgressMonitor monitor) {
            // some time consuming code here        
            // ...      
            Display.getDefault().asyncExec(uiUpdater);
            return Status.OK_STATUS;
        }
    };
    longRunningOperation.schedule(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T16:41:52.427

根据您需要在后台执行的操作，您可能希望查看 Eclipse Jobs API，它为运行后台任务和向用户提供反馈提供支持。搜索“eclipse 工作教程”；这是一个很好的：[http ://www.vogella.com/articles/EclipseJobs/article.html](http://www.vogella.com/articles/EclipseJobs/article.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T21:58:27.893

你得到了这个感觉，因为你试图从非 UI 线程访问 UI 线程。使用`Display.syncExec()`or`Display.asyncExec()`将解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-18T22:03:22.850

您正面临 SWT 世界中最常见的异常！无效的线程访问仅意味着一件事：您想要修改或只是访问 GUI 元素，并且您在不是 GUI 线程的线程中进行操作。

当您的代码点击按钮或类似的东西时，它永远不会发生，但是，当您使用后台进程或异步通知时，它会一直发生。

有一个解决方案：在特定块中执行您的代码：

```
Display.getDefautl().syncExec(new Runnable() {
   public void run() {
      // code related to GUI element(s)
   }
} 
```

或者

```
Display.getDefautl().asyncExec(new Runnable() {
   public void run() {
      // code related to GUI element(s)
   }
} 
```

在第一种情况下，执行是同步的。调用线程等待 run 方法被执行。在第二种情况下，调用线程没有等待。

要了解有关 Eclipse 应用程序中线程的更多信息，请查看 Debug 视图中的堆栈（在调试模式下）。第一个称为**Main**的线程是 UI 线程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-01T20:51:26.320

您应该使用 Display.getDefault().asyncExec() 或 Display.getDefautl().syncExec()。

示例代码：

```
@PostConstruct
public void createControls(Composite parent) {
   .... \\ label definition
}
public void updateInterface(String message)
    {
        try{
            Display.getDefault().asyncExec(new Runnable() {
              @Override
              public void run() {
                 try{
                        label.setText(message);  
                    }
                    catch(Exception exc){
                        System.out.println(exc);
                    }               
              }
            });
        }
        catch(Exception exception){
            System.out.println(exception);
        }   
    } 
```

# css - 调整窗口大小时如何防止页边距在 HTML/CSS 代码中扩展

> ID：10621556
> 
> 赞同：2
> 
> 时间：2012-05-16T15:16:37.067
> 
> 标签：css, layout

我有网站，其周围有 15 像素的黑边，如图所示

![在此处输入图像描述](../Images/e18a3411d3b1179bc4de686c0975d4e3.png)

问题是当我按宽度扩展浏览器窗口时，这个间隙变得更大，如下所示

![在此处输入图像描述](../Images/23b57a35c6d39401f70e129e6bc23bee.png)

我一直在尝试让这个宽度保持在 15 像素，但我就是不知道问题出在哪里。我已经使用了 FireBug 提供的所有工具，但无济于事。有人对我可能尝试的方法有什么建议吗？

通过消除过程，我已经能够缩小这个 CSS 中的错误范围

```
/*----------------------------------------------------------------------*/
/* Login
/*----------------------------------------------------------------------*/

body#login{
    position:static;
    left:auto;
    right:auto;
    width:350px;
    margin:120px auto;
    padding:2%;
}
body#login #content{
    min-height:50px;
    padding:8px;
}
body#login form label{
    padding:0;
    margin:0;
    width:100%;
}
body#login form section{
    width:100%;
}
body#login form section div{
    width:90%;
    float:none;
    padding:0 4% 6px 4%;
    border:0;
}
body#login form section > div{
    width:90% !important;
}
body#login form section div input{
    width:100% !important;
}
body#login form section div input#remember{
    width:auto !important;
}
body#login form section div.checker{
    width:auto !important;
    padding:0;
    margin:0;
}
body#login form section label{
    padding:3% 2% 1%;
    width:90% !important;
    float:none;
}
body#login form section label.checkbox div{
    width:10px;
    padding:0;
    margin:0;
}
body#login form section a{
    float:right;
}

/*----------------------------------------------------------------------*/
/* Wizard
/*----------------------------------------------------------------------*/

body#wizard{
    position:static;
    left:auto;
    right:auto;
    width:500px;
    margin:120px auto;
    padding:0;
}
body#wizard #content{
    min-height:50px;
    padding:8px;
}

/*----------------------------------------------------------------------*/
/* Media Queries
/*----------------------------------------------------------------------*/

/* For very large screens increes the margins*/
@media screen and (min-width:1281px) {
body{
    margin-left:10%;
    margin-right:10%;
}
}

/* Move the Headernav to a drop down menu to the right */
@media screen and (max-width:960px) {
#header ul#headernav li ul, #header ul#headernav li ul.collapsed{
    display:none;
}
#header ul#headernav li ul.shown{
    display:block !important;
}
#header ul#headernav{
    border-left:1px solid;
    position:relative;
    float:right;
    height:60px;
    width:60px;
    cursor:pointer;
    background-repeat:no-repeat;
    background-position:center center;
}

#header ul#headernav li ul{
    position:absolute;
    right:0;
    width:170px;
    padding:0;
    margin:0;
    top:60px;
}
#header ul#headernav li ul li{
    float:none;
    margin:0;
    border-bottom:0;
    border-top:0;

}
#header ul#headernav li ul li a{
    padding:10px;   
}
#header ul#headernav li ul li:last-child{
    border-bottom:1px solid;

}
#header ul#headernav li ul span{
    right:5px;
    top:10px;
}
#header ul#headernav li ul li ul{
    position:relative;
    top:0;
    padding:0;
    display:none;
    padding-bottom:6%;
    z-index:20;
    width:99%;
}
#header ul#headernav li ul li ul.shown{
    display:block;
}
#header ul#headernav li ul li ul li{
    margin:0 6%;
}
#header ul#headernav li ul li ul li a{
    font-size:12px;
    padding:5px;
}

.g1,.g2,.g3,.g4,.g5,.g6 {
    padding:0;
    width:48.0%;
}
.g7,.g8,.g9,.g10,.g11,.g12 {
    padding:0;
    width:98%;
}
}
@media screen and (max-width:900px) and (min-width:701px) {
    form fieldset > section > div{
        width:69%;
    }
    form fieldset > section label{
        width:24%;
    }
}

/* For more smaller Screens (iPad) */
@media screen and (max-width:700px) {
    header #search,header #searchbox{
        max-width:100px;
    }
    form label{
        padding:10px 1%;
    }
    form fieldset > section{
        padding-bottom:8px;
    }
    form fieldset > section > label{
        left:0;
        right:0;
        width:98%;
        margin:0;
        float:none;
        padding:1%;
        padding-bottom:8px;
    }
    form fieldset > section > div{
        float:none;
        width:98%;
        padding:4px;
        border:0;
    }
    .g1,.g2,.g3,.g4,.g5,.g6,.g7,.g8,.g9,.g10,.g11,.g12 {
        width:98%;
    }
}
@media screen and (max-width:800px) and (min-width:481px) {
    nav{
        width:150px;
    }
    nav ul li a span{
        font-size:12px;
    }
    nav ul li ul{
        margin-left:10px;
        margin-right:10px;
    }
    nav ul li ul li a span{
        padding-right:4px;
    }
    #content{
        padding:15px 0 15px 160px;
    }

    #header ul li ul li,#header ul li ul li a, #header ul#headernav li ul li ul{
        -webkit-border-radius:0; -moz-border-radius:0; border-radius:0;
    }

    #header ul li ul li:last-child,#header ul li ul li:last-child a{
        -webkit-border-bottom-left-radius:4px; -moz-border-radius-bottomleft:4px; border-bottom-left-radius:4px;
    }

}

/* iPhone and real small devicces */
@media screen and (max-width:480px) {
    body#login{
        position:static;
        left:auto;
        right:auto;
        width:96%;
        margin:10px auto;
        padding:0;
    }
    body#login #content{
        padding:0;
        padding-top:20px;
        width:99%;
    }
    body#login form{
        border:0;
    }
    body#login form section label{
        border:0;
    }
    body#login fieldset{
        margin:0px;
    }
    body#login form > section a{
        margin:10px 4%;
        float:left;
    }
    #pageoptions > div{
        left:2px;
        right:2px;
        padding:15px;
    }
    header #searchbox{
        display:none;
        max-width:40px;
    }
    header #searchbox input{
        max-width:40px;
    }
    body{
        width:96%;
        margin:1%;
    }
    body, header, nav, #content{
        -webkit-box-shadow:none;
        -moz-box-shadow:none;
        box-shadow:none;
    }
    #header{
    }
    #logo{
        width:100%;
    }
    #logo, header, #content{
        width:100%;
    }
    nav, nav ul, nav ul li, nav ul li a, nav ul li a span, nav ul li a:active span, nav ul li a.active span{
        margin:0;
        padding:0;
    }
    nav ul li a:active span, nav ul li a.active span{
        border-top:1px solid;
        background-position:center center;
    }
    nav{
        border-top:1px solid;
        position:static;
        width:98%;
        margin:0 1%;
    }
    nav ul li{
        width:44px;
        display:inline-block;
        margin-left:-2px;
        margin-right:-2px;
    }
    nav ul li a span{
        border-left:1px solid;
        border-bottom:0;
        height:40px;
        text-indent:-9999px;
        background-position:center center;
    }
    nav ul li:first-child a span{
        border-left:0;
    }
    nav ul li ul{
        position:absolute;
        left:0;
        margin:0;
        z-index:15;
        background:none;
        width:98%;
        margin:0 1%;
    }
    nav ul li ul li{
        display:block;
        width:100%;
    }
    nav ul li ul li a span{
        height:20px;
        text-indent:0;
    }

    #content{
        padding:0;
    }
    form{
        padding:0;
        margin:0;
    }
    form input, form textarea{
        font-size:14px;
        max-width:96%;
    }
    #wl_msg{
        right:5px;
        left:5px;
        width:auto;
    }
    .g1,.g2,.g3,.g4,.g5,.g6,.g7,.g8,.g9,.g10,.g11,.g12 {
        width:100%;
        margin:0;
    }
} 
```

谁能发现问题？

谢谢。

萨钦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:29:11.220

尝试设置最大宽度的适当性，并将溢出隐藏到您的黑色背景中。我希望这会有所帮助。

费尔乔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:45:02.223

问题就在这里

```
/* For very large screens increes the margins*/
@media screen and (min-width:1281px) {
body{
    margin-left:10%;
    margin-right:10%;
}
} 
```

# javascript - jQuery-UI：可调整大小 - 如何增加可拖动边缘的大小？

> ID：10621558
> 
> 赞同：8
> 
> 时间：2012-05-16T15:16:44.493
> 
> 标签：javascript, jquery, html, jquery-ui

我正在使用 jQuery-UI 的可调整大小的边缘来增加表格的高度。我想知道如何创建一个可以拖动的更厚的底部边框？增加桌子周围的边框并没有什么不同。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-16T15:38:42.187

您可以通过更改一些 CSS 来实现：

**^(Jquery UI 样式表上的)**CSS类****

 **```
/* handle on the bottom */
.ui-resizable-s {
    height: 15px;
}

/* handle on the right */
.ui-resizable-e {
    width: 15px;
}
/* handle icon (corner) */
.ui-resizable-se {
    width: 15px;
    height: 15px;
} 
```

在这个[小提琴示例](http://jsfiddle.net/zuul/YQXGp/)中，您可以看到它的实际效果！

**笔记：**

您实际上不需要更改 jQuery UI 样式表上的任何内容，只需在包含 jQuery UI 样式表后声明新闻 css 值！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-16T15:34:09.733

通过调用`$(...).resize()`，您可以将任何子元素设置为句柄。 [看看这个例子](http://jsfiddle.net/89v9U/3/)：

```
$( "#resizeDiv" ).resizable({handles: {'s': '#handle'}}); 
```

它可以调整`#resizeDiv`底部边缘的大小，将`#handle`元素指定为活动拖动区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:26:56.173

[http://jsfiddle.net/89v9U/1/](http://jsfiddle.net/89v9U/1/)

您将需要一个新图像来调整大小处理程序，但是您可以使用一些东西，它只是 CSS！**

# java - 如何创建一个只有文本名称的类的数组？

> ID：10621563
> 
> 赞同：3
> 
> 时间：2012-05-16T15:17:00.973
> 
> 标签：java, arrays, class

我目前正在创建一个库，旨在查看一堆字符串并用它们创建窗口。目前，只有几行代码和一个巨大的配置文件就会用很多窗口和东西来启动它。我将它设置为读取一些字符串并从中加载类，以获取方法的参数。这是执行此操作的方法：

```
 private Class<?> getClass(String classname){
        switch(classname){//Check for some primitive type references, since they don't work in the below area
            case "int":
                return int.class;
            case "double":
                return double.class;
            case "boolean":
                return boolean.class;
            case "long":
                return long.class;
            case "short":
                return short.class;
        }
        Class<?> value = null;
        try{
            value = Config.class.getClassLoader().loadClass(classname);
        }catch(ClassNotFoundException ex){
            Error.error(ErrorLevel.severe, "Could not find class- "+classname, ex, ErrorCatagory.classFinding);//A custom error handling system
        }
        return value;//Return the class found from the name
    } 
```

它在普通课程上工作得很好。例如，如果我将 java.lang.String 放入其中，它会将 String 类吐回给我。如果我输入 javax.swing.JTextField，它会向我吐出正确的类。但是，如果我将 java.lang.String[] 放入其中以请求字符串数组，它会崩溃，如下所示：

```
 Warning in catagory code- message = Could not find suitable instance for method- Expected JTextComponent but found JTextField!
    Severe error in catagory classFinding
    May 16, 2012 11:02:35 AM ErrorAdapter severeError
    SEVERE: Could not find class- java.lang.String[]
    java.lang.ClassNotFoundException: java.lang.String[]
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at Config.getClass(Config.java:389)
        at Config.getClasses(Config.java:398)
        at Config.methodCall(Config.java:492)
        at Config.call(Config.java:415)
        at Config.chainCall(Config.java:439)
        at Config.call(Config.java:409)
        at main.action(main.java:122)
        at main$1$5.actionPerformed(main.java:63)
        at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
        at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
        at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
        at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
        at java.awt.Component.processMouseEvent(Component.java:6505)
        at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
        at java.awt.Component.processEvent(Component.java:6270)
        at java.awt.Container.processEvent(Container.java:2229)
        at java.awt.Component.dispatchEventImpl(Component.java:4861)
        at java.awt.Container.dispatchEventImpl(Container.java:2287)
        at java.awt.Component.dispatchEvent(Component.java:4687)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
        at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
        at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
        at java.awt.Container.dispatchEventImpl(Container.java:2273)
        at java.awt.Window.dispatchEventImpl(Window.java:2713)
        at java.awt.Component.dispatchEvent(Component.java:4687)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
        at java.awt.EventQueue.access$000(EventQueue.java:101)
        at java.awt.EventQueue$3.run(EventQueue.java:666)
        at java.awt.EventQueue$3.run(EventQueue.java:664)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
        at java.awt.EventQueue$4.run(EventQueue.java:680)
        at java.awt.EventQueue$4.run(EventQueue.java:678)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

第一行 - 以“警告”开头的行 - 是因为如果我尝试在 JTextField.class 上使用 Class.getDeclaredMethod() 来获取 getText() 方法，它喜欢崩溃。剩下的就是崩溃报告。

有没有办法我可以解决这个问题并让它适用于任何类/数组深度（所以它适用于 java.lang.String[]、javax.swing.JTextField[][][] 和 int[ ][] 没有硬编码）？

另外，附带说明一下，是否有更好的方法来获取基于字符串的原始类型的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:25:15.053

你有没有尝试过：

> Class.forName("[Ljava.lang.String;"); 对于字符串数组？

[http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName(java.lang.String) ) [http://java.dzone.com/news/obtaining-array-类-java-ref](http://java.dzone.com/news/obtaining-array-class-java-ref)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:23:04.090

`[Ljava.lang.String;`是类的运行时签名`java.lang.String[]`

```
System.out.println(String[].class.getName()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:32:44.773

Array names are denoted differently in Java. You can modify your method as follows to process arrays:

```
private Class<?> getClass(String classname){
    switch(classname){//Check for some primitive type references, since they don't work in the below area
        case "int":
            return int.class;
        case "int[]":
            return int[].class;
        case "double":
            return double.class;
        case "double[]":
            return double[].class;
        case "boolean":
            return boolean.class;
        case "boolean[]":
            return boolean[].class;
        case "long":
            return long.class;
        case "long[]":
            return long[].class;
        case "short":
            return short.class;
        case "short[]":
            return short[].class;
        case "char":
            return char.class;
        case "char[]":
            return char[].class;
    }
    Class<?> value = null;
    int arrayLevel = 0;
    while (classname.endsWith("[]")) {
        classname = classname.substring(0, classname.length()-2);
        arrayLevel++;
    }
    while (arrayLevel-- != 0) {
        className = "[L" + className + ";";
    }
    try{
        value = Config.class.getClassLoader().loadClass(classname);
    }catch(ClassNotFoundException ex){
        Error.error(ErrorLevel.severe, "Could not find class- "+classname, ex, ErrorCatagory.classFinding);//A custom error handling system
    }
    return value;//Return the class found from the name
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:27:15.290

如果您正在创建一个库，请善待您的客户并使用 Collections 类而不是数组。

对于原始类型，您始终可以传递盒装版本（`java.lang.Integer`等）

# asp.net-mvc - 定期删除MVC3中的过期记录

> ID：10621570
> 
> 赞同：0
> 
> 时间：2012-05-16T15:17:36.707
> 
> 标签：asp.net-mvc, entity-framework

我有一个包含临时数据的表，该表使用列来存储到期日期/时间。在 MVC3 中定期清除过期记录的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:22:16.767

如果您使用的是 SQL Server，那么我强烈建议您在 Sql Server 中[创建作业](http://msdn.microsoft.com/en-us/library/ms190268.aspx)。任何不需要用户输入的数据更改都应该是数据存储的工作。如果将来某些其他应用程序需要相同的数据，您可以放心，即使网站因任何原因关闭，记录也会被*清除。*

# windows - 如何在 IE 中检测 IE 版本

> ID：10621571
> 
> 赞同：1
> 
> 时间：2012-05-16T15:17:38.563
> 
> 标签：windows, internet-explorer

我有用 C++ 编写的工具栏，它在低权限的 Internet Explorer 下运行，我需要检测浏览器版本。

该主题的答案对我没有帮助，因为我无权阅读 HKLM 注册表树 [如何在 Winform 中获取 IE 版本信息？](https://stackoverflow.com/questions/6197794/how-to-get-ie-version-info-in-winform)

我看到的唯一可能性是发出 HTTP 请求，该请求将在输出中返回 User-Agent 字符串。

还有其他获得版本的能力吗？

UPD：我可以捕获 DISPID_BEFORENAVIGATE2 事件并检索标题数据。此解决方案要求用户至少向 Web 资源发出一次请求

UPD2：如果资源管理器打开 about:blank 页面，那么我可以捕获 BEFORENAVIGATE2，但标题数据为空

# graphviz - DOT Overwide 节点错误

> ID：10621574
> 
> 赞同：0
> 
> 时间：2012-05-16T15:17:47.900
> 
> 标签：graphviz, dot

我有一个大的 DOT 文件，我正在尝试使用 DOT 在 GraphViz 中绘制图表。我使用了以下命令： `dot -Tpng -o d:\GUIForm\test2.png d:\GUIForm\graph_2291547484206256890.dot.tmp`

我收到以下错误：

`Error: Edge length 65873.000000 larger than maximum 65535 allowed. Check for overwide node(s).`

DOT 文件的语法是正确的，但 DOT 文件中有 230k 行（它是一个函数调用图）。任何想法来规避这个错误？或者 GraphViz 可以处理的文件大小是否有硬性限制？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:17:37.370

问题节点可能需要“FIXEDSIZE=true”以防止膨胀。您可以上传您的 DOT 文件进行检查吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T02:03:26.850

不幸的是，这是一个基于`USHRT_MAX`（参见 GraphViz 的 position.c）的硬性限制。尝试避免它的另一个选择是统一缩小节点的大小（例如，通过将`fontsize`属性全局设置为较低）。

# restsharp - Restsharp中json对象的反序列化

> ID：10621578
> 
> 赞同：2
> 
> 时间：2012-05-16T15:17:55.443
> 
> 标签：restsharp

我有以下使用 RestSharp 调用 Web 服务的代码。代码运行没有错误，但是当我查看 response.Data 时，我看到 Result 对象没有反序列化，并且仍然包含默认值。

```
<Serializable()> <DataContract()> _
Private Class Result
  <DataMember(IsRequired:=False)> _
  Public responseCode As Long
  <DataMember(IsRequired:=False)> _
  Public responseMessage As String
  Friend Const RESULT_OK As Long = 2000
End Class

Private Function Login(ByVal user As String, ByVal password As String) As  RestResponseCookie
  Dim req As New RestRequest("authenticationService/authentication/signIn", Method.POST)
  req.RequestFormat = DataFormat.Json
  Dim input As New SigninInput
  input.requestParameters.username = user
  input.requestParameters.password = password
  req.AddBody(input)

  Dim response As RestResponse(Of Result) = getRestClient().Execute(Of Result)(req)
  If response.StatusCode = HttpStatusCode.OK Then
    Dim res As Result = response.Data
  End If
  Return Nothing
End Function 
```

现在，如果我将代码更改为以下内容：

```
 Dim response As RestResponse = getRestClient().Execute(req)
  If response.StatusCode = HttpStatusCode.OK Then
    Dim des As New Json.DataContractJsonSerializer(GetType(Result))
    Dim res As Result = CType(des.ReadObject(New IO.MemoryStream(response.RawBytes)), Result)
  End If 
```

反序列化运行得很好。我尝试从代码的非工作版本中调试结果，并且内容似乎很好。这是我得到的内容： "{"responseMessage":"Success: Your request was successfully completed.","re​​sponseCode":2000}" 并且 ContentType 应该是“application/json”。

我可以运行有效的代码，但我很高兴知道为什么 RestSharp 的反序列化没有正确进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:38:55.150

RestSharp 不会反序列化为字段，您必须将它们更改为属性，然后它应该可以工作。

# servlets - 如何从 Servlet 2.5 中的 ServletRequest 获取 Servlet 上下文？

> ID：10621580
> 
> 赞同：44
> 
> 时间：2012-05-16T15:18:03.493
> 
> 标签：servlets

我正在使用使用 Servlet 2.5 的 Tomcat 6。Servlet 3.0 的`ServletRequest`API 中提供了一个方法，该方法为`ServletContext`与`ServletRequest`. 有没有办法在使用 Servlet 2.5 API 时获取`ServletContext`对象？`ServletRequest`

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-16T16:45:38.110

您可以通过[`HttpSession#getServletContext()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#getServletContext%28%29).

```
ServletContext context = request.getSession().getServletContext(); 
```

然而，这可能会在不需要时不必要地创建会话。

但是当您已经坐在[`HttpServlet`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html)类的实例中时，只需使用继承的[`GenericServlet#getServletContext()`](http://docs.oracle.com/javaee/6/api/javax/servlet/GenericServlet.html#getServletContext%28%29)方法。

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    ServletContext context = getServletContext();
    // ...
} 
```

或者，当您已经坐在[`Filter`](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)界面的实例中时，只需使用[`FilterConfig#getServletContext()`](http://docs.oracle.com/javaee/6/api/javax/servlet/FilterConfig.html).

```
private FilterConfig config;

@Override
public void init(FilterConfig config) {
    this.config = config;
}

@Override
public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
    ServletContext context = config.getServletContext();
    // ...
} 
```

# css - 带边距自动的中心不起作用

> ID：10621582
> 
> 赞同：5
> 
> 时间：2012-05-16T15:18:12.177
> 
> 标签：css, margin

我在我的页面中使用了一个 jQuery 动画，它添加了一些 CSS 属性，但我不明白为什么`margin: auto`它不起作用。

HTML 代码（带有由 jQuery 添加的样式属性）：

```
<body style="overflow: hidden;">
    <div id="tuto_wamp" style="width: 7680px; height: 923px; ">
        <!-- Step 1 -->
        <div style="height: 549px; width: 1280px; margin-top: 0px; margin-left: 0px; position: absolute; overflow-y: hidden; overflow-x: hidden; ">
            <div class="content_tuto">
                <img src="images/install1.png" alt="">
            </div>
        </div>
    </div>
</body> 
```

我的 CSS 代码：

```
#tuto_wamp 
{ 
    background: #3a393c;
    width: 100%;
}

.content_tuto
{
    width: 100%;
    margin: auto;
    display: block;
} 
```

我不知道哪个属性会阻止`margin: auto`图像居中。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-09T19:13:09.957

我知道这是一篇旧帖子，但想分享我如何解决同样的问题。

我的图像是`float:left`从父类继承的。通过设置`float:none`，我能够`margin:0 auto`正常工作。希望它可以帮助将来的人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T15:30:42.453

添加`text-align:center;`到`.content_tuto`它会居中

请注意，您有宽度`style="width: 7680px; ...`和`style=".. width: 1280px; ...`，因此当您居中时，您会以该宽度为中心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:20:52.683

它不起作用，因为您已将宽度设置`.content_tuto`为`100%;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:41:31.343

我创建了一个小提琴并添加了一个边框来可视化和解决

[http://jsfiddle.net/meetravi/Y42Pf/](http://jsfiddle.net/meetravi/Y42Pf/)

您还可以从这里很好地阅读 css 中的 center a div

[http://stever.ca/web-design/centering-a-div-in-ie8-using-marginauto/](http://stever.ca/web-design/centering-a-div-in-ie8-using-marginauto/)

希望能帮助到你。

# android - 从本机代码执行 HTTP 请求

> ID：10621585
> 
> 赞同：4
> 
> 时间：2012-05-16T15:18:23.480
> 
> 标签：android, android-ndk

我必须从本机代码（GET 和 POST 请求）进行 HTTP 调用。有人可以对此有所了解吗？我不是在寻找通用的 JNI 解决方案，我看起来更像是参考实现，尤其是对于 HTTP

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T15:21:41.563

我已经成功将 libcurl 运行到 Android 8。您可以上网搜索资源：

[例如](http://thesoftwarerogue.blogspot.it/2010/05/porting-of-libcurl-to-android-os-using.html)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T23:17:29.377

我对在 android 上构建引擎有类似的要求。我成功地尝试并移植了 libcurl 和 libsoup。

我会说 libcurl 更稳定，并且有更好的文档记录。

# java - Android：将匿名类作为 Intent 参数传递的异常

> ID：10621592
> 
> 赞同：3
> 
> 时间：2012-05-16T15:18:49.340
> 
> 标签：java, android, serializable, anonymous-class

例外：

```
java.lang.RuntimeException: Parcelable encountered IOException writing serializable object (name = MyClass$2) 
```

（简化的）代码：

```
i.putExtra("myparam", generateA(context, "foo"));
...
private A generateA(final Context context, String foo) {
    return new A() {

        @Override
        public void test() {
            System.out.println("test");
        }
    };
} 
```

界面：

```
public interface A extends Serializable {

    public void test();

} 
```

我究竟做错了什么？我传递的是一个可序列化的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T09:42:32.600

如果我理解得很好，意图失败是因为您的匿名类由于其处理程序而无法序列化？

是否可以在目标活动中实现您的处理程序？bahaviour 类应该只包含行为函数和目标活动提供的处理程序：

```
private transient Handler h;

//Called by the activity in the onCreate
void setHandler(Handler h){
   this.h = h;
}

//Called by the activity to start the behaviour function
void startBehaviour (){
  //...
  //The activity handler will call startHandlerBehaviour itself
  h.sendMessage();
}

//Called by the activity in the Handler to execute in the good context
void startHandlerBehaviour() {
  //...
} 
```

# android - 在 TabHost 上按下 MonoDroid MVVMCross 手柄后退按钮

> ID：10621593
> 
> 赞同：1
> 
> 时间：2012-05-16T15:18:54.367
> 
> 标签：android, windows-phone-7, xamarin.ios, xamarin.android, mvvmcross

我正在使用 MvvmCross 框架来构建一个跨平台（iOS、Android、WP7）应用程序。我目前正在尝试从 TabHost Activity 处理在 Android 上按下的后退按钮。TabHost Activity 将从另一个 Activity（不在 Tab 选择中）启动，我希望后退按钮关闭应用程序，但是当按下后退按钮时，我将返回上一个屏幕。

'NoHistory = "true"' 似乎在 TabHost 中不起作用。

我正在如下处理视图中的后退按钮按下，但不确定可以在 ViewModel 中调用什么来关闭应用程序。

```
public override bool OnKeyDown(Android.Views.Keycode keyCode, Android.Views.KeyEvent e)
    {
        if (keyCode == Keycode.Back)
        {

            return this.ViewModel.CloseThisApplication();

        }
        return base.OnKeyDown(keyCode, e);
    } 
```

有没有可以调用的方法来关闭应用程序？或者对如何处理有更好的想法？理想情况下，该方法可以在前面指定的三个平台上复制。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:37:01.620

我不认为我们可以在所有 3 个平台上复制 exitNowPlease 调用——因为它们中的大多数不鼓励你提供退出功能——例如，我相信在 WindowsPhone7 中退出的唯一方法是抛出未处理的异常。

但是，我认为您应该能够通过以下方式实现您所描述的：

1.  将 NoHistory=true 标志添加到开始活动 - tabhost 之前的那个。这个`NoHistory=true`标志意味着不要在后台堆栈中包含这个活动类型。
2.  删除您的后退按钮处理程序。

然后该平台应该按照您所描述的方式运行。

* * *

另外对于跨平台清除后台堆栈，请参见[如何在 MvvmCross 中向导航堆栈中添加不可见的 ViewModel 中的 ClearTop 说明](https://stackoverflow.com/questions/10246013/how-to-add-an-invisible-viewmodel-to-the-navigation-stack-in-mvvmcross)

# delphi - ZLib 解压一个包含多个文件的 zip

> ID：10621601
> 
> 赞同：5
> 
> 时间：2012-05-16T15:19:32.183
> 
> 标签：delphi, delphi-7, zlib

我正在使用 delphi 7 并且需要解压缩包含多个文件的压缩 zip 文件，我找到了如何使用 ZLib 解压缩单个文件的示例，但在 zip 中找不到任何包含多个文件的示例，是否可以某人要么给我一个例子，要么给我指明一个方向

谢谢

科林

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T15:44:10.840

如果您在使用 zlib 时遇到问题，也许您可​​能需要考虑 TurboPower 的 Abbrevia（可在[SourceForge 上](http://sourceforge.net/projects/tpabbrevia/)获得）。使用 Abbrevia，这是我们的多文件提取代码：

```
zip.ArchiveType := atZip ;
zip.ForceType := true ;
zip.OpenArchive({...your .zip archive name});

zip.BaseDirectory :=  {...your extract path...} ;
zip.OnConfirmOverwrite := Overwrite
zip.ExtractFiles('*'); 
```

有处理提取失败、确认覆盖等的选项。这是一个非常好的库，而且它是免费的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T19:36:42.097

[zlib.net](http://zlib.net/)上的 zlib 源代码分发中有一个示例。看看[contrib/minizip/miniunz.c](https://github.com/madler/zlib/blob/master/contrib/minizip/miniunz.c)。

# android - 为移动火狐（fennec）创建一个扩展（android应用程序）

> ID：10621605
> 
> 赞同：2
> 
> 时间：2012-05-16T15:19:42.060
> 
> 标签：android, firefox-addon, fennec

我想在 android 中为 fennec (mobile firefox) 创建一个扩展，我已经有一个 android 应用程序，我想从 mobile firefox 午餐，通过点击一个按钮，我将添加到这个网络浏览器的用户界面，我做了很多研究，但我仍然迷路，我不知道从哪里开始..如果有人有教程或良好文档的链接，请给我

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T23:16:07.610

使用 nsIProcess。

示例： [https ://ask.mozilla.org/question/301/open-firefox-profile-with-nsiprocess-and-access-it-via-privealaged-scope/](https://ask.mozilla.org/question/301/open-firefox-profile-with-nsiprocess-and-access-it-via-privealaged-scope/)

文档： [https ://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIProcess](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIProcess)

# jquery - jQuery 插件：定义 NESTED 选项的默认值

> ID：10621611
> 
> 赞同：0
> 
> 时间：2012-05-16T15:20:07.833
> 
> 标签：jquery, plugins, nested, options, extend

我想为这样的嵌套选项定义默认值：

```
$("div").filters({
          url     : 'url.example.com'
          filters : {
              'projects'    : {
                    'type'  : 'dropdown',
                    'min'   : 1,
                    'max'   : 10,
                    'htmlOptions': {
                         'name' : 'projects',
                         'class': 'filters',
                         'id'   : 'project-filter',
                     }                          
               },
               'another'    : {
                    'type'  : 'dropdown'
               }
               ...
          }
}); 
```

我使用 jQuery`$.extend()`将这些与我的插件代码中的默认值合并，如下所示：

```
settings = $.extend(defaults,options); 
```

我的代码太大，所以我可以把它都放在这里。

我遇到的问题是可行的`settings.url`，但我不知道如何做同样的事情，`settings.filters`因为我不知道开发人员要在这里放置多少过滤器。

任何人都可以提出一个更好的方法来处理这个问题吗？

我被困住了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T18:12:34.630

因为您希望允许开发人员随意命名过滤器，所以我假设您不想为每个特定过滤器设置任何默认值（您不知道它们的名称！）。

但是，您需要为*filters*设置一个默认的空对象。所以你的*默认值*可能是：

```
var defaults = {
    url : '',
    filters: {}
}; 
```

现在，在合并之后，您需要遍历*过滤器*对象以查看是否有任何过滤器传入。

看到这个问题： [iterating-a-javascript-objects-properties-using-jquery](https://stackoverflow.com/questions/1096924/iterating-a-javascript-objects-properties-using-jquery)

所以你需要这样的东西：

```
$.each(settings.filters, function(filterName, value) {
    alert(filterName + ": " + value);
}); 
```

其中 value 将是您的过滤器对象 {}

您可以使用每个循环来访问过滤器对象内的所有属性。

但是，如果您希望开发人员能够仅初始化过滤器的某些属性 - 就像在您的示例中，*另一个*过滤器仅指定了*类型*- 您需要使用一组默认过滤器属性扩展每个过滤器。

# python - 在 Python 中使用 yield 创建一个空的可迭代对象的最简单方法是什么？

> ID：10621615
> 
> 赞同：33
> 
> 时间：2012-05-16T15:20:35.730
> 
> 标签：python, iterator, yield

我在玩迭代器，更具体地说是`yield`Python 中的运算符。在使用测试驱动开发开始编写新的迭代时，我想知道最短的代码可以使这个简单的迭代测试通过：

```
def test():
    for x in my_iterable():
        pass 
```

我能想到的最短版本是：

```
def my_iterable():
    for i in []:
        yield i 
```

是否可以编写更简单、更短或更漂亮（pythonic）的版本？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-16T15:22:40.753

就在这里：

```
return iter([]) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-04-16T00:32:57.710

Python 3 中的另一个解决方案是使用新`yield from`语法：

```
def empty_gen():
    yield from () 
```

这是可读的，并`empty_gen`作为生成器保存。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-16T15:22:12.533

您可以使用 lambda 和 iter 函数在 Python 中创建一个空的可迭代对象。

```
my_iterable = lambda: iter(()) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-05-16T15:58:06.303

怎么样

```
my_iterable = str 
```

这通过了你的测试。

说真的，`Iterable`在[收藏模块](http://hg.python.org/cpython/file/2.7/Lib/_abcoll.py)中提供：

```
def __iter__(self):
    while False:
        yield None 
```

这可以被认为是“最 Pythonic”，因为这是 Python 本身使用的。

请注意，到目前为止，从技术上讲，所有答案都提供了*迭代器*（`__iter__`+ `next`），而不是*可迭代*的（只是`__iter__`）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-16T15:26:15.397

```
def do_yield():
    return
    yield None 
```

如果使用 of`yield`对您很重要，则其他答案之一。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T07:10:21.393

另一个答案，因为我用不同的方法提供了一个全新的解决方案。

在图书馆之一中，我有一个`EmptyIterator`诸如

```
class EmptyIter(object):
    __name__ = 'EmptyIter'
    """Iterable which is False and empty"""
    def __len__(self): return 0
    def next(self): raise StopIteration # even that is redundant
    def __getitem__(self, index): raise IndexError 
```

这是一种使用以下属性的替代方法：

*   通过序列协议的替代迭代（见[这里](http://docs.python.org/library/functions.html#iter)）
*   [此处](http://docs.python.org/reference/datamodel.html#object.__nonzero__)描述的替代“虚假”协议。

# google-maps - geoxml3 - 带有 KML 图层控制的谷歌地图

> ID：10621618
> 
> 赞同：0
> 
> 时间：2012-05-16T15:20:43.830
> 
> 标签：google-maps, google-maps-api-3, controls, kml, layer

我正在使用 geoxml3 在 Google 地图上显示 KML 文件。我制作了可以打开和关闭不同 KML 图层的脚本。尽管每一层都按预期打开，但在尝试关闭一层时，会关闭另一层。

```
var G = google.maps;
var layers = new function() {this.data = [
{id:'japan',url:'kvadrati.kml'},
{id:'d1',   url:'Didzis_21.03-03.04.kml'},
{id:'d2',   url:'Didzis_04.04-17.04.kml'},
... ]};

function toggle() {for (var i=0; i<layers.data.length; i++) {
if (this.id == layers.data[i].id) {
if (layers.data[i].parsed) {
if (layers.data[i].on)
{geo.hideDocument(geo.docs[i]); layers.data[i].on = false}
else {geo.showDocument(geo.docs[i]); layers.data[i].on = true}}
else {geo.parse(layers.data[i].url); layers.data[i].parsed = true; layers.data[i].on = true}}
};};

function initialize() {
var options = {
   center:new G.LatLng(34.9, 137.3), 
   zoom:10, 
   mapTypeId:G.MapTypeId.TERRAIN, 
   scaleControl:true, 
   overviewMapControl:true, 
   mapTypeControlOptions:{style:G.MapTypeControlStyle.DROPDOWN_MENU}
};
map = new G.Map(document.getElementById('map'), options);
geo = new geoXML3.parser({
             map:map, 
             zoom:false, 
             singleInfoWindow:true, 
             infoWindowOptions:{maxWidth:100}, 
             processStyles:true, 
             markerOptions:{shadow:''}
      });
var el = document.getElementsByTagName('input');
for (var i=0; i<el.length; i++) {
    el[i].type = 'checkbox'; 
    G.event.addDomListener(el[i], 'click', toggle)};
};
G.event.addDomListener(window, 'load', initialize); 
```

我确定问题出在函数 toggle() 中：

```
geo.[show/hide]Document(geo.docs[i]); 
```

[在这里测试一下](http://www.eiranet.lv/kartes/Anjo/map/)。加载图层需要很长时间，因为它们是未压缩 (KML) 格式。我读到 geoxml3 应该支持[KMZ 文件](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmztest_multiple.html)，我什至复制了这个示例中的每个文件，但它对我不起作用。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:11:04.080

最后我得到了正确的代码，其中函数 toggle() 是：

```
function toggle() {
for (var i=0; i<layers.length; i++) {
var x = layers[i];
var xurl = './layers/' + x.url;
if (this.id == x.id)
{if (x.render)
{for (var n=0; n<geo.docs.length; n++)
{var y = geo.docs[n];
if (y.url == xurl)
{if (x.on) {geo.hideDocument(y); x.on = false} else {geo.showDocument(y); x.on = true}}
}}
else {geo.parse(xurl); x.render = true; x.on = true}}}}; 
```

相当疯狂的函数，有很多 if 语句，但我想它不能比这更简单或更干净了。

**编辑：**

```
function toggle() {var x = this;
if (x.r) {(x.on) ? geo.hideDocument(geo.docs[x.n]) : geo.showDocument(geo.docs[x.n])}
else {geo.parse(x.href); x.r = true; x.n = geo.docs.length}; x.on = !x.on}; 
```

删除了没有必要的图层数组，现在我使用锚标签中的 href 来解析图层，而不是单击输入而是元素。所以脚本变得非常短。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:07:48.217

你有一个问题，`geo.showDocument`你传递的参数 (`geo.docs`与你的 layers.data 数组的指示方式不同，你不能这样得到合理的结果。你应该找到另一种方法来告诉 geoxml3 哪个文档隐藏，例如基于 geo.docs 数组的每个单元格的 url 属性，这将更一致地匹配 layers.data 数组。

对于 KMZ 解析问题，您需要使用 geoxml3 库的另一个分支，使用 svn 签出此地址：[http](http://geoxml3.googlecode.com/svn/branches/kmz) ://geoxml3.googlecode.com/svn/branches/kmz 。它仍在开发中，因此不排除错误。

# apache-flex - Adobe Air：在不同应用程序之间更改焦点时，滚动条会引发错误

> ID：10621624
> 
> 赞同：3
> 
> 时间：2012-05-16T15:21:09.987
> 
> 标签：apache-flex, air, flex4, flash-builder, scroller

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at spark.components::Scroller/focusInHandler()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\Scroller.as:2139]
    at flash.display::Stage/set focus()
    at mx.core::UIComponent/setFocus()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:9905]
    at spark.components::RichEditableText/setFocus()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\RichEditableText.as:3126]
    at spark.components.supportClasses::SkinnableTextBase/setFocus()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\supportClasses\SkinnableTextBase.as:1874]
    at mx.managers::FocusManager/activateWindowHandler()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\FocusManager.as:740]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at mx.core::UIComponent/dispatchEvent()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:13152]
    at spark.components::WindowedApplication/nativeWindow_activateHandler()[E:\dev\4.y\frameworks\projects\airspark\src\spark\components\WindowedApplication.as:2739] 
```

在我的 Adob​​e Air 程序中，每当我使用我的应用程序并在此应用程序和其他应用程序之间切换焦点时，都会出现上述错误。（我已经尝试了几次，这个错误是可以重现的。）

是什么导致了这个问题以及如何解决它？

编辑：我的程序有一个堆栈视图，其中一个堆栈视图有一个列表。当列表中至少有一个对象时，将发生上述错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:50:03.980

我在我的一个项目中遇到了同样的问题，看起来它[是 SDK 的已知错误](https://bugs.adobe.com/jira/browse/SDK-29522)。就我而言，我刚刚编写了自定义 Scroller 类，其中添加了 focusManager != null 检查。就像是

```
package components
{
    import flash.events.FocusEvent;
    import spark.components.Scroller;
    public class MyScroller extends Scroller
    {
        public function MyScroller()
        {
            super();
        }

        override protected function focusInHandler(event:FocusEvent):void
        {
            if(focusManager != null) {
                super.focusInHandler(event);
            }
        }
    }
} 
```

最好的毕业生，罗马

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:32:38.503

我知道这很旧，但这里有一个适合我的解决方案。

```
dataGrid.scroller.addEventListener(FocusEvent.FOCUS_IN, dataGridFocusInHandler, false, 1); 
```

和

```
protected function dataGridFocusInHandler(event:FocusEvent):void {
    if(dataGrid.scroller.focusManager == null) {
        event.stopImmediatePropagation();
    }
} 
```

也可以应用于我预期的列表

干杯阿兹

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T11:52:27.717

我遇到了同样的问题，根本原因是如果弹出的组件没有实现`IFocusManagerContainer`接口，PopUpManager/PopUpAnchor 将无法正确设置 focusManager。实现这样的接口后，问题就消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-01T18:29:08.230

我遇到了这个问题，事实证明这是由我在网格中作为项目渲染器的一些按钮引起的。这些按钮会将视图更改为不同的部分，并且在按下后显然会保持焦点，从而造成各种麻烦。我将它们设置为focusEnabled = false，它解决了问题。

# java - Spring MVC 如何处理一页应用程序的标题？

> ID：10621631
> 
> 赞同：0
> 
> 时间：2012-05-16T15:21:38.320
> 
> 标签：java, ajax, spring, spring-mvc

昨天我问了[这个](https://stackoverflow.com/questions/10607729/adding-headers-to-spring-controllers)问题，得到了一些非常好的反馈。总结一下我的情况，我正在尝试将禁止缓存的 HTTP 响应标头添加到我的 Spring MVC Web 应用程序（我意外继承的项目）。

因此，根据回答者（最终是@Bozho）的建议，我将其添加到我的 Spring 配置文件中：

```
<mvc:annotation-driven/>
<mvc:interceptors>
    <bean id="webContentInterceptor" class="org.springframework.web.servlet.mvc.WebContentInterceptor">
        <property name="cacheSeconds" value="-1"/>
        <property name="useExpiresHeader" value="true"/>
        <property name="useCacheControlHeader" value="true"/>
        <property name="useCacheControlNoStore" value="true"/>
    </bean>
</mvc:interceptors> 
```

我在本地重新构建了我的应用程序，并在 Firefox 中打开它，这样我就可以使用 Firebug 来测试 HTTP 响应返回的标头。

对我来说不幸的是，最初的开发人员的目标是使其成为一个“单页 Web 应用程序”，每个实际 JSP 页面大约有 40 多个 AJAX 调用。

在这 40 多个 AJAX 请求中的任何一个中，我不仅*没有*看到我正在寻找的标头`Cache-Control`、`Expires`等，而且我担心由于每个 JSP 页面有超过 1 个 AJAX 请求，因此 Spring 拦截器不知道AJAX 调用以将标头添加到其中。我没有看到任何错误消息或日志输出表明 Spring 不喜欢我的配置等。一切似乎都很好......它只是不工作！

*   我是否配置错误？如果没有，这不起作用的原因是什么（为什么拦截器没有启动）？
*   多个 AJAX 调用会导致 Spring MVC 请求拦截器行为异常吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:23:35.450

如果您的配置看起来完全如图所示，您的拦截器声明将不会生效。您需要将拦截器声明放入`<mvc:interceptors>`，请参阅[Bozho 的答案](https://stackoverflow.com/questions/4364622/how-to-set-header-no-cache-in-spring-mvc-3-by-annotation)。

关于多个 AJAX 查询，只要这些查询由 Spring MVC 控制器处理，就应该没问题。默认情况下，拦截器会拦截所有到达控制器的请求，但您可以根据需要将其范围缩小到特定的 URL 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:03:42.293

当涉及到您的 XML 配置时，Spring 可能非常挑剔，并且添加从 Web 上找到的片段通常不起作用，即使对于最琐碎的示例也是如此。如果不了解您的配置的更多信息，就很难重现这一点并查看您的配置错误或与拦截器声明冲突的地方。

`HttpHeaders`您始终可以通过声明对象实例、配置它们并将它们包含为响应实体（这就是您正在使用的样子）来强制您的控制器返回禁止缓存的标头：

```
HttpHeaders headers = new HttpHeaders();
headers.add("Pragma", "no-cache");
headers.add("Expires", "Thu, 01 Jan 1970 00:00:00 GMT");
headers.add("Cache-Control", "max-age=0, no-cache, no-store"); 
```

如果你有很多控制器，并且每个控制器有很多方法，这会变成很多重复的、讨厌的代码。相反，您可以扩展`HttpHeaders`：

```
public class YourAppHeaders extends HttpHeaders {
    public YourAppHeaders()            
        add("Pragma", "no-cache");
        add("Expires", "Thu, 01 Jan 1970 00:00:00 GMT");
        add("Cache-Control", "max-age=0, no-cache, no-store");
    }
} 
```

然后，您可以浏览每个的源文件并用新实例`@Controller`查找/替换新实例。`HttpHeaders``YourAppHeaders`

我推荐这种方法而不是 XML 配置有几个原因：

*   您的 XML 配置不起作用，我没有足够的信息来理解原因；和
*   此方法保证有效；和
*   这是您可以添加的最少代码量来完成您正在寻找的内容

祝你好运 - HTH

# java - 如何从静态方法访问变量

> ID：10621632
> 
> 赞同：0
> 
> 时间：2012-05-16T15:21:38.683
> 
> 标签：java, variables, static

我想`variable`从一个`static`方法访问一个。

例如 ：

```
public class ABC
{
    public static void ABC()
    {
        int abc = 123;
        int bcd = 234;
    }
    public int getabc()
    {
        int tempabc = abc;
        return tempabc;
    }
    public int getbcd()
     {
        int tempbcd = bcd;
        return tempbcd;
    }
   public static void main(String[] args)
    {
        System.out.println(ABC.getabc());
    }
} 
```

所以这是错误代码：

```
error: cannot find symbol
        int tempabc = abc;
                      ^
symbol:   variable abc
location: class ABC

error: cannot find symbol
        int tempbcd = bcd;
                      ^
symbol:   variable bcd
location: class ABC

error: non-static method getabc() cannot be referenced from a static context
        System.out.println(ABC.getabc());
                              ^
3 errors 
```

那么，我怎样才能从静态方法`value`中访问呢？`variable`

编辑 ：

我已经编辑了代码，我只想`abc`从`static` `ABC()`. 但是根据上面的示例代码，编译时会显示错误。

示例代码与程序代码风格相同。

好的，这是我的程序代码：

```
import java.io.*;
import java.util.*;

public class ReadHighestScoreFile
{   
    public static void ReadHighestScoreFile() throws IOException
    {
        final int NAME_SIZE = 35;
        String name = "";
        public static String names = 0;
        static int hours, minutes, seconds, clicks;

        File file = new File("Highest.txt");
        RandomAccessFile out = new RandomAccessFile(file, "rw");

        for (int i = 0; i < NAME_SIZE; i++)
        {
            name += out.readChar();
        }

        names = name;
        hours = out.readInt();
        minutes = out.readInt();
        seconds = out.readInt();
        clicks = out.readInt();

        System.out.println(">> Name : " + names);
        System.out.println(">> Hour : " + hours);
        System.out.println(">> Minute: " + minutes);
        System.out.println(">> Second : " + seconds);
        System.out.println(">> Click : " + clicks);     

        out.close();
    }
} 
```

我的程序用于访问一个名为`Highest.txt`. 但是我需要获取 , , , 和 的值`names`来`hours`实现`minutes`我`seconds`的`clicks`主程序。当我尝试将它实现到我的主程序时，我发现了这个问题。

如果我单独执行，这意味着我`main`为此代码创建了一个方法，它会正常工作。但是现在我需要为我的主程序获取这些值来执行其他操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:23:07.537

`abc`是一个方法局部变量。它不能在该方法之外访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:24:52.187

`abc`关于 具有局部范围`ABC()`。如果你想要它回来，你可以返回一个`int`from`ABC()`代替：

```
public static int ABC()
{
    int abc = 123;
    return abc;
}

public static void main(String[] args)
{
    System.out.println(ABC());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T16:20:10.123

您的帖子有相互矛盾的陈述：

```
1\. how to access variable from a static class? 
```

您的代码没有定义静态类，而是定义了与类 ABC 同名的静态方法。

```
2\. static method that has same name as class `ABC`. 
```

如果您认为这是创建静态类的方式，那就错了。静态类只能是外部类的内部。

```
3\. tempabc = abc. 
```

即使你定义了一个静态类，访问非静态变量也不是这样的。除非变量也是静态的，否则您需要创建静态类的实例并以适当的方式访问变量值。

**回答您的帖子的第二部分**：
您应该定义一个类来封装上述字段，如下定义：

```
class HighestData {
    String names;  
    int hours;  
    int minutes;  
    int seconds;  
    int clicks;  

    // define setter, getter methods or a constructor with input params for above fields.
} 
```

将方法从 更改`void`为`return object of HighestData`。

```
public static HighestData ReadHighestScoreFile() throws IOException {  
    // your code here  
    // ...  
    HighestData data = new HighestData();  
    data.setName( name );  
    data.setHours( out.readInt() );  
    data.setMinutes( out.readInt() );  
    data.setSeconds( out.readInt() );  
    data.setClicks( out.readInt() );  
    // ...  
    return data;  
} 
```

方法的调用者`ReadHighestScoreFile()`现在可以拥有对象句柄`HighestData`并使用它来进一步处理。

最后但重要的是，与 C 不同，您不能在 Java 中定义*本地*静态字段。他们必须处于班级水平。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:24:45.993

您需要在类范围内声明它：

```
public static int abc = 123; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T15:28:50.703

尝试添加一个返回字符串的 get：

```
public static String getABC()
{
    string i = "abc";
    return i;
} 
```

然后调用该函数：

```
System.out.println(getABC()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T15:41:57.623

您的变量不是类变量，而是方法变量。如果您使用静态变量，请确保您知道自己在做什么。使用它们通常是个坏主意。这是访问静态变量的方法。

```
public static class ABC {
  public static int someInt = 123;
}

public static class MainClass {

  public static void main(String[] args) {
    System.out.println(ABC.someInt);
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T15:56:43.330

你真的试过编译代码吗？如果是，那么您可能还没有注意到代码中存在很多问题。

1.  在这里“int tempabc = abc;” 您正在尝试以另一种方法访问该变量，该方法在声明它的方法之外不可见

2.  同样的上述事件在这里“int tempbcd = bcd;”

3.您的问题的答案是，您不能从静态方法访问非静态方法。将访问说明符 static 添加到您需要从 main 访问的方法中。

# c# - 基于字符串c#显示

> ID：10621638
> 
> 赞同：0
> 
> 时间：2012-05-16T15:21:55.933
> 
> 标签：c#

好的，所以我目前正在尝试根据字符串是否很快来制作复选框，但是我网格中每一行的数据每次都会不同，所以我无法将其设置为检查一个特定的字符串，我一直在思考检查该字符串是否为空或为空但我不知道如何执行此操作的行，我在 if (string.Equals 行的代码中有错误，因为我不确定如何完成此操作。

```
public class StringToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value != null && value is string)
        {
            var input = (string)value;
            if (string.Equals
            {
                return Visibility.Collapsed;
            }
            else
            {
                return Visibility.Visible;
            }
        }

        return Visibility.Visible;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:25:13.710

`IsNullOrEmpty`类中内置了一个静态方法`string`，使用它：

```
public class StringToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value != null && value is string)
        {
            var input = (string)value;
            if (string.IsNullOrEmpty(input))
            {
                return Visibility.Collapsed;
            }
            else
            {
                return Visibility.Visible;
            }
        }

        return Visibility.Visible;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:24:34.797

.NET 4.0：

```
if (string.IsNullOrWhitespace(myString)) 
```

.NET 4.0 之前的版本：

```
if (string.IsNullOrEmpty(myString)) 
```

不过，我会以不同的方式编写逻辑（不需要一些检查）：

```
var input = value as string;
if (input == null || string.IsNullOrWhiteSpace(input))
{
    return Visibility.Collapsed;
}
else
{
    return Visibility.Visible;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:25:00.220

如果您只想检查字符串是否不为空，请使用：

```
 if(!string.IsNullOrEmpty(value))
    {
       ////
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:26:10.843

您可以使用[`string.IsNullOrEmpty`](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)：

```
if (string.IsnullOrEmpty(input))
{
    return Visibility.Collapsed;
}
else
{
    return Visibility.Visible;
} 
```

如果您还想包含空格，请使用[`string.IsNullOrWhiteSpace`](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)(>= .NET 4.0)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T15:27:27.577

使用[String.IsNullOrEmpty](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)：

```
 public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (!string.IsNullOrEmpty(value as string))
        {
            return Visibility.Collapsed;
        }

        return Visibility.Visible;
    } 
```

# php - 如何强制浏览器使用特定的 adobe reader 版本

> ID：10621639
> 
> 赞同：1
> 
> 时间：2012-05-16T15:21:59.493
> 
> 标签：php, pdf, adobe, adobe-reader

我正在编写一个 php Web 应用程序，它需要使用 Adob​​e Reader 在浏览器中打开 pdf 文件。有些人的浏览器安装了多个版本的 Adob​​e Reader 插件。Adobe Reader 10.1.3.23 似乎会导致某些人无法打开 pdf，但 Reader 9.5 似乎仍然可以正常工作。如果客户端在其浏览器上安装了多个版本的 Adob​​e 插件，是否有办法强制客户端浏览器使用旧版本的 Adob​​e Reader 插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:23:46.103

不，您对用户的浏览器没有这种控制权。这是一件好事，因为它可以用来利用 Adob​​e Reader 的错误，这些错误似乎在以前版本的软件中乱扔垃圾。

# qt - 如果应用程序忙，则不会显示 QSystemTrayIcon 弹出菜单

> ID：10621640
> 
> 赞同：0
> 
> 时间：2012-05-16T15:21:59.790
> 
> 标签：qt

我使用 QSystemTrayIcon 类来显示 TrayIconMenu，并且在单击 TrayIconMenu 时会显示弹出菜单。

如果应用程序正忙于处理其他任务，则单击 TrayIcon，弹出菜单不显示，但菜单边框可见一会。相同的代码适用于 Mac。

我试图通过以下方式显示菜单：

```
 QMenu *myMenu();
    QSystemTrayIcon myTrayIcon;
    myTrayIcon.mytMenu()->show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:44:45.273

可能问题出在一些广泛的计算块或大而慢的循环上。如果您知道这个瓶颈在哪里，您可以让事件循环处理排队事件，只需插入

```
QApplication::processEvents(); 
```

在计算循环内的某个点。

此外，尝试将大而昂贵的任务拆分为小而快的任务，您可以让事件循环处理介于两者之间的事件。

# python - 在python中拆分音频文件

> ID：10621644
> 
> 赞同：0
> 
> 时间：2012-05-16T15:22:09.227
> 
> 标签：python, audio, analysis

首先，我从来没有做过任何音频编码。我想看看如何开始这个小项目，想象一下，你有一个 MP3 歌曲分成三个块，我如何比较一个文件的开头和另一个文件的结尾，看看它们是否应该按该顺序播放。

就像在播放过程中连续播放专辑一样，但您没有曲目编号。

我的想法是将音频的最后一部分与另一首的开头进行比较，并尝试找到匹配项，直到所有部分都匹配。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:59:07.820

这取决于它是如何分裂的。

MP3 文件是一个标题块，后面跟着一些数据，您可以在任何标题块处拆分文件，然后通过将它们连接在一起来组合它们。标题块中不一定有任何内容来说明它的顺序。（[http://en.wikipedia.org/wiki/MP3#File_structure](http://en.wikipedia.org/wiki/MP3#File_structure)）

如果 MP3 文件是专辑中的单独曲目，它们将具有列出曲目编号的 ID 标签。有一些 python MP3 库 - 请参阅[Accessing mp3 Meta-Data with Python](https://stackoverflow.com/questions/8948/accessing-mp3-meta-data-with-python)

编辑：如果您的意思是分析音乐以便判断一个音符是否应该跟随另一个音符，那有点超出我的专业知识！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:50:35.280

我认为您正在寻找如何*完全通过它们的声音*来排列曲目；也就是说，您拥有的唯一信息是音频信息。我不懂python，但我懂数字音频；这是您可以使用的算法。基本上，您需要一个差异度量来比较每个轨道的开始与其他轨道的结束。可能的指标包括速度、幅度和音色。我建议的方法基本上是尝试匹配波形。

任何方法都必须假设轨道之间没有寂静，并且它们从一个到另一个没有间隙地流动。不幸的是，大多数专辑并非如此。如果歌曲之间有沉默，除了去[discogs.com](http://www.discogs.com/)或其他什么之外别无他法。我猜想这样的解决方案可能会减少工作量，并且肯定比您可以在合理时间内编写的任何脚本更可靠。

不过，这是我的建议：

1.  对于每个文件，获取开始和最终样本值以及该点的导数/斜率
2.  使用您在第 1 部分中收集的信息预测上一个/下一个样本将是什么。
3.  比较每个开始/结束对的预测，看看它们的匹配程度。（比较预测值和真实值可能还不够。您可能还需要比较导数。）
4.  将最佳匹配配对（按照从最佳到最差的顺序，直到您的列表完成）

您可能需要转换为 wave 才能执行上述操作。如果是这样，您可能会使用非常低的采样/比特率来最大程度地减少转换时间和 RAM 使用量。我不知道python有什么工具，但是如果你只能转换这些文件的开头和结尾，那肯定会提高性能！当然，您只需要在转换后从每一端存储几分之一秒。

**量化“良好匹配”**：要比较样本，您可以使用预测与真实之间差异的平方，将差异添加到对的每一端。添加导数比较意味着您必须弄清楚如何将导数差异与样本差异进行比较。

**潜在问题**

如果您正在处理 CD 质量的音频文件，该算法应该可以很好地工作。转换过程中可能发生了一些事情，导致轨道末端的信息丢失，这与上述情况大相径庭。丢失一秒的一小部分音频将完全破坏这种方法！

另一个潜在的症结是，如果你的斜率非常高，你看到的声音很可能是嘈杂的。如果是这样，那么我建议的比较容易出错。您可以进行自相关或其他操作以查看您的音频是否嘈杂（短时间尺度的低 ACF 表示噪音），然后降低真实/预测差异以支持斜率，甚至只是噪音。

一般来说，您可能希望根据您预测的跳跃幅度来衡量真实和预测之间的差异。如果您预测跳跃幅度较大，则应根据跳跃的大小考虑与预测值的偏差，因此当预测跳跃较小时，较大的偏差更重要。

另一种对该问题不太敏感的方法是使用 FFT 进行频谱分析，以便您的距离度量成为每个频率区间的幅度差异。这对瞬变很敏感（例如鼓声、吉他弹奏）；使用非常小的分析窗口可能会减轻这个困难。我可以想象，除了上述过程之外，您还可以使用它，除非您仅将其用作肯定标准：如果开始/结束对是良好的光谱匹配，则可能表示真正的配对，但如果光谱数据匹配，因为瞬变破坏数据的可能性，它没有提供信息。或者，您可以使用长窗口，以便确保包含比较两端可能存在的任何瞬变。

最终，您使用的技术可能取决于您使用的音乐类型。如果你有一张硬摇滚专辑，那么很可能到处都是钹和失真的吉他，在任何地方看起来基本上都是一样的。另一方面，如果你在曲目的开头出现了突然的过渡，那么什么都不会起作用。

正如我所说，“手动”执行此操作可能是最可靠甚至最快的解决方案（考虑开发时间），除非您对大量 mp3 执行此操作。

# soap - 在 groovy 中使用的标准 SOAP 库是什么？

> ID：10621648
> 
> 赞同：14
> 
> 时间：2012-05-16T15:22:14.647
> 
> 标签：soap, groovy, groovyws

我只需要一个 SOAP 客户端来进行远程调用，但我有点像 Groovy 菜鸟。根据[Groovy 文档](http://groovy.codehaus.org/Groovy+SOAP)，不推荐使用标准的 Groovy SOAP 库。相反，文档将您指向一个更新的库：[GroovyWS](http://groovy.codehaus.org/GroovyWS)。

不幸的是，GroovyWS 有一个警告说该项目处于休眠状态，然后它会将您指向[Groovy WSLite](https://github.com/jwagenleitner/groovy-wslite)。

Groovy WSLite 实际上似乎仍在积极开发中，但与之前的 2 个库相比，它并不是很“Groovy-ish”。**wslite 是每个人都在使用的吗？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-19T16:57:31.090

我认为您会发现[GroovyWS](http://groovy.codehaus.org/GroovyWS)和[groovy-wslite](https://github.com/jwagenleitner/groovy-wslite)（和[HTTP Builder](http://groovy.codehaus.org/HTTP+Builder)）都在项目中用作 Groovy SOAP 客户端库，并且决定可能是其中一个有效，哪个具有用户喜欢的 API/方法（在那个命令）。

[如果您喜欢GroovyWS](http://groovy.codehaus.org/GroovyWS)提供的 API 及其代理 WSDL 文档的能力，我的建议是尝试一下它，看看它是否适用于您需要与之交互的服务。SOAP 世界中的情况并没有太大变化，所以我不会太担心它最近的更新时间。如果它有效，那么你就完成了，如果你遇到一些你无法轻易找到帮助的问题，那么我会尝试替代方案。

[groovy-wslite](https://github.com/jwagenleitner/groovy-wslite)（免责声明：我是作者）旨在提供一种轻量级（就依赖项而言）替代方案，它可以交换 WSDL 解析/代理的便利性，以便更轻松地对生成的soap调用进行更多控制而无需挖掘深入了解一些底层 Java 框架（如 CXF）的内部结构。有些人更喜欢在这样的框架之上构建库的附加功能，而另一些人可能更喜欢其他方法的简单性。

Groovy 之所以如此出色，是因为它与 Java 集成是多么容易。因此，正如其他人已经指出的那样，您可以很容易地与 Spring WS、CXF 和 JAX-WS 等 Java Web 服务客户端集成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T22:40:17.883

我会远离groovyws，这很糟糕。看了一圈，最终选择了使用spring web services和contract-driven web services的方案。

客户端使用生成soap 请求XML 的toXml() 方法实例化命令对象。然后使用 WebServiceTemplate 发送到端点。

对于服务器，我们使用 Spring Web 服务端点。解析传入的 xml 是小菜一碟，您不需要将 XML 编组为对象，因为 XmlSlurper 产生的 GPathResult 是完全可管理的。我们的服务器运行在 grails 之上，因此我们利用了 springws grails 插件，使 Endpoints 的创建更加容易。

不过有一个警告。grails 的 springws 插件已过时。Spring web services 现在是 2.x 版本，springws 插件带有 1.4.xi think。但是，没有插件也很容易使用，而且我认为将插件升级到较新的 api 并不难。

另外，如果你想做 MTOM，springws 会稍微复杂一些，因为你需要更深入地研究消息处理。我可以用 Spring Web 服务做一些非常高级的 ws-security 东西，但是没问题。

否则我会使用 cxf（很好地处理 MTOM），如果你想坚持使用 jax-ws 等。过热可能更高，因为所有动态生成的代理和 pojo。此外，它不是合同驱动的，这对我们来说是一个很大的优势。

[http://predic8.com/groovy-web-services-jax-ws.htm](http://predic8.com/groovy-web-services-jax-ws.htm)

[http://cxf.apache.org/docs/how-do-i-develop-a-client.html](http://cxf.apache.org/docs/how-do-i-develop-a-client.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T03:21:21.357

看来你自己做了功课！Groovy WS Lite 似乎目前正在工作。如果您想使用 Groovy 查看 spring-ws 的实际效果，那么这里是我在 github 中创建的一个[测试套件项目。](https://github.com/menacher/Test-Tools)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-06T19:38:46.297

或者，您可以改用 JSON。SOAP 已经过时了。上面有关 groovy 文档和 GroovyWS 的链接无处可去

# jquery - jquery .trigger('click') 只工作一次（在 < IE9 中）

> ID：10621649
> 
> 赞同：0
> 
> 时间：2012-05-16T15:22:15.123
> 
> 标签：jquery

我已经搜索了另一个问题，但找不到与我相同的情况。

我创建了一个项目概述，旁边有一些下拉菜单来过滤结果（这将由 ajax 完成）。因此，当下拉列表更改时，我想触发“第 1 页”链接，以便请求并显示第一页结果。

问题是，“转到第 1 页”警报仅在 Internet Explorer 7 和 8 中出现一次。我第二次更改下拉列表时什么也没有。（当我在“更改”功能中放置警报时，它每次都会弹出）

很快我的代码是

```
$('.pageLink').live('click', function(event){
   event.preventDefault();

   // read quickfilter here
   // request the results and do some magic animations to display them

   alert('go to page 1');
});

$('[name^=quicksearch]').change(function(){
    $('.pageLink[href="#1"]').trigger('click');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:16:05.753

谢谢你的回复。长度为0。如果元素未定义，我已经检查了我的代码，但IE仍然告诉我它是一个对象。我使用以下代码使其工作。

```
if($('.pageLink[href="#1"]') == undefined || $('.pageLink[href="#1"]').length == 0){ 
  //create and trigger 
}else{ 
  //trigger 
} 
```

# python - 在写得不好的脚本中用 BeautifulSoup 隔离一个值

> ID：10621652
> 
> 赞同：0
> 
> 时间：2012-05-16T15:22:18.993
> 
> 标签：python, html, parsing, beautifulsoup

我正在尝试解析许多不同页面的 HTML 源代码，例如：

[http://www.ielts.org//test_centre_search/results.aspx?TestCentreID=dd50346f-60bc-4a4f-a37f-7e3d34df0bf8](http://www.ielts.org//test_centre_search/results.aspx?TestCentreID=dd50346f-60bc-4a4f-a37f-7e3d34df0bf8) 或 www.ielts.org//test_centre_search/results.aspx?TestCentreID=feb563e3-43db-4d40- a6b1-223e2fb7191b（我有800页这样的）

它们都采用相同的格式。我正在尝试解析“测试费”值。

```
<TABLE style="BORDER-RIGHT: buttonshadow 1px solid; BORDER-TOP: buttonhighlight 1px solid; FONT: messagebox; BORDER-LEFT: buttonhighlight 1px solid; COLOR: buttontext; BORDER-BOTTOM: buttonshadow 1px solid; BACKGROUND-COLOR: buttonface" cellSpacing=0 cellPadding=4 width=500>
<TBODY></TBODY></TABLE><table id="Template_ctl21_TestCentreView1_TestCentreTable" Width="400" border="0">
    <tr>
        <td><img src="https://www.ielts.org/TestCentreLogos/TestCentre/dd50346f-60bc-4a4f-a37f-7e3d34df0bf8.jpg" align="right" style="border-width:0px;" /><span class="TestCentreViewTitle">University of Canberra Test Centre</span><BR><BR><span class="TestCentreViewLabel">Address:</span><BR><span class="TestCentreViewBody">IELTS Administrator</span><BR><span class="TestCentreViewBody">Building 16</span><BR><span class="TestCentreViewBody">Wilpena Street, Bruce</span><BR><span class="TestCentreViewBody">ACT - Canberra</span><BR><span class="TestCentreViewBody">2617</span><BR><BR><span class="TestCentreViewLabel">Tel: </span><span class="TestCentreViewBody">61 2 6201 2669</span><BR><span class="TestCentreViewLabel">Fax: </span><span class="TestCentreViewBody">61 2 6201 5089</span><BR><span class="TestCentreViewLabel">Email: </span><a class="TestCentreViewLink" href="mailto:ielts@canberra.edu.au">ielts@canberra.edu.au</a><BR><span class="TestCentreViewLabel">Web: </span><a class="TestCentreViewLink" href="http://www.canberra.edu.au/uceli/ielts">http://www.canberra.edu.au/uceli/ielts</a><BR><BR>**<span class="TestCentreViewLabel">Test Fee: </span><span class="TestCentreViewBody">AUD$330</span>**<BR><BR><div style="overflow-y:scroll;overflow-x:visible;height:250px;;"><table cellspacing="0" cellpadding="2" border="0" style="border-collapse:collapse;">
            <tr>

        </table></div><BR><span class="TestCentreViewBody"><P class=MsoNormal style="MARGIN: 0cm 0cm 0pt"><SPAN lang=EN-US style="mso-ansi-language: EN-US"><FONT size=3><FONT color=#000000><FONT face=Calibri>The IELTS office now closes at 4:00pm on Friday afternoons.<?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" /><o:p></o:p></FONT></FONT></FONT></SPAN></P>
<P>&nbsp;</P></span><BR></td>
    </tr>
</table> 
```

以上是我们感兴趣的部分来源。我要解析的是： `**<span class="TestCentreViewLabel">Test Fee: </span><span class="TestCentreViewBody">AUD$330</span>**`

问题是我们有很多不同`<span>`的同一个类（TestCentreViewBody）和一个你有5个页面，其他8个等等......所以我不知道如何隔离这个？

我正在寻找一种方法来隔离这个值。

PS：我注意到`<span>`最后一个之前的似乎总是包含我正在寻找的值。所以我试图做的是：

```
LOL = findAll('span' .. with the 'class' : 'TestCentreViewBody')
Value = LOL[len(lol)-1] 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:43:49.590

在类上做一个 find_all() ，`TestCentreViewLabel`用循环遍历它们中的每一个。在每次迭代中获取文本并查看其中是否出现“费用”一词。如果是，则获取当前标记的*下一个兄弟*，其内容应该是您要查找的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:43:58.897

鉴于您将 html 放入字符串中，这至少适用于您提供的示例`t`：

```
import re
p = = "TestCentreViewBody\">(\w*)\$(\d*)</span>"
re.findall(p, t) 
```

它确实要求费用值中有一个`$`地方，它返回货币和值的元组（如果金额可以有小数位，您需要将第二个括号中的位修改为例如`([0-9.]*)`.

希望有效。

**编辑：**

如果不知道货币符号（但总有一些符号不是字母或数字）并且如果“测试费：”总是在你可以做之前出现：

```
p = "<span class=\"TestCentreViewLabel\">Test Fee: </span><span class=\"TestCentreViewBody\">(\w*)[^\w\d](\d*)</span>" 
```

但是建议的 BeautifulSoup 解决方案或多或少是一回事。

# jquery - 选择一组元素的最有效方法

> ID：10621655
> 
> 赞同：3
> 
> 时间：2012-05-16T15:22:25.740
> 
> 标签：jquery, css

例如，如果我有一个无序列表，可以说，

```
<ul>
    <li class="foo">Foo</li>
    <li class="bar">Bar</li>
</ul> 
```

我可以选择 foo 作为`$('ul li.foo')`,`$('li.foo')`或`$('.foo')`.

那么哪种方式更有效（如果有的话）以及为什么。还是在选择孩子时指定父母只是为了消除任何冲突，以防其他元素具有相同的类名！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T15:27:34.917

简单的类选择器`.foo`在现代浏览器中是最快的，因为它可以[`getElementsByClassName`](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)在可用的地方使用本机。

这是一个准确显示的[基准：](http://jsperf.com/jq-selector-comparisons)

[![在此处输入图像描述](../Images/da46665153b8b9bea42dadf6101f22fe.png)](http://jsperf.com/jq-selector-comparisons)

您可以在所有对您重要的浏览器中运行该性能测试，并根据结果做出决定。或者只使用最适合您的情况的选择器，因为在现实世界中它不会产生任何明显的差异。

**更新**

现在我们可以从更广泛的浏览器选择中看到性能结果，您可以看到新旧之间的差异（`getElementsByClassName`IE7 和 8 中缺乏）。但是，这些天您可能会从较新的浏览器获得更多的流量，但我不知道您的网站，所以正如我之前提到的，您只需要选择适合您的。如果出于某种原因 90% 的流量来自 IE7，您可能应该使用`li.foo`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T15:32:13.530

`.foo`是现代浏览器中最快的选择器。其他选择器将 select `.foo`，然后过滤掉任何不是`li`then (for `$('ul li.doo')`) 遍历树并确保有`ul`某个地方的东西。

但是，在没有[getElementsByClassName](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)和[querySelectorAll](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)`.foo`的旧浏览器中不会是最快的。比如IE 6。

从长远来看，最快的方法是使用 id，`$('#foo')`如果您知道页面上只有一个，则可以这样做`foo`。

[这是一个基准](http://jsperf.com/selectory-selectorisms)

# php - 在php中将excel转换为xml

> ID：10621661
> 
> 赞同：5
> 
> 时间：2012-05-16T15:23:00.360
> 
> 标签：php, xml, excel

我想读取一个 Excel 文件并从该数据创建一个 XML 文件。在php中可以吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:30:24.460

快速谷歌搜索在 CodePlex 上找到[了这个 PHP](https://github.com/PHPOffice/PHPExcel)项目，你可能想看看

它支持：

> ...写入和读取不同的电子表格文件格式，例如 Excel (BIFF) .xls、Excel 2007 (OfficeOpenXML) .xlsx、CSV、Libre/OpenOffice Calc .ods、Gnumeric、PDF、HTML，...围绕 Microsoft 的 OpenXML 标准和 PHP 构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:27:33.310

是的，但我不知道任何现有的 php 库来转换它们。

有一些关于excel文件格式的资料，所以可以写一些代码

旧的：[http](http://www.openoffice.org/sc/excelfileformat.pdf) ://www.openoffice.org/sc/excelfileformat.pdf 新的：http: [//msdn.microsoft.com/en-us/library/aa338205 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/aa338205(v=office.12).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:55:19.857

这可以给你一个开始：http: [//sourceforge.net/projects/phpexcelreader/](http://sourceforge.net/projects/phpexcelreader/) :)

# c++ - 美化 Win32 应用程序中的工具提示

> ID：10621668
> 
> 赞同：1
> 
> 时间：2012-05-16T15:23:33.873
> 
> 标签：c++, winapi, tooltip

我们有一个 Win32 应用程序，它在工具栏等上显示工具提示。工具提示是带有合并文本的非常基本的矩形。我们希望能够美化这些，例如，具有圆角或渐变填充背景。我找不到控制 Win32 API 集中显示设置的任何东西。有谁知道这是否可行，或者是否有任何第三方库可以创建更好看的工具栏，可以在 C++ Win32 应用程序中使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T16:35:53.877

您必须对[工具提示](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760250(v=vs.85).aspx)窗口进行子类化（通过发送[TB_GETTOOLTIPS](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787354(v=vs.85).aspx)消息来获取它）以覆盖 WM_PAINT 和朋友的处理程序。

请注意，用户可能已经定制了他们的主题、字体、对比度等，以适应视觉困难。通过覆盖它们的绘制方式，您可能会使用户更难阅读它们。另请注意，它们可能不再与主题的其余部分很好地融合在一起。

> “始终尊重系统颜色设置，即用户在控制面板中选择的颜色。用户故意选择这些颜色来为他们的计算机提供他们喜欢的配色方案。而且，您的许多视力障碍用户都故意设置他们可以更清楚地看到方案。（就此而言，始终尊重他们的系统字体，以便喜欢更大字体的人可以阅读您的文本。）“--Joel Spolsky

如果用户在高对比度模式下显示，至少允许默认外观，您可以通过调用[SystemParametersInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947(v=vs.85).aspx)来检测。

# vb.net - 如果并行任务过早停止，则捕获它们

> ID：10621670
> 
> 赞同：1
> 
> 时间：2012-05-16T15:23:34.663
> 
> 标签：vb.net, task-parallel-library

我之前收到了一些关于 parallel.foreach 与 Task.Factory.StartNew 的好建议。我已经实现了两者，并且对两者的效率感到惊讶。我使用以下链接[http://msdn.microsoft.com/en-us/library/dd997415.aspx](http://msdn.microsoft.com/en-us/library/dd997415.aspx)来尝试理解异常并将其合并以在任务因任何原因停止程序将检测到它时得到通知。是否有任何明确的方法可以在没有 wait() 或 waitall 的情况下执行此操作，这将绑定接口和同时运行的其他任务。

```
Try
     pcounter += 1
     Dim factory As Task = Task.Factory.StartNew(AddressOf FileParser.Module1.Main)
        If factory.IsCompleted Then
            appLogs.constructLog("GT19 Task Completed", True, True)
        End If
        Button1.Text = pcounter.ToString & " processes started"
        If Not TextBox1.Text = "" Then
            Module1.inputfolder = TextBox1.Text
        End If

    Catch ae As AggregateException
        For Each ex In ae.InnerExceptions
            appLogs.constructLog(ex.Message.ToString & " ", True, True)
        Next
        Button1.Text = "ERROR RECEIVED"
    Catch ex As Exception
        If ex.Message.Contains("cannot access") Then
            appLogs.constructLog(ex.Message.ToString & " ", True, True)
        End If
        appLogs.constructLog(ex.Message.ToString & " ", True, True)
        appLogs.constructLog(" Cancelling process ", True, True)
    Finally
        Module1.ctsources.Cancel()
    End Try 
```

现在我尝试使用按钮调用和函数对其进行测试：

```
 Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
  Module1.ctsources.Cancel()
  Button2.Text = "process stopped" 
```

在 FileParser.Module1.Main

```
If ct.IsCancellationRequested Then
                sendErrorEmail()
                Exit Sub
End If 
```

但我没有得到任何确认该过程已停止。如果使用 parallel.foreach

```
 Dim po As New ParallelOptions
        po.MaxDegreeOfParallelism = 3
        Parallel.ForEach(fileLists, po, Sub(page) processFile(page)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:52:02.467

您`Catch`不会捕获 , 抛出的异常`Task`，因为`StartNew()`不会阻塞，因此`Catch`当抛出异常时 不再处于活动状态。

如果你想在完成后做某事`Task`，你可以使用[`ContinueWith()`](http://msdn.microsoft.com/en-us/library/dd235663). 其中一些允许您指定继续运行的确切时间：仅当任务成功完成时，如果它发生故障或取消（或它们的组合）。

# javascript - 在 JSF 页面中调用 Jquery datepicker

> ID：10621680
> 
> 赞同：1
> 
> 时间：2012-05-16T15:24:04.670
> 
> 标签：javascript, jquery, jsf, jsf-2, jquery-ui-datepicker

我想像这个[例子](http://jqueryui.com/demos/datepicker/default.html)一样将 Jquery datepicker 实现到 JSF 页面中。到目前为止，我设法使用以下代码将日历调用到 JSF 输入字段中：

```
//For calendar
function calendar(){                                
    // Datepicker
    $('#datepicker').datepicker({
        inline: true,
        showWeek: true,
        firstDay: 1
    });
} 
```

我使用这个输入字段来调用代码：

```
<h:panelGroup>
        <div id="datepicker"></div>
        <h:inputText  onfocus="calendar()" value="#{DatabaseController.formMap['userid']}" >                                       
    </h:inputText>
</h:panelGroup> 
```

当我单击输入字段时，会显示日历。

![在此处输入图像描述](../Images/7ce8d60668a6b6c1f3368ea619963011.png)

我想在 JQuery 网站中实现该示例，但在我的情况下，当我在输入字段之外单击时，日历不会按应有的方式隐藏。我该如何解决这个问题？

最好的祝福彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T18:18:03.213

您可以使用类名而不是 id。把这个 JS 和 end 放在`</h:body>`

```
<script type="text/javascript">
    //For calendar
    $(".datepicker").datepicker({
        inline: true,
        showWeek: true,
        firstDay: 1
    });

</script> 
```

这是带有日历的输入字段。

```
<h:inputText styleClass="datepicker" value="#{DatabaseController.formMap['userid']}" >   </h:inputText> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:35:01.270

您需要创建一个事件函数来`$( "#datepicker" ).datepicker("hide");`在元素失去焦点时运行该行。你可以这样做：

```
$("#dateInputElementIdGoesHere").blur(function() {
  $( "#datepicker" ).datepicker("hide");
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-04-14T11:24:24.617

首先在 JSP 页面中添加这一行：

```
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />

    <script>
      $(function() {
        $( "#form1\\:enddate" ).datepicker();

      });

    </script>

<h:form id="form1">
<div>
     <h:outputLabel for="etmonth" value="End Month" style="font-size:20px"></h:outputLabel>

     <h:inputText id="enddate"  value="" style="width:208px;height:20px;margin-left:28px;"></h:inputText>
</div>  

</h:form> 
```

请注意：

```
description: form1=formid and enddate =inputtext_id 
```

普拉文夏尔马

# javascript - 我的应用帖子标题是灰色的，名称和应用名称不可点击

> ID：10621685
> 
> 赞同：1
> 
> 时间：2012-05-16T15:24:24.040
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-oauth

我有一个发布到动作的应用程序。在我提交动作之前一切都很好，当应用程序在时间轴上发布动作时获得批准后：Alon Conduri 和 Expressio App 在 Icy Tower 上玩了同样的游戏。所以名称（Alon Conduri）和应用名称（Icy Tower）应该是蓝色的并且可以点击。但它全是灰色的，没有什么是可点击的。我真的不知道该怎么做，因为我没有改变任何东西，突然它改变了。这是我使用的代码：

```
var message = {
                "access_token":response.authResponse.accessToken,
                'game': APP_PATH + "movie12.php?url=" + encodeURIComponent(APP_PATH + "movie12.php") // http://cap1dev.conduit-apps.com/Apps/gil/icyTowerFacebook/movie12.html"

            };
            //alert(APP_PATH + "movie12.php?url=" + encodeURIComponent(APP_PATH + "movie12.php"));
            FB.api('/me/conduit_icytower:play', 'post', message, function (response) { 
```

请帮我。

谢谢，

# java - 如何从文件选择器获取完整路径目录

> ID：10621687
> 
> 赞同：14
> 
> 时间：2012-05-16T15:24:26.517
> 
> 标签：java, swing, jfilechooser

我正在使用 Netbeans 7.1.2 创建应用程序，并且正在使用文件选择器，但我不希望文件选择器获取文件，而是希望它返回当前所在目录的完整路径。

![文件选择器的外观](../Images/58b5399a1450e0262c4a9bac2946ea5b.png)

当用户单击此处打开时，我希望它返回完整路径而不是文件。我该怎么做呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-16T15:27:19.783

```
JFileChooser chooser = new JFileChooser();
chooser.setCurrentDirectory(new java.io.File("."));
chooser.setDialogTitle("choosertitle");
chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
chooser.setAcceptAllFileFilterUsed(false);

if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
  System.out.println("getCurrentDirectory(): " + chooser.getCurrentDirectory());
  System.out.println("getSelectedFile() : " + chooser.getSelectedFile());
} else {
  System.out.println("No Selection ");
} 
```

来自[http://www.java2s.com/Code/Java/Swing-JFC/SelectadirectorywithaJFileChooser.htm](http://www.java2s.com/Code/Java/Swing-JFC/SelectadirectorywithaJFileChooser.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T15:28:19.747

如果你想知道当前目录：

```
fileChooser.getCurrentDirectory() 
```

如果要获取选定的文件：

```
fileChooser.getSelectedFile(); 
```

获取文件的绝对路径：

```
file.getAbsolutePath(); 
```

[在此处获取有关文件选择器 API 的](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html#api)所有信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T15:27:26.803

```
File file = fileChooser.getCurrentDirectory();
String fullPath = file.getCanonicalPath(); // or getAbsolutePath() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:30:53.440

设置文件选择器以过滤掉所有非目录文件。

```
yourFileChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T15:46:53.070

```
File f = fileChooser.getCurrentDirectory(); //This will return the directory

File f = fileChooser.getSelectedFile(); //This will return the file 
```

在 netbeans 中，一旦您使用了 JFileChooser 实例旁边的点运算符，自动代码显示（方法显示）工具将提供 JFileChooser 可用方法的完整列表。只需浏览 getter 方法即可找到更多选项，并阅读 netbeans 显示的小型 Javadock。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-28T15:04:21.353

在 JDK 1.8（使用 NetBeans 8.0.1）上，这有效：

```
String path = jOpen.getName(diagOpen.getSelectedFile()); // file's name only

String path = jOpen.getSelectedFile().getPath(); // full path 
```

jOpen 是 jFileChooser。正如 Joachim 所指出的，[File 类不会留下任何东西打开或泄露](https://stackoverflow.com/a/16337369/111110)

# sorting - jqGrid：排序不起作用，在colmodel中指定了索引，可排序，排序类型

> ID：10621690
> 
> 赞同：1
> 
> 时间：2012-05-16T15:24:31.017
> 
> 标签：sorting, jqgrid

不确定我是否错过了一个选项，但我无法使用以下代码对我的 jqGrid 进行排序。我的网格只有一列，我试图使其可排序：

```
$('#jqgrid').jqGrid({
                    url: contextPath + '/js/jqgrid-data.json',
                    datatype: 'json',
                    colNames: ['Destination Name'],
                    colModel: [
                        {   name: 'DestName',
                            sortable: true,
                            sorttype: 'text',
                            index: 'DestName'
                        }
                    ],
                    sortname: 'DestName',
                    sortorder: 'asc',
                    jsonReader: { repeatitems: false },
                    height: 'auto',
                    width: 600,
                    onSelectRow: function(id){
                        alert('Selected row ID ' + id);
                    }
                }); 
```

来自服务器的数据如下所示：

```
{
    "total": 1,
    "page": 1,
    "records": 10,
    "rows": [
        {
            "id": "1",
            "DestName": "Administration Office"
        },
        {
            "id": "2",
            "DestName": "Business Office"
        }
....
} 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:49:04.407

服务器负责排序，而不是 jqgrid。为 jqgrid 指定了选项，以便它将正确的参数传递给服务器。所以你应该在服务器端捕获`sord`和`sidx`参数（用于排序方向和排序字段），并在那里排序。

# android - 在 android 中启动元数据驱动的应用程序

> ID：10621692
> 
> 赞同：0
> 
> 时间：2012-05-16T15:24:37.247
> 
> 标签：android

我有一个包含元数据信息的字符串。基于此信息，我的应用如何通过了解此元数据来启动相关应用？

例如：

如果字符串包含一个 URL ，当我单击一个按钮时，它应该会自动启动一个浏览器。如果字符串有一个指向音频文件的链接，它应该启动一个媒体/音频播放器并开始播放。换句话说，启动的应用程序应该是元数据驱动的。

对此的任何启示都会很棒。

谢谢， 码农网

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:40:00.607

您应该使用 an`Intent`并为其提供`Uri`Android 可以隐式解析的 a 。例如：

```
Uri contactUri = Uri.parse("content://contacts/people/5");
Intent intent = new Intent(Intent.ACTION_VIEW, contactUri);
startActivity(intent); 
```

或者，对于网站示例：

```
Uri websiteUri = Uri.parse("http://www.google.com");
Intent intent = new Intent(Intent.ACTION_VIEW, websiteUri);
startActivity(intent); 
```

任何注册了适当的意图过滤器的应用程序都能够处理这些请求。如果有多个应用程序，将提示用户选择一个，即如果安装了多个网络浏览器，将要求用户选择要使用的浏览器。

# html - 是否可以直接在 HTML 中“嵌入”缓存清单？

> ID：10621699
> 
> 赞同：3
> 
> 时间：2012-05-16T15:24:54.707
> 
> 标签：html, base64, cache-manifest

我最近才开始阅读缓存清单以及它的类型必须如何作为`text/cache-manifest`. 看到这一点，我认为这可能是一个合理的假设：

```
<html manifest="data:text/cache-manifest;base64,..."> 
```

以同样的方式，您可以将它用于`text/html`、`application/pdf`、`image/...`等。从最初的实验来看，它似乎失败了，而且[这个验证器](http://manifest-validator.com/)不喜欢它。

这能行吗？我在其他地方出错了吗？它可以以任何其他方式嵌入吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:00:42.880

好吧，似乎有些人在这点上击败了我，[这里](http://remysharp.com/2011/01/31/simple-offline-application/)：

> 注意：清单文件受同源规则的约束，因为您不能将清单属性指向类似 [http://simpleapp.com/self.manifest](http://simpleapp.com/self.manifest)的内容。同样，**您不能**像某些人在评论中要求的那样对清单文件进行 base64 编码——那真是太棒了！

# joomla - 数据库连接的akeeba备份错误

> ID：10621703
> 
> 赞同：0
> 
> 时间：2012-05-16T15:25:04.773
> 
> 标签：joomla, joomla-extensions

我已经从我的站点获取了 akeeba 备份并将其解压缩。当我尝试转到 index.php 页面时，而不是 akeeba 备份安装屏幕，我收到以下错误消息

```
Database Error: Unable to connect to the database:Could not connect to MySQL 
```

我尝试使用数据库信息编辑 configuration.php 文件，但没有帮助。此外，由于我试图从备份中恢复，我只是创建了一个空白数据库并尝试连接到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:44:04.177

你到底想做什么？恢复使用 Akeeba 备份的站点？

如果是这样，您无法解压缩 - 您需要下载 kickstart.php。将其放在您希望备份与备份一起出现的根目录中。然后转到[http://yoursite.com/futurejoomlaroot/kickstart.php](http://yoursite.com/futurejoomlaroot/kickstart.php)，这应该可以帮助您完成安装过程。

Kickstart.php 应该在这里找到： [https ://www.akeebabackup.com/download/official/akeeba-kickstart.html](https://www.akeebabackup.com/download/official/akeeba-kickstart.html)

注意 - 如果您要从本地主机转到远程主机，您可能还需要在远程站点上添加一个数据库用户（连同该空白数据库，并授予该用户对该数据库的访问权限）。还要检查您将其安装到的文件夹的权限。

如果我不在基地，请给我们更多信息（一步一步会很有用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:14:43.270

您没有提到哪个版本的 Joomla 或哪个版本的 Akeeba，但上面的内容非常准确。但是，您不需要 kickstart。

如果您从备份中恢复 - 只需将其放在您的 joomla 文件夹中并导航到该文件夹​​/域。

例如，在托管场景中，如果您已将域根目录中的所有文件解压缩，请转到“www .yourdomain.com” - 无需将 index.php 放在其末尾。然后安装过程将毫无问题地开始。您看到这一点是因为您正尝试直接访问一个页面并且尚未建立 SQL 数据库连接。

如果您正在处理本地副本，它只会导航到安装它的目录。

不要包含 index.php，你应该没问题。

# jquery - jQuery 删除淡入淡出，只显示？

> ID：10621711
> 
> 赞同：-3
> 
> 时间：2012-05-16T15:25:25.900
> 
> 标签：jquery

我将如何从中删除淡入/淡出并进行表演？例如，我只想在没有任何效果的情况下直接将 ajax 内容拉入...或将噱头放入 div...#mc_calendar。

我的代码：

```
function buildCal (responseHTML){
// where are we going to put our AJAX calendar?
var target = jQuery('#mc_calendar');

//how fast do we want it to fade out?
target.fadeOut(100, function(){
    target.empty();
    target.html(responseHTML)

    // how fast do we want it to fade in?
    target.fadeIn(50);
    initMonthLinks(target)
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:29:21.103

如果您是单线解决方案的粉丝：

```
initMonthLinks(target.hide().html(responseHTML).show()); 
```

但是，隐藏和显示在这里没有任何意义。如果`target`始终可见，请仅使用：

```
initMonthLinks(target.html(responseHTML)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:28:08.623

```
function buildCal (responseHTML){
    // where are we going to put our AJAX calendar?
    var target = jQuery('#mc_calendar');
    target.html(responseHTML);
    initMonthLinks(target);
}); 
```

# node.js - Node.JS HTTPS 客户端请求不会根据给定的 ca 证书验证服务器证书

> ID：10621715
> 
> 赞同：2
> 
> 时间：2012-05-16T15:25:35.707
> 
> 标签：node.js, https, client, ssl-certificate

我正在尝试在 NodeJs 中创建一个客户端，该客户端将验证它连接到的服务器证书。我还没有找到有关该主题的示例/文档，并且 [https://github.com/vanjakom/JavaScriptPlayground/blob/master/client_server_ssl_nodejs/client.js](https://github.com/vanjakom/JavaScriptPlayground/blob/master/client_server_ssl_nodejs/client.js)的示例 不会使服务器失败，尽管服务器证书没有' t 遵守客户使用的 ca.crt。

任何人都可以建议一种方法来验证客户端的服务器证书吗？

来自站点来源的稍微修改的代码：

```
var https = require('https');
var fs = require("fs");

var options = {
    host: 'localhost',
    port: 8000,
    path: '/test',
    method: 'GET',
    //key: fs.readFileSync("keys/userB.key"),
    //cert: fs.readFileSync("certs/userB.crt"),
    ca: fs.readFileSync("ca.crt")

    ,rejectUnauthorized:true,
    requestCert:true,
    agent:false
};

var req = https.request(options, function(res) {
    console.log("statusCode: ", res.statusCode);
    console.log("headers: ", res.headers);

    res.on('data', function(d) {
        console.log(""+d);
    });
});

req.end();

req.on('error', function(e) {
    console.error(e);
}); 
```

# java - ModelAndView 对象未返回到 jsp

> ID：10621717
> 
> 赞同：2
> 
> 时间：2012-05-16T15:25:40.390
> 
> 标签：java, jsp, tomcat, spring-mvc

我试图从控制器返回一个简单的字符串“HelloSpring”到jsp。控制器是

```
package it.polito.ai.e4;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.portlet.ModelAndView;

@Controller
public class HelloSpringController
{
@RequestMapping("/hello")
public ModelAndView helloSpring(HttpServletRequest request,
        HttpServletResponse response)
{
    String message = "HelloSpring";
    return new ModelAndView("hello", "message", message);
}
} 
```

jsp是

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Hello page</title>
</head>
<body>
    <%=(String)request.getAttribute("message")%>
</body>
</html> 
```

当我在 Tomcat 7 上执行此操作时，我在页面正文上得到“null”字符串。我的 web.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
version="3.0">
<display-name>ai4</display-name>
<servlet>
    <servlet-name>ai4</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>ai4</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T19:30:41.087

尝试导入`org.springframework.web.servlet.ModelAndView`而不是`org.springframework.web.portlet.ModelAndView`. :)

此外，正如 Sumit Desai 所提到的，从 Spring 3 开始，大多数人都这样编写控制器方法：

```
@RequestMapping("/hello")
public String helloSpring(Model m)
{
    m.addAttribute("message", "HelloSpring");
    return "hello";
} 
```

这只是风格，你所做的也很有效。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:14:46.847

您可能错误地配置了视图解析器。特别是，我会仔细检查您的视图解析器的“viewClass”属性。发布您的弹簧配置，以便我们检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T18:57:19.467

${message} 应该适合你。此外，看起来您正在使用 Spring 3.x。因此，更好的方法是使用 ModelMap object ，它允许您将多个模型对象传递给 JSP（在这种情况下，您的方法 helloSpring 的返回类型应该是 String，这将对应于 JSP 页面的名称），尽管您的也没有错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-11T08:37:00.920

我也面临着类似的问题，我的程序已经在处理此处提到的答案中的解决方案。我在找到解决方案时遇到了这篇文章[http://www.mkyong.com/spring-mvc/modelandviews-model-value-is-not-displayed-in-jsp-via-el/](http://www.mkyong.com/spring-mvc/modelandviews-model-value-is-not-displayed-in-jsp-via-el/)。因此，根据链接，我在我的 jsp 文件顶部添加了一条语句“<%@ page isELIgnored="false" %>”，它开始运行良好。希望能帮助到你。

# ruby - 如何在哈希数组中找到由多个键分组的最大值？

> ID：10621721
> 
> 赞同：4
> 
> 时间：2012-05-16T15:25:55.410
> 
> 标签：ruby, arrays, hash, max, uniq

拥有具有这种结构的数据。将按“c”升序排列。

```
[ { 'a' => 1, 'b' => 1, 'c' =>  1, 'd' => '?' },
  { 'a' => 1, 'b' => 1, 'c' =>  2, 'd' => '?' },
  { 'a' => 1, 'b' => 1, 'c' =>  3, 'd' => '?' },
  { 'a' => 1, 'b' => 2, 'c' =>  4, 'd' => '?' },
  { 'a' => 1, 'b' => 2, 'c' =>  5, 'd' => '?' },
  { 'a' => 2, 'b' => 1, 'c' =>  6, 'd' => '?' },
  { 'a' => 2, 'b' => 1, 'c' =>  7, 'd' => '?' },
  { 'a' => 2, 'b' => 1, 'c' =>  8, 'd' => '?' },
  { 'a' => 2, 'b' => 2, 'c' =>  9, 'd' => '?' },
  { 'a' => 2, 'b' => 2, 'c' => 10, 'd' => '?' } ] 
```

想要由“a”和“b”的每个唯一组合分组的“c”最大值数组。

```
[ { 'a' => 1, 'b' => 1, 'c' =>  3, 'd' => '?' },
  { 'a' => 1, 'b' => 2, 'c' =>  5, 'd' => '?' },
  { 'a' => 2, 'b' => 1, 'c' =>  8, 'd' => '?' },
  { 'a' => 2, 'b' => 2, 'c' => 10, 'd' => '?' } ] 
```

其他键需要保留，但与转换无关。到目前为止，我能想到的最好的办法是反转数组（因此按“c”降序排列），uniq 按“a”和“b”，然后再次反转数组。但我依赖于 uniq_by 的实现，总是返回找到的第一个唯一项目。规范没有这么说，所以我担心依赖这种行为，因为它可能会在未来的版本中改变。还想知道这是否可能是一种非常低效的方法。

```
@data.reverse!.uniq!{|record| [record['a'],record['b']]}.reverse! 
```

有没有更好更有效的方法来做到这一点？如果您确实有更好的方法，您能否也请解释一下，而不是只给我一个我可能无法破译的超级讨厌的单行字。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T15:38:16.970

这实际上相当容易：

```
a.group_by { |h| h.values_at("a", "b") }.map { |_, v| v.max_by { |h| h["c"] } } 
```

或者使用更好的格式：

```
a.group_by do |h|
  h.values_at("a", "b") 
end.map do |_, v| 
  v.max_by { |h| h["c"] }
end 
```

说明：首先我们使用[Enumerable#group_by](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-group_by)来创建 a `Hash`，其中 `"a"`和`"b"`（用[Hash#values_at](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-values_at)提取）作为键，所有以该组合作为值的散列。[然后我们映射这个散列，忽略键并使用Enumerable#max_by](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-max_by)`"c"`从数组中选择具有最大值的元素。

# architecture - 如果不等于 PC 地址则分支

> ID：10621722
> 
> 赞同：0
> 
> 时间：2012-05-16T15:25:58.390
> 
> 标签：architecture, branch, cpu-architecture, program-counter

嘿有一个关于分支指令的问题。

如果不等于位于 0x00002000 (PC) 的指令和以下指令，我有一个分支：

RS（寄存器 4）= 0 RT（寄存器 3）= 7

因此分支不等于，然后应遵循以下等式：

if (rs!=rt) goto (PC+offset)

PC 为 0x00002000，偏移量为 0000000000001000

我所做的是将偏移量转换为 32 位，左侧只有一个额外的 16 个 0，但我不知道如何添加这两个，并且讲座幻灯片不是特别清楚或给出如何执行此操作的示例。 ..所以我只是想知道如何才能获得新PC？

非常感谢任何帮助，谢谢！

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:08:31.007

新的 PC 将是您的分支指令之后的指令地址，加上偏移量。

所以在这种情况下，如果分支指令是 4 个字节，偏移量是 0x1000，那么分支指令执行后新的 PC 将是 0x3004。

这是关于 PC 相对寻址的维基百科条目[http://en.wikipedia.org/wiki/Addressing_mode#PC-relative](http://en.wikipedia.org/wiki/Addressing_mode#PC-relative)

# algorithm - 二维数组井字棋人工智能算法

> ID：10621727
> 
> 赞同：1
> 
> 时间：2012-05-16T15:26:28.877
> 
> 标签：algorithm, tic-tac-toe

我想用数组而不是启发式或树结构制作井字游戏。

因为有什么算法可以告诉你“可能的人工智能”吗？不一定是ai，而是电脑选点。

谢谢。

# c# - 按名称获取文件扩展名

> ID：10621733
> 
> 赞同：0
> 
> 时间：2012-05-16T15:26:57.967
> 
> 标签：c#, combobox, io, delete-file

我想删除一个带有名称和包含文件夹的文件；当我说名字时，我的意思是没有扩展名。

这是我知道的方式。（在你的帮助下，它会起作用）

```
//the  extension string doesn't work properly.Here I need your help
string extension = Path.GetExtension(@"C:\Projects_2012\Project_Noam\Files\ProteinPic" + comboBox1.SelectedItem.ToString());
string fileLoc = @"C:\Projects_2012\Project_Noam\Files\ProteinPic\" + comboBox1.SelectedItem.ToString() + extension;
if (File.Exists(fileLoc))
{
    File.Delete(fileLoc);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:30:21.720

您可以使用[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/07wt70x2)并使用 an`*`代替扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:35:55.303

作为您的代码的精确翻译，这就是我要写的：

```
string extension = @".txt"; // For example;
string basePath = "@C:\SomePath\";
string pathWithoutExtension = Path.GetExtension(Path.Combine(basePath, comboBox1.Text));
string fullPath = Path.ChangeExtension(pathWithourExtension, extension);

if (!File.Exists(fullPath))
    // Do stuff...
else
    // Do other stuff... 
```

完毕。

# actionscript-3 - 如果您无法访问/存根私有接口，您如何在 AS3 中存根外部接口（例如，Web 服务）？

> ID：10621740
> 
> 赞同：1
> 
> 时间：2012-05-16T15:27:20.317
> 
> 标签：actionscript-3

我在有效测试进行 Web 服务调用的 AS3 类时遇到了概念上的困难。采取以下示例代码：

```
class ServiceWrapper extends EventDispatcher
  public function doStuff():void {
    var loader:URLLoader = new URLLoader;
    var request:URLRequest = new URLRequest();
    request.url = 'http://myapiendpoint.com/foo';
    var self:ServiceWrapper = this;
    loader.addEventListener(Event.COMPLETE, function(event:Event):void {
      if(loader.data == 'success') {
        this.dispatchEvent('stuffDone');
      } else {
        this.dispatchEvent('stuffNotDone');
      }
    });
    loader.load(request);
  }
end 
```

我只是想测试一下，如果服务返回“成功”，则实例分派一个`stuffDone`事件类型，否则分派一个`stuffNotDone`.

看起来如果不在应用程序代码中公开“测试接口”，就无法模拟 Web 服务响应。例如，我想到了以下示例：

*   将其设为`loader`公共属性或从公共返回，并在测试中将其替换为模拟。
*   使`loader`或 生成它的函数受保护并定义一个私有类，该类扩展`ServiceWrapper`以提供对`loader`.

第一个选项以非常丑陋的方式修改了界面。它可以通过文档解决（或者可能通过命名空间；不太确定如何去做），如果这是唯一的选择，我很好，但我觉得应该有更好的方法。

第二个稍微更好地保留了我认为的接口，但在测试中需要大量额外的代码。

对于我忽略的问题，是否有一些解决方案或观点？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:39:29.373

您的第一个选择应该是要走的路：模拟装载机。

始终建议不要在可重用类中包含对象创建代码，除非创建的实例严格保持私有并且仅与创建它们的类交互 - 使用外部服务时绝不会出现这种情况。相反，将加载器作为构造函数参数传递 - 这样，您可以确定在调用它时它已被创建。

对象创建*应该*发生在您的主分区内，如果不是通过依赖注入框架，即必须为每个新应用程序重写的系统部分。

也不需要额外的文档：您需要的所有文档都在您的单元测试中。

# php - 本地主机子文件夹 PHP

> ID：10621745
> 
> 赞同：2
> 
> 时间：2012-05-16T15:27:33.743
> 
> 标签：php, directory, localhost

我的本地主机网站有问题。

所以我在这里解释我的问题，我在 localhost/sg/ 中有一个包含所有 php 文件的文件夹。例如，如果我想显示图片，我应该使用 /sg/upload/myfile.jpg。

但是，如果我将我的 php 文件上传到我的服务器上，那将无法正常工作，因为我的 www 文件夹中没有 /sg/ 文件夹。

所以我的问题是，有可能有一个脚本可以管理离线和在线？

如果您有疑问，请不要犹豫。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:29:05.743

您可以使用配置文件来设置图像和其他文件的路径，具体取决于站点是本地站点还是生产站点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:37:05.427

设置相对于您的站点路径的上传路径，例如定义一个常量：

离线：

```
<?php
define ("SITEPATH","http://localhost/sg/upload/");
<? 
```

在线的：

```
<?php
define ("SITEPATH","http://www.yoursite.com/upload/");
<? 
```

然后使用这个常量（SITEPATH）来定位文件上传目的地

```
<?php
$destination = SITEPATH.$filename;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:34:58.897

我认为您的问题与您的 Web 服务器（Apache？）比 PHP 更相关。

我想您的问题的答案是您的（Apache？）文件中的正确配置，更具体地说是在生产服务器和开发服务器中使用 DocumentRoot 指令

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:40:26.973

您不能也将图像文件夹上传`/sg/upload/`到您的生产服务器吗？发布程序时，依赖项也需要发布。在您的情况下，该文件夹是您项目的依赖项。要么您需要使用 John 建议的配置文件来为生产环境指定不同的上传文件夹，要么您也需要简单地上传该文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T15:44:36.283

通常只有 basedir 不同，但站点结构不同：

```
development: http://localhost/project-blue/

production:  http://project-blue.example.com/ 
```

在该目录中放置一个 PHP 文件，假设`index.php`：

```
http://localhost/project-blue/index.php 
```

如果它应该显示一个名为 的上传图片的 URL `upload/picture.jpg`，您只需要正确链接它：

```
<img src="upload/picture.jpg"> 
```

这将使浏览器获取此 URL：

```
 http://localhost/project-blue/upload/picture.jpg 
```

这将适用于开发和生产：

```
 http://project-blue.example.com/upload/picture.jpg 
```

所以实际上你在这里不需要关心太多。

# jquery - jquery 下拉 .val .html

> ID：10621749
> 
> 赞同：-1
> 
> 时间：2012-05-16T15:27:35.160
> 
> 标签：jquery

我正在尝试填充下拉列表

我有以下内容：

```
 $('#dd_deg ').append($('<option></option>').val('hello').html('va1')); 
```

.val 和 .html 的用途是什么。我看到 val1 是下拉菜单中显示的内容，但 .val 的目的是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:30:22.250

根据文档，[.val(value)](http://api.jquery.com/val/)

> 设置匹配元素集中每个元素的值。

和[.html(htmlString)](http://api.jquery.com/html/)

> 设置匹配元素集中每个元素的 HTML 内容。

您通常使用 val 获取/设置输入元素的值，使用 html 获取/设置任何元素的内部 html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:28:25.663

`val()`设置`value`元素的属性，而不是`html(val)`设置元素的内部 HTML，坦率地说，应该替换为，`text()`因为它是纯文本更改/设置。

顺便说一句，访问 jQuery API 站点可以很容易地回答这个问题，使用（在大多数情况下）只需使用以下方法：

```
http://api.jquery.com/<name of method you want information about>/ 
```

因此，在上述问题中，您将使用 URL：

```
http://api.jquery.com/val/ 
```

参考：

*   [`html()`](http://api.jquery.com/html/).
*   [`text()`](http://api.jquery.com/text/).
*   [`val()`](http://api.jquery.com/val/).

# android - Java BufferedImage / Android 位图

> ID：10621751
> 
> 赞同：4
> 
> 时间：2012-05-16T15:27:47.220
> 
> 标签：android, bitmap, desktop, bufferedimage

我正在开发一个在 Android 应用程序和 Java 桌面应用程序中工作的小库。我需要使用 BufferedImage 从图像中获取 RGB 值，但我不能在 Andorid 中使用 BufferedImage。反之亦然，位图。

有没有办法在Android中实现BufferedImage或在Java桌面应用程序中实现Bitmap？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T03:38:46.983

您可以让您的库不使用任何一个，但您定义的某个接口具有您需要的所有功能。然后对于 Android 版本，您使用 Bitmap 对象实现接口，而对于桌面版本，您使用 BufferedImage 实现接口。使用您的库的调用者传入与调用者正在使用的平台相对应的接口的实现，并且您的代码不必担心特定于平台的内容。

当然，这是否值得努力取决于图像对象在您的库中的使用范围。如果只是一两行代码需要读取图像，可能不值得这么麻烦，其他答案中给出的反射方法可能会更简单一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:33:26.990

你试过这个吗？:[如何在 android 中加载 BufferedImage？](https://stackoverflow.com/questions/5311163/how-to-load-bufferedimage-in-android)

当你有一个位图时，你可以使用[getPixel](http://developer.android.com/reference/android/graphics/Bitmap.html#getPixel%28int,%20int%29)方法来查找颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:30:40.727

您可以拥有尝试调用特定于平台的库的包装器代码，并在它们不存在时捕获 NoClassDefFoundError。通过这种方式，您可以动态确定要使用的适当 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T08:02:16.153

使用反射查找要使用的类以加载位图。成功后，从现在开始使用。

另一种方法是创建自己的图像解析器。以下是解析 png 文件的一些链接：

[http://www.java-gaming.org/index.php/topic,24202](http://www.java-gaming.org/index.php/topic,24202)。

[http://hg.l33tlabs.org/twl/file/tip/src/de/matthiasmann/twl/utils/PNGDecoder.java](http://hg.l33tlabs.org/twl/file/tip/src/de/matthiasmann/twl/utils/PNGDecoder.java)

[http://www.java2s.com/Code/Java/2D-Graphics-GUI/PNGDecoder.htm](http://www.java2s.com/Code/Java/2D-Graphics-GUI/PNGDecoder.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-17T05:47:54.717

也许你需要这个：import androidx.compose.ui.graphics.toComposeImageBitmap

# java - String到BigNumber的转换，具体解决方法

> ID：10621753
> 
> 赞同：0
> 
> 时间：2012-05-16T15:27:54.723
> 
> 标签：java, type-conversion, bigdecimal, bignum

我正在编写一个 Java 程序来处理一些伪 xml 格式的电子税表。
所产生的要支付或退还的税款采用以下格式： 13 字符长 无符号整数字符串，其中最后两位代表美分，即两位小数。结果是肯定的（付款）还是否定的（退款）在别处注明，因此这里不相关。

我需要将此字符串转换为 BigNumber 并得出以下解决方案，这是一个好方法吗？你知道更好的解决方案吗？

```
public class BigDecimalTest {
    public static void main(String[] args) {

        // 0000000043272  for EUR 432.72
        String s = "0000000043272";    

        //mantissa is the amount as-is, exponent-2 since working with 2 decimal places.
        BigDecimal bd = new BigDecimal(s+"E-2"); 

        System.out.printf("%s: BigDecimal %sE-2 toString: %s\n", s, s, bd.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:37:48.743

您还可以使用：

```
BigDecimal bd = new BigDecimal("1234").movePointLeft(2); 
```

创建第二个实例，但更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:33:29.120

另一种选择：

```
// making use of the constructor scale parameter
BigDecimal bd = new BigDecimal(new BigInteger(s), 2); 
```

# matlab - 识别数据异常值

> ID：10621756
> 
> 赞同：0
> 
> 时间：2012-05-16T15:28:04.667
> 
> 标签：matlab

我有一个组织成结构的数据集。我有大量传感器，每个传感器都有四个读数`a`，`d`因此结构`D`包含`D.sensorID`、`D.a`、`D.b`、`D.c`和`D.d`。我正在寻找读数分布中的异常值。我已经绘制了数据并选择了限制并编写了一个脚本，该脚本可以识别具有超出这些限制的读数的传感器 ID，并将它们保存到一个数组中：

```
 aMax = 5;
    aHighIndices = find(D.a>aMax);
    aMin = 0;
    aLowIndices = find(D.a<aMin);
    aHighLength = size(aHighIndices);
    for i = 1:aHighLength
    A_hi(i) = D.sensorID(aHighIndices(i));
    end 
```

这是重复的：`a_Hi`, `a_Low`, `b_Hi`, 等等...然后我将结果拼凑在一起：

`outliers = [A_hi; A_low; B_low; B_hi; C_low; C_hi; D_low; D_hi];`

有没有更简洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:44:58.947

**1.** 您遍历每个读数数组（*即*向量）两次`find`：一次用于查找高异常值，一次用于查找低异常值。您可以通过以下方式在一次迭代中完成：

```
a_outlier_indices = find(D.a < aMin | D.a > aMax); 
```

**2.** 另一件事：一般来说`for`在 MATLAB 中是相当昂贵的，尝试使用 MATLAB 语法的内置能力来产生相同的结果。更具体地说，MATLAB 允许您使用索引向量从另一个向量中提取子向量：

```
a_outliers = D.sensorID(a_outlier_indices); 
```

简单地`D.a`输入一个索引向量会产生所需的异常值向量。

**3.** 另外，一个良好实践的建议：考虑将数组存储`a`在`d`向量的单元数组而不是单独的数组中，例如：`D.readings = {a, b, c, d}`，并定义相应的阈值单元数组（`thr`在我的示例中），因此您可以使用环形：

```
thr = {[aMin, aMax]; [bMin, bMax]; [cMin, cMax]; [dMin, dMax]}
outliers = cell(4, 1);
for i = 1:4
   outlier_indices = find(D.readings{i} < thr{i}(1) | D.readings{i} > thr{i}(2));
   outliers{i} = D.sensorID(outlier_indices);
end 
```

现在您将拥有单元格数组中的所有内容`outliers`。要访问*a*异常值使用`outliers{1}`，访问*b*异常值使用`outliers{2}`，等等...

`for`您当然可以通过循环内的简单连接将所有内容（如问题中的）拼凑到一个向量中：

`outliers = [outliers, D.sensorID(outlier_indices)];`

而不是`outliers{i} = ...`声明。

附言

我假设使用最小/最大阈值是您在查找异常值时想要使用的。还有其他方法可以找到异常值，但这些方法会产生不同的结果。

# excel - Excel VBA多列列表框添加非连续范围

> ID：10621758
> 
> 赞同：2
> 
> 时间：2012-05-16T15:28:08.397
> 
> 标签：excel, vba, listbox

我试图弄清楚如何将连续的非连续单元格范围添加到多列列表框中，但只有下面的第二行有效。

```
lbxSelectable.List = Sheets("DB").Range("A1,B1,C1").Value
lbxSelectable.List = Sheets("DB").Range("A1:C1").Value 
```

是否有任何有效的功能可以让我连续*选择某些列*并将其粘贴在*多*列列表框的条目中？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:41:49.823

要在多列列表框中连续显示不连续的单元格范围，您必须首先创建一个数组，然后将其分配给`.list`列表框。这是一个例子。

```
Option Explicit

Private Sub CommandButton1_Click()
    Dim Ar() As String
    Dim rng As Range, cl As Range
    Dim i As Long

    Set rng = Range("A1,C1,E1")

    i = 1

    For Each cl In rng
        ReDim Preserve Ar(1, 1 To i)
        Ar(1, i) = cl.Value
        i = i + 1
    Next

    With ListBox1
        .ColumnCount = i - 1
        .ColumnWidths = "50;50;50"
        .List = Ar
    End With
End Sub 
```

**快照**

![在此处输入图像描述](../Images/18191f0b95828b61d261e7213d942a64.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-24T20:41:39.493

**一、显示不连续的列数据，不循环**

除了*Siddharth 的有效解决方案之外，我还展示了一种***无需任何循环**的灵活方法。此外，我添加了不仅可以显示一个数据行，还可以显示*更多数据行*以及定义变化的起始行的可能性（例如`m=2`，在本例中：-）。

**逐步应用的方法**

在完全限定 section 中的范围引用`[0]`，定义 section 中的起始行和结束行后`[1]`，section通过使用►方法的*高级过滤可能性*`[2]`将所需列分配给变量数据字段数组来完成主要工作•)：*`Application.Index`*

 **   a) 首先它获取从顶行 1 到右列 E 的整个数据范围内容，
*   b) 最终从第二行 m（即省略标题行）开始到 lastrow n 和
*   c) 最后通过该`Application.Index`方法过滤第 1、3、5 列（= A、C、E）。

部分`[3]`用数组中的数据填充列表框，这些数据必须是*二维的*。如果数据集有多个项目“行”，它们将被分配给列表框的 ►<code>.List 属性 - 参见。[3]b) 节。

但是，如果只有**一个**数据行，则数组`v`将丢失一个所需的维度，因此必须通过该方法*转置*`Application.Transpose`（更改行和列，但重新获得第二个维度！），然后分配给列表框 ►<code >.Column 属性。

•) 参见。[在没有循环或 API 调用的数据字段数组中插入第一列](https://stackoverflow.com/questions/51688593/excel-vba-insert-new-first-column-in-datafield-array-without-loops-or-api-call/51714153#51714153)

```
Option Explicit                                    ' declaration head of code module

Private Sub CommandButton1_Click()
' [0] Declare variables start row, lastrow, (variant) datafield array, worksheet   
      Dim m&, n&, v, ws As Worksheet               ' data types Long, Long, Variant, WorkSheet
      Set ws = ThisWorkbook.Worksheets("mySheet")  ' << change to your sheet name
' [1] define Start Row m and Last Row n (based on items in column A)
      m = 2: n = ws.Range("A" & ws.Rows.Count).End(xlUp).Row
' [2] assign data to variant datafield array
      v = Application.Index(ws.Range("A1:E" & n).Value2, Evaluate("row(" & m & ":" & n & ")"), Array(1, 3, 5))
' [3] fill ListBox with array contents
  With ListBox1
      .ColumnWidths = "50;50;50"
      If m = n Then                         ' Case a) SINGLE data row only (needs transposed data)
         .ColumnCount = UBound(v, 1)        '         counts 1st dimension of v
         .Column = Application.Transpose(v) '      << assign transposed array v to listbox COLUMN property
      Else                                  ' Case b) several data rows
         .ColumnCount = UBound(v, 2)        '         counts 2nd dimentson of v
         .List = v                          '      << assign array v to listbox LIST property
      End If
  End With
End Sub 
```

**二、简单的替代方案`ColumnWidths`**

当然，可以收集整个数据范围的列，但是通过属性为要在显示中省略的列`A:E`定义**零宽度：**`ColumnWidths`

```
With ListBox1
  .ColumnWidths = "50;0;50;0;50"
  ' ...
End With 
```

好好享受 ：-）*

# jquery - 如何访问特定的嵌套复选框组

> ID：10621765
> 
> 赞同：0
> 
> 时间：2012-05-16T15:28:22.623
> 
> 标签：jquery

这是带有许多复选框的复杂表单的一部分...

```
<div class="listbuilder-column">
    <h3 class="con_act_list">Activity</h3>
    <ul id="activity">
        <li>
            <input type="checkbox" id="con_act_1" name="con_act[]" class="con_act" value="fabricate"/>
            Fabricate roofs
        <li>
        <li>
            <input type="checkbox" id="con_act_2" name="con_act[]" class="con_act" value="buy-In"/>
            Buy-in roofs
        <li>
        <li>
            <input type="checkbox" name="con_act[]" class="con_act" value="install"/>
            Install roofs
        <li>
    </ul>
</div>
<div class="listbuilder-column"> ........   more checkboxes </div> 
```

我想知道如何确定这些复选框的状态，即选中与否。我正在使用`$(.con_act input:checked").length`，但复选框嵌套在 div ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:31:20.447

让你的特定`div`有一个 ID（即`specdiv`），你的选择器应该是

```
$("#specdiv [type=checkbox]:checked").length 
```

或者，既然您已经拥有 的 ID `ul`，请执行以下操作：

```
$("#activity [type=checkbox]:checked").length 
```

这是一个用于玩弄可能性的 jsfiddle：http: [//jsfiddle.net/7WnBG/](http://jsfiddle.net/7WnBG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:53:21.063

要查找选中复选框的数量：

```
$('input.con_act:checkbox:checked').length; 
```

这首先找到`input`元素，然后按类名过滤，然后只选择那些实际上属于的元素，`type="checkbox"`最后只选择在执行 jQuery 行时检查的那些元素。

嵌套级别几乎无关紧要，但您可以轻松地仅搜索特定父元素中的嵌套级别：

```
$('#activity').find('input.con_act:checkbox:checked').length;
/* or: */
$('#activity input.con_act:checkbox:checked').length; 
```

# css - CSS 跨度向左浮动

> ID：10621768
> 
> 赞同：4
> 
> 时间：2012-05-16T15:28:27.977
> 
> 标签：css, css-float

所以我有一个 div 和两个跨度：

```
<div class="A">
    <span class="B"></span>
    <span class="C"></span>
    <span class="clear"></span>
</div> 
```

假设 B 和 C 有足够的内容。CSS 片段是：

```
.A { position: absolute; } /* I need this to be absolute */
.B, .C { float: left; }
.clear { clear: both; } 
```

但我不断得到正确图像的布局，而我希望它像第一张图像的布局（请参阅下图） ![在此处输入图像描述](../Images/6dc146e98536702b780da84f33f22c94.png)

请帮我。如果您能解释一下为什么会发生这种情况以及为什么我的代码没有像我预期的那样工作，那就更好了。浮动实际上是如何工作的。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T15:30:58.963

~~您在 html 中的类是大写的，但不是在 CSS 中？~~

编辑：

```
.A { position: absolute; border: 1px solid blue; } 
.B, .C { float: left; border: 1px solid red; width: 100px; height: 20px; }
.C { height: 100px; }
.clear { clear: both; }
```

```
<div class="A">
    <span class="B"></span>
    <span class="C"></span>
    <span class="clear"></span>
</div>
```

[JSFiddle 上的演示](http://jsfiddle.net/89v9U/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:32:02.997

该类区分大小写，“a”不是“A”！

更改您的 HTML：

```
<div class="a">
    <span class="b"></span>
    <span class="c"></span>
    <span class="clear"></span>
</div> 
```

此外，浮动的工作取决于宽度。给 b 和 c div 一个宽度...

# rabbitmq - 使用 RabbitMQ 的 MassTransit：MT 在第二个请求/响应时超时

> ID：10621773
> 
> 赞同：2
> 
> 时间：2012-05-16T15:28:56.647
> 
> 标签：rabbitmq, masstransit

使用 MassTransit 和 RabbitMQ 处理请求/响应场景。当做一个简单的请求/回复时，它会工作多次。如果我在请求处理程序中发布一条消息，它适用于第一个请求，但请求处理程序永远不会在第二个请求上被调用并最终超时并且消息保留在服务器队列中。

好像我错过了什么；配置可能？

该项目位于[https://bitbucket.org/joeyoung/enterprise-rabbitmq](https://bitbucket.org/joeyoung/enterprise-rabbitmq)

客户端配置：

```
ObjectFactory.Configure(cfg =>
{
    cfg.AddRegistry<WebRegistry>();
    cfg.For<IServiceBus>().Singleton().Use(o => ServiceBusFactory.New(sbc =>
    {
        // configure the bus
        sbc.UseRabbitMqRouting();
        sbc.ReceiveFrom("rabbitmq://localhost/entrprise_client");

        // finds all the consumers in the container and register them with the bus
        sbc.Subscribe(x => x.LoadFrom(ObjectFactory.Container));
    }));
}); 
```

服务器配置：

```
var container = new Container(cfg =>
{
    cfg.Scan(scan =>
    {
        scan.Assembly("Server.MessageHandlers");
        scan.AddAllTypesOf<IConsumer>();
    });
});

var bus = ServiceBusFactory.New(sbc =>
{
    // configure the bus
    sbc.UseRabbitMqRouting();
    sbc.ReceiveFrom("rabbitmq://localhost/enterprise_server");

    // finds all the consumers in the container and register them with the bus
    sbc.Subscribe(x => x.LoadFrom(container));
});

// finally inject the bus into the container
container.Inject(bus); 
```

发送请求：

```
bus.PublishRequest(new CreateProductCommand(correlationId, model.Name, model.Description, model.Price), x =>
{
    x.HandleTimeout(10.Seconds(), () => { timedOut = true; });
    x.Handle<CreateProductCommand.Response>(response => { productId = response.Id; });
}); 
```

消费请求：

```
public void Consume(IConsumeContext<CreateProductCommand> context)
{
    Console.Out.WriteLine("Consuming Create Product");

    // simulate creating a product
    var productId = "products/1234";

    bus.Publish(new ProductCreatedEvent(productId));

    context.Respond(new CreateProductCommand.Response(context.Message.CorrelationId) { Id = productId});
} 
```

讯息：

```
public class CreateProductCommand : CorrelatedBy<Guid>
{
    public Guid CorrelationId { get; private set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public decimal Price { get; set; }

    public CreateProductCommand(Guid correlationId, string name, string description, decimal price) 
    {
        CorrelationId = correlationId;
        Name = name;
        Description = description;
        Price = price;
    }

    public class Response : CorrelatedBy<Guid>
    {
        public Guid CorrelationId { get; private set; }

        public string Id { get; set; }

        public Response(Guid correlationId)
        {
            CorrelationId = correlationId;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:54:26.547

感谢 Chris 建议在 IConsumeContext 上使用 Bus。这似乎已经解决了它。

因此，不是在处理程序的构造函数中注入 IServiceBus，而是从上下文中获取总线。

```
public class CreateProductCommandHandler : Consumes<CreateProductCommand>.Context
{
    public void Consume(IConsumeContext<CreateProductCommand> context)
    {
        Console.Out.WriteLine("Consuming Create Product");

        // simulate creating a product
        var productId = "products/1234";

        context.Bus.Publish(new ProductCreatedEvent(productId));

        context.Respond(new CreateProductCommand.Response(context.Message.CorrelationId) { Id = productId});
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-03T20:22:33.583

您好，我遇到了同样的问题，但这是由 2 个微服务共享相同的响应队列引起的。我只是确保他们有唯一的名字，而且效果很好！

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-05-22T18:59:54.873

我知道你想用 MT 和 RabbitMQ，我放弃了，把我的爱转向了 EasyNetQ，试试看（-：

# mysql - CakePHP X hasMany Y, 找到有 Y.name = "value1" AND 同时有 Y.name = "value2" 的 X

> ID：10621782
> 
> 赞同：1
> 
> 时间：2012-05-16T15:29:24.307
> 
> 标签：mysql, cakephp

所以我的模型关联如下：

人有很多奖

人员列：id、name 奖励列：id、person_id、name

所以人们可以有很多奖项，但我只想检索那些同时获得两个不同奖项的特定人。有没有办法用 find 方法实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:27:34.123

```
$persons = $this->Person->find('all', array(
                           'recursive' => -1,
                           'conditions' => array(
                              'AND' => array('Award.name' => 'Award 1', 'Award.name' => 'Award 3')
                            ),
                           'joins' => array(
                                array(
                                   'table' =>'awards',
                                   'alias' => 'Award',
                                   'type' => 'LEFT',
                                   'conditions' => 'Award.person_id = person.id'
                                 )
                            )
                      )
                 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:59:58.427

查看页面末尾的[子查询。](http://book.cakephp.org/1.3/view/1030/Complex-Find-Conditions)您基本上需要一个子查询，因为您需要查询 Award 表两次以匹配 value1 和 value2。

* * *

*编辑：* **示例代码**

```
$conditionsSubQuery['`Award`.`name`'] = 'value2';
$dbo = $this->Person->getDataSource();
$subQuery = $dbo->buildStatement(
    array(
        'fields' => array( '`Person2`.`id`'),
        'table' => $dbo->fullTableName($this->Person),
        'alias' => 'Person2',
        'limit' => null,
        'offset' => null,
        'joins' => array(),
        'conditions' => $conditionsSubQuery,
        'order' => null,
        'group' => null
    ),
    $this->Person
);
$subQuery = ' `Person`.`id` IN (' . $subQuery . ') ';
$subQueryExpression = $dbo->expression($subQuery);
$conditions[] = array('Award.name' => 'value1');
$conditions[] = $subQueryExpression;
$this->Person->find('all', compact('conditions')); 
```

我没有测试它，它可能不起作用，但你明白了。

* * *

*编辑2：* **回答您的评论**

所以基本上你想要的 SQL 结果是

```
select 
    users.id 
from 
    users 
left join 
    awards 
where 
    awards.name in ('award1', 'award2', 'award3', 'award4') 
group by 
    awards.name 
having 
    count(awards.name) = 4 
```

为此，您可以这样做：

```
$awards = array('award1', 'award2', 'award3', 'award4');

$this->Person->find(
    'all',
    array(
        'joins' => array(
            array(
               'table' =>'awards',
               'alias' => 'Award',
               'type' => 'LEFT',
               'conditions' => 'Award.person_id = person.id'
             )
        ),
        'conditions' => array(
            'Award.name' => $awards,
        ),
        'group' => array('Award.name HAVING '.count($awards))
    )
); 
```

# java - Java中是否有等效的epoll？

> ID：10621783
> 
> 赞同：24
> 
> 时间：2012-05-16T15:29:33.793
> 
> 标签：java, multithreading, epoll

Java中是否有等效的Linux epoll？

epoll 允许线程对许多异构事件做出反应。例如，我可以有一个线程对套接字事件或来自控制台的输入做出反应。在 C++ 中，我可以通过使用 epoll 注册 stdio 和套接字来实现这一点。如果这些，我的线程将被任何一个事件触发。

Java中是否有类似的工具？我查看了 nio 包，它允许我使用选择器注册多个套接字。但是似乎没有办法用选择器注册控制台/标准 io。我没有看到什么吗？还有另一种方法可以做到这一点吗？

关于“为什么”：我想编写一个通过套接字进行通信的程序，并且我想通过从控制台输入命令来驱动这个程序。我知道如何通过分离控制台输入和与不同线程的通信来做到这一点，但我很好奇是否有办法在单个线程中做到这一点。

谢谢。df

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-08T07:42:13.663

Java SE 6 中的增强功能

`java.nio`

`java.nio.channels.SelectorProvider`包括一个基于 Linux epoll 事件通知工具的新实现。epoll 工具在 Linux 2.6 和更新的内核中可用。当有数千个 SelectableChannel 注册到一个 Selector 时，新的基于 epoll 的 SelectorProvider 实现比传统的基于 poll 的 SelectorProvider 实现更具可扩展性。当检测到 2.6 内核时，将默认使用新的 SelectorProvider 实现。当检测到 2.6 之前的内核时，将使用基于轮询的 SelectorProvider。

[https://docs.oracle.com/javase/8/docs/technotes/guides/io/enhancements.html](https://docs.oracle.com/javase/8/docs/technotes/guides/io/enhancements.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T16:56:58.593

是的，该`nio`包允许使用`Selector`s ，它提供与`poll()`/等效的功能，`select()`并且实际上其中一个实现`epoll`用作后端（这是通过`java.nio.channels.spi.SelectorProvider`Java 属性选择的）。选择器通常与网络套接字一起使用，但如果您查看`Channel`文档中的不同实现，我认为您很可能也可以将这种机制与标准输入一起使用（有允许在旧`Stream`的基于 API 的 API之间移动的辅助类以及`nio`某种程度的 API）。

# c# - Query 的 LinqToEntities 代码需要为每个根节点返回一个实体吗？

> ID：10621784
> 
> 赞同：0
> 
> 时间：2012-05-16T15:29:44.447
> 
> 标签：c#, visual-studio-2010, linq-to-entities, relational-database, domainservices

我想我已经把自己弄糊涂了。我的数据库看起来像：

```
Locations [root]
    Inspections [level1]
       InspectionItems [level2]
           InspectionReadings [level3]      
    Areas [level1]
       Inspections [level2]
           InspectionItems [level3]
               InspectionReadings [level4] 
```

每个表都通过 Guid 链接到前一个表，并且 Inspections 表具有可为空的 AreaID，因此它可以是 Locations 的直接子级。

我需要的是

```
for each Location 
    {take all InspectionReadings entities
     where location == location
     sort date descending 
     return the top Entity details}
add the Location details and the InspectionReading details into a new table
return new table 
```

结果应该是一个带有位置列表及其最新检查阅读日期的数据网格。每个位置应该只出现一次。

我所管理的是（这在我的 DomainService.cs 中）

```
 public IQueryable<LocationStatusList> GetLocationStatus()
        {
         var status = (from a in ObjectContext.Locations
                      from b in ObjectContext.InspectionReadings
                      orderby b.DateTaken descending, a.Name 
                      select new LocationStatusList()
                      {
                          ID = b.ID,
                          LocationName = a.Name,
                          LastInspectionDate = b.DateTaken ?? DateTime.MinValue, // the data is nullable so it needs a value to return in that case
                          StatusNumber = b.Status ?? -1 // the data is nullable so it needs a value to return in that case
                      });
         return status;
        } 
```

它返回整个 InspectionItems 实体及其相关位置，尽管我已经尝试过，但我找不到一种方法来做我需要的事情。

我想在 DomainService 类中为此执行所有代码，但目前我能想到的唯一方法是将查询每个位置名称作为来自视图模型的参数，返回单个实体并创建一个新列表并添加每个单独的实体。

当然，这一切都可以在 LINQ 查询中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:41:47.240

最终版本，如果我做对了：

```
var status = (from a in ObjectContext.Locations
              select new {Location = a, LastReading = a.Inspections.SelectMany(i=>i.InspectionReadings).OrderBy(r=>r.PostDate).FirstOrDefault()}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:25:39.657

好的试试这个：

```
 var result = from l in Locations 
       from i in l.Inspestions 
       from ii in i.InspestionItems 
       from ir in ii.InspectionReadings 
       group ir by l into g 
       select new {Location = g.Key, LastReading = g.OrderBy(r=>r.DateTaken).LastOrDefault() }; 
```

Last 或 default 是因为默认排序顺序是升序的，并且您需要最近的（last）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:13:37.017

谢谢@Val，我现在拥有的代码是：

```
public IQueryable<LocationStatusList> GetLocationStatus()
{
   var status = (from a in ObjectContext.Locations
                 select new LocationStatusList
                 {
                    ID=a.ID,
                    Name=a.Name,
                    LastInspectionDate= (from b in ObjectContext.Inspections
                                         from c in ObjectContext.InspectionReadings
                                         where c.InspectionItemID==b.ID && b.LocationID==a.ID
                                         orderby c.DateTaken descending
                                         select c.DateTaken).FirstOrDefault()??DateTime.MinValue,

                    StatusNumber =  (from b in ObjectContext.Inspections
                                     from c in ObjectContext.InspectionReadings
                                     where c.InspectionItemID==b.ID && b.LocationID==a.ID
                                     orderby c.DateTaken descending
                                     select c.Status).FirstOrDefault()??-1,
                 });
   return status;
} 
```

这正是我所需要的。谢谢！

# c# - 大数据上的 GZipStream

> ID：10621788
> 
> 赞同：5
> 
> 时间：2012-05-16T15:29:53.103
> 
> 标签：c#, gzipstream

我正在尝试压缩大量数据，有时在 100GB 的区域内，当我运行我编写的例程时，它看起来文件的大小与以前的大小完全相同。GZipStream 有其他人遇到过这个问题吗？

我的代码如下：

```
 byte[] buffer = BitConverter.GetBytes(StreamSize);
        FileStream LocalUnCompressedFS = File.OpenWrite(ldiFileName);
        LocalUnCompressedFS.Write(buffer, 0, buffer.Length);
        GZipStream LocalFS = new GZipStream(LocalUnCompressedFS, CompressionMode.Compress);
        buffer = new byte[WriteBlock];
        UInt64 WrittenBytes = 0;
        while (WrittenBytes + WriteBlock < StreamSize)
        {
            fromStream.Read(buffer, 0, (int)WriteBlock);
            LocalFS.Write(buffer, 0, (int)WriteBlock);
            WrittenBytes += WriteBlock;
            OnLDIFileProgress(WrittenBytes, StreamSize);
            if (Cancel)
                break;
        }
        if (!Cancel)
        {
            double bytesleft = StreamSize - WrittenBytes;
            fromStream.Read(buffer, 0, (int)bytesleft);
            LocalFS.Write(buffer, 0, (int)bytesleft);
            WrittenBytes += (uint)bytesleft;
            OnLDIFileProgress(WrittenBytes, StreamSize);
        }
        LocalFS.Close();
        fromStream.Close(); 
```

StreamSize 是一个 8 字节的 UInt64 值，用于保存文件的大小。我将这 8 个字节原始写入文件的开头，所以我知道原始文件的大小。Writeblock 的值为 32kb（32768 字节）。fromStream 是从 FileStream 获取数据的流。压缩数据前面的 8 个字节是否会导致问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:34:12.393

我使用以下代码进行了压缩测试，它在 7GB 和 12GB 文件上运行没有问题（两者都事先知道压缩“好”）。这个版本适合你吗？

```
const string toCompress = @"input.file";
var buffer = new byte[1024*1024*64];

using(var compressing = new GZipStream(File.OpenWrite(@"output.gz"), CompressionMode.Compress))
using(var file = File.OpenRead(toCompress))
{
    var bytesRead = 0;
    while(bytesRead < buffer.Length)
    {
        bytesRead = file.Read(buffer, 0, buffer.Length);
        compressing.Write(buffer, 0, buffer.Length);
    }
} 
```

~~你检查过[文档](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)吗？~~

 ~~> GZipStream类无法解压缩**导致**超过 8 GB 未压缩数据的数据。~~ 

~~您可能需要找到一个不同的库来支持您的需求，或者尝试将您的数据分解成`<=8GB`可以安全地“缝合”在一起的块。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T08:40:09.003

Austin Salonen 的代码对我不起作用（错误，4GB 错误）。

这是正确的方法：

```
using System;
using System.Collections.Generic;
using System.Text;

namespace CompressFile
{
    class Program
    {

        static void Main(string[] args)
        {
            string FileToCompress = @"D:\Program Files (x86)\msvc\wkhtmltopdf64\bin\wkhtmltox64.dll";
            FileToCompress = @"D:\Program Files (x86)\msvc\wkhtmltopdf32\bin\wkhtmltox32.dll";
            string CompressedFile = System.IO.Path.Combine(
                 System.IO.Path.GetDirectoryName(FileToCompress)
                ,System.IO.Path.GetFileName(FileToCompress) + ".gz"
            );

            CompressFile(FileToCompress, CompressedFile);
            // CompressFile_AllInOne(FileToCompress, CompressedFile);

            Console.WriteLine(Environment.NewLine);
            Console.WriteLine(" --- Press any key to continue --- ");
            Console.ReadKey();
        } // End Sub Main

        public static void CompressFile(string FileToCompress, string CompressedFile)
        {
            //byte[] buffer = new byte[1024 * 1024 * 64];
            byte[] buffer = new byte[1024 * 1024]; // 1MB

            using (System.IO.FileStream sourceFile = System.IO.File.OpenRead(FileToCompress))
            {

                using (System.IO.FileStream destinationFile = System.IO.File.Create(CompressedFile))
                {

                    using (System.IO.Compression.GZipStream output = new System.IO.Compression.GZipStream(destinationFile,
                        System.IO.Compression.CompressionMode.Compress))
                    {
                        int bytesRead = 0;
                        while (bytesRead < sourceFile.Length)
                        {
                            int ReadLength = sourceFile.Read(buffer, 0, buffer.Length);
                            output.Write(buffer, 0, ReadLength);
                            output.Flush();
                            bytesRead += ReadLength;
                        } // Whend

                        destinationFile.Flush();
                    } // End Using System.IO.Compression.GZipStream output

                    destinationFile.Close();
                } // End Using System.IO.FileStream destinationFile 

                // Close the files.
                sourceFile.Close();
            } // End Using System.IO.FileStream sourceFile

        } // End Sub CompressFile

        public static void CompressFile_AllInOne(string FileToCompress, string CompressedFile)
        {
            using (System.IO.FileStream sourceFile = System.IO.File.OpenRead(FileToCompress))
            {
                using (System.IO.FileStream destinationFile = System.IO.File.Create(CompressedFile))
                {

                    byte[] buffer = new byte[sourceFile.Length];
                    sourceFile.Read(buffer, 0, buffer.Length);

                    using (System.IO.Compression.GZipStream output = new System.IO.Compression.GZipStream(destinationFile,
                        System.IO.Compression.CompressionMode.Compress))
                    {
                        output.Write(buffer, 0, buffer.Length);
                        output.Flush();
                        destinationFile.Flush();
                    } // End Using System.IO.Compression.GZipStream output

                    // Close the files.        
                    destinationFile.Close();
                } // End Using System.IO.FileStream destinationFile 

                sourceFile.Close();
            } // End Using System.IO.FileStream sourceFile

        } // End Sub CompressFile

    } // End Class Program

} // End Namespace CompressFile 
```

# android - 使用 HTTPS 加密从移动设备发送的数据

> ID：10621790
> 
> 赞同：0
> 
> 时间：2012-05-16T15:29:55.937
> 
> 标签：android, iphone, objective-c, encryption, https

我有一个适用于 Android 和 iOS 的应用程序。要加密发送到 PHP 脚本的数据，从应用程序方面来说，是否只是将“S”添加到“HTTP://.....”，然后在发送时所有内容都被加密?

试过谷歌，但找不到任何相关的东西。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:34:54.090

不，你不能只添加一个 s。

https 中的“s”表示连接受 TLS（传输层安全）保护。这是通过使用证书和公钥加密的身份验证来实现的。

看：

[http://computer.howstuffworks.com/encryption.htm](http://computer.howstuffworks.com/encryption.htm)

[http://en.wikipedia.org/wiki/Public-key_cryptography](http://en.wikipedia.org/wiki/Public-key_cryptography)

对于 IOS 特定的实现，请参见

[https://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/02concepts/concepts.html#//apple_ref/doc/uid/TP30000897-CH204-TP9](https://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/02concepts/concepts.html#//apple_ref/doc/uid/TP30000897-CH204-TP9)

# c# - ASP.NET MVC C# 数据注释：比较两个值

> ID：10621794
> 
> 赞同：-1
> 
> 时间：2012-05-16T15:30:06.850
> 
> 标签：c#, asp.net-mvc, data-annotations

我正在尝试为我的 MVC 模型创建一个数据注释来验证两个日期。我有一个开始日期和结束日期，结束日期应该大于开始日期。我设法创建了一个注释，但无法将值传递给它。有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:53:35.000

您可以将 DateTime 对象与此类型的另一个对象进行比较。如果 startdate 和 endate 都是 DateTime 对象，那么 Compare 方法应该可以解决问题。

# python - Twisted-PyQt4 分段错误

> ID：10621804
> 
> 赞同：5
> 
> 时间：2012-05-16T15:30:38.083
> 
> 标签：python, pyqt, segmentation-fault, twisted, multiple-instances

我在 Ubuntu 12.04 (amd64) 上使用 PyQt 4.9.1（尝试使用 python 2.6 和 2.7）制作无头浏览器，但我得到：程序收到信号 SIGSEGV，分段错误。这是该程序的简化版本（仍然有点长）：

```
# -*- coding: utf-8 -*-
from pyvirtualdisplay import Display
display = Display(visible=False, size=(1024, 768), color_depth=24)
display.start()

from PyQt4.QtGui import QApplication
#from PySide.QtGui import QApplication
app = QApplication([])
import qt4reactor
qt4reactor.install()

from twisted.web import server
from twisted.web.xmlrpc import XMLRPC
from twisted.internet import defer
from PyQt4.QtWebKit import QWebSettings, QWebView, QWebPage
from PyQt4.QtNetwork import QNetworkAccessManager, QNetworkRequest
from PyQt4.QtCore import QUrl, QByteArray, QTimer

class CustomQNetworkAccessManager(QNetworkAccessManager):

    def __init__(self, *args, **kwargs):
        super(CustomQNetworkAccessManager, self).__init__(*args, **kwargs)
        self.sslErrors.connect(self._ssl_errors)

    def _ssl_errors(self, reply, errors):
        reply.ignoreSslErrors()
        for error in errors:
            print 'Ignored SSL Error: {0} - {1}'.format(error.error(), error.errorString())

class CustomQWebPage(QWebPage):

    def __init__(self, *args, **kwargs):
        super(CustomQWebPage, self).__init__(*args, **kwargs)

    def userAgentForUrl(self, url):
        return 'Mozilla/5.0 (Windows NT 6.1; rv:5.0) Gecko/20100101 Firefox/5.0'

class WebkitWrapper(QWebView):

    def __init__(self, *args, **kwargs):
        super(WebkitWrapper, self).__init__(*args, **kwargs)
        self.network_manager = CustomQNetworkAccessManager()
        web_page = CustomQWebPage()
        web_page.setNetworkAccessManager(self.network_manager)
        self.setPage(web_page)
        settings = self.settings()
        settings.setAttribute(QWebSettings.AutoLoadImages, True)
        settings.setAttribute(QWebSettings.JavaEnabled, False)
        settings.setAttribute(QWebSettings.JavascriptEnabled, False)
        settings.setAttribute(QWebSettings.JavascriptCanOpenWindows, False)
        settings.setAttribute(QWebSettings.PluginsEnabled, False)
        self.loadFinished.connect(self._load_finished)

    def perform(self, request_data, timeout=15):
        self._deferred_request = defer.Deferred()
        url = request_data.get('url', '')
        request = QNetworkRequest() 
        request.setUrl(QUrl(url)) 
        self.load(request)
        print 'getting: {0}'.format(url)
        return self._deferred_request

    def _load_finished(self, ok):
        print 'load finished: {0}'.format(ok)
        frame = self.page().mainFrame()
        result = frame.toHtml()
        self._deferred_request.callback(result)

class HeadlessBrowser(object):

    def __init__(self, instance_id):
        self.webkit_wrapper = WebkitWrapper()
        self.instance_id = instance_id

    def _return_intance_id(self, result):
        return self.instance_id, result

    def _request_failed(self, failure):
        failure.trap(Exception)
        err_msg = failure.getErrorMessage()
        print err_msg
        print failure.getTraceback()
        return err_msg

    def shutdown(self):
        self.webkit_wrapper.close()

    def get_request(self, request_data):
        d = self.webkit_wrapper.perform(request_data)
        d.addErrback(self._request_failed)
        d.addBoth(self._return_intance_id)
        return d

class TestXMLRPCServer(XMLRPC):

    def __init__(self):
        XMLRPC.__init__(self, allowNone=True)
        self.browser_instances = dict()
        self.instance_counter = 0

    def _result_returned(self, result):
        instance_id, browser_result = result
        print 'killing instance: {0}'.format(instance_id)
        browser_instance = self.browser_instances.pop(instance_id)
        browser_instance.shutdown()
        return browser_result

    def xmlrpc_open(self, request_data):
        print 'requested: {0}'.format(request_data)
        self.instance_counter += 1
        browser = HeadlessBrowser(self.instance_counter)
        self.browser_instances[self.instance_counter] = browser

        deferred_result = browser.get_request(request_data)
        deferred_result.addCallback(self._result_returned)
        return deferred_result

def start_server(port=8297):
    from twisted.internet import reactor
    r = TestXMLRPCServer()
    reactor.listenTCP(port, server.Site(r))
    reactor.run()

if __name__ == '__main__':
    start_server() 
```

现在据我所知，问题在于存储这些 HeadlessBrowser 类的实例，我使用 dict 来存储它们，在实际实现中我通过自定义 session_id 重用它们，但我在这里伪造了一个 instance_counter 只是为了展示它是如何工作的。我认为无论我将它们存储在字典中，看起来这些实例都是垃圾收集的，或者我不确定为什么会发生问题。无论如何，如果我放弃 dict 的使用，并使其仅在 xmlrpc 类上存储一个实例作为类属性，则不会发生问题。

这是它的示例客户端：

```
# -*- coding: utf-8 -*-
import xmlrpclib

def test_server(port=8297):
    s = xmlrpclib.Server('http://localhost:{0}/'.format(port))
    html = s.open({'url': 'http://www.microsoft.com'})
    print html

if __name__ == '__main__':
    test_server() 
```

有什么建议么？

**更新：**添加回溯：

```
(gdb) run
Starting program ...
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
[New Thread 0x7fffe8f60700 (LWP 13393)]
Xlib:  extension "RANDR" missing on display ":1851".
[New Thread 0x7fffe3fff700 (LWP 13394)]
[New Thread 0x7fffe37fe700 (LWP 13395)]
requested: {'url': 'http://www.microsoft.com'}
[New Thread 0x7fffd9a2f700 (LWP 13422)]
[New Thread 0x7fffd9116700 (LWP 13423)]
[New Thread 0x7fffcfdd2700 (LWP 13425)]
getting: http://www.microsoft.com
[New Thread 0x7fffcf5d1700 (LWP 13426)]
[New Thread 0x7fffc5f28700 (LWP 13427)]
[Thread 0x7fffe37fe700 (LWP 13395) exited]
load finished: True
killing instance: 1

Program received signal SIGSEGV, Segmentation fault.
QMetaObject::activate (sender=0x0, m=<optimized out>, local_signal_index=8, argv=0x7fffffffc960) at kernel/qobject.cpp:3456
3456    kernel/qobject.cpp: No such file or directory.
(gdb) bt
#0  QMetaObject::activate (sender=0x0, m=<optimized out>, local_signal_index=8, argv=0x7fffffffc960) at kernel/qobject.cpp:3456
#1  0x00007fffdad358b2 in QWebFrame::loadFinished (this=<optimized out>, _t1=true) at ./moc_qwebframe.cpp:239
#2  0x00007fffdad74e08 in WebCore::FrameLoaderClientQt::dispatchDidFinishLoad (this=0x1428290) at WebCoreSupport/FrameLoaderClientQt.cpp:527
#3  0x00007fffdb0cfcbb in WebCore::FrameLoader::recursiveCheckLoadComplete (this=0x7fffd9141478) at loader/FrameLoader.cpp:2641
#4  0x00007fffdb100754 in WebCore::SubresourceLoader::didFinishLoading (this=0x7fffc5f3d300, finishTime=0) at loader/SubresourceLoader.cpp:202
#5  0x00007fffdb2f033b in WebCore::QNetworkReplyHandler::finish (this=0x14adcb0) at platform/network/qt/QNetworkReplyHandler.cpp:454
#6  0x00007fffdb2f01ea in flush (this=0x14adce8) at platform/network/qt/QNetworkReplyHandler.cpp:195
#7  WebCore::QNetworkReplyHandlerCallQueue::flush (this=0x14adce8) at platform/network/qt/QNetworkReplyHandler.cpp:187
#8  0x00007fffdb2f0255 in WebCore::QNetworkReplyHandlerCallQueue::push (this=0x14adce8, method=
    (void (WebCore::QNetworkReplyHandler::*)(WebCore::QNetworkReplyHandler * const)) 0x7fffdb2f0260 <WebCore::QNetworkReplyHandler::finish()>)
    at platform/network/qt/QNetworkReplyHandler.cpp:164
#9  0x00007fffdb2f0c8c in WebCore::QNetworkReplyWrapper::didReceiveFinished (this=0x14af650) at platform/network/qt/QNetworkReplyHandler.cpp:349
#10 0x00007ffff482f281 in QMetaObject::activate (sender=0x14ae120, m=<optimized out>, local_signal_index=<optimized out>, argv=0x0) at kernel/qobject.cpp:3547
#11 0x00007fffe0ea5fe6 in QNetworkReplyImplPrivate::finished (this=0x14ae210) at access/qnetworkreplyimpl.cpp:795
#12 0x00007fffe0f1c655 in QNetworkAccessHttpBackend::qt_static_metacall (_o=0x14ae5c0, _c=<optimized out>, _id=<optimized out>, _a=<optimized out>)
    at .moc/release-shared/moc_qnetworkaccesshttpbackend_p.cpp:90
#13 0x00007ffff4834446 in QObject::event (this=0x14ae5c0, e=<optimized out>) at kernel/qobject.cpp:1195
#14 0x00007ffff4d3d894 in notify_helper (e=0x7fffc8019be0, receiver=0x14ae5c0, this=0x9d0e30) at kernel/qapplication.cpp:4559
#15 QApplicationPrivate::notify_helper (this=0x9d0e30, receiver=0x14ae5c0, e=0x7fffc8019be0) at kernel/qapplication.cpp:4531
#16 0x00007ffff4d42713 in QApplication::notify (this=0x966ab0, receiver=0x14ae5c0, e=0x7fffc8019be0) at kernel/qapplication.cpp:4420
#17 0x00007ffff5d4c016 in ?? () from .../lib/python2.6/site-packages/PyQt4/QtGui.so
#18 0x00007ffff481ae9c in QCoreApplication::notifyInternal (this=0x966ab0, receiver=0x14ae5c0, event=0x7fffc8019be0) at kernel/qcoreapplication.cpp:876
#19 0x00007ffff481ec6a in sendEvent (event=0x7fffc8019be0, receiver=0x14ae5c0) at ../../include/QtCore/../../src/corelib/kernel/qcoreapplication.h:231
#20 QCoreApplicationPrivate::sendPostedEvents (receiver=0x0, event_type=0, data=0x9d1000) at kernel/qcoreapplication.cpp:1500
#21 0x00007ffff4849f93 in sendPostedEvents () at ../../include/QtCore/../../src/corelib/kernel/qcoreapplication.h:236
#22 postEventSourceDispatch (s=<optimized out>) at kernel/qeventdispatcher_glib.cpp:279
#23 0x00007ffff3a8ec9a in g_main_context_dispatch () from /lib/x86_64-linux-gnu/libglib-2.0.so.0
---Type <return> to continue, or q <return> to quit---
#24 0x00007ffff3a8f060 in ?? () from /lib/x86_64-linux-gnu/libglib-2.0.so.0
#25 0x00007ffff3a8f124 in g_main_context_iteration () from /lib/x86_64-linux-gnu/libglib-2.0.so.0
#26 0x00007ffff484a3bf in QEventDispatcherGlib::processEvents (this=0xb7dfb0, flags=...) at kernel/qeventdispatcher_glib.cpp:424
#27 0x00007ffff4de5d5e in QGuiEventDispatcherGlib::processEvents (this=<optimized out>, flags=...) at kernel/qguieventdispatcher_glib.cpp:204
#28 0x00007ffff4819c82 in QEventLoop::processEvents (this=<optimized out>, flags=...) at kernel/qeventloop.cpp:149
#29 0x00007ffff4819ed7 in QEventLoop::exec (this=0xea6cd0, flags=...) at kernel/qeventloop.cpp:204
#30 0x00007ffff0d627e2 in ?? () from .../lib/python2.6/site-packages/PyQt4/QtCore.so
#31 0x000000000049a15d in PyEval_EvalFrameEx ()
#32 0x000000000049be0f in PyEval_EvalCodeEx ()
#33 0x000000000049a57a in PyEval_EvalFrameEx ()
#34 0x000000000049be0f in PyEval_EvalCodeEx ()
#35 0x000000000049a57a in PyEval_EvalFrameEx ()
#36 0x000000000049be0f in PyEval_EvalCodeEx ()
#37 0x000000000049bef2 in PyEval_EvalCode ()
#38 0x00000000004be6e0 in PyRun_FileExFlags ()
#39 0x00000000004bf3d7 in PyRun_SimpleFileExFlags ()
#40 0x0000000000418850 in Py_Main ()
#41 0x00007ffff68e576d in __libc_start_main () from /lib/x86_64-linux-gnu/libc.so.6
#42 0x0000000000417ab1 in _start ()
(gdb) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T10:41:18.293

我为迟到的回复道歉，最后我有时间发布我的问题的解决方案。基本上发生段错误是因为在删除对浏览器实例的最后引用之前没有删除 qt 对象。这是固定代码：

```
# -*- coding: utf-8 -*-
from pyvirtualdisplay import Display
display = Display(visible=False, size=(1024, 768), color_depth=24)
display.start()

from PyQt4.QtGui import QApplication
app = QApplication([])
import qt4reactor
qt4reactor.install()

from twisted.web import server
from twisted.web.xmlrpc import XMLRPC
from twisted.internet import defer
from PyQt4.QtWebKit import QWebSettings, QWebView, QWebPage
from PyQt4.QtNetwork import QNetworkAccessManager, QNetworkRequest
from PyQt4.QtCore import QUrl, Qt

class CustomQNetworkAccessManager(QNetworkAccessManager):

    def __init__(self, *args, **kwargs):
        super(CustomQNetworkAccessManager, self).__init__(*args, **kwargs)
        self.sslErrors.connect(self._ssl_errors)
        self.finished.connect(self._finished)

    def _ssl_errors(self, reply, errors):
        reply.ignoreSslErrors()
        for error in errors:
            print 'Ignored SSL Error: {0} - {1}'.format(error.error(), error.errorString())

    def _finished(self, reply):
        reply.deleteLater()

class CustomQWebPage(QWebPage):

    def __init__(self, *args, **kwargs):
        super(CustomQWebPage, self).__init__(*args, **kwargs)

    def userAgentForUrl(self, url):
        return 'Mozilla/5.0 (Windows NT 6.1; rv:5.0) Gecko/20100101 Firefox/5.0'

class WebkitWrapper(object):

    def __init__(self, *args, **kwargs):
        super(WebkitWrapper, self).__init__(*args, **kwargs)
        self.web_view = QWebView()
        self.network_manager = CustomQNetworkAccessManager()
        self.web_page = CustomQWebPage()
        self.web_page.setNetworkAccessManager(self.network_manager)
        self.web_view.setPage(self.web_page)
        self.web_view.setAttribute(Qt.WA_DeleteOnClose, True)
        settings = self.web_view.settings()
        settings.setAttribute(QWebSettings.AutoLoadImages, False)
        settings.setAttribute(QWebSettings.JavaEnabled, False)
        settings.setAttribute(QWebSettings.JavascriptEnabled, False)
        settings.setAttribute(QWebSettings.JavascriptCanOpenWindows, False)
        settings.setAttribute(QWebSettings.PluginsEnabled, False)
        self.web_view.loadFinished.connect(self._load_finished)

    def perform(self, request_data, timeout=15):
        self._deferred_request = defer.Deferred()
        url = request_data.get('url', '')
        request = QNetworkRequest() 
        request.setUrl(QUrl(url)) 
        self.web_view.load(request)
        print 'getting: {0}'.format(url)
        return self._deferred_request

    def shutdown(self):
        print 'webview shutdown'
        self.web_view.close()
        self.network_manager.deleteLater()
        self.web_page.deleteLater()
        self.web_view.deleteLater()
        print 'deletelater scheduled'

    def _load_finished(self, ok):
        print 'load finished: {0}'.format(ok)
        frame = self.web_view.page().mainFrame()
        result = unicode(frame.toHtml()).encode('utf-8')
        self._deferred_request.callback(result)

class HeadlessBrowser(object):

    def __init__(self, instance_id):
        self.webkit_wrapper = WebkitWrapper()
        self.instance_id = instance_id

    def _return_intance_id(self, result):
        return self.instance_id, result 

    def _request_failed(self, failure):
        failure.trap(Exception)
        err_msg = failure.getErrorMessage()
        print err_msg
        failure.printDetailedTraceback()
        return err_msg

    def shutdown(self):
        self.webkit_wrapper.shutdown()

    def _run_perform(self, _r, request_data):
        return self.webkit_wrapper.perform(request_data)

    def get_request(self, request_data):
        deferred_request = self.webkit_wrapper.perform(request_data)
        deferred_request.addErrback(self._request_failed)
        deferred_request.addBoth(self._return_intance_id)
        return deferred_request

class TestXMLRPCServer(XMLRPC):

    def __init__(self):
        XMLRPC.__init__(self, allowNone=True)
        self.browser_instances = dict()
        self.instance_counter = 0

    def _request_completed(self, result):
        instance_id, dest_result = result
        print 'instances: ', self.browser_instances
        print 'killing instance: {0}'.format(instance_id)
        browser_instance = self.browser_instances.pop(instance_id, None)
        browser_instance.shutdown()
        print 'instances: ', self.browser_instances
        return dest_result

    def xmlrpc_open(self, request_data):
        print 'requested: {0}'.format(request_data)
        self.instance_counter += 1
        instance_id = str(self.instance_counter)
        browser = HeadlessBrowser(instance_id)
        def_request = browser.get_request(request_data)
        def_request.addCallback(self._request_completed)
        self.browser_instances[instance_id] = browser
        return def_request

def start_server(port=8297):
    from twisted.internet import reactor
    r = TestXMLRPCServer()
    reactor.listenTCP(port, server.Site(r))
    reactor.run()

if __name__ == '__main__':
    start_server() 
```

一切都只需要添加这一行：

```
self.web_page.deleteLater() 
```

但最好确定..希望这将为某人节省一些调试时间..

# android - 是否可以在 XML 中设置事件侦听器？

> ID：10621805
> 
> 赞同：3
> 
> 时间：2012-05-16T15:30:40.560
> 
> 标签：android, xml, layout, event-listener

当我使用 XML 来设计布局时，我`findViewById()`在 java 代码中使用来加载视图并为它们设置侦听器。

这是正确的我在做什么？是否可以在 XML 中设置侦听器或其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T15:47:12.303

大多数人在代码中设置他们的听众。有时在代码中更容易做到这一点，因为您经常需要根据某些操作或状态添加或删除侦听器。

但是，Android 还为您提供了在 XML 中`OnClickListener`为 any设置 a 的选项。`View`这是一个例子：

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="onActionClick"
    android:text="Action" /> 
```

使用该`onClick`属性，您可以指定将处理单击的方法的名称。这个方法必须存在于同一个`Context`中`View`，所以同一个`Activity`。因此，例如，我将不得不实现这个方法：

```
public void onActionClick(View v) {

    // Do stuff for my "Action" button...
} 
```

我相信它必须有一个`View`参数，就像实现`OnClickListener`一样。我也相信它必须是公开的。

那么，哪种方式是“最好的”？随你（由你决定。两条路线都是可行的。值得注意的是，这仅对点击侦听器有用，对其他类型的侦听器无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:45:33.643

您可以在 xml 中使用onClick[属性。](http://developer.android.com/reference/android/view/View.html#attr_android%3aonClick)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:47:47.310

您可以在用 XML描述时指定`android:onClick`属性。`View`此属性的值是将在您`View`的`onClick`事件中调用的方法的名称。然后你应该在你的代码中将此方法定义为公共的，你可以传递那里的`View`对象，该对象将确定`View`你在 xml 中描述的具有相同`android:onClick`属性的对象从用户那里获得了触摸事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:46:15.483

你可以设置一个，`onClick`但我认为就是这样

# c# - SPContext.Current.Web.Url 返回 http 而不是 https

> ID：10621806
> 
> 赞同：1
> 
> 时间：2012-05-16T15:30:41.850
> 
> 标签：c#, sharepoint, sharepoint-2010, https, spcontext

我开发了几个 webpart，我使用 SPContext.Current.Web.Url 来获取 web url。它在使用 hxxps://abc/ 访问站点时有效，但是当通过 IP 访问时，我得到的是 http 而不是 https。

**问题：** 当我访问 hxxps://172.1.25.25/ SPContext.Current.Web.Url 返回 hxxp://172.1.25.25/

当我访问 hxxps://abc/ SPContext.Current.Web.Url 返回 hxxps://abc/

**我的备用访问映射**

hxxp://172.1.25.25/ 内网

hxxps://172.1.25.25/ 内网

hxxp://abc/ 互联网

hxxps://abc/ 互联网

我使用了几种解决方法，我在论坛中得到了它:(没有任何效果，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:02:05.303

在您的 AAM 中，您将拥有一个“区域的公共 URL”，这就是 SPContext.Current.Web.URL 将返回的内容 - 如果您要使用它，请将其更改为 https。

SharePoint Central Admin > 应用程序管理 > 配置备用访问映射 > 编辑公共 URL

[MSDN - 配置备用访问映射 (Windows SharePoint Services)](http://technet.microsoft.com/en-us/library/cc288173%28v=office.12%29.aspx)

# transactions - Mnesia 异常退出：{aborted,{bad_type, Record}}

> ID：10621808
> 
> 赞同：5
> 
> 时间：2012-05-16T15:30:43.513
> 
> 标签：transactions, erlang, mnesia

我创建了一个名称与其记录名称不同的表。下面是代码片段

```
%% ---- 记录定义 --------------------------------
-记录（对象，{键，值}）。

%% ---- 创建表 -------------------------------------
{atomic,ok} = mnesia:create_table(mytable,[
                    {类型，设置}，
                    {frag_properties，[
                                {node_pool,[node()]},
                                {n_fragments,4},
                                {n_disc_copies,1}]},
                    {属性，记录信息（字段，对象）}]
                ), 

%% ------- 插入 -------------------------------- 
insert()->
    F = 乐趣（）->
            R = #对象{
                    键 = "我的钥匙",
                    价值 = “价值”
                },
            记忆：写（mytable，R，写）
        结尾，
    mnesia:activity(transaction,F,[],mnesia_frag)。

```

在这样做的时候，mnesia 大声喊叫着。该表创建得非常好，可以在`tv:start().`或 中查看`mnesia:info().`。这是我在外壳上看到的错误。

```
** 异常退出：{中止，
                       {坏类型，
                           ＃目的{
                               键 = "我的钥匙",
                               价值=“价值”}}}
     在函数 mnesia:wrap_trans/6 中（mnesia.erl，第 395 行）

```

现在，通常情况下，我认为当创建表时使用的记录定义与插入表中的记录结构不同时会出现这样的错误。我想知道这只是我正在使用的函数的一个问题，即：`mnesia:write/3`当表名与记录名不同时，这会有所帮助。

我曾尝试删除架构并重新创建它，但都是徒劳的。当我不使用`mnesia:write/3`时，记录会正确插入表中。但是我的应用程序需求是这样的，我将创建几个不同的表，但它们存储相同的记录结构/定义。我想要不同的表，但它们的`record_info`定义是相同的。

在文档的某个地方，我读到这是很有可能的。我在跑步：**`Erlang otp R15B, mnesia-4.6 , windows 7 enterprise, 32-bit operating system, Dell laptop, intel core i5, 4GB RAM`** 我正在从事的所有其他 erlang 项目都很好，它们没有像这个一样的奇怪/意外行为。
有什么建议么 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T16:37:00.367

`{record_name, object}`创建表时必须使用该属性。例如

```
{atomic,ok} = mnesia:create_table(mytable,[
                {type,set},
                {frag_properties,[
                            {node_pool,[node()]},
                            {n_fragments,4},
                            {n_disc_copies,1}]},
                {record_name, object},
                {attributes,record_info(fields,object)}]
            ), 
```

从[文档](http://erldocs.com/R14B04/mnesia/mnesia.html?i=1&search=mnesia:create#create_table/2)：

> {record_name, Name}，其中 Name 必须是一个原子。存储在表中的所有记录都必须将此名称作为第一个元素。它默认与表的名称相同。

# c# - 将用户控件绑定到父窗口

> ID：10621811
> 
> 赞同：0
> 
> 时间：2012-05-16T15:31:00.330
> 
> 标签：c#, .net, wpf, user-controls

如何将用户控件绑定到窗口底部的父窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:27:48.710

如果要将其停靠在窗口底部，则应在其周围使用 DockPanel：

```
<DockPanel>
    <Label
        DockPanel.Dock="Bottom"
        Content="I will be docked to the bottom of the window."/>
</DockPanel> 
```

# java - java:netbeans gui按钮不能同时工作

> ID：10621813
> 
> 赞同：0
> 
> 时间：2012-05-16T15:31:08.760
> 
> 标签：java, swing, user-interface, jbutton

我的 Netbeans GUI 表单上有两个按钮。一个按钮是启动按钮，另一个是停止按钮。当我按下开始按钮时，我的代码运行良好，但是当我尝试停止时，停止按钮似乎被禁用。我无法按下停止按钮。

我的代码从 GUI 开始，这是我的启动按钮代码

```
private void jButton2MouseClicked(java.awt.event.MouseEvent evt) {
    live p=new live(); //this calls the method of my application
    p.livecapture();
} 
```

停止按钮的代码

```
private void jButton1MouseClicked(java.awt.event.MouseEvent evt) {
    mm=2;
} 
```

`livecapture()`我的方法中存在以下while循环

```
while(NewJFrame.mm!=2) {
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T15:41:17.410

建议：

*   确保您的捕获循环不在事件线程中。
*   如果在事件线程上，要么将其移开，要么使用 Swing Timer。
*   给捕获类一个将停止其循环的状态变量和一个其他类能够告诉它停止的setter方法。
*   在它的循环中，让它检查它的状态变量，如果设置，停止循环。
*   请阅读并遵循 Swing 命名约定。您的代码不遵守它们，使外人（我们！）难以阅读和理解它。

如需更多帮助，请告诉我们更多关于您的直播课程、它的作用、“捕获”时的作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T15:44:09.280

我不确定您的情况，但听起来您正在从事件调度线程 (EDT) 执行代码。这是程序中负责侦听 GUI 生成的事件（除其他外）的线程。如果您的 EDT 正忙于处理侦听器中启动按钮的代码，那么它将对发生的任何其他按钮按下视而不见。

为了防止这种情况，你应该让你的程序多线程。这在任何编程语言中都是一个巨大的话题，但这里有一个简单的例子，它可以在 Java 中使用[Swing Worker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)完成的多种方法之一：

```
class MyWorker extends SwingWorker<Void, Void> {
    public Void doInBackground() {
        // The code you want to run
        return Void;
    }
}

MyWorker thread = new MyWorker();

startButton.addActionListener( new ActionListener() {
    public void actionPerformed( ActionEvent e ) {
        thread.execute();
    }
} );

endButton.addActionListener( new ActionListener() {
    public void actionPerformed( ActionEvent e ) {
        thread.cancel();
    }
} ); 
```

# javascript - 自定义属性问题

> ID：10621814
> 
> 赞同：1
> 
> 时间：2012-05-16T15:31:14.440
> 
> 标签：javascript, html, getelementbyid

我正在尝试同时获取多个 Elements ID 的“数量”属性。

这是我尝试过的：

```
productMinimum : document.getElementsById("id1","id2").getAttribute("quantity") 
```

我怎样才能使这项工作？“id1”和“id2”元素都有“数量”属性。

这是从 HTML 端看的样子：

```
<li class="product" name="RD-101" id="id1" price="18" quantity="2">
<li class="product" name="RD-101" id="id2" price="18" quantity="4"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:34:06.300

The problem you're having is that `getElementsById()` doesn't exist (unless you've defined it elsewhere). What you *should* be using is `getElementById()`, albeit twice (as `getElementById()`, as its name implies, returns only *one* element, even if there are multiple elements with that same `id`, which is invalid mark-up, so please don't do that), and then pushing the returned elements into an array:

```
var products = [];
products.push(document.getElementById("id1"));
products.push(document.getElementById("id2")); 
```

You could, of course, create your own function to return multiple elements based on their `id`:

```
function getElementsById(ids) {
    if (!ids) {
        return false;
    }
    else {
        var elems = [];
        for (var i = 0, len = ids.length; i < len; i++) {
            if (document.getElementById(ids[i])) {
                elems.push(document.getElementById(ids[i]));
            }
        }
        return elems;
    }
}

console.log(getElementsById(['id1','id3']));​ 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/xj4WE/).

Bear in mind, though, that this returns a regular array, ***not*** a `nodeList` (as would be returned, for example, by `getElementsByClassName()`). And the returned array, even if it's only a single element, would have to be iterated over in the same way as any other array.

References:

*   [`getElementById()`](https://developer.mozilla.org/en/DOM/document.getElementById).
*   [`nodeList`](https://developer.mozilla.org/En/DOM/NodeList).
*   [`push()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:37:16.790

```
function getQuantity(id) {
 return document.getElementById(id).getAttribute("quantity");
}

var quantId1 = getQuantity('id1');
var quantId2 = getQuantity('id2'); 
```

getElement* *s* *ById 正在返回一个数组。您需要获取各个项目。如果您有很多元素，您可以按类产品选择并编写一个简单的函数来循环它们并创建一个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:33:40.627

You can only get one element at once (with `getElementById()`). If you want an array containing the quantities, use this:

```
[document.getElementById('id1').getAttribute('quantity'), document.getElementById('id2').getAttribute('quantity')] 
```

Consider using jQuery, there you can use `$('#id1, #id2')` and besides that it supports easy access to `data-` attributes - what you are doing right now is invalid HTML since `li` does not have `price` or `quantity` attributes:

```
<li class="product" name="RD-101" id="id1" data-price="18" data-quantity="2">
<li class="product" name="RD-101" id="id2" data-price="18" data-quantity="4"> 
```

To get the quantities array:

```
$('#id1, #id2').map(function() { return $(this).data('quantity'); }).get(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:35:02.430

There is no such function as `getElementsById`. you can use either `getElementsByClassName` or `getElementsByName`

[https://developer.mozilla.org/en/DOM/document.getElementsByName](https://developer.mozilla.org/en/DOM/document.getElementsByName) https://developer.mozilla.org/en/DOM/document.getElementsByClassName

Take note that `getElementsByClassName` is fairly new and not supported by older browsers.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T15:35:21.777

使用纯 JavaScript，您需要为此编写自己的函数：

```
function getQuantities() {
    var args = Array.prototype.slice.call(arguments);
    var quantityValue = 0;
    for(var i = 0; i < args.length; i++) {
        quantityValue += document.getElementsById(args[i]).getAttribute("quantity");
    }
    return quantityValue;
}

// your code
productMinimum : getQuantities("id1","id2") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T15:35:31.733

据我[了解](https://developer.mozilla.org/en/DOM/document.getElementById)，`document.getElementById`当时需要一个身份证

另外，考虑使用 html5 自定义[数据属性](http://html5doctor.com/html5-custom-data-attributes/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T15:38:38.673

没有这样的事情`getElementsById()`

但是有[`querySelectorAll`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)，但是[IE7 和更早版本不支持它](http://caniuse.com/#search=queryse)

[这是一个示例](http://jsfiddle.net/WrWQK/)，它应该在节点列表中返回这两个`<li>`。

```
document.querySelectorAll('#id1, #id2') 
```

# boost-bind - 如何使用 Boost 让类成员表现得像函数指针

> ID：10621817
> 
> 赞同：0
> 
> 时间：2012-05-16T15:31:34.760
> 
> 标签：boost-bind, member-function-pointers, boost-function

我想让一个类成员函数表现得像一个函数指针。我需要这种行为来将我自己的类集成到一些现有的代码中。

使用 Boost::function 和 Boost::bind 似乎可以做到这一点，但我似乎无法让它工作。以下代码是我用来测试我的实现的最小示例。main() 程序的最后一行是我想做的。

任何帮助是极大的赞赏。我正在使用 g++ 和 Boost 1.46。

```
// Includes
#include <boost/shared_ptr.hpp>
#include <boost/function.hpp>
#include <boost/bind.hpp>
#include <stdio.h>
using namespace std;

// Define a pure virtual base class
class Base{
    public:
        virtual double value(double v, double t) = 0;
};

// Define a derived class
class Derived : public Base{
    public:
        double value(double v, double t){
            return v*t;
        }
};

// Main program
int main(){

// A derived class
boost::shared_ptr<Derived> p(new Derived);

// Use class directly
printf("value = %f\n", p->value(100, 1));

// Create a boost::function
boost::function< double (Derived*, double, double) > f;
f = &Derived::value;
printf("f(&A, 100, 2) = %f\n", f(p.get(), 100, 2));

// Use boost::bind
printf("bind f(100,3) = %f\n", boost::bind(&Derived::value, p, _1, _2)(100,3));

// Make a boost::function to the binded operation???
boost::function< double (double, double) > f2;

f2 = boost::bind(&Derived::value, p.get()); // This is wrong

printf("f2(100,4) = %f\n", f2(100,4)); // I want to be able to do this!
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:54:00.073

根据[文档](http://www.boost.org/doc/libs/1_49_0/libs/bind/bind.html)（请参阅“将绑定与指向成员的指针一起使用”部分），您需要指定该函数具有两个参数：

```
f2=bind(&Derived::value, p.get(), _1, _2);
f2(100, 4);  // p.get()->value(100, 4) 
```

# actionscript-3 - Flixel - FlxWeapon 没有显示任何子弹

> ID：10621822
> 
> 赞同：0
> 
> 时间：2012-05-16T15:31:44.080
> 
> 标签：actionscript-3, flash, air, flixel

我尝试使用 FTP FlxWeapon 制作一些子弹（实际上是剑/匕首），但得到了一些意想不到的结果。这就是我设置 FlxWeapon 的方式：

```
 sword = new BasicSword("Sword", player, "x", "y");
            sword.makeImageBullet(15, BasicSword.SWORD_GIF,5);
            sword.setBulletDirection(FlxWeapon.BULLET_RIGHT, 400);  
            sword.setPreFireCallback(bulletDirectionCallback);
    //load FlxControl

        if(FlxG.getPlugin(FlxControl) == null){
            FlxG.addPlugin(new FlxControl);
        }
        FlxControl.player1.setFireButton("X", FlxControlHandler.KEYMODE_PRESSED, 100, sword.fire);

        }
/*A callback function, to set a proper direction before we fire the sword*/
        public function bulletDirectionCallback():void{

            if(player.facing == FlxObject.RIGHT){
                sword.setBulletDirection(0, 400); //make the bullet move to the right side with velocity of 400.
            }
            else{ //if player is facing the left direction.
                sword.setBulletDirection(180, 400); //make the bullet move to the left side with the velocity of 400.

            }

        } 
```

重要说明：
BasicSword.as 扩展了 Sword.as 和 Sword.as 扩展了 FlxWeapon。
BasicSword 和 Sword 中没有什么重要的，实际上 Sword 只有构造器，而 BasicSword 只有 SWORD_GIF。
- 我认为有效的方法：

1-回调函数。
2-一些方法和变量，例如：setFireRate() 和 bulletsFired。
3-开火按钮（FlxControl.player1.setFireButton）。

-什么不工作：
1 - 剑没有出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:49:37.167

我通过`FlxG.worldBounds.make(0,0,level.width, level.height);`在关卡本身加载后放置此代码解决了我的错误，因为早些时候（当我遇到错误时）我在创建关卡对象之后放置了此代码，但在加载它之前。所以 and 的值`level.width`是`level.height`0 和 0。

# perl - sed + removes all leading and trailing whitespace from each line on solaris system

> ID：10621828
> 
> 赞同：3
> 
> 时间：2012-05-16T15:32:02.733
> 
> 标签：perl, sed, awk, solaris

I have a Solaris machine (SunOSsu1a 5.10 Generic_142900-15 sun 4vsparcSUNW,Netra-T2000).

The following sed syntax removes all leading and trailing whitespace from each line (I need to remove whitespace because it causes application problems).

```
 sed 's/^[ \t]*//;s/[ \t]*$//' orig_file > new_file 
```

But I noticed that sed also removes the "t" character from the end of each line.

Please advise how to fix the sed syntax/command in order to remove only the leading and trailing whitespace from each line (the solution can be also with Perl or AWK).

Examples (take a look at the last string - set_host)

1)

Original line before running sed command

```
 pack/configuration/param[14]/action:set_host 
```

another example (before I run sed)

```
 +/etc/cp/config/Network-Configuration/Network-Configuration.xml:/cp-pack/configuration/param[8]/action:set_host 
```

2)

the line after I run the sed command

```
 pack/configuration/param[14]/action:set_hos 
```

another example (after I run sed)

```
 +/etc/cp/config/Network-Configuration/Network-Configuration.xml:/cp-pack/configuration/param[8]/action:set_hos 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:48:26.780

我刚刚想到你可以使用一个字符类：

```
sed 's/^[[:space:]]*//;s/[[:space:]]*$//' 
```

这发生在您的`sed`和 gnu sed 中，`--posix`因为（显然）posix 将 the 解释`[ \t]`为空格、 a`\`或 a `t`。您可以通过放置文字选项卡而不是 来解决此问题`\t`，最简单的方法可能是`Ctrl`+ `V` `Tab`。如果这不起作用，请将模式放入文件中（使用文字标签）并使用`sed -f patterns.sed oldfile > newfile`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:37:58.080

正如@aix 指出的那样，问题无疑是您`sed`不了解`\t`. 虽然 GNU`sed`有，但许多专有的 Unix 风格却没有。HP-UX 是其中之一，我相信 Solaris 也是。如果您无法安装 GNU `sed`，我会使用 Perl：

```
perl -pi.old -e 's{^\s+}{};s{\s+$}{}' file 
```

...将修剪一个或多个前导空格 (^\s+) [空格和/或制表符] 以及尾随空格 (\s+$) 就地更新文件，将备份副本保留为“file.old”。

# c# - ChangePassword() 方法不起作用

> ID：10621833
> 
> 赞同：0
> 
> 时间：2012-05-16T15:32:21.803
> 
> 标签：c#, sqlite

```
string connectionString = ConfigurationManager.ConnectionStrings["connection"].ConnectionString;
SQLiteConnection connString = new SQLiteConnection(connectionString);
using (var command = connString.CreateCommand())
{           
     try
     {
          connString.SetPassword(ConfigurationManager.AppSettings["password1"]);

          connString.Open();
          connString.ChangePassword((String)null);
          connString.ChangePassword(ConfigurationManager.AppSettings["password2"]);
          connString.Close();
          connString.Dispose();
     }
     catch (Exception e)
     {
          Console.Write(e.Message + "\n" + e.StackTrace);
     }
} 
```

我正在尝试通过一个简单的控制台应用程序来测试 SQLite。我正在使用 app.config 文件从中读取密码和连接字符串。该代码能够在第一次运行时设置密码，但是如果我打开连接并尝试通过调用 ChangePassWord() 方法更改密码，则密码不会更改。我也尝试将密码设置为空，然后将其重置为一些新密码，但这也不起作用。

错误是 *打开的文件不是数据库文件。文件已加密或不是数据库*

其他一些人也有同样的问题：[ChangePassword method problem](http://sqlite.phxsoftware.com/forums/p/3075/10789.aspx#10789)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:12:05.093

我不是百分百确定。但出于某种原因，从 app.config 读取连接字符串可能会对其产生一些影响。我取出连接字符串并决定像这样对其进行硬编码

```
SQLiteConnection connString = new SQLiteConnection("data source=\".\\SomeDatabase\""); 
```

之前是这样的：

```
<connectionStrings>
    <add name="connection"
        connectionString="data source=&quot;.\SomeDatabase&quot;"
        providerName="System.Data.SQLite" />
</connectionStrings> 
```

希望这可以帮助某人

# iis - Can I create a search engine friendly URL from this custom ColdFusion CMS URL?

> ID：10621834
> 
> 赞同：0
> 
> 时间：2012-05-16T15:32:29.550
> 
> 标签：iis, coldfusion, url-rewriting, coldfusion-6

I have inherited a custom ColdFusion CMS app. The URL's that it creates are horrendous. Not at all suitable for SEO or readability for that matter. An example of a URL in this CMS is:

[http://www.mysite.com/Index2.cfm?a=000003,000010,000019,001335](http://www.mysite.com/Index2.cfm?a=000003,000010,000019,001335)

Basically, each level of hierarchy is stored in the database based upon that long string of comma separated values. So in the case of the example I used, that particular page is 4 levels deep in the CMS hierarchy.

Basically what I would like to see is a format similar to this

[http://www.mysite.com/level-1/level-2/level-3/level-4](http://www.mysite.com/level-1/level-2/level-3/level-4)

Is this possible? Any help would be greatly appreciated. For what it's worth we are using ColdFusion 6 at present time, but will be upgrading to 8 in the near future.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:56:09.673

首先，你愿意在 URL 中有 index.cfm 吗？喜欢：[http](http://www.mysite.com/index.cfm/level-1/level-2/level-3/level-4) ://www.mysite.com/index.cfm/level-1/level-2/level-3/level-4 ？如果没有，那么您需要进行重写以删除 index.cfm，但仍允许 CF 处理该页面。您的 .htaccess 看起来像这样：

```
RewriteEngine On

# If it's a real path, just serve it
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule . - [L]

# Redirect if no trailing slash
RewriteRule ^(.+[^/])$ $1/ [R=301,L]

# Rewrite URL paths
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} !-d
RewriteRule ^([a-zA-Z0-9/-]+)$ /index.cfm%{REQUEST_URI} [PT] 
```

下一步，您需要“捕捉”这些 URL，并根据对 SEO 友好的 URL 提供正确的页面。您可以从 CGI.path_info 变量中获取传入的 URL。在不知道代码当前如何处理这些 URL 变量的情况下，很难知道您的代码应该是什么样子，但本质上，您将拥有某种映射函数来获取对 SEO 友好的名称并替换为数字以获取内容。

第三步是重写您的 CMS 生成的任何 URL，以输出对 SEO 友好的 URL。同样的映射在这里发生，只是相反。

# javascript - check which flash plugin version between "internet explorer" or "Other browsers" is installed on the client

> ID：10621835
> 
> 赞同：1
> 
> 时间：2012-05-16T15:32:30.257
> 
> 标签：javascript, windows, flash, internet-explorer

if you go on [http://get.adobe.com/it/flashplayer/otherversions/](http://get.adobe.com/it/flashplayer/otherversions/) you can find there are two "current" flash player plugin version available for windows

*   one for internet explorer
*   one for the other browsers

Normally users need only one version installed (or even zero, if they use Chrome and the shipped version with it)

Unfortunately I have an external plugin that communicate with the browser and It needs explicitly installed the internet explorer plugin, also if the user navigate with Firefox.

For this reason I need to check not only if there is a flash plugin installed, but also if is installed the specified explorer version!

Is there a pure-javascript solution to make this check? ATM I loop over all the plugins in the browser searching for a specifed-name dll, but

*   it's ugly and I'm ashamed to do something like that
*   it's bugged: today I found my check failed, because the adobe-distributed plugin filename changed to from `NPSWF32.dll` to `NPSWF32_11_2_202_235.dll`

thanks

# eclipse - Generalized Steps for configuring imported jsf project's libraries in eclipse

> ID：10621836
> 
> 赞同：0
> 
> 时间：2012-05-16T15:32:30.657
> 
> 标签：eclipse, jsf, tomcat6, taglib

i have checked similar posts and have googled but could not find an eligible answer to this. When ever i import a jsf project from some other system (where its working fine) OR delete the tomcat server in eclipse and add new server back again...there are lots of tag libs and imports that go "unresolved". Such applications are often not created by me and i dont exactly know which libraries are to be added to configure and fix project in eclipse. I want to ask, is there any general way to find out all the required libraries for any imported jsf project and then add them.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:57:34.310

[Download](http://javaserverfaces.java.net) the `javax.faces.jar` file and drop it in project's `/WEB-INF/lib` folder.

That's all.

# jquery - jquery chain actions

> ID：10621837
> 
> 赞同：0
> 
> 时间：2012-05-16T15:32:33.793
> 
> 标签：jquery

I would like to have a button on my page that scrolls to top of the page and then slides down a div.

this is what I have:

```
$(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

    $('.show_hide').click(function(){
        $("html, body").animate({ scrollTop: 0 }, 1000);
        $(".slidingDiv").slideToggle(500);
    });

}); 
```

the problem is that when the animate scrolltop ends the div have already slided, how can I chain the actions?

thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:34:51.170

The [animate](http://api.jquery.com/animate/) function takes a function argument, that can be called once the animation is complete.

> .animate( properties [, duration] [, easing] [, complete] )

*   properties - A map of CSS properties that the animation will move toward.
*   duration - A string or number determining how long the animation will run.
*   easing - A string indicating which easing function to use for the transition.
*   **complete - A function to call once the animation is complete.**

You can change your code to:

```
$(document).ready(function(){

    $(".slidingDiv").hide();
    $(".show_hide").show();

    $('.show_hide').click(function(){
        $("html, body").animate({ scrollTop: 0 }, 1000, 'linear', function(){
            $(".slidingDiv").slideToggle(500);
        });
    });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:36:41.173

使用动画函数的[完整回调](http://api.jquery.com/animate/#complete)功能。这仅在动画完成时触发。

jQuery：

```
$(document).ready(function() {

    $(".slidingDiv").hide();
    $(".show_hide").show();

    $('.show_hide').click(function() {
        $("html, body").animate({
            scrollTop: 0
        }, 1000, function() {
            $(".slidingDiv").slideToggle(500);
        });
    });
});​ 
```

这是一个**[jsFiddle 示例](http://jsfiddle.net/j08691/U7Duj/)**。

> **功能齐全**
> 
> 如果提供，则在动画完成后触发完整的回调函数。这对于将不同的动画按顺序串在一起很有用。回调没有发送任何参数，但它被设置为动画的 DOM 元素。如果为多个元素设置了动画，则每个匹配的元素都会执行一次回调，而不是对整个动画执行一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:35:37.157

像这样在动画的完整回调中插入您的 SlideToggle

```
$('.show_hide').click(function(){
        $("html, body").animate({ scrollTop: 0 }, 1000,function(){
            $(".slidingDiv").slideToggle(500);
        });

    }); 
```

检查[$.animate](http://api.jquery.com/animate/)文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:34:22.390

Using the queue functionality in jquery: [http://api.jquery.com/queue/](http://api.jquery.com/queue/)

# jquery - Add class to a table row that contains columns with certain values

> ID：10621838
> 
> 赞同：0
> 
> 时间：2012-05-16T15:32:38.923
> 
> 标签：jquery, jquery-selectors, matching

I need to add a class to a `tr` when it contains `td`'s that contain certain values.

Using the answer to [this question on SO](https://stackoverflow.com/questions/9101928/jquery-get-element-that-has-element-with-specific-value), I thought I found the solution, but it doesn't seem to work on rows that contains multiple columns - it only works if there is a single `td`.

**How can I identify the table rows that contain columns with certain values, among other columns?** Please note that the columns will not always be in certain order, so it must be a dynamic answer.

[The jsFiddle](http://jsfiddle.net/CquBh/)

```
<table>
    <tr>
        <td>Hey!</td>
        <td>Other column</td>
        <td>Yo!</td>
        <td>Other column2</td>        
    </tr>
</table>

<script type="text/javascript">
$('tr').each(function(){
 if (($(this).find('td').text() == 'Hey!' ) && ($(this).find('td').text() == 'Yo!' ))
 {
     alert('here');
     $(this).addClass('disabled');
 }
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:39:38.413

关于什么：

```
$('td:contains("Hey!"),td:contains("Yo!")').parent('tr').addClass('disabled'); 
```

?

或者确保两者都存在

```
$('tr').each(function(){

    if($('td:contains("Hey!")').length > 0 && $('td:contains("Yo!")').length > 0)
        $(this).addClass('disabled');

}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:40:42.760

正如其他人所提到的，使用 jQuery 的`:contains(text)`选择器：

```
$('tr').each(function(){
   if($('td:contains("Hey!")', this).length && $('td:contains("Yo!")', this).length){       
        alert('here');
        $(this).addClass('disabled');
    }
}); 
```

类似的东西。

***编辑***

更新了我的答案以使用`length`而不是 jQuery 的`size()`函数。向那些张贴证据支持使用`length`速度更快的人表示敬意。在做了我自己的一些基础研究之后，在 jQuery 文档中遇到了这个：

> .size() 方法在功能上等同于 .length 属性；但是，首选 .length 属性，因为它没有函数调用的开销。

鉴于此，加上下面的测试用例，我被卖掉了。想知道为什么`size()`甚至存在？我的想法是，这是因为 jQuery 返回的某些对象不是数组，而只是*表现*得像数组，并且考虑到 using`size()`更可取。似乎后者，至少，不是这样。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:39:39.577

使用[包含选择器](http://api.jquery.com/contains-selector/)

```
$("td:contains('Hey!'), td:contains('Yo!')").each(function(){
   alert('here');
   $(this).parent().addClass('disabled');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:45:38.037

这是一种解决方案：

```
var search = ["Hey!", "Yo!"];

$("tr").filter(function() {
    var found = 0;
    $(this).children().each(function() {
        var text = $(this).text();
        for (var i = 0; i < search.length; i++) {
            if (text == search[i]) found++;
        }
    });
    return found == search.length;
}).addClass("disabled");​ 
```

**演示：http:** [//jsfiddle.net/Tnq9A/1/](http://jsfiddle.net/Tnq9A/1/)

* * *

如果不需要文字的绝对重合而是部分重合，可以使用这种比较方法：

```
if (text.indexOf(search[i]) != -1) found++; 
```

**演示：http:** [//jsfiddle.net/Tnq9A/2/](http://jsfiddle.net/Tnq9A/2/)

# ios - iOS: TouchXML xmlReadMemory VS xmlParseMemory

> ID：10621842
> 
> 赞同：0
> 
> 时间：2012-05-16T15:32:56.047
> 
> 标签：ios, xml, xcode, soap, touchxml

I tried to use 2 different implementations of TouchXML, one provided with SudzC and the other from [TouchXML github repo](https://github.com/TouchCode/TouchXML). There is a little difference between them, consisting in the initialization of the CXMLDocument:

**GitHub:**

```
CFStringEncoding cfenc = CFStringConvertNSStringEncodingToEncoding(encoding);
CFStringRef cfencstr = CFStringConvertEncodingToIANACharSetName(cfenc);
const char *enc = CFStringGetCStringPtr(cfencstr, 0);
theDoc = htmlReadMemory([inData bytes], [inData length], NULL, enc, HTML_PARSE_NONET | HTML_PARSE_NOBLANKS | HTML_PARSE_NOWARNING); 
```

**SudzC version**

```
theDoc = xmlParseMemory([inData bytes], [inData length]); 
```

The problem is in the output, cause when querying the rootElement of the GitHub version it returns "soap:Envelope" and SudzC version returns "Envelope".

Could you please explain me why do I get different versions of output and how could I obtain in the GitHub version the output without "soap:" prefix?

Thanks in advance. I hope I have given enough information.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:16:40.993

我遇到了同样的问题，我发现它与 TouchXML 版本的差异有关。GitHub 版本包含前缀解析实现，而 SudzC 版本没有。

# locking - 如何以编程方式检查 Infomatica 目标数据库表是否被锁定？

> ID：10621849
> 
> 赞同：1
> 
> 时间：2012-05-16T15:33:45.937
> 
> 标签：locking, etl, netezza, informatica-powercenter

有没有办法检查目标表是否被锁定在 Informatica PowerCenter 的目标数据库中以进行 ETL 工作流负载 (L) 过程？或者是否可以获得所有 Informatica 会话中所有锁定表的列表？如果有一种方法可以在 Netezza DBMS 中直接检查哪些表被锁定，那也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:23:20.877

在 Netezza 中查询系统表`_T_PG_LOCKS`将显示当前处于活动状态的锁。您可以使用查找、SQL 或存储过程转换在映射中执行此操作，并根据输出应用逻辑。

还有一个名为 Netezza 的实用程序`nz_show_locks`，可以在安装的“bin”文件夹中找到 - 如果您需要使用命令任务在工作流级别检索锁，这很方便，例如，如果您只想执行会话任务如果数据库上没有锁。

# asp.net-mvc-3 - 如何将 Orbeon 表单嵌入到 ASP.Net MVC3 应用程序中？

> ID：10621851
> 
> 赞同：1
> 
> 时间：2012-05-16T15:33:53.800
> 
> 标签：asp.net-mvc-3, orbeon

**背景**

> 我正在研究使用 Orbeon Forms 来集成到我们的 ASP.NET MVC3 Web 应用程序中，方法是构建一个简单的 MVC3 应用程序来解决问题。
> 
> 我有一个在我们的 HyperV 服务器上运行 Tomcat 7 和 Orbeon 3.9.1 PE 试用版的 Win2008 R2 标准服务器。这是可行的，我可以创建表单，然后使用表单提交数据。
> 
> 我在本地开发机器上创建了一个空的 MVC3 应用程序。它在 Home 控制器上有一个 Index 操作，该操作返回一个页面，该页面有一堆链接，这些链接指向我在 Orbeon 安装上的一些表单的添加新 URL。链接访问 Home 控制器上的 Add 操作，该控制器使用 WebRequest 对象和末尾标记的 ?orebeon-embeddable=true 查询字符串参数来获取 Orbeon 提交表单页面的定义。我将返回的相对 URL 替换为绝对 URL。然后我将其插入基本视图并显示它。

**问题**

> 然而！无论如何，只要我确实与 Orbeon 表单交互，例如在单行文本框字段 (IE9) 内单击，我就会在脚本文件“orbeon-[random guid style value].js”第 121 行中收到 JS 错误。 “AjaxServer.exceptionWhenTalkingToServer(e,formID)”突出显示，错误为“formID 未定义”。
> 
> 我不知道从哪里开始看这里，因为我不熟悉 Tomcat，只知道我可以从 Orbeon 文档中破译什么。
> 
> 有人尝试像这样嵌入表单运行器并遇到此错误吗？

**我接下来尝试了什么**

> [更新]：MVC Json() 方法让我想到，也许我在 VM 上设置的 Orbeon 测试站点不喜欢它从我的开发机器上的 MVC 应用程序获取 AJAX 请求的事实。[考虑到这一点，我尝试将 CORS 过滤器从dzhuvinov.com](http://software.dzhuvinov.com/cors-filter.html)安装到 Orbeon 应用程序中 。根据将相关配置添加到 web.xml 文件后的文档，默认行为是非常不受限制的，即它应该让一切都通过。不幸的是，在重新评估 Tomcat 之后，这并没有帮助。
> 
> [更新 2]：好吧，似乎 CORS 文档有点过时了，默认值似乎相反，因此设置初始值似乎可以解决这个问题 - 尽管 IE9 仍然收到 JS 错误消息。与此同时，在 FireFox 12 中，情况正在好转，但现在的问题是如何传递 JSESSIONID cookie Orbeon 在我将运行器嵌入 MVC 视图时将我发回，这样当您触发 Orbeon 表单上的任何 AJAX 时，它会发送 JSESSIONID cookie也是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:32:01.953

好吧，我想我的标题和信息有点误导，所以我不妨用下面的“答案”来结束我自己的问题。

为了嵌入 MVC3 应用程序（读取为我想象的任何非 Java 后端）Orbeon Forms Runner 并让它工作，我必须执行以下操作：

1.  [为我在 Tomcat 7 ( Dzhuvinov.com](http://software.dzhuvinov.com/cors-filter.html) )上安装 Orbeon Forms 配置 CORS 过滤器以允许跨域 AJAX。
2.  在从 Orbeon 返回的 HTML 部分中，使相对 URL 开始 /orbeon/xforms-server/ 对自定义代理的绝对调用。将 JSESSIONID 存储在 ASP.NET MVC 会话对象中。
3.  为代理编写控制器操作以处理请求。在使用存储在 (2) 中的值设置 JSESSIONID cookie 后，这个简单的代理将请求转发到 Orbeon Forms 安装。

# sql - 带有 where 子句的 SQL 求和函数

> ID：10621852
> 
> 赞同：1
> 
> 时间：2012-05-16T15:33:54.450
> 
> 标签：sql, sql-server-2008

我正在使用 MsSQL，我想在满足某些条件的情况下添加一些值。是否可以在 sum() 函数中使用 WHERE 子句？或者是否有与 excel SUMIF() 等效的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:35:35.133

`SUM`聚合只会对受子句约束的结果集进行操作`WHERE`。

换句话说，是的，这很好。

```
SELECT SUM(days)
FROM myTable
WHERE something = another 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:37:06.540

你可以使用[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)：

```
SELECT SUM(CASE WHEN YourCondition=1 THEN 1 ELSE 0 END)
FROM YourTable 
```

# java - Using TransferHandler to drag and drop from one JFrame into another JFrame

> ID：10621854
> 
> 赞同：1
> 
> 时间：2012-05-16T15:34:03.603
> 
> 标签：java, swing, drag-and-drop, jframe

I set a personal TransferHandler to my component:

```
myComponent.setTransferHandler(new PersonalTransferHandler());

class PersonalTransferHandler extends TransferHandler {
   public boolean canImport(JComponent comp, DataFlavor[] flavour) {
    ... 
   }
   protected boolean hasFlavor(DataFlavor[] flavors) {
    ... 
   }
   public boolean importData(JComponent comp, Transferable t) {
    ...
   } 
```

Also I have a **JTable** with draggable elements (using another TransferHandler). I would like to copy elements from the **JTable** into **myComponent**. It works fine if the **JTable** is in the same JFrame that **myComponent** but if it is in a different JFrame I can drag the elements but I cannot drop into the compoment (the PersonalTransferHandler methods are not ever invoked).

# macos - 在 WYSIWYG Mac 应用程序中布置用于打印的图像的最佳实践？

> ID：10621858
> 
> 赞同：0
> 
> 时间：2012-05-16T15:34:13.933
> 
> 标签：macos, cocoa, printing, core-graphics, quartz-2d

我正处于 Mac 应用程序的概念阶段，它应该让用户轻松选择和布局图像以进行打印。这是一个基于文档的应用程序，一个文档可以有多个页面，上面有很多不同大小和旋转的图片。UI 有点像 Pages.app 的 UI。

这些图片可能是大的高分辨率图像。用户还应该能够以图像提供的最佳质量打印它们。

我重新观看了一些关于 Quartz、2D 绘图优化和 NSView 的 WWDC 会议。

我知道有几种不同的方法可以完成我想做的事情，即：

1.  `drawRect:`为“页面”使用自定义视图并使用 Core Graphics/Quartz绘制图像。使用 CG 变换来旋转和缩放图像。

2.  也为“页面”使用自定义视图，但使用 NSImageView-subviews 来显示图像。使用核心动画和图层变换来缩放/旋转图像。

对此的最佳做法是什么？使用 Core Graphics 绘图还是使用 NSViews？为什么？

非常感谢！

*   约翰内斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:44:36.293

取决于这些页面的交互性。如果有很多鼠标交互，例如拖动、选择等。我会选择视图。如果您想要流畅的动画，我什至会使用普通的 CALayers，并将其内容设置为一张图像。这也可以让您对图像进行 zPosition 以防它们重叠。基于视图的解决方案使 z 排序变得困难。drawRect 方法应该是最快的，但是您很难集成用户交互，并且您必须手动进行 z-order。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:19:58.350

这是我打开我的两个 Apple 技术支持事件之一时得到的回复：

> 嗨约翰内斯，
> 
> 感谢您就有关打印和构建应用程序通用 UI（带视图）的不同方法的问题联系 Apple DTS。
> 
> 有一种趋势是在 OS X 中使用支持层的视图（利用核心动画层），其动机是能够在需要时轻松地为应用程序的用户界面设置动画，而几乎不需要做任何工作。但是，在打印方面，您最好为自定义视图实现 drawRect ，以便在渲染到打印上下文时可以以“全分辨率”绘制视图内容。
> 
> 相反，如果您使用图层支持的视图作为这些图层来“renderInContext”，则图层内容将用于渲染，通常不会将其设置为源文档/图像的完整分辨率。这是因为图层支持的视图需要额外的内存来存储这些位图（缓存的图层内容），因此，建议它们的大小适合屏幕（可能不一定适合打印页面的大小）。
> 
> 这是否有助于指导您的应用程序架构？请告诉我。

所以基本上这意味着使用图层支持的视图可能会导致次优的打印质量。我已经回答了一些后续问题（“如何`wantsLayer = NO`在打印帮助之前设置 rootView？”），并会在我得到答案后立即发布答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T15:06:24.527

这三种方法都应该有效。由于无论如何您都应该使用按比例缩小的大图像表示，我认为不会有太大区别。做你觉得最舒服的事情。

我的猜测只是使用支持图层的 NSViews（一个可拖动的图像）可能最适合初学者。如果您发现性能不足，您可以随时进行微优化。请注意，您可能必须使您的视图比图像大一点，以便您可以在它们之外绘制选择手柄。

这一切都假设您*永远*不想做更复杂的绘图。

# c++ - 如何为模板类的成员函数定义静态数组？

> ID：10621860
> 
> 赞同：2
> 
> 时间：2012-05-16T15:34:17.527
> 
> 标签：c++, arrays, templates, static, function-pointers

我想做以下事情：-

```
#include <iostream>

template <typename I>
class A {
  public:
    I member_;
    void f() {}
    void g() {}
    typedef void (A::*fptr) ();
    static const fptr arr[];
};

template <typename I>
A<I>::fptr A<I>::arr[] = {
  &A<I>::f,
  &A<I>::g
}; 
```

我该怎么做呢？我收到以下错误：-

```
g++ memeber_func_ptr_array.cpp 
memeber_func_ptr_array.cpp:14:1: error: need ‘typename’ before ‘A<I>::fptr’ because ‘A<I>’ is a dependent scope
memeber_func_ptr_array.cpp:17:2: error: expected unqualified-id before ‘;’ token 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T15:38:09.157

两件事情。

1.  `fptr`是一个[依赖类型](http://pages.cs.wisc.edu/~driscoll/typename.html)，所以你需要`typename`：

    ```
    template <typename I>
    const typename A<I>::fptr A<I>::arr[2] = { // also note the 2 and the const
      &A<I>::f,
      &A<I>::g
    }; 
    ```

    正如 jrok 在评论中指出的那样，您的声明也是`const`如此，定义也必须如此`const`。

2.  客户端代码（仅包含标题的文件）需要知道数组有多大，因此您需要声明中数组的实际大小：

    ```
    static const fptr arr[2]; // include size 
    ```

    只有在同一个地方声明和初始化数组时，才能使用数组大小​​的自动扣除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:38:02.407

您需要`const typename`在`A<I>::fptr`. 在`typename`那里告诉编译器这`fptr`是`A<I>`.

您可能需要查看 Vandevoorde 和 Josuttis 的 C++ 模板：完整指南以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:37:47.113

用作`typename`：

```
 template <typename I>
  typename A<I>::fptr A<I>::arr[] = { &A<I>::f, &A<I>::g };
//^^^^^^^^note this 
```

这是因为`fptr`是*依赖*类型。

# .net - How can I make XmlSerializer work with xsi:type?

> ID：10621866
> 
> 赞同：3
> 
> 时间：2012-05-16T15:34:47.910
> 
> 标签：.net, xml-serialization, xmlserializer

I have the following fairly simply XML that I'm trying to deserialize:

```
<props xmlns:xsd="http://www.w3.org/2001/XMLSchema"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://foo.com/bar">
  <prop name="foo1" xsi:type="xsd:string">bar1</prop>
  <prop name="foo2" xsi:type="xsd:int">2</prop>
</props> 
```

When I run XSD.exe over this XML to produce a schema and then run it again to produce C# classes, I end up with highly-decorated versions of the following:

```
public partial class props
{
    [XmlElement("prop", IsNullable = true)]
    propsProp[] Items { get; set; }
}

public partial class propsProp
{
    [XmlAttribute]
    public string name { get; set; }
    [XmlText]
    public string Value { get; set; }
} 
```

Now when I try to deserialize the XML into these classes using XmlSerializer, I get the following exception:

> System.InvalidOperationException: There is an error in XML document (4, 4). --->
> System.InvalidOperationException: The specified type was not recognized: name='string', namespace='http://www.w3.org/2001/XMLSchema', at <prop xmlns='http://foo.com/bar'>.

The `xsi:type` attribute is presumably there to facilitate some polymorphism on the `prop` value, but I don't care about that - I just want the value in a C# property.

What am I doing wrong here? How can I get that XML into a C# class?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-21T17:12:00.823

我遇到了完全相同的问题，它的解决方案对于引用预定义类型非常简单，但对于原始类型来说有点棘手。

首先使用 Using 有什么好处`xsi:type`。我发现这个[链接](https://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.wst.xmleditor.doc.user%2Ftopics%2Ftxsityp.html)非常有用，它可以帮助我解决问题。

所以我们`xsi:type`在 XML 中使用来指代驱动类型，例如下面：

```
 <X xsi:type="X1"> 
```

意味着 X 和 X1 是相互驱动的类型，所以我通过使用继承来修复反序列化，通过为子类型创建一个新类并使其从父类型继承，我们还需要创建它的列表：

```
 [XmlRoot(ElementName = "X1")]
    public class X1: X
    {
    }

    [XmlRoot(ElementName = "X1List")]
    public class X1List
    {
        [XmlElement(ElementName = "X1")]
        public X1 X1{ get; set; }
    } 
```

在另一个已经使用 X 的类中，还添加 X1，如下所示：

```
[XmlRoot(ElementName = "Container")]
public class Container
{
    ...
    [XmlElement(ElementName = "XList")]
    public POCList XList{ get; set; }
    [XmlElement(ElementName = "X1List")]
    public X1List X1List{ get; set; }
    ...
    [XmlAttribute(AttributeName = "xsi", Namespace = "http://www.w3.org/2000/xmlns/")]
    public string Xsi { get; set; }
} 
```

这应该解决反序列化。

对于原始类型，这将是一个棘手的问题，但您可以使用带有约束的泛型来实现相同的解决方案。

# cocoa - 在 Xcode 4 中添加 Sparkle 框架

> ID：10621870
> 
> 赞同：2
> 
> 时间：2012-05-16T15:34:56.537
> 
> 标签：cocoa, xcode4, sparkle

我完全陷入了一个可能非常简单的操作中......将 Sparkle 添加到在 Xcode 4 中创建的项目中。我做了这些操作：

*   将 Sparkle.framework 添加到我的项目中（拖放）
*   添加到“链接二进制与库”，但它产生了这个错误：

    dyld：库未加载：@loader_path/../Frameworks/Sparkle.framework/Versions/A/Sparkle 引用自：/Users/me/Library/Developer/Xcode/DerivedData/MyApp-esurnmkwvxcgcxbbrdgsobkoimfv/Build/Products/Release/Myapp .app/内容/MacOS/MyApp

    原因：找不到图片

*   删除以“将二进制文件与库链接”
*   添加到“复制捆绑资源”
*   在 SUUpdater 上添加一个实例到 mainMenu.xib
*   是否需要每个配置步骤（创建私钥、上传文件和 rss 等）

当我启动我的应用程序时，我收到一个警告：

```
Unknown class 'SUUpdater', using 'NSObject' instead. Encountered in Interface Builder file at path /Users/...etcetcetc 
```

显然由于这个警告，更新程序永远不会启动。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T03:20:23.557

您还需要将 Sparkle 框架导入到您的类的头文件中：

```
#import <Sparkle/Sparkle.h>

@implementation YourClass : NSObject
{

} 
```

您的问题中没有提到这是您已采取的步骤之一，因此我假设它尚未完成。

# perl - 仅在本地调用的嵌套 Perl 子程序有什么问题吗？

> ID：10621877
> 
> 赞同：2
> 
> 时间：2012-05-16T15:35:15.820
> 
> 标签：perl, memory, scope, nested

如果我有以下代码

```
sub a {
    my $id = shift;
    # does something
    print &a_section($texta);
    print &a_section($textb);
    sub a_section {
        my $text = shift;
        # combines the $id and the $text to create and return some result.
    }
} 
```

假设`a_section`仅由 调用`a`，我会遇到内存泄漏、变量可靠性或其他问题吗？

我正在探索这个作为替代方案，这样我就可以避免传递`$id`到`a_section`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T15:47:37.827

首先，它不是私人潜艇。从外面完全可以看到。二，你会有问题。

```
$ perl -wE'
   sub outer {
      my ($x) = @_;
      sub inner { say $x; }
      inner();
   }
   outer(123);
   outer(456);
'
Variable "$x" will not stay shared at -e line 4.
123
123     <--- XXX Not 456!!!! 
```

你可以这样做：

```
sub a {
    my $id = shift;

    local *a_section = sub {
        my $text = shift;
        # combines the $id and the $text to create and return some result.
    };

    print a_section($texta);
    print a_section($textb);
} 
```

（您可以使用递归调用内部子程序`a_section(...)`。）

或者：

```
sub a {
    my $id = shift;

    my $a_section = sub {
        my $text = shift;
        # combines the $id and the $text to create and return some result.
    };

    print $a_section->($texta);
    print $a_section->($textb);
} 
```

（`__SUB__->(...)`如果您想递归调用内部子程序以避免内存泄漏，请使用，在 Perl 5.16+ 中可用。）

# iphone - iOS 中的 MVC 设计

> ID：10621880
> 
> 赞同：0
> 
> 时间：2012-05-16T15:35:29.240
> 
> 标签：iphone, ios, xcode, model-view-controller

我正在创建一个 iPhone 应用程序，它允许您指定某些条件，从 Web 服务获取事件列表，并在表格视图中列出事件，以便用户可以将单个事件添加到他们的日历中。

我应该如何使用 MVC 模式来解决这个问题？将使用 JSON。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:26:08.833

用户日历和事件列表以及获取它们的方式是模型。表视图是视图。将两者粘合在一起的类是控制器。如果我们在这里讨论通用架构，您是否使用 JSON 或其他任何东西都没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:43:17.370

如果您打算使用基于 JSON 的 Web 服务，您可能需要查看 AFNetworking。我编写了一个与 AFN 一起使用的网络类，请查看[此 SO 帖子](https://stackoverflow.com/questions/10618056/how-to-post-more-parameters-with-image-upload-code-in-ios/10618557#10618557)以获取代码。

# java - 如何将 ARGB 转换为 RGB 字节数组？

> ID：10621887
> 
> 赞同：-1
> 
> 时间：2012-05-16T15:35:53.173
> 
> 标签：java, rgb, argb

我有一个字节数组：

```
byte[] blue_color = {-1,0,112,-64}; 
```

如何转换成RGB的字节数组？

还有如何获得颜色的真实RGB值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:38:02.803

假设它是 A 组件的第一个元素：

```
byte[] rgb = Arrays.copyOfRange(blue_color, 1, 4); 
```

要获得“真实”颜色值，您需要撤消二进制补码表示：

```
int x = (int)b & 0xFF; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:57:19.637

如何将 ARGB 数组转换为 RGB？

```
 byte[] argb = ...;
byte[] rgb = new byte[(argb.length / 4) * 3];

int index = rgb.length - 1;

for (int i = argb - 1; i >= 0; i -= 4) {
  rgb[index--] = argb[i];
  rgb[index--] = argb[i - 1];
  rgb[index--] = argb[i - 2];
} 
```

如何打印整数值：

```
 byte[] oneColor = {..., ..., ..., ...};

int alpha = oneColor[0] & 0xFF;
int red = oneColor[1] & 0xFF;
int green = oneColor[2] & 0xFF;
int blue = oneColor[3] & 0xFF;

System.out.println("Color: " + alpha + ", " + red + ", " + green ", " + blue);

System.out.println("Hexa color: 0x" + Integer.toHexString(alpha) + " " + Integer.toHexString(red) + " " + Integer.toHexString(green) + " " + Integer.toHexString(blue)); 
```

可以做得更漂亮`printf`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:56:56.547

> 如何转换成RGB的字节数组？

```
byte[] rgb = new byte[3];
System.arraycopy(blue_color, 1, rgb, 0, 3); 
```

* * *

> 还有如何获得颜色的真实RGB值？

```
int red = rgb[0] >= 0 ? rgb[0] : rgb[0] + 256;
int green = rgb[1] >= 0 ? rgb[1] : rgb[1] + 256;
int blue = rgb[2] >= 0 ? rgb[2] : rgb[2] + 256; 
```

# javascript - Smart Mobile Studio 中的正则表达式

> ID：10621890
> 
> 赞同：3
> 
> 时间：2012-05-16T15:35:58.717
> 
> 标签：javascript, regex, delphi, smart-mobile-studio

如何在[Smart Mobile Studio](http://www.op4js.com)中使用正则表达式？例如，我如何在 Object Pascal 中编写以下示例？

```
var re = /\w+\s/g;  
var str = "fee fi fo fum";  
var myArray = str.match(re);  
console.log(myArray); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T16:23:57.557

在 SmartMS 中，正则表达式是在 w3regex 单元中实现的，因此您首先要添加`w3regex`到`uses`列表中。

不支持“短”形式（例如`var re = /\w+\s/g;`来自问题）。要创建正则表达式对象，您必须使用构造函数。

```
re := TW3RegEx.Create('\w+\s', 'g'); 
```

内置字符串对象不支持正则表达式匹配。为了简化使用，该`w3regex`单元实现了字符串助手，将匹配、替换、搜索和拆分方法引入字符串对象。

您的代码的直接翻译将是

```
var re := TW3Regex.Create('\w+\s', 'g');
var str := 'fee fi fo fum';
var myArray := str.Match(re); 
```

（至于日志记录，我目前不知道如何将字符串数组很好地写入控制台，但这不是问题的一部分。）

w3regex 为 Match 方法实现了一些重载，它将为您即时创建正则表达式对象。由于您还可以将辅助方法应用于字符串文字，因此您可以将代码缩短为：

```
var myArray: TStrArray = ('fee fi fo fum').Match('\w+\s', 'g'); 
```

在这种情况下，需要在字符串文字周围加上括号。

在 SmartMS 中使用正则表达式的许多方法都记录在 RegExDemo 程序中，该程序是安装的一部分。

# javascript - 0 为空或不是对象错误

> ID：10621891
> 
> 赞同：1
> 
> 时间：2012-05-16T15:35:58.960
> 
> 标签：javascript, asp.net

我正在使用以下 javascript 程序将 pdf 文件转换为二进制文件。它将在 FireFox 中正常工作。但在 IE 中它将显示“0 为空或不是对象 javascript”。如何解决这个问题？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Untitled Page</title>
</head>

<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>

<script>

    $(document).ready(function(){

        $('#document_upload').change(function()
  {
   var fileList = this.files;
   var file = fileList[0];
   create_blob(file,function(blob_string)
   {
    replace_binary_data=blob_string;
    $("#document_binary").val(replace_binary_data);
   }); 
  });    

        function create_blob(file, callback) 
  {
   var reader = new FileReader();
   reader.onload = function()
   { 
    callback(reader.result) 

   };
   reader.readAsDataURL(file);
  }  

    });

</script>    

<body>

    <input type="text" id="document_binary" value=""/>
    <div id="upload_document">
        <input type="file" name="document"  id="document_upload"/>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:37:04.417

我很确定 IE 不支持`FileReader`（所以你不能因为明显的原因实例化它）。

请参阅[http://caniuse.com/filereader](http://caniuse.com/filereader) - 它在 IE10 之前不可用。

# magento - 如何将 Magento 安装迁移到本地主机

> ID：10621896
> 
> 赞同：0
> 
> 时间：2012-05-16T15:36:17.537
> 
> 标签：magento, localhost, magento-1.6

我一直在互联网上关注几个指南，但我仍然无法从 localhost 访问我的 Magento (1.6) 网站..

我转储了数据库并将其导入 phpMyAdmin，将文件从服务器复制到我的本地主机（WAMP），更新了 local.xml 并已访问 core_config_data 表并将 web/unsecure/base_url 更改为新 URL 和 web/secure/base_url到新网址。

还有什么可做的吗？

我看到有时，在某些指南中，他们要求转到`C:\windows\system32\drivers\etc\hosts`并插入以下行：127.0.0.1 www.mydomain.com mydomain.com

但是我已经对 www.localhost.com 进行了此操作，因为我已经有几个需要从 localhost 运行的网站，我不想更改它..

因此，当我从 www.localhost.com/mywebsite 启动网站时，我被重定向到旧地址，并且我的浏览器显示“糟糕！谷歌浏览器找不到‘旧地址’”

欢迎任何建议:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:01:27.857

只要 core_config_data.path 值正确更新（仔细检查），唯一可以进行重定向的东西（除了 Magento 的 PHP 代码）是一个带有 RewriteCond 和 RewriteRule 指令的 .htaccess 文件。这也可能存在于 VirtualHost 中。

作为另一种选择，您可以编辑 Windows Hosts 文件，将旧域名解析为 127.0.0.1，然后更新 VirtualHost 的 ServerAlias 行以包含该域名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:41:49.257

也许检查 web/cookie/cookie_path 和 web/cookie/cookie_domain 是否正确设置到 core_config_data 表中。从服务器切换到另一个服务器时，我通常会删除这两个字段的值。

在转储数据库之前也要考虑禁用缓存，因为这也可以避免一些麻烦。

# string - 用空值替换空字符串

> ID：10621897
> 
> 赞同：4
> 
> 时间：2012-05-16T15:36:24.047
> 
> 标签：string, postgresql, replace, null, plpgsql

我正在按计数将一个巨大的表卷成一个新表，我想在其中将所有空字符串更改为`NULL`，并对一些列进行类型转换。我通读了一些帖子，但找不到查询，这可以让我在单个查询中跨所有列执行此操作，而无需使用多个语句。

让我知道我是否可以遍历所有列并将单元格替换为空字符串和 null。

参考：[如何使用 SQL Server 将空格转换为空值？](https://stackoverflow.com/questions/3701812/convert-empty-space-to-null)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T13:47:49.253

据我所知，没有内置函数可以替换表的所有列中的空字符串。您可以编写一个[**plpgsql 函数**](https://www.postgresql.org/docs/current/plpgsql.html)来处理它。

以下函数**将给定表的所有基本字符类型列中的**空字符串替换为`NULL`. `integer`如果剩余的字符串是有效的数字文字，则可以转换为。

```
CREATE OR REPLACE FUNCTION f_empty_text_to_null(_tbl regclass, OUT updated_rows int)
  LANGUAGE plpgsql AS
$func$
DECLARE
   _typ  CONSTANT regtype[] := '{text, bpchar, varchar}';  -- ARRAY of all basic character types
   _sql  text;
BEGIN
   SELECT INTO _sql                       -- build SQL command
          'UPDATE ' || _tbl
          || E'\nSET    ' || string_agg(format('%1$s = NULLIF(%1$s, '''')', col), E'\n      ,')
          || E'\nWHERE  ' || string_agg(col || ' = ''''', ' OR ')
   FROM  (
      SELECT quote_ident(attname) AS col
      FROM   pg_attribute
      WHERE  attrelid = _tbl              -- valid, visible, legal table name 
      AND    attnum >= 1                  -- exclude tableoid & friends
      AND    NOT attisdropped             -- exclude dropped columns
      AND    NOT attnotnull               -- exclude columns defined NOT NULL!
      AND    atttypid = ANY(_typ)         -- only character types
      ORDER  BY attnum
      ) sub;

   -- RAISE NOTICE '%', _sql;  -- test?

   -- Execute
   IF _sql IS NULL THEN
      updated_rows := 0;                        -- nothing to update
   ELSE
      EXECUTE _sql;
      GET DIAGNOSTICS updated_rows = ROW_COUNT; -- Report number of affected rows
   END IF;
END
$func$; 
```

称呼：

```
SELECT f_empty2null('mytable');
SELECT f_empty2null('myschema.mytable'); 
```

还要获取列名`updated_rows`：

```
SELECT * FROM f_empty2null('mytable'); 
```

*db<>fiddle [here](https://dbfiddle.uk/?rdbms=postgres_13&fiddle=3054a53120ea6e184b24ecd4ac8bc04d)*
[旧[sqlfiddle](http://sqlfiddle.com/#!17/0b55c/1)]

### 要点

*   表名必须有效且可见，调用用户必须拥有所有必要的权限。如果不满足这些条件中的任何一个，该函数将不执行任何操作——即也不会破坏任何内容。我强制转换为[对象标识符类型`regclass`](https://www.postgresql.org/docs/current/datatype-oid.html)以确保它。
    表名可以按原样 ( `'mytable'`) 提供，然后由[`search_path`](https://stackoverflow.com/a/9067777/939860)决定。或模式限定以选择特定模式 ( `'myschema.mytable'`)。

*   查询系统目录以获取表的所有（[字符类型](https://www.postgresql.org/docs/current/datatype-character.html)）列。提供的函数使用这些基本[字符类型](https://www.postgresql.org/docs/current/datatype-character.html)：`text`, `bpchar`, `varchar`, `"char"`. 仅处理相关列。

*   使用[`quote_ident()`](https://www.postgresql.org/docs/current/plpgsql-statements.html#PLPGSQL-QUOTE-LITERAL-EXAMPLE)或`format()`清理列名并[防范 SQLi](https://stackoverflow.com/a/10711349/939860)。

*   更新版本使用基本的 SQL 聚合函数`string_agg()`来构建命令字符串，无需循环，更简单、更快捷。而且更优雅。:)

*   必须将[动态 SQL 与`EXECUTE`](https://www.postgresql.org/docs/current/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN).

*   更新后的版本不包括已定义的列，并且仅***在单个语句中***`NOT NULL`更新每一行一次，这对于具有多个字符类型列的表来说要快得多。

***   应该适用于任何现代版本的 PostgreSQL。使用 Postgres 9.1、9.3、9.5 和 13 进行测试。**

# asp.net - 必须在已定义标量变量时声明它，并且在更新时在“nvarchar”附近声明语法错误

> ID：10621899
> 
> 赞同：1
> 
> 时间：2012-05-16T15:36:39.927
> 
> 标签：asp.net, sql, vb.net

底部的解决方案。

尝试更新记录时收到以下错误：

> 必须声明标量变量@PaymentTermID

问题是，`@PaymentTermID`应该已经在更新参数中定义了。`onrowdatabound`和的 2 个函数`onrowupdate`是此处为 DropDownList: [GridViewRow.DataItem 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.dataitem.aspx)找到的函数的调整版本。删除工作正常。

没有添加新行，只是更改了名称。任何帮助将不胜感激，我并不完全习惯于使用 asp 对象。

```
<asp:GridView ID="GridView1" onrowdatabound="GridView1_RowDataBound" onrowupdating="GridView1_RowUpdating" runat="server" AutoGenerateColumns="False"   DataKeyNames="PaymentTermID" DataSourceID="SqlDataSource1" CellPadding="1"  CellSpacing="2">
    <Columns>
        <asp:CommandField ShowEditButton="True" />
        <asp:TemplateField HeaderText="Key Contract Date" SortExpression="Key Contract Date">
            <EditItemTemplate>
                <asp:DropDownList ID="DropDownList1" runat="server" DataSourceID="SqlDataSource2" DataTextField="Key_Contract_Date" DataValueField="Key_Contract_Date" />
                <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:Production_DatabaseConnectionString %>" 
                            SelectCommand="SELECT DISTINCT [Key Contract Date] AS Key_Contract_Date FROM [tblPRJ_PaymentTerms]" />
            </EditItemTemplate>
            <ItemTemplate>
                <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("[Key Contract Date]") %>' />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="Due Date" HeaderText="Due Date" SortExpression="Due Date" />
        <asp:BoundField DataField="Percent Due" HeaderText="Percent Due" SortExpression="Percent Due" />
        <asp:BoundField DataField="Custom Description" HeaderText="Custom Description" SortExpression="Custom Description" />
    </Columns>
    <HeaderStyle Font-Bold="True" ForeColor="#666666" />
</asp:GridView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:Production_DatabaseConnectionString %>" 
        SelectCommand="SELECT * FROM [tblPRJ_PaymentTerms] WHERE ([Job Number] = @Job_Number)" 
        DeleteCommand="DELETE FROM [tblPRJ_PaymentTerms] WHERE [PaymentTermID] = @PaymentTermID" 
        InsertCommand="INSERT INTO [tblPRJ_PaymentTerms] ([Job Number], [Key Contract Date], [Due Date], [Percent Due], [Custom Description]) VALUES (@Job_Number, @Key_Contract_Date, @Due_Date, @Percent_Due, @Custom_Description)" 
        UpdateCommand="UPDATE [tblPRJ_PaymentTerms] SET [Job Number] = @Job_Number, [Key Contract Date] = @Key_Contract_Date, [Due Date] = @Due_Date, [Percent Due] = @Percent_Due, [Custom Description] = @Custom_Description WHERE [PaymentTermID] = @PaymentTermID"> 
    <DeleteParameters>
        <asp:Parameter Name="PaymentTermID" Type="Int32" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="Job_Number" Type="String" />
        <asp:Parameter Name="Key_Contract_Date" Type="String" />
        <asp:Parameter Name="Due_Date" Type="DateTime" />
        <asp:Parameter Name="Percent_Due" Type="Decimal" />
        <asp:Parameter Name="Custom_Description" Type="String" />
    </InsertParameters>
    <SelectParameters>
        <asp:ControlParameter ControlID="txtCurrentJobNumber" Name="Job_Number" PropertyName="Text" Type="String" />
    </SelectParameters>
    <UpdateParameters>
        <asp:Parameter Name="Job_Number" Type="String" />
        <asp:Parameter Name="Key_Contract_Date" Type="String" />
        <asp:Parameter Name="Due_Date" Type="DateTime" />
        <asp:Parameter Name="Percent_Due" Type="Decimal" />
        <asp:Parameter Name="Custom_Description" Type="String" />
        <asp:Parameter Name="PaymentTermID" Type="Int32" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

解决方案：这里发生了多个问题。首先，GuthMD 对需要参考的参数的评估是正确的，无论是绑定域、模板域还是其他源（例如控制参数中的控件）。只需为 PaymentTermID 创建一个`asp:boundfield`并将`Visible`属性设置为 false 即可解决我发布的问题。

另一个问题是数据库设置不当，列名中有空格。OLEDB 驱动程序不喜欢这样，当您尝试写回数据库并且列名中有空格时会导致错误（即使它包含在括号 [] 中）。在 SQL 中修复名称之后，重新访问我们的代码并为其重写大部分 SQL 代码，事情开始按预期运行。

再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:19:16.010

我一直在查看[有关 Using Parameters 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/xt50s8kz)，似乎要在 the`GridView`和 your之间创建绑定`SqlDataSource`，您`GridView`将需要具有`BoundField`与元素相对应的`Parameter`元素。

将以下内容添加到`<Columns>`您的`GridView`:

```
<asp:BoundField DataField="Job_Number" Visible="false" />
<asp:BoundField DataField="Key_Contract_Date" Visible="false" />
<asp:BoundField DataField="Due_Date" Visible="false" />
<asp:BoundField DataField="Percent_Due" Visible="false" />
<asp:BoundField DataField="Custom_Description" Visible="false" />
<asp:BoundField DataField="PaymentTermID" Visible="false" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-27T10:00:11.833

1-当数据源是 OleDb 而不是 SQLclient 时会出现问题。将 DataSource1 更改为：

providerName="System.Data.SqlClient"

2-确保网格定义中的有效绑定字段 DataKeyNames="id_field"

# iphone - 这是从 iPhone 中删除联系人的正确方法吗？

> ID：10621901
> 
> 赞同：2
> 
> 时间：2012-05-16T15:36:40.503
> 
> 标签：iphone, ios5, abaddressbook

我正在尝试从我创建的 iPhone 中删除联系人。我试图找到删除联系人的一个很好的工作示例，但没有找到。添加联系人似乎很容易，但删除联系人似乎很难。以下代码不起作用，但似乎是合理的：

```
ABAddressBookRef addressBook = ABAddressBookCreate();
ABRecordRef delete = ABPersonCreate();

ABRecordSetValue(delete, kABPersonFirstNameProperty, @"Max", nil);
ABRecordSetValue(delete, kABPersonLastNameProperty, @"Mustermann", nil); 

ABAddressBookRemoveRecord(addressBook, delete, &error);
ABAddressBookSave(addressBook, &error); 
```

谁能帮帮我。

在此先感谢您的帮助。

最大限度

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T21:44:08.723

问题是您正在创建一个`ABRecord`不在通讯簿中的地址。`ABRedord`您需要做的是从 .s 中搜索 s数组`ABAddressBook`。我写了如何为你做到这一点：

```
CFErrorRef error = nil;

ABAddressBookRef addressBook = ABAddressBookCreate();
__block ABRecordRef toDelete = ABPersonCreate();

ABRecordSetValue(toDelete, kABPersonFirstNameProperty, @"Max", nil);
ABRecordSetValue(toDelete, kABPersonLastNameProperty, @"Mustermann", nil);

// Gets the array of everybody in the address book
NSArray *peopleArray = (__bridge NSArray *) ABAddressBookCopyArrayOfAllPeople(addressBook);

// Creates a test predicate to see if the ABRecord has the same name as toDelete
BOOL (^predicate)(id obj, NSUInteger idx, BOOL *stop) = ^(id obj, NSUInteger idx, BOOL *stop) {
    ABRecordRef person = (__bridge ABRecordRef)obj;
    CFComparisonResult result =  ABPersonComparePeopleByName(person, delete, kABPersonSortByLastName);
    bool pass = (result == kCFCompareEqualTo);
    if (pass) {
        toDelete = person;
    }
    return (BOOL) pass;
};

int idx = [peopleArray indexOfObjectPassingTest:predicate];

bool removed = ABAddressBookRemoveRecord(addressBook, toDelete, &error);
bool saved = ABAddressBookSave(addressBook, &error); 
```

您可以`ABRecord`通过更改块代码来更改比较实例的方式。它现在所做的只是比较联系人的姓名。

这段代码需要注意的是，它只会删除一个`ABRecord`名称与`delete`'s 匹配的 s 实例。

# ruby-on-rails - Rails 唯一性 => 真正的编码问题

> ID：10621904
> 
> 赞同：2
> 
> 时间：2012-05-16T15:36:41.327
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在 rails 3.0.12 (Ruby 1.8.7) 中使用 UTF 字符时，我遇到了 rails 唯一性验证器的问题。

这是我的小测试：

正确的：

```
name = "dave"
count = User.where(:name => name).count
u = User.new(:name => name, :gender => "Male")
puts "Current: #{count} / Valid: #{u.valid?} / Errors: #{u.errors.to_a.to_sentence}" 
```

输出：当前：1 / 有效：假 / 错误：名称已被占用

```
SQL (0.2ms)  SELECT COUNT(*) FROM `users` WHERE `users`.`name` = 'dave'
SQL (0.1ms)  SELECT 1 FROM `users` WHERE (`users`.`name` = BINARY 'dave') LIMIT 1 
```

不正确：

```
name = "angélique"
count = User.where(:name => name).count
u = User.new(:name => name, :gender => "Male")
puts "Current: #{count} / Valid: #{u.valid?} / Errors: #{u.errors.to_a.to_sentence}" 
```

输出：当前：3 / 有效：真 / 错误：

```
SQL (0.1ms)  SELECT COUNT(*) FROM `users` WHERE `users`.`name` = 'angélique'
SQL (0.1ms)  SELECT 1 FROM `users` WHERE (`users`.`name` = BINARY 'angélique') LIMIT 1 
```

似乎 where 子句使用了正确的编码并找到了结果，但对存在验证器的检查却没有。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:05:05.310

我认为您的应用程序可能正在使用 UTF-8，但您的数据库不是：

[http://guides.rubyonrails.org/getting_started.html#configuration-gotchas](http://guides.rubyonrails.org/getting_started.html#configuration-gotchas)

该指南包含在页面前面的 MySQL 和 PostgreSQL 执行此操作的示例。

# user-interface - 如何在不崩溃的情况下解决我的 CoreGraphics 内存泄漏？

> ID：10621905
> 
> 赞同：1
> 
> 时间：2012-05-16T15:36:56.797
> 
> 标签：user-interface, core-graphics, automatic-ref-counting, cgimage

我有一个代码迭代器，它是一个测试函数，用于将原始数据转换为 UIImage 对象以进行文件存储。我有两个失败路径或选项。我会失败：

A.）通过泄漏（仪器没有显示它 - 仪器所有分配似乎都是稳定的，我必须迭代多次，比如 50 次，它会通过仪器或正常运行测试功能崩溃）。由于下面的“b”选项，内存似乎是罪魁祸首。

B.)我可以在 UIImage 中强制释放 CG 对象，在这种情况下，应用程序将继续执行。一旦迭代器完成，测试将在最后一次迭代中崩溃，试图释放从我的子函数返回的图像下方的 CGImage。无论我请求多少次迭代，迭代器都会完成它的运行。这表明我已经修复了泄漏。所以现在我想一起想知道最后一次迭代有什么特别之处？（弧？）

```
- (UIImage *) convertRGBToUIImage:(unsigned char *) buffer 
                            withWidth:(int) width
                           withHeight:(int) height 
{

   CGColorSpaceRef colorSpace       = nil;
   CGContextRef    context          = nil;
   CGImageRef      ref              = nil;
   UIImage        *retImg           = nil;

   colorSpace = CGColorSpaceCreateDeviceRGB();
   if (colorSpace == NULL)
   {
      NSLog(@"ERROR: allocating color space convert Bitmap\n");
      return nil;
   }

   context = CGBitmapContextCreate (buffer, width, height, 8, width * 4, colorSpace,     kCGImageAlphaPremultipliedLast);
   CGColorSpaceRelease(colorSpace );

   if (context == NULL)
   {
     NSLog(@"ERROR: Context not created!");
     return nil;
   }

   ref = CGBitmapContextCreateImage(context);                                     
   CGContextRelease(context);

   retImg = [UIImage imageWithCGImage:ref];
   CGImageRelease(ref);

   return retImg;
} 
```

迭代器基础

```
for(int i = 0; i < numberiterations; i++)
{ 
    UIImage *completedImage = [phelper convertRGBToUIImage:pBuffer withWidth:width withHeight:height]

    //...save it out or display it

    //Turn on one of the scenarios below

    //scenario "A" -- will leak memory (instruments doesn't seem to turn anything up)
    //ARC free
    //completedImage = nil; //this will leak and fail after ~50 iterations

    //-or-

    //scenario "B" -- will crash on the very last iteration every time but can run x times
    //CGImageRelease([completedImage CGImage];

} 
```

Xcode 中的分析工具更喜欢上面的场景“A”。再次，我可以做到这一点，一切似乎都很好，但它不会成功完成测试。我认为这指向ARC。我试图找出 __bridge 类型转换但没有成功。我似乎无法正确使用语法，也许它不是我问题的答案。任何提示或想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T14:00:25.063

Instruments 没有显示泄漏的原因是——从技术上讲——没有

您看到的`@autoreleasepool`是不够紧的内存压力：

您的方法`convertRGBToUIImage:withWidth:withHeight:`返回一个新的自动发布的图像，但最接近`@autoreleasepool`的是在您的循环之外。

这意味着在循环所在的方法返回之前，所有这些图像都不会被处理掉。

这就是为什么您在场景 A 中看到内存消耗随着每次迭代而增长，而在场景 B 中循环后应用程序崩溃的原因：

`UIImage`是 - 主要是 - 一个 Objective-C 包装器，`CGImageRef`以便您`CGImageRelease`在场景 B 中的附加功能将后备存储从`UIImage`' 脚下拉出来。这个后备存储恰好是内存消耗量大的部分，`UIImage`因此内存消耗的急剧增加几乎消失了。

当在返回循环的方法之后耗尽了，它会处理所有临时实例，而这些临时`@autoreleasepool`实例*反过来*`UIImage`又想要处理它们的支持`CGImageRef`——……然后**程序**就开始了。

`@autoreleasepool`诀窍是在循环中创建自己的：

```
for (int i = 0; i < numberiterations; i++) {
    @autoreleasepool {
        // your old iteration body comes here
    }
} 
```

现在，场景 A 将按预期运行，场景 B 将在第一次迭代结束时*立即崩溃*——这也是意料之中的。

* * *

## 现在对于一些严肃的大脑-f ** k：

如果您在 ARC 下以“发布”方案运行您的原始代码（即使用编译器标志，`-Os`即“最快最小”），场景 A 很可能*不会崩溃！*

这种看似奇怪的行为的原因是，ARC 用一组特殊的 C 函数来装饰你的代码，这些函数执行实际的内存管理——而且因为这些函数是常量（在 Objective-C 中的方法调用不一定）编译器可以将它们的某些组合优化掉。

这导致从一开始就`UIImage`永远不会被插入到自动释放池中，因此，在循环的每次迭代之后都会被丢弃。

# powershell - Sharepoint 2010 更新 XsltListViewWebPart 视图上的字段，使用 powershell 添加字段时出错

> ID：10621912
> 
> 赞同：1
> 
> 时间：2012-05-16T15:37:22.277
> 
> 标签：powershell, sharepoint-2010

场景：我们有两个字段被添加到共享文档库默认视图“所有文档”中。home.aspx 页面上的共享文档 XsltListViewWebPart 视图不反映更改，因为它存在 OOTB。我需要将这两个字段添加到 XsltListViewWebPart 视图，因为已经存在多个站点并且手动更改是不可能的。

我找到了一个资源，它删除了 XsltListViewWebPart 的所有 ViewFields，然后从库的视图中添加了这些字段。 [http://spblog.net/post/2011/04/26/Changing-default-view-for-ListViewWebPart-programmatically.aspx](http://spblog.net/post/2011/04/26/Changing-default-view-for-ListViewWebPart-programmatically.aspx)

我不得不对其进行一些修改以在我的环境中工作，但这是源代码

```
# Add SharePoint cmdlets reference
Add-PSSnapin microsoft.sharepoint.powershell -ErrorAction SilentlyContinue

$web = Get-SPWeb -Identity "http://myServer/sites/Test_Site04_18_03-03-49"
$file = $web.GetFile("SitePages/Home.aspx");
$wpMngr = $file.GetLimitedWebPartManager([System.Web.UI.WebControls.Webparts.PersonalizationScope]::Shared);
$sharedDocList = $web.Lists["Shared Documents"]
$sharedDocViewFields = $list.Views["All Documents"].ViewFields
$foundWebPart = $false

:webPartLoop foreach($webPart in $wpMngr.WebParts)
{
    :viewLoop foreach($view in $sharedDocList.Views)
    {
        if($webPart.ViewGuid -eq $view.ID.ToString("B"))
        {
            $foundWebPart = $true

            $view.ViewFields.DeleteAll()

            #loop through all the fields in the shared doc view and add them
            foreach($field in $sharedDocViewFields)
            {
                write-host "field: " $field
                $view.ViewFields.Add($field)
            }

            $view.Update();
            break viewLoop
        }
    }

    #break out of the loop because we already found the webpart and modified the view
    if ($foundWebPart)
    {
        break webPartLoop
    }
} 
```

我运行它并看到一个错误：

```
Exception calling "Add" with "1" argument(s): "Column 'ColumnName' does not exist. It may have been deleted by another user."
+ $view.ViewFields.Add <<<< ($field)
+ CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
+ FullyQualifiedErrorId : DotNetMethodException 
```

我究竟做错了什么？我认为 Doc Lib 上的原始字段可能存在问题。很奇怪我可以把它写到屏幕上，但是当我尝试将它添加到新视图时它告诉它不存在。我什至尝试从将视图更改为图书馆使用的相同视图的角度来解决这个问题，但没有成功。我正在阅读的一篇文章提到了一些关于隐藏视图的内容......

# android - SurfaceView 是硬件加速的吗？

> ID：10621930
> 
> 赞同：0
> 
> 时间：2012-05-16T15:38:42.110
> 
> 标签：android, opengl-es-1.1

我正在使用`Bitmaps`中显示。我的手机有GPU。`SurfaceView``Canvas.drawBitmap`

然后我改变了 from `SurfaceView`，每次都用from`GLSurfaceView`显示位图。`GLUtils.texImage2D``Renderer``onDrawFrame()`

我没有注意到速度上有任何差异（尽管我没有做精确的测量，只是通过观察）。

是否有区别或者`GLSurfaceView`仅用于纹理没有意义，是否`SurfaceView`提供必要的硬件加速支持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:39:25.583

显然不是，而且下一个 Android 版本也没有计划添加硬件加速。

参照。[https://groups.google.com/d/msg/android-developers/ly-DqqZyPTw/XZNJmHpVBGoJ](https://groups.google.com/d/msg/android-developers/ly-DqqZyPTw/XZNJmHpVBGoJ)

如果您进行更彻底的基准测试，您应该会看到差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-19T16:49:06.923

多年后，这种情况发生了变化。自 Android 8 以来，Android 的 SurfaceView 确实通过[SurfaceHolder.lockHardwareCanvas](https://developer.android.com/reference/android/view/SurfaceHolder#lockHardwareCanvas())提供硬件加速。

# ios - 清除 UIWindow cocos2d 场景

> ID：10621932
> 
> 赞同：0
> 
> 时间：2012-05-16T15:38:48.690
> 
> 标签：ios, cocos2d-iphone

我最近为我的 cocos2d 应用程序制作了一个菜单屏幕，我在其中将两个选择器视图附加到了 UIWindow。一切正常，但是当我选择要玩的“游戏”并且场景发生变化时，选择器视图仍然存在。我怎样才能删除它们？

谢谢！

更多信息：

该按钮是一个 CCMenuItem （如果重要的话）

编辑：这就是我按下按钮后改变场景的方式。

> [[CCDirector sharedDirector] replaceScene:menuScene];

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:00:21.640

如果 CCNode 对象（如 CCMenuItem）在更改场景后仍保留在屏幕上，则说明存在内存泄漏。

您是说将视图（CCMenuItem？）附加到 UIWindow。我无法想象这将如何工作，因为 CCNode 对象不是 UIView 对象。

这两个问题之一可能是您的问题，但如果不查看相关代码部分，很难为您提供具体解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:18:35.317

我想通了，我所做的只是给每个pickerview一个唯一的标签，然后当我的按钮被按下时，我用于每个picker `[UIView removeFromSuperview: tag];` view。

# javascript - jsPlumb：如何使流程图连接器避免相交元素？

> ID：10621934
> 
> 赞同：21
> 
> 时间：2012-05-16T15:39:03.187
> 
> 标签：javascript, canvas, svg, flowchart, jsplumb

是否可以使 jsPlumb Flowchart 连接器不交叉连接项目或指定元素（在示例中：具有“项目”类的元素）？

默认流程图行为：

![在此处输入图像描述](../Images/9305a1ac797634397786a4b30366828b.png)

期望的结果：

![在此处输入图像描述](../Images/4f40b0b7e27b2f8ce382449daa37f0c1.png)

这是我尝试过的：

> [http://jsfiddle.net/CcfTD/1/](http://jsfiddle.net/CcfTD/1/)

# 编辑澄清

## HTML

```
 <div id="root">
        <div class="item" id="item1">Item 1</div>
        <div class="item" id="item2">Item 2</div>
        <div class="item" id="item3">Item 3</div>
        <div class="item" id="item4">Item 4</div>
        <div class="item" id="item5">Item 5</div>
  </div> 
```

## JS

```
 jsPlumb.connect({
    source: $('#item2'),
    target: $('#item7'),
    anchors: [ "Continuous" ],
    connector:[ "Flowchart" ],
    paintStyle: {
        strokeStyle: "#000000", 
        lineWidth:1
    }
}); 
```

基本上让 jsPlumb 引擎（SVG 或画布）了解相关的 DOM 元素并有一个对象避免方案

> [http://jsfiddle.net/adardesign/2ZFFc/](http://jsfiddle.net/adardesign/2ZFFc/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T16:31:56.887

虽然我实际上是在尝试找到一种合适的方法来做到这一点（这让我想到了你的问题）。我确实有一个解决方案，同时我正在使用它来让 jsPlumb 以我想要的方式工作。

基本上你必须添加一个零高度/宽度的 div 来充当中间节点。然后，您可以在该节点之间建立连接，而不是直接在实际项目之间建立连接。

我已经[修改了您的 jsfiddle](http://jsfiddle.net/aNc7k/1/)（[更新的链接](http://jsfiddle.net/aNc7k/125/)）以提供一个示例。

需要注意的重要事项是使用坐标设置锚点位置的能力以及使用两种不同端点形状的能力。此外，由于在您的示例中从锚点到第一圈的默认长度太长，因此可以使用 stub 参数来控制它。

以下是相关的修改和评论。

**HTML**

```
<div id="root">
    <div class="item" id="item1">Item 1</div>
    <div class="item" id="item2">Item 2</div>
    <div class="item" id="item3">Item 3</div>
    <div class="item" id="item4">Item 4</div>
    <div class="item" id="item5">Item 5</div>
    <div class="item" id="item6">Item 6</div>
    <div class="item" id="item7">Item 7</div>
    <div class="node" id="8-12"></div>            <!-- Midpoint -->
    <div class="item" id="item8">Item 8</div>
    <div class="item" id="item9">Item 9</div>
    <div class="item" id="item10">Item 10</div>
    <div class="item" id="item11">Item 11</div>
    <div class="item" id="item12">Item 12</div>
    <div class="item" id="item13">Item 13</div>
    <div class="item" id="item14">Item 14</div>
</div> 
```

**CSS**

```
.node {
    position: absolute;
    height: 0px;
    width: 0px;
    visibility: hidden;

    /* change these to place the midpoint properly */
    left: 285px;
    top: 160px;
} 
```

**JS**

```
//connection from item8 to midpoint(8-12)
jsPlumb.connect({
    source: $('#item8'),
    target: $('#8-12'),
    connector:[ "Flowchart", {stub:5} ], //<== set stub length to be
                                         //    as short as you need it
    paintStyle: {
        strokeStyle: "#000000", 
        lineWidth:1
    },
    anchors:[ [0,0.5,-1,0],[0.5,0,0,-1] ], //<== connection position/direction
    endpoints:[ ["Dot", {radius:2}],["Blank"] ] //<== Blank connector at end
});

//connection from midpoint(8-12) to item12
jsPlumb.connect({
    source: $('#8-12'),
    target: $('#item12'),
    connector:[ "Flowchart", {stub:5} ], //<== set stub length to be
                                         //    as short as you need it
    paintStyle: {
        strokeStyle: "#000000", 
        lineWidth:1
    },
    anchors:[ [0,0.5,-1,0],[0.5,0,0,-1] ], //<== connection position/direction
    endpoints:[ ["Blank"],["Dot", {radius:2}] ] //<== Blank connector at start
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-31T12:11:32.130

实际上，您的问题的解决方案更深入，尤其是在您使用动态数据时。

经过几个小时的挖掘，我终于找到了一个“裂缝”，不是一个漂亮的解决方案，而是一个裂缝。

我只是对流程图连接器进行了此更改，而且我对其他连接器一点也不熟悉，从未使用过它们。

在考虑了 midx 和 midy 以及初始存根（那些应该在完整的解决方案中使用但我放弃了它们）等各种东西之后，最简单的事情是在 connector-flowchart.js 文件中搜索 addSegment 函数。这就是添加片段的地方。

在添加当前段之前（将其推入段数组中），您检查它是否会与您的任何元素相交，只需计算一些中间点（从而添加额外的段，将初始段分成几部分）所以它基本上需要一个绕过相交的元素。

如果需要更多细节，我很乐意分享。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-08T14:33:49.800

我刚刚遇到了一个类似的问题，动态生成的图表的连接与元素相交。

对我有用的是为流程图连接指定**“中点”**参数。也许这对您也有帮助。

**存根**参数也接受数组（不在文档中）。我刚刚设置：

`jsPlumb.Defaults.Connector = [ "Flowchart", { stub: [10, 50], midpoint: 0.0001 } ];`

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-09T09:12:47.080

我已经尝试了上述选项，如果您只想要一个简单的解决方案而不添加中间节点，以下对我有用：

```
connector: ["Flowchart", { anchors: ["Bottom", "Top"] }] 
```

在您的连接上添加这些参数。

# c# - iTextSharp 异常：未找到 PDF 标头签名

> ID：10621936
> 
> 赞同：20
> 
> 时间：2012-05-16T15:39:07.073
> 
> 标签：c#, .net, pdf, itext

我`iTextSharp`用来阅读**PDF**文档的内容：

```
PdfReader reader = new PdfReader(pdfPath);
using (StringWriter output = new StringWriter())
{
    for (int i = 1; i <= reader.NumberOfPages; i++)
        output.WriteLine(PdfTextExtractor.GetTextFromPage(reader, i, new SimpleTextExtractionStrategy()));

    reader.Close();
    pdfText = output.ToString();
} 
```

*99％*的时间它工作得很好。但是，有一个**PDF**文件有时会抛出此异常：

> 未找到 PDF 标题签名。StackTrace：在
> iTextSharp.text.pdf.PdfReader.ReadPdf()
> 在
> iTextSharp.text.pdf.PdfReader..ctor(String filename, Byte[]> ownerPassword) 在
> Reader 的 iTextSharp.text.pdf.PRTokeniser.CheckPdfHeader()。 PDF.DownloadPdf(String url) 在

烦人的是我不能总是重现错误。有时有效，有时无效。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-20T19:50:59.487

经过一番研究，我发现此问题与生成 PDF 期间文件损坏有关，或者与文档中不符合 iTextSharp 中实现的 PDF 标准的对象相关的错误有关。它似乎也仅在您从磁盘读取 PDF 文件时才会发生。

我还没有找到问题的完整解决方案，而只是一种解决方法。我所做的是使用 PdfReader itextsharp 对象读取 PDF 文档，并查看在正常操作中读取文件之前是否发生错误或异常。

所以运行类似这样的东西：

```
private bool IsValidPdf(string filepath)
{
    bool Ret = true;

    PdfReader reader = null;

    try
    {
        reader = new PdfReader(filepath);
    }
    catch
    {
        Ret = false;
    }

    return Ret;
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2019-02-27T15:08:51.803

我发现这是因为我`new PdfReader(pdf)`在文件末尾使用 PDF 流位置调用。通过将位置设置为零，它解决了这个问题。

前：

```
// Throws: InvalidPdfException: PDF header signature not found.
var pdfReader = new PdfReader(pdf); 
```

后：

```
// Works correctly.
pdf.Position = 0;
var pdfReader = new PdfReader(pdf); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-23T01:31:10.267

就我而言，这是因为我正在调用 .json 文件，而 iTextSharp 显然只接受 pdf 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-02T12:24:06.620

有可能您正在使用另一种方法或程序打开文件，就像我的情况一样。验证您的文件没有任何工作，您还可以使用资源监视器来验证哪些进程正在处理您的文件。

# c# - LINQ to Entities 不支持调用

> ID：10621938
> 
> 赞同：7
> 
> 时间：2012-05-16T15:39:12.617
> 
> 标签：c#, linq-to-entities

我在 LINQ to Entities 中有以下查询：

```
var query = from p in db.Products
            where p.Price > 10M
            select p; 
```

此时查询尚未执行，我想编写一个查询，该查询将根据某些条件返回真/假：

```
return query.Any(p => p.IsInStock &&
               (p.Category == "Beverage" ||
               p.Category == "Other")); 
```

这很好用；但是，我想从我的代码中得到一些重用。我有很多方法需要根据类别是饮料还是其他进行过滤，所以我尝试创建一个委托：

```
Func<Product, bool> eligibleForDiscount = (product) => product.Category == "Beverage" || product.Category == "Other"; 
```

我想用委托代替内联检查：

```
return query.Any(p => p.IsInStock && eligibleForDiscount(p)); 
```

这给了我一个错误，说 LINQ to Entities 不支持 Invoke。为什么我不能用内联代码代替这样的委托，有什么办法可以通过其他方式完成我的重用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T15:48:12.647

回想一下，引擎盖`Linq-to-{DATABASE}`下只是将`IQueryable`您生成的转换为 Sql。

您不能像这样内联代码，因为 an `Invoke`（您在调用`Func`or时实际调用的方法`Action`）没有一致的方法将其转换为 sql 语句（您可以在那里做*任何事情*）。

也就是说，您可以通过拆分来重用部件：

```
var query = from p in db.Products
            where p.Price > 10M
            select p;

query = query.Where(p => p.IsInStock);
query = query.Where(p => p.Category == "Beverage" || p.Category == "Other");
return query.Any(); 
```

两者都可以放入接受`IQueryable<Product>`并返回相同（但已过滤）的方法中。然后，您可以随心所欲地重复使用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:52:42.253

问题是`IQueryable`需要生成一个 SQL 表达式来传递给 RDBMS，而当它只有一个不透明的谓词时，它就无法做到这一点。

显而易见但效率低下的方法是按如下方式重写您的查询：

```
return query.Where(p => p.IsInStock).AsEnumerable().Any(eligibleForDiscount); 
```

一个不太简单的方法如下：

```
bool GotEligible(Expression<Func<Product,bool>> pred) {
    return query.Where(p => p.IsInStock).Any(pred);
} 
```

请注意，此方法如何使用*谓词表达式*而不是谓词。现在它对 EF 是透明的，可以毫无问题地转换为 SQL 查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-11T10:25:17.227

只要坚持使用 IQueryable，就可以在函数中保留可重用的查询。

```
 public IQueryable<Product> EligibleForDiscount(IQueryable<Product> products)
  {
       return products.Where(p => product.Category == "Beverage" || 
                                  product.Category == "Other");
  } 
```

现在像任何其他函数一样调用它：

```
 IQueryable<Product> query = (from p in db.Products
                               where p.Price > 10M
                               select p);

  query = EligibleForDiscount(query); 
```

# javascript - 如何使用正则表达式查找 javascript 变量的值？

> ID：10621940
> 
> 赞同：0
> 
> 时间：2012-05-16T15:39:22.487
> 
> 标签：javascript, regex, variables, find

我希望 php 中的 RegEx 在我的 html 页面中找到 js 变量的值。像这样：

```
varName = "http://sample.com"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:55:51.210

类似的东西......但是由于js代码的复杂性，它可能会变得非常复杂

```
<?
$varname = "varName";
preg_match('/'.$varname.'\s*?=\s*?(.*)\s*?(;|$)/msU',$html,$matches);

if(count($matches>1)) {
    print($matches[1]);
}

?> 
```

# sql - SQL Server 过程不返回任何结果

> ID：10621948
> 
> 赞同：1
> 
> 时间：2012-05-16T15:40:03.620
> 
> 标签：sql, sql-server, stored-procedures, stored-functions

好的，所以我的 SQL Server 2005 数据库中有以下过程。我试图弄清楚为什么它没有给我任何结果。尝试访问它的用户是管理员，但我也尝试与另一个用户一起访问它，但我仍然没有得到任何结果。Bond 在对 Bond 表的基本查询中返回。我只是想弄清楚为什么这没有返回任何结果。任何帮助表示赞赏。

```
ALTER PROCEDURE dbo.GetBondAmounts
(
    @Username varchar(20)
)
AS
DECLARE @Admin AS bit
SELECT @Admin = Admin FROM Users WHERE Username = @Username
if(@Admin = 1)
BEGIN
    RETURN
    SELECT Bond.ID, SUM(Charge.BondAmount) + SUM(ChargeWithoutPower.BondAmount) Amount,
    SUM(Charge.BondPremium) + SUM(ChargeWithoutPower.BondPremium) + SUM(Forfeiture.AmountPaid)
    + SUM(Forfeiture.CostOfApprehension) - SUM(Payment.Amount) - SUM(BalanceForgiveness.AmountForgiven) Balance
    FROM Bond LEFT OUTER JOIN Payment ON Bond.ID = Payment.Bond
    LEFT OUTER JOIN BalanceForgiveness ON Bond.ID = BalanceForgiveness.BondID
    LEFT OUTER JOIN Powers ON Bond.ID = Powers.Bond
    LEFT OUTER JOIN Charge ON Powers.Surety = Charge.PowerSurety
    AND Powers.PowerPrefix = Charge.PowerPrefix AND Powers.PowerNumber = Charge.PowerNumber
    LEFT OUTER JOIN ChargeWithoutPower ON Bond.ID = ChargeWithoutPower.ID
    LEFT OUTER JOIN Forfeiture ON Bond.ID = Forfeiture.Bond
    LEFT OUTER JOIN BondFee ON Bond.ID = BondFee.Bond
    GROUP BY Bond.ID
END
ELSE
BEGIN
    RETURN
    SELECT Bond.ID, SUM(Charge.BondAmount) + SUM(ChargeWithoutPower.BondAmount) Amount,
    SUM(Charge.BondPremium) + SUM(ChargeWithoutPower.BondPremium) + SUM(Forfeiture.AmountPaid)
    + SUM(Forfeiture.CostOfApprehension) - SUM(Payment.Amount) - SUM(BalanceForgiveness.AmountForgiven) Balance
    FROM Bond LEFT OUTER JOIN UserAgency ON Bond.Agency = UserAgency.Agency
    LEFT OUTER JOIN Payment ON Bond.ID = Payment.Bond
    LEFT OUTER JOIN BalanceForgiveness ON Bond.ID = BalanceForgiveness.BondID
    LEFT OUTER JOIN Powers ON Bond.ID = Powers.Bond
    LEFT OUTER JOIN Charge ON Powers.Surety = Charge.PowerSurety
    AND Powers.PowerPrefix = Charge.PowerPrefix AND Powers.PowerNumber = Charge.PowerNumber
    LEFT OUTER JOIN ChargeWithoutPower ON Bond.ID = ChargeWithoutPower.ID
    LEFT OUTER JOIN Forfeiture ON Bond.ID = Forfeiture.Bond
    LEFT OUTER JOIN BondFee ON Bond.ID = BondFee.Bond
    WHERE UserAgency.Username = @Username
    GROUP BY Bond.ID
END 
```

我正在使用 C# 访问此过程，如下所示：

```
bondingData.Merge(getBondAmountsAdapter.GetData(currentUser.Username)); 
```

这是我添加到测试并查看是否返回任何结果的行：

```
MessageBox.Show("Bond Count A: " + bondingData.Bond.Count.ToString() + "\r\nBond Count B: " + bondingData.GetBondAmounts.Count.ToString()); 
```

当我运行它时，这是我收到的结果：

```
Bond Count A: 1
Bond Count B: 0 
```

[编辑]

好的，这是我对我的问题的解决方案：

```
ALTER PROCEDURE dbo.GetBondAmounts
(
    @Username varchar(20)
)
AS
    SELECT Bond.ID, dbo.GetBondTotal(Bond.ID) Total, dbo.GetBondBalance(Bond.ID) Balance
    FROM Bond LEFT OUTER JOIN
    UserAgency ON Bond.Agency = UserAgency.Agency
    WHERE UserAgency.Username = @Username
    OR EXISTS (SELECT * FROM Users WHERE Username = @Username AND Admin = 1)
    GROUP BY Bond.ID 
```

这些是此处调用的 2 个存储函数。不确定它的效率如何，但不会有那么多付款或与单个债券相关的任何事情。当程序有很多记录时，它可能会变慢。

功能一：

```
ALTER FUNCTION dbo.GetBondTotal
(
@BondID bigint
)
RETURNS money
AS
BEGIN
    DECLARE @PowersTotal AS money;
    DECLARE @ChargesTotal AS money;
    DECLARE @BondFeeTotal AS money;
    DECLARE @ForfeitureCosts AS money;
    SELECT @PowersTotal = SUM(BondPremium)
    FROM Charge INNER JOIN Powers ON Charge.PowerSurety = Powers.Surety
    AND Charge.PowerPrefix = Powers.PowerPrefix
    AND Charge.PowerNumber = Powers.PowerNumber
    WHERE Bond = @BondID
    SELECT @ChargesTotal = SUM(BondPremium)
    FROM ChargeWithoutPower
    WHERE BondID = @BondID
    SELECT @BondFeeTotal = SUM(Amount)
    FROM BondFee WHERE Bond = @BondID
    SELECT @ForfeitureCosts = SUM(CostOfApprehension) + SUM(AmountPaid)
    FROM Forfeiture WHERE Bond = @BondID
    RETURN @PowersTotal + @ChargesTotal + @BondFeeTotal + @ForfeitureCosts
END 
```

功能二：

```
ALTER FUNCTION dbo.GetBondBalance
(
@BondID bigint
)
RETURNS MONEY
AS
    BEGIN
    DECLARE @PowersTotal AS money;
    DECLARE @ChargesTotal AS money;
    DECLARE @BondFeeTotal AS money;
    DECLARE @ForfeitureCosts AS money;
    DECLARE @PaymentTotal AS money;
    DECLARE @AmountForgiven AS money;
    SELECT @PowersTotal = SUM(BondPremium)
    FROM Charge INNER JOIN Powers ON Charge.PowerSurety = Powers.Surety
    AND Charge.PowerPrefix = Powers.PowerPrefix
    AND Charge.PowerNumber = Powers.PowerNumber
    WHERE Bond = @BondID
    SELECT @ChargesTotal = SUM(BondPremium)
    FROM ChargeWithoutPower
    WHERE BondID = @BondID
    SELECT @BondFeeTotal = SUM(Amount)
    FROM BondFee WHERE Bond = @BondID
    SELECT @ForfeitureCosts = SUM(CostOfApprehension) + SUM(AmountPaid)
    FROM Forfeiture WHERE Bond = @BondID
    SELECT @PaymentTotal = SUM(Amount)
    FROM Payment WHERE Bond = @BondID
    SELECT @AmountForgiven = SUM(AmountForgiven)
    FROM BalanceForgiveness WHERE BondID = @BondID
    RETURN @PowersTotal + @ChargesTotal + @BondFeeTotal + @ForfeitureCosts - @PaymentTotal - @AmountForgiven
END 
```

我相信我会创建第三个函数来覆盖金额（Charge.Amount + ChargeWithoutPower.Amount）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T15:42:37.410

您在`RETURN`每个部分的开头都有一个声明。

查询将在此语句被命中时立即返回，因此`SELECT`不会执行，也不会返回任何内容。

要解决此问题 - 删除`RETURN`语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T15:54:40.880

我怀疑您认为该过程需要返回结果集。事实上，程序只能“返回”一个整数。他们可以设置输出参数，任何被选择的结果集都将被放入输出流中，但它们与 RETURN 语句没有任何关系。

另请注意，您的第二个查询 WHERE 子句有效地将第一个 LEFT JOIN 转换为 INNER JOIN。

您可以将这两个查询组合成一个查询，这可能更易于维护，并且您可以消除对单独的位变量和管理查询的需要。请注意，组合版本更易于维护，但可能有一个次优的执行计划，因为这两种情况可能需要非常不同的执行计划。它也可能容易受到参数嗅探的影响，因此您可能希望使用“优化未知”选项和/或将它们分成两部分 - 这是一种权衡。很多时候，当我看到在一个地方可能更容易维护的重复代码时，我不得不权衡一下。有时，重复连接可以变成视图或内联表值函数。

我认为它可以简化为：

```
ALTER PROCEDURE dbo.GetBondAmounts
(
    @Username varchar(20)
)
AS
BEGIN
    SELECT Bond.ID
           ,SUM(Charge.BondAmount)
             + SUM(ChargeWithoutPower.BondAmount) AS Amount
           ,SUM(Charge.BondPremium)
             + SUM(ChargeWithoutPower.BondPremium)
             + SUM(Forfeiture.AmountPaid)
             + SUM(Forfeiture.CostOfApprehension)
             - SUM(Payment.Amount)
             - SUM(BalanceForgiveness.AmountForgiven) AS Balance
    FROM Bond
    LEFT OUTER JOIN UserAgency ON Bond.Agency = UserAgency.Agency
    LEFT OUTER JOIN Payment ON Bond.ID = Payment.Bond
    LEFT OUTER JOIN BalanceForgiveness ON Bond.ID = BalanceForgiveness.BondID
    LEFT OUTER JOIN Powers ON Bond.ID = Powers.Bond
    LEFT OUTER JOIN Charge ON Powers.Surety = Charge.PowerSurety
        AND Powers.PowerPrefix = Charge.PowerPrefix
        AND Powers.PowerNumber = Charge.PowerNumber
    LEFT OUTER JOIN ChargeWithoutPower ON Bond.ID = ChargeWithoutPower.ID
    LEFT OUTER JOIN Forfeiture ON Bond.ID = Forfeiture.Bond
    LEFT OUTER JOIN BondFee ON Bond.ID = BondFee.Bond
    WHERE UserAgency.Username = @Username
        OR EXISTS (SELECT * FROM Users WHERE Username = @Username AND Admin = 1)
    GROUP BY Bond.ID
END 
```

（请注意，在简化的这一点上，我强烈考虑使用内联表值函数而不是过程，它类似于参数化视图并且比存储过程更灵活）

你分组和加入的方式让我有点担心。

如果您有多个付款和没收（或任何由 Bond.ID 链接的其他表格）附加到一个债券，那么您将得到一个无意的交叉连接，将这些值相乘然后相加，得到不正确的结果。

我怀疑你需要做这样的事情来做你的分组 - 请注意，我已经在子查询中完成了分组并用相同的名称重新命名它们：

```
ALTER PROCEDURE dbo.GetBondAmounts
(
    @Username varchar(20)
)
AS
BEGIN
    SELECT Bond.ID
           ,Charge.BondAmount
             + ChargeWithoutPower.BondAmount AS Amount
           ,Charge.BondPremium
             + ChargeWithoutPower.BondPremium
             + Forfeiture.AmountPaid
             + Forfeiture.CostOfApprehension
             - Payment.Amount
             - BalanceForgiveness.AmountForgiven AS Balance
    FROM Bond
    LEFT OUTER JOIN UserAgency ON Bond.Agency = UserAgency.Agency
    LEFT OUTER JOIN (
        SELECT Bond, SUM(Amount) AS Amount
        FROM Payment
        GROUP BY Bond
    ) AS Payment ON Bond.ID = Payment.Bond
    --- etc..
    WHERE UserAgency.Username = @Username
        OR EXISTS (SELECT * FROM Users WHERE Username = @Username AND Admin = 1)
END 
```

# php - Symfony2：--重新安装问题

> ID：10621949
> 
> 赞同：4
> 
> 时间：2012-05-16T15:40:14.203
> 
> 标签：php, symfony, installation, bundle, vendors

我一直在尝试为 Symfony2 安装 Buzz。我将它添加到 deps 文件中，并尝试更新我的供应商：

```
php bin/vendors update 
```

该命令只是告诉我我已经安装了标准版本，并且我应该尝试使用：

```
php bin/vendors install --reinstall 
```

反而。我做到了。

但是随后弹出一个错误并告诉我：

```
Updating deps.lock
sh:/var/www/Symfony/vendor/bundles/Sensio/Bundle/DistributionBundle/Resources/bin/build_bootstrap.php: not found
PHP Fatal error:  Class 'Doctrine\Common\Annotations\AnnotationRegistry' not found in /var/www/Symfony/app/autoload.php on line 37
PHP Fatal error:  Class 'Doctrine\Common\Annotations\AnnotationRegistry' not found in /var/www/Symfony/app/autoload.php on line 37 
```

然后什么都没有了，这并不奇怪，因为我的供应商文件夹几乎是空的。

有没有人遇到过这个问题？关于如何修复它的任何线索？

编辑 ：

我发现了这个错误的根源。我没有安装 git，所以我做了：

```
sudo apt-get install git-core 
```

检查此链接以获取更多信息：[http ://comments.gmane.org/gmane.comp.php.symfony.symfony2/8239](http://comments.gmane.org/gmane.comp.php.symfony.symfony2/8239)

但是我现在遇到了另一个错误（“寻找命名空间“buzz.client.curl”，没有找到“）。我正在为那个创建另一个线程，因为它不是同一个问题（[链接在这里](https://stackoverflow.com/questions/10649394/symfony2-no-extension-to-load-buzz)）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:17:42.507

这不是更新供应商的正确方法。根据[文档](http://symfony.com/doc/current/cookbook/workflow/new_project_git.html#cookbook-managing-vendor-libraries)

> 还有一个`php bin/vendors update`命令，但这与升级您的项目无关，您通常不需要使用它。此命令用于冻结所有供应商库的版本，方法是将它们更新到指定的版本`deps`并将其记录到`deps.lock`文件中。

因此，您需要做的就是运行`php bin/vendors install`（我知道，这很令人困惑。我部分归咎于他们对子命令的命名不当）

## 编辑

为了帮助解决您当前的问题，请尝试以下步骤

1.  `rm -rf vendor/*`
2.  `rm -rf app/cache/*`
3.  `rm app/bootstrap.php.cache`
4.  `php bin/vendors install`

希望它有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:43:24.377

尝试从“供应商”文件夹中删除所有内容并运行

```
php bin/vendors install 
```

命令

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T17:40:29.447

在添加 deps 文件之前，在任何文本编辑器中复制 deps 文件的所有内容，然后删除所有 deps 内容并仅在 deps 中添加 Buzz 链接。然后尝试以下命令

```
php bin/vendors install --reinstall 
```

这将安全地安装 BUZZ 包。安装 BUzz 包后，您可以粘贴之前复制的所有 deps 内容。如果你正在尝试这个，请确保下载新的 symfony 项目并尝试这个。可能这会对你有所帮助。我早些时候在我的一个项目中尝试过。

# foursquare - 'photocount' 参数是否已弃用？

> ID：10621954
> 
> 赞同：0
> 
> 时间：2012-05-16T15:40:27.943
> 
> 标签：foursquare

```
https://api.foursquare.com/v2/venues/explore? 
```

我看到它`photo count`已经在太空中消失了......

`photo count` 不会再回来`stats`了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T23:43:10.483

我不确定我是否完全理解您的问题，但探索端点仍会返回照片数量，如您在此处所见。

[https://developer.foursquare.com/docs/explore.html#req=venues/explore%3Fnear%3D10009](https://developer.foursquare.com/docs/explore.html#req=venues/explore%3Fnear%3D10009)

确保始终传递版本字符串，并且您永远不会看到向后不兼容的 JSON 更改：[https ://developer.foursquare.com/overview/versioning](https://developer.foursquare.com/overview/versioning)

# jquery - jquery 网络摄像头拍照

> ID：10621955
> 
> 赞同：1
> 
> 时间：2012-05-16T15:40:33.240
> 
> 标签：jquery, html, web, webcam

我正在尝试使用网络摄像头的 jquery 插件： *http* ://www.xarg.org/project/jquery-webcam-plugin/ 来拍照。

这是我的jQuery：

```
$(document).ready(function(){

    $("#camera").webcam({
            width: 320,
            height: 240,
            mode: "callback",
            swffile: "webcam/jscam_canvas_only.swf",

            onTick: function(remain) {

            if (0 == remain) {
                jQuery("#status").text("Cheese!");
            } else {
                jQuery("#status").text(remain + " seconds remaining...");
            }
            },

            onSave: function(data) {

            var col = data.split(";");
            var img = image;
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            for(var i = 0; i < 320; i++) {
                var tmp = parseInt(col[i]);
                img.data[pos + 0] = (tmp >> 16) & 0xff;
                img.data[pos + 1] = (tmp >> 8) & 0xff;
                img.data[pos + 2] = tmp & 0xff;
                img.data[pos + 3] = 0xff;
                pos+= 4;
            }

            if (pos >= 4 * 320 * 240) {
                ctx.putImageData(img, 0, 0);
                pos = 0;
            }
            },

            onCapture: function () {

            jQuery("#flash").css("display", "block");
            jQuery("#flash").fadeOut("fast", function () {
                    jQuery("#flash").css("opacity", 1);
            });

            webcam.save();
            },

            debug: function (type, string) {
            $("#status").html(type + ": " + string);
            },

            onLoad: function() {

            var cams = webcam.getCameraList();
            for(var i in cams) {
                jQuery("#cams").append("<li>" + cams[i] + "</li>");
            }
            }

    }); 

}); 
```

这是我的html：

```
<div id="camera"></div>
<canvas id="canvas" height="240" width="320"></canvas>

<div class="menu"><a href="javascript:webcam.capture();changeFilter();void(0);"><p class="menutext">Maak foto</p></a></div> 
```

我收到以下错误：

```
Uncaught TypeError: Object #<Object> has no method 'capture' 
```

**有人知道我需要做什么吗？**

# asp.net - 呈现后重新排序 ASP.NET GridView 中的列

> ID：10621957
> 
> 赞同：1
> 
> 时间：2012-05-16T15:40:42.413
> 
> 标签：asp.net, gridview

我有一个包含大量列的 GridView，我的客户想要比较两列之间的数据（主要是通过拖放列，以便感兴趣的列彼此相邻）。据我所知，ASP.NET GridView 默认不支持。我使用.NET 4.0。这受 ASP.NET GridView 支持吗？还有其他可以帮助我的开源控件吗？

# asp.net - ASP.NET 网络应用程序。进入应用程序时如何更改默认页面

> ID：10621960
> 
> 赞同：0
> 
> 时间：2012-05-16T15:40:54.800
> 
> 标签：asp.net

> **可能重复：**
> [在 Asp.net](https://stackoverflow.com/questions/1913058/set-default-page-in-asp-net)
> [ASP.NET 默认文档中设置默认页面](https://stackoverflow.com/questions/2012044/asp-net-default-document)

我已从我的 Web 应用程序中删除了 default.aspx。现在，当我运行应用程序时，它只在浏览器中显示目录的内容。请问代码/设置行在哪里更改站点的入口点，例如提供的第一页是forum.aspx而不是default.aspx

问候

乙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:46:18.793

默认文档是 IIS 设置。您也可以使用以下示例从 web.config 更改它：

```
<configuration>
   <system.webServer>
      <defaultDocument enabled="true">
         <files>
            <add value="home.html" />
         </files>
      </defaultDocument>
   </system.webServer>
</configuration> 
```

在以下位置查找所有详细信息：[http ://www.iis.net/ConfigReference/system.webServer/defaultDocument](http://www.iis.net/ConfigReference/system.webServer/defaultDocument)

# vb.net - WP7 - ContextMenu 列表框项目点击事件

> ID：10621961
> 
> 赞同：0
> 
> 时间：2012-05-16T15:40:57.597
> 
> 标签：vb.net, class, windows-phone-7, contextmenu, databound

假设我有以下数据模板：

```
 <DataTemplate x:Key="ItemTemplate">
        <StackPanel>
            <Grid Height="95" Width="446" HorizontalAlignment="Left" ShowGridLines="false" RenderTransformOrigin="0.3,0.526">
                <Grid.RowDefinitions>
                    <RowDefinition Height="100"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="200"/>
                </Grid.ColumnDefinitions>
                <Image Source="{Binding categoryimage}" Height="100" Grid.Row="0" Grid.Column="0" />
                <TextBlock Text="{Binding categoryname}" Grid.Row="0" Grid.Column="1" VerticalAlignment="Center" Margin="8,0,-46,0" FontSize="26.667"/>
                <toolkit:ContextMenuService.ContextMenu>
                    <toolkit:ContextMenu Name="MyContextMenu">
                        <toolkit:MenuItem Header="Delete console" Click="contextMenuAction_Click"/>
                    </toolkit:ContextMenu>
                </toolkit:ContextMenuService.ContextMenu>
            </Grid>
        </StackPanel>
    </DataTemplate> 
```

我想在单击上下文菜单项时进行处理。我如何将列表项作为类对象访问（如果这有意义？）

我尝试了以下代码，但是它给了我一个 NullReferenceException 异常：

```
Private Sub contextMenuAction_Click(sender As System.Object, e As System.Windows.RoutedEventArgs)

    Dim c As classes.consoles = listBoxview.SelectedItem
    MessageBox.Show(c.categoryname)

End Sub 
```

![在此处输入图像描述](../Images/2987b197ff94f5e6b8ee9b04c9855b44.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:20:05.377

您可能可以使用 Visual Tree Helper 获取父项，如以下线程中所述：-

[上下文菜单选择的项目 wp7](https://stackoverflow.com/questions/6860569/context-menu-selected-item-wp7)

# google-plus - 在 google plus 中共享一个私有 URL

> ID：10621971
> 
> 赞同：1
> 
> 时间：2012-05-16T15:41:30.703
> 
> 标签：google-plus

我正在尝试以`https://plus.google.com/share?url=<URL>`编程方式将网站共享给 Google Plus 上的私人圈子。当我使用外部可见的网站时这不是问题，但我想共享一个私有 URL（内部网络上的主机）。

当我使用私人 URL 时，加号共享页面显示一个旋转图标，好像它正在尝试访问内容的内部 URL，并且“共享”按钮仍然暗淡 - 我无法前进。

我尝试将 noverify=true 或 verify=false 等添加到 GET 行，但这并没有改变行为。我怀疑可以做到，因为我可以通过 chrome 上的 taberareloo 插件发布私有 URL。

有没有办法跳过探测提供的 URL 链接，或者在使用该`https://plus.google.com/share?url=<URL>`机制发布到 Google plus 圈子时发布私人 URL？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:42:51.563

不，当您使用共享链接时，无法跳过目标页面的获取。

抓取是创建分享到 Google+ 的网页[片段的方式。](https://developers.google.com/+/plugins/snippet/)如果没有这个获取，实际上就没有任何东西可以分享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:49:07.000

一种时髦的解决方法，但您可以拥有一个只是重定向器的公共页面（不是 301，而是 javascript 或元重定向），并提供指向 G+ 的链接。它会理解它是一个普通的公共页面，而用户体验将被重定向到您的内部链接。

# javascript - Cocoa App 的 Webview 链接控件

> ID：10621974
> 
> 赞同：0
> 
> 时间：2012-05-16T15:41:34.800
> 
> 标签：javascript, html, macos, cocoa, webview

有没有办法控制 webview 中的链接？该场景正在处理外部协议链接，例如 mailto://、irc://、target=_blank 以及任何其他可能引发新窗口或应用程序启动的内容。也许它会弹出一个 nsrunalert 说“外部链接已被禁用”。这是javascript可以处理的东西还是webview本身的一些功能？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:29:10.637

您需要将自己设置为 WebResourceLoadDelegate 并实现 webView:resource:willSendRequest:redirectResponse:fromDataSource:

有关更多信息，请参阅[http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebResourceLoadDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40003836](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebResourceLoadDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40003836)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:11:38.577

实现您需要的 WebPolicyDelegate 的内容。所有导航都经过那里

# jenkins - 在 Jenkins 中找不到控制台输出解析部分

> ID：10621975
> 
> 赞同：2
> 
> 时间：2012-05-16T15:41:46.957
> 
> 标签：jenkins, jenkins-plugins

我想使用 "Log Parser Plugin" 解析控制台输出。在[文档](https://wiki.jenkins-ci.org/display/JENKINS/Log+Parser+Plugin)中提供了配置的详细信息。当我为我的工作进行全局配置时，我看不到任何“控制台输出解析”部分，我可以在其中提及解析规则文件的路径。虽然我可以看到控制台输出（构建日志）解析部分。

因此，插件无法找到规则文件路径，我收到此错误：

> 日志解析器插件错误：无法解析日志：无法读取解析规则

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T20:23:59.633

简单的解决方案：

1.  将解析器规则文件（我使用过`.txt`的文件）放在该`JENKINS_HOME`位置。
2.  在 hudson 中配置全局配置，链接到具有特定名称的解析器规则文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T22:56:22.683

在*Manage Jenkins下的**Console Output Parsing*部分中，有一个*Add*按钮。点击它，它将创建一个新的规则部分，您可以在其中输入规则文件的描述和路径。

 **如果您没有看到“*添加*”按钮，请尝试使用其他浏览器。

此处添加的规则随后将可用于在作业特定配置中进行选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-30T00:17:41.923

我能够让它发现规则文件的唯一方法是使用规则文件的卷根目录的完整路径。此外，我必须重新保存使用规则的作业以使它们使用更新的路径。**

# android - 通知默认文本颜色

> ID：10621984
> 
> 赞同：1
> 
> 时间：2012-05-16T15:42:14.317
> 
> 标签：android, notifications, styles

此文档在这里：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html#CustomExpandedView](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#CustomExpandedView)

说：

...要在 Android 2.3 及更高版本上应用系统的默认通知颜色，请使用以下样式`res/values-v9/styles.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="NotificationText" parent="android:TextAppearance.StatusBar.EventContent" />
    <style name="NotificationTitle" parent="android:TextAppearance.StatusBar.EventContent.Title" />
</resources> 
```

我正在使用 android 1.6 进行开发。

但是，如果我执行上述操作，则会收到此错误：

```
error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.StatusBar.EventContent'. 
```

任何想法？

谢谢

# ruby - 使用 Ruby 在 Windows 中读取区域位置设置（国家代码）？

> ID：10621985
> 
> 赞同：1
> 
> 时间：2012-05-16T15:42:16.150
> 
> 标签：ruby, windows, internationalization, regional-settings

我正在尝试使用 Ruby访问*控制面板：区域和语言：位置：**当前位置设置。***我只对国家代码感兴趣。

我得到的最接近的是系统语言环境中的国家代码，但这并不是我所追求的。

```
`systeminfo | findstr /B /C:"System Locale"`.to_s.upcase.strip[30..31] 
```

我希望那里的人可能知道。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T17:17:20.997

使用 Win32 API：

```
require 'Win32API'

# Set up some Win32 constants
GEOCLASS_NATION  = 16
GEO_ISO2         = 4
GEO_FRIENDLYNAME = 8

# Set up some API calls
GetUserGeoID = Win32API.new('kernel32', 'GetUserGeoID', ['L'], 'L')
GetGeoInfo   = Win32API.new('kernel32', 'GetGeoInfoA', ['L', 'L', 'P', 'L', 'L'], 'L')

# Get user's GEOID
geoid = GetUserGeoID.call(GEOCLASS_NATION)
=> 77

# Get ISO name
buffer = " " * 100
GetGeoInfo.call(geoid, GEO_ISO2, buffer, buffer.length, 0)
geo_iso = buffer.strip
=> "FI"

# Get friendly name
buffer = " " * 100
GetGeoInfo.call(geoid, GEO_FRIENDLYNAME, buffer, buffer.length, 0)
geo_name = buffer.strip
=> "Finland" 
```

文档：http `GetUserGeoID`:
[//msdn.microsoft.com/en-us/library/dd318138.aspx](http://msdn.microsoft.com/en-us/library/dd318138.aspx)

文档`GetGeoInfo`：
[https ://docs.microsoft.com/en-us/windows/desktop/api/winnls/nf-winnls-getgeoinfoa](https://docs.microsoft.com/en-us/windows/desktop/api/winnls/nf-winnls-getgeoinfoa)

要将 GEOID 转换为位置名称，您还可以使用此表：http:
[//msdn.microsoft.com/en-us/library/dd374073.aspx](http://msdn.microsoft.com/en-us/library/dd374073.aspx)

# javascript - JS：获取相同值的数量

> ID：10621988
> 
> 赞同：1
> 
> 时间：2012-05-16T15:42:41.523
> 
> 标签：javascript, algorithm

假设我有这个数组：

```
[1, 2, 2, 3, 3, 3, 4] 
```

我如何返回一个数组/对象，其中包含一个值出现多少次，例如：

```
{1:1, 2:2:, 3:3, 4:1} 
```

这是我到目前为止所拥有的：

```
// sort first
arr.sort();

for (var i = 0, l = arr.length, i < l, i++) {
    // what should go here ???? 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:49:50.243

```
// Our results will be loaded into cont
var cont = {};

// For each number in our value array
for ( var i = 0; i < vals.length; i++ ) {
   // If it's found in the result array
   cont[ vals[i] ]
     // Increment it
     ? cont[ vals[i] ]++
     // Else, set it to 1
     : cont[ vals[i] ] = 1 ;
} 
```

使用 while 循环和变量赋值可以更简单：

```
var vals = [1, 2, 2, 3, 3, 3, 4], // Values to cycle through
    cont = {},                    // Object to store results in
    indx = i = -1;                // Index and Counting variables

while ( indx = vals[ ++i ] )      // While a value exists for location i
  cont[ indx ]                    // Check to see if it's in the result object
    ? cont[ indx ]++              // If it is, increment it
    : cont[ indx ] = 1 ;          // If it is not, set it to 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:48:01.597

您正在寻找的是[直方图](http://en.wikipedia.org/wiki/Histogram)：

[http://jsfiddle.net/jbabey/jdMgp/](http://jsfiddle.net/jbabey/jdMgp/)

```
var array = [1, 2, 2, 3, 3, 3, 4];
var results = {};

for (var i = 0; i < array.length; i++) {
    if (results.hasOwnProperty(array[i])) {
        results[array[i]]++;
    } else {
        results[array[i]] = 1;
    }
}

console.log(results);​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:47:13.510

无需排序。

```
var result = {};
for (var i = 0; i < arr.length; i++){
    if (!result[arr[i]]) {
        result[arr[i]]=0;
    }
     result[arr[i]]+=1;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T15:50:43.987

干得好！

```
var arr = [1, 2, 2, 3, 3, 3, 4]; // Sample data
var countings = {}; // Result object
for (var i = 0; i < arr.length; i++) {
    if(countings[(arr[i])] == undefined) countings[(arr[i])] = 0;
    countings[(arr[i])]++;
} 
```

[小提琴在这里。](http://jsfiddle.net/m9j8d/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T15:53:22.923

您可以使用数组`forEeach` 方法：

```
var freq = {}, arr = [1, 2, 2, 3, 3, 3, 4];
arr.forEach(function(x){
   freq[x] = freq[x] ? freq[x]+1 : 1;
});
//=> freq[1] = 1, freq[2] = 2, freq[3] = 3 and freq[4] = 1
//=> arr is still [1, 2, 2, 3, 3, 3, 4] 
```

# asp.net-mvc-3 - 对同类代码的行为感到困惑？

> ID：10621991
> 
> 赞同：2
> 
> 时间：2012-05-16T15:42:48.393
> 
> 标签：asp.net-mvc-3, actionlink

我正在编写我的第一个 MVC3 应用程序，但我被困在某个时刻。这是我不清楚的，

在 Taskscontroller 生成的编辑操作如下所示：

```
// GET: /Tasks/Edit/5

public ActionResult Edit(int id)
{
Task task = db.Tasks.Find(id);
    return View(task);
} 
```

对应的视图代码如下：

```
@Html.ActionLink("Edit", "Edit", new { id = item.TaskId }) 
```

这里 id 正确传递给 Edit 操作。

这就是我修改 create (Get) 方法以从视图接收 id 值的方式，代码片段如下，

```
public ActionResult Create(int i)
{
    ViewData["I"] = i;
    return View(i);
} 
```

对应的视图代码如下，

```
@Html.ActionLink("c", "Create", "Tasks", new { id = someId }, new { @class = somecssclass}) 
```

任何帮助表示赞赏。为什么在create action id 值是null？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:15:03.003

尝试

```
public ActionResult Create(int id)
{
    ViewData["I"] = i;
    return View(i);
} 
```

默认模型绑定器找不到用于绑定的匹配接收参数`id`或其错字？此外，如果您想接收字符串，您还应该发布字符串

```
@Html.ActionLink("c", "Create", "Tasks", new { id = someId.ToString() }, new { @class = somecssclass}) 
```

如果你收到`FormCollection`你会发现`id`那里像

```
 public ActionResult Create(string i, FormCollection col)
    {
        var id = col["id"];
        ViewData["I"] = i;
        return View(i);
    } 
```

# jquery-autocomplete - jquery自动完成源函数请求发送者

> ID：10621992
> 
> 赞同：1
> 
> 时间：2012-05-16T15:42:50.577
> 
> 标签：jquery-autocomplete

我正在使用 jquery 自动完成功能

我尝试获取调用源值的控件（发件人）

我使用一个函数来获取我的列表。

类似的东西（看起来像）：

```
$("#input").autocomplete({
    source: function (request, response) {
        $.post("/AjaxPostURL", request, response);
    }
}); 
sample From : http://stackoverflow.com/questions/1512607/how-do-i-set-jquery- 
```

自动完成到发布而不是获取

但我的是一个外部函数

我想在我的函数中捕获控件

有点像这样（看起来像）：

```
 $("#input").autocomplete({
        source: myfunction (this)
        }
    }); 

myfunction = function (request, response, control ) {
            $.post("/AjaxPostURL", request, response);
            control.xxx
} 
```

我需要保持请求和响应。但我还需要调用该函数的控件。

我怎样才能做到这一点？

保护你

* * *

第2部分

我认为它应该看起来像

```
source: function( event, ui ) {     
        myfunction(event,ui ,$(this));
        } 
```

问题：此时 $this 不存在。只有在调用函数时才会设置它。并且它在我的函数上未定义（当她被调用时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:06:26.043

使用**this.element**来获取调用者 elememt，例如

```
source: function (request, response) {
    $.getJSON(myFunction(this.element, request.term),
       response); 
```

另请参阅： [jQuery 自动完成：从“源”事件中选择 Id](https://stackoverflow.com/questions/3619945/jquery-autocomplete-select-id-from-source-event)

# html - DIV 透明边框在 IE7 中不显示底层背景

> ID：10621994
> 
> 赞同：0
> 
> 时间：2012-05-16T15:42:55.533
> 
> 标签：html, css, internet-explorer, border, cross-browser

我有一个带有纯色背景和透明边框的 div。

在 IE8+ 和 Chrome 中，透明边框显示底层背景颜色。但是，在 IE7 中边框是透明的：边框后面不显示背景。

如何让 IE7 像 IE8+、Chrome 和“现代”浏览器一样显示边框？

这是我的 HTML 和 CSS（在[http://jsfiddle.net/hG82h/1/](http://jsfiddle.net/hG82h/1/)上查看它）：

HTML：

```
<html>
<body>
    <div id="div1"></div>
    <div id="div2"></div>    
</body>
</html>​ 
```

CSS：

```
div {
    width: 200px;
    height: 20px;
    background-color: #AAA;
}
#div1 {
    border: 10px solid transparent;
}
#div2 {
    border: 10px solid #666;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:04:38.427

尝试改用该`padding`属性，就像在[这个例子](http://jsfiddle.net/hG82h/2/)中一样。

但是要提一下 IE、Chrome 和 Mozilla 中盒子模型的区别。我建议阅读和使用[this](http://css-tricks.com/box-sizing/)，否则结果取决于浏览器。

# ruby-on-rails - Mongo 和 Rails 新手 - 尝试查询用户并获取语法错误

> ID：10621996
> 
> 赞同：-1
> 
> 时间：2012-05-16T15:43:01.143
> 
> 标签：ruby-on-rails, mongodb

我正在尝试查询用户

```
user = User.("linkedin_accounts.uid" => "16268324").first 
```

但我收到此错误：

```
irb):19: syntax error, unexpected tASSOC, expecting $end
user = User.("linkedin_accounts.uid" => "16268324").first
                                       ^
    from (irb):19
    from :0 
```

它的预期结束是什么意思？我的查询怎么错了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:46:24.370

您使用的语法是错误的。之后应该有一个方法`User.`：

```
user = User.first("linkedin_accounts.uid" => "16268324") 
```

# slider - 具有移动到位置行为的滑块控件

> ID：10621997
> 
> 赞同：1
> 
> 时间：2012-05-16T15:43:02.237
> 
> 标签：slider, windows-phone

在这个关于 Windows Phone 上的 Slider 控件的页面中，在最后一段中，提到了一种行为：http: [//msdn.microsoft.com/en-us/library/hh202877 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202877(v=vs.92).aspx)

> 您还可以自定义 Slider 控件的行为。根据使用方式，Slider 控件可能会受益于以下行为：
> 
> *   Move-to-Position：拇指跳到触点的位置。
>     
>     
> *   Snap-to-Tick：拇指跳到接触方向上最接近其当前位置的刻​​度值。

但我无法在可以指定这些行为的类参考页面中找到 [http://msdn.microsoft.com/en-us/library/system.windows.controls.slider(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.slider(v=vs.95).aspx)

我对 Move-To-Position 感兴趣，因为另一个是控件的默认行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:49:43.080

我无法在您上面指定的链接中看到该段落。链接错误？通常要附加行为，您会在 XAML 中执行类似的操作

```
<Slider>
   <Interactivity:Interaction.Behaviors>
       <Behaviours:MyCustomBehavior MyDependProp="someValue" />
   </Interactivity:Interaction.Behaviors>
</Slider> 
```

# jquery - JQuery UI 以任意顺序自动完成多个搜索词

> ID：10621998
> 
> 赞同：2
> 
> 时间：2012-05-16T15:43:05.017
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我遇到的问题，说我的标题是：“stackoverflow 是世界上最好的网站”

如果我这样做，它会找到它：“stackoverflow is the”

但找不到：“stackoverflow 世界”

有谁知道是否可以在 JQuery UI 的自动完成中使用多个单词？